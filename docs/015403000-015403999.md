# StackOverflow 问答 15403000-15403999

# python - 如何在包含现有行字符串中的单词的 pandas 数据框中创建新行？

> ID：15403004
> 
> 赞同：8
> 
> 时间：2013-03-14T06:56:04.447
> 
> 标签：python, pandas

我有一个`DataFrame`用文本字符串`pandas`调用的列。`df.strings`我想将这些字符串的各个单词放在它们自己的行上，而其他列的值相同。例如，如果我有 3 个字符串（以及一个不相关的列，时间）：

```
 Strings Time
0   The dog  4Pm
1  lazy dog  2Pm
2   The fox  1Pm 
```

我想要包含字符串中单词的新行，但其他列相同

```
Strings   --- Words ---Time  
"The dog" --- "The" --- 4Pm  
"The dog" --- "dog" --- 4Pm  
"lazy dog"--- "lazy"--- 2Pm  
"lazy dog"--- "dog" --- 2Pm  
"The fox" --- "The" --- 1Pm  
"The fox" --- "fox" --- 1Pm 
```

我知道如何从字符串中拆分单词：

```
 string_list  = '\n'.join(df.Strings.map(str))
   word_list = re.findall('[a-z]+', Strings) 
```

但是如何在保留索引和其他变量的同时将它们放入数据框中？我正在使用 Python 2.7 和 pandas 0.10.1。

编辑：我现在了解如何使用在[此问题](https://stackoverflow.com/questions/13050003/pandas-apply-function-to-dataframe-that-can-return-multiple-rows)中找到的 groupby 扩展行：

```
def f(group):
    row = group.irow(0)
    return DataFrame({'words':  re.findall('[a-z]+',row['Strings'])})
df.groupby('class', group_keys=False).apply(f) 
```

我仍然想保留其他列。这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T11:19:41.650

这是我不使用的代码`groupby()`，我认为它更快。

```
import pandas as pd
import numpy as np
import itertools

df = pd.DataFrame({
"strings":["the dog", "lazy dog", "The fox jump"], 
"value":["a","b","c"]})

w = df.strings.str.split()
c = w.map(len)
idx = np.repeat(c.index, c.values)
#words = np.concatenate(w.values)
words = list(itertools.chain.from_iterable(w.values))
s = pd.Series(words, index=idx)
s.name = "words"
print df.join(s) 
```

三个结果：

```
 strings value words
0       the dog     a   the
0       the dog     a   dog
1      lazy dog     b  lazy
1      lazy dog     b   dog
2  The fox jump     c   The
2  The fox jump     c   fox
2  The fox jump     c  jump 
```

# c# - 如何在asp.net中调用API URL

> ID：15403006
> 
> 赞同：0
> 
> 时间：2013-03-14T06:56:09.813
> 
> 标签：c#, asp.net, web-services, api, http

我是 asp.net 的新手。我想调用 api url，响应将以 xml 形式返回。我的问题是如何使用 c# 在我的 asp.net 代码中调用下面的 api url。

我正在使用 3.5 的 vs 2008。

API 网址： http://free.worldweatheronline.com/feed/weather.ashx?q=Mumbai&format=xml&num_of_days=2& [key=apikey](http://free.worldweatheronline.com/feed/weather.ashx?q=Mumbai&format=xml&num_of_days=2&key=apikey)

谁能帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:59:52.443

以下代码如何工作？还有更多的API来实现这一点，我认为这是最简单的。

```
 WebClient webClient = new WebClient();
    string content = webClient.DownloadString("http://free.worldweatheronline.com/feed/weather.ashx?q=Mumbai&format=xml&num_of_days=2&key=api_key");
    XElement xml = XElement.Parse(content);
    using (MemoryStream ms = new MemoryStream())
    {
        xml.Save(ms);
        // use the ms here.
    } 
```

或者只是使用它来获取 MemoryStream。

```
MemoryStream ms = new MemoryStream(webClient.DownloadData(uri)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:12:45.183

```
 //Load XML (replace "apikey" in the query string by your API key)
    XDocument xdoc = XDocument.Load(@"http://free.worldweatheronline.com/feed/weather.ashx?q=Mumbai&format=xml&num_of_days=2&key=apikey");

    //Run query with LINQ
        var query = from cc in xdoc.Descendants("current_condition")
                   select cc;

    //To convert memory stream .NET 3.5
    MemoryStream ms = new MemoryStream();
    XmlWriterSettings xws = new XmlWriterSettings();
    xws.OmitXmlDeclaration = true;
    xws.Indent = true;

    using (XmlWriter xw = XmlWriter.Create(ms, xws))
    {
        xdoc.WriteTo(xw);
    }

    // to convert Memory stream if you are using .NET 4+
   Stream stream = new MemoryStream();
   xdoc.Save(stream); 
```

# c - 如何防止c解释sed的\s

> ID：15403007
> 
> 赞同：0
> 
> 时间：2013-03-14T06:56:10.623
> 
> 标签：c, sed

我正在使用以下命令从文件中删除注释的空行并搜索特定模式。

```
sed '/#/d' $file | sed '/^[  ]*$/d' | tr -d '\n' | sed -n 's/^.*tags\s*[{]\s*hosttags\s*=\s*\([0-1]\)\s*[}].*/tags {hosttags = \1}/p' 
```

虽然上面的表达式在 shell 中对我有用，但我必须在 C 中使用它。问题出在这一行。

```
sprintf(buf, "sed '/#/d' %s | sed '/^[  ]*$/d' | tr -d '\n' | sed -n 's/^.*tags\s*[{]\s*hosttags\s*=\s*\([0-1]\)\s*[}].*/tags {hosttags = \1}/p'",file); 
```

C 试图解释 \s 并且编译失败。用 [[:space]] 替换 \s 不起作用。请让我知道如何在 C 中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T06:57:06.050

将反斜杠加倍，更改`\n`为`\\n`、`\s`to`\\s`等：

```
sprintf(buf, "sed '/#/d' %s | sed '/^[  ]*$/d' | tr -d '\\n' | sed -n 's/^.*tags\\s*[{]\\s*hosttags\\s*=\\s*\\([0-1]\\)\\s*[}].*/tags {hosttags = \\1}/p'",file); 
```

当`\\`出现在 C 字符串文字中时，单个反斜杠会嵌入到字符串中的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:57:50.843

将 \s 替换为 POSIX 字符类 [[:space:]]。

# java - 比较嵌套 if 条件和单个 if 条件

> ID：15403015
> 
> 赞同：0
> 
> 时间：2013-03-14T06:56:41.580
> 
> 标签：java, if-statement, nested-loops

我正在从事增强项目。在许多领域，我看到人们使用嵌套的 if 条件。在我看来，这是一个坏主意，因为我们可以使用单个 If 条件来做同样的事情。是否有任何特定原因使用嵌套条件。以下哪个代码使用起来会很有效？

```
if (Condi1== True) {
 if (Condi2== True) {
  if (Condi3== True) {
   int answer = True;
  }
 }
} 
```

或者

```
if((Condi1== True)&&(Condi2== True)&&(Condi3== True))
{
   int answer = True;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:38:03.980

> 在我看来，这是一个坏主意，因为我们可以使用单个 If 条件来做同样的事情。

在你走得太远之前，我建议你比较两个版本生成的字节码。你会发现完全一样。因此，没有理由偏爱其中之一。您*可以*摆脱的是`== True`每种情况下的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:41:58.970

随着 if 语句数量的增加或其复杂性的增加，最好使用 JBoss Drools 之类的规则管理系统

# c# - 在 WP8 中的 TextBox 控件中键入更快

> ID：15403018
> 
> 赞同：3
> 
> 时间：2013-03-14T06:56:59.633
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8

在我的 WP8 应用程序中，我使用了一种搜索方法，当 TexBox 中的文本发生变化时进行搜索。现在我需要修改这个搜索。当用户在 TextBox 中快速键入时，搜索应仅在用户键入后执行。也就是说，不应该对每个更改的文本执行搜索方法。可能吗？请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:05:39.133

> 可能吗？

绝对地。您基本上需要一个计时器 - 或者更确切地说，每次击键都有一个计时器。

最简单的方法可能是说：

*   每次用户敲击一个键，启动一个计时器。计时器应该记住此时已经输入的文本。
*   当计时器触发时，*如果*当前文本与“计时器开始点的文本”相同，则执行搜索。

这样做的一个*潜在*缺点是，如果用户键入“foo”，则计时器启动，用户键入“d”，然后删除该“d”，然后触发计时器，尽管有键入后的活动，它仍将执行搜索. *如果*您认为这是不可取的，您可以简单地维护一个计数器 - 只是`int`说明有多少击键。请记住*，*计时器何时启动，并检查计时器何时触发，计数是否与之前相同。

或者，假设搜索是异步且廉价的，则在*每次*击键时开始搜索......但是当您返回结果时，如果用户从那时起输入，则完全忽略搜索，或者将结果过滤到本地对新的查询文本仍然有效。

（可以使用*单个*计时器来解决问题，这样当用户键入计时器时*，*计时器启动*或*触发时间延迟。我个人认为我会发现这更复杂，但这取决于你。）

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:15:51.290

您可以考虑使用[Reactive 扩展](http://msdn.microsoft.com/en-us/data/gg577609.aspx)库，它是一种异步通信方式，并且对异步活动提供了很多抽象。它是一种基于推送的机制，即只要数据可用，就会通知感兴趣的订阅者。它支持取消问题请求等。例如，请参阅[101 Rx](http://rxwiki.wikidot.com/101samples#toc25)*

# python - 如何同时运行 2 个不同的进程？

> ID：15403019
> 
> 赞同：1
> 
> 时间：2013-03-14T06:57:05.503
> 
> 标签：python, sockets, parallel-processing, queue

一个进程从套接字接收数据，然后将其放入队列中，另一个进程正在处理排队的数据。如何让它们同时运行？

此套接字是 serve_forever，而数据处理仅在队列不为空时才会运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:53:29.910

我让它工作。我不知道这是否是答案。但它的工作，嗯，到目前为止。也许有或将会有错误（希望没有）。欢迎任何改进建议。

```
import multiprocessing
import socket
from multiprocessing import Process, Queue
import time

def handle(connection, address):
  try:
    while True:
      data = connection.recv(1024)
      if data == "":
        break
      else :
        print "RECEIVE DATA : " + str(data)
        xdata = data.strip()
        xdata = data.split(" ")
        for xd in xdata :
          print "PUT Task : " + str(xd)
          QueueTask.put((xd), block=True, timeout=5)
      connection.sendall(data)
  except:
    print "Problem handling request"
  finally:
    connection.close()

class Server(object):
  def __init__(self, hostname, port):
    self.hostname = hostname
    self.port = port

  def start(self):
    self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.socket.bind((self.hostname, self.port))
    self.socket.listen(1)
    while True:
      conn, address = self.socket.accept()
      process = multiprocessing.Process(target=handle, args=(conn, address))
      process.daemon = True
      process.start()

def f_Processor():
  time.sleep(10)
  print 'PROCESSOR Starting'
  while 1:
    try :
      job = QueueTask.get(True,1)
      print "GET Task : " + str(job)
      time.sleep(5)
    except Exception as err :
      pass
  print 'PROCESSOR Exiting'

if __name__ == "__main__":
  server = Server("localhost", 9999)
  QueueTask = Queue()
  try:
    p = multiprocessing.Process(name='Processing', target=f_Processor)
    p.start()
    server.start()
    p.join()
  except:
    print "Unexpected exception"
  finally:
    for process in multiprocessing.active_children():
      process.terminate()
      process.join()
  print "All done" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:35:54.680

这也取决于您是否有服务器或客户端应用程序。如果它是服务器，则可以使用

```
 SocketServer.TCPServer.allow_reuse_address = True       

    self.server = TCPFactory( ( HOST, PORT ), TCPRequestHandler, params )                      

    # Start a thread with the server        
    self.server_thread = threading.Thread( target = self.server.serve_forever )

    self.server_thread.setDaemon( True )       
    self.server_thread.start()

class TCPFactory( SocketServer.ThreadingTCPServer ):    

    def __init__( self, server_address, RequestHandlerClass, params ):
        """
        """

        SocketServer.ThreadingTCPServer.__init__( self, server_address, RequestHandlerClass )
        self.patrams = params

class TCPRequestHandler( SocketServer.BaseRequestHandler ):

    def setup( self ):
       print self.server.params
       pass
    def handle( self ):
       pass 
```

因此，如果客户端连接到服务器，它将启动一个新线程。`setup`and 函数将`handler`被自动调用。对于其他线程，您可以使用计时器或其他线程

```
myt = Timer( 2, chackque, () )
myt.start()

def chackque():
   if not myq.empty():
   #Do what you want 
```

或者只是启动另一个线程：

```
mythread = threading.Thread( target = chackque, args = ( myargs, ) )        
mythread.setDaemon( True )
mythread.start()

def chackque():
   while True:
       if not myq.empty():
       #Do what you want 
```

# python - 正则表达式过滤匹配模式的字符串列表

> ID：15403021
> 
> 赞同：10
> 
> 时间：2013-03-14T06:57:09.537
> 
> 标签：python, regex, list, subset

我更多地使用 R，并且在 R 中更容易做到这一点：

```
> test <- c('bbb', 'ccc', 'axx', 'xzz', 'xaa')
> test[grepl("^x",test)]
[1] "xzz" "xaa" 
```

`test`但是如果是一个列表，如何在python中做到这一点？

PS我正在使用谷歌的python练习来学习python，我更喜欢使用正则表达式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2019-08-27T08:21:12.210

一般来说，您可以使用

```
import re                                  # Add the re import declaration to use regex
test = ['bbb', 'ccc', 'axx', 'xzz', 'xaa'] # Define a test list
reg = re.compile(r'^x')                    # Compile the regex
test = list(filter(reg.search, test))      # Create iterator using filter, cast to list 
# => ['xzz', 'xaa'] 
```

或者，反转结果并获取所有与正则表达式不匹配的项目：

```
list(filter(lambda x: not reg.search(x), test))
# >>> ['bbb', 'ccc', 'axx'] 
```

请参阅[Python 演示](https://ideone.com/AKHH88)。

**使用说明**：

*   [`re.search`](https://docs.python.org/3/library/re.html#re.search)*在字符串中的任意位置*找到第一个正则表达式匹配并返回一个匹配对象，否则`None`
*   [`re.match`](https://docs.python.org/3/library/re.html#re.match)*仅在字符串 start 处*查找匹配，它不需要完整的字符串匹配。所以，`re.search(r'^x', text)`=`re.match(r'x', text)`
*   [`re.fullmatch`](https://docs.python.org/3/library/re.html#re.fullmatch)仅当完整字符串与模式匹配时才返回匹配项，因此`re.fullmatch(r'x')`= `re.match(r'x\Z')`= `re.search(r'^x\Z')`。

如果您想知道`r''`前缀的含义，请参阅[Python - 在使用正则表达式查找句点（句号或 .）时，我应该使用字符串前缀 r 吗？](https://stackoverflow.com/questions/19249949/python-should-i-be-using-string-prefix-r-when-looking-for-a-period-full-stop)和 [Python 正则表达式 -r 前缀](https://stackoverflow.com/questions/2241600/python-regex-r-prefix)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T07:01:54.863

您可以使用以下内容查找列表中的任何字符串是否以`'x'`

```
>>> [e for e in test if e.startswith('x')]
['xzz', 'xaa']
>>> any(e.startswith('x') for e in test)
True 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T07:04:28.213

你可以使用[`filter`](http://docs.python.org/2/library/functions.html#filter). 我假设您想要一个包含旧列表中某些元素的新列表。

```
new_test = filter(lambda x: x.startswith('x'), test) 
```

或者，如果您想在过滤器函数中使用正则表达式，您可以尝试以下操作。它需要`re`导入模块。

```
new_test = filter(lambda s: re.match("^x", s), test) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-08T20:45:06.027

当您想从列表中的每个字符串中提取多个数据点时的示例：

输入：

```
2021-02-08 20:43:16 [debug] : [RequestsDispatcher@_execute_request] Requesting: https://test.com&uuid=1623\n 
```

代码：

```
pat = '(.* \d\d:\d\d:\d\d) .*_execute_request\] (.*?):.*uuid=(.*?)[\.\n]'
new_list = [re.findall(pat,s) for s in my_list] 
```

输出：

```
[[('2021-02-08 20:43:15', 'Requesting', '1623')]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-10T15:17:05.070

这是一些很好的即兴创作。可能有帮助..

```
import re
l= ['bbb', 'ccc', 'axx', 'xzz', 'xaa'] #list
s= str( " ".join(l))                   #flattening list to string
re.findall('\\bx\\S*', s)               #regex to find string starting with x

['xzz', 'xaa'] 
```

# jquery-ui - 在 jquery 折叠中显示两个图表时，highcharts 的行为很奇怪

> ID：15403024
> 
> 赞同：0
> 
> 时间：2013-03-14T06:57:16.147
> 
> 标签：jquery-ui, highcharts

我按照[这个链接](http://jsfiddle.net/DkHyd/)实现了类似 jQueryUI 崩溃的效果，但它可以扩展任意数量的区域。

然后，我使用 highcharts 在两个区域中渲染了两个图表。但是只有第二个图表可以正确显示，而第一个图表不能。我设置了第一个图表呈现的区域的宽度和高度，但得到了相同的结果。

我编写了两个 javascript 函数来分别控制渲染两个图表。奇怪的是，如果我注释掉呈现第二个图表的第二个函数，第一个图表可以正确显示。

请给我一些关于如何解决问题的提示。

像这样的html文件：

```
<div id="notaccordion">
<h3>first chart<h3>
<div id="firstchart"></div>
<h3>second chart</h3>
<div id="secondchart"></div>
</div> 
```

两个javascript函数是这样的：

```
function render_one() {
   ...
   // set the variable 'renderTo' to "firstchart"
   ...
}

function render_two() {
   ...
   // set the variable 'renderTo' to "secondchart"
   ...
} 
```

# tsung - 负载测试和 Tsung - 同时开始录制

> ID：15403025
> 
> 赞同：0
> 
> 时间：2013-03-14T06:57:16.190
> 
> 标签：tsung

当我开始录制或使用命令启动 tsung 时，我遇到了这个问题

```
1) sh tsung-recorder.sh start
2) sh tsung.sh start
--------error---------
tsung-recorder.sh: line 61: [: 5.7.5: unary operator expected
Starting Tsung recorder on port 8090
[root@aum44 tsung-1.4.2]# {"init terminating in do_boot",{'cannot get bootfile','/usr/lib/erlang//lib/tsung_recorder-1.4.2/priv/tsung_recorder.boot'}}
--------error--------- 
```

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:53:38.543

我假设你做了 ./configure，如果一切正常，你现在必须安装 tsung，如果你想从源文件所在的目录运行它，你将无法运行 tsung编辑 tsung.sh 以修复路径。

# hibernate - StaleObjectException，但真的很奇怪

> ID：15403026
> 
> 赞同：0
> 
> 时间：2013-03-14T06:57:27.727
> 
> 标签：hibernate, staleobjectstate

我继承了一个应用程序，它执行一些基于触发器的插入和更新，偶尔会抛出 StaleObjectException。我尝试添加很多调试（tx、hibernate、type 等），这让我更加困惑。

```
15:21:00 Calling dao.insert
15:21:00 starting Trancation T1 
15:21:01 insert records including object #290595
15:21:01 Transaction T1 commits 
```

我在日志、休眠插入和数据中看到了 tx 提交，并且确实将具有 id #290595 的对象绑定为值。15:24:00 有类似的插入，但直到 15:25:00 应用程序完全静默（没有用户，没有其他活动）。

```
15:25:00 Start a Required_new transaction T2
15:25:00 Calling dao.finder
15:25:01 dao transaction uses propagated T2
15:25:01 Select returns object with id #290595
15:25:01 ends propagated transacted finder
15:25:02 calling dao.update
15:25:02 dao transaction uses propagated T2
15:25:02 binds object with id #290595
15:25:02 Could Not Synchronize Database State With Session (StaleObjectStateException) 
```

数据库中的 sql 查询显示记录 #290595 实际上不存在。插入和失败之间有 4 分钟。不用说，这通常在一天中的大部分时间都有效，但突然之间......

休眠不会在事务提交时自动刷新和提交吗？

我假设插入已将数据移动到缓存而不是数据库，在缓存中再次找到，但拒绝更新，因为它们不在数据库中。所以问题是真的有人有什么好主意吗？

它是一个 oracle 数据库，我试图确保 T2 具有Required_new 事务，并且对isolation_level 进行了序列化，但效果不大。我开始认为插入以某种方式未提交，？！

欢迎任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:57:05.207

好吧，我自己找到了答案。

我偶然发现了[Hibernate ver 2 中 StaleObjectStateException](http://www.dil.univ-mrs.fr/~massat/docs/hibernate-2/api/net/sf/hibernate/StaleObjectStateException.html)的 javadoc ：

```
Thrown when a version number or timestamp check failed, indicating that the Session 
contained stale data (when using long transactions with versioning). Also occurs
if we try delete or update a row that does not exist. 
```

我总是假设第二个，从不看第一个..版本确实是时间戳，在阅读[了这篇文章](http://www.java.net/node/685787)之后，我将版本属性修改为 long，所有错误都立即消失了。不确定差异，但它对应用程序逻辑没有影响，所以..？

为什么有人要使用时间戳进行版本控制？

# jquery - Youtube API json 请求，我可以看到对象，但是当我尝试打印到控制台时，它说函数未定义。

> ID：15403036
> 
> 赞同：2
> 
> 时间：2013-03-14T06:58:04.827
> 
> 标签：jquery, json, api, youtube

这是我的 HTML 中的调用

```
<script src="http://gdata.youtube.com/feeds/users/AbrahamLingo/uploads?alt=json-in-script&max-results=30&callback=charms" ></script> 
```

这是一个不断抛出未定义错误的简单函数。

```
 function charms(data) {

console.log(data); 
```

}

为什么它会在控制台中抛出错误？即使我可以看到它请求的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:54:00.397

在这里我已经完成了..如果它是正确的，那么标记为正确:)

```
<script type="text/javascript">
var playListURL = 'http://gdata.youtube.com/feeds/users/AbrahamLingo/uploads?alt=json&callback=?';

var videoURL= 'http://www.youtube.com/watch?v=';
$.getJSON(playListURL, function(data) {
var list_data="";
$.each(data.feed.entry, function(i, item) {
var feedTitle = item.title.$t;
var feedURL = item.link[1].href;
var fragments = feedURL.split("/");
var videoID = fragments[fragments.length - 2];
var url = videoURL + videoID;
var thumb = "http://img.youtube.com/vi/"+ videoID +"/hqdefault.jpg";
 alert(feedTitle);
});
});

</script> 
```

演示链接：- [http://jsfiddle.net/7gq6Y/](http://jsfiddle.net/7gq6Y/)

# c# - 为系统托盘图标 C# 保存位图的问题

> ID：15403037
> 
> 赞同：0
> 
> 时间：2013-03-14T06:58:07.807
> 
> 标签：c#, bitmap, stream, notifyicon

我正在尝试编辑位图并将其用作我的系统托盘图标的图标。我想知道是否有一种方法可以编辑和使用它，而不必将其保存为本地文件，因为这看起来很乱，并且在 .exe 的根目录中留下了一个 .ico 文件。我的代码如下。

```
//To Save icon to disk
bitmap.Save("icon.ico", System.Drawing.Imaging.ImageFormat.Icon);
Icon createdIcon = Icon.FromHandle(bitmap.GetHicon());
bitmap.Dispose();
return createdIcon; 
```

有没有更优雅的方法来做到这一点，将其保存为内部资源？还是在内存流中？另一件事，就是这个函数每5分钟运行一次更新系统托盘图标，它必须通过图标，所以我可以在我必须关闭流的时候工作。

任何帮助将不胜感激，因为这让我很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:20:10.463

The problem is simpler to solve than you're making it. There is no reason to write the bitmap out to a file on disk. You can simply omit the call to the `Save` method.

The [`GetHIcon` method](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.gethicon.aspx) is the real trick, as it allows you to convert a `Bitmap` into an `Icon`, and you've already found that one.

Here's my sample code. I added a `NotifyIcon` and `Timer` control to a form, and wired up the event handlers in the obvious manner. `rnd` is a class-level instance of `Random`, just for testing purposes.

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
private static extern bool DestroyIcon(IntPtr hIcon);

private void timer1_Tick(object sender, EventArgs e)
{
   Icon icon;

   // Create a temporary new Bitmap with the size of a notification icon.
   using (Bitmap bmp = new Bitmap(SystemInformation.SmallIconSize.Width, SystemInformation.SmallIconSize.Height))
   {
      // Fill the temporary bitmap with a random number.
      using (Graphics g = Graphics.FromImage(bmp))
      {
         g.DrawString(rnd.Next().ToString(),
                        SystemFonts.MessageBoxFont,
                        SystemBrushes.ControlText,
                        0.0F, 0.0F);
      }

      // Convert this bitmap to an icon.
      icon = Icon.FromHandle(bmp.GetHicon());
   }

   // Update the notification icon to use our new icon,
   // and destroy the old icon so we don't leak memory.
   Icon oldIcon = notifyIcon1.Icon;
   notifyIcon1.Icon = icon;
   DestroyIcon(oldIcon.Handle);
   oldIcon.Dispose();
} 
```

Works perfectly, no temporary files required.

**Edit:** Modified the above code sample to solve a GDI object leak that would eventually bring your application to its knees. How quickly would depend on the interval at which the Timer was set to tick (or however you're determining that the icon should change in your app).

It turns out that when you call the `Dispose` method on an icon that was created using [`Icon.FromHandle`](http://msdn.microsoft.com/en-us/library/system.drawing.icon.fromhandle.aspx), the associated native GDI object is not destroyed. I think that's a bug in the WinForms implementation since it defies programmer expectations, but apparently `Icon.FromHandle` does *not* assume ownership of the handle. To be fair, the documentation *does* say this in the "Remarks" section, but who reads that?

If you don't know to do this, you've got a memory leak on your hands. To fix it, you have to P/Invoke the Win32 function for destroying a GDI icon object ([`DestroyIcon`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648063.aspx)) and call it explicitly.

*Please make sure that your application does this, however and wherever appropriate, to ensure that the old icons get destroyed and the associated memory is freed!*

# python - python-比较日期

> ID：15403038
> 
> 赞同：0
> 
> 时间：2013-03-14T06:58:16.183
> 
> 标签：python, date, compare

我正在写一个 python 作业，我们正在写酒店客户的房间预订。我们应该比较到达和离开的日期。如果出发日期早于到达日期，它将打印错误消息，但运行后我一直收到错误消息。我不知道为什么....我正在尝试制作该客户信息的命名元组，即

Reservation=namedtuple('Reservation','确认房间号_到达_日期_出发_日期名称)

所以我取出了到达日期（2008 年 10 月 13 日），因为它是一个字符串，所以我将它拆分。我试图将所有数字组合成一个整数。之后......我使用日期时间......是的......似乎我在这里做错了什么。我不明白错误的含义： Invalid literal for int() with base 10

这是我的程序：

```
 elif lst[0]=='LR':
        for r in new_reservation_list:
            for d in r.arrive_date:
                lsst=d.split()
                month1=lsst[:2]
                months=int(''.join([str(x) for x in month1]))
                date1=lsst[3:5]
                dates=int(''.join(([str(x) for x in date1])))
                year1=lsst[7:]
                years=int(''.join(([str(x) for x in year1])))
            arrive_date1=datetime.date(int(months),int(dates),int(years))
            for e in r.depart_date:
                lstt=e.split()
                month2=lsst[:2]
                months2=int(''.join([str(x) for x in month2]))
                date2=lsst[3:5]
                dates2=int(''.join(([str(x) for x in date2])))
                year2=lsst[7:]
                years2=int(''.join(([str(x) for x in year2])))
            depart_date1=datetime.date(int(months2),int(dates2),int(years2))
            if arrive_date>depart_date==True:
                print('Sorry, can''t reserve room', r.room_number,' (',r.arrive_date,' to ',r.depart_date,'); can''t leave before you arrive.')
            elif lst[1] in new_reservation_list:
                    print('Sorry, can''t reserve room ',r.room_number, ' (',r.arrive_date,' to ',r.depart_date,'); it''s already booked (Conf. #',r.confirmation_number)
            else:
                print('Reserving room',r.room_number,'for',r.name,'-- Confirmation #',r.confirmation_number,'\n       ','arriving',r.arrive_date,', departing ',r.depart_date)
                print('{:5}{:8}{:16}{:15}{:25}'.format('No.','Rm.','Arrive','Depart','Guest'))
                print('{:5}{:4}{:12}{:12}{:17}'.format(r.confirmation_number,r.room_number,r.arrive_date,r.depart_date, r.name)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:08:24.463

检查时间模块中的[strptime](http://docs.python.org/2/library/time.html#time.strptime)函数。您可以使用此功能转换日期并进行比较。

# jquery - jQuery 库和 CSS

> ID：15403039
> 
> 赞同：0
> 
> 时间：2013-03-14T06:58:21.830
> 
> 标签：jquery, html, css

我正在尝试设计一个页面，该页面有一个 JQuery 库，每张图片都有描述性文本。目标是使图像居中，描述性文本向左 5 个像素。我遇到的问题是每张图片的宽度都不同。我似乎无法将描述性文字贴在图片旁边。我需要使用什么 CSS 来使每个“文本”div 在每张幻灯片中的 img 左侧 5 px？谢谢你的帮助。

编辑：每张图片都应该有不同的宽度。挑战是让文本相应地水平改变位置

这是JQuery：

```
<script type="text/javascript">
$('#gallery').cycle({ 
    fx:     'none', 
    speed:  'fast', 
    timeout: 15000, 
    next:   '#navrightarrow', 
    prev:   '#navleftarrow' 
});
</script>

<script type="text/javascript">
$('#gallery').before('<div id="imgnav">').cycle({ 
                fx: 'none', 
                speed:  'slow', 
                timeout: 15000, 
                pager:  '#imgnav', 
                pagerAnchorBuilder: function(idx, slide) { 
                        var src = $('img',slide).attr('src');
                        src = src.substring(0, src.length - 8);
                        return '<a href="#"><img src="' + src + 'detail.jpg" width="30" height="30" /></a>'; 
                } 
        }); 

</script> 
```

这是HTML：

```
<div id="gallery_wrapper">
            <div id="gallery">
                <div class="slide">
                    <div id="text">
                        <h5>Lambent</h5>
                        <p>2002</p>
                        <p>Oil on Linen</p>
                        <p>60 x 46 inches</p>
                    </div>
                    <a href="images/1 Lambent-detail.jpg" target="_blank"><img src="images/1 Lambent-full.jpg" alt="slide1"></a>
                </div>

                <div class="slide">
                    <div id="text">
                        <h5>Marsh Ikat</h5>
                        <p>2002</p>
                        <p>Oil on Linen<p>
                        <p>64 x 36 inches</p>
                    </div>
                    <a href="images/2 Marsh-Ikat-detail.jpg" target="_blank"><img src="images/2 Marsh-Ikat-full.jpg" alt="slide2"></a>
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:10:39.827

关于图像的不同宽度问题，我只知道使用像 div 这样的包装器。

```
<style>
  div.slide div.image_wrapper {
      width:  200px;    // define a fixed width
      height: 200px;    // define a fixed height here
      overflow: hidden; // this helps us have images behave of same size, without scaling 
    }
</style>

<div class="slide">
    <div class="text">     // You are repeating an ID text, have it as a class
        <h5>Marsh Ikat</h5>
        <p>2002</p>
        <p>Oil on Linen<p>
        <p>64 x 36 inches</p>
    </div>
    <div class="image_wrapper">
        <a href="images/2 Marsh-Ikat-detail.jpg" target="_blank">
            <img src="images/2 Marsh-Ikat-full.jpg" alt="slide2">
        </a>    
    </div>
</div> 
```

`image_wrapper`修复了您不同的图像大小问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:58:33.283

所以这只是一个黑客，但它完成了工作。如果有人能告诉我一个更好的方法来做到这一点，我更愿意，但我所做的是为每个文本描述分配一个新的 div 名称并使用 position:relative; 然后根据每张图片需要去的位置移动它。这花了很长时间，但它奏效了。

```
<div class="slide">
    <div class="text" id="mb1">
        <h5>Lambent</h5>
        <p>2002</p>
        <p>Oil on Linen</p>
        <p>60 x 46 inches</p>
    </div>
    <a href="images/marshes and ponds/Lambent-detail.jpg" target="_blank"><img src="images/marshes and ponds/Lambent-full.jpg" alt="slide1"></a>
</div> 
```

# git - Apache commons exec 运行管道命令失败

> ID：15403044
> 
> 赞同：1
> 
> 时间：2013-03-14T06:58:32.997
> 
> 标签：git, apache-commons-exec

我希望 Apache Commons-exec 运行：

> 混帐状态 | 头-n1 | 切-c13-

但是似乎它无法执行命令行并给出错误，有什么想法吗？

```
CommandLine cmdLine = CommandLine.parse( "git status | head -n1 | cut -c13-" );
DefaultExecutor executor = new DefaultExecutor();
executor.setWorkingDirectory( file );
executor.execute( cmdLine ); 
```

错误：

```
error: unknown switch `n'
usage: git status [options] [--] <filepattern>... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T07:14:57.367

`CommandLine.parse`不会创建 bash shell 来解释您的管道。

如“[如何将字符串参数传递给使用 Apache Commons Exec 启动的可执行文件？](https://stackoverflow.com/questions/4695664/how-to-pipe-a-string-argument-to-an-executable-launched-with-apache-commons-exec) ”中所述：

> 您不能添加管道参数 ( `|`)，因为 [here, in your case] ' `git status`' 命令不会接受。
> **当您在 shell 中键入命令行时，解释管道并进行特殊处理的是 shell（例如 bash）**。

您应该使用 a**`ByteArrayInputStream`**将一个命令的输出提供给另一个命令；

# sql-server - 从没有回车/输入的表中导出数据

> ID：15403050
> 
> 赞同：1
> 
> 时间：2013-03-14T06:58:56.563
> 
> 标签：sql-server, export-to-csv

我正在尝试从 MS SQL 表中导出数据，一列存储来自文本区域的数据，并且其中很多都有回车键和逗号，这弄乱了 csv 文件。如何在没有 CR 的情况下导出数据，是否可以用冒号而不是逗号分隔导出数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:01:02.560

一般来说，这取决于您的 CSV“接收者”有多聪明。

导出包含回车的列是正常的，例如存储在数据库中的 html 代码片段。导出此类列的解决方案是：

1.  用分隔符包裹列内容（通常是配额，但您可以选择自己的）。
2.  将 CR 替换为特殊的唯一字符序列，然后将此序列替换为导出另一侧的 CR。

所有这些都可以使用 SSMS 中的“导出数据”任务来完成。对于方法 1，您可以使用“文本限定符选项”选项，对于方法 2，您应该编写一个查询来替换 CR 序列。

请查看文档：http: [//msdn.microsoft.com/en-us/library/ms140052%28v=sql.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms140052%28v=sql.100%29.aspx)

# java - 当一个实例的成员暴露给外界时，它可以被垃圾收集吗

> ID：15403052
> 
> 赞同：3
> 
> 时间：2013-03-14T06:59:00.307
> 
> 标签：java

举个例子

```
// class Toy {
//     public Object b = new Object();
// }

Toy toy = new Toy();
Object theB = toy.b;
toy = null;

// Can toy instance be garbage collected right now? 
```

我想也许`toy`不能像`theB`当前所指的那样被垃圾收集，`toy.b`并且变量`b`不能没有`toy`（作为`b`实例成员变量`toy`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:00:15.643

## *简短*的回答

是的，它可以，因为没有*对*`Toy`. 想一想：你怎么能引用原始`Toy`实例？不可能，不是吗？因此，它确实是*垃圾*，将被收集。

有关Java 中的*可达性*和*引用类型的*更多信息（即，什么是*强引用*、*弱引用*等，以及这些类型的引用如何与垃圾收集器交互），请查看 java.xml[包的优秀文档。 lang.ref](http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/ref/package-summary.html)。

* * *

## *更完整，事情不是那么简单*的答案

为了扩展讨论，并且绝对准确，我可以想到至少一种情况，即使在您的 , 类的代码不同之后，`Toy`也永远无法收集实例。`toy = null``Toy`

如果`Toy`类的构造函数在某种全局变量中添加了对新创建实例的引用（或者，更准确地说，如果对象可以从 GC 根强访问）。例如：

```
public class Toy {
  private static final List<Toy> myToys = new ArrayList<>();
  public Toy() { myToyw.add(this); }
} 
```

如果是这种情况，那么当您`toy = null`在代码中执行此操作时，仍然无法对实例进行 GC，因为仍然有一种方法可以到达它（通过*强引用*），即`Toy.myToys.get(0)`.

但是，这只是为了完整性。**我强烈建议*不要*使用这种类型的代码**，因为它肯定会带来很多麻烦，包括但不限于奇怪的内存泄漏（即无法对实例进行 GC）和多线程问题（即，您发布了对实例在其构造函数返回之前，那么另一个线程可能会将该对象视为已*部分初始化*，即可能处于不一致状态）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:00:39.010

是的，`toy`如果没有人提及它可以被垃圾收集。一旦`b`是类型`Object`，它只引用它自己的`Class`对象，没有别的，所以`toy`不被. 引用`b`。

# javascript - 仅当 jquery 中的按钮中有值时才显示按钮？

> ID：15403054
> 
> 赞同：-1
> 
> 时间：2013-03-14T06:59:08.473
> 
> 标签：javascript, jquery, button

我有一个这样的按钮：

```
 <button> {{ pages.first }}</button>

 <button>{{ pages.last }}</button> 
```

有时值 {{ pages.first }} 可以为空，有时不能。如果值为空，我根本不想显示按钮。我试过这个，但这个隐藏按钮总是：

```
if(!$('button').val()){
    $('button').hide();
}
else {
    $('button').show();
} 
```

我究竟做错了什么？

我的按钮在代码中如下所示：

```
<button class="next_prev" onclick="" disabled>{% get_pages %} {{ pages.next }}</button> <button class="next_prev" onclick="" id="last_button" disabled>{% get_pages %} {{ pages.last }}</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:00:02.610

您需要使用`text()`而不是`val()`..并且如果有多个按钮，您需要遍历按钮...

尝试这个

```
 $.each($("button"),function(){  //in case of multiple button
  if(!$(this).text()){
    $(this).hide();
   }
  else {
    $(this).show();
  }
}) 
```

[在这里工作小提琴](http://jsfiddle.net/bipen/bqb9n/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:00:26.973

用于`.each()`遍历和检查所有按钮：[示例](http://jsfiddle.net/M4tCH/1/)

```
$.each($("button"),function(){
  if(!$(this).text().trim()){
     $('this).hide();
  }
  else {
     $(this).show();
  }
}); 
```

您的代码`.val()`适用于`<input type="submit"/>`按钮

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:04:02.353

使用`text`而不是`val`可以解决问题

```
if(!$('button').text()){
   $('button').hide();
}
else {
  $('button').show();
} 
```

# javascript - 有没有办法在重定向后获取谷歌搜索重定向网址？

> ID：15403056
> 
> 赞同：0
> 
> 时间：2013-03-14T06:59:15.910
> 
> 标签：javascript, google-chrome-extension

例如，您在 google.com 中搜索某些内容。您单击结果链接，然后您将被重定向到“ [https://www.google](https://www.google) .....”然后到正确的站点。我怎样才能得到我来到正确的网站后的网址（' [https://www.google .....'）。](https://www.google)

```
document.referrer 
```

无能为力。它只给出“ [https://www.google.com/](https://www.google.com/) ”，而我想获得完整的网址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:08:26.950

执行此操作的最佳方法可能是[`chrome.webRequest`](http://developer.chrome.com/extensions/webRequest.html)在重定向之前使用旧的引荐来源网址。

一种方法是这样的：

```
var requestIds = [];

chrome.webRequest.onBeforeRequest.addListener(function(details){
  var temp = {requestId:details.requestId,url:details.url}
  requestIds.push(temp);
},
{urls: ["*://www.google.com/url*"]});
chrome.webRequest.onBeforeSendHeaders.addListener(function(details){
  requestIds.forEach(function(v,i,a){
    if(parseInt(details.requestId)-parseInt(v.requestId)<=2){
      details.requestHeaders.forEach(function(val,ind,arr){
        if(val.name =="Referer")
          val.value = v.url;
      });
      requestIds.splice(i,1);
    }
  });
},
{urls: ["<all_urls>"],types:["main_frame"]},["requestHeaders","blocking"]); 
```

您还需要`"webRequest","webRequestBlocking"`清单文件中的权限。

这样做是提取 url，然后将其添加到近似结果调用的请求标头中。我最初打算展示在重定向期间如何`requestId`保持不变，但它不是传统的重定向。据我所见，没有办法将第一个请求与下一个请求关联起来，除非它的 id 非常接近，因此`<= 2`. 不管你想用它做什么，第一个监听器都会为你提供你想要的 url，只是可能很难将它与结果页面相关联。

请注意，虽然这确实会更改引荐来源标头，但它不会显示在开发工具或`document.referrer`.

# java - 如果java对.class文件使用解释器，对机器级代码使用编译器，那么问题是什么？

> ID：15403057
> 
> 赞同：-5
> 
> 时间：2013-03-14T06:59:17.400
> 
> 标签：java

为什么java同时使用解释器和编译器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:18:20.527

Personally, I think the biggest difference is that languages like Python, or Ruby that are solely interpreted have poorer performance. Java gets better performance because of the compilation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:06:56.273

> 为什么java同时使用解释器和编译器

独立于平台。

编译器生成与机器无关的代码。可以由不同的机器相关编译器以自己的方式解释。即在一台机器上编译的java程序可以在具有不同处理器、操作系统等的不同机器上运行。

> 如果java对.class文件使用解释器，对机器级代码使用编译器，那么问题是什么？

编译器生成`.class`的文件称为`bytecode`. 这`bytecode`由 JVM 读取`JIT`并在 JVM 上执行。

他们就是这样设计的。可能使程序员更容易。

# jquery - 如何在滑块中添加数字控制器

> ID：15403058
> 
> 赞同：0
> 
> 时间：2013-03-14T06:59:19.147
> 
> 标签：jquery, jquery-ui

有人知道如何在这个**jquery`div`滑块中添加数字控件，我**[在这里](http://jsfiddle.net/jhunlio/c7VA4/2/)设置小提琴

任何建议和想法表示赞赏。先感谢您......

```
var totalSlides = 0;
var currentSlide = 1;
var contentSlides = "";

$(document).ready(function(){
  $("#slideshow-previous").click(showPreviousSlide);
  $("#slideshow-next").click(showNextSlide);

  var totalWidth = 0;
  contentSlides = $(".slideshow-content");
  contentSlides.each(function(i){
    totalWidth += this.clientWidth;
    totalSlides++;
  });
  $("#slideshow-holder").width(totalWidth);
  $("#slideshow-scroller").attr({scrollLeft: 0});
  updateButtons();
});

function showPreviousSlide()
{
  currentSlide--;
  updateContentHolder();
  updateButtons();
}

function showNextSlide()
{
  currentSlide++;
  updateContentHolder();
  updateButtons();
}

function updateContentHolder()
{
  var scrollAmount = 0;
  contentSlides.each(function(i){
    if(currentSlide - 1 > i) {
      scrollAmount += this.clientWidth;
    }
  });
  $("#slideshow-scroller").animate({scrollLeft: scrollAmount}, 1000);
}

function updateButtons()
{
  if(currentSlide < totalSlides) {
    $("#slideshow-next").show();
  } else {
    $("#slideshow-next").hide();
  }
  if(currentSlide > 1) {
    $("#slideshow-previous").show();
  } else {
    $("#slideshow-previous").hide();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:56:11.150

看看这个[如何将数字选择器与 jQuery Slider 结合起来？](http://jqfaq.com/how-to-combine-a-numeric-selector-with-a-jquery-slider/)关联。这将帮助您在 jquery 滑块中添加数字控制。

```
 $('.control').click(function () {
            currentSlide = $(this).val();
            updateContentHolder();
            updateButtons();
            updateNumericSelector();
        }); 
```

我希望这会对您有所帮助。

# ios - Objective-c 如何对 textField 进行验证

> ID：15403059
> 
> 赞同：6
> 
> 时间：2013-03-14T06:59:20.557
> 
> 标签：ios, objective-c, validation, uitextfield

我想防止用户不输入任何数据以及只输入空格。所以基本上必须至少有一个没有空格的字符。然后我还想删除单词开头的任何空格，所以第一个字母是一个不是空格的字符。

**编辑**

用户必须输入一些内容，如果用户在它之前输入几个空格，那么我想修剪这些空格。我还想防止用户只输入空格。

**例子**

如果用户输入像“James Dean”这样的名字和姓氏，我想拿走第一个空格，而不是 James 和 Dean 之间的第二个空格。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T07:16:12.247

将您设置为您的`UIViewController`目的地并实施此方法：`UITextField``delegate`

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

  // verify the text field you wanna validate
  if (textField == _nameTextField) {

    // do not allow the first character to be space | do not allow more than one space
    if ([string isEqualToString:@" "]) {
      if (!textField.text.length)
        return NO;
      if ([[textField.text stringByReplacingCharactersInRange:range withString:string] rangeOfString:@"  "].length)
        return NO;
    }

    // allow backspace
    if ([textField.text stringByReplacingCharactersInRange:range withString:string].length < textField.text.length) {
      return YES;
    }

    // in case you need to limit the max number of characters
    if ([textField.text stringByReplacingCharactersInRange:range withString:string].length > 30) {
      return NO;
    }

    // limit the input to only the stuff in this character set, so no emoji or cirylic or any other insane characters
    NSCharacterSet *set = [NSCharacterSet characterSetWithCharactersInString:@"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890 "];

    if ([string rangeOfCharacterFromSet:set].location == NSNotFound) {
      return NO;
    }

  }

  return YES;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T07:23:04.883

试试这样可能对你有帮助，这是我的代码

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range 

    replacementString:(NSString *)string{
        if([text.text length]==0){
        if([string isEqualToString:@" "]){
            return NO;
        }
        }
        return YES;
    } 
```

通过放置此代码，用户不会输入空格作为第一个字母，但它接受字符串中间的空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:14:05.360

我会在第一部分给你一个提示。

```
NSString *tempname1 = [self.textField.text stringByReplacingOccurrencesOfString:@" " withString:@""];

BOOL thereAreJustSpaces = [tempname1 isEqualToString:@""]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-03T11:30:01.023

```
-(void)removeSpacesFromTextFields:(id) sender {
    NSString *trim = [self.FNTextField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
    if ([trim length] == 0) {
      self.FNTextField.text = @"";
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T07:18:35.857

Try this, If you want to prevent space in your text field.

```
- (void)viewDidLoad
{
 [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(checkSpace:) name:UITextFieldTextDidChangeNotification  object:textfield];

}
 -(void)checkSpace:(NSNotification *)notification
{

  str = [textfield.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] ;
 textfield.text=str;
} 
```

# c# - 将 datagridview 中选定行的数据显示到文本框中

> ID：15403061
> 
> 赞同：0
> 
> 时间：2013-03-14T06:59:34.640
> 
> 标签：c#, winforms

我试图将 datagridview 中的数据显示到另一种形式的文本框中。表格 2 有文本框。这是我的代码：

```
private void btnAddOrder_Click(object sender, EventArgs e)
{
    Add_Order addOrder = new Add_Order();
    addOrder.
} 
```

我试图输入，`addOrder.textBox1.Text = dtgv_Items.SelectedRows[0].Cells[1].Value.ToString();`但`textBox1`应该自动出现的没有显示，这意味着有一个错误。我怎么能解决这个问题？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:03:59.123

以下是任何选定单元格的示例：

表格2：

```
private string pVal;

//getter and setter
public string PassVal
{
    get { return pVal; }
    set { pVal = value; }
}

//or event that you need
private void Form2_Load(object sender, EventArgs e)
{
    textBox1.Text = pVal;
} 
```

表格1：

```
Form2 f2 = new Form2();

int selectedCellCount = dataGridView1.GetCellCount(DataGridViewElementStates.Selected);

if (selectedCellCount > 0)
{
    for (int i = 0; i < selectedCellCount; i++)
    {
        int column = dataGridView1.SelectedCells[i].ColumnIndex;
        int row = dataGridView1.SelectedCells[i].RowIndex;
        f2.PassVal = dataGridView1[column, row].Value.ToString();
    }
}

f2.Show(); 
```

使用这种和平的代码，您将从文本框中的任何选定单元格中获取文本。

希望它对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:52:04.777

首先，在第二种形式上创建 getter 和 setter。

```
private string sampleData = string.Empty;

public string SampleData
{
    get { return sampleData; }
    set { value = sampleData; }
} 
```

然后你可以在你的第一个表单上使用它：

```
private void btnAddOrder_Click(object sender, EventArgs e)
{
    Add_Order addOrder = new Add_Order();
    addOrder.SampleData = dtgv_Items.SelectedRows[0].Cells[1].Value.ToString();
} 
```

要在第二个表单上查看结果，请使用：

```
this.TextBox1.Text = SampleData; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:12:28.740

使用它自己直接的文本框

```
textBox1.Text = dtgv_Items.SelectedRows[0].Cells[1].Value.ToString(); 
```

# jquery - JQuery 插件选项赋值语法

> ID：15403067
> 
> 赞同：0
> 
> 时间：2013-03-14T06:59:54.313
> 
> 标签：jquery, jquery-plugins, plugins

我正在尝试向我的第一个 jquery 插件添加选项，但我不断收到以下错误：

> 未捕获的语法错误：意外令牌：weather2.js:6

我的插件代码如下所示：

```
(function($) {
    $.fn.extend({
        weather: function(options) {
            var defaults = {
                cityName : "Johannesburg"; // required
                mainImage : ""; // required
                jhbImage : ""; // required
                dbnImage : ""; // required
                cptImage : ""; // required
            };
            var options = $.extend(defaults, options);

            return this.each(function() {
                // plugin logic goes here.
                // options are referenced with options.optionName (eg. options.cityName)
            });
        }
    });
})(jQuery) 
```

这个错误让我觉得我应该用与声明相同的方式替换作业中的冒号`var defaults`，但我看到的每个教程都表明这也是不正确的。

任何人都可以提供一些清晰度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:04:20.740

在对象文字中将分号换成逗号 :)

```
 var defaults = {
            cityName: "Johannesburg",
            mainImage: "",
            jhbImage: "",
            dbnImage: "",
            cptImage: ""
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:56:02.020

在默认变量中使用逗号而不是分号。

# winforms - 在 MSVC 2008 中设置图标时遇到问题

> ID：15403070
> 
> 赞同：0
> 
> 时间：2013-03-14T07:00:07.113
> 
> 标签：winforms, visual-studio-2008, visual-c++, icons

我正在 MSVC 2008 中制作 C++/CLR Winforms 应用程序，但我似乎无法设置图标。

我添加了一个 .ico 文件作为资源（Add->Resource->Icon->Import）并在 .rc 文件中添加了一行（并且完全重新编译，但没有任何改变；它仍然使用默认图标。

没有添加其他图标。我可以使用内置的图标编辑器查看和编辑 .ico；它有 16x16 和 32x32 两种尺寸。

我还需要做什么？

[编辑] 刚刚注意到我的图标在 Windows 资源管理器中正确显示，但在应用程序运行时却没有。

# php - Paypal DODIRECT 未返回 ACK 付款和付款在 CODEIGNITER 中成功完成

> ID：15403071
> 
> 赞同：0
> 
> 时间：2013-03-14T07:00:10.940
> 
> 标签：php, mysql, paypal, payment

获取错误：遇到 PHP 错误

严重性：通知

消息：未定义的索引：ACK

文件名：controllers/contest.php

行号：1191

有时会在沙盒帐户中成功转移错误和金额，但贝宝没有返回响应数组，我的代码是

function payment($array) { //$this->session->set_userdata('contestArr',$array); $DPFields = array( 'paymentaction' => 'Sale', // 您希望如何获得付款。授权表示付款是基本身份验证，需要通过 Auth & Capture 进行结算。Sale 表示这是您的最终销售正在请求付款。默认为销售。'ipaddress' => $_SERVER['REMOTE_ADDR'], // 必填。付款人浏览器的 IP 地址。'returnfmfdetails' => '1' // 判断是否要结果的标志由 FMF 返回。1 或 0。默认为 0。);

```
 $CCDetails = array(
                        'creditcardtype' => $array['cardtype'],                      // Required. Type of credit card.  Visa, MasterCard, Discover, Amex, Maestro, Solo.  If Maestro or Solo, the currency code must be GBP.  In addition, either start date or issue number must be specified.
                        'acct' => $array['cardno'],                        // Required.  Credit card number.  No spaces or punctuation.  
                        'expdate' => $array['ccmnth'].$array['ccyear'],                         // Required.  Credit card expiration date.  Format is MMYYYY
                        'cvv2' => $array['cvv'],                        // Requirements determined by your PayPal account settings.  Security digits for credit card.
                        'startdate' => '',                          // Month and year that Maestro or Solo card was issued.  MMYYYY
                        'issuenumber' => ''                         // Issue number of Maestro or Solo card.  Two numeric digits max.
                    );

    $PayerInfo = array(
                        'email' => 'surend_1296637287_per@contentshoppe.com',                               // Email address of payer.
                        'payerid' => '',                            // Unique PayPal customer ID for payer.
                        'payerstatus' => '',                        // Status of payer.  Values are verified or unverified
                        'business' => 'NeedAJingle'                             // Payer's business name.
                    );

    $PayerName = array(
                        'salutation' => '',                     // Payer's salutation.  20 char max.
                        'firstname' => $array['payer_fname'],                   // Payer's first name.  25 char max.
                        'middlename' => '',                         // Payer's middle name.  25 char max.
                        'lastname' => $array['payer_lname'],                            // Payer's last name.  25 char max.
                        'suffix' => ''                              // Payer's suffix.  12 char max.
                    );

    $BillingAddress = array(
                            'street' => '123 Test Ave.',                        // Required.  First street address.
                            'street2' => '',                        // Second street address.
                            'city' => 'Kansas City',                            // Required.  Name of City.
                            'state' => 'MO',                            // Required. Name of State or Province.
                            'countrycode' => 'US',                  // Required.  Country code.
                            'zip' => '64111',                           // Required.  Postal code of payer.
                            'phonenum' => '555-555-5555'                        // Phone Number of payer.  20 char max.
                        );

    $ShippingAddress = array(
                            'shiptoname' => '',                     // Required if shipping is included.  Person's name associated with this address.  32 char max.
                            'shiptostreet' => '',                   // Required if shipping is included.  First street address.  100 char max.
                            'shiptostreet2' => '',                  // Second street address.  100 char max.
                            'shiptocity' => '',                     // Required if shipping is included.  Name of city.  40 char max.
                            'shiptostate' => '',                    // Required if shipping is included.  Name of state or province.  40 char max.
                            'shiptozip' => '',                      // Required if shipping is included.  Postal code of shipping address.  20 char max.
                            'shiptocountry' => '',                  // Required if shipping is included.  Country code of shipping address.  2 char max.
                            'shiptophonenum' => ''                  // Phone number for shipping address.  20 char max.
                            );

    $PaymentDetails = array(
                            'amt' => round($array['gross_total'],2),                            // Required.  Total amount of order, including shipping, handling, and tax.  
                            'currencycode' => 'USD',                    // Required.  Three-letter currency code.  Default is USD.
                            'itemamt' => round($array['gross_total'],2),    // Required if you include itemized cart details. (L_AMTn, etc.)  Subtotal of items not including S&H, or tax.
                            'shippingamt' => '',                    // Total shipping costs for the order.  If you specify shippingamt, you must also specify itemamt.
                            'shipdiscamt' => '',                    // Shipping discount for the order, specified as a negative number.  
                            'handlingamt' => '',                    // Total handling costs for the order.  If you specify handlingamt, you must also specify itemamt.
                            'taxamt' => '',                         // Required if you specify itemized cart tax details. Sum of tax for all items on the order.  Total sales tax. 
                            'desc' => 'Add contest payment',                            // Description of the order the customer is purchasing.  127 char max.
                            'custom' => '',                         // Free-form field for your own use.  256 char max.
                            'invnum' => '',                         // Your own invoice or tracking number
                            'notifyurl' => ''                       // URL for receiving Instant Payment Notifications.  This overrides what your profile is set to use.
                        );  

    $OrderItems = array();
    $Item    = array(
                        'l_name' => substr($array['title'],0,100),                      // Item Name.127 char max.
                        'l_desc' => substr($array['headline'],0,100),                       // Item description.  127 char max.
                        'l_amt' => round($array['gross_total'],2),                          // Cost of individual item.
                        'l_number' => rand(2,2).'@-@'.rand(1,2),                        // Item Number.  127 char max.
                        'l_qty' => 1,                           // Item quantity.  Must be any positive integer.  
                        'l_taxamt' => '',                       // Item's sales tax amount.
                        'l_ebayitemnumber' => '',               // eBay auction number of item.
                        'l_ebayitemauctiontxnid' => '',         // eBay transaction ID of purchased item.
                        'l_ebayitemorderid' => ''               // eBay order ID for the item.
                );
    array_push($OrderItems, $Item);

    $Secure3D = array(
                      'authstatus3d' => '', 
                      'mpivendor3ds' => '', 
                      'cavv' => '', 
                      'eci3ds' => '', 
                      'xid' => ''
                      );

    $PayPalRequestData = array(
                            'DPFields' => $DPFields, 
                            'CCDetails' => $CCDetails, 
                            'PayerInfo' => $PayerInfo, 
                            'PayerName' => $PayerName, 
                            'BillingAddress' => $BillingAddress, 
                            'ShippingAddress' => $ShippingAddress, 
                            'PaymentDetails' => $PaymentDetails, 
                            'OrderItems' => $OrderItems, 
                            'Secure3D' => $Secure3D
                        );

    $PayPalResult = $this->paypal_pro->DoDirectPayment($PayPalRequestData);

    //print_r($PayPalResult);

    if(!$this->paypal_pro->APICallSuccessful($PayPalResult['ACK']))
    {
        $errors = array('Errors'=>$PayPalResult['ERRORS']);
        $this->template->load('template','paypal_error',$errors);
        exit;
    }
    else
    {
        $data = array('PayPalResult'=>$PayPalResult);

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:21:19.493

您必须使用密钥`Ack`而不是`ACK`访问状态。

例子：`$PayPalResult['Ack']`

# tomcat - 在 Windows 的 Tomcat 中为 Jenkins 设置 JENKINS_JAVA_OPTIONS

> ID：15403078
> 
> 赞同：1
> 
> 时间：2013-03-14T07:00:33.223
> 
> 标签：tomcat, jenkins

我正在这样做：[http ://heylinux.com/en/?p=161](http://heylinux.com/en/?p=161)

但是，我不知道如何在`JENKINS_JAVA_OPTIONS`.

我正在 Windows 7 中从 Tomcat 部署 Jenkins。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:42:46.983

我创建`setenv.bat`并`tomcat\bin`添加了这一行：

```
set JAVA_OPTS=-Dmail.smtp.starttls.enable="true" 
```

有效。

# php - 在多列中显示列表项并限制行数

> ID：15403079
> 
> 赞同：0
> 
> 时间：2013-03-14T07:00:33.737
> 
> 标签：php, html, css

我正在开发一个 php 项目，其中我从数据库中获取列表，我需要在 html 中以 3 列和 10 行显示这些数据，并在最后添加一个按钮“更多”

```
<?php foreach ($items as $item) { ?>
        <ul>
            <li><a href="<?php echo $item['href']; ?>" >
            <?php echo $item['name']; ?></a></li>
        </ul>
        <?php } ?> 
```

我希望它显示为-

项目 1 项目 2 项目 3

第 4 项 第 5 项 第 6 项

.

.

.

.

最多 10 行

最后一行将是

item item "more" - 仅当列表中有更多项目时

“更多”只是一个链接，它将带我到其他页面

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:05:11.813

添加`display:inline`到 li 并使用伪类来打破它

```
ul{
    margin:0
}
li{
    display:inline
}
li:nth-child(3n):after {
 content:"\A"; 
 white-space:pre; 
} 
```

**脚本（显示更多链接）**

```
$('#moreli').toggle($("li").size() > 6); 
```

这会在 6 个列表项之后启用更多链接，您可以更改脚本中的计数。

**注意**：减少列表项以检查效果

**[演示更新](http://jsfiddle.net/SdB62/22/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T07:27:03.840

```
<style>
 .row { 
     width:100%; 
     float:left;    
 }
 .item { 
     width:100px; 
     float:left;    
 }

</style>

<?php 
    //*** your array of items
    $items = array("item1", "item2", "item3", "item4","item5", "item6", "item7", "item8", "item9", "item10");

    $numItems = sizeof($items);

    //*** max number of rows
    $maxRows = 10;
    $maxItems = 3 * $maxRows;

    echo '<div class="row">';
    for ($i=0; $i<$numItems;$i++) {
        echo '<div class="item">'.$items[$i].'</div>';
        if (($i+1) % 3 == 0) {
            //*** if divisible by 3, close row
            echo '</div><div class="row">'; 
        }
        if ($i == $numItems) {
            //*** last item reached, close div
            echo '</div>';  
        }
        if ($i+1 >= $maxItems ) {
            //*** max 10 row, add more button.
            echo '</div><input type="submit" value="Add More">'; 
        return; 
        }
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:45:39.540

尝试使用这个：

```
<?php 
$count=0;
foreach ($items as $item) { ?>
<ul class="col3">
  <li>
  <?php if($count > 9) { ?>
    <a href="#">More</a></li></ul>
    <?php break;
  } else{ ?>
    <a href="<?php echo $item['href']; ?>" >
    <?php echo $item['name'];
    $count=$count+1;
    ?></a>
  <?php } ?>
  </li>
</ul>
<?php } ?> 
```

并为它关注css

```
.col3
{
margin-left:-3%;
}

.cols3 li
{
width:30%;
margin-left:3%;
display:inline-block;
vertical-align:top;
}

.cols3 li a
{
display:block;
} 
```

# unit-testing - 如何为 Spring Security 编写测试用例

> ID：15403080
> 
> 赞同：0
> 
> 时间：2013-03-14T07:00:35.777
> 
> 标签：unit-testing, spring-mvc, spring-security

我是 Spring 和 Spring Security 的新手，但我被要求为 Spring Security 开发测试用例，

谁能指导我如何做？

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:48:51.783

Spring Security 开发的测试用例覆盖率很高。请查看现有的测试用例。例如，如果您创建自己的提供程序，请在此处查看示例： [https ://fisheye.springsource.org/browse/~tag=3.0.8.RELEASE/spring-security/core/src/test/java/org/ springframework/安全/身份验证/dao](https://fisheye.springsource.org/browse/~tag=3.0.8.RELEASE/spring-security/core/src/test/java/org/springframework/security/authentication/dao)

如果您创建自己的身份验证过滤器，请查看此处的示例： [https ://fisheye.springsource.org/browse/~tag=3.0.8.RELEASE/spring-security/web/src/test/java/org/springframework/安全/网络/身份验证/www](https://fisheye.springsource.org/browse/~tag=3.0.8.RELEASE/spring-security/web/src/test/java/org/springframework/security/web/authentication/www)

希望能帮助到你。如果您需要任何其他说明，请告诉我。

此致，

迈克尔

# java - 内置方法来获得一些数字的排列而不重复

> ID：15403084
> 
> 赞同：-3
> 
> 时间：2013-03-14T07:00:41.107
> 
> 标签：java, permutation

是否有内置方法可以返回某些数字的所有排列而不重复

例如：

```
 int num=215;
                // i want to get (215,251,512,521,125,152) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:04:42.343

使用此第一个链接将数字分隔为数字。 [如何获得整数的单独数字？](https://stackoverflow.com/questions/3389264/how-to-get-the-separate-digits-of-an-int-number)

然后用它来找到它的排列。 [获取 int[] 的排列删除重复集](https://stackoverflow.com/questions/8732875/getting-permutations-of-an-int-removing-duplicates-sets)

然后最后用这个把它变成一个数字。[如何在java中连接int值？](https://stackoverflow.com/questions/2674707/how-to-concatenate-int-values-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:06:00.290

可以使用Permutations[类。](http://www.jsc.nildram.co.uk/api/jsc/combinatorics/Permutations.html)排列以 1 到 n 的形式返回，您必须将其映射到您的数字。

# jquery - 使用 Jquery 链接各种 div 以单击功能

> ID：15403085
> 
> 赞同：0
> 
> 时间：2013-03-14T07:00:43.397
> 
> 标签：jquery

我有 3 个部分。组、类别、子类别。

有 2 组：grp1、grp2 对于 grp1，有 3 个类别：grp1_C1、grp1_C2、grp1_C3 对于 grp 2，有 2 个类别：grp2_C1、grp2_C2

对于grp1_C1，有3个子类别：grp1_C1_S1、grp1_C1_S2等

所有部分都将从数据中动态获取，因此必须使用 jquery 完成链接等。

我想要做的是显示 2 个组按钮。当我单击任何组时，我想显示与其链接的类别，然后当我单击其中的任何类别时，我想显示其中的后续子类别。

我将为所有人创建 div。

```
<div id='group'>
    <div id='grp1' class="group"></div>
    <div id='grp2' class="group"></div>
</div>

<div id='cat'>
    <div id='grp1_cat' class="cat">
       <div id='grp1_cat1' class="cat"></div>
       <div id='grp1_cat2' class="cat"></div>
    </div>
    <div id='grp2_cat' class="cat">
       <div id='grp2_cat1' class="cat"></div>
       <div id='grp2_cat2' class="cat"></div>
    </div>
</div> 
```

对于子类别也是如此。

现在，当我单击 group1 时，我只希望组 1 类别可见，然后当我单击一个类别时，只有链接的子类别可见。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:20:18.423

See this : [Fiddle](http://jsfiddle.net/aGPcb/)

```
$('#cat > .cat:not(:first)').hide();
$('#group').on('click', '.group', function(){
   $('#cat > .cat').hide();
   $('#' + this.id + '_cat').show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:13:34.777

你可以尝试类似的东西

```
$('#cat > .cat').hide();
$('#group').on('click', '.group', function(){
    $('#cat > .cat').hide();
    $('#' + $(this).attr('id') + '_cat').show();
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/dyCpm/1/)

# php - 致命错误：尝试在 Symfony2 中包含 sfEasyGMapPlugin 的 GMap 类时未找到类“sfConfig”

> ID：15403086
> 
> 赞同：0
> 
> 时间：2013-03-14T07:00:46.380
> 
> 标签：php, windows, symfony, netbeans, symfony1

我试图从 Symfony 外部的脚本访问 app.yml，但我收到错误 'Fatal error: Class 'sfConfig' not found' 。对于堆栈溢出中的类似问题，有人提到“您可以启动 Symfony 或包含 sfYaml 解析器并自己解析 app.yml。”

任何人都可以解释这个程序。我使用 Netbeans 创建 Symfony 2 项目

[这](https://stackoverflow.com/questions/7679974/access-sfconfig-class-in-apps-appname-lib)是我在堆栈溢出中提到的答案的链接

我正在尝试在我的项目中设置 sfEasyGMapPlugin。GMap.class 类是试图访问 app.yml 的类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:56:39.380

**你不能**在 Symfony 2 中添加 symfony 1 插件！

您应该尝试使用这些捆绑包：

*   [egeloen/google-map-bundle](https://packagist.org/packages/egeloen/google-map-bundle)

    > 为您的 Symfony2 项目提供谷歌地图集成。

*   [反物质/谷歌捆绑](https://packagist.org/packages/antimattr/google-bundle)

    > GoogleBundle 增加了向您的应用程序添加各种 google 相关服务的能力。其中包括 Google Analytics、Adwords 和静态地图。

# jenkins - 在 Rally 中生成发行说明

> ID：15403091
> 
> 赞同：0
> 
> 时间：2013-03-14T07:01:10.357
> 
> 标签：jenkins, release, rally, release-notes

我正在使用 Rally 来跟踪我的问题。

我想通过 RALLY 生成发行说明（通过一些自动化过程）另外，我想知道我们是否可以在 Jenkins 中有一些工作来从 RALLY 生成发行说明。Rally 已经与我的 Jenkins 集成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:38:07.457

我没有使用过 Jenkins 或它与 Rally 的集成，所以我不能说，但是 Rally 确实有一个发布摘要和一个发布跟踪应用程序。本质上，它们为您提供了一个发布中计划的所有故事和缺陷的列表（可追溯性也有任务和测试用例）。

发布摘要： [https ://github.com/RallyApps/ReleaseSummary](https://github.com/RallyApps/ReleaseSummary)

发布可追溯性： [https ://github.com/RallyApps/ReleaseTraceability](https://github.com/RallyApps/ReleaseTraceability)

如果这些对您不起作用，那么它们可能是一个很好的起点（尽管它们使用的 API 版本已被贬值）。

如果用户故事的名称对发布说明没有帮助，您始终可以向故事添加自定义字段以获得更友好的发布说明描述，然后针对该字段查询给定版本中的所有项目以生成报告.

# android - 如何在不同设备中访问/打开默认应用程序

> ID：15403093
> 
> 赞同：0
> 
> 时间：2013-03-14T07:01:23.863
> 
> 标签：android

我目前正在开发一个**启动器活动**（最低 SDK 版本：7），并偶然发现了一个严重的问题。是否有任何**有效的方法**可以访问/打开**默认应用程序**（如拨号器、浏览器、短信对话列表、电子邮件客户端、系统设置等），这些应用程序常见于不同的设备（如***三星***、***HTC***、***索尼***、***LG***、***Motorola***等），但具有不同的包名称。

我知道我可以通过调用意图来访问它们，例如我可以像这样打开***默认 SMS 客户端***：

```
Intent intent = new Intent("android.intent.action.MAIN");
                intent.setComponent(new ComponentName("com.android.mms","com.android.mms.ui.ConversationList"));
                startActivity(intent); 
```

但是当涉及到不同的制造商（如上面提到的那些）时，包名称会有所不同，即在打开***摩托罗拉设备***的短信客户端的情况下，代码会更改为：

```
Intent moto_intent = new Intent("android.intent.action.MAIN");
                intent.setComponent(new ComponentName("com.motorola.blur.conversations","com.motorola.blur.conversations.ui.ConversationList"));
                startActivity(moto_intent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:09:38.803

使用[隐式](http://www.vogella.com/articles/AndroidIntent/article.html#intents_implicit)意图（而不是显式意图）。

在您的情况下，您将使用[ACTION_SEND](http://developer.android.com/reference/android/content/Intent.html#ACTION_SEND)意图

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.putExtra("address", "5551234567");
intent.putExtra("sms_body", "Hi mom");
// intent.putExtra(Intent.EXTRA_STREAM, imageUri);          
// intent.setType("image/jpeg");
startActivity(intent); 
```

此方法也适用于喜欢使用自己的第三方 SMS 应用程序的用户。

# ios - ihasapp 获取 ios 上已安装应用程序的列表给出错误

> ID：15403094
> 
> 赞同：0
> 
> 时间：2013-03-14T07:01:25.427
> 
> 标签：ios, sigabrt

我在 github 上找到了 ihasapp 框架：[https ://github.com/danielamitay/iHasApp](https://github.com/danielamitay/iHasApp)

我将这两个文件包含在项目中..但是它给出了一个错误：

> 2013-03-14 11:21:35.848 应用程序 [4338:2203] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** - [NSConcreteData initWithContentsOfFile:options:error:]: nil file argument”

这是我在视图控制器中使用的代码：

```
#import "helloworldViewController.h"
#import "iHasApp.h"

@interface helloworldViewController ()

@end

@implementation helloworldViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    iHasApp *detectionObject = [iHasApp new];
    [detectionObject detectAppDictionariesWithIncremental:^(NSArray *appDictionaries) {
        NSLog(@"Incremental appDictionaries.count: %i", appDictionaries.count);
    } withSuccess:^(NSArray *appDictionaries) {
        NSLog(@"Successful appDictionaries.count: %i", appDictionaries.count);
    } withFailure:^(NSError *error) {
        NSLog(@"Failure: %@", error.localizedDescription);
    }];

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

我对 ios 开发真的很陌生，所以错误可能非常小/愚蠢。但任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:02:26.290

作者在这里：

`iHasApp`在内部询问资源项的文件路径，它正在返回`nil`. 然后它使用参数发出`NSData`请求。`nil`

修复推送到 GitHub。

# mysql - 从 mysql 数据库中获取记录时节点 js 出错

> ID：15403106
> 
> 赞同：0
> 
> 时间：2013-03-14T07:02:28.223
> 
> 标签：mysql, node.js, express, pug

**路线：**

```
exports.authenticate = function(req, res) {

    //connection.connect();
    var sql="SELECT * from users where username='"+req.body.user+"' and password='"+req.body.pass+"' LIMIT 1";
    connection.query(sql, function(err, rows, fields) {
        if (err) throw err;

        //res.send('Your data is: ', rows);
        var str="Hi, <b>"+rows[0].name+"</b> ("+rows[0].email+")";

        sql="SELECT username,name from users ORDER BY name";
        connection.query(sql, function(err, datarows, fields) {
            if (err) throw err;
            //res.send('Your data is: ', rows+' <br/> All Users are : ', datarows.length+"<a href='/'>Login</a>");
            console.log(datarows);
            res.render('home.jade', {title: 'Home',result:datarows});
           /*---------------The above calling jade-----------------*/   
        });

        //str+="<a href='/'>Login</a>";
        //res.send(str);
        //connection.end();
    }); 
```

**玉：**

```
extends layout

block content
    //p #{result}
    -var list=[ { username: 'rohankumar1524', name: 'Rohan Kumar' }]
    each item, i in result
        p test #{item.length}
        each role,j in item
            p #{role} 
```

**输出**

```
test

rohankumar1524

Rohan Kumar 
```

**异常输出**

```
function (parser, fieldPackets, typeCast, nestTables, connection) { var self = this; var next = function () { return self._typeCast(fieldPacket, parser, connection.config.timezone, connection.config.supportBigNumbers); }; for (var i = 0; i < fieldPackets.length; i++) { var fieldPacket = fieldPackets[i]; var value; if (typeof typeCast == "function") { value = typeCast.apply(connection, [ new Field({ packet: fieldPacket, parser: parser }), next ]); } else { value = (typeCast) ? this._typeCast(fieldPacket, parser, connection.config.timezone, connection.config.supportBigNumbers) : ( (fieldPacket.charsetNr === Charsets.BINARY) ? parser.parseLengthCodedBuffer() : parser.parseLengthCodedString() ); } if (typeof nestTables == "string" && nestTables.length) { this[fieldPacket.table + nestTables + fieldPacket.name] = value; } else if (nestTables) { this[fieldPacket.table] = this[fieldPacket.table] || {}; this[fieldPacket.table][fieldPacket.name] = value; } else { this[fieldPacket.name] = value; } } } 
```

**还有这个**

```
function (field, parser, timeZone, supportBigNumbers) { switch (field.type) { case Types.TIMESTAMP: case Types.DATE: case Types.DATETIME: case Types.NEWDATE: var dateString = parser.parseLengthCodedString(); if (dateString === null) { return null; } if (timeZone != 'local') { if (field.type === Types.DATE) { dateString += ' 00:00:00 ' + timeZone; } else { dateString += timeZone; } } return new Date(dateString); case Types.TINY: case Types.SHORT: case Types.LONG: case Types.INT24: case Types.YEAR: case Types.FLOAT: case Types.DOUBLE: case Types.LONGLONG: case Types.NEWDECIMAL: var numberString = parser.parseLengthCodedString(); return (numberString === null || (field.zeroFill && numberString[0] == "0")) ? numberString : ((supportBigNumbers && Number(numberString) > IEEE_754_BINARY_64_PRECISION) ? numberString : Number(numberString)); case Types.BIT: return parser.parseLengthCodedBuffer(); case Types.STRING: case Types.VAR_STRING: case Types.TINY_BLOB: case Types.MEDIUM_BLOB: case Types.LONG_BLOB: case Types.BLOB: return (field.charsetNr === Charsets.BINARY) ? parser.parseLengthCodedBuffer() : parser.parseLengthCodedString(); case Types.GEOMETRY: return parser.parseGeometryValue(); default: return parser.parseLengthCodedString(); } } 
```

但是当我在**玉**中使用这段**代码时**

 **```
extends layout

block content
    //p #{result}
    -var list=[  { username: 'rohankumar1524', name: 'Rohan Kumar' }]
    each item, i in list // list in place of result
        p test #{item.length}
        each role,j in item
            p #{role} 
```

**输出**是_

```
test

rohankumar1524

Rohan Kumar 
```

**这是预期的**

**为什么**`module`会出现这个问题，我还有其他`install`的吗`npm`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:29:16.890

试试这个：

**玉**

```
extends layout

block content
    each item in result
        p item.username
        p item.name 
```**

# maven - Pom.xml 不断为 org.springframework.security.extentions 抛出 Missing artifact 错误

> ID：15403120
> 
> 赞同：3
> 
> 时间：2013-03-14T07:03:32.677
> 
> 标签：maven, single-sign-on

下面是我使用 SAML 进行 SSO 的 pom.xml 的一小部分，

```
<properties>
<SAML-version>1.0.0-RC2-SNAPSHOT</SAML-version>
</properties>
<dependency>
<groupId>org.springframework.security.extensions</groupId>
<artifactId>spring-security-saml2-core</artifactId>
<version>${SAML-version}</version>
</dependency> 
```

STS（spring tool suite 3.1）连续抛出错误，

```
"Missing artifact org.springframework.security.extensions:spring-security-saml2-   core:jar:1.0.0-RC2-SNAPSHOT". 
```

我导航到 maven repo，我可以找到 maven 下载的 jar。

请帮助我。

谢谢，塞尔瓦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:20:56.793

添加这个

```
<repositories>
    <repository>
        <id>repo.springsource.org</id>
        <name>repo.springsource.org-snapshots</name>
        <url>http://repo.springsource.org/libs-snapshot</url>
    </repository>
</repositories> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-11T15:44:49.317

[Spring Security SAML 网站](http://projects.spring.io/spring-security-saml/)当前不正确。 groupId 实际上应该是`org.springframework.security.extensions`而不是只是`org.springframework.security`.

以下依赖项配置对我有用：

```
<dependencies>
    <dependency>
        <groupId>org.springframework.security.extensions</groupId>
        <artifactId>spring-security-saml2-core</artifactId>
        <version>1.0.0.RC2</version>
    </dependency>
</dependencies>
<repositories>
    <repository>
        <id>spring-milestones</id>
        <name>Spring Milestones</name>
        <url>http://repo.spring.io/milestone</url>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
</repositories> 
```

# android - 是否可以使用 sl4a 运行一些自定义命令？

> ID：15403121
> 
> 赞同：0
> 
> 时间：2013-03-14T07:03:36.780
> 
> 标签：android, python, sl4a

我实际上正在做一个演示，当我从 sl4a 触发时，我想做一些任务，但据我了解，它只能调用 android api，但如果我想做一些自定义任务，或者你可以说定义一个命令怎么办这将运行我的自定义代码或我的 API。如果某处错了，请纠正我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:58:33.830

使用 API 发送短信非常简单 -

[代码]

```
droid.smsSend(number, body); 
```

[/代码]

但是 sl4a 似乎不支持关闭 wifi 适配器 - 你最接近的是

[代码]

```
 droid.wifiDisconnect(); 
```

[/代码]

除非你知道如何导入一些隐藏的 java api——我仍在试图弄清楚。

这些 api 调用记录在 sl4a 的内置“API 浏览器”中，在编辑脚本时可以在菜单中找到，这样可以更轻松地确定本机 API 是什么或不具备什么能力。

我希望这有帮助

# c# - 检测 ISO 语言代码的正则表达式

> ID：15403122
> 
> 赞同：5
> 
> 时间：2013-03-14T07:03:39.397
> 
> 标签：c#, regex, winforms

我正在尝试检测一个组合框是否包含一个 ISO 语言代码（即 en-GB、el-GR、ru-RU 等），它由 2 个字母字符、一个破折号和另外 2 个字母字符（大写，或者它可能无关紧要？）。

我想知道，有没有一种方法可以使用正则表达式来实现这一点？

我假设表达式看起来像这样（但我在这个主题上没有太多经验）：

```
string pattern = @"^\a{2,2}-\a{2,2}"; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-14T07:10:12.513

像这样的东西应该可以工作：`^[a-z]{2}-[A-Z]{2}$`.

`^`锚指示正则表达式引擎从字符串的开头开始匹配，表示和`[a-z]`之间的任何小写字母。意味着正好 2 次重复。其余的解释相同。最后，指示正则表达式引擎在字符串末尾停止匹配。`a``z``{2}``$`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-01-20T17:35:28.373

[如果我们仔细查看此处](https://msdn.microsoft.com/en-us/library/ee825488(v=cs.20).aspx)的 ISO 639x 代码列表，@npinti 接受的解决方案可能不够准确。或者，您可以通过调用下面的静态方法（C# 代码）自行获取文化列表：

```
System.Globalization.CultureInfo.GetCultures(CultureTypes.AllCultures); 
```

在检索到的值中，您会发现不匹配的样本为“Cy-az-AZ”（3 个代码！）、“zh-CHS”（3 个字母！）或“en-029”（数字！）。奇怪的是，带有数字的那个并没有出现在上面的 MS 链接中，即使是通过该`CultureInfo`方法检索到的。

[此处的](https://stackoverflow.com/questions/7192410/why-is-the-culture-name-for-english-caribbean-en-029)[这篇](http://archives.miloush.net/michkap/archive/2011/08/16/10196054.html)文章讨论了带有数字的文章。

所以这似乎不是一个容易的问题。我们可以尝试使用稍微复杂一点的正则表达式，如下所示，但这并不能保证我们能够将 ISO 文化代码与其他任何事物区分开来。IMO，如果我们真的需要 100% 可靠，可能唯一的选择就是在代码列表中查找该代码以找到完全匹配的代码。

正则表达式选项：

```
^[^-]{2,3}-[^-]{2,3}(-[^-]{2,3})?$ 
```

查找选项：

```
public static bool IsCultureCode(string code)
{
    CultureInfo[] cultures = CultureInfo.GetCultures(CultureTypes.SpecificCultures); //AllCultures
    int i = 0;
    while(i < cultures.Length && !cultures[i].Name.Equals(code, StringComparison.InvariantCultureIgnoreCase))
        i++;
    return i < cultures.Length;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-01T21:55:27.777

`^[a-z]{2}(-[A-Z]{2})?$`

*   前两个字符必须存在且为小写
*   最后两个字符（如果存在）必须为大写，并用连字符与前 2 个字符隔开

火柴：

*   zh
*   zh-CN
*   tr
*   TR-TR
*   汝

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-27T06:42:40.190

用于解析 LCID 的正则表达式：

```
using System;
using System.Text.RegularExpressions;

public class Example {
    public static void Main()
    {
        string pattern = @"(.*)\\(?<lcid>(?<locale>[a-z]{2})-?(?<region>[A-Z]{2})?)\\(.*)";
        string input = @"C:\MainFolder\Folder\en\translations.json C:\MainFolder\Folder\en-AU\translations.json";

        foreach (Match m in Regex.Matches(input, pattern))
        {
            Console.WriteLine("'{0}' found at index {1}.", m.Value, m.Index);
        }
    } 
} 
```

# android - 检索到的时间未转换为当前时区

> ID：15403124
> 
> 赞同：0
> 
> 时间：2013-03-14T07:03:56.060
> 
> 标签：android

我必须将我得到的时间转换为输入并转换为在设备和显示器中设置的当前时区。我尝试了一定程度，但转换时时间没有改变。已经发布了我的代码..

```
String dateandtime="3/14/2013 2:38am" //EDT time
Calendar cal = Calendar.getInstance();
TimeZone z = cal.getTimeZone();
SimpleDateFormat  format1 = new SimpleDateFormat("MM/dd/yyyy hh:mma");  
format1.setTimeZone(z);
cal.setTime(format1.parse(dateandtime)); 
```

“日期和时间”的值将是 EDT 时区，应该转换为任何当前时区。我收到与输出相同的日期和时间。

# google-maps - 如何在单击按钮时动态移动地图上的标记

> ID：15403128
> 
> 赞同：0
> 
> 时间：2013-03-14T07:04:16.493
> 
> 标签：google-maps, google-maps-api-3

我正在动态添加标记并将点击事件添加到地图上添加的每个标记。就是这样，我在地图上添加标记。

```
var pin = new google.maps.LatLng(Y, X);
var marker = new google.maps.Marker({ position: pin, map: map1 });
google.maps.event.addListener(marker, 'click', pinClicked);
marker.setMap(map1); 
```

在单击事件中，根据某些条件，我将显示一个带有某些详细信息和按钮的弹出窗口。一个按钮是关闭弹出窗口，另一个按钮是移动标记。我想要的是当我单击移动标记按钮时，我希望移动标记。我不想将 draggable 属性默认设置为 true，因为它允许在添加到地图时拖动标记。仅当单击弹出窗口上的按钮时，标记才应可拖动。

我怎样才能得到这个工作。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:27:29.467

我创建了这个[jsFiddle](http://jsfiddle.net/6n3Uy/)，它向您展示了如何做到这一点。

```
var markers = [];

function initialize() {
    var myLatLng1 = new google.maps.LatLng(50.965049,5.484231);
    var myLatLng2 = new google.maps.LatLng(50.97,5.474231);
    var myOptions = {
      zoom: 14,
      center: myLatLng1,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    for (var i = 0; i < 2; i++) {

        var marker = new google.maps.Marker({
            position: i === 0 ? myLatLng1 : myLatLng2,
            map: map,
            title: 'Galaconcert ' + i,
            id: i
        });

        markers[i] = marker;
        manageBindings(marker);
    }

    function manageBindings(marker) {

        var id = marker.id;

        google.maps.event.addListener(marker, 'click', function(ev) {

            var contentString = 
                '<div id="infowindow">' +
                'Nice infowindow ' + id + '<br />' +
                '<button class="move" data-id="' + id + '">move me</button> ' +
                '<button class="close" data-id="' + id + '">close me</button><br />' +
                '</div>'
            ;
            marker.infowindow = new google.maps.InfoWindow();
            marker.infowindow.setContent(contentString);
            marker.infowindow.open(map, marker);
        });
    }
}

$(function(){

     $('button.move').live('click', function(){
        var id = $(this).data('id');
        markers[id].setDraggable(true);
    });

    $('button.close').live('click', function(){
        var id = $(this).data('id');
        markers[id].infowindow.close();
    });

    initialize(); 
}); 
```

您应该将所有创建的标记保存在一个数组中，以便您可以访问它们。在信息窗口中，您存储对该数组的引用 - 在我的示例中，它位于按钮的数据属性中。然后，当 infowindow 中发生任何事情时，您可以访问特定标记并将其可拖动选项设置为 true。

代码应该重构，不应该使用`live`，但你应该有这个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T09:15:19.563

Google 标记具有 setDraggable 属性，通过它可以将标记可拖动设置为真或假。

> 标记.setDraggable(true); 或者
> 
> 标记.setDraggable(false);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:53:14.930

Markers 有一种方法可以让您设置它们的可拖动选项。

然后还将按钮更改为放置标记，这样当您将标记拖动到您想要的位置时，您可以再次单击它以放置标记并将可拖动属性再次设置为 false。

```
 new google.maps.event.addListener(button, 'click', function(){
        if(button.status == "Move"){
            marker.setDraggable(true);
        } else {
            marker.setDraggable(false);
        }
    }); 
```

请注意，这是仅突出显示 setDraggable 函数的伪代码。

# ruby-on-rails - 将 curl 转换为 ruby 等效项

> ID：15403134
> 
> 赞同：2
> 
> 时间：2013-03-14T07:04:34.730
> 
> 标签：ruby-on-rails, ruby, json, curl, httparty

我无法将 curl 转换为 ruby​​ 脚本。基本上我正在尝试使用 parse.com RESTful api。这是卷曲

```
curl -X POST \
-H "X-Parse-Application-Id: XXX" \
-H "X-Parse-REST-API-Key: YYY" \
-H "Content-Type: application/json" \
-d '{
   "channels": [
     "Giants",
     "Mets"
   ],
   "data": {
     "alert": "test message"
   }
 }' \
 https://api.parse.com/1/push 
```

这就是我一直在尝试做的（使用 HttParty）

```
puts "hello world"

require 'httparty'

require 'json'

class Parse
    include HTTParty
    base_uri "api.parse.com:443"
    headers "X-Parse-Application-Id" => "XXX", "X-Parse-REST-API-Key" =>  "YYY", "Content-Type" => "application/json"

end

option = {:channels => "Giants", :data => {:alert => "un mensaje de mierda"}}
puts Parse.post("/1/push", body: option.to_json) 
```

)

我收到错误代码 107 说无效的 json。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:07:25.443

我认为您只需要在第二个参数中将 ruby​​ 结构序列化为 JSON。参数应该是 POST 的字符串，而不是 Ruby 结构。

我认为这会起作用（我能看到的唯一可能的问题是您是否会在编写代码时通过 https 进行连接）：

```
data = {"channels": ['Giants'], "data": {alert: 'un mensaje '}}
puts Parse.post("/1/push", body: data.to_json) 
```

. . . Ruby 数据结构中的类 JSON 格式*不是*JSON，

```
foo: "bar" 
```

只是另一种 Ruby (1.9+) 的说法

```
:foo => "bar" 
```

# asp.net - 在 asp.net 中使用 Url 重写的查询字符串中的默认值

> ID：15403135
> 
> 赞同：2
> 
> 时间：2013-03-14T07:04:36.947
> 
> 标签：asp.net, url-rewriting

我已经使用 global.asax 实现了 asp.net 3.5 的 URL 重写代码。

这是示例。www.ABC.com/Content/1/Flowers 或 www.ABC.com/Content/2/Balloons。

其中“内容”是我的页面名称，“鲜花”和“气球”是我的类别。在我的情况下它工作正常。

假设我不会在查询字符串中添加“1”和“2”，我的 URL 将如下所示。 **www.ABC.com/Content/Flowers**或**www.ABC.com/Content/Balloons**。

所以如果我不在 URL 中传递任何参数，它将采用默认值。我该怎么做？这是我的代码。

```
public static void RegisterRoutes(RouteCollection routes)
{        
    routes.Add("Products", new Route("{CategoryID}/{name}/{PriceId}/{Colorid}/{ColorName}", new RouteValueDictionary { { "PriceId", "0" }, { "Colorid", "0" }, { "ColorName", string.Empty } }, new WebFormRouteHandler("~/Client/Products.aspx")));
} 
```

它不起作用，如何将“PriceId”、“Colorid”和“ColorName”设置为默认参数？

提前致谢。

# asp.net-mvc - 与 MVC 中的下拉列表相关的查询

> ID：15403136
> 
> 赞同：0
> 
> 时间：2013-03-14T07:04:42.020
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我是 ASP.NET MVC 的新手，我正在开发一个应用程序。我想在创建视图的下拉列表中绑定数据。

如何绑定下拉列表中的数据？我在这里经历了很多问题和答案......

1.  我看到通常每个人都建议使用 `List<SelectListItem>`它的目的是什么？

2.  将数据绑定到下拉列表时是否需要使用 ViewModel？

我可以获得使用 viewbag 在下拉列表中绑定数据的简单示例吗？

我在控制器中创建了一个列表

```
 List<string> items = new List<string>(); 
```

我想通过这个列表来查看使用 viewbag 并且只想绑定到下拉列表。

这个怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:27:25.837

我建议使用 ViewModel，因为它使与用户输入的交互变得更加容易。这是一个如何将数据从 ViewModel 绑定到 View 中的下拉列表的示例。首先，ViewModel：

```
public class CrowdViewModel
{
    public string SelectedPerson { get; set;}
    public IEnumerable<SelectListItem> People { get; set; }
} 
```

所以是的，你是对的 - 使用 SelectListItems 的集合。我猜在您的情况下，SelectListItem 的 Value 和 Text 属性将是相同的。你可以像这样把你的 List 变成 IEnumerable ：

```
[HttpGet]
public ActionResult Home()
{
    // get your list of strings somehow
    // ...

    var viewModel = new CrowdViewModel 
    {
        People = items.Select(x => new SelectListItem { Text = x, Value = x })
    }

    return View(viewModel);
} 
```

现在您需要将该 ViewModel 的属性绑定到视图上的 DropDown。如果您使用的是 Razor ViewEngine，代码将如下所示：

```
@model MyApp.ViewModels.CrowdViewModel
@using (Html.BeginForm())
{
    @Html.DropDownListFor(model => model.SelectedPerson, Model.People)
} 
```

现在，当您发布该表单时，MVC 会将选定的值绑定到 ViewModel 的 SelectedPerson 属性！

```
[HttpPost]
public ActionResult Home(CrowdViewModel viewModel)
{
    // viewModel.SelectedPerson == whatever the user selected
    // ...
} 
```

就这么简单！

* * *

**更新：**

如果您真的想使用 ViewBag（不要这样做），您可以通过 Controller 操作传递您的列表，如下所示：

```
[HttpGet]
public ActionResult Home() 
{
    ViewBag.People = new List<string> { "Bob", "Harry", "John" };
    return View();
} 
```

然后在您的视图上创建一个 SelectList：

```
@Html.DropDownList("SelectedPerson", new SelectList(ViewBag.People, Model)) 
```

# c# - 在另一个动作方法中启动的后台任务的访问结果

> ID：15403140
> 
> 赞同：0
> 
> 时间：2013-03-14T07:04:52.907
> 
> 标签：c#, ajax, asp.net-mvc, multithreading

我有一个页面。在该页面中，一些数据基于服务调用显示。

此服务呼叫可能需要一分钟以上。

因此，我的 Index 操作方法已经做到了不要调用这个长时间的服务调用。

但是这个服务调用是通过页面加载时的 Ajax 调用来调用的。

这个模型正在工作

我想对此进行修改。

我想使用`Task.Factory.StartNew`索引操作本身在不同的线程中调用此服务调用。即使返回视图，也让该线程在后台工作。而一个单独的 Ajax 调用我应该能够得到服务线程的结果。

这里的挑战是如何在 Ajax 操作方法中访问在 Index 操作方法中启动的踏步的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:23:20.227

您可以让 Index 操作（启动任务的操作）生成将与此任务关联的唯一编号（可能是 guid），并将条目存储到与此编号关联的缓存中。然后将数字返回到视图。

然后，该任务将在后台静默运行，并可以更新您存储到缓存中的条目（使用诸如任务进度之类的信息，或者如果您无法执行此操作，只需表明任务是否已完成）。任务完成后，从缓存中删除该条目。

视图本身可以定期向另一个控制器操作发送 AJAX 请求并传递任务的 ID。该操作将使用此键在缓存中查找相应的条目，并返回有关正在运行的任务的视图信息。然后视图本身可以更新 UI。

让我们举个例子，好吗？

```
public ActionResult Index()
{
    var taskId = Guid.NewGuid().ToString();
    var policy = new CacheItemPolicy
    {
        Priority = CacheItemPriority.NotRemovable,
        // Adjust the value to some maximum amount of time that your task might run
        AbsoluteExpiration = DateTime.Now.AddHours(1)
    };
    MemoryCache.Default.Set(taskId, "running", policy);

    Task.Factory.StartNew(key => 
    {
        // simulate a long running task
        Thread.Sleep(10000);

        // the task has finished executing => we could now remove the entry from the cache.
        MemoryCache.Default.Remove((string)key);
    }, taskId);

    return View((object)taskId);
} 
```

然后您可以拥有另一个控制器操作，该操作将由视图通过 AJAX 调用调用以通知任务的进展：

```
[HttpPost]
public ActionResult TaskProgress(Guid taskId)
{
    var isTaskRunning = MemoryCache.Default.Contains(taskId.ToString());
    return Json(new { status = isTaskRunning });
} 
```

最后你可以有索引视图：

```
@model string

<div id="status">Task with id @Model has been started and running</div>

<script type="text/javascript">
    // start continuous polling at 1s intervals
    window.setInterval(function() {
        $.ajax({
            url: '@Url.Action("TaskProgress", new { taskId = Model })',
            type: 'GET',
            cache: false,
            success: function(result) {
                if (!result.status) {
                    // the task has finished executing => let's notify the user
                    $('#status').html('The task has finished executing');
                }
            }
        });
    }, 1000);
</script> 
```

当然，这只是一个过于简单的例子。在现实世界的场景中，您将拥有视图模型，对缓存使用复杂的模型，而不仅仅是一个简单的字符串，如果该任务在完成后需要产生一些结果，您可以在其中保存有关任务和任务结果的信息执行，...

# jquery-ui - 简单字段 Wordpress 插件一次应该有多个组选择

> ID：15403147
> 
> 赞同：0
> 
> 时间：2013-03-14T07:05:23.793
> 
> 标签：jquery-ui, jquery, wordpress, wordpress-theming

如果您熟悉 WordPress 插件，那么这可能是一项非常简单的任务：我正在使用简单字段 WordPress 插件..对我来说很好..但我需要的是从组的选择中一次对一个组进行多次检查..

就像当您安装插件时，它要求创建一个组，然后您可以相应地创建字段.. 所以在您的帖子中，您将看到一个用于选择组的部分，并且只会显示这些组字段中的一个。我需要选择什么从那里一次两组..

这是插件站点：[http ://simple-fields.com/](http://simple-fields.com/)

谢谢！尼兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:12:55.310

您要再次添加同一个组，还是要添加一个完全不同的组？

如果它是另一个组，那么您可以将该组添加到您的帖子连接器，然后当您使用该帖子连接器时两个组都将可见。

# wix - 使用 WIX 自动更新应用程序安装程序？

> ID：15403153
> 
> 赞同：4
> 
> 时间：2013-03-14T07:05:48.807
> 
> 标签：wix, auto-update

我有用 wix 创建的独立安装项目。我需要一些解决方案来自动更新我的应用程序。我的应用程序应该在启动时检查新版本并自动下载并安装新版本（如果有）。什么是最好的解决方案？谁能给我一些例子？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:28:40.620

If you use Burn as your bootstrapper/chainer (something I definitely recommend when distributing MSI files over the internet) then you can create a custom bootstrapper application that implements the update mechanism. This is how the WiX toolset updates itself. You can see the code in WiX v3.7 (or later) branch in `src\Setup\WixBA\UpdateViewModel.cs`.

# python - 如何在给定感测偏移的情况下获得普林斯顿 WN 感测 ID？Python-NLTK

> ID：15403154
> 
> 赞同：0
> 
> 时间：2013-03-14T07:05:56.603
> 
> 标签：python, nlp, nltk, wordnet, corpus

我可以从 NTLK 语料库中标记的普林斯顿 WN 感觉中获得感觉偏移：

```
[in]:'dog.n.01'
>>> from nltk.corpus import wordnet as wn
>>> ss = wn.synset('dog.n.01')
>>> offset = str(ss.offset).zfill(8)+"-"+ss.pos
>>> print offset
[out]:'02084071-n' 
```

该偏移量类似于[http://casta-net.jp/~kuribayashi/cgi-bin/wn-multi.cgi?synset=02084071-n&lang=eng中使用的约定](http://casta-net.jp/~kuribayashi/cgi-bin/wn-multi.cgi?synset=02084071-n&lang=eng)

**我如何在不遍历整个 wordnet 语料库的情况下进行反向操作？**在哪里：

```
[in]: '02084071-n'
[out]: 'dog.n.01' or Synset('dog.n.01') 
```

我可以这样做，但它太长了，冗余周期也太多了：

```
[in]: '02084071-n'
in_offset, in_pos = "02084071-n".split("-")
from nltk.corpus import wordnet as wn
nltk_ss = [i for i in wn.all_synsets() if i.offset == int(in_offset) and i.pos == in_pos][0]
print nltk_ss
[out]: Synset('dog.n.01') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:05:15.893

不幸的是，如果不迭代语料库至少一次（如您所示），您将无法反向查找。如果您要多次查找基于偏移量的同义词集，我唯一可以建议的是将其保存在字典中。

```
>>> senseIdToSynset = {s.offset:s for s in wn.all_synsets()}
>>> senseIdToSynset[2084071]
Synset('dog.n.01') 
```

# php - yii ajax 响应正确的语法

> ID：15403168
> 
> 赞同：0
> 
> 时间：2013-03-14T07:06:39.253
> 
> 标签：php, syntax, yii, response

我对**YII中的****AJAX**请求采取了行动：

 **```
public function actionSomeCheck()
{
    if($_GET['foo'] == 'bar')
    {
        echo CJSON::encode(array('status'=>'ok'));
    }

    echo CJSON::encode(array('status'=>'error'));
} 
```

我需要在生成响应后添加刹车，但没有找到正确的语法。

有可能：

```
public function actionSomeCheck()
{
    if($_GET['foo'] == 'bar')
    {
        echo CJSON::encode(array('status'=>'ok'));
        die();// Or exit
    }

    echo CJSON::encode(array('status'=>'error'));
    die();
} 
```

或者：

```
public function actionSomeCheck()
{
    if($_GET['foo'] == 'bar')
    {
        echo CJSON::encode(array('status'=>'ok'));
        return false;
    }

    echo CJSON::encode(array('status'=>'error'));
    return false;
} 
```

或在最后一次响应后没有任何中断。

可能使用**die/exit**它会更快地返回响应，但可以阻止某些操作。

这不是生死攸关的问题，而是要理解正确的语法，因为我会经常使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:22:19.860

**使用开关盒**

```
public function actionSomeCheck()
{
$data = $_GET['foo'];
switch($data)
         {
             case 'bar':
                 echo CJSON::encode(array('status'=>'ok'));
             break;
             default:
                 echo CJSON::encode(array('status'=>'error'));
             break;

         }
} 
```

或者您可以添加更多案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:35:37.017

终止 Yii 应用程序的正确方法是：

`Yii::app()->end();`

`onEndRequest`这将在调用`exit()`自身之前处理任何事件。

见：[http ://www.yiiframework.com/doc/api/1.1/CApplication#end-detail](http://www.yiiframework.com/doc/api/1.1/CApplication#end-detail)

补充说明：

没有必要`Yii::app()->end;`在请求结束时给自己打电话。该方法所做的只是处理`onEndRequest`事件，然后调用`exit()`.

而当您使用 正常运行应用程序时`run()`，您会看到`onEndRequest`在应用程序正常终止之前默认处理事件。

见：[http ://www.yiiframework.com/doc/api/1.1/CApplication#run-detail](http://www.yiiframework.com/doc/api/1.1/CApplication#run-detail)**

# asp.net - 我有这个用于菜单分配的树视图。我想知道我们能否查明我们的行是否已更新。如果是，那怎么办？

> ID：15403172
> 
> 赞同：2
> 
> 时间：2013-03-14T07:06:46.720
> 
> 标签：asp.net, sql, sql-server

编码

```
foreach (TreeNode item in this.TreeView1.CheckedNodes)
{
   if (item.Checked == true)
   {
      int strTreeValue = Convert.ToInt32(item.Value);
      SqlCommand com = new SqlCommand("Update Role_Menu Set Role_id=('" + roleid + "')
                             Where Menu_id=('" + strTreeValue + "')", con);
      com.ExecuteNonQuery();
      da = new SqlDataAdapter(com);
      ds = new DataSet();
      da.Fill(ds);
      if (ds.Tables.Count == 0)
      {
          com = new SqlCommand("insert into Role_Menu(Role_id,Menu_id) 
                          values('" + roleid + "','" + strTreeValue + "')", con);
          com.ExecuteNonQuery();
      }
 } 
```

在上面`if(ds.tables.count == 0)`我试图找出行是否已更新，但它是错误的并且不起作用。如果更新了一行，那么我们如何知道它已更新以及更新了哪一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:15:19.703

您可以使用以下代码

```
foreach (TreeNode item in this.TreeView1.CheckedNodes)
{
   if (item.Checked == true)
   {
      int strTreeValue = Convert.ToInt32(item.Value);
      SqlCommand com = new SqlCommand("Update Role_Menu Set Role_id=('" + roleid + "')
                             Where Menu_id=('" + strTreeValue + "')", con);
      int i=com.ExecuteNonQuery();

      if (i<= 0)
      {
          com = new SqlCommand("insert into Role_Menu(Role_id,Menu_id) 
                          values('" + roleid + "','" + strTreeValue + "')", con);
          com.ExecuteNonQuery();
      }
 } 
```

## 编辑 1

你不需要使用`SqlDataAdapter`and`DataSet`

如果你从你的问题中运行 SQL`SqlCommand`并检查它的返回值`ExecuteNonQuery`应该告诉你有多少记录受到影响。

从[文档](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)中：

> **返回值**
> 类型：System.Int32
> 受影响的行数。

# ajax - Drupal 使用 ajax 填充日期字段

> ID：15403173
> 
> 赞同：1
> 
> 时间：2013-03-14T07:06:47.883
> 
> 标签：ajax, date, drupal, callback, populate

需要帮助在 ajax 回调中填充 Drupal 表单 API DATE 字段，我尝试了大部分方法但没有任何效果，正常的文本字段和所有填充但仅日期字段不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:57:41.290

我不知道您使用的是哪个版本，但在 Drupal 7 上，看起来诀窍是添加一个额外的“日期”/“时间”/分层数组，如下所示：

```
// Element declaration.
$form['date_to'] = array(
  '#title' => t('Date to.'),
  '#type' => 'date_popup'
  '#size' => 20,
  '#default_value' => date('Y-m-d H:i'),
  '#date_format' => 'Y-m-d H:i',
  '#required' => FALSE,
);

// In Ajax callback.
$form['date_to']['#value']['date'] = $date_to;
$form['date_to']['#value']['time'] = $time_to; 
```

# django-models - 使用 django 编辑和更新数据库中的行

> ID：15403179
> 
> 赞同：0
> 
> 时间：2013-03-14T07:07:15.263
> 
> 标签：django-models, django-forms, django-views

模型.py

```
class Author(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=40)
    email = models.EmailField()
    age = models.IntegerField()

    def __unicode__(self):
        return "{0} {1} {2} {3} {4}".format(
            self, self.first_name, self.last_name, self.email, self.age)

class Book(models.Model):
    book_name=models.CharField(max_length=30)
    publisher_name=models.CharField(max_length=40)
    author=models.ForeignKey(Author)

    def __unicode__(self):
        return "{0} {1} {2}".format(
            self.pk, self.book_name, self.publisher_name) 
```

表格.py

```
class AuthorForm(ModelForm):
    class Meta:
        model = Author     

BookFormset = inlineformset_factory(Author, Book, 
    fields=('book_name', 'publisher_name'), extra=1, 
    can_delete=False) 
```

urls.py 是

```
admin.autodiscover()

urlpatterns = patterns('',
    url('^$', index),
    url('^index/$', index),
    url('^addbook/$', addbook),
    url('^book_detail/$', book_detail, 'book_summary'),
    url('^editbook/(?P<book_id>\d+)/$', editbook) ,
    url('^deletebook/(?P<book_id>\d+)/$',deletebook) ,

    url(r'^admin/', include(admin.site.urls)),

) 
```

我需要执行编辑和更新数据库中的行，我是通过使用单个表来完成的。但是使用两个表有一些混淆如何使用该特定 id 获取第二个表。我在这个中使用表格。你能帮我吗在views.py.Example 中编写代码以使用两个表来做同样的事情我没有看到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:30:24.157

```
def update_book(request, book_id):
    author = get_object_or_404(Author, pk=author_id)

    form = AuthorForm(instance=author)
    book_formset = BookFormset(instance=author)

    if request.method == 'POST':
        form = AuthorForm(request.POST, instance=author)
        if form.is_valid():
            author = form.save(commit=False)
            book_formset = BookFormset(request.POST, instance=author)
            if book_formset.is_valid():
                author.save()
                book_formset.save()
                return redirect('/index/')

    return render_to_response('updatebook.html',{
        'form': form, 'formset': book_formset
    },context_instance=RequestContext(request)) 

<div align="center">
    <tr>
        <form method="POST"> 
            {% csrf_token %} 
            <h5>Author:</h5>
            {{ form.as_p }}

            <h5>Book:</h5>
            {{ formset.as_p }}
            <input type="submit" value="submit">
        </form>
    </tr>
</div> 
```

# ruby - 如何在红宝石中合并两个数组

> ID：15403182
> 
> 赞同：2
> 
> 时间：2013-03-14T07:07:23.420
> 
> 标签：ruby, arrays, ruby-on-rails-3

我有两个数组..

```
a = [1, 2, 3]
b = [2, 3, 4] 
```

我想以这样的方式合并这两个数组，结果应该是这样的。

```
[1, 2, 3, 4] 
```

一种方法是添加这两个数组和调用`uniq!`方法。

```
c = a + b
c.uniq! 
```

有没有什么快捷方法可以让我在一次通话中做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T07:14:54.687

我不在我的电脑前确认这一点，但我认为你可以使用：

```
a | b 
```

它创建了两个数组的并集。

有关文档，请参阅[http://ruby-doc.org/core-2.0/Array.html#method-i-7C](http://ruby-doc.org/core-2.0/Array.html#method-i-7C)。

# java - 为什么 Collections.max() 不返回字符串集合的实际最大值？

> ID：15403183
> 
> 赞同：10
> 
> 时间：2013-03-14T07:07:29.800
> 
> 标签：java, collections, compare

```
ArrayList<String> dirNo = new ArrayList<String>();

dirNo.add("1");
dirNo.add("2");
dirNo.add("3");
dirNo.add("4");
dirNo.add("5");
dirNo.add("6");
dirNo.add("7");
dirNo.add("8");
dirNo.add("9");
dirNo.add("10");
dirNo.add("11");

System.out.println("max : " + Integer.parseInt(Collections.max(dirNo))); 
```

执行上述代码后，打印**9**作为输出。

但实际上最大值应该是**11**。

为什么我得到**9**作为 max ？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-14T07:09:19.163

由于您的元素是字符串，因此按[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)`Collections.max()`返回最大的值。

如果您希望以数字方式比较字符串，则需要使用 的两个参数版本[`Collections.max()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#max%28java.util.Collection,%20java.util.Comparator%29)并提供适当的比较器：

```
 ArrayList<String> dirNo = new ArrayList<String>();

    dirNo.add("1");
    dirNo.add("2");
    dirNo.add("3");
    dirNo.add("4");
    dirNo.add("5");
    dirNo.add("6");
    dirNo.add("7");
    dirNo.add("8");
    dirNo.add("9");
    dirNo.add("10");
    dirNo.add("11");

    Comparator<String> cmp = new Comparator<String>() {
        @Override
        public int compare(String o1, String o2) {
            return Integer.valueOf(o1).compareTo(Integer.valueOf(o2));
        }
    };
    System.out.println("max : " + Collections.max(dirNo, cmp)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:09:45.597

您正在使用字符串集合！字符串比较与数字比较完全不同。

字符串值`"2" > "11"`，因为`'2' > '1'`（第一个字符差异）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-27T15:01:38.800

将字符串更改为整数

```
ArrayList<Integer> dirNo = new ArrayList<Integer>(); 
```

就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-14T03:24:23.027

这应该可以正常工作

```
String[] allLongestStrings(String[] inputArray) {
    ArrayList<String> newArray = new ArrayList<String>();
    ArrayList<Integer> arrayIndex = new ArrayList<Integer>();
    ArrayList<String> longestString = new ArrayList<String>();

    for(int i=0; i < inputArray.length;i++){
        newArray.add(inputArray[i]);
        arrayIndex.add(inputArray[i].length());
    }

    int maximumVal = Collections.max(arrayIndex);

    for(int j=0; j < newArray.size();j++){
        if(newArray.get(j).length() >= maximumVal){
            longestString.add(newArray.get(j));
        }    
    }   

    String[] stringArray = longestString.toArray(new 
    String[longestString.size()]);
    return stringArray; 
```

}

# php - 仅使用 RegEx 将字符串拆分为固定大小的块

> ID：15403190
> 
> 赞同：3
> 
> 时间：2013-03-14T07:07:47.657
> 
> 标签：php, regex

`preg_split('#(?=.)(?<=.)#u','asfaaasfdf');`产生：

```
Array
(
    [0] => a
    [1] => s
    [2] => f
    [3] => a
    [4] => a
    [5] => a
    [6] => s
    [7] => f
    [8] => d
    [9] => f
) 
```

我怎样才能只更改 RegEx 并获得：

```
Array
(
    [0] => as
    [1] => fa
    [2] => aa
    [3] => sf
    [4] => df
) 
```

或者：

```
Array
(
    [0] => asf
    [1] => aaa
    [2] => sfd
    [3] => f
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:28:25.940

为什么要使用拆分？使用匹配：

```
preg_match_all('/.{1,3}/s', 'asfaaasfdf', $matches);
print_r($matches[0]); 
```

输出：

```
Array
(
    [0] => asf
    [1] => aaa
    [2] => sfd
    [3] => f
) 
```

# winsock - WSAConnect 在 WindowsXP 上返回 WSAEINVAL

> ID：15403192
> 
> 赞同：2
> 
> 时间：2013-03-14T07:07:56.797
> 
> 标签：winsock, nonblocking

我在非阻塞模式下使用套接字，有时 WSAConnect 函数返回 WSAEINVAL 错误。我调查了一个问题并发现，如果 WSAConnect 函数调用之间没有暂停（或者非常小），就会发生这种情况。有谁知道如何避免这种情况？您可以在下面找到重现问题的源代码。如果我将睡眠功能中的参数值增加到 50 或更大 - 问题就会消失。
PS 这个问题只在 Windows XP 上重现，在 Win7 上运行良好。

```
 #undef UNICODE
    #include <winsock2.h>
    #include <ws2tcpip.h>
    #include <stdio.h>
    #include <iostream>
    #include <windows.h>

    #pragma comment(lib, "Ws2_32.lib")

    static int getError(SOCKET sock)
    {
        DWORD error = WSAGetLastError();
        return error;
    }

    void main()
    {
        SOCKET sock;
        WSADATA wsaData;
        if (WSAStartup(MAKEWORD(2, 2), &wsaData) != 0) {
            fprintf(stderr, "Socket Initialization Error. Program aborted\n");
            return;
        }

        for (int i = 0; i < 1000; ++i) {
            struct addrinfo hints;
            struct addrinfo *res = NULL;
            memset(&hints, 0, sizeof(hints));
            hints.ai_flags = AI_PASSIVE;
            hints.ai_socktype = SOCK_STREAM;
            hints.ai_family = AF_INET;
            hints.ai_protocol = IPPROTO_TCP;

            if (0 != getaddrinfo("172.20.1.59", "8091", &hints, &res)) {
                fprintf(stderr, "GetAddrInfo Error. Program aborted\n");
                closesocket(sock);
                WSACleanup();
                return;
            }

            struct addrinfo *ptr = 0;
            for (ptr=res; ptr != NULL ;ptr=ptr->ai_next) {
                sock = WSASocket(ptr->ai_family, ptr->ai_socktype, ptr->ai_protocol, NULL, 0, NULL);    // 

                if (sock == INVALID_SOCKET) 
                    int err = getError(sock);
                else {
                    u_long noblock = 1;
                    if (ioctlsocket(sock, FIONBIO, &noblock) == SOCKET_ERROR) {
                        int err = getError(sock);
                        closesocket(sock);
                        sock = INVALID_SOCKET;
                    }   
                    break;
                }
            }
            int ret;

            do {
                ret = WSAConnect(sock, ptr->ai_addr, (int)ptr->ai_addrlen, NULL, NULL, NULL, NULL);

                if (ret == SOCKET_ERROR) {
                    int error = getError(sock);

                    if (error == WSAEWOULDBLOCK) {
                        Sleep(5);
                        continue;
                    }
                    else if (error == WSAEISCONN) {
                        fprintf(stderr, "+");
                        closesocket(sock);
                        sock = SOCKET_ERROR;
                        break;
                    }
                    else if (error == 10037) {
                        fprintf(stderr, "-");
                        closesocket(sock);
                        sock = SOCKET_ERROR;
                        break;
                    }
                    else {
                        fprintf(stderr, "Connect Error. [%d]\n", error);
                        closesocket(sock);
                        sock = SOCKET_ERROR;
                        break;
                    }
                }
                else {
                    int one = 1;
                    setsockopt(sock, IPPROTO_TCP, TCP_NODELAY, (char*)&one, sizeof(one));
                    fprintf(stderr, "OK\n");
                    break;
                }
            }
            while (1);
        }

        std::cout<<"end";
        char ch;
        std::cin >> ch;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T23:19:34.960

这里有一大堆错误以及可疑的设计和编码决策。我将不得不将它们分成两组：

## 彻底的错误

我希望如果您修复本节中的所有项目，您的症状就会消失，但我不想推测哪个是关键修复：

*   `connect()`在单个套接字上调用循环是完全错误的。

    如果您的意思是建立一个连接，将其断开，然后重新建立 1000 次，则需要`closesocket()`在每个循环结束时调用，然后`socket()`再次调用以获取新的套接字。您不能继续重新连接同一个套接字。把它想象成一个电源插头：如果你想插入两次，你必须在两次`closesocket()`之间拔掉（ ）。

    相反，如果您的意思是建立 1000 个同时连接，则需要`socket()`在每次迭代时分配一个新的套接字`connect()`，然后再返回以获取另一个套接字。它与前一种情况基本相同，除了没有`closesocket()`调用。

    请注意，由于 XP 是 Windows 的客户端版本，因此它并未针对处理数千个同时套接字进行优化。

*   `connect()`再次调用*不是*正确的响应`WSAEWOULDBLOCK`：

    ```
    if (error == WSAEWOULDBLOCK) {
        Sleep(5);
        continue; /// WRONG!
    } 
    ```

    该`continue`代码有效地提交了与上述相同的错误，但更糟糕的是，如果您只修复先前的错误并保留此错误，那么这种用法将使您的代码开始泄漏套接字。

    [`WSAEWOULDBLOCK`不是错误。](http://tangentsoft.net/wskfaq/newbie.html#wouldblock)在非阻塞套接字上之后，这意味着`connect()`连接没有立即建立。堆栈会在它发生时通知您的程序。

    `select()`您可以通过调用、`WSAEventSelect()`或之一来获得该通知`WSAAsyncSelect()`。如果使用`select()`，则在建立连接时，套接字将被标记为可写。对于其他两个，您将`FD_CONNECT`在建立连接时收到一个事件。

    调用这三个 API 中的哪一个取决于您首先需要非阻塞套接字的原因，以及程序的其余部分会是什么样子。到目前为止我所看到的根本不需要非阻塞套接字，但我想你有一些未来的计划可以为你的决定提供信息。我写了一篇文章，*[我应该使用哪种 I/O 策略](http://tangentsoft.net/wskfaq/articles/io-strategies.html)*（[Winsock 程序员常见问题解答的](http://tangentsoft.net/wskfaq/)一部分），它将帮助您决定使用哪些选项；相反，它可能会引导您完全选择另一个选项。

*   您不应该在同一个套接字上使用`AI_PASSIVE`和。`connect()`您使用`AI_PASSIVE`with`getaddrinfo()`告诉堆栈您打算使用此套接字来接受传入连接。然后你去使用那个套接字来建立一个*传出*连接。

    你在这里基本上对堆栈撒谎了。当您对计算机撒谎时，计算机会找到报复的方法。

*   `Sleep()`永远不是解决 Winsock 问题的正确方法。您的程序可以看到堆栈中的内置延迟，例如[`TIME_WAIT`](http://tangentsoft.net/wskfaq/advanced.html#waitstates)Nagle[算法](http://tangentsoft.net/wskfaq/intermediate.html#nagle-desc)，但`Sleep()`也不是处理这些的正确方法。

## 有问题的编码/设计决策

本节适用于我不希望让您的症状消失的事情，但无论如何您都应该考虑修复它们：

*   `getaddrinfo()`与较旧的、更简单的功能相比，使用的主要原因`inet_addr()`是如果您必须支持 IPv6。这与您支持 XP 的愿望相冲突，因为 XP 的 IPv6 堆栈在 XP 是 Windows 的当前版本期间几乎没有其 IPv4 堆栈那样经过严格测试。我希望 XP 的 IPv6 堆栈仍然存在错误，即使您已经安装了所有补丁。

    如果您真的不需要 IPv6 支持，那么使用旧方法可能会使您的症状消失。您最终可能需要一个仅适用于 XP 的 IPv4 版本。

*   这段代码：

    ```
    for (int i = 0; i < 1000; ++i) {
        // ...
        if (0 != getaddrinfo("172.20.1.59", "8091", &hints, &res)) { 
    ```

    ...效率低下。没有理由需要`res`在每个循环上继续重新初始化。

    即使我没有看到某些原因，您也不会调用`freeaddrinfo()`.`res`

    您应该在进入循环之前初始化此数据结构*一次，然后在每次迭代中重用它。*

*   `else if (error == 10037) {`

    你为什么不在这里使用`WSAEALREADY`？

*   你不需要在`WSAConnect()`这里使用。您正在使用 Winsock 与 BSD 套接字共享的 3 参数子集。你不妨在[`connect()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737625.aspx)这里改用。

    让你的代码比它必须的更复杂是没有意义的。

*   你为什么不`switch`为此使用声明？

    ```
    if (error == WSAEWOULDBLOCK) {
        // ...
    }
    else if (error == WSAEISCONN) {
        // ...
    }
    // etc. 
    ```

*   [您不应该禁用 Nagle 算法：](http://tangentsoft.net/wskfaq/intermediate.html#disable-nagle)

    ```
    setsockopt(sock, IPPROTO_TCP, TCP_NODELAY, ...); 
    ```

# javascript - jquery 如何获得隐藏 div 的高度？

> ID：15403196
> 
> 赞同：2
> 
> 时间：2013-03-14T07:08:07.147
> 
> 标签：javascript, jquery

请查看以下链接。

[http://jsfiddle.net/YJMrE/](http://jsfiddle.net/YJMrE/)

HTML：

```
<div id="test">
    <div id="test1">test 1</div>
    <div id="test2">test 2</div>
</div> 
```

Javascript：

```
$(document).ready(function(){
    $("#test").hide();
    alert($("#test").height());
    alert(document.getElementById("test").getBoundingClientRect().height);
}); 
```

jquery如何单独获得隐藏div的高度？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:15:31.297

将此用于您的脚本：

```
$(document).ready(function(){
    var x = document.getElementById("test").getBoundingClientRect().height;
    $("#test").hide();
    alert($("#test").height());
    alert(x);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:17:00.793

在纯 JavaScript 中，你可以做这样的事情，它应该可以工作：

```
// $("#test").hide();
// alert($("#test").height());

var el = document.getElementById("test");
el.style.position = 'absolute';
el.style.visibility = 'hidden';

alert(el.offsetHeight); // 40 
```

jQuery 可能正在以其他方式为您创造奇迹。用 获取隐藏对​​象的尺寸是不可靠的`display: none`。

**编辑：**这[是处理尺寸的 jQuery 代码](https://github.com/jquery/jquery/blob/master/src/dimensions.js)。您必须连接一些点，但这似乎并不复杂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:17:43.367

您可以使用以下方法获取 div 的高度，

```
$('#test1').height();
$('#test2').height(); 
```

height() 函数计算给定元素的高度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-18T04:43:16.550

我没有从其他答案中得到太多，想知道同样的事情，并[在 jQuery 3.0.0-pre source 中找到了相关行](https://github.com/jquery/jquery/blob/master/src/css.js#L332)。

如果或不返回任何有用的东西，这些属性会使用[此交换函数](https://github.com/jquery/jquery/blob/master/src/css/var/swap.js)临时添加到元素中：`getClientRects()``getBoundingClientRect()`

```
{ position: "absolute", visibility: "hidden", display: "block" } 
```

然后它调用`val = elem.getBoundingClientRect()[ name ];`以获取宽度（第 127 行 - 3.0.0-pre）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T07:19:19.713

注意区别：http: [//jsfiddle.net/YJMrE/5/](http://jsfiddle.net/YJMrE/5/)

Jquery 隐藏它，因此它知道隐藏元素在隐藏之前的高度。

而 javascript 只是简单地返回当前高度。

```
$(document).ready(function(){        
    alert(document.getElementById("test").getBoundingClientRect().height); // 40
    $("#test").hide();    
    alert(document.getElementById("test").getBoundingClientRect().height); // 0
}); 
```

# ios - Cocos2d 搞砸了坐标？

> ID：15403200
> 
> 赞同：0
> 
> 时间：2013-03-14T07:08:19.740
> 
> 标签：ios, cocos2d-iphone, uistoryboard

我是 iOS 编程新手，我按照此处发布的集成 Storyboard 和 Cocos2d 的教程进行操作

[http://www.tinytimgames.com/2012/02/07/cocos2d-and-storyboards/](http://www.tinytimgames.com/2012/02/07/cocos2d-and-storyboards/)

我遵循了一切，但是当我运行我的程序时。坐标乱了。

[http://imgur.com/4JgA1zv](https://imgur.com/4JgA1zv)

![在此处输入图像描述](../Images/5b1a494d5ce45b73f54809bded4ad4cd.png)

我不知道如何解决这个问题=[

编辑：这是在空白场景中的样子。看起来场景的一部分被切断了。 ![](../Images/dd1938ef9ee156f00a314da9f0b8addb.png)

# mysql - SELECT 查询的分组问题

> ID：15403202
> 
> 赞同：1
> 
> 时间：2013-03-14T07:08:28.610
> 
> 标签：mysql, sql, select, group-by

我正在构建一个非常基本的事件管理和邀请系统。为此，我构建了 2 个表并使用查询列出所有事件，其邀请计数为 1。发送的邀请总数 2。接受的总数 3。拒绝的总数 4。等待的总数

下面是查询

```
SELECT 
    *, 
    count(im.event_id_fk) as total_invitations, 
    count(im2.event_id_fk) as total_accepted, 
    count(im3.event_id_fk) as total_rejected,
    count(im4.event_id_fk) as total_waiting 
FROM event_mst em
LEFT JOIN invitation_mst im
    ON (em.event_id_pk = im.event_id_fk)
LEFT JOIN invitation_mst im2
    ON (em.event_id_pk = im2.event_id_fk AND im2.status = 'Accept')
LEFT JOIN invitation_mst im3
    ON (em.event_id_pk = im3.event_id_fk AND im3.status = 'Reject')
LEFT JOIN invitation_mst im4
    ON (em.event_id_pk = im4.event_id_fk AND im4.status = 'Waiting')
GROUP BY 
    im.event_id_fk, 
    im2.event_id_fk, 
    im3.event_id_fk, 
    im4.event_id_fk 
ORDER BY 
    em.date_added DESC 
```

现在的问题是这个查询给出了错误的计数，例如，如果总共发送了 3 个邀请，则给出 9 个。如果发送了 5 个邀请，则给出 25 个。

所以它似乎在与自身相乘并返回结果。我知道这个选择查询一定有问题。有人纠正我这个查询吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:12:07.777

这是 mysql 最简单的解决方案，因为它支持布尔计算。

```
SELECT  event_id_pk,
        COUNT(*) as total_invitations, 
        SUM(status = 'Accept') as total_accepted, 
        SUM(status = 'Reject') as total_rejected,
        SUM(status = 'Waiting') as total_waiting 
FROM    event_mst
GROUP   BY event_id_pk 
```

但是查询不会为您提供有关邀请的完整详细信息，为此，您可以将查询包装在子查询中并将其与原始表本身连接，

```
SELECT  a.*,
        b.total_invitations,
        b.total_rejected,
        b.total_waiting
FROM    event_mst a
        INNER JOIN
        (
            SELECT  event_id_pk,
                    COUNT(*) as total_invitations, 
                    SUM(status = 'Accept') as total_accepted, 
                    SUM(status = 'Reject') as total_rejected,
                    SUM(status = 'Waiting') as total_waiting 
            FROM    event_mst
            GROUP   BY event_id_pk
        ) b ON a.event_id_pk = b.event_id_pk 
```

# java - javax.transaction.RollbackException 的堆栈跟踪缺少原因

> ID：15403203
> 
> 赞同：0
> 
> 时间：2013-03-14T07:08:37.347
> 
> 标签：java, exception-handling, junit

我有一个堆栈跟踪`javax.transaction.RollbackException`：

> [...] 原因：ch.ethz.id.wai.lakshmi.engine.common.LakshmiException：处理用户事务时出错。在 ch.ethz.id.wai.lakshmi.engine.common.TransactionHelper.commitTransaction(TransactionHelper.java:79) 在 ch.ethz.id.wai.lakshmi.stdcmp.persistency.StandardPersistency.registerOrder(StandardPersistency.java:110)引起：javax.transaction.RollbackException：事务标记为回滚。在 com.sun.enterprise.transaction.JavaEETransactionImpl.commit(JavaEETransactionImpl.java:473) 在 com.sun.enterprise.transaction.JavaEETransactionManagerSimplified.commit(JavaEETransactionManagerSimplified.java:855) 在 com.sun.enterprise.transaction.UserTransactionImpl.commit (UserTransactionImpl.java:208) 在 ch.ethz.id.wai.lakshmi.engine.common.TransactionHelper.commitTransaction(TransactionHelper.java:74)
> 
> 在 org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1387) 在 org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1310) 在 org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1316) ) 在 org.hibernate.engine.transaction.synchronization.internal.SynchronizationCallbackCoordinatorImpl.beforeCompletion(SynchronizationCallbackCoordinatorImpl.java:109) 的 org.hibernate.engine.transaction.synchronization.internal.SynchronizationCallbackCoordinatorImpl.beforeCompletion(SynchronizationCallbackCoordinatorImpl.java:109) 的 org.hibernate.ejb.AbstractEntityManagerImpl$CallbackExceptionMapperImpl.mapManagedFlushFailure(AbstractEntityManagerImpl.java:1510)。 com.sun.enterprise.transaction.JavaEETransactionImpl.commit(JavaEETransactionImpl.java:435) 上的 transaction.synchronization.internal.RegisteredSynchronization.beforeCompletion(RegisteredSynchronization.java:53)
> 
> 在 org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:54) 在 org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125) 在 org.hibernate.engine.jdbc.spi .SqlExceptionHelper.convert(SqlExceptionHelper.java:110) 在 org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129) 在 org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke (AbstractProxyHandler.java:81) 在 com.sun.proxy.$Proxy233.executeUpdate(Unknown Source) 在 org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:56) 在 org.hibernate。 persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3028) 在 org.hibernate.persister.entity。AbstractEntityPersister.insert(AbstractEntityPersister.java:3469) at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:88) at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362) at org .hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354) 在 org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:275) 在 org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener .java:326) 在 org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1213) 在 org.hibernate.internal.SessionImpl 的 org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)。 org.hibernate.engine.transaction.synchronization.internal 上的 managedFlush(SessionImpl.java:402)。SynchronizationCallbackCoordinatorImpl.beforeCompletion（SynchronizationCallbackCoordinatorImpl.java:104）
> 
> 在 oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:439) 在 oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:395) 在 oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:802 ) 在 oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:436) 在 oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186) 在 oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java: 521) 在 oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1008) 在 oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java) 的 oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:205) :1307) 在 oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3530) 在 oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3449) 在 oracle。jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1350) 在 com.sun.gjc.spi.base.PreparedStatementWrapper.executeUpdate(PreparedStatementWrapper.java:125) 在 org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler。 continueInvocation(AbstractStatementProxyHandler.java:122)

我在`RollbackException`调试时可以看到一个原因：

> javax.persistence.PersistenceException：org.hibernate.exception.GenericJDBCException：ORA-22295：不能在 1 个语句中将超过 4000 字节的数据绑定到 LOB 和 LONG 列

这又是由

> org.hibernate.exception.GenericJDBCException：ORA-22295：不能在 1 个语句中将超过 4000 字节的数据绑定到 LOB 和 LONG 列

但是`RollbackExeption`堆栈跟踪中没有显示的原因（这将简化错误的调试）。

知道原因吗？

**编辑**

我在测试方法（JUnit）中添加了一个try-catch：

```
@Test
public void foo() throws Throwable {
    try {
        // test code generating the exception
} catch ( Exception e ) {
    // here the exception cause is still there
} 
```

由于这个方法是由 JUnit 直接调用的，所以当它离开我的代码时仍然可以。

![在此处输入图像描述](../Images/49753ec1ee0c85c8a919f78b07e057fc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:33:39.077

如果您希望在异常中显示原因，我想您唯一的机会是在`Glassfish`. 我查看了[JavaEETransactionImpl](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish.transaction/jta/3.1.1/com/sun/enterprise/transaction/JavaEETransactionImpl.java/)的源代码，这`RollbackException`是抛出的地方，在第 473 行代码是：

```
rbe = new RollbackException(sm.getString("enterprise_distributedtx.mark_rollback")); 
```

如您所见，我正在检查版本`3.1.1`，所以如果您有不同的版本，请查看正确的源代码（我怀疑无论如何都会有所不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:54:19.813

问题是 Ant 错误地过滤了异常跟踪的一部分

从[Junit 任务文档](http://ant.apache.org/manual/Tasks/junit.html)：

> filtertrace 从错误和故障堆栈跟踪中过滤掉 Junit 和 Ant 堆栈帧。

它默认为`on`但它不仅过滤 Junit 和 Ant 帧：显示将其设置为关闭回滚的原因。

# c# - 如何使用新的和修改的记录更新数据库？

> ID：15403204
> 
> 赞同：0
> 
> 时间：2013-03-14T07:08:39.270
> 
> 标签：c#, sql, database, dataset

我创建了一个`database`（从 a 读取和填充数据`XML`）。我已经用`SqlBulkCopy`. 但是这种**情况是每当更新 XML 时（可能是插入新记录或修改现有记录）** ......因此**数据库也应该更新**，所以我创建了一个解决方案，首先所有表的所有记录都应该是在数据库中删除并再次执行`SqlBulkCopy`，因此可以更新数据......

但这似乎是最糟糕的方式。

`XML`有没有办法只更新那些记录，如果源有任何新记录，则需要插入新记录？

我也尝试了一些数据集合并操作，但我想不出正确的方法来使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:27:53.167

试试这个：

[**将 xml 序列**](http://support.microsoft.com/kb/815813)化为类对象 - 您可以将其添加为此类对象的集合，即`List<object>`. 然后通过[**C# 存储过程**](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/e9d17dcf-55ce-4a67-9a56-f5955638e51e/)调用传递 xml 的唯一 ID（现在是序列化记录）。您可以遍历集合并使用存储过程匹配每个 id。如果来自 xml 的记录不是太多，这可能会影响性能。

在存储过程中做一个`IF SELECT Count(*)... > 0`. 如果它返回的值大于 0 则记录存在：

```
IF(SELECT COUNT(*) FROM table where uniqueid = @id) > 0)
BEGIN
    UPDATE table ... WHERE uniqueid = @id
END
ELSE
BEGIN
   INSERT INTO table (...) VALUES(...)
END 
```

或者使用[**`MERGE INTO`**](http://technet.microsoft.com/en-us/library/bb510625.aspx)它也很好用。

让存储过程返回一个值或布尔值以指示数据库已成功更新。

# python - Py2app 问题

> ID：15403205
> 
> 赞同：1
> 
> 时间：2013-03-14T07:08:39.300
> 
> 标签：python, tkinter, py2app

我创建了一个使用 tkinter GUI 的 python 脚本，我尝试使用 py2app 打包它，我的问题是我不知道如何包含 tkinter 模块。我尝试在没有模块的情况下打包我的脚本，但我得到的只是一条控制台消息，上面写着“ImportError：没有名为 tkinter 的模块”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-19T21:32:52.557

要捆绑应用程序，我假设您将其放在终端中：

```
$ python setup.py py2app 
```

我也遇到了同样的问题，一直在网上搜索解决方案。我也在 Mac 上运行 python 3.3。在我放了这个之后：

```
$ python3 setup.py py2app 
```

它就像一个魅力！希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:46:00.397

以下 setup.py 脚本应该为基于 Tkinter 的基本脚本提供技巧（将“hello.py”替换为实际脚本的名称）。

```
from setuptools import setup

setup(
    app=['hello.py'],
    setup_requires=["py2app"],
) 
```

这是 py2app 的[hello_tk 示例中的 setup.py 脚本](https://bitbucket.org/ronaldoussoren/py2app/src/default/examples/Tkinter/hello_tk?at=default)

更新：

您稍后提到 tkinter 也不能从 py2app 的应用程序“外部”导入，并且 _tkinter 扩展 (_tkinter.so) 不存在。这意味着您的 Python 3.3 安装有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T23:38:17.177

打包应用程序的一种方法是运行以下命令：

```
 py2applet --make-setup filename.py 
```

然后，您可以运行：

```
 python3 setup.py py2app -A 
```

# c - UDP客户端无法从服务器接收数据

> ID：15403206
> 
> 赞同：0
> 
> 时间：2013-03-14T07:09:01.783
> 
> 标签：c, sockets, networking, udp

我有一个 UDP 客户端和一个 UDP 服务器。程序的流程是：首先从终端执行服务器，终端创建一个套接字并绑定它并等待来自客户端的文件名。在另一个终端中执行客户端。这里还创建了一个套接字，并与服务器建立了连接。然后将文件名提供给客户端。使用 sendto() 函数将此文件名发送到服务器。服务器能够从客户端接收文件名，并且服务器还将文件中的数据发送给客户端。然而，另一端的接收者一直在等待来自服务器的数据。

UDP 客户端和服务器的代码如下所示。

UDP 服务器：

```
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<sys/stat.h>
#include<unistd.h>
#include<stdlib.h>
#include<stdio.h>
#include<fcntl.h>
int main()
{
    int cont,create_socket,new_socket,addrlen,fd;
    int bufsize = 1024;
    int nameLen=0;
    int client_address_size=0;
    char *buffer = malloc(10);
    char fname[256];
    struct sockaddr_in address,client;

    if ((create_socket = socket(AF_INET,SOCK_DGRAM,0)) > 0)
    printf("The socket was created\n");

    address.sin_family = AF_INET;
    address.sin_addr.s_addr = INADDR_ANY;
    address.sin_port = htons(15000);

    if (bind(create_socket,(struct sockaddr *)&address,sizeof(address))== 0)
        printf("Binding Socket\n");

    nameLen=sizeof(address);

    if (getsockname(create_socket,(struct sockaddr *)&address,&nameLen)<0)
    {
        printf("\n\ngetsockname() error\n");
        exit(3);
    }

    printf("Port assigned is %d\n", ntohs(address.sin_port));

    client_address_size=sizeof(client);

    if(recvfrom(create_socket,fname, 255,0,(struct sockaddr *) &client,&client_address_size)<0)
    {
        printf("\n\nrecvfrom() failed\n");
        exit(4);
    }

    printf("A request for filename %s Received..\n", fname);

    if ((fd=open(fname, O_RDONLY))<0)
    {
        perror("File Open Failed");
        exit(0);
    }

    while((cont=read(fd, buffer, 10))>0) 
    {
        //sleep(1);
        sendto(create_socket,buffer,cont,0,(struct sockaddr *) &client,&client_address_size);
        printf("\n\nPacket sent\n");
    }

    printf("Request Completed\n");

    return close(create_socket);
} 
```

UDP客户端：

```
#include<sys/socket.h>
#include<sys/types.h>
#include<netinet/in.h>
#include<unistd.h>
#include<stdlib.h>
#include<stdio.h>

int main()
{
    int create_socket,cont;
    char *arg="127.0.0.1";
    int bufsize = 1024;
    int server_address_size=0;
    char *buffer = malloc(10);
    char fname[256];
    struct sockaddr_in address,server;

    if ((create_socket = socket(AF_INET,SOCK_DGRAM,0)) > 0)
        printf("The Socket was created\n");

    address.sin_family = AF_INET;
    address.sin_port = htons(15000);
    address.sin_addr.s_addr=inet_addr(arg);

    if (connect(create_socket,(struct sockaddr *) &address,sizeof(address)) == 0)
        printf("The connection was accepted with the server %s...\n",arg);

    printf("Enter The Filename to Request : ");
    scanf("%s",fname);
    sendto(create_socket, fname, sizeof(fname), 0,(struct sockaddr *) &address,sizeof(address));
    printf("Request Accepted... Receiving File...\n\n");

    server_address_size=sizeof(server);

    printf("The contents of file are...\n\n");

    while((cont=recvfrom(create_socket, buffer, 10, 0,(struct sockaddr *) &address,sizeof(address)))>0) 
    {
        write(1, buffer, cont);
    }

    printf("\nEOF\n");
    return close(create_socket);
} 
```

我哪里错了？请为此提供适当的解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:00:59.093

您`recvfrom()`错误地使用了值结果参数。编译器应该非常大声地警告你。Recvfrom() 将尝试在第 6 个参数中向您返回一个数字，因此您不能将使用创建的常量传递给它`sizeof()`。

从手册页：

> 参数 addrlen 是一个 value-result 参数，调用者应该在调用之前将其初始化为与 src_addr 关联的缓冲区的大小，并在返回时修改以指示源地址的实际大小。

我像这样更改了 recvfrom() 循环，并成功发送和接收了一个文件。

```
int serv_addr_size = sizeof(address);
while((cont=recvfrom(create_socket, buffer, 10, 0,(struct sockaddr *) &address,&serv_addr_size))>0) 
{
    write(1, buffer, cont);
} 
```

由于您在套接字上调用 connect() ，因此您也可以使用`recv()`，如下所示：

```
recv(create_socket, buffer, 10, 0) 
```

作为一些一般建议，始终仔细检查系统和库调用的返回值（可能除外`printf()`），并为函数手册页“返回值”下列出的所有情况做好准备。

**编辑**服务器端在另一个方向上犯了类似的错误。它的参数`sendto()`应该只是传递的结构的长度，作为指针传递。

```
sendto(create_socket,buffer,cont,0,(struct sockaddr *) &client,&client_address_size); 
```

应该

```
sendto(create_socket,buffer,cont,0,(struct sockaddr *) &client,client_address_size); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:55:20.873

让我写一个有效的例子。我试图重写你自己的代码，但我更愿意给你看一个很好的例子。就几分钟...

- -编辑 - -

好的，我来了。请原谅我花费的时间，但我更喜欢仔细阅读代码。

这是你的两个文件：

[服务器实现](http://pastebin.com/TidL8pLy)

[客户端实现](http://pastebin.com/JHVCUm0U)

真的希望我能帮到你。

# verilog - 优化此比较器以获得更好的综合

> ID：15403211
> 
> 赞同：1
> 
> 时间：2013-03-14T07:09:24.570
> 
> 标签：verilog

我有一个模块，它基本上是一个输入为 64 位的 LUT。LUT always 块包含一个 case 语句，它将输入与 200 多个不同的整数进行比较。case 语句中的默认 case 在为输出分配默认值之前检查输入是否 > 100。

我的问题是，当我合成时，它会导致一个 65 位比较器，我想知道是否有更好的方法可以做到这一点，以便不合成大型比较器。

这是我的代码片段：

```
 always @(in)
    begin
    case (in) 
        -100: out <= 495050;
        -99: out <= 500000;
        ...
         99: out <= 99500000;
        100: out <= 99504950;

        default: 
        begin
            if (in > 100)
                out <= 99504950;
            else
                out <= 495050;
        end
    endcase
end 
```

谢谢，

费萨尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:26:21.280

假设这`in`是一个 64 位数字，您可以做的就是将其砍掉，这样您只需“比较”最低的几位，然后您可以快速检查该数字是否超出所需范围。

例如，让我们只截取`in`8 位，并将其分配给 8 位有符号寄存器。这应该允许您在 -128 和 127 之间表示。

您可以通过以下方式测试完整数字是否大于 127：（`!in[63] && (|in[62:8])`检查是否有任何高位为`1`，并且 MSB 未设置）。

您可以通过以下方式测试完整数字是否小于 -128：（`in[63] && !(&in[62:8])`检查任何高位是否为`0`，并且设置了 MSB）。

现在你知道了三件事：

1.  如果数字大于 127
2.  如果数字在 127 和 -128 之间
3.  如果数字小于-128。

对于中间情况，您应该能够使用一个小的 8 位 LUT，或者如果它在任一上限范围内，则使用您的默认值。

请注意，我可能希望有一个好的合成器自动为您执行此操作，但如果您查看生成的网表并且它太大，您可以尝试这样做，看看它是否能给您带来更好的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T07:52:14.360

看起来您已经计算了输入 x = [-100;100] 的一些函数值的表。如果是这样，最好从某个基地址开始将它们一个接一个地存储在内存中。所以要读取它们，您可以在地址总线上写入 base + X + 100 值，并获得您需要的值。

如果您需要一个巨大的多路复用器，您可能想尝试使用“并行”大小写指令。

至于“默认”中的比较器 - 我有同样的问题，所以我正在等待答案。

*我想写这个作为评论，但我没有这样的特权*

# javascript - 使用选择的 jquery 插件获取每个选择的值

> ID：15403220
> 
> 赞同：16
> 
> 时间：2013-03-14T07:09:54.427
> 
> 标签：javascript, jquery, jquery-chosen

我正在使用选择多项选择我想要做的是，如果用户选择任何我想要该值的选项，然后我将根据该值执行一些功能。

在没有多重选择的情况下，我可以通过使用 foll 来获得选定的值。代码

```
$(".selectId").chosen().change(function(){
     selectedValue = $(this).find("option:selected").val();
}); 
```

但是在多选中，我再次获得第一个选定的值 n 有人可以通过在多选元素中找到当前选定的值来帮助我吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-10-24T00:51:19.710

[Chosen 文档](http://harvesthq.github.io/chosen/options.html)提到了用于获取最近更改的变量的参数。

> 每当进行选择时，Chosen 都会触发标准 DOM 事件（它还会发送一个 selected 或 deselected 参数，告诉您哪个选项已更改）。

因此，如果您只想选择或取消选择最近的选项：

```
$(".selectId").chosen().change(function(e, params){
 // params.selected and params.deselected will now contain the values of the
 // or deselected elements.
}); 
```

否则，如果您希望整个数组与您一起使用，您可以使用：

```
$(".selectId").chosen().change(function(e, params){
 values = $(".selectId").chosen().val();
 //values is an array containing all the results.
}); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-20T00:30:51.553

**简短的回答：**

你只需这样做：`var myValues = $('#my-select').chosen().val();`

**完整示例：**

如果你有一个这样的多选：

```
<select id="my-select" class="chzn-select" multiple data-placeholder="Choose one or more values...">
  <option value="value1">option1</option>
  <option value="value2">option2</option>
  <option value="value3">option3</option>
</select> 
```

您可以获取数组中的选定值以执行以下操作：

```
// first initialize the Chosen select
$('#my-select').chosen();

// then, declare how you handle the change event
$('#my-select').chosen().change(function(){
    var myValues = $('#my-select').chosen().val();

    // then do stuff with the array
    ...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:20:06.617

your code is gettin the correct selected value.. but since its multiple you need to use loop..or use `map` to get the selected value and push it into array..

try this

```
 $(".selectId").chosen().change(function(){
    var  selectedValue = $.map( $(this).find("option:selected").val(), function(n){
              return this.value;
       });
    console.log(selectedValue );  //this will print array in console.
    alert(seletedValue.join(',')); //this will alert all values ,comma seperated
}); 
```

**updated**

if you are getting commaseperated values then use `split()`

```
 var values=  $(".selectId").val();
 $.each(values.split(',').function(i,v){
     alert(v); //will alert each value
     //do your stuff
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T07:29:03.793

尝试这个

```
 $('.selectId:selected').each(function(i, selected) {

var value = $(selected).val();
var text = $(selected).text();

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-11T18:14:56.207

这就是我让它工作的方式。在我的 html 中，我有这个

```
<select data-placeholder="Choose a Country..." class="form-control chosen-select" multiple tabindex="4">
    <option value="USA">USA</option>
    <option value="UK">UK</option>
    <option value="CHINA">CHINA</option>
</select> 
```

然后是javascript

```
// apply chosen-js to the DOM, and store it in a variable.
var chosen = $(".chosen-select").chosen({
   no_results_text: "Oops, nothing found!"
}); 

// inside the change event, we get the value by calling chosen.val()
chosen.change(function() {
   console.log('selected tags are', chosen.val());
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-12T10:01:41.790

[Chosen 文档](https://harvesthq.github.io/chosen/)提到了用于获取最近更改的变量的参数。

```
$(".CSS Selector").chosen().change(function(e, parameters) {
  // params.selected and params.deselected will now contain the values of the
  // or deselected elements.
});
```

# javascript - Ember.js 数据冲突解决/冲突失败

> ID：15403221
> 
> 赞同：4
> 
> 时间：2013-03-14T07:09:56.847
> 
> 标签：javascript, database, rest, ember.js, ember-data

如果将 Ember.js 与 ember-data REST 适配器一起使用，是否有某种冲突解决策略来处理持久化到服务器的数据？

至少，就我而言，如果可以通知用户，在发生冲突的情况下失败和回滚就足够了。那么，这需要某种数据/结构吗？模型上的某种“版本”ID，服务器可以在其中检查提交的版本，并确保客户端具有最新数据。Ember.js 中有什么东西可以减少手动操作吗？如果是这样，是什么？

**编辑：**另外，有什么可以帮助解决模型批量提交的冲突吗？假设我们有一个与多个子​​模型具有“hasMany”关系的父模型，并且它们都将同时持久化到数据库中。如果只是处理服务器端代码，我觉得我可以将它包装在我正在使用的任何数据库中的事务中，如果某些东西过时则失败。这如何转化为 Ember.js 事务？

我在 Adapter 类中看到了一个标志 bulkCommit。这似乎能够在一个请求中批量提交相同类型的对象。但是，如果我要保存一种以上类型的记录，那么这将导致对服务器的多个请求。有没有办法a）在对服务器的一个请求中实现这一点，或者b）将ember-data的事务与服务器上的事务匹配，所以如果服务器上的事务失败，需要回滚， ember-data 交易也失败了？

[我正在为即将到来的项目评估 Ember.js，并测试一些功能以及开发它的感觉。我实际上正在考虑使用 socket.io 或类似的更多实时更新。我看到 derby.js 已经朝着自动解决冲突做出了一些努力]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:59:35.437

[正如您在此处](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js#L316)的 Ember Data 源代码中看到的那样，您可以将带有错误的 422 HTTP 状态代码作为字典返回。Ember 数据库会将错误作为模型的属性按键添加到模型中，并且模型本身将被视为**无效**。一旦每个带有错误的属性发生更改，模型将自动离开此状态。

您可以观察**版本**属性上的错误，`reloadRecord`一旦出现并发错误。

# matlab - 在 Matlab 中处理稀疏矩阵

> ID：15403223
> 
> 赞同：2
> 
> 时间：2013-03-14T07:10:09.177
> 
> 标签：matlab, indexing, block, sparse-matrix

假设我有一个稀疏矩阵`Sparstica`，它是几个其他稀疏矩阵的垂直串联。当我输入 时`Sparstica(:)`，我得到一个非零元素的列表。在左列中，将是元素的索引，在右列中将是非零元素。

如何操作中间`n-2`块（`n`总共稀疏块矩阵）中每个其他稀疏块矩阵的第 i 个和第 j 个非零元素？

* * *

**附加**：为了澄清我所说的每个其他稀疏矩阵的第 i 个和第 j 个元素的意思，假设我有

> 斯巴斯蒂卡 = [A_1; A2; A_3; ... ; 一个]

这是从创建的`vertcat`。现在我需要取第 i 个和第 j 个，比如说第 3 个和第 5 个，*每个其他*稀疏矩阵的非零元素 from `A_2`to `A_{N-1}`（我知道这个符号实际上是不允许的，只是为了说明目的）。如果可能，我想在*不*使用 for 循环的情况下完成此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T07:29:24.273

您可以使用以下方法找到非零元素`find`：

```
>> A = speye(3)

A =

   (1,1)        1
   (2,2)        1
   (3,3)        1

>> I = find(A ~= 0)

I =

     1
     5
     9 
```

如果您需要行/列格式的索引，请使用`ind2sub`：

```
>> [X, Y] = ind2sub(size(A), I)

X =

     1
     2
     3

Y =

     1
     2
     3 
```

# mysql - 数据库查询失败。从数据库收到的错误是 #144：

> ID：15403225
> 
> 赞同：0
> 
> 时间：2013-03-14T07:10:22.453
> 
> 标签：mysql, repair

```
Database query failed. Error received from database was #144: Table 'dbname.mantis_bug_file_table' is marked as crashed and last (automatic?) repair failed for the query: SELECT bug_id, COUNT(bug_id) AS attachments
FROM mantis_bug_file_table
GROUP BY bug_id. 
```

如何避免上述问题。修复表后，我多次收到此错误。如果我在加载页面后修复表，它会显示“#2013 - 在查询期间丢失与 MySQL 服务器的连接”。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:12:17.317

首先停止 MySQL 进程。转到您的数据文件夹并尝试运行`myisamchk -r <table_name>`。如果它不起作用，请尝试`myisamchk -r -v -f <table_name>.`

# java - 撤消在编辑器中的工作原理

> ID：15403226
> 
> 赞同：0
> 
> 时间：2013-03-14T07:10:25.053
> 
> 标签：java

我正在设计自己的编辑器，例如 Java 中的记事本。我`JEditorPane`在文字的写作中使用过。我不知道撤消在编辑器中是如何工作的。如何保持用户在`JEditorPane`.

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:13:27.183

研究使用[Memento 设计模式](http://en.wikipedia.org/wiki/Memento_pattern)来实现此撤消功能。维基百科有一个 Java 示例可以帮助您。

基本上你可以保留程序的一堆状态。要“撤消”，您可以简单地将程序（或本例中的文本区域）的当前状态设置为先前的状态。

# javascript - NS_ERROR_FAILURE 与 JS XMLHttpRequest

> ID：15403229
> 
> 赞同：2
> 
> 时间：2013-03-14T07:10:30.717
> 
> 标签：javascript, cross-domain

我正在尝试使用 firefox 加载网页的源代码，如“Javascript：权威指南”第 481 页所示。

这是我的代码：

```
 var request = new XMLHttpRequest();

  request.open("GET", "http://finance.yahoo.com/q?s=PG", false);

  request.send(null);

  if (request.status==200)  { alert(request.responseText);  }

  else {alert("Error "+request.status + ": "+request.statusText);} 

  </script> 
```

Firebug 显示 GET 语句，后跟 200 OK X 338ms。

看起来它是成功的（代码 200）。

但是下一个 Firebug 行说：NS_ERROR_FAILURE, request.send(null);，没有进一步的解释。

并且两个警报都没有被执行。

如果我使用帮助模式也无济于事，也不能在 Chrome 中运行。我没有运行弹出窗口、cookie 或广告拦截器。

该页面使用 LWP get() 在 perl 中正常加载。

如果这是不可避免的跨域禁忌，为什么《权威指南》不这么说？

我知道 JSONP 返回 JSON。我不想要那个——我只想要一个带有原始源的字符串，就像 perl LWP get() 一样。

这对 Javascript 来说是不可能的吗？

我想我可以编写一个批处理文件，它使用 perl 来获取源并将其放入一个 JSON 文件中，该文件的名称被硬编码到 JS 中。但我想避免这种混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T05:59:13.120

如果有帮助，我之前遇到过几次这个问题，然后又遇到了。如果[这个问题](https://stackoverflow.com/questions/3778497/problem-in-loading-xml-from-specified-url-using-javascript-in-ff-google-chrome)的答案对您没有帮助，请尝试添加以下对我有帮助的行：

```
request.overrideMimeType('text/xml; charset=UTF-8'); // needed to get utf8 req's to work 
```

或此调试行（您可以在浏览器的 Web 控制台上对其进行监控）

```
request.onreadystatechange = function() {console.log("statechanged. url= " + url);}; 
```

在你之前

```
request.open() 
```

`url`保存您尝试请求的 url 的 var在哪里。有时，如果获取 url 时出现问题，它会给你一个神秘的错误，在我的（最后一个）案例中，这是因为 url 格式错误。希望能帮助那里的人。

# c# - GridView 删除行

> ID：15403231
> 
> 赞同：1
> 
> 时间：2013-03-14T07:10:48.333
> 
> 标签：c#, gridview, datatable

我正在尝试删除gridview中的一行（数据还没有在数据库中），所以它应该是一个简单的删除行，如果有人能指出我正确的方向......这就是我所拥有的完毕：

```
 else if (e.CommandName == "DeletePart")
    {
        int index = Convert.ToInt32(e.CommandArgument); //#1 line
        GridView1.DeleteRow(index);  //#2 line
    } 
```

我收到的错误是：“输入字符串的格式不正确。” （这发生在#1 行）...

这是 gridview 的样子：（使用链接按钮进行删除）

```
 <asp:GridView ID="GridView1" runat="server"  AllowPaging="True" 
                                EmptyDataText="No parts has been added to the model, please add a part."
                                BorderColor="Black" BorderStyle="Solid"  BorderWidth="2px" 
                                CellPadding="3" onrowcommand="GridView1_RowCommand" 
                            onrowediting="GridView1_RowEditing" onrowdeleting="GridView1_RowDeleting">
                                <Columns>
                                <asp:TemplateField HeaderText="">
                                 <ItemTemplate>
                                   <asp:LinkButton ID="EditButton" runat="server" CssClass="EditButton" CommandName="Edit" Text="Edit" />
                                 </ItemTemplate>
                                 </asp:TemplateField>
                                 <asp:TemplateField HeaderText="">
                                 <ItemTemplate>
                                   <asp:LinkButton ID="DeleteButton" runat="server" CssClass="DeleteButton" CommandName="DeletePart" CommandArgument='<%# Container.DataItemIndex %>' Text="Delete" />
                                 </ItemTemplate>
                                 </asp:TemplateField>
                                </Columns>
                            <HeaderStyle BackColor="#FFFFCC"  BorderColor="Black" BorderStyle="Solid" 
                                BorderWidth="2px" />
                        </asp:GridView> 
```

gridview 如何填充和绑定的类：

```
 public int companyID = 0;
public int methodID = 0;
DataTable dt;
#region SQLConnections

string connectionString = ConfigurationManager.ConnectionStrings["SOSConnectionString"].ConnectionString;
SqlConnection conn;
#endregion

protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        dt = new DataTable();
        MakeDataTable();
        EmptyDataString();
    }
    else
    {
        dt = (DataTable)ViewState["DataTable"];
    }
    ViewState["DataTable"] = dt; 

}

#region GridView

private void EmptyDataString()
{
    TemplateBuilder tmpEmptyDataTemplate = new TemplateBuilder();
    tmpEmptyDataTemplate.AppendLiteralString("No parts has been added to the model, please add a part.");
    GridView1.EmptyDataTemplate = tmpEmptyDataTemplate;
    GridView1.DataBind();
}

private void MakeDataTable()
{
    dt.Columns.Add("Item");
    dt.Columns.Add("Quantity");
    dt.Columns.Add("Price P/Quantity");
}

private void AddToDataTable()
{
    DataRow dr = dt.NewRow();
    dr["Item"] = txtPart.Text;
    dr["Quantity"] = numQuantity.Text;
    dr["Price P/Quantity"] = txtPricePQ.Text;
    dt.Rows.Add(dr);
}

private void BindGrid()
{
    GridView1.DataSource = dt;
    GridView1.DataBind();
}

protected void btnAddPart_Click(object sender, EventArgs e)
{
    AddToDataTable();
    BindGrid();
    ClearNewParts();
}
#endregion

    protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "Edit")
    { 
        for (int i = 0; i < GridView1.Rows.Count; i++)
        {
            GridViewRow row = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);
            txtPart.Text = row.Cells[2].Text;
            numQuantity.Text = row.Cells[3].Text;
            txtPricePQ.Text = row.Cells[4].Text;
        }
    }
    else if (e.CommandName == "DeletePart")
    {
        //int iCount = GridView1.Rows.Count;
        //for (int i = 1; i <= iCount; i++)
        //{
        //    GridView1.DeleteRow(i);
        //}
      //  int rowIndex = Convert.ToInt32(GridView1.SelectedRow);

        int index = Convert.ToInt32(e.CommandArgument);
        GridView1.DeleteRow(index);

        //int index = Convert.ToInt32(e.CommandArgument);
        //GridView1.DeleteRow(rowIndex);
    }

    GridView1.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:40:18.197

找到了解决方案，只需要做一个数据绑定......这是工作代码：

```
 else if (e.CommandName == "Delete")
    {     
        int index = Convert.ToInt32(e.CommandArgument);
        GridView1.DeleteRow(index);
        ((DataTable)ViewState["DataTable"]).Rows[index].Delete();
        ((DataTable)ViewState["DataTable"]).AcceptChanges();
        GridView1.DataSource = (DataTable)ViewState["Data"];
        GridView1.DataBind();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:31:38.127

> 好像你没有`CommandArgument`在`GridView`.

```
<asp:GridView runat="server" ID="gv" 
              CommandName="DeletePart" 
              CommandArgument='<%# Container.DataItemIndex %>'>         
</asp:GridView> 
```

> 添加`CommandArgument`如上所示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:53:05.197

试试这个..

**在 ASPX 中**：

```
<asp:GridView runat="server" ID="Gridview1" CommandName="delete" CommandArgument='<%#Container.DataItem.Index %>'/> 
```

**铯**：

```
else if (e.CommandName == "DeletePart")
{
    int index = Convert.ToInt32(e.CommandArgument); 
    GridView1.DeleteRow(index);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T07:30:44.423

尝试 int.TryParse ，这将解决输入字符串 fromat 问题，但为什么会出现您需要检查您正在设置的 CommandArgument 的情况。

```
else if (e.CommandName == "DeletePart")
{
    int index =-1;
    if(int.TryParse(e.CommandArgument,out index)) //#1 line
        GridView1.DeleteRow(index);  //#2 line
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-18T07:54:35.183

```
Thy This:) 

<asp:GridView ID="GridView1" runat="server"  CssClass="gridview"
                            HorizontalAlign="Left" PagerSettings-Visible="true" AllowPaging="True" 
                            PageSize ="5" Width="300px" >
                            <Columns>
                               <asp:CommandField ShowDeleteButton="True" ButtonType="Button" />      
                            </Columns>
                            </asp:GridView>

then code behinde:

    Protected Sub GridView1_RowDeleting(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewDeleteEventArgs) Handles GridView1.RowDeleting
        DirectCast(ViewState("CurrentDataReference"), DataTable).Rows.RemoveAt(e.RowIndex)
        GridView1.DataSource = DirectCast(ViewState("CurrentDataReference"), DataTable)
        GridView1.DataBind()

    End Sub 
```

# c - 从C中的文本文件中读取矩阵的空格分隔浮点值

> ID：15403235
> 
> 赞同：0
> 
> 时间：2013-03-14T07:11:24.170
> 
> 标签：c, matrix, file-read

下面的代码可能有什么问题，它永远不会打开文件。我也尝试过使用绝对文件路径，但这对我没有帮助，我知道文件在那里。

```
FILE *myfile;

    myfile= fopen("IN.txt",r);
    if (myfile != NULL)
    {
        while ( fscanf(myfile,"%lf",&test) !=eof )
        {
            printf("%f",test);
            printf("\n");
        }
    }
    fclose(myfile); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:16:12.180

也许你想这样做：

```
myfile= fopen("IN.txt","r"); 
```

这是因为第二个参数是 const char* 类型

和这里：

```
while ( fscanf(myfile,"%lf",&test) !=EOF ) 
```

（C 区分大小写）。

编辑：我想建议使用类似的东西：

```
while ( (fscanf(myfile, "%lf", &test)) > 0){...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:18:55.187

Try printing the error using

printf ("Error opening file : %s\n",strerror(errno));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:16:25.770

```
myfile= fopen("IN.txt",r); 
```

应该是

```
myfile = fopen("IN.txt","r"); 
```

并确保您的文件系统与文件名所暗示的一样（不区分大小写）（因此“IN.txt”在 UN*X 与“in.txt”不同的文件上）

# java - javax.mail.messagingexception 无法连接到 SMTP 主机：主机名端口：25 响应：552

> ID：15403236
> 
> 赞同：0
> 
> 时间：2013-03-14T07:11:24.543
> 
> 标签：java, email, smtp

我收到**Javax.mail.messagingexception：无法连接到 SMTP 主机：主机名端口：25 响应：552**

有时邮件发送成功。但有时我会得到这个例外。

我不清楚为什么会这样。如果出现任何问题，则不应发送任何邮件。但异常有时仍然会发生。

> javax.mail.MessagingException：无法连接到 SMTP 主机：mail.mydomain.com，端口：25，响应：com.sun.mail.smtp.SMTPTransport.openServer 的 552（SMTPTransport.java:1270）在 com.sun。 mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:370) 在 javax.mail.Service.connect(Service.java:297) 在 javax.mail.Service.connect(Service.java:156) 在 javax.mail.Service .connect(Service.java:105) at javax.mail.Transport.send0(Transport.java:168) at javax.mail.Transport.send(Transport.java:98) at com.winit.magicbricks.businessLayer.CommonFunctions$1 .run（CommonFunctions.java:1065）在 java.lang.Thread.run（未知来源）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:34:36.400

提供完整的错误日志.. 552 是一个通用响应代码，它可能是您正在发送垃圾邮件或收件人邮箱已满。

> 您应该尝试将 DKIM 签名添加到您的域的邮件和 SPF 记录条目中

# jquery - 如何在单个 JQM 中将值从一个页面传递到另一个页面

> ID：15403237
> 
> 赞同：0
> 
> 时间：2013-03-14T07:11:32.780
> 
> 标签：jquery, ajax, jquery-mobile

我使用 pageinit 加载页面并使用 localstorage 全局存储参数

```
 $('#testpage').live('pageinit',function(event){
      getsList();
    }); 
```

如果我按下返回按钮，代码就在这里

```
function backToTest() {
    $.mobile.changePage('#testpage', {
        transition : "pop",
        reverse : false,
        changeHash : false
    });
} 
```

一些问题：

*   它不适用于多页导航。

*   本地存储是否适合这个概念？

*   并将局部变量传递给 Ajax 以访问 Rest Webservice。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:34:12.197

首先，看看我的另一个[**ANSWER**](http://www.gajotres.net/document-onpageinit-vs-document-ready/)。

在那里你会找到章节：页面转换之间的数据/参数操作，你还会找到工作的 jsFiddle 示例。

这是一个简短的概述：

在页面转换期间，可以将参数从一个页面发送到另一个页面。它可以通过几种方式完成。

参考：[https ://stackoverflow.com/a/13932240/1848600](https://stackoverflow.com/a/13932240/1848600)

## 解决方案1：

您可以使用 changePage 传递值：

```
$.mobile.changePage('page2.html', { dataUrl : "page2.html?paremeter=123", data : { 'paremeter' : '123' }, reloadPage : true, changeHash : true }); 
```

并像这样阅读它们：

```
$("#index").live('pagebeforeshow', function () {
    var parameters = $(this).data("url").split("?")[1];;
    parameter = parameters.replace("parameter=","");  
    alert(parameter);
});

This will only work on multi html page format. 
```

## 解决方案2：

或者，您可以创建一个持久的 javascript 对象用于存储目的。只要 ajax 用于页面加载（并且页面不会以任何方式重新加载），该对象将保持活动状态。

```
var storeObject = {
    firstname : '',
    lastname : ''
} 
```

示例：http: [//jsfiddle.net/Gajotres/9KKbx/](http://jsfiddle.net/Gajotres/9KKbx/)

## 解决方案3：

您还可以像这样访问上一页的数据：

```
$('#index').live('pagebeforeshow', function (e, data) {
    alert(data.prevPage.attr('id'));
}); 
```

prevPage 对象保存完整的前一页。

## 解决方案4：

作为最后一个解决方案，我们有一个漂亮的 localStorage 的 HTML 实现。它仅适用于 HTML5 浏览器（包括 Android 和 iOS 浏览器），但所有存储的数据通过页面刷新保持不变。

```
if(typeof(Storage)!=="undefined") {
    localStorage.firstname="Dragan";
    localStorage.lastname="Gaic";            
} 
```

示例：http: [//jsfiddle.net/Gajotres/J9NTr/](http://jsfiddle.net/Gajotres/J9NTr/)

可能是最好的解决方案，但在某些版本的 iOS 5.X 中会失败。这是一个众所周知的错误。

# 更多信息

如果您想了解有关此主题的更多信息，请查看这篇**[文章](http://www.gajotres.net/passing-data-between-jquery-mobile-pages/)**。您会发现几个带有示例的解决方案。

# perl - 在 @INC 中找不到 ***

> ID：15403239
> 
> 赞同：2
> 
> 时间：2013-03-14T07:11:47.850
> 
> 标签：perl

我将 perl 模块安装在`~/.local/perl5`. 以下是部分内容`~/.bashrc`：

```
export PERL_LOCAL_LIB_ROOT="$HOME/.local/perl5";
export PERL_MB_OPT="--install_base $HOME/.local/perl5";
export PERL_MM_OPT="INSTALL_BASE=$HOME/.local/perl5";
export PERL5LIB="$HOME/.local/perl5/lib/perl5:$PERL5LIB";
export PATH="$HOME/.local/perl5/bin:$PATH"; 
```

我已经安装`CSS::Inliner`了

```
$ cpan
cpan[1]> install CSS::Inliner 
```

我有`Inliner.pm`：

```
~/.local/perl5/lib/perl5/CSS/Inliner.pm 
```

但是当我`use`- perl 找不到它时：

```
perl -e 'use Inliner' 
```

给出：

```
Can't locate Inliner.pm in @INC (@INC contains:
/home/boris/.local/perl5/lib/perl5/x86_64-linux-gnu-thread-multi
/home/boris/.local/perl5/lib/perl5 /etc/perl
/usr/local/lib/perl/5.14.2 /usr/local/share/perl/5.14.2 /usr/lib/perl5
/usr/share/perl5 /usr/lib/perl/5.14 /usr/share/perl/5.14
/usr/local/lib/site_perl .) at -e line 1\. BEGIN failed--compilation
aborted at -e line 1. 
```

为什么perl找不到模块？

**编辑**：

我正在尝试重现[CSS-Inliner](http://search.cpan.org/~kamelkev/CSS-Inliner-3674/lib/CSS/Inliner.pm)文档中给出的最小工作示例：

```
use Inliner;

my $inliner = new Inliner();

$inliner->read_file({filename => 'myfile.html'});

print $inliner->inlinify(); 
```

如果我`use Inliner`-- perl 找不到它。如果我

```
#!/usr/bin/perl

use CSS::Inliner;

my $inliner = new Inliner();

$inliner->read_file({filename => 'test.html'});

print $inliner->inlinify(); 
```

perl 说

```
Can't locate object method "new" via package "Inliner"
(perhaps you forgot to load "Inliner"?) at ./1.perl line 5. 
```

**编辑 2**：

这是一个最小的工作示例`CSS-Inliner`：

```
#!/usr/bin/perl

use CSS::Inliner;

my $inliner = CSS::Inliner->new;

$inliner->read_file({filename => 'test.html'});

print $inliner->inlinify(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:29:38.757

`use`调用类方法时应使用完整的模块名称和完整的类名称：

```
use CSS::Inliner;
my $inliner = CSS::Inliner->new; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T17:39:54.140

当您在安装模块时不小心时，可能会发生这种情况。一旦我简单地将 foo.pm 复制到官方 /usr/lib/perl5/site_perl 目录中。foo.pm 可以是本地或第三方开发的模块。我没有注意umask。安装在那里的文件不被世界读取。当我使用该模块时，我会收到消息说：Cannot locate foo.pm in @INC（@INC contains /usr/lib/perl5/site_perl ....）。哎呀，它显然在那里！我花了一段时间检查文件权限。希望这可以为其他安装自己的模块的人节省一些时间。在 make 文件中，您应该使用 install -m 644 来确保安装的模块对其他人具有读取权限。

# java - Eclimd：从 vim 运行时找不到文件

> ID：15403240
> 
> 赞同：0
> 
> 时间：2013-03-14T07:11:48.193
> 
> 标签：java, vim, eclim

我有一个 Eclipse 项目：

```
myProject/
       |--src/
       |   |--MyClass.java
       |
       |--bin/
           |--MyClass.class
           |--data.dat 
```

`MyClass`从 读取`data.dat`。当我使用from within编辑`MyClass.java`和运行时，我得到了一堆错误：`:Java``vim`

```
java.io.FileNotFoundException: data.dat (No such file or directory)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:120)
at java.io.FileInputStream.<init>(FileInputStream.java:79) 
```

如果我使用 导航到`myProject/bin`并运行那里的类`java MyClass`，我就可以读取该`data.dat`文件。

我在哪里设置我试图打开的文件的位置，以便它们相对于已*编译*的Java，而不是相对于我的`*.java`文件？它似乎不在`.classpath`文件中。

作为第二个问题：我在寻找答案时遇到问题，因为我不太清楚要搜索什么。`java runtime file locations`不起作用。哪些关键字描述了这个问题，以便我自己找到答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:08:28.073

这可能是因为默认路径不是 bin 文件夹，而是项目文件夹本身。尝试将您的文件移动到项目文件夹或更改其在程序中的路径。

您也可以通过命令行参数传递文件，但这可能会导致您可能已经知道的其他一些问题。

# ruby-on-rails - 如何在两个用户之间创建私人频道

> ID：15403241
> 
> 赞同：2
> 
> 时间：2013-03-14T07:11:53.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, websocket, faye, private-pub

我一直在`Faye`为聊天应用程序实现服务器。目前我们的表中有 400000 个用户。每个用户都可以私下互相聊天。但我不知道如何在两个用户之间使用`Faye`或`private pub`为 40 万用户实现私人频道。我是否必须制作一个包含`4 lakhs X 4 lakhs`私人频道条目的表格，我认为这不是一个好主意。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:23:26.497

Faye 文档提供了关于这个主题的一些非常好的信息：http: [//faye.jcoglan.com/security.html](http://faye.jcoglan.com/security.html)

在您的情况下，*我应该如何验证客户端？*特别相关。

参与私人一对一聊天的[用户订阅一个频道](http://faye.jcoglan.com/browser/subscribing.html)，您的应用程序控制谁可以使用提到的身份验证技术订阅该频道 - 它只允许两个预期用户参与。

# twitter - IOS 6 推特登录，而不是推特

> ID：15403243
> 
> 赞同：2
> 
> 时间：2013-03-14T07:12:09.503
> 
> 标签：twitter, ios6, social

我正在将 twitter 集成到我的示例 ISO 应用程序中。一旦用户进行设置，它就会要求我发推文。我不要那个屏幕。我只想要简单的用户设置。我怎样才能做到这一点？

我的示例代码是：

```
 if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
    {
        SLComposeViewController *tweetSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
    [tweetSheet setInitialText:@"Tweeting from my own app! :)"]; 
       [self presentViewController:tweetSheet animated:YES completion:nil ];

    } 
```

# oop - 数据库设计：单个表的通用外键

> ID：15403245
> 
> 赞同：1
> 
> 时间：2013-03-14T07:12:13.280
> 
> 标签：oop, database-design, foreign-keys

我对数据库设计还是个新手，我遇到了一些困难。

我有一个产品表，它有一个主类别和子类别属性，我很难为他们的数据库表和类图确定一个好的设计。

例如，橙子的 main_category 为“Fruit”，其子类别为“pulpy fruit”，另一种产品可能为 Broccoli，其 main_category 为“Vegetable”，其子类别为“Fibrous Vegetables”。所以我相信子类别也在 main_category 下，根据所选的 main_category，可以选择子类别列表。

我现在的设计是这样的：

```
=======================       =======================       =====================
|        PRODUCT      |       |     SUBCATEGORY     |       |   MAIN CATEGORY   |
=======================       =======================       =====================
| PK       id         |       |PK         id        |       |PK       id        |
|         name        | --->  |          name       | --->  |        name       |
| FK main_category_id |       |FK main_category_id  |       =====================
| FK  subcategory_id  |       =======================                      ^
=======================  --------------------------------------------------| 
```

但我对我目前的设计有疑问，想问问你的意见，这个设计是否可以接受，或者有没有更好的设计方法。

另外，就 OOP 而言，这将是什么类型的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:54:04.093

由于子类别也是类别，因此您可以将它们全部放在一个表中。你可能有这样的设计，

`Product(id, name)`

`Category(id, name)`

`ProductMaincategoryAssignments(productId, categoryId)`

`ProductSubcategoryAssignments(productId, categoryId)`

这里**productId**和**categoryId**是外键，它们引用**Product**和**Category**表中的相应**id 。**

# c# - FileNotFound 异常但文件存在

> ID：15403249
> 
> 赞同：0
> 
> 时间：2013-03-14T07:12:24.153
> 
> 标签：c#, image, file

没什么好解释的，因为我没有合乎逻辑的解释为什么这不起作用：s ![在此处输入图像描述](../Images/b100f79b64185cb4e58bd30acb36aeda.png)

只是为了确认，这是一个“jpeg”文件扩展名，名称是正确的，我没有看到任何其他问题，说明它为什么无法工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T07:15:29.530

您将其保存为以“jpg”结尾的文件名，然后从以“jpeg”结尾的文件名*加载*。假设您正在尝试加载刚刚保存的文件，那就是问题所在。

（我会复制代码以指出有问题的行，但您只将其作为图像包含...）

我强烈建议构建文件名*一次*，并使用该变量两次：

```
// I prefer using Path.Combine over string concatenation, but both will work.
// You might want to change "Identitys" to "Identities" though :)
string file = Path.Combine(@"C:\", "SimpleSkype", "Identitys", dd + ".jpg");
SaveSkypeAvatarToDisk(u.Handle, file);
using (Image image = Image.FromFile(file))
{
    ...
} 
```

# c - 在数组中写入 aa char * 并在文件中写入

> ID：15403251
> 
> 赞同：1
> 
> 时间：2013-03-14T07:12:29.333
> 
> 标签：c

这是我的一段代码：

```
char sentence[400];
FILE *f;

const char *appname = application_name; //where the application_name comes from the program
strcat(sentence,appname);
... //I add more string 

f = fopen ("Test.txt", "a+");
...
fprintf(f,"%s\n",sentence);
fclose (f); 
```

结果的一个例子是：`àB®pgAdmin III - Browser` 什么是`àB®`？

当我添加时，`printf("%s",appname)`我可以在控制台中看到正确的名称，在上面的例子中`pgAdmin III - Browser`，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T07:15:28.143

`sentence`未初始化，您正在向其中添加一些内容。你最终得到的是随机垃圾，然后是你的文本。使用`strcpy`或初始化`sentence`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:39:51.527

将 strcat 更改为 strcpy 您的程序将正常工作。

```
 #include <stdio.h>
    #include <string.h>
    int main()
    {
    char sentence[400];
    const char *appname = "string_check";
    strcpy(sentence,appname);
    printf("%s\n", sentence);
    return 0;
    } 
```

# iphone - 在 ios6 中使用 GPS 在地图视图中进行路径跟踪

> ID：15403252
> 
> 赞同：1
> 
> 时间：2013-03-14T07:12:29.663
> 
> 标签：iphone, map, path, trace

在我使用 gps 的地图视图中，我开始从当前位置慢跑到其他位置，我计算了我走过的距离，但我无法追踪从我的起始位置到终点的路径，请告诉我你的建议。

谢谢你

# forms - 非鼠标反应层（形式）

> ID：15403253
> 
> 赞同：0
> 
> 时间：2013-03-14T07:12:30.333
> 
> 标签：forms, delphi, events, mouse

是否可以创建一个不响应鼠标事件的透明表单？

我的意思是鼠标事件被传递给下面的应用程序。

或者问题可能是：

如何将鼠标事件从我的软件传递到它下面的应用程序？

谢谢你。

# javascript - js中如何提高日期对象到字符串的加载时间？

> ID：15403256
> 
> 赞同：1
> 
> 时间：2013-03-14T07:12:37.067
> 
> 标签：javascript, performance, tostring

我正在使用此代码将日期对象转换为日期字符串。

```
 var startDate = dateObject;
 var dateString = startDate.getMonth() + 1 + "/" + startDate.getDate() + "/" + startDate.getFullYear(); // to display in "M/d/yyyy" format 
```

发生的情况是在 IE 10 中需要 0.003 秒，我正在转换超过 10000 个日期，它会影响我的应用程序的整体性能。**有什么方法可以提高性能吗？**

我正在使用此代码来检查性能。

```
var d = new Date();
var startDate = dateObject;
var dateString = startDate.getMonth() + 1 + "/" + startDate.getDate() + "/" + startDate.getFullYear();
$startTimeCol.html(dateString);
var ticks = ((new Date() - d) / 1000);        
console.log("toString: " + ticks + "sec"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:59:21.817

好的，这需要一些时间来整理和测试。

您很可能希望使用 String().concat。在此处查看比较代码，[http://jsfiddle.net/VbCyP/1/](http://jsfiddle.net/VbCyP/1/)

我比较了 3 个版本：与 + 的字符串连接、与数组和连接的字符串连接以及 String.concat。

在 2009 Macbook 上测试最新版本的 Chrome、Safari 和 Firefox 时，String().concat 始终是该操作最快的。

来自 jsfiddle 的示例代码：

```
var x = String().concat(dates[i].getMonth() + 1, '/', dates[i].getDate(), '/', dates[i].getFullYear()); 
```

# ios - MKPointAnnotation 表达式不可赋值

> ID：15403267
> 
> 赞同：0
> 
> 时间：2013-03-14T07:13:19.143
> 
> 标签：ios, objective-c, mapkit, mkannotation

所以我有以下代码块，它应该遍历 JSON 对象数组并将 MKPointAnnotations 放在地图上：

```
for(id jsonObject in dataArray)
{
    NSLog(@"%d",[dataArray count]);

    NSDictionary* jsonDictionary = jsonObject;

    MKPointAnnotation *point = [[MKPointAnnotation alloc] init];
    NSString *lat = [jsonDictionary objectForKey:@"latitude"];
    NSString *lon = [jsonDictionary objectForKey:@"longitude"];

    point.coordinate.latitude = [lat doubleValue];
    point.coordinate.longitude = [lon doubleValue];

    [map addAnnotation:point];

} 
```

但是，这两行：

```
 point.coordinate.latitude = [lat doubleValue];
    point.coordinate.longitude = [lon doubleValue]; 
```

给我一个“表达式不可分配”错误。我这辈子都想不通。我试图制作一个 CLLocationCoordinate2D 对象并分配它，但它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:20:43.503

这应该有效：

```
CLLocationCoordinate2d coordinate = ...
MKPointAnnotation* annotation = [[MKPointAnnotation alloc] init];
annotation.coordinate = coordinate;
[mapView addAnnotation:annotation]; 
```

它适用于现有应用程序，只需检查代码和应用程​​序。也检查这个答案：[https ://stackoverflow.com/a/15162092/1032151](https://stackoverflow.com/a/15162092/1032151)

# css - 边距：0 自动；在 Firefox 和 Safari 中不起作用。适用于谷歌浏览器

> ID：15403268
> 
> 赞同：0
> 
> 时间：2013-03-14T07:13:21.877
> 
> 标签：css, google-chrome, firefox, safari

这是我的页面：http: [//inventikasolutions.com/demo/tatasky](http://inventikasolutions.com/demo/tatasky)

蓝色按钮在 Google Chrome 中居中显示，但在 Safari 和 Firefox 中它浮动到左侧。

我正在使用最新版本的浏览器。

我的CSS代码是：

```
.messi .btn {
background-image: url(submit.png);
background-repeat: no-repeat;
background-size: auto;
background-position: -1px -490px;
background-color: #5B74A8;
border-color: #29447E #29447E #1A356E;
color: white;
font-size: 15px;
padding: 10px;
-webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .1);
border: 1px solid #999;
vertical-align: middle;
line-height: 20px;
margin: 0 auto;
display: block;
}

.messi-actions .btnbox .btn {
min-width: 75px;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:46:39.797

Firefox 以不同的方式呈现 btn 周围的 div 标签。所以它将它与它的包装 div 标签的中心对齐，但该标签只是按钮的宽度并且左对齐。添加它以使其正常工作：

```
.mesi-footbox {
    text-align: center;
} 
```

如果它没有呈现全宽，这将使 div 居中，或者在 chrome 中保持相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T18:56:22.563

@Pritesh Desai 尝试放入 safari text-align:center; 到包含要居中的 div 的容器 div

# php - 对商品进行数据库管理以存储其类别

> ID：15403272
> 
> 赞同：0
> 
> 时间：2013-03-14T07:13:32.537
> 
> 标签：php, mysql

我必须创建一个包含商品的网站。这些商品有自己的类别。例如，商品可以分为许多类别或子类别。我已经有一个包含它们属性的项目表。任何人都可以说如何在不复制数据的情况下将其类别保存在数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:29:59.303

好的。在这种情况下，一个项目可能有很多类别，一个类别可能有很多项目。所以它是多对多的关系。尝试如下，

您的 Item 表可能如下所示，

`Item(**id**, description, amount, ... )`

在您的类别表中，

`Category(**id**, name, description, ... )`

并且会有另一个表来为项目分配类别，

`ItemCategoryAssignments(**itemId**, **categoryId**)`

ItemCategoryAssignments 表中将有两个外键。那，

`**itemId** references **id** in the **Item** tabel`

和

`**categoryId** references **id** in the **Category** tabel`

像那样。不会有重复的行。希望这会有所帮助。

# python - 可能有冲突的 python 安装

> ID：15403273
> 
> 赞同：14
> 
> 时间：2013-03-14T07:13:33.317
> 
> 标签：python, numpy

我不确定默认的 python 安装是否是我一直在安装模块的那个，以及这是否可能是导致 Unicode 字节大小兼容性错误冲突的原因。简而言之，我使用 Python 2.7.3 安装了 Numpy 1.7，当我尝试安装使用 Python 和 Numpy 作为依赖项的其他程序时，我收到此错误：

```
Traceback (most recent call last):
  File "setup.py", line 20, in <module>
    from weblogolib import __version__
  File "/home/chris/Documents/IS/Bioinformatics-Software/weblogo-3.3/weblogolib/__init__.py", line 108, in <module>
    from numpy import array, asarray, float64, ones, zeros, int32,all,any, shape
  File "/usr/lib/python2.7/dist-packages/numpy/__init__.py", line 137, in <module>
import add_newdocs
  File "/usr/lib/python2.7/dist-packages/numpy/add_newdocs.py", line 9, in <module>
from numpy.lib import add_newdoc
  File "/usr/lib/python2.7/dist-packages/numpy/lib/__init__.py", line 4, in <module>
from type_check import *
  File "/usr/lib/python2.7/dist-packages/numpy/lib/type_check.py", line 8, in <module>
import numpy.core.numeric as _nx
  File "/usr/lib/python2.7/dist-packages/numpy/core/__init__.py", line 5, in <module>
import multiarray
ImportError: /usr/lib/python2.7/dist-packages/numpy/core/multiarray.so: undefined symbol: PyUnicodeUCS4_AsUnicodeEscapeString 
```

所以我想我有一个冲突的 unicode 字节大小（2 字节与 4 字节）。我去检查我是否有可能会搞砸的 Python 版本冲突。

```
python --version
Python 2.7.3 
```

但这似乎与

```
which python
/usr/local/bin/python 
```

当我去`/usr/local/bin`我发现这些文件（与python相关）：

```
python
python2
python2.7
python-config
python2-config
python2.7-config 
```

现在我已经将 numpy 安装到 dist-packages 目录中，`/usr/lib/python2.7/dist-packages`该目录对应于我得到的`python --version`. 但是，当我尝试`which python`获取目录时，我`python`并不`python2.7`担心当我尝试安装使用 python 和 numpy 作为依赖项的程序时，这可能会发生冲突。

所以我想澄清我的问题：这些普通文件是要为 python 安装找到还是我以某种方式安装了三个不同的版本？他们是否会导致我使用无法识别的符号出错？如果它们确实是无关版本，有没有办法卸载？

感谢您的任何帮助，您可以提供！

哦，这是我之前遇到的问题的链接，我`PYTHONPATH`在尝试修复我得到的 ImportError 时进行了编辑，如果这可能会影响事情.... [ImportError: No module named numpy](https://stackoverflow.com/questions/15401411/importerror-no-module-named-numpy/15401553?noredirect=1#comment21775367_15401553)

以下是尝试 virtualenv 的结果：

```
chris@ubuntu:~/Documents/IS/Bioinformatics-Software$ virtualenv weblogo-3.3
New python executable in weblogo-3.3/bin/python
Installing setuptools.............done.
Installing pip...............done.
chris@ubuntu:~/Documents/IS/Bioinformatics-Software$ cd weblogo-3.3
chris@ubuntu:~/Documents/IS/Bioinformatics-Software/weblogo-3.3$ source bin/activate
(weblogo-3.3)chris@ubuntu:~/Documents/IS/Bioinformatics-Software/weblogo-3.3$ pip install numpy
Requirement already satisfied (use --upgrade to upgrade): numpy in /usr/lib/python2.7/dist-packages
Cleaning up... 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T07:30:41.627

问题确实似乎是 Python 和 Numpy 编译设置不匹配。

/usr/local/bin 是安装自定义 Python 的位置，您应该尝试使用 /usr/bin/python 来运行。

另一种解决方案是使用 virtualenv。试试这个：

```
virtualenv myproject
cd myproject
source bin/activate
pip install numpy 
```

基本上，virtualenv 在“myproject”目录中使用自己的包设置不同的 Python 安装。运行“激活”命令会告诉系统您要使用此安装而不是默认系统。这使您可以为不同的项目拥有不同的 Python 环境。使用 virtualenv，每个项目都可以拥有自己的 Python 包版本，即使它们与其他项目或系统包不兼容。

请注意，每次打开新外壳并想要使用该虚拟环境时，都必须重复“源”命令。此外，您可能必须使用操作系统包管理器安装 virtualenv 命令。如果这不可能（例如您没有 root 访问权限）或者您的操作系统版本由于某种原因太旧，您也可以从[https://pypi.python.org/packages/source/v/手动下载它虚拟环境/](https://pypi.python.org/packages/source/v/virtualenv/)

如果你执行 ls -l /usr/local/bin/python* 你应该看到 python 和 python2 实际上是 python2.7 的符号链接，同样 python-config 和 python2-config 是 python2.7-config 的符号链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:25:21.267

你在什么操作系统上？对于超级用户来说，这更像是一个问题，但请尝试这样的事情。如果您还没有，请 丢弃`easy_install`并使用。`pip`

在 Ubuntu 上：

```
sudo apt-get install python-setuptools 
sudo easy_install pip 
pip install --user numpy 
```

# java - 重定向 System.out.println 到日志

> ID：15403275
> 
> 赞同：13
> 
> 时间：2013-03-14T07:13:35.233
> 
> 标签：java, logging

在我的项目测试套件中有大量使用

```
System.out.println 
```

我正在尝试将这些输出重定向到日志文件（通过配置或从单点而不重构整个项目），以便在必要时可以禁用以提高性能。我正在使用 log4j 进行日志记录。有谁知道这可能吗？如果有怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-09-05T09:23:49.467

鉴于它更好地替换`System.out.println()`，有时我们别无选择。无论如何，我为此做了一个小工具：

```
SystemOutToSlf4j.enableForClass(MyClass.class) 
```

然后所有来自 MyClass 的 println 将被重定向到记录器。 [有关详细信息，请参阅此帖子...](http://bonfab.io/redirect-system-out-to-logger/)

```
public class SystemOutToSlf4j extends PrintStream {

  private static final PrintStream originalSystemOut = System.out;
  private static SystemOutToSlf4j systemOutToLogger;

  /**
   * Enable forwarding System.out.println calls to the logger if the stacktrace contains the class parameter
   * @param clazz
   */
  public static void enableForClass(Class clazz) {
    systemOutToLogger = new SystemOutToSlf4j(originalSystemOut, clazz.getName());
    System.setOut(systemOutToLogger);
  }

  /**
   * Enable forwarding System.out.println calls to the logger if the stacktrace contains the package parameter
   * @param packageToLog
   */
  public static void enableForPackage(String packageToLog) {
    systemOutToLogger = new SystemOutToSlf4j(originalSystemOut, packageToLog);
    System.setOut(systemOutToLogger);
  }

  /**
   * Disable forwarding to the logger resetting the standard output to the console
   */
  public static void disable() {
    System.setOut(originalSystemOut);
    systemOutToLogger = null;
  }

  private String packageOrClassToLog;

  private SystemOutToSlf4j(PrintStream original, String packageOrClassToLog) {
    super(original);
    this.packageOrClassToLog = packageOrClassToLog;
  }

  @Override
  public void println(String line) {
    StackTraceElement[] stack = Thread.currentThread().getStackTrace();
    StackTraceElement caller = findCallerToLog(stack);
    if (caller == null) {
      super.println(line);
      return;
    }

    org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(caller.getClass());
    log.info(line);
  }

  public StackTraceElement findCallerToLog(StackTraceElement[] stack) {
    for (StackTraceElement element : stack) {
      if (element.getClassName().startsWith(packageOrClassToLog))
        return element;
    }

    return null;
  }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T07:17:04.097

如果可能的话，我的建议是重构。有关可能的解决方案，请检查这些类似的问题

[log4j 将标准输出重定向到 DailyRollingFileAppender](https://stackoverflow.com/questions/1200175/log4j-redirect-stdout-to-dailyrollingfileappender)

[将 System.out.println 重定向到 Log4J，同时保留类名信息](https://stackoverflow.com/questions/5712764/redirect-system-out-println-to-log4j-while-keeping-class-name-information)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T07:34:32.027

我认为您可以使用[`System.setOut(PrintStream)`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setOut%28java.io.PrintStream%29)将输出设置为文件输出流。然后你可以把这一行放在你的 BeforeClass 方法中。我喜欢使用 BaseTest 类，并将这行代码放在该类的 beforeclass 方法中。然后让所有的测试用例扩展这个cclass。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T07:19:48.663

使用外壳重定向。找出你的项目的“java”调用，如果你在最模糊的类 UNIX 系统上，ps aux | grep java 会有所帮助。

然后只需使用 > /path/to/logfile 运行此命令。例子：

```
java -jar myjar.jar -cp path/to/lib.jar:path/to/otherlib.jar com.bigcorp.myproject.Main > /var/log/myproject.log 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-18T06:05:30.487

```
public class RecursiveLogging {
public static void main(String[] args) {
    System.setOut(new PrintStream(new CustomOutputStream()));

    TestMyException.testPrint();
}

}

class CustomOutputStream extends OutputStream {
private Logger logger = Logger.getLogger(this.getClass());

@Override
public final void write(int b) throws IOException {
    // the correct way of doing this would be using a buffer
    // to store characters until a newline is encountered,
    // this implementation is for illustration only
    logger.info((char) b);
}

@Override
public void write(byte[] b, int off, int len) throws IOException {
    if (b == null) {
        throw new NullPointerException();
    } else if ((off < 0) || (off > b.length) || (len < 0) ||
               ((off + len) > b.length) || ((off + len) < 0)) {
        throw new IndexOutOfBoundsException();
    } else if (len == 0) {
        return;
    }
    byte[] pb = new byte[len];
    for (int i = 0 ; i < len ; i++) {
        pb[i] = (b[off + i]);
    }
    String str = new String(pb);
    logger.info(str);
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-26T15:28:17.780

我的解决方案非常简单，并且支持所有 PrintStream 功能而不会重载所有内容。仅重载 flush()，因为它由 PrintStream 方法在每个新行中调用。

```
public class ConsoleToLogger
{
  private Logger log;
  private PrintStream originalStream;
  private Level logLevel;
  private ByteArrayBufferOutStream buffer;
  private PrintStream bufferPrintStream;

  ConsoleToLogger(PrintStream realPrintStream, Level pLogLevel)
  {
    buffer = new ByteArrayBufferOutStream();
    bufferPrintStream = new PrintStream(buffer);
    originalStream = realPrintStream;
    logLevel = pLogLevel;
    log = Logger.getLogger(Level.ERROR.equals(pLogLevel) ? "STDERR" : "STDOUT");
  }

  public PrintStream getPrintStream()
  {
    return bufferPrintStream;
  }

  private class ByteArrayBufferOutStream
    extends ByteArrayOutputStream
  {
    @Override
    public void flush()
      throws IOException
    {
      super.flush();
      String message = buffer.toString();
      originalStream.println(message);
      log.log(logLevel, message);
      buffer.reset();
    }
  }
}

// assign to System.out and system.err
System.setOut(new ConsoleToLogger(System.out, Level.INFO).getPrintStream());
System.setErr(new ConsoleToLogger(System.err, Level.ERROR).getPrintStream()); 
```

# java - java同步的

> ID：15403277
> 
> 赞同：0
> 
> 时间：2013-03-14T07:13:42.030
> 
> 标签：java, multithreading

该类`X`有两种方法：`test`和`test1`。

我创建了两个线程：`t1`和`t2`. 线程`t1`正在访问`test`方法并且`t2`正在访问`test1`同一对象的方法。何时`t1`访问`test`同步的方法获取对象锁定。

将`t2`能够访问`test1`同一对象上的方法吗？`t1`如果有锁，为什么它能够访问这个方法？

如果我正在执行以下代码

```
 X x = new X();
           new MyThread(x).start(); // It execute test() method
       new MyThread1(x).start();// It execute test1() method

class X 
{
    String a  = "varsha";
    public synchronized void test ()
    {
        try 
        {
            Thread.sleep (6000);
        }
        catch (InterruptedException e)
        {
            e.printStackTrace ();
        }
    } 
    public void test1 ()
    {
        synchronized (a)
        {
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:16:06.243

你有两个不同的锁：

*   `test()`锁`this`；
*   `test1()`锁`this.a`。

这两个锁是完全独立的，因此可以同时调用这两个方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:17:00.450

您的代码等效于以下内容：

```
class X 
{
    String a  = "varsha";
    public void test ()
    {
        synchronized (this)
        {
            try
            {
                Thread.sleep (6000);
            }
            catch (InterruptedException e) 
            {
                e.printStackTrace();
            }
        }
    } 

    public void test1 ()
    {
        synchronized(a)
        {
        }
    } 
} 
```

因此，这些方法在不同的对象（`this`vs `a`）上同步，因此可以同时执行而不会相互锁定。

请注意，我替换`Thread.currentThread ().sleep (6000)`为`Thread.sleep (6000)`因为方法`sleep`是静态的，因此您不需要任何实例`Thread`来使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:29:48.737

```
class X {

  String a  = "varsha";

   public synchronized void test(){

   try {             
                  //if you are modifying the instance variable here
                  // then the test1() synchronized block will 
                 //not be given lock permission to t2 thread
                 // synchronization is for thread safety.

                 // In your example you are not modifying the instance variable.

   } catch (InterruptedException e) {
    e.printStackTrace();
   }
 } 
 public  void test1(){
   synchronized(a){
   }
 } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-20T01:48:24.927

这是实际发生的事情。
Java 中的每个对象都有一个“监视器锁”，在本例中是对象“x”。

有两个线程（MyThread 和 MyThread1）试图按以下顺序获取此锁 -

想象有一个队列——MyThread 在这个队列中位于 MyThread1 的前面，因为您首先启动了 MyThread，然后是 MyThread1。

MyThread 首先获取锁并开始执行，您已经在其上调用了 sleep() 方法。这会将 MyThread 的状态从“执行状态”更改为“等待状态”，然后再更改为“就绪状态”，此时它会释放锁，因为它不处于执行状态。此时 MyThread1 在队列中处于领先地位，它获取锁并开始执行。

这在某种程度上类似于“上下文切换”的概念。参考书 - 操作系统内部和设计。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-14T07:21:28.930

当您将方法标记为同步时，它会锁定该方法的对象；这意味着没有其他线程可以访问该对象的特定方法。在您的情况下，没有其他线程可以访问测试方法；但当然可以访问 test1 方法。

# php - 提交按钮点击php后清除文本框

> ID：15403283
> 
> 赞同：0
> 
> 时间：2013-03-14T07:14:20.373
> 
> 标签：php, html, textbox

我想在提交点击后清除文本框。

我试过这段代码：

```
 $("#btn").live('click',function(){
        $(this).parents('productinstallation').find('input[type="text"],input[type="email"]').val('');
   }); 
```

但它不起作用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:19:47.467

试试这个：

```
 $("#btn").click(function(){
        $(this).parents('productinstallation').find('input[type="text"],input[type="email"]').val('');
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:20:12.317

然而还有：

为您的输入分配一个 id 或类：例如：id=tbEmail

然后使用这个：

```
$("#tbEmail").val(""); 
```

或完整的表格：

```
$(this).closest('form').find("input[type=text], textarea").val(""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:20:29.880

jQuery 方法在 1.9 版中[`.live`](http://api.jquery.com/live/)被删除。根据您使用的 jQuery 版本，该`live`方法可能不起作用。尝试使用该`on`方法或`click`

```
 $("#btn").on('click',function(){
        $(this).parents('productinstallation').find('input[type="text"],input[type="email"]').val('');
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T07:20:52.020

尝试为它们分配 ID。

```
$("#btn").live('click',function(){    
    $(selector).val('');
   }); 
```

# php - php图片上传mysql数据库

> ID：15403291
> 
> 赞同：0
> 
> 时间：2013-03-14T07:14:55.480
> 
> 标签：php, mysql, database, upload

我的脚本有问题。它在我的托管服务器中上传图像。第二天或下周托管服务器缺少已创建的包含图像的文件夹，当然并非所有图像 - 18-19% 的图像持续 2 周。我问他们。他们告诉我——问题出在我的 php 代码中。如果有人可以帮助我会很高兴。可以我在 mkdir() 中添加一些 0777 吗？？？？我不知道。我一直在想...

```
<?php

if (isset($_FILES['myfile'])) {
    $ip = getRealIpAddr();
    $usernameupload = $user_data['username'];

    $title = sanitize($_POST['title']);
    $description = sanitize($_POST['description']);
    if (empty($_POST['folder']) === true) { $folder = sanitize($_POST['folder_option']);} else { $folder = sanitize($_POST['folder']);}
    $date = date('M-d-Y');
    $code = "";

    $errors = array();
    $allowed_ext =array('jpg', 'jpeg', 'png', 'gif');

    $file_name = $_FILES['myfile']['name'];
    $file_size = $_FILES['myfile']['size'];
    $file_tmp = $_FILES['myfile']['tmp_name'];
    $extension=explode('.',$file_name); 
    $file_ext=strtolower(end($extension));

    if (isset($_POST['submitupload'])) {
        if ($_FILES['myfile']['name'] == ""){
        $errors[] = ' *Upload file';
        } else if (in_array($file_ext, $allowed_ext) === false) {
        $errors[] = ' *Extension not allowed';
        }
    }

    if ($file_size > 5042880) {
        $errors[] = 'File size must be under 5mb';
        }
    if (strlen($folder) > 50) {
        $errors[] = 'Your new folder name must be max 50 characters';
        }

    if (empty($_POST['title'])) {
        $errors[] = 'Please Fill Title';
        }

    if (strlen($_POST['title']) > 255) {
        $errors[] = 'Your title must be max 255 characters';
        }

    if (empty($errors)) {

        require('db.inc.php');

        $charset = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
        $length = 50;

        for ($i = 0; $i <= $length; $i++) {
            $rand = rand() % strlen($charset);
            $tmp = substr($charset, $rand, 1);
            $code .= $tmp;
            }

        $query = mysql_query("SELECT code FROM files WHERE code='$code'");
        $numrows = mysql_num_rows($query);

        while ($numrows != 0) {
                for ($i = 0; $i <= $length; $i++) {
                $rand = rand() % strlen($charset);
                $tmp = substr($charset, $rand, 1);
                $code .= $tmp;
                }
        $query = mysql_query("SELECT code FROM files WHERE code='$code'");
        $numrows = mysql_num_rows($query);
        }

        mkdir("files/$code");
        mkdir("files/thumbs/$code");

        if (move_uploaded_file($file_tmp, "files/$code/".$file_name)) {

        $file = "";     
        $query = mysql_query("INSERT INTO files VALUES ('', '$usernameupload', '$ip', '$title', '$code', '$folder', '$description', '$file_name', '$file_ext', '$file_size', '$date')");

        $query1 = mysql_query("INSERT INTO votes VALUES ('', '', '', '$code')");

        create_thumb('files/'.$code.'/', $file_name, 'files/thumbs/' . $code . '/');

        header("Location: userdownload.php?code=$code");
        exit();

            }
        }
    }
?>

<form action="" method="post" enctype="multipart/form-data">
    <table>
        <tr>
            <td id="editfill">Image:*</td>
            <td><input type="file" name="myfile" id="fileup"></td>
            <tr>
            <td></td>
            <td><?php 

            if (isset($_POST['submitupload'])) {
        if ($_FILES['myfile']['name'] == ""){
        echo '<div id="errormsg"> *Upload file </div>';
        } else if (in_array($file_ext, $allowed_ext) === false) {
        echo '<div id="errormsg"> *Allowed extension: .jpg, .jpeg, .png, .gif</div>';
        } else if ($file_size > 5042880) {
        echo '<div id="errormsg"> *File size must be under 5mb </div>';
        }
    }
    ?></td>
    </tr>
        </tr>
        <tr>
            <td id="editfill">Title:*</td>
            <td><input type="text" name="title" id="title" value="<?php if (isset($_POST['submitupload'])) echo htmlentities($_POST['title']); ?>" maxlength="255"></td>
        <tr>
        <td></td>   
            <td><?php 
            if (isset($_POST['submitupload'])) {
            if (empty($_POST['title'])) {
        echo '<div id="errormsg"> *Please fill title </div>';
        }
            if (strlen($_POST['title']) > 255) {
        echo '<div id="errormsg"> *Your title must be max 255 characters</div>';
        }
        }
            ?></td>
         </tr>
        </tr>
         <tr>
            <td id="editfill">Create Album:</td>
            <td><input type="text" name="folder" id="title" value="<?php if (isset($_POST['submitupload'])) echo htmlentities($_POST['folder']); ?>" maxlength="50">
            </td>
        <tr>
        <td></td>
        <td><?php   
        if (strlen($folder) > 50) {
        echo '<div id="errormsg"> *Your new album name must be max 50 characters</div>';
        }
 ?></td>
        </tr>       
        </tr>
        <tr>
            <td id="editfill">Your Albums:</td>
            <td>
            <select name="folder_option" class="select">
            <option></option>
        <?php  
        $mysql_folder = mysql_query("SELECT `folder_name` FROM `files` WHERE `username` = '$usernameupload' AND `folder_name` > '' GROUP BY `folder_name` ORDER BY `folder_name` ASC"); 

        while ($query_row = mysql_fetch_array($mysql_folder)) {
                $filefolder = $query_row['folder_name'];

                echo '<option value="' . $filefolder . '">' . $filefolder . '</option>';
                }

        ?>
    </select>
            </td>
        <tr>
        <td></td>
        <td></td>
        </tr>       
        </tr>
        <tr>
            <td id="editfill">Description:</td>
            <td><textarea name="description" id="description"><?php if (isset($_POST['submitupload'])) echo htmlentities($_POST['description']); ?></textarea></td>
        <tr><td></td>
            <td>
        </td>
        </tr>       
        </tr>
        <tr>
            <td></td>
            <td><center><br><input type="submit" name="submitupload" id="submitupload" value="Upload"></center></td>
        </tr>
    </table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:43:51.510

试试这个以有效地查看 mkdir 创建是否失败。否则文件夹和图像即使添加到您的数据库中也肯定不会存在。

```
//previous code...
mkdir("files/$code");
mkdir("files/thumbs/$code");

//change to this...
if (!mkdir("files/$code", 0777, true)) {
    die('Failed to create folders...');
}

if (!mkdir("files/thumbs/$code", 0777, true)) {
    die('Failed to create sub folders...');
} 
```

# sql - plsql代码用字符替换列的值

> ID：15403296
> 
> 赞同：0
> 
> 时间：2013-03-14T07:15:14.413
> 
> 标签：sql, plsql, plsqldeveloper

如果有名称列

```
name

prashant

ram 
```

那么列值应该变成这个名字

```
##############################
# Name     |  Replaced_value #
##############################   
# prashant |    XXXXXXXX     #
#          |                 #
# ram      |    XXX          #
############################## 
```

它必须替换为相同数量的 X。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:21:48.257

您可以结合 lpad/rpad 和长度

```
LPAD('X',LENGTH(InputString),'X') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:22:59.663

这将工作！

```
select name,substr(lpad(name,length(name)+length(name),'X'),1,length(name)) as replaced_name from table 
```

# android - 如何在 Android 模拟器中测试平板电脑应用程序？

> ID：15403298
> 
> 赞同：0
> 
> 时间：2013-03-14T07:15:17.047
> 
> 标签：android, android-emulator

我想为平板电脑开发 voip 应用程序。我对在平板电脑上开发应用程序有一些疑问。

*   是否可以在平板电脑上开发 voip 应用程序？
*   如果是，如何在安卓模拟器中测试这个应用程序？
*   是否可以通过平板电脑拨打电话或上网？
*   平板电脑和平板电脑有什么区别？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:07:19.527

实际上你问了四个问题

1.) 你可以和不能开发一个 void 应用程序，void 有很多含义。你可以制作一个只能在你的设备上运行的应用程序，也可以在其他设备上运行。其次，如果您正在努力部署一个应用程序，您必须允许其他人使用它。要检查您的无效应用程序，Android 允许您在 Google Play Store 上启动之前直接在您的设备上检查您的应用程序。这将帮助您删除错误，检查 AVD 或 Emulator 缺少的功能

2.) 你已经在你的机器上安装了 Android SDK 这里是[链接](http://developer.android.com/sdk/index.html)

3.) 是的，有很多平板电脑为 ex Tab2、micro max android tab、HTC 等提供电话和互联网

4.) 平板电脑是您可以运行应用程序、玩游戏、浏览器互联网并享受所有功能的设备 接听电话

[来源](http://en.wikipedia.org/wiki/Tablet_computer)

它的 Phablet not fablet 是一种设备，您可以在其中拥有平板电脑和电话的所有好处。

[资源](http://en.wikipedia.org/wiki/Phablet)

通常我们使用平板电脑这个词，因为现在所有的设备都带有电话功能。屏幕范围为 5-10 英寸。

但现在三星已经推出了 5 英寸 Galaxy s1、Galaxy S2 和 Galaxy Grand 的 Phone ie Galaxy 系列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:17:57.130

To test the app in tablet in emulator .

you can select the virtual device manager while creating the exact device as tablet version as u want or else if you want to check in the layout how it will looks then select the type of device showing left to the orientation.

# windows - IE 10 Windows 8 中的 AIR LocalConnection 不起作用

> ID：15403307
> 
> 赞同：4
> 
> 时间：2013-03-14T07:15:45.867
> 
> 标签：windows, actionscript-3, flash, internet-explorer, localconnection

微软最近对 IE10 中的 flash 进行了此更新 [http://support.microsoft.com/kb/2758994](http://support.microsoft.com/kb/2758994)

之后，我们的产品在所有浏览器上运行良好，在 IE10 中完全停止运行。我们有一个 Flash WebUI，它使用 LocalConnection 类连接到 Desktop AIR App。现在有例外，网络上没有这方面的信息。并且产品在所有其他浏览器中继续正常工作，所以这不是代码的问题。我发现的唯一类似问题在这里 - [http://forums.adobe.com/message/5103110](http://forums.adobe.com/message/5103110)

有没有其他人遇到过这样的事情？或者关于如何解决它的任何想法？我将不胜感激任何建议

# apache - 使用 proxyPass 和 proxyPassReverse 的 Apache 重写

> ID：15403309
> 
> 赞同：1
> 
> 时间：2013-03-14T07:15:53.970
> 
> 标签：apache, mod-rewrite, rewrite, httpd.conf, proxypass

我需要将以下重写规则与 proxyPass 和 proxyPassReverse 一起使用

```
RewriteEngine On
RewriteRule  ^(market|stock|mutual)$ stackoverflow/$1 [L] 
```

我的虚拟主机定义是

```
<VirtualHost *>
    ServerName localhost
    ProxyPass / http://localhost:8080/ 
    ProxyPassReverse / http://localhost:8080/  
</VirtualHost> 
```

我应该在哪里插入重写规则，以便当我点击 URL -- localhost/market 时，它将对 localhost:8080/stackoverflow/market 执行内部重写

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:47:56.733

知道了

```
<VirtualHost *>
    ServerName localhost
    ProxyPass / http://localhost:8080/stackoverflow/ 
    ProxyPassReverse / http://localhost:8080/stackoverflow/ 
    RewriteEngine On
    RewriteRule  ^(market|stock|mutual)$ stackoverflow/$1 [L]
</VirtualHost> 
```

# codeigniter - 从控制器到视图的代码点火器流程不正确？

> ID：15403317
> 
> 赞同：0
> 
> 时间：2013-03-14T07:16:44.327
> 
> 标签：codeigniter, codeigniter-2

我有这个代码：

```
if(isset($result) && !empty($result))
                    {
                        if(is_string($result))
                        {

                             show_error('Failed to authenticate user with database');
                             $this->load->view('error', $result);
                        }elseif(is_object($result)){
                            show_error('ALL WENT OKAY!');
                            $this->load->view('valid', $result);
                        }
                    } 
```

现在此代码无法按预期工作。数据是从数据库中检索的，因为如果我执行 print_r($result) 它将打印正确的内容。但是当我有上述内容时，它不起作用。它只是转到我的控制器的 index() 方法，什么也不做。我尝试的另一种方法是：

```
$this->load->view('valid', $result); 
```

没有任何 if 语句。它进入身份验证页面，但无法打印 $result，因为它显示未定义。任何想法都会有所帮助。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:18:35.853

Do it like this. Pass the result like this.

```
if($result)
{
    $data['result'] =   $result;
    if(is_string($result))
    {
         show_error('Failed to authenticate user with database');
         $this->load->view('error', $data);
    }elseif(is_object($result)){
        show_error('ALL WENT OKAY!');
        $this->load->view('valid', $data);
    }
}else{
        $this->load->view('empty_view');
} 
```

This should be suffecient to understand

```
$data['result'] =   $result;
$this->load->view('valid', $data); 
```

# c++ - 模板函数内的全局值不变[c++]

> ID：15403325
> 
> 赞同：0
> 
> 时间：2013-03-14T07:17:18.953
> 
> 标签：c++, function, templates, variables, global

我需要一个项目的帮助。基本上我需要测量一些排序算法的时钟滴答声。由于它们都使用比较，有时还使用交换函数，我将它们设计为接受这些作为回调函数。

为了测量我写的时钟滴答声：

```
static clock_t t1, total;

template<typename T>
bool less_default(T & left, T & right){
    t1 = clock(); 
    bool v = left < right; 
    t1 = clock() - t1;
    total += t1
    return v;
} 
```

当我实际运行算法时，total 或 t1 都没有反映任何变化。好像从来没有写过引用它们的代码行。

没有任何作用。函数调用时甚至不是简单整数的增量。

是不是不能在模板函数中更改静态全局变量？

我不明白我在这里做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:18:56.320

> 没有任何作用。函数调用时甚至不是简单整数的增量。

我怀疑以下内容出现在*头*文件中：

```
static clock_t t1, total; 
```

如果是这种情况，每个翻译单元都将获得两个变量的单独实例（感谢`static`）。

要修复，请更改`static`标题`extern`中的 ，并将以下内容添加到 .cpp 文件中：

```
clock_t t1, total; 
```

* * *

**要遵循的编辑**示例演示了这一点：

根据 OP 的要求，这是一个简短的示例，它使用模板比较器和此答案中的配方来声明和管理运行时钟总数。

**主文件**

```
#ifndef PROJMAIN_DEFINED
#define PROJMAIN_DEFINED

extern clock_t total;

template<typename T>
bool less_default(const T& left, const T& right)
{
    clock_t t1 = clock();
    bool res = (left < right);
    total += (clock() - t1);
    return res;
};

#endif 
```

**主文件**

```
#include <iostream>
#include <algorithm>
#include <iterator>
#include <vector>
#include "main.h"
using namespace std;

clock_t total = 0;

int main()
{
    static const size_t N = 2048;
    vector<int> values;
    values.reserve(N);
    std::srand((unsigned)time(0));

    cout << "Generating..." << endl;
    generate_n(back_inserter(values), N, [](){ static int i=0; return ++i;});

    for (int i=0;i<5;++i)
    {
        random_shuffle(values.begin(), values.end());
        cout << "Sorting ..." << endl;
        total = 0;
        std::sort(values.begin(), values.end(), less_default<int>);
        cout << "Finished! : Total = " << total << endl;
    }
    return EXIT_SUCCESS;
} 
```

**输出**

```
Generating...
Sorting ...
Finished! : Total = 13725
Sorting ...
Finished! : Total = 13393
Sorting ...
Finished! : Total = 15400
Sorting ...
Finished! : Total = 13830
Sorting ...
Finished! : Total = 15789 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:22:20.097

您如何设置全局变量似乎存在错误。（NPE 的回答涵盖了这一点。）

但是，要记住的另一件事是，您正在尝试衡量*单个比较*的性能。这取决于是什么`T`，但对于大多数简单的类型，这将是一两条 CPU 指令，这*太小*了，无法用这样的技术准确测量。

使用采样分析器会更好。使用这里的代码，您的检测比正在完成的工作要昂贵得多，这使得分析数据毫无用处。

# android - 谷歌地图折线项目显示 java.lang.RuntimeException

> ID：15403326
> 
> 赞同：1
> 
> 时间：2013-03-14T07:17:22.697
> 
> 标签：android, google-maps

我正在开发一个简单的 Android 项目，以使用一组硬编码的纬度和经度值显示折线。

`MainActivity.java`如图所示：package com.flip.GoogleMaps ；

```
import android.app.Activity;
import android.app.FragmentManager;
import android.os.Bundle;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Polyline;
import com.google.android.gms.maps.model.PolylineOptions;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    GoogleMap myMap = null;
    FragmentManager myFragmentManager = getFragmentManager();
    MapFragment myMapFragment = MapFragment)myFragmentManager.findFragmentById(R.id.map);
    myMap = myMapFragment.getMap();
    myMap.setMyLocationEnabled(true);
    myMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
    super.onCreate(savedInstanceState);

    PolylineOptions rectOptions = new PolylineOptions()
    .add(new LatLng(37.35, -122.0))
    .add(new LatLng(37.45, -122.0))  
    .add(new LatLng(37.45, -122.2))  
    .add(new LatLng(37.35, -122.2))  
    .add(new LatLng(37.35, -122.0));

    @SuppressWarnings("unused")
    Polyline polyline = myMap.addPolyline(rectOptions);         
    }
} 
```

`activity_main.xml`如下 ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".MainActivity" >

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment"/>

</LinearLayout> 
```

如下`AndroidManifest.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.flip.GoogleMaps"
android:versionCode="1"
android:versionName="1.0" >
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true"/>
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<permission      android:name="com.flip.GoogleMaps.permission.MAPS_RECEIVE"
    android:protectionLevel="signature"></permission>
<uses-permission android:name="com.flip.GoogleMaps.permission.MAPS_RECEIVE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyBD9fsiMd_G9Pzeq2Eqas2FwJjzMGbSOnA"/>
    <uses-library android:name="com.google.android.maps" />
    <activity
        android:name="com.flip.GoogleMaps.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>
</manifest> 
```

Logcat 启动失败时会显示以下错误：

```
03-14 12:22:13.573: E/AndroidRuntime(1120): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.flip.GoogleMaps/com.flip.GoogleMaps.MainActivity}: java.lang.NullPointerException
03-14 12:22:13.573: E/AndroidRuntime(1120):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at android.os.Looper.loop(Looper.java:137)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at     android.app.ActivityThread.main(ActivityThread.java:4745)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at java.lang.reflect.Method.invokeNative(Native Method)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at java.lang.reflect.Method.invoke(Method.java:511)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at dalvik.system.NativeStart.main(Native Method)
03-14 12:22:13.573: E/AndroidRuntime(1120):     Caused by: java.lang.NullPointerException
03-14 12:22:13.573: E/AndroidRuntime(1120):     at com.flip.GoogleMaps.MainActivity.onCreate(MainActivity.java:20)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at android.app.Activity.performCreate(Activity.java:5008)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-14 12:22:13.573: E/AndroidRuntime(1120):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-14 12:22:13.573: E/AndroidRuntime(1120):     ... 11 more 
```

我现在绝望了。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:33:32.090

您的代码中有错字。改变

```
MapFragment myMapFragment = MapFragment)myFragmentManager.findFragmentById(R.id.map); 
```

到

```
MapFragment myMapFragment = (MapFragment)myFragmentManager.findFragmentById(R.id.map); 
```

# java - 得到错误嵌套异常是 org.hibernate.hql.ast.QuerySyntaxException: Path expected for join

> ID：15403331
> 
> 赞同：0
> 
> 时间：2013-03-14T07:17:56.227
> 
> 标签：java, hibernate

我是休眠新手，我有一个疑问

```
 select * from Losa_App a
 inner join 
     os_historystep os
 on
     a.app_ref_no = os.ref_id
 where 
     os.step_name = '011' and app_status = 'R' or  app_status = 'S' ; 
```

当我在 sqldeveloper 上运行此查询时，它会运行并给我结果。现在我将查询翻译成 HBL

```
StringBuffer query = new StringBuffer();
    List<String> lstObj = new ArrayList<String>();
    query.append(" from ");
    query.append(getClassName());
    query.append(" a inner join "
            // + WflWorkflowHistoryStep.class.getName()
            + " OS_HISTORYSTEP os with a.appRefNo = os.ref_id "
            + "where os.step_name = '011' and a.appStatus = 'R' or a.appStatus = 'S'  ");

    List<LosaApp> result = null;

    try {

        result = getHibernateTemplate().find(query.toString());
        if (CollectionUtils.isNotEmpty(result) {
            return result;
        }

    } catch (Exception e) {

        String message = e.getMessage();
        System.out.println();

    }

    return null; 
```

但是当这个查询运行我得到异常

```
nested exception is org.hibernate.hql.ast.QuerySyntaxException: Path expected for
join! [ from com.thetasp.losa.data.LosaApp a inner join  OS_HISTORYSTEP os with
a.appRefNo = os.ref_id where os.step_name = '011' and a.appStatus = 'R'
or a.appStatus = 'S'  ] 
```

为什么我收到此错误？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:27:47.183

您的 HQL 语法错误。

1.  您需要使用关键字指定别名`as`。例如：- **Losa_App 作为**
2.  如果你给`inner join`, 并完成了你的关联映射，那么你就不需要提供这个`on`子句。
3.  如果你想给`a.app_ref_no = os.ref_id`，那么你不需要指定`inner join`。Hibernate 会处理这个问题。

有关更多信息，请查看[此问题](https://stackoverflow.com/questions/15068597/inner-joins-query-in-hql)。

# ios - 未选中的 UITableView 行列表

> ID：15403342
> 
> 赞同：4
> 
> 时间：2013-03-14T07:18:29.870
> 
> 标签：ios, objective-c, uitableview, ios6, nsmutablearray

我有以下代码。

```
NSMutableArray *aList = [[NSMutableArray alloc] init];
for (NSIndexPath *indexPath in tableview1.indexPathsForSelectedRows) {
    NSString *r = [NSString stringWithFormat:@"%i",indexPath.row];
    [aList addObject:r];
} 
```

所以我得到的是一个被选中的 UITableView 行的列表。有没有一种简单的方法来获取**未**选择的行**列表**？

 **感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T07:33:45.847

可能有优雅的解决方案，但这会奏效。

```
 NSMutableArray *allIndexPaths = [@[]mutableCopy];
    NSInteger nSections = [self.tableView numberOfSections];
    for (int j=0; j<nSections; j++) {
        NSInteger nRows = [self.tableView numberOfRowsInSection:j];
        for (int i=0; i<nRows; i++) {
            NSIndexPath *indexPath = [NSIndexPath indexPathForRow:i inSection:j];
            [allIndexPaths addObject:indexPath];
        }
    }

    NSArray *selectedIndexPaths = self.tableView.indexPathsForSelectedRows;

    for (NSIndexPath *indexPath in selectedIndexPaths) {
        [allIndexPaths removeObject:indexPath];
    }

    NSArray *unselectedIndexPaths = [NSArray arrayWithArray:allIndexPaths]; 
```

编辑：根据[Rikkles 的](https://stackoverflow.com/users/1401029/rikkles)建议

```
NSMutableArray *unselectedIndexPaths = [@[]mutableCopy];
NSArray *selectedIndexPaths = self.tableView.indexPathsForSelectedRows;
NSInteger nSections = [self.tableView numberOfSections];
for (int j=0; j<nSections; j++) {
    NSInteger nRows = [self.tableView numberOfRowsInSection:j];
    for (int i=0; i<nRows; i++) {
        NSIndexPath *indexPath = [NSIndexPath indexPathForRow:i inSection:j];
        if (![selectedIndexPaths containsObject:indexPath]) {
            [unselectedIndexPaths addObject:indexPath];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T09:03:55.270

```
NSMutableArray *a = [NSMutableArray array]; // that's all unselected indexPaths
NSArray *l = [self.tableView indexPathsForSelectedRows];
NSIndexPath *idx;
for (NSUInteger sec=0; sec<[self.tableView numberOfSections]; sec++) {
  for (NSUInteger r=0; r<[self.tableView numberOfRowsInSection:sec]; r++) {
    idx = [NSIndexPath indexPathForRow:r inSection:sec];
    if(![l containsObject:idx]){
      [a addObject:idx];
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:31:08.757

您可以使用 numberOfRows 返回值减去所选行的总数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T07:38:07.437

```
NSMutableArray * yourNewArr = [[NSMutableArray alloc ] init];

for(NSUInteger i = 0 ; i < [yourArr count] ; i++){

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:i inSection:0]; 

    NSArray *selIndexs = self.tableView.indexPathsForSelectedRows;

    if(![selIndexs containsObject:indexPath]){

        [yourNewArr addObject:indexPath];                          
    }
}

NSLog(@"%@", yourNewArr); // this will contain unselected index paths. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T09:45:55.650

我在 Anupdas 的代码中添加了几行额外的代码。他当然配得上全部功劳。

```
 NSMutableArray *allIndexPaths = [@[]mutableCopy];
    NSInteger nSections = [tableview1 numberOfSections];
    for (int j=0; j < nSections; j++) {
        NSInteger nRows = [tableview1 numberOfRowsInSection:j];
        for (int i=0; i<nRows; i++) {
            NSIndexPath *indexPath = [NSIndexPath indexPathForRow:i inSection:j];
            [allIndexPaths addObject:indexPath];
        }
    }
    NSArray *selectedIndexPaths = tableview1.indexPathsForSelectedRows;
    for (NSIndexPath *indexPath in selectedIndexPaths) {
        [allIndexPaths removeObject:indexPath];
    }

    NSMutableArray *bList = [[NSMutableArray alloc] init];
    for (NSInteger k = 0; k < allIndexPaths.count; k++) {
        NSString *r = [NSString stringWithFormat:@"%i",[[allIndexPaths objectAtIndex:k] row]];
        [bList addObject:r];
    } 
```**

# ruby-on-rails-3 - 将用户路线与帖子路线匹配（有资源和无资源）

> ID：15403344
> 
> 赞同：0
> 
> 时间：2013-03-14T07:18:32.920
> 
> 标签：ruby-on-rails-3, activerecord, devise

我目前有一个路线文件

```
 devise_for :users, controllers: {omniauth_callbacks: "omniauth_callbacks"}
  resources :users  do
  resources :posts
end
  match "posts" => "posts#main" 
  get "home/index"
  root :to => 'home#index'
end 
```

我现在想做的是，也显示`/users/:user_id/problems/:id`为`/problems/:id`. 但不确定我应该如何将它放入路线？

注意：我确实在用户和帖子之间有关系。

```
class User < ActiveRecord::Base
 has_many :posts 
```

和

```
class Post < ActiveRecord::Base
  belongs_to :user 
```

谢谢

UDPATE：我得到的错误是`Couldn't find User without an ID`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:30:30.920

您需要按以下方式使用浅层路线，

```
 resources :users, :shallow => true do |user|
  user.resources :posts
 end 
```

# liferay - How to set up ImageMagick with Liferay?

> ID：15403345
> 
> 赞同：2
> 
> 时间：2013-03-14T07:18:34.073
> 
> 标签：liferay, liferay-6

Following is my addition to portal-ext.properties for setting up ImageMagick with Liferay

I have installed ImageMagick in D drive as mention below :

```
imagemagick.global.search.path=D:\\ImageMagick-6.8.3-Q16
imagemagick.enabled=true 
```

preview functionality:

```
dl.file.entry.preview.enabled=true
dl.file.entry.thumbnail.enabled=true 
```

Set this to true to enable conversion and previewing of videos in the Document Library portlet:

```
xuggler.enabled=true 
```

In Server Administration--->External servics tab, I have configured it correctly and also downloaded/install jar related to Xuggler.![enter image description here](../Images/ecb18667b05382eb559ab0cc70973489.png)![enter image description here](../Images/5e954063a4152660eb1de2983e3e8331.png)

However, above settings are not working for me to generate preview functionality.

I am not even getting message dispalyed like "Generating preview require few more time, please refresh the page after some time....blah blah blah...."

Any help is appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T21:07:20.790

对我来说，解决方案是将 /usr/bin/convert 符号链接到 /usr/local/bin/convert

无论我做什么，似乎都没有任何效果。所有配置都指向/usr/bin（控制面板和portal-ext.properties）。作为最后的手段，我并不相信它会起作用，我只是做了符号链接，因为那是 liferay 的默认位置。

它有效！我所有的配置仍然指向/usr/bin。所以......看起来liferay只是忽略了所有配置，只查看默认文件夹。

我正在使用 Ubuntu 12.04，来自包管理器的 imagemagick。Liferay 6.1.2 GA3。

我希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:23:52.797

您是否正确配置了 Xuggler？您是否收到 UnsatisfiedLinkError 异常？

有关正确配置路径的步骤，请参阅 Xuggler 的[常见问题解答](http://wiki.xuggle.com/Frequently_Asked_Questions#What.27s_up_with_java.lang.UnsatisfiedLinkError.3F)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T13:42:49.403

如果它显示消息“正在生成预览...”，似乎 Liferay 没有将此文件检测为视频文件（Mime 类型不是属性中的任何值：dl.file.entry.preview.video .mime.types）。

我在使用某些浏览器上传视频时也看到了这个问题。尝试使用另一个上传。

# svn - 如何将 Subversion 存储库复制到另一个存储库

> ID：15403348
> 
> 赞同：3
> 
> 时间：2013-03-14T07:18:36.773
> 
> 标签：svn, svnserve

我们正在使用 svnserve 运行一个 SVN 存储库。我们现在已经在另一个网络的另一台机器上创建了一个新的 svnserve SVN 存储库。我现在想将活动存储库复制到新存储库。我怎样才能做到这一点？我想复制存储库，而不是移动它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:39:23.793

将存储库文件夹复制到另一台机器或使用[svnsync](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.replication.svnsync)通过网络复制存储库。

# jquery - CSS transform scale is not working in IE

> ID：15403360
> 
> 赞同：0
> 
> 时间：2013-03-14T07:19:44.280
> 
> 标签：jquery, css, internet-explorer

I am doing zooming image using Jquery and CSS:

```
$('#Site img').css({
        zoom: CurrentZoom,
        '-ms-transform': 'scale(' + CurrentZoom + ')',
        '-moz-transform': 'scale(' + CurrentZoom + ')',
        '-o-transform': 'scale(' + CurrentZoom + ')'        
    });
    $('#Site canvas').css({
        zoom: CurrentZoom,
        '-ms-transform': 'scale(' + CurrentZoom + ')',
        '-moz-transform': 'scale(' + CurrentZoom + ')',
        '-o-transform': 'scale(' + CurrentZoom + ')'
    }); 
```

but it's working fine with all browser except the **IE**.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:45:09.693

根据[**msdn**](http://msdn.microsoft.com/en-in/library/ie/jj127312%28v=vs.85%29.aspx)，为了确保最大的兼容性，包括`transform`和`-ms-transform`是首选。

*这仅适用于 IE9+*

对于*IE8<*，请检查[Matrix filter](http://msdn.microsoft.com/en-us/library/ms533014%28VS.85,loband%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:32:27.013

您可以查看[caniuse.com](http://www.caniuse.com)在不同浏览器和版本中的兼容性。

![caniuse.com](../Images/ca51c7166d7610281d504984dbdd4f8f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:52:50.193

我的猜测是，在 IE9 中，它同时接受`zoom`and `-ms-transform`，并且它们以意想不到的方式进行交互。

因此，我的建议是仅`zoom`在 IE8 或更早版本中启用该样式，并让 IE9 仅与`-ms-transform`.

您可能需要使用 Modernizr 之类的工具来确定是否使用`zoom`或`transform`. （我不想提及它，但浏览器检测在这里也可以解决问题，因为我们确切知道哪些浏览器可以作为目标）

值得一提的是，如果您使用的是最新版本的 jQuery，则在 jQuery 代码中设置样式时无需指定供应商前缀；它会为您添加它们，因此不需要所有重复的代码。

还值得指出的是，`zoom`风格与`transform:scale`. 它的工作方式不同，并且并不总是提供相同的结果，特别是与它周围的其他元素相关。

我猜您已经在 IE8 上对其进行了测试，并且您对结果感到满意，但如果没有，请确保您确实对其进行了测试并且您对结果感到满意。如果它不能按您想要的方式工作，则可能会完全放弃对您的页面的 IE8 支持，这意味着您根本不需要该`zoom`样式，这反过来意味着您不需要担心与它和 任何可能的冲突`transform`，因此无需执行上述任何操作。

# arrays - Print (multi)dimensional array in Visual Basic

> ID：15403361
> 
> 赞同：4
> 
> 时间：2013-03-14T07:19:45.237
> 
> 标签：arrays, vb.net

Is there an easy way to print an array, which is potentially multi-dimensional, to the Console in VB.NET for the purpose of debugging (i.e. just checking that the contents of the array is correct).

Coming from an Objective-C background the `NSLog` function prints a reasonably well formatted output, such as the following for a one-dimensional array:

```
myArray {
    0 => "Hello"
    1 => "World"
    2 => "Good Day"
    3 => "To You!"
} 
```

and similar for a multi-dimensional array (the following is an example of a two-dimensional array output):

```
myTwoDArray {
    0 => {
        0 => "Element"
        1 => "Zero"
    }
    1 => {
        0 => "Element"
        1 => "One"
    }
    2 => {
        0 => "Element"
        1 => "Two"
    }
    3 => {
        0 => "Element"
        1 => "Three"
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:04:17.813

我认为没有任何本机（内置）功能可以做到这一点，但是下面的功能应该可以正常工作。

```
Public Shared Sub PrintValues(myArr As Array)
  Dim s As String = ""
  Dim myEnumerator As System.Collections.IEnumerator = myArr.GetEnumerator()
  Dim i As Integer = 0
  Dim cols As Integer = myArr.GetLength(myArr.Rank - 1)
  While myEnumerator.MoveNext()
    If i < cols Then
      i += 1
    Else
      'Console.WriteLine()
      s = s & vbCrLf
      i = 1
    End If
    'Console.Write(ControlChars.Tab + "{0}", myEnumerator.Current)
    s = s & myEnumerator.Current & " "
  End While
  'Console.WriteLine()
  MsgBox(s)
End Sub 
```

为了在非控制台应用程序中测试该函数，我添加了字符串变量 S，当您在控制台应用程序中使用该函数时应该可以省略它。

# c# - 在 EF5 中加载子对象

> ID：15403371
> 
> 赞同：1
> 
> 时间：2013-03-14T07:20:29.103
> 
> 标签：c#, entity-framework, entity-framework-5

我的通用存储库中有一个方法：

```
public IQueryable<T> Query<T>() where T : class, IEntity
{
   return _context.Set<T>();
} 
```

这是获取用户的方法：

```
public User GetUser(string email)
{
   return _repository.Query<User>().FirstOrDefault(u => u.Email == email);
} 
```

最后，我让用户进入会话：

```
AppSession.CurrentUser = UserService.GetUser(email); 
```

在我的操作中，我需要获取当前用户并获取对象集合`Notifications`（一对多）：

```
AppSession.CurrentUser.Notifications.OfType<EmailNotification>().FirstOrDefault(); 
```

但是，在这里我得到了错误：

```
The ObjectContext instance has been disposed and can no longer be used for operations that require a connection. 
```

我知道当我从数据库`Notifications`获取时没有加载。 怎么说EF来加载对象？我知道，但我不能在方法中使用它。`User`
`Notifications``Include``GetUser`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:08:27.497

当第一个 HttpRequest 在查找您的`CurrentUser`对象后结束时，您对其他查找（如 EmailNotifications）的`_repository`引用不可用。`CurrentUser`

抛出异常是因为`CurrentUser`没有原始对象上下文，因此您必须将 CurrentUser 对象附加到您`_repository`正在使用的新 objectContext，或者使用更简单的解决方案，即通过创建的新上下文重新加载用户您当前在存储库中的请求。

在尝试在您的操作中查找通知之前，添加以下行：

```
AppSession.CurrentUser = UserService.GetUser(AppSession.CurrentUser.Email);
AppSession.CurrentUser.Notifications.OfType<EmailNotification>().FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:28:16.643

正如@Ryan[所说](https://stackoverflow.com/a/15404053/33116)，这是因为对象上下文不可用于关联通知中的延迟加载。

我的建议是关闭延迟加载（如果可能），因为以后可能会导致很多问题，然后执行类似...

```
var user = UserService.GetUser(AppSession.CurrentUser.Email);
user.Notifications = NotificationService.GetUserNotifications(user.Id /* or another identifier */);
AppSession.CurrentUser = user; 
```

为此，您将需要一个新的 NotificationService，它可以加载（如上所述）但也可以处理通知的执行（发送电子邮件等）。

您现在应该在应用程序会话缓存中拥有该用户的通知。

高温高压

# iphone - 将值从一个场景传递到另一个场景

> ID：15403378
> 
> 赞同：1
> 
> 时间：2013-03-14T07:21:04.230
> 
> 标签：iphone, objective-c, cocos2d-iphone

我查了一下，大部分信息都是关于制作单例类的。我只想从 menuscreen.m 向我的 helloworldlayer.m 传递一个值。有什么简单的方法可以做到这一点。

```
- (void) changeScenePlay
{
   CCScene *testscene = [HelloWorldLayer scene];

    testscene.number = 1;

    [[CCDirector sharedDirector] replaceScene:testscene];
} 
```

我尝试过的一种方法是这样的，但这对我也不起作用。

我如何访问场景中的变量并更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:25:51.447

为此创建外部变量并按照您的方式进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:47:32.217

在 HelloWorld 层类中使用变量成员。

```
 @interface HelloWorldLayer: CCLayer
    {
         int number;
    }
    @property(nonautomatic, assign) int number;
    @end

    @implementation HelloWorldLayer
    @synthesize number;

   +(CCScene *) sceneWithNumber:(int)inNumber
    {
        CCScene *scene = [CCScene node];

         HelloWorldLayer *layer = [[[HelloWorldLayer  alloc] initWithId:inNumber] autorelease];

        [scene addChild: layer z:Z_SCENE tag:TAG_SCENE];

        return scene;
    }

-(id) initWithId:(int)inNumber
{
    if( (self=[super init])) {
        self.number= inNumber;
    }
    return self;
}

    @end 
```

调用sceneWithNumber而不是scene

```
- (void) changeScenePlay
{
    CCScene *testscene = [HelloWorldLayer sceneWithNumber:1];
    [[CCDirector sharedDirector] replaceScene:testscene];
} 
```

# jquery - jQuery-mobile 中的可折叠列表视图

> ID：15403381
> 
> 赞同：1
> 
> 时间：2013-03-14T07:21:14.570
> 
> 标签：jquery, jquery-mobile

是否可以仅使用第一个可折叠元素创建列表视图？例如：

```
<ul data-role="listview" data-count-theme="c" data-inset="true">
    <li>
        <div data-role="collapsible">
            <h4>Heading</h4>
            <ul data-role="listview">
                <li><a href="#">List item 1</a></li>
                <li><a href="#">List item 2</a></li>
                <li><a href="#">List item 3</a></li>
            </ul>
        </div>
    </li>
    <li><a href="#">Outbox <span class="ui-li-count">0</span></a></li>
    <li><a href="#">Drafts <span class="ui-li-count">4</span></a></li>
    <li><a href="#">Sent <span class="ui-li-count">328</span></a></li>
    <li><a href="#">Trash <span class="ui-li-count">62</span></a></li>
</ul> 
```

好像：

![在此处输入图像描述](../Images/b3a32769f45306ee779e54fa29cae69b.png)

[http://jsfiddle.net/nonamez/u5PLh/](http://jsfiddle.net/nonamez/u5PLh/)

正如您所看到的，可折叠列表在 li 内，但我需要它是 li 一个普通列表，但是当按下第一个时 - 它会向下滚动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:48:05.943

这是一个工作示例： http: [//jsfiddle.net/dpa99c/o8myo6nb/2/](http://jsfiddle.net/dpa99c/o8myo6nb/2/)由您的 jsFiddle 制成。

这是一个纯 CSS 解决方案。

## HTML：

```
<div data-role="content" style="text-align:center">
    <ul data-role="listview" data-count-theme="c" data-inset="true">
        <li class="custom-li">
            <div data-role="collapsible">
                <h4>Heading</h4>
                <ul data-role="listview">
                    <li><a href="#">List item 1</a></li>
                    <li><a href="#">List item 2</a></li>
                    <li><a href="#">List item 3</a></li>
                </ul>
            </div>
        </li>
        <li><a href="#">Outbox <span class="ui-li-count">0</span></a></li>
        <li><a href="#">Drafts <span class="ui-li-count">4</span></a></li>
        <li><a href="#">Sent <span class="ui-li-count">328</span></a></li>
        <li><a href="#">Trash <span class="ui-li-count">62</span></a></li>
    </ul>
</div> 
```

## CSS：

```
.custom-li {
    padding: 0 !important;
    border-width:0 !important;
}

.custom-li + li{
    border-top-width: 0 !important;  
}

.custom-li div[data-role="collapsible"]{
    margin: 0 !important;   
    border-bottom-right-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
    border-width:0 !important;
} 
```

# java - 如何删除 Java 中的序数值？

> ID：15403383
> 
> 赞同：3
> 
> 时间：2013-03-14T07:21:20.210
> 
> 标签：java, string-matching, ordinals

我`23 St, 21 St`在我们的**mysql**数据库中有站点名称。

我正在应用**Lucene**算法来搜索**Java**中的电台。

对于**23 St** ，用户可以提供**23rd St、23rd**等输入。

我想从给定的输入中删除 Ordinals ，例如如果用户给出**23rd St**，那么我希望它替换为**23 St**。

那么有没有办法在Java中删除序数值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:53:04.130

这将删除序数：

```
String s = s.replaceAll("(?<=\\d)(rd|st|nd|th)\\b", ""); 
```

# meteor - 克隆流星应用程序

> ID：15403385
> 
> 赞同：1
> 
> 时间：2013-03-14T07:21:27.387
> 
> 标签：meteor

复制一个静态网站，即HTML、CSS、JS非常简单。

由于服务器端的脚本，复制一个动态的网站是很困难的。

我担心克隆任何流星应用程序，因为大多数服务器端脚本都被消除了，唯一需要复制的是数据库，可以从流星实时应用程序轻松获取模式，并且可以轻松地从中刮取数据现有的流星应用程序。

如果可以轻松克隆成功的流星应用程序，那么没有人愿意在流星上开发应用程序。

有没有办法停止克隆现有的流星应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:33:02.613

好吧，从技术上讲，可以克隆流星应用程序，这取决于您的目录/文件结构以及您是否在开发模式下使用它。如果您使用一个文件和这种结构来分隔您的代码：

```
if(Meteor.isClient) {

}
if(Meteor.isServer) {

} 
```

因为这个文件将被发送到客户端，所以有人可以获取它。

所以搬到这个结构可能会更好

```
/client  - Place stuff in Meteor.isClient in a new js file
/server  - Place your server side code in a new js file
/public  - Place other public folder stuff 
```

因此没有人会看到服务器端脚本，因此他们无法克隆您的应用程序的后端。

**生产模式/开发模式**

此外，如果您在“生产模式”下运行 Meteor 应用程序，则[Javascript 已打包](https://github.com/mishoo/UglifyJS)，车把和车把模板已[预编译](http://www.eventedmind.com/posts/handlebars-precompiling)。

在我看来，将 Meteor 应用程序复制到以前类型的 Web 应用程序实际上可能**更难**，因为 HTML 是在客户端呈现的，如果你甚至美化大型 JS 文件，获取 html 文件实际上会返回空的 html 文件仍然保留预编译的车把模板。此外，文件合并为一个！

所以这就是将它克隆到另一个流星应用程序的时候。即使可以获取客户端脚本（与任何其他堆栈一样），在复制服务器脚本时，Meteor 也会遇到更多障碍：

**DDP**

尝试将其克隆到 PHP/服务器端脚本堆栈可能会更加困难，因为甚至不使用 POST/GET，而是使用 DDP。

**架构**

宽度与架构有关，您可以通过 控制客户端看到的内容`Meteor.publish`，因此他们实际上不会看到整个架构

# java - JSCH 期望处理 - 处理来自 Catch 的错误结果

> ID：15403390
> 
> 赞同：1
> 
> 时间：2013-03-14T07:21:49.383
> 
> 标签：java, exception, try-catch, jsch

我编写了一个使用 JSCH lib 连接到 ssh 服务器的程序，该程序运行良好。在我用过的 catch 块中

```
catch(JSchException ee)
{
  ....
} 
```

发生错误时，我会收到这些消息，

```
com.jcraft.jsch.JSchException: java.net.NoRouteToHostException: No route to host

com.jcraft.jsch.JSchException: Auth fail

com.jcraft.jsch.JSchException: timeout: socket is not established 
```

现在我需要在对话框中显示错误消息。对于每种类型的错误，我必须显示不同的输出。请指导我如何处理这些异常并区分它们..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:23:23.983

您的服务器似乎[无法访问](http://docs.oracle.com/javase/6/docs/api/java/net/NoRouteToHostException.html)：“ `No route to host`”因此您的客户端无法连接到它“ `Auth fail`”并且套接字达到其超时。

尝试 ping 服务器以查看其响应。确保您提供在程序中使用的相同 IP 地址。如果您直接提供服务器名称，请检查Linux 上的[主机文件](http://en.wikipedia.org/wiki/Hosts_%28file%29) 或.`/etc/hosts``%SystemRoot%\system32\drivers\etc\hosts`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-14T07:13:16.740

将以下 nuget 包添加到您的解决方案中

1.  迪菲赫尔曼
2.  组织心理安全

# c++ - 有没有办法放入缓冲区 FBO 纹理输出格式 GL_ALPHA？

> ID：15403391
> 
> 赞同：1
> 
> 时间：2013-03-14T07:21:50.070
> 
> 标签：c++, opengl, alphablending, fbo, ftgl

我正在使用 ftgl 字体库。

创建图像的 ftgl 函数具有以下代码：

```
glBindTexture(GL_TEXTURE_2D, textID);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexImage2D(GL_TEXTURE_2D, 0, GL_ALPHA, textureWidth, textureHeight,0, GL_ALPHA, GL_UNSIGNED_BYTE, textureMemory); 
```

格式 GL_ALPHA。

当我渲染到 FBO 图像（GL_RGBA）时，它们看起来还不错。但是当我将字体渲染到 fbo 纹理时，颜色和 alpha 存在一些问题。

此图像应在不接触像素的编辑器中打开（浏览器使用抗锯齿）。

![](../Images/699aeea964c55b2406e67b40bb01fe94.png)

* * *

代码：

/// 1步创建FBO

```
 // Create the color buffer
    glGenTextures(1, &id_tex);
    glBindTexture(GL_TEXTURE_2D, id_tex);

    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
  glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, wid, hei, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL); // GL_RGBA GL_ALPHA

    // Create the frame buffer
    glGenFramebuffersEXT(1, &id_buf);
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, id_buf);
    glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, id_tex, 0);

    GLenum err = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT);
    assert(err == GL_FRAMEBUFFER_COMPLETE_EXT);
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0); 
```

/// 2 步渲染到 fbo

```
glBindTexture(GL_TEXTURE_2D, 0);    
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, id_buf);       
glEnable(GL_TEXTURE_2D);
glEnable(GL_ALPHA_TEST);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

glClearColor (0.0f, 0.0f, 0.0f, 0.0f);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glViewport(0,0, 1920 , 1080); 
```

ftgl::render();

```
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0);                    
glDisable(GL_TEXTURE_2D);
glFlush ();     
glDisable(GL_BLEND);
glDisable(GL_ALPHA_TEST);

glViewport (0, 0, 1920, 1080);
glClearColor (0.0f, 0.0f, 0.0f, 1.0f); 
```

/// 三步渲染纹理

```
glEnable(GL_TEXTURE_2D);
glEnable(GL_ALPHA_TEST);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_COLOR);

glBindTexture(GL_TEXTURE_2D, id_tex);
glBegin(GL_QUADS); 

glTexCoord2d(0,0); glVertex3f(point4.X , point4.Y , point4.Z);
glTexCoord2d(0,1); glVertex3f(point1.X , point1.Y , point1.Z);
glTexCoord2d(1,1); glVertex3f(point2.X , point2.Y , point2.Z);
glTexCoord2d(1,0); glVertex3f(point3.X , point3.Y , point3.Z);

glEnd();
glDisable(GL_BLEND);
glDisable(GL_ALPHA_TEST);
glDisable(GL_TEXTURE_2D); 
```

# matlab - 在矩阵 MATLAB 中查找数组

> ID：15403399
> 
> 赞同：4
> 
> 时间：2013-03-14T07:22:27.027
> 
> 标签：matlab, search, matrix

我在matlab中有一个矩阵如下：

```
1  1  1

2  2  1
3  3  0.075
12  3  0.025
4  4  1
5  5  1
6  6  1 
```

我试图找到第三列的值，假设 VALUE 不是前两列的索引，可以说：12,3。然后它应该输出 0.025。我试过使用 ismember 和 find 函数，但我不知道如何在 MATLAB 中解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T07:37:23.943

`ismember`如果您 (1) 只将前两列`A`输入到函数中并且 (2) 将此函数与 'rows' 选项一起使用，则在这里可以正常工作：

```
A = [1  1  1
    2  2  1
    3  3  0.075
    12  3  0.025
    4  4  1
    5  5  1
    6  6  1]

idx = ismember(A(:,1:2), [12 3], 'rows'); % find index of valid row

A(idx, 3)                                 % query third column of valid row 
```

这导致

```
ans =

    0.0250 
```

# html - 使用 html/css 在表格的 td 上拉伸背景图像

> ID：15403400
> 
> 赞同：0
> 
> 时间：2013-03-14T07:22:30.547
> 
> 标签：html, css, image, html-table, stretch

我有一张桌子，希望在 TD 的宽度上拉伸某个背景，无论宽度是多少。

我的相关CSS`td`目前是这样的：

```
.tools .theader
{
margin:1px;background-color:#ffffcc;
background:url(../images/td_bg.png) no-repeat center center;
} 
```

HTML 是这样的：

```
<table class'tools'>
<tr>
<td class='theader' colspan=2>
Background
</td>
... 
```

这是我得到的结果的图像： ![在此处输入图像描述](../Images/8cf3b4c8479f5285e166cc6ceb405fb0.png)

所以你可以看到蓝色斜角背景正好适合每个`td`. 我希望它伸展到边缘，`td`使整体`td`看起来倾斜。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:27:54.963

您可以改用css渐变

**HTML**

```
<table class'tools'>
<tr>
<td class='theader' colspan="2">
    <span>Background</span>
</td>
    </tr>
    </table> 
```

**CSS**

```
.theader > span{
    color:white;
    padding:6px 10px;
    background: #fffcfc; /* Old browsers */
background: -moz-linear-gradient(top,  #fffcfc 0%, #2989d8 12%, #2989d8 51%, #207cca 96%, #ffffff 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fffcfc), color-stop(12%,#2989d8), color-stop(51%,#2989d8), color-stop(96%,#207cca), color-stop(100%,#ffffff)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #fffcfc 0%,#2989d8 12%,#2989d8 51%,#207cca 96%,#ffffff 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #fffcfc 0%,#2989d8 12%,#2989d8 51%,#207cca 96%,#ffffff 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #fffcfc 0%,#2989d8 12%,#2989d8 51%,#207cca 96%,#ffffff 100%); /* IE10+ */
background: linear-gradient(to bottom,  #fffcfc 0%,#2989d8 12%,#2989d8 51%,#207cca 96%,#ffffff 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fffcfc', endColorstr='#ffffff',GradientType=0 ); /* IE6-9 */

} 
```

[**演示**](http://jsfiddle.net/Gn75n/2/)

**[这里](http://www.colorzilla.com/gradient-editor/)**是生成 CSS Gradient 的最佳工具

# sugarcrm - SugarCRM - 如何在甘特网格视图中为项目任务添加额外的列？

> ID：15403402
> 
> 赞同：0
> 
> 时间：2013-03-14T07:22:33.060
> 
> 标签：sugarcrm, gantt-chart

我在这里找到[http://forums.sugarcrm.com/f6/custom-columns-gantt-charts-31205/](http://forums.sugarcrm.com/f6/custom-columns-gantt-charts-31205/)如何在项目任务（查看甘特图）中将列添加到甘特图视图 - 更改 EditGridView.tpl 文件，但我认为不是升级安全。是否可以在此处添加一些列？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:10:23.340

只要将文件覆盖放在 custom/ 目录中，您就应该是升级安全的。

# python - 我怎样才能从图中得到有向树？

> ID：15403407
> 
> 赞同：6
> 
> 时间：2013-03-14T07:22:48.837
> 
> 标签：python, graph, tree, networkx

```
import networkx as nx
G = nx.Graph()
G.add_edge(1,2)
G.add_edge(2,3)
G.add_edge(3,5)
G.add_edge(4,6)
G.add_edge(1,6)
G.add_edge(2,6)
G.add_edge(7,8)
G.add_edge(9,8)
mst=nx.prim_mst(G)# a generator of MST edges 
```

我有一棵树。如何获得根为 4 的定向树？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T08:26:24.383

从节点 4 获取广度优先搜索的有向树：

```
tree = nx.bfs_tree(G, 4) 
```

![在此处输入图像描述](../Images/c0fa896d4caedd5906a6bd294835b56d.png)

* * *

从节点 4 获取深度优先搜索的有向树：

```
tree = nx.dfs_tree(G, 4) 
```

![在此处输入图像描述](../Images/76fc423b863be0242629938fa41f5df1.png)

* * *

这些图表是这样生成的：

```
import matplotlib.pyplot as plt
import networkx as nx

G = nx.Graph()
G.add_edge(1,2)
G.add_edge(2,3)
G.add_edge(3,5)
G.add_edge(4,6)
G.add_edge(1,6)
G.add_edge(2,6)
G.add_edge(7,8)
G.add_edge(9,8)

tree = nx.bfs_tree(G, 4)
nx.draw(tree)
plt.savefig('/tmp/bfs_image.png') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:15:03.883

可能是@kalombo 想要来自 G 的 MST 的定向树，根在节点 4。在这种情况下，您将需要首先构建 MST 的图。例如

```
T = nx.bfs_tree(nx.Graph(nx.prim_mst_edges(G)),4) 
```

# jquery - 将内容集中在滚动窗格内的 JQuery 代码

> ID：15403409
> 
> 赞同：1
> 
> 时间：2013-03-14T07:22:53.217
> 
> 标签：jquery, scroll, focus, scrollbar

我有一个搜索页面，其中在左侧我有几个用户可以检查的选项。当用户选择左侧的选项时，右侧会显示相应的内容。右边的内容在一个 div 里面，它有一个指定的高度，当内容增加时会有滚动条。

现在的问题是当显示多个内容时，用户无法直接查看右侧的内容。用户必须向下滚动才能看到内容。

jquery中有没有办法在右侧显示/聚焦相应的内容。只是为了避免用户向下滚动的麻烦。有点像页面中的锚点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:29:11.127

单击选项写入此内容后，它将使用动画绘制到特定 ID。

```
jQuery(document).ready(function () {

  jQuery("#OPTION_ID").click(function (){

      jQuery("html, body").animate({ scrollTop: jQuery("#RIGHTSIDE_CONTENT_ID").offset().top }, 1000);
  })
}) 
```

它会工作.... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:30:57.607

您可能正在寻找 jQuery 的[`focus()`](http://api.jquery.com/focus/)方法

```
$('#button').click(function(e) {
  e.preventDefault();
  $('.thisContent').focus();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-17T11:59:05.333

单击选项写入此内容后，它将使用动画绘制到特定 ID。

```
jQuery(document).ready(function () {

  jQuery("#OPTION_ID").click(function (){

      jQuery("html, body").animate({ scrollTop: jQuery("#RIGHTSIDE_CONTENT_ID").offset().top }, 1000);   }) }) 
```

对此脚本有疑问，'jQuery（“html，body”）'是什么意思，html和body指向哪里？

# css - 带有按钮的Firefox chrome填充问题

> ID：15403415
> 
> 赞同：0
> 
> 时间：2013-03-14T07:23:06.600
> 
> 标签：css, google-chrome, firefox, padding

我的项目有问题，我不知道方法，chrome 和 firefox 与我的按钮显示的高度不同。我一直在环顾四周，发现firefox的按钮有问题，所以我在下面添加了代码，但仍然无法正常工作。会是什么呢？

```
.button-type::-moz-focus-inner { border: 0; padding: 0; margin:0; }

.button-type {
  background: #a9a9a9;
  -webkit-border-radius: 5px;
  border-radius: 5px;
  -webkit-box-shadow: 0 2px 8px rgba(0,0,0,0.3), inset 0 3px rgba(255,255,255,0.2), inset 0 2px rgba(255,255,255,0.2), inset 0 28px 22px rgba(255,255,255,0.2), inset 0 -10px 28px rgba(0,0,0,0.2);
  box-shadow: 0 2px 8px rgba(0,0,0,0.3), inset 0 3px rgba(255,255,255,0.2), inset 0 2px rgba(255,255,255,0.2), inset 0 28px 22px rgba(255,255,255,0.2), inset 0 -10px 28px rgba(0,0,0,0.2);
  font: Arial, Helvetica, sans-serif;
  line-height: 1;
  padding: 8px 15px;
  width: auto;
  height: auto;
  border: none;
  text-align: center;
  font-size: 13px;
  color: #fff;
  cursor: pointer;
  display: block;
  text-decoration: none;
  text-shadow: -1px -1px #333;
}
.button-type.black {
  background: #000;
  color: #fff;
}
.button-type.gray {
  background: #a9a9a9;
}
.button-type.light-gray {
  background: #d3d3d3;
  color: #222;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:33:19.140

解决它的解决方案（和错误）是：

```
display:block 
```

将其替换为：

```
display:inline 
```

# java - 在java中通过多线程读写文件

> ID：15403416
> 
> 赞同：0
> 
> 时间：2013-03-14T07:23:08.633
> 
> 标签：java, xml, multithreading, dom

我想用一个线程读取一个 XML 文件，并通过 2 个线程向其中添加一些节点。写入线程不能同时写入文件。读取线程读取文件内容并将其放入缓冲区。当读取器执行此操作时，写入器无法访问此缓冲区。

我怎样才能做到这一点？？

我以这种方式读取 XML 文件并添加节点：

```
public synchronized void AddNewNode(Document doc) throws TransformerException {

    Element book = doc.createElement("book");
    book.setAttribute("id", "3");

    Element name = doc.createElement("name");
    name.setTextContent("new");
    Element id = doc.createElement("id");
    id.setTextContent("31");
    Element writer = doc.createElement("writer");
    writer.setTextContent("tester");
    Element price = doc.createElement("price");
    price.setTextContent("3100");

    book.appendChild(name);
    book.appendChild(id);
    book.appendChild(writer);
    book.appendChild(price);

    doc.getDocumentElement().appendChild(book);

    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer transformer = tf.newTransformer();
    DOMSource source = new DOMSource(doc);
    StreamResult result = new StreamResult("/home/zahra/workspace/test1/src/xmlfile.xml");
    transformer.transform(source, result);

}
public void ReadNodes(Document doc) {

    NodeList nList = doc.getElementsByTagName("book");
    System.out.println("\n" + ":0 :) :0 :) :0 :) :0 :) :0 :)");
    for (int i = 0; i < nList.getLength(); i++) {

        Node nNode = nList.item(i);
        System.out.println("\n" + "Element number " + (i + 1) + "\n");
        Element eElement = (Element) nNode;
        for (int j = 0; j < eElement.getChildNodes().getLength(); j++) {

            String tagName = eElement.getChildNodes().item(j).getNodeName();
            if (eElement.getElementsByTagName(tagName).getLength() > 0) {
                System.out.println(eElement.getChildNodes().item(j).getNodeName()
                        + " : "
                        + eElement.getElementsByTagName(tagName).item(0).getTextContent());
            }
        }

    }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:23:53.850

非常小心如何使用`synchronized`方法修饰符；它通常不符合您的预期。我喜欢将`synchronized`方法修饰符视为语法糖：

```
public void myMethod() {
    synchronized(this) {
        // method body
    }
} 
```

由于它锁定实例本身，它只限制同一个实例同时调用该方法。例如，如果您为每个 writer 创建一个实例，则同步方法将毫无帮助。在您的情况下可能更清洁的是直接在您想要锁定的对象上同步，例如：

```
public void addNewNode(Document doc) throws TransformerException {

    synchronized(doc) {
        Element book = doc.createElement("book");
        book.setAttribute("id", "3");
        // etc, etc.
    }
} 
```

您可能能够在您的 Reader 方法中使用相同的技巧，但是在这种情况下，阅读器也会阻止两个作者。我不太清楚你的用例需要这样的线程和时间。即使您让多线程完美运行，您仍然会遇到这样的问题：您的读取是否确实涵盖了每一次写入（可能存在写入发生在您最近一次读取之前的竞争情况）。

# android - 无法在 Android 应用程序中对齐复选框（水平/垂直）

> ID：15403417
> 
> 赞同：1
> 
> 时间：2013-03-14T07:23:12.470
> 
> 标签：android, checkbox, views, android-checkbox

我需要显示复选框。所有的复选框都应该在屏幕的最右边对齐。但是，如果我改变屏幕的方向，复选框会出现在屏幕的中间。请帮我解决问题。提前致谢

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
    android:background="#000000" 
  >

    <LinearLayout android:id="@+id/LinearLayout02"
android:layout_width="fill_parent" 
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal"
android:gravity="center"
android:orientation="vertical"
android:layout_margin="10dp">

        <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
                     android:layout_width="fill_parent" 
                     android:layout_height="wrap_content">

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#000000" 
            >

         <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/sf_table"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="50dp"
            android:background="@drawable/test"

            >

          <View   android:id="@+id/Divider_7"
        android:layout_height="0.5dp"
        android:layout_width="fill_parent"
        android:background="#808080"

        android:layout_marginBottom="5dp"
         />
           <TableRow
                android:id="@+id/tbr6"

                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:layout_margin="2dip"
                android:layout_marginTop="3dp"
                android:layout_marginBottom="3dp"
                 >

             <TextView
                 android:textStyle="bold"
                 android:layout_marginLeft="5dp"
                 android:layout_marginRight="5dp"
                 android:layout_marginTop="2dp"
                 android:layout_marginBottom="2dp"
                 android:textColor="#3399CC"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:text="Pages For Website (existing pages plus new ones you need)-Contact Us"
                 ></TextView> 

</TableRow>

            <View   android:id="@+id/Divider_2"
        android:layout_height="1.5dp"
        android:layout_width="fill_parent"
        android:background="#C0C0C0"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
         />   
            <TableRow
                android:id="@+id/tbr9"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:layout_margin="2dip"
                android:layout_marginTop="3dp"
                android:layout_marginBottom="3dp"
                 >

  <TextView
                 android:textStyle="bold"
                 android:layout_marginLeft="5dp"
                 android:layout_marginRight="5dp"
                 android:layout_marginTop="2dp"
                 android:layout_marginBottom="2dp"
                 android:textColor="#ffffff"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:text="Feedback"
                 ></TextView> 

                  <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                   android:id="@+id/feedback_id"
                        android:layout_gravity="right"
                    ></CheckBox>

   </TableRow>

            <TableRow
                android:id="@+id/tbr9"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:layout_margin="2dip"
                android:layout_marginTop="3dp"
                android:layout_marginBottom="3dp"
                 >

  <TextView
                 android:textStyle="bold"
                 android:layout_marginLeft="5dp"
                 android:layout_marginRight="5dp"
                 android:layout_marginTop="2dp"
                 android:layout_marginBottom="2dp"
                 android:textColor="#ffffff"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:text="Tech Support"
                 ></TextView> 

                  <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/techsupport_id"
                        android:layout_gravity="right"
                    ></CheckBox>

   </TableRow>

                <TableRow
                android:id="@+id/tbr9"
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:layout_margin="2dip"
                android:layout_marginTop="3dp"
                android:layout_marginBottom="3dp"
                 >

  <TextView
                 android:textStyle="bold"
                 android:layout_marginLeft="5dp"
                 android:layout_marginRight="5dp"
                 android:layout_marginTop="2dp"
                 android:layout_marginBottom="2dp"
                 android:textColor="#ffffff"
                 android:layout_width="fill_parent"
                 android:layout_height="wrap_content"
                 android:text="Quote Form"
                 ></TextView> 

                  <CheckBox
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:id="@+id/quoteform_id"
                        android:layout_gravity="right"
                    ></CheckBox>

   </TableRow>

          </TableLayout>

         </RelativeLayout> 

            </ScrollView>

            </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:41:54.443

尝试以下

```
android:layout_gravity="right"
android:gravity="right" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:58:23.940

`android:layout_gravity`在 a 中不相关`LinearLayout`。它适用于`FrameLayout`. **它的意思是“相对于我的**（`FrameLayout`）**父亲**，我的重力应该是多少”。`android:gravity`另一方面，意思是“**我内心**的重力是什么”，它以不同的方式应用于不同的视图（就像`TextView`它会根据重力对齐文本）。

我认为您可以通过简化布局方案并仅使用`RelativeLayout`用于对齐问题（与父视图或其他视图对齐）和`LinearLayout`用于对垂直组和水平组进行分组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T14:05:49.567

使用 tablelayout 然后使用 tablerowlayout。并把你的复选框。

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <TableLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <TextView
                    android:id="@+id/textView4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:textStyle="bold"
                    android:textColor="#ffffffff"
                    android:text="ARE YOU CLASS 2B?" />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="50dp"
                android:layout_height="50dp" >
                <RadioGroup
                    android:id="@+id/radioGroup" android:textColor="#000000"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="horizontal">

                <RadioButton
                    android:id="@+id/yes"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Yes" />

                <RadioButton
                    android:id="@+id/no"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="No" />
            </RadioGroup>
            </TableRow>

            <TableRow
                android:id="@+id/tableRow3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <CheckBox
                    android:id="@+id/jimmy"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Jimmy" />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <CheckBox
                    android:id="@+id/diana"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Diana" />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow6"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <CheckBox
                    android:id="@+id/dina"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Dina" />

            </TableRow>

            <TableRow
                android:id="@+id/tableRow5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <CheckBox
                    android:id="@+id/jack"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Jack" />

            </TableRow>

            <TextView
                android:id="@+id/status"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="TextView" />

            <TableRow
                android:id="@+id/tableRow7"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

            </TableRow>

        </TableLayout>

    </LinearLayout> 
```

就是例子嘿嘿

# sharepoint - 如何将我的网页移动到另一个选项卡？

> ID：15403426
> 
> 赞同：0
> 
> 时间：2013-03-14T07:23:48.167
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer, sharepoint-workflow

基本上我想做的是将我的页面“专题文章”从“查看”选项卡移动到“浏览”选项卡，但我不知道要这样做，尽管我已经在谷歌上搜索了一整天。我现在应该怎么做才能将其移动到浏览选项卡？

[![我的屏幕截图](../Images/d0dd95e8068800307b836ef9f99e5b6b.png)](https://i.stack.imgur.com/MwA2z.png)

```
<asp:Content ContentPlaceHolderId="PlaceHolderAdditionalPageHead" runat="server">
<meta name="GENERATOR" content="Microsoft SharePoint" />
<meta name="ProgId" content="SharePoint.WebPartPage.Document" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="CollaborationServer" content="SharePoint Team Web Site" />
<script type="text/javascript"> 
```

上面的代码是我的代码的一部分，但我不确定这是否有用，或者我可能根本不需要查看代码

# .net - 将数据从 .NET 应用程序广播到另一个

> ID：15403427
> 
> 赞同：1
> 
> 时间：2013-03-14T07:23:55.957
> 
> 标签：.net, networking

我在本地网络 A 和 B 上有两个应用程序，应用程序 A 应该是服务器，并向应用程序 B 的所有实例广播一个数据数组，如果应用程序 B 的任何实例收到该数组的一个项目，另一个 B 实例将不会接收此项目，如果应用程序 B 能够在应用程序 A 启动之前或之后启动（两个应用程序之间的通信将不起作用），则接收此项目。.NET 中应用此方案的最佳技术或方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:08:52.807

单次交付意味着这不是真正的广播：您不能“广播”并将其限制为一个接收器。需要使用 A 意味着它不能是 TCP 套接字。

听起来您想要一个中间件盒作为工作队列。A 可以将项目添加到队列中，B 的实例可以将项目出列。我会使用 redis 之类的东西，因为它易于设置、免费且非常高效。在 redis 的上下文中，A 会调用`RPUSH`（将新项目放在末尾），每个 B 会调用`LPOP`（从开头删除项目）。*当没有*数据时，每个 B 可以简单地定期轮询；当它删除数据时，它可以`LPOP`循环直到数据用完，然后定期轮询。`BLPOP`如果您不想紧紧循环，还有一个阻塞 pop ( )，但我个人不喜欢它；如果我需要立即知道新数据，我宁愿使用内置的 pub/sub ( `PUBLISH`/`SUBSCRIBE`) 发送一条“有新数据”消息，让客户端看起来像`LPOP`.

.NET 可以使用各种 redis 客户端。

除了提到的个别命令外，上述大部分命令都可以转换为*任何*形式的消息总线；MSMQ 等

# jquery - 如何在 jquery 的函数中选择相应的元素？

> ID：15403428
> 
> 赞同：0
> 
> 时间：2013-03-14T07:24:00.893
> 
> 标签：jquery

说我有 20 个这样的 div：

```
 <div id="b1"></div>
   <div id="b2"></div>
   <div id="b3"></div>
   <div id="b4"></div>
... 
```

和 20 个输入：

```
<inpute id="in1"></inpute>
<inpute id="in2"></inpute>
<inpute id="in3"></inpute>
<inpute id="in4"></inpute>
... 
```

现在我想做这样的事情：

```
 $('#b1').click(function(){
    $('#in1').fadeIn();
  });
  $('#b2').click(function(){
    $('#in2').fadeIn();
  });
.... 
```

所以每个 div 都必须淡化相应的输入。我必须重复我的代码。有没有办法动态选择相应的元素？我想要一个功能

**编辑**：

看来我必须使用类。通过这样的事情：

```
$(this).index() 
```

我可以得到点击的索引。所以我的代码：

```
$('.b').click(function(){
    $('.in('+ $(this).index() +')').FadeIn();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:26:09.770

您可以获取元素的 ID 并替换`b`为`in`：

```
$('div[id^=b]').click(function(){
    $('#' + this.id.replace('b', 'in')).fadeIn();
}); 
```

或者如果两组元素的顺序相同，您可以通过索引选择相应的元素：

```
var $inputs = $('input[id^=in]'); // you really should use a class
var $divs = $('div[id^=b]'); // you really should use a class
$divs.click(function(){
    $inputs.eq($divs.index(this)).fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:26:18.650

尝试：

```
 $('[id^=b').click(function(){
  $('#in' + this.id.replace('b','')).fadeIn().siblings().fadeOut();
 }); 
```

# jquery - 在 html 选择中动态选择选项

> ID：15403432
> 
> 赞同：0
> 
> 时间：2013-03-14T07:24:28.083
> 
> 标签：jquery

我想通过 Jquery 或 JavaScript 在 html 选择元素中动态选择选项。有什么办法吗？所以，一旦我选择它，它就会选择并触发 onchange 事件处理程序。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:25:56.837

您可以使用 设置值，并通过[`.val("new value")`](http://api.jquery.com/val)触发事件的 jQuery 事件处理程序，例如：`change`[`.change()`](http://api.jquery.com/change)

```
$("selector for the select box").val("new value").change(); 
```

# html - 在 ContentEditable div 中执行命令

> ID：15403436
> 
> 赞同：1
> 
> 时间：2013-03-14T07:25:12.777
> 
> 标签：html, contenteditable

我试图使用 contenteditable div 创建一个所见即所得的编辑器。我试图使用 ExecCommand 将所选文本加粗。这似乎无法正常工作。我已经在 IE 中进行了测试。这是代码。如果程序中有错误，请帮助我识别错误。

```
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"  
     type="text/javascript"></script>                 
    <style>
    #rteToolBar span{
     cursor:pointer;
     }
   #rteToolBar span:hover{
     background:#3535ff;
     }
 </style>
</head> 
```

```
 <div id="rteWrapper"  >
   <div id="rteToolBar" style="border: thin solid black">
     <span role="BOLD" >B</span>
 <span role="ITAL">I</span>
 <span role="TABL">Table</span>  
   </div>
  <div id="rte" contentEditable="true" style="border: thin solid red">
     asdfla sdf asdf asdfas
 fas <b>fasldf</b> asfdsadf<br/>
 asdfla sdf asdf asdfas
 fas fasldf asfdsadf
</div> 
```

```
var range,rte,caretoffset;
    $(document).ready(function(){
   var rteWrapper = $('#rteWrapper');
   var toolBar = $('#rteToolBar');
       rte = $('#rte');
   $(toolBar).find('span').live('click',function(){
       rte.focus();
       var _this = $(this);
       var role = _this.attr('role');

            switch(role){
          case 'BOLD': 
          var range1 = document.selection.createRange();

         range1.execCommand('bold',false,null);
          break;
          case 'ITAL': 
          break;

          }

    });
     });

 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:21:42.730

在 IE 中，单击跨度会破坏现有选择。当`click`事件触发时，选择已经消失。

一个特定于 IE 的解决方法是让您的 spans [unselectable](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting/4358620#4358620)。您可以通过将`unselectable`属性添加到每个：

```
 <span role="ITAL" unselectable="on">I</span> 
```

另一种可能性是改用`mousedown`事件，但是在运行命令后，您的选择仍然会被销毁。

最后，无需创建 TextRange 并调用其`execCommand()`方法。你可以打电话`document.execCommand()`代替。这缩短了代码并使其与所有主流浏览器兼容，而不仅仅是 IE：

```
document.execCommand('bold', false, null); 
```

# ld - 在 msys 中编译 svn_swig_perl 时无法链接 libsvn_delta-1.a

> ID：15403439
> 
> 赞同：0
> 
> 时间：2013-03-14T07:25:27.520
> 
> 标签：ld

试图为 msys 编译 perl svn 绑定。但是在编译 swig perl **lib_core.dll**时，它会抱怨在**libsvn_swig_perl- 1.a 中找不到****_svn_delta_noop_window_handler**和**_svn_delta_default_editor**的引用。这两个函数都来自**libsvn_delta-1.a**。

 ****我应该重新编译并确保**libsvn_swig_perl- 1.a 与****libsvn_delta-** 1.a正确链接？或者只要在构建**lib_core.dll**期间它可以链接丢失的静态库就没有关系？

我真的不知道如何解决这个问题。

以下是编译**lib_core.dll**时的完整日志：

```
ld2  -s core.o  -o blib/arch/auto/SVN/_Core/_Core.dll   \
  /usr/lib/perl5/5.8.8/msys/CORE/libperl.dll.a -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/bindings/swig/perl/libsvn_swig_perl/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_client/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_delta/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_fs/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_repos/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_wc/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_diff/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_subr/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra_local/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra_svn/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra_neon/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_fs_util/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_fs_fs/.libs -lsvn_client-1 -lsvn_delta-1 -lsvn_fs-1 -lsvn_ra-1 -lsvn_repos-1 -lsvn_wc-1 -lsvn_diff-1 -lsvn_subr-1 -lsvn_fs_util-1 -lsvn_swig_perl-1 -lapr-1 -lintl -lz -laprutil-1 -lexpat -lperl -L/lib/perl5/5.8.8/msys/CORE        \ 
gcc -shared -o _Core.dll -Wl,--out-implib=lib_Core.dll.a -Wl,--export-all-symbols -Wl,--enable-auto-import -Wl,--stack,8388608 -Wl,--enable-auto-image-base \
-s core.o  /usr/lib/perl5/5.8.8/msys/CORE/libperl.dll.a -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/bindings/swig/perl/libsvn_swig_perl/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_client/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_delta/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_fs/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_repos/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_wc/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_diff/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_subr/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra_local/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra_svn/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra_neon/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_fs_util/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_fs_fs/.libs -lsvn_client-1 -lsvn_delta-1 -lsvn_fs-1 -lsvn_ra-1 -lsvn_repos-1 -lsvn_wc-1 -lsvn_diff-1 -lsvn_subr-1 -lsvn_fs_util-1 -lsvn_swig_perl-1 -lapr-1 -lintl -lz -laprutil-1 -lexpat -lperl -L/lib/perl5/5.8.8/msys/CORE
Creating library file: lib_Core.dll.a
/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/bindings/swig/perl/libsvn_swig_perl/.libs/libsvn_swig_perl-1.a(swigutil_pl.o.b): In function `thunk_apply_textdelta':
/usr/src/subversion16/subversion-1.6.17-3-msys-src/subversion-1.6.17/subversion/bindings/swig/perl/libsvn_swig_perl/swigutil_pl.c:703: undefined reference to `_svn_delta_noop_window_handler'
/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/bindings/swig/perl/libsvn_swig_perl/.libs/libsvn_swig_perl-1.a(swigutil_pl.o.b): In function `svn_delta_make_editor':
/usr/src/subversion16/subversion-1.6.17-3-msys-src/subversion-1.6.17/subversion/bindings/swig/perl/libsvn_swig_perl/swigutil_pl.c:785: undefined reference to `_svn_delta_default_editor'
collect2: ld returned 1 exit status
perlld: *** system() failed to execute
gcc -shared -o _Core.dll -Wl,--out-implib=lib_Core.dll.a -Wl,--export-all-symbols -Wl,--enable-auto-import -Wl,--stack,8388608 -Wl,--enable-auto-image-base \
-s core.o  /usr/lib/perl5/5.8.8/msys/CORE/libperl.dll.a -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/bindings/swig/perl/libsvn_swig_perl/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_client/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_delta/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_fs/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_repos/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_wc/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_diff/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_subr/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra_local/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra_svn/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_ra_neon/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_fs_util/.libs -L/usr/src/subversion16/subversion-1.6.17-3-msys-src/bld/subversion/libsvn_fs_fs/.libs -lsvn_client-1 -lsvn_delta-1 -lsvn_fs-1 -lsvn_ra-1 -lsvn_repos-1 -lsvn_wc-1 -lsvn_diff-1 -lsvn_subr-1 -lsvn_fs_util-1 -lsvn_swig_perl-1 -lapr-1 -lintl -lz -laprutil-1 -lexpat -lperl -L/lib/perl5/5.8.8/msys/CORE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T04:52:39.920

我的问题已经在其他帖子中回答了。它的链接器顺序问题。检查下面的答案： [链接器顺序](https://stackoverflow.com/a/6717376/860364)

我只需要移动 svn_swig_perl 的链接器以在 svn_delta 之前链接它来解决问题。****

# java - 从网站获取数据，无需 API？

> ID：15403440
> 
> 赞同：5
> 
> 时间：2013-03-14T07:25:36.357
> 
> 标签：java, api, rest, web

我想从这个网站自动获取有关房地产的数据：

[关联](http://derstandard.at/anzeiger/immoweb/Suchergebnis.aspx?Regionen=9&Bezirke=&Arten=&AngebotTyp=&timestamp=1363245585829)

但是，他们没有 api。你一般会怎么做？我感谢每一个回应！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:28:45.427

您将不得不自己下载该页面，并自己解析所有信息。

您可能想查看`Pattern`类，查看一些`regex`，`URL`and`String`类将非常有用。

您总是可以下载一个 html 库以使其更容易。[可能是http://htmlparser.sourceforge.net/](http://htmlparser.sourceforge.net/)之类的东西。

非常笼统的问题，很明显我无法提供相关代码，但这被称为抓取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:42:48.800

好吧，这就是您从页面获取所有内容的方式

然后您可以根据需要解析页面数据

```
package farzi;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URISyntaxException;

import org.apache.http.HttpException;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

public class GetXMLTask
{
    public static void main(String args[]) 
    {
        try 
        {
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost("http://derstandard.at/anzeiger/immoweb/Suchergebnis.aspx?Regionen=9&Bezirke=&Arten=&AngebotTyp=&timestamp=1363245585829");
            HttpResponse response;
            StringBuilder builder= new StringBuilder();
            response = httpClient.execute(httpPost);
            System.out.println(response.toString());
            BufferedReader in = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
            char[] buf = new char[1000];
            int l = 0;
                while (l >= 0) 
                {
                    builder.append(buf, 0, l);
                    l = in.read(buf);
                }
                System.out.println(builder.toString());
        } 
        catch (URISyntaxException e) {
            System.out.println("URISyntaxException :"+e);
            e.printStackTrace();
        } 
        catch (HttpException e) {
            System.out.println("HttpException :"+e);
            e.printStackTrace();
        } 
        catch (InterruptedException e) {
            System.out.println("InterruptedException :"+e);
            e.printStackTrace();
        } catch (IOException e) {
            System.out.println("IOException :"+e);
            e.printStackTrace();
        } 
    }
} 
```

# c# - 来自 ASP 数据源的下拉列表填充和存储过程不起作用

> ID：15403442
> 
> 赞同：0
> 
> 时间：2013-03-14T07:25:41.567
> 
> 标签：c#, asp.net, stored-procedures, data-binding, dataset

如果在 ASP 页面中创建下拉列表和数据集（基于存储过程），则使用基于会话的参数。
当会话变量设置为在过程中返回结果`databind()`并被调用的值时，不应该填充列表吗？
或者还有其他事情要做吗？
我正在尝试类似的事情，`dataset.select()`但想知道这是怎么发生的。
这一切都在页面加载中。如果我错过了一些明显的东西，请查看代码。

注意：我在 ASPx 页面而不是在代码隐藏中创建数据源的原因是因为我将创建很多数据源，这样会更快，但也许这不是一个好方法。

ASP 是

```
 <asp:DropDownList ID="ddClinic" runat="server"OnSelectedIndexChanged=" 
      ddClinic_SelectedIndexChanged" AppendDataBoundItems="True" DataSourceID="dsClinics" 
      DataTextField="ClinicName" DataValueField="ClinicID" AutoPostBack="True">
      <asp:ListItem Value="0">Select One</asp:ListItem>
 </asp:DropDownList>

 <asp:SqlDataSource ID="dsClinics" runat="server" ConnectionString="
      <$ConnectionStrings:coPC3PaymentConnectionString %>" SelectCommand="GetClinicsForUser" 
      SelectCommandType="StoredProcedure">
        <SelectParameters>
            <asp:SessionParameter DbType="Int32" Name="userID" SessionField="Userid" 
              Type="Int32" />
            <asp:ControlParameter ControlID="LbMsg.Text" DbType="String" Direction="Output" 
                  Name="ErrorMsg" PropertyName="Text" Type="String" />
        </SelectParameters>
    </asp:SqlDataSource> 
```

那么，在 Codebehind C# 中，这不应该让它填满吗？（假设参数在 SP 中返回数据？

```
 Session["User"] = PC3User;

                Session["MultiClinics"] = 1;

                ddClinic.DataBind(); 
```

同样，对于愚蠢的问题感到抱歉，但我发现的所有示例都是在代码隐藏中创建的数据源。有必要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:46:46.503

我不认为可以从这个板上删除问题，但我认为这个问题不会对其他人有帮助，因为我发现我的问题很简单，并且与数据绑定无关——我只是错误地引用了会话变量姓名

```
Session["User"] vs  <asp:SessionParameter DbType="Int32" Name="user**ID**" 
```

如果您浪费了时间，我很抱歉，我会更加小心。这在我身上发生了几次。我将检查所有字符串值，因为它们不会在构建中被捕获。

# php - PHP文件获取内容错误

> ID：15403443
> 
> 赞同：0
> 
> 时间：2013-03-14T07:25:45.807
> 
> 标签：php, facebook, file-get-contents

在下面的代码中我得到错误`failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request`

```
 $url = "https://graph.facebook.com/$orderId";
        $url_with_token = $url . "?access_token=$token";
        $result= json_decode(file_get_contents($url_with_token)); 
```

请让我知道我哪里出错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:39:28.997

只需在 php.ini 文件中添加两行。

```
extension=php_openssl.dll

allow_url_include = On 
```

它为我工作。

# jquery - JQuery滑块在创建时设置值

> ID：15403448
> 
> 赞同：2
> 
> 时间：2013-03-14T07:26:07.167
> 
> 标签：jquery, jquery-slider

```
$("#slider1").slider({
    min: 1940,
    max: 2013,
    values: [1990, 2013],
    range: true,
    slide: function (event, ui) {
        var val = ui.values;
        $('#from1').text(val[0]);
        $('#to1').text(val[1]);
        $('#i_from1').val(val[0]);
        $('#i_to1').val(val[1]);
    },
    create: function (event, ui) {
        alert(ui.values);
    }
}); 
```

当我发出警报时，我得到未定义的值，这是为什么？，我需要在创建时将这些值设置为一些 html 元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:47:15.983

不幸的是，在`create`处理程序中，`ui`参数没有`value`属性。您可以改用它：

```
create: function (event, ui) {
    alert($(this).slider("values"));
} 
```

# sql - 如何在 PostgreSQL 中删除多个具有外键的表？

> ID：15403455
> 
> 赞同：7
> 
> 时间：2013-03-14T07:26:34.927
> 
> 标签：sql, postgresql, sql-drop

我知道删除多个表的语法是：

```
DROP TABLE foo, bar, baz; 
```

但在我的情况下，3个表之间有外键，其他表不被删除。

*   表 1：表 2、表 3、数据库中另外 3 个表的外键。
*   表 2：外键 来自表 3，数据库中还有 2 个表。
*   表 3：外键来自数据库中的另外 3 个表。

那么我怎样才能删除这 3 个表呢？他们在表格中有数据。上面的语法会忽略外键吗？数据库中其他表不应该有任何数据不一致。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-14T08:33:12.363

您可以使用以下关键字告诉 Postgres 自动删除引用这些表的所有外键`cascade`：

```
DROP TABLE foo, bar, baz CASCADE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:37:30.797

通常，

如果 Table1、Table2 和 Table3 的主键在数据库中的任何其他表中被称为外键，您将有可能出现不一致。

如果你有，删除这些表的最安全方法是

首先通过 -

```
ALTER TABLE table_name DROP CONSTRAINT "table_name_id_fkey"; 
```

然后一一删除这些表。

# c - 在 C 中，当提示用户输入字符串时，会产生不希望的输出结果

> ID：15403456
> 
> 赞同：0
> 
> 时间：2013-03-14T07:26:35.197
> 
> 标签：c, string, user-input

有人可以解释为什么即使用户键入“古典”或“爵士”，前面的代码块总是导致“抱歉，这不是选择之一”？

```
#include <stdio.h>

int main()

{
    char c[20];

    printf("Hey! I hear you like music! What type do you like? (Classical/Jazz/Rock) ");

    gets(c);

    if(c == "Classical" || c == "classical")
        printf("Classical music is great.");
    else if(c == "Jazz" || c == "jazz")
        printf("Jazz is awesome!");
    else
        printf("Sorry, that's not one of the choices.");

    getchar();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:27:44.287

在 C 中，您必须使用[`strcmp()`](http://www.cplusplus.com/reference/cstring/strcmp/)来比较字符串：

```
if(strmp(c, "Classical") == 0 || strcmp(c, "classical") == 0)
    printf("Classical music is great.");
else if(strcmp(c, "Jazz") == 0 || strcmp(c, "jazz") == 0)
    printf("Jazz is awesome!");
else
    printf("Sorry, that's not one of the choices."); 
```

如果`a`and`b`是两个 C 字符串，`a == b`则不会像您认为的那样做。它检查`a`和是否`b`指向相同的内存，而不是检查它们是否由相同的字符组成。

在您的情况下，`c == "Classical"`等将*始终*评估为假。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T07:27:55.940

```
if(c == "Classical" || c == "classical") 
```

以上是无效的字符串比较。改为使用`strcmp`如下：

```
if(0 == strcmp(c, "Classical")) { // if c and "Classical" are equal
    printf("equal!\n");
} 
```

点击[此处](http://www.cplusplus.com/reference/cstring/strcmp/)查看参考页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:30:16.907

您必须将它们作为字符串进行比较。

```
 if(strcmp(c,"Classical")==0 || strcmp(c,"classical")==0)
        printf("Classical music is great.");
    else if(strcmp(c,"Jazz")==0 || strcmp(c,"jazz")==0)
        printf("Jazz is awesome!");
    else
        printf("Sorry, that's not one of the choices."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T07:32:08.830

在 C 中，您不能直接比较字符串指针，因为它实际上只是比较实际指针而不是它们指向的指针。

由于字符串文字始终是指针，并且数组可以衰减为指针，因此您正在做的是比较指针。

事实上，你甚至不能确定两个其他相等的字符串文字在比较它们的指针时是否相等。编译器可能会将字符串存储在不同的位置，即使它们是相同的。

正如其他人所解释的，在 C 中，您必须使用该[`strcmp`](http://en.cppreference.com/w/c/string/byte/strcmp)函数来比较字符串。

# ios - 如何获取 authenticationToken 以放入 pass.json

> ID：15403459
> 
> 赞同：2
> 
> 时间：2013-03-14T07:26:46.390
> 
> 标签：ios, web-services, passbook

现在我可以从我的网络服务添加传递链接。接下来，我希望能够更新该通行证。因此，我需要添加 webserviceURL 和 authenticationToken，但是如何获取这个令牌？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T07:44:04.450

你弥补。唯一的要求是它至少有 16 个字符长。

设备使用此令牌与 serialNumber 和 passTypeIdentifier 一起对您的 Web 服务进行身份验证，并让它知道设备已被授权接收特定的通行证。

在 PHP 中，您可以执行以下操作：

```
$authToken = generateAuthToken();

function generateAuthToken($length = 16) {
    return substr(str_shuffle("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"), 0, $length);
} 
```

# android - 在android源中获取选择器活动名称

> ID：15403460
> 
> 赞同：2
> 
> 时间：2013-03-14T07:26:50.327
> 
> 标签：android

在我的应用程序中，我正在检查后台服务中的顶级活动名称，并在默认情况下如果顶级活动不是 android 中的选择器活动，则调用一个函数。我发现该活动名称为“ **com.android.internal.app.ChooserActivity** ”。所以我正在对其进行硬编码并进行检查。一切正常。但是当该活动名称更改时会发生什么（由谷歌更改）。所以我的问题是，有没有办法在运行时获取选择器活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:53:27.040

在您的后台服务中运行一个线程，通过 ApplicationManager 获取活动的顶部，然后您可以在运行时比较活动的顶部。

```
ActivityManager am = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);

 // get the info from the currently running task
 List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1); 

 Log.d("topActivity", "CURRENT Activity ::"
         + taskInfo.get(0).topActivity.getClassName());

 ComponentName componentInfo = taskInfo.get(0).topActivity; 
```

组件信息.getPackageName(); 您的清单需要以下权限：

使用权限 android:name="android.permission.GET_TASKS"

# html - 初始化失败：Galleria 找不到元素“#runPics”

> ID：15403461
> 
> 赞同：0
> 
> 时间：2013-03-14T07:26:53.060
> 
> 标签：html, init, galleria

我使用 Galleria 在我的页面上出现此错误，我之前创建了一个测试页面，它运行良好。但是现在我需要在 master 的内容页面上使用它，所以当我把所有数据都带过来时，它给出了这个错误。它用图片加载列表视图，但不是画廊请帮忙

```
<html xmlns="http://www.w3.org/1999/xhtml">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 //EN"> 
```

```
<script type="text/javascript" src="../galleria/galleria-1.2.9.min.js"></script>
<script type="text/javascript" src="../galleria/themes/classic/galleria.classic.min.js"></script>
<link type="text/css" rel="stylesheet" href="../gallerai/themes/classic/galleria.classic.css" />

<style >
    #galleria
    {
        width: 700px;
        height: 400px;
        background: #000;
    }
</style>
<style >
    .body
    {
        width: 700px;
        height: 500px;
    }
</style>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>" SelectCommand="select i.imageID, g.Title, i.[Image Title], i.[Image] from Images i, Gallery g where g.ID = i.[Gallery ID]"></asp:SqlDataSource>

    <div style="width: 700px; text-align: center; height: 500px">
        <div id="runPics" runat="server">
        <br />
        <br />

        <asp:ListView ID="lstPics" runat="server" DataSourceID="SqlDataSource1">

            <ItemTemplate>
                <td>

                    <Club:ImageThumbnail ID="ImageThumbnail2" runat="server" PhotoID='<%# Bind("imageID") %>' />

                </td>
            </ItemTemplate>
        </asp:ListView>
    </div>
</div>

<%--    <div id="galleria">
    <img src="../images/1.jpg">
    <img src="../images/3.jpg">
    <img src="../images/4.jpg">
    <img src="../images/5.jpg">
    <img src="../images/6.jpg">
    <img src="../images/7.jpg">
</div>--%>

<script >
    //$('#gallery').galleria({
    //    width: 700,
    //    height: 400
    //});
    //Galleria.loadTheme('../galleria/themes/classic/galleria.classic.min.js');
    Galleria.configure({
        transition: 'fade'

    });
    Galleria.run('#runPics', {
        autoplay: 5000
    });
    Galleria.ready(function (o) {
        var gallery = this,
            p = !!o.autoplay;
        this.$('thumbs,more').click(function () {
            gallery.pause();
        });
        this.$('desc,thumbnails').click(function () {
            p && gallery.play();
        });
    });

</script>
    </html> 
```

所有这些都在 asp:content 标签之间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:56:59.953

修复

将 web.config 更改为：system.web pages controlRenderingCompatibilityVersion="3.5" clientIDMode="Static" />

并删除了我的列表视图中的 td> 标签

# java - 在 solaris 中使用 jdbc 连接到 sybase

> ID：15403462
> 
> 赞同：0
> 
> 时间：2013-03-14T07:26:59.653
> 
> 标签：java, jdbc, solaris, sybase, jconnect

我正在尝试学习如何使用 jdbc。通常要连接到 solaris 上的 sybase db，我使用：

```
isql -Usa -Pxxxxxx -Dxxxxxx 
```

它通过上述方式连接到数据库。我可以立即执行查询。

现在我正在尝试使用 java 做类似的事情。

下面是我的代码。

```
public class SKRSample
{
  public static void main(String args[])
  {
    try
      {
        Class.forName("com.sybase.jdbc.SybDriver");
      }
    catch (ClassNotFoundException cnfe)
      {
      System.err.println("Error loading driver: " + cnfe);
      }
    try
      {
       String host = "172.16.65.33";
       String dbName = "bsmdb";
       int port = 1234;
       String url = "jdbc:sybase:Tds:" + host + ":" + port + ":" + "?SERVICENAME=" + dbName;

        for (int n = 0; n<args.length; n++) {
         if (args[n].equals("-u")) user = args[++n];
         else if (args[n].equals("-p")) password = args[++n];
         else throw new IllegalArgumentException("Unknown argument.");
        }
        Connection con = DriverManager.getConnection(url, user, password);//here is the error. 
```

代码的最后一行是出现运行时错误的地方。

我编译了代码并执行如下：

```
setenv LOGIN "sa"
setenv PASSWORD "xxxxxxx"
javac SKRSample.java
java SKRSample -u $LOGIN -p $PASSWORD 
```

我得到的错误是：

```
Unexpected exception : java.sql.SQLException: No suitable driver found for jdbc:sybase:Tds:172.16.65.33:1234:?SERVICENAME=bsmdb, sqlstate = 08001 
```

我怀疑主机不正确或端口不正确或我构建的 url 不正确。如果主机名不正确，如何获取主机名。如果问题存在，如何获取端口号. 但我不确定这个问题。谁能给我一些关于问题到底在哪里的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:44:38.620

您必须下载驱动程序并执行该类，以便它使用您指定的路径中的驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:07:49.827

您需要一起使用正确的 JDBC 驱动程序和连接字符串。例如，您可以同时使用“com.sybase.jdbc2.jdbc.SybDriver”（在 jconn2.jar 中）和“jdbc:sybase:Tds:MyDbComputerNameOrIP:2638”。请查看以下页面以获取更多选项。

[Sybase JDBC 驱动程序和 URL 信息](http://www.razorsql.com/docs/help_sybase.html)

在您的代码中，您似乎在连接 URL 中添加了额外的“：”。远程端口号后的“：”。以下两个连接 URL 应与“com.sybase.jdbc.SybDriver”一起使用。

```
String url = "jdbc:sybase:Tds:" + host + ":" + port + "?SERVICENAME=" + dbName; 
```

或者

```
String url = "jdbc:sybase:Tds:" + host + ":" + port + "/" + dbName; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T08:18:40.020

Class.forName("net.sourceforge.jtds.jdbc.Driver");

并在类路径中使用 JTDS 驱动程序 jar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:00:31.020

似乎 JDBC url 格式错误。正确的格式是`jdbc:jtds:sybase://<host>[:<port>][/<database_name>]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-07T13:57:21.330

可能有点晚了，但是我仍然遇到了同样的问题并且花了很多时间调查，所以我将在这里放一些结果：

1\. 我们需要在代码中包含驱动类以及java.sql：
**import com.sybase.jdbc3.jdbc.SybDriver；
导入java.sql.*；**

2.我们需要用classpath中的驱动路径运行javac（我这里有jconn3.jar - /usr/local/localagent/jar/jconn3.jar）：
**javac -cp "/usr/local/localagent/jar /*" test_conn.java**

3\. 我们需要在运行类的时候把相同的类路径：
**java -cp ".:/usr/local/localagent/jar/*" test_conn**

我的test_conn.java代码如下：

```
    导入 com.sybase.jdbc3.jdbc.SybDriver；
    导入java.sql.*；

    公共类 test_conn {
        公共静态无效主要（字符串[]参数）{
            字符串主机=“我的主机”；
            字符串 url = "jdbc:sybase:Tds:"+host+":4100";
            字符串用户名 = "用户名";
            字符串密码="密码";
            字符串数据库名称=“数据库名称”；
            sybDriver sybDriver = null;
            连接连接；

            尝试
            {
                sybDriver=(SybDriver)Class.forName("com.sybase.jdbc3.jdbc.SybDriver").newInstance();
                System.out.println("驱动加载");
                conn = DriverManager.getConnection("jdbc:sybase:Tds:"+host+":4100?SERVICENAME="+dbname, username, password);

                语句 stmt = conn.createStatement();
                结果集 rs = stmt.executeQuery("sp_helpdb");
                rs.next();
                System.out.println(rs.getString(1));
                conn.close();

            }
            捕捉（例外前）
            {
                System.out.println(ex);
            }
        }
    }

```

它对我有用，所以我希望这会有所帮助。

# c++ - 如何使用内联汇编模仿以下 c++ 代码？

> ID：15403468
> 
> 赞同：1
> 
> 时间：2013-03-14T07:27:27.737
> 
> 标签：c++, mutex, inline-assembly

我正在尝试使用原子内联汇编代码模仿以下代码：

```
struct Node{
    Node * next;
    int value;
}

typedef struct Node * Node_ptr;

Node_ptr store(Node_ptr ** L, Node_ptr * I){
    pthread_mutex_lock (&queue_mutex);
    Node_ptr tmp = **L; 
    **L = *I;
    pthread_mutex_unlock (&queue_mutex)
    return tmp;
} 
```

这是我尝试过的：

```
Node_ptr tmp;
__asm volatile ("lock; movq %1, %%rax; movq %%rax, %0"
                    : "=r" (tmp)
                    : "r" (**L)
                    : "%rax"
                    );

__asm volatile ("lock; movq %1, %%rax; movq %%rax, %0"
                    : "=r" (**L)
                    : "r" (*I)
                    : "%rax"
                    );
return tmp; 
```

但是，我收到“非法指令”错误，并且无法查看哪里出错了。有人对问题所在有一些见解吗？

谢谢

编辑：添加了 node_ptr 的定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:01:16.230

英特尔的手册关于`LOCK`前缀的主题如下：

> LOCK 前缀只能添加到以下指令，并且只能添加到目标操作数是内存操作数的那些指令形式：ADD、ADC、AND、BTC、BTR、BTS、CMPXCHG、CMPXCH8B、DEC、INC、NEG、 NOT、OR、SBB、SUB、XOR、XADD 和 XCHG。如果 LOCK 前缀与这些指令之一一起使用并且源操作数是内存操作数，则可能会生成未定义的操作码异常 (#UD)。如果 LOCK 前缀与任何不在上述列表中的指令一起使用，也会产生未定义的操作码异常。

最好的办法（除了阅读来自英特尔的几千页厚厚的手册）是看看你的编译器为 c++ 代码生成了什么样的输出，这应该会给你一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:50:20.973

您正在寻找的是`CMPXCHG`说明。（您仍然需要`LOCK`前缀。）

# sql-server - 如何将 Northwind 数据库安装到 SQL Server 本地数据库中？

> ID：15403469
> 
> 赞同：2
> 
> 时间：2013-03-14T07:27:35.177
> 
> 标签：sql-server

我找到了以下链接

[安装 Northwind 示例数据库](http://msdn.microsoft.com/en-us/library/vstudio/ff851969.aspx)

但是我仍然不清楚这个过程。这谈到了 Server 2000 和 MSDE 2000，但我需要的是新的 SQL Server Local DB。

有没有其他人必须这样做并找到有关如何进行的任何说明？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T16:40:49.950

因此，我似乎无法找到将现有数据库文件从 Visual Studio 内部附加到 LocalDB 实例的方法（创建新数据库似乎是唯一的选择），但您可以通过管理工作室执行以下操作：

**第 1 步 - 找出 LocalDB 的实例名称**

打开命令提示符并运行（位置可能会因您的安装位置而略有不同）：

> C:\Program Files\Microsoft SQL Server\110\Tools\Binn>SqlLocalDB.exe 信息

这将列出 LocalDB 的所有实例，找到您感兴趣的实例，VS2012 为我安装了一个名为 v11.0 的实例（我将在我的示例中使用它）

**第 2 步 - 启动 LocalDB 实例**

再次在命令提示符下运行以下命令：

> C:\Program Files\Microsoft SQL Server\110\Tools\Binn>SqlLocalDB.exe 启动 v11.0

这将启动 LocalDB 实例并允许我们获取连接信息

**第 3 步 - 获取要连接的命名管道的名称（管道名称每次重新启动都会更改）**

另一个命令提示符作业：

> C:\Program Files\Microsoft SQL Server\110\Tools\Binn>SqlLocalDB.exe info v11.0

然后，这将返回有关该实例的信息，包括以下行：

实例管道名称：np:\.\pipe\LOCALDB#A6F550C6\tsql\query

**第 4 步 - 通过管理工作室连接并附加数据库**

打开管理工作室并在服务器框中连接到命名管道（windows auth），例如：

> \.\pipe\LOCALDB#A6F550C6\tsql\query

您现在将像普通实例一样在 SQL 服务器中，您可以将 Northwind MDF 文件复制到实例的数据目录（我的是我的用户文件夹的根目录），然后在管理工作室的数据库节点中单击并选择附加，选择 MDF 文件，然后正常附加。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-25T15:44:45.140

如何使用步骤通过 SSMS 进行恢复：

1.  下载北风 ( [https://northwinddatabase.codeplex.com/](https://northwinddatabase.codeplex.com/) ) 并将 .bak 保存在某处
2.  打开 SSMS
3.  连接到 (localdb)\ProjectsV12 （或您拥有的任何版本）
4.  右键单击数据库节点（见图）
5.  选择恢复...

[![在此处输入图像描述](../Images/7fdb7e9caead7803501a191feb972f62.png)](https://i.stack.imgur.com/QO7gC.png)

6.  在“还原数据库”窗口中，源 | 选择“设备”单选按钮并在下拉“备份媒体类型”中选择文件，然后单击“添加”按钮浏览到下载的 .bak 文件的位置

[![在此处输入图像描述](../Images/cde55bc07f04f4970baf0bae6625334e.png)](https://i.stack.imgur.com/Uy1A2.png)

7.  就是这样，您的 .bak 应该加载到您机器上的新数据库中。

# gwt - 在 GWT 中使用颜色类

> ID：15403471
> 
> 赞同：2
> 
> 时间：2013-03-14T07:27:38.643
> 
> 标签：gwt

我想在我的 GWT 客户端使用 Color ，

我想要这种颜色

```
 public static Color myColor = new Color( 152, 207, 204) ; 
```

如果我使用这个导入

```
 import java.awt.Color; 
```

在客户端它给了我错误：

```
 No source code is available for type java.awt.Color; did you forget to inherit a required module 
```

我如何在 GWT 客户端使用 RGB 颜色，而不使用 CSS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T08:25:32.037

您可以编写一个简单的 RGB 到字符串转换器：

```
public final  class Helper {
    public static String RgbToHex(int r, int g, int b){
      StringBuilder sb = new StringBuilder();
      sb.append('#')
      .append(Integer.toHexString(r))
      .append(Integer.toHexString(g))
      .append(Integer.toHexString(b));
      return sb.toString();
    }
} 
```

并使用它：

```
nameField.getElement().getStyle().setBackgroundColor(Helper.RgbToHex(50, 100, 150)); 
```

**- -更新 - -**

控制负值、大于 255 和 0-15 值的更复杂的方式。

```
 public static String RgbToHex(int r, int g, int b){
    StringBuilder sb = new StringBuilder();
    sb.append('#')
    .append(intTo2BytesStr(r))
    .append(intTo2BytesStr(g))
    .append(intTo2BytesStr(b));
    return sb.toString();
  }

  private static String intTo2BytesStr(int i) {
    return pad(Integer.toHexString(intTo2Bytes(i)));
  }

  private static int intTo2Bytes(int i){
    return (i < 0) ? 0 : (i > 255) ? 255 : i;
  }

  private static String pad(String str){
    StringBuilder sb = new StringBuilder(str);
    if (sb.length()<2){
      sb.insert(0, '0');
    }
    return sb.toString();
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T07:36:07.097

您正在使用 AWT 类的`Color`.

```
GWT != Java .  //so gwt compiler wont compile the awt classes 
```

请改用此[第三方颜色类](http://www.java2s.com/Code/Java/GWT/GWTcolorclass.htm)。

只需将该类复制到您的`utility package`并在`client side`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:48:53.160

您在这里使用了 awt api 颜色。但 GWT 不模拟这个库。参考：

*   [JRE 仿真参考](https://developers.google.com/web-toolkit/doc/1.6/RefJreEmulation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T04:54:38.060

这是 FFire 的答案中更正确的`RgbToHex`方法版本（此版本对于小于 16 的 r/g/b 值可以正常工作）：

```
public static String rgbToHex(final int r, final int g, final int b) {
  return "#" + (r < 16 ? "0" : "") + Integer.toHexString(r) + (g < 16 ? "0" : "") +
         Integer.toHexString(g) + (b < 16 ? "0" : "") + Integer.toHexString(b);
} 
```

当然，`StringBuilder`如果您愿意，也可以使用 a。

# iphone - UIButton 错误？（Xcode 版本 4.6 (4H127)）

> ID：15403475
> 
> 赞同：0
> 
> 时间：2013-03-14T07:27:47.437
> 
> 标签：iphone, cocoa-touch, uibutton, xcode4.2, ios6

第一个：Xcode 4.6 版（4H127），模拟器 6.1

所以...我执行以下操作。我的按钮（继承自 UIButton）从 nib 加载。然后我为 UIControlStateNormal 设置了图像。我有这样的事情： ![按钮](../Images/9ac2a1df1af2048a36a4464d57f082ee.png)

之后我需要取消它：

```
[button setImage:nil forState:UIControlStateNormal]; 
```

然后我看到了这个： ![错的按钮](../Images/abc2d0aafeb8d122c4643fd61563dab0.png)

检查差异：

![按钮](../Images/9ac2a1df1af2048a36a4464d57f082ee.png)

![错的按钮](../Images/abc2d0aafeb8d122c4643fd61563dab0.png)

所以标题布局正确，但图像仍然存在......

另外，如果我执行以下操作：

```
[button setImage:[UIImage new] forState:UIControlStateNormal]; 
```

我得到像第二个一样的结果，但没有图像（如预期的那样，但不完全，没有布局）：

![新图片](../Images/f823ac1525adbc8bd6b4ffb7bd3fa9e6.png)

我真的对这里发生的事情很感兴趣？它真的很有趣，mb Apple 打破了一些东西？或者我只是做错了？但我已经做了很多次（设置图像-> nil），一切正常。

感谢您阅读 :) 我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:48:01.817

这件事就在这里：我的 UIButton 子类覆盖 -layoutSubviews，其中使用某些标准设置 imageView.hidden。所以，如果 hidden 属性是 YES，当我调用 setImage:forState 时 - 这个 bug 发生了。

接下来是我的修复：我刚开始使用 alpha 属性而不是隐藏属性。（我知道这很脏，但这是我找到的最快的方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:13:28.647

我已经为此编写了一个示例代码。

你的两个电话我都很好

```
 [self.myCustomButton setImage:nil forState:UIControlStateNormal];
 [self.myCustomButton setImage:[UIImage new] forState:UIControlStateNormal]; 
```

我认为，您可以设置`BackGroundImage`而不是`image`.

![在此处输入图像描述](../Images/1b2b54ad51c3c5d4681d40f9c7a108e7.png)

示例方法

```
-(IBAction)removeImage:(id)sender{

    [self.myCustomButton setImage:nil forState:UIControlStateNormal];
    //[self.myCustomButton setImage:[UIImage new] forState:UIControlStateNormal];
}

-(IBAction)setImage:(id)sender{

    [self.myCustomButton setImage:[UIImage imageNamed:@"Button_Disable.jpg"] forState:UIControlStateNormal]; 
} 
```

# iphone - 我用 CGPath 做了一张有 4 个 CALayers 的图片，如何放大和缩小？

> ID：15403479
> 
> 赞同：0
> 
> 时间：2013-03-14T07:27:59.330
> 
> 标签：iphone, ios, objective-c, cgpath, cashapelayer

我用 CGPath 做了一张有 4 个 CALayers 的图片，如何放大和缩小？

图片包含四个不同的圆形、一个矩形和一个更复杂的形状。但是，我想让它像 UIRefreshControl 一样放大和缩小。同时控制每个形状以使其看起来像原始形状是不现实的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T12:32:28.760

如果您需要它：在您的`drawInRect:`方法中，您可以`CGContextScaleCTM (yourContext,scaleX,scaleY);`在 scaleX 和 scaleY 为 CGFloat 时添加。尝试一下。例如，您可以使用 UISlider 设置比例。

# ruby-on-rails-3.2 - 如何使用 find_by_sql 检索 BigDecimal？

> ID：15403480
> 
> 赞同：1
> 
> 时间：2013-03-14T07:28:12.503
> 
> 标签：ruby-on-rails-3.2, bigdecimal, find-by-sql

我正在使用 postgreSQL 进行求和，并希望对结果进行一些计算，但 rails 返回一个字符串而不是 bigdecimal 并拒绝将其转换为 bigdecimal。

```
create_table SCHEMA_PROJETS + '.proj_charges', :options => 'TABLESPACE ' + TABLESPACE_PROJETS do |t|
  # Gem's Reference : https://github.com/lomba/schema_plus
  t.integer :proj_sous_projet_id, :null => false, :foreign_key => { :name => SCHEMA_PROJETS + '_proj_charges_proj_sous_projet_id_fkey', :references => SCHEMA_PROJETS + ".proj_sous_projets", :on_delete => :restrict, :on_update => :restrict }
  t.string :designation, :null => false, :limit => 60
  t.decimal :montant, :null => false, :default => 0, :precision => 18, :scale => 2
  t.decimal :tva, :null => false, :default => 8.0, :precision => 5, :scale => 2

  t.timestamps
end 
```

这是我的 find_by_sql 和计算代码：

```
 tableau_charges = ProjMesure.find_by_sql ['SELECT sp.id AS "proj_sous_projet_id", SUM(c.montant) AS total FROM proj_charges c JOIN (proj_sous_projets sp JOIN (proj_projets p JOIN (proj_mesures m JOIN proj_paquets_mesures pm ON m.proj_paquet_mesures_id = pm.id AND pm.id = ?) ON p.proj_mesure_id = m.id) ON sp.proj_projet_id = p.id) ON c.proj_sous_projet_id = sp.id GROUP BY sp.id', id.to_i]

      tableau_charges.each do |charges|
        total_charges += charges.total
      end 
```

产生以下错误：

```
String can't be coerced into BigDecimal 
```

=== 更新 ===

下面的答案给了我一个想法：我的模型 ProjMesure 确实有一个**BigDecimal 属性**（montant_reference）。因此，我没有用任意名称（总计）命名我的总和，而是使用了 BigDecimal 属性的名称 : `SUM(c.montant) AS montant_reference`。

这个技巧可以自动将字符串解析为 BigDecimal。仅当您不打算在查询结果中使用此属性时才有可能。

我的新 SQL 请求：

```
tableau_charges = ProjMesure.find_by_sql ['SELECT sp.id AS "proj_sous_projet_id", SUM(c.montant) AS montant_reference FROM proj_charges c JOIN (proj_sous_projets sp JOIN (proj_projets p JOIN (proj_mesures m JOIN proj_paquets_mesures pm ON m.proj_paquet_mesures_id = pm.id AND pm.id = ?) ON p.proj_mesure_id = m.id) ON sp.proj_projet_id = p.id) ON c.proj_sous_projet_id = sp.id GROUP BY sp.id', id.to_i]

      tableau_charges.each do |charges|
        total_charges += charges.montant_reference
      end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:44:28.733

据我所知，AR 不会自动解析 find_by_sql 结果。您应该自己解析一个字符串。只需使用`charges.total.to_d`

AFAIK 你有另外两个选择：

首先是使用 AR`sum`和`joins`方法，如果您可以使用 AR 进行查询。可能会更深入地挖掘 AREL 设施。

第二个选项是在您的数据库中创建一个视图并为该视图创建一个活动记录模型。但是您可能会遇到查询参数（即过滤结果）的一些问题。考虑您的 DBMS 的文档。

# java - 如何将文件从 REST 客户端传输到 REST 服务器？

> ID：15403485
> 
> 赞同：4
> 
> 时间：2013-03-14T07:28:36.327
> 
> 标签：java, rest

我正在使用 REST 服务处理文件传输过程。我在 Java 中使用 REST Jersey API。我没有使用任何 html 帖子或通过 ajax 帖子执行此过程（即我没有创建任何 Web 应用程序）。我刚刚创建了一个 REST Http Server，我正在使用一个 REST Client 来处理文件传输操作。Web 资源方法位于单独的类文件中。

测试REST.java

```
@POST
@Path("/upload")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response uploadFile(
    @FormDataParam("file") InputStream uploadedInputStream,
    @FormDataParam("file") FormDataContentDisposition fileDetail) {

    String uploadedFileLocation = "d://uploaded/" + fileDetail.getFileName();

    // save it
    writeToFile(uploadedInputStream, uploadedFileLocation);

    String output = "File uploaded to : " + uploadedFileLocation;

    return Response.status(200).entity(output).build();
} 
```

RESTClient.java

```
try {
    final ClientConfig config = new DefaultClientConfig();
    final Client client = Client.create(config);
    final WebResource resource = client.resource(REST_URI);

    File f = new File("D:/test/Doc1.rar");
    FileInputStream fs = new FileInputStream(f);
    byte[] con= new byte[(int)f.length()];
    fs.read(con);
    FormDataMultiPart form = new FormDataMultiPart();
    FormDataBodyPart fdp = new FormDataBodyPart("content", MediaType.MULTIPART_FORM_DATA);
    form.bodyPart(fdp);
    final String response = resource.path("test").path("transfer").type(MediaType.MULTIPART_FORM_DATA).post(String.class, form);
} catch (Exception ex) {
    System.out.println("Exception Occcured");
    ex.printStackTrace();
} 
```

但是，在启动 REST 服务器本身时，我得到了一个异常，就像在 testREST.java 中不是一个有效的资源方法......我的代码错了。

# process - 在对内核执行休眠操作之前，在迭代任务列表时解锁读取锁定集

> ID：15403486
> 
> 赞同：2
> 
> 时间：2013-03-14T07:28:36.330
> 
> 标签：process, linux-kernel, driver

从我的内核模块中，我想遍历任务列表并对设置了我的任务->标志的所有进程执行一些休眠操作。我知道通过持有 read_lock(tasklist_lock)/rcu_read_lock，我不应该做任何昏昏欲睡的操作。所以我编码如下：

1.获取读锁
2.迭代任务（for_each_process）
3.如果我的标志被设置，我解锁tasklist_lock和get_task_struct
4.然后我执行休眠操作
5.Put_task_struct
6.再次获取read_lock(&tasklist_lock);
7.循环继续

```
read_lock(&tasklist_lock);

    for_each_process(c) {

            if (c->my_flag) {

            read_unlock(&tasklist_lock);

                    get_task_struct(c);

                         ...

                         Do some sleepy_operation()

                         ...

                    put_task_struct(c);

                    read_lock(&tasklist_lock);

            }
    } 
```

请让我知道我的方法是否正确

# php - 如何使用 php 代码显示打印标签

> ID：15403487
> 
> 赞同：2
> 
> 时间：2013-03-14T07:28:44.467
> 
> 标签：php

如果 $data_common[$datacntr]['SKU'] = something 我想要一个让打印标签可见的条件

```
 echo <a href="#" onclick="Popup=window.open(\'printLabel.php?OrderID=' . $orderId . '& Name=' . $Name . '&ShippingAddress=' . $ShippingAddress . '& AddressLine1=' . $AddressLine1 . ' &AddressLine2=' . $AddressLine2 . '&AddressLine3=' . $AddressLine3 . '&City=' . $City . '&County=' . $County . '&District=' . $District . '&StateOrRegion=' . $StateOrRegion . '&PostalCode=' . $PostalCode . '&Phone=' . $Phone . '&platform=' . $platform . '\',\'Popup\',\'toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=no, width=700,height=600,left=430,top=23\'); return false;"><img src="images/printLabel.png" alt="Print Lable"></a></td> 
```

别的什么都没有

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:34:52.153

```
<?php if (isset($data_common[$datacntr]['SKU']) && $data_common[$datacntr]['SKU'] == "something") : ?>
     <?php echo '<a href="#" onclick="Popup=window.open(\'printLabel.php?OrderID=' . $orderId . '& Name=' . $Name . '&ShippingAddress=' . $ShippingAddress . '& AddressLine1=' . $AddressLine1 . ' &AddressLine2=' . $AddressLine2 . '&AddressLine3=' . $AddressLine3 . '&City=' . $City . '&County=' . $County . '&District=' . $District . '&StateOrRegion=' . $StateOrRegion . '&PostalCode=' . $PostalCode . '&Phone=' . $Phone . '&platform=' . $platform . '\',\'Popup\',\'toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=no, width=700,height=600,left=430,top=23\'); return false;"><img src="images/printLabel.png" alt="Print Lable"></a>' ?>
<?php endif; ?> 
```

if 语句中的第一个条件将检查该`$data_common[$datacntr]['SKU']`键是否存在。第二个是它是否等于某物（将“某物”更改为您的值）。

希望这可以帮助 ：）

斯托扬

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:33:29.730

```
$label= (isset($data_common[$datacntr]['SKU']) && !empty($data_common[$datacntr]['SKU']))?'YOuR LABEL CODE':'';

echo $label; 
```

# github - 如何重新发布之前从 github 中删除的存储库？

> ID：15403490
> 
> 赞同：2
> 
> 时间：2013-03-14T07:28:53.933
> 
> 标签：github

几个月前，我使用 github.com 项目控制面板中的“danger zone -> delete this repo”从 github 删除了一个 repo。

现在我想把代码放回github上。我正在使用 github 桌面应用程序将我的代码推送到 github。

在 github 桌面应用程序中，github 仍然认为旧的已删除 repo 在我的帐户中仍然存在......所以我无法第二次推送代码。

如何从 github 中完全删除该项目，以便再次推送我的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-22T11:00:38.377

我通过`[remote "origin"]`从项目文件中删除该部分`.git/config`并将存储库重新发布到 github 来完成此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:32:39.623

如果刷新不足以让“GitHub for Windows”正确列出您的 GitHub 存储库，那么极端的解决方案是“卸载”并重新安装该应用程序。

所有数据都在 C:\Users\YourAccount\Local Settings\Application Data\GitHub 下，因此删除它们并重新安装“GitHub for Windows”就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T15:16:32.737

我不得不从应用程序中注销并重新登录，最后存储库消失了。

# mysql - 如何编写此查询请帮助我

> ID：15403491
> 
> 赞同：-1
> 
> 时间：2013-03-14T07:29:00.250
> 
> 标签：mysql, sql, rdbms, database

假设您有以下四个表；

*   顾客
*   订单
*   订购物品
*   项目

Orders 包含一个引用下订单的客户的外键 (customer_id)。每个ordered_item 包含一个引用整个订单的外键（order_id），以及一个引用items 表的item_id。您将如何编写为每个客户返回一行的单个 SQL 查询，其中包括一列，其中包含他们的订单总数（包括任何订单为 0 的客户），以及来自物品表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:44:56.797

*   要为每个客户获取一行，您需要按 customer_id 分组；
*   为了能够列出他们的所有订单，您需要从客户链接到订单 - 这需要是外部连接，以包括具有 0 个订单的客户；
*   为了能够列出客户曾经订购过的所有商品 SKU，您需要通过 ordered_items 表链接到 items 表；您还需要使用 MySQL 函数`group_concat`，以便能够将这些总结在一行中。

所以：

```
select c.customer_id, 
       count(distinct o.order_id) distinct_orders,
       group_concat(distinct i.sku) ordered_item_skus
from customers c
left outer join orders o on c.customer_id = o.customer_id
left outer join order_items oi on o.order_id = oi.order_id
left outer join items  i on oi.item_id = i.item_id
group by c.customer_id 
```

# javascript - 如何使用 spin.js 显示页面加载指示器

> ID：15403492
> 
> 赞同：2
> 
> 时间：2013-03-14T07:29:03.440
> 
> 标签：javascript, jquery, spinner, usability

我正在学习如何使用[Spin.js](http://fgnass.github.com/spin.js/)，以便在网页加载时显示加载指示器（微调器）。

我让它工作了，但我不确定我是否在正确的页面生命周期中调用旋转/停止。之前可以显示微调器`$(window).ready`吗？

```
<script type="text/javascript">
var spinner;

$(window).ready(function loadingAnimation() {
    var opts = {
      lines: 13, // The number of lines to draw
      length: 7, // The length of each line
      width: 4, // The line thickness
      radius: 10, // The radius of the inner circle
      corners: 1, // Corner roundness (0..1)
      rotate: 0, // The rotation offset
      color: '#000', // #rgb or #rrggbb
      speed: 1, // Rounds per second
      trail: 60, // Afterglow percentage
      shadow: false, // Whether to render a shadow
      hwaccel: false, // Whether to use hardware acceleration
      className: 'spinner', // The CSS class to assign to the spinner
      zIndex: 2e9, // The z-index (defaults to 2000000000)
      top: 'auto', // Top position relative to parent in px
      left: 'auto' // Left position relative to parent in px
    };
    var target = $("body")[0];
    spinner = new Spinner(opts).spin(target);
});

window.onload = function() {
    spinner.stop();
}; 
```

有关工作示例，请参阅[http://sgratrace.appspot.com/industry.html](http://sgratrace.appspot.com/industry.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-08T02:11:20.273

我创建了一个对象来控制旋转：

```
Rats.UI.LoadAnimation = {
    "start" : function(){
        var opts = {
            lines : 13, // The number of lines to draw
            length : 7, // The length of each line
            width : 4, // The line thickness
            radius : 10, // The radius of the inner circle
            corners : 1, // Corner roundness (0..1)
            rotate : 0, // The rotation offset
            color : '#000', // #rgb or #rrggbb
            speed : 1, // Rounds per second
            trail : 60, // Afterglow percentage
            shadow : false, // Whether to render a shadow
            hwaccel : false, // Whether to use hardware acceleration
            className : 'spinner', // The CSS class to assign to the spinner
            zIndex : 2e9, // The z-index (defaults to 2000000000)
            top : $(window).height()/2.5, // Manual positioning in viewport
            left : "auto"
        };
        var target = $("body")[0];
        return new Spinner(opts).spin(target);
     },
     "stop" : function(spinner){
        spinner.stop();
     }
}; 
```

加载 DOM 后，我开始旋转：

```
$(document).ready(function(){
        // Once the DOM is loaded, start spinning
        spinner = Rats.UI.LoadAnimation.start();

        pageUI();

}); 
```

加载整个页面后，我停止旋转：

```
$(window).load(function(){
        // Once the page is fully loaded, stop spinning
        Rats.UI.LoadAnimation.stop(spinner);
}); 
```

[window.onload 与 $(document).ready()](https://stackoverflow.com/questions/3698200/window-onload-vs-document-ready)有什么区别

请参阅我的 github 存储库中的完整代码：

*   [https://github.com/seahrh/sgratrace/blob/master/war/js/rats.js](https://github.com/seahrh/sgratrace/blob/master/war/js/rats.js)
*   [https://github.com/seahrh/sgratrace/blob/master/war/index.html](https://github.com/seahrh/sgratrace/blob/master/war/index.html)

# macos - CoreAudio AudioFileOpenURL 打开 .avi 文件

> ID：15403494
> 
> 赞同：1
> 
> 时间：2013-03-14T07:29:07.550
> 
> 标签：macos, core-audio

我正在尝试使用 AudioFileOpenURL 打开 .avi 文件，但它失败了。.avi 文件描述：RIFF（小端）数据，AVI，640 x 480，29.97 fps，视频：XviD，音频：MPEG-1 Layer 3（立体声，44100 Hz）

我能够打开 .mp4 .3GP 视频文件。

问题是：是编解码器问题还是核心音频无法解析视频文件中的音频流。

我正在使用 Mac OSX 10.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T02:11:45.727

不幸的是，AudioFile / ExtAudioFile API 不允许您打开电影文件并开箱即用地提取音频组件。

[请参阅此处了解支持的文件格式列表，以及您可以对每种](https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/CoreAudioOverview/SupportedAudioFormatsMacOSX/SupportedAudioFormatsMacOSX.html#//apple_ref/doc/uid/TP40003577-CH7-SW1).

# http - angularjs + mongolab $http.put 不更新模型

> ID：15403501
> 
> 赞同：2
> 
> 时间：2013-03-14T07:29:32.433
> 
> 标签：http, angularjs, crud, put, mlab

我刚开始使用角度和编码，所以请耐心等待......

我目前正在尝试编写一个类似电话簿的基本 CRUD 应用程序。到目前为止，我添加和查看联系人没有任何问题，但我被困在如何通过MongoLab 的 API**更新**我在 MongoLab 上的模型`$http.put`

任何正确方向的帮助或指示将不胜感激！

这是我的 UpdateCtrl 函数和附加的相关表单（此处放置了一个通用 URL 用于演示目的）：

## 控制器.js

```
function UpdateCtrl($scope, $http, $routeParams, $location){
$scope.contactId = $routeParams.contactId;

var url = 'https://api.mongolab.com/api/databases/<d>/collections/<c>/<id>;

$http.get(url).
    success(function(mongoDataById) {
        $scope.contact = mongoDataById;
    });

$scope.updateContact = function() {
    $http.put(url, $scope.contact);
    };
} 
```

## update.html（部分视图）

```
<form ng-submit="updateContact()">

    <label for="fullname">Name</label>
    <input type="text" id="fullname" ng-model="contact.fullname" ><br/>

    <label for="email">Email</label>
    <input type="text" id="email" ng-model="contact.email"><br/>

    <label for="phone">Phone</label>
    <input type="text" id="phone" ng-model="contact.phone"><br/>

    <button type="submit">Update</button>
</form> 
```

* * *

## 编辑

@Stewie 和 @Arun P Johny，当我执行 updateContact() 时，控制台中似乎没有任何错误。我怀疑它发送的 PUT 请求与初始 GET 请求产生的数据相同，即使当前 $scope 中的表单已进行了更改。（是的，我的 Url 中有一个特定的contactId - 在浏览器中测试，它会提取我选择的特定联系人的数据）

@pkozlowski.opensource - 是的，当我开始这个项目时，我实际上添加了那个库，但是当我能够使用相当简单的 $http POST 和 GET 函数时，我觉得没有必要。如果我无法使用基本的 $http.put，现在可以尝试一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-25T20:37:11.140

您可能需要 API 密钥才能访问 Mongo Lab 的 RESTful API，例如：

```
GET /databases/{database}/collections/{collection} 
```

列出给定集合中所有文档的示例：

```
https://api.mongolab.com/api/1/databases/my-db/collections/my-coll?apiKey=myAPIKey 
```

可选参数[q=][&c=true][&f=][&fo=true][&s=][&sk=][&l=]

更多信息请访问： [http ://docs.mongolab.com/restapi/#authentication](http://docs.mongolab.com/restapi/#authentication)

如果您能告诉我们 Get commant 是否正常工作，那就太好了

# magento - 如何在 Topmenu 中获取 Magento 中的自定义值和图像？

> ID：15403502
> 
> 赞同：1
> 
> 时间：2013-03-14T07:29:36.210
> 
> 标签：magento, zend-framework, menu, magento-1.7, categories

我正在使用**magento 1.7.0.2**。我已经在数据库中添加了自定义值。但是如何在 Topmanu 中检索自定义值和图像。我已经尝试在“my_attribute”的地方使用下面提到的代码来替换我的属性，但我没有得到结果。

**型号：Mage_Catalog_Model_Observer**

**方法：_addCategoriesToMenu()**

$categoryData = 数组（

```
'name' => $category->getName(),
'id' => $nodeId,
//'url' => Mage::helper('catalog/category')->getCategoryUrl($category),
'is_active' => $this->_isActiveMenuCategory($category),
'my_attribute' => $category->getData('my_attribute') // Add our data in... 
```

);

当我打印数组时，我会得到这个，

数组（[名称] => Matelas [id] => category-node-31 [is_active] => 1 [my_attribute] =>）

谁能指导我，提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:24:01.713

我猜你的意思是你已经向 Category 实体添加了一个新的自定义属性？

因为您正在处理 Node_collection，所以不会加载完整的类别对象，请尝试加载完整的对象以获得您所追求的：

```
$cat = Mage::getModel('catalog/category')->load($category->getId());

$categoryData = array(
    name' => $category->getName(),
    'id' => $nodeId,
    //'url' => Mage::helper('catalog/category')->getCategoryUrl($category),
    'is_active' => $this->_isActiveMenuCategory($category),
    'my_attribute' => $cat->getData('my_attribute') // Add our data in...
); 
```

# java - 如何在春季使用 SimpleJDBCCall 获取存储过程的多表结果？

> ID：15403504
> 
> 赞同：1
> 
> 时间：2013-03-14T07:29:42.603
> 
> 标签：java, spring, sql-server-2008, stored-procedures, jdbc

我正在实施一个`Spring`+`MSSQL Server 2008`应用程序。我使用`SimpleJDBCCall`API 来执行存储过程并检索结果。

对于具有单表结果的存储过程，它工作正常，但我不知道如何将它用于具有多表结果的过程。

示例程序主体：

多表结果

```
 SELECT * FROM TABLE1
    SELECT * FROM TABLE2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:43:44.873

我是最无知的，它确实有效！您可以指定两个结果集，每个结果集都有自己的映射器。在代码中它看起来像这样：

```
SimpleJdbcCall call = new SimpleJdbcCall(this.jdbc)
           .withProcedureName("get_users3")
           .returningResultSet("rs1", new ParameterizedRowMapper<Object[]>()
           {
              @Override
              public Object[] mapRow(ResultSet rs, int rowNum) throws SQLException
              {
                 return new Object[] { rowNum, rs.getInt(1), rs.getString(2) };
              }
           })
           .returningResultSet("rs2", new ParameterizedRowMapper<Object[]>()
           {
              @Override
              public Object[] mapRow(ResultSet rs, int rowNum) throws SQLException
              {
                 return new Object[] { rowNum, rs.getInt(1), rs.getString(2) };
              }
           });

  Map<String, Object> res = call.execute();
  assertNotNull(res.get("rs1"));
  assertNotNull(res.get("rs2"));
  List<Object[]> l1 = (List<Object[]>)res.get("rs1");
  List<Object[]> l2 = (List<Object[]>)res.get("rs2"); 
```

# javascript - Canvas 的面向对象的 JavaScript

> ID：15403510
> 
> 赞同：0
> 
> 时间：2013-03-14T07:29:58.253
> 
> 标签：javascript, oop, html5-canvas

我在构建游戏时从这本 JS 书中获得了这种迷你框架（场景、演员）。我将在这里显示代码并在之后提出问题：

```
//-------------------------------SCENE CLASS------------------------------//

function Scene(context, width, height, images)
{
    this.context = context;
    this.width = width;
    this.height = height;
    this.images = images;
    this.actors = [];
}

Scene.prototype.register = function(actor)
{
    this.actors.push(actor);
}

Scene.prototype.unregister = function(actor)
{
    var index = this.actors.indexOf(actor);
    if(index >= 0)
    {
        this.actors.splice(index,1);
    }
}

Scene.prototype.draw = function()
{
    this.context.clearRect(0, 0, this.width, this.height);
    for(var i = 0;i < this.actors.length; i++)
    {
        this.actors[i].draw();
    }
}

//-------------------------------ACTOR CLASS-------------------------------//

function Actor(scene, x, y)
{
    this.scene = scene;
    this.x = x;
    this.y = y;
    scene.register(this);
}

Actor.prototype.moveTo = function(x, y)
{
    this.x = x;
    this.y = y;
    this.scene.draw();
}

Actor.prototype.exit = function()
{
    this.scene.unregister(this);
    this.scene.draw();
}

Actor.prototype.draw = function()
{
    var image = this.scene.images[this.type]; // how does this work???
    this.scene.context.drawImage(image, this.x, this.y);
}

Actor.prototype.width = function()
{
    return this.scene.images[this.type].width;
}

Actor.prototype.height = function()
{
    return this.scene.images[this.type].height;
}

//-----------------------------SPACESHIP CLASS------------------------------//

function Spaceship(scene, x, y)
{
    Actor.call(this, scene, x, y);
}

Spaceship.prototype = Object.create(Actor.prototype);

Spaceship.prototype.left = function()
{
    this.moveTo(Math.max(this.x - 10, 0), this.y);
}

Spaceship.prototype.right = function()
{
    var maxWidth = this.scene.width - this.width();
    this.moveTo(Math.min(this.x + 10, maxWidth), this.y);
}

Spaceship.prototype.type = "Spaceship"; 
```

我的问题是，对于这个宇宙飞船示例或可能出现的任何其他演员对象，您如何将图像插入到场景构造函数中？它在书中非常含糊地说要创建一个“数据表”，但我不知道该怎么做。如果我想利用这个类，我想我必须做这样的事情：

```
var scene = new Scene(ctx,800,600, //not sure here)
var spaceship = new Spaceship(scene,10,10);
scene.draw(); 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:26:50.060

您的 Actor 构造函数似乎缺少一个`type`字段。type 字段是您必须传递到场景中的图像数组的标识符。

换句话说，您需要从类型/ID 到图像的映射。

```
Actor.prototype.draw = function()
{
    var image = this.scene.images[this.type]; // how does this work???
    this.scene.context.drawImage(image, this.x, this.y);
} 
```

上面的函数通过访问这个演员的类型（这是一个唯一的标识符）从图像数组中获取图像数据。然后将图像数据传递给 drawImage 函数。

为了使它起作用，每个演员都需要一个`type`，所以我更改了以下构造函数：

```
// Added 'type' property to Actor
function Actor(scene, type, x, y)
{
    this.scene = scene;
    this.type = type;
    this.x = x;
    this.y = y;
    scene.register(this);
}

// Add the image type of this actor
function Spaceship(scene, x, y)
{
    Actor.call(this, 'spaceShipImageId', scene, x, y);
} 
```

在设置场景时，您需要传入一个图像数据对象（但是图像数据是存储的）。

这是一个例子：

```
var imageData = {'spaceShipImageId': 'IMAGE_DATA...', 'planetImageId': 'DIFFERENT_IMAGE_DATA'};
var scene = new Scene(ctx, 800, 600, imageData);
var spaceship = new Spaceship(scene, 10, 10);
scene.draw(); 
```

每次创建新演员时，它都会自动注册到特定场景。该`scene.draw()`方法简单地绘制每个演员的图像（基于它的`type`属性）。

希望有帮助。

# jquery - 使用 jquery 片段移动嵌套的 li 元素

> ID：15403512
> 
> 赞同：1
> 
> 时间：2013-03-14T07:30:01.167
> 
> 标签：jquery, list, move

```
<ul>
    <li><span> Level 1 </span>
         <ul>
             <li><span>Level 2</span> 
              <ul>
                   <li><span>Level 3</span></li>
                   <li><span>Level 3</span></li>
               </ul>
              </li>
           </ul>
         </li>
      <li><span> Level 1 </span>
         <ul>
             <li><span>Level 2</span></li>
          </ul>
      <li>
</ul> 
```

在上述格式中，我有一个列表项。我需要选择一个 li 并在单击按钮时将其向上或向下移动。但是我在移动嵌套列表时遇到了问题。内里应该可以在内部移动，而外里也应该和内里一起移动。任何帮助！

我在用

```
 selected.prev().before(selected); //for up
     selected.next().after(selected);   // for down 
```

但一直只有李主一个人在动。我不知道如何单独让孩子们在内部移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:01:28.693

这是因为每次单击内部“li”时，您的事件都会冒泡，并且完整的 li 向上移动而不是子元素。

使用[event.stopPropogation()](http://api.jquery.com/event.stopPropagation/)并将其绑定到单击您的孩子“li”时的事件

# html - 我的 div 没有对齐

> ID：15403513
> 
> 赞同：-2
> 
> 时间：2013-03-14T07:30:04.253
> 
> 标签：html, css

我里面有一个 div class="first-div" 和两个 div 标签。我正在尝试同时进行 div 对齐。

我的代码在这里：- HTML 代码

```
<div class="first-div">
      <div id="myCarousel" class="carousel slide">
        <div class="carousel-inner">
          <div class="item active">
            <img src="img/featured/1.jpg" alt="">
            <div class="carousel-caption">
              <h4>First Thumbnail label</h4>
              <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </div>
          </div>
          <div class="item">
            <img src="img/featured/2.jpg" alt="">
            <div class="carousel-caption">
              <h4>Second Thumbnail label</h4>
              <p>Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi porta gravida at eget metus. Nullam id dolor id nibh ultricies vehicula ut id elit.</p>
            </div>
          </div>
        </div>
        <a class="left carousel-control" href="#myCarousel" data-slide="prev"><img src="img/arrow.png" alt="Arrow"></a>
        <a class="right carousel-control" href="#myCarousel" data-slide="next"><img src="img/arrow2.png" alt="Arrow"></a>
      </div>
     <div class="ad-space">
    <img src="img/Cinderella.jpg" height="210px" width="360px" alt="ad-space">
    </div>

    </div> 
```

CSS 代码

```
 .carousel {
  position: relative;
   width:796px;

  line-height: 1;
  -moz-box-shadow: 2px 2px 2px #888;
  -webkit-box-shadow: 10px 10px 5px #888;
   box-shadow: 0 2px 2px #7d7d7d;
  }
  .first-div{
   position: relative;
   width:100%;
   margin-bottom: 18px;
   margin-top:15px;
   line-height: 1;
   }
  .ad-space{
   position: relative;

   height:220px;
   float:right;
   padding-left:3px;

    }
   .carousel-inner {
    position: relative;
     width: 100%;
     overflow: hidden;
     }

    .carousel .item {
    position: relative;
     display: none;
     -webkit-transition: 0.6s ease-in-out left;
         -moz-transition: 0.6s ease-in-out left;
        -ms-transition: 0.6s ease-in-out left;
          -o-transition: 0.6s ease-in-out left;
             transition: 0.6s ease-in-out left;
         }

  .carousel .item > img {
     display: block;
      line-height: 1;
      }

    .carousel .active,
    .carousel .next,
    .carousel .prev {
     display: block;
        }

     .carousel .active {
          left: 0;
         }

      .carousel .next,
      .carousel .prev {
       position: absolute;
       top: 0;
       width: 100%;
        }

    .carousel .next {
     left: 100%;
       }

    .carousel .prev {
    left: -100%;
      }

     .carousel .next.left,
     .carousel .prev.right {
        left: 0;
        }

       .carousel .active.left {
         left: -100%;
          }

          .carousel .active.right {
           left: 100%;
            }

          .carousel-control {
           position: absolute;
          top: 40%;
          left: 15px;
          width: 40px;
          height: 40px;
          opacity: 0.3;
            filter: alpha(opacity=30);
            }

          .carousel-control.right {
          right: 15px;
           left: auto;
           }

         .carousel-control:hover {
         opacity: 1;
         filter: alpha(opacity=75);
           }

         .carousel-caption {
        position: absolute;
        right: 0;
         bottom: 0;
          left: 0;
         padding: 10px 15px 5px;
          background: #333333;
          background: rgba(0, 0, 0, 0.75);
         }

        .carousel-caption h4,
        .carousel-caption p {
         color: #ffffff;
          } 
```

这是响应式模板，所以我将 div class="first-div" 宽度设置为 100%，它采用前一个容器类的宽度（宽度：1200px）。

使用代码在 div class="first-div" 中对齐两个 div。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:47:24.073

只需将`.carousel`类属性更改为以下内容：

```
.carousel {
    position: absolute;
    top:0;
    left:0;
    right:363px;  /* 350px + 3px (width + padding) of .ad-space class */
    line-height: 1;
    -moz-box-shadow: 2px 2px 2px #888;
    -webkit-box-shadow: 10px 10px 5px #888;
    box-shadow: 0 2px 2px #7d7d7d;
} 
```

[**工作箱**](http://jsbin.com/ufubod/1/edit)

# android - 绘制“新项目数”的最佳方法是什么

> ID：15403514
> 
> 赞同：0
> 
> 时间：2013-03-14T07:30:04.357
> 
> 标签：android, android-layout, android-view

我需要实现这个模型![在此处输入图像描述](../Images/b2bea9d330f16e0398028ab498182507.png)

灰色徽标没有问题。它是 TableLayout 中带有 PNG 文件的 TextView。

但是，我不知道如何在一个角上放一个小绿色圆圈。这个圆圈的意思是“有新消息，需要你注意什么”。它可以是，也可以不是。它可以包含不同的数字。

我的想法 - 用圆圈（我也有 PNG）和数字绘制 MyView。但是如何计算“父母”角落的坐标？

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:46:18.800

您可以使用[`ViewBadger`](https://github.com/jgilfelt/android-viewbadger)允许您用几行代码执行此类操作的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:02:38.397

您可以使用`RelativeLayout`将新项目计数器放在灰色图标的角落上方。例如，以下 xml 是布局中的单个单元格：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <ImageView
        android:id="@+id/gray_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:background="@drawable/some_gray_icon" />
    <TextView
        android:id="@+id/new_items_counter"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@id/gray_icon"
        android:layout_alignTop="@id/gray_icon"
        android:background="@drawable/green_circle_icon"
        android:text="2"
        android:textColor="@android:color/white"
        android:textSize="16sp" />
</RelativeLayout> 
```

如果您想将计数器向上或更多向右移动，请使用具有负值的边距。

```
android:layout_marginTop="-5dp"
android:layout_marginRight="-5dp" 
```

使用这种方法，您必须从代码中更新计数器值和可见性。

# php - 如何使用 php 发送超过 2 封电子邮件？

> ID：15403516
> 
> 赞同：0
> 
> 时间：2013-03-14T07:30:25.413
> 
> 标签：php, email

我想同时为两个不同的用户发送两封电子邮件。我正在使用 php 邮件功能。下面是代码。

```
 Send_Mail('abc@example.com,abc2@example.com','Welcome',$message); 
```

当我将它发送给单个用户时，它工作正常。但是当我添加两个邮件地址时它没有工作.. 有没有其他方法可以解决这个问题？？？帮帮我。。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:36:59.077

试试这个：

```
$recipients = array('abc@example.com','abc2@example.com');
foreach ($recipients as $to) {
    Send_Mail($to,'Welcome',$message);
} 
```

或者

```
$to = 'abc@example.com,abc2@example.com';
Send_Mail($to,'Welcome',$message); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:33:57.883

```
$emailArray = array ('abc@example.com','abc2@example.com');
for($i=0;$i<count($emailArray);$i++)
{
Send_Mail($emailArray[$i],'Welcome',$message);
} 
```

现在您可以发送无限的电子邮件...基于阵列数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:36:02.693

邮件功能在使用多个 id 时工作得非常好，在发送邮件时检查 smtp 日志。可能是其他东西正在破坏。

更多参考： http: [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T07:39:36.040

试试这个：

// 多个收件人

$to = 'abc@example.com' 。', '; // 注意逗号

$to .= 'def@example.com';

send_Mail($to, 'Welcome', $message);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T07:38:43.570

如果您将电子邮件发送到多个地址，您可能需要在标题中指定收件人。

```
$to = 'abc@example.com' . ', ' . 'abc2@example.com';
$subject = 'Welcome';

// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: ' . $to . "\r\n";
//$headers .= 'From: Someone <someone@example.com>' . "\r\n";
//$headers .= 'Cc: otherperson@example.com' . "\r\n";
//$headers .= 'Bcc: theotherperson@example.com' . "\r\n";

Send_Mail($to, $subject, $message, $headers); 
```

# asp.net - 如何将控制器上的未经授权的 Ajax 请求重定向到登录页面？.

> ID：15403519
> 
> 赞同：6
> 
> 时间：2013-03-14T07:30:37.317
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-4

```
[Authorize]
public class MyController : BaseController
{
    [PermissionAuthorize]
    public ActionResult GridData()
    {
        return Json(data, JsonRequestBehavior.AllowGet);
    }
} 
```

我创建了 PermissionAuthoize 属性来检查用户对特定操作的权限。我有一个问题在用户会话或票证到期后，如果用户向控制器发送 ajax 请求，则授权属性拒绝请求并作为 html 登录表单返回给用户。该区域用户认为应用程序没有执行。它显示了对用户的不良影响。

所以，如果他们在票证到期时发送 ajax 请求，我想重定向到用户登录页面。

我可以为控制器创建另一个授权属性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T07:47:42.370

您需要做的第一件事是配置表单身份验证模块以在抛出 401 时停止重定向到登录页面。Phil Haack 写了一篇[`nice article`](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)关于如何实现这一点的文章。

完成此操作后，您将能够在客户端上捕获 401 HTTP 状态代码。因此，您可以编写一个[`global ajax handler`](http://api.jquery.com/category/ajax/global-ajax-event-handlers/)在从服务器发送 401 状态代码时重定向到登录页面的代码（当表单身份验证票证过期或用户根本未经过身份验证时会发生这种情况）：

```
$(document).ajaxError(function(event, jqxhr, settings, exception) {
    if (jqxhr.status == 401) {
        // unauthorized
        window.location.href = '/logon';
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T07:44:54.873

以下代码可能对您有所帮助：

```
$.ajax({
    url: 'url',    
    statusCode: {
        404: function() {
            //page not found
        },
        200: function() {
            //ok, do your stuff
        },
        302: function() {
            //redirect - check if url contains login and do redirect            
        }
    }
}) 
```

基本上，您只能检查重定向并在`success/error`回调中执行常规操作，但是当您获得重定向 http 标头时，您将 window.location.href 更改为所需的登录页面

# python - 我在哪里放置 IPython 配置文件？

> ID：15403523
> 
> 赞同：15
> 
> 时间：2013-03-14T07:30:53.823
> 
> 标签：python, emacs, editor, ipython

我一直在尝试将我的 %edit 编辑器设置为 Emacs，但进展非常缓慢。

IPython 0.13 文档不清楚如何实际配置它。它告诉我通过添加将 EDITOR 设置为所需的编辑器（在我的情况下为“emacsclient”）

```
c = get_config()
c.InteractiveShell.editor = 'emacsclient' 
```

到我的 ipython 文件夹中的配置。

但是，我找不到任何这样的文件夹。我花了很长时间四处寻找如何设置 IPython 环境变量，但只找到了相关的片段。使用什么代码。用于启动脚本的 .py 和 .ipy 文件之间的区别。等等。

我正在使用 Ubuntu 12.10。我将 IPython 0.13 的配置文件放在哪里？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T12:17:49.837

我有`c.TerminalInteractiveShell.editor = 'emacsclient'`，`~/.config/ipython/profile_default/ipython_config.py`它有效。

如果您无法找到配置位置，请使用`ipython locate profile`命令：http: [//ipython.org/ipython-doc/rel-0.13/whatsnew/version0.13.html#new-top-level-locate-command](http://ipython.org/ipython-doc/rel-0.13/whatsnew/version0.13.html#new-top-level-locate-command)

但我认为设置编辑器的最简单方法是`export EDITOR=emacsclient`在你的*shell*设置中使用类似的东西（例如`~/.bashrc`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-22T20:55:10.750

根据[文档](https://ipython.readthedocs.io/en/stable/config/intro.html)，运行`ipython profile create`它会为您创建一个包含所有选项的文件（已注释掉）并告诉您它在哪里。默认情况下，它位于`~/.ipython/profile_default/ipython_config.py`.

# ios - ios 6核心数据“CoreData：错误：严重的应用程序错误。”

> ID：15403524
> 
> 赞同：3
> 
> 时间：2013-03-14T07:30:55.267
> 
> 标签：ios, core-data, ios6

行，

这是我第一次在 stackoverflow 上发帖。几个小时以来，我一直把头撞在墙上。我*讨厌*输入问题；你可以相信我已经竭尽全力地尝试自己解决这个问题。我已经对以下错误进行了一些研究，但是我仍然无法解决它。话虽这么说，我是一个新手 ios 6 开发人员，并且对核心数据有疑问。错误是：

“CoreData：错误：严重的应用程序错误。在核心数据更改处理期间捕获了异常。这通常是 NSManagedObjectContextObjectsDidChangeNotification 观察者中的错误。ALL 或 ANY 运算符的左侧必须是 NSArray 或 NSSet。带有 userInfo （空值）”

现在，我的数据模型如下：我有两个实体（一对多关系）。关系是行为 -> 事件，其中有 0 到无限次事件发生。

我做的是这个；

在行为表视图控制器中，我填充了一个 NSFetchedResultsController，如下所示：

```
- (NSFetchedResultsController *)fetchedResultsController {

   NSLog(@"Started Fetching In Behaviors...");

  if (fetchedResultsController != nil) {
    return fetchedResultsController;
  }

  AppDelegate *appDelegate =
  [[UIApplication sharedApplication] delegate];

  NSManagedObjectContext *context =
  [appDelegate managedObjectContext];

  NSEntityDescription *entityDesc =
  [NSEntityDescription entityForName:@"Behavior"
         inManagedObjectContext:context];
  [fetchRequest setEntity:entityDesc];

  NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:NO];
  NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
  [fetchRequest setSortDescriptors:sortDescriptors];

  NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:context sectionNameKeyPath:nil cacheName:nil];
  aFetchedResultsController.delegate = self;

  self.fetchedResultsController = aFetchedResultsController; 
  return fetchedResultsController;

} 
```

所有这一切都很好，很帅。该表被填充没有问题。现在，当我选择一个单元时，我会做什么，我实例化另一个uitaiteViewCell Controller，

```
{
    NSLog(@"A value was selected from the table view");
    IncidentsViewController *vc = [[IncidentsViewController alloc] initWithStyle:UITableViewStylePlain];
    vc.managedObject = [self.fetchedResultsController objectAtIndexPath:indexPath];
    vc.parentRelationship = [self.fetchedResultsController objectAtIndexPath:indexPath];    
    NSLog(@"Managed set on Incidents View Controller: %@", vc.managedObject);
    NSString* name = [[NSString alloc] initWithString:[[vc.managedObject valueForKey:@"name"] description]];
    NSLog(@"Name of selected object: %@", name);
    [self.navigationController pushViewController:vc animated:YES];
} 
```

上面的下一个 IncidentsViewController 具有基本完全相同的 fetchedResultsController。为了完整起见，我将其粘贴。

```
- (NSFetchedResultsController *)fetchedResultsController2 {

    NSLog(@"Started Fetching Resuts from Incidents View Controller...");

    if (fetchedResultsController2 != nil) {
        NSLog(@"fetchedResultsController not null");
        return fetchedResultsController2;
    }

    AppDelegate *appDelegate =
    [[UIApplication sharedApplication] delegate];

    NSManagedObjectContext *context =
    [appDelegate managedObjectContext];

    NSEntityDescription *entityDesc =
    [NSEntityDescription entityForName:@"Incident"
                inManagedObjectContext:context];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    [fetchRequest setEntity:entityDesc];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"when" ascending:NO];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    NSLog(@"parent relationship: %@", self.parentRelationship);
    NSLog(@"managed object: %@", self.managedObject);

    [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"ANY relationship == %@", self.parentRelationship]];

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:context sectionNameKeyPath:nil cacheName:nil];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController2 = aFetchedResultsController;

    /*
     self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];
     self.fetchedResultsController.delegate = self;
     */

    NSLog(@"Ending fetching results from incidents controller...");
    return fetchedResultsController2;
} 
```

我的问题很简单：当我有线路时

```
 [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"ANY relationship == %@", self.parentRelationship]]; 
```

对核心数据有一点了解的人是否有可能对此发表意见。我已将我的完整项目发布到以下 URL：

[https://webshare.uchicago.edu/users/dansully/Public/Dirty.zip](https://webshare.uchicago.edu/users/dansully/Public/Dirty.zip)

有问题的行是 IncidentsViewController.m 中的第 310 行。

非常感谢您帮助我回答我的问题。我将继续努力，如果我找到解决方案，我会报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T08:40:30.420

`ANY`如果事件只能有零个或一个父关系，您可能想尝试从谓词中删除。这是代码：

```
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"relationship == %@", self.parentRelationship]]; 
```

# c# - 相同类型的不同对象

> ID：15403528
> 
> 赞同：0
> 
> 时间：2013-03-14T07:31:16.643
> 
> 标签：c#, .net, wcf

我有一堂课

> 购物车索引视图模型

在我的项目 SportsStore 中。我正在调用 WCF 服务，因此我想传递 CartIndexViewModel 的对象，因此我在 WCF 项目中复制了所需的 .dll 文件，但由于它说存在类型不匹配，因此存在冲突。

> SportsStore.WebUI.ServiceReference.CartIndexViewModel SportsStore.WebUI.Models.CartIndexViewModel

这两个类是相同的，具有相同的属性和方法，但在不同的项目中，我如何从发送端传递对象，即 SportsStore.WebUI.Models.CartIndexViewModel 和接收端，即 SportsStore.WebUI.ServiceReference.CartIndexViewModel 接收对象。我没有太多知识，我尝试在这方面做很多功课，但找不到解决方案。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:35:06.597

首先添加对库的引用，然后生成服务引用。确保选中“重用类型”。

# iphone - NSTimer 停止 iphone 声音？

> ID：15403529
> 
> 赞同：0
> 
> 时间：2013-03-14T07:31:17.233
> 
> 标签：iphone, ios, objective-c, jailbreak

我必须在我的应用程序中的特定时间间隔后调用一个函数调用 myfunc 并且这个 func 永远运行。但是，问题是每当我使用以下代码时，我的 iphone 声音就会消失。

```
self.now = [NSDate date] ;
    self.timer = [[NSTimer alloc] initWithFireDate:self.now
                                          interval:100
                                            target:self
                                          selector:@selector(myfunc)
                                          userInfo:nil
                                           repeats:YES] ;
    self.runLoop = [NSRunLoop currentRunLoop];
    [runLoop addTimer:self.timer forMode:NSDefaultRunLoopMode];
    [self.runLoop runUntilDate:[NSDate dateWithTimeIntervalSinceNow:10000]]; 
```

只有铃声有效。所有其他声音停止工作。像键盘锁定声音和让您调整 iphone 音量的音量条也消失了。请告诉我我做错了什么会损坏 iphone 声音。

我很确定这是停止 iphone 声音的一段代码。当我评论它时，声音开始起作用。有人知道这种方法的解决方案吗？如果没有，是否有人知道执行相同功能的另一种方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T07:51:38.470

`NSTimer`当应用程序处于后台状态时暂停。

你必须启动一些后台任务来做你想做的事。但即便如此，您将被限制在应用程序进入后台后的一定时间内。

真正的后台行为仅适用于位置跟踪、VoIP 或音频应用程序。其他应用程序必须面临限制：一旦进入后台，您将获得一定的时间来完成您开始执行的任务`beginBackgroundTaskWithExpirationHandler:`(backgroundTimeRemaining)。

整个事情在 iOS 应用程序编程指南，在后台执行代码中进行了描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:51:02.450

试试这个

```
NSTimer *myTimer = [NSTimer scheduledTimerWithTimeInterval: 100.0 
                                                    target: self 
                                                  selector: @selector(myFunc) 
                                                  userInfo: nil 
                                                   repeats: YES];

[[NSRunLoop currentRunLoop] addTimer: myTimer forMode: NSRunLoopCommonModes]; 
```

// 选择器实现

```
- (void) myFunc {      
    NSLog(@"myFunc");
} 
```

# google-ads-api - Google Adwords 关键字工具服务

> ID：15403534
> 
> 赞同：-1
> 
> 时间：2013-03-14T07:31:58.580
> 
> 标签：google-ads-api

我想知道，是否可以在没有任何开发人员令牌的情况下从 Google Ad Words 访问关键字提示。我有我的 MCC 帐户，但没有任何开发者令牌。

我只想通过电子邮件、密码、客户 ID 访问来自 Google Adwords 的关键字提示。

我做了很多研究，但一无所获，有没有人有一些想法。我正在为我的网站开发关键字建议工具，该工具需要使用 Java 技术从 Google Adwords 访问关键字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:19:44.010

没有开发者令牌就无法访问 AdWords API。Google 需要知道谁在使用它，以防他们需要与您联系，并确保您遵守他们[的服务条款](https://developers.google.com/adwords/api/docs/terms)。如果您申请一个仅用于关键字工具的令牌，您将遇到问题，因为 Google 要求您实现[最少的功能集](https://developers.google.com/adwords/api/docs/requirements)，并且您的工具需要提供整个列表才能使用关键字工具。 .

# javascript - 通过key查找json的索引号

> ID：15403535
> 
> 赞同：0
> 
> 时间：2013-03-14T07:32:03.103
> 
> 标签：javascript, jquery, json

说如果我有一个像这样的 json 对象：

```
{
  "items":[
      {"key_1": "value 1"},
      {"key_2": "value 2"},
      {"key_3": "value 3"},
      {"key_4": "value 4"},
      {"key_5": "value 5"},
      {"key_6": "value 6"},
      {"key_7": "value 7"},
      {"key_8": "value 8"}
  ]
} 
```

有没有办法让我获得哪个索引是我提供的 key_id：

```
key = "key_3";
index_number = find index of key; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:45:21.053

尝试这个 ：

```
var obj = {
  "items":[
      {"key_1": "value 1"},
      {"key_2": "value 2"},
      {"key_3": "value 3"},
      {"key_4": "value 4"},
      {"key_5": "value 5"},
      {"key_6": "value 6"},
      {"key_7": "value 7"},
      {"key_8": "value 8"}
  ]
};

function getIndexOfKey(key){
    for (var i = 0; i < obj.items.length; i++)
    {
        if (typeof(obj.items[i][key]) != 'undefined')
        {
            return i;
        }
    }    
    return -1;
} 
```

你可以在这里看到它的实际效果：http: [//jsfiddle.net/GTXBU/](http://jsfiddle.net/GTXBU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:44:00.610

你可以尝试这样的事情：

```
var obj = {
"items":[
  {"key_1": "value 1"},
  {"key_2": "value 2"},
  {"key_3": "value 3"},
  {"key_4": "value 4"},
  {"key_5": "value 5"},
  {"key_6": "value 6"},
  {"key_7": "value 7"},
  {"key_8": "value 8"}
  ]
}
var key = "key_3";
for(var index in str.items){
if(str.items[index][key]!=undefined) break;
}
console.log(index); 
```

# javascript - 内部 html 在 ie 中不起作用，但在 ff 中起作用

> ID：15403537
> 
> 赞同：1
> 
> 时间：2013-03-14T07:32:17.420
> 
> 标签：javascript, jquery

```
if (xmlHttp.readyState==4 || xmlHttp.readyState=="complete")
     {
        var Buffer= xmlHttp.responseText;     
        Buffer= Buffer.split("#%~");    
              document.getElementById("Template").innerHTML = Buffer[0];
              document.getElementById("Template1").innerHTML = Buffer[1];
              alert(Buffer+"Buffer"); 
```

上面的代码在ie中不起作用，但在ff中可以正常工作。我什至尝试了其他选项，但无法得到它。alert 在 ie & ff 中显示相同的值，但它没有用，因为它不在 ie 中打印。谁能帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:01:51.073

Internet Explorer 没有标准`XMLHttpRequest`对象，因此您必须使用`ActiveXObject`

**来自[mdn的片段](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)**

```
var httpRequest;
if (window.XMLHttpRequest) { // Mozilla, Safari, ...
    httpRequest = new XMLHttpRequest();
} else if (window.ActiveXObject) { // IE 8 and older
    httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
} 
```

这确保 httpRequest 也在 IE 中工作。附带说明一下，您可能希望使用 insted `console.log`，`alert`然后在您的开发人员工具中获得不错的输出（Windows 上的 F12）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:02:11.277

您没有说明这一点，但您需要`xmlHttp`为某些浏览器创建不同的对象 - 尤其是 Internet Explorer：

```
var xhttp = function(){
  var obj = null, er = null;
  if(typeof XMLHttpRequest != 'undefined'){
    obj = new XMLHttpRequest();
  }
  else {
    try{
      obj = new ActiveXObject('Msxml2.XMLHTTP');
    }catch(er){
      try{
        obj = new ActiveXObject('Microsoft.XMLHTTP');
      }catch(er){
        obj = null;
      }
    }
  }
  return obj;
} 
```

以下代码的用法是：

```
xmlHttp = xhttp(); 
```

从那时起，您可以`xmlHttp`以与您大致相同的方式使用，有一些陷阱/差异需要注意，这就是使用 Adrian 所说的库很好的原因。但是它甚至更好首先了解潜在的差异。

# c# - 同步或重新加载后更改的 Revit API 2013 文档看不到新添加或更改的元素

> ID：15403539
> 
> 赞同：4
> 
> 时间：2013-03-14T07:32:19.377
> 
> 标签：c#, revit, revit-api

我在两台不同机器上使用中央文件模型和两个本地文件时遇到问题。当我在一台机器上添加一个元素，进行同步然后在另一台机器上重新加载时，API 看不到这个带有 DocumentChanged 事件的新添加元素。

这是代码：

```
private void DocumentChanged(object sender, Autodesk.Revit.DB.Events.DocumentChangedEventArgs e)
    {
        switch(e.Operation.ToString())
        {
            case "TransactionUndone":
            case "TransactionRedone":
            case "TransactionCommitted":

                this.transactionEventHandler.HandleEvent(sender, e, this.persistance, this.elementMutationHandler);

                break;
        }            
    } 
```

在此代码之后，我立即执行以下操作：

```
ICollection<ElementId> deletedElements = e.GetDeletedElementIds();
ICollection<ElementId> changedElements = e.GetModifiedElementIds();
ICollection<ElementId> addedElements = e.GetAddedElementIds(); 
```

问题是，对于已删除的元素，它可以完美地工作（在重新加载之后），但对于修改和添加的元素，它什么也不做。

在本地文件中添加或修改元素时，该代码可以完美运行，但这不是我所需要的。我需要处理将这些更改同步到中央文件的其他用户修改和添加的元素。

有谁知道我做错了什么，或者也许有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-06-20T12:49:16.847

我认为您需要添加`Attribute`

```
[Regeneration(RegenerationOption.Automatic)] 
```

# parsing - 如何使用 Clojure 读取/解析以下文本？

> ID：15403540
> 
> 赞同：1
> 
> 时间：2013-03-14T07:32:22.240
> 
> 标签：parsing, clojure

Text的结构是这样的；

```
Tag001
 0.1, 0.2, 0.3, 0.4
 0.5, 0.6, 0.7, 0.8
 ...
Tag002
 1.1, 1.2, 1.3, 1.4
 1.5, 1.6, 1.7, 1.8
 ... 
```

文件可以有任意数量的 TagXXX 事物，每个标签可以有任意数量的 CSV 值行。

==== 购买力平价。（对不起这些东西:-)

更多改进；现在我的 atom 笔记本电脑上 31842 行数据需要 1 秒左右，比原始代码快 7 倍。但是，C 版本比这快 20 倍。

```
(defn add-parsed-code [accu code]
  (if (empty? code)
    accu
    (conj accu code)))

(defn add-values [code comps]
  (let [values comps
        old-values (:values code)
        new-values (if old-values
                     (conj old-values values)
                     [values])]
    (assoc code :values new-values)))

(defn read-line-components [file]
  (map (fn [line] (clojure.string/split line #","))
       (with-open [rdr (clojure.java.io/reader file)]
         (doall (line-seq rdr)))))

(defn parse-file [file]
  (let [line-comps (read-line-components file)]
    (loop [line-comps line-comps
           accu []
           curr {}]
      (if line-comps
        (let [comps (first line-comps)]
          (if (= (count comps) 1) ;; code line?
            (recur (next line-comps)
                   (add-parsed-code accu curr)
                   {:code (first comps)})
            (recur (next line-comps)
                   accu
                   (add-values curr comps))))
        (add-parsed-code accu curr))))) 
```

==== PPS。

虽然我不明白为什么第一个比第二个快 10 倍，但不是 slurp，map 和 with-open 确实使阅读速度更快；虽然整个阅读/处理时间并没有减少（从 7 秒到 6 秒）

```
(time
 (let [lines (map (fn [line] line)
                  (with-open [rdr (clojure.java.io/reader
                                   "DATA.txt")]
                    (doall (line-seq rdr))))]
   (println (last lines))))

(time (let [lines
            (clojure.string/split-lines
             (slurp "DATA.txt"))]
        (println (last lines)))) 
```

==== PS。Skuro 的解决方案确实有效。但是解析速度不是那么快，所以我必须使用基于 C 的解析器（它在 1~3 秒内读取 400 个文件，而 clojure 确实需要 1~4 秒的单个文件；是的文件大小相当大）用于读取和仅为统计分析部分构建 DB 和 clojure。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T09:51:40.423

下面解析上述文件，保持任何值行分隔。如果这不是您想要的，您可以更改该`add-values`功能。解析状态保存在`curr`变量中，同时`accu`保存先前解析的标签（即，在找到“TagXXX”之前出现的所有行）。它允许没有标签的值：

**更新：**副作用现在封装在一个专用`load-file`函数中

```
(defn tag? [line]
  (re-matches #"Tag[0-9]*" line))

; potentially unsafe, you might want to change this:
(defn parse-values [line]
  (read-string (str "[" line "]")))

(defn add-parsed-tag [accu tag]
  (if (empty? tag)
      accu
      (conj accu tag)))

(defn add-values [tag line]
  (let [values (parse-values line)
        old-values (:values tag)
        new-values (if old-values
                       (conj old-values values)
                       [values])]
    (assoc tag :values new-values)))

(defn load-file [path]
  (slurp path))

(defn parse-file [file]
  (let [lines (clojure.string/split-lines file)]
    (loop [lines lines ; remaining lines 
           accu []     ; already parsed tags
           curr {}]    ; current tag being parsed
          (if lines
              (let [line (first lines)]
                (if (tag? line)
                    ; we recur after starting a new tag
                    ; if curr is empty we don't add it to the accu (e.g. first iteration)
                    (recur (next lines)
                           (add-parsed-tag accu curr)
                           {:tag line})
                    ; we're parsing values for a currentl tag
                    (recur (next lines)
                           accu
                           (add-values curr line))))
              ; if we were parsing a tag, we need to add it to the final result
              (add-parsed-tag accu curr))))) 
```

我对上面的代码不是很兴奋，但它确实完成了工作。给定一个文件，如：

```
Tag001
 0.1, 0.2, 0.3, 0.4
 0.5, 0.6, 0.7, 0.8
Tag002
 1.1, 1.2, 1.3, 1.4
 1.5, 1.6, 1.7, 1.8
Tag003
 1.1, 1.2, 1.3, 1.4
 1.1, 1.2, 1.3, 1.4
 1.5, 1.6, 1.7, 1.8
 1.5, 1.6, 1.7, 1.8 
```

它产生以下结果：

```
user=> (clojure.pprint/print-table [:tag :values] (parse-file (load-file "tags.txt")))
================================================================
:tag   | :values
================================================================
Tag001 | [[0.1 0.2 0.3 0.4] [0.5 0.6 0.7 0.8]]
Tag002 | [[1.1 1.2 1.3 1.4] [1.5 1.6 1.7 1.8]]
Tag003 | [[1.1 1.2 1.3 1.4] [1.1 1.2 1.3 1.4] [1.5 1.6 1.7 1.8] [1.5 1.6 1.7 1.8]]
================================================================ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T00:17:59.400

这可以使用 partition-by 函数来完成。阅读起来可能有些神秘，但可以轻松提高可读性。这个函数在我的 mini-mac 上执行了大约 500 毫秒。

首先，我使用以下函数创建了测试数据。

```
(defn write-data[fname]
   (with-open [wrtr (clojure.java.io/writer fname) ]
     (dorun 
        (for [ x (take 7500 (range)) ]
          (do
             (.write wrtr (format "Tag%010d" x))
             (.write wrtr "
                            1.1, 1.2, 1.3, 1.4
                            1.1, 1.2, 1.3, 1.4
                            1.5, 1.6, 1.7, 1.8
                            1.5, 1.6, 1.7, 1.8
                           " ))))))

(write-data "my-data.txt")

; "a b c d " will be converted to [ a b c d ]
(defn to-vec[st]
   (load-string (str "[" st "]")))

(defn my-transform[fname]
   (let [tag (atom {:tag nil})]
      (with-open [rdr (clojure.java.io/reader fname)]
         (doall 
           (into {} 
               (map 
                  (fn[xs] {(first xs) (map to-vec (rest xs))}) 
                     ( partition-by 
                          (fn[y] 
                             (if(.startsWith 
                                  (str y) "Tag") 
                                  (swap! tag assoc :tag y) @tag)) 
                       (line-seq rdr))))))))

(time (count (my-transform "my-data.txt")))
;Elapsed time: 517.23 msecs 
```

# sql - 两个给定日期之间的天数

> ID：15403544
> 
> 赞同：1
> 
> 时间：2013-03-14T07:32:35.377
> 
> 标签：sql, hibernate, date, hql

如何仅使用 HQL 严格计算截止日期之间的天数。

假设`Current_Date`和`Expiry_Date`是从数据库中获取的两个日期。我想计算 和 之间的天`Current_Date`数`Expiry_Date`。

另外，如果有任何值，我将如何处理`null`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:34:58.357

```
DECLARE @startdate datetime2 = '2013-12-05 12:10:09.3312722';
DECLARE @enddate datetime2 = '2013-12-04 12:10:09.3312722'; 
SELECT DATEDIFF(day, isnull(@startdate,GetDate()), isnull(@enddate,GetDate())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:26:50.693

我想出了一个解决我的问题的方法。

`(extract(doy from bp.qhrIqamaexpirDate)-extract(doy from now()))`

`doy`表示一年中的某一天 (1 - 365/366)。

```
bp.qhrIqamaexpirDate : 2013-02-28 00:00:00.0

now() : 2013-03-14 14:53:12.051562

extract(doy from  bp.qhrIqamaexpirDate) : 59, extract(doy from now()) : 73 
```

# javascript - 帖子中的 Wordpress javascript 相对路径

> ID：15403545
> 
> 赞同：0
> 
> 时间：2013-03-14T07:32:44.480
> 
> 标签：javascript, wordpress, cocos2d-iphone

我有一个网站：XXXXXXXXX.XXXXXXX.com

我上传了一个带有js文件的目录：

XXXXXXX.XXXXXXX.com/JsTestFolder

其中的一些文件：XXXXXXXXX.XXXXXXX.com/JsTestFolder/index.html

XXXXXXX.XXXXXXX.com/JsTestFolder/boot-html5.js

XXXXXXX.XXXXXXX.com/JsTestFolder/cocos2d-html5.min.js

……

在 JsTestFolder 文件夹中，我有一个 index.html 包含一个画布标签

我可以通过访问 XXXXXXXX.XXXXXXX.com/JsTestFolder/index.html 成功运行演示

但现在我想将它（画布）嵌入到 wordpress 的帖子中。

所以我创建了一个包含内容的帖子：

```
<div style="......">
    <canvas id="gameCanvas" width="320" height="480"></canvas>
</div>
<script src="boot-html5.js"></script> 
```

它无法加载“boot-html5.js”文件，所以我将内容更改为：

```
<script src="/JsTestFolder/boot-html5.js"></script> 
```

这次“boot-html5.js”被成功加载了，但是~

boot-html5.js 的内容：

```
(function () {
    var d = document;
    var c = {
        COCOS2D_DEBUG:2, //0 to turn debug off, 1 for basic debug, and 2 for full debug
        //......
        tag:'gameCanvas', //the dom element to run cocos2d on
        SingleEngineFile:'cocos2d-html5.min.js',
        //...... 
```

您可以看到它使用相对路径引用了其他一些 js 文件，并且控制台显示错误：

```
http://XXXXXXXX.XXXXXXX.com/cocos2d-html5.min.js 404 (Not Found) 
```

好吧，文件在[http://XXXXXXXX.XXXXXXX.com/JsTestFolder](http://XXXXXXXX.XXXXXXX.com/JsTestFolder) ~

显然浏览器（？）将“ [http://XXXXXXXX.XXXXXXX.com/](http://XXXXXXXX.XXXXXXX.com/) ”作为根路径而不是“ [http://XXXXXXXX.XXXXXXX.com//JsTestFolder](http://XXXXXXXX.XXXXXXX.com//JsTestFolder) ”。

那么如何在不更改所有 js 文件以使用“绝对路径”的情况下让这个东西工作呢？

任何建议将不胜感激，thatnks :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:39:55.693

1）SingleEngineFile 在文件中使用的位置在哪里？

2）尝试改变

```
SingleEngineFile:'cocos2d-html5.min.js' 
```

至

```
SingleEngineFile:'/cocos2d-html5.min.js' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:15:35.583

尝试改变

```
<script src="/JsTestFolder/boot-html5.js"></script> 
```

至

```
<script src="../boot-html5.js"></script> 
```

或者

```
<script src="/boot-html5.js"></script> 
```

# php - Java EE 开发中的性能（编译、构建、加载、内存加载）

> ID：15403547
> 
> 赞同：0
> 
> 时间：2013-03-14T07:32:51.637
> 
> 标签：php, performance, jakarta-ee, build

我想问一个一直困扰我的问题

在php的开发中：项目的调试和构建只是一个 ctrl + s -> F5

但在 Java EE 项目的情况下（尤其是当我使用像 jsf spring 之类的 java 框架时）对托管 bean（如果是 JSF）或只是一个 java bean 类的简单更改..我必须等待加载上下文......

尽管PC足够强大并且偶尔会造成内存过载，但我还是花了很长时间

=> 这极大地降低了生产力和动力

（我认为大多数开发人员都不会抗拒它）

这个问题有没有解决办法？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:50:33.620

**PHP**

你保存一个文件。PHP 以文件作为源开始，它解释内容，构建操作码，执行，你得到结果。PHP 停止。

**Java EE**

你保存一个文件。您编译项目（一个文件中的更改可能会更改其他类文件）。您还可以启动应用程序服务器（昂贵）或执行上下文重新加载（成本较低）。这就像在每次 PHP 文件更改后重新启动 Apache。您让应用程序服务器保持运行，因此后续请求会很快。

但是为什么会遇到这么多麻烦呢？Java 需要重新加载应用程序，因为它不会在每个请求上解释每个类文件（就像 PHP 所做的那样），因此当发生更改时，整个应用程序都需要重新加载。另一个原因是 JVM 是一个高度优化的野兽，并且要具有出色的性能，您不能快速周转（优化本质上需要时间）。考虑在启用 OP 缓存的情况下运行 PHP，并为每个 PHP 文件更改进行预热。

对于小型应用程序，Java EE 中的重新加载非常便宜，但一旦应用程序增长，它就会变得更糟。一旦您使用了几个框架，那么在应用程序上下文重新加载时也会触发这些框架的初始化。

如果您想要类似 PHP 的开发体验，那么可以使用商业工具[JRebel](http://jrebel.com)。该工具将从更改的类文件中重新加载新的字节码，而不是进行上下文重新加载。

# java - 如何检查复选框是否在android应用程序中被选中或取消选中？

> ID：15403549
> 
> 赞同：1
> 
> 时间：2013-03-14T07:32:53.810
> 
> 标签：java, android, checkbox

我需要找到一种方法来检索使用下面列出的代码创建的复选框的选中状态：

```
for (int i = 0; i < cnt; i++) {
                    cb = new CheckBox(getApplicationContext());
                    TextView txt = new TextView(getApplicationContext());
                    final LinearLayout ll2 = new LinearLayout(
                            PollActivity.this);
                    ll2.setOrientation(LinearLayout.HORIZONTAL);
                    ll2.addView(txt);
                    ll2.addView(cb);
                    txt.setText(PersianReshape
                            .reshape(last_poll_array[i][1]));
                    txt.setTypeface(face);
                    ll.setGravity(Gravity.RIGHT);
                    ll2.setGravity(Gravity.RIGHT);
                    ll.addView(ll2);

                }
                sc.addView(ll); 
```

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T07:45:56.737

我认为您必须使用 for 循环来检查复选框是否被选中

```
cb.isChecked()==true; 
```

并且对于每个复选框，使用整数数组保存值，例如“0”代表真，“1”代表假。

您可以将其保存为文件、SharedPrefrences 或 CoreData，以便下次运行应用程序时它会保存相同的值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T07:40:58.587

你可以像这样检查你 ll2 的孩子：

```
boolean oneChecked = false;
View v = null;
for(int i=0; i<ll2.getChildCount(); i++) {
    v = ll2.getChildAt(i);
    if (v instanceof CheckBox) {
        if (((CheckBox) v).isChecked()) {
            oneChecked = true;
            break;
        }
    }
}
if (oneChecked) {
    // Do whatever you like if one CheckBox is checked
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-10T06:20:09.997

检查文件：

```
if (checkBox.isChecked()) {
             checkBox.setChecked(false);
         } 
```

查看此链接：[https ://developer.android.com/reference/android/widget/CheckBox.html](https://developer.android.com/reference/android/widget/CheckBox.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-27T09:24:39.170

此代码使您能够存储复选框的 ID。我开发了迈克尔施密特的代码。非常感谢，迈克尔！！

```
ArrayList<Integer> check = new ArrayList<Integer>();

for(int k=0;k<ll.getChildCount();k++){
            View v = ll.getChildAt(k);
            if(v instanceof CheckBox){
                if(((CheckBox)v).isChecked()){
                    check.add(ll.getChildAt(k).getId());
                }
            }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-01T07:41:07.103

尝试这个：

```
 if(chckbxcuger.isSelected())rezultatas.setText("cuger");
    if(chckbxmilk.isSelected())rezultatas.setText("milk"); 
    if(chckbxCukrus.isSelected()&&chckbxPienas.isSelected())rezultatas.setText("cuger and milk"); 
```

# function - VBA Excel将值从主子链接到其调用函数

> ID：15403551
> 
> 赞同：1
> 
> 时间：2013-03-14T07:33:04.657
> 
> 标签：function, excel, vba

我对 excel 中的 vba 仍然很陌生，并且在解决这个问题时遇到了困难。我真的很希望有人能告诉我我的代码哪里出错了，并为我提供尽可能简化的解决方案。非常感谢&真的很感激！

**问：** 贷款申请是根据客户的收入来评估的。我们应该使用 For-Next 函数和 IF 语句来显示以下批准状态：

客户的收入与各自的地位

> 60,000 以特价批准；>40,000 以标准费率批准；>24,000 等待经理批准；其他情况 拒绝申请

从excel的第2行开始，B列包含“客户收入”数字，Excel中C列包含“贷款申请状态”数字。

我的代码运行良好，如下所示：

```
Sub ForNext_If()

'CINCOME = Customer Income,Loan status= the application status, x = the row number, FinalRow= last row number 

x = 2
For x = 2 To 11 Step 1

CINCOME = Cells(x, 2).Value

If CINCOME > 60000 Then
LOANSTATUS = "Approve with special rates"

ElseIf CINCOME > 40000 Then
LOANSTATUS = "Approve with standard rates"

ElseIf CINCOME > 24000 Then
LOANSTATUS = "Await manager's approval"

Else
LOANSTATUS = "Reject application"

End If

Cells(x, 4) = LOANSTATUS

Next

End Sub 
```

但是，当我尝试使用 call 功能时，

```
Sub ForNext_If()

x = 2
For x = 2 To 11 Step 1

CINCOME = Cells(x, 2).Value

Call Calling

Cells(x, 4) = LOANSTATUS

Next

End Sub

Function Calling()

If CINCOME > 60000 Then
LOANSTATUS = "Approve with special rates"

ElseIf CINCOME > 40000 Then
LOANSTATUS = "Approve with standard rates"

ElseIf CINCOME > 24000 Then
LOANSTATUS = "Await manager's approval"

Else
LOANSTATUS = "Reject application"

End If

End Function 
```

CINCOME 的值似乎无法转移到“调用”函数来确定贷款申请状态。T_T 到底出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:49:19.510

进一步的评论。我为您准备了两个解决方案（还有更多，但这两个是我想到的第一个）。

* * *

1.  用户定义函数
    一旦将函数粘贴到您的任何模块中，您可以通过单击单元格并写入 =LoanAppStatus(range)，即 =LoanAppStatus(B2) + 来使用它，然后您可以将其拖到您的列中

    ```
    ' User Defined Function
    ' Returns the status of customers loan application based on the income
    Function LoanAppStatus(CINCOME As Range) As String
        If CINCOME.Value >= 24000 And CINCOME.Value < 40000 Then
            LoanAppStatus = "Await manager's approval"

    ElseIf CINCOME.Value >= 40000 And CINCOME.Value < 60000 Then
        LoanAppStatus = "Approve with standard rates"

    ElseIf CINCOME.Value > 60000 Then
        LoanAppStatus = "Approve with special rates"

    Else
        LoanAppStatus = "Reject application"
    End If 
    ```

    结束功能

2.重写你原来的子程序

```
'Procedure
' Fills the status of customers loan application (Column C) based on the income ( Column B )
    Sub ForNext_If()
        Dim i As Long
        Dim wS As Worksheet
        Set wS = ThisWorkbook.ActiveSheet

        ' Range("B" & i).Value its what you called CINCOME
        ' Range("C" & i).Value its what you called LOANSTATUS

        With wS
          For i = 2 To Range("B" & Rows.Count).End(xlUp).Row
            If Range("B" & i).Value > 60000 Then
               Range("C" & i).Value = "Approve with special rates"
            ElseIf Range("B" & i).Value >= 40000 And Range("B" & i).Value < 60000 Then
               Range("C" & i).Value = "Approve with standard rates"
            ElseIf Range("B" & i).Value >= 24000 And Range("B" & i).Value < 40000 Then
               Range("C" & i).Value = "Await manager's approval"
            Else
               Range("C" & i).Value = "Reject application"
            End If
          Next i
        End With
    End Sub 
```

# php - PHP fgets 与 if 语句

> ID：15403554
> 
> 赞同：1
> 
> 时间：2013-03-14T07:33:30.633
> 
> 标签：php, if-statement, fgets

我必须在 .txt 文件中输入一些代码，如下所示：

*   34,bryan,ingles,23,25,30,inge,78,Aprobado Normal
*   20,jorge,math,20,20,20,lic,60,Pasa con lo minimo

现在我必须使用 php 函数来显示使用搜索的特定行。我试图给我们一个 fgets 和一个 If 语句来拉它。喜欢

```
while(!feof($fp)){$linea=fgets($fp, (if $code==34));echo $linea;} 
```

我需要代码。如果 $_post[codigo] 在 .txt 文件中，则使用 $_post 从 .txt 文件中获取特定行并显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:39:45.837

您的文件看起来像一个逗号分隔值文件，因此您最好使用`fgetcsv`.

```
while (!feof($fp)){
    $linea = fgetcsv($fp);       // gets one line and cut it in each comma ( `,` ).
    if ($linea[0] == '34') {     // [0] access the first comma-separated-value of your line
      echo implode(',', $linea); // displays the line after concataining each element with a `,` 
    }
} 
```

如果您的 CSV 包含空行，您应该再次检查（您的 CSV 行的第一个值是否存在）：

```
if ((count($linea) > 0) && ($linea[0] == '34')) { 
```

使用 CSV 方法，您可以轻松获取第一行的每个元素：

*   $linea[0] 是 34
*   $linea[1] 是布莱恩
*   $linea[2] 是 ingles
*   $linea[3] 是 23
*   $linea[4] 是 25
*   $linea[5] 是 30
*   $linea[6] 是 inge
*   $linea[7] 是 78
*   $linea[8] 是Aprobado Normal

# wpf - WPF 自动完成框

> ID：15403564
> 
> 赞同：2
> 
> 时间：2013-03-14T07:34:16.857
> 
> 标签：wpf, wpftoolkit

有人知道如何更改 AutoCompleteBox 下拉列表中所选项目的背景吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T09:50:31.063

如果您只想设置所选项目的背景，您只需覆盖`SystemColors.HighlightBrushKey`

```
<sdk:AutoCompleteBox>
     <sdk:AutoCompleteBox.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Red"/>
    </sdk:AutoCompleteBox.Resources>
</sdk:AutoCompleteBox> 
```

# c# - 将其分解为通用的 sortedlist C#

> ID：15403565
> 
> 赞同：3
> 
> 时间：2013-03-14T07:34:27.690
> 
> 标签：c#, generics, deserialization, sortedlist, binaryformatter

我想在一个通用的 SortedList 中反序列化，就像这个带有哈希表的例子一样

[http://msdn.microsoft.com/es-es/library/system.runtime.serialization.formatters.binary.binaryformatter(v=vs.80).aspx](http://msdn.microsoft.com/es-es/library/system.runtime.serialization.formatters.binary.binaryformatter(v=vs.80).aspx)

但在这一行

```
collectionContacts = (SortedList<string,Contact>) formatter.Deserialize(fs); 
```

我正在获得一个`InvalidCastException`，我该如何解决？为什么？

```
collectionContacts is a SortedList<string,Contact>,
fs is FileStream fs = new FileStream("DataFile.dat", FileMode.Open) 
```

并且 formatter 是 BinaryFormatter 对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:36:17.880

虽然它没有实现接口[ISerializable](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iserializable.aspx)，但它似乎是可序列化的（并且它具有`[SerializableAttribute]`）尝试在机器上运行代码表明 Sortedlist 实际上是可序列化的，猜测 castexception 应该是因为泛型参数。

我测试的代码如下：

**连载**

```
private static void Serialize() 
{
    // Create a hashtable of values that will eventually be serialized.
    SortedList<string, string> addresses = new SortedList<string, string>();
    addresses.Add("Jeff", "123 Main Street, Redmond, WA 98052");
    addresses.Add("Fred", "987 Pine Road, Phila., PA 19116");
    addresses.Add("Mary", "PO Box 112233, Palo Alto, CA 94301");

    // To serialize the hashtable and its key/value pairs,  
    // you must first open a stream for writing. 
    // In this case, use a file stream.
    FileStream fs = new FileStream(@"C:data.dat", FileMode.Create);

    // Construct a BinaryFormatter and use it to serialize the data to the stream.
    BinaryFormatter formatter = new BinaryFormatter();
    try 
    {
        formatter.Serialize(fs, addresses);
    }
    catch (SerializationException e) 
    {
        Console.WriteLine("Failed to serialize. Reason: " + e.Message);
        throw;
    }
    finally 
    {
        fs.Close();
    }
} 
```

**反序列化**

```
private static void Deserialize() 
{ 
    // Declare the hashtable reference.
    SortedList<string, string> addresses = null;

    // Open the file containing the data that you want to deserialize.
    FileStream fs = new FileStream(@"C:data.dat", 
        FileMode.Open);
    try 
    {
        BinaryFormatter formatter = new BinaryFormatter();

        // Deserialize the hashtable from the file and 
        // assign the reference to the local variable.
        addresses = (SortedList<string, string>) formatter.Deserialize(fs);
    }
    catch (SerializationException e) 
    {
        Console.WriteLine("Failed to deserialize. Reason: " + e.Message);
        throw;
    }
    finally 
    {
        fs.Close();
    }

    // To prove that the table deserialized correctly, 
    // display the key/value pairs.
    foreach (var de in addresses) 
    {
        Console.WriteLine("{0} lives at {1}.", de.Key, de.Value);
    }
    Console.ReadLine();
} 
```

# javascript - 有没有办法将当前日期与以 VARCHAR 格式存储在数据库中的日期进行比较？

> ID：15403566
> 
> 赞同：1
> 
> 时间：2013-03-14T07:34:28.513
> 
> 标签：javascript, jquery, mysql, datepicker, varchar

我有一组日期，我以 varchar 格式存储在我的数据库中。我使用 Varchar 的原因是因为我使用 jquery datepicker。

有没有办法让我将日期与当前日期进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:55:59.043

您可以尝试使用[datejs 库](https://code.google.com/p/datejs/)。

`Date.parse`您可以使用然后`Date.compare`比较两个日期来解析您的字符串。

```
$.get('date.php', function(date) {
    alert(Date.compare(Date.today(), Date.parse(date));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:55:51.313

您可以使用 getDate、getMonth 和 getFullYear 来获取存储在 varchar 和 current 中的日期的日期、月份和年份，并分别进行比较。该解决方案不是那么优雅，但会起作用。

```
var dt = new Date('2011-01-11'); //replace this hard coded date with one from database
var todaydate = new Date() //todays date

//i have added +1 in getMonth as its index start from 0\. so if month is Jan then it returns 0 instead of 1\. Hence i added +1 
if (dt.getDate() == todaydate.getDate() && dt.getMonth()+1 == todaydate.getMonth()+1 && dt.getFullYear() == todaydate.getFullYear())
{
    alert('match');
}
else
{
     alert('not match');
} 
```

[也可以在这里](http://jsfiddle.net/R8bWp/38/)看到这个小提琴

# php - 将 php 函数应用于所有函数参数

> ID：15403567
> 
> 赞同：1
> 
> 时间：2013-03-14T07:34:31.307
> 
> 标签：php, function, arguments

将 php 函数（例如 trim()）应用于传递给函数的所有参数同时保持它们有说服力以供进一步处理的好方法是什么？假设我们想要修剪传递给邮件函数的所有参数：

```
function my_function($a, $b, $c = NULL, $d, $e = NULL, $f = NULL){
    $a = trim($a);
    $b = trim($b);
    $c = trim($c);
    $d = trim($d);
    $e = trim($e);
    $f = trim($f);

// !!! i'd like something other than n lines of trim()...

// do further functioning on original *now trimmed* arguments...

my_function($to,$subject,$body,$from,$cc,$bcc); 
```

func_get_args() 和其他数组类型函数并不理想，因为我们*修剪*的参数无法用于最初定义的进一步操作。我们是否需要使用某种数组然后重新组合原始参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:40:45.590

以下应该可以解决问题：

```
$args = array_map('trim', func_get_args()); 
```

**编辑**

可以做得更好（借用马克贝克）

```
list($a, $b, $c, $d, $e, $f) = array_map('trim', func_get_args()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T07:45:53.653

一个好方法是像在您的代码中一样简单地执行此操作。这个“问题”的任何解决方案都是愚蠢的，因为最后你*必须*呼吁`trim`所有的论点。一种愚蠢但简短的做法是：

```
function my_function($a, $b, $c = NULL, $d, $e = NULL, $f = NULL){
    foreach (range('a', 'f') as $v) {
        $$v = trim($$v);
    }
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T07:39:07.987

func_get_args() 和 array_walk() 也许？

```
function my_function($a, $b, $c = NULL, $d, $e = NULL, $f = NULL)
    $argArray = func_get_args();
    array_walk($argArray,'trim');
    list($a, $b, $c, $d, $e, $f) $argArray;
    ...
} 
```

# javascript - Javascript/JQuery 时间计数器

> ID：15403571
> 
> 赞同：0
> 
> 时间：2013-03-14T07:34:39.150
> 
> 标签：javascript, jquery, jquery-mobile

我在找 ：

计算时间 - 以秒和分钟为单位。我的计数我希望它在单击一个按钮时开始，如果再次单击则停止。单击时，我从零开始计数每个按钮。

这是我尝试过的，但似乎不起作用。

```
function toggle(ths) {
    $(ths).toggleClass("btnColor");
    $("#tb").toggleClass("btnColorR")
    var secondCounter = 0;
    var minutes = 0;
    var t;
    var timer_is_on = 0;
    var clicked = $(ths).val();
    secondCounter = secondCounter + 1;
    if ((secondCounter % 60 == 0 )&&(clicked)) {
        minutes += 1;
        secondCounter = 0;
    }
    $("#setCount").html(" downtime type: " + clicked + " minutes: " + minutes + "     seconds: " + secondCounter);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:49:22.973

如果您发布调用该`toggle()`函数的 html 代码，问题就会很清楚。

我的猜测是每次调用函数`minutes`时都会重置为 0。`secondCounter``toggle()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:11:18.247

如果你想知道多少时间按钮被切换下来，你可以试试这个代码：

```
var displayElapsedTime,
    startTimeCounter,
    isDown;

isDown = function isDown($this) {
  return $this.is('.down');
};

displayElapsedTime = function displayElapsedTime($this) {
  var time = new Date((new Date()) - $this.data('time'));
  $this.val(time.getMinutes() + ':' + time.getSeconds());
};

startTimeCounter = function startTimeCounter($this) {
  setTimeout(function() {
    displayElapsedTime($this);
    if(isDown($this)) {
      startTimeCounter($this);
    }
  }, 1000);
};

$('input').on('click', function() {
  var $this = $(this);

  if(!isDown($this)) {
    $this.data('time', new Date());
    startTimeCounter($this);
  }

  $this.toggleClass('down');
}); 
```

您可以在此处查看工作示例：http: [//jsbin.com/ahafez/3/edit](http://jsbin.com/ahafez/3/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:53:05.873

我假设您需要一种方法来查找两次单击按钮之间经过的时间

还假设在第二次单击时您想知道自上次单击以来所花费的时间并重置计数器

如果是这样，我有一个简单的 jsfiddle，您可以查看：http: [//jsfiddle.net/8cjBj/](http://jsfiddle.net/8cjBj/)

HTML 代码：

```
<a href="#" id="btn">This is a button</a> 
```

JS代码：

```
var start = 0;
var end = 0;

$('#btn').click(function(event){
    event.preventDefault();

    if(start == 0)
        start = new Date();
    else
    {
        end = new Date();
        millis = end - start;
        var totalSeconds = parseInt(millis / 1000);
        var minutes = parseInt(totalSeconds / 60);
        var seconds = totalSeconds % 60;
        alert('Elapsed Time: ' + minutes + ' Minutes and ' + seconds + ' seconds');
        start = 0;
    }

}); 
```

# mysql - 将 mySql2 迁移到 postgreSQL：mysql2psql 时查询缓存类型错误

> ID：15403579
> 
> 赞同：3
> 
> 时间：2013-03-14T07:35:13.813
> 
> 标签：mysql, ruby-on-rails, postgresql, heroku, migration

所以我正在将我的开发环境和生产环境迁移到 postgresql，以便我可以部署到 Heroku。安装 mysql2psql gem 后，初始化（postgresql）database.yml 文件 - 我被困在运行 mysql2psql 的地方。运行它后，我得到以下信息：

```
/Library/Ruby/Gems/1.8/gems/mysql2psql-0.1.0/bin/../lib/mysql2psql/mysql_reader.rb:153:in `query': Query cache is disabled; restart the server with query_cache_type=1 to enable it 
```

所以问题是如何重新启动我的mysql2服务器并指定query_cache_type = 1？

我尝试使用以下命令启动服务器，但没有成功：

```
mysql --query_cache_type=1; 
```

在尝试了几个类似的命令后，我尝试启动服务器，然后在会话中执行它：

```
mysql> SET GLOBAL query_cache_type = 1; 
```

但可惜我得到：

```
ERROR 1651 (HY000): Query cache is disabled; restart the server with query_cache_type=1 to enable it 
```

**这确实是一个语法问题：**我使用什么命令来启动带有选项 query_cache_type=1 的 sql 服务器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-07T14:39:24.377

在 Mac OS X 10.8 上，my.cnf 文件可能位于文件夹 /usr/local/mysql-5.6.10-osx10.7-x86_64 中

在终端中搜索

```
$ find / -name my.cnf 
```

在您的系统上找到它。

通过在末尾添加此行来编辑您的 my.cnf 文件

```
query_cache_type=1 
```

如果您已经安装了 MySQL 首选项窗格（[http://dev.mysql.com/doc/refman/5.1/en/macosx-installation-prefpane.html](http://dev.mysql.com/doc/refman/5.1/en/macosx-installation-prefpane.html)），或者在终端中通过写入重新启动您的 mysqld

```
$ sudo /usr/local/mysql/support-files/mysql.server restart 
```

然后登录到mysql

```
$ mysql -h localhost -u root -p 
```

和写

```
mysql> SET GLOBAL query_cache_size=40000; 
```

如果你然后运行

```
$ mysql2psql 
```

在 Rails 应用程序文件夹中，它应该转换您的数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:42:38.740

只需将其设置在您的 my.cnf 文件中，通常位于 /etc 中？然后重新启动。

编辑：

您还需要设置一个 query_cache_size，如果这两个设置之一设置为零，那么它将不会被启用。

# python - 提取多边形形状的子图像

> ID：15403580
> 
> 赞同：4
> 
> 时间：2013-03-14T07:35:14.267
> 
> 标签：python, opencv, python-2.7

考虑下图：

![交通图](../Images/0b52eb3575c302668de07b710550e43b.png)

这是交通视频片段中的一帧。

我想做的是，只裁剪迎面而来的流量，并对其进行分析。我想要一种快速有效的方法，通过提供某些坐标，我可以提取多边形。

我正在研究 OpenCV 和 Python。

编辑：
我看到的一个选项是将图像视为 Numpy 数组并使用 for 循环来提取某些元素，但这不会有效，我不知道它是否合适。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T15:29:23.990

我建议使用 Contours 提取您感兴趣的区域（您想要的任何形状）。请参阅此文档：[绘制轮廓](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#drawcontours)

您的方法应如下所示：

1.  通过将 MouseEventListener 附加到窗口，在图像本身上标记构成坐标的点。
2.  使用创建蒙版图像。（全零）
3.  使用这些坐标集，使用**cv2.drawContours()**方法在蒙版图像上绘制所需的形状并用白色 (255) 填充它。
4.  对原始灰度图像执行 Bitwise_And 运算。

示例代码：

```
#Function
def on_mouse(event, x, y, flags,(cPts,overlayImage,resetImage)):
    if event==cv.CV_EVENT_LBUTTONUP:
        cPts[0].append([x,y])
        cv2.circle(overlayImage,(x,y),5,(255),-1)
    elif event==cv.CV_EVENT_RBUTTONUP:
        cPts[0]=[]
        print cPts
        overlayImage[:]=resetImage[:]

#Main Program
cvImage=cv2.imread(inputImageFilePath)
grayscaleImage=cv2.cvtColor(cvImage,cv.CV_BGR2GRAY)
overlayImage=np.copy(grayscaleImage)

cv2.namedWindow('preview')
cPts=[[]]
cv2.setMouseCallback('preview',on_mouse,(cPts,overlayImage,grayscaleImage))
opacity=0.4
while True:
    displayImage=cv2.addWeighted(overlayImage,opacity,grayscaleImage,1-opacity,0)
    cv2.imshow('preview',displayImage)
    keyPressed=cv2.waitKey(5)
    if keyPressed==27:
        break
    elif keyPressed==32:
        print cPts
        cv2.drawContours(overlayImage,np.array(cPts),0,255)
        maskImage=np.zeros_like(grayscaleImage)
        cv2.drawContours(maskImage,np.array(cPts),0,255,-1)
        extractedImage=np.bitwise_and(grayscaleImage,maskImage)
        cv2.imshow('extractedImage',extractedImage)
cv2.destroyAllWindows() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:18:55.090

好吧，我建议您执行以下操作：

1.  将图像分成不同的区域，根据各种事物主要是照明。
2.  然后对于每个区域，应用阈值将重要区域（交通）与不重要区域（树木等）分开。( `cv2.threshold`)
3.  使用轮廓，您可以将车辆与其他东西区分开来。（`cv2.findContours`以及更多）

如果你有视频流或类似的东西，你也可以使用运动检测之类的东西。

您可能会发现一些有用的链接：

*   [轮廓教程](http://opencvpython.blogspot.in/2012/06/hi-this-article-is-tutorial-which-try.html)
*   [关于霍夫线和霍夫圆的一些事情](http://homepages.inf.ed.ac.uk/rbf/HIPR2/hough.htm)
*   [阈值](http://en.wikipedia.org/wiki/Thresholding_%28image_processing%29)及其[工作方式](http://docs.opencv.org/doc/tutorials/imgproc/threshold/threshold.html)
*   [关于运动检测的代码问题](https://stackoverflow.com/q/3374828/1931274)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T08:51:08.697

我可以提出一个算法版本：

1.  **首先丢弃**图像中您不感兴趣的部分。如果是静态相机，您可以手动计算该区域。在其他情况下尝试使用[线检测算法](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html)
2.  **然后**用 cvThreshold 提取背景（使用[背景提取](http://8a52labs.wordpress.com/tag/thresholding-images-in-opencv/)的好例子）。
3.  **提取后**，您可以找到轮廓并分析其形状以区分物体（汽车、人等）。

希望这会有所帮助。

# delphi - 如何按指定顺序应用 Delphi TClientDataset 的更新？

> ID：15403588
> 
> 赞同：0
> 
> 时间：2013-03-14T07:36:04.750
> 
> 标签：delphi, tclientdataset

我需要以指定的顺序应用更新（ClientDataSet.ApplyUpdates）： - 第一个删除 - 第二个修改 - 第三个插入

它们按照完成的顺序应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:32:23.090

请参阅 KTDataComponents 以了解如何完成此操作

除此之外，我有时通过切换到提供者端的 OnUpdateData 事件处理程序中的特定索引来形成所需的更新顺序。为了不破坏增量处理，必须使用一些技巧，但这是非常可行的

```
procedure TLogResolver.LogUpdateRecord(Tree: TUpdateTree);
var
  I: Integer;
  CurVal: Variant;
  fld: TField;
  SaveRecNo: Integer;
  OldIndexName: WideString;
  OldIndexFieldNames: WideString;
begin
  if(TClientDataSet(Tree.Delta).IndexName<>'')or(TClientDataSet(Tree.Delta).IndexFieldNames<>'') then begin
    OldIndexName:=TClientDataSet(Tree.Delta).IndexName;
    OldIndexFieldNames:=TClientDataSet(Tree.Delta).IndexFieldNames;
    SaveRecNo:=Tree.Delta.RecNo;
    Tree.Delta.Edit;                       // vavan
    for I := 0 to Tree.Delta.FieldCount - 1 do begin
      fld:=Tree.Delta.Fields[I];
      { Blobs, Bytes and VarBytes are not included in result packet }
      if {(fld.IsBlob) or} (fld.DataType in [ftBytes, ftVarBytes]) then // vavan allowed blobs
        continue;
      CurVal := fld.NewValue;
      if not VarIsClear(CurVal) then begin
        fld.Value:=CurVal;  { TODO -ovavan -cSIC! : edit delta }
      end;
    end;
    Tree.Delta.Post; // vavan
    TClientDataSet(Tree.Delta).IndexName:=''; { TODO -ovavan -cSIC! : reset delta index to get correct original recno in order not to break reconcilation mechanism }
  end;
  try
    Tree.ErrorDS.IndexFieldNames:='ERROR_RECORDNO';
//    Tree.InitErrorPacket(nil, rrApply);
    TreeInitErrorPacket(Tree,nil, rrApply);
    for I := 0 to TVPacketDataSet(Tree.Delta).NewValueFields.Count - 1 do
    begin
      fld:=TVPacketDataSet(Tree.Delta).NewValueFields[i];
      { Blobs, Bytes and VarBytes are not included in result packet }
      if {(Tree.Delta.Fields[I].IsBlob) or} // vavan allowed blobs
         (fld.DataType in [ftBytes, ftVarBytes]) then
        continue;
      CurVal := fld.NewValue;
      if not VarIsClear(CurVal) then begin { TODO 2 -ovavan -ccheck! : get rid of this check since we only process modified fields? }
        Tree.ErrorDS.Fields[6+fld.Index].Value := CurVal; { TODO -ovavan -ccheck : ErrorDS fieldd structure is identical to delta but with extra 6 leading fields }
      end;
    end;
    Tree.ErrorDS.Post;
  finally
    if(OldIndexName<>'')then begin
      TClientDataSet(Tree.Delta).IndexName:=OldIndexName;
      Tree.Delta.RecNo:=SaveRecNo;
    end else
    if(OldIndexFieldNames<>'')then begin
      TClientDataSet(Tree.Delta).IndexFieldNames:=OldIndexFieldNames;
      Tree.Delta.RecNo:=SaveRecNo;
    end;
  end;
end; 
```

# python - 如何使用 python 对字典中的值进行扁平化和合并？

> ID：15403590
> 
> 赞同：0
> 
> 时间：2013-03-14T07:36:13.407
> 
> 标签：python, list, dictionary

我有一本这样的字典：

```
d = {'Date' : ['2013-05-01', '2013-05-01', '2013-05-01', '2013-05-01'],
     'Country Code' : ['93', '92', '91', '90'],
     'Area Code' : ['1,2,3,4,5,6,7', '31,32,43,44,54,56,7, ', '434,34,4', '00, 89']} 
```

我想要这样的字典：

```
d = {'Date' : ['2013-05-01', '2013-05-01', '2013-05-01', '2013-05-01'],
     'Combined Code' : ['931,932,933,934,935,936,937', '9231,9232,9243,9244,9254,9256,927,92 ,', '91434,9134,914', '9000, 9089']} 
```

我尝试过的是：

```
list(chain(*(product(*(s.split(",") for s in e)) for e in zip(*d.values())))) 
```

但无法在字典中管理这一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:51:17.413

这可能有点*蛮力*，但是嘿......已经晚了。

```
d = {'Date': ['2013-05-01', '2013-05-01', '2013-05-01', '2013-05-01'], 'Country Code': ['93', '92', '91', '90'], 'Area Code': ['1,2,3,4,5,6,7', '31,32,43,44,54,56,7, ', '434,34,4', '00, 89']}

new = {'Date': d['Date'], 'Combined Code': []}

for i, code in enumerate(d['Country Code']):
    area = map(str.strip, d['Area Code'][i].split(','))
    new['Combined Code'].append(",".join(["".join(item) for item in zip([code] * len(area), area)]))

print new 
```

**输出**

```
{'Date': ['2013-05-01', '2013-05-01', '2013-05-01', '2013-05-01'], 'Combined Code': ['931,932,933,934,935,936,937', '9231,9232,9243,9244,9254,9256,927,92', '91434,9134,914', '9000,9089']} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:51:46.163

我刚想出这个。所需输出的差异是由于输入中的空格造成的。

```
d = {'Date' : ['2013-05-01', '2013-05-01', '2013-05-01', '2013-05-01'],
     'Country Code' : ['93', '92', '91', '90'],
     'Area Code' : ['1,2,3,4,5,6,7', '31,32,43,44,54,56,7, ', '434,34,4', '00, 89']};

merged = [];

# assumes that the length of "Country Code" is always the same as "Area Code"
for index in range(0, len(d["Area Code"])):
    merged.append(",".join(map(lambda x: d["Country Code"][index] + x.strip(), d["Area Code"][index].split(","))));

# add the result to the dictionary and remove the old entries
d["Combined Code"] = merged;
del d["Country Code"];
del d["Area Code"];

print d; 
```

# google-drive-realtime-api - Google Drive API 错误

> ID：15403595
> 
> 赞同：1
> 
> 时间：2013-03-14T07:36:32.920
> 
> 标签：google-drive-realtime-api

当我使用 Google Drive API 从移动应用程序将我的文件夹共享给其他用户时遇到问题，然后它给了我这样的错误：

```
 {
    ": [
        {
         "domain": "global",
          "reason": "required",
          "message": "Resource metadata required"
       }
      ],
      "code": 400,
      "message": "Resource metadata required"
    } 
```

# ruby-on-rails - Ruby on Rails3 如何在不更改太多现有代码的情况下按用户过滤数据

> ID：15403596
> 
> 赞同：0
> 
> 时间：2013-03-14T07:36:37.967
> 
> 标签：ruby-on-rails, ruby, filter

我正在使用 Rails 3.0.9

我的项目只是为一组人创建的。现在我想增强我的项目以启用多个组访问。在我的数据库中，我将在我的用户表和活动表中添加一个新列。架构更改：table: users id, name, group_id # 新增

table: 活动 id, activity_name, group_id # 新增

现在，如果 users.group_id 为 1，则在活动页面上，用户只能看到 activity.group_id = 1 的数据

由于那里有大量的代码和逻辑，我不想更改控制和视图。此数据过滤器也发生在其他表上。我知道有一种方法可以使用 current_user.activities.find(:all)，但它会影响我项目中的几乎所有代码。

有没有办法在不更改太多代码的情况下为特定用户配置数据过滤器？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-01T14:32:55.650

查看租赁宝石。 [https://github.com/yoolk/tenancy](https://github.com/yoolk/tenancy)

如果您设置 Group.current = group，它会将 where group_id = Group.current.id 添加到对象是 scoped_to 组的所有查询中。

它非常干净，为每个模型添加了大约 3 行代码。我的 application_controller 在 Devise 登录后设置 Group.current。（另外〜3行代码）

# java - 是否有任何 ksoap2 libaray 支持每个或多个 android 版本？

> ID：15403598
> 
> 赞同：0
> 
> 时间：2013-03-14T07:36:48.887
> 
> 标签：java, php, android

我目前正在开发 android 应用程序，并且有一个 webservice 调用。我使用了“ksoap2-android-assembly-2.6.2-jar-with-dependencies.jar”库。它在 2.1 等一些 android 版本上成功运行。但它不适用于 android 4.0 / API 级别 '14' 和其他一些版本。任何人都可以知道任何适用于每个 android 版本的 ksoap2 库。或者不同的方法来调用支持更多android版本的webservice。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:43:49.310

它适用于每个版本。但您必须使用异步任务来处理 4.0 或 android.Othervise 版本中的网络操作。否则它将引发 NetworkOnMainThread 异常。

# javascript - jQuery() 在 jQuery.parseHTML() 结果中找不到元素

> ID：15403600
> 
> 赞同：35
> 
> 时间：2013-03-14T07:36:53.937
> 
> 标签：javascript, jquery

我正在使用 QUnit 编写测试，并使用`$.ajax()`在本地运行的开发站点中为一些测试提取 HTML：

```
add_elements = function(location, selector) { 
  $.ajax(location, {async: false}).done(function(data) {
    stor.$els = $(selector, $.parseHTML(data));
    stor.$els.appendTo($('body'));
  })
} 
```

在某个位置使用此函数，我将以下内容`data`传递给我的`.done()`回调：

```
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Home</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" media="screen">

</head>

<body>
<div id="app-container" class="container-fluid">
    <div class="page-header">
        <h1>
            <a href="/">Home</a>
            <small>Text</small>
        </h1>
    </div>

    <div id="hero-units" class="carousel-inner slide">

        <div class="hero-unit home item active">
            <h1>
                Text text text
            </h1>
            <p>
                More text!
            </p>
            <div id="app-nav">
                <a id="lets-go" class="btn btn-primary btn-large nav-forward" href="/what-up/">
                    Let's go
                </a>
            </div>
        </div>

    </div>
</div>

<script src="/static/js/jquery.js"></script>
<script src="/static/js/underscore.js"></script>
<script src="/static/js/backbone.js"></script>
<script src="/static/js/bootstrap.js"></script>
<script src="/static/js/site-fiddle.js"></script>
<script src="/static/js/site.js"></script>

</body>
</html> 
```

`selector`如果是`#hero-units`或，一切正常`.hero-unit`，但如果是，则不`$(selector, $.parseHTML(data))`返回任何`selector`内容`#app-container`！我想要一个元素的`jQuery`对象。`div#app-container`

这就是杀死我的原因：

*   `$.parseHTML(data)` **确实**包含该`div#app-container`元素。只是`$.parseHTML(data)[7]`。
*   然而，`$('#app-container', $.parseHTML(data))`是一个空数组。
*   `$('div', $.parseHTML(data))`包括 中的所有`div`s `div#app-container`，但不包括`div#app-container`其自身。

这里发生了什么？似乎正在发生的事情是没有查看or`$`返回的任何顶级元素，而只是查看它们的子元素。`$.parseHTML(data)``$($.parseHTML(data)))`

如何从中获取`jQuery`对象？`div#app-container``$.parseHTML(data)`

***回答***

`$(selector, $.parseHTML(data))`-style 查找使用`$.find`. 因为我正在寻找这个 jQuery 对象中的顶级元素，所以我应该使用它`$.filter`。瞧。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-14T07:56:31.430

您需要创建一个 DOM 元素来附加`.parseHTML()`first 的结果，以便它在 jQuery 可以遍历它并找到 DOM 树之前创建一个 DOM 树`div#app-container`。

```
var tempDom = $('<output>').append($.parseHTML(str));
var appContainer = $('#app-container', tempDom); 
```

我使用了您的示例并使其正常工作：http: [//jsfiddle.net/gEYgZ/](http://jsfiddle.net/gEYgZ/)

该`.parseHTML()`功能似乎在`<script>`标签上窒息，所以我不得不删除它们。

*PS。*显然`<output>`不是真正的HTML标签，只是用它来举例

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-14T07:53:38.280

你可以试试这个：

```
$($.parseHTML('<div><span id="foo">hello</span></div>')).find('#foo'); 
```

对于以您开头的字符串，`<`可以将该代码缩短为：

```
$('<div><span id="foo">hello</span></div>').find('#foo'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-05T06:50:55.877

刚碰到这个。

结果`$.parseHTML`返回了一个 DOM 元素的 vanilla `Array`，它不支持您想要的 jQuery 查找。

我认为这是将 HTML 字符串转换为 jQuery 对象的最简洁的解决方案：

```
var html = '<div><span id="foo">hello</span></div>';
var $foo = $(html).find('#foo'); 
```

*注意：你可能想`$.trim`在你的 html 字符串周围使用，这样 jQuery 就不会被空格混淆。*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-11-20T02:33:46.593

It doesn't have anything to do with the html not being part of the DOM. It's just that for whatever reason the top level tag(s) in the parsed HTML cannot be found. If the element you are looking for is wrapped in another tag, then the find works as you expect. BTW, wrapping the element in the body tag won't work, but all the others I have tried work fine.

```
var bad = $.parseHTML('<ul><<li><one/li>/<li>two</li></ul>');
console.log($(bad).find('li').length);  //will be 2
console.log($(bad).find('ul').length);  //will be 0 

var good = $.parseHTML('<div><ul><<li><one/li>/<li>two</li></ul></div>');
console.log($(good).find('li').length); //will be 2
console.log($(good).find('ul').length); //will be 1 
```

This is definitely the case in jQuery 1.11, not sure what happens in later versions. Here is a fiddle that demonstrates: [http://jsfiddle.net/ndnnhf94/](http://jsfiddle.net/ndnnhf94/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-11T09:07:50.957

以上答案对我不起作用，这样做：

使用 jQuery.parseHTML 将 HTML 解析为元素数组；然后您就可以**将其转换为 jQuery 集合**并**使用过滤器**将集合限制为与选择器匹配的元素。

```
var html =
'<td class="test">asd</td>' +
'<td class="last">jkl</td>';
var obj = $($.parseHTML(html)).filter('.test'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T07:44:59.790

我认为你应该试试这个：

```
$('body', $.parseHTML(data)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-13T22:42:42.780

我相信这会起作用，特别是如果您特别需要通过 id 查找元素；

```
function findInParsed(html, selector){
    return $(selector, html).get(0) || $(html).filter(selector).get(0);
} 
```

如果您需要对象的 jquery 版本，那么您可以使用它来获取它

```
function findInParsed(html, selector){
    var check = $(selector, html).get(0);
    if(check)
        return $(check);
    check = $(html).filter(selector).get(0)
    return (check)? $(check) : false;
} 
```

# import - 由于缺少选项集，导入解决方案失败

> ID：15403603
> 
> 赞同：0
> 
> 时间：2013-03-14T07:37:10.230
> 
> 标签：import, dynamics-crm-2011

导入托管解决方案时出现以下错误：

```
ErrorCode: 0x80040203 

Specified argument was out of the range of valid values. Parameter name: 
Picklist option with value (1) that has the parent OptionSet with 
(2286e9b4-f2f9-46da-a860-aca898aa6ef7) id does not exist. 
Default picklist value has to be one of the option values. 
```

我所做的是一些翻译，帐户和联系人的表格更改，以及一个新的对话框。
OptionSetView 中的名称是 company_language，所以我认为它与我的翻译有关。

有人知道问题是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:52:15.203

是的，问题是您有一些实体引用选项集并使用不再存在的选项集的默认值。

例如，让我们假设您在 Contact 上有 Race，并且您曾经将 Race 默认为“Unknown”，然后您从 OptionSet 中删除了 Race“Unknown”，而没有更改 Contact 上的默认值。

你会遇到这个错误。它不会告诉您有问题的实体或选项集。

如果您需要更多信息，请告诉我 ;-) 我记得几个月前在我们的项目中解决了这个问题……啊，共享定制开发项目的乐趣 =D

# android - Android：从触摸事件中获取原始位图数据

> ID：15403604
> 
> 赞同：2
> 
> 时间：2013-03-14T07:37:15.247
> 
> 标签：android, events, bitmap, touch-event

是否有可能获得带有 Android 触摸屏上触摸点的原始数据的数组/位图？（见图） ![所需触摸信息的图示](../Images/a1ad6b04e409302b65bfe83443cb492c.png)

到目前为止我只知道命令 event.getX(), event.getY(), event.getSize, ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-25T22:52:33.163

在用户空间中是不可能做到这一点的。触摸输入驱动程序是内核的一部分，负责获取“位图”并将其转换为不同的点。为了实现您想要实现的目标，您需要构建一个新的 android 内核，其触摸驱动程序的工作方式不同。这些新的驱动程序必须提供一个 API 来与未处理的数据进行交互。

# c# - C# windows 窗体：选项卡控件的设计时支持

> ID：15403607
> 
> 赞同：0
> 
> 时间：2013-03-14T07:37:23.790
> 
> 标签：c#, .net, winforms

我创建了自己的 Tabcontrol 类，派生自 UserControl，因为我不喜欢现有 Tabcontrol 类的设计。它工作正常，但现在我想为控件添加设计时支持，我不知道如何开始。我已经阅读了一些教程，但没有一个解释如何创建 Tabcontrol。感谢帮助 ;）

编辑：

```
public class TabListDesigner : ParentControlDesigner
{
    private DesignerVerb addVerb;
    private DesignerVerb removeVerb;
    private DesignerVerbCollection verbs;

    protected TabList TabListControl { get { return this.Control as TabList; } }

    public override DesignerVerbCollection Verbs
    {
        get
        {
            if (verbs == null)
            {
                verbs = new DesignerVerbCollection();

                addVerb = new DesignerVerb("Add TabListPage", this.AddVerbHandler) { Description = "Add a new TabListPage to the parent control." };
                removeVerb = new DesignerVerb("Remove TabListPage", this.RemoveVerbHandler) { Description = "Remove the currently selected TabListPage from the parent control." };

                verbs.Add(addVerb);
                verbs.Add(removeVerb);
            }

            return verbs;
        }
    }

    private void AddVerbHandler(object sender, EventArgs e)
    {
        this.TabListControl.Add();
    }

    private void RemoveVerbHandler(object sender, EventArgs e)
    {
        //this.RemoveSelectedTabListPage();
    }

    public override void InitializeNewComponent(IDictionary defaultValues)
    {
        base.InitializeNewComponent(defaultValues);
        this.TabListControl.Add();
        this.TabListControl.Add();
    }
} 
```

所以这就是我所做的，但它不起作用。TabListControl.Add() 方法有效（我在运行时对其进行了测试，但我想要设计时支持）

我希望能够： - 控件应该在设计时使用 2 个 TabPages 进行初始化 - 在设计时添加/删除 TabPages - 在设计时切换 TabPages - 在设计时将控件添加到不同的 TabPages

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:15:50.067

从理论上讲，在 Visual Studio 中渲染控件时不需要做太多事情 - 自定义 UserControl 的实现将被执行，Visual Studio 将在设计表面上绘制控件，您可以在其中重新调整大小、排列它，等等

要记住的一件事是`this.DesignMode`财产。如果您的控件在 Visual Studio 中呈现，DesignMode 将是 true，以便您可以在需要时运行一些自定义代码（或者不运行一些代码 - 这就是为什么您经常可以看到包装`if (!this.DesignMode) { }`在 WinForms 项目中的块中的 WebService 调用）。

为了提供更多建议，我需要您提供更多详细信息 - 您到底想做什么（您需要设计器中的一些自定义功能）以及您使用的 Visual Studio 版本。

编辑：好的，我只是更深入地研究了这个问题——如果你想使用鼠标事件，你似乎正处于有趣的时期，因为它们被“设计”困住了查看这个链接：[http://social.msdn。 microsoft.com/Forums/en-US/winforms/thread/81606909-9310-48e8-8b46-5ecafb6e8007](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/81606909-9310-48e8-8b46-5ecafb6e8007)

因此，如果您在诸如 Load 之类的事件中使用某些逻辑，则更新自定义控件不会有任何问题 - 但对于更高级的东西（设计器内的交互），您需要更深入地挖掘。例如看[这篇文章](http://msdn.microsoft.com/en-us/magazine/cc163634.aspx)（链接自：[删除 WinForm 控件的原始事件行为](https://stackoverflow.com/questions/7336999/remove-original-event-behaviour-of-winform-control)）

# iphone - 当应用程序在后台时，如何对接收推送通知执行操作？

> ID：15403610
> 
> 赞同：1
> 
> 时间：2013-03-14T07:37:30.773
> 
> 标签：iphone, objective-c, apple-push-notifications

当我们想通知用户他的应用程序有新数据可用时，我的应用程序使用远程通知，在代码中，我在 appDelegate 的 didReceiveRemoteNotification 方法中编写了 updateData 方法（从服务器提取数据）。现在，如果我的应用程序处于活动状态，它可以正常工作，但不适用于非活动模式。我在某个地方错了吗？什么是解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:46:48.057

即使您的应用程序未处于活动状态，我也不知道如何处理推送通知（而且我认为这正是应该的）

您还应该在 AppDelegate 的 didFinishLaunch 中检查 PNS

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
    //...
    //If Push Notification
    NSDictionary *pnsDict = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
    if(pnsDict != nil){
        DDLogInfo(@"PNS");
        [self handlePushNotification:pnsDict]; 
    }
    //..
} 
```

通过这种方式，您可以确保捕获所有远程通知。

请注意，您的应用应该`not depend on pns`. PNS 可能无法发送或用户可以将其关闭。应用程序应始终以相同的方式在启用 pns 和禁用 pns 的情况下工作。

有关更多信息，请阅读[Apple PNS 指南](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:48:46.113

通知应该是这样工作的：如果应用程序是前台应用程序，它会直接接收通知；否则用户会看到一条消息弹出，询问他们是否要激活应用程序。[它在 docs](http://developer.apple.com/library/mac/ipad/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW4)中有清楚的描述。如果您想使用 APNS，则无法避免该对话框。

# php - PHP 日期字符串压缩

> ID：15403611
> 
> 赞同：1
> 
> 时间：2013-03-14T07:37:35.690
> 
> 标签：php, date

我有一个有趣的问题。

在表格中，我有一个格式如下的字段

YYMMDD001（001 是递增到 999）

此数据用于导出到具有相同字段且限制为 9 个数字字符的会计软件中。

问题是我们在某一天需要超过 999 个值。

到目前为止，我们有 php

```
$unique = date("Y-m-d").$counter; // $counter is sprintf'd to have leading zeros 
```

到目前为止，我们最好的解决方案是使用年和日编号的 5 位日期，因此增量部分扩展到 9999。

任何人都可以提出小于 5 位数的建议吗？（对于日期部分）

PS：我们不能使用十六进制，我们只使用基本的数字表示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:41:23.127

您可以使用“自 X 日以来的天数”。

选择 1970 年 1 月 1 日或您更喜欢的起点作为起点，您将得到 270 多年的 5 位数字编码。

对于 4 位数字，它是 27 年，我敢肯定这仍然足以完成这项任务（如果你从这些天左右开始计算的话）。

# c# - C# 为 IIS-6 和 IIS-7 创建 IIS 应用程序池和网站

> ID：15403612
> 
> 赞同：0
> 
> 时间：2013-03-14T07:37:40.053
> 
> 标签：c#, iis-7, iis-6

如何在 C# 中创建 IIS 应用程序池和网站，但我正在寻找一个可以在 IIS-6 和 IIS-7 中工作的通用代码。如果不可行，请告诉我如何知道目标服务器机器上正在运行哪个 IIS，以便我可以相应地切换我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:41:45.793

如果您使用 ASP，您可以使用 Request.ServerVariables["SERVER_SOFTWARE"] 检查 IIS 版本。如果不这样做，您可以使用 HttpWebRequest 和 HttpWebResponse.Server 属性。

**更新**

```
 System.Net.HttpWebRequest rq = (System.Net.HttpWebRequest)System.Net.WebRequest.Create(yourUrlString);           
 rq.Method = "Get";
 rq.ContentType = "text/xml";
 System.Net.HttpWebResponse rs = (System.Net.HttpWebResponse)rq.GetResponse();
 if (rs.Server=="Microsoft-IIS/6.0") 
 {
    //IIS 6 Code
 }
 if (rs.Server=="MMicrosoft-IIS/7.5")
 {
    //IIS 7.5 Code
 } 
```

# iphone - 限制导航栏按钮项中的触摸区域？

> ID：15403613
> 
> 赞同：1
> 
> 时间：2013-03-14T07:37:42.563
> 
> 标签：iphone, ios, ipad

在 iphone 中，我知道导航栏按钮触摸在导航栏下也有一些扩展。但我需要将用户交互限制在一定范围内。我能做到这一点。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:02:22.947

实现一个轻击手势识别器并将您的控制器设置为委托。然后实现：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

   // [touch locationInView] -> gives the point where the user touched
   // If the touch point belongs to your frame then return YES
   // else return NO

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:27:22.480

您可以自己实现自定义导航栏，隐藏导航栏“引擎”，并在自定义导航栏上使用所需的自定义行为/视觉效果的按钮。如果您想实现手势逻辑（平移）来切换导航页面，这也很有用。

AppDelegate.h：

```
@property (strong, nonatomic) UINavigationController *navigationController; 
```

AppDelegate.m:

```
YourMainViewController *yourmainViewController = [[YourMainViewController alloc] init];
_navigationController = [[UINavigationController alloc] yourmainViewController];
[_navigationController setNavigationBarHidden:TRUE];
[self.window setRootViewController:_navigationController];
[self.window makeKeyAndVisible]; 
```

YourMainViewController.m：使用自定义导航图像实现您的视图，并使用 Interface Builder 或以编程方式添加导航按钮。例如以编程方式创建您的视图：

```
- (void)loadView {  
...
    UIImageView *tmp_mynavbar = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"CustomNavBG.png"]];
    tmp_mynavbar.frame = CGRectMake(0, 0, 320, 44);
    [self.view addSubview:tmp_mynavbar];
    UIButton *tmp_addbutton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    tmp_addbutton.frame = CGRectMake(260, 10, 40, 20);
    [tmp_addbutton setTitle:@"Add" forState:UIControlStateNormal];
    [tmp_addbutton setBackgroundImage:[UIImage imageNamed:@"CustomNavAddBtn.png"] forState:UIControlStateNormal];
    [tmp_addbutton addTarget:self action:@selector(pressedbuttonAddItem:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:tmp_addbutton];

// create button with the required size, user interaction area (add image then add transparent button with different size, etc)
// also add a back button
...
} 
```

然后实现自定义导航按钮行为（添加/下一步按钮和后退按钮）

```
-(void) pressedbuttonAddItem:(id) sender {
    AppDelegate *app = (AppDelegate*) [[UIApplication sharedApplication] delegate];
    DetailViewController *detailViewController = [[DetailViewController alloc] init];
    [[app navigationController] detailViewController animated:YES];
}

-(void) pressedbuttonBack:(id) sender {
    AppDelegate *app = (AppDelegate*) [[UIApplication sharedApplication] delegate];
    [[app navigationController] popViewControllerAnimated:YES];
} 
```

# r - 如何在 R 绘图函数 cdplot() 中设置轴的字体大小

> ID：15403621
> 
> 赞同：0
> 
> 时间：2013-03-14T07:38:36.243
> 
> 标签：r, formatting, plot

我有一个简单的情节调用：

```
cdplot(example~test) 
```

我想让轴的字体更大。然而，

```
cdplot(example~test, cex=2.0) 
```

不起作用，我找不到解决方案。如何增加字体大小？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T07:43:13.310

使用`par`函数规避问题：

```
#example data from ?cdplot:
fail <- factor(c(2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 1,
                 1, 2, 1, 1, 1, 1, 1),
               levels = 1:2, labels = c("no", "yes"))
temperature <- c(53, 57, 58, 63, 66, 67, 67, 67, 68, 69, 70, 70,
                 70, 70, 72, 73, 75, 75, 76, 76, 78, 79, 81)

#save old parameters
old.par <- par(no.readonly = TRUE)
#change only the size of axis, for axis labels use cex.lab etc, see ?par
par(cex.axis=2)
cdplot(fail ~ temperature)
par(old.par) #restore old parameters 
```

从`?cdplot`的论点部分：

> bw, n, from, to, ... 参数传递给密度。

从`?density`的论点部分：

> ...（非默认）方法的进一步参数。

所以你不能使用`cdplot(fail ~ temperature,cex.axis=2)`，因为附加参数“ `...`”是由`density`不将它们用作图形参数的函数使用的，例如`cex`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T08:16:46.907

另一种选择是hack`cdplot`函数，来设置`cex.axis`。但我不鼓励黑客功能，即使在这里它是一个简单的功能。Myabe 最好联系包维护人员以添加轴字体功能。

使用 `getS3method('cdplot','default')`您获取函数源并将此行更改为：

```
 Axis(xorig, side = 1,cex.axis=cex.x)
 equidist <- any(diff(y1[, 1L]) < tol.ylab)
 if (equidist) 
    axis(2, at = seq.int(1/(2 * ny), 1 - 1/(2 * ny), 
                           by = 1/ny), labels = yaxlabels, tick = FALSE,cex.axis=cex.y)
 else axis(2, at = (y1[-1L, 1L] + y1[-NROW(y1), 1L])/2, 
              labels = yaxlabels, tick = FALSE,cex.axis=cex.y) 
```

我用新功能创建了一个新的[要点](https://gist.github.com/agstudy/24c74b0b8a4c38564c33)。

例如：

```
my.cdplot(y=fail ,x=temperature,cex.x=2,cex.y=3) 
```

![在此处输入图像描述](../Images/9ed15b8bcb513fb37a33f9dd3bbe843c.png)

# android - android杀死了我的phonegap应用

> ID：15403625
> 
> 赞同：0
> 
> 时间：2013-03-14T07:39:06.607
> 
> 标签：android, cordova, knockout.js

我们的应用程序是一个在 iframe 中使用 google maps api 的 phonegap 渲染网站，运行 20 分钟后，
只有在我们禁用 iframe（其中包含 google map）后，android 才会终止应用程序。我们使用淘汰赛作为框架

android如何将进程标记为杀死？谷歌地图控制如何触发 android 杀死我的应用程序？

有没有人有任何想法或想法？请随意发表评论。

我们检查了内存泄漏，但没有任何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:24:29.687

只是想告诉你，我们正在检查谷歌地图控件上内存泄漏的可能性（毕竟应用程序不会立即崩溃，而是在 20 分钟后才崩溃）除了 20 后崩溃之外，还有一件事引发了内存泄漏的想法仅分钟，是谷歌地图控件上有关内存泄漏的帖子数量，显然泄漏是由[此处](https://developers.google.com/maps/articles/toomanymarkers#markerclusterer)所述的标记或策略线引起的。

好吧，考试后见

# stack-overflow - 运行 27 次后的 StackOverflow

> ID：15403631
> 
> 赞同：0
> 
> 时间：2013-03-14T07:39:26.350
> 
> 标签：stack-overflow, sudoku

运行我的数独生成器时，经过 27 次堆栈溢出。

```
void start(int todel){
int number;
for (int x=0; x<9; x++) {
    for (int y=0; y<9; y++) {

        number = GenN(x, y);
        osudoku[x][y]=number;
    }
}
replace(todel);
output();
}

int GenZ(int x, int y){
    int number;
    bool duplication = true;
    Randomize();
    number = Random(9)+1;
    duplication = check(number,x,y);
    if (duplication==true){
        return GenZ(x,y);
    }
    else if (duplication==false) {
        return number;
    }
} 
```

我认为它与这段代码有关。它会生成如下内容：

```
758 431 629 
913 267 485 
642 985 317
Stack Overflow 
```

所以我得到了 1/3 的数独。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:56:03.383

您需要在解决方案中添加[回溯](http://en.wikipedia.org/wiki/Backtracking)。

考虑这种情况：（可能在您的算法中的某个时刻发生）

```
1 2 3 | 4 5 6 | 7 8 9
4 5 6 | 1 2 3 | ? _ _
... 
```

您的程序将继续尝试找到适合 的值`?`，但不存在这样的值。

相反，您的程序需要看到没有适合的值，并尝试使用不同的值`3`，这也不起作用，然后`2`，`1`在这种情况下，它最终应该放置`7`，`8`并`9`在第二个块中，如：

```
1 2 3 | 4 5 6 | 7 8 9
4 5 6 | 7 8 9 | ? _ _
... 
```

在这种情况下，它可以继续成功。

还有这个：

```
zahl = Random(9)+1; 
```

不会真正起作用，因为您可能会继续获得不适合的值（如上例所示）。你不知道什么时候回溯。最好循环遍历所有 9 个值。在你循环了所有 9 个值之后，你会知道没有合适的值，你会知道你必须回溯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:42:45.537

如果 GenZ 中的 duplication==true 它将使用相同的 x,y 再次调用它，这将再次产生 duplication==true？特别是因为我看不到你修改“数字”，所以它可能是它的初始化值，比如 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:42:49.550

```
if (duplication==true){
    return GenZ(x,y);
} 
```

我不确定这是否是创建数独的可行方法，无论你如何实现它，暴力破解可能需要一段时间，但你可以通过不使用递归和循环来摆脱 stackoverflow 错误。

```
while (duplication){ 
```

# solr - 在 master 中没有提交的 solr 复制

> ID：15403633
> 
> 赞同：1
> 
> 时间：2013-03-14T07:39:27.963
> 
> 标签：solr

Solr 在提交、优化或启动时从主内核复制到从内核。但是我设置了一个空内核作为从内核，我希望它从主内核复制数据而不在主内核上触发提交操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:10:14.443

您可以从 Solr 管理仪表板强制复制从站。
您还可以通过 url fetchindex触发[复制](http://docs.lucidworks.com/display/solr/Index+Replication)
`http://slave_host:port/solr/replication?command=fetchindex`

> 强制指定的从站从其主站获取索引的副本。
> 
> 如果您愿意，您可以传递一个额外的属性，例如 masterUrl 或压缩（或标签中指定的任何其他参数）来从主服务器进行一次性复制。这消除了在从属设备中对主设备进行硬编码的需要。

# git - 为什么 $vcs_info_msg_0_ 的回显结果在 zsh 中包含奇怪的字符？

> ID：15403637
> 
> 赞同：1
> 
> 时间：2013-03-14T07:39:35.013
> 
> 标签：git, echo, zsh, terminal-color

这是我`PROMPT`在 zsh 中的配置：

```
PROMPT=$'
%{$purple%}%n%{$reset_color%} at %{$orange%}%m%{$reset_color%} in %{$limegreen%}%~%{$reset_color%} $vcs_info_msg_0_
$ ' 
```

这就是我的 zsh 的显示方式

![外壳截图](../Images/755b57f3b6233d30c90653f56fc84d33.png)

一开始我只是想把这个`master**`字符串拿来做其他用，后来搜索zsh是怎么得到的，发现这个消息是zsh的`vcs_info`包生成的，存放在.里面`$vcs_info_msg_0_`，但是截图显示的是那个变量的echo结果很奇怪。为什么会发生这种情况，我怎样才能获取`master**`存储库文件夹的 git 信息（带颜色）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:09:39.513

那是因为该变量只能在提示中使用，其他任何地方都不能使用。您看到的奇怪的事情是在呈现提示时由 ZSH 解释的特殊控制序列。

# iphone - iOS - 横向模式下的 UIView 不旋转

> ID：15403639
> 
> 赞同：0
> 
> 时间：2013-03-14T07:39:39.587
> 
> 标签：iphone, ios, ipad, orientation, landscape

我正在为 iPhone 和 iPad 编写应用程序支持。iPhone 需要纵向模式，iPad 需要使用横向。

在**AppDelegate.m**

```
if ([CKAppDelegate isPad]) {
    [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight];

    CGSize size = [self getScreenSize];
    navigationController = [[UINavigationController alloc] initWithRootViewController:[[PadMainViewController alloc] initWithFrame:CGRectMake(0, 0, size.width, size.height)]];
} else {
    CGSize size = [self getScreenSize];
    navigationController = [[UINavigationController alloc] initWithRootViewController:[[MainViewController alloc] initWithFrame:CGRectMake(0, 0, size.width, size.height)]];
}

self.window.rootViewController = navigationController;

...

- (CGSize)getScreenSize
{
    CGSize size;
    if (UIInterfaceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation) && [[UIScreen mainScreen] bounds].size.height > [[UIScreen mainScreen] bounds].size.width) {
        // in Landscape mode, width always higher than height
        size.width = [[UIScreen mainScreen] bounds].size.height;
        size.height = [[UIScreen mainScreen] bounds].size.width;
    } else if (UIInterfaceOrientationIsPortrait([UIApplication sharedApplication].statusBarOrientation) && [[UIScreen mainScreen] bounds].size.height < [[UIScreen mainScreen] bounds].size.width) {
        // in Portrait mode, height always higher than width
        size.width = [[UIScreen mainScreen] bounds].size.height;
        size.height = [[UIScreen mainScreen] bounds].size.width;
    } else {
        // otherwise it is normal
        size.height = [[UIScreen mainScreen] bounds].size.height;
        size.width = [[UIScreen mainScreen] bounds].size.width;
    }
    return size;
} 
```

在**PadMainViewController.m**

```
- (id)initWithFrame:(CGRect)frame
{
    UIView *leftView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, frame.size.width * 0.7, frame.size.height)];
    leftView.backgroundColor = [UIColor cyanColor];

    UIView *rightView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, frame.size.width * 0.3, frame.size.height)];
    rightView.backgroundColor = [UIColor yellowColor];

    self.chopInkButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [self.chopInkButton setTitle:@"Tap to ChopInk" forState:UIControlStateNormal];
    self.chopInkButton.frame = CGRectMake(50, 200, 250, 44);
    [self.chopInkButton addTarget:self action:@selector(chopInkButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
    [rightView addSubview:self.chopInkButton];

    self.logoImageView.frame = CGRectMake(50, 50, 100, 100);
    [self.logoImageView.layer setBorderColor:[[UIColor blackColor] CGColor]];
    [self.logoImageView.layer setBorderWidth:2.0f];
    [rightView addSubview:self.logoImageView];

    [self.view addSubview:leftView];
    [self.view addSubview:rightView];
    return self;
}
...
- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)toInterfaceOrientation
{
    return (UIInterfaceOrientationIsLandscape(toInterfaceOrientation));
} 
```

我得到的结果是

![奇怪的结果](../Images/b92fc056d19048c039393d0b2a87d914.png)

在项目摘要中，我已经禁用了 iPad 的纵向模式

![在此处输入图像描述](../Images/6959c7945bedb4cd1421693e705be0c9.png)

知道为什么按钮不旋转吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:46:02.717

尝试使用以下方法：对于 iOS 6

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

- (BOOL)shouldAutorotate 
{
   return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:22:29.660

我通过改变来解决这个问题

**PadMainViewController.m**

```
- (id)initWithFrame:(CGRect)frame
{
    ...
    return self;
} 
```

到

```
- (id)initWithFrame:(CGRect)frame
{
    if ((self = [super init])) {
        ...
    }
    return self;
} 
```

顺便说一下，`initWithFrame`是自定义函数。

# sql - 从单个数据库中的多个模式中检索数据

> ID：15403651
> 
> 赞同：0
> 
> 时间：2013-03-14T07:40:09.663
> 
> 标签：sql, database, postgresql, schema, union-all

我`schemas`在一个单一的里面有不止一个`database`。

说，

*   DBTEST（数据库）

    1.  SCH001（模式 1）

    2.  SCH002（模式2）

同样，我有一个名为的表`Tbl`，它存在于上面给出的两种模式中。
现在我已经从表格中检索到数据，`SCH001.tbl`并`SCH002.tbl`使用`union all`下面这样的关键字，

```
select * From SCH001.tbl union all select * From SCH002.tbl 
```

上面的查询没有任何问题，但是我的老板要求我使用其他一些技术来实现相同的效果（没有联合全部/联合）。所以我想问的是，在我的情况下，Union all 是否有任何补救措施可以得到相同的结果？如果不是那么，请告诉为什么在这种情况下无法替换Union all的原因。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:07:25.177

如果你的老板认为一直（一直）使用这个工会是丑陋的，为什么不考虑一下呢？只需引用两个联合部分中的所有字段，并将其呈现为组合视图（我说这导致在视图中使用 * 通常不好）

~~我不知道你是否可以索引这样的视图，但是它确实值得一试，我相信你只有在做索引视图时才必须使用一个模式，但我不确定这一点（但如果可能的话，这会更好解决方案，而不是“只是”工会）~~

~~（该领域的新手）~~ ：编辑：您不能（在 Microsoft sql 中）在联合上创建物化视图，和/或因此在不同的模式上，（它们也是模式绑定的）

无论如何，我都会亲自使用该视图，它只是一种为您的数据提供编程接口的好方法，您可以在一天内更换！：编辑：

但事实是......它仍然是一个联盟

# php - 使用 regex/preg_match() 检查一组十进制度坐标是否有效

> ID：15403654
> 
> 赞同：2
> 
> 时间：2013-03-14T07:40:26.757
> 
> 标签：php, regex, preg-match, validation

我已经学会了一些基本的正则表达式来弄湿我的脚，但这对我来说仍然有点太复杂了。我需要采用一组用户输入的十进制度坐标（示例）：

```
$纬度 = -42.323432
$经度 = 176.232123
```

`preg_match()`并使用PHP中的函数检查它们是否有效。看起来很简单，但我无法为我的一生编写正则表达式来确保没有坏数据通过。我将检查彼此分开的北向和东向，因此这`preg_match()`将使用`foreach`循环迭代两次。

我想我已经弄清楚了所有必要的条件：

*   第一个字符可以是减号、加号或数字。缺点和优点是可选的。
*   小数点前数字的总数可以是 1 到 3，但不能是 0 或大于 3。
*   因此，第二位或第四位必须有小数点。(2.2332, -123.422)
*   整个字符串中必须有一个小数点，整个字符串中可以有 0 或 1 个减号或加号。
*   我希望小数点后至少有 3 个小数位的精度。没有最大限制（我自己简单地将其四舍五入到 6 dp）
*   如果除了数字、小数点和可选的加减号之外还有其他字符，则拒绝它。

不过，在这之后，我被困住了！在编写正则表达式时，我们将不胜感激。谢谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T07:44:35.710

让我们试一试：

```
 /^[+\-]?[0-9]{1,3}\.[0-9]{3,}\z/ 
```

分解：

```
 ^                 - start of string
  [+\-]?            - zero or one from set of `+` and `-`
  [0-9]{1,3}        - 1 to 3 digits
  \.                - decimal point
  [0-9]{3,}         - 3 or more digits
  \z                - end of string 
```

（注意，这是未经测试的；））

# cakephp-2.0 - 如何从cake php中的两个不同表中获取数据

> ID：15403655
> 
> 赞同：0
> 
> 时间：2013-03-14T07:40:28.627
> 
> 标签：cakephp-2.0

但它只会从 tab[1] 返回相同的数据.. 我想清楚地从 tab[1] 和 tab[0] 获取数据

$db = ConnectionManager::getDataSource('default');

$tab = $db->listSources();

```
 echo '<br>';
        $this->Form->useTable=$tab[1];
        print_r($this->Form->find(`all'));
        echo '<br>';
        $this->Form->use Table=$tab[0];
        print_r($this->Form->find('all')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:16:10.067

在运行时更改`Model->useTable`不能正常工作，因为一旦模型被初始化，CakePHP 会缓存数据库表的模式。

要切换到另一个表并清除缓存模式，请使用`Model->setSource('tablename')`

文件；[http://api.cakephp.org/2.3/source-class-Model.html#1100-1125](http://api.cakephp.org/2.3/source-class-Model.html#1100-1125)

您的示例将如下所示；

```
echo '<br>';
$this->Form->setSource($tab[1]);
print_r($this->Form->find(`all'));
echo '<br>';
$this->Form->setSource($tab[0]);
print_r($this->Form->find('all')); 
```

另外，请使用`debug()`输出结果进行调试，而不是`print_r()`. 这将输出格式正确的结果。（您需要在 app/Config/core.php 配置中将 debug 设置为 1 或更高，以便 debug() 工作）

**然而**

切换模型的源表通常是不好的做法，并且仅适用于非常特定的情况。我*强烈*建议为每个数据库表创建一个单独的模型。

# android - 您如何使用项目 A 中的按钮单击以编程方式从项目 B 生成 APK？

> ID：15403658
> 
> 赞同：1
> 
> 时间：2013-03-14T07:40:34.680
> 
> 标签：android

我有一个项目 A，它应该使用向导来创建项目 B。项目 B 基于模板。项目 A 应将数据发送到该模板并以编程方式从该数据和模板生成 APK。

我已经阅读了 APK 结构及其包含的内容，例如类、资源和清单文件。我的问题是，实现这种基于模板的 APK 生成的最佳方法是什么？我能用什么来做这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:08:51.403

这是您正在寻找的开源项目。

[https://code.google.com/p/terminal-ide/](https://code.google.com/p/terminal-ide/)

> 终端 IDE 是在设备本身上运行的命令行 java / android 开发工具包。在自定义终端 + 自定义键盘环境中使用正确配置的 vim、bash 和 busybox。所有这些应用程序都放在一起，以便它们正确交互。完整的终端仿真器 + 自定义 ANSI 键盘确保良好的 bash、vim 和busybox 仿真。所有设置并准备好在非根环境中运行。普通用户权限足以运行所有这些。

您也可以[在此处](https://play.google.com/store/apps/details?id=com.spartacusrex.spartacuside&hl=en)从 Google Play 下载它。该应用程序在 Play 商店中获得 1,324 个评分，获得 4.7 颗星。这是此应用程序在 Google Play 上收到的最新书面 5 星评论之一。而且它无论如何都不是独一无二的（**粗体字**的重点是我的）。

> 一位 Google 用户 - 2013 年 3 月 12 日 - 版本 2.02 哇！
> 
> 我有超过 30 年的编程经验（主要是 C/C++ 和汇编），并且一直在寻找学习 Android 编程的机会。**我到处寻找在我的平板电脑上编译和运行 Java 教程的方法，但没有成功，直到我找到了终端 IDE！**然后我开始玩弄它的功能，让我再说一遍，哇。开发人员 - 我只有一个建议，其他人也提出了这个建议：减少内部内存占用。也许将不同的语言分解成可安装的附加组件？

在某种程度上，它很像称为 AIDE 的 Android Java IDE，只是减去了 GUI 界面（但与 AIDE 不同的是，它没有低人工文件限制，而且由于它是开源的，它实际上可以用来构建您自己的项目并扩展）。

# google-maps - Windows 8 应用程序（Xaml、C#）谷歌地图

> ID：15403660
> 
> 赞同：1
> 
> 时间：2013-03-14T07:40:38.643
> 
> 标签：google-maps, google-geocoding-api

是否可以嵌入 WebView 并在其中加载谷歌地图，并在地图中加载一组坐标的图钉？我将 Xaml 和 C# 用于 Windows 8 应用程序。

# android - Android Service - 从设置应用程序中停止服务

> ID：15403664
> 
> 赞同：1
> 
> 时间：2013-03-14T07:40:45.197
> 
> 标签：android, service, android-service

我开发了一个音乐播放器应用程序，它有一个将在后台运行的服务（AudioPlayerService）。按下播放按钮时将启动服务。即使应用程序进入后台，它也会在后台运行。

可以通过将应用程序置于前台并按下停止按钮来停止播放，这会使音乐停止并停止 AudioPlayerService。一切正常。

否则我可以使用设置应用程序中的**强制停止**（设置*->应用程序->下载->选择应用程序->按强制停止按钮*）。我能够停止应用程序，音乐也停止播放。

但如果我使用设置应用程序中的**停止**按钮（*设置->应用程序->运行->选择应用程序->按停止*），应用程序将终止，我的应用程序将从正在运行的应用程序列表中删除，但音乐仍在后台播放.

我不确定为什么 Running Tab Stop Button 不会停止音乐。

如果我需要在课堂上处理任何事情以停止播放，任何人都可以帮助我。

我正在使用 Android 4.0.3 在三星 Galaxy S2 中进行测试

谢谢 Sasikumar JP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:49:07.493

在您的服务的 onDestroy 覆盖方法上，使用您的 mediaplayer 对象来阻止媒体播放。

```
@Override
OnDestroy{
    mediaplyer.stop();
} 
```

# php - simple_html_dom 的 file_get_html 不能循环工作

> ID：15403669
> 
> 赞同：2
> 
> 时间：2013-03-14T07:41:00.430
> 
> 标签：php, simple-html-dom

我正在使用 $html = file_get_html($url)->plaintext; 从网站获取纯文本。但是如果我在某个循环中运行此代码，因为我想从一系列网站访问文本，那么对于少数网站，它会抛出错误，但如果我专门访问此功能，则会提取同一网站的纯文本只有那个网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:52:25.450

**试试这个，让我知道我对你想要的东西是对还是错。首先，我在服务器上有 2 个 html 文件：**

*→ page1.html*

```
<html>
<head><title>HTML Page #1</title></head>
<body><div id="a">A1</div><div id="b">B1</div><div id="b">B1</div></body>
</html> 
```

*→ page2.html*

```
<html>
<head><title>HTML Page #2</title></head>
<body><div id="a">A2</div><div id="b">B2</div><div id="b">B2</div></body>
</html> 
```

→ 好的，那么对于您的*主 PHP 页面*：（在与 .html 文件相同的文件夹中）

```
require_once( 'simple_html_dom.php' ); // or w\e the path for your source is

// array to store series of websites:
   $url  = array( './page1.html', './page2.html' );

// array to hold plain-text for later retrieval: (if needed)
   $html = array();

// loop through series of webpages:
   foreach( $url as $key=>$value ) { 

       // get html plain-text for webpage & assign to html array.
          $html[ $key ] = file_get_html( $value )->plaintext; 

       // echo html plain text:
          echo "<br />" . $html[ $key ] . "<br />"; 

   }

   // echo $html[ 0 ]; /* <-- page1.html (if needed) */
   // echo $html[ 1 ]; /* <-- page2.html (if needed) */ 
```

→*输出：*

```
HTML Page #1 A1B1B1

HTML Page #2 A2B2B2 
```

→**这是否完成了您希望代码执行的操作？**

# .net - IsDlg=1 不适用于要在对话框中显示的自定义列表 Web 部件项

> ID：15403670
> 
> 赞同：0
> 
> 时间：2013-03-14T07:41:16.583
> 
> 标签：.net, sharepoint

我创建了自定义列表 Web 部件并在主页中使用该 Web 部件。当我单击项目时，它没有在对话框中打开。我使用了下面的代码。

谁能建议我有什么问题？

```
 SPQuery query = new SPQuery();
                                     query.Query = "<OrderBy><FieldRef Name='ID'     Ascending='False' /></OrderBy>";
                            query.RowLimit = Convert.ToUInt16(RowLimit);
                            SPList list = web.Lists[ListName];
                            SPListItemCollection listItemsCollection = list.GetItems(query);
                            foreach (SPListItem listItem in listItemsCollection)
                            {
                                TableRow tableRow = new TableRow();
                                TableCell tableCell = new TableCell();
                                HyperLink link = new HyperLink();

                                string docName = listItem.Title;
                                link.Text = docName;
                                try
                                {
                                   link.NavigateUrl = web.ParentWeb.Url  + list.DefaultDisplayFormUrl + "?id=" + listItem.ID + "&IsDlg=1";

                                }
                                catch (Exception ex)
                                {
                                    link.NavigateUrl = web.Url + list.DefaultDisplayFormUrl + "?id=" + listItem.ID ;
                                }

                                //link.Target = "_parent";
                                tableCell.Controls.Add(link);
                                tableRow.Cells.Add(tableCell);
                                table.Rows.Add(tableRow);
                            }
                            this.Controls.Add(table); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:00:04.050

我认为，您遇到了一些异常，这就是为什么它创建一个不带参数的 url。您能否调试它或告诉我您在主页上获得的网址。

谢谢

请纠正我

# c# - 保存在实体框架中

> ID：15403673
> 
> 赞同：9
> 
> 时间：2013-03-14T07:41:41.073
> 
> 标签：c#, entity-framework, savechanges

我已经阅读[了这篇](http://www.codeproject.com/Tips/309753/Repository-Pattern-with-Entity-Framework-4-1-and-C)文章，但仍然误解了关键时刻。我们不需要打电话吗

```
_context.SaveChanges() 
```

在每个 Delete/Update/... 操作中？

如果我更改任何实体的属性，是否`SaveChanges()`将结果提交到数据库或者我必须手动设置`EntityState.Modifyed`？

这是我的代码：

```
public class Repository<T> : IRepository<T> 
    where T : class
{
    private IDbContext _context;

    public Repository(IDbContext context)
    {
        _context = context;
    }

    private IDbSet<T> DbSet
    {
        get
        {
            return _context.Set<T>();
        }
    }

    #region IRepository<T> Members

    public void Insert(T entity)
    {
        DbSet.Add(entity);
    }

    public void Delete(T entity)
    {
        DbSet.Remove(entity);
    }

    public IQueryable<T> SearchFor(Expression<Func<T, bool>> predicate)
    {
        return DbSet.Where(predicate);
    }

    public IQueryable<T> GetAll()
    {
        return DbSet;
    }

    public T GetById(int id)
    {
        return DbSet.Find(id);
    }
    #endregion
}

public interface IDbContext
{
    IDbSet<T> Set<T>() where T : class;

    int SaveChanges();
    void Dispose();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T08:15:08.593

你问：

> 我们不需要在每个 Delete/Update/... 操作中调用 _context.SaveChanges() 吗？

不，我们没有。调用时， `Delete`我们不会实际删除实体 - 我们将其*标记*为删除。

与 相同`Update`，尽管您不必执行任何其他操作来对实体进行您想要的更改。所有属性（由默认模板生成）都将实现`INotifyPropertyChanged`，因此它知道何时修改了实体。

所有实体（首先在数据库中 - 由 defullt 模板自动生成）都有一个`State`属性。`ObjectContext`只要更改发生在 ObjectEntity 的范围内，此属性就会被维护。

例如

```
Customer c;
using(var context = new MyEntityContext())
{
  c = context.Customer.FirstOrDefault(); //state is now Unchanged
  c.Name = "new name"; // this set the State to Modified
 //context.SaveChanges(); // will persist the data to the store, and set the State back to unchaged
}

//if we look at our customer outside the scope of our context
//it's State will be Detacth
Console.WriteLine(c.State); 
```

然后，您调用`SaveChanges`所有具有状态`Added` `Deleted`或将*在本地事务*`Modified`中将其更改持久保存到数据库的实体

 ***编辑**

如果一个实体被标记为删除，并且您尝试修改它 - 您将得到一个`InvalidOperationException`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T07:47:28.813

您可以在内存上下文中执行许多更改，例如插入、更新和删除。一旦您调用 SaveCahnges()，您所做的所有更改都将在单个事务中保存在数据库中。这意味着要么它们都被提交，要么在出现错误的情况下都不提交。*

# c# - 无法使用 XDocument 获取元素

> ID：15403678
> 
> 赞同：0
> 
> 时间：2013-03-14T07:41:52.027
> 
> 标签：c#, asp.net, linq-to-xml

下面是我用来获取“人”的“名称”（属性）值的代码

参数标签=“人”和参数属性=“名称”

```
public static string GetInformationFromXML(string tag,
                                           string attribute,
                                           string filePath)
{
        XDocument doc = XDocument.Load(filePath);
        string info = doc.Element(tag).Attribute(attribute).Value;

        return info;
} 
```

doc.Element(tag) 没有获取元素，即使当我展开 doc 时，它确实有一个类型为“Element”且名称为“person”的元素，正在读取的文件是 XmlDocument，供您参考。

下面是我要读取的文件的 xml

```
<?xml version="1.0"?>
<import>
  <company name1="ABC" name2="" action="create" 
           profile="\Profiles\ABC\" id="C1">
    <address street="industrial" city="london" 
             country="england" id="A1">
      <telecom type="phone" value="4839282992" 
               desc="" default="true" />
      <telecom type="fax" value="3232" desc="" />
    </address>
  </company>
  <person title="Mr." name="Tariq" surname="sheikh" 
          lang="EN" action="create"  profile="Profiles\Tariq" 
          login="tariq" password="123456" default_address="A1">
    <link reference="C1" type="Employee" description="Software developer" />
    <address street="baker street" zip="12443" 
             city="london" country="england" />
    <account bank="Barclays" account="4378734834" />
    <telecom type="email" value="tariq.sheikh@abc.co.in" desc="" />
    <registration type="temporaryID" 
                  value="4623648c-739e-49c8-93fa-41dc7fed53ea" />
  </person>
</import> 
```

我是 XDocument 的新手！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:44:24.340

`Descendants`当您要查找的元素不是当前元素的直接子元素（或根）时，您必须使用`XDocument`。

```
string info = doc.Descendants(tag).First().Attribute(attribute).Value; 
```

# android - 在 PreferenceScreen 的 Preference 中添加 TextView

> ID：15403682
> 
> 赞同：4
> 
> 时间：2013-03-14T07:41:54.410
> 
> 标签：android, android-layout

在此首选项屏幕中，用户将设备与他的帐户取消链接。目前我只是将它作为 Unlink 设备，一旦用户单击它，就会发生取消链接。

但我想添加这样一段文字：

Joe Foo 的设备 (joefoo@gmail.com) - 取消链接设备

我会这样做吗？我还需要从 settingsActivity 动态添加用户名。

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

     <Preference android:title="@string/pref_title_advanced_unlink" >
         <TextView somehow must be in here
            android:id="@id/user_name_and_email" />

         <intent android:action="android.intent.action.VIEW"
            android:targetPackage="com.example.tvrplayer"
            android:targetClass="com.example.tvrplayer.UnlinkActivity" 
            android.setflags="FLAG_ACTIVITY_CLEAR_TOP"/>
    </Preference>

</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:53:00.360

首选项有一个名为`summary`. 给你的偏好一个键，然后你可以`findPreference(CharSequence key)`在你的 PreferenceFragment 中使用来获取对你的偏好对象的引用，有点像调用`findViewById`来获取对视图的引用。然后在首选项对象上调用`setSummary(int)`或。`setSummary(CharSequence)`

`Preference`或者，您可以通过为您的偏好对象和/或子类提供自定义布局并实现一些自定义数据绑定来做一些更复杂的事情。但我认为上面应该做你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:28:12.567

![在此处输入图像描述](../Images/29490ad32e22420640184b49959a94bb.png)

**首选项.xml**

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <PreferenceCategory
        android:key="pref_title_advanced"
        android:title="Advanced" >
        <CheckBoxPreference
            android:defaultValue="false"
            android:key="pref_title_advanced_link"
            android:title="Link Device" />
    </PreferenceCategory>
</PreferenceScreen> 
```

**PrefsActivity.java**

```
private SharedPreferences mPreferences;
private SharedPreferences.OnSharedPreferenceChangeListener mPrefListener;
private CheckBoxPreference mCheckBoxPref;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences);

    mCheckBoxPref = (CheckBoxPreference) getPreferenceScreen().findPreference(
            "pref_title_advanced_link");
    /*
     * set initial summary as you desire. For example, userIdCurrent can be:
     * "No Devices linked."
     */
    mCheckBoxPref.setSummary(userIdCurrent);

    mPrefListener = new SharedPreferences.OnSharedPreferenceChangeListener() {
        public void onSharedPreferenceChanged(SharedPreferences prefs,
                String key) {
            if (key.equals("pref_title_advanced_link")) {
                /*
                 * set post-click summary as you desire. For example,
                 * userIdPost can be:
                 * "Joe Foo's Device (joefoo@gmail.com)".
                 */
                mCheckBoxPref.setSummary(userIdPost);
            }
        }
    };
    mPreferences.registerOnSharedPreferenceChangeListener(mPrefListener);
} 
```

# android - 如何销毁 AIDL 存根？

> ID：15403686
> 
> 赞同：1
> 
> 时间：2013-03-14T07:42:18.730
> 
> 标签：android, android-service, aidl

我有一个带有 AIDL 接口的服务，如下所示：

```
interface Bar {

    void doStuff();
    // ...
    void destroySelf();
}

interface Foo {

    // ...
    Bar createBar();
} 
```

在服务实现中，`Foo`存根维护一个已创建`Bar`存根的列表，并且在`Bar`存根中，当`destroySelf()`被调用时，此实例将从列表中删除。

`Bar`我希望客户不再调用被破坏的实例，我该怎么做？

此客户端代码不会引发任何异常：

```
Bar bar = foo.createBar();
bar.destroySelf();
bar.doStuff();  //I want that to go "boom" 
```

我查看了`Binder`实现，并且有一个`destroy()`从该方法调用的本机`finalize()`方法，但只有在垃圾收集器决定唤醒时才会调用它。我什至不确定这些`Binder`东西是否不会保留对`BarStub`实例的引用，以便在客户端调用一个方法时能够访问它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:36:14.433

当您说 Binder 东西保留对`BarStub`实例的引用以便能够随时访问它们时，您是对的。实际上，Binder 对象是在系统范围内进行垃圾收集的，因此它们仅在没有进程可以访问它们时才停止存在。

我建议两种选择：

*   不要认为`destroySelf()`它实际上会破坏对象，而是将其置于非活动状态。然后，在所有其他方法调用中（例如`doStuff()`）检查对象的状态并在对象处于非活动状态时返回错误。
*   更好的是，*使用*Android Binder 的设计而不是反对它。跨进程引用计数可能正是您想要的。具体来说，我会这样做：
    *   消除`destroySelf()`
    *   在服务中，不要保留对`Bar`.
    *   如果服务真的知道`Bar`已被销毁，您可以调用`linkToDeath`它。但是，我不相信你可以保留对它的引用，否则它永远不会被破坏。

# java - 请求不在 Jetty 机密端口上重定向

> ID：15403687
> 
> 赞同：1
> 
> 时间：2013-03-14T07:42:31.677
> 
> 标签：java, jetty

我是 jetty 的新用户，正在开发一个将所有 http 请求重定向到 ssl 端口的码头服务器。我在码头教程中找到了机密端口的概念，但它不起作用。我正在添加代码快照，请纠正我哪里出错了。

```
public class ServerMain {

    public static void main(String[] args) throws Exception {

        Server server = new Server();
        SslContextFactory con = new SslContextFactory();
        con.setKeyStorePath("D:/.keystore");
        con.setKeyStorePassword("password");
        con.setTrustStore("D:/jssecacerts");
        con.setTrustStorePassword("changeit");

        SslSelectChannelConnector connector = new SslSelectChannelConnector(con);
        connector.setHost("10.10.10.10");
        connector.setPort(8443);
        connector.setMaxIdleTime(30000);

        SelectChannelConnector connector1 = new SelectChannelConnector();
        connector1.setHost("10.10.10.10");
        connector1.setPort(8080);

        //connector1.setConfidentialPort(443);
        connector1.setConfidentialPort(8443);

        server.setConnectors(new Connector[] {connector, connector1});

        QueuedThreadPool threadPool = new QueuedThreadPool();

        threadPool.setMaxThreads(24);
        threadPool.setMinThreads(12);

        server.setThreadPool(threadPool);       

        ContextHandlerCollection contexts = new ContextHandlerCollection();

        ContextHandler mycontext = new ContextHandler();
        mycontext.setContextPath("/test");

        Handler handler = new MyHandler();
        mycontext.setHandler(handler);

        contexts.addHandler(mycontext);

        HandlerCollection handlers = new HandlerCollection();
        handlers.setHandlers(new Handler[] { contexts, new DefaultHandler() });

        server.setHandler(handlers);

        server.start();
        server.join();

    }   
} 
```

MyHandler 也被添加到我正在处理请求并发送 200 ok 的地方。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:37:16.107

为什么码头应该使用您当前的设置重定向到 https 连接器？要实现这样的事情，您必须例如向您的 webapp 添加一个安全约束，如此处所述（我在 google 中找到的第一个链接。只需搜索 webapp security-constraint 机密以查找更多示例）：[http ://docs.oracle .com/javaee/6/tutorial/doc/gkbaa.html](http://docs.oracle.com/javaee/6/tutorial/doc/gkbaa.html)

或者添加一个处理程序，从 http 连接器重定向到 https 连接器或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-21T19:25:47.957

您可能需要配置`transport-guarantee`元素`web.xml`才能使其工作。

请参阅： [http ://docs.oracle.com/cd/E19226-01/820-7627/bncbk/index.html](http://docs.oracle.com/cd/E19226-01/820-7627/bncbk/index.html)

# c# - 如何编辑正则表达式标签？

> ID：15403688
> 
> 赞同：1
> 
> 时间：2013-03-14T07:42:44.287
> 
> 标签：c#, regex, visual-studio-2010

如何编辑正则表达式标签。

这是我的代码：

```
var target="<p><a href="<ers:redirectURL>xxx</ers:redirectURL>" target="_blank">sean</a></p>";

var mc = new Regex("<(\\s*/?\\s*([^\\s/>]+).*?)>").Matches(target); 
```

只有 5 个值。

```
{<p>}
{<a href="<ers:redirectURL>}
{</ers:redirectURL>}
{</a>}
{</p>} 
```

我怎样才能得到这 6 个确切的值？

```
{<p>}
{<a}
{<ers:redirectURL>}
{</ers:redirectURL>}
{</a>}
{</p>} 
```

请帮助我如何编辑正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:00:23.210

对于您的示例，这将起作用：

```
<([^\s<>]+)>? 
```

您的要求尚不清楚，但这可能还有许多其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:12:02.143

另一个工作示例是：

```
(</?[a-zA-Z:]*)>? 
```

# java - 从浏览器运行本机 Java 应用程序

> ID：15403690
> 
> 赞同：2
> 
> 时间：2013-03-14T07:42:46.247
> 
> 标签：java, php, javascript, jquery

我正在使用 php。我的问题是我想运行一个我创建的 java 应用程序并将其 jar 文件放在客户端。我想运行这个 jar 文件，它位于客户端或用户桌面中，单击按钮一个 HTML 页面。这是否可以使用 javascript 或任何其他网络技术运行它。

谢谢和问候， AlenLee MJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:46:04.240

看看[Java Web Start](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136112.html)。这是一项让您从浏览器启动 Java 应用程序的技术，这些应用程序会自动从服务器下载。

或者，您可以使您的程序成为[Java 小程序](http://docs.oracle.com/javase/tutorial/deployment/applet/index.html)，它是在浏览器中运行的 Java 程序。

# asp.net - 正则表达式不允许下划线

> ID：15403693
> 
> 赞同：0
> 
> 时间：2013-03-14T07:42:49.937
> 
> 标签：asp.net, .net, regex

下面的正则表达式不允许带有下划线的电子邮件 ID，例如 myName_6@a.com

```
@"^([0-9a-zA-Z]([-.w]*[0-9a-zA-Z_])*@([0-9a-zA-Z][-w]*[0-9a-zA-Z].)+[a-zA-Z]{2,9})$" 
```

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T07:45:30.030

正则表达式中的任何地方都没有下划线，这说明它与下划线不匹配。尝试在 - 符号左侧的允许字符列表中添加下划线`@`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:46:00.040

试试这个

```
 /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/ 
```

# sql - MSSQL 2005 查询组日期 - 甚至没有记录的日期？

> ID：15403694
> 
> 赞同：2
> 
> 时间：2013-03-14T07:42:51.660
> 
> 标签：sql, sql-server-2005

我有这个 MS SQL 2005 查询：

```
SELECT 
    DATEDIFF(dd, getdate(), CreatedOn) as Day,
    COUNT(CreatedOn) as 'Active Cases'
FROM 
    [dbo].[IncidentBase]
WHERE
    (StatusCode != 6 AND StatusCode != 5)
    AND (CaseTypeCode = '200000' OR CaseTypeCode = '200005' OR CaseTypeCode = '200006')
GROUP BY
    DATEDIFF(dd, getdate(), CreatedOn)
ORDER BY
    Day DESC 
```

并返回如下内容：

```
-1   10
-2   6
-5   4
-7   8 
```

我真的希望它是这样的：

```
-1 10
-2 6
-3 0
-4 0
-5 4
-6 0
-7 8 
```

（在没有记录的日期之间插入零）

我怎样才能做到这一点？

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:51:38.030

在返回所有日期的子查询上尝试外连接

```
SELECT table_cal.day_diff as "Day",
  COALESCE(table_count.base_count,0) as "Active Cases"
FROM
(SELECT DISTINCT DATEDIFF(dd, getdate(), ibase.CreatedOn) as day_diff 
    FROM [dbo].[IncidentBase] ibase) table_cal
LEFT OUTER JOIN
(SELECT DATEDIFF(dd, getdate(), ibase.CreatedOn) as day_diff,
    COUNT(ibase.CreatedOn) as base_count
    FROM [dbo].[IncidentBase] ibase
    WHERE ibase.StatusCode NOT IN (5,6) AND ibase.CaseTypeCode IN ('200000','200005','200006')
    GROUP BY DATEDIFF(dd, getdate(), ibase.CreatedOn)) table_count
ON (table_cal.day_diff = table_count.day_diff)
ORDER BY table_cal.day_diff DESC 
```

背后的想法很简单。您需要一个子查询来生成现有日期的列表，另一个来生成结果值。然后你将两者都外连接并用 0 替换空值。

# jquery - highcharts 和 wordpress

> ID：15403702
> 
> 赞同：0
> 
> 时间：2013-03-14T07:43:46.013
> 
> 标签：jquery, wordpress, highcharts

有人可以概述将 highcharts 添加到 Wordpress 的步骤。

例如，我已将代码添加到我的标题中：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script> 
```

但这提供了服务器错误。

有没有人可以提供一步一步的，包括一个基本的图表，所以我可以看到它的工作。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:22:51.910

**在错误的标签上按帖子！忽略之前不完整的答案。这个比较饱满。缺口。**

嗨 - 我有同样的问题，因为 Wordpress 去掉了很多 HTML 标签。你需要做下面提到的一些事情。希望它可以帮助你。缺口。

1) 你需要绕过 Wordpress 剥离你的代码，所以安装插件“允许在帖子和页面中使用 Javascript”检查 hitreach.co.uk 插件。

2) 告诉你关于 highcharts 库的页面——我实际上把它放在我的 header.php 中，因为我经常使用图表。您可能更愿意将其放在帖子本身中。

对于 header.php 方法 - 在结束 head 标记之前放置一个指向 highcharts 库的链接。我把 jquery 链接和 highstock.js 链接都放在那里。当然，我必须将 js 库放在我的服务器上。我把链接像这样

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"        type="text/javascript"></script>
<script src="http://www.yourdomain.com/wp-content/plugins/highcharts/js/highstock.js"    type="text/javascript"></script> 
```

请注意，我的服务器上必须有 highstock.js 文件——第二个链接显示了我放置它的位置。

3）创建一个新帖子，在那里你需要用这些新标签包装js代码：

```
[js] Your JS Code [/js] 
```

[js] 标签有效地替换了常规 html 中的 script 标签。

这是完整的帖子...

```
[js]

  $(function() {
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-       c.json&callback=?', function(data) {

    // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },

        rangeSelector : {
            selected : 1
        },

        title : {
            text : 'AAPL Stock Price'
        },

        series : \[{
            name : 'AAPL Stock Price',
            data : data,
            marker : {
                enabled : true,
                radius : 3
            },
            shadow : true,
            tooltip : {
                valueDecimals : 2
            }
        }\]
    });
    });
 });

[/js]

<div id="container" style="width: 100%; height: 400px"></div> 
```

# asp.net - 如何在 Web 配置的 App Setting 标签中添加带有“&”等特殊字符的键

> ID：15403710
> 
> 赞同：2
> 
> 时间：2013-03-14T07:44:08.680
> 
> 标签：asp.net, web-config, appsettings

我试图添加这个值，但它给了我错误

```
<add key="RssFeedURL" value="http://www.example.com/?cat=11&feed=rss2"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T07:45:39.327

您可以对其进行编码：

```
<add key="RssFeedURL" value="http://www.example.com/?cat=11&amp;feed=rss2"/> 
```

# c# - 如何更改图表“系列”中特定数据点的颜色？

> ID：15403711
> 
> 赞同：5
> 
> 时间：2013-03-14T07:44:12.987
> 
> 标签：c#, charts

![当前出现的图表截图](../Images/024c1191541363983833390ffded2ee8.png)我不知道是否可以说清楚，所以这里是代码： -

```
 Series series2 = null;
    for (int i = 0; i < 4; i++)
    {
        series2 = chart2.Series.Add(subjectnames[i]);
    }
    for (int i = 0; i < 4; i++)
    {
        series2.Points.Add(attemptper[i]);
        series2.Points.Add(correctper[i]);
    } 
```

现在，我只想以与“正确”栏不同的颜色显示“尝试者”栏。默认情况下，它们以灰蓝色显示。我该如何完成？

图表全部显示为蓝色。我希望它们以不同的颜色出现。我想我没有正确地将数据添加到图表中以实现这一目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-23T14:19:21.320

您可以像这样更改系列点（索引）上的颜色：

```
 Chart1.Series[1].Points[0].Color = Color.Red 
```

让图表重新绘制也可能需要一些代码，具体取决于您在做什么。对我来说，我想为我的图表制作动画，在程序运行时动态构建数据点（一列），显示我正在做的一些工作的状态，这需要：

```
 Chart1.Series.ResumeUpdates()
        Chart1.Series[1].Points.Item[0].YValues = Double(1) {MyNewValue, 0}
        Chart1.Series[1].Points[0].Color = Color.Red
        Chart1.DataBind()
        Chart1.Series.Invalidate()
        Chart1.Series.SuspendUpdates() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T08:14:32.250

我建议在您的图表中添加一个额外的系列并更改其颜色设置。

# java - 使用 Com4 从 Java 进行 QC 连接

> ID：15403725
> 
> 赞同：1
> 
> 时间：2013-03-14T07:45:26.613
> 
> 标签：java, hp-quality-center

我正在尝试使用以下代码连接到 QC：

```
ITDConnection2 QCconn= ClassFactory.createTDConnection();
QCconn.initConnectionEx(Parameters.QC_URL);
QCconn.login(Parameters.QC_USERNAME, Parameters.QC_PASSWORD);
QCconn.connect(Parameters.QC_DOMAIN, Parameters.QC_PROJECT); 
```

但是我在线上遇到了异常

```
ITDConnection2 QCconn= ClassFactory.createTDConnection(); 
```

异常：com4j.ComException：80004002 QueryInterface 失败：不支持此类接口：.\com4j.cpp:163

我的电脑上安装了 QC。我在其他电脑上也遇到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:46:52.590

您尝试连接哪个**版本的 Quality Center ？**

otaclient.jar 文件应与 OTACLIENT.dll 兼容。

您还应该在构建路径中包含**com4j.jar 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-16T14:02:42.750

我们遇到了同样的问题，我们在构建路径中有 com4j.jar

我们尝试连接到 QC 11，但我们的 Windows 也安装了 QC 10。所以QC的版本有问题。我们从 QC 11 安装了 TDConnect 以运行代码。

如果您运行 QC 10，它会再次将 OTAClient.dll 11 回滚到 10。

您还在 VM 参数中将 otaclient.dll 添加到 java.library.path。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-01T15:59:31.350

我们通过重新安装 Quality center 11.52 并以管理员模式运行 IE 并将 TDConnect 插件添加到 QC 来解决此问题，然后将 java 程序连接到 QC。

# python - Flask - 重定向 url_for 错误

> ID：15403733
> 
> 赞同：-1
> 
> 时间：2013-03-14T07:46:00.857
> 
> 标签：python, flask-wtforms, flask-extensions, flask

我的烧瓶应用程序中针对以下代码抛出了错误。

```
@@app.route('/')
.....

return redirect(url_for('nextPage'),id=DBTable.id)

@app.route('/<path:id>')
@login_required
def nextPage(id):
return render_template('page2.html')               

Error - 
---------------------------------------------------------------------------
File "C:\Python27\lib\site-packages\werkzeug\routing.py", line 1607, in build
raise BuildError(endpoint, values, method)
BuildError: ('nextPage', {}, None)
<SocketIOServer fileno=116 address=0.0.0.0:5000>: Failed to handle request:
request = POST /landingPage HTTP/1.1 from ('127.0.0.1', 50287)
application = <flask.app.Flask object at 0x0000000002643B70> 
```

请帮我解决上述问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T08:48:27.560

除了所有明显的语法错误外，应该通过将传递给路由的参数放在`url_for`块中来解决问题。

```
@app.route('/')
def index():
    # ...
    return redirect(url_for('nextPage', id=DBTable.id))

@app.route('/<id>')
def nextPage(id):
    # ...
    return render_template('page2.html') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-27T03:55:28.073

尝试使用此代码

```
from flask import *

app = Flask(__name__)

@app.route('/')
def index():
    return redirect(url_for('random', id="blah blah"))

@app.route('/<id>')
def random(id):
    return id

if __name__ == '__main__':
    app.run(debug=True) 
```

并告诉我你是否有任何错误。

# wpf - 将新的上下文菜单项添加到在 WPF 中具有默认 ContextMenu 的 WindowsFormsHost

> ID：15403741
> 
> 赞同：2
> 
> 时间：2013-03-14T07:46:26.143
> 
> 标签：wpf, contextmenu, windowsformshost

我们正在使用一些没有 WPF 等价物的 ActiveX 或 windows 窗体控件，所以自然我们使用 WindowsFormsHost 来托管这些控件。我们通常用一些通用控件（例如按钮）来制作一个 UserControl 来实现通用功能。一段 xaml 代码是这样的：

```
<WindowsFormsHost Name="windowsFormsHost1" >   
    <WindowsFormsHost.ContextMenu>
        <ContextMenu>                    
            <MenuItem Header="_Test1" />
        </ContextMenu>                    
    </WindowsFormsHost.ContextMenu>

    <AxOWC:AxPivotTable x:Name="pivotTable" />        
</WindowsFormsHost>        
.... 
```

AxPivotTable 是一个 OWC（办公 Web 组件）控件。在另一个 UserControl 中，我们在 WindowsFormsHost 中添加了一个 ReportViewer。请注意，通常 AxPivotTable 或 ReportViewer 具有其默认上下文菜单，即使我没有添加任何 ContextMenu 项目。

到目前为止，我的自定义 ContextMenu 还没有显示（仍然显示默认的）。感谢[这个问题](https://stackoverflow.com/questions/341747/contextmenu-on-windowsformshost-control)，我发现我仍然需要在代码隐藏中捕获鼠标按下事件并设置

```
windowsFormsHost1.ContextMenu.IsOpen = True 
```

显示上下文菜单（虽然很奇怪）。

现在我的问题是，现在只有这个 Test1 ContextMenu 在这里。默认的 ContextMenu 将不再显示。正如我所提到的，我们想要的是在这些默认上下文菜单之上添加自定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:07:25.097

对于您上面的示例，这将是我的工作“解决方案”，我不知道您是否也需要为您的`WindowsFormsHost`. 希望对你有帮助

## XAML

```
<Window x:Class="tete.MainWindow"
        xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation"  
        xmlns="http://schemas.microsoft.com/netfx/2009/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms">
    <Grid>
        <av:WindowsFormsHost Name="myWFH">
            <wf:ComboBox Name="myCBox">
            <wf:ComboBox.ContextMenu>
                <wf:ContextMenu>
                    <wf:ContextMenu.MenuItems>
                        <wf:MenuItem Text="somet"/>
                    </wf:ContextMenu.MenuItems>
                </wf:ContextMenu>
            </wf:ComboBox.ContextMenu>
        </wf:ComboBox>

    </Grid>
</Window> 
```

## 代码隐藏

```
using System.Windows;
using System.Windows.Controls;

namespace tete
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

        var child = myWFH.Child as System.Windows.Forms.ComboBox;
        child.ContextMenu.MenuItems.Add(new System.Windows.Forms.MenuItem("my new menuitem"));
        }
    }
} 
```

**编辑** 我希望现在它适合您的需求:) 我正确理解您想要的 ToDo

# python - 使用 python opencv cv2 仅模糊图像中的一个轮廓

> ID：15403749
> 
> 赞同：3
> 
> 时间：2013-03-14T07:46:59.800
> 
> 标签：python, opencv, blur, contour

这只会模糊轮廓，但速度很慢。有更快的方法吗？

```
#img is the image
#cnt is a contour
#blur is a blurred copy of the image

temp = np.zeros(img.shape,np.uint8)
cv2.drawContours(temp,[cnt],0,255,-1)
pp = np.transpose(np.nonzero(temp))   #all pixelpoints in contour

for k in range(0, len(pp)):
  img[ pp[k,0],pp[k,1] ] = blur[ pp[k,0],pp[k,1] ] 
```

添加细节：我想加快的一般操作类型是：对于某些输入图像，模糊（或以其他方式过滤）图像的副本，在模糊副本中找到轮廓，将轮廓内的所有像素复制到原始图像。

我读过 Python 中的 for 循环相对较慢。[numpy.where](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)看起来像这个工具。帮我看看语法。这不起作用：

> img = np.where([temp != 0], 模糊, img)

编辑：这有效，速度是第一个代码块的两倍。

```
#img is the image
#cnt is a contour
#blur is a blurred copy of the image
temp = np.zeros(img.shape,np.uint8)
cv2.drawContours(temp,[cnt],0,255,-1)
x = np.where(temp == 0)
img[x] = blur[x] 
```

有什么方法可以加快操作速度吗？

# ios - CoreData 一对多关系问题

> ID：15403753
> 
> 赞同：0
> 
> 时间：2013-03-14T07:47:23.560
> 
> 标签：ios, core-data, nsmanagedobject, nsmanagedobjectcontext, nsentitydescription

我正在处理 coreData 一对多的关系。例如文件夹 - 文件。所以我想要做的是从一个文件夹中获取一个文件并将其复制到另一个文件夹。

```
So for example 
folder   A  B
file     a  b
file     c  d 
```

现在我想将文件 c 从文件夹 A 复制到文件夹 B，它应该是这样的

```
folder A B
file   a b
file   c d
file     c 
```

为了执行此操作，我编写了此代码这发生在某些视图控制器中，该视图控制器在某些导航操作后打开

首先我在这里提取所有文件夹

```
 NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Folder" inManagedObjectContext:self.managedObjectContext];

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entityDescription];
    NSError *error = nil;
    m_folderResults = [self.managedObjectContext executeFetchRequest:request error:&error]; 
```

然后我创建了一个新的文件实例

```
File *fileObject = [NSEntityDescription insertNewObjectForEntityForName:@"File" inManagedObjectContext:self.managedObjectContext];
    fileObject = (passed file object to this ViewController)

Folder *folderObject = [m_folderResults objectAtIndex:m_indexPath.row];

    NSMutableOrderedSet *files = [folderObject mutableOrderedSetValueForKey:@"file"];
    [files addObject:fileObject]; 
```

这是有效的，但我面临的问题是我以这种方式得到它

```
folder A B
file   a b
file     d
file     c 
```

这意味着它将从一个文件夹中删除并添加到另一个文件夹中。

所以我想知道我哪里出错了。

问候兰吉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:51:49.333

首先，根据您发布的代码，您正在用旧文件对象覆盖新创建的文件对象。当然，如果您将其插入其他地方，它将从以前的位置消失。

其次，如果您想要 (1) 真正复制文件`c`，您想要创建一个新实例并将其分配给不同的文件夹，或者您 (2) 只想让第二个文件夹也指向相同的文件（如果文件不更改，这将是有意义的）。

对于情况（1），您必须

```
File *fileToBeCopied; 
Folder *destinationFolder;
File *newFile = [NSEntityDescription insertNewObjectForEntityForName:@"File" 
                          inManagedObjectContext:self.managedObjectContext];

// now you need to copy all the attributes of fileToBeCopied
// over to newFile

[destinationFolder addFileObject:newFile];
// or
newFile.folder = destinationFolder; 
```

对于情况 (2)，请确保您的数据模型允许一个文件有多个文件夹（多对多关系）。

```
[destinationFolder addFileObject:fileToBeCopied];
// or
[fileToBeCopied addFolderObject:destinationFolder]; 
```

# eclipse - HibernateException：无法解析配置

> ID：15403759
> 
> 赞同：1
> 
> 时间：2013-03-14T07:47:44.867
> 
> 标签：eclipse, hibernate, exception-handling

我的休眠有问题

痕迹：

```
org.hibernate.HibernateException: Could not parse configuration: /hibernate.cfg.xml
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1586)
    at org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:1212)
    at org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:107)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1520)
    at org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:1194)
    at org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:107)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1506)
    at org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:1188)
    at hibernate.filling.HibernateFill.fillDetail(HibernateFill.java:22)
    at scanningDirective.ScanningTimer$1.run(ScanningTimer.java:57)
    at java.util.TimerThread.mainLoop(Timer.java:555)
    at java.util.TimerThread.run(Timer.java:505)
Caused by: org.dom4j.DocumentException: www.hibernate.org Nested exception: www.hibernate.org
    at org.dom4j.io.SAXReader.read(SAXReader.java:484)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1576)
    ... 11 more 
```

实际上我不明白为什么它不起作用，因为前一段时间它运行良好并且在我离开项目一段时间后，此时我可以在 eclips 或其他任何东西上安装一些插件，当然我明白代码不能神奇地改变。那么，您认为这种行为的原因是什么？

抱歉……我怎么忘记了……这里是 Hibernate.cfg.xml

```
<?xml version='1.0' encoding='utf-8'?>

<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.5//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>

    <session-factory>

        <!-- Database connection settings -->
        <property name="connection.driver_class">org.postgresql.Driver</property>
        <property name="connection.url">jdbc:postgresql://localhost:5432/mydb</property>
        <property name="connection.username">postgres</property>
        <property name="connection.password">1</property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">2</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property>

        <!-- Disable the second-level cache  -->
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

        <!-- Drop and re-create the database schema on startup -->
        <property name="hbm2ddl.auto">update</property>

        <!-- Names the annotated entity class -->
        <mapping class="documentElements.Header"/>
        <mapping class="documentElements.Detail"/>

    </session-factory>

</hibernate-configuration> 
```

在我改变之后

```
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.5//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"> 
```

至：

```
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd"> 
```

一切都开始工作了。我不明白为什么它第一次不起作用。马贝我需要重新启动项目...

# ssas - 我怎样才能只获得低于所有成员的成员？

> ID：15403761
> 
> 赞同：0
> 
> 时间：2013-03-14T07:47:52.347
> 
> 标签：ssas, ssms, mdx

我只想在我的交叉连接中获得低于所有成员的成员，而不是获得所有成员本身。我正在尝试“孩子”，但我不工作..我的查询：

```
with
member [Measures].[Price] as 
    ([Measures].[Invoiced_Price]),
    format_string = "Currency"
select{[Measures].[Price]
} on columns,
{
    {[Product].[Product_ProdTp].Members} *
    {[Product].[Product_NoAndName].[All].children}
} on rows 
```

部分结果：

```
All 11 -  Celerifere                            $8,191,736.81
All 111 - Sauerbronn                            $2,768,882.00
All 112 - Vector                                $1,791,077.00
Bikes     Sauerbronn                            $13,941,388.88
Bikes     Vector                                "some value" 
```

这是层次结构的样子：

```
[Product]
 [Product_NoAndName]
  [Members]
   [All]
    Sauerbronn                          
    Vector 
```

我的问题是我不希望所有数据首先在所有成员下然后分开，我只希望它分开。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:28:54.663

您可以尝试[后代](http://www.iccube.com/support/documentation/mdx/Descendants.html)功能。

```
Descendants( [Product].[Product_NoAndName].[All], 1 ) 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:56:51.230

解决方案是在第一个成员而不是第二个......

```
with
member [Measures].[Price] as 
    ([Measures].[Invoiced_Price]),
    format_string = "Currency"
select{[Measures].[Price]
} on columns,
{
    {[Product].[Product_ProdTp].[Product_ProdTp].Members} *           // here i changed
    {[Product].[Product_NoAndName].[All].children}
} on rows 
```

# login - 2013 年 3 月：Paypal Sandbox 登录循环返回到开发人员页面

> ID：15403762
> 
> 赞同：2
> 
> 时间：2013-03-14T07:47:54.623
> 
> 标签：login, paypal, sandbox

自 2013 年 3 月 Paypal 开发人员更换以来，我一直无法进入沙箱。

我使用我的实际 Paypal 帐户详细信息登录到新的开发人员网站。

我设法使用链接 **“寻找沙盒？导入您的测试帐户以继续测试。了解什么是新的”将我的帐户导入新的开发站点（令人担忧地标记为“测试版”）。**

但是单击任何帐户上的“沙盒站点”链接会导致我被带到：

[在这个链接](https://www.sandbox.paypal.com/uk/cgi-bin/webscr?cmd=_home&country_lang.x=true)中，我看到一个 Paypal Sandbox 徽标和一个链接，上面写着“请登录以使用 PayPal Sandbox 功能”。

单击此链接将带您回到您来自的地方 - 那是我已经登录的开发人员页面。

我确实向 Paypal 提出了支持问题，但一周过去了，但仍未得到答复，所以我希望这里有人能告诉我在这个新版本中我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:25:36.227

正如 Andrew Angell 所指出的 - 这种疯狂的行为归结为 Web 浏览器缓存。我刚刚清除了 Chrome 中的所有内容（工具 > 清除浏览数据）并从一开始就擦除了所有内容，就这样。很好的收获，谢谢安德鲁。赞赏。

我尝试的每个浏览器都这样做的原因是因为我已经将它们全部与 Paypal 一起使用 - 当然 - 所以它们都做同样的事情，导致你发现问题出在上游。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:03:20.897

我无法重现这一点。我登录到我的沙盒帐户就好了。我还可以毫无问题地测试 Express Checkout 之类的东西。

我知道浏览器缓存和 cookie 通常是沙盒上的一个大问题。例如，当我在看到您的帖子后第一次尝试此操作时，在尝试加载 sandbox.paypal.com 时遇到代理错误。不过，我关闭并重新打开浏览器，然后一切都按预期工作。也许试一试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T12:35:44.330

只需按一下即可清除缓存和 cookie

CTRL + SHIFT + 删除 WINDOWS

对于 MAC，COMMAND + SHIFT + DELETE

这个对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T12:13:34.513

清除对我没有帮助，**使用 CHROME INCOGNITO 模式**（新窗口） - 它对我有用 :)

# excel - 将 Aspx 视图页面 HTML 表数据导出到 Excel 文件

> ID：15403766
> 
> 赞同：1
> 
> 时间：2013-03-14T07:48:25.210
> 
> 标签：excel, asp.net-mvc-3, html-table

在我的`MVC3 Web application`我有一个 aspx 主视图页面和一个部分视图页面。我`table`的在`Partial view`。我也向它申请了`Table sorter`其他表格`css`。现在我想将此表中的数据导出到excel。我尝试了很多方法，但对我没有用。谁能帮帮我请...

我的部分观点的代码是：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<ApricaCRMEvent.Models.CRM.DatabaseEntities.CRM_Doctor_Request>>" %>

<!-- for table sorter and table Pager -->
<script src="../../__jquery.tablesorter/jquery.tablesorter.js" type="text/javascript"></script>
<script src="../../__jquery.tablesorter/jquery.tablesorter.widgets.js" type="text/javascript"></script>
<script src="../../__jquery.tablesorter/jquery.tablesorter.pager.js" type="text/javascript"></script>

<script type ="text/javascript" id="js">
    $(function () {

        // **********************************
        //  Description of ALL pager options
        // **********************************
        var pagerOptions = {

            // target the pager markup - see the HTML block below
            container: $(".pager"),

            // use this url format "http:/mydatabase.com?page={page}&size={size}&{sortList:col}"
            ajaxUrl: null,

            // process ajax so that the data object is returned along with the total number of rows
            // example: { "data" : [{ "ID": 1, "Name": "Foo", "Last": "Bar" }], "total_rows" : 100 }
            ajaxProcessing: function (ajax) {
                if (ajax && ajax.hasOwnProperty('data')) {
                    // return [ "data", "total_rows" ];
                    return [ajax.data, ajax.total_rows];
                }
            },

            // output string - default is '{page}/{totalPages}'
            // possible variables: {page}, {totalPages}, {filteredPages}, {startRow}, {endRow}, {filteredRows} and {totalRows}
            output: '{startRow} to {endRow} ({totalRows})',

            // apply disabled classname to the pager arrows when the rows at either extreme is visible - default is true
            updateArrows: true,

            // starting page of the pager (zero based index)
            page: 0,

            // Number of visible rows - default is 10
            size: 10,

            // if true, the table will remain the same height no matter how many records are displayed. The space is made up by an empty
            // table row set to a height to compensate; default is false
            fixedHeight: true,

            // remove rows from the table to speed up the sort of large tables.
            // setting this to false, only hides the non-visible rows; needed if you plan to add/remove rows with the pager enabled.
            removeRows: false,

            // css class names of pager arrows
            cssNext: '.next', // next page arrow
            cssPrev: '.prev', // previous page arrow
            cssFirst: '.first', // go to first page arrow
            cssLast: '.last', // go to last page arrow
            cssGoto: '.gotoPage', // select dropdown to allow choosing a page

            cssPageDisplay: '.pagedisplay', // location of where the "output" is displayed
            cssPageSize: '.pagesize', // page size selector - select dropdown that sets the "size" option

            // class added to arrows when at the extremes (i.e. prev/first arrows are "disabled" when on the first page)
            cssDisabled: 'disabled' // Note there is no period "." in front of this class name
        };

        // Extend the themes to change any of the default class names ** NEW **
        $.extend($.tablesorter.themes.jui, {
            // change default jQuery uitheme icons - find the full list of icons here: http://jqueryui.com/themeroller/ (hover over them for their name)
            table: 'ui-widget ui-widget-content ui-corner-all', // table classes
            header: 'ui-widget-header ui-corner-all ui-state-default', // header classes
            footerRow: '',
            footerCells: '',
            icons: 'ui-icon', // icon class added to the <i> in the header
            sortNone: 'ui-icon-carat-2-n-s',
            sortAsc: 'ui-icon-carat-1-n',
            sortDesc: 'ui-icon-carat-1-s',
            active: 'ui-state-active', // applied when column is sorted
            hover: 'ui-state-hover',  // hover class
            filterRow: '',
            even: 'ui-widget-content', // odd row zebra striping
            odd: 'ui-widget-content'   // even row zebra striping
        });

        // call the tablesorter plugin and apply the ui theme widget
        $("table").tablesorter({

            theme: 'jui', // theme "jui" and "bootstrap" override the uitheme widget option in v2.7+

            headerTemplate: '{content} {icon}', // needed to add icon for jui theme

            // widget code now contained in the jquery.tablesorter.widgets.js file
            widgets: ['uitheme', 'zebra'],

            widgetOptions: {
                // zebra striping class names - the uitheme widget adds the class names defined in
                // $.tablesorter.themes to the zebra widget class names
                zebra: ["even", "odd"]

                // set the uitheme widget to use the jQuery UI theme class names
                // ** this is now optional, and will be overridden if the theme name exists in $.tablesorter.themes **
                // uitheme : 'jui'
            }

        })
        // bind to pager events
        // *********************
        .bind('pagerChange pagerComplete pagerInitialized pageMoved', function (e, c) {
            var msg = '"</span> event triggered, ' + (e.type === 'pagerChange' ? 'going to' : 'now on') +
                ' page <span class="typ">' + (c.page + 1) + '/' + c.totalPages + '</span>';
            $('#display')
                .append('<li><span class="str">"' + e.type + msg + '</li>')
                .find('li:first').remove();
        })

        // initialize the pager plugin
        // ****************************
        .tablesorterPager(pagerOptions);
    });
</script>
<!-- end table sorter and table Pager -->

<table class="tablesorter" id="ResultList">
<thead id="headers">    
    <tr>
        <th>
            CRMId
        </th>
        <th>
            Territory
        </th>
        <th>
            Doctor(MDLNo)
        </th>
        <th>
            Requester 
        </th>
        <th>
            Suggester 
        </th>
        <th>
            Division 
        </th>
        <th>
            Estimated
        </th>
        <th>
            Actual
        </th>
        <th>
            Priority
        </th>
        <th>
            Notation
        </th>
        <th>
            Deadline
        </th>
        <th>
            ExecutedDate
        </th>
        <th>
            CreatedDate
        </th>
        <th>
            CRM State
        </th>
        <th>
            Service State
        </th>
    </tr>
</thead>
<tbody>
<% foreach (var item in Model) { %>
    <tr>
        <td>
            <%: Html.ActionLink(((int)item.Id).ToString(), "DetailsCRMRequest", "CRM", new { Id = item.Id, controllerName = "FilterCRMRequest", actionName = "Index" }, null)%>
            <%--<%: Html.DisplayFor(modelItem => item.Id) %>--%>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Territory_Name) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Request_For_Name) %> (<%: Html.DisplayFor(modelItem => item.Request_For_Id) %>)
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Requester_Name) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Suggester_Name) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Division_Name) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Estimated_Amount) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Actual_Amount) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Compute_Priority) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.CRM_Notation_Name) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Deadline) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Executed_Date) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Date_Created) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Compute_CRM_State) %>
        </td>
        <td>
            <%: Html.DisplayFor(modelItem => item.Compute_Service_State) %>
        </td>
    </tr>
<% } %>

</tbody>
<tfoot>
<tr class="pager" align="center">
    <td colspan="15">
        <img src="../../Content/images/first.png" class="first" alt="First" />
        <img src="../../Content/images/prev.png" class="prev" alt="Prev" />
        <span class="pagedisplay"></span> <!-- this can be any element, including an input -->
        <img src="../../Content/images/next.png" class="next" alt="Next" />
        <img src="../../Content/images/last.png" class="last" alt="Last" />
        <select class="pagesize" title="Select page size">
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="30">30</option>
            <option value="40">40</option>
        </select>
        <select class="gotoPage" title="Select page number"></select>
    </td>
</tr>
</tfoot>
</table> 
```

我已经尝试过这个：这可行，但给了我 Excel 文件中的 css 和来自所有 50 条记录结果的 5 个 td 字段......

```
function Export(e) {
        window.open('data:application/vnd.ms-excel,' + $('#ResultList').html());
        e.preventDefault();
    } 
```

而这个：它并不完全有效......

```
function Export() {
        alert("called function");
        str = "";

        var myTableHead = document.getElementById('headers');
        var rowCount = myTableHead.rows.length;
        var colCount = myTableHead.getElementsByTagName("tr")[0].getElementsByTagName("th").length;

        var ExcelApp = new ActiveXObject("Excel.Application");
        var ExcelSheet = new ActiveXObject("Excel.Sheet");
        ExcelSheet.Application.Visible = true;
        alert("before for");
        for (var i = 0; i < rowCount; i++) {
            for (var j = 0; j < colCount; j++) {
                str = myTableHead.getElementsByTagName("tr")[i].getElementsByTagName("th")[j].innerHTML;
                ExcelSheet.ActiveSheet.Cells(i + 1, j + 1).Value = str;
            }
        }
        alert("done");
    } 
```

# c++ - RegCloseKey() 函数应该仅在成功调用 RegOpenKey() 后使用，还是无条件使用？

> ID：15403767
> 
> 赞同：1
> 
> 时间：2013-03-14T07:48:29.300
> 
> 标签：c++, windows, registry

如果我打电话，无论成功还是只有成功，`RegOpenKeyEx()`我都必须要钥匙吗？`RegCloseKey()``RegOpenKeyEx()``RegOpenKeyEx()`

那是：

```
lRes = RegOpenKeyExW(HKEY_CURRENT_USER, L"SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", 0, KEY_READ, &hKey);

   if(lRes == ERROR_SUCCESS)
   {
       //doSomething
   }
   RegCloseKey(hKey); 
```

或者：

```
lRes = RegOpenKeyExW(HKEY_CURRENT_USER, L"SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", 0, KEY_READ, &hKey);

   if(lRes == ERROR_SUCCESS)
   {
       //doSomething
       ...
       RegCloseKey(hKey);
   } 
```

第一种情况下的行为是什么？关闭未成功打开的钥匙是否安全？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:49:47.777

只有在打开成功的情况下才应该关闭它，否则 HKEY 中返回的句柄将无效（可能为 NULL）。

# ios - 可以生成不同口音的自然人声的软件？

> ID：15403769
> 
> 赞同：0
> 
> 时间：2013-03-14T07:48:36.000
> 
> 标签：ios, audio, text-to-speech

我正在为孩子们制作一个交互式应用程序，它使用人声进行交互；我需要一个可以生成自然人类语音（如 TTS）或任何其他方式的音频文件的软件。该应用程序将出于商业目的使用音频文件，我准备购买或许可该软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:09:11.927

[NeatSpeech](http://www.politepix.com/neatspeech/)可以生成美国和英国口音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:38:57.113

您可以使用[TTSEngine.com](http://www.ttsengine.com "TTSEngine.com")作为 Google 或其他 TTS 服务的替代品。他们每个月都会免费为您提供 1000 条默认语音请求。

他们还出售自定义声音，因此如果您希望您的应用程序具有独特的声音，他们可以录制演员并根据演员的声音构建 TTS。他们会专门为您提供自定义语音，以便在您的应用程序中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:55:40.950

尝试使用[ispeech](http://www.ispeech.org/)。它适用于移动应用程序。它不是免费的。

# sql - 如果存在向后关系，则注释行（Postgres）

> ID：15403775
> 
> 赞同：0
> 
> 时间：2013-03-14T07:49:01.887
> 
> 标签：sql, postgresql

所以我有 3 个表`Recommendation`：`Article`和`User`。

推荐有 4 列：

```
id | integer
article_id |integer
user_id |integer
submit_time |integer 
```

文章有3栏：

```
id | integer
title
url 
```

我需要获取所有文章的列表，同时还使用新的推荐列注释每一行，如果相关用户推荐了该文章，则为 1，否则为 0。结果中不应该有任何重复`Article`，我需要它按`Recommendation`'`submit_time`列排序。

这是在 Postgres - 9.1.8 上。

```
SELECT DISTINCT ON(t.title) t.title,
  t.id, t.url, 
  MAX(recommended) as recommended
FROM ( 
    SELECT submitter_article.title as title,
      submitter_article.id as id,
      submitter_article.url as url,
      1 as recommended 
    FROM submitter_article, submitter_recommendation
    WHERE submitter_recommendation.user_id=?
      AND submitter_recommendation.article_id=submitter_article.id 

    UNION ALL

    SELECT submitter_article.title as title,
      submitter_article.id as id,
      submitter_article.url as url,
      0 as recommended
    FROM submitter_article
     ) as t 

    GROUP BY t.title, t.id, t.url, recommended 
```

我正在传递`user id`一个`?`

我一直在尝试这样做一段时间，但无法弄清楚。我提出的查询要么将所有`recommended`值返回为 0，要么返回重复的文章行（一个带有`recommended=0`，另一个带有`recommended=1`）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:57:05.170

如果您还使用并且应该使用显式联接而不是隐式联接，则不需要子查询，`CASE`就可以了。这个查询应该让你开始：`DISTINCT ON``GROUP BY`

```
SELECT DISTINCT ON (sa.title) sa.title, sa.id, sa.url,
                              (CASE
                                   WHEN sr.id IS NULL THEN 0
                                   ELSE 1
                               END) AS recommended
FROM submitter_article AS sa
LEFT JOIN submitter_recommendation AS sr ON sa.id=sr.article_id
AND sr.user_id=?
ORDER BY sa.title,sr.submit_time DESC; 
```

但仍有一些事情我不确定。你可以有两篇标题相同但ID不同的文章？在这种情况下，您可以选择具有较早/较晚推荐 submit_time 但如果没有推荐怎么办？您需要逻辑来了解如何选择不同的行以及最终如何对事物进行排序。

# javascript - 如何在不重复的情况下将所有可能的条目列出到数组中？[javascript/jquery]

> ID：15403776
> 
> 赞同：-1
> 
> 时间：2013-03-14T07:49:03.717
> 
> 标签：javascript, jquery, json

我有一个看起来有点像这样的 json 响应

```
[{"name":"Dude",       "id":"1",     "Category": "One"},
 {"name":"Guy,         "id":"12",    "Category": "One"},
 {"name":"Thomas"      "id":"12",    "Category": "Two"},
 {"name":"Richard",    "id":"2",     "Category": "One"},
 {"name":"Harold",     "id":"3",     "Category": "One"},
 {"name":"Pete",       "id":"4",     "Category": "Two"}] 
```

我希望能够遍历这个对象，并为所有不同种类的类别制作一个整齐的数组，例如，

```
["One", "Two"] 
```

如果我要遍历这个。我试图创建一个 for/if 循环，如果它已经被提及，它将忽略一个类别，但收效甚微。有更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T07:52:24.100

假设您已将 JSON 响应反序列化为包含您显示的对象的数组（我们称之为`yourArrayOfObjects`），循环并构建数组很简单：

```
var categories = [];
$.each(yourArrayOfObjects, function(index, entry) {
    if ($.inArray(entry.Category, categories) === -1) {
        categories.push(entry.Category);
    }
}); 
```

这用于[`$.each`](http://api.jquery.com/jQuery.each/)循环遍历数组，并[`$.inArray`](http://api.jquery.com/jQuery.inArray)检查我们是否已经看到了一个类别。

您也可以在不使用 jQuery 的情况下使用[`Array#forEach`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.18)（ES5 添加，出现在所有现代浏览器上，但显然缺少一些旧浏览器）和[`Array#indexOf`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.14)（从 IE7 向下丢失），这两者都可能由您可能处理的任何“ES5 shim”处理想查找和使用。

# php - 使用 Thrift 和 Php 在 HBase 中上传、检索和显示图像

> ID：15403779
> 
> 赞同：0
> 
> 时间：2013-03-14T07:49:15.453
> 
> 标签：php, image, hbase, thrift

我已经设置了 HBase 并尝试使用 Thrift-Php 上传图像然后显示它。我有一张表，其中包含一个名为 info 的列族，并使用了以下内容：

```
$tmpName=$_FILES["file"]["tmp_name"];
$fp = fopen($tmpName, 'r');
$data = fread($fp, filesize($tmpName));
$data = addslashes($data);
fclose($fp);
try {
    $mutations = array(
         new Mutation( array(
            'column' => 'info:pic',
            'value' => $data
            ) ),
            );
$client->mutateRow( $t, $username, $mutations );
   } catch ( IOError $e ) {
        echo( "expected error: {$e->message}\n" );
   } 
```

这似乎有效，因为它在 Hbase 中存储了一些东西，然后

```
$arr = $client->getRow($t, $username);
foreach ( $arr as $k=>$TRowResult  ) {
$values = $TRowResult->columns;
asort( $values );
foreach ( $values as $k=>$v ) {
        $usr= $v->value;
        $content=$_GET['username'];
    header('Content-type: image/jpg');
        echo $usr;
} 
```

}

但我收到一条错误消息，指出图像包含错误。有人可以在 PHP 中提供一个例子吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:33:16.420

我认为，您的问题是您`$data = addslashes($data);`在存储数据时使用。将字符存储到 HBase 时无需引用字符。

而且，您可以像这样检索数据：

```
$values = $TRowResult->columns;
$usr= $values['info:pic']->value;
$content=$_GET['username'];
header('Content-type: image/jpg');
echo $usr; 
```

# spring - 从 jbpm 进程向 spring 发送反馈

> ID：15403780
> 
> 赞同：0
> 
> 时间：2013-03-14T07:49:18.480
> 
> 标签：spring, rest, spring-mvc, jbpm

我的应用程序是`Spring Framework 3.x.x.`在我的应用程序中编写的，我想`JBPM5.x`使用它的 REST API 集成流程。我已经完成了这件事，但我想向我的 spring 应用程序发送简单消息之类的反馈，以便我能够知道我的进程在进程退出时的状态。我无法找到使用 REST API 发送此类反馈的任何方法。

请为它提供正确的方向，或者提供任何其他方式来集成 Spring，`JBPM`以便我的 Spring 应用程序和`JBPM`进程可以在不同的应用程序容器实例（相同的应用程序服务器但两个不同的实例）中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:48:45.017

不确定 REST api 是否能够处理类似的事情，它基本上是一些用于获取/发送信息的无状态 API，但不处理异步通知。

我建议向引擎注册一个自定义流程侦听器，当流程完成时将收到通知，此时您可以做任何您想做的事情，例如发送 JMS 消息或任何其他类型的异步消息由您的应用程序拾取。

此信息可能也已存储在历史日志中。因此，如果您的 Spring 应用程序可以利用这一点，那也可能是一种选择。

# twitter-bootstrap - 如何将 jbootstrap 集成到 joomla cms

> ID：15403784
> 
> 赞同：1
> 
> 时间：2013-03-14T07:49:28.973
> 
> 标签：twitter-bootstrap, joomla

我是 joomla 的新手，谁能告诉我如何将我从 Google 搜索到的**jbootstrap集成到 joomla cms 中。**

很难找到如何融入令人兴奋的 joomla 设计。

jbootstrap是具有**Twitter Bootstrap****功能**的模板或插件吗？

 **是否适合使用**Twitter Bootstrap**进行自定义响应式设计？

[链接到 JBootstrap](http://jbootstrap.extly.com/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:56:16.023

下载包，在模板文件夹中创建一个新文件夹（例如，称之为“bootstrap”），然后在其中提取 JBootstrap 包。所以你的文件夹结构应该是这样的：

```
template_name/
     ├──bootstrap/
          ├── css/
          │   ├── bootstrap.css
          │   ├── bootstrap.min.css
          ├── js/
          │   ├── bootstrap.js
          │   ├── bootstrap.min.js
          ├── img/
              ├── glyphicons-halflings.png
              ├── glyphicons-halflings-white.png 
```

然后，在您的**模板文件夹（不是根文件夹！！）中打开您的***index.php* ，并将此 PHP 代码放在包含 Bootstrap 文件的某个位置。

 **```
$document = JFactory::getDocument();
if(!JFactory::getApplication()->get('jquery')){
     JFactory::getApplication()->set('jquery',true);
     $document->addScript(JURI::root() . "templates/template_name/js/jquery-1.8.3.js");
}
$document->addScript(JURI::root() . "templates/template_name/bootstrap/js/bootstrap.min.js");
$document->addStyleSheet(JURI::root() . "templates/template_name/bootstrap/css/bootstrap.min.css"); 
```

您还需要包括 jQuery，因此前几行检查它是否已被导入，并且仅在尚未导入时才导入它。这是一个很好的方法，因为多个 jQuery 库可以阻止事情的工作。

* * *

或者您可以像@David Fritsch 所说的那样，使用已经集成了 Bootstrap 的 Joomla 3.0。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:22:43.660

还有来自 JoomlaShack 的 JS_Wright 模板框架的选项...... Bootstrap 也已经很好地集成在其中。（在 Joomla 2.5.X 中效果很好）****

# apache - 在 DreamHost 上安装 OTRS

> ID：15403786
> 
> 赞同：0
> 
> 时间：2013-03-14T07:49:43.397
> 
> 标签：apache, debian, dreamhost, issue-tracking, otrs

我在 DreamHost 上使用 Debian VPS，想安装一个功能丰富的客户问题跟踪系统（不适用于像 Bugzilla 这样的软件开发）。OTRS 列出了我的候选名单，我按照[安装说明](http://wiki.otterhub.org/index.php?title=Installation_on_Debian_5.04_lenny)执行了“Web 服务器配置”步骤（/etc/init.d/apache2 重启），但重启步骤报告失败。然而 pgrep apache 显示它正在运行。事实上，事实证明，虽然 www.mysite/otrs/installer.pl 正在运行，但我的常规网站显示一个页面声称它没有内容（但是当我查看网站的文件夹时，它的内容很好，只是没有被提供）。

DreamHost Support 非常有帮助，但解释说他们不使用标准的 Debian Apache 服务器来托管网站，而是使用自己的。具体来说，Debian 服务器在 /etc/apache2，而 DreamHost 服务器在 /dh/apache2。DreamHost 支持确定 OTRS 安装说明正在配置通常的 Debian Apache 位置，该位置以某种方式优先考虑该服务器而不是 DreamHost 服务器。他们尝试将 otrs.conf 文件移动到 /dh/apache2 中，但尽管常规网站再次运行，但 OTRS 页面却没有。

有人在 DreamHost VPS 上成功安装过 OTRS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:38:18.293

我已经就此咨询了我们的一位管理员，以下是我们的建议：

您将需要：

1.  调整 DreamHost 的 Apache 构建以合并 OTRS 修改
2.  启动并运行 Debian Apache

这两个选项都需要管理员用户以及一些 Linux 命令行和 Apache 管理工具的知识。您还需要将您的 VPS 设置为 UNMANAGED，这意味着 DH Web 面板中对您的任何域的任何更改都不会产生任何影响。只需确保任何域的 DNS 记录都指向您的服务器。您还需要能够管理自己的 Apache 配置。

注意：这也意味着 DreamHost 支持不能也不会对您的域进行故障排除。非托管意味着以任何方式不受支持！

DreamHost 的 apache2 配置和默认的 Debian 构建之间存在一些核心差异。我观察到的第一个问题是 DreamHost 的配置不允许以 OTRS 文档建议的方式加载额外的配置文件。这意味着如果选择选项 1，您将需要手动将 OTRS 指令插入到 DreamHost 的配置文件中，这可能会很困难。

我建议在将 VPS 设置为非托管后完全移动或禁用 /dh 文件夹。这将不允许 DH-default Apache 在 VPS 启动时启动。您可能还需要删除 /etc/rc3.d/S02httpd2 中的 DH Apache 启动脚本和 /etc/init.d/httpd2 中的实际脚本。

一旦您自己的 Apache 版本成功运行，您可能会考虑将之前位于 /dh/apache2/apache2-ps/etc/httpd.conf 的 VirtualHosts 复制到您自己的 conf.d 目录中的域配置文件中，或者您可以随机播放您的网站文件并根据您的需要配置您的 Apache。

一旦您运行了自己的 Apache 风格，您应该能够根据他们的 wiki 实现 OTRS 指令。:)

# php - strcmp 给出了奇怪的结果

> ID：15403787
> 
> 赞同：0
> 
> 时间：2013-03-14T07:49:46.170
> 
> 标签：php, strcmp

我正在使用 strcmp 来比较数据库中的字符串。

```
strcmp($privilege,"admin") 
```

我确信数据 $privilege 是 admin 但我从 strcmp 得到的结果是 5

知道为什么会这样吗？没有空间什么的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:08:33.283

首先，感谢您的回复。

为什么返回 5？这是因为数据库。

我正在使用 nchar (MSSQL) 以最多 10 个字符存储它。

“admin”只使用 5，它会自动添加 5 个空格。

因此我从 strcmp 得到 5。谢了，兄弟们。

对我来说是一个很好的教训。

# multithreading - 使用 Winsock 处理具有单个 UDP 服务器的 10 个客户端

> ID：15403789
> 
> 赞同：2
> 
> 时间：2013-03-14T07:49:52.890
> 
> 标签：multithreading, udp, winsock, visual-studio-2008-sp1

我已经使用 UDP 套接字建立了一个服务器-客户端应用程序，但是我的服务器一次不能处理多个客户端。现在我想修改我的应用程序，使 10 个客户端每个运行在不同的机器上，而我的服务器运行在单独的机器上。我希望我的服务器能够与运行在 10 台不同机器上的 10 个客户端中的每一个进行通信。我也不想错过来自任何客户的数据。最好的方法是什么？请与我分享一些示例：（我已经在互联网上搜索了一周，但找不到任何可能适合我的应用程序要求的内容。等待帮助。

# backbone.js - Backbone.js 视图 + underscore.js 模板

> ID：15403790
> 
> 赞同：0
> 
> 时间：2013-03-14T07:49:56.233
> 
> 标签：backbone.js, underscore.js

我有一个 div 容器元素，在这个容器元素中我有多个模板。我想根据从后端返回的 json 有选择地加载模板。这是一个微不足道的问题，但面临这样做的问题。一些逻辑代码。

```
<div id = "container">
  <div class = "row page">
    <script type = "text/template" id = "template1">
      <div id = "template1_id">
      </div>
    </script>
    <script type = "text/template" id = "template2">
      <div id = "template2_id">
      </div>
    </script>
  </div>
</div> 
```

在我的主干视图中，我正在做类似的事情：

```
var someView = Backbone.view.extend({
  el: '.page'
  render: function() {
    el: '.page';
    var template1 = _.template($('#template1').html());
    this.$el.html(template1);
    //get Json from backend and render the template within the fetch method
    var collection1 = new someCollection();
    someCollection.url = "blah";
    someCollection.fetch ( function() {
      success: function() {
        var template2 = _.template($('#template2').html());
        $('#template1_id').html(template2);
      }
    });

  },
}); 
```

只有第一个模板被渲染，而不是第二个。我在这里做一些根本错误的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:02:51.237

如果您将两个模板都渲染到一个容器中，则应该使用`$.append`，而不是`$.html`，因此两者都会被附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:58:34.757

你有一个错字（不匹配的报价）

```
$('#template1_id").html(template2); 
```

应该

```
$("#template1_id").html(template2); 
```

# node.js - express.js 中的“app.render”和“res.render”有什么区别？

> ID：15403791
> 
> 赞同：82
> 
> 时间：2013-03-14T07:50:15.647
> 
> 标签：node.js, express

文档[`app.render`](http://expressjs.com/api.html#app.render)：

> 渲染一个带有回调的视图，该回调响应渲染的字符串。这是 的应用程序级变体`res.render()`，其他方面的行为方式相同。

文档[`res.render`](http://expressjs.com/api.html#res.render)：

> 渲染一个带有回调的视图，该回调响应渲染的字符串。发生错误时`next(err)`在内部调用。当提供回调时，可能的错误和呈现的字符串都会被传递，并且不会执行自动响应。

我如何确定何时使用哪一个？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-03-14T08:38:04.910

以下是一些区别：

1.  您可以`app.render`在*根级别*调用，并且`res.render`只能*在 route/middleware 内部*调用。

2.  `app.render`总是`html` *在回调函数中*返回，而`res.render`仅当您将回调函数指定为第三个参数时才会这样做。如果您`res.render`在没有第三个参数/回调函数的情况下调用，则呈现的 html 将使用状态代码发送到客户端`200`。

    看看下面的例子。

    *   **`app.render`**

        ```
        app.render('index', {title: 'res vs app render'}, function(err, html) {
            console.log(html)
        });

        // logs the following string (from default index.jade)
        <!DOCTYPE html><html><head><title>res vs app render</title><link rel="stylesheet" href="/stylesheets/style.css"></head><body><h1>res vs app render</h1><p>Welcome to res vs app render</p></body></html> 
        ```

    *   **`res.render`没有第三个参数**

        ```
        app.get('/render', function(req, res) {
            res.render('index', {title: 'res vs app render'})
        })

        // also renders index.jade but sends it to the client 
        // with status 200 and content-type text/html on GET /render 
        ```

    *   **`res.render`带第三个参数**

        ```
        app.get('/render', function(req, res) {
            res.render('index', {title: 'res vs app render'}, function(err, html) {
                console.log(html);
                res.send('done');
            })
        })

        // logs the same as app.render and sends "done" to the client instead 
        // of the content of index.jade 
        ```

3.  [`res.render`](https://github.com/strongloop/express/blob/2ccb6cf3507cac74716f87c6ee056e79f6afdc52/lib/response.js#L933)在内部使用[`app.render`](https://github.com/strongloop/express/blob/fea768dbccc036d883b03e38daebc38e5206031c/lib/application.js#L477)来渲染模板文件。

4.  您可以使用这些`render`功能来创建*html 电子邮件*。根据您应用程序的结构，您可能并不总是可以访问该`app`对象。

    例如在外部路由内部：

    **`app.js`**

    ```
    var routes = require('routes');

    app.get('/mail', function(req, res) {
        // app object is available -> app.render
    })

    app.get('/sendmail', routes.sendmail); 
    ```

    * * *

    **`routes.js`**

    ```
    exports.sendmail = function(req, res) {
        // can't use app.render -> therefore res.render
    } 
    ```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-14T08:08:07.237

`app.render`在需要渲染视图但不通过 h​​ttp 将其发送到客户端的场景中使用。html电子邮件浮现在脑海。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-18T10:03:43.920

除了这两个变体之外，还有`jade.renderFile`一个生成不需要传递给客户端的 html。

用法-

```
var jade = require('jade');

exports.getJson = getJson;

function getJson(req, res) {
    var html = jade.renderFile('views/test.jade', {some:'json'});
    res.send({message: 'i sent json'});
} 
```

`getJson()`可作为 app.js 中的路由使用。

# jquery - JQuery 访问 iFrame 同域

> ID：15403794
> 
> 赞同：1
> 
> 时间：2013-03-14T07:50:19.977
> 
> 标签：jquery, iframe

我想访问同一域上 iFrame 的内容。我有一个小而简单的例子，但它不起作用，我搜索问题的时间太长了:-(

这是我的代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
        $(document).ready(function(){   
            alert($('#iframeID').contents().find('#someID').html());
        });
    </script>
 </head>
<body>  
    <iframe id="iframeID" src="test.html"></iframe>
</body>
</html> 
```

框架叫：

```
<div id="someID">Hello world!</div> 
```

有人能帮助我吗 ？感谢您的帮助

马修

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:56:20.610

用于[`.load()`](http://api.jquery.com/load/)确保在内部搜索之前加载 iframe。

```
$(document).ready(function() {
    $("#iframeID").load(function(){   
        alert($(this).contents().find('#someID').html());
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:58:52.433

获取`iframe`为

`console.log($('#iframeID', window.parent.document));`

您需要将代码包装在其中`window.load`或需要将其包装在其中，`.load()`因为`iframe`在代码执行之前您的内容没有被加载。

```
<script>
    $(window).load(function(){   
        //alert($('#iframeID').contents().find('#someID').html());
        console.log($("#iframeID", window.parent.document).contents().find("div"));
    });
</script> 
```

# java - 内存泄漏问题

> ID：15403796
> 
> 赞同：0
> 
> 时间：2013-03-14T07:50:35.180
> 
> 标签：java

我检查了我的所有连接都已正确关闭。仍然收到 java.lang.OutOfMemoryError: Java heap space.why 我收到 OutOfMemoryError。你能建议我需要检查的内容吗？有什么方法可以在不增加堆大小的情况下解决。我有机会增加堆。请提供任何解决方案

```
2013-01-18 02:42:11,487|INFO||GatewayOutboundPollerDaemon|Begin pollGatewayIncident().
2013-01-18 02:42:32,225|INFO||GatewayOutboundPollerDbHelper|Begin submitPendingRecords().
2013-01-18 02:42:54,565|INFO||GatewayOutboundPollerDbHelper|Query for Pending Records : SELECT TR_GATEWAY_RECORD_ID, decode(TR_TRANSACTION_TY
PE,1,'Update','Create')TR_TRANSACTION_TYPE, TR_GATEWAY_RECORD_STATUS FROM TM4530_INCIDENT_GATEWAY WHERE TR_GATEWAY_RECORD_STATUS = 0 AND TR_F
ROM_PARTNER = 'RAM' AND TR_GATEWAY_RECORD_STATE = 0 AND TR_TRANSACTION_METHOD = 1 FOR UPDATE
2013-01-18 02:49:47,527|ERROR||DaemonExecutor|ExecutableDaemon threw an exception:
java.lang.OutOfMemoryError: Java heap space 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T07:52:18.917

您需要检查哪些对象使用的内存最多，例如

```
jmap -histo:live {pid} | head -30 
```

猜测您可能忘记关闭所有 JDBC 资源，如果您不这样做，这些资源会累积。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:57:23.010

从日志中，看起来您正在执行 SQL 选择

您要查询的结果集有多大？如果它返回一个消耗内存的巨大数据集，那么它可能导致 OutOfMemory

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:20:14.880

您可以使用[CodePro Analytix](https://developers.google.com/java-dev-tools/codepro/doc/)来针对该代码缺陷分析您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:21:15.103

您正在使用的数据集有多大？看起来您的查询返回了数百万条填满内存的记录...尝试使用（如果可能）一个 ResultSet 或限制数据，以限制内存中的记录数量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T07:57:04.760

您可能应该简单地提高分配给您的程序的内存。检查您的 -Xmx 和 -Xms 属性。

# android - 如何将 sdcard 中图像的纬度和经度获取到我的应用程序？

> ID：15403797
> 
> 赞同：6
> 
> 时间：2013-03-14T07:50:36.507
> 
> 标签：android, gps

从我的应用程序中，我可以打开图库。有什么方法可以将图库中任何选定图像的纬度和经度获取到我的应用程序中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T07:59:22.020

您应该使用 [ExifInterface](http://developer.android.com/reference/android/media/ExifInterface.html)类从图像中读取各种 EXIF 元数据：

例子 ：

```
ExifInterface exif = new ExifInterface(filepath);
exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE);
exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE_REF);
exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE);
exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF); 
```

**编辑：**

现在在这里，您将获得以下格式的经纬度。

**lat = 30/1,12/1,34/1, long=81/1,22/1,41/1**

为了将其转化为真正的价值[，这个博客](http://android-er.blogspot.in/2010/01/convert-exif-gps-info-to-degree-format.html)帮助了我。

我们需要将度、分、秒形式转换为 GeoPoint 形式。

通过以下方式，您可以做到。

```
 String LATITUDE = exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE);
 String LATITUDE_REF = exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE_REF);
 String LONGITUDE = exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE);
 String LONGITUDE_REF = exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE_REF);

 // your Final lat Long Values
 Float Latitude, Longitude;

 if((LATITUDE !=null)
   && (LATITUDE_REF !=null)
   && (LONGITUDE != null)
   && (LONGITUDE_REF !=null))
 {

  if(LATITUDE_REF.equals("N")){
   Latitude = convertToDegree(LATITUDE);
  }
  else{
   Latitude = 0 - convertToDegree(LATITUDE);
  }

  if(LONGITUDE_REF.equals("E")){
   Longitude = convertToDegree(LONGITUDE);
  }
  else{
   Longitude = 0 - convertToDegree(LONGITUDE);
  }

 }

private Float convertToDegree(String stringDMS){
 Float result = null;
 String[] DMS = stringDMS.split(",", 3);

 String[] stringD = DMS[0].split("/", 2);
    Double D0 = new Double(stringD[0]);
    Double D1 = new Double(stringD[1]);
    Double FloatD = D0/D1;

 String[] stringM = DMS[1].split("/", 2);
 Double M0 = new Double(stringM[0]);
 Double M1 = new Double(stringM[1]);
 Double FloatM = M0/M1;

 String[] stringS = DMS[2].split("/", 2);
 Double S0 = new Double(stringS[0]);
 Double S1 = new Double(stringS[1]);
 Double FloatS = S0/S1;

    result = new Float(FloatD + (FloatM/60) + (FloatS/3600));

 return result;

};

@Override
public String toString() {
 // TODO Auto-generated method stub
 return (String.valueOf(Latitude)
   + ", "
   + String.valueOf(Longitude));
}

public int getLatitudeE6(){
 return (int)(Latitude*1000000);
}

public int getLongitudeE6(){
 return (int)(Longitude*1000000);
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-03-22T18:21:27.100

您实际上可以使用“内置”功能：

```
ExifInterface exif = new ExifInterface(path);
float[] latLong = new float[2];
boolean hasLatLong = exif.getLatLong(latLong)
if (hasLatLong) {
    System.out.println("Latitude: " + latLong[0]);
    System.out.println("Longitude: " + latLong[1]);
} 
```

也许是新事物，但我认为比公认的答案方便得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-07T16:31:48.133

现在`exif.getLatLong(float[])`已弃用，您可以使用返回 a 的更好方法`double[]`：

```
ExifInterface exifInterface = new ExifInterface(file);
double[] latlng = exifInterface.getLatLong();
if (latlng != null) {
    Double currentLatitude = latlng[0];   
    Double currentLongitude = latlng[1];
    Log.d("Debug", "Exif : latitude: " + currentLatitude + ", longitude: " + currentLongitude)  
} 
```

快乐编码。

# jakarta-ee - oracle 10 g 中的 java.sql.sqlexception ora-00904 标识符无效

> ID：15403803
> 
> 赞同：0
> 
> 时间：2013-03-14T07:51:11.953
> 
> 标签：jakarta-ee

```
ps=con.prepareStatement("update customer set  customerId=?,customerName =?,Add1=? where customerd="+str1);

ps.setString(1,str1);
ps.setString(2,str2);
ps.setString(3,str3);

int j=ps.executeUpdate(); 
```

我收到此错误。提交这些代码时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:25:47.957

如果你仔细阅读查询，你会发现你有一个错字`customerd`（缺少 I）。我建议您在将其放入代码之前在数据库客户端上运行任何查询，以找出我们这些类型的简单错误。

此外，`where`条件中的值可能需要在单引号之间，同样，您可以测试您是否在数据库客户端中的 java 之外运行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-31T05:04:00.503

它对你有帮助吗？

否则尝试执行此操作：

```
update customer set  customerId=?,customerName ='?',Add1='?' where customerd= '"+str1+"'" 
```

即在您的 str1 和 ? 附近添加额外的 ' '。

希望对您有所帮助！

# sql-server - Sql Server Express 10.0.1600 移至 Sql Server 2008 10.50.160

> ID：15403809
> 
> 赞同：0
> 
> 时间：2013-03-14T07:51:30.900
> 
> 标签：sql-server

我想将 Sql Server Express 10.0.1600 移动到 Sql Server 2008 10.50.1600。

我只有 10.0.1600 版本的备份文件。

有没有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:56:36.253

是的，没关系。升级版本不是问题，当您尝试另一种方式时，您会遇到问题。只要您确定您编写的所有代码在新版本上都以相同的方式工作即可。

# c# - NetworkInterface.GetAllNetworkInterfaces() 导致 System.Security 异常

> ID：15403813
> 
> 赞同：0
> 
> 时间：2013-03-14T07:51:38.710
> 
> 标签：c#, reflection, add-in, system.security

我在框架中使用了微软添加。我正在从主主机加载一个加载项，并且在加载项中我写了：

`NetworkInterface[] adapters = NetworkInterface.GetAllNetworkInterfaces()`. 上面的行导致 System.Security 异常。完整的异常消息说：`[Request for the permission of type 'System.Net.NetworkInformation.NetworkInformationPermission, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' failed.].`

请帮助并让我知道如何为加载为加载项（反射）的 dll 设置安全权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:01:19.430

如果您正在谈论`System.AddIn`命名空间中的类，那么您可能需要文章[How to: Activate Add-ins with different Isolation and Security Levels](http://msdn.microsoft.com/en-us/library/bb384196%28v=vs.90%29.aspx)和相关链接，您可以在其中指定一些（或全部）加载项应该通过[`NetworkInformationPermission`](http://msdn.microsoft.com/en-gb/library/system.net.networkinformation.networkinformationpermission.aspx)使用[`PermissionSet`](http://msdn.microsoft.com/en-us/library/system.security.permissionset_members%28v=vs.90%29.aspx).

# c++ - 如何初始化一个类的引用成员变量？

> ID：15403815
> 
> 赞同：12
> 
> 时间：2013-03-14T07:51:42.127
> 
> 标签：c++, oop, class-members

考虑以下代码 C++：

```
 #include<iostream>

using namespace std;

class Test {
    int &t;
public:
    Test (int &x) { t = x; }
    int getT() { return t; }
};

int main()
{
    int x = 20;
    Test t1(x);
    cout << t1.getT() << " ";
    x = 30;
    cout << t1.getT() << endl;
    return 0;
} 
```

使用 gcc 编译器时显示以下错误

```
 est.cpp: In constructor ‘Test::Test(int&)’:
    est.cpp:8:5: error: uninitialized reference member ‘Test::t’ [-fpermissive] 
```

为什么编译器不直接调用构造函数？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-14T07:53:08.783

那是因为引用只能在初始化列表中初始化。采用

```
Test (int &x) : t(x) {} 
```

解释一下：引用只能设置一次，发生这种情况的地方就是初始化列表。完成后，您不能设置引用，而只能为引用的实例分配值。您的代码意味着，您尝试将某些内容分配给引用的实例，但该引用从未初始化，因此它没有引用任何实例`int`并且您收到错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T07:56:25.133

我的编译器发出此错误：

> 错误 C2758：“Test::t”：必须在构造函数基/成员初始化程序列表中初始化

这正是您必须做的。引用*必须*在初始化列表中初始化：

```
#include<iostream>

using namespace std;

class Test {
    int &t;
public:
    Test (int &x) : t(x) {  } // <-- initializer list used, empty body now
    int getT() { return t; }
};

int main()
{
    int x = 20;
    Test t1(x);
    cout << t1.getT() << " ";
    x = 30;
    cout << t1.getT() << endl;
    return 0;
} 
```

解释：

如果引用不在初始化器列表中，编译器几乎不可能检测到引用是否已初始化。*必须*初始化引用。想象一下这个场景：

```
Test (int &x, bool b) 
{
   if( b ) t = x;
} 
```

现在由构造函数的调用者来决定是否生成了有效的代码。那不可能。编译器必须确保*在编译时*初始化引用。

# qt - ARM9 的基于 Qt 的触摸屏 GUI

> ID：15403816
> 
> 赞同：0
> 
> 时间：2013-03-14T07:51:42.607
> 
> 标签：qt, user-interface, arm9

我想在 HMI 领域工作并开始学习它。

在第一阶段，我想为 ARM9 板开发基于 Qt GUI 的触摸屏应用程序。任何人都可以为此建议如何使用它以及任何带有集成触摸屏 LCD 的预算 ARM9 开发板吗？我想尽可能地使用开源平台。

我知道我可以在支持某些操作系统的 ARM 板上更轻松地做到这一点，比如（比如）嵌入式 linux，或者可能是带有 java 或基于 Qt 的 GUI 的 Rasberry Pi。但我不想使用操作系统，而只想开发一个简单的触摸屏 GUI 应用程序来（比如说）打开 ARM 板上的 LED（不运行任何操作系统）。

我的下一步学习将是使用触摸屏 GUI、Rasberry Pi 和 raspbian，我已经在其中找到了大量的在线资源。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:25:19.590

购买低端平板电脑可能会更好，或者为什么不购买手机，这比带有额外触摸屏的开发板便宜得多。另外安卓是开放的。获得 Ubuntu 触控兼容设备可能是个好主意。Pi虽然便宜，但动力也很不足。便宜的平板电脑或手机将更适用，尤其是在 Qt 中的官方 Android 支持即将到来的情况下。那么，为什么要在应用范围非常窄的低规格设备上花更多的钱呢？更不用说您使用市场设备获得的各种传感器——相机、指南针、陀螺仪、GPS、加速度计——这些在 HMI 场景中可能会派上用场。最后但同样重要的是，图形驱动程序在生产设备中通常比原型板更好。

# ios - 正确处理在您的应用程序的另一个实例中使用 iCloud 删除 UIDocument

> ID：15403818
> 
> 赞同：0
> 
> 时间：2013-03-14T07:51:46.640
> 
> 标签：ios, cocoa-touch, icloud, uidocument

我发现，我可以通过以下方法检测到 iCloud 上 UIDocument 的删除：

```
- (void)accommodatePresentedItemDeletionWithCompletionHandler:(void (^)(NSError *))completionHandler 
```

该方法被正确调用，但我不知道在该方法中要做什么。目前我关闭文档，如果它仍然打开，但看起来文档在关闭时保存在旧路径上，所以文档重新出现。

我已经进行了激烈的搜索，但在 Apple 文档和任何论坛中都没有找到任何内容。

有人有过类似的经历还是有人正确处理了删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:19:06.513

我发现，我关闭了文档 2 次，在第二次关闭它之前，我保存了它。我删除了 saveToURL 方法，现在它按预期工作。

对于所有想要检测删除的人：使用以下代码在您的 UIDocument 子类中覆盖此方法：

```
 - (void)accommodatePresentedItemDeletionWithCompletionHandler:(void (^)(NSError *errorOrNil))completionHandler
{
    sceneLampDocument* presentedDocument = self;
    [presentedDocument closeWithCompletionHandler: ^(BOOL success) {
        NSError* error = nil;
        if (!success)
        {
            NSDictionary* userInfo = [NSDictionary dictionaryWithObjectsAndKeys:
                                      @"Could not close document that is being deleted on another device",
                                      NSLocalizedDescriptionKey, nil];
            error = [NSError errorWithDomain: @"some_suitable_domain"
                                        code: 101
                                    userInfo: userInfo];
        }

        completionHandler(error);  // run the passed in completion handler (required)

        dispatch_async(dispatch_get_main_queue(), ^
                       {
                           //[super accommodatePresentedItemDeletionWithCompletionHandler:completionHandler];

                           NSDictionary *userInfo = [NSDictionary dictionaryWithObject:self forKey:@"document"];
                           [[NSNotificationCenter defaultCenter] postNotificationName: @"documentDeletedOnAnotherDevice"
                                                                               object: self
                                                                             userInfo: userInfo];
                       });
        }];
} 
```

我希望这会对某人有所帮助

# php - Open Web Analytics 在 netscape 中不起作用，有什么解决方案可以克服吗？

> ID：15403819
> 
> 赞同：0
> 
> 时间：2013-03-14T07:51:55.460
> 
> 标签：php, mysql, cookies, google-analytics, web-analytics

我从事网络分析工作。我发现[Open Web Analytics](http://www.openwebanalytics.com/)具有`open source`类似的功能，`Google Analytics`并且还具有更多功能。所以我想到了使用 Open Web Analytics。但我开始知道[Open Web Analytics 不支持`Netscape`](http://web-analytics-software.findthebest.com/compare/1-9/Google-Analytics-vs-Open-Web-Analytics.)

在 Open Web Analytics 中解决此问题的任何解决方案。

提前致谢。

# ios - 如何使用 iPhone 的图形 API 在我的 Facebook 墙上获取朋友的帖子

> ID：15403820
> 
> 赞同：0
> 
> 时间：2013-03-14T07:52:01.890
> 
> 标签：ios, objective-c, facebook, facebook-graph-api

我正在使用下面的代码（图形 API）来解析我的 facebook 提要....

```
 FbGraphResponse *fb_graph_response = [fbGraph doGraphGet:@"me/feed" withGetVars:nil]; 
    SBJSON *_jsonparsing=[[SBJSON alloc]init];
    NSDictionary *_dict=[_jsonparsing objectWithString:fb_graph_response.htmlResponse error:nil];
    NSDictionary *_dict1=[_dict objectForKey:@"data"];
    NSLog(@"CHECK____ %@", _dict1); 
```

在这里，我没有收到朋友在我的墙上贴的帖子。即使我没有收到我发布的文本。只有链接、文件和照片我得到了我贴在墙上的东西。我怎样才能让我的朋友的帖子和我的文字帖子出现在我的墙上？？？..请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:56:32.323

我猜你没有请求`read_stream`许可..是吗？

# css - 如何更改 DIV 以便我可以单击它后面的元素？

> ID：15403827
> 
> 赞同：1
> 
> 时间：2013-03-14T07:52:21.697
> 
> 标签：css

我正在为慈善机构创造一些东西。这是一栋砖砌的房子。您捐款，点击砖块，您就有机会获得奖品。

我的问题是我使用 DIV 在砖块上放置一扇门的方式。DIV 覆盖了它右侧的所有砖块，它们不可点击。我不确定如何更改它，以便可以访问底部 DIV 门后面的砖块。

这是一个有效的 URL： http: [//matrixaccelerator.com/house2.php](http://matrixaccelerator.com/house2.php)

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>House</title>
<script type="text/javascript">
    function rewriteTag($x,$y,$brick) {
        alert("Buy/Bought");
        document.getElementById($x+','+$y).innerHTML = "<img src='images/brick"+$brick+".png'>";
    }
</script>
</head>
<body>
<img src="images/roof1.png" /><br />
<?php 
for ($y=1; $y <= 20; $y++) {
    if ((floor($y/2)) == ($y/2)) {
        $brickID = rand(1,3);
        echo "<img src='images/brick".$brickID."halfleft.png' style='padding-left:9px;'>";
    }
    for ($x=1; $x <= 20; $x++) {
        $brickID = rand(1,3);
        $freeSpaces = array('9,4','10,4','11,4','10,5','11,5','12,5','9,6','10,6','11,6','10,7','11,7','12,7','9,8','10,8','11,8','10,9','11,9','12,9','9,10','10,10','11,10','10,11','11,11','12,11','9,12','10,12','11,12','10,13','11,13','12,13','9,14','10,14','11,14','10,15','11,15','12,15','9,16','10,16','11,16','10,17','11,17','12,17','9,18','10,18','11,18','10,19','11,19','12,19','9,20','10,20','11,20');
        if (in_array($x.','.$y, $freeSpaces)) {
            $grey = "";
            echo "<span id='".$x.",".$y."'><img src='images/brick".$brickID.$grey.".png''".(((floor($y/2) <> $y/2) && ($x == 1)) ? 'style=\'padding-left:9px;\'' : '')."></span>";
        } else {
            $grey = "grey";
            echo "<span id='".$x.",".$y."'><img src='images/brick".$brickID.$grey.".png' onmouseover='this.src=\"images/brick".$brickID.".png\"' onmouseout='this.src=\"images/brick".$brickID."grey.png\"' onclick='rewriteTag(".$x.",".$y.",".$brickID.");'".(((floor($y/2) <> $y/2) && ($x == 1)) ? 'style=\'padding-left:9px;\'' : '')."></span>";
        }
    }
    if ((floor($y/2)) <> ($y/2)) {
        $brickID = rand(1,3);
        echo "<img src='images/brick".$brickID."halfright.png'>";
    }
    echo "<br>\n";
}
?>
<div style="position:relative;top:-239px;right:-395px;"><img src="images/door.png"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:55:08.407

添加`width:108px;`到门 div 的样式。

```
<div style="position:relative;top:-239px;right:-395px; width:108px;"><img src="images/door.png"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T07:56:07.530

门图像的包装没有宽度，所以它一直到右边界。将`width:108px;`（门图像的大小）添加到此包装器的样式属性中。

```
<div style="position:relative;top:-239px;right:-395px;width:108px;"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T08:00:33.987

您的问题是您的 div 向右延伸太远。如果给它添加边框，你可以很容易地看到这一点，如下所示：

```
<div style="position:relative;top:-239px;right:-395px; border:solid 2px red;"> 
```

![在此处输入图像描述](../Images/65949a8795fbfdd26698211be08a8ce9.png)

太修复它，只需为其设置适当的宽度：

```
<div style="position:relative;top:-239px; right:-395px; width:108px;"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T08:05:30.660

替代 CSS，它使用`display:inline-block`而不是`width`. 我还将*负右*偏移切换为*正左*偏移，因为它感觉更干净。

```
position: relative;
top: -239px;
left: 395px;
display: inline-block; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T08:06:46.270

太修复它，只需为其设置适当的宽度：

```
<div style="position:relative;top:-239px; right:-395px; width:108px;"> 
```

# ios - 具有后台支持设计问题的位置感知 iOS 应用

> ID：15403829
> 
> 赞同：0
> 
> 时间：2013-03-14T07:52:28.520
> 
> 标签：ios, background, core-location, cllocationmanager, foreground

当应用程序在后台时，我启用了位置服务以更新位置，并且当应用程序在前台显示地图时，我还收听位置更新。在 iOS 中设计这种场景的最佳方式应该是什么？我想过一些选择：

1) 拥有一个类的实例，其`locationManager`成员是其委托本身。然后，在`didUpdateToLocation`委托方法的主体中，类似于：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
   if (!background) {
      // Perform some processing and notify the view controller which displays the map
      // by means of Notification Center
   }
   else {
      appDelegate.bgTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
         [[UIApplication sharedApplication] endBackgroundTask:appDelegate.bgTask];
         appDelegate.bgTask = UIBackgroundTaskInvalid;
      }];

      dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
         // Perform some data processing 

         // Close background task
         if (appDelegate.bgTask != UIBackgroundTaskInvalid) {
            [[UIApplication sharedApplication] endBackgroundTask:appDelegate.bgTask];
            appDelegate.bgTask = UIBackgroundTaskInvalid;
         }
      });
   }
} 
```

（注意：我不确定是否将位置服务启用为后台服务，是否需要执行位置处理，就好像它是一个有限的后台任务......）。此类的实例可以是 的成员`AppDelegate`，并在进入后台或从显示地图的 viewModel 调用实例时开始侦听位置。因此，`AppDelegate`将引用管理 的实例`locationManager`，并且地图 viewController 将引用`AppDelegate`，或者也通过通知中心进行通信。

2) 让`locationManager`成员直接在 中`AppDelegate`，并作为代表本身。

将位置监听和管理封装在不同的类中，还是直接在 中处理会更好`AppDelegate`吗？考虑到我必须能够在前台和后台监听位置并执行一些任务。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:27:38.073

我认为您最好的策略是拥有一个作为`locationManager`委托的类的单例实例。该实例将负责过滤返回的任何内容，`locationManager`并最终将位置分配给它的一个属性，我们称之为`myLoc`。

这解决了您在获取位置后需要进行后处理的集中逻辑问题。

其次，为了`UIViewControllers`在位置更新时得到正确的和其他类实例来做他们需要做的事情，我建议你在`myLoc`. 我假设你知道它是如何工作的。我建议 KVO 的原因是你需要根据被更改的位置来触发代码的多个区域的更改，而 KVO 就是为这种模式而制作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:29:59.947

我想通过说您可以创建一个来向@Rikkles 回答添加更多内容`BaseViewController`，它是一个子类，`UIViewController`并且也具有您的单例 locationManager 类的实例。这种方法允许我们将所有冗余代码，如检查可达性、显示活动指示器、获取用户位置等移动到一个地方，并且将可供所有其他实现它的类使用。

# extjs - Sencha 1.1 Long DropBox 列表

> ID：15403840
> 
> 赞同：2
> 
> 时间：2013-03-14T07:53:22.850
> 
> 标签：extjs, sencha-touch

我在 sencha 1.1 中有一个包含不同项目的下拉列表。

它在 iPad 中显示异常行为。当列表有 3 个项目时，显示如下：

![在此处输入图像描述](../Images/bf399a2cffa0d114ad2598766a7fb021.png)

但是当它有超过 3 个项目时，它会显示如下：

![在此处输入图像描述](../Images/5ded03f77fdf8dd4ce49309061a26713.png)

列表本身与列表框边框重叠。这种行为只能在 iPad 上看到。

这是默认行为还是我需要修复一些错误。如果修复了错误，那么他们的任何 iOS 特定补丁都是为了解决这个问题。

请不要建议我升级我的煎茶。

**模型**

```
Ext.regModel('LinkSt', {
    idProperty: 'LinkID',
    fields: [{
        name: 'LinkID',
        type: 'int'
    }, {
        name: 'LinkURL',
        type: 'string'
    }]
}); 
```

**店铺**

```
var LinkStore = new Ext.data.Store({
    id: 'LinkStore',
    model: 'LinkSt'
}); 
```

**看法**

```
var linkselectfield = {
            id: 'link',
            xtype: 'selectfield',
            name: 'BG-Color',
            label: 'Link To',
            labelWidth: '26%', //Changed to 100% to work with ms grid instead, divs are problematic in Win 8.
            cls: 'linkselectfield',
            store: LinkStore,
            displayField: 'LinkURL',
            valueField: 'LinkURL',
            itemTpl: '{text}',
            listeners: {
                afterrender: function (ele) {//Rahul ->22 jan
                    ele.fieldEl.dom.readOnly = true;
                },
                change: function () {
                    var islink = Ext.getCmp('link').getValue();

                    var sURL = islink; //LinkStore.getAt(LinkStore.find('LinkURL',islink)).get('LinkURL');

                    if (sURL == 'URL') {

                        Ext.getCmp('linkurl').setDisabled(false);
                        Ext.getCmp('linkurl').setValue("http://");
                    }
                    else {

                        Ext.getCmp('linkurl').setValue("");
                        Ext.getCmp('linkurl').setDisabled(true);
                    }

                }

            }

        }
        var linkrow = new Ext.Panel({
            cls: 'audiohbox',
            layout: {
                type: 'hbox'
            },
            items: [linkselectfield, linkField]
        }); 
```

谢谢

# ios - 将 Storyboard 与视图控制器一起使用

> ID：15403843
> 
> 赞同：-1
> 
> 时间：2013-03-14T07:53:30.480
> 
> 标签：ios, ios6, uiviewcontroller, uistoryboard, uistoryboardsegue

我是 iOS 开发的新手，但我知道编码。我想做具有 6 或 7 个视图的 ios 应用程序。我想使用一个故事板和 6 或 7 个视图。我必须在这些视图之间传递数据。我需要一个教程。我在谷歌上搜索了它，但我找不到任何我想要的东西。感谢您分享任何代码或教程。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T07:56:40.683

如果您使用 storyboard ，您需要按照您的说法制作 6 或 7 个控制器。

此[链接](http://www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-controller-with-segue/)可以帮助您在这些控制器之间传递数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T08:21:20.657

这个问题之前已经问过很多很多次了。首先，阅读 Apple 提供的有关视图控制器的文档。然后参考这个问题及其答案：

[在视图控制器之间传递数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)

# php - 多维数组的foreach循环

> ID：15403844
> 
> 赞同：1
> 
> 时间：2013-03-14T07:53:34.137
> 
> 标签：php, multidimensional-array, foreach

我有以下数组。如何获得“已安装”键的值，即 1。我必须在我的应用程序中检查哪个值。

```
Array
(
    [0] => Array
        (
            [id] => 53686899
        )

    [1] => Array
        (
        [installed] => 1
            [id] => 542813519
        )

    [2] => Array
        (
        [installed] => 1
            [id] => 567790764
        )
     [3] => Array
        (

            [id] => 567570764
        )
) 
```

使用 foreach 循环我该怎么做？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:57:24.667

```
foreach ($array as $value)
{
   echo $value['installed']. "<br />";
} 
```

将输出

1 1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:55:50.353

与迭代一维数组时的方式完全相同：

```
foreach ($array as $value) {
    var_dump($value);
    var_dump($value['installed'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:00:47.873

遍历数组并获取“已安装”键的值：

```
foreach ($array as $innerArray) {
    echo $innerArray['installed'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:30:46.483

试试这个 ：

```
foreach ($array as $value){
   if(array_key_exists('installed',$value)){
      echo $value['installed']. "<br />";
   }
} 
```

如果您不检查`array_key_exists`它将在第一个循环中显示错误。

# android - 如何在 Android 应用中播放 Vimeo 视频

> ID：15403848
> 
> 赞同：6
> 
> 时间：2013-03-14T07:53:51.587
> 
> 标签：android, vimeo, vimeo-api

有什么方法可以在 Android 中`WebView`或`VideoView`在 Android 中播放 Vimeo Video。任何播放 Vimeo 的源代码都会对我有所帮助。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-28T19:32:11.170

将 WebView 添加到您的布局

```
<WebView
    android:id="@+id/webView1"
    android:layout_width="400dp"
    android:layout_height="400dp" /> 
```

然后加

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
   webView1.loadData("<iframe src=\"http://player.vimeo.com/video/"+VIDEO_ID+"\" width=\"180px\" height=\"180px\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>", "text/html", "utf-8");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-09T09:59:06.943

[正如这里](https://stackoverflow.com/a/46763314/5829679)提到的

```
mViewHolder.webView.getSettings().setJavaScriptEnabled(true);

String yourData = "<div id='made-in-ny'></div>\n" +
            "\n" +
            "<script src='https://player.vimeo.com/api/player.js'></script>\n" +
            "<script>\n" +
            "    var options = {\n" +
            "        id: 59777392,\n" +
            "        width: 540,\n" +
            "        loop: true\n" +
            "    };\n" +
            "\n" +
            "    var player = new Vimeo.Player('made-in-ny', options);\n" +
            "\n" +
            "    player.setVolume(0);\n" +
            "\n" +
            "    player.on('play', function() {\n" +
            "        console.log('played the video!');\n" +
            "    });\n" +
            "</script>";

mViewHolder.webView.loadData(yourData, "text/html; charset=utf-8", "UTF-8"); 
```

更改 id 和宽度。这是工作。

# c++ - OpenCV：如何使用 Haar Classifier Cascade 提高眼睛检测的准确性？

> ID：15403850
> 
> 赞同：8
> 
> 时间：2013-03-14T07:54:01.467
> 
> 标签：c++, opencv, object-detection

我有一个应用程序使用 Haar 级联来检测从摄像机捕获的图像中的眼睛。使用的方法是：

`void CascadeClassifier::detectMultiScale(const Mat& image, vector<Rect>& objects, double scaleFactor=1.1, int minNeighbors=3, int flags=0, Size minSize=Size(), Size maxSize=Size())`

`scaleFactor`这在默认值,下工作得很好`minNeighbors`，`flags`但是有些人的眼睛无法被检测到。所以我想提高眼睛检测的准确性。似乎“级联分类器训练”并创建自定义级联分类器是一个很好的解决方案，但在这样做之前

是否可以通过调整方法中的一些参数来提高检测精度？请进一步解释 , 和 的含义，`scaleFactor`因为cascadeclassifier [-detectmultiscale](http://docs.opencv.org/2.4.4/modules/objdetect/doc/cascade_classification.html#cascadeclassifier-detectmultiscale)文档中的那些含义对我来说不是很清楚。谢谢你。`minNeighbors``flags`

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-14T13:52:53.427

scaleFactor 参数用于确定函数将寻找多少不同大小的眼睛。通常该值为 1.1 以获得最佳检测。将此参数设置为 1.2 或 1.3 将更快地检测眼睛，但不会经常发现它们，这意味着准确度会下降。

minNeighbors 用于告诉检测器在检测到眼睛时他应该有多确定。通常此值设置为 3，但如果您想要更高的可靠性，您可以将其设置得更高。更高的值意味着更低的准确性，但更高的可靠性

这些标志用于设置特定的偏好，例如寻找最大的对象或跳过区域。默认此值 = 0。设置此值可以使检测更快

# android - 如何将文本视图添加到andengine中的等距平铺地图？

> ID：15403854
> 
> 赞同：0
> 
> 时间：2013-03-14T07:54:06.067
> 
> 标签：android, andengine

我想在andengine中为等距平铺地图游戏添加字幕，我添加了以下代码

```
@Override
public void onPopulateScene(Scene pScene, OnPopulateSceneCallback pOnPopulateSceneCallback) throws Exception {
    relativeLayout = new RelativeLayout(this);
    relativeLayout.setId(0);
    this.addContentView(relativeLayout, new LayoutParams(android.view.ViewGroup.LayoutParams.FILL_PARENT, android.view.ViewGroup.LayoutParams.FILL_PARENT));
    relativeLayout.setBackgroundColor(Color.TRANSPARENT);
    tv = new TextView(this);
    tv.setText("Actions");
    tv.setTextColor(Color.WHITE);
    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
    lp.addRule(RelativeLayout.ALIGN_PARENT_LEFT,RelativeLayout.TRUE);
    lp.setMargins(0, 200, 0, 0);
    tv.setLayoutParams(lp);
    relativeLayout.addView(tv);
    pOnPopulateSceneCallback.onPopulateSceneFinished();
} 
```

但它不显示文本视图。

# jquery - 单个页面上的多个 jquery 文件

> ID：15403856
> 
> 赞同：0
> 
> 时间：2013-03-14T07:54:11.403
> 
> 标签：jquery

我可能在这里问了一个真正愚蠢的问题，但找不到任何好的阅读材料让我放心。

我已经接管了一个使用几个不同 jquery 文件的项目。目前他的标题看起来像：

```
<head>
  <title>
     Capture New Order
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/application/assets/CSS_JS/jquery.mobile-1.1.1.min.css" />
  <link rel="stylesheet" href="/application/assets/CSS_JS/green.min.css" />
  <script src="/application/assets/CSS_JS/jquery-1.7.2.min.js"></script>
  <script src="/application/assets/CSS_JS/jquery.mobile-1.1.1.min.js"></script>
  <link rel="stylesheet" href="/application/assets/CSS_JS/elf.css" media="screen">

  <link href="<?php echo base_url() ?>application/css/ui-lightness/jquery-ui-1.8.custom.css" media="screen" type="text/stylesheet" rel="stylesheet">
  <script src="<?php echo base_url() ?>application/scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
  <script src="<?php echo base_url() ?>application/scripts/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>

  <link rel="stylesheet" href="<?php echo base_url() ?>application/css/sales.css" />

  <script type="text/javascript">
        $(function(){
          $("#customer").autocomplete({
            source: "get_customers"
          });
        });
  </script>
</head> 
```

在这个例子中，我调用了各种 jquery 文件 4 次。但是，如果我删除这些 jquery 文件中的任何一个，它会破坏站点的功能。

是否没有具有所有可用功能的单个“主”jquery 文件？

当然，这比拥有几个不同的 jquery 文件更有意义吗？

抱歉，如果这是一个“简单”的问题，但只是想要一些清晰。

谢谢，瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:30:04.987

首先你加载主 jQuery 文件两次： jquery-1.7.2.min.js 和 jquery-1.9.1.min.js 你只需要其中一个。该文件负责主要功能。文件 jquery-ui 用于 UI-Elements。jquery-mobile 用于移动功能和 UI。因此，如果您删除其中一个文件，该文件的功能就会消失。但是一切都依赖于 jquery 主文件。

加载文件的顺序并不重要，只需先加载 jquery.min.js。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:36:16.063

您需要重新排序标签的顺序，甚至可能删除旧版本的 jquery 和 ui

```
/* collect and keeping css links first*/
<link rel="stylesheet" href="/application/assets/CSS_JS/jquery.mobile-1.1.1.min.css" />
<link href="<?php echo base_url() ?>application/css/ui-lightness/jquery-ui-1.8.custom.css" media="screen" type="text/stylesheet" rel="stylesheet">
<link rel="stylesheet" href="/application/assets/CSS_JS/green.min.css" />
<link rel="stylesheet" href="/application/assets/CSS_JS/elf.css" media="screen">
<link rel="stylesheet" href="<?php echo base_url() ?>application/css/sales.css" />
/* Moving the jQuery Mobile down below the jQuery core link
   and only load jQuery core + jQuery UI once
*/
<script src="<?php echo base_url() ?>application/scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="<?php echo base_url() ?>application/scripts/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>
<script src="/application/assets/CSS_JS/jquery.mobile-1.1.1.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:40:55.523

您不能将所有文件放在一起，因为在更新任何库时，最好替换一个文件，而不是在一个组合文件中搜索要替换的代码:)。

但是您的方法很好，因为当您减少 HTTP 请求的数量时，您可以加快应用程序的速度，因为每个文件（JavaScript、CSS 等）都需要一个 HTTP 请求。您可以在Yahoo![的高性能网站规则中](http://developer.yahoo.com/performance/index.html#rules)了解这一点。那里有许多用于 php 的缩小和组合库。例如，您可以使用[CSS-JS-Booster](https://github.com/Schepp/CSS-JS-Booster)，它可以减少 JavaScript 和 CSS 的 HTTP 请求数量。但是如果你用谷歌搜索，你可以找到更多这样的库，它们可能更适合你的需求。

还建议将 JavaScript 放在 HTML 文件的底部（并将 CSS 放在顶部）。如果您阅读上述规则，您会发现更多此类网站“助推器”。

# .net - 在 .Net 中使用 OracleCommand 时如何在 oracle 中提交记录？

> ID：15403858
> 
> 赞同：0
> 
> 时间：2013-03-14T07:54:18.767
> 
> 标签：.net, oracle, ado.net

我`Oracle`用作`.Net`应用程序的数据库。`Sql Plus`如果我使用or运行 DML 操作`Oracle SQlDeveloper`，我需要显式**提交**更改以保持持久性。`OrcleConnection`但是当我使用和`OracleCommand`对象执行与内联查询相同的查询时，`.Net`我不需要指定`commit`. 提交是如何在这里发生的。

PS我没有`transaction`在这里使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:03:22.320

嗯，这就是区别。SQLDeveloper 和 SQL+*确实*使用事务。因为你没有，如果它没有失败，你会自动为每个命令提交一个事务。

# shell - Cygwin 终端：FTP 连接（密码输入未结束）

> ID：15403859
> 
> 赞同：10
> 
> 时间：2013-03-14T07:54:40.177
> 
> 标签：shell, networking, ftp, terminal, cygwin

我正在使用 Cygwin shell 尝试与特定 IP 地址建立 TCP 连接。

输入“ftp 'IP 地址'”后

系统提示我输入用户名/密码。

当我输入用户名并按回车时，它会提示我输入密码（如我所料）。

但是，当我输入密码并按回车键时，它只是跳到下一行，就好像缓冲区仍在等待更多输入一样。它一直在这样做，导致我不得不使用 Ctrl-C 来摆脱它。

有人知道任何可能的问题吗？这是一个学校项目。其中一位 TA 说这是“预期行为”……但是，我在互联网上找不到有关此问题的任何信息。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-14T10:01:15.780

您可能正在运行 Windows 附带的 ftp 命令，该命令在 Cygwin 终端中无法正常工作。您可以安装 inetutils 包来获得 Cygwin 自己的 ftp 客户端。

# android - 我将光标置于中心。我希望这个光标在edittext的顶部

> ID：15403860
> 
> 赞同：0
> 
> 时间：2013-03-14T07:54:56.347
> 
> 标签：android, android-edittext

我在edittext中使用图像。图像很大，所以光标在中间

```
<EditText
    android:id="@+id/titletobeset"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:maxHeight="200dp"
    android:maxLines="200"
    android:background="@drawable/wallpape"
    android:layout_marginLeft="4dp"
    android:layout_marginRight="4dp"
    android:cursorVisible="true">       
</EditText> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:01:34.170

利用

```
android:gravity="left|top" 
```

在重力中，您可以设置文本的位置，这确实是光标的起始位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:04:23.837

尝试在您的编辑文本中添加以下属性

```
android:gravity="top"
android:inputType="textMultiLine" 
```

# php - 如何使用 PHP 将 MySQL 数据打印到条形图中

> ID：15403864
> 
> 赞同：0
> 
> 时间：2013-03-14T07:55:08.953
> 
> 标签：php, mysql, bar-chart

我正在创建一个报告，我想在其中使用条形图显示我的数据，我浏览了一些博客、教程和一种打印方式；但是，现在我的需要是我想以百分比显示我的数据并打印出来，有人可以帮我吗？

这是我的代码：

```
<style>
.clear{
    clear:both;
}

.graphcont {
    padding-top:10px;
    color:#000;
    font-weight:700;
    float:left
}

.graph {
    float:left;
    margin-top:10px;
    background-color:#cecece;
    position:relative;
    width:280px;
    padding:0
}

.graph .bar {
    display:block;
    position:relative;
    background-image:url(images/bargraph.gif);
    background-position:right center;
    background-repeat:repeat-x;
    border-right:#538e02 1px solid;
    text-align:center;
    color:#fff;
    height:25px;
    font-family:Arial, Helvetica, sans-serif;
    font-size:12px;
    line-height:1.9em
}

.graph .bar span {
    position:absolute;
    left:1em
}
</style>

</head>

<body>

<div id="container">

<?php
require("includes/dbconnect.php");

$getcen  = mysql_query("SELECT count(*) AS totcen, center FROM `makhtab` WHERE center != '' GROUP BY center ORDER BY center") or die(mysql_error());

while ($mcent = mysql_fetch_array($getcen)) {  
     echo '<div class="rating"><div class="graphcont"><div class="graph"><strong class="bar" style="width:'.$mcent["totcen"].'%;">'.$mcent["totcen"].'</strong></div></div></div>
      <div class="clear"></div>';
}
?>
</div> 
```

上面的代码工作正常，但我想设置我的**div**，其中条形显示为固定宽度，我想根据查询创建的百分比来操纵条形宽度。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T20:07:39.960

我对你的建议是使用外部轻量级框架来处理图表，它简化了很多事情。

RazorFlow 真的很不错，试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:51:27.067

为了正确显示条形图，您需要计算“totmakh”值所代表的百分比值。

首先，您需要知道最大允许值，即 100%，假设它称为 MAX。一旦你定义了这个值，计算百分比就很容易了：

```
$percentage = $mcent["totmakh"] * 100 / MAX; 
```

然后，您可以使用该值来设置 div 的百分比宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:06:45.600

如果您想构建一个仪表板，其中包含 PHP 中的交互式图表和表格，以及 MySQL 中的数据，您可以查看[RazorFlow PHP](http://razorflow.com)。

您将能够使用您想要的图表类型从 SQL 创建报告。

（披露：我是 RazorFlow 的开发人员，我发布只是因为我觉得它是相关的）

# ssl - 如何配置 woocommerce 以使用通配符证书和 wp 多站点？

> ID：15403869
> 
> 赞同：0
> 
> 时间：2013-03-14T07:55:45.430
> 
> 标签：ssl, wildcard, woocommerce

我有 wordpress 多站点版本 3.5 和`woocommerce 2.0.2`通配符证书。

我需要知道是否可以使用`wildcard ssl`.
当我在主站点的结帐页面上强制使用 ssl 时，它可以正常工作..

但是当我在带有映射插件的*子域*上执行此操作时，我会丢失结帐页面的所有 css，并且 chrome 会显示证书错误。

我需要多域证书吗？

我可以让他们一起工作吗？

解决此问题的最佳方法是什么？

我将需要在每个博客的结帐页面上使用 SSL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T07:35:25.753

> 我需要知道是否可以使用通配符 ssl 在结帐页面上强制使用 ssl

您可以使用[Wordpress HTTPS](http://wordpress.org/extend/plugins/wordpress-https/)插件在相关页面上强制使用 SSL。

> 我丢失了结帐页面的所有 css，并且 chrome 显示证书错误。

您可能需要创建重写，以便从 https 子域提供您的资产：有关使用子目录映射完成的示例，请参阅[此问题。](https://wordpress.stackexchange.com/questions/10764/anyone-figured-out-how-to-use-wordpress-multisite-with-domain-mapping-ssl)

# css - 带有 Haml 的表格内的下拉菜单

> ID：15403877
> 
> 赞同：0
> 
> 时间：2013-03-14T07:56:08.640
> 
> 标签：css, ruby, drop-down-menu, haml

我需要在 haml 中对表格列内的下拉菜单进行编码，我还无法对其进行测试，但我想确保我是否对粘贴它的以下代码片段做得很好。这只是悬停时的 CSS 下拉菜单

```
 %thead
     %tr
      %th.date.header
        = "#{t :"date"}"
          %a
            ="#{t :"main_link"}"
          %ul
              %li
                 ="#{t :"link1"}"
              %li
                 ="#{t :"link2"}"
              %li
                 ="#{t :"link3"}"

  %th.header 
    = "#{t :"Sports"}"
  %th.header 
    = "#{t :"Event"}"
  %th.header 
    = "#{t :"Media"}" 
```

我还写了 Css 的样子

```
.date.header ul { display: none}
.date.header ul:hover {display: block} 
```

这是一个好方法吗？我怎样才能改进它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:14:38.073

我会这样写你的代码

```
%thead
  %tr
    %th.date.header
      = t('date')
      %a= t('mail_link')
      %ul
        %li= t('link1')
        %li= t('link2')
        %li= t('link3')

    %th.header= t('Sports')
    %th.header= t('Event')
    %th.header= t('Media') 
```

# java - 派生类的抽象方法限制控制

> ID：15403878
> 
> 赞同：3
> 
> 时间：2013-03-14T07:56:10.157
> 
> 标签：java, class, abstract

抽象基类是否有可能拥有只有某些派生类才能访问某些抽象方法的抽象方法？我正在尝试做的是限制能够从不同的继承类调用的可能方法。这是我的问题的一个例子：

```
public abstract Foo
{
    ...
    public abstract void fooMethod1(int num1);
    public abstract void fooMethod2(int num2);
}

public Bar1 extends Foo // This class shouldn't be able to access fooMethod2()
{
    ...
    @Override
    public void fooMethod1(int num1)
    {
        System.out.println((num1 * 5));
    }
}

public Bar2 extends Foo // This class has no restrictions
{
     ...
     @Override
     public void fooMethod1(int num1)
     {
          System.out.println((num1 * 10));
     }

     @Override
     public void fooMethod2(int num2)
     {
          System.out.println((num2 * 5));
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:01:07.477

您的所有公共抽象方法都必须在每个子类中被覆盖。你可以做什么：

1.  将抽象类拆分`Foo`为两个类：在哪里应该 extends ，所以extends`BaseFoo`和extends 。`ExtendedFoo``ExtendedFoo``BaseFoo``Bar1``BaseFoo``Bar2``ExtendedFoo`
2.  覆盖不需要的方法以抛出`UnsupportedOperationException`，因此如果调用此方法，它将抛出（有意义的）异常。

我会采用第一种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:01:37.287

那会是这样。但是，这可能不是您真正想要的。这取决于您的实际要求。

```
public abstract class Foo
{

}

public abstract class FooMeth1 extends Foo {
    public abstract void fooMethod1(int num1);

}

public abstract class FooMeth2 extends FooMeth1 {
    public abstract void fooMethod2(int num2);
}

public class Bar1 extends FooMeth1 // This class shouldn't be able to access fooMethod2()
{
    @Override
    public void fooMethod1(int num1)
    {
        System.out.println((num1 * 5));
    }
}

public class Bar2 extends FooMeth2 // This class has no restrictions
{
     @Override
     public void fooMethod1(int num1)
     {
          System.out.println((num1 * 10));
     }

     @Override
     public void fooMethod2(int num2)
     {
          System.out.println((num2 * 5));
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T07:59:30.357

可以通过将 Bar2 放在同一个包中，将 Bar1 放在不同的包中，并分别使方法受包保护和公开。或者您可以创建注释并生成代码以通过反射蛮力检查调用者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:00:06.890

你不能，你在超类中的所有公共抽象方法对子类都是可见的。不仅如此，所有子类都必须实现所有抽象方法。

根据您的需要，我建议在 Foo 和 Bar1 之间设置另一个类，您可以在其中实现所需的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T08:04:13.747

为了增加我自己的两分钱，我会说不是使用超类，而是创建两个接口。即`Foo1`和`Foo2`。每个接口都将包含其中一种方法。然后你可以分别拥有`Bar1`和`Bar2`实施`Foo1`和`Foo2`。这种方法的好处是您可以拥有一个`Bar3`实现两个接口的类，而对于抽象类，您只能扩展一个超类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T08:05:42.353

如果 Foo 类只有抽象方法，您可以将 Foo 类分成 2 个接口，然后在 bar1 和 bar2 中实现所需的接口。或者，将仅在 bar1 中需要的方法拆分为一个接口，并将其余方法留在 foo 中

# java - 构建具有不同列数的html表

> ID：15403882
> 
> 赞同：3
> 
> 时间：2013-03-14T07:56:14.447
> 
> 标签：java, jsf, icefaces

我正在使用 Java 和 icefaces，我需要构建一个每次都有不同数量的列的表。

到目前为止，我发现的最好的例子是在[icefaces 网站上](http://www.icesoft.org/wiki/display/ICE/DataTable+Dynamic+Columns)

我试图让列数是动态的，但我不知道如何获取 html 页面中的单元格值。这是我的代码：

我的豆子：

```
public class DynamicColumnsBean implements Serializable {

int randomRows ;
int randomCol ;

List<Task> data;   // rows data
List<ColumnModel> columns ;

public DynamicColumnsBean() {
    super();
    Random rn = new Random();
    randomRows = rn.nextInt() % 40;
    randomCol = rn.nextInt() % 30;

    if(randomRows==0)   randomRows=10;
    if(randomCol==0)    randomCol=7;
    if(randomRows<0)    randomRows*=-1;
    if(randomCol<0)     randomCol*=-1;

     columns = new ArrayList<ColumnModel>();
     for (int i=0 ; i< randomCol ; i++ )
    {
         columns.add(new ColumnModel(i, "ID "+ i +" "));
    }

    data = new ArrayList<Task>() ; //row objects

    for (int i=0 ; i< randomRows ; i++ )
    {
        List<String> obj = new ArrayList<String>() ;
        for (int j=0 ; j< randomCol ; j++ )
        {
            obj.add("row "+i +" col "+j);
        }
        Task temp = new Task(obj);
        data.add(temp);
    }

}

    public List<Task> getData() 
    {           return data;        }
    public void setData(ArrayList<Task> data) 
    {           this.data = data;       }
    public List<ColumnModel> getColumns() {
        return columns;     }
    public void setColumns(ArrayList<ColumnModel> columns) {
        this.columns = columns;     }
}

public class Task {

List<String> obj ;

 public Task() {
        super();

    } 

public Task(List<String> obj) {
    super();
    obj = new ArrayList<String>();
    this.obj = obj;
}

public List<String> getObj() {
    return obj; }

public void setObj(List<String> obj) {
    this.obj = obj; }
}

public class ColumnModel {
int value; // represents sortBy / filterBy as one field
String headerText;

public ColumnModel(int i, String headerText) {
    this.value = i;
    this.headerText = headerText;
}

public int getValue() {
    return value;    }
public void setValue(int value) {
    this.value = value;    }
public String getHeaderText() {
    return headerText;    }
public void setHeaderText(String headerText) {
    this.headerText = headerText;    }
} 
```

```
<ace:dataTable value="#{dynBean2.data}" var="row" scrollable="true"
              height="200"     paginator="true"   rows="5" >
            <c:forEach items="#{dynBean2.columns}" var="col">
                <ace:column headerText="#{col.headerText}" style="width: 40px" >

                    <ice:outputText value=" #{row['obj'[col.value]]}"></ice:outputText>

                </ace:column>
            </c:forEach>
        </ace:dataTable> 
```

我的问题是：

```
ice:outputText value=" #{row['obj'[col.value]]}" 
```

我需要的值是：获取索引 i 中的数据-> 获取索引 [col.value] 中的 obj 中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:00:44.963

您可以尝试使用 varStatus：

```
<c:forEach items="#{dynBean2.columns}" var="col" varStatus="colStatus">
  <ace:column headerText="#{col.headerText}" style="width: 40px" >
    <ice:outputText value=" #{row.obj[colStatus.index]}"></ice:outputText>
  </ace:column>
</c:forEach> 
```

# android - 设置为自动模式时如何获取之前的屏幕亮度值？

> ID：15403893
> 
> 赞同：1
> 
> 时间：2013-03-14T07:56:44.627
> 
> 标签：android, screen, android-preferences, android-windowmanager

*当显示设置中的**亮度*处于自动模式时，我想获得以前的屏幕亮度。

 *我尝试使用以下代码：

```
WindowManager.LayoutParams lp = getWindow().getAttributes();
previousScreenBrightness = lp.screenBrightness; 
```

但是即使我将手机放在黑暗或明亮的地方，它的价值`previousScreenBrightness`也一直存在。`-1.0`

*当亮度*设置不在自动模式时，我可以获得正确的值。

我使用的是安卓 4.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-31T07:55:44.733

你应该使用

```
int previousScreenBrightness = android.provider.Settings.System.getInt(getContentResolver(),Settings.System.SCREEN_BRIGHTNESS); 
```

获取**系统亮度值**（与**Settings>Display>Brightness**中的亮度值相同）。（范围从 0 到 255）

您从 WindowManager.LayoutParams 获得的（ *-1.0 ）表示*[BRIGHTNESS_OVERRIDE_NONE](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#BRIGHTNESS_OVERRIDE_NONE)，这意味着您当前的**Activity 亮度值**不会被 WindowManager.LayoutParams 属性覆盖。当该值设置为*0 到 1*时，您当前的 Activity 亮度值会受到设置的影响。*

# mysql - MySQL 数据库中的数据被截断我需要更多了解是什么原因造成的？

> ID：15403894
> 
> 赞同：1
> 
> 时间：2013-03-14T07:56:48.157
> 
> 标签：mysql, database, truncation

每次插入用户名和密码的数据行时，我总是收到此警告消息。我使用的功能是密码 MD5 和用户名当前用户。

我所做的是将用户名和密码的功能留空，现在它成功插入而没有警告，但我当然不能让密码不加密。

我试图在互联网上搜索这种问题，但它们很难理解。我需要知道的是每次我为发生警告的行设置函数时导致此问题的原因是什么？

这是警告说的。

> 插入 1 行。
> 
> 警告：#1265 第 1 行的“用户名”列的数据被截断
> 
> 警告：#1265 第 1 行的“密码”列的数据被截断

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:58:04.753

它只是意味着您插入的值的长度**大于**列上定义的长度。

将列`username`和`password`长度更改为 32，因为 MD5 返回 32 个十六进制数字的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:16:16.787

通常，密码在加密时带有更大的字符序列。因此，为了安全插入，请将您的密码长度设置为至少 50 个字符。我们已经在生产应用程序中实现了这一点，这至少在 2 年内没有给我们带来任何问题。我们已经看到 md5 加密密码达到 28 个字符或更多字符。

希望这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-08T13:54:20.600

请检查您的模型中的密码字段，max_lengh 是否大于 128

密码 = models.CharField(max_length=128, blank=True, null=True, verbose_name='password', help_text="password")

# javascript - JS正则表达式查找被双引号包围的子字符串

> ID：15403895
> 
> 赞同：8
> 
> 时间：2013-03-14T07:56:49.753
> 
> 标签：javascript

我需要找到一个用双引号括起来的子字符串，例如，like`"test"`或`"te\"st"`，`""`但不是`"""`“\”。为了实现这一点，这是以下最佳方式

```
1) /".*"/g
2) /"[^"\\]*(?:\\[\S\s][^"\\]*)*"/g
3) /"(?:\\?[\S\s])*?"/g
4) /"([^"\\]*("|\\[\S\s]))+/g 
```

昨天在面试的时候被问到这个问题，想知道答案以备日后参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:15:23.800

这些表达式的计算如下：

**表达式 1 匹配：**

*   一个反逗号
*   贪婪地使用任何字符，包括反逗号或斜线
*   最后一个逗号。

这将匹配`"test" some wrong text "text"`，因此失败

**表达式 2 匹配：**

*   一个反逗号
*   贪婪地尽可能多的字符既不是反逗号也不是斜杠
*   贪多套
    *   任何以斜线开头的字符
    *   贪婪地尽可能多的字符既不是反逗号也不是斜杠
*   最后一个逗号

因此，这会将反逗号中的所有字符收集在集合中，并用斜线分隔。如果逗号前面有斜线，则它特别排除了逗号，将其包含在任何后续集合中。这将起作用。

**表达式 3 匹配：**

*   一个反逗号
*   尽可能少的套装：
    *   前面有可选斜杠的任何一个字符
*   最后一个逗号

这收集了所有字符，可选地以斜线开头，但不是贪婪的。这将起作用

**表达式 4 匹配：**

*   一个反逗号
*   贪婪地所有既不是逗号也不是斜杠的字符
*   一项或多项：
    *   一个反逗号或
    *   斜线和任何字符

这将匹配`"test"\x`，因此失败

**结论：**

据我所知，表达式 2 和 3 都可以。我可能遗漏了一些东西，但对于给出的示例，两者肯定会起作用（或不合适）。那么问题来了，哪个更好。我会投票给三个，因为它更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:56:13.153

你的语法有点不清楚。我假设你想找到所有格式为 DQ [除了 DQ 或 \DQ]* DQ 的字符串。

正则表达式`/"([^"\\\\]|\\\\"|\\\\[^"])*"/g`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T23:41:59.373

你也可以摆脱这个更简单的家伙：

```
/("(\\"|[^"])+")/g 
```

[http://jsfiddle.net/b9chris/eMN2S/](http://jsfiddle.net/b9chris/eMN2S/)

# c# - 如果文件以该名称存在，RenameFile 会做什么？它会删除旧文件吗？

> ID：15403897
> 
> 赞同：-4
> 
> 时间：2013-03-14T07:57:01.393
> 
> 标签：c#, file

我在 c# 中有这行代码：

```
ftp.RenameFile(file_name, "folder_name/" + file_name); 
```

其中 ftp 是 FtpConnection 类的一个实例。

我很想知道如果 folder_name 已经有一个名为 file_name 的文件会发生什么。它会删除旧文件并用新文件替换它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:07:58.500

由于[文档](http://www.enterprisedt.com/products/edtftpnetpro/doc/manual/api/html/M_EnterpriseDT_Net_Ftp_FTPConnection_RenameFile.htm)（假设我有正确的产品^((a))）似乎没有说明一种或另一种方式，因此您能做的最好的事情就是尝试一下。

尽管您可能想尝试一些不同的组合来检查权限等的影响，但应该立即清楚会发生什么。

* * *

^((a))如果我*没有*合适的产品，方法仍然有效：要么查阅文档，要么自己尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:01:56.947

它什么也没做。它不会删除旧文件。

# c# - 使用 C# 进行颜色检测

> ID：15403898
> 
> 赞同：5
> 
> 时间：2013-03-14T07:57:03.477
> 
> 标签：c#, winforms, emgucv

我正在使用 EmguCV 库开发一个用于使用网络摄像头进行微笑检测的 winForm c# 程序。我使用一些 haarcascade_smile xml 文件来成功完成它。但是，在某些情况下会出现检测错误：有时嘴形线被错误地识别为嘴。

我有一个新的想法，就是在原来的xml文件之外寻找红色的颜色来改进嘴巴检测，并尝试降低错误率。

有谁知道可用于检测红色的命令或库？

非常感谢 ：）

```
var smiles = grayframe.DetectHaarCascade(_smiles, 
                                         ScaleIncreaseRate, 
                                         MinNeighbors, 
                                         HAAR_DETECTION_TYPE.DO_CANNY_PRUNING, 
                                         new Size(WindowsSize, WindowsSize))[0];
if (smiles.Length == 0)
{
    // Number of smile face detected is 0
}
else
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:12:57.810

[Bitmap.Getpixel()](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel%28v=vs.80%29.aspx)将为您提供指定像素的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:11:38.107

用`Bitmap.GetPixel()`你可以得到像素的颜色。然后，您必须确定该颜色是否被视为*红色*。这是一个不是很难解决的挑战，但可能需要一些研究。

例如，查看 HTML 颜色表及其代码，您已经可以确定大多数*红色*的以下特征：

*   *RGB*值的*R*元素高于*G*和*B*。
****   *G*元素大部分时间低于*B*，有时相等，但从不高于 B。*   *R*值高，B值越高，*越*紫；什么可以接受，什么不可以？***

 **等等等等。您可以创建一个定义这些规则的类，并检查颜色是否为您的特定用途而被视为红色。

由于您的目标是缩小范围的红色，因此您可以更加专业化课程并获得更准确的答案。**

# c# - 重新加载 SCSF 应用程序

> ID：15403901
> 
> 赞同：0
> 
> 时间：2013-03-14T07:57:08.067
> 
> 标签：c#, scsf

我正在使用 SCSF 来定义一组松散耦合的应用程序和服务的框架。profilecatalog.xml 文件描述了应该加载哪些插件以及对服务的依赖关系。这是标准程序并且运行良好。

但是，我想启用在运行时加载插件的可能性。我有一些插件，需要一些时间才能加载。而且这个插件很少使用。所以我认为只有在需要时才可以在运行时加载这个插件（用户点击该项目）。当然可以以一种不会减慢框架启动时间的方式编写插件。但是我不对任何插件负责，所以我尝试通过不加载任何插件来从框架中解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T22:51:34.390

您可以使用这些文章中概述的技术动态加载 SCSF 模块：

1.  [http://blogs.southworks.net/mwoloski/2006/02/27/cabmodulesondemand/](http://blogs.southworks.net/mwoloski/2006/02/27/cabmodulesondemand/)
2.  [http://blogs.msdn.com/b/mszcool/archive/2005/12/20/505976.aspx](http://blogs.msdn.com/b/mszcool/archive/2005/12/20/505976.aspx)
3.  [http://smartclient.codeplex.com/discussions/222221](http://smartclient.codeplex.com/discussions/222221)

您可能遇到的一个限制是无法动态“卸载”模块。

# css - 图像的 CSS 淡入效果

> ID：15403902
> 
> 赞同：1
> 
> 时间：2013-03-14T07:57:13.400
> 
> 标签：css, fadein

我为网站上的徽标添加了淡入效果：

```
#logo img {
    opacity: 0;
    -moz-transition: opacity 5s; /* Firefox 4 */
    -webkit-transition: opacity 5s; /* Safari and Chrome */
    -o-transition: opacity 5s;
    transition: opacity 5s;
} 
```

和

```
<div id="logo"><p><a href="index.html"><img src="img/logo.png" ... onload="this.style.opacity='1';" /></a></p></div> 
```

乍一看，它似乎工作得很好。但是在第二（第三，...）页面上，徽标只是显示，它不会在 IE9 或 FireFox 19 或 Opera 12 中淡入 - 仅在 Safari 5 和 Chrome 25 中，淡入效果适用于每一页。

我几乎从不做网页设计，这是我在玩 CSS 时偶然发现的一个很好的功能。我认为开始学习如何使用像 jQuery 这样的大型库是不合适的，我每年会使用不到一次。

是否有一种简单的方法可以使其与所有页面上的其他浏览器一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:02:53.997

根据您的评论，这可能有效：

```
 animation: fadein 2s;
-moz-animation: fadein 2s; /* Firefox */
-webkit-animation: fadein 2s; /* Safari and Chrome */
-o-animation: fadein 2s; /* Opera */ 
```

如果你想支持 IE，你应该使用 jQuery。

# r - 使用 RMarkdown + knitr 创建具有条件格式的表格

> ID：15403903
> 
> 赞同：19
> 
> 时间：2013-03-14T07:57:13.773
> 
> 标签：r, knitr

我有一个数据框，我想通过 knitr 和 RMarkdown 将其作为带有条件格式的表格输出到 HTML 文件中。例子：

```
n <- data.frame(x = c(1,1,1,1,1), y = c(0,1,0,1,0))
> n
  x y
1 1 0
2 1 1
3 1 0
4 1 1
5 1 0 
```

我希望突出显示具有不同 x 和 y 值的行。所以在这种情况下，这将是第 1、3 和 5 行。如果 HTML 文件中的输出是一个 HTML 表格，那就太好了，但如果没有图像也可以。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-14T08:45:56.037

我一直想`pandoc.table`在我的[pander 包](http://rapporter.github.com/pander/)中扩展这个功能，但没有时间去做。但是这个问题真的很鼓舞人心，可能会在接下来的几天内完成。在那之前，怎么办：

1.  加载包：

    ```
    library(pander) 
    ```

2.  加载您的数据：

    ```
    n <- data.frame(x = c(1,1,1,1,1), y = c(0,1,0,1,0)) 
    ```

3.  更新您的行以在 Pandoc中标记为**强：**

    ```
    for (i in c(1, 3, 5))
        n[i, ] <- pandoc.strong.return(n[1, ]) 
    ```

4.  显示您的表格的降价版本：

    ```
    pandoc.table(n)
    pander(n)       # S3 method 
    ```

5.  `brew`使用语法将降价转换为例如 HTML ：

    ```
    Pandoc.brew(text = '<%=n%>', output = tempfile(), convert = 'html') 
    ```

* * *

**更新：**我更新`pander`了一些新参数来轻松突出显示行/列/单元格。尽管我仍在开发一些进一步的辅助函数以简化此过程，但这里有一个快速演示，以便您了解它如何帮助您的工作流程：

```
> pandoc.table(n, emphasize.rows = c(1, 3, 5))

-------
 x   y 
--- ---
*1* *0*

 1   1 

*0* *1*

 1   1 

*1* *0*
-------

> pandoc.table(n, emphasize.strong.cells = which(n == 1, arr.ind = TRUE))

-----------
  x     y  
----- -----
**1**   0  

**1** **1**

**1**   0  

**1** **1**

**1**   0  
----------- 
```

* * *

**更新：** `pander`获得了一些辅助功能，可以更轻松地突出显示表格中的单元格：

```
> t <- mtcars[1:3, 1:5]
> emphasize.cols(1)
> emphasize.rows(1)
> pandoc.table(t)

----------------------------------------------------
      &nbsp;         mpg    cyl   disp   hp    drat 
------------------- ------ ----- ------ ----- ------
   **Mazda RX4**     *21*   *6*  *160*  *110* *3.9* 

 **Mazda RX4 Wag**   *21*    6    160    110   3.9  

  **Datsun 710**    *22.8*   4    108    93    3.85 
---------------------------------------------------- 
```

或者直接用`pander`方法：

```
> emphasize.strong.cells(which(t > 20, arr.ind = TRUE))
> pander(t)

---------------------------------------------------------
      &nbsp;          mpg     cyl   disp     hp     drat 
------------------- -------- ----- ------- ------- ------
   **Mazda RX4**     **21**    6   **160** **110**  3.9  

 **Mazda RX4 Wag**   **21**    6   **160** **110**  3.9  

  **Datsun 710**    **22.8**   4   **108** **93**   3.85 
--------------------------------------------------------- 
```

*请注意，这些新功能尚未在 CRAN 上发布，但您可以在[GitHub 上](https://github.com/Rapporter/pander)托管的最新版本中找到。*

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-14T09:08:25.827

这里有一个基于`xtable`自定义的解决方案`css`。我认为该解决方案很灵活，因为一旦您开始使用它，如果您知道一些 css 技巧，您就可以无限期地自定义您的 html 表格。

开始了。解决方案包含 3 个文件：

1.  一个 css 文件，我在其中交替表行颜色。

    ```
    table {
       max-width: 95%;
       border: 1px solid #ccc;
    }

    th {
      background-color: #000000;
     color: #ffffff;
    }

    table tr:nth-child(odd) td{
       background-color: #FF0000;
    }
    table tr:nth-child(even) td{
        background-color: #00FFFF;
    } 
    ```

2.  一个 R 脚本文件，用于设置具有以下内容的 RStudio 降价：

    ```
    options(rstudio.markdownToHTML = 
          function(inputFile, outputFile) {      
            require(markdown)
            markdownToHTML(inputFile, outputFile, stylesheet='customstyle.css')   
          }
    ) 
    ```

3.  使用以下内容创建一个新的降价：

    ```
    ```{r}
     source('initmd.R')
    ```

    ```{r,results='asis'}
    library(xtable)
    n <- data.frame(x = c(1,1,1,1,1), y = c(0,1,0,1,0))
    print(xtable(n),type='html')
    ``` 
    ```

最后使用按钮将markdwon转换为html `knit HTML`，你应该得到这样的东西：

![在此处输入图像描述](../Images/7191007d4755633fc8a152d7aaa7732c.png)

# ssl - 带通道的翘曲棘轮

> ID：15403905
> 
> 赞同：2
> 
> 时间：2013-03-14T07:57:14.253
> 
> 标签：ssl, stunnel, ratchet

我正在运行棘轮 webSocket 服务器，它运行良好。问题是某些连接在握手后立即关闭。

在搜索 stackOverflow 和 google 后，我发现我应该使用 wss，因为使用 ssl 会阻止连接被关闭。经过更多阅读后，我发现 wss 尚未在棘轮中实现，解决方案是使用 stunnel 扭曲棘轮。我再次搜索有关如何实现此功能的帮助，但发现 non .

我如何用 stunnel 扭曲棘轮？有没有更好的方法来解决这个问题？我真的是一个新手，所有的 ssl 问题。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-07T17:40:26.153

将您的棘轮 websocket 设置为仅接受本地连接：

```
$webSock = new Server($loop);
$webSock->listen(8080, '127.0.0.1'); // local connections only
$session = $this->getContainer()->get('session.provider');
$server = new IoServer(new WsServer($session), $webSock, $loop); 
```

生成服务器证书。很好的 ubuntu[说明](https://help.ubuntu.com/8.04/serverguide/certificates-and-security.html)。

现在安装stunnel。Ubuntu 说明[在这里](http://www.ubuntugeek.com/stunnel-universal-ssl-tunnel-for-network-daemons.html)。

配置 stunnel 以使用新证书并接受安全端口上的连接并将它们通过隧道连接到您的 websocket 服务器：

```
cert = /etc/ssl/certs/server.crt
key = /etc/ssl/private/server.key
...
[websockets]
accept = 8443
connect = 8080 
```

开始 stunnel，你应该去参加比赛。

# java - 使用 JButton 将鼠标悬停在事件上

> ID：15403909
> 
> 赞同：3
> 
> 时间：2013-03-14T07:57:27.327
> 
> 标签：java, swing, jbutton

我正在尝试在 JButton 上创建自定义鼠标悬停事件。原因是我的 JButton 当前是一个图像，所以我不得不删除所有的边框和动画等等。所以我这样做了：

```
btnSinglePlayer.setOpaque(false);
btnSinglePlayer.setContentAreaFilled(false);
btnSinglePlayer.setBorderPainted(false); 
```

这非常适合仅显示图像，并且该按钮确实有效。我想知道是否有任何预先构建的方法可以做到这一点，或者我将如何学习做我想做的事。

更具体地说，当我将鼠标悬停在图像上时，我希望图像变得更大一点。

到目前为止，我已经尝试过这些，但什么也没做：

```
btnSinglePlayer.setRolloverIcon(singlePlayerButton);
btnSinglePlayer.setPressedIcon(singlePlayerButton); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:25:37.363

1.  让[Icon 使用 API 中实现的方法](https://stackoverflow.com/a/7919280/714968)

2.  您可以将[ButtonModel 与 ChangeListener一起使用](https://stackoverflow.com/a/5755124/714968)

3.  （默认情况下）对于[JButtons JComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html)没有理由使用`Mouse(Xxx)Listener`或它的`MouseEvent`，所有这些事件都已实现且正确

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T08:09:31.410

作为替代方案，您可以通过注册并覆盖、、和方法`MouseListener`来实现此目的。例如：`JButton``mouseEntered()``mouseExited()``mousePressed()``mouseReleased()`

```
 final ImageIcon icon1 = new ImageIcon("tray.gif");
        final JButton button = new JButton(icon1);
        final int width = icon1.getIconWidth();
        final int height = icon1.getIconHeight();
        button.addMouseListener(new MouseAdapter()
        {
            public void mouseEntered(MouseEvent evt)
            {
                icon1.setImage((icon1.getImage().getScaledInstance(width + 10, height,Image.SCALE_SMOOTH)));
                //button.setIcon(icon1);
            }
            public void mouseExited(MouseEvent evt)
            {
                icon1.setImage((icon1.getImage().getScaledInstance(width , height,Image.SCALE_SMOOTH)));
            }
            public void mousePressed(MouseEvent evt)
            {
                icon1.setImage((icon1.getImage().getScaledInstance(width + 5, height,Image.SCALE_SMOOTH)));
            }
            public void mouseReleased(MouseEvent evt)
            {
                icon1.setImage((icon1.getImage().getScaledInstance(width + 10, height,Image.SCALE_SMOOTH)));
            }
        });
        button.setOpaque(false);
        button.setContentAreaFilled(false);
        button.setBorderPainted(false); 
```

# android - 无法使用linkedin-j 库发送邀请

> ID：15403911
> 
> 赞同：3
> 
> 时间：2013-03-14T07:57:34.383
> 
> 标签：android, api, linkedin, invitation

我正在尝试从 Android 应用发送 Linkedin 邀请。（我拥有所有权限，包括`Send invitation`or `Message(w_message)`）。我可以成功发送消息，但我无法发送邀请。

我正在准备`CommunicationsApiClient`命名对象`com_cliClient`并尝试通过 Person 或 Id 发送邀请。**我**在调用以下方法时没有收到任何错误，但没有发送邀请。

一些代码：

```
com_cliClient.sendInviteToPerson(p2, "hello", "Invitation...");
com_cliClient.sendInviteById(id, "hello","Invitation",authHeader); 
```

我正在使用`linkedin-j-android.jar`Android 应用程序。

# google-bigquery - BigQuery 导入 - 未找到 CS 文件

> ID：15403912
> 
> 赞同：1
> 
> 时间：2013-03-14T07:57:41.287
> 
> 标签：google-bigquery

我们的系统每 10 分钟运行一次从 CS 导入的 BQ csv 文件 (~8Mb)。但是今天至少发生了 4 次错误：“未找到：Google 存储文件 ...”。我已经在 CS 上仔细检查了文件并下载它没有问题。我试图（重新）开始 BQ 导入（job_610b149c0d9041b7a3145ee245b80653），再次得到“未找到......”。所有其他进口（数百个）都很好。

我们使用 GAE (java) 在 CS 上暂存 csv 文件，然后触发导入作业 (GAE -> CS -> BQ)。一般来说，系统工作正常，但不是很可靠。所以，我几乎每天都在与差距（缺少数据）或有时重复。是否有任何其他方式（良好做法）将“恒定流”数据导入 BQ？流媒体？

一旦我们在 BQ 表中有数据，事情就变得容易多了。BigQuery 真的是很棒的产品！谢谢，莎莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:36:20.510

这应该是固定的。存在一个配置问题，导致某些 Cloud Storage 文件在昨晚大约下午 5 点到今天早上 10:15（太平洋标准时间）之间无法访问。如果您有任何其他问题，请 ping 此线程。

# android - 如何在没有 Facebook 应用程序的情况下登录 Facebook？

> ID：15403916
> 
> 赞同：4
> 
> 时间：2013-03-14T07:58:10.637
> 
> 标签：android, facebook-login, facebook-android-sdk

我使用 Facebook 示例应用程序 ( `SessionLoginSample`) 来了解如何登录 Facebook。我的 Facebook SDK 是最新的 — [3.0 版](http://developers.facebook.com/docs/reference/android/3.0)。安装 Facebook 应用程序后，我可以毫无问题地登录。

问题是当我卸载我的 Facebook 应用程序并重新安装示例时（因此它不会自动登录）。我尝试登录，但我只能看到一个白色的空对话框。我唯一的选择是关闭它。即使我等待 10-15 分钟，对话框也不会改变。

![SessionLoginSample - 登录](../Images/6dfd2d5c91ea8a350977df8b94b36b1e.png)

我尝试调试 Facebook SDK，但找不到导致错误的原因。

我在 LG-E610 (4.0.3) 和 HTC Sensation (4.0.3) 上对此进行了测试。

这是 facebook sdk 错误还是我做错了什么？

**编辑：**我在 10 天后用相同的代码再次测试了这个问题，一切似乎都按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T15:45:50.780

问题可能不在你这边！我遇到了这样一种情况，即对 Facebook 的一个相同请求将按预期或“内部服务器错误 500”回答，具体取决于我的 IP（确切地说是 IP/用户代理）。

在以下情况下，您可以确定您的配置和应用程序没有任何问题：

1.  您的应用可从另一个网络（即另一个 IP）运行
2.  当来自 Facebook 的示例应用程序（即 HelloFacebookSample）遇到同样的问题时。
    *   对于 Android，请参阅：http: [//developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)
    *   对于 iOS，请参阅：http: [//developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)

我怀疑 Facebook 将某些 IP/用户代理组合放在临时黑名单中。问题是他们的通用 500 响应没有帮助。

对于另一个报告的案例，请参阅我在[来自 Facebook 的内部服务器 500 的问题，其中包含特定的 IP/用户代理组合](https://stackoverflow.com/questions/15589114/facebook-web-login-in-android-app-stalls-when-using-wifi-instead-of-3g)

# c# - IIS7 缓冲区大小限制

> ID：15403921
> 
> 赞同：0
> 
> 时间：2013-03-14T07:58:46.073
> 
> 标签：c#, iis-7, size, buffer, limit

尝试在以下使用 IIS7 的操作系统中通过 http 请求下载视频文件时出现我的问题：win2008 32Bit、Win2008 R2 64Bit

目前工作正常： win2003 ， vista64 (IIS6)

问题描述：当用户通过 C# 请求大于 256mb 的文件时，他们会得到一个有限的文件，即使使用 Content-Length 参数，文件似乎也得到了正确的大小，但不是完整的内容。

请求文件的 URL 时，我得到了完整的文件，问题仅通过 C# 脚本发生，也是完整缓冲区已发送给用户的 C# 响应。

我在文章中更改了 IIS7 设置：

[http://blog.twinharbor.com/2011/07/28/fixing-iis7-maximum-upload-size/](http://blog.twinharbor.com/2011/07/28/fixing-iis7-maximum-upload-size/)

但它仍然不起作用。

此外，任何地方都没有评论或错误。

请找到我的代码示例：

```
var context = System.Web.HttpContext.Current; 
context.Response.ContentEncoding = Encoding.GetEncoding("windows-1255");
context.Response.HeaderEncoding = Encoding.GetEncoding("UTF-8");
context.Response.Charset = "utf-8";
System.IO.Stream iStream = null;

// Buffer to read 100K bytes in chunk:
byte[] buffer = new Byte[100000];

// Length of the file:
int length=0;

// Total bytes to read:
long dataToRead=0;

// Identify the file to download including its path.
string filepath = u.Trim(BigFile);

// Identify the file name.
string filename = System.IO.Path.GetFileName(filepath);

Start.Value = u.Time();

try
{
    iStream = new System.IO.FileStream(filepath, System.IO.FileMode.Open, System.IO.FileAccess.Read, System.IO.FileShare.Read);
    dataToRead = iStream.Length;

    context.Response.Charset = "";
    context.Response.ContentType = "application/octet-stream";    

    context.Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);
    context.Response.AddHeader("Content-Length", dataToRead.ToString());

    while (dataToRead > 0)
    {
        if (context.Response.IsClientConnected)
        {
            length = iStream.Read(buffer, 0, 100000);

            context.Response.OutputStream.Write(buffer, 0, length); 
            context.Response.Flush(); 
            buffer = new Byte[100000];
            dataToRead = dataToRead - length;
        }
        else
        {
            dataToRead = -1;
        }
    }
}
catch (Exception ex)
{
    context.Response.Write("Error : " + ex.Message);
}
finally
{
    if (iStream != null)
    {
        iStream.Close();
    }
    context.Response.Close();
} 
```

我会欣赏你的帮助。谢谢。

# c - 如何在linux中打印时间

> ID：15403933
> 
> 赞同：1
> 
> 时间：2013-03-14T07:59:38.883
> 
> 标签：c

所以我使用 rusage 打印出用户需要多长时间，以及系统处理命令需要多长时间，类似于，

```
 //DO STUFF HERE
           printf(" TOTAL TIMES: ");
           tusage.ru_utime.tv_sec  = rusage.ru_utime.tv_sec + rusage.ru_stime.tv_sec; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:15:23.860

尝试这个：

```
#include <stdio.h>
#include <sys/resource.h>
int main() {
  struct rusage rusage;
  struct rusage tusage;
  int i, j, r=0;
  for (i = 0; i < 10000; i++) {
    for (j = 1; j < 100000; j++) {
      r = i % j + i / j;
    }
  }
  getrusage(RUSAGE_SELF, &rusage);
  printf("TOTAL TIME \n");
  tusage.ru_utime.tv_sec =  rusage.ru_utime.tv_sec + rusage.ru_stime.tv_sec;
  tusage.ru_utime.tv_usec = rusage.ru_utime.tv_usec + rusage.ru_stime.tv_usec;
  tusage.ru_utime.tv_sec += tusage.ru_utime.tv_usec / 1000000;
  tusage.ru_utime.tv_usec = tusage.ru_utime.tv_usec % 1000000;
  printf("%ld.%06ld\n", tusage.ru_utime.tv_sec, tusage.ru_utime.tv_usec);

  return r;
} 
```

# iphone - 变量没有为新变量赋值

> ID：15403934
> 
> 赞同：0
> 
> 时间：2013-03-14T07:59:40.267
> 
> 标签：iphone, ios, objective-c, xcode

我有两个变量 newdose，另一个是 appDelegate 变量，newdose 中的值为 50，但在 appDelegate 变量中显示为零。

```
float newdose=vacinedose;
appDelegate.Same_Vaccination_Cost_Vaccination_Annually_No_Guarantee=newdose;
NSLog(@"After Dose Vaccine Dose is %.2f",newdose); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:01:13.110

您需要初始化您的 appDelegate 变量。做 ：

```
appDelegate=[UIApplication SharedApplication] 
```

# iphone - iOS 6.1.2 屏幕闪烁

> ID：15403935
> 
> 赞同：1
> 
> 时间：2013-03-14T07:59:48.527
> 
> 标签：iphone, ios, ios6

我创建了一个应用程序，登录后必须从 Web 下载新数据库，并且当您登录时，如果用户按是，则会出现自定义 UIAlertView，下载阶段将开始。当 UIAlertView 消失并且调用 UIAlertView 的委托时，我在后台线程上开始下载。现在我正在尝试修改显示当前百分比的标签并将自定义活动指示器添加到视图中。之后，当活动指示器更改图片或 label.text 获得新字符串时，屏幕开始闪烁，但仅在第一次启动时（安装后），如果我强制关闭应用程序并再次启动它，闪烁的事情不是出现，在以前版本的 iOS 上，应用程序不会闪烁。我在修改标签时从主线程调用。我尝试删除标签和活动指示器，并且在警报视图消失后应用程序不闪烁。我试图删除警报视图并立即开始下载，之后只有状态栏开始闪烁。

所以我的问题是：我应该怎么做才能解决闪烁错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:02:50.903

我相信原因是因为您正在后台线程上更新 UI。你不能这样做，你必须为此使用主线程：

要从后台线程在主线程上运行代码，可以使用 GCD：

```
dispatch_async(dispatch_get_main_queue(), ^{
    //your UI code here        
}); 
```

如果这不能解决错误，则可能是您的设备存在错误。

# symfony-2.1 - Symfony 2.1：使用调用 ApcClassLoader->__construct 的 app.php 控制器测试 prod mod => 异常

> ID：15403938
> 
> 赞同：0
> 
> 时间：2013-03-14T08:00:03.837
> 
> 标签：symfony-2.1, production-environment

在将我的 symfony 2.1 版本部署到我的产品服务器之前，我想测试产品环境的行为。

所以我做了一个`php app/console cache:clear --env=prod --no-debug`, 之后`php app/console assets:install web`，现在当我调用应用程序控制器时，我遇到了这个错误。

这种情况下的谷歌不是我的朋友:-(

> # 0 /Applications/MAMP/htdocs/myapp/web/app.php(13): Symfony\Component\ClassLoader\ApcClassLoader->__construct('sf2', Object(Composer\Autoload\ClassLoader))
> 
> # 1 {主要}

这是我的 app.php 文件

> 使用 Symfony\Component\ClassLoader\ApcClassLoader；使用 Symfony\Component\HttpFoundation\Request；
> 
> $loader = require_once **DIR** .'/../app/bootstrap.php.cache';
> 
> // 使用 APC 进行自动加载以提高性能 // 将 'sf2' 更改为您想要的前缀，以防止与另一个应用程序发生密钥冲突 /* $loader = new ApcClassLoader('sf2', $loader); $loader->注册（真）；*/
> 
> require_once **DIR** .'/../app/AppKernel.php'; //require_once **DIR** .'/../app/AppCache.php';
> 
> $kernel = new AppKernel('prod', false); $kernel->loadClassCache();
> 
> //$kernel = new AppCache($kernel); $request = Request::createFromGlobals(); $response = $kernel->handle($request); $响应->发送（）；$kernel->terminate($request, $response);

任何帮助都会很酷

谢谢山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:36:56.837

`ApcClassLoader`安装 APC失败了吗？尝试重新启动apache。

我们真的看不出那些 APC 行是否被注释掉了 not in your `app.php`, 行返回都是乱七八糟的。

# linux - 服务器启动时如何启动ffserver？

> ID：15403941
> 
> 赞同：0
> 
> 时间：2013-03-14T08:00:06.920
> 
> 标签：linux, ubuntu, ffmpeg, daemon, ffserver

我在 Ubuntu 上安装了 ffmpeg 的 ffserver，但是想在服务器启动时将它作为一个守护进程启动，为它提供一个配置文件，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:05:32.047

您可以使用 update-rc.d 命令执行相同的操作

> sudo update-rc.d ffserver 默认值

查看 update-rc.d 的手册页以获取更多详细信息

# java - Java用逗号或0（零）后跟空格分割字符串

> ID：15403945
> 
> 赞同：0
> 
> 时间：2013-03-14T08:00:47.197
> 
> 标签：java, regex, expression

如果我有一个字符串，例如

```
 s = "david,marko,rita,0 megan,0 vivian,law"; 
```

我需要将此字符串拆分为

```
david
marko
rita
megan
vivian
law 
```

我正在尝试

```
String arr[] = s.split("[,\\s]"); 
```

但没用。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:02:54.567

你可以使用这个表达式：

```
String arr[] = s.split(",0?\\s*"); 
```

甚至可能：

```
String arr[] = s.split("[,0\\s]+"); 
```

从示例中不清楚您想要哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T08:05:33.903

您的正则表达式是：“（，0 |，）”

所以试试这个代码：

```
public static void main(String[] args){
        String s = "david,marko,rita,0 megan,0 vivian,law";
        String[] ss = s.split("(,0 |,)");
        for (int i = 0; i < ss.length; i++) {
            String string = ss[i];
            System.out.println(string);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T08:13:30.333

只是一个建议而不是用多个值拆分试试这个

```
import java.util.*;
class test {
  public static void main(String[] args) {
    String s = "david,marko,rita,0 megan,0 vivian,law";
    System.out.println(Arrays.toString(s.replace("0","").replace(" ","").split(",")));
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:36:23.423

你可以试试这个：

```
public class SplitTest {

    public static void main(String[] args) {
        String inputString = "david,marko,rita,0 megan,0 vivian,law";
        String splits[] = inputString.split(",0?\\s*");
        for (String split : splits) {
            System.out.println(split);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-06T11:34:23.450

```
String[] arr = s.split(",(0\\s+)*"); 
```

正则表达式以逗号分隔，后跟可选的 0 和一个或多个空格。

```
 public static void main(String[] args) {
         String s = "da0vid,marko,rita,0 megan,0 vivian,law";
         String[] arr = s.split(",(0\\s+)*");
         for (int i = 0; i < arr.length; i++)
           System.out.println("'"+arr[i]+"'");
      }

=>
'da0vid'
'marko'
'rita'
'megan'
'vivian'
'law' 
```

# android - Google Maps Android API：SupportMapFragment 与 MapFragment

> ID：15403961
> 
> 赞同：19
> 
> 时间：2013-03-14T08:01:41.210
> 
> 标签：android, google-maps-api-2

我通读了谷歌地图 API 文档并在 MapFragment 下，它建议仅在针对 API 12 及更高版本时使用该类。然后我假设 SupportMapFragment 的目标是 API 11 及以下，尽管谷歌没有在文档中明确提到它。那么，如果我想针对广泛的 API 等级怎么办？SupportMapFragment 是否也针对 11 以上的 API？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-14T11:18:19.653

> 然后我假设 SupportMapFragment 的目标是 API 11 及以下，尽管谷歌没有在文档中明确提到它。

`SupportMapFragment`用于 Android 支持包的片段的反向移植。它可用于运行 API 10 及更低版本的 Android 设备，以及运行 11 及更高版本的 Android 设备。`MapFragment`需要原生 API Level 11 片段实现，因此只能在 API Level 11 和更高级别的设备上使用。

请注意，据我所知，没有运行 API 级别 11 的设备——所有设备都至少升级到 API 级别 12。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-11T19:47:23.310

尽管如此，它还是被强制使用`SupportMapFragment`，因为它可以被强制转换：

```
SupportMapFragment mapFragment = (SupportMapFragment) getChildFragmentManager().findFragmentById(R.id.map);
if (mapFragment != null) {mapFragment.getMapAsync(this);} 
```

由于某种原因`FragmentManager`不能返回`MapFragment`，尽管它是众所周知的。

# ios - 是否有可用于基于 IOS 的视频流编码和解码的框架？

> ID：15403966
> 
> 赞同：0
> 
> 时间：2013-03-14T08:02:11.600
> 
> 标签：ios, video-streaming, decode, encode, codec

有谁知道什么是框架或 API，而不是 iOS 上的 FFMPEG 库？

因为如果使用FFMPEG库对视频流进行编码和解码会占用大量CPU，而且性能太慢。

所以我想研究一种提高性能的新方法。但是在iOS上，苹果不允许应用程序访问硬件层API，因此我们无法调用可以对硬件层视频流进行编解码的API。

用谷歌搜索后，我发现有一个库可以做到这一点，但没有演示，这里是网站：[http ://www.foxitsolutions.com/iphone_h264_sdk.html](http://www.foxitsolutions.com/iphone_h264_sdk.html)

有没有人可以回答我的问题并给我一个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:16:50.983

使用 AVFoundation。你可以使用官方的[AVPlayerDemo](https://developer.apple.com/library/ios/#samplecode/AVPlayerDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010101)来测试它。

# entity-framework - ASP.NET MVC4 Web API 控制器序列化

> ID：15403968
> 
> 赞同：1
> 
> 时间：2013-03-14T08:02:15.027
> 
> 标签：entity-framework, serialization, asp.net-mvc-4, controller, asp.net-web-api

我正在尝试创建一个 RESTful Web 服务，它使用 ASP.NET MVC4 Web API 返回产品列表。这是我的控制器类

```
public class ProductController : ApiController
{
    public IEnumerable<Product> GetProducts()
    {
        WebCatalogContext dbcontext = DatabaseConfig.Instance.Context;
        List<Product> plist = dbcontext.Products.ToList();
        return plist;
    }
} 
```

当我运行我的服务并从我的浏览器调用以下 URL：/api/Product 时，我得到 System.Runtime.Serialization.SerializationException。我查看了我的 plist 对象，它没有问题。

这是我的数据模型：

```
[DataContract(Name = "p")]
[Serializable]    
public class Product
{
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    [DataMember(Name = "id")]
    public int Id { get; set; } 

    [Required, MaxLength(50)]
    [DataMember(Name = "ti")]
    public string Title { get; set; }

    [Required]
    [DataMember(Name = "de")]
    public string Description { get; set; }

    [Required]
    [DataMember(Name = "ph")]
    public string PhotoURL { get; set; }

    [DataMember(Name = "ca")]        
    public virtual ProductCategory Category { get; set; }
}

[DataContract(Name="pc")]
[Serializable]
public class ProductCategory
{
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    [DataMember(Name="id")]
    public int Id { get; set; }

    [DataMember(Name="nm")]
    public string Name { get; set; }
} 
```

当我从 Product 类中删除对 ProductCategory 的引用时，一切正常。但是，当我包含它时，我得到以下异常。

`Type 'System.Data.Entity.DynamicProxies.Product_664E9A0AA1F165A26C342B508BFFF1279FD3FE059285225BDA19F407A29A9CAD' with data contract name 'Product_664E9A0AA1F165A26C342B508BFFF1279FD3FE059285225BDA19F407A29A9CAD:[http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies](http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies)' is not expected. Consider using a DataContractResolver or add any types not known statically to the list of known types - for example, by using the KnownTypeAttribute attribute or by adding them to the list of known types passed to DataContractSerializer.`

关于我缺少什么的任何想法？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:10:23.680

实体框架使用 EF 代理 POCO 包装了您的 POCO，因此它可以执行延迟加载 - 这使用该`Virtual`属性来创建“延迟加载”导航属性。我希望这就是序列化错误的来源。

您可以创建一个新类并将 POCO 映射到该类 - 然后从控制器传递 DTO 样式类。我从来没有直接从 API 返回一个 EF 对象（我总是映射到其他东西），所以我不知道其他选项。

[如果您使用http://valueinjecter.codeplex.com/](http://valueinjecter.codeplex.com/)或[http://automapper.org/](http://automapper.org/)之类的工具，EF POCO 到 DTO（数据传输对象）相对容易

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:14:36.267

为了支持声明为的导航属性的延迟加载`virtual`，EF 将为任何具有导致此类异常的导航属性的模型生成代理。

对于非常简单的应用程序，您可以使用来自 EF 的模型作为 DTO（如果没有导航属性），但对于复杂的应用程序，您应该在 DTO 和域模型之间进行分离和区分。它不应该在 DTO 和域模型之间进行 1:1 映射。

因此，在您的情况下，您为 Web API 层创建更多的 DTO 模型，就可以了。

# asp.net-mvc - 基本控制器方法

> ID：15403969
> 
> 赞同：1
> 
> 时间：2013-03-14T08:02:16.083
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我的基本控制器方法没有被执行。下面是我的基本控制器。

```
public abstract class ReportServiceBaseController : Controller
{
    protected ReportServiceBaseController();

    [HttpPost]
    public JsonResult LoadDocumentInfo(LoadDocumentInfoRequest request);

    [HttpPost]
    public JsonResult LoadDocumentMapInfo(LoadDocumentMapInfoRequest request);
} 
```

下面是我的派生控制器：

```
public class ReportController : ReportServiceBaseController
{
    protected override PerpetuumSoft.Reporting.WebViewer.Server.ReportServiceBase CreateReportService()
    {
        return new ServiceClass();
    }

    [HttpPost]
    public JsonResult LoadDocumentInfo(LoadDocumentInfoRequest request)
    {
        return base.LoadDocumentInfo(request);
    }
} 
```

如果我从派生类中删除 LoadDocumentInfo 方法，那么它不会被调用。当我在派生类中添加同名方法时，它会被调用

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:11:13.837

你的基类实现是空的——但这也意味着代码不会编译——因为没有实现的方法必须标记为`abstract`.

派生控制器中的方法也必须用`override`.

阅读此作为参考： http: [//msdn.microsoft.com/en-us/library/ebca9ah3 (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ebca9ah3(v=vs.110).aspx)

# linux - 在 Shell 中动态重命名 XML 文件

> ID：15403970
> 
> 赞同：0
> 
> 时间：2013-03-14T08:02:16.317
> 
> 标签：linux, shell, unix, dynamic, rename

我有一个名为 *dmi_standard_load_B0001_set.xml* 的 XML 文件，我想通过接受用户的 *batch_name* 并将其更改为 *dmi_standard_load_${batch_name}_set.xml* 来​​动态重命名它。

我怎样才能做到这一点 ？我尝试了以下命令 bt 它会引发错误并且不起作用...

```
 mv dmi_standard_load_*_set.xml dmi_standard_load_${batch_name}_set.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:11:10.443

小心！您在命令中使用 * 通配符。如果您的目录中有多个 XML 文件，例如：

```
dmi_standard_load_B0001_set.xml
dmi_standard_load_B0002_set.xml
dmi_standard_load_B0003_set.xml 
```

您的命令将扩展为：

```
mv dmi_standard_load_B0001_set.xml dmi_standard_load_B0002_set.xml dmi_standard_load_B0003_set.xml dmi_standard_load_${batch_name}_set.xml 
```

最有可能的是，它会失败，告诉你最后一个参数不是目录。所以第一件事是，你想遍历你的文件，像这样：

```
for f in dmi_standard_load_*_set.xml
do
    mv ${f} dmi_standard_load_${batch_name}_set.xml
done 
```

**不要运行该代码！**我们还没有完成。这里的问题是您要将每个 XML 文件重命名为一个且只有一个文件。实际上，您最终会得到一个名为 的文件`dmi_standard_load_${batch_name}_set.xml`，其中包含最后一个通过循环的 XML 文件的内容。

您希望用户为这些文件中的每一个提供不同的批处理名称，对吗？因此，您需要使用以下`read`命令向她询问循环中的每个文件：

```
for f in dmi_standard_load_*_set.xml
do
    echo Please enter a batch name for file $f :
    read batch_name
    mv ${f} dmi_standard_load_${batch_name}_set.xml
done 
```

这将起作用，但没有错误检查......用户只需按 Enter 键，给出一个空的批次名称。这是确保用户提供名称的最终版本：

```
for f in dmi_standard_load_*_set.xml
do
    batch_name=
    while [[ ${batch_name} == '' ]]
    do
        echo Please enter a batch name for file $f :
        read batch_name
    done
    mv ${f} dmi_standard_load_${batch_name}_set.xml
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:25:42.303

那么您的典型批次名称是什么，其中的任何空格。如果是这样，您可能需要在文件名的第二位周围放置语音标记。值得 echo $ batch_name aldo 你可以尝试 load_$(echo $ $batch_name)_set.xml

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T09:30:36.200

例如，您可以使用这个单行脚本：

```
for file_name in *; do echo -ne "Renaming file \"${file_name}\" Enter batch_name: "; read batch_name; mv "${file_name}" "dmi_standard_load_${batch_name}_set.xml"; done 
```

这是我的 gentoo 盒子里的例子：

```
user@host ~/test $ ls -1
dmi_standard_load_B0001_set.xml
dmi_standard_load_B0002_set.xml
dmi_standard_load_B0003_set.xml
dmi_standard_load_B0004_set.xml
dmi_standard_load_B0005_set.xml
user@host ~/test $ for file_name in *; do echo -ne "Renaming file \"${file_name}\" Enter batch_name: "; read batch_name; mv "${file_name}" "dmi_standard_load_${batch_name}_set.xml"; done
Renaming file "dmi_standard_load_B0001_set.xml" Enter batch_name: test
Renaming file "dmi_standard_load_B0002_set.xml" Enter batch_name: another test
Renaming file "dmi_standard_load_B0003_set.xml" Enter batch_name: and test again
Renaming file "dmi_standard_load_B0004_set.xml" Enter batch_name: four
Renaming file "dmi_standard_load_B0005_set.xml" Enter batch_name: last, five
user@host ~/test $ ls -1
dmi_standard_load_and test again_set.xml
dmi_standard_load_another test_set.xml
dmi_standard_load_four_set.xml
dmi_standard_load_last, five_set.xml
dmi_standard_load_test_set.xml
user@host ~/test $ 
```

# rdf - 如何在 Stardog 中将数据库导出到 OWL 文件？

> ID：15403979
> 
> 赞同：1
> 
> 时间：2013-03-14T08:03:00.910
> 
> 标签：rdf, owl, stardog

[http://stardog.com/docs/using/#export](http://stardog.com/docs/using/#export)显示了将数据库导出到“ttl”文件的帮助。
我想将数据库导出为一些常见的格式，如“rdf”或“owl”。

如何导出为 OWL 格式或 RDF 格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:30:10.137

以下命令应该可以完成这项工作（以 RDF/XML 格式导出，经典 RDF）：

```
$ stardog export -c myDatabase --format RDFXML myDatabase_output.rdf 
```

# bash - bash shell 脚本在两个 JPG 上运行 imgcmp 并存储“不同”的

> ID：15403982
> 
> 赞同：0
> 
> 时间：2013-03-14T08:03:03.187
> 
> 标签：bash, file, shell, variables

我有一个 IP 摄像机，可以将文件通过 ftps 传输到我的 SuSE 服务器上的一个目录。

我正在尝试编写一个 shell 脚本来执行以下操作：

```
for every file in a directory;
    use image compare to check this file against the next one
    store the output in a file or variable.
    if the next file is different then  
        copy the original to another folder
    else 
        delete the original
end for 
```

在提示符下运行以下命令会生成：

```
myserver:/uploads # imgcmp -f img_01.jpg -F img_02.jpg -m rmse > value.txt
myserver:/uploads # cat value.txt
5.559730
5.276747
6.256132
myserver:/uploads # 
```

我知道代码有问题，我遇到的主要问题是从脚本中执行 imgcmp 并从中提取一个值，所以请指出显而易见的，因为这对我来说可能不是。

```
FILES=/uploads/img*
declare -i value
declare -i result
value = 10
shopt -s nullglob
# no idea what the above even does #
# IFS=.
# attempt to read the floating point number from imgcmp & make it an integer
for f in $FILES
do
  echo "doing stuff w/ $f"
  imgcmp -f 4f -F 4f+1 -m rmse > value.txt
  # doesn't seem to find the files from the variables #
  result= ( $(<value.txt) )
  if [ $result > $value ] ; then
    echo 'different';
    # and copy it off to another directory #
  else
    echo 'same'
    # and delete it #
  fi
  if $f+1 = null; then
    break;
  fi
done 
```

运行上述程序时，我收到一个错误`cannot open /uploads/img_023.jpg+1` ，并且执行 cat of value.txt 没有显示任何内容，因此所有文件都显示为相同。

我知道问题出在哪里，但我不知道我实际上应该做什么来提取 imgcmp 的输出（从脚本中运行），然后将它放入一个我可以比较的变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T09:15:14.070

```
FILES=/uploads/*

current=
for f in $FILES; do
  if [ -z "$current" ]; then
    current="$f"
    continue
  fi
  next="$f"
  echo "<> Comparing $current against $next"
  ## imgcmp will return non-0 if images cannot be compared
  ## and print an explanation message to stderr;
  if result=$(imgcmp -f $current -F $next -m rmse); then
    echo "comparison result: " $result
    ## Checking whether the first value returned
    ## is greater than 10
    if [ "$(echo "$result" | awk '$1 > 10 {print "different"}')" = "different" ]; then
      echo 'different';
      # cp -v $current /some/other/folder/
    else
      echo 'same'
      # rm -v $current
    fi
  else
    ## images cannot be compared... different dimensions / components / ...
    echo 'wholly different'
    # cp -v $current /some/other/folder/
  fi
  current="$next"
done 
```

# scala - sbt 无法从本地存储库解析插件

> ID：15403983
> 
> 赞同：3
> 
> 时间：2013-03-14T08:03:04.823
> 
> 标签：scala, sbt

我确实有我自己的插件，我用'publish-local'在本地发布。可以使用以前版本的 sbt 在其他项目中解析该插件，但它不再工作。

```
build.sbt of the plugin
sbtPlugin       := true

name            := "sumosim-webstart"

organization    := "net.entelijan"

version         := "1.3"

scalaVersion    := "2.10.0"

crossPaths      := false

publishTo       := Some("entelijan-repo" at "http://entelijan.net/artifactory/repositories/libs-ivy-local/")

credentials += Credentials("Artifactory Realm", "entelijan.net", "xxxx", "xxxx")

//scalacOptions ++= Seq("-deprecation", "-unchecked") 
```

那是 sbt publish-local 产生的输出

```
 [exec] [info] Packaging /home/wolfi/prj/sumosim/sumosim-pom/sumosim-webstart/target/sbt-0.12/sumosim-webstart-1.3-javadoc.jar ...
 [exec] [info] Done packaging.
 [exec] [info]  published sumosim-webstart to /home/wolfi/.ivy2/local/net.entelijan/sumosim-webstart/scala_2.10/sbt_0.12/1.3/poms/sumosim-webstart.pom
 [exec] [info]  published sumosim-webstart to /home/wolfi/.ivy2/local/net.entelijan/sumosim-webstart/scala_2.10/sbt_0.12/1.3/jars/sumosim-webstart.jar
 [exec] [info]  published sumosim-webstart to /home/wolfi/.ivy2/local/net.entelijan/sumosim-webstart/scala_2.10/sbt_0.12/1.3/srcs/sumosim-webstart-sources.jar
 [exec] [info]  published sumosim-webstart to /home/wolfi/.ivy2/local/net.entelijan/sumosim-webstart/scala_2.10/sbt_0.12/1.3/docs/sumosim-webstart-javadoc.jar
 [exec] [info]  published ivy to /home/wolfi/.ivy2/local/net.entelijan/sumosim-webstart/scala_2.10/sbt_0.12/1.3/ivys/ivy.xml 
```

那就是我要使用插件的plugin.sbt：

```
resolvers ++= Seq(
    "typesave" at "http://repo.typesafe.com/typesafe/releases",
    "sbt-idea-repo" at "http://mpeltonen.github.com/maven/",
    "entelijan" at "http://entelijan.net/artifactory/repo/"
)

addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.0.0")

addSbtPlugin("net.entelijan" % "sumosim-webstart" % "1.3") 
```

最后我得到的错误信息

```
[exec] [error] (*:update) sbt.ResolveException: unresolved dependency: net.entelijan#sumosim-webstart;1.3: not found 
```

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T10:44:03.583

据我所知，用于构建插件的 Scala 版本必须与用于构建 sbt 本身的 Scala 版本相匹配。Sbt 0.12 是用 Scala 2.9 构建的，sbt 0.13 是用 Scala 2.10 构建的。

您的插件项目使用 Scala 2.10 来构建插件。您的客户端项目可能也使用 Scala 2.10，但您使用 sbt 0.12 来构建它。因此，Sbt 尝试为 Scala 2.9 找到您的插件，但失败了，因为您为 2.10 发布了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-31T23:49:01.933

由于项目发布时的 Scala 版本与插件不匹配，您可能需要使用其他版本的`addSbtPlugin`in `build.sbt`：

```
addSbtPlugin("net.entelijan" % "sumosim-webstart" % "1.3", "0.12‌​", "2.10") 
```

第二个参数是`sbtVersion`，而最后一个是 for `scalaVersion`。

请注意，一般情况下，与发布的工件版本不匹配的插件可能会与其他不受支持的 sbt 和 Scala 版本发生冲突。

# java - 如何从 Java 中的数组生成直方图输出？

> ID：15403987
> 
> 赞同：0
> 
> 时间：2013-03-14T08:03:43.467
> 
> 标签：java, arrays, methods, histogram

所以我有一个方法可以调用到我的 main 中，它接受一个包含 10 个数字的数组，并在嵌套的 for 循环中创建一个直方图输出。我不知道如何在行标题旁边获得正确数量的星号。数组从前一个方法传递给该方法。谢谢！！

```
public static void outputHistogram(int [] list)
{

    int k =0;
    for(int i=0;i<=9;++i)
    {
        System.out.print((i*10+1) +"-"+(i*10+10)+":"+"\t");

        for(int j=1; j<=i;++j)  
            System.out.print("*");

        System.out.println();   
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T08:10:48.430

如果您打算将“列表”变量（实际上是一个`int`数组）用于直方图，那么我对双`for`循环的建议如下：

外循环（从 0 循环到列表末尾）

```
for (int i = 0; i < list.length; i++) 
```

内循环（从 0 循环到外循环的第 i 个元素）

```
for (int j = 0; j < list[i]; j++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T08:08:37.860

您甚至不会在 outputHistorgram 方法中的任何地方使用您的列表。我不确切知道这应该产生，但也许像这样进行for循环可能会有所帮助：

```
for(int i : list) 
```

如果这不正确，请给出示例输入和输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T08:11:36.887

您在第二个 for 循环中的测试需要是`j < list[i]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:16:52.890

我想你想这样做。

```
public static void outputHistogram(int [] list) 
```

{

```
int k =0;
for(int i=0;i<=9;++i)
{
    System.out.print((i*10+1) +"-"+(i*10+10)+":"+"\t");

    for(int j=1; j<=(i*10+10);++j)  
        System.out.print("*");

    System.out.println();   
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T06:32:15.773

```
import java.util.Scanner;
class Histogram
{
  private int count[]=new int[10];  // count array will keep elements of element
                                  // in particular range;
  public void showHistogram(int elements[])       // for example   27 15 34 22 11 11 19
  {                                 // in above input there is count[0]=0;
    for(int i=0;i<elements.length;i++)   // count[1]=4 and count[2]=2 and count[3]=1;
    {
     if(elements[i]>=0 && elements[i]<50)
     {
       if(elements[i]<10)
       {
          count[0]++;
       }
       else if(elements[i]>=10 && elements[i]<20)
       {
           count[1]++;
       }
       else if(elements[i]>=20 && elements[i]<30)
       {
           count[2]++;
       }
       else if(elements[i]>=30 && elements[i]<40)
       {
           count[3]++;
       }
       else
       {
          count[4]++;
       }
     }
     else if(elements[i]>=50 &&elements[i]<=100)
     {
       if(elements[i]<60)
       {
          count[5]++;
       }
       else if(elements[i]>=60 && elements[i]<70)
       {
           count[6]++;
       }
       else if(elements[i]>=70 && elements[i]<80)
       {
           count[7]++;
       }
       else if(elements[i]>=80 && elements[i]<90)
       {
           count[8]++;
       }
       else
       {
           count[9]++;
       }
     }
   }
   showHistogram1();
}
  private void showHistogram1()
  {
    System.out.println("Histogram of the elements:");
    for(int i=0;i<count.length;i++)     // this loop will print line
    {
       for(int j=0;j<count[i];j++)      // this will print elements element(*)
       {                                // at each line.
           System.out.print("* ");
       }
       if(count[i]!=0)                  // if line does'nt contain zero   
       System.out.println("");          // then if will change the row;
    }
  }
}
/*
  in above code if count[i]=zero means if there is elements
  element in particular range say [0-9] then it will
  elementst jump on next line;
*/
class HistogramGenerator   //Question3
{
public static void main(String args[])
{
     Histogram hg=new Histogram();
     System.out.println("Enter the elements of Elements want in a Histogram:");
     Scanner sc=new Scanner(System.in);

     int noOfElements=sc.nextInt();
     int histogramElements[]=new int[noOfElements];

     System.out.println("Enter the Elements for Histogram:");
     for(int i=0;i<noOfElements;i++)
     {
         histogramElements[i]=sc.nextInt();
     }

     hg.showHistogram(histogramElements);
 }
 } 
```

# regex - 期望正则表达式的条件匹配？

> ID：15403995
> 
> 赞同：0
> 
> 时间：2013-03-14T08:04:28.067
> 
> 标签：regex, expect

```
 spawn ssh "$username@$host"
    match_max  10000000

    expect {
      timeout { send_user "\nFailed to get password prompt\n"; exit 1 }
      eof { send_user "\nSSH failure for $host\n"; exit 1 }
          "*yes/no*"
           { send -- "yes\r" }

           "*?assword:*"
    }

    send -- "[read [open "passwordfile" r]]\r"
    expect {
              timeout { send_user "\nLogin incorrect\n"; exit 1 }
              eof { send_user "\nSSH failure for $host\n"; exit 1 }

         -re  "$prompt"
           { send -- "\r" }
           } 
```

这是我的代码的一部分，但问题是有时我可能会得到一个是提示，或者有时我可能不会，所以它应该是这样的：

```
 if { yes no prompt found } {
    send yes
    }
     else
    {
     look for  password prompt
     } 
```

但上述行不起作用。这是调试数据显示的

```
 parent: waiting for sync byte
parent: telling child to go ahead
parent: now unsynchronized from child
spawn: returns {13806}

expect: does "" (spawn_id exp8) match glob pattern "*yes/no*"? no
"*?assword:*"? no

expect: does "The authenticity of host 'swes-elmpci-a-01.tellus (10.1.239.1)' can't be established.\r\nRSA key fingerprint is 1c:d8:f6:9b:2d:6d:4c:e5:d9:eb:27:ea:1f:2c:99:57.\r\nAre you sure you want to continue connecting (yes/no)? " (spawn_id exp8) match glob pattern "*yes/no*"? yes
expect: set expect_out(0,string) "The authenticity of host 'swes-elmpci-a-01.tellus (10.1.239.1)' can't be established.\r\nRSA key fingerprint is 1c:d8:f6:9b:2d:6d:4c:e5:d9:eb:27:ea:1f:2c:99:57.\r\nAre you sure you want to continue connecting (yes/no)? "
expect: set expect_out(spawn_id) "exp8"
expect: set expect_out(buffer) "The authenticity of host 'swes-elmpci-a-01.tellus (10.1.239.1)' can't be established.\r\nRSA key fingerprint is 1c:d8:f6:9b:2d:6d:4c:e5:d9:eb:27:ea:1f:2c:99:57.\r\nAre you sure you want to continue connecting (yes/no)? "
send: sending "yes\r" to { exp8 }
send: sending "dblg\n\r" to { exp8 }

expect: does "" (spawn_id exp8) match regular expression "([A-Z][A-Z][A-Z](s|x)-elmPCI-A-01.*#)$"? no

expect: does "yes\r\ndblg\r\n\r\n" (spawn_id exp8) match regular expression "([A-Z][A-Z][A-Z](s|x)-elmPCI-A-01.*#)$"? no

expect: does "yes\r\ndblg\r\n\r\nWarning: Permanently added 'swes-elmpci-a-01.tellus' (RSA) to the list of known hosts.\r\r\n" (spawn_id exp8) match regular expression "([A-Z][A-Z][A-Z](s|x)-elmPCI-A-01.*#)$"? no

expect: does "yes\r\ndblg\r\n\r\nWarning: Permanently added 'swes-elmpci-a-01.tellus' (RSA) to the list of known hosts.\r\r\n\r\r\n##############################################\r\r\n#\r\r\n#        You are connected to:\r\r\n#        Sweden, elm, Cabinet A\r\r\n#        WS-C3750X-24PS - S/N FDO1640H0JQ\r\r\n#        WS-C3750v2-24PS - S/N <serial>\r\r\n#\r\r\n#\r\r\n#\r\r\n#        Unauthorized access prohibited\r\r\n#        Your actions are logged\r\r\n#\r\r\n##############################################\r\r\n" (spawn_id exp8) match regular expression "([A-Z][A-Z][A-Z](s|x)-elmPCI-A-01.*#)$"? no

expect: does "yes\r\ndblg\r\n\r\nWarning: Permanently added 'swes-elmpci-a-01.tellus' (RSA) to the list of known hosts.\r\r\n\r\r\n##############################################\r\r\n#\r\r\n#        You are connected to:\r\r\n#        Sweden, elm, Cabinet A\r\r\n#        WS-C3750X-24PS - S/N FDO1640H0JQ\r\r\n#        WS-C3750v2-24PS - S/N <serial>\r\r\n#\r\r\n#\r\r\n#\r\r\n#        Unauthorized access prohibited\r\r\n#        Your actions are logged\r\r\n#\r\r\n##############################################\r\r\nPassword:" (spawn_id exp8) match regular expression "([A-Z][A-Z][A-Z](s|x)-elmPCI-A-01.*#)$"? no 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:23:00.730

我想`exp_continue`这就是你要找的。例如：

```
expect {
    -nocase "yes/no" {
        send "yes\r"
        exp_continue
    }

    -nocase "password:" {
        send "password\r"
    }

    ... ...
} 
```

这是来自期望手册：

> 该命令`exp_continue`允许`expect`自己继续执行而不是像通常那样返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:10:34.867

问题是在“是/否”提示之后，您仍然会收到密码提示，因此您可以使用循环，例如。像这个连接块这样的东西会起作用：

```
#!/usr/bin/expect
set remote_server [lrange $argv 0 0]
set timeout 10
spawn ssh "$username@$host"
while 1 {
  expect {
    "*yes/no*"      {send "yes\r"}
    "denied" {
                log_file /var/log/expect_msg.log
                send_log "Can't login to $remote_server. Check username and password\n";
                exit 1
             }
    "failed" {
                log_file /var/log/expect_msg.log
                send_log "Host $remote_server exists. Check ssh_hosts file\n";
                exit 2
             }
    timeout {
                log_file /var/log/expect_msg.log
                send_log "Timeout problem. Host $remote_server doesn't respond\n";
                exit 3
            }
    "refused" {
                log_file /var/log/expect_msg.log
                send_log "Host $remote_server refused to SSH.\n"
                exit 4
              }
    "#"        {break}
  }
} 
```

更改系统的中断符号，然后在此块之后添加代码。希望这可以帮助。