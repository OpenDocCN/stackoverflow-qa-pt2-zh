# StackOverflow 问答 13243000-13243999

# regex - Perl - 从文本文件中解析块

> ID：13243008
> 
> 赞同：2
> 
> 时间：2012-11-06T01:14:15.993
> 
> 标签：regex, perl, parsing, logging, filehandler

首先，如果您觉得这是重复的，我深表歉意。我环顾四周，发现了一些非常相似的问题，但我要么迷路了，要么这不是我认为我需要的，因此无法提出正确的实现。

问题：

所以我有一个 txt 文件，其中包含由另一个脚本创建的条目（如果您可以提出更好的格式化方式，我可以编辑这些条目的生成方式）：

```
SR4 Pool2
11/5/2012 13:45
----------
Beginning Wifi_Main().

SR4 Pool2
11/8/2012 8:45
----------
This message is a
multiline message.

SR4 Pool4
11/5/2012 14:45
----------
Beginning Wifi_Main().

SR5 Pool2
11/5/2012 13:48
----------
Beginning Wifi_Main(). 
```

我制作了一个 perl 脚本来解析文件：

```
#!C:\xampp-portable\perl\bin\perl.exe

use strict;
use warnings;
#use Dumper;

use CGI 'param','header';
use Template;
#use Config::Simple;

#Config::Simple->import_from('config.ini', \%cfg);

my $cgh = CGI->new;
my $logs = {};
my $key;

print "Content-type: text/html\n\n"; 

open LOG, "logs/Pool2.txt" or die $!;

while ( my $line = <LOG> ) {
    chomp($line);

}

print $logs;

close LOG; 
```

我的目标是最终得到一个如下所示的哈希：

```
$logs = {
    SR4 => {
           Pool2 => {
                {
                    time => '11/5/2012 13:45',
                    msg  => 'Beginning Wifi_NDIS_Main().',
                },
                {
                    time => '11/8/2012 8:45',
                    msg  => 'This message is a multiline message.',
                },
           },
           Pool4 => {
                {
                    time => '11/5/2012 13:45',
                    msg  => 'Beginning Wifi_NDIS_Main().',
                },
           },
    },
    SR5 => {
           Pool2 => {
                {
                    time => '11/5/2012 13:45',
                    msg  => 'Beginning Wifi_NDIS_Main().',
                },
           },
    }, 
```

};

解决这个问题的最佳方法是什么？我应该更改生成日志的格式以使自己更容易吗？如果您需要更多信息，请询问。提前谢谢你。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:16:10.860

如果您可以将其输出为 XML，那么使用[XML::Simple读取它会非常容易](http://search.cpan.org/~grantm/XML-Simple-2.20/lib/XML/Simple.pm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T01:45:45.737

格式没有意义。您在第三级使用了散列，但没有为值指定键。我假设它应该是一个数组。

```
my %logs;
{
   local $/ = "";  # "Paragraph mode"
   while (<>) {
      my @lines = split /\n/;
      my ($x, $y) = split ' ', $lines[0];
      my $time = $lines[1];
      my $msg = join ' ', @lines[3..$#lines];
      push @{ $logs{$x}{$y} }, {
         time => $time,
         msg  => $msg,
      };
   }
} 
```

> 我应该更改生成日志的格式吗

您的时间戳似乎不明确。在大多数时区，一年中的一个小时会重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:01:58.170

虽然[Karthik T](https://stackoverflow.com/a/13243025/368630)使用 XML 的想法是有道理的，而且我也会考虑它，但我不确定这是否是最佳途径。第一个问题是首先将它放在 XML 格式中。

第二个是 XML 格式可能不那么容易解析。当然，XML::Simple 模块会一口气读取整个内容，然后您必须自己解析 XML 数据结构。

如果您可以根据需要设置输出，请将其设置为易于解析的格式。我喜欢使用前缀数据标识符。在以下示例中，每条数据都有自己的标识符。`ER:`当我达到记录的结尾时，它告诉我：

```
DT: 11/5/2012 13:35
SR: SR4
PL: Pool2
MG: Beginning Wifi_Main().
ER:
DT: 1/8/2012 8:45
SR: SR4
PL: Pool2
MG: This message is a
MG: multiline message.
ER: 
```

解析这个输出很简单：

```
my %hash;
while ( $line = <DATA> ) {
    chomp $line;
    if ( not $line eq "ER:" ) {
        my ($key, $value) = split ( ": ", $line );
        $hash{$key} .= "$value ";   #Note trailing space!
    }
    else {
        clean_up_hash ( \%hash ); #Remove trailing space on all values
        create_entry ( \%log, \%hash );
        %hash = ();
    }
} 
```

每当我开始获得复杂的数据结构时，我都喜欢使用类，并且我可能会创建一个`Local::Log`类和子类来存储日志的每一层。但是，这不是绝对必要的，也不是您问题的一部分。尽管如此，我还是会使用一个`create_entry`子例程来保持逻辑，即找出该条目在循环中的位置。

**注意**：我在每条数据后附加一个空格。我这样做是为了使代码更简单，因为您的某些消息可能需要多于一行。还有其他方法可以处理这个问题，但我试图让循环尽可能干净，并尽可能少地使用`if`语句。

# variables - xslt - 如何使用动态确定长度的空格字符的文本内容创建一个变量，该变量将执行良好

> ID：13243009
> 
> 赞同：3
> 
> 时间：2012-11-06T01:14:27.257
> 
> 标签：variables, xslt, dynamic, text

我想创建一个包含文本值的变量，该文本值是多个空格字符，但字符数直到运行时才知道。这需要做很多次，所以我想使用一些性能很好的东西。

一种选择是在先前声明的节点上使用 substring() 函数，但这会将长度限制为不超过原始文本的长度。

另一种方法是使用带有 concat() 函数的递归模板，但不确定性能影响。

有什么方法可以很好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:34:23.317

您可以使用递归和分而治之。这将为您提供订单的运行时成本（log N）。或者，如果您的 XSLT 处理器实现了尾端递归优化，那么您可以使用尾端递归解决方案来提高规模上的安全性。这是两个解决方案...

## 对于非尾端递归优化 XSLT 处理器...

```
<xsl:template name="spaces">
  <xsl:param name="count" />
  <xsl:choose>
    <xsl:when test="$count &lt;= 10">
      <xsl:value-of select="substring('          ',1,$count)" />
    </xsl:when>
    <xsl:otherwise>
      <xsl:call-template name="spaces">
        <xsl:with-param name="count" select="$count idiv 2" />
      </xsl:call-template>  
      <xsl:call-template name="spaces">
        <xsl:with-param name="count" select="$count - ($count idiv 2)" />
      </xsl:call-template>  
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

## 对于尾端递归优化 XSLT 处理器...

```
<xsl:template name="spaces">
  <xsl:param name="count" />
  <xsl:choose>
    <xsl:when test="$count &lt;= 10">
      <xsl:value-of select="substring('          ',1,$count)" />
    </xsl:when>
    <xsl:otherwise>
      <xsl:text>          </xsl:text>  
      <xsl:call-template name="spaces">
        <xsl:with-param name="count" select="$count - 10" />
      </xsl:call-template>  
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:54:05.613

我会创建一个长度为 4000 个空格的全局变量。然后如果所需的字符串少于 4000 个空格，请使用 substring(); 如果更大，请使用 Durkin 概述的递归方法。当然，在 2.0 中，代码编写起来要简单得多，但选择一种性能良好的方法仍然是一个有趣的小问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T14:16:09.707

**有关高效（时间和空间）的 XSLT 1.0 解决方案**，请参见：

**[http://www.sourceware.org/ml/xsl-list/2001-07/msg01040.html](http://www.sourceware.org/ml/xsl-list/2001-07/msg01040.html)**

# java - 尝试编写代码以不断询问用户相同的对话框，直到他们正确为止

> ID：13243014
> 
> 赞同：-3
> 
> 时间：2012-11-06T01:14:56.160
> 
> 标签：java

我在这里有一个代码，我不确定如何在用户回答正确答案之前继续提问

```
while ((stringSize >= 0) && (stringSize <= 4) && (stringSize >= 8)){
  if ((stringSize >= 0) && (stringSize <= 4) && (stringSize >= 8)){
     System.out.println("no");
     input = JOptionPane.showInputDialog(null, "Enter a word");
  }
  if (secondChar == '+' && ((stringSize >= 4) && (stringSize <= 8)))
  {
     break;
  }
}
if (secondChar == '+' && ((stringSize >= 4) && (stringSize <= 10))){
}
  System.out.println("yes"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T01:18:35.567

当你真正需要时，这似乎是罕见的情况`do ... while`。

您的条件永远不会成立 -`stringSize`不能小于 4*且*大于 8。

# windows - 在 Windows cmd 脚本中添加计数器值

> ID：13243015
> 
> 赞同：5
> 
> 时间：2012-11-06T01:14:58.300
> 
> 标签：windows, command-line

我的脚本类似于：

```
cd <Directory>
set counter = 1
for /r %%f in (*) do (
<Do task>
echo Task completed for file<counter> >> C:\log
counter++
) 
```

我不知道如何使用实际`counter`值。如果我使用`counter`或者`%counter%`它只是回显相同的字符串。在这种情况下我应该如何修改`counter`行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T06:08:46.800

`SET``/A`如果要计算数学表达式，必须使用 with 。您还需要首先通过键入`SETLOCAL ENABLEDELAYEDEXPANSION`作为第一行来启用延迟扩展。`**FOR**`在最后一次迭代发生之前，不会在循环内进行评估。但是我修改了批处理文件，以便 Counter 的值在每次迭代中递增。

```
SETLOCAL ENABLEDELAYEDEXPANSION

@echo off

set /a counter=1

for /r %%f in (*) do (
  echo Task Completed for file !counter! >> c:\log
  set /a counter=!counter!+1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-21T14:33:59.210

SET /A Variable_Number Math_symbol = Step(s)

> `set /a Var_Num+=1`-> Num_Var = Num_Var + 1（步长）
> 
> `set /a Var_Num-=1`-> Num_Var = Num_Var - 1（步骤）
> 
> `set /a Var_Num*=2`-> Num_Var = Num_Var x 2（步数）
> 
> `set /a Var_Num/=2`-> Num_Var = Num_Var：2（步数）

在一个循环中：

```
@echo off
set counter=0
:start-loop

set /a counter+=1

echo %counter% times... 
:: or/and
echo %counter% times... >> %USERPROFILE%\Desktop\log.txt

timeout /t 1 >nul
goto :start-loop 
```

你的例子：（在'FOR'循环中）

```
SETLOCAL ENABLEDELAYEDEXPANSION
@echo off
set /a counter=1

for /r %%f in (*) do (
  echo Task Completed for file !counter! >> C:\log.txt
  echo Path to File: [ %%f ] >> C:\log.txt
  set /a counter+=1
) 
```

# jquery - 使用 jQuery 将 div id 增加 1

> ID：13243016
> 
> 赞同：1
> 
> 时间：2012-11-06T01:15:12.260
> 
> 标签：jquery, asp.net-mvc, foreach

我将不胜感激您能提供的任何帮助。我搜索了高低，但未能找到解决我认为可能是常见问题的方法。我对 ASP.NET MVC 和 jQuery 非常陌生，所以我可能需要一些额外的帮助。来了……

我有一个由 foreach (ASP MVC 4) 创建的包含许多行的表。每行都有我想在点击时显示/隐藏的附加信息（包含在 a 中）。

例如：

```
====================================================================
   | Ticket Number | Date Created | Description

-    123456          11/02/2012     How do I...?
      --- Additional Information ---
      Assigned To: Joe
      Notes: Blah, blah
      --- End Additional Information ---
+     123457          11/01/2012     When I click this I get....
===================================================================== 
```

当用户单击加号（我正在使用图像）时，我希望扩展附加信息，并且希望将加号图像更改为减号图像。

我已经弄清楚如何使用 jQuery 中的 IF 语句更改图像。但是，我不太清楚如何正确切换 div。我尝试使用以下方法执行此操作：

```
 $("button").click(function () {
       $(this).next("div.toggleMe").toggle(1000);
   }); 
```

如您所见，jQuery 扩展了它找到的下一个 div。这个问题是我不能把它和表数据放在同一行。由于某种原因，它只是看不到下一个 div。

我正在寻找一种将 id 或 div 的类增加一个的方法，以便我可以使用类似以下 jQuery 函数的东西：

```
 function slideonlyone(thechosenone) {
         $('.newboxes2').each(function(index) {
              if ($(this).attr("id") == thechosenone) {
               $(this).slideDown(200);
              }
              else {
                   $(this).slideUp(600);
              }
         });
    }

<table>
   <tr>
      <td>
         <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px;">
            <a id="myHeader1" href="javascript:slideonlyone('newboxes1');" >slide this one only</a>
         </div>
         <div class="newboxes2" id="newboxes1" style="border: 1px solid black; background-color: #CCCCCC; display: block;padding: 5px;">Div #1</div>
      </td>
      <td>
         <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px;">
            <a id="myHeader2" href="javascript:slideonlyone('newboxes2');" >slide this one only</a>
         </div>
         <div class="newboxes2" id="newboxes2" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px;">Div #2</div>
      </td>
      <td>
         <div style="border: 1px solid blue; background-color: #99CCFF; padding: 5px;">
            <a id="myHeader3" href="javascript:slideonlyone('newboxes3');" >slide this one only</a>
         </div>
         <div class="newboxes2" id="newboxes3" style="border: 1px solid black; background-color: #CCCCCC; display: none;padding: 5px;">Div #3</div>
      </td>
   </tr>
</table> 
```

正如您在 HTML 中看到的，每个 div 都有一个唯一的 id。如何在 foreach 循环中创建唯一 ID？而且，我如何让 jQuery 看到那个唯一的 id 以便我可以切换 div？

非常感谢您提供的任何信息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:23:05.407

如果您的 HTML 结构如下：

```
<div>
    <button>Click me</button>
</div>
<div class="toggle">
    This is initially hidden content
</div> 
```

然后`$(this).next('div')`从按钮的角度调用不会找到您的第二个 div - 它被其父 div 绑定。你真正想做的是*从按钮的 parent element 开始*找到下一个 div 。

```
$('button').click(function(){
    $(this).parent().next('div.toggle').toggle(1000);
}); 
```

使用上面的 HTML，该脚本片段应该从按钮的父 div 开始搜索下一个 div。在这种情况下，它应该找到正确的元素来切换。

# c++ - Visual Studio C++ 未解决的外部链接器错误

> ID：13243023
> 
> 赞同：-4
> 
> 时间：2012-11-06T01:15:59.247
> 
> 标签：c++

```
#include <iostream>
#include <cstdlib>
#include <ctime>
#include <cmath>

using namespace std;

void countx(double, int[]);
void initializeArray(int[]);
void printResult(double,double,int,int[]);

void main()

{

int i, count,distF[8];
double x,sum1,sum2;

/* Calculation for X~ (x,0,1) */

srand(time(NULL));
count=0;
sum1=sum2=0.0;
initializeArray(distF);

for(i=1;i<10000;i++)
{

x=(double)(rand())/RAND_MAX;
if(x>.9 && x<= 1.8)
count++;
countx(x,distF);
sum1 += x;
sum2 += x*x;

}

cout<<"Results for uniform Distribution:\n";
printResult(sum1,sum2,count,distF);

srand(time(NULL));
count=0;
sum1=sum2=0.0;
initializeArray(distF);

for(i=1;i<=10000;i++)
{
x= -(log(1-(double) (rand())/RAND_MAX))/2;
if(x>.9 && x<=1.8)

countx(x,distF);
sum1+=x;
sum2+=x*x;

}

cout<<"Reuslts for exponential Distribution 2:\n";
printResult(sum1,sum2,count,distF);

/*** Calculations for P(x=1/2)=1 ***/
srand(time(NULL));
count=0;
sum1=sum2=0.0;
initializeArray(distF);

for(i=1;i<=1000;i++)
{
x=.5;
count++;
countx(x,distF);
sum1+=x;
sum2+=x*x;

}

cout<<"Reuslts for exponential Distribution 3:\n";
printResult(sum1,sum2,count,distF);

srand(time(NULL));
count=0;
sum1=sum2=0.0;
initializeArray(distF);
double temp;

for(i=1;i<=10000;i++)
{
temp=(double)(rand())/RAND_MAX;
if(temp<=.5)
x=.25;
else
x=1.50;
if(x>.9 && x<=1.8)
count++;
countx(x,distF);
sum1 += x;
sum2 +=x*x;
}

cout<<"Reuslts for Distribution #4:\n";
printResult(sum1,sum2,count,distF);

/*Function*/

void countx(double x, int distF[]);
{
int j=0;
double t= -0.25;
do
{
if(x<=t)
{
for(int k=j;k<8;k++)
distF[k]++;
break;
}
t += .25;
j++;
}
while(t<=1.50);
//return;
}

void intializeArray(int distF[]);
{
for(int j=0;j<8;j++)
distF[j]=0;
//return;
}

void printResult(double sum1, double sum2, int count, int distF[]);
{
double ev_x,var_x,pr_x;
ev_x=sum1/10000;
var_x=sum2/10000-(ev_x * ev_x);
pr_x=(double)(count)/10000;

cout<<"Expected value: " <<ev_x<<endl;
cout<<"Variance: "<<var_x<<endl;
cout<<"P(0.9<x<=1.8):" <<pr_x<<endl;

cout<<"t=";
for(int k=-1; k<7;k++)
cout<<.25 *k<<"\t";
cout<<"lnFx(t)=";
for(int j=0;j<8;j++)
cout<<(double)(distF[j])/10000<<"\t";
cout<<endl;
//return;
}

} 
```

需要帮忙！使用 Microsoft Visual Studio 2012

```
>kikii.obj : error LNK2019: unresolved external symbol "void __cdecl printResult(double,double,int,int * const)" (?printResult@@YAXNNHQAH@Z) referenced in function _main
1>kikii.obj : error LNK2019: unresolved external symbol "void __cdecl countx(double,int * const)" (?countx@@YAXNQAH@Z) referenced in function _main
1>kikii.obj : error LNK2019: unresolved external symbol "void __cdecl initializeArray(int * const)" (?initializeArray@@YAXQAH@Z) referenced in function _main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:28:05.903

你有两个总体问题：

1）你的函数是'定义的`inside of`main（）' - 你需要将它们移到外面（函数不能嵌套）

2）您的函数定义在不适当的位置有一个分号，将它们变成仅仅是原型，后跟一个不相关的代码块（这就是为什么问题 #1 不是立即出现语法错误的原因）。例如：

```
 void intializeArray(int distF[]); // <-- this semi-colon needs to be removed
    {
    for(int j=0;j<8;j++)
    distF[j]=0;
    //return;
    } 
```

哦，我一开始没有注意到的第三个问题：您在尝试定义函数时`initializeArray()`拼写错误。`intializeArray()`

# sql - Firebird 1.5：如何获得数字的对数

> ID：13243026
> 
> 赞同：0
> 
> 时间：2012-11-06T01:16:43.887
> 
> 标签：sql, firebird

我们使用的是 Firebird 1.5 数据库。我们需要在查询中计算一个数字的对数，我们该怎么做呢？

我试过了 ：

```
LOG(3, number_field) 
```

但出现错误：

```
Error: GDS Exception. 335544569\. Dynamic SQL Error
SQL error code = -804
Function unknown
LOG
SQLState:  42000
ErrorCode: 335544569 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:03:34.353

在 Firebird 1.5中通过外部库**ib_udf.dll提供的****日志**功能。检查文件是否在**UDF**子文件夹中并运行 SQL 命令：

 ****```
DECLARE EXTERNAL FUNCTION log 
    DOUBLE PRECISION, DOUBLE PRECISION
    RETURNS DOUBLE PRECISION BY VALUE
    ENTRY_POINT 'IB_UDF_log' MODULE_NAME 'ib_udf'; 
```

UDF 子文件夹中有**ib_udf.sql**文件，其中包含用于声明库中所有函数的命令。

还可以考虑将您的数据库升级到内置**Log功能的****Firebird 2.5**版本。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T04:53:16.413

您需要使用 ib_udf 库中的函数。首先你必须声明函数。查看 firebird 文件夹中的 udf/ib_udf.sql 文件。******

# css - 如何在 CSS 中使缩放图像在浏览器中平滑？

> ID：13243032
> 
> 赞同：2
> 
> 时间：2012-11-06T01:17:25.923
> 
> 标签：css, image

我记得[Joel](http://www.joelonsoftware.com/items/2008/12/22.html)曾经说过一个技巧，可以让缩放的图像在 IE 中平滑显示：

```
img {-ms-interpolation-mode:bicubic;} 
```

这使得缩小的图像（通过 CSS 或 HTML 宽度属性具有比实际图像更小的尺寸）平滑而不显得粗糙。

是否有任何类似的 CSS 规则适用于所有主要的现代浏览器，如 Firefox 和 Chrome？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-13T23:26:05.627

> 是否有任何类似的 CSS 规则适用于所有主要的现代浏览器，如 Firefox 和 Chrome？

不。

`-ms-interpolation-mode`自 IE9 起已过时。有[图像渲染](https://developer.mozilla.org/en-US/docs/Web/CSS/image-rendering)CSS 属性，但它是实验性的，支持的值因浏览器而异。[这个 SO question](https://stackoverflow.com/questions/3900436/image-scaling-by-css-is-there-a-webkit-alternative-for-moz-crisp-edges)解决了图像渲染属性的最佳实践，它将涵盖大多数浏览器，您甚至可以为 IE7 和 8 添加 IE 特定标签，但更高版本的 IE 以及某些浏览器和高档/低档组合不是支持的。

显然，您可以在服务器端做一些事情来动态重新缩放图像，如果您真的需要高质量，那将是您的最佳选择。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-11-06T03:29:42.937

缩放：0-1；几乎可以扩展任何东西。

# elasticsearch - 有没有办法删除/忽略在弹性搜索中得分较低的匹配项？

> ID：13243034
> 
> 赞同：1
> 
> 时间：2012-11-06T01:17:39.393
> 
> 标签：elasticsearch

我得到的搜索结果得分超过 40，但我也得到了更多得分低于 5 的项目。有没有办法设置最低阈值，所以我不显示这些低分结果，而只显示高分那些？或者有没有更好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:30:42.320

查看 Search API 中的[min_score](http://www.elasticsearch.org/guide/reference/api/search/min-score.html)选项。

希望这可以帮助。

# java - i/o 问题没有为类 org.json.JSONObject 找到序列化程序，也没有发现用于创建 BeanSerializer 的属性

> ID：13243037
> 
> 赞同：5
> 
> 时间：2012-11-06T01:18:07.547
> 
> 标签：java, json, rest, testng, rest-assured

不知道发生了什么，完整的错误是：

```
Problem with i/o No serializer found for class org.json.JSONObject and no properties        discovered to create BeanSerializer (to avoid exception, disable SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS) ) 
```

我正在尝试向 RESTful 服务发送 PUT 请求。我正在解析 POST 并为 PUT 的“ID”和“启用”发送修改后的键/值对。

```
@Test(dependsOnMethods= {"Post"})
public void Put() throws IOException  {

logger.logTestActivity("Testing FORM data POST using Excel file");
requestBuilder = new RequestSpecBuilder();

String jsonString = "";
boolean enabledModify = false;

try {
 BufferedReader in = new BufferedReader(new FileReader(
 xmlTest.getParameter("json-post")));

String str;

while ((str = in.readLine()) != null) {
      jsonString += str;
        }

JSONObject jsonObjPut = new JSONObject(jsonString);
jsonObjPut.put("_id", createUserId);
jsonObjPut.put("enabled",enabledModify);

    System.out.println(jsonObjPut.toString());
in.close();

    requestBuilder.setContentType(ContentType.JSON);
    requestSpecification = requestBuilder.build();
    responseBuilder.expectStatusCode(Integer.parseInt(xmlTest
    .getParameter("http-status-code-200")));
    responseBuilder.expectContentType(ContentType.JSON);
    responseSpecification = responseBuilder.build();    
System.out.println(createUserId);

String responseJson = given().body(jsonObjPut).         
when().put("/" + createUserId).asString();

    System.out.println(responseJson);

logger.logTestActivity("Finished testing FORM data POST using Excel file");
} catch (AssertionError e ) {
  logger.logTestActivity(
        "Error testing FORM data post: " + e.getMessage(),logger.ERROR);

      System.out.println("REST URL: " + RestAssured.baseURI + " "
                + RestAssured.port + " " + RestAssured.basePath );
  Assert.fail("Error testing FORM data POST: " + e.getMessage());
        throw e;
} catch (IOException | JSONException e) {
   System.out.println("Problem with i/o" + e.getMessage()); 
    }
} 
```

createUserID 是一个全局变量，它是从 POST 解析的 ID。

正在解析的 JSON 文件如下所示：

```
{
"enabled" : false,
"_id" : "fdse332a-22432d-4432b"
} 
```

在之前的测试方法中，我正在使用所有适当的 url 端点设置再保证...

此外，PUT 也失败，出现 NULLPointerException 错误。这可能是未来的另一篇文章！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T17:42:52.063

解决方案：传递给 reassured 时，我没有将我的 JSON 对象转换为字符串。

```
String responseJson = given().body(jsonObjPut.toString). 
```

这成功了。我现在使用生成的 ID 修改我现有的 json，并在 RESTful 服务上成功执行 PUT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-20T11:05:20.630

I was also facing same issue with java Spring rest Api. It was throwing BeanSerializerExcption. Use `JsonNODE` class instead of `JSONObject`.

# postgresql - 如何将 word 文档转换为 PostgreSQL 表

> ID：13243038
> 
> 赞同：-1
> 
> 时间：2012-11-06T01:18:09.563
> 
> 标签：postgresql, ms-word, etl

我有一个包含数据字典的 word 文档。

例如，一个名为 FUEL 的变量描述如下：

```
FUEL -- What type of fuel does it take?  
    1   Gas  
    2   Diesel  
    3   Hybrid  
    4   Flex fuel  
    7   OTHER, SPECIFY 
```

我想将文档转换为 PostgreSQL 表。你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:24:37.743

一般来说，这类事情需要两个阶段：第一，使用文本处理工具和脚本或 Excel 之类的工具将数据处理成合理的表格格式。

一旦有了表格格式，将数据输出为`CSV`（例如，使用 Excel 中的另存为）并在运行适当的命令以定义与 CSV 结构匹配的表结构后使用`COPY`命令或 psql将其加载到 PostgreSQL 中。`\copy``CREATE TABLE`

编辑：鉴于更新的帖子，我想说您可能必须为此编写一个简单的解析器，除非文档包含内部结构化标记。将文档另存为纯文本。现在用 Perl 或 Python 之类的语言编写一个脚本，查找定义变量的标题，从该行中提取大写的变量名称和描述，然后读取编号选项，直到它用完并准备读取下一个变量。如果文档是统一结构的，这应该只需要几行代码和一些基本的正则表达式；你甚至可以在`awk`. 让脚本编写 CSV 以便稍后导入，或者使用`DBD::Pg`(Perl) 或`psycopg2`(Python) 等数据库接口直接存储数据。

如果您不了解任何脚本工具，则您需要学习或非常擅长复制和粘贴。

# java - 如何让 MockFTPServer 抛出异常

> ID：13243039
> 
> 赞同：3
> 
> 时间：2012-11-06T01:18:11.437
> 
> 标签：java, unit-testing, ftp, mocking

我有一些连接到 FTP 服务器的代码，我正在尝试为该代码编写测试用例。为此，我一直在尝试使用 MockFtpServer 来模拟 FTP 服务器，以便测试我的交互。

[http://mockftpserver.sourceforge.net/index.html](http://mockftpserver.sourceforge.net/index.html)

在一种特殊情况下，我试图用一个看起来像这样的测试用例来测试我的“连接”方法：

```
public class FTPServiceTestWithMock {

    private FakeFtpServer server;
    private FTPService service;
    private int controllerPort;

    @Before
    public void setup() {
        server = new FakeFtpServer();
        server.setServerControlPort(0); // Use free port - will look this up later

        FileSystem fileSystem = new WindowsFakeFileSystem();
        fileSystem.add(new DirectoryEntry("C:\\temp"));
        fileSystem.add(new FileEntry("C:\\temp\\sample.txt", "abc123"));
        server.setFileSystem(fileSystem);
        server.addUserAccount(new UserAccount("user", "pass", "C:\\"));
        server.start();
        controllerPort = server.getServerControlPort();

        service = new FTPService();
    }

    @After
    public void teardown() {
        server.stop();
    }

    @Test
    public void testConnectToFTPServer() throws Exception {
        String testDomain = "testdomain.org";
        String expectedStatus = 
            "Connected to " + testDomain + " on port " + controllerPort;

        assertEquals(
            expectedStatus, 
            service.connectToFTPServer(testDomain, controllerPort)
        );
    }

} 
```

这段代码完美运行——它设置了一个虚假的 FTP 服务器，并对我的代码进行测试，以确保它可以连接并返回适当的消息。

但是，我的 FTP 客户端的 API 规范显示，当我尝试连接时可能会引发异常。

[http://commons.apache.org/net/api-3.1/org/apache/commons/net/SocketClient.html#connect%28java.lang.String%29](http://commons.apache.org/net/api-3.1/org/apache/commons/net/SocketClient.html#connect%28java.lang.String%29)

我想编写第二个测试用例来测试抛出的异常，这可能是域名不正确或 FTP 服务器关闭。我想确保在这种情况下，我的软件能够做出适当的响应。我在 Mock FTP Server 站点中找到了有关“自定义命令处理程序”的信息，但我不知道如何让一个抛出异常。这就是我所拥有的：

```
public void testConnectToFTPServerConnectionFailed() throws Exception {
    ConnectCommandHandler connectHandler = new ConnectCommandHandler();
    connectHandler.handleCommand(/* Don't know what to put here */);
    server.setCommandHandler(CommandNames.CONNECT, connectHandler);
} 
```

handleCommand 方法需要一个 Command 对象和一个 Session 对象，但是我无法从文档中弄清楚如何获取要发送的有效对象。有谁知道该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T03:21:09.310

由于没有人在这里刺伤，所以我要试一试。我以前从未使用过 MockFtpServer，所以这是我的第一次尝试。

我认为测试服务器是否关闭的最简单方法是关闭服务器。

```
@Test(expected = IOException.class)
public void testConnectToFTPServer_ServerDown() throws Exception {
    // kill the server
    server.stop();
    service.connectToFTPServer("testdomain.org", controllerPort);
} 
```

如果要测试用户名和密码是否无效，或许可以直接将FTP回复码设置为430：-

```
@Test(expected = IllegalStateException.class)
public void testConnectToFTPServer_InvalidUserPassword() throws Exception {
    // assuming you already started it in setup(), you may want to stop it first
    if (server.isStarted()) {
        server.stop();
    }

    ConnectCommandHandler connectCommandHandler = (ConnectCommandHandler) server.getCommandHandler(CommandNames.CONNECT);

    // 430 = FTP error code for "Invalid username or password"
    connectCommandHandler.setReplyCode(430);
    server.setCommandHandler(CommandNames.CONNECT, connectCommandHandler);
    server.start();

    service.connectToFTPServer("testdomain.org", controllerPort);
} 
```

我知道您想测试...`SocketException`引发的异常，`SocketClient.connect()`而这个在这里有点棘手。根据[FTP 错误代码](http://en.wikipedia.org/wiki/List_of_FTP_server_return_codes)，我相信您正在寻找 10000 系列错误代码之一（如果我在这里错了，请纠正我，但我不是 FTP 专家）。这个 10000 系列错误代码的问题在于，它会使您的测试无限期地旋转，因为该错误代码指示无法连接远程服务器，因此在针对 MockFtpServer 进行测试时，测试并不真正知道何时停止。因此，在这种情况下，我将测试设置为在 5 秒内超时（我认为这是合理的）。当然，您不会被`SocketException`抛到这里，但我认为该行为与实际的实现代码足够接近。

```
@Test(timeout = 5000)
public void testConnectToFTPServer_InvalidHostName() throws Exception {
    // assuming you already started it in setup(), you may want to stop it first
    if (server.isStarted()) {
        server.stop();
    }

    ConnectCommandHandler connectCommandHandler = (ConnectCommandHandler) server.getCommandHandler(CommandNames.CONNECT);

    // 10060 = FTP error code for "Cannot connect to remote server."
    connectCommandHandler.setReplyCode(10060);
    server.setCommandHandler(CommandNames.CONNECT, connectCommandHandler);
    server.start();

    service.connectToFTPServer("testdomain.org", controllerPort);
} 
```

# sql - 在 SQL Server 中将行转换为列

> ID：13243047
> 
> 赞同：-1
> 
> 时间：2012-11-06T01:19:04.833
> 
> 标签：sql, sql-server, pivot

我有一个返回以下结果集的查询：

```
patName  SName   DISC    SCHEDULE   
JM       AA      HA      2 per  Week
JM       MAC     MSW     1 per  Month
JM       ANG     RN      1 per  Week
JM       JON     RN      1 per  Week
JM       LRH     RN      1 per  Week 
```

有什么方法可以显示结果如下`PIVOT`

```
PATNAME    HA           MSW             RN 
  JM    AA 2/Week   MAC 1/Month    ANG 1/week 
                                   JON 1/Week 
                                   LRH 1/Week 
```

编辑，我的查询如下：

```
SELECT PatientName, [RN], [HA], [LVN], [MSW], [SC] 
  FROM 
  ( 
   SELECT DISTINCT (tblPatient.FirstName +' '+ tblPatient.LastName) As PatientName,
   (tblStaff.StaffFirstName+' '+tblStaff.StaffLastName) As StaffName, 
    (tblStaffDiscipline.Discipline)As Discipline, 
    CAST(tblFrequencyOfVisit.NoOfVisit As Varchar)+' per '
     + REPLACE (tblFrequencyOfVisit.Period,'/','') AS Visits new_value,
   row_number() over(partition by PatientName, Discipline order by Discipline) rowNum
   FROM tblPatient INNER JOIN
   tblFrequencyOfVisit 
   ON tblPatient.PatientId = tblFrequencyOfVisit.PatientId 
   INNER JOIN tblStaffAssignment 
   ON tblPatient.PatientId = tblStaffAssignment.PatientId 
   AND tblFrequencyOfVisit.PatientId = tblStaffAssignment.PatientId 
   INNER JOIN tblStaffDiscipline 
   ON tblFrequencyOfVisit.DisciplineId = tblStaffDiscipline.DisciplineId 
   INNER JOIN tblStaff 
   ON tblStaffAssignment.StaffId = tblStaff.StaffId 
   AND tblStaffDiscipline.Discipline = tblStaff.StaffDisciplane 
 )src  
 pivot
 (
  max(new_value)
  for Discipline in ([RN], [HA], [LVN], [MSW], [SC])
) piv

  WHERE
  tblpatient.PatientId = '138' 
  AND NOT tblPatient.SOC IS NULL 
  AND tblPatient.EOC IS NULL 
  AND tblPatient.Hospiceid = '1' 
  AND tblFrequencyofVisit.FromDate = 
   (Select MAX(FROMDATE) 
   From tblfrequencyofVisit 
   Where tblFrequencyOfVisit.PatientId = tblPatient.PatientId 
   AND tblFrequencyofVisit.Disciplineid = tblStaffDiscipline.Disciplineid ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T02:38:10.080

您可以使用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能来执行此操作。如果您知道值，则可以使用静态数据透视表对列进行硬编码。为了在 中正确分组`PIVOT`，我包括了 a`row_number()`所以结果将包括每条记录，而不仅仅是`max()`per 的值`patname`：

```
select patname, [HA], [MSW], [RN]
from 
(
  select patName, Disc,
    sname+' '+schedule new_value,
    row_number() over(partition by patname, disc order by disc) rowNum
  from <yourquery here>
) src
pivot
(
  max(new_value)
  for disc in ([HA], [MSW], [RN])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/91612/5)

如果`DISC`字段中有未知值，则可以使用动态 SQL 来透视数据：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(disc) 
                    from yourquery
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT patname, ' + @cols + ' 
            from 
             (
               select patName, Disc,
                sname+'' ''+schedule new_value,
                row_number() over(partition by patname, disc order by disc) rowNum
              from <yourquery here>
            ) x
            pivot 
            (
                max(new_value)
                for Disc in (' + @cols + ')
            ) p '

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c5d5f/10)

如果您没有`PIVOT`可用的函数，则可以使用聚合函数和`CASE`语句来复制：

```
select patname,
  max(case when disc='HA' then new_value end) HA,
  max(case when disc='MSW' then new_value end) MSW,
  max(case when disc='RN' then new_value end) RN,
  rowNum
from
(
  select patName, Disc,
    sname+' '+schedule new_value,
    row_number() over(partition by patname, disc order by disc) rowNum
  from yourquery
) src
group by patname, rownum 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/c5d5f/13)

编辑，根据您发布的查询，您可能需要使用以下内容：

```
SELECT PatientName, [RN], [HA], [LVN], [MSW], [SC] 
FROM 
( 
   SELECT 
      (tblPatient.FirstName +' '+ tblPatient.LastName) As PatientName,
      (tblStaff.StaffFirstName+' '+tblStaff.StaffLastName) As StaffName, 
      (tblStaffDiscipline.Discipline)As Discipline, 
      CAST(tblFrequencyOfVisit.NoOfVisit As Varchar)+' per '+ REPLACE (tblFrequencyOfVisit.Period,'/','') AS Visits new_value,
      row_number() over(partition by PatientName, Discipline order by Discipline) rowNum
   FROM tblPatient 
   INNER JOIN tblFrequencyOfVisit 
     ON tblPatient.PatientId = tblFrequencyOfVisit.PatientId 
   INNER JOIN tblStaffAssignment 
     ON tblPatient.PatientId = tblStaffAssignment.PatientId 
     AND tblFrequencyOfVisit.PatientId = tblStaffAssignment.PatientId 
   INNER JOIN tblStaffDiscipline 
     ON tblFrequencyOfVisit.DisciplineId = tblStaffDiscipline.DisciplineId 
   INNER JOIN tblStaff 
     ON tblStaffAssignment.StaffId = tblStaff.StaffId 
     AND tblStaffDiscipline.Discipline = tblStaff.StaffDisciplane 
  WHERE  tblpatient.PatientId = '138' 
    AND NOT tblPatient.SOC IS NULL 
    AND tblPatient.EOC IS NULL 
    AND tblPatient.Hospiceid = '1' 
    AND tblFrequencyofVisit.FromDate = (Select MAX(FROMDATE) 
                                       From tblfrequencyofVisit 
                                       Where tblFrequencyOfVisit.PatientId = tblPatient.PatientId 
                                       AND tblFrequencyofVisit.Disciplineid = tblStaffDiscipline.Disciplineid )
)src  
pivot
(
  max(new_value)
  for Discipline in ([RN], [HA], [LVN], [MSW], [SC])
) piv 
```

# emacs - Mac OSX、Emacs 24.2 和 nrepl.el 不工作

> ID：13243048
> 
> 赞同：10
> 
> 时间：2012-11-06T01:19:49.400
> 
> 标签：emacs, clojure, leiningen

我正在使用[nrepl.el](https://github.com/clojure-emacs/cider)，[Emacs 24.2](https://emacsformacosx.com/)。我的 SO 版本是 OS X Lion 10.7.5。

[在通过lein](https://github.com/technomancy/leiningen)`[M-x] nrepl`启动[REPL](https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop)会话后运行命令，我可以连接到它，但如果我尝试使用，我会收到以下消息： `(:~ $ lein repl)``[M-x] nrepl-jack-in`

> 进程前哨错误：无法启动 nREPL 服务器：/bin/bash：lein：找不到命令

[我使用主站点中](https://github.com/technomancy/leiningen#installation)的说明安装了 leiningen，并使用[homebrew](https://brew.sh/)命令重新安装了它，`brew install leiningen --devel`但两种方法都给了我同样的错误。

将路径添加`/usr/loca/bin`到 emacs`exec-path`列表或尝试将`nrepl.el`变量配置`nrepl-lein-command`为指向我的 lein 安装的完整路径无济于事。

我的 emacs 配置可以在这里找到：[https ://github.com/khaoz/emacs-files](https://github.com/khaoz/emacs-files)

我做错了什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T06:18:54.707

虽然@Arthur 是正确的，但解决您的问题的一个更简单的方法是安装[exec-path-from-shell](https://github.com/purcell/exec-path-from-shell) Emacs 扩展。它会自动且相当可靠地将您的 shell `PATH`（和`MANPATH`）复制到 Emacs。这意味着`PATH`无论您从哪里开始 Emacs（包括聚光灯），这都是正确的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-06T01:26:29.207

对于那些使用 Mac 遇到这个问题的人：

lein 需要在 Emacs 看到的路径上。这可以通过从 bash 启动 Emacs 来完成

```
/Applications/Emacs.app/Contents/MacOS/Emacs project.clj 
```

然后： `M-x`nrepl-jack-in

[如果这解决了问题，您可以按照这些说明](http://emacswiki.org/emacs/EmacsApp#toc2)配置 emacs 以使用正确的路径

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T23:14:39.230

如果您在 Linux 中看到此错误，则在从菜单而不是 shell 运行 emacs 时，您可能需要在 ~/.bash_profile 而不是 ~/.bashrc 中设置 PATH。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T09:29:09.943

我不得不这样做：

```
;; set the path as terminal path [http://lists.gnu.org/archive/html/help-gnu-emacs/2011-10/msg00237.html]
(setq explicit-bash-args (list "--login" "-i"))

;; fix the PATH variable for GUI [http://clojure-doc.org/articles/tutorials/emacs.html#osx] 

(defun set-exec-path-from-shell-PATH ()
  (let ((path-from-shell
         (shell-command-to-string "$SHELL -i -l -c 'echo $PATH'")))
    (setenv "PATH" path-from-shell)
    (setq exec-path (split-string path-from-shell path-separator))))

(when window-system (set-exec-path-from-shell-PATH)) 
```

# coldfusion - 你能用脚本在 Railo 中创建 Solr 集合吗？

> ID：13243054
> 
> 赞同：1
> 
> 时间：2012-11-06T01:20:40.317
> 
> 标签：coldfusion, solr, railo, cfml

ColdFusion 10 现在支持以下语法来创建 Solr 集合：

> cfcollection 支持脚本样式语法：
> 
> ```
> new collection().CREATE(collection="<collection_name>", engine="solr", path="<path to the solr directory>"); 
> ```

Railo 4 中是否有类似这样的语法？

我不断收到错误消息：

**无效的组件定义，找不到集合**

如果没有，是否可以将其设置为 UDF，以便我可以从基于脚本的组件中调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:30:32.213

Railo 4.0 的最新测试版目前实现了以下对象：

*   喂养
*   FTP
*   Http
*   邮件
*   询问

所以，答案是否定的——**没有“收藏”对象**。
（您当然可以提出添加[功能请求](https://issues.jboss.org/browse/RAILO)。）

但是，**还有一个替代方案**- 在 Railo 中，几乎所有标签都可以以脚本形式复制。

你可以写：

```
<cftagname attributes /> 
```

作为

```
<cfscript>
    tagname attributes ;
</cfscript> 
```

或者对于带有主体的标签：

```
<cftagname attributes >
    ...
</cftagname> 
```

变成

```
<cfscript>
    tagname attributes
    {
        ...
    }
</cfscript> 
```

因此，只需以这种形式考虑您的[cfcollection](http://wiki.getrailo.org/wiki/TAG%3aCFCOLLECTION)标签，它应该可以正常工作。

# javascript - 在 javascript 对象中声明的变量范围

> ID：13243058
> 
> 赞同：1
> 
> 时间：2012-11-06T01:21:17.630
> 
> 标签：javascript

我试图了解 javascript 对象中变量的范围。但我得到的行为似乎有点偏离了道路。简单地说，如果我有一个将函数定义为变量的对象，那么函数变量将无法访问定义它的对象的其他变量。下面的代码将使事情变得清晰。

```
<html>
<head>
    <script type="text/javascript">

        var someObject = {
            someVariable : 5,
            getVariable: function() {
                return someVariable;
            }
        };

        window.onload = function () {
            alert(someObject.getVariable());
        };

    </script>
</head>
<body>
    Hello There
</body>
</html> 
```

上面的代码为函数 getVariable() 中的 someVariable给出了**“ReferenceError: someVariable is not defined” 。**有人想评论这种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T01:27:00.690

绝对地。

您正在谈论的“变量”不是“变量”，它是`property`一个对象（对象恰好是一个变量）。

因此，您有两个选择。
假设您的对象是这样制作的：

```
var obj = {
    property : 42,
    everything : function () { /* ... */ }
}; 
```

函数体内部返回值 42 的两个选项是：

```
obj.property; 
```

或者

```
this.property; 
```

你打电话时：

```
obj.everything(); 
```

JS 解释器将`obj`被视为等于`this`函数内部。
或者您直接引用`obj`自身，并`property`使用`.property`点符号或`["property"]`括号符号进行访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:23:35.453

那不是变量，而是对象的属性/字段。

试试`this.someVariable`。

这`this`是一个指向对象的（相当特殊的）变量，点（或方括号）语法可用于访问该对象的字段。

您也可以`someObject.someVariable`在`someObject`（指向对象的另一个变量）在范围内的地方执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T01:22:57.167

尝试`this.someVariable`：

```
var someObject = {
        someVariable: 5,
        getVariable: function () {
            return this.someVariable;
        }
    };

window.onload = function () {
    alert(someObject.getVariable());
}; 
```

# c# - 为什么这个 RegEx.Replace 失败，即使我匹配字符串？

> ID：13243060
> 
> 赞同：0
> 
> 时间：2012-11-06T01:21:43.047
> 
> 标签：c#, .net, regex

我是否了解 RegEx.Replace 在 C#/.NET 中的工作原理？我要这个：

> 测试：字符串

变成这样：

> 测试字符串

```
var cleanString = Regex.Replace("Test: String", @"^[\w\*\$][\w\s\-\$]*(\(\d{1,}\)){0,1}$", ""); 
```

然而它 cleanString 评估为：

> 测试：字符串

我究竟做错了什么？

编辑：我从第三方来源获取正则表达式验证字符串，因此我可以使用该正则表达式验证字符串或以某种方式找出正则表达式验证字符串中的有效字符，并循环通过无效字符数组。这就是为什么我选择使用我通常不使用的正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:44:15.613

`Regex.Replace`不会做你想做的事。中使用的正则表达式模式`Regex.Replace`需要匹配您要替换的字符串的位。

您尝试使用的字符串验证模式仅匹配有效字符串。您可以使用`Regex.IsMatch`此模式来检查字符串是否有效，但它不会也不能显示字符串中的哪些字符会阻止匹配成功。

您需要使用匹配坏字符的模式。这种情况的第一个尝试是`[^\w\*\-\d\(\)\s\$]+`。这将匹配验证字符串不允许的任何字符，但仍然不够好。例如，它不会匹配可选括号之间的非数字字符，也不会强制匹配一对匹配的括号。当您开始考虑字符串可能无效的所有可能方式时，因为单个正则表达式模式去除无效字符将很快变得不可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:31:29.593

我会这样做：

```
Dictionary<string,string> whiteList = new Dictionary<string,string>();
//populate whitelist
public StringBuilder cleanString(string dirtyInput)  
{
    StringBuilder sb = new StringBuilder();    
    foreach(char in dirtyInput)    
    {  
        if(null == dirtyInput.get(char)  
        {  
             sb.append(char);  
        }
    }  
    return sb;

} 
```

可能有点偏离，因为我的 Java 可能已经流血了。

# python - 如何在python中将原始json对象转换为Json？

> ID：13243063
> 
> 赞同：0
> 
> 时间：2012-11-06T01:22:20.553
> 
> 标签：python

```
[{"changed_aspect": "media", "subscription_id": xxxx, "object": "user", "object_id": "xxxx", "time": "xxxxxx"}] 
```

这是我从服务器获得的数据。

jsondump = json.dump(数据)

但是当我做 jsondump[1]["changed_aspect"] 它没有显示价值媒体。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T01:26:13.747

假设 subscription_id 应该是一个有效的字符串，

```
>>> import json
>>> c = '[{"changed_aspect": "media", "subscription_id": "xxxx", "object": "user", "object_id": "xxxx", "time": "xxxxxx"}]'
>>> data = json.loads(c)
>>> data[0]['changed_aspect']
u'media' 
```

索引应该是 0，而不是 1，因为 python 中的列表是基于 0 的索引。

# jsf - 来自表单的 JSF 简单实体持久性

> ID：13243065
> 
> 赞同：2
> 
> 时间：2012-11-06T01:22:23.430
> 
> 标签：jsf, nullpointerexception, dao, facade

我认为这个问题很简单，我得到了错误：

```
Caused by: java.lang.NullPointerException
at co.edu.unal.bienestar.dao.UserDao.save(UserDao.java:27)
at co.edu.unal.bienestar.facade.UserFacade.createUser(UserFacade.java:18)
at co.edu.unal.bienestar.mb.UserMB.createUser(UserMB.java:40)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
... 27 more 
```

当我尝试使用只有实体类的应用程序创建新用户时：

```
@Entity
public class User implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    private String username;
    private String password;
    private Role role;

    <here getters and setters>
} 
```

数据访问对象：

```
public class UserDao {

    @PersistenceContext
    private EntityManager em;

    public void save(User user) {
        em.persist(user);
    }

    public void delete(User user) {
        User userToBeRemoved = em.merge(user);
        em.remove(userToBeRemoved);
    }

    public User update(User user) {
        return em.merge(user);
    }

    public List<User> findAll() {
        TypedQuery<User> query = em.createQuery(
                "SELECT u FROM User u ORDER BY u.id", User.class);
        return query.getResultList();
    }
} 
```

门面：

```
public class UserFacade {

    private UserDao userDao = new UserDao();

    public void createUser(User user) {
        userDao.save(user);
    }

    public List<User> listAll() {
        List<User> result = userDao.findAll();
        return result;
    }
} 
```

用户管理的 Bean：

```
@SessionScoped
@ManagedBean(name = "userMB")
public class UserMB implements Serializable {
    public static final String INJECTION_NAME = "#{userMB}";
    private static final long serialVersionUID = 1L;
    private User user;
    private UserFacade userfacade;

    public User getUser() {
        if (user == null) {
            user = new User();
        }
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }

    public void createUser() {
        getUserfacade().createUser(user);
    }

    public UserFacade getUserfacade() {
        if (userfacade == null){
            userfacade = new UserFacade();
        }
        return userfacade;
    }
} 
```

最后从 JSF 页面我调用这样的方法：

```
 <f:view>
        <h:form>
            <h1><h:outputText value="Create/Edit"/></h1>
            <h:panelGrid columns="2">
                <h:outputLabel value="Username:"/>
                <h:inputText id="username" value="#{userMB.user.username}" title="username" />
                <h:outputLabel value="Password:" />
                <h:inputText id="password" value="#{userMB.user.password}" title="password" />
                   <h:outputLabel value="ID:" />
                   <h:inputText id="id" value="#{userMB.user.id}" title="id" />                                      
            </h:panelGrid>
            <h:commandButton action="#{userMB.createUser}" value="create"/>
        </h:form>
    </f:view> 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:29:44.950

`@PersistenceContext`仅适用于托管类。您的`UserDAO`(and `UserFacade`) 似乎完全不受管理并手动创建。这样`EntityManager`就不会被注入了。您还需要手动创建它。现在是`null`这样，这就解释了`NullPointerException`。

使`UserDAO`（和`UserFacade`）成为`@Stateless`EJB

```
@Stateless
public class UserDAO {
    // ...
} 
```

并用于`@EJB`注入它们（并删除 getter 中的延迟加载）

```
@EJB
private UserFacade userFacade; // Also on userDAO. 
```

或者，如果您的环境不支持 EJB（例如 Tomcat），那么您需要将其升级到 TomEE 或在其上安装 OpenEJB，或者寻找替代框架来管理您的服务外观和 DAO。Spring 经常被使用，但是如果 Java EE 6 已经提供了 EJB3 的强大功能，你为什么要选择它呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T18:34:05.357

BalusC 写道：“@PersistenceContext 仅适用于托管类。”

那么，是否可以通过@PersistenceContext 注解在UserMB 中创建EntityManager，并将其传递给DAO？

（我知道这不是 EE6 背后的想法，但如果替代方案如此复杂，人们可能会考虑这一点。然后你可以继续使用 tomcat，并拥有一个生命周期管理的 EntityManager，如果我做对了。）

（很抱歉将其作为答案而不是评论发送，但我必须减少分数。）

# powershell - 如何在 powershell 中连接 SharpSvn.SvnUpdateResult

> ID：13243071
> 
> 赞同：1
> 
> 时间：2012-11-06T01:23:16.950
> 
> 标签：powershell, sharpsvn

尝试使用 powershell 脚本自动化我早上更新多个颠覆工作副本的习惯。svn[更新](http://docs.sharpsvn.net/current/html/M_SharpSvn_SvnClient_Update_7.htm)工作正常，但最好挂接到[SvnUpdateResult](http://docs.sharpsvn.net/current/html/M_SharpSvn_SvnUpdateResult__ctor.htm)以显示更改或任何冲突。

我已经为更新结果指定了输出参数，但不确定如何克服模棱两可的重载异常？我已经指定了参数类型：

```
try {
    Add-Type -Path "C:\Program Files\SharpSVN\SharpSvn.dll"
}
catch [System.BadImageFormatException] {
    Write-Host "LFMF: You're probably using 32bit SharpSVN.dll in 64bit powershell ;-)"
}
$paths = @("Project-Trunk", "Project-Branch");
$currentPath = (Get-Location).Path
$svnClient = New-Object SharpSvn.SvnClient
foreach ($path in $paths) {
    Write-Host "Updating" $path
    $svnLocalPath = Join-Path $currentPath $path;
    # Throws: Multiple ambiguous overloads found for "Update" and the argument count: "2".
    $svnClient.Update([string]$svnLocalPath, [ref][SharpSvn.SvnUpdateResult]$result)
} 
```

我很感激我可以只使用 svn 客户端或 tortoiseproc，但我正在尝试了解有关 powershell 的更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T10:55:31.420

result 参数是 C# out 参数，而不是 ref 参数。（在 IL 级别上，输出参数是 ref 参数，但我猜 powershell 处理它的方式不同）

如果输出参数有问题，也可以从通知处理程序中获取相同的信息。

# java - 是否有可以修复文件的 Java zip 库，à la zip -FF？

> ID：13243075
> 
> 赞同：0
> 
> 时间：2012-11-06T01:24:15.873
> 
> 标签：java, zip

我偶尔会在我的应用程序中收到引发`start of central directory not found; zipfile corrupt.`异常的 .zip 文件。这些 zip 文件在我的 Mac 的 Finder 中打开得很好。

我可以每次从命令行修复这些文件，使用`zip -FF bad.zip --out good.zip`

任何 Java ZIP 库都可以完成同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:32:27.487

您可能只想让 Java 执行此命令，因为严格来说 zip 更像是一个容器，它可以包含不同的压缩算法。

一般来说，使用程序化方法调查和解决与压缩档案相关的问题可能是一项棘手而漫长的任务。

用你的命令[试试这个。](https://stackoverflow.com/questions/792024/how-to-execute-system-commands-linux-bsd-using-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-21T22:43:05.587

我尝试使用 ZipInputStream 和 ZipOutputStream。但是 ZipInputStream 在执行以下操作时总是会失败：“getNextEntry()”。基本上是“getNextEntry()”中的以下代码行：

```
...
    if ((entry = readLOC()) == null) {
        return null;
    }
... 
```

一些条目后返回 null ，我无法更进一步。

但最后我可以使用 ZipFile 和 ZipOutputStream 解决这个问题，因为 ZipFile 可以毫无问题地读取所有 zip 条目，并且解决方案如下所示：

```
protected void repairZipFile(String file) throws IOException {
    File repairZipFile = new File(file+".repair");
    ZipFile zipFile = new ZipFile(file);
    Enumeration<? extends ZipEntry> zipFileEntries = zipFile.entries();
    InputStream zis;
    ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(repairZipFile));
    byte[] b = new byte[1024];
    while(zipFileEntries.hasMoreElements()){
        ZipEntry zipEntry = zipFileEntries.nextElement();
        zos.putNextEntry(zipEntry);
        zis = zipFile.getInputStream(zipEntry);
        int n = zis.read(b);
        while(n>=0) {
            zos.write(b, 0, n);
            n = zis.read(b);
        }
        zis.close();
        zos.closeEntry();
    }
    zipFile.close();
    zos.flush();
    zos.close();
    Files.move(repairZipFile.toPath(), (new File(file)).toPath(), StandardCopyOption.REPLACE_EXISTING);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T03:34:26.217

在 Java 中打开 ZIP 文件有两种方法，使用[ZipFile](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipFile.html)类或使用[ZipInputStream](http://docs.oracle.com/javase/7/docs/api/java/util/zip/ZipInputStream.html)。

据我记得，`ZipFile`首先读取 zip 文件的中心目录 - 它可以这样做，因为它使用了一个`RandomAccessFile`底层。但是，`ZipInputStream`使用内联条目信息，如果我认为存在于文件末尾的中央目录丢失或损坏，这可能会更好。

因此，可以通过使用 ZipInputStream 读取 ZIP 文件并使用 ZipOutputStream 将其写回另一个文件，在它们之间复制条目信息来“修复”Java 中的 ZIP 文件。如果 ZipInputStream 被截断，您最终可能会从 ZipInputStream 的最后一个条目中读取 IO 异常，但它可能仍会保存文件中的其他先前条目。

# css - 阴影在 div 周围放置白线

> ID：13243076
> 
> 赞同：1
> 
> 时间：2012-11-06T01:24:25.400
> 
> 标签：css

所以我一直在尝试用简单的阴影制作一个简单的页面。当我将几个选项卡添加到具有 drowshadow 的框时，问题就出现了。我在[http://blah.eu5.org/test/](http://blah.eu5.org/test/)放置了 html 和 css 的副本。

任何人都可以建议我哪里出错了，因为我知道我之前已经使用 css 正确完成了它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:28:36.180

白线实际上是`silver`线，所以你需要这个：

```
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4); 
```

代替

```
box-shadow: -1px -1px 0 silver, 1px 1px 0 silver, 0 5px 15px rgba(0, 0, 0, 0.4); 
```

会好的

# android - AlertDialog 中的 Android 选项卡

> ID：13243078
> 
> 赞同：2
> 
> 时间：2012-11-06T01:24:39.757
> 
> 标签：android, android-intent, tabs, android-alertdialog

我可以在 AlertDialog 中有标签吗？

我浏览了很多在线教程，他们通常将意图从一个活动到另一个活动放在选项卡中。但是，警报对话框都在一个活动中。

我想在一个警报对话框中有两个选项卡。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T01:31:24.743

> 我可以在 AlertDialog 中有标签吗？

大概您可以使用`TabHost`and `TabWidget`in an `AlertDialog`, 使用选项卡的视图。此示例在活动中显示视图作为选项卡：[https](https://github.com/commonsguy/cw-omnibus/tree/master/WidgetCatalog/Tab) ://github.com/commonsguy/cw-omnibus/tree/master/WidgetCatalog/Tab在您的情况下，您将使用相同类型的布局，但用于`LayoutInflater`创建然后`View`您可以使用它`AlertDialog.Builder`来创建对话框。

> 我浏览了很多在线教程，他们通常将意图从一个活动到另一个活动放在选项卡中。

恕我直言，这些教程现在已经过时了。将活动嵌入选项卡的整个技术已被弃用。

# c++ - 如何使用 RtAudio 调整音频平移

> ID：13243079
> 
> 赞同：3
> 
> 时间：2012-11-06T01:24:39.723
> 
> 标签：c++, audio, duplex, audio-panning, rtaudio

我使用 Rtaudio 库，我想实现一个可以控制平移的音频程序（例如，将声音从左声道转移到右声道）。

在我的具体情况下，我使用双工模式（您可以在此处找到示例：[双工模式](http://www.music.mcgill.ca/~gary/rtaudio/duplex.html)）。这意味着我将麦克风输入连接到扬声器输出。

我应该在输出缓冲区上应用过滤器吗？什么样的过滤器？
谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:47:21.483

要减少左边的信号，只需将左边的每个样本乘以一个小于或等于 1 的数字，我们称之为 l。同样对于右边，我们将这个数字称为 r。一般来说，您不想乘以大于 1 的数字，否则可能会导致信号失真。

l 和 r 都是“平移位置”的函数。你如何从平移位置到你的数字是一些讨论的问题。如果这是为了简单的事情，您可以将这些值线性降低，在极端情况下使用这些值：

```
Hard Left:
l=1; r=0
Center:
l=1; r=1
Hard Right:
l=0; r=1; 
```

如果这是更高级的东西，你应该在谷歌上搜索“pan law”。这是一个看起来不错的示例：

[http://www.kvraudio.com/forum/viewtopic.php?p=4264576](http://www.kvraudio.com/forum/viewtopic.php?p=4264576)

更新：我从未使用过 RT 音频（我通常使用类似的 PortAudio），但我认为平移代码看起来像这样，其中 l 和 r 如上定义（假设类型 int32_t - 有符号的 32 位整数） ：

```
int inout( void *outputBuffer, void *inputBuffer, unsigned int nBufferFrames,
           double streamTime, RtAudioStreamStatus status, void *data )
{
  if ( status ) std::cout << "Stream over/underflow detected." << std::endl;

  int32_t *ob = (int32_t *)outputBuffer;
  int32_t *in = (int32_t *)inputBuffer;

  unsigned long *bytes = (unsigned long *) data;
  int i =0;
  while( i < bytes / 4 ) {
     ob[i] = (int32_t) ( ib[i] * l + .5 );
     ++i;
     ob[i] = (int32_t) ( ib[i] * r + .5 );
     ++i;
  }
  return 0;
} 
```

# java - 这是我的最终代码，我在 "if(Users[B].substring(0,1) == "1"){ //Find String Cut Char Function" 上遇到错误

> ID：13243083
> 
> 赞同：-4
> 
> 时间：2012-11-06T01:25:15.353
> 
> 标签：java

无法找到如何解决此错误，请帮助我。

```
import java.util.Scanner;
import java.io.*;
public class work {
    public static void main(String[] args) throws IOException {
        String Login;
        int A,B,C,D,NumTea,NumStu,PerClass,Teacher,Total,LoginID,LoginType,Choice;

        String[] Users = new String[20];

        Scanner FileScan;
        FileScan = new Scanner(new File("users.txt"));    
        A = 0;

        while (FileScan.hasNext())
        {
            Users[A] = FileScan.nextLine(); //Find the function to fix this
            A++;
        }

        Scanner reader = new Scanner(System.in);

        // Ready to get database of students and teachers
        // Arrays for seperating out students from teachers

        String[] Teachers = new String[1000];
        String[] Students = new String[1000];

        Total = A;

        System.out.println("Please wait for the system to intilize...");

        B=0;
        C=0;

        //Ready to seperate students from teachers in for loops

        for(B=0;B<=A;B++){
            if(Users[B].substring(0,1) == "1"){ //Find String Cut Char Function
                Students[C] = Users[B];
                C=C+1;
            }
        }

        NumStu = C+1;
        C=0;

        for(B=0;B<=A;B++){
            if(Users[B].substring(0,1) == "2"){ //Find String Cut Char Function
                Teachers[C] = Users[B];
                C=C+1;
            }
        }

        NumTea = C+1;

        System.out.println("Each teacher has 1 class a day but each student has 2 classes per day");
        System.out.println("There are " + NumTea + " teachers in the school therefore there are " + (NumTea) + " classes");
        System.out.println("There are " + NumStu + " students in the school therefore there are " + ((NumStu*2)/NumTea) + " kids per class on average"); //Diving correctly?

        PerClass = ((NumStu*2)/NumTea);

        int[][] StudentClass = new int[NumStu][2]; //Looks at what classes each student has
        int[][] TeacherClass = new int[NumTea][1000]; //Looks at what students each teacher has

        for(B=0;B<=(NumStu-1);B++){
            Teacher = (int)(Math.random()*NumTea); //Import Math Library and check random function
            StudentClass[B][0] = Teacher; //Assigning first class
            Teacher = (int)(Math.random()*NumTea);
            StudentClass[B][1] = Teacher; //Assigning second class
            if(StudentClass[B][0] == StudentClass[B][1]){  //Error checking for same class
                Teacher = (int)(Math.random()*NumTea);
                StudentClass[B][1] = Teacher;
            }
        }

        //Ready to look at student classes and assign them to teachers

        B=0;
        C=0;
        D=0;

        int[] StuClass = new int[NumTea]; //Looks at how many students are in each class

        for(B=0;B<=(NumTea-1);B++){
            D=0;
            for(C=0;C<=(NumStu-1);C++){
                if(StudentClass[C][0] == B || StudentClass[C][1] == B){
                    TeacherClass[B][D] = C;
                    D=D+1;
                }
            }
            StuClass[B] = D;
        }

        System.out.println("Classes print out:");

        // Going to print out all students and all teachers in each class

        A=0;
        B=0;

        for(A=0;A<=(NumTea-1);A++){
            System.out.println(Teachers[A] + "'s class (" + (StuClass[A]+1) + "):");
            for(B=0;B<=(StuClass[A]);B++){
                System.out.println("           " + Students[(TeacherClass[A][B])]);
            }
        }

        while(1==1){

            System.out.println("Welcome to Wayzata WHS's SGS (Scheduling and Grading System)");
            System.out.println("Login:");

            Login = reader.nextLine();

            A = 0;
            LoginType = 0;
            LoginID = 0;

            for(A=0;A<=(NumStu-1);A++){
                if(Students[A].toLowerCase() == Login.toLowerCase()){ //Check to see if string lower is correct
                    System.out.println("Found your account, linking you with the system...");
                    LoginID = A;
                    LoginType = 1;
                }
            }

            for(A=0;A<=(NumTea-1);A++){
                if(Teachers[A].toLowerCase() == Login.toLowerCase()){ //Check to see if string lower is correct
                    System.out.println("Found your account, linking you with the system...");
                    LoginID = A;
                    LoginType = 2;
                }
            }

            //The user has typed in a name and the system has recognized it and found it in the system the program has logged ethier a student or teacher in

            if(LoginType == 1){
                System.out.println("Welcome " + Students[LoginID] + "! Signed in as: STUDENT");
                System.out.println("What would you like to do today?");
                System.out.println("1: See grades");
                System.out.println("2: Logout");
                Choice = reader.nextInt();

                if(Choice == 1){
                    System.out.println("1: " + Teachers[(StudentClass[LoginID][0])] + "'s Class");
                    System.out.println("2: " + Teachers[(StudentClass[LoginID][1])] + "'s Class");
                    Choice = reader.nextInt();
                    //c.PrintClassGrades(LoginID,Choice); //Add a class for this
                }
            }else if(LoginType == 2){
                System.out.println("Welcome " + Teachers[LoginID] + "! Signed in as: TEACHER");
                System.out.println("What would you like to do today?");
                System.out.println("1: Do attendance");
                System.out.println("2: Look at class grades");
                System.out.println("3: Add grade to gradebook");
                System.out.println("4: Logout");
                Choice = reader.nextInt();

                if(Choice == 1){
                    //c.Attendance(LoginID); //Add a class for this
                }else if(Choice == 2){
                    //c.ClassGrades(LoginID); //Add a class for this
                }else if(Choice == 3){
                    //c.AddGrade(LoginID);//Add a class for this
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:05:19.040

（我会将此作为评论发布，但我不确定它是否适合。）

以下是一些使您的程序更容易运行的建议：

分开你的声明。每个变量都有一个目的，并让标识符表明该目的。

在调试期间，使用使用固定种子初始化的 java.util.Random，而不是 Math.random。使用 Math.random，每次运行时都会得到不同的数字序列。

仔细查看输出。它做你没想到的事情的第一点在哪里？在上次一切都符合您的预期和第一次并非如此之间添加更多输出。

用纸和铅笔解决你的问题的小版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:31:48.517

**首先**`==`，在比较字符串时切勿使用运算符，**始终**使用`String.equals()`.:

```
if ("1".equals(Users[B].substring(0, 1)) 
```

**第二。**您正在传递超出您已读入的字符串数的最后一个索引。更改（x2）：

```
for (B = 0; B <= A; B++) { 
```

至

```
for (B = 0; B < A; B++) { 
```

数组中的所有条目：

```
String[] Users = new String[20]; 
```

默认情况下将初始化为，当您尝试访问时会`null`导致：`NullPointerException`

```
Users[B].substring(0, 1) 
```

当`B = A`.

这个错误又犯了两次，改成：

```
for (A = 0; A < (NumTea - 1); A++) { 
```

# jquery - 输入时隐藏输入

> ID：13243088
> 
> 赞同：3
> 
> 时间：2012-11-06T01:26:03.453
> 
> 标签：jquery, html

我想知道输入框是否可能具有以下属性：

1.  您可以在输入框中输入...但是，您输入的任何内容对用户都是不可见的
2.  jQuery 可以通过 .keyup 函数读取输入框中输入的任何内容。
3.  您可以检测输入框何时失去焦点。
4.  文本框中没有克拉

举一个具体的例子：

HTML：

```
<input type="text" name="magicalBox"> 
```

jQuery代码：

```
$('input[name=magicalBox]').keyup(function(event){  
     console.log("[1] Received " + String.fromCharCode(event.keyCode));
}

$('input[name=magicalBox]').blur(function(){    
     console.log("[2] No Longer Using Magical Box");
} 
```

理想：我在 magicBox 中输入“a” **，**但在**magicBox 中看**不到“a” 。但是，在我的控制台中，我会看到 [1] 消息。当我点击**magicBox**时，我收到 [2] 消息。

我试过的：

*   **我可以通过在 jQuery 函数中设置magicBox** .val('')来获得 2 和 3 ，但是在您可以看到输入文本的地方有一个轻微的亮点。
*   **将 magicBox**标记为只读似乎有助于获得 1 2 3，但获得 4 似乎很难。从我在网上看到的情况来看，隐藏克拉的方法是设置 onfocus="this.blur()"，但这阻止了我对盒子做任何事情。

任何建议将不胜感激（......如果这甚至可能......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T01:41:57.790

**答案很简单**，改：

```
<input type="text" name="magicalBox"> 
```

到：

```
<input type="text" name="magicalBox" maxlength="0"> 
```

通过将 设置`maxlength`为 0，您是说文本框中不允许有任何字符，并且由于您的 jQuery 代码不关心文本框（只关心按下的键），因此它不会影响输出。

如果这不起作用，请仔细检查您的 jQuery 代码。
您拥有的函数必须以函数结尾，`});`因为该函数是从函数内部调用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T02:11:33.087

由于更改`maxlength`为 0 culd 实际上会破坏退格，因此我会考虑以下 hack：

```
<input type="text" name="magicalBox" class="magicalBox">​ 
```

使用这些样式：

```
.magicalBox {
    color: #FFF; background-color: #FFF;
} 
```

尽管如此，如果用户选择文本，它将出现。这不是什么神奇的东西...

如果您想认真对待这一点，您可以更改 SELECTION 颜色，但这目前仅适用于 Safari 和 Mozilla（-moz- 可能还有 -webkit-，但我不确定最后一个）：

```
.magicalBox::selection {
    background: #FFF;
}
.magicalBox::-moz-selection {
    background: #FFF;
} 
```

显然，为了记录，简单的 Hack 是在盒子上放一个绝对定位`DIV`，具有相同的宽度和高度，加上`background-color: #FFF;`. 这将需要一些工作才能使用户输入进入现场（当你点击时聚焦`DIV`，但它应该仍然很容易。然而，这是一个黑客，这违背了称之为魔术的目的。

编辑：还有一件事。如果`color`与`background-color`

我希望它有所帮助。这不是一个确定的解决方案，但我相信这是向前迈出的一大步。^^

# javascript - 使用 javascript 从网页 POST 到 REST API

> ID：13243091
> 
> 赞同：0
> 
> 时间：2012-11-06T01:26:17.650
> 
> 标签：javascript, rest, post

我正在尝试将 JSON 数据结构从网页发布到 REST API 服务。提交表单时，javascript 将捕获表单字段值，生成 JSON 数据，然后将数据发布到我的 REST API。我不完全确定如何用 JavaScript 做到这一点。谁能指出我正确的方向或放弃一些示例代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:31:34.727

试试 jQuery，它为这类东西提供了一些很好的帮手。

查看[jQuery.post 文档](http://docs.jquery.com/Ajax/jQuery.post)，您可能需要该`postJSON`方法。

至于 jQuery 入门，请查看他们的[入门页面](http://docs.jquery.com/How_jQuery_Works)

您可以使用以下方式获取表单的数据

`var data = $('#formid').serializeArray();`

然后你可以在 postJSON 方法中使用它：

```
$.post(url, data, callback, "json"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:51:12.417

或者更简单的解决方案，使用我的 jQuery 插件：[https ://github.com/jpillora/jquery.rest](https://github.com/jpillora/jquery.rest)

> 我需要发布到与我的网页不同的域。我可以这样做吗？

如果您不关心较旧的 IE，您可以使用标头来允许跨域请求：[https ://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

# php - 在 WHILE 语句中更新

> ID：13243092
> 
> 赞同：0
> 
> 时间：2012-11-06T01:26:19.867
> 
> 标签：php, sql, sql-update

所以，我有一个页面，上面有一堆工单。每个工作订单是单个表中的一行，并通过 while() 语句放在页面上。我正在尝试使用放入 while() 中的简单表单更新每一行，并使用 UPDATE/WHERE 语句将信息实际添加到表中。

它不是将其添加到特定行，而是将其添加到每一行。我唯一能想到的是我的 WHERE 条件是错误的，但我似乎无法弄清楚。也许它只是需要新鲜的眼睛，或者也许我正朝着完全错误的方向前进。

此外，任何关于安全的具体说明、更好的方法等都会非常有帮助。我正在学习 PHP 并且可以使用帮助之手。:)

```
<?php

        $query = "SELECT * FROM client_information"; 

        $result = mysql_query($query) or die(mysql_error());

        while($row = mysql_fetch_array($result)){ 

        $which_ad = $row['ID'];?>

            <b>Name:</b> <? echo $row['billing_name']; ?> <br>
            <b>Job Type:</b> <? echo $row['job_type']; ?> <br>
            <b>Size:</b> <? echo $row['size']; ?> <br>
            <b>Text:</b> <? echo $row['text']; ?> <br>
            <b>Notes:</b> <? echo $notes; ?> <br>

            <br><br>

        <form action="small_update.php" method="POST">
        <strong>Email Message:</strong><br>
        <textarea rows="8" cols="60" name="email_message"></textarea>        
        <input type="submit" name="submit" value="Submit"></form>

<?
$email_message = htmlspecialchars ("{$_POST['email_message']}", ENT_QUOTES);

if (mysql_errno() != 0) {
die(mysql_error());
}

mysql_query(
"UPDATE client_information
SET email_message='$email_message'

WHERE ID='$which_ad'"
);

if (mysql_errno() != 0) {
die(mysql_error());
}

    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:39:08.317

您没有在表单中指定 id：

```
<form action="small_update.php" method="POST">
    <strong>Email Message:</strong><br>
    <textarea rows="8" cols="60" name="email_message"></textarea>
    <input type="hidden" name="id" value="<?php echo $which_ad; ?>">  
    <input type="submit" name="submit" value="Submit">
</form> 
```

你还需要确保你知道提交了什么 id：

```
"UPDATE client_information
SET email_message='$email_message'

WHERE ID='$_POST['id']'" 
```

当然，正如其他人所说，您很容易受到这样的攻击。您需要查看 mysqli 或 pdo 来清理您的输入...

Ans 还经过检查，您正在循环中评估您的发布数据。不要那样做。只需在页面上处理其他所有内容之前进行评估...

```
<?php
if($_POST)
{
    //run processing here
}

// do your fetch code here and display the forms... 
```

# hibernate - Hibernate Envers 在获取已删除的父对象时抛出 EntityNotFoundException

> ID：13243096
> 
> 赞同：2
> 
> 时间：2012-11-06T01:26:51.187
> 
> 标签：hibernate, hibernate-envers

我有以下简单的数据结构（为简洁起见省略了详细信息）：

```
@Audited
@Entity
class SettingsGroup implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    Integer id

    @OneToMany(mappedBy = "group", cascade = [CascadeType.ALL])
    @OrderBy("key")
    List<SettingsEntry> entries = []

}

@Audited
@Entity
class SettingsEntry implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    Integer id

    @ManyToOne
    SettingsGroup group

} 
```

我设置了 org.hibernate.envers.store_data_at_delete=true 标志。在获取 SettingsEntry 的修订后，它会在尝试从 _aud 表中延迟获取关联的组时抛出 EntityNotFoundException。

```
def reader = AuditReaderFactory.get(manager)
def query = reader.createQuery().forRevisionsOfEntity(SettingsEntry, false, true)
audits = query.resultList.collect {
    //noinspection GroovyAssignabilityCheck
    new AuditRevision<T>(entity:it[0], revision: it[1], type: it[2])
} 
```

我查看了生成的 SQL，它似乎在尝试获取导致没有记录显示的父记录时过滤掉了删除修订类型：

```
select *
from settings_group_aud sg 
where sg.rev=(
  select max(sg2.rev) from settings_group_aud sg2 where sg2.rev<=3 and sg.id=sg2.id
) and sg.revtype<>2 and sg.id=1 
```

表中有记录..只是最近的是删除：

```
select * from SETTINGS_GROUP_AUD;
ID      NAME    ENVIRONMENT     KEY_NAME    REV     REVTYPE  
1   test    prod    Default Key 2   0
1   test    prod    Default Key 3   2
(2 rows, 1 ms) 
```

有没有办法调整 Envers 中的延迟初始化以防止过滤已删除的 rev 类型？那将解决我的问题。我只是没有看到任何可配置的东西。

我的另一个选择是再次关闭 org.hibernate.envers.store_data_at_delete，但如果可能的话，我更愿意继续使用它。这似乎有点像一个错误，但我是 Envers 的新手，所以也许我只是看错了:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:42:32.287

不幸的是，在浏览已删除实体的图表时，这看起来像是一个错误。请向[https://hibernate.onjira.com/secure/Dashboard.jspa](https://hibernate.onjira.com/secure/Dashboard.jspa)报告。

解决方案可能不是在查询中选择已删除的实体：forRevisionsOfEntity(SettingsEntry, false, false)。列表的最后一个元素将是删除时的实体。

# python - 在python中提取值/重命名文件名

> ID：13243098
> 
> 赞同：0
> 
> 时间：2012-11-06T01:27:22.650
> 
> 标签：python, split, extract, wildcard, rename

我正在尝试使用 python 重命名包含以下值的文件名： `~test1~test2~filename.csv`

我想将文件重命名为 filename.csv。波浪号是前两个单词的分隔符，我不希望这些单词出现在我的结局文件名中。这些词是变量。任何援助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:27:48.083

由于每个文件名的单词都会发生变化，因此最好在目录中搜索与模式匹配的文件。[`glob`](http://docs.python.org/2/library/glob.html)为你做。

如果你有这样的目录：

```
.
├── ~a~b~c.csv
├── file.csv
├── ~foo~bar~f1.csv
└── hello.txt 
```

然后运行这个：

```
import os, glob
for f in glob.glob('~*~*~*.csv'):
    os.rename(f,f.split('~')[-1]) 
```

会给你：

```
.
├── c.csv
├── f1.csv
├── file.csv
└── hello.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:34:20.370

```
import os

myfilename = "~test1~test2~filename.csv"

for filename in os.listdir("."):
   if filename == myfilename:
       myfilename_new = myfilename.split("~")[-1]
       os.rename(filename, myfilename_new) 
```

当然假设您的原始文件`~test1~test2~filename.csv`存在于此 python 脚本运行的“当前/相同目录”中。

希望这对您的学习之旅有所帮助！

欢迎来到 Python！

# php - 使用 CURL，需要刷新 URL 而无需页面刷新 PHP

> ID：13243102
> 
> 赞同：0
> 
> 时间：2012-11-06T01:27:30.867
> 
> 标签：php, curl

有没有办法刷新 $url 变量？我想每 2 分钟左右从该链接中提取数据。我在希望显示选取框的页面上使用 php include('marquee.php') 标记。我知道选框标签需要做很多工作才能顺利进行，但现在这适用于我想要完成的工作。Marquee 运行良好，问题是如果我尝试使用

```
<meta http-equiv='refresh' content='120' />; 
```

在 marquee.php 页面中，当内容刷新时，它也会刷新显示选取框的整个页面。如何防止显示选取框的页面被刷新？我愿意接受其他/更好的方法来完成这项工作，在此先感谢您！

选框.php

```
$url="http://www.somesite.com";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
$data = curl_exec ($ch);

//extracting the data that I need and echoing it through a marquee tag

echo '<marquee>'; 
    $number = 0;
    $i = 0;
    while($number<=16){
    echo $teamAr[$i++].')&emsp;&emsp;&emsp;';

           $number++; 
    }

echo       '</marquee>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:30:36.523

cURL 不会帮助你。如果您想在不刷新的情况下更新页面上的内容，您唯一的选择是 AJAX。

# javascript - 在不滚动页面的情况下更改 location.hash

> ID：13243107
> 
> 赞同：0
> 
> 时间：2012-11-06T01:28:30.363
> 
> 标签：javascript, jquery, dom

```
 hash = hash.replace( /^#/, '' );
var node = $( '#' + hash );
if ( node.length ) {
  node.attr( 'id', '' );
}
document.location.hash = hash;
if ( node.length ) {
  node.attr( 'id', hash );
} 
```

我在使用上面的代码时遇到了问题，我从这篇文章中获取：[Modifying document.location.hash without page scrolling](https://stackoverflow.com/questions/1489624/modifying-document-location-hash-without-page-scrolling)，在我将 location.hash 更改为所述 id 时尝试临时替换 div 的 id。hash 在控制台中出现了这个错误： Uncaught ReferenceError: hash is not defined。我是 JS 新手，需要一些指导！谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:31:51.920

*   确保您已正确定义`hash`.

*   `return false`如果您正在处理锚点的点击事件，请确保您也这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:29:43.923

第一行似乎是错误的：

```
hash = hash.replace( /^#/, '' ); 
```

你确定你在它之前定义了哈希变量吗？

我认为它必须是这样的：

```
var hash = document.location.href;
hash = hash.replace( /^#/, '' ); 
```

然后其余代码不应导致错误

# vb.net - HTTPRequest 性能 VBScript 与 VB.NET

> ID：13243111
> 
> 赞同：1
> 
> 时间：2012-11-06T01:29:19.457
> 
> 标签：vb.net, performance, vbscript

我有一个应用程序在操作中使用 VBScript 文件来发出 HTTP 请求，我希望最好将其完全移至 VB.NET 解决方案。

我知道 VBScript HTTP 请求和 VB.NET 请求之间存在一些差异，但我真正想知道的是哪一个会更快？在用 VB.NET 进行了一些测试后，我不太确定它是否会像我的 VBScript 解决方案一样快。有没有人有这方面的经验，性能是否有明显变化？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:31:59.617

我希望 VB.Net 更快，因为无论实际的 httprequest 调用有多快，使用 vbscript 意味着您的应用程序首先需要启动一个单独的进程。

话虽如此，在这里将*大大推动性能*的是实际的网络下载。我们正在谈论 Web 服务器准备和传输它的响应需要几十到几百毫秒，而vbscript 与 vb.net*最多*只有几十毫秒的差异，即使考虑到启动新进程的时间也是如此。

# jquery - 使用 jQuery 验证插件在下拉值更改时显示弹出/警报

> ID：13243114
> 
> 赞同：1
> 
> 时间：2012-11-06T01:29:45.983
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery validate 插件进行表单验证。我在设置必填字段（使用规则和消息）时可以正常工作，如果在用户尝试提交表单时它们没有完成，它们会被突出显示。

不过我还有另一个要求，我想知道这是否可以使用 jQuery 验证插件来完成？

我有一个包含三个值的下拉字段 - 草稿、供审阅和已发布。默认值为草稿。当用户将下拉值更改为已发布时，我希望立即出现一个弹出警报框，其中显示“您确定要发布此内容吗？” 带有“确定”或“取消”选项。

jQuery validate 插件可以做到这一点吗？如果是这样，怎么做？

谢谢你的帮助，

斯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:36:53.557

我不会在 jquery 验证规则中进行交互式确认，尽管如果你真的想要它是可能的。不这样做的一个原因是，当您提交表单时，该规则将运行，作为表单验证的一部分，为您提供第二个确认弹出窗口。

试试看它是否适合你

```
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.10.0/jquery.validate.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $.validator.addMethod("myConfirm", function (value) {
            confirm('are you sure?');
            return true;
        }, '');

        $(function () {
            $('form').validate({
                onfocusout: false,
                // warning - I don't recommend doing this
                rules: { mychoice: "myConfirm" }
            });
            $('select').change(function () {
                $('form').validate().form();
            });

        });
</script>
</head>
<body>
    <form>
    <select name="mychoice">
        <option>great</option>
        <option>good</option>
    </select>
    <input type="submit" />
    </form>
</body>
</html> 
```

# c++ - strtok 字符串和修改标记值

> ID：13243116
> 
> 赞同：0
> 
> 时间：2012-11-06T01:30:03.907
> 
> 标签：c++, strtok

嗨，我正在做类似于下面的示例的字符串标记化。但是，例如，在 while 循环中，我会将字母“a”更改为“hellow”。在分配给 myVar[i] 之前尝试更改 pch 时出现分段错误。我该怎么做呢？

```
 map <int, char*> myVar;
    char str[] ="- This, a sample string.";
    char * pch;
    printf ("Splitting string \"%s\" into tokens:\n",str);
    pch = strtok (str," ,.-");
    int i = 0;

    while (pch != NULL)
    {
        printf ("%s\n",pch);

        //modify token value
        stringstream strStream;
        strStream << "hello_world";

        char newStr[7] = {0};
        memcpy(newStr, strStream, 7);

        myVar[i] = (char*)newStr;
        pch = strtok (NULL, " ,.-");
        i++;
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:31:55.950

`while`我在你的循环中看到了两个错误：

1）您将其`stringstream`本身而不是它包含的数据传递给`memcpy()`. 您依赖于`stringstream::operator void*()`转换运算符。您不应该尊重该指针，因为它不指向实际数据。它只是一个标志，表明它是否`stringstream`有效。要将`stringstream`数据传递给`memcpy()`，您必须首先调用它的`str()`方法来获取`std::string`包含数据的 a，然后调用它的`c_str()`方法将该数据传递给`memcpy()`。

2）当您将值插入到您的中时，您每次`std::map`都插入一个局部变量。之后立即超出范围，将`char[]`包含指向随机位置的指针留在堆栈上。鉴于您显示的代码，缓冲区可能每次都重用相同的堆栈空间。`char[]``std::map``char[]`

由于您使用的是 C++，因此您确实应该使用更多面向 C++ 的东西，例如`std::string`,`std::cout`等。

尝试这个：

```
std::map <int, std::string> myVar;
std::string str = "- This, a sample string.";
std::cout << "Splitting string \"" << str << "\" into tokens:" << std::endl;
size_t start = 0;
int i = 0;

do
{
    std::string token;

    size_t pos = str.find_first_of(" ,.-", start);
    if (pos != std::string::npos)
    { 
        token = str.substr(start, pos-start);
        start = pos + 1;
    }
    else
    {
        token = str.substr(start);
        start = std::string::npos;
    }

    std::cout << token << std::endl;

    //modify token value
    myVar[i] = "hello_world";

    ++i;
 }
 while (start != std::string::npos); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:51:32.443

你看，事情是：strtok*修改*了传递给它的字符串。如果您尝试在字符串常量上使用它，这通常会出现段错误，因为内存并不是您真正可以更改的。

我用来解决这个问题的方法是始终在字符串的*副本上使用 strtok。*

```
char *srcStr = "Some constant text";
char *tmpStr = strdup(srcStr);
//...
//some operations involving strtok
//...
free(tmpStr); 
```

# java - Android时间格式比较

> ID：13243122
> 
> 赞同：1
> 
> 时间：2012-11-06T01:30:55.040
> 
> 标签：java

如何将“18:45”之类的字符串时间与当前系统时间进行比较？我在用：

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm",Locale.US);
String time2 = "18:45";
long dtMili = System.currentTimeMillis();
Date date1 = new Date(dtMili); //current system time
Date date2 = sdf.parse(time2);
if (date2.after(date1)) {
    //bingo!
} 
```

调试值——我发现`date1`作为当前系统日期时间和`date2`作为`"January 1970 - 18:45"`

我只需要比较时间，日期必须相同。

# qt - 如何在 Qt C++ 编程中使用线程实现“先到先得”调度算法？

> ID：13243124
> 
> 赞同：0
> 
> 时间：2012-11-06T01:31:07.260
> 
> 标签：qt, qt4, operating-system

我希望将进程添加到动态列表中，然后使用“先到先得”调度算法来调度这些进程。调度算法最多只能同时运行 5 个进程，当一个进程终止时，它应该发出一个信号来指示终止。

然后当一个进程终止时，一旦队列中有进程，调度算法应该调度另一个进程。

另请注意，每个进程都可以访问一个共享整数列表，一次只能访问一个进程。我已经知道如何通过使用 QMutex 锁定共享整数列表来完成这一部分。理想情况下，我正在寻找一个例子，所以我可以理解它。

```
//mutex example
QMutex mutex
while(!mutex->tryLock()){
    //enter code here
}
this->performTask(); // 
mutex.unlock(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:18:20.960

您可以使用 QThreadPool 创建一个包含 5 个线程的池来运行您的进程，并使用 QQueue 以 FIFO 方式对待处理的进程进行排队。

编辑：关于互斥锁：互斥锁保护由多个线程执行的一段代码形式。锁定互斥锁的线程将被阻塞，直到没有其他线程持有该锁。使用互斥锁的最简单方法是使用 QMutexLocker。

```
void myclass::modifyList(IntegerList* list)
{
    QMutexLocker lock(list->getMutex()); //this will block if an other thread holds the mutes 

    //do stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:43:43.630

[您将有 5 个扩展QThread](http://doc.qt.digia.com/stable/qthread.html)的类的实例。每个类将执行一个[QProcess](http://doc.qt.digia.com/qt/qprocess.html)并等待它完成。

```
class MyThread : public QThread
{
public:
    MyThread(MyScheduler& aScheduler)
    :   iScheduler(aScheduler)
    {
    }

    void ExecuteProgram(const QString& aProgramName)
    {
        iProgramName = aProgramName;
        start();
    }

    void run()
    {
        iProcess.start(iProgramName);
        iProcess.waitForFinished(-1);
        iScheduler.SignalProgramTerminated(this);
    }

private:
    MyScheduler& iScheduler;  // This is your FCFS scheduler.
    QString iProgramName;
    QProcess iProcess;
}; 
```

（我还没有编译这个，但它应该会给你一些进展）。

# processing - 在处理中将二维数组转换为一维数组

> ID：13243125
> 
> 赞同：0
> 
> 时间：2012-11-06T01:31:24.387
> 
> 标签：processing

我正在尝试将二维数组展平为一维数组。这是我目前拥有的。我想要展平我的数组，使一维数组看起来像这样

```
 int[] oneDim = {1, 2, 3, 4, 5, 6, 7, 8 ,9 ,10, 11, 12}; 
```

这是我目前拥有的。我真的不知道该怎么做。感谢所有帮助和输入。

```
 void setup() {
   int[][] twoDim = { {1, 2, 3, 4},
                      {5, 6, 7, 8},
                      {9, 10, 11, 12} }; 

   int[] oneDim = new int[twoDim.length];
   for (int i = 0; i < twoDim.length; i++) {
      for (int j = 0; j < twoDim[i].length; j++) {
        oneDim[j] += twoDim[j][i];
      }                  
    }
   println(oneDim);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:42:30.527

```
int[][] twoDim = { {1, 2, 3, 4},
                   {5, 6, 7, 8},
                   {9, 10, 11, 12} }; 
int x = twoDim.length;
int y = twoDim[0].length;
int[] oneDim = new int[x*y];
for (int i = 0; i < x; i++) {
  for (int j = 0; j < y; j++) {
    oneDim[i*y + j] = twoDim[i][j];
  }
}
println(oneDim); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:37:58.690

这里有一个提示：将二维映射到一个的常用公式是：`width*y + x`，其中`width`是每行中的元素数（在你的情况下，4，`twoDim[i].length`假设它们都是相同的长度），'x' 是列上的迭代器（`j`在您的情况下是 ），并且`y`是行上的迭代器（`i`为您）。

您需要检查一维数组的大小是否足以接受`twoDim`. 它看起来不够大 -`twoDim[i].length * twoDim.length`至少它需要很长的元素。

您当前正在一遍又一遍地写入同一行数据，因为您要`oneDim[j]`在内部循环中为外部循环的每次迭代分配 to。尝试`oneDim`使用我在此答案开头建议的公式分配给（一旦它具有适当的大小）。

# matlab - MATLAB图中选定绘图对象的图例

> ID：13243128
> 
> 赞同：2
> 
> 时间：2012-11-06T01:31:31.767
> 
> 标签：matlab, legend, matlab-figure

对于 MATLAB 图，我有类似的东西：

```
figure; hold on;
line ( [1 2], [3 4] );
line ( [5 6], [7 8] );

plot(x1,y1,'r.');
plot(x2,y2,'b.'); 
```

其中 x1,y1,x2,y2 都是向量。

如何`legend`仅添加最后两个图，而不是两条线？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T01:38:42.357

您将必须获取最后两个绘图的句柄，并告诉`legend`您只为这两个绘图。例如：

```
h1 = plot(x1,y1,'r.');
h2 = plot(x2,y2,'b.');
legend([h1,h2],'red','blue') 
```

# c# - 如何在 XNA 中绘制特殊字符？

> ID：13243130
> 
> 赞同：5
> 
> 时间：2012-11-06T01:31:42.120
> 
> 标签：c#, c#-4.0, xna, xna-4.0, spritefont

我想通过使用方法在 XNA 中绘制特殊字符，例如：“π,Ω,θ,ξ” `SpriteBatch.DrawString()`，但我得到一个异常，说这些字符在 SpriteFont 文件**中不可用。**有什么解决办法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-06T11:40:50.033

您需要在 spritefont中**包含这些字符。**

在您的 spritefont 文件中，您需要为希腊字母设置另一个“区域”：

```
<CharacterRegions>
  <CharacterRegion><!-- Normal letters -->
    <Start>&#32;</Start>
    <End>&#126;</End>
  </CharacterRegion>
  <CharacterRegion><!-- Greek letters -->
    <Start>&#913;</Start>
    <End>&#969;</End>
  </CharacterRegion>
</CharacterRegions> 
```

当您包含它时，您应该能够使用该 spritefont 显示这些字符：

![spritefont 中希腊字符的示例用法](../Images/d01851c5e64b80b03bde6fb3b1a9803b.png)

* * *

## 使用字符映射工具

要**查找这些字符所在的区域**，请使用[Character Map](http://tlt.its.psu.edu/suggestions/international/accents/charmap.html)，这是一个很好的应用程序`All Programs -> Accessories -> System Tools`。

当您选择一个字符时，它会显示它的字符代码，例如 omega (ω) 是 U+03C9，即 0x03C9 十六进制或 969 十进制。

* * *

## 定义字符区域的不同方法

有 3 种方法可以在 SpriteFont 文件中定义区域，它们与在 XML 中写入字符的三种方法有关：

*   十进制表示：即`&#126;`- 格式为`&#nnnn;`
*   十六进制表示：ie `&#x7E;`- 格式为`&#xnnnn;`
*   实际性格：即`~`

这是用 XML 编写相同内容的三种方式，因此您可以使用不同的方式来定义您的区域。以上是区域的十进制表示。

这是十六进制表示，这是最容易从字符映射中获得的：

![在此处输入图像描述](../Images/7cfdfe283a85afb0a2ef98e93228ef75.png)

最后，您可以使用**实际字符**来定义您的区域，您可以通过从字符映射工具的文本框中复制粘贴它们来获得它们：

![在此处输入图像描述](../Images/7f2b8362f51c929ac54d6febc26d4f30.png)

# c++ - c++ 中的目录问题。

> ID：13243133
> 
> 赞同：0
> 
> 时间：2012-11-06T01:32:11.887
> 
> 标签：c++, directory

我正在开发一个程序，并且遇到了一些问题，这些问题正在发生。

基本上，该程序旨在为用户提供程序列表，一旦用户选择它，然后为用户提供具有相关扩展名的所有文件的列表。选择文件后，它将使用所需程序打开文件。我现在的问题是我的启动程序和我的扫描程序似乎在两个单独的目录中运行。现在我只是在我的桌面上有包含该程序的文件夹。当它运行时，它会搜索文件夹，但在打开文件时，它会尝试从同一文件夹的子文件夹目录中打开它们。我认为问题出在搜索上，因为当我将 .exe 复制到另一个位置（例如桌面）时，如果我的文档中碰巧有一个名称匹配的文件，它将从桌面打开文件夹。然而它不会

这是我现在拥有的代码：

```
#include <iostream>
#include <filesystem>
#include <vector>
#include <string>
#include <algorithm>
#include <fstream>
#include <Windows.h>
using namespace std;
using namespace std::tr2::sys;

bool ends_with(std::string& file, std::string& ext)
{
    return file.size() >= ext.size() && // file must be at least as long as ext
    // check strings are equal starting at the end
    std::equal(ext.rbegin(), ext.rend(), file.rbegin());
}

void wScan( path f, unsigned i = 0 )
{
directory_iterator d( f );
directory_iterator e;
vector<string>::iterator it2;
std::vector<string> extMatch;

//iterate through all files
for( ; d != e; ++d )
{
    string file = d->path();
    string ext = ".docx";
    //populate vector with matching extensions
    if(ends_with(file, ext))
    {
        extMatch.push_back(file);
    }

}
//counter to appear next to file names
int preI = -1;
//display all matching file names and their counter
for(it2 = extMatch.begin(); it2 != extMatch.end(); it2++)
{
    preI += 1;
    cout << preI << ". " << *it2 << endl;
}
//ask for file selection and assign choice to fSelection
cout << "Enter the number of your choice (or quit): ";
int fSelection;
cin >> fSelection;

cout << extMatch[fSelection] << endl;

//assign the selected file to a string, launch it based on that string and record and output time
    string s = extMatch[fSelection];
    unsigned long long start = ::GetTickCount64();
    system(s.c_str());
    unsigned long long stop = ::GetTickCount64();
    double elapsedTime = (stop-start)/1000.0;
    cout << "Time: " << elapsedTime << " seconds\n";

}

int main()
{

string selection;
cout << "0\. Microsoft word \n1\. Microsoft Excel \n2\. Visual Studio 11 \n3\. 7Zip \n4\. Notepad \n Enter the number of your choice (or quit): ";

cin >> selection;

path folder = "..";

    if (selection == "0")
{
    wScan ( folder );
}
    else if (selection == "1")
{
    eScan ( folder );
}
    else if (selection == "2")
{
    vScan ( folder );
}
    else if (selection == "3")
{
    zScan ( folder );
}
    else if (selection == "4")
{
    tScan ( folder );
}
} 
```

提前感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:37:13.507

如果目录不是当前目录，则必须在文件名之前添加目录路径才能访问目录中的文件。

假设程序在`C:/top-level`; 假设检查的目录是`C:/another-one`. 当目录迭代器返回时`somefile.docx`，您需要使用`C:/another-one/somefile.docx`来访问文件。

# android - Android - 让应用全屏显示没有标题和图标？

> ID：13243134
> 
> 赞同：1
> 
> 时间：2012-11-06T01:32:23.480
> 
> 标签：android, fullscreen

> **可能重复：**
> [在全屏模式下隐藏标题？](https://stackoverflow.com/questions/991764/hiding-title-in-a-fullscreen-mode)

我正在制作一个需要全屏显示的应用程序。我希望显示通知栏，但不显示标题栏或图标（我的构建目标是 4.0.3）。我试图把它全屏显示，但它保持不变。

有没有其他方法可以获取全屏应用布局/视图？

任何帮助将不胜感激！

我想隐藏 hello android 文本和图标

这是一个例子：

![在此处输入图像描述](../Images/6bf9b5970341bdd97fcf22af6dff69d4.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T01:35:24.217

在清单文件中，在您希望没有标题栏的每个活动选项卡下，放置：

```
 android:theme="@android:style/Theme.NoTitleBar" 
```

如果您也不想要通知栏，请使用：

```
 android:theme="@android:style/Theme.NoTitleBar.Fullscreen" > 
```

# ruby-on-rails - 有效地将数据库活动绘制为时间序列

> ID：13243137
> 
> 赞同：1
> 
> 时间：2012-11-06T01:32:40.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, performance, time-series

我正在开发一个系统，在过去一年中创建了 200,000 多条记录，我需要将它们的创建绘制在带有各种添加过滤器的时间序列上。目前，这需要执行大量`count`查询（每个月绘制 30 个）。应如何存储这些日期以获得最大速度？

`count`一个想法：将过去一个月中每天最常见的可视化数据存储在多个包含 s 的序列化字段中。每天更新`cron`并根据需要提供服务。（这些应该存储在哪里 - 一些新的数据库表或 Heroku cron 可访问的单独文件？）

# c# - 带字符串开关的类

> ID：13243138
> 
> 赞同：1
> 
> 时间：2012-11-06T01:32:48.147
> 
> 标签：c#

```
 class AddItemOption
{
    //Fields that contain class data
    string input = Console.ReadLine(); 
   //Methods that define class functionality
    public string myFunction(string Value)
    {
        switch (input)
        {
            case "Umbrella":
               Console.WriteLine("Umbrella is selected");
               break;
            case "Rain Coat":
               Console.WriteLine("Raincoat is selected");
               break;
            case "Boots":
                Console.WriteLine("Boots is selected"); 
                break;
            case "Hood":
                Console.WriteLine("Hood is selected");
                break;
            default:
                Console.WriteLine("Input not reconized, please choose another item");
                break;

        }

    } 
```

我收到错误“并非所有代码路径都返回值”。它来自 myFunction(string Value)。我不确定如何返回它，或者在参数中放入什么以使其工作。我也需要它下面的东西吗？我是新来的课程。请告诉我我是否做错了，或者这是否是 switch 语句应该去的地方！

```
 public AddItemOption(string input) 

        {

        } 
```

从 Shyju 我把它改成了：

```
class AddItemOptionOne
{
    //Fields that contain class data
    string input = Console.ReadLine(); 
   //Methods that define class functionality
    public string myFunction(string Value)
    {
        switch (input)
        {
            case "Key Chain":
               return "Key Chain is selected";
               break;
            case "Leather Armor":
               return "Leather Armor is selected";
               break;
            case "Boots":
                return "Boots is selected"; 
                break;
            case "Sword":
                return "Sword is selected";
                break;
            default:
                return "Input not reconized, please choose another item";
                break;

        }
    } 
```

但是，它不识别中断。“检测到无法访问的代码”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T01:34:43.840

您的方法的返回类型为`string`. 这意味着你的方法应该总是**返回**一些字符串。但是你没有返回一个字符串。相反，您正在使用方法将其写入控制台`WriteLine`。

所以改变

```
Console.WriteLine("Umbrella is selected"); 
```

至

```
return "Umbrella is selected"; 
```

**或者**

您可以将方法的返回类型更改为`void`.

```
 public void myFunction(string Value)
 {
   //your current fancy stuff here
   Console.WriteLine("My method dont have a return type");
 } 
```

**编辑**：根据问题编辑。

`return`语句将控制您的方法。这意味着下一行 ( `break`) 不会被执行。所以删除break语句。

```
 case "Key Chain":
           return "Key Chain is selected"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T01:36:56.693

嗯......你不会从你的函数中返回任何东西，所以把它改成

```
public void myFunction(string Value) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T01:46:43.540

尝试这个：

```
class AddItemOptionOne
{
    //Methods that define class functionality
    public string myFunction(string input)
    {
        string result = string.Empty;

        switch (input)
        {
            case "Key Chain":
                result = "Key Chain is selected";
                break;
            case "Leather Armor":
                result = "Leather Armor is selected";
                break;
            case "Boots":
                result = "Boots is selected";
                break;
            case "Sword":
                result = "Sword is selected";
                break;
            default:
                result = "Input not reconized, please choose another item";
                break;
        }

        return result;
    }
} 
```

# iis - 在 w2k3 中设置全局 MIME 类型

> ID：13243139
> 
> 赞同：3
> 
> 时间：2012-11-06T01:32:54.803
> 
> 标签：iis, types, mime

在 IIS 6.0 中设置 MIME 类型时，我知道要全局设置它们，我右键单击网站/属性。如果我有一个干净的服务器，这很有用，因为我创建的每个新网站都会继承这些属性。

我目前遇到的问题是我有一个包含 200 个现有网站的服务器。如果我添加一个全局 MIME 类型，我会得到两个继承弹出窗口（一个用于 UNC 密码，一个用于 MIME 类型）。如果我选择其中任何一个并单击“确定”，我的全局 MIME 类型将覆盖我设置的任何自定义 MIME 类型。

更简短的问题：我需要添加适用于 IIS 6.0 下的所有现有站点的新 MIME 类型，**而不会**覆盖或删除单个站点可能已经设置的任何现有自定义 MIME 类型。有没有办法做到这一点？

# linker - IAR 重定位失败错误

> ID：13243140
> 
> 赞同：1
> 
> 时间：2012-11-06T01:33:04.523
> 
> 标签：linker, embedded, arm, iar

有一个项目成功编译链接并在设备上运行。但是在告诉链接器它应该将应用程序代码的一部分放到 ROM 内存而不是 SDRAM 之后，我在链接步骤中收到以下错误：

> 错误[Lp002]：重定位失败：值超出范围或非法：0x60000545 种类：R_ARM_PREL31[0x2a] 位置：0xa0000030 模块：I:\Project\Debug\Obj\fileOper.o 部分：128 (.ARM.exidx) 偏移量： 0x0 目标：0x00000574 “SECTION_FILEOP_87”模块：I:\Project\Debug\Obj\fileOper.o 部分：104 (SECTION_FILEOP) 偏移量：0x4f4

我已阅读 IAR 的 C/C++ 指南。但它没有提供关于这个错误的足够好的解释。所以即使阅读手册我也无法得到这个错误的原因。任何人都可以帮助解决这个问题吗？实际上 IAR C/C++ 开发人员指南说：

> 对于每条不能正确重定位的指令，ILINK 都会产生一个重定位错误。这可能发生在目标无法触及或类型不兼容或许多其他原因的指令中。然后它提供了一个错误作为示例，这与我的情况不同。

编辑 1：我创建了一个重现相同错误的小项目，它仅包含 fileOper.cpp 和 main.cpp 文件。

**用于告诉链接器如何将节放入内存**的 ICF 文件：****

 **> 定义符号 intvec_start = 0x10000000;
> 
> / *-内存区域-* /
> 
> / -*闪存*-/
> 
> 定义符号 FLASH_ROM_start = 0x00000000；
> 
> 定义符号 FLASH_ROM_end = 0x0007FFFF;
> 
> /**内部内存**/
> 
> 定义符号 RAM_start = 0x10000000；
> 
> 定义符号 RAM_end = 0x10017FFF;
> 
> /* *SDRAM* */
> 
> 定义符号 SDRAM_start = 0xA0000000；
> 
> 定义符号 SDRAM_end = 0xA1FFFFFF；
> 
> / -*尺寸*- /
> 
> 定义符号 size_stack = 0x4000;
> 
> 定义符号 size_heap = 0x2000;
> 
> 定义 size = 4G 的内存 mem；
> 
> 定义区域 FLASH_region = mem:[从 FLASH_ROM_start 到 FLASH_ROM_end];
> 
> 定义区域 RAM_region = mem:[从 RAM_start 到 RAM_end];
> 
> 定义区域 SDRAM_region = mem:[从 SDRAM_start 到 SDRAM_end]；
> 
> 定义块 CSTACK 对齐 = 8, size = size_stack { };
> 
> 定义块 HEAP 对齐 = 8, size = size_heap { };
> 
> 用packing = zeros { readwrite }复制初始化；
> 
> 不要初始化 { section .noinit };
> 
> 放在地址 mem: intvec_start { section .intvec };
> 
> 放置在 FLASH_region { readonly section .cstartup } 的开头；
> 
> 放置在 RAM_region { block CSTACK };
> 
> 放置在 SDRAM_region { 只读 }
> 
> 除了 {readonly section FILEOP };
> 
> 放置在 SDRAM_region { 读写 };
> 
> 放入 SDRAM_region {块 HEAP}；
> 
> 放置在 FLASH_region { readonly section FILEOP };

**fileOper.cpp：**我已经更改了它，但它仍然重现相同的错误。

```
#include "fileOperbug.h"
#include <string>

char *fgets( char *str, int num, std::string *stream ) {

  char *pointer = 0;
  return pointer;
}

std::string *fopen(const char *name, const char *mode) {
  std::string *str = new std::string();
  str->assign("");
  return str;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T07:30:24.760

我已经解决了这个问题。使用 IAR Embedded Workbench 时：项目选项 -> C/C++ 编译器 -> 语言 1 选项卡。在“C++ 方言”中，有一个名为“有例外”的复选框被选中。选中“有例外”复选框时，会发生链接阶段的错误。所有使用异常的代码都必须加载到 ROM。否则应取消选中“有例外”。**

# c# - 为 mvc 网站上传和存储视频

> ID：13243144
> 
> 赞同：0
> 
> 时间：2012-11-06T01:33:58.093
> 
> 标签：c#, asp.net, asp.net-mvc, file-upload

我试图想出一种方法来允许用户将他或她制作的视频上传到我正在处理的应用程序中。我的问题是如何或最好的方法是什么。我听说有人将视频转换为二进制然后保存到数据库，但我也听说不建议这样做。如何保存这些正在上传的视频。例如，YouTube 如何处理他们的视频？感谢任何提示。

也许这个？

```
 System.Web.UI.WebControls.FileUpload 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:42:39.887

您通常不会在 MVC 应用程序中使用 WebForms 控件（取决于此处 MVC 的意图），因此具有文件类型的基本 HTML 输入元素`<input type="file" name="video">`应该可以满足您的需要。至于存储，有几种可能的解决方案，但所有答案都是主观的，需要根据应用程序的需求（扩展、性能、可用​​性、复制、安全性等）进行定制。作为第一轮解决方案，它应该将文件存储在磁盘上并非不可能，但这实际上取决于您的环境需求和功能。

# bayesian - 多层贝叶斯网络

> ID：13243145
> 
> 赞同：1
> 
> 时间：2012-11-06T01:34:09.127
> 
> 标签：bayesian, bayesian-networks

所以我正在尝试解决贝叶斯网络的问题。我知道某些事件的条件概率，比如会下雨。假设我从四个传感器（A1 - A4）中的每一个测量（布尔）值。我知道下雨的概率，并且在给定每个传感器的测量值的情况下，我知道下雨的概率。

现在我添加了一个新的转折。A4 不再可用，但 B1 和 B2 可用（它们也是布尔传感器）。给定 A4 的测量值，我知道 B1 和 B2 的条件概率。如何将这些概率合并到我的贝叶斯网络中以替换 A4 中丢失的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T11:30:57.227

您的问题非常适合多实体贝叶斯网络 (MEBN)。这是使用一阶逻辑 (FOL) 对标准 BN 的扩展。它基本上允许根据手头的具体情况添加和/或删除节点。您可以根据当前可用的知识定义一个用于动态创建 BN 的模板。

网上有几篇关于它的论文。对这项工作的经典参考是“Multi-Entity Bayesian Networks without Multi-Tears”。

我们在 UnBbayes 中实现了 MEBN。您可以按照@ [http://sourceforge.net/p/unbbayes/discussion/156015/thread/cb2e0887/](http://sourceforge.net/p/unbbayes/discussion/156015/thread/cb2e0887/)的说明获取一份副本。一个例子可以在论文“Probabilistic Ontology and Knowledge Fusion for Procurement Fraud Detection in Brazil”@ [http://link.springer.com/chapter/10.1007/978-3-642-35975-0_2](http://link.springer.com/chapter/10.1007/978-3-642-35975-0_2)中看到。

如果你对它感兴趣，我以后可以给你更多的指点。

干杯，隆美尔

# c# - 从另一个类调用 ListView 更新函数......可能吗？

> ID：13243147
> 
> 赞同：0
> 
> 时间：2012-11-06T01:34:21.033
> 
> 标签：c#, class, delegates

如果，假设我有一个带有 ListView 和 Update() 函数的 FormA。然后我也有一个带有函数 A() 的数学类，它有一些魔力......可以使用委托从 A() 调用 Update() 吗？或者，还有更好的方法？我已经意识到从另一个班级更新 gui 表单是有风险的......提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:50:18.667

是的。只要数学课不知道它的实际调用是什么，它就没有那么危险。您只需通过将其指向表单中所需的功能来给它一个粗略的想法：

```
public class MathClass {
    public Action FunctionToCall { get; set; }

    public void DoSomeMathOperation() {
        // do something here.. then call the function:

        FunctionToCall();
    }
} 
```

在你的表格中，你会这样做：

```
// Form.cs
public void Update() {
     // this is your update function
}

public void DoMathStuff() {
    MathClass m = new MathClass() { FunctionToCall = Update };
    m.DoSomeMathOperation(); // MathClass will end up calling the Update method above.
} 
```

您的 MathClass 调用 Update，但它不知道告诉它调用 Update 的对象或 Update 在哪里......这比将对象紧密耦合在一起更安全。

# r - 滚动申请时间序列

> ID：13243148
> 
> 赞同：10
> 
> 时间：2012-11-06T01:34:31.273
> 
> 标签：r, zoo

我正在尝试计算滚动 20 周期的历史波动率。我接受每日回报：

```
ret<-ROC(data1) 
```

然后我使用 rollapply 获取每列的 20 天 HV：

```
vol<-rollapply(ret,20,sd,by.column=T,fill=NA) 
```

问题是 vol 中的观察结果在十天后开始出现，这是错误的，因为我指定了 20。

为了演示，这里是数据示例：

```
0.000000000, 0.005277045, 0.023622047, 0.002564103,-0.002557545, -0.020512821,
0.007853403,-0.012987013,  0.007894737,  0.015665796,  0.000000000, -0.002570694,
0.002577320, -0.015424165, 0.002610966,  0.010416667,  0.002577320,  0.015424165, 
0.000000000, -0.002531646, -0.002538071, 0.030534351,  0.014814815, -0.007299270,
-0.009803922, -0.012376238,  0.002506266, -0.015000000,-0.002538071,  0.002544529 
```

假设上面的数据存储在 x 中，那么：

```
rollapply(x,20,sd,fill=NA) 
```

将在第 10 行而不是 20 行产生第一次观察。sd 也是错误的。

我应该在这里遗漏一些东西......

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-06T01:43:33.787

您需要使用`align='right'`而不是使用默认值`align='center'`，或者使用默认值`rollapply`的`rollapplyr`包装器而不是使用`align='right'`。

来自`?rollapply`：

> align 指定与观察的滚动窗口相比，结果的索引是左对齐还是右对齐或居中（默认）。仅当 width 表示宽度时才使用此参数。

虽然，为此，我个人会使用`runSD`TTR[**包**](http://cran.r-project.org/package=TTR)，因为它使用编译代码并且会更快。

其中任何一个都应该符合您的预期，但第二个会更快。

```
library(zoo)
rollapply(x, 20, sd, fill=NA, align='right')

library(TTR)
runSD(x, 20) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-01-27T17:10:55.087

我推荐[runner](https://gogonzo.github.io/runner/articles/apply_any_r_function.html)`runner`包中的函数以在滚动窗口上应用任何 R 函数。下面的输出与.`runner``zoo`

```
library(runner)

runner(
  x, 
  function(x) sd(x),
  k = 20, 
  na_pad = TRUE
) 
```

* * *

`runner`可以重现`zoo`输出，还可以选择处理不等间距的数据和其他选项（更多信息请[参阅文档和小插图](https://gogonzo.github.io/runner/index.html)）。

```
library(runner)
library(zoo)

x <- c(0.000000000, 0.005277045, 0.023622047, 0.002564103,-0.002557545, -0.020512821,
       0.007853403,-0.012987013,  0.007894737,  0.015665796,  0.000000000, -0.002570694,
       0.002577320, -0.015424165, 0.002610966,  0.010416667,  0.002577320,  0.015424165, 
       0.000000000, -0.002531646, -0.002538071, 0.030534351,  0.014814815, -0.007299270,
       -0.009803922, -0.012376238,  0.002506266, -0.015000000,-0.002538071,  0.002544529)

identical(
  runner(x, sd, k = 20, na_pad = TRUE),
  rollapply(x, 20, sd, fill = NA, align = "right")
)

# centered alignment
identical(
  runner(x, sd, k = 20, lag = -10, na_pad = TRUE),
  rollapply(x, 20, sd, fill = NA, align = "center")
) 
```

# java - 如果已设置，如何修改 http 标头？

> ID：13243149
> 
> 赞同：3
> 
> 时间：2012-11-06T01:34:41.450
> 
> 标签：java, servlet-filters

我需要根据页面内容修改这个标题。

例如：这是一个人为的例子——因为它是被要求的。我无法深入了解特定标头的详细信息 servlet/page 根据访问的后端系统设置了标头 specialheader=xyz。如果设置了这个特殊标题，过滤器会将其修改为 xyz+abc。如果未设置标头，过滤器会将其设置为 123。

我可以使用过滤器创建一个包装`HttpServletResponse`并在返回的途中对其进行修改。但是，我对细节很模糊。

我知道我必须在我的过滤器完成工作之前阻止输出被发送回客户端。为了做到这一点，我需要自己传递它`OutputStream`并缓冲输出吗？

我真的需要这样做吗？我可以避免缓冲可能会给服务器带来负载的输出吗

基本问题是 - 如果我需要在 doFilter 调用之后修改标头，我需要做的最低限度是多少？是否有其他方法可以防止输出被提交，例如过度刷新等，？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T18:45:36.827

只需实现 getHeader 和 getHeaderNames 以忽略要丢弃的标头并将 Wrapper 设置为过滤器。

```
import java.io.ByteArrayOutputStream;
import java.io.PrintWriter;
import java.util.Collection;

import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpServletResponseWrapper;

public class GenericResponseWrapper extends HttpServletResponseWrapper {

    public GenericResponseWrapper(final HttpServletResponse response) {
        super(response);    
    }

    @Override
    public String getHeader(String name) {
        // TODO Auto-generated method stub
        return super.getHeader(name);
    }
    @Override
    public Collection<String> getHeaderNames() {
        // TODO Auto-generated method stub
        return super.getHeaderNames();
    }
}

public class Wrapper implements Filter {

    @Override
    public void doFilter(final ServletRequest request, final ServletResponse response, final FilterChain chain) throws IOException, ServletException {
        final HttpServletRequest httpRequest = (HttpServletRequest) request;
        final HttpServletResponse httpResponse = (HttpServletResponse) response;
            final GenericResponseWrapper wrapper = new GenericResponseWrapper(httpResponse);
            wrapper.getResponse().setCharacterEncoding("UTF-8");

            chain.doFilter(request, wrapper);
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-09T06:48:52.623

每当我搜索“如何修改已设置的 servlet 响应中的标头”时，这篇文章首先出现，即使问题描述不同，我（可能像许多其他人一样）想知道如何修改 servlet 响应中的标头已经设置好了。在这方面，我想为正在寻找的人发布我的答案（而不是写一个问题/答案）。

```
public class SameSiteCookieHeaderFilter implements Filter {

private static final String LOCALE_ID_COOKIE = "locale";

private static final String SET_COOKIE_HEADER = "Set-Cookie";

@Override
public void destroy() {
}

@Override
public void doFilter(final ServletRequest servletRequest, final ServletResponse servletResponse,
                     final FilterChain filterChain) throws IOException, ServletException {
    final HttpServletRequest httpServletRequest = (HttpServletRequest) servletRequest;
    final HttpServletResponse httpServletResponse = (HttpServletResponse) servletResponse;
    final Collection<String> setCookieHeaders = httpServletResponse.getHeaders(SET_COOKIE_HEADER);

    for (final String setCookieHeader : setCookieHeaders) {
        httpServletResponse.addHeader(SET_COOKIE_HEADER, setCookieHeader + "; Secure; SameSite=None");
    }

    if (setCookieHeaders.size() == 0) {
        final Cookie[] cookies = httpServletRequest.getCookies();

        for (final Cookie cookie : cookies) {
            if (cookie.getName().equals(LOCALE_ID_COOKIE)) {
                httpServletResponse.addHeader(SET_COOKIE_HEADER, buildSessionIdCookie(cookie.getValue()));
            }
        }
    }

    filterChain.doFilter(servletRequest, servletResponse);
}

@Override
public void init(FilterConfig filterConfig) throws ServletException {
}

private String buildSessionIdCookie(final String value) {
    return LOCALE_ID_COOKIE + "=" + value + "; " + "Path=/; " + "SameSite=None; " + "Secure; HttpOnly;";
} 
```

web.xml

```
<filter>
    <filter-name>SameSiteCookieHeaderFilter</filter-name>
    <filter-class>de.chemmedia.kw.core.filter.SameSiteCookieHeaderFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>SameSiteCookieHeaderFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

所以它的作用是检测`Set-Cookie`标头并添加属性，或者在每个响应中获取`SameSite=None`Cookie 和构造。这样，就会有两个具有相同值的标头，第二个将覆盖前一个，**或修改响应中已经存在的标头**。`Set-Cookie``SameSite=None``Set-Cookie`

```
Set-Cookie: locale=EN; Path=/; HttpOnly;
Set-Cookie: locale=EN; Path=/; SameSite=None; Secure; HttpOnly; 
```

仅供参考：tomcat 7.0.104、Servlet 3.1 和 Spring 4.2.x

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2022-03-03T06:07:08.560

您可以通过覆盖 HttpServletRequestWrapper 的 getHeader 方法来执行以下操作。

```
@Override
public Enumeration<String> getHeaders(String name) {
    List<String> values = Collections.list(super.getHeaders(name));
    if (headerMap.containsKey(name)) {
        if (name.equals("Header_attibutes_needs_to_be_replace")) {
            values.clear();
        }
        values.add(headerMap.get(name));
    }
    return Collections.enumeration(values);
} 
```

在您的过滤器中，您设置了新值

```
 wrappedRequest = new HeaderMapRequestWrapper(request);
 wrappedRequest.addHeader("Header_attibutes_needs_to_be_replace", value); 
```

# google-nativeclient - 为不同的操作系统更新 Chrome NaCl SDK

> ID：13243153
> 
> 赞同：1
> 
> 时间：2012-11-06T01:35:03.277
> 
> 标签：google-nativeclient

我需要在我的 Mac Mini 上下载（更新）我的 NaCl 工具链，但我所在的地方无法访问互联网。我可以将我的 Windows 笔记本电脑连接到 Wifi 热点，但我看不到任何选项可以为不同的操作系统下载胡椒版本。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T07:46:11.677

NaCl 更新程序使用此文件来搜索下载：

[http://commondatastorage.googleapis.com/nativeclient-mirror/nacl/nacl_sdk/naclsdk_manifest2.json](http://commondatastorage.googleapis.com/nativeclient-mirror/nacl/nacl_sdk/naclsdk_manifest2.json)

如果您在文本编辑器中检查文件，您将看到指向不同操作系统版本的链接，您可以使用任何计算机下载它们。

# ruby-on-rails - 未执行 gem 中定义的迁移

> ID：13243160
> 
> 赞同：0
> 
> 时间：2012-11-06T01:36:08.393
> 
> 标签：ruby-on-rails, gem, rails-migrations

我向（现有）gem 添加了一个新迁移，并且在运行*rake db:migrate*命令时，迁移被完全忽略。*我尝试使用rake db:migrate:redo VERSION=[my migration version]*强制它运行，但它报告它找不到该版本的迁移。

我正在使用带有 rails 3.1.3 的 ruby​​ 1.9.2p320，并且由于我直接从文件系统中使用它，因此使用错误的 gem 版本应该没有问题（尽管我尝试通过捆绑安装/更新） .

另外，我不确定在 gem 上定义迁移是否是正确的方法，但由于这个库与 rails 站点高度耦合，特别是因为它是**遗留代码**，除非绝对必要，否则我不会将其移走。

**编辑：** gem 中的迁移被定义为它们通常在任何 rails 应用程序中定义：

```
gem_folder
   |
   |- db
  ...  |
       |- migrate
            |
            |- <migration files>
                     ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:57:54.313

我发现了问题：在 gem 中专门定义了一个 rake 任务来运行这些迁移。包括代码以防万一它对其他人有用。

```
namespace :db do
  namespace :migrate do
    description = "Migrate the database through scripts in <gem name>/db/migrate and update db/schema.rb by invoking db:schema:dump. Target specific version with VERSION=x. Turn off output with VERBOSE=false."

    desc description
    task :admin => :environment do
      ActiveRecord::Migration.verbose = ENV["VERBOSE"] ? ENV["VERBOSE"] == "true" : true
      if Gem.searcher.find('<gem name>')
        dir = "#{Gem.searcher.find('<gem name>').full_gem_path}/db/migrate/"
        ActiveRecord::Migrator.migrate(dir, ENV["VERSION"] ? ENV["VERSION"].to_i : nil)
      else
        raise "Unable to locate <gem name> gem to run admin migrations"
      end
      Rake::Task["db:schema:dump"].invoke if ActiveRecord::Base.schema_format == :ruby
    end
  end
end 
```

# jquery - JQuery Mobile - 屏幕高度与桌面/三星 Galaxy 选项卡上的实际浏览器高度不同

> ID：13243161
> 
> 赞同：1
> 
> 时间：2012-11-06T01:36:10.923
> 
> 标签：jquery

我需要页面的内容部分来占据页眉和页脚留下的内容。虽然页眉和页脚工作正常，但我的内容占用了大约 42 像素的屏幕。打印 $(window).height() 的高度时，它给了我 221 像素。打印 $(document).height() 的高度时，它给了我 300 像素。这还可以吗？？？

我在 Windows 8 下的 Google Chrome、IE 10 上都试过了。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <title>Sometitle</title>

    <!-- Setting viewport to match the device width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- JQuery libs imported -->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            var wnw = parseFloat($(window).width());
            var wnh = parseFloat($(window).height());
            alert(wnw + " " + wnh);

            var scw = parseFloat($(document).width());
            var sch = parseFloat($(document).height());

            alert(scw + " " + sch);
        });
    </script>
</head>
</head>
<body>
    <div id="firstpage" data-role="page" data-theme="a">
        <div data-role="header" data-position="fixed">
            <h1>Sample</h1>
        </div>
        <div data-role="content" style="background: url('./images/someimg.jpg'); background-size: 100% 100%;">

        </div>
        <div data-role="footer" data-position="fixed">
            <h1>Footer</h1>
        </div>
    </div>
</body>
</html> 
```

我看过很多关于相关问题的帖子，其中一些类被分配了 100% 的高度或最小高度，但似乎没有一个对我有用。

谢谢。

# python - 如何在python中用一个变量替换%s

> ID：13243163
> 
> 赞同：2
> 
> 时间：2012-11-06T01:36:25.757
> 
> 标签：python

我有一个字符串

```
strTemp='i don\'t want %s repeat the %s variable again %s and again %s'%('aa','aa','aa','aa') 
```

我想用'aa'替换所有的%s，所以我必须重复'aa'很多次，我怎么告诉程序我想用同一个变量替换所有的%s，所以我需要't 键入变量的次数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T01:38:42.417

不鼓励使用 % 运算符。改为使用`str.format`。

```
strTemp='i don\'t want {0} repeat the {0} variable again {0} and again {0}'.format('aa') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T01:37:46.753

您可以使用命名的格式化参数语法：

```
strTemp='i don\'t want %(key)s repeat the %(key)s variable again %(key)s and again %(key)s' % {
    'key': 'replacement value',
} 
```

不一定会好很多，因为您必须重复一个键四次，但如果您的替换值很长，或者是一个您*真的*不想多次执行的具有副作用的计算，这是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T01:58:14.793

如果您确实有很多重复并且不想输入`{0}`，或者`%(var)s`您可以考虑使用很少使用的（占位符-）char，它会被替换，例如：

```
p='µ µµ µµµ µµµµ µµµµµ {1}'.replace('µ','{0}').format(' muahaha ', 'duh') 
```

或对于单个替换变量：

```
strTemp='i don\'t want µ repeat the µ variable again µ and again µ'.replace('µ','aa') 
```

# javascript - 小胡子模式下划线模板中的循环

> ID：13243170
> 
> 赞同：1
> 
> 时间：2012-11-06T01:37:27.850
> 
> 标签：javascript, templates, underscore.js

我已将下划线设置为小胡子模式，如下所示：

```
_.templateSettings = {
  interpolate : /\{\{(.+?)\}\}/g
}; 
```

我有以下模板的一部分：

```
<script id="detail_view" type="text/template">
    <% for(registration in REGISTRATION_NUMBERS){ %>
        <tr>
            <td>{{registration.TYPE}}</td>
            <td>{{registration.VALUE}}</td>
        </tr>
<% } %>
</script> 
```

这导致“未定义注册”。使用`this`会导致整个部分在模板中输出。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T02:46:07.253

你有两个问题，一个你知道，一个你不知道。

第一个问题是，`_.templateSettings`当您只想替换其中一个时，您正在替换所有三个。你要这个：

```
_.templateSettings.interpolate = /\{\{(.+?)\}\}/g; 
```

这将留下`evaluate`和`escape`部分[`_.templateSettings`](http://underscorejs.org/#template)单独。你在做什么是一样的：

```
_.templateSettings = {
  interpolate : /\{\{(.+?)\}\}/g,
  evaluate    : undefined,
  escape      : undefined
}; 
```

所以你最终没有 a `evaluate`。顺便说一句，您可以查看`source`已编译模板函数的属性以查看您的模板编译为的 JavaScript，JavaScript 看起来并不容易，但查看它可以帮助解决此类问题。

您不知道的问题是`for...in`循环用于迭代对象的属性，而不是数组中的值。这意味着这`registration`将是您循环中的字符串`'0'`, `'1'`, ... ，这不是您想要的。`REGISTRATION_NUMBERS`如果是数组，您的模板中需要这样的东西：

```
<% for(var i = 0; i < REGISTRATION_NUMBERS.length; ++i) { %>
    <% var registration = REGISTRATION_NUMBERS[i]; %>
    <tr>
        <td>{{registration.TYPE}}</td>
        <td>{{registration.VALUE}}</td>
    </tr>
<% } %> 
```

或者，因为无论如何你都有下划线，你可以使用[`_.each`](http://underscorejs.org/#each)：

```
<% _(REGISTRATION_NUMBERS).each(function(r) { %>
    <tr>
        <td>{{r.TYPE}}</td>
        <td>{{r.VALUE}}</td>
    </tr>
<% }) %> 
```

演示：http: [//jsfiddle.net/ambiguous/jfckA/](http://jsfiddle.net/ambiguous/jfckA/)

# php - 读取不同目录php中的文件

> ID：13243177
> 
> 赞同：1
> 
> 时间：2012-11-06T01:38:13.357
> 
> 标签：php, variables, file-io

我正在尝试从比脚本低 2 个文件夹的目录中读取文件。当文件位于同一目录中时，代码工作正常，但当文件较低时，每次都会失败。这是我的代码

```
<?php
$logfile = '/pass/uploads/test.aes';
$my_file = file_get_contents("$logfile");
echo $my_file;
?> 
```

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T01:39:50.637

以 开头的文件名`/`是绝对名称，并且相对于文件系统的根目录。

如果它是相对于当前目录的名称，请删除开头的斜杠。或者，添加`__DIR__`到名称的开头，例如`__DIR__ . '/pass/uploads/test.aes'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T02:31:10.020

试试这个代码

```
<?php
    $logfile = '../../pass/uploads/test.aes';
    $my_file = file_get_contents($logfile);
    echo $my_file;
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T01:40:21.187

您应该只能`../../`在路径的开头使用两个目录，除非这些目录的权限设置不正确。

编辑：正如 cHao 所说，添加`/`到路径将转到文件系统的根目录，这几乎肯定会导致权限错误。

# excel - 根据另一个单元格值从excel表中提取

> ID：13243178
> 
> 赞同：1
> 
> 时间：2012-11-06T01:38:20.250
> 
> 标签：excel, excel-formula

我有一个表格，**左侧是温度**列表，**顶部是压力高度**列表，然后它的值基于表中的这两件事。

我如何制作一个公式来查看另外两个具有温度的单元格和另一个具有压力高度的单元格，然后查看表格并找到这两个值在表格上相遇的位置，并给出这两个单元格中的内容遇见？

例如，

我有两个单元格，一个单元格的温度值为 10，另一个单元格的压力高度值为 1000，然后查看表格以找到 temp 10 和按 alt 1000 相遇的单元格，并在不同的单元格中给出值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:51:57.943

你可以`INDEX`在它的`Array`模式下使用，像这样

```
=INDEX(DataRange,MATCH(Temperature,TemperatureRange,0),MATCH(Pressure,PressureRange,0)) 
```

注意：这仅在温度和压力值明确存在于表中时才有效。如果你想在表格值之间进行插值，它会变得相当复杂。

# java - 这个类不是Java Bean吗？

> ID：13243181
> 
> 赞同：0
> 
> 时间：2012-11-06T01:38:46.070
> 
> 标签：java, javabeans, axis2

我正在尝试使用现有的 Java 类来创建使用 Axis2 的 Web 服务。

当我向 Web 服务发送请求时，Axis2 显示以下消息：

```
[01 Nov 2012 16:37:05:244] classloader.BeanInfoCache: Unable to locate a BeanInfo cache for class ems.shared.Fti (stopClass=class java.lang.Object). This will negatively affect performance! 
```

我不确定这个错误是什么意思，但这让我想知道 ems.shared.Fti 类是否不能满足成为 Java Bean 的所有要求。你能看出这门课有什么问题吗？

```
package ems.shared;

import java.io.Serializable;

public class Fti implements Serializable
{
    private static final long serialVersionUID = 7476379431395094501L;

    public static final Fti UNDEFINED = new Fti(-1);

    public static final Fti BROADCAST = new Fti((int) (Math.pow(2, 20) - 2));

    private int fti;

    public Fti() {

    }

    public Fti(int fti)
    {
        this.fti = fti;
    }

    public Fti(String fti)
    {
        try
        {
            this.fti = Integer.parseInt(fti);
        }
        catch (NumberFormatException e)
        {
            throw new IllegalArgumentException(fti + " is not a valid FTI");
        }
    }

    public void setFti(int fti) {
        this.fti = fti;
    }

    public int getFti() {
        return fti;
    }

    public int asInt()
    {
        return this.fti;
    }

    @Override
    public String toString()
    {
        return String.valueOf(fti);
    }

    @Override
    public int hashCode()
    {
        final int prime = 31;
        int result = 1;
        result = prime * result + fti;
        return result;
    }

    @Override
    public boolean equals(Object obj)
    {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        Fti other = (Fti) obj;
        if (fti != other.fti)
            return false;
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:40:00.413

BeanInfo 实例由 JavaBean 内省创建（请参阅[JRE Javadoc](http://docs.oracle.com/javase/6/docs/api/java/beans/Introspector.html#getBeanInfo%28java.lang.Class,%20java.lang.Class%29)）。正如 duffymo 所指出的，可以将 BeanInfo 与 JavaBean 一起显式提供，在这种情况下，内省器只需加载该 BeanInfo。这主要用于 UI 组件，不是强制性的。对于没有显式 BeanInfo 的 JavaBean，内省器只需使用反射构造 BeanInfo 实例。这就是你的情况。

关键是 JRE 不缓存 BeanInfo 对象。原因是它无法做到这一点而不会有导致类加载器泄漏的风险（请参阅[IZ67457](http://www-01.ibm.com/support/docview.wss?uid=swg1IZ67457)以获取由于尝试在某些版本的 IBM JRE 中缓存这些对象而导致的错误示例）。但是，使用反射构造一个 BeanInfo 对象是一项代价高昂的操作。因此 Axis2 有自己的 BeanInfo 缓存。该缓存经过精心设计，以避免类加载器泄漏。

您收到的消息（顺便说一句是警告，而不是错误）只是说明在您的情况下 Axis2 无法使用缓存的 BeanInfo 对象。这有两个可能的原因：要么您处于无法缓存 BeanInfo 对象而不会导致类加载器泄漏的场景，或者您处于可以缓存 BeanInfo 对象而不会导致类加载器泄漏的场景但这不受 BeanInfo 缓存的支持（即您在缓存实现中遇到了限制）。

为了进一步分析这一点，您需要确定哪个类加载器加载 Fti 类，哪个类加载器加载 BeanInfoCache 类（即axis2-kernel JAR）以及这些类加载器如何相互关联（例如它们是否由父级关联） - 子女关系）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:44:52.087

BeanInfo 是独立的。它最初是 JavaBean 告诉 Bean shell 自身的机制，类似于 Visual Basic：

[http://docs.oracle.com/cd/E23095_01/Platform.93/ATGProgGuide/html/s0503beaninfoexample01.html](http://docs.oracle.com/cd/E23095_01/Platform.93/ATGProgGuide/html/s0503beaninfoexample01.html)

# actionscript-3 - as3 幻灯片无法加载

> ID：13243182
> 
> 赞同：0
> 
> 时间：2012-11-06T01:38:50.763
> 
> 标签：actionscript-3, actionscript

几个月来，这个问题一直困扰着我。我不知道为什么我的网站上有我的背景：

[www.the-ruck.us](http://www.the-ruck.us)

无法正确加载。

我知道代码有效，因为当我在计算机上运行它时，一切正常。但是，当我将它发布到网络并浏览到我的页面时，幻灯片只是保持空白。

这是我使用的 XMLLoader 类的[API](https://www.greensock.com/as/docs/tween/com/greensock/loading/XMLLoader.html)

这是代码：

```
var slideshowXMLLoader:XMLLoader = new XMLLoader("slideshow.xml", {autoDispose:true, onComplete:LoadXML});

slideshowXMLLoader.load();

function LoadXML(e:Event) {
        slideshowXML = new XML(e.target.content);
        parse(slideshowXML);
}

function parse(ssXML:XML) { wallpaperLinks = slideshowXML.img.attributes(); }

function loadFirstPaper() {
    ticker.addEventListener(TimerEvent.TIMER, changePaper);
    TweenMax.to(landing, .5, {alpha:0, ease:Quint.easeOut});
    TweenMax.to(bloomer, 1, {alpha:0, ease:Quint.easeOut});
    loadWallpaper(randomNumber());
}

function loadWallpaper(i:Number) {
    paperCounter = i;
    var loader:Loader = new Loader();
    var req:URLRequest = new URLRequest(wallpaperLinks[paperCounter]);
    loader.load(req);
    loader.contentLoaderInfo.addEventListener(Event.COMPLETE, fadeIn);
    }

function fadeIn(e:Event) { 
    if (!isPaused) ticker.start();
    var temp = e.target.content;
    wallpaper.addChild(temp);
    TweenMax.from(temp, fadeTime, {alpha:0, ease:Quint.easeOut});
    }

function changePaper(e:Event) {
    ticker.stop();
    loadWallpaper(randomNumber());
    }

function randomNumber():Number
    { return Math.floor(Math.random() * 53); }

} 
```

slideshow.xml 包含以下内容：

```
<wallpapers>
    <img link="imgs/one.jpg"></img>
    <img link="imgs/two.jpg"></img>
    <img link="imgs/three.jpg"></img>
    <img link="imgs/four.jpg"></img>
    <img link="imgs/five.jpg"></img>
    <img link="imgs/six.jpg"></img>
    <img link="imgs/seven.jpg"></img>
    <img link="imgs/eight.jpg"></img>
    <img link="imgs/nine.jpg"></img>
    <img link="imgs/ten.jpg"></img>
    <img link="imgs/eleven.jpg"></img>
    <img link="imgs/twelve.jpg"></img>
    <img link="imgs/thirteen.jpg"></img>
    <img link="imgs/fourteen.jpg"></img>
    <img link="imgs/fifteen.jpg"></img>
    <img link="imgs/sixteen.jpg"></img>
    <img link="imgs/seventeen.jpg"></img>
    <img link="imgs/eighteen.jpg"></img>
    <img link="imgs/nineteen.jpg"></img>
    <img link="imgs/twenty.jpg"></img>
    <img link="imgs/twentyone.jpg"></img>
    <img link="imgs/twentytwo.jpg"></img>
    <img link="imgs/twentythree.jpg"></img>
    <img link="imgs/twentyfour.jpg"></img>
    <img link="imgs/twentyfive.jpg"></img>
    <img link="imgs/twentysix.jpg"></img>
    <img link="imgs/twentyseven.jpg"></img>
    <img link="imgs/twentyeight.jpg"></img>
    <img link="imgs/twentynine.jpg"></img>
    <img link="imgs/thirty.jpg"></img>
    <img link="imgs/thirtyone.jpg"></img>
    <img link="imgs/thirtytwo.jpg"></img>
    <img link="imgs/thirtythree.jpg"></img>
    <img link="imgs/thirtyfour.jpg"></img>
    <img link="imgs/thirtyfive.jpg"></img>
    <img link="imgs/thirtysix.jpg"></img>
    <img link="imgs/thirtyseven.jpg"></img>
    <img link="imgs/thirtyeight.jpg"></img>
    <img link="imgs/thirtynine.jpg"></img>
    <img link="imgs/fourty.jpg"></img>
    <img link="imgs/fourtyone.jpg"></img>
    <img link="imgs/fourtytwo.jpg"></img>
    <img link="imgs/fourtythree.jpg"></img>
    <img link="imgs/fourtyfour.jpg"></img>
    <img link="imgs/fourtyfive.jpg"></img>
    <img link="imgs/fourtysix.jpg"></img>
    <img link="imgs/fourtyseven.jpg"></img>
    <img link="imgs/fourtyeight.jpg"></img>
    <img link="imgs/fourtynine.jpg"></img>
    <img link="imgs/fifty.jpg"></img>
    <img link="imgs/fiftyone.jpg"></img>
    <img link="imgs/fiftytwo.jpg"></img>
    <img link="imgs/fiftythree.jpg"></img>
</wallpapers> 
```

我尝试在我的网站上运行 Firebug，除非我也做错了，否则不会出现错误或警告。所以我完全被难住了。有人有什么想法吗？

任何帮助都非常感谢，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T00:52:52.960

好的，这就是我认为正在发生的事情。我访问了您的站点，它在 loadWallpaper() 中引发了空引用错误。loadWallpaper() 中唯一可以判断为 null 的就是壁纸链接。wallpaperLinks 在 XMLLoader 完成加载后设置。您没有显示调用 loadFirstPaper() 的代码。所以我打赌你有比赛条件。在您的计算机上，XML 的本地加载比在线加载更快，因此您在本地看不到它。

执行此操作，将 loadFirstPaper 调用移至此处：

```
function parse(ssXML:XML) { 
    wallpaperLinks = slideshowXML.img.attributes(); 
    loadFirstPaper();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:52:35.887

弄清楚了。问题是

```
var slideshowXMLLoader:XMLLoader = new XMLLoader("slideshow.xml", {autoDispose:true, onComplete:LoadXML}); 
```

要么 XMLLoader 根本没有做它的工作；要么 或者，我认为这更有可能是 onComplete 事件过早触发。我将上面的行替换为：

```
var slideshowXMLLoader:URLLoader = new URLLoader();
slideshowXMLLoader.addEventListener(Event.COMPLETE, loadXML);
slideshowXMLLoader.load(new URLRequest("slideshow.xml")); 
```

它目前似乎按预期工作。

我仍然想知道如何使 onComplete 调用正常工作，所以如果有人有任何建议，我很想听听。

谢谢。

# android - imageView 获取 Drawable 使用 getDrawble()

> ID：13243191
> 
> 赞同：0
> 
> 时间：2012-11-06T01:40:33.553
> 
> 标签：android

ImageView如何使用getDrawable()获取Drawable？为什么它与使用 getBaseContext().getResources().getDrawable() 获取图像不同？喜欢drawable：R.drawable.l，先设置ImageView iv.setImageResource(R.drawable.l); 然后使用 iv.getDrawable() 和 getBaseContext().getResources().getDrawable(R.drawable.l)。但是为什么它会得到不同的drawable？使用“==”或equals，是不对的。谢谢指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:07:18.473

iv.setImageResource(R.drawable.l) 也将使用 getResources().getDrawable(R.drawable.l)，

您调用 getDrawable(R.drawable.l) 两次，将得到两个不同的对象，因为两次

新的 ImageDrawable()。

您可以使用 Drawable.getConstantState() 来比较它们。但它有时也会失败。

# ruby - 如何解析 URL 并提取所需的子字符串

> ID：13243195
> 
> 赞同：20
> 
> 时间：2012-11-06T01:41:03.163
> 
> 标签：ruby, parsing

假设我有一个这样的字符串：`"http://something.example.com/directory/"`

我想要做的是解析这个字符串，并`"something"`从字符串中提取。

第一步，显然是检查以确保字符串包含`"http://"`- 否则，它应该忽略该字符串。

但是，我该如何提取该`"something"`字符串中的？假设这将评估的所有字符串都将具有类似的结构（即，我正在尝试提取 URL 的子域 - 如果正在检查的字符串确实是有效的 URL - 其中 valid 以 开头`"http://"`）。

谢谢。

PS 我知道如何检查第一部分，即我可以简单地在 处拆分字符串，`"http://"`但这并不能解决全部问题，因为这会产生`"http://something.example.com/directory/"`. 我想要的只是`"something"`，没有别的。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-06T03:13:07.820

我会这样做：

```
require 'uri'

uri = URI.parse('http://something.example.com/directory/')
uri.host.split('.').first
=> "something" 
```

[URI](https://ruby-doc.org/stdlib-2.7.0/libdoc/uri/rdoc/URI.html)内置在 Ruby 中。它不是功能最齐全的，但对于大多数 URL 来说，它有足够的能力完成这项任务。如果您有[IRI](https://en.wikipedia.org/wiki/Internationalized_Resource_Identifier)，请查看[Addressable::URI](https://github.com/sporkmonger/addressable)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-06T02:39:28.580

你可以使用 URI 之类的

```
uri = URI.parse("http://something.example.com/directory/")
puts uri.host
# "something.example.com" 
```

然后你就可以在主机上工作了。或者从[ruby​​ 中的字符串中删除子域中](https://stackoverflow.com/questions/983158/remove-subdomain-from-string-in-ruby)
有一个 gem[`domainatrix`](https://github.com/pauldix/domainatrix)

```
require 'rubygems'
require 'domainatrix'

url = Domainatrix.parse("http://foo.bar.pauldix.co.uk/asdf.html?q=arg")
url.public_suffix       # => "co.uk"
url.domain              # => "pauldix"
url.subdomain           # => "foo.bar"
url.path                # => "/asdf.html?q=arg"
url.canonical           # => "uk.co.pauldix.bar.foo/asdf.html?q=arg" 
```

你可以只使用子域。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T01:49:33.177

好吧，你可以使用正则表达式。类似的东西`/http:\/\/([^\.]+)/`，也就是第一组非'.' 之后的字母`http`。

查看[http://rubular.com/](http://rubular.com/)。您也可以针对一组测试来测试您的正则表达式，这对于学习这个工具非常有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-19T12:10:30.363

使用 URI.parse 你可以得到：

```
require "uri"

uri = URI.parse("http://localhost:3000")
uri.scheme # http
uri.host # localhost
uri.port # 3000 
```

# php - PHP循环展开一组值并循环查询新展开的值

> ID：13243204
> 
> 赞同：1
> 
> 时间：2012-11-06T01:43:02.310
> 
> 标签：php, mysql

所以我试图循环并将这些值打印到一个excel文件中。我能够弄清楚这一点，但现在我正在尝试添加代码以能够分解我得到的原始值。

```
$col = 1; 
while($row_data = mysql_fetch_assoc($result)) {
$row = 1;
if ($col == 1) {
    $row_headings = array_keys($row_data);
    foreach($row_headings as $value) { 
```

一切正常，直到这里。我们得到的值是 111X222X333 所以我想分解它们然后查询一个新的值数组

```
 list($sid,$gid,$qid) = explode("X", $value)
    $results="select * from lime questions where sid =".$sid." and gid =".$gid." and qid".$qid;
    }
foreach(mysql_fetch_assoc($results)){ 
```

这些是我添加到已经工作的循环中的 3 行。我想知道我在这里做错了什么。

```
 $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $results);
        $row++;
    }
    }
    $row = 1;
    $col++;
}
foreach($row_data as $value) {
    $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);
    $row++;
}
$col++; 
```

}

我在哪里弄乱了循环

# java - 等待一个异步操作完成android

> ID：13243208
> 
> 赞同：1
> 
> 时间：2012-11-06T01:43:18.610
> 
> 标签：java, android, asynchronous

我从 Android 开发开始。我有一个异步操作，但我的意图是等待操作完成，然后继续执行我的程序。我使用了 AsyncTask 及其所有方法，但出现错误，因为在 onPreExecute 方法上我想显示另一个 Activity，所以我想我不能显示另一个 Activity。这就是我想等待完成异步操作的原因。

问候

第一次编辑：我使用了 AsyncTask(onPreExecute, doInBa..., onPost...)，但没有一个方法有效。我了解 AsyncTask 类的工作原理，但是我想在调用一个异步第三方方法时停止执行，因为在需要的侦听器中，我更改了字符串变量 X 的值，并在调用我的方法后使用了第三方方法，我使用变量 X。我得到了一个例外，因为变量没有更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:46:21.887

请阅读并遵循[AsynTask](http://developer.android.com/reference/android/os/AsyncTask.html)的示例。您需要覆盖 onPostExecute

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:59:22.767

不完全确定问题是什么，但 AsynTask 有一个方法，您可以在一切完成后调用该方法。一个好的做法是有一个对话框或微调器来显示工作正在发生，然后将其关闭。

```
 class loadingTask extends AsyncTask<String, Void, String> {

        protected String doInBackground(String... urls) {
            //Do work

        }

        protected void onPostExecute(String s) {
            ShowProgress.dismiss();

            Intent myIntent = new Intent(this, PostExAct.class);
            startActivity(myIntent);

        }
    } 
```

在您的创建中：

```
ShowProgress = ProgressDialog.show(MainActivity.this, "",
            "Loading. Please wait...", true);
    new loadingTask().execute("params here"); 
```

这将显示一个加载对话框，并且在工作完成时将在工作完成后关闭。

# vim - 如何识别vim中的语法关键字？

> ID：13243217
> 
> 赞同：0
> 
> 时间：2012-11-06T01:44:32.740
> 
> 标签：vim

有没有一种通用的方法来识别当前单词是否是语法关键字？语法关键字是指 C 中的 include、struct、int 或 C++ 中的 public、class、static 等。

这是上下文：

```
let w=expand('<cword>')
if is_syntax_keyword(w)
    ...
endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:43:44.550

[本文档](http://vimdoc.sourceforge.net/htmldoc/syntax.html)包含大量有关语法命名约定的信息 - 并且可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:47:16.310

这个 vimcast: [Creating Color Schemes for Vim](http://vimcasts.org/episodes/creating-colorschemes-for-vim/)详细解释了如何识别 Vim 识别的语法部分。

# linq - linq 查询子句中的 IF 语句

> ID：13243218
> 
> 赞同：-1
> 
> 时间：2012-11-06T01:44:44.833
> 
> 标签：linq, linq-to-sql, linq-to-entities

我写了一个 LINQ 查询子句，但是出现了一个错误。任何人都可以帮助我。在此先感谢：

```
list = (from cr in dt.AsEnumerable()
select new Cards
{
   MemberNumber = cr.Field<string>("MemberNumber"),
   if( cr.Field<int>("CardState")==0)
   {
          CardState ="aaa";
   }
   if( cr.Field<int>("CardState")==1)
   {
     CardState ="bbb";
   }
   if( cr.Field<int>("CardState")==2)
   {
      CardState ="ccc";
   }
  if( cr.Field<int>("CardState")==3)
  {
     CardState ="ddd";
  }
  if( cr.Field<int>("CardState")==4)
  {
    CardState ="eee";
   }
  }).ToList<Cards>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T01:51:57.750

您不能在初始化程序中拥有这样的分支逻辑。但是，您可以将其编写为一系列三元运算符：

```
list = (from cr in dt.AsEnumerable()
select new Cards
{
   MemberNumber = cr.Field<string>("MemberNumber"),
   CardState = ( cr.Field<int>("CardState")==0) ? "aaa" : 
               ( cr.Field<int>("CardState")==1) ? "bbb" :
               ( cr.Field<int>("CardState")==2) ? "ccc" :
               ( cr.Field<int>("CardState")==3) ? "ddd" :
               ( cr.Field<int>("CardState")==4) ? "eee" :
               ( cr.Field<int>("CardState")==5) ? "bbb" : null
}).ToList<Cards>(); 
```

尽管更好的解决方案可能是将该代码块分离到一个单独的函数中并从您的初始化程序中调用它：

```
list = (from cr in dt.AsEnumerable()
select new Cards
{
   MemberNumber = cr.Field<string>("MemberNumber"),
   CardState = GetCardState( cr.Field<int>("CardState"))
  }).ToList<Cards>(); 
```

# php - 为什么Joomla将MVC View分成两部分

> ID：13243220
> 
> 赞同：2
> 
> 时间：2012-11-06T01:44:52.680
> 
> 标签：php, html, model-view-controller, design-patterns, joomla

我已经使用 joomla 一年多了，并且对 MVC 模式也很熟悉。但我不清楚 Joomla 在显示视图时如何使用 MVC。在组件中，开发人员使用以下两种方法。

***第一种方法***

```
class myView extends JView
{
     function display($tpl = null)
     {                  
       //HTML & PHP goes here
     }  

} 
```

***第二种方法***

```
class myView extends JView
{
        function display($tpl = null)
            {                   
            parent::display($tpl);
            }   

} 
```

在第二种方法中，他们创建一个`tmpl`文件夹并在其中放置一个`default.php`。然后所有的 HTML 和 PHP 代码都进入该文件。

现在的问题是，当我们可以立即使用第一种方法时，为什么他们使用第二种方法？行业标准是什么？上述方法的优缺点是什么？应该使用什么以及为什么以及取决于什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:21:15.583

没有“行业标准”。但是MVC有“关注点分离”这样的概念。

第二种方法更接近受 MVC 启发的模式的精神。视图应该负责 UI 逻辑。并且，如果此逻辑需要生成响应，请查看多个模板来创建它。或者它可能选择只发送一个 HTTP 标头。

第一种方法是“quick'n'dirt”版本。这通常意味着 UI 逻辑已在控制器中泄漏。或者，那个开发人员不明白为什么*意大利面条代码*是一件坏事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:58:12.167

看起来第二种方法正在调用父级，因此它正在调用模板的基本部分。通常，您有一个基本模板，然后是使用该基本模板的单个内容（页面）。

# php - 当多个用户同时请求一个 PHP 页面时，它会被中断吗？

> ID：13243221
> 
> 赞同：0
> 
> 时间：2012-11-06T01:45:05.487
> 
> 标签：php, wamp

例如，如果我们在 server 上有某个 php 文件`getProducts.php`。当多个用户同时请求它时，它会被中断吗？例如，如果一个用户询问产品 A 的详细信息，另一个用户询问产品 B 的详细信息，另一个用户询问产品 C 的详细信息，等等...... php 会被中断吗？或者它是一个自我生成的线程系统，可以根据每个请求工作和响应？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T01:55:22.743

出乎意料的是，这与 PHP 几乎没有关系。回答用户请求的不是 PHP，而是*Web 服务器*。例如 Apache、NginX、IIS 等。

然后，Web 服务器将调用路由到一个 PHP 实例，该实例通常独立于在那个确切时刻满足的任何其他请求。并发请求的数量取决于服务器配置、架构和平台能力。所谓的“C10K”服务器被设计为同时提供多达一万个连接。

但是 PHP 并不是从“GET /index.php”到一堆 HTML 的过程中的唯一因素。任何活动页面（PHP 或 ASP 或 Python 等）都可以从例如数据库请求更多资源。在这种情况下会出现并发问题，并且每当两个用户需要获取相同的资源（数据表中的一行、整个表、一个日志文件......）时，某种 *信号量系统*会使得只有一个他们一次可以获得该特定资源的“锁定”，所有其他人都必须等待轮到他们，即使覆盖的 Web 服务器能够处理数百或数千个并发连接。

**性能问题的更新：***在*PHP 中也会发生同样的情况，例如**会话**。想象一下，您有一个用户请求一个页面，并且该页面有代码来生成另外十个调用（对图像、弹出窗口、广告、AJAX ......）。第一个请求打开一个*会话*，它是一堆必须保持一致的数据。因此，当其他十个调用都绑定到同一个会话时，PHP 无法知道这些调用中的任何一个是否想要*修改*会话数据——它没有办法，只能[阻止第二个调用继续进行](http://konrness.com/php5/how-to-prevent-blocking-php-requests/)，直到第一次调用已释放会话锁，一旦释放，第二次调用将阻塞第三次，依此类推。要点：避免`session_start()`如果不需要它（例如用加密强的 GET 令牌替换它或完全不这样做），或者`session_commit()`在您完成修改`_SESSION`的值后立即调用，**将大大提高性能**。（因此将使用更快的会话管理器，或者不使用粗锁的会话管理器：例如`redis`）。

例如在图像生成中：

```
session_start();
// This does the magic.
session_commit();
// We can still read session. We just can't write it anymore.

// That's why we needed a session.
if (!isset($_SESSION['authorized'])) {
    Header('HTTP/1.1 403 Forbidden');
    die();
}
// Here the code that generates an image *and sends* it. The session
// lock, if we hadn't committed, will *not* expire until the request
// has been processed by the *client* with network slowness. (Things
// go much better if you use the CGI interface instead of module). 
```

在您的示例中并看到“WAMP”标签，您有一个 Windows Apache 为 PHP 从 MySQL 检索的数据提供服务，并为产品提供服务请求。

Apache 服务器将接收数百个连接，激活数百个 PHP 模块实例（它们将共享大部分代码，因此内存占用不会快速上升），然后所有这些实例都会询问 MySQL，“什么关于产品 XYZ？”。用 MySQL 的话来说，他们会尝试获取一个`READ LOCK`. 读锁的意思是，“我正在读这个东西，所以请你们不要在我写完之前在上面*写字”。*但他们都只是在阅读，所以他们都会成功 - 同时。

所以不，不会有任何停留——就在那时。

但假设您还想更新产品视图的计数器。然后每个 PHP 实例也需要一个`WRITE LOCK`，这意味着，“我想在这个东西上写，所以在我完成之前你们都不要阅读，否则你会冒险阅读半生不熟的数据，当然你们也不要在这里*写*，而我会去的”。

此时，表类型很重要。MyISAM 表具有[表锁定](http://dev.mysql.com/doc/refman/5.0/en/table-locking.html)功能：如果正在更新产品 A 的统计信息的实例正在写入`product_views`，则没有其他实例能够对*整个表*执行任何操作。他们都会排队等候。如果表是`InnoDB`，则锁是*行*级的——所有更新产品 A 的实例将一个接一个地排队，与更新产品 B、C、D 等的实例并行。因此，如果所有实例都写入不同的记录，它们将并行运行。

这就是为什么你真的想在这些情况下使用 InnoDB 表。

当然，如果您有“页面访问”之类的记录，并且它们都在更新“product-page.php”的行，那么您就存在瓶颈，并且在高流量站点的情况下，您会如果您设计了其他写入该信息的方式（许多解决方法之一是将其存储在共享内存位置中；访问它的众多实例中的*一个*不时地接收将信息保存到数据库的任务。实例仍然竞争内存锁定，但这比竞争数据库事务要快几个数量级）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T01:51:58.840

如果您使用的是 apache，它是一个并发系统。这意味着每个请求都将被并行处理，因此您的 php 脚本不会被中断。

# list - 链表，获取不需要的值

> ID：13243223
> 
> 赞同：1
> 
> 时间：2012-11-06T01:45:20.170
> 
> 标签：list, linked-list

我正在尝试创建一个链接列表，该列表将从用户那里获取输入，对其进行排序，并在用户输入 0 或负数后将其打印出来。我的代码在某个地方在打印循环的开头添加了一个“0”。
示例：我输入 1-2-3-4-5。然后程序返回 0-1-2-3-4-5。
示例 2：我输入 1-2-3-4-5。然后程序返回 0-5-1-2-3-4。这对我来说也是一个问题，因为我最终需要让程序将输入的值从最小到最大排序。但是现在我专注于让它接受输入 1-2-3-4-5 并打印 1-2-3-4-5。

```
#include <stdio.h>
#include <stdlib.h>

struct listNode{
  int data;   
  struct listNode *next;
};

//prototypes
void insertNode(struct listNode *Head, int x);
void printList(struct listNode *Head);
int freeList(struct listNode *Head, int x);

//main
int main(){
     struct listNode Head = {0, NULL};
     int x = 1;
     printf("This program will create an odered linked list of numbers greater"
     " than 0 until the user inputs 0 or a negative number.\n");
     while (x > 0){
           printf("Please input a value to store into the list.\n");
           scanf("%d", &x);
           if (x > 0){
           insertNode(&Head, x);
           }
     }
     printList(&Head);
     system("PAUSE");
     }

void insertNode(struct listNode * Head, int x){
     struct listNode *newNode, *current;
     newNode = malloc(sizeof(struct listNode));
     newNode->data = x;
     newNode->next = NULL;
     current = Head;
     while (current->next != NULL && current->data < x) 
     {
        current = current->next;
        }

        if(current->next == NULL){
             current->next = newNode;
        }
        else{
             newNode->next = current->next;
             current->next = newNode;
        }
}
void printList(struct listNode * Head){
    struct listNode *current = Head;
    while (current != NULL){
          if(current > 0){
               printf("%d \n", *current);
          }
          current = current->next;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:57:59.880

它在列表中有一个零，*因为你把它放在那里：*

```
struct listNode Head = {0, NULL}; 
```

如果您想要*快速*修复，请更改输入行`printList()`以及处理列表的其他任何内容：

```
struct listNode *current = Head; 
```

到：

```
struct listNode *current = Head->next; 
```

这将从列表的第二个元素开始，忽略您放在那里的那个开始。

* * *

但是，更好的方法可能是*根本*没有那个无关的元素：

```
#include <stdio.h>
#include <stdlib.h>

struct listNode {
    int             data;
    struct listNode *next;
};

// Prototypes (freeList removed since not defined).

void insertNode(struct listNode **pHead, int val);
void printList(struct listNode *Head);

// Main program for testing.

int main(void) {
    // List initially empty.

    struct listNode *Head = NULL;

    int x = 1;
    puts("This program will create an ordered linked list");
    puts("    of numbers greater than 0 until the user");
    puts("    enters 0, a negative number, or a non-integer.");
    for(;;) {
          puts("Please input a value to store into the list.");
          if ((scanf("%d", &x) != 1) || (x <= 0)) break;
          insertNode(&Head, x);
     }
     printList(Head);
}

void insertNode(struct listNode **pHead, int val){
    struct listNode *newNode, *current, *previous;

    // Allocate new node, should really check for failure here.

    newNode = malloc (sizeof (struct listNode));
    newNode->data = val;
    newNode->next = NULL;

    // Handle inserting into empty list.

    if (*pHead == NULL) {
        *pHead = newNode;
        return;
    }

    // Find node to insert before.

    current = *pHead;
    while (current != NULL && current->data < val)  {
        previous = current;
        current = current->next;
    }

    // Handle inserting at start of list.

    if (current == *pHead) {
        newNode->next = *pHead;
        *pHead = newNode;
        return;
    }

    // Handle inserting at end of list.

    if (current == NULL) {
        previous->next = newNode;
        return;
    }

    // Handle inserting somewhere inside the list.

    newNode->next = current;
    previous->next = newNode;
}

void printList (struct listNode *Head) {
    struct listNode *current = Head;

    if (current == NULL) {
        puts ("There are no numbers.");
        return;
    }

    puts ("Numbers are:");
    while (current != NULL) {
        printf ("   %d\n", current->data);
        current = current->next;
    }
} 
```

我还清理了其他一些东西，例如更改`*current`为更显式的`current->data`，将*指针*传递给 head 以便您可以更改它，并对主输入循环进行轻微修改。这是一个示例运行：

```
This program will create an ordered linked list
    of numbers greater than 0 until the user 
    inputs 0 or a negative number.
Please input a value to store into the list.
4
Please input a value to store into the list.
1
Please input a value to store into the list.
8
Please input a value to store into the list.
5
Please input a value to store into the list.
6
Please input a value to store into the list.
3
Please input a value to store into the list.
2
Please input a value to store into the list.
9
Please input a value to store into the list.
7
Please input a value to store into the list.
0
Numbers are:
   1 
   2 
   3 
   4 
   5 
   6 
   7 
   8 
   9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:54:51.643

在`printList`您打印 value`*current`时，它​​不是整数（它是 a `struct listNode`）。您的编译器可能会警告您这一点。

尝试打印`current->data`，而不仅仅是打印，`*current`事情应该会奏效。

如果这确实是您想要的，您可能还需要更新您的`if(current > 0)`测试以使其更像。`current->data > 0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T01:56:52.803

您正在打印的 printList() 函数中的第一项是列表的 Head 元素，其中包含零作为数据。你很幸运，因为你的结构的第一个元素是 int 数据，所以当你取消引用指向 current 的指针时，你碰巧在结构的开头得到了 int。

实际上你可能应该像下面这样重写 print 函数：

```
void printList(struct listNode * Head){
    struct listNode *current = Head->next;
    while (current != NULL){
          printf("%d \n", current->data);
          current = current->next;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T02:00:01.240

`... Somewhere my code is adding a "0" to the beginning of the print loop.`

是的，在您的代码中，当您第一次 init 时`Head`，您引入了`0`. 这是行：

```
struct listNode Head = {0, NULL}; 
```

假设您将上述值从 0 更改为 999，您的代码将打印出 999 作为第一个数字。

您需要在插入期间处理 Head 节点情况。

# c++ - 替换向量中的元素值

> ID：13243224
> 
> 赞同：0
> 
> 时间：2012-11-06T01:45:22.430
> 
> 标签：c++

所以我正在做一个库存计划。我有一个类项目的向量，我想用户输入 Id，然后运行一个迭代器以匹配向量中的 Id 并更改售出数量的值：

这是我的代码的一部分：

```
 vector<Item>::const_iterator it;
  for(it=items.begin(); it !=items.end(); it++){
    if (it->getID() == id){
      amount=it->getactual()-sold;
      it->setactual(amount); 
```

那是在我的课上

```
int getactual()const{return actual_quantity;}
void setactual(int quantity){actual_quantity=quantity;} 
```

但我收到一个错误：将 'const Item' 作为 'void Item::setactual(int)' 的 'this' 参数传递会丢弃限定符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:47:24.017

问题是您正在使用 const 迭代器，但您正在修改它指向的内容（调用非 const 成员），请尝试使用常规迭代器：

```
vector<Item>::iterator it; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:47:25.487

你应该使用

```
vector<Item>::iterator 
```

代替

```
vector<Item>::const_iterator 
```

`const_iterator`表示只读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T01:47:58.570

`setactual`显然不能对`const`对象进行操作（作为您通过`const_iterator`; 获得的对象更改`const_iterator`为 plain `iterator`.

# javascript - Chrome扩展内联js更新

> ID：13243227
> 
> 赞同：0
> 
> 时间：2012-11-06T01:45:48.120
> 
> 标签：javascript, jquery, google-chrome-extension

我正在尝试将我的内联代码更新为新 Chrome 扩展清单的外部代码。

我的旧代码是：

```
<input id="importbutton" type="file" onchange="dataImport(this.files);"> 
```

我的新代码是，但它不起作用 - 也许有人可以帮我调试这个？

```
$('#importbutton').bind('onchange', function() {
    var myimport = $('#importbutton').val();
    dataImport(myimport.files);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:55:55.637

您可以尝试使用该`change`方法（现在无法测试，如果它崩溃和烧毁，请道歉:)）：

```
$('#importbutton').change(function(e) {
    var myimport = $(this).val();
    dataImport(myimport.files);
}); 
```

# ruby-on-rails - 为什么 fields_for 在表单提交时创建 2 条相同的记录而不是 1 条？

> ID：13243229
> 
> 赞同：0
> 
> 时间：2012-11-06T01:46:19.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

当我提交此表单时，它会在成员表中创建 2 条相同的记录（表单的 fields_for 部分）。请帮助我理解为什么会这样。

基本设置是：一个 Comp 有很多 Teams，一个 Team 有很多 Member。创建新团队时，创建的第一个成员应该是团队的秘书（这意味着成员表中的秘书标志字段应该设置为 TRUE。）下面的这个表单应该创建一个新团队，创建第一个团队成员，以及将该团队成员标记为秘书。

控制器：

```
def new
  @comp = Comp.find(params[:comp_id])    
  @team = @comp.teams.new
  @team.members.build  
end

def create
  @comp = Comp.find(params[:comp_id])
  @team = @comp.teams.create(params[:team])
  if @team.update_attributes(params[:team])
      flash[:success] = "Team added successfully."
      redirect_to new_comp_team_member_path(@comp,@team)
  else
      render 'new' 
  end
end 
```

表单视图：

```
<%= form_for [@comp,@team] do |builder| %>
    <%= builder.label :team_name, "Team name" %>
    <%= builder.text_field :team_name %>        
    <%= builder.fields_for :members do |f| %>
        <%= f.label :member_email, "Email address of team secretary" %>
        <%= f.text_field :member_email %> 
        <%= f.hidden_field :secretary_flag, :value => 1 %>
    <% end %>

<%= builder.submit "Create new team" %> 

<% end %> 
```

在我的路线中：

```
resources :comps do
    resources :teams do 
        resources :members
    end 
end 
```

在我的模型中：

comp.rb：

```
attr_accessible :teams_attributes
has_many :teams, :dependent => :destroy
accepts_nested_attributes_for :teams, :allow_destroy => :true 
```

团队.rb：

```
attr_accessible :members_attributes
belongs_to :comp
has_many :members
accepts_nested_attributes_for :members 
```

成员.rb：

```
 belongs_to :team 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:53:42.263

我想出的解决方案非常基本。在我的创建操作中，我不小心放了：

```
if @team.update_attributes(params[:team]) 
```

什么时候应该是：

```
if @team.save(params[:team]) 
```

我仍然不明白为什么会创建 2 个相同的记录，但它现在可以工作了。

# html - HTML5 音频：如何快速停止和重新启动剪辑？

> ID：13243235
> 
> 赞同：11
> 
> 时间：2012-11-06T01:46:54.927
> 
> 标签：html, audio

见标题。我正在尝试每 300 毫秒连续播放 4 次音频文件。但是，剪辑长于 300 毫秒，因此它会忽略新的播放请求，直到剪辑完成播放。我正在寻找某种方法来每 300 毫秒停止和重新启动剪辑。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
</head>
<body>
    <audio id="note0440"><source src="0440.a4.wav" type="audio/wav"></audio>
    <script type="text/javascript">
        function playNote (loop) {
            var n = document.getElementById("note0440")
            if (loop > 4)
                return
            n.volume = 0.05
            // n.currentTime = 0
            n.pause()
            n.play()
            setTimeout("playNote("+(loop + 1)+")", 300)
        }
    </script>
    <div style="margin:50px"><button onclick="playNote(1)">Play Note</button></div>
</body>
</html> 
```

这不起作用。它不会停止和重新启动，无论是否`n.currentTime = 0`使用。

如果您需要一个 WAV 文件进行测试，这是一个 WAV 文件：http: [//popstrip.com/misc/0440.a4.wav](http://popstrip.com/misc/0440.a4.wav)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-06T02:02:48.567

无论您在哪里呼叫停止，只需按以下顺序执行以下操作 -

```
 n.pause();
 n.currentTime = 0;
 n.play(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T02:01:14.810

[来自规范](http://www.whatwg.org/specs/web-apps/current-work/#audio "HTML5 audio spec")的第 4.8.10.6 节

> 媒体 。duration 返回媒体资源的长度，以秒为单位，假设媒体资源的开始时间为零。
> 
> 如果持续时间不可用，则返回 NaN。
> 
> 为无界流返回 Infinity。
> 
> 媒体 。currentTime [ = value ] 返回官方播放位置，以秒为单位。
> 
> 可以设置，寻找到给定的时间。
> 
> 如果没有选定的媒体资源或存在当前媒体控制器，将抛出 InvalidStateError 异常。

所以规范不允许少于一秒的搜索。但是，不同的浏览器都会以不同的方式实现它（当然）。一些浏览器*可能*支持这一点，但让它在今天所有部署的浏览器中可靠地工作将是一个巨大的痛苦。假设你可以发出毫秒级的 seeks，另一个问题是 js 解释器可能无法及时完成你的请求，即 seek 的处理时间比 seek 的值长，这会导致其他困难。

如果您确实需要小于一秒的粒度来进行搜索，我对您的建议是暂时放弃 html5 方法，并尽可能使用在主机上本地运行的插件或一些代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-27T13:58:05.333

这个答案似乎是正确的[https://stackoverflow.com/a/13243338/8554041](https://stackoverflow.com/a/13243338/8554041) 但我在没有属性的音频元素中尝试了它，但`controls`它没有用。它仅适用于[https://stackoverflow.com/a/13243333/8554041](https://stackoverflow.com/a/13243333/8554041)`audioElement.currentTime=1`中提到的，但 0 后 1 秒对于我的用例来说时间太多了。

所以我试过`audioElement.currentTime=null`了，它奏效了！✅ 这是我在片段中的解决方案。

```
<audio src="/file.mp3" id="audioElement" />

audioElement.play()
audioElement.currentTime = null 
```

它适用于 Chrome 87、Firefox 84，我将很快在其他浏览器上进行测试，我会在这里更新它。

谢谢。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-20T11:34:47.007

这有点像黑客，但我这样做：

```
<audio src="blah.wav" type="audio/wav" preload="preload" id="blah0"></audio>
<audio src="blah.wav" type="audio/wav" preload="preload" id="blah1"></audio>
<audio src="blah.wav" type="audio/wav" preload="preload" id="blah2"></audio>
<audio src="blah.wav" type="audio/wav" preload="preload" id="blah3"></audio>

var audioStore = [
  document.getElementById('blah0'),
  document.getElementById('blah1'),
  document.getElementById('blah2'),
  document.getElementById('blah3'),
];

var n = 0;

function playBlah () {
  // Cycle through the clips
  audioStore[n].play();
  n = (n+1)%4;
} 
```

尽可能多地执行此操作。额外的好处是，您不会失去声音的尾音，因此您可以负担得起使用氛围（例如，游戏有时希望声音重叠）。

有更优雅的方法可以做到这一点。我实际上会编写一个函数，该函数接受一个音频文件名、一个 id 词干（如示例中的 blah）和许多要循环的元素（该声音的最大同时值），并返回一个可以调用的函数来播放声音。此功能还将元素添加到页面。

最后，您可能应该至少使用 MP3 和 Wav 以获得最大的 x 浏览器兼容性，格式越多越好，因为 wave 是主要的带宽消耗。

希望这可以帮助。（我在 Win、Mac OSX 和 Linux 上的 Chrome、Firefox、Ice Weasel 中使用过这种技术）

# java - TestNG 处理外部系统依赖，需要澄清

> ID：13243240
> 
> 赞同：0
> 
> 时间：2012-11-06T01:47:40.787
> 
> 标签：java, junit, testng

请问我需要对以下内容进行哪些更改？

我想确保该`testInsert`方法仅在`testInternalAccess`通过时运行`testInternalAccess`而不被视为失败。

```
@Test
public void testInternalAccess() {
    URL url = null;
    try {
        url = new URL("http://internalpage");
        InputStream is = url.openConnection().getInputStream();
    } catch (Exception e) {
        fail();
    }
}

@Test(groups = "database", dependsOnMethods = "testInternalAccess")
public void testInsert() {
  // some code
} 
```

在上面的例子中：

1.  `testInternalAccess`运行、失败并被报告为失败的测试
2.  `testInsert`运行和失败

或者，使用 TestNG 示例的创建者

```
@Test
public serverStartedOk() {}

@Test(dependsOnMethods = { "serverStartedOk" })
public method1() {} 
```

**如何`method1`知道服务器是否实际启动正常？它将如何`serverstartedOk`与世界交流它的状态？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:51:59.437

根据我们上面的讨论，以下是简要总结。

由于您希望在运行`testinternalAcecess`类中的所有测试之前运行该方法，请使用`@BeforeClass`

```
@BeforeSuite
public void testInternalAccess() {
    URL url = null;
    try {
        url = new URL("http://internalpage");
        InputStream is = url.openConnection().getInputStream();
    } catch (Exception e) {
        fail();
    }
} 
```

该方法只运行一次，并且在套件中的所有测试都运行之前！你的测试方法如下

```
@Test(groups = "database")
public void testInsert() {
  // some code
} 
```

宾果游戏，这行得通！

# java - 在java中上传excel文件验证

> ID：13243247
> 
> 赞同：1
> 
> 时间：2012-11-06T01:49:16.843
> 
> 标签：java

我是上传 Excel 文件 POI API 的新手，所以我需要验证特定列中的重复单元格。像这样的例子

```
String dupcolumn  = myRow.getcell(0);
Iterator iter = new Iterator();
while(iter.hesnext())
{
myRow = (Row) iter.next();

dupcolumn.contains(iter.toString());

} 
```

以上代码不支持读取特定列，但始终连续读取列。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T04:49:25.590

此代码可能对您有所帮助。

```
InputStream xlsStream = excelFileUpload.getInputstream();
XSSFWorkbook wb  = new XSSFWorkbook(xlsStream);
XSSFSheet sheet = wb.getSheetAt(0);
Iterator<Row> rows=sheet.iterator();
//need to keep retrieved values in a collection to check duplicates. 
Set<String> values = new HashSet<String>();

//check all rows in excel sheet
while(rows.hasNext()){
    //get next row
    XSSFRow row =(XSSFRow)rows.next();
    //pass '0' means first cell (column) in current row. if you need to get other cell value, you can pass relevant cell number instead of '0'. 
    XSSFCell cell=row.getCell(0);
    if(values.contains(cell.getStringCellValue())){
        //duplicated value
    }else{
        values.add(cell.getStringCellValue());
    }
} 
```

# c++ - 打开网址 mac osx c++

> ID：13243248
> 
> 赞同：0
> 
> 时间：2012-11-06T01:49:21.857
> 
> 标签：c++, macos, cocoa, url, macos-carbon

如何在 C++ 中点击 url，Objective-C 有大量示例，但我的应用程序不使用 Objective-c 并以 main() 开头，并且都是 c/c++。我正在使用 URLSimpleDownload，但它不再工作（返回 -50）。我不想打开网页或浏览器，我只需要从 c/c++ 中点击一个 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:54:01.877

`NSURL`您可以采用您提到的几个示例，并使用等效的`CFURL*`API。注：`CFURLRef`是一个`NSURL*`. 所以你只需要弄清楚基于 - 的实现使用的相应`CFURL*`接口。`NSURL`

CF 类型是 NS 类型的这种关系称为“免费桥接”。

请注意，并非所有内容都会一对一映射，NS-API 有很多便利/附加功能——最好将其视为 CF-API 之上的抽象层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:56:00.293

**您可以**尝试下载并安装[cURLpp](http://code.google.com/p/curlpp/downloads/list)（来自[neuro](https://stackoverflow.com/users/135549/neuro)的[帖子的](https://stackoverflow.com/a/1112084/1801602)代码）：

```
// Edit : rewritten for cURLpp 0.7.3
// Note : namespace changed, was cURLpp in 0.7.2 ...
#include <curlpp/cURLpp.hpp>
#include <curlpp/Easy.hpp>
#include <curlpp/Options.hpp>

// RAII cleanup
curlpp::Cleanup myCleanup;

// standard request object.
curlpp::Easy myRequest;

// Set the URL.
myRequest.setOpt(new curlpp::options::Url(std::string("http://example.com")));

// Send request and get a result.
// By default the result goes to standard output.
// Here I use a shortcut to get it in a string stream ...
std::ostringstream os;
os << myRequest.perform();

string asAskedInQuestion = os.str(); 
```

# spring - 频道丢弃消息如何调试

> ID：13243250
> 
> 赞同：0
> 
> 时间：2012-11-06T01:49:53.350
> 
> 标签：spring, jboss5.x, esb, spring-integration

我对 Spring 集成相当陌生，但学习至今。

我从一个名为“Channel-1”的频道收到消息，并通过网桥传递给“Channel-2”

```
<task:executor id="Channel2Executor" pool-size="${executor.pool.size}" rejection-policy="CALLER_RUNS" />

<int:channel id="Channel-2">
    <int:dispatcher task-executor="Channel2Executor"/>
</int:channel>

<int:bridge id="adapterParserBridge" input-channel="Channel-1" output-channel="Channel-2">
</int:bridge> 
```

奇怪的是，当我在 JBoss 中部署应用程序时，消息第一次通过并结束了我的后续流程，尽管流程的后期部分出现了一些错误。

第二次，消息到达“Channel-1”，但从未超出 - 没有错误，没有日志，全部处于调试模式，没有任何痕迹。

所以我的问题是：

1) 流程后期发生的错误是否是导致此类问题的原因？

2）如何无缘无故地调试这样的消息并且没有任何错误？

3）通过这些渠道进行钻探的任何其他建议或指示都会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:15:49.060

1.  不

2.  在调试模式下，如果您真的要向 Channel-1 发送消息，您将看到“preSend on channel 'Channel-1'...”、“postSend on channel 'Channel-1'...”等。

3.  一个常见的错误是在 Channel-1 上拥有多个订阅者；默认情况下，使用 RoundRobin 分发；因此，第一条消息将被桥接到 Channel-2，第二条消息将发送到另一个订阅者，依此类推。

使用调试日志，在不查看“preSend”调试日志的情况下向 Channel-1 发送消息是不可能的。

```
21:09:24.825 DEBUG [someThread][org.springframework.integration.channel.DirectChannel] preSend on channel 'foo', message: [Payload=xxx][Headers={timestamp=1352167764822, id=14b8ae47-08d8-4bf6-94bf-e342eb705df4}] 
```

# jquery - 切换链接href，取决于按钮附加到哪个 感谢您抽出宝贵的时间， 我正在为管理员审查提交的目标的应用程序页面工作。每个目标都是 3 个不同表格中的一个。“review”、“complete”和“submitted”是三个表。 每个都有一个引导 btn-group，可以根据当前的状态选择批准、恢复或拒绝。当状态改变时，包含的目标被删除并附加到适当的表中。 您可以在此处查看功能示例：http: 问问题

> ID：13243252
> 
> 赞同：0
> 
> 时间：2012-11-06T01:50:39.713
> 
> 标签：jquery, html, drop-down-menu, twitter-bootstrap

感谢您抽出宝贵的时间，

我正在为管理员审查提交的目标的应用程序页面工作。每个目标都是 3 个不同表格中的一个。“review”、“complete”和“submitted”是三个表。

每个都有一个引导 btn-group，可以根据当前的状态选择批准、恢复或拒绝。当状态改变时，包含的目标被删除并附加到适当的表中。

您可以在此处查看功能示例：http: [//jsfiddle.net/9mYZD/](http://jsfiddle.net/9mYZD/)

现在问题来了：

*   当其中一个被移动到另一个表时，我需要它来切换下拉列表中的链接，以便它们与新表中的其他链接匹配。
*   我有代码可以做到这一点，但我正在尝试编写一个可行的语句

    ```
    tableID = clicked.closest('table').attr('id');
    if(tableID = 'approve-objectives-submitted'){
                    clicked.html('<i class=" icon-undo"></i> Revert').removeClass('action-ok').addClass('action-revert');
                    }
                    else if(tableID = 'approve-objectives-review'){
                    clicked.html('<i class=" icon-ban-circle"></i> Deny').removeClass('action-ok').addClass('action-deny');
                    } 
    ```

如果您查看提供的小提琴，我已将此代码添加到批准功能。如果您随后从提交中批准一个，则切换效果很好，如果您从审核中批准一个（它们附加在列表的最底部），那么您可以看到两个还原按钮，而不是一个拒绝和一个还原。

如果有人知道如何使这个条件语句起作用。或者也许我只需要退后一步，从另一个角度看待这个问题。任何想法都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:51:59.330

我注意到了几件事。

我已经更改了您的代码`approve: function ()`并提出了一个新的小提琴[http://jsfiddle.net/5aVCp/](http://jsfiddle.net/5aVCp/)

首先，您新添加的表格行正在丢失其目标 ID，并且您从表格行获取 HTML 的方式留下了一个非常小的时间窗口，在您获得 HTML 之前，该元素可能会从 DOM 中删除。

其次，当您替换最后一个 div 的内容时，`btn-group`类 div 正在消失。也许我错过了这部分正在做的事情。

最后，我根据其他行值修改标签的方法是使用您已经包含在锚标记上的属性在将它们附加到新表并根据需要操作 HTML 后简单地找到它们：

```
 var dataId = clicked.attr('data-id');
   var ok = $('a[data-id="' + dataId + '"].action-ok');
   var deny = $('a[data-id="' + dataId + '"].action-deny');
   deny.removeClass('action-deny').addClass('action-revert').html('<i class=" icon-undo"></i> Revert');
   ok.removeClass('action-ok').addClass('action-deny').html('<i class=" icon-ban-circle"></i> Deny'); 
```

您可以为其他类型的状态执行此操作，只需确保在更新它们的任何类之前运行选择器，否则您可能会发现您更改了一个并再次重新选择它。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T02:47:53.727

```
if(tableID = 'approve-objectives-submitted') 
```

你需要 === 不 = 在条件

这是我立即看到的

# php - 如何将 CSV 转换为 JSON 需要 CSV 文件中的一行将导出一个文件 JSON

> ID：13243253
> 
> 赞同：-1
> 
> 时间：2012-11-06T01:50:57.560
> 
> 标签：php, json, csv

我有问题，需要你的帮助！我想将 CSV 转换为 JSON，并在 CSV 中使用导出 1 个文件 JSON 的 1 行（JSON 的内容是 CSV 行的内容，JSON 的名称是该行的 id）。我尝试这样做，但它只是显示和下载 JSON。请给我一个关于这个问题的建议。谢谢你的帮助！

> ```
> <?php
> 
> header('Content-type: application/json');
> 
> $feed = 'jsondata_palpad.csv';
> 
> $keys = array();
> $newArray = array();
> 
> function csvToArray($file, $delimiter) { 
>   if (($handle = fopen($file, 'r')) !== FALSE) { 
>     $i = 0; 
>     while (($lineArray = fgetcsv($handle, 4000, $delimiter, '"')) !== FALSE) { 
>       for ($j = 0; $j < count($lineArray); $j++) { 
>         $arr[$i][$j] = $lineArray[$j]; 
>       } 
>       $i++; 
>     } 
>     fclose($handle); 
>   } 
>   return $arr; 
> } 
> 
> $data = csvToArray($feed, ',');
> 
> $count = count($data) - 1;
> 
> $labels = array_shift($data);  
> 
> foreach ($labels as $label) {
>   $keys[] = $label;
> }
> 
> $keys[] = 'id';
> 
> for ($i = 0; $i < $count; $i++) {
>   $data[$i][] = $i;
> }
> 
> for ($j = 0; $j < $count; $j++) {
>   $d = array_combine($keys, $data[$j]);
>   $newArray[$j] = $d;
> }
> 
> header("Content-type: application/json");
> header("Content-Disposition: attachment; filename=test.json");
> header("Expires: 0");
> header("Pragma: no-cache");
> echo json_encode($newArray);
> 
> ?> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:50:32.153

所以你有一个标题为 CSV 的文件。

要读取它，首先将行转换为数组：

```
 $csv = array_map("str_getcsv", file($filename));
 $head = array_shift($csv); 
```

要转换为关联数组：

```
 $csv = array_map("array_combine", array_fill(0, count($csv), $head), $csv); 
```

要生成文件：

```
 foreach ($csv as $index => $row) {

     file_put_contents("$index.json", json_encode($row));

 } 
```

这里循环计数器`$index`用于生成文件名。

有关以下内容的说明，请参阅手册：

*   [`array_map`](http://php.net/array_map)
*   [`str_getcsv`](http://php.net/str_getcsv)
*   [`file_put_contents`](http://php.net/file_put_contents)

如果你确实想要别的东西，下次写一个更精确的问题。

# android - 为什么Android在构建路径上的项目中找不到类？

> ID：13243262
> 
> 赞同：2
> 
> 时间：2012-11-06T01:52:08.663
> 
> 标签：android, eclipse, package, project

我正在构建一个 Android 应用程序，我想使用另一个 Eclipse 项目中的一个包中的一个类（一个普通的 Java，非 Android 项目，如果这很重要的话）。我右键单击Android项目，选择属性| Java 构建路径 | 项目并检查我想要的课程。然后，我添加了一个 Eclipse 似乎接受的 import 语句（即，指示它无法识别该类的错误图标消失了）。这是主要活动的代码：

```
package com.MeadowEast.tmptest;

import learn.Card; // the class I want
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView t  = (TextView) findViewById(R.id.textView2);
        Card c = new Card("abc","def","ghi"); // using the class
        t.setText(c.getHanzi());
    }
} 
```

对非 Android Java 项目使用完全相同的方法可以正常工作。但是当我尝试在模拟器中运行上述内容时，它会死掉并且错误是`Could not find class 'learn.Card'`.

我曾经在使用 JAR 文件时遇到过类似的问题，并且了解到有两个必要的步骤（第二个是将 JAR 的副本放在 libs 文件夹中）。这里也需要第二步吗？还是有别的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T01:19:33.530

有很多方法可以管理这个。

1.  编译并在 libs 目录中包含一个 jar
2.  编译并包含使用某种依赖管理（a la Maven）。
3.  Eclipse 允许库依赖于项目工作区中的其他（未编译的）库
4.  Android Studio 允许一个模块依赖另一个（未编译的）模块

注意：选项 3 和 4 与选项 2 的轻量级版本非常相似。

另请注意，对于一个小型项目，2 可能会过大，可能会引入不需要的额外编译时间。

就个人而言，对于库不经常更改的项目，我更喜欢选项 1，而对于库所依赖的项目经常更改的项目，我更喜欢选项 3/4。

1 的好处是当库更改时您不会感到惊讶（api 的更改， - 您必须有意识地努力更新到最新版本）。3/4 的好处是，如果您要更新库以使用项目，则不必不断地重新编译和导入 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T02:20:04.353

对此有不同的答案，具体取决于您使用的 IDE。

如果您使用的是 Eclipse/ADT，您应该能够简单地将 jar 放入名为“libs”的顶级目录中。确保名称*完全*正确。

即使在您这样做之后，Eclipse 也可能需要“抖动”才能让它注意到新文件。除非您看到包含您的库的“Android Private Libraries”条目，否则它不会注意到。尝试重新构建、重新导入、刷新等。费。

如果您使用的是 Intellij/Studio（以及 Gradle），则需要在 Gradle 构建文件中添加一行，如下所示：

```
compile fileTree(dir: 'libs', include: ['*.jar']) 
```

它位于文件夹`dependencies`中文件的子句中。`build.gradle``app`

这次jar文件本身进入目录`app/libs`

在你做那个“摇晃”工作室之后。“同步”、“清除缓存并重新启动”。所有惯用的伎俩。当您的库出现在“项目”窗格中的“外部库”选项卡下时，您就知道您已经成功了

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T02:53:39.463

如果您使用源代码，请将它们放在您的项目中。

如果你使用 jar，你应该放入 libs 文件夹。因为，当您在设备中运行应用程序时，所有

您的代码必须在您的 apk 中（framework.jar 除外），否则找不到您的代码。如果你

将你的 jar 放在 libs 文件夹中，eclipse（确切地说是 apkbuilder）会将它们打包成 apk

文件。

# java - 如何在 Hibernate 中注释 PostgreSQL GIN 索引

> ID：13243263
> 
> 赞同：3
> 
> 时间：2012-11-06T01:52:39.743
> 
> 标签：java, hibernate, postgresql

如何使用 Hibernate 正确注释 PostgreSQL GIN 索引？

```
@Index(...)
String text; 
```

hibernate 默认创建一个 GIN 索引，还是我必须在某处设置一个特殊属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:00:38.990

看起来您不能直接使用 Hibernate 的注释创建自定义索引。请参阅相关：[如何使用 Hibernate Annotations 在 Lob / Clob / tinyblob 上添加索引](https://stackoverflow.com/q/858336/398670)，其中一个答案提到了如何使用辅助对象进行操作。

在您的情况下，我会在启动时查询索引的系统目录（[`information_schema`](http://www.postgresql.org/docs/current/static/information-schema.html)或[`pg_catalog`](http://www.postgresql.org/docs/current/static/catalogs.html)），如果找不到，则`CREATE INDEX`使用本机 SQL 执行语句。

有关在 Hibernate 中创建触发器的非常相似的问题，请参阅[此答案。](https://stackoverflow.com/a/12601305/398670)

# c# - 如果文本框有值，如何将其设置为只读？

> ID：13243264
> 
> 赞同：2
> 
> 时间：2012-11-06T01:52:43.147
> 
> 标签：c#, asp.net-mvc

我想将文本框设置为只读，如果它在 MVC 中具有价值。

所以我写

```
 <tr>
 @if (model.first_name != "" ) { 
   <td >
                @Html.LabelFor(model => model.first_name):
            </td>
            <td >
                @Html.TextBoxFor(model => model.first_name)
                <span class="required">*</span>
                @Html.ValidationMessageFor(model => model.first_name)
            </td>
@ else  
  <td >
  @Html.LabelFor(model => model.first_name):
            </td>
            <td >
                @Html.EditorFor(model => model.first_name)
                <span class="required">*</span>
                @Html.ValidationMessageFor(model => model.first_name)
            </td>
@}

            <td >
                @Html.LabelFor(model => model.first_name):
            </td>
            <td >
                @Html.EditorFor(model => model.first_name)
                <span class="required">*</span>
                @Html.ValidationMessageFor(model => model.first_name)
            </td>
        </tr> 
```

但是它不起作用..如何解决它？我该怎么做？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:11:28.160

您可以将字段`readonly="readonly"`而不是`disabled="disabled"`只读字段值提交给服务器，同时用户仍不可编辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T02:14:28.890

您可以修改您的视图模型，如下所示

```
public class MyViewModel
{
  public string first_name { get; set; }

  public object first_name_attributes
  {
    get
    {
      return string.IsNullOrEmpty(first_name) ? null : new { @readonly = "readonly" };
    }
  }
} 
```

然后，您可以在您的 UI 中以声明方式添加对象。

```
Html.TextBoxFor(x => x.first_name, first_name_attributes) 
```

这导致 UI 更简单，并且视图模型具有可单元测试的优势！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T01:57:51.287

在 razor 中创建一个 if 语句，并在要禁用的输入/编辑器上设置一个 disabled = "disabled"。

```
@if
(model.first_name != null)
{

   <td >
            @Html.LabelFor(model => model.first_name):
        </td>
        <td >
            @Html.TextBoxFor(model => model.first_name)
            <span class="required">*</span>
            @Html.ValidationMessageFor(model => model.first_name)
        </td>
}
else
{
  <td >
  @Html.LabelFor(model => model.first_name):
        </td>
        <td >
            @Html.EditorFor(model => model.first_name, new { disabled = "disabled", @readonly = "readonly" }))
            <span class="required">*</span>
            @Html.ValidationMessageFor(model => model.first_name)
        </td>

        <td >
            @Html.LabelFor(model => model.first_name):
        </td>
        <td >
            @Html.EditorFor(model => model.first_name)
            <span class="required">*</span>
            @Html.ValidationMessageFor(model => model.first_name)
        </td>
    </tr> 
```

}

# c++ - 分段错误：gdb

> ID：13243265
> 
> 赞同：0
> 
> 时间：2012-11-06T01:53:06.900
> 
> 标签：c++

我是 gdb 和一般调试的新手，当然我不确定在没有 gdb 的情况下我是如何做到这一点的。gdb告诉我的程序调试是这个函数有段错误。我将在下面的评论中突出显示它：

```
template <class elemType>
struct nodeType
{
    elemType info;
    nodeType<elemType> *lLink;
    nodeType<elemType> *rLink;
};

#define H_binarySearchTree
#include <iostream>
#include "binaryTree.h"

using namespace std;

template <class elemType>
class bSearchTreeType: public binaryTreeType<elemType>
{
public:
    bool search(const elemType& searchItem) const;
    //Function to determine if searchItem is in the binary
    //search tree.
    //Postcondition: Returns true if searchItem is found in
    //               the binary search tree; otherwise,
    //               returns false.

    void insert(const elemType& insertItem);
    //Function to insert insertItem in the binary search tree.
    //Postcondition: If there is no node in the binary search
    //               tree that has the same info as
    //               insertItem, a node with the info
    //               insertItem is created and inserted in the
    //               binary search tree.

    void deleteNode(const elemType& deleteItem);
    //Function to delete deleteItem from the binary search tree
    //Postcondition: If a node with the same info as deleteItem
    //               is found, it is deleted from the binary
    //               search tree.
    //               If the binary tree is empty or deleteItem
    //               is not in the binary tree, an appropriate
    //               message is printed.
    void printTree();
    void printTree(nodeType<elemType> *p);
    // void printTreeNode(nodeType<elemType> *p);
    void swapSubtrees(nodeType<elemType> *root1);
    void swapSubtrees();
    nodeType<elemType> *root1;

    template <class elemType>
    void bSearchTreeType<elemType>::insert
    (const elemType& insertItem)
    {
        nodeType<elemType> *current; //pointer to traverse the tree
        nodeType<elemType> *trailCurrent; //pointer behind current
        nodeType<elemType> *newNode;  //pointer to create the node

        newNode = new nodeType<elemType>;
        newNode->info = insertItem;
        newNode->lLink = NULL;
        newNode->rLink = NULL;

        if (root1 == NULL)
            root1 = newNode;
        else
        {
            current = root1;
            while (current != NULL)
            {
                trailCurrent = current;

                if (current->info == insertItem)//** This is where gdb says there is a seg fault
                {
                    cout << "The item to be inserted is already ";
                    cout << "in the tree -- duplicates are not "
                    << "allowed." << endl;
                    return;
                }
                else if (current->info > insertItem)
                    current = current->lLink;
                else
                    current = current->rLink;
            }//end while

            if (trailCurrent->info > insertItem)
                trailCurrent->lLink = newNode;
            else
                trailCurrent->rLink = newNode;
        }
    }//end insert

    template<class elemType>
    void bSearchTreeType<elemType>::swapSubtrees(nodeType<elemType> * root1)
    {

        if (root1 != NULL)
        {
            nodeType<elemType> *temp;

            swapSubtrees(root1->lLink);//Seg Fault here as well
            swapSubtrees(root1->rLink);

            temp =root1->lLink;

            root1->lLink = root1->rLink;
            root1->rLink = temp;
        }
    }
} 
```

有人可以帮助描述发生了什么，以及我需要做些什么来解决它吗？

*已编辑以包含更多细节非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:43:36.457

你忘了在你的构造函数中设置`root1`-`NULL`事实上，你似乎没有。

# django - Django 和 Selenium Web 测试错误：[Errno 10054]

> ID：13243267
> 
> 赞同：8
> 
> 时间：2012-11-06T01:53:37.937
> 
> 标签：django, selenium

我正在使用 Selenium Web 驱动程序运行一些基本的功能性 Web 测试，并且在我的两个功能性 Web 测试用例中注意到了这个错误。测试用例最后都通过了，但我在控制台中得到了这个：

```
Exception happened during processing of request from ('127.0.0.1', 1169)
    data = self._sock.recv(self._rbufsize)
error: [Errno 10054] An existing connection was forcibly closed by the remote host
Traceback (most recent call last):
  File "C:\dev\django-projects\barbwire\venv\lib\site-packages\django\test\testcases.py", line 981, in _handle_request_noblock
    self.process_request(request, client_address)
  File "C:\Python27\Lib\SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "C:\Python27\Lib\SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\dev\django-projects\barbwire\venv\lib\site-packages\django\core\servers\basehttp.py", line 139, in __init__
    super(WSGIRequestHandler, self).__init__(*args, **kwargs)
  File "C:\Python27\Lib\SocketServer.py", line 638, in __init__
    self.handle()
  File "C:\Python27\Lib\wsgiref\simple_server.py", line 116, in handle
    self.raw_requestline = self.rfile.readline()
  File "C:\Python27\Lib\socket.py", line 447, in readline
    data = self._sock.recv(self._rbufsize)
error: [Errno 10054] An existing connection was forcibly closed by the remote host
Traceback (most recent call last):
  File "C:\dev\django-projects\barbwire\venv\lib\site-packages\django\test\testcases.py", line 981, in _handle_request_noblock
    self.process_request(request, client_address)
  File "C:\Python27\Lib\SocketServer.py", line 310, in process_request
    self.finish_request(request, client_address)
  File "C:\Python27\Lib\SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "C:\dev\django-projects\barbwire\venv\lib\site-packages\django\core\servers\basehttp.py", line 139, in __init__
    super(WSGIRequestHandler, self).__init__(*args, **kwargs)
  File "C:\Python27\Lib\SocketServer.py", line 638, in __init__
    self.handle()
  File "C:\Python27\Lib\wsgiref\simple_server.py", line 116, in handle
    self.raw_requestline = self.rfile.readline()
  File "C:\Python27\Lib\socket.py", line 447, in readline
    data = self._sock.recv(self._rbufsize)
error: [Errno 10054] An existing connection was forcibly closed by the remote host
----------------------------------------
----------------------------------------
Exception happened during processing of request from ('127.0.0.1', 1170)
----------------------------------------
Destroying test database for alias 'default'... 
```

这是其中一个测试用例的示例：

```
def test_can_join_main_site(self):
    self.browser.get(self.live_server_url)
    self.browser.find_element_by_link_text('Register').click()
    time.sleep(5)
    self.browser.find_element_by_name('submit').click()
    time.sleep(5) 
```

它运行完成但转储上述异常。这个想法是测试一个简单的注册页面。单击提交按钮后，页面重新显示并提示用户填写其他表单字段。正如预期的那样，一切似乎都正常工作，但为什么会出现错误？我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-21T21:46:29.203

用 127.0.0.1替换`localhost`对我不起作用，添加`sleep`只会减慢测试速度。在退出浏览器之前，我可以通过调用 refresh 来消除错误：

```
from selenium import webdriver
browser = webdriver.Firefox()
# do stuff with browser
browser.refresh()
browser.quit() 
```

就我而言，是静态文件`<link>`和`<script>`标签的加载导致了问题。但是当我`refresh`在退出前添加时它就消失了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T20:00:17.087

使用 FireFox，我能够通过充分减慢关机过程来解决这个问题：

```
@classmethod
def tearDownClass(cls):
    time.sleep(3)
    cls.selenium.quit()
    time.sleep(3)
    super(TestClass, cls).tearDownClass() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T00:22:46.753

`localhost`我通过`127.0.0.1`在 URL 中替换为解决了这个问题：

```
 url = self.live_server_url
    url = url.replace('localhost', '127.0.0.1')
    self.driver.get('%s%s' % (url, reverse('whatever'))) 
```

我在这里找到了解决方案：[https ://code.djangoproject.com/ticket/15178](https://code.djangoproject.com/ticket/15178)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-28T16:39:01.563

**Django 调试工具栏**会生成大量此类错误。卸载并重试

# asp.net-mvc-3 - MVC 3 程序集冲突如何

> ID：13243270
> 
> 赞同：0
> 
> 时间：2012-11-06T01:54:06.593
> 
> 标签：asp.net-mvc-3, model-view-controller, reference, runtime-error, .net-assembly

每次我下载一些开源或付费 MVC3 应用程序时，我都会遇到一些程序集冲突，即：缺少程序集、错误版本等。所以我想我应该问一个更普遍的问题：

在一个典型的项目中，您有一个名为 References 的文件夹，所有程序集似乎都在该文件夹中，以及它们的版本号和“复制到本地”选项等。

然而，在该文件夹中的 10-20 个引用中，我经常在 web.config 中找到一些引用。

我在 web.config 中遇到的这种烦人的混淆的最新案例：

```
<compilation debug="false" targetFramework="4.0">
  <assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
</compilation> 
```

我收到一个项目试图加载 System.Web.Helpers, Version=1.0.0.0 的错误 - 它没有找到。

在 References 文件夹中，引用的 System.Web.Helpers 是 2.0.0 版本，无法更改此版本号，因为它是灰色的。更改为特定版本不会改变任何内容。

**问题：**

为什么 Web.config 中有 4 个引用？为什么不只是参考文件夹？

为什么我经常在 web.config 中找到*部分数量的程序集标签*，而不是在 References 项目文件夹下看到的没有或全部引用？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T16:44:37.447

也许尝试重新安装 MVC3？Web.config 中的那些引用是可以的，因为它们应该是......

这是我的Web.config，在那部分....

```
<add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
<add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

# php - 将侧边栏添加到主页布局？

> ID：13243271
> 
> 赞同：2
> 
> 时间：2012-11-06T01:54:15.483
> 
> 标签：php, magento

我已经更新了我的`page.xml`文件以在左列中包含类别模板，如下所示：

```
<page_one_column_home translate="label">
    <label>All One-Column Home Layout Pages</label>
    <reference name="root">
        <action method="setTemplate"><template>page/1column-home.phtml</template></action>
        <!-- Mark root page block that template is applied -->
        <action method="setIsHandle"><applied>1</applied></action>
    </reference>
    ...
</page_one_column_home> 
```

添加了这段代码：

```
 <reference name="left">
        <block type="catalog/navigation" name="category.sidebar" as="categorySidebar" template="catalog/navigation/left.phtml"/>
    </reference> 
```

我还更新了主页模板文件以打印在“左”列中生成的 HTML：

```
<?php echo $this->getChildHtml('left'); ?> 
```

但是，这不起作用；结果是在主页布局的左栏中没有打印任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:18:38.670

无需修改您自己的基本模板。

去

```
Magento CMS -> pages -> home 
```

更改设计选项卡，根据需要选择布局 2columns-left 或 3-columns。

然后您可以使用左侧导航，但可能需要进行一些更改。如果您检查 left.phtml，它会检查是否有任何当前类别，如果没有则不会显示。

您可以复制该模板，例如：

```
copy catalog/navigation/left.phtml to catalog/navigation/left-home.phtml 
```

然后你可以改变这个：

```
<?php if (!Mage::registry('current_category')) return ?>
<?php $_categories = $this->getCurrentChildCategories() ?> 
```

对此：

```
<?php //if (!Mage::registry('current_category')) return ?>
<?php $_categories = $this->getStoreCategories() ?> 
```

这将使左侧导航为您显示所有顶级类别。

然后将其添加到您的 CMS -> 页面 -> 主页布局更新 XML。

```
<reference name="left">
    <block type="catalog/navigation" name="catalog.leftnav"  as="categorySidebar" after="currency"     template="catalog/navigation/left-home.phtml"/>
    </block>
</reference> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:01:13.373

请试试这个

```
<default>
    <reference name="left">
    <block type="catalog/navigation" name="catalog.leftnav"  as="categorySidebar" after="currency"     template="catalog/navigation/left.phtml"/>
    </block>
    </reference>
    </default> 
```

同时清除 magento 缓存

# java - 加密Android代码？

> ID：13243272
> 
> 赞同：1
> 
> 时间：2012-11-06T01:54:16.277
> 
> 标签：java, android, security, encryption, obfuscation

> **可能重复：**
> [如何加密 .jar 文件](https://stackoverflow.com/questions/7187883/how-to-encrypt-a-jar-file)

我知道混淆，但它所做的只是让代码更难理解。它并没有真正加密代码。有没有办法加密Android代码？或者有什么替代方法可以使代码在反编译时更加不可恢复？

我问这个问题是为了知道我正在寻找的东西是否可能。现在，我的想法是不可能加密代码，因为如果我们加密它，Dalvik 也将无法理解代码并运行它。但我不太确定。有可能我什么都不知道。

请发表您对此有何看法或您有什么建议？另外，请考虑一个金融应用程序，其中可以访问人类可读的代码意味着能够理解后端正在进行的财务流程的流程。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:42:31.417

通过隐藏代码、插入伪指令等，有不同的努力使标准 DEX 反编译器工具的生活变得更加困难。这几乎都是研究阶段的 ATM，但您可以在网上找到有关它的论文和演示文稿，以及一些示例工具。

ProGuard 的作者还[提供了 DexGuard](http://www.saikoa.com/dexguard)（不是免费的），它可以加密字符串（标准混淆不会），从而使在反编译代码中搜索内容变得更加困难。我没有亲自使用过，但您可能想尝试一下。

最终，为了能够运行某些东西，您必须解密/解扰/任何东西，以便您可以将其提供给 VM。如果您对设备有完全的控制权（即 root 权限和物理访问），您可以转储内存、在系统库中引入挂钩等，并获得实际的可运行代码。正如其他人所建议的那样，如果您有真正敏感的代码，它应该存在于您的服务器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:57:28.227

根据定义，机器必须能够读取您的代码。因此......任何有机器的人都可以阅读您的代码。

唯一的替代方法是强迫用户联系您的第三方网站并以某种方式从您那里获取信息。

# c++ - 为什么累积比简单的循环更快？

> ID：13243274
> 
> 赞同：10
> 
> 时间：2012-11-06T01:54:22.690
> 
> 标签：c++, performance

我正在测试算法并遇到这种奇怪的行为，`std::accumulate`比简单的`for`循环更快。

看看生成的汇编程序，我并不聪明:-) 似乎`for`循环被优化为 MMX 指令，而累加则扩展为循环。

这是代码。行为表现在`-O3`优化级别，gcc 4.7.1

```
#include <vector>                                                                                                                                                                                                                                                              
#include <chrono>                                                                                                                                                                                                                                                              
#include <iostream>                                                                                                                                                                                                                                                            
#include <random>                                                                                                                                                                                                                                                              
#include <algorithm>                                                                                                                                                                                                                                                           
using namespace std;                                                                                                                                                                                                                                                           

int main()                                                                                                                                                                                                                                                                     
{                                                                                                                                                                                                                                                                              
    const size_t vsize = 100*1000*1000;                                                                                                                                                                                                                                        

    vector<int> x;
    x.reserve(vsize);

    mt19937 rng;
    rng.seed(chrono::system_clock::to_time_t(chrono::system_clock::now()));

    uniform_int_distribution<uint32_t> dist(0,10);

    for (size_t i = 0; i < vsize; i++)
    {
        x.push_back(dist(rng));
    }

    long long tmp = 0;
    for (size_t i = 0; i < vsize; i++)
    {
        tmp += x[i];
    }

    cout << "dry run " << tmp << endl;

    auto start = chrono::high_resolution_clock::now();
    long long suma = accumulate(x.begin(),x.end(),0);
    auto end = chrono::high_resolution_clock::now();

    cout << "Accumulate runtime " << chrono::duration_cast<chrono::nanoseconds>(end-start).count() << " - " << suma << endl;

    start = chrono::high_resolution_clock::now();
    suma = 0;
    for (size_t i = 0; i < vsize; i++)
    {
        suma += x[i];
    }
    end = chrono::high_resolution_clock::now();

    cout << "Manual sum runtime " << chrono::duration_cast<chrono::nanoseconds>(end-start).count() << " - " << suma <<  endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T02:52:30.323

当您通过`0`累积时，您正在使用 int 而不是 long long 来累积。

如果您像这样编写手动循环，它将是等效的：

```
int sumb = 0;
for (size_t i = 0; i < vsize; i++)
{
    sumb += x[i];
}
suma = sumb; 
```

或者你可以像这样调用累加：

```
long long suma = accumulate(x.begin(),x.end(),0LL); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T02:58:34.453

我使用 Visual Studio 2012 得到了一些不同的结果

```
// original code
Accumulate runtime 93600 ms
Manual sum runtime 140400 ms 
```

请注意，原始`std::accumulate`代码不等同于`for`循环，因为第三个参数 to`std::accumulate`是`int`0 值。它使用 a 执行求和，`int`并且仅在最后将结果存储在 a 中`long long`。更改第三个参数以`0LL`强制算法使用`long long`累加器并导致以下时间。

```
// change std::accumulate initial value -> 0LL
Accumulate runtime 265200 ms
Manual sum runtime 140400 ms 
```

由于最终结果适合`int`我更改`suma`并`std::accumulate`返回仅使用`int`值。在此更改之后，MSVC 2012 编译器能够**自动矢量化**循环`for`并导致以下时间。

```
// change suma from long long to int
Accumulate runtime 93600 ms
Manual sum runtime 46800 ms 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T03:22:29.583

在修复了累积问题后，其他人注意到我使用 Visual Studio 2008 和 2010 进行了测试，累积确实比手动循环更快。

查看反汇编，我看到在手动循环中进行了一些额外的迭代器检查，所以我切换到一个原始数组来消除它。

这是我最终测试的内容：

```
#include <Windows.h>
#include <iostream>
#include <numeric>
#include <stdlib.h>

int main() 
{
    const size_t vsize = 100*1000*1000;                                                                                                                                                                                                                                        
    int* x = new int[vsize];

    for (size_t i = 0; i < vsize; i++) x[i] = rand() % 1000;

    LARGE_INTEGER start,stop;
    long long suma = 0, sumb = 0, timea = 0, timeb = 0;

    QueryPerformanceCounter( &start );
    suma = std::accumulate(x, x + vsize, 0LL);
    QueryPerformanceCounter( &stop );
    timea = stop.QuadPart - start.QuadPart;

    QueryPerformanceCounter( &start );
    for (size_t i = 0; i < vsize; ++i) sumb += x[i];
    QueryPerformanceCounter( &stop );
    timeb = stop.QuadPart - start.QuadPart;

    std::cout << "Accumulate: " << timea << " - " << suma << std::endl;
    std::cout << "      Loop: " << timeb << " - " << sumb << std::endl;

    delete [] x;
    return 0;
}

Accumulate: 633942 - 49678806711
      Loop: 292642 - 49678806711 
```

使用此代码，手动循环很容易击败累积。最大的不同是编译器将手动循环展开了 4 次，否则生成的代码几乎相同。

# c++ - QWebView,如何判断此链接是否为新窗口？

> ID：13243275
> 
> 赞同：1
> 
> 时间：2012-11-06T01:54:23.373
> 
> 标签：c++, qt, qwebview, qwebpage, qtnetwork

代码

```
 News::News(QWidget *parent) :
   QDialog(parent),
  ui(new Ui::News)
  {
   ui->setupUi(this);
   ui->webView->page()->setLinkDelegationPolicy(QWebPage::DelegateAllLinks);
   connect(ui->webView,SIGNAL(linkClicked(QUrl)),this,SLOT(openUrl(QUrl)));
  }

void News::openUrl(QUrl url){
  if(the new window)
        QDesktopServices::openUrl(url);
  }else{
    ui->webView->load(url);
  }
} 
```

如何判断不是新窗口链接函数openUrl？我将如何编写这段代码、？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:03:11.227

您需要从 QWebView 继承您自己的类并重新实现 createWindow() 方法。[http://doc.qt.digia.com/qt/qwebview.html#createWindow](http://doc.qt.digia.com/qt/qwebview.html#createWindow)

# xbee - 使用带有 xbee 芯片的 Dragon12 板进行通信

> ID：13243276
> 
> 赞同：1
> 
> 时间：2012-11-06T01:54:23.903
> 
> 标签：xbee, codewarrior

所以基本上，我和一个朋友在学校的课堂上使用 Dragon12-Plus2 板，我们正试图让他们通过 Xbee 芯片交谈。我们已经连接了其中一个，只需要一些代码就可以让 Xbee 与电路板对话，这样我们就可以确保它正确连接。我们正在使用飞思卡尔 Codewarrior 用 C 语言编写，并感谢尽可能多的帮助，尤其是接下来的步骤，例如当我们连接另一个时，如何让两者进行交谈和测试等。理论上它们应该已经设置好了作为一个点对点系统，但我们目前没有太多经验。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T17:19:29.940

如果您使用“AT 模式”固件配置 XBee 模块，您应该能够使用 Dragon12-Plus2 板上的串行端口进行通信，就像使用有线连接一样。

您需要使用相同的 PAN ID 配置两个无线电。使一个协调器和另一个路由器。在协调器上，配置`DH`和`DL`设置以匹配路由器的`SH`和`SL`设置。您可以保留路由器的默认配置使用`0`for`DH`和`DL`，它告诉它向协调器发送数据。

在带有两个终端仿真器的 PC 上进行测试，这样您就可以验证在一个终端上发送的数据是否在另一个终端上输出，反之亦然。

[这是 Digi 网站上关于Basic XBee ZB ZigBee（系列 2）聊天](http://examples.digi.com/get-started/basic-xbee-zb-zigbee-chat/)的优秀指南，其中提供了更多详细信息和配置无线电的分步指南。

# sockets - Unix中的accept()函数实现

> ID：13243277
> 
> 赞同：2
> 
> 时间：2012-11-06T01:54:25.650
> 
> 标签：sockets, networking, tcp, network-programming

我在 BSD 代码中查找过，但在某处迷路了 :(

我要检查的原因是：

TCP RFC ( [http://www.ietf.org/rfc/rfc793.txt](http://www.ietf.org/rfc/rfc793.txt) ) sec 2.7 状态：

“为了在每个 TCP 中提供唯一地址，我们将标识 TCP 的 Internet 地址与端口标识符连接起来，以创建一个套接字，该套接字在连接在一起的所有网络中都是唯一的。连接完全由两端的套接字对指定。 "

这是否意味着：socket = local (ip + port) ？

如果是，则 Unix 的接受函数返回一个新的套接字描述符。这是否意味着创建了一个新的套接字（进而创建了一个新的端口）来响应客户端请求？

PS：我是网络编程的新手。

[更新] 我明白了我读到[的@socket API accept() 函数是如何工作的？](https://stackoverflow.com/questions/489036/how-does-the-socket-api-accept-function-work). 我唯一的疑问是：如果 socket = (local port +local ip)，那么一个新的 socket 将意味着相同 IP 的一个新端口。按照这个逻辑，accept 返回一个新的套接字（因此创建了一个新的端口）。所以所有发送都应该通过这个新端口进行。我在这里的理解正确吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T03:44:17.990

你大多是正确的。当您`accept()`创建一个新套接字时，侦听套接字保持打开状态以允许更多传入连接，但新套接字使用与侦听套接字相同的本地端口号。

连接由 5 元组定义：协议、本地地址、本地端口、远程地址、远程端口。

因此，每个接受的连接都是唯一的，即使它们都共享相同的本地端口号，因为远程 ip/端口总是不同的。监听套接字没有远程 IP/端口，因此也是唯一的。

# php - 向数据库 Codeigniter 提交基本输入

> ID：13243281
> 
> 赞同：1
> 
> 时间：2012-11-06T01:54:47.480
> 
> 标签：php, codeigniter

所以，我要做的就是从表单输入向数据库提交一些值。

我有一个控制器**clientcreation.php**：

```
<?php

class Clientcreation extends CI_Controller
{
  function index(){
     $this->load->view('files/header',$clientRegistration);
     $this->load->view('files/navigation');
     $this->load->view('pages/clientcreation');
     $this->load->view('files/footer');

    ## validation rules here working fine.

     $this->form_validation->set_rules($RegistrationRequiredFields);
        ## Perform Validation
        if ($this->form_validation->run() == FALSE){
             echo validation_errors();             ## show the errorneous fields
        }

    else{
            #### load :: models
            $this->load->model('pages/clientcreationmodel','',TRUE);
                ## get [hashed] inputted pass and submit.
                $this->Clientcreationmodel->hashed_client_pass_and_submit();
            # then, load success page:
            $this->load->view('pages/success/clientRegistrationSuccess');
    }

  }

} 
```

一个模型**clientcreationmodel.php**：

```
<?php
class Clientcreationmodel extends CI_Model{
    function __construct()
    {
        // Call the Model constructor
        parent::__construct();
    }

    function hashed_client_pass_and_submit(){
        ## create hashed version of client inputted [pass]
    /*    
        $initialVal = $_POST['pass'];
        $HashedPassVal = hash('sha512', $initialVal);
        $SaltValue = mcrypt_create_iv(10, MCRYPT_DEV_URANDOM);
        $finalHashedValue = $HashedPassVal.$SaltValue;
    */    
        ## process and insert into db
        $this->input->post('email', TRUE);     
        $this->input->post('pass', TRUE);
        $this->input->post('fname', TRUE);
        $this->input->post('lname', TRUE);
        $this->input->post('title', TRUE);
        $this->input->post('co', TRUE);
        $this->input->post('phone', TRUE);
        $this->input->post('state', TRUE);  
        $this->input->post('numapps', TRUE);
        $this->input->post('versCntrl', TRUE);
        $this->input->post('testFreq', TRUE);
        $this->input->post('submit');

        $this->db->insert('client', $this);
   }

}
?> 
```

一个视图**clientcreation.php**：

```
<?php
    echo form_open('index/pages/clientcreation',$CustCreationFormAttr);
    echo form_label('Email: ','email');
        echo form_input($CustCreationEmail);echo '<br>';
    echo form_label('Password: ', 'pass');echo '<br>';
        echo form_password($CustCreationPassword);echo '<br>';
    echo form_label('Password Confirm: ', 'passConf');echo '<br>';
        echo form_password($CustCreationConfPassword);echo '<br>';
    echo form_label('First Name: ','fname');echo '<br>';
            echo form_input($CustCreationFirstName);echo '<br>';
    echo form_label('Last Name: ','lname');echo '<br>';
            echo form_input($CustCreationLastName);echo '<br>';
    echo form_label('Title: ', 'title');echo '<br>';
            echo form_input($CustCreationClientTitle);echo '<br>';
    echo form_label('Company: ', 'co');echo '<br>';
            echo form_input($CustCreationCompany);echo '<br>';
        echo form_label('Phone: ','phone');echo '<br>';
            echo form_input($CustCreationPhone);echo '<br>';
    echo form_label('State: ','state');echo '<br>';
            echo form_dropdown('states',$CustCreationState,'Alabama');echo '<br>';
    echo form_label('Number of Applications: ','numapps');echo '<br>';
            echo form_input($CustCreationNumApps);echo '<br>';
    echo form_label('Version Control: ','versCntrl');echo '<br>';
            echo form_dropdown('versCntrl',$CustCreationVerCntrl,'Subversion'); echo '<br>';
    echo form_label('How often do you test? ','testFreq');echo '<br>';
            echo form_dropdown('freq',$CustCreationTestFreq,'Daily');echo '<br>';
    echo form_submit($CustCreationSubmit,'Submit');    
?> 
```

但在我提交后，我收到以下错误： ![img2](../Images/739821e997a7be97fc1941f0bd80818b.png)

是否因为文件 clientcreationmodel.php 与视图和控制器的 clientcreation.php 命名约定不同而引发此错误？

如果我尝试修改模型中的模型类，因为`class Classcreation extends CI_Model{}`它会引发错误：`Fatal error: Cannot redeclare class Clientcreation`. 我应该在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:47:07.043

加载模型后，您将使用小写 c 拼写实例

所以在你的控制器中，它会是

```
$this->clientcreationmodel->hashed_client_pass_and_submit(); 
```

现在注意它的小写字母。

此外，模型第二个参数的加载器不应该是 '' 并且您根本不需要设置第三个参数。你可以这样做，它应该可以正常工作。第二个参数用于设置与默认值不同的对象名称。所以这应该可以正常工作。

```
$this->load->model('pages/clientcreationmodel'); 
```

# android - 在多个活动中更新 UI 的 Android 后台线程

> ID：13243283
> 
> 赞同：0
> 
> 时间：2012-11-06T01:54:59.683
> 
> 标签：android, multithreading

我对 Android 很陌生，这是我的第一个应用程序。我只是在寻找能指引我正确方向的人。

我正在构建一个应用程序，它将每分钟通过 tcp/ip 查询服务器。我想在每个活动/屏幕的顶部显示此服务器的状态（向上/向下）。

我的问题是：

1) 我应该使用什么来在后台连续 ping 多个活动的服务器？例如，有没有办法从一个活动中生成一个线程，即使用户转到另一个屏幕，它也会继续？

2) 如何允许该线程在用户碰巧正在查看的任何屏幕上更新状态标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T01:59:18.337

1.  使用服务。请先熟悉文档。
2.  您可以使用服务绑定或本地广播消息来通知您当前/前面的活动有关您的服务的更改

# c# - (OAuthException) (#200) 用户必须接受 C# 上的 TOS - Facebook

> ID：13243286
> 
> 赞同：2
> 
> 时间：2012-11-06T01:55:26.550
> 
> 标签：c#, facebook, facebook-graph-api, facebook-oauth

好吧，我正在尝试制作一个应用程序来用 C# 向 facebook 写评论。在谷歌搜索我知道我需要一个应用程序（我做到了），我需要选择权限。我做到了.. 现在我用 C# 编写了我的代码：

```
private string MyAppId = "XXX";
private string MyAppSecret = "XXX";
private void button1_Click(object sender, EventArgs e)
{
  FacebookClient FB = new FacebookClient(MyAppId, MyAppSecret);
  Dictionary<string,string> data = new Dictionary<string,string>();
  data.Add("message","test");
  FB.Post("OBJECT_ID/comments", data);
} 
```

但是当我单击按钮时，我收到此错误：

> (OAuthException) (#200) 用户必须接受 TOS

我快疯了！请帮帮我=(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:15:13.283

看起来您实际上并没有使用用户访问令牌。

您需要通过[OAuth 工作流程](https://developers.facebook.com/docs/concepts/login/)，将用户重定向到 facebook.com 并授予您的应用程序权限。一旦发生这种情况，您将获得一个访问令牌，用于代表用户发出请求。

[FacebookClient](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/blob/master/Source/Facebook/FacebookClient.cs)类有一个需要访问令牌的重载。

由于您并没有真正扩展您正在编写的应用程序的类型，因此[Facebook C# Github 页面](https://github.com/facebook-csharp-sdk)有一系列示例，用于 WinForms、ASP.NET 和 Windows 8 Metro。[此示例](https://github.com/facebook-csharp-sdk/facebook-windows8-sample/tree/master/src/facebook-metro-sample)应向您展示如何进行客户端身份验证。

您还尝试发布到 OBJECT_ID，这不是有效的用户/帖子/页面。

# c# - 使用 2 个表单时是否需要两个单独的 InvokeRequired 检查？

> ID：13243291
> 
> 赞同：1
> 
> 时间：2012-11-06T01:56:09.507
> 
> 标签：c#, winforms, multithreading, invoke

给定

```
Action closeLoadingAction = new Action(() =>
{
  loadingForm.Close();
  #region - may need to put into second Action
  panelOnMainForm.Controls.AddRange(physdocControls.ToList<Control>().ToArray());
  if (Handle != IntPtr.Zero)
    User32DLL.SetForegroundWindow(this.Handle);//Handle is a property of the mainForm.
  #endregion
}); 
```

有时即使我检查了所需的调用，我也会处理未创建的异常。

```
if(loadingForm.InvokeRequired)
   loadingForm.Invoke(closeLoadingAction);
else
   closeLoadingAction(); 
```

加载表单与主表单在同一线程上运行。您在上面看到的代码在单独的线程中运行。我怀疑我需要针对主表单再次检查调用。我需要第二次检查还是我已经安全的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:02:09.417

> 您在上面看到的代码在单独的线程中运行

**当您知道**代码在另一个线程上运行时，像这样使用 InvokeRequired是一种不好的反模式。你可以用它做更多有用的事情。喜欢：

```
if (!loadingForm.InvokeRequired) {
    throw new InvalidOperationException("Threading race detected");
}
loadingForm.Invoke(closeLoadingAction); 
```

或者如果您打算在加载表单的 Load 事件触发之前启动加载线程，则更实用：

```
while (!loadingForm.InvokeRequired) Thread.Sleep(50);
loadingForm.Invoke(closeLoadingAction); 
```

或者只是以正确的方式进行操作并让表单的 Load 事件启动线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:05:08.223

听起来像是为创建的句柄`loadingForm`和对 的调用之间的竞争`loadingForm.Close()`。

解决此问题的一种方法是在事件触发时启动包含您的`.Invoke`/`.Close`代码的线程。`loadingForm.HandleCreated`

```
private void loadingForm_HandleCreated(object sender, EventArgs e)
{
    var t = new Thread(DoLoadingStuff);
    t.Start();
}

private void DoLoadingStuff()
{
    // ...

    if(loadingForm.InvokeRequired)
       loadingForm.Invoke(closeLoadingAction);
    else
       closeLoadingAction();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T02:18:31.913

如果在您尝试`Invoke`委托之前未显示或关闭表单，您应该只获得那些“未创建句柄”异常。没有足够的代码来确定是否是这种情况，所以如果我在你的鞋子里，我会尝试确定`Closed`在方法实际被调用之前是否正在调用加载表单的（因为那是调用者）事件。

`InvokeRequired`因为两个表单都在同一个线程上，所以只检查加载表单的属性就应该是安全的。虽然一般来说，如果你要在主窗体上操作，你应该检查那个窗体的`InvokeRequired`属性。同样，如果您要对加载表单进行操作（如`Close`上面调用），您应该检查加载表单的`InvokeRequired`属性。上面你正在改变`panelOnMainForm`，所以我会检查它是否完全安全，但我认为没有必要。

# javascript - 混合文本/数字的正则表达式头痛

> ID：13243292
> 
> 赞同：1
> 
> 时间：2012-11-06T01:56:18.453
> 
> 标签：javascript, regex

我正在使用来自带有 Javascript 的数据库的数据进行“小胡子灯”模板化。数据如下所示：

> 正如您在 {{Figure 1-1}} 以及在 {{Figures 1-2}} 和 {{1-3}} 中看到的，hozzfrazz 比 hooble stick 干净得多。

我的正则表达式是`\{\{[-a-zA-Z0-9\s]+\}\}/gi`，在我看来，它捕获了上述所有的胡须。但是在我的功能中唯一被识别的是`{{1-3}}`，而不是其他两个。

有什么帮助吗？

显然我还需要添加我的函数，因为正则表达式有效：

```
var mReg = new RegExp("\{\{[-a-zA-Z0-9\s]+\}\}");
var link_tpl = "<a href='#' rel='@$' class='questionImageLink'>@@</a>";
var html = ''; 
var i = 1;
while (mReg.test(mText) === true) {
    mText = mText.replace(mReg, function (f) {
        var inner = f.substr(2, f.indexOf("}") - 2);
        return link_tpl.replace("@@", inner).replace("@$", i);
    }, "g");
    i++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:34:49.833

我会这样做，使用更宽容的正则表达式而`replace`不是`while`混乱。

```
var re = /\{\{([^{}]+)\}\}/g;
var results = [];

str.replace( re, function(a, b) { results.push(b); });

console.log(results); //=> ['Figure 1-1', 'Figures 1-2', '1-3'] 
```

**演示：http:** [//jsfiddle.net/elclanrs/fE3U3/](http://jsfiddle.net/elclanrs/fE3U3/)

# android - Eclipse Juno 安装依赖（离线解决方案）

> ID：13243293
> 
> 赞同：3
> 
> 时间：2012-11-06T01:56:27.840
> 
> 标签：android, eclipse

大家好，我的 Eclipes Juno 遇到了这种问题，因为这个问题，我
无法创建新的 android 项目

![安装依赖项](../Images/779ec7dd9c947875f7963773f85efbea.png)

我发现了几个关于这个问题的话题，
但几乎所有的答案都指向两个解决方案

“从 Android SDK 管理器中卸载支持库”
“有互联网连接并在线更新”

我也有两个问题......
首先，我家没有互联网连接
其次，“我没有”（支持库）
这是我的 android SDK

![我的安卓 SDK](../Images/0cd5fcd03f7744e8a8962c95d8a1c29a.png)

如您所见，我没有支持库，因此不要卸载

也许你会感到困惑“如果我说我家没有互联网连接，我从哪里得到这些平台”
好吧，我已经手动下载了所有这些并手动提取到我的“平台”目录......
我有之前遇到过一些错误

![缺少 SDK 平台工具组件！](../Images/b6c9a7170c8ed7b57575f92d46e68114.png)

幸运的是，我能够使用手动下载和提取（一些解决方法）来解决它，
但这似乎是我目前最难的一个......
我一直在浏览网页以找到这样的“支持 library.zip “所以我所要做的就是将其提取到其各自的目录中，然后一步一步地提取它......但遗憾的是我什么也没找到......

我正在考虑一些可行的解决方案
，也许我需要一个运行良好的 Eclipse Juno 的人的帮助，
提出一个请求，比如“你能从你的 SDK 中压缩你的支持库文件夹并上传到这里吗”
和一个简单的“路径”到我必须在什么目录中提取它。

不管它可能......我
只是尝试每一个解决方法只是为了“离线”解决它
我知道在线解决方案不那么麻烦，只需点击一下，问题就解决了，
但你知道它是怎么发生的吗？
你知道 eclipse 或 SDK 做了什么来解决这个问题吗？
这就是为什么我希望它离线只是为了让我了解它的每一点......
我想离线解决它......

先感谢您.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:42:10.087

你可以去下载**ADT-20.0.0.zip**，安装它然后重启 Eclipse。因为google是2.2及更早的版本到官方库，支持很多3.0及更高版本的功能，在新建的时候，默认会给你添加libs文件夹和android-support-v4。Jar。我也可以直接发给你**ADT-20.0.0.zip 。**请告诉我你的E-mail！</p>

# python - Python 正则表达式匹配，只要没有字符

> ID：13243295
> 
> 赞同：0
> 
> 时间：2012-11-06T01:56:47.120
> 
> 标签：python, regex, negative-lookbehind

我在使用另一个正则表达式时遇到了一些麻烦。对于这个，我的代码应该寻找模式：

```
re.compile(r"kill(?:ed|ing|s)\D*(\d+).*?(?:men|women|children|people)?") 
```

但是，它的匹配过于激进。它恰好匹配一个包含“杀死”这个词的句子。但是该模式会继续收集，直到它在文本中进一步向下达到一个数字。特别是，它匹配：

```
killed in an apparent u.s. drone attack on a car in yemen on sunday, tribal sources and local officials said.the men's car was driving through the south-eastern province of maareb, a mostly desert region where militants have taken refuge after being driven from southern strongholds.yemen, where al qaeda militants exploited a security vacuum during last year's uprising that ousted president ali abdullah saleh, has seen an in10 
```

这不是我所追求的行为。如果在一个句子中找不到这种模式，我希望它失败。

我试图用伪代码实现的解决方案是：

```
find instance of 'kill'
if what follows contains a period (\.) before a digit, do not match. 
```

我失败的实现如下所示：

```
re.compile(r"kill(?:ed|ing|s)\D*(?!:\..*?)(\d+).*?(?:men|women|children|people)?") 
```

我尝试了“后视”，但我必须指定一个宽度。我试图用上面做的是匹配任何'kill'的结尾，然后是任何非数字，但不匹配一个句点，并且在我之后的数字之前可以自由跟随任何其他内容。

可悲的是，这段代码在我的测试中表现得完全一样。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:04:47.240

一个小修改：

```
r"kill(?:ed|ing|s)[^\d.]*(\d+)[^.]*?(?:men|women|children|people)?" 
```

`.`基本上，我防止在 kill 和 men/women/etc 之间匹配句号。之后。

# kml - appendChild kmz 仅在我进行游览时第二次起作用（游览进入同一个 kmz）

> ID：13243301
> 
> 赞同：0
> 
> 时间：2012-11-06T01:57:38.417
> 
> 标签：kml, google-earth, google-earth-plugin, appendchild, kmz

我有一个 GE 插件的 KMZ 文件。这个文件有很多 PNG 和几个 kml（poligons、lines、placemarks 等）。

运行此游览的功能是：

```
function loadKmztour(href){
google.earth.fetchKml(ge, kmlURL, function(kmlObject) {
     if (kmlObject){
        ge.getFeatures().appendChild(kmlObject);
        walkKmlDom(kmlObject, function(context) {
            if (this.getType() == 'KmlTour') {
                ge.getTourPlayer().setTour(this);
                ge.getTourPlayer().play();
            }
        });
    }); 
```

}

它运行良好，但只是我第二次进行巡回演出。当我第一次运行它时，它只运行游览但不显示 poligons、地标和 png，但如果我第二次单击游览，它工作正常。

如何强制第一次加载 kmz 信息？

感谢您的任何帮助。最好的问候， 俊秀。

**更新：**有时，kmz poligons 和 placemarks 会在第一次加载......但它只在某些时候起作用......我认为也许游览在附加 kmz 之前开始运行，所以问题是我如何强制等待appendChild 然后运行游览...谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:21:16.117

尝试等到加载完 kml 后再玩游览。我使用这段代码：

`var interval = setInterval(function wait() { var streamingPercent = ge.getStreamingPercent(); if(streamingPercent > 98) { ge.getTourPlayer().setTour(tour); ge.getTourPlayer().play(); clearInterval(interval); } }`

# web-applications - 关于构建 Clojure Web 应用程序的库的建议

> ID：13243305
> 
> 赞同：1
> 
> 时间：2012-11-06T01:58:04.497
> 
> 标签：web-applications, clojure

现在是 2012 年末，我找不到关于使用 Clojure 构建“传统”网络应用程序的一组库的*最新建议。*

我喜欢[Noir](http://webnoir.org/)和[Korma](http://sqlkorma.com/)，而且 ClojureWekz Mailer 看起来不错，还有其他建议吗？

我正在寻找关于图书馆的具体建议：

*   模板
*   邮寄者
*   测试
*   网络资产

谢谢！

编辑：按照建议将“框架”更改为“库”，因为我不是在寻找整个堆栈，而是一组用于常见任务和功能的推荐库（如上所列）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T04:33:11.290

我不认为`single framework`Clojure 世界里有这样的东西。您基本上有不同的库来解决特定问题，例如`Noir`指定请求处理程序、`enlive`服务器端模板等。所以基本上你为你的应用程序的不同目的选择库，然后构建你的应用程序，对我来说，这比你在 .NET/Java 世界中拥有的那些大型重型框架更可取。

虽然这可能会给刚接触 clojure 的人带来问题，因为他/她可能会寻找可以快速生成简单应用程序的框架之类的东西，但从长远来看，这种库方法比大块的框架更有益。

这种库方法的一个重要方面是这些库应该是可组合的，以使这种非框架方法工作，这是通过使用 clojure 内置数据结构（如向量、集合、映射等）并使用简单的可组合函数公开功能来实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T13:45:56.590

[clojure-toolbox](http://www.clojure-toolbox.com/)上列出了许多用于不同目的的库，您可以去那里查看。

注意：这些网站几个月后没有更新，所以最近的图书馆[在这里不可用](http://www.clojure-toolbox.com/)

# java - 哈希算法中真正奇怪的碰撞：巧合还是错误？

> ID：13243312
> 
> 赞同：3
> 
> 时间：2012-11-06T01:59:04.683
> 
> 标签：java, language-agnostic, key

我制作了一个使用 MD5 生成一些低安全性密钥的哈希算法。基本上，它需要一个字符串的字符并将它们的索引乘积相加，然后取一个随机数的模，然后再进行 MD5 处理。在 Java 中：

```
BigInteger bi = BigInteger.ZERO;
char[] array = input.toCharArray();
for (int i = 0; i < array.length; i++) {
    bi = bi.add(BigInteger.valueOf(i + 1).multiply(
            BigInteger.valueOf(array[i])));
}
final int moduloOperator = 52665; // random constant
final byte[] moduloResult = bi.remainder(
        BigInteger.valueOf(moduloOperator)).toByteArray();
MessageDigest md;
try {
    md = MessageDigest.getInstance("MD5");
} catch (NoSuchAlgorithmException nsae) {
    nsae.printStackTrace();
    return null;
}
md.update(moduloResult);
return new BigInteger(1, md.digest()).toString().substring(0, 7); 
```

我在末尾有子字符串，因为它需要易于阅读。

乍一看，它按预期工作：不同的输入给出不同的输出，但结果在运行中是一致的。

但是，在玩了一下它时，我注意到了以下几点：

```
hash("")        = "1963546"
hash("1963546") = "1322048"
hash("1322048") = "2101764"
hash("2101764") = "3234562" 
```

到目前为止看起来还不错。适当随机。但是之后：

```
hash("3234562") = "3234562"
hash("3234562") = "3234562" [etc.] 
```

这让我目瞪口呆。我猜想一个 7 位数字的哈希值本身有大约千万分之一的机会。这真的只发生在第五次迭代中，还是我的设置有问题？更重要的是，是否还有其他类似的错误会对我的哈希产生严重影响？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T03:19:58.537

代码的“随机”部分弊大于利。

首先，代码将几个不相关的数字相加：

```
for (int i = 0; i < array.length; i++) {
bi = bi.add(BigInteger.valueOf(i + 1).multiply(
        BigInteger.valueOf(array[i])));
} 
```

让我们看看“2101764”和“3234562”的结果。为了简洁起见，我将使用 Python。

```
In [0]: sum((i+1)*int(digit) for (i, digit) in enumerate("3234562"))
Out[0]: 107

In [1]: sum((i+1)*int(digit) for (i, digit) in enumerate("2101764"))
Out[1]: 107 
```

嗯，有你的问题。

还记得[中心极限定理](http://en.wikipedia.org/wiki/Central_limit_theorem)吗？随机数的总和比单个数字本身更容易预测。信封背面，对于 7 位输入，总和将具有方差为[13.16](http://www.wolframalpha.com/input/?i=sqrt%28variance%5BDiscreteUniformDistribution%5B1%2C10%5D%5D+%2a+%287+choose+2%29%29)和平均值为[115.5](http://www.wolframalpha.com/input/?i=mean%5BDiscreteUniformDistribution%5B1%2C10%5D%5D+%2a+%287+choose+2%29)的分布。可以安全地推断出至少 60% 的总和将在 50 数字范围内，95% 的总和在 100 数字范围内，以及所有总和在 189 数字范围内——如果有的话，我认为这是慷慨的关于总和的熵。

通过加法破坏信息后，该算法取模求和`52665`。以 52665 为模只有 52665 个可能的数字，所以这段代码在最好的情况下只能产生 52665 个哈希值。

而且......没有理由这样做！ **随机码不会产生随机数**。制作一个好的散列函数很难。您不会通过破解一些代码来对事物进行切片和切块来改进哈希值。相反，您可能会破坏随机性的来源。如果您想要一个随机散列，请使用其他人编写的散列。

比如说，MD5！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:24:08.437

在进行 md.update 调用之前，该算法肯定会经历所有步骤。

请注意，您不是在选择随机数。实际上，您正在测试您的算法是否在重复应用下找到了一个固定点，该固定点是您的输入值的吸引子，仅在几次迭代中就达到了。

在测试了几个一位数字字符串后，我发现了另一个定点吸引子：

```
hash("3") = "3147559"
hash("3147559") = "1874964"
hash("1874964") = "1874964" 
```

我建议进行更多测试，使用您打算使用它的输入类型，并且不将结果反馈给算法。运行几百万个具有适当特征的随机字符串，看看某些值是否比其他值显示得更多。

# c++ - 为什么我不能从输入文件中检索简单数据并使用 C++ 将其写入输出文件？

> ID：13243314
> 
> 赞同：3
> 
> 时间：2012-11-06T01:59:11.113
> 
> 标签：c++

我已经做这个作业好几天了，我无法弄清楚我到底做错了什么。

简而言之，我正在用 C++ 构建一个简单的基本程序，它从一个名为 input.dat 的文件中读取一个学生姓名和 5 个成绩，然后写入该数据，并将其组织到一个名为 output.dat 的单独文件中。

很简单，对吧？但是，当我检查输出文件时，我发现的不是简单的整数，而是疯狂的、指数级的大数字，它们会重复自己。

请帮帮我。对我放轻松。我今年 18 岁，这是我的第一堂编程课。

这是我的代码：

```
#include <iostream>
#include <iomanip>
#include <fstream>
#include <string>
#include <cstdlib>

using namespace std;

int main()
{
    ifstream in_stream;
    ofstream out_stream;
    in_stream.open("input.dat");
    out_stream.open("output.dat");

    double test1, test2, test3, test4, test5;
    string name1, name2;

    cout.precision(2);
    cout.setf(ios::showpoint);

    in_stream >> name1 >> name2 >> test1 >> test2 >> test3 >> test4 >> test5;

    out_stream << "Student Name: " << name1 << name2 <<endl
        << "Test Scores: " << test1 << test2 << test3 << test4 << test5 <<endl
        << "Average Test Score: " << ((test1 + test2 + test3 + test4 + test5)/5);

    in_stream.close( );
    out_stream.close( );

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:44:44.617

所以总结评论，解决方案应该是这样的：

```
#include <iostream>
#include <iomanip>
#include <fstream>
#include <string>
#include <cstdlib>

using namespace std;

int main()
{
    ifstream in_stream;
    ofstream out_stream;
    in_stream.open("input.dat");
    out_stream.open("output.dat");

    double test1, test2, test3, test4, test5;
    string name1, name2;

    cout.precision(2);
    cout.setf(ios::showpoint);

    if(in_stream >> name1 >> name2 >> test1 >> test2 >> test3 >> test4 >> test5)
    {
        out_stream << "Student Name: " << name1 << name2 <<endl
            << "Test Scores: " << test1 << " " << test2 << " " << test3 << " " << test4 << " " << test5 << endl
            << "Average Test Score: " << ((test1 + test2 + test3 + test4 + test5)/5);
    }
    else
    {
        out_stream << "Failed to red input file" << endl;
    }

    in_stream.close( );
    out_stream.close( );

    system("pause");
    return 0;
} 
```

# java - 队列是抽象的；无法实例化

> ID：13243315
> 
> 赞同：0
> 
> 时间：2012-11-06T01:59:18.040
> 
> 标签：java, queue

Lab9.java

```
 package lab9;

        import java.util.Iterator;
        import java.util.LinkedList;
        import javax.swing.JOptionPane;

        public class Lab9  {

            public static void main(String[] args) {

             int SSN;
             int priority;
             Patient PR;
             boolean done = false;

             String[] choices = {"Add patient", "Discharge patient", "Status of Treatment Room","Exit"};
             String[] selections = {"Admit","Exit"};
             String[] decisions = {"Treatment Room", "Waiting Room"};

             Queue<Patient> patientQueue = new Queue<>(); 

             while(!done)
             {
                 int choice = JOptionPane.showOptionDialog(null,
                         "Select Option",
                         "ER Menu",
                         JOptionPane.YES_NO_CANCEL_OPTION,
                         JOptionPane.QUESTION_MESSAGE,
                         null,
                         choices,
                         choices[0]);
                 switch(choice)
                 {
                     case 0: 
                                String SSN_1 = JOptionPane.showInputDialog(null,"Enter Social Security Number of Patient");
                                if (SSN_1 == null || SSN_1.length() > 9)
                                {
                                    JOptionPane.showMessageDialog(null,"Error input");
                                    break;
                                }
                                SSN = Integer.parseInt(SSN_1);
                                String priority_1 = JOptionPane.showInputDialog(null,"Enter Priority Level of Patient with a SSN of "+SSN+
                                        "\n1 = Critical"
                                        + "\n"
                                + "2 = Urgent"
                                        + "\n"
                                + "3 = Moderate"
                                        + "\n"
                                + "4 = Low");
                                if (priority_1 == null || priority_1.length() > 1)
                                {
                                    JOptionPane.showMessageDialog(null,"Error input");
                                    break;
                                }
                                priority = Integer.parseInt(priority_1);
                                if(priority < 0 || priority > 4)
                                {   
                                          JOptionPane.showMessageDialog(null,"Invalid priority");
                                          break;
                                }
                                PR = new Patient(SSN,priority);
                                patientQueue.insert(PR);
                                break;

                     case 1:    

                 }
             }
            }
        } 
```

病人.java

```
 package lab9;

        public class Patient {

        private int SocialSecurityNumber;
        private int Level;

        public Patient (int SSN, int priority)
        {

        SocialSecurityNumber = SSN;
        Level = priority;

        }

        public void setSSN (int SSN)
        {

        SocialSecurityNumber = SSN;

        }

        public int getSSN()
        {
            return SocialSecurityNumber;
        }

        public void setPriority (int priority)
        {

        Level = priority;

        }

        public int getPriority()
        {
            return Level;
        }

        } 
```

队列.java

```
package lab9;

import java.util.*;
import java.util.PriorityQueue;

public abstract class Queue<T> extends AbstractQueue<T>{

ArrayList<T> theData = new ArrayList<>();

Comparator<T> comparator = null;

public boolean insert (T Patient)
{
    theData.add(Patient);
    return upwardFix(theData.size() - 1);
}

private boolean upwardFix(int a){

    if( a >= this.size() || a < 0)
    {
        return false;
    }
    if (a == 0)
    {
        return true;
    }
    int child = a;
    int parent = (child - 1)/2;
    while(parent >= 0 && compare(theData.get(parent), theData.get(child)) > 0)
    {
     swap (parent, child);
     child = parent;
     parent = (child - 1)/2;
    }
    return true;
}

public T remove()
{
    T result = theData.get(0);

    if (theData.size() == 1)
    {
        theData.remove(0);
        return result;
    }
    theData.set(0, theData.remove(theData.size() - 1));
    downwardFix(0);
    return result;
}

private boolean downwardFix(int a)
{
        if (a<0 || a>=this.size()) {
        return false;
    }
        if (a>=size()/2) {
        return true;
    }
        int parent = a;
        while (true) {
            int leftChild = 2 * parent + 1;
            if (leftChild >= theData.size()) {
                break; 
            }
            int rightChild = leftChild + 1;
            int minChild = leftChild; 

            if (rightChild < theData.size()
                    && compare(theData.get(leftChild), theData.get(rightChild)) > 0) {
                minChild = rightChild;
            }
            if (compare(theData.get(parent), theData.get(minChild)) > 0) {
                swap(parent, minChild);
                parent = minChild;
            } else { 
                break;
            }
        }
        return true;
    }

    private int compare(T left, T right) {

        if(comparator != null)
        {
            return comparator.compare(left, right);
        }
        else
        {
            return ((Comparable<T>) left).compareTo (right);
        }
    }

    private void swap(int parent, int child) {

    }

    public int size() {
        return 0;
    }
} 
```

我在 Lab9.java Queue patientQueue = new Queue<>(); 的这一行遇到错误

错误是队列是抽象的；无法实例化。我正在尝试创建一个医院患者队列，其中 1 级是最高优先级，而 4 级是最低优先级。通过这样做，我正在尝试实现`arraylist`和堆。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T02:00:57.397

```
public abstract class Queue<T> extends AbstractQueue<T>{ 
```

你的类`Queue`是抽象的。

将其更改为`public class Queue<T> extends AbstractQueue<T>{`.

或者，您可以创建一个扩展抽象`Queue`类的具体类，例如：

```
public class ConcreteQueue<T> extends Queue<T> { ... } 
```

# ios - 为什么 UIWebView 不应该被子类化？

> ID：13243317
> 
> 赞同：-1
> 
> 时间：2012-11-06T01:59:20.690
> 
> 标签：ios, memory-management, memory-leaks, uiwebview

从[UIWebView](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)， UIWebView 类不应该是子类。

我只是想知道为什么。没有更多的细节。

因为我在项目中遇到了内存溢出问题，它创建了一个扩展的 UIWebView，这可能会导致内存溢出问题。否则，仅创建 UIWebView 实例不会导致问题。

这就是为什么我想解决这个问题并尝试进行更多分析。

感谢这个家伙就 MVC 的设计模式发表了一些评论。我希望在收到一些关于内存管理的评论后关闭它。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:10:53.573

iOS 开发基于 MVC 概念和 V 部分，即 View 应尽可能通用。如果您编写自定义视图，则当模型更改时，视图也必须更改。它变得相互联系..这意味着视图不能被重用，尤其是当新的 UI 出现时..最好将代码放在控制器部分...关键：保持视图尽可能通用..

# android - Android的默认su

> ID：13243321
> 
> 赞同：1
> 
> 时间：2012-11-06T01:59:45.980
> 
> 标签：android, su

Root Checker 在 Android 的默认设置`su`（由 AOSP 构建）上失败，但`adb shell`它运行良好。这个`su`程序似乎不提供对 Android 框架的 root 访问权限。但我不太清楚细节。有没有人可以解释一下？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:09:21.807

Root Checker 通常会给你详细的解释，为什么它认为有问题。如果您需要进一步说明，请参阅 Root Checker 输出或将其复制/粘贴到您的问题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:59:28.213

你是如何安装`su`程序的？要真正有用，它需要`setuid`设置标志。如果你没有设置它，`su`将无法正常工作。Root Checker 和类似工具可能会检查该标志，这就是它失败的原因。运行`ls -l /path/to/su`以验证标志和权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T16:17:04.663

我认为克里斯在他的评论中指出了原因。`su`适用于工程构建，但不适用于工厂 ROM。看起来这与构建标志有关。

# r - 如何通过 prop.table() 计算净促销分数

> ID：13243323
> 
> 赞同：0
> 
> 时间：2012-11-06T01:59:59.567
> 
> 标签：r

```
 ############ uncoded data
   x10<- structure(c(0L, 0L, 0L, 0L, 1L, 1L, 1L, 5L, 8L, 9L, 31L, 1L, 
    0L, 0L, 0L, 1L, 0L, 1L, 2L, 7L, 2L, 10L, 0L, 2L, 0L, 2L, 2L, 
    5L, 2L, 4L, 6L, 8L, 4L, 1L, 1L, 3L, 2L, 2L, 6L, 1L, 12L, 18L, 
    7L, 29L, 8L, 4L, 6L, 8L, 6L, 19L, 3L, 9L, 12L, 3L, 12L, 14L, 
    1L, 2L, 1L, 3L, 1L, 0L, 4L, 6L, 3L, 11L, 0L, 0L, 0L, 1L, 3L, 
    7L, 5L, 8L, 21L, 26L, 51L, 0L, 1L, 0L, 3L, 5L, 10L, 9L, 29L, 
    55L, 60L, 125L, 3L, 0L, 1L, 1L, 3L, 10L, 1L, 6L, 18L, 17L, 13L, 
    6L, 3L, 4L, 13L, 6L, 33L, 17L, 48L, 84L, 54L, 103L, 34L, 11L, 
    20L, 27L, 26L, 50L, 29L, 30L, 54L, 28L, 34L, 31L, 5L, 7L, 3L, 
    4L, 20L, 8L, 16L, 16L, 8L, 41L, 1L, 0L, 0L, 3L, 1L, 3L, 3L, 11L, 
    19L, 16L, 56L, 0L, 0L, 0L, 0L, 3L, 11L, 3L, 18L, 25L, 21L, 62L, 
    3L, 0L, 1L, 4L, 2L, 7L, 8L, 15L, 22L, 12L, 19L, 5L, 2L, 8L, 9L, 
    9L, 42L, 18L, 51L, 70L, 45L, 103L, 29L, 15L, 23L, 34L, 25L, 57L, 
    23L, 38L, 55L, 30L, 33L, 36L, 5L, 5L, 6L, 6L, 16L, 6L, 10L, 17L, 
    9L, 35L, 2L, 0L, 1L, 1L, 2L, 4L, 6L, 8L, 22L, 33L, 73L, 0L, 0L, 
    0L, 1L, 2L, 7L, 7L, 15L, 27L, 21L, 56L, 1L, 2L, 2L, 0L, 2L, 9L, 
    4L, 8L, 24L, 13L, 17L, 14L, 2L, 8L, 10L, 16L, 51L, 16L, 51L, 
    69L, 29L, 99L, 44L, 18L, 25L, 34L, 19L, 49L, 26L, 43L, 63L, 15L, 
    30L, 42L, 9L, 17L, 7L, 3L, 16L, 8L, 13L, 22L, 18L, 45L, 0L, 0L, 
    1L, 3L, 0L, 7L, 4L, 14L, 15L, 20L, 47L, 0L, 1L, 0L, 1L, 1L, 3L, 
    3L, 5L, 6L, 11L, 21L, 1L, 0L, 0L, 4L, 2L, 3L, 8L, 7L, 17L, 3L, 
    13L, 5L, 2L, 6L, 13L, 15L, 34L, 19L, 42L, 62L, 37L, 83L, 52L, 
    16L, 26L, 26L, 29L, 53L, 28L, 45L, 45L, 15L, 22L, 26L, 8L, 12L, 
    11L, 5L, 12L, 5L, 7L, 17L, 10L, 28L), .Dim = c(11L, 6L, 5L), .Dimnames = structure(list(
        c("0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10"), 
        c("I've changed for work/ a new job/ gone on a work plan", 
        "I want a phone that doesn't offer", "I want Best Mates/ Favourites", 
        "I was offered or saw a better offer on another network", 
        "Issues with the network (poor coverage)", "Other"
        ), YearQuarter = c("2011-09-01", "2011-12-01", "2012-03-01", 
        "2012-06-01", "2012-09-01")), .Names = c("", "", "YearQuarter"
    )), class = "table")  

############ recoded data
 x10 <- structure(c(40L, 3L, 13L, 12L, 3L, 9L, 12L, 13L, 10L, 36L, 16L, 
    30L, 15L, 54L, 21L, 14L, 22L, 10L, 77L, 16L, 29L, 185L, 28L, 
    84L, 30L, 19L, 24L, 157L, 82L, 132L, 62L, 197L, 84L, 49L, 78L, 
    32L, 72L, 11L, 30L, 83L, 17L, 43L, 31L, 25L, 37L, 148L, 93L, 
    121L, 63L, 206L, 93L, 44L, 80L, 27L, 106L, 16L, 30L, 77L, 17L, 
    42L, 30L, 20L, 32L, 128L, 117L, 120L, 45L, 215L, 106L, 63L, 102L, 
    35L, 67L, 15L, 29L, 32L, 9L, 11L, 16L, 18L, 24L, 120L, 94L, 104L, 
    37L, 230L, 90L, 38L, 79L, 24L), .Dim = c(3L, 6L, 5L), .Dimnames = structure(list(
        c("Promoters", "Detractors", "Passive"), c("I've changed for work/ a new job/ gone on a work plan", 
        "I want a phone that doesn't offer", "I want Best Mates/ Favourites", 
        "I was offered or saw a better offer on another network", 
        "Issues with the network (poor coverage)", "Other"
        ), YearQuarter = c("2011-09-01", "2011-12-01", "2012-03-01", 
        "2012-06-01", "2012-09-01")), .Names = c("", "", "YearQuarter"
    )), class = "table") 

    x10.p <- round(prop.table(x10,c(3,2)),2)*100 
```

你好呀

净促销分数是一个要求消费者以零到十的等级对“推荐产品或服务的可能性”进行评分的问题。被报告为 10 和 9 的人被称为“促进者”，被评为 8 和 7 的人被视为“被动”，被报告低于 6 的人被视为诋毁者。净促销分数是“推荐者”百分比减去“批评者”百分比之间的差值。

从 2011 年 9 月到 2012 年 9 月，我将问题的答案汇总并重新编码到 x10 表中。这些数字是每个组的实际人数（促进者、批评者和被动者）。为三个维度表道歉，我对每个原因的净推荐值感兴趣（即推荐者和批评者之间的百分比差异是多少“我已经换工作/新工作/继续工作计划”在 9 月2012 年。

在我可以绘制它之前的净促销分数，这需要一些操作。我想知道是否有人知道如何做到这一点？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:18:45.767

首先，在完成所有计算之前不要四舍五入（否则你的百分比不会加到 1）

```
x10.p <- prop.table(x10,c(3,2))*100

# get the total promoters
promoters <- apply(x10.p, 2:3, function(x) sum(tail(x,2)))
# and detractors
detractors <- apply(x10.p, 2:3, function(x) sum(head(x,7)))
# passive is everything else
passive  <- passive <- 100 - (detractors +promoters)
# the net score
net <- promoters - detractors

net

                                                       YearQuarter
                                                         2011-09-01 2011-12-01 2012-03-01 2012-06-01 2012-09-01
  I've changed for work/ a new job/ gone on a work plan   66.071429   50.00000  53.982301  59.210526  46.846847
  I want a phone that doesn't offer                       37.500000   52.86195  46.153846  44.117647  44.230769
  I want Best Mates/ Favourites                           -2.857143   15.06849   6.451613  12.195122  -3.448276
  I was offered or saw a better offer on another network  24.390244   20.21563  15.193370   3.013699   8.176101
  Issues with the network (poor coverage)                -43.333333  -39.35860 -39.502762 -46.448087 -54.061625
  Other                                                  -17.391304  -18.23899 -23.841060 -19.500000 -29.078014 
```

您想要 2012 年 9 月，只选择该列，`drop = FALSE`以确保它仍然是一个包含 1 列的矩阵。

```
net[,'2012-09-01', drop = FALSE]
                                                        YearQuarter
                                                         2012-09-01
  I've changed for work/ a new job/ gone on a work plan   46.846847
  I want a phone that doesn't offer                       44.230769
  I want Best Mates/ Favourites                           -3.448276
  I was offered or saw a better offer on another network   8.176101
  Issues with the network (poor coverage)                -54.061625
  Other                                                  -29.078014 
```

# linux - linux内核中的指令{interrupt do_IRQ}是什么意思？

> ID：13243328
> 
> 赞同：2
> 
> 时间：2012-11-06T02:00:35.310
> 
> 标签：linux, linux-kernel, interrupt

linux内核文件arch/x86/kernel/entry_64.S中的指令{interrupt do_IRQ}是什么意思？中断是指令还是宏？定义在哪里？如何使用它 ？

```
847 common_interrupt: 
848         XCPT_FRAME    
849         addq $-0x80,(%rsp)              /* Adjust vector to [-256,-1] range */
850         interrupt do_IRQ
851         /* 0(%rsp): old_rsp-ARGOFFSET */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:38:52.063

它在上面声明了很短的距离：

```
/* 0(%rsp): ~(interrupt number) */
    .macro interrupt func
    /* reserve pt_regs for scratch regs and rbp */
    subq $ORIG_RAX-RBP, %rsp
    CFI_ADJUST_CFA_OFFSET ORIG_RAX-RBP
    call save_args
    PARTIAL_FRAME 0
    call \func
    .endm 
```

不过，我不知道那是做什么的。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:20:57.353

中断基本上用于暂停当前中断的 cpu 内核上运行的所有当前进程，然后运行生成的中断相关工作。&中断相关的工作是通过注册的处理程序或函数完成的。

中断可能由 H/W 或 S/W 产生。基本上有两种类型的中断...1-）软中断和2-）硬中断。

因此，每当生成特定中断时，都会调用其处理程序或函数，并且此调用与函数**do_IRQ(struct pt_regs *regs)**中传递的参数有关，该参数是 pt_regs 结构类型，它基本上将寄存器值存储为...

```
struct pt_regs{
unsigned long r0;
unsigned long r1;
...
...
}; 
```

& 更多信息你可以点击这个链接[https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_MRG/1.3/html/Realtime_Reference_Guide/chap-Realtime_Reference_Guide-Hardware_interrupts.html](https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_MRG/1.3/html/Realtime_Reference_Guide/chap-Realtime_Reference_Guide-Hardware_interrupts.html)

# php - MYSQL查询后使用phpexcel从excel中删除字段

> ID：13243332
> 
> 赞同：2
> 
> 时间：2012-11-06T02:01:02.233
> 
> 标签：php, mysql, phpexcel

我正在使用 PHPExcel 从 MYSQL 数据库中导出数据并将其导入到 excel 文件中。

**我有一个看起来像这样的数据库（这也是我使用 PHPExcel 生成它时我的 excel 文件当前的样子）：**

```
======================================================
|           Question                  |   Answer     |
=========+===========+===============================|
| Do you listen to music?             |    YES       |            
|----------------------------------------------------|
| Who is your favorite music artists? | Justin Beiber| 
|----------------------------------------------------|
| <p> Select an Answer<p>             |              | 
|----------------------------------------------------|
|Are you a Male or female             |      M       | 
|----------------------------------------------------| 
```

**我希望我的 excel 文件看起来像这样：**

```
======================================================
|           Question                  |   Answer     |
=========+===========+===============================|
| Do you listen to music?             |    YES       |            
|----------------------------------------------------|
| Who is your favorite music artists? | Justin Beiber| 
|----------------------------------------------------|
|Are you a Male or female             |      M       | 
|----------------------------------------------------| 
```

**我正在使用这段代码：**

```
$objPHPExcel = new PHPExcel();

$col = 1; 
while($row_data = mysql_fetch_assoc($result)) {
    $row = 1;
    if ($col == 1) {
        $row_headings = array_keys($row_data);
        foreach($row_headings as $value) {
            $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);
            $row++;
        }
        $row = 1;
        $col++;
    }
    foreach($row_data as $value) {
      if (!strstr('<p>', $value)){
        $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);

    $row++;
         }
    }
    $col++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T02:09:57.803

一种选择是`<p> Select an Answer<p>`在执行 SQL 查询时排除您将选择列和行然后从您的选择中`DELETE WHERE question = "<p> Select an Answer<p> "`

或者如果列`Anwser`值是`null`或`""`当`Question`值是时`<p> Select an Answer<p>`，那么你也可以说：

```
if($value !== null)
{
  // Output...
} 
```

例如：

```
$objPHPExcel = new PHPExcel();

$col = 1; 
while($row_data = mysql_fetch_assoc($result)) {
    $row = 1;
    if ($col == 1) {
        $row_headings = array_keys($row_data);
        foreach($row_headings as $value) {
            $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);
            $row++;
        }
        $row = 1;
        $col++;
    }
    foreach($row_data as $value) {
        if($value !== null || $value !== '')
        {
         $objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow($col, $row, $value);
         $row++;
        }
    }
    $col++;
} 
```

或者您可以简单地删除包含的行，`<p> Select an Answer<p>`除非您需要它们。

# xsockets.net - XSockets.DevServer.DebugInstance() 中的 NullReferenceException

> ID：13243339
> 
> 赞同：0
> 
> 时间：2012-11-06T02:02:51.623
> 
> 标签：xsockets.net

我在玩 XSockets.NET，我花了太多时间调试应该是一个简单的问题。我正在使用 XSockets 附带的标准模板，它创建了一个名为 XSockets.DevServer 的项目，并在该项目中创建了一个名为 DebugInstance 的类。当我在我的 Web 项目中托管这个 DebugInstance 类时，一切似乎都按预期工作。但是，当我尝试在 XSockets.Debug.Console 项目中托管它时，或者当我尝试让它在我的生产 IIS 实例上运行时，我在下面的代码中得到一个 NullReferenceException：

```
 [ImportOne(typeof(IXBaseServerContainer))]
    public IXBaseServerContainer wss { get; set; }

    public DebugInstance()
    {
        try
        {
            Debug.AutoFlush = true;
            this.ComposeMe();

            // NullReferenceException on the next line - wss apparently never gets set.
            wss.OnServersStarted += wss_OnServersStarted;
            wss.OnServerClientConnection += wss_OnServerClientConnection;
            wss.OnServerClientDisconnection += wss_OnServerClientDisconnection;
            wss.OnError += wss_OnError;
            wss.OnIncommingTextData += wss_OnIncommingTextData;
            wss.OnOutgoingText += wss_OnOutgoingText;
            wss.OnServersStopped += wss_OnServersStopped;
            wss.StartServers();
        }
        catch (Exception ex)
        {
            Debug.WriteLine("Exception while starting server: " + ex);
            Debug.WriteLine("Press enter to quit");
        }
    } 
```

很明显，问题发生在 中`this.ComposeMe()`，但没有故障排除信息，而且由于 XSockets 显然不是开源的，所以我无法通过代码来找出问题所在。

编辑：要清楚，我知道 NullReferenceException 是什么。`wss`在这种情况下，它的直接原因是 null的事实。我想知道的是它的近因，即为什么`ComposeMe()`不分配它，即使这显然是它应该做的。显然，XSockets 用来支持其插件架构的本土 IOC 应该找到 的实例`IXBaseServerContainer`，但显然不是——我不知道为什么。而且没有来源，我什至不确定候选人`IXBaseServerContainer`是什么。

编辑 2012-11-06：这是我的 app.config 的 appSettings 元素的样子：

```
<appSettings>
  <add key="XSocketServerStartport" value="4502"/>
  <add key="UsePolicyServer" value="true"/>
  <add key="XSockets.PluginCatalog" value="XSockets\XSocketServerPlugins\"/>
  <add key="XSockets.PluginFilter" value="*.dll"/>
  <add key="XMessageInterceptorsEnabled" value="false"/>
  <add key="XErrorInterceptorsEnabled" value="false"/>
  <add key="XConnectionInterceptorsEnabled" value="false"/>
  <add key="XHandshakeInterceptorsEnabled" value="false"/>
  <add key="XSocketLogPath" value="XSockets\XSocketServerPlugins\Log"/>
  <add key="XBufferSize" value="8192"/>
</appSettings> 
```

我`$(ProjectDir)\XSockets\XSocketServerPlugins\`和我的`$(TargetDir)\XSockets\XSocketServerPlugins\`文件夹中都有下面提到的所有文件，例如：

```
10/29/2012  09:53 AM            15,872 XSockets.Core.Communication.dll
10/29/2012  09:53 AM            70,656 XSockets.Core.dll
10/29/2012  09:53 AM             8,192 XSockets.DevelopmentServer.dll
10/29/2012  09:53 AM            11,776 XSockets.Extensibility.Handlers.dll
10/29/2012  09:53 AM            10,240 XSockets.Extensibility.Interceptors.dll
10/29/2012  09:53 AM            23,040 XSockets.External.dll
10/29/2012  09:53 AM            24,064 XSockets.Protocol.dll
10/29/2012  09:53 AM            39,424 XSockets.Server.dll
11/05/2012  05:37 PM            12,288 XSockets.WebRTC.Prototype.Shared.Handlers.dll 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T14:13:04.663

肯，

当 XSockets.NET 的插件框架没有找到任何“插件”时，没有任何东西可以编写。我认为这是因为您的 IIS 生产实例中没有*部署“插件”？*

您需要将以下元素添加到配置文件 (web.config) 的 appSettings 部分

```
<add key="XSockets.PluginCatalog" value="XSockets\XSocketServerPlugns\" />
<add key="XSockets.PluginFilter" value="*.dll" /> 
```

在“我的情况”中，我在内部有 XSockets.NET 插件（协议、处理程序/控制器）

**/XSockets/XSocketServerPlugns**文件夹在我的网站。

您应该在该文件夹中有以下插件（.dll）

1.  XSockets.Core.Communication
2.  XSockets.Core
3.  XSockets.Extensibility.Handlers
4.  XSockets.Extensibility.Interceptors
5.  Xsockets.External
6.  XSockets.Protocol
7.  XSockets.Server
8.  XSockets.DevelopmentServer **

** 这是包含您的服务器的项目/类库。（即DebugInstance）

如果要配置服务器，则需要创建一个配置加载器类，请参阅此 url 以获取信息[http://xsockets.net/api/net-c/creating-custom-configuration-plugin](http://xsockets.net/api/net-c/creating-custom-configuration-plugin)，或者发送电子邮件至contact@xsockets.net 我们会帮助你。

如果您需要进一步的帮助，请告诉我。

亲切的问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:00:07.750

首先，如果您正在运行控制台应用程序，请切换到 .NET 4 而不是默认的 .NET 4 客户端配置文件（如果尚未完成）。

第二。我们将提供一种更好的方法来了解哪些引用要添加到启动服务器的项目中。同时，您应该能够在包管理器控制台中运行它以查看需要哪些 refs

```
(Get-Project XSocketHandler).Object.References | Where-Object {$_.CopyLocal -eq $true} 
```

你有我的电子邮件，所以请与我联系，我们可以进行 Skype 会议或更多讨论。

问候 Uffe，XSockets 团队

# java - 如何在 Java 中处理联合类型的 Avro 数组？

> ID：13243342
> 
> 赞同：3
> 
> 时间：2012-11-06T02:03:24.530
> 
> 标签：java, avro

我有一个使用 IDL 定义的 Avro 模式，类似于以下内容：

```
protocol MyProtocol {
  record Gizmo {
    string name;
    int cost;
    int weight;
  }

  record Gadget {
    string name;
    int cost;
    double width;
    double height;
  }

  record Order {
    long id;
    array<union{Gizmo, Gadget}> items;
  }
} 
```

我正在使用此架构中自动生成的 Java 类。除了 Gizmos 和 Gadgets 之外，还有很多类型可以在 items 数组中，但是让我们规定所有类型都有名称和成本。

据我了解，没有办法为 Avro 记录指定继承，所以`getItems()`Order 对象必然会给我`List<Object>`. 也就是说，我想要更多上下文和类型安全的东西；到目前为止，我已经提出了三种方法，但它们似乎都不是很可口。

**方法 1：**执行未经检查的转换为`List<SpecificRecord>`（实际上是转换为`List`，然后是另一个转换为，`List<SpecificRecord>`因为泛型的工作原理）并使用`get(int field)`，知道名称和成本将分别是字段 1 和 2。一旦我得到这些，我也必须将它们转换为适当的类型。这似乎非常脆弱。

**方法 2：**遍历 items 数组，并单独转换每个项目。我可以像第一种方法一样强制转换`SpecificRecord`并使用索引获取，或者执行一系列`instanceof`检查，然后按名称获取字段。这要么是脆弱的，要么是费力的。

**方法 3：**编写我自己的类来实现`SpecificRecord`并具有适当的类层次结构。这失去了自动生成代码的好处，但似乎也是最健壮的选择，但也非常费力。

其中哪一个是最好的？还是有更好的选择？

# c++ - WinAPI - 如何组织大量 HWND 对象？

> ID：13243343
> 
> 赞同：0
> 
> 时间：2012-11-06T02:03:30.377
> 
> 标签：c++, winapi, organization, hwnd, winmain

当我推进我的第一个 winapi UI 时，我发现自己在我的 WinMain 文件中创建了一大堆令人不舒服的 HWND 变量：

```
HWND foo;
HWND bar;
HWND baz;
HWND etc;

int WINAPI WinMain(...) {} 
```

当然，这些变量在文件其余部分的函数中使用 - 例如消息循环 - 所以它们必须是可访问的。

对于我相对较小的 UI，我会堆积 30 个 HWND，以便它们处于可见范围内。这让我非常怀疑我做错了。

这是应该发生的事情，还是有更实际的组织方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:09:24.507

您有一些解决方案，具体取决于您的程序。

1.  您可以将所有这些句柄放在一个或多个容器中，例如`std::vector`.
2.  您可以像克里斯建议的那样映射它们。
3.  如果您的程序变得很大，您可能希望将它们组织成逻辑单元。例如，如果其中 15 个窗口用于一半逻辑，另外 15 个用于另一半（比如选项卡内的控件），那么您可能希望以某种方式对这些控件进行分组（文件、类、任何最符合逻辑的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:58:56.437

您的主程序中只需要一个 HWND，这是一个主窗口。

API 不需要单个主窗口，但这是最常见的。即使从用户的角度来看，应用程序提供了几个明显独立的窗口，在程序中拥有一个主窗口也是一个好主意（它可以是不可见的，但提供分组）。

其他窗口要么是主窗口的子窗口（在其中），要么是主窗口“拥有”的窗口。一般来说。特别是对于第一个 Windows 程序。:-) 所以这些窗口不需要单独的变量。每当一个窗口应该对某事做出反应时，这就是给窗口的一条消息，这意味着以相关窗口句柄作为参数调用您的一个函数。

每个子窗口都可以有一个唯一的整数 ID，这是跟踪它们的一种方法。

但是随着您的进步，您将希望将状态与每个窗口相关联，最简单的方法是使用 Windows“子类化”API 将指针与每个窗口相关联。然后，您可以将窗口过程调用路由到关联 C++ 对象上的方法。不同的消息可以进一步路由到不同的消息处理方法，每个方法都可以访问窗口的状态（它只是这个 C++ 对象）。

# windows-8 - Windows商店应用程序上的Eventbrite OAUTH2登录让我收到错误的请求

> ID：13243344
> 
> 赞同：1
> 
> 时间：2012-11-06T02:03:39.360
> 
> 标签：windows-8, oauth-2.0, eventbrite

我在 oauth2 握手时遇到问题，因为 eventbrite 文档不是很清楚。 [http://developer.eventbrite.com/doc/authentication/oauth2/](http://developer.eventbrite.com/doc/authentication/oauth2/) -> 4 号

我现在做的就是这样

WebRequest webRequest = WebRequest.Create("https://www.eventbrite.com/oauth/token");

```
 string URLEncoded = "code=" + token + "&client_secret=" + APISecret + "&client_id=" + APIKey + "&grant_type=authorization_code";

        webRequest.ContentType = "application/x-www-form-urlencoded";
        webRequest.Method = "POST";         
        byte[] bytes = Encoding.UTF8.GetBytes(URLEncoded);
        Stream os = null;
        try
        {
            os = await webRequest.GetRequestStreamAsync();
            os.Write(bytes, 0, bytes.Length);
           WebResponse response = await webRequest.GetResponseAsync();            
            os = response.GetResponseStream();
            StreamReader reader = new StreamReader(os);

            string responseFromServer = reader.ReadToEnd();
        }
        catch (WebException ex)
        {
            string err = ex.ToString();

        }
        finally
        {
            if (os != null)
            {
                os.Dispose();
            }
        } 
```

有人可以对此提供提示吗？结果我不断收到错误的请求。谢谢

编辑：响应说：代码无效或过期

我知道它很清楚，但是我已经实现并获取了要交换的令牌，使用 Secret API 密钥和 API 密钥来获取它，但是它为什么无效/过期？

# c# - 带有 SQLite 的 Log4Net 抛出格式异常

> ID：13243346
> 
> 赞同：1
> 
> 时间：2012-11-06T02:04:30.660
> 
> 标签：c#, sqlite, logging

我正在尝试使用 Log4Net 并将我的消息记录到本地 SQLite DB。但是，当我运行应用程序时，会引发格式异常`log4net.Config.XmlConfigurator.Configure();`

这是我的配置文件：

```
<log4net> 
```

```
<appender name="LogFileAppender" type="log4net.Appender.FileAppender" >
  <file value="log-file.txt" />
  <appendToFile value="true" />

  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%-5level] - %message%newline" />
  </layout>
</appender>

<appender name="DebugAppender" type="log4net.Appender.DebugAppender">
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%-5level] - %message%newline" />
  </layout>
</appender>

<appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
  <bufferSize value="0" />
  <connectionType value="System.Data.SQLite.SQLiteConnection, System.Data.SQLite, Version=1.0.77.0" />
  <connectionString value="Data Source=.\kapiti.db;Version=3;" />
  <commandText value="INSERT INTO Log (Date, Level, Logger, Message) VALUES (@Date, @Level, @Logger, @Message)" />
  <parameter>
    <parameterName value="@Date" />
    <dbType value="DateTime" />
    <layout type="log4net.Layout.RawTimeStampLayout" />
  </parameter>
  <parameter>
    <parameterName value="@Level" />
    <dbType value="String" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%level" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@Logger" />
    <dbType value="String" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%logger" />
    </layout>
  </parameter>
  <parameter>
    <parameterName value="@Message" />
    <dbType value="String" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%message" />
    </layout>
  </parameter>
</appender>

<!-- Setup the root category, add the appenders
       and set the default level -->
<root>
  <level value="DEBUG" />
  <appender-ref ref="DebugAppender" />
  <appender-ref ref="LogFileAppender" />
  <appender-ref ref="AdoNetAppender" />
</root> 
```

该表是这样创建的，并且具有以下架构：

```
DROP TABLE IF EXISTS Log;
CREATE TABLE Log (
    LogId     INTEGER PRIMARY KEY,
    Date      DATETIME NOT NULL,
    Level     VARCHAR(50) NOT NULL,
    Logger    VARCHAR(255) NOT NULL,
    Message   TEXT DEFAULT NULL
    RowVersion INTEGER DEFAULT 1
);

CREATE TRIGGER Log_rowversion_trigger AFTER UPDATE ON Log 
BEGIN
UPDATE Log SET RowVersion = new.RowVersion + 1  WHERE Id = new.Id;
END; 
```

如果您能看到我在哪里犯了错误，请告诉我，我整天都被困在这个问题上。

谢谢射频

堆栈跟踪：

```
mscorlib.dll!long.Parse(string s = "DateTime", System.Globalization.NumberStyles style = AllowLeadingWhite | AllowTrailingWhite | AllowLeadingSign, System.IFormatProvider provider = {System.Globalization.NumberFormatInfo}) + 0x1a bytes 
mscorlib.dll!System.Convert.ToInt64(string value = "DateTime", System.IFormatProvider provider = {}) + 0x13 bytes   
mscorlib.dll!string.System.IConvertible.ToInt64(System.IFormatProvider provider = {}) + 0x7 bytes   
mscorlib.dll!System.Convert.DefaultToType(System.IConvertible value = "DateTime", System.Type targetType = {Name = "Int64" FullName = "System.Int64"}, System.IFormatProvider provider = {}) + 0xe5 bytes   
mscorlib.dll!string.System.IConvertible.ToType(System.Type type = {Name = "Int64" FullName = "System.Int64"}, System.IFormatProvider provider = {}) 
mscorlib.dll!System.Convert.ChangeType(object value = "DateTime", System.Type conversionType = {Name = "Int64" FullName = "System.Int64"}, System.IFormatProvider provider = {}) + 0x51 bytes   
log4net.dll!log4net.Util.OptionConverter.ParseEnum(System.Type enumType = {Name = "DbType" FullName = "System.Data.DbType"}, string value = "DateTime", bool ignoreCase = true) + 0x4d bytes    
log4net.dll!log4net.Util.OptionConverter.ConvertStringTo(System.Type target = {Name = "DbType" FullName = "System.Data.DbType"}, string txt = "DateTime") + 0x5d bytes  
log4net.dll!log4net.Repository.Hierarchy.XmlHierarchyConfigurator.ConvertStringTo(System.Type type = {Name = "DbType" FullName = "System.Data.DbType"}, string value = "DateTime") + 0x41 bytes 
log4net.dll!log4net.Repository.Hierarchy.XmlHierarchyConfigurator.SetParameter(System.Xml.XmlElement element = {System.Xml.XmlElement}, object target = {log4net.Appender.AdoNetAppenderParameter}) + 0x282 bytes   
log4net.dll!log4net.Repository.Hierarchy.XmlHierarchyConfigurator.CreateObjectFromXml(System.Xml.XmlElement element = {System.Xml.XmlElement}, System.Type defaultTargetType = {Name = "AdoNetAppenderParameter" FullName = "log4net.Appender.AdoNetAppenderParameter"}, System.Type typeConstraint = {Name = "AdoNetAppenderParameter" FullName = "log4net.Appender.AdoNetAppenderParameter"}) + 0x13a bytes   
log4net.dll!log4net.Repository.Hierarchy.XmlHierarchyConfigurator.SetParameter(System.Xml.XmlElement element = {System.Xml.XmlElement}, object target = {log4net.Appender.AdoNetAppender}) + 0x525 bytes    
log4net.dll!log4net.Repository.Hierarchy.XmlHierarchyConfigurator.ParseAppender(System.Xml.XmlElement appenderElement = {System.Xml.XmlElement}) + 0x170 bytes  
log4net.dll!log4net.Repository.Hierarchy.XmlHierarchyConfigurator.FindAppenderByReference(System.Xml.XmlElement appenderRef = {System.Xml.XmlElement}) + 0xb1 bytes 
log4net.dll!log4net.Repository.Hierarchy.XmlHierarchyConfigurator.ParseChildrenOfLoggerElement(System.Xml.XmlElement catElement = {System.Xml.XmlElement}, log4net.Repository.Hierarchy.Logger log = {log4net.Repository.Hierarchy.RootLogger}, bool isRoot = true) + 0x4a bytes    
log4net.dll!log4net.Repository.Hierarchy.XmlHierarchyConfigurator.ParseRoot(System.Xml.XmlElement rootElement = {System.Xml.XmlElement}) + 0x1d bytes   
log4net.dll!log4net.Repository.Hierarchy.XmlHierarchyConfigurator.Configure(System.Xml.XmlElement element = {System.Xml.XmlElement}) + 0x1e1 bytes  
log4net.dll!log4net.Repository.Hierarchy.Hierarchy.XmlRepositoryConfigure(System.Xml.XmlElement element = {System.Xml.XmlElement}) + 0xe bytes  
log4net.dll!log4net.Repository.Hierarchy.Hierarchy.log4net.Repository.IXmlRepositoryConfigurator.Configure(System.Xml.XmlElement element = {System.Xml.XmlElement}) + 0x7 bytes 
log4net.dll!log4net.Config.XmlConfigurator.ConfigureFromXml(log4net.Repository.ILoggerRepository repository = {log4net.Repository.Hierarchy.Hierarchy}, System.Xml.XmlElement element = {System.Xml.XmlElement}) + 0x7a bytes   
log4net.dll!log4net.Config.XmlConfigurator.Configure(log4net.Repository.ILoggerRepository repository = {log4net.Repository.Hierarchy.Hierarchy}, System.IO.Stream configStream = {System.IO.FileStream}) + 0xbb bytes   
log4net.dll!log4net.Config.XmlConfigurator.Configure(log4net.Repository.ILoggerRepository repository = {log4net.Repository.Hierarchy.Hierarchy}, System.IO.FileInfo configFile = {\Program Files\AlliedPetroleum.Client\AlliedPetroleum.Client.exe.config}) + 0xa7 bytes    
log4net.dll!log4net.Config.XmlConfigurator.Configure(log4net.Repository.ILoggerRepository repository = {log4net.Repository.Hierarchy.Hierarchy}) + 0x52 bytes 
```

> log4net.dll!log4net.Config.XmlConfigurator.Configure() + 0xf 字节 AlliedPetroleum.Client.exe!AlliedPetroleum.Client.Program.Main() 第 47 行 + 0x5 字节 C#

# html - mac Firefox 与 pc Firefox 上的页面看起来不同

> ID：13243350
> 
> 赞同：0
> 
> 时间：2012-11-06T02:05:10.440
> 
> 标签：html, css, firefox, cross-browser

我网站上的一个 [注册页面](http://frshstudio.com/freedom-sign-up/)今晚给我带来了麻烦。它在我所有的 macbook pro 浏览器（FF、Chrome、Safari）中都显示得很好，但是当我在 PC 上的 FF 中查看它时，页面似乎以某种方式中断 - 水平布局变为垂直。任何想法为什么会这样？

在 macbook pro 上的 FF 中查看 ![在此处输入图像描述](../Images/20b4a0cb543571cef73b4fa7a847f1a9.png)

在 PC 上的 FF 中查看- ![在此处输入图像描述](../Images/2fb463e544099894b71179d5af9d269c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:28:20.200

请尝试删除位置：绝对；对于左右div。它会起作用的。对于具有适当宽度的两个div，您的左右浮动不需要任何位置，因此不需要位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T06:54:23.760

是的，因为职位：绝对；只有问题发生了。尝试删除位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T04:23:10.287

如果此站点在线，也许您可​​以发布指向它的链接，如果您可以发布 html 和 css 也会很有用。我将左手内容和右手内容放在 2 个 div 中，例如左 div 40% 和右 50%，然后将左 div 向左浮动，右 div 向右浮动。或者，您可以绝对定位 div。

# objective-c - 比较两个 nsstrings 的值

> ID：13243354
> 
> 赞同：1
> 
> 时间：2012-11-06T02:06:05.463
> 
> 标签：objective-c, ios, nsstring, string-comparison, foundation

所以我一直在尝试比较 xcode 中的两个 NSStrings。但是，它不起作用。我究竟做错了什么？

NSString Prog 是从 mysql 解析的 xml 字符

```
 char *cStr = "YES";
        NSString *str3 = [NSString stringWithUTF8String:cStr];
        if ([str3 isEqualToString:prog]) {
             [switch1 setOn:YES animated:YES];
        }
        else {
             [switch1 setOn:NO animated:YES];
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T02:24:42.287

`-[NSString isEqualToString:]`通常是您将使用的，以及您在这种情况下使用的。确保它`prog`是有效的`NSString`（例如正确的类型而不是`nil`），并记住这个实现中的字符串比较是区分大小写的——即`"Yes"`不等于`"YES"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:59:05.153

使用以下方法比较两个 NSStrings ：

```
[yourString isEqualToString:@"testString"] 
```

# c++ - 设置 QSharedPointer

> ID：13243356
> 
> 赞同：2
> 
> 时间：2012-11-06T02:06:26.213
> 
> 标签：c++, qt, qsharedpointer

我来自 C# 背景，仍然对 C++ 和 Qt 智能指针有所了解。这应该是一个基本问题：

在 myClass.h

```
QSharedPointer<AccessFlags> m_flags; 
```

在 myClass.cpp 我试图设置（设置正确的词？） m_flags 指针

```
if(m_flags.isNull())
    m_flags = new AccessFlags();

class AccessFlags{
public:
     QHash<QString,int> flags;
     AccessFlags();  //The dictionary is setup in the constructor
}; 
```

编译器抱怨“与'operator ='不匹配..如何设置指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T10:40:04.537

如果您使用现代 C++11 编译器（例如 GCC 4.6 或更高版本和 MSVC 10.0），请考虑使用[std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)而不是 QSharedPointer。

首先，这是一个标准的第二件事，你可以使用[std::make_shared](http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared)来初始化你的指针，这可以更快！（例如，在 MSVS2010/2012 中，make_shared 分配只发生一次，而不是两次分配：一种用于新的，另一种用于内部计数器）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T02:07:51.110

您正在尝试将原始指针分配给`QSharedPointer`行中的a

```
m_flags = new AccessFlags(); 
```

你可能想要类似的东西

```
m_flags = QSharedPointer<AccessFlags>(new AccessFlags); 
```

# ruby-on-rails - 将多个文件连续上传到heroku会锁定所有测功机

> ID：13243357
> 
> 赞同：2
> 
> 时间：2012-11-06T02:06:39.563
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, paperclip

我的理解是，当我将文件上传到我的 heroku 实例时，它是一个同步请求，请求完成后我会得到 200，这意味着我的上传已被回形针处理和存储。

我正在使用 plupload 进行串行上传（一次一个文件）。在 Heroku 上，我有 3 个测功机，我的应用程序变得无响应，并且尝试使用该应用程序时出现超时。我的上传实际上应该最多只占用一个测功机，而所有文件都在上传，因为它是连续完成的，并且文件 2 直到文件 1 返回响应后才开始。

作为测试，我将我的测功机提高到 15 并运行上传。我再次看到帖子进入日志，然后我开始看到回形针命令的输出（不记得它是识别还是转换）并且我开始超时。

我真的很困惑为什么会这样。我知道我“可以”直接上传到 s3，但我目前的方法应该没问题。它是一个仅由一个人使用的管理界面，并且最多它应该占用一个测功机，因为所有上传的文件都是串行发送的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T00:35:02.583

几天来我一直在解决同样的问题。据我了解，问题在于通过 heroku 上传文件时，您的请求仍受 30 秒超时限制的约束。最重要的是，似乎向同一个测功机（应用程序实例）发出的后续请求可能会导致它累积响应时间并终止。例如，如果您向 Web 应用程序发出两个后续请求，每个请求需要 15 秒上传，您可能会收到超时，这将迫使测功机终止请求。这很可能是您收到超时错误的原因。如果这种情况在多个测功机上继续存在，您最终可能会导致应用程序崩溃，或者只是性能普遍不佳。

我最终做的是使用[jquery-file-upload](http://blueimp.github.com/jQuery-File-Upload/)。但是，如果您正在上传大文件（多个 MB），那么您仍然会遇到错误，因为 heroku 仍在处理上传。特别是[我使用这种技术](http://pjambet.github.com/blog/direct-upload-to-s3/)完全绕过heroku，直接从客户端的浏览器上传到s3。我使用它上传到临时目录，然后使用carrierwave通过将作业推送到Qu来“重新下载”文件并在后台处理媒体和缩略图版本。现在，没有超时，但用户必须等待作业在后台得到处理。

另外需要注意的是，heroku dyno 彼此独立运行，因此通过增加 web dyno 的数量，您正在为其他用户创建更多应用程序实例，但每个实例仍然受到 30 秒超时和 512Mb 内存的影响。无论您有多少测功机，您仍然会遇到相同的问题。[更多测功机！=更好的性能](https://devcenter.heroku.com/articles/scaling#understanding-concurrency)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-04T15:02:42.833

您可以使用 Dropzonejs 之类的东西来将文件分成队列并分别发送。这样请求就不会超时。

# javascript - 贾勒特不工作

> ID：13243358
> 
> 赞同：0
> 
> 时间：2012-11-06T02:06:43.930
> 
> 标签：javascript, jquery, jquery-ui

我有以下脚本：

```
<script type="text/javascript" src="jquery-1.8.2.js"></script>
<script type="text/javascript">
 jAlert("message","title");
</script> 
```

在我的 html 头中。但是当我加载页面时对话框没有出现（如果我只是使用警报就会出现）。

我哪里做错了？我是否缺少相应的js文件？

编辑：我包含了 jquery.alerts.js 文件。它仍然无法正常工作。

编辑：我添加了这一行并将文件放在目录中

```
<script type="text/javascript" src="jquery.alerts.js"></script> 
```

是的，我把它放在中间。

我打开浏览器控制台看到了这个：

“未捕获的 TypeError：无法读取 null jquery-1.8.2.js:9405 的属性‘scrollHeight’”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T02:11:02.810

jAlert 不是原生 jQuery 的一部分。

[你可以在这里](http://www.abeautifulsite.net/blog/2008/12/jquery-alert-dialogs/)找到项目页面，下载链接在底部。

确保在 jQuery 之后直接包含它 - 您的代码应如下所示：

```
<link rel="stylesheet" type="text/css" href="jquery.alerts.css" />
<script type="text/javascript" src="jquery-1.8.2.js"></script>
<script type="text/javascript" src="jquery.alerts.js"></script>
<script type="text/javascript">
 $(document).ready(function(){
      jAlert("message","title")
 });
</script> 
```

# java - 按下按钮时执行的动作触发

> ID：13243359
> 
> 赞同：2
> 
> 时间：2012-11-06T02:06:51.280
> 
> 标签：java, swing, jbutton, actionlistener

好吧，第一次问问题通常我可以通过快速搜索找到这些类型的答案，这让我太沮丧了。这是一个简单的小程序，需要工作时间和工资率才能获得总工资和净工资，其中大部分只是我的试运行（净工资等的金额），但在我走得更远之前，我想让它工作。

按下按钮时没有任何反应，不完全确定原因。（最近，当我尝试这个和那个时，我开始在 IE 中得到一个 NullPointerException，可能与我的问题无关，但也只是把它扔在那里。）感谢任何帮助，我尝试了一些事情，但我肯定java生锈了！

继承人的代码：

```
import javax.swing.*;      
import java.awt.*;     
import java.awt.event.*; 

public class ButtonGrossPay extends JApplet implements ActionListener
{

 private JTextField txtHourWork;
 private JTextField txtHourRate;
 private JLabel lblGrossPay;
 private JLabel lblNetPay;

  public void init () {
    Container content_pane = getContentPane ();
    content_pane.setLayout (new FlowLayout ());     

        JLabel lblHourWork = new JLabel("Hours Worked");
        JTextField txtHourWork = new JTextField(10);
        JLabel lblHourRate = new JLabel("Pay Rate");
        JTextField txtHourRate = new JTextField(10);

        JButton btnCalculate = new JButton("Calculate Pay");
        btnCalculate.addActionListener(this);

        content_pane.add (lblHourWork);
        content_pane.add(txtHourWork);
        content_pane.add(lblHourRate);
        content_pane.add(txtHourRate);
        content_pane.add(btnCalculate);
        content_pane.add(lblGrossPay);
        content_pane.add(lblNetPay);
        }

 public void actionPerformed (ActionEvent event) {

        String firstNumber = txtHourWork.getText();
        String secondNumber = txtHourRate.getText();

        int number1 = Integer.parseInt(firstNumber);
        int number2 = Integer.parseInt(secondNumber);

        int gross = number1 * number2; 

        double netPay = 0;
        if (gross >= 0 && gross <= 99.99) {
        netPay = gross - gross * .10;
    } else if (gross >= 99.99) {
        netPay = gross - gross * .20;
    }

    lblGrossPay.setText(Integer.toString(gross));
    lblNetPay.setText(Double.toString(netPay));

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:09:32.530

你正在隐藏你的变量——在类的`init()`方法中重新声明它们，这样所有的类 JTextFields 都不会被初始化，因此是空的。解决方案：不要这样做。

所以把它改成这样：

```
public void init () {
    Container content_pane = getContentPane ();
    content_pane.setLayout (new FlowLayout ());     

    JLabel lblHourWork = new JLabel("Hours Worked");
    // JTextField txtHourWork = new JTextField(10);
    JLabel lblHourRate = new JLabel("Pay Rate");
    // JTextField txtHourRate = new JTextField(10);

    txtHourWork = new JTextField(10);
    txtHourRate = new JTextField(10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:10:48.170

您永远不会初始化`JLabels` `lblGrossPay`或`lblNetPay`导致`NPE`. 你应该有：

```
 lblGrossPay = new JLabel();
 lblNetPay = new JLabel(); 
```

# list - 方案列表总是以相反的顺序

> ID：13243360
> 
> 赞同：2
> 
> 时间：2012-11-06T02:07:32.747
> 
> 标签：list, recursion, scheme, r5rs

对于这里的大多数更高级的计划者来说，这可能是一个微不足道的问题，但作为一个新手，我发现这是一个问题。

我需要一种方法来构建一个新列表，它的顺序与它进入时的顺序相同。例如，假设我们得到了一个列表'(1 2 0 3 4 0 0 5)。但是遍历列表并将 cdr 作为第一个参数传回最终会向后构造新列表。

这是代码中的示例：

我将一个需要对其进行工作的“旧列表”传递给它，并将一个空列表作为“新列表”传递给它，以形成并返回。

**请注意，取出 0 只是作为新列表必须满足的“某些条件”**

```
 (define (form-new-list old-list new-list)
    (cond ((null? old-list) new-list)
          (else
           (if (eq? (car old-list) 0) (form-new-list (cdr old-list) new-list)
               (form-new-list (cdr old-list) (cons (car old-list) new-list))))))

  ;test
  (form-new-list '(1 2 0 3 4 0 0 5) '()) ; gives (5 4 3 2 1)
  ;but want (1 2 3 4 5) 
```

我不只是想反转使用反向过程返回的列表，而是希望首先以正确的顺序将新列表放在一起。

这是否有某种“技巧”，比如在其他地方进行递归调用？

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T02:11:50.510

您正在寻找使用递归遍历列表的自然方式。将此过程用作您的解决方案的模板 - 它只是按照收到的原样复制列表：

```
(define (copy lst)
  (if (null? lst)
      '()
      (cons (car lst)
            (copy (cdr lst))))) 
```

请注意以下几点：

*   当输入列表为空时递归结束，并且鉴于我们正在构建一个新列表，返回的正确值是空列表
*   我们有兴趣构建一个新列表，我们通过`cons`为输出列表添加一个新元素来做到这一点，在这种情况下，它恰好是输入列表的第一个元素（它的`car`一部分）
*   最后，递归步骤通过使用输入列表的其余部分（它的`cdr`一部分）调用过程来推进

像往常一样，我建议你看一下[The Little Schemer](https://rads.stackoverflow.com/amzn/click/com/0262560992)或[How to Design Programs](http://www.ccs.neu.edu/home/matthias/HtDP2e/)来回答人们学习如何递归思考的问题，这两本书都会教你如何使用 Scheme 来理解递归过程。

# java - 试图通过 php 解密我用 javav 加密的密码

> ID：13243361
> 
> 赞同：-1
> 
> 时间：2012-11-06T02:07:43.433
> 
> 标签：java, php, encryption, mcrypt

所以我的java看起来像

```
String epassword = Crypt.encryptStringToString((String) params.get("password")); 
```

然后我将其存储在数据库中。我需要用 PHP 解密它。

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:31:57.860

我假设您正在使用`uk.org.ellery.twiki.Crypt`，因为这是我在 Google 上搜索“encryptStringToString java”时出现的唯一内容。

在 PHP 中，您需要重新实现此处链接的类：

[http://svn.foswiki.org/trunk/EncryptedPagesPlugin/uk/org/ellery/twiki/Crypt.java](http://svn.foswiki.org/trunk/EncryptedPagesPlugin/uk/org/ellery/twiki/Crypt.java)

您对“decryptString”方法特别感兴趣。

如果有帮助，看起来它会生成一个随机盐，该盐与前 8 个字节中的加密值一起存储，并且应用实际加密/解密的算法是标准 Java 加密库提供的“PBEWithMD5AndDES”。但是，有一些包装代码可以将值转换为十六进制值和 Base64 字符串（反之亦然）。

看起来[有人已经将 PBEWithMD5AndDES 移植到 PHP 了](https://github.com/KevinBusse/PBEWithMD5AndDES)，所以你只需要在 PHP 中重新编写 Crypt.java 文件。

# mongodb - mongodb：原子地重命名两个集合？

> ID：13243363
> 
> 赞同：5
> 
> 时间：2012-11-06T02:07:53.013
> 
> 标签：mongodb

我有两个现有的集合“A”和“B”。我需要将“B”重命名为“C”，并将“A”重命名为“B”，在此期间不允许对 B 进行任何写入。重命名本身会激活全局锁，但我需要防止在重命名之间发生写入。这可能吗？

这是我的代码：

```
db.B.renameCollection('C')
                           <-- prevent writes from occurring to B in between commands
db.A.renameCollection('B') 
```

编辑：我使用的是 mongodb 1.8.1 版，目前不能选择更改版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T08:46:46.827

Mongodb 本身无法处理这个问题，你可以做到这一点的唯一方法是使用一些自定义代码。

如果这只会在你的应用程序中发生一次（我猜重命名集合不是经常做的事情）你可以有一个更“激进”的方法，你可以在你的数据库中搜索一个标志，这意味着'collection db.B已重命名，但 db.A 尚未重命名。如果您的所有写入在将写入提交到服务器之前都检查了这一点，并且如果设置了标志就返回，它可以保护应用程序在 db.B 重命名后不写入 db.A。

我认为这是一种“激进”的方法，因为它显然会影响性能（不过，读取速度如此之快，您可能不会感觉到）。

如果您的应用程序在单个 Web 服务器（而不是 Web 场）上运行，您可以在 Web 应用程序本身上使用同步机制，使用信号量等线程同步工具，甚至是一些将用作标志的线程安全变量上面建议。（取决于您使用的服务器端技术）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-17T13:57:33.577

您可以创建一个名为“renameCollection”的函数并对其进行锁定：

```
db.runCommand({eval:renameCollection,args:["Collection1","Collection2"],nolock:false}); 
```

锁允许安全地执行此类操作并等待请求

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T05:06:40.403

正如你可能猜到的：这是不可能的。没有事务支持，只有原子操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-25T02:15:50.543

我在 TokuMX 上为 Tokutek 工作，[使用多语句交易](http://www.tokutek.com/2013/10/introducing-tokumx-transactions-for-mongodb-applications/)。

正如其他答案所说，MongoDB 无法做到这一点（据我所知），但 TokuMX 可以。TokuMX 在非分片集群上有多语句事务。要执行此操作，您可以执行以下操作：

*   db.beginTransaction()
*   db.B.renameCollection('C')
*   db.A.renameCollection('B')
*   db.commitTransaction()

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T08:27:53.997

MongoDB 没有事务重命名的意义，实际上我不确定 SQL 在这种情况下是否也这样做，但是您可以通过一些服务器端编程和锁定集合来完成此操作。

从您的服务器端语言中，您可以在将行写入锁定表时触发命令，针对 B 的每个查询都将检查锁定，如果未找到将写入，否则将退出。

这是一种简单的方法，但很可能有点乏味，特别是如果您有一个非常分段的代码库，它没有在服务器端代码和数据库之间容纳标准化的查询层。

我还应该注意，这`renameCollection`不适用于分片集合，您很可能已经知道这一点，但我想我还是会这么说。在分片集合的情况下，最好通过复制操作来“移动”集合。

# function - 为什么这个程序集产生 24 而不是 4？

> ID：13243365
> 
> 赞同：4
> 
> 时间：2012-11-06T02:08:52.417
> 
> 标签：function, assembly, recursion, gnu

我无法理解以下代码的工作原理。这是一段简单的代码，它使用递归函数来查找数字的阶乘。在这种情况下`4*3*2*1 = 24`。

```
.section .data
.section .text
.globl _start
._start:

 pushl $4
 call factorial
 addl $4, %esp

 movl %eax, %ebx
 movl $1, %eax
 int $0x80

 .type factorial, @function
 factorial:
 pushl %ebp
 movl %esp, %ebp
 movl 8(%ebp), %eax

 cmpl $1, %eax
 je end_factorial
 decl %eax
 pushl %eax
 call factorial
 movl 8(%ebp), %ebx
 imull %ebx, %eax

 end_factorial:
 movl %ebp, %esp
 popl %ebp
 ret 
```

我了解有关代码的所有内容，但我不明白为什么要执行此部分（第 25/26 行）。

```
movl 8(%ebp), %ebx
imull %ebx, %eax 
```

我的理解（这显然是错误的）是该函数将继续调用自身，直到值为`%eax`1。此时它将乘以“4”乘以`%eax`1。这将给出 4 的值，这对于 4 的阶乘是完全错误的。但是，当我运行它时，它实际上给出了正确的输出 24。我在想每次函数时都应该执行乘法指令执行，而不是在函数完成调用自身之后。

有人可以通过代码向我解释为什么代码实际上给出了 24 的正确答案，而不是我认为它应该给出的答案 (4)。

每次在函数内部调用函数时，ebp 都会推送到堆栈并将更改为 esp。（推 %ebp 移动 %esb，%ebp）。如果是这样，我们如何在函数结束时将 esp,ebp 值恢复为初始值。（据我了解，pop 是在 end_function 中执行的，我们已经多次调用该函数，该函数已将 ebp、return、eax 多次推送到堆栈）。这真的让我的组装逻辑崩溃了。请有人定期解释它，说明堆栈有什么，并在每个点注册。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:18:27.687

请记住，函数的返回值总是进入`%eax`

汇编函数通过并调用阶乘，`%eax`每次减1并将其压入堆栈。什么时候`%eax`是一，它终于回来了。这将带您回到存储在 2`call factorial`时的递归调用（回想一下它是被推送的）。所以现在你有 2*1=2= 。现在它完成并再次返回并重复该过程，直到它返回到首先调用的函数。`%eax``8(%ebp)``%eax``factorial`

# java - jdk socket实现了哪些协议

> ID：13243366
> 
> 赞同：2
> 
> 时间：2012-11-06T02:09:12.187
> 
> 标签：java, communication, network-protocols, tcp-ip

如果我理解正确，我们`java.io/java.nio.*`用来实现一个应用程序，它应该是 ISO 5 层模型的应用程序层实现（可能不准确）。我觉得JDK应该实现低层（传输层、网络层甚至L2、L1），如果是，基于哪些协议。如果没有，请介绍一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:50:23.363

可能你对它有非常基本的理解，所以很多事情都混淆了。

java.nio 等在提供应用层（OSI 第 7 层）或套接字（套接字比应用层稍低，因为您可以在它们之上制作 http、ftp 等）时，它们确实也实现了所有较低层。如果没有较低的层，您实际上无法发送单个数据包，因此无法进行通信。

程序员是否可以访问这些层以及您可以自定义到哪个级别是另一回事。

通常的标准是 sockets api，它提供了很多选择来指定较低层（tcp、udp 或 raw）。

此外，大多数高级语言都提供应用层实现，例如 HTTP、SMTP 等。

# php - 使用 readdir() 获取文件时读取文件属性

> ID：13243370
> 
> 赞同：0
> 
> 时间：2012-11-06T02:09:33.263
> 
> 标签：php, file, html-table, directory

我正在尝试在获取文件时将文件属性打印到表中，`readdir()`但收到错误消息：

> “警告：fileperms() [function.fileperms]: stat failed for 0.54322000 1352164273tunes.txt 在 C:\Users\Desktop\xampp\tybai5131displayBackups.php 第 24 行”

文件名很长，因为我使用它来命名它`microtime()`

对于每个功能，我都会遇到相同的错误，而不仅仅是`fileperms()`

这是我正在使用的 PHP 代码：

```
<table>
<tr><th>File Name</th><th>Owner ID</th><th>Permissions</th><th>File Size</th></tr>
        <?php

            //declare backup directory as a variable
            $dirBackup = "backups/";

            //check if backup directory exists 
            if(!is_dir($dirBackup)) {

                //display error message if backup directory does not exist
                print("You do not have a backup directory yet.");

            } else {

                //else open the directory for reading
                $dirOpenedBackup = opendir($dirBackup);

                while($backupFile = readdir($dirOpenedBackup)){
                    if($backupFile !== '.' && $backupFile !== '..'){
                        print("<tr><td><a href='backups/".$backupFile."'>" .$backupFile. "</a></td><td>".fileowner($backupFile)."</td><td>".fileperms($backupFile)."</td><td>".filesize($backupFile)."</td></tr>");
                    }
                }
            }//close !is_dir 

        ?>
</table> 
```

关于我可以做些什么来让它正常工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T02:51:43.600

除了文件的物理存在之外，可能还有其他不同的事情可以阻止您在特定用户下访问该文件。

您需要验证您是否可以使用您的 PHP 脚本用来执行这些调用的用户访问该文件以及该文件所在的目录（这取决于您的服务器和 PHP 配置）。所以首先找出哪个是用户名。

# java - Spring中如何将多张地图合并为一张

> ID：13243376
> 
> 赞同：2
> 
> 时间：2012-11-06T02:10:18.970
> 
> 标签：java, spring, map, javabeans

我的上下文文件中定义了几个地图。有没有一种方法可以将这些映射组合成一个包含所有条目的映射，而无需编写 Java 代码（并且不使用嵌套映射）？我正在寻找相当于 Map m = new HashMap(); m.putAll(汽车地图); m.putAll(bikeMap); 似乎应该有一种方法可以在 Spring 上下文文件中执行此操作，但 util:map 上的 Spring 3.0 参考文档部分并未涵盖此用例。

```
<!-- I want to create a map with id "vehicles" that contains all entries of the other maps -->

<util:map id="cars">
    <entry key="groceryGetter" value-ref="impreza"/>
</util:map>

<util:map id="bicycles">
    <entry key="commuterBike" value-ref="schwinn"/>
</util:map> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T02:13:31.090

使用Spring 中的[集合合并](http://static.springsource.org/spring/docs/2.0.x/reference/beans.html#beans-collection-elements)概念，像这样的多个 bean 可以增量合并。我在我的项目中使用它来[合并列表](http://vikdor.blogspot.in/2012/10/using-collection-merging-in-spring-to.html)，但也可以扩展到合并地图。

例如

```
<bean id="commonMap" 
      class="org.springframework.beans.factory.config.MapFactoryBean">
    <property name="sourceMap">
        <map>
            <entry key="1" value="one"/>
            <entry key="2" value="two"/>
        </map>
    </property>
</bean>
<bean id="firstMap" 
      parent="commonMap" 
      class="org.springframework.beans.factory.config.MapFactoryBean">
    <property name="sourceMap">
        <map merge="true">
            <entry key="3" value="three"/>
            <entry key="4" value="four"/>
        </map>
    </property>
</bean> 
```

第二个映射定义与第一个映射定义的关联是通过节点`parent`上的属性完成的，并且使用节点上的属性`<bean>`将第一个映射中的条目与第二个映射中的条目合并。`merge``<map>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T03:13:28.163

我敢打赌，Spring 中没有直接支持此功能。

但是，编写一个在 Spring 中使用的工厂 bean 并不难（还没有尝试编译）

```
public class MapMerger <K,V> implements FactoryBean {
  private Map<K,V> result = new HashMap<K,V>();
  @Override
  public Object getObject() {
    return result;
  }
  @Override
  public boolean isSingleton(){
    return true;
  }
  @Override
  public Class getObjectType(){
    return Map.class;
  }
  public void setSourceMaps(List<Map<K,V>> maps) {
    for (Map<K,V> m : maps) {
      this.result.putAll(m);
    }
  }
} 
```

在 spring 配置中，只需执行以下操作：

```
<bean id="yourResultMap" class="foo.MapMerger">
  <property name="sourceMaps">
    <util:list>
      <ref bean="carMap" />
      <ref bean="bikeMap" />
      <ref bean="motorBikeMap" />
    </util:list>
  </property>
</bean> 
```

# python - 改进单词组合脚本

> ID：13243380
> 
> 赞同：2
> 
> 时间：2012-11-06T02:11:00.250
> 
> 标签：python

有什么办法可以使这更好或更简单？我知道它会生成很多单词，当您尝试在一个句子中组合超过 4 行时，它看起来并不像它应该的那样。

```
infile = open('Wordlist.txt.txt','r')
wordlist = []
for line in infile:
    wordlist.append(line.strip())
infile.close()
outfile = open('output.txt','w')
for word1 in wordlist:
    for word2 in wordlist:
        out = '%s %s' %(word1,word2)
        #feel free to #comment one of these two lines to not output to file or screen
        print out
        outfile.write(out + '\n')

outfile.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T02:21:05.393

利用[`itertools.product`](http://docs.python.org/2/library/itertools.html#itertools.product)

```
with open('Wordlist.txt.txt') as infile:
    words = [line.strip() for line in infile]

with open('output.txt', 'w') as outfile:
    for word1, word2 in itertools.product(words, repeat=2):
        outfile.write("%s %s\n" %(word1, word2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T02:26:40.957

如果您的 infile 中的每一行恰好包含 2 个单词，您可以考虑：

```
from itertools import product

with open('Wordlist.txt.txt','r') as infile:
   wordlist=infile.readlines()

with open('output','w') as ofile:
   ofile.write('\n'.join(map(product, [line.strip().split() for line in wordlist]))) 
```

# ruby-on-rails - 无法批量分配受保护的属性：_destroy - Ruby on Rails

> ID：13243385
> 
> 赞同：0
> 
> 时间：2012-11-06T02:11:47.410
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我收到此错误：

“ActiveModel::MassAssignmentSecurity::DaysController#create 中的错误

无法批量分配受保护的属性：_destroy”

我什至不知道 _destroy 是一个属性！

我在做什么：

我的模型是我有很多“天”的“旅行”

在我的 Trips 模型的“显示”视图中，我正在渲染表单的部分内容以添加新的“日”：

```
<div id="day_form">
  <%= render :partial => "day_form", :day => @day %>
</div> 
```

我的模型：

```
class Trip < ActiveRecord::Base
  attr_accessible :title, :days_attributes
  has_many :days
  accepts_nested_attributes_for :days, allow_destroy: true

end

 class Day < ActiveRecord::Base
  attr_accessible :activity_id, :order, :summary, :trip_id, :activities_attributes
  belongs_to :trip
  has_many :activities, :order => 'position'
  accepts_nested_attributes_for :activities, allow_destroy: true 
end 
```

当我提交表单时，我收到了这个 Mass Assignment 错误。为什么？

**编辑**

“日”表格如下所示：

```
 <%= form_for(@day) do |f| %>

      <ul>
      <% @day.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

        <fieldset>
          <%= f.label :summary, "Day Summary" %><br />
          <%= f.text_area :summary, :rows => 1 %><br />
          <%= f.hidden_field :_destroy %>
              <%= link_to "remove", '#', class: "remove_fields" %>
        </fieldset>
        <div class="actions">
    <%= f.submit %>
        </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T15:26:55.173

```
 module ApplicationHelper
  def link_to_remove_fields(name, f)
    text_field_tag(:_destroy) + link_to_function(name, "remove_fields(this)")
  end 
```

代替`f.hidden_field`

# c - 有人可以给我一个 C 中数组的“纯指针表示法”示例吗？

> ID：13243391
> 
> 赞同：1
> 
> 时间：2012-11-06T02:12:10.670
> 
> 标签：c, arrays, pointers, notation

我正在寻找 C 中“纯指针表示法”的示例。我有一个将程序转换为纯指针表示法的任务，它使用了很多数组。另外，您能否举一个不构成纯指针表示法的示例？

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T02:16:36.470

纯指针表示法基本上只是意味着使用指针算术来寻址数组的元素，而不是`[...]`数组索引运算符。

例如：

```
 someArray[10] = newValue; 
```

是相同的

```
 *(someArray + 10) = newValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:19:03.283

数组的名称可以用作指向数组第一个元素的指针。So`myArray`等价于`&myArray[0]`，并且`*myArray`等价于`myArray[0]`。然后，您可以`myArray`使用指针算术到达其他索引，因此例如`myArray[1]`等效于`*(myArray + 1)`.

# javascript - 使用 javsascript 转义键取消关闭窗口

> ID：13243392
> 
> 赞同：0
> 
> 时间：2012-11-06T02:12:23.287
> 
> 标签：javascript, jquery

我有第一个 js 切换 div 帮助用户查看当前转换。我希望配合转义键来关闭弹出窗口。我知道按键代码（您可以在我的 fn 下方看到），但我的语法不是通过将它们捆绑在一起来实现的。非常欢迎任何帮助哦！

```
/* currency converter */
$('#link-currency').click(function (e) {
    e.preventDefault();
    $('#popup-currency').toggleClass('active');
});

$('body').keypress(function (e) {
    alert(e.which);
    if(e.which == 27){
        // Close my modal window
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T02:15:47.093

试试看`keyup`文档：

```
$(document).keyup(function(e) {
   if (e.keyCode == 27) { 
     $('#popup-currency').removeClass('active')
   }
}); 
```

# get - 需要在prolog中从系统中获取当前年份

> ID：13243393
> 
> 赞同：1
> 
> 时间：2012-11-06T02:12:30.187
> 
> 标签：get, system, sicstus-prolog

我是 stackoverflow 和 Prolog 的新手。

我想获取当前年份并将其用于“BD > currentYear”之类的比较中。从我一直在做的研究来看，我认为我需要使用'use_module(library(system))'，但我不知道如何......

你能帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:53:51.170

library(system) 中的 datime/1 将执行您想要的操作，例如：

```
%% test.pl BEGIN
% Ensure datime/1 is available
:- use_module(library(system), [datime/1]).

current_year(Year) :-
    datime(datime(Year,_Month,_Day,_H,_M,_S)).

%% test.pl END 
```

然后您可以调用 current_year/1，如下所示：

```
| ?- current_year(Year), Year >= 2012, write('It is 2012 or later\n').
It is 2012 or later
Year = 2012 ? 
yes
| ?- 
```

（注意 Prolog 中的变量必须以大写字母开头，因此*currentYear*不是有效的变量名。）

# c++ - 运行我的 SFML 脚本时出现问题

> ID：13243394
> 
> 赞同：0
> 
> 时间：2012-11-06T02:13:25.300
> 
> 标签：c++, sfml

我最近刚刚安装了 SFML 并正在尝试学习它，但无法弄清楚它为什么不起作用。

我的脚本来自他们的教程，所以很短：

```
#include <SFML/Window.hpp>
#include <iostream>

int main()
{
// Create the main window
sf::Window App(sf::VideoMode(800, 600, 32), "SFML Window");

// Start main loop
bool Running = true;
while (Running)
{
    App.Display();
}

return EXIT_SUCCESS;
} 
```

我遇到的问题是我遇到了几个错误并且不确定我做错了什么......这些是我的错误：

指向我的错误列表的链接在这里（无法在此处很好地格式化列表）：

[http://www.paste.to/MTYzNzE2Mw==](http://www.paste.to/MTYzNzE2Mw==)

希望有人能解释我哪里出错了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:56:52.697

看来您没有正确安装库。

你为什么不试试 sfml 和 CodeBlocks ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:35:30.007

我对 SFML 本身没有经验，但看起来像是安装库的问题或链接阶段的编译问题（未链接 sfml 库）。

[您是否按照此处](http://www.sfml-dev.org/tutorials/1.6/)列出的为 sfml 设置编译环境的入门教程进行操作？

# php - 在 PHP 中，使用 DomDocument getElementByID 不起作用？我究竟做错了什么？

> ID：13243396
> 
> 赞同：6
> 
> 时间：2012-11-06T02:13:36.500
> 
> 标签：php, domdocument, getelementbyid, nodevalue

这是我的一些代码......

```
$dom = new DomDocument;
$html = $newIDs[0];
$dom->validateOnParse = true;
$dom->loadHTML($html);
$dom->preserveWhiteSpace = true;
$tryID = $dom->getElementById('ID');
echo $tryID; 
```

我正在尝试从一个网站获取多个特定的 ID，这只是显示一个，而且我在任何地方都看到过这种方法，包括在这里，但是当我尝试打印一些东西时，什么也没有出现。我试着测试看看它是否正在读一些东西

```
if(!$tryID)
{
    ("Element not found");
} 
```

但它也从不打印出来。最后，我用过

```
echo $tryID->nodeValue; 
```

仍然没有...有人知道我做错了什么吗？

另外，如果我确实做到了这一点，我可以在同一个 $dom 上读取多个不同的东西到不同的变量吗？如果这有意义的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:08:50.500

好的，所以你的解决方案。

对于 DIV：

```
<div id="divID" name="notWorking">This is not working!</div> 
```

这将做：

```
<?php

    $dom = new DOMDocument("1.0", "utf-8");
    $dom->loadHTMLFile('YourFile.html');
    $div = $dom->getElementById('divID');

    echo $div->textContent;

    $div->setAttribute("name", "yesItWorks");
?> 
```

只要您传递 Well-Made XML 或 XHTML 内容，就应该在没有文件的情况下工作，改变

```
$dom->loadHTMLFile('YourFile.html'); 
```

给你的

```
$dom->loadHTML($html); 
```

哦，是的，当然，要更改内容（为了完整性）：

```
$div->removeChild($div->firstChild);
$newText = new DOMText('Yes this works!');
$div->appendChild($newText); 
```

然后你可以再次回显它或其他东西。

# regex - 如何复制正则表达式

> ID：13243398
> 
> 赞同：1
> 
> 时间：2012-11-06T02:14:35.220
> 
> 标签：regex, emacs

我想搜索引号中的所有短语，然后复制它们。

在 Emacs 中，我的搜索如下所示：

`M-x replace-regexp <RETURN> "*" <RETURN> $& $& <RETURN>`

但它不起作用...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T02:46:14.000

`"*"`不匹配引号分隔的字符串；它匹配一行中任意（非零）数量的引号。

在正则表达式中，`*`是修饰符，而不是文件名模式中的通配符。它的意思是“匹配前一个模式的0个或多个”，`"*"`“0个或多个引号，后跟一个引号”也是如此——即一行中任意数量的引号。

“任何东西”的常用正则表达式`.*`匹配 0 个或多个“任何字符”( `.`)。但这将包括引号；`".*"`将从第一个引号到最后一个引号的所有内容匹配为一个大字符串。你想要的是`"[^"]*"`，它匹配一个引号，后跟任意数量的非引号，然后是另一个引号。

此外，匹配的模式是`\&`，不是`$&`。这可能会更好：

```
M-x replace-regexp <RETURN> "[^"]*" <RETURN> \& \& <RETURN> 
```

# java - 在 Android 应用程序中实现低通滤波器 - 如何确定 alpha 的值？

> ID：13243399
> 
> 赞同：1
> 
> 时间：2012-11-06T02:14:40.323
> 
> 标签：java, android, filter, signal-processing, android-sensors

实现低通滤波器的算法如下（来自维基百科）：

```
for i from 1 to n
   y[i] := y[i-1] + α * (x[i] - y[i-1]) 
```

在哪里

```
α = T/(tau + T) 
```

T 是周期，换句话说，是接收数据的时间间隔。tau 是时间常数，定义为：

```
tau = RC. 
```

好的，一切都清楚了。每个人似乎都为 α 提出了不同的值，但它打败了我——如何才能为这个值做出合乎逻辑的决定？

当然，R 和 C 的值无法使用 - 是吗？

有人知道如何确定 tau 的值，从而确定 α 的值吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:24:16.020

T：采样周期。

tau：时间常数。

fc：滤波器的截止频率。fc = 1 / τ

然后

阿尔法 = T / ( T + 1/fc )

此致！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T01:43:21.637

我在使用低通滤波器计算罗盘传感器数据的平滑参数（ALPHA）时遇到了同样的问题。

我已经弄清楚并且计算出的 ALPHA 值对我的应用程序很有用。

有关更多理解和讨论，请参阅以下帖子

[如何计算低通滤波器的平滑参数值（在罗盘传感器数据平滑的情况下）](https://stackoverflow.com/questions/20777726/how-to-calculate-the-value-of-the-smoothing-parameter-for-lowpass-filter-in-cas)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T04:25:15.443

对于不同的低通滤波器，您可能需要考虑 RBJ 双二阶：

[http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt](http://www.musicdsp.org/files/Audio-EQ-Cookbook.txt)

这里详细描述了它的实现：

[http://blog.bjornroche.com/2012/08/basic-audio-eqs.html](http://blog.bjornroche.com/2012/08/basic-audio-eqs.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-11T01:06:08.967

来自[维基百科的 RC 时间常数条目](http://en.wikipedia.org/wiki/RC_time_constant)：*截止频率*- 时间常数与截止频率 fc 有关，这是 RC 电路的替代参数

```
tau = 1 / (2π * f) 
```

为什么是 2π？来自[维基百科的时间常数条目](http://en.wikipedia.org/wiki/Time_constant)

```
ω = 2π * f is the frequency in radians per second. 
```

从[同一个条目](http://en.wikipedia.org/wiki/Time_constant)来看，Tau 相当于 RC，是系统的上升时间。低上升时间意味着较高频率的输入不会激励系统。很容易想象它与低通滤波器的截止频率相连。最终，它控制有多少反馈信号与新输入信号混合。

在我的二阶低通滤波器中，我将以下内容用于 alpha。

```
α = 1 / (T * tau) 
```

在我的音频应用程序中，二阶滤波器是两个链接的单阶滤波器，我像这样计算滤波器输出。`filter1Out`并且`filter2out`是过滤器的当前值，这是接收后的更新`input`。

```
filter1Out = filter1Out + (alpha * (input - filter1Out));
filter2Out = filter2Out + (alpha * (filter1Out - filter2Out)); 
```

为了确定您希望 Android 指南针的截止频率是多少，我首先不会实施任何过滤并尝试使用提供的数据。截止实际上取决于您对信号的处理方式。您是否为屏幕动画平滑它？您是否对其进行平滑以进行路径跟踪？您要拒绝的信号中是否有噪声？每个都可能需要不同的设置。如果未过滤的信号变化太频繁，那么请计算出您希望它多久改变一次，并将其用作滤波器截止的起点。

我希望这有帮助。DSP 数学的推导超出了我的技能，但我已经为音频应用实现了几次低通滤波器。

# ruby-on-rails - 问题创建和应用将导演字段添加到电影表的迁移

> ID：13243401
> 
> 赞同：1
> 
> 时间：2012-11-06T02:15:04.990
> 
> 标签：ruby-on-rails

这是我认为正确的代码：

```
rails generate migration AddDirectorsToMovies Directors:string 
```

当我运行`rake db:test:prepare`时，终端告诉我：

```
Run "rake db:migrate" to update your database then try again. The rake aborts. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:28:47.507

你先跑了`rake db:migrate`吗？该任务将生成架构文件，然后由`rake db:test:prepare`.

# python - Cython numpy 数组形状，元组分配

> ID：13243404
> 
> 赞同：7
> 
> 时间：2012-11-06T02:15:16.113
> 
> 标签：python, numpy, cython

我用成语

```
 size_x, size_y, size_z = some_array.shape 
```

在处理 numpy 数组时经常发生。当有问题的数组具有类型时，同样的事情在 Cython 中似乎不起作用，例如

```
 def someFunc(np.ndarray[np.float32_t, ndim=2] arr):
      sx, sy = arr.shape 
```

我们最终会出现编译错误，例如

```
 Cannot convert 'npy_intp *' to Python object 
```

这可能是因为“shape”被转换为 C 数组（为了更快地访问），所以它不再是一个元组。

即使在 Cython 中也有可能以某种方式提取这个元组吗？（或者我应该坚持`sx, sy = arr.shape[0], arr.shape[1]`吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T02:25:11.097

我相信你是正确的，直接处理这个问题的方法是：

```
cdef int sx, sy
sx = arr.shape[0]
sy = arr.shape[1] 
```

我不知道另一种方法可以做到这一点，这是我在自己的代码中使用的约定。

# php - 向匿名用户显示搜索表单：Drupal

> ID：13243408
> 
> 赞同：0
> 
> 时间：2012-11-06T02:16:02.823
> 
> 标签：php, drupal, drupal-modules

我的 drupal 站点中有一个搜索框。
问题是它只对经过身份验证的用户可见，而对匿名用户不可见。
在设置中，没有选择任何角色以便将其显示给所有用户。
我什至通过勾选所有角色的复选框进行了检查，但仍然没有运气。
有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T06:16:26.840

检查您是否已在“权限”页面中授予匿名用户使用搜索的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:27:02.867

我刚刚在我的 Drupal 网站上进行了实验，当我将默认的“搜索块”添加到我的网站并将“使用搜索”权限授予“匿名用户”和“经过身份验证的用户”时，匿名用户可以很好地看到搜索块。

如果您正在做同样的事情，那么您的某些自定义代码可能会弄乱搜索块。

# matlab - 在 Octave 上使用 libsvm (Windows)

> ID：13243410
> 
> 赞同：2
> 
> 时间：2012-11-06T02:17:00.420
> 
> 标签：matlab, machine-learning, octave, svm, libsvm

我想在 Octave 上使用 libsvm（在 Windows 平台上）。如果我从自述文件和互联网上的几十个帖子中理解得很好，*我不必制作或编译任何东西，只需将 mexw32 和 mexw64 文件复制到我的 Octave 工作目录*。如果我这样做，什么也不会发生，当我想运行我的示例代码时，错误与以前一样：

```
error: `libsvmread' undefined near line 7 column 11 
```

我也尝试从 Octave 命令提示符运行 make ，但后来出现其他错误：

```
warning: unable to find mkoctfile in expected location: `c:\Program Files (x86)\
Octave-3.6.2\bin\mkoctfile-3.6.2'
warning: mkoctfile exited with failure status 
```

但是给定目录中有*一个*mkoctfile-3.6.2.exe ......

我也已经尝试过编辑该`octaverc`文件......但它没有帮助。

任何想法如何正确安装 libsvm？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T06:51:13.460

根据`matlab`LIBSVM 发行版子文件夹中的 README 文件（我查看了 3.13），包含的二进制文件仅适用于 Windows 上的 64 位版本的 Matlab。这些二进制文件绝对不适用于我在 Windows 上的 Octave 版本！为了让 LIBSVM 与 Octave 一起工作，我们必须构建 Octave 特定的 .mex 文件并将它们放在 Octave 可以找到它们的地方。

我在[http://flyingpies.wordpress.com/2012/11/20/getting-libsvm-to-work-with-octave-on-windows/](http://flyingpies.wordpress.com/2012/11/20/getting-libsvm-to-work-with-octave-on-windows/)汇总了该过程的演练。简而言之，步骤是：

1.  确保您拥有使用 Visual Studio 构建的 Windows 版本的 Octave（即不是 cygwin 或 mingw 版本。）我确信这些其他版本可以采取类似的步骤，因为我没有尝试过。

2.  获取 Visual Studio 2010 或 2012 的副本。对我来说都可以。你只需要那个大包中的命令行 C 编译器和链接器。VS的[快速版本可从 Microsoft 免费获得](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop#product-express-desktop-details)，但我没有尝试过。

3.  在命令提示符窗口中，运行`vcvarsall.bat`Visual Studio 的 Visual C 文件夹中的批处理文件，以准备好编译环境。

4.  将 Octave bin 文件夹添加到您的路径（`C:\Program Files (x86)\Octave-3.6.2\bin`在我的机器上）。这解决了您遇到的“找不到 mkoctfile”问题。

5.  编辑 Octave 的 math.h 包含文件以引用 Visual Studio 的 math.h 的正确位置。我不得不将第 74 行的`c:\Program Files (x86)\Octave-3.6.2\include\math.h`from更改`c:/Program Files/Microsoft Visual Studio 10.0/VC/include/math.h`为`c:/Program Files (x86)/Microsoft Visual Studio 11.0/VC/include/math.h`。

6.  在使用 vcvarsall 和路径启动的同一命令提示符窗口中，启动 Octave，导航到 LIBSVM 发行版的 matlab 子文件夹，然后运行 ​​make 命令。这将执行该文件夹中的 make.m 文件，该文件将构建 .mex 文件。

7.  将 .mex 文件复制到 Octave 可以找到它们的文件夹。我把它们放进去`C:\Program Files (x86)\Octave-3.6.2\lib\octave\3.6.2\site\oct\i686-pc-mingw32`。

此时，如果启动 Octave，LIBSVM 接口命令应该可用。例如，该`svmtrain`命令应该运行。

# mysql - MYSQL：LEFT JOIN 运行缓慢

> ID：13243411
> 
> 赞同：0
> 
> 时间：2012-11-06T02:17:16.083
> 
> 标签：mysql, indexing, left-join, explain

我有两张桌子：

[表格1](http://pastebin.com/v4u21W2c)

[表 2](http://pastebin.com/6NVSFD0a)

然后我确实离开了两个表：

```
SELECT DATE(`Inspection_datetime`) AS Date, `Line`,`Model`, `Lot_no`, 
       COUNT(A.`Serial_number`) AS Qty,B.`name`
FROM `inspection_report` AS A
LEFT JOIN `Employee` AS B
ON A.`NIK` LIKE B.NIK
GROUP BY Date , A.Model ,A.Lot_no,A.Line,B.`name`
ORDER BY Date DESC 
```

这个查询使我的 Jquery DataTable 插件运行非常慢，即使数据没有显示。奇怪的是这个字段`B.name`，如果我在查询中提到它，数据不会出现，但如果我删除它，数据就会出现（我的意思是不做`LEFT JOIN`）。

我的查询是否不够好？这是我的`EXPLAIN`：

```
TABLE 1

id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  inspection_report   ALL NULL    NULL    NULL    NULL    334518  

TABLE 2
    id  select_type table   type    possible_keys   key key_len ref rows    Extra
    1   SIMPLE  Employee    ALL NULL    NULL    NULL    NULL    100 

QUERY
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  B   ALL NULL    NULL    NULL    NULL    100 Using temporary; Using filesort
1   SIMPLE  A   ALL NULL    NULL    NULL    NULL    334520  Using where; Using join buffer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:23:59.333

您加入`LIKE`条款而不是平等的任何特殊原因？

```
SELECT DATE(`Inspection_datetime`) AS Date, `Line`,`Model`, `Lot_no`, 
       COUNT(A.`Serial_number`) AS Qty,B.`name`
FROM `inspection_report` AS A
LEFT JOIN `Employee` AS B
ON A.`NIK` = B.NIK
GROUP BY Date , A.Model ,A.Lot_no,A.Line,B.`name`
ORDER BY Date DESC 
```

应该会产生更好的结果。

此外，向 A.NIK 添加索引应该极大地帮助连接操作。

```
CREATE INDEX inspection_report_nik ON inspection_report (NIK); 
```

# java - Java中的特权指令

> ID：13243412
> 
> 赞同：-2
> 
> 时间：2012-11-06T02:17:24.493
> 
> 标签：java, privileged-functions

是否可以通过一些 Java 的 API 提供一些特权指令（例如 sti、cli）？

为什么不？（或者如果是的话，你能给我一些关于如何实现的大纲/基本想法吗？）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:26:11.957

STI 和 CLI 是低级平台相关[中断](http://en.wikipedia.org/wiki/Interrupt_flag)。

当您使用 Java（该语言）编写源代码时，您的目标是执行 Java 字节码的 Java 虚拟机。因此，您的源代码指令不会直接转换为物理机器的机器代码。它被转换为字节码，然后运行（并在运行时由 JIT 编译器重新编译）以针对您的物理机器。

因此，您没有选择（因为这不是 Java 的真正设计目标，公开它也没有多大意义）轻松使用这些特权指令。它们是**抽象**的。

我们使用“高级”语言是有原因的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:27:26.750

在传统的 Java 实现中，您唯一的选择是在您使用 JNI 或 JNA 调用的本机方法中实现执行特权指令的代码。它对你没有任何好处......因为硬件/操作系统会阻止指令运行。（你会得到一个非法指令陷阱......程序将被杀死。）

> 为什么不？

基本上，如果一个普通的 Java 应用程序（或任何其他用户空间应用程序）可以执行特权指令，它可能会轻微地使操作系统崩溃。这真是个坏主意。

* * *

在 Java 的裸机实现中，可以通过本机代码或其他方式执行特权指令。（例如，在 JNode 中，本机代码编译器将用特权指令替换某些“魔术”方法调用......在仔细控制的情况下。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T02:54:51.830

不知道您为什么对这些事情感兴趣，但请先看看[这篇文章](http://today.java.net/pub/a/today/2006/10/19/invoking-assembly-language-from-java.html)。

# android - 当父进程停止时停止子进程

> ID：13243415
> 
> 赞同：3
> 
> 时间：2012-11-06T02:18:17.643
> 
> 标签：android, events, process, runtime

在我的 android 应用程序中，我使用`Runtime.getRuntime().exec()`.

但可能是这样的情况，用户杀死了我的应用程序，但子进程仍在运行。我想要的是，当我杀死应用程序时，也杀死子进程。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:28:58.507

我会

*   跟踪我的应用程序创建的进程。
*   向 JVM 注册一个关闭钩子，[`Runtime.getRuntime().addShutdownHook()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)当应用程序关闭时将调用该钩子并杀死所有生成的进程，这些进程在上一步中被跟踪。

# jtextarea - 如果附加文本，JTextArea setWrapStyleWord(true) 不起作用

> ID：13243416
> 
> 赞同：1
> 
> 时间：2012-11-06T02:18:22.277
> 
> 标签：jtextarea, word-boundaries

根据 Oracle 在[JTextArea 文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextArea.html)中的说法，如果您希望换行并在字边界而不是字符边界处换行**，**则必须使用如下代码：

```
jtaOutputPrimes.setLineWrap(true);
jtaOutputPrimes.setWrapStyleWord(true); 
```

请注意 jtaOutputPrimes 是 my`JTextArea`上 my的名称`JPanel`。
当我使用方法 append 将文本添加到 JTextArea 时，问题就出现了，如下所示：

```
jtaOutputPrimes.append(","); 
```

在这种情况下，`setWrapStyleWord`设置不起作用。它继续使用字符边界而不是单词边界。

我发现另一个人在这里遇到同样的问题： [setWrapStyleWord 问题](http://www.velocityreviews.com/forums/t128377-jtextarea-setwrapstyleword.html)

现在，假设您正在运行一个`JApplet`具有 this的`JTextArea`. 如果您在文本区域中键入，它会自动换行，但是从 append 方法传递的任何文本都不起作用。

我相信这是一个错误，我在任何地方都找不到 Oracle 承认它。

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:36:26.493

我发现了为什么会发生这种情况，这个简单的修复可能对其他人有益。这个问题开始起作用了，因为当我将逗号 (,) 附加到 JTextArea 时，它消除了单词之间的空白。为了解决这个问题，我只是像这样在逗号后放置了一个空格，它就起作用了。

jtaOutputPrimes.append(", ");

# php - jquery多选选定的数据顺序

> ID：13243417
> 
> 赞同：5
> 
> 时间：2012-11-06T02:18:24.677
> 
> 标签：php, jquery

我正在使用来自此页面[http://loudev.com/](http://loudev.com/)的 jquery multiselct 。它工作得很好，但现在系统要求需要这个多选来按已选择的顺序过去数据。

显示上没有问题，因为数据是根据所做的选择排列的，但是在提交表单时，选择数据的顺序与选择框的顺序相同。

![在此处输入图像描述](../Images/e0381abc8264efee07381a7dc2a58968.png)

这是它基于上图的工作方式：-

我从下拉框中选择了巴西、法国和澳大利亚，它是按照做出选择的顺序排列的。发送此表后，我将收到的数据应该是巴西、法国和澳大利亚作为显示的顺序，但收到的数据是法国、澳大利亚和巴西，与选择框的顺序相同。

这是插件生成的html代码，仅供显示，提交时会超过原来隐藏的选项值。如果用户单击...，它只会将“selected”设置为原始选项中的选择。

```
<div id="ms-public-methods" class="ms-container">
  <div class="ms-selectable">
    <ul class="ms-list">
      <li class="ms-elem-selectable ms-selected" ms-value="fr" style="display: none; ">France</li>
      <li class="ms-elem-selectable" ms-value="uk">United Kingdom</li>
      <li class="ms-elem-selectable" ms-value="us">United States</li>
      <li class="ms-elem-selectable" ms-value="ch">China</li>
      <li class="ms-elem-selectable ms-selected" ms-value="au" style="display: none; ">Australia</li>
      <li class="ms-elem-selectable" ms-value="in">India</li>
      <li class="ms-elem-selectable" ms-value="ar">Argentina</li>
      <li class="ms-elem-selectable ms-selected" ms-value="br" style="display: none; ">Brazil</li>
      <li class="ms-elem-selectable" ms-value="tb">Tibet</li>
      <li class="ms-elem-selectable" ms-value="co">Columbia</li>
      <li class="ms-elem-selectable" ms-value="cr">Croatia</li>
      <li class="ms-elem-selectable" ms-value="it">Italia</li>
      <li class="ms-elem-selectable" ms-value="es">Espana</li>
      <li class="ms-elem-selectable" ms-value="id">Indonesia</li>
      <li class="ms-elem-selectable" ms-value="du">Germany</li>
      <li class="ms-elem-selectable" ms-value="no">Norway</li>
    </ul>
  </div>
 <div class="ms-selection">
   <ul class="ms-list">
     <li class="ms-elem-selected" ms-value="br">Brazil</li>
     <li class="ms-elem-selected" ms-value="fr">France</li>
     <li class="ms-elem-selected" ms-value="au">Australia</li>
   </ul>
  </div>
</div> 
```

非常感激你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-08T16:29:18.283

此代码按照它们在插件中显示的顺序重新排序多选中的选定选项。提交时它们将按正确的顺序排列。

```
afterSelect: function(value){
        $('#countries option[value="'+value+'"]').remove();
        $('#countries').append($("<option></option>").attr("value",value).attr('selected', 'selected'));
      }, 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T04:29:10.327

这是我到目前为止所得到的。我使用了插件的回调函数并将值存储到隐藏字段中并将其转换为数组。当取消选择该值时，它也会被删除到隐藏的输入字段中。我试过了，它奏效了！

```
//sample form
<form method="post">
    <select multiple="multiple" id="countries" name="countries[]">
      <option value="fr">France</option>
      <option value="uk">United Kingdom</option>
      <option value="us">United States</option>
      <option value="ch">China</option>
    </select>
    <input type="hidden" name="multiple_value" id="multiple_value"  />
    <input type="submit" name="submit" value="Submit" />
</form>

//the jquery script with callback that sets the value into the hidden field
<script>
    $(function(){
        $('#countries').multiSelect({
          afterSelect: function(value, text){
            var get_val = $("#multiple_value").val();
            var hidden_val = (get_val != "") ? get_val+"," : get_val;
            $("#multiple_value").val(hidden_val+""+value);
          },
          afterDeselect: function(value, text){
            var get_val = $("#multiple_value").val();
            var new_val = get_val.replace(value, "");
            $("#multiple_value").val(new_val);
          }
        });
    });     
</script>

 //the PHP workaround
  <?php
        if(isset($_POST['submit'])){
            $hidden = $_POST['multiple_value']; //get the values from the hidden field
            $hidden_in_array = explode(",", $hidden); //convert the values into array
            $filter_array = array_filter($hidden_in_array); //remove empty index 
            $reset_keys = array_values($filter_array); //reset the array key 
            var_dump($reset_keys); //the result
        }
  ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-06T12:49:19.467

如果需要，您用于处理取消选择的脚本缺少逗号的删除，并且如果项目值部分匹配另一个项目的值（在此示例中不是，因为标识符是唯一的），它会失败。

我通过以下方式解决了它：1.）在 jquery.multi-select.js 第 111 行添加以下代码段：

```
ref="' + that.escapeHTML($option.val()) + '" 
```

至

```
var selectableLi = $('<li '+attributes+' ref="' + that.escapeHTML($option.val()) + '"><span>'+that.escapeHTML($option.text())+'</span></li>'), 
```

这会强制可选和选定列表采用选项元素的值。

2.）在您的脚本中，您必须添加以下功能

```
function selectionToString() {
    var valueString = [];
    $("your-select-list-identifier").next().find('div.ms-selection li.ms-selected')
    .each(function() {
        valueString.push($(this).attr("ref"))
    });
    $("your-hidden-input-element").val(valueString.join(','));
} 
```

3.) execute the selectionToString function whenever the selection changes:

```
$("your-select-list-identifier").multiSelect({
    keepOrder: true,
    afterSelect: selectionToString,
    afterDeselect: selectionToString
}); 
```

每次项目发生变化时，该函数都会生成一个干净的选定选项字符串，同时保持元素的顺序。它在选择列表中搜索所有可见/选定的列表项，将它们放入一个数组中，最后将它们转换/连接为一个逗号分隔的字符串，该字符串被插入到隐藏的输入字段中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-22T15:12:21.007

这对我有用：

```
<!DOCTYPE html>
<!-- saved from url=(0026)http://jsfiddle.net/m/amt/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.0.js"></script>  
<script type="text/javascript" src="https://rawgit.com/lou/multi-select/master/js/jquery.multi-select.js"></script>
<link rel="stylesheet" type="text/css" href="https://rawgit.com/lou/multi-select/master/css/multi-select.css">   
<script>   

$(document).ready(function(){
        // $('#public-methods').multiSelect();

        $('#public-methods').multiSelect({
          afterSelect: function(values){

            var get_val = ""+$("#multiple_value").val();
            //var hidden_val = (get_val != "") ? get_val+"," : get_val;
            var hidden_val = get_val+","+values;
            $("#multiple_value").val(hidden_val);
            //$("#multiple_value").val(hidden_val+""+value);             
            //alert("Selecting value: "+values);            
            alert ( "HIDDEN value: "+ hidden_val) ;

          },
          afterDeselect: function(values){

            alert("Deselect value: "+values);           
            var get_val = $("#multiple_value").val();
            var new_val = get_val.replace(","+values, "");
            $("#multiple_value").val(new_val);
            alert("HIDDEN value after deselecting: "+new_val);
          }
        }); 

        $('#select-all').click(function(){
          $('#public-methods').multiSelect('select_all');
          return false;
        });
        $('#deselect-all').click(function(){
          $('#public-methods').multiSelect('deselect_all');
          $("#multiple_value").val("");
          //alert ("HERE");
          return false;
        });     

         $('#public-methods').multiSelect('addOption', { value: 't9', text: 'test9 (s3838)', index: 0  });
         $('#public-methods').multiSelect('addOption', { value: 't1', text: 'test1', index: 1  });
         $('#public-methods').multiSelect('addOption', { value: 't10', text: 'test10'  });       
         $('#public-methods').multiSelect('addOption', { value: '22', text: 'test2'  });         
         $('#public-methods').multiSelect('addOption', { value: '33', text: 'test3'  });         
         $('#public-methods').multiSelect('addOption', { value: '2222', text: 'test22'  });         

});
</script>    

 </head>
<body>

    <form action="demo_updated.html" method="get" id = "myForm">        

    <a href='#' id='select-all'>select all</a>
    <a href='#' id='deselect-all'>deselect all</a>       

    <select id="public-methods" multiple="multiple"  >
        <option value="elem1">Elem 1</option>
        <option value="elem2">Elem 2</option>
        <option value="elem3">Elem 3</option>
        <option value="elem4">Elem 4</option>
        <option value="elem5">Elem 5</option>
        <option value="elem6">Elem 6</option>
        <option value="elem7">Elem 7</option>
    </select>     

 <input type="hidden" name="multiple_value" id="multiple_value"  />
 <input type="submit" value="Submit" >
</form>

</body>
</html> 
```

# codeigniter - 如何在 CodeIgniter 中加载表格数据的表格模板

> ID：13243418
> 
> 赞同：0
> 
> 时间：2012-11-06T02:18:23.523
> 
> 标签：codeigniter, html-table

我正在尝试在多个页面中为表格库重用表格模板。我试图将模板保存在 *php 文件中，以便稍后将其作为包含调用，但这不起作用。我的代码如下所示：

```
//on the controller
$this->load->view('includes/tabularDataTemplate.php');

//this is the contents of the tabularDataTemplate.php file    
$tmpl = array (
    'table_open'          => '<table border="1" cellpadding="4" cellspacing="0">',

    'heading_row_start'   => '<tr>',
    'heading_row_end'     => '</tr>',
    'heading_cell_start'  => '<th>',
    'heading_cell_end'    => '</th>',

    'row_start'           => '<tr>',
    'row_end'             => '</tr>',
    'cell_start'          => '<td>',
    'cell_end'            => '</td>',

    'row_alt_start'       => '<tr>',
    'row_alt_end'         => '</tr>',
    'cell_alt_start'      => '<td>',
    'cell_alt_end'        => '</td>',

    'table_close'         => '</table>'
    );

$this->table->set_template($tmpl); 
```

我确信必须有更好的（工作）方法来实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:23:26.473

我还没有尝试过，但你可以这样做：

```
//on the controller
$tmpl = $this->load->view('includes/tabularDataTemplate.php','',TRUE);
  //This will return view file as string.

//this is the contents of the tabularDataTemplate.php file    
array (
    'table_open'          => '<table border="1" cellpadding="4" cellspacing="0">',

    'heading_row_start'   => '<tr>',
    'heading_row_end'     => '</tr>',
    'heading_cell_start'  => '<th>',
    'heading_cell_end'    => '</th>',

    'row_start'           => '<tr>',
    'row_end'             => '</tr>',
    'cell_start'          => '<td>',
    'cell_end'            => '</td>',

    'row_alt_start'       => '<tr>',
    'row_alt_end'         => '</tr>',
    'cell_alt_start'      => '<td>',
    'cell_alt_end'        => '</td>',

    'table_close'         => '</table>'
    );

$this->table->set_template($tmpl); 
```

# sql - oracle错误sql

> ID：13243425
> 
> 赞同：0
> 
> 时间：2012-11-06T02:20:17.217
> 
> 标签：sql, oracle

我必须创建一个表并将值插入表中。正在创建表，但它不会插入值。这是我的代码-

```
CREATE TABLE CUSTOMER(
CID         number(20) not null primary key,        
FNAME       varchar2(50) not null,                  
MIDDLE      varchar2(50) null,
LNAME       varchar2(50) not null,
STREET      varchar2(50) not null,
CITY        varchar2(50) not null,
STATE       char(2) not null,
ZIP         varchar2(5) not null,
PHONE       varchar2(20) not null,
BIRTH_YR    date);

INSERT INTO CUSTOMER VALUES(
'1','john','paul','connor','Broad st','newark','nj','07103','2018643110','1992'); 
```

我不断收到错误

```
[Error] Script lines: 12-14 ------------------------
ORA-01861: literal does not match format string
Script line 14, statement line 2, column 85 
```

有人可以帮帮我吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:29:07.607

您必须将表定义更改为如下所示，以允许以您需要的格式插入年份：

```
CREATE TABLE CUSTOMER(
CID         number(20) not null primary key,        
FNAME       varchar2(50) not null,                  
MIDDLE      varchar2(50) null,
LNAME       varchar2(50) not null,
STREET      varchar2(50) not null,
CITY        varchar2(50) not null,
STATE       char(2) not null,
ZIP         varchar2(5) not null,
PHONE       varchar2(20) not null,
BIRTH_YR    char(4) not null); 
```

否则，您必须以 Oracle 数据库接受的默认格式提供文字日期值。您可以使用此查询来找出系统接受的日期格式：

```
SELECT *
FROM nls_database_parameters
WHERE parameter LIKE '%DATE%' 
```

对我来说，它返回：

```
NLS_DATE_FORMAT      |   DD-MON-RR
---------------------------------
NLS_DATE_LANGUAGE    |   AMERICAN 
```

`'01-Jan-1992'`这意味着我应该在列中插入值，而不是“1992” `BIRTH_YR`：

```
INSERT INTO CUSTOMER
    VALUES('1','john','paul','connor','Broad st','newark','nj','07103','2018643110', '01-Jan-1992'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T02:24:36.077

`BIRTH_YR`作为一个`DATE`字段应该以'yyyy-MM-dd'格式给出，'1992-01-01'。

# sql-server - 如何解决这个变量传递到batch_date？

> ID：13243430
> 
> 赞同：0
> 
> 时间：2012-11-06T02:22:16.203
> 
> 标签：sql-server, tsql, stored-procedures

我想将@batch 日期传入batch_date ...但它显示错误...错误是

> 列 'dbo.tnx_tid_InvCheck_Details.Batch_Date' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

该`InvCheck_Details`表有`batch_date`每一个`part_no`。我想对 part_no 进行分组，以便我可以按 part_no 计数（tid）和 sum（tid_bal）。我应该怎么做才能运行这个脚本？天...

```
DECLARE @batch_date datetime
SET @batch_date = '2012-10-13 00:00:00.000'

CREATE TABLE #inv_check
(batch_date datetime,part_no varchar(25),Number_of_tid int,Updated_DT int, Tot_Tid_Bal int)

INSERT INTO #inv_check
SELECT batch_date,part_no,COUNT(tid)as Number_of_tid,0,sum(Tid_Bal)
FROM dbo.tnx_tid_InvCheck_Details
where batch_date = @batch_date
Group by part_no
order by part_no

UPDATE #inv_check 
SET Updated_DT = isnull(d.Updated_DT,0) 
--select i.part_no,i.Number_of_tid, isnull(d.Updated_DT,0)
FROM #inv_check i
LEFT OUTER JOIN 
    (SELECT part_no, COUNT(LastUpdate_DT)as Updated_DT,
    sum(tid_bal) as Tid_bal_sum
    FROM dbo.tnx_tid_InvCheck_Details
    Where NOT LastUpdate_DT IS NULL
    Group by part_no) d on i.part_no=d.part_no  

    DECLARE @sql int
    DECLARE @sql1 int

SELECT @sql1 = count(part_no) 
FROM #inv_check

SELECT @sql = count(part_no)
FROM #inv_check
WHERE number_of_tid= Updated_DT

SELECT @sql AS Parts_Counted,@sql1 AS Full_Parts

Drop table #inv_check 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:31:50.430

试试这个

```
INSERT INTO #inv_check
Select y.batch_date,x.*
From dbo.tnx_tid_InvCheck_Details y
Join(

    SELECT part_no,COUNT(tid)as Number_of_tid,0 AS Updated_DT,sum(Tid_Bal) As Tot_Tid_Bal
    FROM dbo.tnx_tid_InvCheck_Details
    where batch_date = @batch_date
    Group by part_no
    )x
On x.part_no = y.part_no
order by x.part_no 
```

# javascript - javascript 选择的选项功能在 IE 和 safari 中不起作用

> ID：13243431
> 
> 赞同：2
> 
> 时间：2012-11-06T02:22:25.027
> 
> 标签：javascript, internet-explorer

对此的任何帮助将不胜感激！

我只在 IE 和 Safari 中遇到了这个 javascript 代码的问题。

它在其他浏览器中运行良好，例如 firefox 和 chrome。

我相信在 IE 和 Safari 中，它不会正确循环所有选择选项值。例如，在 Firefox 中，p 有两个值，但在 safari 中只有 1 个值。

JAVASCRIPT

```
<script type="text/javascript">
function selected(val, val1)
{
    var len = document.getElementById('attribute122').length;
    var p;
    for(p=0;p<len;p++)
    {
        if(document.getElementById('attribute122')[p].label == val1)
        {
            document.getElementById('attribute122').value = document.getElementById('attribute122')[p].value;
            document.getElementById('att_'+val).className = 'active';
        }
        else
        {
            if(document.getElementById('attribute122')[p].label !="Choose an Option...")
            {
                var chalpeveere = document.getElementById('attribute122')[p].label;
                // alert(chalpeveere);
                chalpeveere = chalpeveere.replace('.','_');
                // alert(chalpeveere);
                document.getElementById('att_' + chalpeveere).className = 'none';
            }
        }
    }
}

</script> 
```

HTML

```
<div class="input-box">
<select id="attribute122" class="required-entry super-attribute-select" name="super_attribute[122]">
<option value="">Choose an Option...</option>
<option value="3" price="0">Medium</option>
</select>
</div>

<div class="Medium">
<a id="att_Medium" class="none" href="javascript:selected('Medium', 'Medium')"> </a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:43:17.590

一些评论：

```
function selected(val, val1) {
    var len = document.getElementById('attribute122').length; 
```

存储对元素的引用要好得多。如果它是一个选择元素，它的长度就是选项的数量。这样写更清楚：

```
 var select = document.getElementById('attribute122');
    var len = select.options.length; 
```

但我不会`len`在这里设置，见下文。

`i`使用, `j`,`k`等作为循环计数器并在 for 表达式中初始化它们更为常见。在这里设置限制也很常见：

```
 for (var i=0, len=select.options.length; i<len; i++) {

      if (select[p].label == val1) { 
```

同样，虽然您可以将选项作为选择元素的属性来访问，但通过选项集合访问它们会更清晰。此外，该`label`属性通常称为`text`，因此：

```
 if (select.options[i].text == val1) { 
```

.

```
 document.getElementById('attribute122').value = document.getElementById('attribute122')[p].value; 
```

通过设置 select 元素的值来设置 selected 选项也是非常新的行为，将选项设置为 selected 更为常见：

```
 select.selectedIndex = i; 
```

或者

```
 select.options[i].selected = true; 
```

.

```
 document.getElementById('att_'+val).className = 'active';
    }
    else
    {
        if(document.getElementById('attribute122')[p].label !="Choose an Option...")
        { 
```

大概这是第一个选项，所以你可以测试：

```
 if (select.selectedIndex != 0) { 
```

.

```
 var chalpeveere = document.getElementById('attribute122')[p].label; 
```

变成：

```
 var chalpeveere = select.optoins[i].text; 
```

.

```
 // alert(chalpeveere);
            chalpeveere = chalpeveere.replace('.','_');
            // alert(chalpeveere);
            document.getElementById('att_' + chalpeveere).className = 'none';
        }
      }
    }
  } 
```

所以整理后的代码变成：

```
function selected(val, val1) {
    var select = document.getElementById('attribute122'); 
    var options = select.options;

    for(var i=0, iLen=options.length; i<iLen; i++) {

        if (options[i].text == val1) {
            options[i].selected = true;
            document.getElementById('att_'+val).className = 'active';

        } else {

            if (select.selectedIndex != 0) {
                var chalpeveere = options[i].text;
                // alert(chalpeveere);
                chalpeveere = chalpeveere.replace('.','_');
                // alert(chalpeveere);
                document.getElementById('att_' + chalpeveere).className = 'none';
            }
        }
    }
} 
```

在 HTML 中：

```
<a id="att_Medium" class="none" href="javascript:selected('Medium', 'Medium')">foo</a> 
```

如果你想要一个按钮，请使用一个按钮：

```
<button id="att_Medium" class="none" onclick="
  selected('Medium', 'Medium')
">Set selected</button> 
```

或使用样式跨度。

# google-chrome - 我的 google-chrome 扩展是否有一个 chrome.* API 来找出它在哪些页面上被禁止编写脚本？

> ID：13243433
> 
> 赞同：4
> 
> 时间：2012-11-06T02:22:35.533
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

我正在开发一个谷歌浏览器扩展，它有一个内容脚本、一个背景页面、一个设置页面和一个弹出页面。我学到了虽然内容脚本加载到 Chrome Web Store 上的艰难方法，但永远不会调用 onMessage 侦听器。

我可以在执行时始终中断`chrome.extension.onMessage.addListener`，但永远不会调用侦听器。因此，当我`chrome.tabs.sendMessage`从后台或弹出页面执行时，该`responseCallback`函数永远不会被调用 - 即内部的逻辑`responseCallback`永远不会执行。Chrome 甚至不会将其视为错误场景 - 它接受请求，但此后保持沉默。

如果它将此视为错误情况（如尝试向`chrome://`页面发送消息），那么`responseCallback`将使用未定义的响应参数调用 - 这将导致我的错误处理代码执行......但没有这样的运气。

我可以在我的代码中添加特殊行为`http(s)://chrome.google.com/webstore/*`，但希望有一种更正式的方式来查找被禁止执行的页面。将不胜感激那里的任何指示。

我在[这里](https://stackoverflow.com/questions/11613371/chrome-extension-content-script-on-https-chrome-google-com-webstore)找到了一篇很棒的帖子，但它没有编程 API，因此提出了这个问题。

我已经知道 Chrome 网上商店和`chrome://`URL 是特殊情况。但是，根据我的调查，`chrome://`URL 上的行为与 Chrome 网上应用店不同。在`chrome://`URL 上，我的内容脚本似乎根本没有加载，并且`sendMessage`' 的`responseCallback`函数被一个空/未定义的响应对象调用。这是 API 发出错误信号的官方方式，对我来说效果很好。

我的问题是能够以编程方式检测 Chrome 网上应用店所遇到的错误，而无需对 URL 进行硬编码（URL 可能会随着时间而变化）。

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:03:32.603

`chrome.webNavigation.onCompleted`在后台脚本中添加监听器怎么样？加载新页面时，向选项卡发送特殊的“ping”消息，并用于`chrome.extension.onMessage`接收和响应内容脚本中的 ping。如果内容脚本没有响应，那么您就知道它没有在该页面上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T12:10:09.777

您可以尝试运行`chrome.tabs.executeScript`以查看是否允许在该域中编写脚本。

```
chrome.tabs.executeScript(tabId, {code: ""}, function() {
  if(chrome.runtime.lastError) {
    // Something went wrong, perhaps no rights
  } else {
    // Scripting allowed
  }
}); 
```

# powershell - Windows 共享点服务 (WSS 3.0) stsadm 不工作

> ID：13243435
> 
> 赞同：2
> 
> 时间：2012-11-06T02:22:41.180
> 
> 标签：powershell, sharepoint, wss, stsadm

我是PowerShell的新手。我正在尝试使用 stsadm 命令备份共享点站点，但由于某种原因，我不断给我一些错误。

这是我正在做的事情：
PS C:\Users\Administrator> Stsadm –o **backup** –url >http://server< name:port - **filename** path\filename to be used for the backup file

这是我得到的错误：
*术语“stsadm”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或包含路径，验证路径是否正确，然后重试，
在 line:1 char:7
+ stsadm <<<< stsadm –o **backup** –url >http://server< name:端口 -用于备份文件的文件名路径\文件名**+**
CategoryInfo : ObjectNotFound: [], CommandNotFoundException
+FullyQualifiedErrorID : CommandNotFoundException*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T02:31:20.990

Stsadm 不是 powershell 脚本，它是位于 C:\Program Files\Common Files\Microsoft Shared\web server extensions\12 或 14 'hive' 中的可执行文件。

通常，在运行 powershell 时应避免调用 stsadm，因为它在 SharePoint 2010 中已被有效弃用。

但是，您可以更改目录以找到可执行文件并根据需要调用它。

[这是 powershell 中的 stsadm 等效项列表](http://technet.microsoft.com/en-us/library/ff621084.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:14:47.170

检查此博客文章 => 使用 PowerShell 备份和还原 SharePoint 2010 网站集：[http](http://www.bradleyschacht.com/backup-and-restore-sharepoint-2010-site-collection-with-powershell/) ://www.bradleyschacht.com/backup-and-restore-sharepoint-2010-site-collection-with-powershell/ 也许，这就是你正在找

# javascript - jquery 事件不起作用

> ID：13243438
> 
> 赞同：0
> 
> 时间：2012-11-06T02:23:15.563
> 
> 标签：javascript, jquery, javascript-events

我想创建一个带有事件的按钮，该事件在用户单击它时发生。如果有人单击了此按钮，则会显示一个滑块。

如果没有人释放此滑块 div，我想要一个功能，该 div 会在 5 秒后切换，但如果有人释放滑块，则不会发生任何事情！

我创建了一个小提琴，希望有人可以解决这个问题？ [http://jsfiddle.net/84nVQ/50/](http://jsfiddle.net/84nVQ/50/)

```
function handler1() {
    clearTimeout(time);
    $('#volumeChange').attr("class", "selected");
    $('#volume-slider').slider({
        orientation: 'horizontal',
        value: 100,
        max: 1,
        step: 0.01,
        animate: true,
        slide: function(e, ui) {
            alert(ui.value);
        }
    }).show();
}

function handler2() {
    time = setTimeout(function() {
        $('#volumeChange').attr("class", "");
        $('#volume-slider').toggle();
        $('#volume-slider').clearTimeout(time);
    }, 5000);
}

function handler3() {
    clearTimeout(time);
}

$("#volumeChange").on({
    click: function(e) {
        handler1();
        $('#volume-slider').mouseleave(handler2).mouseenter(handler3);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T02:30:17.480

有两个错误：未定义的时间变量和clearTimeout。这段代码应该可以工作

```
var time = null;

function handler1() {
    clearTimeout(time);
    $('#volumeChange').attr("class", "selected");
    $('#volume-slider').slider({
        orientation: 'horizontal',
        value: 100,
        max: 1,
        step: 0.01,
        animate: true,
        slide: function(e, ui) {
            movie.volume = ui.value;
        }
    }).show();
}

function handler2() {
    time = setTimeout(function() {
        $('#volumeChange').attr("class", "");
        $('#volume-slider').toggle();
        clearTimeout(time);
    }, 5000);
}

function handler3() {
    clearTimeout(time);
}

$("#volumeChange").on({
    click: function(e) {
        handler1();
        $('#volume-slider').mouseleave(handler2).mouseenter(handler3);
    }
}); 
```

# jsf-2 - 未调用 PrimeFaces 延迟数据模型加载方法

> ID：13243439
> 
> 赞同：7
> 
> 时间：2012-11-06T02:23:26.657
> 
> 标签：jsf-2, primefaces

我碰巧不明白为什么我的加载方法没有在我的 primefaces 表的惰性数据模型中调用。我的 xhtml 页面是这样的

```
<h:form id="myForm">
    <p:dataTable value="#{myBean.configDataModel}"
                            id="configTable" var="config" paginator="true" rows="10"
                            selectionMode="single"
                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                            rowsPerPageTemplate="5,10,20">
    .
    .
</h:form> 
```

我的 Bean 代码是这样的，并提出了 system.out.println 语句，但我注意到它没有被调用。

```
public class MyBean{
    // private List<MyBean> configList;
    private LazyDataModel<MyBean> configDataModel;

    @SuppressWarnings("serial")
    public LazyDataModel<MyBean> getConfigDataModel() {
        if (configDataModel == null) {
            configDataModel = new LazyDataModel<MyBean>() {

                @Override
                public List<MyBean> load(int arg0, int arg1, String arg2,
                        SortOrder arg3, Map<String, String> arg4) {
                    System.out.println("Here!!!!!");
                    return null;
                }
            };

        }
        return configDataModel;
    }
    public void setConfigDataModel(LazyDataModel<MyBean> configDataModel) {
        this.configDataModel = configDataModel;
    }
} 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-06T02:28:42.083

从 PrimeFaces 3.3 开始，您需要将`lazy`重复组件的属性显式设置`true`为以启用对`LazyDataModel`.

```
<p:dataTable ... lazy="true"> 
```

### 也可以看看：

*   [PrimeFaces 展示 - DataTable - 延迟加载](https://www.primefaces.org/showcase/ui/data/datatable/lazy.xhtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-07T07:34:32.127

1.  如果您是 IE，请务必检查它使用的是哪种所谓的“兼容模式”。在我在过滤器字段中键入文本后，延迟数据表未能调用其加载方法，我遇到了非常烦人的问题。在浪费了很多时间之后，我最终意识到浏览器在默认模式 7 下运行。数据表延迟加载适用于模式 8、9、10
2.  如果您的惰性数据表在对话框中，请确保将对话框放在表单中，否则，在过滤器字段中键入值将不会提交给 load 方法。

# html - 溢出：滚动在 HTML 表中无法正常工作

> ID：13243440
> 
> 赞同：1
> 
> 时间：2012-11-06T02:23:29.357
> 
> 标签：html, scroll, html-table, overflow

我有一个包含多行的 html 表，但我希望用户能够滚动中间的行，但保持顶部和底部行可见。我正在尝试为此使用溢出：自动，但它无法正常工作。这是我的代码：

**这是HTML：**

```
<div class="box_container">
          <div class="big_bg_blue bg_blue">
          <div class="inner_bg_blue bg_blue">
          <table width="100%" border="0" cellspacing="0">
  <tr class="topwholeappttbl">
    <td width="32%" height="35" class="toprowappttbl">&nbsp;</td>
    <td width="32%" class="toprowappttbl">&nbsp;</td>
    <td width="25%" class="toprowappttbl">&nbsp;</td>
    <td width="11%" class="toprowappttbl">&nbsp;</td>
  </tr>
  <div class="apptblcontainer">
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>Connor Kraft</p></td>
    <td class="midrowappttbl"><p>First Appt</p></td>
    <td class="midrowappttbl"><p>12/12/12 @ 12:00 PM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>Alex Cross</p></td>
    <td class="midrowappttbl"><p>Second Appt</p></td>
    <td class="midrowappttbl"><p>12/31/15 @ 12:00 PM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>George Hoffman</p></td>
    <td class="midrowappttbl"><p>Signup Status</p></td>
    <td class="midrowappttbl"><p>11/15/12 @ 4:30 PM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>Ricky Forman</p></td>
    <td class="midrowappttbl"><p>Follow Up</p></td>
    <td class="midrowappttbl"><p>11/06/12 @ 6:45 AM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>Connor Kraft</p></td>
    <td class="midrowappttbl"><p>First Appt</p></td>
    <td class="midrowappttbl"><p>12/12/12 @ 12:00 PM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>Alex Cross</p></td>
    <td class="midrowappttbl"><p>Second Appt</p></td>
    <td class="midrowappttbl"><p>12/31/15 @ 12:00 PM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>George Hoffman</p></td>
    <td class="midrowappttbl"><p>Signup Status</p></td>
    <td class="midrowappttbl"><p>11/15/12 @ 4:30 PM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>Ricky Forman</p></td>
    <td class="midrowappttbl"><p>Follow Up</p></td>
    <td class="midrowappttbl"><p>11/06/12 @ 6:45 AM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>Connor Kraft</p></td>
    <td class="midrowappttbl"><p>First Appt</p></td>
    <td class="midrowappttbl"><p>12/12/12 @ 12:00 PM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>Alex Cross</p></td>
    <td class="midrowappttbl"><p>Second Appt</p></td>
    <td class="midrowappttbl"><p>12/31/15 @ 12:00 PM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>George Hoffman</p></td>
    <td class="midrowappttbl"><p>Signup Status</p></td>
    <td class="midrowappttbl"><p>11/15/12 @ 4:30 PM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  <tr class="midwholeappttbl">
    <td class="midrowappttbl" height="45"><p>Ricky Forman</p></td>
    <td class="midrowappttbl"><p>Follow Up</p></td>
    <td class="midrowappttbl"><p>11/06/12 @ 6:45 AM</p></td>
    <td class="midrowappttbl"><div class="View_Button SpritesPage1"></div></td>
  </tr>
  </div>
  <tr class="btmwholeappttbl">
    <td class="btmrowappttbl" height="20">&nbsp;</td>
    <td class="btmrowappttbl">&nbsp;</td>
    <td class="btmrowappttbl">&nbsp;</td>
    <td class="btmrowappttbl">&nbsp;</td>
  </tr>
</table>
          </div>
          </div>
          </div> 
```

**这是CSS：**

```
.emailtablecontainer table tr td p {
    font-size: 14px;
    font-family: "Arial Black", Gadget, sans-serif;
    text-align: center;
}
.supporttext1 {
    font-family: "Arial Black", Gadget, sans-serif;
    font-size: 16px;
    color: #777;
}
.bg_blue{ background:url("../Images/bg_blue.png") top left no-repeat; }
.big_bg_blue{
    width: 788px;
    height: 330px;
    background-position: -5px -5px;
    margin-right: auto;
    margin-left: auto;
    margin-top: 26px;
}
.inner_bg_blue{
    width: 719px;
    height: 272px;
    background-position: -5px -340px;
    margin-right: auto;
    margin-left: auto;
    margin-top: 30px;
}
.midrowappttbl {
    border-top-width: 1px;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-left-width: 1px;
    border-top-style: solid;
    border-bottom-style: solid;
    border-top-color: #000;
    border-right-color: #000;
    border-bottom-color: #000;
    border-left-color: #000;
    border-right-style: none;
    border-left-style: none;
}
.toprowappttbl {
    border-top-style: none;
    border-right-style: none;
    border-bottom-style: solid;
    border-left-style: none;
    border-top-width: 1px;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-left-width: 1px;
    border-top-color: #000;
    border-right-color: #000;
    border-bottom-color: #000;
    border-left-color: #000;
}
.btmrowappttbl {
    border-top-width: 1px;
    border-right-width: 1px;
    border-bottom-width: 1px;
    border-left-width: 1px;
    border-top-style: solid;
    border-right-style: none;
    border-bottom-style: none;
    border-left-style: none;
    border-top-color: #000;
    border-right-color: #000;
    border-bottom-color: #000;
    border-left-color: #000;
}
.midwholeappttbl {
    color: #000;
    font-family: "Arial Black", Gadget, sans-serif;
    font-size: 12px;
    text-align: center;
    cursor: pointer;
}
.appttblcontainer {
    overflow: auto;
}
.midwholeappttbl:hover {
    background-color: #FFF;
    color: #8DACC7;
} 
```

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T02:44:44.523

你需要 overdlow-y: scroll; 例如：

```
.box_container {
    height: 200px;
    overflow-y: scroll;
} 
```

[http://jsfiddle.net/HVqJx/2/](http://jsfiddle.net/HVqJx/2/)

# c++ - 为什么 istream::operator>> 接受字符指针/数组？

> ID：13243442
> 
> 赞同：0
> 
> 时间：2012-11-06T02:23:56.767
> 
> 标签：c++, arrays, pointers, char, istream

```
char someArray[n];
std::cin >> someArray; // potential buffer overrun 
```

我在我经常光顾的 C++ 论坛上多次看到类似上述的代码。是否有充分的理由不将其视为编译时错误？或者至少是一个警告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T02:27:29.773

C（和 C++）的一个基本前提是编码人员应该知道他们在做什么。否则他们会用 BASIC 编码:-)

不允许出现错误，因为它是根据标准允许的，就像C`gets`中`scanf("%s")`允许的一样，尽管它们是一个等待发生的问题。

您发布的代码*很*糟糕，在严肃的软件中没有位置，但对于“玩具”程序或测试东西来说很好。你只需要意识到它的问题（听起来很像你意识到它们）*。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:02:28.837

如果 C++ 是一举被发明出来的，它可能根本不存在——如果你想读一个字符串，你必须把它读成 a `std::string`，这样就结束了。

`std::string`不幸的是，C++ 在标准化（或根本发明）之前已经使用了很长一段时间。`operator>>`和`istream::getline`（不要被误认为）都是`std::getline`在那段时间发明的。当它们被发明时，几乎没有（或没有）真正的替代品，所以他们使用 char 数组。

当然，今天有替代方案，最好避免使用这些替代方案，除非您在使用一些不支持高级替代方案的古老编译器编写代码时遇到困难。

# android - 将drawable转换为字符串以传递给另一个活动

> ID：13243445
> 
> 赞同：1
> 
> 时间：2012-11-06T02:24:28.323
> 
> 标签：android, bitmap, drawable, sharedpreferences

我目前正在尝试将可绘制对象转换为字符串，并使用此方法通过共享首选项将其传递给另一个活动。***loadIcon***是一个**Drawable**。

***活动一***

```
try {
    ai = pm.getApplicationInfo(pInfo.packageName, PackageManager.GET_META_DATA);
} 
catch (NameNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

    loadIcon = ai.loadIcon(pm);

    Log.i("Icon drawable", loadIcon.toString());
                SharedPreferences preferences = getSharedPreferences("ANALYZE_PREF", MODE_PRIVATE);
                SharedPreferences.Editor editor = preferences.edit();
                editor.putString("drawable", loadIcon.toString());
                editor.commit(); 
```

这就是我在 Logcat 中得到的：

```
11-06 10:13:28.995: I/Drawable shared(16786): android.graphics.drawable.BitmapDrawable@417f2aa8 
```

试图在其他活动中检索它

***活动二***

```
SharedPreferences settings = getSharedPreferences("ANALYZE_PREF", MODE_PRIVATE);
String drawableString = settings.getString("drawable", ""); 
Log.i("Drawable shared", drawableString);
Drawable drawableImage = getDrawable(drawableString);
imageView.setBackgroundDrawable(drawableImage);

       public Drawable getDrawable(String bitmapUrl) {
              try {
                URL url = new URL(bitmapUrl);
                Drawable d =new BitmapDrawable(BitmapFactory.decodeStream(url.openConnection().getInputStream()));
                Log.i("d value", "d value " + d);
                return d; 
              }
              catch(Exception ex) {
                  Log.i("Null", "Drawable returns null");
                  return null;
              }
       } 
```

尝试将其转换回可绘制对象时得到一个空值

日志猫：

```
11-06 10:13:28.995: I/Null(16786): Drawable returns null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:31:17.930

> 我也面临同样的问题，我喜欢这种方式..

```
Bitmap photo = (Bitmap) data.getExtras().get("data");
ByteArrayOutputStream bao = new ByteArrayOutputStream();
photo.compress(Bitmap.CompressFormat.JPEG, 90, bao);
byte [] ba = bao.toByteArray();
String ba1=Base64.encodeBytes(ba); 
```

> 然后将此字符串发送到其他活动。然后解码这个 Base64 代码......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T02:34:48.900

问题是您`android.graphics.drawable.BitmapDrawable@417f2aa8`作为字符串传递，然后尝试将其用作`URL`对象。您不能`URL`从该数据创建一个。

老实说，我不确定你为什么要这样做。两个`Activity`对象都从相同的上下文运行并具有相同的图标。当您可以在第二个中获取图标时，为什么要尝试将其保存在首选项中并立即加载它`Activity`？

您将不得不以某种方式切换您的实现；`Drawable`s 并不都有`URL`s。

# silverlight - 如何退出浏览器以处理 silverlight 应用程序？

> ID：13243450
> 
> 赞同：0
> 
> 时间：2012-11-06T02:24:41.890
> 
> 标签：silverlight, silverlight-5.0

我有一个 silverlight 应用程序，并且我已经选中了启用 OOB 的框。当我从 IDE 运行程序并右键单击浏览器时，我没有安装应用程序的选项。相反，我可以选择删除该应用程序。

我想获得一个其他用户只需单击即可运行应用程序的图标。为什么我在运行程序时没有安装应用程序的选项是有原因的？

如果重要的话，我正在使用 Silverlight 5。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:05:28.897

您可以选择删除应用程序，这意味着您过去已在浏览器之外安装，单击“删除应用程序”后，您将可以选择在本地安装应用程序。

# wcf - 如何使用在 Amazon EC2 上运行的 .Net WCF 服务修复“拒绝访问”错误？

> ID：13243451
> 
> 赞同：3
> 
> 时间：2012-11-06T02:25:07.267
> 
> 标签：wcf, web-services, amazon-ec2, asp.net-4.0

我是 AWC/EC2 环境的新手，并在我的 Windows Server 和 IIS 的 EC2 实例上创建了一个 .Net WCF 服务。

导航到[http://www.websiteservice.com/MyWebsiteFeederService.svc?wsdl](http://www.websiteservice.com/MyWebsiteFeederService.svc?wsdl)会调出 WSDL。

现在，在同样位于同一台机器上的 www.mywebsite.com 中，我已经使用了 Web 服务。不幸的是，每当我尝试通过该站点访问该服务时，我都会继续收到“访问被拒绝”错误消息：

> 异常详细信息：System.ServiceModel.Security.SecurityAccessDeniedException：访问被拒绝。

我不认为这与[AWS-S3 错误有关 - Access is Denied](https://stackoverflow.com/questions/4322187/amazon-aws-s3-access-denied-error)错误，因为我没有使用存储桶。

在站点的 Web.config 中，我打开了跟踪侦听器并查看了服务跟踪查看器。

这些信息似乎没有用，因为这是我得到的：

> [TraceRecord] 严重警告 TraceIdentifier [http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.ThrowingException.aspx](http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.ThrowingException.aspx) 描述抛出异常。应用域 /LM/W3SVC/4/ROOT-2-129966419874659765

以下是警告级别的完整 XML：

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
<System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
<EventID>131075</EventID>
<Type>3</Type>
<SubType Name="Warning">0</SubType>
<Level>4</Level>
<TimeCreated SystemTime="2012-11-06T02:19:47.8029428Z" />
<Source Name="System.ServiceModel" />
<Correlation ActivityID="{b6efab70-63ad-4bdd-85c6-5c49a907c210}" />
<Execution ProcessName="w3wp" ProcessID="3472" ThreadID="1" />
<Channel />
<Computer>AMAZONA-xxxxxFFR</Computer>
</System>
<ApplicationData>
<TraceData>
<DataItem>
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Warning">
<TraceIdentifier>http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.ThrowingException.aspx</TraceIdentifier>
<Description>Throwing an exception.</Description>
<AppDomain>/LM/W3SVC/4/ROOT-2-129966419874659765</AppDomain>
<Exception>
<ExceptionType>System.ServiceModel.Security.SecurityAccessDeniedException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>Access is denied.</Message>
<StackTrace>
at System.ServiceModel.Channels.ServiceChannel.ThrowIfFaultUnderstood(Message reply, MessageFault fault, String action, MessageVersion version, FaultConverter faultConverter)
at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc&amp; rpc)
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)
at MyWebsiteFeederService.IFeederService.GetWebsiteConfiguration(String websiteGuid, String websitePW)
at MyWebsiteFeederService.FeederServiceClient.GetWebsiteConfiguration(String websiteGuid, String websitePW)
at Inquiro.Models4.ModelsBaseClass.GetWebsiteConfiguration(String websiteGuid, String websitePW)
at Inquiro.Websites.MvcApplication.LoadWebsiteConfiguration()
at Inquiro.Websites.MvcApplication.Application_Start()
at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct&amp; sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)
at System.Web.HttpApplication.InvokeMethodWithAssert(MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs)
at System.Web.HttpApplication.ProcessSpecialRequest(HttpContext context, MethodInfo method, Int32 paramCount, Object eventSource, EventArgs eventArgs, HttpSessionState session)
at System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app)
at System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers)
at System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context)
at System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context)
at System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext)
</StackTrace>
<ExceptionString>System.ServiceModel.Security.SecurityAccessDeniedException: Access is denied.</ExceptionString>
</Exception>
</TraceRecord>
</DataItem>
</TraceData>
</ApplicationData>
</E2ETraceEvent> 
```

我在另一台非亚马逊服务器上运行完全相同的服务，并且运行良好。我不记得设置任何特殊权限或“以 [用户] 身份运行” - 在 IIS 管理器权限中没有设置其他用户。

我还使用 sqlcmd 从该服务器上的命令提示符确认我可以连接到 RDS 数据库服务器。

在这一点上，我基本上是在绕圈子，希望能得到一些帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T01:05:46.643

错误本身“访问被拒绝”。不是很有帮助。调试信息也不是。

最终，在这种情况下，问题在于需要将执行权限授予正在执行从 WCF 服务调用的存储过程的用户 ID。

# django - Django 模板 if 语句总是计算为 true

> ID：13243454
> 
> 赞同：4
> 
> 时间：2012-11-06T02:25:36.513
> 
> 标签：django, templates, if-statement, block, conditional-statements

这似乎应该很简单，但由于某种原因我无法解决这个问题。我正在使用 Django 1.4。我正在尝试进行基本检查，以查看在模板呈现期间~~列表~~QuerySet 是否为空，但我使用的 if 语句似乎总是评估为真。

我有一个 Django 模板，内容如下：

```
{% extends 'includes/base.html' %}

{% if object_list %}
...
{% block data %}
   {% for object in object_list %}
     ...
     {{ object.create_date }}
     ...
   {% endfor %}
{% endblock data %}
...
{% endif %} 
```

'base.html' 有块：

```
<body>
{% block content %}
  ...   
  <div class="row-fluid">
    <div class="span12">
      {% block data %}
      <div align="center"><i>No data.</i></div>
      {% endblock data %}
    </div><!-- span12 -->
  </div><!-- row -->
{% endblock content %}
...
</body> 
```

生成 QuerySet 的视图函数在这里：

```
def barcode_track(request, model):
    query = request.GET.get('barcode_search', '')
    object_list = model.objects.all()
    if query:
        object_list = model.objects.filter(barcode__icontains=query)
    return render_to_response('barcode_track/barcode_list.html',
                              {'object_list': object_list, 'query': query},
                              context_instance=RequestContext(request)) 
```

通过这种形式调用：

```
<form id="barcode_search_form" method="get" action="" class="form">
    <input type="text" name="barcode_search" value="{{ query }}" />
    <button type="submit" class="btn">Search</button>
</form> 
```

和 urls.py 行：

```
urlpatterns = patterns('barcode_track.views',
                       url(r'^$', 'barcode_track', {'model': Barcode},
                           name="barcode_track"),) 
```

这个想法是只有当结果存在于时才会显示结果`object_list`，否则父块将保持不变。我尝试更改 的名称`object_list`，并打印`{{ dicts }}`到页面以确保它`object_list`实际上是空的（它是）。我没有使用通用视图，尽管我意识到这个名字暗示了很多。实际上，我在使用类似逻辑编写的另一个应用程序中遇到了这个问题，所以我一定是在系统地错误地做某事。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T02:52:02.383

您不能像`if`围绕一个`block`. 您的问题是子模板的 block 定义`data`只是因为它在那里而被使用。

您可以通过将`if`标签放在里面来修复它`block data`。如果要在列表为空时继承父级的内容，请添加`else`扩展为`{{ block.super }}`.

# regex - htaccess 重写正则表达式规则 - 在查询字符串中插入破折号和句点

> ID：13243457
> 
> 赞同：2
> 
> 时间：2012-11-06T02:26:19.213
> 
> 标签：regex, .htaccess, mod-rewrite

我似乎无法弄清楚这个特定的正则表达式 htaccess 重写，并且可以使用一些帮助。我试图从这个出发：

> mysite.com/product/13202102/any-random-product-name

并重写到这个网址：

> mysite.com/product.php?id=13-2021.02

请注意，id 总是正好有 8 个数字，并且在前 2 位数字之后总是需要一个破折号 (-)，在最后 2 位数字之前需要一个句点 (.)。尾部字符串无关紧要，但我希望 url 可以使用或不使用尾部斜杠 (/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T08:19:19.210

尝试：

```
RewriteRule ^/?product/([0-9]{2})([0-9]{4})([0-9]{2})/? /product.php?id=$1-$2.$3 [L] 
```

# objective-c - 如何在程序运行时检查值是否已更改？

> ID：13243460
> 
> 赞同：1
> 
> 时间：2012-11-06T02:26:57.310
> 
> 标签：objective-c, xcode4.5

我的程序的一个值可能会在其他函数正在处理时发生变化，一旦值发生变化，程序应该启动一个特定的函数。如何让我的程序知道程序运行时值已更改？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:48:52.980

看起来键值观察是您想要的。这将允许您观察属性的值，并在它更改时得到通知。

文档+指南可以在这里找到：http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177-BCICJDHA](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/KeyValueObserving.html#//apple_ref/doc/uid/10000177-BCICJDHA)

# python - Python 在字段值中使用分隔符拆分

> ID：13243461
> 
> 赞同：1
> 
> 时间：2012-11-06T02:27:18.647
> 
> 标签：python, split

我有一个“CSV”，其中一些数据字段恰好包含逗号分隔符，如以下示例数据的第二行所示。

```
"1","stuff","and","things"
"2","black,white","more","stuff" 
```

我无法更改源数据，我不知道如何 str.split() 并且不拆分值“黑色，白色”。

我解决问题的方法：

1.  我查看了 partition() 并没有看到这对我有什么好处。
2.  我确信正则表达式会正确捕获数据，但我不确定如何将其与拆分联系起来。
3.  由于源中的每一行总是有相同数量的字段，我认为设置 maxsplit 可能会有所帮助，但我认为它仍然会在“黑色，白色”中分割，我最终会失去最后一个值（在这种情况下将是“东西”）。

当然，这很容易克服，所以我期待学习新的东西！

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:58:33.300

使用[`csv`](http://docs.python.org/2/library/csv.html)和[`StringIO`](http://docs.python.org/2/library/stringio.html)：

```
>>> import csv, StringIO
>>> data = """"1","stuff","and","things"
... "2","black,white","more","stuff"
... """
>>> reader = csv.reader(StringIO.StringIO(data))
>>> for row in reader:
...     print row
... 
['1', 'stuff', 'and', 'things']
['2', 'black,white', 'more', 'stuff'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T02:35:51.983

如果您的源不是 CSV，并且您只想平衡字符串中的引号，您可以尝试使用 shlex 模块：

```
import shlex
lex = shlex.shlex('"2","black,white","more","stuff"')
for i in lex:
    print i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T02:42:18.473

字符串外的逗号总是后跟双引号。只是分开`,"`而不是仅仅`,`（或什至`","`）

```
>>> x = '"2","black,white","more","stuff"'
>>> x
'"2","black,white","more","stuff"'
>>> x.split(',"')
['"2"', 'black,white"', 'more"', 'stuff"']
>>> [y.strip('"') for y in x.split(',"')]
['2', 'black,white', 'more', 'stuff'] 
```

当然，编辑效率

YevgenYampolskiy 的建议`shlex`也是另一种选择。

```
>>> x = '"2","black,white","more","stuff"'
>>> x
'"2","black,white","more","stuff"'
>>> import shlex
>>> y = shlex.shlex(x)
>>> [i.strip('"') for i in y if i != ',']
['2', 'black,white', 'more', 'stuff'] 
```

# c# - 在这种情况下是否值得汇集 SocketAsyncEventArgs 以供重用？

> ID：13243462
> 
> 赞同：3
> 
> 时间：2012-11-06T02:27:19.860
> 
> 标签：c#, sockets, socketasynceventargs

在我的场景中，有许多客户端的 tcp 套接字连接到服务器。来自所有套接字的服务器 ReceiveAsync() 并且当调用没有错误的回调时，解析接收到的数据。如果一个socket接收到的数据是某种类型的消息，receive回调会循环SendAsync()到所有其他socket，然后再开始ReceiveAsync()。所以对于一个socket，它有机会在很短的时间内被许多其他Receiver的回调调用SendAsync()。我尝试通过 waitone 信号量同步 Sendings 并在发送 IO 完成后释放一个信号量，这样我每个套接字只能使用一个 SAEA obj，但这可能会导致接收器在发送循环中的回调阻塞。所以我取消了信号量，并为每个套接字的发送方法汇集了一些 SAEA 对象。

另一个问题是，如果我将可重用的 SAEA 池化，SAES.Buffer 会产生内存碎片吗？在池化 SAEA 之前调用 SAEA.SetBuffer(null,0,0) 方法可以避免内存问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-09T15:13:03.977

为了避免内存碎片，我们使用一个巨大的缓冲区并将该缓冲区的某个区域分配给每个 SAEA。因此内存使用量在整个时间内保持不变，并且内存是连续分配的。

现在我们使用可以是 PITA 的集合 SAEA，但它似乎是最受提倡的解决方案（如果您完全使用 SAEA）

# javascript - javascript将字符转换为关键代码

> ID：13243464
> 
> 赞同：-2
> 
> 时间：2012-11-06T02:27:29.900
> 
> 标签：javascript

> **可能重复：**
> [在 Javascript 中将字符转换为 ASCII 码](https://stackoverflow.com/questions/94037/convert-character-to-ascii-code-in-javascript)

如何将任何字符转换为关键代码，例如

```
m    77
n    78
o    79
p    80
q    81
r    82
s    83
t    84
u    85
v    86 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:33:25.887

```
var alphabet = 'abcdefghijklmnopqrstuvwxyz'.split(''),
    len = alphabet.length,
    i;

for (i = 0; i < len; ++i) {
    console.log(alphabet[i], alphabet[i].charCodeAt(0) - 32);
} 
```

[http://jsfiddle.net/zerkms/n2ZFa/](http://jsfiddle.net/zerkms/n2ZFa/)

# android - 如何从 startService() 获得响应/设置回调

> ID：13243466
> 
> 赞同：1
> 
> 时间：2012-11-06T02:28:17.240
> 
> 标签：android, android-intent

我继承了一个项目，但我不明白如何获得响应或从以下代码设置回调：

```
startService(new Intent(this, VenueUpdateService.class)); 
```

目前，即使 VenueUpdateService 失败，应用程序也会继续。我想更改它，以便应用程序等待来自 VenueUpdateService 的成功/失败。

我在 VenueUpdateService 类中收到关于成功/失败的响应。但是如何将其传递回启动服务的活动？

谢谢，詹姆斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:50:03.973

你要求做的事情对我来说似乎有点奇怪。如果您调用 startService，服务将始终成功启动。并不是说 startService 是一些需要包装在 try/call 块中的危险行为。

但我想你的 Activity 可以注册一个 BroadcastReceiver，它接收从 onStartCommand 中的服务发送的广播。

或者，您可能希望绑定到服务，在这种情况下，您会知道何时绑定。[看这里](http://developer.android.com/reference/android/content/Context.html#bindService%28android.content.Intent,%20android.content.ServiceConnection,%20int%29)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T01:54:21.887

我所做的是将 IntentService 更改为 AsyncTask。

我基本上想阻止用户与应用程序交互，而 VenueUpdateService 这样做是因为它必须至少成功一次，然后用户才能继续使用应用程序。

所以现在我有：

```
VenueUpdateTask task = new VenueUpdateTask();
task.execute(response); 
```

在该课程中，我显示了一个进度对话框，更新场地。

# objective-c - NSLog 返回 null 而不是字符串

> ID：13243468
> 
> 赞同：0
> 
> 时间：2012-11-06T02:28:25.290
> 
> 标签：objective-c, ios, xcode, ios6, nslog

`NSLog`正在返回输出“Null”而不是我预期的字符串。我怀疑这是私有实例变量等的问题，但由于我不熟悉面向对象的编程，我无法确定原因。

```
//The viewDidLoad method in MainGameDisplay.m:
- (void)viewDidLoad
{
    [super viewDidLoad];
    Engine *engine = [[Engine alloc] init];
    [engine setPlayerName: viewController];
} 
```

字符串由 a 输入`UITextField`，属性为

```
//ViewController.h
 @property (strong, nonatomic) IBOutlet UITextField *PlayerNameTextView; 
```

该方法可以正常工作并返回正确的字符串，如果`[engine setPlayerName: self]`放置在`ViewController`中，但在该位置之外的任何地方`*PlayerNameTextView`都会导致此问题。

```
//Engine.m
@implementation Engine
{
    ViewController *firstPage;
}

NSString *Player;

-(void) setPlayerName: (ViewController *) name
{
    Player = [[name PlayerNameTextView] text];
    NSLog(@"%@", Player);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:06:07.773

确保“名称”已正确初始化。尝试在 NSLog 之前放置一个 assert(name != nil)。或者更好的是，在 NSLog 处设置断点并检查变量。

另一个建议：为什么不创建方法 -(void) setPlayerName:(NSString*)name？这比将指针传递给视图控制器更简单，并且更容易调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:56:44.850

`NSLog`返回类型如您[在其文档](https://developer.apple.com/library/mac/#documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html)`void`中所见。没有理由期望调用它有任何返回值，因为它不返回任何东西。

# jekyll - Jekyll 页面如何访问其文件名？

> ID：13243469
> 
> 赞同：21
> 
> 时间：2012-11-06T02:28:35.283
> 
> 标签：jekyll

我的目标是创建从任何已发布的 jekyll 页面返回到其在 Github 上的位置的链接。

因此，在构建此 url 时，我需要访问页面的路径名。但是，我在提供此信息的模板的 api 中看不到任何内容。我查看了*page*的源代码，但是当通过模板访问时，所有文件/路径属性都没有值。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-09T00:37:55.820

**更新：**现在你可以使用`{{page.path}}`.

* * *

似乎您可以使用液体代码很好地构建您的链接：`{{ page.url }}`

例如，如果您希望此页面：[http](http://railsdocs.org/pages/get-involved.html) ://railsdocs.org/pages/get-involved.html链接到此页面：[https ://github.com/dogweather/railsdocs.org/blob/gh-pages/ pages/get-involved.md](https://github.com/dogweather/railsdocs.org/blob/gh-pages/pages/get-involved.md)

似乎您可以添加以下内容：

```
[source](https://github.com/dogweather/railsdocs.org/blob/gh-pages/{{page.url | replace:'.html','.md'}}) 
```

到降价并获得你想要的链接。

### 更通用的解决方案：

或者，我们可以编写一个允许页面直接访问其文件名的生成器。将此添加到目录中的`.rb`文件中`_plugins`：

```
module Jekyll

  class PagePathGenerator < Generator
    safe true
    ## See post.dir and post.base for directory information. 
    def generate(site)
      site.posts.each do |post|
        post.data['path'] = post.name
      end

    end
  end

end 
```

然后我们可以可靠地将帖子的文件名作为`{{ page.path }}`. 此解决方案比从 URL 转换更强大，因为页面名称在将其转换为 URL 时可能包含被“清理”出来的字符。（帖子还需要重新添加他们的日期信息等）。相反，这个插件让我们可以直接访问帖子的名称。

如果还需要该数据，类似的策略可以让我们获得帖子的路径。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-06-26T20:38:23.560

我不确定这是什么时候添加的，但`page.path`给出了源文件相对于 Jekyll 根目录的路径。

# expressionengine - 表达式引擎不会显示所有条目

> ID：13243471
> 
> 赞同：7
> 
> 时间：2012-11-06T02:28:42.237
> 
> 标签：expressionengine

我正在尝试在客户网站上显示零售商列表。过滤后的列表（按州）显示正确，但“全部显示”列表没有。“显示全部”列表中缺少的项目显示在过滤列表中，所以我知道这不是条目本身的问题。

我检查了状态 - 一切似乎都是正确的，并且我检查了是否设置了 dynamic=no。

我错过了什么？

EE v2.2.2，内部版本 20110801

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T03:39:20.800

默认情况下，ExpressionEngine 设置了 100 个条目的限制，因此没有设置限制参数，它与

```
{exp:channel:entries channel="news" limit="100"} 
```

要显示所有条目，请设置一个上限，如下所示：

```
{exp:channel:entries channel="news" limit="999"} 
```

那应该会显示您的所有条目！

干杯，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T15:50:12.713

我使用 limit="1000000" 来确保。

# matlab - 从每个子矩阵或元胞数组中收集特定行

> ID：13243477
> 
> 赞同：1
> 
> 时间：2012-11-06T02:29:00.997
> 
> 标签：matlab, for-loop, matrix, row, submatrix

我希望从每个子矩阵或单元阵列中收集最后一行。

*   我在矩阵名称 A 中有 17 x 20 个单元格。

*   每个子矩阵的行数不同，但列数相同（共 7 列，全部）

*   我试图生成一个文件，该文件仅由每个子矩阵的最后一行组成。我的目标文件来自

    ```
     M = [column1 column2 column3 column4 column5 column6 column7] 
         % made up of last rows of each submatrices, unknown number of lines, 7 columns 
    ```

*   所以我尝试了

    ```
     for x_cc = 1:20
             for y_cc = 1:17
                  M = A{x_cc, y_cc}(end,:);
             end
         end 
    ```

*   但它不起作用，给出错误下标索引必须是真正的正整数或逻辑。

*   我是否需要先定义尺寸？应该做什么操作？或者什么命令有用？我尝试了 cellfun，但不确定如何在这里使用。

*   需要任何帮助来解决这种情况。谢谢~！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:28:08.603

首先，看起来你切换`x_cc`和`y_cc`. 由于您的矩阵为 17 x 20，`x_cc`因此行数应为 17，而行数应`y_cc`为 20。

但是，您遇到的错误可能来自尝试使用`end`. 此错误的示例：

```
a = [];

a(end)
??? Subscript indices must either be real positive integers or logicals. 
```

如果您很好奇，避免`for`循环的方法如下所示：

```
B = cellfun(@(x) x(end,:), A, 'UniformOutput', 0);  
M = cell2mat(B(:)); 
```

这会从 A 中的每个矩阵中获取最后一行，然后将它们垂直堆叠并转换为数组。

# java - 对象和类关系的含义

> ID：13243483
> 
> 赞同：1
> 
> 时间：2012-11-06T02:29:51.600
> 
> 标签：java, android, oop

A.java：

```
public class A {
    public static StartActivity startActivity;
} 
```

B.java：

```
public class StartActivity extends Activity  
    public void onCreate(Bundle savedInstanceState) {
        A.activity = this;
    }
} 
```

从上面的2个java文件中，我想问一下是什么意思 `a.activity = this;`？这是否意味着创建一个新的活动实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:31:45.093

> 这是否意味着创建一个新的活动实例？

不，活动是一个字段，而不是一个类，你不能创建一个变量的“实例”，只是类。代码所做的只是将一个已经存在的对象（当前的 b 对象）分配给 a 的静态字段 activity，仅此而已。

**编辑**
更正，我想活动也是一个类，因为你有一个类型和一个变量，名字相同，活动？您的命名是非标准的，这极大地混淆了问题和您的问题。我建议你改变你的问题，使命名标准和非混淆。所有类型（包括类、接口和枚举）都应以大写字母开头，所有变量都应以小写字母开头。

**编辑2**
好的，在你编辑的问题中查看了你最新的代码后，我们看到A有一个静态的StartActivity字段，也称为静态变量，称为Activity。在 B 类的`onCreate(...)`方法内部，它将`this`对当前 B 对象本身的引用分配给 A 的活动字段。`onCreate(...)`因此，如果将活动分配给先前的 StartActivity 对象，那么如果调用其方法，则该分配现在已更改为当前 B 对象。

# php - mysql_fetch_array() 无法正常工作，缺少大多数值

> ID：13243486
> 
> 赞同：1
> 
> 时间：2012-11-06T02:30:08.603
> 
> 标签：php, mysql, arrays, resultset

好的，所以我试图从 mysql 表中获取一组键值，而 mysql_fetch_array() 似乎无法正常工作。代码：

```
 $x="select id from topics"
                    $set=mysql_query($x);
                    echo mysql_num_rows($set);
                    print_r(mysql_fetch_array($set));
                    $ids=mysql_fetch_array($set);
                    echo $ids[0];
                    echo $ids[1]; 
```

我已经到处移动了东西，但似乎没有任何改变输出：

66 //结果集中值的个数

Array ( [0] => 3 [id] => 3 ) //值（单数）被移动到数组

4 //假设上述数组的单个值

我真的不确定这里发生了什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:37:38.730

`mysql_fetch_array`将单行作为 PHP 数组返回，按列名和从 0 开始的索引进行索引。它不会将整个集合加载到一个巨大的数组中，这似乎是您所期望的。

您必须在循环中迭代结果集，如下所示：

```
$x="select id from topics";
$set = mysql_query($x);
echo mysql_num_rows($set);
$giant_list_of_ids = array();
while ($row = mysql_fetch_array($set))
{
    echo $row[0]; //or alternatively, echo $row['id'];
    $giant_list_of_ids[] = $row[0];
} 
```

# mysql - “FROM a LEFT JOIN b”与“FROM a, b”的区别

> ID：13243488
> 
> 赞同：0
> 
> 时间：2012-11-06T02:30:23.127
> 
> 标签：mysql, sql

查询是否相同？标准是什么？

如果我更改其中一种编写查询的方式，我会失去性能吗？

查询 1

```
 SELECT a.*, b.id AS b_id
     FROM table_a AS a
LEFT JOIN table_b AS b
       ON a.id = b.id 
```

查询 2

```
 SELECT a.*, b.id AS b_id
     FROM table_a a, table_b b
    WHERE a.id = b.id 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T02:36:29.247

他们返回不同的结果。

即使 table_b 中没有与 table_a id 匹配的关联记录，LEFT JOIN 语句也会返回行。因此它将返回 table_a 中的所有行，与 table_a 中的匹配行或空白/空 table_b 行配对（如果 table_a 中的该行在 table_b 中没有任何匹配行）。

第二个查询是 INNER JOIN 的快捷方式。此查询将仅返回与条件匹配的行`a.id = b.id`。第二个查询也可以写成：

```
SELECT a.*, b.id AS b_id
FROM table_a a
INNER JOIN table_b b 
ON a.id = b.id 
```

要回答您的性能问题，请在[此处查看](https://stackoverflow.com/questions/2726657/inner-join-vs-left-join-performance-in-sql-server)相关 SO 线程上的答案。

# android - 如何让 Rails 告诉移动应用程序用户是否登录？

> ID：13243496
> 
> 赞同：0
> 
> 时间：2012-11-06T02:32:05.733
> 
> 标签：android, ios, ruby-on-rails, authentication, devise

我正在开发一个使用 devise 作为身份验证解决方案的 Rails 应用程序。对于 Web 应用程序，用户在表单中输入用户名和密码，Rails 可以在用户登录后呈现不同的页面。

现在我想用这个框架来支持移动应用程序。在这种情况下，移动应用程序需要知道用户输入的用户名和密码是否正确。

应该如何设计对移动应用程序、响应标头或正文中的 JSON 的响应？设计支持吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T06:26:06.120

更多教程：

[http://blog.joshsoftware.com/2011/12/23/designing-rails-api-using-rabl-and-devise/](http://blog.joshsoftware.com/2011/12/23/designing-rails-api-using-rabl-and-devise/)

[http://www.strukturedkaos.com/2011/09/19/soup-to-nuts-token-authentication-for-android-using-rails-3-devise/](http://www.strukturedkaos.com/2011/09/19/soup-to-nuts-token-authentication-for-android-using-rails-3-devise/)

确保在设计配置中启用/取消注释以下行：

```
config.token_authentication_key = :auth_token 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:20:50.890

您需要令牌身份验证。移动客户端应该有一个登录表单并访问 REST API 进行身份验证。如果身份验证成功，您将获得一个令牌，您需要将其与同一会话中的所有后续请求一起发送。

[http://zyphdesignco.com/blog/simple-auth-token-example-with-devise](http://zyphdesignco.com/blog/simple-auth-token-example-with-devise)

[http://matteomelani.wordpress.com/2011/10/17/authentication-for-mobile-devices/](http://matteomelani.wordpress.com/2011/10/17/authentication-for-mobile-devices/)

# c - 无需调试即可找到 C 变量的地址

> ID：13243499
> 
> 赞同：1
> 
> 时间：2012-11-06T02:32:43.203
> 
> 标签：c, stack, buffer-overflow

我正在做一个基本的缓冲区溢出项目。目标是溢出缓冲区以运行 shell。我正在利用的代码如下所示：

```
int func(char *str)
{
    //4 bytes for str, 16 bytes for the buffer, 4 for the ebp, 4 for the ret
    char buffer[12];

    /* The following statement has a buffer overflow problem */ 
    strcpy(buffer, str);

    return 1;
} 
```

本质上，我正在创建 str 以便它将用一些启动 shell 的 shellcode 的地址覆盖 func() 的返回地址。

如果我使用 gcc -g 选项编译我的代码并在 gdb 中运行可执行文件，一切正常。但是，如果我省略 -g，我会得到一个段错误而不是 shell。

如果我理解正确，这很可能是因为 gdb 将东西添加到堆栈中。这意味着我需要更改用于替换 func 的返回地址的值。我将如何寻找这个新地址？

我尝试添加一个 printf("%p", str); func，然后编译和运行使用和不使用 -g 但这两种方式都会打印相同的东西。我也尝试过其他一些类似的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:17:33.683

我找到了解决方案。显然，改变堆栈的不是 -g 标志 - 使用 gdb 运行它。如果我在 gdb 中运行和独立运行程序时使用 printf，则会出现差异，我可以相应地调整我的代码

# python - 如何访问 Mako 模板和 Pyramid 中的会话变量？

> ID：13243500
> 
> 赞同：1
> 
> 时间：2012-11-06T02:32:43.863
> 
> 标签：python, pyramid, mako

我有这个金字塔视图：

```
def ClientView(request):
    session = request.session
    session['selectedclientid'] = 'test' #selectedclient.id
    session.save()
    return dict(
        logged_in=authenticated_userid(request)
    ) 
```

然后在我的模板中，我只是在尝试这样的事情：

```
% if session['selectedclientid'] != None:
                The session has something
            % endif 
```

这给了我一个模板错误：

```
 % if session['selectedclientid'] != None:
TypeError: 'Undefined' object has no attribute '__getitem__' 
```

我设置会话变量错误吗？我查询错了吗？我什至需要首先制作`request.session`对象的副本`.save()`吗？我不能这样做`request.session['myvariable'] = 'foo'`并设置它吗？这仍然无助于我将其拉回模板中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:29:21.430

`request.session`是模板中的变量。不是`session`。这就是你得到`Undefined`例外的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:49:28.337

我想我明白了。我仍然可以这样设置：

```
request.session['selectedclientid'] = 'test' 
```

但是读回来是这样的：

```
% if 'selectedclientid' in request.session:
                The session has something ${request.session['selectedclientid']}
            % endif 
```

# c# - 带有圆角和阴影的文本框

> ID：13243503
> 
> 赞同：1
> 
> 时间：2012-11-06T02:33:17.323
> 
> 标签：c#, wpf, roundedcorners-dropshadow

我正在尝试复制这样的文本框：

![带有阴影的文本框](../Images/299549e4abcd62e32785274111e71b71.png)

文本框外的背景将由父容器处理。

据我所知，我需要注意 4 个项目：

*   圆角
*   在顶部和右侧添加内部阴影
*   在左侧和底部添加外部阴影
*   避免文本框中的文本继承阴影效果。

我从[WPF 圆角文本框](https://stackoverflow.com/questions/4779777/wpf-rounded-corner-textbox)和[http://www.codeproject.com/Articles/225076/Creating-Inner-Shadows-for-WPF-and-Silverlight](http://www.codeproject.com/Articles/225076/Creating-Inner-Shadows-for-WPF-and-Silverlight)借用了代码，但我对 WPF 的掌握还不够做这个。

目前的代码：

```
<Window x:Class="Test.TestWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Window1" Height="300" Width="300">
<Window.Resources>
    <ControlTemplate x:Key="TextBoxBaseControlTemplate" TargetType="{x:Type TextBoxBase}">
        <Border Background="{TemplateBinding Background}" 
            x:Name="Bd" BorderBrush="Black"
            BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="8"
                ClipToBounds="True">
            <Border Background="Transparent" BorderBrush="Black" BorderThickness="0,10,10,0" Margin="0,-11,-11,0">
                <Border.Effect>
                    <DropShadowEffect ShadowDepth="0" BlurRadius="8"/>
                </Border.Effect>
                <ScrollViewer x:Name="PART_ContentHost"/>
            </Border>
        </Border>
        <ControlTemplate.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" TargetName="Bd"/>
                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
            </Trigger>
            <Trigger Property="Width" Value="Auto">
                <Setter Property="MinWidth" Value="100"/>
            </Trigger>
            <Trigger Property="Height" Value="Auto">
                <Setter Property="MinHeight" Value="20"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</Window.Resources>
<Grid>
    <TextBox Template="{StaticResource TextBoxBaseControlTemplate}" Height="25" Margin="5">
        Text
    </TextBox>
</Grid>
</Window> 
```

这呈现为：

![当前代码](../Images/83b1afa3a80cb128149453235f6d5ed1.png)

问题是阴影在顶部和右侧的圆角之外；文本被遮蔽；而且我还没有弄清楚如何在左侧和底部之外添加阴影。

如果我删除

```
CornerRadius="8" 
```

从 BorderThickness 然后我得到一个内部有阴影的矩形。

我愿意接受有关如何解决此问题的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:09:31.523

在具有 的 中放置一个`Background`不是 null 或透明`Border`的`DropShadowEffect`，否则它包含的任何元素也会得到阴影。另外，使用 的[Direction](http://msdn.microsoft.com/en-us/library/system.windows.media.effects.dropshadoweffect.direction%28v=vs.95%29.aspx)属性`DropShadowEffect`来获得不同角度的阴影

# node.js - 将多个 DB/mongoose 查询的结果呈现到 express.js 中的视图

> ID：13243507
> 
> 赞同：5
> 
> 时间：2012-11-06T02:34:08.640
> 
> 标签：node.js, express, mongoose

鉴于 mongoose（或 sequelize 或 redis）查询的异步性质，当您需要在渲染视图之前进行多个查询时，您会怎么做？

例如，您有`user_id`一个会话，并希望通过 检索有关该特定用户的一些信息`findOne`。但是您还想显示最近登录用户的列表。

```
exports.index = function (req, res) {
    var current_user = null

    Player.find({last_logged_in : today()}).exec(function(err, players) {
        if (err) return res.render('500');

        if (req.session.user_id) {
            Player.findOne({_id : req.session.user_id}).exec(function(err, player) {
                if (err) return;
                if (player) {
                    current_user = player
                }
            })
        }

        // here, current_user isn't populated until the callback fires 
        res.render('game/index', { title: 'Battle!',
                   players: players,
                   game_is_full: (players.length >= 6),
                   current_user: current_user
        });
    });
}; 
```

`res.render`在第一个查询回调中也是如此，很好。但是等待响应`findOne`以查看我们是否认识该用户呢？它只是有条件地调用，所以我不能放在`render`内部回调中，除非我为任一条件复制它。不漂亮。

我可以想到一些解决方法 -

*   让它*真正*异步并在客户端使用 AJAX 来获取当前用户的个人资料。但这似乎比它的价值更多。

*   使用`Q`并承诺`findOne`在渲染之前等待查询的解决。但在某种程度上，这就像强制阻止以使响应等待我的操作。似乎不对。

*   使用中间件函数获取当前用户信息。这看起来更干净，使查询可重用。但是我不确定如何去做，或者它是否仍然会出现同样的问题。

当然，在更极端的情况下，如果您要进行十几个查询，事情可能会变得很糟糕。那么，考虑到这种类型的要求，通常的模式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T03:03:15.233

是的，这是异步代码中特别烦人的情况。您可以做的是将必须复制的代码放入本地函数中以使其保持干燥：

```
exports.index = function (req, res) {
    var current_user = null

    Player.find({last_logged_in : today()}).exec(function(err, players) {
        if (err) return res.render('500');

        function render() {
            res.render('game/index', { title: 'Battle!',
                       players: players,
                       game_is_full: (players.length >= 6),
                       current_user: current_user
            });
        }

        if (req.session.user_id) {
            Player.findOne({_id : req.session.user_id}).exec(function(err, player) {
                if (err) return;
                if (player) {
                    current_user = player
                }
                render();
            })
        } else {
            render();
        }
    });
}; 
```

然而，看看你在这里做什么，你可能需要在多个请求处理程序中查找当前玩家信息，所以在这种情况下你最好使用中间件。

就像是：

```
exports.loadUser = function (req, res, next) {
    if (req.session.user_id) {
        Player.findOne({_id : req.session.user_id}).exec(function(err, player) {
            if (err) return;
            if (player) {
                req.player = player
            }
            next();
        })
    } else {
        next();
    }
} 
```

然后，您将配置路由以调用`loadUser`您需要`req.player`填充的任何位置，并且路由处理程序可以直接从那里提取玩家详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-10T09:45:41.873

```
router.get("/",function(req,res){
    var locals = {};
    var userId = req.params.userId;
    async.parallel([
        //Load user Data
        function(callback) {
             mongoOp.User.find({},function(err,user){
                if (err) return callback(err);
                locals.user = user;
                callback();
            });
        },
        //Load posts Data
        function(callback) {
                mongoOp.Post.find({},function(err,posts){
               if (err) return callback(err);
                locals.posts = posts;
                callback();
            });
        }
    ], function(err) { //This function gets called after the two tasks have called their "task callbacks"
        if (err) return next(err); //If an error occurred, we let express handle it by calling the `next` function
        //Here `locals` will be an object with `user` and `posts` keys
        //Example: `locals = {user: ..., posts: [...]}`
         res.render('index.ejs', {userdata: locals.user,postdata: locals.posts})
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-08T15:12:55.150

现在，您可以使用 ExpressJS 中的 app.param 轻松建立中间件，根据请求 URL 中的参数名称加载所需的数据。

[http://expressjs.com/4x/api.html#app.param](http://expressjs.com/4x/api.html#app.param)

# css - 样式化 QTabWidget

> ID：13243510
> 
> 赞同：4
> 
> 时间：2012-11-06T02:34:43.563
> 
> 标签：css, qt, stylesheet, qt4.8, qtabwidget

我有一个带有背景渐变和两个问题的 QTabWidget。

1.  如何删除活动选项卡周围的烦人轮廓（见图）？我尝试了“大纲：无”，就像按钮一样，但它似乎没有效果。

2.  如何设置禁用标签的样式？我试过 :disabled 和 :!enabled 但两者都不起作用。**// 编辑：这适用于 :disabled 但不适用于所有属性。好像我试过唯一不支持的。**

![烦人的焦点](../Images/05e6c5a67c635d95e8d1e11e8c84d311.png)

qt 文档没有帮助。谷歌要么。:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:08:07.570

似乎焦点矩形由正在使用的`QStyle`（不要与样式表混淆）处理。您可以编写一个`QStyle`子类并将其应用于您的`QTabWidget`. `drawControl()`如果当前正在绘制焦点矩形，则子类应覆盖该方法并且不执行任何操作。

子类看起来像这样：

**NoFocusRectStyle.h**

```
#ifndef NOFOCUSRECTSTYLE_H
#define NOFOCUSRECTSTYLE_H

#include <QWindowsVistaStyle> // or the QStyle subclass of your choice

class NoFocusRectStyle : public QWindowsVistaStyle
{
public:
    NoFocusRectStyle();

protected:
    void drawControl(ControlElement element, const QStyleOption *option, 
        QPainter *painter, const QWidget *widget = 0) const;
};

#endif // NOFOCUSRECTSTYLE_H 
```

**NoFocusRectStyle.cpp**

```
#include "NoFocusStyle.h"

NoFocusRectStyle::NoFocusRectStyle()
{
}

void NoFocusRectStyle::drawControl(ControlElement element, 
    const QStyleOption *option, QPainter *painter, 
    const QWidget *widget) const
{
    if(element == CE_FocusFrame)
        return;

    QWindowsVistaStyle::drawControl(element, option, painter, widget);
} 
```

在表单的初始化器/构造器中的某个地方，您可以将自定义样式子类应用于选项卡小部件：

```
ui->tabWidget->setStyle(new NoFocusRectStyle()); 
```

这应该允许您的样式表继续工作。

如果有更简单的方法来做到这一点，那就太好了，但我找不到:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-03T08:33:12.387

这个线程很旧，但也许这会对人们有所帮助。

如果您不需要使用焦点，则可以通过选项卡小部件进行设置：

ui->tabWidget->setFocusPolicy(Qt::NoFocus);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T07:11:56.543

可以通过在您的样式中添加以下片段来删除焦点矩形：

```
QWidget {
    outline: 0;
} 
```

它与 QTabWidget 的样式没有直接关系，但可以按您的预期工作。

# c# - 如何动态评估事件？

> ID：13243514
> 
> 赞同：0
> 
> 时间：2012-11-06T02:34:48.073
> 
> 标签：c#, if-statement, event-handling, multiple-conditions

如果这在编程上下文中应该以不同的方式表达，请原谅我 - 除了我用来为我的问题命名的确切内容之外，我不知道要搜索什么。

上下文 - 我正在尝试构建一个包含 4x4 随机字母网格的单词搜索游戏。我目前正在使用 Label_Click 事件来更改包含给定字母的标签的背景颜色。将来还会有许多其他操作（例如，评估一系列点击是否构成合法词），但我基本上被这个问题所困扰：

```
// pseudo-code

if (lblA1_wasClicked || lblB1_wasClicked || ... lblD4_wasClicked)
{ 
    whichever_wasClicked... //perform actions
} 
```

也许我需要学习为这种情况创建一个事件处理程序？我从未创建过自定义事件处理程序，我只知道它们在理论上是什么。我有点卡住了，在这一点上很难知道要寻找什么来继续学习。我只知道危险，所以如果答案像我的问题一样直截了当，请放轻松。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:56:21.217

如果您在 ui 中，则可以转到每个标签的属性并将其 Click 处理程序设置为相同的方法。所以如果你有一个带有这样签名的方法。

```
public void label_Click(object sender, EventArgs e)
{
} 
```

然后将其分配给每个标签，然后使用它来处理每个标签。这是一个幼稚的例子，并且有更好的方法使用已建立的模式来创建 Windows 窗体应用程序。查看[此问题](https://stackoverflow.com/questions/595469/ui-design-pattern-for-windows-forms-like-mvvm-for-wpf)或搜索 MVP 模式窗口表单以获取更多信息！

# javascript - jquery中的访问类变量

> ID：13243516
> 
> 赞同：0
> 
> 时间：2012-11-06T02:35:21.517
> 
> 标签：javascript, jquery, ajax, class

我的 html 中有一个选择，并希望在页面加载时通过 ajax 添加选项。选项值在我的数据库中，我通过调用 ajax 来获取它们。为此，我正在用 javascript 编写一个类，但是在它运行时我无法获取我的数据。请看一下 ：

--- Main.js ---

```
function MyLoader() {
    this._clients = null;
    this._code = null;
}

Loader.prototype = {

    var context = this;

    loadClients: function() {
        $.ajax({
            url: "my/php/",
            type: "POST",
            data: {...},
            success: function(response) {
                context._clients = response;
            }
        });
    },

    getCode: function() {...}
}; 
```

然后我有以下内容：

```
$(document).ready(function() {
    var loader = new Loader();
    loader.loadClients();
    alert(loader._clients);

    //Here I want to add my options to the select
}); 
```

我的警报总是返回 null，我不明白为什么。我需要将我的数据保存在课堂上，以便在需要时随时访问它们。

你能给我指出正确的方向，让我所有的东西都能正常工作吗？谢谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:40:30.033

```
Loader.prototype = { //     v---callback parameter
    loadClients: function(callback) {
        $.ajax({
            url: "my/php/",
            context: this, // <---set success context
            type: "POST",
            data: {...},
            success: callback // <---pass callback
        });
    },

    getCode: function() {...}
};

$(document).ready(function() {
    var loader = new Loader();
                      //  v---pass callback
    loader.loadClients(function(response) {
        this._clients = response;
        alert(this._clients);
        //Here I want to add my options to the select
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:39:33.853

我相信您需要在“成功”回调中完成所有动态加载，因为它是异步加载的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T02:40:31.050

您需要在成功回调中执行此操作，因为它是异步的：

```
Loader.prototype = {

    var context = this;

    loadClients: function() {
        $.ajax({
            url: "my/php/",
            type: "POST",
            data: {...},
            success: function(response) {
                context._clients = response;
                alert(loader._clients);

               //Here I want to add my options to the select
            }
        });
    },

    getCode: function() {...}
};

$(document).ready(function() {
    var loader = new Loader();
    loader.loadClients();
}); 
```

# python - 无序类型错误：int 存储为字符串

> ID：13243517
> 
> 赞同：0
> 
> 时间：2012-11-06T02:35:28.383
> 
> 标签：python, string, int

我正在遍历文件以找到最高值，然后返回值和行数。如果我没有转换`myMax`，`int()`我会得到一个无序类型错误，变量设置为字符串。我忘了什么？！

```
def main():
    myMax= 0
    myCount = 0

    myFile = open("numbers.dat", 'r')
    for line in myFile :
        myCount = myCount + 1
        if int(line) > int(myMax): 
            myMax = line

    myFile.close()

    print ("Out of %s lines, the highest value found was %s" %(myCount, myMax))

main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:41:02.793

您需要更改`myMax = line`为`myMax = int(line)`. 这也将使`if int(line) > int(myMax):`可转换为`if int(line) > myMax:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:50:17.443

如果您的“numbers.dat”文件在整个文件中包含字符串和数字，这就是我用来解决您的问题的方法。我必须逐个字符地分解行，然后将任何多位数的数字构建到字符串变量 myTemp 中，然后每当没有数字字符时，我检查 myTemp 的大小以及其中是否有任何内容将其转换为整数并将其分配给 myInt，将 myTemp 变量重置为空（因此，如果该行上有另一个数字，它将不会添加到已经存在的数字中），然后将其与当前的 Max 进行比较。这是几个如果，但我认为它可以完成工作。

```
def is_number(s):
try:
    float(s)
    return True
except ValueError:
    return False 
```

定义主（）：

```
myMax= 0
myCount = 0
myTemp = ''
lastCharNum = False

myFile = open("numbers.dat", 'r')
for line in myFile :
    myCount = myCount + 1
    for char in line: #go through each character on the line
        if is_number(char) == False:  #if the character isnt a number
            if len(myTemp) == 0:   #if the myTemp is empty  
                lastCharNum = False #set lastchar false
                continue #then continue to the next char
            else:      #else myTemp has something in it
                myInt = int(myTemp)#turn into int
                myTemp = '' #Flush myTemp variable for next number (so it can check on same line)
                if myInt > myMax: #compare
                    myMax = myInt

        else:# otherwise the char is a num and we save it to myTemp

            if lastCharNum:
                myTemp = myTemp + char
                lastCharNum = True #sets it true for the next time around
            else:
                myTemp = char
                lastCharNum = True #sets it true for the next time around

myFile.close()

print ("Out of %s lines, the highest value found was %s" %(myCount, myMax)) 
```

主要的（）

如果“numbers.dat”文件的每一行只有数字，那么这很容易解决：

```
def main():
myMax= 0
myCount = 0

myFile = open("numbers.dat", 'r')
for line in myFile :
    myCount = myCount + 1
    if int(line) > myMax: #compare
        myMax = int(line)

myFile.close()

print ("Out of %s lines, the highest value found was %s" %(myCount, myMax)) 
```

主要的（）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T02:38:38.757

您的文件包含有效数字，而不是无法转换为数字的字符串。

```
with open('numbers.dat') as f:
   lines = [int(line) for line in f if line.strip()]

print 'Out of %s lines, the highest value is %s' % (len(lines),max(lines)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T02:39:27.070

我猜这行'myMax = line'导致它 - 你进行了类型转换（如果int（line）> int（myMax）:)但没有分配它。如果：

```
def main():
    myMax = 0
    with open("numbers.dat", 'r') as myFile:
        for i, line in enumerate((int(x) for x in myFile)):
            if line > myMax: 
                myMax = line

    print ("Out of %s lines, the highest value found was %s" % (i, myMax))

main() 
```

如果您有空行并想跳过它们：

```
def main():
    myMax = 0
    with open("numbers.dat", 'r') as myFile:
        for i, line in enumerate((int(x) for x in myFile if x)):
            if line > myMax: 
                myMax = line

    print ("Out of %s lines, the highest value found was %s" % (i, myMax))

main() 
```

# jquery - 如何从 jQuery ajax 调用访问 json 数据

> ID：13243521
> 
> 赞同：0
> 
> 时间：2012-11-06T02:35:49.253
> 
> 标签：jquery, json

这是来自 json_encode() 文件的 json 字符串：

```
[{"ID":"650","DESCR":"FRONTAGE","MAINURL":"images\/98\/30-HEATH (1).JPG","THUMBURL":"images\/98\/30-HEATH (1).JPG","ALBUM":"98"},{"ID":"651","DESCR":"PICTURE","MAINURL":"images\/98\/30-HEATH (2).JPG","THUMBURL":"images\/98\/30-HEATH (2).JPG","ALBUM":"98"},{"ID":"652","DESCR":"PICTURE","MAINURL":"images\/98\/30-HEATH (3).JPG","THUMBURL":"images\/98\/30-HEATH (3).JPG","ALBUM":"98"}] 
```

这是我正在使用的电话。它确实给出了一个对象，但是每次我尝试访问它时，我都会从 chrome javascript 控制台收到一个类型错误。

```
function FindPictures(b) {

var picturesHome = {};
var album = "";
var baseURL = b;

this.pics = function(alb){
    album = "";

    $.ajax({
        async: false,
        url: "picsJSON.php",
        dataType: 'json',
        success: function (json) {
            picturesHome = json;
        },
        error: function (error) {}
    });

    return picturesHome;    
};

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T02:47:33.547

`success`是一个回调：在 ajax 下载完成之前它不会被执行，但是你的函数会`picturesHome`立即返回。标准程序是在`success`回调中做一些有意义的工作：

```
function doSomethingWithThePictures(pics)
{
    alert('got some pics!');
    console.log(pics);
}

... snip ...

$.ajax({
        async: false,
        url: "picsJSON.php",
        dataType: 'json',
        success: function (json) {
            doSomethingWithThePictures(json);
        },
        error: function (error) { alert('ERROR: ' + error); }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:30:58.973

我猜，问题出在 ajax 调用中指定的数据类型

这可以通过在 php 中指定 JSON 内容类型来解决，例如

```
header('Content-Type: application/json'); 
```

或`datatype`从 ajax 中删除选项并将其解析为 JSON

```
$.ajax({
    async: false,
    url: "picsJSON.php",
    success: function (json) {
        picturesHome = JSON.parse(json); // you can use $.parseJSON() instead
    },
    error: function (error) {}
}); 
```

希望这可以帮助

# python - 使用 python 子进程伪造从终端运行 cmd

> ID：13243523
> 
> 赞同：1
> 
> 时间：2012-11-06T02:35:57.727
> 
> 标签：python, subprocess

我们有一个供应商提供的 python 工具（它是字节编译的，我们没有源代码）。因此，我们也被锁定在使用供应商提供的 python 2.4。util的方法是：

```
source login.sh
oupload [options] 
```

login.sh 只是设置了一些环境变量，然后是 2 个别名：

```
odownload () {
${PYTHON_CMD} ${OCLIPATH}/ocli/commands/word_download_command.pyc "$@"
}
oupload () {
${PYTHON_CMD} ${OCLIPATH}/ocli/commands/word_upload_command.pyc "$@"
} 
```

现在，当我按照他们的方式运行时 - 工作正常。它将提示输入用户名和密码，然后执行此操作。

我正在尝试围绕该工具创建一个包装器，以便在它运行后执行一些额外的步骤，并为该实用程序提供一些合理的默认值。我遇到的问题是，在我的一生中，我无法弄清楚如何使用子流程来成功地做到这一点。似乎意识到原始命令不是直接从终端运行并退出。

我创建了一个 '/usr/local/bin/oupload' 并从原始 login.sh 复制。唯一的区别是我实际上运行了命令，而不是最后做一个别名。

然后，在我的 python 脚本中，我尝试运行我的新 shell 脚本：

```
if os.path.exists(options.zipfile):
    try:
        cmd = string.join(cmdargs,' ')
        p1 = Popen(cmd, shell=True, stdin=PIPE) 
```

但我得到：

```
Enter Opsware Username: Traceback (most recent call last):
File "./command.py", line 31, in main
File "./controller.py", line 51, in handle
File "./controllers/word_upload_controller.py", line 81, in _handle
File "./controller.py", line 66, in _determineNew
File "./lib/util.py", line 83, in determineNew
File "./lib/util.py", line 112, in getAuth
Empty Username not legal

Unknown Error Encountered                                              

SUMMARY:
Name: Empty Username not legal
Description: None 
```

因此，似乎发送了额外的回车（我尝试删除所有选项，但没有帮助）。

如果我不设置 stdin=PIPE，我会得到：

```
Enter Opsware Username: Traceback (most recent call last):
File "./command.py", line 31, in main
File "./controller.py", line 51, in handle
File "./controllers/word_upload_controller.py", line 81, in _handle
File "./controller.py", line 66, in _determineNew
File "./lib/util.py", line 83, in determineNew
File "./lib/util.py", line 109, in getAuth
IOError: [Errno 5] Input/output error

Unknown Error Encountered 
```

我已经尝试过使用 p1.communicate、p1.stdin.write() 以及 shell=False 和 shell=True 的其他变体，但我没有运气试图弄清楚如何正确发送用户名和密码. 作为最后一个结果，我尝试查看他们提供的实用程序的字节码 - 它没有帮助 - 一旦我使用正确的参数调用 util 的主例程，它最终导致核心转储 w/线程错误。

最后的想法 - 该实用程序似乎不想“等待”任何输入。从 shell 运行时，它会在“用户名”提示符处暂停。当通过 python 的 popen 运行时，假设没有给出密码，它只是通过并结束。我试图查找可能预加载标准输入缓冲区的方法 - 认为如果它可用，该进程可能会从中读取，但无法确定这是否可能。

我试图远离使用 pexpect，主要是因为我们必须使用供应商提供的 python 2.4，因为他们提供了预编译库，并且我试图将脚本的分布保持在尽可能小的足迹 - 如果我必须，我必须，但我宁愿不使用它（老实说，我也不知道它是否适用于这种情况）。

任何关于我可以尝试的其他想法将不胜感激。

**更新**

因此，我通过深入研究字节码并找出编译命令中缺少的内容来解决这个问题。

然而，这带来了两个问题——

1.  供应商代码在调用时正在执行退出
2.  供应商代码正在写入标准输出，我需要对其进行存储和操作（它包含上传的 pkg 的 ID）。我不能只重定向标准输出，因为供应商代码仍在询问用户名/密码。

1 通过将代码包装在 try/except 子句中很容易解决。

2 通过执行类似的操作来解决：[https ://stackoverflow.com/a/616672/677373](https://stackoverflow.com/a/616672/677373)

我使用 cStringIO 而不是日志文件。我还必须实现一个假的“刷新”方法，因为似乎供应商代码正在调用它并抱怨我为 stdout 提供的新 obj 没有提供它 - 代码最终看起来像：

```
class Logger(object):
    def __init__(self):
        self.terminal = sys.stdout
        self.log = StringIO()

    def write(self, message):
        self.terminal.write(message)
        self.log.write(message)

    def flush(self):
        self.terminal.flush()
        self.log.flush()

if os.path.exists(options.zipfile):
    try:
        os.environ['OCLI_CODESET'] = 'ISO-8859-1'
        backup = sys.stdout
        sys.stdout = output = Logger()
        # UploadCommand was the command found in the bytecode
        upload = UploadCommand()
        try:
            upload.main(cmdargs)
        except Exception, rc:
            pass
        sys.stdout = backup
        # now do some fancy stuff with output from output.log 
```

我应该注意，我在 except: 子句中简单地“通过”的唯一原因是*始终*调用 except 子句。“rc”实际上是命令的返回码，所以我可能会添加对非零情况的处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:51:46.723

> 我试图查找可能预加载标准输入缓冲区的方法

您是否想创建一个命名的 fifo，用用户名/密码信息填充它，然后以读取模式重新打开它并将其传递给 popen（如 中`popen(..., stdin=myfilledbuffer)`）？

您也可以只创建一个普通的临时文件，将数据写入其中，然后以读取模式重新打开它，再次将重新打开的句柄作为标准输入传递。（这是我个人会避免做的事情，因为将用户名/密码写入临时文件通常很糟糕。OTOH 比 FIFO 更容易测试）

至于根本原因：我怀疑有问题的软件是通过非阻塞方法从标准输入读取的。不知道为什么在连接到终端时会起作用。

AAAANYWAY：根本不需要直接通过 Popen 使用管道，对吧？我有点笑这个的hackishness，但我敢打赌它会为你工作：

```
# you don't actually seem to need popen here IMO -- call() does better for this application.
statuscode = call('echo "%s\n%s\n" | oupload %s' % (username, password, options) , shell=True) 
```

测试`status = call('echo "foo\nbar\nbar\nbaz" |wc -l', shell = True)`（输出是'4'，自然。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:29:32.627

最初的问题是通过避免问题而不使用终端来解决的，而是导入由 shell 脚本调用的 python 代码并使用它。

但是，我相信 JF Sebastian 的回答可能会更好地满足最初的要求，因此我建议寻找类似问题答案的人们查看使用 pty 模块的路径。

# powerbuilder - PowerBuilder 12.5 修改后的 DataWindow 不使用表所有者限定列名

> ID：13243524
> 
> 赞同：4
> 
> 时间：2012-11-06T02:36:03.247
> 
> 标签：powerbuilder, datawindow

我正在尝试维护一个 PowerBuilder 程序，并且无法访问之前编写代码的程序员。我修改了一个 DataWindow，现在它生成的源代码在选择的列名中不包含表所有者 (dbo)。但它确实在 WHERE 子句中包含 dbo。见下文。

（旧的源代码在选择和位置的任何地方都显示 dbo.FieldAuxs。）

```
retrieve="PBSELECT( VERSION(400) TABLE(NAME=~"FieldAuxs~" ) 
COLUMN(NAME=~"FieldAuxs.id~") 
COLUMN(NAME=~"FieldAuxs.clientid~") 
COLUMN(NAME=~"FieldAuxs.status~") 
COLUMN(NAME=~"FieldAuxs.historyear~") 
WHERE(    EXP1 =~"dbo.FieldAuxs.id~"   OP =~"=~"    EXP2 =~":al_id~" ) ) ARG(NAME = ~"al_id~" TYPE = number) " update="FieldAuxs" updatewhere=1 updatekeyinplace=no arguments=(("al_id", number)) ) 
```

这会导致错误：**列前缀 dbo.FieldAuxs 与查询中使用的表名或别名不匹配...**

我的数据库配置文件让我以我（而不是 dbo）的身份登录到 PowerBuilder 开发环境。我相信这就是我想做的。

我已阅读有关将我的 SQLCA.DBParm 设置为 SQLQualifiers=1 的信息，但我在 Database Profile Setup 中看不到 DBParms 输入区域。似乎在 12.5 之前的某些版本中，您可以直接在某个框中输入 DBParm 值。但是在 12.5 中，它们只有复选框和下拉菜单来设置 DBParm 的值。而且我没有看到可以转化为为 SQLQualifiers 设置值的选择。根据文档： SQLQualifiers=1 --在 SQL 语句中使用所有者名称限定标识符。

我必须没有正确设置我的 DataWindow 自动生成的源代码，该源代码仅在 WHERE 子句中而不是在选择中完全限定列名。

欢迎提出想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T09:35:26.933

您描述的问题是一个常见的问题。

**典型原因 - 开发人员在开发模式下使用不同的数据库用户 ID**

一位开发人员以“模式所有者”身份登录数据库（在开发模式下），另一位开发人员以标准用户（例如 john_doe）身份登录数据库（在开发模式下）。

开发人员在开发或创建数据窗口时通常应**避免以模式所有者身份登录，**尤其是在多模式数据库中，因为当用户在正常（非模式所有者）用户 ID 下运行应用程序时，数据窗口将失败。

尽管这在概念上很简单，但它一直在发生，因为开发人员经常可以访问他们用于创建表或修改列等的开发模式/表所有者，然后他们忘记切换回正常的用户 ID 连接到开发数据窗口。

**当 PowerBuilder 限定标识符时**（来自 PB12.5 帮助）

如果表所有者的名称与登录到数据库的用户的名称相同，PowerBuilder 不会在它生成的 SQL 语句中使用所有者名称来限定标识符。因此，如果您需要 PowerBuilder 来限定所有者名称，您需要使用不拥有该表的用户登录。

**使用 SQLQualifiers 数据库参数**（来自 PB12.5 帮助）

此参数不适用于大多数数据库。根据 PB 12.5 的文档，SQLQualifiers 仅特定于**DIR Sybase DirectConnect**。

**其他解决方案和注意事项**

将数据窗口 SQL 转换为语法会起作用，但除非绝对必要，否则我通常会尽量避免这样做。您不应该转换为语法的原因是您失去了数据窗口中内置的一些魔力。如果您正在开发支持两​​个或更多后端数据库的应用程序，那么转换为语法将需要为每个 DBMS 创建一组单独的数据窗口。例如，将 Oracle 的左外连接语法与 MS SQL Server 相比较，如果以语法编码，数据窗口将在一个数据库中工作，但如果留在图形模式下，PowerBuilder 会根据所使用的 DBMS 自动使用正确的左外连接语法。在转换为超出原始问题范围的语法时，您会否定许多其他优点（魔法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:51:42.507

最短的解决方案是，在 DataWindow 的 SQL Painter 中，转到菜单**Design / Convert to Syntax**并自己手动编辑 SQL 语法。（坦率地说，我发现图形绘制器非常有限，并且比帮助我更慢；这通常是我创建 DataWindow 的第一步。）

我想可能有一些技巧和调整高度依赖于 DBMS（而且我还没有看到提到的 DBMS），比如将您的帐户分配为相关数据库*的*数据库所有者 (dbo)，但以上内容会帮助您以最快的速度通过您当前的阻塞。

祝你好运，

特里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T17:56:52.533

I failed to mention before that we recently upgraded to Powerbuilder 12.5 from 10.5\. This is the first time that a data window has been modified since the conversion.

Today I looked carefully at the SQL Painter for this data window and clicked on the 'WHERE' tab. Under column, it said dbo.FieldAuxs.id (which was the fully qualified name that appeared in the WHERE clause). Before, I didn't realize that this was a drop down since the arrow doesn't show until you select this widget. When I dropped it to see the choices, none were fully qualified, i.e. none were prefixed with the table owner dbo). I chose FieldAuxs.id and saved the data window. Now the auto generated select statement **consistently** does NOT include dbo. as a prefix.

It looks as if dbo.FieldAuxs.id was a artifact of version 10.5 when the former programmer chose to use fully qualified column names in his database profile.

# php - PHP 2 步骤流程到 1

> ID：13243525
> 
> 赞同：0
> 
> 时间：2012-11-06T02:36:07.477
> 
> 标签：php, wordpress

我目前正在使用以下列方式工作的 wp 礼券插件。

Step 1: 输入礼券金额并点击继续
Step 2: 输入收件人详细信息等并购买

我想删除第 1 步，所以改为加载第 2 步。每次我尝试它时，要么已经发送了标头，要么就是我无法弄清楚的错误。

礼券设置只有 1 个，以后不会再添加，即`[wpgft id=0]`.

我需要为此过程修改 2 个文件，并且尝试过但无济于事。

*   [http://pastebin.com/thtQ25FB](http://pastebin.com/thtQ25FB)

347线`//Setup the function to show the buttons based on Short Codes.`
至
390 线`add_shortcode('wpgft', 'showButton');`

*   [http://pastebin.com/hR9XU4ux](http://pastebin.com/hR9XU4ux)

59号线`//Check to see if the form was submitted.`
至
269号线`add_filter('the_posts', 'wpgft_clearSlate');`

简而言之，我想删除输入货币值并具有提交按钮的第一步过程，而只是将带有货币值输入的表单放在一页上。我不介意将 wpgft id 硬编码为 0，因为只有 1 个预设值为 0 的礼券。

# android - Android：如何使用机器人帐户自动登录 Twitter？

> ID：13243529
> 
> 赞同：2
> 
> 时间：2012-11-06T02:36:30.893
> 
> 标签：android, twitter, bots

我正在尝试创建一个通过 Twitter 发送信息的众包应用程序。希望用户打开我的应用程序，它会定期对信息进行一些处理并发送一条包含该信息的推文。

我想创建一个机器人帐户，应用程序将使用该帐户登录，因此用户不必使用自己的帐户登录，或者如果他们没有，则创建一个。

目前我有一个应用程序可以将用户引导到一个网站，以使用他们自己的 Twitter 帐户信息登录（使用 signpost 和 jtwitter），但这远不是我想要的。

我已经浏览了 oAuth、Signpost、J4twitter 和 Twitter API ME，但我在那些暗示这可能或不可能的东西中找不到任何东西（尽管我可能错过了它）。

任何帮助或指针将不胜感激。

# newrelic - 新的遗物请求与视图

> ID：13243531
> 
> 赞同：0
> 
> 时间：2012-11-06T02:36:56.887
> 
> 标签：newrelic

我每周一都会收到一个应用程序的 newrelic 性能电子邮件。因为它说 x 个请求。在另一封关于我的其他应用的 perf 电子邮件中，它显示了 y 浏览量。现在在视图和请求之间感到困惑。有谁知道视图和请求之间的区别？

应用 1：
响应时间：84 毫秒
请求 20 K 正常运行时间 99.75 %
Apdex 0.99

应用程序 2：
页面加载时间 2.5s
浏览量 2390
正常运行时间 99.28%
Apdex 0.97

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:37:55.703

“页面加载时间”是指[真实用户监控](https://newrelic.com/docs/features/real-user-monitoring)时间——从发起请求到触发 Javascript onload 事件在用户浏览器中呈现整个页面所需的时间。同样，“视图”是指在浏览器中加载的页面（即执行 JS）。

“响应时间”是仅在应用程序服务器中花费的时间。它不包括浏览器渲染时间、网络传输时间或您的应用程序代码之外的任何其他内容。“请求”是您的应用服务器看到的请求数，包括那些不呈现完整页面（例如，AJAX）或不是由浏览器发出的请求。

# javascript - 数组的 Jquery clone() 似乎克隆了两次

> ID：13243533
> 
> 赞同：2
> 
> 时间：2012-11-06T02:37:13.890
> 
> 标签：javascript, jquery

我正在尝试自动填充可见元素的日期范围。只要只有一个空的结束日期被填充，我的代码就可以正常工作，但是我很难理解为什么 clone() 方法运行了两次。

小提琴在[这里](http://jsfiddle.net/chrisfrisina/jYnZy/)。

基本上，它们是工作和角色。一个工作可以有很多角色，我猜父工作中的角色可能有重叠的开始和结束时间，但在这方面不是必需的。Jobs 可以并且确实可以重叠开始时间和结束时间。该代码通过查找 ROLES 的 HTML 中描述的开始和结束时间来工作，如果没有指定结束时间，则将角色结束时间填充为“CURRENT”。然后，为了填充 JOB 时间，它收集数组中的所有开始时间`start`(var start = []) 和数组中的所有结束时间`end`(var end = [])。然后它对 和 进行排序`start`，`end`并将第一个`start`索引（日期）作为 JOB 的开始日期，并将最后一个索引（日期）`end`作为 JOB 的结束日期。不知何故，问题就在眼前`$(this).find('>h1').after($('.workexperience time.end[datetime=' + end[end.length-1] + ']').clone());` ，因为数组似乎是正确的。

您能帮我指出代码中错误的正确方向吗？

每个 nnnnnn：`$('.workexperience time.end[datetime=' + end[end.length-1] + ']')`克隆之前的查询是：

[​当前​​​，​当前​​​]

[ ​2012 年 9 月​​​]

[​当前​​​，​当前​​​，​当前​​​，​当前​​​]

[ ​2006 年 3 月​​​]

[ ​2002 年 6 月​​​]

`end[end.length-1]`变量 end的查询结果为：

2012-11

2012-09

2012-11

2006-03

2002-06

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:23:39.520

您的 $('.workexperience time.end[datetime=' + end[end.length-1] + ']') 正在收集所有工作，而如果我理解正确，它应该只限于当前工作：

```
$(this).find('time.end[datetime=' + end[end.length-1] + ']').clone() 
```

小提琴：http: [//jsfiddle.net/jYnZy/14/](http://jsfiddle.net/jYnZy/14/)

# objective-c - 在目标 c 中显示华氏温度格式

> ID：13243536
> 
> 赞同：0
> 
> 时间：2012-11-06T02:37:38.817
> 
> 标签：objective-c, ios

我有一个温度值需要在 iOS 中显示给用户，我怎样才能让这个特殊字符显示为 fehrenhiet，即：37°F。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:43:56.643

只需将其复制并粘贴到代码中即可。

```
double temperature = 37.2f;
NSString *temperatureString = [NSString stringWithFormat:@"%.1f°F", temperature];
NSLog(@"%@", temperatureString); 
```

# ios - iOS 应用程序中 LaTex、MathML 和 XHTMLMathML 之间的权衡？

> ID：13243539
> 
> 赞同：6
> 
> 时间：2012-11-06T02:37:54.487
> 
> 标签：ios, xhtml, tex, mathml

我计划使用 Xcode 为 iPhone 制作一个应用程序，显示高中和大学生经常使用的数学方程式。我用 Mathematica 做所有的数学运算，它允许我以三种相关格式保存这些方程。(1) 乳胶(.tex)；(2) MathML (.mml)；(3) XHTMLMathML。

Mathematica 文档说第三种格式是带有嵌入式 MathML 的 XHTML。我发现[这个浏览器测试](https://vismor.com/download/Documents/Site_Implementation/Webkit_MathML_Torture_Test/mathml_torture_test_ios.pdf)中的一些示例在我的 iPhone 上看起来不太好。所以我可能不会完全依赖 MathML。

我是 Xcode 和我上面提到的三种文件格式的初学者，但我对 C++ 中的 OOP 有一些经验。假设 Mathematica 可以很好地编写任何方程所需的 LaTeX、MathML、XHHTMLMathML，这三种文件格式之间的权衡是什么？我可以在同一个应用程序中混合格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T21:49:17.790

我建议使用 HTML。包含数学内容的“正确”方式是 MathML——它是 HTML5 的一部分（但使用 TeX 见下文）。

iOS 的 UIwebview 是基于 webkit 的，因此具有相同的部分 MathML 支持（尽管在 iOS5 上由于字体错误而明显更糟）所以我也建议使用[MathJax](http://www.mathjax.org)（免责声明：我是 MathJax 的一部分）。

MathJax 是一个开源的 javascript 库，它可以理解 TeX 和 Asciimath 输入，将其中之一转换为 MathML 并将 MathML 呈现为 HTML-CSS 或 SVG（在任何现代浏览器中）。

MathJax 混合这些输入格式没有问题。此外，它比 webkit 具有更好的 MathML 支持（如果您愿意，您可以随时配置 MathJax 以使用本机 MathML 支持——比如当您知道您的内容应该在 webkits 本机支持中呈现良好时）。

为了帮助您入门，您可以查看[这个开源应用程序](http://code.google.com/p/mathjax-ios/)，了解如何将 MathJax 集成到 iOS 应用程序中。

# c# - 如何将参数传递给通过 html 按钮的 onclick 属性调用的 ASP.NET MVC 3 控制器？

> ID：13243548
> 
> 赞同：0
> 
> 时间：2012-11-06T02:39:16.853
> 
> 标签：c#, asp.net-mvc-3

我有以下查看代码（ASP：NET MVC 3）：

```
@using(Html.BeginForm()){
@Html.ValidationSummary(true)
<table>
    <tr>
        <th>
            City
        </th>
        <th>
            Hotel
        </th>
        <th>
            Room name
        </th>
        <th>
            Number of beds
        </th>
        <th>
            Price per night
        </th>

        <th></th>
    </tr>

    <tr>
        <td>
            @Html.DisplayFor(x=>Model.SelectedRoom.Hotel.City.Name)
        </td>
        <td>
            @Html.DisplayFor(x => Model.SelectedRoom.Hotel.Name)
        </td>
        <td>
            @Html.DisplayFor(x => Model.SelectedRoom.Name)
        </td>
        <td>
            @Html.DisplayFor(x => Model.SelectedRoom.NumberOfBeds)
        </td>
        <td>
            @Html.DisplayFor(x => Model.SelectedRoom.PricePerNight)
        </td>

    </tr>
</table>
            <input type="hidden" name="RoomID" value="@Model.SelectedRoom.RoomID" id="RoomID" />
            <br />
            <br />
            <p>
                From: @Html.TextBoxFor(m=>m.DateOne, new {@class="datepicker1", @readonly="readonly" }) 
                @Html.ValidationMessageFor(m=>m.DateOne)

                To: @Html.TextBoxFor(m => m.DateTwo, new { @class = "datepicker2", @readonly = "readonly" })
                @Html.ValidationMessageFor(m=>m.DateTwo)

            </p>
            <p>
                Total cost : @Html.TextBoxFor(m=>m.TotalCost, new {@class="TotalAmount", @readonly="readonly" })
            </p>
              <br />
           <input type="button" id="Reserve" value="Confirm" onclick = "window.location.href='/Home/MakeReservation'+@Model" />
    } 
```

这是我对此视图的模型定义：

```
public class MakeReservationViewModel
    {
        BusinessLogic bl;

        public MakeReservationViewModel() 
        {
            bl = new BusinessLogic();
        }

        public Room SelectedRoom { get; set; }

        [Required(ErrorMessage="Please select a starting date")]
        public DateTime DateOne { get; set; }

        [Required(ErrorMessage = "Please select an ending date")]  
        public DateTime DateTwo { get; set; }

        public decimal TotalCost { get; set; }
    } 
```

**如何****通过单击按钮并将其 onclick 属性正确设置为 MakeReservation 从上面的视图中调用 ** ***MakeReservation控制器操作？**** 这是我的控制器：*

 *```
[HttpPost]
    public ViewResult MakeReservation(MakeReservationViewModel mrvm)
    {
        if (ModelState.IsValid)
        {

        }

        return View();
    } 
```

这是我的错误：对象引用未设置为对象的实例。在这条线上： **如何让模型接受隐藏场？**

解决了。我补充说：

```
@Html.TextBoxFor(m => m.SelectedRoom.RoomID, new {@class="RoomID", @hidden="hidden" }) 
```

而不是以前使用非强类型属性的方式。*

# mysql - 我正在尝试使用 MySQL NOT IN 命令，但无济于事，有人能指出我的语法错误吗？

> ID：13243552
> 
> 赞同：0
> 
> 时间：2012-11-06T02:39:33.637
> 
> 标签：mysql, sql

```
(SELECT s
FROM enrolls
WHERE s)
NOT IN
(SELECT s
FROM likes
WHERE s); 
```

我有两个表，`enrolls`和`likes`，我试图从登记中找到 s，其中所有 s`likes`和共有的元组`enrolls`都被删除（或者`enrolls - likes`，基本上）。

但是，我收到以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“NOT IN (SELECT s FROM likes WHERE s)”附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:41:06.913

第一组括号不正确地拆分您的`s NOT IN`子句：

```
SELECT s
FROM enrolls
WHERE s NOT IN
    (
    SELECT s
    FROM likes
    WHERE s
    ) 
```

# java - 如何在 String Java 中用 3 个或更多字符查找和替换 3 个或更多字符？

> ID：13243554
> 
> 赞同：0
> 
> 时间：2012-11-06T02:39:49.063
> 
> 标签：java, string, replace, sequence, stringbuilder

我需要检查该行是否包含必须消除的字符串并指出哪些符号将被消除。*如果有三个或更多具有相同符号的连续字符，则*
字符序列将替换为下划线 (" ")，并根据序列长度进行替换。*例如，行“* , _, @, @, @, @, $, $, *, #, #,!” 将被转换为“* , _, _, _, _, _, _, $, $, _, #, #,!” 经过消除的过程。
我只需要使用 String 或 StringBuilder、Regex 等来执行此操作...（仅 Java 的基本编码）。
也不能使用数组。提前致谢。
这是我尝试过的：

```
public static void main(String[] args) {    
    String linha = "##,$$$$,%%%%,@%@@@,!!!!", validos = "$#%!@";        
        for (int i = 0; i < validos.length(); i++) {
            linha = linha.replaceAll("\\" + validos.charAt(i) + "{3,}", "_");
        }
        System.out.println (linha);
    }
} 
```

这里的问题是只用一个“_”替换一个序列，我不知道哪些字符被替换了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:06:10.880

如果你试图一次替换三个字符，而你想要三个下划线，那么你就错过了这个：

```
linha = linha.replaceAll("\\" + validos.charAt(i) + "{3,}", "___"); 
```

如果您希望它们用逗号分隔：

```
linha = linha.replaceAll("\\" + validos.charAt(i) + "{3,}", "_,_,_"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:07:59.667

还没有真正实现这一点，但这是您可能会看到的：

在 Matcher 中，有`find(int start)`,`start()`和`end()`

有一个“3个或更多重复字符”的模式（您可以参考您问题中的评论）。

伪代码是这样的：

```
int lastEndingPosition = 0;
StringBuilder sb;

while (matcher can find next group) {
  // add the unmatched part
  sb.append( substring of input string from lastEndingPosition to matcher.start() ); 

  // add the matched part
  sb.append( "-" for matcher.end() - matcher.start() times);
  lastEndingPosition = matcher.end();
}
sb.append( substring of input string from lastEndingPosition to the end); 
```

可能有一些更优雅的方法可以做到这一点。这只是一种选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T04:18:23.740

当然，您可以通过多种方式做到这一点，而且这可能是您自己做的一个很好的练习。在这里，您有一个仅使用基本循环结构的基本实现，没有什么像 StringUtils 库那样花哨的东西......请注意，您之前的循环实现会错过多次出现在不同位置重复的相同字符`linha`。

```
static int index(String lookInStr, char lookUpChr) {
    return lookInStr.indexOf(new String(new char[] { lookUpChr, lookUpChr, lookUpChr }));
}

public static void main(String[] args) {
    String linha = "####,@@@@@@@@,$$$$,%%%%,@%@@@,!!!!", validos = "$#%!@";
    for (int i = 0; i < validos.length(); i++) {
        char currentSearchChar = validos.charAt(i);
        do {
            int index = index(linha, currentSearchChar);
            if (index >= 0) {
                int count = -1;
                do {
                    count++;
                } while (linha.charAt(count + index) == currentSearchChar && count + index < linha.length() - 1);
                String replacementSeq = "";
                for (int j = 0; j < count; j++) {
                    replacementSeq += "-";
                }
                linha = linha.replaceAll("\\" + validos.charAt(i) + "{" + count + ",}", replacementSeq);
            }
        } while (index(linha, currentSearchChar) >= 0);
    }
    System.out.println(linha);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T04:41:07.313

基本上，这会将字符串拆分为单独的块，然后检查块的长度并返回原始块，或者用下划线替换它。

```
static String convert(String s) {
    StringBuilder sb = new StringBuilder();

    for(int i = 0; i < s.length(); i++) {
        char c = s.charAt(i);
        StringBuilder tempSb = new StringBuilder();

        for(; i < s.length(); i++) {
            char d = s.charAt(i);

            if(d != c) {
                i--;
                break;
            } else {
                tempSb.append(d);
            }
        }

        String t = tempSb.toString();
        if(t.length() < 3) {
            sb.append(t);
        } else {
            sb.append(repeat("_", t.length()));
        }
    }

    return sb.toString();
}

public static void main(String[] args) {
    String x = convert("##,$$$$,%%%%,@%@@@,!!!!");
    System.out.println(x); // ##,____,____,@%___,____
} 
```

这是简单的重复方法：

```
static String repeat(String s, int repeatCount) {
    StringBuilder sb = new StringBuilder();

    for(int i = 0; i < repeatCount; i++) {
        sb.append(s);
    }

    return sb.toString();
} 
```

# c - 在 C 中通过引用传递双精度数组：总线错误 10

> ID：13243555
> 
> 赞同：0
> 
> 时间：2012-11-06T02:39:52.153
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h>

void setZero (double **, int);

int main (void) {
        double *ptr = NULL;
        int i, size = 3;
        ptr = (double *)malloc(size * sizeof(double));
//*
        setZero(&ptr, size);
/*/
        // Sanity test
        for ( i = 0 ; i < size ; ++i ) {
                printf("index %d/%d\n", i, (size-1));
                ptr[i] = 0;  // NOT EXPLODING...
        }
//*/
        free(ptr);
        return 0;
}

void setZero (double **_ref_array, int _size) {
    int i;

    for ( i = 0 ; i < _size; ++i ) {
        printf("index %d/%d\n", i, (_size-1));
        *_ref_array[i] = 0;  // EXPLODING...
    }
} 
```

1）为什么这不起作用？

2) 什么是“总线错误 10”

*PS我知道最好不要以这种方式初始化数组，但这恰好是一个我不理解的基本概念的简单而干净的例子......*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:48:32.893

取消引用发生在索引之后。IE

这表示“获取索引'i'处的双*指针*，然后将值0设置为该指针内地址处的内存。”

```
*_ref_array[i] = 0; 
```

这表示“从 _ref_array 获取双精度数组的地址，而不是通过 i-doubles 索引该地址。

```
(*_ref_array)[i] = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T02:56:40.453

在给出的代码表面上，您不需要将指针的地址传递给函数。你应该使用：

```
void setZero(double *ptr, int size)
{
    for (int i = 0; i < size; i++)
        ptr[i] = 0.0;
} 
```

和：

```
setZero(ptr, size); 
```

[正如WhozCraig](https://stackoverflow.com/users/1322972/whozcraig)所说，您遇到的麻烦是：

```
*_array_ref[i] 
```

被解释为：

```
*(_array_ref[i]) 
```

代替：

```
(*_array_ref)[i] 
```

如您所愿。前者是在践踏堆栈；后者正在初始化分配的内存。

如果您确实必须将指针传递给指向函数的指针，那么您可以将括号括在取消引用周围，或者您可以分配一个本地指针并正常使用它，直到您需要使用双精度用于更改调用函数中的值的指针。

```
void setZero(double **ptr, int size)
{
    double *base = *ptr;
    for (int i = 0; i < size; i++)
    {
        base[i] = 0.0;
        // Or: (*ptr)[i] = 0.0;
    }
    ...presumably some code here needs to assign to *ptr...
    ...if there is no such code, there is no need of the double pointer...
} 
```

# javascript - 添加新行时出现 javascript / HTML 页面格式问题

> ID：13243557
> 
> 赞同：0
> 
> 时间：2012-11-06T02:40:02.390
> 
> 标签：javascript, html

我正在制作一个动态表格来计算一些数据，但我被卡住了......

我有两个问题：

1.  在 firefox/chrome 中添加新行时，它会破坏 HTML PAGE 布局
2.  在 firefox/chrome 中时，它不会从下拉列表中提取值

请帮忙解决

```
 <table class="center font-1 top-3" width="100%">
    <tr>
        <td bgcolor="#808080" align="center"><font color="#FFFFFF">
            <b>DEVICE</b></font></td>
        <td bgcolor="#808080" align="center"><font color="#FFFFFF">
            <b>SERVICE</b></font></td>
        <td bgcolor="#808080" align="center">
            <p align="center"><font color="#FFFFFF"><b>QUANTITY</b></font></p>
        </td>
        <td bgcolor="#808080" align="center"><font color="#FFFFFF">
            <b>PRICE</b></font></td>
    </tr>
    <?php
    for ($i = 1; $i < 21; $i++) {
        $rowStyle ='';// = ($i == 1) ? "" : "style=\"display:none\"";
        ?>
        <tr id="tableRow<?php echo $i; ?>" <?php echo $rowStyle; ?> >
            <td align="center">
                <select size="1" id="Devicerow<?php echo $i; ?>" onchange="JavaScript: calculateRow(<?php echo $i; ?>)">
                    <option selected>External</option>
                    <option>Internal</option>
                    <option>Personal</option>
                </select> </td>
            <td align="center">
                <select size="1" id="Planrow<?php echo $i; ?>" onchange="JavaScript: calculateRow(<?php echo $i; ?>)">
                    <option selected>0 ($35.95)</option>
                    <option>1  ($29.95)</option>
                    <option>2  ($19.95)</option>
                    <option>3 ($17.95)</option>
                    <option>4 ($15.95)</option>
                    <option>5  ($12.95)</option>
                    <option>6 ($7.95)</option>
                </select></td>
            <td align="center">
                <select size="1" id="Qtyrow<?php echo $i; ?>" onchange="JavaScript: calculateRow(<?php echo $i; ?>)">
                    <option selected>0</option>
                    <?php
                    for ($c = 1; $c < 20; $c++) {
                        echo '<option>' . $c . '</option>';
                    }
                    ?>

                </select></td>
            <td align="center">
                <div id="Totalrow<?php echo $i; ?>">
                    $0</div>
            </td>
        </tr>
        <?php
    }
    ?>
      </table>

    <table class="center font-1 top-3" width="100%">
    <tr>
        <td colspan="4">
            <p align="right"><a  onClick="JavaScript: addRow()"><img border="0" src="images/add_row_button.png"></a></p>
        </td>
    </tr>                            
    <tr>
        <td colspan="3" bgcolor="#F2F2F2"><b>One Time Devices Price</b></td>
        <td align="center" bgcolor="#F2F2F2">
            <div id="totalDevicePrice">
                $0</div>
        </td>
    </tr>
    <tr>
        <td colspan="3"><b>Monthly Service Cost</b></td>
        <td align="center">
            <div id="totalServiceCost">
                $0</div>
        </td>
    </tr>
    <tr>
        <td colspan="3" bgcolor="#F2F2F2"><b>Grad Total</b></td>
        <td align="center" bgcolor="#F2F2F2">
            <div id="grandTotal">
                $0</div>
        </td>
    </tr>
    </table>

    <script>
    var rows=2;    //start with 2 since 1 is not hidden

    function addRow(){                                    
        document.getElementById("tableRow"+rows).style.display="block";
        rows=rows+1;                                        
    }

    //price and service cost estimator
    function getDataForDropdown(pref, num){                            
        colName = (pref+''+num);
        var columnName = document.getElementsByName(colName)[0].value;
        if ( columnName == null || columnName == '' )
        {
            columnName = document.getElementById(colName).value;
        }

        if ( columnName == null || columnName == '' )
        {
            var select = document.getElementById(colName);
            columnName= select.options[select.selectedIndex].value;
            if ( columnName == null || columnName == '' )
            {
                columnName= select.options[select.selectedIndex].text;
            }
        }  
        return columnName;  
    }

    var all_markers = {}; //hash map to hold markers
    all_markers['External']=250;
    all_markers['Internal']=295;
    all_markers['Personal']=200;

    var totalRows=20; //should be the same amount of rows as in the the php loop 

    function calculateRow(row){
        var  totalDevPrice=0;
        var  totalServicePrice=0;

        for (i=1; i<totalRows;i++){
            qty= getDataForDropdown('Qtyrow', i);
            plan= getDataForDropdown('Planrow', i).split('$')[1].split(')')[0];
            device = getDataForDropdown('Devicerow', i);
            devprice = all_markers[device];

            totalDevPrice+=(qty * devprice);
            totalServicePrice+=(qty * plan);
            document.getElementById("Totalrow"+i).innerHTML= '$'+((qty*plan)+(qty*devprice));
        }

        document.getElementById("totalDevicePrice").innerHTML= '$'+totalDevPrice;
        document.getElementById("totalServiceCost").innerHTML= '$'+(totalServicePrice);
        document.getElementById("grandTotal").innerHTML= '$'+(totalDevPrice+totalServicePrice);

    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:22:32.447

问题解决了。

不知何故，“阻止”没有做正确的工作。

前：

```
 function addRow(){                                    
        document.getElementById("tableRow"+rows).style.display="block";
        rows=rows+1;                                        
    } 
```

在职的：

```
 function addRow(){                                    
        document.getElementById("tableRow"+rows).style.display='';
        rows=rows+1;                                        
    } 
```

# jquery - 无法选择内部带有“img 标签”的“a 标签”来运行 AJAX 功能

> ID：13243560
> 
> 赞同：0
> 
> 时间：2012-11-06T02:40:30.033
> 
> 标签：jquery, ajax, image, anchor, selector

我正在运行一个调用外部页面的 ajax 函数，但无法选择其中包含图像的锚标记。该功能在它是纯文本时起作用，但一旦里面有图像，它就会停止运行（除非在图像外部但在锚标记内单击时）。

html是这样的。

```
 <div id="add_content">
        <a href="page_1.html"> Text works fine</a>
        <a href="page_2.html"><img src="thumbnail.jpg"/>Image doesn't work</a>
    </div>

    <div id="insert_here"> </div> 
```

一个示例外部页面是

```
 <div id="thumbnails">
        <img src="images/1.jpg"/>
        <img src="images/2.jpg"/>
        <img src="images/3.jpg"/>
    </div> 
```

我正在运行的脚本是

```
 $(document).ready(function (){
            $('#add_content a').click(function(e){
                e.preventDefault();
                $('#insert_here').load(e.target.href + '#thumbnails').hide().delay(100).fadeIn(500);
            });
       }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T02:44:20.030

更改`e.target.href`为`this.href`：

```
$('#insert_here').load(this.href + '#thumbnails').hide().delay(100).fadeIn(500); 
```

如果您单击子图像，`e.target`则将是该图像，并且该图像没有`href`属性。单击事件绑定到锚点，因此在单击处理程序`this`中将是被单击的锚点。

您当前的代码“在图像外部但在锚标记内单击时”起作用的原因是因为在这种情况下`e.target`是锚本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:44:11.417

在 id 选择器之前放置一个空格，以便该行显示：

```
$('#insert_here').load(e.target.href + ' #thumbnails') 
```

# wpf - .wmv 视频未在 Windows 8 中的 WPF MediaElement 控件中播放

> ID：13243562
> 
> 赞同：3
> 
> 时间：2012-11-06T02:40:31.873
> 
> 标签：wpf, video, windows-8, mediaelement

我无法在 Windows 8 机器上使用 WPF MediaElement 播放视频。由于 MediaElement 控件依赖于 Windows Media Player，因此我尝试在 WMP 中播放我的 Win 8 盒子上的视频并且播放正常，因此它似乎不是编解码器问题。我目前的理论是它与 WMP 有关，而不是我需要对代码进行更改。任何帮助将不胜感激！

这是我模拟的一个测试应用程序，它也有问题；它在 Windows 7 上工作得很好（加载一个当你点击它时播放的黑屏），但在 win 8 中没有做任何事情（没有交互的白屏）。在得出结论之前，我已经尝试了几种不同的加载视频的方法，这可能与我的做法无关，这段代码只是最后一次修订。如果您想自己查看问题（实际上，只要知道它是否只是我的 Windows 8 机器会很有帮助），它是一个非常小的 WPF 应用程序，任何 WMV 都应该可以工作。

C＃：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        bool opened = false;
        var mre = new ManualResetEvent(false);

        currentMediaElement.BeginInit();
        currentMediaElement.Source = new Uri("Video.wmv", UriKind.RelativeOrAbsolute);
        currentMediaElement.EndInit();
        currentMediaElement.LoadedBehavior = currentMediaElement.UnloadedBehavior = MediaState.Manual;
        currentMediaElement.MediaOpened += delegate
        {

            opened = true;
            mre.Set();
        };
        currentMediaElement.Stop();

        mre.WaitOne(5000);
    }

    private void currentMediaElement_MouseDown(object sender, MouseButtonEventArgs e)
    {
        currentMediaElement.Play();
    }
} 
```

XAML：

```
<Window x:Class="TestApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>
        <MediaElement Name="currentMediaElement" MouseDown="currentMediaElement_MouseDown"></MediaElement>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T06:43:29.533

事实证明，要么是我公司使用的 Windows 8 映像，要么是他们使用远程桌面连接进行测试。如果您遇到此问题，我建议您尝试更改测试环境！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-04T17:09:42.990

如果您的 MediaElement 仍然无法根据上述建议工作。我通过更新我的 NVDIA 驱动程序让 MediaElement 正常工作，更新 NVDIA 驱动程序然后重新启动并让我的 .wmv 视频再次正常工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-14T14:38:51.130

*与Windows 8.1*有同样的问题。我在网上搜索了几个小时，但无济于事。我偶然发现了这个*StackOverflow*问题，还有这篇文章：[https ://social.msdn.microsoft.com/Forums/en-US/d859208a-0fe9-41d2-b3b2-3ce3a0527c0f/wpf-media-element-is-not-在 xp 中播放视频，但在 vista 中播放？forum=wpf](https://social.msdn.microsoft.com/Forums/en-US/d859208a-0fe9-41d2-b3b2-3ce3a0527c0f/wpf-media-element-is-not-playing-videos-in-xp-but-it-is-playing-in-vista?forum=wpf)

### 引用（强调）：

> ...只有当目标机器**安装了***Windows Media Player 10*或更高 版本时，*MediaElement*和*MediaPlayer*才能正常工作。

 ****那在某处点亮了一个灯泡。我通过转到`Programs and Features`[ *[appwiz.cpl](https://support.microsoft.com/en-us/kb/192806)* ]解决了这个问题`>` `Turn Windows features on or off`，然后在*Media Features*文件夹下启用了*Windows Media Player 。*

 **MediaElement*组件现在实际上正在播放视频，因为它应该（无需重新启动）。*****

# javascript - 从 textarea 执行 javascript

> ID：13243563
> 
> 赞同：9
> 
> 时间：2012-11-06T02:40:36.027
> 
> 标签：javascript, html, canvas, textarea

我不完全确定这是否可能，但我正在尝试在页面上运行 javascript 的浏览器中创建一个迷你人造编辑器。这是我在理论上一直在尝试做的事情

HTML

```
​&lt;textarea id="cnsl"></textarea>
<button onclick="run()"> run </button> 
```

javascript

```
var cnsl = document.getElementById('cnsl');

function run() {
    return cnsl.value
} 
```

更具体地说，我正在尝试通过在文本区域中键入的“代码”写入画布元素，例如，如果我键入 ctx.fillRect(10,10,10,10); 进入我的文本区域，然后执行 run() 函数，10x10 的正方形将出现在我的画布中。

当我没有返回 cnsl.value 而是将其写入 HTML 中空脚本元素的 innerHTML 时，我有点幸运。但这只会在我第一次执行该功能时起作用，然后在我刷新页面之前不会再次起作用。（例如：http: [//jsfiddle.net/ur5KC/1/](http://jsfiddle.net/ur5KC/1/)这似乎不适用于 jsfiddle，但正如我上面描述的那样在本地工作）

...有任何想法吗？？？提前谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-06T03:10:55.073

您可以创建一个脚本元素，将其[文本](http://dev.w3.org/html5/spec/single-page.html#dom-script-text)（或[textContent](http://dev.w3.org/html5/spec/single-page.html#textcontent)，如果 HTML5 和 DOM 3 兼容）设置为要执行的脚本，然后将其插入到文档中。最好在使用时删除元素，这样您就不会得到大量（无用的）脚本元素。

```
function run() {
    var el = document.getElementById('cnsl');
    var scriptText = el.value;
    var oldScript = document.getElementById('scriptContainer');
    var newScript;

    if (oldScript) {
      oldScript.parentNode.removeChild(oldScript);
    }

    newScript = document.createElement('script');
    newScript.id = 'scriptContainer';
    newScript.text = el.value;
    document.body.appendChild(newScript);
} 
```

请注意，您必须创建一个新元素，因为在 HTML5 中，每个[脚本元素](http://dev.w3.org/html5/spec/single-page.html#the-script-element)都有一个关联的标志来指示它是否已被执行并且只能执行一次。替换内容不会重置标志，并且克隆的脚本元素会保留克隆它的元素的设置。

一些HTML：

```
<textarea id="cnsl"></textarea>
<button onclick="run();">run</button> 
```

鼓励用户执行他们自己的脚本可能会破坏文档，但我猜这是你的问题。:-)

另一种方法是简单地[`eval`](http://ecma-international.org/ecma-262/5.1/#sec-10.4.2)输入任何内容，它或多或少等同于上述内容（但代码要少得多）：

```
function run() {
  var el = document.getElementById('cnsl');
  el && eval(el.value);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T03:21:17.707

谢谢@Prodigy && @JayC !!!

这么简单的解决方案，我不知道有这样的功能:)

使用 eval() 函数成功了！！！

HTML

```
<textarea id="cnsl"></textarea>
<button onclick="run()"> run </button>
<canvas id="canvas" width="200" height="200"></canvas> 
```

javascript

```
var cnsl = document.getElementById('cnsl');

function run() {    
    return eval(cnsl.value); // << did the trick ;)
}

//canvas
var ctx;

function setup() {
    var canvas = document.getElementById('canvas');
        ctx = canvas.getContext('2d');
}
setup();​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T02:46:33.813

不确定这是否适用于 JavaScript，但它适用于其他语言，尝试将您的脚本导入到具有文本区域的脚本中，然后当您想在文本区域中执行操作时调用具有代码的导入脚本中的方法你想执行

# java - UriInfo 注入 - 未针对新请求进行更新

> ID：13243571
> 
> 赞同：3
> 
> 时间：2012-11-06T02:42:06.663
> 
> 标签：java, websphere, cxf, jax-rs

我无法从注入的 UriInfo 对象获取正确的绝对路径/基本路径。第一个请求的这些值是正确的，但后续请求仍显示与第一个请求相同的值。当请求在端口 (http/https) 或服务器名称 (ip/fqdn) 中不同时，这将成为一个问题。我将 IBM websphere v8.0 与 apache cxf 一起使用。

这种行为是故意的吗？或者我可以设置一些配置来为所有请求注入这个？

```
public Response getVal (@Context UriInfo uriInfo) {
uriInfo.getAbsolutePath()
} 
```

# c# - 为什么以下 WPF 命令不触发？

> ID：13243572
> 
> 赞同：0
> 
> 时间：2012-11-06T02:42:14.927
> 
> 标签：c#, .net, wpf, prism

C# 文件：

```
public partial class MainWindow : Window
{
    public DelegateCommand<ICollection<string>> TestCommand { get; set; }

    public ICollection<string> TestParameter
    {
        get
        {
            List<string> lstParams = new List<string>() { "test", "test2", "test3" };
            return lstParams;
        }
    }

    public MainWindow()
    {
        InitializeComponent();
        TestCommand = new DelegateCommand<ICollection<string>>(TestMethod);
    }

    private void TestMethod(ICollection<string> param)
    {
        if (param != null)
        {
            lblTest.Content = "Hit";
        }
    }
} 
```

.XAML 文件

```
<Window x:Class="WPFAttachedBehaviorTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:WPFAttachedBehaviorTest"
    Title="MainWindow" Height="350" Width="525" DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}">

<i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
        <i:InvokeCommandAction CommandParameter="{Binding Path=TestParameter}" Command="{Binding Path=TestCommand}" />
    </i:EventTrigger>
</i:Interaction.Triggers>
<Label x:Name="lblTest"></Label>
</Window> 
```

TestParameter getter 上的断点触发，但 TestMethod 永远不会触发。

我在输出窗口中看不到任何绑定错误（相反，如果我故意拼错 TestCommand2 它会抱怨 - 所以我想这是正确的）

这是使用 Prism DelegateCommand 和 Expression Blend InvokeCommandAction 行为

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:33:26.363

发现了问题......这是一个排序问题 - 我在 InitializeComponent() 之后分配了命令，导致 XAML 被处理（因此首先评估绑定表达式 - 此时 TestCommand 属性仍然为 NULL）

我的愚蠢的新手错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T03:03:37.297

我自己的实现也有类似的问题`ICommand`，原因是在`Execute()`命令的方法中，它错误地尝试将参数强制转换`T`为逆变方式。我不知道 Prism`DelegateCommand<T>`长什么样，但您可能想调试它的代码以找出答案。否则，我在您的代码中看不到任何错误。

# windows - NPM package.json 中与操作系统无关的 grunt 脚本命令

> ID：13243574
> 
> 赞同：7
> 
> 时间：2012-11-06T02:42:18.643
> 
> 标签：windows, npm, gruntjs

当命令`grunt`在与 grunt.js 文件相同路径的 Windows shell 中运行时，Windows 会选择使用 Windows 脚本宿主运行 grunt.js。[推荐的路径](https://stackoverflow.com/a/11176623/23501)是显式调用`grunt.cmd`.

这一切都很好，但如果我想在我的 NPM package.json 中创建一个独立于操作系统的脚本命令，我该怎么办？如果我还想在 *nix 中运行，我不能这样做：

```
"scripts": {
    "dox": "grunt.cmd dox"
} 
```

任何指针？或者，我是否遗漏了一大块拼图？（我对 NPM 和 Grunt 都同样陌生）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T04:40:20.183

我找到了创建一个`grunt.bat`只调用的文件的解决方案`grunt.cmd`：

```
@grunt.cmd %*

```

因此，在 Windows 上，仅调用`grunt`会触发批处理文件，因为它的优先级高于 Windows Scripting Host 的`grunt.js`. 在 Linux 上，常规`grunt`二进制文件被拾取。这对我来说是跨平台的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-25T15:49:48.110

我遇到了同样的问题：当`tslint.js`包的根目录中有文件并且在`package.json`just calls中有一个 npm 脚本时`tslint`，jscript 由 npm 而不是节点触发，导致“Microsoft JScript 编译错误”弹出窗口。

一种解决方法是`.JS`从`PATHEXT`环境变量中删除。

# python - 好奇django是如何实现ORM查询优化的

> ID：13243575
> 
> 赞同：2
> 
> 时间：2012-11-06T02:42:20.883
> 
> 标签：python, django

我不是 python 专家，我很好奇 django 如何优化以下查询

```
Model.objects.filter(field = 'abc')[0] 
```

不知何故，django 会智能地将 ' `limit 1`' 添加到 SQL 查询中，例如 ' `select * from model where field = 'abc' limit 1`'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:45:44.743

这是因为`Model.objects.filter(...)`它实际上并没有返回一个列表，它返回一个[查询集对象](https://docs.djangoproject.com/en/1.5/ref/models/querysets/)。当您这样做时`qset[0]`，它会调用查询`__getitem__`集上的方法，该方法会添加`limit 1`并执行它。这是[该方法的来源](https://github.com/django/django/blob/master/django/db/models/query.py#L173)；当结果已经被缓存或没有被缓存等等时，有各种情况的逻辑。

# mysql - 如何通过拖放字段绑定更改我已经在水晶报表设计器中使用向导连接的水晶报表的连接字符串

> ID：13243576
> 
> 赞同：0
> 
> 时间：2012-11-06T02:42:44.697
> 
> 标签：mysql, vb.net, crystal-reports, odbc, vb.net-2010

任何人都可以帮助我以编程方式仅更改水晶报告的连接字符串。我已经使用报表设计器向导中的基本拖放方法设计了一个报表，并且已经使用右侧面板工具绑定了字段，该面板工具已经从那里使用 ODBC 向导连接向导进行了连接。

我想要的是我可以编写可以更改连接字符串但字段绑定相同的代码。这种情况可以在我的系统中使用，可以很容易地移动到其他计算机并连接到具有相同数据库的数据库。它就像动态连接字符串，但拖放绑定仍然与新的连接字符串连接。同一个数据库。 .

我使用 MySQL 数据库、VB.NET 2010、Crystal Report for VB.Net 2010

谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:34:26.983

I am not sure that I can help you.
What I am doing is that I fill a datatable and apply it to the crystal Report. My example is kind of different, since I upload the rpt file dynamically.

```
 Dim cryRpt As New ReportDocument
   Dim strReportPath As String = Me.selectedNode.RptLocation & "\" & Me.selectedNode.ReportFile 'The path for the rpt file
   cryRpt.Load(strReportPath)
   cryRpt.SetDataSource(crData) 'crData is the datatable that I am filling with data corresponding to the fields for the Crystal Report.
   crvReport.ReportSource = cryRpt  'crvReport is a CrystalReportViewer)
   crvReport.Zoom(2) ' use 1 for page width, or 2 for full page 
```

I know that I am not helping you 100% but maybe you can find my answer as a little help. Sorry I don't have time to recreate your problem and try to solve it.

# python - 字典是字典 Python 中的一个键

> ID：13243577
> 
> 赞同：0
> 
> 时间：2012-11-06T02:42:51.797
> 
> 标签：python, hash, dictionary

我想要一个 O(1) 方法来检查我是否处于某种状态。问题在于，一个状态是由地图上几个 zoombinis 的位置定义的。Zoombini = {(1,1): 0, (2,2):1, (3,3):3} {Position: Zoombini ID} 我正在使用广度优先搜索并将这个位置字典推送到我的队列中.

```
dirs = [goNorth, goSouth, goWest, goEast] ## List of functions
zoom = {}
boulders = {}
visited = {} ## {(zoom{}): [{0,1,2},{int}]}
             ## {Map: [color, distance] 0 = white, 1 = gray, 2 = black
n = len(abyss)
for i in xrange(n):
    for j in xrange(n):
        if (abyss[i][j] == 'X'):
            boulders[(i,j)] = True
        elif (isInt(abyss[i][j])):
            zoom[(i,j)] = int(abyss[i][j])      ## invariant only 1 zomb can have this position
        elif (abyss[i][j] == '*'):
              exit = (i, j)
sQueue = Queue.Queue()
zombnum = 0
done = False
distance = 0
sQueue.put(zoom)
while not(sQueue.empty()):
    currZomMap = sQueue.get()
    for zom in currZomMap.iterkeys(): ## zoom {(i,j): 0}
        if not(zom == exit):
            z = currZomMap[zom]
            for fx in dirs: ## list of functions that returns resulting coordinate of going in some direction
                newPos = fx(zom)
                newZomMap = currZomMap.copy()
                del(newZomMap[zom]) ## Delete the old position
                newZomMap[newPos] = z ## Insert new Position
                if not(visited.has_key(newZomMap)):
                    sQueue.put(newZomMap) 
```

我的实现尚未完成，但我需要一种更好的方法来检查我是否已经访问过一个状态。我可以创建一个从字典中创建整数散列的函数，但我认为我不能有效地做到这一点。时间也是一个问题。我怎样才能以最佳方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:16:58.117

而不是构建一些脆弱的自定义哈希函数，我可能只使用一个`frozenset`：

```
>>> Z = {(1,1): 0, (2,2):1, (3,3):3}
>>> hash(Z)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'dict'
>>> frozenset(Z.items())
frozenset([((2, 2), 1), ((1, 1), 0), ((3, 3), 3)])
>>> hash(frozenset(Z.items()))
-4860320417062922210 
```

冻结集可以毫无问题地存储在集合和字典中。您也可以使用构建自的元组，`Z.items()`但您必须确保它始终以规范格式存储（例如首先对其进行排序。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:59:15.797

Python 不允许可变键，所以我最终创建了一个散列我的字典的函数。

编辑 -

```
def hashthatshit(dictionary):
result = 0
i =0
for key in dictionary.iterkeys():
    x = key[0]
    y = key[1]
    result+=x*10**i+y*10**(i+1)+\
             10**(i+2)*dictionary[key]
    i+=3
return result 
```

我使用了这个特定于我的实现的，这就是我最初没有包含它的原因。

# c++ - std::initializer_list<> 和参考参数

> ID：13243578
> 
> 赞同：5
> 
> 时间：2012-11-06T02:42:55.233
> 
> 标签：c++, c++11, min, initializer-list

我是使用初始化列表的新手，我想知道它们是否与其他 stl 容器类似。我的意思是他们复制价值观吗？我想要做的是一个简单的 min() 函数，如下所示：

```
template <class T> T& minArgs(const std::initializer_list<T&>& Arguments)
{
    const T* Smallest = Arguments.begin();
    for (const T* I = begin(Arguments); I != end(Arguments); ++I)
    {
        if (*I < *Smallest) Smallest = I;
    }
    return *Smallest;
} 
```

但是，当我调用该函数时，我从 GCC 得到了这个：

```
error: 'const' qualifiers cannot be applied to 'int&' 
```

我一直在玩这个，似乎 initializer_lists 可能无法满足我的要求；我希望该函数也能排除非 POD 参数。va_list 会是更好的选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:06:15.253

当我尝试它时，我得到了[这些错误](http://ideone.com/VyzSZH)。然而，当我摆脱你对引用的毫无意义的使用时，[一切都会奏效。](http://ideone.com/bxQMnQ)

`std::initializer_list`存储*值*，而不是引用。你应该服用a `const std::initializer_list<T> &`，而不是a `const std::initializer_list<T&> &`。

> 我要做的就是编写一个函数，该函数通过引用获取任意数量的参数，并返回对其中最大参数的引用。[...]这可能与initializer_lists吗？

No.`std::initializer_list`用于*values*，而不是 references。但我看不出你为什么不能按价值而不是按参考来获取这些项目。或者，更重要的是，你为什么不直接使用[`std::min`, 它可以带一个初始化列表](http://en.cppreference.com/w/cpp/algorithm/min)？

# javascript - JavaScript 更改 onmouseover 或 onmouseout 以调用不同的函数？

> ID：13243580
> 
> 赞同：0
> 
> 时间：2012-11-06T02:43:14.727
> 
> 标签：javascript, onmouseover, onmouseout

是否可以更改由现有`onmouseover`或`onmouseout`事件调用的函数？对于以下示例，我是否可以`ChangeItemAEvent`将“ItemA”`onmouseover`函数从更改`ChangeColor()`为`ChangeColorBack()`？目前我需要声明一个我觉得不优雅的全新函数，因为当我应该能够调用现有函数时我正在重复代码。

javascript:

```
function ChangeColor(elementid)
{
  document.getElementById(elementid).style.background = "Orange";
  document.getElementById(elementid).style.color = "Black";
}

function ChangeColorBack(elementid)
{
  document.getElementById(elementid).style.background = "Black";
  document.getElementById(elementid).style.color = "White";
}

function ChangeItemAEvent()
{
  document.getElementById("ItemA").onmouseover = function() {

    document.getElementById("ItemA").style.background = "Black";
  document.getElementById("ItemA").style.color = "White";

  };
} 
```

html:

```
<span id="ItemA" onmouseover="ChangeColor(this.id)">
<button id="ButtonB" onclick="ChangeItemAEvent()"> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:47:01.137

在 JavaScript 中而不是在标记中附加事件：

```
document.getElementById('ItemA').onmouseover = changeColorBack; 
```

请注意，大写的函数名称通常保留给构造函数作为约定。
然后在你的函数中使用`this`它指的是被调用的元素：

```
function changeColorBack() {
  this.style.background = "Black";
  this.style.color = "White";
} 
```

现在，您可以在任何元素上使用这些函数，只需将新函数分配给元素的事件或覆盖之前设置的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:50:16.320

另一种解决方案是创建一个`toggleColor(elementId)`函数：

```
function toggleColor(elementId) {
    if (this.style.color == "White") {
        this.style.background = "White";
        this.style.color = "Black";
    }else {
        this.style.background = "Black";
        this.style.color = "White";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T02:59:49.047

听起来您需要对注册事件的不同方法进行一些阅读。需要注意的是，在 JavaScript 中注册事件有 3 种不同的方法。这些在[https://developer.mozilla.org/en-US/docs/DOM/event](https://developer.mozilla.org/en-US/docs/DOM/event)中有详细说明。另请注意，许多不同的 JavaScript 框架通过提供自己的方法来以跨浏览器兼容的方式注册事件，从而增加了这一点。

在您的示例中设置此类事件的方法`<button id="ButtonB" onclick="ChangeItemAEvent()">`不是设置事件的推荐方法。也不是设置元素的`.onmouseover`或`.onclick`。

我建议阅读有关[Mozilla](https://developer.mozilla.org/en-US/docs/DOM/event)事件的链接，然后如果您已经在使用 JavaScript 框架，请阅读他们有关事件的文档。

另请注意，有一个[removeEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.removeEventListener)方法可能有用，也可能没用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T18:45:42.153

这对我有用：

```
 function overBtn(btncalling) {
            document.getElementById(btncalling).style.backgroundColor = '#507CD1';
            document.getElementById(btncalling).style.color = 'White';
    }

    function outBtn(btncalling) {
            document.getElementById(btncalling).style.backgroundColor = 'White';
            document.getElementById(btncalling).style.color = '#507CD1';
    } 
```

# java - 可定制的邮件服务器 - 我有哪些选择？

> ID：13243581
> 
> 赞同：0
> 
> 时间：2012-11-06T02:43:32.377
> 
> 标签：java, python, ruby, email, clojure

我有兴趣构建一个邮件服务，允许您将自定义逻辑合并到您的邮件服务器中。

例如，用户 A 可以回复 helloworld@mysite.com 一次，并且用户 A 到 helloworld@mysite.com 的后续电子邮件在采取某些操作之前不会通过。

我正在寻找简单且可定制的东西，最好是开源的。我精通大多数现代语言。

你们为此推荐什么电子邮件服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:03:37.607

几乎每个邮件服务器都具有某种形式的可扩展性，您可以在其中在邮件流过程中插入逻辑，这就是一些垃圾邮件过滤器在直接内置到服务器之前实现的方式。就个人而言，我使用具有各种点和 API 来扩展它的 Exchange 服务器，例如 SMTP 接收器。

但是，这个问题是题外话，不应该出现在 StackOverflow 上。

我建议你建立自己的服务器——实现一个服务器端版本的 SMTP 和 IMAP 可以由一个人完成，或者使用现有的库，如果你花几个小时的话，应该不会超过一年每天。

# jquery - asp.net-mvc jquery 添加多个部分视图

> ID：13243582
> 
> 赞同：0
> 
> 时间：2012-11-06T02:43:42.547
> 
> 标签：jquery, asp.net-mvc, partial-views

我的问题对我来说似乎很常见，我以为我可以在网上找到答案，但我找不到。

我有一个下拉列表，根据选择的值，我需要有多个部分视图。（一个选项可以没有，另一个选项有 3 个，等等）

我有一个获取“DriveDetail”对象的部分视图，我需要使用 JQuery 动态加载多个这些部分视图。

到目前为止，我有：

```
 $.ajax({
        url: "TestInput/getTestStationInformation2/" + testStation,
        dataType: "json",
        type: 'post',
        success: function (data) {
            for (var i = 0; i < data.length; i++) {
                $('#driveDetailDiv').append(data[i]);
            }
        }
    }); 
```

我可以返回 IEnumerable 或这些驱动器的列表。

```
public JsonResult getTestStationInformation(long id)
{
    IEnumerable<DriveDetails> aa = repository.listDriveInfo(id);
    return Json(aa);
}

public JsonResult getTestStationInformation2(long id)
{
    List<PartialViewResult> res = new List<PartialViewResult>();
    List<DriveDetails> aa = repository.listDriveInfo(id).ToList();
    for (int i = 0; i < aa.Count(); i++)
    {
        res.Add(PartialView("DriveDetailsPartial", aa[i]));
    }

    return Json(res);
} 
```

但这些都不起作用。

我有：

```
$.get('<%= Url.Action("Details","TestInput", null) %>', function (tmp) {
    $('#driveDetailDiv').append(tmp);
}); 
```

在我的代码中，但不是 null，而是我需要发送数据 [0]，并获取数据 [0] 的部分视图。但我不知道如何发送数据[0]。当我尝试

```
 new {id = data[0]) 
```

我收到一个错误，当我尝试使用返回 PartialViews 列表的第二个 Action 时，当我尝试附加它们时它不会显示。

# azure - 如何始终向 Microsoft azure 上托管的网站发出 https 请求

> ID：13243585
> 
> 赞同：0
> 
> 时间：2012-11-06T02:43:58.377
> 
> 标签：azure

当我对 azure 上托管的网站发出“http://xyz.com”请求时，出现“504 网关”错误。但是，如果我对同一网站发出“https://xyz.com”请求，我会得到该网页。即使有人忘记执行 https，我如何始终为此 URL 执行 https 请求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:03:07.560

在 StackOverflow 中找到这个在 [asp.net 中强制 https 为整个站点的最佳方式？](https://stackoverflow.com/questions/47089/best-way-in-asp-net-to-force-https-for-an-entire-site)

而且我认为 URL Rewrite 或 Http Module 也可能会有所帮助。

# python - 查找由 Fraction 类组装的列表项的索引

> ID：13243586
> 
> 赞同：0
> 
> 时间：2012-11-06T02:44:00.593
> 
> 标签：python

我试图在我的列表中找到指定元素的索引，例如，它是由带有分数的 xrange 生成的。

```
>> print lst
[Fraction(1, 8), Fraction(1, 7), Fraction(1, 6), Fraction(1, 5), Fraction(1, 4),          Fraction(2, 7), Fraction(1, 3), Fraction(3, 8), Fraction(2, 5), Fraction(3, 7), Fraction(1,   2), Fraction(4, 7), Fraction(3, 5), Fraction(5, 8), Fraction(2, 3), Fraction(5, 7), Fraction(3, 4), Fraction(4, 5), Fraction(5, 6), Fraction(6, 7), Fraction(7, 8)] 
```

我一直在尝试一切。为什么这不起作用。

```
lst.index(1,6) 
```

或者

```
lst.index( Fraction(1,6) ) 
```

我已经尝试了更多，但我总是得到

```
print lst.index(Fraction(1,6))
ValueError: Fraction(1, 6) is not in list 
```

有什么建议吗？

有关我如何创建列表的更多信息：

```
for d in xrange(1,limit+1):
        for n in xrange(1,limit+1):
                x = Fraction(n,d)
                lst.append(x) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:48:37.947

对我来说似乎很好......

```
>>> from fractions import Fraction
>>> d = [Fraction(1, 8), Fraction(1, 7), Fraction(1, 6), Fraction(1, 5), Fraction(1, 4),          Fraction(2, 7), Fraction(1, 3), Fraction(3, 8), Fraction(2, 5) , Fraction(3, 7), Fraction(1,   2), Fraction(4, 7), Fraction(3, 5), Fraction(5, 8), Fraction(2, 3), Fraction(5, 7), Fraction(3, 4), Fraction(4, 5), Fraction(5,6), Fraction(6, 7), Fraction(7, 8)]
>>> d.index(Fraction(1,6))
2 
```

# haskell - 阴谋集团地狱安装阴谋集团涅盘？

> ID：13243587
> 
> 赞同：0
> 
> 时间：2012-11-06T02:44:03.433
> 
> 标签：haskell, cabal, cabal-install

我正在尝试在 OSX 10.7.5 上安装 cabal-nirvana，但得到以下输出：

```
cabal install cabal-nirvana
Resolving dependencies...
Downloading cabal-nirvana-0.2.2...
Configuring cabal-nirvana-0.2.2...
Building cabal-nirvana-0.2.2...
Preprocessing executable 'cabal-nirvana' for cabal-nirvana-0.2.2...
<command line>: cannot satisfy -package-id HTTP-4000.2.3-c26f702c170ca487dfea54c2f3d6d4c0
    (use -v for more information)
cabal: Error: some packages failed to install:
cabal-nirvana-0.2.2 failed during the building phase. The exception was:
ExitFailure 1 
```

有任何想法吗？

如果有帮助，ghc: 7.4.1 cabal-install: 0.14.0

当我进行 ghc-pkg 检查时，我得到以下输出：

```
WARNING: cache is out of date: /Library/Frameworks/GHC.framework/Versions/7.4.1-    i386/usr/lib/ghc-7.4.1/package.conf.d/package.cache
  use 'ghc-pkg recache' to fix.
Warning: haddock-interfaces: /Library/Haskell/ghc-7.4.1/lib/GLUT-2.1.2.1/doc/html/GLUT.haddock doesn't exist or isn't a file
Warning: haddock-interfaces: /Library/Haskell/ghc-7.4.1/lib/haskell-platform-2012.2.0.0/doc/html/haskell-platform.haddock doesn't exist or isn't a file
Warning: haddock-html: /Library/Haskell/ghc-7.4.1/lib/haskell-platform-2012.2.0.0/doc/html doesn't exist or isn't a directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:31:54.440

没关系......我做了'ghc-pkg recache'和'sudo cabal update cabal-install'，然后我能够毫无问题地安装cabal-nirvana......这里的关键字似乎是'sudo'.. . 哦！

...我所说的“Nevermind”并不是指 Nirvana 专辑 :)

# php - 打开图表西班牙语

> ID：13243593
> 
> 赞同：1
> 
> 时间：2012-11-06T02:45:04.260
> 
> 标签：php, facebook-opengraph

大家好，我有一个简单的问题，我正在开发一个新应用程序，我想使用 Open Graph Actions、Objects 和 Aggregations，我正在开发的 Tha 应用程序是西班牙语的，所以我可以使用这种语言提交吗？或者我需要使用 Localize 进行翻译？

谢谢提前！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:46:46.560

是的，你可以这样做

```
 <meta property="og:locale:alternate" content="es_ES" /> 
```

源 [**开放图国际化**](http://developers.facebook.com/docs/opengraph/internationalization/)

# mysql - sql : 选择数据库中的大写列

> ID：13243594
> 
> 赞同：1
> 
> 时间：2012-11-06T02:45:08.777
> 
> 标签：mysql, sql, select, uppercase

我需要选择以大写扩展名结尾的列。

例如，请看下表。

```
id - picture
1 - abc.JPG
2 - def.jpg
3 - 123.jpg
4 - xyz.JPG 
```

结果应该给我第 1 行和第 4 行，因为 JPG 是大写的。

谁能帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:00:33.673

我远非专家，但区分大小写以前让我感到困惑。你能修改你的表的结构吗？可能有帮助的一件事是按如下方式更改表的排序规则（[此处为 SQLFiddle](http://sqlfiddle.com/#!2/b1879/1)）：

```
CREATE TABLE pics (id INT, picture VARCHAR(200))
CHARACTER SET latin1 COLLATE latin1_general_cs;
INSERT INTO pics VALUES 
(1, 'abc.JPG'),
(2, 'def.jpg'),
(3, '123.jpg'),
(4, 'xyz.JPG') 
```

`_cs`代表，`case sensitive`我相信默认是不区分大小写的，这使得基于大小写的比较有点棘手。然后，您可以使用以下查询来获取您的行：

```
SELECT *
FROM pics
WHERE picture REGEXP '\.[[:upper:]+]$' 
```

如果您无权访问基础表，则可以尝试以下操作，该操作将列转换为不同的字符集 ( `latin1`)，然后更改排序规则以支持不区分大小写的比较 ( [SQLFiddle here](http://sqlfiddle.com/#!2/8fed1/10) )：

```
SELECT *
FROM pics
WHERE CAST(picture AS CHAR CHARACTER SET latin1) 
      COLLATE latin1_general_cs REGEXP '\.[[:upper:]+]$' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T03:51:52.080

一些正则表达式：

'[.][[:upper:]]+$' - 只是大写字母

'[.].*[[:upper:]]' -- 至少一个大写字母

'[.].*[[:lower:]]' -- 至少一个小写字母；AND 与previous 一起得到上下等。

如果可以有两个“。” 在文件名中，然后考虑使用 SUBSTRING_INDEX(picture, '.', -1) 来隔离“扩展名”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T03:22:13.307

大多数 SQL 语言都有一个 UCASE 或 UPPER 函数来将文本转换为大写。我还利用了并非所有 SQL 方言中的 RIGHT 函数。如果您的 SQL 没有 RIGHT 函数，您将不得不使用 SUBSTRING 和 LENGTH 来获得图片中正确的三个字符。

```
Select id, picture
  from table
 where UPPER(RIGHT(TRIM(picture),3)) = RIGHT(TRIM(picture),3) 
```

如果转换为大写的相同文本与未转换的文本相同，则它在数据库中为大写并且将被选中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T03:25:50.607

由于不能总是假设文件扩展名是 3 个字母，您可以使用以下方法获取句点后的第一个图表并比较它是否为大写：

```
select * from table where SUBSTRING(picture,CHARINDEX('.',picture) + 1,1) 
   = upper(SUBSTRING(picture,CHARINDEX('.',picture) + 1,1)) collate SQL_Latin1_General_CP1_CS_AS 
```

* * *

![在此处输入图像描述](../Images/62283f47669282f90b5e2b38506ce33c.png)

# javascript - 如何从 curl 命令转换为 ajax 请求

> ID：13243595
> 
> 赞同：0
> 
> 时间：2012-11-06T02:45:19.113
> 
> 标签：javascript, jquery, curl

我有命令卷曲到服务器以获取信息

```
curl -v -H "Content-Type:application/json" -H "X-KGP-AUTH-TOKEN: a5a95c30274611e2ae10000c29bb7331" -H "X-KGP-APPID:id.kenhgiaiphap.kcloud" -H "X-KGP-APPVER:0.0.1" -H "X-KGP-DEVID:xxx" -H "X-KGP-DEVTYPE:xxx"  http://test.kenhgiaiphap.vn/kprice/account/profile/get/token 
```

我写ajax来处理这个

```
 $.ajax({
            url: "http://test.kenhgiaiphap.vn/kprice/account/profile/get/token",
            type: "POST",
            cache: false,
            dataType: 'json',

            success: function() { alert('hello!'); },
            error: function(html) { alert(html); },
            beforeSend: setHeader
        });

        function setHeader(xhr) {
            xhr.setRequestHeader('X-KGP-AUTH-TOKEN','a5a95c30274611e2ae10000c29bb7331');
            xhr.setRequestHeader('X-KGP-APPVER', '0.0.1');
            xhr.setRequestHeader('X-KGP-DEVID', 'xxx');
            xhr.setRequestHeader('X-KGP-APPID','id.kenhgiaiphap.kcloud');
            xhr.setRequestHeader('X-KGP-DEVTYPE', 'xxx');
        } 
```

但我有问题是

```
2XMLHttpRequest cannot load http://test.kenhgiaiphap.vn/kprice/account/profile/get/token. Origin http://localhost is not allowed by Access-Control-Allow-Origin. 
```

并要求是

```
token 
```

test.kenhgiaiphap.vn/kprice/account/profile/get OPTIONS（已取消）加载取消的文本/纯 jquery-1.7.2.min.js:2320 脚本 156B 0B 1.15s 39ms 39ms1.11s

感谢支持！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:47:07.003

这是一个浏览器问题。

更改或添加`dataType`到您的网址：`jsonp``callback=?`

```
http://test.kenhgiaiphap.vn/kprice/account/profile/get/token?callback=? 
```

*未来参考[https://stackoverflow.com/a/6396653/744255](https://stackoverflow.com/a/6396653/744255)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T02:57:14.250

您不能在客户端站点“同源策略问题”中使用帖子。

您可以`jsonp`改用“json”并更改为 get，几乎遵循“ **Gabriel Santos** ”的建议

# android - Rhomobile 如何编辑 Android Manifest

> ID：13243597
> 
> 赞同：1
> 
> 时间：2012-11-06T02:45:23.830
> 
> 标签：android, rhomobile, rhodes

我很难更改 AndroidManifest.xml 文件。

"C:\RhoStudio\ruby\lib\ruby\gems\1.8\gems\rhodes-3.2.2\platform\android\Rhodes\AndroidManifest.xml"

我正在尝试将以下内容添加到构建清单中，以允许我将文件保存到 SD 卡：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我添加了它，但是当我构建时，该行**没有**出现在输出到 bin/tmp 文件夹的 AndroidManifest.xml 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:11:14.453

```
android:
  capabilities:
    - sdcard 
```

将以下内容添加到 build.yml 会添加上面的 AndroidManifest.xml 并允许我读取/写入 SD 卡。

# c# - 读取 XML 中的相邻元素

> ID：13243599
> 
> 赞同：0
> 
> 时间：2012-11-06T02:45:48.620
> 
> 标签：c#, xml, xmltextreader

我有一个很大的 XML 文件，所以我正在使用 XMLTextReader。我无法读取该值，因为格式与我使用过的其他 XML 文件有点不同。

```
<class>
   <column>Size</column><int>30</int>
   <column>TeamColor</column><string>red</string>
   ...
</class> 
```

如何读取 Size 并获得 30 的值？我目前有

```
while (reader.Read())
{
     if (reader.NodeType == XmlNodeType.Element)                    
         element = reader.Name;  
     else if (reader.NodeType == XmlNodeType.Text)
     {
         if (element == "column")
         {
             if(reader.Value == "Size")
             //can get true here, but can't return the int value next to it
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:55:49.677

除非您存储先前的值，否则您将需要添加一个跳过条件，允许您在命中列元素时进行额外的读取（对于兄弟姐妹），然后在下一个循环中正确处理任何额外的读取。

```
 bool skipRead = false;
while (skipRead || reader.Read())
{
     skipRead = false;
     if (reader.NodeType == XmlNodeType.Element)                    
         element = reader.Name;  
     else if (reader.NodeType == XmlNodeType.Text)
     {
         if (element == "column")
         {
             if (Reader.Read())
             {
               if(reader.NodeType == XmlNodeType.Element && reader.Name == "Size")
               {
                   // do whatever you need to here with reader.Value. 
                   // E.g size = (int) reader.Value
                   skipRead = false;
                   continue;
               } // Additional ifs for other elements in column can go here.
               else
               {
                   skipRead = true;
                   continue;
               }
             }
             else
             {
              break;
             }
         }
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:58:49.137

如果可以使用 xpath，请从`<column>`上下文节点尝试`(following-sibling::*)[1]`. 这将选择`*`沿后续兄弟轴的元素（与上下文对等但按文档顺序排在后面的元素），然后返回序列的第一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T03:18:44.073

您可以在`Hashtable`.

尝试使用这段代码片段：

```
Hashtable hashTable = new Hashtable();
int intVal;
string prevColumnName = "";

while (reader.Read())
{
    if (reader.NodeType == XmlNodeType.Element)
    {
        element = reader.Name;
    }
    else if (reader.NodeType == XmlNodeType.Text)
    {
        switch (element.ToLower())
        {
            case "column":
                prevColumnName = reader.Value;
                hashTable.Add(reader.Value, null);
                break;
            case "int":
                if (int.TryParse(reader.Value, out intVal))
                    hashTable[prevColumnName] = intVal;
                break;
            case "string":
                hashTable[prevColumnName] = reader.Value;
                break;
        }
    }
} 
```

用法：

```
int size = Convert.ToInt32(hashTable["Size"]); 
```

# javascript - Intellisense 和 Google 闭包库

> ID：13243601
> 
> 赞同：0
> 
> 时间：2012-11-06T02:46:11.983
> 
> 标签：javascript, intellisense, google-closure-library

是否有任何文件或 vsdoc 文件可用于让 Intellisense 与 Google 闭包库一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:46:11.983

当我发现我找不到我自己实现的闭包库的任何智能感知文件时，我已经为其他寻找同样事情的人发布了这个问题和答案。

[您可以在https://bitbucket.org/SharkAttack/closure-library-vsdoc-intellisense](https://bitbucket.org/SharkAttack/closure-library-vsdoc-intellisense)找到 vsdoc 文件的存储库

vsdoc 文件是闭包库的直接移植。它们太大，无法在一个文件中进行智能感知可靠工作。例如，如果您想让 intellisense 的 goog.dom 部分正常工作，您只需要在 JavaScrip 文件的顶部提供两个 intellisense 引用即可。

```
/// <reference path="goog-vsdoc.js" /> 
/// <reference path="goog.dom-vsdoc.js" /> 
```

请注意，第一个引用只提供了“goog”命名空间。每个闭包库智能感知参考都需要这个。

这是我关于同一件事的博客文章，更深入地解释了它[http://planetaryweb.blogspot.co.uk/2012/11/googles-closure-library-intellisense.html](http://planetaryweb.blogspot.co.uk/2012/11/googles-closure-library-intellisense.html)

# primefaces - Primefaces 密码反馈文本本地化

> ID：13243604
> 
> 赞同：0
> 
> 时间：2012-11-06T02:46:25.653
> 
> 标签：primefaces

我在翻译 primefaces 密码字段中的 ff 文本时遇到问题：“请输入密码”、“弱”、“好”、“强”等。

知道如何覆盖默认翻译值吗？我尝试搜索 primefaces jar，但在 Messages.properties 文件中看不到它们。

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:10:48.093

看展柜：

[http://www.primefaces.org/showcase/ui/password.jsf](http://www.primefaces.org/showcase/ui/password.jsf)

这是从那里复制的土耳其示例：

```
<p:password id="turkishFeedback" value="#{passwordBean.password3}" feedback="true"   
    promptLabel="Lütfen şifre giriniz" 
    weakLabel="Zayıf"  
    goodLabel="Orta seviye" 
    strongLabel="Güçlü" /> 
```

# java - 创建某个 URLClassLoader 后，如何将所有 Jars 加载到与 url 显示到 JVM 相同的路径中？

> ID：13243610
> 
> 赞同：0
> 
> 时间：2012-11-06T02:47:14.160
> 
> 标签：java

哦，对不起，我的表达能力很差，我的意思是现在我已经创建了一个 URLClassLoader A，它的 URL[] 是 B，现在我需要动态加载和卸载 B 中的所有 jar。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:16:48.387

类加载器可能是不可变的，这意味着您的代码不能更改主系统类加载器。这并不意味着您不能在主类加载器之上创建自己的第二个类加载器，但它确实意味着您可能无法在不重新启动 JVM 的情况下从系统类加载器中卸载类。我怀疑您的问题与此问题重复：[我应该如何在运行时动态加载 Jars？](https://stackoverflow.com/questions/60764/how-should-i-load-jars-dynamically-at-runtime). 这表明 OSGi 可能是答案：[http](http://www.osgi.org/Technology/WhatIsOSGi) ://www.osgi.org/Technology/WhatIsOSGi 。这是[HelloWorld](http://www.theserverside.com/news/1363825/OSGi-for-Beginners)示例的链接。

如果您需要更简单的方法来卸载或添加类，您可以研究使用不同类路径重​​新启动 JVM 的方法。如果您在一个 JVM 中运行您的应用程序，并且您的应用程序与之对话的后台有第二个 JVM，那么您的主应用程序可能能够使用不同的类路径重新启动后台 JVM。只是一个想法。我不是这方面的专家，所以可能有更巧妙的方法来做这件事。

# iphone - 通过 MD5 算法加密成 Unicode (UCS-16) 格式的 32 位字符串

> ID：13243618
> 
> 赞同：0
> 
> 时间：2012-11-06T02:48:33.087
> 
> 标签：iphone, objective-c, ios, md5

我有这个代码来生成 UTF-8 格式的 MD5 哈希：

```
const char* str = [clearPassword  UTF8String];
unsigned char result[CC_MD5_DIGEST_LENGTH];
CC_MD5(str, strlen(str), result);

NSMutableString *ret = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH*2];
for(int i = 0; i<CC_MD5_DIGEST_LENGTH; i++) {
    [ret appendFormat:@"%02x",result[i]];
}

return ret; 
```

但我的要求需要有 32 位 Unicode 哈希。

假设字符串是“admin”。使用我的代码，我将得到“21232f297a57a5a743894a0e4a801fc3”，这是错误的。

我使用了一些在线生成器来获取 unicode 哈希，我得到了“19a2854144b63a8f7617a6f225019b12”，这正是我想要的。

我的代码的哪一部分需要更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:26:31.467

试试这个：

```
NSData *utf16data = [clearPassword dataUsingEncoding:NSUTF16LittleEndianStringEncoding];
unsigned char result[CC_MD5_DIGEST_LENGTH];
CC_MD5([utf16data bytes], [utf16data length], result);

NSMutableString *ret = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH*2];
for(int i = 0; i<CC_MD5_DIGEST_LENGTH; i++) {
    [ret appendFormat:@"%02x",result[i]];
}

return ret; 
```

# java - 可比的Java

> ID：13243622
> 
> 赞同：1
> 
> 时间：2012-11-06T02:48:53.307
> 
> 标签：java, comparable

我有一个家庭作业，并且遇到了一些麻烦。首先，任务是制作一个不同大小的条形图，然后通过每次单击按钮对其进行调整和排序。我在主类上实现了动作监听器，然后制作了一个辅助类来实现可比性。我在调用可比较函数时遇到问题。它说我的数组 int[] 无法以寻找可比较 [] 的可比较方法解决，任何帮助或提示将不胜感激。这是我的代码：

```
import java.util.*;
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;

 import javax.swing.*;

 public class TwoSorts extends Applet implements ActionListener

 {
private final int APPLET_WIDTH = 600;
private final int APPLET_HEIGHT = 600;
Button sort;
Label sort_label;
String pr_name;
int[] random = new int[20];
int[] sorter = new int[20];

public void init()

{

    sort = new Button("Sort");
    add(sort);
    sort.addActionListener(this);
    sort_label = new Label("Orange Selection / Black Bubble");
    add(sort_label);
    randomGen(random);
    sorter = random; 
    setBackground (Color.white);
    setSize (APPLET_WIDTH, APPLET_HEIGHT); 
}  

private void randomGen (int...random) {

    for (int i = 0; i < 20; i++){
        random [i] = (int) (20 +(Math.random()*300-20));
        }
}

public void paint(Graphics g)
{
    for (int i = 0; i < 20; i++ ){

        g.setColor(Color.blue);
        g.fillRect((int) (10 + (i*50)), 300, 50, ((random[i])));
        g.setColor(Color.black);
        g.fillRect((int) (10 + (i*50)), 300, 25, (sorter[i]));
    }

    g.drawRect (20, 30, 130, 50);
  sort.setLocation(0,220);
  sort_label.setLocation(0,270);
  sort_label.setSize(400,30);
}

class action extends TwoSorts implements Comparable {

public void actionPerformed(ActionEvent arg0) {

    selectionSort(random);
    insertionSort (sort);
    repaint;

public static void selectionSort (Comparable[] random)  {

    int min;
    Comparable temp;

    for (int index = 0; index < random.length-1; index++)
    {
        min = index;
        for (int scan = index+1; scan < random.length; scan++)
            if (random[scan].compareTo(random[min]) < 0)
                min = scan;

        temp = random[min];
        random[min] = random[index];
        random[index] = temp;
    }

public static void insertionSort (Comparable[] sorter)  {

    for (int index = 1; index < sorter.length; index ++){
        Comparable key = sorter[index];
        int position = index;
        while (position > 0 && key.compareTo(sorter[position-1]) < 0){
            sorter [position] = sorter[position-1];
            position--;
        }

        sorter[position] = key;
    }
}

@Override
public int compareTo(Object o) {
    // TODO Auto-generated method stub
    return 0;
    }
}

@Override
public void actionPerformed(ActionEvent e) {
    // TODO Auto-generated method stub

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:09:57.420

Comparable 应该由您可能有理由与相同类型的其他对象进行比较的类实现。

例如，如果您有一个需要排序的矩形条形图，您可能会创建一类矩形，其中包含矩形的高度、宽度和位置。现在，由于这是您编写的一个类，您将需要实现 compareTo 函数来评估哪个 Rectangle 大于或小于另一个矩形。

如果您查看 compareTo() 规范[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Comparable.html)，您将看到：

返回： 负整数、零或正整数，因为此对象小于、等于或大于指定对象。

因此，如果此对象小于传递给 compareTo() 的对象，则返回 - ，如果等于 0，则 + 如果更大。

考虑到这一点，您最终可能会得到一个看起来像这样的类

```
public class MyRect implements Comparable {
    int width;      //width of the rectangle will probably not change
    int height;     //this might be the value you want to compare in compareTo() 
    point position;

    ...

    //getters and setters yada yada
    public int getHeight(){
        return this.height;
    }

    ...

    @Override
    public int compareTo(Object otherRect){

        // if this rectangle's height is greater than otherRect the difference should 
        // be positive, if equal 0, and if less than the difference will be negative
        // exactly as specification for compareTo() states.

        return this.height - (MyRect)otherRect.getHeight();
    }
} 
```

显然，我遗漏了很多内容，但这应该会让您指出正确的方向。玩它，看看你想出了什么。快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T03:05:42.320

*[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)是一个*接口，应该由一个可以排序的类来实现。

要实现*Comparable*，您只需实现一个方法*[compareTo](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html#compareTo%28T%29)*，它将给定对象与另一个对象进行比较。

如果你有一个可以排序的名为*Foo的对象，Foo 应该实现 Comparable。*

这允许您对 Foo 对象的集合进行排序。

```
class Foo implements Comparable {
    Integer fooIndex;

    compareTo(Object otherObject) {
        Foo otherFoo = (Foo) otherObject;
        return this.fooIndex.compareTo(otherFoo.fooIndex);
    }
} 
```

上面是一个简单的*compareTo*方法的例子。

请注意，它不检查 null，也不检查是否可以强制转换为 Foo。

上面的实现允许你这样做：

```
List<Foo> fooList = createFooList();
Collections.sort(fooList); 
```

* * *

更好的是，您可以实现一个*类型化*的Comparable 接口（可能更令人困惑）。

这使您可以避免强制转换：

```
Class Foo implements Comparable<Foo> {
    Integer fooIndex;

    compareTo(Foo otherFoo) {
        return this.fooIndex.compareTo(otherFoo.fooIndex);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T04:29:24.040

实现`Comparable<T>`接口取决于要排序的类的对象。可以将实现的`compareTo(T)`方法委托给此类的实例字段以确定对象的顺序。

最初，类 T 的对象保存在一个集合中`List<T> list`。使用 Comparable 界面，您可以通过两种方式对集合进行排序： `Collections.sort(list);`或`Set set = new TreeSet(list);`. Collections 类对原始列表进行排序，而 TreeSet(list) 创建一个新的排序集合。对于这两种工作方式，列表中的对象必须实现 Comparable 接口。

使用的排序算法是 Collections 类的合并排序，它不能更改。Collections.sort() 方法将元素排序任务委托给`Arrays.sort(list.toArray())`. 在内部，Arrays 类将对象转换为 Comparable 并调用 compareTo() 方法来执行元素的比较。

因此，如果您对执行选择排序或插入排序感兴趣，那么您可以遵循 JDK 策略。可以实现实现各种排序算法的类，该类将采用实现 Comparable 接口的对象数组。

# python - 为数据库中的现有条目生成 slug 字段数据

> ID：13243625
> 
> 赞同：2
> 
> 时间：2012-11-06T02:49:37.050
> 
> 标签：python, django, slug

我正在使用带有 South 的 Django 1.4 进行迁移。我刚刚在我的一个模型中添加了一个 slug 字段并进行了迁移。slug 字段会自动填充所有新对象，并且可以完美运行。

我想知道，有什么方法可以强制 Django 为迁移之前的所有现有数据创建 slug 字段条目......

*编辑我在 admin.py 中用这一行填充我的 slug 字段

prepopulated_fields = {"slug": ("name","price")}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T02:56:34.447

当我将 slug 字段添加到现有表时，我使用了如下所示的 South 数据迁移：

```
from django.template.defaultfilters import slugify

class Migration(DataMigration):

    def forwards(self, orm):
        for obj in orm.MyModel.objects.filter(slug__isnull=True):
            slug = slugify(obj.name)
            obj.slug = slug
            suffix = 2
            while orm.MyModel.objects.filter(slug=obj.slug).exists():
                obj.slug = "%s-%d" % (slug, suffix)
                suffix = suffix + 1
            obj.save()

    def backwards(self, orm):
        pass # no need to change anything 
```

# mysql - 高效查询、表桥/索引和结构

> ID：13243626
> 
> 赞同：1
> 
> 时间：2012-11-06T02:49:48.877
> 
> 标签：mysql, sql, database

在我的 PhpMyAdmin 数据库中，我有 9 个表。目前，其中 8 个表与我相关。我希望我的查询能够足够快地执行，但我不确定表的设计/结构是最有效的。有没有将一个表与另一个表合并或创建另一个桥接表的建议？此外，我正在努力构建一个查询，该查询将显示下表中的桥接结果：`semester`, `schedule`, `office_hours`, `faculty`, `section`, `major_minor`, `major_class_br`, `class`?

[表结构](http://webprolearner2346.zxq.net/class_des/)

基本查询 - 显示班级详细信息

```
SELECT  class_name, class_caption, class_credit_hours, class_description
FROM class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:45:50.320

'要足够快地执行的查询'

插入还是选择？

如果您希望您的 INSERT/UPDATE 快速，请将其标准化到第 n 度

如果您希望您的 SELECT 快速，请将其非规范化（这当然会使 INSERT 的 UPDATE 复杂且缓慢）

如果您的主表（计划？）有 < 10,000 条记录并且它是一个不错的 RDBMS，那么它可能运行得尽可能快。

通常，性能调优过程涉及

1.  识别工作负载（我通常会运行哪些查询）
2.  获得基线（他们需要多长时间才能运行）
3.  调整（添加索引，更改设计）
4.  重复

所以我们真的需要知道什么样的查询执行缓慢，或者你期望在哪些表中增长什么样。

我不确定您所说的“桥梁结果”是什么意思。当您根据物理图构建连接表的查询时会发生什么？错误或意外结果？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:15:11.087

这是一个开始：

```
select *
from 
schedule 
inner join semester 
on schedule.semester_id = semester.id
inner join office_hours
on office_hours.id = schedule.??? 
```

不清楚 office_hours 与日程安排的关系如何？

# c# - 自引用属性数组

> ID：13243632
> 
> 赞同：2
> 
> 时间：2012-11-06T02:51:36.803
> 
> 标签：c#, arrays, generics, properties, interface

我希望能够循环引用它自己的属性的类属性。为什么你可能会问？因为如果我想向该类添加更多属性，以后会更容易管理。

让我再解释一下：

```
public interface IElementBox
{
    string Filename { get; }
    string FileDefinition { get; set; }
    void ExtractFromFile(string stringData);
}

public abstract class Element
{
    public Element(string stringData)
    {
        this.DefFromFile(stringData);
    }
    public string Name { get; set; }
    protected abstract void DefFromFile(string stringData);
}

public class Solid : Element
{
    public Solid(string stringData) : base(stringData) { }
    public string SolidSpecificProperty { get; set; }
    protected override void DefFromFile(string stringData)
    {
        // Assign SolidSpecificProperty from string
    }
}

public class Liquid : Element
{
    public Liquid(string stringData) : base(stringData) { }
    public string LiquidSpecificProperty { get; set; }
    protected override void DefFromFile(string stringData)
    {
        // Assign LiquidSpecificProperty from string
    }
}

public class Gas : Element
{
    public Gas(string stringData) : base(stringData) { }
    public string GasSpecificProperty { get; set; }
    protected override void DefFromFile(string stringData)
    {
        // Assign GasSpecificProperty from string
    }
}

public abstract class ElementBox<T> : IElementBox where T : Element
{
    public List<T> Elements { get; set; }
    public List<T> GetElementsFromName(string name)
    {
        return this.Elements.FindAll(x => x.Name == name);
    }
    public abstract string Filename { get; }
    public string FileDefinition { get; set; }
    public abstract void ExtractFromFile(string filename);
}

public class SolidBox : ElementBox<Solid>
{
    public override string Filename
    {
        get { return "Solid.txt"; }
    }
    public override void ExtractFromFile(string stringData)
    {
        this.Elements.Add(new Solid(stringData));
    }
}

public class LiquidBox : ElementBox<Liquid>
{
    public override string Filename
    {
        get { return "Liquid.txt"; }
    }
    public override void ExtractFromFile(string stringData)
    {
        this.Elements.Add(new Liquid(stringData));
    }
}

public class GasBox : ElementBox<Gas>
{
    public override string Filename
    {
        get { return "Gas.txt"; }
    }
    public override void ExtractFromFile(string stringData)
    {
        this.Elements.Add(new Gas(stringData));
    }
}

public static class DataDefinition
{
    public static SolidBox SolidBox { get; set; }
    public static LiquidBox LiquidBox { get; set; }
    public static GasBox GasBox { get; set; }

    public static IElementBox[] ElementBoxes = new IElementBox[] { DataDefinition.SolidBox, DataDefinition.LiquidBox, DataDefinition.GasBox };
}

public static class Loader
{
    public static void LoadInfo()
    {
        for (int elementBoxNb = 0; elementBoxNb < DataDefinition.ElementBoxes.Length; elementBoxNb++)
        {
            string dataFilepath = DataDefinition.ElementBoxes[elementBoxNb].Filename;
            System.IO.StreamReader sr = System.IO.File.OpenText(dataFilepath);
            DataDefinition.ElementBoxes[elementBoxNb].ExtractFromFile(sr.ReadToEnd());
        }
    }
} 
```

此结构的全部目的是能够在文本文件中定义所有对象属性。这样所有 SolidBox.Elements 对象都是从该文本文件定义中动态分配的。

我的问题如下：

*   DataDefinition 中的属性数组是否会被值引用。这意味着我所有的数据分配都会被虚无所吸收？

*   如果是（或否..），他们是做整个事情的更好方法/最好的方法是什么？

我研究这种数据结构已经有一段时间了，现在我为自己能取得的成就感到自豪。如果这一切都是徒劳的，我会很难过。虽然，如果您能为我提供一种更好/最佳的方式来完成整个工作，我将不胜感激，并将我的代码放入我的存档文件夹中。

另外，请记住，这是数据结构的一个示例。它并不能准确地反映我的代码的样子，并且这样做是为了便于理解和阅读。

如果需要更多信息，请随时提出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:06:35.953

反序列化（从持久性介质中读取对象）已经以无数种不同的方式解决。尝试使用数据合同，就像[这个答案](https://stackoverflow.com/a/7773955/1698557)所示。您只需要向您的属性添加一些属性来指示您想要序列化的内容，然后它就会为您完成几乎所有的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:10:07.273

这不会做你想要的。该数组将包含对属性在初始化时引用的对象的引用，在本例中为`null`. 如果你给`SolidBox`属性赋值，数组的关联元素不会改变，反之亦然。

# ruby-on-rails - 如何通过 ruby /rails 中的自定义方法对集合/枚举进行排序？

> ID：13243634
> 
> 赞同：2
> 
> 时间：2012-11-06T02:51:55.223
> 
> 标签：ruby-on-rails, ruby

在 Rails 中，我有一个类别的集合：

```
@categories = Category.order('name asc') 
```

这些类别之一的名称为“新”。我希望将“新”类别放在集合的首位，其余按字母顺序排列。

我只想做一个数据库查询。我希望这尽可能简洁。

如果一个查询限制没有到位，我知道我可以获取“新”类别，然后按名称顺序获取其余类别，然后将新类别“取消转移”到 @categories 集合，但是一定是更好的方法！

```
@new = Category.where(name: 'name').first
@categories = Category.where("name != ?", 'Name').order('name asc')
@categories.unshift(@new) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:58:00.340

我想我想出了一些很好的东西：

```
@categories = Category.order('name asc').partition { |cat| cat.name == 'New' } 
```

或者，甚至更好：

```
@categories = Category.order('name asc').partition { |cat| cat.name == 'New' }.flatten 
```

这给了我一个查询和集合中的第一个“新”类别。

# perl - perl 内存不足时是否有标准的行为方式？

> ID：13243637
> 
> 赞同：6
> 
> 时间：2012-11-06T02:52:19.270
> 
> 标签：perl, memory-management, exception-handling, out-of-memory

**Perl解释器（又名“perl”）在内存不足时是否有标准（ish）方式来表现？它是否以任何方式记录/指定？以某种统一的方式编码？**

我对任何被表示为对正在运行的 Perl 代码的约定的标准特别感兴趣——例如，会`die`被调用吗？会`END`被执行block吗？ETC...

我对“理论”答案都很好（例如，某种通用的“这是 perl 代码在内存不足时通常应该做的”任务声明文档来自 Larry/P5P/etc ......，即使不是 100% 的 malloc() 调用遵循此规则）；或“实用”语句（例如，Perl 中的所有 malloc() 调用都包装在通用的“allocate_memory”函数中，该函数统一处理所有故障）。

答案可能取决于具体导致内存不足的原因（例如，为 Perl 代码的数据结构请求更多内存与内部 Perl 代码分配的内存与 Perl 程序中明确的“需要存储更多数据”逻辑无关） .

如果答案非常依赖于实现，假设 perl 用于 Solaris/Linux，并且缩小到任何最近的稳定版本（5.8 到 5.16）都是可以接受的。

问题仅限于标准 Perl 解释器，但是您希望将其定义为预编译配置（例如，主要 Linux 发行版附带的 perl，或者使用所有默认值单独编译的 perl，等等）。

[注意：这个问题来自 Gilles 对[另一个 Q的评论](https://stackoverflow.com/questions/13234866/can-a-perl-system-call-ever-die#comment18042068_13234866)]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T04:07:47.853

查看[手册页，了解](http://www.manpagez.com/man/1/perldiag/)Perl 在启用“使用诊断”杂注时将发出的各种诊断警告，您可以看到各种不同类型的“内存不足”错误及其含义。

因此，您可以从这些消息中推断出“标准”行为；带有感叹号的那个（“内存不足！”）听起来像您要问的那个：

```
Out of memory!
(X) The malloc() function returned 0, indicating there was
insufficient remaining memory (or virtual memory) to satisfy the
request.  Perl has no option but to exit immediately. 
```

“X”级错误标记为“非常致命的错误（不可捕获）”。

但是，如果它是一个“大请求”（大于 64K），它是可捕获的（我猜 Perl 假设它有足够的内存来干净地关闭）。

# php - symfony2：如何从模板访问服务

> ID：13243638
> 
> 赞同：48
> 
> 时间：2012-11-06T02:52:22.997
> 
> 标签：php, symfony

如果我创建了一项服务，是否可以从 twig 访问它，而无需创建 twig.extension？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-11-06T07:01:18.083

您可以将服务设置为 twig 全局变量`config.yml`，例如

```
#app/config/config.yml
twig:
    globals:
        your_service: "@your_service" 
```

在您的`template.html.twig`文件中，您可以通过以下方式调用您的服务：

```
{{ your_service.someMethod(twig_variable) }} 
```

见[这里](http://symfony.com/doc/current/reference/configuration/twig.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-04T08:44:21.917

要在 Symfony 5 中完成这项工作，首先您必须在 services.yaml 中声明服务，例如：

```
        应用\服务\导航助手：
        论据：
            富：酒吧

```

然后，您可以声明该服务以在 Twig 中使用。为此，您必须将其作为变量添加到位于 packages/twig.yaml 中的 Yaml 文件的“全局”部分：

```
 globals:
    navHelper: '@App\Service\NavigationHelper' 
```

现在您可以使用模板中的服务方法，正如 Mun Mun Das 在他上一个代码片段中所建议的那样。

# php - 单击行中的按钮后如何重新加载表行？

> ID：13243639
> 
> 赞同：-4
> 
> 时间：2012-11-06T02:52:28.870
> 
> 标签：php, jquery, ajax

目前我正在从数据库中提取数据以动态构建表。提取数据后，我希望自己和/或我的用户看到一个选项（按钮），如果他们单击该按钮，我可以从表以及数据库中编辑/删除该行。

我是 jQuery 新手，所以我不确定应该使用什么`$.ajax()`功能。这是我的 php 代码：

```
foreach($stmt as $item){

            echo '
            </td>
            <td>'.$item['asin'].'</td>
            <td>'.$item['weight'].'</td>
            <td>'.$item['dimension'].'</td>
            <td>'.$item['category'].'</td>
            <td>';

                    echo '<button type="button" class="btn">Update Me!</button>';

            echo '
            </td>
        </tr>';
    }
    echo '</tbody>
    </table>'; 
```

这是我的 jQuery 代码：

```
 $(document).on('click', '.btn', function() {
    $.ajax({
    //code here etc
    success:function(){
    //what to put here?
    }

});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T04:04:59.773

所有这些都被解释了——你应该能够从这里得到答案。至少足以尝试一些东西并发布一个更完整的例子。

1）每个表行都需要有一个 javascript 可以抓取的标识符。您可能会发现使用 data_ 元素会更容易

PHP 有：

```
echo '<button type="button" class="btn" data_id="'.$item['asin'].'">Update Me!</button>'; 
```

JS有：

```
$(document).on('click', '.btn', function() {
   var id = $(this).attr('data_id');
   ... 
```

2) 您需要一个 PHP 函数来返回该行的更新数据

```
<?php

    if (isset($_GET['id'])) {
         $id = $_GET['id'];
         $item = Get Data From Where Ever
         echo '<td>'.$item['asin'].'</td>
               <td>'.$item['weight'].'</td>
               <td>'.$item['dimension'].'</td>
               <td>'.$item['category'].'</td>
               <td><button type="button" class="btn" data_id="'.$item['asin'].'">Update Me!</button></td>';
    }

 ?> 
```

3）使用javascript/ajax获取数据

```
$(document).on('click', '.btn', function() {
    var id = $(this).attr('data_id');
    var self = $(this);
    $.ajax({
       url: 'MyUrl?id=' . id;
       success:function(data){
           $(self).html(data);
       }
    });
} 
```

它并不完美，您需要担心使东西安全，错误检查等，但这应该可以为您提供所需的支持。

# java - 如何使用休眠 ?

> ID：13243643
> 
> 赞同：2
> 
> 时间：2012-11-06T02:53:18.527
> 
> 标签：java, hibernate

我正在阅读休眠参考，它们是休眠中的两个元素：`<join><any>`. 看完后，不知道参考资料在说什么。

我不明白什么时候使用join/any，它们适合什么样的场景？<join/>：设置“fetch”时，hibernate什么时候用inner join，什么时候用outer join，什么时候用select？哪些表使用了哪些列？对于提供的示例休眠参考，它说： <join table="ADDRESS"> <key column="ADDRESS_ID"/> <property name="address"/> <property name="zip"/> <property name= "country"/> </join>，那么用哪一列来连接这两个表呢？

当为 <join> 设置 fetch 时，它说： fetch (optional - defaults to join): 如果设置为 join，默认情况下，Hibernate 将使用内部连接来检索由类定义的 <join>（我的问题：有人会请给我一个例子说：哪个是这个类？）或其超类（（我的问题：有人可以给我一个例子说：哪个是这个类？））和一个由定义的 <join> 的外连接一个子类（（我的问题：有人可以给我举个例子说：这是这个类吗？））。如果设置为选择，那么 Hibernate 将对子类上定义的 <join> 使用顺序选择（（我的问题：有人可以给我举个例子说：这是这个类吗？）），只有在行原来代表子类的一个实例（（我的问题：有人可以给我举个例子说：这门课是什么？））。内部连接仍将用于检索由类及其超类定义的（（我的问题：有人可以给我举个例子说：这是哪个类？））。

换句话说，我想知道下面所说的所有类是什么： fetch (optional - defaults to join): 如果设置为 join，默认情况下，Hibernate 将使用内部连接来检索由类定义的 <join> 或它的超类和由子类定义的 <join> 的外连接。如果设置为选择，那么 Hibernate 将对子类上定义的 <join> 使用顺序选择，只有当一行结果代表子类的实例时才会发出。内部连接仍将用于检索由类及其超类定义的 <join>。

对于<any>，它适合什么样的场景？你能解释一下它是如何工作的吗？有没有人提供例子并向我解释？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:49:09.227

*   `<join>`用于映射一类两个 2+ 表，这些表在主键/ID 上具有一对一关联

    ```
    Table A        Table B
    -------        -------
    id | name      a_id | status

    class Foo
    {
        private int id;
        private string name;
        private string status;
    }

    <class name="Foo">
      <id name="id"/>
      <property name="name"/>
      <join table="B">
        <key column="a_id"/>
        <property name="status"/>
      </join>
    </class> 
    ```

*   `<any>`用于映射多态引用，例如联系人可以引用它所属的用户或公司。所以它使用两列：一列是公司/用户的 id，第二列存储引用的类型，例如“用户”或“公司”。优点是它知道被引用实体的类型（和表），而无需查看所有可能的表

    ```
    Table Users         Table Companies
    ----------          -------------
    id | name           id | trademark

    Table Contacts
    -----------------------
    id | text | owner_id | owner_type

    class User/Company implements HasContacts
    {
        private int id;
        private string name/trademark;
        private Set<Contact> contacts;
    }

    class Contact
    {
        private int id;
        private string text;
        private HasContacts owner;
    }

    <class name="Contact">
      <id name="id"/>
      <property name="name"/>
      <any name="owner" id-type="System.Int64" meta-type="System.String">
        <meta-value value="user" class="User"/>
        <meta-value value="company" class="Company"/>
        <column name="owner_id"/>
        <column name="owner_type"/>
      </any>
    </class>

    <class name="User">
      <id name="id"/>
      <property name="name"/>
      <set name="contacts" where="owner_type='user'">
        <key column="owner_id"/>
        <one-to-many class="Contact"/>
      </set>
    </class>

    <class name="Company">
      <id name="id"/>
      <property name="trademark"/>
      <set name="contacts" where="owner_type='company'">
        <key column="owner_id"/>
        <one-to-many class="Contact"/>
      </set>
    </class> 
    ```

# android - 尝试按 ID 查找字符串时出现空指针

> ID：13243650
> 
> 赞同：0
> 
> 时间：2012-11-06T02:54:07.220
> 
> 标签：android, findviewbyid

我正在使用下面的代码来查找资源`id`；

```
setContentView(R.layout.golders);
    for (int i=1; i<hm.size()+1;i++)
        {
            int id = getStringIdentifier("Bus"+i);
            view = (TextView)findViewById(id);
            view.setText(hm.get(i).toString());
        } 
```

我`getStringIdentifier()`正在工作，但是当我尝试设置文本时，我得到一个`NullPointerException`.

我已经使用`setContentView`来关注具有我要更新`golders.xml`的 s 的文件。`id`

我试过清理项目，但也没有做任何事情，有什么想法吗？！谢谢！

编辑：

```
public int getStringIdentifier(String aString)
    {
        String packageName = "com.example.bustimetable.Robbos";
        int resId = getResources().getIdentifier(aString, "string", packageName);
        return resId;
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:08:27.607

您的`getStringIdentifier(String)`方法返回一个字符串 ID（来自 的内容`R.string`）。你需要一个新方法，比如`getIdentifier(String)`，它会从`R.id`. 我看不到 XML，所以我不知道您`TextView`的 ID 是什么，但是...您需要验证 ID 实际上是某个数字`Bus_`所在的位置。`_`

```
public int getIdentifier(String aString)
{
    String packageName = "com.example.bustimetable.Robbos";
    int resId = getResources().getIdentifier(aString, "id", packageName); // Get from R.id, not R.string
    return resId;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:11:45.157

问题是`getStringIdentifier()`返回字符串资源的 id。显然，返回的 id 不是视图资源的有效 id。即使是，我也不知道你怎么能保证你会得到你想要的视图。您需要添加另一种方法来返回视图资源的 id，或者修改您拥有的方法，以便它返回字符串或视图资源的 id

# c++ - 创建返回 QList 的函数

> ID：13243651
> 
> 赞同：2
> 
> 时间：2012-11-06T02:54:09.637
> 
> 标签：c++, qt

来自 C# 背景，我有一些习惯需要改变。我想从一个函数返回一个 QList<int> 。编译器错误消息是从“QList*”转换为非标量类型“QList”请求。这是功能：

```
QList<int> toCategories(QVariant qv)
{
    QList<int>categories = new QList<int>();
    if(qv.isValid() && qv.type() == QVariant::List)
    {
        foreach(QVariant category,qv.toList()){
            categories.append(category.toInt() );
        }
    }
    return categories;
} 
```

我很感激使用正确语法的文档或函数的链接

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T03:06:54.557

该错误是指您试图在非指针`QList`到指向 a 的指针之间进行转换`QList`。您需要使用指向 a 的指针，`QList`如下所示：

```
QList<int>* toCategories(QVariant qv)
{
    QList<int>* categories = new QList<int>();
    if(qv.isValid() && qv.type() == QVariant::List)
    {
        foreach(QVariant category,qv.toList()){
            categories->append(category.toInt() );
        }
        return categories;
    }
} 
```

或者，您可以使用非指针`QList`：

```
QList<int> toCategories(QVariant qv)
{
    QList<int> categories;
    if(qv.isValid() && qv.type() == QVariant::List)
    {
        foreach(QVariant category,qv.toList()){
            categories.append(category.toInt() );
        }
        return categories;
    }
} 
```

由于您是 C++ 新手，我建议您查看[这个问题](https://stackoverflow.com/questions/2715198/c-pointer-objects-vs-non-pointer-objects)。

如果我还要指出，您列出的函数存在某个路径不返回值的问题（尽管我怀疑这可能是因为您只复制粘贴了一部分代码）。

# python - 如何处理python中的变量范围

> ID：13243652
> 
> 赞同：0
> 
> 时间：2012-11-06T02:54:15.700
> 
> 标签：python, function, scope

我有一个 python 模块，其中包含用于生成大型数组的代码，并且它包含多个用于执行此操作的函数。这就是我现在的样子：

```
var1 = 0
var2 = 0
var3 = 0
var4 = 0
var5 = 0
var6 = 0
def main():
    foo()
    moo(var1,var2)
    noo(var6)
def foo():
    Math using vars
def moo():
    More math
def noo():
    More math 
```

但是，如果不首先在各自的函数中挑战它们，我就不能使用 vars 1-6，因为它会引发“分配前引用”异常。似乎最好的方法是使用全局，但这似乎很不受欢迎。为什么不推荐全局？在这里使用它可以接受吗？我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:56:03.520

您需要将这些变量定义为要在函数中使用的全局变量。这是一个例子。 [在创建它们的函数之外的函数中使用全局变量](https://stackoverflow.com/questions/423379/using-global-variables-in-a-function-other-than-the-one-that-created-them)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:58:27.893

最好将变量作为参数传递给这些函数：

```
def main(var1, var2, var3, var4, var5, var6):
    foo(var1, var2, var3)
    moo(var2,var3)
    noo(var5)
    ...

def foo(var1, var2, var3):
    Math using vars
def moo(var2, var3):
    More math
def noo(var5):
    More math 
```

然后只需使用所有 6 个参数调用 main。

# xcode - iPad 2 在设备上随机启动后显示空白黑屏

> ID：13243653
> 
> 赞同：1
> 
> 时间：2012-11-06T02:54:23.757
> 
> 标签：xcode, viewcontroller, ipad-2, ios-universal-app

我是 xcode 的新手，并且从另一个开发人员那里获得了这个通用应用程序项目，他永远无法弄清楚如何修复代码中的错误，因为他说他无法复制它。

我有 4 种不同的测试设备，我能够让该应用程序在 4 台中的 3 台上正常运行。iPad Retina、iPhone 4 和 iPhone 3 都可以正常工作。它在模拟器中也可以正常工作。是 iPad 2 出现了错误。

应用程序加载后出现空白/黑屏。default.png 文件在加载过程中显示，然后屏幕变为空白。在主视图控制器 iPad_HomeViewController.m 上有一个循环播放的音乐文件。我可以听到这个播放，所以我知道应用程序正在运行，但屏幕是空白的，你不能使用应用程序。有时应用程序可以完美加载并正常工作，然后在关闭它并重新打开它的几次使用后，再次出现空白屏幕。我还看到它只加载了 iPad_HomeViewController 几秒钟，这样你就可以看到所有的图形和导航按钮，然后它就变成了空白/黑色。

我正在使用 xcode 4.3.3

# c# - 这个存储过程怎么写

> ID：13243655
> 
> 赞同：-1
> 
> 时间：2012-11-06T02:54:31.993
> 
> 标签：c#, stored-procedures, entity-framework-4

我有一张桌子`Student`。该表有一个`ID`自动递增的列。我想编写一个存储过程来添加一个新学生并返回`ID`. 我是这方面的新手。

这是我的代码。请检查它是否错误并为我修复并告诉我如何编写代码以在 C# 中使用它。我使用了实体框架 4。

```
@Name NVARCHAR(50),
@Birthday DATETIME, 
@ID bigint OUTPUT 
AS 
BEGIN
    SET XACT_ABORT ON 

    BEGIN 
       INSERT INTO [Student](Name, Birthday) VALUES (@Name, @Birthday);  
       SELECT @ID = SCOPE_IDENTITY()
    END
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:26:13.053

最好在`C#`使用.`SP``EF4`

使用实体框架，这一切都是自动为您完成的。

```
using (MyEntities context = new MyEntities())
{
    var student =  new Student()
    {
      Name = "some value",
      Birthday = "some Birthday"
    };

    context.Students.AddObject(student);

    context.SaveChanges();

    int ID = student.ID; // You will get here the Auto-Incremented table ID value.
} 
```

保存在 Entity Framework 中将自动更新“自动增量”ID 列。您只需在调用 .SaveChanges(); 后将其读出即可。

编辑：

如果您在获取“自动增量”ID 值时遇到任何问题，也请阅读这篇[文章。](https://stackoverflow.com/questions/3011764/autonumber-with-entity-framework/3038265#3038265)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:09:10.237

```
@Name NVARCHAR(50),
@Birthday DATETIME, 
@ID bigint OUTPUT
AS
BEGIN
SET XACT_ABORT ON   
BEGIN 

    INSERT INTO [Student](Name,Birthday)
    VALUES(@Name,@Birthday);

    SELECT @ID = SCOPE_IDENTITY()
END 
```

我只是在字段之间添加了逗号

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T03:02:13.693

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)

这应该为您提供构建调用存储过程的 C# 应用程序所需的所有信息。

# php - codeigniter + zend 条码类

> ID：13243656
> 
> 赞同：0
> 
> 时间：2012-11-06T02:54:50.380
> 
> 标签：php, codeigniter, zend-framework, codeigniter-2, barcode

**我通过将Zend**目录放在*application/libraries*上来集成 Zend_Barcode 类。

在我的控制器下：

```
 public function barcode_gen()
  {
    $this->load->library('Zend/Barcode/Barcode');
    $barcodeOptions = array('text' => 'ZEND-FRAMEWORK');
    $rendererOptions = array();
    Zend_Barcode::factory('code39', 'image', $barcodeOptions, $rendererOptions)->render();
  } 
```

但是，这会导致：

```
Non-existent class: Barcode 
```

我也阅读了很多教程，但从未弄清楚如何去做，有些 tuts 已经过时了。

即使我在[CI 论坛](http://codeigniter.com/forums/viewthread/166294/)上关注了这个帖子，也没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:37:34.530

我遇到了同样的问题，这就是我为使其正常工作所做的（我使用的是 CI2 和 ZF2）。首先，集成 CI2 和 ZF2，[参见这个例子](http://www.beyondcoding.com/2008/02/21/using-zend-framework-with-codeigniter/)。并在我的barcode_gen 函数中包含Zend Barcode 命名空间

```
function barcode_gen() {
    $this->load->library('Zend');
    $this->zend->load('Zend/Barcode/Barcode');

    $barcodeOptions = array('text' => 'ZEND-FRAMEWORK');
    $rendererOptions = array();
    \Zend\Barcode\Barcode::factory('code39', 'image', $barcodeOptions, $rendererOptions)->render();
} 
```

--
**更新**
我正在使用 HMVC 架构，并且 Loader 类能够从 Zend 加载必要的文件，这是我的[barcode_gen](http://somethingstatic.com/setting-hmvc-codeigniter-2-1/)

```
function barcode_gen() {
    $barcodeOptions = array('text' => 'ZEND-FRAMEWORK');
    $rendererOptions = array();
    \Zend\Barcode\Barcode::factory('code39', 'image', $barcodeOptions, $rendererOptions)->render();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:31:16.180

当您使用 $this->load->library() Codeigniter 加载外部类时，Codeigniter 将类的实例放在一个名为加载的类的变量中，因此您需要以这种方式访问

由于您随后将静态调用它，因此我建议删除 CI 加载器方法并简单地包含该类：

```
public function barcode_gen()
{
   require_once('./application/libraries/Zend/Barcode/Barcode.php');
   //adjust the above path to the correct location
    $barcodeOptions = array('text' => 'ZEND-FRAMEWORK');
    $rendererOptions = array();
   Zend_Barcode::factory('code39', 'image', $barcodeOptions, $rendererOptions)->render();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T16:26:03.150

只是提到 Damien Pirsy 的代码（以及其他类似的代码[在这里](http://blog.ghostbilt.com/zend-barcodes-codeigniter/)或[这里](https://stackoverflow.com/questions/10719633/how-can-i-render-a-zend-barcode-inside-a-html-page)）是针对 Zend 版本 1 而不是版本 2。如果您下载版本 2，那么您最终会得到 `Fatal error: Class 'Zend_Barcode' not found`

我认为它也可能对其他人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-05T21:56:41.047

这个怎么样？zend条码库在第三方文件夹下

```
功能 gen_barcode($product_code = NULL, $bcs = 'code39', $height = 60, $text = 1) {
        $drawText = ($text != 1) ？错误：正确；
        $this->load->library('zend');
        $this->zend->load('Zend/条形码');
        $barcodeOptions = array('text' => $product_code, 'barHeight' => $height, 'drawText' => $drawText);
        $rendererOptions = array('imageType' => 'png', 'horizo​​ntalPosition' => 'center', 'verticalPosition' => 'middle');
        $imageResource = Zend_Barcode::render($bcs, 'image', $barcodeOptions, $rendererOptions);
        返回 $imageResource;

    }

```

# vim - Vim 替换引号内

> ID：13243657
> 
> 赞同：11
> 
> 时间：2012-11-06T02:54:50.760
> 
> 标签：vim

很多时候我发现我会想要在引号之间拉出内容并将它们粘贴到另一组引号中。例如，以这段代码为例。

```
var foo = 'bar',
    baz = 'buz'; 
```

我通常会做一个`yi'`inside of来拉出**bar**`'bar'`这个词。

 **如何用我的 yank替换**buz ？**我知道一个选择是做 a `di'"0P`，我只是想知道是否有一个我忽略的更简单的解决方案。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-06T03:03:05.660

将光标放在单词上的任意位置`buz`，`vi'p`以直观地选择引号内，然后放置最新的 yank 的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T11:32:20.507

我经常需要这个，我写了一个插件来简化并允许最大速度：[ReplaceWithRegister](http://www.vim.org/scripts/script.php?script_id=2703)。

这个插件提供了一个二合一的`gr`命令，用寄存器的内容替换被 {motion} / 文本对象、整行或当前选择覆盖的文本；旧文本被删除到黑洞寄存器中，即它消失了。它透明地处理许多极端情况，并允许通过标准`.`命令快速重复。如果您不喜欢它，它的页面有指向替代品的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T07:20:10.210

另请注意，在您以可视模式替换内容后，被替换的内容现在将在您注册中。命令 :reg 将显示它。在您的示例中，命令`p`将粘贴`buz`到编辑器中。**

# java - 尾随空格以完成 StringBuffer 宽度（Java）

> ID：13243661
> 
> 赞同：1
> 
> 时间：2012-11-06T02:55:15.180
> 
> 标签：java, string

我想创建一个有尾随空格来完成字符串缓冲区宽度的字符串。

例如：

```
Stringbuffer str = new Stringbuffer(10);  //Create a string with 10 spaces.
str.append("Hello"); 
```

输出是“Hello”，没有任何尾随空格。但我想要的是带有 5 个尾随空格的“Hello”。

在上面的例子中，由于“Hello”有 5 个字符，它后面应该有 5 个更多的尾随空格。

请指教，thx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:05:01.457

StringBuffer 实现了 Appendable。您可以使用此 StringBuffer 实例化一个 Formatter 对象，然后让 Formatter 为您完成工作：

```
StringBuilder sb = new StringBuilder();  // I prefer StringBuilder to StringBuffer
Formatter formatter = new Formatter(sb);
formatter.format("%-10s", "hello"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T02:58:39.103

只需附加一个空格，直到长度小于 10：

```
while(str.length() < 10) {
    str.append(" ");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T02:59:53.113

看起来很简单

暗示 ：

1.  一个for循环，将迭代器初始化为字符串的长度并循环它直到它是10。
2.  内部循环将空格附加到字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T03:03:48.713

这是一种正确填充您的字符串的方法。您输入字符串，然后 int 用于所需的垫。

`public static String padRight(String s, int n) { return String.format("%1$-" + n + "s", s);
}`

您可以先获取字符串，然后将其附加到您的 StringBuffer（或 StringBuilder）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T03:09:21.570

在您的代码中：

```
Stringbuffer str = new Stringbuffer(10);  //Create a string with 10 spaces. 
```

不创建包含 10 个空格的字符串。它实际上创建了一个容量为 10 的字符串。您可以查看 java 文档：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html)

对于答案，您可以遵循上面的一些答案，例如在你好之后附加空格等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T03:16:23.747

其他答案说明如何解决您的问题。我只想指出问题中的一个误解。

```
StringBuffer str = new StringBuffer(10);  //Create a string with 10 spaces. 
```

事实上，这不是 StringBuffer（或 StringBuilder）构造函数参数的含义。它实际上在做的是指定一个*初始容量*。这本质上是对实现最初为 10 个字符分配空间的提示。

*   它不*设置*内容的实际大小。实际大小取决于您放入缓冲区/构建器的字符数。

*   它不*限制*缓冲区/构建器的大小。如果添加超过 10 个字符，则该实现会安静而有效地扩展缓冲区/构建器的后备存储。

（此外，除非您*需要*线程安全的缓冲区，否则最好使用`StringBuilder`而不是`StringBuffer`.）

# android - 例外：当用户发布一条发送到服务器的评论时，没有路由到主机

> ID：13243669
> 
> 赞同：0
> 
> 时间：2012-11-06T02:56:39.383
> 
> 标签：android, android-asynctask

这种情况很少发生，而且我无法重现它，但是下面的代码有时会从没有主机的情况下出现异常。这是代码：

```
public class AddComment extends AsyncTask<String, Void, String> 
{
    @Override
    protected String doInBackground(String... theParams) 
    {
        String myUrl = theParams[0];
        final String comment = theParams[1];
        final String user_id = theParams[2];
        final String problem_id = theParams[3];
        final String recent_topic_id = theParams[4];

        String charset = "UTF-8";           
        String response = null;

        try 
        {                           
            String query = String.format("comment=%s&user_id=%s&problem_id=%s&recent_topic_id=%s", 
                     URLEncoder.encode( comment, charset), 
                     URLEncoder.encode( user_id, charset), 
                     URLEncoder.encode( problem_id, charset), 
                     URLEncoder.encode( recent_topic_id, charset)
                     );             

            final URL url = new URL( myUrl + "?" + query );

            final HttpURLConnection conn = (HttpURLConnection) url.openConnection();

            conn.setDoOutput(true); 
            conn.setRequestMethod("POST");

            conn.setDoOutput(true);
            conn.setUseCaches(false);

            conn.connect();

            InputStream stream = conn.getInputStream();
            byte[] stream_buffer = new byte[8196];
            int readCount;
            StringBuilder stream_builder = new StringBuilder();
            while ((readCount = stream.read(stream_buffer)) > -1) 
            {
                stream_builder.append(new String(stream_buffer, 0, readCount));
            }

            response = stream_builder.toString();       
        } 
        catch (Exception e) 
        {
                           // EXCEPTION HAPPENS HERE
                e.printStackTrace();
        }

        return response;
    }

    @Override
    protected void onPostExecute(String result) 
    {
           if ( result == null )
           {
                  // Do stuff
           }
        }
        else
        {               
      // Do stuff
    }        
} 
```

有谁知道为什么会发生这种情况以及如何防止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:31:31.443

你是在物理设备上测试这个吗？这可能是由于手机信号不佳，或者与您的设备或模拟器的互联网连接不稳定造成的。这也可以解释为什么你不能复制它。

# python - Python - 使用 var 值命名类的实例

> ID：13243671
> 
> 赞同：1
> 
> 时间：2012-11-06T02:56:47.623
> 
> 标签：python, class

我正在尝试实例化一个类对象，其所需的名称保存在其他地方创建的变量中。

我不知道如何使类的实例具有变量所持有的名称。

例子：

```
class foo:
    def __init__(self):
        self.var1 = "bar"

if __name__ == "__main__":
    test = "a" # returned by another func.
    [string held by variable 'test'] = foo()
    print a.var1 
```

这可能吗？（甚至是可取的......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:01:41.303

这是不可取的，因为`a`当您直到运行时才知道它的名称时，使用该变量进行编程会很困难。

您可能会考虑使用 dict 代替：

```
data = {}
test = func()   # "a"
data[test] = foo() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:03:35.373

一个函数可能更好——这样你需要做的工作被封装并且可以被重用：

```
def do_work(an_instance_of_foo):
    print an_instance_of_foo.var1

class foo:
    def __init__(self):
        self.var1 = "bar"

if __name__ == "__main__":
    do_work(foo()) 
```

如果你还需要这个词，你可以把它传递给函数：

```
def do_work(an_instance_of_foo, my_word):
    # etc. 
```

`foo`或者，如果您需要将 的实例与特定名称相关联，则可以使用字典作为命名空间（正如@unutbu 建议的那样） 。

# android - Android SQLite 简单语法错误

> ID：13243672
> 
> 赞同：0
> 
> 时间：2012-11-06T02:56:52.473
> 
> 标签：android, sqlite

我决定为我的应用添加第二个表。即使它与第一个表创建字符串几乎完全相同的设置，我也会不断收到语法错误。

```
private static final String BUDGET_TABLE = "budgets";
private static final String KEY_ROW_ID_BUDGET = "_id";
private static final String KEY_BUDGET_LIMIT = "limit";
private static final String KEY_BUDGET_CURRENT_AMOUNT = "current_amount"; 
```

此字符串在“限制”附近引发语法错误

```
private static final String BUDGET_CREATE =
        "create table "+ BUDGET_TABLE +" ( "+ KEY_ROW_ID_BUDGET+" integer primary key autoincrement, "
        + KEY_BUDGET_LIMIT+" text not null, "+ KEY_BUDGET_CURRENT_AMOUNT+" text);";

db.execSQL(BUDGET_CREATE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:05:25.183

它很简单，您可以/不应该在创建表格时使用关键字。您正在使用`limit`无效的 as 列，因此它会给您运行时错误，我建议您将其更改为`budget_limit`类似下面的内容，然后重试。

```
private static final String BUDGET_TABLE = "budgets";
private static final String KEY_ROW_ID_BUDGET = "_id";
private static final String KEY_BUDGET_LIMIT = "budget_limit";
private static final String KEY_BUDGET_CURRENT_AMOUNT = "current_amount";

private static final String BUDGET_CREATE =
        "create table "+ BUDGET_TABLE +" ( "+ KEY_ROW_ID_BUDGET+" integer primary key autoincrement, "
        + KEY_BUDGET_LIMIT+" text not null, "+ KEY_BUDGET_CURRENT_AMOUNT+" text);";

db.execSQL(BUDGET_CREATE); 
```

# sql - 如何在 ASP.NET MVC 中实现 Like 运算符？

> ID：13243673
> 
> 赞同：0
> 
> 时间：2012-11-06T02:56:52.943
> 
> 标签：sql, asp.net-mvc, json

我仍在使用数据库（SQL）中的数据处理我的自动完成文本框，我认为我没有得到文本框的任何结果，因为我的 select 语句中有错误或缺失这是我当前代码的样子。这是我的视图的 json 代码：

```
 $(function () {
        $("#autoCompleteText").autocomplete({
            source: function (request, response) {
                var autoSearch = { searchText: $("#autoCompleteText").val() };
                $.ajax({
                    type: "POST",
                    traditional: true,
                    url: "/Products/jsonAutoComplete",
                    data: autoSearch,
                    dataType: "json",
                    success: function (data) {
                        response(data.d);
                    },
                    error: function (result) {
                        alert("Error");
                    }
                });
            },
            delay: 0,
            minLength: 2
        });
    }); 
```

我非常确定它可以工作，因为每当我在我的控制器上运行断点时，jsonAutoComplete 方法就会运行，但我希望出现在自动完成上的 productName 始终为空。这是我的带有 select 语句的代码：

```
 public JsonResult jsonAutoComplete(string searchText)
    {
        JsonResult data= new JsonResult();
        IList<Products> products = null; products = (from c in db.Products where c.CompanyId.Equals(companyId) && (c.ProductName.Contains("'%" + searchText + "%'")) select c).ToList();
Products prod = new Products();
        int productId = prod.Id;
        string productName = prod.ProductName;
        data.Data = new { productId = productId, productName = productName };
        return data;
    }` 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T03:30:34.487

您不能在 Linq 中使用 SQL 运算符或 SQL 语法，因为这就是重点：Linq 旨在抽象出 SQL，因为`%`它是 T-SQL 特定的通配符语法。

只需使用此谓词即可：

```
from c in db.Products
where c.ProductName.Contains( searchText ) 
select c 
```

然而，Linq 对于自由文本搜索确实不是很好。为了更好的搜索系统，我会使用 SQL Server 全文索引，然后生成动态 SQL 来搜索搜索查询中的每个术语，而不是简单的字符串搜索（因为它为用户提供了更多的控制和搜索结果，并且使它的行为更像谷歌）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T05:07:30.667

您也可以使用如下所述

```
 from c in db.Products
    where SqlMethods.Like(c.ProductName, "%searchtext%")
    select *; 
```

或者，您也可以使用`.StartsWith()`or`.EndsWith()`或`.Contains()`。

# html - 如何使用 CSS 获得具有不同颜色主体的圆角表？

> ID：13243676
> 
> 赞同：4
> 
> 时间：2012-11-06T02:57:51.130
> 
> 标签：html, css, html-table

我需要制作带有圆角的下表和不同颜色的表体：

![在此处输入图像描述](../Images/bc4e15d9e232d2a384a6e3ebfb71ac36.png)

这是我的桌子：

```
<table class="form_caja">
        <tr><th>Referidos</th></tr>

        <tr><td>Numero</td><td>Companhia</td><td>Nombre</td><td>Apellido</td><td>Email</td></tr>

            <tr><td>0976343344</td><td>PERSONAL</td><td>f</td><td>asd</td><td></td></tr>

            <tr><td>0992123123</td><td>CLARO</td><td>dA</td><td>de</td><td></td></tr>

            <tr><td>0963555457</td><td>CLARO</td><td>f</td><td>sdf</td><td></td></tr>

            <tr><td>0963555345</td><td>CLARO</td><td>e</td><td>de</td><td></td></tr>

    </table> 
```

这是风格：

```
.form_caja {
    width: 524px;
    padding-top: 8px;
    padding-bottom: 15px;
    margin: 0 auto 20px auto;
    background: #446bb3;

     border-radius: 15px;

    -moz-border-radius: 15px;

    -webkit-border-radius: 15px;
    color: #446bb3;
} 
```

这是我到目前为止得到的：

![在此处输入图像描述](../Images/920ca45a2e5b02650b52fb2ecdb78a63.png)

我应该怎么做才能得到一张想要的桌子？

小提琴：http: [//jsfiddle.net/dQY9D/](http://jsfiddle.net/dQY9D/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T03:12:17.180

更改 HTML 的结构并在 CSS 下应用

### HTML

```
<div class="form_caja">
  <table>
         <thead><tr><td></td></tr></thead>
         <tbody><tr><td></td></tr></tbody>
  </table>
</div> 
```

### CSS

```
form_caja {
        width: 524px;
        padding-top: 8px;
        padding-bottom: 15px;
        margin: 0 auto 20px auto;
        background-color: #446bb3;    
         border-radius: 15px;    
        -moz-border-radius: 15px;    
        -webkit-border-radius: 15px;
        color: #446bb3;
        padding:10px;
    }
    table { background-color : #fff; color : #453}
    thead { background-color: #446bb3  ; color :#fff; padding:4px; line-height:30px }
    tbody tr:nth-child(even) {background: #CCC}
    tbody tr:nth-child(odd) {background: #FFF} 
```

​</p>

[`working DEMO`](http://jsfiddle.net/dQY9D/3/)根据您的要求查看并申请

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T03:00:29.043

您需要为内部标签创建更多类，例如：

```
.form_caja td {
   color:#ffffff;    
} 
```

​已经有很多关于这个话题的[答案。](https://stackoverflow.com/questions/474216/what-is-the-best-way-to-style-alternating-rows-in-a-table)

# android - 为什么 listFragment 会自动调整大小

> ID：13243678
> 
> 赞同：1
> 
> 时间：2012-11-06T02:58:10.273
> 
> 标签：android, scrollview, android-linearlayout, android-softkeyboard, android-listfragment

我的 UI 布局是这样的；

![布局](../Images/ad40bf55c69b7da832167f169e4cf6c0.png)

我的问题是，当屏幕有足够的空间容纳 FrameLayout 的 ListFragment 的 Fragment 时，ListFragment 会完全显示出来。但如果屏幕太小，ListFragment 会被自动压缩，无法完整显示其内容。

我期待的效果是，如果屏幕太小，会出现滚动条，而不是改变ListFragment的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-28T13:52:05.013

使用 SD 的响应，我对 and 也有同样的问题，`ScrollView`尽管`ListFragment`它在布局上是强制的，但列表始终具有相同的高度。离开 FrameLayout`ScrollView`这个问题就消失了。在您的情况下，`View`定制您的`ListView`每个项目都会有所不同可能是一个好主意。第一项可能是第一项`TextBox`，第二项将是第一项`Fragment`，依此类推。我希望这个回答对你有所帮助。

# inheritance - 使用 CoffeeScript `extends` 与 Backbone.js `extend` 的根本区别

> ID：13243679
> 
> 赞同：18
> 
> 时间：2012-11-06T02:58:18.563
> 
> 标签：inheritance, backbone.js, coffeescript

`extends`使用 CoffeeScript与 Backbone.js的根本区别是什么`extend`？

例如，如何

```
class User extends Backbone.Model 
```

不同于

```
User = Backbone.Model.extend() 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-06T03:46:51.657

两者旨在等效。引用 Backbone.js 更改日志：

> 0.3.0：Backbone 类现在可以被 CoffeeScript 类无缝继承。

CoffeeScript`Child extends Parent`和 Backbone`Child = Parent.extend()`都做了三件重要的事情：

1.  **（最重要的）**他们设置`Child.prototype`为`new ctor`，其中`ctor`是原型为 的函数`Parent.prototype`。这建立了原型继承。
2.  他们将所有`Parent`的静态属性复制到`Child`.
3.  他们设置`Child.__super__ = Parent`。这主要是为了在's 方法中支持 CoffeeScript 的 Ruby-like`super`关键字。`Child`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T20:29:30.907

有一些差异。如果你使用 Backbone 的`extend()`方法，你就会失去 CoffeeScript 的类语法糖`super`和静态属性/方法。

```
Model = Backbone.Model.extend
  set: (attrs, options) ->
    super 
```

编译为（不正确）...

```
var Model;
Model = Backbone.Model.extend({
  set: function(attrs, options) {
    return set.__super__.constructor.call(this, arguments);
  }
}); 
```

你可以这样使用 super ：

```
Model = Bakbone.Model.extend()
Model::set = ->
  super 
```

编译为（正确）...

```
var Model;
Model = Backbone.Model.extend();

Model.prototype.set = function() {
  return Model.__super__.set.apply(this, arguments);
}; 
```

coffeescript 类的缺点，取决于您如何组织和编译代码，每个类都可以将 CoffeeScript 的`__extends()`函数附加到已编译 javascript 中类定义的顶部。重复数十次的额外代码可以大大增加您的文件。如果使用将代码包装在 common.js 模块中的框架，则尤其如此。

所以我会`extend()`默认使用 Backbone 的精益编译代码。然后，当您有一个可以很好地使用coffeescript 类语法的特殊情况时，请继续使用它...*谨慎使用*。

# email - 通过大型机上的 SMTP 发送没有正文内容的电子邮件

> ID：13243684
> 
> 赞同：2
> 
> 时间：2012-11-06T02:58:47.827
> 
> 标签：email, smtp, mainframe, jcl

SMTP MIME 消息一直运行良好，直到几周。突然，电子邮件的正文内容为空白且未显示任何数据，**正在发送电子邮件，但电子邮件中没有正文内容，但主题行是合适的。**有人可以让我知道它是否与内部支持问题有关，或者某些东西已被 SMTP 实用程序弃用。感谢您的回复。

**技术细节如下：**实用程序**`IEBGENER`**用于将电子邮件数据复制到 SMTP MIME 服务器。这是使用的 JCL：

```
//SENDEMAIL EXEC PGM=IEBGENER                            
//SYSIN    DD DUMMY                                      
//SYSUT1   DD DSN=EMAIL.INPUT.DS,DISP=SHR
//SYSUT2   DD SYSOUT=(B,SMTP)                            
//SYSOUT   DD SYSOUT=*                                  
//SYSPRINT DD SYSOUT=* 
// 
```

EMAIL.INPUT.DS 包含

```
HELO IEFSSxx                                            
MAIL FROM:<MYTEST@TESTING.COM>                    
RCPT TO:<YOURTEST@TESTING.COM>                      
DATA                                                    
FROM:     MYTEST@TESTING.COM 
TO:       YOURTEST@TESTING.COM 
SUBJECT:  TEST MESSAGE FROM MVS USING SMTP              
MIME-VERSION: 1.0 
CONTENT-TYPE: TEXT/HTML;BOUNDARY="SIMPLE BOUNDARY"
--SIMPLE BOUNDARY
THIS IS A LINE IN THE BODY OF THE NOTE.                  
--SIMPLE BOUNDARY
.
QUIT 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T19:41:45.040

我怀疑您的 SMTP 服务已升级，并且可能对设置消息时的错误更加敏感——您的示例有一些...

该`boundary`参数的子`Content-type`参数与多部分消息相关（它是消息部分之间的边界分隔符）。您的`Content-type`消息并非如此，我想可能已经放弃`multipart`了对子参数的“支持”，从而产生了不可预测的结果。`boundary`

您可能会发现查看描述 MIME 格式的[RFC 2045](http://www.ietf.org/rfc/rfc2045.txt)和[RFC 2046](http://www.ietf.org/rfc/rfc2046.txt)很有用。子参数的规则`boundary`在 RFC2046 中的 multipart messages 下定义。

在多部分消息中正确使用边界分隔符通常要求边界分隔符后跟一个空行。此外，最后一个边界分隔符，即终止消息最后一部分的分隔符应该附加两个连字符。

考虑到所有这些，符合标准的消息看起来更像：

```
HELO IEFSSxx                                            
MAIL FROM:<MYTEST@TESTING.COM>                    
RCPT TO:<YOURTEST@TESTING.COM>                      
DATA                                                    
FROM:     MYTEST@TESTING.COM 
TO:       YOURTEST@TESTING.COM 
SUBJECT:  TEST MESSAGE FROM MVS USING SMTP 
MIME-Version: 1.0
Content-type: multipart/mixed; boundary="SIMPLE BOUNDARY"

--SIMPLE BOUNDARY

Please open the attachment, to solve your problems...
--SIMPLE BOUNDARY
Content-type: text/html

Try asking <a href="http://www.stackoverflow.com">Stackoverflow</a>
--SIMPLE BOUNDARY--
.
QUIT 
```

请注意，上述示例中的空白行很重要，并且最后一个`boundary`分隔符有两个尾随连字符。

# javascript - 当标签栏按下钛时如何更改当前窗口内容？

> ID：13243688
> 
> 赞同：0
> 
> 时间：2012-11-06T02:58:53.050
> 
> 标签：javascript, titanium, titanium-mobile

有谁知道在钛中按下选项卡栏时如何更改窗口的视图？我已经创建了标签栏，但我不知道如何处理该事件..

这是我的代码：

```
 if (Titanium.Platform.osname === 'iphone'){
        var headerDetailTabbedBar = Titanium.UI.iOS.createTabbedBar({
            labels:['Header', 'Detail'],
            backgroundColor:'#336699',
            style:Titanium.UI.iPhone.SystemButtonStyle.BAR,
            top:10,
            height:25,
            width:'85%',
            index:0
        });

        //View Mode
        var btnBack = Titanium.UI.createButton({
            title:'Back',
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED
        });

        var btnEdit = Titanium.UI.createButton({
            title:'Edit',
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED
        });

        //Save Mode
        var btnCancel = Titanium.UI.createButton({
            title:'Cancel',
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED
        });

        var btnSave = Titanium.UI.createButton({
            title:'Save',
            style:Titanium.UI.iPhone.SystemButtonStyle.BORDERED
        });

        subMenuDisplayEditWindow.setLeftNavButton(btnBack);
        subMenuDisplayEditWindow.setRightNavButton(btnEdit);

        subMenuDisplayEditWindow.add(headerDetailTabbedBar);

        headerDetailTabbedBar.addEventListener('click',function(e){
            if(e.index === 0){
                //What should i do?
            }
            else{
                //What should i do?
            }
        });
    } 
```

我想要的只是在按下选项卡栏时用其他视图更改窗口的视图..有什么建议吗？提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T07:30:17.380

```
var window = Ti.UI.createWindow();
var headerDetailTabbedBar = Titanium.UI.iOS.createTabbedBar({
  labels : ['Header', 'Detail'],
  backgroundColor : '#336699',
  style : Titanium.UI.iPhone.SystemButtonStyle.BAR,
  top : 10,
  height : 25,
  width : '85%',
  index : 0
});
window.add(headerDetailTabbedBar);
var view1 = Ti.UI.createView({
  backgroundColor : 'white',
  top : 50
});
var view2 = Ti.UI.createView({
  backgroundColor : 'red',
  top : 50
});
window.add(view2);
window.add(view1);

headerDetailTabbedBar.addEventListener('click', function(e) {
if (e.index == 0) {
    view1.visible = true;
    view2.visible = false;
} else {
    view1.visible = false;
    view2.visible = true;
}
});
window.open(); 
```

只需更改单击时视图的可见性。

# java - wav 文件中特定点的分贝值

> ID：13243690
> 
> 赞同：5
> 
> 时间：2012-11-06T02:58:57.800
> 
> 标签：java, linux, audio, command-line

我正在尝试测量 wav 文件的导入和导出。最好是第一个和最后一个5秒左右。我基本上是在尝试分配一个数值，表示“这首歌的引导速度很慢”或“这首歌的结尾很突然”。

我的想法是获得 dB 值的斜率，但我似乎找不到可以给我 dB 值的 linux 命令行工具。我知道它们可以被测量，因为 Audacity 有一个波形（db）视图。

![在此处输入图像描述](../Images/4e328584932b9984857b00dfc40cf27b.png)

基本上我正在寻找一种方法来收集数据点来复制这个图，这样我就可以得到斜率。

编辑 - 在java中工作

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T03:38:50.897

我不知道有任何命令行工具可以做到这一点，但是使用`scipy`库编写具有此功能的 python 脚本相当简单。

我们可以使用`scipy.io.wavfile`文件 IO，然后自己计算 dB 值（请注意，这些不一定是标准 dB 值，因为这些值取决于您的扬声器和音量设置）。

首先我们得到文件：

```
from scipy.io.wavfile import read
samprate, wavdata = read('file.wav') 
```

然后我们将文件拆分成块，其中块的数量取决于您想要测量体积的精细程度：

```
import numpy as np
chunks = np.array_split(wavdata, numchunks) 
```

最后，我们计算每个块的体积：

```
dbs = [20*log10( sqrt(mean(chunk**2)) ) for chunk in chunks] 
```

现在`dbs`是文件每个块的 dB 值列表（同样，不一定是真实的 SPL 声级）。

您还可以使用重叠块等以不同的方式轻松拆分数据。

参考： - [scipy.io.wavfile](http://www.scipy.org/doc/api_docs/SciPy.io.wavfile.html) - [dB (SPL)](http://en.wikipedia.org/wiki/Sound_pressure#Sound_pressure_level)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-20T02:34:21.430

对于那些尝试在@Isaac 的答案中使用 Python 脚本的人，我将其清理干净（我也不知道 Python，但我让它工作了）。一些注意事项：

1.  您需要 python 3+ 才能使用统计包（请参阅这篇适用于 Mac 的优秀文章 - [https://opensource.com/article/19/5/python-3-default-mac](https://opensource.com/article/19/5/python-3-default-mac)）
2.  你需要 scipy - 在 Mac 上是： pip install scipy

```
from scipy.io.wavfile import read
samprate, wavdata = read('intro.wav')
import numpy as np
import math
import statistics 
# basically taking a reading every half a second - the size of the data 
# divided by the sample rate gives us 1 second chunks so I chop 
# sample rate in half for half second chunks
chunks = np.array_split(wavdata, wavdata.size/(samprate/2))
dbs = [20*math.log10( math.sqrt(statistics.mean(chunk**2)) ) for chunk in chunks]
print(dbs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:58:29.917

这里只是关于 SO 的几个问题，关于在 Java 中读取音频文件和绘制波形和波形概览。

[如何在 Java 中创建声音文件](https://stackoverflow.com/questions/13090757/how-can-i-create-a-sound-file-in-java)

[如何从我的 wav 文件中提取声音数据？](https://stackoverflow.com/questions/12879210/how-can-i-draw-sound-data-from-my-wav-file)

[为音频文件创建 PNG 波形的 Java 程序](https://stackoverflow.com/questions/11017283/java-program-that-create-a-png-waveform-for-an-audio-file)

# cmd - 用于处理名称中日期文件的批处理脚本

> ID：13243693
> 
> 赞同：3
> 
> 时间：2012-11-06T02:59:27.700
> 
> 标签：cmd, batch-file

假设我的目录包含这些文件

```
dir C:\data\
Statistics_A-1-1_2012-10-21 00_10_19.csv
Statistics_B-1-1_2012-10-21 00_12_01.csv 
```

如何批量编写脚本来获取今天的日期并获取其中包含该日期的所有文件。如果文件缺少标签 A-1-1 或标签 B-1-1，它应该为该标签的丢失文件打印错误。理想情况下，我想提供一个日期范围作为脚本的参数。如果未提供，则默认为今天的日期

我习惯于 bash 和 Windows 编程新手。我也没有任何可用的脚本语言，例如 perl、python 等。任何帮助表示赞赏。干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:03:46.423

获取日期部分的最简单方法是使用 WMIC。（因为您没有提到要对文件执行的操作，此处仅列出）：

**编辑版本：**

```
 @echo off
    FOR /F "skip=1 eol=D tokens=1,2,3 delims= " %%A IN ('WMIC Path Win32_LocalTime Get Year^,Month^,Day /Format:table') DO (
            SET TODAY=%%A-%%B-%%C
            setlocal ENABLEDELAYEDEXPANSION
            if [!TODAY!] NEQ [--] (
                goto :(endOfLoop^)
            )
            endlocal

    )
    :(endOfLoop^)
    echo %TODAY%

        DIR /B "Statistics_A-1-1_%TODAY% *.csv"
        DIR /B "Statistics_B-1-1_%TODAY% *.csv" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T21:28:33.657

```
@echo off
for /F "tokens=1-3 delims=/" %%a in ("%date%") do set today=%%c-%%a-%%b
for %%a in (*%today%*.csv) do (
   for /F "tokens=2 delims=_ " %%b in ("%%a") do (
      if %%b equ %today% (
         echo %%a       ERROR: Missing tab
      ) else (
         echo %%a
      )
   )
) 
```

您可以通过这种方式使用 Julian Day Numbers 处理一系列日期：

```
set startJDN=Julian Day Number of start of range
set endJDN=Julian Day Number of end of range
for %%a in (*%today%*.csv) do (
   set fileJDN=Julian Day Number of file %%a
   if !fileJDN! geq %startJDN% if !fileJDN! leq %endJDN% (
      echo The file is in range, process it...
   )
) 
```

请参阅此帖子：[用于移动文件的 Bat 文件](https://stackoverflow.com/questions/13252425/bat-file-for-moving-files/13258157#13258157)

# version-control - 将代码从 Git/Bitbucket 更新到实时服务器

> ID：13243694
> 
> 赞同：10
> 
> 时间：2012-11-06T02:59:46.800
> 
> 标签：version-control, github, bitbucket

如何使用通过 Git/Bitbucket 所做的更改来更新我的实时服务器？

有免费服务吗？

是否可以使用某种可以与 cronjob 集成的 API 来做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T08:05:07.843

您可以使用[BitBucket 服务挂钩](https://confluence.atlassian.com/display/BITBUCKET/Managing+bitbucket+Services)。
它们在“[使用 Bitbucket 进行自动化部署](http://brandonsummers.name/blog/2012/02/10/using-bitbucket-for-automated-deployments/)”中进行了说明，并且该文章使用了[POST 服务](https://confluence.atlassian.com/display/BITBUCKET/POST+Service+Management)。

> Bitbucket POST 到您指定的服务 URL。每当用户推送到存储库时，
> 该服务都会收到一个。 的内容标头具有类型。 该服务的行为类似于 HTTP 发布/订阅服务。 有效负载已预先添加到实际有效负载。有效负载是 url 编码内容。`POST`
> `POST``application/x-www-form-urlencoded`
> 
> `payload=`
> 
> POST 请求的正文包含有关更改起源的存储库、最近提交的列表以及进行推送的用户的信息。

* * *

关于 GitHub，请参阅描述如何使用[**Post-receive**](https://help.github.com/articles/post-receive-hooks)[挂钩的](https://help.github.com/articles/post-receive-hooks)[此过程](https://gist.github.com/1809044)[](https://help.github.com/articles/post-receive-hooks)

 **![WebHookURL](../Images/8f565c5131854c6dababdb1b8ff482b8.png)**

# matlab - 如何在matlab中直接创建逻辑矩阵

> ID：13243697
> 
> 赞同：22
> 
> 时间：2012-11-06T03:00:15.340
> 
> 标签：matlab, matrix

到目前为止我一直在使用

```
 a = logical(zeros(10,10)) 
```

创建逻辑矩阵。

有没有办法直接创建？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-06T03:02:57.580

直接使用[false](http://www.mathworks.com/help/matlab/ref/false.html)：

```
a = false(10,10); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-06T10:23:32.513

在 Matlab 中，有一些“常数”实际上是矩阵生成命令。他们是：

```
true(10);   true(n,m,k,..);   % for an all-true  10-by-10 or n-by-m-by-k-by-...matrix
false(10);  false(n,m,k,..);  % for an all-false 10-by-10 or n-by-m-by-k-by-...matrix
inf(10);    inf(n,m,k,..);    % for an all-inf   10-by-10 or n-by-m-by-k-by-...matrix
nan(10);    nan(n,m,k,..);    % for an all-nan   10-by-10 or n-by-m-by-k-by-...matrix 
```

“常量”形式基本上只是别名：

```
a = inf;   % alias for a = inf(1);
b = true;  % alias for b = true(1); 
```

等等。此外，这里还有一些不能重复的内容：

```
rand(10);  rand(n,m,k,..);    % for an all-random 10-by-10 or n-by-m-by-k-by-...matrix
zeros(10); zeros(n,m,k,..);   % for an all-zero   10-by-10 or n-by-m-by-k-by-...matrix
zeros(n,m,k,...,'uint8');     % for an all-zero   n-by-m-by-k-by-...matrix of type uint8
ones(10); zeros(n,m,k,..);    % for an all-one    10-by-10 or n-by-m-by-k-by-...matrix
ones(n,m,k,...,'uint8');      % for an all-one    n-by-m-by-k-by-...matrix of type uint8
eye(10); eye(n,m,'uint8');    % for an identity matrix of type uint8 of 10-by-10 or n-by-m 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-06T03:15:49.610

`logical`Matlab 的逻辑数据类型除了函数本身之外似乎没有构造函数。话虽如此，您可以非常轻松地将双精度数组有效地类型转换为逻辑数组，其中所有非零值都变为逻辑 1，所有零值变为逻辑 0：

```
A = [1 0 2; -1 0 0; 0 1.53 -100.00]

B = logical(A)

B = 
   1     0     1
   1     0     0
   0     1     1 
```

如果您愿意，您显然可以将此赋值压缩为一行，因此它变得几乎与分配任何其他数据类型一样简单。

# redis - 为什么一个 500MB 的 Redis dump.rdb 文件需要大约 5.0GB 的内存？

> ID：13243701
> 
> 赞同：14
> 
> 时间：2012-11-06T03:00:34.533
> 
> 标签：redis

实际上，我有 3 个 Redis 实例，我把它们放在了这个 500MB 以上的 dump.rdb 中。Redis服务器可以读取这个dump.rdb，看起来一切正常。然后我注意到 redis-server 花费了超过 5.0GB 的内存。我不知道为什么。

我的文件有什么问题吗？我的数据库有大约 300 万个键，每个键的值是一个包含大约 80 个整数的列表。

我使用此[方法](https://stackoverflow.com/questions/10083432/combine-two-redis-instances-into-a-single-instance-with-two-dbs)将 3 个实例放在一起。

PS：另一个相同大小和相同键值结构的dump.rdb只消耗1GB内存。

我的数据看起来像 keyNum->{num1, num2, num3,......}。所有数字都在 1 到 4,000,000 之间。那么我应该使用 List 来存储它们吗？现在，我使用 lpush(k, v)。这种方式是不是太费钱了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-06T03:36:17.727

内存与转储大小的比率取决于 Redis 内部使用的数据类型。

对于小对象（散列、列表和排序集），redis 使用 ziplist 对数据进行编码。对于由整数组成的小集合，redis 使用 Intsets。ZipLists 和 IntSets 存储在磁盘*上的格式与它们存储在内存中的格式相同*。因此，如果您的数据使用这些编码，您会期望 1:1 的比率。

对于较大的对象，内存中的表示与磁盘上的表示完全不同。磁盘格式是压缩的，没有指针，不必处理内存碎片。因此，如果您的对象很大，则内存与磁盘的比率为 10:1 是正常的和预期的。

如果您想知道哪些对象占用了内存，请使用[redis-rdb-tools](https://github.com/sripathikrishnan/redis-rdb-tools)来分析您的数据（免责声明：我是该工具的作者）。从那里，遵循[redis.io 上的内存优化说明](http://redis.io/topics/memory-optimization)，以及[redis-rdb-tools 上的内存优化 wiki 条目](https://github.com/sripathikrishnan/redis-rdb-tools/wiki/Redis-Memory-Optimization)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:03:04.143

可能还有更多，但我相信 Redis 会压缩转储文件。

# jquery - Jquery Accordion - 在标题元素中隐藏和显示文本

> ID：13243704
> 
> 赞同：2
> 
> 时间：2012-11-06T03:01:02.130
> 
> 标签：jquery, html, jquery-ui, css, jquery-ui-accordion

我有一个 JQuery 手风琴，其中标题部分中的文本可能很长。

```
<div id="accordion">
    <h3><a href="#">Title 1</a></h3>
    <div>
        Content 1
    </div>
    <h3><a href="#">Title 2 is really really long. Ideally, only a part of title 2 will be displayed here and the remaining text should be displayed when the accordion is expanded</a></h3>
    <div>
        Content 2
    </div>
    <h3><a href="#">Title 3</a></h3>
    <div>
        Content 3
    </div>
    <h3><a href="#">Title 4</a></h3>
    <div>
        Content 4
    </div>
</div>​ 
```

小提琴示例：

[http://jsfiddle.net/865M9/](http://jsfiddle.net/865M9/)

有没有一种方法可以在手风琴关闭时仅显示标题的前 20 个字符，然后在手风琴元素处于活动状态（展开）时展开文本以显示完整的字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T03:12:45.370

您可以使用 CSS 将标题限制为一行。

例如：

```
.ui-accordion-header.ui-state-default a {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
} 
```

[http://jsfiddle.net/jmKu4/](http://jsfiddle.net/jmKu4/)

# ssas - SSAS 维度层次结构：处理时发现重复的属性键

> ID：13243718
> 
> 赞同：3
> 
> 时间：2012-11-06T03:02:40.117
> 
> 标签：ssas, olap, cube

我对 SSAS 完全陌生，我正在尝试部署一个简单的多维数据集，其中只有一个维度由多个属性组成。我已经做的是从我的数据源创建一个 DSV，然后从我的事实表创建一个维度。似乎无论发生什么，我都会收到以下错误消息：

`Errors in the OLAP storage engine: A duplicate attribute key has been found when processing: Table: 'dbo_Fact_Statistics', Column: 'Team', value: 'ANA'. The attribute is 'Team'.`

这是我的层次结构：Id (SK) -> Player id -> Team -> Player Name -> Salary

我不明白，显然问题不在于该值为空，就像我在其他线程中看到的那样，告诉我设置为自动以外的其他内容，但这不是这种情况下的问题`NullProcessing`。`KeyColumns`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T03:29:11.277

可能您在多个球员姓名和/或薪水值下列出了团队 ANA。

这是 SSAS 的一个非常棘手的领域。最快的方法可能是安装 BIDS Helper 并使用“维度健康检查”功能：

[http://bidshelper.codeplex.com/wikipage?title=Dimension%20Health%20Check&referringTitle=Documentation](http://bidshelper.codeplex.com/wikipage?title=Dimension%20Health%20Check&referringTitle=Documentation)

它将向您显示数据中的所有问题（不仅仅是您迄今为止发现的第一个问题），并为您提供有关如何继续的一些信息。

由于调试和修复这些问题的困难，我个人已经不再建立属性关系。我现在倾向于构建每个属性都与关键属性直接相关的维度。您永远不会看到这些错误，并且性能似乎非常相似。您仍然可以向用户呈现层次结构。

如果这不是您的选择，那么您可以尝试将较高级别属性的列添加到所有较低级别的 Key 属性中。从技术上讲，这将起作用，但设置和维护起来很尴尬。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T07:46:21.107

这种方法解决了我的问题：

我没有让属性遵循链式关系，而是让关系保持默认状态。

```
Player id (SK) -> Conference
Player id (SK) -> Division  
Player id (SK) -> Team 
Player id (SK) -> Player Name 
Player id (SK) -> Salary 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-07T08:42:02.693

在 sql 中运行它找到您的重复项，例如 ID ... 将其用作我的维度键

```
Select id,count(*) as how_many
from [RC_Dailer_WH].[dbo].[RC_call_logs]
group by id
having count(*) > 1 
```

（受影响的 3647 行）我的数据库中有超过 50k 条记录

删除重复项然后我的多维数据集正确处理

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T08:49:11.833

去它显示错误的那个维度。并右键单击查看代码

并在该代码中搜索以下行：

报告并停止

删除该 XML 标记并保存

并重新处理它会起作用

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-19T10:30:28.173

转到显示错误的维度。并右键单击 - 去查看代码 -

CTRL+F - 搜索连接 - 查找
ReportAndStop 连接字符串。从代码中删除上述命令 - 并保存。再处理一次。

它会起作用的。

# ruby-on-rails - 通过许多现有关联自动创建关联

> ID：13243726
> 
> 赞同：0
> 
> 时间：2012-11-06T03:03:16.643
> 
> 标签：ruby-on-rails, dynamic, associations, ruby-on-rails-3.2, has-many-through

我正在开发一个引擎，其中任何模型都可以与 Permit as Permissible 有 has_many 关联：

```
class Permit < ActiveRecord::Base
  belongs_to :permissible, polymorphic: true
end

module Permissible
  def self.included(base)
    base.class_eval do
    has_many :permits, as: :permissible
  end
end

class Group < ActiveRecord::Base
  include Permissible
end

class GroupAllocation < ActiveRecord::Base
  belongs_to :person
  belongs_to :group
end

class Person < ActiveRecord::Base
  include Permissible
  has_many :group_allocations
  has_many :groups, through: :group_allocations
end

class User < ActiveRecord::Base
  belongs_to :person
end 
```

因此，Group has_many :permits 和 Person has_many :permits。我正在尝试做的是在使用许可关联作为源的用户上动态创建关联，并通过执行相同操作将其他模型上的关联链接到用户。这可以通过以下方式手动完成（在 rails 3.1+ 中）：

```
class Person
  has_many :group_permits, through: :person, source: :permits
end

class User
  has_many :person_permits, through: :person, source: :permits, class_name: Permit
  has_many :person_group_permits, through: :person, source: :group_permits, class_name: Permit
end 
```

然而，在实践中，Permissible 将包含在许多模型中，所以我试图在 User 上编写一个类方法（实际上是在另一个模块中，但不需要更多地混淆事物），它可以遍历 User.reflect_on_all_associations 并创建一个数组新的关联，每个关联可能很深。

寻找有关如何在 rails 3.2.8 中干净地执行此操作的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T10:51:08.083

这是我的做法（实现代码与问题中给出的细节略有不同）：

module Authorisable def self.included(base) base.class_eval do base.extend ClassMethods end end

```
module ClassMethods
  class PermissionAssociationBuilder
    def build_permissions_associations(klass)
      chains = build_chains_from(klass)
      chains.select! {|c| c.last.klass.included_modules.include? DistributedAuthorisation::Permissible}
      permissions_associations = []
      chains.each do |chain|
        source_name = :permissions
        chain.reverse.each do |r|
          assoc_name = :"#{r.name}_#{source_name}"
          r.active_record.has_many assoc_name, through: r.name.to_sym, source: source_name, class_name: DistributedAuthorisation::Permission
          source_name = assoc_name
        end
        permissions_associations << source_name
      end
      return permissions_associations
    end

    private

    def build_chains_from(klass)
      chains = reflections_to_follow(klass).map {|r| [r]}
      chains.each do |chain|
        models = chain.map {|r| r.klass}.unshift klass
        reflections_to_follow(models.last).each do |r|
          chains << (chain.clone << r) unless models.include? r.klass
        end
      end
    end

    def reflections_to_follow(klass)
      refs = klass.reflect_on_all_associations
      refs.reject {|r| r.options[:polymorphic] or r.is_a? ActiveRecord::Reflection::ThroughReflection}
    end
  end

  def permissions_associations
    @permissions_associations ||= PermissionAssociationBuilder.new.build_permissions_associations(self)
  end
end 
```

可能不是最有效的方法，但它使用 Klass.permissions_associations 添加了我所追求的链，并将它们的符号存储在类实例变量中。

我很高兴听到有关如何改进它的建议。

# .net - 提交时打印文本 - VB.NET 2012、MVC 4、Visual Studio 2012

> ID：13243727
> 
> 赞同：0
> 
> 时间：2012-11-06T03:03:17.150
> 
> 标签：.net, asp.net-mvc, vb.net

**使用的工具：** VB.NET 2012、MVC 4、Visual Studio 2012

## 控制器：SubmitFormController.vb

```
Namespace MvcApplication19
    Public Class UserNamePrintOutSubmitClassController
        Inherits System.Web.Mvc.Controller

        ' This method will handle GET
        Function Technology() As ActionResult
            Return View("Technology")
        End Function

        ' This method will handle POST
        <HttpPost>
        Function UserNamePrintOut() As ActionResult
            ' Do something
            Response.Write("Hello " & Request.QueryString("UserName") & "<br />")
            Return View()
        End Function
    End Class
End Namespace 
```

## 视图：Technology.vbhtml

**网址：** `http://localhost/Home/Technology/`

```
<form action="" method="post">
    <input type="text" name="UserName" />
    <input type="submit" name="UserName_submit" value="Print It Out!" />
</form> 
```

## 问题

在这个例子中我没有模型。目的是`UserName`使用提交按钮提交并将其打印在屏幕上，`on page load`. 这意味着，`UserName`应该传递给`action method`并打印在屏幕上。

我没有错误消息，但是，`UserName`屏幕上没有打印出来，也许有人可以看看上面的代码。

我一直在尝试使用通常在 C# 中的教程。我的背景是 PHP，我仍然倾向于从“echo”的角度来思考——然而，我已经习惯了 MVC 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:35:36.310

您使用的是 ASP.NET MVC，而不是 WebForms；然而，“回发”的概念是 WebForms 独有的。这就像在实际使用 WPF 时使用 System.Windows.Forms。

在 MVC 中，每个动词都有不同的方法，您应该将其重写如下：

```
Public Class SubmissionFormController
    Inherits System.Web.Mvc.Controller

    ' This method will handle GET
    Function UserNamePrintOut() As ActionResult
        Return View() ' Avoid using Response.Write in a controller action method, as the method is not being called in an appropriate place. Anything returned will be at the start of the response.
    End Function

    ' This method will handle POST
    <HttpPost>
    Function UserNamePrintOut(FormValueCollection post) As ActionResult
        ' Do something
        Return View()
    End Function

End Class 
```

# google-chrome - 提取网页的 URL 和标题

> ID：13243734
> 
> 赞同：1
> 
> 时间：2012-11-06T03:04:16.917
> 
> 标签：google-chrome, google-chrome-extension

当用户在浏览某个 URL 时单击我的 Google Chrome 扩展程序上的按钮时，我希望扩展程序将 URL 以及`<title>`页面的标题（在 HTML 标记中指定）发送到服务器。有没有办法获取当前页面（用户所在的页面）的 URL 和标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:18:23.107

您可以使用[`chrome.tabs.getCurrent()`](http://developer.chrome.com/extensions/tabs.html#method-getCurrent)获取当前选项卡。然后您可以从[Tab 对象](http://developer.chrome.com/extensions/tabs.html#type-Tab)中获取标题和 URL ，它们将传递给回调：

```
chrome.tabs.getCurrent(function (tab) {
  var title = tab.title;
  var url = tab.url;
  // now you can send these data to your server via XmlHttpRequest
}); 
```

# windows - 新旧 InstallShield 12 Setup.exe 文件在 Windows 中突然没有图标

> ID：13243736
> 
> 赞同：1
> 
> 时间：2012-11-06T03:04:42.237
> 
> 标签：windows, installation, icons, installshield, setup.exe

我的团队多年来一直使用相同的 Install Shield 12 项目。几周前，Vista 和 Win7 中的 Windows 资源管理器停止为安装程序显示 16x16 以上的图标大小。因此，列表、详细信息和小视图显示 16 倍图标，但平铺、缩略图、中和大视图只是文本。

这适用于新安装程序，也适用于 3 年存档安装程序。我们没有尝试过早于 Vista 的系统，但我们已经在多台机器上尝试过。我们使用普通的 32x32 32 位 ICO 文件。在 IrfanView 中，它有两页，第一页为空白。在 InstallShield 中，它在索引 0 处有一个图标可供选择。在过去三年中，这一切都没有改变。

我在 Flexera 论坛、here 和各种 Google 结果中进行了挖掘，但除了相当多的人仍在使用 Install Shield 12 之外，我没有发现任何东西。

有谁知道发生了什么或如何解决？

我怀疑最近的 Windows 更新改变了规则。我们是否需要包含一个包含不同大小的 ICO？Windows 现在是否限制了旧版本的 Install Shield 所做的某些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:24:29.523

我改变了战术。我没有试图理解为什么我们的旧 ICO 突然停止工作，而是创建了一个新的 ICO。我努力创造出 Windows 对 ICO 的期望。

对应用程序图标编辑器的快速而肮脏的搜索出现了[IcoFX（此链接指向免费的旧版本）](http://portableapps.com/apps/graphics_pictures/icofx_portable)。甚至 Stack Overflow 的贡献者也推荐了它。我给它喂了一个原始的 256x256 png 并告诉它“从图像创建 Windows 图标”使用它的默认设置： - 4bit @ 16x16、32x32 - 8bit @ 16x16、32x32、48x48 - 32bit @ 16x16、32x32、48x48、256x256

这个新的 ICO 成功了，尽管我必须[重建我的 Windows 图标缓存](http://www.sevenforums.com/tutorials/49819-icon-cache-rebuild.html)才能看到变化。

我很失望，我不知道操作系统发生了什么变化。然而，这解决了问题，并通过 32 位 ICO 显着改进了我们旧的 32x32 像素。

# asp.net-mvc - ASP.Net MVC 4 不接受表单输入中的连字符

> ID：13243739
> 
> 赞同：0
> 
> 时间：2012-11-06T03:05:08.510
> 
> 标签：asp.net-mvc

我有一个文本输入定义如下的表单

```
 @using (Html.BeginForm()) {
                    <td align="left" style="font-size:Medium;width:400px;">@Html.TextBox("sn", "", new { @style = "font-size:Medium;width:400px;", @class = "fnTxtBox"  })
</td>
    } 
```

用户需要能够在文本框中包含连字符（'-'），例如##-######，但如果我尝试包含它，ASP.Net MVC 不仅仅将文本框标记为红色，如果我删除连字符，表格会正常发布。包括连字符作为输入是我的客户的绝对要求，是否有启用此选项的选项？为什么连字符被拒绝？提前致谢。

# asp.net - 中继错误需要 SMTP 身份验证

> ID：13243740
> 
> 赞同：1
> 
> 时间：2012-11-06T03:05:24.313
> 
> 标签：asp.net, vb.net, smtp-auth

我们的网站曾经托管在运行 Windows Server 2003 和 IIS 6 的服务器上；它在这方面工作得很好。现在我们尝试在运行 Windows Web Server 2008 R2 和 IIS 7 的新服务器上设置它。在旧服务器和新服务器上，我们都使用 SmarterMail 作为我们的电子邮件软件。

我在本地系统上从 Outlook 和 Windows Live Mail 发送和接收电子邮件没有问题。问题在于从我们网站上的代码隐藏发送电子邮件。我可以从站点向 SmarterMail 中设置的内部电子邮件地址发送电子邮件，换句话说，发送到我们邮件服务器域内的地址。但是，当我尝试从该站点向 Gmail 地址发送电子邮件时，我收到以下错误：

中继需要550认证

在发送电子邮件的 ASP.NET 页面的代码隐藏中，我有以下 VB.NET 代码：

```
Dim MailObj As New SmtpClient
With MailObj
  .Credentials = New NetworkCredential(MailFromEmailAddress, Password)
  .EnableSsl = False
  .Host = "mail.MyDomain.com" ' our mail server subdomain name, configured in IIS
  .Timeout = 180000
  .UseDefaultCredentials = False
End With

MailObj.Send(OrderMailMsg) 
```

我可以使用 MailFromEmailAddress 和密码登录 SmarterMail，没有任何问题。

另外，我可以为邮件服务器的 IP 地址定义一个 SMTP 身份验证绕过，然后发送到 Gmail 地址的电子邮件就可以通过了。但是，当从我们的站点发送到我们域外的地址时，我无法使 SMTP 身份验证正常工作。

有谁知道我应该改变或做些什么来完成这项工作？非常感谢！

# vb.net - 使用 IronPython 时如何从 VB 中获取对数组的引用？

> ID：13243742
> 
> 赞同：1
> 
> 时间：2012-11-06T03:05:27.247
> 
> 标签：vb.net, ironpython

我不是 Python 程序员，但我正在尝试使用 IronPython 和 VB.Net 制作一个简单的脚本。我已经走了很远，但现在我坚持通过引用传递参数。我需要能够将数据从 VB 端返回到参数列表中的 Python 端（因为 Python 返回元组，但 .Net 没有）。但是，此代码不起作用，我不知道为什么。

这是python代码：

```
def GetVoltages(voltages):
    fixture.StartScan()
    done=False
    counter=0
    while done == False:
        fixture.GetNumDataPoints(num)
        if num>=15:
            done=True
        else:
            counter=counter+1
        if counter>1000000:
            break
    if done == True:
        fixture.GetDataPoints(num, voltages)
    else:
        log.WriteLine("Failed to read voltages.")
    return done

buff = Array.CreateInstance(System.Double, 0)
if GetVoltages(buff):
    log.WriteLine("Checking voltages.")
    CheckVoltage(buff, 3, 22)
# do other stuff 
```

fixture 是一个已定义的变量，并且该函数被正确调用，但 python 端的 num 和 voltages 永远不会改变。这是VB端的函数声明：

```
Public Function GetDataPoints(ByVal num As Integer, ByRef vals() As Double) As Boolean
Public Function GetNumDataPoints(ByRef num As Integer) As Boolean 
```

我发现了一些旧页面，它们提供了一些提示，但我没有看到正确的答案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:04:27.387

基本上，IronPython将*ref*和*out*参数[作为 tuple 捆绑到结果中](http://ironpython.net/documentation/dotnet/dotnet.html#ref-and-out-parameters)。这意味着你想要类似的东西：

```
success, num = fixture.GetNumDataPoints(num)
success, voltages = fixture.GetDataPoints(num, voltages) 
```

*ref*和数组之间可能存在一些交互，但这应该有效。

# android - 在 Android 4.1 上读取系统日志

> ID：13243746
> 
> 赞同：4
> 
> 时间：2012-11-06T03:06:01.127
> 
> 标签：android

现在，我想在 android 4.1 上阅读系统日志。但只是只能获取应用程序本身的日志。我的代码如下：

```
Process logcatProc = Runtime.getRuntime().exec(new String[] { "logcat","ActivityManager:V","*:S" });
reader = new BufferedReader(new InputStreamReader(logcatProc.getInputStream()));  
String line;
while ((line = reader.readLine()) != null) {
    Log.e("log",line);
} 
```

它似乎可以在 android 4.0 或以前的版本上运行。有人试过这个吗？或者我需要root权限？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T03:12:16.997

系统日志在 4.1 中更改，现在只能由系统应用程序访问。（来源：[谷歌 I/O 视频](http://www.youtube.com/watch?feature=player_embedded&v=WDDgoxvQsrQ#t=1369s)。）当然，如果已安装的应用程序设置为系统应用程序，则在有根设备上是一个例外。

除此之外，无法访问 Android 4.1+ 上的系统日志。*注意：最终用户可以使用++的（非常挑剔的**）**快捷方式访问系统日志。`Power``Vol Up``Vol Down`*

# requirejs - 在 Require.js 文本插件模板中，我应该如何提供 javascript 方法？

> ID：13243750
> 
> 赞同：2
> 
> 时间：2012-11-06T03:06:34.483
> 
> 标签：requirejs, underscore.js, requirejs-text

我正在使用 Require.js 和文本插件。我正在尝试创建一个具有以下内容的模板：

```
<%= somefunction(displayvalue) %> 
```

我需要 somefunction(...) 可用于多个模板。包装函数以在多个地方使用的最佳方法是什么？我想把它做成一个模块，但我不知道如何将它传递给模板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:57:58.250

编译模板后，您会发现自己有一个要调用的函数，并传入一些参数。所以只需将您的函数作为参数传递：

```
var tpl = _.template( tplString );
tpl({ someFunction: function( val ) { /* do something */ } }); 
```

虽然，我认为如果您只在模板数据中传递值，您可能会更好。如果模板几乎没有逻辑，那么模板实际上更容易调试和维护。所以，相反，我会这样：

```
tpl({ someValue: someFunction( aValue ) }); 
```

在其他 javascript 模板引擎（如 Handlebars）中，您实际上可以注册[帮助函数](http://handlebarsjs.com/#helpers)，这些函数主要在全球范围内可用以对您的模板数据执行操作。如果您确实需要在多个模板中使用相同的功能，我会考虑切换模板引擎。Underscore 提供了一个微模板引擎，因此在某种程度上受限于辅助函数 - 尽管能够包含太多逻辑......

在我看来，下划线模板适用于小型项目，应谨慎使用。使它们尽可能简单：`if/else`，打印数据，就应该这样。如果您需要更多，请使用更完整的模板引擎。

但即便如此，您在模板中执行的所有逻辑都很难调试。

所以！把事情简单化。

# php - sh：/usr/bin/ffmpeg：未找到

> ID：13243759
> 
> 赞同：6
> 
> 时间：2012-11-06T03:07:42.737
> 
> 标签：php, audio, video, ffmpeg

我正在尝试使用 shell_exec 或 exec 从 PHP 执行 ffmpeg，但它失败了。为什么会这样？该命令`/usr/bin/ffmpeg`从终端运行，所以我尝试了

```
<?php
$cmd = "/usr/bin/ffmpeg";
exec($cmd." 2>&1", $out, $ret);
if ($ret){
    echo "There was a problem!\n";
    print_r($out);
}else{
    echo "Everything went better than expected!\n";
}
?> 
```

我不断得到

```
There was a problem! Array ( [0] => sh: /usr/bin/ffmpeg: not found ) 
```

任何帮助将不胜感激。

可执行文件的权限是

```
-rwxr-xr-x  1 root   root      106552 Jun 12 09:53 ffmpeg 
```

运行`which /usr/local/bin/ffmpeg`$cmd 返回一个空数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T04:07:22.283

您的问题的答案可能比预期的要简单。您同时检查`/usr/local/bin` *和* `/usr/bin`。对此有多种解决方案。

1.  你可以跑`$ whereis ffmpeg`，看看你得到了什么。根据结果​​，更改`$cmd`变量。如果`whereis`什么都不返回，那么你的系统不知道它在哪里。您可以将其添加到您的`$PATH`环境变量中，然后重试。

2.  您可以尝试运行`$ find /usr -name "ffmpeg"`或类似的东西。通过确保已安装此程序，它将帮助您更快地解决此问题。

3.  如果有某种限制拒绝 apache 访问/使用 ffmpeg，您始终可以将其存储在文档根目录中的 bin 文件夹中。（类似于**/path/to/doc/root/bin/ffmpeg**）我以前做过这个，所以我知道它有效。

* * *

如果您发现**ffmpeg**实际上位于其中，`/usr/local/bin`那么您应该尝试将您的更改`$cmd`为：

```
$cmd = '/usr/local/bin/ffmpeg'; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-01-22T16:05:48.007

有问题！

```
Array (
  [0]  => FFmpeg version 0.6.5, Copyright (c) 2000-2010 the FFmpeg developers
  [1]  => built on Jan 29 2012 17:52:15 with gcc 4.4.5 20110214 (Red Hat 4.4.5-6)
  [2]  => configuration: --prefix=/usr --libdir=/usr/lib64 --shlibdir=/usr/lib64
          --mandir=/usr/share/man --incdir=/usr/include --disable-avisynth
          --extra-cflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions
          -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC'
          --enable-avfilter --enable-avfilter-lavf --enable-libdc1394 --enable-libdirac
          --enable-libfaac --enable-libfaad --enable-libfaadbin --enable-libgsm
          --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb
          --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libtheora
          --enable-libx264 --enable-gpl --enable-nonfree --enable-postproc --enable-pthreads
         --enable-shared --enable-swscale --enable-vdpau --enable-version3 --enable-x11grab
  [3]  => libavutil 50.15\. 1 / 50.15\. 1
  [4]  => libavcodec 52.72\. 2 / 52.72\. 2
  [5]  => libavformat 52.64\. 2 / 52.64\. 2
  [6]  => libavdevice 52\. 2\. 0 / 52\. 2\. 0
  [7]  => libavfilter 1.19\. 0 / 1.19\. 0
  [8]  => libswscale 0.11\. 0 / 0.11\. 0
  [9]  => libpostproc 51\. 2\. 0 / 51\. 2\. 0
  [10] => Use -h to get full help or, even better, run 'man ffmpeg'
  [11] => Hyper fast Audio and Video encoder
  [12] => usage: ffmpeg [options] [[infile options] -i infile]...
          {[outfile options] outfile}...
  [13] =>
) 
```

# c# - 即使调整大小，TextBlock 也不会显示其余的文本

> ID：13243763
> 
> 赞同：0
> 
> 时间：2012-11-06T03:08:03.167
> 
> 标签：c#, xaml, microsoft-metro

我正在开发的应用程序从 Internet 检索信息并将其显示在应用程序内 StackPanel 内的一系列网格中，StackPanel 本身嵌套在 ScrollViewer 内。

我的问题是：该应用程序显示了内容的简短摘要，其想法是单击内容会使 Grid 和 TextBlock 展开以显示其余内容，但是调整 TextBlock 的大小不会显示被剪切的文本原来是太短了。TextBlock 是在 c# 代码中动态创建的。

此外，但不是很重要：我不知道如何从 TextBlock 获得所需的全部高度来将其文本更改为，没有它我必须将新大小设置为静态数字，我觉得这有损于 UX我的应用程序。

谢谢，杰斯

* * *

**更新：**这是用于生成 TextBlock 的代码：

```
this.message = new TextBlock()
{
    VerticalAlignment = VerticalAlignment.Top,
    TextWrapping = TextWrapping.Wrap,
    MaxWidth = getWidth()
};
if(post.message != null) { message.Text = post.message; } 
```

**更新 2：**这是创建 StackPanel (XAML) 的代码：

```
<ScrollViewer Grid.Column="1" Style="{StaticResource MainColumn}" VerticalScrollBarVisibility="Auto" SizeChanged="Feed_SizeChanged">
    <StackPanel x:Name="Feed"/>
</ScrollViewer> 
```

这是生成父 Grid 的地方：

```
Post grid = new Post() { Margin = new Thickness(0, 0, 0, 5) };
Feed.Children.Add(grid);
grid.layoutPost(oldCount, count--, post, Feed, this); 
```

Grid 的高度在 layoutPost 方法中设置，最终为 75px，Post 是一个扩展 Grid 的类，在这里定义：

```
class Post : Windows.UI.Xaml.Controls.Grid 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:45:36.340

如果您未定义 TextBlock 的高度并设置 TextWrapping="Wrap" - TextBlock 应自动增长到适合其文本所需的大小。

您可能会遇到的另一个问题是，如果您尝试将大量这些 TextBlocks 放入 ScrollViewer。这可能效果不太好，因为您没有对内容进行虚拟化，并且加载那么多文本需要大量 CPU 资源来进行布局。通常使用 ListBox 或 ListView 是此类场景的更好选择，因为它们使用 VirtualizingStackPanel 来布置其子元素。

# python - Python 空生成器函数

> ID：13243766
> 
> 赞同：130
> 
> 时间：2012-11-06T03:08:13.517
> 
> 标签：python, generator

在python中，可以很容易地定义一个迭代器函数，通过将yield关键字放在函数体中，例如：

```
def gen():
    for i in range(100):
        yield i 
```

如何定义不产生任何值（生成 0 值）的生成器函数，以下代码不起作用，因为 python 无法知道它应该是生成器而不是普通函数：

```
def empty():
    pass 
```

我可以做类似的事情

```
def empty():
    if False:
        yield None 
```

但这会非常难看。有没有什么好方法来实现一个空的迭代器函数？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-11-06T03:22:44.500

您可以`return`在生成器中使用一次；它在不产生任何结果的情况下停止迭代，因此提供了一个明确的替代方案来让函数超出范围。所以使用`yield`将函数变成一个生成器，但在它之前`return`终止生成器，然后再产生任何东西。

```
>>> def f():
...     return
...     yield
... 
>>> list(f())
[] 
```

我不确定它是否比您所拥有的要好得多——它只是用无操作`if`语句替换了无操作`yield`语句。但它更惯用。请注意，仅使用`yield`是行不通的。

```
>>> def f():
...     yield
... 
>>> list(f())
[None] 
```

### 为什么不直接使用`iter(())`？

这个问题专门询问了一个空的*生成器函数*。出于这个原因，我认为这是一个关于 Python 语法内部一致性的问题，而不是一个关于创建空迭代器的最佳方法的问题。

如果问题实际上是关于创建空迭代器的最佳方法，那么您可能同意[Zectbumo](https://stackoverflow.com/a/26271684/577088)关于使用的`iter(())`替代方法。但是，重要的是要注意`iter(())`不返回函数！它直接返回一个空的可迭代对象。假设您正在使用一个 API，该 API 需要一个每次调用时*返回*一个可迭代对象的可调用对象，就像普通的生成器函数一样。你必须做这样的事情：

```
def empty():
    return iter(()) 
```

（信用应该[归功于 Unutbu](https://stackoverflow.com/a/13243922/577088)给出了这个答案的第一个正确版本。）

现在，您可能会发现上面的内容更清楚，但我可以想象它不太清楚的情况。考虑这个一长串（人为的）生成器函数定义的例子：

```
def zeros():
    while True:
        yield 0

def ones():
    while True:
        yield 1

... 
```

在那长长的列表的最后，我宁愿看到里面有 a`yield`的东西，像这样：

```
def empty():
    return
    yield 
```

或者，在 Python 3.3 及更高版本中（如[DSM](https://stackoverflow.com/a/13243920/577088)所建议），此：

```
def empty():
    yield from () 
```

关键字的存在`yield`一目了然地表明这只是另一个生成器函数，与所有其他函数完全相同。需要更多时间才能看到该`iter(())`版本正在执行相同的操作。

这是一个微妙的区别，但老实说，我认为`yield`基于 - 的函数更具可读性和可维护性。

[另请参阅user3840170](https://stackoverflow.com/a/61496399/577088)的这个很好的答案，它用于`dis`说明为什么这种方法更可取的另一个原因：它在编译时发出的指令最少。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2014-10-09T06:26:25.960

```
iter(()) 
```

你*不需要*发电机。来吧伙计们！

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2012-11-06T03:28:54.490

Python 3.3（因为我很`yield from`兴奋，因为@senderle 偷走了我的第一个想法）：

```
>>> def f():
...     yield from ()
... 
>>> list(f())
[] 
```

但我不得不承认，我很难想出一个用例来解决这个问题，`iter([])`或者`(x)range(0)`不能很好地工作。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-06-25T03:52:37.753

另一种选择是：

```
(_ for _ in ()) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-04-29T07:29:31.810

就像[@senderle 说](https://stackoverflow.com/a/13243870/4298200)的，使用这个：

```
def empty():
    return
    yield 
```

我写这个答案主要是为了分享另一个理由。

选择此解决方案优于其他解决方案的一个原因是，就解释器而言，它是最佳的。

```
>>> import dis
>>> def empty_yield_from():
...     yield from ()
... 
>>> def empty_iter():
...     return iter(())
... 
>>> def empty_return():
...     return
...     yield
...
>>> def noop():
...     pass
...
>>> dis.dis(empty_yield_from)
  2           0 LOAD_CONST               1 (())
              2 GET_YIELD_FROM_ITER
              4 LOAD_CONST               0 (None)
              6 YIELD_FROM
              8 POP_TOP
             10 LOAD_CONST               0 (None)
             12 RETURN_VALUE
>>> dis.dis(empty_iter)
  2           0 LOAD_GLOBAL              0 (iter)
              2 LOAD_CONST               1 (())
              4 CALL_FUNCTION            1
              6 RETURN_VALUE
>>> dis.dis(empty_return)
  2           0 LOAD_CONST               0 (None)
              2 RETURN_VALUE
>>> dis.dis(noop)
  2           0 LOAD_CONST               0 (None)
              2 RETURN_VALUE 
```

正如我们所看到的， 与`empty_return`普通的空函数具有完全相同的字节码；其余的执行一些其他操作，无论如何都不会改变行为。`empty_return`和之间的唯一区别`noop`是前者设置了生成器标志：

```
>>> dis.show_code(noop)
Name:              noop
Filename:          <stdin>
Argument count:    0
Positional-only arguments: 0
Kw-only arguments: 0
Number of locals:  0
Stack size:        1
Flags:             OPTIMIZED, NEWLOCALS, NOFREE
Constants:
   0: None
>>> dis.show_code(empty_return)
Name:              empty_return
Filename:          <stdin>
Argument count:    0
Positional-only arguments: 0
Kw-only arguments: 0
Number of locals:  0
Stack size:        1
Flags:             OPTIMIZED, NEWLOCALS, GENERATOR, NOFREE
Constants:
   0: None 
```

当然，这个论点的强度很大程度上取决于所使用的 Python 的特定实现。一个足够聪明的替代解释器可能会注意到其他操作毫无用处，并对其进行优化。但是，即使存在这样的优化，它们也需要解释器花时间执行它们并防止优化假设被破坏，例如`iter`全局范围内的标识符被反弹到其他东西（即使如果它很可能表明存在错误）确实发生了）。在`empty_return`根本没有什么可优化的情况下，因此即使是相对幼稚的 CPython 也不会在任何虚假操作上浪费时间。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-06T03:29:00.510

它必须是生成器函数吗？如果没有，怎么办

```
def f():
    return iter(()) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-09-22T19:17:47.423

制作空迭代器的“标准”方法似乎是 iter([])。我建议将 [] 作为 iter() 的默认参数；这被很好的论据拒绝了，见[http://bugs.python.org/issue25215](http://bugs.python.org/issue25215) - Jurjen

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-15T20:55:16.833

```
generator = (item for item in []) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-06T06:09:21.610

我想举一个基于类的例子，因为我们还没有任何建议。这是一个不生成任何项目的可调用迭代器。我相信这是解决问题的直接且描述性的方法。

```
class EmptyGenerator:
    def __iter__(self):
        return self
    def __next__(self):
        raise StopIteration

>>> list(EmptyGenerator())
[] 
```

# django - Django REST框架很慢

> ID：13243767
> 
> 赞同：2
> 
> 时间：2012-11-06T03:08:15.930
> 
> 标签：django, rest, django-rest-framework

我开始使用 Django REST 框架为生产做准备，但不幸的是，它的执行速度很慢。

我正在调用一个包含 500 个字典的数组，每个字典都有 5 个键值对。在 shell 中，调用时间根本不明显——你按下回车键，它就完成了。以前，当我在没有 REST 框架的情况下直接提供相同的内容时，也没有明显的延迟。但是，使用 REST 框架，页面呈现后大约需要 1 到 2 秒才能显示内容。

我认为这不是由于 javascript，因为通过可浏览 API 访问相同的细节会导致类似的延迟。

另外，我目前**没有**缓存。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T09:45:19.067

其他任何人都无法从问题中给出的详细信息中为您调试。

*   您是在重用现有的通用视图还是编写自己的视图？
*   您是否正在序列化数据，如果是，您的序列化程序定义是什么样的？
*   呈现到 JSON 时，还是仅呈现到 Browsable API 时出现问题？
*   您提到在没有 REST 框架的情况下提供内容 - 之前的视图是什么样的，之后又是什么样的？

REST framework 视图很*简单*，所以使用分析工具，或者简单地覆盖它们并添加一些时间。同样，渲染器是*微不足道*的- 子类您目前使用的任何渲染器，覆盖`.render()`并在调用父方法的任一侧添加几个计时调用`.render()`。

如果您认为您已将问题缩小到特定区域，那么请组合一个最小的测试用例并将其作为问题提交。

序列化本身不太可能成为问题，我使用相同的序列化引擎来复制 Django 的夹具转储，并且没有明显的退化。

如果您要跨模型关系进行查找，则可能需要在构造查询集时添加`.select_related()`或`.prefetch_related()`调用，这与任何其他 Django 视图完全相同。

* * *

**编辑**：请注意，从这篇文章开始，序列化程序的速度得到了显着的改进，[正如这张票中所指出的那样](https://github.com/tomchristie/django-rest-framework/pull/433)。

# java - 从文件夹中采样文件

> ID：13243770
> 
> 赞同：0
> 
> 时间：2012-11-06T03:08:33.557
> 
> 标签：java

我有一个包含 100000 个文件的文件夹，需要通过随机抽样从这个文件夹中获取 1000 个文件。是否有任何示例函数可用于从文件夹中采样？另外，如何将采样文件复制到另一个文件夹？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:35:34.483

随机选择可以遵循以下几行

```
File files[] = new File("/path/to/files").listFiles();
Map<Integer, File> selection = new HashMap<Integer, File>(1000);
while (selection.size() < 1000) {
    int value = (int)Math.round(Math.random() * files.length);
    if (!selection.containsKey(value)) {
        selection.put(value, files[value]);
    }
}
for (File file : selection.values()) {
    System.out.println(file);
} 
```

本质上，您需要获取可用文件的列表并在列表中随机选择，直到您有足够的样本。查看[`java.io.File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)

有很多通过网络（和 SO）复制文件的示例。如果你真的被卡住了，你可以看看[IO Trail](http://docs.oracle.com/javase/tutorial/essential/io/)或[Apache Commons IO](http://commons.apache.org/io/)，我相信它有一个能够处理文件的实用程序类

**更新**

正如 Andrew 所建议的那样，您可以简单地打乱文件列表并提取前 1000 个元素......

```
File files[] = new File("/path/to/files").listFiles();
List<File> selection = null;
List<File> fileList = new ArrayList<File>(Arrays.asList(files));
Collections.shuffle(fileList);
selection = fileList.subList(0, Math.min(1000, fileList.size()));

for (File file : selection) {
    System.out.println(file);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T03:45:14.387

请试试这个

```
public static void main(String args[]) throws Exception
{
File f= new File("E:/Eclipse-Leo/Test/src/test/Desktop1");
List<File> randomFiles = new ArrayList<File>();
List<Integer> randNumber = new ArrayList<Integer>();
if(f != null && f.isDirectory()){
    File[] files = f.listFiles();
    Random randomGenerator = new Random();
    int idx = 1;

    while(idx <101 && idx >= 1)
    {

        int randTemp = randomGenerator.nextInt(1000);
        if(!randNumber.contains(randTemp))
        {
                 randNumber.add(randTemp);
                 randomFiles.add(files[randTemp]);
                 idx++;
        }

    }

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T03:31:34.907

文件[] 文件 = dir.listFiles();

然后只需使用 files.length 和随机数生成器来索引数组。

# javascript - 按键的 preventDefault() 取消更改事件

> ID：13243771
> 
> 赞同：0
> 
> 时间：2012-11-06T03:08:44.780
> 
> 标签：javascript, jquery, jquery-events, event-bubbling

在下面的代码片段中，我试图阻止用户`<textarea>`使用`preventDefault()`. 我不想输入新行，而是希望输入键触发模糊事件。`<textarea>`但是，下面的代码在用户更改了其中的文本然后按回车后绕过了更改事件。如何确保更改文本的值时始终触发更改事件？

```
$('textarea')
.keypress(function (event) {
    if (event.which == '13') {//13 = Enter
        event.preventDefault();
        $(this).blur();
    }
})
.change(function() {// THIS DOES NOT FIRE IF USER PRESSES ENTER
    alert('change event');
})
.blur(function() {
    console.log('blur event');
});//end: blur() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:20:38.193

看起来这是事件[排序](http://www.nczonline.net/blog/2007/02/06/event-order-of-blur-and-change/)的问题。在 IE`change`中首先触发事件，然后触发`blur`事件，但在 Firefox 和 Chrome 中则相反。因此，当您`blur()`在 Firefox 和 Chrome 中手动触发事件时，它会导致`focus`事件触发，但在 IE 中不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:20:13.120

只需手动触发 change 事件，就像触发 blur 事件一样。

# php - 如何通过选择的选项更改 textarea 的值？

> ID：13243772
> 
> 赞同：1
> 
> 时间：2012-11-06T03:08:46.120
> 
> 标签：php, html, mysql, forms

我正在尝试根据所选的当前选项更改内容。

getData(page) 正确返回 (onChange) 但它只是没有转到变量我得到“致命错误：调用 C:\xampp\htdocs\pdimi\admin\editpages.php 中的未定义函数 getData()在第 42 行"

编辑：这就是我完成它的方式！

Javascript：

```
<script language="JavaScript" type="text/javascript">
function getData(combobox){
var value = combobox.options[combobox.selectedIndex].value;
// TODO: check whether the textarea content has been modified.
// if so, warn the user that continuing will lose those changes and
// reload a new page, and abort function if so instructed.
document.location.href = '?page='+value;
}
</script> 
```

选择表格：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<select name="page" onChange="getData(this)">
    <?php
if (isset($_REQUEST['page']))
    $page = mysql_real_escape_string($_POST['page']);
else
    $page = '';
$query = "SELECT pageid FROM pages;";
?>
<option value="select">Select Page</option>
    <option value="indexpage">Index Page</option>
    <option value="starthere">Start Here</option>

    </select> 
```

文本区域：

```
<textarea class="ckeditor" name="page_data" cols="80" row="8" id="page_data">
    <?php
if (isset($_GET['page'])) {
$sql1 = @mysql_query("SELECT * FROM pages WHERE pageid='".$_GET['page']."'") or die(mysql_error());
$sql2 = @mysql_fetch_array($sql1) or die(mysql_error());

if ($sql1) {
echo $sql2['content'];
}
}

?>
</textarea> 
```

就是这样！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:14:15.163

您不能从 PHP（运行服务器端）执行 Javascript 函数（客户端）。

此外，您需要使用用户名和密码连接到数据库服务器，并选择一个数据库。不要使用@，它只会阻止你看到错误——但错误会在那里。

在 PHP 文件中，您需要检查是否收到`$_POST['page']`.，如果收到，请将*其*用作`SELECT`. 您已经设置了一个名为“页面”的组合，因此在提交时 PHP 脚本会将所选值接收到一个名为`$_POST['page']`.

通常的警告适用：

*   不鼓励使用 mysql_* 函数，请使用 mysqli 或 PDO
*   如果您仍然使用 mysql_*，请清理输入（例如`$id = (int)$_POST['page']`，如果它是数字，或者`mysql_real_escape_string`不是，如您的情况）

如果您想在用户更改组合框时更改*textarea 的内容*，这适用于 AJAX（例如 jQuery）：

1.  将函数绑定到组合框的更改事件
2.  向传递新 ID 的 PHP 脚本服务器端发出调用
3.  PHP 脚本将*只输出内容，不输出其他 HTML*
4.  接收combo的change-function中的内容并验证成功
5.  设置`$('#textarea')`内容的值

这样您就不必在每次组合更改时重新加载页面。这让我想起了另一件事，当你现在*重新加载页面*时，你必须正确设置组合值：你也可以利用它来动态生成组合。

## 工作示例

该文件应称为“editpages.php”。PHP 细化（几乎）与数据表示分开完成。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>PDIMI - The Personal Development and Internet Marketing Institution</title>
<link href='http://fonts.googleapis.com/css?family=Oswald:400,300' rel='stylesheet' type='text/css' />
<link href='http://fonts.googleapis.com/css?family=Abel' rel='stylesheet' type='text/css' />
<link href="../style/default.css" rel="stylesheet" type="text/css" media="all" />
<!--[if IE 6]>
<link href="default_ie6.css" rel="stylesheet" type="text/css" />
<![endif]-->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script language="JavaScript" type="text/javascript">
        function getData(combobox){
                var value = combobox.options[combobox.selectedIndex].value;
                // TODO: check whether the textarea content has been modified.
                // if so, warn the user that continuing will lose those changes and
                // reload a new page, and abort function if so instructed.
                document.location.href = '?page='+value;
        }
</script>
</head>
<?php include 'aheader.php';?>
<?php
        error_reporting(E_ALL);
        if (!mysql_ping())
                die ("The MySQL connection is not active.");
        mysql_set_charset('utf8');

        // $_REQUEST is both _GET and _POST
        if (isset($_REQUEST['page']))
            $page = mysql_real_escape_string($_REQUEST['page']);
        else
            $page = False;
        $query = "SELECT pageid, pagename FROM pages;";
        $exec  = mysql_query($query); // You need to be already connected to a DB
        if (!$exec)
                trigger_error("Cannot fetch data from pages table: " . mysql_error(), E_USER_ERROR);

        if (0 == mysql_num_rows($exec))
                trigger_error("There are no pages in the 'pages' table. Cannot continue: it would not work. Insert some pageids and retry.",
 E_USER_ERROR);

        $options = '';
        while($row = mysql_fetch_array($exec))
        {
            // if the current pageid matches the one requested, we set SELECTED
            if ($row['pageid'] === $page)
                $sel = 'selected="selected"';
            else
            {
                // If there is no selection, we use the first combo value as default
                if (False === $page)
                    $page = $row['pageid'];
                $sel = '';
            }
            $options .= "<option value=\"{$row['pageid']}\" $sel>{$row['pagename']}</option>";
        }
        mysql_free_result($exec);

        if (isset($_POST['page_data']))
        {
           $page_data = mysql_real_escape_string($_POST['page_data']);
$query = "INSERT INTO pages ( pageid, content ) VALUES ( '{$page}', '{$page_data}' ) ON DUPLICATE KEY UPDATE content=VALUES(content);";
           if (!mysql_query($query))
                trigger_error("An error occurred: " . mysql_error(), E_USER_ERROR);
        }
        // Anyway, recover its contents (maybe updated)
        $query = "SELECT content FROM pages WHERE pageid='{$page}';";
        $exec  = mysql_query($query);
        // who says we found anything? Maybe this id does not even exist.
        if (mysql_num_rows($exec) > 0)
        {
           // if it does, we're inside a textarea and we directly output the text
           $row = mysql_fetch_array($exec);
           $textarea = $row['content'];
        }
        else
           $textarea = '';
        mysql_free_result($exec);
?>
<body>
<div id="page-wrapper">
        <div id="page">
            <div id="content2">
                    <h2>Edit Your Pages Here</h2>
                    <script type="text/javascript" src="../ckeditor/ckeditor.js"></script>
                    <form name="editpage" method="POST" action="">
                            <table border="1" width="100%">
                                    <tr>
                                    <td>Please Select The Page You Wish To Edit:</td>
                                    <td>
                                            <select name="page" onChange="getData(this)"><?php print $options; ?></select>
                                    </td>
                                    </tr>
                                    <tr>
                                            <td><textarea class="ckeditor" name="page_data" cols="80" row="8" id="page_data"><?php print $textarea; ?></textarea></td>
                                    </tr>
                                    <tr>
                                        <td><input type="Submit" value="Save the page"/></td>
                                    </tr>
                            </table>
                    </form>
                </div>
            </div>
       </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:28:02.273

您在这里遇到的最大问题是您需要了解客户端和服务器端之间的区别。

服务器端：当页面加载时......我们运行各种代码来确定要显示什么并将其打印到源代码中。

客户端：一旦页面加载...然后我们可以使用 DOM 元素来交互、修改或增强用户体验（我正在制作这个）。

在您的代码中，您有一个 PHP mysql 命令：

```
$thisdata = @mysql_query("SELECT * FROM pages WHERE pageid=".getData('value')); 
```

1、不要使用mysql。使用 mysqli 或 PDO 2，你已经从你的 PHP 中调用了一个 javascript 函数。

绝对没有办法从 PHP 调用 javascript 函数。客户端脚本不存在，直到页面停止加载后才会运行。

* * *

在您的情况下：您需要提供您将使用的 HTML 和 javascript 代码。一次且仅当页面已加载时，您需要使用 javascript（客户端脚本）来设置事件侦听器以侦听您的选择更改事件。一旦触发此事件，您就可以确定您想要做什么（即更改文本框值等）。

# c++ - 仅在单击按钮时检查事件

> ID：13243777
> 
> 赞同：0
> 
> 时间：2012-11-06T03:09:20.213
> 
> 标签：c++, sdl

我有一个简单的测试脚本，它意味着当用户在按钮的尺寸内单击时更改布尔值，但它不起作用。

我是这样接近它的：

```
while( SDL_PollEvent( &event ) ) {
        switch( event.type ){
            case SDL_QUIT: quit = true; break;
            case SDL_MOUSEMOTION: mouseX = event.motion.x; mouseY = event.motion.y; break;    
            case SDL_MOUSEBUTTONDOWN: click = true; 
        }
}
 Button btn_settings(btn_x,btn_y);
 if(btn_settings.IsIn(mouseX,mouseY)){
    btn_settings.RenderImg(menu,screen,"button_on.png","Settings");

    if(click){
        quit = true;
    }

 } else {
    btn_settings.RenderImg(menu,screen,"button.png","Settings");
 } 
```

问题是如果我点击任何地方然后点击等于真，那么如果鼠标是`over`退出按钮，即使在按钮上方没有按下按钮，它也会退出。

我很困惑如何让它正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:52:22.430

尝试在鼠标按钮上处理您的“单击”事件。我从未使用过 SDL，但我怀疑有一个`SDL_MOUSEBUTTONUP`定义。否则，您不知道他们是否要执行拖动操作，或者他们是否在松开鼠标按钮之前将鼠标移动到其他位置。

# c# - Socket.Receive() 停止接收并且窗口大小减小到零

> ID：13243781
> 
> 赞同：1
> 
> 时间：2012-11-06T03:09:43.037
> 
> 标签：c#, sockets

我有一个 tcp 连接和两个线程分别处理发送和接收。有时接收线程在程序启动几分钟后无法接收任何数据，然后从 Receive() 方法中得到一个 Timeout 错误。但是 Wireshark 显示在线上有数据，并且由于程序停止接收，接收窗口大小减小到零。

似乎这种情况在我的笔记本电脑上发生得更频繁，这是一台由 Parallels 在 Mac OS X 上运行的 Windows 7。

```
class Test
{
    public static string Host { get; set; }
    public static int Port { get; set; }
    public static Action<Exception> ErrorHandler { get; set; }

    private Socket socket;
    private object sendSync;

    private Thread recvThread;
    private Thread sendThread;
    private Thread connectThread;

    private readonly int RECEIVETIMOUT = 20 * 1000;
    private readonly int MAXCONNECTATTEMPTINTERVAL = 27;

    private int connectingAttempt = 0;

    private ManualResetEvent sendReadyEvent;
    private ManualResetEvent receiveReadyEvent;
    private ManualResetEvent sendStoppedEvent;
    private ManualResetEvent receiveStoppedEvent;

    private Queue<byte[]> waitingRequests;

    private Test()
    {
        sendSync = new object();
        waitingRequests = new Queue<byte[]>();

        sendReadyEvent = new ManualResetEvent(false);
        receiveReadyEvent = new ManualResetEvent(false);

        sendStoppedEvent = new ManualResetEvent(true);
        receiveStoppedEvent = new ManualResetEvent(true);

        sendThread = new Thread(this.Send);
        sendThread.IsBackground = true;
        sendThread.Start();

        recvThread = new Thread(this.Receive);
        recvThread.IsBackground = true;
        recvThread.Start();

        connectThread = new Thread(this.Connect);
        connectThread.IsBackground = true;
        connectThread.Start();

        callbackThread = new Thread(this.callback);
        callbackThread.IsBackground = true;
        callbackThread.Start();
    }

    private static Test instance = null;
    public static Test GetInstance()
    {
        if(instance == null)
            instance = new Test();
        return instance;
    }

    private void Connect()
    {
        while (true)
        {
            try
            {
                sendStoppedEvent.WaitOne();
                receiveStoppedEvent.WaitOne();

                socket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
                socket.ReceiveTimeout = RECEIVETIMOUT;

                var ip = Dns.GetHostAddresses(Host)[0];
                var endPoint = new IPEndPoint(ip, Port);
                socket.Connect(endPoint);

                sendStoppedEvent.Reset();
                receiveStoppedEvent.Reset();

                startSend();
                startReceive();
            }
            catch (SocketException e)
            {
                var waitSecond = (int)Math.Pow(3, connectingAttempt);
                if (waitSecond >= MAXCONNECTATTEMPTINTERVAL)
                {
                    waitSecond = MAXCONNECTATTEMPTINTERVAL;
                    if(ErrorHandler !=null)
                        ErrorHandler(e);
                }

                Thread.Sleep(waitSecond * 1000);
                connectingAttempt++;
            }
        }
    }

    public void Send(byte[] request)
    {
        lock (sendSync)
        {
            waitingRequests.Enqueue(request);
            Monitor.Pulse(sendSync);
        }
    }

    private void Send()
    {
        while (true)
        {
            sendReadyEvent.WaitOne();
            byte[] bytes;
            lock (sendSync)
            {
                if (waitingRequests.Count == 0)
                    Monitor.Wait(sendSync)
                bytes = waitingRequests.Dequeue();
            }

            int i = 0;
            while (i < bytes.Length)
            {
                try
                {
                    i += socket.Send(bytes, i, bytes.Length - i, SocketFlags.None);
                }
                catch (SocketException e)
                {
                    stopSend();
                    break;
                }
                catch (ObjectDisposedException e)
                {
                    stopSend();
                    break;
                }
            }
        }
    }

    private void stopSend()
    {
        socket.Close();
        sendReadyEvent.Reset();
        sendStoppedEvent.Set();
    }

    private void startSend()
    {
        sendReadyEvent.Set();
    }

    private int totalReceived = 0;
    private int  recevied = 0;

    private void Receive()
    {
        int RECVBUFFERSIZE = 1024 * 1024 * 2;
        byte[] recvBuffer = new byte[RECVBUFFERSIZE];
        while (true)
        {
            receiveReadyEvent.WaitOne();
            try
            {
                recevied = socket.Receive(recvBuffer, totalReceived, 1024, SocketFlags.None);
                if (recevied == 0)
                    stopReceive();
                totalReceived += recevied;
                //parse data
                ......
            }
            catch (SocketException e)
            {
                stopReceive();
            }
            catch (ObjectDisposedException e)
            {
                stopReceive();
            }
        }
    }

    private void stopReceive()
    {
        totalReceived = 0;
        recevied = 0;

        socket.Close();
        receiveReadyEvent.Reset();
        receiveStoppedEvent.Set();
    }

    private void startReceive()
    {
        receiveReadyEvent.Set();
    }
} 
```

这是 Wireshark 转储

编号 时间 源 目的地 协议 长度 信息

4850 1971.053146 客户端服务器 TCP 90 netview-aix-3 > autodesk-nlm [PSH, ACK] Seq=7969 Ack=188674 Win=232 Len=36

编号 时间 源 目的地 协议 长度 信息

4851 1971.077669 服务器客户端 TCP 286 [TCP 窗口已满] autodesk-nlm > netview-aix-3 [PSH, ACK] Seq=188674 Ack=7969 Win=28544 Len=232

编号 时间 源 目的地 协议 长度 信息

4852 1971.077672 服务器客户端 TCP 60 autodesk-nlm > netview-aix-3 [ACK] Seq=188906 Ack=8005 Win=28544 Len=0

编号 时间 源 目的地 协议 长度 信息

4853 1971.077766 客户端服务器 TCP 189 [TCP ZeroWindow] netview-aix-3 > autodesk-nlm [PSH, ACK] Seq=8005 Ack=188906 Win=0 Len=135

# cakephp - 在 CakePHP 2.2 中向现有的可翻译表添加一个新的可翻译字段

> ID：13243785
> 
> 赞同：1
> 
> 时间：2012-11-06T03:10:36.420
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我正在使用 CakePHP 的可翻译行为。我有一些现有的字段可以正常工作，但是在向我的模型中添加新的可翻译字段时遇到了麻烦。

CakePHP 使用 INNER JOIN 从数据库中获取所有可翻译的字段。

现在，如果我在模型中添加一个额外的可翻译字段，那么该字段的所有翻译记录都不会存在于数据库中。并且由于内部联接，每当它尝试从数据库中获取任何现有记录时，它将返回空白 - 因为新字段上的 INNER JOIN 失败，因此整个查询不返回任何内容。

当然，人们以前一定遇到过这种情况。有简单的解决方案吗？

一种解决方案是编辑/覆盖核心并将所有 INNER JOIN 变成 LEFT OUTER JOIN。这有什么问题吗？

另一种解决方案是在翻译表上运行更新，以在每次添加新的可翻译字段时为新字段创建所有额外记录 - 但我讨厌这种解决方案。

有更好的解决方案吗？其他人是如何处理这个问题的？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:38:07.973

好的，这是确保每次添加新的可翻译字段后记录存在的方法。如果您有更好的答案，请添加它，我会将您的答案标记为正确。

PS - 这是为了我的目的而测试的。我正在使用多个翻译表（http://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html#multiple-translation-tables）。我认为它应该适用于大多数情况，但如果不是，它至少应该是一个很好的起点。

在您的模型（充当可翻译的模型）中，添加以下方法。它所做的是获取一个语言环境数组，然后对表中的每条记录、每个可翻译字段和每个语言环境（即 3 个循环）检查翻译记录是否存在。如果翻译不存在，它会添加一个空白，因此至少 INNER JOIN 不会失败。

它返回它添加的所有记录的数组，因此您可以检查它们或更改它们的内容或其他任何内容。

这是模型方法：

```
function ensureTranslationIntegrity($localesToCheck){
    $allRows = $this->find('all', array('fields' => array('id')));
    $fieldsToCheck = array();

    $translatableFields = $this->actsAs['Translate'];
    foreach($translatableFields as $key => $value){
        // actsAs Translatabe can take field names only, or Key => Value pairs - see http://book.cakephp.org/2.0/en/core-libraries/behaviors/translate.html#retrieve-all-translation-records-for-a-field
        if(is_numeric($key)){
            $field = $value;
        } else {
            $field = $key;
        }
        array_push($fieldsToCheck, $field);
    }

    $translateModel = $this->translateModel();
    $addedRows = array(); // This will contain all the rows we have to add

    foreach ($allRows as $row){
        foreach($fieldsToCheck as $field){
            foreach($localesToCheck as $locale){
                $conditions = array(
                    'model' => $this->name,
                    'foreign_key' => $row[$this->name]['id'],
                    'field' => $field,
                    'locale' => $locale
                );
                $translation = $translateModel->find('first',array('conditions' => $conditions));

                if(!$translation){
                    $data = $conditions; // The data we want to insert will mostly just match the conditions of the failed find
                    $data['content'] = ''; // add it as empty

                    $translateModel->create();
                    $translateModel->save($data);

                    array_push($addedRows, $data);
                }
            } // END foreach($localesToCheck as $locale){
        } // END foreach($fieldsToCheck as $field){
    } // END foreach ($allRows as $row){

    return $addedRows;
} 
```

在您的控制器中，您可以这样称呼它：

```
public function ensure_translation_integrity(){
    $locales = array('en_au','en_gb','en_nz','pt_br','xh_za');
    $addedRows = $this->YourModel->ensureTranslationIntegrity($locales);
    debug($addedRows);
} 
```

希望对某人有所帮助，但就像我说的那样，如果有人有一个更好的解决方案，我很乐意看到。

# ruby - 在类方法中使用 ActiveSupport 的号码助手

> ID：13243788
> 
> 赞同：1
> 
> 时间：2012-11-06T03:11:04.280
> 
> 标签：ruby, class-method, activesupport

我有一个令人尴尬的基本问题：

我正在研究一个处理金钱的普通旧红宝石模型，并且一些类方法返回需要格式化以显示的价格。

过去我习惯`include ActionView::Helpers::NumberHelper`将`number_to_currency`方法粘贴在模型中，但这仅适用于实例方法。

如何让该方法可以从类方法中访问？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:36:34.550

使用`extend`：

```
class MyClass
  extend ActionView::Helpers::NumberHelper
end 
```

# ruby - Sinatra 一直给我“未找到”而不是我的页面

> ID：13243789
> 
> 赞同：0
> 
> 时间：2012-11-06T03:11:07.883
> 
> 标签：ruby, routing, sinatra, rack

非常简单的 Sinatra 代码

```
 get '/Accept/:value' do
    "Hello world"
  end

   not_found do
    "not found"
   end 
```

当我去`http://localhost:9292/Accept/?SomeKey=somevalue&Somekey2=someValue`Sinatra 时，总是返回“未找到”给我。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:26:07.740

Sinatra 将您的 url 视为`/Accept/`因为您紧跟最后一个斜线并`?`表示查询字符串的开头。

像: 这样的 url`http://localhost:9292/Accept/foo?SomeKey=somevalue&Somekey2=someValue`将触发 get 操作，传递`foo`为`params[:value]`.

# email - cakeemail 和 gmail smtp 如何更改 FROM 字段？

> ID：13243791
> 
> 赞同：1
> 
> 时间：2012-11-06T03:11:17.090
> 
> 标签：email, cakephp, smtp, gmail

我正在使用 cakephp 2.2

这是我在 Config/email.php 中的 smtp 设置

```
public $gmail = array(
        'host' => 'ssl://smtp.gmail.com',
        'port' => 465,
        'username' => 'appmailer@someapp.com',
        'password' => 'somepassword',
        'transport' => 'Smtp'
); 
```

这是我的电子邮件设置。

```
App::uses('CakeEmail', 'Network/Email');

$email = new CakeEmail('gmail');
$email->from(array('bigshot@company.com' => 'On Behalf of Big Shot'));

$email->to('client@bigshotclient.com');
$email->subject('[Test -- please ignore] one last test. Remember to hit REPLY to this email');
$email->sender('appmailer@someapp.com');
$email->replyTo('bigshot@company.com', 'Big Shot');

$email->send('Remember to hit REPLY to this email'); 
```

发送邮件时，FROM地址反复显示

```
On Behalf of Big Shot<appmailer@someapp.com> 
```

如何使 FROM 显示为 bigshot@company.com 的原始电子邮件地址？

顺便说一句，replyTo 效果很好。

我正在尝试完善邮件传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:22:21.147

显然，Gmail SMTP 将始终覆盖 FROM 字段以防止垃圾邮件。

见[https://stackoverflow.com/a/3872880/80353](https://stackoverflow.com/a/3872880/80353)

如果有人可以帮助附上说明这一点的实际 GMail 文档，那就太好了。

# android - 在线存储sqlite数据库

> ID：13243792
> 
> 赞同：1
> 
> 时间：2012-11-06T03:11:24.653
> 
> 标签：android, iphone, database, sqlite

以前，我开发了一个存储有内部 sqlite 数据库的应用程序。现在我需要将该数据库上传到在线服务器，以便管理员可以轻松修改内容。

我的应用程序是否可以在线访问/使用 sqlite 数据库？

该应用程序是在 ios 和 android 上完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:25:20.233

对于 iOS，无法访问在线数据库。您应该将数据发送到像 php 这样的服务器端脚本，然后从那里将其解析到您的数据库中。只需要在服务器端重新创建你的数据库格式。

或者将数据库导出为文件并使用 phpMyAdmin 之类的东西将其导入您的服务器。它可以导入所有不同类型的格式，如 .sql、.csv、.txt.. 任何你喜欢的格式。

祝你好运！

嗯，在重读之后，我想你会问这个问题，应用程序是否能够在将数据库导入在线资源后使用它？我对么？

简单的答案.. 适用于 iOS。不可以。您必须使用 POST 或 GET 请求将结果返回给应用程序。

# iphone - 密码字段的本地化和错误键盘

> ID：13243793
> 
> 赞同：3
> 
> 时间：2012-11-06T03:11:30.540
> 
> 标签：iphone, ios, xcode, localization

我有一个密码文本字段（安全），由于某种原因，当我更改操作系统的语言时，英文键盘仅出现在密码字段中，而不是所选语言的键盘。有人见过这个问题吗？如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:33:37.087

如果您正在测试的其他语言不是具有标准输入键盘的语言（例如法语、西班牙语），而是具有[复杂输入法](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)的语言，那么我相信您所看到的不幸的是标准的 iOS 行为。

请参阅此处描述的问题： [Why can't I usesecureTextEntry with a UTF-8 keyboard?](https://stackoverflow.com/questions/9944769/why-cant-i-use-securetextentry-with-a-utf-8-keyboard) 在这里（有解决方案）：[使用secureTextEntry为UITextField选择键盘语言](https://stackoverflow.com/questions/6828834/selecting-language-of-the-keyboard-for-uitextfield-with-securetextentry)

# php - PHP：如何显示在 XML xpath 中定义的子节点？

> ID：13243794
> 
> 赞同：0
> 
> 时间：2012-11-06T03:11:33.297
> 
> 标签：php, xml

嗨，我想找到一个带有文本字符串“CAT1”的 xml 节点并显示，但我似乎无法正确处理。有人可以告诉我出了什么问题。

---目录.xml---

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Catalog>
    <Category>
        <Name>CAT1</Name>
        <Location>
            <Room> Alpha </Room>
        </Location>  
    </Category>
    <Category>
        <Name>CAT2</Name>
        <Location>
            <Room> Bravo </Room>
        </Location>  
    </Category>
    <Category>
        <Name>CAT3</Name>
        <Location>
            <Room> Charlie </Room>
        </Location>  
    </Category>
    <Category>
        <Name>CAT4</Name>
        <Location>
            <Room> Delta </Room>
        </Location>  
    </Category>
</Catalog> 
```

---arr0.php---

```
<?php
$catalog = simplexml_load_file("catalog.xml");
$category = $catalog->Category;
$name = $category->Name;
$location = $category->Location;
$room = $location->Room;

for ($i = 0; $i <= 22; $i++)
{
$display = $catalog->xpath("//Category/Name[contains(text("CAT1"),'".$category[$i]->$name."']/parent::");
{
echo $display;
echo $room;
}
}
?> 
```

* * *

结果是显示节点 [Category][Name] = CAT1, [Location][Room] 下列出的所有详细信息，但显示错误

解析错误：语法错误，第 11 行 /home/a3440614/public_html/arr0.php 中的意外 T_STRING

* * *

任何纠正和简化它的帮助表示赞赏。

谢谢

# c# - 只写在列表视图的第 2 列？

> ID：13243803
> 
> 赞同：1
> 
> 时间：2012-11-06T03:12:32.420
> 
> 标签：c#, windows, forms, listview

我的 listView 中有两列，我们称它们为 Column1 和 Column2。

是否可以仅将一堆项目添加到 column2，并使这些项目仅在 column2 下而不是 column1 下？

当我添加项目时，它会向 Column2 和 Column1 添加一个项目，我不希望这样。

我该怎么做呢？

这是我的一些测试代码。我用两个字符串制作了一个数组。我希望这两个字符串都在 column2 下（每个都在自己的行中），而不是在 column1 下。当我测试它时，它们仍然在 column2 AND column1 下，这是我不想要的。

```
string[] h = {"Hi","Hello"};
listViewGoogleInsight.Items.Add(new ListViewItem(h)); 
```

* * *

这是我现在尝试做的代码。[第一部分将项目添加到第 1 列，第二部分将项目添加到第 2 列。到目前为止，在显示第 2 列项目链接](http://content.screencast.com/users/kytro360/folders/Jing/media/838ca0aa-f132-4cb8-b72c-c863ee3956bb/2012-11-05_2052.png)之前，它在第 2 列下制作了很多空格 。我该如何解决？：

```
string[] n = getBetweenAll(site, "('rising drilldown', '", "');\"");
         foreach (string s in n) 
         listViewGoogleInsight.Items.Add(new ListViewItem(s));

string[] u = getBetweenAll(site, "<td class=\"trends-hbars-value\">", "</td>");

         foreach (var greeting in u)
         {
             var item = new ListViewItem();

             item.SubItems.Add(greeting);

             listViewGoogleInsight.Items.Add(item);
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:37:53.257

自从我使用 ListView 已经很长时间了，但我认为这样的事情会做你想要的......

```
string[] h = {"Hi","Hello"};

foreach (var greeting in h)
{
    var item = new ListViewItem();

    item.SubItems.Add(greeting);

    listViewGoogleInsight.Items.Add(item);
} 
```

如果这不完全正确，请阅读该`SubItems`属性 - 这可能是您需要了解的内容。

**编辑：**假设已经添加了行，请尝试使用此循环...

```
for (int i = 0; i < h.Length; i++)
{
    listViewGoogleInsight.Items[i].SubItems.Add(h[i]);
} 
```

# cobol - 值为空时填充的空格

> ID：13243806
> 
> 赞同：1
> 
> 时间：2012-11-06T03:12:46.633
> 
> 标签：cobol

我正在写一个在 cobol 上的平面文件。但是当变量为 null 时，它不会填充空格。请帮忙。

这是平面文件结构声明的一些部分。

```
01 Fs-IL494-REC.
   03 FX-IL494-TRXN-1-10                     PIC X(410) VALUE SPACES.

01 Wx-TRXN-INFO-BUF                PIC X(410) VALUE SPACES.
01 Ws-TRXN-INFO REDEFINES Wx-TRXN-INFO-BUF OCCURS 10 TIMES.
03 Wx-TRXN-DT                   PIC X(8).
03 Wx-TRXN-CDE                  PIC X(3).
03 W9-TRXN-AMT                  PIC S9(13)V9(2)
                                    SIGN LEADING SEPARATE.
03 Wx-TRXN-DESC                 PIC X(14).

Doing some query to retrive the records from database.

INITIALIZE Wx-TRXN-INFO-BUF.
INITIALIZE FX-IL494-TRXN-1-10.

ADD 1 TO W9-ARR-CNT
MOVE F9-IRC-TXN-DT TO Wx-TRXN-DT(W9-ARR-CNT)
MOVE F9-IRC-TXN-CDE TO Wx-TRXN-CDE(W9-ARR-CNT)
MOVE F9-IRC-TXN-AMT TO W9-TRXN-AMT(W9-ARR-CNT)
MOVE FX-IRC-TXN-DESC TO Wx-TRXN-DESC(W9-ARR-CNT)

MOVE Wx-TRXN-INFO-BUF TO FX-IL494-TRXN-1-10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T15:47:53.717

我的假设：

*   这是 SQL（可能是 DB/2）
*   你正在做一个`SELECT INTO :host-variable`
*   当相应的数据库表列包含一个值时，这`host-variable`是您期望设置的内容。`SPACES``NULL`

如果以上是正确的，那么问题是当一个`NULL`值被从数据库中选择出来时，对应`host-variable`的没有更新。它将保留执行查询之前的任何值。

您可能需要在`null value indicator`查询中添加一个。当空值指示符设置为小于零（通常为 -1）的值时，相应的主机变量不变。这是您应该使用的模式：

```
EXEC SQL
   SELECT column-name-1,
          column-name-2
   INTO :host-var-1 :null-ind-1,
        :host-var-2 :null-ind-2
   FROM some-table
   WHERE bla bla bla...
END-EXEC 
```

“额外”变量应该声明`null-ind-1`为. 请注意，主变量和空指示符之间“缺少”逗号。当相应的或包含 NULL 值时，将为空指示符变量分配一个小于零的值。如果是这种情况，那么和将保持不变（即保留它们在.`null-ind-2``S9(4) USAGE COMP``column-name-1``column-name-2``host-var-1``host-var-2``EXEC SQL`

在您的代码中，`EXEC SQL`您应该执行以下操作：

```
IF null-ind-1 < ZERO
   MOVE SPACES TO host-var-1
END-IF
IF null-ind-2 < ZERO
   MOVE SPACES to host-var-2
END-IF 
```

我还看到程序员`EXEC SQL`在对 NULL 列值执行任何他们想要的操作之前简单地初始化所有主机变量，而不用在查询中使用 null 指示符（一旦你知道 DB2 将不难弄清楚为什么它会起作用）在 NULL 值的情况下不更新主机变量）..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:32:34.427

Initialize 与 value 子句相关联，它的行为可能古怪而烦人。

在您阅读之前，简单的“将空间移动到我的记录”要好得多......

# python - 即使直接子进程已终止，Popen 也会等待子进程

> ID：13243807
> 
> 赞同：21
> 
> 时间：2012-11-06T03:12:51.193
> 
> 标签：python, windows, subprocess, popen

我在 Windows 8/XP 上使用 Python 2.7。

我有一个程序 A 使用以下代码运行另一个程序 B：

```
p = Popen(["B"], stdout=PIPE, stderr=PIPE)
stdout, stderr = p.communicate()
return 
```

B 运行批处理脚本 C。C 是一个长时间运行的脚本，即使 C 尚未完成，我也希望 B 退出。我已经使用以下代码（在 B 中）完成了它：

```
p = Popen(["C"])
return 
```

当我运行 B 时，它按预期工作。但是，当我运行 A 时，我希望它在 B 退出时退出。但是即使 B 已经退出，A 也会等到 C 退出。关于正在发生的事情以及可能的解决方案有什么想法？

不幸的是，将 A 更改为 B 的明显解决方案不是一种选择。

这是说明此问题的功能示例代码： [https ://www.dropbox.com/s/cbplwjpmydogvu2/popen.zip?dl=1](https://www.dropbox.com/s/cbplwjpmydogvu2/popen.zip?dl=1)

zip 文件由以下文件组成，其内容如下：

`A.py`

```
from subprocess import PIPE, Popen
import sys

def log(line):
    with open("log.txt", "a") as logfile:
        logfile.write(line)

log("\r\n\r\nA: I'll wait for B\r\n")

p = Popen(["C:\\Python27\\python.exe", "B.py"], stdout=PIPE, stderr=PIPE)
stdout, stderr = p.communicate()

log("A: Done.\r\n")
sys.exit(0) 
```

`B.py`

```
from subprocess import Popen, PIPE
import sys

def log(line):
    with open("log.txt", "a") as logfile:
        logfile.write(line)

log("B: launching C\r\n")

p = Popen(["C.bat"])

log("B: Not waiting for C at all. bye!\r\n")
sys.exit(0) 
```

`C.bat`

```
@echo off
echo C: Start long running task : %time% >>  "log.txt"
ping -n 10 127.0.0.1>nul
echo C: Stop long running task : %time% >>  "log.txt" 
```

非常感谢任何输入。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-06T18:17:02.497

您可以为子流程提供`start_new_session`模拟`C`：

```
#!/usr/bin/env python
import os
import sys
import platform
from subprocess import Popen, PIPE

# set system/version dependent "start_new_session" analogs
kwargs = {}
if platform.system() == 'Windows':
    # from msdn [1]
    CREATE_NEW_PROCESS_GROUP = 0x00000200  # note: could get it from subprocess
    DETACHED_PROCESS = 0x00000008          # 0x8 | 0x200 == 0x208
    kwargs.update(creationflags=DETACHED_PROCESS | CREATE_NEW_PROCESS_GROUP)  
elif sys.version_info < (3, 2):  # assume posix
    kwargs.update(preexec_fn=os.setsid)
else:  # Python 3.2+ and Unix
    kwargs.update(start_new_session=True)

p = Popen(["C"], stdin=PIPE, stdout=PIPE, stderr=PIPE, **kwargs)
assert not p.poll() 
```

[1]: [CreateProcess() 的进程创建标志](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-28T03:30:17.983

这是改编自塞巴斯蒂安的答案和[这个](https://stackoverflow.com/a/13593715/461834)答案的代码片段：

```
#!/usr/bin/env python
import os
import sys
import platform
from subprocess import Popen, PIPE

# set system/version dependent "start_new_session" analogs
kwargs = {}
if platform.system() == 'Windows':
    # from msdn [1]
    CREATE_NEW_PROCESS_GROUP = 0x00000200  # note: could get it from subprocess
    DETACHED_PROCESS = 0x00000008          # 0x8 | 0x200 == 0x208
    kwargs.update(creationflags=DETACHED_PROCESS | CREATE_NEW_PROCESS_GROUP, close_fds=True)  
elif sys.version_info < (3, 2):  # assume posix
    kwargs.update(preexec_fn=os.setsid)
else:  # Python 3.2+ and Unix
    kwargs.update(start_new_session=True)

p = Popen(["C"], stdin=PIPE, stdout=PIPE, stderr=PIPE, **kwargs)
assert not p.poll() 
```

我只在 Windows 上亲自测试过。

# c++ - 我需要在 C++ 中使用 new 运算符吗

> ID：13243813
> 
> 赞同：0
> 
> 时间：2012-11-06T03:13:23.667
> 
> 标签：c++

以下代码块有什么区别：

```
#include<iostream>
using namespace std;
int main()
{
    int *p;
    float *q;
    cout<<p<<"\n"<<q;
} 
```

这个代码：

```
#include<iostream>
using namespace std;
int main()
{
    int *p;
    float *q;
    p = new int;
    q = new float;
    cout<<p<<"\n"<<q;
} 
```

在这两种情况下，指针都分配了一些内存，对吗？

那我为什么要使用 new 运算符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T03:14:47.007

不，`int *p`并`float *p`声明指针，但它们没有被初始化，所以它们每个都指向内存中的一个随机地址。特别是，它们不指向分配给您的程序的内存空间。

第二段代码正确分配内存并将该内存的地址存储在两个指针中。但是，请注意，您的代码永远不会取消分配内存，因此存在内存泄漏。您必须在程序结束时使用`delete p`and来避免这种情况。`delete q`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T03:28:59.370

更直接地回答标题中的问题：不，您不必`new`在 C++ 中经常使用运算符；事实上，在编写良好的代码中，您通常很少使用它。

在这种情况下，您通常不想使用指针，而是只定义`int`并`float`使用自动存储类，而不定义任何指针或`new`根本不使用。当您使用它时，大多数代码也不应该包含`using namespace std;`在其中。修复这些，你最终可能会得到这样的结果：

```
#include<iostream>

int main()
{
    int p = 1;
    float q = 2.0f;
    std::cout<<p<<"\n"<<q;
} 
```

如果您的代码有`new`和/或`T *xxx`经常（在哪里`T`是某种类型并且`xxx`是某种标识符），那么很有可能这并不是您*是否*做错了什么的问题，而只是有多少事情以及错误的严重程度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T03:19:51.330

在第一个代码块中，为指针本身分配了内存，但没有分配它们可以指向并有效使用的内存。打印出来的地址对于您的程序使用是不安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T03:20:24.740

“指针”变量确实已经在`main()`堆栈中分配，32 位机器中的 4 个字节或 64 位机器中的 8 个字节。`int`分别由 p 和 q 指向的和的内存存储`float`在第一种情况下尚未分配。您`cout`只是打印出`p`&的内存地址`q`，而不是`p`或`q`指向的值。

# ajax - 使用 Eclipse 进行调试时为空 AJAX 响应

> ID：13243815
> 
> 赞同：0
> 
> 时间：2012-11-06T03:13:33.790
> 
> 标签：ajax, eclipse

我正在使用 Eclipse 3.7.2 进行 PHP Web 应用程序开发。

当使用调试器（我已经设置为在 Firefox 中启动应用程序）时，快速触发的 AJAX 调用在使用 Firebug 检查时包含空白响应。这不是跨域问题，因为 AJAX 调用都是针对同一台服务器的。

如果我使用 Firebug 在 JavaScript 代码中的 AJAX 调用之前设置断点，然后恢复执行，那么 AJAX 响应将被正确加载。

看来这个问题可能是由于 Eclipse 无法处理同时请求。有什么方法可以更改 Eclipse 的设置以允许更多请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:31:11.837

问题是由于使用 Zend Debugger 造成的。切换到 XDebug 解决了这个问题。也在这里发布 -[使用 Eclipse PDT 调试具有并发请求的 Ajax 页面](https://stackoverflow.com/questions/11469297/using-eclipse-pdt-for-debugging-ajax-pages-with-concurrent-requests)

# python - 读取文本文件并匹配值阈值

> ID：13243816
> 
> 赞同：0
> 
> 时间：2012-11-06T03:13:38.803
> 
> 标签：python, loops, text

我有大量包含感兴趣数据的 .txt 文件（N > 1000），我希望识别其“平均值”值超过给定阈值（例如 0.5）的文件，并打印其中包含就是这样。每个文件中的数据组织如下：

```
[
    {
      "parameter": {
          "max": 0.6640571758027143,
          "mean": 0.13404294175225137,
          "min": 0.0,
          "std": 0.09435715828616785
      },
      {
        "intensity": [
            {
                "max": [
                    3.1719575216784217
                ],
                "mean": [
                    -3.552713678800501e-17
                ],
                "min": [
                    -2.707115982837323
                ],
                "std": [
                    1.0000000000000004
                ]
                ... 
```

为了使事情稍微复杂一些，我只想阅读“参数”的“平均值”而不是“强度”。

我有一个想法，我应该使用 for 循环读取这个文件，大致包含以下代码：

```
subjects = [allmyfilenames]
for subj in subjects:
    file = open('C:/%s.txt' %subj, 'r')
    for line in file.readlines(): print line 
```

从那里，我有点迷路了。我如何识别用于匹配我的阈值 (0.5) 的正确线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:59:42.647

尝试这样的事情，我不完全确定你的数据格式，但这样的事情可能适用于上面的数据格式。未测试**

```
subjects = [allmyfilenames]
    for subj in subjects:
        with open('C:/%s.txt' %subj, 'r') as datafile:
            data = json.load(datafile)
            if data[0]['parameter']['mean'] > 0.5:
                print subj 
```

# css - 修改引导程序预输入的“活动”css

> ID：13243817
> 
> 赞同：0
> 
> 时间：2012-11-06T03:13:41.153
> 
> 标签：css, twitter-bootstrap

Bootstrap 在 2.2.1 中存在一个带有预输入继承的错误 - 已在 2.2.2 中修复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T17:25:40.670

Bootstrap Typeahead 下拉菜单动态生成以下 HTML：

```
 <ul class="typeahead dropdown-menu">
      ...
      <li><a href="#">MATCHING RESULT</a></li>
      ...
  </ul> 
```

适用的默认 CSS 规则也是一种样式下拉菜单。

```
.dropdown-menu .active > a,
.dropdown-menu .active > a:hover {
    color: #333333;
    text-decoration: none;
    background-color: #0081c2;
    ...
} 
```

因此，要在不更改下拉菜单的情况下覆盖预输入，您需要在此规则之后的某处添加一条规则。加载 bootstrap.css 后，我将我的放在一个单独的文件中。*

```
.typeahead .active > a,
.typeahead .active > a:hover {
    color: white;

    /* Change the typeahead background color here if you'd like */
    background-color: Green;

    /* Turns off the default background gradients */
    background-image: none;
} 
```

**最佳实践建议您在投入生产时合并并最小化所有 CSS，但无论如何，此规则应在上述规则之后，除非您使其比 .dropdown-menu 规则更具体*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:25:30.997

这是 bootstrap.css 文件中的第 2838 行，只需将其更改为：

```
color: white; 
```

如果您正在使用 .less 文件，我相信您将不得不在 dropdown.less 文件中进行一些挖掘。如果发生这种情况，只需快速搜索：“.dropdown-menu li > a:focus, .dropdown-submenu:hover > a {”，您就可以找到它。

# android - 将 Drawable 设置为 imageView

> ID：13243819
> 
> 赞同：0
> 
> 时间：2012-11-06T03:13:55.170
> 
> 标签：android, image, bitmap, imageview, drawable

我目前正在尝试检索包的图标并使用此代码将其设置为 imageView。ai 是一个可绘制对象。

```
final PackageManager pm = getPackageManager();

try {
        ai = pm.getApplicationIcon(packageName);
    } catch (NameNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Bitmap bitmap = ((BitmapDrawable)ai).getBitmap();

    Log.i("Icons Drawable", ai.toString());
    Log.i("Icons Bitmap", bitmap.toString());

imageView.setImageBitmap(bitmap); 
```

日志输出：

```
 11-06 11:10:22.785: I/Icons Drawable(20017): android.graphics.drawable.BitmapDrawable@416184f0
    11-06 11:10:22.785: I/Icons Bitmap(20017): android.graphics.Bitmap@41618488

11-06 11:10:22.790: E/AndroidRuntime(20017): FATAL EXCEPTION: main
11-06 11:10:22.790: E/AndroidRuntime(20017): java.lang.RuntimeException: Unable to start activity : java.lang.NullPointerException
11-06 11:10:22.790: E/AndroidRuntime(20017):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1973)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1999)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at android.os.Looper.loop(Looper.java:137)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at android.app.ActivityThread.main(ActivityThread.java:4513)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at java.lang.reflect.Method.invokeNative(Native Method)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at java.lang.reflect.Method.invoke(Method.java:511)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:974)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:741)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at dalvik.system.NativeStart.main(Native Method)
11-06 11:10:22.790: E/AndroidRuntime(20017): Caused by: java.lang.NullPointerException
11-06 11:10:22.790: E/AndroidRuntime(20017):    at com.analyze.project.MalwareAlertDialog.onCreate(MalwareAlertDialog.java:98)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at android.app.Activity.performCreate(Activity.java:4465)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
11-06 11:10:22.790: E/AndroidRuntime(20017):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
11-06 11:10:22.790: E/AndroidRuntime(20017):    ... 11 more 
```

即使我尝试直接将 Drawable 设置为 imageView 它也不起作用

```
imageView.setImageDrawable(ai); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:38:57.863

试试这个

```
PackageManager pm = getPackageManager();
ApplicationInfo info=pm.getApplicationInfo(packageName,PackageManager.GET_META_DATA);
imageView.setImageDrawable(info.loadIcon(pm)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:33:03.007

我建议你使用输入流这是一个例子

```
InputStream floorIs = context.getResources().openRawResource(R.drawable.floor_texture);

InputStream wallIs =context.getResources().openRawResource(R.drawable.wall_mayu_texture);

InputStream wallIs2 = context.getResources().openRawResource(R.drawable.wall_buzoo_texture);

InputStream wallIs3 = context.getResources().openRawResource(R.drawable.wall_niko_texture);

InputStream wallWindowIs =context.getResources().openRawResource(R.drawable.wall_window_texture);

InputStream ceilingIs = context.getResources().openRawResource(R.drawable.ceiling_texture);

Bitmap bitmaps[] = new Bitmap[6];
bitmaps[0] = null;
bitmaps[1] = null;
bitmaps[2] = null;
bitmaps[3] = null;
bitmaps[4] = null;
bitmaps[5] = null;
            try{
                bitmaps[0] = BitmapFactory.decodeStream(floorIs);
                bitmaps[1] = BitmapFactory.decodeStream(wallIs);
                bitmaps[2] = BitmapFactory.decodeStream(wallWindowIs);
                bitmaps[3] = BitmapFactory.decodeStream(ceilingIs);
                bitmaps[4] = BitmapFactory.decodeStream(wallIs2);
                bitmaps[5] = BitmapFactory.decodeStream(wallIs3);
            }
            finally{
                try{
                    floorIs.close();
                    floorIs = null;
                    wallIs.close();
                    wallIs = null;
                    wallIs2.close();
                    wallIs2 = null;
                    wallIs3.close();
                    wallIs3 = null;
                    wallWindowIs.close();
                    wallWindowIs = null;
                    ceilingIs.close();
                    ceilingIs = null;
                }
                catch(IOException e){}
            } 
```

在此之后尝试将位图加载到您在使用之前定义的图像视图

```
imageView.setImageBitmap(bitmap[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T03:47:39.923

这可能是一个幼稚的问题，但是由于这发生在您的 onCreate() 回调中，并且您获得了该 ImageView 的空指针异常，您是否忘记调用 setContentView 来扩展您的布局？您的布局可能从未创建，这意味着您尝试绘制的视图也不存在。

# java - 我无法将 jpanel 添加到 jframe

> ID：13243821
> 
> 赞同：0
> 
> 时间：2012-11-06T03:14:07.207
> 
> 标签：java, swing, jpanel

我有以下代码，但我的 JPanel 没有显示。我不知道为什么。你明白为什么吗？我看到的只是黑色背景的 JFrame

```
public class ShapeFrame extends JFrame 
{
    private JPanel outlinePanel;

    public ShapeFrame(LinkedList<Coordinate> list)
    {
        super("Outline / Abstract Image");
        setSize(950, 500);
        setLayout(null);
        setBackground(Color.BLACK);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel outlinePanel = new JPanel();
        outlinePanel.setBackground(Color.WHITE);
        outlinePanel.setBorder(null);
        outlinePanel.setBounds(50, 50, 400, 400);
        add(outlinePanel);

//      abstractPanel = new JPanel();
//      abstractPanel.setBackground(Color.WHITE);
//      abstractPanel.setBounds(500, 50, 400, 400);
//      add(abstractPanel);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:24:20.947

我得到的只是一个带有白色方块的框架......

您应该使用`getContentPane().setBackground()`设置框架的背景

框架由层组成。通常，您看到的内容会（在大多数情况下自动）添加到覆盖框架的内容窗格中。

![在此处输入图像描述](../Images/a321c951ac60dc6d668a654fdb7b0d2d.png)

*（图片借自Java Trails）*

所以设置框架的背景“看起来”没有效果。

使用您的代码...

![在此处输入图像描述](../Images/049d6c305b525248d607d20321acb700.png)

使用`getContent().setBackground(...)`

![在此处输入图像描述](../Images/666580746e15d02de87c08b84f4e5328.png)

这是我用来测试您的代码的代码...

```
public class BadLayout01 {

    public static void main(String[] args) {
        new BadLayout01();
    }

    public BadLayout01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                ShapeFrame shapeFrame = new ShapeFrame();
                shapeFrame.setSize(525, 525);
                shapeFrame.setVisible(true);

            }
        });
    }

    public class ShapeFrame extends JFrame {

        private JPanel outlinePanel;

        public ShapeFrame() {
            super("Outline / Abstract Image");
            setSize(950, 500);
            setLayout(null);
            getContentPane().setBackground(Color.BLACK);
//            setBackground(Color.BLACK);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            JPanel outlinePanel = new JPanel();
            outlinePanel.setBackground(Color.WHITE);
            outlinePanel.setBorder(null);
            outlinePanel.setBounds(50, 50, 400, 400);
            add(outlinePanel);

//      abstractPanel = new JPanel();
//      abstractPanel.setBackground(Color.WHITE);
//      abstractPanel.setBounds(500, 50, 400, 400);
//      add(abstractPanel);
        }
    }
} 
```

# huffman-code - 如何保存霍夫曼代码

> ID：13243824
> 
> 赞同：0
> 
> 时间：2012-11-06T03:14:28.643
> 
> 标签：huffman-code

> **可能重复：**
> [需要有关如何使用霍夫曼代码对单词进行编码的帮助](https://stackoverflow.com/questions/347316/need-help-on-how-to-encode-words-using-huffman-code)

假设我有以下霍夫曼编码符号

A - 0 B - 10 C - 110 D - 111 并且您要对序列进行编码

ABAACDADBB 然后我得到这样的二进制代码：01000110 11101111 010

(01000110) = 0x46 (11101111) = 0xEF

010=???? 如果此代码中没有 010，我可以将这些字节保存到文件中。现在我应该如何处理这个010？保存为 00000010？那是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:30:39.637

您将需要一些编码数据的标头（一个字节就足够了，但您可能需要更多，具体取决于您实际需要的内容），并且您可以在最后一个数据字节中存储多少填充位。因此，在您的示例中，`010`您的标头字节将包含`5`，因为您需要忽略的最后一个字节的末尾有 5 位。

查找存储在实际有用的位中的值是您需要逐位处理的事情，因为您可能有重叠的代码，其中代码可能被分成两个字节 - 所以有些位可能在字节上`N`，而有些位可能重叠到 byte 上`N+1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:23:03.303

您可以包含一个标记您已完成的结束字节，然后可能还有另一个字节表示在最后一个数据字节中存储了多少项目。然后，您可以通过知道有多少位实际上是重要的，从最后一个字节中挑选出剩余的字符。

# c++ - .cpp 文件中函数的多个定义

> ID：13243829
> 
> 赞同：1
> 
> 时间：2012-11-06T03:15:40.147
> 
> 标签：c++, function, include, declaration

# 编辑：

咳咳，感觉自己像个白痴。直到我问了他的问题几个月后，我才正确地向我解释了 c++ 文件包含。请不要评论我的设置到底有多大缺陷，我非常清楚。

我有一个包含许多 .h 和 .cpp 文件的多文件项目。特别是 io_util.h 会产生一系列奇怪的错误。对于包含函数声明但没有实现的 .h 可以完美编译，但在函数体所在的 .cpp 中，每个函数都会产生以下错误：

```
 Multiple markers at this line
- first defined here
- multiple definition of 
 `<namespace>::<function name>(<args>)' 
```

文件“io_util.cpp”仅包含在项目 CollectionBase.h 中一次。“io_util.h”仅包含在“io_util.cpp”中

这是两个文件：

。H：

```
/*
 * io_util.h
 */

#ifndef IO_UTIL_H_
#define IO_UTIL_H_

#include <iostream>
#include <sstream>
#include <string>
#include <cmath>

#define IO_DEBUG(a) cout << #a << '=' << a << '\n'

#define CASE_SEP 32
#define NUM_CHAR_SEP 48

namespace std
{
    void getVar(int&, int);

    void getVar(double&, double);

    void getVar(unsigned&, unsigned);

    int get_num_digits(int);

    int get_digit(int, const int, const int);

    string value_of(int);
}

#endif /* IO_UTIL_H_ */ 
```

.cpp：

```
/*
 * io_util.cpp
 */
#ifndef IO_H_
#define IO_H_

#include "io_util.h"

namespace std
{

void getVar(int& i, int forbidden = NAN)
{
    string str;

    while(true)
    {
        getline(cin,str);

        if(str.find_first_not_of("-0123456789") != string::npos || !(stringstream(str) >> i))
        {
            cout << "invalid input.\n\n";
        }
        else if(i == forbidden)
        {
            cout << "illegal value.\n\n";
        }
        else
        {
            break;
        }
    }
}

void getVar(double& d, double forbidden = NAN)
{
    string str;

    while(true)
    {
        getline(cin,str);

        if(str.find_first_not_of("-.0123456789eE") != string::npos || !(stringstream(str) >> d))
        {
            cout << "invalid input.\n\n";
        }
        else if(d == forbidden)
        {
            cout << "illegal value.\n\n";
        }
        else
        {
            break;
        }
    }
}

void getVar(unsigned & u, unsigned forbidden = NAN)
{
    string str;

    while(true)
    {
        getline(cin,str);

        if(str.find_first_not_of("0123456789") != string::npos || !(stringstream(str) >> u))
        {
            cout << "invalid input.\n\n";
        }
        else if(u == forbidden)
        {
            cout << "illegal value.\n\n";
        }
        else
        {
            break;
        }
    }
}

int get_num_digits(int i)
{
    if(i < 0)
    {
        i = -i;
    }

    int result = 1;

    while(i > 10)
    {
        i /= 10;
        result++;
    }

    return result;
}

int get_digit(int i, const int num_digits, const int dig)
{
    if(num_digits < dig)
    {
        return 0;
    }

    const int dig_p10 = pow(10.0,num_digits - dig);

    i -= dig_p10 * round(i/dig_p10);

    if (dig < num_digits - 1)
    {
        i = round(i/int(pow(10.0,num_digits - dig - 1)));
    }

    return i;
}

string value_of(int i)
{
    string str;

    if (i < 0)
    {
        str += "-";
        i = -i;
    }

    const int num_dig = get_num_digits(i);

    for(int n = 0; n < num_dig; n++)
    {
        str += char(get_digit(i, num_dig, n) + NUM_CHAR_SEP);
    }

    return str;
}

}

#endif /*IO_H_*/ 
```

我在这个网站上查看了许多关于类似现象的问题，但没有一个有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:29:06.520

首先，io_util.cpp 应该在要编译的代码文件的*源*文件列表中。项目中需要其中包含的功能的任何地方都应该包含 io_util.h，包括 CollectionBase.h。不要在**任何东西**中#include .cpp 文件（即**不允许**#include "io_util.cpp"）。

 **其次，您的 io_util.h 头文件在名为 getVar() 的 std 命名空间（这也是一个禁忌）中声明了函数。尾随参数的默认参数值属于*那里*；**不在**io_util.cpp 文件中。

解决这两个问题应该会让你走得更远。**

# java - 我得到一个 java.lang.IndexOutOfBoundsExeption: Invalid index 9, size is 5

> ID：13243832
> 
> 赞同：1
> 
> 时间：2012-11-06T03:16:09.977
> 
> 标签：java, android

当我从一个数组列表中删除和放置一个项目到另一个时，我不断收到这个异常。有时索引是 13，大小是 5。其他时候是 0 和 0。它是随机发生的，在速度较慢的设备上更常见。

```
11-05 19:42:34.487: W/dalvikvm(2232): threadid=14: thread exiting with uncaught exception   (group=0x40c3ca68)
11-05 19:42:34.497: E/AndroidRuntime(2232): FATAL EXCEPTION: Thread-491
11-05 19:42:34.497: E/AndroidRuntime(2232): java.lang.IndexOutOfBoundsException: Invalid index size is 5
11-05 19:42:34.497: E/AndroidRuntime(2232):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
11-05 19:42:34.497: E/AndroidRuntime(2232):     at java.util.ArrayList.add(ArrayList.java:143)
11-05 19:42:34.497: E/AndroidRuntime(2232):     at com.pigeoncraft.pigeoncraft.entity.Inventory.add(Inventory.java:25)
11-05 19:42:34.497: E/AndroidRuntime(2232):     at com.pigeoncraft.pigeoncraft.screen.ContainerMenu.tick(ContainerMenu.java:62)
11-05 19:42:34.497: E/AndroidRuntime(2232):     at com.pigeoncraft.pigeoncraft.Game.tick(Game.java:312)
11-05 19:42:34.497: E/AndroidRuntime(2232):     at com.pigeoncraft.pigeoncraft.Game.iterate(Game.java:265)
11-05 19:42:34.497: E/AndroidRuntime(2232):     at com.pigeoncraft.pigeoncraft.GameActivity$2.run(GameActivity.java:128)
11-05 19:42:34.497: E/AndroidRuntime(2232):     at java.lang.Thread.run(Thread.java:856) 
```

这是库存的代码。

```
 package com.mojang.ld22.entity;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import  com.pigeoncraft.pigeoncraft.item.Item;
import  com.pigeoncraft.pigeoncraft.ResourceItem;
import  com.pigeoncraft.pigeoncraft.Resource;

public class Inventory  implements Serializable {
private static final long serialVersionUID = -8246630353617240883L;

public List<Item> items = new ArrayList<Item>();

public void add(Item item) {
    add(items.size(), item);
}

public void add(int slot, Item item) {
    if (item instanceof ResourceItem) {
        ResourceItem toTake = (ResourceItem) item;
        ResourceItem has = findResource(toTake.resource);
        if (has == null) {
            items.add(slot, toTake); <--------------------
        } else {
            has.count += toTake.count;
        }
    } else {
        items.add(slot, item);
    }
}

private ResourceItem findResource(Resource resource) {
    for (int i = 0; i < items.size(); i++) {
        if (items.get(i) instanceof ResourceItem) {
            ResourceItem has = (ResourceItem) items.get(i);
            if (has.resource.name.equals(resource.name))
            {
                return has;
            }
        }
    }
    return null;
}

public boolean hasResources(Resource r, int count) {
    ResourceItem ri = findResource(r);
    if (ri == null) return false;
    return ri.count >= count;
}

public boolean removeResource(Resource r, int count) {
    ResourceItem ri = findResource(r);
    if (ri == null) return false;
    if (ri.count < count) return false;
    ri.count -= count;
    if (ri.count <= 0) items.remove(ri);
    return true;
}

public int count(Item item) {
    if (item instanceof ResourceItem) {
        ResourceItem ri = findResource(((ResourceItem)item).resource);
        if (ri!=null) return ri.count;
    } else {
        int count = 0;
        for (int i=0; i<items.size(); i++) {
            if (items.get(i).matches(item)) count++;
        }
        return count;
    }
    return 0;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:43:20.223

在不确切知道您的代码在从 ArrayList 添加/删除对象时正在做什么的情况下，很明显这段代码根本不是线程安全的，因为您的方法/变量都没有同步。ArrayList 本身是，因为 Java 将它免费提供给您，但您的 add 方法甚至从不检查您是否尝试在可支持的索引处插入对象。在调用 add 之前，您至少应该检查`slot >= items.length()`是否可以将其附加到列表的末尾或至少更优雅地退出

# iphone - 文件的所有者属于错误的类

> ID：13243834
> 
> 赞同：0
> 
> 时间：2012-11-06T03:16:15.117
> 
> 标签：iphone, ios, iphone-5

我的 iPhone 应用程序有标准的`ViewController.h`,`ViewController.m`并`ViewController.xib`支持 3.5 英寸视网膜显示屏。我制作了一个新`ViewController_5.h`的`ViewController_5.m`,`ViewController_5.xib`来支持 iPhone 5 上的 4 英寸显示屏。理论上，它们应该是完全独立的。但是现在，`IBActions`从`ViewController_5.h`出现在 中`ViewController_5.xib`，当我连接它们时，我希望动作能够执行 中的任何内容`ViewController_5.m`。但它实际上是在`ViewController.m`. 这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T23:09:05.487

从您发布的代码看来，您只需要在 if 语句的 else 部分中提供正确的视图控制器类（ViewController_5），如下所示

```
... else { self.viewController = [[ViewController_5 alloc] initWithNibName:@"ViewController_5" bundle:nil]; } 
```

# javascript - 在 phantomjs 中的 qunit 测试期间在 iframe 中显示 JS 错误

> ID：13243836
> 
> 赞同：1
> 
> 时间：2012-11-06T03:16:34.950
> 
> 标签：javascript, cross-domain, qunit, phantomjs, gruntjs

我正在开发一个跨域 RPC 库，我想使用 qunit 对其进行一些单元测试。

为了正确进行测试，我设置了一个 grunt 文件，该文件启动 node.js 服务器和 phantomjs 以加载测试，如此[处](https://github.com/gruntjs/grunt/blob/master/docs/task_qunit.md)`rpc.html`所述（使用服务器任务以便可以模拟不同的域，并且）。此测试打开一个 iframe，其中模拟了在.`localhost``127.0.0.1``frame.html``rpc.html`

到目前为止一切都很好。我遇到的问题是，每当其中发生 JS 错误时，`frame.html`它都不会输出到控制台。仅显示发生的错误`rpc.html`。尽管`console.log()`etc 的输出在`frame.html`.

有没有办法让我显示所有发生在 中的 JavaScript 错误`frame.html`，包括解析错误等？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T10:01:08.503

PhantomJS`onError`在其对象中支持事件处理程序`page`，因此可以适当地拦截和处理有关 JavaScript 异常的信息。

AFAIK，您可能还应该检查加载的网页是否没有自己的`window.onerror`，因为如果它们返回 true，则错误将被视为已处理。

# java - 我怎样才能得到这个增量的最大值？

> ID：13243839
> 
> 赞同：0
> 
> 时间：2012-11-06T03:17:02.183
> 
> 标签：java, model, long-integer, increment

我有增量语法，我想保存最后一个最大值，所以当我关闭程序并再次打开它时，增量将从最后一个最大值开始，而不是再次从 0 开始.. 但这里我的语法总是从 0 开始再次，那该怎么办？

```
 private long l = 100000;
   view.getRdbtnUmum().addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {

        if(view.getRdbtnUmum().isSelected() == true){
            view.getRdbtnPrestone().setSelected(false);
            view.getTxtJobCode().setValue("JU" + l);

        }       
        l++;
        model.setjPres(l);

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:25:10.293

您需要在某处保留最后一个值。您可以简单地选择将其写入一个简单的文件，也可以将其保存在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:00:50.447

如果可以使用最后一个最大值，则可以将该值保存到文件或数据库中。

要将值保存到文件中：

```
 public static void serializeSumNum(int sum){         
             ObjectOutputStream oos = null;
               try{

                FileOutputStream fout = new FileOutputStream("D:\\sum\\sum.txt");
                 oos = new ObjectOutputStream(fout);   
                oos.writeObject(sum);

                System.out.println("Done");

               }catch(Exception ex){
                   ex.printStackTrace();
               }
finally {
                //Close the ObjectOutputStream
                try {
                    if (oos != null) {
                        oos .flush();
                        oos .close();
                    }
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }
           } 
```

# c# - 连接列表中的项目以在 WPF 组合框 Itemsource 中使用

> ID：13243844
> 
> 赞同：2
> 
> 时间：2012-11-06T03:18:29.893
> 
> 标签：c#, wpf, binding

我有一个列表，其中一个人有名字和姓氏。我想连接 Firstname 和 Surname 来设置组合框的 itemsource 和 Display member Path。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:21:59.773

只需创建一个视图模型，使用 FirstName + Surname 添加一个属性并在显示成员路径中使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-29T08:47:59.850

您可以`DataTemplate`用于连接两个属性。例如。

```
<ComboBox>
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock>
                <Run Text="{Binding TaxName}" />
                <Run Text=" | @" />
                <Run FontWeight="Bold" Text="{Binding Rate}" />
                <Run  FontWeight="Bold" Text="%" />
            </TextBlock>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

它将被视为：`Service Tax | @12.36%`并将其值绑定在后面的代码上

```
cmbTax.ItemsSource = taxes;
cmbTax.SelectedValuePath = "TaxID"; 
```

# java - 谁能告诉我为什么我的这个霍夫曼编码算法的代码会产生错误？

> ID：13243845
> 
> 赞同：0
> 
> 时间：2012-11-06T03:18:37.363
> 
> 标签：java, binary-tree, breadth-first-search, huffman-code

我有一个霍夫曼树和一个字符，我想返回该字符在霍夫曼树中的编码应该是什么。

我已经使用广度优先遍历方法实现了它，每次检查左右树时，我都会检查树的数据是否等于我正在寻找的字符。不过，每次我向右或向左走时，我都会在编码中添加 0 或 1。最终，当我找到等于树数据的字符时，我返回该树的编码值。

代码：

```
 public static String findCharEncoding(BinaryTree<CharProfile> bTree, char character) {
        Queue<BinaryTree<CharProfile>> treeQueue = new LinkedList<BinaryTree<CharProfile>>();

        // Create a TreeWithEncoding object from the given arguments and add it to the queue
        treeQueue.add(bTree);

        while (!treeQueue.isEmpty()) {
            BinaryTree<CharProfile> t = treeQueue.remove();

->          if (t.getLeft().getData().getCharacter() == character) {
                return t.getLeft().getData().getEncoding();
            }
            if (t.getLeft() != null) {
                t.getLeft().getData().setEncoding(t.getLeft().getData().getEncoding() + "0");
                treeQueue.add(t.getLeft());
            }

            if (t.getRight().getData().getCharacter() == character) {
                return t.getRight().getData().getEncoding();
            }
            if (t.getRight() != null) {
                t.getRight().getData().setEncoding(t.getRight().getData().getEncoding() + "1");
                treeQueue.add(t.getRight());
            }
        }

        // If it gets to here, the while loop was unsuccessful in finding the encoding
        System.out.println("Unable to find.");
        return "-1";
    } 
```

我已经实现如下：

```
 for (int i = 0; i < charOccurrences.size(); i++) {
            char character = charOccurrences.get(i).getCharacter();

            charOccurrences.get(i).setEncoding(findCharEncoding(huffmanTree, character));
            System.out.println(charOccurrences.get(i).getEncoding());
        } 
```

CharProfile 是一个自定义类，包含字符值、字符概率和编码。

它不断在行返回 NullPointerExceptionError `if (t.getLeft().getData().getCharacter() == character) {`，我用箭头表示了这一点。我已经尝试过，但我似乎无法弄清楚为什么，除了`t.getLeft().getData()`返回错误的事实，而不是整个事情，或者`t.getLeft()`，但我仍然无法弄清楚为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:43:53.580

如果左边或右边的树枝实际上可以是`null`——如果这是霍夫曼，应该只发生在叶节点上——你为什么在检查*之前*`getData`调用它们？那肯定会导致 NullPointerExeption。

 *```
if (t.getLeft() != null) {
  // check nullity and THEN check match
  if (t.getLeft().getData().getCharacter() == character) {
    return t.getLeft().getData().getEncoding();
  }
  t.getLeft().getData().setEncoding(t.getLeft().getData().getEncoding() + "0");
  treeQueue.add(t.getLeft());
}

if (t.getRight() != null) {
  if (t.getRight().getData().getCharacter() == character) {
    return t.getRight().getData().getEncoding();
  }
  t.getRight().getData().setEncoding(t.getRight().getData().getEncoding() + "1");
  treeQueue.add(t.getRight());
} 
```

ps 如果您要返回`0`s 和`1`s 的位串，您也可能希望避免返回“-1”，并避免每次设置树节点的编码`findCharEncoding`，但这只是一个疯狂的猜测。:)*

# iphone - AVFoundation AVPlayer 旋转

> ID：13243847
> 
> 赞同：5
> 
> 时间：2012-11-06T03:18:48.473
> 
> 标签：iphone, objective-c, ios

我正在尝试旋转 avplayer，但是当我旋转它时，它从头开始旋转，我想在播放时随时旋转，它应该从那里旋转。我正在使用苹果文档，这段代码取自那里.这是我的代码。`

```
-(void)performWithAsset:(AVAsset*)asset
{
    AVMutableVideoCompositionInstruction *instruction = nil;
    AVMutableVideoCompositionLayerInstruction *layerInstruction = nil;
    CGAffineTransform t1;
    CGAffineTransform t2;

    AVAssetTrack *assetVideoTrack = nil;
    AVAssetTrack *assetAudioTrack = nil;
    // Check if the asset contains video and audio tracks
    if ([[asset tracksWithMediaType:AVMediaTypeVideo] count] != 0) {
    assetVideoTrack = [asset tracksWithMediaType:AVMediaTypeVideo][0];
    }
    if ([[asset tracksWithMediaType:AVMediaTypeAudio] count] != 0) {
    assetAudioTrack = [asset tracksWithMediaType:AVMediaTypeAudio][0];
    }

    CMTime insertionPoint = kCMTimeInvalid;
    NSError *error = nil;

    // Step 1
    // Create a composition with the given asset and insert audio and video tracks  into it from the asset
    if (!self.mutableComposition) {

    // Check whether a composition has already been created, i.e, some other tool has already been applied
    // Create a new composition
    self.mutableComposition = [AVMutableComposition composition];

    // Insert the video and audio tracks from AVAsset
    if (assetVideoTrack != nil) {
        AVMutableCompositionTrack *compositionVideoTrack = [self.mutableComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
        [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:assetVideoTrack atTime:insertionPoint error:&error];
    }
    if (assetAudioTrack != nil) {
        AVMutableCompositionTrack *compositionAudioTrack = [self.mutableComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
        [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:assetAudioTrack atTime:insertionPoint error:&error];
    }

}

    // Step 2
    // Translate the composition to compensate the movement caused by rotation (since rotation would cause it to move out of frame)
    t1 = CGAffineTransformMakeTranslation(assetVideoTrack.naturalSize.height, 0.0);
    // Rotate transformation
    t2 = CGAffineTransformRotate(t1, degreesToRadians(90.0));

    // Step 3
    // Set the appropriate render sizes and rotational transforms
    if (!self.mutableVideoComposition) {

    // Create a new video composition
    self.mutableVideoComposition = [AVMutableVideoComposition videoComposition];
    self.mutableVideoComposition.renderSize =    CGSizeMake(assetVideoTrack.naturalSize.height,assetVideoTrack.naturalSize.width);
    self.mutableVideoComposition.frameDuration = CMTimeMake(1, 30);

    // The rotate transform is set on a layer instruction
    instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [self.mutableComposition duration]);
    layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:(self.mutableComposition.tracks)[0]];
    [layerInstruction setTransform:t2 atTime:kCMTimeZero];

} else {

    self.mutableVideoComposition.renderSize = CGSizeMake(self.mutableVideoComposition.renderSize.height, self.mutableVideoComposition.renderSize.width);

    // Extract the existing layer instruction on the mutableVideoComposition
    instruction = (self.mutableVideoComposition.instructions)[0];
    layerInstruction = (instruction.layerInstructions)[0];

    // Check if a transform already exists on this layer instruction, this is done to add the current transform on top of previous edits
    CGAffineTransform existingTransform;

    if (![layerInstruction getTransformRampForTime:[self.mutableComposition duration] startTransform:&existingTransform endTransform:NULL timeRange:NULL]) {
        [layerInstruction setTransform:t2 atTime:kCMTimeZero];
    } else {
        // Note: the point of origin for rotation is the upper left corner of the composition, t3 is to compensate for origin
        CGAffineTransform t3 = CGAffineTransformMakeTranslation(-1*assetVideoTrack.naturalSize.height/2, 0.0);
        CGAffineTransform newTransform = CGAffineTransformConcat(existingTransform, CGAffineTransformConcat(t2, t3));
        [layerInstruction setTransform:newTransform atTime:kCMTimeZero];
    }

}

    // Step 4
        enter code here

    // Add the transform instructions to the video composition
    instruction.layerInstructions = @[layerInstruction];
    self.mutableVideoComposition.instructions = @[instruction];

// Step 5
// Notify AVSEViewController about rotation operation completion
[[NSNotificationCenter defaultCenter]     postNotificationName:AVSEEditCommandCompletionNotification object:self];
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T12:15:29.723

此方法将逐帧旋转您的视频：

```
#define degreesToRadians(x) (M_PI * x / 180.0)
#define radiansToDegrees(x) (180.0 * x / M_PI)

//NSURL *url = [[NSBundle mainBundle] URLForResource:nameOfVideo withExtension:@"MOV"];

-(AVPlayer*)rotateVideoPlayer:(AVPlayer*)player withDegrees:(float)degrees{

    NSURL* url = [(AVURLAsset *)player.currentItem.asset URL];

    AVMutableComposition *composition;
    AVMutableVideoComposition *videoComposition;
    AVMutableVideoCompositionInstruction * instruction;

    AVURLAsset* asset = [[AVURLAsset alloc] initWithURL:url options:nil];
    AVMutableVideoCompositionLayerInstruction *layerInstruction = nil;
    CGAffineTransform t1;
    CGAffineTransform t2;
    AVAssetTrack *assetVideoTrack = nil;
    AVAssetTrack *assetAudioTrack = nil;
    // Check if the asset contains video and audio tracks
    if ([[asset tracksWithMediaType:AVMediaTypeVideo] count] != 0) {
        assetVideoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    }
    if ([[asset tracksWithMediaType:AVMediaTypeAudio] count] != 0) {
        assetAudioTrack = [[asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    }
    CMTime insertionPoint = kCMTimeInvalid;
    NSError *error = nil;

    // Step 1
    // Create a new composition
    composition = [AVMutableComposition composition];
    // Insert the video and audio tracks from AVAsset
    if (assetVideoTrack != nil) {
        AVMutableCompositionTrack *compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
        [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:assetVideoTrack atTime:insertionPoint error:&error];
    }
    if (assetAudioTrack != nil) {
        AVMutableCompositionTrack *compositionAudioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
        [compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration]) ofTrack:assetAudioTrack atTime:insertionPoint error:&error];
    }

    // Step 2
    // Calculate position and size of render video after rotating

    float width=assetVideoTrack.naturalSize.width;
    float height=assetVideoTrack.naturalSize.height;
    float toDiagonal=sqrt(width*width+height*height);
    float toDiagonalAngle=radiansToDegrees(acosf(width/toDiagonal));
    float toDiagonalAngle2=90-radiansToDegrees(acosf(width/toDiagonal));

    float toDiagonalAngleComple;
    float toDiagonalAngleComple2;
    float finalHeight;
    float finalWidth;

    if(degrees>=0&&degrees<=90){

        toDiagonalAngleComple=toDiagonalAngle+degrees;
        toDiagonalAngleComple2=toDiagonalAngle2+degrees;

        finalHeight=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple)));
        finalWidth=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple2)));

        t1 = CGAffineTransformMakeTranslation(height*sinf(degreesToRadians(degrees)), 0.0);
    }
    else if(degrees>90&&degrees<=180){

        float degrees2 = degrees-90;

        toDiagonalAngleComple=toDiagonalAngle+degrees2;
        toDiagonalAngleComple2=toDiagonalAngle2+degrees2;

        finalHeight=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple2)));
        finalWidth=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple)));

        t1 = CGAffineTransformMakeTranslation(width*sinf(degreesToRadians(degrees2))+height*cosf(degreesToRadians(degrees2)), height*sinf(degreesToRadians(degrees2)));
    }
    else if(degrees>=-90&&degrees<0){

        float degrees2 = degrees-90;
        float degreesabs = ABS(degrees);

        toDiagonalAngleComple=toDiagonalAngle+degrees2;
        toDiagonalAngleComple2=toDiagonalAngle2+degrees2;

        finalHeight=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple2)));
        finalWidth=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple)));

        t1 = CGAffineTransformMakeTranslation(0, width*sinf(degreesToRadians(degreesabs)));

    }
    else if(degrees>=-180&&degrees<-90){

        float degreesabs = ABS(degrees);
        float degreesplus = degreesabs-90;

        toDiagonalAngleComple=toDiagonalAngle+degrees;
        toDiagonalAngleComple2=toDiagonalAngle2+degrees;

        finalHeight=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple)));
        finalWidth=ABS(toDiagonal*sinf(degreesToRadians(toDiagonalAngleComple2)));

        t1 = CGAffineTransformMakeTranslation(width*sinf(degreesToRadians(degreesplus)), height*sinf(degreesToRadians(degreesplus))+width*cosf(degreesToRadians(degreesplus)));

    }

    // Rotate transformation
    t2 = CGAffineTransformRotate(t1, degreesToRadians(degrees));

    // Step 3
    // Set the appropriate render sizes and rotational transforms

    // Create a new video composition
    videoComposition = [AVMutableVideoComposition videoComposition];
    videoComposition.renderSize = CGSizeMake(finalWidth,finalHeight);
    videoComposition.frameDuration = CMTimeMake(1, 30);

    // The rotate transform is set on a layer instruction
    instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];

    instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [composition duration]);

    layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:[composition.tracks objectAtIndex:0]];
    [layerInstruction setTransform:t2 atTime:kCMTimeZero];

    // Step  4

    // Add the transform instructions to the video composition

    instruction.layerInstructions = [NSArray arrayWithObject:layerInstruction];
    videoComposition.instructions = [NSArray arrayWithObject:instruction];

    AVPlayerItem *playerItem_ = [[AVPlayerItem alloc] initWithAsset:composition];
    playerItem_.videoComposition = videoComposition;

    CMTime time;

    time=kCMTimeZero;
    [player replaceCurrentItemWithPlayerItem:playerItem_];

    [player seekToTime:time toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero];

    //Export rotated video to the file

    AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:composition presetName:AVAssetExportPresetMediumQuality] ;
    exportSession.outputURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@_rotated",url]];
    exportSession.outputFileType = AVFileTypeQuickTimeMovie;
    exportSession.videoComposition = videoComposition;
    exportSession.shouldOptimizeForNetworkUse = YES;
    exportSession.timeRange = CMTimeRangeMake(kCMTimeZero, asset.duration);

    [exportSession exportAsynchronouslyWithCompletionHandler:^{
        NSLog(@"Video exported");
    }];

    return  player;

} 
```

如何使用它：

例如

```
//Creating AVPlayer and adding it to the view

NSURL *path = [[NSBundle mainBundle] URLForResource:@"1" withExtension:@"MOV"];

AVURLAsset* asset = [[AVURLAsset alloc] initWithURL:path options:nil];
AVPlayerItem * item = [[AVPlayerItem alloc] initWithAsset:asset];
AVPlayer *player = [[AVPlayer alloc] initWithPlayerItem:item];

AVPlayerLayer * avPlayerLayer=[AVPlayerLayer playerLayerWithPlayer:player];
avPlayerLayer.frame = CGRectMake(20, 20, 250, 250);
[self.view.layer addSublayer:avPlayerLayer];

[player play];

//Rotate video of AVPlayer and export it

player = [self rotateVideoPlayer:player withDegrees:-45.0]; 
```

注意：如果您只想在视图上旋转视频，请使用包含 avplayer 的视图的 transform 方法。

```
view.transform=CGAffineTransformMakeRotation(M_PI/2); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-25T14:03:48.207

**斯威夫特 5 版本**

```
func rotateVideoPlayer(player: AVPlayer, degrees: CGFloat) -> AVPlayer? {

    let urlAsset = player.currentItem?.asset as! AVURLAsset
    let url = urlAsset.url

    var composition: AVMutableComposition?
    var videoComposition: AVMutableVideoComposition?
    var instruction: AVMutableVideoCompositionInstruction?

    let asset = AVURLAsset(url: url)

    var layerInstruction: AVMutableVideoCompositionLayerInstruction?
    var t1: CGAffineTransform?
    var t2: CGAffineTransform?

    var assetVideoTrack: AVAssetTrack?
    var assetAudioTrack: AVAssetTrack?

    if asset.tracks(withMediaType: AVMediaType.video).count != 0 {
        assetVideoTrack = asset.tracks(withMediaType: AVMediaType.video)[0]
    }

    if asset.tracks(withMediaType: AVMediaType.audio).count != 0 {
        assetAudioTrack = asset.tracks(withMediaType: AVMediaType.audio)[0]
    }

    let insertionPoint = CMTime.invalid

    composition = AVMutableComposition()

    if assetVideoTrack != nil {

        let compositionVideoTrack: AVMutableCompositionTrack = (composition?.addMutableTrack(withMediaType: AVMediaType.video, preferredTrackID: kCMPersistentTrackID_Invalid))!
        let timeRange = CMTimeRangeMake(start: CMTime.zero, duration: asset.duration)

        try! compositionVideoTrack.insertTimeRange(timeRange, of: assetVideoTrack!, at: insertionPoint)

    }

    if assetAudioTrack != nil {

        let compositionAudioTrack: AVMutableCompositionTrack = (composition?.addMutableTrack(withMediaType: AVMediaType.audio, preferredTrackID: kCMPersistentTrackID_Invalid))!
        let timeRange = CMTimeRangeMake(start: CMTime.zero, duration: asset.duration)
        try! compositionAudioTrack.insertTimeRange(timeRange, of: assetAudioTrack!, at: insertionPoint)

    }

    let width = Float((assetVideoTrack?.naturalSize.width)!)
    let height = Float((assetVideoTrack?.naturalSize.height)!)
    let toDiagonal = Float(sqrt(width * width + height * height))
    let toDiagonalAngle = Float(radiansToDegrees(acosf(width/toDiagonal)))
    let toDiagonalAngle2 = Float(90 - radiansToDegrees(acosf(width/toDiagonal)))

    var toDiagonalAngleComple: Float
    var toDiagonalAngleComple2: Float
    var finalHeight: Float = 0
    var finalWidth: Float = 0

    if degrees >= 0 && degrees <= 90 {

        toDiagonalAngleComple = toDiagonalAngle + Float(degrees)
        toDiagonalAngleComple2 = toDiagonalAngle2 + Float(degrees)

        let sinfValue = sinf(degreesToRadians(toDiagonalAngleComple))
        let sinfValue2 = sinf(degreesToRadians(toDiagonalAngleComple2))

        finalHeight = abs(toDiagonal * sinfValue)
        finalWidth = abs(toDiagonal * sinfValue2)

        let side1 = height * sinf(degreesToRadians(Float(degrees)))
        let side2 = 0.0

        t1 = CGAffineTransform(translationX: CGFloat(side1), y: CGFloat(side2))

    } else if degrees > 90 && degrees <= 180 {

        let degrees2 = Float(degrees - 90)

        toDiagonalAngleComple = toDiagonalAngle + degrees2
        toDiagonalAngleComple2 = toDiagonalAngle2 + degrees2

        let sinfValue = sinf(degreesToRadians(toDiagonalAngleComple2))
        let sinfValue2 = sinf(degreesToRadians(toDiagonalAngleComple))

        finalHeight = abs(toDiagonal * sinfValue)
        finalWidth = abs(toDiagonal * sinfValue2)

        let side1 = width * sinf(degreesToRadians(degrees2)) + height * cosf(degreesToRadians(degrees2))
        let side2 = height * sinf(degreesToRadians(degrees2))

        t1 = CGAffineTransform(translationX: CGFloat(side1), y: CGFloat(side2))

    } else if degrees >= -90 && degrees < 0 {

        let degrees2 = Float(degrees - 90)
        let degrees2abs = Float(abs(degrees))

        toDiagonalAngleComple = toDiagonalAngle + degrees2
        toDiagonalAngleComple2 = toDiagonalAngle2 + degrees2

        let sinfValue = sinf(degreesToRadians(toDiagonalAngleComple2))
        let sinfValue2 = sinf(degreesToRadians(toDiagonalAngleComple))

        finalHeight = abs(toDiagonal * sinfValue)
        finalWidth = abs(toDiagonal * sinfValue2)

        let side1 = 0
        let side2 = width * sinf(degreesToRadians(degrees2abs))

        t1 = CGAffineTransform(translationX: CGFloat(side1), y: CGFloat(side2))

    } else if degrees >= -180 && degrees < -90 {

        let degreesabs = Float(abs(degrees))
        let degreesPlus = degreesabs - 90

        toDiagonalAngleComple = toDiagonalAngle + Float(degrees)
        toDiagonalAngleComple2 = toDiagonalAngle2 + Float(degrees)

        let sinfValue = sinf(degreesToRadians(toDiagonalAngleComple))
        let sinfValue2 = sinf(degreesToRadians(toDiagonalAngleComple2))

        finalHeight = abs(toDiagonal * sinfValue)
        finalWidth = abs(toDiagonal * sinfValue2)

        let side1 = width * sinf(degreesToRadians(degreesPlus))
        let side2 = height * sinf(degreesToRadians(degreesPlus)) + width * cosf(degreesToRadians(degreesPlus))

        t1 = CGAffineTransform(translationX: CGFloat(side1), y: CGFloat(side2))
    }

    t2 = t1!.rotated(by: CGFloat(degreesToRadians(Float(degrees))))

    videoComposition = AVMutableVideoComposition()
    videoComposition?.renderSize = CGSize(width: CGFloat(finalWidth), height: CGFloat(finalHeight))
    videoComposition?.frameDuration = CMTimeMake(value: 1, timescale: 30)

    instruction = AVMutableVideoCompositionInstruction()

    instruction?.timeRange = CMTimeRangeMake(start: CMTime.zero, duration: composition!.duration)

    layerInstruction = AVMutableVideoCompositionLayerInstruction(assetTrack: (composition?.tracks[0])!)

    layerInstruction?.setTransform(t2!, at: CMTime.zero)

    instruction?.layerInstructions = NSArray(object: layerInstruction!) as! [AVVideoCompositionLayerInstruction]
    videoComposition?.instructions = NSArray(object: instruction!) as! [AVVideoCompositionInstructionProtocol]

    let playItem_ = AVPlayerItem(asset: composition!)

    playItem_.videoComposition = videoComposition

    var time: CMTime!

    time = CMTime.zero

    player.replaceCurrentItem(with: playItem_)

    player.seek(to: time, toleranceBefore: CMTime.zero, toleranceAfter: CMTime.zero)

    let exportSession = AVAssetExportSession(asset: composition!, presetName: AVAssetExportPresetMediumQuality)

    exportSession?.outputURL = URL(string: String(format: "%@_rotated", url as CVarArg))
    exportSession?.outputFileType = AVFileType.mov
    exportSession?.videoComposition = videoComposition
    exportSession?.shouldOptimizeForNetworkUse = true
    exportSession?.timeRange = CMTimeRangeMake(start: CMTime.zero, duration: asset.duration)

    exportSession?.exportAsynchronously(completionHandler: { () -> Void in
        print("Video exported")
    })

    return player

}

func degreesToRadians(_ input: Float) -> Float {
    let float: Float = 180
    return Float(input) * .pi / float
}

func radiansToDegrees(_ input: Float) -> Float {
    return Float(input) * 180 / .pi
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-15T04:09:47.170

非常感谢你，Oleh Kudinov，你太棒了！

如果有人需要，以下是快速版本。

```
 func rotateVideoPlayer(player: AVPlayer, degrees: CGFloat) -> AVPlayer? {

    let urlAsset = player.currentItem?.asset as! AVURLAsset
    let url = urlAsset.URL

    var composition: AVMutableComposition?
    var videoComposition: AVMutableVideoComposition?
    var instruction: AVMutableVideoCompositionInstruction?

    let asset = AVURLAsset(URL: url)

    var layerInstruction: AVMutableVideoCompositionLayerInstruction?
    var t1: CGAffineTransform?
    var t2: CGAffineTransform?

    var assetVideoTrack: AVAssetTrack?
    var assetAudioTrack: AVAssetTrack?

    // Check if the asset contains video and audio tracks

    if asset.tracksWithMediaType(AVMediaTypeVideo).count != 0
    {
        assetVideoTrack = asset.tracksWithMediaType(AVMediaTypeVideo)[0]
    }

    if asset.tracksWithMediaType(AVMediaTypeAudio).count != 0
    {
        assetAudioTrack = asset.tracksWithMediaType(AVMediaTypeAudio)[0]
    }

    let insertionPoint = kCMTimeInvalid

    // Step 1

    // Create a new composition

    composition = AVMutableComposition()

    // Insert a new composition

    if assetVideoTrack != nil {

        let compositionVideoTrack: AVMutableCompositionTrack = (composition?.addMutableTrackWithMediaType(AVMediaTypeVideo, preferredTrackID: kCMPersistentTrackID_Invalid))!
        let timeRange = CMTimeRangeMake(kCMTimeZero, asset.duration)

        try! compositionVideoTrack.insertTimeRange(timeRange, ofTrack: assetVideoTrack!, atTime: insertionPoint)

    }

    if assetAudioTrack != nil {

        let compositionAudioTrack: AVMutableCompositionTrack = (composition?.addMutableTrackWithMediaType(AVMediaTypeAudio, preferredTrackID: kCMPersistentTrackID_Invalid))!
        let timeRange = CMTimeRangeMake(kCMTimeZero, asset.duration)

        try! compositionAudioTrack.insertTimeRange(timeRange, ofTrack: assetAudioTrack!, atTime: insertionPoint)

    }

    // Step 2

    // Calculate position and size of render video after rotating

    let width = Float((assetVideoTrack?.naturalSize.width)!)
    let height = Float((assetVideoTrack?.naturalSize.height)!)
    let toDiagonal = Float(sqrt(width * width + height * height))
    let toDiagonalAngle = Float(radiansToDegrees(acosf(width/toDiagonal)))
    let toDiagonalAngle2 = Float(90 - radiansToDegrees(acosf(width/toDiagonal)))

    var toDiagonalAngleComple: Float
    var toDiagonalAngleComple2: Float
    var finalHeight: Float = 0
    var finalWidth: Float = 0

    if degrees >= 0 && degrees <= 90 {

        toDiagonalAngleComple = toDiagonalAngle + Float(degrees)
        toDiagonalAngleComple2 = toDiagonalAngle2 + Float(degrees)

        let sinfValue = sinf(degreesToRadians(toDiagonalAngleComple))
        let sinfValue2 = sinf(degreesToRadians(toDiagonalAngleComple2))

        finalHeight = abs(toDiagonal * sinfValue)
        finalWidth = abs(toDiagonal * sinfValue2)

        let side1 = height * sinf(degreesToRadians(Float(degrees)))
        let side2 = 0.0

        t1 = CGAffineTransformMakeTranslation(CGFloat(side1), CGFloat(side2))

    }
    else if degrees > 90 && degrees <= 180 {

        let degrees2 = Float(degrees - 90)

        toDiagonalAngleComple = toDiagonalAngle + degrees2
        toDiagonalAngleComple2 = toDiagonalAngle2 + degrees2

        let sinfValue = sinf(degreesToRadians(toDiagonalAngleComple2))
        let sinfValue2 = sinf(degreesToRadians(toDiagonalAngleComple))

        finalHeight = abs(toDiagonal * sinfValue)
        finalWidth = abs(toDiagonal * sinfValue2)

        let side1 = width * sinf(degreesToRadians(degrees2)) + height * cosf(degreesToRadians(degrees2))
        let side2 = height * sinf(degreesToRadians(degrees2))

        t1 = CGAffineTransformMakeTranslation(CGFloat(side1), CGFloat(side2))

    }
    else if degrees >= -90 && degrees < 0 {

        let degrees2 = Float(degrees - 90)
        let degrees2abs = Float(abs(degrees))

        toDiagonalAngleComple = toDiagonalAngle + degrees2
        toDiagonalAngleComple2 = toDiagonalAngle2 + degrees2

        let sinfValue = sinf(degreesToRadians(toDiagonalAngleComple2))
        let sinfValue2 = sinf(degreesToRadians(toDiagonalAngleComple))

        finalHeight = abs(toDiagonal * sinfValue)
        finalWidth = abs(toDiagonal * sinfValue2)

        let side1 = 0
        let side2 = width * sinf(degreesToRadians(degreesabs))

        t1 = CGAffineTransformMakeTranslation(CGFloat(side1), CGFloat(side2))
    }
    else if degrees >= -180 && degrees < -90 {

        let degreesabs = Float(abs(degrees))
        let degreesPlus = degreesabs - 90

        toDiagonalAngleComple = toDiagonalAngle + Float(degrees)
        toDiagonalAngleComple2 = toDiagonalAngle2 + Float(degrees)

        let sinfValue = sinf(degreesToRadians(toDiagonalAngleComple))
        let sinfValue2 = sinf(degreesToRadians(toDiagonalAngleComple2))

        finalHeight = abs(toDiagonal * sinfValue)
        finalWidth = abs(toDiagonal * sinfValue2)

        let side1 = width * sinf(degreesToRadians(degreesPlus))
        let side2 = height * sinf(degreesToRadians(degreesPlus)) + width * cosf(degreesToRadians(degreesPlus))

        t1 = CGAffineTransformMakeTranslation(CGFloat(side1), CGFloat(side2))
    }

    // Rotate transformation

    t2 = CGAffineTransformRotate(t1!, CGFloat(degreesToRadians(Float(degrees))))

    //
    // Step 3
    //
    // Set the appropriate render sizes and rotational transforms
    //

    // Create a new video composition
    //        videoComposition = AVMutableComposition
    videoComposition = AVMutableVideoComposition()
    videoComposition?.renderSize = CGSizeMake(CGFloat(finalWidth), CGFloat(finalHeight))
    videoComposition?.frameDuration = CMTimeMake(1, 30)

    // The rotate transform is set on a layer instruction
    instruction = AVMutableVideoCompositionInstruction()

    instruction?.timeRange = CMTimeRangeMake(kCMTimeZero, composition!.duration)

    //
    // + videoCompositionLayerInstructionWithAssetTrack:
    // Returns a new mutable video composition layer instruction for the given track.
    //
    // Swift
    // convenience init(assetTrack track: AVAssetTrack)
    //
    // Objective-C
    // + (instancetype)videoCompositionLayerInstructionWithAssetTrack:(AVAssetTrack *)track

    // objectiv-c:
    //  layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:[composition.tracks objectAtIndex:0]];

    // Swift
    layerInstruction = AVMutableVideoCompositionLayerInstruction(assetTrack: (composition?.tracks[0])!)

    layerInstruction?.setTransform(t2!, atTime: kCMTimeZero)

    //
    // Step 4
    //

    // Add the transfor instructions to the video composition

    instruction?.layerInstructions = NSArray(object: layerInstruction!) as! [AVVideoCompositionLayerInstruction]
    videoComposition?.instructions = NSArray(object: instruction!) as! [AVVideoCompositionInstructionProtocol]

    let playItem_ = AVPlayerItem(asset: composition!)

    playItem_.videoComposition = videoComposition

    var time: CMTime!

    time = kCMTimeZero

    player.replaceCurrentItemWithPlayerItem(playItem_)

    player.seekToTime(time, toleranceBefore: kCMTimeZero, toleranceAfter: kCMTimeZero)

    // Export rotated video to the file

    let exportSession = AVAssetExportSession(asset: composition!, presetName: AVAssetExportPresetMediumQuality)

    exportSession?.outputURL = NSURL(string: String(format: "%@_rotated", url))
    exportSession?.outputFileType = AVFileTypeQuickTimeMovie
    exportSession?.videoComposition = videoComposition
    exportSession?.shouldOptimizeForNetworkUse = true
    exportSession?.timeRange = CMTimeRangeMake(kCMTimeZero, asset.duration)

    exportSession?.exportAsynchronouslyWithCompletionHandler({ () -> Void in
        print("Video exported")
    })

    return player

} 
```

# php - 在php中以指定的时间间隔显示不同的内容？

> ID：13243860
> 
> 赞同：0
> 
> 时间：2012-11-06T03:21:13.147
> 
> 标签：php

如何在php中解决和显示指定3小时时间间隔内的不同内容？假设默认内容应该在上午8点显示，然后下一个新内容应该在上午11点，第三批应该在下午2点，然后内容将返回到第一批

```
$firstbatch = strtotime(date('Y-m-d').'8:00am');
$contentvariable = ''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:30:15.270

听起来像一个简单的 if/else 语句

这是整体想法的一些伪代码

```
if(time >= 11am && time < 2pm){
    $content = '11am content';
}
elseif(time >= 2pm && time < 8am){
    $content = '2pm content';
}
else{
    $content = 'default content';
} 
```

# php - 如何强制数组显示所有值？

> ID：13243863
> 
> 赞同：1
> 
> 时间：2012-11-06T03:21:49.710
> 
> 标签：php, arrays, google-analytics-api

在 print_r($segments) 之后，我的数组的输出与此类似：

```
Array
(
    [kind] => analytics#segments
    [username] => account@gmail.com
    [totalResults] => 2334
    [startIndex] => 1
    [itemsPerPage] => 1000
    [items] => Array
    (
        [0] => Array
            (
                [id] => -1
                [kind] => analytics#segment
                [selfLink] => https://www.googleapis.com/analytics/v3/management/segments/gaid::-1
                [segmentId] => gaid::-1
                [name] => All Visits
                [definition] => 
            )
...

        [999] => Array
            (
                [id] => -1
                [kind] => analytics#segment
                [selfLink] => https://www.googleapis.com/analytics/v3/management/segments/gaid::-1
                [segmentId] => gaid::-1
                [name] => All Visits
                [definition] => 
            )
    )
) 
```

这个数组是谷歌分析 API PHP 的输出，它显示的最大值是***itemsPerPage***参数中提到的***1000***行，但我确实有超过 1000 行，接近***totalResults***参数 中提到的***2334行。***

 ***有人知道如何强制它一次显示所有输出吗？

当我运行这个：

```
 $nextLink = $results->getNextLink()
            ? $results->getNextLink() : 'none';

print($nextLink); 
```

输出是一个**链接**： [https ://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles?start-index=1001&max-results=1000](https://www.googleapis.com/analytics/v3/management/accounts/~all/webproperties/~all/profiles?start-index=1001&max-results=1000)

`Accoring to this` [文档](https://developers.google.com/apps-script/class_analytics_v3_schema_accounts) `I have to use the parameter called` **最大结果** `to display more results per page, but I have no idea how to do so, no much documentation about it.`

知道如何使用**max-results**参数或**链接**获取其余结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:29:05.080

**快速回答**： [https ://developers.google.com/analytics/devguides/reporting/core/v3/coreDevguide#working](https://developers.google.com/analytics/devguides/reporting/core/v3/coreDevguide#working)

查看**分页信息**，您的数据似乎应该有 a`getNextLink()`并且`getPreviousLink()`可能不是数据的一部分并且不会打印在 a 中`print_r()`。

当通过网络访问 API 并且不知道 API 需要返回多少信息时，您不想冒险一次发送大量数据。这可能会导致大量不必要的流量并减慢整个系统的速度。

一种解决方案，分页，是发回一组响应（在这种情况下为 1000 个），如果 API 的用户需要更多，让他们明确地请求下一组。

**伪代码：（** 对不起，我没有可用的 Google-API 设置来尝试这个）

```
$finalArray = array();

//Copy $segments into $finalArray;
while(!empty($segments->getNextLink()))
{
    //Use $segments->getNextLink()
    //$segments now contains the next set of data
    //Copy $segments into $finalArray;
} 
```***

# django - 使用来自 bash 的 pip 安装 Django

> ID：13243869
> 
> 赞同：0
> 
> 时间：2012-11-06T03:22:37.863
> 
> 标签：django, bash, installscript

我正在尝试为需要 Django 的项目编写安装脚本。我正在使用 pip 安装应用程序列表，但是当它到达 Django 时，它说

```
 You just installed Django's auth system, which means you don't have any superusers defined.  
    Would you like to create one now? 
```

我需要这个脚本是自主的。

是否可以自动回答这个问题或忽略它并稍后设置超级用户？

我的基本 bash 脚本看起来像这样

```
 #!/bin/bash

    set -eux

    #==================================================#
    # These should be just the server requirements only 
    # !! Exception being scipy for now. pip install not 
    # working
    #==================================================#

    apt-get install -y python postgresql-9.1 apache2 python-setuptools postgresql-server-dev-9.1 postgresql-9.1-postgis postgis python-scipy binutils libproj-dev gdal-bin git

    #==================================================#
    # setup the posgis template for postgresql
    #==================================================#
    GEOGRAPHY=0
    POSTGIS_SQL=postgis.sql

    BLAH BLAH !!!
    Lots of database set up code here

   #==================================================#
   # Setup the python environment
   #==================================================#
   easy_install virtualenv
   easy_install virtualenvwrapper
   easy_install pip

   #==================================================#
   # Pull the catami code from git and install 
   #==================================================#

   mkdir -p /home/catami
   mkdir -p /home/catami/catamiportal
   cd /home/catami/catamiportal
   git clone https://github.com/catami/catami.git
   cd catami

   pip install -r requirements.txt

   python manage.py syncdb

   manage.py runserver 0.0.0.0:8000 
```

我从需求文件中安装 django 感到悲痛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:39:20.927

我的错。询问问题的是 syncdb 命令而不是安装。

解决方案是

```
 python manage.py syncdb --noinput 
```

# r - 在file.path中使用“粘贴”创建文件名是否合适？

> ID：13243873
> 
> 赞同：3
> 
> 时间：2012-11-06T03:23:02.167
> 
> 标签：r

`?file.path`表示这个函数被设计成比 快`paste`，所以我担心写

```
dirname <- "/path/to/myfile/"
file.path(dirname, paste(output, ".csv", sep = "")) 
```

没有抓住重点。

是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T04:07:13.953

`file.path`有一些特殊的功能来处理 R 库中的东西，以及跨平台工作。

出于编写`csv`文件、保存绘图`pngs`等目的，我认为这`paste`是一个更好的选择，因为它绕过了“中间人”。使用`paste`inside`file.path`并不是真正的问题（如果您需要 的功能`file.path`），因为任何速度差异都无法检测到。

# php - 无法使用 Yelp API 获得英语评论

> ID：13243882
> 
> 赞同：0
> 
> 时间：2012-11-06T03:24:30.877
> 
> 标签：php, yelp

我正在尝试使用 Yelp API 来获取使用各种搜索词的英语评论列表，例如“食物”、“酒店”等。我只得到非英语评论，尽管我m 包括 lang 和 lang_filter 参数。

这里，没有任何 oAuth 的东西，是我从我的应用程序请求的一般 url：

[http://api.yelp.com/v2/search?lang=en&lang_filter=true&term=food&bounds=52.261155,4.610155|52.479116,5.067567](http://api.yelp.com/v2/search?lang=en&lang_filter=true&term=food&bounds=52.261155,4.610155|52.479116,5.067567)

bounds 参数将我的搜索范围缩小到荷兰阿姆斯特丹附近。

当然，我尝试了许多 url 请求变体，使用城市、州而不是位置边界、删除 lang_filter 参数、添加国家代码过滤器等。有谁知道我怎样才能只获得英语评论？

奇怪的是，如果我去 Yelp 的网站搜索阿姆斯特丹的“食物”，我只得到英文结果，所以我知道那些英文文章在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:25:59.223

来自 Yelp 支持：

不幸的是，我们目前没有办法将片段文本限制为特定语言。现在一般网站都是如此，包括 www，而不仅仅是 API。

# python - 遍历字典 PYTHON 列表中的字符串

> ID：13243883
> 
> 赞同：2
> 
> 时间：2012-11-06T03:24:42.007
> 
> 标签：python, list, dictionary

我有一本字典，里面装满了名为“可能”的列表，键为“a”-“z”。每个键都有一个列表的值，其中包含“a”到“z”。基本上，26 个字母。

我将一个字符串清理为小写字母并去掉标点符号并将每个单词保存到一个名为“cleanedWords”的列表中。

我想浏览列表，如果列表中的单词只有两个字母，请从键中删除两个字母单词中两个字母的值“c”。然后继续下一个 2 个字母的单词并重复。

这是有错误的片段：

```
for y in cleanedWords:
    if len(y) == 2:
        for i in y:
            possible[i].remove('c') 
```

这是错误：

```
Traceback (most recent call last):
  File "F:\python\crypto\cipher.py", line 83, in <module>
    possible[i].remove('c')
ValueError: list.remove(x): x not in list 
```

显然我做错了什么。有人可以指出我正确的方向吗？我可以不叫“y”吗？

泰勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:37:35.587

好的，我不熟悉您的（如果您想要详细答案，请分享）数据结构，但它看起来我需要将您的代码替换为：

```
for word in (x for x in cleanedWords if len(x) == 2):
    for ch in word:
        if 'c' in possible[i]:
            possible[ch].remove('c') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T06:28:43.410

```
for y in cleanedWords:
    if len(y) == 2:
        print y
        for i in y:
            try:
                possible[i].remove('c')
            except ValueError:
                pass 
```

# c++ - 在 C++ 中用零初始化本地数组

> ID：13243886
> 
> 赞同：2
> 
> 时间：2012-11-06T03:25:19.570
> 
> 标签：c++, c

> **可能重复：**
> [C 和 C++：自动结构的部分初始化](https://stackoverflow.com/questions/10828294/c-and-c-partial-initialization-of-automatic-structure)

我正在寻找一种用零初始化本地数组的快速方法。（“快速”是指“快速输入”。）当我执行以下操作时：

```
HANDLE hHandles[32] = {0}; 
```

它会将第一个元素或全部 32 个元素归零吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:26:09.823

它将所有 32 个元素初始化为零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T03:48:42.170

有关详细信息/替代方案，请参阅[这个令人惊讶的流行答案](https://stackoverflow.com/questions/201101/how-to-initialize-an-array-in-c/201116)。C 和 C++ 之间的区别似乎在于，在 C++ 中`{}`也会进行零初始化。

# android - Adobe Reader X 没有开始使用 Intent

> ID：13243889
> 
> 赞同：2
> 
> 时间：2012-11-06T03:25:36.610
> 
> 标签：android, pdf, adobe-reader

我有一个本地 PDF 文件保存到我的应用程序文件夹中。path 是指向 PDF 文件的 URI。以下代码用于查看 PDF。当我安装适用于 android 的 adobe reader 9.2 时，PDF 文件打开时 PDF 上的项目符号未显示。我删除了 Adob​​e Reader 9.2 并安装了 X，相同的代码不会打开 PDF。Android 知道安装了阅读器，所以我没有收到错误消息。我也没有任何异常。当我手动启动 adobe reader 时，它会愉快地打开我的 PDF。

模拟器和三星手机都有相同的结果。

知道这里发生了什么吗？提前致谢。

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(path, "application/pdf");
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

            PackageManager pm = getPackageManager();
            List<ResolveInfo> activities = pm.queryIntentActivities(intent, 0);
            if (activities.size() > 0) {
                startActivity(intent);
            } else {
                Toast.makeText(MyActivity.this, R.string.msg_no_application_available_to_view_pdf, Toast.LENGTH_LONG).show();
            } 
```

# c# - 如何将现有的 Windows 应用商店应用程序（Metro 风格）移植或转换为桌面应用程序？

> ID：13243891
> 
> 赞同：0
> 
> 时间：2012-11-06T03:25:58.077
> 
> 标签：c#, xaml, windows-store-apps, winrt-xaml, desktop-application

我在 Windows 商店（Metro 风格）[XAML，C#] 中有一个现有的应用程序。我想将其转换为桌面（已启用超极本）并上传到英特尔 AppUp 商店。该应用程序使用 GPS 并为某些功能调用多个 Web API。

我有什么工具可以隐蔽吗？或者我如何将此应用程序移植到启用超极本的桌面应用程序。？

请提供分步帮助或链接..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:34:19.527

我认为没有任何工具可以为您转换它。根据我使用英特尔 AppUp 的经验，如果您可以提取 Metro 应用程序功能并为其创建一个普通的桌面应用程序，您应该能够在 AppUp 商店中提交该应用程序。

您必须为您的桌面应用程序创建一个 msi 包，并且 msi 应该创建一个可以启动您的应用程序的桌面快捷方式。appUp 人员以某种方式找出了快捷方式目标，并可以从 AppUp 客户端本身启动应用程序。您还必须从应用程序界面进行卸载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:22:48.877

我会与英特尔核实他们为 AppUp 提供的 API。我几乎可以肯定，虽然没有工具可以解决这个问题，你只需要根据具体情况来解决它。

# class - 自定义类的 GWT 延迟绑定失败：在 urn:import 中没有匹配“...”的类：

> ID：13243894
> 
> 赞同：5
> 
> 时间：2012-11-06T03:26:12.553
> 
> 标签：class, gwt, matching, uibinder

我正在开发几个我希望能够与 UiBinder 一起使用的自定义小部件。不幸的是，我一直在浪费我的生命来追踪以下错误：

urn:import:...中没有匹配“...”的类

**这似乎是在类中出现任何**阻止 GWT 编译器处理它的错误时抛出的包罗万象的异常。这包括类的整个依赖关系树中的任何内容。

为了节省我自己和遇到相同问题的任何人一些时间和痛苦，让我们在这里编制一份清单，列出最意想不到和最难找到的原因。我将从我最新的一个开始，这让我决定在这里发布这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-18T11:44:36.557

因此，我正在使用 CellList：

```
private static RelationshipViewerUiBinder uiBinder = GWT.create(RelationshipViewerUiBinder.class);

@UiField(provided=true)
CellList<String> prioritisedDisplay;

public RelationshipViewer() {

    prioritisedDisplay = new CellList<>(new TextCell());
    initWidget(uiBinder.createAndBindUi(this));
} 
```

注意 CellList 上的 Java 7 样式 <>。尽管我的 IDE 提出了相反的抗议，但事实证明您确实需要在该新调用中明确地说 CellList< String> ，否则它将无法编译，而您得到的只是上述错误。顺便说一句，谢谢，这个问题的存在促使我仔细检查了我的代码，并且可能为我节省了几个小时！这修复了它：

```
private static RelationshipViewerUiBinder uiBinder = GWT.create(RelationshipViewerUiBinder.class);

@UiField(provided=true)
CellList<String> prioritisedDisplay;

public RelationshipViewer() {

    prioritisedDisplay = new CellList<String>(new TextCell());
    initWidget(uiBinder.createAndBindUi(this));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T20:22:09.037

我编写了一个使用 GWT JSON 功能的组件，但没有将 com.google.gwt.json.JSON 导入到模块中。

多亏了您在这里的留言，这才花了 2 个小时才付诸东流……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T03:33:29.710

我写了一个帮助类，这个小部件在它的依赖树深处的某个地方使用。

对于这个助手类，我告诉 Eclipse 自动生成`hashCode()`and`equals(...)`函数。该类包含一个类型字段`double`，Eclipse 为其生成使用的代码`Double.doubleToLongBits()`。

事实证明 GWT 没有在其版本的`Double`. 但是当然，如​​果我在 GWT-App 的 Java 代码中而不是在 UiBinder 中使用小部件，Eclipse 也不会将其检测为可能的编译错误，也不会在开发模式下导致任何问题。

3 小时耗尽... 太好了... 是的，有用的错误消息。

*更新：*

*从 GWT 2.5.0 (RC1) 开始，GWT 现在支持`Double.doubleToLongBits()`使这个特定错误过时，但是缺少 JRE 仿真的一般错误机制仍然存在，并且可能会以类似无益的方式表现出来。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-18T22:48:52.880

我试图在 UiBinder .ui.xml 中使用[GwtQuery](https://code.google.com/p/gwtquery-plugins/wiki/DragAndDropPluginForGWTDeveloppers) [DragAndDropCellTree](https://code.google.com/p/gwtquery-plugins/source/browse/trunk/droppable/plugin/src/main/java/gwtquery/plugins/droppable/client/gwt/DragAndDropCellTree.java)，这是不可能的，因为 DragAndDropCellTree 没有零参数构造函数。

[查看更多详情](https://stackoverflow.com/q/33785524/1357094)

# ms-access - 当多个用户连接到数据库时，VB6 数据库操作变慢

> ID：13243898
> 
> 赞同：4
> 
> 时间：2012-11-06T03:26:51.740
> 
> 标签：ms-access, vb6, dao

我目前正在使用 VB6 使用 DAO 连接到 MS 访问数据库，当第二个用户连接到数据库时，我的速度明显降低。

以下是重现的步骤：

*   通过登录软件从计算机 A 打开数据库

*   通过软件将记录添加到数据库（大约需要 0.4 秒）

*   第二个用户登录到软件（计算机 B），即：这会打开数据库，显示今天的交易，但用户什么也不做

*   在计算机A上，重复添加记录的操作，现在该操作大约需要6秒

更多信息……</p>

*   即使在计算机 B 退出软件后，该操作仍持续大约 6 秒

*   如果您从计算机 A 关闭并重新打开应用程序，操作将返回到只需 0.4 秒即可执行！

任何帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T15:29:21.823

当我们过渡到使用更新的文件服务器时，我们的 VB3 / Jet DB 2.5 应用程序遇到了这个问题。

问题是“机会锁定”： http: [//support.microsoft.com/kb/296264 ?wa=wsignin1.0](http://support.microsoft.com/kb/296264?wa=wsignin1.0)

阿尔伯特可能正在描述同样的事情；服务器将允许一个客户端独占访问文件，但是当另一个客户端加入时，这种独占访问将在它们之间“颠簸”，导致延迟，因为具有 oplock 的客户端在另一个客户端可以访问之前将其所有本地缓存​​刷新到服务器文件。

这也可能是您使用一个客户端获得良好性能的原因 - 如果它需要一个机会锁，它可以在本地缓存所有数据。

如果您的一个客户端出现电源故障或掉线，这也可能导致一些严重的损坏，因为将本地缓存刷新到服务器可能会被中断。

根据文章，您曾经能够在 Windows 2000 和 XP 上禁用此功能（在*客户端*上- 因此您需要为所有客户端提供服务），但在 Vista SP2 之后似乎是不可能的。

关于不使用 Access / JetDB 作为多用户数据库的评论基本上是正确的 - 这不是一个好的架构选择，尤其是鉴于上述情况。DAO 也是一个过时的库，即使在过时的 VB6 中也是如此。ADODB 是 VB6 的更好选择，并且应该允许您根据应用程序的编写方式来衡量数据库的独立性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:52:08.147

这就是 MS Access 的工作方式。虽然它*有点*支持多个用户，并且*有点*支持将数据库放在文件共享上以便多台 PC 可以访问它，但它都做得不好。而且，如果您同时进行这两种操作（多用户和通过网络共享文件），那么我会为您感到痛苦。

答案是运行升级向导并将其转换为 MS SQL Server 实例。MS SQL Server Express 版是替代 Acess 的好选择。请注意，您仍然可以将所有代码和报告等保留在 Access 中，只需要移动数据。

* * *

只是为了清楚区别，在 MS Access 中，当您从数据库中读取数据*时，执行查询所需的*所有数据都由您的程序从文件中读取，*没有进行服务器端处理*。如果该数据驻留在网络上，则您正在通过网络提取该数据。如果有多个用户，您将有额外的锁定开销。每个用户程序/进程通过文件 I/O 与其他用户的程序/进程有效对话（将锁定信息写入网络文件或文件）。如果网络 I/O 超时或有其他问题，那么这些文件可能会损坏。

在 SQL Server 中，管理数据请求并仅返回所需数据的是 SQL Server 引擎。它还可以管理锁，并可以检测客户端何时断开连接或超时清理，从而减少网络上的多个用户引起的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T01:13:08.083

正如您指出的那样，您在系统上使用一个用户可以获得不错的性能，那么显然您的应用程序本质上不会通过网络提取太多数据，我们不能在这里责怪网络速度。

事实上，Windows 文件共享系统正在从单一文件共享模式切换到多文件共享模式。这种切换文件模式会导致显着延迟。这也意味着第二个或更多用户必须尝试找出并设置文件锁定。

要消除这种明显的延迟，只需在您的应用程序开始时打开我们所说的持久连接。持久连接只是强制网络连接始终保持打开状态，因此消除了在文件共享的两种文件模式之间切换的显着延迟。您现在发现两个用户的性能应该与一个用户相同（假设一个用户空闲并且没有增加网络负载）。因此，在应用程序启动时，打开一个全局变量的后端表，并始终保持该表打开。

# jboss5.x - http 响应在 jboss-5.1.0.GA 中被截断

> ID：13243899
> 
> 赞同：0
> 
> 时间：2012-11-06T03:27:06.150
> 
> 标签：jboss5.x

1）我有一个很奇怪的问题，http响应被截断，从这个jsp的web浏览器获取的源文件保持114458字节的大小，不管我如何改变jsp源的内容，我做了很多对其进行研究，但到目前为止还没有运气。

2）从互联网上找到了 2 个类似的问题，但对我不起作用 a）遇到特殊字符时响应会被截断（https://community.jboss.org/message/497765#497765），我已经尝试了提供的解决方法和注释 include 语句以排除具有特殊字符的 jsp

b）JSP 达到 65k 边界（http://www.tikalk.com/java/migrating-your-application-jboss-4x-jboss-5x），仍然无法通过更改内部提供的配置来工作

3)我试过EAP版本(jboss-eap.5.1.2)没有这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:54:33.890

这个解决方案对我有用：

[https://community.jboss.org/message/764827#764827](https://community.jboss.org/message/764827#764827)

添加过滤器

```
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    HttpServletRequest req = (HttpServletRequest) request;
    HttpServletResponse res = (HttpServletResponse) response;

    if (inUse && this.encodingConfig != null) {
        req.setCharacterEncoding(encodingConfig);
        res.setCharacterEncoding(encodingConfig);
        //res.setHeader("Content-Type", "text/html;charset=" + encodingConfig);
        //res.setContentType("text/html;charset=" + encodingConfig);
        if (System.getProperty(DEFAULT_ENCODING) == null) {
            System.setProperty(DEFAULT_ENCODING, encodingConfig);
        }
    }
    chain.doFilter(req, res);
} 
```

# iphone - mediaplayer 框架不在 iOS 6 中播放视频

> ID：13243903
> 
> 赞同：2
> 
> 时间：2012-11-06T03:27:13.067
> 
> 标签：iphone, objective-c, ios, media-player, loading

我正在使用 iOS 6 中包含的媒体播放器框架来尝试从应用程序中播放电影。我导入然后：

```
-(IBAction)playMovie:(id)sender
{
    NSString *filepath = [[NSBundle mainBundle] pathForResource:@"buyTutorial" ofType:@"mov"];
    NSURL *fileURL = [NSURL fileURLWithPath:filepath];
    MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
    [self.view addSubview:moviePlayerController.view];
    moviePlayerController.fullscreen = YES;
    [moviePlayerController play];
} 
```

调用此函数时，视图将进入空白屏幕并无限加载。我已经尝试了这个实现的许多其他版本，结果各不相同，都失败了。特殊情况下的日志是：

```
2012-11-05 21:19:27.900 [MPAVController] Autoplay: Disabling autoplay for pause
2012-11-05 21:19:27.902 [MPAVController] Autoplay: Disabling autoplay
2012-11-05 21:19:27.977 [MPAVController] Autoplay: Disabling autoplay for pause
2012-11-05 21:19:27.978 [MPAVController] Autoplay: Disabling autoplay
2012-11-05 21:19:27.984 [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 0)
2012-11-05 21:19:28.156 [MPAVController] Autoplay: Enabling autoplay 
```

对原因有想法吗？这是我第一次尝试播放视频，在这一点上它已成为一场噩梦。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T13:11:07.090

在 .h 文件中添加以下内容

```
@property (nonatomic, strong) MPMoviePlayerController *controller; 
```

试试这个

```
 -(IBAction)playMovie:(id)sender
    {
        NSString *filepath = [[NSBundle mainBundle] pathForResource:@"buyTutorial" ofType:@"mov"];
        NSURL *fileURL = [NSURL fileURLWithPath:filepath];
        MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
        [self.view addSubview:moviePlayerController.view];
        moviePlayerController.fullscreen = YES;
    [moviePlayerController prepareToPlay];
        [moviePlayerController play];
[self setController:moviePlayerController];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T02:55:51.587

```
Am facing the same issue, you can else try playing it on the web view. 

   NSURL *url = [NSURL fileURLWithPath:self.filePath];
   NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [self.docWebView loadRequest:request]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T04:24:07.100

您的代码的问题是变量“moviePlayerController”只是局部范围，所以在您调用`[moviePlayerController play];`并退出函数后，局部变量被释放（因为这里有一个异步操作，播放方法可以从队列中播放）。它不再让内容引用 URL。因此，您会看到黑屏和不定式“正在加载...”

您需要声明一个类的实例变量并将内容从局部变量复制到类的属性，如上面@iAppDeveloper 的示例代码。它应该工作！

# php - iWork - 导致 index.html 文件出现问题

> ID：13243905
> 
> 赞同：2
> 
> 时间：2012-11-06T03:27:14.910
> 
> 标签：php, html, parsing, syntax

问题：

解析错误：语法错误，第 1 行 /home/brofesso/public_html/brofessor.org/index.html 中出现意外的“=”

第 1 行：

```
 <?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta http-equiv="refresh" content="0;url= www.brofessor.org/Velkommen.html" /></head><body></body></html> 
```

我对此很陌生；我正在尝试学习如何通过 iWork 添加自己的网页。

我刚刚添加了标准页面，但我总是遇到这个问题。有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:53:03.447

这不是答案；这是一个格式化的评论。尝试以下操作，然后报告错误的行号（如果有）：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title/>
        <meta http-equiv="refresh" content="0;url= www.brofessor.org/Velkommen.html"/>
    </head>
    <body/>
</html> 
```

# javascript - JavaScript函数在循环迭代器问题中循环？

> ID：13243907
> 
> 赞同：0
> 
> 时间：2012-11-06T03:27:42.910
> 
> 标签：javascript

这是我的代码：

```
function func(){
 for(i=0; i < 5; i++){
   alert('g');
 }
}

for(i=0; i < 5; i++){
  func();
  alert('h');
} 
```

我所期望的是：

但收到的只是ggggh

我发现这是因为 JS 中存在函数作用域，而不是块作用域。我想知道的是如何保持这种行为。我的意思是强制使用块范围之类的东西。否则很容易产生真正令人讨厌的错误——例如，在使用其他人编写的函数或您自己编写的函数时，但在几个月前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:30:30.040

这实际上与函数与块范围无关 - 它与隐式全局变量有关。

简短的故事：您不小心在循环中创建了一个*全局*变量`for`- 如果您使用`for(var i=0;`而不是`for(i=0;`您将获得预期的结果。

稍长的版本：

```
alert("typeof i: " + typeof i);
// Alerts "typeof i: undefined"    
function func() {
  // References the *global* variable `i`
  for(i=0; i < 5; i++){
    alert('g');
  }
}

// Creates a *global* variable `i` and sets it to 0
for(i=0; i < 5; i++) {
   alert("i at start of iteration: " + i);
   // Alerts "i at start of iteration: 0"
   func();
   // `func` has just altered *global* state - here's the proof
   alert("i after call to func: " + i);
   // Alerts "i at start of iteration: 5"
   alert('h');
}
alert("typeof i: " + typeof i);
// Alerts "typeof i: number
// `i` is now in the global scope.

// Left as an exercise for the reader:
// try it again with `var i=0;` in both of the `for` loops. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T03:31:34.173

变量 i 的范围存在问题。

```
function func(){
 for(var i=0; i < 5; i++){
   alert('g');
 }
}

for(var i=0; i < 5; i++){
  func();
  alert('h');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T03:32:00.993

尝试`i`在函数中声明为局部变量：

```
function func(){
   var i;
   for(i=0; i < 5; i++){
     alert('g');
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T04:01:20.057

正如其他答案中已经说明的那样，您的代码不起作用，因为您没有使用 声明`i`变量[`var`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)，这会自动使其成为全局变量。所以不是真正的功能与块范围问题。如果你`var`用来声明你的变量，那么变量的范围将被限制在声明*包含在任何嵌套函数*中的同一个函数中，或者如果不在函数中，则为全局。

如果您在嵌套函数中使用相同的变量名称，则内部范围内的变量称为“遮蔽”外部变量；在这种情况下，内部函数无法访问该名称的外部函数变量，因为使用该名称只会给它自己的变量。可以这么说。尽管您可以通过将全局变量视为`window`对象的属性来访问它们。

> *“我想知道的是如何保留这种行为。我的意思是强制使用块作用域之类的东西。否则很容易产生非常讨厌的错误......”*

不，一旦您开始`var`正确使用，避免这些错误并不难。但是你*可以*通过引入一个立即调用的匿名函数来强制块作用域：

```
(function() {
    // variables created in this function are accessible
    // only within this function
    var x, y, z;
})();

console.log(typeof x); // "undefined" (x can't be seen from outside the function) 
```

括号`function(){}`是必需的，以便函数被解释为表达式而不是函数语句；最后的额外`()`内容是使该函数表达式立即执行。这种结构的一个常见用途是将整个脚本包含在其中，这样其中的变量或函数就不会成为全局变量，因此不会与从其他 JS 包含文件加载的其他脚本交互。（您可以在块内的多个函数之间共享伪全局变量，这些函数也在块内声明。）

因此，例如，如果您想将`for`语句的主体变成具有范围的“块”，您可以这样做：

```
for (var i = 0; i < something; i++) {
    (function() {
        var x = i;
        // do something with x
    })();
} 
```

# mediaelement.js - mediaelement.js 显示下载链接

> ID：13243908
> 
> 赞同：4
> 
> 时间：2012-11-06T03:27:47.033
> 
> 标签：mediaelement.js

目前我正在使用 MediaElement.js 制作一个 html5 视频。它在 Chrome 中完美运行，但在 Firefox 中仅显示下载链接。

这是html：

```
<div id="wrap">
    <video width="680" height="255" id="vid-holder">
       <source src="media/JonesLangLaselle_1210_final.webm" type="video/webm"/>
       <source src="media/JonesLangLaselle_1210_final.mp4" type="video/mp4"/>
       <source src="media/JonesLangLaselle_1210_final.ogv" type="video/ogg"/>
    </video>
</div> 
```

源层次结构有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:52:09.360

我已经有了答案，希望对你有帮助。

只需在视频标签中添加预加载属性

补充，为：

```
<video width="680" height="255" id="vid-holder" preload="none"> 
```

# c# - Jasny Bootstrap 文件上传控制

> ID：13243909
> 
> 赞同：2
> 
> 时间：2012-11-06T03:27:51.417
> 
> 标签：c#, jquery, twitter-bootstrap, jasny-bootstrap

我在我的 asp.net 项目中使用[Jasny Bootstrap](http://jasny.github.com/bootstrap)文件上传控件。

它看起来非常好，但我无法将附件发送到服务器（一个 .ASHX 网络服务）

我的布局代码如下所示

```
<div class="fileupload fileupload-new" data-provides="fileupload">
<div class="input-append">
<div class="uneditable-input span3"><i class="icon-file fileupload-exists"></i> <span class="fileupload-preview"></span></div><span class="btn btn-file"><span class="fileupload-new">Select file</span><span class="fileupload-exists">Change</span><input type="file" /></span><a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T20:27:07.123

HTML 包含一个`<input type="file" />`. 您需要设置输入元素的名称属性。还要确保您`enctype="multipart/form-data"`在表单中使用。

```
<form action="myscript.ashx" method="post" enctype="multipart/form-data">
  <div class="fileupload fileupload-new" data-provides="fileupload">
    <div class="input-append">
      <div class="uneditable-input span3"><i class="icon-file fileupload-exists"></i> <span class="fileupload-preview"></span></div>
      <span class="btn btn-file"><span class="fileupload-new">Select file</span><span class="fileupload-exists">Change</span><input type="file" name="myupload"/></span>
      <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
    </div>
  </div>
</form> 
```

# android - onCreate() 中的 getLocationOnScreen() 只返回零

> ID：13243914
> 
> 赞同：9
> 
> 时间：2012-11-06T03:28:06.957
> 
> 标签：android

在 ImageView（或其他视图）上调用 getLocationOnScreen() 以响应按钮单击会给出正确的值。

但是当从 Activity::onCreate() 调用 getLocationOnScreen() 时，我只得到 [0, 0]。我怎样才能解决这个问题？

onCreate() 是否太早，无法完成所有计算？以后有没有更好的地方来挂钩开始动画？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-06T03:51:00.380

`getLocationOnScreen()`现在入住还为时过早`onCreate()`。更好的地方是在视图级别（如果您使用自定义视图），在`onLayout()`. 只有在这里，才会计算视图的大小和位置。如果您没有创建自定义视图，您可以在活动级别获取它`onWindowFocusChanged()`（活动具有焦点）。

# unix - 编写一个 unix 守护进程

> ID：13243917
> 
> 赞同：2
> 
> 时间：2012-11-06T03:28:42.787
> 
> 标签：unix, daemon

我正在尝试在 Unix 中编写一个守护进程。我了解如何使守护程序启动并运行的部分。现在我希望守护程序在我在 shell 中键入命令时响应，如果它们是针对守护程序的。

例如：

让我们假设守护进程名称是“mydaemon”

在终端 1 中，我输入 mydaemon xxx。在终端 2 中，我输入 mydaemon yyy。

“mydaemon”应该能够接收参数“xxx”和“yyy”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:38:47.360

如果我正确解释了您的问题，那么您必须将其作为应用程序级构造来执行。也就是说，这是特定于您的程序的东西，您必须自己编写代码。

我将采用的方法是编写“mydaemon”，并将其作为包装器：它检查进程表或 pid 文件以查看“mydaemon”是否已经在运行。如果没有，那么 fork/exec 你的新守护进程。如果是这样，则将参数发送给它。

对于“将参数发送给它”，我会使用命名管道，如下所述：[什么是命名管道？](https://stackoverflow.com/questions/175579/what-are-named-pipes)本质上，您可以将命名管道视为类似于“stdin”，除了它们对系统的其余部分显示为文件，因此您可以在运行的“mydaemon”中打开它们并检查它们的输入。

最后，应该注意的是，所有这些 check-if-running-send-to-pipe 的东西都可以在你的守护程序中使用 *nix OS 的 API 完成，或者可以在脚本中使用例如“ps”、“echo”等...

# sqlite - 使用 SQLite ODBC 驱动程序从 powerpivot 读取 sqlite db 的连接字符串

> ID：13243919
> 
> 赞同：2
> 
> 时间：2012-11-06T03:28:51.093
> 
> 标签：sqlite, odbc, connection-string, powerpivot

我想将 sqlite 文件中包含的数据导入 PowerPivot。我为 sqlite (http://www.ch-werner.de/sqliteodbc/) 下载了一个 ODBC 驱动程序来完成此操作。在 PowerPivot 中，我选择了“主页”>“获取外部数据”>“从其他来源”。我向下滚动到“其他（OLEDB/ODBC）。选择它并单击下一步。

The为连接字符串。我找到了这个网站： http: [//www.connectionstrings.com/sqlite](http://www.connectionstrings.com/sqlite)，我尝试了底部为 SQLite3 ODBC 驱动程序建议的连接字符串：

```
DRIVER=SQLite3 ODBC Driver;Database=c:\Chinook_Sqlite.sqlite;LongNames=0;Timeout=1000;NoTXN=0;
SyncPragma=NORMAL;StepAPI=0; 
```

（我正在使用一个示例数据库，它放在我的 c: 的根目录中。如果来自这里的数据库： http: [//chinookdatabase.codeplex.com/releases/view/55169](http://chinookdatabase.codeplex.com/releases/view/55169)）

当我测试连接时使用此连接字符串，我收到以下错误消息：

> 测试连接失败，因为无法初始化提供程序。如果您就此错误联系 Microsoft 支持，请提供以下消息：无法连接到服务器。原因：连接字符串中缺少提供程序信息。添加提供商信息，然后重试。

我知道我安装的驱动程序没有找到，但我不知道如何更正连接字符串以指向驱动程序 dll。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-14T02:05:25.400

这个解决方案是经过数小时的研究和反复试验后得出的。虽然晚了 2 年，但我还是把它放在帮助其他尝试从 SQLite 将信息导入 Power Pivot 2013 的人。

[第 1 步：从此处](http://www.ch-werner.de/sqliteodbc/)安装 SQLite ODBC 驱动程序。

第 2 步：通过打开 Windows 的“ODBC 数据源管理器”创建 DNS（您可以在 Windows > 管理工具下找到它）。有关更多信息，请参见[此处](http://web.synametrics.com/SQLite.htm)和[此处](https://stackoverflow.com/questions/18277537/unable-to-connect-access-to-sqllite-via-odbc)。我尝试在“用户 DNS”和“系统 DNS”下创建 DNS - 两者都可以与 Power Pivot 一起正常工作。

步骤 3：打开 Power Pivot 并执行以下操作：

单击“来自其他来源”>“其他（OLEDB/ODBC）”>单击“构建”按钮>在“提供程序”选项卡下>选择“**用于 ODBC 源的 MS OLE DB 提供程序**”>在“使用数据源名称”中，选择您的在步骤 2 中创建的 DNS 并添加任何其他参数。此时，您可以测试连接，它应该显示“测试连接成功”

单击“确定”后，您应该会看到自动生成的连接字符串。我的是：'Provider=MSDASQL;Persist Security Info=False;DSN=SQLiteTest'。

按照接下来的几个步骤从 SQLite 导入数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:29:37.340

你需要这样的东西：

```
Provider=MSDASQL.1;Persist Security Info=False;Mode=ReadWrite;Initial Catalog=C:\XXX.db;DSN=SQLite3 Datasource 
```

# javascript - javascript私有和公共函数和成员

> ID：13243925
> 
> 赞同：0
> 
> 时间：2012-11-06T03:29:24.707
> 
> 标签：javascript, private-members

我正在阅读关于 javascript 私人成员和公共成员的小教程（[http://www.crockford.com/javascript/private.html](http://www.crockford.com/javascript/private.html)）

这让我很困惑，因为这里说：

上市

对象的成员都是公共成员。任何功能都可以访问、修改或删除这些成员，或添加新成员。将成员放入新对象有两种主要方法：

在构造函数中

这种技术通常用于初始化公共实例变量。构造函数的 this 变量用于向对象添加成员。

```
function Container(param) {
    this.member = param;
} 
```

后来它说：

私有成员由构造函数创建。构造函数的普通变量和**参数**成为私有成员。

```
function Container(param) {
    this.member = param;
    var secret = 3;
    var that = this;
} 
```

“这个构造函数创建了三个私有实例变量：param、secret 和 that。”

我不明白......如果构造函数参数最终是私有的，那么为什么第一个示例是公共的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:34:37.233

在第一个示例中，`member`被创建为公共成员，其值初始化为 的（否则为私有）值`param`。

# apache-camel - 我遇到了骆驼 http4 端点的问题

> ID：13243931
> 
> 赞同：0
> 
> 时间：2012-11-06T03:30:06.597
> 
> 标签：apache-camel

春天上下文：

```
<bean id="customRouteA" class="com.xxx.CustomRouteABean" />

<camelContext id="solr" xmlns="http://camel.apache.org/schema/spring">
    <route>
        <from uri="activemq:topic:agent" />
        <to uri="bean:customRouteA"/>
    </route>
</camelContext> 
```

Java代码：

```
public class CustomRouteABean {

@EndpointInject(uri = "http4://localhost/camel-route-test.php")
ProducerTemplate producer;

public void processMessage(@Body String message) {
    ...
}
} 
```

不断报错：

```
2085 [main] ERROR org.springframework.web.context.ContextLoader  - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'customRouteA' defined in ServletContext resource [/WEB-INF/application-context.xml]: Initialization of bean failed; nested exception is org.apache.camel.spring.GenericBeansException: Error post processing bean: customRouteA; nested exception is org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: http4://localhost/camel-route-test.php?bridgeEndpoint=true due to: null 
```

我有另一个 bean 具有相同的设置工作得很好，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:31:05.023

And you have camel-http4 and its dependent JARs on the classpath?

# java - JSP 找不到资源

> ID：13243932
> 
> 赞同：0
> 
> 时间：2012-11-06T03:30:11.037
> 
> 标签：java, jsp, servlets

我正在用 JSP 和 Java Servlet 编写一些东西，只是为了习惯它们。

我在“Java 资源”中有一个名为“LoginServlet”的 Java servlet，并且在我的 Web 内容文件夹中

```
<form action="LoginServlet" method="post"> 
```

这是在一个 html 文件中。但是，eclipse告诉我找不到这个资源。我试过`action="userLoginPackage.LoginServlet"`了，但这不起作用。请注意，所有内容都在同一个项目中，但我认为 WebContent 中的内容与 LoginServlet 不在同一个包中，这可能是问题所在。但是，如果是的话，我不确定在哪里放置 html 文件（我应该把它们放在哪里？）

我知道如果不知道我的项目结构，这可能很难解决 - 如果我可以提供任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T03:34:04.077

您是否在 web.xml 中定义了“LoginServlet”？web.xml 是什么样的？您需要在 web.xml 中定义一个 servlet，然后才能调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T04:07:04.960

您的“LoginServlet”应该放在“Java Resources/src”文件夹中。您的 html 文件应该在“WebContent”文件夹中。

# iterm - iTerm2：如何临时展开拆分窗格？

> ID：13243933
> 
> 赞同：123
> 
> 时间：2012-11-06T03:30:12.750
> 
> 标签：iterm

有没有办法将拆分窗格临时扩展为完整选项卡并在完成后再次返回？我正在寻找一个键盘快捷键来做到这一点。用例是能够按需临时切换到全屏。

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2013-05-10T13:36:21.027

要最大化您的活动面板，只需在要展开的屏幕上使用`Cmd`+ `Shift`+ 。`Enter`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-06-04T08:56:50.133

`Cmd`您可以使用+ `Shift`+最大化和最小化当前面板`Enter`

有很多热键要记住，开始时打印备忘单或在浏览器中扫描[文档会很有帮助。](https://www.iterm2.com/documentation-one-page.html)`find`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-07T03:01:36.013

对我来说，我找不到菜单部分`Preferences > Keys > Action > Select Menu Item > View > Maximize Active Pane`

我的解决方法是右键单击窗格，然后选择`Move Session to Window`并最大化该窗口。

然后我们可以`Move Session to Pane`将其移回。

# c# - 使用 Global.asax 文件加载用户首选的界面语言

> ID：13243941
> 
> 赞同：0
> 
> 时间：2012-11-06T03:31:25.533
> 
> 标签：c#, multilingual, global-asax

我正在使用 C# 和 .Net 4.0 开发多语言 ASP.net Web 应用程序。

Web 应用程序允许用户为用户界面保存他的首选语言。还有一项规定是使用网站标题上的下拉菜单更改用户界面语言。每次用户更改下拉菜单中的语言时，Web 应用程序当前使用 HttpModule 加载文化设置，并且选定的语言保存在 Session 变量中。

要求用户登录时，用户界面使用其首选语言。Global.asax Session_Start 方法是获取用户设置并将其加载到会话中的好地方吗？还有哪些其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:38:28.137

我们做同样的事情并使用`Application_AuthenticateRequest`

# jquery - 返回匹配的子字符串数组

> ID：13243942
> 
> 赞同：2
> 
> 时间：2012-11-06T03:31:27.030
> 
> 标签：jquery, regex, prototype

我有这个漂亮的函数，但我需要对其进行自定义以仅返回与正则表达式匹配的项目数组。所以结果`#hash1234, #sweetthing,#something_notimportant` 是有没有办法使用这个函数来做到这一点？

```
String.prototype.parseHashtag = function() {
    return this.replace(/[#]+[A-Za-z0-9-_]+/g, function(t) {
        var tag = t.replace("#", "%23");
        return t.link("http://search.twitter.com/search?q=" + tag);
    });
};

var string = '#hash1234 this is another hash: #sweetthing and yet another #something_notimportant';       
$('#result').html(string.parseHashtag()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T03:39:59.240

该[`.match`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)返回一个包含所有匹配项的数组，或者`null`如果没有匹配项。

因此，如果`null`对于不匹配的情况是可接受的回报，那么：

```
String.prototype.parseHashtag = function() {
    return this.match(/[#]+[A-Za-z0-9-_]+/g);
} 
```

或者，如果您希望返回一个空数组或其他不匹配的默认值：

```
String.prototype.parseHashtag = function() {
    return this.match(/[#]+[A-Za-z0-9-_]+/g) || [];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T03:35:51.317

简单的：

```
String.prototype.findHashTags = function() {
    return this.match(/[#]+[A-Za-z0-9-_]+/g);
};

string.findHashTags()
// returns ["#hash1234", "#sweetthing", "#something_notimportant"] 
```

图案完全一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T04:01:31.817

使用匹配。

```
String.prototype.parseHashtag = function() {
    var t= this.match(/[#]+[A-Za-z0-9-_]+/g);
    var tag='';
   $.each(t,function(index,value) { tag = tag + value.replace('#','%23') + ','; });
    return "http://search.twitter.com/search?q=" + tag;

};

var string = '#hash1234 this is another hash: #sweetthing and yet another #something_notimportant';       
$('#result').html(string.parseHashtag());​ 
```

# vb.net - 删除所有文件和文件夹

> ID：13243952
> 
> 赞同：1
> 
> 时间：2012-11-06T03:32:28.700
> 
> 标签：vb.net, file-io

我想删除一个文件夹中的所有文件和文件夹。

### 代码

```
If Not Directory.Exists(txtTXT.Text) Then
     Return
End If

Dim files() As String
files = Directory.GetFileSystemEntries(txtTXT.Text)

For Each element As String In files
    If (Not Directory.Exists(element)) Then
        File.Delete(Path.Combine(txtTXT.Text, Path.GetFileName(element)))
    End If
Next 
```

我的代码只删除文件，但不删除文件夹......我怎样才能全部删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:17:43.110

我修改了我的程序，所以我使用了这个代码..

```
My.Computer.FileSystem.DeleteDirectory( _
    My.Computer.FileSystem.SpecialDirectories.Desktop + "\epubcount", _
    FileIO.DeleteDirectoryOption.DeleteAllContents) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T03:36:02.253

把这段代码变成一个函数。当您遇到目录时，对函数进行递归调用，并将目录名称传递给它。该函数还应该删除传入的目录。

# linux-kernel - CPU 在 X86 上从内核模式切换到用户模式：何时以及如何？

> ID：13243958
> 
> 赞同：3
> 
> 时间：2012-11-06T03:33:00.383
> 
> 标签：linux-kernel, context-switch

CPU 何时以及如何在 X86 上从内核模式切换到用户模式：它到底做了什么？它是如何实现这种转变的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T02:59:47.527

在 x86 保护模式下，CPU 正在执行的当前特权级别由`CS`寄存器的两个最低有效位（`RPL`段选择器的字段）控制。

因此，从内核模式 (`CPL=0)`到用户模式 ​​( ) 的切换`CPL=3)`是通过用用户模式的值替换内核模式的 CS 值来完成的。有很多方法可以做到这一点，但一种典型的方法是`IRET`弹出`EIP`,`CS`并`EFLAGS`从堆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T09:29:39.777

`iret`例如这样做。[请参阅此处](http://lxr.free-electrons.com/source/arch/x86/kernel/entry_32.S#L527)的代码（INTERRUPT_RETURN 宏）

# c++ - 当宏扩展为空时，临时变量会发生什么？

> ID：13243962
> 
> 赞同：0
> 
> 时间：2012-11-06T03:33:56.090
> 
> 标签：c++, macros

```
#ifdef _DEBUG
// calls appropriate functions for message logging
#define LOGMESSAGE( stdStr ) gLogger.LogMessage( stdStr, __FILE__, __LINE__ );
// calls appropriate function for success logging
#define LOGSUCCESS( stdStr ) gLogger.LogSuccess( stdStr, __FILE__, __LINE__ );
// calls appropriate function for error logging
#define LOGFAILURE( stdStr ) gLogger.LogFailure( stdStr, __FILE__, __LINE__ );
#endif

#ifdef NDEBUG
// does nothing in release mode
#define LOGMESSAGE( stdStr )
// does nothing in release mode
#define LOGSUCCESS( stdStr )
// Logs failures in release mode
#define LOGFAILURE( stdStr ) gLogger.LogFailure( stdStr, __FILE__, __LINE__ );
#endif 
```

假设我将宏称为如下

```
if ( SomeFunc() )
    {
    LOGSUCCESS("Success calling SomeFun()");
    }
else
    {
    LOGFAILURE("Failure calling SomeFun()");
    } 
```

在发布模式下，LOGSUCCESS 为空白，这是否意味着“成功调用 SomeFunc()”字符串未编译到代码中并且不会存在于编译后的代码中，或者是剩余的，但宏不做任何事情它？

编辑：我的意思是它是否有效地将这样的代码保留在发布模式下？

```
if ( SomeFunc() )
    {
    "Success calling SomeFun()";
    }
else
    {
    gLogger.LogFailure("Failure calling SomeFun()", __FILE__, __LINE__ );
    } 
```

或者

```
if ( SomeFunc() )
    {

    }
else
    {
    gLogger.LogFailure("Failure calling SomeFun()", __FILE__, __LINE__ );
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T03:56:47.503

它将扩展到-

```
if ( SomeFunc() )
    {
; //Remember the semicolon here
    }
else
    {
    gLogger.LogFailure("Failure calling SomeFun()", __FILE__, __LINE__ );
    } 
```

宏解析是一个预编译时活动，它只是在编译开始之前将定义替换到代码中。

您没有将任何“含义”与宏中的调试动态信息相关联 - 因此根本不使用它。

简而言之，宏只是预编译期间的一种“搜索和替换”活动。现在由于 str 没有在宏中定义，它没有被“使用”。由于它是一种预编译时活动，因此不会出现临时变量的问题。

# tcl - Tcl 在用 'a+' 打开的文件中查找和写入

> ID：13243967
> 
> 赞同：2
> 
> 时间：2012-11-06T03:34:23.337
> 
> 标签：tcl

我需要将一些日志存储在一个文件中，该文件可以随着每次执行而增长。一个合乎逻辑的方法是`a+`在打开时使用选项，因为使用`w+`会截断文件。但是，使用`a+`选项（Tcl 8.4）我无法在文件中的任何地方写入。`seek`工作正常。我可以验证指针是否已使用`tell`. 但是输出总是在文件的**末尾**完成。

有没有办法解决这个问题？即有能力在任何地方寻找和写入，并在打开时保留旧文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T09:14:40.287

在 Tcl 8.5 中，Tcl*在 Unix 上*的行为发生了变化，以便将`O_APPEND`标志传递给`open()`系统调用。这会导致操作系统始终将数据附加到文件中，并在将 FD 传递给子进程时继承；对于日志，这*完全*是正确的。（在 8.4 及之前的版本中，以及在 Windows 上的所有版本中，行为是在 Tcl 的文件通道实现内部模拟的，这将在内部`seek()`紧接在`write()`; 之前结束，当有多个进程登录到时，这显然会受到竞争条件的潜在问题同一个文件，当 FD 传递给子进程时绝对不安全。）您可以使用`chan truncate`（8.5 中的新功能）管理打开文件的截断，这在`a+`-打开的文件。

如果您不希望寻求结束行为，则不应使用`a+`(或`a`)。尝试`r+`或一些[标志](http://www.tcl.tk/man/tcl8.5/TclCmd/open.htm#M11)组合，如下所示：

```
set f [open $filename {RDWR CREAT}] 
```

为了比较，该`a+`选项现在与 flags*完全相同*`RDWR CREAT APPEND`，并且并非所有较长标志的组合都可以用短格式标志说明符来描述。如果您没有指定`APPEND`，则需要`seek $f 0 end`自己做（如果您要附加到日志，请注意多个进程的问题；这时`APPEND`需要并且非常难以正确模拟任何其他方式）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T03:37:19.990

打开方式`r+`- 它以读取模式打开（因此不会转换文件），但也允许写入。

`open`有关更多信息，请参阅文档： [http ://www.tcl.tk/man/tcl8.5/TclCmd/open.htm](http://www.tcl.tk/man/tcl8.5/TclCmd/open.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T07:02:45.290

我已经验证使用该`a+`选项允许我在文件中的任何位置读/写。但是，通过在文件的中间（或开头）写入，我会覆盖那里的数据，而不是插入。以下代码说明了这一点：

```
#!/usr/bin/env tclsh

# Open the file, with truncation
set f [open foo w]
puts $f "one"
puts $f "two"
close $f

# Open again, with a+ ==> read/write/append
set f [open foo a+]
puts $f "three" ;# This goes to the end of the file
seek $f 4       ;# Seek to the beginning of the word "two"
puts $f "2.0"   ;# Overwrite the word "two"
close $f

# Open and verify the contents
set f [open foo r]
puts [read $f]
close $f 
```

输出：

```
one
2.0
three 
```

如果您要在文件中间插入，您可能需要查看`fileutil`包含该`::fileutil::insertIntoFile`命令的包。

# c - 如何在 IAR Workbench 中调试 C 中的堆栈溢出

> ID：13243972
> 
> 赞同：2
> 
> 时间：2012-11-06T03:35:05.927
> 
> 标签：c, debugging, memory-leaks, stack-overflow, iar

我正在使用 IAR Embedded Workbench IDE 和 TI CC2540 蓝牙低功耗 8051 芯片进行 C 项目。

在处理项目时，我似乎遇到了大量的 XData 堆栈和 Idata 堆栈溢出，而且我很难确定溢出的来源。我正在通过 UART 端口处理大量字符串。

我想知道是否有人对如何确保在分配内存后释放内存并确保我留在堆栈和堆的边界内有任何提示。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T03:18:51.643

好吧，为了避免堆栈溢出，您应该避免以下事情：

1）递归（在嵌入式系统中使用递归不是一个好主意）

2）尽量避免动态分配。在大多数情况下，您不需要它。

在汽车中，有几条用于对 ECU 进行编程的规则称为 MISRA 规则，这些规则建议不要使用动态分配的内存和递归。这是一个[链接](http://www.ristancase.com/html/dac/manual/3.12.02%20MISRA-C%202004%20Rules.html)

IAR Embedded Workbench 是少数支持 MISRA C 的 IDE 之一。尝试启用 MISRA C 选项（这可能表明您的问题所在）。看看它是如何在[这里](http://www.iar.com/en/Products/IAR-Embedded-Workbench/Technology/MISRA-C/)完成的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-16T19:55:38.773

从[这个 TI 的论坛](https://e2e.ti.com/support/wireless_connectivity/f/538/t/229990)中，只是试图阐明 TI 的 2540/1 堆栈大小。

编译项目后，您可以查看“.map”文件（输出文件夹）的底部。

比如心率示例项目：

```
108 019 bytes of CODE memory
     26 bytes of DATA memory (+ 73 absolute )
  6 089 bytes of XDATA memory
    192 bytes of IDATA memory
      8 bits of BIT memory
    702 bytes of CONST memory 
```

此信息很有用，因为它告诉项目正在使用的代码空间（CODE 内存）和 RAM（XDATA 内存）的总量。CODE 内存加上 CONST 内存的总和不得超过器件的最大闪存大小（128KB 或 256KB，取决于 CC2540/41 的版本）。XDATA 存储器的大小不得超过 7936 字节，因为 CC2540/41 包含 8kB 的 SRAM（保留 256 字节）。

在密切关注 XDATA 不超过 ~8k 的同时，您可能需要调整定义代码的缓冲区/大数组。最小的 SimpleBLEPeripheral 应用程序本身消耗接近 6-7k 的内存，除此之外，还有足够的空间为您的应用程序资源分配一些内存。

[我知道，答案很晚，但可能会帮助其他读者]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T15:29:36.703

您可以在链接器配置 (.icf) 文件中更改堆栈和堆大小。项目-> 选项-> 链接器-> 配置。可以在内置编辑器中进行微小的更改，但它是如此可悲，以至于您应该只使用文本编辑器。

在那里你会看到类似的东西：

```
define block CSTACK with alignment = 8, size = 0x0400 {};
define block HEAP with alignment = 8, size = 0x0200 {};
place in MY_RAM_region {block CSTACK, block HEAP}; 
```

您可以根据需要进行更改。我认为可以将 HEAP 大小设置为零。然后所有 malloc 调用将在运行时失败，但酷孩子无论如何都不会在嵌入式系统中使用动态内存。

如何估计堆栈大小？EWB 手册建议将此添加到您的 .icf 中：

```
check that size(block CSTACK) >= 
      maxstack("Program Entry") + totalstack("interrupt") + 100; 
```

如果 CSTACK 太小，这假设会引发错误（100 只是一个捏造因素。）在我的情况下，链接器只是抛出错误“我无法计算出你的堆栈大小”。

IAR 的 .icf 格式让我想起了 AppleScript（不是很好）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-24T14:06:55.477

我不知道对于 IAR 的非 arm 版本是否可以正常工作，我可以分享我们的方法：

在启动文件中，我们只需使用 IAR 用来测量堆栈使用情况的模式编辑 RAM 的初始化：

```
 LDR R1, =__RAM_START
    LDR R2, =__RAM_END

    SUBS    R2, R2, R1
    SUBS    R2, #1
    BLE .LC5

    MOVS    R0, #0xCDCDCDCD ;; <- LOOK HERE!
    MOVS    R3, #4
.LC4:
    STR R0, [R1]
    ADD R1, R1, R3
    SUBS R2, #4
    BGE .LC4 
```

然后在我的节点的选项中，在链接器->高级中，我们标记启用堆栈使用分析。在 IDE 选项中，我们选择“启用图形堆栈”等。

现在，在调试会话中，我们选择 View-> Stack 启用堆栈的图形表示。

使用这种方法，您还可以转储整个 RAM 并找出 0xCDCD 模式的位置和位置。

另一种方法涉及我们的 uC 中的 DWT 或 MPU，以监视总线访问跨越边界并触发异常。使用这种方法，您可以准确地看到堆栈溢出时谁在做什么。

同样，这是一种为 ARM 量身定制的方法，我不知道这是否适用于您的系统。

韩国

# java - java的安装目录是文件系统时未设置Hadoop JAVA_HOME？

> ID：13243974
> 
> 赞同：1
> 
> 时间：2012-11-06T03:35:29.723
> 
> 标签：java, hadoop

我使用[本教程在 Ubuntu 12.04 上安装 java](http://www.liberiangeek.net/2012/09/install-oracle-java-8-jdk-jre-in-ubuntu-12-04/)；

我首先尝试通过下载java以老式方式安装它，添加一个`JAVA_HOME`指向安装的变量并将其添加到`PATH`连接的`\bin`) 但由于默认安装了一些奇怪的openjdk，这不起作用......我记得是能够通过使用`update-alternatives`并选择我下载的安装来绕过它，但是这次它不起作用，该命令从未检测到我的新安装；所以我最终改用了那个教程。

使用本教程中的 PPA 的唯一问题是它没有将所有 jdk 安装在我可以指向的单个目录中`JAVA_HOME`，因此 Hadoop 抱怨该变量丢失。

有什么办法可以让 Hadoop 启动并运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:08:39.150

当我安装时，我删除了openjdk，然后像往常一样安装了java。这些是我遵循的步骤。希望它可以帮助你

1.  删除了openjdk

    sudo apt-get purge openjdk-*

2.  下载适用于操作系统的 java bin 文件（32bit/64bit）

3.  更改权限

    chmod +x 6u -linux-x64.bin

4.  要将 JDK 安装到当前目录，请运行自解压二进制文件。执行下载的文件，前面加上它的路径。例如，如果文件在当前目录中，则在其前面加上“./”（如果“.”不在 PATH 环境变量中，则需要）：

    ./jdk-6u -linux-x64.bin

5.  添加 JAVA_HOME 环境变量

# c# - 禁止警告 CS1998：此异步方法缺少“等待”

> ID：13243975
> 
> 赞同：118
> 
> 时间：2012-11-06T03:35:16.143
> 
> 标签：c#, asynchronous

我有一个带有一些返回函数的接口`Task`。一些实现接口的类没有任何等待，而其他类可能只是抛出 - 所以警告是虚假和烦人的。

是否可以抑制这些警告？例如：

```
public async Task<object> test()
{
    throw new NotImplementedException();
} 
```

产量：

> *警告 CS1998：此异步方法缺少“等待”运算符，将同步运行。考虑使用 'await' 运算符来等待非阻塞 API 调用，或使用 'await Task.Run(...)' 在后台线程上执行 CPU 密集型工作。*

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-11-06T16:00:50.943

> 我有一个带有一些异步功能的接口。

方法返回`Task`，我相信。`async`是一个实现细节，因此不能应用于接口方法。

> 一些实现接口的类没有任何等待，有些可能只是抛出。

`async`在这些情况下，您可以利用实现细节这一事实。

如果您无能为力`await`，那么您可以返回`Task.FromResult`：

```
public Task<int> Success() // note: no "async"
{
  ... // non-awaiting code
  int result = ...;
  return Task.FromResult(result);
} 
```

在 throwing 的情况下`NotImplementedException`，过程有点罗嗦：

```
public Task<int> Fail() // note: no "async"
{
  var tcs = new TaskCompletionSource<int>();
  tcs.SetException(new NotImplementedException());
  return tcs.Task;
} 
```

如果您有很多方法抛出`NotImplementedException`（这本身可能表明一些设计级别的重构会很好），那么您可以将冗长的内容包装到一个辅助类中：

```
public static class TaskConstants<TResult>
{
  static TaskConstants()
  {
    var tcs = new TaskCompletionSource<TResult>();
    tcs.SetException(new NotImplementedException());
    NotImplemented = tcs.Task;
  }

  public static Task<TResult> NotImplemented { get; private set; }
}

public Task<int> Fail() // note: no "async"
{
  return TaskConstants<int>.NotImplemented;
} 
```

helper 类还减少了 GC 否则必须收集的垃圾，因为具有相同返回类型的每个方法都可以共享其`Task`和`NotImplementedException`对象。

[我的 AsyncEx 库中](http://nitoasyncex.codeplex.com/SourceControl/changeset/view/0b9cde715251#Source/Nito.AsyncEx%20%28NET4,%20Win8,%20SL4,%20WP75%29/TaskConstants.cs)还有其他几个“任务常量”类型示例。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-04-17T18:02:58.980

另一种选择，如果你想保持函数体简单而不是编写代码来支持它，只需使用#pragma 来抑制警告：

```
#pragma warning disable 1998
public async Task<object> Test()
{
    throw new NotImplementedException();
}
#pragma warning restore 1998 
```

如果这很常见，您可以将禁用语句放在文件顶部并省略还原。

[http://msdn.microsoft.com/en-us/library/441722ys(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/441722ys(v=vs.110).aspx)

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2014-07-23T15:59:33.903

保留 async 关键字（如果您想保留它）的另一种方法是使用：

```
public async Task StartAsync()
{
    await Task.Yield();
} 
```

填充该方法后，您可以简单地删除该语句。我经常使用它，尤其是当一个方法可能等待某事但并非每个实现都实际执行时。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-12-15T11:06:57.160

解决方案之间存在差异，严格来说，您应该知道调用者将如何调用异步方法，但默认使用模式假定方法结果为“.Wait()”-“ **return Task.CompletedTask** ”是最佳解决方案。

```
 BenchmarkDotNet=v0.10.11, OS=Windows 10 Redstone 3 [1709, Fall Creators Update] (10.0.16299.192)
Processor=Intel Core i5-2500K CPU 3.30GHz (Sandy Bridge), ProcessorCount=4
Frequency=3233537 Hz, Resolution=309.2589 ns, Timer=TSC
.NET Core SDK=2.1.2
  [Host] : .NET Core 2.0.3 (Framework 4.6.25815.02), 64bit RyuJIT
  Clr    : .NET Framework 4.7 (CLR 4.0.30319.42000), 64bit RyuJIT-v4.7.2600.0
  Core   : .NET Core 2.0.3 (Framework 4.6.25815.02), 64bit RyuJIT

         Method |  Job | Runtime |         Mean |       Error |      StdDev |       Median |          Min |          Max | Rank |  Gen 0 |  Gen 1 |  Gen 2 | Allocated |
--------------- |----- |-------- |-------------:|------------:|------------:|-------------:|-------------:|-------------:|-----:|-------:|-------:|-------:|----------:|
 CompletedAwait |  Clr |     Clr |    95.253 ns |   0.7491 ns |   0.6641 ns |    95.100 ns |    94.461 ns |    96.557 ns |    7 | 0.0075 |      - |      - |      24 B |
      Completed |  Clr |     Clr |    12.036 ns |   0.0659 ns |   0.0617 ns |    12.026 ns |    11.931 ns |    12.154 ns |    2 | 0.0076 |      - |      - |      24 B |
         Pragma |  Clr |     Clr |    87.868 ns |   0.3923 ns |   0.3670 ns |    87.789 ns |    87.336 ns |    88.683 ns |    6 | 0.0075 |      - |      - |      24 B |
     FromResult |  Clr |     Clr |   107.009 ns |   0.6671 ns |   0.6240 ns |   107.009 ns |   106.204 ns |   108.247 ns |    8 | 0.0584 |      - |      - |     184 B |
          Yield |  Clr |     Clr | 1,766.843 ns |  26.5216 ns |  24.8083 ns | 1,770.383 ns | 1,705.386 ns | 1,800.653 ns |    9 | 0.0877 | 0.0038 | 0.0019 |     320 B |
 CompletedAwait | Core |    Core |    37.201 ns |   0.1961 ns |   0.1739 ns |    37.227 ns |    36.970 ns |    37.559 ns |    4 | 0.0076 |      - |      - |      24 B |
      Completed | Core |    Core |     9.017 ns |   0.0690 ns |   0.0577 ns |     9.010 ns |     8.925 ns |     9.128 ns |    1 | 0.0076 |      - |      - |      24 B |
         Pragma | Core |    Core |    34.118 ns |   0.4576 ns |   0.4281 ns |    34.259 ns |    33.437 ns |    34.792 ns |    3 | 0.0076 |      - |      - |      24 B |
     FromResult | Core |    Core |    46.953 ns |   1.2728 ns |   1.1905 ns |    46.467 ns |    45.674 ns |    49.868 ns |    5 | 0.0533 |      - |      - |     168 B |
          Yield | Core |    Core | 2,480.980 ns | 199.4416 ns | 575.4347 ns | 2,291.978 ns | 1,810.644 ns | 4,085.196 ns |   10 | 0.0916 |      - |      - |     296 B | 
```

注意：`FromResult`不能直接比较。

测试代码：

```
 [RankColumn, MinColumn, MaxColumn, StdDevColumn, MedianColumn]
   [ClrJob, CoreJob]
   [HtmlExporter, MarkdownExporter]
   [MemoryDiagnoser]
 public class BenchmarkAsyncNotAwaitInterface
 {
string context = "text context";
[Benchmark]
public int CompletedAwait()
{
    var t = new CompletedAwaitTest();
    var a = t.DoAsync(context);
    a.Wait();
    return t.Length;
}

[Benchmark]
public int Completed()
{
    var t = new CompletedTest();
    var a = t.DoAsync(context);
    a.Wait();
    return t.Length;
}

[Benchmark]
public int Pragma()
{
    var t = new PragmaTest();
    var a = t.DoAsync(context);
    a.Wait();
    return t.Length;
}

[Benchmark]
public int Yield()
{
    var t = new YieldTest();
    var a = t.DoAsync(context);
    a.Wait();
    return t.Length;
}

    [Benchmark]
    public int FromResult()
    {
        var t = new FromResultTest();
        var t2 = t.DoAsync(context);
        return t2.Result;
    }

public interface ITestInterface
{
    int Length { get; }
    Task DoAsync(string context);
}

class CompletedAwaitTest : ITestInterface
{
    public int Length { get; private set; }
    public async Task DoAsync(string context)
    {
        Length = context.Length;
        await Task.CompletedTask;
    }
}

class CompletedTest : ITestInterface
{
    public int Length { get; private set; }
    public Task DoAsync(string context)
    {
        Length = context.Length;
        return Task.CompletedTask;
    }
}

class PragmaTest : ITestInterface
{
    public int Length { get; private set; }
    #pragma warning disable 1998
    public async Task DoAsync(string context)
    {
        Length = context.Length;
        return;
    }
    #pragma warning restore 1998
}

class YieldTest : ITestInterface
{
    public int Length { get; private set; }
    public async Task DoAsync(string context)
    {
        Length = context.Length;
        await Task.Yield();
    }
}

    public interface ITestInterface2
    {
        Task<int> DoAsync(string context);
    }

    class FromResultTest : ITestInterface2
    {
        public async Task<int> DoAsync(string context)
        {
            var i = context.Length;
            return await Task.FromResult(i);
        }
    } 
```

}

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-05-05T17:03:10.020

我知道这是一个旧线程，也许这不会对所有用法都产生正确的影响，但是当我还没有实现方法时，以下内容尽可能接近能够简单地抛出 NotImplementedException，不改变方法签名。如果它有问题我很乐意知道它，但这对我来说几乎不重要：无论如何我只在开发时使用它，所以它的执行方式并不是那么重要。不过，我很高兴听到为什么这是一个坏主意，如果是的话。

```
public async Task<object> test()
{
    throw await new AwaitableNotImplementedException<object>();
} 
```

这是我添加的使之成为可能的类型。

```
public class AwaitableNotImplementedException<TResult> : NotImplementedException
{
    public AwaitableNotImplementedException() { }

    public AwaitableNotImplementedException(string message) : base(message) { }

    // This method makes the constructor awaitable.
    public TaskAwaiter<AwaitableNotImplementedException<TResult>> GetAwaiter()
    {
        throw this;
    }
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-11-17T10:52:40.887

就像对 Stephen's Answer 的更新一样，您不再需要编写`TaskConstants`类，因为有一个新的辅助方法：

```
 public Task ThrowException()
    {
        try
        {
            throw new NotImplementedException();
        }
        catch (Exception e)
        {
            return Task.FromException(e);
        }
    } 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-05-09T17:59:16.047

你可以试试这个：

```
public async Task<object> test()
{
await Task.CompletedTask; 
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-04-08T18:14:14.673

如果您已经链接到 Reactive Extension，您还可以执行以下操作：

```
public async Task<object> NotImplemented()
{
    await Observable.Throw(new NotImplementedException(), null as object).ToTask();
}

public async Task<object> SimpleResult()
{
    await Observable.Return(myvalue).ToTask();
} 
```

Reactive 和 async/await 本身都很棒，但它们也可以很好地配合使用。

需要的包括：

```
using System.Reactive.Linq;
using System.Reactive.Threading.Tasks; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-12-12T04:16:46.873

试试这个：

`[System.Diagnostics.CodeAnalysis.SuppressMessage("Await.Warning", "CS1998:Await.Warning")]`

请参阅： [https ://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.codeanalysis.suppressmessageattribute?view=netframework-4.7.2](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.codeanalysis.suppressmessageattribute?view=netframework-4.7.2)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-07-08T02:52:51.410

它可能发生在cs1998下面。

```
public async Task<object> Foo()
{
    return object;
} 
```

然后你可以在下面进行改造。

```
public async Task<object> Foo()
{
    var result = await Task.Run(() =>
    {
        return object;
    });
    return result;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-10-27T14:46:18.760

如果您没有任何要等待的内容，请返回 Task.FromResult

```
public Task<int> Success() // note: no "async"
{
  ... // Do not have await code
  var result = ...;
  return Task.FromResult(result);
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-12-06T15:28:31.540

以下是一些替代方法，具体取决于您的方法签名。

```
 public async Task Test1()
    {
        await Task.CompletedTask;
    }

    public async Task<object> Test2()
    {
        return await Task.FromResult<object>(null);
    }

    public async Task<object> Test3()
    {
        return await Task.FromException<object>(new NotImplementedException());
    } 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-07-30T07:40:12.197

全局配置/抑制它：

在 .editorconfig

```
# CS1998: Async method lacks 'await' operators and will run synchronously
dotnet_diagnostic.CS1998.severity = suggestion 
```

在一个普通的，不是高性能的应用程序中，不必要的异步的开销可以忽略不计，而对于常规编码人员来说，大脑关闭异步的好处更为重要。（+额外的编译器检查等）

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2021-09-20T19:46:39.487

抑制此警告的最干净的等待是`await Task.CompletedTask;`在投掷之前使用。这用作无操作

```
public async Task SomeMethod()
{
    await Task.CompletedTask;
    throw new NotImplementedException();
} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2022-02-13T13:19:59.347

使用产生的异常抛出

```
public async Task<object> DoSomethingAsync()
{
    throw await Task.FromException<NotImplementedException>(new NotImplementedException());
} 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2016-08-22T15:21:43.787

```
// This is to get rid of warning CS1998, please remove when implementing this method.
await new Task(() => { }).ConfigureAwait(false);
throw new NotImplementedException(); 
```

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2016-11-04T22:56:51.713

您可以从方法中删除 async 关键字并让它返回 Task；

```
 public async Task DoTask()
    {
        State = TaskStates.InProgress;
        await RunTimer();
    }

    public Task RunTimer()
    {
        return new Task(new Action(() =>
        {
            using (var t = new time.Timer(RequiredTime.Milliseconds))
            {
                t.Elapsed += ((x, y) => State = TaskStates.Completed);
                t.Start();
            }
        }));
    } 
```

# html - 图像未居中

> ID：13243985
> 
> 赞同：0
> 
> 时间：2012-11-06T03:36:06.683
> 
> 标签：html, css

我试图让我的徽标居中在页面中间，但它始终位于中心线的右侧。我是 CSS 新手，已经在谷歌上搜索了一个多小时的解决方案，但没有运气，这是我的代码：

```
#Container{
    width: 100%;
}

#logo{
    display: block;
    position: relative;
    width: 200px;
    margin: 0 auto;
}

#col{
    width: 170px;
    float: left;
} 
```

HTML

```
<!DOCTYPE html>
<html>
    <head>
        <title>tesing/title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <LINK href="CLL1.css" rel="stylesheet" type="text/css">
    </head>
    <body>  
        <div id="logo"><img src="images/Logo.jpg"/></div>
        <div id="Container">

        <div id="col">              
            <select name="thing">
                <option value=0>Category
             </select>

             <select name="model">
                 <option>Sub Category</option>
              </select>

             <select name="color">
                 <option>Sub Sub Category</option>
               </select>            
        </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:05:13.833

您的 CSS 将使`#logo`div 居中就好了。如果它看起来静止不动，请确保徽标位于您实际 200 像素宽的图像的中心。

中心的替代方法（使用绝对定位）：

```
#logo {
    width:200px;
    position:absolute;
    top:0;
    left:50%;
    margin-left:-100px; /* negative half of total width */              
} 
```

如果您需要绝对定位，这只是另一种居中方法。否则你`margin:0 auto`会工作。但请确保您的徽标位于 logo.jpg 的中心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T05:20:09.680

试试这个`#logo{ text-align:center;}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T05:22:50.543

Your image is probably wider than `200px`. If so, it'll overflow beyond the right side of the `#logo` div, and the centering will appear to be "off toward the right". You can see an example of this situation [here](http://jsfiddle.net/coltrane/vPx2H/)

To constrain the image to the width of the `#logo` div, just add this css:

```
#logo img { max-width: 100%; } 
```

[Here](http://jsfiddle.net/coltrane/vPx2H/1/) is the example, updated to include the image constraint above.

# ios - IOS 上的 SOAP - 考虑新方法

> ID：13243989
> 
> 赞同：0
> 
> 时间：2012-11-06T03:36:49.020
> 
> 标签：ios, soap, ssl, asihttprequest, afnetworking

大家好，我目前正在研究使用 SOAP 请求数据的 ios 应用程序。到目前为止，我一直在使用 ASIHTTPRequest 发送请求并处理响应。但我真的无法让客户端证书正常工作（是的，我尝试在 asihttprequest.m 中替换 if 语句中的代码，并且我还修复了许多其他错误）。

所以由于这个问题，事实上，这个框架不再受支持，我决定使用另一个框架。我正在考虑 AFNetworking，但将这个用于 SOAP 似乎并不容易，而且我并没有真正覆盖它的方法，因为我对整个 apple/objective-c 平台来说真的是新手。

那你们有什么建议？使用客户端证书向 WS 发送 SOAP 请求（和处理响应）的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T02:42:35.483

好的，我已经放弃了任何第 3 方库，并使用 NSURLConnection 和 NSMutableRequest 编写了整个 Web 服务接口。依赖第三方软件是愚蠢的。这是绝对可行的方法，尤其是如果您想使用可以使用的客户端证书

```
-(void)connection:(NSURLConnection *)con didReceiveAuthenticationChallenge .... 
```

# jquery - 使用 a 将图像附加到另一个图像上并获取坐标，使其可拖动和可删除

> ID：13243999
> 
> 赞同：2
> 
> 时间：2012-11-06T03:37:30.337
> 
> 标签：jquery, coordinates, draggable, appendto

在此处输入代码在此处输入代码'好的，所以我有一个图像，我正在制作另一个图像附加到它点击一个按钮。图像附加，我得到了位置的坐标。我还使用 jquery ui 制作了图像 draggalbe。每次添加图像时，还会生成一个 div，其中包含被单击图像的坐标和区域。在那个新生成的 div 中有一个删除按钮，可以删除该分区。我需要使该删除按钮也删除与该 div 对应的附加特定图像。我真的很感激任何关于这个谢谢的帮助。

```
<!DOCTYPE html>
<html>
    <head>
                <meta charset="utf-8" />
                    <title>MyMapImage</title>
                <style type="text/css">
                    #container {
                        background: green;
                        width: 596px;
                        height: 218px;
                        position: relative;
                        cursor: crosshair;

                    }
                    #container img {
                        position: absolute;  
                            opacity:0.95;
                    }

                    #container img.cross {
                        position: absolute;  

                    }
                </style>
                <style type="text/css">
        #draggable {font-size:x-large; border: thin solid black; width: 5em; text-align: center}
    </style>

                <script type="text/javascript">
                    $(document).ready(function() {
                    $(".WindSh").click(function(e) {
                        e.preventDefault();
                        var x = e.pageX - this.offsetLeft;
                        var y = e.pageY - this.offsetTop;
                        var img = $('<img>');
                        img.css('top', y-23);
                        img.css('left', x-23);
                        img.attr('src', 'cross.png');
                        img.attr('class','cross');
                        img.appendTo('#container');
                        img.draggable({
                        containment: "parent"
                        });
                    })

                });
                </script>
                <script type="text/javascript">

                    $(document).ready(function() {
                      $('.WindSh').click(function(e) {
                        var offset = $(this).offset();
                        var xz= e.clientX - this.offsetLeft;
                        var yz= e.clientY - offset.top;

                        if (parseInt(xz)>= 38 && parseInt(xz)<=200 && parseInt(yz)>=15 && parseInt(yz)<=98)
                        {
                        $('<div/>').append((xz) + ", " + (yz) + " ; " + "You have selected Region 1")
                        .appendTo('#coordinates');    
                        }
                        else if (parseInt(xz)> 200 && parseInt(xz)<=401 && parseInt(yz)>=15 && parseInt(yz)<=98)
                        {
                        $('<div/>').append ((xz) + ", " + (yz) + " ; " + "You have selected Region 2")
                        .appendTo('#coordinates');

                        }
                        else if (parseInt(xz)> 401 && parseInt(xz)<=540 && parseInt(yz)>15 && parseInt(yz)<=98)
                        {
                        $('<div/>').append ((xz) + ", " + (yz) + " ; " + "You have selected Region 3")
                        .appendTo('#coordinates');
                        }
                        else if (parseInt(xz)> 12 && parseInt(xz)<=200 && parseInt(yz)>98 && parseInt(yz)<=186)
                        {
                        $('<div/>').append ((xz) + ", " + (yz) + " ; " + "You have selected Region 4")
                        .appendTo('#coordinates');
                        }
                        else if (parseInt(xz)> 200 && parseInt(xz)<=401 && parseInt(yz)>98 && parseInt(yz)<=186)
                        {
                        $('<div/>').append ((xz) + ", " + (yz) + " ; " + "You have selected Region 5")
                        .appendTo('#coordinates');
                        }
                        else if (parseInt(xz)> 401 && parseInt(xz)<=540 && parseInt(yz)>98 && parseInt(yz)<=186)
                        {
                        $('<div/>').append ((xz) + ", " + (yz) + " ; " + "You have selected Region 6")
                        .appendTo('#coordinates');
                        }   
                      });
                    });
                </script>
    <script type="text/javascript">
        $(document).ready(function(){
            $('.hide').click(function(){
            $('.cross').hide();
            });
        });
    </script>

    </head>
    <body
    <div id="container"><img class="WindSh" src="WindShield.png"></div>
    <div>Coordinates x,y: <span id="coordinates"></span></div>
    <input type="button" class="hide" value="hide">

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:27:23.403

所以我必须让这个图像 x 附加在另一个图像 y 之上。图像 x 应该给出附加在图像 y 上的坐标。2，当附加图像 x 时，它会打开另一个 div，其中显示附加图像 x 的坐标。在那个 div 中也有一个删除按钮。删除按钮当前删除该行，但我也希望该删除按钮删除与该 div 对应的附加图像。谢谢