# StackOverflow 问答 13141000-13141999

# c# - 在类库的 App.config 中使用 ConfigurationManager.GetSection

> ID：13141003
> 
> 赞同：2
> 
> 时间：2012-10-30T14:21:31.553
> 
> 标签：c#, c#-4.0, configuration, app-config

我正在编写一个类库，该类库在其 app.config 中具有设置，最终将由少数其他 .NET 应用程序调用。为了从中获取设置，我正在使用 ConfigurationManager.GetSection，例如：

```
MyConfiguration process = (MyConfiguration)ConfigurationManager.GetSection("MyGroup/processes"); 
```

我发现调用应用程序必须在其自己的项目中具有相同的 app.config 才能使其正常工作，否则类库将抛出`NullReferenceException`. 我只是想知道这是否是正常行为，或者是否有任何方法可以确保只有类库需要 app.config 可用？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:27:37.797

您的类库将始终尝试从引用它的主应用程序的 app.config 中读取。它根本不会使用您的类库配置文件。

# ember.js - Ember.js - 登录示例：Ember.run.later

> ID：13141006
> 
> 赞同：2
> 
> 时间：2012-10-30T14:21:48.097
> 
> 标签：ember.js

我出于自己的需要复制了这个[登录示例。](http://jsfiddle.net/workmanw/2znn2/)它运行良好。但我在问自己：为什么我需要这`Ember.run.later(this, this._serverLogin, 100);`条线？就像评论说的那样，它只是为了模拟延迟。行。但是，如果我将其更改为：

```
// Create the login controller
  MyApp.loginController = Ember.Object.create({
    username: '',
    password: '',
    isError: false,

    tryLogin: function() {
      if(this.get('username') === MyApp.USERNAME &&
         this.get('password') === MyApp.PASSWORD) {
        this.set('isError', false);
        this.set('username', '');
        this.set('password', '');
        MyApp.stateManager.send('loginSuccess');
      } else {
        this.set('isError', true);
        MyApp.stateManager.send('loginFail');
      }
    },
  }); 
```

没有`Ember.run.later(this, this._serverLogin, 100);`，我得到`Uncaught Error: <Ember.StateManager:ember270> could not respond to event loginSuccess in state loggedOut.awaitingCredentials.`所以我想可能我需要这个延迟才能让 stateManager 在之前或类似的东西发生变化。但是当我运行旧代码时`Ember.run.later(this, this._serverLogin, 0);`它仍然有效。那么，有什么不同呢？[ember](http://docs.emberjs.com/symbols/Ember.run.html#method=.later)的文档没有给出任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:01:39.380

这是因为您在调用( / )`StateManager`时仍处于早期状态设置过程。`sendEvent``loginSuccess``loginFailed`

通过延迟发送 w/ 的事件`Ember.run.later`，您的代码将在下一个运行循环中处理，并正确设置状态。

* * *

话虽如此，您正在以非常古老的方式使用 Ember。你应该看看[管理应用程序路由的最先进的方法](http://emberjs.com/guides/routing/)。

# xcode - 如何在xcode中跟踪程序执行？

> ID：13141008
> 
> 赞同：2
> 
> 时间：2012-10-30T14:21:58.437
> 
> 标签：xcode

我想知道如何使用 xcode 跟踪程序执行我想知道现在调用哪个方法，就像在方法中添加断点时一样

有没有办法在不添加断点的情况下做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:29:28.823

有几个与调试器相关的[WWDC 2012 视频](https://developer.apple.com/videos/wwdc/2012/)，其中一个向您展示了如何添加在运行调试器命令后自动继续的断点。这比添加日志记录更可取，因为不需要继续执行 write-compile-debug 循环。

您可以向调用以下断点的断点添加操作：

```
expr (void)NSLog(@"self=%p Method1", self); 
```

话虽如此，我仍然使用日志调用，但我使用自己的日志框架，它会自动打印类和方法的名称（使用`__FUNCTION__`编译器生成的字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:15:01.327

经过搜索，我发现最简单的解决方案是将以下代码放入您的方法中：

```
NSLog(@"<%@:%@:%d>", NSStringFromClass([self class]), NSStringFromSelector(_cmd), __LINE__); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:24:22.023

NSLog(@"检查 1 - 2 ！");

将向您显示日志跟踪；-)

# c# - CLR 中的托管堆

> ID：13141010
> 
> 赞同：2
> 
> 时间：2012-10-30T14:22:04.473
> 
> 标签：c#, memory-management, .net-4.0, clr

我在 .NET 中读到了关于 CLR 的内容：

当 CLR 加载时，堆被划分为 SOH 和 LOH。

1.  当应用程序启动时，CLR 根据应用程序的大小将堆分配给应用程序。

2.  LOH 堆具有 Gen0、Gen1 和 Gen2 区域。

这里 A 类的所有对象都分配在 Gen0 上，

**问题**

1.  CLR 如何知道堆中应用程序占用的大小？
2.  假设 CLR 为**Gen0**区域分配了 4K 堆内存。鉴于下面的代码，这个单线程是否可以在 Gen0 上使用完整的 4K 内存？

    ```
    collect = new List();
    while(true)
    {
        collect.Add(new A());
        new A();
        new A();
    }

    class A
    {
        int a = 0, b = 0;
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:37:49.183

1.  我相信这是通过计算所有声明字段的大小来确定的，考虑到它的类型。有关更多详细信息，请参阅 MSDN [“分配内存”](http://msdn.microsoft.com/en-us/library/f144e03t.aspx)
2.  关于 MSDN 论文[“自动内存管理”](http://msdn.microsoft.com/en-us/library/f144e03t.aspx)所有新对象（正如[Brian Rasmussen](https://stackoverflow.com/users/38206/brian-rasmussen)在下面的评论中指出的那样 - 世代仅适用于 SOH，在 LOH 中创建的大对象不是世代修复）最初创建的`Gen0`并且只有那些在应用程序生命周期内存活的对象才会被搬到`Gen1`. 但有人提到，如果`Gen0`是满的——GC 会执行垃圾收集来清理`Gen0`，如果它仍然是满的——所有的新对象都将在`Gen1`.

# ruby-on-rails - 将默认值添加到已创建的列

> ID：13141011
> 
> 赞同：1
> 
> 时间：2012-10-30T14:22:06.167
> 
> 标签：ruby-on-rails

我正在构建一个 Rails 3.2.6 应用程序，我需要在已创建的名为 tasks 的表上的列中添加一个默认值。我如何通过迁移来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:29:00.667

使用[`change_column(table_name, column_name, type, options = {})`](http://apidock.com/rails/v3.2.8/ActiveRecord/ConnectionAdapters/SchemaStatements/change_column)：

```
def up
  change_column :tasks, :my_column, :integer, :default => 1
end 
```

# mysql - 由于 AUTO_INCREMENT，MySQL LAST_INSERT_ID() 未更新

> ID：13141013
> 
> 赞同：2
> 
> 时间：2012-10-30T14:22:12.293
> 
> 标签：mysql, sql, database, triggers, insert

> **可能重复：**
> [mysql 在触发器中获取 last_insert_id()](https://stackoverflow.com/questions/6499389/mysql-getting-last-insert-id-in-a-trigger)

我让 MySQL`TRIGGER`触发`AFTER INSERT ON`了一个表 ( `my_table`)。

我希望使用以下`PRIMARY_KEY`方法将受 影响的行存储`TRIGGER`在变量中：

```
SET  @user_id =  LAST_INSERT_ID(); 
```

由[这个 stackoverflow 链接](https://stackoverflow.com/questions/3837990/last-insert-id-mysql)支持。并且似乎正在工作。

但是，每次将值存储为`0`.

从[这个 stackoverflow 链接](https://stackoverflow.com/questions/10246412/last-insert-id-always-returns-0-rmysql-separate-connection-issue)，我相信这是由于`my_table`设置为`AUTO_INCREMENT`.

```
SET  @user_id =  LAST_INSERT_ID(); 
```

克服这个问题的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:36:15.323

LAST_INSERT_ID() 函数仅返回自动生成的 ID 值。如果您自己生成 ID，则 LAST_INSERT_ID() 不会返回它。

此外，触发器在另一个会话中工作。但是 LAST_INSERT_ID() 仅适用于当前会话-插入了新 ID，例如-

```
-- NULL means that ID will be generated by server
INSERT INTO table1(id) VALUES(NULL);
SELECT LAST_INSERT_ID();
> 1 
```

# php - TYPO3 with TemplaVoila - 权限问题

> ID：13141016
> 
> 赞同：0
> 
> 时间：2012-10-30T14:22:27.693
> 
> 标签：php, typo3

当我作为管理员用户尝试创建任何内容时，我不断收到此错误：

> “抱歉，您没有执行此更改的适当权限”

这似乎是 TemplaVoila 上的某种权限错误。任何想法如何解决它？

我正在使用`TYPO3 4.7.5`和`TempleVoila 1.7.0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:00:01.570

在 sql 数据库中执行以下代码：`ALTER TABLE pages ADD t3ver_swapmode tinyint(4) NOT NULL default '0'`如[本网站](http://www.codeterrorizer.com/typoscript/typo3-4-7-templavoila-templavoila-sorry-you-didnt-have-proper-permissions-to-perform-this-change)所述。

# c# - Nhibernate 标准按子集合属性排序

> ID：13141027
> 
> 赞同：0
> 
> 时间：2012-10-30T14:23:09.547
> 
> 标签：c#, nhibernate

谁能帮助我如何执行以下休眠条件，以便 Process 类按 SourceSystem.Name 排序。

```
public abstract class Process : DomainObject<int>
{
    public virtual IList<Paramater> Parameters  { get; set; }   
}

public class Paramater : DomainObject<int>
{
    public virtual SourceSystem SourceSystem     { get; set; }  
}

public class SourceSystem : DomainObject<int>
{
    public virtual string Name { get; set; }
}

process  = _session
.CreateCriteria<Process>()
.Add(Restrictions.Eq("Id", loadingProcessId))
.UniqueResult<Process>(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:16:04.813

```
process  = _session.CreateCriteria<Process>()
    .Add(Restrictions.Eq("Id", loadingProcessId))
    .CreateCrtieria("Parameters")
    .CreateCrtieria("SourceSystem", "SourceSystem")
    .AddOrder(Order.Asc("SourceSystem.Name"))
    .UniqueResult<Process>(); 
```

# javascript - 为 ajax .done 中的函数提供了哪些参数？

> ID：13141028
> 
> 赞同：30
> 
> 时间：2012-10-30T14:23:09.183
> 
> 标签：javascript, ajax, jquery, typescript

我有以下内容：

```
 $.ajax(link.href,
    {
        cache: false,
        dataType: 'html'
    })
        .done(onDialogDone)
        .fail(onDialogFail); 
```

这工作正常并调用 onDialogDone 。但是，我应该期望看到哪些参数提供给 onDialogDone 以及我应该期望看到 onDialogFail 的哪些参数。

我问的原因是因为我使用打字稿，并且我想在定义 onDialogDone 和 onDialogFail 时提供正确的参数。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-30T14:33:49.863

和 的参数与函数对应的 和参数的参数相同`.done()`，即：`.fail()``success:``error:`[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)

```
.done( function(data, textStatus, jqXHR) { ... } ); 
```

和

```
.fail( function(jqXHR, textStatus, errorThrown) { ... } ); 
```

出于打字稿的目的，`textStatus`and`errorThrown`是字符串，`jqXHR`是`Object`，并且`data`取决于远程服务器向您发送的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T14:34:34.617

传递给`done`处理程序的三个参数是：

```
data, textStatus, jqXHR 
```

你可以在这里阅读更多：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

1.  `data`是响应消息
2.  `textStatus`将永远在`done`功能上取得成功
3.  `jqXHR`是原始 XMLHttpRequest

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T14:28:34.520

看看[这个](https://github.com/jquery/api.jquery.com/issues/49)：

方法（jqXHR 和 Deferred 实现的一部分，此处显示仅为清晰起见）

```
 .ajax().always(function(a, textStatus, b){}); 
```

替换 jQuery 1.8 中已弃用的方法 .complete()。为响应成功的交易，参数与 .done() 相同（即 a = data，b = jqXHR），对于失败的交易，参数与 .fail() 相同（即 a = jqXHR，b = errorThrown）。这是上述完整回调函数的另一种构造。有关实现细节，请参阅 deferred.always()。

```
 .ajax().done(function(data, textStatus, jqXHR){}); 
```

替换 jQuery 1.8 中已弃用的方法 .success()。这是上述成功回调函数的另一种构造。有关实现细节，请参阅 deferred.done()。

```
 .ajax().fail(function(jqXHR, textStatus, errorThrown){}); 
```

替换 jQuery 1.8 中已弃用的方法 .error()。这是上述完整回调函数的另一种构造。有关实现细节，请参阅 deferred.fail()。

```
 .ajax().then(function(data, textStatus, jqXHR){}, function(jqXHR, textStatus, errorThrown){}); 
```

结合了 .done() 和 .fail() 方法的功能。有关实现细节，请参阅 deferred.then()。

```
 .ajax().pipe(function(data, textStatus, jqXHR){}, function(jqXHR, textStatus, errorThrown){}); 
```

结合了 .done() 和 .fail() 方法的功能，允许操作底层的 Promise。有关实现细节，请参阅 deferred.pipe()。

# python - 与 paramiko 永远等待

> ID：13141031
> 
> 赞同：1
> 
> 时间：2012-10-30T14:23:21.237
> 
> 标签：python, paramiko

> **可能重复：**
> [在 Paramiko 中运行交互式命令](https://stackoverflow.com/questions/373639/running-interactive-commands-in-paramiko)

我对 Python 很陌生。我正在尝试使用 paramiko 在远程计算机上运行批处理文件：

```
import paramiko
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect("host", username="uname", password="pwd", allow_agent = False)
i, o, e = ssh.exec_command("c://test.bat")
print o.read() 
```

问题是远程批处理文件在某个时候正在等待输入（暂停），所以我在读取命令之后被卡住了，什么也没有打印出来。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:31:34.903

如果 paramiko 不是严格要求，您可以考虑使用[fexpect的](http://ilogue.com/jasper/blog/fexpect--dealing-with-prompts-in-fabric-with-pexpect/)[织物](http://fabric.readthedocs.org/)：

```
from fexpect import expect, expecting, run 

prompts = []
prompts += expect('What is your name?','John')

with expecting(prompts):
    run('c://test.bat') 
```

# ruby - 使用 JQuery 日历确定到达特定日期所需的点击量？

> ID：13141035
> 
> 赞同：0
> 
> 时间：2012-10-30T14:23:31.587
> 
> 标签：ruby, watir

我有一个项目开始日期的 jquery 日历。

使用 Watir（自动浏览器驱动程序，ruby 的 gem），我有一个我想输入的设定日期。

日历开始日期始终是今天的日期，无论使用日期是什么。我想知道 ruby​​ 是否有一种方法可以处理今天的日期，并使用用户提供的指定日期来计算它们之间的月份差。

这是日历插件的示例：http: [//jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

例子：

今天的日期是 2012 年 10 月 30 日，如果有一个项目要在 2012 年 12 月 20 日开始，那就是从现在开始的 2 个月，所以点击下个月按钮 2 次。

有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T21:13:20.617

以下是我使用 JSdatepicker 处理类似情况的方法：

```
$today = Time.now.strftime("%e").gsub(" ", "") #one digit day of month without leading space

@browser.text_field(:id => /dateAvailable/).click
Watir::Wait.until(60) {@browser.div(:id => /dateAvailable_popup_cal/).td(:text => $today).exists?}
@browser.div(:id => /dateAvailable_popup_cal/).td(:text => $today).click 
```

1.  设置或获取日期。
2.  单击触发 JSDatePicker 对象的 text_field
3.  等到日历实际弹出
4.  显示当前月份，因此选择今天的日期编号。

在您的情况下，您还需要设置月份。无论是提示用户，还是选择“今天”，原理都是一样的：

```
$month = Date::MONTHNAMES[Date.today.month] #etc 
```

做出大量假设的伪代码（仅未来日期、日历上显示为文本的月份名称等）：

```
while !@jquerytablewindow.text.include?($month)
     next_month_button.click
end 
```

与每月计数相比，我没有看到我的方法有什么特别的优势，除非当然我们在日历上增加了一个月，并且您仍然希望您的代码正常工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:47:20.347

你可以这样做：

```
#End date converted to date object
specified_date = '20/12/2012'
end_date = Date.parse(specified_date)

#Start date (today - 30/10/2012)
today  = Date.today

#Determine difference in months
number_of_months_up_to_today = (today.month + today.year * 12)
number_of_months_up_to_end = (end_date.month + end_date.year * 12)
clicks_required = number_of_months_up_to_end - number_of_months_up_to_today
#=> 2 
```

基本上它是计算自 0 年以来的月数，然后找出差异。

# javascript - OnSubtreeModified 添加我的功能

> ID：13141036
> 
> 赞同：2
> 
> 时间：2012-10-30T14:23:34.043
> 
> 标签：javascript, jquery, dom, dynamic-html

我使用 pie.js (http://css3pie.com/) 一个允许我在 ie6+ 上使用 css3 的库。我在 document.ready 上应用 pie.js ：

```
 $(document).ready(function(){
        if (window.PIE) {
            $('.vexClass, #vexId').each(function(){
                PIE.attach(this);
            });
        }

    }); 
```

我的问题是，当 dom 被修改时，我应用 pie.js 的元素渲染效果不佳，因此我必须在修改 dom 时加载将 pie.js 应用到我的元素的函数，并且仅适用于使用 OnSubtreeModified 修改的部分或另一种技术...例如，我有一个在加载 dom 时显示的面板，在该面板中，我有一个按钮正在扩展另一个面板，其中包含我想应用 pie.js 的按钮和其他元素，因此对于 main面板我应用了 pie.js 的所有元素都呈现正常，但扩展面板中的元素 pie.js 未应用：| 那么，当为扩展面板修改 dom 时，如何注入该 pie.js 呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:43:08.657

如果您使用 wicket，唯一的方法是通过`Wicket.Ajax.registerPostCallHandler` 在您的项目中添加这个，每次完成 ajax 请求时，您的饼图都会被应用。

```
window.document.ready = function() {
    Wicket.Ajax.registerPostCallHandler(pieStarter);
}
function pieStarter() {

    if (window.PIE) {
        go();
    }
}
function go() {
    $(''.vexClass, #vexId'').each(function() {
        PIE.attach(this);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T15:04:04.520

您是否从 Ajax 调用中获取数据？如果是这样，您需要在回调中添加饼图。不可能（至少 afaik）在给定时间没有的东西上添加任何东西。
如果您需要在回调中添加饼图，您应该为此创建一个单独的函数。您可以为该函数提供一个 dom 节点，它会检​​查每个子节点是否应用了 pie，如果没有应用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T17:42:30.180

您不能使用该`DOMSubtreeModified`事件，因为您所针对的旧版本的 IE 不支持此事件。但是，您可以通过使用此答案[Detect changes in the DOM](https://stackoverflow.com/questions/3219758/detect-changes-in-the-dom) with this script 来解决此问题：

```
$(document).ready(function () {

    function applyPIE() {
        if (window.PIE) {
            $('.vexClass, #vexId').not('[data-pie=attached]').each(function(){
                PIE.attach(this);
                $(this).attr('data-pie', 'attached');
            });
        }
    }

    onDomChange(function(){ 
        alert('document updated, applying PIE now');
        applyPIE();
    });

    $('#link').click(function () {           
        $('body').append('<h4>added content</h4>');
    });

    applyPIE();

}); 
```

它创建了一个本地函数`applyPIE()`，该函数在文档就绪时调用，并且每次 DOM 更改时都会被调用——过滤掉已处理的元素。您可能希望扩展`.vexClass, #vexId`选择器集以满足您的需求。

JSFiddle：http: [//jsfiddle.net/hongaar/y3FaM/1/](http://jsfiddle.net/hongaar/y3FaM/1/)

# ruby-on-rails-3 - 在 rails_admin 中更新用户属性而不更改密码

> ID：13141038
> 
> 赞同：0
> 
> 时间：2012-10-30T14:23:45.910
> 
> 标签：ruby-on-rails-3, devise, rails-admin

在我的应用程序中，我使用 devise 生成用户模型，添加一些属性，如工作、角色……。在 rails_admin 页面，当编辑用户时，我只显示字段：电子邮件、工作、角色、身份证（不包括密码和密码确认字段）当我点击保存时，它显示错误，因为密码短于 6 个字符。在控制台中，如果我尝试

```
User.last.update_attributes(:role => "admin", "idcard" => "1233131") 
```

它会得到同样的错误！我怎样才能解决这个问题？因为 rails_admin（我认为并且可以肯定）没有在 registrations_controller 中使用 update 来更新用户！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:50:15.613

哦耶！我只是通过删除两个用户模型验证来解决我自己的问题

```
validates :password, :length => { :minimum => 6 }
validates :password, :confirmation => true 
```

当我输入

```
User.first.update_attributes(:email => "abc@yahoo.com") 
```

有效！！！

# jpa - HyperJAXB 和 ID/IDREF

> ID：13141039
> 
> 赞同：2
> 
> 时间：2012-10-30T14:23:51.363
> 
> 标签：jpa, jaxb, wsdl, hyperjaxb, idref

在 HyperJAXB3 中为 JAXB 2.x 使用 ID 和 IDREF 是否有任何更新？ [HyperJAXB 和 IDREF](https://stackoverflow.com/questions/2993651/hyperjaxb-and-idrefs)

我已向我的 IDREF 元素添加了一个 baseType 绑定，并且在所有者对象上生成了正确的类型，但生成的类无法编译，因为解组操作返回一个对象。

```
 public void setCustomerObject(String target) {
        if (target!= null) {
            setCustomer(JAXBContextUtils.unmarshal(CustomerObjectContextPath, target));
        }
    } 
```

我想使用 IDREFs 的原因是避免在我的 WSDL 中循环引用，所以如果有其他解决方案或较少手动的解决方案，请告诉我。

# hibernate - 如何在 Tapestry5 中使用自定义 hibernate.cfg.xml 文件路径

> ID：13141043
> 
> 赞同：4
> 
> 时间：2012-10-30T14:23:56.080
> 
> 标签：hibernate, tapestry

如何更改`hibernate.cfg.xml`挂毯应用程序中休眠配置文件的名称或路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T14:23:56.080

在类`AppModule`中有两个方法需要更改或创建：

1.  `contributeApplicationDefaults`, 禁用默认配置
2.  `contributeHibernateSessionSource`提供你自己的。

```
public static void contributeApplicationDefaults(
         MappedConfiguration<String, Object> configuration) {

    // Disable call to hibernate.configure() to call it manually 
    configuration.add(HibernateSymbols.DEFAULT_CONFIGURATION, "false");
} 
```

```
public void contributeHibernateSessionSource(
        OrderedConfiguration<HibernateConfigurer> configurer) {

    configurer.add("hibernate-session-source", new HibernateConfigurer() {
        public void configure(org.hibernate.cfg.Configuration configuration) {
            configuration.configure("my-hibernate.cfg.xml");
        }
    });
} 
```

id`hibernate-session-source`是任意的，任何东西似乎都有效。在[这个讨论](http://tapestry.1045711.n5.nabble.com/Choosing-hibernate-configuration-td5081667.html)中，建议选择一个独特的。在 Tapestry 5.3.6 中测试

# javascript - javascript中的错误

> ID：13141053
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:24:27.077
> 
> 标签：javascript, list

我正在尝试使用 JavaScript 获取可折叠的链接列表。

但是，Java 文档中不断出现错误，我不知道为什么：

```
var css Node = document.createElement('link');
cssNode.setAttribute('rel', 'stylesheet');
cssNode.setAttribute('type', 'text/css');
cssNode.setAttribute('href', 'javascript-overrides.css');
document.getElementsByTagName('head')[0].appendChild(cssnode);

function toggle(toggler) {

    if (document.getElementById) {
        targetElement = toggler.nextsibling;
        if (targetElement.classname == undefined) {
            targetElement = toggler.nextsiblig.nextsibling;
        }
        if {
            targetElement.style.display == "block") {
            targetElement.style.display = "none";
        }
        else {
            targetElement.style.display = "block"
        }
    }
}

function swap(targetid) {
    if (document.getElementById) {
        target = document.getElementById(targetid);
        if (target.style.display == "block") {
            target.style.display = "none";
        }
        else {
            target.style.display = "block";
        }
    }
} 
```

第 15 行的错误是状态`"if ( document.getElementById){"`，但对我来说似乎很好。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:30:41.240

[jsLint](http://www.jslint.com/)返回 3 个错误（假设您的第一行是`var cssNode`）

*   `if (targetElement.classname === undefined)`与 === ( )比较未定义
*   `if { targetElement.style.display == "block")}`必须是如果**(**
*   缺少分号 ( `targetElement.style.display = "block"`)

Broken [Fiddle here](http://jsfiddle.net/SP8vM/1/)（按下 jsLint 按钮查看错误）

在这里固定[小提琴](http://jsfiddle.net/SP8vM/)

# sql - 根据条件从表中删除某些行并将 varchar 转换为日期

> ID：13141055
> 
> 赞同：0
> 
> 时间：2012-10-30T14:24:31.863
> 
> 标签：sql, oracle

我知道这个问题可能有一个微不足道的答案。当满足某些条件时，我想从一个巨大的表中删除某些行。条件为 on `drdate`（varchar 字段），它保存日期信息，因此需要对其进行转换。该表很大，理想情况下我不想花太多时间来运行查询。

```
delete from products 
where (to_date('drdate','mm/dd/yyyy')) > (to_date('01/01/2011','mm/dd/yyyy')) 
```

这将返回：

*SQL 错误：ORA-01858：在应为数字 01858.00000 的地方发现了一个非数字字符*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:07:01.837

试试这个：

```
delete from products 
where (to_date(drdate,'mm/dd/yyyy')) > (to_date('01/01/2011','mm/dd/yyyy')) 
```

如评论中所述，引号导致函数评估字符串值**“drdate”**而不是列中的值`drdate`。

# java - jrockit 确定性 gc

> ID：13141060
> 
> 赞同：0
> 
> 时间：2012-10-30T14:25:05.040
> 
> 标签：java, garbage-collection, jrockit

是否允许所有垃圾都将通过选项收集`-Xgc:deterministic`并且非常大`-XpauseTarget=5000`。

我不太关心性能，我需要确保收集每个垃圾对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:41:30.743

这是它在文档中所说的：

垃圾收集器针对非常短且确定性的暂停时间进行了优化。垃圾收集器的目标是将垃圾收集暂停保持在给定的暂停目标以下。`How well it will succeed depends on the application and the hardware.`例如，已在具有 1 GB 堆和收集时平均 30% 或更少的实时数据的应用程序上验证了 30 毫秒的暂停目标，该应用程序在以下硬件上运行：

1.  2 个英特尔至强 3.6 GHz、2 MB 二级缓存、4 GB RAM
2.  4 个英特尔至强 2.0 GHz、0.5 MB 二级缓存、8 GB RAM

此外，您可能希望使用以下方法限制 GC 线程：

```
-XXgcthreads:<# threads> 
```

每个服务器核心的线程数应为 1 个线程。

# javascript - 每次加载页面时倒回 HTML 5 视频

> ID：13141062
> 
> 赞同：0
> 
> 时间：2012-10-30T14:25:13.123
> 
> 标签：javascript, jquery

我想确保我的 HTML 5 视频在用户进入页面时从头开始运行。

目前，第一个视频运行良好，但如果用户在播放时关闭弹出窗口，视频将从用户再次打开弹出窗口时离开的位置开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:30:04.407

尝试类似的东西

```
document.getElementById('vid').onload = function(){
    this.currentTime = 0;
}; 
```

# c# - Form.Shown 之后如何抛出句柄错误？

> ID：13141065
> 
> 赞同：1
> 
> 时间：2012-10-30T14:25:21.263
> 
> 标签：c#, winforms, debugging

我有一个问题，我们有一些非常复杂的代码抛出 Win32Exception

> 创建窗口句柄时出错。

查看调用堆栈，我看到堆栈的底部来自

```
MainForm_ShownEvent(object sender, EventArgs e)//I Had a type-o here...arguments were wrong
{
    someControl.Parent = contentPanel;//call starts here
} 
```

堆栈的顶部来自自定义事件。事件处理程序位于 MainForm

```
anotherControl_RefreshEvent(object sender, PhysDocEventArgs e)
{
   Text = titleBarText;//win32 exception
} 
```

这怎么可能？我们不能保证一旦`Form.Shown`被调用就会创建一个句柄吗？

**更新**

立即窗口告诉我`this.Handle`是 0。`this`MainForm 对象在哪里。

**堆栈跟踪**（这是 19 页长，不得不删除一些）

```
 System.Windows.Forms.NativeWindow.CreateHandle(System.Windows.Forms.CreateParams cp)    
    System.Windows.Forms.Control.CreateHandle() 
    System.Windows.Forms.Form.CreateHandle()    
    DevExpress.XtraEditors.XtraForm.CreateHandle()  
    System.Windows.Forms.Control.RecreateHandleCore()   
    System.Windows.Forms.Form.RecreateHandleCore()  
    System.Windows.Forms.Form.OnTextChanged(System.EventArgs e) 
    System.Windows.Forms.Control.Text.set(string value) 
    System.Windows.Forms.Form.Text.set(string value)    
>   BHCS.ECC.PhysDoc.UI.Forms.MainForm.TemplateBaseControl_RefreshEvent(object sender = {BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl}, BHCS.ECC.PhysDoc.BL.PhysDocEventArgs e = {BHCS.ECC.PhysDoc.BL.PhysDocEventArgs}) Line 46    C#
    BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RefreshControls() Line 323 C#
    BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RunCreateControlProcess(bool destroyControls = false, bool reload = false, bool createControls = false, BHCS.ECC.PhysDoc.UI.LoadingForm loading = null) Line 1020  C#
    BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.docNode_Resize(object sender = {BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl}, System.EventArgs e = {System.EventArgs}) Line 683 C#
    System.Windows.Forms.Control.OnResize(System.EventArgs e)   
    System.Windows.Forms.UserControl.OnResize(System.EventArgs e)   
    BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.OnResize(System.EventArgs e = {System.EventArgs}) Line 140   C#
    System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
    System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
    System.Windows.Forms.Control.UpdateBounds() 
    System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
    System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
    System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
    System.Windows.Forms.UserControl.WndProc(ref System.Windows.Forms.Message m)    
    System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
    System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
    System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
    [Native to Managed Transition]  
    [Managed to Native Transition]  
    System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = Width) 
    System.Windows.Forms.Control.SetBounds(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified) 
    System.Windows.Forms.Control.Width.set(int value)   
    BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RefreshControls() Line 332 C#
    BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RunCreateControlProcess(bool destroyControls = false, bool reload = false, bool createControls = false, BHCS.ECC.PhysDoc.UI.LoadingForm loading = null) Line 1020  C#
    BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.docNode_Resize(object sender = {BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl}, System.EventArgs e = {System.EventArgs}) Line 683 C#
    System.Windows.Forms.Control.OnResize(System.EventArgs e)   
    System.Windows.Forms.UserControl.OnResize(System.EventArgs e)   
    BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.OnResize(System.EventArgs e = {System.EventArgs}) Line 140   C#
    System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
    System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
    System.Windows.Forms.Control.UpdateBounds() 
    System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
    System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
    System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
    System.Windows.Forms.UserControl.WndProc(ref System.Windows.Forms.Message m)    
    System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
    System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
    System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
    [Native to Managed Transition]  
    [Managed to Native Transition]  
    System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = Width) 
    System.Windows.Forms.Control.SetBounds(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified) 
    System.Windows.Forms.Control.Width.set(int value)   
    BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RefreshControls() Line 332 C#
    BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RunCreateControlProcess(bool destroyControls = false, bool reload = false, bool createControls = false, BHCS.ECC.PhysDoc.UI.LoadingForm loading = null) Line 1020  C#
    BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.docNode_Resize(object sender = {BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl}, System.EventArgs e = {System.EventArgs}) Line 683 C#
    System.Windows.Forms.Control.OnResize(System.EventArgs e)   
    System.Windows.Forms.UserControl.OnResize(System.EventArgs e)   
    BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.OnResize(System.EventArgs e = {System.EventArgs}) Line 140   C#
    System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
    System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
    System.Windows.Forms.Control.UpdateBounds() 
    System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
    System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
    System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
    System.Windows.Forms.UserControl.WndProc(ref System.Windows.Forms.Message m)    
    System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
    System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
    System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
    [Native to Managed Transition]  
    [Managed to Native Transition]  
    System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = Height)    
    System.Windows.Forms.Control.SetBounds(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified) 
    System.Windows.Forms.Control.Height.set(int value)  
    BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.RefreshSize(bool setAnchorAndWidth = false) Line 109 C#
    BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.ctrl_Resize(object sender = {System.Windows.Forms.Panel}, System.EventArgs e = {System.EventArgs}) Line 442  C#
    System.Windows.Forms.Control.OnResize(System.EventArgs e)   
    System.Windows.Forms.Panel.OnResize(System.EventArgs eventargs) 
    System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
    System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
    System.Windows.Forms.Control.UpdateBounds() 
    System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
    System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m) 
```

（删除部分）

```
BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RefreshControls() Line 332 C#
BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RunCreateControlProcess(bool destroyControls = false, bool reload = false, bool createControls = false, BHCS.ECC.PhysDoc.UI.LoadingForm loading = null) Line 1020  C#
BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.docNode_Resize(object sender = {BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl}, System.EventArgs e = {System.EventArgs}) Line 683 C#
System.Windows.Forms.Control.OnResize(System.EventArgs e)   
System.Windows.Forms.UserControl.OnResize(System.EventArgs e)   
BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.OnResize(System.EventArgs e = {System.EventArgs}) Line 140   C#
System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
System.Windows.Forms.Control.UpdateBounds() 
System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
System.Windows.Forms.UserControl.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = Height)    
System.Windows.Forms.Control.SetBounds(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified) 
System.Windows.Forms.Control.Height.set(int value)  
BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.RefreshSize(bool setAnchorAndWidth = false) Line 109 C#
BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.ctrl_Resize(object sender = {System.Windows.Forms.Panel}, System.EventArgs e = {System.EventArgs}) Line 442  C#
System.Windows.Forms.Control.OnResize(System.EventArgs e)   
System.Windows.Forms.Panel.OnResize(System.EventArgs eventargs) 
System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
System.Windows.Forms.Control.UpdateBounds() 
System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = Height)    
System.Windows.Forms.Control.SetBounds(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified) 
System.Windows.Forms.Control.Height.set(int value)  
BHCS.ECC.PhysDoc.Plugins.Prompt.BL.PanelPrompt.pnlOuter_Layout(object sender = {System.Windows.Forms.Panel}, System.Windows.Forms.LayoutEventArgs e = {System.Windows.Forms.LayoutEventArgs}) Line 164  C#
System.Windows.Forms.Control.OnLayout(System.Windows.Forms.LayoutEventArgs levent = {System.Windows.Forms.LayoutEventArgs}) 
System.Windows.Forms.ScrollableControl.OnLayout(System.Windows.Forms.LayoutEventArgs levent)    
System.Windows.Forms.Control.PerformLayout(System.Windows.Forms.LayoutEventArgs args)   
System.Windows.Forms.Control.System.Windows.Forms.Layout.IArrangedElement.PerformLayout(System.Windows.Forms.Layout.IArrangedElement affectedElement, string affectedProperty)  
System.Windows.Forms.Control.OnResize(System.EventArgs e = {System.EventArgs})  
System.Windows.Forms.Panel.OnResize(System.EventArgs eventargs) 
System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
System.Windows.Forms.Control.UpdateBounds() 
System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = Width) 
System.Windows.Forms.Control.SetBounds(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified) 
System.Windows.Forms.Control.Width.set(int value)   
BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.OnResize(System.EventArgs e = {System.EventArgs}) Line 150   C#
System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
System.Windows.Forms.Control.UpdateBounds() 
System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
System.Windows.Forms.UserControl.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = Width) 
System.Windows.Forms.Control.SetBounds(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified) 
System.Windows.Forms.Control.Width.set(int value)   
BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RefreshControls() Line 332 C#
BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RunCreateControlProcess(bool destroyControls = false, bool reload = false, bool createControls = false, BHCS.ECC.PhysDoc.UI.LoadingForm loading = null) Line 1020  C#
BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.docNode_Resize(object sender = {BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl}, System.EventArgs e = {System.EventArgs}) Line 683 C#
System.Windows.Forms.Control.OnResize(System.EventArgs e)   
System.Windows.Forms.UserControl.OnResize(System.EventArgs e)   
BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.OnResize(System.EventArgs e = {System.EventArgs}) Line 140   C#
System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
System.Windows.Forms.Control.UpdateBounds() 
System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
System.Windows.Forms.UserControl.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = Height)    
System.Windows.Forms.Control.SetBounds(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified) 
System.Windows.Forms.Control.Height.set(int value)  
BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.RefreshSize(bool setAnchorAndWidth = false) Line 109 C#
BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.ctrl_Resize(object sender = {System.Windows.Forms.Panel}, System.EventArgs e = {System.EventArgs}) Line 442  C#
System.Windows.Forms.Control.OnResize(System.EventArgs e)   
System.Windows.Forms.Panel.OnResize(System.EventArgs eventargs) 
System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
System.Windows.Forms.Control.UpdateBounds() 
System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = Height)    
System.Windows.Forms.Control.SetBounds(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified) 
System.Windows.Forms.Control.Height.set(int value)  
BHCS.ECC.PhysDoc.Plugins.Prompt.BL.PanelPrompt.pnlOuter_Layout(object sender = {System.Windows.Forms.Panel}, System.Windows.Forms.LayoutEventArgs e = {System.Windows.Forms.LayoutEventArgs}) Line 164  C#
System.Windows.Forms.Control.OnLayout(System.Windows.Forms.LayoutEventArgs levent = {System.Windows.Forms.LayoutEventArgs}) 
System.Windows.Forms.ScrollableControl.OnLayout(System.Windows.Forms.LayoutEventArgs levent)    
System.Windows.Forms.Control.PerformLayout(System.Windows.Forms.LayoutEventArgs args)   
System.Windows.Forms.Control.System.Windows.Forms.Layout.IArrangedElement.PerformLayout(System.Windows.Forms.Layout.IArrangedElement affectedElement, string affectedProperty)  
System.Windows.Forms.Control.OnResize(System.EventArgs e = {System.EventArgs})  
System.Windows.Forms.Panel.OnResize(System.EventArgs eventargs) 
System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
System.Windows.Forms.Control.UpdateBounds() 
System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = Width) 
System.Windows.Forms.Control.SetBounds(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified) 
System.Windows.Forms.Control.Width.set(int value)   
BHCS.ECC.PhysDoc.UI.UserControls.PDDocumentNodeControl.OnResize(System.EventArgs e = {System.EventArgs}) Line 150   C#
System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
System.Windows.Forms.Control.UpdateBounds() 
System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
System.Windows.Forms.UserControl.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = Width) 
System.Windows.Forms.Control.SetBounds(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified) 
System.Windows.Forms.Control.Width.set(int value)   
BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RefreshControls() Line 332 C#
BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.RunCreateControlProcess(bool destroyControls = false, bool reload = false, bool createControls = false, BHCS.ECC.PhysDoc.UI.LoadingForm loading = null) Line 1020  C#
BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl.OnResize(System.EventArgs e = {System.EventArgs}) Line 1073    C#
System.Windows.Forms.Control.OnSizeChanged(System.EventArgs e = {System.EventArgs}) 
System.Windows.Forms.Control.UpdateBounds(int x, int y, int width, int height, int clientWidth, int clientHeight)   
System.Windows.Forms.Control.UpdateBounds() 
System.Windows.Forms.Control.WmWindowPosChanged(ref System.Windows.Forms.Message m = {System.Windows.Forms.Message})    
System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
System.Windows.Forms.UserControl.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 71, System.IntPtr wparam, System.IntPtr lparam)    
[Native to Managed Transition]  
[Managed to Native Transition]  
DevExpress.Utils.Win.Hook.ControlWndHook.WindowProc(System.IntPtr hWnd, int message, System.IntPtr wParam, System.IntPtr lParam)    
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.Forms.Control.SetBoundsCore(int x, int y, int width, int height, System.Windows.Forms.BoundsSpecified specified = None)  
System.Windows.Forms.Control.System.Windows.Forms.Layout.IArrangedElement.SetBounds(System.Drawing.Rectangle bounds, System.Windows.Forms.BoundsSpecified specified)    
System.Windows.Forms.Layout.DefaultLayout.xLayoutDockedControl(System.Windows.Forms.Layout.IArrangedElement element, System.Drawing.Rectangle newElementBounds, bool measureOnly, ref System.Drawing.Size preferredSize, ref System.Drawing.Rectangle remainingBounds)  
System.Windows.Forms.Layout.DefaultLayout.LayoutDockedControls(System.Windows.Forms.Layout.IArrangedElement container, bool measureOnly = false)    
System.Windows.Forms.Layout.DefaultLayout.xLayout(System.Windows.Forms.Layout.IArrangedElement container = {System.Windows.Forms.Panel}, bool measureOnly = false, out System.Drawing.Size preferredSize = {Width = -7103 Height = -7105})  
System.Windows.Forms.Layout.DefaultLayout.LayoutCore(System.Windows.Forms.Layout.IArrangedElement container, System.Windows.Forms.LayoutEventArgs args) 
System.Windows.Forms.Layout.LayoutEngine.Layout(object container, System.Windows.Forms.LayoutEventArgs layoutEventArgs) 
System.Windows.Forms.Control.OnLayout(System.Windows.Forms.LayoutEventArgs levent)  
System.Windows.Forms.ScrollableControl.OnLayout(System.Windows.Forms.LayoutEventArgs levent)    
System.Windows.Forms.Control.PerformLayout(System.Windows.Forms.LayoutEventArgs args)   
System.Windows.Forms.Control.System.Windows.Forms.Layout.IArrangedElement.PerformLayout(System.Windows.Forms.Layout.IArrangedElement affectedElement, string affectedProperty)  
System.Windows.Forms.Control.ControlCollection.Add(System.Windows.Forms.Control value = {BHCS.ECC.PhysDoc.UI.UserControls.TemplateBaseControl}) 
System.Windows.Forms.Control.ParentInternal.set(System.Windows.Forms.Control value) 
System.Windows.Forms.Control.Parent.set(System.Windows.Forms.Control value) 
BHCS.ECC.PhysDoc.UI.Forms.MainForm.MainForm_Shown(object sender = {BHCS.ECC.PhysDoc.UI.Forms.MainForm}, System.EventArgs e = {System.EventArgs}) Line 88    C#
System.Windows.Forms.Form.OnShown(System.EventArgs e)   
System.Windows.Forms.Form.CallShownEvent()  
System.Windows.Forms.Control.InvokeMarshaledCallbackDo(System.Windows.Forms.Control.ThreadMethodEntry tme)  
System.Windows.Forms.Control.InvokeMarshaledCallbackHelper(object obj)  
System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)    
System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx)    
System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state)  
System.Windows.Forms.Control.InvokeMarshaledCallback(System.Windows.Forms.Control.ThreadMethodEntry tme)    
System.Windows.Forms.Control.InvokeMarshaledCallbacks() 
System.Windows.Forms.Control.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.ScrollableControl.WndProc(ref System.Windows.Forms.Message m)  
System.Windows.Forms.ContainerControl.WndProc(ref System.Windows.Forms.Message m)   
System.Windows.Forms.Form.WndProc(ref System.Windows.Forms.Message m)   
DevExpress.XtraEditors.XtraForm.WndProc(ref System.Windows.Forms.Message msg)   
System.Windows.Forms.Control.ControlNativeWindow.OnMessage(ref System.Windows.Forms.Message m)  
System.Windows.Forms.Control.ControlNativeWindow.WndProc(ref System.Windows.Forms.Message m)    
System.Windows.Forms.NativeWindow.Callback(System.IntPtr hWnd, int msg = 49734, System.IntPtr wparam, System.IntPtr lparam) 
[Appdomain Transition]  
[Native to Managed Transition]  
[Managed to Native Transition]  
System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame frame = {System.Windows.Threading.DispatcherFrame}) Line 2281    Unknown
System.Windows.Threading.Dispatcher.PushFrame(System.Windows.Threading.DispatcherFrame frame) Line 368  Unknown
System.Windows.Threading.Dispatcher.Run() Line 327  Unknown
System.Windows.Application.RunDispatcher(object ignore) Line 2745   C#
System.Windows.Application.RunInternal(System.Windows.Window window) Line 1841  C#
System.Windows.Application.Run(System.Windows.Window window) Line 261   C#
Eclipsys.Infrastructure.UIShell.App.Main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:49:41.320

这是一个易于诊断且非常常见的异常。使用任务管理器的进程选项卡开始诊断。查看 + 选择列，勾选用户对象。当您使用它时，请同时勾选 GDI 对象和句柄。运行程序并在使用程序功能时观察进程的 USER Objects 值。

如果您看到的值稳步攀升，那么您的程序正在泄漏窗口句柄。一旦该值达到 10000，Windows 将停止为其提供更多窗口，该进程已消耗其配额。引发的异常是“创建窗口句柄时出错”。

原因是 Winforms 中一个非常常见的编程错误。当您使用 Controls.Remove/At() 或 Controls.Clear() 从其父级移除控件但忘记对这些移除的控件调用 Dispose() 方法时，就会发生这种情况。这将使他们永远活着，由他们的窗把手保持活力。

# android - Android kSOAP2 连接到 Web 服务。

> ID：13141069
> 
> 赞同：1
> 
> 时间：2012-10-30T14:25:28.490
> 
> 标签：android, ksoap2

我正在尝试使用`kSOAP2`将 android 设备连接到 Web 服务。如果有人感兴趣，它是 SAP ABAP Web 服务。

我收到以下错误：

```
10-30 15:21:42.395: I/System.out(18148): Error org.xmlpull.v1.XmlPullParserException:
expected: START_TAG {http://www.w3.org/2003/05/soap-envelope}Envelope (position:START_TAG <html>@1:7 in java.io.InputStreamReader@4138e570) 
```

我与网址的连接详细信息是：-

```
String NAMESPACE = "urn:sap-com:document:sap:rfc:functions";
String METHOD_NAME = "ZmobileGetTableDefinition";
String SOAP_ACTION = "urn:sap-com:document:sap:rfc:functions/ZmobileGetTableDefinition";
String URL = "http://localhost.com/sap/bc/srt/wsdl/sdef_ZMOBILE_REPORTING/wsdl11/ws_policy/document?sap-client=800?WSDL"; 
```

`START_TAG`暗示的错误是什么。

谢谢

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:46:45.230

It was the webservice endpoint I need to specify rather than the WSDL.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:27:29.170

您可以尝试显示从 Web 服务返回的字符串吗？听起来像是解析错误

# javascript - 如何在 Chrome 浏览器中获得有关窗口大小调整的通知

> ID：13141072
> 
> 赞同：1
> 
> 时间：2012-10-30T14:25:37.010
> 
> 标签：javascript, google-chrome, google-chrome-extension, google-chrome-devtools

我正在为 Chrome 浏览器编写一个扩展，我想在其中为窗口调整大小事件添加一个事件侦听器。我的方法正在为窗口加载事件执行，但没有为调整大小事件执行。

下面是我的 manifest.json 文件的代码

```
{
  "name": "A browser action",
  "version": "1.0",
  "background": { "scripts": ["background.js"] },
  "permissions": [
    "tabs", "http://*/*"
  ],
  "manifest_version": 2
} 
```

下面是我的 background.js 文件的代码。

```
var myExtension = 
{  
    init: function()
    {  
      // The event can be DOMContentLoaded, pageshow, pagehide, load or   unload.           
      alert("ASHSIH");
      window.addEventListener("resize", this.onmyPageResize, false);
    },
    onmyPageResize: function(aEvent) 
    {  
      alert("RESIZED");

    }  
}

window.addEventListener("load", function load(event){  
  window.removeEventListener("load", load, false); //remove listener, no longer   needed  
  myExtension.init();    
},false); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T16:04:27.353

[Chrome-o-Tile](https://github.com/NV/chrome-o-tile)是在其内容脚本中侦听调整大小的扩展的一个示例。

在 manifest.json 中：

```
"content_scripts": [
  {
    "js": ["contentscript.js"],
    "run_at": "document_start",
    "matches": [
      "<all_urls>"
    ]
  }
], 
```

在 contentscript.js 中：

```
'use strict';

var timeoutId = 0;

window.addEventListener('resize', function() {
  if (timeoutId) {
    clearTimeout(timeoutId);
  }
  timeoutId = setTimeout(function() {
    chrome.runtime.sendMessage({method: 'resize'});
    timeoutId = 0;
  }, 100);
}, false); 
```

在 background.js 中：

```
chrome.runtime.onMessage.addListener(function requested(request) {
  if (request.method === 'resize') {
    ...
  }
)}; 
```

[为 Chrome 扩展实现 chrome.windows.onResize 事件](http://code.google.com/p/chromium/issues/detail?id=44464)还有一个未解决的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T22:11:35.270

background.js 文件无法捕获浏览器中的调整大小事件。您需要为此注入[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:29:36.010

你可以使用jQuery的`bind()`功能.. [http://api.jquery.com/bind/](http://api.jquery.com/bind/)

```
$(window).bind('resize', function () {
//do something here
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-23T01:09:47.240

对于这个问题的未来读者，`chrome.windows`API 提供了一个`onBoundsChanged`事件：

> onBoundsChanged（自 Chrome 86 起）
> 
> 调整窗口大小时触发；此事件仅在提交新边界时调度，而不是在进行中的更改时调度。

[https://developer.chrome.com/extensions/windows#event-onBoundsChanged](https://developer.chrome.com/extensions/windows#event-onBoundsChanged)

这是如何使用事件：`chrome.windows.onBoundsChanged.addListener( callback() )`

（确保`manifest.json`文件声明了`tabs`权限）

```
 {
    "name": "My extension",
    ...
    "permissions": ["tabs"],
    ...
  } 
```

# uitableview - 动画 UITableView 高度变化

> ID：13141073
> 
> 赞同：0
> 
> 时间：2012-10-30T14:25:42.057
> 
> 标签：uitableview, uiviewanimation

我正在使用下面的代码对 UITableView 高度变化进行动画处理，以响应键盘出现/消失。

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.25];
[UIView setAnimationBeginsFromCurrentState:YES];
CGRect tableFrame = self.messagesTableView.frame;

if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) {
    tableFrame.size.height -= kKeyboardHeightPortrait;
} else {
    tableFrame.size.height -= kKeyboardHeightLandscape;
}

self.messagesTableView.frame = tableFrame;
[UIView commitAnimations]; 
```

它按预期工作，除了一件事，动画一开始，表格视图上半部分的单元格就会消失。

动画开始前： ![在此处输入图像描述](../Images/a4717294f7ea39b252d1b5aeee64c99e.png)

动画开始后： ![在此处输入图像描述](../Images/ccb394a06b8a762415c8f94a8ef6b57f.png)

还值得一提的是，table view 是[UIBubbleTableView的一个实例](https://github.com/AlexBarinov/UIBubbleTableView)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T14:02:53.407

我试图重现您的问题，但无法重现。无论如何，我刚刚将 UIBubbleTableView 的扩展示例提交到 github 中，它可以完成您正在尝试做的事情并且到目前为止一切似乎都很好，请查看最新的提交（https://github.com/AlexBarinov/UIBubbleTableView/commit /bc0dc5b151241c4ae476c894e23800156e9709a8)

如果您仍有疑问，请随时将问题添加到 github tracker 或联系我以提供您认为不适用于调查的来源。电子邮件在 github 个人资料中可用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-11T05:47:09.890

那是因为您从不初始化这些单元格。

# php - 如何制作具有相同设计的网页

> ID：13141074
> 
> 赞同：0
> 
> 时间：2012-10-30T14:25:41.843
> 
> 标签：php, javascript, html, css

经过多次实践网站，我终于做了一个网站，发布了。问题是，如果我需要更改设计，即在每一页中将要更改的文本的前后（编码），那么我将不得不在每个文件中更改它。谁能告诉我我可以通过什么方式更改文本下方和上方的代码。请提供任何可以帮助我的标签、代码、软件等。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:28:44.097

您可以使用 PHP 来包含页眉和页脚。

例如，您将所有页眉和菜单放在“header.html”中，将所有页脚、版权等放在“footer.html”中。

，创建一个index.php。在这个页面中，你可以这样写：

```
<?php include 'header.html'; ?>
<p>body</p>
<?php include 'footer.html'; ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:32:26.200

很容易; 分离您的模板文件。

```
// header.php
<html>
    <head>
        <title>My beautiful website</title>
        <script src="script.js"></script>
        ....
    </head>
    <body> 
```

.

```
// footer.php
    </body>
</html> 
```

.

```
// content.php
<?php include('header.php'); ?>

<h1>Welcome on my website</h1>
<p>Lorem ipsum</p>

<?php include('footer.php'); ?> 
```

现在，如果您想更改某些内容，请更改 header.php，并且更改将在每个内容页面上可见。

笔记; 您还可以扭转局面（在基本模板文件中包含“content.php”）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:30:04.200

把你的代码分成3个`.php`文件

1.  `header.php` - 你的内容之上的一切
2.  `content.php`- 你的内容
3.  `footer.php`- 你的内容下的一切

然后在您的`index.php`文件（以及所有其他文件）中包含它们，例如：

```
<?php
$meta = 'This page meta info';

include('header.php');
include('content.php');
include('footer.php');
?> 
```

**头文件.php**

```
<html>
    <meta="<?php echo $meta; ?>" />
    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:32:23.990

你可以使用包括 `<?php include('templates/global_header.tpl') ?>`

要做到这一点，您需要您的主页具有扩展名 .php 而不是 html。

# powershell - PowerShell：函数中的 $input 值更改

> ID：13141077
> 
> 赞同：1
> 
> 时间：2012-10-30T14:25:53.350
> 
> 标签：powershell

我发现当我编写以下函数时：

```
function test {
    Write-Host ($input | Measure-Object).Count
    Write-Host ($input | Measure-Object).Count
} 
```

带样本输入：

```
dir | test 
```

它在控制台上写道：

```
18
0 
```

我认为这是因为 Measure-Object 的第一个管道覆盖了 $input。我知道一种解决方法，我可以创建一个新数组并传递它：

```
function test {
    $inp = @($input)
    Write-Host ($inp | Measure-Object).Count
    Write-Host ($inp | Measure-Object).Count
} 
```

但是我不喜欢它，因为我正在引入一个新变量。有没有办法在不影响 $input 的情况下通过管道连接到 cmdlet？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:38:07.477

尝试这个：

```
function test {    
 Write-Host ($input | Measure-Object).Count
 $input.reset()
 Write-Host ($input | Measure-Object).Count
} 
```

[阅读`$input`枚举器](http://dmitrysotnikov.wordpress.com/2008/11/26/input-gotchas/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:38:19.430

`$input`是一个`ArrayListEnumeratorSimple`：

```
C:\Users\roger> $input.GetType()

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
False    True     ArrayListEnumeratorSimple                System.Object 
```

...这意味着它是一系列项目的枚举器。因此，当您消费其中的物品时，您会用完它们。

我尝试了以下操作：

```
function foo
{
    $input | select -first 3 | % { Write-Host -ForegroundColor 'Red' $_ }
    $input | % { Write-Host -ForegroundColor 'White' $_ }
} 
```

...表明它`select -first 3`吃掉了前 3 件东西，但它似乎吞下了所有的东西。

尝试以下操作：

```
function bar
{
    $n = 0
    foreach ($x in $input) {
        if ( ++$n -eq 3 ) { break }
        Write-Host -ForegroundColor 'Red' $x
    }

    $input | % { Write-Host -ForegroundColor 'White' $_ }
}

dir | bar 
```

...显示差异。

然而，由于 $input 是一个枚举器（严格来说是一个`IEnumerator`），你可以调用`Reset()`它来回退它。

请注意，在 .NET-land 中，并非所有枚举数都可以重置。我不确定 PowerShell 中是否有任何情况是`$input`.

# javascript - AngularJS $http HTML 解析器

> ID：13141080
> 
> 赞同：6
> 
> 时间：2012-10-30T14:26:12.650
> 
> 标签：javascript, angularjs

总而言之，我们正在使用 AngularJS 开发一个 web 应用程序，并且我们有一个用例/需求（根本不会经常发生），我们需要从我们的静态服务器中检索一个完整的 HTML 文档。但是，$http 对象似乎返回了一个原始 HTML 字符串作为其“数据”。我们试图避免使用外部库（例如 jQuery），但我们需要将原始 HTML 字符串解析为可查询的 DOM 对象。我们可以使用 iframe 并完成它，但出于众所周知的原因，我们也试图避免使用 iframe。

所以，问题是：AngularJS 是否有 HTML 解析器（就像 JSON 一样）？否则，处理这种情况的最优雅的方式是什么？

PS：我们尝试过筛选 Angular 的 API 文档，但老实说，它们是命中注定的，而且导航不直观。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T15:46:59.417

如果您需要以编程方式从字符串中获取 DOM 元素，则将 html 解析为 DOM 对象非常简单。

基本上你会使用 DOMParser。

```
var parser = new DOMParser();
var doc = parser.parseFromString('<div>some html</div>', 'text/html');
doc.firstChild; //this is what you're after. 
```

如果您想从那里查询以使用 vanilla JS 从中获取元素（意思是，由于某种原因您不想使用 JQuery），您可以这样做：

```
//get all anchor tags with class "test" under a div.
var testAnchors = doc.firstChild.querySelectorAll('div a.test'); 
```

...但请注意：`querySelectorAll`仅在 IE8 及更高版本中受支持。

## 编辑：其他方法...

“包装”方法：

```
var div = document.createElement('div');
div.innerHTML = '<div>some html</div>';
var result = div.childNodes; 
```

...请注意，如果您将 SVG 或 MathML 放入其中，此方法将返回 HTMLUnknownElements。他们会“看起来”正常，但他们不会工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:46:30.850

首先，Angular 也使用 jQuery。(jQuery 精简版)

来自[常见问题](http://docs.angularjs.org/partials/misc/faq.html)

> Angular 是否使用 jQuery 库？
> 
> 是的，如果在引导应用程序时，Angular 存在于您的应用程序中，则 Angular 可以使用 jQuery。如果 jQuery 没有出现在你的脚本路径中，Angular 会退回到它自己的 jQuery 子集实现，我们称之为 jQLite。

但是，我认为您在这里不需要完整的 jQuery 函数。

这就是我所做的。

我使用指令并将 html 作为模板并将替换设置为 true。

[jsFiddle](http://jsfiddle.net/maxisam/Bw7DQ/)

```
<myhtml></myhtml>

angular.module('myApp', []).directive('myhtml', function($http) {

    return {
        restrict: 'E',
        scope: {},
        template:'',
        link: function(scope, element, attrs) {
           $http.post('/echo/json/', data).success(function(re) {
               element.html(re.html);
        });
    }
    }
}); 
```

编辑说明：

我只是更新了 jsFiddle。

我在顶部包含 jquery 以在 jsFiddle 中回显请求。实际上，你不需要那个。

但是，它向您展示了您可以在 Angular 中使用 jQuery。

如果您的 html 不包含任何 angular 标签，则此示例应如您所愿。

否则，您需要使用**compile**而不是**link**。

# javascript - 为什么这段代码打印 20 undefined？

> ID：13141084
> 
> 赞同：-3
> 
> 时间：2012-10-30T14:26:21.860
> 
> 标签：javascript, object, return, iteration, undefined

[代码](http://jsfiddle.net/8ejhR/)：

```
var coordinateTratte = {
        "1522-nord": [
             {"Distanza": 0, "Lat": 45.02915, "Lng": 7.606131667},            
             {"Distanza": 0.1, "Lat": 45.02805167, "Lng": 7.605818333}
        ]
    };

for (var key in coordinateTratte) {
    var obj = coordinateTratte[key];
    for (var prop in obj) {  
        console.log(obj[prop].Lat);
    }
}
​ 
```

为什么 20 未定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:31:39.587

`"1522-nord"`是一个数组，你用 for-in 遍历它。不要在数组上使用 for-in。使用常规循环：

```
for (var key in coordinateTratte) {
    var obj = coordinateTratte[key];
    for (var i = 0; i < obj.length; i++) { // <--
        console.log(obj[i].Lat);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:16:35.333

@user1689607 的评论在我看来就是答案。当您选择 时`no lib (pure JS)`，您的代码不会记录任何`undefined`值。问题是：库经常摆弄本机类型的原型。这样做最臭名昭著的库是`prototype.js`（线索在名称中）。例如，常规、未更改对象的*“神奇属性”*`Array`是不可枚举的（即：不会出现在`for...in`数组的循环中）。但是，当您开始添加自己的属性和方法时，它们很可能*会*出现。由于`Array`是从原型派生的，因此对该`Object`原型的任何更改也可能会出现。

它的长短是：永远*不要*在数组上**使用**。`for...in`如果您确实使用`for...in`（在对象上），请始终检查您正在处理的任何属性是否直接设置在该对象上，并且不是来自原型：

```
for (var prop in someObject)
{
    if (someObject.hasOwnProperty(prop))
    {
        //do stuff
    }
} 
```

就数组而言：`for(var i=0;i<theArray.length;i++)`应该可以帮助您避开大多数问题（请记住，数组在 JS 中是稀疏的）：

```
var normalArray = [1,2];
var sparseArray = [1,2,3,4];
delete sparseArray[2];//will log [1,2,undefined,4]
for (var i=0;i<sparseArray.length;i++)
{
    if (i < normalArray.length)
    {
        console.log(normalArray[i]);
    }
    console.log(sparseArray[i]);//will log 1 - 2 - undefined - 4
    if (sparseArray.hasOwnProperty(i))
    {
        console.log(sparseArray[i]);//logs 1 - 2 - 4
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:28:38.247

```
var coordinateTratte = {"1522-nord":[{"Distanza":0,"Lat":45.02915,"Lng":7.606131667},{"Distanza":0.1,"Lat":45.02805167,"Lng":7.605818333}]};

for (var key in coordinateTratte) {
    var obj = coordinateTratte[key];
    for (var i = 0; i < obj.length; i++) {  
        console.log(obj[i].Lat);
    }
} 
```

小提琴：http: [//jsfiddle.net/bdgnJ/](http://jsfiddle.net/bdgnJ/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T14:30:09.183

尝试：

```
for (var key in coordinateTratte) {
    var obj = coordinateTratte[key];
    for (var prop in obj) {  
        if(obj.hasOwnProperty(prop))
            console.log(obj[prop].Lat);
    }
} 
```

您遍历所有 Array 属性。即使它们来自其原型。

# doctrine-orm - docrtine 2 版本控制关联

> ID：13141085
> 
> 赞同：2
> 
> 时间：2012-10-30T14:26:23.643
> 
> 标签：doctrine-orm, associations, versioning

我需要为某些实体实现版本控制。

我有一个实体“Map”，它与“Spot”实体有 OneToMany 关联。“Map”和“Spot”应该是版本化的。

应该可以显示旧版本的“地图”以及所有相关的“点”。

因此，在旧版本中，“地图”本身可能有另一个背景图像，但相关“点”的位置或数量也可能不同。

我喜欢 AuditLog 的这种方法（在页面末尾）： http: [//www.doctrine-project.org/blog/doctrine2-versionable.html](http://www.doctrine-project.org/blog/doctrine2-versionable.html)

```
[php]
class AuditListener implements EventSubscriber
{
    public function getSubscribedEvents()
    {
        return array(Events::onFlush);
    }

    public function onFlush(OnFlushEventArgs $args)
    {
        $em = $args->getEntityManager();
        $uow = $em->getUnitOfWork();

        $changeDate = new DateTime("now");
        $class = $em->getClassMetadata('DoctrineExtensions\Auditable\AuditEntry');

        foreach ($uow->getScheduledEntityUpdates() AS $entity) {
            if ($entity instanceof Auditable) {
                $changeSet = $uow->getEntityChangeSet($entity);

                foreach ($changeSet AS $field => $vals) {
                    list($oldValue, $newValue) = $vals;
                    $audit = new AuditEntry(
                        $entity->getResourceName(),
                        $entity->getId(),
                        $oldValue,
                        $newValue,
                        $changeDate
                    );

                    $em->persist($audit);
                    $em->getUnitOfWork()
                       ->computeChangeSet($class, $audit);
                }
            }
        }
    }
} 
```

我想知道如何处理可版本化实体的关联。

例如：

当“地图”发生变化时，会保存一个新的地图版本，但是与 Spots 的关联呢？当“Spot”发生变化时，它的父“Map”会怎样。

构建新版“地图”时： - 我怎么知道它有关联？- 我如何才能确定关联也是可版本化的 - 我如何处理关联

即使关联不可版本化，如果我更改关联的不可版本化实体，我也会更改旧版本的“地图”，因为它们仍然是关联的。

有没有人有经验或想法如何使用学说 2.1 来管理它？

# tomcat - Mahout Grouplens 示例：如何从 Jetty 迁移到 Tomcat

> ID：13141089
> 
> 赞同：0
> 
> 时间：2012-10-30T14:26:31.003
> 
> 标签：tomcat, servlets, mahout

我按照步骤使用 Mahout 安装和执行（成功）Grouplens 示例。以下是步骤：

*   解压 mahout-distribution-0.7-src.zip 到 c:\mahout-distribution-0.7
*   转到 c:\mahout-distribution-0.7
*   运行： mvn install -DskipTests
*   然后，使用以下命令启动 servlet：

> mvn码头：运行

上面的命令适合我。

但现在我想在 Tomcat 中“集成” Mahout，所以不使用 Jetty。

有人可以告诉我要遵循的确切步骤（对于上面安装的 Mahout），因为我不知道 Tomcat。我认为可以使用一对命令（我不知道）快速完成。

所有在线教程都使用 Jetty，但我相信您的回答对很多需要在 Tomcat 中运行 Mahout 的人来说是有帮助的。

非常感谢。凝胶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:55:43.470

我不知道 Mahout，但我很确定不会有一对命令可以用在 tomcat 中运行相同应用程序的类似命令替换 mvn jetty:run。

mvn jetty:run 启动了 jetty-maven-plugin，非常棒。您需要将其重新配置为类似的 tomcat 插件。

因此，除非有充分的理由要切换到 tomcat，否则我会留在码头。那为什么又要切换到tomcat呢？

干杯，托马斯

# primefaces - 如何从 p:barChart 中删除列号

> ID：13141092
> 
> 赞同：0
> 
> 时间：2012-10-30T14:26:39.863
> 
> 标签：primefaces, jqplot

![在此处输入图像描述](../Images/ae2dd3e2fa0ffc82a95bfaa8722bc908.png)我正在使用 primefaces p:barChart，它是 jqplot api 的一部分。

我想从 jqplot-highlighter-tooltip() 中删除列号（最小的数字 1 ）我假设答案在以下 [http://www.jqplot.com/docs/files/jqPlotOptions中的选项之一-txt.html](http://www.jqplot.com/docs/files/jqPlotOptions-txt.html)但我没有找到正确的

有人可以请我指出相关的 attr 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:56:41.247

```
function ext() {
    this.cfg.highlighter = {
        tooltipAxes: 'y'
    };
} 
```

# java - java - 如何在不每次都创建对象的情况下在java中获取当前时间？

> ID：13141094
> 
> 赞同：6
> 
> 时间：2012-10-30T14:26:42.477
> 
> 标签：java, calendar

我知道有很多关于如何在 java 中获取当前时间的 os 帖子。但我打算在 Persona 类中编写一个 getAge 方法。问题是，每次调用方法时我都需要获取当前时间。假设有十亿个客户端执行 getMethod（有几毫秒，也许几秒的差异），就会为这样一个简单的事情创建十亿个对象。我唯一做的就是在 Person 中创建一个静态成员，因此 Person 将共享该实例。但这并不能阻止对象的创建。

```
public class Person{
//Some Attributes
private static Calendar now;
private Calendar birthDate;

public short getAge(){
now = Calendar.getInstance();

return  (short) (( now.getTimeInMillis() - birthDate.getTimeInMillis())/ 31536000000L;
}} 
```

如果你知道一些库已经实现了这个而没有浪费这样的堆大小。请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T14:27:39.203

无需创建 a `Calendar`，可以`long`从静态方法 中获取 a

```
System.currentTimeMillis(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T14:30:33.583

您还可以创建一个 Calendar 实例并继续调用：

```
calendar.setTimeInMillis ( System.currentTimeMillis() ); 
```

在日历实例中设置当前时间并使用该日历对象进行任何日期计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:30:41.867

通过优化方式获得的时间戳，需要哪些额外的处理/开销才能使获得的时间戳有意义？

[http://joda-time.sourceforge.net](http://joda-time.sourceforge.net)

如果您希望图书馆可以处理日期和时间，请使用 Joda Time。我不会尝试任何解决方法。

```
DateTime dt = new DateTime();  // current time 
```

我建议，如果性能是一个关键问题/限制问题，那么您运行测试以确保您接受的任何解决方法都能实现超过代码可读性的非功能性结果。

# linq-to-sql - 如何使用 linq to sql 查询可为空的 varchar 的子字符串？

> ID：13141096
> 
> 赞同：0
> 
> 时间：2012-10-30T14:27:06.000
> 
> 标签：linq-to-sql

我正在尝试从一些数据完整性不高的数据库中导入地址数据。因此，有许多地址（甚至在美国）没有邮政编码，并且它们被读取为 NULL。

我正在尝试将这些地址与现有的干净地址数据库进行一些匹配。我根据收件人（公司名称）、州（区）、城市（地区）和 Street1 或邮政编码的前 5 个来确定匹配项。

我试过这个：

```
//This is just coded for the example -- In my routine, potentialAddress
//is coming from a data source where Postal Code may or may not be null.
Address potentialAddress = new Address() {
    Street1 = "2324 Lakeview Drive",
    PostalCode = null,
    CountryId = 234,  //US
    Locality = "Sanford",
    District = "FL"
};

 //What I want here is Country & District have to match and either
 //Street matches OR (if this is a US address) the first 5 of the postal code matches
_context.Addresses.Where(a => ((a.Street1 == potentialAddress.Street1) 
   || (a.PostalCode != null && potentialAddress.PostalCode != null && potentialAddress.PostalCode.SubString(0,5) == a.PostalCode.SubString(0,5))
   && a.CountryId == potentialAddress.CountryId
   && a.District == potentialAddress.District).Select(a => a.Id).ToList(); 
```

每当潜在地址为空时，我都会不断收到错误消息。我越来越：

```
Object reference not set to an instance of an object 
```

当查询生成器尝试解析 potentialAddress.SubString(..) 时。

如果一个或另一个（或两者）为空，我不想通过邮政编码将其称为匹配项。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:30:07.377

似乎问题与评估查询中的 potentialAddress 对象有关。IOW，a.PostalCode != null 被评估，一个 false 值将停止对该条件的任何进一步处理，而 potentialAddress.PostalCode != null 似乎被忽略并且语句的评估继续 - 当它到达潜在地址时导致错误。 PostalCode.SubString(0,5)。

我解决这个问题的唯一方法是将处理潜在地址的条件代码移到查询之外。

所以，我现在有这样的事情：

```
if(potentialAddress.PostalCode == null || potentialAddress.PostalCode.Length < 5)
    //Perform query that ignores postal code
else
    //Perform query that performs substring of postal code comparison
endif 
```

如果我能在查询本身中做到这一切，当然会很好。也许有人可以解释为什么查询中对 potentialAddress.PostalCode 的评估似乎不起作用。

# visual-studio - 插入 T4 生成的代码，就好像它是一个片段一样

> ID：13141099
> 
> 赞同：2
> 
> 时间：2012-10-30T14:27:10.000
> 
> 标签：visual-studio, t4, code-snippets

我正在寻找一种方法来快速、定期地将我的签名和日期添加到 Visual Studio 中新代码文件的顶部。

有一些关于使用宏来执行此操作的教程，但显然 VS2012 不再支持宏。

我可以将标题定义为代码片段并插入片段，但片段不支持获取当前日期。

我可以使用以下 T4 模板生成正确的文本：

```
<#@ template debug="false" hostspecific="false" language="C#" #>

// <author>Pieter Müller</author>
// <date><#=DateTime.Now.ToString("yyyy-MM-dd")#></date>

<#@ output extension=".cs" #> 
```

这给了我以下结果，这是完美的：

```
// <author>Pieter Müller</author>
// <date>2012-10-30</date> 
```

**问题是**，有没有办法让我快速、定期地将这段代码插入到新的代码文件中，无论是自动还是手动使用类似的东西`Insert Snippet`或快捷键？

如果您没有答案，但您对生成我需要的签名标头确实有一个好主意，请发表评论。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T08:25:16.430

我不想回答自己的问题，但我确实想出了一种将 T4 模板作为片段的方法，尽管它的 Hack Level 超过 9000。它通过编写一个生成片段的 T4 模板来工作，然后它会自动将其复制到Visual Studio 片段文件夹。

*   将项目添加`Text Template`到您的项目。

*   将其设置为构建一个片段，然后构建您要插入的代码。对于我的问题中的示例，您要使用 T4 模板生成的片段 XML 如下所示：

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <CodeSnippets xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
      <CodeSnippet Format="1.0.0">
        <Header>
          <SnippetTypes>
            <SnippetType>Expansion</SnippetType>
          </SnippetTypes>
          <Title>DateHeaderSnippet</Title>
          <Author>user</Author>
        </Header>
        <Snippet>
          <Code Language="csharp">
            <![CDATA[//    <author>Pieter Muller</author>
    //    <date>{Today's Date}</date>]]>
          </Code>
        </Snippet>
      </CodeSnippet>
    </CodeSnippets> 
    ```

    *   要使用 T4 模板生成上述 XML，我们可以几乎逐字插入 XML，并进行两处更改。首先，这一行：

        ```
        <?xml version="1.0" encoding="utf-8"?> 
        ```

        必须在手动 WriteLine 语句中，否则`<?xml`标签会混淆 T4 模板处理器：

        ```
        <# WriteLine("<?xml version=\"1.0\" encoding=\"utf-8\"?>"); #> 
        ```

    *   其次，我们想使用 T4 处理将今天的日期注入到 XML 片段中，因此我们进行了更改：

        ```
         <![CDATA[//    <author>Pieter Muller</author>
        //    <date>{Today's Date}</date>]]> 
        ```

        至：

        ```
         <![CDATA[//    <author>Pieter Muller2</author>
        //    <date><#=DateTime.Now.ToString("yyyy-MM-dd")#></date>]]> 
        ```

*   我们还在 T4 模板的末尾添加了一些非常 hacky 的代码，手动读取输出文件并将其写入片段文件。最棘手的部分是我们必须指定绝对路径。完整的 T4 代码如下所示：

    ```
    <#@ template debug="false" hostspecific="false" language="C#" #>
    <#@ output extension=".txt" #>
    <# WriteLine("<?xml version=\"1.0\" encoding=\"utf-8\"?>"); #>
    <CodeSnippets xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
      <CodeSnippet Format="1.0.0">
        <Header>
          <SnippetTypes>
            <SnippetType>Expansion</SnippetType>
          </SnippetTypes>
          <Title>DateHeaderSnippet</Title>
          <Author>user</Author>
        </Header>
        <Snippet>
          <Code Language="csharp">
            <![CDATA[//    <author>Pieter Muller2</author>
    //    <date><#=DateTime.Now.ToString("yyyy-MM-dd")#></date>]]>
          </Code>
        </Snippet>
      </CodeSnippet>
    </CodeSnippets>
    <#    
        System.IO.StreamReader sr = new System.IO.StreamReader(@"C:\Users\Pieter\Documents\Visual Studio 2010\Projects\tmp\tmp\TextTemplateToWriteHeaderTemplate.txt");
        string sourceText = sr.ReadToEnd();
        sr.Close();

        System.IO.StreamWriter sw = new System.IO.StreamWriter(@"C:\Users\Pieter\Documents\Visual Studio 2010\Code Snippets\Visual C#\My Code Snippets\tryout.snippet");    
        sw.WriteLine(sourceText);    
        sw.Close();    
    #> 
    ```

*   您必须编译 T4 模板两次 - 第一次运行生成代码片段，第二次运行将前一次运行的输出写入代码片段文件夹。为此，请右键单击解决方案资源管理器中的模板，然后单击`Run Custom Tool`。

*   现在您可以右键单击代码中的任意位置，`Insert Snippet...`从组中选择并选择生成的代码段`My Code Snippets`。结果：

    ```
    //    <author>Pieter Muller2</author>
    //    <date>2012-11-09</date> 
    ```

我知道仅仅插入一个简单的作者和日期标题*就*太麻烦了，但希望其他人可以使用这种技术来做一些更宏大的事情。您几乎可以通过这种方式生成任何类型的动态片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T21:17:14.243

希望您使用的是[ReSharper](http://www.jetbrains.com/resharper/)，它具有强大的模板。我已经使用非常简单的模板变量配置实现了您的示例 ![在此处输入图像描述](../Images/1b87a834e91eba9d376a61df83dc38f9.png)

现在，如果我输入“hd”并按 Tab 这个宏，我将收到下一个结果： ![在此处输入图像描述](../Images/9feef5b26c32edff9ef9bafcbf6fc918.png) ![在此处输入图像描述](../Images/ebfb7844622040e0538eaabf8fbad0db.png)

# dynamics-crm - 我在哪里可以找到 XrmServicesContext 类？

> ID：13141105
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:27:23.290
> 
> 标签：dynamics-crm, dynamics-crm-2011

我发现这个片段提供了一个名为`annotation`. 我找不到 在指令中`XrmServicesContext`声明的类。`using`有谁知道这是什么鬼？

```
private static void AddNoteToContact(IOrganizationService service, Guid id)
{
    Entity annotation = new Entity();
    annotation.LogicalName = "annotation";
    using (var crm = new XrmServicesContext(service))
    {
        var contact = crm.ContactSet.Where(c => c.ContactId == id).First();

        Debug.Write(contact.FirstName);

        annotation["createdby"] = new EntityReference("systemuser", new Guid("2a213502-db00-e111-b263-001ec928e97f"));
        annotation["objectid"] = contact.ToEntityReference();
        annotation["subject"] = "Creato con il plu-in";
        annotation["notetext"] = "Questa note è stata creata con l'esempio del plug-in";
        annotation["ObjectTypeCode"] = contact.LogicalName;
        try
        {
            Guid annotationId = service.Create(annotation);

            crm.AddObject(annotation);
            crm.SaveChanges();
        }
        catch (Exception e)
        {
            throw new Exception(e.Message);
        }

        //    var note = new Annotation{

        //Subject ="Creato con il plu-in",

        //NoteText ="Questa note è stata creata con l'esempio del plug-in",

        //ObjectId = contact.ToEntityReference(),

        //ObjectTypeCode = contact.LogicalName

    };
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:32:52.637

首先，您必须生成早期绑定的实体类。[检查这篇文章](http://msdn.microsoft.com/en-us/library/gg695790.aspx)。然后，在代码中插入 using 语句。

在您的示例中，您正在使用早期和后期绑定的组合。我建议你选择其中之一。在早期绑定的情况下，在生成早期绑定类之后，您可以修改您的代码，如：

```
Annotation annotation = new Annotation();
      using (var crm = new XrmServiceContext(service))
      {
        annotation.ObjectId = contact.ToEntityReference();
        annotation.Subject = "Creato con il plu-in";
        annotation.NoteText = "Questa note e stata creata con l'esempio del plug-in";
        annotation.ObjectTypeCode = Contact.LogicalName;

        crm.AddObject(annotation);
        crm.SaveChanges();
      } 
```

您在这里有一个错误，*annotation.CreatedBy*字段是只读的，您不能从代码中为此设置值。

如果您要使用后期绑定，则不需要*XrmServiceContext*。您可以使用 QueryExpression 从 CRM 获取联系人。在此处查找[示例](http://msdn.microsoft.com/en-us/library/gg328300.aspx)。对于注释创建使用：

```
Guid annotationId = service.Create(annotation); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T06:51:12.167

在 SDK/bin/CrmSvcUtil.exe 中，该工具用于从命令提示符生成早期绑定的实体类，使用参数运行 CrmSvcUtil.exe 即

如果您的 sdk bin 位置是“D:\Data\sdk2013\SDK\Bin\CrmSvcUtil.exe”，那么您的命令将如下所示，
**cmd：**

```
D:\Data\sdk 2013\SDK\Bin>CrmSvcUtil.exe  /out:Xrm\Xrm.cs /url:[OrganizationServiceUrl]  /username:[yourusername] /password:[yourpass] /namespace:Xrm /serviceContextName:XrmServiceContext 
```

**[OrganizationServiceUrl]：**是您的组织服务 url，您可以从设置/自定义/开发人员 rosources/组织服务中找到它，例如

[https://msdtraders.api.crm.dynamics.com/XRMServices/2011/Organization.svc](https://msdtraders.api.crm.dynamics.com/XRMServices/2011/Organization.svc)
**[yourusername]：**您的用户名
**[yourpass]：**您的密码

这将在 bin/Xrm/Xrm.cs 中生成名为 Xrm.cs 的文件中的实体类。如果文件夹 Xrm 不存在，则在 bin 中创建文件夹，或在 cmd [out:Xrm\Xrm.cs] 中编辑参数。
在您的项目中添加 Xrm.cs

在您使用的代码中添加 using 语句`XrmServicesContext`。
喜欢`using Xrm;`

现在您可以使用/访问`XrmServicesContext`和所有实体......享受。

# c++ - 排序算法 - 方法

> ID：13141106
> 
> 赞同：4
> 
> 时间：2012-10-30T14:27:25.657
> 
> 标签：c++, algorithm, design-patterns, sorting

我必须使用面向对象的方法来实现三种不同的排序算法，并且我一直在考虑解决这个问题的最佳方法。

基本上，我认为它应该是这样的：

-> 排序（类、接口、多态）

继承：

-> 冒泡排序

-> 插入排序

-> 快速排序

如果每个排序都有相同的接口，那么访问不同的排序方法会更容易，因此，这意味着当我添加其他排序算法时，我可以轻松地将它们实现到当前的设计和类结构中。

我的问题是：

*   这是一个很好的使用方法吗？

*   我有使用模板的空间吗？即如果我想使用Bubble，它会调用冒泡排序，如果我想使用Insertion，它会调用Insertion？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T14:30:14.613

`Sort`应该是接口或抽象类，而冒泡/插入/快速排序应该是实现/具体类。

以下内容也值得学习：

**策略模式：**

![策略模式图](../Images/0e6fd73274023dbb6837b48cc3dc3d20.png) [http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)

和

**状态模式：**

![状态模式图](../Images/94634201682375019f579f65405f4c8d.png)

[http://en.wikipedia.org/wiki/State_pattern](http://en.wikipedia.org/wiki/State_pattern)

至于模板，我认为在您的情况下不值得。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:34:29.240

按照建议使用接口（纯虚拟类）

**接口方式：**

```
class sort_algorithm_interface {
public:
    virtual void sort(std::vector<int>& input) const  = 0;
};

class BubbleSort : public sort_algorithm_interface {
public:
    virtual void sort(std::vector<int>& input) const {/* sort the input */}
};

class InsertionSort: public sort_algorithm_interface {
public:
    virtual void sort(std::vector<int>& input) const {/* sort the input */}
};

class QuickSort: public sort_algorithm_interface {
public:
    virtual void sort(std::vector<int>& input) const {/* sort the input */}
}; 
```

现在，当您想要对您进行简单排序时，请执行以下操作：

```
sort_algorithm_interface& s = QuickSort(input);
s.sort(input); 
```

**模板方法：**

```
class BubbleSort  {
public:
    void sort(std::vector<int>& input) const {/* sort the input */}
};

class InsertionSort {
public:
    void sort(std::vector<int>& input) const {/* sort the input */}
};

class QuickSort {
public:
    void sort(std::vector<int>& input) const {/* sort the input */}
};

template<typename Sort>
class MySort {
    void sort(std::vector<int>& input) {
        Sort s;
        s.sort(begin, end);
    }
} 
```

用法如下：

```
MySort<QuickSort> s;
s.sort(input); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T15:39:10.227

The right way to do this in C++ is via templates.

Sorting something is an algorithm, and it generally has little to no persistent state. A sort isn't an object -- it is a function on data (which may be objects).

The `std` library already has a sort, with this signature:

```
template<typename I, typename C = std::less<typename std::iterator_traits<I>::value_type> >
void sort(I begin, I end, C comp = C()); 
```

The iterators `begin` and `end` denote a range of values to be sorted, and comp is a functor (or function) that when passed two elements of the range of values tells you if the first one is less than the second.

To use this on a `std::vector`, you'd do something like this:

```
std::vector<int> myVector; // assume it has some data in it
sort( myVector.begin(), myVector.end() ); 
```

The std::sort is (usually?) a quicksort. But the interface works for quick, bubble and insertion sort.

The big advantage of this approach is that one sort can use another. As an example, while a quicksort is faster on large data sets, often on small data sets the simplicity of insertion sort wins (lower constant factor, even with the n^2 overhead). So by writing your sorts like this, quicksort's recursive calls can instead become insertion sort when the number of elements is small.

Now, if you need run-time substitution of which algorithm you are using, you'll need to pin down what iterators you are using, and maybe even what comparitor. This can be done with either a common function signature (what I'd do), or a base class with a pure virtual interface (which I would advise against). Note that the overhead for a run-time chosen comparitor is non-trivial, however. The overhead from a fixed iterator choice, or from a pointer-to-function or virtual method call, so long as it isn't done in the recursive calls of your algorithm, will be pretty cheap for any reasonable sized container.

# asp.net - 下一页在asp.net中向下滚动

> ID：13141109
> 
> 赞同：1
> 
> 时间：2012-10-30T14:27:25.417
> 
> 标签：asp.net

我有两个用 asp.net 编写的网页，vb.net 是后面的代码。当我单击一个页面中的下一个按钮时，应该会出现第二页。第二页是巨大的，当我点击next按钮时，页面来了，但它的焦点是底部，为了到顶部，我需要使用滚动，我想要的是让焦点顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:33:50.587

您可以使用此[脚本](http://www.codeproject.com/Articles/9731/How-to-scroll-an-ASP-NET-control-into-view-after-p)，以便您的页面将滚动到页面上的特定控件。

代码应该放在你的 CodeBehind 中。只需选择页面顶部的一些控件，它就可以完成工作..

我应该注意，让您的页面滚动到底部是一种不寻常的行为，默认情况下不应该发生。您可能应该首先检查为什么会发生这种情况。

**更新：**

更新了代码，因为那里使用的方法已经过时了......

```
private void FocusControlOnPageLoad(string ClientID)
{

            ClientScript.RegisterClientScriptBlock(this.GetType(), "FocusOnControl",

            @"<script> 

              function ScrollView()

              {
                 var el = document.getElementById('" + ClientID + @"')
                 if (el != null)
                 {        
                    el.scrollIntoView();
                    el.focus();
                 }
              }

              window.onload = ScrollView;

              </script>");

} 
```

用法：

```
protected void Page_Load(object sender, EventArgs e)
{
    FocusControlOnPageLoad(yourcontrol.ClientID); 
} 
```

**等效的 VB.Net：（**感谢@Mahyar）

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    FocusControlOnPageLoad(yourcontrol.ClientID)
End Sub
Private Sub FocusControlOnPageLoad(ByVal ClientID As String)
    Dim script As String = _
        "<script>" + _
            "function ScrollView()" + _
            "{" + _
                "var el = document.getElementById('" + ClientID + "')" + _
                "if (el != null)" + _
                "{" + _
                "el.scrollIntoView();" + _
                "el.focus();" + _
                "}" + _
            "}" + _
            "window.onload = ScrollView;" + _
        "</script>"
    ClientScript.RegisterClientScriptBlock(Me.GetType(), "FocusOnControl", script)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:58:21.700

如果您有 aspx，则只需将此脚本添加到页面末尾的 Body 标记之前：

```
<script type="text/javascript">
    window.scrollTo(0,0);
</script> 
```

# c# - 使用自定义 WebApi 控制器的问题

> ID：13141113
> 
> 赞同：2
> 
> 时间：2012-10-30T14:27:35.153
> 
> 标签：c#, asp.net, asp.net-mvc-4, asp.net-web-api

我`ApiController`为我的项目创建了一个自定义基础：

```
public abstract class MyApiControllerBase : ApiController
{
    private IContextService<DomainUnitOfWork> ContextService;

    private UnitOfWorkScopeBase<DomainUnitOfWork> _unitOfWorkScope;

    private bool _autoDispose;

    public bool DisposeUnitOfWorkOnResultExecuted
    {
        get { return this._autoDispose; }
        set { this._autoDispose = value; }
    }

    protected DomainUnitOfWork UnitOfWork
    {
        get { return UnitOfWorkScope.Current; }
    }

    private UnitOfWorkScopeBase<DomainUnitOfWork> UnitOfWorkScope
    {
        get
        {
            if (this._unitOfWorkScope == null)
            {
                this._unitOfWorkScope = new PerRequestUnitOfWorkScope<DomainUnitOfWork>(this.LightSpeedContext);
            }

            return this._unitOfWorkScope;
        }
    }

    private void DisposeUnitOfWorkScope()
    {
        if (this._autoDispose && this._unitOfWorkScope != null && this._unitOfWorkScope.HasCurrent)
        {
            DomainUnitOfWork current = this._unitOfWorkScope.Current;
            current.Dispose();
        }
    }

    public override Task<HttpResponseMessage> ExecuteAsync(HttpControllerContext controllerContext, CancellationToken cancellationToken)
    {
        return base.ExecuteAsync(controllerContext, cancellationToken)
            .ContinueWith<HttpResponseMessage>(ant =>
            {
                DisposeUnitOfWorkScope();
                return ant.Result;
            });
    }

    public MyApiControllerBase(IContextService<DomainUnitOfWork> contextService)
    {
        ContextService = contextService;
        this._autoDispose = true;
    }

    ~MyApiControllerBase()
    {
        Dispose(false);
    }

    public new void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing)
        {
            DisposeUnitOfWorkScope();
            ContextService = null;
        }

        base.Dispose(disposing);
    }

    protected LightSpeedContext<DomainUnitOfWork> LightSpeedContext
    {
        get { return ContextService.Context; }
    }
} 
```

接下来，我创建了一个从 MyApiControllerBase 派生的控制器：

```
public class MyApiController : MyApiControllerBase
{      
    (...)
    [ApiExplorerSettings(IgnoreApi = false)]
    public IEnumerable<MyDto> Get()
    {
         (...)
    }

    [ApiExplorerSettings(IgnoreApi = false)]
    public IEnumerable<MyDto> Get(int pageSize)
    {
        (...)
    }

    [ApiExplorerSettings(IgnoreApi = false)]
    public IEnumerable<MyDto> Get(int pageIdx, int pageSize)
    {
         (...)
    }

    [ApiExplorerSettings(IgnoreApi = false)]
    public IEnumerable<MyDto> Get(string id)
    {
         (...)
    }

    [ApiExplorerSettings(IgnoreApi = false)]
    public IEnumerable<MyDto> Get(string id, int pageSize)
    {
         (...) 
    }

    [ApiExplorerSettings(IgnoreApi = false)]
    public IEnumerable<MyDto> Get(string id, int pageIdx, int pageSize)
    {
         (...)
    }

    [ApiExplorerSettings(IgnoreApi = false)]
    public HttpResponseMessage Post(MyDto dto)
    {
        (...)
    }        

    public MyApiController(
        IContextService<DomainUnitOfWork> contextService)
        : base(contextService)
    {
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing)
        {
            (...)
        }

        base.Dispose(disposing);
    }
} 
```

事情是 ：

我添加了一个 API 帮助页面。每当 Controller 派生自`MyApiControllerBase`时，POST 方法都不会显示。每当我从 派生时`ApiController`，一切都很好。此外，从我派生时，`MyApiControllerBase`我实际上无法发布任何内容。

谁能解释这种行为？我究竟做错了什么？

请注意，我使用 Ninject 作为我的依赖解析和 LightSpeed 作为我的 ORM。

*转自[http://forums.asp.net/t/1855019.aspx/1?Problems+using+custom+ApiControllers](http://forums.asp.net/t/1855019.aspx/1?Problems+using+custom+ApiControllers)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T18:43:03.283

这感觉像是一个路由问题。由于发送给它的参数类型，可能无法访问 POST 方法。不要使用 MyDTO 作为参数类型，而是尝试使用对象类型作为参数，然后在方法代码中将对象转换为 MyDTO：

```
public HttpResponseMessage Post(object obj)
{
    MyDTO dto = obj as MyDTO;

    if (dto != null)
    { 
      ...
    }

    ...
} 
```

# ruby - rdebug 继续过去的断点

> ID：13141116
> 
> 赞同：1
> 
> 时间：2012-10-30T14:27:39.233
> 
> 标签：ruby, rdebug

我`debugger`在我的 Rails 应用程序中放置了一些断点，位于一些长循环中。在达到断点并评估我需要什么之后，有没有办法继续忽略我的其余断点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:30:14.570

当然，这取决于您使用的是哪种调试工具，您所要做的就是在评估完所需内容后删除所有断点。在 rdebug 中，指令是

*   `del`禁用所有断点。
*   `del <bp_id>`禁用一个具体断点。

要查看断点 ID，只需： `b`

# php - 使用 PHP 和 JSON 的雅虎财经

> ID：13141117
> 
> 赞同：1
> 
> 时间：2012-10-30T14:27:39.657
> 
> 标签：php, json, yahoo, finance

关于这个话题有很多问题，但我的没有回答。我对整个 JSON 想法有点陌生，所以这就是我想要的。

我想在我的网站上显示随着股票变化而变化的股票。我这就是我到目前为止得到的

```
<?php
    $stockList = "GOOG+YHOO+AAPL+S+CVGW+ANGO+LNDC+WSCI+ZEP+RELL+WOR+RT+MOS+SONC+TISI+UNF+AEHR+RECN+RELL";
    $stockFormat = "snab";

    $host = "http://finance.yahoo.com/d/quotes.csv";
    $requestUrl = $host."?s=".$stockList."&f=".$stockFormat."&e=.csv"; // Pull data (download CSV as file)
    $filesize=2000;

    $handle = fopen($requestUrl, "r");
    $raw = fread($handle, $filesize);
    fclose($handle);
    echo $raw;
?> 
```

我的问题是如何将 $raw 包装到 JSON 中？我已经在互联网上搜索了 2 天了！仍然没有找到答案！

我希望你们能帮我解决这个问题。我不想利用你的 YQL。这是我的第一篇文章，希望它清楚:)

提前致谢，

# java - java.sql.Timestamp 从 java.util.Date 创建，为什么总是 before() 呢？

> ID：13141123
> 
> 赞同：5
> 
> 时间：2012-10-30T14:27:59.387
> 
> 标签：java, time

在一个错误之后，我注意到如果我从 java.util.Date 创建一个 java.sql.Timestamp，使用需要毫秒的构造函数，Date 实例总是 after() Timestamp。这很令人费解，因为 (a) before() 的合同规定了严格的比较，并且 (b) 如果不相等，时间戳，因为它有纳秒，它本身可能是 after() 日期。但结果是相反的且可重复的（JDK 1.6 和 1.7，具有不同的 JVM 时区）。比较两个 Dates 可以正常工作，但是在 Date 上调用 before() 或 after() 并给出 Timestamp 参数会产生意想不到的结果。

下面的示例代码有两个 Date 和一个 Timestamp 实例，它们都具有相同的毫秒值。然而，将日期与时间戳进行比较显示日期在时间戳之后（）。

```
import java.util.Date;
import java.sql.Timestamp;

public class X extends Date {

    public static void main(String[] args) {
        Date d1 = new Date();
        Date d2 = new Date(d1.getTime());
        Timestamp t = new Timestamp (d1.getTime());
        System.out.println ("date1 = " + d1 + " (" + d1.getTime() + ")" );
        System.out.println ("date2 = " + d2 + " (" + d2.getTime() + ")" );
        System.out.println ("timestamp = " + t + "  (" + t.getTime() + ")" );
        System.out.println ("d1 before d2: " + d1.before(d2));
        System.out.println ("d1 after  d2: " + d1.after(d2));
        System.out.println ("d1 before ts: " + d1.before(t));
        System.out.println ("d1 after  ts: " + d1.after(t)); //why true?
    }
} 
```

样本输出：

```
C:\>\Java\jdk1.7.0_05\bin\java X
date1 = Tue Oct 30 10:15:59 EDT 2012 (1351606559812)
date2 = Tue Oct 30 10:15:59 EDT 2012 (1351606559812)
timestamp = 2012-10-30 10:15:59.812  (1351606559812)
d1 before d2: false
d1 after  d2: false
d1 before ts: false
d1 after  ts: true 
```

最后一行是好奇的。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T14:40:52.417

如果您查看内部表示以及`after()`方法中比较的内容，您会看到例如

```
millis = 1351607849957 
```

你得到`Date`一个

```
fastTime = 1351607849957 
```

和`Timestamp`一个

```
fastTime = 1351607849000
nanos = 957000000 
```

由于所比较的只是`fastTime`零件，因此您会得到观察到的行为。正如@user714965 上面指出的那样，您不应该将 a`Timestamp`视为`Date`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T14:41:44.967

API 文档`java.sql.Timestamp`说：

> **注意：**此类型是 a`java.util.Date`和单独的纳秒值的组合。只有整数秒存储在`java.util.Date`组件中。小数秒 - 纳秒 - 是分开的。

（这与 Keppil 的回答一致）。

它还说：

> 由于`Timestamp`类与上述`java.util.Date`类之间的差异，建议代码不要将`Timestamp`值一般视为`java.util.Date`. `Timestamp`和之间的继承关系`java.util.Date`真正表示实现继承，而不是类型继承。

这意味着您不应将`Timestamp`其视为 a `java.util.Date`，如果您将其传递给，这就是您正在做的事情`java.util.Date.after()`（该方法需要 a `java.util.Date`- 您传入 a `Timestamp`，将其视为 a `java.util.Date`，此评论说您不应该这样做） .

这在标准 Java 库中当然是糟糕的设计。如果您需要处理日期和时间，请使用[Joda Time](http://joda-time.sourceforge.net/)，这是一个设计更好、功能更强大的库。

# d3.js - d3js如何通过集群非强制布局收集节点？

> ID：13141124
> 
> 赞同：3
> 
> 时间：2012-10-30T14:28:08.210
> 
> 标签：d3.js, force-layout

我有网络，每个节点都有一个通过聚类方法获得的属性组。我想知道在空间中聚集属于同一组的节点的强制布局渲染网络的最佳方法是什么？

一种方法，但我不知道如何实现它，是在同一组的节点之间添加吸引力（与施加到所有节点的排斥力相比几乎没有）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T11:06:05.033

一种可能性是在方向上分配空间`nb_group`并在分配给它们的组的方向上推动节点：

```
 var angle = 2*Math.PI/nb_group;
   var intensity = 500;

    var updateNode = function() {
    this.attr("transform", function(d) {
        var xm = d.x + intensity*Math.cos(angle*d.group);
        var ym = d.y + intensity*Math.sin(angle*d.group);
        return "translate(" + xm + "," + ym + ")";
    });
    } 
```

我`intensity`很高兴，因为我有 1000 的费用 ![在此处输入图像描述](../Images/faf4b30594c0fed893b3f591c32d42f0.png)

# php - php switch case：如果我们有 30 个选项，我们必须创建 30 个 if 语句还是有更简单的方法？

> ID：13141125
> 
> 赞同：2
> 
> 时间：2012-10-30T14:28:12.220
> 
> 标签：php, arrays, drop-down-menu, switch-statement

我在下面找到了这段代码，它非常适合我想要的东西但是我有 30 多个选项我还能做些什么来缩短代码吗？

```
<html>
<body>
    <form method="post" action="?">
    <select name="dropdown">
    <option value="Jehzeel1">Jehzeel1</option>
    <option value="Jehzeel2">Jehzeel2</option>
    <option value="Jehzeel3">Jehzeel3</option>
    </select>
    <input type="submit" value="submit">
    </form>
</body>
</html>

    <?php
    switch ($_POST['dropdown'])  { 

        case "Jehzeel1":
         echo "Jehzeel likes apples";
        break;

        case "Jehzeel2":
         echo "Jehzeel likes bananas";
        break;

        case "Jehzeel3":
         echo "Jehzeel likes oranges";
        break;

    ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:30:44.407

创建映射数组更容易：

```
$map = array(
    'Jehzeel2' => 'Jehzeel likes bananas';
    'Jehzeel3' => 'Jehzeel likes oranges';
);

echo $map[$_POST['dropdown']]; 
```

尽管您可能需要对代码结构三思而后行，但这似乎是一种不好的做法。

**短途：**

```
<?php
$fruits = array('apples', 'oranges', 'bananas');
?>
<form method="post">
    <select name="dropdown">
    <?php foreach ($fruits as $fruit) : ?>
        <option value="<?php echo $fruit ?>"><?php echo $fruit ?></option>
    <?php endforeach; ?>
    </select>
    <input type="submit" value="submit" />
</form>
<?php
if (in_array($_POST['dropdown'], $fruits)) {
    echo 'Jehzeel likes ' . $_POST['dropdown'];
}
?> 
```

**编辑**

您可以通过稍微更改数组和 if 语句来使用 url：

```
$urls = array('url1' => 'http://www.facebook.com/', 'url2' => 'http://www.google.com/', 'url3' => 'http://www.yahoo.com/');

if (isset($urls[$_POST['dropdown']])) {
    echo 'URL: ' . $urls[$_POST['dropdown']];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:30:51.087

考虑将选项的值更改为：

```
<select name="dropdown">
    <option value="apples">Jehzeel1</option>
    <option value="bananas">Jehzeel2</option>
    <option value="oranges">Jehzeel3</option>
</select> 
```

然后只需在您的 php 代码中：

```
$valid_fruits = array("apples", "bananas", "oranges");

$fruit = $_POST['dropdown'];
if(in_array($fruit,$valid_fruit))
    echo "Jehzeel likes $fruit" 
```

我希望它有所帮助。干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T14:31:03.910

您可以使用一个数组，其中值作为键，文本作为值：

```
 // array of key/value pairs
 $text = array(
     "Jehzeel1" => "apples",
     "Jehzeel2" => "bananas",
     "Jehzeel3" => "oranges",
 );
 // create your key from the post value, make sure it is actually set
 $key = isset($_POST['dropdown']))? $_POST['dropdown'] : "";
 // echo the value based on the key, if the key exists
 $value = (array_key_exists($key, $text))? $text[$key] : "nothing";
 // assuming all the text starts with "Jehzeel likes" you can sprintf the value
 echo sprintf("Jehzeel likes %s.", $value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:31:06.107

**使用您的选项创建一个数组**：

```
$DropdownLabels = array (
    'dropdown1' => 'Dropdown1 Long Label',
    'dropdown2' => 'Dropdown2 Long Label',
    // ...,
); 
```

然后使用`$DropdownLabels[$_POST['dropdown']]`并测试它是否存在`array_key_exists($_POST['dropdown'], $DropdownLabels)`。

# sitecore - 在 Sitecore 中，您可以为媒体库项目指定别名吗？

> ID：13141132
> 
> 赞同：3
> 
> 时间：2012-10-30T14:28:48.153
> 
> 标签：sitecore

我想将 PDF 上传到 Sitecore 的媒体库并为其分配一个别名，例如“example.com/hr/form.pdf”。

...而不是“example.com/~media/docs/form.ashx”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:40:18.623

另一种方法是查看 301 重定向模块。它允许映射到项目的硬编码路径或重写模式。

[http://marketplace.sitecore.net/en/Modules/301_Redirect_module.aspx](http://marketplace.sitecore.net/en/Modules/301_Redirect_module.aspx)

总的来说，我被告知要避免使用别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:39:52.710

您不能将 URL 别名分配给媒体项目。好吧，您可以分配它们，但它似乎没有做任何事情。

但是，您可以实现自己的`ItemResolver`管道处理器，为媒体项目添加别名功能。将其与 的自定义实现相结合`MediaProvider`，以便使用它们的别名生成指向媒体项目的链接。

我不确定您的 Sitecore 知识有多深，所以如果您需要有关如何执行此操作的示例，请告诉我，我可以为您指出。

# c - 如果a是数组（如int a[4];），那么&a是什么？

> ID：13141133
> 
> 赞同：0
> 
> 时间：2012-10-30T14:28:51.597
> 
> 标签：c, arrays, pointers, reference

> **可能重复：**
> [C：为什么数组的地址等于它的值？](https://stackoverflow.com/questions/2528318/c-how-come-an-arrays-address-is-equal-to-its-value)

我在 GCC 4.4.1 中测试，我发现`&a=a`. 我无法理解。我认为`&a`应该是存储数组地址的地址，不能相同。有人可以给我一个很好的解释吗？非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T14:31:20.927

数组是内存中的对象。它有一个地址和一个大小。在某些情况下，数组*衰减*为指向其第一个元素的指针也是正确的。所以从数字上看，如果`a`和`&a`都作为指针值进行比较，它们比较相等，因为它们都指向内存中的相同地址。但是它们具有不同的数据类型：在某些上下文中`a`具有类型`int[4]`（“array 4 of `int`”）或`int*`（“pointer to `int`”），而`&a`始终具有类型`int (*)[4]`（“pointer to array 4 of `int`”）。

```
 &a points here
 |
 V
+------+------+------+------+
| a[0] | a[1] | a[2] | a[3] |  sizeof(a) == 16
+------+------+------+------+
 ^
 |
 &a[0] also points here
 In certain contexts, 'a' means &a[0] 
```

因此，`(void *)a == (void *)&a`。

还要注意，因为`a`and`&a`指向不同的数据类型（特别是指向的类型具有不同的大小），所以进行指针运算会产生不同的结果。 `a+1`将指向`&a[1]`（前进一个`int`值），而`&a+1`将指向刚刚超过数组末尾的`&a[4]`，因为它前进了一个“array 4 of `int`”单位：

```
 &a+1 points here
                             |
                             V
+------+------+------+------+
| a[0] | a[1] | a[2] | a[3] |
+------+------+------+------+
        ^
        |
  a+1 points here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:59:39.667

`&a`指向数组中第一个元素的地址（即`a[0]`）。

`a`保存数组的地址。

并且数组（ie `a`）的地址等于数组中第一项的地址（ie `&a`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T14:41:44.900

如果`a`声明为`int a[4]`，`&a`则为类型为的指针`int *[4]`（指向 4 数组的指针`int`）。

在大多数表达式上下文中使用时，`a`计算结果为指向 的第一个元素的指针`a`，并且类型为`int*`。表达式完全等价于`&a[0]`。这是 C99 标准 6.3.2.1/3“左值、数组和函数指示符”中的要求：

> 除非它是 sizeof 运算符或一元 & 运算符的操作数，或者是用于初始化数组的字符串文字，否则类型为 ''array of type'' 的表达式将转换为类型为 ''pointer to type'' 指向数组对象的初始元素并且不是左值。

这通常称为衰减到指针；您会听到它被称为“`a`衰减为指针”。

因此，根据定义，数组的第一个元素与数组本身具有相同的地址。因此，虽然`&a`和`a`具有不同的类型，但它们具有相同的指针值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T14:34:01.973

`a`是数组。

`&a`是数组的地址。

在大多数情况下，`a`在表达式中使用的计算结果为数组第一个元素的地址。当然，哪个地址与数组的地址相同，但类型不同。`&a`不是这些上下文之一，但`a`您比较的 RHS 是。

对于具有相同值但类型不同的两个事物的另一个示例，请考虑`(int)1 == (char)1`该问题`(int)1 == (float)1`。相同的数值，因此它们比较相等，但类型不同，因此它们在所有用途中的行为都不相同。

“它”不会将数组的地址存储在您有权担心的任何地方。如果`a`是一个自动变量，编译器“知道”`a`堆栈指针的偏移量，它不一定存储`a`任何地方的地址，除非你告诉它。如果它是一个全局变量，那么它的地址可能存储在某个符号表中的某个地方，但是您的程序不会直接访问符号表中的那个位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T14:34:43.630

`address of the array` **等于** `address of the first item in the array`。_

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T14:35:03.503

来自维基百科：

> **数组指针互换性**
> 
> “下标”符号 x[i]（其中 x 表示一个指针）是 *(x+i) 的语法糖。

所以`x = *(x+0)`

[维基百科页面](http://en.wikipedia.org/wiki/C_%28programming_language%29#Array-pointer_interchangeability)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T14:31:46.730

```
int a[4]; 
```

`a`是 4 的数组`int`。它的类型名称是`int [4]`.

`&a`是指向数组 4 的指针`int`。它的类型名称是`int (*)[4]`.

请注意，该表达式`&a = a`在 C 中无效：赋值运算符的左操作数必须是可修改的左值，但`&`运算符的结果绝不是左值。

# xcode4 - 向 Xcode4 添加新文件类型（扩展名）

> ID：13141134
> 
> 赞同：0
> 
> 时间：2012-10-30T14:28:52.350
> 
> 标签：xcode4

有没有办法将扩展名 *.ipp 添加到 Xcode4 以便将其视为 C++ 头文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T18:55:28.150

打开文件检查器。在项目导航器中选择 ipp 文件。从文件检查器的 File Type 菜单中选择 C++ Header。

# python - 是否可以在 django 中使用逻辑 OR 进行查询

> ID：13141138
> 
> 赞同：6
> 
> 时间：2012-10-30T14:29:04.270
> 
> 标签：python, django, django-queryset

我有一个模型“组织”，其中包含以下字段

```
class Organization(models.Model):
    members = models.ManyToManyField(User,related_name='org_members')
    title = models.CharField(max_length=200)
    description = models.TextField()
    founder = models.ForeignKey(User,related_name='org_founder')
    def __unicode__(self):
        return self.title 
```

进行查询以获取用户所属的所有组织

```
me=User.objects.get(username='damon')
Organization.objects.filter(members=me) 
```

类似地进行查询以获取用户是创始人的所有组织

```
Organization.objects.filter(founder=me) 
```

我想编写一个查询，它将获取用户是成员的所有组织或他是创始人的课程。

我试过这个如下

```
Organization.objects.filter(members=me or founder=me) 
```

这会导致`Invalid Syntax`错误

有人可以告诉我如何进行此查询

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-30T14:33:56.660

要使用逻辑 OR 进行查询，您需要使用 Q 对象：

```
from django.db import models
Organization.objects.filter(models.Q(members=me) | models.Q(founder=me)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T14:32:52.223

```
from django.db.models import Q
Organization.objects.filter(Q(members='me') | Q(founder='me')) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T14:31:22.003

使用[Q](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)对象。这将帮助你实现你所追求的。

# php - sql语法错误？

> ID：13141139
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:29:13.797
> 
> 标签：php, mysql

我有一个 php 表单，它告诉我提交时我的 sql 语法有错误，但是由于相同的表单和 php 在另一个站点上工作，该站点通过同一提供程序托管，但是在不同的服务器上，我出现了空白：

下面是一些php（疑似问题区域）：

```
 $sql = mysql_query("INSERT INTO members (name, email, password, streetadd, city, state, zip, phone, ext)
VALUES('$name', '$email', '$password', '$streetadd', '$city', '$state', '$zip', '$phone', '$ext')")
or die (mysql_error());
$id = mysql_insert_id();

mkdir("members/$id", 0755); 
```

如果需要更多代码，请告诉我；如果有人能让我知道我哪里出错了，我将不胜感激，也许我的知识已经过时了，我需要重新学习 mysql 和 php，但我认为这应该可行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:30:56.043

在'$ext'之后，您最后缺少一个paranteses：

```
 $sql = mysql_query("INSERT INTO members (name, email, password, streetadd, city, state, zip, phone, ext)
VALUES('$name', '$email', '$password', '$streetadd', '$city', '$state', '$zip', '$phone', '$ext')")
or die (mysql_error());
$id = mysql_insert_id();

mkdir("members/$id", 0755); 
```

另一件事是您可以将其中一个字段设为 int 或其他数字，而这些引号可能是个问题。如果您需要更多帮助，请发布表 shema，查询看起来确实不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:32:03.967

我不知道问题是不是来自这里，但是您的查询不完整，您忘记关闭括号：

尝试这个：

```
 $sql = mysql_query("INSERT INTO members (name, email, password, streetadd, city, state, zip, phone, ext)
VALUES('$name', '$email', '$password', '$streetadd', '$city', '$state', '$zip', '$phone', '$ext');")
or die (mysql_error()); 
```

但正如人们在评论中所说，你不应该使用这种旧方法。PDO 使用准备好的语句更好（它更安全）。或者至少使用mysqli。

# drag-and-drop - PyQt4：使用 QComboBox 拖放时项目消失

> ID：13141143
> 
> 赞同：1
> 
> 时间：2012-10-30T14:29:27.623
> 
> 标签：drag-and-drop, qt4, pyqt4, qcombobox

我想使用拖放来重新排列 QComboBox 中的项目。我试过这个：

```
from PyQt4.QtGui import QApplication, QComboBox, QAbstractItemView

a = QApplication([''])
c = QComboBox()
c.addItem('a')
c.addItem('b')
c.addItem('c')
c.addItem('d')

view = c.view()
view.setDragDropMode(QAbstractItemView.InternalMove)

c.show()
c.raise_()

a.exec_() 
```

但是，将一个项目拖动到另一个项目的顶部会删除拖动的项目——我希望将该项目移动到放置位置的上方/下方。我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:38:14.220

[需要通过设置适当的项目标志](http://doc.qt.digia.com/4.8-snapshot/qt.html#ItemFlag-enum)来禁用每个组合项目作为放置目标。

这是实现这一目标的一种方法：

```
import sys
from PyQt4 import QtCore, QtGui

app = QtGui.QApplication(sys.argv)
combo = QtGui.QComboBox()

model = QtGui.QStandardItemModel()
for text in 'One Two Three Four'.split():
    item = QtGui.QStandardItem(text)
    item.setFlags(item.flags() & ~QtCore.Qt.ItemIsDropEnabled)
    model.appendRow(item)

combo.setModel(model)
combo.view().setDragDropMode(QtGui.QAbstractItemView.InternalMove)
combo.show()

app.exec_() 
```

# java - 如何使用 java 代码为 iOS 创建钛移动模块？

> ID：13141147
> 
> 赞同：0
> 
> 时间：2012-10-30T14:29:38.793
> 
> 标签：java, ios, mobile, module, titanium

有人告诉我如何使用 java 代码为 iOS 创建钛移动模块吗？ [https://github.com/cashlo/JPEG-compression-for-titaninum-](https://github.com/cashlo/JPEG-compression-for-titaninum-)

或者

如何为 iOS 移动应用程序（Titanium）编译以下代码？

```
package com.cashlo.jpglib;

import java.io.ByteArrayOutputStream;

import org.appcelerator.kroll.KrollModule;
import org.appcelerator.kroll.annotations.Kroll;

import org.appcelerator.titanium.TiBlob;
import org.appcelerator.titanium.TiContext;
import org.appcelerator.titanium.util.Log;
import org.appcelerator.titanium.util.TiConfig;

import android.graphics.Bitmap;
import android.graphics.Bitmap.CompressFormat;
import android.graphics.BitmapFactory;

@Kroll.module(name = "Jpglib", id = "com.cashlo.jpglib")
public class JpglibModule extends KrollModule {

    // Standard Debugging variables
    private static final String LCAT = "JpglibModule";
    private static final boolean DBG = TiConfig.LOGD;

    // You can define constants with @Kroll.constant, for example:
    // @Kroll.constant public static final String EXTERNAL_NAME = value;

    public JpglibModule(TiContext tiContext) {
        super(tiContext);
    }

    @Kroll.method
    public TiBlob compress(TiBlob image) {

        BitmapFactory.Options opts = new BitmapFactory.Options();
        opts.inJustDecodeBounds = true;
        byte[] imageBytes = image.getBytes();
        BitmapFactory.decodeByteArray(imageBytes, 0, imageBytes.length, opts);
        Integer imageSize = Math.max(opts.outWidth, opts.outHeight);
        if (imageSize > 600)
            opts.inSampleSize =  imageSize/600;
        opts.inJustDecodeBounds = false;
        Bitmap resized = BitmapFactory.decodeByteArray(image.getBytes(), 0,
                imageBytes.length, opts);
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        resized.compress(CompressFormat.JPEG, 70, stream);
        TiBlob blob = TiBlob.blobFromData(getTiContext(), stream.toByteArray(),
                "image/jpeg");

        return blob;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:26:36.793

这个模块已经存在？你有什么不同的尝试吗？

[https://marketplace.appcelerator.com/apps/1184?1982793044](https://marketplace.appcelerator.com/apps/1184?1982793044)

# php - 为什么回击时表单值不会保留？

> ID：13141149
> 
> 赞同：1
> 
> 时间：2012-10-30T14:29:48.467
> 
> 标签：php, html, forms

我有两种形式，一种是初始注册（会员），另一种是外人发帖。

两者都进入信息确认页面，并且都在 PHP 中进行了错误检查。如果您提交并且您缺少一个字段并点击 BACK，则第一个表单中的值将被保存......尽管第二个表单中的值会丢失。

是否有特定的验证，我仔细检查了 DOCTYPES 等。

关于是什么导致它工作/不工作的任何想法？

**编辑：已修复，确保所有 ELEMENT 标签都正确打开/关闭/定位，并且 DOCTYPES 在验证失败时返回信息。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:24:32.160

我以前遇到过这个问题，你必须确保你所有的 HTML 元素都正确关闭。例如，（在末尾添加斜杠）、for
等。确保 DIV 的打开和关闭不会与其他 DIV 重叠，这应该可以解决问题。

没什么太疯狂的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:01:29.963

这可能与浏览器有关。通常，当您返回时，浏览器会保留表单的数据。但是，如果您提交另一个表单，该数据就会丢失。唯一的方法是每次都提交两个表单，或者使用 javascript 并将数据保存在 php 会话中。

使用 jquery（例如），您会说每次更改输入时，都会使用 AJAX 将整个表单发送到 PHP 会话。加载表单时，然后从会话全局变量加载值。

```
$('#myform input').change(function(){
    var formdata = $('form#myform').serialize();
    $.ajax({
        type: "POST",
        url: "process.php",
        data: formdata
    }).done(function( msg ) {
        alert( "Data Saved: " + msg );
    });
}); 
```

在 php 方面：

```
$_SESSION['form_cache']['form_name'] = parse_str($_POST['data']); 
```

然后当你加载你的表格

```
<?php
$test = isset($_SESSION['form_cache']['form_name']['test']) ? $_SESSION['form_cache']['form_name']['test'] : '';
?>
<input type="text" name="test" value="<?=$test?>" /> 
```

# objective-c - 将 UILabel 定位在相对于屏幕分辨率的区域中

> ID：13141152
> 
> 赞同：1
> 
> 时间：2012-10-30T14:29:57.310
> 
> 标签：objective-c, ios6

我正在尝试相对于屏幕分辨率（iPhone v iPad）定位 UILabel，以便 UILabel 在启动时不会干扰启动画面图形。当应用程序仅为 iPhone 时，标签位置正确。一旦应用程序变得通用，标签就会干扰 iPad 上的图像（当然）

我正在使用下面的方法，效果很好，但就新设备和/或新屏幕分辨率而言，它并不是很有前瞻性。

任何人都可以建议一种更有效的方法来显示 UILabel“连接到服务器...”在下面链接的附加图像上用红色圈出的区域内（我还没有授权在此处发布图像）？

```
 UILabel *loadingLabel;

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    loadingLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 350, self.window.frame.size.width, 20)];
}
else
{
    loadingLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 700, self.window.frame.size.width, 20)];

}
loadingLabel.text = @"   Connecting to Server...";
loadingLabel.textAlignment = UITextAlignmentCenter;
loadingLabel.textColor = [UIColor whiteColor];
loadingLabel.backgroundColor = [UIColor clearColor]; 
```

[启动画面](http://www.iautomate.com/content/splash.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:36:43.160

您可以使用该`autoresizingMask`属性来完成它。将标签上的 origin.y 设置为左​​右`self.window.bounds.size.height - 200`。然后设置`autoresizingMask`为`UIViewAutoresizingMakFlexibleBottomMargin`

# android - Android 4.0 及更高版本的 httpclient.execute(httppost) 问题

> ID：13141153
> 
> 赞同：1
> 
> 时间：2012-10-30T14:29:58.007
> 
> 标签：android, httpclient

我正在为 Android 编写一个应用程序。该应用程序连接到服务器以检索评论。感兴趣的代码是：

```
BufferedReader input = null;
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.domain.com/personal_proj/directorydirectory/file.php");
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpResponse response = httpclient.execute(httppost);
Log.i("TEST","after httpclient.execute()");
HttpEntity entity = response.getEntity(); 
```

我在 HTC Wildfire、HTC Desire Z 中测试了这段代码，它可以工作。如果此代码在 Android 4.0+ 中执行，则永远不会到达该行

```
Log.i("TEST","after httpclient.execute()"); 
```

，服务器永远不会收到请求，也永远不会抛出异常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:43:25.450

我不确定无参数构造的 DefaultHttpClient 的默认连接和套接字超时参数是什么，但我会检查一下，或设置参数：

`HttpParams params = new BasicHttpParams(); HttpConnectionParams.setConnectionTimeout(params, 15000); HttpConnectionParams.setSoTimeout(params, 20000);`

然后使用参数构造您的 HttpClient：

`new DefaultHttpClient(params)`

到那时，如果没有其他响应，您至少应该得到超时。

还要查看[AndroidHttpClient](http://developer.android.com/reference/android/net/http/AndroidHttpClient.html)（它设置了合理的超时，以及 gzip 支持等其他内容），并考虑[更喜欢 HttpUrlConnection](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)的建议（尽管有一些警告）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:14:31.550

感谢查理柯林斯，我注意到我没有很好地处理异常。我捕获的异常是 android.os.NetworkOnMainThreadException。这意味着我不能在主线程上执行网络操作（这是针对 3.0+ 的应用程序抛出的）。使用 AsyncTask 对我有用。

# ember.js - Ember.js - 如何“获取”计算属性

> ID：13141164
> 
> 赞同：3
> 
> 时间：2012-10-30T14:30:21.257
> 
> 标签：ember.js

我已经成功创建并绑定了计算属性，但是如何在代码的其他部分手动获取它们？

```
App.Test = Ember.Object.extend(
   value: "1"
   unit: "INCH"

   display: (->
     value = this.get('value')
     unit = this.get('unit')
     return "#{value} #{unit}"
   ).property('value', 'unit')
) 
```

我如何在控制器中调用“显示”方法？以下显示了我认为可行的方法...

```
myTest = App.Test.create()
displayValue1 = myTest.get('display')
displayValue2 = myTest.display() 
```

displayValue1 只返回一个对象，而不是一个字符串。displayValue2 抛出“未找到函数”错误。那么除了绑定之外，我如何访问此属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:46:21.000

将计算属性视为属性，而不是方法。即使它们包含一点逻辑，它们确实是属性，所以你不应该将它们作为方法调用。

您可以使用经典`Ember.get`方法访问它们，如下所示：

```
MyApp.myObject = Ember.Object.create({
    name: "foo",
    surname: "bar",
    aComputedProperty: function() {
        return this.get('name') + ' ' + this.get('surname');
    }.property('name', 'surname')
});

MyApp.myObject.get('aComputedProperty'); // => 'foo bar' 
```

[您可以在此 JSFiddle](http://jsfiddle.net/f8v3k/)中尝试此代码。

# haskell - 使用 Writer monad 写入文件时如何避免内存问题？

> ID：13141165
> 
> 赞同：8
> 
> 时间：2012-10-30T14:30:22.037
> 
> 标签：haskell

我正在构建一些中等大小的[DIMACS](http://logic.pdmi.ras.ru/~basolver/dimacs.html)文件，但是使用下面使用的方法，与生成的文件的大小相比，内存使用量相当大，并且在我需要生成的一些较大的文件上遇到了`out of memory`问题。

```
import Control.Monad.State.Strict
import Control.Monad.Writer.Strict
import qualified Data.ByteString.Lazy.Char8 as B
import Control.Monad
import qualified Text.Show.ByteString as BS
import Data.List

main = printDIMACS "test.cnf" test

test = do
  xs <- freshs 100000
  forM_ (zip xs (tail xs))
    (\(x,y) -> addAll [[negate x, negate y],[x,y]])

type Var = Int
type Clause = [Var]

data DIMACSS = DS{
  nextFresh :: Int,
  numClauses :: Int
} deriving (Show)

type DIMACSM a = StateT DIMACSS (Writer B.ByteString) a

freshs :: Int -> DIMACSM [Var] 
freshs i = do
  next <- gets nextFresh
  let toRet = [next..next+i-1]
  modify (\s -> s{nextFresh = next+i}) 
  return toRet

fresh :: DIMACSM Int
fresh = do
  i <- gets nextFresh
  modify (\s -> s{nextFresh = i+1}) 
  return i

addAll :: [Clause] -> DIMACSM ()
addAll c = do
  tell 
    (B.concat . 
    intersperse (B.pack " 0\n") . 
    map (B.unwords . map BS.show) $ c)
  tell (B.pack " 0\n")
  modify (\s -> s{numClauses = numClauses s + length c})

add h = addAll [h]

printDIMACS :: FilePath -> DIMACSM a -> IO ()
printDIMACS file f = do
  writeFile file ""
  appendFile file (concat ["p cnf ", show i, " ", show j, "\n"])
  B.appendFile file b
   where
     (s,b) = runWriter (execStateT f (DS 1 0))
     i = nextFresh s - 1
     j = numClauses s 
```

我想保留从句的单子结构，因为它非常方便，但我需要克服记忆问题。如何优化上述程序，使其不使用太多内存？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T14:41:36.373

如果您想要良好的内存行为，您需要确保在生成子句时写出它们，而不是使用惰性或更明确的方法（例如管道、枚举器、管道）将它们收集到内存中并直接转储它们之类的。

这种方法的主要障碍是 DIMACS 格式需要标题中的子句和变量的数量。这可以防止幼稚的实现变得足够懒惰。有两种可能：

务实的做法是先将子句写入临时位置。之后数字是已知的，因此您将它们写入真实文件并附加临时文件的内容。

如果子句的生成没有副作用（除了你的`DIMACSM`monad 提供的效果）并且足够快，那么更漂亮的方法是可能的：运行两次，首先丢弃子句并只计算数字，打印标题行，运行再次生成器；现在打印条款。

[（这是我实施[SAT-Britney](https://github.com/nomeata/sat-britney)的经验，我采用了第二种方法，因为它更符合该上下文中的其他要求。）]

此外，在您的代码中，`addAll`还不够懒惰：即使在编写（在某种意义上）子句`c`之后，也需要保留列表。`MonadWriter`这是另一个空间泄漏。我建议您将其实现`add`为原始操作，然后`addAll = mapM_ add`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T19:05:16.157

正如 Joachim Breitner 的回答中所解释的那样，问题在于`DIMACSM`不够懒惰，既因为使用了严格版本的 monad，也因为在将变量和子句`ByteString`写入文件之前需要变量和子句的数量。解决方案是使用 Monad 的惰性版本并执行两次。事实证明，也有必要`WriterT`成为外单子：

```
import Control.Monad.State
import Control.Monad.Writer

...

type DIMACSM a = WriterT B.ByteString (State DIMACSS) a

...

printDIMACS :: FilePath -> DIMACSM a -> IO ()
printDIMACS file f = do
  writeFile file ""
  appendFile file (concat ["p cnf ", show i, " ", show j, "\n"])
  B.appendFile file b
   where
     s = execState (execWriterT f) (DS 1 0)
     b = evalState (execWriterT f) (DS 1 0)
     i = nextFresh s - 1
     j = numClauses s 
```

# c++ - 最快插入的 C++ 教程或 Redis 示例

> ID：13141166
> 
> 赞同：2
> 
> 时间：2012-10-30T14:30:26.183
> 
> 标签：c++, redis

有没有人有任何参考资源可以显示将市场数据插入 Redis 服务器的最快方法？我正在查看数以百万计的数据集，因此我试图找到一些好的编码示例，以使用 credis 或hiredis 之类的库在 C++ 中实现这一目标。有没有人有一个端到端的教程或一组源代码示例？我似乎只找到简单连接测试或简单插入的示例。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:26:40.170

向 Redis 插入数据最快的方法大概是使用 redis-cli 客户端的管道模式。更多信息在这里：[http ://redis.io/topics/mass-insert](http://redis.io/topics/mass-insert)

现在，如果您对通过 C API 有效地向 Redis 发送许多查询感兴趣，那么 Hiredis 就是您的最佳选择。Hiredis 是最新的并由 Redis 作者维护。我建议在其他选项上使用它，即使在 C++ 上下文中也是如此。

这是一个简单的流水线示例： [https ://gist.github.com/1893378](https://gist.github.com/1893378)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:46:50.907

用 C++ 编写的 redis 客户端是[redis-cplusplus-client](https://github.com/mrpi/redis-cplusplus-client)，在 github repo 上，依赖于 c++ boost 库。

# android - 在运行时自动调整布局（具有 ListView）

> ID：13141168
> 
> 赞同：0
> 
> 时间：2012-10-30T14:30:28.177
> 
> 标签：android, android-layout, android-listview

我有一个对话主题的活动。它的布局有 3 个部分

* * *

**标题**

* * *

* * *

**身体（有列表视图）**

* * *

* * *

**确定按钮**

* * *

这必须始终是我的布局结构。如果我使用以下布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_margin="10dip" >

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/iv_av_logo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dip"
        android:layout_marginTop="2dip"
        android:paddingLeft="6dip"
        android:src="@drawable/tablet_ic_logo" />

    <RelativeLayout
        android:id="@+id/rl_av_found"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/iv_av_logo"
        android:layout_marginBottom="5dip"
        android:paddingLeft="16dip" >

        <TextView
            android:id="@+id/tv_av_found"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/orange"
            android:textSize="22dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/tv_av_recommendation"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/tv_av_found"
            android:layout_marginBottom="8dip"
            android:textColor="@color/white"
            android:textSize="13dp"
            android:visibility="gone" />
    </RelativeLayout>

    <LinearLayout
        android:id="@+id/ll_av_body"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/rl_av_found"
        android:background="@drawable/tablet_dialog_glow" >

        <ListView
            android:id="@+id/lv_av_threats_found"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:cacheColorHint="#00000000"
            android:divider="@drawable/tablet_dialog_separator" >
        </ListView>
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/rl_button_bar"
        android:layout_width="wrap_content"
        android:layout_height="70dip"
        android:layout_below="@id/ll_av_body" >

        <Button
            android:id="@+id/btn_av_ok"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:onClick="onClick"
            android:text="@string/btn_ok" />

        <ImageView
            android:id="@+id/iv_separator"
            android:layout_width="match_parent"
            android:layout_height="1dip"
            android:layout_alignParentTop="true"
            android:background="@drawable/tablet_dialog_footer" />
    </RelativeLayout>
</RelativeLayout> 
```

它给了我想要的东西。但是如果列表增加并且我说有 100 个项目，确定按钮就会消失。

如果我使用这种布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_margin="10dip" >

<RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/iv_av_logo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dip"
        android:layout_marginTop="2dip"
        android:paddingLeft="6dip"
        android:src="@drawable/tablet_ic_logo" />

    <RelativeLayout
        android:id="@+id/rl_av_found"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/iv_av_logo"
        android:layout_marginBottom="5dip"
        android:paddingLeft="16dip" >

        <TextView
            android:id="@+id/tv_av_found"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="@color/orange"
            android:textSize="22dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/tv_av_recommendation"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/tv_av_found"
            android:layout_marginBottom="8dip"
            android:textColor="@color/white"
            android:textSize="13dp"
            android:visibility="gone" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/rl_button_bar"
        android:layout_width="wrap_content"
        android:layout_height="70dip"
        android:layout_alignParentBottom="true" >

        <Button
            android:id="@+id/btn_av_ok"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:onClick="onClick"
            android:text="@string/btn_ok" />

        <ImageView
            android:id="@+id/iv_separator"
            android:layout_width="match_parent"
            android:layout_height="1dip"
            android:layout_alignParentTop="true"
            android:background="@drawable/tablet_dialog_footer" />
    </RelativeLayout>

    <LinearLayout
        android:id="@+id/ll_av_threats"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/rl_button_bar"
        android:layout_below="@id/rl_av_found"
        android:background="@drawable/tablet_dialog_glow" >

        <ListView
            android:id="@+id/lv_av_found"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:cacheColorHint="#00000000"
            android:divider="@drawable/tablet_dialog_separator" >
        </ListView>
    </LinearLayout>
</RelativeLayout> 
```

OK 按钮始终显示在屏幕底部，即使我在 ListView 中只有一项，布局的高度也会全屏显示。

**我应该如何构造我的 xml，以便根据内容包装其高度，并且确定按钮始终可见，而与 ListView 中的项目数无关？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:15:05.737

默认情况下，您应该将参数设置为，Header - Align Top Body(ListView) - below header, Button - below body(ListView)

现在在运行时，您应该获取列表视图的高度以及它是否超出屏幕，如果超出，则将按钮的布局参数设置为 alignParentBottom 并将列表视图的布局参数设置为低于标题和高于按钮。使用反之亦然。

获取列表视图的高度。用这个

```
public int getTotalListViewHeight(ListView lv, BaseAdapter ba) {
        int listviewElementsheight = 0;
        for (int i = 0; i < ba.getCount(); i++) {
            View view = ba.getView(i, null, lv);
            view.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
                                MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
            listviewElementsheight += view.getMeasuredHeight();
            // for Width use view.getMeasuredWidth()
        }
        return listviewElementsheight;
    } 
```

这里的适配器是 listviews 适配器。

也将检查这一点，将按钮高度添加到总高度。

# python - Python 正则表达式匹配直到字符超过多行

> ID：13141170
> 
> 赞同：1
> 
> 时间：2012-10-30T14:30:30.597
> 
> 标签：python, regex, python-2.7, newline

我有一个格式如下的文件：

```
hello = {

     a = "2354a"
     b = "06567567h"

}

goodbye = {
     there = "/home/afhge"

}

...

anotherset = {
      dsfsdf = grhbrwecs
      dfgtmyj = 12345

} 
```

我在 python 中使用正则表达式，我想要匹配的是大括号内的所有内容，因此生成的匹配输出将是以下列表：

```
['\n\n\ta = "2345a"\n\tb = "06567567h"\n\n\n', '\n\there = "/home/afhge"\n\n', '\n\tdsfsdf = grhbrwecs\n\tdfgtmyj = 12345\n\n'] 
```

我试过正则表达式：

```
desired_output = re.findall("{[^}]", file_text) 
```

但是，此正则表达式会导致列表：

```
['{\n', '{\n', '{\n', '{\n', '{\n'] 
```

看起来 [^}] 匹配任何字符，直到换行符为止。我试过做：

```
desired_output = re.findall("{[^}]", file_text, re.S) 
```

和

```
desired_output  = re.findall("{[^}]", file_text, re.M) 
```

没有成功:(。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T14:31:41.517

不，您的角色类别是正确的。它将匹配任何不是的字符`}`（甚至换行符）。问题是`[^}]`只匹配一个字符。只需使用重复量词（您可能应该转义`{`）：

```
r"\{[^}]*" 
```

关于您尝试过的选项。如果有任何`re.S`帮助，因为没有它`.`不匹配换行符。但这`.`确实是唯一受到影响的东西`re.S`。另一个选项`re.M`与它无关。这只会使锚点`^`和`$`匹配线的开始和结束。

此外，由于您只想要括号内的内容，因此您不需要匹配`{`本身，但您可以使用后向查找：

```
r"(?<=\{)[^}]*" 
```

这将不包括`{`在比赛中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:33:26.483

你应该使用`(?<={).*?(?=})`

您的正则表达式**缺少** `}`指定在哪里结束匹配以及`.*?`匹配 0 到多个字符直到它匹配第一个`}`

# php - 更新textarea模糊上的mysql表？

> ID：13141178
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:30:48.077
> 
> 标签：php, sql, text, area

当用户单击文本区域时，我正在尝试使文本区域更新 mysql 中表中的信息。有人可以指导我正确的方向吗？这就是我到目前为止所拥有的。我没有收到任何错误，但是当我更新它时，更改不会保存。

代码

```
 <form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">

<textarea id="title" textarea name="title" rows="10" style="width: 456px; 
    margin-top:3px;
    text-align:left;
    margin-left:-2px;
    height: 120px;
    resize: none; 
    border: hidden;" data-id='$idbio'><?php echo $profile['bio'] ?> </textarea>
</form> 
```

Javascript代码

```
<script type="text/javascript">

$('textarea').on('blur',function () {
    var titleVal = $(this).val(), id = $(this).data('id');        

    $.ajax({
         type: "POST",
         url: "changebio.php",
         data: {title:titleVal , id:id},
         success: function(msg) {
             $('#'+id).html(msg);
         }
   })
});

</script> 
```

变化生物.php

```
 <?php
require_once("session.php"); 
require_once("functions.php");
require('_config/connection.php');
update_profilebio ();
header('Location: http://www.something.com/confirm.php');
?> 
```

函数.php

```
 function update_profilebio() {
            global $connection;
            global $profile_id;
            $query = "UPDATE ptb_profiles
                      SET bio='value'
                        WHERE ptb_profiles.user_id = \"$profile_id\"
                        AND ptb_profiles.user_id = ptb_users.id";
            $update_profilebio_set = mysql_query($query, $connection);
            confirm_query($update_profilebio_set);
            return $update_profilebio_set;

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:04:32.780

有很多*可能的*原因导致这不起作用。其中许多可以通过控制台在一个不错的浏览器中快速检查。

我可以看到*可能*导致问题的是 AJAX 调用之后的成功（这意味着 AJAX 调用需要成功）。您尝试将返回的 HTML 值分配回来，因为在这种情况`$('#'+id).html(msg);`下`id`实际上不是选择器：`id = $(this).data('id')`它是数据 ID。

我个人会将 附加`$idbio`到 id 属性的末尾，如下所示：

```
 <textarea id="title-<?php echo $idbio;?>" textarea name="title" data-id="<?php echo $idbio;?>">
    <?php echo $profile['bio'] ?>
  </textarea>

  <script type="text/javascript">

    $('textarea').on('blur',function () {
        var titleVal = $(this).val(), 
            id = $(this).data('id');        

        $.ajax({
             type: "POST",
             url: "changebio.php",
             data: {title:titleVal , id:id},
             success: function(msg) {
                 $('#title-' + id).val(msg);
             }
       })
    });

  </script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T14:47:49.860

你为什么使用“on”方法？你可以这样做：“$('textarea').blur(function(){...});”，我不知道你在这里使用的“数据”方法是什么：“$(this ).data('id')"，当我想在我的节点中获取一个 id 时，我只是这样："$(this).attr('id');"，还有一件事，你从 textarea 获取字符串第一次使用“val()”方法，然后尝试用“html()”输入一个字符串，这有问题。

# sql - 从带有左连接的 2 个表中选择

> ID：13141181
> 
> 赞同：0
> 
> 时间：2012-10-30T14:30:50.073
> 
> 标签：sql, ms-access

如果您习惯了 SQL，这可能是一个简单的方法，但我不习惯。

我有这个查询：

```
SELECT * 
FROM myTable 
LEFT JOIN anotherTable 
    ON myTable.myField=anotherTable.anotherField 
```

实际上，这个查询从 myTable 返回满足*连接条件*的所有内容（就我的理解而言）。此查询效果很好，但我想从另一个表中选择另一个字段。我想做的是这样的：

```
SELECT myTable.*, myTable2.aSpecificField 
FROM myTable, myTable2 
LEFT JOIN anotherTable 
    ON myTable.myField=anotherTable.anotherField 
WHERE myTable.id = myTable2.id 
```

但是，这不起作用，我收到有关*LEFT JOIN*的错误消息。我希望将 myTable2 中的 aSpecificField 添加到两个表的 ID 匹配的行中。

你能帮我正确构建这个查询吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:41:49.467

Microsoft Access 查询设计窗口允许您使用向导或拖放来创建查询。然后，您可以在设计视图中整理 SQL。将表添加到设计网格，将连接字段从一个表拖到下一个，然后选择所需的字段。

如果您希望提高 Access SQL 的知识，您可以阅读...

这些适用于 Jet (<2007)，但 ACE (>=2007) 在 SQL 方面并没有什么不同

[基础 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa140011%28office.10%29.aspx)
[中级 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa140015%28office.10%29.aspx)
[高级 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa139977%28office.10%29.aspx) [Jet 数据库引擎](http://technet.microsoft.com/en-us/library/cc805477.aspx)

设计背景

[关系数据库设计基础，Paul Litwin，2003](http://r937.com/relational.html)

经常推荐的 MS Access 书籍

[访问食谱](http://books.google.ie/books/about/Access_cookbook.html?id=qtgInMAAA0oC&redir_esc=y)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:56:41.253

所以你想返回两个表的 id 匹配的行？而不是他们不匹配的地方？所以不是左连接或右连接，而是普通连接？

```
Select tab1.*,tab2.* from mytable tab1 
  INNER JOIN mytable2 tab2 
    ON tab1.id = tab2.otherid 
```

或者，如果您有 3 张桌子要加入？

```
Select tab1.*,tab2.*,tab3.* from mytable tab1 
  INNER JOIN mytable2 tab2 
    ON tab1.id = tab2.otherid 
  INNER JOIN mytable3 tab3 
    ON tab1.id = tab3.anotherid 
```

如果需要，将 tabX.* 替换为特定字段？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:32:34.893

列出您的字段，而不是使用`*`. 像这样：

```
SELECT m.Field1, m.Field2, m2.Field1 FROM
MyTable m LEFT JOIN MyTable2 m2 ON m2.ID=m1.ID 
```

根据您的评论，table3 与另一个表有什么关系？只需根据该关系包含它

```
SELECT m.Field1, m.Field2, m2.Field1, m3.Field1 FROM
MyTable m LEFT JOIN MyTable2 m2 ON m2.ID=m1.ID LEFT JOIN MyTable3 m3 ON m3.ID=m2.ID 
```

# ios - iOS中大量嵌套字典信息应该如何存储？

> ID：13141188
> 
> 赞同：0
> 
> 时间：2012-10-30T14:31:13.843
> 
> 标签：ios, dictionary, initialization

我有大量嵌套字典，叶（或大多数嵌套）字典存储整数数据和整数键。所有信息保持不变（但在未来的版本中可能会发生变化）。我目前正在从代码中的常量分配字典，但我觉得我应该从 XML 或类似文件中读取该信息。我已阅读有关核心信息、plist、数据库和档案的信息，但我不希望用户能够更改它，我永远不想能够编写它（可能在发布过程中除外）并且我永远不想显示它。我希望能够在发布之前对其进行手动编辑。

存储此常量数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:21:00.210

基本上，您需要使用应用程序将数据发送到文件中 - `XML or JSON`两者都适用于此。当我不得不做类似的事情时，我使用了 JSON

它的工作原理是这样的：

定义您`JSON`的文本文件（UTF8），然后使用

`NSString initWithContentsOfFile`将文件内容加载到`NSString`

然后，您可以使用`NSJSONSerialization JSONObjectWithData`为您提供顶级词典`JSON`

```
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions  error:&error]; 
```

从中您可以提取您对数据的`NSStrings / NSArrays`使用`NSDictionary objectForKey`。显然，确切的格式将取决于您的`JSON`格式

# jquery-ui - 当我在树视图中添加一个节点时，发生了一些奇怪的事情

> ID：13141191
> 
> 赞同：1
> 
> 时间：2012-10-30T14:31:24.497
> 
> 标签：jquery-ui

这是我第一次在这里寻求帮助！对不起我的英语不好，但我会尽力解释我的问题......

我想在树视图中添加一个新节点，所以我使用树视图文档中的“添加”选项，代码如下：

```
var tree = $('#fileTreeId').treeview({prerendered: true});
var newSublist =  $('<li><span id="'+id+'" class="folder" >'+nomePasta+'</span><ul><li><span class="file">&nbsp;</span></li></ul></li>').appendTo($('#fileTreeId'));
$('#fileTreeId').treeview({add: newSublist}); 
```

所以，它工作正常，但是在我的系统中我有一个点击事件，当我点击文件夹时，我检查父级“ul”以检查它是“可扩展”还是“可折叠”，如果它是“可折叠”我得到通过 ajax 数据库中的日期...

因此，在解释之后，我现在将说出我的疑问。当我调用函数“treeview”时，它会恢复我的逻辑，例如，以前当我单击文件夹时，当文件夹关闭时它给我“可扩展”，当文件夹打开时给我“可折叠”，现在，之后我调用函数“treeview”，它给出了相反的结果，即当文件夹关闭时，类是“可折叠”，当文件夹打开时，父类“ul”是“可扩展”，任何人都有任何想法它可以是什么？

# c# - 当我不想要它时，大字符串似乎会换行

> ID：13141192
> 
> 赞同：0
> 
> 时间：2012-10-30T14:31:28.680
> 
> 标签：c#, string, word-wrap

我正在我的 c# 应用程序中创建一个长字符串。我希望它保持在一行，因为这些是用户选择在数据库中更新的字段的标题。该字符串将在日志文件中使用。

当我选择所有要更新的字段时，似乎字符串太长而无法在一行中显示并自动换行。

我很困惑，因为 textfile 应该能够处理任意长度的字符串（内存允许）而无需换行。

似乎一旦字符串长度超过大约 1050 个字符，它就会自动换行。

我的代码如下：

```
private void UpdateCustomer(string pCurrentFileName, ref StringBuilder log, string date, ref string directoryPath, ref string logFilePath)
{
    // set the logfile paths for customer update
    directoryPath = Path.Combine(pLogFilePath, "CustomerUpdate_Log_" + date.Replace("/", "").Replace(" ", "").Replace(":", ""));
    logFilePath = Path.Combine(directoryPath, "CustomerUpdate.log");
    DataSet customerUpdateDataSet = new CustomerUpdateValidator().ImportCustomersForUpdateFromExcelFileToDataSet(pCurrentFileName);

    log.Append("-------------------------------------------------------------------------" + "\r\n");
    log.Append("Bulk Maintenance Log: Customer Updatess" + "\r\n");
    log.Append("-------------------------------------------------------------------------" + "\r\n");
    log.Append(date + "\r\n\r\n");
    log.Append("Total number of Customer to be updated: " + (customerUpdateDataSet.Tables["CustomerData"].Rows.Count - 2).ToString() + "\r\n\r\n");
    log.Append("Data to be Inserted" + "\r\n");
    log.Append("-".PadRight(300, '-') + "\r\n\r\n\r\n");

    StringBuilder header = new StringBuilder("Row".PadRight(10, ' ') + "\t");
    header.Append("URN".PadRight(40, ' ') + "\t");

    int count = 0;
    // for each row in the grid view
    for (int i = 0; i < this.gridView1.DataRowCount; i++)
    {
        // if the value is checked
        if (Convert.ToBoolean(this.gridView1.GetRowCellValue(i, "CheckMarkSelection")))
        {
            // get the fields from the checked column
            string baxiDescription = this.gridView1.GetRowCellValue(i, "SimpleName").ToString();
            int size = getSizeFromType(this.gridView1.GetRowCellValue(i, "Type").ToString());
            header.Append(baxiDescription.PadRight(size, ' ') + "\t");
            count = i;
        }
    }

    header.Append("Result".PadRight(10, ' ') + "\t");
    header.Append("Reason".PadRight(30, ' ') + "\t");

    log.Append(header.ToString() + "\r\n");
    log.Append(new StringBuilder("-".PadRight(header.Length + 60, '-') + "\r\n"));
} 
```

任何想法为什么会发生这种情况？

我的数据集：

[![在此处输入图像描述](../Images/7800e267780d45caeeb7ed4f2ea1c952.png)](https://i.stack.imgur.com/JyWZt.png)

包装的日志文件：

[![在此处输入图像描述](../Images/09bf662b580e98ae9e90944677dd53b9.png)](https://i.stack.imgur.com/yn8os.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:37:13.010

似乎当我将生成的字符串保存到 .txt 文件中，然后在我的日志文件浏览器中打开文本文件时，问题与 .txt 文件有关，实际上与我的代码无关

# asp.net - 使用 IP 访问时 Windows 身份验证成功，但使用计算机名访问时出现问题

> ID：13141193
> 
> 赞同：1
> 
> 时间：2012-10-30T14:31:31.673
> 
> 标签：asp.net, iis, iis-7, windows-authentication

我的问题是标题本身。

我正在使用 IIS 7 并托管了一个 MVC 4 网站，该网站使用 Windows 身份验证（Windows 域）对用户进行身份验证。

我可以从浏览器访问该网站

> 使用 localhost （来自服务器本身和管理员预置用户）
> 
> 使用 IP

我需要使用计算机名访问该站点 我的网址将是`http://machinename.fullyQualifiedDomainname/AppFolderName`

但是在尝试使用上面的 url 访问时，我得到了一个登录框，我输入了一个有效的用户 ID 和密码，但它说您无权访问。

我尝试使用 IP，我得到了登录框，我尝试使用相同的用户 ID 和密码。然后我可以浏览网站。

**我认为这不是 DNS 的问题，因为在提供 ComputerName 时，它​​会识别服务器并使用登录框提示我。但之后它无法验证用户。**

我的观察是否正确？我需要添加任何东西来实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:21:51.083

1) 尝试 ping machinename.fullyQualifiedDomainname 以确保它首先返回正确的 IP。

如果IP是正确的，那么

2) 检查您的 IIS 条目。确保 machinename.fullyQualifiedDomainname 是 IIS 绑定。

# android - MapView 不显示覆盖

> ID：13141195
> 
> 赞同：0
> 
> 时间：2012-10-30T14:31:36.307
> 
> 标签：android, google-maps

我的任务是将用户的当前位置显示为地图上的叠加层。

到目前为止，我发现启用 GPS 时最好的方法是这样的：

```
public class MyMapActivity extends MapActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);

        final MapView mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

     // Acquire a reference to the system Location Manager
        LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

        // Define a listener that responds to location updates
        LocationListener locationListener = new LocationListener() {
            public void onLocationChanged(Location location) {

                // Called when a new location is found by the network location provider.
                Log.d("location", "locationchanged: " + location.getLatitude() + ", " + location.getLongitude());

                List<Overlay> mapOverlays = mapView.getOverlays();
                GeoPoint point = new GeoPoint((int)location.getLatitude(), (int)location.getLongitude());
                OverlayItem overlayitem2 = new OverlayItem(point, "title", "hello home!");
                Drawable drawable = CouponsMapActivity.this.getResources().getDrawable(R.drawable.androidmarker);
                HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, CouponsMapActivity.this);   
                itemizedoverlay.addOverlay(overlayitem2);
                mapOverlays.add(itemizedoverlay);
//              mapView.postInvalidate();
                mapView.invalidate();
            }

            public void onStatusChanged(String provider, int status, Bundle extras) {}

            public void onProviderEnabled(String provider) {}

            public void onProviderDisabled(String provider) {}
          };

        // Register the listener with the Location Manager to receive location updates
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

    }
} 
```

我在里面放了一个调试点

```
 Log.d("location", "locationchanged: " + location.getLatitude() + ", " + location.getLongitude()); 
```

那里的位置是正确的。

我知道我正在四舍五入坐标，这给了我一个有点错误的结果（它是 GeoPoint 只接受 int 的快速修复）——但这不是问题，因为覆盖也不会出现在错误的位置。它根本没有出现。

编辑：这里是 HelloItemizedOverlay：

公共类 HelloItemizedOverlay 扩展 ItemizedOverlay {

```
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

private Context mContext;

public HelloItemizedOverlay(Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
}

public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
      super(boundCenterBottom(defaultMarker));
      mContext = context;
    }

public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
  return mOverlays.get(i);
}

@Override
public int size() {
  return mOverlays.size();
}

@Override
protected boolean onTap(int index) {
  OverlayItem item = mOverlays.get(index);
  AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
  dialog.setTitle(item.getTitle());
  dialog.setMessage(item.getSnippet());
  dialog.show();
  return true;
} 
```

注意：当我在主线程中手动设置点时，叠加层会起作用，如下所示：

```
 List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.androidmarker);
    final HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this);  
    GeoPoint point2 = new GeoPoint(35410000, 139460000);
    OverlayItem overlayitem2 = new OverlayItem(point2, "Sekai, konichiwa!", "I'm in Japan!");
    itemizedoverlay.addOverlay(overlayitem2);
mapOverlays.add(itemizedoverlay); 
```

所以问题出在其他地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:42:56.930

前段时间我遇到了同样的问题，它在某种程度上与可绘制边界有关。当您在 HelloItemizedOverlay 的构造函数上设置可绘制参数时，请尝试使用此方法。

```
HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(boundCenterBottom(drawable), CouponsMapActivity.this);   

private Drawable boundCenterBottom(Drawable marker) {
    marker.setBounds((-marker.getIntrinsicWidth()) / 2, -marker.getIntrinsicHeight(),
            marker.getIntrinsicWidth() / 2, 0);
    return marker;
} 
```

# algorithm - 在 n*n 网格上生成路径

> ID：13141197
> 
> 赞同：8
> 
> 时间：2012-10-30T14:31:38.480
> 
> 标签：algorithm, multidimensional-array

我有`n*n`网格，例如`n=10`. 我必须用黑白元素填充它。每个黑色元素都必须有一个、两个或三个黑色邻居。不允许包含四个或零个邻居的黑色元素。

我应该如何构建这种网格？

编辑：

更具体地说，它是使用两个`for`循环构建的二维数组：

```
n = 10
array = [][];
for ( x = 0; x < n; x++ ) {
    for ( y = 0; y < n; y++ ) {
        array[x][y] = rand(black/white)
    }
} 
```

此伪代码构建如下：

![当前的](../Images/e0b41276be151e540b59c07e5718aed0.png)

我期望的是：

![预期的](../Images/46e2277465c56a5b5087b94df833d6c6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:10:39.330

显然，您正在尝试在写入网格上生成“黑色路径”形状。

所以让我们去做吧。

*   从白色网格开始。
*   在上面随机放置一些海龟。
*   然后，当您的网格不符合适当的白/黑单元格比例时，请执行以下操作
    *   将每只乌龟随机移动一个单元格并将其涂成黑色，除非这样做会违反“不超过三个黑色邻居”规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T17:05:05.180

也许这个 python 代码可能会有一些用处。它的基本思想是对网格进行某种广度优先遍历，确保黑色像素遵守不超过 3 个黑色邻居的约束。与网格的黑色部分相对应的图形是一棵树，就像您想要的结果一样。

```
import Queue
import Image
import numpy as np
import random

#size of the problem
size = 50

#grid initialization
grid = np.zeros((size,size),dtype=np.uint8)

#start at the center
initpos = (size/2,size/2)

#create the propagation queue
qu = Queue.Queue()

#queue the starting point
qu.put((initpos,initpos))

#the starting point is queued
grid[initpos] = 1

#get the neighbouring grid cells from a position
def get_neighbours(pos):
  n1 = (pos[0]+1,pos[1]  )
  n2 = (pos[0]  ,pos[1]+1)
  n3 = (pos[0]-1,pos[1]  )
  n4 = (pos[0]  ,pos[1]-1)
  return [neigh for neigh in [n1,n2,n3,n4] 
                  if neigh[0] > -1 and \
                     neigh[0]<size and \
                     neigh[1] > -1 and \
                     neigh[1]<size \
         ]

while(not qu.empty()):
  #pop a new element from the queue
  #pos is its position in the grid
  #parent is the position of the cell which propagated this one
  (pos,parent) = qu.get()

  #get the neighbouring cells
  neighbours = get_neighbours(pos)

  #legend for grid values
  #0 -> nothing
  #1 -> stacked
  #2 -> black
  #3 -> white

  #if any neighbouring cell is black, we could join two branches
  has_black = False
  for neigh in neighbours:
    if neigh != parent and grid[neigh] == 2:
      has_black = True
      break

  if has_black:
    #blackening this cell means joining branches, abort
    grid[pos] = 3
  else:
    #this cell does not join branches, blacken it
    grid[pos] = 2

    #select all valid neighbours for propagation
    propag_candidates = [n for n in neighbours if n != parent and grid[n] == 0]
    #shuffle to avoid deterministic patterns
    random.shuffle(propag_candidates)
    #propagate the first two neighbours
    for neigh in propag_candidates[:2]:
      #queue the neighbour
      qu.put((neigh,pos))
      #mark it as queued
      grid[neigh] = 1

#render image
np.putmask(grid,grid!=2,255)
np.putmask(grid,grid<255,0)
im = Image.fromarray(grid)
im.save('data.png') 
```

这是一个结果设置`size = 50`

![网格上的黑树，宽度 50](../Images/6846a56322a0b8831dce344e29c1c23e.png)

和另一个设置`size = 1000`

![网格上的黑树，宽度 1000](../Images/76c57b290bbd80bb11d28e520ced5544.png)

你也可以玩树的根。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:32:45.460

使用您在此处显示的大小，您可以轻松地进行一些蛮力实施。

编写一个函数来检查您是否满足要求，只需遍历所有单元格并计算邻居数。

之后，执行以下操作：

```
Start out with a white grid.
Then repeatedly:
    pick a random cell
    If the cell is white:
        make it black
        call the grid checking routine.
        if the grid became invalid:
            color it gray to make sure you don't try this one again

do this until you think it took long enough, or there are no more white cells.
then make all gray cells white. 
```

如果您的网格很大（数千像素），您可能应该寻找更有效的算法，但对于 10x10 网格，这将在瞬间计算。

# wpf - 禁用按钮鼠标悬停效果

> ID：13141200
> 
> 赞同：6
> 
> 时间：2012-10-30T14:31:42.897
> 
> 标签：wpf

我有一个带有背景图像的 wppf 按钮。

当我将鼠标悬停在背景上时，背景将为空并显示一个按钮。

如何禁用鼠标效果？

```
<Button BorderBrush="{x:Null}" Content="Reset" BorderThickness="0"Foreground="White" Focusable="False">
                        <Button.Background>
                            <ImageBrush ImageSource="button.png" />
                        </Button.Background> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T14:41:47.717

这是我禁用按钮上的视觉鼠标悬停效果的方法。我保留了一些设置，只是为了让您了解如何使用触发器和其他东西，请随意尝试！

```
<Style TargetType="Button" x:Key="ImageButton" BasedOn="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
    <Setter Property="FocusVisualStyle" Value="{x:Null}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Name="border" 
                        BorderThickness="{TemplateBinding BorderThickness}"
                        Padding="{TemplateBinding Padding}" 
                        BorderBrush="{TemplateBinding BorderBrush}" 
                        CornerRadius="5"
                        Background="{TemplateBinding Background}">
                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="BorderBrush" Value="Gainsboro" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Opacity" Value="0.25" />
                        <Setter Property="BorderBrush" Value="Transparent" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

编辑：使用“BasedOn”+ 将 FocusVisualStyle 设置为 null（前 2 行）可以消除鼠标悬停效果。其他一切都只是例子。我在那里添加了一个边框，以便通过触发器来玩它（因为我想要一个自定义的鼠标悬停效果）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T14:44:44.893

在Background 属性`ControlTemplate`中将`Button`被触发器覆盖。
您可以重做整个`ControlTemplate`并忽略背景更改，或者只是将图像添加为您`Button`喜欢的内容，以避免所有这些并发症：

```
<Button.Content>
    <Image Source="button.png" />
</Button.Content> 
```

或者，如果您还需要其中的文本：

```
<Button.Content>
    <Grid>
        <Image Source="button.png" />
        <TextBlock Text="Reset" VerticalAlignment="Center" HorizontalAlignment="Center" />
    <Grid>
</Button.Content> 
```

# actionscript-3 - 在不使用 wsdl 文件的情况下调用 Web 服务

> ID：13141201
> 
> 赞同：0
> 
> 时间：2012-10-30T14:31:44.733
> 
> 标签：actionscript-3, soap

我需要调用网络服务，目前我正在这样做：

```
private var myWebService:WebService = new WebService();
myWebService.loadWSDL('path to wsdl file');

myWebService.addEventListener(ResultEvent.RESULT , function(event:ResultEvent):void {
    trace(event);
});
myWebService.addEventListener(FaultEvent.FAULT , function(event:FaultEvent):void {
    trace(event);
});

myWebService.soapcallName(); 
```

现在我想做同样的事情，但不加载 WSDL 文件并将soapcalls 直接发送到正确的url。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:41:03.093

是的，当我们的 WS 调用必须命中 DMZ 中的代理时，我必须这样做，但 ACTUAL 服务的 WSDL 位于防火墙后面且无法访问。但这是一个棘手的过程。

首先，您需要手动创建soap post 请求。[您可以在 wikipedia http://en.wikipedia.org/wiki/SOAP](http://en.wikipedia.org/wiki/SOAP)上阅读有关该结构的所有信息。这意味着您将需要手动生成所有调用，因为您不能在没有加载 wsdl 的情况下说 SomeService.SomeMethod。现在，您将面临的下一个问题实际上是将其发送出去。因为您需要在 POST 上添加自定义 http 标头，所以您需要构建完整的请求文档（字符串和换行符等）并通过套接字发送（HTTPService 不支持 POST 上的自定义标头）。如果您需要更多帮助来完成这项工作，我可以在此处添加更多示例。

例子：

您基本上需要创建一个方法来生成 SOAP 信封。这是我给你的链接中的一个快速ie......

```
private function getStockPrice(symbol:String):String{
    // you can do this with xml also and call toString() on it later
    var envelope:String = "<?xml version=\"1.0\"?>";
    envelope += "<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\">";
    envelope += "<soap:Header></soap:Header>";
    envelope += "<soap:Body><m:GetStockPrice xmlns:m=\"http://www.example.org/stock\">";
    envelope += "<m:StockName>" + symbol + "</m:StockName>";
    envelope += "</m:GetStockPrice></soap:Body></soap:Envelope>";
    return envelope;
} 
```

然后调用 getStockPrice("IBM") ，它将返回准备就绪的 SOAP 信封，您将使用该信封作为调用的 POST 正文。请注意，在示例中，您必须提前知道 WSDL 中的信息，例如方法名称、参数名称等。使用 Socket() 类将帖子正文发送到服务器，因为您需要添加自定义 SOAPAction 标头。如果你需要这部分的帮助，这里有一个类开始破解它已经做到了......使用它而不是 HTTPService。 [休息HTTP服务](http://code.google.com/p/resthttpservice/)。

# sql-server - 简单的 VB/SQL 应用程序和 AZURE

> ID：13141205
> 
> 赞同：1
> 
> 时间：2012-10-30T14:31:52.710
> 
> 标签：sql-server, vb.net, azure

我有一个简单的 ms sql 2012 express 数据库和一个简单的 VB Express 2010 应用程序作为其前端。

我可以简单地在 Azure 上托管我的 MS SQL 数据库并更新应用程序以查询托管数据库吗？这意味着，应用程序仍然是本地的，但数据库将被托管。我的办公室是分布式的，如果我们能做到这一点，就会省去很多麻烦。

我需要使用虚拟机、云服务还是直接托管？我很难理解每项服务的微妙之处。

我查看了 azure services 信息，并且文档对我来说有点高。我只是想知道这是否是相对简单的事情以及是否有人有任何指向如何使用或 Noob 的 azure 指南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:40:03.000

这绝对是可能的，事实上，设置起来超级容易。

查看有关如何在 Windows Azure 上设置 SQL Server DB 的简单分步说明 - [https://www.windowsazure.com/en-us/develop/net/common-tasks/sql-azure-management/](https://www.windowsazure.com/en-us/develop/net/common-tasks/sql-azure-management/)

您甚至可以从 SQL Server Management Studio 连接到它，就像连接到本地数据库或网络上的数据库一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:40:47.793

理想情况下 - 是的，您可以更改 VB 桌面应用程序使用的连接字符串以引用 Windows Azure SQL 数据库实例而不是本地数据库。也就是说，SQL 数据库并非 100% 与 SQL Server 兼容。请务必查看[http://msdn.microsoft.com/en-us/library/windowsazure/ff394115.aspx上的差异](http://msdn.microsoft.com/en-us/library/windowsazure/ff394115.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:39:01.343

> 我可以简单地在 Azure 上托管我的 MS SQL 数据库并更新应用程序以查询托管数据库吗？

是的，您的 SQL Azure 数据库可通过连接字符串访问，但您必须确保在 SQL Azure 中创建防火墙规则，以允许本地托管或远程托管的应用程序访问数据库。默认情况下，一切都关闭。

> 我需要使用虚拟机、云服务还是直接托管？

我不完全确定你在这里问什么，但 VM 可能有点矫枉过正，因为这基本上为你提供了一个在 Azure 中托管 VM 的地方。您可以控制 O/S、修补等。云服务（Web 或工作角色）的维护工作量较小，因为 O/S、补丁、更新等由 Azure 维护，您只需担心您的应用程序. 直接托管 - 您是在谈论托管 1&1 还是 GoDaddy 或其他什么？如果是这样，那与您在本地运行并访问您的 Azure 数据库的 VB 应用程序确实没有什么不同。对于此选项，只需确保您的防火墙规则设置正确，否则您将无法访问数据库。

希望这会有所帮助。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:39:20.823

Azure 有一些需要满足的特定要求（例如每个表都必须具有聚集索引），并且它不支持“普通”SQL Server 上可用的某些功能（例如复制、FILESTREAM 数据或数据压缩）。

除此之外，只要你的应用满足要求，就没有理由不能在 Azure 上运行。Azure 不支持的大多数功能很可能超出了“菜鸟”将实现的范围，因此您可能是安全的。

但是，对于您的需求，Azure 可能过于昂贵。将数据库托管在某个地方可能会更便宜。这意味着您只需更改应用程序的连接字符串以指向新的数据库服务器（尽管您的托管服务提供商可能会施加额外的限制）。

祝您最终选择的任何选项好运！

# java - 使用 Java 进行 XSL 转换：数字格式问题

> ID：13141212
> 
> 赞同：2
> 
> 时间：2012-10-30T14:32:12.690
> 
> 标签：java, transform, xslt-1.0, xslt

我有 JDK6 并使用 JAXP 进行转换。我是 XSLT 的初学者。

源 XML：

```
<Number>
    <Value>529.82</Value>
</Number> 
```

XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="Number">
        <xsl:element name="Result">
            <xsl:element name="Total">
                <xsl:attribute name="Amount">
                    <xsl:value-of select="format-number(Value, '#.00')*100"/>
                </xsl:attribute>
            </xsl:element>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

输出 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<Result>
     <Total Amount="52982.00000000001"/>
</Result> 
```

这里属性的值`Amount`应该是52982。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:41:55.127

**使用**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="Number">
     <Result>
      <Total amount="{round(format-number(Value, '#.00')*100)}"/>
     </Result>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Number>
    <Value>529.82</Value>
</Number> 
```

**产生了想要的正确结果**：

```
<Result>
   <Total amount="52982"/>
</Result> 
```

**说明**：

XSLT 1.0 只有一个数字类型，它是*双精度*类型。

与任何浮点类型一样，存在精度误差。

在 XPath 2.0 / XSLT 2.0 中，可以使用该`xs:decimal`类型，从而消除任何精度错误——当然，该`xs:decimal`类型具有定义的最大位数。

* * *

**作为参考，这里是相应的 XSLT 2.0 转换，使用`xs:decimal`：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="Number">
     <Result>
      <Total amount="{xs:decimal(format-number(Value, '#.00'))*100}"/>
     </Result>
 </xsl:template>
</xsl:stylesheet> 
```

**结果**：

```
<Result>
   <Total amount="52982"/>
</Result> 
```

**甚至更简单（没有`format-number()`）：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="Number">
     <Result>
      <Total amount="{xs:decimal(Value)*100}"/>
     </Result>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:41:13.197

尝试

```
<xsl:value-of select="format-number(Value*100, '#')"/> 
```

您之前的方法的问题是您将其格式化`Value`为字符串，然后将其转换回数字并将其乘以 100。您需要对原始数字进行乘法运算，然后格式化结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:41:39.203

您可以使用该`round()`功能。只需将您的电话包裹`format-number()`在其中即可。以下样式表可以解决问题：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="Number">
        <xsl:element name="Result">
            <xsl:element name="Total">
                <xsl:attribute name="Amount">
                    <xsl:value-of select="round(format-number(Value, '#.00')*100)"/>
                </xsl:attribute>
            </xsl:element>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

# android - 自动旋转时更改布局

> ID：13141214
> 
> 赞同：1
> 
> 时间：2012-10-30T14:32:19.963
> 
> 标签：android, layout, screen-rotation

我想制作一个包含两部分的垂直布局的图片库：顶部的图像和下方的水平滚动图标。我知道该怎么做。

但我也希望，当自动旋转时，图标保持在右侧。也就是说，我想将垂直布局更改为水平布局，将水平滚动条更改为垂直布局。 

这该怎么做？任何线索/链接将不胜感激。

谢谢！

L.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T14:44:12.467

您需要为每个方向（横向、纵向）设置不同的布局，并且可能更多用于不同的屏幕尺寸。从[android 文档](http://developer.android.com/training/basics/supporting-devices/screens.html)开始。

如果您有特定问题，请发布问题，一些您尝试过的代码，我们会看看我们是否可以帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:41:49.453

你必须有多个布局。创建 2 个布局。一个在`layout`纵向文件夹中，然后将其复制并粘贴到`layout-land`横向文件夹中，然后相互自定义。

# ios - 从模拟器中运行的 iOS 应用程序访问 OSX API 以进行调试

> ID：13141222
> 
> 赞同：2
> 
> 时间：2012-10-30T14:32:36.930
> 
> 标签：ios, linker, ios-simulator, objective-c-runtime

出于调试目的，我正在寻找一种 iOS 应用程序（我可以访问其源代码）可以与单独的 OSX 应用程序通信的方式，例如通过套接字。

由于在模拟器中运行的 iOS 应用程序在 Mac 上本地运行，通过使用专门设计的 iOS 模拟器框架，通过 OSX 框架路由 I/O，我必须有一种方法可以用我自己的代码实现这一点。

简单地将标准 OSX 框架添加到项目中并在 iOS 应用程序中使用它们是行不通的：

如果我尝试加载已经作为 iOS 框架存在的 OSX 框架，iOS 框架将始终是首选，这意味着如果框架功能仅在 OSX 上可用但在 iOS 中不可用，我将无法使用它。如果框架还不存在，比如 Carbon.framework，那么我可以让链接器尝试加载它。例如，如果我尝试访问作为 Carbon.framework 的一部分的 SysBeep()，则链接器会在它想要解析指向已作为 iOS 加载的其他库的外部符号时失败并显示错误消息- 只有库。

我还尝试使用 dlopen() 加载 OSX 特定框架，但同样失败。

换句话说：

我的 iOS 代码如何另外访问特定于 OSX 的库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:08:21.007

这一次有很多问题。让我们一步一步来：

> 出于调试目的，我正在寻找一种 iOS 应用程序（我可以访问其源代码）可以与单独的 OSX 应用程序通信的方式，例如通过套接字。

绝对可以在模拟器中运行的 iOS 应用程序进程中使用 OS X 工具。使用普通套接字将非常简单，因为 BSD 库在 iOS 和 Mac OS 中是相同的。您可以简单地编译您的 C 代码，它会透明地使用底层操作系统。

如果你想使用 Objective-C API，`NSURLConnection`你也可以这样做。在模拟器中，您的应用程序使用 Mac OS 版本的 Foundation 和 Core Foundation。在大多数情况下，您不会意识到这一点，因为 API 非常相似。

> [...] 由于名称空间冲突，链接器将难以将事物分开 [...]

目前还不清楚你在这里尝试实现什么。正如我所解释的，模拟器进程直接使用适当的 Mac OS 较低级别的框架。链接到 AppKit 等更高级别的框架是没有意义的，因为该应用程序不使用 Cocoa 桌面组件。这就是为什么没有`NSApplication`符号并且应用程序没有实例化符号的原因。相反，它使用`UIApplication`模拟器特制 UIKit 框架中的类，位于

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/UIKit.framework 
```

> [...] 构建上述内容会导致链接器错误 [...]

这是因为链接器被指示仅查看不存在 AppKit 的 iPhoneSimulator SDK（使用链接器标志，如`-isysroot <path-to-SDK>`）。

但在这一点上，可能值得问自己为什么要首先链接到 AppKit。您可以在没有 AppKit 的情况下设置进程间通信。

> 哦，为了证明它一定是可能的，看看 RubyMotion [...]

在模拟器中，事件处理是在“iOS-Simulator.app”进程（这是一个 Mac OS 应用程序）中完成的。要从您的模拟器进程中获取这些事件，您可能可以使用[Quartz Event Services](https://developer.apple.com/library/mac/documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html#//apple_ref/doc/uid/TP40003550-CH201-TPXREF101)。

# cakephp - ubuntu上的cakephp配置

> ID：13141223
> 
> 赞同：1
> 
> 时间：2012-10-30T14:32:40.470
> 
> 标签：cakephp, ubuntu, configuration

我在 Ubuntu 上使用 CakePHP，我试图用 ubuntu 配置 cakephp，但我发现了这个错误：

> 错误：[MissingControllerException] 找不到控制器类 ImgController。
> 
> #0 /var/www/app/webroot/index.php(96): Dispatcher->dispatch(Object(CakeRequest), Object(CakeResponse))

有没有人找到解决此错误的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T08:21:01.733

你有 apache mod_rewrite 工作吗？

为了使用 mod_rewrite，您可以在终端中键入以下命令：

```
a2enmod rewrite 
```

之后重启apache2

```
/etc/init.d/apache2 restart 
```

在您的虚拟主机中添加

```
<Directory /var> # change this path for yours
    Options FollowSymLinks
    AllowOverride All
</Directory> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:29:28.810

我认为您尝试访问 img 文件夹中不存在的文件。如果你有一个像

> /img/my_picture.png

ant文件不存在，CakePHP将它映射到不存在的控制器img，所以错误[MissingControllerException]

* * *

为了帮助您理解，这里 htaccess 做了什么：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

这里有一些关于路由的文档[http://book.cakephp.org/2.0/en/development/routing.html](http://book.cakephp.org/2.0/en/development/routing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T10:57:58.047

我犯了同样的错误。打开您的控制台并刷新页面。正在尝试加载图像但未找到。在控制台/网络调试器中，您应该有一条带有错误的红线来加载 img。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T16:26:44.973

我不确定运行 Ubuntu 是否与此问题有关。您试图在浏览器中访问的 URL 是什么？鉴于您尝试访问`http://localhost/img`但尚未`ImgController.php`在控制器目录中定义的错误？

# javascript - 有没有办法在用户使用 javascript 和 css 键入时设置 textarea 内容的样式？

> ID：13141224
> 
> 赞同：4
> 
> 时间：2012-10-30T14:32:46.717
> 
> 标签：javascript, jquery, html, css, forms

我很好奇是否有一种方法可以在用户键入时设置文本区域中的内容样式。

例如：

```
<textarea>abcdefghijklmnopqrstuvwxyz</textarea> 
```

我可以使用 javascript 在屏幕上突出显示上述 textarea 字符串中的所有元音吗？但仍然只在提交表单时发送字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:37:35.577

您可以使用`div`with`contentEditable`属性代替`textarea`and 在那里进行突出显示。

[https://developer.mozilla.org/en-US/docs/HTML/Content_Editable](https://developer.mozilla.org/en-US/docs/HTML/Content_Editable)

`div`如果您需要发布它，您仍然需要将其内容复制到表单的隐藏字段中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:39:20.907

给`id`textarea 一些内容并将其`onkeyup`事件与 jquery 函数绑定。类似这样的东西

```
$('#id_of_textarea').bind('keyup', function() { 
//for displaying vowels on screen
var str=$('#id_of_textarea').val();
var total_findVowels="";
for (var i = 0; i < str.length; i++) {
if (str.charAt(i).match(/[a-zA-Z]/) != null) {
// findVowels
 if (str.charAt(i).match(/[aeiouAEIOU]/))
 {
  total_findVowels=total_findVowels+str.charAt(i);            
 }
}
 //use some label to display all vowels
  $("#some_lbl").text(total_findVowels);
 }//for
} ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:44:48.897

尝试这个

```
<div contenteditable="true">
          This text can be edited by the user.
 </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:38:56.553

您可以查看其中一个问题以获得一些灵感。他们专门讨论了实时语法突出显示，所以它不是您所要求的，但可能足够接近，语法突出显示似乎是一个更常见的问题，因此更容易找到一些现成的解决方案：

*   [可以即时进行语法突出显示的文本区域？](https://stackoverflow.com/questions/1619167/textarea-that-can-do-syntax-highlighting-on-the-fly)
*   [是否有任何 JavaScript 实时语法荧光笔？](https://stackoverflow.com/questions/61655/are-there-any-javascript-live-syntax-highlighters)
*   [https://stackoverflow.com/questions/1505761/textarea-with-syntax-code-highlighting](https://stackoverflow.com/questions/1505761/textarea-with-syntax-code-highlighting)
*   [javascript中的实时文本颜色变化](https://stackoverflow.com/questions/12762654/live-text-color-change-in-javascript)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T14:41:33.187

如果精确并只回答您的问题：没有办法做到这一点，但正如其他人所说，还有其他方法可以解决您的任务

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T14:45:48.550

我使用以下代码片段：

```
$( "#yourtextarea" ).bind( "keyup input paste", parseAndReplaceContent ); 
```

我的`parseAndReplaceContent`函数调用 jQuery`$( "#yourtextarea" ).val()`来访问和修改数据。

# asp.net-mvc - 如何让电子邮件使用 WebMail.Send 中的“From”参数和 MVC？

> ID：13141227
> 
> 赞同：1
> 
> 时间：2012-10-30T14:33:01.537
> 
> 标签：asp.net-mvc, smtp, contact-form, mailmessage, webmail

我在我的网站上设置了一个联系表格，供用户向我发送消息以取得联系。

发送消息的 WebMail.Send() 方法工作正常，但问题是，当我收到电子邮件时，它是从我为 SMTP 客户端定义的电子邮件中收到的。

发送邮件的调用如下所示：

```
WebMail.Send(mailMessage.To[0].Address, mailMessage.Subject, mailMessage.Body, mailMessage.From.Address); 
```

我想知道的是如何使用此方法获取要发送的消息，但使用 MailMessage 的发件人地址而不是我的 SMTP 帐户地址接收给我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:39:58.680

```
mailMessage.From = New MailAddress("whatever@yourdomain.com") 
```

# windows-server-2008-r2 - Windows Server 2008 R2 RDP 打印机未映射

> ID：13141231
> 
> 赞同：0
> 
> 时间：2012-10-30T14:33:09.940
> 
> 标签：windows-server-2008-r2, terminal-services

通过 RDP 连接到具有终端服务的 Windows Server 2008 R2 64 位时，一个用户的打印机没有映射的问题。这是场景：

*   大约 7 个用户通过 RDP 连接到运行终端服务的 Windows Server 2008 R2 64 位服务器
*   用户通过运行最新 RDP 客户端的 Windows 7 或 Windows XP SP3 工作站进行连接
*   所有用户通过相同的组织单位连接并使用相同的组策略
*   用户有 3 台联网打印机，他们的 RDP 客户端设置为映射：
    *   HP LaserJet 4250 PCL 6（默认）
    *   HP LaserJet P4010_P4510 PCL 6
    *   夏普 MX-5001N PCL6
*   7 位用户中有 6 位已成功映射所有打印机
*   未成功的用户没有任何正在映射的打印机。作为故障排除步骤，我们设置了 Generic/Text Only 并验证了该打印机是否已映射。
*   已直接在终端服务器上安装了上述打印机的打印机驱动程序

不确定此时要采取什么步骤——有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T20:47:31.127

这有帮助吗？

[http://www.rackspace.com/knowledge_center/article/common-windows-issues-mapped-printers-unreachable](http://www.rackspace.com/knowledge_center/article/common-windows-issues-mapped-printers-unreachable)

确保终端服务配置（2003 R2 和 2008）和远程桌面服务配置 (2008 R2) 允许客户端打印机映射。

**对于 Windows 2008：** 单击开始、管理工具、终端服务、终端服务配置。在左侧窗格中，选择 RD 会话主机配置，然后在右侧窗格的连接部分中右键单击 RDP-Tcp，然后选择属性。在弹出的窗口中，单击客户端设置选项卡并确保 Windows 打印机旁边的框未选中（阅读：选中此框意味着打印机映射已禁用）。

**对于 Windows 2008 R2：** 单击开始、管理工具、远程桌面服务、远程桌面主机配置。在左侧窗格中，选择 RD 会话主机配置，然后在右侧窗格的连接部分中右键单击 RDP-Tcp，然后选择属性。在弹出的窗口中，单击客户端设置选项卡并确保 Windows 打印机旁边的框未选中（阅读：选中此框意味着打印机映射已禁用）。

**对于 Windows 2003 R2：**单击开始、管理工具、终端服务配置。选择 Connections 文件夹并右键单击 RDP-Tcp 并选择 Properties。在弹出的窗口中，单击客户端设置选项卡并确保 Windows 打印机映射旁边的框未选中（阅读：选中此框意味着打印机映射已禁用）。注意：Rackspace 不再提供带有 Windows 2003 的云服务器，但这些说明用于旧版支持目的。

编辑 - 我发现了我的问题：检查您的事件查看器 - 系统 *“打印机所需的驱动程序东芝通用打印机!!cgy-dc1！Spa-Colour 未知。请在再次登录之前联系管理员安装驱动程序。”*

# c++ - 这段cpp代码是怎么转储的？

> ID：13141233
> 
> 赞同：1
> 
> 时间：2012-10-30T14:33:10.570
> 
> 标签：c++, exception, runtime-error

我的意思是获得一些知识`stack unwinding`并遇到了[这个页面](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?)，它用下面的例子演示了它。

```
#include <iostream>
using namespace std;

struct E {
  const char* message;
  E(const char* arg) : message(arg) { }
};

void my_terminate() {
  cout << "Call to my_terminate" << endl;
};

struct A {
  A() { cout << "In constructor of A" << endl; }
  ~A() {
    cout << "In destructor of A" << endl;
    throw E("Exception thrown in ~A()");
  }
};

struct B {
  B() { cout << "In constructor of B" << endl; }
  ~B() { cout << "In destructor of B" << endl; }
};

int main() {
  set_terminate(my_terminate);

  try {
    cout << "In try block" << endl;
    A a;
    B b;
    throw("Exception thrown in try block of main()");
  }
  catch (const char* e) {
    cout << "Exception: " << e << endl;
  }
  catch (...) {
    cout << "Some exception caught in main()" << endl;
  }

  cout << "Resume execution of main()" << endl;
} 
```

但是，当我使用*g++* /*clang++* 编译时，它得到了核心转储。输出如下：

```
In try block
In constructor of A
In constructor of B
In destructor of B
In destructor of A
Call to my_terminate
已放弃 (核心已转储)   #core dump 
```

谁能给我一些提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:48:11.117

答案是您在抛出异常时正在抛出异常。

在`main()`中，您构造了一个 A 实例。然后你抛出一个异常。 *在*它被捕获之前，`A::~A`被调用，它*也会*抛出一个异常。同时存在两个异常会导致`terminate()`（或用户提供的等效项）被调用（默认情况下，调用 abort()，这会丢弃一个核心。无论哪种方式，程序都无法恢复。）

另外：这是导致一般最佳实践规则的原因，即您不得在析构函数中抛出异常，除非您打算让它杀死您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:38:34.737

`set_terminate()`期望函数提供给它*[终止](http://www.cplusplus.com/reference/std/exception/set_terminate/)*程序。

> 不带参数并返回 void 的函数。该函数**不应返回**并应**终止**程序。terminate_handler 是一个不带参数并返回 void 的函数指针类型。

如果您没有在提供的函数中退出，set_terminate 在调用终止函数后会自动调用 abort()。只需添加`exit(0);`以`my_terminate()`避免看到此 abort() 消息。

# mysql - MYSQL 插入第一个空列

> ID：13141236
> 
> 赞同：2
> 
> 时间：2012-10-30T14:33:18.123
> 
> 标签：mysql, sql, query-optimization

我有一个 tbl，例如：

```
uniqueId     |    col1    |    col2   |   col3   
u1                 8       
u2
u3                 13           89 
```

我想要的是插入第一个空列（如果有帮助可以使它们为空）。在给定的情况下，如果我将值 2 添加到 u1，它将被插入 col2。如果我为 u2 这样做，它将进入 col1。对于 u3，它将进入 u3。这三个查询可以解决问题，但我宁愿一次性完成。

`INSERT INTO tbl SET col1 = $toInsertVal WHERE uniqueId=u col1=''`
`INSERT INTO tbl SET col2 = $toInsertVal WHERE uniqueId=u col1<>'' AND col2=''`
`INSERT INTO tbl SET col3 = $toInsertVal WHERE uniqueId=u col1<>'' AND col2<>'' AND col3=''`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:36:03.567

```
insert into tbl set 
col1 = case when col1 = '' then $toInsertVal else col1 end
, col2 = case when col2 = '' and col1 <> '' then $toInsertVal else col2 end
...
where uniqueid = u 
```

`NULL`为了简单起见，我忽略了 s 。基本上，您可以`CASE`在每一列上使用 a，检查第一个空列并将其值设置为当前值（如果不需要更改）。

# sql-server - 使用日期时间 MSSQL 查询创建统计表

> ID：13141241
> 
> 赞同：0
> 
> 时间：2012-10-30T14:33:30.993
> 
> 标签：sql-server

我有一张小桌子，这让我很难过：

```
Person    datetime1                   datetime2
Eric      2012-10-01 09:00:05.000     2012-10-01 22:00:00.000
Anna      2012-10-02 06:00:05.000     2012-10-03 12:00:05.000
Richard   2012-10-03 09:00:05.000     2012-10-04 02:00:05.000
Chuck     2012-10-01 12:00:05.000     2012-10-01 23:00:05.000 
```

我正在尝试编写一个查询，它给了我统计表。此表包含有关用户何时登录和注销的信息（每日粒度）：

```
Date        logged_in  logged_off
2012-10-01  2          2
2012-10-02  1          0
2012-10-03  1          1
2012-10-04  0          1 
```

根据我的研究，枢轴命令可以解决问题吗？

```
select Person,
SUM(case when datetime1 = '2012-10-01' then 1 else 0 end) as [loggeed_in],
SUM(case when datetime2 = '2012-10-01'  then 1 else 0 end) as [logged_of]
from table
group by Person 
```

这不起作用......你有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:49:54.493

这将修复当前查询，但不知道它是否会解决整个问题......

```
select Person,
SUM(case when convert(varchar(10), datetime1, 111) = '2012/10/01' then 1 else 0 end) as [loggeed_in],
SUM(case when convert(varchar(10), datetime2, 111) =  '2012/10/01'  then 1 else 0 end) as [logged_of]
from table
group by Person 
```

编辑：我相信这会更好地满足要求......

```
SELECT 
    [Date] = dt,
    logged_in = (
        SELECT COUNT(*)
        FROM table1
        WHERE convert(varchar(10), datetime1, 111) = convert(varchar(10), dt, 111)),
    logged_off = (
        SELECT COUNT(*)
        FROM table1
        WHERE convert(varchar(10), datetime2, 111) = convert(varchar(10), dt, 111))
FROM (
    SELECT TOP 1000
        row_number() OVER(ORDER BY (SELECT 0)) AS N
        FROM master.dbo.syscolumns sc1, master.dbo.syscolumns sc2) tally
    CROSS APPLY(
        SELECT dt = DATEADD(dd, tally.N - 1, '2012-10-1')) tallydt
WHERE dt BETWEEN (SELECT MIN(dateadd(dd, -1, datetime1)) FROM table1) AND (SELECT MAX(datetime2) FROM table1)
GROUP BY dt 
ORDER BY dt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:26:21.697

这是工作解决方案：

```
WITH O AS (
SELECT
CAST([login Date & Time] AS DATE) loginDate
,COUNT(*) logined
 FROM table
 GROUP BY CAST([login Date & Time] AS DATE)
 ), C AS (
SELECT 
CAST([Close Date & Time] AS DATE) CloseDate
,COUNT(*) Closed
 FROM table
WHERE [Close Date & Time] IS NOT NULL
GROUP BY CAST([Close Date & Time] AS DATE)
 )
 SELECT
COALESCE(C.CloseDate, O.loginDate) TheDate
--,O.loginDate
--,C.CloseDate
,O.logined
,C.Closed
  FROM O 
  FULL JOIN C
 ON O.loginDate = C.CloseDate
 ORDER BY TheDate 
```

# java - 在 Java 中加载 _id MongoDB 我的对象

> ID：13141245
> 
> 赞同：0
> 
> 时间：2012-10-30T14:33:37.460
> 
> 标签：java, mongodb

JAva 我有以下问题。我有一个移动对象。

```
Calss object mobile
private ObjectId _id;
private String number;
private String nroMatricula; 
```

获取和设置等。

MongoDB 恢复时。

```
String id = "5089e5fde4b07bf6f368366b";
DBObject soid = new BasicDBObject("_id", new ObjectId(id));
String s = MongoAccess.getSingleton().GetOneValueByKey("mobile", soid);
Mobile m = js.fromJson(s, Mobile.class);

public String GetOneValueByKey(String thecollection, DBObject key)
{
    String result = null;
    try {
        DBCollection collection = MDB.getCollection(thecollection); 
     result = JSON.serialize(collection.findOne(key));
    } catch (Exception e) {
        Logger.getLogger(MongoAccess.class.getName()).log(Level.SEVERE, e.toString());
    }
    return result;
} 
```

恢复数据正确但 _id 属性。我加载了数据库中的数据，但它会生成一个新的 ID。那应该是正确的_id“5089e5fde4b07bf6f368366b”，但这不是对象的费用。我可以搭把手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:18:42.213

解决方案

```
JsonDeserializer<ObjectId> des = new JsonDeserializer<ObjectId>() {

                    @Override
                    public ObjectId deserialize(JsonElement je, Type type, JsonDeserializationContext jdc) throws JsonParseException {
                        return new ObjectId(je.getAsJsonObject().get("$oid").getAsString());
                    }
                };

                Gson gson = new GsonBuilder().registerTypeAdapter(ObjectId.class, des).create(); 
```

# jquery - jQuery Masonry 空格

> ID：13141246
> 
> 赞同：4
> 
> 时间：2012-10-30T14:33:38.543
> 
> 标签：jquery, jquery-masonry

[在这里摆弄](http://jsfiddle.net/xKjUv/7/)- 我需要它在立方体之间没有空闲空间，就像它在示例中那样。就像 Windows 8 磁贴之类的东西。我想留在砖石，没有同位素，因为砖石是麻省理工学院的许可证。可能吗？我在砌体设置方面有些混乱，但没有帮助，所以我在小提琴上清除了它。

```
$("#container").masonry(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T07:00:59.997

您想将默认列宽更改为 1px，

```
/* JS */   
$("#container").masonry({
    columnWidth: 1,
}); 
```

否则默认为第一个元素的宽度。

下一步您应该删除边距

```
/* CSS */
.box-item {
    margin: 0px;
} 
```

它应该可以工作。

这是我认为您正在寻找的东西[http://jsfiddle.net/xKjUv/38/](http://jsfiddle.net/xKjUv/38/)

# jquery - 点击链接折叠已经展开的手风琴

> ID：13141248
> 
> 赞同：1
> 
> 时间：2012-10-30T14:33:49.103
> 
> 标签：jquery

我有一个手风琴，当页面加载时，所有手风琴都折叠起来，当您单击其中一个时，它会展开。当前仅当您单击已折叠的链接时才会折叠。

如何更改下面的 jQuery，以便当您单击已经展开的手风琴时它会折叠？

我知道这个问题已经有一些变体，但我不能用我知道的小 Jquery 得到答案！

```
<script type="text/javascript">
jQuery(function($) {
$(document).ready(function(){   
    //Set default open/close settings
    $('.acc_container_products').hide(); //Hide/close all containers
    // $('.acc_trigger_products:first').addClass('active').next().show(); //Add "active" class to first trigger, then show/open the immediate next container

    //On Click
    $('.acc_trigger_products').click(function(){
    if( $(this).next().is(':hidden') ) { //If immediate next container is closed...
        $('.acc_trigger_products').removeClass('active').next().slideUp(); //Remove all .acc_trigger classes and slide up the immediate next container
        $(this).toggleClass('active').next().slideDown(); //Add .acc_trigger class to clicked trigger and slide down the immediate next container
    }
    return false; //Prevent the browser jump to the link anchor
    });
});
});
</script> 
```

HTML：

```
 <h2 class="acc_trigger_products"><a href="#">Technical specification</a></h2>
                    <div class="acc_container_products">
                        <div class="block_products">    
                            <div class="included-content">
                                <ul style="margin-top:0px!IMPORTANT;margin-bottom:0px!IMPORTANT;">
                                <?php while(the_repeater_field('technical_specification')): ?>
                                    <li>
                                        <?php echo the_sub_field('technical_specification'); ?>
                                        <?php if(get_sub_field('extra_information') != "") { ?>
                                            <img title="<?php echo the_sub_field('extra_information'); ?>" class="helpButton" src="<?php bloginfo('stylesheet_directory'); ?>/images/rogue-resolutions-help-button.png" height="20" width="20" />
                                        <?php } ?>
                                    </li>
                                <?php endwhile; ?>
                                </ul>
                            </div>
                        </div>      
                    </div> 
```

CSS：

```
 h2.acc_trigger_products {
    color:black;
    font-family:Helvetica, Arial;
    font-size:14px;
    padding: 0;
    margin: 2px 0 0 0;
    background-image: url('images/rogue-resolutions-products-acc.png');
    background-repeat:no-repeat;
    height: 32px;
    line-height: 32px;
    width: 298px;
    font-weight: normal;
    float: left;
}
h2.acc_trigger_products a {
    color:black!IMPORTANT;
    font-family:Helvetica, Arial;
    font-size:14px;
    text-decoration: none;
    display: block;
    padding: 0 0 0 15px;
    font-weight:bolder; 
}
h2.acc_trigger_products a:hover {
    color:black!IMPORTANT;
    font-family:Helvetica, Arial;
    font-size:14px;
    font-weight:bolder;
}
h2.active {background-position: left bottom;}
.acc_container_products {
    margin: 0px; 
    padding: 0;
    overflow: hidden;
    font-size: 1.2em;
    width: 296px;
    clear: both;
    background-color: #ccc;
}
.block_products {
    padding:10px;
    width:276px;
    }

.acc_container_products p.title {
    margin:0px!IMPORTANT;
    }

.acc_container_products p {
    margin-top:0px!IMPORTANT;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:46:31.093

假设整个 HTML 块重复，请使用以下脚本：

```
$(document).ready(function () {
    $('.acc_container_products').hide(); //hide all at start
    $('.acc_trigger_products').click(function(){
        $('.acc_trigger_products').removeClass('current');  //remove the 'current' class
        $(this).addClass('current'); //add 'current' class to clicked item
        $('.acc_trigger_products:not(.current)').removeClass('active').next().slideUp(); //slide up items which are not the 'current' one

        $(this).toggleClass('active').next().slideToggle(); //toggle class and visibility
    });
});​ 
```

见小提琴：http: [//jsfiddle.net/PgkE2/4/](http://jsfiddle.net/PgkE2/4/)

# c# - Youtube 提要解析 xml c# razor

> ID：13141251
> 
> 赞同：1
> 
> 时间：2012-10-30T14:33:52.833
> 
> 标签：c#, api, razor, youtube, umbraco

我正在尝试解析 youtube xml 提要并循环浏览某个用户的视频，你是怎么做的？我正在使用 umbraco 剃须刀 ( c# )。

```
@using System;
@using System.Linq;
@using System.Collections.Generic;
@using System.Xml;
@using umbraco.MacroEngines;
@using System.Xml.Linq;
@inherits System.Xml.XPath.XPathNodeIterator;
@inherits umbraco.MacroEngines.DynamicNodeContext;
@inherits DynamicNodeContext

@{
    dynamic xmlv = new DynamicXml(umbraco.library.GetXmlDocumentByUrl("https://gdata.youtube.com/feeds/api/users/[username]/uploads"));   

    <ul>
    @foreach (var property in xmlv.BaseElement.Elements.Where(x => x.Elements("Name") == "group"))
    {
        <li>
           <p>
            @property.Title
            @property.Content
            @property.Thumbnail
           </p>
        </li>
    }
    </ul>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:54:44.953

```
XDocument xDoc = XDocument.Load("https://gdata.youtube.com/feeds/api/standardfeeds/most_viewed");
XNamespace media = "http://search.yahoo.com/mrss/";
XNamespace yt = "http://gdata.youtube.com/schemas/2007";

var items = xDoc.Descendants(media + "group")
                .Select(i => new
                {
                    Title = i.Element(media + "title").Value,
                    Content = i.Element(media + "content").Attribute("url").Value,
                    Thumbnail = i.Element(media + "thumbnail").Attribute("url").Value,
                    Uploaded = (DateTime)i.Element(yt + "uploaded"),
                })
                .ToList(); 
```

# javascript - 在 GWT 中选择文本

> ID：13141257
> 
> 赞同：0
> 
> 时间：2012-10-30T14:34:03.363
> 
> 标签：javascript, gwt, java-native-interface

我想在 GWT 中选择一个文本：

我有一种在 Firefox 中选择文本但在 Chrome 中出现错误的方法：

```
public native void markThisText(Element elem) /*-{
        if ($doc.selection && $doc.selection.createRange) {
            var range = $doc.selection.createRange();
            range.moveToElementText(elem);
            range.select();
        } else if ($doc.createRange && $wnd.getSelection) {
            var range = $doc.createRange();
            range.selectNode(elem);
            var selection = $wnd.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
        }
}-*/; 
```

错误日志：

```
Caused by: com.google.gwt.core.client.JavaScriptException: (INVALID_NODE_TYPE_ERR):  
INVALID_NODE_TYPE_ERR: DOM Range Exception 2    at    com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:248
)   at   
com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)   at  
com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)     at 
com.google.gwt.dev.shell.ModuleSpace.invokeNativeVoid(ModuleSpace.java:289)     at 
com.google.gwt.dev.shell.JavaScriptHost.invokeNativeVoid(JavaScriptHost.java:107) 
```

你知道为什么吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:03:37.453

您可能会发现这很有帮助：

[突出显示文本区域内的文本](https://stackoverflow.com/questions/142527/highlight-text-inside-of-a-textarea)

# python - Tkinter 中的可扩展和收缩框架

> ID：13141259
> 
> 赞同：16
> 
> 时间：2012-10-30T14:34:07.030
> 
> 标签：python, user-interface, tkinter, ttk

有谁知道是否已经有一个小部件/类来处理基于 tkinter/ttk 中的切换按钮（检查按钮）的扩展/收缩框架？

这个问题源于我试图清理一个杂乱无章的 gui，其中包含许多按特定操作分类的选项。我想要一些类似的东西：

![在此处输入图像描述](../Images/a411ef1c26dbd39177965a0d39640a6f.png)
*在谷歌上找到的例子*

然而，不仅仅是文本，还允许按钮、条目、任何 tkinter 的小部件。如果这还不存在，创建一个继承 tkinter 框架的类是否可能/有用：

```
import tkinter as tk
import ttk

class toggledFrame(tk.Frame):
    def __init__(self):
        self.show=tk.IntVar()
        self.show.set(0)
        self.toggleButton=tk.Checkbutton(self, command=self.toggle, variable=self.show)
        self.toggleButton.pack()
        self.subFrame=tk.Frame(self)

    def toggle(self):
        if bool(self.show.get()):
            self.subFrame.pack()
        else:
            self.subFrame.forget() 
```

*注意：此代码未经测试，仅展示概念*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-01T01:13:42.367

实际上，我对获得功能代码如此接近感到惊讶。我决定再做一些工作，并开发了一个简单的小类来执行我想要的（欢迎对代码提出评论和建议）：

```
import tkinter as tk
from tkinter import ttk 

class ToggledFrame(tk.Frame):

    def __init__(self, parent, text="", *args, **options):
        tk.Frame.__init__(self, parent, *args, **options)

        self.show = tk.IntVar()
        self.show.set(0)

        self.title_frame = ttk.Frame(self)
        self.title_frame.pack(fill="x", expand=1)

        ttk.Label(self.title_frame, text=text).pack(side="left", fill="x", expand=1)

        self.toggle_button = ttk.Checkbutton(self.title_frame, width=2, text='+', command=self.toggle,
                                            variable=self.show, style='Toolbutton')
        self.toggle_button.pack(side="left")

        self.sub_frame = tk.Frame(self, relief="sunken", borderwidth=1)

    def toggle(self):
        if bool(self.show.get()):
            self.sub_frame.pack(fill="x", expand=1)
            self.toggle_button.configure(text='-')
        else:
            self.sub_frame.forget()
            self.toggle_button.configure(text='+')

if __name__ == "__main__":
    root = tk.Tk()

    t = ToggledFrame(root, text='Rotate', relief="raised", borderwidth=1)
    t.pack(fill="x", expand=1, pady=2, padx=2, anchor="n")

    ttk.Label(t.sub_frame, text='Rotation [deg]:').pack(side="left", fill="x", expand=1)
    ttk.Entry(t.sub_frame).pack(side="left")

    t2 = ToggledFrame(root, text='Resize', relief="raised", borderwidth=1)
    t2.pack(fill="x", expand=1, pady=2, padx=2, anchor="n")

    for i in range(10):
        ttk.Label(t2.sub_frame, text='Test' + str(i)).pack()

    t3 = ToggledFrame(root, text='Fooo', relief="raised", borderwidth=1)
    t3.pack(fill="x", expand=1, pady=2, padx=2, anchor="n")

    for i in range(10):
        ttk.Label(t3.sub_frame, text='Bar' + str(i)).pack()

    root.mainloop() 
```

此代码产生：
![在此处输入图像描述](../Images/4acd36bd2814908785958a5d8540f9fd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:02:23.920

据我所知，Tkinter/ttk 不提供此类小部件。您**可以**使用[`tkinter.ttk.Treeview`](http://docs.python.org/dev/library/tkinter.ttk.html#tkinter.ttk.Treeview).

开发自己的小部件是完全可以接受的[^(1 ，而且您的代码似乎是一个正确的开始。)](http://mail.python.org/pipermail/tkinter-discuss/2008-August/001602.html)

# javascript - Javascript日期函数不起作用

> ID：13141261
> 
> 赞同：0
> 
> 时间：2012-10-30T14:34:13.450
> 
> 标签：javascript, html, date

我正在尝试显示文本“2012 年 10 月 9 日”。相反，它没有运行该功能，而是显示了很多不必要的日期文本。有谁知道我做错了什么？

你可以玩我的 jsfiddle... [http://jsfiddle.net/UP3fd/](http://jsfiddle.net/UP3fd/)

这是代码...

```
var myDate = new Date();

convertDate(myDate);

myDate.setFullYear(2012, 9, 9);

document.write(myDate);

function convertDate(d) {
    var day = d.getDate();
    if (day < 10) {
        day = "0" + day;
    }
    var year = d.getFullYear();
    var month = d.getMonth();
    var months=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct"," Nov","Dec"];
    var currentMonth = months[month];
    return (currentMonth + " " + day + ", " + year);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:36:29.503

您在设置日期之前调用了您的函数，并且您没有在任何地方保存/输出返回值。

```
var myDate = new Date();

myDate.setFullYear(2012, 9, 9);

document.write( convertDate(myDate) );

function convertDate(d) {
    var day = d.getDate();
    if (day < 10) {
        day = "0" + day;
    }
    var year = d.getFullYear();
    var month = d.getMonth();
    var months=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct"," Nov","Dec"];
    var currentMonth = months[month];
    return (currentMonth + " " + day + ", " + year);
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-23T05:43:38.070

```
 var strDate =  addZero(d.getDate()) + "/" + addZero((d.getMonth() + 1))+ 
        "/" +d.getFullYear();
        alert("strDate :"+strDate)
        return strDate;
    }
    function addZero(i) {
        if (i < 10) {
            i = "0" + i;
        }
        return i;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:37:16.267

这是正确的代码：

```
var myDate = new Date();
myDate.setFullYear(2012, 9, 9);
myDate = convertDate(myDate);
document.write(myDate);

[...] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:42:00.790

这是更正后的代码，这应该会返回您所期望的。

```
var myDate = new Date();

myDate.setFullYear(2012, 9, 9);

var newDate = convertDate(myDate);

document.write(newDate);

function convertDate(d) {
    var day = d.getDate();
    if (day < 10) {
        day = "0" + day;
    }
    var year = d.getFullYear();
    var month = d.getMonth();
    var months=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct"," Nov","Dec"];
    var currentMonth = months[month];
    return (currentMonth + " " + day + ", " + year);

} 
```

# java - 如何在地图中实现列表以进行休眠？

> ID：13141262
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:34:16.437
> 
> 标签：java, hibernate, jakarta-ee

我有一个工作终端应用程序，现在正在实现 Hibernate DB。想知道如何正确完成以下操作：

封闭对象`BookStore`包含按类型分组的订单列表。

```
class BookStore {
    Map<BookType, List<Order>> orders;
} 
```

切换到 Hibernate 时，我无法在地图中使用 List。所以我不得不介绍另一个对象，比如：

```
class OrderList {
    List<Order> orders;
}
class BookStore {
    Map<BookType, OrderList> orders;
} 
```

但是这样合适吗？最好让书店保存所有订单的未排序列表，并在需要时使用 sql 语句获取它们，例如：`SELECT * FORM order o WHERE o.ordertype=OrderTypeA`

和：

```
class BookStore {
    List<Order> orders;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:45:54.370

为什么不去规范化并将相关`BookType`字段添加到`Order`类中，这样您`List`的对象中只会有一个`Order`对象，`BookStore`并且您将能够轻松地知道给定对象中有多少`Orders`个对象，等等。您浪费了一些空间，但读取操作会更快。唯一的缺点是写入操作可能会变得更重（比您的初始规范化模型），但这可能不是一个真正的问题，具体取决于所述写入操作的实际复杂性，以及它发生的频率（现在改进) 读操作。`BookType``BookOrder`

# hibernate-validator - 用于休眠验证器注释的独立 maven 包

> ID：13141264
> 
> 赞同：4
> 
> 时间：2012-10-30T14:34:24.687
> 
> 标签：hibernate-validator

一个快速的问题：是否有独立的软件包`org.hibernate.validator.constraints.*`？

我想将这些注释放在 DTO 包上，但不想强迫用户在他们的类路径上使用 hibernate-validator。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:45:52.577

在这种情况下，我真的不知道您所说的独立是什么意思，但这里`4.3.1`是[`hibernate-validator`](http://mvnrepository.com/artifact/org.hibernate/hibernate-validator/4.3.0.Final).

将此添加到您的 pom 将使您可以访问`org.hibernate.validator.constraints`包中的所有注释：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>4.3.0.Final</version>
</dependency> 
```

[mvnrepository.com](http://mvnrepository.com/)是搜索 maven 工件的好地方。

* * *

**编辑**

好的，现在我理解了您的问题，您**只**希望将注释`org.hibernate.validator.constraints`作为依赖项而不需要所有其他验证内容。

那我的回答是否定的，没有这么薄的罐子。您将不得不使用`hibernate-validator`来获取注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:54:07.410

如果您使用自定义 Hibernate Validator 约束，则无论如何您都必须添加实际的核心类。只要您依赖 Bean Validation 约束 (javax.validation.*)，添加 Bean Validation API jar 就足够了。

您对添加休眠验证器 jar 有何看法？

# android - android中小部件的Gridview实现

> ID：13141265
> 
> 赞同：1
> 
> 时间：2012-10-30T14:34:27.500
> 
> 标签：android, android-layout, android-widget

我正在尝试实现使用 3x3 网格视图即矩阵的应用程序小部件。我想调整应用程序小部件的大小，以便在调整网格大小时，网格会根据我选择的大小自行更改（行/列）。但是当我尝试改变大小时。它不是改变矩阵，而是减少或增加网格中元素的大小。我不希望元素调整大小，但我希望矩阵根据小部件图标的大小进行更改。谁能帮帮我？提前致谢。

//Widget Provider 类

公共类 WidgetProvider 扩展 AppWidgetProvider { 公共静态字符串 EXTRA_WORD = "com.manthanstudio.listwidget.WORD";

```
 @SuppressLint("NewApi")
      public void onUpdate(Context ctxt, AppWidgetManager appWidgetManager,
                            int[] appWidgetIds) 
      {
        for (int i=0; i<appWidgetIds.length; i++) 
        {
          Intent svcIntent=new Intent(ctxt, WidgetService.class);

          svcIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetIds[i]);
          svcIntent.setData(Uri.parse(svcIntent.toUri(Intent.URI_INTENT_SCHEME)));

          RemoteViews widget=new RemoteViews(ctxt.getPackageName(),
                                              R.layout.widget);

          widget.setRemoteAdapter(appWidgetIds[i], R.id.words,
                                  svcIntent);

          Intent clickIntent=new Intent(ctxt, MainActivity.class);
          PendingIntent clickPI=PendingIntent.getActivity(ctxt,      0,clickIntent,PendingIntent.FLAG_UPDATE_CURRENT);

          widget.setPendingIntentTemplate(R.id.words, clickPI);

          appWidgetManager.updateAppWidget(appWidgetIds[i], widget);
        }

        super.onUpdate(ctxt, appWidgetManager, appWidgetIds);
      } 
```

# cuda - 在推力指针中包装一个尖点稀疏矩阵变量

> ID：13141270
> 
> 赞同：0
> 
> 时间：2012-10-30T14:34:45.780
> 
> 标签：cuda, max, sparse-matrix, thrust, cusp-library

我正在使用 cusp 进行稀疏矩阵乘法。从结果矩阵中，我需要最大值而不将矩阵从设备内存复制到主机内存。我打算将结果矩阵包装在推力设备指针中，然后使用函数**推力::max_element**来获取最大元素。矩阵采用 coo 格式。如果 C 是结果稀疏矩阵，则
C.row_indices[]：包含行号
C.column_indices[]：包含列号
C.values[]：包含实际值

所以基本上我需要 C.values 数组中的最高值。
使用

```
thrust::device_ptr<int> dev_ptr = C.values; 
```

给出错误

```
error: no instance of constructor "thrust::device_ptr<T>::device_ptr [with T=int]" matches the argument list
 argument types are: (cusp::array1d<float, cusp::host_memory>) 
```

我如何包装我的结果矩阵以便在推力库中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:54:00.923

如果我的设备矩阵定义是这样的：

```
cusp::coo_matrix<int, double, cusp::device_memory> A_d = A; 
```

然后试试这个：

```
thrust::device_ptr<double> dev_ptr = &(A_d.values[0]);
thrust::device_ptr<double> max_ptr = thrust::max_element(dev_ptr, dev_ptr + 6); 
```

# android - HTC explorer 和三星 Galaxy ace 不支持应用程序

> ID：13141272
> 
> 赞同：0
> 
> 时间：2012-10-30T14:34:47.280
> 
> 标签：android, android-manifest

我无法从 HTC Explorer 和 sansung Galaxy ace 设备的 Google Play 商店中找到我的应用程序，我也支持该应用程序的小屏幕，但仍然无法在 Play 商店中找到它

我的清单如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.demo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" >
    </uses-permission>
    <uses-permission
        android:name="android.permission.INTERNET"
        android:protectionLevel="normal" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" >
    </uses-permission>
    <uses-permission android:name="android.permission.GET_ACCOUNTS" >
    </uses-permission>
    <uses-permission android:name="android.permission.USE_CREDENTIALS" >
    </uses-permission>
    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS" >
    </uses-permission>
    <uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS" > 
    </uses-permission>
    <uses-permission android:name="android.permission.CAMERA">
    </uses-permission>

    <supports-screens android:largeScreens="false" android:smallScreens="true" android:anyDensity="true" android:normalScreens="true" />

    <application 
        android:icon="@drawable/appicon"
        android:label="@string/app_name"
        android:debuggable="true">
        <service
            android:exported="true"
            android:name=".account.AuthenticationService" >
            <intent-filter >
                <action android:name="android.accounts.AccountAuthenticator" />
            </intent-filter>

            <meta-data
                android:name="android.accounts.AccountAuthenticator"
                android:resource="@xml/authenticator" />
        </service>

        <activity
            android:name="abc.com.Screen"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" >
                </action>

                <category android:name="android.intent.category.LAUNCHER" >
                </category>
            </intent-filter>
        </activity>
</application>

</manifest> 
```

如果我在这里做错了什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:58:31.260

您可能需要将相机自动对焦声明为可选功能（因为您需要基于 CAMERA 权限的相机）。我还没有检查过，但可能是那些便宜的手机不支持自动对焦。

供参考： http: [//developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)和 [http://developer.android.com/guide/topics/manifest/uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)（设置`android:required`为 false )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T05:38:04.700

我有同样的问题。`botteaap`修复工作。

将此添加到清单

```
<uses-feature android:name="android.hardware.camera" android:required="false" /> 
```

一切正常。

`it means that the application prefers to use the feature if present on the device, but that it is designed to function without the specified feature`,

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:53:21.613

有几个步骤（相当长的步骤）可以帮助您验证哪些设备可以下载和运行您的应用程序：

1.  更改或删除清单中的任何权限。
2.  使用您的发布密钥构建应用程序。
3.  将新文件上传`.apk`到 google play dev。控制台并激活它。
4.  不要发布它并切换到产品详细信息选项卡。
5.  通过国家列表下方部分中的`show devices`链接检查支持的设备列表。`Supported Devices`在这里，您可以找到可以使用当前权限运行您的应用程序的所有“google-known”android 设备的列表。

这种方式很长，但这可以帮助你。

# jsf-2 - PrimeFaces DataTable in Cell 编辑 roweditevent

> ID：13141275
> 
> 赞同：1
> 
> 时间：2012-10-30T14:35:02.910
> 
> 标签：jsf-2, datatable, primefaces

我对数据表内嵌编辑有疑问。我的更新查询正在运行，但正在更新旧值。我正在使用 JDBC，PrimeFaces 3.4 GlassFish 3.1 JSF 2+。当我计算执行行数=1。更新的用户和 update_time 正在改变。但是编辑的输入值没有改变。

我的 xhtml

```
<?xml version='1.0' encoding='UTF-8' ?>                                    
                 <p:panel header="Ürün Ekleme Formu" toggleOrientation="vertical" toggleable="true">                                   
                    <p:panelGrid columns="2">               
                    <h:outputText value="Ürün Adı:"/><p:column><p:inputText value="#{urunlist.mahsul.urunAdi}" required="true" requiredMessage="Ürün adı?"/></p:column>

                                    <h:outputText value="Tüik Kodu:"/><p:inputText value="#{urunlist.mahsul.tuikKodu}"/>

                                    <h:outputText value="İva Kodu:"/><p:inputText value="#{urunlist.mahsul.tvaKodu}"/>

                                    <h:outputText value="Üretim Dönemi:"/><p:autoComplete  value="#{urunlist.mahsul.uretimDonemi}" completeMethod="#{urunlist.autoComplate(ud)}" var="ud_list" itemLabel="#{ud_list.uretimDonemi}" converter="javax.faces.Character" itemValue="#{ud_list}" forceSelection="false" multiple="false"/>
                                    <h:outputText value="Üretim Şekli"/><p:inputText value="#{urunlist.mahsul.uretimSekli}"/>

                                    <p:commandButton action="#{urunlist.urunKaydet()}" value="Kaydet" update="dataTable"/><input name="hiddo"  type="hidden"  value="#{login.kullaniciAdi}"/>                                       
                                </p:panelGrid>
                                </p:panel>
                            </ui:insert>
                        </p:panel>
                        <p:panel id="viewPanel">
                            <ui:insert>view Layout</ui:insert>
                        </p:panel>
                        <p:panel id="updatePanel">
                            <ui:insert>Update Form</ui:insert>
                        </p:panel>
                   </p:panelGrid>
                </div>
                <div>
                   <p:outputPanel id="dataTable" >
                        <p:panel  header="Ürünler">
                            <p:dataTable value="#{urunlist.urunGetir()}" var="u" paginator="true" rows="5" editable="true" sortOrder="true" draggableColumns="true" rowKey="#{u.urunKodu}">
                                <p:ajax event="rowEdit" listener="#{urunlist.urunGuncelle}" update=":mainForm:messages"/>

                                <p:column>
                                    <p:cellEditor>
                                        <f:facet name="output">
                                            <h:outputText value="#{u.urunKodu}"/>
                                        </f:facet>
                                        <f:facet name="input">
                                            <input name="ukod" value="#{u.urunKodu}" type="hidden" disabled="true" />
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column>
                                <p:cellEditor>
                                        <f:facet name="output">
                                            <h:outputText value="#{u.tuikKodu}"/>
                                        </f:facet>
                                        <f:facet name="input">
                                            <p:inputText value="#{u.tuikKodu}"/>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column>
                                    <p:cellEditor>
                                        <f:facet name="output">
                                            <h:outputText value="#{u.tvaKodu}"/>
                                        </f:facet>
                                        <f:facet name="input">
                                            <h:inputText value="#{u.tvaKodu}"/>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column>
                                <p:cellEditor>
                                        <f:facet name="output">
                                            <h:outputText value="#{u.urunAdi}"/>
                                        </f:facet>
                                        <f:facet name="input">
                                            <h:inputText value="#{u.urunAdi}"/>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column>
                                <p:cellEditor>
                                        <f:facet name="output">
                                            <h:outputText value="#{u.uretimDonemi}(#{u.uretimSekli}-#{u.sulama})"/>
                                        </f:facet>
                                        <f:facet name="input">
                                            <p:panelGrid columns="3">
                                            <p:column>
                                                <h:inputText size="2" value="#{u.uretimDonemi}" title="Üretim Dönemi"/>
                                            </p:column>
                                            <p:column>
                                                <h:inputText size="2" value="#{u.uretimSekli}"/>
                                            </p:column>
                                            <p:column>
                                                <h:inputText size="2" value="#{u.sulama}"/>
                                            </p:column>
                                            </p:panelGrid>

                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column>
                                #{u.ekleyen}
                                </p:column>
                                <p:column>
                                    <h:outputText value="#{u.eklemeZamani}">
                                        <f:convertDateTime pattern="dd.MMMM.yy--hh:mm:ss" timeZone="Turkey"/> </h:outputText>                 
                                </p:column>
                                <p:column>
                                    <p:rowEditor/>
                                </p:column>

                            </p:dataTable>
                        </p:panel>
                    </p:outputPanel>

                </div>
            </h:form>
</ui:define> 
```

我的托管豆

```
public LoginBean getLoginned() {
    return loginned;
}

public void setLoginned(LoginBean loginned) {
    this.loginned = loginned;
}
public urunBean(){
    mahsul=new urun();
    loginned=new LoginBean();
}

public urun getMahsul() {
    return mahsul;
}

public void setMahsul(urun mahsul) {
    this.mahsul = mahsul;
}

public List<urun> urunGetir() throws SQLException{

    try {

         vk=DriverManager.getConnection("jdbc:postgresql://localhost:5432/uretim","postgres","Fa1276");
    } catch (SQLException ex) {
        System.out.println("DriverManager hatası "+ex);
    }
    PreparedStatement ps=vk.prepareStatement("select urun_kodu, tuik_kodu, iva_kodu, urun_adi, uretim_donemi, uretim_sekli, sulama, ekleyen, ekleme_zamani  from urunler order by urun_kodu desc");
    ResultSet sonuc=ps.executeQuery();
    liste = new ArrayList<urun>();

        while (sonuc.next()){
     masul=new urun();

        masul.setUrunKodu(sonuc.getLong("urun_kodu"));
        masul.setTuikKodu(sonuc.getLong("tuik_kodu"));
        masul.setTvaKodu(sonuc.getLong("iva_kodu"));
        masul.setUrunAdi(sonuc.getString("urun_adi"));
        masul.setUretimDonemi(sonuc.getString("uretim_donemi"));
        masul.setUretimSekli(sonuc.getString("uretim_sekli"));
        masul.setSulama(sonuc.getBoolean("sulama"));
        masul.setEkleyen(sonuc.getString("ekleyen"));
        masul.setEklemeZamani(sonuc.getTimestamp("ekleme_zamani"));

        liste.add(masul);

        }

    return this.liste;
}

public void urunKaydet(){ 

    String urunEkle=("insert into urunler(urun_kodu, tuik_kodu, iva_kodu, urun_adi, uretim_donemi, uretim_sekli, sulama, ekleyen, ekleme_zamani) values (nextval('urunler_urun_kodu_seq'),?,?,?,?,?,?,?, now())");

    try {

    PreparedStatement insert=vk.prepareStatement(urunEkle);

    insert.setLong(1, mahsul.getTuikKodu());
    insert.setLong(2,mahsul.getTvaKodu());
    insert.setString(3,mahsul.getUrunAdi());
    insert.setString(4,mahsul.getUretimDonemi());
    insert.setString(5, mahsul.getUretimSekli());
    insert.setBoolean(6,false);
    insert.setString(7,session);
    //insert.setString(9,java.sql.Timestamp);
    //insert.executeQuery();
    insert.executeUpdate();
    insert.close();
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage( mahsul.urunAdi+" ürünü\nkaydedildi "));
    //String selectInput= UIComponent.getCurrentComponent(null).getId().toString();
    //System.out.println(selectInput);

    }
    catch (SQLException sqe){
    System.out.println("sorguda hata var "+sqe);
    }

}
public List<urun> autoComplate(urun ud) throws SQLException{
    PreparedStatement udps=vk.prepareStatement("select uretim_donemi from urunler group by uretim_donemi");
    ResultSet udset=udps.executeQuery();
    List<urun> ud_list=new ArrayList<urun>();
    while(udset.next()){

        ud.uretimDonemi=udset.getString("uretim_donemi");
        ud_list.add(ud);

    }

    /*
    PreparedStatement usps=vk.prepareStatement("select uretim_sekli from urunler group by uretim_sekli");
    ResultSet usset=usps.executeQuery();
    List<urun> us_list=new ArrayList<urun>();
    while(usset.next()){
        urun us=new urun();
        us.uretimSekli=usset.getString("uretim_sekli");
        us_list.add(us);
        return us_list;
    }
    */
    return ud_list;

}

public void urunGuncelle(RowEditEvent olay){
    this.vk=vk;

    urun urn=(urun)olay.getObject();        
    ExternalContext getirici=FacesContext.getCurrentInstance().getExternalContext();
    String gullanici=getirici.getRequestParameterMap().get("hiddo");
    //String gullanici=user.getKullaniciAdi();
    Long id=(Long)urn.getUrunKodu();

    System.out.println(id+"-"+gullanici);
    try {
        PreparedStatement urunguncelle=vk.prepareStatement("update urunler  set urun_adi=?, uretim_donemi=?, uretim_sekli=?, guncelleyen=?, guncelleme_zamani=now() where urun_kodu=?");
        urunguncelle.setString(1, urn.getUrunAdi());
        urunguncelle.setString(2, urn.getUretimDonemi());
        urunguncelle.setString(3, urn.getUretimSekli());
        urunguncelle.setString(4, gullanici);
        urunguncelle.setLong(5, id);

        urunguncelle.executeUpdate();
        int etkilenen=urunguncelle.executeUpdate();
        if (etkilenen > 0) {
        System.out.println(urn.getUrunAdi()+" adlı ürün güncellendi "+etkilenen+" satır.");
        FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(urn.urunAdi+" adlı ürün güncellendi"));
            System.out.println(urn.getUrunAdi()+" adlı ürün güncellendi!");
        }else{
            System.out.println("Güncelleme olmadı");
            FacesContext.getCurrentInstance().addMessage(null,new FacesMessage("Güncelleme olmadı."));
        }
        urunguncelle.close();

        vk.close();

    } catch (SQLException ex) {
        System.out.println("Güncelleme hatası "+ex);
    }

}
/*
public void deneme(urun u){

    String mesaj=("Ellediğiniz satırın id'si "+u.urunKodu+"!");
    FacesContext.getCurrentInstance().addMessage(null,new FacesMessage(mesaj));

}*/

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T21:37:12.600

我解决了我的问题。我重写了布尔、哈希码和 toString 方法。我在我的 bean 中添加了一个关于我的选择查询方法的构造函数。

# c# - 从 C# 中的线程更新进度条

> ID：13141280
> 
> 赞同：4
> 
> 时间：2012-10-30T14:35:10.783
> 
> 标签：c#

```
 public class Consumer
    {
        Queue<int> queue;
        Object lockObject;

        public Consumer(Queue<int> queue, Object lockObject)
        {
            this.queue = queue;
            this.lockObject = lockObject;
        }

        public void consume(string filepath)
        {
            int item = 0;

            while (true)
            {
                lock (lockObject)
                {
                    if (queue.Count == 0)
                    {
                        Monitor.PulseAll(lockObject);
                        continue;
                    }

                    item = queue.Dequeue();
                    if (item == 0)
                    {
                        break;
                    }

                   //do some staff
                }

            }

        }
    }

    public class Producer 
    {
        Queue<int> queue;
        Object lockObject;

        public int ProgressPercent = 0;
        int TotalProducedElements = 0;
        public bool check1 = false;

        public Producer(Queue<int> queue, Object lockObject)
        {
            this.queue = queue;
            this.lockObject = lockObject;
        }

        private bool IsPrime(int num)
        {
            if (num == 0)
                return true;
            num = Math.Abs(num);
            for (int i = 2; i <= Math.Sqrt(num); i++)
                if (num % i == 0)
                    return false;
            return true;
        }

        public void produce(int target)
        { 
            try
            {
                int seq = 0;
                while (seq++ < target)
                {

                    lock (lockObject)
                    {
                        int item = seq;
                        if (IsPrime(item))
                        {
                            queue.Enqueue(item);

                        }
                        TotalProducedElements++;

                        ProgressPercent = seq;

                        if (queue.Count == 0)
                        {
                            Monitor.PulseAll(lockObject);
                        }
                    }
                }
                queue.Enqueue(0);
              }
            catch (Exception e)
            {
            }

        }
    }
}

 private void Start_Click(object sender, EventArgs e)
    {           

                    Object lockObj = new object(); 

                    Queue<int> queue = new Queue<int>();  

                    Producer p = new Producer(queue, lockObj);

                    Consumer c = new Consumer(queue, lockObj);

                    int target = int.Parse(TargetText.Text);
                    string path = Path.Text;

                    Thread Thread1 = new Thread(() => p.produce(target));
                    Thread Thread2 = new Thread(()=>c.consume(path));

                    Thread1.Start();

                    Thread2.Start();
                   progressBar1.Maximum = target;

                  while(true)
                       {
                         if(p.ProgressPercent==0)
                            {
                               Thread.sleep(1000);
                            }
                            else
                             {
                               progressBar1.Value=p.ProgressPercent;
                             }

                        }

                 } 
```

我有两个班级在同一个队列上工作。一个是产生一组整数，第二个是从队列中消耗这些整数。

在这一切期间，我想按该百分比更新我的进度条。那么如何在不阻塞我的 GUI 的情况下从消费者更新进度条呢？

注意我用过`progressbar.Invoke`但`delegate`没用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T15:03:40.090

你需要两件事。第一个显然是一个线程，另一个是调用者。

调用者将允许您从线程内部更改窗口的控件。这是示例：

```
Invoke((MethodInvoker)delegate
{
    Label1.text = "asd";
} 
```

线程是这样运行的：

```
some_thread = new Thread
(delegate()
{

    {
        //some_thread code
    }
});
some_thread.Start(); 
```

您还需要`using System.Threading;`在文件开头添加。

所以，最终的代码应该是这样的：

```
some_thread = new Thread
(delegate()
{

    {
        for(;;)
        {
                Invoke((MethodInvoker)delegate
                {
                                //update the progress bar here
                }
        }
    }
});
some_thread.Start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:08:12.307

您可以使用 BackgroundWorker (System.ComponentModel) 轻松完成此操作。看看： http: [//www.codeproject.com/Tips/83317/BackgroundWorker-and-ProgressBar-demo](http://www.codeproject.com/Tips/83317/BackgroundWorker-and-ProgressBar-demo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-12T11:47:38.890

清除：

```
while(true)
                   {
                     if(p.ProgressPercent==0)
                        {
                           Thread.sleep(1000);
                        }
                        else
                         {
                           progressBar1.Value=p.ProgressPercent;
                         }

                    } 
```

代替：

```
ProgressPercent = seq; 
```

到

```
UpdateProgres(seq); 
```

添加：

```
public void UpdateProgres(int _value)
    {
        if (InvokeRequired)
        {
            Invoke(new Action<int>(UpdateProgres), _value);
            return;
        }

        progressBar1.Value = _value;
    } 
```

总结你需要的功能；

```
public void UpdateProgres(int _value)
    {
        if (InvokeRequired)
        {
            Invoke(new Action<int>(UpdateProgres), _value);
            return;
        }

        progressBar1.Value = _value;
    } 
```

* * *

或者需要锁定值。例如;

```
while(true)
{
    lock (p.ProgressPercent)
    {
        int _p = p.ProgressPercent;
    }
    if(_p==0)
    {
        Thread.sleep(1000);
    }
    else
    {
        progressBar1.Value=_p;
    }
} 
```

# django - django admin中模型项的排序顺序

> ID：13141282
> 
> 赞同：0
> 
> 时间：2012-10-30T14:35:15.207
> 
> 标签：django, django-admin

假设我有一个模型：

```
class Question(models.Model):
    text = models.TextField(verbose_name=u'Вопрос', max_length=1024)
    is_free_text = models.BooleanField(verbose_name=u'Ответ в виде текста?')
    sort_order = models.PositiveSmallIntegerField() 
```

django admin是否有插件或其他东西可以在某处列出模型并上下移动（或拖放）以定义它们的排序顺序？我基本上希望每个问题都有一个唯一的排序顺序，以便根据获取的 sort_order 对它们进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:56:52.663

有很多选择，但您很可能不得不对它们进行一些修改。以下是一些片段（我不确定它们的效果如何）：

*   [http://djangosnippets.org/snippets/2306/](http://djangosnippets.org/snippets/2306/)
*   [http://djangosnippets.org/snippets/2047/](http://djangosnippets.org/snippets/2047/)
*   [http://djangosnippets.org/snippets/2057/](http://djangosnippets.org/snippets/2057/)

一些声称可以这样做的应用程序：

*   [https://github.com/ff0000/django-sortable](https://github.com/ff0000/django-sortable)
*   [https://github.com/centralniak/django-inline-ordering](https://github.com/centralniak/django-inline-ordering)

如果您有兴趣安装[django-grapelli](https://github.com/sehmaschine/django-grappelli)（这是整个 django 管理员的皮肤），您可以使用[他们的可排序更改列表项](http://django-grappelli.readthedocs.org/en/latest/customization.html#inline-sortables)

# java - Zillow 是用什么编程语言编写的？

> ID：13141285
> 
> 赞同：1
> 
> 时间：2012-10-30T14:35:36.413
> 
> 标签：java, zillow

寻找驱动 Zillow 基于 Web 的应用程序的主要编程语言是什么。有谁知道这个问题的答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:38:55.193

他们的主页发送以下 http 标头：

```
X-Powered-By: Servlet 2.4; JBoss-4.0.3SP1 (build: CVSTag=JBoss_4_0_3_SP1 date=200510231054)/Tomcat-5.5 
```

其中，表示java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:39:30.583

```
$ curl -v -X HEAD http://www.zillow.com

< HTTP/1.1 200 OK
< Date: Tue, 30 Oct 2012 14:37:55 GMT
< Server: Apache-Coyote/1.1
< X-Powered-By: Servlet 2.4; JBoss-4.0.3SP1 (build: CVSTag=JBoss_4_0_3_SP1 date=200510231054)/Tomcat-5.5
< X-Internal-Host: 013 
```

所以后端是 Java EE 1.4，前端是 Javascript。

# emacs - 如何从 emacs kill-ring 中删除顶部条目（pop）？

> ID：13141292
> 
> 赞同：4
> 
> 时间：2012-10-30T14:36:12.717
> 
> 标签：emacs, elisp

我需要将顶部被杀死的字符串替换为另一个。我可以（猛拉）它然后（kill-region ...），但在那之后，会有两个字符串：旧的和我的新的。如何从杀戮环中完全删除旧条目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T14:47:18.240

它可以很简单

```
(pop kill-ring) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T15:50:56.930

我不确定你为什么认为奥列格的回答是“不好的风格”，但这是另一种方式：

```
(when kill-ring
  (setq kill-ring (cdr kill-ring))) 
```

您可能还想调整`kill-ring-yank-pointer`：

```
(when kill-ring-yank-pointer
  (setq kill-ring-yank-pointer kill-ring)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-07T01:58:51.143

`M-y`或`(browse-kill-ring)`进入 kill-ring-mode 然后按“h”寻求帮助。其中一项是：

```
d               browse-kill-ring-delete 
```

所以只需将光标放在要删除的条目上按“d”。

# bash - 将击键或文本发送到使用 wine 运行的程序

> ID：13141296
> 
> 赞同：2
> 
> 时间：2012-10-30T14:36:24.970
> 
> 标签：bash, shell, wine

我正在用 shell 脚本中的 wine 启动一个 windows 程序。现在我想将击键和文本传递给它。我已经尝试过[这个](https://stackoverflow.com/questions/954779/sending-keycode-to-xorg-wine-with-bash-script)`xvkbd`问题中提到的，但是程序只是将字母/文本输出到终端并在之后退出。这是一个例子：

```
`wine BERCon.exe > output.txt &`
sleep 5;
`xvkbd -text "N"` 
```

这甚至可能吗？我检查了手册页`xvkbd`以检查是否可以以某种方式更改焦点，但这似乎是不可能的。我注意到，如果我做类似`echo "N" | wine BERCon.exe`N 之类的事情，实际上会被传递给 wine，而 wine 会将其放入程序中，但会得到之后进入一个循环并继续输入该字母。

# eclipse - 为 Eclipse 和命令行设置 JDK 环境变量

> ID：13141298
> 
> 赞同：0
> 
> 时间：2012-10-30T14:36:32.100
> 
> 标签：eclipse, path, windows-8, environment-variables, java

我让 Java 与 Eclipse 一起工作，但我必须在命令行上设置 Javac。我设置了如下所示的环境变量，但它不起作用。Eclipse 现在也停止了工作。

![环境变量](../Images/1a0d46e3e59d6ae99a45264116010ee5.png)

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:04:13.630

好的，所以我有点疯狂并卸载/重新安装了许多不同的 jdk。当我将它直接保存到我的 C 驱动器时，终于完全安装了一个。我更新了 eclipse 和命令提示符的环境变量，瞧！Java 现在可以工作了！我想程序文件之间的空间问题会永远困扰我，所以我不应该再在那里保存任何东西。

# java - 实现 Closeable 或实现 AutoCloseable

> ID：13141302
> 
> 赞同：155
> 
> 时间：2012-10-30T14:36:48.103
> 
> 标签：java, java-io

`implements Closeable`我正在学习 Java，但在接口和`implements AutoCloseable`接口上找不到任何好的解释。

当我实现了一个方法时`interface Closeable`，我的 Eclipse IDE 创建了一个方法`public void close() throws IOException`。

我可以在`pw.close();`没有界面的情况下关闭流。但是，我无法理解如何`close()`使用接口实现该方法。而且，这个接口的目的是什么？

另外我想知道：如何检查是否`IOstream`真的关闭了？

我正在使用下面的基本代码

```
import java.io.*;

public class IOtest implements AutoCloseable {

public static void main(String[] args) throws IOException  {

    File file = new File("C:\\test.txt");
    PrintWriter pw = new PrintWriter(file);

    System.out.println("file has been created");

    pw.println("file has been created");

}

@Override
public void close() throws IOException {

} 
```

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-10-30T14:41:17.923

[`AutoCloseable`](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)（在 Java 7 中引入）使得使用[***try-with-resources***](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)成语成为可能：

```
public class MyResource implements AutoCloseable {

    public void close() throws Exception {
        System.out.println("Closing!");
    }

} 
```

现在你可以说：

```
try (MyResource res = new MyResource()) {
    // use resource here
} 
```

JVM 会`close()`自动为你调用。

[`Closeable`](http://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html)是一个较旧的界面。~~由于某些原因~~为了保持向后兼容性，语言设计者决定创建一个单独的。这不仅允许在 try-with-resources 中使用所有`Closeable`类（如流 throwing `IOException`），还允许从`close()`.

如有疑问，请使用`AutoCloseable`，您班级的用户将不胜感激。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-10-30T14:46:18.113

[`Closeable`extends`AutoCloseable`](https://docs.oracle.com/javase/7/docs/api/java/io/Closeable.html)，并且专门用于 IO 流：它抛出`IOException`而不是`Exception`，并且是幂等的，`AutoCloseable`而不提供此保证。

这在两个接口的 javadoc 中都有解释。

实现`AutoCloseable`（或`Closeable`）允许将类用作 Java 7 中引入的[try-with-resources](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)构造的资源，这允许在块末尾自动关闭此类资源，而无需添加`finally`显式关闭资源的块.

您的类不代表可关闭的资源，实现此接口绝对没有意义：`IOTest`无法关闭。甚至不可能实例化它，因为它没有任何实例方法。请记住，实现接口意味着类和接口之间存在**一种**关系。你在这里没有这样的关系。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2012-10-30T14:45:03.480

在我看来，您对接口不是很熟悉。在您发布的代码中，您不需要实现[`AutoCloseable`](https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html).

您只需要（或应该）实现[`Closeable`](https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html)，或者[`AutoCloseable`](https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html)如果您即将实现自己的`PrintWriter`，它处理文件或任何其他需要关闭的资源。

在您的实现中，调用`pw.close()`. 您应该在 finally 块中执行此操作：

```
PrintWriter pw = null;
try {
   File file = new File("C:\\test.txt");
   pw = new PrintWriter(file);
} catch (IOException e) {
   System.out.println("bad things happen");
} finally {
   if (pw != null) {
      try {
         pw.close();
      } catch (IOException e) {
      }
   }
} 
```

上面的代码与 Java 6 相关。在 Java 7 中，这可以更优雅地完成（参见[这个答案](https://stackoverflow.com/a/13141382/714965)）。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-03-17T12:12:00.907

这是一个小例子

```
public class TryWithResource {

    public static void main(String[] args) {
        try (TestMe r = new TestMe()) {
            r.generalTest();
        } catch(Exception e) {
            System.out.println("From Exception Block");
        } finally {
            System.out.println("From Final Block");
        }
    }
}

public class TestMe implements AutoCloseable {

    @Override
    public void close() throws Exception {
        System.out.println(" From Close -  AutoCloseable  ");
    }

    public void generalTest() {
        System.out.println(" GeneralTest ");
    }
} 
```

这是输出：

```
GeneralTest 
From Close -  AutoCloseable  
From Final Block 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-07-25T14:02:36.487

最近我读了一本 Java SE 8 Programmer Guide ii Book。

`AutoCloseable`我发现了一些关于vs之间的区别`Closeable`。

该`AutoCloseable`接口是在 Java 7 中引入的。在此之前，存在另一个接口，称为`Closeable`. 它与语言设计者想要的类似，但有以下例外：

*   `Closeable`将抛出的异常类型限制为`IOException`.
*   `Closeable`要求实现是幂等的。

语言设计者强调向后兼容性。由于不希望更改现有接口，因此他们制作了一个名为`AutoCloseable`. 这个新接口没有`Closeable`. 由于`Closeable`符合 的要求 ，所以在引入后者时`AutoCloseable`就开始实施。`AutoCloseable`

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-05-09T11:22:27.327

`try-with-resources`声明。

The`try-with-resources statement`是`try`声明一个或多个资源的语句。A`resource`是一个在程序完成后必须关闭的对象。`try-with-resources statement`确保在语句结束时关闭每个资源。任何实现的对象，`java.lang.AutoCloseable`包括所有实现的对象`java.io.Closeable`，都可以用作资源。

以下示例从文件中读取第一行。它使用 的实例`BufferedReader`从文件中读取数据。`BufferedReader`是程序完成后必须关闭的资源：

```
static String readFirstLineFromFile(String path) throws IOException {
    try (BufferedReader br =
                   new BufferedReader(new FileReader(path))) {
        return br.readLine();
    }
} 
```

在此示例中，try-with-resources 语句中声明的资源是 BufferedReader。声明语句紧跟在 try 关键字之后的括号内。Java SE 7 及更高版本中的类`BufferedReader`实现了接口`java.lang.AutoCloseable`。因为`BufferedReader`实例是在 try-with-resource 语句中声明的，所以无论 try 语句是正常完成还是突然完成（由于方法`BufferedReader.readLine`抛出一个`IOException`），它都会被关闭。

在 Java SE 7 之前，您可以使用`finally`块来确保关闭资源，而不管 try 语句是正常完成还是突然完成。以下示例使用`finally`块而不是`try-with-resources`语句：

```
static String readFirstLineFromFileWithFinallyBlock(String path)
                                                     throws IOException {
    BufferedReader br = new BufferedReader(new FileReader(path));
    try {
        return br.readLine();
    } finally {
        if (br != null) br.close();
    }

} 
```

请[参阅文档](https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。

# javascript - CSS/Javascript：根据窗口宽度应用 javascript

> ID：13141303
> 
> 赞同：1
> 
> 时间：2012-10-30T14:36:51.257
> 
> 标签：javascript, jquery, css, internet-explorer-7

我有一个正在开发的网站，它使用网格系统 在 IE7 中，当调整窗口大小时，一列“弹出”到另一列下方。这不是一个大问题，但由于顶部/左侧没有边距，因此布局相当不可读。

那么如何将课程应用于

```
<div> 
```

**只有**当窗口（视口？）被调整到低于某个宽度时？

例如

```
width > 500px = class="smallerwindow" 
```

然后，我可以适当地设置该类的样式。

我有 jQuery、modernizr 等。

谢谢，

哈雷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:49:39.127

根据我上面的评论，您可以使用[respond.js](https://github.com/scottjehl/Respond)为 IE6-8 启用媒体查询支持。

有条件地包含 respond.js 脚本：

```
<!--[if lte IE 8]>
<script type="text/javascript" src="~/Scripts/respond.min.js"></script>
<![endif]--> 
```

*注意：建议在 head 中包含 respond.js，因为这会影响 dom 渲染*

然后按如下方式定义您的 CSS：

```
.myWindow { width: 500px; }

@media (min-width:1200px) {
    .myWindow { width: 400px; }
}

@media  (min-width: 768px) and (max-width:979px) {
    .myWindow { width: 300px; }
} 
```

*只是一些示例视口大小和宽度；相应地调整。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:48:07.250

我会做这样的事情..

```
$(window).resize(function() {

    if((window).width() > 500 && !$("div").hasClass("smallerwindow")){

        $("div").addClass("smallerwindow");

    } else if((window).width() < 500 && $("div").hasClass("smallerwindow")) {

        $("div").removeClass("smallerwindow");

    }

}); 
```

检查窗口大小是否大于 500，然后如果 div 没有类添加它，否则如果窗口大小小于 500 并且 div 有类删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:47:49.900

jQuery：

```
if ($(window).width() > 500) {
   $("#myDiv").attr("class","smallerWindow");
} 
```

这将检查视口宽度，并重置当前的“类”属性

```
<div id='myDiv'> </div> 
```

# c - 在数组声明中使用 strlen

> ID：13141305
> 
> 赞同：0
> 
> 时间：2012-10-30T14:37:04.687
> 
> 标签：c, arrays, gcc, declaration, strlen

我写了以下代码：

```
char arrA[] = "something.";
char arrB[ strlen(arrA) + 5]; 
```

而且我的代码行为模糊。我得到错误的输出。首先，在我看来，问题`strlen`在于数组声明的使用。因为内存是在编译时分配的，函数在运行时执行。但是我在运行时没有收到错误。我的代码编译正确，但没有像我想象的那样工作。最好的部分是我没有在我的代码中的任何地方使用这些数组。我只是宣布他们。
**为什么我在编译时没有错误？**
**为什么我的代码输出出乎意料？**

当我评论第二个声明时，我得到了正确的输出。
我也尝试打印`sizeof` `arrB`. 猜猜我得到了什么*15*。
这意味着它工作正常。但是输出是一团糟，它不应该正常工作。
**这里发生了什么。为什么我只声明而不在任何地方使用的东西会严重影响我的代码？**

我的实际代码太大而且不同。使用该代码无法解释此错误。但我也在分享该代码。我的代码中的这个问题出在函数`portClearer`和数组`completeCommand`中。

```
#include <math.h>
#include <string.h>
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <regex.h>

int strintToInt(char *str, int len);
void read_command_output(char*, char*, int);
void processIdFinder(char*);
void portClearer(char*);
void compileRegex(regex_t*, char*);
void executeRegex(regex_t*, char*, size_t, regmatch_t*, int);

int main()
{   
    processIdFinder("dispatcher");
    portClearer("4444");
    return 0;
}

void read_command_output(char* command, char* buf, int buf_len){

    FILE *ps_output_file;
    if ((ps_output_file = popen(command,"r"))== NULL){
        printf("error\n");
        exit(1);
    }

    if(fgets(buf, buf_len, ps_output_file)==NULL)
        printf("%s\n",buf);

    fclose(ps_output_file);

    return;
}

void compileRegex(regex_t* regexPtr, char* pattern){

    if( regcomp(regexPtr, pattern, REG_EXTENDED) ){ 
        fprintf(stderr, "Could not compile regex\n");
        exit(1); 
    }
}

void executeRegex(regex_t* regex, char* buf, size_t nmatch, regmatch_t* reg_matches, int flags){

    char errmsgbuf[100];
    int err_ret;
    err_ret = regexec(regex, buf, nmatch, reg_matches, flags);
    if( !err_ret ){
        //puts("Match");
        return;    
    }
    else if( err_ret == REG_NOMATCH ){
            puts("No match");
            exit(1);
    }
    else{
            regerror(err_ret, regex, errmsgbuf, sizeof(errmsgbuf));
            fprintf(stderr, "Regex match failed: %s\n", errmsgbuf);
            exit(1);
    }
}

int strintToInt(char *str, int len)
{
    int iter, pow_iter, num=0;
    for(iter = 0, pow_iter = len-1; iter < len; iter++, pow_iter--)
    {
        num += (str[iter]-48)* ((int) pow(10,pow_iter));
    }
    return num;

}

void processIdFinder(char* commandName){

    char buf[100], id_proc[10];
    regex_t regex;
    regmatch_t reg_matches[2];

    char command[] = "/bin/ps -C ", commandGrep[] = " | grep ";
    char completeCommand[ strlen(command) + strlen(commandGrep) + 2 * 12];
    //"/bin/ps -C supervisor | grep supervisor"

    strcpy(completeCommand, command);
    strcat(completeCommand, commandName);
    strcat(completeCommand, commandGrep);
    strcat(completeCommand, commandName);

    read_command_output(completeCommand, buf, 100);

    compileRegex(&regex, "^ *([1-9]+) ?");

    executeRegex(&regex, buf, (size_t) 2, reg_matches, 0);

    //fetching result
    //printf("%d and %d  ----- %c and %c\n",reg_matches[1].rm_so,reg_matches[1].rm_eo,buf[reg_matches[1].rm_so],buf[reg_matches[1].rm_eo - 1]);
    strncpy(id_proc,buf+reg_matches[1].rm_so, reg_matches[1].rm_eo - reg_matches[1].rm_so);
    printf("(%s)\n",id_proc);
    printf("%d\n",strintToInt(id_proc,strlen(id_proc))); //its important to write strlen here not 10

    return;
}

void portClearer( char* portNo){

    char buf[100], id_proc[10];
    regex_t regex;
    regmatch_t reg_matches[2];

    char command[] = "/bin/netstat -nlp | grep ";
    char completeCommand[ strlen(command) + 5 ]; 
    //char completeCommand[ 25 + 5 ]; 
    printf("%d\n", sizeof(completeCommand));

    //strcpy(completeCommand, command);
    //strcat(completeCommand, portNo);

    read_command_output("/bin/netstat -nlp | grep 4444", buf, 100);

    compileRegex(&regex, "[1-9]+/");

    executeRegex(&regex, buf, (size_t) 1, reg_matches, 0);

    //fetching result
    //printf("%d and %d  ----- %c and %c\n",matches[0].rm_so,matches[0].rm_eo,buf[matches[0].rm_so],buf[matches[0].rm_eo - 1]);
    strncpy(id_proc,buf+reg_matches[0].rm_so, reg_matches[0].rm_eo - reg_matches[0].rm_so-1);
    printf("(%s)\n",id_proc);
    printf("%d\n",strintToInt(id_proc,strlen(id_proc))); //its important to write strlen here not 10

    return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:44:40.190

这是一个可变长度数组（在 C99 中引入）：

```
char completeCommand[ strlen(command) + 5 ]; 
```

这解释了如果您的编译器启用了 C99 支持，它为什么会编译。

这是不正确的：

```
if(fgets(buf, buf_len, ps_output_file)==NULL)
    printf("%s\n",buf); 
```

因为它`buf`在`fgets()`失败的情况下使用（并且是输出混乱的可能原因）。它应该是：

```
if(fgets(buf, buf_len, ps_output_file)!=NULL)
    printf("%s\n",buf); 
```

请注意，[`strncpy()`](http://en.cppreference.com/w/c/string/byte/strncpy)它不会附加空终止符，但*可以*将其从源缓冲区复制到目标缓冲区。这意味着不能保证`id_proc`会以空值终止。If `id_proc`is not null 终止并传递给`printf("%s")`垃圾很可能出现在`id_proc`.

# c++ - 无法运行 execv

> ID：13141306
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:37:06.760
> 
> 标签：c++, linux, execv

我一直在尝试使用 exevp 运行命令，如下所示：

```
char *args[11];
args[0] = (char*)lgulppath.c_str();
args[1] = (char*)"-i";
args[2] = (char*)sniffer_interface.c_str();
args[3] = (char*)"-r";
args[4] = (char*)pcapfileLimit.c_str();
args[5] = (char*)"-C";
args[6] = (char*)"1";
args[7] = (char*)"-f";
args[8] = (char*)serverip_filter.c_str();
args[9] = (char*)"-o";
args[10] = (char*)lpipepath.c_str();
execv("/usr/sbin/program",args); 
```

这行得通。但是，当我想将第一个参数“/usr/sbin/program”作为参数时说：

```
string str = "/usr/sbin/program";
//char* args is assigned as above
execv(str.c_str(),args); 
```

这失败并返回-1。我不明白为什么。

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:42:30.690

Null 终止您传递给 execv 的参数。就像是

```
char *args[12];
// other args..
args[11] = (char*) 0; 
```

# localhost - 如何从 Fitnesse 恢复 localhost:8080？

> ID：13141310
> 
> 赞同：1
> 
> 时间：2012-10-30T14:37:12.163
> 
> 标签：localhost, fitnesse

我安装了 Fitnesse.jar($using java -jar finesse.jar -p 8080) 并且 localhost 被它占用了。现在，当我需要 localhost 在 Eclipse 中进行远程调试时，我想删除它并恢复我的 localhost。我能用它做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:21:43.973

有几种方法可以杀死 Fitnesse（在作为守护进程运行之后）：

*   杀死 Java 进程（kill -9 或通过任务管理器）
*   使用关闭类/命令：

    ```
    java -cp fitnesse.jar fitnesse.Shutdown -h localhost -p 8080 
    ```

*   使用关闭 REST 命令，例如通过 wget：

    ```
    http://localhost:8080/?responder=shutdown 
    ```

# javascript - 在 node.js vm 上下文（沙箱）上修改属性后，上下文中的代码看不到修改

> ID：13141316
> 
> 赞同：0
> 
> 时间：2012-10-30T14:37:21.930
> 
> 标签：javascript, node.js, coffeescript, jasmine

# 背景

我正在[测试](https://github.com/nilbus/Backbone.dualStorage/tree/tests/spec)用于替代 Backbone.sync的 Backbone.js 的[Backbone.dualStorage插件。](https://github.com/nilbus/Backbone.dualStorage)

这是一个浏览器插件，但我使用 jasmine-node 来测试它。我将咖啡脚本源加载到节点环境中以`window`使用 vm.createContext 模拟浏览器：

```
vm = require 'vm'
fs = require 'fs'
coffee = require 'coffee-script'
backboneDualstoragePath = './backbone.dualstorage.coffee'
source = fs.readFileSync(backboneDualstoragePath, 'utf8')
window = require('./global_test_context.coffee').window
context = vm.createContext window
coffee.eval source, sandbox: context, filename: backboneDualstoragePath
exports.window = context 
```

这很好用——在我的测试中，我可以访问`window.foo`，其中 foo 是在 global_test_context.coffee 中的窗口对象上导出的属性。

我可以对嵌套在窗口沙箱下的任何对象使用 Jasmine 间谍并重新定义方法。例如：

```
spyOn(window.Store.prototype, 'create').andReturn(true)
window.Store.create() # The spy is called
window.localsync.create() # This function instantiates a Store object and calls create on it
                          # The spy is called 
```

但是，如果我尝试监视或以其他方式修改上下文的直接属性，则在沙箱上下文中看不到更改：

```
spyOn(window, 'localsync').andReturn(true)
window.localsync() # The spy is called
window.dualsync() # This function references the global localsync
                  # The original localsync is called 
```

vm.createContext[文档](http://nodejs.org/api/vm.html#vm_vm_createcontext_initsandbox)说：

> （V8）上下文包括一个全局对象以及一组内置对象和函数。可选参数 initSandbox *将被浅拷贝以播种*上下文使用的全局对象的初始内容。

所以听起来它会将我的窗口变量中的属性复制到 vm 上下文中。当我在此之后监视或以其他方式修改`window`时，我正在使用 vm 上下文，我将其导出为名为`window`. 因此，我认为上面的段落是无关紧要的，但我想包括它以防我错了。

# 问题

事件流归结为：

```
window = vm.createContext({globalVariables: forTesting...})

# similiar to vm.runInContext(backboneDualstorageSource, window)
coffee.eval(backboneDualstorageSource, sandbox: window)

# localsync and dualsync are both defined in the backboneDualstorageSource
spyOn(window, 'localsync')
window.dualsync() # calls the original localsync instead of the spy 
```

为什么在 vm 上下文中修改属性后，对 vm 内的那些“全局”属性/函数的引用不会改变？我想明白这一点。

我该如何解决这个问题，以便我可以在我正在测试的浏览器脚本中修改/spyOn 全局变量？

随意查看[源代码](https://github.com/nilbus/Backbone.dualStorage/tree/tests/spec)，以更好地了解与此问题中的片段相比，事物的实际编写方式。

## 编辑

我能够通过在上下文中运行的 eval 中创建间谍来解决这个问题，就像其他测试代码一样。见[https://github.com/nilbus/Backbone.dualStorage/commit/eb6c2b21](https://github.com/nilbus/Backbone.dualStorage/commit/eb6c2b21)

有人可以解释为什么我能够在上下文中而不是在上下文之外修改全局变量，即使我可以访问它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:24:02.127

如果我正确理解您的问题，在 eval 之后修改上下文不会影响已评估的脚本。如果您不需要将新成员添加到上下文，而只需要修改现有成员，请使用 getter，它在最新节点（目前为 0.8.x）中运行良好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T14:43:04.107

不要用`global`钥匙下降一级，试试这个：

```
window = vm.createContext({variablesForTesting.. }) 
```

# linq - 将 2 个 linq 表达式转换为

> ID：13141318
> 
> 赞同：0
> 
> 时间：2012-10-30T14:37:28.540
> 
> 标签：linq

无论如何将以下2个linq表达式更改为1？

```
var criticalCategories =
    _commonDao.GetAllByExpression<CategoryItem>(
        x => x.Category.Uid == gridAnswer.ActivityCategory.Uid && x.Critical);

if(criticalCategories.Any())
{
    criticalWeight = criticalCategories.Min(x => x.Weight);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:44:26.230

如果您的源序列不包含任何元素，您可以使用[`Enumerable.DefaultIfEmpty`](http://msdn.microsoft.com/en-us/library/bb355419.aspx)它来确保`Min`生成特定值。

然后你可以写：

```
var criticalCategories = _commonDao.GetAllByExpression<CategoryItem>(...);

criticalWeight = criticalCategories
                     .Select(x => x.Weight)
                     .DefaultIfEmpty(42)
                     .Min(); 
```

上面的内容很容易链接，但我实际上并没有在这里链接它，因为我不太确定`criticalCategories`以后应该如何使用（如果有的话）。你能澄清一下吗？

# ssrs-2008 - 在 SSRS 报告中，将一个子组的总和除以不同父组中另一个子组的总和

> ID：13141319
> 
> 赞同：0
> 
> 时间：2012-10-30T14:37:28.677
> 
> 标签：ssrs-2008, ssrs-grouping

我有一份财务报表。它具有分为销售、销售成本、运营费用和其他费用组的明细行。

*   销售和销售成本在父组“IF”中
*   营业费用在父组“E”中。

我想用总营业费用除以总销售额。那可能吗？

我已经为此苦苦挣扎了几个星期。使用以下公式，我可以得到毛利润占销售额的百分比：

```
 = iif(Fields!SectionName.Value = "IF" and 
               Fields!Account_Type.Value = "I", 
                     (ReportItems!txtGP12.Value/Fields!Month12_Net.Value),"0"). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T22:33:51.997

您可以使用内置聚合函数**并声明**应执行聚合的范围。在您的情况下，您希望在您拥有*的父组范围内*`SUM()`进行销售和`SUM()`运营费用。

 *### 例子

*   *对于此示例，我们将假设销售额位于数据集中*名为**Sales** 的字段中。

**   *运营费用位于数据集中*称为**费用** 的字段中。

    **   假设与您描述的父组名称相同：**IF**和**E**

    *   公式为：

    `Sum(Fields!ExampleField.Value, "E") / Sum(Fields!ExampleField.Value, "IF")`***

# msbuild - MSBuild 错误 MSB3107

> ID：13141324
> 
> 赞同：2
> 
> 时间：2012-10-30T14:37:48.523
> 
> 标签：msbuild, tfsbuild

我在 MSBuild 上收到以下错误：MSB3107

C:\Windows\Microsoft.NET\Framework64\v3.5\Microsoft.Common.targets (1001)：引用“....\Contracts\Contracts.csproj”的指定项目引用元数据丢失或无效价值：项目

由于我在互联网上没有找到很多关于 MSB3107 的信息，我想我会在这里发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:38:58.837

我通过删除对 Contracts.csproj 的所有引用并将它们与程序引用一起放回，解决了这个问题。这是一个简单的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T03:44:03.647

我遇到了这个问题，最终将 scproj `ToolsVersion`（根`Project`元素上的属性）设置为 3.5。将其更改为 4.0 解决了该问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-13T08:06:12.340

查找并删除此行：

*< Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-15T13:49:43.143

将 Xamarin Studio 解决方案转换为 Visual Studio 2017 for Mac 解决方案时出现此错误。

**/Library/Frameworks/Mono.framework/Versions/5.0.1/lib/mono/msbuild/15.0/bin/Microsoft.Common.CurrentVersion.targets(5,5)：错误MSB3107：指定的项目参考元数据参考“ {myproject}.csproj" 丢失或具有无效值：项目 (MSB3107) ({myproject})**

我最终创建了一个全新的解决方案文件 (sln)，然后是作为原生 iOS 库的新骨架 csproj 文件。我复制了这些类，并再次手动添加了引用。根本区别似乎是在 Project 标记下的第一个 PropertyGroup 部分的 .csproj 文件中删除这些 XML 条目。

```
<TargetFrameworkIdentifier>Xamarin.iOS</TargetFrameworkIdentifier>
<TargetFrameworkVersion>v1.0</TargetFrameworkVersion>
<ProductVersion>8.0.30703</ProductVersion>
<SchemaVersion>2.0</SchemaVersion>
<ReleaseVersion>4.0</ReleaseVersion> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-17T19:58:06.253

这可能是由于具有错误项目 GUID 的项目引用而发生的。如果来自版本控制系统的合并出错，则引用的 ID 可能会损坏。编辑 .csproj 文件以消除错误引用，然后从 Visual Studio 再次添加新引用可以解决此类问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-16T13:36:54.747

删除项目 GUID 中的冗余大括号后，我们的解决方案中发生了错误。删除 .vs 文件夹（或运行 a `git clean -fdx`）并重新启动 VisualStudio 后，错误不再出现。

# java - 如何在 HSQLDB 中创建特定日期？

> ID：13141328
> 
> 赞同：13
> 
> 时间：2012-10-30T14:37:54.423
> 
> 标签：java, spring, hsqldb

我需要在 HSQLDB 中创建一个 HIGH 日期，而我却找不到解决方案。我需要类似的东西

```
Date(9999-12-31 0:0:0) 
```

但我找不到功能或任何可以做的事情。我在启动时通过 Spring 输入日期，我需要类似的东西：

```
insert intoMOD (
  ITM_INST_ELECTR_MOD_STRT_TS,
  ITM_INST_ID,
  ELECTR_MOD_ID,
  ITM_INST_ELECTR_MOD_END_TS
) VALUES (
  CURRENT_DATE,
  0,
  0,
  Date(9999-12-31 0:0:0)
) 
```

在 Hypersonic 中使用 SQL 创建特定数据的方法是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-30T14:42:57.143

鉴于[用户指南](http://hsqldb.org/doc/guide/sqlgeneral-chapt.html#sgc_datetime_types)，我希望以下工作：

```
DATE '9999-12-31' 
```

或者，如果您需要超过一天的精度：

```
TIMESTAMP '9999-12-31 00:00:00' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-22T15:00:15.423

我一直在努力解决这个问题，我认为我可以为帮助其他人做出贡献。

这是加载 hsqldb 时需要在脚本中插入的插入内容：

```
insert intoMOD (
  ITM_INST_ELECTR_MOD_STRT_TS,
  ITM_INST_ID,
  ELECTR_MOD_ID,
  ITM_INST_ELECTR_MOD_END_TS
) VALUES (
  CURRENT_DATE,
  0,
  0,
  '9999-12-31'
) 
```

HSQLDB 自动转换字符串。

我用最新版本（2.3.3）进行了测试。

# php - 使用 curl/file_get_contents 从 facebook 获取页面

> ID：13141329
> 
> 赞同：0
> 
> 时间：2012-10-30T14:37:55.377
> 
> 标签：php, facebook

我尝试从我的 facebook 页面获取内容，如下所示：

echo file_get_contents("http://www.facebook.com/dma.y");

问题是它没有给我页面，而是将我重定向到另一个页面，说我需要升级我的浏览器。然后我想使用 curl 并通过发送带有一些标头的请求来获取它。

```
 echo get_follow_url('http://www.facebook.com/dma.y');
function get_follow_url($url){
        // must set $url first. Duh...
    $http = curl_init($url);
      curl_setopt($http, CURLOPT_RETURNTRANSFER, TRUE); 
       curl_setopt($http, CURLOPT_HTTPHEADER, get_headers('http://google.com'));
    // do your curl thing here
    $result = curl_exec($http);

 if(curl_errno($http)){ 
     echo "<br/>An error has been thrown!<br/>";
    exit(); 
 }
    $http_status = curl_getinfo($http, CURLINFO_HTTP_CODE);
    curl_close($http);
return $http_status;
} 
```

仍然没有运气。我应该返回一个状态码响应，它是 404 或 200 .. 取决于我是否登录到 Facebook。但它返回 301，因为它将我的请求标识为不是常规浏览器请求。那么我在 curl 选项设置中缺少什么？

**更新** 我实际上想要做的是复制这个功能：

脚本会根据返回的状态码触发 onload 或 onerror 函数。

该代码将检索页面。但是，该 javascript 方法很笨拙，并且在某些浏览器（如 firefox）中会中断。因为它不是 javascript 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:41:51.733

您可能想尝试的是`user_agent`使用 CURL 设置。

```
$url = 'https://www.facebook.com/cocacola';
$http = curl_init($url);
$fake_user_agent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7) Gecko/20040803 Firefox/0.9.3';
curl_setopt($http, CURLOPT_USERAGENT, $fake_user_agent); 
$result = curl_exec($http); 
```

这是服务器查看您使用的浏览器的参数。我不能 100% 确定这是否会绕过 Facebook 的检查并为您提供页面上的所有信息，但绝对值得一试！:)

# coldfusion - 将 CFC 绑定到 cfselect 框

> ID：13141330
> 
> 赞同：3
> 
> 时间：2012-10-30T14:37:57.837
> 
> 标签：coldfusion, cfc

我正在创建一个表单，无论出于何种原因，当使用`bindOnLoad`远程 CFC 时，我的默认值似乎没有出现。

这是cfselect：

```
<cfselect name="edcs"
          id="edcs"
          multiple="false"
          bind="cfc:Components.requestSearch.getEDCs()" 
          bindonload="true"
          value="edc_nm"
          display="edc_nm">
    <option name="">Select an EDC</option>
</cfselect> 
```

这是功能：

```
<cffunction name="getEDCs" access="remote" returntype="query">
    <cfscript>
        var queryService = new Query();
        queryService.setDatasource("#APPLICATION.db2system#");
        queryService.setName("getEDCs");
        queryService.setUserName("#APPLICATION.db2logon#");
        queryService.setPassword("#APPLICATION.db2pass#");
        queryService.setSQL(
                "select distinct rtrim(edc_nm) as edc_nm 
                   from #APPLICATION.db2owner#.pms_account");

        var result = queryService.execute();
        var edcs = result.getResult();          

        return("#edcs#");       
</cfscript>
</cffunction> 
```

因此，当页面加载时，我看到`<option ...>`显示的值瞬间显示，然后列表被填充，然后`Select an ECD`消失。我需要选择一个空值，这就是该选项的用途。我究竟做错了什么？谢谢。

补充：根据 CF10 文档，我应该可以使用`<option>`html 标签。 [http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7afe.html](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7afe.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:03:05.520

我在使用 CFSELECT 和绑定 CFC 时遇到过这个问题。我也无法添加`<option></option>`带有绑定 CFSELECT 的标签。最好的方法是创建查询并强制结果在顶部具有所需的输入。例如：

```
SELECT distinct 
    rtrim(edc_nm) as edc_nm_display,
    rtrim(edc_nm) as edc_nm_value
FROM #APPLICATION.db2owner#.pms_account
UNION
SELECT
'Select an EDC' as edc_nm_display,
'0' as edc_nm_value
FROM dual
ORDER BY 2 
```

这将返回您的查询，顶部带有“选择 EDC”。另外，作为支票，我认为`<option name="">Select an EDC</option>`应该是`<option value="">Select an EDC</option>`. 我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:51:50.423

查询将需要返回该值。尝试将其添加为 UNION 语句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T04:34:15.263

返回不是函数...

```
return("#edcs#"); 
```

尝试将您的功能更改为...

```
var result = queryServices().execute().getResult();
return result; 
```

# perl - 无法处理 perl LDAP 搜索

> ID：13141333
> 
> 赞同：4
> 
> 时间：2012-10-30T14:38:06.477
> 
> 标签：perl, ldap

这是我在 StackOverFlow 上的第一个问题，所以如果我做错了什么，请告诉我。

我正在编写一个 perl 脚本来执行 LDAP 搜索，以识别用户所属的列表组。我阅读了有关该主题的 perldocs 并在此网站上找到了一些示例，但我无法让脚本正常运行。

这是我的代码：

```
#!/usr/bin/perl

use strict;
use warnings;
use Net::LDAP;

my $ldap;
my $ldapuser = "MVS\\user";
my $ldappass = "passw0rd";
my $searchbase = "DC=dom,DC=site,DC=labs,DC=domain,DC=net";
my $attrs = "sAMAccountName, sn, givenname, memberOf";
my $filter="(samAccountName=user)";
my $result;

# ensure the ldap connection is made
print "Connecting to LDAP...\n";
$_ = $ldap = Net::LDAP->new('dc1.mvs.cso.labs.rim.net')     or die "$@";

# ensure the bind is successful
print 'Binding....';
$_ = $ldap->bind ("$ldapuser", password=>$ldappass, version=>3);
print $_->error_text();

$result = $ldap->search(base=>"$searchbase", filter=>"$filter", attrs=>[$attrs]);

my $max;
my $i;
my $entry;
my $first;
my $last;
my $login;
my @memberOf;

$max = $result->count;
print "Count: $max\n";

for ($i=0;$i<$max;$i++) {
$entry = $result->entry($i);
$last = $entry->get_value('sn');
$login = $entry->get_value('sAMAccountName');
@memberOf = $entry->get_value('memberOf');

print "$first $last\n";
print "$login\n";
print "@memberOf\n";

}
$ldap->unbind;
$ldap->disconnect; 
```

这是我运行此代码时的结果：

```
Connecting to LDAP...

Binding....Operation completed without error
Count: 1
Use of uninitialized value $first in concatenation (.) or string at ./ldap_test.cgi line 43, <DATA> line 604.
Use of uninitialized value $last in concatenation (.) or string at ./ldap_test.cgi line 43, <DATA> line 604.
Use of uninitialized value $login in concatenation (.) or string at ./ldap_test.cgi line 44, <DATA> line 604. 
```

据我所知，在我看来 $entry 在我运行时没有得到任何返回值：

```
$entry = $result->entry($i); 
```

但我可能是错的。任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:18:20.990

问题出在搜索的属性部分。你给它一个字符串，它期待一个数组引用。

错误的：

```
my $attrs = "sAMAccountName, sn, givenname, memberOf";
$result = $ldap->search(base=>"$searchbase", filter=>"$filter", attrs=>[$attrs]); 
```

好的：

```
my $attrs = ["sAMAccountName", "sn", "givenname", "memberOf"];
$result = $ldap->search(base=>"$searchbase", filter=>"$filter", attrs=>$attrs); 
```

# clojure - Clojure，Quil：在绘图功能中打印

> ID：13141343
> 
> 赞同：2
> 
> 时间：2012-10-30T14:38:34.440
> 
> 标签：clojure

我是 Clojure 和 Quil 的初学者。
作为开发的一部分，我想在绘图函数中将信息打印到 REPL。
但是，以下实现不起作用。没有产生错误，但它也没有打印任何东西。
为什么它不起作用，如何从 Quil 绘图功能打印到 REPL？

先感谢您。

```
(ns quil-learning.core
  (:use quil.core))

(defn setup []
  (smooth)
  (frame-rate 60)
  (background 255))

(def saved-out *out*)

(defn draw []
  (println "test 1") ; doesn't work
  (let [*out* saved-out] (println "test 2")) ; doesn't work either
  (stroke 0)
  (stroke-weight 2)
  (ellipse (mouse-x) (mouse-y) 2 2))

 (defsketch example
   :title "print test"
   :setup setup
   :draw draw) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:46:22.353

nrepl 正在将您的输出写入错误的缓冲区，这应该在 nrepl 0.1.4 [http://grokbase.com/t/gg/clojure/129jwz1yh9/ann-nrepl-el-0-1-中的大多数上下文中修复4 发布](http://grokbase.com/t/gg/clojure/129jwz1yh9/ann-nrepl-el-0-1-4-released). 我建议使用 emacs24+ 并使用它内置的打包系统来使 nrepl 保持最新。有关详细信息，请参阅[Emacs 入门工具包](https://github.com/technomancy/emacs-starter-kit)。或者您可以查看[我的 fork，它将](https://github.com/thearthur/arthur-s-emacs-config)nrepl 和 clojure-mode 添加到默认包列表

检查您启动 emacs 的终端，有时它会降落在那里。

# objective-c - Objective-c 静态 NSArray 初始化器

> ID：13141344
> 
> 赞同：6
> 
> 时间：2012-10-30T14:38:34.957
> 
> 标签：objective-c, ios, literals

我有这段代码（来自较大部分的一小部分 - 只是这里显示的麻烦部分）：

```
#define kSizeLarge @"large"

-(void)determineBestFileSizeWithLimit:(int)limit
{
    static NSString *largeName = kSizeLarge;
    static NSArray *nameArray = @[kSizeLarge];
    ...
} 
```

编译器喜欢第一个静态变量，讨厌第二个，说

```
Initializer element is not a compile-time constant 
```

从第二行删除静态使编译器高兴。

我/我做错了什么或没有正确？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T14:43:28.850

当您的静态变量的初始化器不是编译时常量时，您需要使用另一种初始化机制，例如`dispatch_once`：

```
-(void)determineBestFileSizeWithLimit:(int)limit {
    static NSString *largeName = kSizeLarge;
    static NSArray *nameArray = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        nameArray = @[kSizeLarge];
    });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T14:43:19.400

`NSArray`文字不是您发现的编译时常量。您应该使用`dispatch_once`来初始化数组。

```
#define kSizeLarge @"large"

-(void)determineBestFileSizeWithLimit:(int)limit
{
    static NSString *largeName = kSizeLarge;
    static NSArray *nameArray = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        nameArray = @[kSizeLarge];
    });
    ...
} 
```

# c - 如何在不使用递归的情况下迭代系列：0、1、2、3、4、4、5、6、7、7、8、7、8、8、9……？

> ID：13141352
> 
> 赞同：-4
> 
> 时间：2012-10-30T14:39:03.643
> 
> 标签：c, sequence, series

正在试图弄清楚如何在 C 中生成这个数字序列。

```
0, 1, 2, 3, 4, 4, 5, 6, 7, 7, 8, 8, 9 … 
```

该序列是通过形成一个数字三角形生成的，如下所示：

```
0
1 2
3 4 5
6 7 8 9 ... 
```

接下来的两个系列数字的位置如下：

1.  下一个数字位于正下方
2.  下一个位于右侧的一个位置。

```
0
|\
1 2

Series -> 0, 1, 2

0
|\
1 2
|\|\
3 4 5

Series -> 0, 1, 2, 3, 4, 4, 5, ........ 
```

如何遍历这个数字三角形以在 C 中得到这个序列？

这意味着 0 替换为 1 和 2 1 替换为 3 和 4 2 替换为 4 和 5

```
0
|\
1 2
|\|\
3 4 5
|\|\|\
6 7 8 9

Series -> 0, 1, 2, 3, 4, 4, 5, 6, 7, 7, 8, 7, 8, 8, 9 ........ 
```

代表着

**一、求解0**

```
0 leads to 1 and 2

0 -> 1 - 2
0 1 2 
```

**二、解决 1 和 2**

```
1 leads to 3 and 4

1 -> 3 - 4
0 1 2 3 4

2 leads to 4 and 5

2 -> 4 - 5
0 1 2 3 4 4 5 
```

**三、求解 3、4、4、5**

```
3 leads to 6 and 7

3 -> 6 - 7
0 1 2 3 4 4 5 6 7

4 leads to 7 and 8

4 -> 7 - 8
0 1 2 3 4 4 5 6 7 7 8

4 leads to 7 and 8

4 -> 7 - 8
0 1 2 3 4 4 5 6 7 7 8 7 8

5 leads to 8 and 9

5 -> 8 - 9
0 1 2 3 4 4 5 6 7 7 8 7 8 8 9 
```

我很抱歉没有正确解释。希望这次能解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:53:40.267

我假设（根据描述）你的序列确实应该是

```
 0
 1  2
 3  4  4  5
 6  7  7  8  8  9
10 11 11 12 12 13 13 14 
```

等等

您可以使用如下代码使用它：

```
int nextRowStart = 0;
int nextRowSize = 1;

for (int curr = 0; /*put some ending condition here*/; curr++)
{
    yield(curr)
    if (curr != nextRowStart - 1 && curr != nextRowStart)
        yield(curr);
    if (curr == nextRowStart)
    {
        nextRowStart += nextRowSize;
        nextRowSize++;
    }
}

void yield(int x)
{
    printf("%d ", x);
} 
```

* * *

有了改变的问题，新的问题可以递归完成

这是 C# 中的解决方案：

```
IEnumerable<int> Generate(int level)
{
    if (level == 0)
    {
        yield return 0;
        yield break;
    }

    int diff = level;
    foreach (int n in Generate(level - 1))
    {
        yield return n + diff;
        yield return n + diff + 1;
    }
}

var result = Enumerable.Range(0, maxLevel).SelectMany(Generate); 
```

翻译成C语言需要一些时间...

* * *

C解决方案：

```
void Generate(int level, int* resultsize, int** result)
{
    if (level == 0)
    {
        *result = (int*)malloc(sizeof(int));
        (*result)[0] = 0;
        *resultsize = 1;
    }
    else
    {
        int recResultSize;
        int* recResult;
        Generate(level - 1, &recResultSize, &recResult);
        *resultsize = recResultSize * 2;
        *result = (int*)malloc(*resultsize * sizeof(int));
        for (int i = 0; i < recResultSize; i++)
        {
            (*result)[2*i]     = recResult[i] + level;
            (*result)[2*i + 1] = recResult[i] + level + 1;
        }
        free(recResult);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T21:19:00.987

这是给出确切结果并解决问题的代码。就在@Lundin 要求我发布我的代码时，我得到了这个结果，我再次尝试并且成功了。多谢你们。

```
#include<stdio.h>

int in;

int main(){
 int  ik, it, icount = 0, ih, temp, ig = 1;
 int aisum[100];
     aisum[0] = 0;
     scanf("%d",&in);
     printf("0\n");
     it = 1;ih = 0;temp = 2;
     for(icount = 0,ig = 1; icount <= in; icount++){
                for(ik = 0; ik<2; ik++){
                        aisum[ig] = aisum[icount] + it + ik ;
                        printf("%d ",aisum[ig]);
                        ig++;
                }

                if(aisum[icount] == ih){
                    printf("\n");
                    it++;
                    ih += temp;
                    temp++;
                }
     }

 return 0;
}
     /*Input the number of elements to be processed*/
     /*icount will account for new elements to be formed like if we look
     at pascal triangle
     0 will form 1 and 2
     1 will form 3 and 4
     */
     /*ig will account for array indices*/
     /*it will account for the periodic addition */
     /*ih checks for the codnition for it to increement
     0
     1 2
     3 4 5
     it will be increemented at 0, 2, 5 ...
     */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-25T17:48:23.887

我可以从三角形下方到所需顺序的最简单解决方案是......

> 0
> 
> 1 2
> 
> 3 4 5
> 
> 6 7 8 9

打印每行的**开始**和**结束**节点并打印中心元素 2 次...

每行开始将等于前一个结束+1 ...

end 将等于 end+1+count...

每行计数将增加 1...

## CPP计划：

```
#include<iostream>    
using namespace std;    
int main()    
{    
    int start=1,end=2,count=1;    
    cout<<0<<" ";    
    while(count<5)    
    {    
        cout<<start<<" ";    
        for(int i=start+1;i<end;i++)    
        {    
            cout<<i<<" "<<i<<" ";    
        }    
        cout<<end<<" ";    
        count++;    
        start=end+1;    
        end=start+count;    
    }    
    return 0;    
} 
```

# objective-c - TableView cellforrowat indexpath 委托中分配的数组正在泄漏内存

> ID：13141354
> 
> 赞同：-3
> 
> 时间：2012-10-30T14:39:10.107
> 
> 标签：objective-c, memory-leaks

```
NSMutableArray * lCellColValues = (NSMutableArray * ) nil;
lCellColValues = [[[NSMutableArray alloc] init] autorelease];

if (0 == lSecModulus) {
    if cObjTransListPtr.count > 0 && lObjTransData.m_cObjSDElemInfoPtr.count > 0) {
        [lCellColValues addObject: lObjTransData.m_cObjTransNamePtr];
        [lCellColValues addObject: [[NSNumber numberWithInteger: lObjTransData.m_cTransCounter] stringValue]];
    } else {
        if (nil != lObjSDElemInfo.m_cObjStartTimePtr) {
            NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
            dateFormatter.dateFormat = @"HH:mm:ss";
            [dateFormatter setTimeZone: [NSTimeZone timeZoneForSecondsFromGMT: 0.0]];
            NSString * myDateAsString = [dateFormatter stringFromDate: lObjSDElemInfo.m_cObjEndTimePtr];
            [lCellColValues addObject: myDateAsString];
            SAFE_RELEASE(dateFormatter)
        } else {
            [lCellColValues addObject: @""];
        }

    [lCellColValues addObject: [[NSNumber numberWithDouble: lObjSDElemInfo.m_cElementTime] stringValue]];
    }
}

if ((CustSplitCell * ) nil == lObjCellPtr) {
    if (m_cObjTransListPtr.count > 0) {
        lObjCellPtr = [[[CustSplitCell alloc] initWithStyleAndTitles: UITableViewCellStyleDefault reuseIdentifier: lObjCellIdentifier titles: lCellColValues rowNumber: indexPath.row] autorelease];
    } else {
        [lCellColValues addObject: @""];
        lObjCellPtr = [[[CustSplitCell alloc] initWithStyleAndTitles: UITableViewCellStyleDefault reuseIdentifier: lObjCellIdentifier titles: lCellColValues rowNumber: indexPath.row] autorelease];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:38:48.520

也许这可以帮助你：http: [//developer.apple.com/library/mac/#documentation/cocoa/conceptual/MemoryMgmt/Articles/MemoryMgmt.html](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

我认为您需要确保在适当的地方使用自动释放，在适当的地方保留等。如果您只使用 alloc/init 而不使用自动释放，那么您需要确保在完成后有一个参考，您可以自己释放。当你以这种方式做事时，你就完全拥有了那个对象。这都包含在我链接到的规则中。

请注意，此答案是此问题中评论的副本：[数组中对象的内存泄漏](https://stackoverflow.com/questions/3121198/memory-leak-for-object-in-array?rq=1)

# jasper-reports - 错误填充打印...无限循环创建新页面

> ID：13141358
> 
> 赞同：2
> 
> 时间：2012-10-30T14:39:21.330
> 
> 标签：jasper-reports, ireport

尝试预览报告时出现此错误。

```
Error filling print... Infinite loop creating new page. 
net.sf.jasperreports.engine.JRException: Infinite loop creating new page. 
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillPageBreak(JRVerticalFiller.java:1903)  
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBreak(JRVerticalFiller.java:1961) 
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillGroupHeaderReprint(JRVerticalFiller.java:704)  
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillGroupHeadersReprint(JRVerticalFiller.java:672)      
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillPageBreak(JRVerticalFiller.java:1944)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBreak(JRVerticalFiller.java:1961)  
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:747) 
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:281)
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:144) 
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:909) 
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:822)
at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:61) 
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:446)
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:276) 
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:745)
at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:891) 
at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572) 
at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997)
Print not filled. Try to use an EmptyDataSource... 
```

有没有我必须检查的选项或其他东西才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-29T21:53:44.593

就我而言，我通过在添加详细信息带的帮助下消除子报表来解决问题。但是，子报表位于组页眉中，而不是页眉中。对于其他有类似问题的人，我建议采用类似的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-23T09:13:23.560

我有同样的问题，我增加了报告的垂直大小。现在问题已解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-22T05:43:15.473

只需要`$V{PAGE_NUMBER}.equals(1)`在列标题属性上的 Print When Expression 上编写 groovy 即可。

当您将子报告放在详细信息部分时会发生这种情况，因此 jasper 中的列标题重复两次。

因此，您必须告诉列标题不要在子报告中再次重复。

# android - 带定时器的 AsyncTask 继续运行

> ID：13141361
> 
> 赞同：1
> 
> 时间：2012-10-30T14:39:32.380
> 
> 标签：android, android-asynctask

我已经通过以下代码安排了`AsyncTask`使用`Timer`

```
public void toCallAsynchronous() {
    TimerTask doAsynchronousTask;
    final Handler handler = new Handler();
    Timer timer = new Timer();

    doAsynchronousTask = new TimerTask() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            handler.post(new Runnable() {
                public void run() {

                    try {
                        if(mLoggedIn)
                        {
                            DownloadRandomPicture   download = new DownloadRandomPicture(this, mApi, CLIENT_ID, mImage);
                            download.execute();
                        }
                    } catch (Exception e) {
                        // TODO Auto-generated catch block

                    }

                }
            });

        }

    };

    timer.schedule(doAsynchronousTask, 0,50000);//execute in every 50000 ms

}
 @Override
    protected Boolean doInBackground(Void... params) {
try {
        if (mCanceled) {
            return false;
        }

        // Get the metadata for a directory
        Entry dirent = mApi.metadata(mPath, 1000, null, true, null);

        if (!dirent.isDir || dirent.contents == null) {
            // It's not a directory, or there's nothing in it
            mErrorMsg = "File or empty directory";
            return false;
        }

        // Make a list of everything in it that we can get a thumbnail for
        ArrayList<Entry> thumbs = new ArrayList<Entry>();
        for (Entry ent: dirent.contents) {
            if (ent.thumbExists) {
                // Add it to the list of thumbs we can choose from
                thumbs.add(ent);
            }
        }

        if (mCanceled) {
            return false;
        }

        if (thumbs.size() == 0) {
            // No thumbs in that directory
            mErrorMsg = "No pictures in that directory";
            return false;
        }

        // Now pick a random one
        int index = (int)(Math.random() * thumbs.size());
        Entry ent = thumbs.get(index);
        String path = ent.path;
        mFileLen = ent.bytes;

        String cachePath = mContext.getCacheDir().getAbsolutePath() + "/" + IMAGE_FILE_NAME;
        try {
            mFos = new FileOutputStream(cachePath);
        } catch (FileNotFoundException e) {
            mErrorMsg = "Couldn't create a local file to store the image";
            return false;
        }

        // This downloads a smaller, thumbnail version of the file.  The
        // API to download the actual file is roughly the same.
        mApi.getThumbnail(path, mFos, ThumbSize.BESTFIT_960x640,
                ThumbFormat.JPEG, null);
        if (mCanceled) {
            return false;
        }

        mDrawable = Drawable.createFromPath(cachePath);
        // We must have a legitimate picture
        return true;

    } catch (DropboxUnlinkedException e) {
        // The AuthSession wasn't properly authenticated or user unlinked.
    } catch (DropboxPartialFileException e) {
        // We canceled the operation
        mErrorMsg = "Download canceled";
    } catch (DropboxServerException e) {
        // Server-side exception.  These are examples of what could happen,
        // but we don't do anything special with them here.
        if (e.error == DropboxServerException._304_NOT_MODIFIED) {
            // won't happen since we don't pass in revision with metadata
        } else if (e.error == DropboxServerException._401_UNAUTHORIZED) {
            // Unauthorized, so we should unlink them.  You may want to
            // automatically log the user out in this case.
        } else if (e.error == DropboxServerException._403_FORBIDDEN) {
            // Not allowed to access this
        } else if (e.error == DropboxServerException._404_NOT_FOUND) {
            // path not found (or if it was the thumbnail, can't be
            // thumbnailed)
        } else if (e.error == DropboxServerException._406_NOT_ACCEPTABLE) {
            // too many entries to return
        } else if (e.error == DropboxServerException._415_UNSUPPORTED_MEDIA) {
            // can't be thumbnailed
        } else if (e.error == DropboxServerException._507_INSUFFICIENT_STORAGE) {
            // user is over quota
        } else {
            // Something else
        }
        // This gets the Dropbox error, translated into the user's language
        mErrorMsg = e.body.userError;
        if (mErrorMsg == null) {
            mErrorMsg = e.body.error;
        }
    } catch (DropboxIOException e) {
        // Happens all the time, probably want to retry automatically.
        mErrorMsg = "Network error.  Try again.";
    } catch (DropboxParseException e) {
        // Probably due to Dropbox server restarting, should retry
        mErrorMsg = "Dropbox error.  Try again.";
    } catch (DropboxException e) {
        // Unknown error
        mErrorMsg = "Unknown error.  Try again.";
    }
    return false;
}
protected void onProgressUpdate(Long... progress) {
        int percent = (int)(100.0*(double)progress[0]/mFileLen + 0.5);
        //mDialog.setProgress(percent);
    }

    @Override
    protected void onPostExecute(Boolean result) {
        //mDialog.dismiss();
        if (result) {
            // Set the image now that we have it
            mView.setImageDrawable(mDrawable);
        } else {
            // Couldn't download it, so show an error
            showToast(mErrorMsg);
        }
    } 
```

我从`onCreate`我的活动中调用这个。我的异步任务基本上是从服务器下载一些数据。主要活动允许用户登录到服务器，然后我去获取数据。我面临的问题是每个 AsyncTask 创建自己的线程。此外，这些都没有完成。线程状态始终在运行。有没有办法检查新的 AsyncTask 仅在较早完成时才启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T04:10:17.010

以下链接可以帮助您，请看一下，谢谢。

[Android：我可以按顺序链接异步任务（在前一个异步任务完成后启动一个）](https://stackoverflow.com/questions/7494515/android-can-i-chain-async-task-sequentially-starting-one-after-the-previous-as)

和

[Android 在另一个完成后立即调用 AsyncTask](https://stackoverflow.com/questions/10048958/android-calling-asynctask-right-after-an-another-finished)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:51:36.007

试试这个方法

```
public ArrayBlockingQueue<Runnable> threadList = new ArrayBlockingQueue<Runnable>(
        2000, true);
public ThreadPoolExecutor threadPool = new ThreadPoolExecutor(0,
        2000, 1000, TimeUnit.MILLISECONDS, threadList);

TimerTask t=new TimerTask() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    //your code here
                }
            };    

ThreadPool.execute(t); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:52:30.547

生产线`timer.schedule(doAsynchronousTask, 0,50000);//execute in every 50000 ms`负责重复性任务。

根据 Timer 类的 schedule(TimerTaskObject, int start, int repete) 方法的描述，这将在定义的时间间隔内重复特定的 TimerTask，我建议您将其更改如下，

```
timer.schedule(doAsynchronousTask, 1000);//execute once after one second 
```

# php - 找不到“DOMDocument”的致命错误类文件

> ID：13141362
> 
> 赞同：2
> 
> 时间：2012-10-30T14:39:42.680
> 
> 标签：php, apache, prado

我们正在使用一个带有 httpd 服务器的应用程序。为了性能，我将 httpd 从 prefork.c 移动到 worker.c，然后重新启动 httpd。

现在我收到以下错误。

```
Fatal Error

Class file for 'DOMDocument' cannot be found.

Debug Backtrace

1  -- PradoBase::autoload('DOMDocument')

2 TXmlDocument.php:385 -- spl_autoload_call('DOMDocument')

3 TXmlDocument.php:371 -- TXmlDocument->loadFromString('  <parameters>   <parameter id="siteTitle" value=&q...')

4 TParameterModule.php:75 -- TXmlDocument->loadFromFile('/var/www/html/swp_branches/protected/settings.xml')

5 TApplication.php:909 -- TParameterModule->init(TXmlElement)

6 TApplication.php:956 -- TApplication->applyConfiguration(TApplicationConfiguration, false

7 TApplication.php:370 -- TApplication->initApplication()

8 index.php:56 -- TApplication->run() 
```

# powershell - 移动项目在零字节上失败

> ID：13141364
> 
> 赞同：0
> 
> 时间：2012-10-30T14:39:50.057
> 
> 标签：powershell, powershell-2.0

下面的脚本哪里出错了...它检查文件是否为零 (0) 字节，然后如果它们是，则将它们移动到文件夹中。

它在 IF 语句之外工作正常，但是当我在下面尝试它时，它无法复制文件并显示以下错误：

> Move-Item：无法将参数绑定到参数“路径”，因为它为空。在 C:\Tools\jon\testing_scheduled.ps1:109 char:11 + Move-Item <<<< $moving "$scheduledpath\Move_empty" + CategoryInfo : InvalidData: (:) [Move-Item], ParameterBindingValidationException + FullyQualifiedErrorId ： ParameterArgumentValidationErrorNullNotAllowed,Microsoft.PowerShell.Commands.MoveItemCommand

```
filter gettheheckout([string]$path = '.')
    {
        $move = Get-ChildItem $scheduledpath | Where-Object {$_.length -eq 0} | Foreach-Object {$_.fullName}
    }

$moving = gettheheckout
$check = @(Get-ChildItem $scheduledpath | Where-Object {$_.length -eq 0})

if ($check.length -eq 0)
{ 
    Write-host = "No files to move - Script Completed" -ForegroundColor Cyan    
} 
else 
{
    Move-Item $moving "$scheduledpath\Move_empty"

    Write-Host "Script Completed - Use Excel to Filter on commas - Have a nice day!" -ForegroundColor Cyan
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:44:18.490

改变这个：

```
filter gettheheckout([string]$path = '.')
    {
       Get-ChildItem $scheduledpath | Where-Object {$_.length -eq 0} | Foreach-Object {$_.fullName}
    } 
```

并确保`$scheduledpath`是一个全局范围变量并且有一个值。

# mysql - 如果有条件，$row 中的 MySQL 结果将不会回显

> ID：13141365
> 
> 赞同：0
> 
> 时间：2012-10-30T14:39:51.243
> 
> 标签：mysql, if-statement, row

如果用户单击修改视频链接有条件，我试图让前面代码中查询的行在其中回显。但是，当我直接在 if ($videoEdit) { 条件上方回显 $video 变量时，它会显示在页面上，但是如果我尝试在 if ($videoEdit) { 条件下回显它，由于某种原因它不会输出。我很困惑。这是我的代码（不包括查询，但 echo $video 在有条件之前会输出正确的结果）

添加：：：

```
require ('../mysql_connect.php'); // Connect to DB

    // Handle Video Edit
   if ($_GET['video'] == "EDIT") {

$videoEdit = TRUE;

   }

    $query = "SELECT inventory.inv_key, inventory.mdl_key, inventory.serial, inventory.date_aquired, inventory.location, inventory.price, model.mdl_key, model.man_key, model.cls_key, model.sub_cls_key, model.model, model.video, model.picture, model.pdf, subclass.sub_cls_key, subclass.subclass, class.cls_key, class.class, manufacturer.man_key, manufacturer.manufacturer FROM inventory, manufacturer, model, class, subclass WHERE inventory.mdl_key='$_GET[mdl_key]' AND model.mdl_key='$_GET[mdl_key]' AND class.cls_key='$_GET[cls_key]' AND subclass.sub_cls_key='$_GET[sub_cls_key]' AND manufacturer.man_key='$_GET[man_key]' AND manufacturer=manufacturer.manufacturer AND class=class.class AND subclass=subclass.subclass";
$result = @mysql_query ($query); // Run the query

while ($row = mysql_fetch_array 
($result, MYSQL_ASSOC)) {
$model = $row['model'];
$mdl_key = $row['mdl_key'];
$video = $row['video'];
$picture = $row['picture'];
$pdf = $row['pdf'];
$description = $row['description'];
$manufacturer = $row['manufacturer'];
$man_key = $row['man_key'];
} 
```

上面的补充::::

```
if ($_GET['video'] == 'EDIT') { 
$videoEdit = TRUE; 
}

while ($row = mysql_fetch_array($result)) {
$video = $row['video'];
}

if ($videoEdit) { // <-- boolean comparison
echo '<form action="edit_media.php" method="post">
<p>Video Link: <input type="text" name="serial" size="25" maxlength="100" value=';
       if (isset($video))
            echo $video;
        }
            echo ' /></p><p><input type="submit" name="submit" value="Submit Video" /></p>               <input type="hidden" name="submitted" value="TRUE" />
        </form>';
} 
```

加法：：这是，在我的代码中，直接在上面的代码下面

```
if ($video != "") {
    echo '<iframe width="420" height="315" src=' . $video . ' frameborder="0" allowfullscreen></iframe> | <a href=edit_media.php?video=EDIT&mdl_key=' . $mdl_key . '&man_key=' . $man_key . '>Modify Video Link</a>';
} else {
    echo "Video Not Present | <a href=edit_media.php?video=EDIT>Add a Video</a>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:44:17.200

您在 html 字符串 ' /></p>...' 的其余部分之前缺少回显

```
if (isset($video))
      echo $video;

echo ' /></p><p><input type="submit" name="submit" value="Submit Video" /></p> <input type="hidden" name="submitted" value="TRUE" /></form>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:48:14.880

最有可能的`$video`是，未设置。

您应该尝试`echo $video;`在`while`循环之后。此外，除非您只获取单个结果，否则不应使用循环。

```
$row = mysql_fetch_array($result);
$video = $row['video'];
echo $video; 
```

**更新**

以下是我将如何解决您的问题（显然替换`mysql_`函数）：

```
if ($_GET['video'] == 'EDIT') { 
    $result = mysql_query("SELECT ... ");
    $row = mysql_fetch_array($result);
    $video = $row['video'];

    echo '<form action="edit_media.php" method="post">
    <p>Video Link: <input type="text" name="serial" size="25" maxlength="100" value='";
    if (isset($video)) {
        echo $video;
    }

    echo '" /></p><p><input type="submit" name="submit" value="Submit Video" /></p>               <input type="hidden" name="submitted" value="TRUE" />
            </form>';
    }

} 
```

还注意到您缺少打开的大括号 ( )，以及HTML 中`{`的值周围的双引号。`$video`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:45:01.920

不确定这是否是答案，但在尝试回显 $video 内容之后，您似乎需要另一个“回声”才能继续循环。在这之前：

```
' /></p><p><input type="submit" name="submit" value="Submit Video" /></p>               <input type="hidden" name="submitted" value="TRUE" /> 
```

# sql - 是否可以将列值设置为字符串和迭代值的串联？

> ID：13141369
> 
> 赞同：1
> 
> 时间：2012-10-30T14:40:00.420
> 
> 标签：sql, sql-server, tsql

是否可以将 varchar 列的值设置为字符串和结果集迭代的串联。

例如：

```
update TB_USER set LOGIN_NAME = 'BOB'+index where LOGIN_NAME = 'BOB' 
```

结果如下：

> 登录名
> 
> BOB0
> 
> BOB1
> 
> BOB2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T14:42:36.927

```
update T
SET LOGIN_NAME = LOGIN_NAME + CAST(rn AS varchar(10))
FROM
   (SELECT
       LOGIN_NAME,
       ROW_NUMBER() OVER (ORDER BY something /*or (SELECT 1)/*) as rn
    FROM
       TB_USER
    WHERE
       LOGIN_NAME = 'Bob'
    ) T 
```

# c# - 我的拖放代码有什么问题...（Silverlight 4）

> ID：13141371
> 
> 赞同：0
> 
> 时间：2012-10-30T14:40:09.343
> 
> 标签：c#, .net, silverlight, drag-and-drop

我在 Silverlight 4 中的 RichTextBox 有拖放行为，但我遇到了一个小问题。

我希望用户能够“抓取” RichTextBox 的任何边框并拖放它。RichTextBox 应该相对于用户“抓取”RichTextBox 的位置拖动。但是，一旦用户开始拖动，RichTextBox 就会“捕捉”到鼠标位置的中间，而不是保持相对于鼠标位置的位置。

因此，如果我抓住右下角，如下所示...

[https://skydrive.live.com/redir?resid=DCC93DD825EF3F43!658](https://skydrive.live.com/redir?resid=DCC93DD825EF3F43!658)

它在拖动开始时“捕捉”到鼠标位置的中间，如下所示...

[https://skydrive.live.com/redir?resid=DCC93DD825EF3F43!659](https://skydrive.live.com/redir?resid=DCC93DD825EF3F43!659)

这是我的拖动代码。我假设我的数学是错误的（在 MouseMove 事件中）？？？

```
public class CustomRichTextBox : RichTextBox
{
    private bool isDragging = false;

    protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
    {
        base.OnMouseLeftButtonDown(e);

        bool isDragAllowed = false;
        Point pt = e.GetPosition(this);

        if (pt.Y >= 0 && pt.Y <= this.BorderThickness.Top)
            // Allow dragging if the mouse is down on the top border
            isDragAllowed = true;
        else if (pt.Y >= (this.RenderSize.Height - this.BorderThickness.Bottom) && pt.Y <= this.RenderSize.Height)
            // Allow dragging if the mouse is down on the bottom border
            isDragAllowed = true;
        else if (pt.X >= 0 && pt.X <= this.BorderThickness.Left)
            // Allow dragging if the mouse is down on the left border
            isDragAllowed = true;
        else if (pt.X >= (this.RenderSize.Width - this.BorderThickness.Right) && pt.X <= this.RenderSize.Width)
            // Allow dragging if the mouse is down on the right border
            isDragAllowed = true;

        if (!isDragAllowed)
            return;

        this.CaptureMouse();
        isDragging = true;
    }

    protected override void OnMouseMove(MouseEventArgs e)
    {
        base.OnMouseMove(e);

        if (isDragging)
        {
            CustomRichTextBox elem = this;
            CompositeTransform ct = (CompositeTransform)elem.RenderTransform;
            UIElement parent = (UIElement)elem.Parent;

            ct.TranslateX = e.GetPosition(parent).X - (parent.RenderSize.Width / 2);
            ct.TranslateY = e.GetPosition(parent).Y - (parent.RenderSize.Height / 2);
        }
    }

    protected override void OnMouseLeftButtonUp(MouseButtonEventArgs e)
    {
        base.OnMouseLeftButtonUp(e);

        isDragging = false;
        this.ReleaseMouseCapture();
    }
} 
```

# php - 如何抛出未实现的错误

> ID：13141373
> 
> 赞同：1
> 
> 时间：2012-10-30T14:40:09.440
> 
> 标签：php, error-handling

> **可能重复：**
> [在 PHP 中抛出 NotImplementedError？](https://stackoverflow.com/questions/8092886/throw-a-notimplementederror-in-php)

在编写基类时，我经常逐渐开发，并且只构建我需要的（或者，我正在测试的）。然而，我喜欢我的界面是平衡的。对于每个 getter 一个 setter。在实现 CRUD 时，即使现在，我只需要 R，我宁愿为 CUD 编写存根。

我希望这些抛出一些未实现的异常。如何引发此类错误或异常？

例如：

```
class Resource {
  /**
   * get Issues a GET-request to Online, fetch with $this::$id
   * @returns $this
   */
  protected function get() {
    if ($this->id) {
      $attributes = http_build_query(array("id" => $this->id));
      $url = "{$this->url}?{$attributes}";
      $options = array_merge(array('method' => 'GET'));
      $response = _http_request($url, $options);
      $this->parse($response);
    }
    return $this;
  }

  /**
   * post Place a new object on Online
   *
   * @param $attributes ....
   * @returns Source $this
   */
  protected function post($attributes = array()) {
    throw new NotImplementedError();
  }

  /**
   * put Updates an object on Online
   *
   * @param $attributes ....
   * @returns $this
   */
  protected function put($attributes = array()) {
    throw new NotImplementedError();
  }

  /**
   * delete Removes an object from Online, selected by $this::$id.
   * @returns $this
   */
  protected function delete() {
    throw new NotImplementedError();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:43:59.880

看看这个先前的答案：[Throw a NotImplementedError in PHP?](https://stackoverflow.com/questions/8092886/throw-a-notimplementederror-in-php)

非常简单地说，PHP 中不存在异常，但您可以通过扩展现有异常轻松创建自己的异常。先前的答案建议使用 BadMethodCallException 来执行此操作：

```
class NotImplementedException extends BadMethodCallException
{} 
```

然后，您可以在代码中抛出 NotImplementedException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:43:12.807

你可以`throw new NotImplementedException()`——就像Symfony API 中的[这个](http://api.symfony.com/2.7/Symfony/Component/Locale/Exception/NotImplementedException.html)一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:45:20.563

在我看来，您有两种可能性：

1.  从异常类派生并实现一个`not implemented exception`，你可以抛出。
2.  将未实现的方法定义为抽象的。然后编译器会产生一个错误。不要忘记将整个基类标记为抽象。

# c# - 具有缩放、水平滚动和居中内容的 WinRT ItemsControl

> ID：13141374
> 
> 赞同：3
> 
> 时间：2012-10-30T14:40:43.160
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我已经为此奋斗了几个小时，似乎无法找到解决问题的方法。

我的问题是，我有一个占据整个屏幕的项目控件。它显示图像的水平列表，只能水平滚动。它们垂直居中，最初占据屏幕的 33% 左右。

我希望用户能够放大到这个列表，直到图像占用 100% 的可用空间。我通过设置 Scrollviewer.ZoomEnabled="true" 来做到这一点，效果很好。通过将 itemscontrols 滚动查看器的垂直内容对齐设置为“中心”，应用程序可以围绕中心放大和缩小。

然而...

当我在带有触摸的设备或使用触摸的模拟器上运行它时，缩放行为按预期工作，直到我使用触摸输入并尝试垂直滚动。

然后项目立即“跳”到底部而不是中心，并且再次正确定位它们的唯一方法是缩小并再次缩小。

这种行为非常令人沮丧，因为我似乎无法修复它。任何帮助将不胜感激！

这是重现问题的最小解决方案[https://skydrive.live.com/redir?resid=EE9DF7D217DF3EA6!1060&authkey=!AJVGrLoTrOz8Hyk](https://skydrive.live.com/redir?resid=EE9DF7D217DF3EA6!1060&authkey=!AJVGrLoTrOz8Hyk)

如果你想重新创建它，代码如下：

**项目控制.XAML**

```
<Style x:Key="ItemsControlStyle" TargetType="ItemsControl">
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Horizontal" Margin="90,0" ManipulationMode="TranslateX"/>
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ItemsControl">
                <ScrollViewer ZoomMode="Enabled"
                              VerticalSnapPointsType="None"
                              MinZoomFactor="0.5"
                              VerticalScrollMode="Disabled"
                              VerticalScrollBarVisibility="Disabled"
                              HorizontalScrollMode="Enabled" 
                              HorizontalScrollBarVisibility="Visible"
                              VerticalContentAlignment="Center">
                    <ItemsPresenter VerticalAlignment="Center" IsHitTestVisible="False" ScrollViewer.VerticalScrollMode="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled"/>
                </ScrollViewer>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**MAINPAGE.XAML（摘录）**

```
<ItemsControl Grid.Row="1" ItemsSource="{Binding Pages}" Style="{StaticResource ItemsControlStyle}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Border Padding="5" VerticalAlignment="Center"  Margin="10">
                    <Border.Background>
                        <ImageBrush ImageSource="../Images/Shadow.png"/>
                    </Border.Background>
                    <Grid>
                        <ProgressRing IsActive="True" VerticalAlignment="Center" HorizontalAlignment="Center" Height="50" Width="50" Foreground="White" Visibility="{Binding HasLoaded, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    <Image Opacity="0" Source="{Binding LocalUrl, Converter={StaticResource LocalImagePathConverter}}" Height="{Binding Height}" Width="{Binding Width}" ImageOpened="ImageLoaded" />
                    </Grid>
                </Border>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T06:47:20.260

好的，所以我测试了：

1.  在触摸显示器（本地机器）上 - 工作正常
2.  在触摸显示器（模拟器）上 - 工作正常
3.  在 Surface RT（远程机器）上 - 工作正常
4.  在普通显示器（模拟器）上 - 工作正常

你有没有试过在做的时候摸耳朵？:)

我不认为这是一个普遍的问题，因为我无法复制它。

# iphone - Xcode 更新其他类的标签文本

> ID：13141376
> 
> 赞同：0
> 
> 时间：2012-10-30T14:40:51.590
> 
> 标签：iphone, xcode, sync

几天前，这个问题是关于更改其他类的标签文本。我改变了一些事情：

我现在有一个函数 setLabelText：

```
- (void)setLabelText:(NSString*)text{
    //myLabel.text = text;
    [myLabel performSelectorOnMainThread : @ selector(setText : ) withObject:text waitUntilDone:YES];
    NSLog(@"class:%@, label:%@", self, myLabel);
} 
```

self 和 label 都已填充，但显示未显示正确的文本..

我从另一个类调用此函数，如果我从视图控制器上的按钮更改我的标签文本，它会正确更改。

**编辑：**

我现在改变了标签，每次当类完成它的功能时，标签都会编辑文本。虽然..这始终是最后一个设置值，但每次进入 for 循环时我都需要更改它，我怎样才能让它工作？似乎它在应用程序执行它的 for 循环时不会更新 viewController

# ios - 设备旋转期间不调用 cellForRowAtIndexPath

> ID：13141383
> 
> 赞同：3
> 
> 时间：2012-10-30T14:41:17.513
> 
> 标签：ios, uitableview, delegates

我有一个带有一些委托方法的 UITableView。第一次加载时一切正常，但是在旋转期间我看到方法**cellForRowAtIndexPath**不记得了。为什么？我的委托方法是：

```
-(NSInteger)tableView:(UITableView *)tableView
  numberOfRowsInSection:(NSInteger)section{
       //.....
   }

-(CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
     //......
 }
 - (UITableViewCell *)tableView:(UITableView *)aTableView
     cellForRowAtIndexPath:(NSIndexPath *)indexPath{

     //...This method is not called during the rotation of the device...

  }

  - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
      //.......
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:00:37.420

旋转发生后，您需要使用`[tableView reloadData]`within`shouldAutorotateToInterfaceOrientation`方法手动刷新表数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:50:53.520

只有当单元格即将在屏幕上可见并且表格请求它时，才会调用该方法。一旦它在视图中，它不会被再次调用，直到它滚动出视图然后返回。

您有 3 个选项来处理旋转：

*   使用自动布局
*   使用弹簧和支柱
*   覆盖 layoutSubviews（将在旋转时调用）

您选择的内容取决于您的单元格布局的复杂程度。另外，请确保表格在旋转时调整大小，否则单元格不会看到大小变化。

# excel - Excel中的表单视图以获取记录

> ID：13141384
> 
> 赞同：0
> 
> 时间：2012-10-30T14:41:28.410
> 
> 标签：excel, vba, combobox

我在 excel 中有一个表格，基本上就像一个数据库（是的，不幸的是它必须在 excel 中），我想设计一个简单的表格来显示记录（行中的不同列值）。通常 MS 擅长制作小部件来做到这一点，但我似乎无法弄清楚如何在 VBA 中编写它（很容易）

基本上我有一个名称和 ID# 的列表，然后是一些其他需要填写的列（地址、订单 # 等），但我希望用户通过表单而不是输入 excel 来执行此操作。我在 VBA 中创建了一个小表单，但现在我无法将列链接到表单中的文本框。

任何人都知道我可以即插即用的任何代码。

具体来说，我使用 ComboBox（用于名称列表），然后使用 for 循环搜索它以查找选择和更新数据。但它是一个真正的痛苦。

另外我不知道如何输入“下一步”按钮，这真的让我很烦。有谁知道如何将组合框值更改为下一行，如果它是通过 RowSource 链接的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:54:35.887

你考虑过这个`Form`功能吗？您可以在可以添加到快速访问工具栏的命令下找到。

查看此有用的[教程](http://spreadsheets.about.com/od/datamanagementinexcel/ss/090717_data_form.htm)以获取更多详细信息。

# winforms - Threading.Timer 使我的 Winform 应用程序崩溃？

> ID：13141386
> 
> 赞同：1
> 
> 时间：2012-10-30T14:41:30.690
> 
> 标签：winforms, c#-4.0, timer, thread-safety

我正在使用 Threading.Timer 每小时执行一个任务，但是当计时器滴答时，应用程序在处理要在滴答中执行的代码时总是崩溃。它崩溃了，没有异常或警告，即使我把整个薄放在一个 try/catch 中。很奇怪。以下是我的设置，任何帮助将不胜感激！尝试访问 TextBox 时似乎崩溃了`GrepCmdTextBox`，但我认为从另一个线程读取是可以的，只是不写入。

设置定时器：

```
var timeOfDay = DateTime.Now.TimeOfDay;
var nextHour = TimeSpan.FromHours(Math.Ceiling(timeOfDay.TotalHours));
var delta = (nextHour - timeOfDay).TotalMilliseconds;
System.Threading.Timer NextHourTimer = new System.Threading.Timer(new System.Threading.TimerCallback(NextHourTimer_Tick), null, (long)delta, (long)TimeSpan.FromHours(1).TotalMilliseconds); 
```

勾选事件：

```
private void NextHourTimer_Tick(object sender)
    {
        // If thread is not null and is busy, cancel and restart
        if (MonitoringThread != null)
        {
            if (MonitoringThread.TailThread.IsBusy)
            {
                MonitoringThread.TailThread.CancelAsync();
                System.Threading.Thread.Sleep(50);

                // Get grep command, if specified
                string optionalGrep = String.Empty;
                if (GrepCmdTextBox.Text.StartsWith("grep") || GrepCmdTextBox.Text.StartsWith("egrep"))
                    optionalGrep = " | " + GrepCmdTextBox.Text;

                MonitoringThread.TailThread.RunWorkerAsync(optionalGrep);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:45:23.500

取消异步进程可能需要一些时间，后台线程必须“完成”，从 DoWork() 返回并等待运行 RunWorkerCompleted 事件的机会（如果有）。

而不是取消，在这种情况下，最好取消`Dispose()`对象，创建一个新的 BGW，因为它们是“便宜的芯片”。

我希望这有帮助。

# java - Android：使用 notifyDataSetChanged 更新列表视图

> ID：13141387
> 
> 赞同：0
> 
> 时间：2012-10-30T14:41:31.233
> 
> 标签：java, android, listview

我有一个要从对话框中编辑的列表视图。我从谷歌搜索中读到我需要在列表视图上 notifyDataSetChanged() ，但是当我尝试这样做时出现错误：

```
The method notifyDataSetChanged(View) is undefined for the type ListView 
```

![在此处输入图像描述](../Images/8c6e86203b9e1bc2247142f952be6205.png)

我的列表视图最初设置在我的代码顶部，只有一个：

```
ListView listView; 
```

然后在 onload 的例程中设置

```
public void loadItems(){
    //Removed - just getting the data

     int rowCount;       
     rowCount = mCategory.size();

     listView = (ListView) findViewById(R.id.lvItems);

     int[] colors = {0, 0xFFFF0000, 0}; 
     listView.setDivider(new GradientDrawable(Orientation.RIGHT_LEFT, colors));
     listView.setDividerHeight(1);
     listView.setAdapter(new CustomAdapter());

     listView.setClickable(true);
     listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

       @Override
       public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

          loadPopup(mDescription.get(position).toString(), mCountList.get(position).toString(), mTemplatecode.get(position).toString());
       }
     });
     //Removed - Tidying up
} 
```

onlick 上加载的对话框有一个简单的界面，一个减号按钮，一个加号按钮，一个文本框和一个执行按钮。文本框中的数字发生了更改，从而进行了 db 调用。当对话框关闭时，我希望它刷新后面的列表视图以反映新的更改。即基本上再次重新运行loadItems() 例程。

当您单击对话框上的执行按钮时会发生这种情况。我显然将 notifyDataSetChanged 放在了错误的位置，因为它甚至不会运行。

```
 btnGo.setOnClickListener( new View.OnClickListener(){
        @Override
        public void onClick(View v) {
            addAsset(v, AssetDesc, txt.getText().toString(), templateCode);
            listView.notifyDataSetChanged();
            loadItems();
            dialog.dismiss();
        }
    }); 
```

自定义适配器：

```
class CustomAdapter extends BaseAdapter
    {

    @Override
    public int getCount() {

        return mDescription.size();
    }
@Override
public Object getItem(int arg0) {

    return null;
}

@Override
public long getItemId(int arg0) {

    return 0;
}

@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {

    LayoutInflater inf=getLayoutInflater();
    View v=inf.inflate(R.layout.noncriticalasset, arg2,false);

    TextView tv=(TextView)v.findViewById(R.id.txtOption);
    TextView tvCount=(TextView)v.findViewById(R.id.txtCount);

    tv.setText(mDescription.get(arg0).toString()); 
    tvCount.setText(mCountList.get(arg0).toString()); 

    return v;
} 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T14:44:59.567

您需要调用`notifyDataSetChanged`适配器，而不是 ListView 本身。

# php - 从 cron 作业传输 json 对象

> ID：13141397
> 
> 赞同：0
> 
> 时间：2012-10-30T14:41:51.253
> 
> 标签：php, javascript, json, cron

我有一个复杂的 php cron 作业，它从外部网页检索数据并将所有信息加入一个以 json 编码的变量中。整个过程非常缓慢，需要很多时间。

关键是我需要从我的索引页面中检索 json 对象，但我不想加载所有脚本，因为执行时间太长。我一直在做的是告诉 cron 作业创建一个新文件并写入 json 对象，我一直在从该文件中检索信息。

我想知道是否有更有效/更简单的方法来传输这些信息，而无需创建新文件或“手动”执行脚本。我听说你可以使用 CURL 发送信息，事实上我以前从未使用过这种技术，所以不知道它在这种情况下是否有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:44:38.803

这是一个很常见的问题。长时间运行的任务不应在页面加载时执行，因为它会影响用户体验。让您的时间密集型 php 脚本作为 cron 作业运行是一个很好的解决方案。也许使用数据库会更容易。您可以轻松地使用[sqlite](http://php.net/manual/en/book.sqlite.php)或“成熟”的 rdbms 来存储您的数据（如 mysql 或 postregs）。它可能是这样的：

时间密集型 php 脚本每 x 分钟在 cronjob 上运行一次。将数据保存到您的数据库而不是文件。

当用户请求索引页面时，它会将 ajax 请求发送到另一个 php 脚本。php 脚本在您的数据库中查找数据并将其返回给您的用户（如果存在）。

# excel - Excel VBA 等效于矢量

> ID：13141398
> 
> 赞同：5
> 
> 时间：2012-10-30T14:41:53.823
> 
> 标签：excel, vba

Excel VBA 是否具有与向量等效的数据结构？

我仍在学习 Excel VBA，不喜欢`ReDim Preserve`语义。但如果这是唯一的方法，那就这样吧。

那么 Excel VBA 2003 是否提供了动态列表类型的数据结构呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:02:00.730

一个简单的顺序`list`数据类型是`Collection`. 此外，关联数组可通过`CreateObject("Scripting.Dictionary")`.

```
Dim c As Collection
Set c = New Collection
c.Add 4 
```

# .htaccess - .htaccess RewriteRule 给出 500 服务器错误

> ID：13141404
> 
> 赞同：0
> 
> 时间：2012-10-30T14:42:23.280
> 
> 标签：.htaccess, mod-rewrite

我有一个重写规则如下：

```
RewriteRule ^equipment /equipment.php [L] 
```

它将引发 500 服务器错误...但如果我将其替换为`equipment.php`，例如，我们的联系页面`contactUs.php`，它将毫无问题地重定向到联系页面。

我还有其他可以正常工作的重写规则 - 但我不知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:50:53.107

通过添加**$来限制您的规则**

```
RewriteRule ^equipment$ /equipment.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:06:13.397

我找到了答案。

我需要做`RewriteRule ^equipment/$ /equipment.php [L]`

谢谢大家。

# iphone - 后台的 Restkit 对象映射

> ID：13141405
> 
> 赞同：1
> 
> 时间：2012-10-30T14:42:28.860
> 
> 标签：iphone, objective-c, ios, mapping, restkit

我是 IOS 开发和 Restkit 的新手。我正在创建一个应用程序，其中数据以 json 格式从外部 web 服务加载，并且有数千个用户对象，它们在 coredata 中映射。

我正在加载这些用户，如下所示：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
DBUser* user = [DBUser currentUser];
    if ([user isLoggedIn]) {
        [self loadRequiredData];
    }
} 
```

然后在 loadRequiredData

```
- (void)loadRequiredData {
    RKObjectManager *manager = [RKObjectManager sharedManager];
    manager.requestQueue.concurrentRequestsLimit = 10;
    [manager loadObjectsAtResourcePath:@"/users" delegate:self];
} 
```

在 CoreData 中映射所有用户对象大约需要 4-5 分钟。现在的问题是，当 Restkit 忙于在 CoreData 中映射这数千个用户时，发送到 web 服务的任何其他请求都会等待。当所有用户都映射到 CoreData 中时，就会执行等待请求。

我什至尝试将 ConcurrentRequestLimit 的数量增加到 10

```
manager.requestQueue.concurrentRequestsLimit = 10; 
```

但这也行不通

那么有没有办法在后台或其他线程中映射对象？这样在此期间发送的任何其他请求都应该快速执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T06:02:25.377

这很明显，如果您在移动应用程序数据库中插入数千个条目，则必须花费很多时间。您可以使用此方法在映射开始时显示活动指示器。

```
- (void)objectLoader:(RKObjectLoader *)loader willMapData:(inout id *)mappableData; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T06:25:55.883

只需像这样调用方法 loadRequiredData [self performSelectorInBackground:@selector(loadRequiredData) withObject:nil];

# php - 如何在 PHP 中使用 str_replace() 替换“\”？

> ID：13141406
> 
> 赞同：13
> 
> 时间：2012-10-30T14:42:29.177
> 
> 标签：php

我想从我的网站上的字符串中删除所有反斜杠。我不想使用 strip_slashes()，因为我想保留正斜杠。

这是我正在尝试的代码：

```
echo str_replace("\", "", "it\'s Tuesday!"); 
```

我想在任何给定的字符串中找到反斜杠并将其删除。但是，此代码无法正常工作。

错误：

```
syntax error, unexpected T_CONSTANT_ENCAPSED_STRING 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-30T14:43:38.770

反斜杠实际上是在转义字符串中的右引号。

尝试`echo str_replace("\\","","it\'s Tuesday!");`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T14:45:14.347

不知道你为什么要使用`str_replace`删除`\`使用

```
echo stripslashes("it\'s Tuesday!"); 
```

但如果它只是一个例子，那么

```
echo  str_replace("\\","","it\'s Tuesday!"); 
```

请注意，`stripslashes`只删除反斜杠而不是转发

```
echo stripslashes("it\'s \\ \\  // Tuesday!"); 
```

输出

```
it's // Tuesday! 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-14T06:15:46.483

尝试得到结果：

```
$str = "it\'s Tuesday!";

$remove_slash = stripslashes($str);

print_r($remove_slash); 
```

输出：今天是星期二！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T14:48:34.620

从[`stripslashes()`](http://php.net/manual/en/function.stripslashes.php)文档中：

> 返回一个去掉**反斜杠的字符串。**（\' 变成 ' 等等。）双反斜杠 (\\) 被制成单个反斜杠 (\)。

所以你不应该担心fwd。斜线。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T10:17:07.920

和：

```
echo str_replace("\'", "'", "it\'s Tuesday!");
// It's Tuesday! 
```

# php - PHP 从抽象方法中调用抽象方法

> ID：13141408
> 
> 赞同：0
> 
> 时间：2012-10-30T14:42:31.180
> 
> 标签：php

如果您有以下情况：

```
abstract class User {

    function checkThis() {          

        return true;    
    }

    function mainFunction() {

    }
} 
```

你想`checkThis()`从内部打电话`mainFunction()`，你会这样做吗？

```
abstract class User {

    function checkThis() {

        return true;    
    }

    function mainFunction() {

        if ($this->checkThis())
            echo "Works";
    } 
```

如果我从另一个类中调用它，我似乎遇到了问题，比如：

```
class SecondClass {

    function test() {
        User::mainFunction();
    }    
} 
```

提供此错误：

```
Fatal error: Call to undefined method SecondClass::checkThis() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:58:37.220

您也许应该考虑拥有一个可以实例化的类，它扩展了这个抽象类。例如

```
class userConcrete extends User {

} 
```

然后在第二堂课中，您可以像这样注入用户对象：

```
class SecondClass{

    protected $user;

    public function __construct(userConcrete $user)
    {
        $this->user = $user;
    }
    function test(){
        $this->user->mainFunction();
    }

} 
```

还将 mainFunction 在您的抽象类中公开。

# php - 教义..将查询中创建的值映射到实体类的正确方法

> ID：13141410
> 
> 赞同：1
> 
> 时间：2012-10-30T14:42:34.543
> 
> 标签：php, symfony, doctrine

假设我有一个数据库表**uploads**，它具有**id、user_id、upload、createdDate**和一个反映用户表的实体类。

然后我有一个类似的查询。

```
SELECT u.id, 
  u.name, 
  u.createdDate,
  u.user_id,
  (SELECT COUNT(*) 
   FROM uploads
   WHERE user_id in 
       (SELECT id from uploads
        WHERE user_id = :id) 
    AND createdDate BETWEEN date_sub(NOW(),interval 1 day) 
    AND date_sub(NOW(),interval 0 day)) as countLastDayUploads
FROM uploads as u
WHERE u.user_id = :id 
```

这将返回一个额外的值**countLastDayUploads**，它不会反映在 schema 中。 ***这里有两个问题。*** countLastDayUploads 是否应该存储在没有注释的上传实体类中？我想是的...

其次，我将如何使用 Symfony2 学说查询构建器编写此查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:15:26.610

```
SELECT u.id, 
  u.name, 
  u.createdDate,
  u.user_id,
  count(*) as count
FROM uploads as u
WHERE 
    u.user_id = :id
  AND 
    createdDate > (NOW() - INTERVAL 1 DAY)
GROUP BY u.user_id 
```

如果我理解你的正确 - 此代码必须工作五

和

`id`, `user_id`, `upload`, `createdDate`- 错误的名字

`id`, `userId`, `upload`, `createdDate`- 更好，但错误

`id`, `user_id`, `upload`, `created_date`- 好

这是mysql的标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T22:31:14.957

您应该将其添加到省略注释的实体中。教义应该将结果映射到对象。

# oracle - 将应用程序部署到 Web Logic 生产服务器

> ID：13141413
> 
> 赞同：2
> 
> 时间：2012-10-30T14:42:49.963
> 
> 标签：oracle, webserver, weblogic, weblogic-10.x, weblogic11g

我来这里是为了获得一些关于将应用程序部署到 WebLogic 生产服务器的专家建议。使用 Admin Server Console 在生产中部署和重新部署应用程序是否是最佳实践。实际上，我正在部署到具有两个托管服务器实例的集群。

我在生产中重新部署应用程序时遇到了这个问题。当我删除现有的 .ear 文件并添加更新的 .ear 文件时，会将更新的 .ear 文件置于准备状态。我无法使用管理服务器控制台使其处于活动状态。如果我尝试它将通过一些例外。但是一段时间后它会自动进入活动状态，但我不知道里面发生了什么。有时我会重新启动服务器以使其处于活动状态。谁能解释我在 weblogic 中部署应用程序和重新部署应用程序时的程序是什么

在此先感谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:50:07.840

通常使用 WLST（WebLogic 脚本工具）来部署应用程序。管理控制台也可用于部署/升级应用程序，但如果有许多环境需要升级，那么 WLST（其工作方式类似于命令行工具）是更好的选择。

概述[WLST](http://docs.oracle.com/cd/E24329_01/web.1211/e24491/using_wlst.htm)以了解如何使用它来[部署/取消部署/升级](https://stackoverflow.com/questions/12396043/weblogic-caching-problems/12401199#12401199) 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:59:12.637

查看“了解 WebLogic Server 部署”和“在生产环境中重新部署应用程序”。有不同的因素会影响您可能遇到的应用程序的重新部署。

[http://docs.oracle.com/cd/E23943_01/web.1111/e13702/understanding.htm#i1057116](http://docs.oracle.com/cd/E23943_01/web.1111/e13702/understanding.htm#i1057116)

[http://docs.oracle.com/cd/E23943_01/web.1111/e13702/redeploy.htm#g1039635](http://docs.oracle.com/cd/E23943_01/web.1111/e13702/redeploy.htm#g1039635)

此外，在最近的 WebLogic 版本中还有一个适用于 Maven 的 WebLogic 插件，您可以将其与 Maven 一起用于部署。

# ios - Facebook 聊天 API 和表情

> ID：13141417
> 
> 赞同：4
> 
> 时间：2012-10-30T14:42:58.823
> 
> 标签：ios, facebook-graph-api, facebook-chat

我们已经实现了一个使用 facebook 聊天的 iphone 应用程序，部分通过 xmpp，部分通过 facebook graph api。

一切都很好，直到涉及表情符号。当我们在 iPhone 上输入表情符号时，我们会在显示屏上看到正确的表情符号。

但是，当我们通过 xmpp 发送到 facebook 时，我们从 facebook 获得的消息是其他一些转义序列。

下面是一个示例：我们通过 xmpp 发送以下 xml：

```
<message type="chat" to="-someFacebookID@chat.facebook.com"><body></body></message> 
```

当我们回忆起来自 facebook 的消息时，我们得到以下信息：

```
{
"author_id" = someID;
body = "\Uf637";
"created_time" = 1351607849;
"message_id" = "someID_41";
"thread_id" = someID;
} 
```

这是我们的消息的 FQL 语句：

```
@"SELECT message_id, author_id, thread_id, created_time, body FROM message WHERE thread_id = %@" 
```

但是，为什么 facebook 会转换在网站上的 facebook-chat 中正确显示的表情符号？关于这个问题的任何想法？

问候，丹尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:29:58.620

返回的文本（例如示例中的“\Uf637”）是表情符号的 Unicode 表示。Facebook 的数据库不存储完整形式的表情符号，它们被转换为 unicode，并在 Facebook 的应用程序上显示时转换回它们的表情符号形式。使用 Chat API 时，您可能必须在自己的应用程序中执行相同的操作（对于找到的所有 unicode 表情符号字符串，将其转换为实际表情符号）。以下是 unicode 代码及其匹配表情符号的完整列表：[http ://www.unicode.org/charts/PDF/U1F600.pdf](http://www.unicode.org/charts/PDF/U1F600.pdf)

# php - PHP 如何正确四舍五入？

> ID：13141418
> 
> 赞同：1
> 
> 时间：2012-10-30T14:43:02.853
> 
> 标签：php, math, sum, rounding

我有一个循环，每次循环 24 个项目。所以它每页循环 24 个项目。在有 52 个项目的页面中，当我将 24 除以 52 时，它不会显示数字 3。

例子

```
$TotalProductsString=52;
$theLimitOfItems=12;
$TotalPageSum=$TotalProductsString/$theLimitOfItems;
echo round($TotalPageSum, 2); // display 2.17
echo round($TotalPageSum, 2); // display 2.2
echo round($TotalPageSum, 0.60); // display 2
echo round($TotalPageSum, 0.50); // display 2 
```

它应该显示 3，因为余数 52/24 = 2.16 余数 4 (24+24=48 + 4 = 52)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:47:51.140

试试 Ceil()

```
echo ceil(4.3);    // 5
echo ceil(9.999);  // 10
echo ceil(-3.14);  // -3 
```

来自[php.net](http://uk3.php.net/manual/en/function.ceil.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:48:08.147

```
echo ceil($TotalPageSum); // Rounds the fraction up 
```

[在此处](http://nl3.php.net/ceil)阅读PHP 手册中的[ceil()](http://nl3.php.net/ceil)函数。

# python - Python：计算 3D 网格的梯度

> ID：13141420
> 
> 赞同：6
> 
> 时间：2012-10-30T14:43:04.447
> 
> 标签：python, numpy, grid, gradient

我有一个粒子立方体，我已将其投影到二维网格上，通过单元格中的云将粒子投影到网格上，并通过标量对它们进行加权。

然后我想要每个网格点的标量梯度。在 2D 中，我正在这样做`np.gradient`，我得到了两个在 x 和 y 方向上具有梯度的数组：

```
gradx, grady = np.gradient(grid) 
```

有谁知道我如何将其概括为 3 维？3D 单元格中的云很好，但我留下了一个形状为 (700, 700, 700) 的网格。

据我所知，`np.gradient`不能处理这个？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:49:36.887

Numpy 文档表明`gradient`适用于任何维度：

> `numpy.gradient(f, *varargs)`
> 
> *返回 N 维数组的梯度。*
> 
> 梯度是使用内部的中心差和边界处的一阶差来计算的。因此，返回的梯度具有与输入数组相同的形状。
> 
> **参数 ：**
> 
> `f: array_like.`包含标量函数样本的 N 维数组。
> 
> `*varargs:`0、1 或 N 个标量，指定每个方向上的样本距离，即：dx、dy、dz、... 默认距离为 1。
> 
> **返回：**
> 
> `g: ndarray.` N 个与 f 形状相同的数组，给出 f 对每个维度的导数。

似乎您应该能够像您期望的那样将您的二维码扩展到 3D。

# virtual - 网络应用程序中的 Skype 集成

> ID：13141421
> 
> 赞同：1
> 
> 时间：2012-10-30T14:43:04.960
> 
> 标签：virtual, skype

嗨，我想将 Skype 集成到我的 Web 应用程序中，我们的员工可以使用 Skype 呼叫客户（点击通话）。这个网络应用程序是一个内部应用程序，基本上我希望工作人员单击电话号码并使用浏览器中的耳机开始呼叫。无论是 Skype 还是任何其他软电话系统都没有关系。任何意见将是有益的。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:50:24.593

您可以简单地创建这样的链接来发起 Skype 通话。

```
<a href="callto://+132465798">Call customer</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:52:41.083

Skype 为开发人员提供了良好的 API 和文档，请在此处观看：[https ://developer.skype.com/skype-uri](https://developer.skype.com/skype-uri)

# mysql - ISO 8601 日期使用什么数据类型？

> ID：13141433
> 
> 赞同：12
> 
> 时间：2012-10-30T14:43:30.207
> 
> 标签：mysql, postgresql, iso8601

我正在重新设计一个数据库，该数据库当前`2012-10-27T07:30:38+00:00`以 varchar 字段的格式导入 ISO 8601 日期。当前数据库托管在 MySQL 5.5 服务器上。

在搜索文档和各种 SO 帖子时，我还没有找到关于我应该在 MySQL 中为此使用什么数据类型的明确答案。最接近的帖子是： [MySQL 插入 DATETIME：使用 ISO::8601 格式是否安全？](https://stackoverflow.com/questions/11053941/mysql-insert-to-datetime-is-it-safe-to-use-iso8601-format)它提供了一种解决方法，但这不是一个理想的选择。

MySQL 文档 ( [http://dev.mysql.com/doc/refman/5.5/en/date-and-time-types.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-types.html) ) 没有说明，我在官方文档中可以找到的唯一参考资料位于 page ：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

其中指出“第一个和第二个参数的可能值导致几个可能的格式字符串（对于使用的说明符，请参阅 DATE_FORMAT() 函数描述中的表）。ISO 格式是指 ISO 9075，而不是 ISO 8601。”

现在 PostgreSQL 文档特别提到了 ISO8601（[http://www.postgresql.org/docs/9.2/static/datetime-keywords.html](http://www.postgresql.org/docs/9.2/static/datetime-keywords.html)和[http://www.postgresql.org/docs/9.2/static/datatype-datetime。 html](http://www.postgresql.org/docs/9.2/static/datatype-datetime.html)）这导致我的问题：

**MySQL 是否正确支持 ISO 8601，或者我应该考虑使用原生支持的数据库？**

- 编辑 -

尝试将上面的示例时间戳插入到 datetime 列中会出现以下错误：

```
10:55:55    insert into test(date1) values('2012-10-27T07:30:38+00:00') Error Code: 1292\. Incorrect datetime value: '2012-10-27T07:30:38+00:00' for column 'date1' at row 1 0.047 sec 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T15:03:06.233

不要将日期或时间戳值存储在 varchar 列中。您无法确保存储正确的值（没有人阻止您存储`2012-02-31 28:99:70`在那里。

如果您不需要时间部分，请使用`date`数据类型（在 MySQL 和 PostgreSQL 中可用）如果您确实需要时间使用`timestamp`（或`datetime`在 MySQL 中）数据类型。

值的格式化应该在您的前端完成，或者如果您在检索值时绝对必须在 SQL 中使用例如 to_char()（或 MySQL 中的等价物）来完成。

再说一遍：永远不要在 varchar 中存储日期或时间戳（就像你永远不应该在 varchar 列中存储实数一样）。

这是日期/时间数据类型的 MySQL 概述：http: [//dev.mysql.com/doc/refman/5.5/en/date-and-time-types.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-types.html)

这是 date7time 数据类型的 PostgreSQL 概述：[http ://www.postgresql.org/docs/current/static/datatype-datetime.html](http://www.postgresql.org/docs/current/static/datatype-datetime.html)

**编辑**

如果您担心文字格式。两个 DBMS 都支持标准的 ANSI 日期和时间戳文字：

```
insert into some_table 
   (ts_column, date_column)
values
   (timestamp '2012-10-27T07:30:38+00:00', DATE '2012-12-30'); 
```

PostgreSQL 的 SQLFiddle：[http ://sqlfiddle.com/#!12/cdd39/1](http://sqlfiddle.com/#!12/cdd39/1)

注意字符字面量前面的关键字`timestamp`和。`date`

**编辑 2**

似乎 MySQL 无法*插入*这样的值，尽管它*可以*在 SELECT 语句中使用该文字：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:08:17.950

Postgresql 可以处理这种格式：

没有

```
select timestamp '2012-10-27T07:30:38+00:00';
      timestamp      
---------------------
 2012-10-27 07:30:38 
```

或时区：

```
select timestamptz '2012-10-27T07:30:38+00:00';
      timestamptz       
------------------------
 2012-10-27 05:30:38-02 
```

而 MySQL 似乎不太关心时区部分：

```
create table t (ts timestamp);

insert into t (ts) values
('2012-10-27T07:30:38+03:00'),
('2012-10-27T07:30:38-02:00');

select * from t;
+---------------------+
| ts                  |
+---------------------+
| 2012-10-27 07:30:38 |
| 2012-10-27 07:30:38 |
+---------------------+ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:52:11.577

[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)日期格式“YYYY-MM-DD”是 MySQL 在显示日期值时在内部发出的格式，它可以同样导入它们。

这些比“MM/DD/YY”这样的“美式”日期更可取，因为其中有太多的歧义而无法自动解决。

ISO 9075 似乎指的是整个 SQL 标准，而不是特定的日期格式，尽管该标准本身确实具有日期和时间的标准格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-22T11:13:42.990

使用日期时间或时间戳进行存储的另一个优点。在 phpMyAdmin 或 phpPgAdmin 中，该值显示为字符串，例如 2015-01-22 11:13:42。因此，查找日期要容易得多，就好像它存储为 varchar 或 int 一样。

而且我认为服务器的时区很重要。我看到 MySql 中的时间戳不显示微秒。我知道 MySQL 使用 UTC-Time 作为时间戳和日期时间字段。因此，将值提供为 UTC 时间戳。

# c# - HttpClient 请求抛出 IOException

> ID：13141434
> 
> 赞同：70
> 
> 时间：2012-10-30T14:43:32.387
> 
> 标签：c#, .net, httpclient, ioexception

以下代码引发 IOException 并显示以下消息：“指定的注册表项不存在。”

```
HttpClient client = new HttpClient();

Uri uri = new Uri("http://www.google.com");

client.GetAsync(uri); 
```

这只是在 Main 的控制台应用程序中。看起来错误是由 mscorlib.dll!Microsoft.Win32.RegistryKey.Win32Error(int errorCode, string str) 引发的。我不知道为什么会抛出此错误或如何开始调试它。

编辑堆栈跟踪：

在 Microsoft.Win32.RegistryKey.Win32Error（Int32 错误代码，字符串 str）

它只是 1 行，没有内部异常等。

调用栈是：

```
mscorlib.dll!Microsoft.Win32.RegistryKey.Win32Error(int errorCode, string str) + 0x189 bytes    
mscorlib.dll!Microsoft.Win32.RegistryKey.GetValueKind(string name) + 0x7f bytes 
System.dll!System.Net.HybridWebProxyFinder.InitializeFallbackSettings() + 0x9e bytes    
[Native to Managed Transition]  
[Managed to Native Transition]  
System.dll!System.Net.AutoWebProxyScriptEngine.AutoWebProxyScriptEngine(System.Net.WebProxy proxy, bool useRegistry) + 0xd0 bytes   
System.dll!System.Net.WebProxy.UnsafeUpdateFromRegistry() + 0x2c bytes  
System.dll!System.Net.Configuration.DefaultProxySectionInternal.DefaultProxySectionInternal(System.Net.Configuration.DefaultProxySection section) + 0x1d8 bytes 
System.dll!System.Net.Configuration.DefaultProxySectionInternal.GetSection() + 0xec bytes   
System.dll!System.Net.WebRequest.InternalDefaultWebProxy.get() + 0xcc bytes 
System.dll!System.Net.HttpWebRequest.HttpWebRequest(System.Uri uri, System.Net.ServicePoint servicePoint) + 0xdf bytes  
System.dll!System.Net.HttpWebRequest.HttpWebRequest(System.Uri uri, bool returnResponseOnFailureStatusCode, string connectionGroupName, System.Action<System.IO.Stream> resendRequestContent) + 0x2b bytes  
System.Net.Http.dll!System.Net.Http.HttpClientHandler.CreateAndPrepareWebRequest(System.Net.Http.HttpRequestMessage request) + 0x59 bytes   
System.Net.Http.dll!System.Net.Http.HttpClientHandler.SendAsync(System.Net.Http.HttpRequestMessage request, System.Threading.CancellationToken cancellationToken) + 0xf4 bytes  
System.Net.Http.dll!System.Net.Http.HttpMessageInvoker.SendAsync(System.Net.Http.HttpRequestMessage request, System.Threading.CancellationToken cancellationToken) + 0x4f bytes 
System.Net.Http.dll!System.Net.Http.HttpClient.SendAsync(System.Net.Http.HttpRequestMessage request, System.Net.Http.HttpCompletionOption completionOption, System.Threading.CancellationToken cancellationToken) + 0x13e bytes 
System.Net.Http.dll!System.Net.Http.HttpClient.GetAsync(System.Uri requestUri, System.Net.Http.HttpCompletionOption completionOption) + 0xc bytes   

ConsoleServiceTest.exe!ConsoleServiceTest.Program.Main(string[] args) Line 20 + 0x17 bytes  C#
    [Native to Managed Transition]  
    [Managed to Native Transition]  
    Microsoft.VisualStudio.HostingProcess.Utilities.dll!Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly() + 0x5a bytes  
    mscorlib.dll!System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx) + 0x285 bytes 
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state, bool preserveSyncCtx) + 0x9 bytes   
    mscorlib.dll!System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext executionContext, System.Threading.ContextCallback callback, object state) + 0x57 bytes    
    mscorlib.dll!System.Threading.ThreadHelper.ThreadStart() + 0x51 bytes   
    [Native to Managed Transition] 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-11-20T10:07:44.667

这似乎是由 .NET Framework 的最新安全更新引起的：[MS12-074：.NET Framework 中的漏洞可能允许远程执行代码：2012 年 11 月 13 日 (KB 2745030)](http://support.microsoft.com/kb/2745030)

这一切都归结为 Web 代理解析中的以下代码：

```
[RegistryPermission(SecurityAction.Assert, Read=@"HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework")]
private static void InitializeFallbackSettings()
{
    allowFallback = false;
    try
    {
        using (RegistryKey key = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Microsoft\.NETFramework"))
        {
            try
            {
                if (key.GetValueKind("LegacyWPADSupport") == RegistryValueKind.DWord)
                {
                    allowFallback = ((int) key.GetValue("LegacyWPADSupport")) == 1;
                }
            }
            catch (UnauthorizedAccessException)
            {
            }
            catch (IOException)
            {
            }
        }
    }
    catch (SecurityException)
    {
    }
    catch (ObjectDisposedException)
    {
    }
} 
```

如您所见，它会检查知识库文章中提到的特定注册表项。您还应该注意异常是在内部捕获的，但是您会看到它，因为您在 Visual Studio 的调试选项中启用了 First Chance Exceptions。

如果你不想看到这个异常，你应该添加指定的注册表键值`0`：

```
Registry location: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework  
DWORD (32-bit) Value name: LegacyWPADSupport
Value data: 0 
```

对于 64 位机器上的 32 位进程：

```
Registry location: HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\.NETFramework
DWORD (32-bit) Value name: LegacyWPADSupport
Value data: 0 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-06T14:24:55.617

我同意 Ligaz 的回答，并且我已经记录了有关此错误的 Connect 问题：[https ://connect.microsoft.com/VisualStudio/feedback/details/773666/webrequest-create-eats-an-ioexception-on-the-第一次通话#详情](https://connect.microsoft.com/VisualStudio/feedback/details/773666/webrequest-create-eats-an-ioexception-on-the-first-call#details)

将以下内容保存到 .reg 文件中并将其导入注册表以防止出现此错误：

```
Windows Registry Editor Version 5.00

; The following value prevents an IOException from being thrown and caught
; by System.Net.HybridWebProxyFinder.InitializeFallbackSettings() (in System.dll)
; when WebRequest.Create is first called.  By default the "LegacyWPADSupport"
; value doesn't exist, and when InitializeFallbackSettings calls GetValueKind,
; an IOException is thrown.  This adds the value with its default of false to
; prevent the exception.
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework]
"LegacyWPADSupport"=dword:00000000

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\.NETFramework]
"LegacyWPADSupport"=dword:00000000 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-30T15:32:47.410

无论出于何种原因，您的`HttpClient`代码都在注册表中寻找代理设置并且无法打开密钥。查看代码显示它尝试打开 HKCU，然后按顺序转到以下键之一：

1.  `"HKCU\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Internet Settings\\Connections"`
2.  `"HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Internet Settings\\Connections"`
3.  `"HKLM\\SOFTWARE\\Policies\\Microsoft\\Windows\\CurrentVersion\\Internet Settings"`

这三个之一可能是您的流程无法访问的关键，为什么我不确定。一种可能的解决方法是禁用自动检测代理设置。

否则，您需要弄清楚它正在加载的确切密钥，我们将分两步完成。

1.  [启用 System.Net 日志记录](http://ferozedaud.blogspot.com/2009/08/tracing-with-systemnet.html)。
2.  下载并运行 Procmon，过滤应用程序的注册表访问，如下所示：

> 1.  打开后，如果启用，则禁用捕获（放大镜应该有一个红色的 X）。![在此处输入图像描述](../Images/3c9df28d0b89a5940a0e42f05567db99.png)
> 2.  开始过滤您的进程名称。![在此处输入图像描述](../Images/4c01d4c40f719764cdf64bb03d7ab93a.png)
> 3.  取消选择除注册表项以外的所有选项
> 
> ![在此处输入图像描述](../Images/f195df93080779cda339fee687059cc3.png)
> 
> 4.  启用捕获（单击放大镜）
> 5.  运行您的应用程序
> 6.  在日志中找到有问题的条目，双击查看它打开的是哪个键

一旦确定了有问题的密钥，您就可以努力找出您的应用程序无权访问它的原因。也许，如果您的应用程序的名称有任何迹象，那么您的服务正在运行的用户帐户无法访问注册表项。

# bids - 为什么我所有的“单位总和”行在 PowerPivot 中都具有相同的值？

> ID：13141435
> 
> 赞同：0
> 
> 时间：2012-10-30T14:43:36.573
> 
> 标签：bids, powerpivot, measure

我对 PowerPivot 还很陌生，但遇到了问题。

我创建了一个 SSIS 项目 (.dtsx) 来导入大约 1000 万行数据，并创建了一个 Analysis Services 表格项目 (.bim) 来处理数据模型。

直到今天，一切都按预期工作，但是在进行架构更改以向表中添加更多列并更新模型之后，我现在遇到了问题。在 Business Intelligence Development Studio (BIDS) 中打开现有连接以更新架构更改时，我被告知我必须删除并重新加载相关的 Sales 和 Returns 表。

现在，当我尝试过滤特定属性时，销售“单位总和”列始终显示每行的单位总和，而不是正确的值。我记得在构建系统时曾经遇到过这个问题，但是在重新处理 BIDS 中的表格后它就消失了……但是，这一次，处理量没有任何区别。

我真的希望这是一个常见问题，并且有人对我有一个很好的简单解决方案，但我会在这个阶段采取任何我能得到的。我也很想了解是什么原因造成的。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:01:45.607

对于任何有类似问题的人，我找到了答案。

基本上，我进行了架构更改，BIDS 告诉我，在使用新的数据库架构更新模型之前，我必须删除我的 SalesFact 和 ReturnsFact 表。问题是我没有意识到这些表上已经建立了关系，因此在重新添加它们之后，模型缺少与其他表的关系......这就是为什么所有行都显示相同的值。

解决方法是将模型放入设计视图，并通过在表格之间单击和拖动来创建表格之间的关系。

我知道这很简单。

# jquery - 当指定@size 时，MVC DropdownListFor html helper 会干扰 JQuery 提交

> ID：13141437
> 
> 赞同：0
> 
> 时间：2012-10-30T14:43:42.357
> 
> 标签：jquery, asp.net-mvc, html-helper, html.dropdownlistfor

我对 MVC 的 html 帮助程序有这个奇怪的问题，因为当我为 @Html.DropdownListFor 指定 @size 时，它​​会阻止 jquery .submit 与服务器通信。关于可能导致这种情况的任何想法？有没有其他方法可以让下拉菜单变高？这是代码：

```
 @using (Ajax.BeginForm("CreateInProgress", "Audit", new AjaxOptions {     
HttpMethod = "POST", OnSuccess = "CreateInProgressSuccess" }, new { id = "CreateInProgressMainForm"}))
           {
              <div id="reqTabContentBox" class="formPageContainer">
                  @Html.HiddenFor(x => x.ConfigDoc.CreateApproveButton.ConfigurableLabelDesc)
                  @Html.HiddenFor(x => x.ConfigDoc.CreateDisapproveButton.ConfigurableLabelDesc)
                  @Html.HiddenFor(x => x.ConfigDoc.CreateSaveButton.ConfigurableLabelDesc)
                  @Html.HiddenFor(x => x.ConfigDoc.CreateAdvanceButton.ConfigurableLabelDesc)

                  @Html.Partial("_CreateAudit")
               </div>
                       @Html.DropDownListFor(x => x.AuditDoc.AuditTemplateId, new SelectList(Model.AuditDoc.AuditTemplates, "Id", "Name"), new { size = "6", @class = "left" })
              <div id="finalButtons" class="formPageContainer">
                 <input id="AdvanceDirection" name="AuditDoc.AdvanceDirection" type="hidden" value="Forward" />

                  <span class="field-validation-error" id="CreateFormValidation"></span>  
                  <span class="field-validation-success" id="CreateSaveSuccess"></span> 
                  @if(Model.AuditDoc.CurrentStates.StateName == "Active")
                  {
                    <div class="btnContainer">
                       <input type="button" id="SaveCreateInProgress" class="toggleAllSelectors" value="@Model.ConfigDoc.CreateSaveButton.ConfigurableLabelDesc" />
                       <input type="button" id="AdvanceCreateInProgress" class="toggleAllSelectors" value="@Model.ConfigDoc.CreateAdvanceButton.ConfigurableLabelDesc" /> 
                    </div>
                  }
                  else
                  {
                    <label>@Model.ConfigDoc.AllEnterPrivateCommentLabel.ConfigurableLabelDesc</label> @Html.TextAreaFor(x => x.AuditDoc.PrivateComment, 0, 0, false)

                    <div class="btnContainer">
                       <input type="button" id="DisapproveCreateInProgress" class="toggleAllSelectors" value="@Model.ConfigDoc.CreateDisapproveButton.ConfigurableLabelDesc" @Model.OwnerApprovalAttribute />
                       <input type="button" id="ApproveCreateInProgress" class="toggleAllSelectors" value="@Model.ConfigDoc.CreateApproveButton.ConfigurableLabelDesc" @Model.OwnerApprovalAttribute />
                    </div>
                  }
               </div>
           } 
```

这是jquery提交：

```
$("#CreateAuditMainForm").submit(); 
```

这是 Html dropdownlistfor helper 生成的代码：

```
<select class="left valid" data-val="true" data-val-number="The field AuditTemplateId must be a number." data-val-required="The AuditTemplateId field is required." id="AuditDoc_AuditTemplateId" name="AuditDoc.AuditTemplateId" size="6" style="display: block; "> ... </select> 
```

我将不胜感激任何帮助或智慧之言！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:45:00.557

I don't know if this could be the reason of the problem, but by the HTML provided on the "select" field, it is not being closed. Maybe this is screwing the DOM structure, causing errors to submit the form on jquery. Try to edit the html and close the select field and retry the submit to see what happens.

```
<select class="left valid" data-val="true" data-val-number="The field AuditTemplateId must be a number." data-val-required="The AuditTemplateId field is required." id="AuditDoc_AuditTemplateId" name="AuditDoc.AuditTemplateId" size="6" style="display: block; " /> 
```

Let's see if we can have a lucky guess. :P

Regards.

# c# - 我需要删除所有 . 与模式不匹配

> ID：13141449
> 
> 赞同：1
> 
> 时间：2012-10-30T14:44:14.853
> 
> 标签：c#, regex

我需要从文本中删除所有点，除非它们与模式 [0-9]+.[0-9]+ 匹配，例如，如果以下文本是我的输入：

```
abc. def. 123.45 ... 12\. 
```

输出应如下所示：

```
abc def 123.45 12 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:47:10.967

如果您使用的语言支持[环视](http://www.regular-expressions.info/lookaround.html)，您可以使用这个正则表达式：

```
(?<![0-9])\.|\.(?![0-9]) 
```

这匹配前面没有数字或后面没有数字的点。

C# 示例：

```
string result = Regex.Replace(input, @"(?<![0-9])\.|\.(?![0-9])", ""); 
```

在线查看它：[ideone](http://ideone.com/uMJFWu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:49:00.977

如果您的正则表达式风格支持负面外观（.NET 非常出色），您可以使用它：

```
(?<!\d)\.|\.(?!\d) 
```

这将仅匹配在它们之前或之后具有非数字字符的点。只需将结果替换为空字符串即可。

如果没有，那么你可以这样做：

```
(?|(^|\D)\.|\.($|\D)) 
```

并替换为`$1`. 这也是一样的，但在匹配中包含了那个额外的字符。替换将匹配的字符放回原处。

# objective-c - 委托返回值

> ID：13141451
> 
> 赞同：2
> 
> 时间：2012-10-30T14:44:17.023
> 
> 标签：objective-c, ios

我无法将值返回给委托。

```
@protocol DataDelegateImage
- (void)failImage;
- (NSData*)successImage;
@end

@property (nonatomic, strong) id <DataDelegateImage> delegateImage;
@property (nonatomic, strong) NSMutableData* d; 
```

我这样称呼我的代表：

```
[self.delegateImage failImage]; 
```

但是现在我试图调用返回数据内容的成功委托，但我认为我有问题，因为代码不起作用。

```
[self.delegateImage successImage:self.d]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T14:52:22.293

您传递`self.d`给您`successImage`，并且没有参数供您传递任何东西给它。如果您希望能够将某些内容传递给它，那么它应该是这样的

```
 - (void)successImage:(NSMutableData*)para1; 
```

或者

```
 - (void)successImage:(NSData*)para1; 
```

除非您想要返回某些东西并将某些东西传递给它，在这种情况下使用

```
 - (NSData*)successImage:(NSData*)para1; 
```

`type`括号中的是`- (NSData*)`它应该是的返回类型，这是`object`您要从方法返回的类型。然后是您的方法名称`successImage`，然后您将拥有参数`:(NSData*)para1`，您也可以添加更多参数

```
 - (NSData*)successImage:(NSData*)para1 withAString:(NSString*)para2; 
```

`type`参数括号内是`:(NSData*)para1`它所采用的对象类型。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:46:36.047

更改`- (NSData*)successImage;`为`-(void)successImage:(NSData*)data;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:53:50.420

您的声明

```
- (NSData*)successImage; 
```

声明一个没有参数的方法并返回一个类型的值`NSData`。从调用代码来看，您真正想要的似乎是一种方法，它采用一个类型的参数`NSData`并且没有特别返回任何内容。这可以通过以下声明来实现：

```
- (void) successImage: (NSData *) data; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T14:48:24.910

如果你想设置或发送数据到 delegateImage 你可以像@praveen-s 说的那样做

如果您想从委托中获取数据，您可能需要这样做：

```
self.d = [[self.delegateImage successImage]mutableCopy]; 
```

# sql - 我可以做些什么来加快这个 SQL 查询的速度？

> ID：13141461
> 
> 赞同：1
> 
> 时间：2012-10-30T14:44:44.873
> 
> 标签：sql, sql-server, sql-server-2008, exists

这是一些细节，我试图制作一个 SQLFiddle，但我的变量一直出错。这适用于 Sql Server 2008。我的问题是，我怎样才能使我的查询更快？我知道我在这里做错了很多事情（重复的嵌套查询），我希望有人来看看并帮助我从 30 分钟的执行时间中解决这个问题！:-S

查询背后的基本思想是，在游戏中，我想找到所有在一段时间内没有移动 5 个单位的玩家，他们在静止不动时开火并且在停止移动前 60 分钟没有开火。

查询有效，但`AND NOT EXISTS`在我补充说它需要 16 秒才能运行之前，正是该子句让事情变得缓慢起来！16 秒仍然很长，所以任何其他改进都将不胜感激，但现在这是我自己的 POC 游戏（只是把零碎的东西放在一起），16 秒是可以接受的......

```
DECLARE @n INT , @DistanceLimit INT
SELECT  @n = 2 , @DistanceLimit = 5;

WITH    partitioned
          AS ( SELECT   * ,
                        CASE WHEN Distance < @DistanceLimit THEN 1
                             ELSE 0
                        END AS PartitionID
               FROM     EntityStateEvent
               WHERE    ExerciseID = '8B50D860-6C4E-11E1-8E70-0025648E65EC'
             ),
        sequenced
          AS ( SELECT   ROW_NUMBER() OVER ( PARTITION BY PlayerID ORDER BY EventTime ) AS MasterSeqID ,
                        ROW_NUMBER() OVER ( PARTITION BY PlayerID, PartitionID ORDER BY EventTime ) AS PartIDSeqID ,
                        *
               FROM     partitioned
             ),
        filter
          AS ( SELECT   MasterSeqID - PartIDSeqID AS GroupID ,
                        MIN(MasterSeqID) AS GroupFirstMastSeqID ,
                        MAX(MasterSeqID) AS GroupFinalMastSeqID ,
                        PlayerID
               FROM     sequenced
               WHERE    PartitionID = 1
               GROUP BY PlayerID ,
                        MasterSeqID - PartIDSeqID
               HAVING   COUNT(*) >= @n
             )
    SELECT
DISTINCT    ( sequenced.PlayerID ) ,
            MIN(sequenced.EventTime) AS StartTime ,
            MAX(sequenced.EventTime) AS EndTime ,
            DATEDIFF(minute, MIN(sequenced.EventTime),
                     MAX(sequenced.EventTime)) AS StaticTime ,
            Player.Designation AS 'Player'
    FROM    filter
            INNER JOIN sequenced ON sequenced.PlayerID = filter.PlayerID
                                    AND sequenced.MasterSeqID >= filter.GroupFirstMastSeqID
                                    AND sequenced.MasterSeqID <= filter.GroupFinalMastSeqID
            INNER JOIN Events ON Events.FiringPlayerID = sequenced.PlayerID 
            INNER JOIN Player ON Player.PlayerID = sequenced.PlayerID
                                 AND Player.Force = 'FR'
                                 AND NOT EXISTS ( SELECT    *
                                                  FROM      Events
                                                  WHERE     Events.FiringPlayerID = Player.PlayerID
                                                  GROUP BY  Events.FiringTime
                                                  HAVING    Events.FiringTime BETWEEN DATEADD(minute,
                                                              -60,
                                                              ( SELECT
                                                              MIN(s.EventTime)
                                                              FROM
                                                              sequenced s
                                                              WHERE
                                                              s.PlayerID = filter.PlayerID
                                                              AND s.MasterSeqID >= filter.GroupFirstMastSeqID
                                                              AND s.MasterSeqID <= filter.GroupFinalMastSeqID
                                                              ))
                                                              AND
                                                              ( SELECT
                                                              MIN(s.EventTime)
                                                              FROM
                                                              sequenced s
                                                              WHERE
                                                              s.PlayerID = filter.PlayerID
                                                              AND s.MasterSeqID >= filter.GroupFirstMastSeqID
                                                              AND s.MasterSeqID <= filter.GroupFinalMastSeqID
                                                              ) )
            INNER JOIN Player HitPlayer ON HitPlayer.PlayerID = Events.HitPlayerID
    WHERE   HitPlayer.[FORCE] = 'HO'
    GROUP BY GroupID ,
            sequenced.PlayerID ,
            Events.FiringPlayerID ,
            Events.FiringTime ,
            Player.Designation
    HAVING  DATEDIFF(minute, MIN(sequenced.EventTime),
                     MAX(sequenced.EventTime)) > 5
            AND Events.FiringTime BETWEEN MIN(sequenced.EventTime)
                                  AND     MAX(sequenced.EventTime)
    ORDER BY StartTime 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:48:44.933

我要做的第一件事是实现`sequenced`CTE，因为它在事物的整体架构中使用了 4 次。

这意味着移动一些代码并使用#temp 表代替顺序 CTE。由于您可以聚集#temp 表并为 JOIN 创建有用的索引，因此它的效果也会好一个数量级。

请参阅[此 SQLFiddle](http://sqlfiddle.com/#!3/d41d8/5575/0) ，该 SQLFiddle显示 CTE 可以**多次**评估，每次引用一次。

# c# - 查找树节点的宽度

> ID：13141473
> 
> 赞同：1
> 
> 时间：2012-10-30T14:45:14.283
> 
> 标签：c#, winforms, treeview

我需要找出 treeView 控件中选定节点的宽度。

节点的文本是通过单击按钮添加的，有时节点内的文本很大，然后它会弄乱我表单的所有设计。我尝试了很多，但我找不到任何可以找到节点宽度的属性（可能有）。如果这是一个愚蠢的问题，请在评论中给出答案，以便我稍后可以删除该问题。

请帮助
提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:51:17.443

打电话怎么样`Graphics.MeasureString`？应该让你足够接近实际宽度。

[http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx#Y0](http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx#Y0)

# c# - 字符串日期比较

> ID：13141476
> 
> 赞同：0
> 
> 时间：2012-10-30T14:45:23.480
> 
> 标签：c#, .net, fluent-assertions

在 BDD 测试中，我正在比较日期。当比较日期在字符串中时。即使认为两个日期都相同，我也收到此消息并且测试失败

预期对象为“01/20/2012 12:00:00 AM”，但发现“1/20/2012 12:00:00 AM”。

还有一件事是这发生在我的系统上。如果我让另一个开发人员运行测试，测试就会通过。是否存在我缺少的某种类型的设置？

它的代码部分是

```
 customer["DateOfBirth"].Should().Be(Helper.DateOfBirth.ToString()); 
```

其中客户是一个哈希表。这个特定的语句在其他机器上通过了，但不是我的。

我知道我可以通过更改为日期比较而不是字符串比较来修复它。但我很好奇，因为这在其他机器上很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T14:47:05.727

> 在 BDD 测试中，我正在比较日期。当比较日期在字符串中时。

那听起来像你的问题。我的猜测是，您正在将默认文化中格式化的日期与其他文化中手动格式化的日期进行比较。

解决方案是执行与`DateTime`值的比较，而不是依赖于格式化的值。如果它们不同，则允许测试运行器格式化*这两个值。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:47:07.070

日期的格式不同——一个有一个前导 0。

您应该将它们的格式设置为相同，或者直接比较实际`DateTime`值。

# msbuild - MSBuild 项目构建失败，但解决方案构建成功

> ID：13141478
> 
> 赞同：2
> 
> 时间：2012-10-30T14:45:28.597
> 
> 标签：msbuild

在 MSBuild 中，在目标 Build 之后执行的目标中的错误将导致项目失败，而不是解决方案。

这是一个简短的示例，只需将其添加到一个空项目并构建解决方案：

```
<Target Name="DetectWebDeployPackage" AfterTargets="Build">
    <Error Text="boom" />
</Target> 
```

找到在某些情况下可能足够的解决方法 - 将依赖项更改为 BeforeTargets="AfterBuild" 但是对于使用 WebDeploy Package 目标的目标，它会导致循环依赖。

任何人都可以帮助我吗？

# git - git branch --no-merged 不应该列出新的分支吗？

> ID：13141479
> 
> 赞同：2
> 
> 时间：2012-10-30T14:45:32.000
> 
> 标签：git, branch

我们有大量的中央 git 存储库，并使用分支来跟踪各种项目的工作。当一个项目完成时，我们合并到 master 并推送到 origin。

在开始一个新项目时，我想列出该存储库上的任何其他当前工作，作为开发人员的提示（例如，以便他们可以传达他们的发布计划）。`git branch --all --no-merged origin/master`看起来很有希望，但显然它只列出了有提交的分支。从概念上讲，即使是新创建的“空”分支也表明了做一些工作的**意图**，所以这些不应该也列出来吗？

我怀疑这可能与分支和分支头之间的区别有关，虽然分支头指向它的起点，但没有什么可以合并的。但是由于合并被明确记录在历史中（对吗？）难道不应该将“空”分支识别为未合并吗？这可以做到吗？

一个明显的解决方法是在每个新分支中强制进行虚拟初始提交，但如果可能的话，我想避免这种情况。如果他们不想，开发人员似乎不应该推动他们未完成的更改（所以我希望中央存储库中的大多数分支在他们的项目完成之前都将保持空白）。

例子：

```
# Alice creates and pushes branch1
git clone $REPO clone1
git checkout -b branch1
git push -u --all
# ...continues development in her local repository...

# Bob wants to know if anybody is working on $REPO
git clone $REPO clone2
git branch --all --no-merged origin/master
# no output - he doesn't realize Alice is working in the same repository 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:40:33.417

似乎没有对我想要的东西的 git 内置支持，但是通过一些 git 管道，我得到了我正在寻找的结果，灵感来自[Find a branch point with Git?](https://stackoverflow.com/questions/1527234/finding-a-branch-point-with-git) .

如果这些假设不正确，请告诉我...

*   一个分支，其头部与它的分支点匹配`origin/master`（即没有提交）应该是一个空分支，表明做工作的意图。
*   最佳合并点`origin/master`与其头部匹配的分支已经完全合并，可以忽略。
*   任何其他情况都应该是具有未合并更改的分支。

打印所有远程分支的类别的示例脚本；如果 Bob 运行它，它会告诉他`refs/remotes/origin/branch1: new branch without any commits`：

```
#! /usr/bin/env bash

# check branches created from and merged to this branch
MASTER=refs/remotes/origin/master

# for each remote branch...
for BRANCH in $(git for-each-ref --format='%(refname)' refs/remotes/); do
    # ...except the $MASTER branch and the current HEAD
    [[ $BRANCH == $MASTER || $BRANCH =~ /HEAD$ ]] && continue

    # get the hash for the head of the branch
    BRANCH_HEAD=$(git show-ref --head --hash $BRANCH)

    # returns the first shared commit among $MASTER and $BRANCH commits
    BRANCH_POINT=$(fgrep -m 1 -f <(git rev-list --first-parent $BRANCH) \
                                 <(git rev-list --first-parent $MASTER))

    # find the best merge point
    BRANCH_MERGE=$(git merge-base $MASTER $BRANCH)

    # determine the type of branch
    if [[ $BRANCH_POINT == $BRANCH_HEAD ]]; then
        echo "$BRANCH: new branch without any commits"
    elif [[ $BRANCH_MERGE == $BRANCH_HEAD ]]; then
        echo "$BRANCH: fully merged into $MASTER"
    else
        echo "$BRANCH: branch with unmerged changes"
    fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T08:12:06.483

恐怕我和Doug-W在这件事上。`--no-merged`指包含当前分支不包含的提交（或许多）的分支。由于您是从 master 分支，而不是进行后续提交，因此分支包含的所有提交也在 master 中。

由于创建分支没​​有关于何时创建分支的概念，因此您将失去一个对您和您的公司未来可能很重要的指标。如果您在仅使用一个简单的“存根”文件创建分支后只进行一次提交，那么您可以使用此存根提交的时间戳和第二次提交时间戳来了解项目在开始之前停放了多长时间。

`--no-merged`这还具有在您的命令中报告这些分支的额外好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T23:23:57.543

不，因为 branch1 中没有未合并的更改。因此“--no-merged”不会列出分支。一旦 Alice 提交并推送更改，它就会显示出来。

# ruby - 阻止文件而不阻止 Ruby 进程失败

> ID：13141480
> 
> 赞同：4
> 
> 时间：2012-10-30T14:45:39.847
> 
> 标签：ruby

您好我正在尝试通过使用锁定文件`file.flock(File::LOOK_EX)`

如果无法阻止文件，它会阻止应用程序的问题。

`rescue`也无济于事。

`flock`如果第一次尝试无法锁定文件，有什么方法可以告诉失败吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:55:15.407

您可以添加`LOCK_NB`常量：

```
file.flock(File::LOOK_EX | File::LOCK_NB) 
```

这将防止操作阻塞。

# java - 独立服务器上的 Weblogic SingletonService

> ID：13141483
> 
> 赞同：3
> 
> 时间：2012-10-30T14:45:43.223
> 
> 标签：java, weblogic, cluster-computing

是否可以在非集群环境中运行 weblogic 的 SingletoneService？我试过了，得到了这个：

```
<30.10.2012 18:25:57> <Error> <Deployer> <BEA-149202> <Encountered an exception while attempting to commit the 1 task for the application 'myApplication'.> 
<30.10.2012 18:25:57> <Warning> <Deployer> <BEA-149004> <Failures were detected while initiating deploy task for application 'myApplication'.> 
<30.10.2012 18:25:57> <Warning> <Deployer> <BEA-149078> <Stack trace for message 149004
weblogic.management.DeploymentException: 
    at weblogic.application.internal.flow.SingletonServicesFlow.activate(SingletonServicesFlow.java:67)
    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37)
    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:212)
    at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:16)
    Truncated. see log file for complete stacktrace
java.lang.IllegalArgumentException: Cannot add Singleton Service DemoSingleton as SingletonServicesManager not started.  Check if MigrationBasis for cluster is configured.
    at weblogic.cluster.singleton.SingletonServicesManager.addConfiguredService(SingletonServicesManager.java:280)
    at weblogic.cluster.singleton.SingletonServicesManager.addConfiguredService(SingletonServicesManager.java:297)
    at weblogic.application.internal.flow.SingletonServicesFlow.activate(SingletonServicesFlow.java:65)
    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:635)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:37)
    Truncated. see log file for complete stacktrace
> 
```

当然，我没有为集群配置 MigrationBasis，因为我没有集群。但我认为可以让它在集群和独立服务器上运行。我错了吗，或者 SingletoneService 可能存在其他可能导致此错误的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T17:03:56.003

[单例服务](http://docs.oracle.com/cd/E13222_01/wls/docs92/ConsoleHelp/taskhelp/clusters/DefineSingletonService.html)只能在 WebLogic 集群的上下文中使用。对于独立服务器， [@Singleton](http://developsimpler.blogspot.in/2012/03/weblogic-clusters-and-singleton-service.html) EJB 注释就足够了。

实现 SingletonService 的应用程序只能在集群中的托管服务器上运行。此应用程序不能部署到独立的托管服务器（即不属于任何集群的托管服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-09T07:08:25.353

一个简单的解决方案是通过配置迁移策略来修复“检查集群的 MigrationBasis 是否已配置”消息。之后单例也可以部署在单节点（单节点集群）上。在**Environment -> Clusters**下，您将找到以下设置：

![环境 -> 集群](../Images/c7b8a1f534053bdba3617c0a2dc8c8d3.png)

# linux - Auralise Audacity 注释/从点击时间列表生成音频点击轨道

> ID：13141490
> 
> 赞同：0
> 
> 时间：2012-10-30T14:46:15.970
> 
> 标签：linux, audio, audacity

我正在尝试在 Audacity 中注释音乐音频文件，然后“听”注释以及文件以检查它们是否放置正确。我还没有找到可以做到这一点的 Audacity 插件，但是当我导出 Audacity 标签时，我得到一个文件，例如：

```
3.558390    
4.248639    
4.910771    
5.632766    
6.349320    
... 
```

放置点标签的文件时间（以秒为单位）。也许有一个工具（或者你可以以编程方式（最好在 Linux 上的 C++ 中））来轻松生成这样的点击跟踪？然后我就可以将它与原始文件混合并听检查它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:49:48.900

我找到了两种方法来解决这个问题：

在 Nyquist 中编写自己的插件（我正在尝试做的事情），我在 Audacity 论坛上得到了很大的帮助：http: [//forum.audacityteam.org/viewtopic.php? f=39&t=68752](http://forum.audacityteam.org/viewtopic.php?f=39&t=68752)

使用 Sonic Visualiser： http: [//www.sonicvisualiser.org/](http://www.sonicvisualiser.org/)

该程序结合了两个重要功能：播放音频时插入注释和可听化（不同的声音可用​​）。

# javascript - .click() 方法，浏览器支持

> ID：13141495
> 
> 赞同：9
> 
> 时间：2012-10-30T14:46:27.653
> 
> 标签：javascript, cross-browser, click

我想使用js方法`.click()`如下：

```
document.getElementById(id).click(); 
```

但由于它的工作原理很重要，我想知道哪些浏览器支持该`.click()`方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-06T14:08:05.900

The only browser I have encountered that does not support `.click()` is Safari. Safari supports `.click()` on buttons (e.g. `<input type="button" />`) but not on other elements such as anchor elements (e.g. `<a href="#">Click Me</a>`).

For Safari, you have to use a workaround:

```
function click_by_id(your_id)
{
    var element = document.getElementById(your_id);
    if(element.click)
        element.click();
    else if(document.createEvent)
    {
        var eventObj = document.createEvent('MouseEvents');
        eventObj.initEvent('click',true,true);
        element.dispatchEvent(eventObj);
    }
} 
```

Using the above function, you can support 90%+ of browsers.

Tested in IE7-10, Firefox, Chrome, Safari.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-24T12:00:56.607

我遇到了这个问题并使用它而不是`$('#selector').click(function(){});` , used`(document).on('click','#selector',function(){});`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T05:16:14.520

根据[MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/click)，`HTMLElement.click()`Chrome 20+、Firefox 5+ 和 Safari 6+ 都支持。但这[可能不准确](https://stackoverflow.com/questions/902713/how-do-i-programmatically-click-a-link-with-javascript#comment11362490_3738603)。

# java - h:selectOneMenu : 验证错误

> ID：13141501
> 
> 赞同：0
> 
> 时间：2012-10-30T14:46:36.367
> 
> 标签：java, jsf-2

我在页面中定义了以下下拉框：...

```
<td>
  <h:selectOneMenu id="bootenvironment1" value="#{detailModel.selectedBootenvironment1}"
                   disabled="#{detailModel.mode == detailModel.viewMode}">
    <f:selectItems value="#{detailModel.availableBootenvironments}"/>
  </h:selectOneMenu>
</td> 
```

在我的模型中，我有：

```
...
  private Map<String, Bootenvironment> availableBootenvironments;

  public DefinitionDetailModel()
  {
    super();
  }

  public String getSelectedBootenvironment1()
  {
    if (((Definition) getAfterObject()).getBootenvironment1() != null)
    {
      return ((Definition) getAfterObject()).getBootenvironment1().getEnvironmentName();
    }

    return "--Please select one--";
  }

  public void setSelectedBootenvironment1( String selectedBootenvironment )
  {
    ((Definition) getAfterObject()).setBootenvironment1(availableBootenvironments.get(selectedBootenvironment));
  }
  ... 
```

在控制器中，我设置了 availableBootenvironments 映射：

```
private void fetchBootenvironments()
  {
    ...
    @SuppressWarnings( "unchecked" )
    List<Bootenvironment> bootenvironments = (List<Bootenvironment>) ...

    Map<String, Bootenvironment> availableBootenvironments = new HashMap<String, Bootenvironment>();

    availableBootenvironments.put("--Please select one--", null);

    for(Bootenvironment bootenvironment : bootenvironments)
    {
      availableBootenvironments.put(bootenvironment.getEnvironmentName(), bootenvironment);
    }

    ((DefinitionDetailModel) detailModel).setAvailableBootenvironments(availableBootenvironments);
  } 
```

问题是，当我单击页面中的按钮（绑定到操作）时，出现错误：

> detailForm:bootenvironment1: 验证错误：值无效。

我不明白错误在哪里；*selectItems*的*值*是一个映射，其中对象的名称字段（即字符串）作为键，对象本身作为值。然后，默认选择 ( ) 的*值*也是一个字符串，正如您在模型的 getter/setter 方法中看到的那样。**`value="#{detailModel.selectedBootenvironment1}"`**

 **另一个问题（可能与前一个有关）是，当页面第一次加载时，默认选择的值应该是 --Please select one--- 因为*getBootenvironment1()*返回*null*，但这不会发生：另一个来自列表被选中。

你能帮我理解我做错了什么/哪里做错了吗？

编辑

正如你所说，我实现了转换器：

```
@FacesConverter( forClass = Bootenvironment.class )
public class BootenvironmentConverter implements Converter
{

  @Override
  public String getAsString( FacesContext context, UIComponent component, Object modelValue ) throws ConverterException
  {
    return String.valueOf(((Bootenvironment) modelValue).getDbId());
  }

  @Override
  public Object getAsObject( FacesContext context, UIComponent component, String submittedValue ) throws ConverterException
  {
    List<Bootenvironment> bootenvironments = ... (get from DB where dbid=submittedValue)

    return bootenvironments.get(0);
  }

} 
```

但现在我有以下错误：

> java.lang.ClassCastException：java.lang.String 无法转换为 ch.ethz.id.wai.bootrobot.bo.Bootenvironment

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:32:21.227

当所选项目值未通过`equals()`任何可用项目值的测试时，您将收到此错误。

实际上，您有一个`Bootenvironment`项目值列表，但您已将该属性绑定到 a `String`，这表明您依赖`Bootenvironment#toString()`作为提交值传递的值，并且您根本没有使用普通的 JSF `Converter`。A`String`永远不能返回一个对象`true`的`equals()`测试。`Bootenvironment`

您需要提供一个`Converter`which 在`Bootenvironment`及其唯一`String`表示之间进行转换。通常，使用技术 ID（例如从数据库中自动生成的 PK）作为唯一`String`表示。

```
@FacesConverter(forClass=Bootenvironment.class)
public class BootenvironmentConverter implements Converter {

    @Override
    public void getAsString(FacesContext context, UIComponent component, Object modelValue) throws ConverterException {
        // Write code to convert Bootenvironment to its unique String representation. E.g.
        return String.valueOf(((Bootenvironment) modelValue).getId());
    }

    @Override 
    public void getAsObject(FacesContext context, UIComponent component, Object submittedValue) throws ConverterException {
        // Write code to convert unique String representation of Bootenvironment to concrete Bootenvironment. E.g.
        return someBootenvironmentService.find(Long.valueOf(submittedValue));
    }

} 
```

最后，在相应地实现转换器之后，您应该能够将`selectedBootenvironment1`属性修复为普通属性，而不会在 getter/setter 中出现任何混乱：

```
private Bootenvironment selectedBootenvironment1;

public Bootenvironment getSelectedBootenvironment1() {
    return selectedBootenvironment1;
}

public void setSelectedBootenvironment1(Bootenvironment selectedBootenvironment1) {
    this.selectedBootenvironment1 = selectedBootenvironment1;
} 
```**

# directory - 在一页上对 MailMerge 进行分类 - 目录/目录

> ID：13141503
> 
> 赞同：0
> 
> 时间：2012-10-30T14:46:45.890
> 
> 标签：directory, ms-word, mailmerge

我正在尝试使用目录作为源的邮件合并工作，这将帮助我对当前模板中的记录进行分类。

我正在使用这个域代码：`{QUOTE{IF{MERGESEQ}=1{SET Key ""}}"{IF{MERGEFIELD Description}<> {KEY}"{IF{MERGESEQ}>1" "} Values for {MERGEFIELD Description}{SET Key{MERGEFIELD Description}} Input "}{MERGEFIELD ColDesc} "}`

现在我得到的输出对于一个新的新文档来说很好，但是当我使用现有模板尝试这段代码时，它输出的是它合并的每条记录的文档。

我想要的是一个页面上的这种输出：

```
Details for the record selected from the file provided:

Values for 'Subjects'
Input
Study ID
Class ID
Subject Name
Student ID

Values for 'Visits'
Input
Visit ID
Visit date
Room No.
Summary 
etc..... 
```

但我的输出如下：

```
Details for the record selected from the file provided:
Values for 'Subjects'
Input
Study ID
Class ID
Subject Name
Student ID

Details for the record selected from the file provided:
Values for 'Visits'
Input
Visit ID
Visit date
Room No.
Summary 
```

所有建议表示赞赏。

最好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:18:51.213

是的，

我能够弄清楚我的问题。

我点击了这个链接[http://windowssecrets.com/forums/showthread.php/111149-Mailmerge-Tutorial-Create-Sorted-Listings-(2000-2010](http://windowssecrets.com/forums/showthread.php/111149-Mailmerge-Tutorial-Create-Sorted-Listings-(2000-2010) )

并且在那

本教程展示了如何进行分类。根据我的描述，主题“按类别合并记录”下的字段似乎将作为该项目的基础。如果只想在合并第一条记录时输出一些内容，只需修改这部分字段：

```
{IF{MERGESEQ}= 1 {SET Key " "}}
to, for example:
{IF{MERGESEQ}= 1 "{SET Key " "}Record 1"} 
```

酷，到目前为止一切顺利。

# php - Joomla 2.5 与 Virtuemart

> ID：13141505
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:46:50.220
> 
> 标签：php, javascript, joomla, virtuemart

将商品添加到购物车时，是否可以将用户重定向到不同的页面？例如，我希望他们进入输入详细信息页面，然后从这里我希望他们查看购物车。

如果有可能怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:47:56.663

通过将 controllers->cart.php 第 85 行的地址更改为我要重定向到的页面的位置来解决这个问题。

# sql-server - 检查用户是否是 SQL Server 中 dbo 角色的成员

> ID：13141507
> 
> 赞同：15
> 
> 时间：2012-10-30T14:46:50.360
> 
> 标签：sql-server, tsql

我需要一条 T-SQL 语句来检查用户是否是 SQL Server 中数据库角色的成员。具体来说，我需要知道用户是否是 dbo 角色的成员，因为这样我就不必向该用户授予额外的权限。

如果我在用户是 dbo 时尝试添加额外的权限，它会失败，并且我的脚本也会失败......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-30T14:50:53.843

[`IS_ROLEMEMBER`](http://msdn.microsoft.com/en-us/library/ee677633.aspx)?

```
IF IS_ROLEMEMBER ('db_owner') = 1
BEGIN
    PRINT 'Is owner'
END 
```

或者，如果查询不同的用户：

```
IF IS_ROLEMEMBER ('db_owner','other user') = 1
BEGIN
    PRINT 'Is owner'
END 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-30T15:01:21.087

以下是 MSDN 页面上有关该[`IS_MEMBER`](http://msdn.microsoft.com/en-us/library/ms186271.aspx)功能的示例：

```
-- Test membership in db_owner and print appropriate message.
IF IS_MEMBER ('db_owner') = 1
   PRINT 'Current user is a member of the db_owner role'
ELSE IF IS_MEMBER ('db_owner') = 0
   PRINT 'Current user is NOT a member of the db_owner role'
ELSE IF IS_MEMBER ('db_owner') IS NULL
   PRINT 'ERROR: Invalid group / role specified' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T17:18:59.307

这就是我最终做的事情：（根据评论进行编辑）

```
DECLARE @ISSYSADMIN INT
SET @ISSYSADMIN = (SELECT COUNT(1) 
                   FROM sys.syslogins 
                   WHERE sysadmin = 1 AND loginname = '$(ContentAccount)') 
```

$(ContentAccount) 当然是具有用户域和名称的参数化！

这解决了我的问题，因为当我们部署新数据库时，我们手动分配权限。但是在我们尝试添加的用户已经是 sysadmin 的开发环境中，它们会失败。因此，如果我们检查足以涵盖开发服务器场景的系统管理员成员资格。

然后我这样做是为了检查成员资格：

```
IF (@ISSYSADMIN = 0)
BEGIN
  -- Add authority
END 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-09T14:31:22.047

`IS_SRVROLEMEMBER`是你想要的功能。

```
IF IS_SRVROLEMEMBER ('sysadmin','myuser') = 1 PRINT 'Is SysAdmin'

IF IS_SRVROLEMEMBER ('serveradmin','myuser') = 1 PRINT 'Is ServerAdmin' 
```

[参考](http://msdn.microsoft.com/en-us/library/ms176015.aspx)

# deployment - CakePHP 将应用程序从一台服务器移动到另一台服务器

> ID：13141509
> 
> 赞同：0
> 
> 时间：2012-10-30T14:46:51.267
> 
> 标签：deployment, cakephp-2.0

我将我的应用程序从一台服务器（开发）移动到另一台服务器（发布）并且蛋糕落在文件 lib/Cake/bootstrap.php 中，这是蛋糕核心文件之一。

前一个地址（正在运行）是[http://sdruzenid.kho.cz](http://sdruzenid.kho.cz) 在地址[http://sdruzenid.cz](http://sdruzenid.cz)是错误的。

我只是将所有文件从一台服务器复制到另一台服务器。没有硬编码的地址

在第一台服务器上，adresar 结构是

root: /sdruzenid
app: /sdruzenid/app
webroot: /sdruzenid/app/webroot
adresar www 没有被使用（因为其他网络在其中运行，这只是子域）

在新位置它是
根目录：/www
应用程序：/www/app
webroot：/www/app/webroot

当我从 app/webroot/index.php 打印路径时，它是：
ROOT: /httpd/html/sdruzenidcz/www
WWW_ROOT: /httpd/html/sdruzenidcz/www/app/webroot/
CAKE_CORE_INCLUDE_PATH: /httpd/html/sdruzenidcz/www /lib:/httpd/html/sdruzenidcz:./

该错误是由 lib/Cake/bootstrap.php 中的此代码引起的

```
App::uses('ErrorHandler', 'Error');
App::uses('Configure', 'Core');
App::uses('CakePlugin', 'Core');
App::uses('Cache', 'Cache');
App::uses('Object', 'Core');
App::$bootstrapping = true; 
```

错误在最后一行。我找不到变量 $bootstrapping 是在哪里定义或设置的，但这是在蛋糕核心中，在开发部署时它工作正常

在我的代码 app/webroot.index.php 附近的错误是：

```
if (!defined('CAKE_CORE_INCLUDE_PATH')) {
    if (function_exists('ini_set')) {
        ini_set('include_path', ROOT . DS . 'lib' . PATH_SEPARATOR . ini_get('include_path'));
    }
    //it crashes after include of bootstrap.php
    if (!include 'Cake' . DS . 'bootstrap.php') {
        $failed = true;
    }
} else {
    if (!include CAKE_CORE_INCLUDE_PATH . DS . 'Cake' . DS . 'bootstrap.php') {
        $failed = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:13:58.270

删除所有缓存文件

*   应用程序/tmp/缓存/模型
*   **应用程序/tmp/缓存/持久**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:16:03.640

问题很简单。在托管是低版本的php。升级后一切正常。

简而言之：如果您在第 144 行的 cake/core/bootstrapping.php 中有错误，请升级您的 php。

# android - 如何从 Android 中的 SimpleDateFormate() 获取时间？

> ID：13141511
> 
> 赞同：0
> 
> 时间：2012-10-30T14:46:54.057
> 
> 标签：android, datetime, simpledateformat

我有一个字符串：-

```
 Tue Oct 30 13:22:58 GMT+05:30 2012; 
```

我想从 SimpleDateFormate 中划分时间和日期：-

```
DateFormat f = new SimpleDateFormat("EEE,MM/dd/yyyy hh:mm:ss);
Date d = f.parse(my string);
DateFormat date = new SimpleDateFormat("MM/dd/yyyy");
DateFormat time = new SimpleDateFormat("hh:mm:ss a");
System.out.println("Date: " + date.format(d));
System.out.println("Time: " + time.format(d)); 
```

我收到此错误：-

```
 java.text.ParseException: Unparseable date: "Tue Oct 30 13:22:58 GMT+05:30 2012" 
```

请告诉我有什么问题。谢谢， 迪潘克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:51:23.470

您的时间戳字符串与您的模式不匹配：

```
Tue Oct 30 13:22:58 GMT+05:30 2012 
```

不可能（更不用说 SimpleDataFormat 初始化行中的语法错误）：

```
EEE,MM/dd/yyyy hh:mm:ss 
```

所以你需要使模式匹配输入数据。[此处描述](http://developer.android.com/reference/java/text/SimpleDateFormat.html)了 SimpleDateFormat 支持的所有字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:59:41.023

你确定日期是正确的？？因为我试图解析它，所以`GMT+05:30` 只需删除它就会出错`:30`，它会起作用，请参见此处：

```
String time = "Tue Oct 30 13:22:58 GMT+05 2012";
long f=Date.parse(time);
System.out.println("Time:" + f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:53:29.577

就目前而言，您的时区偏移量与 RFC 822 标准不匹配，因此我认为您不能在不先对其进行一些清理的情况下直接解析日期。

如果你只想要一个偏移量，那么字符串应该如下所示：

```
Tue Oct 30 13:22:58 +0530 2012 
```

请注意，偏移量内没有“GMT”，也没有冒号。那么对应的模式是：

```
new SimpleDateFormat("EEE MMM dd HH:mm:ss Z yyyy") 
```

或者，您可以指定时区：

```
Tue Oct 30 13:22:58 IST 2012 
```

模式是：

```
new SimpleDateFormat("EEE MMM dd HH:mm:ss zzz yyyy") 
```

# ruby-on-rails - 为三元关系设计一个宁静的 URI

> ID：13141513
> 
> 赞同：0
> 
> 时间：2012-10-30T14:47:01.123
> 
> 标签：ruby-on-rails, rest, resources, uri

我正在开发一个 Rails 项目，该项目将通过 URI 公开一组资源。我遇到的问题如下：

考虑这些模型，学生、笔记和课程。每节课可以有许多学生发布的笔记。在 Active Record 的文献中：

```
class Lesson < ActiveRecord::Base
  has_many :notes
end

class Student < ActiveRecord::Base
  has_many :notes
end

class Note < ActiveRecord::Base
  belongs_to :lesson
  belongs_to :user
end 
```

现在我想知道支持以下场景的 URI 设计和资源设计：

> 检索 id 为 5 的学生在 id 为 4 的课程上发布的所有笔记的列表。

请注意，如果我像这样在 routes.rb 中定义资源：

```
resources :lessons do
  resources :notes
end

resources :students do
  resources :notes
end 
```

那么我可以通过“/lessons/4/notes/”和“/students/5/notes”访问笔记，但是我之前解释的查询呢？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:49:41.000

那这个呢？

```
/notes?lesson=4&student=5 
```

这是一个 URI，可能仅与`GET`. 因此，它是一个完全有效的 URI，用于标识您想要的资源：满足特定条件的所有笔记的列表。

**注意：** REST URI 不应受所用框架支持的限制。

# python - matplotlib 的颜色图

> ID：13141514
> 
> 赞同：2
> 
> 时间：2012-10-30T14:47:01.360
> 
> 标签：python, colors, matplotlib

我是 python 新手，在安装它之后，我已经完成了使用 matplotlib 绘制我的 3d 数据。可悲的是，我唯一不知道如何完成的是颜色部分。我的图像只显示表面，但根本不使用彩条。这是我的代码。

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
from matplotlib.ticker import LinearLocator, FormatStrFormatter
import matplotlib.pyplot as plt
from matplotlib.mlab import griddata
import numpy as np

fig = plt.figure()
ax = fig.gca(projection='3d')

data = np.genfromtxt('Uizq.txt')
x = data[:,0]
y = data[:,1]
z = data[:,2]

xi = np.linspace(min(x), max(x))
yi = np.linspace(min(y), max(y))

ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.set_zlabel('U')

X, Y = np.meshgrid(xi, yi)
Z = griddata(x, y, z, xi, yi)
ax.set_zlim3d(np.min(Z), np.max(Z))

surf = ax.plot_surface(X, Y, Z, rstride=2, cstride=2, cmap=cm.jet,
                   linewidth=0.5, antialiased=False)

fig.colorbar(surf, shrink=0.5, aspect=5)

plt.show() 
```

[![阴谋](../Images/b6322d66abb48fadea34ccdec85194e4.png)](https://i.stack.imgur.com/cYDVa.png)

您显然可以看到它全是蓝色的，我想使用全`cm.jet`光谱将颜色与“U”相关联。这可能是一个非常菜鸟的问题，如果你翻白眼，很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:16:11.723

添加行

```
surf.set_clim([np.min(Z),np.max(Z)]) 
```

在添加彩条之前。

似乎 3D 绘图没有考虑掩蔽，因此您将数据包含`NaN`在数据中，这会混淆自动颜色限制。

# vim - Vim 像 netbeans 一样在保存时上传

> ID：13141518
> 
> 赞同：1
> 
> 时间：2012-10-30T14:47:08.157
> 
> 标签：vim, ftp

我遇到了 proj-vim，它使用传输 vim 上传项目文件。但是，自述文件并没有告诉我如何实际执行此操作。

理想情况下，我想保留我在 netbeans 中的工作流程，在那里我有一个项目的本地子集。当我点击保存时，文件会自动上传到服务器。

我可以在 vim 中复制这种行为吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:53:54.883

如果您知道上传文件的命令，它就像

```
augroup AutoUpload
    autocmd! BufWritePost * :{TransmitFiles}
augroup END 
```

，最好用一些东西来检查你是否真的可以传输某些东西（或者`:silent!`如果`{TransmitFiles}`你确定该命令只会抛出错误，以防万一没有任何东西可以传输并且不会破坏任何东西）。

**更新**：似乎它应该看起来像

```
augroup AutoUpload
    autocmd! BufWritePost * :silent! call TransmitFtpSendFile()
augroup END 
```

: 我没有看到一种直接的方法来检查是否可以传输某些内容。

# c - 为什么队列和堆栈被声明为指针？

> ID：13141519
> 
> 赞同：0
> 
> 时间：2012-10-30T14:47:10.110
> 
> 标签：c, pointers, data-structures, stack, queue

我正在研究数据结构，但我不明白为什么需要像这样声明堆栈和队列：

```
struct stack *Stack; 
```

（忘记`struct`语法）

我的意思是，为什么它总是被声明为指针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:01:56.760

他们并不总是这样宣布！

通常，将变量声明为指针对于以后动态分配它很有用。这可能是由于以下几个原因：

*   变量对于程序堆栈来说太大了
*   您想从函数中返回该变量

在您的情况下，让我们考虑两种不同的堆栈实现：

```
struct stack
{
    void *stuff[10000];
    int size;
}; 
```

这是一个糟糕的实现，但假设你有一个这样的实现，那么你很可能不想把它放在程序堆栈上。

或者，如果您有：

```
struct stack
{
    void **stuff;
    int size;
    int mem_size;
}; 
```

不管怎样，你动态改变大小`stuff`，所以`struct stack`在程序堆栈上声明一个类型的变量绝对没有害处，即像这样：

```
struct stack stack; 
```

除非，您想从函数中返回它。例如：

```
struct stack *make_stack(int initial_size)
{
    struct stack *s;

    s = malloc(sizeof(*s));
    if (s == NULL)
        goto exit_no_mem;

    if (initial_size == 0)
        initial_size = 1;
    s->stuff = malloc(initial_size * sizeof(*s->stuff));
    if (s->stuff == NULL)
        goto exit_no_stuff_mem;

    s->size = 0;
    s->mem_size = initial_size;

    return s;
exit_no_stuff_mem:
    free(s);
exit_no_mem:
    return NULL;
} 
```

不过，就个人而言，我会像这样声明函数：

```
int make_stack(struct stack *s, int initial_size); 
```

`struct stack`并在程序堆栈上分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:10:56.447

这取决于您的堆栈结构是如何定义的（不仅是 的布局，`struct`还有操作它的操作）。

完全可以将堆栈定义为简单的数组和索引，例如

```
struct stack_ {
  T data[N]; // for some type T and size N
  size_t stackptr; // Nobody caught that error, so it never existed, right? ;-)
} stack;

stack.stackptr = N; // stack grows towards 0

// push operation
if (stack.stackptr)
  stack.data[--stack.stackptr] = some_data();
else
  // overflow

// pop operation
if (stack.stackptr < N)
  x = stack.data[stack.stackptr++];
else
  // underflow 
```

但是，固定大小的数组是有限制的。实现堆栈的一种简单方法是使用列表结构：

```
struct stack_elem {
  T data;
  struct stack_elem *next;
}; 
```

这个想法是列表的头部是堆栈的顶部。将一个项目压入堆栈会在列表的头部添加一个元素；弹出一个项目会从列表的头部删除该元素：

```
int push(struct stack_elem **stack, T data)
{
  struct stack_elem *s = malloc(sizeof *s);
  if (s)
  {
    s->data = data;   // new element gets data
    s->next = *stack; // set new element to point to current stack head
    *stack = s;       // new element becomes new stack head
  }
  return s != NULL;
}

int pop(struct stack_elem **stack, T *data)
{
  int stackempty = (*stack == NULL);

  if (!stackempty)
  {
    struct stack_elem *s = *stack; // retrieve the current stack head
    *stack = (*stack)->next;       // set stack head to point to next element
    *data = s->data;               // get the data
    free(s);                       // deallocate the element
  }

  return r;
}

int main(void)
{
  struct stack_elem *mystack = NULL; // stack is initially empty
  T value;
  ...
  if (!push(&mystack, some_data()))
    // handle overflow
  ...
  if (!pop(&mystack, &value))
    // handle underflow
  ...
} 
```

由于`push`and`pop`需要能够将新的指针值写入`mystack`，我们需要将指针传递给它，因此`stack`in`push`和的双重间接`pop`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T17:33:42.933

真的没有必要用指针来实现堆栈和队列——其他人已经清楚地说明了这个事实。查看@JohnBode 关于如何使用数组完美实现堆栈的答案。问题是，使用指针对某些数据结构（例如堆栈、队列和链表）进行建模，可以让您在执行速度和内存消耗方面以非常有效的方式对其进行编程。

通常，如果您的用例需要频繁随机访问结构中的元素，则用于保存数据结构的底层数组是非常好的实现选择，因为它是位置索引（这是 FAST 与数组）。但是，将结构扩展到其初始容量可能会很昂贵，并且您会在数组中未使用的元素上浪费内存。插入和删除操作也可能非常昂贵，因为您可能需要重新排列元素以压缩结构或为新元素腾出空间。

由于队列和堆栈没有这种随机访问要求，并且您不会在它们中间插入或删除元素，因此“动态”动态分配每个单独的元素，请求内存是更好的实现选择当需要一个新元素时（这就是 malloc 所做的），并将其作为一个元素释放将被删除。这很快，并且不会消耗比您的数据结构实际需要的内存更多的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:02:28.683

不，它们不必被声明为指针。

也可以将堆栈和队列分配为全局变量：

```
struct myHash { int key; int next_idx; int data[4]; } mainTable[65536];
struct myHash duplicates[65536*10];
int stack[16384]; 
```

myHash 还包括一个使用索引的重复条目的链接列表。

但正如评论中所述，如果必须向结构添加更多元素，这是最初计划的，那么指针就派上用场了。

将结构声明为指针的另一个原因是，通常使用指针可以访问整个结构、结构的任何单个元素或元素的某些子集。这使得语法更加通用。此外，当结构作为参数传递给某个外部函数时，指针是不可避免的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T21:00:58.773

正如 aleady 指出的那样，这取决于结构有多大。

另一个原因是封装。stack 实现可能不会在其头文件中公开 struct stack 的定义。这对用户隐藏了实现细节，缺点是需要免费的存储分配。

# php - PHP 简单循环在某个数字处中断

> ID：13141532
> 
> 赞同：0
> 
> 时间：2012-10-30T14:47:58.053
> 
> 标签：php, math, loops, break

我有一个循环，我想在某个数字后打破。所以我想每 24 条记录显示链接。

```
for ($i=0; $i<=$TotalProductsString; $i+24)
{
    echo "Page link" . $i . "";
} 
```

如果`$TotalProductsString=52`那么它将显示循环 3 次，因为 24 只能进入 52 大约 3 次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:51:43.910

您的循环应如下所示：

```
for ($i=0; $i<=$TotalProductsString; $i+=24)
{
    echo "Page link " . $i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:51:38.803

尝试

```
for ($i=0; $i<=$TotalProductsString; $i =$i+24)
{
    echo "Page link" . $i . "";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:51:37.440

为此使用[模运算符](http://php.net/manual/en/internals2.opcodes.mod.php)：

```
$i = 1;
foreach($rows as $row) {
  // do your row stuff
  if($i % 24 == 0)
    echo "Page link" . $i . "";
  $i++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:54:32.327

不知道问题是什么。除了将 $i 增加 24 之外，您还可以增加 1 并检查 $i 是否满足您要查找的数字。例如，

```
for ($i=0; $i<=$TotalProductsString; $i++)
{
    // if the remainder is 0 when dividing $i by 24 
    if ($i % 24 == 0) {
         echo "Page link" . $i . "";
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T15:40:16.200

> 有一个循环我想在某个数字后打破。所以我想每 24 条记录显示链接。

你想打破或者你想显示每 24 条记录的链接，或者你想做这两件事？

> 如果 $TotalProductsString=52 那么它将显示循环 3 次，因为 24 只能进入 52 大约 3 次。

24 x 3 = 72，因此，如果 $TotalProductsString 为 52，则 24 只能走 2 次。

如果要显示每 24 条记录的页面，可以简单地将其放在“for”中：

```
if ($i % 24 == 0) {
     echo "Page link" . $i . "";
} 
```

并使用 $i++ 而不是使用这个： $i+24;

# c++ - 二进制数和十进制数之间的转换

> ID：13141542
> 
> 赞同：0
> 
> 时间：2012-10-30T14:48:20.870
> 
> 标签：c++, binary, decimal

我想问一下，`bin-'0'`这段将二进制数转换为十进制数的代码是什么意思。谢谢。

```
#include <stdio.h>
#include <stdlib.h>

int main(){
    char bin;
    int dec = 0;

    printf("Binary: \n");
    bin = getchar();

    while((bin != '\n')){
        if((bin != '0') && (bin != '1')){
            printf("Wrong!\n");
            return 0;
        }
        printf("%c",bin-'0');  // ?

        dec = dec*2+(bin-'0'); // ?
        bin = getchar();
    }

    printf("Decimal: %d\n", dec);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:50:08.557

`bin - '0'`将 bin 的 ASCII 值转换为其整数值。给定`bin = '1'`，`bin - '0' = 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:51:41.433

该代码利用了 C++ 字符实际上只是特殊整数这一事实。它使用 getchar 来接收 '0' 或 '1' 的字符。现在它需要将其转换为 0 或 1（请注意，这些是数字，而不是字符）。鉴于 char '0' 是 '1' 之前的一个，从两者中减去 char '0' 的值会将 '0' 变为 0，将 '1' 变为 1。

```
'0' - '0' = 0
'1' - '0' = 1 
```

# java - 来自命令提示符的 Java mkdir

> ID：13141543
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:48:23.370
> 
> 标签：java, command-line, mkdir

我想创建一个以`.`字符开头的文件夹。我试过`File(path).mkdir()`但不起作用。我无法从“右键单击->新文件夹”创建。Windows 阻止创建以点字符开头的文件夹。在命令提示符下，我可以轻松地通过`mkdir [folder_name]`. 我这里有什么错误吗。如果不是，我如何在 java 中执行此命令或任何其他建议会有所帮助？

笔记：`Process p = Runtime.getRuntime().exec("mkdir .test"); //Does not work`

注意2：我的代码将取决于平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:48:27.627

```
new File("C:\\Temp\\.folder").mkdir(); 
```

为我工作。请注意，`mkdir()`返回`boolean`表示成功或失败的 a。例如，如果您没有创建文件夹的权限，它可能会失败。

（注意：当您提出问题时，请解释“不起作用”的含义。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:09:17.833

与平台无关的操作系统函数在 java 中并不那么简单，但您可以将它包装在一个独立于平台的 ant mkdir[任务](https://stackoverflow.com/questions/6440295/)中。用法有点迂回，但/可能非常强大

# c# - 为类分配数值

> ID：13141549
> 
> 赞同：3
> 
> 时间：2012-10-30T14:48:37.920
> 
> 标签：c#

> **可能重复：**
> [在 C# 中重载赋值运算符](https://stackoverflow.com/questions/4537803/overloading-assignment-operator-in-c-sharp)

我记得我在堆栈溢出的某个地方看到了这个问题，但我找不到它。

基本上我希望能够做到：

```
MyClass myClass = 5; 
```

其中 MyClass 是我的程序实现的类。

如果我能找到那个重复的问题，我会删除这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T14:50:16.590

我认为你想要一个隐式转换运算符。

```
public static implicit operator MyClass(int m) 
{
     // code to convert from int to MyClass
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:50:08.713

实现`implicit`运算符。

[MSDN 隐式（C# 参考）](http://msdn.microsoft.com/en-us/library/z5z9kes2%28v=vs.110%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:20:12.913

试试这个：

```
public class MyClass
{
    public int MyProperty { get; set; }

    private MyClass(int i)
    {
        MyProperty = i;
    }

    public static implicit operator MyClass(int x)
    {
        return new MyClass(x);
    }
}

MyClass myClass = 5; 
```

# sql - 从表中获取值并在插入查询中添加其他参数

> ID：13141554
> 
> 赞同：0
> 
> 时间：2012-10-30T14:49:03.410
> 
> 标签：sql, vb.net, ado.net

任何人都可以在下面的查询中提出建议 - 我需要从表中获取一些，并且很少会作为变量提供给下面的语句。我正在努力如何写这个

```
SQLCommand = New SqlCommand("TableA", Conn)
SQLCommand.CommandText = "Insert into TableA(P1,P2,P3,P4,P5,P6,P7,P8) " & _
            "Values (@p1, @P2, @P3, @P4, @P5, @P6, @P7, @P8) 
```

其中@p1、@p2、@p3、@p4 将来自表 B 而@p5、@p6、@p7、@p8 将是函数将为其提供值的变量

我正在努力如何更改上述 COMMANDTEXT 语句 - 从 TableB 和其他自定义变量（p5、p6、p7、p8）中获取值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:56:28.320

```
Insert into TableA (P1,P2,P3,P4,P5,P6,P7,P8) 
     SELECT b.column1, b.column2, b.column3, b.column4, @P5, @P6, @P7, @P8
     FROM TableB b
     WHERE ... 
```

# objective-c - 单击按钮时自动滚动uipickerview

> ID：13141558
> 
> 赞同：0
> 
> 时间：2012-10-30T14:49:11.973
> 
> 标签：objective-c, ios, xcode

我正在使用 UIPickerView 来显示问题的答案。如果用户无法解决，则需要一个按钮来显示正确答案。我尝试了以下方法，但应用程序崩溃了。如何自动滚动到正确答案？

```
-(void)reveal {

    [myPickerView selectRow:0 inComponent:0 animated:YES];

} 
```

**编辑：是的，我只是想让它滚动到上面示例中的第一个答案:)**

[ExcerciseController 显示：]：无法识别的选择器发送到实例 0x68398f0 2012-10-30 14:57:21.673 英语[20786:f803] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[ExcerciseController 显示：]：无法识别选择发送到实例0x68398f0' ***第一掷调用堆栈：（0x1397022 0x108ccd6 0x1398cbd 0x12fded0 0x12fdcb2 0x1398e99 0x1f214e 0x1f20e6 0x298ade 0x298fa7 0x298266 0x2173c0 0x2175e6 0x1fddc4 0x1f1634 0x21a3ef5 0x136b195 0x12cfff2 0x12ce8da 0x12cdd84 0x12cdc9b 0x21a27d8 0x21a288a 0x1ef626 0x2c5d 0x2b85）终止叫做抛出异常[切换处理20786线程0xf803]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:06:40.080

现在，错误/崩溃消息是可见的，事实证明错误不在于您如何调用选择器的方法。这就是您调用`reveal`.

你用一些对象调用显示。或者你通过传递一个选择器来调用它。但是，您正在调用的当前选择器是，`reveal:`但方法名称`reveal`没有任何参数。`reveal:`需要一个参数。

无论你在哪里打电话，确保你打电话`reveal`而不是`reveal:`

我假设您在界面生成器中或以编程方式创建按钮时设置选择器。那是你犯错的地方。

一些背景知识：错误信息告诉你你需要知道什么。在 Objective-C 中，方法名在运行时称为选择器。在某些文献中，您会发现消息的措辞（`reveal:`在您的案例中命名）被发送到`ExcerciseController`在您的案例中命名的接收者。

Objective-C 是多态的。这意味着`reveal`（不带任何参数调用）指的是另一种方法实现，而不是`reveal:`（带一个参数调用）甚至`reveal::`（带三个参数调用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:53:23.790

请尝试发布崩溃描述，需要更多代码块来回答它:)

但是，只需尝试以下代码

```
myPickerView.delegate = self;
[myPickerView reloadAllComponents];
[myPickerView selectRow:0 inComponent:0 animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:04:42.537

`myPickerView`可能不是`UIPickerView`as`UIPickerView`响应选择器的实例 -`(void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated`

或者您必须检查该方法`reveal`是如何被调用的。

# full-text-search - Sphinx - 使引擎赋予标题列更大的权重和更好的部分匹配

> ID：13141560
> 
> 赞同：0
> 
> 时间：2012-10-30T14:49:22.240
> 
> 标签：full-text-search, sphinx

真的这是两个问题..但相关

1）我如何给标题列/索引中的短语“更大”的权重？

2) 如何防止部分匹配 - 例如，如果我搜索“艺术”，它会忽略“部分”、“购物车”等词...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:52:06.270

1) setFieldWeights() API 函数就是为此。

2) 默认情况下，您不会获得部分匹配项。你必须做一些事情来启用它们 - 使用 min_prefix_len 和/或 min_infix_len。如果您确实想要中缀匹配，有时请查看 enable_star 选项。

# android - Google Play 已安装应用程序“更新”列表与“手动更新”列表之间的区别？

> ID：13141561
> 
> 赞同：6
> 
> 时间：2012-10-30T14:49:24.940
> 
> 标签：android, google-play

当我在手机上启动 Google Play 并进入“我的应用程序”部分时，我可以看到所有已安装的应用程序分布在三个列表中：

*   更新
*   手动更新
*   最新

我将我的应用发布到 Google Play，每当我推出新版本时，我的应用都会出现在*手动更新*列表中。我希望我的应用出现在*Updates*列表中，而不是*Manual Updates*。

我怎样才能做到这一点？*该列表上的更新*和*手动更新*有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:30:37.650

除非您更改请求的权限，否则您的应用程序将出现在*更新列表中。*如果您`CAMERA`在某个时候添加权限，那么您的应用程序将出现在*手动更新*列表中，直到您的用户接受新权限。

# c - 结构数组读取函数将所有数组值更改为最新输入 - C

> ID：13141567
> 
> 赞同：1
> 
> 时间：2012-10-30T14:49:46.780
> 
> 标签：c, arrays, struct

其中：ssize 是数组的输入大小，student 是全局声明的结构，read_stud 是我用来读取数组的函数。

打印出来时， s[count].first 给了我正确的名字，但是 s[0] 和之后的所有值也是相同的名字，而不是之前输入的值。它将结构值更改为我最近的输入！

```
struct student //this struct is global
{
    int number;
    char *first ;
    char *last ;
};

struct student read_stud (int number, char *first , char *last) //my read_stud function
{
    struct student s;
    s.number = number;
    s.first = first;
    s.last = last;
    return s;
} 
```

这是在`int main`，我使用该功能的地方`s = calloc(ssize, sizeof (struct student));`

```
for (count = 0; count < ssize ; ++count)
{
    printf ("Enter student number, name and last name: \n");
    scanf ("%d %s %s", &number, &first, &last);
    s[count] = read_stud (number, first, last); 
} 
```

非常感谢能帮我解决这个问题的人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:58:00.757

您需要为`student`结构中的名字和姓氏提供存储空间。

如果您知道它们的最大长度是多少，请在结构中使用 char 数组。

```
#define MAX_NAME_CHARS (20)

struct student //this struct is global
{
    int number;
    char first[MAX_NAME_CHARS];
    char last[MAX_NAME_CHARS];
}; 
```

否则， malloc 字符串并记得稍后释放它们。

```
struct student read_stud (int number, char *first , char *last) //my read_stud function
{
    struct student s;
    s.number = number;
    s.first = strdup(first);
    s.last = strdup(last);
    return s;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:59:52.423

现有代码：

```
for (count = 0; count < ssize ; ++count)
{
    printf ("Enter student number, name and last name: \n");
    scanf ("%d %s %s", &number, &first, &last);/*1*/
    s[count] = read_stud (number, first, last); 
}

struct student read_stud (int number, char *first , char *last) //my read_stud function
{
    struct student s;
    s.number = number;
    s.first = first;/*2*/
    s.last = last; /*3*/
    return s;
} 
```

因为您分配了相同的值（第一个和最后一个），然后用 scanf 覆盖。尝试在结构中为第一个和最后一个分配内存：

```
struct student read_stud(int number, char *first , char *last) //my read_stud function
    {
        struct student s;
        s.number = number;
        s.first = malloc(strlen(first) + 1);
        strcpy(first, s.first);
        s.last =  malloc(strlen(last) + 1); /*3*/
        strcpy(last, s.last);
        return s;
    } 
```

并且不要忘记释放所有分配的内存。（为简洁起见，省略了错误检查。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:53:29.827

```
struct student *read_stud(int number, char *first , char *last) // my read_stud function
{
    struct student *s;
    s = malloc(sizeof(struct student));
    s->number = number;
    s->first = strdup(first);
    s->last = strdup(last);
    return s;
} 
```

主要是：

```
char first[256], last[256]; /* 256 as example*/
struct student *s = calloc(ssize, sizeof (struct student *)); 
```

# facebook - facebook请求是否使用iOS FB SDK多线程

> ID：13141571
> 
> 赞同：1
> 
> 时间：2012-10-30T14:49:56.623
> 
> 标签：facebook, ios6

我的场景：

我正在使用 iOS facebook SDK 发出多个 facebook 请求。但是，我不确定这些请求是全部发生在单个线程（当然不同于 UI）还是多个线程上。

我想基本上检查我的朋友列表中每个朋友的状态，并试图看看是否有办法提高性能。仅使用 SDK，它们似乎是异步请求，但不要认为它们发生在多个线程上。

真的吗？无论如何以负责任的方式启动多个线程以提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T19:17:44.580

You should be able to achieve the result you need with a single API call:

```
/me/friends?limit=10&fields=posts.limit(1).fields(story) 
```

for example, will return ten friends, and the story field of their most recent post.

```
/me/friends?limit=10&fields=statuses.limit(1).fields(message) 
```

is something similar for the ./statuses connection. There's paging too, if you need.

You can use the left hand query builder of the Graph Explorer (https://developers.facebook.com/tools/explorer) to build out these expanded field queries, and there's more info here: [https://developers.facebook.com/docs/reference/api/field_expansion/](https://developers.facebook.com/docs/reference/api/field_expansion/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:46:31.503

Facebook 不以多线程方式处理其请求（它们是异步的，就像你说的那样），但你可以在你在 iOS 中创建的线程上发送 Facebook 请求。查看 Apple 的本指南以了解 iOS 上的线程：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html)

# java - 使用 Web 套接字操作从服务器获取的数组时出现问题

> ID：13141574
> 
> 赞同：0
> 
> 时间：2012-10-30T14:50:01.380
> 
> 标签：java, node.js, websocket

我在通过 websockets 操作回调函数中获得的数组时遇到了一些问题

服务器端代码

```
var io = require('socket.io').listen(app);

io.sockets.on('connection', function (socket) {
    var currentTime = new Date().getTime();
    var startTime = currentTime - (5*60*1000);
    step = 30*1000;
    var stats = [];
    stats["values"] = [1, 2, 3, 4, 3, 4, 5, 8, 2, 3, 4, 1];
    stats["start"] = startTime;
    stats["end"] = currentTime;

    socket.emit('initial', { stats: stats }); 
    socket.on('echo', function (data) {

    }); 
}); 
```

客户端代码

```
var data;

socket.on('initial', function (stats) {
  data = stats.stats;
}); 
```

现在，当我尝试操作数据变量时。就像使用 push 和 shift

```
data.values.push(10);
data.values.shift(); 
```

我期待它有

2, 3, 4, 3, 4, 5, 8, 2, 3, 4, 1, 10

但是我不知道移位操作会完全删除所有元素，并且数组中只剩下 10 个。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:08:32.927

您将获得您的响应对象`{stats: stats}`，但您对该`stats`属性感兴趣：

```
var data;

socket.on('initial', function (obj) {
  data = obj.stats;
}); 
```

# android - 使用 Ant 我如何 dex 一个 jar 目录？

> ID：13141575
> 
> 赞同：4
> 
> 时间：2012-10-30T14:50:05.600
> 
> 标签：android, ant

我有一个装满罐子（felix 包）的目录。我想遍历所有这些 jar 并创建 dex 版本。我的意图是将这些 dex'd jar 中的每一个部署为独立的 apk，因为它们是捆绑包。如果我从错误的方向接近这个问题，请随时纠正我。

第一部分只是尝试为每个 jar 文件创建一个对应的 .dex 文件。但是，当我运行此程序时，我收到来自 Ant 的“未指定资源”错误。

这是正确的方法，还是有一种更简单的方法来输入一个 jar 并输出该 jar 的 dex 版本？${file} 是有效的，因为它在 echo 命令中吐出文件的名称。

```
<target name="dexBundles" description="Run dex on all the bundles">
    <taskdef resource="net/sf/antcontrib/antlib.xml" classpath="${basedir}/libs/ant-contrib.jar" />
    <echo>Starting</echo>
    <for param="file">
        <path>
            <fileset dir="${pre.dex.dir}">
                <include name="**/*.jar" />
            </fileset>
        </path>
        <sequential>
            <echo message="@{file}" />
            <echo>Converting jar file @{file} into ${post.dex.dir}/@{file}.class...</echo>
              <apply executable="${dx}" failonerror="true" parallel="true" verbose="true">
                <arg value="--dex" />
                <arg value="--output=${post.dex.dir}/${file}.dex" />
                <arg path="@{file}" />
              </apply>
        </sequential>
    </for>
    <echo>Finished</echo>
</target> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T04:27:02.467

试一试：

```
 <target name="dexBundles" description="Run dex on all the bundles">
        <apply executable="${exec.dx}" dest="${post.dex.dir}/" parallel="false">
            <arg value="--dex"/>
            <arg value="--output="/>
            <targetfile/>
            <srcfile/>
            <fileset dir="${pre.dex.dir}" includes="**/*.jar"/>
            <mapper type="glob" from="*.jar" to="*.dex"/>
        </apply>
    </target> 
```

看起来[ant apply 任务](https://ant.apache.org/manual/Tasks/apply.html)允许您在不需要 ant-contrib 的情况下迭代文件集（特别是该页面有一个示例，它在目录中查找 *.c，编译它们，并将它们重命名为 *.o 在应直接适用的指定目录）。不幸的是，看起来您将失去回声消息提供的可追溯性。

作为记录，我相信错误消息实际上是由dx.bat而不是ant直接生成的，但我不确定，也不知道为什么。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T10:47:28.807

看[“Ant apply task”](http://ant.apache.org/manual/Tasks/apply.html)的文档，上面写着：“<strong>至少需要一个fileset或者filelist”</p>

所以，这行“没有指定资源”被打印出来通知你写一些文件集或文件列表.....

改用“执行”。

# android - 如何为形状可绘制渐变的中心设置绝对（不是％）位置？

> ID：13141589
> 
> 赞同：3
> 
> 时间：2012-10-30T14:51:00.390
> 
> 标签：android, android-layout, shapedrawable

我有一个可绘制的形状，里面有一个径向渐变。形状是一个矩形，我试图将径向渐变的中心定位在右下角附近。我可以使用将 centerX 和 centerY 属性设置为 0.98 之类的值在一般附近获得它，但我正在处理不同高度（相同宽度）的矩形，所以矩形越高，中心位置越高，相对到右下角。

[与文档](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html#attr_android%3acenterX)相反，似乎我只能将中心定位为视图宽度/高度的百分比。也就是说，即使值中没有“%”，它也被视为百分比。

我想做的是以某种方式说“将中心 5dp 放在右下角的左侧”。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:29:50.273

You might try use a [`Layer-List`](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList), there you can specify margins of overlaying layer items, which can be drawables.

# c# - 如何在 XNA 中制作精确的时钟？

> ID：13141590
> 
> 赞同：2
> 
> 时间：2012-10-30T14:51:01.860
> 
> 标签：c#, xna, clock

我正在制作 XNA 游戏，是时候制作日间系统了，为此我需要某种时钟。我尝试使用`GameTime.TotalGameTime.Milliseconds == 0`将一秒添加到我的自定义时钟类的第二个计数器，但事实证明 GameTime 并不总是运行零毫秒。使用`TimeSpan prevUpdate`to compare to`TotalGameTime.TotalSeconds`并不能提供足够的精度，而且时间明显比实际时间慢。

我可以使用什么 XNA 或 .Net 组件来作为时钟的基础，这样它就不会花费太多资源或明显偏离实时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:16:31.600

用于`Stopwatch`高精度计时（[参考](https://stackoverflow.com/a/2923349/165500)）。

使用 XNA`GameTime`进行渲染和帧到帧时序逻辑。XNA 的计时器与“挂钟”时间不完全匹配。它能够漂移以更好地与帧渲染对齐，为您提供更流畅的动画（这是由`Game`类提供的行为）。随着时间的推移，它会稍微偏离实时，但对于大多数游戏来说，这不是问题。

用于`DateTime`准确测量更长的时间跨度（例如：分钟、小时）。

* * *

请注意，您不应该比较`Milliseconds == 0`，因为您无法确切知道 XNA 何时会调用您的`Update`方法，因此您可以`Milliseconds == 999`在一个帧上，然后`Milliseconds == 15`在下一帧 - 环绕并跳过 0，因此您的条件永远不会触发。

因此，您需要确定计时器何时超过阈值。有很多方法可以做到这一点。您可以跟踪一个阈值（如果您正在跟踪一些“总”时间，这很有用），在每次触发后递增它。我个人更喜欢这样积累时间：

```
seconds += gameTime.ElapsedTime.TotalSeconds;
if(seconds > 1.0)
{
    seconds -= 1.0;
    DoSomething(); // Triggered each second
} 
```

# c# - 如何将sheet1中的数据移动到excel中的sheet2

> ID：13141593
> 
> 赞同：0
> 
> 时间：2012-10-30T14:51:07.867
> 
> 标签：c#, .net, excel, interop, excel-interop

我正在通过 c# 将内容写入 excel 文件。我在 excel 中有 4 列和许多行。当应用程序运行时，我需要检查 sheet1 中是否存在数据，然后将其移动到 sheet2。如果 sheet2 还包含数据，则应附加 sheet2 数据。我正在使用互操作 dll 来访问 excel。我已经完成了内容的编写，但是如何以编程方式移动它？这是我尝试过的。

```
 Excel.Workbook xlwb;
  Excel.Application excelApp = new Excel.Application();
  Excel.Worksheet xlssheet1;
  Excel.Worksheet xlssheet2; 
 xlwb = excelApp.Workbooks.Open(myPath, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing,
                                    objMissing, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing);
            int rowIndex = 2; int colIndex = 1;
            if (excelApp.Cells[rowIndex, colIndex] != null)
            {
                xlssheet1 = (Worksheet)xlwb.Worksheets[1];
                xlssheet2 = (Worksheet)xlwb.Worksheets[2];

                xlwb.Sheets.Move(System.Reflection.Missing.Value, xlssheet2);
                xlwb.Save();                

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:10:36.873

首先，我会定义一个函数来找出工作表中最后使用的行：

```
private int LastUsedRow(Excel.Worksheet aSheet)
{
    object hmissing = System.Reflection.Missing.Value;
    string usedAddress = aSheet.UsedRange.get_Address(hmissing, hmissing, Excel.XlReferenceStyle.xlA1, hmissing, hmissing);
    return int.Parse(usedAddress.Substring(usedAddress.LastIndexOf('$') + 1));
} 
```

然后您的代码可以通过这种方式将单元格从一个工作表迭代复制到另一个工作表：

```
Excel.Workbook xlwb;
Excel.Application excelApp = new Excel.Application();
Excel.Worksheet xlssheet1;
Excel.Worksheet xlssheet2; 
xlwb = excelApp.Workbooks.Open(myPath, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing, objMissing);
xlssheet1 = (Worksheet)xlwb.Worksheets[1];
xlssheet2 = (Worksheet)xlwb.Worksheets[2];
int lastRow1 = LastUsedRow(xlssheet1);
int lastRow2 = LastUsedRow(xlssheet2);
int curRow = lastRow2 + 1;
for (int i = 1; i <= lastRow1; i++)
{
    object toCopy = xlsheet1.getRange("A"+i, "D" + i).get_Value(null);
    xlsheet2.getRange("A"+curRow, "D" + curRow).set_Value(null, toCopy);
    curRow++;
}
xlwb.Save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:02:43.147

如果您找不到“移动”数据的方法，请手动移动它：

1.  将值复制到
2.  确保副本有效
3.  使原始单元格空白
4.  节省

# javascript - 为什么 Array.prototype.slice(arguments, 2) 而不是初始化为空数组？

> ID：13141594
> 
> 赞同：0
> 
> 时间：2012-10-30T14:51:09.537
> 
> 标签：javascript, fabricjs

我正在尝试通过阅读 Fabric.js 的源代码来学习 Javascript。

在文件`util/lang_array.js`中有一个看起来像这样的方法：

```
 var slice = Array.prototype.slice;

    function invoke(array, method) {
        var args = slice.call(arguments, 2), result = [ ];

        for (var i = 0, len = array.length; i < len; i++) {
            result[i] = args.length ? array[i][method].apply(array[i], args) : array[i][method].call(array[i]);
        }
        return result;
    } 
```

我不明白这个说法`var args = slice.call(arguments, 2)`。`2`令我困惑的特定部分是作为第二个参数传递（考虑`arguments`到应该是）。我查看了 JS 参考并得出结论，它基本上将 args 初始化为一个空数组。`[array, method]``arguments[2]``null`

那为什么不干脆`var args = []`呢？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:53:38.800

此行用于获取提供给函数的任何*额外参数。*

然后将这些额外的参数传递给`.apply`调用中的指定方法。

注意：JS 不*检查*函数的形参。省略的参数将是`undefined`，而额外的参数将（大部分）被忽略，但可通过`arguments`伪数组获得。

我不确定为什么代码会费心检查`args.length`是否调用`.apply`或`.call`- 它看起来像过早的优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:54:22.710

仅仅因为函数有两个参数并不意味着不能传入更多参数。在 Javascript 中，您可以传入任意数量的参数并通过`arguments`.

此外，这似乎是一个通用调用函数，旨在处理任何方法（第二个函数参数）调用，因此不同的函数可以有不同数量的参数（或没有参数）。

# linux - 用另一个文件中的字符串替换一个文件中的字符串的有效方法

> ID：13141599
> 
> 赞同：2
> 
> 时间：2012-10-30T14:51:14.713
> 
> 标签：linux, bash, unix, sed, awk

搜索了类似的问题，但找不到完全符合我需求的东西：

我有一个从多个网站抓取的非常大的 HTML 文件，我想替换所有

```
class="key->from 2nd file" 
```

和

```
style="xxxx" 
```

目前我使用`sed`- 它运行良好，但仅适用于小文件

> *而读键；做 sed -i "s/class=\"$key\"/style=\"xxxx\"/g" file_to_process; 完成<键*

当我试图处理更大的东西时，它需要很长时间

例子：

```
keys - Count: 1233 lines
file_to_ process - Count: 1946 lines 
```

只需要大约 40 秒即可完成我需要的 1/10 处理

```
real    0m40.901s
user    0m8.181s
sys     0m15.253s 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:11:10.800

未经测试，因为您没有提供任何示例输入和预期输出：

```
awk '
NR==FNR { keys = keys sep $0; sep = "|"; next }
{ gsub("class=\"(" keys ")\"","style=\"xxxx\"") }
1' keys file_to_process > tmp$$ &&
mv tmp$$ file_to_process 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:25:43.003

我认为是时候使用 Perl（未经测试）了：

```
my $keyfilename = 'somekeyfile'; // or pick up from script arguments
open KEYFILE, '<', $keyfilename or die("Could not open key file $keyfilename\n");
my %keys = map { $_ => 1 } <KEYFILE>; // construct a map for lookup speed
close KEYFILE;

my $htmlfilename = 'somehtmlfile'; // or pick up from script arguments
open HTMLFILE, '<', $htmlfilename or die("Could not open html file $htmlfilename\n");
my $newchunk = qq/class="xxxx"/;
for  my $line (<$htmlfile>) {
    my $newline = $line;
    while($line =~ m/(class="([^"]+)")/) {
        if(defined($keys{$2}) {
            $newline =~ s/$1/$newchunk/g;
        }
    }
    print $newline;
} 
```

这使用散列来查找键，这应该相当快，并且仅当行包含类语句时才在键本身上执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:11:13.457

首先将您的密钥文件转换为如下所示的 sed 或模式：`key1|key2|key3|...`. 这可以使用`tr`命令来完成。一旦你有了这个模式，你就可以在一个 sed 命令中使用它。

尝试以下操作：

```
sed -i -r  "s/class=\"($(tr '\n' '|' < keys | sed 's/|$//'))\"/style=\"xxxx\"/g" file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:05:48.187

这是一种使用方法`GNU awk`：

```
awk 'FNR==NR { array[$0]++; next } { for (i in array) { a = "class=\"" i "\""; gsub(a, "style=\"xxxx\"") } }1' keys.txt file.txt 
```

请注意，其中的键`keys.txt`被视为整行，包括空格。如果前导和滞后空白可能是一个问题，请使用`$1`而不是`$0`. 不幸的是，如果没有一些样本数据，我无法正确测试。HTH。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T15:05:45.697

尝试使用密钥文件中的所有子命令生成一个非常长的 sed 脚本，例如：

```
s/class=\"key1\"/style=\"xxxx\"/g; s/class=\"key2\"/style=\"xxxx\"/g ... 
```

并使用此文件。这样，您将只读取一次输入文件。

# c# - 下拉列表值

> ID：13141603
> 
> 赞同：0
> 
> 时间：2012-10-30T14:51:23.873
> 
> 标签：c#, asp.net-mvc, linq-to-entities

我为下拉列表填充了以下代码。有什么办法可以在下面添加一个名为“选择值”的项目

```
private void PopulateCustStatus()
{
     ViewData["custStatus"] = new HEntities().COptions
         .Select(e => new ConfOptModel
             {
                 OptID = e.OptID,
                 OptName = e.OptName,
                 ConfigTypeID = e.ConfigTypeID
             })
         .Where(e => e.ConfigTypeID == 2)
         .OrderBy(e => e.OpName);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:57:51.040

您正在返回一个`ConfOptModel`对象列表，因此除非有一个属性指示“选定”值，否则您不能。

如果我不专门为视图创建模型（即使用域对象作为“模型”而不是“视图模型”），我通常会将所选项目添加到视图状态：

```
ViewData["selectedCustStatus"] = selectedID; 
```

然后在标记中创建 DropDownList 时使用该值。

另一种选择是返回`SelectListItem`对象列表而不是域 ( `ConfOptModel`) 对象。这会在控制器中添加一些视图逻辑，因此请使用您更喜欢的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:21:56.500

我认为，您尝试做的问题在于您的“无选择”选项（例如“选择值”）与在`PopulateCustStatus()`.

您*可能*想使用`IEnumerable<SelectListItem>`：-

```
var selectList =
  new HEntities().COptions
    .Where(e => e.ConfigTypeID == 2)
    .OrderBy(e => e.OpName)
    .Select(e => new SelectListItem()
    {
      Text = e.OptName,
      Value = e.OptID,
      Selected = false 
    }); 
```

这为您提供了更多的灵活性。然后您可以在顶部插入一个“选择值”项，例如：-

```
var noSelection = new SelectListItem()
{
  Text = "Select value",
  Value = 0,
  Selected = true
};

ViewData["selectedCustStatus"] =
  new[] { noSelection }.Concat(selectList); 
```

注意：如果要保留先前选择的值，则必须将其传递给函数并确保匹配`SelectListItem`项将其`Selected`属性设置为`true`.

希望这可以帮助！

# css - Safari，iPad（假设iPhone）中li标记的奇怪缩进

> ID：13141604
> 
> 赞同：0
> 
> 时间：2012-10-30T14:51:24.117
> 
> 标签：css, html-lists

这是正在发生的事情的视觉效果，因为我不擅长用文字描述这一点：

![在此处输入图像描述](../Images/cffdc79fd226074ebd9db6e39033c91e.png)

您还可以通过单击[此处查看](http://www.freshmarketstores.com/departments/produce/produceGlossary.php)实际情况。

此外，当您单击其中一个食谱时，不会出现这种行为（该页面上也生成了相同的列表，具有相同的 css 样式），所以我很难过。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:03:54.830

列表上方的两个浮动元素导致了这种情况。您可以添加`clear: both`：

```
.recipeList {
    clear: both;
} 
```

# php - 如何在PHP中运行后台进程并获取返回值

> ID：13141605
> 
> 赞同：0
> 
> 时间：2012-10-30T14:51:25.313
> 
> 标签：php, bash, sh

> **可能重复：**
> [让 PHP 等待 Matlab 脚本完成执行](https://stackoverflow.com/questions/13127555/make-php-wait-for-matlab-script-to-finish-executing)

好的，从[php开始执行后台进程](https://stackoverflow.com/questions/45953/php-execute-a-background-process) 运行后台进程效果很好。问题是，我也需要返回那个过程。对我来说明显的解决方案是：

```
$cmd = "($cmd > $outputfile 2>&1 || echo $? > $returnfile) & echo $! > $pidfile";
exec($cmd); 
```

当我在命令行上运行生成的命令时，它的背景和文件按预期填写。问题是当 php exec() 运行时，命令不会进入后台（至少， exec 在命令完成之前不会返回）。我尝试了 nohup 的变体并等待 $pid，但仍然没有解决方案。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:01:15.270

这很棘手 - 您可能会分叉该流程来做其他事情，而将原始流程留在原处。

[http://php.net/manual/en/function.pcntl-fork.php](http://php.net/manual/en/function.pcntl-fork.php)

但是，如果这是一个 Web 应用程序，则没有内置方法可以将返回代码或 STDOUT 检索回父进程，因为它在技术上是异步的（您的请求-响应周期可能会在产生结果之前结束）。

不过，您可以将返回码和/或 STDOUT 存储到文件中以便稍后检查。

# ios - 有没有办法使用 NSPredicate 使用 CoreData 中点之间的距离计算来过滤对象

> ID：13141615
> 
> 赞同：2
> 
> 时间：2012-10-30T14:51:41.330
> 
> 标签：ios, core-data, nspredicate

例如，我有带有 x 和 y 双值的 NSManagedObject。我想获取距离提供的点有一定距离的点列表。我尝试使用下一个谓词：

[NSPredicate predicateWithFormat:@"(x-%f) *(x-%f)-(y-%f)* (y-%f) <= %f", point.x, point.x, point.y, point .y, 25*25] 。但由于某种原因它不起作用:((。

在我的实验中，我发现像 (x-1)*2-x >= 0 这样的谓词返回 0 个对象，即使 x 大于 1，并且 (x+1)*2-x >= 0 返回所有对象。所以我怀疑不支持谓词中的计算，但在我查看的任何地方都没有关于它的信息

# javascript - 如何仅使用 Javascript/jQuery 上传文件？

> ID：13141619
> 
> 赞同：-4
> 
> 时间：2012-10-30T14:51:52.017
> 
> 标签：javascript, jquery, file-upload

我想知道如何使用 Javascript 或 jQuery 上传文件。

但不要使用像php这样的服务器端脚本。

如果您有一些解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T14:54:03.040

如果您的意思是正常的 HTTP 文件上传：那是不可能的。要将文件上传到服务器，您需要一种服务器端语言来处理上传并将文件存储在其文件系统中。

据我所知，在 JavaScript 中没有像 FTP 这样的文件传输协议的实现，它允许您在没有服务器端“语言”的情况下执行此操作（即使服务当然必须运行）。

理论上，也可以仅使用 JavaScript 将文件发送到某些 API，但为此，您必须拥有 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:55:24.537

您将需要某种服务器端逻辑来处理文件的接收（否则服务器将不知道如何处理它）。

这是一个演示，包括如何使用 jQuery 在浏览器中实现“上传”逻辑的[源代码。](http://blueimp.github.com/jQuery-File-Upload/)

# websocket - 浏览器不发送任何数据（无错误）

> ID：13141620
> 
> 赞同：1
> 
> 时间：2012-10-30T14:51:53.223
> 
> 标签：websocket, faye, bayeux

所以我有一个faye 服务器和一个rails web 应用程序。直到最近一切都很好。现在浏览器没有向服务器发送任何内容。服务器上没有错误，即使在浏览器中也没有（我可以创建 Faye.Client 的实例就好了）。但是当我发布时，服务器一无所获。它甚至没有在元频道上得到任何东西，比如连接或订阅。问题是，如果我用 curl 发送一些东西，服务器会显示消息（因为我正在记录它）。

我无法确定问题所在。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:11:24.637

确保正在访问发送消息的代码。确保您的客户仍然有效。测试早期的代码版本等。只是一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:47:05.967

解决了这个问题。faye 连接的 url 不正常，但是由于 url 响应，faye 静默失败。：/

# android - 位图运行时异常中的内存不足错误

> ID：13141622
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:51:57.570
> 
> 标签：android, bitmap, bitmapimage, bitmapfactory

我正在显示来自assets/image 文件夹的图像，但此代码不起作用。此代码显示画廊中资产文件夹中的图像。我正在使用画廊预定义库或 jar 文件。

请专家检查一下。感谢你

```
AssetManager assetManager = getAssets();
    String[] files = null;
    try {
        files = assetManager.list("image");
    } catch (IOException e) {
        Log.e("tag", e.getMessage());
    }

    for(String filename : files) {
        System.out.println("File name => "+filename);
        InputStream in = null;
        try {
            ImageViewTouch imageView = new ImageViewTouch(Rahul.this); 
            imageView.setLayoutParams(new Gallery.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
          final Options options = new Options();
            options.outHeight = (int) scaleHeight; 
            options.outWidth = (int) scaleWidth;   
            options.inScaled = true;
            options.inPurgeable = true;
            options.inSampleSize = 2;
           in = assetManager.open("image/"+filename); 
           Bitmap bit=BitmapFactory.decodeStream(in);

          imageView.setImageBitmap(bit);

              } catch(Exception e) {
            Log.e("tag", e.getMessage());
        }
    }
    gallery.setAdapter(arrayAdapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:16:23.270

嘿，请检查我对同一问题的回答：[位图大小超出 Vm 预算错误 android](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android/10738115#10738115)

在处理这样的位图时，也总是尝试使用最大选项：

```
 final Options options = new Options();
    options.outHeight = (int) scaleHeight; // new smaller height
    options.outWidth = (int) scaleWidth;   // new smaller width
    options.inScaled = true;
    options.inPurgeable = true;

    // to scale the image to 1/8
    options.inSampleSize = 8;
    bitmap = BitmapFactory.decodeFile(imagePath, options); 
```

这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:56:26.887

`bitmap.recycle();`1）在为图像设置新位图之前尝试使用释放内存

```
BitmapDrawable drawable = (BitmapDrawable) myImage.getDrawable();
Bitmap bitmap = drawable.getBitmap();
if (bitmap != null)
{
    bitmap.recycle();
} 
```

2）如果您的图像太大，请缩小它们：

```
public static Bitmap decodeFile(File file, int requiredSize) {
        try {

            // Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(file), null, o);

            // The new size we want to scale to

            // Find the correct scale value. It should be the power of 2.
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            while (true) {
                if (width_tmp / 2 < requiredSize
                        || height_tmp / 2 < requiredSize)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale *= 2;
            }

            // Decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;

            Bitmap bmp = BitmapFactory.decodeStream(new FileInputStream(file),
                    null, o2);

            return bmp;

        } catch (FileNotFoundException e) {
        } finally {
        }
        return null;
    } 
```

**更新**

像这样的东西：

```
for(int i=0; i<it.size();i++) { 
    ImageViewTouch imageView = new ImageViewTouch(GalleryTouchTestActivity.this); 
    imageView.setLayoutParams(new Gallery.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
    Options options = new Options(); 
    options.inSampleSize = 2;
    String photoURL = it.get(i);

    BitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();
    Bitmap bitmap = drawable.getBitmap();
    if (bitmap != null)
    {
       bitmap.recycle();
    }

    bitmap = BitmapFactory.decodeFile(photoURL);

    imageView.setImageBitmap(bitmap); 
    arrayAdapter.add(imageView);
} 
```

# asp.net - 在 IIS7 上设置虚拟目录

> ID：13141624
> 
> 赞同：4
> 
> 时间：2012-10-30T14:52:05.040
> 
> 标签：asp.net, iis-7, configuration, path, virtual-directory

我正在设置我们的服务器，以便我们可以在其上安装一个 ASP.Net Web 应用程序。

我右键单击 IIS7 管理器中的站点并选择添加虚拟目录，然后单击测试设置按钮，显示以下消息：

```
The server is configured to use pass-through authentication with a built-in 
account to access the specified physical path. However, IIS Manager cannot 
verify whether the built-in account has access. Make sure that the application 
pool identity has Read access to the physical path. If this server is joined to 
a domain, and the application pool identity is NetworkService or LocalSystem, 
verify that <domain>\<computer_name>$ has Read access to the physical path. 
Then test these settings again. 
```

该消息没有告诉我们如何做这些事情。

我正在设置的服务器上安装了 Windows7 Home Premium。计算机设置为所有默认设置，并具有计算机名称，例如 MyComputer-PC（不是真实名称）。没有设置域。

你能告诉我们如何做消息中描述的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:18:16.590

1) 转到 IIS，单击包含您的虚拟目录的 IIS 条目。右键单击基本设置以查看它正在使用哪个应用程序池。

2) 转到 IIS，转到应用程序池。右键单击您的应用程序池并检查高级设置 -> 身份属性以找出它正在使用的用户。

3) Go to the folder that your IIS Entry maps to, make sure that user is added to this directory. If you want to give it write permission, give it write. Otherwise, make give it read & execute is fine.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:12:21.903

该信息非常清楚需要做什么。转到 IIS 的应用程序池部分并打开默认应用程序池的高级设置。检查 Identity 属性中指定的用户名。

转到您物理存储虚拟目录的位置，然后转到文件夹属性 -> 安全性。确保用户具有适当的访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:09:51.577

基本上，如果您不打算将文件写入站点目录，则可以忽略此消息。

此消息意味着 IIS 无法检查它的系统 Windows 帐户是否对您的站点文件夹具有足够的权限。

# c++ - 模板交友语法

> ID：13141629
> 
> 赞同：8
> 
> 时间：2012-10-30T14:52:36.500
> 
> 标签：c++, templates

假设我有两个模板类。

```
template<class T>
class baseclass1
{
    template<class> friend class baseclass2;
}

template<class D>
class baseclass2
{
     template<class T> void foo( D& x, T& y)
     {
          ...
     }
} 
```

上面的代码允许所有类型的 baseclass1 与所有类型的`baseclass2`、多对多的关系成为朋友。我有两个问题，

允许 baseclass1 仅与函数为友的语法是什么

```
baseclass2<class D>::foo<class T>( D& x, T& y). 
```

而且，允许`baseclass1`只与函数为友的语法是什么

`baseclass2<class D>::foo<class T>( D& x, T& y)`where `T`from`baseclass1`匹配`T`from Function `foo`。

**编辑**

对于那些一直声称你不能成为模板专业化的朋友的人。此代码有效

```
template<class cake>
class foo
{
    public:
        static void bar(cake x)
        {
            cout << x.x;
        }
};

class pie
{
    public:
        void set( int y){ x = y; }
    private:
        int x;

        friend void foo<pie>::bar(pie x);
};

class muffin
{
    public:
        void set( int y){ x = y; }
    private:
        int x;

    friend void foo<pie>::bar(pie x);
};

int main
{
        pie x;
        x.set(5);
        foo<pie>::bar(x);

        muffin y;
        y.set(5);
        //foo<muffin>::foo(y); //Causes a compilation Error because I only friended the pie specialization
} 
```

甚至注意到 muffin 朋友在哪里错误的 foo，仍然会导致编译错误。这适用于函数和类。我完全愿意接受在我的具体情况下这是不可能的（实际上看起来越来越多）我只是想了解原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:26:40.850

结交所有可能的专业`baseclass2<D>::foo`是相当容易的：

```
template<class T> class baseclass1;

template<class D>
class baseclass2{
public:
  template<class T>
  void foo(D&, T&){ baseclass1<T> x; x.priv_foo(); }
};

template<class T>
class baseclass1{
  template<class D>
  template<class U>
  friend void baseclass2<D>::foo(D&, U&);

  void priv_foo(){}
};

template<class T>
class baseclass1{
  template<class D>
  template<class U>
  friend void baseclass2<D>::foo(D&, U&);
}; 
```

[活生生的例子。](http://liveworkspace.org/code/31bae145ccdf8bf501bd5c3ea5d9d52e)

一个前向声明`baseclass2`（所以`baseclass1`知道`baseclass2`存在并且是一个模板）和两个模板，一个用于类，一个用于函数。对于类模板的函数模板的类外定义，它也看起来像这样。:)

但是，不可能专门交友`baseclass2<D>::foo<T>`，或者我找不到正确的语法。

一种解决方法可能是一些全局函数，它可以转发访问并与[密码模式](https://stackoverflow.com/q/3324898/500104)一起转发，但是，它是一团糟（恕我直言）：

```
template<class D> class baseclass2;

template<class D, class T>
void baseclass2_foo(baseclass2<D>& b, D&, T&);

template<class D, class T>
class baseclass2_foo_key{
  baseclass2_foo_key(){} // private ctor
  friend void baseclass2_foo<>(baseclass2<D>&, D&, T&);
};

template<class T>
class baseclass1{
public: // public access, but only baseclass2_foo can create the key
  template<class D>
  void priv_foo(baseclass2_foo_key<D, T> const&){}
};

template<class D, class T>
void baseclass2_foo(baseclass2<D>&, D&, T&){
  baseclass1<T> x;
  x.priv_foo(baseclass2_foo_key<D, T>());
}

template<class D>
class baseclass2{
public:
  template<class T>
  void foo(D& d, T& t){ baseclass2_foo(*this, d, t); }
}; 
```

[活生生的例子。](http://liveworkspace.org/code/969ab87c0a11148c2013ca1419069043)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:17:37.170

AFAIK，您可以将所有实例指定`foo`为朋友，但不能指定特定实例：

```
template< class T >
class C1 {
public:
    template< class Q > void foo( T& x, Q& y ) {
    }
};
template< class T >
class C2 {
    template< class Y > 
    template< class Q > friend void C1<Y>::foo( Y&, Q& );
}; 
```

# graph - 寻找最短周期

> ID：13141631
> 
> 赞同：0
> 
> 时间：2012-10-30T14:52:41.643
> 
> 标签：graph, cycle, dijkstra

基本上，我需要在图中有一条最短路径，覆盖所有顶点并返回源。任何顶点的重复都是可以的，只要它是最短路径。

我的算法从源头开始。我运行 dijkstra 算法来找到最短路径。然后我选择最小的加权未到达顶点并再次运行 dijkstra 作为所选顶点作为源并继续执行直到所有顶点完成。然后从最后一个顶点再次使用 dijkstra 找到返回原始源的最短路径。

我试过了，但似乎失败了，我找不到原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-22T09:50:57.073

谷歌旅行商问题，找到从源头开始覆盖所有顶点的最短循环。旅行商的代码也不难实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:31:54.500

因为任何顶点都可以被更多地访问，一旦你基本上在图中寻找最短的封闭步行。您的方法的问题是 dikstra 只会找到从所选节点返回源的最短路径。这将产生一个星型解决方案，其中您有多个从源顶点出来的路径。这*可能*比步行更长。

正如文森特所说，这是一个 NP 问题，但您可以尝试使用随机游走算法来实现它。或查看旅行推销员步行问题 (http://dspace.mit.edu/handle/1721.1/33668)

# java - 存储在请求范围内 - 从 SOAPHandler 到 @Producer

> ID：13141634
> 
> 赞同：1
> 
> 时间：2012-10-30T14:52:50.860
> 
> 标签：java, web-services, jakarta-ee, jax-ws, cdi

我需要在运行时根据soap 标头的内容将EntityManagers 动态分配给我的bean。我的计划是使用 SOAPHandler 从标头中提取信息，然后将其存储在请求范围内。我有一个方法@Producer，我设想访问这个请求范围，检查存储的变量，并返回适当的实体管理器。

（EntityManager 指的是具有相同结构但数据不同的不同数据库）。

**我**的问题是：如何访问请求上下文以存储名称（在 SOAPHandler 端），然后再次检索请求上下文以检索名称？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:32:31.263

回答我自己的问题：

粘贴在SOAPMessageContext中，如下：

> context.put("VARIABLE_KEY", 不管IWantObject );
> 
> context.setScope("VARIABLE_KEY", Scope.APPLICATION);

（Scope.APPLICATION 很重要）。

然后在服务层中，您可以从 Web 服务上下文中获取消息上下文，您可以将其注入；然后消息上下文将包含您的对象：

> @Resource WebServiceContext webContext;
> 
> ObjectType theObject = (ObjectType) webContext.getMessageContext().get("VARIABLE_KEY");

# oracle11g - 当我的数据大小超过我的表列大小时会发生什么？

> ID：13141638
> 
> 赞同：-3
> 
> 时间：2012-10-30T14:53:14.337
> 
> 标签：oracle11g, size

我正在使用 oracle 数据库。我有一些基本的疑问，我创建了一个带有列注释 VARCHAR2(2000 BYTE) 的表。如果我尝试插入一个具有 2500 字节的值会发生什么？无论

```
1\. It will throw an exception(please give me exception details).
2\. It will truncate the 500 bytes data. and insert only first 2000 bytes.
3\. Internally it will increases it size and insert entire data. 
```

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:57:12.053

1.  ORA-12899: 值对于列来说太大。

# vba - 转置 CopyFromRecordset Excel VBA

> ID：13141639
> 
> 赞同：5
> 
> 时间：2012-10-30T14:53:17.777
> 
> 标签：vba, excel

我的 Excel VBA 中有以下代码，可将 SQL 表中的数据复制到 Excel 中。此数据从单元格 C2 开始水平插入，但我希望它垂直插入 C 列。

```
Sheets("Control").Range("C2").CopyFromRecorset rsPubs 
```

`rsPubs`我的 ADO 连接在哪里。

基本上，我只想转置这些数据。这样做的有效方法是什么？

这就是`rsPubs`创建方式（连接工作正常，因为我实际上正在获取数据）：

```
' Create a recordset object.
Dim rsPubs As ADODB.Recordset
Set rsPubs = New ADODB.Recordset

With rsPubs
    ' Assign the Connection object.
    .ActiveConnection = cnPubs
    ' Extract the required records.
    .Open "SELECT * FROM Analytics.dbo.XBodoffFinalAllocation"
    ' Copy the records into cell B3 on Sheet1.
    Sheets("Control").Range("C2").CopyFromRecordset rsPubs
    ' Tidy up
    .Close
End With

cnPubs.Close
Set rsPubs = Nothing
Set cnPubs = Nothing 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:23:52.973

我目前无法对此进行测试，但您可以：

```
Sheets("Control").Range("C2").CopyFromRecorset rsPubs 'copy your data
Sheets("Control").Range("C2").Copy 'copy the data into clipboard
Sheets("Control").Range("C2").PasteSpecial xlPasteValues, xlPasteSpecialOperationNone, True, True 
```

您也可以使用转置工作表功能 - 但是，我现在还没有看到直接执行此操作的方法，希望您的输入数据已经转置。

这是一个很好的官方示例和有关此主题的更多信息：*[How to transfer data from an ADO Recordset to Excel with automation](http://support.microsoft.com/kb/246335/en-us)*

特别是“使用 GetRows”部分。

这应该这样做：

```
Dim resultset As Variant
Dim result As Variant
resultset = rsPubs.GetRows
result = Application.WorksheetFunction.Transpose(resultset)
Sheets("Control").Range("C2").Resize(UBound(result, 1), UBound(result, 2)) = result 
```

[http://www.teachexcel.com/excel-help/excel-how-to.php?i=147811](http://www.teachexcel.com/excel-help/excel-how-to.php?i=147811)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-23T16:46:07.117

已接受答案中的编辑 2 对我不起作用，但以下内容对我有用（请参阅[http://www.mrexcel.com/forum/excel-questions/513845-copyfromrecordset-transpose.html](http://www.mrexcel.com/forum/excel-questions/513845-copyfromrecordset-transpose.html)了解我的来源）：

```
Public Sub PlaceTransposedResults(oResults As ADODB.Recordset, rTarget As Range)
Dim vTransposed As Variant

If Not oResults.EOF Then
    vTransposed = oResults.GetRows
    rTarget.Resize(UBound(vTransposed, 1) + 1, UBound(vTransposed, 2) + 1) = vTransposed
End If
End Sub 
```

（这假设您没有使用 the 更改数组基数，`OPTION BASE`并且您的 Excel 版本具有`Range.Resize`并且 oResults 永远不会什么都不是）

对此的一个调整是使它成为一个函数并返回正确大小的范围 - 如果您想调整命名范围以覆盖结果集，这很有用。

另一个可能的调整是，您可能希望有选择地允许用户要求将字段名称添加为第一列中的 。我发现没有比这更好的了：

```
Dim ix As Integer
For ix = 0 To oResults.Fields.Count - 1
    rTarget.Offset(ix, 0) = oResults.Fields(ix).Name
Next ix 
```

（当然，在这种情况下，您必须将主要结果偏移 1 列）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:45:35.020

未经测试：

```
Sub CopyTransposed(rng As Range, rs As ADODB.Recordset)
    Dim x As Long, y As Long
    x = 0
    Do While Not rs.EOF
        For y = 0 To rs.Fields.Count - 1
            rng.Offset(y, x).Value = rs.Fields(y).Value
        Next y
        x = x + 1
        rs.MoveNext
    Loop
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-03T19:57:10.603

这真的很简单。它使用 Excel 的内置转置。可以在单个语句中转置。不需要循环。经过测试和验证。

```
Dim vRecs, vRecsX
vRecs = rsPubs.GetRows
vRecsX = Application.Transpose(vRecs)
Sheets("Control").Range("C2").Resize(rsPubs.RecordCount, rsPubs.Fields.Count) = vRecsX 
```

此代码直接从一个工作示例中复制而来。

请注意，由于这是一个工作表函数，因此预计它只能处理大小不超过工作表列数的数组。我相信每张表格的列数在不同版本的 Excel 之间有所不同，因此可以根据您的 Excel 版本确定转置限制。

“在现代版本的 Excel 中，这是 XFD 列，有 16,384 列。在旧版本的 Excel（2003 及更早版本）中，最后一列是 IV，即 256 列。” [https://officemastery.com/_how-many-rows-and-columns-in-excel/](https://officemastery.com/_how-many-rows-and-columns-in-excel/)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-31T03:26:33.430

我的建议是根本不要使用 VBA。Microsoft 已经为您提供了从数据库导入数据的工具。

```
Data -> Import External Data 
```

然后，它将在工作表内创建一个 QueryTable，您可以在其中定期右键单击并刷新。另一个好处是您不会收到讨厌的宏警告。QueryTable 可以是表、查询或存储过程。

试试看！

# asp.net-mvc-3 - 如何在 Asp.net MVC 中获取 viewbag 数据？

> ID：13141645
> 
> 赞同：0
> 
> 时间：2012-10-30T14:53:26.163
> 
> 标签：asp.net-mvc-3

如何获取 viewbag 数据，我创建了一个控制器，该控制器从数据库中获取数据并尝试在视图中显示数据，但它不显示数据。

```
 public ActionResult Show()
    {
        List<Models.Employees> lst = new List<Models.Employees>();
        Models.Employees obj = new Models.Employees();
        DataSet ds =new Models.BL.InsertBL().GetShow(obj);
        lst = (from DataRow drw in ds.Tables[0].Rows
               select new Models.Employees
               {
                   Enames = drw["Ename"].ToString(),
                   DepartId =Convert .ToInt32(drw["Departmentid"]),
                   EmailIds = drw["Emailid"].ToString(),
                   Adress = drw["Address"].ToString()
               }).ToList();
        ViewBag.Sasi = lst; 
        return View();
    }

   @{
    ViewBag.Title = "Show";
     Layout = "~/Views/Shared/VideoLayout.cshtml"; 
      var vv = ViewBag.Sasi;    
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:03:22.787

在这种情况下，我建议您使用强类型视图：

```
return View(lst); 
```

在视图中：

```
@model List<Models.Employees> 
```

你的问题，试试这个：

```
(List<Models.Employees>)ViewBag.Sasi 
```

# java - 使用Java模糊图像？

> ID：13141648
> 
> 赞同：0
> 
> 时间：2012-10-30T14:53:31.640
> 
> 标签：java, image

我想模糊一张照片，然后慢慢让它聚焦。

我想用java来做，有没有开源可以做到这一点？

我发现了一些模糊图片的开源代码，但没有一个相反的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:55:41.007

阅读（或谷歌）**卷积过滤器**- 它基本上是一种根据周围像素值更改像素值的方法。因此，除了模糊之外，您还可以进行图像锐化、寻线等操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:57:05.080

Java FX 2 有一些方法可以应用模糊效果 - 例如，请参阅[本教程](http://docs.oracle.com/javafx/2/visual_effects/blur.htm)。该示例可以适应模糊图像而不是文本。

您可以模糊您的图像，然后逐渐“取消模糊”它以使其看起来更集中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-24T19:44:21.457

我为你写了一个小代码：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Blur 
{

    static BufferedImage img;

    public static void main(String a[]) throws IOException
    {
        img = ImageIO.read(new File("res/image.png"));

        JFrame f = new JFrame("blur");

        f.setSize(img.getWidth() * 2, img.getHeight());
        f.setResizable(false);
        f.setLocationRelativeTo(null);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setIconImage(img);

        JPanel panel = new JPanel() {
            protected void paintComponent(Graphics g)
            {
                super.paintComponent(g);
                g.drawImage(img, 0, 0, null);
                g.drawImage(blur(10, 69), img.getWidth(), 0, null);
            }
        };
        f.add(panel);
        f.setVisible(true);

    }

    private static int clamp(int var, int min, int max)
    {
        if(var <= min) return min;
        else if(var >= max) return max;
        else return var;
    }

    public static BufferedImage blur(int range, int angle)
    {
        BufferedImage b = new BufferedImage(img.getWidth() * 2, img.getHeight(), BufferedImage.TYPE_INT_RGB);
        Graphics2D g = b.createGraphics();

        for(int x = 0; x < img.getWidth(); x++)
        {
            for(int y = 0; y < img.getHeight(); y++)
            {

                //horizontal

                int red[] = new int[range * 2], green[] = new int[range * 2], blue[] = new int[range * 2];
                int pixels[] = new int[range * 2];

                for(int i = 0; i < pixels.length; i++)
                {
                    pixels[i] = img.getRGB(clamp(x - clamp(range / 2, 0, range) + i, 0, img.getWidth() - 1), clamp(y - clamp(range / 2, 0, range) + (int)(i * Math.toRadians(angle)), 0, img.getHeight() - 1));

                    red[i] = (pixels[i] >> 16) & 0xff;
                    green[i] = (pixels[i] >> 8) & 0xff;
                    blue[i] = (pixels[i]) & 0xff;
                }

                int red_t = 0, green_t = 0, blue_t = 0;

                for(int i = 0; i < pixels.length; i++)
                {
                    red_t += red[i];
                    green_t += green[i];
                    blue_t += blue[i];
                }

                int r = red_t / (range * 2);
                int gr = green_t / (range * 2);
                int bl = blue_t / (range * 2);

                //System.out.println(r + ", " + gr + ", " + bl);

                g.setColor(new Color(r, gr, bl));
                g.fillRect(x, y, 1, 1);

            }
        }
        g.dispose();

        return b;
    }

} 
```

正如您可能已经猜到的那样，最重要的部分是`public static BufferedImage blur(int range, int angle)`方法。大多数代码仅用于在 JFrame 中显示图像，但如果您只是复制该方法，它也应该可以工作。您需要对`img`tho 的引用，但您可以像我一样在变量中创建它。如果您想了解有关代码如何工作的更多信息，或者如果您有任何问题，请问我。这是线性模糊，最常见的模糊是高斯模糊。如果需要，只需将、 和`pixels`变量`red`设为二维数组。仅此代码的最终结果应如下所示 [：](https://i.stack.imgur.com/uc1UD.png)`green``blue`

# java - 用于检索标签 UID 的 Mifare Classic 1k APDU 命令

> ID：13141649
> 
> 赞同：1
> 
> 时间：2012-10-30T14:53:35.447
> 
> 标签：java, nfc, mifare, apdu

正如标题所说；是否有用于检索标签 UID 的 APDU 命令？我正在使用带有 ACR122-u 读卡器和`javax.smartcardio.*`软件包的 Java，我想从扫描仪上的标签中获取 UID。smartcardio 库可以发送 CommandAPDU，但我需要弄清楚要发送什么 APDU。谷歌在这方面对我不是很友好，为我提供了成千上万的某种无用的数据表......

任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-28T08:12:11.330

迟到总比没有好，但实际上有一个 APDU 来检索 UID：(byte) 0xFF, (byte) 0xCA, (byte) 0x00, (byte) 0x00, (byte) 0x00

FF CA 00 00 00

在 Java 中：`byte[] getuid = new byte[] { (byte) 0xFF, (byte) 0xCA, (byte) 0x00, (byte) 0x00, (byte) 0x00 };`

如果您发送此 APDU，则响应数据将只是卡的 UID :) （比拥有更多信息并且必须设置偏移量来获取您需要的信息要容易得多......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T11:03:04.973

读取 UID 的 APDU 命令是

```
byte[] baReadUID = new byte[5];

    baReadUID = new byte[] { (byte) 0xFF, (byte) 0xCA, (byte) 0x00,
            (byte) 0x00, (byte) 0x00 }; 
```

[所有完整代码都在这里....](https://stackoverflow.com/a/26052363/3073945)

# jquery - 简单的 jQuery 在 cakephp 中不起作用

> ID：13141650
> 
> 赞同：2
> 
> 时间：2012-10-30T14:53:35.680
> 
> 标签：jquery, html, cakephp

我的简单 jQuery 对话框不适用于 cakephp。

我的默认 ctp 是：

```
<head>
<?php echo $this->Html->charset(); ?>
<title>
    <?php echo $cakeDescription ?>:
    <?php echo $title_for_layout; ?>
</title>

<?php
    echo $this->Html->meta('icon');

    echo $this->Html->css('cake.generic');

    echo $this->Html->script('http://code.jquery.com/jquery-1.8.2.js');
    echo $this->Html->script('test');
    echo $this->fetch('meta');
    echo $this->fetch('css');
    echo $this->fetch('script');
?></head> 
```

输出如下：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script><script type="text/javascript" src="/cake/js/test.js"></script> 
```

test.js 已经在“js”文件夹中：

```
$(function() {
    $( "#dialog" ).dialog();
}); 
```

和 paginateste.ctp

```
<div id="dialog" title="Basic dialog">
<p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p></div> 
```

有人能帮我吗？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:57:13.377

请记住包括适用的`jquery-ui.js`和`jquery-ui.css`！

[在这里](http://jsfiddle.net/SP8vM/2/)工作小提琴：

# facebook - 将 facebook autentication 重定向到服务器然后应用

> ID：13141655
> 
> 赞同：1
> 
> 时间：2012-10-30T14:53:46.863
> 
> 标签：facebook, cordova, jquery-mobile

我正在尝试在我的移动应用程序中使用 facebook 开发服务器端登录。

该应用程序使用 jQuery mobile 开发，并使用 Phonegap 构建。

服务器端在python中。

现在我需要登录的结构是这样的：

```
 app -> myServer -> Facebook -> myServer -> app 
```

我的问题是：如何从我的服务器重定向到我的应用程序？

我不能使用 facebook 重定向，因为它转到我的服务器，而不是我的应用程序。那时我“卡”在我的服务器上，我想回到我的应用程序。

我尝试使用 document.URL 从我的应用程序中获取当前 url，但是当我尝试从服务器访问它时，我收到此错误：

```
you do not have permission to open this page file:///android_asset/www/index.html 
```

感谢任何可以/将回答的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:14:22.867

使用 childbrowser 插件解决。

在phonegap构建中

[https://build.phonegap.com/docs/plugins](https://build.phonegap.com/docs/plugins)

# sitefinity - Sitefinity：需要在非常具体的 URL 上提供 PDF，但不能这样做

> ID：13141660
> 
> 赞同：0
> 
> 时间：2012-10-30T14:54:19.100
> 
> 标签：sitefinity, sitefinity-4

我在 SiteFinity 4.4 上有一个网站。我需要在一个非常具体的 URL 上提供一个文档，即

http:www.example.com/reports/the-report.pdf

如果我只是在站点的根目录中创建一个目录，它就不起作用（503 错误）。此外，当我尝试使用 302Redirect.xml 文件将 URL 重定向到 PDF 时，它也不起作用（同样的错误）。该链接已经发布，并且必须与指定的完全相同。我该如何解决这个问题？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:15:45.137

Sitefinity 不会阻止文件夹。添加一个物理文件夹并将该报告放在适当的位置应该可以正常工作，因此这可能意味着您必须检查您的服务器配置。

无论如何，在 Sitefinity 之外最快的方法就是创建一个 IIS 重写规则。使 http://www.example.com/reports/the-report.pdf 成为模式并将它们重定向到来自 sitefinity 库的文档的 url。

当您将文档上传到 sitefinity 中的库时，它会为您提供一个直接 url，例如 /docs/defaultlibrary/document。您可以通过转到内容 >> 文档和文件并选择嵌入此文件的链接来验证 url。这会给你一个带有 url 的弹出窗口。

# c# - 如何解析删除字符的文本

> ID：13141663
> 
> 赞同：0
> 
> 时间：2012-10-30T14:54:30.990
> 
> 标签：c#, winforms

让我们从我有一个 txtProbe(textbox) 开始，我有 12-34-56-78-90。我想在不同的标签或文本框中解析它们......现在只在一个文本框中 - txtParse。我尝试使用该代码 - 我正在删除“-”，然后尝试显示它们但没有任何反应：

```
{
        char[] delemiterChars = { '-' };
        string text = txtProbe.Text;
        string[] words = text.Split(delemiterChars);
        txtParse.Text = text;
        foreach (string s in words)
        {
            txtParse.Text = s;
        }
    } 
```

**编辑：** 我想在不同的标签中设置接收到的信息：
12-label1
34-label2
56-label3
78-label4
90-label5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:56:26.250

你可以使用`String.Replace`：

```
txtParse.Text = txtProbe.Text.Replace("-", " "); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:56:35.753

以下将更“语义”地做到这一点：

```
var parsed = text.Replace("-", " "); 
```

*`Page Life Cycle`关于为什么在服务器控件中看不到解析值的原因，您可能在（在 Web 窗体的情况下）更改值过早。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:56:42.837

您可以根据需要使用`String.Join`来加入字符串集合。在你的情况下：

```
txtParse.Text = String.Join(" ", words); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T14:57:17.933

对于您的特定示例，您似乎可以将其替换`'-'`为`' '`.

```
txtParse.Text = txtProbe.Text.Replace('-', ' '); 
```

但是为了使用空格分隔符连接一个字符串数组，你可以使用这个

```
txtParse.Text = string.Join(" ", words); 
```

您的逻辑不适用于您要完成的任务，而仅用于学习目的，我将编写您的代码段的正确版本

```
string separator = string.Empty; // starts empty so doesn't apply for first element
foreach (string s in words)
{
    txtParse.Text += separator + s; // You need to use += operator to append content
    separator = " "; // from second element will append " "
} 
```

**编辑**

这是针对使用不同标签的情况

```
Label[] labelList = new Label[] {label1, label2, label3, label4, label5};
for (int i = 0; i < words.Length; i++)
{ 
    labelList[i].Text = words[i];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T14:57:31.697

您可以直接在 .split('-') 中使用分隔符来返回表示所需数据的字符串数组。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-30T14:58:50.147

您的问题是您一直分配`s`给该`Text`属性。最终结果将是`s`您数组中的最后一个。

你可以`TextBox.AppendText()`改用。

```
 char[] delemiterChars = { '-' };
    string text = txtProbe.Text;
    string[] words = text.Split(delemiterChars);
    txtParse.Text = text;
    foreach (string s in words)
    {
        txtParse.AppendText(s + " ");
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T14:57:49.523

你可以把`txtParse.Text = txtProbe.Text.Replace('-', " ");`

或者通过修改您的代码：

```
char[] delemiterChars = { '-' };
string text = txtProbe.Text;
string[] words = text.Split(delemiterChars,StringSplitOptions.RemoveEmptyEntries);
foreach (string s in words)
{
        txtParse.Text += " " + s;
} 
```

# artificial-intelligence - common lisp 中的迭代深化

> ID：13141671
> 
> 赞同：5
> 
> 时间：2012-10-30T14:54:56.353
> 
> 标签：artificial-intelligence, common-lisp, iterative-deepening

我编写了一个迭代深化算法，它可以工作，除非我添加循环检查，算法返回比它应该的更深的解决方案。但是当我不检查周期时，它确实可以正常工作，但需要的时间太长。任何人都可以发现错误吗？

```
(defun rec-depth-limited (problem node cutoff closed)
  (if (= cutoff 0)
    (if (funcall (problem-goalp problem) node)
          node)
    (if (visited-p node closed)
        nil
        (progn
          ;; when i remove the next line, it works correctly
          (setf (gethash (node-state node) closed) t)
          (loop for child in (expand node (problem-actions problem)) do
            (let ((result (rec-depth-limited problem child (1- cutoff) closed)))
                (if result
                    (return result))))))))

(defun iterative-deepening (problem)
  "Iterative deepening search"
  (let ((cutoff 0))
    (loop
      (format t "~%cut-off: ~A" cutoff)
      (let ((solution (rec-depth-limited
                             problem
                             (make-node :state (problem-state problem)) 
                             cutoff 
                             (make-hash-table :test #'equalp)))) ;solve problem up to cutoff
        (if (null  solution) 
            (incf cutoff);if solution is not found, increment the depth
            (return solution))))))

(defun visited-p (node table)
  "Checks if state in node was visited before by checking
if it exists in the table"
  (nth-value 1 (gethash (node-state node) table))) 
```

编辑：这是扩展功能

```
(defun expand (node actions)
  "Expands a node, returns a list of the new nodes"
  (remove-if #'null (apply-actions node actions)));apply all actions on all nodes

(defun apply-actions (node actions)
  "Applies all actions to a state, returns a list of new states"
  (mapcan #'(lambda (action) 
              (mapcar #'(lambda (tile) (funcall action tile node))
                     (node-state node)))
          actions)) 
```

这是其中一个动作，除了细微的变化外，它们都是相同的

```
(defun slide-right (tile node)
  "slide the tile one cell to the right. returns nil if not possible, 
  otherwise returns a node with the new state"
  (when (can-slide-right-p tile (node-state node));if can slide right
      (and visualize (format t "~%slide ~A to the right" (tile-label tile)))
      (let*  ((newstate (mapcar #'copy-tile (node-state node)));copy the current state
             (depth (node-depth node))
             (newcol (incf (tile-col (find tile newstate :test #'equalp))));update state
             (cost (1+ (node-cost node))))
        (make-node :state newstate ;create new node with the new state
                   :parent node 
                   :depth (1+ depth) 
                   :action (concatenate 'string
                                        "slide "
                                        (tile-label tile)
                                        " right" )
                   :cost cost)))) 
```

谓词

```
(defun can-slide-right-p (tile state)
  "returns T if the specified tile can be sled one cell to the right"
  (let  ((row (tile-row tile)) 
        (end (+ (tile-col tile) (tile-length tile))) ;col at which tile ends after being sled
        (orient (tile-orientation tile)))
    (and (equal orient 'H)
         (or (tile-is-mouse tile) (< end *board-w*))
         (empty-cell-p row end state))))

(defun spans-cell-p (row col tile)
  "returns T if the specified tile spans the specified cell"
  (if (equal (tile-orientation tile) 'H)
      (horizontally-spans-cell-p row col tile)
      (vertically-spans-cell-p row col tile)))

(defun horizontally-spans-cell-p (row col tile)
  "Tests if the specified horizontal tile spans the specified cell"
  (let ((tile-col (tile-col tile))
        (tile-row (tile-row tile))
        (tile-len (tile-length tile)))
    (and (= tile-row row) (>= col tile-col) (< col (+ tile-col tile-len)))))

(defun vertically-spans-cell-p (row col tile)
  "Tests if the specified vertical tile spans the specified cell"
  (let  ((tile-col (tile-col tile))
        (tile-row (tile-row tile))
        (tile-len (tile-length tile)))
    (and (= tile-col col) (>= row tile-row) (< row (+ tile-row tile-len))))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-01T00:38:54.540

当通向目标的第一条路径比包含相同状态的任何其他较短路径更长时，带有循环检测的有限深度优先搜索可能会返回更长的路径。

令 D 为目标状态：

```
A -- B -- C -- D
 \
  C -- D 
```

在深度限制为 2 的情况下，如果先访问顶部分支，则会访问 B 和 C，并将其保存在哈希表中。当底部分支被访问时，它不会扩展超过 C，因为它被标记为已访问。

一种可能的解决方案是将散列值设置为找到状态的最小深度。这使得该状态在一定深度及以上被称为已访问，但如果访问深度较小，则可以再次扩展它。

```
(defun visited-p (node table)
  (let ((visited-depth (gethash (node-state node) table)))
    (and visited-depth
         (>= (node-depth node) visited-depth))))

(defun set-visited (node table)
  (let ((visited-depth (gethash (node-state node) table)))
    (setf (gethash (node-state node) table)
          (if visited-depth
              (min visited-depth (node-depth node))
              (node-depth node))))) 
```

# javascript - 更改html字符串宽度

> ID：13141676
> 
> 赞同：0
> 
> 时间：2012-10-30T14:55:27.750
> 
> 标签：javascript, css, html

我有 html，例如：

```
<div id='foo' style='background:transparent;color:white;width:120px'><p>test_text_test_text_test_text_test_text_test_text_test_text_test_text</p></div> 
```

如果字符串宽度超过 120，我该如何设置它的字符串 '\n'？例如。可能是这样的：

```
<div id='foo' style='background:transparent;color:white;width:120px'><p>test_text_test_text\n_test_text_test_text\n_test_text_test_text\n_test_text</p></div> 
```

我将非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:56:54.267

你应该使用 css 属性 - 自动换行

```
word-wrap:break-word; 
```

示例：[http ://www.w3schools.com/cssref/tryit.asp?filename=trycss3_word-wrap](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_word-wrap)

# excel - 将 VBA 表单中的复选框值插入 Excel 电子表格

> ID：13141683
> 
> 赞同：0
> 
> 时间：2012-10-30T14:55:48.093
> 
> 标签：excel, vba

我正在尝试将选定复选框的列表插入到电子表格中，在此用例中，用户最多可以选择 15 个项目。这将被插入到我在下面定义的某个单元格中。

我有一个带有以下名称/值的复选框：

```
Name         Value
==========   =====
chk_week1    1
chk_week2    2
...          ...
...          ...
chk_week15   15 
```

例如，如果用户选择 chk_week1、chk_week2、chk_week4 和 chk_week5，则应将其作为 1、2、4、5 插入到单元格中。

我已经包含了一张图片，以更好地展示它：

![在此处输入图像描述](../Images/5b050557ce72cd35e34d91fa6a0aec80.png)

每个复选框都有上表中列出的名称和值。这是我到目前为止使用的代码：

```
Private Sub btnSubmit_Click()

Dim ws As Worksheet
Dim rng1 As Range
Set ws = Worksheets("main")

' Copy the data to the database
' Get last empty cell in column A
Set rng1 = ws.Cells(Rows.Count, "a").End(xlUp)

' Having difficulty adding the code here
' rng1.Offset(1, 7) = weeks

End Sub 
```

* * *

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:24:23.830

此函数将返回您要放入单元格的字符串。

```
Function CheckBoxValues() As String
    For x = 1 To 15
        If Sheets("Main").Shapes("chk_week" & x).OLEFormat.Object.Object.Value Then
            CheckBoxValues = CheckBoxValues & x & ","
        End If
    Next
    if Len(CheckBoxValue <> 0) then
       CheckBoxValues = Left(CheckBoxValues, Len(CheckBoxValues) - 1)
    end if
End Function 
```

或者对于非循环方法，请查看 Francis Dean 的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:22:38.010

您可以使用一个函数来检查您的复选框并以您想要的格式返回一个字符串（添加其余的复选框！）

 `````
Private Sub btnSubmit_Click()

    Dim ws As Worksheet
    Dim rng1 As Range
    Set ws = Worksheets("main")

    ' Copy the data to the database
    ' Get last empty cell in column A
    Set rng1 = ws.Cells(Rows.Count, "a").End(xlUp)

    ' Having difficulty adding the code here
    rng1.Offset(1, 7) = GetWeeks

End Sub

Private Function GetWeeks() As String

    Dim weeks As String

    'Add values to the string if condition is true
    If chk_week1.Value = True Then weeks = weeks & "1,"
    If chk_week2.Value = True Then weeks = weeks & "2,"
    If chk_week3.Value = True Then weeks = weeks & "2,"
    '...
    If chk_week14.Value = True Then weeks = weeks & "14,"
    If chk_week15.Value = True Then weeks = weeks & "15,"

    'Remove the trailing comma
    If Right(weeks, 1) = "," Then weeks = Left(weeks, Len(weeks) - 1)

    GetWeeks = weeks

End Function

`````

# objective-c - Objective-C：指针算法

> ID：13141684
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:55:49.823
> 
> 标签：objective-c, arrays, pointers

我需要填写我创建的课程`dae_prim *array_prim;`。`dae_prim`

我想使用 C 风格，因为我会将所有这些数据传递给 OpenGL。

当我尝试制作 :`mesh->array_prim[i] = mysexyprim`它失败时出现“下标需要接口大小”。

我想我理解了这个问题（Obj-C 希望我使用 NSArray）但是我怎样才能绕过这个呢？

**更多代码**

```
class meshes:
@public:
   dae_prim *prims;
   int primcount; 
```

.

```
model->meshes->prims = malloc(sizeof(dae_prims*) * model->meshes->primcount);
dae_prim *prims = [[dae_prim alloc]init];
model->meshes->prims[1] = prims; //here is the problem 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:42:52.653

您需要对网格-> prims 使用双指针，因为您需要一个指针数组。

```
class meshes:
@public:
   dae_prim **prims; /* a C array of objects pointers */
   int primcount;

model->meshes->prims = malloc(sizeof(dae_prims*) * model->meshes->primcount);
model->meshes->prims[1] = [[dae_prim alloc]init]; 
```

干杯。

# c# - 如何从列表中获取特定范围（3 - 7）中的项目？

> ID：13141685
> 
> 赞同：63
> 
> 时间：2012-10-30T14:55:48.640
> 
> 标签：c#, list

从列表中选择特定范围内的所有项目并将其放入新列表中的最有效方法是什么？

```
List<DataClass> xmlList = new List<DataClass>(); 
```

这是我的列表，我想将范围 (3 - 7) 之间的所有 DataClass 项目放入一个新列表中。

什么是最有效的方法？每次计数++的foreach循环，直到他到达范围之间的项目并将这些项目添加到新列表中？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-10-30T14:58:23.393

您正在寻找的方法是[GetRange](https://msdn.microsoft.com/en-us/library/21k0e39c%28v=vs.110%29.aspx)：

```
List<int> i = new List<int>();
List<int> sublist = i.GetRange(3, 4);

var filesToDelete = files.ToList().GetRange(2, files.Length - 2); 
```

从总结：

```
// Summary:
//     Creates a shallow copy of a range of elements in the source System.Collections.Generic.List<T>.
// Parameters:
//   index:
//     The zero-based System.Collections.Generic.List<T> index at which the range
//     starts.
//   count:
//     The number of elements in the range. 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-30T15:01:03.083

如果出于某种原因您不喜欢使用 GetRange 方法，您也可以使用[LINQ](http://msdn.microsoft.com/en-us/library/bb397926.aspx)编写以下代码。

```
List<int> list = ...
var subList = list.Skip(2).Take(5).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:57:31.067

List 实现了一种`CopyTo`方法，可让您指定要复制的元素的开始和数量。我建议使用它。

请参阅：http: [//msdn.microsoft.com/en-us/library/3eb2b9x8.aspx](http://msdn.microsoft.com/en-us/library/3eb2b9x8.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-15T10:09:34.573

在 c# 8 中，您可以使用 Range 和 Index 而不是 Linq take 和 skip ：

> 样本数组：

```
string[] CountryList = { "USA", "France", "Japan", "Korea", "Germany", "China", "Armenia"}; 
```

> 得到这个结果（元素 1,2,3）==> 法国 日本 韩国
> 
> 1：获取数组或列表的范围：

```
 var NewList=CountryList[1..3] 
```

> 2：定义范围对象

```
Range range = 1..3;  
    var NewList=CountryList[range]) 
```

> 3：使用索引对象

```
Index startIndex = 1;  
Index endIndex = 3;  
var NewList=CountryList[startIndex..endIndex] 
```

# visual-studio-2008 - 为什么将一个包中的变量分配给解决方案中另一个包的范围？

> ID：13141686
> 
> 赞同：1
> 
> 时间：2012-10-30T14:55:53.503
> 
> 标签：visual-studio-2008, expression, flat-file, ssis

所以我更新了 SSIS 包中的数据库源查询。但是现在包裹在目的地失败了。在调试中，我得到这个输出：

`The file name property is not valid. The file name is a device or contains invalid characters.`

和

`No destination flat file name was provided. Make sure the flat file connection manager is configured with a connection string. If the flat file connection manager is used by multiple components, ensure that the connection string contains enough file names.`

根据我的研究，我认为日期变量没有正确转换。这很令人困惑，因为我没有触及表达式（FileLocation 变量除外）并且它的计算正确。

这是表达式：

```
@[User::FileLocation]  + "\\GRADE_" + Right((DT_STR,4,1252) DatePart("yyyy",getdate()),2) +
Right("0" + (DT_STR,4,1252) DatePart("m",getdate()),2) +
Right("0" + (DT_STR,4,1252) DatePart("d",getdate()),2) + "_" + 
Right("0" + (DT_STR,4,1252) DatePart("Hh",getdate()),2) + 
Right("0" + (DT_STR,4,1252) DatePart("Mi",getdate()),2) + 
Right("0" + (DT_STR,4,1252) DatePart("Ss",getdate()),2) + 
Right("0" + (DT_STR,4,1252) DatePart("Ms",getdate()),2) + ".txt" 
```

按照建议，我将变量设置`EvaluatedAsExpression`为**`True`**，但无济于事。

我尝试硬编码文件夹路径而不是使用变量，这似乎解决了这个问题。但我需要使用一个可配置的变量。问题是什么？

## 更新：

我注意到我使用的变量的范围在另一个包中。我如何才能查看范围外的变量？如果我突出显示了正确的包，并尝试创建一个包级变量，它的范围会被分配为不同的包吗？

![在此处输入图像描述](../Images/f9570cfe40eb0be9911b394ef3c6882b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:42:30.510

您面临的问题是由于通过复制现有包来创建新包。该示例说明了您的案例中发生的情况。

我创建了一个新的 SSIS 2008R2 解决方案来说明包变量范围中发生的情况。当您创建一个新的项目解决方案时，默认情况下它还会创建一个名为`Package1.dtsx`. 我已经在路径中创建了包解决方案`C:\temp\SSIS.2008R2`

![一揽子解决方案](../Images/a2b32b47c5d522478f062e97a20574c0.png)

如果您导航到项目文件夹位置，您将看到包文件。右键单击 dtsx 文件并在记事本或 Notepadd++ 中打开它。我更喜欢记事本++。`ObjectName`在文件中搜索。您会注意到包的 ObjectName 是 Package1，与文件名相同。因此，BIDS 为包和文件提供了相同的名称。但是，两者必须具有相同的名称并不是强制性的。

![对象名称 - 1](../Images/65f426e71f9ddafdf99a23e870769520.png)

现在，尝试将包重命名为`InquiryFile.dtsx`. 当您重命名包时，BIDS 将抛出以下警告消息。BIDS 试图告诉您正在重命名包，因此对象名称可能与文件名不同步，您想重命名它吗？对于这个包，让我们说是。保存包。

![重命名 - 1](../Images/40c6e79b8cd80542679c5b5791807f85.png)

返回项目文件夹位置并在文本编辑器中再次打开 dtsx 文件。搜索`ObjectName`，您会注意到对象名称已更改为，`InquiryFile`因为这是我们为重命名包而提供的名称。

![重命名的对象名称](../Images/0b43afeef84b22b181449761a742ee65.png)

现在，回到项目解决方案。复制包 InquiryFile.dtsx 并将其粘贴到 SSIS 包节点以创建新包。该包将被命名为`InquiryFile 1.dtsx`

![新包装](../Images/ef01a67d7dda083325e31db49452261b.png)

如果你尝试在这个新变量上创建一个包变量，你会注意到`InquiryFile`即使你已经打开了包文件，范围也是 to `InquiryFile 1.dtsx`。那可能会让你彻底失望。

![新变量](../Images/743aedb989b8e1918d269f71ef1006d0.png)

为什么范围设置为`InquiryFile`而不是`InquiryFile 1`？要找到它，我们必须转到项目文件夹位置。这次在文本编辑器中打开文件 InquiryFile 1.dtsx。您会注意到 ObjectName 仍然设置为 InquiryFile，因为我们通过复制现有文件 InquiryFile.dtsx 创建了这个包。BIDS 只会重命名文件而不是其中的对象名称。

您在“变量”窗格中看到的范围实际上是对象名而不是文件名。

![重命名](../Images/7567122edf3de2867fbaf866d1a81388.png)

现在回到 BIDS 项目解决方案，让我们将文件重命名`InquiryFile 1.dtsx`为`GradeFile.dtsx`. 当出现以下警告提示时，请确保单击**Yes**。

![重命名警告](../Images/c15f38124f9708f930c17a879a0dac9c.png)

保存包并关闭它。现在，重新打开包，您会注意到 Variables 窗格上的 Scope 显示`GradeFile`。

![新范围](../Images/4c95e99e5c0cabf6bc56d4c9edb3f9e2.png)

这是因为当我们重命名文件时，我们也单击“是”来重命名对象。您可以转到项目解决方案文件夹并`GradeFile.dtsx`在文本编辑器中打开文件，以发现对象名称已正确重命名。这是您在变量范围部分看到的对象名称。

希望您能让您了解示波器的工作原理。

要解决您的问题，只需尝试重命名包，当提示重命名对象名称时，请确保单击**Yes**。

![重命名](../Images/db39ef6ed30ceeea2edc6202b88ce759.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T19:31:38.290

虽然我没有找到问题的根本问题（我认为这与我的变量有关），但我的同事找到了解决方法：

按照 Siva 在她的回答中给出的说明（更正了我的变量范围，但没有解决问题）：

我的同事创建了几个额外的字符串变量，一个包含文件夹路径，另一个用于评估文件名。他还在包的开头创建了一个脚本任务，然后将这两个变量组合成第三个变量。

然后在目标连接处，连接字符串表达式包含最终的串联变量。瞧，目标文件名被接受，打包成功！

# ios - Xcode 中的 AudioPlayer 快进

> ID：13141687
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:55:56.963
> 
> 标签：ios, audio

有没有办法通过使用按钮将音频文件快进 x2、x4 等？如果没有，你知道这怎么可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:01:23.810

```
NSTimeInterval *timeIntervel = [yourPlayer currentTime];
timeIntervel = timeIntervel + timeToForword;
[yourPlayer setCurrentTime:timeIntervel];    
[yourPlayer play]; 
```

# python - 基于相关对象的 SQLAlchemy ORM 插入

> ID：13141691
> 
> 赞同：1
> 
> 时间：2012-10-30T14:56:07.620
> 
> 标签：python, orm, sqlalchemy

这是一个新手问题。我是 ORM 的新手，我想知道以下是否可行：

假设我有一个“users”表，其中包含三个字段：“id”、“user_name”和指向“countries”表的外键“country_id”

![表关系](../Images/233586c48e6cb128b768568bc993f7ad.png)

现在，如果我想插入一个新用户，我首先在“国家”表中查找国家的 id（例如 11），然后创建一个用户实例（声明性基础对象）

```
new_user = User('Johnny', 11)
session.add(new_user) 
```

我想知道的是，如果可以直接添加新用户，只传递国家名称......像这样：

```
new_user = User('Johnny', Country('Spain')) # Note the country instance
session.add(new_user) 
```

我试过这样的事情，但我得到的最好结果是 ORM 试图插入另一个名为西班牙的国家。

提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:19:36.200

假设`Spain` **已经插入**数据库，您将需要以下内容：

```
new_user = User(name='Johnny', country_id=session.query(Country).filter_by(name='Spain').one().id) 
```

更清晰的版本是：

```
country = session.query(Country).filter_by(name='Spain').one()
new_user = User(name='Johnny', country_id=country.id) 
```

如果你有一个`User.country` [`relationship`](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html)定义，这可以简单地是：

```
country = session.query(Country).filter_by(name='Spain').one()
new_user = User(name='Johnny', country=country) 
```

如果关系定义`User.country`了`users` [`backref`](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#linking-relationships-with-backref)关系（默认情况下将映射到 a `list`），您还可以执行以下操作：

```
country = session.query(Country).filter_by(name='Spain').one()
country.users.add(User(name='Johnny')) 
```

# c# - Webgrid 复选框 onchange 添加到字典

> ID：13141692
> 
> 赞同：0
> 
> 时间：2012-10-30T14:56:08.463
> 
> 标签：c#, javascript, dictionary, checkbox

目前使用网络网格

```
@{
                    var DB = Database.Open("CHAVI");
                    var grid = new WebGrid(DB.Query("SELECT [FileTrackingTag], FileID FROM (SELECT [FileTrackingTag], FileID, ROW_NUMBER() OVER (PARTITION BY [FileTrackingTag] ORDER BY FileID) rn FROM [dbo].[MasterSequence]) t WHERE rn=1 ORDER BY [FileTrackingTag]"));
                    @grid.GetHtml(
                        tableStyle: "webgrid",
                        columns: grid.Columns(
                            grid.Column(header: "Assign? ", style: "labelcolumn",
                                    format:
                                        @<text><input class="check-box" id="assignChkBx" name="assignChkBx" type="checkbox" value="@item.FileTrackingTag" onchange='handleChange(this);'  /></text>),
                            grid.Column("FileTrackingTag", "FileTrackingTag")
                            )
                    )
                 } 
```

我有一个隐藏区域

```
@Html.HiddenFor(m => m.MyHiddenDict) 
```

从我的模型

```
public Dictionary<string, string> MyHiddenDict = new Dictionary<string, string>(); 
```

我需要一个javascript函数，如果复选框被选中，它将添加或删除字典。我的第一种方法是将它添加到以逗号分隔的字符串中。但是，如果用户取消单击复选框，我无法撤消它。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:31:42.480

原来你只需要强制用户只从一个页面中选择，否则你需要在 sessionstate 中创建一个列表，并且当你调用 webgrid 页面时检查你已经使用过的那些

# sql - 将月份名称转换为月份编号

> ID：13141696
> 
> 赞同：0
> 
> 时间：2012-10-30T14:56:28.993
> 
> 标签：sql

> **可能重复：**
> [在 SQL 中将月份名称转换为月份编号函数](https://stackoverflow.com/questions/8314310/convert-month-name-to-month-number-function-in-sql)

我正在尝试将下面称为脚本的区域中的月份名称转换为月份编号`datename(MM, patientinfo.PatientDOB)`。例如，它当前返回 as `January`，我希望它返回为`01`or `1`。

从我读过的内容来看，我可能需要做 a `CASE WHEN 'January' THEN 1`，但我不确定在哪里插入它或使用的确切语法。

```
select
    Update_Log.RecordID as 'Dictation ID',
    cast(dictations.DOS as DATE) as 'Date of Service',
    groups.GroupName,
    rtrim(aspnet_Users.Firstname)+' '+rtrim(aspnet_Users.LastName) as Provider, 
    Update_Log.Updated, 
    Update_XRef.columnName as 'Update Type', 
    "New Value" =
        case 
            when update_xref.columnname = 'FacilityID' then (select facility.FacilityName+' [gID:'+update_log.NewValue+']' from facility where update_log.NewValue = facility.FacilityID)
            when update_xref.columnname = 'DOS' then (select left(update_log.NewValue, 11) as 'New Value')
            when update_xref.columnname = 'DictatorID' then (select rtrim(aspnet_users.Firstname)+' '+rtrim(aspnet_users.lastname) from aspnet_Users where aspnet_users.userid1 = update_log.UpdatedBy)
            when update_xref.columnname = 'PatientID' then (select rtrim(patientinfo.PatientFirst)+' '+rtrim(patientinfo.PatientLast)+' ['+datename(MM, patientinfo.PatientDOB)+'/'+datename(DD, patientinfo.PatientDOB)+'/'+datename(YY, patientinfo.PatientDOB)+ ', gID:'+rtrim(patientinfo.PatientID)+']' from patientinfo where patientinfo.PatientID = Update_Log.NewValue)
        end,
    "Old Value" =
        case 
            when update_xref.columnname = 'FacilityID' then (select facility.FacilityName+' [gID:'+update_log.OldValue+']' from facility where update_log.OldValue = facility.FacilityID)
            when update_xref.columnname = 'DOS' then (select left(update_log.OldValue, 11) as 'Old Value')
            when update_xref.columnname = 'DictatorID' then (select rtrim(aspnet_users.Firstname)+' '+rtrim(aspnet_users.lastname) from aspnet_Users where aspnet_users.userid1 = update_log.UpdatedBy)
            when update_xref.columnname = 'PatientID' then (select rtrim(patientinfo.PatientFirst)+' '+rtrim(patientinfo.PatientLast)+' ['+left(datename(MM, patientinfo.PatientDOB),3)+'/'+datename(DD, patientinfo.PatientDOB)+'/'+datename(YY, patientinfo.PatientDOB)+ ', gID:'+rtrim(patientinfo.PatientID)+']' from patientinfo where patientinfo.PatientID = Update_Log.OldValue)
        End
from 
    Update_Log, 
    Update_XRef, 
    aspnet_Users, 
    groups, 
    Dictations
where 
    Update_log.XRefID = Update_XRef.xRefID
    and Update_Log.UpdatedBy = aspnet_Users.userid1
    and aspnet_users.Groupid = Groups.GroupID
    and dictations.Dictationid = Update_Log.RecordID
    and Update_Log.Updated > dictations.DateofSignature
order by 
    groups.GroupName, 
    aspnet_users.LastName, 
    update_log.RecordID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:58:50.833

假设`patientinfo.PatientDOB`是一个完整的类型日期，获取日期的整数月份部分；

```
datepart(MM, patientinfo.PatientDOB) 
```

或者

```
month(patientinfo.PatientDOB) 
```

包裹在`cast(?? as varchar(2))`一个字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:39:09.443

I answered this previously here:

[Convert month name to month number in SQL Server](https://stackoverflow.com/questions/8314310/convert-month-name-to-month-number-function-in-sql/8314350#8314350)

Let me know if this works for you!

# c# - 如何通过 C# asp.net 发送邮件以获取联系表

> ID：13141702
> 
> 赞同：5
> 
> 时间：2012-10-30T14:56:35.877
> 
> 标签：c#, asp.net, email

我正在尝试创建联系表单以发送电子邮件（`from`并将`to`来自用户界面）：

```
try {
   MailMessage mail = new MailMessage();
   SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");
   mail.From = new MailAddress("fromadd");
   mail.To.Add("toadd");
   mail.Subject = "Test Mail";
   mail.Body = "This is for testing SMTP mail from GMAIL";
   SmtpServer.Port = 587;
   SmtpServer.Credentials = new System.Net.NetworkCredential("username","password");
   SmtpServer.EnableSsl = true;

   SmtpServer.Send(mail);
   MessageBox.Show("mail Send");
}
catch (Exception ex) {
   MessageBox.Show(ex.ToString());
} 
```

这仅适用于 Gmail - 但是，我想让它适用于任何电子邮件提供商 - 我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:03:28.270

您应该在 web.config 中配置[SmtpClient ：](http://msdn.microsoft.com/en-us/library/w355a94k.aspx)

```
<configuration>
  <system.net>
    <mailSettings>
      <smtp deliveryMethod="network">
        <network
          host="localhost"
          port="25"
          defaultCredentials="true"
        />
      </smtp>
    </mailSettings>
  </system.net>
</configuration> 
```

然后在您的代码中，您可以执行以下操作：

```
 try
    {
        MailMessage mail = new MailMessage();
        mail.From = new MailAddress("fromadd");
        mail.To.Add("toadd");
        mail.Subject = "Test Mail";
        mail.Body = "This is for testing SMTP mail from GMAIL";

        SmtpClient SmtpServer = new SmtpClient();            
        SmtpServer.Send(mail);
        MessageBox.Show("mail Send");
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:58:41.720

您可以在 web.config 中设置`SmtpClient`配置。这将使其灵活。

[http://blog.dotnetclr.com/archive/2009/08/18/511.aspx](http://blog.dotnetclr.com/archive/2009/08/18/511.aspx)

[http://msdn.microsoft.com/en-us/library/w355a94k.aspx](http://msdn.microsoft.com/en-us/library/w355a94k.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T15:22:44.620

You can also try:

```
 MailMessage msgObj = new MailMessage();

    msgObj.To = "example@example.com";
    msgObj.From = "Mike";
    msgObj.Bcc = "example@example.com";
    msgObj.Subject = "Test Message";
    msgObj.Body = "Hello World!";
    SmtpMail.SmtpServer = "Your Server";
    SmtpMail.Send("FromEmail", "ToEmail", "Subject", "Query");
    SmtpMail.Send(msgObj); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T14:59:34.063

不要使用硬编码参数连接到 smtp 服务器。

请改用 webconfig。您的程序将更加“通用”。当您想通过另一个 smtp-server 发送时，只需更改配置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T06:49:00.763

对我来说，似乎唯一可能阻止您使用任何电子邮件服务器发送电子邮件的事实是，某些邮件服务器需要身份验证（或可能是替代端口号）。

这是一些基本代码，可以让您指出正确的方向

```
public class SendMail
{

    public SendMail(string SMTPServer, string fromEmail)
    {
        this.SMTPServer = SMTPServer;
        this.FromEmail = fromEmail;
    }

    public SendMail(string SMTPServer, string fromEmail, string Username, string Password) : this(SMTPServer, fromEmail)
    {
        this.Username = Username;
        this.Password = Password;
    }

    public string SMTPServer { get; set; }
    public string FromEmail { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }

    public void Send(string toEmail, string subject, string data)
    {
        MailMessage mailMsg = new MailMessage();
        mailMsg.To.Add(toEmail);

        MailAddress mailAddress = new MailAddress(this.FromEmail);

        mailMsg.From = mailAddress;

        mailMsg.Subject = subject;
        mailMsg.Body = data;
        mailMsg.IsBodyHtml = true;
        SmtpClient smtpClient = new SmtpClient(this.SMTPServer, 25);

        if (this.Username.Length > 0 && this.Password.Length > 0)
        {
            System.Net.NetworkCredential credentials = new System.Net.NetworkCredential(this.Username, this.Password);
            smtpClient.Credentials = credentials;
        }

        smtpClient.Send(mailMsg);
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T06:48:38.637

我正在尝试这段代码。

```
try
{
    MailMessage mail = new MailMessage();
    mail.From = new MailAddress("best@technosys.com");
    mail.To.Add("best@technosys.com");
    mail.Subject = "Accept Request";
    mail.Body = body;
    mail.IsBodyHtml = true;
    SmtpClient smtp = new SmtpClient("smtp.gmail.com");
   smtp.Credentials = new System.Net.NetworkCredential("best@technosys.com", " password");
    smtp.EnableSsl = true;
    smtp.UseDefaultCredentials = true;
    smtp.Send(mail);
}
catch (Exception ex)
{
   ViewData.ModelState.AddModelError("_FORM", ex.ToString());
} 
```

# c# - 使用 EF (5) Code First 迁移时如何执行额外的数据库初始化

> ID：13141710
> 
> 赞同：1
> 
> 时间：2012-10-30T14:56:58.310
> 
> 标签：c#, sql-server, ef-code-first, entity-framework-5, entity-framework-migrations

我正在将我的 ef-code-first 应用程序移动到 code-first-migrations 模型，并将我的数据库初始化程序`DropCreateDatabaseIfModelChanges`从`MigrateDatabaseToLatestVersion`.

在我最初的初始化程序中，我正在创建一些用户定义的函数等并对数据库配置进行更改（例如`SET AUTO_CLOSE OFF`）。所有这些都是通过直接对 DB 执行 SQL 来实现的，因为它不受 EF 支持。

现在我已经转移到迁移模型，我正在尝试做同样的事情，通过向`Up`生成的`DbMigration`类的方法添加代码。此代码使用`Sql`注入 SQL 的方法。

但是，结果我收到了各种错误，例如：

*   创建用户定义函数的我的 SQL 导致错误说`CREATE FUNCTION`语句必须在批处理的开头。

*   我的`ALTER DATABASE`声明导致一个错误，指出它不能在用户事务中使用。（我没有创建交易，但大概已经开始了）。

我该如何克服呢？在`DbMigration`- 派生类中，我似乎无法访问 DbContext，因此无法直接访问数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T08:31:29.650

您可以尝试覆盖`Seed`派生中的方法`DbMigrationConfiguration`（这是自定义数据库初始化程序中原始 Seed 方法的最接近替代），但请注意，每次迁移数据库时都会执行此方法，因此您还必须包括检查以仅在它们不创建函数时创建函数不存在。

# shell - wget 屏幕输出无法使用 shell 脚本重定向到日志文件

> ID：13141721
> 
> 赞同：3
> 
> 时间：2012-10-30T14:57:22.460
> 
> 标签：shell

我有一个shell脚本，内容如下我希望屏幕输出可以重定向到templog，屏幕输出不是html内容而是像

```
--2012-10-30 15:53:14--  http://www.youtube.com/results?search_query=pig
Resolving www.youtube.com... 173.194.34.5, 173.194.34.6, 173.194.34.7, ...
Connecting to www.youtube.com|173.194.34.5|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: unspecified [text/html]
Saving to: “search_result”

    [ <=>                                   ] 108,503     --.-K/s   in 0.07s   

2012-10-30 15:53:15 (1.40 MB/s) - “search_result” saved [108503] 
```

但它不能我试过 2>&1|cat > templog 仍然不行

您可以复制内容并制作一个 wget.sh 文件然后运行它您会注意到内容无法重定向到 templog，

如何处理这个以实现我的目标？谢谢

```
keyword=pig
page_nr=3
wget -O search_result http://www.youtube.com/results?search_query=${keyword}&page=${page_nr} > templog 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T15:05:57.640

您只需要在您的网址周围加上引号。`wget`然后使用*stderr*在屏幕上打印，因此您还必须使用*stderr*而不是*stdout*（使用`2>`代替`>`）：

```
keyword=pig
page_nr=3
wget -O search_result "http://www.youtube.com/results?search_query=${keyword}&page=${page_nr}" 2> templog 
```

# php - 获取一组加权值的总分

> ID：13141722
> 
> 赞同：-1
> 
> 时间：2012-10-30T14:57:26.963
> 
> 标签：php

我有一系列分数，每个分数都根据重要性进行加权。我想根据分数和赋予每个项目的权重来获得 100 分的总分。

```
$array_one = array(
            array(
                'score' => 1.23,
                'max' => 10,
                'weight' => 10
            ),
            array(
                'score' => 56.78,
                'max' => 100,
                'weight' => 20
            ),
            array(
                'score' => 7.56,
                'max' => 10,
                'weight' => 20
            ),
            array(
                'score' => 4.67,
                'max' => 10,
                'weight' => 30
            )
        ); 
```

因此，如果一个项目的权重较大，则它在 100 分中的得分百分比更大。即，如果我得到 4 个分数，等于该范围内最大值的 50%，但它们的权重都会增加 10、20、30 ,40，第二个分数比第一个分数高 10%，第三个分数比第一个分数高 20%，第四个分数比第一个分数高 30%，依此类推。此外，一些权重将是相同的 10、20、20、30 或 10、10、10、10 等。我希望这是有道理的。所以总而言之，每个项目的分数应该是最大值的百分比，然后分数被加权为 100。预期结果应该返回所有 4 个项目的一个总分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:01:31.627

将分数相加除以最大值乘以它们的权重。取权重的总和除以您的最高分数 (100)。然后，将第一个数字除以第二个数字。这将是映射到 [0, 100] 范围的总加权分数。

# java - Java：将传统类型 Dictionary 的实例转换为 Map

> ID：13141725
> 
> 赞同：6
> 
> 时间：2012-10-30T14:57:31.597
> 
> 标签：java, collections

我正在调用一个库，出于 API 兼容性的原因，它返回一个 type 的实例`java.util.Dictionary`，但我希望有一个实例实现`java.util.Map`.

如何轻松将`java.util.Dictionary`实例转换为`java.util.Map`实例？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-15T18:51:06.303

使用番石榴和 Java 8：

```
Iterator<String> keysIter = Iterators.forEnumeration(dict.keys());
Map<String, Object> dictCopy = Maps.toMap(keysIter, dict::get); 
```

纯 Java 8 中的替代方案：

```
List<String> keys = Collections.list(dict.keys());
Map<String, Object> dictCopy = keys.stream()
           .collect(Collectors.toMap(Function.identity(), dict::get)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T14:57:31.597

`Dictionary`这就是我可以自己编程此转换的方式（在具有泛型类型参数的附加假设下）。

添加方法

```
public static <K, V> Map<K, V> addDictionaryToMap(Dictionary<K, V> source, Map<K, V> sink) {
    for (Enumeration<K> keys = source.keys(); keys.hasMoreElements();) {
        K key = keys.nextElement();
        sink.put(key, source.get(key));
    }
    return sink;
} 
```

例如用`addDictionaryToMap(dict, new HashMap<String, String>())`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-05T15:33:32.673

我更喜欢遵循一种`public static <K, V> Map<K, V> valueOf(Dictionary<K, V> dictionary)`命名这种方法的风格。我会要求[番石榴](http://code.google.com/p/guava-libraries/)将其添加到他们的[地图](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Maps.html "地图")课程中。

```
public static <K, V> Map<K, V> valueOf(Dictionary<K, V> dictionary) {
  if (dictionary == null) {
    return null;
  }
  Map<K, V> map = new HashMap<K, V>(dictionary.size());
  Enumeration<K> keys = dictionary.keys();
  while (keys.hasMoreElements()) {
    K key = keys.nextElement();
    map.put(key, dictionary.get(key));
  }
  return map;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-01T15:58:14.840

一种有趣的实现方法是使用视图方法，它允许您将`Dictionary`和`Map`链接在一起并且两者都具有完整功能。如以下代码示例所示：

```
Dictionary<String, String> dict = new Hashtable<>();

dict.put("PT", "Portugal");
dict.put("CH", "Switzerland");
System.out.println(dict);

Map<String, String> map = MapUtils.asMap(dict);
System.out.println(map);

map.remove("CH");
dict.put("UK", "United Kingdom");
System.out.println(dict);
System.out.println(map);

map.clear();
System.out.println(dict);
System.out.println(map); 
```

实现将是这样的：

```
public class MapUtils {
    public static  <K, V> Map<K, V> asMap(Dictionary<K, V> dict) {
        return new AbstractMap<K, V>() {
            @Override
            public Set<Entry<K, V>> entrySet() {
                return new AbstractSet<Entry<K, V>>() {
                    @Override
                    public Iterator<Entry<K, V>> iterator() {
                        return new Iterator<Entry<K, V>>() {
                            private Enumeration<K> keys = dict.keys();
                            private Enumeration<V> elements = dict.elements();
                            private K k = null;

                            @Override
                            public boolean hasNext() {
                                return keys.hasMoreElements();
                            }

                            @Override
                            public Entry<K, V> next() {
                                k = keys.nextElement();
                                return new SimpleEntry<>(k,
                                        elements.nextElement());
                            }

                            @Override
                            public void remove() {
                                if (k == null) {
                                    throw new IllegalStateException();
                                }
                                dict.remove(k);
                                k = null;
                            }
                        };
                    }

                    @Override
                    public int size() {
                        return dict.size();
                    }
                };
            }

            @Override
            public int size() {
                return dict.size();
            }

            @Override
            public boolean containsKey(Object key) {
                return dict.get(key) != null;
            }

            @Override
            public V get(Object key) {
                return dict.get(key);
            }

            @Override
            public V put(K key, V value) {
                return dict.put(key, value);
            }

            @Override
            public V remove(Object key) {
                return dict.remove(key);
            }
        };
    }
} 
```

一些被覆盖的方法是可选的，但出于性能原因我实现了它们。

# .net - SyncOrchestrator InvalidComObjectException

> ID：13141727
> 
> 赞同：3
> 
> 时间：2012-10-30T14:57:38.623
> 
> 标签：.net, sync, microsoft-sync-framework, synchronize

我正在尝试使用 Microsoft 的 SyncOrchestrator，但无法正常工作。有人有这方面的经验并愿意帮助我吗？

```
using Microsoft.Synchronization;
using Microsoft.Synchronization.Files;

public static void SyncFileSystemReplicasOneWay(FileSyncProvider sourceProvider, FileSyncProvider destinationProvider, Label progress_label)
    {
       try
       {
            SyncOrchestrator agent = new SyncOrchestrator();
            agent.LocalProvider = sourceProvider;
            agent.RemoteProvider = destinationProvider;
            agent.Direction = SyncDirectionOrder.Upload; // Sync source to destination
            SyncOperationStatistics stats = agent.Synchronize();
       }
       catch { }
    } 
```

调用 agent.Synchronize() 它给出了一个

```
InvalidComExceptionError: a com object that has been separated from its underlying rcw cannot be used. 
```

有谁知道是什么原因导致了这个 InvalidComExceptionError？以前有人遇到过这个问题吗？我找不到任何参考。

# c# - 查找日期（所有语言）

> ID：13141728
> 
> 赞同：1
> 
> 时间：2012-10-30T14:57:41.503
> 
> 标签：c#, date, search

当我需要在 html 源中查找第一次出现的日期时，我遇到了这个问题。这可以是“2000 年 1 月 24 日”以及 2000 年 1 月 24 日（斯洛伐克语）或任何其他语言的日期格式。

你可能知道一个能够做到这一点的图书馆。我没有，谷歌没有帮助:(

我无法想象正则表达式如何做到这一点，因为我需要手动为所有语言制定规则

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:05:11.203

这`CultureInfo`门课就是你要找的。用于`dt.ToString("D", c)`传递文化信息并获取您的格式（顺便说一句，与 相同`dt.ToLongDateString`）。

查看[**标准日期和时间格式字符串**](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)。

您可以使用[`CultureInfo.GetCultures`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.getcultures.aspx)来获取所有支持的文化。

```
DateTime dt = new DateTime(2000, 1, 24);
CultureInfo[] cultures = CultureInfo.GetCultures(CultureTypes.AllCultures & ~CultureTypes.NeutralCultures);
string allTranslatedJanuaries = 
    string.Join(Environment.NewLine, cultures.Select(c =>
        String.Format("{0}: {1}", c.EnglishName, dt.ToString("D", c)))); 
```

这是一个演示：http: [//ideone.com/6ypqJE](http://ideone.com/6ypqJE)

在我的服务器上安装了 352 个文化，在 ideone 上只有 112 个。

# java - 当 ArrayList 在 Model 中更新时 JList 应该在 View 中更新

> ID：13141732
> 
> 赞同：4
> 
> 时间：2012-10-30T14:57:49.570
> 
> 标签：java, swing, model-view-controller, arraylist, jlist

我已经玩了一段时间了，但没有成功。我看过 ListModel 但一直在努力将它实施到我当前的项目中。

我有一个生产者类线程将元素添加到模型中的 ArrayList。这工作正常，并且 ArrayList 正在运行时更新。我的问题是，然后我希望将添加到 ArrayList 的新对象添加到 View 类中的 JList 中。我看不到如何将 ListModel 或 DefaultListModel 合并到我当前的设置中。非常感谢帮助。

```
public class Person
{
    private String name;
    private int    age;

    public Person(String name, int age)
    {
        this.name = name;
        this.age = age;
    }

    public String getName()
    {
        return name;
    }

    public int getAge()
    {
        return age;
    }

    public String toString()
    {
        return this.name;
    }
}

public class Producer extends Thread
{
    private Model model;

    public Producer(Model model)
    {
        this.model = model;
    }

    public void run()
    {
        Person fred     = new Person("Fred Flintstone", 37);
        Person wilma    = new Person("Wilma Flintstone", 18);
        Person pebbles  = new Person("Pebbles Flintstone", 15);
        Person dino     = new Person("Dino Flintstone", 45);
        Person barney   = new Person("Barney Rubble", 76);
        Person betty    = new Person("Betty Rubble", 76);
        Person bamm     = new Person("Bamm-Bamm Rubble", 76);

        try
        {
            model.addPerson(fred);
            Thread.sleep(1500);
            model.addPerson(wilma);
            Thread.sleep(1500);
            model.addPerson(pebbles);
            Thread.sleep(1500);
            model.addPerson(dino);
            Thread.sleep(1500);
            model.addPerson(barney);
            Thread.sleep(1500);
            model.addPerson(betty);
            Thread.sleep(1500);
            model.addPerson(bamm);
        }
        catch(Exception e)
        {
            System.out.println("Error adding Person object to Model.people
                                ArrayList" + e);
        }
    }
}

public class Model 
{
    private List <Person> people;

    public Model()
    {
        people = new ArrayList<Person>();
    }

    public List<Person> getPeople()
    {
        return people;
    }

    public void addPerson(Person aPerson)
    {
        people.add(aPerson);
        System.out.println("Person object added to people list:" + aPerson);
    }

    public void removePerson(Person aPerson)
    {
        people.remove(aPerson);
    }
}

public class View extends JFrame
{
    private JPanel              topPanel, botPanel;
    private JList               peopleList;
    private JScrollPane         scrollPane;
    private Model               model;

    public View(Model model)
    {
        this.model = model;
        setSize(200, 220);
        setTitle("View");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        topPanel = new JPanel();
        botPanel = new JPanel();
        peopleList = new JList(model.getPeople().toArray());
        scrollPane = new JScrollPane(peopleList);
        topPanel.setLayout(new GridLayout(1, 1));
        topPanel.add(scrollPane);
        topPanel.setBorder(BorderFactory.createTitledBorder
       (BorderFactory.createEtchedBorder(), "People list"));

        Container cp = getContentPane();
        cp.add(topPanel, BorderLayout.NORTH);
        cp.add(botPanel, BorderLayout.SOUTH);
    }
}

public class Main 
{
    public static void main(String[] args)
    {
        Model model = new Model();
        View theView = new View(model);
        theView.setVisible(true);
        Producer producer = new Producer(model);
        producer.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:02:31.593

在此处使用适当的 MVC 模式：视图侦听模型中的更改并根据来自模型的通知进行更新：

1.  添加您的模型并在修改模型时`PropertyChangeSupport`触发`PropertyChangeEvent`
2.  将视图添加为`PropertyChangeListener`模型
3.  相应地对通知做出反应（如果将 a`Person`添加到您的模型中，当您收到“添加了新人”的事件时，将其添加到`ListModel`您的`peopleList`，对于“已删除人员”等...）

[http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyChangeSupport.html](http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyChangeSupport.html)

注意：由于您的模型将被除 EDT（事件调度线程）之外的另一个线程修改，因此请确保您在 EDT 上修改您的 UI（查看`SwingUtilities.isEventDispatchingThread()`和`SwingUtilities.invokeLater()`）

更新：

这是一个片段，说明了我在上面试图解释的内容（对不起，如果它有点冗长，但我试图尽可能接近你的原始代码）：

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.GridLayout;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.beans.PropertyChangeSupport;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

import javax.swing.BorderFactory;
import javax.swing.DefaultListModel;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class Main {

    public class Person {

        private String name;
        private int age;

        public Person(String name, int age) {
            this.name = name;
            this.age = age;
        }

        public String getName() {
            return name;
        }

        public int getAge() {
            return age;
        }

        @Override
        public String toString() {
            return this.name;
        }
    }

    public class Producer extends Thread {
        private Model model;

        public Producer(Model model) {
            this.model = model;
        }

        @Override
        public void run() {
            Random random = new Random();
            Person fred = new Person("Fred Flintstone", 37);
            Person wilma = new Person("Wilma Flintstone", 18);
            Person pebbles = new Person("Pebbles Flintstone", 15);
            Person dino = new Person("Dino Flintstone", 45);
            Person barney = new Person("Barney Rubble", 76);
            Person betty = new Person("Betty Rubble", 76);
            Person bamm = new Person("Bamm-Bamm Rubble", 76);
            while (true) {
                try {
                    model.addPerson(fred);
                    Thread.sleep(1500);
                    model.addPerson(wilma);
                    Thread.sleep(1500);
                    model.addPerson(pebbles);
                    Thread.sleep(1500);
                    model.addPerson(dino);
                    Thread.sleep(1500);
                    model.addPerson(barney);
                    Thread.sleep(1500);
                    model.addPerson(betty);
                    Thread.sleep(1500);
                    model.addPerson(bamm);
                    while (model.getPeople().size() > 0) {
                        Person p = model.getPeople().get(random.nextInt(model.getPeople().size()));
                        model.removePerson(p);
                        Thread.sleep(1000);
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }

    public class Model {
        private static final String PEOPLE = "people";

        private List<Person> people;

        private PropertyChangeSupport propertyChangeSupport;

        public Model() {
            people = new ArrayList<Person>();
            propertyChangeSupport = new PropertyChangeSupport(this);
        }

        public PropertyChangeSupport getPropertyChangeSupport() {
            return propertyChangeSupport;
        }

        public List<Person> getPeople() {
            return people;
        }

        public void addPerson(Person aPerson) {
            people.add(aPerson);
            System.out.println("Person object added to people list:" + aPerson);
            getPropertyChangeSupport().firePropertyChange(PEOPLE, null, aPerson);
        }

        public void removePerson(Person aPerson) {
            people.remove(aPerson);
            getPropertyChangeSupport().firePropertyChange(PEOPLE, aPerson, null);
        }
    }

    public class View extends JFrame implements PropertyChangeListener {
        private JPanel topPanel, botPanel;
        private JList peopleList;
        private JScrollPane scrollPane;
        private Model model;
        private DefaultListModel peopleListModel;

        public View(Model model) {
            this.model = model;
            setSize(200, 220);
            setTitle("View");
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            topPanel = new JPanel();
            botPanel = new JPanel();
            peopleListModel = new DefaultListModel();
            for (Person p : model.getPeople()) {
                peopleListModel.addElement(p);
            }
            peopleList = new JList(peopleListModel);
            model.getPropertyChangeSupport().addPropertyChangeListener(Model.PEOPLE, this);
            scrollPane = new JScrollPane(peopleList);
            topPanel.setLayout(new GridLayout(1, 1));
            topPanel.add(scrollPane);
            topPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(), "People list"));

            Container cp = getContentPane();
            cp.add(topPanel, BorderLayout.NORTH);
            cp.add(botPanel, BorderLayout.SOUTH);
        }

        @Override
        public void propertyChange(final PropertyChangeEvent evt) {
            if (!SwingUtilities.isEventDispatchThread()) {
                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {
                        propertyChange(evt);
                    }
                });
                return;
            }
            if (evt.getSource() == model) {
                if (Model.PEOPLE.equals(evt.getPropertyName())) {
                    if (evt.getOldValue() != null && evt.getNewValue() == null) {
                        peopleListModel.removeElement(evt.getOldValue());
                    } else if (evt.getOldValue() == null && evt.getNewValue() != null) {
                        peopleListModel.addElement(evt.getNewValue());
                    }
                }
            }
        }
    }

    public static void main(String[] args) {
        new Main().init();
    }

    private void init() {
        final Model model = new Model();
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                View theView = new View(model);
                theView.setVisible(true);
            }
        });
        Producer producer = new Producer(model);
        producer.start();
    }
} 
```

# scala - 在 playframework 中发出通知

> ID：13141736
> 
> 赞同：2
> 
> 时间：2012-10-30T14:58:02.833
> 
> 标签：scala, notifications, playframework-2.0

我想在我的网站上发出通知，就像在 facebook 上的一样。例如，在我的应用程序中，我可以创建一个活动，并且可以向我的朋友发送邀请。当他打开他的帐户时，他可以在通知中看到该邀请。这可以通过 playframework 实现吗？我需要一些其他工具来实现它吗？

我正在使用`Play 2.0.3`和`Scala`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:29:15.577

您需要使用[Comet 套接字](http://scala.playframework.org/documentation/2.0.3/ScalaComet)或[WebSockets](http://scala.playframework.org/documentation/2.0.3/ScalaWebSockets)：

# java - 在 Morphia 中使用瞬态

> ID：13141740
> 
> 赞同：2
> 
> 时间：2012-10-30T14:58:10.663
> 
> 标签：java, mongodb, playframework, morphia

我正在使用 Play-Morphia 构建一个应用程序，并且我正在尝试在一个类中的一个字段上使用瞬态：

临时公共列表名称；

我这样做的原因是我想使用 Morphia 将名称列表保存在 MongoDB 中，而不是在检索我的类时对其进行序列化。在 Morphia 的网站[http://code.google.com/p/morphia/](http://code.google.com/p/morphia/)你可以看到这个例子：

@Transient int 未存储；//字段可以忽略（不加载/保存）瞬态布尔存储=真；//不是@Transient，例如，将被序列化/GWT 忽略。

这特别说明“存储”字段可以保存到 MongoDB，但会被序列化忽略。

我试图在我的应用程序中使用它，但在我的情况下，“名称”列表没有存储到数据库中。任何人都可以对此进行解释吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:52:41.067

PlayMorphia 模块自动将@Transient 注解添加到瞬态。[请在https://github.com/greenlaw110/play-morphia/issues](https://github.com/greenlaw110/play-morphia/issues)提交问题报告以请求禁用此功能。

# android - 将共享数据结构传递给没有序列化/意图的 Android 活动

> ID：13141741
> 
> 赞同：0
> 
> 时间：2012-10-30T14:58:15.203
> 
> 标签：android, android-activity

我有一个 ListView 显示来自大型数据集的数据。`List<Data>`数据由后台任务从网络检索并放入（即在内存中）。（想想带有投票更新的电子邮件收件箱。）

我的问题是如何将该数据传递给 ListFragment/ListView/ListAdapter 进行显示。

此列表不是永久的（因此不在内容提供程序中），但比活动的寿命更长（当活动尚未激活时，它会在后台更新）。

唯一的选择似乎是：

1.  通过 Intent/Bundle 传递它。这需要在某种程度上进行序列化，这对于我的长列表来说非常昂贵，尤其是每次在后台更新列表时，我都必须设置一个新列表，这意味着整个列表都会重新序列化。
2.  创建一个从程序中的任何位置提供列表的 Singleton，并从我的 ListAdaptor 访问 SingletonListProvider.getInstance().getList()。我不喜欢单例，我担心并发。
3.  使用 ContentProvider。对于当前存在于内存中的简单 List<> 似乎有点过头了

还有其他选择吗？

似乎我对如何创建 Activity（在这种情况下为 ListFragment）几乎没有控制权，所以我不能只将 List 作为构造函数参数传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:07:09.977

最好的方法是使用数据库，特别是如果您的数据结构很大。顺便说一句，您不应该创建`ContentProvider`足够的内容来扩展`SQLiteOpenHelper`.

[http://www.vogella.com/articles/AndroidSQLite/article.html#sqliteoverview_sqliteopenhelper](http://www.vogella.com/articles/AndroidSQLite/article.html#sqliteoverview_sqliteopenhelper)

# junit - 在junit测试中抑制JOptionPane.showInputDialog

> ID：13141744
> 
> 赞同：6
> 
> 时间：2012-10-30T14:58:21.427
> 
> 标签：junit

我`JOptionPane.showInputDialog` 在我的代码中使用调用。当 junit 测试运行时，它会弹出窗口。有没有办法抑制弹出窗口？沃尔德嘲笑它有帮助吗？请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-07T14:23:01.463

我知道 - 这个问题很古老。但也许有时有人会遇到同样的问题......

记住：这是你的代码，不是吗？所以你可以很容易地从

```
 public boolean myMethod() {
  String value = "NOTHING";
  if(this.someCondition) {
    value = JOptionPane.showInputDialog(...);
  }
  return "NOTHING".equals(value);
 } 
```

至

```
public boolean myMethod() {
  String value = "NOTHING";
  if(this.someCondition) {
     value = getValueFromDialog();
  }
  return "NOTHING".equals(value);
}

protected getValueFromDialog() {
  return JOptionPane.showInputDialog(...)
} 
```

完成后，您可以编写一个测试来模拟 JOptionPane 的实际调用（示例使用[Mockito](http://mockito.org/)语法）

```
@Test
public void test_myMethod() {
    MyClass toTest = mock(MyClass.class);

    //Call real method we want to test     
    when(toTest.myMethod()).doCallRealMethod();

    //Mock away JOptionPane
    when(toTest.getValueFromDialog()).thenReturn("HELLO JUNIT");

    //Perform actual test code
    assertFalse(toTest.myMethod());
} 
```

全部完成 - 现在添加测试来模拟由于 JOptionPane.showInputDialog() 可能发生的所有有趣的事情（返回 null，返回意外的值......），只需添加测试用例和不同的值

```
when(toTest.getValueFromDialog()).thenReturn(...); 
```

# c# - WebMatrix 现在不发送邮件，因为它被移动到服务器

> ID：13141761
> 
> 赞同：1
> 
> 时间：2012-10-30T14:59:19.857
> 
> 标签：c#, email, razor, webmatrix, webmail

我试图让 WebMatrix 在本地服务器上运行（仅用于在我们的 Intranet 中进行测试），但是在我的本地（工作）机器上发送邮件时遇到了问题。

我得到一个简单的操作已超时消息。这个账号是通过gmail设置的，所以我认为不会有太多问题，但是由于我之前从未在服务器上设置过WebMatrix，我真的不知道如何解决这个问题。

当我让电子邮件在这个网站的建设中工作时，我使用了这些设置并且一切正常：

```
WebMail.SmtpServer = "smtp.gmail.com";
WebMail.SmtpPort = 25;
WebMail.EnableSsl = false; 
```

然后，当我在服务器上使用这些设置运行它时，我收到了这个错误：

```
The SMTP server requires a secure connection or the client was not authenticated.  The server response was: 5.7.0 Must issue a STARTTLS command first. 
```

有了这个，我们尝试启用 SSL，但之后得到一个简单的响应超时请求（使用这些设置）：

```
WebMail.SmtpServer = "smtp.gmail.com";
WebMail.SmtpPort = 465;
WebMail.EnableSsl = true; 
```

“用户名”和“发件人”字段设置相同 (name@somecity.net) 这是我们由 gmail 管理的电子邮件的示例。密码也设置正确。

通过查看 SSL，我是否在这里追逐错误的东西？

您必须原谅我，因为我以前从未实施过 SSL。我知道 SSL 是什么，但我以前从未设置过它，所以如果我在设置它时是个菜鸟，我深表歉意。

此外，您可以肯定地知道，服务器错误实际上是 WebMail.Send 方法上的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T16:37:44.377

您应该更改 Gmail 的*SMTP 端口*。现在，gmail 正在使用*587*而不是*465*。

您可以使用`telnet smtp.gmail.com 587`. 然后你应该得到这样的东西：

`220 test.auto.mySMTPserver.com ESMTP Service (Lotus Domino Release 8.5.3FP2 HF95) ready at Tue, 30 Oct 2012 08:27:31 -0700`

您的新代码：

```
WebMail.SmtpServer = "smtp.gmail.com";
WebMail.SmtpPort = 587;
WebMail.EnableSsl = true; 
```

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:15:57.813

我会说该消息告诉您您未通过身份验证，因此您可能需要为服务器上的有效用户发送用户名/密码。有关向邮件服务器进行身份验证以发送的示例，请参阅[此问题。](https://stackoverflow.com/questions/298363/how-can-i-make-smtp-authenticated-in-c-sharp)

# ms-word - Word 中的嵌套内容控件

> ID：13141765
> 
> 赞同：1
> 
> 时间：2012-10-30T14:59:33.313
> 
> 标签：ms-word

我正在将 Word 作为律师事务所文档生成解决方案的一部分。有不同的文件需要根据业务规则和逻辑显示/隐藏某些条款/部分，这些条款/部分可以相当深入 - 例如特定县的特定法官需要某些信息，因此可能会显示或隐藏文件的整个部分根据这个逻辑隐藏。

我知道 Word 中的内容控件，但是是否可以在彼此内部嵌套内容控件？例如，假设我有一个动态段落（即，它可能会根据某些业务规则显示或隐藏）并且该段落还需要显示从数据库中检索的原告的姓名。

我们当前的解决方案在 Word 文档中使用了一种伪模板语言，该语言被解析和替换（类似于`{FIELD "FIELD_NAME"}`插入 的值`FIELD_NAME`），它似乎工作得相当好，但我很好奇它是否无法使用 built -Word 的功能，而不是自定义软件。

这样的事情可能吗？我发现一篇关于 Word 的文章似乎表明了这种确切的情况，但没有文章或资源解释如何实际实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:39:13.733

当然，您可以在富文本内容控件中嵌套其他内容控件。

您可以以编程方式执行此操作（在 Word 中使用 VBA，或在 VSTO 加载项中）。

但首先只需在 Word 中尝试（启用 Developer 功能区，然后插入富文本控件，然后在其中插入其他内容控件）。富文本内容控件可以包含段落、表格等（前提是它是块级别，而不是运行级别）。

# ios - UISearchbar 上的取消按钮

> ID：13141770
> 
> 赞同：1
> 
> 时间：2012-10-30T14:59:41.163
> 
> 标签：ios, uisearchbar

我`UISearchbar`用取消按钮创建了一个，但是当我单击取消按钮时，它不显示数组，它只是关闭键盘。

`allItems`是`NSArray`和 `displayItems`是`NSMutableArray`

```
-(void)searchBarSearchButtonClicked:(UISearchBar *)asearchBar{
[displayItems addObject:allItems];
[searchBar resignFirstResponder];
 }

-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{

if ([searchText length] == 0) {
    [displayItems removeAllObjects];
    [displayItems addObjectsFromArray:allItems];

} else {

    [displayItems removeAllObjects];
    for (NSString * string in allItems ){
        NSRange r =[string rangeOfString:searchText options:NSCaseInsensitiveSearch];

        if (r.location != NSNotFound){
            [displayItems addObject:string];
        }
    }

    [tableView reloadData];

} 

 }

       - (UITableViewCellAccessoryType)tableView:(UITableView *)tableView accessoryTypeForRowWithIndexPath:(NSIndexPath *)indexPath{
return UITableViewCellAccessoryDisclosureIndicator;
}

 -(void)searchBarCancelButtonClicked:(UISearchBar *)asearchBar{
[displayItems removeAllObjects];
[displayItems addObjectsFromArray:allItems];
[searchBar resignFirstResponder];
}
-(void)searchBarSearchButtonClicked:(UISearchBar *)asearchBar{
[searchBar resignFirstResponder];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:33:25.090

你真的应该为此使用两个数组。一个是 NSArray，叫做 originalData，另一个是 NSMutableArray，叫做filteredData。这些在开始时都是相同的，在过滤时，您将从 originalData 数组构建/重建过滤数据数组。这是一个粗略的例子：

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{

    if ([searchText length]) {
        [displayItems removeAllObjects];
        for (NSString * string in allItems ){
            NSRange r =[string rangeOfString:searchText options:NSCaseInsensitiveSearch];

            if (r.location != NSNotFound){
                [displayItems addObject:string];
            }

        [tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];
        }
    } 
}

-(void)searchBarCancelButtonClicked:(UISearchBar *)asearchBar{
    [searchBar resignFirstResponder];
    self.displayItems = [[NSMutableArray alloc] initWithArray:allItems];
    [tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO]; 
} 
```

`ScrollView`我还为( )添加了一个委托方法，`TableView`以便在滚动开始时，键盘被关闭：

```
#pragma mark - ScrollView (UITableView) delegate methods
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    [mySearchBar resignFirstResponder];
} 
```

# android - 为什么不显示 ScaleDrawable？

> ID：13141774
> 
> 赞同：0
> 
> 时间：2012-10-30T15:00:08.683
> 
> 标签：android, android-layout, android-xml

我正在`ScaleDrawable`根据 Android 开发人员站点示例在 XML 中定义一个：

```
<?xml version="1.0" encoding="utf-8"?>
    <scale xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/sign_ui_text_line"
    android:scaleGravity="center_vertical|center_horizontal"
    android:scaleHeight="80%"
    android:scaleWidth="80%" /> 
```

我将此定义为`EditText`

由于某种原因，drawable 没有显示（但`EditText`视图根据定义改变了它的大小）。

为什么不显示？

如何缩放可绘制对象以用作背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T14:41:15.697

从事物的声音来看，ScaleDrawables 似乎需要一些变通方法才能正常工作。

请参阅[Zeh](https://stackoverflow.com/a/13706836/1542891)对类似问题的回答。

# c++ - char 文字的字符集是否保证为 ASCII？

> ID：13141776
> 
> 赞同：8
> 
> 时间：2012-10-30T15:00:13.183
> 
> 标签：c++, standards, ascii

来自从[这里](https://stackoverflow.com/a/13141577/673730)开始的讨论，标准是否指定字符的值？那么，`'0'`保证是48？这就是 ASCII 会告诉我们的，但它可以保证吗？如果没有，你见过`'0'`不是 48 的编译器吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-30T15:01:32.007

不。源字符集或执行字符集都不需要使用带有 ASCII 子集的编码。我还没有看到任何非 ASCII 实现，但我知道有人知道有人有。（要求 '0' - '9' 具有连续的整数值，但这是 SO 其他地方的重复问题。）

用于源字符集的编码控制如何将源代码的字节解释为 C++ 语言中使用的字符。*该标准将执行字符集*的成员描述为具有值。正是编码将这些字符映射到它们对应的值，从而确定 的整数值`'0'`。

*尽管在执行字符集中至少必须存在基本源字符集*的所有成员以及一些控制字符和一个值为 0 的空字符（具有适当的值），但不要求编码是 ASCII 或对任何特定的字符子集（空字符除外）使用 ASCII 值。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-30T15:01:58.310

不，标准非常小心，没有指定源字符编码是什么。

C 和 C++ 编译器也在 EBCDIC 计算机上运行，​​你知道，`'0' != 0x30`.

但是，我认为这是必需的`'1' == '0' + 1`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T15:02:19.177

它`0xF0`在 EBCDIC 中。我从未使用过 EBCDIC 编译器，但有人告诉我，它们在 IBM 曾经风靡一时。

C++ 标准中没有要求源或执行编码是基于 ASCII 的。可以保证`'0' == '1' - 1`（并且通常数字是连续且有序的）。*不能*保证字母是连续的，实际上在EBCDIC`'J' != 'I' + 1`和`'S' != 'R' + 1`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T15:04:42.100

根据 C++11 标准 N3225

> 基本源字符集成员的字形旨在识别对应于 ASCII 字符集的 ISO/IEC 10646 子集中的字符。然而，因为从源文件字符到源字符集的映射（在翻译阶段 1 中描述）被指定为实现定义的，所以需要一个实现来记录基本源字符在源文件中是如何表示的

简而言之，字符集不需要映射到 ASCII 表，即使我从未听说过任何不同的实现

# php - 用于电子邮件验证的 PHP 代码错误

> ID：13141778
> 
> 赞同：-1
> 
> 时间：2012-10-30T15:00:18.733
> 
> 标签：php, mysql, database, email, validation

我正在尝试为我的数据库创建电子邮件验证表单，但遇到了许多问题。当我尝试运行下面的代码时，我收到错误未选择数据库。

我也得到一个未定义的变量错误。我希望将用户名放入我的数据库中的用户名字段下，但显然 $name 是一个未定义的变量。第 xx 行未定义变量错误`mysql_query("INSERT INTO registrations (username, password, email, hash) VALUES( '". mysql_real_escape_string($name) ."',`。

我正在使用 WAMP 服务器。数据库的名称是sitememberdetails，我需要输入信息的表的名称是registrations。我对此很陌生-谁能告诉我如何定义变量以及如何选择数据库（即使它似乎已经被选中？）

```
 <?php

             $host = "localhost";
             $username = "";
             $password = "";
             $databasename = "sitememberdetails";
             $email="xxxxxx@xxxxxxxx.xxx";

              $connection = mysql_connect($host,$username,$password) or die        
             ("Error: ".mysql_error());

               mysql_select_db($databasename);("sitememberdetails") or  

               die(mysql_error());   

                    if(isset($_POST['name']) && !empty($_POST['name']) AND  

                    isset($_POST['email']) && !empty($_POST['email'])){  
                     $name = mysql_real_escape_string($_POST['name']);  
                     $email = mysql_real_escape_string($_POST['email']); }  

                      if(!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a- 

                        z0-9-]+)*(\.[a-z]{2,3})$/i", $email)){

$msg = 'The email you have entered is invalid, please try again.';  
                }else{  

                    $msg = 'Your account has been made, <br /> please verify it     

              by clicking the activation link that has been send to  

                 your email.';  
                       }  

                        $hash = md5( rand(0,1000) ); 

                         $password = rand(1000,5000); 

                        mysql_query("INSERT INTO registrations (username, password,  

                          email, hash) VALUES( 
                          '". mysql_real_escape_string($name) ."', 
                          '". mysql_real_escape_string(md5($password)) ."', 
                          '". mysql_real_escape_string($email) ."', 
                          '". mysql_real_escape_string($hash) ."') ") or  

                          die(mysql_error());

                             $to      = $email; // Send email to our user  
                      $subject = 'Signup | Verification'; // Give the email a subject  
                      $message = ' 
                       Thanks for signing up! 
                      Your account has been created, you can login with the following  

                       credentials after you have activated your account by pressing  

                       the url below. 

                 Username: '.$name.' 
                 Password: '.$password.' 

                      Please click this link to activate your account: 
                      http://www.yourwebsite.com/verify.php?email='.$email.'& 

                      hash='.$hash.' 
                       ';  
                     $headers = 'From:noreply@yourwebsite.com' . "\r\n"; // Set from  

                       headers  
                       mail($to, $subject, $message, $headers); // Send our email  

                        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:12:46.287

尝试更改此代码

```
mysql_select_db($databasename);("sitememberdetails") or  

           die(mysql_error()); 
```

对此

```
mysql_select_db($databasename) or  die(mysql_error()); 
```

停产；

```
if (database_connection) {
unset($undefined_variable_error)
} else {
echo $undefined_variable_error;
}
// Because mysql_real_escape_string needs an open mysql connection 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:29:34.733

查看此修改后的代码：

```
<?php
         $host = "localhost";
         $username = "";
         $password = "";
         $databasename = "sitememberdetails";
         $email="xxxxxx@xxxxxxxx.xxx";

        $connection = mysql_connect($host,$username,$password) or die ("Error: ".mysql_error());
        mysql_select_db($databasename) or die(mysql_error());   

               $name = "";
           if(isset($_POST['name']) && !empty($_POST['name']) AND  
           isset($_POST['email']) && !empty($_POST['email'])){  
                 $name = mysql_real_escape_string($_POST['name']);  
                 $email = mysql_real_escape_string($_POST['email']); }  

                if(!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", $email)){
                    $msg = 'The email you have entered is invalid, please try again.';  }
            else { 
                $msg = 'Your account has been made, <br /> please verify it     
                            by clicking the activation link that has been send to your email.';  
                  }  

            $hash = md5( rand(0,1000) ); 
            $password = rand(1000,5000); 

            mysql_query("INSERT INTO registrations (username, password,email, hash) VALUES( 
                      '". mysql_real_escape_string($name) ."', 
                      '". mysql_real_escape_string(md5($password)) ."', 
                      '". mysql_real_escape_string($email) ."', 
                      '". mysql_real_escape_string($hash) ."') ") or die(mysql_error());

            $to = $email; // Send email to our user  
                $subject = 'Signup | Verification'; // Give the email a subject  
            $message = ' Thanks for signing up! 
                Your account has been created, you can login with the following  
                credentials after you have activated your account by pressing  
                the url below. 
                    Username: '.$name.' 
                    Password: '.$password.' 
                Please click this link to activate your account: 
                http://www.yourwebsite.com/verify.php?email='.$email.'& 
                hash='.$hash.' 
               ';  

            $headers = 'From:noreply@yourwebsite.com' . "\r\n"; // Set from  

                mail($to, $subject, $message, $headers); // Send our email  

?> 
```

我建议你使用 PDO 而不是 mysql_ 函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:13:28.650

似乎 $name 值没有发布到表单中。如果 name 变量已设置且不为空，您将对其进行 mysql_escaping，但如果 name 变量根本没有设置会发生什么？没有对此进行检查，因此它会一直持续到到达 INSERT 语句并导致错误为止。

[在此处](http://php.net/manual/en/function.mysql-select-db.php)查看示例 #1以选择数据库。($databasename); 后面有一个分号；这是没有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:15:10.523

这是一些修改后的代码，使用 PDO 而不是 mysql_*。让我知道这个是否有效，我们可以从那里解决任何问题。

```
<?php

            $host = 'localhost';
            $dbname = 'sitememberdetails';
            $user = '';
            $pass = '';
            try
            {
                $DB = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass); 
            }
            catch(PDOException $e)
            {  
                echo $e->getMessage();  
            }

            if(isset($_POST['name']) && !empty($_POST['name']) AND isset($_POST['email']) && !empty($_POST['email']))
            {  
                $name = $_POST['name'];  
                $email = $_POST['email'];
            }
            else
            {
                $name = 'No Name';  
                $email = 'No Email';
            }

            if(!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", $email))
            {
                $msg = 'The email you have entered is invalid, please try again.';  
            }else{  
                $msg = 'Your account has been made, <br /> please verify it by clicking the activation link that has been send to your email.';  
            }  

            $hash = md5( rand(0,1000) ); 
            $password = rand(1000,5000); 

            $query = "INSERT INTO registrations (username, password, email, hash) VALUES('?', '?', '?', '?')";
            $sth = $DB->prepare($query);
            //By using ?'s and prepare/execute, PDO will prevent SQL Injection for you!
            $sth->execute(array($name, md5($password), $email, $hash));

            $to      = $email; // Send email to our user  
            $subject = 'Signup | Verification'; // Give the email a subject  
            $message = 'Thanks for signing up! Your account has been created, 
                        you can login with the following credentials after you 
                        have activated your account by pressing the url below. 
                        Username: '.$name.' 
                        Password: '.$password.' 

                        Please click this link to activate your account: 
                        http://www.yourwebsite.com/verify.php?email='.$email.'& 

                        hash='.$hash;  
            $headers = 'From:noreply@yourwebsite.com' . "\r\n"; // Set from header  
            mail($to, $subject, $message, $headers); // Send our email  
?> 
```

# git - 如何从 Visual Studio 中删除/隐藏 GitExtensions 工具栏？

> ID：13141780
> 
> 赞同：29
> 
> 时间：2012-10-30T15:00:23.177
> 
> 标签：git, windows-8, visual-studio-2012, git-extensions

我试过：

*   右键单击工具栏并取消选中 GitExtensions
*   右键单击工具栏 > 自定义和删除 GitExtensions
*   将工具栏从第二行移到第一行
*   在 GitExtensions 设置中搜索禁用/隐藏工具栏的方法，但没有找到任何东西

计算机重新启动后，GitExtensions 工具栏再次显示在第二个工具栏行上。

我用：

*   视窗 8
*   视觉工作室 2012
*   Git 1.7.11
*   GitExtensions 2.41

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-11T18:14:03.010

Git 扩展文件存储在“Visual Studio 2012”子文件夹中的“我的文档”文件夹中。删除这些文件将使工具栏从 MSVC 中消失。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-12-19T13:45:07.450

1.  从控制面板运行 Git Extensions 卸载程序
2.  点击“更改”按钮
3.  取消选择“Visual Studio 扩展”功能

**更新**

这应该适用于 2.48.04 和更新版本：右键单击工具栏，取消选中 GitExtensions，关闭所有 VS 实例并重新启动它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T07:15:51.110

位置正确，文件名为CurrentSettings.vssettings

我修改了这一行：

```
<add_toolbar Menu="{000D7B18-CDE4-49F0-B194-FE3E25BBF096}:00000002" 
 Name="GitExtensions" MenuType="toolbar" /> 
```

通过添加 Visibility="hide" FullScreen="hide"

结果：

```
<add_toolbar Menu="{000D7B18-CDE4-49F0-B194-FE3E25BBF096}:00000002" 
 Name="GitExtensions" MenuType="toolbar"
 Visibility="hide" FullScreen="hide"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-19T04:41:28.843

删除或更改设置文件 (C:\Users\UserName\Documents\Visual Studio 2012\Settings\CurrentSettings.vssettings) 只是临时修复，因为每次更新设置或关闭 Visual Studio 时，Visual Studio 都会重新创建/覆盖此文件。

使用团队设置文件也不起作用，因为该文件不会覆盖 CurrentSettings.vssettigs 文件中未列出的参数。关闭 Visual Studio 并重新生成文件后，它不会列在 CurrentSettings.vssettigs 文件中。

***** 我看到 3 个选项*******

 ****1\. 重新编译 GitExtensions 并修改此处：** [https](https://github.com/gencer/gitextensions/commit/faef52e8191fde54ef9787f6f5156cf315ec9be5) ://github.com/gencer/gitextensions/commit/faef52e8191fde54ef9787f6f5156cf315ec9be5 这并不容易，因为该项目包含一堆必须安装和配置的第三方库。祝你好运！

**2\. 使用这个别人修复的.dll。** [http://mirror.nienbo.com/git-extensions/patch_for_244/GitPlugin.dll](http://mirror.nienbo.com/git-extensions/patch_for_244/GitPlugin.dll) 下载后，右键单击它，选择属性，然后按“取消阻止”按钮。然后将其复制到 C:\Users\UserName\Documents\Visual Studio 2012\Addins （覆盖当前文件）。这对我很有用。

**3\. 使用不同的 git 扩展程序。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-28T10:04:00.290

重置所有设置对我有用。*不过，在那之后我不得不从头开始设置所有内容*。

如果这不是问题，请转到 Visual Studio **TOOLS** > **Import and Export Settings...** > **Reset all Settings**。

我认为它在重新启动视觉工作室后生效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T14:17:10.350

Visual Studio Git Extensions 工具栏的设置可以在这个文件中找到：

> \Users{用户名}\Documents\Visual Studio 2012\Settings\CurrentSettings.vssettings

在文件中搜索术语 GitExtensions 以查找工具栏设置行。可能会有两条线，不一定彼此相邻：

`<add_toolbar Menu="{000D7B18-CDE4-49F0-B194-FE3E25BBF096}:00000002" Name="GitExtensions" MenuType="toolbar"/>`

`<modify_toolbar Menu="{000D7B18-CDE4-49F0-B194-FE3E25BBF096}:00000002" Name="GitExtensions" Visibility="show" FullScreen="hide" Dock="top" Row="2" FloatRectangle="0,0,208,24" DockRectangle="0,0,208,24"/>`

您需要修改两行中的第二行，因为它将优先，并且其中已经包含设置。

您可以将可见性设置为“自动”以使其表现得像其他工具栏，或“隐藏”以摆脱它。如果您希望它坚持到工具栏的第一行，请将 Row 设置为 1。

当然，您必须在 VS 关闭的情况下执行此操作才能使其正常工作。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-06-06T11:07:09.333

请确保从解决方案文件夹中删除 .git **隐藏文件**夹。或任何其他 .git 文件**

# javascript - Javascript获取高度IE错误值

> ID：13141781
> 
> 赞同：2
> 
> 时间：2012-10-30T15:00:28.480
> 
> 标签：javascript, html

我的应用程序中有一个我无法解决的奇怪问题。在我的代码中，我做了这样的事情：

```
$tds.each(function(index) {
    parentHeightArray.push($(this).parent().outerHeight());
}); 
```

`$tds`只是一个 jquery 对象，其中包含`<div>`表格单元格中的所有标签。

在 FF 中它返回正确的值，但在 IE 中它们太低了。当我在函数中执行相同的代码时，`setTimeout`我得到了很好的值是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:14:50.230

它可能与 DOM 未完全构建**或**内容未完全加载有关。

尝试将您的 JavaScript 放入：

```
$(document).ready(function() {
    // your code
}); 
```

**或**内部：

```
$(window).load(function () {
    // your code
}); 
```

还要确保您有一个不会触发[quirks mode的](http://www.quirksmode.org/css/quirksmode.html)[文档](http://en.wikipedia.org/wiki/Document_Type_Declaration)类型。请参阅：在 Wikipedia 上[触发不同的渲染模式。](http://en.wikipedia.org/wiki/Quirks_mode#Triggering_different_rendering_modes)

# xsl-fo - 最后一页 FOP 不同的正文

> ID：13141784
> 
> 赞同：0
> 
> 时间：2012-10-30T15:00:39.263
> 
> 标签：xsl-fo, apache-fop

我希望我的 FOP 为最后一页生成一个带有不同正文部分的 pdf。我试图像这样实现这种行为：

```
<xsl:template match="/fatture">
  <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">

    <fo:layout-master-set>
      <fo:simple-page-master master-name="main" page-height="297mm" page-width="210mm"
                             margin-top="0mm" margin-bottom="5mm" margin-left="5mm" margin-right="5mm">
        <fo:region-body margin-top="110mm" margin-bottom="75mm"/>
        <fo:region-before extent="110mm"/>
        <fo:region-after extent="75mm"/>
      </fo:simple-page-master>

      <fo:simple-page-master master-name="main-other" page-height="297mm"
                             page-width="210mm" margin-top="0mm" margin-bottom="5mm" margin-left="5mm"
                             margin-right="5mm">
        <fo:region-body margin-top="110mm" margin-bottom="75mm"
                        region-name="xsl-region-body"/>
        <fo:region-before extent="110mm" region-name="xsl-region-before"/>
        <fo:region-after extent="75mm" region-name="xsl-region-footer"/>
      </fo:simple-page-master>
      <fo:simple-page-master master-name="main-last" page-height="297mm"
                             page-width="210mm" margin-top="0mm" margin-bottom="5mm" margin-left="5mm"
                             margin-right="5mm">
        <fo:region-body margin-top="110mm" margin-bottom="75mm"
                        region-name="xsl-region-body-last"/>
        <fo:region-before extent="110mm" region-name="xsl-region-before"/>
        <fo:region-after extent="75mm" region-name="xsl-region-footer"/>
      </fo:simple-page-master>

      <fo:page-sequence-master master-name="sintetica">
        <fo:repeatable-page-master-alternatives>
          <fo:conditional-page-master-reference master-reference="main-last" 
                                                page-position="last"/>
          <fo:conditional-page-master-reference master-reference="main-last"/>
        </fo:repeatable-page-master-alternatives>
      </fo:page-sequence-master>

    </fo:layout-master-set>
    <xsl:for-each select="fattura">
      <fo:page-sequence master-reference="sintetica">
        <xsl:call-template name="main-document.header"/>
        <xsl:call-template name="main-document.footer"/>
        <xsl:call-template name="main-document.body"/>
        <xsl:call-template name="main-document-last.body"/>
      </fo:page-sequence>
    </xsl:for-each>

    <!--        
    -->
  </fo:root>
</xsl:template> 
```

但是我认为在页面序列部分有一个错误，因为我尝试调用 2 个不同的主体。错误是：

> 流 'xsl-region-body' 不映射到页面主 'main-last' 中的区域主体。FOP 目前不支持这一点。

知道如何解决我的问题吗？如果我在页面序列中使用`flow`标签，我可以声明 2 body 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:49:49.260

您的第一个 fo:conditional-page-master-reference 中有一个错字 - 两个主引用属性都设置为“main-last” - 这是否解决了问题？

此外，也许这个其他问题已经提供了一个合适的答案？链接： [如何检测文档的最后一页？](https://stackoverflow.com/questions/13299809/how-to-detect-the-last-page-of-the-document/13608366#13608366)

# jira - “完成”任务的 JIRA 问题

> ID：13141785
> 
> 赞同：2
> 
> 时间：2012-10-30T15:00:55.527
> 
> 标签：jira, scrum

也许它比编程问题更具心理意义：

我们在工作中使用 JIRA 和 Greenhopper，所以当我收到新任务时，我会在当前 sprint 的敏捷板上看到它们。对于每个 sprint，我都有很多任务，在我修复之后，例如其中五个我将它们的状态设置为*需要测试*，这些任务交给测试人员（他不仅有我的任务要像往常一样测试）。如果这些任务经过测试并且一切正常，它们就会被测试人员*关闭*。问题是 - 我看不到我已经完成了多少任务。当它们*关闭时，它们从我的**敏捷*板上消失，我在那里只看到新任务......想象一下 - 昨天你已经完成了当前 sprint 的五个任务，但今天首席为你在当前 sprint 中增加了十个任务。

所以：Number_Of_Tasks - 5 + 10 = Number_Of_Tasks + 5。

因此，敏捷董事会对我来说没有视觉上的进步——它的规模越来越大。这是非常令人沮丧的

简而言之：我如何查看已*完成*的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:40:51.597

您可能勾选了“隐藏完成的问题”按钮。

*   转到敏捷 > 任务（需要 Greenhopper 敏捷插件）
*   在您的任务板上。一是“隐藏已完成的问题”。单击/取消单击它。

现在将显示您完成的问题。

> 想象一下 - 昨天你已经完成了当前 sprint 的 5 个任务，但是今天首席为你在当前 sprint 中增加了 10 个任务。

至于这个，你的上司需要指导。如果您正在执行 SCRUM，那么“负责人”（无论是谁）都不应该为您的 sprint 增加额外的工作。如果你提前完成任务，你应该从可能遇到麻烦的队友身上挑选一些，或者你可以测试他的东西。关键是要实现你（团队）为自己设定的目标。如果每个人都完成了，那么 sprint 会提前结束。对你有益！

您可以完成并重新计划下一个 sprint，或者团队成员应该自己从积压工作中挑选东西。

一个“主管”给你分配东西的危险在于，这些微观管理者可能对已经做了什么、要做什么以及什么未经测试并可能被测试人员重新打开没有详细的了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:44:35.907

您可以使用 Jira 查询作为过滤器。查询本身如下所示：

```
status WAS "Need Test" BY currentUser() AND status = Closed 
```

... 是的，很像 SQL。) 这是[官方文档链接](https://confluence.atlassian.com/display/JIRA/Advanced+Searching)。

# python - 将十进制 int 转换为小端字符串 ('\x##\x##...')

> ID：13141787
> 
> 赞同：4
> 
> 时间：2012-10-30T15:01:05.610
> 
> 标签：python

我想将整数值转换为十六进制值的字符串，采用小端序。例如，`5707435436569584000`将成为`'\x4a\xe2\x34\x4f\x4a\xe2\x34\x4f'`.

我的 googlefu 为我找到的所有东西`hex(..)`都给了我`'0x4f34e24a4f34e180'`这不是我想要的。

我可能可以手动拆分该字符串并构建我想要的字符串，但我希望有人可以为我指出一个更好的选择。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-30T15:03:22.880

您需要使用该[`struct`模块](http://docs.python.org/2/library/struct.html)：

```
>>> import struct
>>> struct.pack('<Q', 5707435436569584000)
'\x80\xe14OJ\xe24O'
>>> struct.pack('<Q', 5707435436569584202)
'J\xe24OJ\xe24O' 
```

这里`<`表示little-endian，`Q`表示我们要打包一个unsigned long long（8字节）。

请注意，Python 将对落在可打印 ASCII 范围内的任何字节使用 ASCII 字符来表示生成的字节串，因此上述结果的`14OJ`,`24O`和`J`部分：

```
>>> struct.pack('<Q', 5707435436569584202).encode('hex')
'4ae2344f4ae2344f'
>>> '\x4a\xe2\x34\x4f\x4a\xe2\x34\x4f'
'J\xe24OJ\xe24O' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-02T01:58:53.080

我知道这是一个旧线程，但它仍然有用。这是我使用python3的两分钱：

```
hex_string = hex(5707435436569584202) # '0x4f34e24a4f34e180' as you said
bytearray.fromhex(hex_string[2:]).reverse() 
```

因此，关键是将其转换为字节数组并将其反转。在一行中：

```
bytearray.fromhex(hex(5707435436569584202)[2:])[::-1] # bytearray(b'J\xe24OJ\xe24O') 
```

PS：您可以将“bytearray”数据视为“bytes”，甚至将它们与`b'raw bytes'`

**更新：** 正如[Will](https://stackoverflow.com/users/765294/will)在评论中指出的那样，您还可以管理负整数：

> 要使用负整数进行此操作，您需要使用首选的 int 类型输出长度来屏蔽输入。例如，-16 作为小端 uint32_t 将是 bytearray.fromhex(hex(-16 & (2**32-1))[2:])[::-1]，其计算结果为 bytearray(b'\ xf0\xff\xff\xff')

# shell - 将 sed 的输出重定向到文件时，sudo 不起作用

> ID：13141789
> 
> 赞同：4
> 
> 时间：2012-10-30T15:01:14.340
> 
> 标签：shell, unix

> **可能重复：**
> [如何使用 sudo 将输出重定向到我无权写入的位置？](https://stackoverflow.com/questions/82256/how-do-i-use-sudo-to-redirect-output-to-a-location-i-dont-have-permission-to-wr)

假设我想更改 /home 中的文件“foo”，对其应用一些正则表达式（通过**sed**），然后将结果放入名为 /home/foo2 的文件中。

我对 /home 或 foo 都没有读/写访问权限，所以我使用**sudo**。但是，我仍然得到一个权限被拒绝

```
sudo sed "s/bar/baz/" <foo >foo2
bash: foo2: Permission denied 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:04:05.560

使用就地选项，`-i`。你的语法是：

```
sed -i [pattern] filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:12:39.800

虽然`sh`一般来说可能是一个坏主意，但这将允许`foo2`为您的 shell 创建一个新文件：

`sudo sh -c "sudo sed 's/bar/baz/' <foo >foo2"`

# r - 有没有办法用外推数据填充矩阵？

> ID：13141790
> 
> 赞同：0
> 
> 时间：2012-10-30T15:01:16.183
> 
> 标签：r, matrix

基本上，我计算了矩阵每一行的平均值

```
> mat <- matrix(c(45,34,1,3,4325,23,1,2,5,7,3,4,32,734,2),ncol=3)
> mat
     [,1] [,2] [,3]
[1,]   45   23    3
[2,]   34    1    4
[3,]    1    2   32
[4,]    3    5  734
[5,] 4325    7    2

> mat2 <-t(rowMeans(mat))
> mat2
         [,1] [,2]     [,3]     [,4]     [,5]
[1,] 23.66667   13 11.66667 247.3333 1444.667
> dim(mat2)
[1] 1 5 
```

我想做的是用计算值填充一个空矩阵，使其看起来像'mat3'

```
> mat2 <- matrix(numeric(0), 5,5)
> mat2
     [,1] [,2] [,3] [,4] [,5]
[1,]   NA   NA   NA   NA   NA
[2,]   NA   NA   NA   NA   NA
[3,]   NA   NA   NA   NA   NA
[4,]   NA   NA   NA   NA   NA
[5,]   NA   NA   NA   NA   NA

> mat3
           [,1]     [,2]         [,5] 
[1,]   23.66667 23.66667  ....   23.66667 
[2,]   13.00000 13.00000  ....   13.00000 
[3,]   11.66667 11.66667  ....   11.66667
[4,]   247.3333 247.3333  ....   247.3333
[5,]   1444.667 1444.667  ....   1444.667 
```

有没有办法在不手动填充每个单元格的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:04:46.493

是的，通过 R 的回收功能：

```
mat <- matrix(c(45,34,1,3,4325,23,1,2,5,7,3,4,32,734,2),ncol=3)
mat2 <- rowMeans(mat)
mat2
[1]   23.66667   13.00000   11.66667  247.33333 1444.66667
> matrix(mat2,5,5)

           [,1]       [,2]       [,3]       [,4]       [,5]
[1,]   23.66667   23.66667   23.66667   23.66667   23.66667
[2,]   13.00000   13.00000   13.00000   13.00000   13.00000
[3,]   11.66667   11.66667   11.66667   11.66667   11.66667
[4,]  247.33333  247.33333  247.33333  247.33333  247.33333
[5,] 1444.66667 1444.66667 1444.66667 1444.66667 1444.66667 
```

当您给出`matrix`一个长度为 5 的向量并告诉它生成的矩阵应该是 5x5 时，它会扩展您的向量以自动填充矩阵的其余部分。

# database - 分批排序

> ID：13141791
> 
> 赞同：1
> 
> 时间：2012-10-30T15:01:17.633
> 
> 标签：database, sorting, servlets

我有一个 Java servlet，它查询数据库并在浏览器中显示表。我已经实现了分页，这样当用户滚动表格时才会发出新的请求。问题是如果用户选择基于某个列对 UI 中的表进行排序，请求需要很长时间，因为 DB 中的实际表很大，它对整个表进行排序，然后将排序后的分页数据发送到客户端/浏览器. 所以假设如果表有 100k 行并且我有 100 行的页面大小，那么有没有办法调整 DB 中的排序或 servlet 中的分页，不需要对整个 100k 行进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:17:25.450

**分页**可能会有所帮助。所以，这就是它通常的做法。与旧的分页加载网页不同，当您有单页滚动时。您通常有一个下拉列表，其中列出了排序列。

您首先加载第一页，当页面底部出现时，您通过 AJAX 请求下一页的查询。到这里为止，我想你很好。

似乎让您感到困扰的是，如果用户滚动了 10 页，然后他进行了排序，您将不得不一次性加载 10 页数据。这是错误的。

两件事情，

1.  当您更改排序标准时，您更改了查看表格的上下文。
2.  假设，如果您加载 10 个页面并将用户保持在第 10 个页面。他会对发生的事情感到惊讶。

因此，一旦用户更改了排序标准，您就可以按照新标准清理 DIV 并加载第 1 页。你看你现在没有负担。你？

* * *

几个快速提示：

1.  我个人认为最好让 DBMS 来做排序和分页。我认为它是这样做的。您应该编写优化的查询。

2.  要排序的索引列会有所帮助。

3.  如果项目不经常更改，您可能希望使用适当的 TTL 缓存页面（来自 DB 的结果）。

4.  利用 DBMS 提供的特殊功能来优化查询。[这是一篇关于 MySQL 的文章](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

# python - 如何自动分类应用用户评论？

> ID：13141796
> 
> 赞同：1
> 
> 时间：2012-10-30T15:01:26.173
> 
> 标签：python, app-store, semantics, feedback, google-prediction

我收到了数以万计的用户对该应用程序的评论。

我知道很多评论的意思都是一样的。

我无法阅读所有这些评论。因此，我想用一个python程序来分析所有的评论，找出最频繁最重要的反馈信息。

我想问一下，我该怎么做？

我可以下载一个应用所有的评论，也初步了解了Google Prediction API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T06:25:22.210

您可以使用 Google Prediction API 将您的评论定性为重要或不重要。您想要做的是手动分类您的评论子集。然后，您将手动分类的模型上传到 Google Cloud Storage，并使用 Prediction API 训练您的模型。此步骤是异步的，可能需要一些时间。训练好的模型准备就绪后，您可以使用它以编程方式对剩余（以及任何未来）评论进行分类。

请注意，您手动分类的评论越多（即您的训练集越大），您的程序化分类就越准确。此外，您可以将这个想法扩展如下：代替二元分类（重要/不重要），您可以使用重要性等级，例如 1-5 级。当然，这需要更多的体力劳动来构建模型，因此最佳策略将取决于您的需求以及您可以花费多少时间来构建模型。

# visual-studio-2010 - 在 Visual Studio 中创建颠覆日志文件

> ID：13141813
> 
> 赞同：0
> 
> 时间：2012-10-30T15:02:22.770
> 
> 标签：visual-studio-2010, svn

当我在 Visual Studio 中构建项目时，有没有办法自动创建颠覆日志文件？我正在使用 AnkhSVN 将 SVN 集成到 Visual Studio 中。我可以手动运行 svn log 命令来生成日志文件，但我想在每次构建项目时自动创建一个发行说明文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:30:51.837

我对安赫不熟悉。但是，如果您可以手动编写日志，请尝试编写将运行相同命令的批处理脚本，然后让 VS 从构建步骤中运行批处理文件。您可以在项目属性中找到构建步骤。

我很确定这会奏效。我一次使用 VS 中的构建步骤自动调用一个 exe，该 exe 将生成 3D 模型，该模型将由 VS 编译的主要可执行文件加载。

这是一个可能有帮助的 msdn 链接： [Specifying Custom Build Steps](http://msdn.microsoft.com/en-us/library/hefydhhy%28v=vs.80%29.aspx)

构建事件可能是一个更好的选择，它们是相同的，并且有一个“构建后事件”可能是您想要触发脚本的时候。如果您不想运行批处理脚本，我认为您也可以将其作为独立命令运行。

# permissions - 以编程方式关闭“从更高级别继承权限”

> ID：13141815
> 
> 赞同：5
> 
> 时间：2012-10-30T15:02:27.700
> 
> 标签：permissions, plone, zope

我正在尝试设置一些其他组不应看到的组维护文件夹。目前，我通过取消单击@@sharing 选项卡中的“从更高级别继承权限”复选框来实现这一点，但我想自动执行此操作。

我在文档或谷歌搜索中找不到任何关于此的内容。在搜索了 egg 目录后，我发现了一些关于 'ac_inherited_permissions' 的有趣的东西，但没有什么能作为我的解决方案。

我想做类似 obj.inherited_permissions = False 的事情，或者调用我需要的任何函数。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:44:31.583

共享选项卡仅影响本地角色。这些通常是从父母那里继承的（获得的），但是您可以通过在对象上设置`__ac_local_roles_block__`为来明确阻止这些。`True`

但是，请确保在展开的对象上设置它（无获取上下文）：

```
from Acquisition import aq_base

aq_base(object).__ac_local_roles_block__ = True 
```

# javascript - angular.js - 在 jsonp 请求后更新范围和模板

> ID：13141816
> 
> 赞同：2
> 
> 时间：2012-10-30T15:02:30.517
> 
> 标签：javascript, angularjs

我创建了一个在标签内加载一些 html 代码的指令：

**指示：**

```
var appDirectives = angular.module("skdApp", ["offerServices"]);
appDirectives.directive("widget", function() {
  return {
    restrict: 'A',
    template: '<div ng-controller="OfferCtrl"><p>{{offer.price}}</p></div>';
  } 
```

**服务**
此外，我正在使用服务来获取一些 json 数据

```
angular.module('offerServices', ['ngResource']).
  factory('Offer', function ($resource) {
    return $resource('url/offer.json', {},
      {
        get: {method: 'JSONP', params: {callback: 'JSON_CALLBACK'}}
      }
    );
}); 
```

**controller**
控制器将接收到的数据添加到作用域

```
function OfferCtrl($scope, Offer) {
  $scope.offer = Offer.get();
} 
```

现在我面临以下问题。在加载模板时，json 请求还没有完成。这导致模板显示为 {{offer.price}} 的空字符串。

一旦 offerServices 收到响应（即 offerService 响应可用），我需要一种使用相应值更新模板的方法

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:49:28.680

如何使用[ngCloak](http://docs.angularjs.org/api/ng.directive%3angCloak)

> 描述
> 
> ngCloak 指令用于防止 Angular html 模板在加载应用程序时被浏览器以原始（未编译）形式短暂显示。使用该指令可以避免 html 模板显示引起的不良闪烁效果。
> 
> 该指令可以应用于元素，但通常首选细粒度应用程序，以便从浏览器视图的渐进式渲染中受益。

# javascript - 选择具有共同 ID 的各种不同的类

> ID：13141818
> 
> 赞同：1
> 
> 时间：2012-10-30T15:02:32.083
> 
> 标签：javascript, jquery, jquery-selectors

我怎样才能减少这种选择器？

```
$("#id .class1, #id .class2, #id .class3, #id .class4, #id .class5").on("mouseover", function(e){
    // code
}); 
```

* * *

**编辑：**

例子：

```
$("#my_id .product, #my_id .date, #my_id .due").on("mouseover", function(e){
    $(this).addClass("edit");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:05:30.773

使用*attribute-starts-with*选择器

```
$("#id *[class^='class']"); 
```

或者，如果可能有一些其他`'class...'`类不应该包括在内，您可以手动过滤。

```
$("#id *[class^='class']").filter(function(i, el) {
    return /class\d+\b/.test(el.className);
}); 
```

这将搜索`'class'`plus 一个或多个数字，以及一个单词边界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:06:49.527

您可以使用该[`find()`](http://api.jquery.com/find/)方法将选择器分成两个不同的一次，从而删除重复的`#id`

```
$('#id').find( '.class1, class2, class3, class4, class5')
        .on("mouseover", function(e){
            // code
         }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:09:00.447

您可以使用使用上下文的选择器重载。

*上下文*可以是一个 jQuery 包装集或另一个选择器字符串。

```
$('.class1, .class2, .class3, .class4, .class5', '#id') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T15:22:22.660

在这种情况下，您可以使用该[`.filter()`](http://api.jquery.com/filter/)方法..

```
$("#id").filter(".class1, .class2, .class3, .class4, .class5").on("mouseover", function(e){
    // code
}); 
```

//OR [属性以选择器开头 ^](http://api.jquery.com/attribute-starts-with-selector/)

```
$("#id [class^="class"]").on("mouseover", function(e){
    // code
}); 
```

# function - 哪个选项更适合用作函数中的参数：整个对象或属性作为 vars

> ID：13141824
> 
> 赞同：0
> 
> 时间：2012-10-30T15:02:49.550
> 
> 标签：function, architecture, params

我在问自己哪种方法是处理参数的更好方法。给定这样的对象：

```
objet
  property1
  property2 
```

假设一个函数需要接收它，至少是 property1 和 property2 ，那么这个更好吗？

```
function(param/property1, param/property2) 
```

或这个？

```
function(entire_object) 
```

我可以猜测，例如传递整个对象对性能不利，而使用参数说明了函数需要什么……另一方面，我们可以说传递一个对象可以更加动态。不知道，一起讨论吧！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T18:12:35.210

> 我可以猜测，例如传递整个对象对性能不利

这可能是错误的。您可以将对象作为引用/指针传递。

将对象作为引用/指针传递可以被认为是“传递接口”。

比较“传递接口”和“传递单个参数”，前者可能是一个更稳定的接口。可以说，您的功能实现需要更改，并且您需要一个附加值。您始终可以从界面中获取更多信息，而无需对函数签名进行任何更改。如果您传递单个参数，则情况并非如此。

传递接口的一个缺点 - 从调用者的角度来看，如果各个参数更容易获得，那么创建一个对象只是为了传递给一个函数可能会很麻烦。

# java - 是否可以在标题对话框底部添加消息栏/工具栏？

> ID：13141825
> 
> 赞同：2
> 
> 时间：2012-10-30T15:02:50.230
> 
> 标签：java, swt, jface

使用 my`TitleAreaDialog`可以在按钮下方的底部添加一个区域或一个栏。当操作发生时，可以向用户显示一条消息。

这是我所指的一个例子

![在此处输入图像描述](../Images/50770f0997a56aa5430775fadfd8f0c6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:56:44.010

AFAIK，这对于 JFace 是不可能`Dialog`的。根据您正在做什么，您可能想看看 JFace [`ApplicationWindow`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fwindow%2FApplicationWindow.html)。这个类有一个方法`addStatusLine()`。您必须覆盖以下方法：

```
@Override
protected StatusLineManager createStatusLineManager() {
    StatusLineManager statusLineManager = new StatusLineManager();
    statusLineManager.setMessage(null, "YOUR_MESSAGE");
    return statusLineManager;
} 
```

您可以使用以下方法更改文本：

```
getStatusLineManager().setMessage("YOUR_NEW_MESSAGE"); 
```

[这](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.wb.rcp.doc.user%2Fhtml%2Fwizards%2Fjface%2Fapplicationwindow.html)是该`ApplicationWindow`课程的精彩概述。

# linux - 如何从内核写入只读文件？

> ID：13141829
> 
> 赞同：0
> 
> 时间：2012-10-30T15:03:21.710
> 
> 标签：linux, linux-kernel, kernel

我正在 2.6.22 内核中实现系统调用。在我的系统调用中，我获得了这样的文件描述符：

```
fd = sys_open(filename, O_WRONLY|O_CREAT, 0544); 
```

但是，当文件名指向只读文件时，我得到 fd 的负数 (-13)。问题是我需要写入文件名，即使它是只读的或由另一个用户拥有。

所以我的问题是，如何从内核写入只读文件？

是的，我读过 linux 日志中的帖子说从内核写入文件是一个坏主意。

我仍然需要这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:05:30.050

负数不是文件描述符，而是错误代码。具体来说，它将是`errno.h`错误编号之一的负数版本。

在这种情况下，`-13`您正在查看错误 13，这`EACCES`意味着您没有写入文件的权限。

# xml - 来自 XMLListCollection 的 Adob e Flex SpinnerList 图标字段

> ID：13141832
> 
> 赞同：0
> 
> 时间：2012-10-30T15:03:25.503
> 
> 标签：xml, apache-flex, mobile, adobe

当 dataprovider 是 xmllistcollection 时，我在 spinnerlist 中显示 iconField 时遇到问题。最初，我从对象的 ArrayCollection 开始，它正确显示了 iconField。然后我将这些相同的字段放入一个 xml 文件中。我正在毫无问题地读取文件，但图标字段显示为空白。我的图标存储在我的 XML 文件中名为“图像”的字段中。如果我设置 labelfield = @image，它会显示我存储在 xml 文件中的路径。有没有人见过这个？我什至尝试制作自定义 itemRenderer 并添加源设置为 data.@image 的图像，但它仍然不显示图像。

在此先感谢您的帮助。

```
 <s:SpinnerListContainer width="100%" height="180" horizontalCenter="0" focusedTextSelectionColor="#BE1E2D" focusColor="#BE1E2D" click="spnChange(event)">
            <s:SpinnerList id="spnList" height="100%" width="100%" typicalItem="999" wrapElements="true" gestureSwipe="spnList_gestureSwipeHandler(event)" gestureZoom="spnList_gestureSwipeHandler(event)" change="spnList_gestureSwipeHandler(event)" color="#000000">
                <s:itemRenderer>
                    <fx:Component>
                        <s:IconItemRenderer iconWidth="56" iconHeight="37" iconField="@image" height="100%" verticalAlign="middle"/>
                    </fx:Component>
                </s:itemRenderer>                   
            </s:SpinnerList>            
        </s:SpinnerListContainer> 
```

JH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:28:07.797

看起来我需要将 iconField 中的路径更改为不同的子目录。

```
<s:SpinnerList id="spnList" height="100%" width="100%" typicalItem="999" wrapElements="true" gestureSwipe="spnList_gestureSwipeHandler(event)" gestureZoom="spnList_gestureSwipeHandler(event)" change="spnList_gestureSwipeHandler(event)" color="#000000">
                <s:itemRenderer>
                    <fx:Component>                          
                        <s:IconItemRenderer iconWidth="56" iconHeight="37" **iconField="../@image"** height="100%" verticalAlign="middle"/>
                    </fx:Component>
                </s:itemRenderer>
            </s:SpinnerList> 
```

# youtube-api - 使用代理上传 Youtube，每个连接而不是系统范围

> ID：13141836
> 
> 赞同：2
> 
> 时间：2012-10-30T15:03:42.290
> 
> 标签：youtube-api

我有一个使用 youtube-api 上传视频的 Java 代码。到目前为止，我一直在使用系统配置来设置代理（http 和 https），并且一切正常。但是现在我对我们在服务器上使用代理的方式有了新的要求。由于我们在同一台服务器上运行其他服务，他们要求我不要使用系统范围的方法配置代理，因为这会影响所有使用 JVM 的服务。

```
System.setProperty("http.proxyHost", httpProxyHost);
System.setProperty("http.proxyPort", httpProxyPort); 
```

和

```
System.setProperty("https.proxyHost", httpsProxyHost);
System.setProperty("https.proxyPort", httpsProxyPort); 
```

最近几天我在互联网上进行了研究，没有发现任何有用的东西。我在 C# API 上找到了似乎将代理设置为连接的解释，但我没有找到在 Java 上实现相同方法的方法。

我想做这样的事情：

```
service = new YouTubeService(APPLICATION_NAME, DEVELOPER_KEY);
service.setUserCredentials(userName, password);
uploader = new ResumableGDataFileUploader.Builder(
        service, new URL(RESUMABLE_UPLOAD_URL), ms, newVideoEntry)
            .title(videoTitle)
            .trackProgress(listener, PROGRESS_UPDATE_INTERVAL)
            .chunkSize(DEFAULT_CHUNK_SIZE).build();

// fictional code to show what I want to do
uploader.setProxyHttp(httpProxyHost, httpProxyPort);
uploader.setProxyHttps(httpsProxyHost, httpsProxyPort);

uploader.start(); 
```

这与 Java 已经允许我们做的事情非常相似。请参阅此[http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-28T20:19:10.823

我刚刚用下面的代码解决了。调整方法`setPersonalUrlConnectionFactory`以设置您的代理并将其作为参数传递给您的上传者。

```
package com.google.gdata.client.uploader;

import com.google.gdata.client.media.ResumableGDataFileUploader;
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.URL;
import java.util.logging.Level;
import java.util.logging.Logger;

public class PersonalUrlConnectionInjector {

    public static void setPersonalUrlConnectionFactory(ResumableGDataFileUploader uploader) {
        try {
            java.lang.reflect.Field field = uploader.getClass().getSuperclass().getDeclaredField("urlConnectionFactory");
            field.setAccessible(true);
            java.lang.reflect.Field modifiersField = java.lang.reflect.Field.class.getDeclaredField("modifiers");
            modifiersField.setAccessible(true);
            modifiersField.setInt(field, field.getModifiers() & ~java.lang.reflect.Modifier.FINAL);

            field.set(uploader, new UrlConnectionFactory() {
                @Override
                public HttpURLConnection create(URL url) throws IOException {
                    return new sun.net.www.protocol.http.HttpURLConnection(url, MY_PROXY);
                }
            }); 
        } catch (Exception e) {
            /* DO LOG */
        }
    }
} 
```

# .htaccess - .htaccess 用所有文件重写完整路径（无重定向）

> ID：13141837
> 
> 赞同：-2
> 
> 时间：2012-10-30T15:03:46.353
> 
> 标签：.htaccess, mod-rewrite

我想将一个目录重写到另一个目录。所有文件（如 css/js/images/GET vars 等）的文件/链接结构必须保持完整。

我的文件目前在**http://www.example.org/_directory1/output/index.php?site=site1**

新路径应该是**http://www.example.org/newDir/index.php?site=site1**

简而言之，/_directory1/output/ 应该更改为 /newDir/。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:11:51.173

```
RewriteRule http://www.example.org/_directory1/output/$1 ^newDir/(.*)$ [NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:32:57.660

你会用

```
RewriteEngine On
RewriteBase /newDir/
RewriteRule ^(.*)$ http://www.example.org/newDir/$1 
```

在 /_directory1/output/ 的 .htaccess 中

[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)文档可能会进一步帮助您。

# c++ - boost::unordered_map 是否返回值的引用或副本

> ID：13141839
> 
> 赞同：0
> 
> 时间：2012-10-30T15:03:50.990
> 
> 标签：c++, boost, unordered-map

使用 boost unordered_map 时，如果我执行 map[key]，返回的类型是对值 V 的引用还是值的副本？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:06:01.420

这是一个参考，否则这将不起作用：

```
map[key] = value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:07:07.123

根据[文档](http://www.boost.org/doc/libs/1_38_0/doc/html/boost/unordered_map.html)，它似乎是一个参考。

```
mapped_type& operator[](key_type const& k); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:11:59.947

来自[Boost 文档](http://www.boost.org/doc/libs/1_38_0/doc/html/boost/unordered_map.html)：

> mapped_type& operator[](key_type const& k);
> 
> **效果：**
> 如果容器还没有包含键等效于 k 的元素，则插入值 std::pair(k, mapped_type())
> 
> **返回：**
> **对 x.second 的引用，**其中 x 是容器中已经存在的元素，或者是新插入的元素，其键等效于 k
> 
> **抛出：**
> 如果除调用 hasher 之外的操作抛出异常，则该函数无效。
> 
> **注意：** 可以使迭代器无效，但前提是插入导致负载因子大于或等于最大负载因子。
> 
> 对元素的指针和引用永远不会失效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:21:38.167

访问器操作符`[]`总是返回一个引用。如果地图元素不存在，则将创建它。因此，为避免重复搜索，以下模式很有用：

```
std::unordered_map<K, T> m = populate_me();

T & value = m[key];   // created if non-existent

// use "value" rather than repeated "m[key]" 
```

# java - 如何调试部署在 Weblogic 上的 EJB

> ID：13141844
> 
> 赞同：2
> 
> 时间：2012-10-30T15:04:08.530
> 
> 标签：java, debugging, ejb, weblogic

我有在 Weblogic 上运行的应用程序。我有另一个应用程序连接到部署在 Weblogic 上的应用程序并使用它的 EJB。我使用 JNDI 成功连接到 EJB，甚至我的调试器也显示该类当前已启动（但名称已更改 - WL 在类名末尾添加了一些内容（例如，如果类是 AEjb，则表明已启动的类是 AEjb_krtm_pfff .. .))。但我看不到变量，也看不到执行的行。那么有什么方法可以查看这个 EJB 类发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:09:06.453

**它与调试客户端应用程序的方式没有什么不同。**在调试器路径中也添加您的 EJB 源代码，并在要调试的 EJB 源代码上添加一个断点。

如果您的 EJB 部署在不同的 Weblogic 服务器上，那么您可能需要使用[**远程调试**](http://www.oracle.com/technetwork/developer-tools/jdev/remotedebugwls-086628.html)选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:14:03.397

看起来您需要调试部署在 WebLogic 服务器上的 EJB 代码，您可以使用以下任何选项进行调试：

1.  按照 Yogendra 的建议使用远程调试
2.  如果您可以控制包含 EJB 的应用程序的部署，则在管理服务器上以分解目录模式部署它，并在客户端 ping 服务器上部署的 EJB 代码时使用 JDeveloper 集成 WebLogic Server 调试源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-04T04:04:09.923

如果您使用独立客户端调用 EJB，并且在客户端遇到问题，则可以使用客户端的系统属性进行调试。

-Dweblogic.ejb.enhancement.debug=true（WLS 10.3.1.0 后）

-Dweblogic.ejb.proxy.debug=true (src 分支)

# javascript - 在主干中绑定/取消绑定窗口事件

> ID：13141846
> 
> 赞同：1
> 
> 时间：2012-10-30T15:04:15.393
> 
> 标签：javascript, backbone.js, backbone-events, window.location

我需要通过模型实例来表示 window.location.hash 以通过来自其他模型的事件来控制其状态。用户也可以通过输入地址字符串手动更改哈希值。用户更改必须在应用程序内部进行转换，并且应用程序还可以修改哈希以响应用户与他们所代表的 UI 的交互。有谁知道在这种情况下如何更新窗口哈希？

```
Hash = Backbone.Model.extend({
    initialize: function(){
        other_source.on('change', this.setHash, this);
        window.on('hashchange', this.update);//user may update hash manually in browser
        //window.on('hashchange', $.proxy(this.update, this)); - I tried this
        //_.bind(this.update, this); - and this
        // it doesn't work
    },
    update: function(data){
        //translate changes inside app
        this.clear();
        this.set(hashToObj(data));
        this.trigger('hash:changed', this.attributes);
    },
    setHash: function(){
        //Apply changes from inside app
        //I need to temporarily remove listening
        //because of inifinitive loop
        window.off('hashchange', this.update);
        window.location.hash = this.attributes;
        window.on('hashchange', this.update);
    }
}) 
```

# ios - shouldAutorotateToInterfaceOrientation 返回 YES

> ID：13141849
> 
> 赞同：0
> 
> 时间：2012-10-30T15:04:33.473
> 
> 标签：ios, cocoa-touch, ios5

我经常看到这样的代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return YES;
} 
```

如果在项目配置中设置了支持的方向，那么总是返回 YES 不是毫无意义吗？或者在某些情况下这会产生影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:12:44.697

`shouldAutorotateToInterfaceOrientation:``UISupportedInterfaceOrientations`（顺便说一句，自 iOS 6 以来已弃用）与 info plist 中的完全不同！如果您不实现此方法，则相应的视图控制器将永远不会自动旋转到该界面方向，无论您在`UISupportedInterfaceOrientations`.

从以下[文档`UISupportedInterfaceOrientations`](http://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW10)：

> 系统使用此信息（以及当前设备方向）来选择**启动应用程序的初始方向**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:13:11.623

也许在您的应用程序的许多部分中，您支持多种界面方向，但在一部分中您只支持其中一些（例如，您希望视频只在横向播放）

因此，即使您的应用程序支持纵向，您可能希望视图控制器使方向横向

编辑：我在这里发表评论是因为我无法评论其他答案。

@daniel-rinser 在 iOS6 中，系统检查项目支持的界面方向，并与 viewcontroller 支持的方向相交，因此它不仅适用于启动，而且适用于所有应用程序执行。

# wpf - 我想在我的桌面上使用 XAML 开发一个 WPF 应用程序，然后将其转换为一个 windows phone 应用程序。我可以这样做吗？

> ID：13141857
> 
> 赞同：1
> 
> 时间：2012-10-30T15:05:26.383
> 
> 标签：wpf, xaml, windows-phone

我是新来的。但我想使用 WPF、XAML 开发桌面应用程序，然后将其转换为 windows phone 应用程序。但我对此没有明确的想法......你能帮忙吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:22:20.523

> 要实现 MVVM，通常在可移植类库项目中创建模型和视图模型，因为可移植类库项目不能引用非可移植项目。模型和视图模型可以在同一个项目中，也可以在不同的项目中。如果您使用单独的项目，请将视图模型项目的引用添加到模型项目。
> 
> 编译模型和视图模型项目后，在包含视图的应用程序中引用这些程序集。如果视图只与视图模型交互，您只需引用包含视图模型的程序集。

受此启发，我认为 WPF 和 WP 中的用户界面不可能相同。XAML 会有所改变。因此，由于您还没有开始，该方法可能是使用[可移植类库项目](http://msdn.microsoft.com/en-us/library/gg597391%28v=vs.100%29.aspx)构建核心（类、业务逻辑、功能......） 。和两个 UI：一个用于 WPF，另一个用于 WP。

# ios - 自定义 UIToolbar，Apple 会允许什么？

> ID：13141861
> 
> 赞同：0
> 
> 时间：2012-10-30T15:05:34.300
> 
> 标签：ios, uitoolbar

我正在寻找将我的标准 UIToolbar（带有基于文本的按钮的不透明黑色）转换为更图形化的东西。可能类似于以下内容（取自 Blackberry 应用程序）：

![在此处输入图像描述](../Images/4cc9cf64221bd239bdf0ce7a61046913.png)

这会违反人机界面准则吗？我以前见过为 UITabbar 做过这种类型的定制，但从来没有为 UIToolbar 做过。如果我有一个执行基本 EDIT 任务的 EDIT 按钮，例如允许我删除表中的一行。如果我有像上面这样的自己的 EDIT 图形，Apple 会有什么感觉？

另外，与其创建自己的 UIToolbar 或子类化 UIToolbar 并对其进行修改以满足我的需要，我难道不能将一堆 UIButtons 与自定义图形并排排列成一个工具栏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:16:57.580

苹果访问不会有任何问题，您不必继承任何东西，只需将其他组件放入工具栏：

```
-(UIToolbar *) toolBarActive {
if( _toolBarActive == nil ) {
    _toolBarActive = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 360, 320, 60)];
    [_toolBarActive setBackgroundImage:[UIImage imageNamed:@"image.png"] forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];
    _toolBarActive.tintColor = [UIColor blackColor];  
    [_toolBarActive setBackgroundColor:[UIColor blackColor]];
    UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
    NSMutableArray *arrayItem = [[NSMutableArray alloc] init];
    [arrayItem addObject:flexibleSpace];
    [arrayItem addObject:self.buttonItem1];
    [arrayItem addObject:flexibleSpace];
    [arrayItem addObject:self.buttonItem2];
    [arrayItem addObject:flexibleSpace];
    [arrayItem addObject:self.buttonItem3];
    [arrayItem addObject:flexibleSpace];
    [arrayItem addObject:self.buttonItem4];
    [arrayItem addObject:flexibleSpace];
    [_toolBarActive setItems:arrayItem animated:YES];
}
return _toolBarActive; 
```

}

例如 buttonItem1 定义为：

```
- (UIBarButtonItem *) buttonItem1 {
    if( _buttonItem1 == nil ) {
        _uttonItem1 = [[UIBarButtonItem alloc] initWithCustomView:self.button1];
        [_buttonItem1 setEnabled:YES];
        [_buttonItem1 setBackgroundVerticalPositionAdjustment:100.0f forBarMetrics:UIBarMetricsDefault];
    }
    return _buttonItem1;
} 
```

和 button1 定义为：

```
 - (UIButton *) button1 {
    if( _button1 == nil ) {
        _button1 = [[UIButton alloc] initWithFrame:CGRectMake(5, 5, 50, 50)];
        [_button1 addTarget:self action:@selector(addNewImage) forControlEvents:UIControlEventTouchUpInside];
        [_button1 setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];
    }
    return _button1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:12:08.267

我认为您必须确保在定制时遵循苹果的准则。否则他们会拒绝。

您可以在[此处](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW33)查看工具栏指南 部分：**Bars-->Toolbar**

# c# - 使用实体框架连接多个表

> ID：13141862
> 
> 赞同：5
> 
> 时间：2012-10-30T15:05:39.253
> 
> 标签：c#, linq, entity-framework

我正在尝试使用 EF 加入 3 个表，但它会抛出一个错误说

```
consider swaping conditions on either side of equals 
```

有人可以帮忙吗

```
 var billdata = from billtotal in context.billTotals
                                   join billcard in context.billClubcards
                                       on billtotal.OrderID equals billcard.OrderID

                                   join billtender in context.billTenders
                                       on billtender.OrderID equals billtotal.OrderID

                                   select billtotal; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T15:12:20.797

编译器错误非常正确：-

`The name 'billtender' is not in scope on the left side of 'equals'. Consider swapping the expressions on either side of 'equals'.`

您要加入的表需要在左侧，您要加入的表需要在右侧。因此：-

```
var billData =
    from billtotal in context.billTotals
    join billcard in context.billClubcards
        on billtotal.OrderId equals billcard.OrderId
    join billtender in context.billTenders
        on billtotal.OrderId equals billtender.OrderId
    select billtotal; 
```

如果您想知道为什么，那是因为查询语法只是底层扩展方法的语法糖：-

```
context.billTotals
  .Join(
    context.billClubcards,
    billtotal => billtotal.OrderId,
    billclubcard => billclubcard.OrderId,
    (billtotal, billclubcard) => billtotal)
  .Join(
    context.billTenders,
    billtotal => billtotal.OrderId,
    billtender => billtender.OrderId,
    (billtotal, billtender) => billtotal); 
```

您的原始实现将扩展为：-

```
context.billTotals
  .Join(
    context.billClubcards,
    billtotal => billtotal.OrderId,
    billclubcard => billclubcard.OrderId,
    (billtotal, billclubcard) => billtotal)
  .Join(
    context.billTenders,
    billtotal => billtender.OrderId, // billtender isn't in scope!
    billtender => billtotal.OrderId, // billtotal isn't in scope!
    (billtotal, billtender) => billtotal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:08:08.127

您要加入的表的属性需要在 equals 的右侧

转变

从： `on billtender.OrderID equals billtotal.OrderID`

到： `on billtotal.OrderID equals billtender.OrderID`

# javascript - Javascript滑动垂直面板切换

> ID：13141863
> 
> 赞同：1
> 
> 时间：2012-10-30T15:05:41.150
> 
> 标签：javascript, jquery, web

一直在做一个 codeacademy 课程[http://www.codecademy.com/ru/courses/javascript-lesson-951/0?curriculum_id=4fc3018f74258b0003001f0f#!/exercises/6](http://www.codecademy.com/ru/courses/javascript-lesson-951/0?curriculum_id=4fc3018f74258b0003001f0f#!/exercises/6) - 制作一个垂直滑动面板。问题是这些 codeacademy 的家伙没有解释如何使面板不仅向下滑动，而且还能向后滑动。我试着自己做，但没有取得任何成果。请帮忙。

```
$(document).ready(function(){
ANIMATION_LENGTH = 400;
$panel = $("#panel");
$tab = $("#tab");
var $isShown;
$tab.click(function($isShown){
    alert($isShown);
    if ($isShown == false)
    {$isShown = true;}
    else if ($isShown == true)
    {$isShown = false;}
    var newTop = $isShown == false ? "-180px" : "0px";
    var lit = {"top": newTop};
    $panel.animate(lit, ANIMATION_LENGTH);
    return $isShown         
});}); 
```

CSS

```
#panel {
    padding: 50px;
    height: 100px;
    width: 500px;
    text-align: center;
    font-size: 24px;
    font-family: Arial;
    font-weight: bold;
    background: #EEE;
    cursor: pointer;
    position:absolute;
    top: -180px;

    -webkit-border-bottom-left-radius: 10px;
}

#tab {
    position:absolute;
    bottom: -25px;
    right: 0px;
    padding: 10px;
    background: #EEE;
    font-size: 16px;
    text-decoration: none;
    -webkit-border-bottom-right-radius: 10px;
    -webkit-border-bottom-left-radius: 10px;
} 
```

html

```
<html>
<head>
    <title>Result</title>
    <link type="text/css" rel="stylesheet" href="panel.css" />
    <script type="text/javascript" src="panel.js"></script>
</head>

<body>
    <div id="panel">
        Awesome hidden sliding pane
        <a href="#panel" id="tab">Click to show</a>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:34:06.733

单击侦听器获取传递的事件，而不是您的布尔值。

```
$(document).ready(function(){
    var $isShown,
        ANIMATION_LENGTH = 400,
        $panel = $("#panel"),
        $tab = $("#tab");
    $tab.click(function(event){
        event.preventDefault();
        $isShown = !$isShown;
        var newTop = $isShown == false ? "-180px" : "0px";
        var lit = {"top": newTop};
        $panel.animate(lit, ANIMATION_LENGTH);       
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:20:46.530

这就是我解决问题的方法：

[http://jsfiddle.net/du8z8/3/](http://jsfiddle.net/du8z8/3/)

HTML

```
<div class="con">
    <div id="tab">Click to Show</div>
    <div id="panel" style="display:none;">
        <p>Awesome hidden sliding pane</p>
        <div id="close">Close</div>
    </div>    
</div> 
```

查询

```
$("#tab").click(function() {
    $("#tab").toggle();
    $("#panel").slideToggle('slow');
});    

$("#close").click(function() {
    $("#tab").toggle();
    $("#panel").slideToggle('slow');        
}); 
```

CSS

```
 .con { position:relative; }

    #tab {
        position:absolute;
        top:0px;
        right:20px;
        padding: 10px;
        background: #EEE;
        font-size: 16px;
        text-decoration: none;
        -webkit-border-bottom-right-radius: 10px;
        -webkit-border-bottom-left-radius: 10px;
        cursor:pointer;
    }

    #close { padding:10px 0 0 0; font-size:0.750em; }

    #panel {
        padding:50px;
        width:100%;
        text-align:center;
        font-size:1em;
        font-family:Arial;
        font-weight:bold;
        background:#EEE;
        cursor:pointer;
        -webkit-border-bottom-left-radius:10px;
    }

​ 
```

# c# - 如何创建具有未知实体状态的关系的对象

> ID：13141870
> 
> 赞同：3
> 
> 时间：2012-10-30T15:05:48.067
> 
> 标签：c#, entity-framework-4

我一直在修改在实体框架生成的模型中包含外键的选项（来自现有的 MSSQL 数据库）。

假设我有一个 Person 和 Company 模型，我想同时创建这两个模型。公司可以有多个人员。Person 有 Id、Name、CompanyId，Company 有 Id 和 Name。

我不太确定我应该如何创建彼此相关的新对象。我想出的一种方法如下：

```
// Company needs ID and Name, and ID is auto generated, so -1
Model.Company newCompany = Model.Company.CreateCompany(-1, "Test Inc");

// Person needs ID, Name and a CompanyID. What is CompanyId supposed to be?
Model.Person newPerson = Model.Person.CreatePerson(-1, "John Doe", -1);

// And to actually get the Company relation going
newPerson.Company = newCompany; 
```

然后将其添加到上下文并保存。

现在，这行得通，但我不确定这是我应该做的吗？

因为，如果我们改为想象我会抽象这些的创作（这是我在应用程序的大部分部分中拥有的）。也许我们有以下功能，我仍然必须提供 ID，即使这个对象的 EntityState 是未知的。据我所知，它可能有一个 ID，并非所有公司都是新公司。所以我不能这样做：

```
public static Model.Person CreatePerson(string name, Model.Company company) {
    Model.Person newPerson = Model.Person.CreatePerson(-1, name, company.Id);
    return newPerson;
} 
```

但是如果 company 是新添加的对象，这将失败。因此，我是否认为在 Create-method 中使用实际 ID 是无用的？因为除非我检查实体状态，否则我最终将不得不执行以下操作：

```
public static Model.Person CreatePerson(string name, Model.Company company) {
    Model.Person newPerson = Model.Person.CreatePerson(-1, name, -1);
    newPerson.Company = company;
    return newPerson;
} 
```

我意识到在您有 ID 但没有对象的情况下使用外键 ID 创建对象的好处，并且您实际上不需要从数据库中获取整个对象。但我对如何最好地处理这件事感到非常困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:19:48.443

您可能必须同时设置外键属性和导航属性以涵盖`Company`方法中新的和现有的两种情况：

```
public static Model.Person CreatePerson(string name, Model.Company company) {
    Model.Person newPerson = Model.Person.CreatePerson(-1, name, company.Id);
    newPerson.Company = company;
    return newPerson;
} 
```

*   If `company`is new EF 将忽略该`newPerson.CompanyId`值并仅基于导航属性创建关系`newPerson.Company`。
*   如果`company`存在（在 state`Unchanged`或中`Modified`），则 FK 属性`newPerson.CompanyId`必须与主键 value 匹配`newPerson.Company.Id`，否则会出现异常。

# git - SVN 到 Git 分支/标签/主干

> ID：13141871
> 
> 赞同：20
> 
> 时间：2012-10-30T15:05:51.220
> 
> 标签：git, svn, tags, branch, trunk

我正在从 SVN 飞跃到 Git（不过，我对 SVN 的尊重仍然存在），我对一些 SVN 到 Git 术语有一些疑问。在 SVN 中，许多存储库是这样设置的：

```
- trunk  : The place where all of the main development occurs
- tag    : Storing versions of major releases or important milestones
- branch : Where smaller "branch" development occurs as to not conflict with the main development occurring in the trunk, then is later merged into the trunk 
```

`branch/tag/trunk`Git中的标准约定名称是什么？

感谢您的时间。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-30T15:23:40.537

*   SVN 主干 --- Git master (refs/heads/master)
*   SVN 分支/* --- Git 分支 (refs/heads/*)
*   SVN 标签/* --- Git 标签 (refs/tags/*)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-30T15:17:13.187

Git 不会强迫您为项目使用特定的结构。所有对 git 本身很重要的信息都将存储在隐藏的 .git 目录中。要列出或查看您的分支和标签，请使用 git 命令：

```
git branch 
git tag
... 
```

要获取更多信息，请使用`git help`命令或查看这本免费[书籍](http://git-scm.com/book)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-30T15:20:50.193

真的没有任何直接的类似物。SVN 使用目录结构将副本直接存储在存储库中，以允许分支和标签。因此，创建一个结构以将这些副本保存在存储库中是有概念的。

另一方面，Git 将其维护为元信息，并将所有内容视为由哈希标识的“时间”点的快照：

> Subversion 通过副本标记历史中的某些检查点，副本通常放置在一个名为 tags 的目录中。Git 标签更强大。Git 标签可以附加任意描述（第一行在提交情况下是特殊的），有些人实际上将整个发布公告存储在标签描述中。标记的人的身份被存储（再次遵循与提交者身份相同的规则）。您可以标记提交以外的其他对象（但这在概念上是相当低级的操作）。并且可以对标签进行加密 PGP 签名以验证身份（根据 Git 的工作性质，该签名还确认了相关修订、其历史和树的有效性）。

所以基本上没有“存储库结构”；只有项目结构（即，您会在`trunk`SVN 存储库中找到的内容、分支或标签）

# c# - 设置已分组的列的可见性（单列）

> ID：13141875
> 
> 赞同：1
> 
> 时间：2012-10-30T15:06:02.397
> 
> 标签：c#, devexpress, xtragrid

我将网格中的数据按两个不同的列分组。

其中一列需要保留为可见，另一列需要从网格中删除。

我已将“ShowGroupedColumns”设置为 false，因为它会自动处理列选择器等。

但我似乎无法弄清楚如何让我想要保留的内容可见。

有什么办法，将 ShowGroupedColumns 设置为 false，我可以将它按列分组并在网格中也有列？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T06:33:33.713

[DevExpress 支持中心](http://www.devexpress.com/Support/Center)已经讨论了同样的问题： [显示单个列，即使它们被分组](http://www.devexpress.com/Support/Center/p/Q364806.aspx)

# marklogic - 可以加入不同 MarkLogic 数据库中的文档吗？

> ID：13141876
> 
> 赞同：0
> 
> 时间：2012-10-30T15:06:21.120
> 
> 标签：marklogic

在 MarkLogic 5.x 中，是否可以将一个数据库中的文档连接到另一个数据库中的文档？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:40:51.520

猜测您的意思是进行一次搜索并合并来自多个数据库的搜索结果。

您可以尝试，根据具体要求，您可能会得到一些合理的结果，但这不是推荐的方法。这就像搜索两个独立的 Oracle 数据库。您必须进行两次单独的搜索，然后自己合并结果，这会带来各种复杂情况。

更好的方法是将内容放在一个数据库中，并使用目录或集合在逻辑上将它们分开。您可以使用 MarkLogic 集群在多台机器上传播内容，但这需要企业许可证。

！

# javascript - Javascript日期函数不起作用

> ID：13141877
> 
> 赞同：0
> 
> 时间：2012-10-30T15:06:22.053
> 
> 标签：javascript, html, function, date

嗨，我正在尝试将 31 天添加到“myDate”，即当前日期。它应该让日期加上 31 天，然后 convertDate 函数应该将其转换为类似“2012 年 11 月 31 日”的内容。但它不起作用。有谁知道为什么？

这是主要功能...

```
function process (infoarray) {
  var myDate = new Date();
  //var final = convertDate(myDate);

  var length = infoarray.length;
  var final_string;
  for (var b = 0; b < length; b++) {
    if (b == 0) {
      if (infoarray[b][3] == 'After') {
        final_string = '<b>' + infoarray[b][3] + '&nbsp;' + infoarray[b][1] + '</b><br/>' + infoarray[b][0] + '<br/>';
      } else {
        final_string = '<b>' + infoarray[b][1] + '&nbsp;' + infoarray[b][3] + '&nbsp;' + infoarray[b][2] + '</b><br/>' + infoarray[b][0] + '<br/>';
      }
    } else {
      if (infoarray[b][3] == 'After') {

        final_string = final_string + '<br/><b>' + infoarray[b][3] + '&nbsp;' + convertDate(myDate.setDate(myDate.getDate() + 31)) + '</b><br/>' + infoarray[b][0] + '<br/>';
      } else {
        final_string = final_string + '<br/><b>' + infoarray[b][1] + '&nbsp;' + infoarray[b][3] + '&nbsp;' + infoarray[b][2] + '</b><br/>' + infoarray[b][0] + '<br/>';
      }
    }
  }
  return final_string;
} 
```

这是我从上面的函数中关注的那一行...

```
final_string = final_string + '<br/><b>' + infoarray[b][3] + '&nbsp;' + convertDate(myDate.setDate(myDate.getDate() + 31)) + '</b><br/>' + infoarray[b][0] + '<br/>'; 
```

这是 convertDate 函数...

```
function convertDate(d) {
    var day = d.getDate();
    if (day < 10) {
        day = '0' + day;
    }
    var year = d.getFullYear();
    var month = d.getMonth();
    var months=['Jan','Feb','Mar','Apr','May','June','July','Aug','Sep','Oct', 'Nov','Dec'];
    var currentMonth = months[month];
    return (currentMonth + ' ' + day + ', ' + year);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:08:58.623

`myDate.setDate(...)`修改`Date`实例的值，但不返回任何内容。
您需要先调用`setDate`，然后将变量传递给您的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:23:45.767

这里。先计算再调用

[演示](http://jsfiddle.net/mplungjan/VPjGv/)；

```
var myDate = new Date();
myDate.setDate(myDate.getDate()+31);

final_string = final_string + '<br/><b>' +
infoarray[b][3] + '&nbsp;' + 
convertDate(myDate) + '</b><br/>' + infoarray[b][0] + '<br/>'; 
```

或者将其添加到函数中：

```
.... convertDate(myDate,31) + .... 
```

和

```
function convertDate(d,offset) {
 if ( offset ) d.setDate(d.getDate()+offset);
 var day = d.getDate();

 if (day < 10) {
    day = '0' + day;
 }
 var year = d.getFullYear();
 var month = d.getMonth();
 var months=['Jan','Feb','Mar','Apr','May','June','July','Aug','Sep','Oct', 'Nov','Dec'];
 var currentMonth = months[month];
 return (currentMonth + ' ' + day + ', ' + year);
} 
```

[演示](http://jsfiddle.net/mplungjan/cJ9UK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:16:49.083

通过使用 setDate，您可以告诉 Date 对象将天数设置为 32 到 62 之间的某个值，这没有多大意义。

添加 31 天的一个好方法是使用 getTime，它返回自 1970 年 1 月 1 日以来经过的毫秒数：

```
myDate.setTime( myDate.getTime()+31*24*60*60*1000 );
//31Days x 24 hours x 60 minutes x 60 seconds x 1000 msecs 
```

# android - 检测具有相同 sharedUserId 的应用程序

> ID：13141879
> 
> 赞同：0
> 
> 时间：2012-10-30T15:06:25.537
> 
> 标签：android, android-manifest, ipc

有没有办法`shareUserId`从第三个应用程序中获取具有相同功能的应用程序。我的意思是我希望`sharedUserId`从我的应用程序中检测到具有相同功能的 2 个应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:18:17.057

使用`PackageManager`并检查每个已安装软件包的用户 ID。[如果包使用它， PackageInfo 结构](http://developer.android.com/reference/android/content/pm/PackageInfo.html)中有一个`sharedUserId`字段将被设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-23T17:00:34.277

我将在这里改进@Marcin Orlowski 的[答案](https://stackoverflow.com/a/13142107/4744263)。

`sharedUserId`在 Kotlin 中获取的方法是：

```
context.packageManager.getPackageInfo(context.packageName, 0).sharedUserId 
```

但它只有在你`sharedUserId`在应用程序的 Manifest 文件上定义了 时才有效，否则在调用上述代码时你会得到一个空返回。

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:sharedUserId="your-sharedUserId" 
```

# java - 使用 Mockito 测试返回的字符串是否具有一定的长度

> ID：13141880
> 
> 赞同：5
> 
> 时间：2012-10-30T15:06:31.417
> 
> 标签：java, string, junit, mocking, mockito

有一个带有多个参数的方法返回一个字符串。在许多情况下，该方法会引发异常。当它返回时，字符串的内容取决于参数和插入计算机的某个 USB 加密狗的配置。返回的字符串的长度完全取决于参数。

我想知道如何使用 Mockito（我是新手）对此进行单元测试。当返回的字符串具有一定长度时，其中一种测试方法应该成功完成。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T15:14:19.643

有这样的界面：

```
interface Foo {
    void method(String s);
} 
```

一种想法是使用正则表达式匹配：

```
final Foo mock = mock(Foo.class);
mock.method("abc");
verify(mock).method(matches(".{3}")); 
```

不幸的是，没有内置的字符串长度匹配器（应该有！），但编写自定义匹配器很容易：

```
private static String hasSize(final int size) {
    return argThat(new ArgumentMatcher<String>() {
        @Override
        public boolean matches(Object argument) {
            return argument.toString().length() == size;
        }
    });
} 
```

现在只需调用静态方法：

```
verify(mock).method(hasSize(4)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T16:53:48.793

如果您想坚持使用 Hamcrest，Tomasz 的答案非常好。另外，他使用了一种描述意图的方法，而不是在您的验证码中插入匿名类。+1 他的回答:)

[但是FESTAssert](https://github.com/alexruiz/fest-assert-2.x/wiki/One-minute-starting-guide)库有一个替代方案，`ArgumentCaptor`它可以提供更多简单的断言，而无需编写一个，并且以流利的方式。当你有很多断言时，Hamcrest 会变得有点不安。所以这就是我大部分时间都在使用的东西：

```
@RunWith(MockitoJUnitRunner.class)
public class MyTypeTest {

    @Mock MyType myType;
    @Captor ArgumentCaptor<String> stringCaptor;

    @Test public void ensure_method_receive_String_that_has_32_chars() {
        // given
        ...
        // when
        ...
        // then
        verify(myType).method(stringCaptor.capture());
        assertThat(stringCaptor.getValue()).isNotNull().hasSize(32);
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-02T06:38:04.300

从 Java 8 开始，您可以使用以下单行代码检查长度：

```
verify(yourMock).theMethod(argThat(a -> a.toString().length() == LENGTH)); 
```

（使用`import static org.mockito.ArgumentMatchers.argThat;`）

# php - 您如何检查数据库中的时间到今天的日期？

> ID：13141881
> 
> 赞同：0
> 
> 时间：2012-10-30T15:06:30.733
> 
> 标签：php, date

我正在尝试编写一个条件来检查表格中的日期。如果表中的日期与今天的日期相同，它将忽略。如果不是它就不会破裂。

```
if(strtotime($row['timefield']) == (date(Y-m-d)){

break 1;
} 
```

^ 这不起作用，但这是我想要做的。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:09:14.877

如果您的数据库使用本地时间/日期，您可以在数据库端执行此操作。

（假设 MySQL，并且`timefield`是日期类型）：

```
SELECT
    CASE
        WHEN timefield = CURDATE()
            THEN 1
        ELSE 0
    AS is_today 
```

如果`timefield`是日期时间，那么：

```
SELECT
    CASE
        WHEN DATE(timefield) = CURDATE()
            THEN 1
        ELSE 0
    AS is_today 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:11:32.933

我很确定问题出在日期时间的格式上。取而代之的是比较具有可比性和严格性的东西，例如 unix 时间戳。

所以基本上 NullPointer 刚才说的......该死的，很快：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:10:43.037

假设`timefield`是`DATE`类型：

```
if (strtotime($row['timefield']) != date('Y-m-d')){
    // Do insert
} 
```

# php - hook_node_view 奇怪的行为

> ID：13141883
> 
> 赞同：0
> 
> 时间：2012-10-30T15:06:40.157
> 
> 标签：php, drupal

我正在使用 hook_node_view 来显示节点的内容而不是另一个节点。

```
function mymodule_node_view($node, $view_mode, $langcode) {
  if ($node->nid == 89) {
    $room = node_load(90);

    $node->content['mymodule_additional_content'] = node_view($room);
  }
} 
```

节点 90 的模板显示“ROOM”文本（用于测试）。

但这里显示的不仅仅是 "ROOM" ：

> 房间
> 
> 语言法语
> 
> 加巴里特：
> 
> 页面/chambres.tpl.php

任何的想法 ？

编辑：如果我将第 5 行替换为：

```
 $node->content = array('mymodule_additional_content' => node_view($room)); 
```

因此删除之前添加到 $node->content 的所有其他内容，我得到了结果：

> 房间
> 
> 语言法语

这意味着在调用钩子之后添加“Language Français”。但是哪里 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:59:53.773

@Clive 的工作答案：

这将是另一个模块，它实现了在您之后运行的相同钩子，因此您的更改会被添加到。尝试遵循如何更新模块的权重指南，以使您的模块的钩子在任何其他钩子之后运行，这应该可以解决问题。

# jquery - Xcode ajax 调用本地资源

> ID：13141890
> 
> 赞同：0
> 
> 时间：2012-10-30T15:07:06.060
> 
> 标签：jquery, html, ajax, xcode

我们有一个带有`UIWebView`内部的 xCode 应用程序。在 webview 中有以下 JS 代码：

```
function ajaxCall(file)
{
    $.ajax({
        url:'ajax/'+file,cahce:false,async:true,
        success:function(data){$('#holder').html(data)}
    });
} 
```

有一个名为填充 HTML 文件的**本地文件夹，我们正在尝试异步加载。**`ajax`当我从一切正常运行 html 代码`127.0.0.1`时，当我在笔记本电脑上将代码作为本地 HTML 文件运行时，它会显示`'XMLHttpRequest cannot load file:///C:/xampp/htdocs/webroot/ajax/file.html. Origin null is not allowed by Access-Control-Allow-Origin.'`. 在 iPhone 设备上它也不起作用。

我在 iPhone 上找不到错误。我尝试使用它来调试它，`error:function(jqXHR, textStatus, errorThrown){alert(textStatus);}`但它说“错误”，仅此而已。`errorThrown`也是空的。

在 iPhone 上创建对本地文件的 ajax 调用的正确方法是什么？

FIX：有没有办法为文件夹`Access-Control-Allow-Origin: *`内的 HTML 文件创建一个假的`ajax`？

# cucumber - 如何在黄瓜中测试具有多个背景的相同功能

> ID：13141894
> 
> 赞同：25
> 
> 时间：2012-10-30T15:07:09.593
> 
> 标签：cucumber

我有一个在黄瓜中运行良好的功能（一个 .feature 文件）。

功能中所有场景的后台只是设置了一个用户，然后以管理员身份登录，例如

```
 Background:
     Given I am logged in as a supervisor with an existing supervisee

   ...loads of scenarios 
```

但是，应用程序的设计/目标已经改变，无论您是以主管还是用户身份登录，相同的场景都应该可以工作。对于大多数其他应用程序的设计对于主管/用户而言不对称，情况并非如此。

有什么理智的方法可以避免复制和粘贴具有不同背景的整个功能文件？似乎没有一种方法可以参数化背景（例如，使用 Either: 或：节），也没有一种方法可以拉入带有大量场景的外部文件。想法？

```
 Background:
     Given I am logged in as an existing supervisee

   ...same loads of scenarios 
```

这是一些幻想小黄瓜语法（不存在）

```
 Background Outline:
     Given I am logged in as a <user>

   Backgrounds:
     | user                                   |
     | supervisor with an existing supervisee |
     | an existing supervisee                 |

   ...loads of scenarios 
```

或者不同的幻想小黄瓜语法：

```
 Background:
     Given I am logged in as an existing supervisee

   Include Scenarios:
     supervisor.features 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T14:23:38.987

如果是我，我只会吸收重复：

[http://dannorth.net/2008/06/30/let-your-examples-flow/](http://dannorth.net/2008/06/30/let-your-examples-flow/)

另一种方法是在功能上使用标签，指示您要针对两个用户组运行方案。然后使用 Around 钩子运行场景两次，每种类型的用户一次。

我们之前已经讨论过诸如背景大纲之类的事情，但我们得出的结论是，实施它不值得额外的复杂性。

# c# - 语句后 Sql 连接目录更改

> ID：13141896
> 
> 赞同：0
> 
> 时间：2012-10-30T15:07:23.557
> 
> 标签：c#, sql

问题：

在将数据插入另一个数据库的数据库上使用 SqlCommand() 运行 Sql 命令后，以下所有语句都会出错，并带有 ExceptionInvalid 对象名称。

问题：

为什么会这样？

附加信息：

我知道如何通过在选择部分的表之前添加临时数据库名称来修复它，但是由于它是在该数据库的上下文中运行的，所以这不是必需的，而且当我在 SQL 管理工作室中单独运行语句时也不是

程序逻辑：

1.  创建并填充临时数据库（所有表 ASI_...）
2.  在临时数据库的上下文中选择数据，然后将其插入另一个数据库（@AcuDB）
3.  对 X 查询重复步骤 2

插入代码：

```
if (TempD.State == System.Data.ConnectionState.Closed) TempD.Open();
                            Command = new SqlCommand(temp, TempD);
                            Command.CommandTimeout = 0;
                            Command.ExecuteNonQuery(); 
```

在之前的类似语句之后运行的示例 Sql 出现错误：

> 插入@AcuDB ..Batch （公司ID，分支机构ID，模块，BatchNbr，CreditTotal，DebitTotal，ControlTotal，CuryCreditTotal，CuryDebitTotal，CuryControlTotal，CuryInfoID，LedgerID，BatchType，状态，AutoReverse，AutoReverseCopy，OrigModule，OrigBatchNbr，DateEntered，Released，Posted， LineCntr,CuryID,ScheduleID,NoteID,CreatedByID,CreatedByScreenID,CreatedDateTime,LastModifiedByID,LastModifiedByScreenID,LastModifiedDateTime,Hold,Description,Scheduled,Voided,FinPeriodID,TranPeriodID) 选择 2, 1,Module,BatchNbr,CreditTotal,DebitTotal,ControlTotal,CuryCreditTo ,CuryControlTotal,i.CuryInfoID, isnull((从@AcuDB..ledger中选择a.LedgerID a.LedgerCD = b.LedgerID),0) [LedgerID],BatchType,Status,AutoReverse,AutoReverseCopy,OrigModule,OrigBatchNbr, DateEntered [DateEntered],Released,Posted,LineCntr,b.CuryID,ScheduleID,NoteID, 'B5344897-037E-4D58-B5C3-1BDFD0F47BF9' [CreatedByID]，'00000000' [CreatedByScreenID]，GETDATE() [CreatedDateTime]，'B5344897-037E-4D58-B5C3-1BDFD0F47BF9' [LastModifiedByID]，LastModifiedByID]，'00000' GETDATE() [LastModifiedDateTime],Hold,Description,Scheduled,Voided,b.FinPeriodID,TranPeriodID from Temp..ASI_GLBatch b 内部连接 ​​@AcuDB..CurrencyInfo i on i.CuryEffDate = b.DateEntered 交叉连接 @AcuDB..glsetup g其中 b.companyID = @CpnyCD 和 b.branchID = @BranchCDTranPeriodID 来自 Temp..ASI_GLBatch b 内部连接 ​​@AcuDB..CurrencyInfo i on i.CuryEffDate = b.DateEntered 交叉连接 @AcuDB..glsetup g 其中 b.companyID = @CpnyCD 和 b.branchID = @BranchCDTranPeriodID 来自 Temp..ASI_GLBatch b 内部连接 ​​@AcuDB..CurrencyInfo i on i.CuryEffDate = b.DateEntered 交叉连接 @AcuDB..glsetup g 其中 b.companyID = @CpnyCD 和 b.branchID = @BranchCD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:48:15.380

由于 SQL 试图暗示上下文的方式，像这样跨越数据库总是不稳定的。在这种情况下，除非`@AcuDB`包含包含数据库和模式的完全限定地址，否则由于切换上下文的方式，您将遇到错误。了解`@AcuDB`包含的内容并尝试在存储过程中运行批处理。如果必须的话，设置一个单独的实例来沙箱化场景。C# 的结尾将继续使事情复杂化，直到你把它剪掉一点并确保你的 SQL 是好的。确定没问题后，将其重新集成到 C# 代码中并从那里开始工作。

# sql - 在表中查找下一次出现的值

> ID：13141899
> 
> 赞同：5
> 
> 时间：2012-10-30T15:07:35.893
> 
> 标签：sql, tsql

如果这已经被覆盖，请提前道歉。

我正在研究一个结构不是特别好的数据库，但它归第三方所有，无法更改。

我需要一些关于 t-sql 的帮助，以便在表中查找下一个值并根据结果返回记录。我先解释一下数据。我对此进行了简化，以使其更易于理解。

```
Polref      Effective Date       Transaction Type     Suffix        Value
ABCD1       01/06/2010           New Bus              1             175.00
ABCD1       01/06/2011           Ren                  2             200.00
ABCD1       19/08/2011           Adjust               3              50.00
ABCD1       23/04/2012           Adjust               4              50.00
ABCD1       01/06/2012           Ren                  5             275.00 
```

因此，如果我运行 2011 年的查询，则代码需要在此示例中返回后缀为 2,3 和 4 的行。所以我一直在尝试做的是找到指定年份的 New Bus 或 Ren 的第一个后缀然后为同一个 polref 找到新总线或 Ren 的下一个后缀，然后使用这两个后缀值来限制我的记录集。它不起作用！

我不能使用 MAX()，因为 2013 年的交易已经添加到系统中，这样我会得到比我实际需要的更多的记录。

我应该期待这个示例数据的结果是：

ABCD1 300.00

任何帮助将不胜感激。

回答另一个问题，如果我选择 2011 作为我运行报告的年份，那么 2011 年应该只有一个 New Bus 或 Ren 交易，所以如果它是 New Bus 交易，下一个主要交易将是 Ren，如果它是 Ren那么下一个主要交易将是 Ren。同样在下面的示例中，如果我运行 2011 年，它应该找到 01/06/2011 的 Ren，所以我想返回 Ren 和两条 Adjust 记录。

抱歉，我之前没有使用过这个论坛，如果我有点含糊，请见谅。

我使用的表有很多 polref，所以我需要这段代码来计算日期范围内所有 polref 的总数。有些 polrefs 可能只有一排，一辆新巴士，有些会有很多排，具体取决于政策全年进行了多少次调整

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:46:36.807

部分答案：

这个查询：

```
declare @t table (PolRef char(5) not null, EffectiveDate date not null,TransactionType varchar(10) not null,Suffix int not null,Value decimal(10,2) not null)
insert into @t (Polref,EffectiveDate,TransactionType,Suffix,Value) values
('ABCD1','20100601','New Bus',1,175.00),
('ABCD1','20110601','Ren',2,200.00),
('ABCD1','20110819','Adjust',3,50.00),
('ABCD1','20120423','Adjust',4,50.00),
('ABCD1','20120601','Ren',5,275.00)

;With StartTransactions as (
    select PolRef,Suffix,ROW_NUMBER() OVER (PARTITION BY PolRef ORDER BY Suffix) rn
    from @t where TransactionType in ('New Bus','Ren')
), Periods as (
    select st1.PolRef,st1.Suffix as StartSuffix,st2.Suffix as EndSuffix
    from
        StartTransactions st1
        left join
        StartTransactions st2
            on
                st1.PolRef = st2.PolRef and
                st1.rn = st2.rn - 1
)
select
    p.PolRef,t2.EffectiveDate,SUM(t.Value) as Total
from
    Periods p
        inner join
    @t t
        on
            p.PolRef = t.PolRef and
            p.StartSuffix <= t.Suffix and
            (p.EndSuffix > t.Suffix or
            p.EndSuffix is null)
        inner join
    @t t2
        on
            p.PolRef = t2.PolRef and
            t2.Suffix = p.StartSuffix
group by
    p.PolRef,t2.EffectiveDate 
```

`Ren`根据每个连续或事务对每组事务进行分组`New Bus`：

```
PolRef EffectiveDate Total
------ ------------- ---------------------------------------
ABCD1  2010-06-01    175.00
ABCD1  2011-06-01    300.00
ABCD1  2012-06-01    275.00 
```

从那以后，例如仅从特定年份中选择您感兴趣的那些应该是微不足道的。但是你的问题在某些细节上仍然含糊不清，所以我现在不会再进一步​​了。

# sas - 添加新的 SAS 变量，同时保留完整性约束

> ID：13141915
> 
> 赞同：2
> 
> 时间：2012-10-30T15:08:52.520
> 
> 标签：sas

所以我需要修改（使用新列）具有完整性约束的现有 SAS 表。当然我可以proc sql；“描述”表并重建约束，我只是想知道是否有不涉及此步骤的替代（批处理）方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:27:08.917

您可以只`ALTER`在 SAS 数据集上添加新列，这不会影响任何其他已定义的属性（如索引或完整性约束）。例如：

```
proc sql noprint;
    alter table MYLIB.SOME_DATASET
       add NEW_VARIABLE char(25) format=$25.;
quit; 
```

# java - HTTPClientErrorException：使用 Spring REST 模板的 400 错误请求

> ID：13141926
> 
> 赞同：0
> 
> 时间：2012-10-30T15:09:08.950
> 
> 标签：java, android, spring, gson

```
String Stringifiedjson = new Gson().toJson(user);
Log.d("SpringAndroid", Stringifiedjson);

HttpHeaders requestHeaders = new HttpHeaders();
requestHeaders.setAccept(Collections.singletonList(new 
         MediaType("application", "json")));

HttpEntity <? > requestEntity = new HttpEntity < Object >   
       (Stringifiedjson, requestHeaders);

GsonHttpMessageConverter messageConverter = new GsonHttpMessageConverter();
List < HttpMessageConverter <? >> messageConverters = 
      new ArrayList < HttpMessageConverter <? >> ();
messageConverters.add(messageConverter);

RestTemplate restTemplate = new RestTemplate();
restTemplate.setMessageConverters(messageConverters);

try {   
    ResponseEntity<String> responseEntity = restTemplate.
         exchange(url, HttpMethod.POST, requestEntity, String.class);               
} 
```

我收到 400 错误请求，但是当我发送到`Stringifiedjson`我的提琴手时。我得到一个有效的`response`. 现在如何使用 RestTemplate 发布 GSON 对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-24T17:42:36.270

我有同样的问题。我通过传递对象本身而不是包含该对象的 JSON 表示的字符串来解决它。

简而言之，我改变了：

```
String jsonObject = convertToJSON(myObject);
HttpEntity <? > requestEntity = new HttpEntity <String>   
       (jsonObject, requestHeaders); 
```

至：

```
HttpEntity <? > requestEntity = new HttpEntity <MyObject>   
       (myObject, requestHeaders); 
```

在这种情况下，MyObject 是我希望在 Controller 的 @RequestBody 参数中捕获的 java bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:24:23.300

我认为问题可能出在您的 http 请求标头以下对我有用。

```
HttpHeaders headers = new HttpHeaders();
headers.setContentType(MediaType.APPLICATION_JSON); 
```

# facebook - 用户拒绝后，我可以再次请求 Facebook 权限吗？

> ID：13141928
> 
> 赞同：1
> 
> 时间：2012-10-30T15:09:16.787
> 
> 标签：facebook, ios6

使用 iOS 6 facebook SDK 原生对话我希望在用户第一次拒绝后再次请求 facebook 权限。我在用：

```
[[FBSession activeSession] closeAndClearTokenInformation]; 
```

在 iOS 6 模拟器上它可以工作，它会再次询问，但在设备上却不行。除了在 facebook 网站上删除 facebook 应用程序之外的任何解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T21:09:35.470

您可以尝试 reauthorizeWithPermissions:behavior:completionHandler:

```
- (void)reauthorizeWithPermissions:(NSArray*)permissions behavior:(FBSessionLoginBehavior)behavior completionHandler:(FBSessionReauthorizeResultHandler)handler __attribute__((deprecated)); 
```

[https://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#reauthorizeWithPermissions%3Abehavior%3AcompletionHandler%3A](https://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#reauthorizeWithPermissions%3Abehavior%3AcompletionHandler%3A)

# objective-c - 为什么 NSMutableURLRequest 实例化会导致崩溃？

> ID：13141933
> 
> 赞同：0
> 
> 时间：2012-10-30T15:09:35.967
> 
> 标签：objective-c, nsmutableurlrequest

我正在尝试像这样创建一个 NSMutableURLRequest：

```
NSURL *URLWithString = [
    NSString stringWithFormat:@"%@?%@",
    urlString,
    datas
];
NSMutableURLRequest* request = [[[NSMutableURLRequest alloc] initWithURL:URLWithString] autorelease]; 
```

当我在 iPhone 4S 上运行它时，应用程序崩溃并且出现以下异常：

> 2012-10-30 15:58:53.495 [429:907] -[__NSCFString absoluteURL]：无法识别的选择器发送到实例 0x1cd74a90
> 
> 2012-10-30 15:58:53.497 [429:907] --- 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFString absoluteURL]：无法识别的选择器发送到实例 0x1cd74a90”
> 
> --- 首先抛出调用栈：
> 
> （0x361b62a3 0x344c697f 0x361b9e07 0x361b8531 0x3610ff68 0x3611363f 0x320396e7 0x32039551 0x320394ed 0x33bde661 0x33bde597 0x387e1 0x376d9f1f 0x376da9a9 0x341c535d 0x3618b173 0x3618b117 0x36189f99 0x360fcebd 0x360fcd49 0x366392eb 0x374db301 0x37cc1 0x37c58）
> 
> libc++abi.dylib：终止调用抛出异常

怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:13:28.467

很多问题：首先看看如何调用 NSString 和 NSURL 方法。我已经为您粘贴的代码完成了它。

```
NSURL * myUrl = [NSURL URLWithString:[NSString stringWithFormat:@"%@?%@",urlString,datas]]; 
```

和

```
NSMutableURLRequest* request = [[[NSMutableURLRequest alloc] initWithURL:myUrl] autorelease]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:26:10.963

您的 NSURL 创建代码是错误的。

```
NSURL *URLWithString = [NSString stringWithFormat: @"%@?%@", urlString, datas]; 
```

[在这里，您尝试使用NSString 类方法 ( `stringWithFormat`)](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-stringWithFormat_)直接创建 NSURL 。结果是您的变量`URLWithString`将是错误的类型，并且当您向它发送 NSURL 消息时，您会像现在一样遇到崩溃。

要解决这个问题，您需要先创建一个 URL 地址的 NSString，然后使用它实例化一个 NSURL，如下所示：

```
NSString *completeURLString = [NSString stringWithFormat:@"%@?%@", urlString, datas];
NSURL *completeURL = [NSURL URLWithString: completeURLString]; 
```

（从技术上讲，这两条线可以合并；我已经将它们分开以明确发生了什么。）

此外，虽然可能与您的崩溃无关，但您不应调用 URL 变量`URLWithString`，因为这是[NSURL 的类方法的](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html#//apple_ref/doc/uid/20000301-BAJBBDIB)名称。确保为其提供一个唯一的名称，并以小写字符开头（至少，这将使您的代码更容易被其他人破译）。

# java - 使用 ASM 4.0 如何创建一个简单的 Getter？

> ID：13141936
> 
> 赞同：1
> 
> 时间：2012-10-30T15:09:37.280
> 
> 标签：java, bytecode, getter, java-bytecode-asm

假设我有这样的课：

```
public class Example{

     private String secret = "Secret String";

} 
```

我如何能够添加一个 getter 来返回这个字符串（不使用反射），所以我想以某种方式添加这个

```
public String getSecret(){
    return secret;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T16:20:37.273

直接来自 ASM 常见问题解答：“[如何为我的类生成 Setter 和 Getter？](http://asm.ow2.org/doc/faq.html#Q9) ”。

另请参阅“[如何使用 ASM 生成 {一些 Java 代码}？](http://asm.ow2.org/doc/faq.html#Q11) ”

# jquery - 结合 jQuery 选择器（select 和 id）

> ID：13141938
> 
> 赞同：0
> 
> 时间：2012-10-30T15:09:49.183
> 
> 标签：jquery, jquery-selectors

[请参阅此小提琴的代码](http://jsfiddle.net/jaPTd/)

我在一个页面上有两个`select`控件，我想使用 id 和控件类型的组合来选择其中一个。

如果我使用 ID 和控件类型，jquery 返回长度为`0`.

```
 $('#bothCount').text($('#Title select').length); 
```

注意：在其他页面上，我有一个带有 id 的输入`Title`，这就是为什么我想过滤到仅选择控件的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:11:58.183

选择器

```
#Title select 
```

...是[*后代选择器*](http://www.w3.org/TR/css3-selectors/#descendant-combinators)。它查找任何`select`带有`id` `Title`.

如果你真的想结合 tag 和`id`，你可以这样做：

```
select#Title 
```

例如：

```
$('#bothCount').text($('select#Title').length); 
```

请注意，这样做通常没有什么意义，因为`id`值在页面上必须是唯一的。我知道的唯一用例是，如果您不知道该元素将具有什么标签，并且您只想在它具有特定标签类型时对其采取行动*，*这绝对是一种边缘情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:13:14.803

将您的 JQuery 更改为：

```
$('#idCount').text($('#Title').length);

$('#bothCount').text($('select#Title').length);

$('#tagCount').text($('select').length); 
```

请注意，现在`select#Title`就像您尝试使用后代选择器之前一样。

这是更新的[jsFiddle](http://jsfiddle.net/jaPTd/1/)。

# qt4 - Python3 跨平台 GUI 工具包

> ID：13141940
> 
> 赞同：1
> 
> 时间：2012-10-30T15:09:52.973
> 
> 标签：qt4, python-3.x, pyside, gtk3, gtkbuilder

我需要一个与 python3 兼容的 OSX 和 GNU/Linux 兼容的 GUI 工具包。

我尝试了带有 GObject 内省的 GTK3，但很难在 OSX 上部署。是否有类似 gtk builder compatible 的东西可以在 OSX 上运行？

我的要求是：

*   带有 IDE 构建器的基于 XML 的布局
*   在 OSX 上运行（在 GNU/Linux 上兼容或开箱即用）
*   适用于 Python3
*   不像TK那样丑:)（开玩笑）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:13:37.517

您可以在 Python 中将 Qt 与 PyQt 一起使用。与 Gtk 相比的优势在于它在 OS X 上看起来是原生的（Qt 使用 Cocoa 进行渲染。）

更多信息：[http ://www.riverbankcomputing.co.uk/software/pyqt/intro/](http://www.riverbankcomputing.co.uk/software/pyqt/intro/)

如果你使用 Homebrew，你可以很容易地安装它：

```
brew install pyqt 
```

或者您可能会在[PyQtX 项目页面](http://sourceforge.net/projects/pyqtx/)上找到二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:13:46.613

没有我知道的。是否需要 Python 3 要求？如果没有，您可能会考虑[Qt](http://qt.digia.com)和[PySide](http://qt-project.org/wiki/PySide)绑定，或者基于 Wx 或 Qt 构建的 Enthought 的[TraitsUI框架。](http://code.enthought.com/projects/traits_ui/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:29:18.203

最终解决方案：

python3 使用 pyqt

1.  下载以下 MacOS pkg：

    [http://sourceforge.net/projects/pyqtx/files/Complete/](http://sourceforge.net/projects/pyqtx/files/Complete/)

2.  安装后

    我们运行以下示例 python3 程序：

使用代码：

```
#!/usr/bin/python3
# -*- coding: utf-8 -*-

import sys

from PyQt4 import QtCore, QtGui, uic 
```

如果我们没有任何导入错误，那么 pyqt**工作**正常。

在 MacOS Lion **10.7.2上测试**

在 GNU/Linux Python3 上，pyqt 应该已经可以开箱即用了。在 Archlinux 上测试。

# boolean-logic - 除了 Simple Solver 之外，是否有任何软件可以解决给定输入/输出的数字电路？

> ID：13141942
> 
> 赞同：2
> 
> 时间：2012-10-30T15:09:55.913
> 
> 标签：boolean-logic, solver

全部 -

我在这里找到了一个名为“Simple Solver”的东西：

[http://home.roadrunner.com/~ssolver/syn.html](http://home.roadrunner.com/~ssolver/syn.html)

你可以在这里下载

[http://www.softpedia.com/progDownload/Simple-Solver-Download-103308.html](http://www.softpedia.com/progDownload/Simple-Solver-Download-103308.html)

我的问题是：Simple Solver 是唯一一个在给定输入/输出的情况下为您解决数字电路的问题吗？除了 Simple Solver 之外，还有其他可以解决数字电路的软件吗？

将不胜感激所有/任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T22:23:36.030

看`Logic Friday 1`。这是一个交互式工具，因此可以处理/解决定义为函数表、表达式或门网络的布尔表达式。另一个很酷的工具是[BC2CNF](http://users.ics.aalto.fi/tjunttil/circuits/)。结合像[CryptoMinisat这样的](http://www.msoos.org/cryptominisat2/)[SAT 求解器](http://en.wikipedia.org/wiki/Boolean_satisfiability_problem)，BC2CNF 可用于求解布尔表达式并找出哪些变量值实际满足表达式。

# css - IE8 / 9 外发光问题

> ID：13141944
> 
> 赞同：0
> 
> 时间：2012-10-30T15:10:04.447
> 
> 标签：css, jquery-ui, internet-explorer-8, internet-explorer-9

我在 IE 8/9 中遇到了一个涉及外发光的奇怪问题。我有一个应用了外发光的模态框（由 jQuery UI 创建）。框的高度根据您在框中选择的选项增加或减少（简单的显示隐藏 JS）问题是当框的高度降低时，它会在水平方向留下标记/外发光痕迹，并且它们会立即消失您单击屏幕上的任意位置。

似乎当由于某种奇怪的原因更改高度时 IE 无法正确刷新视口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:15:51.713

您可以强制 UI 重绘：

```
$('body').addClass('js').removeClass('js'); 
```

也可以看看：

[强制从 JavaScript 重绘 UI - Ajaxian](http://ajaxian.com/archives/forcing-a-ui-redraw-from-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T16:32:57.250

没有看到你的代码 - 我只能猜测，但围绕这个问题的一些已知解决方案是......

确保你有一个有效的 DOCTYPE -

```
<!DOCTYPE html> 
```

还可以尝试将此添加到 box-shadow 无法正常工作的元素中。

```
border-collapse: separate; 
```

# c# - 如何在 selenium 中输入 Telerik 文本框？

> ID：13141945
> 
> 赞同：0
> 
> 时间：2012-10-30T15:10:21.357
> 
> 标签：c#, selenium, telerik

我正在自动化一个应用程序，我想在文本框中使用 xpath 输入文本，例如 //input[@id='some id'] 但是输入后有一个类属性，由于它我无法动态更改键入文本。有什么方法可以让我在 xpath 中包含动态属性并输入文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:23:07.090

我曾经有过同样的问题。我从来没有找到解决方案，所以我最终通过 Web 配置条目禁用了测试站点的动态输入设置。绝对不理想，但它至少允许测试继续进行。

# dart - Dart 中的跨浏览器键事件处理程序

> ID：13141946
> 
> 赞同：2
> 
> 时间：2012-10-30T15:10:23.720
> 
> 标签：dart

我正在使用 M1 版本并编写了一个如下所示的密钥处理程序：

```
void _onKeyPress(KeyboardEvent e) {
  switch (e.keyIdentifier) {
    case KeyName.UP:
    case KeyName.LEFT:
      e.preventDefault();
      prev();
      break;

    case "U+0020": // FIXME Must be a better way, or?
    case KeyName.DOWN:
    case KeyName.RIGHT:
      e.preventDefault();
      next();
      break;
  }
} 
```

它在 Chrome 中运行良好，但在 FF 或 IE 中不行。必须有更好的方法来处理空格键并仍然将其保留在一个开关中，对吗？我知道我可以查看其他字段以获得空间，但这也不是一个好的选择（从那时起我会将代码分成两个 switch 语句。）无论如何，它在 FF 和 IE 中不起作用的问题更糟. 如果我改写`keyCode`改用它，它在所有浏览器上都可以正常工作。

```
void _onKeyPress(KeyboardEvent e) {
  switch (e.keyCode) {
    case 38:
    case 37:
      e.preventDefault();
      prev();
      break;

    case 32:
    case 40:
    case 39:
      e.preventDefault();
      next();
      break;
  }
} 
```

我的问题是我找不到虚拟键码的常量。难道我做错了什么？在 Dart 中处理跨浏览器兼容的关键事件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:28:25.857

根据您的问题、其他答案、此[源代码](https://github.com/dart-lang/dart-web-components/blob/master/example/todomvc/item.html)和此[错误](http://code.google.com/p/dart/issues/detail?id=5540)（您应该加注星标），以下是我的建议：

*   使用键码。
*   如果需要，不要害怕使用 if/else if 而不是 switch 语句。JavaScript 无论如何都没有优化的 switch 语句。
*   在[修复此错误](http://code.google.com/p/dart/issues/detail?id=5540)之前，您可能应该只创建自己的常量。

**更新**：这已得到[修复](http://code.google.com/p/dart/issues/detail?id=5540)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T19:10:41.190

[我认为这是与此问题](http://code.google.com/p/dart/issues/detail?id=4269)类似的问题。显然，KeyIdentifier 在 Firefox 上返回 null。

顺便说一句，您可以使用[KeyName.SPACEBAR而不是 "U+0020"](http://api.dartlang.org/docs/bleeding_edge/dart_html/KeyName.html#SPACEBAR)

# iphone - 应用程序在设备上崩溃，但在模拟器上运行良好

> ID：13141949
> 
> 赞同：1
> 
> 时间：2012-10-30T15:10:35.803
> 
> 标签：iphone, ios, addressbook

我的通讯录应用在模拟器上运行良好。我有联系人添加功能。在设备（IOS 6）上它崩溃了..并显示以下消息。

```
ContactPro[837] has active assertions beyond permitted time: 
{(
<BKProcessAssertion: 0x1f5a28a0> identifier: Suspending process: ContactPro[837] permittedBackgroundDuration: 10.000000 reason: suspend owner pid:52 preventSuspend         preventThrottleDownCPU  preventThrottleDownUI )} 
```

之后很多行信息都是这样来的

```
Elapsed total CPU time (seconds): 10.030 (user 10.030, system 0.000), 100% CPU 
Elapsed application CPU time (seconds): 3.724, 37% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_c.dylib               0x33be8b1e __vfprintf + 158
1   libsystem_c.dylib               0x33b93106 vsnprintf_l + 170
2   libsystem_c.dylib               0x33b9455c snprintf + 68
3   libsystem_c.dylib               0x33b968a6 asl_string_append_char_no_encoding + 102
4   libsystem_c.dylib               0x33b9694c asl_string_append_internal + 124
5   libsystem_c.dylib               0x33b96536 asl_msg_to_string_raw + 118
6   libsystem_c.dylib               0x33b95b06 _asl_send_message + 1018
7   CoreFoundation                  0x380d417a __CFLogCString + 602
8   CoreFoundation                  0x3807801e _CFLogvEx + 186
9   Foundation                      0x3a13ed8a NSLogv + 82
10  Foundation                      0x3a13ed2a NSLog + 22
11  ContactPro                      0x000a7d38 0xa4000 + 15672
12  ContactPro                      0x000a686e 0xa4000 + 10350
13  ContactPro                      0x000b9dd0 0xa4000 + 89552
14  UIKit                           0x37a6f590 -[UIViewController loadViewIfRequired] +  360
15  UIKit                           0x37ac4136 -[UIViewController contentScrollView] + 22
16  UIKit                           0x37ac407c -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 24
17  UIKit                           0x37ac3f60 -[UINavigationController _layoutViewController:] + 28
18  UIKit                           0x37ac3e84 -[UINavigationController _updateScrollViewFromViewController:toViewController:] + 268
19  UIKit                           0x37ac35c4 -[UINavigationController _startTransition:fromViewController:toViewController:] + 60
20  UIKit                           0x37ac34ac -[UINavigationController _startDeferredTransitionIfNeeded:] + 320
21  UIKit                           0x37a944e4 -[UILayoutContainerView layoutSubviews] + 176
22  UIKit                           0x37a53806 -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 254
23  QuartzCore                      0x36145d5e -[CALayer layoutSublayers] + 210
24  QuartzCore                      0x361458fc CA::Layer::layout_if_needed(CA::Transaction*) + 456
25  QuartzCore                      0x361747a2 -[CALayer layoutIfNeeded] + 138
26  UIKit                           0x37afd0cc -[UIViewController window:setupWithInterfaceOrientation:] + 204
27  UIKit                           0x37afc2b8 -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating:] + 3616
28  UIKit                           0x37afb48a -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:] + 42
29  UIKit                           0x37afb414 -[UIWindow _setRotatableViewOrientation:duration:force:] + 64
30  UIKit                           0x37c3117c __57-[UIWindow _updateToInterfaceOrientation:duration:force:]_block_invoke_0 + 100
31  UIKit                           0x37ab967e -[UIWindow _updateToInterfaceOrientation:duration:force:] + 214
32  UIKit                           0x37ab93c0 -[UIWindow setAutorotates:forceUpdateInterfaceOrientation:] + 688
33  UIKit                           0x37ab8d2e -[UIViewController _tryBecomeRootViewControllerInWindow:] + 154
34  UIKit                           0x37aafea6 -[UIWindow addRootViewControllerViewIfPossible] + 366
35  UIKit                           0x37aabae8 -[UIWindow _setHidden:forced:] + 360
36  UIKit                           0x37aed1cc -[UIWindow makeKeyAndVisible] + 56
37  ContactPro                      0x000a5c88 0xa4000 + 7304
38  UIKit                           0x37ab0ad4 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 248
39  UIKit                           0x37ab065e -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1186
40  UIKit                           0x37aa8846 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 694
41  UIKit                           0x37a50c3c -[UIApplication handleEvent:withNewEvent:] + 1000
42  UIKit                           0x37a506d0 -[UIApplication sendEvent:] + 68
43  UIKit                           0x37a5011e _UIApplicationHandleEvent + 6150
44  GraphicsServices                0x35ce35a0 _PurpleEventCallback + 588
45  CoreFoundation                  0x380bb680 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
46  CoreFoundation                  0x380baee4 __CFRunLoopDoSources0 + 208
47  CoreFoundation                  0x380b9cb2 __CFRunLoopRun + 642
48  CoreFoundation                  0x3802ceb8 CFRunLoopRunSpecific + 352
49  CoreFoundation                  0x3802cd44 CFRunLoopRunInMode + 100
50  UIKit                           0x37aa7480 -[UIApplication _run] + 664
51  UIKit                           0x37aa42fc UIApplicationMain + 1116
52  ContactPro                      0x000a5864 0xa4000 + 6244
53  libdyld.dylib                   0x36982b1c start + 0 
```

任何人都可以提供一些关于如何解决它的提示！

为了在 IOS6 中访问 ADDRESS BOOK，我使用以下几行.. ABAddressBookRef ab = ABAddressBookCreateWithOptions(NULL, NULL);

```
__block BOOL accessGranted = NO;
if (ABAddressBookRequestAccessWithCompletion != NULL) { // we're on iOS 6
    dispatch_semaphore_t sema = dispatch_semaphore_create(0);
    ABAddressBookRequestAccessWithCompletion(ab, ^(bool granted, CFErrorRef error) {
        accessGranted = granted;
        dispatch_semaphore_signal(sema);
    });
    dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
    //        dispatch_release(sema);
}
else { // we're on iOS 5 or older
    accessGranted = YES;
}

if (accessGranted) {
    // Do whatever you want here
} 
```

我更改了地址簿访问代码，

```
ABAddressBookRef abcd = ABAddressBookCreateWithOptions(NULL, NULL);
__block BOOL accessGranted = NO;
    if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
    ABAddressBookRequestAccessWithCompletion(abcd, ^(bool granted, CFErrorRef error) {
        // First time access has been granted, add the contact
        accessGranted = granted;
    });
}
else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {
    // The user has previously given access, add the contact
    accessGranted = YES;
}
else {
    // The user has previously denied access
    // Send an alert telling user to change privacy setting in settings app
}

if (accessGranted) {
    CFIndex recordsCount = ABAddressBookGetPersonCount(abcd);
    CFArrayRef all = ABAddressBookCopyArrayOfAllPeople(abcd);
    ABRecordRef ref = CFArrayGetValueAtIndex(all,recordsCount);
    NSLog(@"%@", ref);
    ABRecordID record = ABRecordGetRecordID(ref);
} 
```

有了这个，我也没有得到对联系人的引用？..而且应用程序在模拟器和设备中都崩溃了。但是我可以访问地址簿。#pls 建议我.. 可以做些什么来解决这个问题。谢谢

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:40:38.680

我认为问题是这样的：您正在使用信号量来阻止线程，直到出现“绿灯”。但是您正在线程 0（管理用户界面的主线程）上执行此代码。因此，您将阻止用户界面中的所有更改，包括请求访问联系人的警报。

编辑新代码第一件事：在设备上尝试。出于某种原因，即使不是，模拟器也总是返回授权：[模拟器中的 ABAddressBookGetAuthorizationStatus 总是返回 kABAuthorizationStatusAuthorized](https://stackoverflow.com/questions/12602984/abaddressbookgetauthorizationstatus-in-simulator-always-returns-kabauthorization)。

第二件事，您的“if (accessGranted)”不会在用户第一次授权应用程序时执行，因为它是在完成块*之前*执行的（完成块等待用户决定），但是块之后的代码是立即执行。您应该将该代码移动到另一个函数中（例如，仅在完成块之后调用一次授权）。但是，出于测试目的，一旦授权，此代码应该在您第二次尝试访问 AB 时工作。

您的 accessGranted 代码很好，除了一件事：如果您有一个包含 250 条记录的数组，则您正在尝试访问记录 250（不存在，最后一条记录是编号 249）。更改此行

```
ABRecordRef ref = CFArrayGetValueAtIndex(all,recordsCount); 
```

有了这个

```
ABRecordRef ref = CFArrayGetValueAtIndex(all,recordsCount-1); 
```

我试过了，它有效

# java - 动态打印格式化表格式的 HashMap

> ID：13141952
> 
> 赞同：1
> 
> 时间：2012-10-30T15:10:38.527
> 
> 标签：java, hashmap, format

这是一个非常笼统的问题。我有一个哈希图，我想在不事先知道内容大小的情况下以表格格式动态打印它。该表应该像我们在 Db 查询结果中看到的那样间隔良好。是否有任何库/实用程序可以直接帮助这种类型的转换？还是 JAVA 有一些我可以利用的内在功能？

我编写的代码非常幼稚，不适合字符串的动态长度。我还需要对齐行。

```
 StringWriter returnString = new StringWriter();
    Map<String,HashMap<String, String>> hashMap = new HashMap<String, HashMap<String, String>>();
    for (Entry e : hashMap.entrySet()) {
        HashMap<String, Number> hm = (HashMap<String, Number>) e.getValue();
        String key = (String) e.getKey();
        returnString.append("|\t").append(key).append("\t|");
        for (Entry en : hm.entrySet()){
            returnString.append("|\t").append((String) en.getValue()).append("\t|");
        }
        returnString.append("\r\n");
    }        
    return returnString.toString(); 
```

无论字符串长度如何，输出都应该是这样的

```
s1      |     s3     |     s4
askdkc  |  asdkask   |   jksjndan 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:21:57.573

看起来您已经弄清楚了迭代并且正在处理格式。您可以将其放入 TableModel，并让 JTable 处理表格格式。

您可以选择固定的列宽或遍历条目一次以找到每列的最大长度，然后再次使用适当的填充打印它们。

另一种选择是扩展 HashMap 以便在添加条目时记录最长的键和值：

```
package com.example;

public class MyHashMap<K, V> extends java.util.HashMap<K, V> {

    private int maxKeyLength = 0;
    private int maxValueLength = 0;

    @Override
    public V put(K key, V value) {
        maxKeyLength = Math.max(maxKeyLength, key.toString().length());
        maxValueLength = Math.max(maxValueLength, value.toString().length());
        return value;
    };

    public int getMaxKeyLength() {
        return maxKeyLength;
    }

    public int getMaxValueLength() {
        return maxValueLength;
    }
} 
```

请注意，这忽略了您还删除项目的明显情况 - 根据您的使用模式，如果您还想在删除具有最长键/值的条目时缩小列，则必须做一些或更多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-19T06:32:12.337

我编写了一个小代码，它将打印类似于（不完全）查询结果的打印方式（如 sqlplus）的 HashMap。只是在这里分享，以便它可以帮助一些人。

```
List<Map<String, Object>> resultSet = jdbcTemplate.queryForList(selectQuery);

        Map<String, Integer> maxColSizeMap = new HashMap<String, Integer>();
        boolean initMaxColSizeMap = true;

        for (Map<String, Object> map : resultSet) {

            for (String key : map.keySet()) {
                if (initMaxColSizeMap) {
                    String ColValue = (map.get(key) == null ) ? "" : map.get(key).toString();
                    Integer whoIsBig = Math.max(ColValue.length(), key.length());
                    maxColSizeMap.put(key, whoIsBig);
                } else {
                    String ColValue = (map.get(key) == null ) ? "" : map.get(key).toString();
                    Integer whoIsBig = Math.max(ColValue.length(), key.length());
                    whoIsBig = Math.max(maxColSizeMap.get(key), whoIsBig);
                    maxColSizeMap.put(key, whoIsBig);
                }
            }
            initMaxColSizeMap = false;
        }

        // Column HEADER
        for (Map<String, Object> map : resultSet) {
            System.out.println("");
            StringBuilder colName = new StringBuilder();
            StringBuilder underLine = new StringBuilder();
            for (String key : map.keySet()) {
                colName.append(StringUtils.rightPad(key, maxColSizeMap.get(key)));
                colName.append(" ");

                underLine.append(StringUtils.repeat('-', maxColSizeMap.get(key)));
                underLine.append(" ");
            }
            // Do one time only
            System.out.println(colName.toString());
            System.out.println(underLine.toString());
            break;
        }

        // Print the rows
        for (Map<String, Object> map : resultSet) {
            StringBuilder row = new StringBuilder();
            for (String key : map.keySet()) {
                String str = map.get(key) == null ? "" : map.get(key).toString();
                row.append(StringUtils.rightPad(str, maxColSizeMap.get(key) + 1));
            }
            System.out.println(row);
        }

        System.out.println(""); 
```

注意：org.apache.commons.lang3.StringUtils 用于填充。
这不是问题的确切答案，因此请根据需要调整代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:13:24.293

您可以使用 for-each 循环并将其打印出来，对吗？不需要大小..

“桌子”是什么意思？

[如何根据值以升序打印 HashMap<String, String> 的内容？](https://stackoverflow.com/questions/3605237/how-print-out-the-contents-of-a-hashmapstring-string-in-ascending-order-based)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:15:01.833

您可能想要获取地图的所有键，迭代键并打印详细信息，例如

```
 Map<String, String> valueMap = new HashMap<String, String>();
     .....
     Set<String> keys = valueMap.keySet();
     Iterator<String> iter = keys.iterator();
     while(iter.haxNext()){
        String key = iter.next();
        System.out.println("\t"+key+"|\t"+valueMap.get(key));
     } 
```

编辑：如果您想要特定的宽度，请考虑使用[**Apache StringUtils**](http://commons.apache.org/lang/api-2.5/index.html?org/apache/commons/lang/StringUtils.html)，如下所示：

```
 int MAXWIDTH = 20; //<- set this with the max width of the column
     Map<String, String> valueMap = new HashMap<String, String>();
     .....
     Set<String> keys = valueMap.keySet();
     Iterator<String> iter = keys.iterator();
     while(iter.haxNext()){
        String key = iter.next();
        System.out.println(StringUtils.rightPad(key, MAXWIDTH)+ "|"+
                   StringUtils.rightPad(valueMap.get(key), MAXWIDTH));
     } 
```

# eclipse - 在eclipse中添加新插件时出错

> ID：13141956
> 
> 赞同：0
> 
> 时间：2012-10-30T15:10:47.770
> 
> 标签：eclipse, eclipse-plugin

当我试图安装这个插件时

[http://fornwall.net/eclipsecoder/](http://fornwall.net/eclipsecoder/)在 TopCoder 的 Arena 竞争

我发现了这个问题。

[http://i.stack.imgur.com/VvcRh.png](http://i.stack.imgur.com/VvcRh.png)

**那么我该如何解决这个问题呢？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:20:19.213

我安装插件没有任何问题。可能是您在添加存储库时指定的位置错误。我使用的 EclipseCoder 站点中指定的位置是：http: [//fornwall.net/eclipsecoder/](http://fornwall.net/eclipsecoder/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:48:08.927

我认为您在可用更新站点列表（窗口 > 安装/更新 > 可用软件站点）中有无效的更新站点 URL。删除或禁用导致问题的更新站点，然后重试添加您要访问的正确更新站点 URL：http: [//fornwall.net/eclipsecoder/](http://fornwall.net/eclipsecoder/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:41:50.847

当 p2 找不到要安装的更新站点时，您会收到此错误。看起来您正在使用的 url 是正确的，所以问题是以下两件事之一：

1.  临时网络问题。再试一次，它可能会工作
2.  您身边的防火墙。如果是这样，请在 Preferences -> General -> Network connections 中设置您的网络代理

附带说明一下，更新站点是旧式更新站点（即 3.4 之前的版本，并且确实具有适当的元数据）。您应该鼓励此插件的维护者更新到现代更新站点。

# visual-studio-2008 - 我的 Windows CE cab 安装程序正在安装到主机 c: 驱动器而不是设备

> ID：13141957
> 
> 赞同：0
> 
> 时间：2012-10-30T15:10:57.167
> 
> 标签：visual-studio-2008, installation, cab

我有一个用于手部扫描仪的 Win CE 应用程序，并且我已经为它制作了一个自动安装程序，这样用户就可以从他们的 PC 上运行一个程序来自动将它安装到他们的设备上，而无需使用 wither ActiveSync 或 Windows Mobile Device Center . 我已经整理了一份说明文档（我将尝试将其附加到评论中）并仔细遵循它们 - 但是当我运行生成的安装程序时，它只安装在我的 c: 驱动器上，并且根本不做任何事情到扫描仪。请指教。我的 PC 装有 Windows 7、Windows Mobile Device Center，并且扫描仪运行的是 Windows CE 5.00。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:39:55.793

问题在于 CAB .inf 文件和自定义安装程序 ini 文件，这两个文本文件都是使用 Visual Studio 2008 文本编辑器编写的 - 并且都没有 ANSI 编码。

我发现一个非常有用的方法是弄清楚如何从命令提示符手动安装，这样我就可以找出我的项目应该做什么。例如：

C:\Windows\WindowsMo​​bile\CEAppMgr.exe c:\Progra~2\Microsoft\CEScanAppSetup\CustomInstaller.ini

# python - 如何在字符串中查找特殊字符

> ID：13141958
> 
> 赞同：0
> 
> 时间：2012-10-30T15:10:57.503
> 
> 标签：python, string, for-loop

我有一个 Python 代码，想在字符串中查找元音。我编写的代码如下......我尝试了使用 For-Loop 的不同组合，但它引发了两个不同的错误；

1.  'int' 对象不可迭代，
2.  字符串索引必须是整数，而不是 str。

如何找到一行中的所有元音？

```
str1 = 'sator arepo tenet opera rotas'
vow1 = [str1[i] for i in str1 if  str1[i] is 'a' | 'e' | 'o'] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T15:11:51.513

关于什么：

```
vowels = [ c for c in str1 if c in 'aeo' ] 
```

您会收到错误，因为当您遍历字符串时，您会遍历字符串*中*的字符（而不是字符串*索引*），并且因为`'a' | 'e' | 'o'`对字符串没有意义——（它们不支持`|`运算符）

```
>>> str1 = 'sator arepo tenet opera rotas'
>>> vowels = [ c for c in str1 if c in 'aeo' ]
>>> print vowels
['a', 'o', 'a', 'e', 'o', 'e', 'e', 'o', 'e', 'a', 'o', 'a'] 
```

* * *

最后一条评论，你不应该使用`is`来测试*相等性*。 *身份*`is`测试。一个简单的测试：

 *```
a = 565
b = 565
print a == b #True
print a is b #False (!) 
```

原因是因为`a`和`b`引用*不同的对象具有相同的值*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:36:05.180

试试这个代码：

```
str1 = 'sator arepo tenet opera rotas'
i=0
vowl=''
for char in str1:
    if char in 'aeiouAEIOU':
          vowl=vowl+char+','

vowl=vowl[:-1]      
print (vowl) 
```

输出是：

> a,o,a,e,o,e,e,o,e,a,o,a

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T21:00:03.753

```
In [1]: str1 = 'sator arepo tenet opera rotas'
In [2]: filter(lambda x: x in 'aeiou', str1)
Out[2]: 'aoaeoeeoeaoa' 
```*

# drupal - 用户更改信息时的通知

> ID：13141960
> 
> 赞同：2
> 
> 时间：2012-10-30T15:11:05.360
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我想在用户更改他的个人资料时通知管理员（例如，更改他的伪、他的头像和附加到用户的其他自定义字段（人员 > 帐户设置 > 添加新字段））

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:44:56.960

我认为完美的模块是[rules](http://drupal.org/project/rules)。项目页面上有很多文档。

*   事件：
    *   **为事件用户更新**创建新规则

***   健康）状况
    *   添加条件（检查修改..）*   结果
    *   触发电子邮件**

# liferay - 将 Liferay 用于已经开发的项目

> ID：13141961
> 
> 赞同：1
> 
> 时间：2012-10-30T15:11:09.010
> 
> 标签：liferay

首先，让我告诉你我是什么或我的公司打算做什么。我们已经使用 Java、JSP 和 Servlet 开发了一个项目。我们希望它与 Liferay 集成，以便我们可以在运行时使用 Liferay 管理面板更改徽标、css、图像、主题或任何其他 UI 相关组件。但是后端应该是我们开发的。

简而言之，我们项目的 UI 是由 Liferay 控制的，但是 UI 上显示或从 UI 提交的数据的控制应该来自我们开发的后端代码。

现在我对上述满足要求的方法有几个问题：

1.  我们正在努力做的事情可能吗？

2.  对于我们打算做的事情，这种方法是否值得推荐？

3.  还是我们需要从头开始开发我们的项目以适应 Liferay？就像在 Liferay 或 Liferay 文档中给出的其他方法中开发和部署 portlet。

4.  数据库集成呢？我们项目数据库的用户表中有大约 15 个列/字段，这与 Liferay 的用户表完全不同。

Liferay 对我们来说是一个非常新的东西。我们已经检查了 Liferay 的文档部分，但仍然很少有类似上述要求的内容，并且它的实现尚不清楚。此外，我们想知道 Liferay 在哪些场景/需求中是有用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:15:30.740

好的，让我试着逐点回答你的问题，我会先回答你的最后一个问题，这应该会自动清除其他问题：

> Q. 另外，我们想知道 Liferay 在哪些场景/需求中是有用的。

这可以有一个非常广泛的答案，但我已经为你缩短了：

1.  如果您的网站内容繁重而不是数据繁重，那么请选择 Portal
2.  如果您打算在门户中仅使用单个 Web 应用程序，那么我建议独立定制开发的 Web 应用程序要好得多。

我同意 liferay 门户将为您提供许多开箱即用的东西，例如单点登录、授权、身份验证、友好 URL 和页面创建，以及许多应用程序，例如博客、Wiki、文档库、一些社交网络应用程序等。但是想一想，你真的需要这一切吗？如果不是，那么这是矫枉过正

以下是一些非常好的链接，可以更好地了解门户网站的使用情况：

1.  [何时使用门户](http://blogs.perficient.com/portals/2012/01/06/when-to-use-a-portal-2/ "何时使用门户")
2.  [为什么要使用门户技术](http://www.coderanch.com/t/203709/Portals-Portlets/java/Why-Portal "关于为什么使用门户的论坛讨论")
3.  [liferay](/questions/tagged/liferay "显示标记为“liferay”的问题")标签 wiki：它对 liferay 是什么有很好的描述，它还包含指向管理指南的相关链接，它将告诉您 liferay 的所有功能以及如何管理它。

因此，如果您发现其他问题没有得到解答，请继续阅读...

> Q1。我们正在努力做的事情可能吗？

没有。Portlet 技术不同于 Servlet 技术。Liferay（或任何其他门户）不提供一种方法（至少是一种简单的方法）来集成将在门户内呈现页面的 servlet。例如：由于使用 servlet，您可以预先在 web.xml 中为特定的 servlet 定义 URL 映射，但在门户中，URL 是由 Portlet 容器生成的。所以门户使用portlet 而不是Servlet。

> Q2。对于我们打算做的事情，这种方法是否值得推荐？

没有。正如我在 Q1 中已经解释的那样。

> Q3。还是我们需要从头开始开发我们的项目以适应 Liferay？就像在 Liferay 或 Liferay 文档中给出的其他方法中开发和部署 portlet。

如果你想走生命之道，那么是的。
如果您想构建与您的自定义表对话的应用程序，那么 Portlet 是您的最佳选择。

> Q4。数据库集成呢？我们项目数据库的用户表中有大约 15 个列/字段，这与 Liferay 的用户表完全不同。

如果你选择 Liferay。在这种情况下，您可以创建`liferay-hook`&的组合`portlet`（可能正在使用`service-builder`）来自定义 liferay 的用户创建机制，并将数据存储在 Liferay 的用户表和您的自定义表中。
Liferay 的权限系统非常细粒度，因此您也可以从该系统中受益，甚至可以在数据级别上设置权限。

**总之，我想说：**
一切都归结为您的要求是什么以及您拥有什么资源。有时你可以有什么未来的要求。

[**注意：**此答案中使用的所有特定于 liferay 的术语（如服务构建器、钩子等）都在[liferay](/questions/tagged/liferay "显示标记为“liferay”的问题")标签 wiki 中进行了解释。]

希望这可以帮助。如果您想知道任何具体的信息，我很乐意更新我的答案。

# c# - 使用 Json.Net 进行条件数组/对象反序列化

> ID：13141962
> 
> 赞同：0
> 
> 时间：2012-10-30T15:11:09.673
> 
> 标签：c#, json.net

我正在使用 Json.Net 库（用于 .NET v3.5）来处理来自 EBoss CRM API 的响应的反序列化。据我所见，API 文档相当参差不齐，因此我不得不亲自查看它以查看可以引发什么样的响应。

我想要一个包装类`EBossApiResponse<T>`，它可以为 API 发回的任何错误消息提供属性，以及一个包含反序列化类型数据的属性`T`（这将被限制为充当任何类的基础类型的抽象基类我创建以对返回的数据进行建模）。

我最初的戳揭示了第一个问题。一个有效的请求可以返回一个对象数组，例如：[https ://ebosscrm.com/api.php/job_type.json](https://ebosscrm.com/api.php/job_type.json)

这将很容易反序列化为假设`T`的`List<EBossJobType>`. 请注意，结果中没有错误属性。

然而，对同一端点的格式错误的请求会返回不同的内容：[https ://ebosscrm.com/api.php/job_type.json?search[foo]=1](https://ebosscrm.com/api.php/job_type.json?search%5Bfoo%5D=1)

在这种情况下，将返回一个数组，其中包含一个具有名为 的单个属性的对象`message`。

（注意，有些调用的参数命名`search[something]`是有效的，但`foo`永远不是有效的`something`）

也有可能返回显式错误。在我看来，API 正在捕获异常并格式化包含调试信息的 JSON 响应：[https ://ebosscrm.com/api.php/candidates.json?uid=114&api_key=f34js3kj](https://ebosscrm.com/api.php/candidates.json?uid=114&api_key=f34js3kj)

在这种情况下，返回的 JSON 不是数组，而是单个对象。我不确定如何满足这些不同的响应结构。我最初的想法是有类似的东西：

```
protected bool IsNonDataResponse(string response)
{
    JObject o = JObject.Parse(response);
    return o.SelectToken("message") != null || o.SelectToken("error") != null;
} 
```

然后我可以使用此方法直接反序列化为正确的`EBossApiResponse<T>`类型（如果为真，填充错误消息但保留`.Data`属性 == null），或者反序列化到右侧`List<EBossEntityType>`，创建一个新`EBossApiResponse<List<EBossEntityType>>`的并设置其`.Data`属性。

然后我意识到这`o.SelectToken("message")`行不通，因为`o`它将是一个数组，而不是一个对象。是否可以`.SelectToken()`通过表单的模式`"[0].message"`来获取第一项的消息属性？

这个怎么样？

```
JObject o = JObject.Parse(response);
JArray arr = o as JArray;
return (arr != null && (JObject)arr[0].SelectToken("message") != null)
        || o.SelectToken("error") != null; 
```

或者我是不是完全找错了树，而这整件事有一个更优雅的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T09:18:41.223

您至少可以替换`JObject.Parse()`为`JToken.Parse()`因为是和`JToken`的基类。然后您可以检查结果是 a还是 a （或者可能是一个整数）。`JObject``JArray``JArray``JObject``JValue`

```
var result = JToken.Parse(response);

if (result is JArray)
{
    // ...
}
else if (result is JObject)
{
    // ...
} 
```

还请查看[JToken 的文档](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_Linq_JToken.htm)。

# c++ - memcpy 出错，长度不正确

> ID：13141965
> 
> 赞同：1
> 
> 时间：2012-10-30T15:11:13.287
> 
> 标签：c++, c, linux

我正在将 Gateway 中的数据（包含字符串`Oct/10/12`）复制到`dest_data`但`dest_data`得到的字符比源多：

```
unsigned_8   *dest_data
int_16 len;      

len = (int_16)strlen( Gateway ); // len got 9 correctly
(void)memcpy( dest_data, GatewayApplicationRlsDate, len ); 
```

的最终输出`dest_data`是`"Oct/10/1210.1.3"`

`dest_data`复印前需要清洗吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T15:12:46.717

您复制字符串内容，但不复制终止的空字符。给 len 添加一个，你应该没问题。但正确的解决方案是使用`strcpy()`，它会自动复制尾随的空字符。

另外，考虑为 dest_data ( `malloc((len + 1) * sizeof(*dest_data));`)分配内存

```
unsigned_8   *dest_data;
int_16 len;      

len = (int_16)strlen( Gateway ) + 1; 
dest_data = malloc(len * sizeof(*dest_data));
(void)strcpy( dest_data, GatewayApplicationRlsDate ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T15:13:02.003

没有分配内存`dest_data`（它是一个未初始化的指针）并且`memcpy()`没有复制空终止符。为和复制分配`len + 1`内存字节以也复制空终止符。`dest_data``len + 1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:12:46.640

您需要复制 len + 1 个字节

目前您忘记复制空终止符`\0`。

当您尝试访问副本时，字符串函数会搜索，直到找到`\0`可能在任何地方的 a。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T15:21:29.560

您的 strlen 不应该使用 GatewayApplicationRlsDate 中的长度吗？

IE：

len = (int_16)strlen( GatewayApplicationRlsDate );

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T15:15:58.153

您应该使用`strcpy`，这也将复制尾随的空字节。

```
strcpy( dest_data, GatewayApplicationRlsDate ); 
```

当然，所有关于处理原始指针的警告都适用。真的，您可能应该使用`std::string`or `std::vector<char>`。

# c# - C# 和 CPython 之间的快速且可扩展的 RPC

> ID：13141966
> 
> 赞同：2
> 
> 时间：2012-10-30T15:11:20.587
> 
> 标签：c#, interface, ironpython, rpc, cpython

我需要一些关于 C# - 用于科学应用程序的 cPython 集成的反馈。

场景如下： 用于数据采集和可视化的 C# - 用于数据操作的 CPython，使用多个和不断变化的第三方库来实现特定领域的任务。

一般用例：

1.  C# 代码从设备获取实时数据
2.  C# 代码将数据传递给 cPython 代码并请求详细说明
3.  Cpython 代码具有魔力
4.  Cpython代码将结果传回c#代码
5.  C# 在 WPF 应用程序中可视化数据

c# 和 cPython 代码（项目 1）、3）和 5））都已经针对速度进行了优化。双向传递的数据（第 2 项和第 4 项）本质上是 10E6 双精度数组（不涉及复杂的数据结构）。

我想找到一个具有良好性能（从 1 到 5 的速度）和解耦功能的接口解决方案，它还可以最大限度地减少客户端（c# 代码）端的开发。实际上双方都在同一台机器上运行，但我希望解决方案能够横向扩展。

我尝试过的解决方案 - 问题：

*   a) C# + 在 .NET 上移植 python 算法 - 在域方面编写/重写的代码太多，缺乏专门的库 cPython 几乎可以在科学方面提供所有内容
*   b) C# 在托管代码上嵌入 ironpython + 包装/移植 c++ 扩展（有和没有[ironclad](http://code.google.com/p/ironclad/)） - 算法执行期间使用的结构的编组导致的临界性能 - 升级子组件版本时的 dll 地狱。
*   c) C# 在 ironpython 和 python 之间嵌入 ironpython + rpc - 可维护性问题，不满足于在三个 C#/ironpython/python 之间“传递”数据。
*   d) XML-RPC、JSON-RPC - 对性能（速度）不满意。

我计划评估的尚未尝试的解决方案：

*   e) 阿帕奇节俭
*   f) [ZeroRPC](https://github.com/dotcloud/zerorpc-python)

提前感谢您的任何批评、意见和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T09:14:35.483

我有一个类似的要求（C#<->Python RPC）我刚刚尝试了 Apache Thrift，我印象非常深刻。它非常快：比 Pyro4/pickle 慢 50%，比 RPyC 快 5 倍。这是为了将 numpy 数组作为二进制数据发送。Thrift 的剩余开销很可能是将数组数据复制到字符串中/从字符串中复制出来。如果可以重构 Thrift 以使用缓冲区对象代替字符串，我希望它与 Pyro 一样快。

代码生成看起来很干净，API 也很好。它缺少的主要是文档。尽管如此，我还是能够从基本教程、测试和浏览源代码中弄清楚一切。

据我所知，ZeroRPC（还）没有 C# 实现。

# sql - 在连接表之间使用 OR 条件进行查询的性能

> ID：13141970
> 
> 赞同：0
> 
> 时间：2012-10-30T15:11:32.807
> 
> 标签：sql, performance, oracle, query-optimization

有两个表，tparent 和 tchild，它们是使用脚本 #1 创建的。需要查询uname等于'sky'的两个表中的所有信息。当只有少量记录时，以下查询语句 #2 很快。但是当使用以下脚本#3 插入大量记录时，它会变得非常缓慢。我认为这是由表之间的 OR 条件引起的，索引对查询没有用处。所以我得到了一个快速的解决方案，将语句更改为三个子语句和联合结果，如#4。我想知道有没有更好的解决方案？那是什么？

谢谢！

**# 1**

```
drop table tparent;
drop table tchild;
create table tparent(typeid int,sno number,uname varchar2(50) );
create table tchild(typeid int,sno number,seqno int,uname varchar2(50));
create unique index uidx_tparent_typeidsno on tparent(typeid,sno);
create unique index uidx_tchild_typeidsnoseqno on tchild(typeid,sno,seqno);
create index idx_tparent_name on tparent(uname);
create index idx_tchild_name on tchild(uname);

insert into tparent values (1,10,'lily');
insert into tparent values (1,11,'eric');
insert into tparent values (2,10,'tom');
insert into tparent values (2,11,'eric');
insert into tparent values (3,10,'sky');

insert into tchild values (1,10,1,'sam');
insert into tchild values (1,10,2,'sky');
insert into tchild values (1,11,1,'eric');
insert into tchild values (1,11,2,'john');
insert into tchild values (2,10,1,'sky');
insert into tchild values (2,11,1,'eric');
insert into tchild values (3,10,1,'tony'); 
```

**#2**

```
select p.typeid,p.sno,p.uname,c1.uname as uname1,c2.uname as uname2 from tparent p
  left join tchild c1 on c1.typeid=p.typeid and c1.sno = p.sno and c1.seqno=1
  left join tchild c2 on c2.typeid=p.typeid and c2.sno = p.sno and c2.seqno=2
where (p.uname='sky' or c1.uname='sky' or c2.uname='sky'); 
```

**# 3**

```
BEGIN
    FOR x IN 1..10
    LOOP
        BEGIN
            FOR y IN 10000..100000
            LOOP
                BEGIN
                    insert into tparent values (x,y,'name'|| y);
                    insert into tchild values (x,y,1,'name'|| y);
                    insert into tchild values (x,y,2,'name'|| y);
                END;
            END LOOP;
            COMMIT;
        END;
    END LOOP;
END; 
```

**#4**

```
select typeid,sno,max(uname),max(uname1),max(uname2) from (

select p.typeid,p.sno,p.uname,c1.uname as uname1,c2.uname as uname2 from tparent p
  left join tchild c1 on c1.typeid=p.typeid and c1.sno = p.sno and c1.seqno=1
  left join tchild c2 on c2.typeid=p.typeid and c2.sno = p.sno and c2.seqno=2
where (p.uname='sky' )
union 
select p.typeid,p.sno,p.uname,c1.uname as uname1,c2.uname as uname2 from tparent p
  left join tchild c1 on c1.typeid=p.typeid and c1.sno = p.sno and c1.seqno=1
  left join tchild c2 on c2.typeid=p.typeid and c2.sno = p.sno and c2.seqno=2
where ( c1.uname='sky' )
union

select p.typeid,p.sno,p.uname,c1.uname as uname1,c2.uname as uname2 from tparent p
  left join tchild c1 on c1.typeid=p.typeid and c1.sno = p.sno and c1.seqno=1
  left join tchild c2 on c2.typeid=p.typeid and c2.sno = p.sno and c2.seqno=2
where ( c2.uname='sky')
) tb group by typeid,sno
order by typeid,sno
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:12:18.890

您应该在 from 子句中使用“union all”，然后按 group by。

# wpf - WPF DataGrid 将字符串列表绑定为行

> ID：13141972
> 
> 赞同：2
> 
> 时间：2012-10-30T15:11:43.637
> 
> 标签：wpf, binding, datagrid

我不想使用类属性进行绑定。

为什么它不起作用？我该如何解决这个问题。我得到空行。我还为 DataGrid 手动定义了列。

```
 private void Insert(IList<string> row, DataGrid dG)
        {
            ObservableCollection<IList<string>> data = dG.ItemsSource as ObservableCollection<IList<string>>;
            data.Add(row);
            dG.ItemsSource = data;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T14:02:36.380

首先，如果您使用方法直接访问 DataGrid 属性而不是使用数据绑定，那么您应该使用 DataGrid.Items 属性，而不是 DataGrid.ItemsSource。

```
private void Insert(IList<string> row, DataGrid dG)
{
    dG.Items.Add(row);
} 
```

但是无论如何您都会得到空行，因为 DataGrid 无法将行中的每个字符串与正确的列定义链接起来。

我认为最好的方法是使用转换器：

创建从 IValueConverter 继承的 RowIndexConverter 类，并使您的 Convert 方法如下所示：

```
public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    int index = System.Convert.ToInt32(parameter);
    return (value as IList)[index];
} 
```

为此，您必须在绑定到 IList 属性（如 DataGrid 的行）中使用它，并将索引作为 ConverterParameter 传递。XAML 将是这样的：

```
<Window x:Class="Test.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Test"
    Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:RowIndexConverter x:Key="rowIndexConverter" />
    </Window.Resources>
    <Grid>
        <DataGrid x:Name="DataGrid">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding ., Converter={StaticResource rowIndexConverter}, ConverterParameter=0}" />
                <DataGridTextColumn Binding="{Binding ., Converter={StaticResource rowIndexConverter}, ConverterParameter=1}" />
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

瞧！值显示出来。如果您想要更多列，您只需添加它们并增加 ConvertParameter。小心，因为如果行不够长，转换器会抛出异常！

# javascript - 使用 jquery 从标签中删除类的问题

> ID：13141990
> 
> 赞同：0
> 
> 时间：2012-10-30T15:12:21.763
> 
> 标签：javascript, jquery, html

我有几个看起来像这样的 div 框，它们都像`productholder2`，`productholder3`等等。这是其中之一：

```
 <div class="productholder1>  
    <p class="hidden">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod   tempor incididunt</p>     
    <input type="button" value="Läs mer" class="button">                                               
</div> 
```

我想要实现的是`<p>`使用jQuery删除标签上的这个隐藏类。

不知何故，我需要指定它是我要删除的`productholder1`'`<p>`类，因此文本会弹出，因为在 CSS 中我`.hidden{display:none);`通过删除类应该弹出文本。

我在我制作的 jQuery 之后尝试了这个，但它不起作用。我究竟做错了什么？

```
<script type="text/javascript">
   $(document).ready(function () {
       $(".button").click(function () {
           $('.productholder1').removeClass("hidden");
       });
   });
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:13:52.480

该类`hidden`位于`<p>`元素上，而不是`<div>`您当前选择的元素上，因此您需要使用选择器`'.productholder1 p'`来抓取它并删除该类。如果您只想要产品持有人 div*正*下方的`<p>`元素，您也可以使用此选择器。*`'.productholder1 > p'`*

 *```
<script type="text/javascript">
   $(document).ready(function () {
       $(".button").click(function () {
           $('.productholder1 p').removeClass("hidden");
       });
   });
</script> 
```

其他一些选择 -

1.  类紧接在 a 之下的所有`<p>`元素`hidden``<div>`
    1.  `$('div > p.hidden')`
2.  带有`<p>`下面 的多个选择器
    1.  `$('.productholder1 p, .productholder2 p, .productholder3 p')`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T15:13:38.683

该类`hidden`在 的*子*级上`.productholder1`，而不是在元素本身上。它也是按钮的*兄弟*。

此行将从具有该类的任何（后代）元素中删除`.productholder1`该类。为了提高效率，它将完全忽略任何尚未隐藏的元素：

```
$('.productholder1 .hidden').removeClass('hidden'); 
```

**但是**- 我认为您的计划是每个按钮只影响同一组中的元素？如果是这样，请改用它，它仅依赖于遍历 DOM 层次结构，而不是每个组上都有一个特定的类。

```
$(".button").click(function () {
    $(this).parent().find('.hidden').removeClass('hidden');
}); 
```

然后，这一块代码将适用于*每一*组元素，而不必为每个类复制它`.productholderNNN`。

FWIW，使用编号的类来表示其他相同的 DOM 结构组的各个成员实际上是对 CSS 类的误用。这就是 ID 的用途。类应该代表应该被同等对待的元素组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T15:13:46.393

它应该喜欢

```
 $('.productholder1').find("p").removeClass("hidden"); 
```

或者

```
$('.productholder1 p').removeClass("hidden"); 
```

您要做的是删除其中的类， `.productholder1` 但隐藏的类不存在，因此您需要选择`.productholder1`来获取它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T15:14:26.893

试试这个代码：

```
 <script type="text/javascript">
           $(document).ready(function () {
               $(".button").click(function () {
                   $('.productholder1 p').removeClass("hidden");
               });
           });
        </script> 
```

或者

```
 <script type="text/javascript">
               $(document).ready(function () {
                   $(".button").click(function () {
                       $('.productholder1').find('p').removeClass("hidden");
                   });
               });
            </script> 
```*

# javascript - 使用 Rangy，即使我通过 setStartBefore 方法扩展范围，range.canSurroundContents 方法仍然返回 false

> ID：13141992
> 
> 赞同：0
> 
> 时间：2012-10-30T15:12:32.467
> 
> 标签：javascript, range, selection, textselection, rangy

我有以下html：

```
<p>Morbi quis augue vitae quam <a href="#">pharetra| varius</a> at at| urna.</p> 
```

选择用`|`字符标记。还有选择的截图：

![原始选择的屏幕截图](../Images/247bbc16845f25ca8f387d71c79f6a8a.png)

我可以使用以下代码片段扩展此选择以包含整个“a”元素（使用 Rangy 库[http://code.google.com/p/rangy/](http://code.google.com/p/rangy/)）：

```
$('body').on('mouseup', '[contenteditable]', function() {
var block = this,
    sel = rangy.getSelection(),
    range = sel.getRangeAt(0);

if (sel.anchorNode.parentNode !== block) {
    range.setStartBefore(sel.anchorNode);
    sel.setSingleRange(range, false);
    sel.refresh();
}
}); 
```

要查看它的实际效果，请查看[http://jsfiddle.net/LTwkZ/1/](http://jsfiddle.net/LTwkZ/1/)

并且以下返回 true：

```
range.containsNode(anchorNode); 
```

问题是“range.canSurroundContents()”返回“假”。'a' 元素完全包含在范围内，从开始到结束，为什么不能使用 'canSurroundContents()' 以及我怎么能，如果可能的话。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:36:56.557

我认为问题在于`anchorNode`链接中的文本节点而不是链接本身，因此选择是在链接内而不是在链接之前开始的。在链接之前移动范围的开始应该修复它。此外，除非 Rangy 以外的其他内容对其进行了修改，否则无需调用`refresh()`选择，尽管这不会导致任何问题。

修改后的 jsFiddle：http: [//jsfiddle.net/LTwkZ/2/](http://jsfiddle.net/LTwkZ/2/)

代码：

```
$('body').on('mouseup', '[contenteditable]', function() {
    var block = this,
    sel = rangy.getSelection(),
    range = sel.getRangeAt(0);

    if (sel.anchorNode.parentNode !== block) {
        range.setStartBefore(sel.anchorNode.parentNode);
        sel.setSingleRange(range, false);
    }
}); 
```

# css - SASS 中的变量作用域

> ID：13141994
> 
> 赞同：7
> 
> 时间：2012-10-30T15:12:41.507
> 
> 标签：css, sass

假设我想为一个变量定义一个全局值，然后为特定的选择器覆盖它。根据[SASS 文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#variables_)，这应该是可能的。

> 变量仅在定义它们的嵌套选择器级别内可用。如果它们是在任何嵌套选择器之外定义的，那么它们在任何地方都可用。

然后，逻辑将声明“green”和“red”作为值`$text-color`仅在它们各自的嵌套选择器中可用，并且`$text-color`在其他任何地方调用时将采用“blue”值，例如在`.foo`.

```
$text-color: blue;

.green {
    $text-color: green;
    color: $text-color;
}

.red {
    $text-color: red;
    color: $text-color;
}

.foo {
    color: $text-color;
} 
```

然而，情况并非如此，上面的 SASS 编译为：

```
.green {
    color: green;
}

.red {
    color: red;
}

.foo {
    color: red;
} 
```

理解这一点的任何帮助都会很有帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-02-10T21:04:39.450

这是一个老问题，但记录在案，从版本 3.4.0 开始，变量现在是块范围的，除非用 !global 标志标记。

从变更日志：

> 默认情况下，不在文档顶层的所有变量分配现在都是本地的。如果有一个同名的全局变量，除非使用 !global 标志，否则它不会被覆盖。例如， $var: value !global 将全局分配给 $var。 可以使用feature-exists(global-variable-shadowing)
> 来检测这种行为。

这意味着`scss`：

```
$color: red;

.sel {
  $color: green;
  color: $color;
}

.sel2 {
  color: $color;
} 
```

现在将产生以下内容`css`：

```
.sel {
  color: green;
}

.sel2 {
  color: red;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-30T15:30:36.543

这是因为一旦将变量分配为全局变量，对该变量的所有进一步分配也都是全局完成的。如果你想在那之后使它成为本地的，你可以做`$local-text-color: $text-color;`然后`color: $local-text-color;`