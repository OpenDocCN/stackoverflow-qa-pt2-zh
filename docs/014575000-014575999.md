# StackOverflow 问答 14575000-14575999

# javascript - Backbone.js 添加自定义同步来制作加载效果

> ID：14575004
> 
> 赞同：2
> 
> 时间：2013-01-29T03:06:50.943
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我正在用backbone.js 构建一个应用程序，现在我想在backbone.js 向服务器发出http 请求时添加一个全局加载效果，这是一个单页webapp，所以有很多异步http 请求。我想我可以修改 Backbone.sync 方法来简化它。我怎样才能做到这一点？

发布代码示例

```
// let's say there is a function to generate the loading and remove it
// mask.create();
// mask.remove();
var BookList = Backbone.Collection.extend({
    model:Book,
    url:'/api/list/1',
});

    var list = new BookList();

list.bind('reset', function(){
    $('.content').html('');
    list.each(function(book){
        self.addOne(book);
    })  
});
    list.fetch(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:16:27.790

听起来您希望将显示器连接到同步以获取 UI 反馈。不过，您不想混淆关注点，因此您不希望同步本身关心演示文稿。默认同步实现提供了一些事件（文档中可能包含更多事件）：

> 每当模型或集合开始与服务器同步时，就会发出“请求”事件。如果请求成功完成，您将收到一个“同步”事件，如果没有，您将收到一个“错误”事件。

因此，您可以从绑定到这些事件开始，但无论哪种方式，您都应该坚持某种方法，其中“同步”仍然专注于其职责。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T07:37:29.003

@MattWhipple 关于关注点分离是绝对正确的：您不应该将 UI 逻辑混合到持久层。但是，这并不意味着您不应该重写 Backbone.sync 方法，只要您提供一个解耦机制来分离关注点。

一种这样的机制是`mediator`模式，即使用全局事件总线来发布和使用消息。碰巧的是，Backbone 提供了这样一种带有事件全局`Backbone`对象的机制。您可以覆盖同步以触发事件：

```
Backbone.trigger("request:start"); 
```

并在 UI 层监听：

```
Backbone.on("request:start", callback); 
```

这样，两层都不必相互了解，仍然可以实现全局请求处理。

此外，如果您只想捕获所有 AJAX 请求并且不关心它们是否来自 Backbone，那么您可以降低一层来监听 jQuery 的全局事件，而完全不考虑 Backbone。

# c# - 为什么 WithMergeOptions(ParallelMergeOptions.NotBuffered) 不能立即提供结果？

> ID：14575009
> 
> 赞同：3
> 
> 时间：2013-01-29T03:07:03.787
> 
> 标签：c#, .net, task-parallel-library, plinq

（我目前仅限于 .NET 4.0）

我有一种情况，我想尽可能并行处理项目，必须保持顺序，并且可以随时添加项目，直到按下“停止”。

项目可能会“爆发”进来，所以队列可能会完全排空，会有一个暂停，然后大量项目会再次进入。

我希望结果一旦完成就可以使用。

这是一个简化的示例：

```
class Program
{
    static void Main(string[] args)
    {
        BlockingCollection<int> itemsQueue = new BlockingCollection<int>();

        Random random = new Random();

        var results = itemsQueue
        .GetConsumingEnumerable()
        .AsParallel()
        .AsOrdered()
        .WithMergeOptions(ParallelMergeOptions.NotBuffered)
        .Select(i =>
        {
            int work = 0;

            Console.WriteLine("Working on " + i);

            //simulate work
            for (int busy = 0; busy <= 90000000; ++busy) { ++work; };

            Console.WriteLine("Finished " + i);

            return i;
        });

        TaskCompletionSource<bool> completion = new TaskCompletionSource<bool>();

        Task.Factory.StartNew(() =>
        {
            foreach (int i in results)
            {
                Console.WriteLine("Result Available: " + i);
            }
            completion.SetResult(true);
        });

        int iterations;
        iterations = random.Next(5, 50);
        Console.WriteLine("------- iterations: " + iterations + "-------");

        for (int i = 1; i <= iterations; ++i)
        {
            itemsQueue.Add(i);
        }

        while (true)
        {
            char c = Console.ReadKey().KeyChar;

            if (c == 's')
            {
                break;
            }
            else
            {
                ++iterations;

                Console.WriteLine("adding: " + iterations);
                itemsQueue.Add(iterations);
            }
        }

        itemsQueue.CompleteAdding();

        completion.Task.Wait();

        Console.WriteLine("Done!");
        Console.ReadKey();
        itemsQueue.Dispose();
    }
} 
```

如上面的示例所示，通常会发生的情况是，直到最后几个结果才可用（我不是 100% 确定这一点，但它停止的结果数量可能与数量大致相关盒子上的核心数），直到`itemsQueue.CompleteAdding();`被调用（在示例中，按下“s”键），此时其余的结果最终将变为可用。

尽管我指定了`.WithMergeOptions(ParallelMergeOptions.NotBuffered)`，为什么结果没有立即可用，我怎样才能使它们立即可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:27:31.673

请注意，如果您可以调用实例方法，则问题不是问题`BlockingQueue.CompleteAdding()`- 这将导致所有结果完成。

**简答**

另一方面，如果您需要维持秩序，并且需要尽快获得结果，并且您没有机会致电`BlockingQueue.CompleteAdding()`，那么如果可能的话，您最好拥有队列中项目的消耗是非并行的，而是并行处理每个单独的任务。

例如

```
 class Program
  {
    //Not parallel, but suitable for monitoring queue purposes, 
    //can then focus on parallelizing each individual task
    static void Main(string[] args)
    {
        BlockingCollection<int> itemsQueue = new BlockingCollection<int>();

        Random random = new Random();

        var results = itemsQueue.GetConsumingEnumerable()
        .Select(i =>
        {
            Console.WriteLine("Working on " + i);

            //Focus your parallelization efforts on the work of 
            //the individual task
            //E.g, simulated:
            double work = Enumerable.Range(0, 90000000 - (10 * (i % 3)))
            .AsParallel()
            .Select(w => w + 1)
            .Average();

            Console.WriteLine("Finished " + i);

            return i;
        });

        TaskCompletionSource<bool> completion = new TaskCompletionSource<bool>();

        Task.Factory.StartNew(() =>
        {
            foreach (int i in results)
            {
                Console.WriteLine("Result Available: " + i);
            }
            completion.SetResult(true);
        });

        int iterations;
        iterations = random.Next(5, 50);
        Console.WriteLine("------- iterations: " + iterations + "-------");

        for (int i = 1; i <= iterations; ++i)
        {
            itemsQueue.Add(i);
        }

        while (true)
        {
            char c = Console.ReadKey().KeyChar;

            if (c == 's')
            {
                break;
            }
            else
            {
                ++iterations;

                Console.WriteLine("adding: " + iterations);
                itemsQueue.Add(iterations);
            }
        }

        itemsQueue.CompleteAdding();

        completion.Task.Wait();

        Console.WriteLine("Done!");
        Console.ReadKey();
        itemsQueue.Dispose();
    }
} 
```

**更长的答案**

似乎`BlockingQueue`特别和之间存在相互作用`AsOrderable()`

似乎`AsOrderable`只要分区块中的枚举器之一停止处理任务。

默认分区器将处理通常大于 1 的块 - 并且阻塞队列将阻塞直到块可以被填充（或被`CompleteAdding`填充）。

但是，即使块大小为 1，问题也不会完全消失。

为了解决这个问题，您有时可以在实现自己的分区器时看到行为。（请注意，如果您指定`.WithDegreeOfParallelism(1)`等待出现的结果的问题就会消失 - 但当然，具有一定程度的并行性 = 1 种会破坏目的！）

例如

```
public class ImmediateOrderedPartitioner<T> : OrderablePartitioner<T>
{
    private readonly IEnumerable<T> _consumingEnumerable;
    private readonly Ordering _ordering = new Ordering();

    public ImmediateOrderedPartitioner(BlockingCollection<T> collection) : base(true, true, true)
    {
        _consumingEnumerable = collection.GetConsumingEnumerable();
    }

    private class Ordering
    {
        public int Order = -1;
    }

    private class MyEnumerator<S> : IEnumerator<KeyValuePair<long, S>>
    {
        private readonly object _orderLock = new object();

        private readonly IEnumerable<S> _enumerable;

        private KeyValuePair<long, S> _current;

        private bool _hasItem;

        private Ordering _ordering;

        public MyEnumerator(IEnumerable<S> consumingEnumerable, Ordering ordering)
        {
            _enumerable = consumingEnumerable;
            _ordering = ordering;
        }

        public KeyValuePair<long, S> Current
        {
            get
            {
                if (_hasItem)
                {
                    return _current;
                }
                else
                    throw new InvalidOperationException();
            }
        }

        public void Dispose()
        {

        }

        object System.Collections.IEnumerator.Current
        {
            get 
            {
                return Current;
            }
        }

        public bool MoveNext()
        {
            lock (_orderLock)
            {
                bool canMoveNext = false;

                var next = _enumerable.Take(1).FirstOrDefault(s => { canMoveNext = true; return true; });

                if (canMoveNext)
                {
                    _current = new KeyValuePair<long, S>(++_ordering.Order, next);
                    _hasItem = true;
                    ++_ordering.Order;
                }
                else
                {
                    _hasItem = false;
                }

                return canMoveNext;
            }
        }

        public void Reset()
        {
            throw new NotSupportedException();
        }
    }

    public override IList<IEnumerator<KeyValuePair<long, T>>> GetOrderablePartitions(int partitionCount)
    {
        var result = new List<IEnumerator<KeyValuePair<long,T>>>();

        //for (int i = 0; i < partitionCount; ++i)
        //{
        //    result.Add(new MyEnumerator<T>(_consumingEnumerable, _ordering));
        //}

        //share the enumerator between partitions in this case to maintain
        //the proper locking on ordering.
        var enumerator = new MyEnumerator<T>(_consumingEnumerable, _ordering);

        for (int i = 0; i < partitionCount; ++i)
        {
            result.Add(enumerator);
        }

        return result;
    }

    public override bool SupportsDynamicPartitions
    {
        get
        {
            return false;
        }
    }

    public override IEnumerable<T> GetDynamicPartitions()
    {
        throw new NotImplementedException();
        return base.GetDynamicPartitions();
    }

    public override IEnumerable<KeyValuePair<long, T>> GetOrderableDynamicPartitions()
    {
        throw new NotImplementedException();
        return base.GetOrderableDynamicPartitions();
    }

    public override IList<IEnumerator<T>> GetPartitions(int partitionCount)
    {
        throw new NotImplementedException();
        return base.GetPartitions(partitionCount);
    }
}

class Program
{
    static void Main(string[] args)
    {
        BlockingCollection<int> itemsQueue = new BlockingCollection<int>();

        var partitioner = new ImmediateOrderedPartitioner<int>(itemsQueue);

        Random random = new Random();

        var results = partitioner
        .AsParallel()
        .AsOrdered()
        .WithMergeOptions(ParallelMergeOptions.NotBuffered)
        //.WithDegreeOfParallelism(1)
        .Select(i =>
        {
            int work = 0;

            Console.WriteLine("Working on " + i);

            for (int busy = 0; busy <= 90000000; ++busy) { ++work; };

            Console.WriteLine("Finished " + i);

            return i;
        });

        TaskCompletionSource<bool> completion = new TaskCompletionSource<bool>();

        Task.Factory.StartNew(() =>
        {
            foreach (int i in results)
            {
                Console.WriteLine("Result Available: " + i);
            }
            completion.SetResult(true);
        });

        int iterations;
        iterations = 1; // random.Next(5, 50);
        Console.WriteLine("------- iterations: " + iterations + "-------");

        for (int i = 1; i <= iterations; ++i)
        {
            itemsQueue.Add(i);
        }

        while (true)
        {
            char c = Console.ReadKey().KeyChar;

            if (c == 's')
            {
                break;
            }
            else
            {
                ++iterations;

                Console.WriteLine("adding: " + iterations);
                itemsQueue.Add(iterations);
            }
        }

        itemsQueue.CompleteAdding();

        completion.Task.Wait();

        Console.WriteLine("Done!");
        Console.ReadKey();
        itemsQueue.Dispose();
    }
} 
```

**替代方法** 如果不可能并行化单个任务（如“简短答案”中所建议的那样），并且所有其他问题约束都适用，那么您可以实现自己的队列类型，为每个项目启动任务 - 从而让任务并行库处理工作的调度，但您自己同步结果的消耗。

例如，如下所示（带有标准的“无保证”免责声明！）

```
public class QueuedItem<TInput, TResult>
{
    private readonly object _lockObject = new object();

    private TResult _result;

    private readonly TInput _input;

    private readonly TResult _notfinished;

    internal readonly bool IsEndQueue = false;

    internal QueuedItem()
    {
        IsEndQueue = true;
    }

    public QueuedItem(TInput input, TResult notfinished)
    {
        _input = input;
        _notfinished = notfinished;
        _result = _notfinished;
    }

    public TResult ReadResult()
    {
        lock (_lockObject)
        {
            if (!IsResultReady)
                throw new InvalidOperationException("Check IsResultReady before calling ReadResult()");

            return _result;
        }
    }

    public void WriteResult(TResult value)
    {
        lock (_lockObject)
        {
            if (IsResultReady)
                throw new InvalidOperationException("Result has already been written");

            _result = value;
        }
    }

    public TInput Input { get { return _input; } }

    public bool IsResultReady
    {
        get
        {
            lock (_lockObject)
            {
                return !object.Equals(_result, _notfinished) || IsEndQueue;
            }
        }
    }
}

public class ParallelImmediateOrderedProcessingQueue<TInput, TResult>
{
    private readonly ReaderWriterLockSlim _addLock = new ReaderWriterLockSlim();

    private readonly object _readingResultsLock = new object();

    private readonly ConcurrentQueue<QueuedItem<TInput, TResult>> _concurrentQueue = new ConcurrentQueue<QueuedItem<TInput, TResult>>();

    bool _isFinishedAdding = false;

    private readonly TResult _notFinished;

    private readonly Action<QueuedItem<TInput, TResult>> _processor;

    /// <param name="notFinished">A value that indicates the result is not yet finished</param>
    /// <param name="processor">Must call SetResult() on argument when finished.</param>
    public ParallelImmediateOrderedProcessingQueue(TResult notFinished, Action<QueuedItem<TInput, TResult>> processor)
    {
        _notFinished = notFinished;
        _processor = processor;
    }

    public event Action ResultsReady = delegate { };

    private void SignalResult()
    {
            QueuedItem<TInput, TResult> item;
            if (_concurrentQueue.TryPeek(out item) && item.IsResultReady)
            {
                ResultsReady();
            }
    }

    public void Add(TInput input)
    {
        bool shouldThrow = false;

        _addLock.EnterReadLock();
        {
            shouldThrow = _isFinishedAdding;

            if (!shouldThrow)
            {
                var queuedItem = new QueuedItem<TInput, TResult>(input, _notFinished);

                _concurrentQueue.Enqueue(queuedItem);

                Task.Factory.StartNew(() => { _processor(queuedItem); SignalResult(); });
            }
        }
        _addLock.ExitReadLock();

        if (shouldThrow)
            throw new InvalidOperationException("An attempt was made to add an item, but adding items was marked as completed");
    }

    public IEnumerable<TResult> ConsumeReadyResults()
    {
        //lock necessary to preserve ordering
        lock (_readingResultsLock)
        {
            QueuedItem<TInput, TResult> queuedItem;

            while (_concurrentQueue.TryPeek(out queuedItem) && queuedItem.IsResultReady)
            {
                if (!_concurrentQueue.TryDequeue(out queuedItem))
                    throw new ApplicationException("this shouldn't happen");

                if (queuedItem.IsEndQueue)
                {
                    _completion.SetResult(true);
                }
                else
                {
                    yield return queuedItem.ReadResult();
                }
            }
        }
    }

    public void CompleteAddingItems()
    {
        _addLock.EnterWriteLock();
        {
            _isFinishedAdding = true;

            var queueCompletion = new QueuedItem<TInput, TResult>();

            _concurrentQueue.Enqueue(queueCompletion);
            Task.Factory.StartNew(() => { SignalResult(); });
        }
        _addLock.ExitWriteLock();
    }

    TaskCompletionSource<bool> _completion = new TaskCompletionSource<bool>();

    public void WaitForCompletion()
    {
        _completion.Task.Wait();
    }
}

class Program
{
    static void Main(string[] args)
    {
        const int notFinished = int.MinValue;

        var processingQueue = new ParallelImmediateOrderedProcessingQueue<int, int>(notFinished, qi =>
        {
            int work = 0;

            Console.WriteLine("Working on " + qi.Input);

            //simulate work
            int maxBusy = 90000000 - (10 * (qi.Input % 3));
            for (int busy = 0; busy <= maxBusy; ++busy) { ++work; };

            Console.WriteLine("Finished " + qi.Input);

            qi.WriteResult(qi.Input);
        });

        processingQueue.ResultsReady += new Action(() =>
        {
            Task.Factory.StartNew(() =>
                {
                    foreach (int result in processingQueue.ConsumeReadyResults())
                    {
                        Console.WriteLine("Results Available: " + result);
                    }
                });
        });

        int iterations = new Random().Next(5, 50);
        Console.WriteLine("------- iterations: " + iterations + "-------");

        for (int i = 1; i <= iterations; ++i)
        {
            processingQueue.Add(i);
        }

        while (true)
        {
            char c = Console.ReadKey().KeyChar;

            if (c == 's')
            {
                break;
            }
            else
            {
                ++iterations;

                Console.WriteLine("adding: " + iterations);
                processingQueue.Add(iterations);
            }
        }

        processingQueue.CompleteAddingItems();
        processingQueue.WaitForCompletion();

        Console.WriteLine("Done!");
        Console.ReadKey();
    }
} 
```

# visual-studio-2010 - 线程' ' (0xb24) 已退出，代码为 0 (0x0)

> ID：14575010
> 
> 赞同：18
> 
> 时间：2013-01-29T03:07:07.210
> 
> 标签：visual-studio-2010

例如，每当我尝试运行程序时，

如果我必须运行“frmphonebook”，那么

```
Application.Run(new frmphonebook()); 
```

我输入了但是当我运行它时它运行另一个表单，它发生在每个表单上，它显示输出为

```
The thread 'vshost.RunParkingWindow' (0x63c) has exited with code 0 (0x0).

The thread '<No Name>' (0xb24) has exited with code 0 (0x0). 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-09-10T08:22:58.573

你可以给你的线程一个名字，它也可以帮助你调试......但是在许多应用程序中，线程是隐式创建的，你无法控制名称。所以这不是错误消息。代码 0 表示一切都按计划进行。任何非零代码通常表示错误。

编辑：您还可以禁用这些消息的显示，在调试时，右键单击输出，然后选择您想看到的内容。 ![在此处输入图像描述](../Images/34bdb89fd69f93079e285354975a9eec.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-26T22:10:48.787

如果线程以代码 0 退出，则它运行成功。On Codeproject is a [Beginners-Guide-to-Threading](http://www.codeproject.com/Articles/26148/Beginners-Guide-to-Threading-in-NET-Part-1-of-n) 这篇[关于线程](http://msdn.microsoft.com/en-us/library/ms973903.aspx)的文章也可能会有所帮助。所以这个[问题也可能有用](https://stackoverflow.com/questions/155610/how-do-i-specify-the-exit-code-of-a-console-application-in-net)。[系统错误代码](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)列表

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-08-17T13:39:13.950

关于使用调试器，您将学到的一件事是，您将看到我们可能称之为系统的“柔软的白色下腹部”（暗指鳄鱼的解剖结构）：加载和卸载各种 DLL，有些复杂正在启动和停止的“帮助”线程的安排......等等。

看到所有这些消息可能会分散经验不足的用户的注意力。但是，随着时间的推移，您会明白调试器只是真实而冗长。它为您显示的详细信息可能与您的调试过程并不真正相关，但它无法“知道”这一点；它只是显示事实信息，你必须理清哪些是相关的，哪些是不相关的。

至于 Windows 窗体应用程序，我自己注意到似乎有几个“帮助”线程，通常没有名称，或者（正如我在调试时经常看到的那样），它们被命名为“vshost.RunParkingWindow”之类的东西。通常，除了您可能自己创建的任何线程之外，您还必须相信系统正在代表您创建线程。正如其他人所建议的那样，给您自己的线程起有意义的名称，这样您就可以将它们与系统线程区分开来。

您可以通过在 UI 更新代码中的某处放置一个断点来进一步了解 Windows 窗体应用程序的多线程结构，当它命中时，使用 Debug/Windows/Threads 显示在您的进程空间中运行的所有线程的视图. 你会很惊讶，我想，有多少！尝试在您的应用程序中一一创建并 .Show()-ing 多个表单。我想您会看到每个 .Show() 操作都会创建一个新窗口，并使用它为该窗口创建几个支持线程。

您还可能会在调试窗口中看到如下消息：“System.Windows.Forms.dll 中发生了 'System.ObjectDisposedException' 类型的第一次机会异常”。很多时候，系统异常处理程序会代表您执行合理的默认操作。在调试器中出现此消息时没有中断，这表明某些默认处理程序已为您处理了此异常。

对 Windows 窗体应用程序之类的系统支持有些复杂，以使您的实现更容易和更简单。当您运行调试器时，您会看到其中的一些详细信息。随着时间的推移，您将了解什么是“常见的”以及什么是问题的指示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-25T12:45:20.703

检查您的 Web 应用程序中是否有一些文件已被呈现为无法访问。就我而言，我的图表控件创建了一个只读的文本文件，并引发了异常。删除了文件和文件夹，瞧

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-30T04:48:38.173

我找到了我认为的解决方案....我在 Visual Studio 中转到项目 > 属性 > 链接器 > 系统查找子系统行，然后单击向下箭头并更改为控制台（....单词....）。

它对我有用！请享用”

# assembly - Nasm 程序集访问内存中的特定字节

> ID：14575014
> 
> 赞同：1
> 
> 时间：2013-01-29T03:07:25.877
> 
> 标签：assembly, x86, nasm, memory-address

这次我有一个简单的问题，如何访问内存中的特定字节？

我试过了：

```
mov cx, addr_seg

mov es, cx

mov cx, addr_off

mov bx, [es:cx] 
```

但这只是给了我“无效的有效地址”，所以我认为我做错了什么。

有人可以告诉我该怎么做吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:20:43.883

在谷歌，我的教科书等之后对代码进行了一些混乱之后，我想出了一个相当令人惊讶的解决方案......

显然，唯一的问题是我通过`[es:cx]`. 它通过 工作`[es:si]`，所以我猜在实际寻址方案中 cx 和 si 存在差异。

呵呵，每天都学点新东西。

# c# - 字典之间没有分配兼容性 > 和字典 >?

> ID：14575018
> 
> 赞同：2
> 
> 时间：2013-01-29T03:08:10.753
> 
> 标签：c#, generics, covariance

我正在尝试将 a 传递给`Dictionary<int, List<T>>`需要 a 的构造函数`IDictionary<int, IEnumerable<T>>`。

不幸的是，泛型`IDictionary`没有定义为`IDictionary<TKey, out TValue>`. 也许这没有意义，但是是否有一个演员可以让我将我的字典传递给构造函数？

明显的强制转换 ( `(IDictionary<int, IEnumerable<T>>)dictionary`) 在运行时失败。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T03:21:37.670

不，因为那不安全：

```
Dictionary<int, List<int>> mydictionary = whatever;
Dictionary<int, IEnumerable<int>> converted = (Dictionary<int, IEnumerable<int>>) mydictionary;
converted.Add(10, new int[] { 1, 2, 3 } ); 
```

而且您刚刚将一个数组添加到只能保存列表的字典中。这是不允许的，因为没有办法让它安全。

您注意到字典接口不是协变的；这正是它不能协变的原因。协变注释中的“out”是一个助记符，它告诉您“value 参数仅用于输出”，但显然 value 参数用于输入到字典中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:16:49.843

您可以使用[Enumerable.ToDictionary](http://msdn.microsoft.com/en-us/library/bb548657.aspx)方法从原始字典中获取所需的字典：

```
var d = new Dictionary<int, List<int>> { { 1, new List<int> { 1 } } };
IDictionary<int, IEnumerable<int>> id = 
                         d.ToDictionary(p => p.Key, p => p.Value.AsEnumerable()); 
```

# c# - 从 C# 将 SQL 传递给报表服务器

> ID：14575025
> 
> 赞同：0
> 
> 时间：2013-01-29T03:09:17.263
> 
> 标签：c#, sql, sql-server, reporting

我如何传递`SQL Query`from `C#`to `Report Server 2008 R2`？

我需要动态生成一个`SQL`语句，`C#`并让它在报表中使用`Report Server`.

我已经为 中的报告声明了一个`parameter`和。现在我可以传递from但我也想**传递****from** **to**。`dataset``Report Server``parameter``C#`**`SQL Query``C#``Report Server`**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:16:03.873

虽然这不是很安全，但您可以将 SQL 语句传递给报告中的文本字段参数。然后，您可以将该语句作为参数传递给 SQL Server 中的存储过程（假设您使用它）。然后您可以使用 sp_executesql 来执行该语句。

[http://msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

您可能遇到的一个问题是，报表服务器将期望数据集中有一组标准的列，因此您希望传递的语句具有一组标准的列。我不认为报告可以处理动态字段而不需要很多技巧。

我们为处理“动态”列所做的一件事是让语句返回“field_1”、“field_2”等作为结果集，然后将您的报告映射到这些通用列。

# sql - 显示我加入的项目列表

> ID：14575026
> 
> 赞同：0
> 
> 时间：2013-01-29T03:09:19.493
> 
> 标签：sql, subquery

我有 3 张桌子：

```
Employee: contain employee_id, name

Project: contain project_id, name
Project_assignment: contain id_assign, employee_id, project_id, startdate, enddate 
```

我想显示我加入的列表项目信息：name_project（我加入），加入项目的人数和开始日期（我加入项目的日期）

有没有办法做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:13:15.807

如果我正确理解您的问题，您需要使用`GROUP BY`：

```
SELECT P.Project_Id, P.Name as ProjectName, PA.StartDate, COUNT(E.Employee_Id) as EmployeeCount
FROM Project P
   JOIN Project_Assignment PA ON P.Project_Id = PA.Project_Id
   JOIN Employee E ON PA.Employee_Id = E.Employee_Id
GROUP BY P.Project_Id, P.Name, PA.StartDate 
```

请注意，假设员工在不同的日子加入该项目，这不会为您提供唯一的记录。如果是这种情况，您希望显示哪个开始日期？

- 编辑

这应该会返回您所在的项目（假设您的 id 是 123），以及项目 id、项目名称、开始日期和员工人数：

```
SELECT P.Project_Id, P.Name as ProjectName, PA.StartDate, E.EmpCount
FROM Project P
   JOIN Project_Assignment PA ON P.Project_Id = PA.Project_Id AND PA.Employee_Id = 123
   JOIN (
       SELECT Project_Id, Count(Employee_Id) EmpCount
       FROM Project_Assigment
       GROUP BY  project_id
   )
   E ON P.Project_Id = E.Project_Id 
```

祝你好运。

# excel - 从日期时间开始计算年份

> ID：14575028
> 
> 赞同：0
> 
> 时间：2013-01-29T03:09:51.613
> 
> 标签：excel, counting

我有如下数据：

```
amos            50       10/16/2012 10:13
amri            50       1/9/2013 9:31
andi            10       3/11/2008 10:35
andik           10       12/6/2012 16:58
anggoro         50       9/13/2012 16:14
ari_prabowo 50       11/26/2012 10:30
astra_permana   10       8/2/2010 17:40
atang           10       1/16/2009 14:39 
```

我想计算这样的年份发生了多少次`"2008", "2009", "2010", "2012", "2013"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:37:39.310

感谢您重新格式化您的数据。

我会添加一个帮助列来计算年份

```
=YEAR($A$1) 
```

然后您可以在该列上使用 countif

```
=COUNTIF($B$1:$B$10,2008) 
```

否则，您可以使用 sumproduct (Excel 2003)

```
=SUMPRODUCT(($A$1:$A$10>=DATE(2008,1,1))*($A$1:$A$10<DATE(2009,1,1))) 
```

或计数（excel 2007 +）

```
=COUNTIFS($A$1:$A$10,">=1/1/08",$A$1:$A$10,"<1/1/09") 
```

# google-apps-script - 如何创建允许跟踪单元格中的更改并向我发送消息的脚本

> ID：14575029
> 
> 赞同：0
> 
> 时间：2013-01-29T03:09:52.610
> 
> 标签：google-apps-script

我使用脚本从另一个文档中获取数据：

```
 function importFunction1() {
  var ss = SpreadsheetApp.openById("0AnFTFDi5xS7qdEg1bXF1SmFqMF9WZ0Z2RmpfOXZEU3c");
  var sourceSheet = ss.getSheets()[0];
  var ss2 = SpreadsheetApp.openById("0AnFTFDi5xS7qdHUxTEVpTHp4MWxwZV9reUdxUVlRX2c");
  var targetSheet = ss2.getSheets()[0];
  var values = sourceSheet.setActiveSelection("A2:G100").getValues();
  targetSheet.setActiveSelection("A1:G99").setValues(values);
} 
```

数据被插入到指定的范围内。在另一列中，我有一个公式，显示插入的行中是所需的值。

问题：当新行出现上面提到的脚本时。检查相关数据，如果有，它会向我发送一条消息。如何给自己按摩？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:53:57.290

[`MailApp.sendEmail(recipient, subject, body)`](https://developers.google.com/apps-script/class_mailapp#sendEmail)

它可以通过电子邮件向任何人发送任何内容，并且您可以使用可选的第四个参数来指定其他选项。

# javascript - 在 span 和其他内联标签上启用 CKEditor4 内联

> ID：14575036
> 
> 赞同：9
> 
> 时间：2013-01-29T03:10:22.690
> 
> 标签：javascript, html, ckeditor, contenteditable, inline-editing

我想知道这是否可能以及如何启用 CKEditor4 内联/内容编辑功能`<span>`和其他内联元素。这是我在官方文档中找不到的东西。

使用此标记：

```
<span id="editable" contenteditable="true"></span> 
```

以及标准配置（启用 AutoInline）或此配置：

```
<script>
    CKEDITOR.disableAutoInline = true;
    CKEDITOR.inline('editable'); // ID of the element to edit
</script> 
```

报错：标签`The specified element mode is not supported on element: "span".` 报同样的错误。`<a>`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-21T23:52:23.043

允许支持不受支持的标签的破解方法：

```
CKEDITOR.dtd.$editable.span = 1
CKEDITOR.dtd.$editable.a = 1 
```

赢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T09:13:52.493

没有。不能在内联元素上创建编辑器。[在这里](https://github.com/ckeditor/ckeditor-dev/blob/master/core/dtd.js#L236)您可以找到接受的名称列表。

但是，我检查了修改该列表后，我能够在`strong`元素上初始化编辑器，它甚至可以工作......除非您粘贴或执行其他不受支持的操作:)。

# css - DL 标签 - 垂直对齐 DT 标签中的文本，颜色背景，与 DD 标签具有相同的高度

> ID：14575038
> 
> 赞同：1
> 
> 时间：2013-01-29T03:10:27.730
> 
> 标签：css, list-definition

给定以下 html 和 CSS：

```
dl.table-display {
  float: left;
  width: 520px;
  margin: 1em 0;
  padding: 0;
  border-bottom: 1px solid #999;
}

.table-display dt {
  clear: left;
  float: left;
  width: 200px;
  margin: 0;
  padding: 5px;
  border-top: 1px solid #999;
  font-weight: bold;
  background-color: #cccccc;
}

.table-display dd {
  float: left;
  width: 300px;
  margin: 0;
  padding: 5px;
  border-top: 1px solid #999;
}
```

```
<dl class="table-display">
  <dt>Key 1</dt>
  <dd>Value 1</dd>
  <dt>Key 2</dt>
  <dd>Value 2<br/>With line breaks<br/>and line breaks</dd>
</dl>
```

我正在尝试将 DT 和 DD 标签中的文本居中，并使 DT 标签背景颜色覆盖 100% 的较长 DD 标签。使用上面的代码创建一个 .html 文件，看看它现在的样子。我确实有这个表格，但我现在被迫使用 DL 标记。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T03:00:10.800

为你的 dt 元素设置一个高度将“拉伸”背景，只要这个高度 >= 包含的 dd 的高度，它就会看起来如你所愿。

```
dt{height:100px;} 
```

在 dl 标签上提供 text-align:center 将使您的文本居中。

```
dl{text-align:center;} 
```

困难的部分是尝试将文本垂直对齐到中间。一个选项是将文本包含在绝对定位的 div 中。但有点混乱。

```
<dt><div>Key 1</div></dt>

dt{position:relative;height:100px;}
dt div{position:absolute;bottom:50px;} 
```

在此处检查其他选项/解决方案[垂直对齐标签中的文本](https://stackoverflow.com/questions/1554941/vertical-align-text-in-a-label)

希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-19T21:56:12.623

`dt {display:table-cell}`将让您垂直对齐 dt 中的文本。就我而言，我需要将文本垂直对齐到底部。例子：

```
dt {
    display:table-cell;
    vertical-align:middle;
    height:5em;
} 
```

顺便说一句，`dl {display:table-cell}`将每个`<dl>`放在一条水平线上，类似于浮动（或类似于一行表格单元格）。如果您为 设置高度`<dt>`并在底部添加边框，则该底部边框将形成一条直线，就像表格单元格边框一样。

# matlab - 如何在 MATLAB 中可视化稀疏矩阵？

> ID：14575054
> 
> 赞同：3
> 
> 时间：2013-01-29T03:12:21.007
> 
> 标签：matlab, matrix, plot, sparse-matrix, visualize

所以我在[这里](https://dl.dropbox.com/u/4724281/blah.mat)有这个矩阵，它的大小为 13 x 8198。（我称它为“blah”）。

这是一个稀疏矩阵，因为它的大部分条目都是 0。当我执行 imagesc(blah) 时，我得到以下图像：

![在此处输入图像描述](../Images/8d0ea7207f4f42ac95b4968017900294.png)

显然这是毫无价值的，因为我无法清楚地看到非零元素。我尝试过使用颜色缩放，但无济于事。

无论如何，我想知道是否有更好的方法能够以某种方式在 MATLAB 中可视化这个矩阵？我正在设计一种算法，并希望能够看到某些东西 int teh 矩阵。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T03:18:40.487

试试[`spy`](http://www.mathworks.com/help/matlab/ref/spy.html)；它正是为此而设计的。

问题是`spy`使轴相等，并且您的数据是 13 x 8198，因此与第二个轴相比，第一个轴几乎不可见。[`daspect`](http://www.mathworks.com/help/matlab/ref/daspect.html)可以解决这个问题。

```
>> spy(blah)
>> daspect([400 1 1]) 
```

![](../Images/8279f59a8b8fa1f1d125363f0429b187.png)

* * *

`spy`没有选项可以通过符号进行不同的绘图。一种选择是编辑源代码以添加该功能（它在 matlab 中实现，您可以通过运行来获取源代码`edit spy`）。不过，更简单的破解方法是分别监视正面和负面部分：

```
>> daspect([400 1 1]);
>> hold on;
>> spy(max(blah, 0), 'b');
>> spy(min(blah, 0), 'r'); 
```

![](../Images/750fbb9d211c1500a66250a8976a2e76.png)

这有一个不幸的副作用，使正负靠近的地方出现由第二个绘制的地方主导，这里是负数（例如，在矩阵的顶行中）。除了摆弄标记大小之外，我不确定该怎么做。您当然可以按顺序进行并进行比较。

# facebook - 为什么我在尝试发布视频（但不是照片）时收到“用户尚未授权应用程序执行此操作”错误

> ID：14575063
> 
> 赞同：0
> 
> 时间：2013-01-29T03:12:48.743
> 
> 标签：facebook, facebook-graph-api

几年来，我已经使用此处定义的方法成功地将我的应用程序发布到用户的墙上： [https ://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

现在我正在切换到将视频（而不是照片）发布到他们的墙上，突然出现这个错误：

{"error":{"message":"(#200) 用户未授权应用程序执行此操作","type":"OAuthException","code":200}}

大概发布照片和视频的权限是相同的（据我所知），所以这几乎可以肯定是一个红鲱鱼错误（对于 facebook 来说并不罕见）。所以，我很好奇是否有其他人使用 /post/ 方法将内容发布到已授权您的应用程序的用户的墙上，我想知道我做错了什么......在我拉出用户的访问令牌之后（我已经在下面 xxxed 出来了）我的电话的其余部分如下所示：

```
 post/access_token=xxxxxxxxx
&from=MyCompany
&to=user_facebook_id
&title=SomeString
&link=URL_TO_FOLLOW_BACK_FROM_FB
&source=URL_OF_VIDEO_FILE
&name=SOME_STRING
&type=video
&picture=URL_OF_THUMBNAIL 
```

我的猜测是我在通话中遗漏了一些东西，但我无法弄清楚它可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:18:47.330

我想这就是不同的地方：

> 视频 POST 请求应使用 graph-video.facebook.com

来源：[Graph API > 视频](https://developers.facebook.com/docs/reference/api/video/)

# c++ - 关闭函数未被识别 - C++

> ID：14575068
> 
> 赞同：14
> 
> 时间：2013-01-29T03:13:28.453
> 
> 标签：c++, c, unix

我在一个名为的文件中有以下代码`RaftLog.cc`：

```
#include <algorithm>
#include <fcntl.h>
#include <sys/stat.h>

namespace LogCabin {
namespace Server {
namespace RaftConsensusInternal {

namespace FilesystemUtil = Storage::FilesystemUtil;

namespace {
bool
fileToProto(const std::string& path, google::protobuf::Message& out)
{
    int fd = open(path.c_str(), O_RDONLY);
    if (fd == -1)
        return false;
    else
        close(fd);
    FilesystemUtil::FileContents file(path);

        // more code down here, not useful to the problem. 
```

但是，当我编译时，我有：

```
build/Server/RaftLog.cc: In function ‘bool LogCabin::Server::RaftConsensusInternal::{anonymous}::fileToProto(const string&, google::protobuf::Message&)’:
build/Server/RaftLog.cc:43:17: error: ‘close’ was not declared in this scope
build/Server/RaftLog.cc: In function ‘void LogCabin::Server::RaftConsensusInternal::{anonymous}::protoToFile(google::protobuf::Message&, const string&)’:
build/Server/RaftLog.cc:76:13: error: ‘close’ was not declared in this scope
In file included from ./Server/RaftConsensus.h:17:0, 
```

我不知道为什么该`close()`函数不包含在`#include <fcntl.h>`. 有人可以帮助我吗？也让我知道我是否应该包含更多代码。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-29T03:16:15.713

[`unistd.h`](http://linux.die.net/man/3/close)如果调用`close`函数，则需要包含头文件

```
#include <unistd.h> 
```

使用`fopen/fclose`，`fdopen/close`配对

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T17:12:29.630

在 Visual Studio 2015 中

```
#include <corecrt_io.h> 
```

似乎工作！

# python - 自定义适配器和 django-allauth 的问题

> ID：14575071
> 
> 赞同：2
> 
> 时间：2013-01-29T03:13:37.137
> 
> 标签：python, django, adapter, django-allauth

我正在`django-allauth`为我的项目使用，我正在尝试使用自定义适配器`settings.LOGIN_REDIRECT_URL`在登录后重定向用户之前做一些工作，相关代码：

```
from allauth.account.adapter import DefaultAccountAdapter
from django.conf import settings

class DispersionAccountAdapter(DefaultAccountAdapter):

    def get_login_redirect_url(self, request):
        """ Retorna la URL por defecto para redirecciónar,

        esta lo hace formateando la cadena con el nombre del usuario.
        """
        if request.user.is_authenticated():
            return settings.LOGIN_REDIRECT_URL.format(
                username=request.user.username)
        else:
            return "/" 
```

因此，我按照文档说明对我的 settings.py 进行了更改：

```
LOGIN_REDIRECT_URL = "/{username}/all"
ADAPTER = "dispersion.apps.adapter.DispersionAccountAdapter"
ACCOUNT_ADAPTER = "dispersion.apps.adapter.DispersionAccountAdapter"
ACCOUNT_AUTHENTICATION_METHOD = "username_email"
LOGIN_URL = "/main/login" 
```

因此，当我运行服务器并尝试登录时，我被重定向到`http://127.0.0.1:8000/{username}/all`而不是`http://127.0.0.1:8000/jorge/all`（如果那是我的用户名）。我不确定我的设置有什么问题。我尝试了以下没有任何问题：

```
$ python2 manage.py shell

In [1]: from dispersion.apps.adapter import DispersionAccountAdapter

In [2]: adapter = DispersionAccountAdapter() 
```

非常感谢任何建议或修复！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:13:04.913

allauth.account.adapter.DefaultAccountAdapter 不提供名为“get_login_redirect_url”的方法，因此您的自定义适配器中的方法永远不会被调用。

此方法位于 allauth.utils.py

两种可能的解决方案：

*   重定向两次：重定向到您在 url 上执行工作的某个视图，然后再次重定向。imo这是“易于实施”的解决方案，但人们可能会觉得它很糟糕。

或者

*   创建从**allauth.account.forms.LoginForm**派生的自定义登录表单并覆盖登录方法。此方法返回*最终响应对象*。

对于此解决方案，您需要使用自定义登录视图。在您的自定义登录视图中，使用“form_class”参数中设置的登录表单类调用 allauth 登录视图。有关详细信息，请参阅**allauth.account.views.login**。

代码摘要（提供的代码未经测试并在小 stackoverflow 窗口中编写，因此它绝对不能复制'n'paste，它只是一个小的“howto”指南来阐明目标）

网址.py：

```
urlpatterns = patterns('',
...
(r'^accounts/login/', my_login_view),
(r'^accounts/', include('allauth.urls')),
...
) 
```

表格.py

```
from allauth.account.forms import LoginForm as AllauthLoginForm
class MyCustomLoginForm(AllauthLoginForm)
    def login(self, request, redirect_url=None):
        # the original response
        response = super(MyCustomLoginForm, self).login(request, redirect_ur)
        if self.user.is_authenticated():
            r = settings.LOGIN_REDIRECT_URL.format(
                username=self.user.username)
        else:
            r = "/"
        return HttpResponseRedirect(r) 
```

视图.py

```
from allauth.account.views import login as allauth_login
def my_login_view(request):
    return allauth_login(request, form_class=MyCustomLoginForm) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:30:57.650

您正在使用`get_login_redirect_url`尚不支持的 0.8.3 —— 对此功能的支持是在 0.8.3 之后添加的。

见：[https ://github.com/pennersr/django-allauth/blob/11ee262c9b9ec4923e8f3a34c71a05dad1dbccbb/ChangeLog#L1-L9](https://github.com/pennersr/django-allauth/blob/11ee262c9b9ec4923e8f3a34c71a05dad1dbccbb/ChangeLog#L1-L9)

如果您需要此功能，我建议您使用 github 上的开发版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-29T17:06:36.097

```
<input type="hidden" name="next" value="{{ request.get_full_path }}" /> 
```

您需要将以下行添加到表单中。

# java - 初始化二维对象数组时出现空指针异常 [Java]

> ID：14575072
> 
> 赞同：1
> 
> 时间：2013-01-29T03:13:51.127
> 
> 标签：java, arrays, object, nullpointerexception, rectangles

我正在尝试制作一个 2D 瓷砖游戏，当制作包含瓷砖的数组时，我得到一个 NullPointerException，这里是一些代码。抱歉，如果格式不正确，第一个计时器

公共类世界{

```
//holds data for where to place images and rectangles
int[][] worldDat = new int[25][25]; 
//hold rectangles for checking interaction with player
Rectangle[][] blocks = new Rectangle[25][25];
//holds block's images to be painted
Image[][] blockImage = new Image[25][25];
//holds position to be pained on screen
int[][] location = new int[25][25];
//enumeration holding block's images and other things of the sort
EWorldBlocks eBlocks;

//sets all of the arrays listed above
public void setupAll(){

    for(int i = 0; i < 24; i++){

        for(int e = 0; e < 24; e++){                    
            blocks[i][e].setBounds(e * 20, i * 20, 20, 20);
            blocks[i][e].setLocation(e*20, i*20);

            if(worldDat[i][e] == 6){
                blockImage[i][e] = getRandomGrass();
            }else if(worldDat[i][e] == 0){
                blockImage[i][e] = null;
            }else{
            blockImage[i][e] = eBlocks.intToImage(worldDat[i][e]);
            }
        }
    }
}   

//used to get a random block
private Image getRandomGrass()
{
    Random rand = new Random();

    int r = rand.nextInt(2);
    r++;

    return eBlocks.intToImage(r);
}

public World(int[][] worldDat) {
    this.worldDat = worldDat;
}

} 
```

然后在这个类中调用它（我相信它是问题的一部分）

公开课 worldDraw{

```
//ALSO if there is a better way to do this, do tell
levels levels = new levels();
static levels sLevels = new levels();
World level1;
static World sLevel1 = new World(sLevels.getLevel1());

//called in paint method for panel
public void draw(Graphics2D g2){
    sLevel1.setupAll();
    for(int i = 0; i < 24; i++){
        for(int e = 0; i < 24; i++){
            g2.drawImage(level1.blockImage[i][e], e*25, i*25, null);
        }
    }

}

//holds levels
public worldDraw() {        
    level1 = new World(levels.getLevel1());
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:14:43.177

当你创建一个对象数组时，你是在创建一个引用数组，但你并没有分配引用。在尝试使用它们之前，您必须先执行此操作。把它想象成类似于制作鸡蛋盒。在您首先将鸡蛋装满纸箱之前，您不能使用任何鸡蛋。因此，例如您的 blocks 数组，您首先需要将 Rectangle 对象分配给数组中的每个项目，然后才能调用它们的方法。这通常在 for 循环中完成。例如，

```
for(int i = 0; i < 24; i++){
    for(int e = 0; e < 24; e++){       
        blocks[i][e] = new Rectangle(....); //...             
        blocks[i][e].setBounds(e * 20, i * 20, 20, 20);
        blocks[i][e].setLocation(e*20, i*20); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:16:25.870

您需要知道 Java 与 C 不同。

当你这样做时：

```
Rectangle[][] blocks = new Rectangle[25][25]; 
```

blocks 2D 数组中的所有引用都是空的，直到您调用 new 并给它们一个引用。

所以你必须这样做：

```
for(int i = 0; i < 24; i++){
    for(int e = 0; e < 24; e++){             
        blocks[i][e] = new Rectangle(); // I don't know what arguments it takes.       
        blocks[i][e].setBounds(e * 20, i * 20, 20, 20);
        blocks[i][e].setLocation(e*20, i*20); 
```

# java - 在java中创建元组的简单方法？

> ID：14575074
> 
> 赞同：6
> 
> 时间：2013-01-29T03:14:16.143
> 
> 标签：java, tuples

有没有一种简单的方法可以在 java 中创建一个 2 元素元组？我正在考虑创建一个类并将变量声明为最终变量。这行得通吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T03:18:25.120

这很简单：

```
public class Pair<S, T> {
    public final S x;
    public final T y;

    public Pair(S x, T y) { 
        this.x = x;
        this.y = y;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T03:18:35.883

是的。最佳实践是使字段私有并为它们提供吸气剂。

对于许多人（包括 [大多数？] 语言设计者）来说，元组的想法与 Java 的强类型哲学背道而驰。他们更喜欢一个特定于用例的类，而不仅仅是一个元组，如果该类只有两个 getter 而没有其他方法，那就这样吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:19:12.500

我更喜欢使用 getter 而不是 setter 的私有变量。显然，在构造函数中设置。然后实现可迭代，也许。

# c - 从输入中检测字符组合

> ID：14575082
> 
> 赞同：0
> 
> 时间：2013-01-29T03:15:07.930
> 
> 标签：c

我的任务是：

编写一个程序，读取最多 # 的输入并报告序列 ei 出现的次数。

我写了一些在大多数情况下都有效的东西，但是当它不存在时会有输入......

像这样的输入：（假设返回1）

```
sdlksldksdlskd
sdlsklsdks
sldklsdkeisldksdlk
#
number of combination is: 0 
```

这是代码：

```
int main(void)

{
    int index = 0;
    int combinationTimes = 0;
    int total = 0;
    char userInput;
    char wordChar[index];

    printf("please enter your input:\n");

    while ((userInput = getchar()) != '#')
    {
        if (userInput == '\n')
            continue;

        wordChar[index] = userInput;
        index++;
        total++;
    }

    for (index = 1; index < total; index++)
    {
        if (wordChar[index] == 'i')
        {
            if (wordChar[--index] == 'e')
            {
                combinationTimes++;
                ++index;
            }
        }
    }

    printf("number of combination is: %d", combinationTimes);

    return 0;
} 
```

你能告诉我使用这个输入我没有得到 1 吗？

在书中，他说用“获得你的 eieio 奖”来测试它，它起作用了……但在我玩了一点之后，我发现并不总是这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T05:10:25.483

似乎没有必要将文件读入数组。您只需要在读取或到达 EOF`ei`之前跟踪找到了多少次：`#`

```
#include <stdio.h>

int main(void)
{
    int c;
    int ei_count = 0;
    while ((c = getchar()) != EOF && c != '#')
    {
        if (c == 'e')
        {
            int c1 = getchar();
            if (c1 == 'i')
                ei_count++;
            else if (c1 != EOF)
                ungetc(c1, stdin);
        }
    }
    printf("ei appeared %d times\n", ei_count);
    return(0);
} 
```

测试（程序被调用`ei`并由 构建`ei.c`）：

```
$ ei < ei.c
ei appeared 0 times
$ sed 1d ei.c | ei
ei appeared 1 times
$ sed 's/#/@/' ei.c | ei
ei appeared 4 times
$ 
```

第一个停`#include`在行，第二个停在`#`比较中，第三个读取整个文件。它还为样本数据提供了正确的输出。

* * *

### 分析代码

您的主要问题是您没有为数组分配任何空间。将数组的维度从 4096 更改为`index`4096。这对于您的测试目的来说已经足够大了（但实际上程序应该注意数组而不是溢出它 - 但是我认为数组不是必需的完全没有；参见上面的代码）。

下一个主要问题是，尽管它的名字，`getchar()`返回一个`int`，而不是一个`char`。它可以返回任何有效字符加上一个不同的值 EOF。所以它必须返回一个大于 a 的值`char`。（如果您使用`char`. 如果`char`是有符号类型，则会发生两件事之一. 如果`char`是无符号类型，则没有输入匹配 EOF。也不是正确的行为。）

修复它很容易，但您的代码不会检测到 EOF。始终处理 EOF；数据可能格式错误。这是代码中的一个简单修复。

第三个问题是`printf()`语句不以换行符结尾。它应该。

您在这里的测试条件很奇怪：

```
 if (wordChar[--index] == 'e')
        {
            combinationTimes++;
            ++index;
        } 
```

使用一个前增量和一个后增量很奇怪，但这只是一个一致性问题。但是，更糟糕的是，当字符`i`出现在输入中并且前面没有. 时会发生什么`e`。考虑这一行`@include <stdio.h>`：你从`index`1 开始；那是 a `i`，所以你减少索引，但`wordChar[0]`不是 a `e`，所以你不要再增加它，但是循环结束了，所以循环`index`再次检查 1 ，并继续循环测试`i`is`i`和好久`@`没有了。`e`

没有理由先递减然后递增`index`；只需使用：

```
 if (wordChar[index-1] == 'e')
            combinationTimes++; 
```

修复这些后，您的代码就会正常运行。您的麻烦主要在于您使用的数组不够大（大小为 0），并且您正在用正在读取的数据覆盖准随机内存。

```
#include <stdio.h>

int main(void)
{
    int index = 0;
    int combinationTimes = 0;
    int total = 0;
    int userInput;
    char wordChar[4096];

    printf("please enter your input:\n");

    while ((userInput = getchar()) != '#' && userInput != EOF)
    {
        if (userInput == '\n')
            continue;

        wordChar[index] = userInput;
        index++;
        total++;
    }
    printf("total: %d\n", total);

    for (index = 1; index < total; index++)
    {
        if (wordChar[index] == 'i')
        {
            if (wordChar[index-1] == 'e')
                combinationTimes++;
        }
    }

    printf("number of combination is: %d\n", combinationTimes);

    return 0;
} 
```

请注意，您可以合理地将嵌套编写`if`为：

```
 if (wordChar[index] == 'i' && wordChar[index-1] == 'e')
            combinationTimes++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:00:29.753

更改您的`wordChar`数组值。

```
int main(void)

{
    int index = 0;
    int combinationTimes = 0;
    int total = 0;
    char userInput;
    //char wordChar[index]; // index = 0
    char wordChar[255]; // should change the value of array.

    printf("please enter your input:\n");

    while ((userInput = getchar()) != '#')
    {
        if (userInput == '\n')
            continue;

        wordChar[index] = userInput;
        index++;
        total++;
    }

    for (index = 1; index < total; index++)
    {
        if (wordChar[index] == 'i')
        {
            if (wordChar[--index] == 'e')
            {
                combinationTimes++;
                ++index;
            }
        }
    }

    printf("number of combination is: %d", combinationTimes);

    return 0;
} 
```

或者你可以使用`pointer`然后使用`malloc`and `realloc`。

# c - 线程创建的顺序重要吗？

> ID：14575086
> 
> 赞同：2
> 
> 时间：2013-01-29T03:15:35.890
> 
> 标签：c, multithreading

我正在编写一个多线程程序，其中一个线程执行大量系统调用（如读、写），而其他线程执行普通调用，如 printf。假设线程A用于普通调用，线程B用于系统调用，我的主函数就像

```
int main()
{
  pthread_t thread_A;
  pthread_t thread_B;

  pthread_create(&thread_B,NULL,&system_call_func,NULL);
  pthread_create(&thread_A,NULL,&printf_func,NULL);

  pthread_join(thread_B,NULL);
  pthread_join(thread_A,NULL);

  printf("Last thread to be executed was %c\n",write_last);
  return 0;
} 
```

通过这个，我发现带有系统调用的线程总是最后执行。即使我改变线程创建和加入的顺序，它仍然是线程B。我有两个问题，线程创建/加入的顺序重要吗？是因为线程B总是最后执行的系统调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:49:46.750

您只是在测量哪个线程先完成，而不是哪个线程先运行。假设它们都并行运行并且大致在同一时间开始，那么花费较少时间工作的将首先完成。

如果您想观察两者的操作顺序，请在 下运行程序`strace -f`，但请注意，跟踪的开销会大大减慢速度，并且往往会消除跟踪程序中的并行性，除非它正在执行没有系统调用的纯计算任务.

# java - 方法的输出不正确

> ID：14575090
> 
> 赞同：0
> 
> 时间：2013-01-29T03:16:12.500
> 
> 标签：java

我正在编写生成停放的汽车、停车计时器、警察和停车罚单的类。它们由一个程序来演示，该程序将它们全部实例化并投入使用。我已经完成了 99% 的编程，但我在 ParkingTicket 课程中遇到了一个问题。课程中有一种方法可以根据汽车在那儿的未付时间来计算车主将为他们的汽车支付的罚款。违章停放车辆的第一小时或半小时内，基本罚款为 25.00 美元，之后每小时或半小时内额外罚款 10.00 美元。这是我的课程代码：

```
public class ParkingTicket{
  private ParkedCar car;
  private PoliceOfficer officer;
  private double fine;
  private int minutes;
  double BASE_FINE = 25.0;
  double HOURLY_FINE = 10.0;

  public ParkingTicket(ParkedCar aCar, PoliceOfficer anOfficer, int min){
        this.car = new ParkedCar(aCar);
        this.officer = new PoliceOfficer(anOfficer);
        this.minutes = min;

  }

  public ParkingTicket(ParkingTicket ticket2){
     this.car = ticket2.car;
     this.officer = ticket2.officer;
     this.fine = ticket2.fine;
     this.minutes = ticket2.minutes;
  }

    public void calculateFine(){
        int minOver = car.getMinutesParked() - minutes;
        int extraFine = HOURLY_FINE * (minOver / 60);
        if(minOver <= 60){
            fine = BASE_FINE;
        }
        else{
            fine = BASE_FINE + extraFine;
        }
    }

    public ParkedCar getCar(){
        return car;
    }

    public PoliceOfficer getOfficer(){
        return officer;
    }

    public int getMinutes(){
        return minutes;
    }

    public String toString(){
        return "Car Data:\n" + car +
                "\nOfficer Data:\n" + officer + 
                "\nMinutes Illegally Parked: " + (car.getMinutesParked() - minutes) +
                "\nFine: $" + fine;

    }

} 
```

我遇到的问题是，当打印罚款时，它总是 00.00。我似乎无法弄清楚这是为什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:19:00.827

你正在做 int 除法——你正在用一个 int 除以一个 int，这将产生一个 int。不要这样做并通过将其中一个数字声明为 double 或将分子或分母转换为 double 来使其中一个数字加倍。

IE，

```
double extraFine = HOURLY_FINE * (minOver / 60.0); // note the 60.0 
```

# javascript - 确定字符串是否以特定字母开头

> ID：14575091
> 
> 赞同：-1
> 
> 时间：2013-01-29T03:16:15.067
> 
> 标签：javascript, regex, string

我正在尝试使用 javascript 和正则表达式确定字符串是否以某些字母开头。如果它是真的，我希望它做点什么。我试图在特定字符串中找到值“window_”。

我的代码如下：

```
if (div_type.match(/^\window_/)){

} 
```

但是，当它显然不包含它时，它会返回 true。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:21:37.657

对于这种字符串匹配，正则表达式是多余的：

```
if (div_type.indexOf("window_") === 0) {
  // Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:30:36.987

如果你真的想走正则表达式路线，你可以使用`test()`而不是`match()` `/regex_pattern/.test(string)`

例子：

```
function run(p){
   return /^window_/.test(p);
}

console.log(run("window_boo"),   // true
            run("findow_bar"));  // false 
```

您的用途：

```
if ( /^window_/.test(div_type) ) {
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:19:40.737

你不需要正则表达式。

```
if( div_type.substr(0,"window_".length) == "window_") 
```

# c - 用 c 连接汇编语言

> ID：14575093
> 
> 赞同：0
> 
> 时间：2013-01-29T03:16:17.590
> 
> 标签：c, linux, function, assembly, sparc

我对汇编语言非常陌生，对 C 语言也很陌生。我看过一个示例，该示例从 c 代码创建调用函数，并且汇编代码具有执行计算并返回值的函数（这是一个赋值) C 代码：

```
#include <stdio.h>

int Func(int);

int main() 
{
int Arg;
Arg = 5;
printf("Value returned is %d when %d sent\n",Func(Arg), Arg);
} 
```

汇编代码：

```
.global Func
Func:    save  %sp,-800, %sp
add  %i0, -45 , %l0  
mov %l0, %i0 
ret 
restore 
```

它从 C 代码中获取值，将该值与汇编代码中的数字相加，然后输出新数字。我在很大程度上理解这个例子。我们的任务（修改代码）：“编写一个调用 Func1 的 C 源文件，带有 2 个参数 A 和 B，以及包含两个方法 Func1 和 Func2 的汇编源文件。让 Func1 调用 Func2，就好像它是 Func2(Q) . Func2 应将其输入参数加倍并将该加倍的值发送回 Func1。Func1 应将值 2*A + 2*B 返回到 C 主程序。我已经尝试过了，并提出了这个解决方案（请原谅我，我今天是新手）

```
#include <stdio.h>

int Func1(int, int);
void Func2(int, int);
int main() 
{
int Arg1 = 20;
int Arg2 = 4;
printf("Value returned is %d ",Func1(Arg1,Arg2));

} 
```

集会：

```
.global Func1
Func1: save %sp,-800, %sp 
mov %l0, %i0
mov %l1, %i1
call Func2
nop
ret
restore

Func2: save %sp,-800, %sp
umul %i0, 2 , %l0
umul %i1, 2 , %l1
call Func1
nop 
```

它不起作用，我一点也不惊讶。我确信这段代码有很多问题，但是对这里发生的事情或我做错的事情进行彻底的解释真的会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:48:28.807

我是否正确地看到了这一点：

```
In Func1, you call Func2
   which calls Func1 again
      which calls Func2 again
         which calls Func1 again
             which calls Func2 again
                 ...
Stack overflow, resulting in bad memory access and segmentation fault 
```

显然，不要那样做:)。你到底想做什么？从 Func2 返回乘法结果？然后返回它，就像你从 Func1 返回加法结果一样。

然后作业清楚地说：

> 像调用 Func2(Q) 一样调用 Func2。Func2 应该将其输入参数加倍并将该加倍的值发回

那么为什么要给 Func2 两个参数呢？如果我们假设有效的分配，那么你可以处理它的小部分，就像我引用的这篇文章一样。它说 Func2 需要 1 个参数，因此请相信这一点，并使用一个参数制作 Func2，并且您完成了一项分配（然后，如果结果证明分配无效或试图欺骗您，您当然需要回到它，但上面很清楚）。

* * *

但是为了帮助你，你有工作代码，对吧？

```
.global Func
Func:    save  %sp,-800, %sp
add  %i0, -45 , %l0  
mov %l0, %i0 
ret 
restore 
```

对于 Func2，您需要更改该代码使其乘以 2，而不是添加 -45？您是否尝试过将添加指令更改为：

```
imul  %i0, 2 , %l0 
```

（或umul，但在你的C代码中你指定`int`而不是`unsigned int`，所以我认为它是签名的......）。

* * *

我不会`Func1`为你写你的，但你看看你是如何得到你的输入的，我认为这是正确的。然后你需要`%i0`在返回之前产生结果。小步骤工作：首先 make `Func1`which根本`%i0 + %i1`不调用就返回。`Func2`然后尝试`2 * %i0 + %i1`，调用`Func2`一次。然后最后编写两次`2 * %i0 + 2 * %i1`调用的请求版本`Func2`（或者对于更少和更简单的代码，提取公因数，这样你仍然只需要调用`Func2`一次）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T06:49:01.787

要将值传递回 func1，func2 不应再次调用 func1。让函数返回一个值给 func1。函数的返回值应该保存在寄存器 i0 中，这是大多数处理器的 ABI。

1.  main 调用具有值的 func1
2.  func1 从 i0 中读取参数
3.  func1 使用 i0 中的参数调用 func2
4.  func2 将参数相乘并保存在 %l0
5.  将值移回 i0 并返回

# android - 禁止图片在图库中显示

> ID：14575102
> 
> 赞同：0
> 
> 时间：2013-01-29T03:17:21.803
> 
> 标签：android, file

我已将一些图像下载到我的 SD 卡中，我不想在我的画廊中显示它们。有没有办法删除它们？我已阅读有关 .nomedia 文件的信息，但如何创建它们？

是这样做的吗？

```
 File storagePath = new File(Environment.getExternalStorageDirectory(),folderName+"/Covers/");
if (!storagePath.exists())
{
File file = new File(storagePath, ".nomedia");
if (!file.exists()) {
    try {
        file.createNewFile();
        Log.d("created","successful");
    }
    catch(IOException e) {

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:24:57.113

这是一个片段，可以做你想做的事：

```
 File storagePath = new File(Environment.getExternalStorageDirectory(),
            folderName + "/Covers");
    storagePath.mkdirs();
    File filename;
    filename = new File(storagePath + "/" + ".nomedia");
    if (!filename.exists()) {
        filename.createNewFile();
    } 
```

注意：如果它无法创建文件，它可能会抛出 IOException，你应该抓住它。

mediascanner 可能需要重新启动才能重新扫描并确定它不应索引该位置。

# sql - SQL Server 2008 中的查询在 SQL Server 2005 中不起作用

> ID：14575105
> 
> 赞同：0
> 
> 时间：2013-01-29T03:17:41.737
> 
> 标签：sql, sql-server-2008, sql-server-2005

```
DECLARE @MyDate Datetime 
set @MyDate = GETDATE();
WITH cte AS
 (SELECT @MyDate AS AllDates,
       1 AS [count_all_days],
       CASE WHEN DATENAME(dw, DATEADD(dd, - 1, @MyDate)) IN ('Saturday', 'Sunday') THEN 1 ELSE 0 END AS [count_week_days]
UNION ALL
SELECT DATEADD(dd, - [count_all_days], @MyDate), 
       [count_all_days] + 1,
       CASE WHEN DATENAME(dw, DATEADD(dd, - [count_all_days], @MyDate)) IN ('Saturday', 'Sunday') THEN [count_week_days] + 1 ELSE [count_week_days] 
       END
FROM cte
WHERE [count_all_days] - [count_week_days] < 16 
)

SELECT DATEADD(dd, 0, DATEDIFF(dd, 0, AllDates))
FROM cte left join EmpLog ON AllDates = EmpLog.Date 
           left JOIN Holiday ON AllDates = Holiday.HolDate
WHERE DATENAME(dw, AllDates) NOT IN ('Saturday', 'Sunday')AND AllDates NOT IN (Select EmpLog.Date from EmpLog where EmpLog.EmpID = 1)and Holiday.HolDate IS NULL 
```

此 SQL 查询显示当前日期和前 16 天。其中这些日期不等于 HOLIDAY 表和表中的现有日期`EMPLOG`。

我的问题是这个查询在 SQL Server 2008 上运行良好，但是当我在 SQL Server 2005 上尝试它时，它只显示当前日期和前 16 天，即使有些日子在 HOLIDAY 和`EMPLOG`表中。

有人能帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:47:47.913

尝试转换您的 Date 变量 - 您将 GetDate 与不一定具有相同时间的日期进行比较：

```
left JOIN Holiday ON CAST(AllDates as Date) =  CAST(Holiday.HolDate as Date) 
```

用你所有的日期包装它，它应该可以工作。看看这个[SQL Fiddle](http://sqlfiddle.com/#!3/b320e/6)。在这个例子中，我只添加了 1 个假期，1/21/2013 (MLK​​)。

编辑 -

`convert(varchar, getdate(), 101)`由于SQL Server 2005 不支持该`CAST`类型，请尝试使用。`date``Date`

这是更新的 SQL：

```
left JOIN Holiday ON convert(varchar, AllDates, 101) =  convert(varchar, Holiday.HolDate, 101) 
```

对所有日期转换执行此操作。这是更新的[Fiddle](http://sqlfiddle.com/#!3/b320e/8)。

感谢@user148298 指出这一点。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:25:29.977

尝试将 @MyDate 初始化更改为：

```
set @MyDate = Convert(DATETIME(CONVERT(VARCHAR(10), GETDATE(), 121) + ' 00:00:00', 121); 
```

说明：通过这样做，您将@MyDate 设为“今天午夜”，而不是“今天与当前时间”。这样它会更好地加入你的桌子。

假设：假期表中的日期存储为“午夜”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:45:51.237

2008 年和 2005 年的日期之间似乎存在一些差异。您必须设置数据库兼容性。请参阅以下文章：

[http://msdn.microsoft.com/en-us/library/bb510680.aspx](http://msdn.microsoft.com/en-us/library/bb510680.aspx)

# jquery - 如何在特定 x 和 y 坐标的图像上添加图像

> ID：14575117
> 
> 赞同：1
> 
> 时间：2013-01-29T03:19:05.210
> 
> 标签：jquery, image, draggable, overlapping

我正在为游戏构建一个可拖动的地图，（该地图是作为学校项目开始的，我正在将其转移到游戏中）地图的链接在[这里](http://www.daparadise.com/test/island.php)

无论地图在其容器中拖动到何处，我都想在该图像上的特定位置添加第二个图像。

这是jQuery：

```
$(function() { 
    $("#map").draggable({
        cursor: 'move',
        containment: [-525, -582, 252, 40]
    });
}); 
```

HTML

```
<div id="mapable" style="position: relative;float:left;height:423px;width:1072px;overflow:hidden;border:1px solid black;">
    <img src="include/map.png" style="display:block;border:1px solid black;position: absolute;" onclick="point_it(event);" class="drag-image" id="map"/>
</div> 
```

有关所有代码的完整来源，您可以[在此处查看](http://www.daparadise.com/test/source.php)

# javascript - Ajax 不读取 JSON servlet 答案

> ID：14575121
> 
> 赞同：0
> 
> 时间：2013-01-29T03:19:37.970
> 
> 标签：javascript, jquery, servlets

我在使用 ajax 和 javascript 时做着可怕的噩梦……我正在尝试阅读 JSON 答案并重定向到其他站点。

我的 Javascript 应该查询等待过程的验证 servlet == 登录 || loginAlreadyInUse 然后将其重定向到其他地方：

```
<script type="text/javascript">
var userId = "<%=request.getSession().getId()%>";
var timeInterval=self.setInterval("check_userId()", 3000);

function check_userId() {
$.post('http://localhost:8080/qrlogin/verify', {userId: userId}, 
    function(data) {
       if(data.procedure == "login") {
             window.location = 'http://localhost:8080/qrlogin/login'+userId;
        }
       else if(data.procedure == 'loginAlreadyInUse') {
            window.location = 'http://localhost:8080/qrlogin/'+userId;
         }
     }, "json"); 
```

}

目前的验证 servlet：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    response.setContentType("text/javascript");
    PrintWriter out = response.getWriter();
    // Assuming your json object is **jsonObject**, perform the following, it will return your json object  
    out.print("{'procedure' : 'login' }");
    out.flush();
    return;
} 
```

问题是脚本永远不会重定向到登录页面。（继续每 3 秒发一次帖子……）

谢谢你的时间，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T03:24:43.033

1.  `"{'procedure' : 'login' }"` [不是有效的 JSON](http://jsonlint.com/)。JSON 中的所有键和字符串都[必须**双引号，**](http://json.org/)而不是单引号。所以你需`out.print()`要这样做：
    `"{\"procedure\" : \"login\" }"`

2.  [`text/javascript`是 JSON 的错误 MIME 类型。使用`application/json`.](https://stackoverflow.com/a/477819/139010)

3.  不要将字符串传递给`setInterval`（或`setTimeout`，就此而言）。它是`eval`变相的，我们都知道这是邪恶的（对吧？***对吧？***）。只需传递函数本身：

    ```
    var timeInterval=self.setInterval(check_userId, 3000); // look ma, no quotes 
    ```

# c# - 如何将输出数据保存到 XML 文件 Microsoft Visual Studio 2010

> ID：14575125
> 
> 赞同：-2
> 
> 时间：2013-01-29T03:20:06.307
> 
> 标签：c#, asp.net, sql, 3-tier

```
 public AdvertisementDAL selectAdvertisementLocation1(DateTime now, string gender)
    {
        AdvertisementDAL dal = null;
        string sql = "Select * From Advertisement Where @currentDate between StartDate AND EndDate AND TargetAudience = @gender AND Location = 1";
        SqlConnection conn = new SqlConnection(_connStr);
        SqlCommand cmd = new SqlCommand(sql, conn);
        cmd.Parameters.AddWithValue("@currentDate", now);
        cmd.Parameters.AddWithValue("@gender", gender);
        conn.Open();
        SqlDataReader dr = cmd.ExecuteReader();

        while (dr.Read())
        {
            _advertisementID = int.Parse(dr["AdvertisementID"].ToString());
            _location = int.Parse(dr["Location"].ToString());
            _image = dr["Image"].ToString();
            _targetAudience = dr["TargetAudience"].ToString();
            _url = dr["Url"].ToString();
            _onMouseOverText = dr["OnMouseOverText"].ToString();
            dal = new AdvertisementDAL(_advertisementID, _location, _image, _targetAudience,
                _url, _onMouseOverText);
        }
        conn.Close();
        dr.Close();
        dr.Dispose();
        return dal;
    } 
```

以上是我的 3-tier 代码`Data Access Layer`。我需要将上面的代码保存到一个`XML`文件中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:23:44.487

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<code>
  <![CDATA[
public AdvertisementDAL selectAdvertisementLocation1(DateTime now, string gender)
    {
        AdvertisementDAL dal = null;
        string sql = "Select * From Advertisement Where @currentDate between StartDate AND EndDate AND TargetAudience = @gender AND Location = 1";
        SqlConnection conn = new SqlConnection(_connStr);
        SqlCommand cmd = new SqlCommand(sql, conn);
        cmd.Parameters.AddWithValue("@currentDate", now);
        cmd.Parameters.AddWithValue("@gender", gender);
        conn.Open();
        SqlDataReader dr = cmd.ExecuteReader();

        while (dr.Read())
        {
            _advertisementID = int.Parse(dr["AdvertisementID"].ToString());
            _location = int.Parse(dr["Location"].ToString());
            _image = dr["Image"].ToString();
            _targetAudience = dr["TargetAudience"].ToString();
            _url = dr["Url"].ToString();
            _onMouseOverText = dr["OnMouseOverText"].ToString();
            dal = new AdvertisementDAL(_advertisementID, _location, _image, _targetAudience,
                _url, _onMouseOverText);
        }
        conn.Close();
        dr.Close();
        dr.Dispose();
        return dal;
    }
]]>
</code> 
```

Presto.. XML 格式的 C#。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:02:58.087

```
public AdvertisementDAL selectAdvertisementLocation1(DateTime now, string gender)
    {
        AdvertisementDAL dal = null;
        string sql = "Select * From Advertisement Where @currentDate between StartDate AND EndDate AND TargetAudience = @gender AND Location = 1";
        SqlConnection conn = new SqlConnection(_connStr);
        SqlCommand cmd = new SqlCommand(sql, conn);
        cmd.Parameters.AddWithValue("@currentDate", now);
        cmd.Parameters.AddWithValue("@gender", gender);
        conn.Open();
        SqlDataReader dr = cmd.ExecuteReader();

    while (dr.Read())
    {
        _advertisementID = int.Parse(dr["AdvertisementID"].ToString());
        _location = int.Parse(dr["Location"].ToString());
        _image = dr["Image"].ToString();
        _targetAudience = dr["TargetAudience"].ToString();
        _url = dr["Url"].ToString();
        _onMouseOverText = dr["OnMouseOverText"].ToString();
        dal = new AdvertisementDAL(_advertisementID, _location, _image, _targetAudience,
            _url, _onMouseOverText);
       System.IO.StreamWriter file = new System.IO.StreamWriter(
    @"c:\temp\SerializationOverview.xml"); //rmb to create the file
writer.Serialize(file, dal);
file.Close();
    }
    conn.Close();
    dr.Close();
    dr.Dispose();
    return dal;
} 
```

# javascript - 使用 JSF 从资源包传递本地化的 javascript 消息

> ID：14575128
> 
> 赞同：4
> 
> 时间：2013-01-29T03:20:29.647
> 
> 标签：javascript, jsf, localization, resourcebundle

我已经使用 JSF 构建了一个应用程序，并且服务器发出的所有消息都使用资源包进行了本地化。

我的问题是：如何使用存储在资源包中的消息本地化 javascipt 在客户端浏览器中发出消息？

我是否必须动态生成 javascript，如果是这样，该怎么做？

例如，如何让服务器在以下表单验证方法中本地化 «alert» javascript 消息：

```
function valider() {
    typeActionRadio = document.getElementById("membres_editer_creer:typeActionAdr");
    if (typeActionRadio.style.display == "block") {
        var boutonsRadio = document.forms["membres_editer_creer"]["membres_editer_creer:typeActionAdr"];
        for ( var i = 0; i < boutonsRadio.length; i++)
             if (boutonsRadio.item(i).checked) return true;
    }
     alert ("Vous devez indiquer la raison du changement d'adresse (bouton radio à sélectionner).");
    return false;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T03:25:29.590

只需让 JSF 打印所需的 JS 代码即可。例如

```
<script>
    var message = "#{bundle['some.key']}";
</script> 
```

您只需要考虑 JS 特殊字符，例如单引号和换行符。为此，您可以注册一个委托给[Apache Commons Lang的](http://commons.apache.org/lang)[自定义 EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function/7080174#7080174)，或者使用[OmniFaces](http://omnifaces.org)函数。 [`StringEscapeUtils`](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringEscapeUtils.html#unescapeEcmaScript%28java.lang.String%29) [`of:escapeJS()`](http://showcase.omnifaces.org/functions/Strings)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-22T12:39:31.790

如果您想提供所有密钥，请在您的主模板等中使用类似的东西。

```
<script type="text/javascript">
    var msg = new Object();
    <c:forEach items="#{msg.keySet()}" var="key">
        msg.#{key} = "#{msg[key]}";
    </c:forEach>
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-27T11:36:24.867

wutzebaer 的答案是正确的，但是当文字的变量有任何点时，它就会出现问题，例如“person.name”

```
<script type="text/javascript">
    var msg = new Object();
    <c:forEach items="#{msg.keySet()}" var="key">
    try{ 
        //msgTempl.#{key} = "#{msg[key]}";
        msg['#{key}'] = "#{msg[key]}";  //works better than msgTempl.#{key} = "#{msg[key]}"; when the key contains dots like 'fields.name'
    }catch(e){ 
        console.log("error fullfilling the msgForms resource from bundle " +e);
    }
    </c:forEach>
</script> 
```

这对我有用，但 netbeans 显示此错误：

```
Error: The prefix "c" for the "c: forEach" element is not linked. 
```

因为它在脚本中放置了一个 JSTL 标记，但它工作正常，但是

还有另一种方法可以做到这一点

```
@ManagedBean(name = "ResouceBundle")
@ApplicationScoped
public class ResouceBundle implements Serializable {

    private static final long serialVersionUID = 1L; //needed because the bean is application|session|view and it needs to be Serializable
    public String msg;

    @PostConstruct
    public void init() {
        this.msg = createResourceBundleJSON("resourceName");
    }

    public String createResourceBundleJSON(String resourceName) {

        FacesContext context = FacesContext.getCurrentInstance();
        ResourceBundle bundle = context.getApplication().getResourceBundle(context, resourceName);
        JSONObject jsonObj = new JSONObject();
        Set<String> keys = bundle.keySet();
        for (String key : keys) {
            jsonObj.put(key, JSONObject.wrap(bundle.getString(key)));
        }
        return jsonObj.toString(); 
    }

    public String getMsg() {
        return msg;
    }

    public static long getSerialVersionUID() {
        return serialVersionUID;
    }

} 
```

然后，在 XHTML 中，只写：

```
<script type="text/javascript">   
    var msg =  #{ResouceBundle.msg}
</script> 
```

# matplotlib - Pandas 直方图 - 时间的 y 轴

> ID：14575129
> 
> 赞同：2
> 
> 时间：2013-01-29T03:20:30.470
> 
> 标签：matplotlib, pandas, histogram

我有一个用 DateTime 索引的 DataFrame，在直方图上显示有计数。每个计数为 20 秒。
如何更改 y 轴以显示分钟、小时或天，而不是计数？

这是我的 DataFrame 的前五行：

```
from pandas.lib import Timestamp
df = pd.DataFrame({'A': {Timestamp('2013-01-20 00:00:16.726000'): 0.14746094,
                         Timestamp('2013-01-20 00:00:36.726002'): 0.13964844,
                         Timestamp('2013-01-20 00:00:56.726004'): 0.13574219,
                         Timestamp('2013-01-20 00:01:16.725997'): 0.14355469,
                         Timestamp('2013-01-20 00:01:36.725999'): 0.14746094},
                   'B': {Timestamp('2013-01-20 00:00:16.726000'): 3.5716574,
                         Timestamp('2013-01-20 00:00:36.726002'): 3.5716574,
                         Timestamp('2013-01-20 00:00:56.726004'): 3.5716574,
                         Timestamp('2013-01-20 00:01:16.725997'): 3.5716574,
                         Timestamp('2013-01-20 00:01:36.725999'): 3.5716574}})
df.plot() 
```

matplotlib v1.2.0 熊猫 0.10.1

![直方图](../Images/67d84fabe2d103dab6034358cf863531.png)

撞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:11:31.493

使用您的示例， df.plot 不会显示直方图（即值的分布），而是显示由时间戳索引的值的演变曲线。

以下代码片段显示了一个值的直方图，它使用的不是“计数”而是间隔持续时间作为 y 轴权重（全部等于您指定的 20 秒，但每个值可能不同）。

```
import numpy as np
import matplotlib.pyplot as plt
df.hist(weights=np.repeat(20,5))
plt.ylabel('Cumulated intervals duration [sec]') 
```

![直方图](../Images/a83042049c22ee571de1393d28fd035c.png)

# android - 无法更改密钥库密码

> ID：14575132
> 
> 赞同：0
> 
> 时间：2013-01-29T03:20:44.103
> 
> 标签：android, keytool

当我使用 keytool -list -v -keystore 命令并询问密钥库密码时，我只需按回车键（空白密码），它就会列出密钥库中的密钥。

虽然，如果我尝试使用 keytool -passwd -keystore 命令，它不接受空白密码作为上述命令。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-02T13:18:03.023

所有 JKS 密钥库都受密码保护。但是，正如您所发现的，您可以在不知道密码的情况下列出密钥库的内容：

```
$ keytool -list
Enter keystore password:

*****************  WARNING WARNING WARNING  *****************
* The integrity of the information stored in your keystore  *
* has NOT been verified!  In order to verify its integrity, *
* you must provide your keystore password.                  *
*****************  WARNING WARNING WARNING  *****************

Keystore type: JKS
Keystore provider: SUN

Your keystore contains 4 entries 
```

如果您输入空白密码，请注意您收到的警告。如果您想更改密码，您需要知道当前密码，否则您将不得不重新创建一个新的密钥库并重新导入所有公共证书。一旦密码丢失，您应该认为丢失的任何私钥。

# keystore - 缺少资源异常找不到 bundle sun.security.util.Resources 的资源，密钥 PKCS11 Token[Provider] Password

> ID：14575133
> 
> 赞同：0
> 
> 时间：2013-01-29T03:20:54.083
> 
> 标签：keystore, pkcs#11

我试图在 Windows 2008 64 位机器上使用 sunjava jdk 7 update 11 加载 pkcs11 密钥库。我面临的问题是我能够获得密钥库实例

```
Keystore ks = Keystore.getInstance("PKCS11", provider); 
```

但是当我说

```
keystore.load(null, "pwdstring".toCharArray[]) 
```

在这一行我面临一个错误说，请找到堆栈跟踪

```
java.util.MissingResourceException: Can't find resource for bundle sun.security.util.Resources, key PKCS11 Token [providerName] Password: 
    at java.util.ResourceBundle.getObject(ResourceBundle.java:393)
    at java.util.ResourceBundle.getString(ResourceBundle.java:353)
    at sun.security.util.ResourcesMgr.getString(ResourcesMgr.java:52)
    at sun.security.pkcs11.SunPKCS11.login(SunPKCS11.java:1084)
    at sun.security.pkcs11.P11KeyStore.login(P11KeyStore.java:874)
    at sun.security.pkcs11.P11KeyStore.engineLoad(P11KeyStore.java:764)
    at java.security.KeyStore.load(KeyStore.java:1214)
    at HSM_TokenSunjava.main(HSM_TokenSunjava.java:37) 
```

还有一件具有相同代码和相同 PKCS11 令牌的东西我能够在我的机器 windows 64 位上运行我不明白 windows 2008 机器有什么问题。

请帮帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T06:06:25.757

将JDK版本更改为JDK6解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T22:58:06.187

我遇到了同样的问题，并验证了 Resource 已从更改`"PKCS11 Token [providerName] Password:"` 为`"PKCS11.Token.providerName.Password."`so `SUNPKCS11`call to`"PKCS11 Token [providerName] Password: "` 必须更改为新值。

此致。

# android - 边框不会围绕整个 LinearLayout

> ID：14575136
> 
> 赞同：0
> 
> 时间：2013-01-29T03:21:22.257
> 
> 标签：android, android-layout

我试图在 a 周围放置一个边框`LinearLayout`，但它只出现在它的一部分上。它只会将边框周围的`TextView`似乎停在一个`<include .. />`标签上。一般来说，包含或子布局有什么特定的吗？

**结果**（很难看到，因为它是白底白字）

![在此处输入图像描述](../Images/d201d94e47d73a7e92cdcd8db96542bc.png)

详情如下。关于如何让边界围绕整个延伸的任何想法`LinearLayout`？

**布局代码**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@drawable/simple_border">

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <include
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        layout="@layout/dialog_action" />

    <TextView
        android:id="@+id/footer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceLarge" />
</LinearLayout> 
```

**可绘制/simple_border.xml**

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <shape android:shape="rectangle" >
            <solid android:color="#000000" />
        </shape>
    </item>

    <item
        android:bottom="1dp"
        android:left="1dp"
        android:right="1dp"
        android:top="1dp">
        <shape android:shape="rectangle" >
            <solid android:color="#FFFFFF" />
        </shape>
    </item>
</layer-list> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:04:14.143

通过在我的 Eclipse 中为您的解决方案创建新的测试项目来检查您的代码。

我发现当我发表评论时

```
<include
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    layout="@layout/dialog_action" /> 
```

这段代码工作正常......所以一定有问题`dialog_action.xml`

请在此处检查或发布代码..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:08:43.757

我还用我自己的 dialog_action.xml 检查了您的代码，如下图所示。 ![在此处输入图像描述](../Images/0ec61843cdec06fd46ec9f649d0cfa49.png)

所以，似乎一切都在它的位置。请输入 dialog_action 的代码，以便我们为您提供更多帮助。

随意发表评论。

# java - 尝试使用 HTTPS 连接到 Solr 时出现 IOException

> ID：14575147
> 
> 赞同：2
> 
> 时间：2013-01-29T03:22:25.803
> 
> 标签：java, ssl, solr, https

使用 http 请求连接到 Solr 服务器非常简单。但是当我尝试使用 https 请求进行连接时，我遇到了错误。

Solr服务器：`https://localhost:8443/solr/#/`

我尝试在 java 中使用 solr api 通过以下代码连接到服务器：

`SolrServer server = new HttpSolrServer("https://localhost:8443/solr/#/");`

但我得到了以下例外：

```
Exception in thread "main" org.apache.solr.client.solrj.SolrServerException: IOException occured when talking to server at: https://localhost:8443/solr/#
at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:413)
at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:181)
at org.apache.solr.client.solrj.request.QueryRequest.process(QueryRequest.java:90)
at org.apache.solr.client.solrj.SolrServer.query(SolrServer.java:301)
at app.SolrQuerying.main(SolrQuerying.java:45)
Caused by: javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
at com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:352)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)
at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:397)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:150)
at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:575)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)
at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:352)
... 4 more 
```

如果有人对此有任何解决方案，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:29:19.923

您的错误显示在此处的日志中：

> 引起：javax.net.ssl.SSLPeerUnverifiedException

这就是说您的 SSL 证书未由证书颁发机构验证，我猜您创建了一个自签名证书？默认情况下，Java 将检查由证书颁发机构验证的证书，如果没有则出错。这样做的原因是安全性。

了解如何通过 Java 连接使用自签名证书。

# c - 如何使用canopen从命令行打开文件

> ID：14575148
> 
> 赞同：0
> 
> 时间：2013-01-29T03:22:43.043
> 
> 标签：c, file, file-io

看看这段代码

```
/* A file can be opened for reading or not  Page 547 KN KING*/

#include <stdio.h>
#include <stdlib.h>

/* Input to this program in command line is => canopen file_name */

int main(int argc, char *argv[])
{
    FILE *fp;

    if(argc != 2)
    {
        printf("usage: Canopen filename\n");
        exit(EXIT_FAILURE);
    }

    fp = fopen(argv[1], "r");

    if(fp == NULL)
    {
        printf("%s cant be opened\n", argv[1]);
        exit(EXIT_FAILURE);
    }

    printf("%s can be opened\n", argv[1]);

    fclose(fp);

    return 0;
} 
```

如何使用此程序打开文件。我已将其保存为“canopen.c”。我正在学习的这本书给出了这样的语法：

```
canopen filename 
```

但是，当我从终端迁移到该目录并键入上述命令时，其中文件名被替换为名为“example.dat”的文件时，bash shell 会抛出一条消息
`'canopen: command not found'`

如何打开这个文件？谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:41:16.887

首先，您需要将`.c`文件编译成可执行的二进制文件。

根据您当前的操作系统，它将需要以下内容：

```
cc -o canopen canopen.c 
```

或者

```
gcc -o canopen canopen.c 
```

这将生成一个`canopen`在您当前目录中调用的二进制文件。

`./`要执行它，如果您的操作系统是类 Unix ，您需要尝试在二进制文件前面添加引用当前目录：

```
./canopen filename 
```

# java - 带有 NIO 的 REST API？

> ID：14575150
> 
> 赞同：9
> 
> 时间：2013-01-29T03:22:49.480
> 
> 标签：java, rest, nio, servlet-3.0

我一直致力于构建一个公共 API，该 API 将具有大量并发访问，并且我认为其中一个方面是使用异步 I/O 来考虑可伸缩性方面。

最初我认为将 Nginx 用作 HTTP 服务器（事件驱动），因为他以异步方式工作，与 Tomcat 不同。API 将用 Java 构建，为此我认为使用以下组件：

*   Tomcat 7 - HTTP/Web 服务器 + Java 容器
*   Netty.io 还是 HttpCore？
*   Resteasy（REST 层，带 HttpServlet30Dispatcher servlet）
*   MongoDB（带异步 Java 驱动程序）

我看过很多关于 Servlet 3.0 的讨论，因为新版本支持异步请求（使用 NIO）。基于我的问题和上面的模型，我有一些问题：

1.  一旦我计划使用支持异步请求的 Servlet 3.0，是否有必要使用 Netty.io？
2.  使用事件驱动的网络服务器（例如：Jetty）与使用不是事件驱动的网络服务器的基于进程的网络服务器（如 Tomcat 7（支持 Servlet 3.0））不同？
3.  我在许多站点中看到 Netty.io 以一种线程可以接受许多请求的方式工作，而不是单线程对等请求的经典方式。在实践中，它是如何工作的？
4.  异步请求处理（Servlet 3.0）和非阻塞 IO（NIO）是不同的概念吗？以何种方式？
5.  我从未见过使用 NIO 的 REST API，这是一个好方法吗？我会遇到哪些潜在问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T08:00:48.273

> Is necessary to use Netty.io once that I have plans to use Servlet 3.0 that supports Asynchronous Requests too?

No. It should all be handled by the container.

> Use an event-driven webserver (ex: Jetty) is different to use a process based webserver like Tomcat 7 (that supports to Servlet 3.0) that isn't an event-driven webserver?

I'm not aware of any such difference. They both implement Servlet 3.0 so to that extent they are both event-driven.

> I saw in many sites that Netty.io works in a way where a thread can accept many requests, instead of the classic way of one thread peer request. In the practice, how it works?

It's irrelevant, see (1) above.

> Asynchronous request handing (Servlet 3.0) and Non-Blocking IO (NIO) are different concepts? In which way?

Yes. In every way. Too large a question to address here.

> I never see a REST API using NIO, is it a good approach? Which potential problems can I will have?

I've rarely seen any need to use NIO at the client end.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T21:59:28.183

我想说比较 Servlet API 和 NIO 是无关紧要的。您可以使用例如 Netty 来实现 Servlet API（这非常接近于自行车发明）。考虑到 3.0 中包含的异步特性，我看不出有可能基于阻塞 IO 构建有效的实现。我们甚至不需要调查来源。像“org.mortbay.jetty.nio.SelectChannelConnector”这样的类名是非常自描述的。

REST 也是如此。那是另一层。例如，您可以设置 tomcat 以使用 NIO 连接器。基本上这样的配置更改在应用层是不可见的。（我不考虑有时会发生的错误）。

# jsp - Unterminated <%@ page tag

> ID：14575151
> 
> 赞同：-1
> 
> 时间：2013-01-29T03:22:56.373
> 
> 标签：jsp

i try to run my jsp page i got an exeption

```
org.apache.jasper.JasperException: /home.jsp (line: 1, column: 2) Unterminated <%@ page tag 
org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42) 
```

Code:

```
<%@ page language="java" contentType="text/html"; charset="ISO-8859-1″
   pageEncoding="ISO-8859-1" import="Servlet.*,java.util.*"%>
   <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
  <html>
   <head>
    <meta http-equiv="Content-Type" content="text/html"; charset="ISO-8859-1″&gt;
     <title>Insert title here</title>
       </head>
     <body>
       <form name=frm method="post" action="./InsertImage">
      <table>
      <tr><TD ><B>Upload Image</B></TD>
       <td><input type="file" name="Image" size="20″ value=""></TD>
         </tr>
         <tr>
         <td><input type="submit" height="30″ width="62″&gt; 
        </td>
        </tr>
        <tr>
        <TD><b>ClickImage</b>
        <%
        GetImage udet = new GetImage();
        Vector V_ids=new Vector();
        V_ids=udet.ImageList();
        for(int i=0;i<V_ids.size();i++)
        {

        String temp[] = new String[2];
        int j=i+1;
        temp=(String[])V_ids.get(i);

         %></TD>
         <td><a target=’_blank’ href=’                                  <%=response.encodeURL("RetrieveImage?Image_id="+temp[0])%>’ onmouseover=’_ScrollStatus(“Click here for view”, 1);’ onmouseout=’_StopScrollStatus();’ onblur=’_StopScrollStatus();’ >
<b><%=temp[1]%></b>
        </a></TD>

         <%

         }

      %></TR>
      </table>

        </form>
        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:13:06.667

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-31T08:04:24.647

Check, if you have used any extra % tags in directive

# jquery - jQuery事件不会每次都被触发

> ID：14575153
> 
> 赞同：0
> 
> 时间：2013-01-29T03:23:08.960
> 
> 标签：jquery

我正在使用的`.toggle()`功能有问题。我正在使用 PHP 从数据库中获取结果并用信息填充表格。每个表格行中的最后一项是一个链接，单击该链接时应显示另一行，允许管理员编辑该产品的信息。链接的类是`.edit_prod`这是我的 jQuery 方法：

```
$(function() {
$(".edit_prod").click(function() {
 $("#mydiv").toggle();
      return false;
     });
 }); 
```

有人可以帮我解决可能出现的问题吗？

谢谢！

更新：

这是创建 HTML 的 PHP 代码

```
$table_format = sprintf("
        <tr>
            <td>
                <img src='%s' id='edit_img_pic' />
            </td>
            <td>
                %s
            </td>
            <td>
                %s
            </td>
            <td>
                <a class='edit_prod' href='#'>Edit</a>  
            </td>

        </tr>
        <tr id='mydiv' style='display: none' cellspacing='20px'>
            <form action='edit_product.php' method='post'>
            <td>
                <label for='name'>Product Name</label><br>
                <input type='text' name='name' value='%s' /><br><br>
            </td>
            <td>
                <label for='sku'>SKU</label><br>
                <input type='text' name='sku' value='%s' /><br><br>
            </td>
            <td>
                <label for='price'>Price</label><br>
                $<input type='text' name='price' value='%s' /><br><br>
            </td>
            <td>
                <label for='desc'>Description</label><br>
                <textarea cols='40' rows='7' name='desc'></textarea><br><br>
                <input type='submit' value='Save' />
            </form>
        <tr>
        ", $img, $prod_name, $sku, $prod_name, $sku, $price);

        echo $table_format; 
```

更新 2：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:29:26.693

根据你的最后一句话

> 每个表格行都是一个链接，单击该链接时应显示另一行，允许管理员编辑信息

似乎您正在将元素动态加载到您的 html 中，这样新元素没有附加点击事件，因为您可能将其附加到`document.Ready()`..

jQuery 有一个“on” API，您可以使用它来将点击事件附加到动态加载的 DOM 元素上。

**编辑** 感谢@rockerest.. 从使用更改`live()`为`on()`并根据@Sly_cardinal 进行更正。

尝试这样的事情：

```
$(function() {
    $("table").on("click", ".edit_prod", function() {
        $("#mydiv").toggle();
        return false;
    });
}); 
```

[jQuery 上的 API 文档](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:41:43.810

@Mortalus：您发布的语法适用于常规直接事件侦听器（不是委托事件）。

委托事件侦听器语法在事件名称和事件处理程序之间有一个额外的选择器字符串（以 Matt 的代码为例）：

```
$(function() {
    $("table").on("click", ".edit_prod", function() {
        $("#mydiv").toggle();
        return false;
    });
}); 
```

这意味着只要单击`.edit_prod`a 中的元素`table`，就会调用该事件处理程序（即使稍后将更多`.edit_prod`元素添加到 DOM 中）。

# php - Drupal 6 文件上传模块

> ID：14575157
> 
> 赞同：1
> 
> 时间：2013-01-29T03:24:27.997
> 
> 标签：php, drupal, upload, drupal-6

我发现了多个带有上传表单示例的 drupal 和 stackoverflow 页面，但我无法使用其中的一个。在这里，我包含了我使用的所有代码，将其他人所做的事情一起解析。我已经包含了一个菜单、一个表单、一个提交和验证功能。上传文件不保存在站点 --> 默认 --> 文件夹中，提交时不显示提交 set_message。为什么这不起作用？

```
<?php

function upload_example_menu() {
  //$items = array();
  $items['upload_example'] = array(
    'title' => t('Upload'),
    'page callback' => 'drupal_get_form',
    'page arguments' => array('upload_example_form'),
    'description' => t('uploading'),
    "access callback" => TRUE,
    'type' => MENU_CALLBACK,
  );

  return $items;
}

function upload_example_form() {
  $form['#attributes'] = array('enctype' => "multipart/form-data");
  $form['upload'] = array('#type' => 'file');
  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => 'Submit',
  );

  return $form;
}

function upload_example_form_validate($form, &$form_state) {
  if(!file_check_upload('upload')) {    
    form_set_error('upload', 'File missing for upload.');
  }
}

function upload_example_form_submit($form, &$form_state) {
    $validators = array();
    $file = file_save_upload('upload', $validators, file_directory_path());
    file_set_status($file, FILE_STATUS_PERMANENT);
    drupal_set_message(t('The form has been submitted.'));
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:39:42.940

抱歉，我在答案中添加了很多评论，但无法将它们收集到这样的回复中。

我看到你从第一页开始做了很多改变。复制并将其更改为最终答案...此代码不包含任何关键修复。你现在的问题应该是有效的。我只是将您的模块与我为 Drupal 6 拥有的模块进行了比较。但是它需要对最佳实践进行一些更改。请参阅内联注释。

```
<?php
function upload_example_menu() {
  $items = array();
  $items['upload_example'] = array(
    'title' => 'Upload', // You don't use t() for menu router titles. See 'title callback' that defaults to t().
    'page callback' => 'drupal_get_form',
    'page arguments' => array('upload_example_form'),
    'description' => t('uploading'),
    'access arguments' => array('administer nodes'), // Users with administer nodes permission can access this form. Change it to a suitable one other than setting it TRUE blindly.
    'type' => MENU_CALLBACK,
  );

  return $items;
}

function upload_example_form() {
  $form['#attributes'] = array('enctype' => "multipart/form-data"); // Not necessary for D7.
  $form['upload'] = array(
    '#type' => 'file',
    '#title' => t('File'), // this is usually necessary.
  );
  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => t('Submit'), // t()
  );

  return $form;
}

function upload_example_form_validate($form, &$form_state) {
  if(!file_check_upload('upload')) {    
    form_set_error('upload', t('File missing for upload.')); // t()
  }
}

function upload_example_form_submit($form, &$form_state) {
    $validators = array();
    $file = file_save_upload('upload', $validators, file_directory_path());
    file_set_status($file, FILE_STATUS_PERMANENT);
    drupal_set_message(t('The form has been submitted.'));
}
?> 
```

让我们知道它是怎么回事:)

# php - 获取多个数组中出现的值

> ID：14575158
> 
> 赞同：2
> 
> 时间：2013-01-29T03:24:30.233
> 
> 标签：php, arrays

我执行了四个单独的 mysql 查询，它们返回四个不同的用户 ID 数组。我需要检查所有数组中出现的用户 ID 的所有数组，然后使用这些值创建一个新数组，以便我可以在另一个查询中使用它。

```
Array ( [0] => Array ( [userid] => 11 ) 
        [1] => Array ( [userid] => 22 ) 
        [2] => Array ( [userid] => 33 ) 
      ) 
Array ( [0] => Array ( [userid] => 11 ) 
        [1] => Array ( [userid] => 99 ) 
        [2] => Array ( [userid] => 33 ) 
      ) 
Array ( [0] => Array ( [userid] => 11 ) 
        [1] => Array ( [userid] => 33 ) 
      ) 
Array ( [0] => Array ( [client_id] => 11 )
        [1] => Array ( [client_id] => 33 )
        [2] => Array ( [client_id] => 99 )
      ) 
```

所以我的最后一个数组，来自这四个，将是：

```
Array ( [0] => Array ( [id] => 11 ) 
        [1] => Array ( [id] => 33 ) 
      ) 
```

我试图用米老鼠解决方案，`array_count_values`但并没有取得太大的成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:36:38.113

您可能可以在单个查询中执行此操作，而不是使用 MySQL 的 union/join 进行 4-5 个单独的查询，但是如果没有看到您的数据库查询和设计，我无法确定这一点。但我愿意打赌你可以。尽量减少查询量，因为它会降低性能。

除了上面的以下陈述之外，您还可以通过以下几种方式来处理这种情况。

最实用？

创建一个空数组，例如名为**$user_ids**

循环遍历每个数组，并使用数组 $user_ids 中的 SQL 数据中的 user_id 创建一个索引，并将 1 附加到它的值上，以便它充当计数器。完成对 SQL 数据的循环后，循环通过您的计数器数组并取消设置小于您循环通过的数组数量的任何内容。

**例子：**

```
 $user_ids = array();
    $mysql_dataset = array($first_array, $second_array, $third_array, $fourth_array);

    foreach ($mysql_dataset as $mysql_data) {
            foreach ($mysql_data as $user) {
                    if (empty($user_ids[$user['user_id']])) {
                            $user_ids[$user['user_id']] = 0;
                    }

                    $user_ids[$user['user_id']]++;
            }
    }

    foreach ($user_ids as $user_id => $count) {
            if ($count < 4) {
                    unset($user_ids[$user_id]);
            }
    }

    print_r($user_ids); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:38:27.703

PHP 的内置数组函数只需几行就可以处理您需要的大部分内容，而无需求助于大量手动循环。

由于您在这些数组上有不同的键，因此您可以遍历每个[`array_map()`](http://us3.php.net/manual/en/function.array-map.php)键以提取所需的键并将其展平为单个维度。然后调用[`array_intersect()`](http://us3.php.net/manual/en/function.array-intersect.php)四个结果数组来获取相交的 id：

[http://codepad.viper-7.com/x0Ncm0](http://codepad.viper-7.com/x0Ncm0)

```
// Your original arrays...
$a1 = array(array('userid'=>11),array('userid'=>22),array('userid'=>33));
$a2 = array(array('userid'=>11),array('userid'=>99),array('userid'=>33));
$a3 = array(array('userid'=>11),array('userid'=>33));
$a4 = array(array('client_id'=>11),array('client_id'=>33),array('client_id'=>99));

// Flatten each array using array_map() to return the desired key
function callback_userid($a) { return $a['userid']; }
function callback_client_id($a) { return $a['client_id']; }

$a1flat = array_map('callback_userid', $a1);
$a2flat = array_map('callback_userid', $a2);
$a3flat = array_map('callback_userid', $a3);
$a4flat = array_map('callback_client_id', $a4);

// Then get an intersection of all four flattened arrays
print_r(array_intersect($a1flat, $a2flat, $a3flat, $a4flat));

Array
(
    [0] => 11
    [2] => 33
) 
```

`array_values()`如果要从零重新索引键，请调用输出数组。或者，如果您确实需要将它们作为 2D 数组键入`id`，则可以使用循环：

```
foreach ($output as $key => $value) {
  // Append a new array with 'id'
  $output[] = array('id' => $value);
  // unset the original key
  unset($output[$key]);
} 
```

但是，如果您没有将这四个查询用于非常不同的目的（因此不必单独执行它们），您可能能够在单个 SQL 查询中哄骗出这些信息。很难说没有看到更多的代码。

# python - 如何将 Pyro 与 gevent 一起使用？

> ID：14575161
> 
> 赞同：1
> 
> 时间：2013-01-29T03:24:52.577
> 
> 标签：python, gevent, pyro

可以同时使用 Pyro 和 gevent 吗？我该怎么做呢？

Pyro 想要有自己的事件循环，它下面可能使用 epoll 等。我在协调两者时遇到了麻烦。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T20:12:13.877

我用`gevent.spawn(daemon.requestLoop)`. 在不了解更多细节的情况下，我不能说更多。

# iphone - iPhone/Facebook/Google App Engine 集成

> ID：14575164
> 
> 赞同：0
> 
> 时间：2013-01-29T03:25:00.360
> 
> 标签：iphone, python, facebook, google-app-engine

我正在设计一个需要用户登录到他/她的 Facebook 帐户的 iPhone 应用程序。

该应用程序使用 GAE（Google App Engine）作为后台服务器（Python），所以现在的问题是我不知道 GAE、iPhone 和 Facebook 身份验证是如何工作的。

我的猜测是用户从 iPhone 登录到 FB 并会得到一个`access_token`，然后 iphone 应用程序将其发送`access_token`到 GAE 以便 GAE 可以识别用户。

那是对的吗？或者有没有关于如何在这些平台之间进行合作的教程？

我已经检查了一个名为lean-engine 的开源，但他们没有可用的iphone 源代码（只有Android）。

如果可能，请发布源/github项目！！！！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:53:18.663

如果您还没有找到它，Facebook 平台 Python SDK 涵盖了您想要的，但并不完全是为 iPhone 编写的。

如果您的应用程序可以获得**access_token**，那么您可以将其发送到 Facebook Platform Python SDK 的“oauth”示例 - 到**facebookoauth.py**文件。您至少需要更改“类 LoginHandler”代码，默认情况下，它旨在从 cookie中获取**access_token 。**您只需注释掉所有与 cookie 相关的代码，然后使用可以在**facebookoauth.py**代码中看到的**access_token 。**

 **[https://github.com/pythonforfacebook/facebook-sdk/](https://github.com/pythonforfacebook/facebook-sdk/)**

# php - Codeigniter 中具有 2 个索引的验证 UNIQUE 字段

> ID：14575165
> 
> 赞同：6
> 
> 时间：2013-01-29T03:25:03.913
> 
> 标签：php, mysql, codeigniter, validation

在 Codeigniter 框架中，我可以使用“表单验证类”验证 MYSQL 数据库中的唯一字段。示例：

```
$this->form_validation->set_rules('form_field', 'form_label', 'is_unique[table.field]'); 
```

完美地工作，但是，我需要验证一个具有 2 个索引的表中的字段。示例：

```
UNIQUE INDEX `id_aluno` (`id_aluno`, `ano`), 
```

Codeigniter 框架可以原生实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T07:02:52.427

我不认为`CI`组合的内置案例，`PK`但我会像这样使用**callback_**：**但请注意，您必须将第二个`PK`作为额外发送，并且该规则应应用于第一个 $PK 请参阅[回调](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)以获取更多信息**

```
$this->form_validation->set_rules('form_field', 'form_label', 'callback_combpk[$pk2]');
    public function combpk($pk1, $pk2)
        {
               $this->db->where('field1', $pk1);
               $this->db->where('field2', $pk2);
               $result = $this->db->get('table');
               if($result->num_rows() > 0)
               {
                  $this->form_validation->set_message('combpk','something'); // set your message
                  return false;
               }
               else{ return true;}

        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-31T07:35:04.030

```
$this->form_validation->set_rules(
    'form_field', 
    'form_label', 
    'trima|is_unique[table1.field1],trim|required|is_unique[table.field2]'); 
```

采用

```
'trima|is_unique[table1.field1],trim|required|is_unique[table.field2]' 
```

在单个代码中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T11:50:34.697

在 CodeIgniter 中没有找到对这个功能的原生支持的描述。您可以在 INSERT 查询后检查数据库错误号。例如：

```
$last_id = $this->model->set();
if ($last_id === FALSE)
    if ($this->db->_error_number() == 1062)
        $this->data['message_error'] = 'Not unique.';
    else
        $this->data['message_error'] = 'Database error.'; 
```

这种方法有缺点，但肯定有一个优点——不要使用额外的 SELECT 查询。

PS 如果有几个不同的复合唯一索引，那么当然可以使用`preg_match(<pattern_with_index_name>, $this->db->_error_message());`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-22T10:29:28.120

也许你对我的自定义 is_unique 函数感兴趣。这里是。

您可以通过 2 种方式使用它：

```
1\. is_unique[table_name.field_to_check.id_field_name.id_field_value] //<-- unique 1 field only

2\. is_unique[table_name.field_to_check.id_field_name != 'id_field_value' and anotherIdName='theValue'] //<-- custom where 
```

只需将此代码保存在一个文件中，将其命名为 MY_Form_Validation.php，并将其放在库目录下。然后你可以把那些 is_unique

```
 public function is_unique($str, $field)
    {
        $result = true;
        try {
            if ($str) {//validate only if there's a value submitted
                $is_query = 0;

                $x = substr_count($field, '.'); //count of dots  
                //ex: is_unique[is_unique[$table_name.$field_name.$field_id!='$id' and 1=1]] 
                //ex: is_unique[$table_name.$field_name.id!='2' and name!='simson'] 
                if($x == 2) {
                    list($table, $field, $where) = explode('.', $field);
                    $is_unique = 0;

                    if ($where) {
                        $logos = "select * from $table where $field =? and $where ";
                    } else {
                        $logos = "select * from $table where $field =?  ";
                    }

                    $data = array($str);
                    $qq = $this->CI->db->query($logos, $data);
                    $is_query = 1;
                    $row = $qq->row();
                    $is_unique = !(bool)$row; //is_unique = (row == empty) 
                    $result = (bool)$is_unique;
                }
                else {
                    if ($x >= 3) {
                        list($table, $field, $id_field, $id_val) = explode('.', $field);
                        $is_unique = 0;
                        if ($id_field && $id_val) {
                            $logos = "select * from $table where $field =? and $id_field != '$id_val' ";
                        } else {
                            $logos = "select * from $table where $field =?  ";
                        }
                        $data = array($str);
                        $qq = $this->CI->db->query($logos, $data);
                        $is_query = 1;

                        $row = $qq->row();
                        if ($row) {
                            if ($row->id) {
                                if ($row->$id_field == $id_val) {
                                    $is_unique = 1; //means editing it self, allow it 
                                } else {
                                    //already exists with different id
                                }
                            } else {
                                //used for left join table
                            }
                        } else {
                            $is_unique = 1; //does not exists
                        }
                        $result = (bool)$is_unique;
                    }
                    else if ($x == 1) {
                        list($table, $field) = explode('.', $field);
                        $query = $this->CI->db->limit(1)->get_where($table, array($field => $str));
                        $is_query = 1;
                        $result = $query->num_rows() === 0;
                    }
                }

                if (is_log_query() && $is_query) {
                    $logos = "logos is_unique x==$x: " . $this->CI->db->last_query();
                    log_to_file($logos);
                } else {
                    $logos = "logos is_unique x==$x: NOT EXECUTED";
                    log_to_file($logos);
                }
            }

        }catch (Exception $e) {
            die($e->getTraceAsString());
        }
        return $result;
    } 
```

# java - 如何获取动态创建的文本视图的 id？

> ID：14575169
> 
> 赞同：3
> 
> 时间：2013-01-29T03:25:27.953
> 
> 标签：java, android, textview, android-view, findviewbyid

我正在尝试为我正在制作的 Android 应用程序动态添加和删除 TextView，但我在设置和获取 TextView 的 ID 时遇到了困难。对于最后两行代码（et.setText 和 ll.removeView），我似乎得到了空指针异常。有人对我如何动态设置和获取 textview 的 id 有任何建议吗？显然 .setId 似乎不起作用，或者更有可能是我做错了。

```
//surrounding non-relevant code removed
EditText et = (EditText) view.findViewById(R.id.edittext_tags);
et.setText("");

TextView nTv = new TextView(view.getContext()); 
LayoutParams lparams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

lparams.setMargins(10, 0, 0, 0);
nTv.setLayoutParams(lparams);   
nTv.setId(tag_id);
nTv.setText(str.substring(0, str.length()-1));
nTv.setTextColor(Color.BLUE);               
nTv.setTextSize(20);
final LinearLayout linl = (LinearLayout) view.findViewById(R.id.linear_layout_tags);
linl.addView(nTv);

nTv.setOnClickListener(new View.OnClickListener() {         
    public void onClick(View v) {

        EditText et = (EditText) view.findViewById(R.id.edittext_tags);
        TextView t = ((TextView)v);
        et.setText(t.getText().toString());
        linl.removeView(v);

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:30:18.597

`TextView`不包含布局中的所有子项，但确实`LinearLayout`如此。Make `linl` `final`，那么您可以在`nTV`'s中使用它`OnClickListener`（只要`view`包含布局。如果没有，您将需要对您想要实现的目标做出一些决定 - 之前对布局进行引用可能会起作用）。

```
final LinearLayout linl = (LinearLayout) view.findViewById(R.id.linear_layout_tags);
linl.addView(nTv);

nTv.setOnClickListener(new View.OnClickListener() {         
    public void onClick(View v) {
        EditText et = (EditText) linl.findViewById(R.id.edittext_tags);
        TextView t = ((TextView)v);
        et.setText(t.getText().toString());
        linl.removeView(v);
    } 
```

使用您的方法，实际上并不需要 id，因为您总是有对 View 的引用。

但是，如果您想使用视图（非常多余的示例，但这是为了解释）：

```
nTv.setId(tag_id);
linl.addView(nTv);

TextView duplicateTextViewReference (TextView) linl.findViewById (tag_id); 
```

# jquery - Ajax Post 文本输入

> ID：14575173
> 
> 赞同：0
> 
> 时间：2013-01-29T03:25:36.633
> 
> 标签：jquery, ajax, django, post

我正在尝试提交文本输入并使用提交的结果刷新页面，将 Django 用于服务器端。我对此还是很陌生。我这样做正确吗？

蟒蛇/Django：

```
urlpatterns = patterns('qanda.views',
     url(r'^(?P<url_id>\d+)/(?P<link_id>\d+)/add_answer/$', 'add_answer') 
```

jQuery：

```
$('#submitAnswer').on('click', function(e){
    var dataString = tinyMCE.get('addAnswer').getContent(); 
    e.preventDefault();
    $.ajax({
        type: "POST",
        url: "/add_answer",
        data: dataString,
        success: function(){
            alert(dataString);
        }
    });
}); 
```

如果你能指出我正确的方向，那就太好了。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T05:29:25.763

您需要使用 javascript 调试器来查看 ajax 响应。你会看到你得到一个404。

您`url`与您的 Django 视图不匹配..

```
 $.ajax({
        type: "POST",
        url: "/add_answer",
            // ^^^^^^^^^^^ should be /1/1/add_answer/ 
            // (if this script is at /1/1/ remove the leading slash)

        data: dataString,
        success: function(){
            alert(dataString);
        }
    }); 
```

# python - Google App Engine 使用数组将模板变量传递到视图中

> ID：14575175
> 
> 赞同：1
> 
> 时间：2013-01-29T03:25:44.800
> 
> 标签：python, arrays, google-app-engine, templates

My`main.py`有以下变量：

```
'booking_times':
 {
   'Today': ['9:00', '12:00', '14:00', '15:00', '19:00', '20:00'],
   'Tue': ['9:00', '12:00', '14:00', '15:00', '19:00', '20:00'],
   'Wed': ['9:00', '12:00', '14:00', '15:00', '19:00', '20:00']
 } 
```

在我看来，我想在表格中显示它们：

```
-----------------------
Today  | Tue   | Wed   | // line 1
9:00   | 9:00  | 9:00  | // line 2
12:00  | 12:00 | 12:00 | 
```

我有两个问题：

(1) 作为一个例子，我将如何循环遍历每个都是`<td>`html 标记的第 2 行？

(2) 我的第 1 行如下，但它输出为`Tue | Today | Wed`而不是`Today | Tue | Wed |`：

```
{% for day in booking_times %}
<td>{{day}}</td>
{% endfor %} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:49:10.450

假设您使用的是 Python，这是您可以尝试的一件事。请注意，这从您的变量设置略有不同开始`booking_times`，但希望这个概念是有意义的。一般的想法是，我们首先创建一个排序顺序，我们将使用它来对我们的值进行排序。然后，我们使用`zip`创建一个新的列表列表，该列表将以天开始，然后是每个后续列表中的小时。

```
booking_times = {
   'Today': ['9:00', '12:00', '14:00', '15:00', '19:00', '20:00'],
   'Tue': ['9:00', '12:00', '14:00', '15:00', '19:00', '20:00'],
   'Wed': ['9:00', '12:00', '14:00', '15:00', '19:00', '20:00']
 }

# Create a new booking_times variable that is a list-of-list,
# leading with the 'days' and followed by one list for each time
sorted_keys = ['Today', 'Tue', 'Wed']
booking_times = [sorted_keys] + zip(*(booking_times[s] for s in sorted_keys)) 
```

这是`booking_times`使用简单的迭代时此时的样子`for row in booking_times: print row`：

```
['Today', 'Tue', 'Wed']
('9:00', '9:00', '9:00')
('12:00', '12:00', '12:00')
('14:00', '14:00', '14:00')
('15:00', '15:00', '15:00')
('19:00', '19:00', '19:00')
('20:00', '20:00', '20:00') 
```

然后，您可以将该值传递到您的模板中，并以与上面基本相同的方式对其进行迭代：

```
{% for day in booking_times %}
   <tr>
   {% for item in day %}
       <td>{{ item }}</td> 
   {% endfor %}
   </tr>
{% endfor %} 
```

我现在无法测试模板，但是当修改为使用简单的打印语句时，它会输出以下内容：

```
Today   Tue Wed
9:00    9:00    9:00
12:00   12:00   12:00
14:00   14:00   14:00
15:00   15:00   15:00
19:00   19:00   19:00
20:00   20:00   20:00 
```

这可能与您当前的设置有一点偏差，因此很乐意在必要时进行调整。

# php - 从文本构建树

> ID：14575176
> 
> 赞同：-1
> 
> 时间：2013-01-29T03:25:54.627
> 
> 标签：php, multidimensional-array, treeview

我有关于我的 PHP 的数据，我将从这些数据中创建一个树形菜单：

```
$data[] = "IT/managerial/software/kasubsie/Moro/Konsolidasi Server";
$data[] = "IT/managerial/software/kasubsie/Moro/Setting Server";
$data[] = "IT/managerial/software/kasubsie/Setting Server/Moro"; 
```

如何生成带有列的表：

```
| id | parent_id | name | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:35:45.127

这行得通。以此为基础。主要逻辑是对`preg_split`每一行数据。希望这可以帮助！

```
<?php

$data = array();
$data[] = "IT/managerial/software/kasubsie/Moro/Konsolidasi Server";
$data[] = "IT/managerial/software/kasubsie/Moro/Setting Server";
$data[] = "IT/managerial/software/kasubsie/Setting Server/Moro";

$value_array = array();

echo '<table border="1">';
foreach ($data as $key => $value) {
    echo '<tr>';
    $value_array = preg_split("/\//", $value);
    foreach ($value_array as $table_cell_value) {
        echo '<td>' . $table_cell_value . '</td>';
    }
    echo '</tr>';
}
echo '</table>';

?> 
```

# smarty - zf2-smarty3 获取 Zend\Form 生成的元素的实际 html 值

> ID：14575177
> 
> 赞同：0
> 
> 时间：2013-01-29T03:26:25.137
> 
> 标签：smarty, zend-form, zend-framework2, template-engine, smarty3

我在我们的项目中使用 ZF2，最近，我们将它集成到 Smarty 模板系统中。在 ZF2 原生的 Zend\Form 的帮助下，我们已经为我们的视图制作了表单。我的问题是：如何`<input type="text">...`在 ZF2 的 Zend\Form 制作的所有表单元素的控制器级别上获取实际的 HTML 值 ()？由于 Smarty3 默认情况下不允许在模板端使用 PHP 标记，因此我不能只使用：

```
$form = $this->form;
$form->setAttribute('action', $this->url($property_folder, array('action' => $property_folder)));
$form->setAttribute('class', 'searchform');
$form->prepare();
. . . 
```

如果我可以提取表单元素的实际 HTML 值，那将有助于将它们重用于用户所需的其他模板/主题。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:46:34.760

好的，在重新阅读后，我假设您想要表单元素的完整 HTML 字符串，而不是元素值。这也是可能的，并且只需要您访问 Controller 中的重新渲染 ViewHelper。这是按如下方式完成的：

```
$viewHelperManager = $sm->get('viewhelpermanager');
$formElementRenderer = $viewHelperManager->get('formElement');

$elementHtml = $formElementRenderer($form->get('element')); 
```

显然有更多的 ViewHelper 可以使用。您可以通过查看[`Zend\Form\View\HelperConfig`](https://github.com/zendframework/zf2/blob/master/library/Zend/Form/View/HelperConfig.php#L28)

# hash - 为什么密码强度很重要？

> ID：14575178
> 
> 赞同：-4
> 
> 时间：2013-01-29T03:26:26.473
> 
> 标签：hash, passwords, brute-force

我是这样看的，如果一家公司可以正确保护他们的哈希值并且可以防止对其身份验证系统的暴力攻击，那么为什么密码需要真正具有任何强度呢？

如果有人无法获得哈希并且他们无法暴力破解，那么密码相对安全，不是吗？

当然，简单的答案是“是的，但是哈希并不总是安全的”。但是从业务的角度来看。如果他们要求用户保留一个强密码，他们基本上承认他们不能既保护哈希值又防止暴力攻击。所以这是一家将责任推给用户的公司，因为他们自己的失败，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:30:23.620

假设您的密码是`"a"`，一个非常弱的密码^((a))。

即使没有哈希，我也需要大约......好吧，几乎没有时间用蛮力方法破解它。

散列可能会使它更容易，但缺少散列并不一定会使它变得不可能。

* * *

^((a)) : 这就是为什么我总是使用密码`"b"`- 破解需要两倍的时间:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:32:46.313

密码哈希和盐在存储在数据库中时使密码安全，它们不能防止前端破解。

蛮力破解者将在尝试从 a-999 等所有内容的网站上运行...`abc`无论哈希和盐有多安全，一个简单的密码都将立即被破解。

# perl - perl 未定义子例程 &Net::SNMPTrapd::pack_sockaddr_in

> ID：14575180
> 
> 赞同：0
> 
> 时间：2013-01-29T03:26:43.463
> 
> 标签：perl

我正在尝试使用 Net::SNMPTrapd 中包含的示例脚本，但它在 Socket 例程上失败。我的代码：

```
#!/usr/bin/perl
use Net::SNMPTrapd;

my $snmptrapd = Net::SNMPTrapd->new()
  or die "Error creating SNMPTrapd listener: ", Net::SNMPTrapd->error;

while (1) { 
    my $trap = $snmptrapd->get_trap();

    if ( !defined($trap) ) {
        printf "$0: %s\n", Net::SNMPTrapd->error;
        exit 1 
    } elsif ( $trap == 0 ) {
        next
    } 

    if ( !defined( $trap->process_trap() ) ) {
        printf "$0: %s\n", Net::SNMPTrapd->error
    } else { 
        printf "%s\t%i\t%i\t%s\n",
          $trap->remoteaddr,
          $trap->remoteport,
          $trap->version,
          $trap->community
    } 
} 
```

当我运行它并从我的 Cisco 路由器向它发送一个 v2 陷阱时，它只是转储：

```
Undefined subroutine &Net::SNMPTrapd::pack_sockaddr_in called at /usr/local/share/perl/5.14.2/Net/SNMPTrapd.pm line 554. 
```

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:43:41.400

```
use Socket qw(inet_ntoa AF_INET IPPROTO_TCP); 
```

应该

```
use Socket qw(inet_ntoa AF_INET IPPROTO_TCP pack_sockaddr_in); 
```

## 解决方法

改变

```
use Net::SNMPTrapd; 
```

至

```
use Net::SNMPTrapd;
BEGIN {
   *Net::SNMPTrapd::pack_sockaddr_in = \&Socket::pack_sockaddr_in
      if !defined(&Net::SNMPTrapd::pack_sockaddr_in);
} 
```

即使模块的作者解决了这个问题，这也不会中断（在你向他[提及](https://rt.cpan.org/Public/Bug/Report.html?Queue=Net-SNMPTrapd)之后......）

# python - 使用 Ghost.py 进行屏幕抓取

> ID：14575181
> 
> 赞同：1
> 
> 时间：2013-01-29T03:26:49.657
> 
> 标签：python, pyqt, web-crawler, ghost.py

这是不起作用的简单程序

```
from ghost import Ghost

ghost = Ghost(wait_timeout=40)
page, extra_resources = ghost.open("http://samsung.com/in/consumer/mobile-phone/mobile-phone/smartphone/")
ghost.wait_page_loaded()
n=2;
links=ghost.evaluate("alist=document.getElementsByTagName('a');alist")
print links 
```

错误是：引发异常（timeout_message）

异常：无法加载请求的页面

程序有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:23:18.930

似乎人们正在向您报告类似的问题，但没有得到任何解释（例如：[https](https://github.com/jeanphix/Ghost.py/issues/26) ://github.com/jeanphix/Ghost.py/issues/26 ）

将评估行调整为以下内容，ghost.py 文档引用了该行：

```
links = gh.evaluate("""
                        var links = document.querySelectorAll("a");
                        var listRet = [];
                        for (var i=0; i<links.length; i++){
                            listRet.push(links[i].href);
                        }
                        listRet;
                    """) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T03:21:28.190

我不得不在 ghost.py wait_for_page_loaded 函数中添加额外的逻辑：

```
 reTmp = str(resource.url)
    if "PyQt4" in reTmp:
        reTmp = str(reTmp).replace("PyQt4.QtCore.QUrl(u\'", "").replace("\')","")
    if url == reTmp:
        page = resource 
```

PyQt 正在向 resource.url 添加愚蠢的垃圾，因此 url==resource.url 永远无法正确加载页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T07:05:10.687

当我第一次获得 Ghost.py 时，我尝试的每个页面都出现了这个错误，我解决它的方法是我废弃了 PyQt 并安装了 PySide。无论如何，这对我来说是固定的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-31T03:40:24.433

ghost.py 需要 PySide（首选）或 PyQt Qt 绑定：

```
pip install pyside
pip install ghost.py --pre 
```

尝试安装 pyside 而不是 pyqt。这对我有用。

# ios5 - 使用 CaseInsensitiveCompare 按多个排序描述符对核心数据进行排序

> ID：14575184
> 
> 赞同：10
> 
> 时间：2013-01-29T03:27:12.213
> 
> 标签：ios5, core-data, nsfetchedresultscontroller, nssortdescriptor

我有一个 Word : NSManagedObject 子类，我试图按单词的第一个字母进行分组。然后在每个部分中，我尝试按长度属性进行排序，同时在单词具有相同长度时保持字母数字排序。所以它看起来像

一句话

*   苹果长度 = 5
*   斧头长度 = 3
*   长度 = 2

乙字

*   祸根长度 = 4
*   船长 = 4
*   袋长 = 3

所以我先初始化一个新的 NSFetchRequest。然后我添加我的排序描述符，首先按值排序（只是单词），然后按长度排序。最后初始化我的 fetchedResultsController 并使用 group 值按第一个字母对它们进行分组。这是我的代码，但我没有得到想要的结果。任何帮助将不胜感激。

```
@interface Word : NSManagedObject

@property (nonatomic, retain) NSString * value;
@property (nonatomic, retain) NSString * group;
@property (nonatomic, retain) NSNumber * length;

@end

NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:@"Word"];
request.sortDescriptors = [NSArray arrayWithObjects:[NSSortDescriptor sortDescriptorWithKey:@"value" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)],
                               [NSSortDescriptor sortDescriptorWithKey:@"length" ascending:NO], nil];

self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.wordDatabase.managedObjectContext
                                                                          sectionNameKeyPath:@"group"
                                                                                   cacheName:nil]; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-29T06:14:43.313

第一个排序描述符应该用于用作 的键`sectionNameKeyPath`，第二个排序描述符用于键`length`，最后一个用于`value`：

```
request.sortDescriptors = [NSArray arrayWithObjects:
    [NSSortDescriptor sortDescriptorWithKey:@"group" ascending:YES],
    [NSSortDescriptor sortDescriptorWithKey:@"length" ascending:NO],
    [NSSortDescriptor sortDescriptorWithKey:@"value" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)],
    nil]; 
```

# jquery - 如何通过ajax成功返回HTML5 formdata数据

> ID：14575187
> 
> 赞同：0
> 
> 时间：2013-01-29T03:27:31.500
> 
> 标签：jquery, ajax, html

我有一个完美的 jquery ajax + html5 formdata 文件加上数据提交。但是如何获取发布的数据呢？

```
var fd = new FormData();
fb.apend(); // values here 
```

然后是ajax

```
$.ajax({
  url: url,
  data: fd,
  //something here
}).done(function(res){
   alert(res); // Pop up with nothing
   console.log(res); //New line in Google chrome console but nothing inside.
}); 
```

# ruby - Jekyll 是否允许仅使用帖子的标题作为 URL？

> ID：14575189
> 
> 赞同：4
> 
> 时间：2013-01-29T03:27:42.867
> 
> 标签：ruby, jekyll

Jekyll gem 是否允许仅使用帖子的标题作为 URL？

例如，如果我有一个名为 like 的 markdown 文件`first-post-ever.markdown`，我可以得到 like 的路线`something.com/first-post-ever`吗？没有日期信息。

Even`something.com/first-post-ever.html`对我来说很好，但没有`.html`是首选。

在配置文件中，我尝试了`permalink: /:title.html`and `permalink: /:title`，但都没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T04:37:48.933

是的，这是允许的。您的配置是正确的，尝试删除生成的静态页面（`_site`文件夹）然后重新启动 jekyll 服务器。

# java - 启用登录外部库

> ID：14575193
> 
> 赞同：3
> 
> 时间：2013-01-29T03:28:29.967
> 
> 标签：java, android, square

我正在使用square 的[改造](https://github.com/square/retrofit)库（作为 jar 依赖项添加），它配置了一个记录器。（[链接](https://github.com/square/retrofit/blob/master/retrofit/src/main/java/retrofit/http/RestAdapter.java#L45)）

```
 private static final Logger LOGGER = Logger.getLogger(RestAdapter.class.getName()); 
```

如何启用此库中的日志记录（从我的应用程序）。

我看到这样的[支票](https://github.com/square/retrofit/blob/master/retrofit/src/main/java/retrofit/http/RestAdapter.java#L202)

```
if (LOGGER.isLoggable(Level.FINE)) {
          logResponseBody(url, body, statusCode, elapsedTime);
        } 
```

所以看起来，我可能需要获取这个记录器并设置日志级别。或者 java logger 是否从配置文件、环境、类路径中读取 loglevel 设置？

我对java平台不熟悉。感谢您在控制台中记录来自此（外部）库的消息的任何帮助。例如，我需要在我的 android 控制台/logCat（设置为详细级别）中查看此类（RestAdapter）的所有日志消息。

谢谢。

## 编辑1：

我将以下内容添加到我的入口点，我可以看到它被调用了。仍然没有相关日志

```
static final String LOGGER_NAME = "retrofit.http.RestAdapter";

@Override
    public void onCreate() {
        super.onCreate();
        Logger mLoggerInstance = Logger.getLogger(LOGGER_NAME);
        if (mLoggerInstance != null) {
            mLoggerInstance.setLevel(Level.FINE);
        }
    } 
```

## 编辑2：

我编辑了外部库以将 loglevel FINE 的引用更改为 DEBUG。这让我看到了日志，还是想知道单独配置logger也能达到同样的效果。

我在这里看到一个帖子，但没有工作。 [Android 下使用 Logger 进行日志记录](https://stackoverflow.com/questions/13405482/logging-with-logger-under-android)

不确定，但看起来 Debug 以下的调试级别在 Android 中被抑制了。（[来源](https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/logging/AndroidHandler.java#L160)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:48:11.227

这是 Java 日志记录 API。默认情况下，它使用全局 jre/lib/logging.properties 配置文件。您可以将其复制到您的应用程序文件夹，更改它并将其作为 java arg 传递

```
java -Djava.util.logging.config.file=logging.properties ... 
```

阅读 Oracle 的概述 [http://docs.oracle.com/javase/7/docs/api/java/util/logging/package-summary.html](http://docs.oracle.com/javase/7/docs/api/java/util/logging/package-summary.html)或这篇文章[http://tutorials.jenkov.com/java-logging/configuration .html](http://tutorials.jenkov.com/java-logging/configuration.html)了解更多详情

# c - C 从 ctime 值 ctime 截断 HH:MM:SS

> ID：14575200
> 
> 赞同：0
> 
> 时间：2013-01-29T03:29:12.547
> 
> 标签：c, unix, ctime

我有这个 unix 时间戳，使用 ctime 转换时显示为`Thu Mar 26 15:30:26 2007`，但我只需要`Thu Mar 26 2007`.

如何更改或截断以消除时间 (HH:MM:SS)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:35:18.497

从手册页`strptime()`：

以下示例演示了`strptime()`和的使用`strftime()`。

```
 #include <stdio.h>
   #include <time.h>

   int main() {
           struct tm tm;
           char buf[255];

           strptime("2001-11-12 18:31:01", "%Y-%m-%d %H:%M:%S", &tm);
           strftime(buf, sizeof(buf), "%d %b %Y %H:%M", &tm);
           puts(buf);
           return 0;
   } 
```

根据自己的需要进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:43:41.897

既然你有一个`time_t`值，你可以使用[`localtime()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/localtime.html)and [`strftime()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strftime.html)：

```
#include <time.h>
#include <stdio.h>

int main(void)
{
    time_t t = time(0);
    struct tm *lt = localtime(&t);
    char buffer[20];
    strftime(buffer, sizeof(buffer), "%a %b %d %Y", lt);
    puts(buffer);
    return(0);
} 
```

或者，如果您觉得必须使用`ctime()`，则：

```
#include <time.h>
#include <stdio.h>
#include <string.h>

int main(void)
{
    time_t t = time(0);
    char buffer[20];
    char *str = ctime(&t);
    memmove(&buffer[0],  &str[0],  11);
    memmove(&buffer[11], &str[20],  4);
    buffer[15] = '\0';
    puts(buffer);
    return(0);
} 
```

# cordova - 在 Phonegap Windows Phone 8 应用程序中使用 css font-face

> ID：14575208
> 
> 赞同：14
> 
> 时间：2013-01-29T03:30:02.727
> 
> 标签：cordova, windows-phone-8

在带有 Cordova/Phonegap 的 Windows Phone 8 中，字体对我不起作用。

使用库存的 Cordova WP8 模板，我添加了一个简单的字体定义并设置`*`为使用该字体或wingdings（更清楚的是它不起作用）。

![html](../Images/46f151622737ba3ce08bcd9bf8c16bed.png)

该文件位于`/fonts`文件夹中，设置为“内容”和“始终复制”。

![字体位置](../Images/646bff83a9146867e6f970fa2d9aa852.png)

（哇，这张图好大）

如果我在 Chrome 中运行它，它会正确加载字体：

![字体在 chrome 中工作](../Images/68f0e63b6a117197e77ae19f193b75cd.png)

即使我在 IE10（或 IE9 模式）下运行它，它也会正确加载字体：

![字体在 IE10 中有效](../Images/9d1cb6b0774bc85986c60d55acf277e8.png)

但是，如果我在 Windows Phone 8 模拟器上运行它，我会得到以下结果：

![windowsphone8模拟器](../Images/7196da3fda8d43917edc4595052a8ea7.png)

有任何想法吗？解决方法？我应该直接跳下桥吗？

**更新：**

有人建议改用 WOFF 字体格式，所以我去了[http://www.font2web.com/](http://www.font2web.com/)并转换了我的 TTF 字体。我将新文件复制到我的`www/fonts/`文件夹中。和以前一样，我确保“构建操作”设置为`Content`and `Copy Always`。

另外，我读到了一些关于在 deviceReady 事件触发后尝试加载字体的内容。值得一试......不能伤害任何东西。

这是一个名为 `fonts.css' 的 css 文件，它定义了一个包含所有可能组合的新字体：

![新的 CSS](../Images/b94e397de866858ff4917e418a780475.png)

然后，我编辑了股票`js/index.js`并添加了一些脚本，以便`fonts.css`在 deviceReady 之后将新股票动态加载到 DOM 中：

![设备就绪](../Images/dbf6ab60e1684d435eecc2468d8eb9c6.png)

顺便说一句：`loadjscssfile()`是我从[http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)获得的一个小脚本，用于将文件内容加载`fonts.css`到 DOM 中。

我在 Internet Explorer 10/9、Chrome 和 Firefox 中检查了它。3 秒后，字体发生变化。我在 Windows Phone 8 模拟器中尝试过。3 秒后，侧翼。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T11:34:11.340

**如果 css 存储在本地**（IsolatedStorage 或 XAP 内容），则在 css 中定义的字体将不起作用。我有类似的问题，这是 WP WebBrowserControl 团队的回复：

> 这是一个已知问题，不幸的是，除了远程托管页面和资源之外，没有其他已知的解决方法。

因此，作为一种解决方法，您可以尝试在远程站点上托管您的 css 和 html 文件，但我知道这并不理想。

**编辑**

我还尝试了以下方法 - 将字体加载到 wp8 silverlight 应用程序，以便它可以通过名称识别（与其他预加载字体一样），这适用于 silverlight ui - 我可以从 xaml 中按名称引用这个新字体，但不幸的是这没有不适用于网络浏览器内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-21T13:46:46.137

看起来如果您将字体编码为 base64 并将其直接放在 css 文件中，那么它也可以在 WP8 应用程序中使用。

[使用Icomoon](http://icomoon.io/app/)或[Fontsquirrel](http://www.fontsquirrel.com/tools/webfont-generator)等 Web 应用程序，您可以轻松生成包含 base64 字符串的 css。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-10T12:51:41.877

好吧，我遇到了同样的问题，所以我的解决方法是：我正在使用 sencha touch，所以我有两个单独的 css 文件。对于图标元素，我添加了额外的类 win 和我添加的 windows css

```
.list.win {
  background-image: url('data:image/png;base64,IMAGECODE HERE');
} 
```

好吧，它可能被吓到了，但它仍然有效，这就是它解决方法的原因，因为我没有找到更好的东西

PS：我的解决方案是当你使用字体作为图标时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-17T23:53:19.670

You can just remove the version of the ttf font :

[Getting a web-font to work on an HTML5 Windows Phone App?](https://stackoverflow.com/questions/14558331/getting-a-web-font-to-work-on-an-html5-windows-phone-app/20573678#20573678)

This one help me for jQuery Mobile and Ionic framework.

# objective-c - 我可以通过 info.plist 或代码指定通过 iTunes 或其他应用程序传输 pdf 的路径吗？

> ID：14575209
> 
> 赞同：-1
> 
> 时间：2013-01-29T03:30:04.587
> 
> 标签：objective-c, file-transfer, info.plist

我正在尝试通过 iTunes 或其他应用程序（如 safari 或 gmail）进行 pdf 传输，并且我想保持一致，通过 iTunes 或其他应用程序传输的 pdf 将保存在同一个文件中。

对于 iTunes，我知道我可以将 UIFileSharingEnabled 属性设置为 YES 以启用文件共享，然后文档目录将暴露给用户。

但是，我可以指定公开的路径，以便只公开文档目录中的特定子文件夹而不是整个文档目录吗？

其次，我知道通过在 plist 中设置 CFBundleDocumentTypes 的某些属性，可以选择在我的应用程序中打开其他应用程序（例如 safari 或 gmail）中的其他文件。但是，路径似乎在 Documents/inbox 中指定。

因此，我想知道是否有办法指定自定义路径来保存 pdf 而不是保存在收件箱中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:50:03.437

不，两个问题。如果您的应用想要使用这些文件共享 API 中的任何一个，并且需要存储不应该是用户可见的文件，则它应该将文件存储在 Documents 文件夹以外的位置。

# ruby-on-rails - rails 控制台说“表不存在”，但它显示在我的架构中

> ID：14575210
> 
> 赞同：1
> 
> 时间：2013-01-29T03:30:04.980
> 
> 标签：ruby-on-rails, postgresql, rails-activerecord

我正在为设备和讲师创建一个名为 EquipmentOwnership 的连接表。

```
class EquipmentOwnership < ActiveRecord::Base
  attr_accessible :equipment_id, :instructor_id, :owned

  belongs_to :equipment
  belongs_to :instructor
end 
```

它在我的架构中显示如下：

```
create_table "equiment_ownerships", :force => true do |t|
  t.integer "equipment_id"
  t.integer "instructor_id"
  t.boolean "owned"
end 
```

但是，这是在 rails 控制台中发生的情况：

```
[1] pry(main)> EquipmentOwnership
=> EquipmentOwnership(Table doesn't exist) 
```

它可能这样做的可能原因是什么？

我正在使用 Postgres、rails 3.2、ruby 1.9.3p194 和 OSX 山狮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:46:42.970

`create_table "equiment_ownerships"`缺少一个`p`. 所以，应该是：
`create_table "equipment_ownerships"`

# asp.net - 如何让asp.net树状视图控件只允许展开一个节点

> ID：14575211
> 
> 赞同：-1
> 
> 时间：2013-01-29T03:30:07.880
> 
> 标签：asp.net, vb.net, treeview

我已将树视图控件与我的数据表绑定，并且它已完美呈现。

但它允许我扩展我单击的多个节点。

一次只能扩展一个节点。单击另一个节点应该折叠其他节点。

应该为此触发什么事件？任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:42:30.377

```
 Protected Sub Tree_Index_TreeNodeExpanded(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.TreeNodeEventArgs) Handles Tree_Index.TreeNodeExpanded
    ' Loop through all nodes 
    For Each treenode As TreeNode In Tree_Index.Nodes 
        ' If node is expanded 
        If treenode.Value <> e.Node.Value Then
            ' Collapse all other nodes 
            treenode.Collapse()
        End If
    Next
End Sub 
```

# ruby-on-rails - Rails：git push heroku 错误：Windows 7 上的 sqlite3

> ID：14575212
> 
> 赞同：0
> 
> 时间：2013-01-29T03:30:13.897
> 
> 标签：ruby-on-rails, windows, heroku, sqlite, gem

我是rails新手，我正在尝试将应用程序推送到heroku（只是一些基本的练习）至今。当我从 Windows 命令行发出**git push heroku master时出现以下错误：**

```
 **Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native ex 
```

紧张。/usr/local/bin/ruby extconf.rb 检查 sqlite3.h ... 没有 sqlite3.h 丢失。尝试“port install sqlite3 +universal”或“yum install sqlite-devel”并检查您的共享库搜索路径（您的 sqlite3 共享库所在的位置）。 *** extconf.rb 失败*****

```
 .
   .
   .
   .
   .
          An error occurred while installing sqlite3 (1.3.7), and Bundler cannot co 
```

继续。`gem install sqlite3 -v '1.3.7'`在捆绑之前确保成功。

！！无法通过 Bundler 安装 gem。！！Heroku 推送被拒绝，无法编译 Ruby/rails 应用程序

我的 gemfile 看起来像这样：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

#gem 'sqlite3'

group :development, :test do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-10T20:40:42.540

下次您构建一个新应用程序以摆脱所有麻烦时，您必须执行以下操作：`rails new -d postgresql`如果您没有安装 heroku 插件，请执行此操作`heroku addons:add heroku_postgresql:hobby-dev`，下一步`heroku addons | grep POSTGRES`，最后`heroku run rake db:migrate`，应该是它。

# c++ - Square无法正常工作C ++ Xcode 4.2.1

> ID：14575219
> 
> 赞同：0
> 
> 时间：2013-01-29T03:31:20.967
> 
> 标签：c++

我正在使用 xcode v. 4.5.1 并尝试使用 C++ 项目的距离公式 (sqrt( (x1-x2)^2 + (y1-y2)^2 )) 计算两点之间的距离，但对于某些原因我的价值观没有被平方。为什么会发生这种情况，我如何平方一个值？

**这里的源**是点对象的向量。我正在使用的向量是 (3,4) (6,8) (50,8) (11,7)。如果我 print `source[i]`, `source[i+1]`or `source[j]`with `.x()`or`.y()`最后，它们都会正确打印出来，当我 print out`source[i].x()-source[i+1].x()`等时，值是正确的。但是一旦我添加了“^2”，打印的值都是错误的。

例如，

```
cout<< source[i].y();  shows 4 8 8 7 (when looped over i) 
```

但

```
cout<< sqrt((source[i].x()-source[i+1].x())^2 + (source[i].y()-source[i+1].y())^2); 
```

当 i=1 时显示 1

这是我的包括：

```
#include <iostream>
#include <fstream>
#include <algorithm>
#include <vector>
#include "Point.h" 
```

这是对我来说不会平方值的代码部分：

```
void function(vector<Point>& source){
    if(source.size()>3){
        for(int i=0; i<n+2; i++){
            for(int j=i+2; j<n; j++){
                double d1 = sqrt((source[i].x()-source[i+1].x())^2 + (source[i].y()-source[i+1].y())^2);
                double d2 = sqrt((source[i].x()-source[j].x())^2 + (source[i].y()-source[j].y())^2);
                if( d1 > d2){
                    swap( source[i+1], source[j] );
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:36:48.747

在 C++`^`中是异或运算符，而不是平方运算符。请阅读您的 C++ 参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T03:36:57.847

当您想通过幂来提高答案时，在您的情况下，您正在平方，您需要使用 pow 函数。

要了解有关该功能的更多信息，您可以在 Terminal.app 应用程序中键入“man pow”。

因此，对于一行，您可能希望将其更改为：

```
double d1 = sqrt(
    pow ( (source[i].x()-source[i+1].x()), 2 ) 
    + 
    pow( (source[i].y()-source[i+1].y()), 2 ) ); 
```

# java - 如何包含jsp文件

> ID：14575220
> 
> 赞同：-1
> 
> 时间：2013-01-29T03:31:32.513
> 
> 标签：java, maven, web-applications, maven-3

```
--webapp
     --WEB-INF
         --web.xml
     --index.jsp
     --jsp
         --Example.jsp 
```

我正在使用 javax.servlet

据我所知， index.jsp 在 webapp 下。

但是当我想重定向到 Example.jsp 时，它说找不到...

我怎样才能让它工作？配置 pom.xml 或 web.xml？

web.xml 像这样

```
<servlet>
    <servlet-name>GetAccess</servlet-name>
    <servlet-class>com.dodopipe.karl.GetAccess</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>GetAccess</servlet-name>
    <url-pattern>/GetAccess</url-pattern>
</servlet-mapping> 
```

GetAccess.java

```
RequestDispatcher rd = request.getRequestDispatcher("/Example.jsp");
rd.forward(request, response); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:41:58.240

您的 Example.jsp 位于 jsp 文件夹下，因此您的 Request Dispatcher 应该是这样的：

```
RequestDispatcher rd = request.getRequestDispatcher("jsp/Example.jsp");
rd.forward(request, response); 
```

# asp.net - RenderBody 和 RenderSection 的区别

> ID：14575225
> 
> 赞同：23
> 
> 时间：2013-01-29T03:32:19.353
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-5

在***MVC/Razor***语法中，我试图理解为什么我们需要`@RenderBody`.

例如（代码取自[示例](http://blog.overridethis.com/blog/post/2010/11/13/Learning-Razor-Shared-Content-Layout.aspx)）

```
<html>
    <head>
        <meta charset="utf-8" />
        <title>My WebSite</title>
        <style>
            #container { width: 700px; }
            #left { float: left; width: 150px; }
            #content { padding: 0 210px 0 160px; }
            #right { float: right; width: 200px; }
            .clear { clear: both; }
        </style>
    </head>
    <body>
        <div id="container">
            <div id="left">
                @RenderSection("left", required:false)
            </div>
            <div id="content">
                @RenderBody()
            </div>
            <div id="right">
                @RenderSection("right", required:false)
            </div>
            <div class="clear"></div>
        </div>
    </body>
</html>

@{
      Layout = "~/_3ColLayout.cshtml";
}

<h1>Main Content</h1>

@section left {
    <h1>Left Content</h1>
}

@section right {
    <h1>Right Content</h1>
} 
```

为什么我不能简单地`@RenderSection`用于一切，像这样：

```
<div id="content">
     @RenderSection("Body", required:true)
</div>

@section Body{
    <h1>Body Content</h1>
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-29T03:41:47.287

从 开始`@RenderBody`，这很重要。您的 _layout 必须拥有它。这是您的视图将被渲染的地方。如果你忽略它，你的应用程序将会死掉（我认为在运行时，因为视图没有被编译）。

[**更正：** 如果没有 Renderbody，引用此特定布局的视图将在运行时消失。（重要的是要注意布局本身是可选的。）]

部分是在您的视图中定义的具有相似名称的代码块

@RenderSection（“导航栏”，必需：假）

您的视图中可能有相应的代码块。

```
@section Navbar{
    <!-- Content Here -->
} 
```

我强调***可能***是因为导航栏已被删除`required: false`

部分是每个视图可以与 _layout 共享功能/标记的一种方式。

**跟进：** 在我适度的 MVC 开发时间里，我学会了适度使用部分。

*   节对于确保将 JS 引用放在 HTML 节中很有用（尽管这是一种过时的做法。
*   部分对顶部和侧面导航很有用
*   **从不**要求章节。这样做会使您的代码变得脆弱！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-29T03:35:46.533

只是因为方便。渲染身体是你最有可能做的事情，所以最好有一个专门的功能。防止您为正文声明 @section 并提供更容易调用的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T03:34:16.607

`RenderBody`是必需的，因为它是呈现每个视图的原因。`RenderSection`有一个可选参数，可让您将该部分标记为不需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-29T18:14:34.523

[这里](https://devbloggies.blogspot.com/2019/07/renderbody-and-renderpage-in-mvc.html)是关于 RenderBody() 和 RenderPage() 的基本信息。

# android - Android IAP - IAP 存储在设备的什么位置？

> ID：14575226
> 
> 赞同：4
> 
> 时间：2013-01-29T03:32:24.987
> 
> 标签：android, in-app-purchase

当我的服务器通过我的应用程序和 Google Play 服务器通过将 IAP 项目发送到设备（客户端）来响应购买产品 ID 时，它在哪里保存/存储项目（文件）。

后续问题 - 我可以控制它们的存储位置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:26:31.170

可能的答案： **注意：** 这适用于非消耗性 IAP，例如图像、新关卡、角色、功能等。对于消耗性 IAP，例如信用和基于时间的功能，可能会将这些较小的数据保存在数组列表文件、数据库或缓存中. 如果有更好的方法请纠正我。

当您的应用程序与您的服务器建立连接时，设置您要保存文件的路径，然后下载它。
**位置**- 很可能是私有文件类别下的 SD 卡（对您的应用程序私有，尽可能私有，并在您的应用程序被删除时删除）[保存文件 - Android 开发人员培训](https://developer.android.com/training/basics/data-storage/files.html)。

**目录**- 传递一个名称，指示您希望保存应用程序私有文件的目录类型。

> 以这种方式创建的每个目录都会添加到一个父目录中，该父目录封装了您的应用程序的所有外部存储文件，当用户卸载您的应用程序时，系统会删除这些文件。

然而，

> 如果预定义的子目录名称都不适合您的文件，您可以改为调用 getExternalFilesDir() 并传递 null。这将返回外部存储上应用程序私有目录的根目录。
> 
> 使用 API 常量（如 DIRECTORY_PICTURES）提供的目录名称很重要。这些目录名称可确保系统正确处理文件。

如果您的应用程序要使用这些文件，您现在将确切地知道它们在哪里。我不确定使用这些文件中的代码时的详细信息，例如附加组件/扩展代码。

# c++ - 如何从 CEdit 控件中获取文本

> ID：14575228
> 
> 赞同：6
> 
> 时间：2013-01-29T03:32:53.100
> 
> 标签：c++, atl, cedit

我是 ATL 的新人。所以请原谅我问这个问题。

**问题描述：**`CEdit` ATL 对话框类中增加了 一个控件。它附加在对话框初始化函数中。

```
//Define the edit control
ATLControls::CEdit  m_txtInput;

//In the OnInitDialog function
m_txtInput.Attach(GetDlgItem(IDC_INPUT_LINE));

m_txtInput.SetWindowText(_T("New directory"));

//In the public memeber function of the dialog GetInput()
//I have tried three kinds of method to get the text. But all of them are throw an 
//assert exception, IsWindow() failed. 
//1.
GetDlgItemText(IDC_INPUT_LINE, input);
//2.
ZeroMemory(m_lptstrInput, MAX_PATH);
m_txtInput.GetLine(0, m_lptstrInput, MAX_PATH);
//3.
BSTR input; 
m_txtInput.GetWindowText(input); 
```

[这](https://stackoverflow.com/questions/10662946/visual-c-get-string-from-cedit)是一个关于如何从中获取文本的主题，`CEdit`但它不起作用。

为什么`CEdit`控件可以用函数设置文本，`SetWindowText()`但不能通过函数获取文本`GetWindowText()`？这真的让我很困惑。如果有人可以为我解释，非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T07:24:35.803

`CEdit`不是 ATL 类。命名空间`ATLControls`从何而来？有一个具有此名称的 WTL 类，从中获取文本很容易：

```
 ATLASSERT(Edit.IsWindow()); // Make sure the control holds a handle
    CString sWindowText;
    Edit.GetWindowText(sWindowText); 
```

然而，该方法`GetWindowText`来自 ATL，并包含[`GetWindowTextLength`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633521%28v=vs.85%29.aspx)API [`GetWindowText`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520%28v=vs.85%29.aspx)。后面的 MSDN 文章也有一个代码片段，显示了典型用法。

既然你提到这`IsWindow`对你不起作用，最可能的问题是你的编辑控件包装类变量没有真正的控件句柄，因此从无到有获取文本是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-29T01:02:42.557

这已经用 MFC & VS2015 测试过：

```
//
// Get char string/CString from CEdit m_ceDate;
// where
// DDX_Control(pDX, IDC_EDIT_DATE, m_ceDate);

char cdateBuf[128];
UINT nCountOfCharacters = GetDlgItemText(IDC_EDIT_DATE, cdateBuf, 16);
CString csDate = cdateBuf; 
```

# jquery - jQuery Validate 插件不检查非日期

> ID：14575231
> 
> 赞同：1
> 
> 时间：2013-01-29T03:33:13.957
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery Validate 插件来验证表单日期。我已经为输入元素设置了规则，以根据需要和日期进行验证。尽管似乎正在触发的唯一规则是必需的，因为我可以将任何东西放入（文本、数字等）并且它通过验证。仅当输入字段为空白时，才会显示错误。

这是我的脚本：

```
 $(function() {
            $('#form1').validate({
                rules: {
                    entryDate: {
                        required: true,
                        date: true
                    }
                },
                messages: {
                    entryDate:{
                        required: "A Date is required",
                        date: "Please enter a valid date"
                    }
                }
            });
        }); 
```

它位于脚本标签内。

这是我的测试表格：

```
 <form action="" method="POST" id="form1">
            <input id="entryDate" name="entryDate" class="date" type="text" />
            <input type="submit" name="submit" id="submit" />
        </form> 
```

谁能指出我正确的方向？为什么非日期被接受？

我已将脚本包含在文件中（jQuery 和 Validate），并且都加载正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:21:08.200

> **引用 OP：** “为什么不接受非日期？”
> 
> **引用 OP 评论：** “作为测试输入，我尝试了 'abc' 和 '123' 这两个条目似乎都已通过验证。根据评论，这是日期验证的预期和正常行为吗？”

您的代码与您发布的完全一样，正在按预期工作。如您所见，`abc`并且`123`不通过验证*...*

[http://jsfiddle.net/zsCM3/](http://jsfiddle.net/zsCM3/)

`class="date"`当您已经`date: true`在`rules`选项中声明时，您也不需要使用 inline 。虽然这与问题无关，但演示在两种情况下都一样......

[http://jsfiddle.net/TWEXJ/](http://jsfiddle.net/TWEXJ/)

* * *

**编辑：**

确认在 Chrome (24.0.1312.52) 中，一个条目`123`确实通过了验证。我用 jQuery 1.8.3 和 1.9.0 都尝试了 jsFiddle。

# javascript - Javascript - 计算具有 id 的元素的值

> ID：14575232
> 
> 赞同：1
> 
> 时间：2013-01-29T03:33:23.560
> 
> 标签：javascript, calculated-field

我无法让我的 javascript 计算适用于购物车。

除了带有“price-”和“qty-”id 的那些之外，我的 HTML 部分还有许多其他输入元素。不知何故，我猜另一个输入元素弄乱了数组。样本：

```
<input type="hidden" id="price-1" value="10.50"/>
<input type="hidden" id="qty-1" value="1"/>
<input type="hidden" id="shipFee-1" value="4.00"/>
<input type="hidden" id="tax-1" value="0.70"/>

<input type="hidden" id="price-2" value="19.20"/>
<input type="hidden" id="qty-2" value="2"/>
<input type="hidden" id="shipFee-2" value="4.00"/>
<input type="hidden" id="tax-2" value="1.30"/> 
```

我希望它提醒（价格*数量）的总数为“48.9”。这是有问题的javascript部分：

```
var inputs=document.getElementsByTagName('input'),
    total = 0, 
    price = new Array(), 
    qty = new Array();

for (var i = 0 ; i < inputs.length ; i++) {
  if (inputs[i].id.indexOf('price-') == 0) {
    price[i] = parseFloat(document.getElementById(inputs[i].id).value);
    alert(price[i]); //alert result: 10.5 and 19.2
  }
  if (inputs[i].id.indexOf('qty-') == 0) {
    qty[i] = parseInt(document.getElementById(inputs[i].id).value);
    alert(qty[i]); //alert result: 1 and 2
  }
}

alert(price.length); //alert result: 5
alert(qty.length); //alert result: 6

for (i = 0 ; i < price.length ; i++) {
  total = total + price[i] * qty[i];
}
alert (total); //alert result: NaN 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:39:53.480

没关系，我在发布这个问题 10 分钟后找到了答案。我现在感觉自己像个白痴==;
我需要为数组使用新变量而不是“i”，因为它用于输入元素数组。

```
var inputs=document.getElementsByTagName('input'),
    total = 0, 
    price = new Array(), 
    qty = new Array(),
    j = 0, k = 0;

for (var i = 0 ; i < inputs.length ; i++) {
  if (inputs[i].id.indexOf('price-') == 0) {
    price[j] = parseFloat(document.getElementById(inputs[i].id).value);
    j++;
  }
  if (inputs[i].id.indexOf('qty-') == 0) {
    qty[k] = parseInt(document.getElementById(inputs[i].id).value);
    k++;
  }
}

for (i = 0 ; i < price.length ; i++) {
  total = total + price[i] * qty[i];
}
alert (total); //alert result: 48.9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:43:31.000

您正在基于“i”循环计数器构建价格数组。10.50 进入 price[0]，随之而来的 1 的数量被放入 qty[1]，然后 i 遍历值 2 和 3，而数组没有变化。然后当 i=4 时，price[4] 得到 19.20，然后 qty[5] 得到 2，然后下一次。

结果数组看起来像

```
price[0] = 10.5, price[4] = 19.20
qty[1] = 1, qty[5] = 2 
```

当您循环最后一次尝试等数学时，您实际上是在这样做：

```
// i = 0
total = total + price[0] * qty [0] // price[0] = 10.50, but qty[0] = undefined, so total = Nan

// i = 1
total = total + price[1] * qty [1] // price[1] = undefined, qty[1] 1, so total = Nan

// etc. 
```

说得通？

# facebook - Facebook 向朋友推荐一个页面

> ID：14575233
> 
> 赞同：2
> 
> 时间：2013-01-29T03:33:38.887
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在尝试在我的页面上添加一个 Facebook 选项卡，允许用户向他们的朋友推荐此页面（此功能以前存在，但 fb 似乎前一段时间已将其取消）

我知道如何获取朋友列表，但我不太确定应该使用什么机制向他们的朋友发送“建议”。Facebook[通知](https://developers.facebook.com/docs/howtos/notifications-api/)是要走的路吗？

还是有其他选择？

# ios - UITextField 丢失 firstResponder 恢复帧动画/修改

> ID：14575235
> 
> 赞同：3
> 
> 时间：2013-01-29T03:33:39.833
> 
> 标签：ios, ios6, nsanimation

我使用以下代码来修改框架大小以适应键盘出现/消失：

```
- (void)moveCodeViewForKeyboard:(NSNotification*)aNotification up:(BOOL)up {
    NSDictionary* userInfo = [aNotification userInfo];
    NSTimeInterval animationDuration;
    UIViewAnimationCurve animationCurve;
    CGRect keyboardEndFrame;

    [[userInfo objectForKey:UIKeyboardAnimationCurveUserInfoKey] getValue:&animationCurve];
    [[userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey] getValue:&animationDuration];
    [[userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] getValue:&keyboardEndFrame];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:animationDuration];
    [UIView setAnimationCurve:animationCurve];

    CGRect newFrame = codeView.frame;
    CGRect keyboardFrame = [self.view convertRect:keyboardEndFrame toView:nil];
    keyboardFrame.size.height += keyboardToolbar.frame.size.height;
    keyboardFrame.size.height += 10;
    newFrame.size.height -= keyboardFrame.size.height * (up?1:-1);
    codeView.frame = newFrame;

    [UIView commitAnimations];
} 
```

对于在显示/隐藏键盘时进行动画处理的其他一些子视图，重复此代码。

点击 UITextField 可使所有动画正确显示。但是，如果我随后立即点击 UITextView，之前动画的所有元素（UIToolbar、UITextView、UIWebView）都会恢复到它们的原始帧（位置和大小）并且将不再动画。如果我在 UITextField 为 firstResponder 时关闭键盘，则元素将返回到原始帧，但会再次设置动画。

很诡异...

只是因为我认为人们会问：

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    NSLog(@"textFieldDidEndEditing");
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:14:28.280

您的项目是否设置为使用`autolayout`？如果是这样，那么在您使用 Interface Builder 时会自动为您创建约束，并且仅仅更改组件的框架是不够的，您需要调整对这些组件的约束。您通常通过将约束链接到`IBOutlet`属性并修改`constant`它们的属性来做到这一点。

# java - java.lang.Object@19821f 在 Java 中是什么意思？

> ID：14575236
> 
> 赞同：2
> 
> 时间：2013-01-29T03:33:47.563
> 
> 标签：java

java.lang.Object@19821f 是什么意思？这是我尝试在没有任何赋值的情况下打印 Object 类型的变量时的输出。代码：

```
Object object = new Object();
System.out.println(object); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T03:40:16.247

实时调频，[`Object#toString`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)：

> 返回对象的字符串表示形式。通常，该 `toString`方法返回一个“以文本方式表示”该对象的字符串。结果应该是一个简洁但信息丰富的表示，易于人们阅读。建议所有子类重写此方法。
> 
> class的`toString`方法`Object`返回**一个字符串，该字符串由对象作为实例的类的名称、at 符号字符“@”和对象的哈希码的无符号十六进制表示形式组成**。换句话说，此方法返回一个等于以下值的字符串：
> 
> ```
>  getClass().getName() + '@' + Integer.toHexString(hashCode()) 
> ```

重要的是要注意，在幕后`System.out.println`调用`toString`其参数的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:35:36.537

这正是该`toString()`方法为该`Object`类型输出的内容。它（当前）指定为：

```
getClass().getName() + '@' + Integer.toHexString(hashCode()) 
```

因为`Object`是所有对象的超级类，它可以是*任何*类型的对象，所以期望派生对象将覆盖该`toString()`方法以提供更有用的表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:36:41.633

这是`Object.toString()`. 您甚至可以查看它的[源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Object.java#Object.toString%28%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T03:36:45.723

这是您刚刚实例化的对象的哈希码。println 方法只是调用 Objects 的 toString 方法。

# c++ - 一个递归函数，将一个链表的末尾附加到另一个链表的开头，并返回一个指向新列表开头的指针

> ID：14575240
> 
> 赞同：1
> 
> 时间：2013-01-29T03:34:33.467
> 
> 标签：c++, pointers, recursion, linked-list

我无法弄清楚如何让函数递归地返回新列表的“头”。它们附加得很好，但递归地我无法弄清楚如何“保存我的位置”可以这么说。

```
struct node {
    int value;
    node *next;
};

node* append(node *&L1, node *L2)
{
    if(L1->next == NULL) {
        L1->next = L2;
        return L1;
    }
    else if(L2 == NULL) 
       return L1;
    else 
       return append(L1->next, L2);
}
void main()
{
    node *a, *b, *c, *d;
    a=new node;
    b=new node;
    c=new node;
    d=new node;
    a->value = 4;
    a->next = b;
    b->next = NULL;
    b->value = 7;
    c->next = d;
    c->value = 12;
    d->next = NULL;
    d->value = 8;
    append(a,c);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:03:21.053

递归函数几乎总是有两个组成部分：基本情况和递归情况。因此，您必须首先考虑您的要求是什么？

例如，假设你有两个链表：listA & listB：

1.  *基本情况*：当 listA 没有更多元素时，停止
2.  *递归案例*：分离 listA 的最后一个元素，将其附加到 listB 的开头。再次递归调用函数

从上面的伪代码你应该有足够的东西开始编程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:17:50.510

```
node* append(node *&L1, node *L2)
{
   if (L1 == NULL)
       L1 = L2;
   else if (L1->next != NULL)
       append(L1->next, L2);
   else
       L1->next = L2;

   // Return the head node of the linked list
   return L1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T04:41:24.493

除其他事项外，您需要考虑 L1 在开始时为 NULL。值得庆幸的是，考虑到它也考虑了实际的附加。

```
node *append(node *&L1, node* L2)
{
    if (!L1)
        L1 = L2;
    else
        append(L1->next, L2);
    return L1;
} 
```

* * *

**这个怎么运作**

小事例`(L1 = NULL, L2 = <anything>>)`

1.  输入函数；`L1 = NULL`和`L2 = <<anything>>`
2.  `if(!L1)`很满意。我们分配`L2`给`L1`，然后返回`L1`。

普通案例：`(L1 != NULL, L2 = <anything>>)`

1.  输入函数；`L1 != NULL, L2 = <anything>>`
2.  *不满足*，递归，`if(!L1)`发送*`L1->next, L2`*
**   继续递归，直到`L1`为 NULL（这将是`next`列表中的最后一个，因此是结尾），然后将 L2 分配给该`L1`指针（这又是最后一个`next`）。*   始终为结果返回 L1。递归的最终退出将返回列表的头部。*

# silverlight - Silverlight“Ctrl + Enter”键处理程序兼容性

> ID：14575242
> 
> 赞同：2
> 
> 时间：2013-01-29T03:34:53.287
> 
> 标签：silverlight, internet-explorer, browser, cross-browser, keyboard-shortcuts

我们计划在整个应用程序中使用“Ctrl + Enter”的组合键在网格中生成新行。这个组合键似乎没有保留，但我们只是想知道是否有人知道在我们投入生产之前这会出现问题的任何浏览器？

提前致谢。瑞安。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T13:08:41.497

这取决于您是否对移动设备感兴趣。我怀疑无论浏览器如何，在触摸屏上组合可能有点棘手。除此之外，我相信这将是一个有效的键盘组合。

安迪。

# c++ - 在没有字符串或数组函数的情况下迭代文本

> ID：14575252
> 
> 赞同：0
> 
> 时间：2013-01-29T03:35:58.473
> 
> 标签：c++, for-loop, iteration

首先这是一个家庭作业：

我需要仅使用 for 循环来遍历一段文本以查找文本的长度。我们不允许使用字符串函数或数组函数。

我对如何做到这一点一无所知。

谁能提供一个基本的例子？我在这里和 cplusplus.com 论坛上看到了几个关于如何执行此操作的示例，但没有一个用于循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:38:34.963

这样的事情会做：

```
char str[256] = "some text here";
int length = 0;
int i = 0;
char c;
for(c = str[i]; c != '\0'; ++i)
{
   length++;
} 
```

但是请..不要使用堆栈溢出作为做作业的捷径。您仍然需要花时间学习所有编程基础知识。如果您遇到非常具体的问题，请仅在此处询问

# php - 编写文本文件 php

> ID：14575253
> 
> 赞同：8
> 
> 时间：2013-01-29T03:36:02.227
> 
> 标签：php

我正在使用 php。

我想编写一个 php 页面来从另一个页面获取参数并写入文件文本。和：

*   如果已经有文件文本，则写入新行

*   每天创建一个文件文本

例子：

注册.php

```
<body>
    <form action='process.php' method='GET'>
        Name: <input type='text' name='name'/>
        <br/>
        Age: <input type='text' name='age'/>
        <br/>
        <input type='submit' value='SUBMIT'/>
    </form>
</body> 
```

进程.php

```
$name = $_GET['name'];
$age = $_GET['age'];

$file_handle = fopen("testFile.txt", "w");
$file_contents = "name:" . $name . "age:" . $age;

fwrite($file_handle, $file_contents);
fclose($file_handle);
print "file created and written to"; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T03:49:02.840

使用 file_get_contents() 和 file_put_contents() 函数。

**例子：**

```
 $file = 'output.txt';
    $buffer = 'my new line here';

    if (file_exists($file)) {
            $buffer = file_get_contents($file) . "\n" . $buffer;
    }

    $success = file_put_contents($file, $buffer); 
```

[http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T04:22:13.923

如果你想为每天创建新文件，你可以创建带有当前日期的 txt 文件`date('d-m-Y').".txt"`。这样您就可以轻松地按日期识别文件。

试试下面的代码，我对代码做了一些更改并进行了测试。

```
<?php

$dateFile = date('d-m-Y').".txt";

$dataString = "name:" . $name . "age:" . $age."\n";
$fWrite = fopen($dateFile,"a");
$wrote = fwrite($fWrite, $dataString);
fclose($fWrite);
print "file created and written to";

?> 
```

如果文件已经创建，以便您可以将新记录存储在新行中`"\n"`，\n 必须在 "" quatoed 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T03:38:55.267

来自[fopen 文档](http://php.net/manual/en/function.fopen.php)：

写：

> w 仅供写作；**将文件指针放在文件的开头并将文件截断为零长度。**如果该文件不存在，请尝试创建它。

附加：

> a 只供写作；**将文件指针放在文件末尾。**如果该文件不存在，请尝试创建它。

所以你想追加，而不是写。

如果文件不存在，它将尝试创建它。因此，只需为文件指定一个随时间变化的唯一名称。有关示例，请参见[日期](http://php.net/manual/en/function.date.php)文档。

```
$filename = date("m.d.y"); // 03.10.01 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-04T07:20:42.377

[file_write_php](http://php.about.com/od/advancedphp/ss/file_write_php.htm)

```
 <?php
     $File = "YourFile.txt"; 
     $Handle = fopen($File, 'w');
     $Data = "Jane Doe\n".PHP_EOL;; 
     fwrite($Handle, $Data); 
     $Data = "Bilbo Jones\n"; 
     fwrite($Handle, $Data); 
     print "Data Written"; 
     fclose($Handle); 
   ?> 
```

以上是在 php 中执行此操作的简单示例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T03:39:38.343

我没有写很多 php，但是如果你在 fopen() 中将“w”替换为“w+”，它会打开文件并在文件已经存在时将指针放在文件末尾，从而使任何 fwrite( ) 调用追加到文件。

```
$file_handle = fopen("testFile.txt", "w+"); 
```

[http://php.net/manual/en/function.fopen.php](http://php.net/manual/en/function.fopen.php)

**编辑：**看到 sachleen 的回答，是的，您可以将日期（截止日期）与文件名结合起来。这样在新的一天将为该天创建一个新文件，如果该文件在该天存在，它将被附加到。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-29T04:39:09.340

谢谢。[我用这个http://www.redips.net/php/write-to-log-file/](http://www.redips.net/php/write-to-log-file/)解决了这个问题

# ruby-on-rails - Rails 尝试创建嵌套路由

> ID：14575266
> 
> 赞同：1
> 
> 时间：2013-01-29T03:36:55.480
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, routing

好的，我正在拍摄有这样的网址`/applications/:application_id/jobseekers/new`。我知道如果我生成 2 个脚手架（应用程序和求职者），我可以通过这样做使路线工作：

```
resources :applications do
  resources :jobseekers
end 
```

但我不需要为求职者提供完整的脚手架。我只需要一个新的和创建方法。

我怎样才能编写我的路线，以便 jobseekers#new 和 jobseekers#create 方法工作？

我试过

```
resources :applications do 
    get '/applications/:application_id/jobseekers/new', :to => 'jobseekers#new', :as => :new_application_jobseeker
    post '/applications/:application_id/jobseekers', :to => 'jobseekers#create'
  end 
```

但它给了我这个错误：

```
No route matches [GET] "/applications/3/jobseekers/new" 
```

点击此网址时：

```
localhost:3000/applications/3/jobseekers/new 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T03:48:44.170

您可以指定所需的操作，如下所示：

```
resources :applications do
  resources :jobseekers, :only=> [:new, :create]
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T04:00:40.400

您的路线中的问题是您在嵌套路线中包含完整路径*（*`'/applications/:application_id/jobseekers/new'`）。相反，您需要将您的和调用放入一个成员块中：*`get``post`*

 *```
resources :applications do
  member do
    get "jobseekers/new", :to => 'jobseekers#new'
    post "jobseekers", :to => 'jobseekers#create'
  end
end 
```

通过这样做，Rails 将匹配`/applications/:id/`部分将被添加到`"jobseekers/new"`获取完整路线，如果您调用，您可以看到`rake routes`：

```
new_application_jobseeker_application GET    /applications/:id/jobseekers/new(.:format) jobseekers#new
               jobseekers_application POST   /applications/:id/jobseekers(.:format)     jobseekers#create 
```

或者，您可以定义一个嵌套资源并仅包含带有选项的`new`和`create`操作：`only`

```
resources :applications do
  resources :jobseekers, :only=> [:new, :create]
end 
```

请注意，在这种情况下，路径助手会略有不同，并且将使用`application_id`而不是`id`应用程序的 id：

```
 application_jobseekers POST   /applications/:application_id/jobseekers(.:format)     jobseekers#create
new_application_jobseeker GET    /applications/:application_id/jobseekers/new(.:format) jobseekers#new 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T03:39:26.043

只需手动创建带有迁移的表、模型和控制器，然后只添加您想要的方法。

```
rails g model jobseekers 
```

等等*

# ocaml - 从网络摄像头捕获图像

> ID：14575270
> 
> 赞同：5
> 
> 时间：2013-01-29T03:37:25.140
> 
> 标签：ocaml

我正在尝试学习 ocaml，我想从网络摄像头获取图像。我正在阅读[OCaml 中的 Unix 系统编程](http://ocamlunix.forge.ocamlcore.org/ocamlunix.html)

如何在 Linux 操作系统上从我的网络摄像头获取图片？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T03:47:16.633

在 Linux 上，您可以使用[V4L2](http://en.wikipedia.org/wiki/Video4Linux) - Linux 的视频捕获应用程序编程接口。支持许多 USB 网络摄像头、电视调谐器和其他设备。Video4Linux 与 Linux 内核紧密集成。

看一些简单的例子（用 C 编程语言）：

*   [一](http://web.archive.org/web/20110707012738/http://alumnos.elo.utfsm.cl/~yanez/video-for-linux-2-sample-programs/)
*   [二](http://linuxtv.org/downloads/v4l-dvb-apis/capture-example.html)

您可以`ioctl`在 OCaml 程序中使用 linux 系统调用。看看这个模块：

1.  libextunix-ocaml-dev
2.  [抗酸药](http://pleac.sourceforge.net/pleac_ocaml/index.html)

# javascript - Python Selenium WebDriver JavaScript 表迭代

> ID：14575271
> 
> 赞同：1
> 
> 时间：2013-01-29T03:37:25.893
> 
> 标签：javascript, python, selenium, selenium-webdriver, beautifulsoup

我玩 Beautiful Soup 已经有一段时间了，它在减去 javascript 限制后效果很好。我正在尝试使用 Selenium 来弥补我工具箱中的差距。我要抓取的网站是[http://www.5dimes.eu/livelines/livelines.aspx](http://www.5dimes.eu/livelines/livelines.aspx)

**我应该提到我在 Windows 中并且无法让 QTWebKit 工作，我被告知这也是一种选择。

该站点要求您单击复选框才能预览表格。一旦我能够让表格进行预览，我就认为我很清楚，但遗憾的是没有。

我试着用

```
driver = webdriver.Chrome()
page = driver.get("http://www.5dimes.eu/livelines/livelines.aspx")
driver.find_element_by_xpath("//*[@id='l_26']").click()
html_source = driver.page_source 
```

并且能够让页面实际上单击一个链接，但 html_source 没有表格数据。

在测试中出现了几个问题。

1.  xpath id 每天都会根据发布的内容数量而变化。一天是 26，第二天是 27，等等。是否有另一种方法可以通过类或文本名称导航到此复选框？

2.  显示表格后，如何提取这些数据？

我在课程信息中注意到它提到了一个“隐藏”属性

```
<div id="divLoading" style="width: 100%; text-align: center;" class="Hidden">
        <img id="imgLoading" src="images/scanning.gif">
    </div> 
```

这可能是问题的根源吗？任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:51:13.237

尝试这样的事情

```
 L= find_elements(By.XPATH,"//div[@id='divl_25']/table/tbody/tr/td[1]"); 
```

它将返回包含相同定位器的 WebElements 列表。（即，表内容的第一个 td）

要获取第二个 td 内容，您需要将 td 索引更改为两个。

```
 L= find_elements(By.XPATH,"//div[@id='divl_25']/table/tbody/tr/td[2]"); 
```

上面的行将为您提供每行中的所有第二个 td 。

在获取 WebElements 列表后，循环迭代该列表并从每个元素中获取文本。这样就可以得到整个表的数据。

```
for ele in L:
        print ele.text; 
```

我希望这对你有用。

PS：我对 python、selenium-python 绑定不太了解。

# jquery - 单击时更改另一个元素的类

> ID：14575280
> 
> 赞同：0
> 
> 时间：2013-01-29T03:38:55.177
> 
> 标签：jquery, wordpress

我真的坚持这一点。我试图在单击事件后将容器的背景图像更改为另一个。我的代码在 jsfiddle 中运行良好，但无法在 Wordpress 上运行。

我认为这可能是因为 PHP 但我在没有它的情况下进行了测试（使用确切的 jsfiddle 代码）无济于事。如果有人可以帮助指出为什么那会很棒。

[这是 JSfiddle 上的代码](http://jsfiddle.net/wuHrJ/6/)

这是我在我的网站中使用的代码

HTML 片段位于 single-work.php 中：

```
<ul class="boom_boom_selector">
<?php 
  $images = get_custom_field('work_showcase:to_array', 'get_post'); 
  foreach($images as $img) {
?>
  <li class="boom_selector"><?php echo $img['post_content']; ?></li>
<?php  
  }
?>
</ul>

<div id="work_showcase" class="work_showcase">
</div> <!-- #work_showcase --> 
```

header.php 中的 JQuery：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

$('.boom_selector').click(function(){
   $('#work_showcase').attr('class', $(this).text()); 
});
</script> 
```

CSS也在header.php中：

```
<?php
    $bg_color = get_custom_field('bg_work');
    $splash = get_custom_field('work_splash');
    ?>

        <?php /* prints .extra, .web, .print */
        $images = get_custom_field('work_showcase:to_array', 'get_post'); 
        foreach($images as $img) {
        ?>
    .<?php echo $img['post_content']; ?> {
        background-image: url("<?php echo $img[guid];?>");
    }
        <?php  
        }
        ?>

    ul.boom_boom_selector li {
        background-image: url(<?php echo $selector ?>); 
    }

    .work_showcase {
    background-image: url(<?php echo $splash ?>);
}

    </style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:43:38.083

该脚本需要在 DOM 准备好后运行，因此您需要`document`像这样将代码准备好

```
$(document).ready(function(){
   // Do something with the DOM
   $('.boom_selector').click(function(){
     $('#work_showcase').attr('class', $(this).text()); 
   });
}); 
```

或使用较短的版本

```
(function(){
  // Do something...    
}); 
```

# android - 向android应用程序添加方法

> ID：14575282
> 
> 赞同：-1
> 
> 时间：2013-01-29T03:39:08.997
> 
> 标签：android

我是 android 和 Java 的新手，这个问题可能看起来有点幼稚，我正在尝试编写一个名为 getDispalay() 的方法，这将是一个没有回报的公众。我将打印一条消息，说明我在 getDisplay 方法中。在java中很简单，会在main方法中调用，但是我不知道如何在activity类中使用main方法？我的意思是如何编写一个方法并在需要时调用它？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:38:51.820

浏览这篇[**文章**](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

正如您在 java 中所说，我们在 main 方法中调用该函数。

在android中，如果java类**扩展了** **activity ，你可以在activity的****任何生命周期事件中**调用方法 ，这取决于你的需要。例如，如果您想在进入活动时调用方法，请遵循此

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main)//To set up ui for activity

    getDispalay();
}

public void getDispalay(){
 //your actions
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:58:19.217

您真正需要做的是[了解活动生命周期](http://developer.android.com/training/basics/activity-lifecycle/starting.html)：

![在此处输入图像描述](../Images/71eb98cc4de3e49c53a8255b3f4a1075.png)

一旦你通读了这些，你就会知道你的 Android 应用程序是如何运行的，以及它过渡的状态和阶段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:00:23.007

您应该阅读有关[Activity Lifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)的文档。该`onCreate()`方法将与`main()`.

# css - 如何将纯 html 标签的样式定义为与另一个定义的样式相同？

> ID：14575283
> 
> 赞同：0
> 
> 时间：2013-01-29T03:39:14.003
> 
> 标签：css

说如果你已经有

```
.s1 {
    ....
 } 
```

在你的 .css 文件上

你能定义默认值吗

从 .css 文件本身继承 .s1 的样式？

谢谢纳林

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T03:41:31.383

您可以用逗号分隔 css，例如：

```
.style, input, div, .style2{
    background:#fff;
} 
```

# jquery - 获取 HTTP 状态 405 - 不支持请求方法“POST”

> ID：14575286
> 
> 赞同：1
> 
> 时间：2013-01-29T03:39:52.397
> 
> 标签：jquery, spring, jsp

这是我的表格

```
<form id="profileChangeInput" action="" method="post">
    <table border="0">
       <tbody>
        <tr>
            <td class="profile_input_txt"     align="right">First&    nbsp;Name:</td>
            <td><input type="text" id="fname"
                name="j_firstname" value=""
                class="profile_input_box_fname"></td>
        </tr>

        <tr>
            <td class="profile_input_txt" align="right">Last&nbsp;Name:</td>
            <td><input type="text" id="lname" name="j_lastname"
                value="" class="profile_input_box_lname"></td>
        </tr>
        <tr>
            <td class="profile_input_txt" align="right">ZIP&nbsp;Code:</td>
            <td><input type="text" id="zip" name="j_zipcode"
                value="" class="profile_input_box_zipcode"></td>
        </tr>

        <tr>
            <td class="profile_input_txt" align="right">Phone&nbsp;#:</td>
            <td><input type="text" id="phonenum"
                name="j_phonenum" value=""
                class="profile_input_box_phonenum"></td>
        </tr>
        <tr>
            <td class="profile_input_txt" align="right">Year&nbsp;of&nbsp;Birth:</td>
            <td><select id="selYOB">
                    <option value=""></option>
                    <option value="1950">1950</option>
                    <option value="1951">1951</option>
                    <option value="1952">1952</option>

                    <option value="2011">2011</option>
                    <option value="2012">2012</option>
            </select></td>
            <td class="profile_input_txt" align="right">Gender:</td>
            <td><select id="gender">
                    <option value=""></option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
            </select></td>
        </tr>
        <tr>
            <td class="profile_input_txt" align="right">Email&nbsp;Address:</td>
            <td><input type="text" id="email" name="j_email"
                value="" class="profile_input_box_email"></td>
        </tr>

        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td><input class="profile_btn" id="save_button"
                type="submit" value="SAVE CHANGES"></td>
        </tr>
</table> 
```

这就是我试图将它路由到控制器的方式

```
$.post('profileChange.do', $('#profileChangeInput').serialize(), function(data) {
      alert('inside post:changes saved'); 
```

这是弹簧控制器

```
@Controller
@RequestMapping("/profileChange.do")
public class ProfileController {

@RequestMapping(method = RequestMethod.GET)
public String showProfile(@RequestParam(required=false) String rfky,Map model,HttpSession session){
    ProfileInputDTO profileInputDTO = new ProfileInputDTO();
    model.put("profileInputDTO", profileInputDTO);
    System.out.println("in showprofile method");
    return "myProfile";
}

@RequestMapping(method=RequestMethod.POST)
public @ResponseBody String ProcessProfileChange(ProfileInputDTO profileInputDTO,
        BindingResult result,HttpSession session)throws Exception{
    DataConverter dc = DataConverterUtil.getDefaultConverter();
    WSOutputDTO output = ProcessProfileChange(profileInputDTO, session);

    List<String> errors = output.errors;
    if (errors == null) {
        System.out.println("in success loop");
        return "success";
    } else {
        String errorsStr = "";
        for (String error : errors) {
            errorsStr += error + "\n";
        }
        System.out.println("in errir loop");
        return errorsStr;
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:06:46.903

看起来您正在尝试提交 ajax，如果是这样，请将您的更改`ProfileInputDTO profileInputDTO`为`@RequestBody ProfileInputDTO profileInputDTO`并删除`BindingResult result`

# android - 更高 API 上的 NetworkOnMainThreadException

> ID：14575293
> 
> 赞同：2
> 
> 时间：2013-01-29T03:40:30.843
> 
> 标签：android, android-fragments, nullpointerexception

只有当我在更高的 API 上调试时，我才会关闭脚本强制：16，但是当涉及到 API 时它工作正常：10。这可能是我的项目设置问题吗？

这是对服务器的简单请求，以获取片段中的类别列表。

画廊.java

```
public class gallery extends Fragment {

    JSONArray jArray;
    String result = null;
    InputStream is = null;
    StringBuilder sb = null;
    private ListView storeList;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        View myFragmentView = inflater.inflate(R.layout.tab_frag1_layout,
                container, false);
        storeList = (ListView) inflater.inflate(R.layout.list, null);
        return myFragmentView;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        // http post
        try {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(
                    "http://xxx.xxx.xxx/android_link.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection" + e.toString());
        }
        // convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");

            String line = "0";
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }
        // paring data
        int ct_id;
        String ct_name;
        try {
            jArray = new JSONArray(result);
            JSONObject json_data = null;
            for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                ct_id = json_data.getInt("brand_id");
                ct_name = json_data.getString("series_name");

            }
        } catch (JSONException e1) {
            Toast.makeText(getActivity(), "No Data Found", Toast.LENGTH_LONG)
                    .show();
        } catch (ParseException e1) {
            e1.printStackTrace();
        }
    } 
```

日志.txt

```
01-29 03:25:54.653: E/log_tag(4324): Error in http connectionandroid.os.NetworkOnMainThreadException
01-29 03:25:54.653: E/log_tag(4324): Error converting result java.lang.NullPointerException
01-29 03:25:54.653: W/dalvikvm(4324): threadid=1: thread exiting with uncaught exception (group=0xb5e98288)
01-29 03:25:54.653: E/AndroidRuntime(4324): FATAL EXCEPTION: main
01-29 03:25:54.653: E/AndroidRuntime(4324): java.lang.NullPointerException
01-29 03:25:54.653: E/AndroidRuntime(4324):     at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at org.json.JSONTokener.nextValue(JSONTokener.java:94)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at org.json.JSONArray.<init>(JSONArray.java:87)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at org.json.JSONArray.<init>(JSONArray.java:103)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at com.nazartt.angtrading.gallery.onActivityCreated(gallery.java:93)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:891)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at android.os.Handler.handleCallback(Handler.java:615)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at android.os.Looper.loop(Looper.java:137)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at java.lang.reflect.Method.invoke(Method.java:511)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-29 03:25:54.653: E/AndroidRuntime(4324):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:52:00.830

[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)如果您尝试在主 (UI) 线程 ( [`StrictMode`](http://developer.android.com/reference/android/os/StrictMode.html))上进行网络操作，则会在新版本的 Android (3.0+) 上发生这种情况。使用 an[`AsyncTask`](http://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)进行网络操作，设置简单，并以合乎逻辑的方式操作（在后台执行某些操作，完成后发布到 UI 线程）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:05:36.857

试试这个，使用`AsyncTask`方法它会解决你的问题..

```
protected class GetTask extends AsyncTask<Void, Void, Integer> {

protected void onPreExecute() {
ProgressDialog  mProgressDialog = ProgressDialog.show(MainActivity.this,
            "", "Finding cars");
}

@Override
protected Integer doInBackground(Void... params) {
    // TODO Auto-generated method stub
    //Do your stuff

    return 0;
}

protected void onPostExecute(Integer result) {
    super.onPostExecute(result);

    if (mProgressDialog.isShowing()) {
        mProgressDialog.dismiss();
    }

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:34:32.470

以防有人陷入这种境地。我决定发布我的工作代码

```
public class gallery extends Fragment {

    JSONArray jArray;
    String result = null;
    InputStream is = null;
    StringBuilder sb = null;
    private ListView storeList;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        View myFragmentView = inflater.inflate(R.layout.tab_frag1_layout,
                container, false);
        storeList = (ListView) inflater.inflate(R.layout.list, null);
        return myFragmentView;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onActivityCreated(savedInstanceState);

        new task().execute();

    }

    class task extends AsyncTask<String, String, Void> {
        private ProgressDialog progressDialog = new ProgressDialog(getActivity());
        InputStream is = null;
        String result = "";

        protected void onPreExecute() {
            progressDialog.setMessage("Download data...");
            progressDialog.show();
        }

        @Override
        protected Void doInBackground(String... params) {
            String url_select = "http://xxxxxxxxxxxx/android_link.php";

            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url_select);

            ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();

            try {
                httpPost.setEntity(new UrlEncodedFormEntity(param));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();

                // read content
                is = httpEntity.getContent();

            } catch (Exception e) {

                Log.e("log_tag", "Error in http connection " + e.toString());
            }
            try {
                BufferedReader br = new BufferedReader(
                        new InputStreamReader(is));
                StringBuilder sb = new StringBuilder();
                String line = "";
                while ((line = br.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();

            } catch (Exception e) {
                // TODO: handle exception
                Log.e("log_tag", "Error converting result " + e.toString());
            }

            return null;

        }

        protected void onPostExecute(Void v) {

            // ambil data dari Json database
            try {
                JSONArray Jarray = new JSONArray(result);
                for (int i = 0; i < Jarray.length(); i++) {
                    JSONObject Jasonobject = null;
                    Jasonobject = Jarray.getJSONObject(i);

                    // get an output on the screen
                    String bid = Jasonobject.getString("brand_id");
                    String sname = Jasonobject.getString("series_name");

                }
                this.progressDialog.dismiss();

            } catch (Exception e) {
                // TODO: handle exception
                Log.e("log_tag", "Error parsing data " + e.toString());
            }
        }
    }
} 
```

# java - 大 O 表示法 O(NM) 或 (N^2)

> ID：14575304
> 
> 赞同：4
> 
> 时间：2013-01-29T03:42:10.327
> 
> 标签：java, loops, for-loop, big-o

我被告知下面的代码是 = O(MN) 但是，我想出了 O(N^2)。哪个是正确答案，为什么？

我的思考过程：嵌套 for 循环加上 if 语句 --> (O(N^2)+O(1)) + (O(N^2)+O(1)) = O(N^2)

谢谢

```
public static void zeroOut(int[][] matrix) { 
    int[] row = new int[matrix.length];
    int[] column = new int[matrix[0].length];
// Store the row and column index with value 0 
 for (int i = 0; i < matrix.length; i++)
   {
    for (int j = 0; j < matrix[0].length;j++) { 
       if (matrix[i][j] == 0) 
          {
            row[i] = 1;
            column[j] = 1; 
          }
   } 
  }
// Set arr[i][j] to 0 if either row i or column j has a 0 
for (int i = 0; i < matrix.length; i++)
 {
   for (int j = 0; j < matrix[0].length; j++)
      { 
        if ((row[i] == 1 || column[j] == 1)){
              matrix[i][j] = 0; 
           }
      } 
  }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T03:45:30.940

M 和 N 指的是什么？我的假设是它分别指的是“行”和“列”。如果是这样，那么等式就是 O(MN)，因为你循环了 M 次 N 次。

如果行和列相等，O(N^2) 将是正确的。

# c++ - C++ 的 atoi 是如何工作的？

> ID：14575307
> 
> 赞同：-3
> 
> 时间：2013-01-29T03:42:27.637
> 
> 标签：c++, atoi

所以我有以下代码：

```
void Start(int &year, string &mon, char &nyd)
{
    printf("%s", mon);
    int month= atoi(mon.c_str());
    printf("%i", month);
} 
```

当传入参数为“03”（第一个 printf 显示 03）时，我得到 0 表示月份。

但是，如果我添加这一行

```
mon = "03"; 
```

我得到了 3 个月，这是正确的。

为什么......？？？？

**编辑：我想通了。你们是对的。不要使用 scanf 进行字符串输入。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:47:51.063

你不能`%s`在 printf 函数中打印 std::string ，试试这个：

```
void Start(int &year, const std::string &mon, char &nyd)
{
    std::cout << mon << std::endl;
    int month= atoi(mon.c_str());
    std::cout << month << std::endl;
} 
```

或者

```
void Start(int &year, string &mon, char &nyd)
{
    printf("%s\n", mon.c_str());
    int month= atoi(mon.c_str());
    printf("%i\n", month);
} 
```

但 std::cout 优于 C printf 函数。

也不要将 scanf 与 std::string 一起使用，使用 std::cin 代替 scanf，使用 std::cout 代替 printf。

# java - Google 引擎应用 + 电子邮件 API：来自不同域的用户不受信任？

> ID：14575309
> 
> 赞同：2
> 
> 时间：2013-01-29T03:42:49.643
> 
> 标签：java, security, google-app-engine, google-api-java-client

我们在**.com**域上运行 GAE 应用程序，大多数客户的用户都有谷歌帐户。我们的 GAE 应用有时会代表用户发送电子邮件。

我们发现无法为我们的**.co.uk**用户发送电子邮件（应用程序会静默发送电子邮件，但从未发送过......）。

自然会发生这种情况，因为 .com 域确实在 Google Apps > 高级工具 > DKIM 中打开了 DKIM。

有没有其他方法可以通过谷歌电子邮件 API 为我们的所有用户（来自各个域）发送电子邮件？用户通过 google OAuth2 机制授权。

# java - 带有 Comparator ClassCast 异常的 SortedMap

> ID：14575312
> 
> 赞同：3
> 
> 时间：2013-01-29T03:43:08.400
> 
> 标签：java, sorting, map, sortedmap

为什么在覆盖的比较方法中在 (Person p2 = (Person) o2;) 处出现 ClassCastException。:(

实际上，比较覆盖方法中的值不是 Person Object，而是以“Jim”和“Jack”（键值）的形式出现。所以 Cast Cast Exception 。但是为什么它带有键而不是值，即 Person 对象，为什么它只适用于键。有没有其他方法可以根据值对其进行排序。

如果错了请纠正我

1) 我们可以在 TreeMap 中传递比较器对象，它会相应地对其进行排序。？

2）总是在 Keys 上执行排序。?

3）我们如何在不使用集合对象的情况下对 Map 的值进行排序（是否可能），为什么默认不支持？

公共类 HashTableExamples {

```
/**
 * @param args
 */
public static void main(String[] args) {

    SortedMap persorSorted = new TreeMap(new Comparator() {

        @Override 
        public int compare(Object o1, Object o2) {
            Person p2 = (Person) o2;
            return 2;
        }
    });

    Person p = new Person(10);
    Person p1 = new Person(20);
    persorSorted.put("Jim", p);
    persorSorted.put("Jack", p1);
    Iterator sortedit = persorSorted.entrySet().iterator();
    while (sortedit.hasNext()) {
        Map.Entry pairs = (Map.Entry) sortedit.next();
        Person pw = (Person) pairs.getValue();
        System.out.println("From SortedMap : " + pw.getAge());
    }
}

public static class Person {
    Person(int agevalue) {
        this.age = agevalue;
    }

    private int age;

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:46:45.113

如果您查看[TreeMap 的文档，](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#TreeMap%28java.util.Comparator%29)您会看到它说：

> 构造一个新的空树映射，根据给定的比较器排序。插入到映射中的所有键必须通过给定的比较器相互比较：comparator.compare(k1, k2) 不能为映射中的任何键 k1 和 k2 抛出 ClassCastException。如果用户试图将违反此约束的键放入映射中，则 put(Object key, Object value) 调用将抛出 ClassCastException。

这里的要点是它正在比较**keys**，但是您将 key （即： a `String`）转换为 a `Person`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:47:53.610

是的，`TreeMap`总是按键排序。

至于为什么它不是“默认支持” - 这是因为通常不存在有效支持它的数据结构。它在*任何*编程语言中都没有得到有效支持，因为 a`Map`的目的是能够通过键查找内容，而按值排序意味着您*无法*以一种高效的方式来组织数据键。

如果您必须`Map`按值对 a 的条目进行排序，则可以使用以下内容：

```
List<Map.Entry<Foo, Bar>> entryList = 
  new ArrayList<Map.Entry<Foo, Bar>>(map.entrySet());
Collections.sort(entryList, new Comparator<Map.Entry<Foo, Bar>>() {
  public int compare(Map.Entry<Foo, Bar> entry1, Map.Entry<Foo, Bar> entry2) {
    return entry1.getValue().compareTo(entry2.getValue());
  }
}); 
```

或者，如果您愿意，如果您不控制值类型的实现，则可以使用替代比较器来比较值。

# sql - 在子查询中获取第一行的 Oracle 性能问题

> ID：14575322
> 
> 赞同：0
> 
> 时间：2013-01-29T03:44:46.100
> 
> 标签：sql, oracle, oracle10g, subquery

我在以下（示例）选择语句中遇到性能问题，该语句使用子查询返回第一行：

```
SELECT ITEM_NUMBER,
       PROJECT_NUMBER,       
       NVL((SELECT DISTINCT
                   FIRST_VALUE(L.LOCATION) OVER (ORDER BY L.SORT1, L.SORT2 DESC) LOCATION
            FROM   LOCATIONS L
            WHERE  L.ITEM_NUMBER=P.ITEM_NUMBER
                   AND L.PROJECT_NUMBER=P.PROJECT_NUMBER
           ),
          P.PROJECT_NUMBER) LOCATION
FROM   PROJECT P 
```

通过执行 a and`DISTINCT`导致性能问题，但我无法找到替代方案。`SORT``UNIQUE`

但是，我更喜欢类似于以下内容的内容，但在 2 个 select 语句中引用不起作用：

```
SELECT ITEM_NUMBER,
       PROJECT_NUMBER,       
       NVL((SELECT LOCATION
            FROM   (SELECT L.LOCATION LOCATION
                           ROWNUM RN
                    FROM   LOCATIONS L
                    WHERE  L.ITEM_NUMBER=P.ITEM_NUMBER
                           AND L.PROJECT_NUMBER=P.PROJECT_NUMBER
                    ORDER BY L.SORT1, L.SORT2 DESC
                   ) R
            WHERE RN <=1
           ), P.PROJECT_NUMBER) LOCATION
FROM   PROJECT P 
```

另外： - 我的权限不允许我创建函数。- 我在主查询中循环浏览 10k 到 100k 条记录。- 子查询在限制为 1 行之前可以返回 3 到 7 行。

感谢您对提高性能的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T05:57:57.747

没有样本数据和基数很难理解，但这能得到你想要的吗？一个唯一的项目和项目列表，第一次出现位置？

```
SELECT 
P.ITEM_NUMBER,
P.PROJECT_NUMBER,       
MIN(L.LOCATION) KEEP (DENSE_RANK FIRST ORDER BY L.SORT1, L.SORT2 DESC) LOCATION
FROM   
LOCATIONS L
INNER JOIN
PROJECT P
ON L.ITEM_NUMBER=P.ITEM_NUMBER
AND L.PROJECT_NUMBER=P.PROJECT_NUMBER
GROUP BY
P.ITEM_NUMBER,
P.PROJECT_NUMBER 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T03:47:54.510

我过去遇到过类似的问题——虽然这不是最终的解决方案（实际上可能只是走捷径）——可以使用 OPTIMIZER_MODE init 参数调整 Oracle 查询优化器。

[查看http://docs.oracle.com/cd/B28359_01/server.111/b28274/optimops.htm#i38318](http://docs.oracle.com/cd/B28359_01/server.111/b28274/optimops.htm#i38318)上的第 11.2.1 章

> FIRST_ROWS
> 
> 优化器使用成本和启发式的组合来找到快速交付前几行的最佳计划。注意：使用启发式有时会导致查询优化器生成一个成本明显大于未应用启发式的计划成本的计划。FIRST_ROWS 可用于向后兼容和计划稳定性；请改用 FIRST_ROWS_n。

当然还有很多其他因素你应该分析，比如你的索引、连接效率、查询计划等等。

# jquery - Displaying ajax results from yahoo finance using underscore.js

> ID：14575323
> 
> 赞同：0
> 
> 时间：2013-01-29T03:44:53.090
> 
> 标签：jquery, ajax, underscore.js, yahoo-finance

Script is successfully retrieving data but I can not get the results of the "row" to display using underscore.js. The specific point of failure is the "var = resultContentTemplate". Can not figure this out.

```
$(document).ready(function(){
var symbols = symbols || ['GOOG','A','AA','AAN'];
var yqlUrl = "http://query.yahooapis.com/v1/public/yql";
var historicalUrl = 'http://finance.yahoo.com/d/quotes.csv';

var queryTemplate = _.template("select * from csv where url='" + historicalUrl + "?s=<%= symbol %>&f=n0s0l1' and columns='name,symbol,LastTradePriceOnly'");

var resultPlaceholderTemplate = _.template(
  '<li id="<%= id %>">Please wait, Loading quotes...</li>');

var resultContentTemplate = _.template(
  '<ul>'
  + '<li><% _.each(results, function(row) { %>'
  + '<%=row.name %>'
  + '<%=row.symbol %>'
  + '<%=row.LastTradePriceOnly %>'
  + '<% }); %>'
  + '</li>'
  + '</ul>');

// display the results of the query, replacing the 'loading' placeholder
function displayResult(id, queryResult, symbol) {
  var resultsAsHtml = resultContentTemplate({results: queryResult.row, symbol: symbol});
  $('#' + id).html(resultsAsHtml);
}

_.each(symbols, function(symbol) {

    var resultId = _.uniqueId();

    // lay down a placeholder
    $('#resultContainer').append(resultPlaceholderTemplate({id:resultId, symbol:symbol}));

    $.ajax({
      url: yqlUrl,
      data: {q: queryTemplate({symbol:symbol}), format: 'json'},
      context: $('#resultContainer')
    }).done(function(output) {
      console.log(output);
      var response = _.isString(output) ? JSON.parse(output) : output;
      displayResult(resultId, response.query.results, symbol);
    }).fail(function(err) {
      console.log('the thing failed with an error');
      console.log(err.responseText);
    });

});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:36:44.003

See [http://jsfiddle.net/mpBMK/](http://jsfiddle.net/mpBMK/)

Your code is making one ajax request per symbol. Hence, displayResult is called for each symbol, and queryResult parameter has only one child, the row for that symbol.

The resultContentTemplate already gets the single row so you shouldn't iterate over results. Instead:

```
var resultContentTemplate = _.template(
'<ul><li><%=result.name %><%=result.symbol %><%=result.LastTradePriceOnly %></li></ul>');

...
//in displayResult(...) which is called once per symbol
var resultsAsHtml = resultContentTemplate({result: queryResult.row, symbol: symbol}); 
```

It should be clear by the fiddle what the issue was and how it can be fixed.

# search - 以用户为中心的标准对 SOLR/Lucene 进行加权

> ID：14575325
> 
> 赞同：0
> 
> 时间：2013-01-29T03:45:39.493
> 
> 标签：search, solr, lucene, full-text-search

在接下来的几个月中，我们将从 SQL 全文搜索切换到 Lucene（SOLR 堆栈）搜索。在这里弄清楚我们的策略的最后一个问题是复制我们搜索平台的一个当前部分。

首先，一些描述问题的术语：我们的站点有一堆文档。人们可能会“添加”这些文档，他们可能会“收藏”这些文档，他们可能会“阅读”这些文档等等。我们将给定用户的此类文档的联合称为“个人文档”。有些文档是公开的，有些是私有的，只有登录用户才能看到它们。

目前，我们有一个加权函数，对于任何搜索，它总是首先在搜索列表中显示给定用户的“个人”文档。这超出了正常顺序（但文档必须在结果集中有效——它只排在任何其他不太重要的文档之上）。在 SQL 中，我们可以通过使用返回分数的用户定义函数来实现这一点，并且分数因用户而异。

一个类比是 Facebook——当您键入“Joe”时，它会首先找到您知道的所有 Joe，然后是符合条件的任何其他 Joe。我对“Joe”的搜索将返回与您对 Joe 的搜索不同的有序集。

据我了解，在 Lucene/SOLR 的世界中，如果没有两个单独的查询然后有效地联合在一起，我无法弄清楚如何对文档进行这种以用户为中心的加权（我知道，这不是关系，但你明白了）。我们拥有数百万用户和数十万份文档。如果用户登录，我们希望“他们的文档”首先出现在任何搜索中，然后是所有文档的其余部分。在每种情况下，我们都希望搜索结果只显示那些与原始搜索匹配的文档——我们只是在谈论排序。

你能想到这里有什么策略来重现这个用户定义的功能特性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:22:41.573

您是否可以在每个文档中设置一个字段来说明该特定文档属于 Jim（例如`user123Doc:1`）？如果是，您可以通过对结果集进行排序来解决它`{user123Doc, score, ...}`。

或者，如果您不想将这些信息存储在 Lucene 中，您可以将其存储在其他地方（例如，在数据库中）并实现`FieldComparator`它以使其与这些值一起使用。更多信息可[在此处](http://sujitpal.blogspot.co.uk/2011/05/custom-sorting-in-solr-using-external.html)获得。

# ios - IOS 应用程序上的 Facebook SDK 错误

> ID：14575330
> 
> 赞同：1
> 
> 时间：2013-01-29T03:46:37.067
> 
> 标签：ios, facebook-ios-sdk

我正在尝试将 FacebookSDK 添加到现有的 IOS 应用程序，按照提到的步骤 @ [http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/) 即下载 facebooksdk.pkg并将文件拖到项目导航器的框架部分

但是当我运行该应用程序时，构建失败。

> （空）：错误：/Volumes/E Drive/anand/BrickLane/../../../../Documents/FacebookSDK/FacebookSDK.framework/Versions/A/Resources/FacebookSDKResources.bundle：没有这样的文件或目录。

- 谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-08T09:05:53.177

如果在升级到较新版本的 Facebook SDK（fe 3.8）后出现此错误，请检查 .bundle 文件所在的文件夹：应该有一个 FacebookSDKResources.bundle.README 文件，告诉您不再需要此文件，因此您可以安全地从应用程序项目中删除它的引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T03:53:06.837

我猜文件丢失了。

您可以从这里下载最新的 Facebook 包“FacebookSDK-3.1.1.pkg”

[https://developers.facebook.com/ios/downloads/](https://developers.facebook.com/ios/downloads/)

# sql - 获取具有最大计数的所有组

> ID：14575333
> 
> 赞同：0
> 
> 时间：2013-01-29T03:47:02.640
> 
> 标签：sql, sql-server

假设现在我有一个像这样的表 T：

```
A|B
1|1 
1|2 
2|1 
2|2 
2|3 
3|1 
3|2 
3|3 
```

`select A, count(*) from T group by A`我们应该得到：

```
A|count(*)
1|2
2|3
3|3 
```

现在我需要获取上一个查询中的最后两行——它们的最大值为`count(*)`. 如何在单个查询中执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T03:50:18.113

```
WITH recordList
AS
(
    SELECT  A, COUNT(*) totalCount,
            DENSE_RANK() OVER (ORDER BY COUNT(*) DESC) rn
    FROM    tableName
    GROUP BY A
)
SELECT  A, totalCount
FROM recordLIst
WHERE rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/68b42/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:53:47.803

```
;WITH a(A,C,R) AS
(
  SELECT A, COUNT(*), RANK() OVER (ORDER BY COUNT(*) DESC)
  FROM dbo.T GROUP BY A
)
SELECT A, C FROM a WHERE R = 1; 
```

# java - Gorm MongoDB 插件存储 jvm 对象 id 而不是字节数组数据

> ID：14575334
> 
> 赞同：2
> 
> 时间：2013-01-29T03:47:05.277
> 
> 标签：java, mongodb, grails, grails-orm, mongodb-java

当我尝试将字节数组作为域类的字段存储在 grails 应用程序中时，mongo 数据库中的结果条目是[字节数组的对象 ID，](https://stackoverflow.com/questions/1040868/java-syntax-and-meaning-behind-b1ef9157-binary-address)而不是我期望的 BinData 对象。

例子：

```
class SimpleDomainClass {
    byte[] filed = ['d', 'w', 1, 5, 'r']
} 
```

在 Mongo DB 中产生以下结果：

```
{"field" : "[B@29edc561"} 
```

我期待更多类似的东西：

```
{"field" : BinData(0,"blahblahblah")} 
```

mongo-java 驱动程序文档明确指出这[应该存储为二进制对象](http://www.mongodb.org/display/DOCS/Java+Types#JavaTypes-BinaryData)，并且它正在为我们提供具有类似配置的类似项目。

有谁知道这里可能是什么问题？

库版本：

*   圣杯 2.1.0
*   plugins.mongodb=1.1.0.GA
*   mongo-java-driver 2.10.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:50:12.600

你是绝对正确的，文档说它应该工作。插件中有一个错误[GPMONGODB-265](http://jira.grails.org/browse/GPMONGODB-265)`1.1.0.GA mongodb`会产生数组保存错误。

讨论了相同的问题：[Grails - Mongo: storage images as byte array](https://stackoverflow.com/questions/14160581/grails-mongo-storing-images-as-byte-array/14592676#14592676)

但是，由于您使用`grails 2.1.0`了将 mongo gorm 插件降级为 version 的更改`1.0.0.GA`，因此数组已正确保存在那里。

# css - 将鼠标悬停在图像上并使周围的图像变暗

> ID：14575337
> 
> 赞同：0
> 
> 时间：2013-01-29T03:47:29.103
> 
> 标签：css, hover, opacity

澄清一下：我不是在问当您将鼠标悬停在图像上时如何使图像变暗。我想知道如何使您的光标过暗的图像周围的其他图像变暗。

这是一个例子：[http ://www.b-reel.com/](http://www.b-reel.com/)

当您将鼠标悬停在大类别图像上时，周围的图像会变暗，但悬停的图像保持不变。

任何输入将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:50:20.763

您不会使周围的图像变暗。相反，您所做的是`div`在所有图像周围放置 a ，当光标在 this 上时`div`，所有图像都会变暗。但是您还可以`div`在每个图像周围添加元素，并且当光标悬停在图像上时可以使图像不那么暗。两者的结合可以为您提供所需的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:52:11.357

在您发布的示例中，他们使用 JavaScript`.fadeOut`在其他 div 上应用一个类。该类`.fadeOut`将`opactiy`其他 div 的值设置为 50%。

# html - 在中间的图像上添加文本

> ID：14575338
> 
> 赞同：2
> 
> 时间：2013-01-29T03:47:37.247
> 
> 标签：html, image, text, alignment

我想在中间的图像上添加一些文本。我使用这段代码：

```
<div style="background-image: url(../images/game-hearts-icon.png); height: 64px; width: 64px; text-align: center; vertical-align:middle;">text</div> 
```

我希望文本在心脏的中间。但它只是出现在顶部居中。垂直对齐似乎不起作用。我究竟做错了什么？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:53:06.990

您可以使用绝对定位或行高来达到您想要的结果，方法如下：jsfiddle.net/YZXVe/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:56:17.750

将 设置`line-height`为等于 div 的高度：

```
<div style="background-image: url(../images/game-hearts-icon.png); height: 64px; width: 64px; text-align: center; line-height: 64px;">text</div> 
```

更好的是，不要使用内联样式：

HTML

```
<div class="game-hearts-icon">text</div> 
```

CSS

```
.game-hearts-icon {
    background: transparent url(../images/game-hearts-icon.png) scroll 0 0 no-repeat;
    height: 64px;
    line-height: 64px;
    text-align: center;
    width: 64px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T05:05:22.400

您可以`<center>`在 div 内使用。它会将您的文本垂直和水平放置在中心。

```
 <div>
    <center>
      <p>Your Text</p>
    </center>
   </div> 
```

希望能帮助到你。

# asp.net - 允许在网页上运行的最大线程数是多少

> ID：14575340
> 
> 赞同：0
> 
> 时间：2013-01-29T03:47:49.293
> 
> 标签：asp.net, asp.net-mvc, extjs

我使用 ExtJS 和 ASP.NET 开发了一个页面。该页面有多个小部件。每个小部件在加载时发送多个 AJAX 请求。我假设每个 AJAX 请求都在一个新线程上运行。我只想明白：

1.  允许从单个窗口运行多少个这样的线程？一个浏览器可以向服务器发送多少个请求，而无需在浏览器本身排队。我知道请求可以根据各种参数在服务器端排队。
2.  这种行为是否会从浏览器更改为浏览器？
3.  有没有办法跟踪活动请求的数量？

**我不是在谈论可以在服务器端运行的线程数。我不是在谈论服务器可以处理的请求数。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:01:56.857

> 允许从单个窗口运行多少个这样的线程？

这取决于您的服务器的硬件功能和配置。

> 这种行为是否会从浏览器更改为浏览器？

不。

> 有没有办法跟踪活动请求的数量？

**微软**

[http://msdn.microsoft.com/en-us/library/bb386420(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb386420(v=vs.100).aspx)

**示例和提示**

[http://www.dotnetperls.com/trace](http://www.dotnetperls.com/trace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:20:28.070

服务器通常可以同时处理多个请求，即使线程数很少。

在 IIS 上，您可以使用

```
<system.web>
    <applicationPool maxConcurrentRequestsPerCPU="50" maxConcurrentThreadsPerCPU="0" requestQueueLimit="5000"/>
</system.web> 
```

参考：[微软最佳实践](http://msdn.microsoft.com/en-us/library/ms998549.aspx)

在使用 javascript 的浏览器上，您应该知道 javascript 没有任何多线程功能。

对服务器的同时 ajax（或其他）请求的数量取决于浏览器。通常每个域名允许 2、6、8 个线程。这不应该打扰你太多，因为其余的将排队。

参考：[BrowserScope 获取最新网络数据](http://www.browserscope.org/?category=network)

# sas - sysfunc 不工作。

> ID：14575345
> 
> 赞同：2
> 
> 时间：2013-01-29T03:47:57.337
> 
> 标签：sas

这个 sysfunc 调用有什么问题？

```
%let mystring = hello world;

%let mycount =  %sysfunc(count(&mystring, 'hello')); 

%put &mycount; 
```

输出

```
[PUT]  0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T06:57:48.827

因为您在数据步之外，所以不需要引号`hello`（引号是字符串的一部分，而不是其分隔符）。所以这应该工作：

```
%let mystring = hello world;
%let mycount =  %sysfunc(count(&mystring, hello)); 
%put &mycount; 
```

再举一个例子来说明这里发生了什么，这也将打印 1：

```
%let mystring = 'hello' world;
%let mycount =  %sysfunc(count(&mystring, 'hello')); 
%put &mycount; 
```

# c++ - C++11 是否允许在 lambda 内部和内部进行以下嵌套可变参数扩展？

> ID：14575347
> 
> 赞同：4
> 
> 时间：2013-01-29T03:48:44.937
> 
> 标签：c++, c++11, lambda, variadic-templates

任何人都可以为我确认以下代码（包括函数参数包的嵌套扩展）在 C++11 中是允许的（我当然会感谢对标准的任何引用）：

```
template<class ... VFTs> int variadic_fun(VFTs ... vfts) { 
  return sizeof ...(vfts); 
}

template<int ... Ns> struct IntPack {
  template<class ... MemTs> static int variadic_memfun(MemTs ... MemArgs) {
    return variadic_fun(([=]() {
      cout << "MemArgs = " <<  MemArgs << "\n";
      cout << "Ns = " << Ns;
      // Note the nested expansion of MemArgs here:
      cout << "variadic_fun(MemArgs...) = " << variadic_fun(MemArgs ...) << "\n";
      cout << "MemArgs[Ns] = " <<  MemArgs[Ns] << "\n";
      return 0;
    })()...);
  }  
};

int main() {
  IntPack<0, 1, 2>::variadic_memfun("123", "ABC", "XYZ");
} 
```

谢谢！
PS 由于有人在下面问，这段代码适用于[我的实现通用 lambda 的 clang 补丁](http://faisalv.github.com/clang-glambda/)（还不是标准 C++，仍然只是一个建议） - 我没有用任何其他编译器尝试过它 - 并且不确定它是否适用于最新的当前的clang trunk（它可能确实如此） - 我当然欢迎任何关于它是否与任何实现可变参数和lambdas的主流编译器一起编译的信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T04:02:00.300

是的，这是有效的，并且 Clang 支持它。

```
$ clang++ your-example.cpp -std=c++11
$ ./a.out
MemArgs = 123
Ns = 0variadic_fun(MemArgs...) = 3
MemArgs[Ns] = 1
MemArgs = ABC
Ns = 1variadic_fun(MemArgs...) = 3
MemArgs[Ns] = B
MemArgs = XYZ
Ns = 2variadic_fun(MemArgs...) = 3
MemArgs[Ns] = Z 
```

相关规则是**[temp.variadic]p5**：

> 未扩展的参数包名称的外观是不正确的。

这不适用于这种情况，因为

> 名称出现在包扩展模式中的参数包由该包扩展扩展。

...并且在 lambda 中使用 pack 是在函数参数 pack 扩展的模式内。

# ios - 如何在 Objective-C 中捕获 JSON 错误？

> ID：14575350
> 
> 赞同：1
> 
> 时间：2013-01-29T03:49:21.503
> 
> 标签：ios, objective-c, json

按照本教程：[http](http://www.raywenderlich.com/5492/working-with-json-in-ios-5) ://www.raywenderlich.com/5492/working-with-json-in-ios-5 ，我制作了这样的简单应用程序：

```
#define kLatestKivaLoansURL [NSURL URLWithString: @"http://api.kivaws.org/v1/loans/search.json?status=fundraising"] 

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        NSData* data = [NSData dataWithContentsOfURL: kLatestKivaLoansURL];
        NSError* error;
        NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data 
                                                             options:kNilOptions
                                                               error:&error];
        NSArray* latestLoans = [json objectForKey:@"loans"];
        NSLog(@"Error: %@",error);
        NSLog(@"loans: %@",latestLoans); 

        dispatch_async(dispatch_get_main_queue(), ^(){
            self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
            self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
            self.window.rootViewController = self.viewController;
            [self.window makeKeyAndVisible];
        });

    });

    return YES;
}

@end 
```

当网络不正常或 JSON 链接错误时，我得到相同的中断：“ ***由于未捕获的异常 'NSInvalidArgumentException' 而终止应用程序，原因：'数据参数为零”

如何捕捉这个错误？我只想显示一条警报消息，而不是中断。

解析 JSON 数据时有多少种错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T04:03:26.213

您应该检查`NSData* data`它是否为零？如果它为零，那么你不应该运行代码行

```
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data 
                                                             options:kNilOptions
                                                               error:&error]; 
```

当您尝试将`nil`数据转换为`Dictionary`.

您还可以通过在代码中实现可达性类来检查网络可用性。一个示例应用程序演示了如何使用 SystemConfiguration 框架来监控 iPhone 或 iPod touch 的网络状态

[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

# c# - 进度条的运行时间少于定义的时间

> ID：14575359
> 
> 赞同：0
> 
> 时间：2013-01-29T03:51:03.883
> 
> 标签：c#, winforms

我创建了一个获取毫秒数的函数，然后运行进度条，但结果是进度条运行的时间少于定义的时间。

```
this.timerProgress.Tick += new System.EventHandler(this.timerProgress_Tick);

public void AnimateProgBar(int milliSeconds)
{
    if (!timerProgress.Enabled)
    {
        this.Invoke((MethodInvoker)delegate { pbStatus.Value = 0; });
        timerProgress.Interval = milliSeconds / 100;
        timerProgress.Enabled = true;
    }
}

private void timerProgress_Tick(object sender, EventArgs e)
{
    if (pbStatus.Value < 100)
    {
        pbStatus.Value += 1;
        pbStatus.Refresh();
    }
    else
    {
        timerProgress.Enabled = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:55:53.840

使用 AnimateProgBar(100)，最终将创建一个 1 毫秒的间隔。

> timerProgress.Interval = 毫秒；//不要除以100

```
this.timerProgress.Tick += new System.EventHandler(this.timerProgress_Tick);

public void AnimateProgBar(int milliSeconds)
{
    if (!timerProgress.Enabled)
    {
        this.Invoke((MethodInvoker)delegate { pbStatus.Value = 0; });
        timerProgress.Interval = milliSeconds; //do not divide by 100
        timerProgress.Enabled = true;
    }
}

private void timerProgress_Tick(object sender, EventArgs e)
{
    if (pbStatus.Value < 100)
    {
        pbStatus.Value += 1;
        pbStatus.Refresh();
    }
    else
    {
        timerProgress.Enabled = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:57:35.923

调用`AnimateProgBar(1000)`将导致以下计算：`1000 / 100`. 那等于`10`。

`Timer`间隔已经以毫秒为单位。所以你有效地将间隔设置为`10ms`.

# sharepoint - 查找 Sharepoint 文档库的 ID 或类别

> ID：14575360
> 
> 赞同：0
> 
> 时间：2013-01-29T03:51:06.413
> 
> 标签：sharepoint, sharepoint-2010, document-library

我有一个 Mega Menu 导航，可以从自定义列表中生成其内容。超级菜单上的每个“选项卡”都链接到不同的文档库。我想突出显示当前选择的文档库的选项卡。

每个“选项卡”已经有一个类属性，但我无法为文档库提供一个 ID 或类属性，或者找到一个已经存在的属性。

我在其中一个文档库中添加了一个内容编辑器 Web 部件，它是一个具有正文 ID 的空白 html 文本文件。当我在 CSS 中引用它时，我能够在该文档库上实现选项卡的突出显示。然而，这只适用于我所在的特定视图。当更改为同一文档库上的另一个视图（我有大约 15-20 个视图）时，突出显示会消失，因为该视图中没有内容编辑器 Web 部件。

总而言之——我如何使用一个在文档库中每次更改视图时都不会更改的通用 ID 或 Class 属性？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T01:18:26.737

我最终只使用了 jQuery。将它放在我的母版页中的脚本标记中。

```
if ( document.location.href.indexOf('<string in URL - I used the name of the document library') > -1 ) {
        $('UL#topnav A.SecondTab').css('background-image', 'url(highlightedtab.jpg)');
    } 
```

使用了多个 if 语句，因为每个选项卡都有不同的类名，例如 FirstTab、SecondTab 等。

# javascript - jQuery 不返回 true 或 false

> ID：14575361
> 
> 赞同：0
> 
> 时间：2013-01-29T03:51:20.187
> 
> 标签：javascript, jquery

所以我这样做：

```
function loginFunc(userNameOrEmail, passWord){
        var emailOrUserNameV = encodeURIComponent(userNameOrEmail);
        var passWordV = encodeURIComponent(passWord);
        $.getJSON("http://mysite.com/pullData/login.php?callback=?",
              {
                emailOrUserName: emailOrUserNameV,
                passWord: passWordV
              },
              function(recievedData) {
                if(recievedData[0] == 'true'){
                    return true;
                }
                else{
                    return false;
                }

        });

} 
```

然后我这样做：

```
$('#loginBtnHtml').click(function(){
            var emailVar = $('#email_html').val();
            var pwdVar = $('#password_html').val();
            if(loginFunc(emailVar, pwdVar)){
                alert('good');
            }
            else{
                alert('bad');
            }

        }); 
```

如果我`loginFunc()`用它运行`alert(recievedData[0]);`它工作正常，我如何让它返回 bool 到`$('#loginBtnHtml').click();`？

当我这样做进行故障排除时：

```
$('#loginBtnHtml').click(function(){
            var emailVar = $('#email_html').val();
            var pwdVar = $('#password_html').val();
            var whatIsBeingReturned = loginFunc(emailVar, pwdVar);
            alert(whatIsBeingReturned);

        }); 
```

它以“未定义”警告..​​.不确定我做错了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T03:54:21.340

你不能从ajax返回。除非 ajax 是同步的（不要这样做！）您***不能***依赖以任何特定顺序执行的代码。 *所有*需要 ajax 响应的功能都必须在 ajax 回调中。

```
function loginFunc(userNameOrEmail, passWord){
    ...
    return $.getJSON("http://mysite.com/pullData/login.php?callback=?",
}

$("#loginBtnHtml").on('click', function () {
   //snip
   loginFunc(emailVar, pwdVar).done(function (whatIsBeingReturned) {
      console.log(whatIsBeingReturned);
   });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T03:54:16.090

JSON 请求的响应是异步的。`logicFunc()`JSON 请求的响应回调之前的返回。

您需要编写一个回调方法来处理响应。就像是：

```
function handleResponse(data){ 

     // do something
}

function loginFunc(userNameOrEmail, passWord){
        var emailOrUserNameV = encodeURIComponent(userNameOrEmail);
        var passWordV = encodeURIComponent(passWord);
        $.getJSON("http://mysite.com/pullData/login.php?callback=?",
              {
                emailOrUserName: emailOrUserNameV,
                passWord: passWordV
              },
              handleResponse

        });

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T04:02:15.343

请尝试使用回调函数。AJAX 发生异步，完成函数无法将值返回给包装函数。

```
function loginFunc(userNameOrEmail, passWord, callbackFn){
        var emailOrUserNameV = encodeURIComponent(userNameOrEmail);
        var passWordV = encodeURIComponent(passWord);
        $.getJSON("http://mysite.com/pullData/login.php?callback=?",{
            emailOrUserName: emailOrUserNameV,
            passWord: passWordV
        }, callbackFn);
}

$('#loginBtnHtml').click(function(){
    var emailVar = $('#email_html').val();
    var pwdVar = $('#password_html').val();

    loginFunc(emailVar, pwdVar, function(recievedData){
        alert(recievedData[0]);
    });

}); 
```

# c# - 默认隐藏元素，然后点击动画

> ID：14575365
> 
> 赞同：0
> 
> 时间：2013-01-29T03:51:53.400
> 
> 标签：c#, windows-8, winrt-xaml

有没有办法将 XAML 中的元素设置为隐藏？当用户单击“新游戏”按钮时，我想要一组按钮（可能在堆栈面板中）以动画形式显示，让用户选择难度级别。我尝试将 Visibility 设置为 Collapsed，但是当我使用 Win8 内置动画之一（例如 EntranceThemeTransition 或 PopIn）时，折叠的元素不会出现。将不透明度更改为 0，然后尝试使用其中之一进行动画处理具有相同的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:17:56.730

该`Visibility`物业独立于 Opacity 运作。您需要`Visibility`在`Visible`运行自定义`Opacity`动画或内置`FadeInThemeAnimation`.

您可以使用 WinRT XAML 工具包扩展来运行一个简单的动画，如下所示：

```
myElement.Visibility = Visibility.Visible;
myElement.FadeInCustom(); 
```

XAML 工具包中的扩展方法类：

```
using System;
using System.Threading.Tasks;
using WinRTXamlToolkit.AwaitableUI;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Media.Animation;

namespace WinRTXamlToolkit.Controls.Extensions
{
    /// <summary>
    /// Extension methods and attached properties for UIElement class.
    /// </summary>
    public static class UIElementAnimationExtensions
    {
        #region AttachedFadeStoryboard
        /// <summary>
        /// AttachedFadeStoryboard Attached Dependency Property
        /// </summary>
        public static readonly DependencyProperty AttachedFadeStoryboardProperty =
            DependencyProperty.RegisterAttached(
                "AttachedFadeStoryboard",
                typeof(Storyboard),
                typeof(UIElementAnimationExtensions),
                new PropertyMetadata(null, OnAttachedFadeStoryboardChanged));

        /// <summary>
        /// Gets the AttachedFadeStoryboard property. This dependency property 
        /// indicates the currently running custom fade in/out storyboard.
        /// </summary>
        private static Storyboard GetAttachedFadeStoryboard(DependencyObject d)
        {
            return (Storyboard)d.GetValue(AttachedFadeStoryboardProperty);
        }

        /// <summary>
        /// Sets the AttachedFadeStoryboard property. This dependency property 
        /// indicates the currently running custom fade in/out storyboard.
        /// </summary>
        private static void SetAttachedFadeStoryboard(DependencyObject d, Storyboard value)
        {
            d.SetValue(AttachedFadeStoryboardProperty, value);
        }

        /// <summary>
        /// Handles changes to the AttachedFadeStoryboard property.
        /// </summary>
        /// <param name="d">
        /// The <see cref="DependencyObject"/> on which
        /// the property has changed value.
        /// </param>
        /// <param name="e">
        /// Event data that is issued by any event that
        /// tracks changes to the effective value of this property.
        /// </param>
        private static void OnAttachedFadeStoryboardChanged(
            DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            Storyboard oldAttachedFadeStoryboard = (Storyboard)e.OldValue;
            Storyboard newAttachedFadeStoryboard = (Storyboard)d.GetValue(AttachedFadeStoryboardProperty);
        }
        #endregion

        #region FadeIn()
        /// <summary>
        /// Fades the element in using the FadeInThemeAnimation.
        /// </summary>
        /// <remarks>
        /// Opacity property of the element is not affected.<br/>
        /// The duration of the visible animation itself is not affected by the duration parameter. It merely indicates how long the Storyboard will run.<br/>
        /// If FadeOutThemeAnimation was not used on the element before - nothing will happen.<br/>
        /// </remarks>
        /// <param name="element"></param>
        /// <param name="duration"></param>
        /// <returns></returns>
        public static async Task FadeIn(this UIElement element, TimeSpan? duration = null)
        {
            ((FrameworkElement)element).Visibility = Visibility.Visible;
            var fadeInStoryboard = new Storyboard();
            var fadeInAnimation = new FadeInThemeAnimation();

            if (duration != null)
            {
                fadeInAnimation.Duration = duration.Value;
            }

            Storyboard.SetTarget(fadeInAnimation, element);
            fadeInStoryboard.Children.Add(fadeInAnimation);
            await fadeInStoryboard.BeginAsync();
        } 
        #endregion

        #region FadeOut()
        /// <summary>
        /// Fades the element out using the FadeOutThemeAnimation.
        /// </summary>
        /// <remarks>
        /// Opacity property of the element is not affected.<br/>
        /// The duration of the visible animation itself is not affected by the duration parameter. It merely indicates how long the Storyboard will run.<br/>
        /// If FadeOutThemeAnimation was already run before and FadeInThemeAnimation was not run after that - nothing will happen.<br/>
        /// </remarks>
        /// <param name="element"></param>
        /// <param name="duration"></param>
        /// <returns></returns>
        public static async Task FadeOut(this UIElement element, TimeSpan? duration = null)
        {
            var fadeOutStoryboard = new Storyboard();
            var fadeOutAnimation = new FadeOutThemeAnimation();

            if (duration != null)
            {
                fadeOutAnimation.Duration = duration.Value;
            }

            Storyboard.SetTarget(fadeOutAnimation, element);
            fadeOutStoryboard.Children.Add(fadeOutAnimation);
            await fadeOutStoryboard.BeginAsync();
        } 
        #endregion

        #region FadeInCustom()
        /// <summary>
        /// Fades the element in using a custom DoubleAnimation of the Opacity property.
        /// </summary>
        /// <param name="element"></param>
        /// <param name="duration"></param>
        /// <param name="easingFunction"> </param>
        /// <returns></returns>
        public static async Task FadeInCustom(this UIElement element, TimeSpan? duration = null, EasingFunctionBase easingFunction = null, double targetOpacity = 1.0)
        {
            CleanUpPreviousFadeStoryboard(element);

            var fadeInStoryboard = new Storyboard();
            var fadeInAnimation = new DoubleAnimation();

            if (duration == null)
                duration = TimeSpan.FromSeconds(0.4);

            fadeInAnimation.Duration = duration.Value;
            fadeInAnimation.To = targetOpacity;
            fadeInAnimation.EasingFunction = easingFunction;

            Storyboard.SetTarget(fadeInAnimation, element);
            Storyboard.SetTargetProperty(fadeInAnimation, "Opacity");
            fadeInStoryboard.Children.Add(fadeInAnimation);
            SetAttachedFadeStoryboard(element, fadeInStoryboard);
            await fadeInStoryboard.BeginAsync();
            element.Opacity = targetOpacity;
            fadeInStoryboard.Stop();
        }
        #endregion

        #region FadeOutCustom()
        /// <summary>
        /// Fades the element out using a custom DoubleAnimation of the Opacity property.
        /// </summary>
        /// <param name="element"></param>
        /// <param name="duration"></param>
        /// <param name="easingFunction"> </param>
        /// <returns></returns>
        public static async Task FadeOutCustom(this UIElement element, TimeSpan? duration = null, EasingFunctionBase easingFunction = null)
        {
            CleanUpPreviousFadeStoryboard(element); 

            var fadeOutStoryboard = new Storyboard();
            var fadeOutAnimation = new DoubleAnimation();

            if (duration == null)
                duration = TimeSpan.FromSeconds(0.4);

            fadeOutAnimation.Duration = duration.Value;
            fadeOutAnimation.To = 0.0;
            fadeOutAnimation.EasingFunction = easingFunction;

            Storyboard.SetTarget(fadeOutAnimation, element);
            Storyboard.SetTargetProperty(fadeOutAnimation, "Opacity");
            fadeOutStoryboard.Children.Add(fadeOutAnimation);
            SetAttachedFadeStoryboard(element, fadeOutStoryboard);
            await fadeOutStoryboard.BeginAsync();
            element.Opacity = 0.0;
            fadeOutStoryboard.Stop();
        } 
        #endregion

        #region CleanUpPreviousFadeStoryboard()
        public static void CleanUpPreviousFadeStoryboard(this UIElement element)
        {
            var attachedFadeStoryboard = GetAttachedFadeStoryboard(element);

            if (attachedFadeStoryboard != null)
            {
                attachedFadeStoryboard.Stop();
            }
        }
        #endregion
    }
} 
```

# php - cookie 可以编辑吗？

> ID：14575373
> 
> 赞同：-3
> 
> 时间：2013-01-29T03:52:50.423
> 
> 标签：php, html, web

在我的网页上，我使用的是设置为`1`如果他们是管理员的 cookie

`0`如果他们不是

因此管理员可以访问某些功能，

如果有人愿意，在他们的本地 cookie 中将 0 变为 1 有多难？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T03:55:34.393

Cookie 存在于客户端，因此它们当然是可编辑的。就像来自客户端的所有其他东西一样，cookie 永远不能被认为是安全的。**使用您的设计让某人成为管理员非常容易。**

不要偷懒；将权限存储在服务器端并且*仅*在服务器端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:55:58.523

编辑 cookie 实际上很容易。chrome 等扩展编辑此 cookie 允许它在不离开浏览器的情况下完成。我将它用于简单的事情，例如在新闻纸网站上进行网络跟踪，从而限制您可以查看的文章数量。我重置了 cookie 计数，瞧，我可以查看更多文章。

如果您想演示它并将其应用到您的网站，谷歌编辑此 cookie。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T03:57:30.357

编辑 cookie 很容易。

**但这真的是你的意思吗？**

会话变量存储在服务器上，因此不能被客户端修改。客户端只存储一个引用会话的 ID。

# php - 创建动态 WHERE 子句时出现 mysqli 警告

> ID：14575375
> 
> 赞同：-1
> 
> 时间：2013-01-29T03:52:57.803
> 
> 标签：php, mysqli

我正在尝试使用动态 where 子句创建查询。该查询有一个默认的 where 子句，`SessionId = ?`无论从`students and`问题下拉菜单中选择哪个选项，它都会始终检查。

然后我有一个 php 代码，如果用户选择了单个学生或单个问题（或者换句话说，没有选择All All中的选项，则在 2 个下拉菜单中的任何一个中选择了选项，那么它不会`All`添加WHERE 子句的那些参数。`student drop down menu or the user has not selected``in the question drop down menu). If the`

无论如何，在尝试执行此操作时，我收到以下错误：

```
Warning: mysqli::prepare(): (42000/1064): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'WHERE q.SessionId = ?' at line 15 in ... on line 320 

Fatal error: Call to a member function bind_param() on a non-object in ... on line 322 
```

我的问题是我需要在下面的 mysqli 和 php 代码中整理什么才能修复错误？

下面是带有注释的代码，用于显示错误所在的行号：

```
$selectedstudentanswerqry = "
SELECT
StudentAlias, StudentForename, StudentSurname, q.SessionId, QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT( DISTINCT Answer
ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, StudentMark
FROM Student s
INNER JOIN Student_Answer sa ON (s.StudentId = sa.StudentId)
INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
INNER JOIN Question q ON (sa.QuestionId = q.QuestionId)
INNER JOIN Answer an ON q.QuestionId = an.QuestionId
LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
";

// Initially empty
$where = array('q.SessionId = ?');
$parameters = array($_POST["session"]);
$parameterTypes = 'i';

// Check whether a specific student was selected
if($_POST["student"] !== 'All') {
    $where[] = 'sa.StudentId = ?';
    $parameters[] = $_POST["student"];
    $parameterTypes .= 'i';
}

// Check whether a specific question was selected
// NB: This is not an else if!
if($_POST["question"] !== 'All') {
    $where[] = 'q.QuestionId = ?';
    $parameters[] = $_POST["question"];
    $parameterTypes .= 'i';
}

$selectedstudentanswerqry .= "
GROUP BY sa.StudentId, q.QuestionId
ORDER BY StudentAlias, q.SessionId, QuestionNo
";

// If we added to $where in any of the conditionals, we need a WHERE clause in
// our query
if(!empty($where)) {
    $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
    global $mysqli;
    $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry); //line 320 error
    // You only need to call bind_param once
    $selectedstudentanswerstmt->bind_param($parameterTypes,implode($parameters)); //line 322 error
}

// get result and assign variables (prefix with db)
$selectedstudentanswerstmt->execute(); 
$selectedstudentanswerstmt->bind_result($detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname,$detailsSessionId,$detailsQuestionNo, 
$detailsQuestonContent,$detailsOptionType,$detailsNoofAnswers,$detailsAnswer,$detailsReplyType,$detailsQuestionMarks,$detailsStudentAnswer,$detailsResponseTime,
$detailsMouseClick,$detailsStudentMark);
$selectedstudentanswerstmt->store_result();
$selectedstudentanswernum = $selectedstudentanswerstmt->num_rows(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:59:55.187

看起来您在 WHERE 语句之前执行了 GROUP BY 和 ORDER BY。

试着把这些线，

```
$selectedstudentanswerqry .= "
  GROUP BY sa.StudentId, q.QuestionId
  ORDER BY StudentAlias, q.SessionId, QuestionNo
"; 
```

在你的 if 语句之后，

```
if(!empty($where)) {
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:50:59.787

回显查询您`WHERE`之前的位置不正确`GROUP BY`

# ios - iOS - UIImageView 轻微故障

> ID：14575383
> 
> 赞同：1
> 
> 时间：2013-01-29T03:53:44.490
> 
> 标签：ios, objective-c, animation, uiview, uiimageview

我`UIImageViews`在地图上有无数这样的“图块”。它们彼此相邻排列以形成图像网格。

通常，网格图像彼此齐平，但每当 iPhone 或 iPad 设备旋转时，或者如果将 a`UIView`应用于包含这些图块的视图，它们之间的空间`UIImageViews`就会立即可见，从而展示了我的网格图案想隐身。

有什么想法可能导致这种情况吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:17:51.123

发生这种情况是因为您使用了不同的视图（此处`uiimageview`）。由于在任何动画或视图层次结构更改期间它们不是同一结构的一部分，因此它们之间的间隙有可能是可见的。

这是图形编程中非常常见的问题。解决此问题的方法是拥有一个视图并将这些`uiimageviews`作为子层添加到此视图中。这样，所有的图像视图都是同一织物的一部分，并且间隙将不可见。

我没有发布任何代码，但你也发布了；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T04:39:40.773

考虑使用[CATiledLayer](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CATiledLayer_class/Introduction/Introduction.html)在单个视图中绘制所有图像，而不是使用多个子视图。[在Cocoa Is My Girlfriend](http://www.cimgf.com/2011/03/01/subduing-catiledlayer/)上有一篇关于使用它的好文章。CATiledLayer 可以轻松地从较小的图块构建图像，在用户放大时显示更高分辨率的图像，并避免因加载过多的大图像而导致的内存问题。

# jquery - jQuery datepicker 中存在 AfterClose 事件？

> ID：14575388
> 
> 赞同：0
> 
> 时间：2013-01-29T03:54:26.050
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我想处理 afterClose 事件？怎么做？

当我的 Jquery datepicker 弹出窗口完全关闭时，我想触发模糊事件。

想知道 OnClose 事件触发后 jquery datepicker 提供的任何其他事件

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:57:29.747

`onClose`您可以通过使用日期选择器的来做到这一点。每当日期选择器根据下面的描述关闭时，都会调用它。

> 在日期选择器关闭时调用，无论是否选择了日期。该函数接收选定的日期作为文本（“”，如果没有）和 datepicker 实例作为参数。这指的是关联的输入字段。

**示例代码：**

```
$( "someselector" ).datepicker({ 
    // some other options her
    onClose: myClose
});

function myClose(dateText, inst) {
     // code to blur HTML element or do whatever else you want here.
} 
```

# php - 将复选框插入mysql数据库

> ID：14575389
> 
> 赞同：0
> 
> 时间：2013-01-29T03:54:38.847
> 
> 标签：php, mysql, loops

想要一些关于如何使用 php 将动态复选框中的值存储到 mySQL 表中的帮助。

```
 ID |        DES_ID  | CAT_ID
                    1           0921671     12
                    2           0921671     24
                    3           0921671     30 
```

我像这样生成我的复选框。

```
<?php 
                $result = mysql_query("SELECT * FROM tbl_category order by name ");
                $i=1;
                while($row = mysql_fetch_array($result)){
                echo '<input type="checkbox" name="categories[]" value='.$row['category_id'].' id='.$row['name'].'>'.'<label for='.$row['name'].' class="fil_lab">'.$row['name']. '</label>';
                if($i%5==0)
                {
                 $i = 0;
                 echo '<br><br>';
                }
                $i++;}
            ?> 
```

注意：我会将这些复选框添加为其他数据，例如目的地名称等。我总共要同时插入 4 个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:46:26.230

您可以为复选框添加一个单独的表，您可以使用外键将其链接到主表。

或者

您可以在主表中创建一个字段并存储这样的复选框值 (0|1|2) 但这不是一个好方法，请遵循第一个。

# php - Magento-如何使用模块在产品详细信息页面中添加新的自定义块

> ID：14575391
> 
> 赞同：1
> 
> 时间：2013-01-29T03:55:05.413
> 
> 标签：php, block, magento-1.7

我正在做一个 magento 定制站点，我需要添加产品的附加属性，例如它的类型、版本等。我是 magento 的新手，如何将新的自定义块添加到产品详细信息页面。我已经创建了一个模块，并且我正在使用以下编码。

app\code\local\SmartGrowth\CompatibleWith\Block\compatible.php

SmartGrowth_CompatibleWith_Block_CompatibleWith 类扩展了 Mage_Catalog_Block_Product_View

{

```
protected function _prepareLayout()
    {

            //$this->getProduct()->setName($this->getProduct()->getPrice());
            $this->getProduct()->setName($this->getProduct()->getShortDescription());

      parent::_prepareLayout();
  } 

} 
```

我在 _prepareLayout() 中使用了以下编码，但它似乎重复了该块 5 次，并且该块出现的位置是一个问题

```
$block = $this->getLayout()->createBlock(
'Mage_Core_Block_Template',
'my_block_name_here',
array('template' => 'catalog/product/compatiblewith.phtml')
);
$this->getLayout()->getBlock('content')->append($block); 
```

请帮助我该怎么做，我是 magento 的新手，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T16:46:37.190

There's no need to add the block in code, it should be done using config XML files.

Create an XML config for your module (plenty of tutorials on this).

check catalog.xml (app/design/frontend/base/default/layout/)

```
<catalog_product_view translate="label">
 ....
</catalog_product_view> 
```

This is where the blocks are setup for display on the product view page. You can modify this using your own modules XML file, something like this:

```
<catalog_product_view translate="label">
    <reference name="content">
        <block type="compatiblewith/compatible" name="my.block" template="compatiblewith/compatible/template.phtml" />
    </reference>
</catalog_product_view> 
```

this will show your custom block on the product view page, inside the content area.

**You also have an error with the naming of your block if it's called Compatible.php the class should be SmartGrowth_CompatibleWith_Block_Compatible**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T12:58:56.837

您可以在快速查看区域下方的产品商店（产品图像旁边的部分的css类名称）中添加自定义模板，而无需修改核心文件。在模块的布局文件中添加此代码以获得所需的结果（将“模块”“块”替换为您的实际模块和块名称）：

```
<catalog_product_view>
         <reference name="content">
            <reference name="product.info">
                <block type="module/block" name="module_block" as="other" template="module/block.phtml"/>
            </reference>
        </reference>
</catalog_product_view> 
```

使用的自定义块的目标是“其他”，这是在 magento 的 view.phtml(/app/design/frontend/base/default/template/catalog/product/view.phtml) 中默认提供的子 html。

希望它会有所帮助。

# wpf - 如何在鼠标悬停时增加 ListViewItem 不透明度？

> ID：14575396
> 
> 赞同：1
> 
> 时间：2013-01-29T03:55:38.890
> 
> 标签：wpf, xaml, listview, mouseevent, opacity

我正在调暗`Opacity`a 中的自定义控件项，`ListView`并希望将它们设置回完全不透明度`OnMouseOver`。我可以调暗它们`OnMouseOver`，但我不能增加`Opacity`。我猜它与`ListView`ControlTemplate 有关。任何帮助表示赞赏，它变得非常令人沮丧：

```
<ListView Background="Transparent" BorderBrush="Transparent" Grid.Row="0" VerticalAlignment="Top">
        <ListView.ItemContainerStyle>
            <Style TargetType="{x:Type ListViewItem}">
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Opacity" Value=".9"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </ListView.ItemContainerStyle>
    <notify:NotificationInfo/>
</ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:51:48.727

我不知道这是否有用：

```
<ListView>
    <ListViewItem>Johan</ListViewItem>
    <ListViewItem>Ray</ListViewItem>
    <ListView.ItemContainerStyle>
        <Style TargetType="{x:Type ListViewItem}">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Opacity" Value=".9"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="False">
                    <Setter Property="Opacity" Value=".2"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </ListView.ItemContainerStyle>
</ListView> 
```

感觉不是超级好。

# c++ - 在具有静态函数的类中存储非静态对象

> ID：14575397
> 
> 赞同：0
> 
> 时间：2013-01-29T03:55:43.360
> 
> 标签：c++, static

我有两个类（非静态）A 和（静态）B。我试图将对象 A 存储到 B 中，以便我可以在 funcB() 中使用它的函数。但是我知道静态类不能存储非静态变量和函数。有没有办法通过这个而不是将A类转换为静态类？

```
class A
{
   public:
          A();
          void funcA();
   private:
          int A;
};

class B
{
   public:
         B(A *objA);
         static void funcB();
   private:
         A *objA;
}; 
```

编辑：我声明了静态类以使其更易于解释。我不知道正确的术语。所以问题实际上是：我如何使用静态函数中的非静态成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:25:36.013

您不能从静态函数本身访问特定于类实例的任何内容。静态函数没有“this”指针（编译器将指针传递给调用非静态函数的函数的对象实例）。您可以通过将指针传递给要修改的对象来解决此问题，但是为什么要使用静态函数呢？我的建议是避免看起来你正在尝试做的事情，但我在下面提供了两种方法（作为一个很好的学习示例）。

请参阅下面的使用示例

```
 #include <iostream>

using namespace std;

class A
{
   public:
    A(int value) : a(value){}
          void funcA();
   public:
          int a;
};

class B
{
   public:
         B()
         {
             objA = new A(12);
         }

         void funcB2()
         {
             B::funcB(*objA);
         }

         static void funcB(A const & value)
         {
            cout << "Hello World! " << value.a << endl;
         }

   private:
         A *objA;
};

int main()
{
    A a(10);
    B::funcB(a);

    B b;
    b.funcB2();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:14:16.803

我认为你不应该做这样的设计。当非静态成员未准备好时，将初始化静态函数。您说“A类链接到许多其他类并存储了许多其他信息。另一方面，由于某些Windows API线程条件，B类必须是静态的。” . 在这种情况下，你能改变你的设计，把 A 变成静态类吗？

# python - PyUsb USB 条码扫描器

> ID：14575403
> 
> 赞同：6
> 
> 时间：2013-01-29T03:56:49.793
> 
> 标签：python, ubuntu, pyusb

我正在尝试使用 Ubuntu 中的 Honeywell USB 3310g 扫描仪从条形码或 qrcode 输出字符串。我有 libusb 和一个名为 metro-usb ( [http://gitorious.org/other/metro-usb](http://gitorious.org/other/metro-usb) ) 的库，它们使我的扫描仪能够工作。如果我打开 gedit 并扫描，我成功地得到了 qrcode 数据！我需要能够务实地构建它并将数据发送到 Web 服务。

我已经下载并安装了 pyusb，这似乎是我研究中最好的解决方案。我有一个基于我在网上找到的东西的脚本，它等待扫描并成功地给我一个扫描结果。但是，我不确定如何读取数据。我得到了一系列没有任何意义的数据。我也不熟悉 USB 编程或 Python。谁能指导我从 USB 条形码扫描中获取数据字符串的最佳方法？我很可能会弄清楚其余的。另外，我收到一个错误，当我尝试 set_configuration 时，我总是必须注释掉才能让程序运行。我总是收到一个错误，说资源很忙...不确定这是否与它有关..我已经从网络上获取了这个脚本，以及来自我的 lsusb 命令的产品 ID 和供应商 ID。

```
Waiting to read... 
```

扫描时：

```
0x0 0x0 0xb 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x17 0x0 0x0 0x0 0x0 0x0
Traceback (most recent call last):
  File "reader.py", line 81, in <module>
  print lecture_code_barre()
File "reader.py", line 76, in lecture_code_barre
lecture+=NO_SCAN_CODE[data[n+2]]
KeyError: 11 
```

这是py脚本：

```
import sys
import usb.core
import usb.util

def lecture_code_barre():
VENDOR_ID = 0x0c2e
PRODUCT_ID = 0x0b61
#VENDOR_ID = 0x04b4
#PRODUCT_ID = 0x0100
DATA_SIZE = 16 # 224
NO_SCAN_CODE = {0x1E:'1', 0x1F:'2', 0x20:'3', 0x21:'4', 0x22:'5', 0x23:'6', 0x24:'7'
    , 0x25:'8', 0x26:'9', 0x27:'0', 0x28:''} # 28=enter

device = usb.core.find(idVendor=VENDOR_ID, idProduct=PRODUCT_ID)

if device is None:
    sys.exit("Could not find Id System Barcode Reader.")

if device.is_kernel_driver_active(0):   # On détache le périphérique du kernel, plus d'envoi sur stdin
    try:
        device.detach_kernel_driver(0)
    except usb.core.USBError as e:
        sys.exit("Could not detatch kernel driver: %s" % str(e))

#try:
#    device.set_configuration()
#    device.reset()
#except usb.core.USBError as e:
#    sys.exit("Could not set configuration: %s" % str(e))

endpoint = device[0][(0,0)][0]
data = []
lu = False
print "Waiting to read..."
lecture=''

while 1:
    try:
        data += device.read(endpoint.bEndpointAddress, endpoint.wMaxPacketSize)

        if not lu:
            print "Waiting to read..."
        lu = True

    except usb.core.USBError as e:
        if e.args == (110,'Operation timed out') and lu:
            if len(data) < DATA_SIZE:
                print "Lecture incorrecte, recommencez. (%d bytes)" % len(data)
                print "Data: %s" % ''.join(map(hex, data))
                data = []
                lu = False
                continue
            else:
                for n in range(0,len(data),16):
                    print ' '.join(map(hex,data[n:n+16]))
                    lecture+=NO_SCAN_CODE[data[n+2]]
                break   # Code lu
return lecture

if __name__ == '__main__':
print lecture_code_barre() 
```

带循环的设备输出：

```
....
print device.read(endpoint.bEndpointAddress, endpoint.wMaxPacketSize)
...

parallels@ubuntu:~/Documents/pyusb$ sudo python scan.py 
<usb.core.Device object at 0x7fa5f34df610>
array('B', [0, 0, 38, 0, 0, 0, 0, 0])
array('B', [2, 0, 0, 0, 0, 0, 0, 0])
array('B', [2, 0, 11, 0, 0, 0, 0, 0])
array('B', [2, 0, 22, 0, 0, 0, 0, 0])
array('B', [0, 0, 0, 0, 0, 0, 0, 0])
array('B', [0, 0, 81, 0, 0, 0, 0, 0])
array('B', [2, 0, 0, 0, 0, 0, 0, 0])
array('B', [2, 0, 24, 0, 0, 0, 0, 0])
array('B', [2, 0, 14, 0, 0, 0, 0, 0])
array('B', [0, 0, 0, 0, 0, 0, 0, 0])
array('B', [0, 0, 81, 0, 0, 0, 0, 0])
array('B', [0, 0, 11, 0, 0, 0, 0, 0])
array('B', [0, 0, 23, 0, 0, 0, 0, 0])
array('B', [0, 0, 0, 0, 0, 0, 0, 0])
array('B', [0, 0, 23, 0, 0, 0, 0, 0])
array('B', [0, 0, 19, 0, 0, 0, 0, 0])
array('B', [2, 0, 0, 0, 0, 0, 0, 0])
array('B', [2, 0, 51, 0, 0, 0, 0, 0])
array('B', [0, 0, 0, 0, 0, 0, 0, 0])
array('B', [0, 0, 56, 0, 0, 0, 0, 0])
array('B', [0, 0, 0, 0, 0, 0, 0, 0])
array('B', [0, 0, 56, 0, 0, 0, 0, 0])
array('B', [0, 0, 26, 0, 0, 0, 0, 0])
array('B', [0, 0, 0, 0, 0, 0, 0, 0])
array('B', [0, 0, 26, 0, 0, 0, 0, 0])
array('B', [0, 0, 0, 0, 0, 0, 0, 0])
array('B', [0, 0, 26, 0, 0, 0, 0, 0])
array('B', [0, 0, 55, 0, 0, 0, 0, 0])
array('B', [0, 0, 5, 0, 0, 0, 0, 0])
array('B', [0, 0, 21, 0, 0, 0, 0, 0])
array('B', [0, 0, 18, 0, 0, 0, 0, 0])
array('B', [0, 0, 26, 0, 0, 0, 0, 0])
array('B', [0, 0, 17, 0, 0, 0, 0, 0])
array('B', [0, 0, 5, 0, 0, 0, 0, 0])
array('B', [0, 0, 18, 0, 0, 0, 0, 0])
array('B', [0, 0, 0, 0, 0, 0, 0, 0])
array('B', [0, 0, 18, 0, 0, 0, 0, 0])
array('B', [0, 0, 14, 0, 0, 0, 0, 0])
array('B', [0, 0, 55, 0, 0, 0, 0, 0])
array('B', [0, 0, 17, 0, 0, 0, 0, 0])
array('B', [0, 0, 8, 0, 0, 0, 0, 0])
array('B', [0, 0, 23, 0, 0, 0, 0, 0])
array('B', [0, 0, 81, 0, 0, 0, 0, 0])
array('B', [0, 0, 22, 0, 0, 0, 0, 0])
array('B', [0, 0, 8, 0, 0, 0, 0, 0])
array('B', [0, 0, 21, 0, 0, 0, 0, 0])
array('B', [0, 0, 25, 0, 0, 0, 0, 0])
array('B', [0, 0, 12, 0, 0, 0, 0, 0])
array('B', [0, 0, 6, 0, 0, 0, 0, 0])
array('B', [0, 0, 8, 0, 0, 0, 0, 0]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T17:01:29.553

获取[快速入门指南](http://www.honeywellaidc.com/CatalogDocuments/3310-QS%20Rev%20B%205-12.pdf)，扫描“USB Serial”模式条码，然后“保存”条码以使此设置永久化。现在您的 3310g 处于串行仿真模式，请注意新的 /dev/ttyACM0 或 /dev/ttyUSB0 设备。从 python 中通过简单的文件操作读取串口：

```
f = open('/dev/ttyACM0')
print f.read(13) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:12:22.743

您收到的错误来自这一行：

```
lecture+=NO_SCAN_CODE[data[n+2]] 
```

和`data[n+2] = 11`，这相当于执行以下操作

```
NO_SCAN_CODE[11] 
```

`NO_SCAN_CODE`是一个只包含键值的字典`[30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40]`，而不是`11`.

您收到此错误的事实意味着您收到了`usb.core.USBError`, 和`len(data) >= DATA_SIZE`.

* * *

如果我正在调试它，我会添加更多的打印语句。我建议最初尝试这样简单的事情，然后在确定设备返回的内容时添加更多逻辑：

```
# Initialise variables
VENDOR_ID = 0x0c2e
PRODUCT_ID = 0x0b61

# Set up device
device = usb.core.find(idVendor=VENDOR_ID, idProduct=PRODUCT_ID)
print device

# Do more setup things here
# detach_kernel_driver and set_configuration ?
# Perhaps try these in combination with reading the usb.core documentation, and see what happens?

# Loop 10 times (to start with - try more later?)
for i in range(10):
    # Don't catch any errors, just print what the device is returning
    print device.read(endpoint.bEndpointAddress, endpoint.wMaxPacketSize) 
```

# ruby-on-rails-3 - Rails 查看 text_field 现有值与默认值

> ID：14575409
> 
> 赞同：0
> 
> 时间：2013-01-29T03:57:16.413
> 
> 标签：ruby-on-rails-3

我正在寻找一种更优雅的方式来实现这一点。

```
 <div class="control-group">
<%= f.label :shoot_date, class: "control-label" %>
<div class="controls">
  <% if @shoot.new_record? %>
    <%= f.text_field :shoot_date, :class => 'datepicker', :value => Date.today.strftime('%m/%d/%Y'), 'data-behavior' => 'datepicker', :readonly => true %>
  <% else %>
    <%= f.text_field :shoot_date, :class => 'datepicker', :value => @shoot.shoot_date.strftime('%m/%d/%Y'), 'data-behavior' => 'datepicker', :readonly => true %>      
  <% end %>
  <span class="help-block">Sitting date of this shoot.
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:28:00.110

是的，只要把它扔进控制器：

```
def new
  shoot.shoot_date = Date.today
end 
```

你不应该把它放在`edit`方法或任何东西中；这应该自动发生。如果您愿意，您甚至可以将其放入模型中，但控制器运行良好。

# wpf - 属性不存在：System.Windows.Interactivity？

> ID：14575411
> 
> 赞同：7
> 
> 时间：2013-01-29T03:57:22.130
> 
> 标签：wpf

我的 C#/WPF 在加载/解决 System.Windows.Interactivity 时一直存在问题我使用 Visual Studio 2010 作为我的编辑器并且已经安装了 Blend 4 + Blend 4 SDK，

> ……
> 
> xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity">

为什么仍然没有找到返回结果程序集？就像我的类库 CustomBehaviorLibrary 不见了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T15:59:56.460

如果它在运行时有效但在设计时无效，那么我将 VS 2010 归咎于错误。我让 VS 2010 在导入 XAML 时无法识别本地命名空间，但在 VS 2012 中打开时，它在设计器中运行没有问题。不幸的是，Visual Studio 2010 的 XAML/WPF 支持远非完美。Expression Blend 或 Visual Studio 2012 更好。

我确实喜欢 ViktorLaCroix 的建议。我会尝试

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 
```

而不是使用 clr-namespace 导入它，看看是否对您有帮助。这就是我使用它的方式，它工作正常。我还将向您展示我对图书馆的参考详细信息。

```
System.Windows.Interactivity
C:\Program Files (x86)\Microsoft SDKs\Expression\Blend\.NETFramework\v4.0\Libraries\System.Windows.Interactivity.dll
v4.0.30319 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-10T17:45:40.423

最简单的方法可能是从 NuGet 获取它：

要为 WPF 安装 System.Windows.Interactivity v4.0，请在包管理器控制台中运行以下命令

PM> 安装包 System.Windows.Interactivity.WPF

[http://www.nuget.org/packages/System.Windows.Interactivity.WPF/](http://www.nuget.org/packages/System.Windows.Interactivity.WPF/)

# javascript - Javascript 弹出窗口中的 Javascript

> ID：14575418
> 
> 赞同：0
> 
> 时间：2013-01-29T03:57:47.797
> 
> 标签：javascript

我正在使用警报功能创建一个弹出窗口，我想知道是否有办法将脚本粘贴在弹出窗口中。例如，我想制作一个 Google 广告弹出窗口。我的想法是弹出窗口将显示一个功能，而不是显示文本。它使用的函数，例如“displayAd()”，只会在弹出窗口中运行。这是我正在考虑的代码。

```
<script>

function displayAd()
{
//My Google adsense code
}

function init()//Will occur on page load.
{
alert(displayAd());
}
</script> 
```

我不相信这会奏效，但我想输入。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:05:59.570

我认为简单地创建一个位于页面中心的 div 和 AD 的内容要容易得多。

在这里，我还添加了一个 div，它将使整个页面褪色，除了 AD。

**HTML：**

```
<body onload="showAD();">   //This will show the AD as soon as the page loads

    <div id="fade">     //The fading out of the page div

    <div id="AD">           //This div is for your AD
    //GOOGLE ADSENSE CODE
    </div>
    <br>
    <button onClick="closeAD();">Close</button>     //A button to close the AD

    </div> 
```

**CSS：**

```
#fade{
    width: 100%:
    height: 100%;
    background: black;
    opacity: 0.7;
    text-align: center;
    display: none;
}

#AD{
    width: #whatever suits you#;
    height: #whatever suits you#;
    margin-top: 100px;
    margin-right: auto;
    margin-left: auto;
    display: none;
} 
```

**Javascript：**

```
function displayAD(){
    document.getElementById("fade").style.display = block;
    document.getElementById("AD").style.display = block;
    }

function closeAD(){
    document.getElementById("fade").style.display = none;
    document.getElementById("AD").style.display = none;
    } 
```

# java - 在 java 中管理 Sqlite 连接以在单线程环境中提高性能

> ID：14575419
> 
> 赞同：2
> 
> 时间：2013-01-29T03:58:10.307
> 
> 标签：java, sqlite

java中管理对SqlLite文件的读/写的最佳（最高性能）方法是什么？

**1.创建一个连接对象**

`Connection`在应用启动时创建和共享单个对象。在这种情况下，调用是否需要同步/序列化？Java 程序员似乎总是喜欢关闭连接以防止错误代码使连接处于错误状态或未关闭的语句等...

**2.为每个事务打开和关闭一个连接**

避免了上述问题，如果将来需要，是否允许代码在多线程环境中运行？我还读到一些移动版本的 java 可能需要这种行为。

我希望其他人已经在这方面有经验并且可以分享它，否则我将不得不努力学习。如果有区别，我正在使用[xerial jdbc驱动程序](https://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:23:01.723

SQLite 支持三种不同的线程模式：

*   **单线程**。在这种模式下，所有互斥锁都被禁用，SQLite 一次在多个线程中使用是不安全的。

*   **多线程**。在这种模式下，SQLite 可以被多个
    线程安全地使用，前提是没有
    在两个或多个线程中同时使用单个数据库连接。

*   **序列化**. 在序列化模式下，SQLite 可以不受限制地被多个线程安全使用。

详情见[http://www.sqlite.org/threadsafe.html](http://www.sqlite.org/threadsafe.html)

请注意，我遇到的一个多线程问题是，如果您关闭一个线程中的连接，同时仍从另一个线程中的 ResultSet 读取。如果您使用本机库，这将导致致命的访问冲突错误并使 JVM 进程崩溃。您需要在代码中检测到这种情况，而不是从 ResultSet 中读取，甚至关闭 ResultSet。

# php - 如何使用 Zend_Mail_Protocol_Imap 或 Zend_Mail_Storage_Imap 批量检索电子邮件

> ID：14575421
> 
> 赞同：7
> 
> 时间：2013-01-29T03:58:20.620
> 
> 标签：php, zend-mail

我正在使用 Zend_Mail_Storage_Imap 访问电子邮件，但使用以下代码

```
$storage = new Zend_Mail_Storage_Imap($imap);
$allIds = $storage->getUniqueId(); // i get all key value pair of meesageid and uniqueid
foreach ($allIds as $k => $v) 
{
    echo '<li>' . htmlentities($storage->getMessage($v)->subject) . "</li>\n";
} 
```

我的问题是它会循环并一次收到一封电子邮件，这很慢，就像每秒收到两封电子邮件一样非常慢。我正在寻找这些邮件的批量检索方法，但找不到任何 . 以前有人做过吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T19:20:48.013

终于明白了。

其中 $imap 是 Zend_Mail_Protocol_Imap 的实例化和连接版本：

1.  `$imap->select(); // or $imap->select('FOLDER_NAME');`

2.  `$imap->requestAndResponse('SEARCH UNSEEN', $imap->escapeString('*'))//all unread email ids`

3.  `$imap->requestAndResponse('SEARCH UNSEEN FROM "someEmail@gmail.com"', $imap->escapeString('*'))//all unread email id's from someEmail@gmail.com`

4.  `$imap->requestAndResponse('SEARCH UNSEEN SUBJECT "test" FROM "someEmail@gmail.com"', $imap->escapeString('*'))//all unread email id's from someEmail@gmail.com with the subject of test`

*您必须先执行上述 #1，否则您会得到类似的内容：“TAG# BAD SEARCH not allowed now。”

以上所有将返回一个类似于以下数组的数组：

```
//C: TAG3 SEARCH UNSEEN
//S: * SEARCH 321 323 362 371 377 384 386 387 388 389 416 417 418 
//S: TAG3 OK SEARCH completed (Success) 
//The above lines are in the format of RFC 1730 to show what was actually sent/received.

array (size=1)
  0 => 
    array (size=14)
      0 => string 'SEARCH' (length=6)
      1 => string '321' (length=3)
      2 => string '323' (length=3)
      3 => string '362' (length=3)
      4 => string '371' (length=3)
      5 => string '377' (length=3)
      6 => string '384' (length=3)
      7 => string '386' (length=3)
      8 => string '387' (length=3)
      9 => string '388' (length=3)
      10 => string '389' (length=3)
      11 => string '416' (length=3)
      12 => string '417' (length=3)
      13 => string '418' (length=3) 
```

# mysql - 从 VBA Excel 2007 打开到 MySQL 的连接

> ID：14575422
> 
> 赞同：2
> 
> 时间：2013-01-29T03:58:39.177
> 
> 标签：mysql, excel, vba, odbc, database-connection

尝试使用 ODBC 连接 Excel 和 MySQL 时出现此错误

> 未找到数据源名称且未指定默认驱动程序

这是我的 VBA 代码：

```
Sub test123()

  ' Connection variables
  Dim conn As New ADODB.Connection
  Dim server_name As String
  Dim database_name As String
  Dim user_id As String
  Dim password As String

  ' Table action variables
  Dim i As Long ' counter
  Dim sqlstr As String ' SQL to perform various actions
  Dim table1 As String, table2 As String
  Dim field1 As String, field2 As String
  Dim rs As ADODB.Recordset
  Dim vtype As Variant

  '----------------------------------------------------------------------
  ' Establish connection to the database
  server_name = "127.0.0.1" ' Enter your server name here - if running from a local       computer use 127.0.0.1
  database_name = "smss" ' Enter your database name here
  user_id = "root" ' enter your user ID here
  password = "" ' Enter your password here

  Set conn = New ADODB.Connection
  conn.Open "DRIVER={MySQL ODBC 5.2a Driver}" _
    & ";SERVER=" & server_name _
    & ";DATABASE=" & database_name _
    & ";UID=" & user_id _
    & ";PWD=" & password _

  ' Extract MySQL table data to first worksheet in the workbook
  GoTo skipextract
  Set rs = New ADODB.Recordset
  sqlstr = "SELECT * FROM inbox" ' extracts all data
  rs.Open sqlstr, conn, adOpenStatic
  With Sheet1(1).Cells ' Enter your sheet name and range here
    .ClearContents
    .CopyFromRecordset rs
  End With
  skipextract:

End Sub 
```

我添加了参考（工具参考）

ODBC 驱动程序也已安装。

实际上有什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T10:23:39.283

也许这可能会帮助你/其他人：

将此引用添加到您的项目：Microsoft ActiveX Data object 2（或您拥有的任何更高版本）

将此代码放入模块并保存：在此模块中编辑服务器详细信息。

```
'---------------------------------------------------------------------------------------
' Module     : Mod_Connection
' Author     : Krish km, xkrishx.wordpress.com
' Date       : 27/08/2014
' Purpose    : use this for build mysql connectin string.
' Declaration: © Krish KM, 2014.
'            : Free to modify and re-use as long as a clear credit is made about the orgin of the code and the link above
'            : This script is distributed in the hope that it will be useful,
'            : but WITHOUT ANY WARRANTY; without even the implied warranty of
'            : MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
'            : GNU General Public License for more details.
'---------------------------------------------------------------------------------------

Option Explicit
Public ConnectionString As String
Private Const HKEY_LOCAL_MACHINE = &H80000002

Public Function GET_CURRENT_DRIVER() As String
'---------------------------------------------------------------------------------------
' Procedure : GET_CURRENT_DRIVER
' Author    : Krish km
' Date      : 27/08/2014
' Purpose   : This function returns available mysql odbc drivers found in the registry. You could search by MySQL ODBC and get the first result
'           : but I prefer prioritize the drivers i would like to yield first
'---------------------------------------------------------------------------------------
'
    If FIND_ODBC_DRIVER(GET_ODBC_DRIVER_NAMES, "MySQL ODBC 5.2 Unicode Driver") <> "" Then
        GET_CURRENT_DRIVER = "MySQL ODBC 5.2 Unicode Driver"
    ElseIf FIND_ODBC_DRIVER(GET_ODBC_DRIVER_NAMES, "MySQL ODBC 5.2w Driver") <> "" Then
        GET_CURRENT_DRIVER = "MySQL ODBC 5.2w Driver"
    Else
        GET_CURRENT_DRIVER = FIND_ODBC_DRIVER(GET_ODBC_DRIVER_NAMES, "MySQL ODBC")
    End If

End Function

Public Function GET_CONNECTION_STRING() As String
'---------------------------------------------------------------------------------------
' Procedure : GET_CONNECTION_STRING
' Author    : Krish KM
' Date      : 27/08/2014
' Purpose   : Returns MySQL connection string
'---------------------------------------------------------------------------------------
'        
    If Not ConnectionString = vbNullString Then
        GET_CONNECTION_STRING = ConnectionString
    Else

        Dim Driver As String
        Dim mDatabase As String
        Dim mServer As String
        Dim mUser As String
        Dim mPassword As String
        Dim mPort As Integer

        mDatabase = ""          ' DB name
        mServer = ""            ' Server name
        mUser = ""              ' DB user name
        mPassword = ""          ' DB user password
        mPort = 3306            ' DB port

        Driver = GET_CURRENT_DRIVER
        If Driver = "" Then
            Err.Raise 1, Err.Source, "MYSQL ODBC drivers are missing"
            Exit Function
        End If
        ConnectionString = "DRIVER={" & Driver & "};PORT=" & mPort & ";DATABASE=" & mDatabase & ";SERVER={" & mServer & "};UID=" & mUser & ";PWD={" & mPassword & "};"
        GET_CONNECTION_STRING = ConnectionString
    End If
End Function

Public Function GET_ODBC_DRIVER_NAMES()
'---------------------------------------------------------------------------------------
' Procedure : GET_ODBC_DRIVER_NAMES
' Author    : Krish KM
' Date      : 27/08/2014
' Purpose   : Checks in the registry for any odbc driver signatures and returns the collection
'---------------------------------------------------------------------------------------
'
    Dim strComputer As String, strKeyPath As String
    Dim objRegistry As Object, arrValueNames, arrValueTypes
    strComputer = "."
    strKeyPath = "SOFTWARE\ODBC\ODBCINST.INI\ODBC Drivers"
    Set objRegistry = GetObject("winmgmts:\\" & strComputer & "\root\default:StdRegProv")
    objRegistry.EnumValues HKEY_LOCAL_MACHINE, strKeyPath, arrValueNames, arrValueTypes
    GET_ODBC_DRIVER_NAMES = arrValueNames
End Function

Public Function FIND_ODBC_DRIVER(ByVal iArr, ByVal sValue) As String
'---------------------------------------------------------------------------------------
' Procedure : FIND_ODBC_DRIVER
' Author    : Krish KM
' Date      : 27/08/2014
' Purpose   : Simple array function to check if a specific value exists. if yes return the value if not return empty string
'---------------------------------------------------------------------------------------
'
    FIND_ODBC_DRIVER = ""
    Dim iValue As Variant
    For Each iValue In iArr
        If iValue = sValue Then
            FIND_ODBC_DRIVER = iValue
            Exit Function
        End If
    Next
End Function 
```

在您的 excel 工作表按钮/宏上复制/修改此功能：根据您的请求/sql 调用更新 SQL_GET 语句。

```
Sub Retrieve_EMP_Details()
'---------------------------------------------------------------------------------------
' Procedure : Retrieve_EMP_Details
' Author    : Krish KM
' Date      : 27/08/2014
' Purpose   : connects to the database and retrieves employee details.
'---------------------------------------------------------------------------------------
'

    'Connection variables
    Dim conn As New ADODB.Connection
    Dim cmd As New ADODB.Command
    Dim rs As ADODB.Recordset

    'Get connection string and connect to the server
    On Error GoTo ERR_CONNECTION:
    conn.ConnectionString = GET_CONNECTION_STRING ' trap additional error if you want
    conn.Open

    'Preparing SQL Execution
    Dim SQL_GET As String
    SQL_GET = "SELECT * FROM tbl_employee" ' extracts all data

    cmd.Name = "EMPSearch"
    cmd.ActiveConnection = conn
    cmd.CommandText = SQL_GET

    'Execute SQL
    Set rs = cmd.Execute

    On Error GoTo ERR_READ_SQL
    If Not rs.EOF Then
        With Sheets(1).Cells ' Enter your sheet name and range here
            .ClearContents
            .CopyFromRecordset rs
        End With
    Else
        Sheets(1).Range("A1").value = "No records found :("

    End If

EXIT_SUB:
    On Error Resume Next
    Set conn = Nothing
    Set cmd = Nothing
    Set rs = Nothing
    Exit Sub

ERR_CONNECTION:
    MsgBox "Sorry unable to connect to the server.." & vbNewLine & "Connection string: " & GET_CONNECTION_STRING & vbNewLine & "System Msg: " & Err.Description
    GoTo EXIT_SUB

ERR_READ_SQL:
    MsgBox "Sorry unable read/wite results on the sheet.." & vbNewLine & "System Msg: " & Err.Description
    GoTo EXIT_SUB
End Sub 
```

如果您安装了 ODBC 驱动程序，则提供所有服务器详细信息，并调整 SQL 语句。只需执行 sub_routine {Retrieve_EMP_Details}，您应该能够在 sheet(1) 中看到结果

希望这会有所帮助并享受:)

**克里什公里**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T11:41:49.923

这个网站上有很多文章描述了类似的问题。特别是，[这个链接](https://stackoverflow.com/questions/7690608/adodb-connection-from-vba-stopped-working)中有几个指针是正确的。

在你上面的代码中，有一行特别让我觉得很麻烦：

```
Dim conn As New ADODB.Connection 
```

紧随其后的是

```
Set conn = New ADODB.Connection 
```

第二个以一种让我感到不舒服的方式覆盖第一个 - 尽管我不能确切地告诉你出了什么问题，除了你正在创建两个新的连接......

试试这个 - 以及链接文章中推荐的其他修复。祝你好运。

# ios - iOS：隐藏底部UITabbar控制器

> ID：14575425
> 
> 赞同：1
> 
> 时间：2013-01-29T03:58:57.903
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我正在使用`UINavigationController`并且`UITabbar` [喜欢这个](http://mocku.ps/tq871b)。

从图像中你可以看到图表，当我从图像“6”点击到图像“2”时，我想隐藏 tabbarcontroller，对我来说非常困难。

我试过了

> self.tabBarController.hidesBottomBarWhenPushed = YES;

但是 uitabbar 在返回图像“2”时仍然显示

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:35:14.877

图表（故事板）令人担忧。你真的要按它说的去做吗？有一个圆圈；这肯定是不对的。

请记住，当您使用 segue 时，您正在创建此视图控制器的*新*实例。因此，您正在创建 2，然后是 3，然后是 4，然后是 5，然后是 6，然后在其之上创建另一个 2，在视图控制器的潜在无限循环中堆积。

当然，当你到达 6 时，你想做的就是一直*放松*回到 2。你想移除 6，移除 5，移除 4，移除 3，让你回到 2。

或者也许你想要一个2 的*不同*实例，显示在 6 之上，但它应该是不同的，而不是循环从 6 返回的同一个实例。在情节提要中拥有多个相同视图控制器的实例是很好的，并且它们可以进行不同的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:55:34.427

故事板有一个循环，它不能那样工作。我建议您将登录屏幕从流程中取出并在代码中实例化它。因此，它可以在任何地方轻松使用。

首先断开所有segue，然后将其嵌入导航控制器中。给导航控制器一个标识符，然后使用：

```
[storyboard instantiateViewControllerWithIdentifier:@"MyViewController"]; 
```

然后以模态方式呈现它，它将覆盖底部栏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:21:57.970

您正在推送的 UIViewController 应该设置此属性。

这是一个例子：

```
MyAppViewController *controller = [[MyAppViewController alloc] init];

controller.hidesBottomBarWhenPushed = YES; 
```

您正在推送 viewController，因此使用此属性的方法适用于正在推送到导航堆栈的 viewController。

请记住： hidesBottomBarWhenPushed 仅在视图控制器被推送时起作用，并且在模态呈现时不会按预期工作

# mongodb - Mongo DB 的 peek 利用率给出了错误的值

> ID：14575426
> 
> 赞同：0
> 
> 时间：2013-01-29T03:58:59.590
> 
> 标签：mongodb

我们在基于 Java EE 的应用程序中使用 Mongo DB。根据我们应用程序的架构，Mongo DB 通过不同的线程不断更新（保持 Mongo DB 始终忙碌）。

因此，Mongo DB 一直忙于读取、写入和更新。

我们有一个担忧。我们观察到的是，当 Mongo DB 处于其 peek 利用率时**（通过`top`linux 中的命令知道）**，来自 Mongo DB 的读取会获取错误的值。

有时这是可重现的，有时则不是，这取决于负载。

请让我们知道如何解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:29:25.140

由于使用 SlaveOk:true 时 mongoDB 中的异步复制，您还从辅助节点读取，但数据肯定不存在。特别是当你有很大的负载时，网络上的复制会变慢，这称为复制滞后，你可以检查它：[http://docs.mongodb.org/manual/reference/method/db.printSlaveReplicationInfo/#db。 printSlaveReplicationInfo](http://docs.mongodb.org/manual/reference/method/db.printSlaveReplicationInfo/#db.printSlaveReplicationInfo)

如果您使用 slaveOk : false 关闭从辅助节点的读取，您的应用程序将从主节点读取，以减少在这种情况下使用分片的负载，并且如果您有适当的复制结构，则不必担心主节点会出现故障，一个辅助节点将接管。

# javascript - 将局部变量分配给全局对象时会发生什么？

> ID：14575429
> 
> 赞同：3
> 
> 时间：2013-01-29T03:59:25.157
> 
> 标签：javascript

请忽略这可以在没有变量的情况下重写。只是举个简单的例子。

```
window.onload = function() {
    var a = document.body, b = function() {console.log(1)};
    a.onkeydown = b;
}; 
```

我知道会发生什么：它有效。但是怎么做？

如果`b`是一个全局变量，解释器将存储对它的引用。在这个例子中，当局部变量被销毁时，解释器是否存储了对局部变量的引用，只是为了替换它，我假设是函数的副本？还是对局部变量的引用仍然存储在幕后某处，然后被重新使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T04:03:30.273

函数（和其他对象）总是通过引用传递。`b`不包含函数，而是指向它。当您分配时`a.onkeydown = b`，您`a.onkeydown`指向的是同一个函数对象。然后函数结束，因此局部`b`变量被销毁但它指向的函数仍然存在 - 如果没有其他东西指向它，它只会被垃圾收集器删除。

# algorithm - 算法 - 找到数组中两个数字之和的最大数字

> ID：14575430
> 
> 赞同：2
> 
> 时间：2013-01-29T03:59:29.450
> 
> 标签：algorithm

描述：

给定一个由 n 个正整数组成的数组，找到使 C=A+B 的最大 C。A,B,C 都在给定的数组中。

例子：

1 1 1 4 5 5 6 6 10 9 C=10

1 3 6 C=-1，表示最大的C不存在

我正在寻找一种小于 O(n^3) 的算法，谁能给我一些指导？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T04:08:57.663

对列表进行排序。从最大到最小迭代 C，从最小到 C 的值迭代 B。到目前为止，它是 O(n^2)。对于每个 (C, B) 对，计算 A，您只需要查找它是否在数组中。您可以对 O(n^2 log n) 的总时间使用二进制搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:07:22.600

O(n^2) 基于@valtron 的算法就足够了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-11T12:08:46.527

**更高效的解决方案：**

> 1 1 1 4 5 5 6 6 9 10 10

*   对数组进行排序
*   保留 3 个指针 C、B 和 A。
*   将 C 保持在最后，将 A 保持在 0 索引，将 B 保持在第 1 索引。
*   **使用指针 A 和 B**遍历数组直到 C 并检查 A+B=C 是否存在。
    如果它存在，那么 C 就是你的答案。
*   否则，**将 C 移回一个位置**并再次遍历，将 A 保持在 0 并将 B 保持在第一个索引。

继续重复此操作，直到您获得总和或 C 在第一个索引处达到。

***这是完整的解决方案：***

```
int arr[] = new int[]{1,1,1,4,5,5,6,6,10,9};
Arrays.sort(arr);

        int n=arr.length;
        int a,b,c,sum,max=-1;

        for(c=n-1;(c>1)&& (max==-1);c--){       // loop through C
            for(a=0;(a<c-1)&&(max==-1);a++){    // loop through A
                for(b=a+1;b<c;b++){             // loop through B
                    sum=arr[a]+arr[b];
                    if(sum==arr[c]){
                         System.out.println("A: "+arr[a]+" B: "+arr[b]);
                        max=arr[c];
                        break;
                    }
                    if(sum>arr[c]){ // no need to go further
                        break;
                    }
                }
            }
        }

System.out.println(max); 
```

# javascript - json - 如何正确创建 json 数组

> ID：14575433
> 
> 赞同：0
> 
> 时间：2013-01-29T03:59:49.733
> 
> 标签：javascript, jquery, json

我是 JSON 新手，我必须处理一个复杂的问题。

请看下图：

![在此处输入图像描述](../Images/3400ad3bed3e0bd43bce86ae262dd041.png)

它有一个错误：

![在此处输入图像描述](../Images/69a08df3ab0f30ddd0872f125a37907c.png)

我不知道如何正确分离 2 个 json 数组。我什至尝试使用`:`而不是`,`第 18 行，但仍然出现错误。顺便说一句，我使用[http://jsonlint.com/](http://jsonlint.com/)进行验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:01:45.563

在第 2 行，您提供了一个密钥，但在第 19 行没有这样做。您必须保留结构。

删除第 2 行的键，它们不应该以这种方式用于数组。

编辑：此外，您正在尝试将数组放在对象中，将开始和结束对象标记 ({}) 与 ([]) 切换为第一行和最后一行上的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:06:48.180

```
[
  [
    {...},
    {...},
    ...
    {...}
  ],
  [
    {...},
    {...},
    ...
    {...}
  ],
  ...
  [
    {...},
    {...},
    ...
    {...}
  ]
] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T04:23:39.293

我相信构建这个 JSON 的正确方法应该是：

```
{
  "glEntries": [
    {
        "generalLedgerId":1,
        "accountId": 34,
        "amount" : 32334.23,
        "descripction": "desc1",
        "debit" : "Yes"
    },
    {
       "generalLedgerId":2,
        "accountId": 35,
        "amount" : 323.23,
        "descripction": "desc",
        "debit" : "Yes"
    },
    ...
 ]
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T04:24:07.713

构造 JSON 数据的方法有很多，但这取决于您的数据以及您想要呈现它的方式。这里有几个例子 - 希望它有所帮助：

```
{
    "glEntries": [
        {
            "object1-prop1": "one"
        },
        {
            "object2-prop1": 1,
            "object2-prop2": "two"
        },
        {
            "object3-prop1": [
                "a",
                "r",
                "r",
                "a",
                "y"
            ],
            "object3-prop1.1": "string"
        }
    ],
    "otherEntries": [
        {
            "objectx": "x"
        },
        {
            "objecty": "y"
        },
        {
            "objectz": [
                1,
                2,
                3,
                4
            ]
        }
    ],
    "oneEntry": "json"
} 
```

其他示例：

```
[
    {
        "obj1-prop": 222
    },
    {
        "obj2-prop": "object2"
    },
    {
        "obj3-prop": "Object3"
    },
    [
        "a",
        "r",
        "r",
        "a",
        "y",
        777,
        888
    ],
    "string",
    178,
    {
        "objectProp": "testing123"
    }
] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T04:25:10.180

您拥有的`{}`不仅仅是需要，而且会使解析 JSON 变得更加困难：

结构会像这样更好地工作：

```
{"glentries":[

    { "property1":"value", "property2" : "value",.....  "lastProperty": "value"},
    { "property1":"value", "property2" : "value",.....  "lastProperty": "value"},
    { "property1":"value", "property2" : "value",.....  "lastProperty": "value"}

 ]
} 
```

现在 glentries 是一个具有多个属性的对象数组。

```
 alert( glentries[0].property2 ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T04:01:10.290

父结构是一个对象，因此它需要第二个数组的字符串键。它应该是一个数组数组，你应该使用一个数组而不是一个对象。

# javascript - 谷歌地图未在 Internet Explorer 中加载

> ID：14575436
> 
> 赞同：1
> 
> 时间：2013-01-29T03:59:58.457
> 
> 标签：javascript, internet-explorer, google-maps-api-3, internet-explorer-9

Internet Explorer 不会加载地图，但如果您按 F12 并打开开发人员工具然后点击刷新，它会加载地图。

[http://www.jaycodesign.co.nz/wp-content/uploads/demos/StreetView/](http://www.jaycodesign.co.nz/wp-content/uploads/demos/StreetView/)

它应该通过下面的 jQuery 代码加载地图，但事实并非如此。

```
 $(document).ready(function() {      
        console.log("doc ready");               
        load_map_and_street_view_from_address("12 Boston Rd, Boston");

        $('#change_street').click(function(){
            $('form').submit();
        });

    }); 
```

如何让 IE 加载地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:12:45.277

知道了

删除了 console.log("doc ready");

我发帖后才看到这个

[只有在 Internet Explorer 开发人员工具栏可见时，JavaScript 脚本才能在 Internet Explorer 上运行](https://stackoverflow.com/questions/6889376/a-javascript-script-only-works-on-internet-explorer-when-the-internet-explorer?rq=1)

# ios - Core Data 的线程错误

> ID：14575438
> 
> 赞同：2
> 
> 时间：2013-01-29T04:00:06.917
> 
> 标签：ios, xcode, core-data, nsmanagedobject, uimanageddocument

我正在开发一个与服务器通信并保存到核心数据的应用程序。

在 appDelegate 中，我启动了我的单例对象并调用 useDocument 来初始化 UIManagedDocument：

```
- (void)useDocument
{
    if (![[NSFileManager defaultManager] fileExistsAtPath:self.database.fileURL.path]){ 

        [self.database saveToURL:self.database.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:nil];

    } else if (self.database.documentState == UIDocumentStateClosed){

        [self.database openWithCompletionHandler:nil];
    }
} 
```

这是从服务器接收数据后的代码：

```
- (void)downloadCompletedWithData: (NSData *)data item: (TPDownloadItem *)finishedItem;
{
    // parse data and update core
    NSError *error;
    id dataObject = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingAllowFragments error:&error];
    if (dataObject && !error){

        dispatch_async(dispatch_get_main_queue(), ^{

            [User createUserWithInfo:dataObject inManagedContext:self.database.managedObjectContext];
        });
    }
} 
```

这是写入核心数据的代码：

```
+ (id)createUserWithInfo: (NSDictionary *)userInfo inManagedContext: (NSManagedObjectContext *)aContext
{
    NSError *error;
    User *aUser = [NSEntityDescription insertNewObjectForEntityForName:ENTITY_NAME inManagedObjectContext:aContext];

    NSString *userID = [userInfo objectForKey:USER_ID];

    aUser.userID = userID;
    aUser.effective = [NSNumber numberWithBool:[[userInfo objectForKey:USER_EFFECTIVE] boolValue]];
    aUser.job = [userInfo objectForKey:USER_JOB];
    aUser.gender = [userInfo objectForKey:USER_GENDER];

    return aUser;
} 
```

问题是，每当核心数据尝试自动保存（等待大约 30 秒）时，应用程序就会崩溃并出现以下错误：

![](../Images/b97333936eefe07b9dc6acc77373ecb1.png)

我尝试使用 GCD 在主线程中调用“useDocument”和“createUser”，还覆盖 UIDocument“contentsForType”以确保它在自动保存后立即发生，文档状态在保存之前是正常的，并且还创建了持久性存储文件。

*   有没有人遇到过类似的情况？很感谢任何形式的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:59:21.300

问题已经解决了，我不得不关闭并重置我的手机才能让它工作......

但仍然不知道为什么会发生这种情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:04:28.867

托管上下文不是线程安全的，但您可以拥有任意数量的托管上下文，这可能与此有关。也许删除异步调度，您不需要它，因为您在主线程上执行代码。

我在数据管理器类中创建了一个后台托管上下文，我在其中进行所有写入，当我需要时，我会监听一个通知名称 MANAGEDCONTEXTDIDSAVE 并在需要时重新加载。

奇迹般有效。

# ruby-on-rails - Rails 路由问题：在“创建”失败时，重新呈现表单（应该如此），但不在我的路由中的 URL 处

> ID：14575442
> 
> 赞同：3
> 
> 时间：2013-01-29T04:00:34.753
> 
> 标签：ruby-on-rails, routes

RESTful 资源，默认类型路由。创建事件应该如下工作：

```
def create
    @event = current_user.events.build(params[:event])
    if @event.save
        redirect_to @event, :flash => { :success => "Event created!" }
    else
        render :action => "new" # new_event_path
    end
end 
```

当输入无效数据时，它*会*再次呈现“新”视图/表单，但它会在“localhost:3000/events”URL 上呈现此视图，“index”操作/视图应该在该位置。

我的活动路线似乎应该是可以预测的：

```
 resources :events 
```

我刚刚更新到 Capybara 2，开始使用 DatabaseCleaner，并将 transactional_fixtures 设置为 false 以准备测试一些支持 JS 的功能，但我想不出任何其他方式我可能已经把它塞满了。

是否有一些我遗漏的简单事情可能会导致像这样奇怪的路由混乱？

想法，任何人，从哪里开始排除故障？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:03:42.483

这是正确的行为。发生的事情是它在发出创建操作时使用该 URL 的 POST 方法。在 URL 处使用 GET 将是索引操作。另请注意，呈现不同的模板不会更改 URL（这需要重定向）。

查看 Rails 路由文档中的第 2.2 节：http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:41:28.960

当您从提交表单创建事件时，您使用 post 方法到 /events 路由。当数据变为无效时，rails 在 /events 地址为您的 /events(POST) 请求呈现事件/新事件。

但是你可以

```
redirect_to action: "new", event: @event.attributes 
```

并添加到新动作

```
@item = Item.new(params[:item].except('protected attributes','created_at', 'updated_at', 'id')) 
```

# multithreading - 在没有同步的情况下访问共享内存会停止进程或线程吗？

> ID：14575446
> 
> 赞同：-1
> 
> 时间：2013-01-29T04:01:10.870
> 
> 标签：multithreading, concurrency, shared-memory, scheduler

总结：有一个读线程和一个写线程访问同一个内存空间，但没有同步。是否存在任何运行时错误（非逻辑错误）或破坏进程或线程的风险？

我正在尝试制作一个简单的任务调度程序。

有一些工作线程，它们有自己的任务队列。

任务调度程序将任务推送到工作队列。

我希望调度程序知道最不忙的线程，其队列最短。

所以我需要一些共享整数变量来存储每个队列的长度。

每个工作线程将自己的队列长度写入特定变量。

调度程序读取这些变量以了解最短的变量。

所以每个变量都有一个读和一个写。

这是 RW 问题，我需要一个互斥锁。

但我不想要任何开销并且知道队列的确切长度。

所以我想让线程在不同步的情况下访问共享值。

有什么问题，没有不准确的价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:21:51.937

没有法律规定，对于所有平台、所有语言和所有标准，当两个线程在没有同步的情况下访问相同的内存空间时必须发生什么。一些平台可能允许它并自己添加同步。这不是不可能的。有些人可能会在所有情况下对其进行测试，并保证该过程会崩溃。这也不是不可能。

尽管这个问题很笼统，但答案可能是任何东西。你不妨问“如果我做了不该做的事会怎样？”

例如，POSIX 允许进程崩溃。对于对齐的 32 位访问，Win32 要求它在最坏的情况下提供过时的值。没有普遍规律。

# c++ - 素数程序中的错误 (C++)

> ID：14575447
> 
> 赞同：0
> 
> 时间：2013-01-29T04:01:41.993
> 
> 标签：c++, primes

> **可能重复：**
> [C++素数程序](https://stackoverflow.com/questions/14574823/c-prime-numbers-program)

我正在开发一个 c++ 程序来计算 3 和整数“x”之间的所有素数。当我输入 10 作为 'x' 我得到输出： 3 5 5 5 7 7 7 7 7 9

谁能告诉我如何解决这个问题？

```
#include <iostream>
#include <cmath>

using std::cout;
using std::endl;
using std::cin;

int main(){

   int x;
   int i;
   int j;

   cout << "Please enter an integer 'x' greater than 3: " << endl;

   cin >> x;

   if (x <= 3){

        cout << "Please enter new value 'x' greater than 3: " << endl;

        cin >> x;
   }
        for(int i=3; i<=x; i++){
                for(j=2; j<i; j++){
                   if(i%j == 0)
                        break;
                   else if(i == j+1);
                        cout << i << endl;
                   }
        }
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T04:05:06.237

违规线路：

```
else if(i == j+1); 
```

删除分号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:05:15.703

您可能想查看[埃拉托色尼筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。

# jquery - jquery.validate.unobtrusive.js 正在杀死我的 selectList()

> ID：14575451
> 
> 赞同：2
> 
> 时间：2013-01-29T04:02:01.873
> 
> 标签：jquery, asp.net-mvc-4, jquery-validate, unobtrusive-validation

或者也许是相反的方式？

我是新的 MVC，所以要温柔。我可以从 a 中选择一个值，`Html.DropDownList`并在保存时填充到模型中。但是，如果我单击开箱即`jQuery.Validate`用，则会向我咆哮，并出现有关空数据的错误。

这是错误

```
+       this    function( selector, context ) {
        // The jQuery object is actually just the init constructor 'enhanced'
        return new jQuery.fn.init( selector, context, rootjQuery );
    }   Object, (Function) 
```

这是视图

```
@model Game.Domain.Equipment

<div class="editor-label">
    @Html.LabelFor(model => model.BaseGameObject.Name)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.BaseGameObject.Name) @Html.ValidationMessageFor(model => model.BaseGameObject.Name)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.BaseGameObject.Description)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.BaseGameObject.Description) @Html.ValidationMessageFor(model => model.BaseGameObject.Description)
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.Type)
</div>

<div class="editor-field">
    @Html.DropDownListFor(model => model.Type, new SelectList(Enum.GetValues(typeof(Game.Domain.EquipmentType))))
</div>

<div class="editor-label">
    @Html.LabelFor(model => model.Value)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.Value) @Html.ValidationMessageFor(model => model.Value)
</div> 
```

这是模型

```
namespace Game.Domain
{
    public class Equipment
    {
        public Equipment()
        {
            BaseGameObject = new BaseGameObject();
        }

        public virtual int Id { get; set; }
        public virtual BaseGameObject BaseGameObject { get; set; }
        public virtual EquipmentType Type { get; set; }

        public virtual int Value { get; set; }
    }
} 
```

我试图用 jquery 关闭 jvalidate jquery

```
$(function () {
    var select = $('select');
    $('select').attr("willValidate", false)
}); 
```

但无论我尝试什么，我都会一遍又一遍地得到相同的 jvalidate 错误。它该死的烦人=）

# php - 使用 imagick montageImage PHP

> ID：14575452
> 
> 赞同：1
> 
> 时间：2013-01-29T04:02:11.770
> 
> 标签：php, imagemagick, imagick, montage

我想使用 imagemagick 从我服务器上的现有照片制作蒙太奇。我很难让任何代码正常工作。我尝试使用通过搜索找到的几个示例，但它不起作用。

[http://us1.php.net/imagick](http://us1.php.net/imagick)漂亮地勾勒了图书馆的轮廓，但没有蒙太奇示例。我只需要一个适当的例子来让我站稳脚跟，我通常可以从那里开始。

有谁知道学习 imagick for PHP 的好资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:13:21.673

这是[montageImage 的一个工作示例](https://web.archive.org/web/20100612225933/http://valokuva.org/?p=72)。该示例对照片进行颜色分析。为确保它正常工作，您需要确保：

1.  你有一个有效的“test.png”。

2.  从 imagick 3.1.0 开始不推荐使用 imagick::clone 以支持使用 clone 关键字。因此，如果您有 imagick 3.1.0，则需要更改第 13 行和第 17 行。

    $bright = $average->clone();

到

```
$bright = clone $average; 
```

和

```
$dark = $average->clone(); 
```

到

```
$dark = clone $average; 
```

祝你好运。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T04:04:07.510

您是从基本示例开始的吗？

```
http://us1.php.net/manual/en/imagick.examples-1.php 
```

# java - 工厂班

> ID：14575457
> 
> 赞同：53
> 
> 时间：2013-01-29T04:02:56.903
> 
> 标签：java, oop, object, factory

就我个人而言，我从来没有理解工厂类的概念，因为直接实例化一个 Object 似乎更有用。我的问题很简单，在什么情况下使用工厂类模式是最佳选择，出于什么原因，一个好的工厂类是什么样的？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-01-29T08:33:27.210

这是我的代码库中的一个真实的工厂。它用于生成一个知道如何从某个数据集中采样数据的采样器类（它最初是在 C# 中，所以请原谅任何 java 错误）

```
class SamplerFactory
{
  private static Hashtable<SamplingType, ISampler> samplers;

  static
  {
    samplers = new Hashtable<SamplingType, ISampler>();
    samplers.put(SamplingType.Scalar, new ScalarSampler());
    samplers.put(SamplingType.Vector, new VectorSampler());
    samplers.put(SamplingType.Array, new ArraySampler());
  }

  public static ISampler GetSampler(SamplingType samplingType)
  {
    if (!samplers.containsKey(samplingType))
      throw new IllegalArgumentException("Invalid sampling type or sampler not initialized");
    return samplers.get(samplingType);
  }
} 
```

这是一个示例用法：

```
ISampler sampler = SamplerFactory.GetSampler(SamplingType.Array);
dataSet = sampler.Sample(dataSet); 
```

如您所见，它的代码并不多，甚至可能会更短更快

```
ArraySampler sampler = new ArraySampler();
dataSet = sampler.Sample(dataSet); 
```

而不是使用工厂。那我为什么还要打扰呢？嗯，有两个基本原因，它们相互依赖：

1.  首先是代码的简单性和可维护性。假设在调用代码中，`enum`是作为参数提供的。即，如果我有一个需要处理数据的方法，包括采样，我可以写：

    ```
    void ProcessData(Object dataSet, SamplingType sampling)
    {
      //do something with data
      ISampler sampler = SamplerFactory.GetSampler(sampling);
      dataSet= sampler.Sample(dataSet);
      //do something other with data
    } 
    ```

    而不是更繁琐的构造，如下所示：

    ```
    void ProcessData(Object dataSet, SamplingType sampling)
    {
      //do something with data
      ISampler sampler;
      switch (sampling) {
        case SamplingType.Scalar:  
          sampler= new ScalarSampler();
          break;
        case SamplingType.Vector:  
          sampler= new VectorSampler();
          break;
        case SamplingType.Array:
          sampler= new ArraySampler();
          break;
        default:
          throw new IllegalArgumentException("Invalid sampling type");
      }
      dataSet= sampler.Sample(dataSet);
      //do something other with data
    } 
    ```

    请注意，每次我需要采样时都应该编写这个怪物。你可以想象，如果我在`ScalarSampler`构造函数中添加了一个参数，或者添加了一个新的`SamplingType`. 而这个工厂现在只有三个选项，想象一个有 20 个实现的工厂。

2.  其次，是代码的解耦。当我使用工厂时，调用代码不知道或不需要知道被调用的类`ArraySampler`甚至存在。该类甚至可以在运行时解析，调用站点也不会更明智。因此，因此，我可以随意更改`ArraySampler`类，包括但不限于彻底删除类，例如，如果我决定也`ScalarSampler`应该将 用于数组数据。我只需要换行

    ```
    samplers.put(SamplingType.Array, new ArraySampler()); 
    ```

    到

    ```
    samplers.put(SamplingType.Array, new ScalarSampler()); 
    ```

    它会神奇地工作。我不必更改调用类中的一行代码，这可能有数百个。实际上，工厂使我能够控制采样发生的内容和方式，并且任何采样更改都有效地封装在与系统其余部分接口的单个​​工厂类中。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-29T04:06:02.713

这里的想法是关注点分离：如果使用对象的代码也有足够的信息来实例化它，则不需要工厂。但是，如果涉及某些您不希望 API 用户考虑（或弄乱）的逻辑或配置，您可以在工厂中隐藏所有这些（并将其封装以供重用）。

下面是一个示例：您想要访问 Google App Engine 提供的一项服务。相同的代码应该在开发环境（有两个版本，主从和高可用）和完全不同的本地开发环境下都可以工作。谷歌不想告诉你他们内部基础设施的内部运作，你也不想知道。所以他们所做的是提供接口和工厂（以及这些接口的几个实现供工厂选择，您甚至不需要知道）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T04:08:05.567

就个人而言，当接口的实现在运行时未知或者可以动态化时，我会使用工厂模式。

这意味着作为开发人员，我使用对象实例的已知接口，但我不关心实现的工作方式。

举个例子。您可以使用工厂模式为您提供数据库中的对象。您不关心该数据库是平面文件、本地/单用户数据库、服务器数据库还是 Web 资源，只要工厂可以生成和管理这些对象。

我不想为每种情况编写实现：P

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-29T04:43:22.673

来自 Joshua Bloch 的 Effective Java 书，由我部分重写：

1) 与构造函数不同，静态工厂方法 ( **SFM** ) 有名称。

```
public static ComplexNumber one () {
    return new ComplexNumber(1, 0);
}

public static ComplexNumber imgOne () {
    return new ComplexNumber(0, 1);
}

public static ComplexNumber zero () {
    return new ComplexNumber(0, 0);
} 
```

2) 不需要每次`SFM`调用都创建一个新对象

```
public static Boolean valueOf(boolean b) {
    return b ? Boolean.TRUE : Boolean.FALSE; 
} 
```

3)`SFM`可以返回其返回类型的任何子类型的对象。

4)`SFM`减少创建参数化类型实例的冗长。

```
public static <K, V> HashMap<K, V> newInstance() {
    return new HashMap<K, V>();
}

Map<String, List<String>> m = HashMap.newInstance(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T04:08:19.490

为了补充 Thilo 的答案，让我们假设您有一个对象，它只有一个布尔值作为构造函数：每次都构建一个完全是浪费，因为它只有两个可能的值。

在这种情况下，您可以创建静态工厂方法。Java 的`Boolean`类就是一个例子：`Boolean.valueOf()`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-29T04:10:50.487

您可以参考[维基百科](http://en.wikipedia.org/wiki/Factory_method_pattern)，但大多数设计模式的基本思想是引入一些抽象以实现更好的可维护性和/或可重用性。工厂方法模式也不例外，它所做的就是从代码中抽象出创建的复杂性。

对于简单的情况，似乎没有必要使用工厂模式，一个简单`new`的就足够了。但是当您需要更多的灵活性或功能时，这种模式可能会有所帮助。

例如，除非需要新实例，否则静态工厂`valueOf(boolean)`通常是比 更好的选择`new Bealean(boolean)`，因为它避免了创建不必要的对象。工厂方法模式也称为**Virtual Constructor**。众所周知，多态是OOP的关键特性之一，但构造函数不能是多态的，这个缺点可以通过工厂方法模式来克服。

本质上，直接实例化一个对象（通常是通过`new`）几乎不是一个具体的*实现*，而工厂方法模式通过一个*稳定的***接口**（不限于 Java 中）屏蔽了一个*volatile的* **实现**，将创建对象的逻辑推到了一些抽象后面，以确保更具可维护性和可重用性的代码。 ***`interface`***

 ***归根结底，要充分理解工厂方法模式和其他设计模式的好处，需要掌握OOP的本质，包括[数据抽象](http://en.wikipedia.org/wiki/Abstraction_%28computer_science%29#Data_abstraction)、多态抽象和[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T04:09:22.563

工厂本身并没有那么容易展示它的美丽。当您将它与其他模式结合时，您会看到真正的好处，例如，如果您想使用装饰器模式，直接实例化一个对象可能会为您的代码添加一些额外的耦合。正如 OOP 老师所说，耦合是不好的 :) 所以如果你要实例化装饰对象并且不想增加耦合，那么你可以使用工厂。***

# javascript - 使用 .replacewith 更改图像但保持 id。之后，图像不再在悬停时触发功能

> ID：14575463
> 
> 赞同：0
> 
> 时间：2013-01-29T04:03:47.963
> 
> 标签：javascript, jquery, html, dom-manipulation, jquery-hover

当用户将鼠标悬停在带有包含复选框`"id=dot0001"`的表格的图像上时，该表格变为可见。当用户选中该框时，图像将替换为具有相同 ID 的图像。该部分工作正常，用户可以根据需要检查和取消选中，图像被正确替换。问题：当用户离开图像后再次将鼠标悬停在图像上时，表格不会出现。`id= "info0001"``id="checkbox0001"``id="dot0001"`

这里我定义了函数：

```
function makevisible(a){ 
    $("#tablespace").after(
        '<table  border="4" id="info'+a+'"class="info'+a+'">'+
        '<tr><td>Add to favorits</td><td><input name="" type="checkbox" id="checkboxinfo'+a+'" value=""></td></tr>')

        $("#info"+a).css("visibility", "hidden")

        $('#checkboxinfo'+a).change(function() {

        if($('#checkboxinfo'+a).is(':checked')){
    $('#dot'+a).replaceWith('<img src="_index/_dots/dotfavorit.gif" id="dot'+a+'" class="dot'+a+'">')
        }
else{
    $('#dot'+a).replaceWith('<img src="_index/_dots/dotnormal.gif" id="dot'+a+'" class="dot'+a+'">')  
    }   
    })

}; 
```

这里我使用函数：

```
$(document).ready(function() {
    $("#dot0002").hover(makevisible("0002"))
    }) 
```

这使得表格在添加到 html 后可见和隐藏：

```
 $(document).ready(function() {

$("#dot0002").hover(
  function(){
    $("#info0002").css({"visibility":"visible"});
  },
  function(){
    $("#info0002").css({"visibility":"hidden"});
  }
);

$("#info0002").hover(
  function(){
    $(this).css({"visibility":"visible"});
  },
  function(){
    $(this).css({"visibility":"hidden"});
  }
);
}); 
```

这是一个小提琴：http: [//jsfiddle.net/QzX9C/](http://jsfiddle.net/QzX9C/)

我认为问题是 jQuery 在替换后找不到与 id 关联的图像。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:09:09.710

因为您将元素动态添加到 DOM，所以该`Hover`函数不会附加到您的新元素：

这：

```
$("#dot0002").hover(
function () {
    $("#info0002").css({"visibility": "visible"});
},
function () {
    $("#info0002").css({"visibility": "hidden"});
}); 
```

不会附加到图像上，因为它是通过这行代码动态注入到 DOM 中的：

```
$('#dot'+a).replaceWith('<img src="_index/_dots/dotfavorit.gif" id="dot'+a+'" class="dot'+a+'">') 
```

除非您通过向 .change() 函数添加悬停触发器来重新附加它

```
$('#checkboxinfo' + a).change(function () {
    if ($('#checkboxinfo' + a).is(':checked')) {
        $('#dot' + a).replaceWith('<img src="_index/_dots/dotfavorit.gif" id="dot' + a + '" class="dot' + a + '">')
    } 
    else {
        $('#dot' + a).replaceWith('<img src="_index/_dots/dotnormal.gif" id="dot' + a + '" class="dot' + a + '">')
    }

    //Add this code at the end to reattach the hover event on the newlly injected image
    $('#dot' + a).hover(
    function () {
        $("#info" + a).css({"visibility": "visible"});
    },
    function () {
        $("#info" + a).css({"visibility": "hidden"});
    });
}) 
```

这是您的小提琴更新：[链接...](http://jsfiddle.net/U8XtA/1/)

# jpa - 限制 Play 中单对多关系的记录！框架

> ID：14575465
> 
> 赞同：0
> 
> 时间：2013-01-29T04:03:54.923
> 
> 标签：jpa, playframework

我正在尝试确定在 Play 中使用 JPA 时查询 OneToMany 关系的子项时分页/限制返回行的最佳方法！框架。

```
@Entity
public class User extends Model {

    @OneToMany(mappedBy="user", cascade=CascadeType.ALL) 
    public List<CaseFolder> caseFolders;

}

public class CaseFolder extends Model {

    @Required
    @ManyToOne 
    public User user;

    @Required
    public String number;

    public String description;

} 
```

我意识到我可以设置延迟获取的关系。但是，这似乎仍然不能阻止我在最终访问 user.caseFolders 时检索整个 CaseFolders 列表。

理想情况下，我希望能够执行以下操作：

```
user.getCaseFolders().start(100).limit(10) 
```

但我找不到任何关于“开箱即用”的做法。

每个人真的每次需要几个一米关系的“孩子”时都会把整个相关数据集都带入内存吗？

我正在实现一个具有分页功能的 UI（使用 jqgrid），并且用户可能拥有数千条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:09:15.713

经过进一步研究，这是我想出的答案：

关系的“多”方面——所有 caseFolders 的集合——是用户的一个属性。根据定义，该属性的值*是*整个集合。

为了获得这些元素的子集，我在我的用户模型中添加了以下方法：

```
public List<CaseFolder> getCaseFolders(String sidx, String sord, int start, int limit) {

    String orderBy = "c." + sidx + " " + ((sord.toUpperCase().equals("ASC")) ? "ASC" : "DESC");

    String jpql =   "SELECT c " +
                    "FROM CaseFolder c " +
                    "WHERE c.user = :user " +
                    "ORDER BY " + orderBy;

    Query query = JPA.em().createQuery(jpql)
        .setParameter("user", this)
        .setFirstResult(start)
        .setMaxResults(limit);

    List<CaseFolder> result = query.getResultList();
    return result;

} 
```

# php - 如何调用数组中的最后一条记录

> ID：14575468
> 
> 赞同：-1
> 
> 时间：2013-01-29T04:04:12.967
> 
> 标签：php, pdf-generation, tcpdf

我这样做对吗？我正在尝试调用数组中的最后一个元素：`$initr`

我的 IF 语句需要专门询问数组中的每个元素是否是最后一条记录。如果结果为真，它将在该位置打印条形码。（IF条件之后的所有内容，你可以忽略）。

```
<?php
$initr = $this->record;
$last = end($initr); // Put something like this at the top...

// Then something like this for each record. (I don't know if this is correct syntax)...
if     ($initr[4] == $last) {$content=$view->pdf->write1DBarcode('01234567094987654321-'.str_replace("-","",$content), 'IMB', .24, '1.58', '', 0.15, 0.015, $barstyle, '');}
elseif ($initr[5] == $last) {$content=$view->pdf->write1DBarcode('01234567094987654321-'.str_replace("-","",$content), 'IMB', 3, '1.58', '', 0.15, 0.015, $barstyle, '');}
elseif ($initr[6] == $last) {$content=$view->pdf->write1DBarcode('01234567094987654321-'.str_replace("-","",$content), 'IMB', 3, '1.58', '', 0.15, 0.015, $barstyle, '');}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:08:13.633

如果要访问数组中的最后一个元素，可以使用`end()`.

```
end — Set the internal pointer of an array to its last element 
```

[手动的](http://php.net/manual/en/function.end.php)

这是一个例子

```
$myLastElement = end($initr); 
```

# java - 错误表示尝试将字符串转换为双精度时已在 main 中定义变量然后说未知符号

> ID：14575471
> 
> 赞同：2
> 
> 时间：2013-01-29T04:04:36.277
> 
> 标签：java, user-interface, typeconverter

我已经寻找了 40 多分钟，试图在这个网站上找到可能与我的问题有关的答案，但无济于事。

我难住了。我正在尝试将程序转换为 GUI。我正在使用 Textpad，它在编译时告诉我该变量已在 main 方法中定义。然后当转换为 int 或 double 时，它​​告诉我它找不到符号并指向我要转换的变量。然后在我的计算过程中，它告诉我二元运算符“*”的操作数类型错误。

```
import javax.swing.JOptionPane;

public class PayrollGUI {

// calculates payroll
public static void main (String [] args) {

String name = JOptionPane.showInputDialog ("Employee's Name: ");
int name = Integer.parseInt(nameString);

String hours = JOptionPane.showInputDialog ("Number of hours worked in a week (e.g., 10: ");
int hours = Integer.parseInt(hoursString);

String payRate = JOptionPane.showInputDialog ("Hourly pay rate (e.g., .6.75: ");
double payRate = Double.parseDouble(payRateString);

String federalTaxRate = JOptionPane.showInputDialog ("Federal tax witholding rate (e.g., .20: ");
double federalTaxRate = Double.parseDouble(federalTaxRateString);

String stateTaxRate = JOptionPane.showInputDialog (" State tax witholding rate (e.g., .09: ");
double stateTaxRate = Double.parseDouble(stateTaxRateString);

//calculate witholdings, grosspay and netpay
double federalWitholding = federalTaxRate * (hours * payRate);
double stateWitholding = stateTaxRate * (hours * payRate);
double grossPay = hours * payRate;
double netPay = grossPay - withholdings;
double witholdings = federalWithodling + stateWitholding;

//format to keep two digit decimal
witholdings = (int) (witholdings * 100) /100.0;
netPay = (int) (netPay * 100) / 100.0;
grossPay = (int) (grossPay * 100) / 100.0;
federalWitholding = (int) (federalWitholding * 100) / 100.0;
stateWitholding = (int) (stateWitholding *100) / 100.0;

/*String output = (null);
String output = (null);*/
String output = "Employee Name: " + name +
"/nHours Worked: "  + hours +
"/nPay Rate: $" + payRate +
"/nGross Pay: $" + grossPay +
"/nDeductions:" +
"/n     Federal Witholding: $" + federalWitholding +
"/n     State Witholding : $" + stateWitholding +
"/n     Total Deductions : $" + witholdings +
"/n     Net Pay: $";
JOptionPane.showMessageDialog(null, output);
}//end main
}//end Payroll 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T04:08:48.807

```
String name = ...;
int name = ...; 
```

做不到。

替换`String name`为，`String nameString`因为这是您在使用时尝试解析的变量`Integer.parseInt`！（也不要忘记所有其他变量！）

例如

`String hours`有`String hoursString`
`String payRate`有`String payRateString`
`String federalTaxRate`有`String federalTaxRateString`
`String stateTaxRate`有`String stateTaxRateString`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T04:11:09.287

1.  您无法编译，因为`name`, `hours`, `payRate`, .... 变量被声明了两次。将它们中的每一个更改为另一个名称
2.  您的`parseInt`,`parseDouble`语句不好，因为输入的格式可能不正确（字母或其他内容）。因此，您需要使用`try/catch`来验证您的输入
3.  `witholdings = (int) (witholdings * 100) /100.0;`这不是保持 2 位数格式的方法。读[这个](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)
4.  尝试使用更好的 IDE。如果您是 Java 新手，请查看[jcreator](http://www.jcreator.org/download.htm)或[bluej](http://www.bluej.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T04:13:39.217

在一种方法中不能有两个相同的变量名。在您的代码中，您有许多重复的变量，如下所示。同一方法中不能有两个`name`变量。

```
String name = JOptionPane.showInputDialog ("Employee's Name: ");
int name = Integer.parseInt(nameString); 
```

如果您使用任何适用于 Java 的 IDE，例如[Eclipse](http://www.eclipse.org/)，您可以轻松解决此类编译问题，而不是使用 Textpad。

# c - C 通用字符串编程

> ID：14575472
> 
> 赞同：0
> 
> 时间：2013-01-29T04:04:49.710
> 
> 标签：c, string, struct, compare

如果不允许我使用该`<string.h>`库，如何轻松比较字符串的值。我有一个数据文件，其中包含一个结构成员的 6 个可能值。我需要做的就是创建一个循环来计算结构数组中每个值的数量。问题是，我无法弄清楚如何比较该值以及何时增加计数器。

```
 for (i = 0; i < datasize; i++){
    if (struct.membervalue == given)
      givencount++;
    if (struct.membervalue == given2)  // But I can't compare them with the == 
      givencount2++ ;                  // because they are strings.
 } 
```

**编辑：**我必须使用的预定义枚举

```
 typedef enum { 
     penny = 1,
     nickel = 5,
     dime = 10,
     quarter = 25
 }changeT; 
```

我有“一分钱”的价值，我该如何与之比较或关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:09:25.457

```
bool isEqual(const char *string1, const char *string2)
{
    do
    {
        if (*string1 != *string2) return false;
        if (*string1 == 0) return true;
        ++string1;
        ++string2;
    } while (1);
} 
```

**更新**：`enum`不会改变任何东西。您仍然必须先识别*字符串* `"penny"`，然后才能为其分配一分钱的*价值*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:18:57.247

您可以尝试以下功能：

```
int str_cmp(const unsigned char* str1, const unsigned char* str2)
{
    int result;

    do {
        result = (int)*str1 - (int)*str2;
        str1++;
        str2++;
    } while((!result) && (*str1|*str2))

    return result;
} 
```

输出为正 if `str1>str2`，负 if `str1<str2`，如果它们相等则为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T07:34:09.543

最快的一个：

```
int strcmp(const char *s1, const char *s2) {  
  int ret = 0;  

  while (!(ret = *(unsigned char *) s1 - *(unsigned char *) s2) && *s2) 
    ++s1, ++s2;  

  if (ret < 0) {
    ret = -1;  
  } 
  else if (ret > 0) {
    ret = 1 ;
  }  

  return ret;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-03T02:57:50.020

```
/*These variants could point to invalid memmory, but dont de-reference it.*/
int isEqual(const char *string1, const char *string2)
{
    while (*string1 == *string2++)      
        if ( 0 == *string1++  )      return 1;
    return 0;
 } 

/* This variant is NULL-resistent. For both NULL return true.*/
int isEqual(const char *string1, const char *string2)
{
    if ( !string1 || !string2   )      return  string1 == string2 ;

    while (*string1 == *string2++)      
        if ( 0 == *string1++  )      return 1;
    return 0;
 } 
```

这些只是比较字符串的功能。为了提供更多帮助，我们需要查看您正在尝试的代码。它可能是这样的：

```
if (isEqual(data.membervalue, "penny" )   pennycount++;
else
if (isEqual(data.membervalue, "nickel")   nickelcount++; 
```

而且您提供的枚举对计数没有太大帮助。计算“货币”总额很有用。

```
int Total= penny * pennycount  + nickel * nickelcount ... ; 
```

如果您只需要总数，事情就会变得更简单：

```
if (isEqual(data.membervalue, "penny" )   Total += penny;
else
if (isEqual(data.membervalue, "nickel")   Total += nickel; 
```

# facebook - Facebook 代币兑换码

> ID：14575477
> 
> 赞同：4
> 
> 时间：2013-01-29T04:05:22.330
> 
> 标签：facebook, facebook-graph-api, oauth, oauth-2.0, facebook-c#-sdk

当您成功用“代码”交换令牌时

facebook回复以下内容（html正文）

```
 access_token=USER_ACCESS_TOKEN&expires=NUMBER_OF_SECONDS_UNTIL_TOKEN_EXPIRES 
```

但是当这个代币交换代码失败时会发生什么？交换失败时facebook如何响应？

**参考** [https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-31T00:11:36.520

每当请求中的参数之一不正确时，facebook 可能无法将访问令牌返回给您的应用程序。在开发我的 oauth 框架期间，我测试了将每个必需参数设置为不正确的值（即，我将字符串附加`123abc`到正确值的开头）。结果如下：

从 facebook 请求访问令牌时客户端 ID 错误，返回 json 错误：

```
{
   "error": {
      "message": "Error validating application. Invalid application ID.",
      "type": "OAuthException",
      "code": 101
   }
} 
```

从 facebook 请求访问令牌时客户端密码错误，返回 json 错误：

```
{
   "error": {
      "message": "Error validating client secret.",
      "type": "OAuthException",
      "code": 1
   }
} 
```

从 facebook 请求访问令牌时出现错误代码，返回 json 错误：

```
{
   "error": {
      "message": "Invalid verification code format.",
      "type": "OAuthException",
      "code": 100
   }
} 
```

从 facebook 请求访问令牌时授予类型错误，返回 json 错误：

```
{
   "error": {
      "message": "Invalid grant_type: '123abcauthorization_code'. Supported types: authorization_code, client_credentials",
      "type": "OAuthException",
      "code": 100
   }
} 
```

从 facebook 请求访问令牌时范围错误，返回 json 错误：

```
{
   "error": {
      "message": "Unsupported scope: '123abcemail'. Supported scopes: ads_management create_event create_note email export_stream friends_about_me friends_activities friends_birthday friends_checkins friends_education_history friends_events friends_games_activity friends_groups friends_hometown friends_interests friends_likes friends_location friends_notes friends_online_presence friends_photo_video_tags friends_photos friends_questions friends_relationship_details friends_relationships friends_religion_politics friends_status friends_subscriptions friends_videos friends_website friends_work_history manage_friendlists manage_notifications manage_pages offline_access photo_upload publish_actions publish_checkins publish_stream read_friendlists read_insights read_mailbox read_page_mailboxes read_requests read_stream rsvp_event share_item sms status_update user_about_me user_activities user_birthday user_checkins user_education_history user_events user_games_activity user_groups user_hometown user_interests user_likes user_location user_notes user_online_presence user_photo_video_tags user_photos user_questions user_relationship_details user_relationships user_religion_politics user_status user_subscriptions user_videos user_website user_work_history video_upload xmpp_login",
      "type": "OAuthException",
      "code": 100
   }
} 
```

当然，当我不附加`123abc`到值时，在每种情况下都会正确返回访问令牌。

这些回复截至 2012 年 12 月，但当然 facebook 可能会决定在未来的任何时候更改它们而不会发出警告。

# algorithm - 什么是双重排序

> ID：14575481
> 
> 赞同：0
> 
> 时间：2013-01-29T04:05:39.123
> 
> 标签：algorithm, list, sorting

有人可以准确解释什么是双重排序算法以及它是如何工作的吗？我在网上搜索过，但找不到任何关于它的信息。我有一个家庭作业，我想解释它是什么并编写一个使用双重排序对列表进行排序的程序。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T05:02:43.247

双轴快速排序具有 2 个轴的概念，与常规快速排序非常相似。有一些选择枢轴的变体让我们假设一个随机选择，而不是算法将类似于以下（我不会给出明确的代码，因为它毕竟仍然是家庭作业）。基本思想是选择随机枢轴 p1 和 p2。假设 p1 <= p2 否则交换它们的值。现在将数组排序为三个部分。第一个将小于 p1，第二个是介于或等于 p1 和 p2 之间的元素，第三个是大于 p2 的元素。比在每个部分上递归。

渐近地，正如您可能猜到的那样，知道一种 O(n lg n) 是最优的，该算法与快速排序同时运行。

# android - 如何识别Android中的APP流量

> ID：14575483
> 
> 赞同：0
> 
> 时间：2013-01-29T04:05:43.877
> 
> 标签：android, traffic

从技术角度来看，是否可以区分来自应用程序（不包括浏览器）的流量和来自浏览器的流量？太谢谢了！

# django-class-based-views - Django：如何在基于类的视图中获取昨天的查询集？

> ID：14575494
> 
> 赞同：1
> 
> 时间：2013-01-29T04:06:55.007
> 
> 标签：django-class-based-views, django-generic-views, django-1.4

Django：如何在基于类的视图中获取昨天的查询集？

[http://ccbv.co.uk/projects/Django/1.4/django.views.generic.dates/TodayArchiveView/](http://ccbv.co.uk/projects/Django/1.4/django.views.generic.dates/TodayArchiveView/)

我使用 TodayArchiveView。

顺便说一句，如果 TodayArchiveView 得到 None，TodayArchiveView.as_view() 会引发 Http404。

在这种情况下，我想在当前模型（表）中推送昨天的数据......

我应该怎么办？

一些代码在这里：

网址.py

```
from django.conf.urls import patterns, include, url
from crm.views import *

urlpatterns = patterns('',
    (r'^workDailyRecord/$', workDailyRecord),
) 
```

视图.py

```
from django.views.generic import TodayArchiveView
from django.http import Http404
from crm.models import *

def workDailyRecord(request):
    if request.method === 'GET':
        tView.as_view() # I want call class-based generic views at this line.
    elif:
        try:
            return tView.as_view()(request)
        except Http404:
            # I want to push data at yesterday in 'WorkDailyRecord' model
            pass

class tView(TodayArchiveView):
    model = WorkDailyRecord
    context_object_name = 'workDailyRecord'
    date_field = 'date'
    template_name = "workDailyRecord.html" 
```

模型.py

```
from django.db import models

class WorkDailyRecord(models.Model):
    date = models.DateTimeField(auto_now_add=True)
    contents = models.TextField() 
```

# perl - 解析文件时如何确定制表符是什么？

> ID：14575496
> 
> 赞同：0
> 
> 时间：2013-01-29T04:07:12.913
> 
> 标签：perl, file, parsing

我正在打开一个文件（在 perl 中），我想知道如何确定制表符的外观。

我知道它们在我的文件中，但我想知道如何分辨它是什么。我知道要输出到文件，你会使用 \t，但它对于读取文件并不相同。

我也知道它会将其读取为某种 TAB 字符，因为我在每一行上逐个字符地打印出一行，并且可以很容易地看到 TABed 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:39:13.473

制表符始终`\t`是 ，没有什么可说的了。

但是，一些编辑器使用关于单个制表符应该代表多少个空格的约定。常识说 8，但通常人们的意思是 4，我见过它表示 3 甚至 2 个空格。

一些编辑器（如 Komodo 或 Komodo Edit）试图变得聪明：他们读取源文件并计算前导空格和制表符的典型分布。例如，如果只能看到 4,8,12,... 前导空格，则可能隐含地假设您的制表符应该表示 4 个空格。或者，如果观察到 2,4,6,... 前导空格，则每个制表符可能使用 2 个空格。

**如果我对您的理解正确，您希望前导空格具有类似的行为**。

在这种情况下，您可以使用下面的代码确定最有可能的制表符空格值。请注意，此代码不是最佳的：它会忽略带有实际制表符的行，它只考虑第一个缩进级别来获得制表符缩进等等。仅将此视为获得良好实施的起点：

```
my %dist;
while (my $line = <>) {
    my ($spaces) = ($line =~ /(^ *)/);
    my $len = length($spaces);
    $dist{$len}++;
}
my @sp = sort {$a <=> $b} keys %dist;
print "Leading space distribution in file: "
    . join(",", @sp) . "\n";
if (scalar @sp >= 2) {
    print "Most likely tab setting is: ", $sp[1] - $sp[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:57:08.833

如果您按下制表键，某些 IDE 和编辑器通常会插入四个空格而不是制表符。实际的制表符在 perl 中是 \t （内容取决于平台，但 \t 应始终代表您平台的制表符）

为确保您同时捕获制表符和任何 4 个空格组，您可以使用正则表达式`/\t| {4}/`

# sql - SQL - 创建表来存储 SQL 用户活动

> ID：14575498
> 
> 赞同：0
> 
> 时间：2013-01-29T04:07:45.750
> 
> 标签：sql, database, sql-server-2008, monitoring, logfiles

我想创建一个 SQL 表来存储/捕获特定数据库的用户访问或活动。

例如，每次用户登录服务器并查询特定数据库时，该表都会包含用户名、访问/查询的数据库、活动时间等条目。

我知道我会在某个地方查找 .txt 日志文件 - 但有没有更简单的自动执行方法？

我该怎么做呢？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:14:56.787

您可以在 SQL Server 错误日志中捕获登录活动（为“失败和成功登录”打开登录审核）：

```
USE [master];
GO
EXEC xp_instance_regwrite 
  N'HKEY_LOCAL_MACHINE', 
  N'Software\Microsoft\MSSQLServer\MSSQLServer', 
  N'AuditLevel', 
  REG_DWORD, 
  3; 
```

或者通过创建一个[LOGON TRIGGER](http://msdn.microsoft.com/en-us/library/bb326598.aspx)并使用它来记录到特定的表。

但是，由于语句没有触发器`SELECT`，因此捕获所有查询将需要非常侵入性的方法，例如[服务器端跟踪](http://msdn.microsoft.com/en-us/library/ms191443%28v=sql.105%29.aspx)或[SQL Server 审计](http://msdn.microsoft.com/en-us/library/cc280386.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:11:29.523

阅读SQL Server 中的[登录触发器](http://msdn.microsoft.com/en-us/library/bb326598.aspx)

# android - 调用单独文件中的函数时，Android 应用程序崩溃

> ID：14575500
> 
> 赞同：1
> 
> 时间：2013-01-29T04:07:58.117
> 
> 标签：android, constructor, android-asynctask

我有一个正在开发的 Android 应用程序，我的代码正在运行我只是想通过将某些功能移动到单独的文件中来稍微清理一下它。但是，每当我尝试从单独的文件中调用其中一个函数时，它都会崩溃并说 FATAL EXCEPTION: AsyncTask #5。我在单独的文件中创建了一个构造函数，我认为我做对了，但我猜不是。任何帮助表示赞赏。

这是我的代码：

```
DatabaseManager database;

public class loginTask extends AsyncTask<String, String, String> { 

    //check if server is online
    protected String doInBackground(String... params) {
        Log.d("test", "1");
        String username = params[0];
        String password = params[1];
        URI absolute = null;
        Log.d("test", "2");
        try {
            Log.d("test", "3");
            absolute = new URI("http://link.com/webservice/");
        } catch (URISyntaxException e) {
            Log.d("test", "4");
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Log.d("test", "5");
        database.test();//crashes at this line
        return postHttpResponse(absolute,username,password);
     }

     //set status bar to offline if flag is false
     protected void onPostExecute(String jsonstring) {
        try {
            //get values from jsonobject
            JSONObject jsonobj=new JSONObject(jsonstring);
            checkResponse(jsonobj);
            //errorMessage.setText(checkResponse(jsonobj));
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

     }
} 
```

数据库管理器.java

```
private final String LOGIN_TAG = "Login";
public DatabaseManager(){

}

public void test(){
Log.d(LOGIN_TAG, "this is a test");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:09:47.617

你永远不会实例化`DatabaseManager`- 所以它会一直`null`存在。类范围的引用一直`null`存在，直到它们被给予引用（通过将新引用指向现有引用或通过创建新对象）

考虑做

```
database = new DatabaseManager();
Log.d("test", "5");
database.test();//shouldn't crash at this line now 
```

# wpf - TreeViewItem 工具提示绑定不起作用

> ID：14575501
> 
> 赞同：0
> 
> 时间：2013-01-29T04:08:03.197
> 
> 标签：wpf

我有一个树视图。它绑定到称为 Nodes 的 ObservableCollection。工具提示上的绑定数据未显示：

```
<controls:TreeViewEx BorderThickness="0"
                        ItemsSource="{Binding Nodes}"
                        SelectedItemEx="{Binding SelectedTreeNode, Mode=TwoWay}">

        <controls:TreeViewEx.ToolTip>

            <Grid>

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Image Grid.Row="0"
                        Grid.Column="0" 
                        Source="/FMG.UI.WPF;component/Media/Images/job_128.png"
                        Height="16"
                        Width="16"/>

                <TextBox Grid.Row="0"
                            Grid.Column="1"
                            Text="Job: "
                            FontWeight="Bold"/>

                <TextBox Grid.Row="0"
                            Grid.Column="2"
                            Text="{Binding ToolTipHeader}"/>

                <Border Grid.Row="1"
                        Grid.Column="0"
                        Grid.ColumnSpan="3"
                        Height="2"
                        BorderBrush="Gray"/>

                <TextBox Grid.Row="2"
                            Grid.Column="0"
                            Grid.ColumnSpan="3"
                            Text="{Binding ToolTipDetails}"/>

            </Grid>

        </controls:TreeViewEx.ToolTip>

</controls:TreeViewEx> 
```

工具提示弹出，但 ToolTipHeader 和 ToolTipDetails 为空白。输出窗口说它在视图模型上找不到它们。如何使绑定看起来在节点上，而不是视图模型上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:51:55.223

您可能想移动代码；使用并为`TreeView.ItemContainerStyle`添加一个，这将设置一个节点级别的工具提示。`Setter``ToolTip`

例如

```
<controls:TreeViewEx.ItemContainerStyle>
    <Style TargetType="controls:TreeViewItemEx"> <!-- Guessing at item type name here -->
        <Setter Property="Tooltip">
            <Setter.Value>
                 <!-- Move your tooltip here -->
            </Setter.Value>
        </Setter>
    </Style>
</controls:TreeViewEx.ItemContainerStyle> 
```

当然`DataContext`，工具提示中的所有绑定都将是当前项，如果您希望树视图的上下文指定`RelativeSource`找到它的一个（也可以在 上添加“DataContext” `Path`，否则您直接绑定到树上的属性-看法）。

# javascript - 如何获得多个具有相同名称的 div 的最高 z-index 值？

> ID：14575511
> 
> 赞同：0
> 
> 时间：2013-01-29T04:09:10.167
> 
> 标签：javascript, jquery

> **可能重复：**
> [选择具有最高 z-index 的 DIV](https://stackoverflow.com/questions/2005688/select-div-with-highest-z-index)

如何获得最高的 z-index 值？
将所有 div z-index 值放入数组并使用 math.max？或任何建议？

```
<div class="a" z-index="1">
<div class="a" z-index="3">
<div class="a" z-index="4">
<div class="a" z-index="5">
<div class="a" z-index="6">
<div class="a" z-index="11">...

<div class="b" z-index="//top+1"> 
```

js

```
var top = // highest z-index value; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:14:07.273

你可以这样做：

```
var zIndx = [];
$("div.a").each(function() {
    zIndx.push( $(this).attr("z-index") );
});
console.log( Math.max.apply( Math, zIndx ) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T04:14:27.590

JavaScript`Array.reduce`可以完成这项工作。 `.get`可以为您提供所需的数组：

```
var top = $(".a").get().reduce(function (a, b) {
   return Math.max(typeof a === 'object' && $(a).attr('z-index') || a,
      $(b).attr('z-index'));
}); 
```

[http://jsfiddle.net/8jpea/1/](http://jsfiddle.net/8jpea/1/)

顺便说一句，使用自己的自定义属性时要小心。可以的话就去吧`data-z-index`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T04:19:41.383

```
var maxValue = Math.max.apply( Math, $('.a').map(function() {
    return +$.attr(this, 'z-index');
})); 
```

这是小提琴：http: [//jsfiddle.net/ZFhzu/](http://jsfiddle.net/ZFhzu/)

* * *

如果您使用的是现代 JavaScript，则不需要花哨`apply`的 . 您可以改为传播值：

```
let maxValue = Math.max(...$('.a').get().map(el => +$.attr(el, 'z-index'))); 
```

Here's the fiddle: [http://jsfiddle.net/7y3sxgbk/](http://jsfiddle.net/7y3sxgbk/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T04:14:19.547

这是您可以使用的功能。

```
var index_highest = 0;   

// more effective to have a class for the div you want to search and 
// pass that to your selector

$(".a").each(function() {

         // always use a radix when using parseInt

         var index_current = parseInt($(this).css("zIndex"), 10);

         if(index_current > index_highest) {
               index_highest = index_current;
          }
});

console.log(index_highest); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T04:18:27.540

```
 var top = 0;
    $('.a').each(function(){
        if(top < parseInt($(this).attr('z-index'))){
            top= parseInt($(this).attr('z-index'));
        }
    });
    $('.b').attr('z-index',top+1); 
```

[jsfiddle.net/EC36x](http://jsfiddle.net/EC36x/)

# cassandra - 在 mac 上运行 cassandra

> ID：14575517
> 
> 赞同：0
> 
> 时间：2013-01-29T04:09:47.850
> 
> 标签：cassandra

我正在尝试 bin/cassandra -f，但出现以下错误。任何帮助表示赞赏。

xss = -ea -javaagent:bin/../lib/jamm-0.2.5.jar -XX:+UseThreadPriorities -XX:ThreadPriorityPolicy=42 -Xms2048M -Xmx2048M -Xmn512M -XX:+HeapDumpOnOutOfMemoryError 线程“main”java中的异常.lang.NoClassDefFoundError: org/apache/cassandra/service/CassandraDaemon 原因：java.lang.ClassNotFoundException: org.apache.cassandra.service.CassandraDaemon at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java .security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at sun.misc.Launcher$AppClassLoader.loadClass (Launcher.java:301) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:247)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:15:00.857

`ClassNotFoundException: org.apache.cassandra.service.CassandraDaemon`表示 Cassandra 没有被正确编译。先跑`ant`。

# ios - Box2d：让精灵跟随精灵

> ID：14575519
> 
> 赞同：0
> 
> 时间：2013-01-29T04:10:13.020
> 
> 标签：ios, objective-c, cocos2d-iphone, box2d, box2d-iphone

我最近才开始学习 box2d，我正在制作一个小型机翼克隆。我试图让一个精灵跟随另一个精灵，并最终赶上。

因为 box2d 对我来说是一个全新的 api，我不知道从哪里开始。我正在考虑的方式是将领导精灵位置存储到 cgpoint 数组中并将其设置为另一个精灵，但是由于它的 box2d，它会上下山。我不知道动画是否足够流畅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:19:47.260

请按照这些教程

[小翅膀教程 Part-1](http://www.raywenderlich.com/3888/how-to-create-a-game-like-tiny-wings-part-1)

[小翅膀教程 Part-2](http://www.raywenderlich.com/3913/how-to-create-a-game-like-tiny-wings-part-2)

您可以在 Github 上找到该项目： [Tiny-wings Clone github 链接](https://github.com/haqu/tiny-wings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:24:40.100

我的代码是它的基础，我想通了。这是我现在的代码

```
- (void)makeNinjaFollow {
  if (posCounter >= 200) 
    posCounter = 0;

  pandaPositions[posCounter] = _panda.position;
  _enemy.position = pandaPositions[posCounter - 20];

} 
```

# php - jQuery 弄乱了我的 PHP

> ID：14575520
> 
> 赞同：0
> 
> 时间：2013-01-29T04:10:16.230
> 
> 标签：php, javascript, jquery, forms, registration

我有一个正在处理的注册表单，结果证明它很痛苦。

我对 PHP 很陌生，所以请放慢我的脚步 - 哈哈。

我安装了一个 jQuery 插件，它允许我为我的文本框制作内联标签。我还为注册过程中发生的任何错误（无效的电子邮件等）创建了一个错误框。这是我的一些 HTML/PHP 代码。

```
 <?php
    if($_POST['submit'])
    {
$signuperror = "Hello World";
     ?>

            <?php if($signuperror != "") { ?>
            <span id="signuperror"><?= $signuperror; ?></span>
            <?php } ?> 
```

问题是当我单击表单上的提交按钮时，没有显示“Hello World”的“错误”。我将此代码复制并粘贴到 test.php 文档中，它运行良好。所以我知道它必须来自我的其他 html 代码。在对几乎每一行代码进行故障排除后，我找到了罪魁祸首。事实证明，内联标签的 jQuery 插件初始化是问题所在。

```
 $(function(){
            $.fn.formLabels();
            $("form").submit(function(){
                var formVal = $("form").serialize();
                parent.$("#default div.results").html(formVal);
                return false
            })
        }); 
```

当我删除它时，它工作得很好（当然没有我的内联标签）。

我该怎么做才能使 PHP 和 jQuery 都工作。

谢谢。- 瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:18:53.763

注意函数`return false`末尾的`$("form").submit()`。这意味着 jQuery 函数正在取代表单的 POST 操作。您没有同步重新加载页面，因此您对`$_POST["submit"]`. 摆脱这`return false`条线，看看页面是否按预期重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:16:21.660

这里有很多事情正在发生。需要一步一步来做这件事。

1.  您的 PHP 应该使用`<?php`格式或使用`<?`短格式，但要确保我会全部编码，`<?php`以便它在任何地方都兼容
2.  当您需要回显或输出某些内容时，请使用`<?php echo $variable; ?>`而不是`<?=`. 并不是说它不好，但它会消除任何带有 asp 样式输出的 php 配置问题。
3.  首先测试 php 输出然后检查 if 语句。

Jquery 不会弄乱你的 PHP。这个标题和我的回答一样随机。

# python - 使用变量作为模块的属性？

> ID：14575524
> 
> 赞同：0
> 
> 时间：2013-01-29T04:10:46.403
> 
> 标签：python

假设我有两个变量：“choice” = ii7 和“scale” = C。

该库具有通过运行以下命令来计算任何特定音乐和弦中的音符的功能：

> chords.ii7（音阶）

当 scale = C 时，它将以 C 的音阶列出 ii7 和弦的音符。

如果我必须使用变量“choice”代替在代码本身中包含 ii7，我该怎么做呢？如果我知道要搜索什么，搜索肯定会容易得多，但我完全是初学者。这只是为了完成这个特定程序的其余部分，并学习一些新东西。抱歉，如果我用错了标题。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:13:50.623

采用[`getattr`](http://docs.python.org/2/library/functions.html#getattr)

```
getattr(chords, choice)(scale) 
```

这是假设`choice = 'ii7'`。

`getattr`基本上有两个参数——第一个是对象，第二个是字符串。它搜索与字符串同名的属性，并返回它。在这种情况下`getattr(chords, choice)`，`chords.ii7`您必须调用它。

# python - Python：用 If 语句匹配空间

> ID：14575525
> 
> 赞同：0
> 
> 时间：2013-01-29T04:10:46.760
> 
> 标签：python, string, if-statement

嗨，我有一个查找信息的脚本，信息应该是整数，但有时我发现一个空字符串，因此我收到以下错误：

```
ValueError: invalid literal for int() with base 10: '' 
```

我试图执行以下操作，但它不起作用。

```
list = ['12', '14', '45', ''] 

for i in list:
    if '' in i:
        i = 0
        i
    else:
        i 
```

这将匹配所有内容。它必须是另一种方式，我无法编辑源代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:16:09.283

不要`list`用作变量名。迟早你会想要使用建筑`list`并得到奇怪的错误:)

```
my_list = ['12', '14', '45', ''] 

for i in my_list:
    if not i:
        # i is empty string
    else:
        # ... 
```

我猜您显示的错误来自您尝试使用的其他地方`int(i)`

如果`i`应该转换为`int`, 一种方法是这样的

```
for i in my_list:
    if not i:
        i = 0
    else:
        i = int(i) 
```

另一种方法是使用异常处理程序

```
for i in my_list:
    try:
        i = int(i)
    except ValueError:
        i = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:17:10.253

一个简单但有效的方法是捕获该错误并忽略它。您还可以检查该值的“真实性”。

```
mylist = ['12', '14', '45', '']
outlist = []

for s in mylist:
    if s:
        try:
            i = int(s)
        except ValueError:
            continue

        else:
            outlist.append(i) 
```

这也可以保护您免受其他类型的非数字输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:16:39.060

这段代码将获取列表中的所有元素并过滤掉空白的元素。

```
mylist =  ['1','2','3','4','','','6','7']

for x in mylist:
    if x:
        print x
    else:
        pass # x is empty 
```

您的方法可能失败，因为您使用的是`in`而不是`is`.

另外，不要命名您的列表`list`，因为它会覆盖`list`关键字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T04:16:45.083

看起来你想要这个：

```
for i in lst:
    if i == "":
        i = 0
    else:
        i = int(i)

    # do stuff with an iteger i here 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T04:23:53.800

我想你可能正在寻找类似的东西

```
import string
list = ['12', '14', '45', '', '1 3']

for i in list:
    if i == '':
        i = 0
        print i
    elif ' ' in i:
        i = string.replace(i, ' ', '')
        print i
    else:
        print i 
```

# sql - Yii 框架：将属性设置为 NULL

> ID：14575527
> 
> 赞同：0
> 
> 时间：2013-01-29T04:11:07.987
> 
> 标签：sql

我有此代码，我需要将其设置为`NULL`. 正确的方法是什么？

```
$criteria->condition='tblvisit_batch_id=NULL'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T09:34:33.973

您应该使用正确的 SQL 语句：

```
$criteria->condition='tblvisit_batch_id IS NULL'; 
```

# ruby - 使用机械化按标签选择表单字段？

> ID：14575532
> 
> 赞同：1
> 
> 时间：2013-01-29T04:12:33.633
> 
> 标签：ruby, automation, mechanize, bots

我最初写了 800 行来做到这一点，一个站点一个站点。但是，在与几个人交谈时，我的代码似乎比它需要的要长得多。

所以，我知道你会在 Python 中做什么，用一个特定的 Egg，但我正在使用 Ruby。那么，有没有人知道如何根据标签而不是 id/name 在表单字段中输入详细信息？使用机械化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:58:57.793

假设您的 html 如下所示：

```
<label>Foo</label>
<input name="foo_field"> 
```

您可以在特定标签之后获取输入的名称：

```
name = page.at('label[text()="Foo"] ~ *[name]')[:name]
#=> "foo_field" 
```

并使用它来设置表单值

```
form[name] = 'bar' 
```

# php - PHP While 循环错误

> ID：14575535
> 
> 赞同：0
> 
> 时间：2013-01-29T04:12:51.493
> 
> 标签：php, arrays, loops, if-statement, while-loop

谁能帮我找出这段代码中的错误。当我尝试运行它时，它说有一个意外的';' 在第 10 行，但我不确定这会在哪里。谢谢`

```
$lines = array (
    0=>'Once upon a time',
    1=>'There lived a small green frog that lived',
    2=>'on a lilypad in a pond. ',
    3=>'One day a princess came along and kissed it.'
);

$max = count($lines) ;
$out = null ;
while ($i = 0; $i<$max;  $i++) {
    $opentag = '' ;
    $closetag = '' ;

    if ($i = 0) {
        $opentag = '<h1>' ;
        $closetag = '</h1>' ;
    }
    if ($i = 1 )     {
        $opentag = '<p>' ;
    }
    if ($i = ($max-1) )     {
        $closetag = '</p>' ;
    }

    $out = $opentag . $lines[$i] $closetag  ;

}
echo $out ;

?>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:20:19.823

上面的代码有多个错误：

首先，您`for`在循环中使用条件`while`，因此您需要使用：

```
for ($i = 0; $i<$max;  $i++) {
} 
```

接下来，在这一行：

```
$out = $opentag . $lines[$i] $closetag  ; 
```

你缺少一个`.`介于`$lines[$i]`和之间`$closetag`

您还在`if`语句中使用了不正确的运算符。

`==`比较语句，如果相等则返回 true，如果不相等则返回 false。

`=`设置左侧等于右侧

```
if($i = 1){} 
```

`$i`以上将在设置为 1时返回 true 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:14:44.833

似乎您的代码中有太多错误/错误。

首先让它`For`循环`while`。

`.`比你在下面的行中缺少的，

```
$out = $opentag . $lines[$i] . $closetag;
                             ^ 
```

此外，您在所有情况下都做错了，因为它应该是，

```
if ($i == 0) { 
```

它应该是`==`& 而不仅仅是`=`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:17:31.213

这是错误的：

```
while ($i = 0; $i<$max;  $i++) { 
```

请检查 while 语法。我认为你需要在`for`那里使用。

```
for($i = 0; $i<$max;  $i++) { 
```

# javascript - 每 6 小时倒计时

> ID：14575538
> 
> 赞同：-2
> 
> 时间：2013-01-29T04:13:12.477
> 
> 标签：javascript, html, countdowntimer

只是想知道，如果有任何方法或代码，可以为每天每 6 小时设置倒数计时器吗？

例如，我想在这个时间开始倒计时（换句话说，就像每 6 小时一样）：上午 9 点到下午 3 点 下午 3 点到晚上 9 点 下午 9 点到凌晨 3 点 上午 3 点到上午 9 点？

我翻遍了整个网站，找不到这样的倒数计时器..

最好在 HTML 和 javascript/jquery 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:25:50.537

```
var timer = {
        started: false,
        timestamp: 0
    },
    trigger = 15;                          //3pm

function timerInit(){
    var hour = new Date().getHours();
    if(!started && hour === trigger){      //When it's 3pm, the timer will start
        startTimer();                      //└─ rewrite the conditional statement 
                                           //   as needed
        //do whatever you want here
        timer.timestamp = +new Date();
        timer.started = true;              //Indicates the timer has been started
    }
    requestAnimationFrame(timerInit);      //setTimeout is not efficient
}
requestAnimationFrame(timerInit);

//This is for when the timer has ended.
function timerEnded(){
    timer.started = false;
}

function startTimer(){
    var d = new Date();
    timePassed = new Date(timer.timestamp + 1000*60*60*6 - d);
    var remaining = {                      //Calculate time difference
        hour: timePassed.getHours(),       // using timestamps
        minute: timePassed.getMinutes(),
        second: timePassed.getSeconds()
    }
    console.log(remaining);
    if(timePassed > 0){
        setTimeout(startTimer, 500);       //Countdown
    }else{
        timerEnded();                      //Ended
    }
} 
```

[http://jsfiddle.net/DerekL/kKPcr/7/](http://jsfiddle.net/DerekL/kKPcr/7/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T04:19:14.490

您可以使用javascript的本机`setInterval`方法

例如：

```
var timer = setInterval(myfunction, 21600) // 21600 seconds == 6 hours 
```

# psych - 创建了多变量矩阵，但在进行因子分析时出现“参数长度为零”

> ID：14575541
> 
> 赞同：1
> 
> 时间：2013-01-29T04:13:41.887
> 
> 标签：psych

我正在通过 psych 包进行因子分析。

```
cormat <- polychoric(na.omit(mself1))
##Warning message:
In cor.smooth(mat) : Matrix was not positive definite, smoothing was done
fa(cormat,nfactors=3,n.obs = 183 ,n.iter=1, rotate="oblimin",fm="ml")
## Error in if (dim(r)[1] == dim(r)[2]) { : argument is of length zero 
```

我只是想知道为什么参数的长度为零，这意味着文件是空的，当我输入 cormat 时，Polychoric 矩阵就出来了。

我该如何解决这个问题，或者它有什么“不确定”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T22:40:55.617

[psych](http://cran.r-project.org/web/packages/psych/)包将实际矩阵存储在您的 cormat 对象中的 $rho 中。在您的情况下，`fa(cormat$rho)`将解决该问题。Bill 还包括该`fa.poly()`函数，该函数将在对其进行因子分析之前从原始数据矩阵计算多变量相关性。

不过对你的结果要谨慎一点。您得到的矩阵是非 Gamian（即，具有负特征值），当它们被成对估计或您有较大的抽样误差时，可能会发生这种情况（请参阅 Garrido、Abad 和 Ponsosa，2013 年）。

# php - 如何在框架集中的新选项卡中隐藏 url

> ID：14575542
> 
> 赞同：0
> 
> 时间：2013-01-29T04:13:44.800
> 
> 标签：php, html

这是我的问题：

我想隐藏url中的参数，所以任何页面只能显示www.website.com

我为 index.php 页面添加了一个框架集，

当用户单击此页面中的任何链接时，它是完美的，

但是如果用户通过右键单击打开链接 - >在新选项卡或窗口中打开，

将显示带有参数的整个 URL，

有什么想法可以防止用户通过在新选项卡中打开在框架集中打开页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:37:44.753

通常，要完成此操作，您需要设置服务器以这种方式操作。它通常被称为 URI 或“Pretty URI”。这也是在 RESTful 意义上设计应用程序的关键组件。

如果您有权访问服务器配置并且正在运行 LAMP 堆栈，则可以使用 .htaccess 文件完成此操作。但是您仍然需要您的服务器端脚本来处理其余的请求。

这是一个示例 .htaccess 文件，它将删除扩展名和查询：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^/]+/)*[^.#?\ ]+\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(([^/]+/)*[^.]+)\.php /$1 [R=301,L] 
```

但是，如果您肯定想要精确的 URI [http://phpmaster.com/rest-can-you-do-more-than-spell-it-1/ ，则无论如何都应该参考 RESTful](http://phpmaster.com/rest-can-you-do-more-than-spell-it-1/)

还有另一个关于 .htaccess 和“Pretty URLs”的教程 [http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/](http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:18:57.060

好吧，像这样隐藏 URL 通常不是一个好主意，但你可以试试这个：

```
<a href="somepage.php" onclick="location.href=this.href;return false;">Link</a> 
```

您还可以使用一些简单的 JavaScript，这样您就不必手动将事件处理程序添加到每个链接：

```
document.body.addEventListener("click",function(e) {
    var t = e.srcElement || e.target;
    if( !t.tagName) t = t.parentNode;
    if( t.tagName.toLowerCase() == "a") {
        location.href = t.href;
        return false;
    }
},false); 
```

# c - 释放的指针未分配

> ID：14575545
> 
> 赞同：0
> 
> 时间：2013-01-29T04:14:05.627
> 
> 标签：c, pointers, malloc

当我编译这段代码时，弹出指针释放未分配错误。有人可以解释为什么会这样吗？谢谢！

```
static int make_buffer(FILE *input, char *buffer[]){
  *buffer = (char *)malloc(INIT_BUFFER_SIZE*sizeof(char));

  int buffer_size = INIT_BUFFER_SIZE;
  int txt_size = 0;

  char cha;
  while((cha = fgetc(input)) != EOF){
    if (txt_size == buffer_size){
      *buffer = (char *)realloc(buffer, buffer_size*2*sizeof(char));
      buffer_size *= 2;
    }
    (*buffer)[txt_size] = cha;
    txt_size ++;
  }

  free(*buffer);
  return txt_size;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:18:37.217

这意味着代码正在尝试释放未使用 malloc/realloc 分配的内容。就你而言，我认为问题出在

```
*buffer = (char *)realloc(buffer, buffer_size*2*sizeof(char)); 
```

应该是

```
*buffer = realloc(*buffer, buffer_size*2); 
```

可能还想检查 realloc 的结果只是为了形式。请注意，根据定义，我在 sizeof(char) == 1 中简化了你的，并且这些天不应该需要演员表（它曾经是）。David S. 关于释放结果有用性的赞扬也是有效的。

# wordpress - 在wordpress中向其他服务器发送请求

> ID：14575550
> 
> 赞同：2
> 
> 时间：2013-01-29T04:14:30.820
> 
> 标签：wordpress

我在 wordpress 中有两个网站

主站点

```
 1.)http://www.abc.com 
```

其他网站

```
 2.)http://www.xyz.com 
```

从`mainsite`我想发送**用户名**和**密码**到`othersite`为此我正在使用此代码

```
 $creds = array();
    echo $creds['user_login'] = "sachin";
    echo $creds['user_password'] = "pass";
    $user = wp_signon( $creds, false );
   // echo ABSPATH . WPINC;
        if ( is_wp_error($user) ){
        echo $user->get_error_message();
            if( !class_exists( 'WP_Http' ) )
                 include_once( ABSPATH . WPINC. '/class-http.php' );

                        // You would edit the following:
            $username = $creds['user_login']; // Twitter login
            $password = $creds['user_password']; // Twitter password
            $message = "Hey neat, I'm posting with the API";
            // Now, the HTTP request:
            $api_url = 'http://www.xyz.com';
            $body = array( 'status' => $message );
            $headers = array( 'Authorization' => 'Basic '.base64_encode("$username:$password") );
            $request = new WP_Http;
            $result = $request->request( $api_url , array( 'method' => 'POST', 'body' => $body, 'headers' => $headers ) );
           // echo"<pre>";print_r($result['body']); 
```

我不知道我是否以正确的方式发送 wp http 请求，但我的问题是我想要这个用户名和密码（我从主站点发送）到其他服务器（[http://www.xyz.com](http://www.xyz.com)）

我该怎么做，请建议我。请向我提供宝贵的建议，我可以如何发送`username`以及`password`从一台服务器到另一台服务器。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T18:06:22.053

要共享 2 个 wordpress 安装，以便用户可以访问两者，那么此页面将允许您执行此操作。

[http://www.remicorson.com/share-users-database-on-different-wordpress-installs/](http://www.remicorson.com/share-users-database-on-different-wordpress-installs/)

我想这就是你想要做的？

# joomla - 插件没有被解释

> ID：14575555
> 
> 赞同：0
> 
> 时间：2013-01-29T04:15:04.723
> 
> 标签：joomla, joomla2.5

我不得不将现有 joomla 应用程序中的相关文件复制到新的 joomla 安装中。之后，一些在旧安装上正常工作的插件和模块不在新安装上。例如

我有 {chronoforms}Contact_Us{/chronoforms} 用于显示联系表格，而不是只是回显 {chronoforms}Contact_Us{/chronoforms}。

我还有 {module _Story_Player} 用于显示 allvideoshare 视频，但只是回显 {module _Story_Player}

当我访问后端查看这些插件时，我得到一个 500 - xml 缺少注释发生错误，例如，对于 chronoforms，我得到文件 chronoforms.xml 无法找到，尽管我已将所有必要的文件复制到正确的位置。

我浏览了 jooomla 论坛和其他资源站点，但到目前为止还没有找到任何指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:34:03.947

最简单的做法是重新安装软件，因为您似乎错过了这些插件的相关配置文件（您可能还错过了其他文件媒体、语言等）。

[JED 上的 Chronoforms](http://extensions.joomla.org/extensions/contacts-and-feedback/forms/1508)。

[JED 上的所有视频共享](http://extensions.joomla.org/extensions/multimedia/multimedia-players/video-players-a-gallery/19866)

大多数好的扩展在现有或部分安装上安装没有问题，因此您不应该遇到任何问题。

作为@Riccardo Zom，提到重新安装也将确保扩展在 Joomla 中正确注册！用于菜单、ACL 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T06:00:24.933

“扩展管理器”>“发现”怎么样 - 在这种情况下不应该使用吗？

# javascript - 在 Javascript 函数调用中跳过特殊字符“-”

> ID：14575556
> 
> 赞同：1
> 
> 时间：2013-01-29T04:15:28.447
> 
> 标签：javascript

这是我正在使用的代码：

```
<!DOCTYPE html>
<html>
<head>
</head>

<header>
<script language="JavaScript" type="text/javascript">  
<!--  
function pass(InputValue){  

    if(document.getElementById('storevalues').value == false ) {document.getElementById('storevalues').innerHTML = InputValue;}

            else {
                document.getElementById('storevalues').innerHTML += " ,"+InputValue;    
            } 
}     
//-->  
</script>

</header>

<body>

<form name="first">  
<textarea rows="4" cols="50" id="storevalues"></textarea>

<input type="checkbox" id="DAVIDHU" value="DAVIDHU" onclick="pass(document.first.DAVIDHU.value)">

<input type="checkbox"  id="CHARLES-STEVEN" value="CHARLES-STEVEN" onclick="pass(document.first.CHARLES-STEVEN.value)">
</form> 

</form>

</section>

</body> 
```

当您选中第一个复选框时，该复选框的值进入 textarea 这种情况是 DAVIDHU，
但是当您选中第二个复选框时，这种情况是 CHARLES-STEVEN 值不会进入 textarea，我相信它有一些东西使用特殊字符 '-' 我尝试使用反斜杠 exp 进行转义：CHARLES-STEVEN 但它没有用，问题是我有这么多用户，名字和姓氏都带有“-”

任何帮助或建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T04:17:23.223

[您只能使用带有有效标识符的点表示法。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators#Dot_notation) `CHARLES-STEVEN`不是一个有效的标识符，因为 - 你猜对了 - 破折号。所以切换到[括号表示法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators#Bracket_notation)：

```
document.first['CHARLES-STEVEN'].value 
```

# ruby - 水豚，黄瓜：page.find( ).text 只返回字符 vwxyz

> ID：14575557
> 
> 赞同：1
> 
> 时间：2013-01-29T04:15:28.517
> 
> 标签：ruby, rspec, gem, cucumber, capybara

我遇到了水豚/黄瓜/硒/rspec最奇怪的问题。

我无法通过文本与水豚匹配任何选择器。一个例子是：

```
page.should have_selector('h2', :text=>'Thank you') 
```

该页面是一个平面 html，标记是：

```
<html>
<body>
<h2>Thank you</h2>
</body>
</html> 
```

所以我尝试输出那个 h2 标签的文本，以防我做错了什么。

```
puts "text: "+page.find('h2').text 
```

令我惊讶的是，这就是终端所说的：

```
output: text: y 
```

我开始使用文本，然后将页面的标记更改为：

```
<html>
<body>
<h2>abcdefghijklmnopqrstuvwxyz</h2>
</body>
</html> 
```

现在终端给了我：

```
puts "text: "+page.find('h2').text
output: text: vwxyz 
```

h2 有什么文本并不重要，它只接收字符 vwxyz、空格和斜杠 (/)！它完全忽略所有其他字符，包括大写字母 VWXYZ。我所有的断言都失败了。

这是我的宝石版本：

```
$ gem --version
1.8.25 
```

这是宝石清单：

```
builder (3.1.4)
capybara (2.0.2)
childprocess (0.3.6)
commonwatir (4.0.0)
cucumber (1.2.1)
cucumber-rails (1.3.0)
diff-lcs (1.2.0, 1.1.3)
ffi (1.3.1)
gherkin (2.11.5)
jammit (0.6.5)
json (1.7.6)
mime-types (1.19)
multi_json (1.5.0)
nokogiri (1.5.6)
open4 (1.3.0)
Platform (0.4.0)
POpen4 (0.1.4)
rack (1.5.0)
rack-test (0.6.2)
rspec (2.12.0)
rspec-core (2.12.2)
rspec-expectations (2.12.1)
rspec-mocks (2.12.2)
rubygems-update (1.8.25)
rubyzip (0.9.9)
selenium-webdriver (2.29.0)
spreewald (0.3.10)
watir (4.0.2)
watir-webdriver (0.6.2)
websocket (1.0.6)
xpath (1.0.0)
yui-compressor (0.9.6) 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:46:54.030

在敲了很多次之后，我意识到我的 Ruby 版本是 1.8.7。这是一个很长的镜头，但我安装了 1.9，它现在可以工作了。我不知道 Ruby 1.8.7 和我使用的 gem 版本是否存在不兼容问题，或者安装是否错误，但这有效。

我对遇到黄瓜/水豚类似怪异的每个人的建议是确保所有宝石和相关软件都是最新的。

# sencha-touch - 在sencha touch中将不同的视图推送到导航视图时设置不同的动画

> ID：14575560
> 
> 赞同：3
> 
> 时间：2013-01-29T04:16:05.597
> 
> 标签：sencha-touch, sencha-touch-2

我想为推送到导航视图的每个视图设置不同类型的动画。我在导航视图的布局中应用了动画，但它应用于导航视图的所有视图。

在这里，我像这样添加我的视图，并希望在特定视图上设置动画。

```
button.up('navigationview').push({
xtype: 'rightPanel',
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T10:02:15.947

提尔这个..

```
 Ext.getCmp('Your Navigation View').getLayout().setAnimation('Which ever animation You want'); 
```

以下是一些动画类型。

```
 cube *
 fade
 flip *
 pop
 slide
 swipe * 
```

希望这有帮助。. 快乐编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:24:14.420

您可以在每次推送新视图之前更改导航视图的动画。

```
Ext.ComponentManager.get("navigationview").getLayout().setAnimation('fade'); 
```

# odata - 相关服务的 ServiceStack URL

> ID：14575572
> 
> 赞同：1
> 
> 时间：2013-01-29T04:17:27.820
> 
> 标签：odata, servicestack

使用[ServiceStack](http://www.servicestack.net)，我正在寻找通过以类似于 OData 的方式组合 URL 来访问相关服务的方法。

[OData](http://msdn.microsoft.com/en-us/library/ff478141.aspx)示例将是一个 URL，如

```
http://localhost:8080/owind.svc/Categories(2)/Products 
```

这将找到与类别 2 相关的所有产品。

ServiceStack 的一个等效示例似乎是您将为 ProductService 创建一个 Request DTO 并设置如下所示的 Routes：

```
[Route("/Products")]
[Route("/Products/{Id}")]
[Route("/Categories/{Category}/Products")]
public class Products
{
    public string Id { get; set; }
    public string Category { get; set; }
} 
```

[（忽略此处](https://stackoverflow.com/questions/12549981/can-servicestack-services-contain-multiple-methods)提到的关注点分离问题，上述属性至少可以清楚地说明我在问什么。）

然后在 ProductService 中，您将支持通过主键或外键查找产品。我在 ServiceStack.Northwind.ServiceModel 示例项目的 Northwind.ServiceModel.Operations.Orders 类中看到了一些类似的东西。

所以我想知道，这是在 ServiceStack 中做这类事情的最好和最具可扩展性的方式，还是我缺少一些捷径？考虑创建支持数百个表的服务的规模，如果存在某种捷径，并且如果它没有附带字符串，它可能会有所帮助。

我可以想象一个系统，您可以根据 DTO 中的任何内容自动生成路由，尽管您需要从 DTO 属性名称（通常是单数）到路由（通常是复数）进行一些映射。

不知道是否可以想象将其超越一个级别......例如

```
.../Employee/1/Orders/Customers 
```

这将使您获得与员工 #1 有订单的每个客户。大规模手动实现这一点的想法似乎令人望而却步。不确定是否有支持或反对 SOA 的论据，但也很高兴知道这一点。

为了清楚起见，不应该假设底层数据存储或访问库。

# php - 使用查询中的 count_all_results

> ID：14575573
> 
> 赞同：0
> 
> 时间：2013-01-29T04:17:26.997
> 
> 标签：php, codeigniter, codeigniter-2

我有复杂的查询并说它 $complexQuery，然后我需要从中获取所有数据行号而不需要数据结果。

我研究了 count_all_results() 我比 num_rows()

现在说我的代码：

```
$complexQuery = 'Some sql query';
$q = $this->db->query($complexQuery);
$total1 = $q->num_rows(); 
```

现在我很困惑从该查询中获取所有总数据，关于使用 $this->db->count_all_results() 与该查询有什么建议吗？

== 通过编辑 DB_active_rec.php 解决 ==

我这样做（如果表名包含“选择”，则保持原样）：

```
public function from($from)
{
    foreach ((array)$from as $val)
    {
        if (strpos($val, ',') !== FALSE)
        {
            foreach (explode(',', $val) as $v)
            {
                $v = trim($v);
                $this->_track_aliases($v);
                $v = $this->ar_from[] = $this->_protect_identifiers($v, TRUE, NULL, FALSE);

                if ($this->ar_caching === TRUE)
                {
                    $this->ar_cache_from[] = $v;
                    $this->ar_cache_exists[] = 'from';
                }
            }
        }
        else
        {
            $val = trim($val);

            // Added to bypass from arr if $val contained 'select' for complex query
            // $this->db->count_all_rows("select * from tableName")
            // will be select count(1) from (select * from tableName)
            if(FALSE !== strpos(strtolower($val),'select')){
                $this->ar_from[] = "($val)";
            }else{
                // Extract any aliases that might exist. We use this information
                // in the _protect_identifiers to know whether to add a table prefix
                $this->_track_aliases($val);
                $this->ar_from[] = $val = $this->_protect_identifiers($val, TRUE, NULL, FALSE);
            }

            if ($this->ar_caching === TRUE)
            {
                $this->ar_cache_from[] = $val;
                $this->ar_cache_exists[] = 'from';
            }
        }
    }

    return $this;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:22:45.083

那应该是：

```
$this->db->where($complexQuery);
$this->db->from('your_table_name');
echo $this->db->count_all_results(); 
```

请参阅：[Codeigniter count_all_results()](http://ellislab.com/codeigniter/user-guide/database/active_record.html#select)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:46:16.890

再过几分钟，但代码相同

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

      class SomeMyModel extends CI_Model {

      private static $db;

      function __construct() 
      {
        parent::__construct();
        self::$db = &get_instance()->db;
      }

        static function countTableResults(){
          self::$db->where($coplexQuery);
           return self::$db->count_all_results('#TABLENAME#');
        } 
```

# ruby - Can I tell a Ruby method to expect a specific parameter type?

> ID：14575581
> 
> 赞同：14
> 
> 时间：2013-01-29T04:18:04.567
> 
> 标签：ruby, methods, parameters

```
def doSomething(value)
    if (value.is_a?(Integer))
        print value * 2
    else
        print "Error: Expected integer value"
        exit
    end
end 
```

Can I tell a Ruby method that a certain parameter *should* be an Integer, otherwise crash? Like Java.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T04:19:42.603

No, you can't. You can only do what you're already doing: check the type yourself.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-21T01:17:18.210

I'm late to the party, but I wanted to add something else:

A really important concept in Ruby is [Duck Typing](https://en.wikipedia.org/wiki/Duck_typing). The idea behind this principle is that you don't really care about the types of your variables, as far as they can do what you want to do with them. What you want in your method is to accept a variable that responds to (*). You don't care about the class name as far as the instance can be multiplied.

Because of that, in Ruby you will see more often the method `#responds_to?` than `#is_a?`

In general, you will be doing type assertion only when accepting values from external sources, such as user input.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-12-28T17:06:35.730

I would suggest a raise unless type match at the beginning of the method

```
def do_something(value)
  raise TypeError, 'do_something expects an integer' unless value.kind_of?(Integer)
  ...
end 
```

This is raise an error and exit unless value is an `Integer`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T08:31:32.843

You can raise an Exception anytime arbitrarily if you deem it necessary.

```
def doSomething(value)
    if (value.is_a?(Integer))
        print value * 2
    else
        raise "Expected integer value"
    end
end 
```

Whether or not you *really* want to do this is a separate issue. :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-09T07:49:04.583

Ruby doesn't have parameter type verification, though you can add sugar method to all objects for convenience to verify type like this:

```
def doSomething(value)
   print value.should_be(Numeric) * 2
end 
```

or

```
def initialize(fruit)
   @fruit = fruit.should_be(Fruit)
end 
```

```
Object.class_eval do

  def should_be cls
    hide_from_stack = true
    if self && !self.is_a?(cls)
      raise("Expected class #{cls}, got #{self.class}")
    end
    self
  end

end 
```

# c# - 简单 DFT 低通

> ID：14575593
> 
> 赞同：0
> 
> 时间：2013-01-29T04:19:16.673
> 
> 标签：c#, fft, dft

我在用 DFT 制作简单的低通滤波器时遇到了一些麻烦。最后，我希望能够实时转换音频，但就目前而言，我什至无法做到这一点。我在这方面没有受过培训，我只知道 FFT 将波转换为频率，而 iFFT 会这样做，以及我读过的其他一些内容。老实说，我很惊讶它的效果和到目前为止一样好。无论如何，这是代码：

```
 byte[] samples = new byte[20000000];
        int spos = 0; 
```

`samples`这里用 8Bit Unsigned PCM 填充。`spos`<- 样本数

```
 int samplesize = 128;
        int sampleCount = spos / samplesize;
        frequencies = new System.Numerics.Complex[sampleCount][];
        for (int i = 0; i < sampleCount; i++)
        {
            Console.WriteLine("Sample " + i + " / " + sampleCount);
            frequencies[i] = new System.Numerics.Complex[samplesize];
            for (int j = 0; j < samplesize; j++)
            {
                frequencies[i][j] = (float)(samples[i * samplesize + j] - 128) / 128.0f;
            }
            dft.Radix2Forward(frequencies[i], MathNet.Numerics.IntegralTransforms.FourierOptions.Default);
        }

        int shiftUp = 1000; //1khz
        int fade = 2; //8 sample fade.
        int kick = frequencies[0].Length * shiftUp / rate; 
```

所以现在我已经为输入的 128 个样本部分计算了一堆 DFT。`kick`是（我希望）DFT 中跨越 1000Hz 的样本数。IE 因为`frequencies.Length / 2`包含高达`rate/2`Hz 的频率幅度数据，所以`frequencies[0].Length / 2 * shiftUp / (rate / 2)`=`frequencies[0].Length * shiftUp / rate`应该给我正确的值

```
 for (int i = 0; i < sampleCount; i++)
        { 
```

这是我遇到麻烦的部分。没有它，输出听起来很棒！这会跳过索引 0 和索引 64。它们都有一个复杂的 0 分量，我记得在某处读过索引 0 处的值很重要......

```
 for (int j = 0; j < frequencies[i].Length; j++)
            {
                if (j == 0 || j == 64)
                    continue;
                if (j < 64)
                {
                    if (!(j < kick + 1))
                    {
                        frequencies[i][j] = 0;
                    }
                }
                else
                {
                    if (!(j - 64 > 63 - kick))
                    {
                        frequencies[i][j] = 0;
                    }
                }
            } 
```

最后它撤消了转换

```
 dft.Radix2Inverse(frequencies[i], MathNet.Numerics.IntegralTransforms.FourierOptions.Default); 
```

...把它扔回样本数组

```
 for (int j=0; j<samplesize; j++)
                samples[i * samplesize + j] = (byte)(frequencies[i][j].Real * 128.0f + 128.0f);
        } 
```

...将其放入文件中

```
 BinaryWriter bw = new BinaryWriter(File.OpenWrite("sound"));
        for (int i = 0; i < spos; i++)
        {
            bw.Write(samples[i]);
        }
        bw.Close(); 
```

...然后我将其导入 Audacity 以用文物谋杀我的耳朵。

光谱显示显示代码在一定程度上有效

![最下面是代码的输出](../Images/e6df1de938ffc2e494f1f93095afb45f.png)

然而，整首歌曲中都会出现这些恼人的高音噼啪声。我听说过有关吉布斯现象和窗口函数的一些信息，但我真的不知道如何在这里应用它。该`fade`变量是我对窗口函数的最佳尝试：超过 1000hz 标记的所有内容在 2 个样本中消失为 0。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:30:52.440

所以事实证明我是对的（耶）：每 1024 个样本我都会听到咔哒声，这让音频听起来很糟糕。为了解决这个问题，我在许多短重叠的过滤音频块之间淡入淡出。它不快，但它有效，我很确定这就是他们所说的“窗口”的意思

```
public class OggDFT
{
    int sample_length;
    byte[] samples;
    DragonOgg.MediaPlayer.OggFile f;
    int rate = 0;
    System.Numerics.Complex[][] frequencies;
    DiscreteFourierTransform dft = new DiscreteFourierTransform();
    int samplespacing = 128;
    int samplesize = 1024;
    int sampleCount;

    public void ExampleLowpass()
    {
        int shiftUp = 1000; //1khz
        int fade = 2; //8 sample fade.
        int halfsize = samplesize / 2;
        int kick = frequencies[0].Length * shiftUp / rate;
        for (int i = 0; i < sampleCount; i++)
        {
            for (int j = 0; j < frequencies[i].Length; j++)
            {
                if (j == 0 || j == halfsize)
                    continue;
                if (j < halfsize)
                {
                    if (!(j < kick + 1))
                    {
                        frequencies[i][j] = 0;
                    }
                }
                else
                {
                    if (!(j - halfsize > halfsize - 1 - kick))
                    {
                        frequencies[i][j] = 0;
                    }
                }
            }
            dft.BluesteinInverse(frequencies[i], MathNet.Numerics.IntegralTransforms.FourierOptions.Default);
        }
    }

    public OggDFT(DragonOgg.MediaPlayer.OggFile f)
    {
        Complex[] c = new Complex[10];
        for (int i = 0; i < 10; i++)
            c[i] = i;
        ShiftComplex(-2, c, 5, 10);

        this.f = f;

        //Make a 20MB buffer.
        samples = new byte[20000000];
        int sample_length = 0;

        //This block here simply loads the uncompressed data from the ogg file into a nice n' large 20MB buffer. If you want to use the same library as I've used, It's called DragonOgg (If you cant tell by the namespace)
        while (sample_length < samples.Length)
        {
            var bs = f.GetBufferSegment(4096); //Get ~4096 bytes (does not gurantee that 4096 bytes will be returned.
            if (bs.ReturnValue == 0)
                break; //End of file

            //Set the rate
            rate = bs.RateHz;

            //Display some loading info:
            Console.WriteLine("seconds: " + sample_length / rate);

            //It's stereo so we want half the data.
            int max = bs.ReturnValue / 2;

            //Buffer overflow care.
            if (samples.Length - sample_length < max)
                max = samples.Length - sample_length;

            //The copier.
            for (int j = 0; j < max; j++)
            {
                //I'm using j * 2 here because I know that the input audio is 8Bit Stereo, and we want just one mono channel. So we skip every second one.
                samples[sample_length + j] = bs.Buffer[j * 2];
            }

            sample_length += max;
            if (max == 0)
                break;
        }
        sampleCount = (sample_length - 1) / samplespacing + 1;
        frequencies = new System.Numerics.Complex[sampleCount][];
        for (int i = 0; i < sample_length; i += samplespacing)
        {
            Console.WriteLine("Sample---" + i + " / " + sample_length);
            System.Numerics.Complex[] sample;
            if (i + samplesize > sample_length)
                sample = new System.Numerics.Complex[sample_length - i];
            else
                sample = new System.Numerics.Complex[samplesize];
            for (int j = 0; j < sample.Length; j++)
            {
                sample[j] = (float)(samples[i + j] - 128) / 128.0f;
            }
            dft.BluesteinForward(sample, MathNet.Numerics.IntegralTransforms.FourierOptions.Default);
            frequencies[i / samplespacing] = sample;
        }

        //Perform the filters to the frequencies
        ExampleLowpass();

        //Make window kernel thingy
        float[] kernel = new float[samplesize / samplespacing * 2];
        for (int i=0; i<kernel.Length; i++)
        {
            kernel[i] = (float)((1-Math.Cos(2*Math.PI*i/(kernel.Length - 1)))/2);
        }

        //Apply window kernel thingy
        for (int i = 0; i < sample_length; i++)
        {
            int jstart = i / samplespacing - samplesize / samplespacing + 1;
            int jend = i / samplespacing;
            if (jstart < 0) jstart = 0;
            float ktotal = 0;
            float stotal = 0;
            for (int j = jstart; j <= jend; j++)
            {
                float kernelHere = 1.0f;
                if (jstart != jend)
                    kernelHere = kernel[(j - jstart) * kernel.Length / (jend + 1 - jstart)];
                int index = i - j * samplespacing;
                stotal += (float)frequencies[j][index].Real * kernelHere;
                ktotal += kernelHere;
            }
            if (ktotal != 0)
            {
                stotal /= ktotal;
                samples[i] = (byte)(stotal * 128 * 0.9f + 128);
            }
            else
            {
                Console.WriteLine("BAD " + jstart + " " + jend + " sec: " + ((float)i / rate));
                samples[i] = (byte)(stotal * 128 * 0.9f + 128);
            }
        }

        BinaryWriter bw = new BinaryWriter(File.OpenWrite("sound"));
        for (int i = 0; i < sample_length; i++)
        {
            bw.Write(samples[i]);
        }
        bw.Close();
    }
} 
```

如果你想编译它，你需要 DragonOgg ( [http://sourceforge.net/projects/dragonogg/](http://sourceforge.net/projects/dragonogg/) ) 和 MathNet.Numerics ( [http://mathnetnumerics.codeplex.com/](http://mathnetnumerics.codeplex.com/) )

我希望它对某人有所帮助-我不知道默认情况下 StackOverflow 是如何许可的，但是这段代码是公共领域的。

进一步考虑，我决定通过简单地“模糊”样本以获得基本的低通滤波器，我可以更容易地实现近似效果。可以通过减去低通的结果来制作高通滤波​​器。

# css - 使用 CSS 为框添加“下划线”

> ID：14575595
> 
> 赞同：3
> 
> 时间：2013-01-29T04:19:41.683
> 
> 标签：css

我想通过 CSS 实现这样的目标：

![在此处输入图像描述](../Images/3fa0296b087836b647edd17f0ed154ac.png)

我是 CSS 新手。

我的问题：

*   如何在底部添加一条绿线，如下所示？我是否必须`div`在包含文本的下方添加一个小`div`图标并将其背景设置为绿色？我知道有很多方法可以做到，但我只想学习最佳实践。
*   这是字体 Arial 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T04:22:00.070

您可以按照您的描述在底部添加 div，也可以使用边框。无论哪种情况，您都需要调整高度。没什么大不了的。

[http://jsfiddle.net/PQgH3/2](http://jsfiddle.net/PQgH3/2)

```
div {
    width: 50%;
    padding-top: 10px;
    font-size: 24px;
    text-align: center;
    font-family: arial, sans-serif;
}
.followers {
    background-color: #777;
    float: right;
    height: 75px;
    color: #ccc;
}
.following {
    background-color: #555;
    float:left;
    height: 70px;
    color: #ccc;
    border-bottom: 5px solid lime;
}

<div class="followers">Followers</div>
<div class="following">Following</div> 
```

我没有眼睛说那个字体是否是 Arial。如果不是，我可以说它是一种类似的无衬线字体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T04:30:35.170

使用 CSS 精灵表。他们将帮助您使用图像实现此效果。通常，当您为菜单做标记时，使用 UL 和 LI 标签，然后为功能设置适当的样式。然后将其设置为在鼠标悬停时更改背景精灵，然后使用 :hover 选择器更改背景精灵。我建议将精灵表创建为您希望所有默认菜单按钮看起来像（水平跨越）的精确图像。然后在具有悬停版本外观的同一图像上在其下方执行另一个版本。您可以对您需要的任何其他版本（如活动、禁用等）重复此过程。只需确保您偏移每个版本的背景位置的 Y 值。比如这样：

```
li { background-position: 0px 0px; }
li:hover { background-position: 0px -100px; }
li:active { background-position: 0px -200px; } 
```

查看这篇文章，了解有关标记和设计方面的更多信息：http: [//line25.com/tutorials/how-to-create-a-css-menu-using-image-sprites](http://line25.com/tutorials/how-to-create-a-css-menu-using-image-sprites)

编辑：如果你不想做精灵表，我有一个纯 css3 的 jsFiddle 方法在这里：http: [//jsfiddle.net/uBhKF/](http://jsfiddle.net/uBhKF/)

HTML 标记：

```
<ul>
   <li>FOLLOWING</li>
   <li>FOLLOWERS</li>
</ul> 
```

CSS3：

```
ul {
    width: 100%;
    padding: 0px;
    margin: 0px;
    list-style-type: none;
    float: left;
}

li {
    font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
    float: left;
    width: 50%;
    height: 50px;
    display: block;
    margin: 0px;
    background-color: #444;
    border-left: 1px dotted #DDD;
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    font-size: 24px;
    text-align: center;
    line-height: 50px;
    color: #888;
}
li:first-of-type {
    border-left: none;
}
li:hover {
    color: #55E000;
    border-bottom: 5px solid #55E000;
    background-color: #333;
} 
```

但我无法正确设置字体系列。:(

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T04:32:53.690

用这个

```
.header
    {
        margin-left: auto;
        margin-right: auto;
        height: 102px;
        background-color: #F0F0F0;
        width:500px

    }
    .header .header-first
    {
        float: left;

        width: 216px;
        border-bottom: 3px solid #3CA2DF;
    }

    .header .header-last
    {
         width: 216px;
         float:right;

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T04:35:33.267

字体肯定不是 Arial，我相信它的 calibri，并为您尝试此代码解决方案

```
<html>
<body>
<div style="border-bottom: 3px solid #00ff00; 
     background:#000; 
     height: 50px; 
     width:400px; 
     color:#00ff00; 
     text-align:center;">
FOLLOWERS
</div>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T09:50:46.437

也试试这个

```
<html>
<head>
<style>
td
{
width:400px;
background:#000; 
color:#fff; 
text-align:center;
height: 100px;
font-size:20px;
}
td:hover
{
text-decoration: underline;
border-bottom: 3px solid #00ff00;
color:#00ff00;
}
</style>
</head>
<body>
<table style="margin:0 auto;">
<tr>
<td>Following</td>
<td>Followers</td>
</tr>
</table>
</body>
</html> 
```

# java - 检查 Android 资产完整性

> ID：14575597
> 
> 赞同：15
> 
> 时间：2013-01-29T04:19:43.377
> 
> 标签：java, android, integrity

在我的文件夹`assets/data`中，有很多 XML 文件包含我的应用程序的静态数据。

某人检索 APK、修改其中的一部分并安装在设备上真的很容易。

我想通过检查我的`assets/data`文件夹的完整性来防止用户更改我的静态数据。

最初我正在考虑使用[MD5 checksum](https://stackoverflow.com/a/304350/1489493)，但对于我将拥有的文件数量（50-100）来说它可能太慢了。

你有什么建议吗？

**编辑：**

这个应用程序是一个带有描述每个级别的 XML 文件的游戏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T09:20:41.250

我将描述如何有效地防止修改和重新打包，而不是如何单独保护资产，尽管您最终可以应用相同的技术来加密它们。它是不完美的，但是您可以使修改变得更加困难。

您使用证书签署应用程序。尽管他们可以*删除*您的证书，但在将其重新组合在一起时，没有其他人可以出示相同的证书。因此，您可以在运行时检查应用程序的签名，以确保它是您所期望的。

这里有一些廉价和讨厌的代码来做到这一点：

```
 PackageManager pm = context.getPackageManager();

   PackageInfo info = pm.getPackageInfo( context.getPackageName(), PackageManager.GET_SIGNATURES );

   if ( info.signatures[ 0 ].toCharsString().equals( YOUR_SIGNATURE ) )
   {
     //signature is OK
   } 
```

其中 YOUR_SIGNATURE 是一个常量，通过在签名的应用程序上运行此代码获得。

现在，您已经暗示了两个剩余的问题：

1.  你怎么能阻止某人只是修改源代码中的常量以匹配他们的证书，然后重新打包和重新签名应用程序？

2.  你怎么能阻止有人找到检查方法并将其删除？

对两者的回答：你不能，不是绝对的，但你可以通过混淆来做得很好。免费的 Proguard，但更有用的是商业的 Dexguard，是执行此操作的工具。您可以拒绝后者目前的 350 欧元费用；另一方面，我曾尝试对像这样受保护的应用程序进行逆向工程，除非风险*非常*高，否则不值得麻烦。

在某种程度上，您也可以为（1）自己做混淆；通过一些复杂的编程方法在运行时组装签名“常量”，这使得查找和替换变得困难。

(2) 确实是软件设计问题；使取消支票变得足够复杂或烦人。首先，混淆只会使查找变得更加困难。

作为进一步的说明，您可能想看看像[Google 许可](http://developer.android.com/google/play/licensing/index.html)这样的东西是否在这方面为您提供任何保护。不过我没有这方面的经验，所以你自己在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T04:34:24.547

一个答案，虽然它是否定的。

如果此人拥有您的 apk 并对其进行了解码，那么即使您使用了校验和，他们也可以使用新的校验和更新代码部分。我不认为你能赢得这个。您可以投入大量精力来保护它，但如果您假设有人可以获取和修改 apk，那么他们也可以撤消保护。在我的商业内容上，我只是尝试使解码不明显但不是防弹的。我知道任何事情都不值得努力甚至是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T04:36:04.060

也许您可以压缩 xml 文件并将其放在 assets/data 文件夹中；然后对该.zip 进行校验和。在第一次运行时，您可以解压缩文件以获取 .xml 布局。请参阅[使用 ZipFile 类从多个文件的 zip 存档中解压缩文件](https://stackoverflow.com/questions/2974798/unzip-file-from-zip-archive-of-multiple-files-on-android-using-zipfile-class)以解压缩存档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T15:44:40.013

可能最可靠的方法是在应用程序启动时从服务器下载关卡 XML 数据，并检查关卡文件的时间戳和大小。这也让您可以随时间提供关卡数据的更新。当然，这意味着您需要增加托管服务器的费用，这可能是另一个问题。

# php - 如何将多个字符串传递给 substr_count？

> ID：14575598
> 
> 赞同：0
> 
> 时间：2013-01-29T04:19:58.233
> 
> 标签：php, arrays

我试图从我最近的 200 条推文中提取一堆关键字，但到目前为止，使用“substr_count”只允许我一次搜索一个字符串。

有没有办法定义关键字数组并使用“substr_count”为我计算所有关键字？

```
$recentTweets = $connection->get('https://api.twitter.com/1.1/statuses/user_timeline.json?screen_name=username');
GLOBAL $textDump;
for ($i=0; $i<count($recentTweets); $i++){
    $textDump .= $recentTweets[$i]->text . " ";
};
$keyWords = "the";
$number = substr_count(strtolower($textDump), strtolower($keyWords)); 
echo $number; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:34:42.973

```
$textDump = "The quick brown fox jumps over the lazy dog";
$keyWords = array("the", "fox");
foreach ($keyWords as $keyWord) {
    $number[$keyWord] = substr_count(strtolower($textDump), strtolower($keyWord));
}
print_r($number); // Array ( [the] => 2 [fox] => 1 ) 
```

# javascript - MonkeyTalk IDE 中的连接问题

> ID：14575602
> 
> 赞同：0
> 
> 时间：2013-01-29T04:20:25.130
> 
> 标签：javascript, eclipse-plugin, monkeytalk

我已经安装了monkey talk IDE来测试android应用程序，当我尝试将它连接到android模拟器/tethred设备时，我收到了一个警告

> 在“MonkeyTalk”期间发生内部错误。启动 adb 时出错：运行 adb 时出错：D:\android_sdk (aspire921) on aspire764\platform-tools\adb.exe forward tcp:16862 tcp:16862 error: device not found

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T23:12:01.773

您的手机必须与您的 PC在**同一个WiFi 网络上。**该应用程序必须在手机上运行才能连接。关于你的录音问题，我需要更多的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:48:21.433

我忘记检查重要的事情，即设备和电脑都在同一个 WI-FI 网络中，同时尝试执行启用猴子对话的应用程序。现在连接已成功设置到设备。

# javascript - 如何使用字典中的自动建议设置文本区域

> ID：14575604
> 
> 赞同：6
> 
> 时间：2013-01-29T04:20:53.500
> 
> 标签：javascript

这个问题有点宽泛，我做了足够的研究并在这里询问，以便我至少可以获得一些建议。

我正在尝试设置自动完成文本框/文本区域字典建议。我已经尝试设置自动完成，`JSON data from server`并且我能够做到这一点。但是我的问题是，我可以设置一个文本区域，并从字典单词中自动建议，就像我们在文字处理器中输入一些文本时一样。是否可以通过任何可用的 API？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T04:35:17.870

您可以尝试[Google Places Autocomplete API](https://developers.google.com/places/training/autocomplete)。这是一些相关的[SO 线程](https://stackoverflow.com/questions/6428502/google-search-autocomplete-api)。我找不到 Google `Search`Autocomplete API 的任何官方文档，谢天谢地，有人已经[为我们做了研究](http://blog.shreyaschand.com/2013/01/03/google-autocomplete-api/)。按照那里的说明进行设置，设置起来应该不会太难（看起来很直接，有两个`JSON`和`XML`注释的响应）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T15:47:28.737

我相信你会找到很多方法来实现 TextArea 上的自动完成。仅举几例

*   [http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)
*   [http://textextjs.com/](http://textextjs.com/)

框架和功能都足够丰富。

即将使用字典 API

*   [http://www.google.com/dictionary/json?callback=dict_api.callbacks.id100&q=Sweet&sl=en&tl=en](http://www.google.com/dictionary/json?callback=dict_api.callbacks.id100&q=Sweet&sl=en&tl=en) 谷歌未记录的 API，返回[JSONP](http://en.wikipedia.org/wiki/JSONP)

Altervista 的 API 页面

*   [http://thesaurus.altervista.org/testjs](http://thesaurus.altervista.org/testjs)

很少有人是

*   [http://words.bighugelabs.com/api.php](http://words.bighugelabs.com/api.php)
*   [http://developer.dictionary.com/products](http://developer.dictionary.com/products)
*   [https://webster.cs.washington.edu/cse154/labs/ajax/urban.php?term=india](https://webster.cs.washington.edu/cse154/labs/ajax/urban.php?term=india)
*   [http://www.wordreference.com/docs/api.aspx](http://www.wordreference.com/docs/api.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T17:55:36.380

好吧，如果您确实可以访问某个服务器的 JSON 响应，则可以使用 jQuery。[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

```
$(function() {
  function log( message ) {
    $( "<div>" ).text( message ).prependTo( "#log" );
    $( "#log" ).scrollTop( 0 );
  }

  $( "#birds" ).autocomplete({
    source: "search.php",
    minLength: 2,
    select: function( event, ui ) {
      log( ui.item ?
        "Selected: " + ui.item.value + " aka " + ui.item.id :
        "Nothing selected, input was " + this.value );
    }
  });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T05:13:55.083

将 jQuery 与您的字典功能一起使用.... [http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

你可以在这里下载

[http://jquery.com/download/](http://jquery.com/download/)

# gridview - 打开gridview LinkBut ton不适用于新窗口/标签

> ID：14575605
> 
> 赞同：0
> 
> 时间：2013-01-29T04:20:56.747
> 
> 标签：gridview, hyperlink, asp.net-4.0, asplinkbutton

我有一个定义如下的gridview：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataKeyNames="columnid" DataSourceID="SqlDataSource1"
           <Columns>
        <asp:TemplateField HeaderText="Title">
            <ItemTemplate>
                <asp:LinkButton ID="LinkButton1"  ForeColor="red"  runat="server" onclick="LinkButton1_Click" 
                   Text="Click Me!"></asp:LinkButton>                  
            </ItemTemplate>
        </asp:TemplateField> 
```

LinkBut​​ton1_click 的代码隐藏如下所示：

```
protected void LinkButton1_click(object sender, EventArgs e)
{
    string stringQuery = methodToGetQueryString;
    Response.Redirect(queryString, true);
} 
```

这非常有效，除非当我尝试将链接作为新选项卡或新窗口打开时，它给了我一个 about:blank 页面。我环顾四周，似乎普遍的共识似乎是我必须使用超链接而不是使用链接按钮？我尝试将 ItemTemplate 中的代码更改为如下所示：

```
 <ItemTemplate>
        <asp:HyperLink ID = "HyperLink1" runat="server" Text="click me!" NavigateURL = "~/setTheUrlHere.aspx" />

 </ItemTemplate> 
```

这个问题是出于某种奇怪的原因，我的超链接实际上都不是可点击的。我将鼠标悬停在它们上方，当我右键单击时，我没有在新选项卡或窗口中打开的选项。看起来它只是一个死链接。我需要设置href还是什么？我认为这就是 NavigateURL 会做什么？或者有没有更简单的方法来使用 LinkBut​​ton 来做我需要的事情？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T13:11:19.633

如果有趣的话，我会像这样使用*asp:HyperLinkField列：*

```
<asp:HyperLinkField DataTextField="Nome_Da_Agencia" DataTextFormatString="Detalhe {0}" DataNavigateUrlFields="Nome_Da_Agencia, Codigo_Da_Agencia" HeaderText="Detalhes"
                     DataNavigateUrlFormatString="Agencia.aspx?codigoAgencia={1}" Target="_blank"  /> 
```

注意**Target="_blank"**它告诉在新选项卡中打开

# java - 如何使用 long 和 int 数据类型更新进度条的进度（使用 0-100 整数）？

> ID：14575609
> 
> 赞同：0
> 
> 时间：2013-01-29T04:21:52.300
> 
> 标签：java, android, progress-bar

我正在开发一个非常基本的 Android 应用程序，我需要更新与循环遍历相对应的进度条，以查找输入的数字是否为素数。输入的数字必须是长数据类型。计划是遍历从 i = 2 到 sqrt(number) 的循环，并在每次迭代中将输入的数字除以 i。如果 i 除数，则循环结束，我们确定它不是素数。

否则，循环继续进行，同时更新进度。以下是相关代码的片段：

```
protected Void doInBackground(Long... params) {
String message;
Intent intent = new Intent(MainActivity.this, DisplayMessageActivity.class);

long lim = (long)Math.sqrt(params[0]);

for (int i = 2; i <= lim; i++) {
        if (params[0] % i == 0) {
    message = params[0] + " is not prime!";
    int myProgressFinal = 100;
        publishProgress(myProgressFinal);
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
    return null;
        }
        else {              
            int myProgress = i/lim * 100;
            publishProgress(myProgress);

            if (isCancelled())
                return null;
        }
    }

message = params[0] + " is prime!";
intent.putExtra(EXTRA_MESSAGE, message);
startActivity(intent);
return null;
}

} 
```

我的问题点是 else 语句：

```
else {              
    int myProgress = i/lim * 100;
    publishProgress(myProgress); 
```

我有一个整数 i 用于循环，显示我在循环中的进度，并且要找到我已经前进的百分比，我必须除以循环的最大数量 (lim = sqrt(number))，然后相乘100 得到适当的百分比。但是，我不能这样做 b/c myProgress 是一个整数，但 lim 是一个长整数，并且不能更改为 int。即使我将 lim 设为 int，我仍然有整数除法给我一个错误的值 (0 * 100)。它不会让我将其中一个类型转换为加倍 b/c myProgress 必须是 int 才能通过 publishProgress()。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:39:16.377

首先，如果“i”的范围一直到 lim，那么“i”也需要为 long。否则，一旦 'i' 命中 Integer.MAX_VALUE，下一次迭代将导致溢出。

I believe you want to declare i as a long, and in your else statement do

"int myProgress = (int)((((double)i)/lim) * 100)"

# java - 将 jar 添加到参考库

> ID：14575612
> 
> 赞同：-3
> 
> 时间：2013-01-29T04:22:03.563
> 
> 标签：java, jar, classpath

我有一个 jar 文件，可以将其附加到项目参考库，但它没有 META-INF 文件夹。通过配置构建路径附加 jar 是否仍然有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:32:35.657

如果您在谈论 Eclipse，是的，没有 META-INF 文件夹的 .jar 文件适用于项目的构建路径。我刚试过。

# javascript - 使用javascript改变颜色

> ID：14575616
> 
> 赞同：5
> 
> 时间：2013-01-29T04:22:34.443
> 
> 标签：javascript

我是java script的初学者。我使用java script将文本颜色更改为红色的波纹管代码。但它不起作用。我的代码中的错误是什么？

```
<!DOCTYPE html>
<html>
<head>
<script>
function display()
{
var col=document.getElementById("demo").innerHTML;
col.style.color="red";
}
</script>
</head>
<body>

<h1>My First JavaScript</h1>
<p id="demo">click on the button bellow.....</p>

<button onclick="display()">Display</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T04:25:31.243

`innerHTML`从中删除`var col=document.getElementById("demo").innerHTML;`

```
<!DOCTYPE html>
<html>
<head>
<script>
function display()
{
var col=document.getElementById("demo");
col.style.color="#FF0000";
}
</script>
</head>
<body>

<h1>My First JavaScript</h1>
<p id="demo">click on the button below.....</p>

<button onclick="display()">Display</button>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T04:24:04.520

不要使用`innerHTML`，它返回一个字符串。

使用对象本身的样式。

检查它是否有效：[JsFiddle](http://jsfiddle.net/H4mZn/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T04:32:07.667

你可以试试这个...

```
document.getElementById('demo').style.color = '#FF0000'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T04:28:36.823

替换此代码：

```
function display()
{
var col=document.getElementById("demo").innerHTML;
col.style.color="red";
} 
```

有了这个：

```
function display()
{
var col=document.getElementById("demo");
col.style.color="red";
} 
```

内部 html 将包含演示标签内的 html，但您需要引用标签本身。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-07T21:23:01.427

```
<!DOCTYPE html>
<html>
<head>
<script>
function display()
{
document.getElementById("demo").style.color="red";
}
</script>
</head>
<body>

<h1>Your Fixed JavaScript</h1>
<p id="demo">click on the button bellow.....</p>

<button onclick="display()">Display</button>

</body>
</html>
```

这是固定的，我只是将单词的更改变为红色，因为它不是

# css - CSS 动画辅助

> ID：14575621
> 
> 赞同：0
> 
> 时间：2013-01-29T04:23:06.590
> 
> 标签：css

我有几个关于 CSS 的问题。我有一个动画，如下所示。

```
<style> 
div.one
{
width:100px;
height:100px;
background:blue;
position:relative;
animation:skew ease 2s;
animation-iteration-count: infinite;
text-align:center;
border-radius:50%;
}

@keyframes myfirst
{
0% {background:red;left:0px;transform:rotat…
25% {background:yellow;left:50px;transform:r…
50% {background:green;left:100px;transform:r…
75% {background:blue;left:50px;transform:rot…
100% {background:red;left:00px;transform:rota…
}

</style>
<div class="one"></div> 
```

我怎样才能让它在第一个动画之后播放？例如，动画“a”将在“b”完成后播放，而不是在 b 发生时播放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T22:45:33.483

您可以链接 2 个或更多动画。这是以 -webkit 为前缀的代码。

```
-webkit-animation: a 4s linear 0s, b 2s linear 4s; 
```

动画 a 会从 0s 播放到 4s，动画 b 会从 4s 播放到 6s (4+2)。这是链接 2 个动画的示例：

[http://jsfiddle.net/jtYCW/2/](http://jsfiddle.net/jtYCW/2/)

# android - 我们可以用 CheckboxPreference 显示一个按钮而不是图标吗

> ID：14575625
> 
> 赞同：1
> 
> 时间：2013-01-29T04:23:40.177
> 
> 标签：android, checkboxpreference

我从几天开始就在使用**checkBoxPreference ，**

已经想通了：

1.  如何使用 checkBoxPreference 显示图标，
2.  如何更改标题和摘要的颜色

现在，我需要添加一个按钮而不是图标。所以这里的任何人对此都有任何想法......

我试图在preferenceFragment 的onCreateView 中添加一个按钮，但没有运气......因为我正在动态添加checkBoxPreference，所以无法在xml 中添加它。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:52:08.447

我们需要定义可以使用的自己的布局，使用@Prativa 提到的两行，添加小部件的良好布局示例，可以在此链接中看到：

[具有自己布局的 CheckBoxPreference](https://stackoverflow.com/questions/7094584/checkboxpreference-with-own-layout)

此外，如果要修改添加到此自定义布局的小部件的任何属性，您还需要编写自定义 checkBoxPreference 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:35:49.177

通过 xml 构建复选框首选项时，我们可以设置自定义布局，我们可以在其中放置我们喜欢的任何内容以实现我们想要的结果，如下所示：

```
 <CheckBoxPreference
    android:defaultValue="false"
    android:key="message_pop"
    android:layout="@layout/custom_checkbox_preference_layout"
    android:summary="Enable incoming message pop-up"
    android:title="Message Pop-up" /> 
```

我不确定，但可能这段代码会帮助你

```
 CheckBoxPreference checkBoxPreference = new CheckBoxPreference(this);
    checkBoxPreference.setWidgetLayoutResource(R.layout.custom_checkbox); 
```

为您的动态创建复选框首选项分配自定义布局。在这个自定义布局中，您可以使用您想要的任何视图。

# phpthumb - phpThumb 不适用于服务器上的大图像

> ID：14575632
> 
> 赞同：0
> 
> 时间：2013-01-29T04:24:24.247
> 
> 标签：phpthumb

我花了很多时间搜索和尝试不同的选项，但没有运气:( phpThumb 在开发机器上就像一个魅力，但在服务器上它失败了，没有错误。我正在使用 ajaxForm 上传图像。

```
 $phpThumb->setSourceData($thumb_source_path);
                $phpThumb->setParameter('w', 180);
                $phpThumb->setParameter('h', 160);
                $phpThumb->setParameter('zc', true);
                $output_filename = $imgThumbPath;
                if ($phpThumb->GenerateThumbnail()) { 

                    if ($phpThumb->RenderToFile($output_filename))
                    {

                    }
                } else {

                    echo 'Failed:<pre>'.$phpThumb->fatalerror."\n\n".implode("\n\n", $phpThumb->debugmessages).'</pre>';
                } 
```

![phpThumb.demo.check.php 结果](../Images/f50a8f6231ab5d903a34bccbf54bb173.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:16:14.640

我没有收到错误，因为`@ImageCreateFromString($RawImageData);`删除后`@`我知道问题与`memory_limit`. 我的问题解决了设置`memory_limit`为`-1`无限分配。

谢谢

# jquery - ASP.NET（带母版页）如何在jQuery中一次获取两个ID

> ID：14575633
> 
> 赞同：-1
> 
> 时间：2013-01-29T04:24:26.703
> 
> 标签：jquery, asp.net, master-pages

我有小问题，也许有人知道解决方案？？？通常要使用 jQuery 获取两个 ID，我会这样做：

```
$('#firstID, #secondID').datepicker({ ... 
```

我如何在 ASP.NET 中使用 jQuery（使用 MasterPage）来做到这一点？？？我试过这个：

```
$('[id$=firstID], [id$=secondID]').datepicker({ ... 
```

它工作，但不是很好（（（谢谢提前！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:28:21.353

我尝试使用以下代码并且工作正常

```
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function () {             $("#ctl00_ContentPlaceHolder1_strtdatepicker,#ctl00_ContentPlaceHolder1_enddatepicker").datepicker();            
    });
</script>
<asp:TextBox ID="strtdatepicker" runat="server"></asp:TextBox>
<asp:TextBox ID="enddatepicker" runat="server"></asp:TextBox>
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:53:38.070

好的，至于 3 或 4 日期选择器在 sae 时间开放，我不知道你在说什么，但要回答你的问题，最简单的最好方法是这样做

```
$('.firstClass, .secondClass').datepicker({ ... 
```

显然，需要将类分配给母版页中的文本框。可以从 id 被破坏的子页面访问类，并且（不能那么容易）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:54:41.120

试试这个...

```
$("#firstID, #secondID").each(function(){
    $(this).datepicker();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-23T11:44:56.160

可能是页面加载中的代码。您可以在 document.ready 函数（）中使用您的代码：

```
$(document).ready(function () {
    $('#firstID, #secondID').each(function(){
         $(this).datepicker({ 
         });
    });
}); 
```

或者

```
$(document).ready(function () {
    $('#firstID, #secondID').datepicker({ });
}); 
```

# java - DELETE 的默认 struts 处理程序是做什么的

> ID：14575634
> 
> 赞同：1
> 
> 时间：2013-01-29T04:24:57.933
> 
> 标签：java, struts2, struts, struts-1

Struts 似乎有一个用于 DELETE HTTP 方法的默认处理程序 doDelete。我实现的 servlet 不使用任何 DELETE 方法。但是，当我使用 curl 执行方法查询时，确实会出现 DELETE 方法。

我想知道实现doDelete的默认servlet的默认行为。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:56:05.833

[Struts 2 通过核心restful 映射器](http://struts.apache.org/2.x/docs/restfulactionmapper.html)中的两个可用来支持 REST ，但您必须先启用它们。或者使用[Struts 2 REST 插件](http://struts.apache.org/2.x/docs/rest-plugin.html)。

在这两种情况下，您必须首先配置 Struts 2 以启用 REST 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:46:58.093

不太了解Struts2及其对Actions的使用。但是，如果您定义自己的 servlet，您将具有与带有 ActionServlets 的 Struts1 相同的行为。ActionServlet 是 HttpServlet 的子类，并且不会覆盖该`doDelete`方法。以下是该方法的[开源代码](http://grepcode.com/file/repo1.maven.org/maven2/javax.servlet/servlet-api/2.5/javax/servlet/http/HttpServlet.java#HttpServlet.doDelete%28javax.servlet.http.HttpServletRequest%2Cjavax.servlet.http.HttpServletResponse%29)：`doDelete``HttpServlet`

```
protected void doDelete(HttpServletRequest req, HttpServletResponse resp)
    throws ServletException, IOException
{
    String protocol = req.getProtocol();
    String msg = lStrings.getString("http.method_delete_not_supported");
    if (protocol.endsWith("1.1")) {
        resp.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, msg);
    } else {
        resp.sendError(HttpServletResponse.SC_BAD_REQUEST, msg);
    }
} 
```

该方法在 servlet 上的默认实现会返回一个错误（您可以使用[REST Console](https://chrome.google.com/webstore/detail/rest-console/cokgbflfommojglbmbpenpphppikmonn?hl=en)`doDelete`之类的工具向示例 servlet发送`DELETE`请求来验证该错误）。

# php - \r\n 被添加到文本字段导致 PHP/HTML 表单

> ID：14575638
> 
> 赞同：1
> 
> 时间：2013-01-29T04:25:15.593
> 
> 标签：php, html, forms

我有一个执行此操作的表单的文本区域：

```
<textarea rows="4" name="message"></textarea> 
```

在 PHP 中，当提交表单时，会发生这种情况：

```
 $text_form = $database -> escape_value($_POST['message']); 
```

然后使用 PHPMailer 作为电子邮件消息的一部分发送：

```
$message .= '<p style="font-family: Arial, verdana, sans-serif;"><strong>Brief Message</strong>: ' . $text_form . '</p>'; 
```

最后在这里，是我上面提到的数据库方法：

```
public function escape_value($value) {
    if ( $this->real_escape_string_exisits ) {
    if ( $this->magic_quotes_active ) { $value = stripslashes( $value ); }
        $value = mysql_real_escape_string($value);
    } else {
        if (!$this->magic_quotes_active ) { $value = addslashes( $value ); }
    }
    return $value;      
} 
```

上述方法实际上是从 Lynda.com 教程中逐行复制的。

现在在电子邮件上，如果用户在文本字段中点击返回，他会得到这个

这是第一行。现在我将在此处按回车键。\r\n这是新行

为什么要添加 \r\n ？我明白这些是什么意思，但为什么它们会出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:31:03.040

来自[PHP 文档](http://php.net/manual/en/function.mysql-real-escape-string.php)：

> mysql_real_escape_string() 调用 MySQL 的库函数 mysql_real_escape_string，该函数在以下字符前添加反斜杠：\x00、\n、\r、\、'、" 和 \x1a。

因此，您的字符串现在包含两个反斜杠和另外两个字母，而不是换行符。

现在的问题是你`$value`以后做什么。如果将其插入到 SQL 语句中，则应该是这样；如果您直接将其用于邮件，则它具有文字`\r\n`而不是回车换行符。

# javascript - 在元素的模糊处理程序运行之前模糊元素及其父元素？

> ID：14575641
> 
> 赞同：1
> 
> 时间：2013-01-29T04:25:19.707
> 
> 标签：javascript, jquery

使用此 HTML：

```
<div id="SomeDiv">
   <input id="SomeInput" />
   <div id="ChildDiv"></div>
</div> 
```

我有一个分配给模糊事件的事件处理程序`SomeInput`。blur 事件处理程序检查是否`SomeDiv`或任何`SomeDiv`的孩子仍然有焦点，如果其中任何一个有焦点，则中止（按设计）。

问题是，当我`SomeInput`务实地调用 blur() on 时，`SomeInput`的 blur 事件处理程序运行，但由于它认为`SomeDiv`仍然有焦点而中止。

我已经尝试显式地模糊输入和父 div，但输入处理程序仍然认为父 div 是焦点。我也尝试过聚焦和模糊窗口和身体元素，这似乎没有任何作用。

如何同时模糊`SomeInput`、`SomeDiv`和`SomeDiv`的子级，因此当 SomeInput 的事件处理程序运行时，它不会*将*SomeDiv 视为焦点？

事件处理程序：

```
this.eBlur = function(event,eventThis) {
   console.log(this.$element.attr('id')+' has lost focus.');
   if(this.$element.has(":focus").length === 0){
      console.log('widget does not have focus');
      // do something.
   }
   else{
      console.log('something is still focused, do nothing.');
   }
}

var base = this;
this.$input.bind('blur', function(e){base.eBlur(e,this);}); 
```

然后执行：

```
console.log('about to blur');
this.$input.blur();
// The blur handler runs immediately here
console.log('blur complete'); 
```

所以日志显示：

```
about to blur
this.$element.attr('id')+' has lost focus.
something is still focused, do nothing.
blur complete 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:34:00.840

发生这种情况的原因是`blur`事件在元素实际失去焦点之前触发。您必须将代码下推到堆栈中，以便它仅在元素实际模糊后执行。这可以通过将您的代码放入计时器中来完成（不需要延迟）：

```
$('#SomeInput').on('blur', function () {
    setTimeout(function () {
        // run your code here...
    }, 0);
}); 
```

# php - 如何缩短我的网站帖子中出现的数据文本

> ID：14575648
> 
> 赞同：0
> 
> 时间：2013-01-29T04:26:12.253
> 
> 标签：php, character

我正在尝试调整我网站中帖子的字符显示，但无论我如何更改代码。它要么截断到 1 个单词，要么出现错误。请帮忙，我该怎么办？

这是代码。

```
<p style="float:right; margin-top:3px;width:88px;">       
    {if $short_urls eq "1" OR $short_urls eq "2"}
            {insert name=get_short_url value=a assign=takento PID=$posts[i].PID SEO=$posts[i].name}

            <a href="http://twitter.com/share" class="twitter-share-button" data-url="{$takento}" data-via="{$twitter}" data-hashtags="DailyRantz" data-text="{insert name=strip_special2 value=a assign=cstory2 text=$posts[i].story}{$cstory2}", data-count="horizontal">Tweet</a>
            {else}

            <a href="http://twitter.com/share" class="twitter-share-button" data-url="{$baseurl}/view/{$posts[i].name|stripslashes|replace:' ':'+'}/" data-via="{$twitter}" data-text="You know,.......Want to know my Daily Rantz? Join me and others @" data-count="horizontal" data-hashtags="DailyRantz">Tweet</a>
            {/if}
            <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
        </p> 
```

我确实添加了代码，但它对我不起作用。有人知道我做错了什么吗？

```
<div style="float:right;">

        <p style="float:left; margin-top:4px; margin-right:10px;">
            <a href="javascript:;" onclick="plusToggle('{$posts[i].PID}');"><img src="{$imageurl}/plus_mini.gif"></a>
        </p> 
```

{文字}

```
 <p style="float:right; margin-top:3px;width:88px;">       
    {if $short_urls eq "1" OR $short_urls eq "2"}
            {$smarty->assign{'$post[i].PID'}|truncate:100:'...':True; 

            {insert name=get_short_url value=a assign=takento PID=$posts[i].PID SEO=$posts[i].name}

            <a href="http://twitter.com/share" class="twitter-share-button" data-url="{$takento}" data-via="{$twitter}" data-hashtags="DailyRantz" data-text="{insert name=strip_special2 value=a assign=cstory2 text=$posts[i].story}{$cstory2}", data-count="horizontal">Tweet</a>

            {else}

            <a href="http://twitter.com/share" class="twitter-share-button" data-url="{$baseurl}/view/{$posts[i].name|stripslashes|replace:' ':'+'}/" data-via="{$twitter}" data-text="You know,...Want to know my Daily Rantz? Join me and others @" data-count="horizontal" data-hashtags="DailyRantz">Tweet</a>
            {/if}
            <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
        </p> 
```

请帮忙，非常感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:30:56.420

采用`{$str|truncate:20}`

它将截断字符串 ref : smarty truncate。

通常显示我们将`{$string}`在 smarty中使用的字符串

如果要截断字符串，请`{$string|truncate:20:...}`像这样使用

您仅在分配时未显示它的地方执行此操作。

即`{$smarty->assign{'$post[i].PID'}|truncate:100:'...':True;`不会工作。

注意：检查语法`$smarty->assign`，它需要您分配的变量名称和您分配的值。

所以作为一个完整的代码，它将是这样的：

```
1\. First assign a value to a variable.
    $smarty->{assign var="name" value="just to test"}
    ref: http://www.smarty.net/docs/en/language.function.assign.tpl

 2\. truncate the value.
    {$name|truncate:20:...}
    ref: http://www.smarty.net/docs/en/language.modifier.truncate.tpl 
```

# android - 如何在可扩展列表视图中做复选框（在组视图和子视图中）

> ID：14575652
> 
> 赞同：0
> 
> 时间：2013-01-29T04:26:57.493
> 
> 标签：android, android-layout, android-intent, android-emulator, android-contentprovider

我正在尝试在 expanablelistview 中做复选框（在 groupview 和子视图中）。但我不理解这个概念。所以如果你们有任何想法，请与我分享。这是我第一次研究这个概念（expanablelistview）。

**groupview**中的复选框(CheckBox checkBoxGroup)

1.  如果我选中 groupview（groupposition 0）中的复选框，则子项（childposition 0）中的所有项目都必须检查。
2.  就像我取消选中 groupview（groupposition 0）所有子项（childposition 0）必须取消选中一样。

**子视图**中的复选框(CheckBox checkBoxChild;)

1.  只是复选框中的多项选择。

谢谢你的帮助。

这是我下面的代码

```
public class DetailAdapter extends BaseExpandableListAdapter {
    private LayoutInflater mInflater;
    private ArrayList<PatientSampleDetails> sampleArray;    
    private ArrayList<lstServiceOrderDetails> serviceLst;
    private Activity activity;
    ArrayAdapter<String> adapter;
    View row;
    public LayoutInflater minflater;
    Context mContext;
    int chldPosition;
   //   ServiceOrderList elementChild
    PatientSampleDetails elementChild;
    public static HashMap<Integer,Boolean> selectedGroupMembers = new HashMap<Integer, Boolean>();
    private static View container ;
    ActionItem nextItem;
    int posi;
    lstServiceOrderDetails child;
    View rowView;

    static class ViewHolder {

        private CheckBox checkBoxChild;

        public CheckBox checkBoxGroup;
        public Button button;
        public TextView service;
        }

    public WorkDetailAdapter(Activity activity, ArrayList<PatientSampleDetails> sampleArray) {
        this.sampleArray = sampleArray;
        this.activity = activity;
        mInflater = LayoutInflater.from(activity);      
    }

    public void setInflater(LayoutInflater mInflater) {
          this.minflater = mInflater;
         }

    public Object getChild(int groupPosition, int childPosition) {
        return sampleArray.get(groupPosition).lstServiceOrderDetails.get(childPosition);
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public View getChildView(final int groupPosition, final int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
        Log.i("getChildView-getChild", groupPosition + "/" + childPosition);
        child = (lstServiceOrderDetails) getChild(groupPosition, childPosition);
        Log.i("child", "child data"+ child.getServiceName());
        rowView = convertView;
        final ViewHolder holder = new ViewHolder();
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.detaillistrowview, null);
            holder.serviceText = (TextView) convertView.findViewById(R.id.sevice);  
            holder.checkBoxChild = (CheckBox)convertView.findViewById(R.id.checkBox);   

            holder.checkBoxChild.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                    @Override
                    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {                            
                         if (isChecked) {
                        elementChild = (PatientSampleDetails) holder.checkBoxChild.getTag();    
                        elementChild.setSelected(buttonView.isChecked());
                        Log.i("buttonView-checkBox", "getChildId  :" + getChildId(groupPosition, childPosition));
                        Log.i("status", ""+ elementChild.isSelected());
                        }   else {                                                    
                                elementChild.setSelected(false);                        
                            }
                         }
                });

            if (selectedGroupMembers.containsKey(groupPosition) == true){
                holder.checkBoxChild.setActivated(true);
                Log.i("true", "true");
                holder.checkBoxChild.setSelectAllOnFocus(true);
            }  else {
                holder.checkBoxChild.setActivated(false);
                Log.i("false", "false");
                holder.checkBoxChild.setSelectAllOnFocus(true);
            }

                convertView.setTag(holder);

            holder.checkBoxChild.setTag(sampleArray.get(groupPosition));
            holder.serviceText.setText(Util.formatN2H(child.getServiceName())); 
            Log.i("child", "child data ---> "+ child.getServiceName() +"/"+child.getServiceName());

        //Now write here code for set colors for rows
      /*  if(childPosition % 2 == 0) {
           convertView.setBackgroundColor(Color.parseColor("#E7E8E8")); 
        } else {
           convertView.setBackgroundColor(Color.parseColor("#C9CACC"));
        }*/

        // To change the color of the Listview row.         
    //      /   convertView.setBackgroundColor((childPosition & 1) == 1 ? Color.parseColor("#E7E8E8") : Color.parseColor("#C9CACC"));

            return convertView;
    }

    public int getChildrenCount(int groupPosition) {
        serviceLst = sampleArray.get(groupPosition).getServiceOrderList();
        return serviceLst.size();       
    }

    public Object getGroup(int groupPosition) {
        return sampleArray.get(groupPosition);
    }

    public int getGroupCount() {
        return sampleArray.size();
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(final int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        final ViewHolder holder = new ViewHolder();
        PatientSampleDetails group = (PatientSampleDetails) getGroup(groupPosition);
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.getgroupviewdetail, null);
            convertView.setId(groupPosition);

        holder.checkBoxGroup = (CheckBox) convertView.findViewById(R.id.checkBoxGroup);
        holder.checkBoxGroup.setFocusable(false);

        holder.checkBoxGroup.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            PatientSampleDetails elementGroup ;
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {                            

                if (isChecked == true) {
                    selectedGroupMembers.put(groupPosition, Boolean.valueOf(true)); //new Boolean(true));
                    elementGroup = (PatientSampleDetails) holder.checkBoxGroup.getTag();
                    elementGroup.setSelected(buttonView.isChecked());
                    Log.i("Clicked : ", "group" + groupPosition);
                    Log.i("buttonView", "getItemId  :" + getGroupId(groupPosition));
                    Log.i("status", ""+ elementGroup.isSelected());
                    Log.i("buttonView", "chldPosition  :" + getChildId(groupPosition, chldPosition));
                    notifyDataSetChanged();
                } else if (selectedGroupMembers.containsKey(groupPosition)) {
                    selectedGroupMembers.remove(groupPosition);
                    elementGroup.setSelected(false);
                    Log.i(" Removed : ", "group" + groupPosition);
                    notifyDataSetChanged();
                }
                }
        });

        convertView.setTag(holder); 

        holder.checkBoxGroup.setTag(sampleArray.get(groupPosition));

        } else {
            ((ViewHolder) convertView.getTag()).checkBoxGroup.setTag(sampleArray.get(groupPosition));

        }
        return convertView;
    }

    public boolean hasStableIds() {
        return false;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:33:19.337

试试这个，`Adapter`当您滚动列表时，每分钟都会刷新一次。您必须为每个项目设置标签，否则您将获得标签值

```
if (convertView == null) {
 //Add ur code 
 convertView.setTag(holder);
 }else{
holder = (ViewHolder) convertView.getTag();
} 
```

它将识别您的独特价值`ListView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:08:26.523

1.  在应用程序上下文中获取一个数组列表来保存将用于保存列表当前状态的状态。第一次从 web 服务或任何地方获取数据并填充它。

2.  将此数组列表传递给适配器以填充列表。

3.  在 groupview 复选框更改更新该列表。并调用 notifyDatasetChanged。

# mysql - 更新 Mysql（如果 2 列为空，则转到下 2 列）

> ID：14575655
> 
> 赞同：0
> 
> 时间：2013-01-29T04:27:27.650
> 
> 标签：mysql

[https://stackoverflow.com/a/11177086/1947965](https://stackoverflow.com/a/11177086/1947965)

从上面的正确答案链接我想跟进另一个问题。因为我要做的就是在这组字段为空时更新一组字段，否则更新到另一组字段而不仅仅是单个列。这是另一种情况：

1.) 如果`subjectColumnA, timeColumnA, dataColumnA`是`NULL`更新字段。

2.) 如果`subjectColumnA, timeColumnA, dataColumnA`是`Not NULL`AND`subjectColumnB, timeColumnB, dataColumnB`是`NULL`更新字段`subjectColumnB, timeColumnB, dataColumnB`

等等。. .

从@ravinder 的查询我想问有这种情况：让我们说这是表的内容

```
+------+------+------+------+------+------+------+------+------+------+
| id   | AAA1 | BBB1 | CCC1 | AAA2 | BBB2 | CCC2 | AAA3 | BBB3 | CCC3 |
+------+------+------+------+------+------+------+------+------+------+
|    1 | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL |
+------+------+------+------+------+------+------+------+------+------+ 
```

根据上述条件，我提到了“AAA1、BBB1 和 CCC1”，`NULL`因此这些列将被更新。结果会是这样。

```
+------+------+------+------+------+------+------+------+------+------+
| id   | AAA1 | BBB1 | CCC1 | AAA2 | BBB2 | CCC2 | AAA3 | BBB3 | CCC3 |
+------+------+------+------+------+------+------+------+------+------+
|    1 |    2 |    2 |    2 | NULL | NULL | NULL | NULL | NULL | NULL |
+------+------+------+------+------+------+------+------+------+------+ 
```

另一种情况是，当“AAA1，BBB1，CCC1”为“NOT NULL”时，“AAA2，BBB2，CCC2”将被更新，结果将是这样的。

```
+------+------+------+------+------+------+------+------+------+------+
| id   | AAA1 | BBB1 | CCC1 | AAA2 | BBB2 | CCC2 | AAA3 | BBB3 | CCC3 |
+------+------+------+------+------+------+------+------+------+------+
|    1 |    3 |    3 |    3 | NULL | NULL | NULL | NULL | NULL | NULL |
+------+------+------+------+------+------+------+------+------+------+ 
```

是否可以？？由于我从其他问题和答案中读到的内容使用 CASE 和 If 仅使用 2 个参数。我试过这样的查询，但它失败了。

```
UPDATE table SET
    AAA3 = IF( AAA2 IS NOT NULL, 2, AAA3 ) AND BBB3 = IF( BBB2 IS NOT NULL, 2, BBB3 ),
    AAA2 = IF( AAA1 IS NOT NULL, 2, AAA2 ) AND BBB2 = IF( BBB1 IS NOT NULL, 2, BBB2 ),
    AAA1 = IF( AAA1 IS NULL, 1, AAA1 ) AND BBB1 = IF( AAA1 IS NULL, 1, BBB1 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:57:44.263

如果没有示例数据和所需的输出，真的很难回答这个问题，但是使用您提供的链接和上面的伪语法，您应该能够以完全相同的方式做到这一点：

```
UPDATE TableName SET 
subjectColumnA = ( case when subjectColumnA is null 
                        AND timeColumnA is null 
                        AND dataColumnA is null 
                    then ? 
                    else subjectColumnA end ),
timeColumnA = ( case when subjectColumnA is null 
                        AND timeColumnA is null AND 
                        dataColumnA is null 
                     then ? 
                     else timeColumnA end ),
dataColumnA = ( case when subjectColumnA is null AND 
                        timeColumnA is null AND 
                        dataColumnA is null 
                     then ? 
                     else dataColumnA end ),
subjectColumnB = ( case when subjectColumnA is not null AND 
                        timeColumnA is not null AND 
                        dataColumnA is not null AND 
                        subjectColumnB is null AND 
                        timeColumnB is null AND 
                        dataColumnB is null 
                    then ? 
                    else subjectColumnB end ),
timeColumnB = ( case when subjectColumnA is not null AND 
                        timeColumnA is not null AND 
                        dataColumnA is not null AND 
                        subjectColumnB is null AND 
                        timeColumnB is null AND 
                        dataColumnB is null 
                    then ? 
                    else timeColumnB end ),
dataColumnB = ( case when subjectColumnA is not null AND 
                        timeColumnA is not null AND 
                        dataColumnA is not null AND 
                        subjectColumnB is null AND 
                        timeColumnB is null AND dataColumnB is null 
                    then ?
                    else dataColumnB end ) 
```

真的，只需添加您的标准，如果不满足，请在您的 else 中更新回自身。

- 编辑

使用上面的查询，您仍然可以使用 CASE——工作方式与 IIF 相同：

```
UPDATE table SET
    AAA3 = CASE WHEN AAA2 IS NOT NULL THEN 2 ELSE AAA3 END,
    BBB3 = CASE WHEN BBB2 IS NOT NULL THEN 2 ELSE BBB3 END,
    AAA2 = CASE WHEN AAA1 IS NOT NULL THEN 2 ELSE AAA2 END,
    BBB2 = CASE WHEN BBB1 IS NOT NULL THEN 2 ELSE BBB2 END,
    ... 
```

祝你好运。

# jquery - 在 jquery mobile 中滑动轮播和立方体显示

> ID：14575657
> 
> 赞同：1
> 
> 时间：2013-01-29T04:27:38.180
> 
> 标签：jquery, css, jquery-mobile, jquery-plugins, carousel

我无法在 jquery mobile 的轮播中看到我的立方体......没有轮播，立方体动画效果很好......

工作代码 [http://jsfiddle.net/SV8CM/2/embedded/result/](http://jsfiddle.net/SV8CM/2/embedded/result/)

小提琴中的错误......不工作 [http://jsfiddle.net/yxhzU/5132/](http://jsfiddle.net/yxhzU/5132/)

如何解决？我的代码如下：

```
<ul id="carousel1" style="display: none;">
        <li>
            <div style="width: 100%; height: 100%; background-color:#381;">
                <div class="span5" style="margin-left: 97px; width: 493px;">
                    <div class="melonhtml5_gallery">
                        <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/inventoryControl.png"></div>

                </div>
            </div>
        </li>
        <li>
            <div style="width: 100%; height: 100%; background-color:#837;">
               <div class="span5" style="margin-left: 65px; width: 493px;">
                    <div class="melonhtml5_gallery">
                        <div data-caption="" data-image="http://www.defie.co/designerImages/png/accPayable.png"></div>

                    </div>
                </div>
            </div>
        </li>
    </ul> 
```

下面的jquery代码

```
 (function($) {
        $("#carousel1").carousel();
        $("#carousel2").carousel({direction: "vertical"});
    })(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T11:09:29.580

至于第一个`<li>`缺少 close `</div>`。

```
<li>
    <div style="width: 100%; height: 100%; background-color:#381;">
        <div class="span5" style="margin-left: 97px; width: 493px;">
            <div class="melonhtml5_gallery">
                <div data-caption="&lt;a style='margin-left: 92px; font-size: 18px; color: grey;' href='http://www.w3schools.com/' &gt;Create&lt;/a&gt; &lt;div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;View/Edit&lt;/a&gt; &lt;/div&gt; &lt;a style='margin-left: 92px; font-size: 18px; color: grey;' &gt;Labels&lt;/a&gt;" data-image="http://www.defie.co/designerImages/inventoryControl.png"></div>
            </div> <!-- here closing div was missing -->
        </div>
    </div>
</li> 
```

# android - 自定义操作栏在 HTC sense 的 edittext 中不起作用

> ID：14575661
> 
> 赞同：1
> 
> 时间：2013-01-29T04:28:30.370
> 
> 标签：android, htcsense

我有一个在 EditText 窗口上使用自定义操作栏的应用程序。这在 vanilla Jellybean 4.1 和 4.2 上运行良好，但在 HTC One X+ 上似乎 HTC Sense 正在阻碍。这是我在香草 JB 上看到的：

[![JB动作条](../Images/757124c56318521968bd2dc02fa19d42.png)](https://i.stack.imgur.com/Egkr8.png)
[（来源：[sr20.org](http://www.sr20.org/jb.png)）]

所以我有带有样式按钮（I、B、U）的自定义操作栏。

这就是我在 HTC 上看到的。操作栏没有被我的取代，而是有一个 Sense 版本的复制/粘贴弹出窗口。

[![HTC 复制/粘贴](../Images/58a902b476190d240074604c864f5a98.png)](https://i.stack.imgur.com/KaDH5.png)
[（来源：[sr20.org](http://www.sr20.org/htc.png)）]

关于如何说服 EditText 表现得像 Android API 所说的那样的任何想法？

# iphone - 在编辑模式下向 UITableView 单元格添加自定义图标

> ID：14575663
> 
> 赞同：0
> 
> 时间：2013-01-29T04:28:39.387
> 
> 标签：iphone, xcode, uitableview

我是 Xcode 的新手。我知道如何为 a 自定义单元格`UITableView`，但我想知道如何为编辑模式自定义单元格。

我想要：

1.  在减号的右侧添加一个图标（铅笔）
2.  以及当用户单击铅笔调用方法时何时导致这种情况发生。

对不起，帽子，谢谢你修复它。

我试图上传截图，但因为我是新手，所以我不能。但是我指的减号图标是当您在表格视图中并点击编辑按钮时出现的减号图标添加到每个单元格中。

谢谢Dhara，我会尽力做你的建议，希望它有效。但欢迎其他想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:09:14.513

您可以执行以下操作来添加铅笔

1.  检查表格是否处于编辑模式，然后添加一个自定义按钮并将其图像设置为您的铅笔图像（在此执行此操作`cellForRowAtIndexPath`或制作一个自定义单元格并将其加载到`cellForRowAtIndexPath`）。
2.  给那个定制铅笔一个标签，并给它分配方法。
3.  按下该铅笔时，将调用该方法，您可以根据标签区分不同的铅笔。

希望这对您有所帮助。

# tcp - 与 nginx 通信时 Uwsgi 被阻塞

> ID：14575664
> 
> 赞同：1
> 
> 时间：2013-01-29T04:28:43.473
> 
> 标签：tcp, nginx, uwsgi

大家，最近几天我遇到了一个奇怪的问题，这真的让我发疯了。

我正在使用 nginx + uwsgi + django 在生产中部署站点。该站点每天有大约 3 亿个请求，最大并发为每秒 4000 个，我前面有 4 个 nginx，后端有 6 个 uwsgi，nignx 通过 tcp 与 uwsgi 通信.

几个月来表现不错。但是有一天uwsgi突然不工作了。它在下面抛出消息：

HARAKIRI: --- uWSGI worker 72 (pid: 23094) WAS 管理请求 /2/article/v2/stream/?detail=1&image=1&count=20&max_behot_time=1358697136&latitude=39.914651254102&longitude=116.45855261839&city=&device_platform=220&channel_app_name=&version news_article&openudid=474604a56e33a44f&uuid=353769056450763&os_api=16&device_type=GT-N7100&os_version=4.1.1 自 2013 年 1 月 21 日星期一 23:07:51 起 ---

从上面的消息看来，由于 django 应用程序中有一个很长的请求，uwsgi 会杀死自己。但是我检查了我的应用查看时间并进行了调试，我确信我的应用非常快（大约 100 毫秒处理一个请求）。

令我惊讶的是，我发现 nginx 向 uwsgi 抛出了很多连接时间，因为 uwsgi 反复杀死自己并且队列已满。

所以我 strace uwsgi 进程，我发现 uwsgi 在写系统调用时被阻塞，直到它杀死它：

writev(8, [{"HTTP/1.1", 8}, {" ", 1}, {"200 OK", 6}, {"\r\n", 2}, {"Vary", 4}, {":", 2}, {"Cookie", 6}, {"\r\n", 2}, {"Content-Type", 12}, {":", 2}, {"text/html ; charset=utf-8", 24}, {"\r\n", 2}, {"\r\n", 2}], 13) = 73

write(8, "{\"has_more\": true, \"message\": \"s"..., 24005

在我的理解中，uwsgi 在 tcp 中使用了 Nonblocking 模式，它永远不会被阻塞。我google了很长时间，尝试了很多次，但没有任何帮助。

最后，我更改了我的部署模式，我在前面使用4个nginx监听80端口并使用http_proxy到6个nginx端口81，nginx 81端口与uwsgi通信vai unix文件sock。经过这次尝试，uwsgi从未阻塞并且所有没关系。

谁能告诉我为什么 uwsgi 在我认为不应该发生的 write syscall 中被阻止？或者在什么情况下通过 tcp 与 nginx 通信时 uwsgi 会被阻止？

非常感谢

# python - Python存储和比较时间戳

> ID：14575667
> 
> 赞同：1
> 
> 时间：2013-01-29T04:29:30.790
> 
> 标签：python, datetime, utc, timestamp

根据我的研究，似乎将我的时间戳存储为 UTC（不是本地的，完整的，例如：2013-01-29 02:11:11.151996+00:00）是常态。

检索时间时，我想检查一个时间窗口是否已经过去。所以，

```
currentTime = datetime.utcnow()
storedTime  = '2013-01-29 02:11:11.151996+00:00'

if (storedTime + 60) > currentTime:
    print "60 or more has elapsed, do something again" 
```

即使它不是日期时间对象，如何添加任意数量的时间来执行 UTC 时间戳？或者，如何从 UTC 时间戳创建日期时间对象，然后向其中添加任意时间。

我知道一旦我有两个日期时间对象，我就可以做 d1 > d2。我只是在获取对象时遇到了麻烦。

蒂亚！

编辑/更新：

谢谢大家。我决定执行以下操作：（这是两个答案的组合，对不起，我只能接受一个！）

```
 lastTime = dateutil.parser.parse(subDict['last'])
        utcNow = datetime.datetime.utcnow().replace(tzinfo=tz.tzutc())

        if lastTime + datetime.timedelta(seconds=subDict['interval']) < utcNow:
            print "Time elapsed, do something!" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T04:35:15.400

将 storedTime 作为`datetime`对象并添加一个[`timedelta`](http://docs.python.org/2/library/datetime.html#timedelta-objects). [`strptime`](http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior)用于将字符串解析为日期时间对象：

（格式字符串的详细信息请参考链接）

```
currentTime = datetime.datetime.utcnow()
s = '2013-01-29 02:11:11.151996+00:00'
storedTime = datetime.datetime.strptime(s[:-6], "%Y-%m-%d %H:%M:%S.%f")
if storedTime + datetime.timedelta(minutes=60) > currentTime:
    print "stuff..." 
```

> 注意：从 3.7`.fromisoformat()`开始添加，因此不需要使用`strptime`日期时间`isoformat()`字符串。

```
>>> datetime.datetime.fromisoformat('2013-01-29 02:11:11.151996+00:00')
datetime.datetime(2013, 1, 29, 2, 11, 11, 151996, tzinfo=datetime.timezone.utc) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T04:59:01.803

对于事情的解析方面，我喜欢使用 dateutil 模块。对我来说，它比提供的 strptime 解决方案更容易和更清洁（尽管应该可以）。

```
import dateutil.parser

stored_time = dateutil.parser.parse('2013-01-29 02:11:11.151996+00:00') 
```

但是，这很容易！:) 您现在尝试比较本地和时区感知值时会遇到问题。有几个 SO questions 处理这个问题。您可能想在[此处](https://stackoverflow.com/questions/7065164/how-to-make-an-unaware-datetime-timezone-aware-in-python)阅读此问题的答案。

# javascript - 在javascript中定义模块内部的函数

> ID：14575669
> 
> 赞同：0
> 
> 时间：2013-01-29T04:29:44.917
> 
> 标签：javascript, jquery

我试图定义一个函数 attachPicker 可以这样调用：

```
(function(){
  $.fn.tagPicker = function(source){
    this.attachPicker();
  }
})(jQuery); 
```

我试过：

```
(function(){
    $.fn.tagPicker = function(source){
      this.attachPicker();
      //define attachPicker
      $.fn.attachPicker = function(){
        //code here
      }
    }
 })(jQuery);

(function(){
      $.fn.tagPicker = function(source){
          this.attachPicker();
          //define attachPicker
          this.attachPicker = function(){
            //code here
          }
      }
})(jQuery); 
```

两人都扔了

```
Uncaught TypeError: Object [object Object] has no method 'attachPicker' 
```

如果我这样做了

```
(function(){
      $.fn.tagPicker = function(source){
        this.attachPicker();
      }
      $.fn.attachPicker() = function(){ //codes here };
})(jQuery); 
```

有效。但我想在 tagPicker 中定义 attachPicker 以便它可以访问源。任何人都可以解释为什么我尝试过的那些不起作用并给我任何建议？当然，我知道如果在外部定义 attachPicker，我可以将 source 作为参数传递。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:55:11.593

在使用任何函数之前，您应该定义该函数

试试这个代码

```
(function(){
      $.fn.tagPicker = function(source){

          //define attachPicker
          this.attachPicker = function(){
            //code here
          }
          this.attachPicker();
      }
})(jQuery); 
```

您可以在这里测试：http: [//jsfiddle.net/s23py/](http://jsfiddle.net/s23py/) 也可以通过对象调用它：http: [//jsfiddle.net/s23py/2/](http://jsfiddle.net/s23py/2/)

# leaflet - 图层加载顺序

> ID：14575670
> 
> 赞同：1
> 
> 时间：2013-01-29T04:29:45.217
> 
> 标签：leaflet

似乎这些图层是从头开始加载的。有没有办法改变图层加载顺序？我有一个首先要加载的前景层，我只是不知道如何加载。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:10:05.850

您可以尝试这样做：`yourLayer.setZIndex(zIndex);`更改图层的 zindex。

问候

# javascript - 在 IE document.getElementsByName 上不起作用

> ID：14575671
> 
> 赞同：8
> 
> 时间：2013-01-29T04:29:59.347
> 
> 标签：javascript, internet-explorer, getelementsbyname

我使用这段代码：

```
<div name="1234">
   <img src="pic.gif" height="70" width="100" onMouseOver="clear('1234')">
</div> 
```

和：

```
function clear(element_name){
    document.getElementsByName(element_name)[0].innerHTML="";
} 
```

它可以在 Firefox 和 Opera 中运行，但在 IE 6.0 或 IE 8.0 中不起作用，甚至可能在较新的 IE 中也不起作用。

该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T04:29:59.347

好吧，问题是这样的：IE 将 document.getElementsByName(...)[0] 理解为 document.getElementById(...)。因此，如果您还要为您的元素定义一个 id，那么方法 document.getElementsByName(element_name)[0].innerHTML="" 也会令人惊讶地在 IE 中工作！

但是，由于 IE 无论如何您都需要定义一个 id，并且由于 id 必须始终以 char 开头，因此您必须使用：

```
<div id="a234">
    <img src="pic.gif" height="70" width="100" onMouseOver="clear('a234')">
</div> 
```

这个命令：

```
function clear(element_id){
    document.getElementById(element_id).innerHTML="";
} 
```

更重要的是，document.getElementsByName(...)[0] 在 Firefox 中速度较慢：[http ://www.uize.com/tests/performance/getElementById-vs-getElementsByName.html](http://www.uize.com/tests/performance/getElementById-vs-getElementsByName.html)

所以 id 肯定会赢得比赛。

**更新：**

**同样重要的是，我们可以在CSS**文件中通过 #a234{...} 对每个 id 进行寻址。所以我们可以*为每个 id 定义一个自己的样式*，这使得 id 更加强大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-04T21:25:27.293

使用**getElementsByName**获取**name**属性不属于 W3C 规范的 DOM 元素（例如，在问题中，DIV 元素的 name 不存在），IE 无法获取这些元素。FF 做到了。
澄清一下：***expando 属性***或更广为人知的***自定义属性***是我所说的不属于 W3C 规范的属性。

阅读：[IE7 中的 getElementsByName](https://stackoverflow.com/questions/278719/getelementsbyname-in-ie7)
阅读：http: [//msdn.microsoft.com/en-us/library/ms536438 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms536438(VS.85).aspx)

所以总而言之：在尝试获取**“表单控件”**
（输入、选择、文本区域）时 使用**getElementsByName**，因为它们根据规范将**名称**作为属性。 如果元素不是表单控件，请改用 getElementById。

# c - Visual Studio：XP和Windows7中相同可执行文件的内存大小不同

> ID：14575676
> 
> 赞同：0
> 
> 时间：2013-01-29T04:30:26.360
> 
> 标签：c, memory, console, size, executable

我有一个使用 C 语言中的 Visual Studio Professional 2010 开发的 Windows 控制台应用程序。出于测试目的，我在两个系统上运行它。在一个系统（Windows XP）中，任务管理器报告内存中的大小约为 2000 K，而在其他系统中它是只有 600 K。可执行文件大小没有变化。（仅 300K）。

XP系统使用Visual Studio 2010 express生成exe，Windows 7系统使用Visual Studio 2010 Professional生成。在这两种情况下，可执行文件的大小完全相同。

为什么会这样？我怎样才能使尺寸相同？

系统加载的dll是否有问题。程序使用的 dll 在某些情况下会有所不同。

我使用以下命令检查了两个系统加载的 dll：

tasklist /m /fi "imagename eq [programname]"

## Windows XP系统输出：

```
 ntdll.dll, kernel32.dll, KERNELBASE.dll,
                               MSVCR100D.dll, WS2_32.dll, msvcrt.dll,
                               RPCRT4.dll, NSI.dll, mswsock.dll,
                               user32.dll, GDI32.dll, LPK.dll, USP10.dll,
                               IMM32.DLL, MSCTF.dll, wshtcpip.dll 
```

## Windows 7 系统中的输出：

```
 ntdll.dll, kernel32.dll, MSVCR100D.dll,
                              WS2_32.dll, ADVAPI32.dll, RPCRT4.dll,
                              Secur32.dll, msvcrt.dll, WS2HELP.dll,
                              mswsock.dll, hnetcfg.dll, GDI32.dll,
                              USER32.dll, IMM32.DLL, wshtcpip.dll 
```

感谢 Xen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:17:05.530

[VMMap](http://technet.microsoft.com/en-us/sysinternals/dd535533.aspx)显示摘要信息和详细的进程内存映射。您可以将内存消耗的布局保存在一个文件中，然后针对不同的操作系统版本进行比较。

内存中文件的分布取决于操作系统版本。Windows 7 通过[MinWin](http://en.wikipedia.org/wiki/MinWin)减少了 exe 占用的内存消耗和加载时间（您可以看到新的 dll kernelbase.dll）。

# big-o - 作业：为代码片段寻找 Big-Oh

> ID：14575677
> 
> 赞同：0
> 
> 时间：2013-01-29T04:30:32.777
> 
> 标签：big-o

为了与每个人保持一致，这是一个家庭作业。我不希望任何人为我提供彻底的答案，这更多是为了检查我是否正确理解事物或找出我做错了什么。

我得到了一些代码片段来确定它们的 Big-Oh 是什么。每个都在处理 for 循环，但是我们得到的最后两个让我有点失望。首先：

```
 sum = 0;
      for (i = 0; i < n; i++) //1
         for (j = 0; j < i * i; j++) //2
            for (k = 0; k < j; k++) //3
               sum++; 
```

我认为其中的 Big-Oh 将是 O(n^4)。#1 将运行 n 次，#2 将运行 n^2 次，#3 将运行 n 次，给我 n^4。但是，当我在 C++ 中正确编写并给出 n 值 10、100 和 1000（根据我的分配）时，n = 10 返回 7524（好，小于 10,000）n = 100 返回值 975,002,490，而上限将是 100,000,000。显然，我在对循环的分析中偏离了某个地方，但我不太确定在哪里。不确定 n = 1000 会返回什么，因为我的计算机已经运行了一段时间，而且似乎还没有准备好给我答案。

第二个片段如下：

```
 sum = 0;
      for (i = 0; i < n; i++) //1
         for (j = 0; j < i * i; j++) //2
            if (j % i == 0) //3
               for (k = 0; k < j; k++) //4
                  sum++; 
```

我相信我可以放心地忽略 if 语句，因为它的运行时间是测试的运行时间加上它的内容，这意味着我会再次提出 O(n^4)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:51:41.497

好吧，我不是 O 专家，但我知道 for 循环和一些数学，所以我会尽力帮助你。

当您考虑您的陈述“#1 将运行 n 次，#2 将运行 n^2 次，#3 将运行 n 次，给我 n^4”时，它只是部分正确.. 是的，如果这些数字几乎是正确的你分别运行循环。但是考虑 n = 4 的示例...首先#1 将运行 4 次，但是对于循环编号 #1 的每次迭代，循环编号 #2 将运行 i*i 次...所以..

首先当 i = 0 #2 将运行 0 次.. (j < 0*0) 然后当 i = 1 #2 将运行 1 次 (j < 1*1) 然后当 i = 2 #2 循环将运行 4 次(j < 2*2) 并且当 i = 3 #2 将运行 9 次 (j < 3*3)

所以总共 #2 将运行 14 次。(0 + 1 + 4 + 9 ) 和 4^4 不是 14。这也升级到 #3 循环。

正如您所说，您对直接答案不感兴趣，我希望这可以帮助您更好地理解 for 循环。

# ajax - 带有指定端口的 jQuery.load() 会破坏 URL——跨源错误

> ID：14575678
> 
> 赞同：0
> 
> 时间：2013-01-29T04:30:33.820
> 
> 标签：ajax, jquery, cross-domain

我的应用程序托管在：127.0.0.1:8000

我调用了一个 jQuery 方法将一些内容加载到容器中（例如简化）：

```
$('body').load('127.0.0.1:8000/static/views/testing.html'); 
```

运行这行代码后，我收到一条错误消息：

> XMLHttpRequest 无法加载 %3127.0.0.1:8000/static/views/testing.html。仅 HTTP 支持跨源请求。

在某个地方，jQuery 正在修改 URL 并添加“%3”。如果我删除冒号， %3 就会消失。这不是跨域问题，因为源和目标都在 127.0.0.1:8000。

是否存在一些我不知道的问题，这是在 URL 中使用带有端口说明符的 jQuery.load() 所固有的？

我在 Ubuntu 12.04 LTS（版本 23.0.1271.97 Ubuntu 12.04 (23.0.1271.97-0ubuntu0.12.04.1)）上的 Chromium 中运行它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:33:23.093

您不需要指定域，请尝试：

```
$('body').load('/static/views/testing.html'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:42:26.927

我很确定 load() 函数中的第一个参数应该是基于域的 URL 而不是 IP 地址。因此，如果您改为使用`$('body').load('http://localhost:8000/static/views/testing.html');`，它应该可以正常工作。

# python - 正则表达式搜索调试

> ID：14575679
> 
> 赞同：-4
> 
> 时间：2013-01-29T04:30:34.307
> 
> 标签：python, regex

这是表达式：

```
.*\[(\d*)/(\w*)/(\d*).*"(GET|POST)\s(https?://)[a-z].*?\.([a-z]+)[^\w.-].*200 
```

我遇到的问题是域名。我得到了 .net、.cgi、.com 和 .htm

我只需要 .net 和 .com，换句话说，在这种情况下**出现的第一个域，** **.net**和**.com**

```
68.134.160.117 - - [09/Mar/2004:22:24:27 -0500] "GET http://www.glocksoft.net/cgi-bin/jenv.cgi HTTP/1.0" 200 1169 "-" "Mozilla/4.0"

220.175.18.42 - - [09/Mar/2004:22:47:30 -0500] "GET http://www.searchlikecrazy.com/cgi-bin/smartsearch.cgi?keywords=Web+Design%20&username=arongyi HTTP/1.0" 200 26166 "http://www.yourwindow.com/searchlikecrazy.htm" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0; MyIE2)" 
```

我在哪里得到问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:07:10.067

对于您提供的两个示例，您的正则表达式似乎对我来说都很好（或者我可能只是把问题弄错了）。我使用以下脚本对其进行了测试（对不起，行长）：

```
#!/usr/bin/env python

import re

lines = ['68.134.160.117 - - [09/Mar/2004:22:24:27 -0500] "GET http://www.glocksoft.net/cgi-bin/jenv.cgi HTTP/1.0" 200 1169 "-" "Mozilla/4.0"',
         '220.175.18.42 - - [09/Mar/2004:22:47:30 -0500] "GET http://www.searchlikecrazy.com/cgi-bin/smartsearch.cgi?keywords=Web+Design%20&username=arongyi HTTP/1.0" \
200 26166 "http://www.yourwindow.com/searchlikecrazy.htm" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0; MyIE2)"']

regex = re.compile(r'.*\[(\d*)/(\w*)/(\d*).*"(GET|POST)\s(https?://)[a-z].*?\.([a-z]+)[^\w.-].*200')

for line in lines:
    match = regex.match(line)
    if match:
        print match.groups() 
```

输出：

```
('09', 'Mar', '2004', 'GET', 'http://', 'net')
('09', 'Mar', '2004', 'GET', 'http://', 'com') 
```

Python版本：2.7.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:26:27.507

我想这可能是您正在搜索的内容。

```
import re

log_line = '68.134.160.117 - - [09/Mar/2004:22:24:27 -0500] "GET https://www.blog.glocksoft.net/cgi-bin/jenv.cgi HTTP/1.0" 200 1169 "-" "Mozilla/4.0"'

print re.search(r'GET\s\w{3,5}://((\w+\.?)+)', log_line).group(1)
print re.search(r'GET\s\w{3,5}://((\w+\.?)+)', log_line).group(2) 
```

输出：

```
www.blog.glocksoft.net
net 
```

# sql - 如何使用 SQL 作业自动执行代码？

> ID：14575685
> 
> 赞同：0
> 
> 时间：2013-01-29T04:31:15.403
> 
> 标签：sql, vb.net, clr

我有这个 VB 代码可以从我的网络服务器中删除垃圾文件。该代码似乎运行良好，我想通过使用 sql 作业自动化此代码以每天运行它。怎么可能呢？

这是代码：

```
Public Sub GetFilesAndFolders()
    Dim dirInfo As DirectoryInfo = New DirectoryInfo(Server.MapPath("~/test"))
    Dim fileInfo() As FileInfo = dirInfo.GetFiles("*.*", SearchOption.AllDirectories)
    Dim fileExist As ArrayList = New ArrayList()
    Dim pathExist As ArrayList = New ArrayList()
    Dim fileToDelete As ArrayList = New ArrayList()
    pathExist = returnPathExist()
    For Each d As FileInfo In fileInfo
        If String.Format("{0:dd/MM/yyyy}", d.CreationTime) = Date.Today Then
            fileExist.Add("~\test\" & d.Name)
        End If
    Next

    For Each listElement As String In fileExist
        If Not pathExist.Contains(listElement) Then
            fileToDelete.Add(listElement)
        End If
    Next

    For Each item As String In fileToDelete
        Dim imageFile As FileInfo = New FileInfo(HttpContext.Current.Server.MapPath(item))
        If imageFile.Exists Then
            File.Delete(HttpContext.Current.Server.MapPath(item))
        End If
    Next

End Sub

Function returnPathExist() As ArrayList
    Dim pathExist As ArrayList = New ArrayList()
    'declare connection to the database and stored procedure
    Try
        cnn.Open()
        rdr = cmd.ExecuteReader
        While rdr.Read()
            pathExist.Add(rdr("test"))

        End While
        rdr.Close()
    Finally
        cnn.Close()
        cnn.Dispose()
    End Try
    Return pathExist
End Function 
```

我想使用 CLR，但不确定应该添加哪个 CLR。模块、类、存储过程或??? 而且 CLR 不支持 httpcontext 和 system.Configuration.ConfigurationManager ，我需要在上面的 returnPathExist 函数中访问我的存储过程。

谢谢你的建议。

更新：

我离让它发挥作用只有一步之遥。以下是引发错误的行：

```
Dim dirInfo As DirectoryInfo = New DirectoryInfo(Server.MapPath("~/test"))

Dim imageFile As FileInfo = New FileInfo(HttpContext.Current.Server.MapPath(item))

File.Delete(HttpContext.Current.Server.MapPath(item)) 
```

看来 HttpContext.Current 不能在 CLR 中使用。这是真的吗？有什么办法可以解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:59:17.260

您确实应该对路径进行配置设置。 `HttpContext.Current`仅对 ASP.NET 请求/响应上下文有效。

# c# - 在 ASP.NET 中使用复选框启用文本框？

> ID：14575686
> 
> 赞同：2
> 
> 时间：2013-01-29T04:31:33.897
> 
> 标签：c#, asp.net, .net, checkbox, textbox

我们尝试使用 C# 将 checkBox1 链接到 txtCommentBox。我们正在尝试使 txtCommentBox 保持禁用状态，直到 checkBox1 被选中。

我们已经完成了以下操作。

```
if (checkBox1.Enabled)
{
    txtCommentBox.Enabled = true;
} 
```

失败后，我们在 page_Load 方法中尝试执行以下操作。

```
txtCommentBox.Enabled = checkBox1.Enabled; 
```

那也没有用。我们用控件尝试了各种属性，但没有成功。.aspx 代码在下面，C# 代码在下面。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Infomation.aspx.cs" Inherits="Infomation" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Information</title>
    <link href="StyleSheet.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
        .style1
        {
            width: 100%;
        }
        .style2
        {
            width: 605px;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <div>

        <h4>
            If you would like to leave your Questions, Comments, E-mail, Name or Phone 
            Number check off the box you would like to enter into the form.
        </h4>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <table class="style1">
            <tr>
                <td class="style2">
                    <asp:Label ID="Label1" runat="server"><span class="accesskey">C</span>omment:</asp:Label>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <asp:TextBox ID="txtCommentBox" runat="server" AccessKey="C" Width="334px" 
                        ontextchanged="txtCommentBox_TextChanged" Enabled="False"></asp:TextBox>
                    <asp:CheckBox ID="CheckBox1" runat="server" AutoPostBack = "true"
                        oncheckedchanged="CheckBox1_CheckedChanged" Text="Enable/disable" />
                </td>
                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td class="style2">
                    <asp:Label ID="Label2" runat="server"><span class="accesskey">E</span>mail:</asp:Label>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <asp:TextBox ID="txtEmailBox" runat="server" AccessKey="E" Width="334px" 
                        ontextchanged="txtEmailBox_TextChanged" Enabled="False"></asp:TextBox>
                    <asp:CheckBox ID="CheckBox2" runat="server" AutoPostBack = "true"
                        oncheckedchanged="CheckBox2_CheckedChanged" Text="Enable/disable" />
                </td>
                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td class="style2">
                    <asp:Label ID="Label3" runat="server"><span class="accesskey">N</span>ame:</asp:Label>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <asp:TextBox ID="txtNameBox" runat="server" AccessKey="N" Width="334px" 
                        ontextchanged="txtNameBox_TextChanged" Enabled="False"></asp:TextBox>
                    <asp:CheckBox ID="CheckBox3" runat="server" AutoPostBack = "true"
                        oncheckedchanged="CheckBox3_CheckedChanged" Text="Enable/disable" />
                </td>
                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td class="style2">
                    <asp:Label ID="Label4" runat="server"><span class="accesskey">P</span>hone Number:</asp:Label>
                    <asp:TextBox ID="txtPhoneBox" runat="server" AccessKey="P" Width="334px" 
                        ontextchanged="txtPhoneBox_TextChanged" Enabled="False"></asp:TextBox>
                    <asp:CheckBox ID="CheckBox4" runat="server" AutoPostBack = "true"
                        oncheckedchanged="CheckBox4_CheckedChanged" Text="Enable/disable" />
                </td>
                <td>
                    &nbsp;</td>
            </tr>
        </table>
        <asp:ListBox ID="ListBox1" runat="server" Height="321px" Width="887px">
        </asp:ListBox>
        <br />
        <br />
        <br />
        <br />

        <br />
        <br />
        <asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
            Text="Back to the Main Page" />
        <br />

    </div>
    </form>
</body>
</html> 
```

我已经将我们的 C# 代码放在下面：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Infomation : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            txtCommentBox.Enabled = false;
            txtEmailBox.Enabled = false;
            txtNameBox.Enabled = false;
            txtPhoneBox.Enabled = false;
        }
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        Response.Redirect("JoelsDefaultPage.aspx");
    }
    protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
    {
        if (CheckBox1.Enabled == true)
            txtCommentBox.Enabled = true;
        else
            txtCommentBox.Enabled = false;
    }
    protected void CheckBox2_CheckedChanged(object sender, EventArgs e)
    {
        if (CheckBox2.Enabled == true)
            txtEmailBox.Enabled = true;
        else
            txtEmailBox.Enabled = false;
    }
    protected void CheckBox3_CheckedChanged(object sender, EventArgs e)
    {
        if (CheckBox3.Enabled == true)
            txtNameBox.Enabled = true;
        else
            txtNameBox.Enabled = false;
    }
    protected void CheckBox4_CheckedChanged(object sender, EventArgs e)
    {
        if (CheckBox4.Enabled == true)
            txtPhoneBox.Enabled = true;
        else
            txtPhoneBox.Enabled = false;
    }
    protected void txtCommentBox_TextChanged(object sender, EventArgs e)
    {

    }
    protected void txtEmailBox_TextChanged(object sender, EventArgs e)
    {

    }
    protected void txtNameBox_TextChanged(object sender, EventArgs e)
    {

    }
    protected void txtPhoneBox_TextChanged(object sender, EventArgs e)
    {

    }
} 
```

**编辑#1**

好的，所以 AutoPostBack 有点工作。我现在可以从禁用状态启用文本框，但是我不能再次禁用它。

**更新#1**

我已经将代码更新为我们现在所拥有的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T04:36:39.067

我认为问题出在这条线上

```
<asp:CheckBox ID="CheckBox1" runat="server"  
     oncheckedchanged="CheckBox1_CheckedChanged" Text="Enable/disable" /> 
```

它缺少 autopostback="true"
结合它将是

```
<asp:CheckBox ID="CheckBox1" runat="server"  AutoPostBack="True" 
     oncheckedchanged="CheckBox1_CheckedChanged" Text="Enable/disable" /> 
```

## 编辑-1

这是相同
[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.autopostback.aspx的 MSDN 示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.autopostback.aspx)

## 编辑-2

但我会建议你使用`java-script`或`jQuery`相同。
这是一个很好的例子

[使用复选框和 jQuery 禁用/启用元素？](https://stackoverflow.com/questions/3801970/disable-enable-element-with-checkbox-and-jquery)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T04:57:52.817

这对我有用。也许你在所有的事件中都错过了一个 else 。正如@MsB 指出的那样，每当您想回发到服务器时，您还需要将复选框的 AutoPostBack 属性设置为 true ...检查下面的示例**（也更新了我的答案以通过 javascript 启用/禁用）**

```
 <form id="form1" runat="server">
    <div>
        <h2>Enable/Disable via checkbox server side</h2>
        <p>
        <label>Name:</label>
        <asp:TextBox ID="txtName" runat="server" Enabled="false"></asp:TextBox>
        <asp:CheckBox ID="cbEnableName" runat="server" AutoPostBack="true" 
                Text="Enable Name" oncheckedchanged="cbEnableName_CheckedChanged" />
        </p>

        <h2>Enable/Disable via checkbox client side</h2>
        <p>
        <label>Address:</label>
        <asp:TextBox ID="txtAddress" runat="server" Enabled="false"></asp:TextBox>
        <asp:CheckBox ID="cbEnableAddress" runat="server" onclick="EnableDisableAddress()"
                Text="Enable Address" />
        </p>

    </div>

    <script type="text/javascript">
        function EnableDisableAddress() {
            var chkAddress = document.getElementById('<%=cbEnableAddress.ClientID %>');
            var txtAddress = document.getElementById('<%= txtAddress.ClientID %>');

            txtAddress.disabled = !chkAddress.checked;
        }
    </script>
</form>

protected void cbEnableName_CheckedChanged(object sender, EventArgs e)
    {
        if (cbEnableName.Checked)
            txtName.Enabled = true;
        else
            txtName.Enabled = false;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T16:49:40.970

要检查复选框的状态，您要使用

```
textbox.Enabled = checkBox.Checked; 
```

而不是复选框的启用状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T04:42:21.217

```
<asp:CheckBox ID="CheckBox1" runat="server"  AutoPostBack="True" 
                    oncheckedchanged="CheckBox1_CheckedChanged" Text="Enable/disable" /> 
```

您必须将“AutoPostBack”设置为 true，以便在选中复选框时，它将重新加载页面并在 if 语句中运行您的命令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-19T10:01:14.920

```
protected void EnableTextBox()
{
    int count = int.Parse(GridView1.Rows.Count.ToString());

    for (int i = 0; i < count; i++)
    {
        CheckBox cb = (CheckBox)GridView1.Rows[i].Cells[0].FindControl("CheckBox1");
        CheckBox cb1 = (CheckBox)GridView1.Rows[i].Cells[0].FindControl("CheckBox2");
        CheckBox cb2 = (CheckBox)GridView1.Rows[i].Cells[0].FindControl("CheckBox3");
        TextBox tb = (TextBox)GridView1.Rows[i].Cells[4].FindControl("txtration");
        TextBox tb1 = (TextBox)GridView1.Rows[i].Cells[5].FindControl("txtjob");
        TextBox tb2 = (TextBox)GridView1.Rows[i].Cells[6].FindControl("txtaadhar");

        if (cb.Checked == true)
        {
            tb.Visible = true;
        }
        else
        {
            tb.Visible = false;
        }
        if (cb1.Checked == true)

        {
            tb1.Visible = true;
        }
        else
        {
            tb1.Visible = false;
        }
        if (cb2.Checked == true)

        {
            tb2.Visible = true;
        }
        else
        {
            tb2.Visible = false;
        }
    }
}

protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
{
    EnableTextBox();
} 
```

# c#-4.0 - 使用 microsoft kinect SDK 识别用户的语音识别。

> ID：14575688
> 
> 赞同：1
> 
> 时间：2013-01-29T04:31:40.723
> 
> 标签：c#-4.0, kinect, kinect-sdk

我想知道是否有办法（通过 kinect SDK 或其他方式）能够识别与 kinect 交谈的人的声音。我已经知道如何通过 SDK 使用语音识别命令，但我想知道我是否可以识别人的声音，所以在代码中我会知道谁在控制 kinect。如果面部识别无法正常运行，我需要一些东西来备份我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:43:46.173

Kinect SDK 不对语音识别做任何事情。SDK 为麦克风阵列提供了一个挂钩，这就是 Kinect 用于音频的全部功能——麦克风。所有语音识别事件都由其他应用程序或 SDK 处理，例如[Microsoft Speech Platform](http://www.microsoft.com/en-us/download/details.aspx?id=27226)。

如果您希望根据声音识别某人，您需要：

1.  为接受语音样本并在交谈时返回最佳猜测标识的第三方应用程序付费。
2.  写你自己的。

无论哪种方式，您都在谈论很多钱（无论是自掏腰包还是时间）。

# .htaccess - 子域中的 .htaccess 文件不起作用

> ID：14575690
> 
> 赞同：0
> 
> 时间：2013-01-29T04:31:46.280
> 
> 标签：.htaccess

我已经在我的服务器上设置了一个文件夹，并且正在尝试编写一个新的 .htaccess 文件。但它不起作用。也许根目录 .htaccess 文件超过了它的规则。

这是一个简单的代码：

```
RewriteEngine On
RewriteRule horse.htm zebra.htm 
```

但是这个网址“ [http://inventikasolutions.com/demo/horse.htm](http://inventikasolutions.com/demo/horse.htm) ”转到我的wordpress而不是“ [http://inventikasolutions.com/demo/zebra.htm](http://inventikasolutions.com/demo/zebra.htm) ”

为什么我的 .htaccess 文件不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:01:15.223

这应该有效：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} horse\.htm   [NC]
RewriteCond %{REQUEST_URI} !zebra\.htm  [NC]
RewriteRule .*  demo/pwnzuck/zebra.htm [R=301,L] 
```

### 更新

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} /pwnzuck/([^/]+)/?$ [NC]
RewriteCond %{REQUEST_URI} !index\.php         [NC]
RewriteRule .*  demo/pwnzuck/index.php?url=%1  [L] 
```

静默地图

`http://inventikasolutions.com/demo/pwnzuck/val1`

到：

`http://inventikasolutions.com/demo/pwnzuck/index.php?url=val1`

对于永久且可见的重定向，请替换`[L]`为`[R=301,L]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:39:13.787

试试这个：

```
RewriteEngine On
RewriteRule ^horse.htm$ zebra.htm 
```

# node.js - Node Express MongoDB Native Driver — 在哪里打开数据库连接？

> ID：14575693
> 
> 赞同：6
> 
> 时间：2013-01-29T04:32:20.210
> 
> 标签：node.js, mongodb, variables, express

我想在 app.js 文件中通过 Node-Mongo-Native-Driver 打开并初始化数据库，然后将其保持打开状态并读取路由。我将以下代码放入 app.js 并包装 app.gets 以便在打开数据库时使它们可用：

```
var mongoClient = new MongoClient(new Server('localhost', 27017));
mongoClient.open(function(err, mongoClient) {
  var db1 = mongoClient.db("dev-db")
    , products = db1.collection('products');
  app.get('/', routes.index);
  app.get('/users', user.list);
}); 
```

当我现在尝试读取 index.js 路线中的数据库时，我得到了

```
ReferenceError: products is not defined 
```

我认为 index.js 应该能够访问产品，因为它是在外部函数中定义的，因为在初始化中包装了 app.gets。

除了第二个问题： MongoClient.open 和 MongoClient.connect 有什么区别

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T05:03:25.240

JavaScript 使用词法作用域——意思是，如果你这样做，它会起作用：

```
var mongoClient = new MongoClient(new Server('localhost', 27017));
mongoClient.open(function(err, mongoClient) {
  var db1 = mongoClient.db("dev-db")
    , products = db1.collection('products');
  app.get('/', function closedOverIndexRoute(req, res, next) {
    console.log(products); // this will work
  });
  app.get('/users', user.list); // however, user.list will not be able to see `products`
}); 
```

一个函数不会成为一个闭包（不保留其封闭函数的值），除非它是在闭包内部的词法（写入）。

但是，您可能不想将整个应用程序编写为一个大闭包。相反，您可以使用 export 和 require 来访问您的产品集合。例如，在一个名为 mongoconnect.js 的文件中：

```
var mongoClient = new MongoClient(new Server('localhost', 27017));
var products;

mongoClient.open(function(err, mongoClient) {
  var db1 = mongoClient.db("dev-db");
  products = db1.collection('products');
});

module.exports = {
  getProducts: function() { return products; }
}; 
```

然后在你的 index.js 文件中：

```
var products = require('mongoconnect').getProducts(); 
```

**另一种选择（如果您只想保留 app 和 index）是使用一对闭包：**

index.js：

```
module.exports = function(products) {
  return function index(req, res, next) {
    console.log(products); // will have closed-over scope now
  };
}; 
```

app.js，在里面，定义`mongoClient.open()`在哪里：`products`

```
var index = require('./index')(products); 
```

# php - 从 cakephp 的输入中删除多余的空格

> ID：14575695
> 
> 赞同：2
> 
> 时间：2013-01-29T04:32:32.063
> 
> 标签：php, postgresql, cakephp-1.3

我有一个 html 表单来保存 cakephp 中的项目。我想限制用户保存相同的项目名称。如果任何主体类型相同的项目名称，我在模型中应用了“唯一”验证，但如果有人在项目名称之前或之后输入带有空格的相同名称，它会接受它并存储到数据库中。这就是问题所在。我想在保存之前删除多余的空格。

请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-12-01T23:19:51.627

从用户输入中删除空格的最佳位置，即在控制器级别`trim()`的回调中。`beforeFilter()`对于 PHP5+，数组函数`array_walk_recursive()`使这项工作变得非常容易。

例如：

```
public function beforeFilter()
{
    parent::beforeFilter();

    // remove leading and trailing whitespace from posted data
    if (!function_exists('trimItem')) {
        function trimItem(&$item,$key){
            if (is_string($item)){
                $item = trim($item);    
            }
        }
    }       
    array_walk_recursive($this->request->data, 'trimItem');                     
} 
```

将此代码放入`AppController`，用户输入将在所有表单上被修剪

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T04:33:52.987

使用`trim`它将从两侧修剪你的字符串

参考： http: [//php.net/manual/en/function.trim.php](http://php.net/manual/en/function.trim.php)

```
trim($str); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T09:07:33.040

就像@Prasantn Bebdra 的回答一样，因为提问者不知道在哪里以及如何使用`trim()`.

要修剪来自控制器中 POST 的所有数据（就在调用之前`Model->save()`），请执行以下操作：

```
foreach ($this->data as $key => $value) {
    $this->data[$key] = trim($value);
} 
```

您还可以`Model`通过利用其中一个[回调](http://book.cakephp.org/2.0/en/models/callback-methods.html)来使用它，例如[beforeValidate()](http://book.cakephp.org/2.0/en/models/callback-methods.html#beforevalidate)或[beforeSave()](http://book.cakephp.org/2.0/en/models/callback-methods.html#beforesave)在您的情况下，最好使用 beforeValidate，因为您可能还想在之后验证此数据。

您还应该通知用户输入将被修剪，并且可能还会在客户端（在 POST 之前）进行此类修剪 - 检查[这个 StackOverflow 答案](https://stackoverflow.com/a/8121031/840409)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-31T10:13:14.030

通过我的研究，我认为最好的解决方案是如果您的数据是**数组格式**，那么试试这个 => [Stackoverflow: How to trim white spaces of array values in php](https://stackoverflow.com/a/5762453/5038388)

同时，如果您的数据**不是数组**，那么您可以简单地使用：

```
$data = trim($data); 
```

# javascript - 具有负数和非整数幂的 Math.pow

> ID：14575697
> 
> 赞同：13
> 
> 时间：2013-01-29T04:32:53.173
> 
> 标签：javascript, floating-point, ieee-754, ecmascript-5, ecma262

ECMAScript 规范`Math.pow`具有以下特殊规则：

> *   如果 x < 0 且 x 是有限的且 y 是有限的且 y 不是整数，则结果为 NaN。

( [http://es5.github.com/#x15.8.2.13](http://es5.github.com/#x15.8.2.13) )

结果是`Math.pow(-8, 1 / 3)`给出`NaN`而不是`-2`

这个规则的原因是什么？这条规则是否有某种更广泛的计算机科学或 IEEEish 原因，或者它只是 TC39/Eich 曾经做出的选择？

* * *

### 更新

感谢Amadan与我的交流，我想我现在明白了其中的道理。为了后代，我想扩展我们的讨论。

让我们看下面的例子：`Math.pow(823543, 1 / 7)`虽然`6.999999999999999`它确实应该是`7`. 这是由于`1 / 7`必须首先转换为十进制表示而导致的不准确性`0.14285714285714285`，该表示被截断并失去精度。当我们使用正数时，这并不是一个糟糕的问题，因为我们仍然会得到非常接近真实结果的结果。

然而，一旦我们踏入消极的世界，我们就会遇到问题。如果一个 JavaScript 引擎要尝试计算`Math.pow(-823543, 1 / 7)`，它首先需要转换`1 / 7`为小数，所以它`Math.pow(-823543, 0.14285714285714285)`实际上是*没有真正答案*的计算。在这种情况下，它可能不得不返回，`NaN`因为它找不到实数，即使真正的答案应该是`-7`。此外，寻找接近实数的复数以进行“最佳猜测”可能涉及一定程度的复杂性，他们不希望在数学领域中需要 JS 引擎。

我的猜测是由于考虑到浮点数的精度损失，导致他们得出这样的规则：负数的非整数幂应该总是`NaN`——基本上是因为非整数幂可能会给出由于精度损失而导致的复数，即使它不应该，并且可能没有好的方法可以从中恢复。

对此，我相当满意，但我欢迎进一步的信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T04:35:45.147

我假设是因为这些情况导致结果进入复杂的领域，并且 ECMAScript 没有配备虚数。具体来说，您的示例应该会产生接近于 的`1 + 1.732i`结果，以及其他结果。（事实上​​，-2 也是一个可能的结果并不重要 - 这是一个意外而不是规则。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-04T05:10:32.060

您可以使用辅助函数。

我很快就遇到了类似的情况。这是为您提出的解决方案：

```
function checkSquareRoot(x, y) {
    if (x > 0) {
        return Math.pow(x, y)
    }
    return -1 * Math.pow(-x, y)
} 
```

# css - 在 Vaadin 中设置可折叠列菜单的大小

> ID：14575700
> 
> 赞同：1
> 
> 时间：2013-01-29T04:33:18.303
> 
> 标签：css, vaadin

我有一个包含大量列的表格，因为我更喜欢只显示那些重要的列，其余的留给用户，如果用户希望查看其他列，他会从可折叠菜单中选择那些列。

我有通过 iframe 嵌入 Vaadin 布局的 JSP。正如我所说，当我单击可折叠图标时，没有大量列（> 20），我得到一个大于高度的菜单，`Iframe`因此我无法选择超出 Iframe 大小的列（虽然出现滚动，但我无法选择列）说如果 IFrame`100px`的大小是列可折叠菜单的大小，`120PX`我无法选择所有在 100px 之后出现的列。我尝试使用以下 CSS 设置大小

```
.v-contextmenu .gwt-MenuBar{

    max-height: 60%;
} 
```

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:44:00.560

我使用了以下 CSS 设置，它似乎可以正常工作，没有任何问题。

```
.v-contextmenu .gwt-MenuBar{

width:auto !important;
height:400px !important;
overflow-y: auto !important;
overflow-x: hidden !important;
} 
```

如果以防万一，您无法选择可折叠菜单中的最后一项，请将上述 CSS 放在您的主题下的 Styles.css 中。

# php - PHP没有正确地四舍五入浮动？

> ID：14575703
> 
> 赞同：0
> 
> 时间：2013-01-29T04:33:24.890
> 
> 标签：php

我正在尝试舍入 double `0.0045`。当我打电话...

```
echo round($theFloat, 3); 
```

我得到 0.004，而不是预期响应的 0.005。

这是代码：

```
$increase = 1.1;
$previousPrice = round(0.11 / $increase, 2);
$nextPrice = round(0.11 * $increase, 2);
$afterCut = round(0.11 * 0.95, 6);
$willSend = $afterCut - $previousPrice;
echo round($willSend, 3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:42:23.353

像这样试试

```
$increase = 1.1;
$previousPrice = 0.11 / $increase;
$nextPrice = 0.11 * $increase;
$afterCut = round(0.11 * 0.95, 6);
$willSend = $afterCut - $previousPrice;
echo round($willSend, 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:46:16.987

尽管您的值*看起来*像 0.0045，但该值*实际上*约为 0.00449999999999999966，因为[IEEE 754 浮点值无法准确指定该数字](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)。*这个*值，当四舍五入到 3 位时，是 0.004。

# iphone - 通过蓝牙 iPhone SDK 发送字符串

> ID：14575706
> 
> 赞同：1
> 
> 时间：2013-01-29T04:33:58.747
> 
> 标签：iphone, xcode, bluetooth

如何将字符串从 iPhone 发送到另一台设备（android、pc 等）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T04:46:41.530

**已编辑**

以下代码用于通过蓝牙 viewcontroller.h 文件传输消息

```
#import <UIKit/UIKit.h>
#import <GameKit/GameKit.h>

@interface ViewController : UIViewController <GKSessionDelegate, GKPeerPickerControllerDelegate>

@property (strong, nonatomic) UILabel           *messageReceivedLabel;
@property (strong, nonatomic) UITextField       *messageToSendTextField;
@property (strong, nonatomic) GKSession         *session;
@property (strong, nonatomic) UIButton          *sendButton; 

@end 
```

视图控制器.m 文件

```
#import "ViewController.h"

@interface ViewController ()
- (void)sendMessage:(id)sender;
- (void)connectToDevice:(id)sender;

@end

@implementation ViewController

@synthesize messageReceivedLabel    = _messageReceivedLabel;
@synthesize messageToSendTextField  = _messageToSendTextField;
@synthesize session                 = _session;
@synthesize sendButton              = _sendButton;

- (void)connectToDevice:(id)sender
{
    if (self.session == nil) {
        //create peer picker and show picker of connections
        GKPeerPickerController *peerPicker = [[GKPeerPickerController alloc] init];
        peerPicker.delegate = self;
        peerPicker.connectionTypesMask = GKPeerPickerConnectionTypeNearby;
        [peerPicker show];
    }

}

- (void)sendMessage:(id)sender 
{   
    //package text field text as NSData object 
    NSData *textData = [self.messageToSendTextField.text dataUsingEncoding:NSASCIIStringEncoding];
    //send data to all connected devices
    [self.session sendDataToAllPeers:textData withDataMode:GKSendDataReliable error:nil];

}

#pragma mark - 
#pragma mark - GKPeerPickerControllerDelegate
- (GKSession *)peerPickerController:(GKPeerPickerController *)picker sessionForConnectionType:(GKPeerPickerConnectionType)type
{
    //create ID for session
    NSString *sessionIDString = @"MTBluetoothSessionID";
    //create GKSession object
    GKSession *session = [[GKSession alloc] initWithSessionID:sessionIDString displayName:nil sessionMode:GKSessionModePeer];
    return session;
}

- (void)peerPickerController:(GKPeerPickerController *)picker didConnectPeer:(NSString *)peerID toSession:(GKSession *)session
{
    //set session delegate and dismiss the picker
    session.delegate = self;
    self.session = session; 
    picker.delegate = nil;
    [picker dismiss];
}

#pragma mark - 
#pragma mark - GKSessionDelegate
- (void)session:(GKSession *)session peer:(NSString *)peerID didChangeState:(GKPeerConnectionState)state
{
    if (state == GKPeerStateConnected){
        [session setDataReceiveHandler:self withContext:nil]; //set ViewController to receive data
        self.sendButton.enabled = YES; //enable send button when session is connected
    }
    else {
        self.sendButton.enabled = NO; //disable send button if session is disconnected
        self.session.delegate = nil; 
        self.session = nil; //allow session to reconnect if it gets disconnected
    }
}

- (void)receiveData:(NSData *)data fromPeer:(NSString *)peer inSession:(GKSession *)session context:(void *)context
{   
    //unpackage NSData to NSString and set incoming text as label's text
    NSString *receivedString = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
    self.messageReceivedLabel.text = receivedString;

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    //Button to connect to other device
    UIButton *connectButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    connectButton.frame = CGRectMake(20.0f, 20.0f, 80.0f, 40.0f);
    [connectButton setTitle:@"Connect" forState:UIControlStateNormal];
    connectButton.tintColor = [UIColor darkGrayColor];
    [connectButton addTarget:self action:@selector(connectToDevice:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:connectButton];

    //Button to send message to other device
    UIButton *sendButton_ = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    sendButton_.frame = CGRectMake(220.0f, 20.0f, 80.0f, 40.0f);
    [sendButton_ setTitle:@"Send" forState:UIControlStateNormal];
    sendButton_.tintColor = [UIColor darkGrayColor];
    sendButton_.enabled = NO; //set button as disabled until connection is made
    [sendButton_ addTarget:self action:@selector(sendMessage:) forControlEvents:UIControlEventTouchUpInside];
    self.sendButton = sendButton_;
    [self.view addSubview:self.sendButton];

    //Label for message that is received
    self.messageReceivedLabel = nil;
    CGRect messageReceivedLabel_Frame = CGRectMake(20.0f, 80.0f, 280.0f, 44.0f);
    UILabel *messageReceivedLabel_ = [[UILabel alloc] initWithFrame:messageReceivedLabel_Frame];
    messageReceivedLabel_.textAlignment = UITextAlignmentCenter;
    messageReceivedLabel_.font = [UIFont boldSystemFontOfSize:20.0f];
    self.messageReceivedLabel = messageReceivedLabel_;
    [self.view addSubview:self.messageReceivedLabel];

    //Text field to input message to send
    CGRect messageToSendTextField_Frame = CGRectMake(20.0f, 144.0f, 280.0f, 44.0f);
    UITextField *messageToSendTextField_ = [[UITextField alloc] initWithFrame:messageToSendTextField_Frame];
    messageToSendTextField_.font = [UIFont systemFontOfSize:20.0f];
    messageToSendTextField_.backgroundColor = [UIColor whiteColor];
    messageToSendTextField_.clearButtonMode = UITextFieldViewModeAlways;
    messageToSendTextField_.placeholder = @"Enter a message to send";
    messageToSendTextField_.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    self.messageToSendTextField = messageToSendTextField_;
    [self.view addSubview:self.messageToSendTextField];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

然后包含 GameKit.framework 并运行项目。

它非常适合我的设备。

希望这段代码对你有帮助

# java - 如何从其他类绘制到 JPanel（类扩展）

> ID：14575713
> 
> 赞同：0
> 
> 时间：2013-01-29T04:34:42.547
> 
> 标签：java, swing, jpanel, java-2d

```
public class Main extends JPanel implements Runnable {

    private static final int WIDTH = 1000;
    private static final int HEIGHT = 800;
    TerranGenartor gen = new TerranGenartor();

    public Main() {
        setSize(WIDTH, HEIGHT);
        gen.run();
    }

    public void paintComponents(Graphics g) {
        repaint();

    }

    public void run() {
    }
} 
```

我确实收到了一个错误

```
 TerranGenartor gen = new TerranGenartor(); 
```

我的`TerranGenartor`班级

```
public class TerranGenartor implements Runnable {

    Main main = new Main();
    Graphics g;
    Random r = new Random();
    int SMIN = 1;
    int SMAX = 3;
    int i = 0;
    int num;
    int x = 0;
    int y = 0;
    public Color grass = new Color(124, 252, 0);
    public Color stone = new Color(190, 190, 190);
    public Color dirt = new Color(139, 69, 19);
    boolean Runn = false;

    public void start() {
        Runn = true;
        System.out.println("Working...");
    }

    public TerranGenartor() {
        Runn = true;
    }

    protected void paintComponent(Graphics g) {
        g = main.getGraphics();
        while (Runn) {
            if (i <= 1000) {
                num = r.nextInt(SMAX - SMIN + 1) + SMIN;
                switch (num) {
                    case 1:
                        g.setColor(grass);
                        break;
                    case 2:
                        g.setColor(stone);
                        break;
                    case 3:
                        g.setColor(dirt);
                        break;
                    default:
                        g.setColor(grass);
                        break;
                }
                g.fillRect(x, y, 50, 50);
                x += 50;
                System.out.println(i);
                System.out.println("X: " + x);
                try {
                    Thread.sleep(15);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }

    public void run() {
        while (Runn) {
            paintComponent(g);
        }
    }
} 
```

该类是不会在主类（`JPanel`扩展）中绘制的类。我尝试了一些东西，但似乎没有任何效果。

我的`The_Runner`班级

```
public class The_Runner {

    Main main = new Main();
    JFrame frame = new JFrame();
    private static final int WIDTH = 1000;
    private static final int HEIGHT = 800;
    String TITLE = "Map gen.";

    public The_Runner() {
        frame.setSize(WIDTH, HEIGHT);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setResizable(false);
        frame.setTitle(TITLE);
        frame.add(main);
    }

    public static void main(String[] args) {
        The_Runner runner = new The_Runner();
    }
} 
```

这个类只是遵守并运行它，我认为这一切都很好。

这样做的问题是，当我想从`TerranGenerator`课堂上绘画时，它不起作用。上没有显示任何内容`JPanel`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:48:48.287

让我们从...

`setSize(WIDTH, HEIGHT);`从`Main`. 这是一个坏主意。这些值可以被布局管理器覆盖（假设您正在使用一个）。您应该覆盖`getPreferredSize`并返回它们...

```
public Dimension getPreferredSize() {
    return new Dimension(WIDTH, HEIGHT);
} 
```

然后这个（也来自`Main`）

```
public void paintComponents(Graphics g) {
    repaint();
} 
```

你永远不应该`repaint`从一个`paint`方法中调用或调用任何可能导致`repaint`被调用的方法，你最终会陷入一个无限循环的厄运，这将使你的 CPU 循环到 100%

`Main`您在和之间有一个循环引用`TerranGenartor`。基本上你已经在每个中声明了每个的引用，编译器无法处理这个问题，因为它不能在不先构建另一个类的情况下构建一个类。

永远不要这样做...

```
g = main.getGraphics(); 
```

`getGraphics`is 可以返回一个`null`值。此方法返回的结果值只不过是应用程序使用的当前图形上下文的快照。这可以在下一个绘制周期取消引用或更改。

永远不要从事件调度线程 (EDT) 外部绘制/更新/修改/创建任何 Swing 组件，如果这样做，您可能会得到奇怪的绘制工件，因为您尝试更新图形并且 EDT 也会更新它，永远不会漂亮.

你可能想看看

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

**更新**

我怀疑您的“主要”问题（除了无法编译代码之外）将是该`repaint`请求正在清除您通过使用绘制的任何更改`main.getGraphics`

您还应该在方法`super.paintComponent`内调用`Main#paintComponent`。

**更新了示例**

*   [Java弹跳球](https://stackoverflow.com/questions/13022754/java-bouncing-ball/13022788#13022788)
*   [如何让线条动画更流畅？](https://stackoverflow.com/questions/13540534/how-to-make-line-animation-smoother/13547895#13547895)

# javascript - nodejs C ++模块在init中失败

> ID：14575721
> 
> 赞同：0
> 
> 时间：2013-01-29T04:35:25.147
> 
> 标签：javascript, c++, node.js

我正在编写一个 nodejs C++ 模块，并且在我的 init 函数内部，我进行了一个可能失败的系统调用。在失败时，我希望它向解释器抛出一个异常来处理，而是得到一个段错误。如何获得正确的行为？

所以例如我有类似的东西：

```
//...
void Init(Handle<Object> target) {
  if (my_setup_io()==FAIL_CODITION){
    ThrowException(Exception::Error(
      String::New("Could not init ")));  //SEG fault instead of exception
  }
  target->Set(String::NewSymbol("myFunction"),
      FunctionTemplate::New(myFunction)->GetFunction());
 }

NODE_MODULE(example, Init) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:33:21.410

主要问题是`ThrowException`在 JS 中触发了异常，但实际上并没有触发 C++ 异常。这意味着您的代码将`Set`在异常运行后尝试运行。

如果您在安排 JS 抛出后返回，它应该可以正常工作。

```
void Init(Handle<Object> target) {
  if (my_setup_io()==FAIL_CODITION){
    ThrowException(Exception::Error(String::New("Could not init ")));
    return; // RETURN!
  }
  target->Set(String::NewSymbol("myFunction"),
    FunctionTemplate::New(myFunction)->GetFunction());
}

NODE_MODULE(example, Init) 
```

# c# - 从 Main() 调用其他函数

> ID：14575724
> 
> 赞同：0
> 
> 时间：2013-01-29T04:35:42.360
> 
> 标签：c#, .net, wpf, main

我有一个功能可以更新我的 UI

```
public void Checking()
{
    // Do Something 
} 
```

我想在打开程序时调用这些函数：我相信我应该在 main 中调用它：

```
public MainWindow()
{
    InitializeComponent();
    Checking(); 
} 
```

但是在这里我遇到了一个错误：

> 调用的目标已引发异常。

PS：我正在使用 WPF ......有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:18:40.010

在您的构造函数中设置 Windows Loaded 事件并从那里调用您的 Checking() 方法。UI 尚未准备好在构造函数中进行交互，直到 XAML 完全加载。WPF 有一个事件让您知道这已经发生（Loaded 事件）。

```
public MainWindow()
{
    InitializeComponent();
    this.Loaded += new RoutedEventHandler(MainWindow_Loaded);
}

void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    Checking(); 
} 
```

如果您仍然遇到错误，那么您将需要查看您的内部异常，应该告诉您是什么导致了错误。您还可以单步执行 Checking() 方法以查看错误发生在哪一行。

[编辑] 以下是有关 Loaded 事件和 WPF 页面生命周期中事件顺序的一些附加资源：

[MSDN：FrameworkElement.Loaded 事件](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.loaded%28v=VS.95%29.aspx) [控制生命周期](http://blogs.msdn.com/b/devdave/archive/2008/10/11/control-lifecycle.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:13:49.950

您可以按照您使用的方式使用该功能。但是 Checking() 中的某些内容可能需要加载您的面板（或其他内容）。

您可以创建一个在面板加载后触发的事件处理程序。然后你可以从那里调用你的 checks() 函数。

```
<StackPanel Loaded="myStackPanelLoaded" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T05:23:31.953

同样的事情发生在我身上。

在 WPF 中，当`Exception`表单的构造函数中发生此消息时，将引发此消息。所以尝试`Checking()`在. 通过这种方式，您将看到您的程序中有哪些类型。`FormLoad``MainForm``Exception`

# jquery - Jquery - 如果只有第一个实例，则切换类

> ID：14575726
> 
> 赞同：1
> 
> 时间：2013-01-29T04:35:44.367
> 
> 标签：jquery, jquery-selectors, toggleclass

这是我的小提琴：http: [//jsfiddle.net/SBAE8/](http://jsfiddle.net/SBAE8/)

这是我的问题。我有一系列 3 个项目，最上面的项目前面是一个标题，其可见性已由脚本切换。如果用户删除第 1 项，则出现第 2 项的标题，然后如果删除第 2 项，则出现第 3 项的标题。问题是 - 如果他们首先删除第 2 项，则会出现第 3 项的标题，并且我只希望随时为每组设置一个标题，并且无论哪个项目在顶部，它都应该始终是第一个项目的标题。我尝试了几种方法来检查已删除项目是否具有更高的兄弟姐妹，但我似乎无法弄清楚这一点。

jQuery（另见上面链接的小提琴）：

```
 $(".doDelete").click(function () {
        var $el = $(this).closest("div.payload-container");
        var id = $(this).attr("id");
        // Alert callback (removed from this example)
            // Success
                $el.next("div.payload-container").find(".headline").toggleClass("hide");
                $el.slideUp(200, function () {
                    $el.remove();
                });
    }); 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:42:53.000

您不会首先检查是否有任何其他标题可见（或将可见）。

我签入回调：

```
if (!$(".headline:visible").length) {
    $el.next("div.payload-container").find(".headline").toggleClass("hide");
}
$el.remove(); 
```

直到完成*后*才会显示下一个标题`slideUp`。如果这不好，那么您必须检查它是否可见`$el`。`.headline`

[http://jsfiddle.net/SBAE8/1/](http://jsfiddle.net/SBAE8/1/)

**更新**：最终工作版本[http://jsfiddle.net/uE5Ap/2/](http://jsfiddle.net/uE5Ap/2/)

# android - SDcard中的SQLite数据库无法打开

> ID：14575729
> 
> 赞同：1
> 
> 时间：2013-01-29T04:35:50.823
> 
> 标签：android, sqlite

为什么我的数据库给出错误。请帮助我：-我正在创建我的数据库`sdcard`。

我在哪里做错了。

```
public class SDcardDatabase extends SQLiteOpenHelper
{

    public static final String  DATABASE_FILE_PATH = "/sdcard";
    public static final String  DATABASE_NAME = "testDatabase";
    public final static String NAME ="name";
    public final static String ADDRESS ="address";
    public final static String CITY ="city";

    public SDcardDatabase(final Context context) {
        super(context,Environment.getExternalStorageDirectory()+File.separator+DATABASE_FILE_PATH + File.separator + DATABASE_NAME, null, 1);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        try
        {  
            db.execSQL( "CREATE TABLE mylistdata(_id INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT, address TEXT,city TEXT);");

        }

        catch (SQLiteException ex)
        {
            Log.e("Hello", "error -- " + ex.getMessage(), ex);
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP Table mylistdata");
        onCreate(db);
    }
} 
```

并在活动中调用它。

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mydb = new SDcardDatabase(this);
        sqldb = mydb.getWritableDatabase();
        sqldb.close();
    } 
```

错误日志：-

```
01-29 10:03:46.534: W/dalvikvm(8185): threadid=1: thread exiting with uncaught exception (group=0x40014760)
01-29 10:03:46.548: E/AndroidRuntime(8185): FATAL EXCEPTION: main
01-29 10:03:46.548: E/AndroidRuntime(8185): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.sdcard/com.example.sdcard.SDcardDBActivity}: android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1736)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1752)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.os.Looper.loop(Looper.java:126)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.app.ActivityThread.main(ActivityThread.java:3997)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at java.lang.reflect.Method.invoke(Method.java:491)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at dalvik.system.NativeStart.main(Native Method)
01-29 10:03:46.548: E/AndroidRuntime(8185): Caused by: android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:978)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:951)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1016)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:726)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:149)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at com.example.sdcard.SDcardDBActivity.onCreate(SDcardDBActivity.java:20)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
01-29 10:03:46.548: E/AndroidRuntime(8185):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1700) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:37:58.040

尝试添加：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# underscore.js - 无法在 html 属性中打印带有下划线的模型值（在 _.each 中）

> ID：14575732
> 
> 赞同：0
> 
> 时间：2013-01-29T04:36:12.543
> 
> 标签：underscore.js

我观察到下划线尝试访问 HTML 属性中的数据的问题：

对于具有 an`id`和 a`name`属性的模型

```
<% _.each(collection, function(model){ %>
  <div data-id="<% model.id %>" class="item active"><%= model.name %></div>
<% }); %> 
```

在这里，我得到`<div data-id="" class="item active c">Test</div>`，如果我这样做：

```
<% _.each(collection, function(model){ %>
  <div data-id="<% model.id %>" class="item active"><%= model.name %></div>
<% }); %> 
```

我明白了`<div data-id="" class="item active c">0</div>`

所以我无法打印到“data-id”属性中，这似乎是因为我在一个`each`，因为我可以在我的代码的另一部分执行此操作。

你知道避免这种情况的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:37:53.443

你只差一个`=`标志！

```
<% _.each(collection, function(model){ %>
  <div data-id="<%= model.id %>" class="item active"><%= model.name %></div>
<% }); %> 
```

# tfsbuild - 使用 TFS 构建触发时抑制 Powershell 中的 sqlpackage.exe 警告/错误

> ID：14575734
> 
> 赞同：5
> 
> 时间：2013-01-29T04:36:33.220
> 
> 标签：tfsbuild, powershell-3.0, sql-server-data-tools

我有一个自动部署脚本，可以使用 dacpac 和 sqlpackage.exe、SSRS 报告和网站来部署数据库更改。

当我在命令行执行脚本时，sqlpackage 输出以下消息：

> 对象 [objectname] 已经存在于具有不同定义的数据库中，不会被更改。

控制台上的输出为黄色，表示这是一个警告，部署继续并按预期完成。

但是，当我通过 TFS 构建触发相同的脚本时，构建资源管理器中会记录相同的消息，但旁边会显示错误图标。部署仍在继续，运行自动化测试等，但构建状态更改为带有勾号和叉号的图标 - 表示构建成功完成，但其他任务失败。

有一个参数可以提供给sqlpackage，UnmodifiableObjectWarnings，它应该可以抑制这种警告，但是msdn上有一个帖子表明这个参数有一个错误，它不起作用。

我想知道在 Powershell 中我还能如何捕获和抑制这种警告，因为我不希望我的构建/部署仅仅因为这个警告而失败。但是我不能抑制调用 sqlpackage 的所有错误输出，因为可能存在其他完全有效的错误。

**更新**

我已尝试遵循此处的建议： [https](https://serverfault.com/questions/340711/redirect-stderr-to-variable-in-powershell) ://serverfault.com/questions/340711/redirect-stderr-to-variable-in-powershell 并尝试使用类似于以下代码：

```
 try {
        $test = & "C:\Program Files (x86)\Microsoft SQL Server\110\DAC\bin\SqlPackage.exe" /SourceFile:"$dacpac" /Profile:"$dbProfile" /p:UnmodifiableObjectWarnings=True /Action:Publish 2>&1

        $errMsg = $test | ?{$_.gettype().Name -eq "ErrorRecord"}
        $normMsg = $test | ?{$_.gettype().Name -ne "ErrorRecord"}
    }
    catch {
         Write-Host "Caught Exception $_"
    } 
```

但是，一旦 exe 返回警告消息，我的调用函数就会引发异常并处理 - 并且不会发生部署。

但是，如果我这样称呼它：

```
try {
    & "C:\Program Files (x86)\Microsoft SQL Server\110\DAC\bin\SqlPackage.exe" /SourceFile:"$dacpac" /Profile:"$dbProfile" /p:UnmodifiableObjectWarnings=True /Action:Publish 2>&1
}
catch {
     Write-Host "Caught Exception $_"
} 
```

即没有变量$test 捕获输出，部署成功完成，但catch 仍然捕获相同的异常。为什么捕获变量中的输出会导致立即抛出异常，但是不捕获它仍然会导致它被捕获，但是在成功完成之后？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-15T12:31:56.397

我建议使用最新版本的 SqlPackage。查看您的路径，它看起来像旧版本。很久以前有一个错误，警告被写入标准错误而不是标准输出。如果您升级问题应该消失，如果您不可以使用 powershell 启动一个新的 .net 进程，那么您就可以重定向错误输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T14:04:55.360

首先需要捕获exe（SQLPackage）的退出代码，而不是输出；[示例 1](https://stackoverflow.com/questions/8634742/powershell-how-do-i-get-the-exit-code-returned-from-a-process-run-inside-a-psjo)和[示例 2](https://stackoverflow.com/questions/4124409/run-msiexec-from-powershell-and-get-return-code)可能会有所帮助

然后你需要捕获标准错误和输出，这里是[例子](https://stackoverflow.com/questions/8925323/redirection-of-standard-and-error-output-appending-to-the-same-log-file)

现在您只需要记录输出（如果需要）并检查退出代码是否非零然后引发异常

# magento - magento-nofrills 阻止添加不起作用

> ID：14575742
> 
> 赞同：0
> 
> 时间：2013-01-29T04:37:29.320
> 
> 标签：magento

我真的很喜欢 Alan Storm 的书，但是我尝试了 16 个小时还是没有进步！

我有一种可行的付款方式，但我想在 One Step Checkout 中添加一个块来显示可用的付款方式。

第一步是进行基本测试....

如果我定位内容，我的测试文本会按预期显示：

```
<checkout_onepage_index>
        <reference name="content">
            <block type="core/text_list" name="rrtest_list"/>
        </reference>
        <reference name="rrtest_list">
            <block type="core/text" name="rrtest1">
                <action method="setText">
                    <text>ABCDEFGHIJ KLMNOPQRSTUVWXYZ *************</text>
                </action>
            </block>
        </reference>
</checkout_onepage_index> 
```

但是，如果我以我真正想要的块为目标，它就不起作用：

```
<checkout_onepage_index>
        <reference name="checkout.onepage.payment">
            <block type="core/text_list" name="rrtest_list"/>
        </reference>
        <reference name="rrtest_list">
            <block type="core/text" name="rrtest1">
                <action method="setText">
                    <text>ABCDEFGHIJ KLMNOPQRSTUVWXYZ *************</text>
                </action>
            </block>
        </reference>
</checkout_onepage_index> 
```

什么都没有出现。为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:21:06.377

Content block is a container (that means that every block that you add to it will be automatically rendered) and that's why it worked for you.

On the other hand checkout.onepage.payment block is derived (over an abstract class that doesn't change anything) from Mage_Core_Block_Template and blocks derived from this class don't automatically render your content.

You will have to change payment block's phtml file so that it will include your block

```
<?php echo $this->getChildHtml( 'rrtest_list_alias' ); // this outputs the html directly ?> 
```

or

```
<?php echo $this->getChild( 'rrtest_list_alias' )->myFunctions()->toHtml(); // this allows you to call some functions on your block and then outputs the html ?> 
```

and change your layout xml file to (note the as part):

```
<block type="core/text_list" name="rrtest_list" as="rrtest_list_alias"/> 
```

# c# - 导入 Visual Studio 2012 时出现 NHibernate.MappingException

> ID：14575743
> 
> 赞同：1
> 
> 时间：2013-01-29T04:37:35.707
> 
> 标签：c#, nhibernate

我有一个实现 NHibernate 的项目，该项目在我的带有 Visual Studio 2010 的机器上运行良好。当我将该项目导入 Visual Studio 2012 时，我遇到了 **NHibernate.MappingException**。

.hbm.xml 设置为嵌入式资源，并且复制到输出目录设置为所有 .hbm.xml 文件的始终复制。

**该项目在 VS 2010 下运行，所以我不确定它如何可能是映射问题。**

* * *

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
  <session-factory>
    <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
    <property name="dialect">NHibernate.Dialect.MsSqlCeDialect</property>
    <property name="connection.driver_class">NHibernate.Driver.SqlServerCeDriver</property>
    <property name="connection.connection_string">Data Source=FirstSample.sdf</property>
    <property name="show_sql">true</property>
  </session-factory>
</hibernate-configuration> 
```

* * *

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="HibernateExample" namespace="HibernateExample.Domain" >
  <class name="Grains" table="Products">
    <id name="Id" type="integer">
      <generator class="identity"/>
    </id>
    <property name="Name" type="string"/>
    <property name="Category" type="string"/>
    <property name="Discontinued" />
  </class>
</hibernate-mapping> 
```

* * *

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="HibernateExample" namespace="HibernateExample.Domain" >
  <class name="Dairy" table="Products">
    <id name="Id" type="integer">
      <generator class="identity"/>
    </id>
    <property name="Name" type="string"/>
    <property name="Category" type="string"/>
    <property name="Discontinued" />
  </class>
</hibernate-mapping> 
```

## 应用程序配置

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="hibernate-configuration" type="NHibernate.Cfg.ConfigurationSectionHandler, NHibernate" />
  </configSections>
  <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2" >
    <session-factory>
      <property name="connection.driver_class"> NHibernate.Driver.SqlServerCeDriver</property>
        <property name="dialect">NHibernate.Dialect.MsSqlCeDialect</property>
      <property name="connection.connection_string">Data Source=FirstSample.sdf;</property>
      <property name="show_sql">true</property>
    </session-factory>
  </hibernate-configuration>

  <connectionStrings>
        <add name="testconnectionstring"
            connectionString="Data Source=|DataDirectory|\FirstSample.sdf;Integrated Security=True"
            providerName="Microsoft.SqlServerCe.Client.3.5" />
    </connectionStrings>

  <runtime>
    <assemblyBinding xmlns="urnchemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Data.SqlServerCe" publicKeyToken="89845DCD8080CC91" culture="neutral"/>
        <bindingRedirect oldVersion="0.0.0.0-9.0.242.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
    </assemblyBinding>

  </runtime>
</configuration> 
```

* * *

```
A first chance exception of type 'System.TypeLoadException' occurred in mscorlib.dll

A first chance exception of type 'System.TypeLoadException' occurred in NHibernate.dll

A first chance exception of type 'NHibernate.MappingException' occurred in NHibernate.dll

A first chance exception of type 'NHibernate.MappingException' occurred in NHibernate.dll

A first chance exception of type 'NHibernate.MappingException' occurred in NHibernate.dll

A first chance exception of type 'NHibernate.MappingException' occurred in NHibernate.dll

Error: NHibernate.MappingException: Could not compile the mapping document: HibernateExample.Domain.Dairy.hbm.xml ---> NHibernate.MappingException: persistent class HibernateExample.Domain.Dairy, HibernateExample not found ---> System.TypeLoadException: Could not load type 'HibernateExample.Domain.Dairy' from assembly 'HibernateExample, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.

at System.Reflection.RuntimeAssembly.GetType(RuntimeAssembly assembly, String name, Boolean throwOnError, Boolean ignoreCase, ObjectHandleOnStack type)

at System.Reflection.RuntimeAssembly.GetType(String name, Boolean throwOnError, Boolean ignoreCase)

at NHibernate.Util.ReflectHelper.TypeFromAssembly(AssemblyQualifiedTypeName name, Boolean throwOnError) in p:\nhibernate-core\src\NHibernate\Util\ReflectHelper.cs:line 308

at NHibernate.Util.ReflectHelper.ClassForName(String name) in p:\nhibernate-core\src\NHibernate\Util\ReflectHelper.cs:line 181

at NHibernate.Cfg.XmlHbmBinding.Binder.ClassForFullNameChecked(String fullName, String errorMessage) in p:\nhibernate-core\src\NHibernate\Cfg\XmlHbmBinding\Binder.cs:line 99

--- End of inner exception stack trace ---

at NHibernate.Cfg.XmlHbmBinding.Binder.ClassForFullNameChecked(String fullName, String errorMessage) in p:\nhibernate-core\src\NHibernate\Cfg\XmlHbmBinding\Binder.cs:line 105

at NHibernate.Cfg.XmlHbmBinding.Binder.ClassForNameChecked(String name, Mappings mappings, String errorMessage) in p:\nhibernate-core\src\NHibernate\Cfg\XmlHbmBinding\Binder.cs:line 117

at NHibernate.Cfg.XmlHbmBinding.ClassBinder.BindClass(IEntityMapping classMapping, PersistentClass model, IDictionary`2 inheritedMetas) in p:\nhibernate-core\src\NHibernate\Cfg\XmlHbmBinding\ClassBinder.cs:line 32

at NHibernate.Cfg.XmlHbmBinding.RootClassBinder.Bind(HbmClass classSchema, IDictionary`2 inheritedMetas) in p:\nhibernate-core\src\NHibernate\Cfg\XmlHbmBinding\RootClassBinder.cs:line 21

at NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.AddRootClasses(HbmClass rootClass, IDictionary`2 inheritedMetas) in p:\nhibernate-core\src\NHibernate\Cfg\XmlHbmBinding\MappingRootBinder.cs:line 84

at NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.AddEntitiesMappings(HbmMapping mappingSchema, IDictionary`2 inheritedMetas) in p:\nhibernate-core\src\NHibernate\Cfg\XmlHbmBinding\MappingRootBinder.cs:line 42

at NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.Bind(HbmMapping mappingSchema) in p:\nhibernate-core\src\NHibernate\Cfg\XmlHbmBinding\MappingRootBinder.cs:line 31

at NHibernate.Cfg.Configuration.AddDeserializedMapping(HbmMapping mappingDocument, String documentFileName) in p:\nhibernate-core\src\NHibernate\Cfg\Configuration.cs:line 523

--- End of inner exception stack trace ---

at NHibernate.Cfg.Configuration.LogAndThrow(Exception exception) in p:\nhibernate-core\src\NHibernate\Cfg\Configuration.cs:line 342

at NHibernate.Cfg.Configuration.AddDeserializedMapping(HbmMapping mappingDocument, String documentFileName) in p:\nhibernate-core\src\NHibernate\Cfg\Configuration.cs:line 530

at NHibernate.Cfg.Configuration.AddValidatedDocument(NamedXmlDocument doc) in p:\nhibernate-core\src\NHibernate\Cfg\Configuration.cs:line 500

at NHibernate.Cfg.Configuration.ProcessMappingsQueue() in p:\nhibernate-core\src\NHibernate\Cfg\Configuration.cs:line 1865

at NHibernate.Cfg.Configuration.AddDocumentThroughQueue(NamedXmlDocument document) in p:\nhibernate-core\src\NHibernate\Cfg\Configuration.cs:line 1857

at NHibernate.Cfg.Configuration.AddXmlReader(XmlReader hbmReader, String name) in p:\nhibernate-core\src\NHibernate\Cfg\Configuration.cs:line 1850

at NHibernate.Cfg.Configuration.AddInputStream(Stream xmlInputStream, String name) in p:\nhibernate-core\src\NHibernate\Cfg\Configuration.cs:line 652

at NHibernate.Cfg.Configuration.AddResource(String path, Assembly assembly) in p:\nhibernate-core\src\NHibernate\Cfg\Configuration.cs:line 690

at NHibernate.Cfg.Configuration.AddAssembly(Assembly assembly) in p:\nhibernate-core\src\NHibernate\Cfg\Configuration.cs:line 769

at HibernateExample.NHibernateTest.NHibernateHelper.OpenSession() in c:\Users\Fabian\Documents\Visual Studio 2010\Projects\NHibernate\HibernateExample\NHibernateTest\NHibernateHelper.cs:line 31

Error: Could not compile the mapping document: HibernateExample.Domain.Dairy.hbm.xml

A first chance exception of type 'System.NullReferenceException' occurred in HibernateExample.exe 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:10:55.280

包含所有需要信息的内部异常在这里：

> 错误：NHibernate.MappingException：无法编译映射文档：HibernateExample.Domain.Dairy.hbm.xml ---> NHibernate.MappingException：持久类 HibernateExample.Domain.Dairy，未找到 HibernateExample ---> System.TypeLoadException：可以不从程序集“HibernateExample，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”加载类型“HibernateExample.Domain.Dairy”。

在工厂配置期间，NHibernate 读取所有嵌入的资源，包括第三个（从您问题的顶部开始）：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" 
  assembly="HibernateExample" 
  namespace="HibernateExample.Domain" >
  <class name="Dairy" table="Products"> 
```

所以，这个问题很清楚。没有`HibernateExample.Domain.Dairy`可用的类（未部署、拼写错误或名称空间不正确）。*好消息或消息是您的映射已找到并已解析...*

尝试确保应用程序可以访问映射的类

# excel - 如何比较不同 Excel 文件中的 2 个列表并突出显示更改？

> ID：14575748
> 
> 赞同：1
> 
> 时间：2013-01-29T04:38:09.213
> 
> 标签：excel, vba

让 18jan.xlsx 包含以下数据：

```
ABC 10
XYZ 20
PQR 30
STU 40
DEF 50
HIJ 60
KLM 70 
```

19jan.xlsx 包含：

```
XYZ 20
ABC 15
STU 40
DEF 50
HIJ 65
PQR 30
KLM 70 
```

我需要比较它们并突出显示更改，例如此处应突出显示 ABC 前面的 15。而且我还需要每天更改日期来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:14:46.427

假设您的数据放在`A:B`从第 1 行开始的列中，以下代码应该可以完成这项工作：

```
Sub DailyDataHighlight()

Dim InputFolder As String
Dim OldExcel As String
Dim NewExcel As String

Dim i As Long
Dim OldString As String
Dim OldValue As String
Dim NewValue As String
Dim SearchResult As Range

InputFolder = "D:\DOCUMENTS\"
OldExcel = "18jan.xlsx"
NewExcel = "19jan.xlsx"

Application.ScreenUpdating = False

Application.Workbooks.Open (InputFolder & OldExcel)
Application.Workbooks.Open (InputFolder & NewExcel)

For i = 1 To Workbooks(OldExcel).ActiveSheet.Range("A1").CurrentRegion.Rows.Count

    OldString = Workbooks(OldExcel).ActiveSheet.Cells(i, 1).Text
    OldValue = Workbooks(OldExcel).ActiveSheet.Cells(i, 2).Text
    Set SearchResult = Workbooks(NewExcel).ActiveSheet.Range("A1").CurrentRegion
    Set SearchResult = SearchResult.Find(OldString, LookIn:=xlValues, LookAt:=xlWhole, MatchCase:=True)
    If Not SearchResult Is Nothing Then
        NewValue = SearchResult.Offset(0, 1).Text
        If NewValue <> OldValue Then SearchResult.Offset(0, 1).Interior.Color = RGB(0, 255, 0)
    End If

Next i

Workbooks(NewExcel).Save
Application.ScreenUpdating = True

End Sub 
```

假设和细节：

1.  数据范围实际上是无限的。
2.  两个文件都放在同一个文件夹中。名称和路径应在代码中定义。
3.  “突出显示”是使用单元格填充完成的，`.Interior.Color = RGB(0, 255, 0)`根据需要进行更改。
4.  仅检查第一次也是唯一一次出现的键字符串是否更改（基于输入）。

示例文件也被共享：[https ://www.dropbox.com/s/vqkulovmg98yaih/DailyDataHighlight.xlsm](https://www.dropbox.com/s/vqkulovmg98yaih/DailyDataHighlight.xlsm)

希望这对学习VBA也有帮助）

# c# - sharepoint 2010 弹出窗口

> ID：14575750
> 
> 赞同：0
> 
> 时间：2013-01-29T04:38:26.610
> 
> 标签：c#, javascript, sharepoint-2010, popup

从后面的代码调用js有些麻烦。这是我的js代码

```
 function showDialog() {
            var options = {
                url: 'DialogWindow.aspx',
                width: 600,
                height: 200,
                title: 'Test',
                showClose: true,
                dialogReturnValueCallback: dialogReturned
            };
            SP.UI.ModalDialog.showModalDialog(options);
        }
        function dialogReturned(dialogResult, returnValue) {
            if (dialogResult == SP.UI.DialogResult.OK) alert("OK");
            else alert("CANCEL");
        } 
```

这是我调用js函数的c#代码

```
if (!WriteDataToSm())
            {
               //Error Handling
                string script = "<script language='javascript'>showDialog()</script>";
                Page.ClientScript.RegisterClientScriptBlock(GetType(), "Register", script);
            } 
```

但我收到一个 js 错误：

```
Uncaught TypeError: Cannot read property 'hiddenButtonValueBeforeDialog' of undefined 
```

但是当我创建一个按钮并在 onclick 事件中调用 js 函数 showDialog() 时。一切正常。请告知这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:15:09.180

我正在使用这行代码从后面的代码中执行 javascript：

```
page.ClientScript.RegisterStartupScript(page.GetType(), "idicosNotify", "$(function () { ExecuteOrDelayUntilScriptLoaded(function () { SP.UI.Notify.addNotification(\"" + message + "\", false); }, \"sp.js\"); });", true); 
```

当您可以使用按钮调用您的 javascript 函数时，它没有任何问题。

# php - PHP sqlsrv_query 执行语法错误

> ID：14575760
> 
> 赞同：1
> 
> 时间：2013-01-29T04:39:24.660
> 
> 标签：php, sql-server, sql-server-2008

我正在尝试通过 PHP 执行 SQL 查询，其中我的数据库配置存储在一个单独的文件中。

以下是 PHP 文件：

文件：db_config.php

```
<?php
define('DB_DATABASE', "androidhive"); // database name
define('DB_SERVER', "MAVERICK"); // db server
?> 
```

文件：db_connect.php

```
<?php

/** A class file to connect to database */

class DB_CONNECT
{
    // constructor
        function __construct() 
    {
            // connecting to database
            $this->connect();
        }

        // destructor
        function __destruct() 
    {
            // closing db connection
            $this->close();
        }

    /** Function to connect with database */
    function connect()
    {
            // import database connection variables
            require_once __DIR__ . '/db_config.php';

           // Connecting to SQL Server database
            $serverName = DB_SERVER; 
        $connectionInfo = array("Database"=>DB_DATABASE);       
        $conn = sqlsrv_connect($serverName, $connectionInfo) or die(sqlsrv_errors());  
        return $conn;
    }

    /** Function to close the database connection */
    function close()
    {
        sqlsrv_close();
    }
}
?> 
```

文件：get_all_products.php

```
<?php 
/*
 * Following code will list all the products
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// get all products from products table
$result = sqlsrv_query($db,"SELECT * FROM products");

if( $result ) {
     echo "Query executed.<br />";
}else{
     echo "Query could not executed.<br />";
     die( print_r( sqlsrv_errors(), true));
}

?> 
```

不幸的是，它正在回归。数据库连接成功。我正在努力寻找为什么 sqlsrv_query 不起作用。

```
Query could not executed.
Array ( [0] => Array ( [0] => IMSSP [SQLSTATE] => IMSSP [1] => -14 [code] => -14 [2] => An invalid parameter was passed to sqlsrv_query. [message] => An invalid parameter was passed to sqlsrv_query. ) ) 
```

对此的任何帮助都会非常有帮助。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:40:45.097

将 db 连接对象分配给类成员。

```
function __construct() 
{
    // connecting to database
    $this->db_conn = $this->connect();
} 
```

然后将其用作：

```
$result = sqlsrv_query($db->db_conn,"SELECT * FROM products"); 
```

# javascript - 在 aspx 页面开始加载之前显示模式弹出消息

> ID：14575761
> 
> 赞同：1
> 
> 时间：2013-01-29T04:39:25.793
> 
> 标签：javascript, asp.net, popup, modal-dialog

我有一个计算员工电话的 .aspx 页面。
数据是从 Active Directory 中读取的，需要 5 分钟才能显示列表。
我需要为用户显示一个模态弹出消息以提醒等待时间。
我遵循了互联网搜索中的各种示例，其中一些使用例如

```
 $(document).ready(function() {alert ("it will take 5 minutes")}); 
```

或者

```
windows.onload 
```

但没有一个有效，因为它们在页面开始加载之前没有及时显示。
我发现的所有消息示例在我的案例中根本不显示，或者在 5 分钟后显示，与 PDF 列表同时显示。

请指教！谢谢你，奥克塔维亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:47:16.230

尝试以下

```
$(document).ready(function() 
showPopup(); // show pop up when page loads
});

$(window).load(function () {
  hidePopup() // hide popup when page loads completely
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:52:23.123

您可以刷新页面的标题部分，然后进行计算。也只需将警报放在任何脚本标记上，而不是在页面准备就绪时加载它。这是一个想法：

```
<script>
   alert ("it will take 5 minutes");
</script>
<%
 // force to send what have, and that way is run the alert.
 Response.Flush(); 
 // now make the long running call
 Calculations();
 %>
...rest of html code that show the results... 
```

# javascript - 在 IE 中将表格内容导出到 Excel 失败

> ID：14575763
> 
> 赞同：0
> 
> 时间：2013-01-29T04:39:33.507
> 
> 标签：javascript, html

首先，我必须使用 PHP 和 MySQL 从数据库中获取数据。
然后，我在表格中显示内容。
最后，我使用 Javascript 将表格内容导出到 Excel。

它在除 IE 之外的所有浏览器中都可以正常工作。

我在 IE 中收到的错误是：`Object doesn't support this property or method`

```
<script Language="javascript"> var tableToExcel = (function() { var uri = 'data:application/vnd.ms-excel;base64,' , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet‌​}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:Excel‌​Worksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><t‌​able>{table}</table></body></html>

, base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) } , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) } return function(table, name) { if (!table.nodeType) table = document.getElementById(table) var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML} window.location.href = uri + base64(format(template, ctx)) } })() </script> 
```

# image - 用于标题图像的 Twitter 调整大小工具

> ID：14575768
> 
> 赞同：1
> 
> 时间：2013-01-29T04:40:09.867
> 
> 标签：image, twitter, resize, crop

我正在尝试构建与 twitter 相同的工具（图像无法附加..reput = 7），以让用户重新调整标题图像的大小/移动他们的标题图像，以便他们可以保存他们想要的图像部分。

> > 目标图像大小是固定的。

你知道这是否是一个众所周知的插件吗？

我很难自己构建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:03:48.710

我想其中之一会满足您的需求：[http ://www.pixelzdesign.com/blog_view.php](http://www.pixelzdesign.com/blog_view.php)

# ruby-on-rails - Ruby - 将文本文件转换为数组

> ID：14575770
> 
> 赞同：9
> 
> 时间：2013-01-29T04:40:31.283
> 
> 标签：ruby-on-rails, ruby

我对 Ruby on Rails 非常陌生，并且正在使用它来扩充一些 C++ 代码。我的 C++ 代码当前将数据从多维数组输出到文本文件，如下所示：

```
2 2 2 2 2 3 1 1 1 1 5 2 2 2 2 2 
2 2 2 3 1 1 1 1 1 1 1 1 5 2 2 2 
2 2 1 1 1 1 1 1 1 1 1 1 1 1 2 2 
2 3 1 1 1 1 1 1 1 1 1 1 1 1 5 2 
2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 
3 1 1 1 1 1 1 1 1 1 1 1 1 1 1 5 
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
6 1 1 1 1 1 1 1 1 1 1 1 1 1 1 4 
2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 2 
2 6 1 1 1 1 1 1 1 1 1 1 1 1 4 2 
2 2 1 1 1 1 1 1 1 1 1 1 1 1 2 2 
2 2 2 6 1 1 1 1 1 1 1 1 4 2 2 2 
2 2 2 2 2 6 1 1 1 1 4 2 2 2 2 2 
```

我正在寻求帮助，将此文本输出转换为具有动态高度/宽度的 Ruby 输入的二维数组。到目前为止，我一直在将它们手动输入到我的 Ruby 代码中，但很快就会进行更多测试，到目前为止，我还没有找到将其转换为二维 Ruby 数组的方法。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T04:45:51.343

```
File.foreach('file.txt').map { |line| line.split(' ') } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-29T04:45:55.183

```
File.readlines('foo.txt').map &:split 
```

# arrays - 如何在自动热键中使用数组？

> ID：14575772
> 
> 赞同：1
> 
> 时间：2013-01-29T04:41:00.370
> 
> 标签：arrays, autohotkey

我是 AutoHotKey 的新手，不熟悉它的语法。我在网上搜索过，但找不到有用的例子。

看看下面的图表。

```
+---+---+---+---+-------------------
| a | b | c | d |                         (1)
+---+---+---+---+-------------------
              ^
              |

+---+---+---+---+-------------------
| a | b | c | d |                         (2)
+---+---+---+---+-------------------
          ^
          |

+---+---+---+---+-------------------
| a | b | c | d |                         (3)
+---+---+---+---+-------------------
  ^
  |

+---+---+---+---+-------------------
| a | b | c | d |                         (4)
+---+---+---+---+-------------------
              ^
              | 
```

我想记录一些字符串并在其中导航。例如，在程序启动时创建了一个数组 my_array。如果用户按下 ctrl+c，那么选定的文本（假设它是字符串 a）被复制到剪贴板，并且它也被附加到 my_array。如果用户按下另一个 ctrl+c，则 b 被复制到剪贴板，并且它也被附加到 my_array。参见 (1)，现在 a、b、c、d 已附加到 my_array 并且 d 在剪贴板中。现在，如果用户按下 alt+left_arrow，则 c 被复制到剪贴板，参见 (2)。现在，如果用户按 alt+left_arrow 2 次，a 在剪贴板中，参见 (3)。用户可以按 alt+right_arrow 3 次返回剪贴板中的 d，参见 (4)。此时，用户仍然可以按 ctrl+c 将数据附加到 my_array 并按 alt+left_arrow 或 alt+right_arrow 在数组中移动以获取数据。

实际上对我来说这很容易用其他一些熟悉的语言实现，但我很难在 AutoHotKey 中实现它。任何人都可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:40:24.113

这是将复制的 Excel 数据放入数组的示例。

```
MyClipBoard=%ClipBoard% ; Remove any non-text (format) data

Loop, parse, MyClipBoard, `n,`r ; Place Excel content from clipboard in 2 dimentional Array
{ ; Start-Loop Read through each Line (record) in the ClipBoard data from Excel
  FullRecord:=A_LoopField ; Put a whole row in the variable FullRecord
  RecordNumber:=A_Index ; Store the current record (row) number.
  Loop, parse, FullRecord, %A_Tab% ; Parse the row content (FullRecord) in separate fields
  { ; Start-Loop Read through each Field in the ClipBoard data from Excel
    FieldNumber:=A_Index ; Store the current Field number.
    Array%RecordNumber%_%FieldNumber% := A_LoopField ; Array1_1 is Excel Row 1 column A, Array1_2 = Excel Row 1 column B
  } ; End-Loop Read through each Field in the ClipBoard data from Excel
} ; End-Loop Read through each Line (record) in the ClipBoard data from Excel 
```

如果您需要更多示例来帮助您前进，请告诉我。
好的，这里有更多示例，您可以通过查看其他答案中的示例来清理它，例如使用 Variable++ 而不是 Variable +=1

```
; Read data from text file into one dimentional Array
ArrayCount = 0
Loop, Read, %A_ScriptDir%\SearchTerms.txt ; This loop retrieves each line from the file, one at a time.
{
    ArrayCount += 1  ; Keep track of how many items are in the array.
    Array%ArrayCount% := A_LoopReadLine ; Store this line in the next array element.
}

TextCounter = 1
IniWrite, %TextCounter%, C:\Temp\SearchTerms.ini, Counter, Nr ; Write counter in ini so I can restart at latest counter

SearchText:= Array1 ; Put data from Array1 into variable SearchText
MouseClick, left
Send, %SearchText%{Enter}
SplashTextOn, 200, 20,Searchterm,F%TextCounter% %SearchText%
WinMove, Searchterm, , , 0
Return

Browser_Favorites::
IniRead, TextCounter, C:\Temp\SearchTerms.ini, Counter, Nr ; Read latest counter
TextCounter += 1
IniWrite, %TextCounter%, C:\Temp\SearchTerms.ini, Counter, Nr
SearchText:=Array%TextCounter% ; Put data from Array+number into variable SearchText

; Examples with Array of 2 deep.

MyClipBoard=%ClipBoard% ; Remove any non-text (format) data

Loop, parse, MyClipBoard, `n,`r ; Place Excel content from clipboard in 2 dimentional Array
{ ; Start-Loop Read through each Line (record) in the ClipBoard data from Excel
  FullRecord:=A_LoopField ; Put a whole row in the variable FullRecord
  RecordNumber:=A_Index ; Store the current record (row) number.
  Loop, parse, FullRecord, %A_Tab% ; Parse the row content (FullRecord) in separate fields
  { ; Start-Loop Read through each Field in the ClipBoard data from Excel
    FieldNumber:=A_Index ; Store the current Field number.
    Array%RecordNumber%_%FieldNumber% := A_LoopField ; Array1_1 is Excel Row 1 column A, Array1_2 = Excel Row 1 column B
  } ; End-Loop Read through each Field in the ClipBoard data from Excel
} ; End-Loop Read through each Line (record) in the ClipBoard data from Excel

DLCounter:=1
DLSub:=1
DLData:=Array%DLCounter%_1
While (DLData <> "")
{
    While (DLData <> "")
    {
        MsgBox, %DLData%
        DLSub += 1
        DLData:=Array%DLCounter%_%DLSub%
    }
    DLSub:=1
    DLCounter += 1
    DLData:=Array%DLCounter%_%DLSub%
}
Return 
```

它可能不是最干净的代码，但它会让你知道你能做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:20:34.233

Autohotkey 没有数组，但您可以像这样模拟一个：

```
global counterArray := 1
localCounter := counterArray
YourArray%localCounter %:= your_value 
```

当您向数组添加新元素时；

```
counterArray++
anotherLocalCounter := counterArray
YourArray%localCounter%:= your_value 
```

您也可以将此代码放入一个函数中，它会自增

```
ArrayExpand()
{
counterArray++
counter :=  counterArray
YourArray%counter %:=
} 
```

重要提示：YourArray 不能是全局的，YourArray%counter% 中的计数器不能是全局的，其余的无关紧要。

# iphone - 自定义启动器图标

> ID：14575778
> 
> 赞同：1
> 
> 时间：2013-01-29T04:41:54.913
> 
> 标签：iphone, objective-c, lockscreen

我只是想使用自定义启动器图标而不是锁定屏幕下方的相机自定义锁定屏幕-

![锁屏](../Images/3634f4162b372cf5b46aa75939f09907.png)

我在谷歌上搜索这个。我得到了一个[回复](https://stackoverflow.com/q/2388111/940096)，我们可以定制它。但是，**Apple 不会批准**这一点。

但是，我的要求只是我们可以从上面的图片中放置我们的应用程序图标而不是相机，以直接启动我们的应用程序`Lock Screen`

任何想法/帮助非常感谢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T04:47:33.037

在非越狱设备上完全不可能。如果您想要用于此类定制的 API，您应该使用[Bug Reporter](http://bugreporter.apple.com)站点提交功能请求。

# html - 从 JSP 中的链接获取价值

> ID：14575781
> 
> 赞同：2
> 
> 时间：2013-01-29T04:42:25.307
> 
> 标签：html, jsp, anchor, forms, http-request-parameters

我在 jsp 页面中有锚链接，如下`<td>`表中所示。

```
<td>
    <span>
        <a href="AddDescriptionForEvent.jsp?" name="count"><%=(cnt)%></a>
    <span>
</td> 
```

这里`cnt`里面的 scriplet 是一个整数。标签位于`<form>`和`action`属性中，`<form>`指向正确的下一页。
我必须在下一页中取该整数的值。

我正在使用如下所示，

```
int day = nullIntconv(request.getParameter("count")); 
```

这里`nullIntconv`将转换`string`为`integer`.

但我没有得到我选择的价值。它总是给我0。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:22:45.243

您需要对 href 进行一些更改， href 不会作为表单元素提交（例如，文本框、文本区域等）

尝试像这样使用..

```
<td><span> <a href="AddDescriptionForEvent.jsp?count=<%=(cnt)%>">Click to get count</a><span></td> 
```

在上述计数将作为查询字符串发送
在下一页从请求中读取计数...

```
String c= request.getParameter("count");
if(c!=null)
{
int count=Integer.parseInt(c);//converting back into integer
} 
```

------您的自定义代码在这里---------

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:43:27.247

`<a>`不能像你认为的那样使用。它不是依赖于`<form>`提交的 HTML 元素之一，例如,`<input>`等。`<textarea>``<select>`

`<a>` [您可以在此处](http://www.w3schools.com/tags/tag_a.asp)阅读更多关于使用以及如何在 URL 中传递请求参数的[信息](http://en.wikipedia.org/wiki/Query_string)。还有一些关于[HTML 表单及其元素的内容](http://www.w3schools.com/html/html_forms.asp)。

所以如果你的代码是这样的：

```
<form action="/AddDescriptionForEvent.jsp" name="myForm">
    <td>
        <input type="text" name="someText" value="some Value" />
    </td>
    <td>
        <span>
            <a href="AddDescriptionForEvent.jsp?" name="count"><%=(cnt)%></a>
        <span>
    </td>

    <input type="submit" value="Press me to Submit" />
</form> 
```

然后单击`submit`按钮，您只会发送输入的值`someText`而不是`count`.
要将 的值`count`与其他值一起发送，请采用以下形式：

```
<form action="/AddDescriptionForEvent.jsp" name="myForm">
    <td>
        <input type="text" name="someText" value="some Value" />
    </td>
    <td>
        <span>
            <!-- changed the <a> tag to <input> -->
            <input type="text" name="count" value="<%=(cnt)%>" />
        <span>
    </td>

    <input type="submit" value="Press me to Submit" />
</form> 
```

或者您可以只使用以下内容而不使用`<form>`：

```
<td>
    <span>
        <a href="AddDescriptionForEvent.jsp?count=<%=cnt%>">Click this link to Add</a>
    <span>
</td>
<!-- Notice the placement of the "cnt" variable of JSP --> 
```

要在单击此`<a>`链接时也传递其他参数，请将其修改`href`为`href="AddDescriptionForEvent.jsp?count=<%=cnt%>&someText=some value"`

这是您可以实现所需结果的两种方法。您获取请求参数的 java 代码很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:31:22.787

<%=(cnt)%>

参与

采用

" name="count"><%=(cnt)%>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T15:39:48.993

```
 thanks for all your replies.

     I did like this in the main page, added id
     <td align="center" height="35" id="day_<%=(cnt)%>">
     <span><a href="AddDescriptionForEvent.jsp?id=<%=(cnt)%>"><%=(cnt)%></a></span></td>

     And in the next page i got the required output as

     int d=nullIntconv(request.getParameter("id"));

        Where nullIntconv is the string to integer converter. 
```

# c# - 正则表达式追加替换替换

> ID：14575784
> 
> 赞同：0
> 
> 时间：2013-01-29T04:42:32.250
> 
> 标签：c#, regex

我有以下文字

```
{1:F01BSUIARP0XXXX7825287830}{2:I942CRAYIGS0XXXXN} 
```

我用来提取值的正则表达式

> {1:F01(?<SwiftTerminal>.{7}).*{2:I(?<MessageType>\d{3})(?<xxx2>.{12}).*\r\n

对于 SwiftTerminal，我希望结果附加 AAAA（4 个字符），我尝试使用 Backrefernece \K 但未找到匹配项。

请帮我写正则表达式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:47:35.830

删除`?`第三个捕获组开始处的

```
{3})(.{12}) 
```

这导致正则表达式失败。没有它，正则表达式将匹配，您将能够找到匹配项并随意使用它们/附加到它们。

# c#-4.0 - 如何在没有回发的情况下使用 ajax 或任何其他技术在 ASP.NET MVC 4 中上传图像？

> ID：14575787
> 
> 赞同：9
> 
> 时间：2013-01-29T04:43:01.987
> 
> 标签：c#-4.0, file-upload, asp.net-mvc-4

我正在 MVC 4 中开发一个网站，用户在其中填写一些信息并将其保存以供上传。除了图像之外的所有信息都使用 Javascript、Json 和 Ajax 保存在服务器上，如下所示：

```
$.ajax({
                    url: action,
                    type: "POST",
                    data: JSON.stringify(PostViewModel),
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    beforeSend: function () {            
                    },
                    success: function (data) {
                    try{
                        alert('success');
                    }catch(err){alert(' Error: '+err);}

                    },
                    complete: function () {
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        alert("Error occured");
                    }
            }); 
```

但是现在我还需要上传他的图片，但是我找不到任何可以使用这种方法的方法，或者没有任何没有回发的方法。

我知道将 FileUpload Control 放在 Form 标记中，然后按下提交按钮，我可以获得如下所示的图像文件：

```
 HttpPostedFileBase photo = Request.Files["photo"];
        if (photo != null)
        {
            Session["ImgPath"] = "~/Content/PostImages/" + photo.FileName;
            string path = Server.MapPath("~/Content/PostImages/");
            photo.SaveAs(path + photo.FileName);
        } 
```

但是对于这种方法，我将不得不改变我不能保存内容的方法（使用 Javascript、Json 和 Ajax）。

请帮忙

谢谢。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-09-10T14:35:20.387

HTML 代码

```
<input type="file"  id="uploadEditorImage"  /> 
```

Javascript代码

```
$("#uploadEditorImage").change(function () {
    var data = new FormData();
    var files = $("#uploadEditorImage").get(0).files;
    if (files.length > 0) {
        data.append("HelpSectionImages", files[0]);
    }
    $.ajax({
        url: resolveUrl("~/Admin/HelpSection/AddTextEditorImage/"),
        type:"POST",
        processData: false,
        contentType: false,
        data: data,
        success: function (response) {
           //code after success

        },
        error: function (er) {
            alert(er);
        }

    });
}); 
```

MVC 控制器中的代码

```
if (System.Web.HttpContext.Current.Request.Files.AllKeys.Any())
        {
            var pic = System.Web.HttpContext.Current.Request.Files["HelpSectionImages"];
        } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-29T04:54:22.933

有两种方式可以异步发布文件（图片）如果你的目标浏览器支持文件 api，你可以使用以下方式： HTML：

```
<input type="file" name="etlfileToUpload" id="etlfileToUpload"  /> 
```

JavaScript

```
// Call this function on upload button click after user has selected the file 
function UploadFile() {
    var file = document.getElementById('etlfileToUpload').files[0];
    var fileName = file.name;    
    var fd = new FormData();    
    fd.append("fileData", file);    
    var xhr = new XMLHttpRequest();
    xhr.upload.addEventListener("progress", function (evt) { UploadProgress(evt); }, false);
    xhr.addEventListener("load", function (evt) { UploadComplete(evt); }, false);
    xhr.addEventListener("error", function (evt) { UploadFailed(evt); }, false);
    xhr.addEventListener("abort", function (evt) { UploadCanceled(evt); }, false);
    xhr.open("POST", "{URL}", true); 
    xhr.send(fd);
}

function UploadProgress(evt) {
    if (evt.lengthComputable) {
        var percentComplete = Math.round(evt.loaded * 100 / evt.total);
        $("#uploading").text(percentComplete + "% ");        
    }
}

function UploadComplete(evt) {
    if (evt.target.status == 200)
        alert(evt.target.responseText);
    else {
        alert("Error Uploading File");
    }
}

function UploadFailed(evt) {    
    alert("There was an error attempting to upload the file.");
}

function UploadCanceled(evt) {    
    alert("The upload has been canceled by the user or the browser dropped the connection.");
} 
```

或者你可以使用像[uploadify这样的swf工具](http://www.uploadify.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-03T12:53:32.617

试试这个它对我有用

```
 <input type="file" name="Upload" id="Upload" />

$('#Upload').change(function () {
    debugger;
    var file = document.getElementById('Upload').files[0];
    var fileName = file.name;
    var fd = new FormData();
    fd.append("fileData", file);
    fd.append("key", '@Model.Id');

    var xhr = new XMLHttpRequest();
    xhr.upload.addEventListener("progress", function (evt) { UploadProgress(evt); }, false);
    xhr.addEventListener("load", function (evt) { UploadComplete(evt); }, false);
    xhr.addEventListener("error", function (evt) { UploadFailed(evt); }, false);
    xhr.addEventListener("abort", function (evt) { UploadCanceled(evt); }, false);
    xhr.open("POST", "/ImageHandler.ashx", true);
    xhr.send(fd);
});

function UploadProgress(evt) {
    if (evt.lengthComputable) {
        var percentComplete = Math.round(evt.loaded * 100 / evt.total);
        //$("#uploading").text(percentComplete + "% ");
    }
}

function UploadComplete(evt) {
    //if (evt.target.status == 200)
        //alert(evt.target.responseText);
    //else {
    //   // alert("Error Uploading File");
    //}
}

function UploadFailed(evt) {
   // alert("There was an error attempting to upload the file.");
}

function UploadCanceled(evt) {
    //alert("The upload has been canceled by the user or the browser dropped the connection.");
} 
```

> 处理程序：

```
public class ImageHandler : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        //context.Response.ContentType = "text/plain";
        //context.Response.Write("Hello World");]

        string filePath = Constants.ImageFolderPath;

        //write your handler implementation here.
        if (context.Request.Files.Count <= 0)
        {
            context.Response.Write("No file uploaded");
        }
        else
        {
            for (int i = 0; i < context.Request.Files.Count; ++i)
            {
                HttpPostedFile file = context.Request.Files[i];
                if (context.Request.Form != null)
                {
                    string imageid = context.Request.Form.ToString();
                    imageid = imageid.Substring(imageid.IndexOf('=') + 1);

                    if (file != null)
                    {
                        string ext = file.FileName.Substring(file.FileName.IndexOf('.'));
                        if (ext.ToLower().Contains("gif") || ext.ToLower().Contains("jpg") || ext.ToLower().Contains("jpeg") || ext.ToLower().Contains("png"))
                        {

                            byte[] data;
                            using (Stream inputStream = file.InputStream)
                            {
                                MemoryStream memoryStream = inputStream as MemoryStream;
                                if (memoryStream == null)
                                {
                                    memoryStream = new MemoryStream();
                                    inputStream.CopyTo(memoryStream);
                                }
                                data = memoryStream.ToArray();
                                File.WriteAllBytes(Constants.ImageFolderPath + imageid + ".jpg", (byte[])data);
                                //club.club_image = Convert.ToBase64String(data);
                            }
                        }
                    }
                }
                else
                {

                }

                //file.SaveAs(context.Server.MapPath(filePath + file.FileName));
                context.Response.Write("File uploaded");
            }
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T05:36:36.153

我个人不喜欢使用除 java script、css 或 html 之外的任何第三方工具。我将采用 UmairP 展示的第一种方法。但是，如果您想节省自己编写大量代码的时间。这是一个不错的jquery[插件](http://blueimp.github.com/jQuery-File-Upload/)。

还有一个带有这个插件的 asp.net mvc[演示](https://github.com/maxpavlov/jQuery-File-Upload.MVC3)。

请看一看。让我知道是否需要任何进一步的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-24T15:42:10.517

```
$(document).ready(function(){
   var status = $('#status');

        $('#frmUpload').ajaxForm({
            beforeSend: function () {
                if ($("#file").val() != "") {                   
                    $("#progressDiv").show();                    
                }
                status.empty();
            },
            success: function () {
                showTemplateManager();
            },
            complete: function (xhr) {
                if ($("#file").val() != "") {
                    var millisecondsToWait = 500;
                    setTimeout(function () {                       
                     $("#progressDiv").hide();
                    }, millisecondsToWait);
                }
                status.html(xhr.responseText);
            }
        });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-25T12:22:45.860

我也遇到了类似的问题，在坚持了很多天之后，这个链接终于帮助了我

[带有进度条的 Jquery Uploadiy 与 MVC 一起使用](http://lbrtdotnet.wordpress.com/2011/09/02/asp-net-mvc-multiple-file-uploads-using-uploadify-and-jqueryui-progressbar/)

这就是我管理它的方式

```
public JsonResult Upload(HttpPostedFileBase file)
{
    if (Session["myAL"] == null)
    {
        al = new ArrayList();
    }
    else
        al = (ArrayList)Session["myAL"];

    var uploadFile = file;

        if (uploadFile != null && uploadFile.ContentLength > 0)
        {
            string filePath = Path.Combine(HttpContext.Server.MapPath("~/Content/Uploads"),
                                               Path.GetFileName(uploadFile.FileName));                    
            al.Add(filePath);
            Session["myAL"] = al;
            uploadFile.SaveAs(filePath);
        }

    var percentage = default(float);

    if (_totalCount > 0)
    {
        _uploadCount += 1;
        percentage = (_uploadCount / _totalCount) * 100;
    }

    return Json(new
    {
        Percentage = percentage
    });
} 
```

[如何在 MVC 和 jquery 中为 FileUploading 实现附加更多文件](https://stackoverflow.com/questions/14563034/how-to-implement-attach-more-files-in-mvc-and-jquery-for-fileuploading)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-24T19:06:33.350

```
<input type="file" name="file" id="file" style="width: 100%;"onchange="readURL(this);" />

 if (file != null && file.ContentLength > 0)
                {
                    string filename = Path.GetFileName(file.FileName);
                    string imgpath = Path.Combine(Server.MapPath("~/Img/"), filename);
                    file.SaveAs(imgpath);
                    student.photo = imgpath;
                }

function readURL(input)
    {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#imgUser')
                    .attr('src', e.target.result)
                    .width(150)
                    .height(200);
            };

            reader.readAsDataURL(input.files[0]);
        }
    } 
```

# ruby - 检测递归调用

> ID：14575788
> 
> 赞同：5
> 
> 时间：2013-01-29T04:43:20.253
> 
> 标签：ruby, recursion

检测递归方法调用的最佳方法是什么？或许，可以做成这样的格式：

```
def foo
  if some_code_to_detect_recursive_call
    ...
  else
    ...
  end
end 
```

我可以想到一种解析`caller`信息的方法，但我有兴趣看看是否有更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T04:47:30.080

只需在进入您的方法后增加一个计数器（实例或全局变量）并在退出时减少它。

在入口处，计数器会告诉您您的递归级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-14T14:46:55.750

```
def is_recursive(max_recursive_calls=2)
  calls = caller.inject(0) do |calls, line|
    break calls if calls >= max_recursive_calls
    calls += 1 if line == caller[-2]
    calls
  end
  calls >= max_recursive_calls
end 
```

### 测试用例：

```
# 1
def recursive
  p "case #1"
  recursive unless is_recursive
end

# 2
def recursive_a
  p "case #2.1"
  recursive_b unless is_recursive
end

def recursive_b
  p "case #2.2"
  recursive_a unless is_recursive
end

# 3
def recursive_cond(iter=0, limit=10)
  p "case #3"
  recursive_cond(iter + 1, limit) unless iter > limit || is_recursive(50)
end

recursive
recursive_a
recursive_b
recursive_cond

p "If you see this: is_recursive function implemented correctly" 
```

### 输出

```
"case #1"
"case #1"
"case #2.1"
"case #2.2"
"case #2.1"
"case #2.2"
"case #2.1"
"case #2.2"
"case #3"
"case #3"
"case #3"
"case #3"
"case #3"
"case #3"
"case #3"
"case #3"
"case #3"
"case #3"
"case #3"
"case #3"
"If you see this: is_recursive function implemented correctly" 
```

# c - Eggdrop 编译 [error: parse error before...]

> ID：14575790
> 
> 赞同：2
> 
> 时间：2013-01-29T04:43:42.487
> 
> 标签：c, compiler-errors, eggdrop

今天来寻求帮助，经过长时间的搜索，在整个网络上，没有找到解决方案......

我尝试为 Windows 编译一个 1.6.21 版本的 eggdrop。

我正在使用 cygwin 和 tcl 8.5.11 的最新版本，然后我按照[http://windrop.sourceforge.net/compile16.html](http://windrop.sourceforge.net/compile16.html)上提供的说明进行操作。（我尝试使用和不使用 eggdrop1.6.21.patch 进行编译

C 语言对我来说显示为 cypted (hihi)，所以如果有人得到解决方案，他将是最好的！

有日志......（注意我分割了最后一个日志的一部分，因为它太大了！！）

```
admin@TCLserver /
$ tar -zxf tcl-8.5.11.tar.gz

admin@TCLserver /
$ cd /home/admin

admin@TCLserver ~
$ tar -zxf eggdrop1.6.21.tar.gz

admin@TCLserver ~
$ cp eggdrop1.6.21.patch eggdrop1.6.21

admin@TCLserver ~
$ cd eggdrop1.6.21

admin@TCLserver ~/eggdrop1.6.21
$ patch -p0 <  eggdrop1.6.21.patch
patching file src/main.c
Hunk #1 succeeded at 1094 (offset -20 lines).
Hunk #2 succeeded at 1116 (offset -20 lines). 
```

--

```
admin@TCLserver ~/eggdrop1.6.21
$ ./configure --enable-strip --with-handlen=32 --with-tclinc='/usr/local/include/tcl.h' --with-tcllib='/usr/local/lib/libtcl8.5.dll'

This is Eggdrop's GNU configure script.
It's going to run a bunch of tests to hopefully make your compile
work without much twiddling.

checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.exe
checking for suffix of executables... .exe
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking for library containing strerror... none required
checking for icc... no
checking whether the compiler understands -pipe... yes
checking whether the compiler understands -Wall... yes
checking for a BSD-compatible install... /usr/bin/install -c
checking whether make sets $(MAKE)... yes
checking for ranlib... ranlib
checking whether ln -s works... yes
checking whether head -n 1 works... yes
checking for strip... strip
checking for gawk... gawk
checking for basename... basename
checking for uname... uname

configure: WARNING:

  Stripping the executable, while saving some disk space, will make bug
  reports nearly worthless. If Eggdrop crashes and you wish to report
  a bug, you will need to recompile with stripping disabled.

checking for socket in -lsocket... no
checking for connect in -lnsl... no
checking for gethostbyname in -ldns... no
checking for dlopen in -ldl... yes
checking for tan in -lm... yes
checking for pthread_mutex_init in -lpthread... yes
checking build system type... i686-pc-cygwin
checking host system type... i686-pc-cygwin
checking target system type... i686-pc-cygwin
checking system type... CYGWIN_NT-5.2
checking system release... 1.7.17(0.262/5/3)
checking module loading capabilities...
checking dl.h usability... no
checking dl.h presence... no
checking for dl.h... no
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking loader.h usability... no
checking loader.h presence... no
checking for loader.h... no
checking rld.h usability... no
checking rld.h presence... no
checking for rld.h... no
checking mach-o/dyld.h usability... no
checking mach-o/dyld.h presence... no
checking for mach-o/dyld.h... no
checking mach-o/rld.h usability... no
checking mach-o/rld.h presence... no
checking for mach-o/rld.h... no
checking for dlopen... yes
checking for load... no
checking for NSLinkModule... no
checking for shl_load... no
checking for rld_load... no
checking for /usr/lib/binmode.o... yes
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking whether time.h and sys/time.h may both be included... yes
checking arpa/inet.h usability... yes
checking arpa/inet.h presence... yes
checking for arpa/inet.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking locale.h usability... yes
checking locale.h presence... yes
checking for locale.h... yes
checking netdb.h usability... yes
checking netdb.h presence... yes
checking for netdb.h... yes
checking netinet/in.h usability... yes
checking netinet/in.h presence... yes
checking for netinet/in.h... yes
checking stdio.h usability... yes
checking stdio.h presence... yes
checking for stdio.h... yes
checking stdarg.h usability... yes
checking stdarg.h presence... yes
checking for stdarg.h... yes
checking stddef.h usability... yes
checking stddef.h presence... yes
checking for stddef.h... yes
checking sys/file.h usability... yes
checking sys/file.h presence... yes
checking for sys/file.h... yes
checking sys/param.h usability... yes
checking sys/param.h presence... yes
checking for sys/param.h... yes
checking sys/rusage.h usability... no
checking sys/rusage.h presence... no
checking for sys/rusage.h... no
checking sys/select.h usability... yes
checking sys/select.h presence... yes
checking for sys/select.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking for unistd.h... (cached) yes
checking wchar.h usability... yes
checking wchar.h presence... yes
checking for wchar.h... yes
checking for an ANSI C-conforming const... yes
checking whether byte ordering is bigendian... no
checking for inline... inline
checking for intptr_t... yes
checking for pid_t... yes
checking for size_t... yes
checking whether struct tm is in sys/time.h or time.h... time.h
checking for struct tm.tm_zone... no
checking whether tzname is declared... yes
checking for tzname... yes
checking for working volatile... yes
checking for socklen_t... yes
checking size of long... 4
checking size of int... 4
checking size of short... 2
checking for clock... yes
checking for dprintf... yes
checking for fsync... yes
checking for getdtablesize... yes
checking for getrusage... yes
checking for inet_aton... yes
checking for isascii... yes
checking for mbrlen... yes
checking for memcpy... yes
checking for memset... yes
checking for random... yes
checking for rand... yes
checking for lrand48... yes
checking for rename... yes
checking for setpgid... yes
checking for sigaction... yes
checking for sigemptyset... yes
checking for snprintf... yes
checking for strcasecmp... yes
checking for strncasecmp... yes
checking for strdup... yes
checking for uname... yes
checking for vsnprintf... yes
checking for sys/select.h... (cached) yes
checking for sys/socket.h... (cached) yes
checking types of arguments for select... int,fd_set *,struct timeval *
checking for vprintf... yes
checking for _doprnt... no
checking for strftime... yes
checking for stdlib.h... (cached) yes
checking for unistd.h... (cached) yes
checking for sys/param.h... (cached) yes
checking for getpagesize... yes
checking for working mmap... yes
checking for Tcl library... using /usr/local/lib/libtcl8.5.dll
checking for Tcl header... using /usr/local/include/tcl.h
checking whether the Tcl system has changed... yes
checking for Tcl version... 8.5
checking for Tcl patch level... 8.5.11
checking for Tcl_Free in -ltcl8.5... yes
checking for Tcl_GetCurrentThread in -ltcl8.5... yes
checking for Tcl_GetThreadData in -ltcl8.5... yes
checking for Tcl_SetNotifier in -ltcl8.5... yes
checking for Tcl_NotifierProcs.initNotifierProc... yes
configure: creating ./config.status
config.status: creating Makefile
config.status: creating doc/Makefile
config.status: creating scripts/Makefile
config.status: creating src/Makefile
config.status: creating src/compat/Makefile
config.status: creating src/md5/Makefile
config.status: creating src/mod/Makefile
config.status: creating config.h
config.status: executing replace-if-changed commands
creating lush.h
config.status: executing catch-make-rebuild commands

Operating System: CYGWIN_NT-5.2 1.7.17(0.262/5/3)

If you experience any problems compiling Eggdrop, please read the
compile guide, found in doc/COMPILE-GUIDE.

Type 'make config' to configure the modules, or type 'make iconfig'
to interactively choose which modules to compile. 
```

--

```
admin@TCLserver ~/eggdrop1.6.21
$ make config
Detecting modules.................... done.
Calculating dependencies................... done.
Building ./src/mod/Makefile... done.
make[1]: Entering directory `/home/admin/eggdrop1.6.21/src/mod'

Configuring module 'compress'.
configure: creating cache ../../../config.cache
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.exe
checking for suffix of executables... .exe
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for gzopen in -lz... yes
checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking zlib.h usability... yes
checking zlib.h presence... yes
checking for zlib.h... yes
configure: updating cache ../../../config.cache
configure: creating ./config.status
config.status: creating Makefile

Configuring module 'dns'.
configure: loading cache ../../../config.cache
checking for gcc... (cached) gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.exe
checking for suffix of executables... .exe
checking whether we are cross compiling... no
checking for suffix of object files... (cached) o
checking whether we are using the GNU C compiler... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking for gcc option to accept ISO C89... (cached) none needed
checking for sys/types.h... (cached) yes
checking for netinet/in.h... yes
checking for arpa/nameser.h... yes
checking for netdb.h... yes
checking for resolv.h... yes
checking for a working resolver library... yes ()
configure: updating cache ../../../config.cache
configure: creating ./config.status
config.status: creating Makefile

make[1]: Leaving directory `/home/admin/eggdrop1.6.21/src/mod'
Building ./src/mod/Makefile... done.

You can now compile the bot, using "make". 
```

--

```
admin@TCLserver ~/eggdrop1.6.21
$ make eggdrop
make[1]: Entering directory `/home/admin/eggdrop1.6.21/src'

This may take a while. Go get some runts.

gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c bg.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c botcmd.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c botmsg.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c botnet.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c chanprog.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c cmds.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c dcc.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c dccutil.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c dns.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c flags.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c language.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   -c match.c
gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H   \
'-DCCFLAGS="gcc -g -O2 -pipe -Wall -I.. -I.. -DHAVE_CONFIG_H  "' \
'-DLDFLAGS="gcc"' \
'-DSTRIPFLAGS="strip"' -c ./main.c
In file included from /usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/windef.h:139,
                 from /usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/windows.h:69,
                 from ./main.c:68:
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:207: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:208: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:209: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:210: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:211: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:212: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:213: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:236: error: parse error before "LPTCH"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:237: error: parse error before "PTSTR"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:238: error: parse error before "PCTSTR"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:244: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:245: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:257: error: parse error before "HRESULT"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:326: error: parse error before "LONG"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:330: error: parse error before "LONG"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:333: error: parse error before '}' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:335: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:353: error: parse error before "LONG"
In file included from /usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/windef.h:139,
                 from /usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/windows.h:69,
                 from ./main.c:68:
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1811: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1812: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1814: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h: In function `_interlockedbittestandset':
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1817: error: `Base' undeclared (first use in this function)
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1817: error: (Each undeclared identifier is reported only once
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1817: error: for each function it appears in.)
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1818: error: `Bit' undeclared (first use in this function)
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h: At top level:
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1822: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h: In function `_interlockedbittestandreset':
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1825: error: `Base' undeclared (first use in this function)
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1826: error: `Bit' undeclared (first use in this function)
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h: At top level:
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1831: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1833: error: parse error before '*' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h: In function `InterlockedBitTestAndComplement':
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1836: error: `Base' undeclared (first use in this function)
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1837: error: `Bit' undeclared (first use in this function)
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h: In function `MemoryBarrier':
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1883: error: `LONG' undeclared (first use in this function)
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1883: error: parse error before "Barrier"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1885: error: `Barrier' undeclared (first use in this function)
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h: At top level:
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1984: error: parse error before "InterlockedIncrement"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1985: error: parse error before "InterlockedDecrement"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1986: error: parse error before "InterlockedExchange"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1989: error: parse error before "InterlockedIncrement"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:1997: error: parse error before "InterlockedDecrement"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:2005: error: parse error before "InterlockedExchange"
In file included from /usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/windef.h:139,
                 from /usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/windows.h:69,
                 from ./main.c:68:
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:2521: error: parse error before "LUID"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:2523: error: parse error before '}' token
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:2524: error: parse error before "LUID_AND_ATTRIBUTES_ARRAY"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/winnt.h:2525: error: parse error before '*' token
In file included from /usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/windef.h:139,
                 from /usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/windows.h:69,
                 from ./main.c:68:
...
...
...
... a lot of error lines ....
...
...
...
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/imm.h:217: error: parse error before "LPCSTR"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/imm.h:219: error: parse error before "LPSTYLEBUFA"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/imm.h:221: error: parse error before "LPCSTR"
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../include/w32api/imm.h:225: error: parse error before "LPIMEMENUITEMINFOA"
./main.c:695: warning: 'patch' defined but not used
{standard input}: Assembler messages:
{standard input}:4963: Warning: size of "_cStreamName" is already 16; not changing to 592
{standard input}:5705: Warning: size of "_szTip" is already 512; not changing to 256
{standard input}:5706: Warning: size of "_szInfo" is already 1024; not changing to 512
{standard input}:5707: Warning: size of "_szInfoTitle" is already 256; not changing to 128
{standard input}:6815: Warning: size of "_dwReserved" is already 32; not changing to 16
Makefile:60: recipe for target `main.o' failed
make[1]: *** [main.o] Error 1
make[1]: Leaving directory `/home/admin/eggdrop1.6.21/src'
Makefile:202: recipe for target `modegg' failed
make: *** [modegg] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:40:14.223

我今天在使用 Windrop 1.8 和 1.6.21 时遇到了同样的错误，但`@Kirben`在 IRC 上提供了解决方案。

> <@Kirben> 现在只需从 src/main.c 中删除 Cygwin Hack 部分即可解决此问题，该问题是由 Cygwin 切换到使用不同的 win32api 包引起的。
> 
> <@Kirben> 只是“#ifdef CYGWIN_HACKS”部分。

多亏了他，我现在可以运行我的改装 Windrop 1.8。

# asp.net-mvc - 在没有 WIF STS/IDP 的情况下，如何在 MVC 中维护基于 cookie 的会话？

> ID：14575793
> 
> 赞同：0
> 
> 时间：2013-01-29T04:44:08.533
> 
> 标签：asp.net-mvc, session, authentication, wif, windows-identity

从表面上看，我认为我需要 WIF 的许多功能

*   使用角色区分会话的能力
*   服务器上没有会话状态
*   所有身份验证和角色数据都驻留在仅 HTTP cookie 中
*   ASP.NET MVC 支持

但是对于我的应用程序，我想使用我自己的自定义身份存储并且不使用 Windows 身份验证。

这让我相信我需要设置一个自定义 IDP 来使用 WIF，而且我开始认为这可能是太多的开销/人工。

1.  是否有类似于 WIF+ 和 IDP 的技术可以为我提供上面列出的功能？

2.  缺乏这一点，我有一个定义明确的模式来实现 IDP + 网站的组合吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:28:45.630

如果您只需要一个应用程序的自定义 IdP，使用成员资格提供程序的表单身份验证就可以正常工作。如果您的自定义 IdP 成为其他应用程序和/或服务的 IdP，那么外部化此类功能的需求就会变得很明显。WIF 可能是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:56:32.770

WIF 基本上是 WS-Trust 和 WS-Federation 协议的包装器……老实说，这很让人头疼——尤其是如果您想创建自己的提供程序而不是使用 ADFS 或类似的东西。

如果您使用自己的身份存储...然后远离那个 imo...使用 OAuth\OpenID... 或 MVC 中的内置成员资格提供程序，如果您只对单个站点的用户进行身份验证。

# cppunit - 如何在 CppUnit 测试套件中实现“类别”？

> ID：14575794
> 
> 赞同：0
> 
> 时间：2013-01-29T04:44:16.240
> 
> 标签：cppunit

[与这个问题](https://stackoverflow.com/questions/7717181/is-there-a-cppunit-equivalent-to-nunits-category-attribute-for-test-cases)密切相关，我希望能够根据命令行参数选择要在 CppUnit 程序集中执行的测试。想想`--exclude=integration,smoke,x64only`或`--include=unit`。[NUnit 类别](http://www.nunit.org/index.php?p=category&r=2.2)就是这样工作的。**如何在 CppUnit 中实现类似的东西？**

我尝试沿着添加`IHasCategories`带有方法的抽象基类的路线`get_Categories()`，并且我的测试装置覆盖该方法以返回以逗号分隔的类别列表。但是，当我们使用类似的调用从 CppUnit 检索测试时`CppUnit::Test *topLevelTest = CppUnit::TestFactoryRegistry::getRegistry().makeTest();`，我们会得到一个`CppUnit::Test`. **我在这里真正需要并且无法获得的是`CppUnit::TestFixture`获取我要检查的类别列表的实例。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T00:49:12.233

当你知道答案时，结果很简单，所以这里是为任何未来的读者准备的。

正如我在问题中提到的，我编写了一个`IHasCategories`带有 method的抽象基类`get_Categories()`，并且我的测试装置覆盖了该方法以返回以逗号分隔的类别列表。

难题中缺少的部分是如何`CppUnit::TestFixture`从 CppUnit 中获取实例。事实证明，CppUnit 为您提供了`CppUnit::Test`对象层次结构，您可以将`dynamic_cast`这些对象简单地添加到您想要的类中。

以下代码有点特定于我的需求，但可能会有所帮助。此方法提供层次结构中的对象列表，这些对象以层次结构表示 TestFixture。我使用类似的命令执行此列表中的对象`test->run(&controller);`。当我想检查类别的实际 TestFixture 对象时，我想将这些对象的子对象 dynamic_cast 为`IHasCategories`.

```
/**
 * Get TestSuite objects from the CppUnit hierarchy, that have, as their children,
 * TestFixture objects.
 */
void GetTestSuitesWithFixtures(const CppUnit::Test * test, std::vector<CppUnit::Test*> & suites)
{
    for (int childIndex = 0; childIndex < test->getChildTestCount(); ++childIndex)
    {
        CppUnit::Test * child = test->getChildTestAt(childIndex);

        CppUnit::TestSuite * testSuite = dynamic_cast<CppUnit::TestSuite*>(child);

        if (testSuite 
            && testSuite->getChildTestCount() > 0
            && dynamic_cast<CppUnit::TestFixture*>(testSuite->getChildTestAt(0)))
        {
            suites.push_back(testSuite);
        }
        else GetTestSuitesWithFixtures(child, suites);
    }
} 
```

# javascript - 在javascript中更改日期函数的输出颜色

> ID：14575798
> 
> 赞同：-1
> 
> 时间：2013-01-29T04:45:04.887
> 
> 标签：javascript

我有下面的代码来获取按钮单击的日期和时间。我想以不同的颜色获得输出..需要哪些更改？

```
<!DOCTYPE html>
<html>
<head>
<script>
function displayDate()
{
document.getElementById("demo").innerHTML=Date();
}
</script>
</head>
<body>

<h1>My First JavaScript</h1>
<p id="demo">click on the button bellow.....</p>

<button type="button" onclick="displayDate()">Display Date</button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:53:43.693

尝试使用[这里](http://www.w3schools.com/jsref/prop_style_color.asp)`object.style.color`的文档，所以在你的情况下

```
<!DOCTYPE html>
<html>
<head>
<script>
function displayDate()
{
document.getElementById("demo").innerHTML=Date();
document.getElementById("demo").style.color = "red";
}
</script>
</head>
<body>

<h1>My First JavaScript</h1>
<p id="demo">click on the button bellow.....</p>

<button type="button" onclick="displayDate()">Display Date</button>

</body>
</html> 
```

# c++ - 使用命名空间标准；在头文件中

> ID：14575799
> 
> 赞同：19
> 
> 时间：2013-01-29T04:45:35.750
> 
> 标签：c++, class, namespaces, header-files

所以，我在规范文件中有以下内容

```
#include <string>
#include <fstream>
using namespace std:

class MyStuff
{
    private:

    string name;
    fstream file;
    // other stuff

    public:
    void setName(string);
} 
```

我在实现文件中也有

```
#include "MyStuff.h"
using namespace std;

void MyStuff::setName(string name);
{
     name = name
} 
```

在我的程序文件中......

```
#include <iostream>
#include <string>
using namespace std;

void main()
{
     string name;
     MyStuff Stuff;

     cout << "Enter Your Name: ";
     getline(cin, name);

     Stuff.setName(name);
} 
```

我正在收集应用“使用命名空间标准；” 在头文件中是禁止的，完全符合条件是“更好”的做法；如`std::cout << stuff << endl;`

据我了解，为了使用字符串，它必须具有 std 命名空间。真的吗？

如果是这样，在头文件中，更“纯粹/干净”的做法是......

```
#include <string>

class MyStuff
{
     std::string name;
} 
```

而且，据我目前了解，使用命名空间std；在所有三个文件（规范、实现和程序）中，基本上将三个命名空间叠加在一起，所以如果我`string name;`在每个文件中分别声明，编译器将不知道哪个到哪个。真的吗？

我一般都明白，清楚是一件“好”的事情，但是我对如何做的具体情况有点不清楚，我最感兴趣的是更深层次的“为什么”是这一切的基础。

所以我的直接问题是，在我提供的示例中，为编译器和行业“标准”描述函数的“最清晰”方式是什么？而且，您能否指导我更清楚地描述命名空间的推理和实际实现的资源。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T05:00:40.363

假设我`string`自己声明了一个类。因为我是一个懒惰的流浪汉，所以我在全局命名空间中这样做。

```
// Solar's stuff
class string
{
    public:
        string();
        // ...
}; 
```

一段时间后，我意识到重用*您*的一些代码将使我的项目受益。感谢您将其开源，我可以这样做：

```
#include <solarstuff.hpp>
#include <phoenixstuff.hpp>

string foo; 
```

但是突然编译器不再喜欢我了。因为有一个`::string`（我的类）和*另一个* `::string`（标准的，包含在您的标题中并使用 带入全局命名空间`using namespace std;`），所以会有各种各样的痛苦。

更糟糕的是，这个问题会通过包含*我的*标题的每个文件（包括你的标题，它......你明白了。）

是的，我知道，在这个例子中，我也应该责备我没有在我自己的命名空间中保护我自己的类，但那是我临时提出的。

命名空间是为了避免标识符冲突。您的标头不仅引入`MyStuff`了全局命名空间，还引入了来自和的*每个*标识符。很可能它们中的大多数都不是我们两个人真正需要的，那么为什么要把它们拖到全球污染环境呢？`string``fstream`

**另外：**从维护编码器/调试器的角度来看，它比命名空间在其他地方（甚至可能不是相同的源文件）`foo::MyStuff`方便十倍，因为您可以在代码中的位置获得命名空间信息`MyStuff`需要它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-29T04:48:49.767

的多个实例`using namespace std;`不会引起任何歧义。问题是该语句将所有名称/类型/函数`std`导入到您的命名空间中，现在如果您想命名一个类`string`，例如，您将遇到麻烦。删除、擦除等功能更可能发生这种情况。

在**标头中使用它会更糟**，因为它会传播到`.cpp`该标头的所有 s，而没有包括它的人的意识。使用它`.cpp`至少需要一个有意识的选择。

更**完整的解释**可以在[为什么“使用命名空间标准”被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)

如何使用**迭代**[器？](https://stackoverflow.com/questions/2712076/how-to-use-iterator-in-c/2712125#2712125)OP 定义了一个函数`distance`，并不断得到错误的答案。[Confusion 中关于 C++ 中指针和引用的](https://stackoverflow.com/questions/13402789/confusion-about-pointers-and-references-in-c)另一个**示例**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T04:56:33.333

命名空间使用是为了您的方便，而不是让您强加于他人：**切勿在 #include 指令之前编写 using 声明或 using 指令。**

推论：在头文件中，不要写命名空间级别的 using 指令或 using 声明；相反，明确命名空间限定所有名称。（第二条规则从第一条开始，因为标头永远无法知道其他标头#includes 可能出现在它们之后。）

> 我一般都明白，清楚是一件“好”的事情，但是我对如何做的具体情况有点不清楚，我最感兴趣的是更深层次的“为什么”是这一切的基础。

下面的代码片段反映了为什么`using namespace`在头文件中使用不好：

```
// snippet 1
namespace A {
 int f(double);
}

// snippet 2
namespace B {  
    using A::f;
    void g();
}

// snippet 3
namespace A {
    int f(int);
}

// snippet 4
void B::g() {
    f(1);   // which overload is called?
} 
```

所以在你的例子中，这个更好：

```
#include <string>

class MyStuff
{
    std::string name;
}; 
```

推荐书籍：[C++ 编码标准：101 条规则、指南和最佳实践](https://rads.stackoverflow.com/amzn/click/com/0321113586)

和链接：[Google C++ 编码指南](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml)

# android - Github 双作者一开发者

> ID：14575804
> 
> 赞同：1
> 
> 时间：2013-01-29T04:46:16.660
> 
> 标签：android, git, github, intellij-idea

我一直在 IntelliJ 中开发一个 Android 项目，但我从来没有真正弄清楚如何正确设置 Git，所以我有它，所以我可以提交，但是我必须做一些奇怪的事情，那就是去 Eclipse 并让它们实际推送到 GitHub。（我相信这是因为该项目是在 GitHub 上提前创建的，由于某种原因，我无法让现有项目正确链接，但如果有人知道这将是多么棒）无论如何，我的问题是在我的我没有意识到我一直在用不同的名称创作我的提交，所以在 GitHub 上它们没有链接到我的 GitHub 用户名。有没有办法合并两位作者或解决这个问题的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T05:49:17.097

[我能够在此处](https://stackoverflow.com/questions/4493936/git-could-i-change-my-name-and-surname-in-all-previous-commits)的此 SO 帖子中找到我正在寻找的答案。我之前没有在寻找正确的东西，但基本上只是按照建议做的，你必须做一个

> git push --force

尽管。

```
git filter-branch --commit-filter 'if [ "$GIT_AUTHOR_NAME" == "Josh Lee" ];
  then export GIT_AUTHOR_NAME="Hobo Bob"; export GIT_AUTHOR_EMAIL=hobo@example.com;
  fi; git commit-tree "$@"' 
```

# mysql - 如何在 MySQL 中选择非空列？

> ID：14575807
> 
> 赞同：13
> 
> 时间：2013-01-29T04:46:20.730
> 
> 标签：mysql

抱歉，如果以前有人问过这个问题，但我一直在搜索，但找不到解决我的简单问题的方法。

我需要选择其中 varchar 列中包含文本（字母、数字或特殊字符）的所有行，因此我编写了如下查询：

```
SELECT col1
FROM table
WHERE col1 IS NOT NULL 
```

但这会返回包含值 '' 的列（即它是空白的，但未设置为 NULL，因此仍会返回）。

我尝试将查询更改为：

```
SELECT col1
FROM table
WHERE col1 IS NOT NULL
AND col1 != '' 
```

但这没有用。

如何停止返回该列为空白的行？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-29T04:50:27.530

然后使用`TRIM`您的列中似乎有空格

```
SELECT col1
FROM table
WHERE col1 IS NOT NULL
AND TRIM(col1) <> '' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T07:23:02.777

如果列为空但未设置为 NULL，则可以使用此查询

`SELECT col1 FROM table where col1 not like '';`# 两个不带空格的单引号

或者

这如果列有一个或多个空格，

```
SELECT col1 FROM table where col1 not like '% %'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-17T13:20:43.027

使用**`LENGTH`**：

```
SELECT col1
FROM table
WHERE LENGTH(col1) > 0 
```

# php - BLOB 图像未呈现

> ID：14575809
> 
> 赞同：2
> 
> 时间：2013-01-29T04:46:25.603
> 
> 标签：php, mysql, blob

嗨，我在 mysql 中以 BLOB 格式保存了 jpg 图像。我在使用 PHP 将图像渲染到我的视图页面时遇到问题。当我使用

```
header('Content-type: image/jpeg') 
```

它在我的页面上显示一条消息，因为图像无法显示，因为它包含错误。当我在没有标题功能的情况下打印时，会显示一些垃圾文本。这是我的代码：

```
function loadImage(){
//connect to db
mysql_select_db('aaa',$conn);
$query = mysql_query("SELECT * FROM asdf WHERE UserName='".$userName.");
$row = mysql_fetch_array($query);
$content = $row['ProfileImage'];
header('Content-type: image/jpeg');
echo $content;
} 
```

这是html代码：

```
<img src='loadImage.php?func=loadImage' /> 
```

如果显示图像，那么我打算使用

```
loadImage.php?func=loadImage?id=number' 
```

但图像本身没有显示。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T10:11:20.920

希望这可以帮助某人...

假设图像已经以 blob 格式上传，那么您可以使用它

首先使用查询获取要显示其图像的记录并将 blob 图像存储在 $blobimg

然后用它来转换blob文件

```
echo '<img src ="data:image/jpeg;base64,'.base64_encode($blobimg).'"/>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:57:00.377

为什么将图像保存在数据库中。

最佳做法是将您的图像保存在某个文件夹中，并为您的图像指定一个唯一的名称。然后将图像名称保存到数据库中。

在显示图像时使用

```
<img src='path/to/image/image_name' /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T05:27:09.207

通过注释掉 header('Content-type: image/jpeg'); 检查页面上是否有任何其他错误

如果您的脚本设置为输出错误，则图像将无法正确呈现

# c++ - 通过网络创建文件

> ID：14575812
> 
> 赞同：2
> 
> 时间：2013-01-29T04:46:34.760
> 
> 标签：c++, windows, winapi

我有两个程序可以读取和写入同一个文件。一个附加数据，另一个清除文件，然后重写所有数据。

这两个程序在同一台计算机上可以正常交互，但是当我在另一台计算机上运行一个程序并通过本地网络打开文件时，我的追加似乎没有及时通过。

我的流程如下：

方案一：

*   打开文件

    ```
    handle = CreateFile(str.c_str(),
             FILE_READ_DATA|FILE_APPEND_DATA,
             0,
             NULL,
             OPEN_ALWAYS,
             FILE_ATTRIBUTE_NORMAL,
             NULL); 
    ```

*   使用以下方式写入数据：

    ```
    WriteFile(handle, line, strlen(line), &Written, NULL); 
    ```

*   使用以下方法关闭文件：

    ```
    CloseHandle(handle); 
    ```

方案二：

*   使用以下命令打开文件：

    ```
    handle = CreateFile(str.c_str(),
             FILE_READ_DATA|FILE_WRITE_DATA,
             0,
             NULL,
             OPEN_ALWAYS,
             FILE_ATTRIBUTE_NORMAL,
             NULL); 
    ```

*   如果文件大小与上次读取时不同，则使用：

    ```
    size = GetFileSize(handle, &size_high); 
    ```

    （我在这里只看大小，忽略 size_high 因为文件大小相对较小））然后关闭文件，使用 FILE_READ_DATA 标志打​​开它，重新加载数据，然后从上一步重试。

*   否则使用以下命令清除文件数据：

    ```
    SetFilePointer(handle,0,NULL,FILE_BEGIN); 
    SetEndOfFile(handle); 
    ```

*   使用以下方法重写所有数据：

    ```
    WriteFile(handle, line, strlen(line), &Written, NULL); 
    ```

*   使用以下方法关闭文件：

    ```
    CloseHandle(handle) 
    ```

如果文件被另一个程序锁定，程序 1 会提示用户重试保存。如果文件被另一个程序锁定，程序 2 会重试几次。

看起来当通过网络访问文件时，程序 1 中的附加操作在程序 2 清除并重写其数据之前没有被程序 2 拾取。我尝试在设置了 FILE_FLAG_WRITE_THROUGH 标志的情况下打开程序 1 中的文件，并在关闭文件之前使用 FlushFileBuffers(handle) 没有运气。

在这个过程中我有什么遗漏吗？

如果有帮助，我正在 Embarcadero C++ Studio 中编码。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T10:41:28.013

众所周知，文件锁定对于网络共享的文件访问不能可靠和稳健地工作。简单地说，你需要找到另一种机制来实现互斥。例如，使用客户端/服务器数据库设计。

# php - 使用 CURL/PHP 从 FTP 分块下载以节省内存

> ID：14575822
> 
> 赞同：2
> 
> 时间：2013-01-29T04:47:59.547
> 
> 标签：php, curl, download

我想用这个例子：

[https://stackoverflow.com/a/5830599](https://stackoverflow.com/a/5830599)

几乎是出于此页面上提到的原因。

我正在尝试提供更大的文件（通常为 100-200 兆），并且需要以块的形式“输出”数据，而不是使用 curl_exec() 将其全部读取到内存中。我的网络主机提供商只允许我使用 64 兆的内存，所以我无法一次读取那么多信息。

这里有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T04:52:19.000

这很容易。您需要做的就是为 cURL 提供一个回调来处理传入的数据。

```
function onResponseBodyData($ch, $data)
{
    echo $data;
    return strlen($data);
}

curl_setopt($ch, CURLOPT_WRITEFUNCTION, 'onResponseBodyData'); 
```

从回调中返回数据的长度很重要。它表示您处理了多少数据。如果您返回的不是传入的数据长度（例如`0`），则请求被中止。

现在，确保您没有打开输出缓冲，并将您的服务器配置为在发送之前不缓冲整个响应。它可以在大多数配置上开箱即用。

您可以在此处找到更多示例：http: [//curl.haxx.se/libcurl/php/examples/callbacks.html](http://curl.haxx.se/libcurl/php/examples/callbacks.html)

# javascript - 为什么附加脚本在 IE8 和 IE9 中运行两次？

> ID：14575824
> 
> 赞同：0
> 
> 时间：2013-01-29T04:48:05.767
> 
> 标签：javascript, jquery, asp.net

我正在为 ASP.NET 应用程序做客户端工作，下面的功能可以跨浏览器工作：

```
$('#identifier').click(function () {
    $('#script-placeholder').append('<script type="text/javascript" 
    src="SERVICEURL?callback=test"></script>');
}); 
```

当我单击 ID 为“标识符”的元素时，服务会发回包含在 JS 函数调用中的响应（即

```
test('response'); 
```

但是，在 IE8 和 IE9 中，如果我执行一次脚本，导航到不同的页面，然后返回并再次单击“标识符”，回调函数将被调用两次。任何人都知道为什么或知道解决方法吗？任何帮助将不胜感激！（请注意，我在本地主机上遇到了这个问题）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:30:19.957

我知道方法 1有两种方法 ：-
在调用之前在 URL 中添加一些附加参数。

```
$('#identifier').click(function () {
     $('#script-placeholder').append('<script type="text/javascript" 
    src="SERVICEURL?callback=test&t="+Math.random()></script>');
}); 
```

以上只是一个例子。你将不得不检查你的情况。

另一个是

如果您正在使用，请按如下方式在您的服务页面中设置无缓存`generic handler`

```
 context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
    context.Response.Cache.SetNoStore(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:06:41.500

感谢大家的回答！在发布问题后，我正在阅读并看到有另一种方法可以进行调用，而不是添加脚本标签：jQuery 的 getScript ......这最终对我有用。这是我使用它的方式：

```
 $('#identifier').click(function () {
        var url = 'SERVICEURL?callback=test'
        $.getScript(url);
    }); 
```

希望这可以帮助将来的人！仅供参考：在 Jquery 的网站上进行了更多阅读后，我发现了这一点（这是他们解决缓存问题的方法）：默认情况下，$.getScript() 将缓存设置设置为 false。这会将时间戳查询参数附加到请求 URL，以确保浏览器在每次请求时下载脚本。

# python - 在用户定义的插槽中创建小部件

> ID：14575827
> 
> 赞同：0
> 
> 时间：2013-01-29T04:48:20.773
> 
> 标签：python, qt, pyqt, signals, signals-slots

我正在构建一个简单的应用程序，其中有一个按钮，单击该按钮时会打印 hello。

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import sys
from PyQt4 import QtGui, QtCore

class Example(QtGui.QMainWindow):
    def __init__(self):
        super(Example, self).__init__();
        self.initUI()

    def initUI(self):
        self.button = QtGui.QPushButton("print hello",self)
        self.button.clicked.connect(self.print_hello)

    def print_hello(self):
        self.button.deleteLater()
        self.label = QtGui.QLabel("hello",self)

def main():
    app = QtGui.QApplication(sys.argv)
    ex = Example()
    ex.show()
    sys.exit(app.exec_())

if __name__=='__main__':
    main() 
```

现在，插槽 print_hello() 没有输出标签“hello”
为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:06:22.337

标签没有显示，因为虽然您已经创建了它，但您还没有告诉 GUI 显示它。例如，您可能希望在决定显示标签之前在后台对标签执行一些其他操作。

添加`self.label.show()`到 print_hello() 将使其可见。

# javascript - Javascript简单代码对象和函数

> ID：14575829
> 
> 赞同：1
> 
> 时间：2013-01-29T04:48:30.623
> 
> 标签：javascript

我是java脚本的新手我有一个小问题这个小代码它不起作用它是关于对象和函数的

```
var person = {
firstName : "kevin",
lastName : "sandigo"}

function getFullName() {
return this.firstName + " " + this.lastName;
}

alert(person.getFullName()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:51:53.317

如果您希望该函数成为该特定对象的方法：

```
var kevin = {firstName: "kevin", lastName: "sandigo"}

person.getfullName = function() {
  return this.firstName + " " + person.lastName
}

alert(kevin.getFullName()) 
```

或者，如果您想要一种更像类的方法

```
function Person(firstName, lastName) {
  this.firstName = firstName
  this.lastName  = lastName
}

Person.prototype.getFullName = function() {
  return this.firstName + " " + person.lastName
}

var kevin = new Person("kevin", "sandigo")

alert(kevin.getFullName()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T04:50:12.540

您应该将对象传递给函数，并使用该参数访问其属性：

```
var person = {
    firstName: "kevin",
    lastName: "sandigo"
};

function getFullName (obj) {
    return obj.firstName + " " + obj.lastName;
}

alert( getFullName(person) ); 
```

* * *

如果你想创建一个可以重用的类，你必须在`prototype`：

```
function Person (firstName, lastName) {
    this.firstName = firstName;
    this.lastName = lastName;
}

Person.prototype.getFullName = function () {
    return this.firstName + " " + this.lastName;
};

var kevin = new Person("kevin", "sandigo");

alert( kevin.getFullName() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:59:49.097

您`this`在函数中使用，但`this`指的是调用函数的对象......在这种情况下，是窗口对象。

您有两个选项可以访问函数中的值。在另一条评论中提到了一种方法......将对象传递给函数：

```
var person = {
  "firstName" : "Kevin",
  "lastName"  : "Sandigo"
};

function getFullName(obj){
  return obj.firstName + " " + obj.lastName;
}

alert(getFullName(person)); 
```

另一种选择是将对象作为上下文传递给函数。这是使用`call`方法完成的。例子：

```
var person = {
  "firstName" : "Kevin",
  "lastName"  : "Sandigo"
};

function getFullName(){
  return this.firstName + " " + this.lastName;
}

alert(getFullName.call(person)); 
```

# python - 在python的while循环中汇总变量

> ID：14575838
> 
> 赞同：0
> 
> 时间：2013-01-29T04:49:04.143
> 
> 标签：python, python-2.7, counter, cumulative-sum

我的程序旨在成为一个虚拟的麦当劳。一切正常，但我需要一种总计方法的帮助。在这个程序的底部，我总计了费用等的总数。现在我需要总计有多少客户通过了该程序。这很难，因为客户没有固定的号码。这个程序在一个while循环上运行，客户总数完全取决于用户。如何计算客户总数？

```
num1 = 4.87
num2 = 5.03
num3 = 5.50
num4 = 9.45
num5 = 1.29
num6 = 2.19
num7 = 2.29
tax = 0.0565
customer = 0
nextcustomer = "yes"
dailytax = 0
dailysubtotal = 0
dailyfinalbill = 0
dailynum_customers = 0

while nextcustomer != "no":
    amtgiven = 0
    change = 0
    quantity = 0
    foodprice = 0
    totalprice = 0
    billtax = 0
    finalbill = 0
    itemnum = 0
    print "Welcome to Virtual McDonald's!"
    print "Item:                     Meal/item:                          Price:"
    print "1                          Big Mac Meal                        4.87"
    print "2                          Quarter Pounder Meal                5.03"
    print "3                          Chicken Nuggets Meal (5 piece)      5.50"
    print "4                          ChickenNuggets Meal (10 piece)      9.45"
    print "5                          Apple Pie                           1.29"
    print "6                          Large Drink                         2.19"
    print "7                          Large Fries                         2.29"

    customer = raw_input ("Would you like to order? (If not type no)")
    while customer != "no":

        while itemnum != -1: 
            itemnum = input("Enter the item you would like to purchase! ")
            if itemnum == -1:
                break
            quantity = input("How many of this item do you want? ")

            if itemnum == 1:
                foodprice = quantity * num1
                totalprice += foodprice

            elif itemnum == 2:
                foodprice = quantity * num2
                totalprice += foodprice

            elif itemnum == 3:
                foodprice = quantity * num3
                totalprice += foodprice

            elif itemnum == 4:
                foodprice = quantity * num4
                totalprice += foodprice

            elif itemnum == 5:
                foodprice = quantity * num5
                totalprice += foodprice

            elif itemnum == 6:
                foodprice = quantity * num6
                totalprice += foodprice

            elif itemnum == 7:
                foodprice = quantity * num7
                totalprice += foodprice

        billtax = totalprice * tax
        finalbill = totalprice + billtax        
        dailytax = dailytax + billtax
        dailysubtotal = dailysubtotal + totalprice
        dailyfinalbill = dailyfinalbill + finalbill

        print "Your total bill without tax is... ", round(totalprice,2)
        print "Your total tax is... ", round(billtax,2)
        print "Your final bill is... ", round(finalbill,2)
        amtgiven = input("How much do you want to pay with? ")
        change = amtgiven - finalbill
        print "Your change is... ", round(change,2)
        break
    nextcustomer = raw_input("Is there another customer? (yes or no) ") 

print "The total amount of sales without added tax recieved today is...",round(dailysubtotal,2)
print "The total amount of taxes received today is...",round(dailytax,2)
print "The total amount of sales with added tax recieved today is...",round(dailyfinalbill,2)
print dailynum_customers 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:52:43.570

添加`numCustomers = 0`到顶部。

另外，改变这个：

```
while nextcustomer != "no":
    amtgiven = 0 
```

对此：

```
while nextcustomer != "no":
    numCustomers += 1
    amtgiven = 0 
```

最后，添加以下内容：

```
print 'total customers:', numCustomers 
```

# tridion - 如何排列功能区项目组？

> ID：14575839
> 
> 赞同：6
> 
> 时间：2013-01-29T04:49:04.553
> 
> 标签：tridion, tridion-2011

我想重新排序主页选项卡下的项目组以及重新排序选项卡。例如：在主页选项卡下，有几个组可用，例如（剪贴板、管理、编辑、发布等）。每个组都有自己的按钮。

我创建了几个 gui 扩展按钮，并将它们组装在一组中。默认情况下，gui 扩展名放在配置文件中给定选项卡的最后。

我想将我的扩展组放在管理或编辑组旁边，并且我想重新排序组。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T09:39:56.783

家庭组下的项目已由产品订购，除了已添加的任何扩展。重新排序它们不是默认情况下属于可用选项的东西。

但是，可以按指定的顺序而不是最后添加您自己的组。为此，您可以`insertbefore`在元素中使用该属性`ext:extension`，大致如下：

```
<ext:ribbontoolbars>
  <ext:add>
    <ext:extension assignid="MyGroupID" name="My Name" pageid="HomePage" insertbefore="PublishGroup">
       ...
    </ext:extension>
  </ext:add>
</ext:extension> 
```

另请参阅[我](http://www.tridiondeveloper.com/ribbon-item-group)关于 Tridion Developer 的文章，其中解释了如何添加功能区项目组。

对所有可用属性有帮助的是参考扩展配置的模式。其中有几个，您可以在`..\Tridion\web\WebUI\Core\Schemas`目录中的 CM 服务器上找到它们。

要找到可以在 insertbefore 属性中使用的 ID，您基本上需要检查 UI 的 HTML。您将看到`div`组成一个组的每个人都有一个 ID，以及您可以使用的那些 ID 名称。这反过来又允许您基本上将扩展组放置在任何现有项目之前。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T15:14:41.897

Bart 是对的，默认情况下无法重新排序。作为一个选项，您可以隐藏现有组，创建新的自定义组（实际上与 CME 的原始组相同）并将它们插入您想要的位置。是的，“insertbefore”属性也适用于组！但请注意，扩展是按照您在配置文件中指定的顺序应用的。例如，如果您按以下顺序有两个功能区组扩展：

```
<ext:ribbontoolbars>
  <ext:add>
    <ext:extension assignid="MyGroupID1" name="My Name" pageid="HomePage" insertbefore="MyGroupID2">
       ...
    </ext:extension>
    <ext:extension assignid="MyGroupID2" name="My Name" pageid="HomePage" insertbefore="PublishGroup">
       ...
    </ext:extension>
  </ext:add>
</ext:extension> 
```

id 为“MyGroupID1”的组将添加到“主页”的末尾，因为组“MyGroupID2”还没有！只需交换这两个扩展名，您就可以解决问题。

# javascript - 如何使用 jquery 在页面加载时触发 Click

> ID：14575852
> 
> 赞同：5
> 
> 时间：2013-01-29T04:50:53.233
> 
> 标签：javascript, jquery, click

我看过很多关于这个的帖子，但没有一个像我想的那样奏效。

```
$(document).ready(function() {
   $('#link_to_content').tigger('click');
}); 
```

加载页面后，我想触发点击。我知道一旦页面加载就打开链接很奇怪，但在这种情况下它是有道理的。

我正在使用 jquery 1.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:55:50.440

应该：

```
$(document).ready(function() {
   $('#link_to_content').trigger('click');
}); 
```

这里的工作示例：http: [//jsfiddle.net/zpnQv/](http://jsfiddle.net/zpnQv/)

编辑：

如果您想点击链接，您可以执行以下操作：

```
HTML:
<a href="http://www.yahoo.com/" id="link_to_content">Click Me</a>

JS:
$(document).ready(function () {

    $("#link_to_content").click(function (e) {
        e.preventDefault();

        var href = $(this).attr("href");

        alert("going to " + href);
        window.location = href;
    });
    $('#link_to_content').trigger('click');
}); 
```

示例：http: [//jsbin.com/omudih/1/](http://jsbin.com/omudih/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T04:56:47.287

jQuery[不会点击链接](https://stackoverflow.com/a/1694803/597122)。我自己的解释是，这有点安全风险，这或多或少是链接答案归结为的原因。

但是，正如链接的答案所述，您可以简单地选择 Javascript`HtmlDOMElement`和`.click()`它。

换句话说：`$('#link_to_content')[0].click();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-29T14:57:53.533

您尝试触发的点击处理程序很可能也通过 $(document).ready() 附加。可能发生的情况是您在附加处理程序之前触发了事件。解决方案是使用 setTimeout：

```
$("document").ready(function() {
setTimeout(function() {
    $("#link_to_content").trigger('click');
},10);
}); 
```

10ms 的延迟将导致函数在所有 $(document).ready() 处理程序被调用后立即运行。

或者

在 .load() 的回调函数中使用触发器；

您也可以使用 .on() 而不是 trigger()

```
$('div_to_load').load("#link_to_content",function(){
$("#link_to_content").trigger('click');
}); 
```

.on() 示例

```
$('div_to_click').on("click",".title",function(){
alert('sdfdsf');
}); 
```

# php - fb邀请不在ie 8工作的朋友

> ID：14575854
> 
> 赞同：0
> 
> 时间：2013-01-29T04:51:12.750
> 
> 标签：php, facebook, internet-explorer-8

我使用 FB API 邀请朋友让用户邀请他们的朋友加入我的应用程序。在 Chrome 和 FF 中一切正常，但在 IE 8 中不行。当我点击它时，在 IE 的底部，将显示“页面错误”。错误将指向 connect.facebook.net 部分。下面是代码；

```
<link rel="stylesheet" type="text/css" href="css/style.css">
</head>
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script src="https://connect.facebook.net/en_US/all.js"></script>

<script>
FB.init({
appId:'xxxxxxxxxxxxxx',
cookie:true,
status:true,
xfbml:true
});

function FacebookInviteFriends()
{
FB.ui({
method: 'apprequests',
message: 'Come Upload Your Own Photo For A Chance To WIN!',
  }, requestCallback);
}

function requestCallback(response)
{
if(response && response.request) {
     // Here, requests have been sent, facebook gives you the request and the array of     recipients
     //console.log(response);

     location.href='final.php';

} else {
alert("You need to invite friends in order to proceed");
     // No requests sent, you can do what you want 
}
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:59:05.813

尝试在 FB.init 中添加域参数，它适用于 ie8

fb init 会喜欢：

```
FB.init({
appId:'xxxxxxxxxxxxxx',
domain:'yourdomain.com',
cookie:true,
status:true,
xfbml:true
}); 
```

# sql - SQL Server 中的“提供表转储”是什么意思

> ID：14575858
> 
> 赞同：1
> 
> 时间：2013-01-29T04:51:38.523
> 
> 标签：sql, sql-server, dump

如何执行表转储以提供给客户？

尝试提供尽可能多的信息：

*   我同时使用 SQL 2005 和 2008
*   现有的数据库很简单，例如 POS、Inventory、Tracking 类型
*   我被要求提供一个表转储（在某个服务器的某个数据库中的某个表）
*   客户没有提供更多信息——只是他们想要一个表转储
*   什么是“表转储”，有哪些格式可用，如何创建一个发送给客户？

如果我错过了更多信息，请告诉我——我真的很喜欢通用类型的表转储生成（如果可能通过 T-SQL，更好:)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:54:37.273

这意味着提供表数据的副本。

通常，这意味着提供表的导出，包括其定义和插入语句，作为可以执行以从头开始重新创建表的脚本。

但是，它也可能意味着二进制和/或专有格式，由数据库实用程序写入/读取。

常见的概念是表的内容可以从转储中恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:09:31.447

我假设您的客户希望文件采用他们可以使用的格式。以我的经验，这可以在 Excel 中以本机方式或 CSV 格式打开。我的第一个建议是与客户澄清要求。

现在，让我们假设他们想要一个 CSV 文件。假设您有 Sql Server Management Studio，您可以使用导入/导出向导将数据库的内容（选择特定表）导出为各种格式，包括平面文件和 Excel。右键单击数据库，选择任务，导出数据并按照步骤操作。

此链接显示如何使用导入/导出向导和 BCP 命令行工具。BCP 命令行工具将是一个更具可重复性和可编写脚本的选项。[http://www.sqlservercurry.com/2011/01/sql-server-export-table-to-csv.html](http://www.sqlservercurry.com/2011/01/sql-server-export-table-to-csv.html)

如果您在服务器上运行或可用 SSIS，您可以使用它来创建一个包，这将是另一个可重用的解决方案。

# java - 在java中发送批量HTTP

> ID：14575860
> 
> 赞同：1
> 
> 时间：2013-01-29T04:51:44.970
> 
> 标签：java, out-of-memory, bulk, executors

该程序用于读取文件，并将每一行作为 http 发送。文件中的每一行都是一个 url。

例如 http://localhost:8080/?a=1&b=2

```
 PoolingClientConnectionManager pcm = new PoolingClientConnectionManager();
    pcm.setMaxTotal(200);
    pcm.setDefaultMaxPerRoute(20);

    HttpClient client = new DefaultHttpClient(pcm);
    ExecutorService executorService = Executors.newFixedThreadPool(10);

    try (BufferedReader bfrDataSource = new BufferedReader(new FileReader(path))) {
        while((line=bfrDataSource.readLine()) != null){
            executorService.execute(new SendTask(line, client));
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }

    executorService.shutdown();
    client.getConnectionManager().shutdown(); 
```

发送任务.java

```
public class SendTask implements Runnable {

private String url;
private final HttpClient client;

public SendTask(String url, HttpClient client){
    this.url = url;
    this.client = client;
}

@Override
public void run() {

    HttpGet httpGet = new HttpGet(url);
    try {
        HttpResponse response = client.execute(httpGet);
        response.getEntity().getContent().close();

    } catch (ClientProtocolException e1) {
        e1.printStackTrace();
    } catch (IOException e1) {
        e1.printStackTrace();
    } finally{
        httpGet.abort();
    }
} 
```

}

当我发送包含 500,000 行的文件时，它可以工作。但随后它发送了 100,000 行，发生了一个错误：java.lang.OutOfMemoryError：超出了 GC 开销限制。

*   如何修改程序以确保它可以发送至少 100 万行？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:07:17.760

Executors.newFixedThreadPool() 创建的线程池由一个无界队列支持，当你向它提交新任务并且没有可用的工作线程时，它会将任务缓存在队列中。这就是你得到OOM异常的原因。

要修复它，您需要使用具有有界工作队列的线程池：

```
ExecutorService executorService = new ThreadPoolExecutor(10, 10, 0, TimeUnit.SECONDS, new SynchronousQueue<Runnable>()); 
```

可以使用各种队列实现，但是在您的情况下， SynchronousQueue 应该就足够了。

此外，您应该在工作人员完成工作后关闭 httpclient：

```
httpclient.getConnectionManager().shutdown(); 
```

检查[httpclient javadoc](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/HttpClient.html)了解详细信息。

# javascript - 使用 JSON 中定义的规则创建 HTML 表单

> ID：14575864
> 
> 赞同：0
> 
> 时间：2013-01-29T04:52:10.860
> 
> 标签：javascript, jquery, html, json

如何根据我在 JSON 中的规则创建我的 HTML 表单？

所以我需要创建一个像 ![在此处输入图像描述](../Images/f628a0acd9a16004f874ad0dcdba7769.png)

我的规则在 JSON 中如下；

```
{
   "modules":[
      {
         "type":"navigation",
         "container":"#header",
         "title":"Top Navigation",
         "attributes":{
            "class":"topNavigation",
            "id":"topNavigation"
         }
      },
      {
         "type":"content",
         "title":"Hi Welcome to mobile development",
         "subtitle":"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
         "container":"#maincontent",
         "attributes":{
            "class":"topContent"
         }
      },
      {
         "type":"form",
         "title":"Registration Form",
         "action":"submit.aspx",
         "name":"registrationform",
         "container":"#maincontent",
         "attributes":{
            "class":"registrationform"
         },
         "fields":[
            {
               "id":"firstname",
               "label":"First Name",
               "name":"fname",
               "type":"text",
               "value":""
            },
            {
               "id":"email",
               "label":"Email",
               "name":"email",
               "type":"text",
               "value":""
            },
            {
               "id":"countries",
               "label":"Country",
               "name":"countries",
               "type":"select",
               "options":[
                  {
                     "value":"",
                     "text":"Select Country"
                  },
                  {
                     "value":"in",
                     "text":"India",
                      "selected":"true"
                  },
                  {
                     "value":"us",
                     "text":"United Stated"

                  },
                  {
                     "value":"uk",
                     "text":"United Kingdom"
                  },
                  {
                     "value":"cn",
                     "text":"Canada"
                  }
               ]
            },
            {
               "id":"submit",
               "name":"submit",
               "type":"submit",
               "value":"Submit"
            }
         ],
         "rules":
            {
                "fname" : "required", 
                "email"     :   {
                                    "required": "true",
                                    "email": "true"
                                }
            },
         "messages":
            {
                "fname" : "Enter your firstname",
                "email" :   {
                                "required": "Please enter a valid email address",
                                "minlength": "Please enter a valid email address"
                            }
            }
      }
   ]
} 
```

虽然我使用普通的 HTML/JS 代码来创建这样的表单，但我不确定如何从 JSON 中解析事物/规则，然后将其应用于 HTML？

我还需要使用 JS 为 HTML 创建 DOM...

请提供我可以查看的任何类似参考资料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:29:30.663

你可以尝试这样的事情：http: [//jsfiddle.net/epk6Z/](http://jsfiddle.net/epk6Z/)

对于小提琴，我使用了一个变量`json`

```
$.each(json.modules, function (i, items) {
  $('<' + items.formElem + '/>').attr({
    "action": items.action,
        "name": items.name,
        "class": items.attributes.class
  }).appendTo('body');
  $('<h1/>').text(items.title).appendTo('.registrationform');
}); 
```

而在 ajax 中，这应该是这样的成功函数：

```
success: function(data){
 $.each(data.modules, function (i, items) {
  $('<' + items.formElem + '/>').attr({
    "action": items.action,
        "name": items.name,
        "class": items.attributes.class
  }).appendTo('body');
  $('<h1/>').text(items.title).appendTo('.registrationform');
 });
} 
```

还有很多其他的更改必须进行，但这只是我所做的最简单的用法。

# json

```
{
"modules": [{
    "nav": "navigation",
        "container": "#header",
        "title": "Top Navigation",
        "attributes": {
        "class": "topNavigation",
            "id": "topNavigation"
    }
}, {
    "page-content": "content",
        "title": "Hi Welcome to mobile development",
        "subtitle": "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
        "container": "#maincontent",
        "attributes": {
        "class": "topContent"
    }
}, {
    "formElem": "form", //<-----------i targeted this
        "title": "Registration Form",
        "action": "submit.aspx",
        "name": "registrationform",
        "container": "#maincontent",
        "attributes": {
        "class": "registrationform"
    }
    ............... 
```

# 笔记：

`Its not a full answer i just appended the form and the title of the form`

# php - 添加了逐行分隔的表单数组

> ID：14575865
> 
> 赞同：1
> 
> 时间：2013-01-29T04:52:13.280
> 
> 标签：php

我有这个文件上传输入的形式：

```
<input type="file"  multiple name="file[]" /> 
```

我有一个脚本，它在表单中多次附加它。

我可以确定每个文件 [] 数组在 php 中属于哪一行吗？

```
<?php 
if(isset($_FILES['file'])=== true){
$files = array ($_FILES['file']);
}
    var_dump($files); 
```

?>

```
array (size=1)
  0 => 
array (size=5)
  'name' => 
    array (size=5)
      0 => string 'IMG_8502 f 5 .jpg' (length=17)
      1 => string 'IMG_8507 f 5 .jpg' (length=17)
      2 => string 'IMG_8508 f 5 .jpg' (length=17)
      3 => string 'IMG_8529 f 5 .jpg' (length=17)
      4 => string 'IMG_8612 fff 5 .jpg' (length=19)
  'type' => 
    array (size=5)
      0 => string 'image/jpeg' (length=10)
      1 => string 'image/jpeg' (length=10)
      2 => string 'image/jpeg' (length=10)
      3 => string 'image/jpeg' (length=10)
      4 => string 'image/jpeg' (length=10)
  'tmp_name' => 
    array (size=5)
      0 => string 'C:\wamp\tmp\phpE892.tmp' (length=23)
      1 => string 'C:\wamp\tmp\phpE8D1.tmp' (length=23)
      2 => string 'C:\wamp\tmp\phpE911.tmp' (length=23)
      3 => string 'C:\wamp\tmp\phpE950.tmp' (length=23)
      4 => string 'C:\wamp\tmp\phpE99F.tmp' (length=23)
  'error' => 
    array (size=5)
      0 => int 0
      1 => int 0
      2 => int 0
      3 => int 0
      4 => int 0
  'size' => 
    array (size=5)
      0 => int 2776165
      1 => int 2380025
      2 => int 2456713
      3 => int 2585779
      4 => int 1770128 
```

我想将每组文件上传到自己的数组中。换句话说，名称 0-4 设置为数组 0，然后将下一行中上传的下一组文件设置为数组 1，依此类推。所以我可以将每组文件及其相关文本存储在表单中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:31:15.247

```
<?php
if(isset($_FILES['userfile'])=== true){
  $files = array ($_FILES['userfile']);
  echo  '<pre>';
  print_r($_FILES['userfile']);
  echo  '</pre>';
}
?>

<form action="" method="post" enctype="multipart/form-data">
  Send these files:<br />
    set one:<br>
  <input name="userfile[0][]" type="file" /><br />
  <input name="userfile[0][]" type="file" /><br />
  set two:<br>
  <input name="userfile[1][]" type="file" /><br />
  <input name="userfile[1][]" type="file" /><br />

  <input type="submit" value="Send files" />
</form> 
```

测试输出：

```
Array
(
    [name] => Array
        (
            [0] => Array
                (
                    [0] => Chrysanthemum.jpg
                    [1] => Desert.jpg
                    [2] => Hydrangeas.jpg
                    [3] => Jellyfish.jpg
                )

            [1] => Array
                (
                    [0] => Koala.jpg
                    [1] => Lighthouse.jpg
                    [2] => Penguins.jpg
                    [3] => Tulips.jpg
                )

        )

    [type] => Array
        (
            [0] => Array
                (
                    [0] => image/jpeg
                    [1] => image/jpeg
                    [2] => image/jpeg
                    [3] => image/jpeg
                )

            [1] => Array
                (
                    [0] => image/jpeg
                    [1] => image/jpeg
                    [2] => image/jpeg
                    [3] => image/jpeg
                )

        )

    [tmp_name] => Array
        (
            [0] => Array
                (
                    [0] => C:\xampp\tmp\php4095.tmp
                    [1] => C:\xampp\tmp\php40B5.tmp
                    [2] => C:\xampp\tmp\php40C6.tmp
                    [3] => C:\xampp\tmp\php40C7.tmp
                )

            [1] => Array
                (
                    [0] => C:\xampp\tmp\php40D7.tmp
                    [1] => C:\xampp\tmp\php40D8.tmp
                    [2] => C:\xampp\tmp\php40D9.tmp
                    [3] => C:\xampp\tmp\php40EA.tmp
                )

        )

    [error] => Array
        (
            [0] => Array
                (
                    [0] => 0
                    [1] => 0
                    [2] => 0
                    [3] => 0
                )

            [1] => Array
                (
                    [0] => 0
                    [1] => 0
                    [2] => 0
                    [3] => 0
                )

        )

    [size] => Array
        (
            [0] => Array
                (
                    [0] => 879394
                    [1] => 845941
                    [2] => 595284
                    [3] => 775702
                )

            [1] => Array
                (
                    [0] => 780831
                    [1] => 561276
                    [2] => 777835
                    [3] => 620888
                )

        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:32:02.547

试试这个：

```
//This function rearranges the $_FILES array
function rearrangeArray() {
    $newArray = array();

    foreach( $_FILES[ 'file' ][ 'name' ] as $key => $value ) {
        $newArray[ $key ][ 'name' ] = $_FILES[ 'file' ][ 'name' ][ $key ];
        $newArray[ $key ][ 'type' ] = $_FILES[ 'file' ][ 'type' ][ $key ];
        $newArray[ $key ][ 'tmp_name' ] = $_FILES[ 'file' ][ 'tmp_name' ][ $key ];
        $newArray[ $key ][ 'error' ] = $_FILES[ 'file' ][ 'error' ][ $key ];
        $newArray[ $key ][ 'size' ] = $_FILES[ 'file' ][ 'size' ][ $key ];
    }

    $_FILES[ 'file' ] = $newArray;
}

if( isset( $_FILES[ 'file' ] ) ) {
    print_r($_FILES);
    rearrangeArray();
    print_r($_FILES);
} 
```

**调用函数之前的 $_FILES**

```
Array
(
    [file] => Array
        (
            [name] => Array
                (
                    [0] => Desert.jpg
                    [1] => Hydrangeas.jpg
                )

            [type] => Array
                (
                    [0] => image/jpeg
                    [1] => image/jpeg
                )

            [tmp_name] => Array
                (
                    [0] => C:\xampp\tmp\phpC349.tmp
                    [1] => C:\xampp\tmp\phpC398.tmp
                )

            [error] => Array
                (
                    [0] => 0
                    [1] => 0
                )

            [size] => Array
                (
                    [0] => 845941
                    [1] => 595284
                )

        )

) 
```

**调用函数后的 $_FILES**

```
Array
(
    [file] => Array
        (
            [0] => Array
                (
                    [name] => Desert.jpg
                    [type] => image/jpeg
                    [tmp_name] => C:\xampp\tmp\phpC349.tmp
                    [error] => 0
                    [size] => 845941
                )

            [1] => Array
                (
                    [name] => Hydrangeas.jpg
                    [type] => image/jpeg
                    [tmp_name] => C:\xampp\tmp\phpC398.tmp
                    [error] => 0
                    [size] => 595284
                )

        )

) 
```

希望能帮助到你。

# ruby - 使用水龙头将数据传输到 postgreSQL 不起作用

> ID：14575866
> 
> 赞同：1
> 
> 时间：2013-01-29T04:52:15.647
> 
> 标签：ruby, taps

我一直在关注[Railscasts](http://railscasts.com/episodes/342-migrating-to-postgresql?view=asciicast)指南，将我的数据库从 sqlite 转换为 postgreSQl。

我已经能够成功

*   安装 postgres
*   创建和配置数据库
*   使用 pgAdminIII 连接到它
*   用于`rails db create`创建数据库
*   安装水龙头
*   启动水龙头服务器

但是，当我运行 pull 命令进行传输时，我收到以下错误消息

```
Failed to connect to database:
  NameError -> uninitialized constant Sequel::Postgres::PGError 
```

作为参考，这里是我用来尝试拉动的命令

```
taps pull postgres://myuser:mypass@127.0.0.1:5432/mydb_dev http://pynn:secret@localhost:5000 
```

我也尝试过`localhost`而不是`127.0.0.1:5432`

显然我的设置有问题，但我无法从提供的错误消息中弄清楚它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T01:07:13.037

尝试更换：

```
 gem "pg" 
```

在 Gemfile 中：

```
 gem "sequel_pg", :require=>'sequel' 
```

它是 PG gem 的更快版本，尤其适用于 Sequel，所以无论如何我更喜欢它，它可能有助于避免命名空间冲突[，这可能是一个](https://stackoverflow.com/a/4595970/335847).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:47:42.133

您的 Gemfile 中有列出的宝石吗？我相信您需要在 Gemfile 中添加 gem "pg" 并重新捆绑。

# android - 处理String数组和Spinner的正确方法

> ID：14575867
> 
> 赞同：0
> 
> 时间：2013-01-29T04:52:15.793
> 
> 标签：android

我了解如何从资源文件 String.xml 中的字符串数组初始化微调器。但是，我的问题始终是当您从下拉菜单中选择某些内容时如何正确链接事物。例如，假设您的字符串数组看起来像这样

电 气 其他

所以在 onItemSelected 监听器中，如果我想知道点击了什么来执行某个操作，那么我应该检查 pos 并对其采取行动（假设我知道我的字符串数组中的位置，如下所示

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        switch(pos){
            case 1: // Electricity

            break;
            case 2: //Gas

            break;
                    .
                    .
                    .
        }       
    } 
```

或者我应该像这样进行 Sting 比较：

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        if(parent.getSelectedItemAtPos(pos).toString().equal("Electricity"){

            } else if (......){
            }
            .
        .
    } 
```

first 的优点是它更干净，但问题是我必须确保当我更改资源文件时，我会始终跟踪更新索引。第二个更安全，但进行字符串比较似乎“罗嗦”。

我不是，也许我错过了一个最佳解决方案，或者我上面的建议就可以了？

请帮助专家，我宁愿第一次做正确的事情，因为我的应用程序中有很多微调器:(

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:50:28.570

我认为这两种方法都很好。这取决于您应该选择哪一种

正如你所说，第一个提供了更多的可读性，即使数量增加了`cases`

但是在第二种方法中，如果只有 1-2 个条件来检查它看起来很好，因为条件增加它们的代码可能看起来很乱

如果您关心可读性，请使用第一种方法，否则您可以根据需要进行选择

**注意**：如果我们比较两种方法的性能，我认为它们之间没有太大区别（参考以下链接 { [**link1**](https://stackoverflow.com/questions/2086529/what-is-the-relative-performance-difference-of-if-else-versus-switch-statement-i)，[**link2**](http://www.ashishpaliwal.com/blog/2009/08/if-else-vs-switch-%E2%80%93-which-is-better/) }）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:55:56.520

第二个很好，但有点增强。声明一个本地字符串变量并存储`Spinner`.

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

        String selectedItem = parent.getSelectedItemAtPos(pos).toString();

        if(selectedItem.equals("Electricity")) {

        } else if (selectedItem.equals("Dummy")){
            // ....    
        }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T06:00:04.917

在这两者之间，毫无疑问是第一种选择。一方面，它是一个 switch 语句，因此它可以立即跳转到正确的句柄，而对于第二个，你有一个线性的比较线，直到你到达你想要的那个。其次，您在第二个中使用字符串比较，这比仅进行整数比较更慢且更不安全。如果您计划对其进行大量更改，则需要做更多的工作，但我认为这是两者中更好的方法，就个人而言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T06:03:09.967

如果您通过资源文件第一种方法在微调器中设置条目会更好，因为在资源文件中声明字符串时，您将知道哪个字符串在哪个索引中。

> android:entries="@array/..."

但是如果您使用适配器来设置条目（您从服务器或其他任何地方接收），那么最好采用第二种方法。因为在这种情况下，字符串的索引将是不确定的。

> mSpinner.setAdapter(...)

# c# - 将 XNA Texture2D 旋转到另一个 Texture2D

> ID：14575883
> 
> 赞同：0
> 
> 时间：2013-01-29T04:54:07.217
> 
> 标签：c#, image, xna, rotation

我知道 Texture2D 可以在 Draw() 过程中旋转，但我要问的是有点不同。在绘制之前我需要旋转的 Texture2D，并将其存储到另一个 Texture2D 中以供进一步操作。类似于以下内容：

```
 Texture2D rotated = getRotatedTexure(originalTexture); 
```

然而，我什至不知道从哪里开始。我是否将我的纹理转换为图像并在那里完成我的工作？任何建议将不胜感激。

造成这种情况的原因很长而且很复杂，但基本上我正在尝试构建一个旋转动画引擎（AKA：“骨骼动画”、“骨骼动画”或“剪切动画”）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:06:38.380

试试这个：[XNA 旋转纹理 2D](https://stackoverflow.com/questions/7466418/xna-rotate-texture-2d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T10:06:47.887

您可以做的是定义一个 RenderTarget2D 并在其中绘制旋转的纹理。例子：

```
RenderTarget2D rotated_texture = new RenderTarget2D(GraphicsDevice, texture_width, texture_height);

GraphicsDevice.SetRenderTarget(rotated_texture);

spriteBatch.Begin();
//Draw the texture with rotation
spriteBatch.End();

GraphicsDevice.SetRenderTarget(null); //Reset to screen drawing 
```

如果你想在屏幕上画画，`rotated texture`你可以这样做：

```
//GraphicsDevice.SetRenderTarget(null); //Considering this done

spriteBatch.Begin();
spriteBatch.Draw(rotated_texture, vector_position, Color.White);
spriteBatch.End(); 
```

# android - 为不同的屏幕分辨率设计 UI

> ID：14575884
> 
> 赞同：0
> 
> 时间：2013-01-29T04:54:09.977
> 
> 标签：android

我正在为应用程序进行 UI 设计，我已将所有图像包含在 hdpi、ldpi 和 mdpi 可绘制文件夹中，它适用于小屏幕分辨率，但对于大屏幕来说图像模糊，我的意思是分辨率为 480X800 ,我该如何纠正它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:00:57.667

有特定的 Android API 调用可以在运行时告诉您手机的密度和（小/大/正常）屏幕尺寸。但是，作为开发人员，我们根本不需要担心个别手机。我们需要做的就是在 apk 中有 ldpi/mdpi/hdpi 资产和小/正常/大布局。Android 在内部处理一切。

不要忘记深入了解 Android 如何确定要使用的资产和[类似这样](http://android-developers.blogspot.in/2011/07/new-tools-for-managing-screen-sizes.html)的别名。

定义是：

超大屏幕至少为 960dp x 720dp。

大屏幕至少为 640dp x 480dp。

普通屏幕至少为 470dp x 320dp。

小屏幕至少为 426dp x 320dp。（Android 目前不支持比这更小的屏幕。）

以下是更多关于如何在真实屏幕上工作的示例：

QVGA 屏幕为 320x240 ldpi。转换为 mdpi（4/3 比例因子）给我们 426dp x 320dp；这与上面小屏幕桶的最小尺寸相匹配。

Xoom 是一款典型的 10 英寸平板电脑，具有 1280x800 mdpi 屏幕。这会将其放入 xlarge 屏幕存储桶中。

Dell Streak 是 800x480 mdpi 屏幕。这会将其放入大号桶的底部。

典型的 7 英寸平板电脑具有 1024x600 mdpi 屏幕。这也算大屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:00:39.623

您必须根据每个文件夹的大小要求调整每个可绘制文件夹中的图像大小或分辨率。将图像放入每个可绘制文件夹并不意味着它会自动调整。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T05:00:33.110

首先在各自的文件夹中添加适当的分辨率，即 32X32 48X48 64X64 128X128 和 256X256，如果您仍然得到模糊的图像，则将可绘制文件夹中的图片分辨率更改为高分辨率图像..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T05:03:23.617

您还需要检查图像密度。查看此链接中的表 1，您需要按照他们所说的那样制作图形。

> xhdpi ：超高密度 (xhdpi) 屏幕 (~320dpi) 的资源。

[屏幕支持](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T05:03:35.290

您必须在 xhdpi 文件夹中包含 ~320 dpi 图像。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T05:26:25.807

让我们看一些 XML。您是否正确使用“dip”作为尺寸？当您应该使用“wrap_content”时，您是否使用了“match_parent”？很难确定没有看到你正在尝试什么？

# ruby - 我怎样才能让这个逻辑更红一点

> ID：14575886
> 
> 赞同：0
> 
> 时间：2013-01-29T04:54:21.307
> 
> 标签：ruby

我怎么能压缩这个逻辑？

```
an_array = some_list.select do |item|                                  
  include_item = true                                                        
  if a_boolean                                                                  
    include_item = a_method?(item)                                     
  end                                                                        
  include_item                                                               
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T04:56:42.130

```
an_array = some_list.select{|item| !a_boolean || a_method?(item)} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T05:00:50.897

我敦促您发布一些更明智的示例；元变量会导致阴暗面。在你的情况下，在你的情况下，如果`a_boolean`是`false`，代码基本上评估`an_array = some_list.clone`，但在慢动作。因此，写起来会更明智

```
an_array =
  if a_boolean
    some_list.select { |item| a_method?(item) }
  else
    some_list.clone
  end 
```

而且我仍然不知道它是否真的很好，因为使用过度通用的代码完全无法理解您的意图。

编辑：添加`.clone`.

EDIT2：如评论中所述，meagar 和我蜿蜒的大脑最终到达了相同的地方：

```
an_array = some_list.clone
an_array.select! { |item| a_method?(item) } if a_boolean 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T04:56:36.777

```
an_array = some_list.select { |item| a_boolean ? a_method?(item) : true } 
```

# java - Java RMI 部署

> ID：14575891
> 
> 赞同：0
> 
> 时间：2013-01-29T04:54:30.237
> 
> 标签：java, model-view-controller, tomcat, glassfish, 3-tier

我正在尝试开发一个 3 层架构的分布式 Java 应用程序。

1.  数据库服务器
2.  应用服务器
3.  瘦客户端 Swing 应用程序

我以前没有开发过这种类型的应用程序。我正在考虑使用 java RMI 在应用程序服务器和瘦客户端应用程序之间进行通信。另外我将使用 Hibernate 框架作为 ORM 工具。

我的问题是，部署这样的应用程序需要哪些组件。

1.  我是否需要某种服务器，例如 Tomcat 或 Glassfish？
2.  如何在这样的应用程序中实现 MVC 模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:13:40.997

相当大的问题，没有一个真正的答案。您确实需要确定正在构建的应用程序的需求是什么。

就 RMI 而言，您需要一个提供 RMI 主机的服务器进程。Glassfish 为您提供了一个。但是，如果您使用 glassfish，您可能希望使用 JPA / EJB3 作为持久层。这只是甲骨文为开源世界重新标记的 TopLink。

我不确定 Tomcat 是否带有 RMI 层，尽管自从我愤怒地为 Tomcat 开发以来已经有一段时间了。它首先是一个 servlet 引擎。如果您正在查看客户端和服务器之间的 REST 接口，那将是一个不错的选择（尽管 Glassfish 也提供了一个 servlet 引擎）。

如果您真的想使用 Hibernate 并且希望 RMI 作为客户端和服务器之间的传输，请不要低估 Spring。它将具有 RMI 服务器引擎，您可以在其中定义调用 Hibernate 的 Spring bean。不需要应用程序服务器（除了 Spring 提供的。

就 MVC 而言，从客户端的角度来看，您让 Swing 处理视图，而本机 Java 实现模型和控制器。在这种情况下，模型将是由 RMI 服务器组件公开的服务提供的 DTO。我认为Hibernate将仅限于Server进程，并且Services中几乎没有View。客户端代码中的模型将是 DTO 和将 RPC 发送到服务的周围框架。

希望这可以帮助

# java - Spring批处理中平面文件中的空格问题

> ID：14575895
> 
> 赞同：2
> 
> 时间：2013-01-29T04:54:50.953
> 
> 标签：java, spring-batch

我正在使用 Spring 批处理框架来解析一个固定长度的平面文件，使用`FlatFileItemReader`lineMapper**和**`DefaultLineMapper`fieldSetMapper**作为**PassThroughFieldSetMapper和**lineTokenizer**作为 PatternMatchingCompositeLineTokenizer。

但是我在处理方面遇到了一些问题，因为文件中的值可能有空格。**FieldSet**在删除任何前导或尾随空格后给我值。出于某种验证目的，我想要带有空格的值（如果有）。

我是 Spring Batch 框架的新手。有人可以让我知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-10T11:28:41.973

我知道很久以前有人问过，但如果有人会遇到同样的问题：

问题在于 FieldSet 类，因为当您调用`fieldSet.readString()`它时，它将调用`readAndTrim()`方法并返回修剪后的字符串。要保留保留空格的字符串，您应该调用`fieldSet.readRawString()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-01T11:34:03.240

我也只想回答这个问题：

您可以创建自己的实现`FieldMapper`并将其自动连接到您的`lineMapper.setFieldSetMapper()`

```
@Component
class CustomFieldSetMapper implements FieldSetMapper<Partnership>{

    @Override
    public Partnership mapFieldSet(FieldSet fieldSet) throws BindException {

        return new Partnership(
                partnerCrmId:fieldSet.readString('partnerCrmId'),
                partnerType: fieldSet.readString('partnerType'),
                customerCrmId: fieldSet.readString('customerCrmId'),
                startDate: fieldSet.readString('startDate'),
                endDate: fieldSet.readString('endDate'),
                clientId: fieldSet.readRawString('clientId'),
                status: fieldSet.readString('status'),
                type: fieldSet.readString('type'),
                providerCode: fieldSet.readString('providerCode'),
                lastModifiedDate: fieldSet.readString('lastModifiedDate')
        )

    }
} 
```

# java - 带有 JSF 的 Eclipse xhtml 自动完成

> ID：14575896
> 
> 赞同：2
> 
> 时间：2013-01-29T04:55:04.210
> 
> 标签：java, eclipse, jsf-2

最近我在一个 JSF 项目中工作并且弹出一个弹出窗口（大声笑），我的无知告诉我忽略它并检查“不要再问”（没有读过它，现在我后悔了......有没有办法让我小弹出窗口再次出现？），现在我不能在 xhtml 文件中使用自动完成功能，包括 html 标签和 bean 标签。

我几乎尝试了所有方法：

*   窗口 > 首选项 > 常规 > 内容类型 > 文本 > JSP > 添加 (xhtml) -> 完成，仍然无法正常工作。
*   右键单击项目-> 首选项-> 项目构面-> 单击“JavaServer Faces”，版本很可能是 2.0。-> 也做了，还是不行。

我还没有做的是：[http ://www.mkyong.com/jsf2/eclipse-ide-xhtml-code-assist-is-not-working-for-jsf-tag/](http://www.mkyong.com/jsf2/eclipse-ide-xhtml-code-assist-is-not-working-for-jsf-tag/)

因为我没有得到“进一步的配置可用......”链接。

我相信我将 Eclipse Indigo Service Release 2 与 JSF 2.1 一起使用。

此外，我还有其他项目，其中自动完成功能正常工作。

将不胜感激任何帮助，因为这让我发疯。

提前致谢！

编辑：这些是我的 xhtml 标头：

```
template="../../template/template-operaciones.xhtml"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:a4j="http://richfaces.org/a4j"
xmlns:rich="http://richfaces.org/rich" 
```

另外，刚刚在eclipse中尝试过，在自动完成工作的项目中，就像我按下“。”一样 带有文本“构建 JSF 或 JSP 模型”的进度条的弹出窗口......如果我没记错的话，那是我之前忽略的弹出窗口，关于我没有在项目中构建的 JSF 模型，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:12:26.330

遇到了同样的问题并尝试了同样的方法，但没有帮助。这为我解决了：

转到项目属性> Java构建路径>添加库>选择用户库>用户库>新建>（给它你想要的任何名称）>添加外部JAR>添加你想要的JAR（如primefaces-3.5.jar）

# regex - 无法在 JMeter 中使用正则表达式提取值

> ID：14575900
> 
> 赞同：0
> 
> 时间：2013-01-29T04:55:21.867
> 
> 标签：regex, xpath, jmeter

我无法在 JMeter 中同时使用正则表达式和 xPath 来提取值

```
<input id="capture_signin_transactionId_u13jjd6w9y1h167bhu5ut4fhbht0kwebuvqi6f0z" class="capture_transactionId_u13jjd6w9y1h167bhu5ut4fhbht0kwebuvqi6f0z" type="hidden" name="capture_transactionId" value="u13jjd6w9y1h167bhu5ut4fhbht0kwebuvqi6f0z" data-capturefield="undefined"> 
```

使用的正则表达式提取器：

```
Reference Name - capture_transactionId
name="capture_transactionId" value="(\w+{40}?)"
Template $1$
Match 1
Default Value - n/a 
```

使用的 XPath 提取器：

```
Reference Name - capture_transactionId
xPath Query - //input[@type="hidden"][@name="capture_transactionId"]/@value 
```

但我无法捕捉价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:58:43.240

由于您使用 XPath Extractor 来解析 HTML（不是 XML）响应，因此请确保选中**Use Tidy（容错解析器）**选项（在[XPath Extractor 的控制面板](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)中）。

XPath 查询看起来正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T13:32:37.763

您需要按如下方式更新正则表达式提取器：

```
Reference Name - capture_transactionId
name="capture_transactionId" value="(.*?)"
Template $1$
Match 1
Default Value - n/a 
```

# xml - 当所有节点都显示为属性时，如何使用 xslt 过滤数据？

> ID：14575906
> 
> 赞同：1
> 
> 时间：2013-01-29T04:56:27.420
> 
> 标签：xml, xslt

我对 xsl 完全陌生。我正在尝试过滤此 xml 中的数据。

```
<SectorWeightings Currency="xxx">
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="A B||16.324500000000" Date="8/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="C||16.744400000000" Date="7/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="C S||10.177400000000" Date="8/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="C S||8.8950000000000" Date="7/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="E||12.841600000000" Date="8/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="E||13.551700000000" Date="7/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="Fi S||14.157900000000" Date="8/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="Fi S||15.221200000000" Date="7/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="H Care||12.508900000000" Date="7/31/2011" />
      <SectorWeightingsEntry Type="Sector Name||Sector Weight (%)" Value="H Care||13.198200000000" Date="8/31/2011" />
 </SectorWeightings> 
```

这是我用来过滤数据的代码

```
 <xsl:for-each select="FundPricePerf/Group[@Name=nds']/SubGroup[@Name='S']/Fund[@FundCode='xx']/SectorWeightings">
        <tr> 
         <td>     <xsl:value-of select="SectorWeightingsEntry[@Type='Sector Name||Sector Weight (%)']/@Value"/>   </td> 
        </tr>
    </xsl:for-each> 
```

上面的代码将仅填充 AB||16.324500000000 的第一行。

如何打印整个列表？

更新

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>

<html>
<body>
<h2> zzzzzzzzz  </h2>

    <table style="width:50%;font-size:12px;" cellspacing="0" cellpadding="0">

    <tr style="width:50%; text-align:left;background-color:E6F1F9;">  

    <th>    xxxxx   </th> 
    <th>    yyyyy     </th>      
    </tr> 

    <xsl:apply-templates 
      select="FundPricePerf/Group[@Name='xxxxx']/SubGroup[@Name='S']/Fund[@FundCode='vv']/SectorWeightings/SectorWeightingsEntry[@Type='Sector Name||Sector Weight (%)']"/>

<xsl:template match="SectorWeightingsEntry">
  <tr>
    <td>
      <xsl:value-of select="@Value"/>
    </td>
  </tr>
</xsl:template>

    </table>

</body>

</html>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T05:45:06.587

XSLT 的主要部分需要放在它自己的模板中，并且`SectorWeightingsEntry`s 的模板需要与它分开，如下所示：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">

  <xsl:template match="/">
    <html>
      <body>
        <h2> zzzzzzzzz  </h2>

        <table style="width:50%;font-size:12px;" cellspacing="0" cellpadding="0">
          <tr style="width:50%; text-align:left;background-color:E6F1F9;">
            <th>    xxxxx   </th>
            <th>    yyyyy     </th>
          </tr>

          <xsl:apply-templates
            select="FundPricePerf/Group[@Name='xxxxx']/SubGroup[@Name='S']
                    /Fund[@FundCode='vv']/SectorWeightings
                    /SectorWeightingsEntry[@Type='Sector Name||Sector Weight (%)']">
            <xsl:sort select="substring-after('||', @Value)" data-type="number"
                      order="descending" />
          </xsl:apply-templates>
        </table>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="SectorWeightingsEntry">
   <xsl:if test="position() &lt;= 5">
    <tr>
      <td>
        <xsl:value-of select="format-number(substring-after(@Value, '||'), '#.#')"/>
      </td>
    </tr>
   </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

# java - CXF 使用的类中的公共方法上的 @Transactional 问题

> ID：14575907
> 
> 赞同：4
> 
> 时间：2013-01-29T04:56:31.477
> 
> 标签：java, spring, cxf, spring-transactions

我正在混合 spring-data 和 CXF 来创建一个创建 neo4j 节点的 RESTful 端点。我的结构是一组接口，它定义了面向公众的方法，我的实现有几个私有方法，由我的公共方法调用。

当我创建一个公共方法时，我遇到了代理转换问题。

```
Caused by: java.lang.IllegalArgumentException: Can not set javax.ws.rs.core.HttpHeaders field com.neuralsandbox.service.PublicCallsPublic.httpHeaders to $Proxy37
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:146)
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:150)
at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:37)
at sun.reflect.UnsafeObjectFieldAccessorImpl.set(UnsafeObjectFieldAccessorImpl.java:57)
at java.lang.reflect.Field.set(Field.java:657)
at org.apache.cxf.jaxrs.utils.InjectionUtils.injectFieldValue(InjectionUtils.java:170)
at org.apache.cxf.jaxrs.utils.InjectionUtils.injectContextProxiesAndApplication(InjectionUtils.java:921)
at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.injectContexts(JAXRSServerFactoryBean.java:365)
at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.updateClassResourceProviders(JAXRSServerFactoryBean.java:391)
at org.apache.cxf.jaxrs.JAXRSServerFactoryBean.create(JAXRSServerFactoryBean.java:151)
... 29 more 
```

如果我的 spring-tx`<tx:annotation-driven proxy-target-class="true" />`我得到以下异常：

```
Caused by: org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class $Proxy32]: Common causes of this problem include using a final class or a non-visible class; nested exception is java.lang.IllegalArgumentException: Cannot subclass final class class $Proxy32
at org.springframework.aop.framework.Cglib2AopProxy.getProxy(Cglib2AopProxy.java:213)
at org.springframework.aop.framework.ProxyFactory.getProxy(ProxyFactory.java:112)
at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.createProxy(AbstractAutoProxyCreator.java:476)
at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:362)
at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:322)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:407)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.postProcessObjectFromFactoryBean(AbstractAutowireCapableBeanFactory.java:1598)
at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:162)
... 41 more
Caused by: java.lang.IllegalArgumentException: Cannot subclass final class class $Proxy32
    at net.sf.cglib.proxy.Enhancer.generateClass(Enhancer.java:446)
    at net.sf.cglib.transform.TransformingClassGenerator.generateClass(TransformingClassGenerator.java:33)
    at net.sf.cglib.core.DefaultGeneratorStrategy.generate(DefaultGeneratorStrategy.java:25)
    at net.sf.cglib.core.AbstractClassGenerator.create(AbstractClassGenerator.java:216)
    at net.sf.cglib.proxy.Enhancer.createHelper(Enhancer.java:377)
    at net.sf.cglib.proxy.Enhancer.create(Enhancer.java:285)
    at org.springframework.aop.framework.Cglib2AopProxy.getProxy(Cglib2AopProxy.java:201)
    ... 48 more 
```

我有一个 GitHub 项目，其中包含有问题的代码：

[https://github.com/NicholasAStuart/broken-spring-neo4j-cxf.git](https://github.com/NicholasAStuart/broken-spring-neo4j-cxf.git)

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:25:06.510

是`@Transactional`一个具体的类吗？如果是这样，我建议使用`proxy-target-class="true"`适用于具体类的 as 。

请注意，如果使用 CGLIB，类不能是最终的、可见的并且具有默认（无参数）构造函数。

# django - Django 查询集在生产中没有正确排序

> ID：14575910
> 
> 赞同：1
> 
> 时间：2013-01-29T04:56:34.877
> 
> 标签：django, django-models, sql-order-by, webfaction

我有一个模型：

# 模型.py

```
class Person(models.Model):
    name = models.CharField(...)

    def __unicode__(self):
        return u'%s' % self.name

class Entity(models.Model):
    client = models.ForeignKey(Person) 
```

在我看来，我只想获取所有实体并按客户名称对它们进行排序：

# 视图.py

```
def all_entities(request):
    entities = Entity.objects.all().order_by('client')
    return render(request, 'template.html', {'entities': entities}) 
```

所以我的模板只打印所有实体。

# 模板.html

```
<html>
{% for entity on entities %}
 {{ entity.client }}}
{% endfor %}
</html> 
```

发生的情况是，在我的开发 PC 中一切正常，我得到了一个有序的客户端名称列表，我无法理解的是，在我的 webfaction.com 上的生产服务器上，结果不像在我的本地环境中那样按字母顺序排列。

我也在外壳上对其进行了测试，结果是一样的，不知何故 order_by('client') 在我的 PC 上返回按字母顺序排序的列表，但在生产中没有按字母顺序排序。

注意：两个环境都有 Postgres 并使用相同的后端。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T05:57:01.433

好吧，我不会试图弄清楚*为什么*它似乎对你有用，但我不禁注意到，如果直接 order to order by ，ORM 不会知道要 order by**哪个字段**`client`。

可能只是按PK排序。

```
entities = Entity.objects.all().order_by('client__name') 
#                                               ^^^^^^ specify sort field
#                    I am addicted to carets 
```

# python - Django-新手连接模型

> ID：14575914
> 
> 赞同：0
> 
> 时间：2013-01-29T04:56:46.217
> 
> 标签：python, django

所以首先让我描述一下我正在尝试做的事情。我有一个用户模型、一个用户配置文件模型和一个工作模型。我需要能够列出与用户关联的所有工作，并且我需要显示哪个用户与工作相关联。这就是我的想法，如果我的方向正确，请告诉我。

```
class Job(models.Model):
    title=models.CharField(max_length=30,blank=False)
    description=models.TextField(blank=False)
     ...........................

class UsersJob(models.Model):
    user=models.OneToOneField('User')
    jobs=models.Foreignkey('Job') 
```

将作业连接到 AUTH_PROFILE_MODULE 下定义的用户对象或用户配置文件会更好吗？我也朝着正确的方向努力，我正在努力完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:37:23.063

这完全取决于您需要的关系类型。

*   如果每个用户有 1 个作业，那么一定要在 Job 或 User 上放置一个指向其目标的字段。
*   如果存在多作业到单用户的关系，则将外键添加到作业模型。
*   如果存在多用户关系，请在其中添加一个 m2m 字段。
*   如果有多个用户与单个工作的关系，请将外键放在您的用户模型上（每个用户最多有 1 个工作）。

`AUTH_PROFILE_MODULE`?

在大多数情况下，您不希望将任何 FK 指向此 Profile 表，因为 django 与 User 模型非常紧密地工作，并且您更有可能访问用户列表，而不是从中查询 Jobs 或任何其他关系的 UserProfiles。

# javascript - 单击时创建一个“盒子网页”

> ID：14575917
> 
> 赞同：0
> 
> 时间：2013-01-29T04:57:01.877
> 
> 标签：javascript, jquery, html, css

我正在尝试完成一些可能相对简单的事情，但我不知道我会怎么称呼它（如果它有一个特定的名称），因此我的搜索被证明是无用的。

我想要完成的事情很简单：我有一个基于 Masonry jquery 插件的页面（类似于[http://designshack.net/tutorialexamples/masonry/demos/masonry.html](http://designshack.net/tutorialexamples/masonry/demos/masonry.html)）。我想做的是，当我单击特定图片时，它会创建一个“框”，该“框”会填满屏幕的一部分，并且可以包含另一个网页（用于描述图片），同时淡出大部分背景。然后，当我在框外单击时，它会返回到我的所有图片。

我以前见过这个，我相信其他人都有，但是对于我的生活，我不记得有一个例子可以看或如何最好地做到这一点。我对 javascript 或 jquery 没有太多经验（这就是我问这个的原因），但是任何能帮助我指出正确方向的帮助，无论*是*使用 javascript 还是 html/css，都会很棒。

如果有人确实了解我所描述的内容并且可以更好地解释它，那么非常欢迎您进行编辑..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T22:25:06.813

您需要的是模态窗口。

我知道 twitter 引导程序为此构建了一个非常好的框架：

[http://getbootstrap.com/javascript/#modals](http://getbootstrap.com/javascript/#modals)

如果您不直接使用引导程序，您也许可以挑选出您需要的东西。

# java - 抽象超类的子类的方法能否返回超类返回类型的超类？

> ID：14575919
> 
> 赞同：2
> 
> 时间：2013-01-29T04:57:10.123
> 
> 标签：java, interface, subclass, abstract, superclass

我有一个实现接口的抽象超类：

```
public abstract class FooMatrix implements Matrix {
    public Vector multiply(Vector vec) {
        // Code for Matrix * Vector
    }
}

public interface Matrix {
    public Vector multiply(Vector vec);
} 
```

然后我有一个子类，它扩展了超类并实现了第二个接口，该接口表示第一个接口表示的数学类的数学子类：

```
public interface Vector {
    // Methods
}

public class FooVector extends FooMatrix implements Vector {
    @Override
    public Matrix multiply(Vector rightVec) {
        // Code for Vector * Vector
    }
} 
```

所以子类返回抽象超类的返回类型的超类。这不起作用，我想知道如何使它起作用。

在数学中，向量是矩阵的子类。一般来说，一个矩阵乘以一个矩阵会产生另一个矩阵。如果第二个矩阵是向量，则结果是向量。如果两个矩阵都是向量，则结果分别是列向量乘以行向量或行向量乘以列向量的矩阵或标量。这假设尺寸是兼容的。

我想以一种尊重数学的方式用 Java 类来表示这种行为，并尽可能给出最具体的返回类型。换句话说，我想要`fooMatrix.multiply(Vector vec)`返回，而`Vector`不仅仅是_ _ _作为标量返回。`Matrix``fooVector.multiply(Vector rightVec)``Matrix``Vector``Matrix``Vector``inner``multiply(Vector rightVec)``Matrix`

我发现了有关协变返回类型的问题，但没有这样的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:00:33.540

因为`Matrix`和`Vector`位于两个不同的层次结构中。您不能使用`Matrix`代替`Vector`作为返回类型。
如果您不确定返回类型是 type`Matrix`还是`Vector`，您可以使用由`Matrix`and扩展的新接口`Vector`并将其用作返回类型。
有点像

```
public interface MatrixOrVector {
    // This can be used as return type
} 
```

更改`Matrix`为

```
public interface Matrix extends MatrixOrVector{
   // Methods...
} 
```

与矢量相同

```
public interface Vector extends MatrixOrVector{
    // Methods ....
} 
```

如果`MatrixOrVector`用作返回类型，则可以返回类型为`Matrix`或的对象`Vector`。

仅供参考`FooMatrix`，它不是一个抽象类，因为你在那里失踪`abstract`了。阅读更多关于抽象[http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)

# android - 后参数给出错误

> ID：14575922
> 
> 赞同：0
> 
> 时间：2013-01-29T04:57:36.167
> 
> 标签：android, mysql, android-intent, android-activity

嗨，我创建了一个应用程序，单击按钮将字符串发送到下一个活动，在第二个活动中，我使用该值从数据库中检索数据。

我正在做以下事情。

```
 Intent myIntent = getIntent(); // getting the value from the previous activity
    myIntent.getStringExtra("lbl_name");
    postParameters = new ArrayList<NameValuePair>();
    postParameters.add(new BasicNameValuePair("product", lbl_name//passing the name to the database .getText().toString())); 
```

问题是它无法识别 lbl_name。

我搜索了互联网，但找不到解决方案。请告诉我我是否做得对。

传递值的代码。

```
Intent myIntent = new Intent(SinglePlaceActivity.this,RecoProd.class);
                                        myIntent.putExtra("lbl_name", "lbl_name");
                                        SinglePlaceActivity.this.startActivity(myIntent); 
```

访问数据库的代码。

```
public class RecoProd extends Activity {
    EditText pd;
    TextView error;

    ArrayList<NameValuePair> postParameters;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        try {
            Class<?> strictModeClass = Class.forName("android.os.StrictMode", true, Thread.currentThread()
                    .getContextClassLoader());

            Class<?> threadPolicyClass = Class.forName("android.os.StrictMode$ThreadPolicy", true, Thread
                    .currentThread().getContextClassLoader());

            Class<?> threadPolicyBuilderClass = Class.forName("android.os.StrictMode$ThreadPolicy$Builder", true,
                    Thread.currentThread().getContextClassLoader());

            Method setThreadPolicyMethod = strictModeClass.getMethod("setThreadPolicy", threadPolicyClass);

            Method detectAllMethod = threadPolicyBuilderClass.getMethod("detectAll");
            Method penaltyMethod = threadPolicyBuilderClass.getMethod("penaltyLog");
            Method buildMethod = threadPolicyBuilderClass.getMethod("build");

            Constructor<?> threadPolicyBuilderConstructor = threadPolicyBuilderClass.getConstructor();
            Object threadPolicyBuilderObject = threadPolicyBuilderConstructor.newInstance();

            Object obj = detectAllMethod.invoke(threadPolicyBuilderObject);

            obj = penaltyMethod.invoke(obj);
            Object threadPolicyObject = buildMethod.invoke(obj);
            setThreadPolicyMethod.invoke(strictModeClass, threadPolicyObject);

        } catch (Exception ex) {
            String TAG = null;
            Log.w(TAG, ex);
        }
        super.onCreate(savedInstanceState);
        setContentView(R.layout.recomain);
        Intent myIntent = getIntent(); // getting the value from the previous activity
        String lbl_name= myIntent.getStringExtra("lbl_name");//< get lbl_name from Intent
        pd = (EditText) findViewById(R.id.name);

        error = (TextView) findViewById(R.id.showresult);

                postParameters = new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("product", lbl_name
                        ));

                // String valid = "1";

                DownloadWebPageTask dw = new DownloadWebPageTask();
                dw.execute("");

    }

    private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
            String response = null;
            for (String url : urls) {
                try {
                    response = CustomHttpClient.executeHttpPost("http://192.168.1.7/abc/check2.php", postParameters);  
                    String res = response.toString();
                    // res = res.trim();
                    res = res.replaceAll("\\s+", "");
                    // error.setText(res);
                    try{
                        res = "";
                  JSONArray jArray = new JSONArray(res);
                        for(int i=0;i<jArray.length();i++){
                                JSONObject json_data = jArray.getJSONObject(i);
                                Log.i("prod_id","id: "+json_data.getInt("prod_id")+
                                        ", prod_name: "+json_data.getString("prod_name")+
                                        ", prod_category: "+json_data.getString("prod_category")+
                                        ", prod_cost: "+json_data.getDouble("prod_cost")
                                );
                                //Get an output to the screen
                                res += "\n" + json_data.getInt("prod_id") + " -> "+ json_data.getString("prod_name");
                        }
                }
                catch(JSONException e){
                        Log.e("log_tag", "Error parsing data "+e.toString());
                }

                try{
                 error.setText(res);
                }
                catch(Exception e){
                 Log.e("log_tag","Error in Display!" + e.toString());;          
                }   
           }
                 catch (Exception e) {
            Log.e("log_tag","Error in http connection!!" + e.toString());     
           }
            }
            return response;

               }
        @Override
        protected void onPostExecute(String result) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:06:25.440

您需要`lbl_name`从 Intent 中提取值：

```
Intent myIntent = getIntent(); // getting the value from the previous activity
 String lbl_name= myIntent.getStringExtra("lbl_name");//< get lbl_name from Intent
 postParameters = new ArrayList<NameValuePair>();
 postParameters.add(new BasicNameValuePair("product",lbl_name)); 
```

或者如果 lbl_name 在 prev Activity 中是静态的，那么你可以访问它：

```
postParameters.add(new BasicNameValuePair("product",
                              Your_prev_Activity_Name.lbl_name)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:09:23.333

尝试传递字符串值，`Intent`如下所示：

> ```
>  Intent myIntent = new Intent(SinglePlaceActivity.this,RecoProd.class);
>        myIntent.putExtra("lbl_name", "lbl_name");
>        SinglePlaceActivity.this.startActivity(myIntent); 
> ```

使用如下访问值`getString();`

> ```
> Intent myIntent = getIntent(); // getting the value from the previous activity
> String lbl_name=myIntent.getString("lbl_name");
> postParameters = new ArrayList<NameValuePair>();
> postParameters.add(new BasicNameValuePair("product", lbl_name//passing the name to the database .getText().toString())); 
> ```

# iphone - iPhone中的ZLib无法解压数据

> ID：14575923
> 
> 赞同：6
> 
> 时间：2013-01-29T04:57:36.437
> 
> 标签：iphone, ios, compression, zlib

我正在尝试使用 iPhone 中的**ZLib**解压缩数据，但它总是通过`"Invalid header Check"`.

为了压缩我在 Java 中使用以下内容的数据

**实现：Zlib 的标准 Java 实现**

**放气机：java.util.zip.Deflater**

**版本 1.45，06 年 4 月 7 日**

**压缩级别：BEST_COMPRESSION**

iPhone中解压代码如下：

```
- (NSData *)zlibInflate
{
if ([self length] == 0) return self;

unsigned full_length = [self length];
unsigned half_length = [self length] / 2;

NSMutableData *decompressed = [NSMutableData dataWithLength: full_length + half_length];
BOOL done = NO;
int status;

z_stream strm;
strm.next_in = (Bytef *)[self bytes];
strm.avail_in = [self length];
strm.total_out = 0;
strm.zalloc = Z_NULL;
strm.zfree = Z_NULL;

if (inflateInit (&strm) != Z_OK) return nil;

while (!done)
{
    // Make sure we have enough room and reset the lengths.
    if (strm.total_out >= [decompressed length])
        [decompressed increaseLengthBy: half_length];
    strm.next_out = [decompressed mutableBytes] + strm.total_out;
    strm.avail_out = [decompressed length] - strm.total_out;

    // Inflate another chunk.
    status = inflate (&strm, Z_SYNC_FLUSH);
    if (status == Z_STREAM_END) done = YES;
    else if (status != Z_OK) {
        NSLog(@"%s", strm.msg);
        break;
    }
}
if (inflateEnd (&strm) != Z_OK) return nil;

// Set real length.
if (done)
{
    [decompressed setLength: strm.total_out];
    return [NSData dataWithData: decompressed];
}
else return nil;
} 
```

以下是一个示例压缩字符串：

```
xÚÝUko²Jþ~?­ó?¥¾?¤?©?´ÚjCMX,Òµ?ª?µßVX¹È­?¿.øë_?¯¶ZÏ%íùxHH&Ã<ÏÌ3ÌÎ
@2.ðE?ºqþpéEzÏ09IoÒ?ª? ?®?£àÌönì$brÛ#fl95?¿»a//Tçáò?¢?¿½
µ©ÊÃÉPÔ¼:8y¦ý.äÎ?µ?¥?¼y?©ã¯9ö?¥½?¢±ÝûwÛ?§ãga?©á8?¨?­m\Õ?»6,'Îe?¬}(L}7ÆÅ6#gJ(¥7´s?¬d.Ã³,Ë°¦prßýÕÖ? 
```

以下是压缩器的功能：

```
public static byte[] compress(String s) {
       Deflater comp = new Deflater();
       //comp.setLevel(Deflater.BEST_COMPRESSION);

       comp.setInput(s.getBytes());

       comp.finish();
       ByteArrayOutputStream bos = new ByteArrayOutputStream(s.length());

       // Compress the data
       byte[] buf = new byte[1024];
       try {
            while (!comp.finished()) {
                  int count = comp.deflate(buf);
                  bos.write(buf, 0, count);
            }
            bos.close();
       } catch (Exception e) {
            //Log.d(TAG, e.getMessage());
            e.printStackTrace();
       }

       // Get the compressed data
       byte[] compressedData = bos.toByteArray();

       // put in this fix for Symbol scanners
       byte[] compressedDataForSymbol = mungeForSymbol(compressedData);
       /*
       * byte[] decompressedDataForSymbol =
       * decompressedDataAfterSymbol(compressedDataForSymbol); // check they
       * are the same for(int i=0;i<compressedData.length;i++) { if
       * (compressedData[i] != decompressedDataForSymbol[i]) {
       * //System.out.println("Error at " + i); } }
       */
       return compressedDataForSymbol;
       // return s.getBytes();

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-10T12:09:31.580

使用具有默认压缩级别的 Java Deflater 创建输出编码数据，其前两个字节为 0x78 0x9c 的标头。这些在 IOS 中不使用。只需去掉前两个字节，然后在IOS 中尝试Inflate 即解压。它应该工作。我遇到了同样的问题，但我想要从 IOS（压缩）到 android（解压缩）的数据。

# java - primefaces dataTable过滤问题

> ID：14575930
> 
> 赞同：1
> 
> 时间：2013-01-29T04:58:41.133
> 
> 标签：java, jsf, primefaces

[我使用 primefaces 3.4RC1 按照此http://www.primefaces.org/showcase-labs/ui/datatableFiltering.jsf](http://www.primefaces.org/showcase-labs/ui/datatableFiltering.jsf)开发带有过滤功能的数据表。但我有一些问题。过滤一些东西后，它会重复给出记录。例如，如果只有一条记录，它重复 5 次，如果有 2 条记录，它重复 10 次。这个问题的原因是什么？

```
<p:dataTable id="tableList" var="tablevar" value="#{tableBean.table}"
        style="font-size: 12px; width:1310px;" widgetVar="carsTable" 
        emptyMessage="No recode found with given criteria" filteredValue="#{tableBean.filteredCars }"
        scrollable="true" scrollHeight="450" resizableColumns="flase">

    <f:facet name="header">
        <p:outputPanel style="display:block; text-align:right"> 
            <h:outputText value="Search all fields:"/>  
            <p:inputText id="globalFilter" onkeyup="carsTable.filter()" style="width:150px" />
        </p:outputPanel>
   </f:facet>

    <p:column  headerText="ID" width="50">
        <h:outputText value="#{tablevar.id}" style="font: medium "/>
    </p:column>
    <p:column  headerText="Country" width="50" filterBy="#{tablevar.country}" filterMatchMode="contains">
        <h:outputText value="#{tablevar.country}" style="font: medium"/>
    </p:column>
    <p:column  headerText="Country Code" width="50" filterBy="#{tablevar.country_code}" filterMatchMode="contains">
        <h:outputText value="#{tablevar.country_code}" style="font: medium "/>
    </p:column>
    <p:column  headerText="MGT" width="50" filterBy="#{tablevar.MGT}" filterMatchMode="contains">
        <h:outputText value="#{tablevar.MGT}" style="font: medium "/>
    </p:column>

    <f:facet name="footer" id="foot">
        <h:panelGrid columns="8" cellpadding="5"   id="pane" >
            <h:outputLabel  value="Country" />
            <p:inputText value="#{tableBean.c_country}"  id="country" required="false" label="country" />
            <h:outputLabel  value="Country_Code" />
            <p:inputText value="#{tableBean.c_country_code}"  id="countrycode" required="false" label="countrycode" />
            <h:outputLabel  value="MGT" />
            <p:inputText value="#{tableBean.c_MGT}"  id="mgt" required="false" label="mgt" />

            <p:commandButton id="loginButton" value="AddNew" update=":form:messages" actionListener="#{tableBean.addNew}" oncomplete="javascript:location.reload(true)"  onstart="return myFunction3();"/>
            <p:commandButton type="reset" value="Clear" oncomplete="javascript:location.reload(true)"/>
        </h:panelGrid>
    </f:facet>
</p:dataTable> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:02:45.840

如果你想根据 id 搜索记录，你可以关注这个。

这是简单的示例代码试试这个。

```
<p:dataTable value="#{tableBean.table}" var="tablevar" >
  <p:column style="width:10%;text-align:left" filterBy="#{tablevar.id}" >
    <f:facet name="header">
            <h:outputText value="ID" id="id" />
    </f:facet>
    <h:outputText value="#{tablevar.id}" />
 </p:column>
 <p:column style="width:20%;text-align:left" sortBy="#{tablevar.country}">
    <f:facet name="header">
       <h:outputText value="Customer" id="customer" />
    </f:facet>
    <h:outputText value="#{tablevar.country}" />
 </p:column>
</p:dataTable> 
```

您可以仅在一列或多列中提供 filterBy ，这不是问题。

但是 sortBy 选项可以在所有列中给出。我已经在使用上面的代码开发数据表了。

# c# - 数组中等于 N 的 K 个元素的总和

> ID：14575931
> 
> 赞同：5
> 
> 时间：2013-01-29T04:58:45.953
> 
> 标签：c#, algorithm, data-structures, recursion

给定一个数组说 nums = { 1,2,5,3,6,-1,-2,10,11,12}，使用最大元素数（比如 maxNums=3）找到总和（比如 sum = 10) = K

所以如果要使用的 maxNums = 3 sum to find = 10 答案是

```
 {1  3  6}    
    {1  -1  10}
    {1  -2  11}
    {2  5  3}
    {2  -2  10}
    {5 6 -1}
    {-1  11}
    {-2  12}
    {10} 
```

我写了一个递归函数来完成这项工作。**我如何在没有递归的情况下做到这一点？** 和/或内存更少？

```
class Program
{
        static Int32[] nums = { 1,2,5,3,6,-1,-2,10,11,12};
        static Int32 sum = 10;
        static Int32 maxNums = 3;

        static void Main(string[] args)
        {

            Int32[] arr = new Int32[nums.Length];
            CurrentSum(0, 0, 0, arr);

            Console.ReadLine();
        }

        public static void Print(Int32[] arr)
        {
            for (Int32 i = 0; i < arr.Length; i++)
            {
                if (arr[i] != 0)
                    Console.Write("  "   +arr[i]);
            }
            Console.WriteLine();
        }

        public static void CurrentSum(Int32 sumSoFar, Int32 numsUsed, Int32 startIndex, Int32[] selectedNums)
        {
            if ( startIndex >= nums.Length  || numsUsed > maxNums)
            {
                if (sumSoFar == sum && numsUsed <= maxNums)
                {
                    Print(selectedNums);
                }                    
                return;
            }

                       **//Include the next number and check the sum**
                    selectedNums[startIndex] = nums[startIndex];
                    CurrentSum(sumSoFar + nums[startIndex], numsUsed+1, startIndex+1, selectedNums);

                    **//Dont include the next number**
                    selectedNums[startIndex] = 0;
                    CurrentSum(sumSoFar , numsUsed , startIndex + 1, selectedNums);
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T09:14:13.880

你的功能看起来不错，但可能有点优化：

```
class Program
{
    static Int32[] nums = { 1, 2, 5, 3, 6, -1, -2, 10, 11, 12 };
    static Int32 sum = 10;
    static Int32 maxNums = 3;
    static Int32[] selectedNums = new Int32[maxNums];

    static void Main(string[] args)
    {
        CurrentSum(0, 0, 0);
        Console.ReadLine();
    }

    public static void Print(int count)
    {
        for (Int32 i = 0; i < count; i++)
        {
            Console.Write(" " + selectedNums[i]);
        }
        Console.WriteLine();
    }

    public static void CurrentSum(Int32 sumSoFar, Int32 numsUsed, Int32 startIndex)
    {
        if (sumSoFar == sum && numsUsed <= maxNums)
        {
            Print(numsUsed);
        }

        if (numsUsed >= maxNums || startIndex >= nums.Length)
            return;

        for (int i = startIndex; i < nums.Length; i++)
        {
            // Include i'th number
            selectedNums[numsUsed] = nums[i];
            CurrentSum(sumSoFar + nums[i], numsUsed + 1, i + 1);
        }
    }
} 
```

我还修复了您功能中的错误。它在以下测试用例中失败：

```
{10, 2, -2}
Sum = 10
K = 3 
```

您的函数只返回`{10}`而不是`{10} and {10, 2, -2}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T13:08:26.473

而 Haskell 解决方案...

```
import Data.List
listElements max_num k arr = 
  filter (\x -> sum x == k && length x == max_num) $ subsequences arr 
```

*Main> listElements 3 10 [1,2,5,3,6,-1,-2,10,11,12]
[[2,5,3],[1,3,6],[5,6 ,-1],[1,-1,10],[2,-2,10],[1,-2,11]]

# xcode - UITableView 编辑模式文本字段

> ID：14575933
> 
> 赞同：0
> 
> 时间：2013-01-29T04:58:47.383
> 
> 标签：xcode, uitableview

我在 中触发了 EditMode `UITableView`，但我发现左侧的所有 my`UILabel`和 a都没有显示在正确的位置。`UITextField`我怎样才能解决这个问题。谢谢！

![在此处输入图像描述](../Images/54ffcf2b34fbf52aec38c9840c7345f6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:00:58.530

使用此代码

```
- (BOOL)tableView:(UITableView *)tableView shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath *)indexPath
    {
        return NO;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:04:17.107

您已将 TableView 分组并在单元格上添加了子视图。

需要始终在内容视图上添加自定义对象。

# javascript - 如何在一个视图中使用多个 ember 数据模型

> ID：14575939
> 
> 赞同：6
> 
> 时间：2013-01-29T04:59:21.770
> 
> 标签：javascript, json, model-view-controller, frameworks, ember.js

给定 RESTful 服务器上的这些 JSON 数据模型

/用户

```
{"users":[
   {"id":"1","first_name":"John","last_name":"Doe"},
   {"id":"2","first_name":"Donald","last_name":"Duck"}
]} 
```

/用户/1

```
{"user": 
   {"id":"1","first_name":"John","last_name":"Doe","account":"1"}
} 
```

/帐户

```
{"accounts":[
   {"id":"1","owned_by":"1"},{"id":"2","owned_by":"2"}
]} 
```

/帐户/1

```
{"account":
   {"id":"1","owned_by":"1","transactions":[1,17]}
} 
```

以及这些 Ember 数据模型

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.RESTAdapter.create({
    url: 'http://api.mydomain.ca'
  })
});

App.User = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string'),
    account: DS.belongsTo('App.Account')
});

App.Account = DS.Model.extend({
    ownedBy: DS.belongsTo('App.User'),
    transactions: DS.hasMany('App.Transaction')
}); 
```

我还需要编写哪些其他 ember 代码才能将数据加载到模型中，然后编写一个模板来输出用户名、帐户 ID 和帐户中的交易数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T21:27:25.443

我能够解决这个问题，所以我会发布我的代码以防它帮助其他人。诀窍是确保 JSON 数据的格式与 Ember 想要的完全一致，并创建正确的路由。

据我所知，Ember 期望父对象提供子对象列表。这对我来说感觉很奇怪，所以如果有人知道用外键引用其父母的子对象的方法，请告诉我。

我将 /user/:user_id JSON 对象上的帐户属性更改为 account_id 我还在 /users 中找到的用户对象中包含了 account_id，并将帐户上的 own_by 属性更改为 user_id。

我的 javascript 文件

```
var App = Ember.Application.create();

// Router
App.Router.map(function() {
    this.resource('users', function() {
        this.resource('user', {path:':user_id'});
    }); // '/#/users/:user_id'
    this.resource('accounts', function() {
        this.resource('account', {path:':account_id'});
    });
});

App.IndexRoute = Ember.Route.extend({
    redirect: function() {
        this.transitionTo('users');
    }
});

App.UsersRoute = Ember.Route.extend({
    model: function() {
        return App.User.find();
    }
});

App.AccountsRoute = Ember.Route.extend({
    model: function() {
        return App.Account.find();
    } 
});

// Controllers

App.TransactionsController = Ember.ArrayController.extend();

// Adapter
App.Adapter = DS.RESTAdapter.extend({
    url: 'http://api.mydomain.ca'
});

// Models

App.Store = DS.Store.extend({
  revision: 11,
  adapter: App.Adapter.create({})
});

App.User = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string'),
    account: DS.belongsTo('App.Account')
});

App.Account = DS.Model.extend({
    user: DS.belongsTo('App.User'),
    transactions: DS.hasMany('App.Transaction'),
    balance: function() {
      return this.get('transactions').getEach('amount').reduce(function(accum, item) {
          return accum + item;
      }, 0);
  }.property('transactions.@each.amount')
});

App.Transaction = DS.Model.extend({
    account: DS.belongsTo('App.Account'),
    amount: DS.attr('number'),
    description: DS.attr('string'),
    timestamp: DS.attr('date')
}); 
```

和车把模板

```
<script type="text/x-handlebars" data-template-name="application">
    <div class="row">
        <div class="twelve columns">
            <h2>Accounts</h2>
            <p>{{outlet}}</p>
        </div>
    </div>
</script>

<script type="text/x-handlebars" data-template-name="users">
    <div class="row">
        <div class="three columns" id="users">
            {{#each user in controller }}
                {{#linkTo "user" user class="panel twelve columns"}}{{user.firstName}} {{user.lastName}}{{/linkTo}}
            {{/each}}
        </div>
        <div class="nine columns" id="user">
            {{ outlet }}
        </div>
    </div>  
</script>

<script type="text/x-handlebars" data-template-name="user">
    <h2>{{firstName}} {{lastName}}</h2>
    {{#if account}}
    {{render "account" account}}
    {{else}}
    Error: Account not set up!
    {{/if}}
</script>

<script type="text/x-handlebars" data-template-name="accounts">
    <div class="row">
        <div class="three columns" id="accounts">
            {{#each account in controller }}
                {{#linkTo "account" account class="panel twelve columns"}}{{account.id}} {{account.user.firstName}} {{account.user.lastName}}{{/linkTo}}
            {{/each}}
        </div>
        <div class="nine columns" id="account">
            {{ outlet }}
        </div>
    </div>  
</script>

<script type="text/x-handlebars" data-template-name="account">
    <p>Account Number: {{id}}, Balance: {{balance}}, {{transactions.length}} transactions</p>
    {{render "transactions" transactions}}
</script>

<script type="text/x-handlebars" data-template-name="transactions">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Amount</th>
                <th>Timestamp</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
        {{#each transaction in controller}}
            <tr>
                <td>{{transaction.id}}</td>
                <td>{{transaction.amount}}</td>
                <td>{{transaction.timestamp}}</td>
                <td>{{transaction.description}}</td>
            </tr>
        {{/each}}
        </tbody>
    </table>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:58:21.157

创建一个 Index 路由，为您的 IndexController 提供一个模型，并创建一个相关的模板来迭代您的关系。

这是帖子和评论之间的简单 HasMany-Relationship 示例：

```
var App = Ember.Application.create();
App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.RESTAdapter.create()
});

App.Post = DS.Model.extend({
  comments: DS.hasMany('App.Comment')
});
App.Comment = DS.Model.extend({
  post: DS.belongsTo('App.Post'),
  body: DS.attr('string'),
});

App.IndexRoute = Ember.Route.extend({
  setupController: function(controller) {
    controller.set('content', App.Post.find("1"));
  }
}); 
```

HTML 代码应如下所示：

```
<!DOCTYPE html>
<html>
<head>
  ...
</head>
<body>
  <script type="text/x-handlebars" data-template-name="index">
  {{#each comment in content.comments}}
    {{comment.body}}
  {{/each}}
  </script>
</body> 
```

最后但并非最不重要的服务器响应 /posts/1

```
{
"post": {
"id": 1,
"title": "Rails is omakase",
"comments": [1, 2, 3]
},

"comments": [{
"id": 1,
"body": "But is it _lightweight_ omakase?"
},
{
"id": 2,
"body": "I for one welcome our new omakase overlords"
},
{
"id": 3,
"body": "Put me on the fast track to a delicious dinner"
}]
} 
```

# java - 如何仅从主节点执行读取操作

> ID：14575948
> 
> 赞同：0
> 
> 时间：2013-01-29T05:00:21.800
> 
> 标签：java, mongodb, jakarta-ee

我们将 Mongo DB 用于基于 Java Java EE 的应用程序。我们使用一个主要和两个辅助作为 Mongo DB 集群的一部分 Mongo DB 作为我们架构的一部分不断地读取/更新/写入。

因此，当我们从 Mongo DB 执行 fetch 操作时，我们会得到脏读（零值）。

为了解决这个问题，我试图以这样一种方式配置它，即读取操作总是从主要本身获取，并且写入/更新可以转到主要/次要。

请让我知道这是否可能（始终从主要读取并使用主要/次要的任何东西进行写入/更新）

这样的设计会产生负面影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:37:42.943

由于 mongoDB 在插入中使用分阶段写入，即使在单个节点中也可能存在写入操作滞后。 [http://docs.mongodb.org/manual/reference/glossary/#term-journal](http://docs.mongodb.org/manual/reference/glossary/#term-journal)

使用写关注来避免问题（脏数据）：[http ://api.mongodb.org/java/2.6/com/mongodb/WriteConcern.html](http://api.mongodb.org/java/2.6/com/mongodb/WriteConcern.html)

您可以阅读有关写入操作的更多信息：http: [//docs.mongodb.org/manual/core/write-operations/](http://docs.mongodb.org/manual/core/write-operations/)

其中指出不建议在生产中使用不带错误检查的写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:09:14.333

要排除从读取，您必须设置相应的[ReadPreference](http://api.mongodb.org/java/current/com/mongodb/ReadPreference.html)。请参阅有关[Mongo](http://api.mongodb.org/java/current/com/mongodb/Mongo.html)连接类的文档。

像这样的东西：

```
 mongo.setReadPreference(ReadPreference.primary()); 
```

但是，文档说，默认情况下，所有读取都应该已经转到主：

> 默认情况下，所有读取和写入操作都将在主节点上进行，但可以通过更改读取首选项从辅助节点读取：

你确定你没有在应用程序中打开从读取？

# sql-server - 用任何其他子句替换 Group By 子句

> ID：14575950
> 
> 赞同：0
> 
> 时间：2013-01-29T05:00:28.200
> 
> 标签：sql-server, group-by

在下面的查询中，我使用`GROUP BY`子句来获取最近更新的记录列表取决于更新日期。`GROUP BY`但是由于某些内部原因，我希望查询没有子句。可以请任何人帮我解决这个问题。

```
SELECT Proj_UpdatedDate,
       Proj_UpdatedBy
FROM   ProjectProgress PP
WHERE  Proj_UpdatedDate IN (SELECT MAX(Proj_UpdatedDate)
                            FROM   ProjectProgress
                            GROUP BY
                                   Proj_ProjectID)
ORDER BY
       Proj_ProjectID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:06:40.860

假设您的意思是 MAX(Proj_UpdatedDate)，使用 TOP 1 应该会给您相同的结果：

```
SELECT Proj_UpdatedDate,
       Proj_UpdatedBy
FROM   ProjectProgress PP
WHERE  Proj_UpdatedDate IN (SELECT TOP 1 Proj_UpdatedDate
                            FROM   ProjectProgress
                            ORDER BY Proj_UpdatedDate DESC)
ORDER BY
       Proj_ProjectID 
```

但是，您的查询实际上返回多个日期，因为它是 GROUPED BY Proj_ProjectId （每个项目的最大日期）。这是您想要的结果 - 显示项目更新的日期列表以及由谁更新？

如果是这样，请尝试使用 ROW_NUMBER()：

```
SELECT  Proj_UpdatedDate, Proj_UpdatedBy
FROM (
   SELECT ROW_NUMBER() OVER (PARTITION BY Proj_ProjectID ORDER BY Proj_UpdatedBy DESC) rn,
      Proj_UpdatedDate, 
      Proj_UpdatedBy
   FROM   ProjectProgress
  ) t 
WHERE rn = 1 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!3/33034/8)。这假定您正在运行 SQL Server 2005 或更高版本。

祝你好运。

# css - 如何在我的网站中居中导航栏？

> ID：14575953
> 
> 赞同：0
> 
> 时间：2013-01-29T05:00:33.533
> 
> 标签：css

我正在使用 Weebly 创建一个网站，并且我一直在尝试修改导航栏，使其显示为居中而不是左对齐。我根本不知道任何代码，但我找到了导航代码，我想知道我可以改变什么来使栏居中。谢谢！

```
#nav-wrap .nav {
float:left;
}

#nav-wrap .container {
clear: both;
overflow: hidden;
position: relative;
background:url(saperator-h.png) repeat-x bottom;
padding-bottom:40px;
}

#nav-wrap .container ul {
list-style: none;
}

#nav-wrap .container ul li {
list-style: none;
float: left;
background:url(nav-saperator.png) no-repeat right center;
margin-right: 10px;
padding-right: 25px;
}

#nav-wrap .container ul > li:last-child, #nav-wrap .container ul span:last-child li {
background:none;
}

#nav-wrap .container ul li a {
display: block;
line-height:14px;
border: 0;
outline: 0;
list-style-type: none;
text-transform:uppercase;
padding:5px;
margin-bottom:4px;
}

#nav-wrap .container ul li#active a,
#nav-wrap .container ul li a:hover {
color:#000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T05:35:04.413

```
#topnav a {
float: left;
display: block;
color: #fff;
font-size: 1.2em;
text-decoration: none;
padding: 11px 60px 60px 15px;
border: 0;
outline: 0;
text-transform: uppercase; 
```

我不得不弄乱填充物，但这使我的导航栏在weebly中居中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:04:06.537

```
#nav-wrap {
position: relative;
width: /*set width, can't be 100% obivously if you want it centered */
margin: auto;
} 
```

这是一个猜测，我们看不到任何 HTML ，将其应用于整个导航栏的容器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T05:08:25.603

这取决于 HTML 结构，但这可以工作。

```
#nav-wrap .container ul {
  display:block;
  width:auto;
  margin:auto;
} 
```

# primefaces - 使用 jsplumb 时 id 名称中的冒号 (:)

> ID：14575958
> 
> 赞同：3
> 
> 时间：2013-01-29T05:01:03.807
> 
> 标签：primefaces, escaping, jsplumb

我正在使用 jsplumb 和 Primefaces。我有许多 p:panel 组件作为 ui:repeat 的一部分生成。然后我想使用 jsplumb 将这些面板连接在一起。Primefaces 生成面板 ID，然后我在脚本代码中使用它们来设置 jsplumb。

当我使用我创建的面板 ID 时，一切正常，但我使用自动创建的面板 ID 没有连接器出现。

```
<ui:repeat value={#mybean.nodes} var="node"> <p:panel> ... </p:panel> </ui:repeat>

jsPlumb.connect({source:"j_idt20:0", target:"j_idt20:1"}); 
```

其中 j_idt20:0 和 j_idt20:1 是从 Primefaces 生成的 id，并通过检查浏览器上的 html 页面找到。

我想我已经将问题归结为生成的 id 包含“：”这一事实。例如'j_idt_29:0'

如何在行中的 jsplumb 中的名称中使用 : 引用 id `jsPlumb.connect({source:"element1"target:"element2"});`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:35:54.403

尝试逃避`:`with `\\`（如果这不起作用，请尝试 single `\`）

```
jjsPlumb.connect({source:"j_idt20\\:0", target:"j_idt20\\:1"}); 
```

或者

> 通过 web.xml 中的以下上下文参数更改 JSF 默认 UINamingContainer 分隔符。例如

```
<context-param>
    <param-name>javax.faces.SEPARATOR_CHAR</param-name>
    <param-value>-</param-value>
</context-param> 
```

[如何在 CSS 选择器中使用 JSF 生成的 HTML 元素 ID？](https://stackoverflow.com/a/5882502/617373)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:41:13.920

你必须逃避`:`登录你的字符串。Primefaces 为此内置了 JavaScript 功能。您可以执行以下操作：

```
var escapedId = PrimeFaces.escapeClientId("id1:id2"); 
```

它将被正确地逃脱。

如果您不想使用此功能，出于某种原因，请使用以下命令`:`转义`\\`：

```
"id1\\:id2" 
```

# apache - mod_jk.log 显示什么 url？

> ID：14575959
> 
> 赞同：0
> 
> 时间：2013-01-29T05:01:09.880
> 
> 标签：apache, tomcat, security, mod-jk

我在 Apache 和 Tomcat（在 Ubuntu 上）之间有 mod_jk 连接器，我正在查看 mod_jk.log。日志主要是这样的：

```
[Fri Jan 18 18:37:32 2013]ajp13 <some url from my domain> 0.011095 
```

但偶尔我会看到这些条目：

```
[Fri Jan 18 21:09:58 2013]ajp13 www.bradesco.com.br 0.030327
[Fri Jan 18 21:09:58 2013]ajp13 www.bb.com.br 0.009310
[Fri Jan 18 21:09:58 2013]ajp13 www.santander.com.br 0.011401
[Fri Jan 18 21:09:58 2013]ajp13 www.banese.com.br 0.010602 
```

有人知道 mod_jk.log 中记录了哪些网址吗？这些“br”条目合法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:51:52.097

该问题并非以任何方式特定于 mod_jk，它只是最初在 mod_jk 日志中观察到。

所有巴西 URL 都来自请求`Host`的标头属性。[正如此评论](http://forum.linode.com/viewtopic.php?p=53710&sid=f53f67f3c9e06332b38fcc6fc3eb5f05)`GET`中所建议的，这是对开放代理的扫描。

有趣的是，它来自同一个 IP 地址 (65.111.177.188) 好几个月了。

为了关闭这些垃圾，我在服务器上的 mod_security conf 文件中添加了一个额外的规则：

```
SecRule &REQUEST_HEADERS:Host "!@pm mydomain" "phase:1,deny" 
```

这样所有没有`mydomain`它们的主机都会立即被拒绝。

# php - 从 php 和 mysql 的下拉列表中填充文本框

> ID：14575961
> 
> 赞同：0
> 
> 时间：2013-01-29T05:01:14.680
> 
> 标签：php

我是这个论坛的新手..请原谅我的任何错误并帮助我。我有一个只有两个字段的表单，第一个文本字段和下一个下拉列表。现在我想根据数据库中的文本字段值在数据库列表中显示值。即，如果我输入完美的用户名，它将在下拉列表中显示相应的电子邮件 ID（ s) 该用户的。它会在用户名更改后更改。

希望有人能在这件事上帮助我。我工作了很长时间，但不满意。在此先感谢。这是我尝试过的代码。但我想要相反。

` 函数 CBtoTB() {document.getElementById("username").value=document.getElementById("usernameselect").value}

```
<?php  
$result=mysql_query("select Username from users"); 
$options=""; 
while ($row=mysql_fetch_array($result)) { 
$username=$row["Username"]; 
$options.="<OPTION VALUE=\"$username\">".$username.'</option>'; 
} 
?>
<select name="usernameselect" id="usernameselect" onchange="CBtoTB()">
<option value="">&lt; select user &gt;<?php echo $options ?></option>
</select>
<input name="username" type="text" id="username" value="<?php echo $username ?>"       size="25" readonly="readonly" />` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:04:27.167

你的选项写错了，请试试这个：

```
<select name="usernameselect" id="usernameselect" onchange="CBtoTB()">
<option value="">&lt; select user &gt;</option>
<?php echo $options ?>
</select> 
```

# clearcase-remote-client - 如何查找在上次会话或给定日期更改的所有文件

> ID：14575963
> 
> 赞同：1
> 
> 时间：2013-01-29T05:01:20.243
> 
> 标签：clearcase-remote-client

我正在尝试在我们的小站点上实施 ClearCase。我们只使用 CCRC（远程客户端），因为我们远离 CC 服务器。现在我可以签出、更改文件，然后签入一堆不同的文件。

但是，比如说在一天结束时，或者第二天，我想知道我修改了哪些文件（或者从现在开始的每个月），我想知道我上次在那个项目上工作时修改了哪些文件。

我怎么能那样做？任何帮助都感激不尽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:38:25.100

您需要在其配置规范中使用（最好）具有基于时间的选择规则的动态视图。
在您的情况下，即 CCRC，一个简单的 Web 视图将起作用。在您尝试那些特殊的选择规则时，只需首先限制加载规则。

[您可以在如何找出上个月分支中发生的所有活动中](https://stackoverflow.com/questions/1577980/how-to-find-out-all-the-activities-happend-in-a-branch-in-the-last-month/1578508#1578508)看到此类规则的示例？

# javascript - 鼠标悬停仅在文本上而不是在整行上

> ID：14575966
> 
> 赞同：3
> 
> 时间：2013-01-29T05:01:44.047
> 
> 标签：javascript, jquery, html, css

如何仅对文本而不是整行提供鼠标悬停效果。我尝试使用 Position()，但是用空的.Below 是小提琴链接，

```
<ul id='ulid'>
<li>Task1</li>
<li>Task2</li>
<li>Task3</li>
<li>Task4</li>
<li>Task5</li>
<li>Task6</li>
<li>Task7</li>
</ul>

<br /><br />

<br /><br />

<div id="show_details"></div>

jQuery(document).ready(function() {

$('ul#ulid li').hover(function() {
    $('#show_details').html($(this).text());
}, function() {
    $('#show_details').html('');
});
}); 
```

请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T05:05:39.477

您的`li`元素不能是块显示。有很多方法可以处理它，但一种简单的方法就是用跨度包装它们并`.hover`在这些跨度上触发：

```
<li><span>Task1</span></li>
...
$('ul#ulid li span').hover(function() { 
```

[http://jsfiddle.net/xneG5/](http://jsfiddle.net/xneG5/)

以编程方式：http : [//jsfiddle.net/xneG5/2/](http://jsfiddle.net/xneG5/2/)

仅 CSS：http: [//jsfiddle.net/xneG5/3/](http://jsfiddle.net/xneG5/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:13:08.697

将 li 元素的边距和填充设置为 0 可能会解决此问题。它触发整行的原因是因为 li 带有默认边距和填充。

# php - 如何在文章内容中添加社交媒体按钮？

> ID：14575967
> 
> 赞同：0
> 
> 时间：2013-01-29T05:01:45.393
> 
> 标签：php

如何在文章内容中添加社交媒体按钮？

我在网页中插入了很多次社交按钮，但总是在内容之外作为单独的 div... 这次我想尝试一些更花哨的东西并将它们添加到文章中。见图片：

![在此处输入图像描述](../Images/2393f94342e7f13210a05a2ca39474ba.png)

社交按钮代码（只是没有 javascript 的代码）位于名为 social_buttons.php 的 php 文件中。与此类似的东西：

```
<div class="fb-like" data-send="true" data-width="450" data-show-faces="true"></div> 
```

文章的内容是通过文本区域控件中的 php 表单捕获的，并将其插入数据库中。然后我从数据库中输出内容并回显如下：

```
<?php echo $article; ?> 
```

所以基本上，social_buttons 需要进入 $article...

我如何实现这一目标？

# java - 块生成算法/代码

> ID：14575971
> 
> 赞同：1
> 
> 时间：2013-01-29T05:02:12.597
> 
> 标签：java, voxel

所以基本上我正在尝试制作一个“体素世界”生成器（我使用术语体素非常失落，更多的是一个盒子）。我已经做了一个`createChunk();`方法，它基本上只是使用该`createVoxel()`方法和一个 for 循环来放置它几次，每次将它的 X 增加 1。

我想知道是否有一种方法可以使这更容易和更随机化，使用`noise`我相信可能会有所帮助？但我不知道如何使用它，所以有人可以解释一下我的并发症吗？

谢谢 ：）

# java - 如何将我的二维布尔数组作为一个整体引用？

> ID：14575972
> 
> 赞同：1
> 
> 时间：2013-01-29T05:02:14.210
> 
> 标签：java

如果这意味着什么，那么 2d 布尔值是一个静态变量。我以为我可以只引用数组的名称，但是这样做会出错。

```
public class Game {

static boolean[][] board = new boolean[3][3];
}

public class Computer
{
  if (Game.board = true)
    {
        //code
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:20:50.253

也许您正在寻找这样的东西？

```
import java.util.Arrays;

class Test
{
    public static void main(String[] args)
    {
        boolean[][] board = {{}, {}, {}};
        // all values in board are set to false by default

        boolean[][] board2 = new boolean[0][3];
        boolean[][] board3 = {{true},{true},{true, false, false}};
        boolean[][] board4 = {{}, {true}, {true, true}, {}};

        printInfo(board, 1);
        printInfo(board2, 2);
        printInfo(board3, 3);
        printInfo(board4, 4);

    }

    public static boolean check(boolean[][] board)
    {
        if(board.length == 0) return false;

        int colLength = 0;
        int elementsInBoard = 0;    

        for (int i = 0; i < board.length; i++)
        {
            colLength = board[i].length;
            elementsInBoard += colLength;
            for(int j = 0; j < colLength; j++)
            {
                if (board[i][j] == false)
                {
                    return false;
                }
            }
        }

        if (elementsInBoard == 0)
        {
            return false;
        }else
        {
            return true;
        }
    }

    public static void printInfo(boolean[][] board, int id)
    {
        System.out.println("Board : " + id);
        System.out.println(Arrays.deepToString(board)); 
        System.out.println(check(board));       
    }
} 
```

输出：

```
Board : 1
[[], [], []]
false
Board : 2
[]
false
Board : 3
[[true], [true], [true, false, false]]
false
Board : 4
[[], [true], [true, true], []]
true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:03:16.420

当然，`Game.board`这就是您引用`boolean[][]`二维数组的方式。但是是什么让你认为你可以直接比较一个 3x3 的`boolean`s数组`true`呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T05:06:44.437

`if(Game.board = true)`将引发编译器错误，因为`board`它是一个二维数组，因此不能分配单个`boolean`值。

另外，**比较**时请确保使用比较运算符`==`

也许，您想做类似的事情：

`if(Game.board[i][j] == true)`在哪里`i`和`j`正在索引数组：

```
for (int i = 0; i < 3; i++)
{
    for (int j = 0; j < 3; j++)
    {
        if(board[i][j] == true)
        {
          // Code
        }
    }
} 
```

您已`board`声明为`static`，有什么特别的原因吗？

由于`board[i][j]`返回一个`boolean`值，因此实际上不需要`== true`：

```
if(board[i][j]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T05:09:08.080

```
for (int i = 0; i < 3; i++)
   for (int j = 0; j < 3; j++)
      if(board[i][j] == true){

         //Code

      } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T05:19:45.240

您的代码有几个问题。首先，您不能直接将 a`boolean[][]`与进行比较`true`。您需要使用循环。其次，您必须在方法中放置代码语句。如果没有方法，您不能使用诸如 if 语句之类的东西。这是您想要的示例：

```
public class Game {
    private boolean[] board = new boolean[3][3];

    public static void main(String[] args) {
        boolean allTrue = true;
        for (int i = 0; i < board.length; i++) {
            boolean[] row = board[i];
            for (int j = 0; j < row.length; j++) {
                allTrue &= row[j];
            }
        }
        System.out.println(allTrue);
    }
} 
```

这忽略了一些你可以做的短路逻辑，但希望你明白这一点。

最后一件事，单`=`是分配，而不是比较。用于`==`比较，例如`myInt == 1`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T05:07:48.457

您将变量声明`board`为布尔值的二维数组，并且还对其进行了初始化。静态布尔[][]板=新布尔[3][3]；

现在`Game.board = true`，您正在尝试将 2D 布尔数组变量分配给不正确的布尔值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T05:11:51.043

A）这样的代码是一个错误：

```
if (someBoolean = true) 
```

您只是默默地*设置*了布尔变量，而不是对其进行测试。你要：

```
if (someBoolean == true) 
```

或者更好：

```
if (someBoolean) 
```

B）A `boolean[][]`（布尔数组的数组）不是布尔值。尝试这个：

```
if (Game.board[x][y]) 
```

# c# - 来自配置文件处理程序的具体类型的 NServiceBus ConfigureProperty

> ID：14575974
> 
> 赞同：0
> 
> 时间：2013-01-29T05:02:22.987
> 
> 标签：c#, inversion-of-control, nservicebus, nservicebus3

我正在尝试配置服务的具体实现的某些属性，该服务的某些属性设置为不同的值，具体取决于在启动时选择的配置文件，但 NSB 似乎不允许在接口的实现上配置属性。如果相关的话，我们正在使用 Castle Windsor 作为容器。

我们最初使用从 EndpointConfig 类运行的服务安装程序设置容器，如下所示：

```
public class EndpointConfig :   IConfigureThisEndpoint, 
                                AsA_Publisher, 
                                IWantCustomInitialization
{

    public void Init()
    {
        Configure.With()
                   .CastleWindsorBuilder(CreateContainer(new ServiceInstaller()))
                   .UnicastBus()
                   .XmlSerializer()
                   ;
    }

    protected WindsorContainer CreateContainer(IWindsorInstaller installer)
    {
        var container = new WindsorContainer();
        container.Register(Component.For<IWindsorContainer>().Instance(container));
            container.Install(installer);
        container.Kernel.ReleasePolicy = new Castle.MicroKernel.Releasers.NoTrackingReleasePolicy();
        return container;
    }

}

public class ServiceInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(Component.For<IService>().ImplementedBy<ServiceAdapter>());
        // ...
    }
} 
```

ServiceAdapter 有一些不在界面中的字符串属性，根据选择的配置文件需要不同的设置：

```
public interface IService 
{
}

public class ServiceAdapter : IService
{
    public string Url;
} 
```

配置文件处理程序执行以下操作：

```
Configure.Instance.Configurer.ConfigureProperty<ServiceAdapter>
    (x => x.Url, "http://url.goes.here"); 
```

但是当配置文件被加载时，它会抛出`System.InvalidOperationException: Cannot configure property for a type which hadn't been configured yet. Please call 'Configure' first.`.

是否可以在不将属性添加到接口中的情况下对具体实现进行属性注入？

# ios - UIView 切换过渡？

> ID：14575975
> 
> 赞同：0
> 
> 时间：2013-01-29T05:02:29.140
> 
> 标签：ios, objective-c, animation, uiview, core-animation

我想制作一个显示 UIImage 视图和 UIActivityIndi​​ctor 的初始屏幕，然后在应用程序完成加载后，它淡入一个新视图，我不知道如何使一个视图“淡入”（如溶解）到另一个视图而且我不确定如何“暂停”代码，直到它完成加载背景部分，有什么帮助吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:31:31.233

所以下面的代码显示了一个 1 秒的闪屏，然后它动画化了屏幕的溶解。

```
[UIView beginAnimations: @"Fade Out" context:nil];

// wait for time before begin, your splash screen shows for 1 second
[UIView setAnimationDelay:1.0];

// duration of animation, the splash screen dissolved in quarter of a second.
[UIView setAnimationDuration:0.25];
viewToDissolve.alpha = 0.0;
[UIView commitAnimations];

//animation complete, now show the main screen. you can use uinavigationviewcontroller or other methods. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:11:45.553

转到项目属性，选择目标并将图像拖放到启动图像部分。

# asp.net-mvc-3 - 将 WCF 服务引用添加到 Umbraco

> ID：14575977
> 
> 赞同：1
> 
> 时间：2013-01-29T05:02:39.807
> 
> 标签：asp.net-mvc-3, wcf, umbraco

我目前使用集成到 asp.net mvc 3 应用程序的 Umbraco 4.11。我试图通过在 Visual Studio 中选择添加服务引用来引用 umbraco 项目中的 wcf 服务，但一旦添加服务库，我似乎无法访问它。我试图查看对象视图浏览器，但找不到 wcf 服务的对象命名空间。我错过了什么吗？这种在 umbraco 中使用 wcf 服务的方法可行吗？我不喜欢使用使用用户控件来访问 wcf 服务的单独项目，因为这样做似乎很乏味。

添加服务引用时出现警告：无法导入 wsdl:portType 详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.DataContractSerializerMessageContractImporter 错误：无法加载文件或程序集 'umbraco，版本 = 1.0。 4090.38017，Culture=neutral，PublicKeyToken=null' 或其依赖项之一。该系统找不到指定的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:57:02.640

您可能希望在单独的项目中设置服务引用，然后迁移 dll 和 web.config 设置。然后你应该能够在添加 using 语句后通过 razor 访问你的 Web 服务。

问题是由于与 umbraco 冲突，没有生成服务的代码文件。[您也可以使用svcutil.exe](http://msdn.microsoft.com/en-us/library/aa751905.aspx)手动生成代码文件。

# iphone - 如何使用 NSUserDefaults 将“充满对象的 MutableArray”传递给另一个类？

> ID：14575980
> 
> 赞同：1
> 
> 时间：2013-01-29T05:03:01.317
> 
> 标签：iphone, objective-c, xcode, nsmutablearray, nsuserdefaults

如何通过使用将“`MutableArray`充满对象”传递给另一个类`NSUserDefaults`？我知道如何通过“ `MutableArray`”，但这不起作用！

所以;

我有一个可变数组；' `myCityObjects`'，然后我用对象填充它；' `cities`' 在每个 ' `cities`' 对象中都有诸如`cityName`等属性`cityLocation`...

```
[myCityObjects addObject:cities]; 
```

现在，我想做的是`MutableArray`使用 ' ' 将这个（充满对象）传递给另一个类`NSUserDefaults`；

```
[[NSUserDefaults standardUserDefaults] setObject: myCityObjects forKey:@"MCO"]; 
```

而在另一个班级，

```
NSMutableArray *getMyCityObjects = [[NSArray alloc] init];

getMyCityObjects = [[NSUserDefaults standardUserDefaults] mutableArrayValueForKey:@"MCO"]; 
```

但它不起作用！我不能进入`myCityObjects`其他班级，“ `getMyCityObjects`”是空的。我该如何解决？

谢谢，E。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T05:26:20.430

**NSUserDefaults 总是返回不可变对象，即使原始对象是可变的。**

在您的第一个视图中，您可以像这样在 NSUserDefaults 中保存值：

```
NSMutableArray *arr= [NSMutableArray arrayWithObjects:@"asd",@"dsa",nil];
[[NSUserDefaults standardUserDefaults] setObject:arr forKey:@"MCO"]; 
```

在另一个视图中，您可以通过这种方式从 NSUserDefaults 中检索值。

```
NSMutableArray *abc = [NSMutableArray arrayWithArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"MCO"]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T05:51:27.627

您的数组为零，因为其中的对象（您的自定义对象）无法序列化。

请看一下 NSCoding 协议。您想要序列化的对象（例如，用于写入 NSUserDefaults）必须实现方法`-encodeWithCoder:`和`-initWithCoder`.

我相信你会发现搜索我给你的术语很容易做到这一点......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T05:40:52.907

我以前遇到过这个问题。NSUserDefaults 的问题在于它只能包含字符串、数字和布尔值，以及这些类型值的数组或字典。我的解决方案是通过将所有属性存储在 NSDictionaries 中来解决这个问题。

在“城市”类（我称之为 CityClass）上创建两个类函数：

```
+(NSDictionary *)dictionaryFromCity:(CityClass *)myCity {
    NSDictionary *returnDict = @{@"keyForIntProperty" : myCity.intProperty, @"keyForFloatProperty" : myCity.floatProperty, @"keyForNSStringProperty", myCity.NSStringProperty"};
    return returnDict;
}

+(CityClass *)cityFromDictionary:(NSDictionary *)myDict {
    CityClass *returnCity = [[CityClass alloc] init];
    returnCity.intProperty = [[myDict objectForKey:@"keyForIntProperty"] intValue];
    returnCity.floatProperty = [[myDict objectForKey:@"keyForFloatProperty"] floatValue];
    returnCity.NSStringProperty = [myDict objectForKey:@"keyForNSStringProperty"];
    //any other setup for the CityClass
    return returnCity;
} 
```

现在，您可以使用新功能毫无问题地存储和检索您的对象：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

//store a CityClass object
NSDictionary *storageDict = [CityClass dictionaryFromCity:cityToStore];
[defaults setObject:storageDict forKey:@"keyForCity"];

//retrieve a CityClass object
NSDictionary *retrieveDict = [defaults objectForKey:@"keyForCity"];
CityClass *retrievedCity = [CityClass cityFromDictionary:retrieveDict]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T05:13:53.080

您可以在这里做的是在您的其他类中创建一个构造函数，例如

```
-(void)initWithArrayOfObject:(NSMutableArray *)arr_OfObjects;
{
    arr_SecondClassArrayOfObjects = [[NSMutableArray alloc]initWithArray:arr_OfObjects];

} 
```

从你的第一堂课发送这个数组：

```
[objOfSecondClass initWithArrayOfObject: myCityObjects]; 
```

# networking - QuickFix 使用管道、共享内存、消息队列等

> ID：14575981
> 
> 赞同：0
> 
> 时间：2013-01-29T05:03:14.740
> 
> 标签：networking, tcp, quickfix

这是我的场景：在我的应用程序中，我有几个使用内部使用 tcp 套接字的 Quickfix 相互通信的进程。流程如下：

进程1发送quickfix消息->进程2在处理来自进程1的消息后发送quickfix消息->.....->进程n

类似地，确认消息的流程如下，

进程 n->....-> 进程 1

现在，除了最后一个进程（进程 n ）之外的所有这些进程都在同一台机器上。我搜索了一下，发现 tcp 套接字是最慢的 ipc 机制。

那么，有没有办法通过其他 ipc 机制传输和接收快速修复消息（显然使用他们的 api）。如果是，我可以通过在同一台机器上的所有进程之间使用该 ipc 机制来减少延迟。

但是，如果我这样做，这些机制是否可以像 tcp 套接字那样保证完整消息的传输？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:22:58.117

我认为您正在做过早的优化，我认为 TCP 不会成为您的性能瓶颈。您的本地 LAN 延迟将比您的外部 FIX 连接更快。根据经验，我希望性能问题源于您的应用程序的消息处理（可能是由于`OnMessage()`回调中的意外阻塞），而不是随后发生的 IPC 问题。

**建议：**使用抽象层接口编写您的通信组件，以便以后如果您决定可能需要它，您可以将 TCP 换成其他东西（例如 ActiveMQ、ZeroMQ 或您可能考虑的任何其他东西）。

除此之外，只需专注于使您的系统正常工作。一旦你确定行为是正确的（希望通过测试来确认它们），那么你就可以提高性能了。 **在进行任何优化之前测量您的性能**，然后在进行“改进”之后再次测量。不要相信你的直觉；得到数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:51:37.833

虽然很高兴听到有关与此问题相关的要求的更多详细信息，但我建议查看共享内存解决方案。我假设您正在使用交易匹配引擎在托管设施中运行服务器，并使用高速、内核绕过通信进行外部通信。TCP 的问题之一是用户/内核空间转换。我建议考虑 IPC 的用户空间共享内存并使用繁忙轮询技术进行同步，而不是使用可能还涉及内核转换的同步机制。

# c# - 如何根据用户选择设置定时器？

> ID：14575989
> 
> 赞同：0
> 
> 时间：2013-01-29T05:03:46.250
> 
> 标签：c#

我正在开发一个小程序，一切正常。`timer`不过，我不想使用硬编码，而是将`timers` `interval`from 形式从 a`listbox`或 a`numericupdownbox`或类似的`combobox`东西更改。

因此，我希望能够在`form`1000-10000 毫秒的小菜单上更改它，而不是像它那样硬编码 3000MS。

问题是，我不确定如何告诉它`timer`使用可选框中指定的间隔。

是否可以？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:05:50.777

您可以在您的更改事件中将[计时器](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)`interval`的 设置为您喜欢的值。`combobox`

```
private void ComboBox1_SelectedIndexChanged(object sender, System.EventArgs e)
{
   ComboBox comboBox = (ComboBox) sender;
   aTimer.Interval = double.Parse(ComboBox1.SelectedValue);
} 
```

如果您不能确保设置间隔的有效数据，您应该使用[double.TryParse 。](http://msdn.microsoft.com/en-us/library/system.double.tryparse.aspx)如果该值是从 a 中获取的`combobox`并且它是只读的，那么就不需要`TryParse`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T05:21:20.410

如果您要使用允许非数字输入的控件，例如`TextBox`确保您验证输入实际上是数字。最好先捕获错误，而不是稍后处理异常。

```
private void SetIntervalButton_Click(object sender, EventArgs e)
{
    int interval = 0;
    bool success = Int32.TryParse(intervalTextBox.Text, out interval);

    if(success)
    {
        operationTimer.Interval = interval;
    }
} 
```

如果您使用`NumericUpDown`控件，则可以省略上面的检查，因为它只允许使用数值。

```
private void SetIntervalButton_Click(object sender, EventArgs e)
{
    operationTimer.Interval = (int) numericUpDown1.Value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T05:08:01.863

你可以试试：

```
myTimer.Interval  = (int) myTextbox.Text; 
```

如果您希望每次更改文本框值时都触发它，则可以将其放入 textchanged 事件中。

# c# - 在浏览器 C# 中查看 XLSX 文件

> ID：14575991
> 
> 赞同：0
> 
> 时间：2013-01-29T05:04:00.710
> 
> 标签：c#, excel, internet-explorer, google-chrome

我想在浏览器中查看 XLSX 文件，就像我们在那里阅读 PDF 文件一样。我应该使用什么插件或代码来实现它？

我在 Intranet 中运行网站，所有用户都在他们的 PC 上安装了办公室。他们想在浏览器中查看文件而不是下载然后查看。我的目标浏览器是 IE 和 chrome。

让我知道评论。谢谢你。

# r - 编写一个输出多个回归结果的函数

> ID：14575997
> 
> 赞同：1
> 
> 时间：2013-01-29T05:04:34.687
> 
> 标签：r, matrix, regression

我有一个大型数据框，其中包含包括美国在内的 7 个不同国家（列）从 1970 年 1 月到 2009 年 12 月（行）的月度股票收益。我的任务是使用 4 个不同时间段（即 70 年代、80 年代、90 年代和 00 年代）的值对每个国家的股票收益（因变量）回归美国股票收益（自变量）。

数据集 (.csv) 可在以下网址下载： [https ://docs.google.com/file/d/0BxaWFk-EO7tjbG43Yl9iQVlvazQ/edit](https://docs.google.com/file/d/0BxaWFk-EO7tjbG43Yl9iQVlvazQ/edit)

这意味着我有 24 个回归要单独运行并报告结果，我已经使用该`lm()`函数完成了这些。但是，我目前正在尝试更智能地使用 R 并创建自定义函数来实现我的目的并产生 24 组结果。

我创建了子数据框，其中包含根据知道十年中有 120 个月的时间段聚类的观察结果。

```
seventies = mydata[1:120, ] # 1970s (from Jan. 1970 to Dec. 1979)
eighties = mydata[121:240, ] # 1980s (from Jan. 1980to Dec. 1989)
nineties = mydata[241:360, ] # 1990s (from Jan. 1990 to Dec. 1999)
twenties = mydata[361:480, ] # 2000s (from Jan. 2000 to Dec. 2009) 
```

注意：每个新创建的变量都是 120 x 7 矩阵，用于 7 个国家/地区的 120 次观察。

使用 Java 运行 24 次回归将需要使用叠瓦式`for`循环。

谁能提供我必须采取的步骤来编写一个能够达到预期结果的函数？一些 R 代码片段也将不胜感激。我也认为该`mapply`功能将被使用。

谢谢，如果我的帖子需要编辑，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:29:02.437

该`lm`函数将接受一个矩阵作为响应变量，并为每一列计算单独的回归，因此您可以将 ( `cbind`) 不同国家/地区组合在一起。

如果您愿意假设不同的十年具有相同的方差，那么您可以使用十年的虚拟变量来拟合不同的十年（查看该`gl`函数以快速计算十年因子）并在一次调用中完成所有操作`lm`。一个简单的例子：

```
fit <- lm( cbind( Sepal.Width, Sepal.Length, Petal.Width ) ~ 0 + Species + Petal.Length:Species,
    data=iris ) 
```

这将给出与单独回归相同的系数估计，只有标准偏差和自由度（以及因此测试和任何其他依赖于这些的）将不同于单独运行回归。

如果您需要为每个十年单独计算标准偏差，那么您可以使用`tapply`或`sapply`（将十年信息传递给 的`subset`参数`lm`）或其他应用函数。

为了显示来自几个不同回归模型的结果，新的 stargazer 包可能很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T17:39:42.500

尝试将“stargazer”包用于出版质量的文本或 LaTeX 回归结果表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T05:12:59.680

尝试这个：

```
 install.packages('plyr')
 library('plyr')
 myfactors<-c(rep("seventies",120),rep("eighties",120),rep("nineties",120),rep("twenties",120))
 tapply(y,myfactors,function(y,X){ fit<-lm(y~ << regressors go here>>; return (fit);},X=mydata) 
```

# java - JDBC中的Statement和PreparedStatement

> ID：14575998
> 
> 赞同：-4
> 
> 时间：2013-01-29T05:05:12.300
> 
> 标签：java, sql, jakarta-ee, prepared-statement

> **可能重复：**
> [Statement 和 PreparedStatement 之间的区别](https://stackoverflow.com/questions/3271249/difference-between-statement-and-preparedstatement)

我对 JDBC 中的 Statement 和 PreparedStatement 感到困惑。 PreparedStatement 是 Statement 的版本吗？或任何其他区别？任何机构都可以解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T05:10:31.380

来自Java官方教程的[Using Prepared Statements](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

> 有时使用 PreparedStatement 对象将 SQL 语句发送到数据库更方便。这种特殊类型的语句派生自您已经知道的更通用的类 Statement。
> 
> 如果要多次执行一个 Statement 对象，通常会减少执行时间而改用 PreparedStatement 对象。
> 
> PreparedStatement 对象的主要特点是，与 Statement 对象不同，它在创建时被赋予一条 SQL 语句。这样做的好处是，在大多数情况下，此 SQL 语句会立即发送到 DBMS，并在其中进行编译。因此，PreparedStatement 对象不仅包含一条 SQL 语句，还包含一条已预编译的 SQL 语句。这意味着当 PreparedStatement 被执行时，DBMS 可以直接运行 PreparedStatement SQL 语句，而无需先编译它。
> 
> 尽管 PreparedStatement 对象可用于不带参数的 SQL 语句，但您可能最常将它们用于带参数的 SQL 语句。使用带参数的 SQL 语句的优点是您可以使用相同的语句并在每次执行时为其提供不同的值。这方面的示例在以下部分中。