# StackOverflow 问答 15929000-15929999

# jsf-2 - 将 XML 文件生成到用户指定的位置

> ID：15929000
> 
> 赞同：1
> 
> 时间：2013-04-10T14:41:28.380
> 
> 标签：jsf-2, jaxb, richfaces, download

我正在使用 JAXB 生成一个 xml 文件，但目前文件是在指定位置生成的，如何使用浏览按钮指定文件夹的位置来保存生成的文件。已尝试使用 HTML 的 input type="file"，但它对于上传文件很有用。希望它仅从富人脸中进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:53:58.343

`Content-Disposition`只需将其与值为.的标头一起直接写入 HTTP 响应即可`attachment`。这将强制浏览器弹出“*另存为*”对话框。

因此，基本上您需要做的就是在设置正确的标头后将 XML 树直接编组到[HTTP 响应](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExternalContext.html#getResponseOutputStream%28%29)的输出流，而不是文件的输出流。

```
FacesContext fc = FacesContext.getCurrentInstance();
ExternalContext ec = fc.getExternalContext();
// ...

ec.responseReset(); // Make sure the response is clean and crisp.
ec.setResponseContentType("text/xml"); // Tell browser which application to associate with obtained response.
ec.setResponseCharacterEncoding("UTF-8"); // Tell browser how to decode the characters in obtanied response.
ec.setResponseHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\""); // Tell browser to pop "Save As" dialogue to save obtained response on disk.
marshaller.marshal(model, ec.getResponseOutputStream()); // Look ma, just marshal JAXB model straight to the response body!
fc.responseComplete(); // Tell JSF that we've already handled the response ourselves so that it doesn't need to navigate. 
```

注意：无法通过 ajax 下载文件。记得关闭调用此方法的 RichFaces/Ajax4jsf 命令组件的 ajax 功能（如果有）。

### 也可以看看：

*   [如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)

# maven - Jenkins / Maven 发布插件（级联发布）

> ID：15929006
> 
> 赞同：2
> 
> 时间：2013-04-10T14:42:01.920
> 
> 标签：maven, jenkins, maven-3, maven-release-plugin, artifactory

我有一堆具有足够依赖关系的项目，以至于想到单击“执行 Maven 发布”并在每个依赖项上手动输入我的 SVN 用户名/密码，自下而上，带来了浓密的拖延迷雾。

所以理想情况下，我会去我在 Jenkins 中的顶级项目，单击一个执行“mvn release:prepare”的按钮，瞧，所有的依赖项和项目本身都会被释放。

我的设置是 Maven3、SVN、Jenkins、Artifactory ......

有没有办法从詹金斯运行“mvn release:prepare”，它会释放家属？有这个插件吗？

如果我尝试在本地运行此命令，我有一个错误：很高兴释放所有依赖项，但是当涉及到释放主项目时，它会在 Artifactory 中查找已发布的依赖项 jar。但当然它们不在那里——它们在我的本地仓库中，但不在 artifactory 的仓库中。我更愿意在构建服务器上执行此操作，因为它不会有我的环境的任何特质。

但是如果没有 jenkins 插件，我怎么能在本地发布，并且仍然让 Artifactory/Jenkins 记录最新版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:58:13.623

[我更新了答案以提供更好的方法]

你有[M2Release 插件](https://wiki.jenkins-ci.org/display/JENKINS/M2+Release+Plugin)和[maven-versions 插件](http://mojo.codehaus.org/versions-maven-plugin/)。我不认为你可以轻易地做你想做的事。所以我会写一个这样的脚本：

*   发布 C（MVN 发布）
*   更新 A 和 B 中的 C 版本（mvn 版本：use-next-releases）
*   版本 B（MVN 版本）
*   更新 A 中的 B 版本（mvn 版本：use-next-releases）
*   发布 A（MVN 发布）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T23:19:50.287

我也一直在研究这个。以前我使用 ruby​​ 脚本，然后使用 REST 为 Jenkins 推送构建。当然，设置每个新项目有点痛苦，但它确实有效。维护它是一场噩梦。

前几天我偶然发现了这个。我还没有实现它，但听起来很有希望。当然，我要解决的部分问题是父级拥有每个项目的所有依赖项（呃）。

这是问题集和讨论的链接：

[https://groups.google.com/forum/#!msg/jenkinsci-users/4OZsB9LV6nE/YsyqhuMcZQgJ](https://groups.google.com/forum/#!msg/jenkinsci-users/4OZsB9LV6nE/YsyqhuMcZQgJ)

这是实际插件的链接。可能值得一试。

[https://github.com/barchart/barchart-jenkins-cascade-plugin/wiki](https://github.com/barchart/barchart-jenkins-cascade-plugin/wiki)

# c++ - C++初学者：使用命名空间错误

> ID：15929008
> 
> 赞同：2
> 
> 时间：2013-04-10T14:42:02.763
> 
> 标签：c++

我是 C++ 的新手，我无法解决下面的编译错误。

数据结构.h

```
#include <stdint.h>
#include <list>

namespace A {

        class B {
            public:

            bool        func_init(); // init
            };

}; 
```

数据结构.cpp

```
#include "data_structure.h"

using namespace A;

bool B::func_init(){

    std::cout << "test init" << std::endl;
    return true;

} 
```

主文件

```
#include    <iostream>
#include    "data_structure.h"

using namespace A;

int main( int argc, char **argv ) {

    A::B s;
    s.func_init();

    return 0;
} 
```

我有如下错误

> 对“A::B::func_init()”的未定义引用

请告知为什么我无法获得 func_init，即使它被声明为公共？我在那里也放了正确的命名空间。

任何回应将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:43:52.677

这是一个链接器错误，因此您可能没有编译所有源文件，或者将它们链接在一起，或者对 C 编译器进行了一些奇怪的使用（我看到您的文件具有扩展名`.c`，一些编译器将它们视为 C 源）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:56:13.673

`g++ main.cpp data_structure.cpp -o test`应该这样做。

但是我确实需要添加`#include <iostream>`到您的 data_structure.cpp 文件来解决

```
data_structure.cpp: In member function ‘bool A::B::func_init()’:
data_structure.cpp:7:5: error: ‘cout’ is not a member of ‘std’
data_structure.cpp:7:33: error: ‘endl’ is not a member of ‘std’ 
```

并使其编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:08:46.073

函数的**定义**必须在声明函数的命名空间中。声明只是从`using`命名空间中提取名称；它不会把你放在里面。所以你必须这样写 data_structure.cpp ：

```
#include "data_structure.h"
#include <iostream>

namespace A {
bool B::func_init() {
    std::cout << "test init" << std::endl;
    return true;
}
} 
```

或者，如果您愿意，可以在函数定义中显式使用命名空间名称：

```
bool A::B::func_init() {
    std::cout << "test init" << std::endl;
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:56:00.297

你试过不放

```
using namespace A; 
```

在你的 data_structure.cpp 文件中，而不是把：

```
#include "data_structure.h"

bool A::B::func_init() {
   std::cout << "test init" << std::endl;
   return true;
} 
```

我有一种感觉，当您使用时`using namespace A;`不会让您将函数定义附加到命名空间，而只会告诉编译器/链接器在哪里寻找类型或函数......

另一种理论：您是否尝试过将 CPP 代码嵌套在同一个命名空间中？

```
#include "data_structure.h"

namespace A {
   bool B::func_init() {
      std::cout << "test init" << std::endl;
      return true;
   }
} 
```

# c# - 动态移动暂停按钮矩形正确但绘制不正确

> ID：15929009
> 
> 赞同：1
> 
> 时间：2013-04-10T14:42:03.217
> 
> 标签：c#, drawing, mouse, xna-4.0, collision

我有一个基本的按钮类，当鼠标悬停在按钮上时它会发光并适用于我的主菜单。但是，使用暂停功能，我的 x 值将一直不同。我有一个相机类，它改变视口并根据玩家的位置滚动。这一切都很好。然而，当我引入暂停选项时，绘制的“按钮”被正确放置，但是用于鼠标检测的矩形距离它有一段距离。

```
replay.SetPosition(new Vector2(camera.viewport.Width / 4 + 50,camera.centre.Y));
//replay.SetPosition(new Vector2((int)camera.centre.X , (int)camera.centre.Y);
replay.Update(mouse); 
```

被注释掉的人正确地绘制了图像，但矩形偏离了。未注释的版本具有正确的矩形位置，但图像当前保持在 200(x),250(y)

```
if (isPaused)
{
    spriteBatch.Draw(pauseTexture,pauseRectangle, Color.White);
    //replay.Draw(spriteBatch);
    exit.Draw(spriteBatch);
    mainmenu.Draw(spriteBatch);
} 
```

相机类更新元素：

```
public void Update(Vector2 position, int xOffset, int yOffset)
{
    if (position.X < viewport.Width / 4)
        centre.X = viewport.Width / 4;
    else if (position.X > xOffset - (viewport.Width / 4))
        centre.X = xOffset - (viewport.Width / 4);
    else centre.X = position.X;
} 
```

如果需要，我将在一天的大部分时间里添加信息。感谢所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:58:07.763

不幸的是，我还没有足够的代表发表评论，所以根据给出的信息，我会尽力回答。

听起来*您的菜单项的矩形和位置没有一起更新*。假设您的位置为 (0,0)，矩形为 (0, 0, 100, 100) - (x, y, width, height)，因此矩形从 (0, 0) 延伸到 (100, 100 ）。例如，如果将位置更新为 (100, 100)，则还必须将矩形的 x 和 y 坐标更新为 (100, 100)，因此矩形现在从 (100, 100) 延伸到 (200, 200) .

我没有从您的代码示例中获得足够的信息来告诉您哪里出了问题，但据我所知，这就是正在发生的事情。

另一方面..如果您将相机的转换矩阵传递给`SpriteBatch.Begin(...)`并且您还在该`SpriteBatch.Begin...End`部分中对您的HUD元素进行绘制调用，您应该考虑在没有传入相机的转换矩阵的情况下制作另一个`SpriteBatch.Begin...End`部分。这样您的HUD元素' 与世界坐标相比，位置将位于屏幕坐标中，您不会遇到这样的问题。HUD 元素通常不会改变位置，除非您当然允许它们，但与世界坐标相比，您仍将在屏幕坐标中工作。

示例：（请记住，我不记得参数的确切用途`SpriteBatch.Begin(...)`，但这应该会有所帮助）

```
//Main Draw function
public void Draw() {
    //World Coordinates
    spriteBatch.Begin(cameraTransformationMatrix);
    //Draw all world coordinate objects
    //Player, Enemies, Walls, etc.
    spriteBatch.End();

    //Screen Coordinates
    spriteBatch.Begin();
    //Draw all screen coordinate objects
    //Menus, In-Game HUD elements, etc.
    spriteBatch.End();
} 
```

# class-design - 是否可以使用父表 ID 而不是子表 ID，当子表应将其 Id 放入另一个表时

> ID：15929012
> 
> 赞同：0
> 
> 时间：2013-04-10T14:42:10.797
> 
> 标签：class-design, uml, class-diagram

我的类图中的某些类之间有这种泛化关系。FirstClass 作为具有 Name 属性的基类，SecondClass 作为派生类，FirstClass 是它的基类并具有一些其他属性，最后是 ThirdClass 是 SecondClass 的派生类，它也具有一些其他属性。ThirdClass 作为与 Widget 类 1.* 的关联关系。

![在此处输入图像描述](https://i.stack.imgur.com/8ytZp.png)

* * *

当我想从类图中实现数据模型时，我使用了 Joined 策略。所以 FirstTable 在 SecondTable 中有它们的 Pk，而 SecondTable 在 ThirdTable 中有它的 PK。如您所见，第三张表应该在 Widget 类中有它的 PK。每当我想将小部件表与第三个表连接时都会产生一些成本，因为我需要从第一个表中获取名称。

我从 FirtTable （实际上它是基类）中读取 Id 并将其放入 Widget 表中是否合适？

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:14:18.247

我认为问题在于，如果这样做，则无法阻止 Widget 与不是 ThirdTable 实例的 FirstTable 实例相关联。

也许您可以同时放置 ThirdTable id 和 FirstTable id，但在这种情况下，您必须管理安全控制以确保两个 id 之间的一致性。

在这两种情况下，我都反对。如果连接成本对您来说是个问题，您应该考虑使用“单表”继承策略。

# .net-4.0 - TaskEx.WhenAll 和异常

> ID：15929013
> 
> 赞同：3
> 
> 时间：2013-04-10T14:42:11.017
> 
> 标签：.net-4.0, exception-handling, task-parallel-library, c#-5.0, async-ctp

我受限于使用 .NET 4.0 框架和 Async CTP 扩展来执行以下操作：

```
 var dataTasks = _tasks.Select(t => t.GetData(keys));

     var results = TaskEx.WhenAll(dataTasks).Result.ToList(); 
```

其中 _tasks 是一个对象列表，每个对象都提供一个 GetData 方法，该方法返回一个. `Task`<Data`>`

我的问题是其中一个`dataTasks`是抛出异常并破坏整体。我希望能够检查每个 dataTask 的结果并检查结果，记录任何异常，然后继续处理任何有效结果。不过，我现在不确定要不要去做。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T18:55:45.320

做到这一点的一种方法是使用琐碎`ContinueWith()`的方法将潜在的故障更改`Task<T>`为成功的`Task<Task<T>>`. 如果你`WhenAll().Result`在那个（或`await WhenAll()`）上使用，你会得到`Task<T>[]`，这正是你所需要的：

```
var dataTasks = _tasks.Select(t => t.GetData(keys).ContinueWith(c => c));

Task<T>[] results = Task.WhenAll(dataTasks).Result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:45:15.163

`TaskEx.WhenAll(dataTasks)`是你的综合任务。它可能有故障。

调用`Result`它时会引发异常。所以不要那样做。检查`Exception`or`IsFaulted`属性。

# java - Java 中的递归（DirectoryAnalyser）

> ID：15929014
> 
> 赞同：-4
> 
> 时间：2013-04-10T14:42:11.023
> 
> 标签：java, file, recursion, directory, int

基本上我写了一个程序，它将显示文件和目录列表是一个被选中的文件夹。我要做的只是在该选定文件夹中显示一些文件和目录，但它向我显示的只是该文件夹中的文件列表。为了更清楚地解释它，这是我的代码并运行它以了解程序在做什么，我的问题基本上是如何只显示该文件夹中的文件和目录的数量。

```
import java.io.File;

public class DirectoryAnalyser {
public static void main(String[] args) {
    DirectoryAnalyser stats = new DirectoryAnalyser();
    stats.processFile(".");
    stats.displayStatistics();
}

private int numFiles;
private int numDirectories;

public DirectoryAnalyser() {
    numFiles = 0;
    numDirectories = 0;
}

public void processFile(String file) {
    File root = new File(file);
    File[] list = root.listFiles();
    for (File f : list){
        if(f.isDirectory()){
            processFile(f.getAbsolutePath());
            System.out.println("Dir:" + f.getAbsoluteFile());
        }else if(f.isFile()){
            System.out.println("File:" + f.getAbsoluteFile());
        }
    }
}

public void displayStatistics() {

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:47:29.593

您需要使用您的`processFile(String)`方法来计算文件和目录的数量并在发现它后打印。它会是这样的：

```
public void processFile(String file) {
   File root = new File(file);
   File[] list = root.listFiles();
   this.numFiles = 0;
   this.numDirectories = 0;

   for (File f : list) {
       if (f.isDirectory()) {
           numDirectories++;
           processFile(f.getAbsolutePath());
       } else if (f.isFile()) {
           numFiles++;
       }
   }
}

public void displayStatistics() {
    System.out.format("Total of file: %d\nTotal of directories: %d\n", numFiles, numDirectories);
} 
```

如果你不在你的类中保留一个状态并返回一个包含结果的类然后你打印它会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:59:02.160

好的。我给你一个提示。

这是您的`displayStatistics()`方法应如下所示：

```
public void displayStatistics() {
   System.out.println("Number of files: " + numFiles);
   System.out.println("Number of directories: " + numDirectories); 
```

}

现在剩下的就是找到合适的位置来增加这两个计数器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T15:04:27.493

这是我对我的问题的回答的完整代码，并感谢你提供帮助的每一个人。

```
import java.io.File;

public class DirectoryAnalyser {
public static void main(String[] args) {
    DirectoryAnalyser stats = new DirectoryAnalyser();
    stats.processFile("/Users/ThamerMashhadi/Desktop/");
    stats.displayStatistics();
}

private int numFiles;
private int numDirectories;

public DirectoryAnalyser() {
}

public void processFile(String file) {
    File root = new File(file);
    File[] list = root.listFiles();
    for (File f : list) {
        if (f.isDirectory()) {
            numDirectories++;
            processFile(f.getAbsolutePath());
            // System.out.println("Directories:" + f.getAbsoluteFile());
        } else if (f.isFile()) {
            numFiles++;
            // System.out.println("File:" + f.getAbsoluteFile());
        }
    }
}

public void displayStatistics() {
    System.out.println("Total of file:" + numFiles);
    System.out.println("Total of directories:" + numDirectories);
}
} 
```

# asp.net-mvc - 如何使用基于令牌的 HTTP 基本身份验证保护 MVC 4 .NET SPA 模板中的 WebAPI？

> ID：15929018
> 
> 赞同：2
> 
> 时间：2013-04-10T14:42:30.157
> 
> 标签：asp.net-mvc, oauth, asp.net-web-api, basic-authentication, single-page-application

我一直在阅读有关保护 WebAPI 主题的不同文章，包括：

[最低特权文章](http://leastprivilege.com/2012/10/24/extensions-to-the-web-apimvc-formsbasic-auth-sample-claims-transformation-and-ajax/)

[凯文·荣汉斯的文章](http://kevin-junghans.blogspot.com/2013/02/mixing-forms-authentication-basic.html)

[彼得瓦拉特的文章](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/#more-405)

和许多其他人。

我想使用 MVC 4.NET SPA 模板（带有 Backbone.js 或另一个 JS lib），并且我想通过基本的 http 身份验证来保护 SPA 使用的 WebAPI，在标头中使用令牌，因为一些 WebAPI 客户端将不支持表单身份验证所需的 cookie。

SPA 模板使用 SimpleMembership 和 oauth，我想将其与基本的 http 身份验证结合使用。

我不清楚的是开箱即​​用的 SPA 模板是否使用基本的 HTTP 身份验证和令牌对 WebAPI 进行身份验证和授权，还是我必须按照上面的链接将其拼凑起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T07:07:46.573

这是一个相当大的话题，最好在插入模板之前完全理解它。

这是一个很棒的视频，可以帮助您将所有内容都到位：[https ://vimeo.com/43603474](https://vimeo.com/43603474)

您必须使用 SSL 进行任何基于令牌的身份验证（如 oAuth）

一旦用户通过身份验证 - 通过 oAuth 或您自己的成员资格提供程序，您可以简单地将任何 Web Api 方法与 [Authorize] 一起使用，以确保未经身份验证的用户无法调用这些方法（将返回 401 - 如果没有，则未授权认证）

# sql - 测试程序？

> ID：15929019
> 
> 赞同：-2
> 
> 时间：2013-04-10T14:42:35.573
> 
> 标签：sql, oracle, plsql, procedure

我是 PL/SQL 的新手，我认为我在我的包体内创建了一个过程，当我在 SQL 命令中运行它时它说它已成功创建，我只是不确定如何测试它？

该过程是根据他们的 ID 删除客户

这是代码

```
 PROCEDURE remove_customer (customer_id VARCHAR2) IS
 BEGIN
 DELETE FROM customer 
 WHERE customer.customer_id = remove_customer.customer_id;
 END; 
```

关于如何测试它的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:44:59.680

您可以从[匿名块](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/overview.htm#i8859)运行它：

```
begin
    your_package.remove_customer('CUST_ID');
end;
/ 
```

如果您使用的是 SQL*Plus 或 SQL Developer，则可以使用以下[`execute`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve022.htm)命令对此进行简写：

```
exec your_package.remove_customer('CUST_ID'); 
```

然后检查您尝试删除的客户是否不再在表中...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:45:16.830

您只需将其运行为：

```
begin
  your_package_name.remove_customer('abc');
  -- commit; -- optional if you want to commit it.
end;
/ 
```

# r - 在igraph（R）中执行shortest.paths时如何获取边缘属性列表

> ID：15929022
> 
> 赞同：2
> 
> 时间：2013-04-10T14:42:43.720
> 
> 标签：r, igraph

我需要计算图中两个顶点之间最短路径的边属性的乘积。

例如：

```
data<-as.data.frame(cbind(c(1,2,3,4,5,1),c(4,3,4,5,6,5),c(0.2,0.1,0.5,0.7,0.8,0.2)))
G<-graph.data.frame(data, directed=FALSE)
set.edge.attribute(G, "V3", index=E(G), data$V3) 
```

如果我根据属性计算最短路径我有两个可能性，第一个告诉我步骤：

```
get.shortest.paths (G, 2, 6, weights=E(G)$V3) 
```

2 3 4 1 5 6

第二个告诉我沿路径的属性总和。

```
shortest.paths (G, 2, 6, weights=E(G)$V3) 
```

1.8

由于我需要制作产品，因此我需要在路径的节点之间有一个边缘属性向量。在这个例子中，我应该得到 0.8 0.2 0.2 0.5 0.1，其乘积为 0.0016。谁能建议我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:19:17.067

使用 的`output`参数`get.shortest.paths`：

```
library(igraph)
data <- data.frame(from  =c(1,  2,  3,  4,  5,  1),
                   to    =c(4,  3,  4,  5,  6,  5),
                   weight=c(0.2,0.1,0.5,0.7,0.8,0.2))
G <- graph.data.frame(data, directed=FALSE)

esp26 <- get.shortest.paths(G, 2, 6, output="epath")[[1]]
esp26
# [1] 2 3 1 6 5

prod(E(G)$weight[esp26])
# [1] 0.0016

plot(G, edge.label=paste("Id:", 1:ecount(G), "\n", "W:",
          E(G)$weight, sep="")) 
```

![阴谋](https://i.stack.imgur.com/6hxTs.png)

# javascript - 如何转发 Facebook 帖子

> ID：15929025
> 
> 赞同：0
> 
> 时间：2013-04-10T14:42:53.910
> 
> 标签：javascript, facebook, facebook-graph-api

我想通过让我的访问者转到一些 url 并按分享来转发 Facebook 帖子。

我查看了 sharer.php 和[https://www.facebook.com/dialog/feed](https://www.facebook.com/dialog/feed)但两者似乎都只给了我让用户分享链接而不是转发 Facebook 帖子的方法。

我不想简单地发布帖子的内容而是转发它，因此帖子的分享数也上升了。

我错过了什么吗，有没有办法通过一些 api 完成转发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:06:56.283

我看过一篇文章，有人试图做同样的事情，不幸的是，目前的 API 无法做到这一点。您只能获取帖子（使用帖子 ID，如果是公开的或使用访问令牌），抓取信息并创建一个新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T07:46:25.447

David Crissc Reinberger 是对的，我不能以增加分享数的方式转发帖子。

仍然有一种方法可以转发作为照片的帖子，这会增加照片帖子的共享计数：

*   发布图片

*   获取图片链接：

    例如：[https ://www.facebook.com/photo.php?fbid=10152377142043306](https://www.facebook.com/photo.php?fbid=10152377142043306)

*   获取 url 并将其添加到 sharer.php：

    例如：[https ://www.facebook.com/sharer/sharer.php?u=https://www.facebook.com/photo.php?fbid=10152377142043306](https://www.facebook.com/sharer/sharer.php?u=https://www.facebook.com/photo.php?fbid=10152377142043306)

这样，您将真正重新分享图像并增加图像帖子的共享计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T17:22:06.833

正如你所说，Facebook 不会让你重新拍摄他们的照片。

但是使用代理你可以做到这一点。代理使您可以灵活地在共享者或提要对话框之间进行选择。

提要对话框适合更好的移动网络应用程序。更快的 AMD 有更好的 UI。移动网络应用程序上**不存在共享器。**

[https://images.weserv.nl/](https://images.weserv.nl/)完成这项工作。Facebook 接受图像作为图片参数，这样您就可以转发他们的帖子。

使用示例（加上宽度和高度以提高性能）

```
'https://images.weserv.nl/?url=' + facebookImageUrl + '&h=200&w=200' 
```

# android - onContextItemSelected 不会在 DialogFragment 中调用

> ID：15929026
> 
> 赞同：12
> 
> 时间：2013-04-10T14:42:55.767
> 
> 标签：android, android-dialogfragment, android-contextmenu

我有一个显示项目列表的对话框，我需要能够编辑/删除此列表中的项目，所以我放了一个上下文菜单，所以当用户长按一个项目时，他们可以选择他们想要做什么（编辑或删除项目）。

问题是`onContextItemSelected`选择上下文菜单中的项目时永远不会被调用。

我检查了创建对话框片段的活动是否正在获取回调，但那也不是，为什么它没有被调用？你不能在对话框中做一个上下文菜单吗？

```
public class TypesDialogList extends DialogFragment implements LoaderManager.LoaderCallbacks<Cursor>,OnItemClickListener,OnCreateContextMenuListener{

ListView lv;
SimpleCursorAdapter mAdapter;
private int EDIT_TYPE = 1;
private int DELETE_TYPE = 2;
OnEditType mType;

public Dialog onCreateDialog(Bundle state){
    final View v = getActivity().getLayoutInflater().inflate(R.layout.layer_dialog_layout, null, false);
    lv = (ListView)v.findViewById(R.id.listView1);
    lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    lv.setOnItemClickListener(this);
    lv.setOnCreateContextMenuListener(this);
    return new AlertDialog.Builder(getActivity()).setView(v).setPositiveButton("Add Type", new OnClickListener(){

        public void onClick(DialogInterface dialog, int which) {

        }

    }).setTitle("Type's").create();
}

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo){
    super.onCreateContextMenu(menu, v, menuInfo);
    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
    long id = info.id;
    if(id > 3){
        menu.setHeaderTitle("Type Menu");
        menu.add(Menu.NONE, EDIT_TYPE, 1, "Edit");
        menu.add(Menu.NONE, DELETE_TYPE, 2, "Delete");
    }else{
        Toast.makeText(getActivity(),"Cannot edit type",Toast.LENGTH_SHORT).show();
    }

}

@Override
public boolean onContextItemSelected(MenuItem item) {
    super.onContextItemSelected(item);
     AdapterView.AdapterContextMenuInfo oMenuInfo = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();
     long id = oMenuInfo.id;
     if(item.getItemId() == EDIT_TYPE){

     }else if(item.getItemId() == DELETE_TYPE){

     }
     return true;
 } 
```

}

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-09-17T15:16:19.827

对于仍在寻找解决方法的任何人，我只是通过创建一个匿名`OnMenuItemClickListener`的委托来解决这个问题，`onContextItemSelected(MenuItem item)`并将其设置在我菜单中的所有项目上。

```
@Override
public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo menuInfo) {
    // Creation/inflate menu here

    OnMenuItemClickListener listener = new OnMenuItemClickListener() {
        @Override
        public boolean onMenuItemClick(MenuItem item) {
            onContextItemSelected(item);
            return true;
        }
    };

    for (int i = 0, n = menu.size(); i < n; i++)
        menu.getItem(i).setOnMenuItemClickListener(listener);
} 
```

# javascript - 无法将刻度与 d3.js 对齐

> ID：15929027
> 
> 赞同：0
> 
> 时间：2013-04-10T14:42:58.550
> 
> 标签：javascript, d3.js

使用 d3.js 使用一个条形图我无法将 x 轴上的刻度与条形对齐。

![记号在 X 轴的中心区域对齐错误](https://i.stack.imgur.com/zmGSf.png)

在左右边缘，蜱虫还可以，但在中间不行。这是代码：

```
var formatDate = d3.time.format("%e %b");
var height = 325;
var xTimeScale = d3.time.scale()
        .domain([new Date(data[0].date), d3.time.day.offset(new Date(data[data.length - 2].date), 1)])
        .range([30, width]);

var xAxis = d3.svg.axis()
        .scale(xTimeScale)
        .orient("bottom")
        .ticks(d3.time.days, .1)
        .tickFormat(formatDate);

chart.append("g")
        .attr("class", "xaxis axis") 
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

chart.selectAll(".xaxis text") 
        .attr("transform", function(d) {return "translate(" + this.getBBox().height * -2 + "," + this.getBBox().height + ")rotate(-45)";}); 
```

我错过了什么？提前致谢。

**更新：**这里是更新了[chrtan建议的](http://jsfiddle.net/v6GRS/)[jsFiddle](https://stackoverflow.com/users/1182965/chrtan)。我现在的问题是将文本与栏的中心对齐，而不是在左侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T10:01:15.803

使用 d3.js 自动计时的示例

```
// set domain for axis
var x_domain = d3.extent(data, function(d) { return new Date(d.date); });
//format date
var  date_format = d3.time.format('%Y %B');

var vis = d3.select("#graph")
    .append("svg:svg")
    .attr('class', 'chart')
    .attr("width", width)
    .attr("height", height);

var yScale = d3.scale.linear()
    .domain([0, d3.max(data, function(d) { return d.data; })]).nice()
    .range([height - padding, padding]); 
var xScale = d3.time.scale()
    .domain(x_domain)
    .range([padding, width - padding]);
// define the y axis
var yAxis = d3.svg.axis()
    .orient("left")
    .scale(yScale);
// define the x axis
var xAxis = d3.svg.axis()
    .orient("bottom")
    .scale(xScale)
    .tickFormat(date_format);
// draw y axis with labels and move in from the size by the amount of padding
vis.append("g")
    .attr("class", "axis")
    .attr("transform", "translate("+padding+",0)")
    .call(yAxis);
// draw x axis with labels and move to the bottom of the chart area
vis.append("g")
    .attr("class", "xaxis axis")
    .attr("transform", "translate(0," + (height - padding) + ")")
    .call(xAxis);

// and set data in graph... 
```

一个很好的例子：[http ://bl.ocks.org/phoebebright/3061203](http://bl.ocks.org/phoebebright/3061203)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:07:18.327

从您的图表的外观来看，您失去了一个酒吧的空间。如果所有的柱都应该与分时左对齐，那么您拥有的最后一个柱应该在 1 月 31 日分时的右侧。

您可能需要通过将 xTimeScale 的 domain() 中的 [data.length - 2] 更改为 [data.length - 1] 来添加 2 月 1 日的刻度。

然后出于显示目的，您可以使用以下命令删除最后一个刻度轴文本：

```
d3.select(chart.selectAll(".xaxis text")[0].pop()).remove(); 
```

内部 selectAll 应该获取包含您的 xAxis 刻度文本的数组，然后弹出最后一个刻度。然后应该由外部选择删除最后一个刻度。

# asp.net - 网站，在虚拟应用程序中工作在自己的网站上失败

> ID：15929039
> 
> 赞同：0
> 
> 时间：2013-04-10T14:43:23.853
> 
> 标签：asp.net, iis, windows-server-2008

我有一个 asp.net 4 项目，在测试期间在虚拟应用程序中运行，现在我更接近部署，我希望它在它自己的站点中，但是它无法正常运行。

我让站点指向同一个本地文件夹，使用同一个应用程序池，并且我认为具有相同的权限和设置。

奇怪的行为很难解释（不是完全失败，而是应用程序的部分失败），但只要说应用程序失败就足够了。

我会考虑简单地将站点重定向到正在工作的虚拟应用程序，但是我将部署到多个位置，这会使事情变得非常复杂。

我能想到的唯一想法是与虚拟应用程序不同的 root 权限相关，或者某些 mime/handler 或其他设置添加到我不知道的默认站点。

我尝试将两者都导出，并比较 xml 文件，但我对那个工具非常熟悉，所以那里没有运气。

# c# - 将数据库（.mdf 文件）附加到 SQL Server 时出错

> ID：15929043
> 
> 赞同：3
> 
> 时间：2013-04-10T14:43:36.380
> 
> 标签：c#, sql-server

我在将数据库附加`DBName.mdf`到网络 SQL Server 时遇到问题。管理员可以手动附加数据库，但如果我尝试，我会收到以下错误消息。

> 无法升级数据库“DBName”，因为它是只读的、具有只读文件或用户无权修改某些文件。使数据库或文件可写，然后重新运行恢复。（Microsoft SQL Server，错误：3415）

这是我的代码：

```
System.Data.SqlClient.SqlConnection conn = new System.Data.SqlClient.SqlConnection();
conn.ConnectionString = @"Server=" + SQLServerName + ";database=master;User ID=" + UserName + ";Pwd=" + Password; ;

try
{
    conn.Open();

    System.Data.SqlClient.SqlCommand com = new System.Data.SqlClient.SqlCommand("CREATE DATABASE DBName ON ( FILENAME = '" + @"C:\DBName.mdf" + "' ), ( FILENAME = '" + @"C:\DBName_log.ldf" + "' ) FOR ATTACH", conn);
    com.ExecuteScalar();

}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
}
finally
{
    conn.Close();
} 
```

这是 SQL Server 的详细信息

```
- Product - Microsoft SQL Server Express Edition (64-bit)
- Version - 11.0.2218.0 
```

**我可以很好地创建一个新数据库，但不能附加现有数据库。我在这里想念什么？**

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T18:45:31.147

我弄清楚了问题所在。

此链接有助于找出问题。 [http://www.sqlservercentral.com/Forums/FindPost1367859.aspx](http://www.sqlservercentral.com/Forums/FindPost1367859.aspx)

运行 SQL 服务的用户没有对该文件夹的完全访问权限。我给了用户完全许可，一切正常。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-02T12:53:39.237

我尝试通过 SQL Server Management Studio 附加时遇到了同样的错误。
以管理员身份运行 SQL Server Management Studio 为我解决了这个问题。从这里收集的信息[http://www.nickyvv.com/2013/02/database-databasename-cannot-be.html](http://www.nickyvv.com/2013/02/database-databasename-cannot-be.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-02T13:18:41.130

我也遇到了类似的问题，我使用 Butters 和 pblack 上面列出的两种方法解决了它。总结起来就是：

*   转到系统服务并找到 SQL Server 数据库服务。
*   右键单击服务并选择属性
*   转到登录选项卡
*   如果您的服务中的“登录身份”用户是用户帐户，请确保该用户帐户对该文件夹具有完全控制权。

*   如果您服务中的“登录身份”用户是“网络服务”或“本地系统”，则这些帐户应该已经具有访问权限，但请继续添加它们并赋予它们完全控制权。

*   **最后，使用管理权限**运行 SQL Server 管理工作室

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-25T06:01:13.200

我在使用 T-SQL 脚本时也遇到了类似的情况，但我通过 SSMS 选择了另一种方式。以下是一些对您通过 SQL Server Management Studio 附加 SQL MDF 文件非常有帮助的简单步骤。

1.  通过开始按钮->所有程序->SQL Server XXXX->SQL Server Management Studio
2.  登录进去
3.  选择对象资源管理器登记的数据库
4.  然后右键单击它并选择附加数据库
5.  数据库附件窗口出现在屏幕上，然后单击添加按钮
6.  然后您需要选择要附加的 MDF 文件，然后单击确定
7.  确认并单击确定
8.  数据库已成功附加。您可以在数据库列表中结帐。**

# ssis - SSIS 中的 ldap 查询问题

> ID：15929044
> 
> 赞同：1
> 
> 时间：2013-04-10T14:43:42.757
> 
> 标签：ssis, active-directory, ldap, sql-server-data-tools

我目前正在 SSDT 中使用查询 AD 的执行 sql 任务。这是我所拥有的：

```
< LDAP://ou=groups,dc=blahblah, dc=com>;
(|(cn=*_BI_*)(cn=*.BI.*));
cn 
```

结果最终写入表。在表中，我得到了诸如 AS_BI_Core、IS_BI_App 以及任何带有下划线的名称的结果。我没有得到 .BI 的任何结果。cn 这让我很困惑。如果我使用活动目录用户和计算机对 (|(cn= *.BI.* )) 进行自定义搜索，我会得到 6 个未显示在我正在写入的表中的结果。有谁知道为什么会这样？

# xml - XQuery 嵌套返回

> ID：15929045
> 
> 赞同：5
> 
> 时间：2013-04-10T14:43:45.387
> 
> 标签：xml, xml-parsing, xquery

我不太明白如何使用嵌套在返回中的 for 。例如，给定

```
<book year="1994">
    <title>TCP/IP Illustrated</title>
    <author><last>Stevens</last><first>W.</first></author>
    <publisher>Addison-Wesley</publisher>
    <price>65.95</price>
</book>

<book year="1992">
    <title>Advanced Programming in the Unix environment</title>
    <author><last>Stevens</last><first>W.</first></author>
    <publisher>Addison-Wesley</publisher>
    <price>65.95</price>
</book> 
```

我想返回以下内容：

```
<price group = "65.95">
    <book year = "1994">
    <book year = "1992">
</price> 
```

但是使用我编写的代码，我收到错误未定义变量 $b。我想知道是否有人可以告诉我我哪里出错了。谢谢！这是我的代码：

```
 for $p in distinct-values(//price)
return<price group ="{$p}">
(
  for $b in //book[price = $p]
    return <book year = "{$b/@year}"></book>
)
</price> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:29:41.350

问题是`<price group="...`元素内的所有内容都被解释为 XML。如果您希望它作为 XQuery 运行，则必须将其包装在大括号中`{...}`：

```
for $p in distinct-values(//price)
return <price group="{$p}">{
  for $b in //book[price = $p]
  return <book year="{$b/@year}"/>
}</price> 
```

在您的代码中，只有代码`{$b/@year}`被解释为 XQuery，而封闭的 FLWOR 表达式是一个 XML 文本节点。这就是查询处理器抱怨未定义变量的原因。

# unix - 创建自定义 .vimrc 在打开 vim 时出现 E216 错误

> ID：15929046
> 
> 赞同：2
> 
> 时间：2013-04-10T14:43:49.560
> 
> 标签：unix, vim, zos

我试图在我的 vim 环境中默认设置忽略大小写。

目前，`~/.vimrc`不存在。当我打开 vim 并使用`:scriptnames`查看加载了哪些脚本时，我加载了一堆`*.vim`文件。

当我创建自己的内容时`~/.vimrc`，仅包含：

```
set ic 
```

我收到以下错误：

> E216: 没有这样的组或事件: SpellFileMissing * call spellfile#LoadFile(expand('')) 按 ENTER 或键入命令继续

打开 vim 时。当我`:scriptnames`用来查看再次加载了哪些脚本时，列表顶部是我的 '.vimrc' 文件，然后是所有与以前相同的 '*.vim' 文件......

为什么会发生这种情况？

谢谢...

PS我正在使用vim 6.3版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:05:51.487

这看起来像是（较新的）Vim 运行时文件和您的旧 Vim 版本不匹配；该`SpellFileMissing`事件与 Vim 7.0 中引入的拼写检查有关。您似乎有初始化（不存在的）拼写检查的运行时文件。

升级 Vim 似乎是解决这个问题的最简单和最好的方法。

Vim 6.3 来自 2004 年，*非常*过时。应该可以安装最新的7.3版本；如果您找不到适合您的发行版的软件包（对于 Windows，请检查[Cream 项目中的二进制文件，在 Linux 上](http://sourceforge.net/projects/cream/files/Vim/)[编译](http://www.vim.org/download.php)（例如从 Mercurial 源代码）也不是很困难。

# vba - Excel VBA - 循环浏览列表框控件

> ID：15929058
> 
> 赞同：0
> 
> 时间：2013-04-10T14:44:25.617
> 
> 标签：vba, excel

我正在尝试循环浏览多个工作表，然后是每个工作表中的列表框控件，并用我的代码填充它们。我正在使用下面的代码：

```
Dim sh As Worksheet
Dim obj As OLEObject
Dim lst As MSForms.ListBox
Dim idx As Long

For idx = 1 To ThisWorkbook.Worksheets.Count
    Set sh = ThisWorkbook.Worksheets(idx)
    For Each obj In sh.OLEObjects
        If obj.progID = "Forms.ListBox.1" Then
            Set lst = obj
            If (lst.Name = "lst1") Then
                Call PopulateSimple(lst, "Table1")
            End If
        End If
    Next
Next idx 
```

不幸的是，当我将列表框设置为对象时，这似乎失败了。关于如何实现循环遍历不同工作表中的所有列表框然后填充它们的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:57:33.630

试试这个

```
Sub Sample()
    Dim sh As Worksheet
    Dim obj As OLEObject
    Dim idx As Long

    For idx = 1 To ThisWorkbook.Worksheets.Count
        Set sh = ThisWorkbook.Worksheets(idx)
        For Each obj In sh.OLEObjects
            If TypeOf obj.Object Is MSForms.ListBox Then
                If (obj.Name = "lst1") Then
                    Call PopulateSimple(obj, "Table1")
                End If
            End If
        Next
    Next idx
End Sub 
```

**解释**：您收到该错误是因为 obj 被声明为`OLEObject`和 lst as`MSForms.ListBox`并且因此类型不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:01:37.280

你不能在调用**PopulateSimple**时使用 obj，因为你知道它是一个 ListBox：

```
Dim sh As Worksheet
Dim obj As OLEObject
Dim lst As MSForms.ListBox
Dim idx As Long

For idx = 1 To ThisWorkbook.Worksheets.Count
    Set sh = ThisWorkbook.Worksheets(idx)
    For Each obj In sh.OLEObjects
        If obj.progID = "Forms.ListBox.1" Then
            'Set lst = obj
            If (obj.Name = "lst1") Then
                Call PopulateSimple(obj, "Table1")
            End If
        End If
    Next
Next idx 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:01:43.410

最简单的方法（从评论中移出）：

在我看来你需要改变

```
Dim lst as MSForms.ListBox 
```

进入

```
Dim lst as OLEObject 
```

仅此而已……

# c - 需要将值转换为 c 中文件的 int/float

> ID：15929062
> 
> 赞同：-1
> 
> 时间：2013-04-10T14:44:45.347
> 
> 标签：c, linux, file

我有一个 txt 文件，其中包含以下数据：

```
5
676.54
6453.22
7576.776
8732.2
6 
```

我需要在 C 程序中逐行读取文件。但是无论我用什么方法来读取文件，我都会得到一个字符串的值。我需要将值获取为 int 和 float 类型（取决于值）。有什么办法可以做到这一点吗？运行平台为linux。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:50:32.433

使用 fscanf()

```
FILE* f = fopen(name, mode);
float d;
fscanf(f, "%f\n", &d); 
```

但这总是会给你浮点数（使用 %lf 作为双打）。

如果您想知道格式是什么，将一行读取为字符串，然后使用 strtod() 尝试先将其读取为 int 并查看使用了多少字符串（如果全部，它是 int）和 strtod()读为双重。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:52:18.003

如果您想阅读浮点数，请使用`fscanf`百分比`%f`代码

```
float var;

while (fscanf(yourfilepointer, "%f", &var) == 1)
{
    // do your stuff with your float var
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:23:04.927

```
#include <stdio.h>
#include <stdlib.h>

typedef union _num {
    long int integer;
    double floating;
} NumberU;

typedef struct _n {
    char type;
    NumberU data;
} Number;

int main() {
    FILE *fp;
    int c,i;
    char buff[16];
    Number num[10];

    fp=fopen("data.txt","r");
    for(c=0;c<10 && NULL!=fgets(buff,sizeof(buff),fp);){
        char *ck;
        long di;
        double dd;
        di=strtol(buff, &ck, 0);
        if(*ck == '\n'|| *ck == '\0'){
            num[c].type = 'i';
            num[c++].data.integer = di;
            continue;
        }
        dd=strtod(buff, &ck);
        if(*ck == '\n'|| *ck == '\0'){
            num[c].type = 'f';
            num[c++].data.floating = dd;
            continue;
        }
        fprintf(stderr, "error input:%s\n", buff);
    }
    fclose(fp);

    for(i=0;i<c;++i){
        if(num[i].type=='i')
            printf("%ld\n", num[i].data.integer);
        else if(num[i].type=='f')
            printf("%lf\n", num[i].data.floating);
    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:50:15.823

逐行读取文件作为浮点数`X`

***如果*** `X == ((int) X)`那么它是一个`int`

***否则***它是一个`float`

```
float X;
int a;
while(fscanf(file, "%lf", X)>0) {

   if(X == ((int) X)) {
      a = ((int) X);
      printf("scanned value is integer: %d\n", a);
   } else {
      printf("scanned value is float: %lf\n", X);

   }

} 
```

# python - 使用 Google App Engine 套接字的 DNS 查询

> ID：15929065
> 
> 赞同：11
> 
> 时间：2013-04-10T14:44:52.067
> 
> 标签：python, google-app-engine, dns

我正在尝试使用对 Google App Engine 的新套接字支持来执行一些 DNS 查询。我正在使用[dnspython](http://www.dnspython.org/)执行查询，并且代码在 GAE 之外运行良好。

代码如下：

```
class DnsQuery(webapp2.RequestHandler):

    def get(self):
       domain  = self.request.get('domain')
       logging.info("Test Query for "+domain)
       answers = dns.resolver.query(domain, 'TXT', tcp=True)
       logging.info("DNS OK")
       for rdata in answers:
          rc =  str(rdata.exchange).lower()
          logging.info("Record "+rc) 
```

当我在 GAE 中运行时，出现以下错误：

```
 File "/base/data/home/apps/s~/one.366576281491296772/main.py", line 37, in post
    return self.get()   
  File "/base/data/home/apps/s~/one.366576281491296772/main.py", line 41, in get
    answers = dns.resolver.query(domain, 'TXT', tcp=True)
  File "/base/data/home/apps/s~/one.366576281491296772/dns/resolver.py", line 976, in query
    raise_on_no_answer, source_port)
  File "/base/data/home/apps/s~/one.366576281491296772/dns/resolver.py", line 821, in query
    timeout = self._compute_timeout(start)
  File "/base/data/home/apps/s~/one.366576281491296772/dns/resolver.py", line 735, in _compute_timeout
    raise Timeout 
```

当在时限内没有返回答案时，由 dnspython 引发。我已将时间限制提高到 60 秒，并且 DnsQuery 是一项任务，但仍然遇到相同的错误。

Google App Engine 套接字实现是否有任何限制，会阻止 DNS 请求的执行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T07:51:26.757

这是一个错误，将尽快修复。

作为一种解决方法，将 source='' 参数传递给 dns.resolver.query。

tcp=True 不是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T23:54:15.767

不，UDP 端口没有限制。（仅 TCP 上的 smtp 端口）。

套接字服务路由可能存在问题。请向应用引擎问题跟踪器提交问题。[https://code.google.com/p/googleappengine/issues/list](https://code.google.com/p/googleappengine/issues/list)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-24T14:47:59.223

dnspython 正在使用`socket`. 但是，socket 仅在**付费**应用程序中可用。[1](https://cloud.google.com/appengine/docs/python/sockets/)

# ruby-on-rails - 带或不带 "" 的 image_tag 语法 - 带方法 - ruby

> ID：15929067
> 
> 赞同：0
> 
> 时间：2013-04-10T14:44:52.620
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, image, syntax

去“”还是不去“”——这是个问题。

```
<%=   image_tag(@profile.image, :size => "80x80", :alt => "Picture") %> 
```

或者

```
<%=   image_tag("@profile.image", :size => "80x80", :alt => "Picture") %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:07:15.473

问自己这个问题：你有没有在任何编程语言中引用变量？可能不是。一些语言处理双引号内的变量，以便您可以编写如下字符串：`"My name is <variable>"`. 另一种方法是`"My name is "+<variable>`

所以基本上没有你不想报价`"@profile.image"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:48:40.527

如果图像的文件名是@profile.image，则使用引号。如果@profile.image 包含图像文件的名称，则不要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:50:35.330

使用`"@profile.image"`将使`src`属性等于`@profile.image`，而不是 的值`@profile.image`。

不要使用引号，除非您的图像名为“@profile.image”。

# php - 错误的PHP脚本，帮我减少28个mysql_queries

> ID：15929072
> 
> 赞同：0
> 
> 时间：2013-04-10T14:45:02.873
> 
> 标签：php, mysql

我最终得到了 PHP 中最糟糕的编写代码（它可以工作，但太可怕了！，也许你可以告诉我一个更好的方法）。我正在尝试在我的网页上显示 14 天的统计数据。我需要每天显示 4 个值（下载、上传的文件数；下载和上传的文件大小）。我有 2 个表（文件和 downloads_log），结构是：

文件 (file_name, file_size, upload_datetime) downloads_log (file_name, dl_datetime)

所以我需要以下内容：

```
Count all files uploaded from table `files` in specific day
Count all files downloaded from table `downloads_log` in specific day
SUM file_size in table `files` in specific day
SUM file_size in table `files` where files.file_name = downloads_log.file_name in specific day 
```

这就是我过去 14 天所需要的。

还有我已经完成的“脚本”：

```
 for($i = 13; $i >= 0; $i--) {
    $query_downloads  = mysqli_query($con, "SELECT files.file_name, files.file_size, downloads_log.dl_file_name, downloads_log.dl_datetime, COUNT(file_name), SUM(file_size) FROM files, downloads_log WHERE files.file_name = downloads_log.dl_file_name AND `dl_datetime` >= '".date("Y-m-d", strtotime("-$i day"))." 00:00:00' AND `dl_datetime` <= '".date("Y-m-d", strtotime("-$i day"))." 23:59:59'");
    $result_downloads = mysqli_fetch_assoc($query_downloads);

    $query_uploads  = mysqli_query($con, "SELECT file_name, file_size, COUNT(file_name), SUM(file_size) FROM files WHERE `upload_datetime` >= '".date("Y-m-d", strtotime("-$i day"))." 00:00:00' AND `upload_datetime` <= '".date("Y-m-d", strtotime("-$i day"))." 23:59:59'");
    $result_uploads = mysqli_fetch_assoc($query_uploads);
  } 
```

请建议我，如何用更简单的方法解决这个问题，不要给 mysql 带来巨大的负载，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:08:59.747

```
$i = 13;

$query = mysqli_query($con, "SELECT files.file_name, files.file_size, downloads_log.dl_file_name, downloads_log.dl_datetime, DATE(dl_datetime) AS datum, COUNT(file_name), SUM(file_size) FROM files, downloads_log WHERE files.file_name = downloads_log.dl_file_name AND `dl_datetime` >= '".date("Y-m-d", strtotime("-$i day"))." 00:00:00' AND `dl_datetime` <= '".date("Y-m-d", strtotime("-$i day"))." 23:59:59' GROUP BY DATE_FORMAT(dl_datetime, '%Y%m%d')");
while ($result = mysqli_fetch_assoc($query))
    $result_downloads[$result['datum']] = $result;

$query = mysqli_query($con, "SELECT file_name, file_size, COUNT(file_name), SUM(file_size), DATE(upload_datetime) AS datum FROM files WHERE `upload_datetime` >= '".date("Y-m-d", strtotime("-$i day"))." 00:00:00' AND `upload_datetime` <= '".date("Y-m-d", strtotime("-$i day"))." 23:59:59' GROUP BY DATE_FORMAT(upload_datetime, '%Y%m%d')");
while ($result = mysqli_fetch_assoc($query))
    $result_uploads[$result['datum']] = $result; 
```

这将查询按不同的日期分组：`GROUP BY DATE_FORMAT(upload/dl_datetime, '%Y%m%d')`通过创建唯一的日时间戳（%Y = 4 位数年份，%m = 2 位数月份，%d = 2 位数日期）

结果以日期为索引填充到数组 $result_uploads/downloads 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:10:01.850

希望这可以帮助：

```
SELECT files.file_name, files.file_size, downloads_log.dl_file_name, downloads_log.dl_datetime, COUNT(file_name), SUM(file_size) 
FROM files
join downloads_log on files.file_name = downloads_log.dl_file_name and to_days(now())-14<to_days(dl_datetime)
group by to_days(dl_datetime) 
```

在另一个查询上使用相同的想法。你会好起来的。

它每天选择过去 14 天和组。

# jquery - 除了网络自动收报机之外，制作透明背景

> ID：15929073
> 
> 赞同：0
> 
> 时间：2013-04-10T14:45:04.633
> 
> 标签：jquery, html, css

我的网页上有一个 BBC 新闻代码，[链接](http://www.dataman-solution.co.uk/bbc.php)

基本上这是空白页面上 div 框中的新闻提要，我想要做的是使白色背景透明，以便可以看到该页面下的页面，本质上这个 BBC 网络自动收报机将是一个覆盖

有人可以提供和建议吗？

如果有帮助，代码在这里是[JSfiddle](http://jsfiddle.net/mwl707/AmkHb/)（它不会工作，因为它需要另一个文件，但我希望它显示样式等。

```
 body { 
width: 1800px;
margin: auto;
background-color:transparent ???? 
    } 
```

谢谢

** 我无法访问这将覆盖的图像 **

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:49:04.417

`background-color:transparent`表示元素将显示其父元素的背景颜色。

所以你需要为 body 元素设置一些颜色

```
 body {
   background-color:Yellow;
  } 
```

现在，任何具有透明背景的元素都将显示黄色作为它的背景颜色。

如果您不想为您的`Feed`div 设置背景颜色，那么只需删除此行

```
#bbctext {
   //background-color: #61A2A7;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:53:41.510

这一行：

```
background-color:transparent; 
```

确实使所选元素的背景透明（在本例中为“body”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:54:50.267

如果您希望背景透明，则可以使用 RGBA；

```
background-color:rgba(0,0,0,0.5); 
```

警告它只适用于更现代的浏览器。不适用于 IE6、7 或 8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T15:27:32.490

您可以创建想要作为背景的图像的透明版本，并将其用作主体的背景。

# php - 在 PHP 中为特定格式创建空日期

> ID：15929074
> 
> 赞同：1
> 
> 时间：2013-04-10T14:45:04.460
> 
> 标签：php, date, datetime, default, date-format

我想为指定的日期格式获取用零填充的日期字符串。我想在外部 API 没有给出日期的情况下使用它。

例子：

```
define('DATE_FORMAT', 'Y-m-d H:i:s');

[...]

$date = SomeExternalApi::get_date();

// if date is given it's simple
if(!empty($date)){
 $date_obj = DateTime::createFromFormat(SomeExternalApi::SOME_DATE_FORMAT, $date_string);
 return $date_obj->format(DATE_FORMAT);
}else{
  // SO UGLY BELOW! :( How to use DATE_FORMAT in this case?
  return '0000-00-00 00:00:00';
} 
```

我不想像示例中那样硬编码“零字符串”，因为当我更改 DATE_FORMAT 时，我希望以新的方式格式化零。

可能没有简单的方法来格式化日期的“零字符串”，但也许这个伟大社区的某个人有更好的主意？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T00:45:57.407

我的问题的最佳答案是：不要走这条路。

您永远不需要带零的空日期 - 这非常罕见。唯一可以找到它的地方是数据库日期字段 - 如果没有日期，您将获得零格式。但这将始终是相同的格式，因此您可以将其定义为常量并将条件定义为字符串。

我问的零是不好的，因为如果您通过某些 API 将这样的零发送到任何客户端（例如移动应用程序），它就没有机会解析它 - 它会使应用程序崩溃而不会捕获错误。

而不是使用零日期表示：

*   [保存时]将空字符串放入数据库，您可以将日期字段设置为空字符串，这将变为零，在此示例中使用`UPDATE mytable SET date = "" WHERE id = 2;`字段`mytable.date`为MySQL时间戳，
*   [当获取时] 你会得到零`SELECT date FROM mytable WHERE id = 2;`，所以在你的代码中将它定义为常量字符串`0000-00-00 00:00:00`并等于来自 db 的返回值，
*   [当 API 响应时] 如果日期为空，则返回 false 而不是零。移动应用程序可以检查它是否为假，并在任何其他情况下尝试解析它。这是保持空白日期的最佳方式，并且以任何语言以任何格式检查都非常简单。比尝试解析一些奇怪的零格式要简单得多。

通常，如果我像示例中那样按条件查找日期，我会返回 false，并且每个使用此 API 的客户端都对此感到满意：

```
if(empty($date)){return false;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:53:02.993

PHP 中的日期和时间用 UNIX 时间戳表示。这可以表示的可能日期范围无法表示`'0000-00-00 00:00:00'`32 位系统上的时间戳（它是 2000 多年前）。此外，实际上创建一个`DateTime`表示这个单一时间戳的方法可能毫无意义，它表示的值是不变的。

但是，您可以通过为每个合理的格式字符定义绝对值并使用`strtr()`将它们转换为它们的特定值来做到这一点。

使用您的示例输入格式的简短示例：

```
$placeholders = array(
    'Y' => '0000',
    'm' => '00',
    'd' => '00',
    'H' => '00',
    'i' => '00',
    's' => '00'
);

return strtr(DATE_FORMAT, $placeholders); 
```

但是，当您处理表示文本元素的格式元素时，这可能会开始变得混乱，例如`D`. 正如问题中的代码所示，就我个人而言，我可能会选择一种默认格式并使用它。

# ssis - 使用 SSIS 将文件从 FTP 传输到服务器

> ID：15929077
> 
> 赞同：0
> 
> 时间：2013-04-10T14:45:12.907
> 
> 标签：ssis

这可能是一个过于简单化的问题，但在这里。

我有一个客户端，它将 xls 文件放入我们 FTP 站点上的文件夹中。我需要检查一个文件是否存在，我需要将它从 FTP 文件夹移动到服务器上的一个文件夹中。处理完成后，我需要将另一个（但不同的）xls 文件发送回同一 FTP 服务器上的文件夹。

我可以看到有一个 FTP 任务，我可以连接到 FTP 站点，但我不确定如何指定将文件发送到哪里以及如何一次只选择一个文件。

我认为，如果我只专注于第一部分，我可以将文件取回作为第二步。

所以最终结果是检查 FTP 站点上的文件夹，如果文件存在，则将其移动到服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:42:21.927

如果您以交互方式连接到 FTP 站点，SSIS FTP 任务将包含您将使用的基本 FTP语法[。](http://msdn.microsoft.com/en-us/library/ms137656.aspx)这是[对基本 FTP 语法的回顾](http://www.cs.colostate.edu/helpdocs/ftp.html)。

因此，这是您在编辑 FTP 任务时应该寻找的内容。1) 任务需要登录 FTP 服务器，2) 它需要知道它正在执行 GET 操作，3) 它需要知道它应该从 FTP 服务器检索的文件的路径和文件名，以及4）它需要知道将文件放在本地服务器上的哪个位置。

因此，在 FTP 任务编辑器中，您希望转到常规选项卡并创建 FTP 连接。然后转到文件传输选项卡，然后设置“操作”->“接收文件”，并填写本地路径和远程路径的值。（或者您可以将这些路径保存在 SSIS 变量中，并让任务从那里获取它们。）

IsTransferAscii 设置默认为 False。这意味着它将假定它正在传输二进制文件。或者，如果您告诉它像处理 Ascii 文件一样对待它，它会尝试修复行尾，以解决各种操作系统使用的回车符和换行符的不同组合。如果要逐字传输文件，则不希望这样做，但是如果要在 Windows 和 Linux 之间来回切换，则可能需要它。

您还应该学习一点交互式 FTP 语法。我经常用它来找出为什么 SSIS 在传输文件时遇到问题。转到命令提示符并键入“ftp”。然后你可以输入“？” 查看命令列表。或者只需键入“ftp yourservername”，登录，然后使用 cd 和 ls 浏览目录结构并查看其中的内容。

# php - 使用 PHP 将电子邮件文本转换为链接

> ID：15929091
> 
> 赞同：1
> 
> 时间：2013-04-10T14:46:12.837
> 
> 标签：php, mailto

根据我在这里回答的一个问题（[使用 PHP 将 HTML 替换为 HTML](https://stackoverflow.com/questions/14883967/use-php-to-replace-html-with-html)），我希望能够过滤我的电子邮件地址的输出文本，并将这些文本电子邮件转换为“mailto”链接。

这是有效的 PHP 代码，但仅用于将某些 HTML 转换为其他 HTML。我试图做的是让这个函数查找一个电子邮件地址，并将其转换为“mailto”链接。无论出于何种原因，代码都不会转换电子邮件地址。这是我的PHP：

```
function text_filter($string) {
    $search  = array('<p>__</p>',   '/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}/');
    $replace = array('<hr />',      '<a href="mailto:$2">$2</a>');
    $processed_string = str_replace($search, $replace, $string);
    echo $processed_string;
} 
```

当我使用此函数进行输出时，代码如下所示：

```
<?php text_filter( get_the_content() ); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:58:38.937

1.  `str_replace()`不使用正则表达式，用`preg_replace()`.
2.  为第一个匹配表达式添加了分隔符。
3.  固定替换从`$1`到`$2`。

```
function text_filter($string) {
    $search  = array('/<p>__<\/p>/', '/([a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4})/');
    $replace = array('<hr />', '<a href="mailto:$1">$1</a>');
    $processed_string = preg_replace($search, $replace, $string);
    echo $processed_string;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-25T10:15:16.107

@Adam Baney - 即使重复使用，这也会起作用。

```
// EMAILS
$str =  preg_replace('~(^|[\s\.,;\n\(])([a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4})~',
  '$1<a href="mailto:$2">$2</a>',
  $str);

// PHONE NUMBERS
$str =  preg_replace_callback('~(^|[\s\.,;\n\(])(?<! )([0-9 \+\(\)]{9,})~', function($m) {
  return $m[1].'<a href="tel:'.preg_replace('~[^0-9\+]~', '', $m[2]).'">'.$m[2].'</a>';
}, $str);
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:57:12.743

您不能使用`str_replace`正则表达式替换。

您将需要拆分操作。

```
function text_filter($string) {
    $search  = array('<p>__</p>');
    $replace = array('<hr />');
    $processed_string = str_replace($search, $replace, $string);
$processed_string = preg_replace('/[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}/','<a href="mailto:$2">$2</a>',$processed_string);
    echo $processed_string;
} 
```

请参阅：[http](http://www.php.net/manual/en/function.preg-replace.php) : //www.php.net/manual/en/function.preg-replace.php 更换预浸料。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-09T00:59:19.587

```
function obfuscate_email($content){

    $pattern = '#([0-9a-z]([-_.]?[0-9a-z])*@[0-9a-z]([-.]?[0-9a-z])*\\.';
    $pattern .= '[a-wyz][a-z](fo|g|l|m|mes|o|op|pa|ro|seum|t|u|v|z)?)#i';
    $replacement = '<a href="mailto:\\1">\\1</a>';
    $content = preg_replace($pattern, $replacement, $content);
    return $content;

} 
```

并添加过滤器

```
add_filter( 'the_content', 'obfuscate_email' ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-22T21:49:13.753

另一种方法是这样做，以便它可以与文本中现有的 html 链接一起使用：

```
function html_parse_text($text)
{    
    $text = preg_replace("/(?<!\")(((f|ht){1}tps?:\/\/)[-a-zA-Z0-9@:%_\+.~#?&\/\/=]+)/",
            '<a href="\\1" target=_blank>\\1</a>', $text);       
    $text = preg_replace("/([[:space:]()[{}])(www.[-a-zA-Z0-9@:%_\+.~#?&\/\/=]+)/",
            '\\1<a href="http://\\2" target=_blank>\\2</a>', $text);
    $text = preg_replace("/(?<!\")([_\.0-9a-z-]+@([0-9a-z][0-9a-z-]+\.)+[a-z]{2,3})/",
            '<a href="mailto:\\1" target=_blank>\\1</a>', $text);

    return $text;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-02T16:24:46.457

这是另一个似乎对我有用的版本。我添加了 + char 来处理“加地址”（比如 some+email@address.com）

```
function replaceemail($text) {-
    $ex = "/([a-zA-Z0-9._+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4})/";
    preg_match_all($ex, $text, $url);
    foreach($url[0] as $k=>$v) $text = str_replace($url[0][$k], '<a href="mailto:'.$url[0][$k].'" target="_blank" rel="nofollow">'.$url[0][$k].'</a>', $text);
    return $text;
} 
```

# xaml - 如何将命令添加到 ListBox.ItemTemplate

> ID：15929092
> 
> 赞同：3
> 
> 时间：2013-04-10T14:46:12.957
> 
> 标签：xaml, binding, command

我有一个使用 MVVM 的 WPF 应用程序。

此代码来自我的 ResourceDictionary.xaml

```
 <DataTemplate x:Key="LogListTemplate">
        <ListBox ItemsSource="{Binding LogList, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource HorizontalListBoxItem}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Border Style="{StaticResource ErrorBorders}">
                        <StackPanel ToolTip="{Binding Details}" Width="250">
                            <TextBlock Text="{Binding Title}" />
                            <TextBlock Text="{Binding Details}" TextWrapping="Wrap" />
                            <Button Command="{Binding AddToTempDtdFileCommand}" CommandParameter="{Binding Details}" Content="Ignore" />
                        </StackPanel>
                    </Border>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </DataTemplate> 
```

当我单击按钮时，该命令不执行。测试证实这是因为我的 Button 位于 ListBox 中。

我的问题是我无法将按钮移出 ListBox 有两个原因。

```
1\. Asthetics/UI (the button has belong with the information)  
2\. Binding to the LogList is done from within the ListBox.ItemTemplate 
```

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:26:32.103

如果命令在 中定义，`ViewModel`您可以使用`RelativeSource`. `RelativeSource`可以找到一个祖先（这是你的`View`），所以你可以使用它的`DataContext`（你的`ViewModel`）。

```
<Button Command="{Binding DataContext.AddToTempDtdFileCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type YourViewClass}}}" CommandParameter="{Binding Details}" Content="Ignore" /> 
```

# android - 这个标签和它的孩子可以被一个和一个复合drawable替换

> ID：15929096
> 
> 赞同：0
> 
> 时间：2013-04-10T14:46:22.277
> 
> 标签：android, xml, eclipse

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:gravity="center_vertical"
android:orientation="horizontal"

 >

<ImageView

    android:id="@+id/file_icon"
    style="@style/fileChooserIcon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/desc" />

<TextView
    android:id="@+id/file_name"
    style="@style/fileChooserName"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
     /> 
```

错误：`This tag and its children can be replaced by one <TextView/> and a compound drawable`

我是 android 新手，不完全理解错误是什么。某些解决方案很难使它复合但没有得到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:47:29.983

通过使用 TextView 的`setCompoundDrawable*()`方法或使用`android:drawableLeft`.

例子：

你从

```
<LinearLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
android:layout_marginTop="10dp"  
android:padding="5dp" >

<TextView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="My Compound Button" />

<ImageView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/my_drawable" />
</LinearLayout> 
```

至

```
<TextView  
    android:layout_marginTop="10dp"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:text="My Compound Button" 
    android:drawableRight="@drawable/my_drawable"
    android:padding="5dp" /> 
```

# c# - Extjs Grid Grouping - 设置默认标题/值

> ID：15929097
> 
> 赞同：2
> 
> 时间：2013-04-10T14:46:26.873
> 
> 标签：c#, grid, grouping, extjs4.1

在以下网格分组示例中。如果没有为第一条记录返回数据，我如何将第一组显示为（0 个国家/地区）。

目前，如果没有记录，第一组不会出现

![在此处输入图像描述](https://i.stack.imgur.com/rnjVO.jpg)

我需要做的是，用 (0) 计数显示第一组，而不仅仅是让它消失。有没有办法仍然显示组标题，即使没有数据，比如默认标题之类的？有任何想法吗？我需要为所有 4 个标题执行此操作

更新

```
Ext.require(['Ext.data.*', 'Ext.grid.*']);
Ext.onReady(function() {
Ext.define('Country', {
    extend: 'Ext.data.Model',
    fields: ['name']
});

var Country = Ext.create('Ext.data.Store', {
    storeId: 'country',
    model: 'Country',
    groupField: 'countryName',
    proxy: {
            type: 'ajax',
            scope: this,
            url: 'myExtjsApp/ExtjsGetRecord',
            reader: {
                type: 'json',
                root: 'data'
            }
        }
});

var groupingFeature = Ext.create('Ext.grid.feature.Grouping',{
    groupHeaderTpl: '{name} ({rows.length} Item{[values.rows.length > 1 ? "s" : ""]})'
});

var grid = Ext.create('Ext.grid.Panel', {
    renderTo: Ext.getBody(),
    collapsible: true,
    iconCls: 'icon-grid',
    frame: true,
    store: Country,
    width: 600,
    height: 400,
    title: 'Country',
    features: [groupingFeature],
    columns: [{
        text: 'Country',
        flex: 1,
        dataIndex: 'name'
    }]
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T15:13:49.247

副题：

对于您的标题模板，您还可以使用复数格式函数，而不仅仅是添加“s”：（具有讽刺意味的是，如果您不传递单数和复数参数，则会这样做）......只是一个想法。

[http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.util.Format-method-plural](http://docs.sencha.com/extjs/4.2.2/#!/api/Ext.util.Format-method-plural)

# php - 由于小的 JOIN/WHERE 过滤器，PostgreSQL Select 语句非常慢

> ID：15929100
> 
> 赞同：6
> 
> 时间：2013-04-10T14:46:38.090
> 
> 标签：php, postgresql, doctrine-orm

**2013-05-29：使用最新配置和额外信息更新问题。早些时候我在一个 virtualbox 映像中进行测试。现在我正在生产服务器上进行测试，它更好地反映了现实世界。问题现在应该完全清楚了。如果您以前帮助过我，请仔细阅读**

目前我发现 PostgreSQL 中的查询非常慢，但我不明白它怎么会很慢。我把它缩小了一点，所以在这里发布要小得多（而且速度更快，但仍然很慢！）。

小背景：在这个项目中，我有属于用户的广告。用户是该国某个区域的一部分。一个区域可以有多个子区域，因此区域表是一棵树。一个网络被分配给一个区域。在网络上过滤时，它应该过滤该区域及其树中的所有区域子项。因为我无法查询一棵无休止的树，所以我有一张可以压平这棵完整树的表格。

因此，通过 1 个查询`(SELECT area_id FROM network_area_flatdeep WHERE network_id = 1)`，我得到了属于网络 1 的所有区域： `63, 64, 65, 66, 67, 68, 69, 70`

这使得查询非常容易。

慢查询（在测试所有内容之前都已进行 VACUUM ANALYZED）：

```
EXPLAIN ANALYZE SELECT a0_.id  AS id0
FROM   advert a0_
       INNER JOIN member m6_
               ON a0_.user_id = m6_.id
       INNER JOIN area a7_
               ON m6_.area_id = a7_.id
WHERE  a0_.status IN ( 1 )
       AND m6_.status IN ( 1 )
       AND a7_.id IN (SELECT area_id FROM network_area_flatdeep WHERE network_id IN (1))
ORDER  BY a0_.created_date DESC
LIMIT  60;
                                                                                 QUERY PLAN                                                                                  
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=41.10..34695.53 rows=60 width=12) (actual time=9.327..134.581 rows=60 loops=1)
   ->  Nested Loop  (cost=41.10..2291276.69 rows=3967 width=12) (actual time=9.326..134.534 rows=60 loops=1)
         Join Filter: (a7_.id = m6_.area_id)
         Rows Removed by Join Filter: 22566
         ->  Nested Loop  (cost=41.10..821630.16 rows=317633 width=24) (actual time=0.049..39.638 rows=22666 loops=1)
               ->  Index Scan Backward using advert_created_date_idx on advert a0_  (cost=0.00..762000.64 rows=317633 width=16) (actual time=0.013..4.357 rows=2834 loops=1)
                     Filter: (status = 1)
                     Rows Removed by Filter: 21
               ->  Materialize  (cost=41.10..73.38 rows=15 width=8) (actual time=0.000..0.004 rows=8 loops=2834)
                     ->  Nested Loop  (cost=41.10..73.30 rows=15 width=8) (actual time=0.031..0.073 rows=8 loops=1)
                           ->  HashAggregate  (cost=41.10..41.18 rows=8 width=4) (actual time=0.023..0.026 rows=8 loops=1)
                                 ->  Bitmap Heap Scan on network_area_flatdeep  (cost=4.37..41.06 rows=15 width=4) (actual time=0.011..0.015 rows=8 loops=1)
                                       Recheck Cond: (network_id = 1)
                                       ->  Bitmap Index Scan on idx_c29e880034128b91  (cost=0.00..4.36 rows=15 width=0) (actual time=0.007..0.007 rows=8 loops=1)
                                             Index Cond: (network_id = 1)
                           ->  Index Only Scan using area_pkey on area a7_  (cost=0.00..4.01 rows=1 width=4) (actual time=0.002..0.003 rows=1 loops=8)
                                 Index Cond: (id = network_area_flatdeep.area_id)
                                 Heap Fetches: 8
         ->  Index Scan using member_pkey on member m6_  (cost=0.00..4.61 rows=1 width=8) (actual time=0.002..0.003 rows=1 loops=22666)
               Index Cond: (id = a0_.user_id)
               Filter: (status = 1)
               Rows Removed by Filter: 0
 Total runtime: 134.698 ms
(23 rows) 
```

子查询本身是：

```
EXPLAIN ANALYZE SELECT area_id FROM network_area_flatdeep WHERE network_id IN (1);
                                                        QUERY PLAN                                                          
------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on network_area_flatdeep  (cost=4.37..41.06 rows=15 width=4) (actual time=0.020..0.024 rows=8 loops=1)
   Recheck Cond: (network_id = 1)
   ->  Bitmap Index Scan on idx_c29e880034128b91  (cost=0.00..4.36 rows=15 width=0) (actual time=0.012..0.012 rows=8 loops=1)
         Index Cond: (network_id = 1)
 Total runtime: 0.051 ms
(5 rows) 
```

这导致：`63, 64, 65, 66, 67, 68, 69, 70`

因此，我尝试在 id 中进行硬编码。并期望它更快（但不是）：

```
EXPLAIN ANALYZE SELECT a0_.id  AS id0
FROM   advert a0_
       INNER JOIN member m6_
               ON a0_.user_id = m6_.id
       INNER JOIN area a7_
                   ON m6_.area_id = a7_.id
WHERE  a0_.status IN ( 1 )
       AND m6_.status IN ( 1 )
       AND a7_.id IN (63, 64, 65, 66, 67, 68, 69, 70)
ORDER  BY a0_.created_date DESC
LIMIT  60;
                                                                           QUERY PLAN                                                                           
----------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=17558.82..17558.97 rows=60 width=12) (actual time=56.594..56.670 rows=60 loops=1)
   ->  Sort  (cost=17558.82..17560.07 rows=498 width=12) (actual time=56.593..56.621 rows=60 loops=1)
         Sort Key: a0_.created_date
         Sort Method: top-N heapsort  Memory: 27kB
         ->  Nested Loop  (cost=0.00..17541.62 rows=498 width=12) (actual time=0.047..53.808 rows=4478 loops=1)
               ->  Nested Loop  (cost=0.00..3903.99 rows=286 width=4) (actual time=0.027..17.492 rows=8004 loops=1)
                     ->  Seq Scan on area a7_  (cost=0.00..144.78 rows=8 width=4) (actual time=0.007..0.823 rows=8 loops=1)
                           Filter: (id = ANY ('{63,64,65,66,67,68,69,70}'::integer[]))
                           Rows Removed by Filter: 5081
                     ->  Index Scan using idx_70e4fa78bd0f409c on member m6_  (cost=0.00..468.38 rows=152 width=8) (actual time=0.011..1.208 rows=1000 loops=8)
                           Index Cond: (area_id = a7_.id)
                           Filter: (status = 1)
                           Rows Removed by Filter: 2
               ->  Index Scan using idx_54f1f40ba76ed395 on advert a0_  (cost=0.00..47.49 rows=19 width=16) (actual time=0.002..0.003 rows=1 loops=8004)
                     Index Cond: (user_id = m6_.id)
                     Filter: (status = 1)
                     Rows Removed by Filter: 1
 Total runtime: 56.744 ms
(18 rows)

Time: 57.995 ms 
```

我试图将子查询放在 INNER JOIN 中：

```
EXPLAIN ANALYZE SELECT a0_.id  AS id0
FROM   advert a0_
       INNER JOIN member m6_
               ON a0_.user_id = m6_.id
       INNER JOIN area a7_
               ON m6_.area_id = a7_.id 
               AND m6_.area_id IN (SELECT area_id FROM network_area_flatdeep WHERE network_id IN     (1))
WHERE  a0_.status IN ( 1 )
       AND m6_.status IN ( 1 )
ORDER  BY a0_.created_date DESC
LIMIT  60;
                                                                                QUERY PLAN                                                                                     
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=4.37..34966.73 rows=60 width=12) (actual time=2.957..42.443 rows=60 loops=1)
   ->  Nested Loop  (cost=4.37..2311599.10 rows=3967 width=12) (actual time=2.956..42.394 rows=60 loops=1)
         ->  Nested Loop Semi Join  (cost=4.37..2302173.51 rows=3967 width=20) (actual time=2.949..42.099 rows=60 loops=1)
               Join Filter: (m6_.area_id = network_area_flatdeep.area_id)
               Rows Removed by Join Filter: 22333
               ->  Nested Loop  (cost=0.00..2230853.09 rows=316797 width=16) (actual time=0.028..18.612 rows=2829 loops=1)
                     ->  Index Scan Backward using advert_created_date_idx on advert a0_  (cost=0.00..762000.64 rows=317633 width=16) (actual time=0.012..3.802 rows=2834 loops=1)
                           Filter: (status = 1)
                           Rows Removed by Filter: 21
                     ->  Index Scan using member_pkey on member m6_  (cost=0.00..4.61 rows=1 width=8) (actual time=0.003..0.003 rows=1 loops=2834)
                           Index Cond: (id = a0_.user_id)
                           Filter: (status = 1)
                           Rows Removed by Filter: 0
               ->  Materialize  (cost=4.37..41.14 rows=15 width=4) (actual time=0.000..0.004 rows=8 loops=2829)
                     ->  Bitmap Heap Scan on network_area_flatdeep  (cost=4.37..41.06 rows=15 width=4) (actual time=0.009..0.015 rows=8 loops=1)
                           Recheck Cond: (network_id = 1)
                           ->  Bitmap Index Scan on idx_c29e880034128b91  (cost=0.00..4.36 rows=15 width=0) (actual time=0.006..0.006 rows=8 loops=1)
                                 Index Cond: (network_id = 1)
         ->  Index Only Scan using area_pkey on area a7_  (cost=0.00..2.37 rows=1 width=4) (actual time=0.002..0.003 rows=1 loops=60)
               Index Cond: (id = m6_.area_id)
               Heap Fetches: 60
 Total runtime: 42.538 ms
(22 rows) 
```

我试图摆脱子查询并做出正确的 JOIN 语句`network_area_flatdeep`（我非常喜欢这个版本）：

```
EXPLAIN ANALYZE SELECT a0_.id  AS id0
FROM   advert a0_
       INNER JOIN member m6_
               ON a0_.user_id = m6_.id
       INNER JOIN area a7_
               ON m6_.area_id = a7_.id 
       INNER JOIN network_area_flatdeep n14_
               ON a7_.id = n14_.area_id
                  AND ( n14_.network_id IN ( 1 ) )
WHERE  a0_.status IN ( 1 )
       AND m6_.status IN ( 1 )
ORDER  BY a0_.created_date DESC
LIMIT  60;
                                                                                   QUERY PLAN                                                                                    
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=30031.18..30031.33 rows=60 width=12) (actual time=62.968..63.045 rows=60 loops=1)
   ->  Sort  (cost=30031.18..30033.51 rows=934 width=12) (actual time=62.967..62.991 rows=60 loops=1)
         Sort Key: a0_.created_date
         Sort Method: top-N heapsort  Memory: 27kB
         ->  Nested Loop  (cost=0.00..29998.92 rows=934 width=12) (actual time=0.157..60.280 rows=4478 loops=1)
               ->  Nested Loop  (cost=0.00..4401.66 rows=536 width=4) (actual time=0.029..20.488 rows=8004 loops=1)
                     ->  Nested Loop  (cost=0.00..120.69 rows=15 width=8) (actual time=0.015..0.084 rows=8 loops=1)
                           ->  Index Scan using idx_c29e880034128b91 on network_area_flatdeep n14_  (cost=0.00..60.47 rows=15 width=4) (actual time=0.009..0.019 rows=8 loops=1)
                                 Index Cond: (network_id = 1)
                           ->  Index Only Scan using area_pkey on area a7_  (cost=0.00..4.01 rows=1 width=4) (actual time=0.004..0.005 rows=1 loops=8)
                                 Index Cond: (id = n14_.area_id)
                                 Heap Fetches: 8
                     ->  Index Scan using idx_70e4fa78bd0f409c on member m6_  (cost=0.00..283.88 rows=152 width=8) (actual time=0.011..1.278 rows=1000 loops=8)
                           Index Cond: (area_id = a7_.id)
                           Filter: (status = 1)
                           Rows Removed by Filter: 2
               ->  Index Scan using idx_54f1f40ba76ed395 on advert a0_  (cost=0.00..47.57 rows=19 width=16) (actual time=0.003..0.003 rows=1 loops=8004)
                     Index Cond: (user_id = m6_.id)
                     Filter: (status = 1)
                     Rows Removed by Filter: 1
 Total runtime: 63.125 ms
(21 rows) 
```

更改`IN`为`=`也无济于事。

我尝试按照 wilderplasser 的建议使用 EXISTS，并在下面给出答案。

当我删除 ORDER BY 或网络条件时，查询速度很快（2 毫秒）。但是为什么他们不能一起玩得很好呢？

现在……当我将 network_id 从“1”更改为“10”时。查询速度非常快，就像我想要的那样。10 是包含所有区域的根网络。因此，显然 JOIN 需要过滤掉的结果越少，查询就越快。

结构如下所示：

```
area (mapped to network 10 which contains 5089 areas in flat table and is FAST)
|    |---- area 1 (network 1 which contains 8 areas in flat table and is SLOW)
|        |--- more areas
|-- ALOT MORE areas
|-- etc 
```

将网络 1 更改为 10 给出：3.265 ms

总结一下区别：

网络 1 有 8 个区域`network_area_flatdeep` 网络 10 有 5089 个区域`network_area_flatdeep`

所以使用网络 1 的 INNER JOIN 非常慢，使用网络 10 的 INNER JOIN 非常快。子查询的行为相同。

广告表

```
353804 rows
                                                                   Table "public.advert"
           Column            |              Type              |                      Modifiers                      | Storage  | Stats target | Description 
-----------------------------+--------------------------------+-----------------------------------------------------+----------+--------------+-------------
 id                          | integer                        | not null default nextval('advert_id_seq'::regclass) | plain    |              | 
 user_id                     | integer                        | not null                                            | plain    |              | 
 advert_category_id          | integer                        | not null                                            | plain    |              | 
 currency_id                 | integer                        | not null                                            | plain    |              | 
 advert_kind_id              | integer                        | not null                                            | plain    |              | 
 advert_price_id             | integer                        |                                                     | plain    |              | 
 external_source_id          | integer                        |                                                     | plain    |              | 
 status                      | integer                        | not null                                            | plain    |              | 
 type                        | integer                        | not null                                            | plain    |              | 
 title                       | character varying(60)          | not null                                            | extended |              | 
 description                 | text                           | not null                                            | extended |              | 
 price                       | numeric(19,2)                  | default NULL::numeric                               | main     |              | 
 accepting_bids              | boolean                        | not null                                            | plain    |              | 
 promoted                    | boolean                        | not null                                            | plain    |              | 
 edited_date                 | timestamp(0) without time zone | default NULL::timestamp without time zone           | plain    |              | 
 created_date                | timestamp(0) without time zone | not null                                            | plain    |              | 
 archived_date               | timestamp(0) without time zone | default NULL::timestamp without time zone           | plain    |              | 
 views                       | integer                        | not null                                            | plain    |              | 
 checked_date                | timestamp(0) without time zone | default NULL::timestamp without time zone           | plain    |              | 
 archived_by_cron            | boolean                        | not null                                            | plain    |              | 
 unarchived_by_cron          | boolean                        | not null                                            | plain    |              | 
 containting_forbidden_words | boolean                        | not null                                            | plain    |              | 
 external_id                 | character varying(255)         | default NULL::character varying                     | extended |              | 
 new_product                 | boolean                        | not null                                            | plain    |              | 
Indexes:
    "advert_pkey" PRIMARY KEY, btree (id)
    "advert_external_idx_uq" UNIQUE, btree (external_id, external_source_id)
    "advert_archived_date_idx" btree (archived_date)
    "advert_checked_date_idx" btree (checked_date)
    "advert_created_date_idx" btree (created_date)
    "advert_edited_date_idx" btree (edited_date)
    "advert_external_id_idx" btree (external_id)
    "advert_price_idx" btree (price)
    "advert_status_idx" btree (status)
    "advert_type_idx" btree (type)
    "advert_views_idx" btree (views)
    "idx_54f1f40b38248176" btree (currency_id)
    "idx_54f1f40b54b67d66" btree (advert_price_id)
    "idx_54f1f40b9a2e6cff" btree (advert_kind_id)
    "idx_54f1f40ba76ed395" btree (user_id)
    "idx_54f1f40bb167b375" btree (external_source_id)
    "idx_54f1f40bd4436821" btree (advert_category_id)
Foreign-key constraints:
    "fk_54f1f40b38248176" FOREIGN KEY (currency_id) REFERENCES currency(id) ON DELETE RESTRICT
    "fk_54f1f40b54b67d66" FOREIGN KEY (advert_price_id) REFERENCES advertprice(id) ON DELETE RESTRICT
    "fk_54f1f40b9a2e6cff" FOREIGN KEY (advert_kind_id) REFERENCES advertkind(id) ON DELETE RESTRICT
    "fk_54f1f40ba76ed395" FOREIGN KEY (user_id) REFERENCES member(id) ON DELETE CASCADE
    "fk_54f1f40bb167b375" FOREIGN KEY (external_source_id) REFERENCES externalsource(id) ON DELETE RESTRICT
    "fk_54f1f40bd4436821" FOREIGN KEY (advert_category_id) REFERENCES advertcategory(id) ON DELETE RESTRICT
Referenced by:
    TABLE "advert_photo" CONSTRAINT "fk_1c939974d07eccb6" FOREIGN KEY (advert_id) REFERENCES advert(id) ON DELETE CASCADE
    TABLE "banner" CONSTRAINT "fk_6f9db8e7d07eccb6" FOREIGN KEY (advert_id) REFERENCES advert(id) ON DELETE SET NULL
    TABLE "advertbid" CONSTRAINT "fk_fccdba75d07eccb6" FOREIGN KEY (advert_id) REFERENCES advert(id) ON DELETE CASCADE
Has OIDs: no 
```

面积表：

```
5089 rows
                                               Table "public.area"
   Column   |  Type   |                     Modifiers                     | Storage | Stats target | Description 
------------+---------+---------------------------------------------------+---------+--------------+-------------
 id         | integer | not null default nextval('area_id_seq'::regclass) | plain   |              | 
 network_id | integer |                                                   | plain   |              | 
 parent_id  | integer |                                                   | plain   |              | 
 selectable | boolean | not null                                          | plain   |              | 
Indexes:
    "area_pkey" PRIMARY KEY, btree (id)
    "idx_d7943d6834128b91" btree (network_id)
    "idx_d7943d68727aca70" btree (parent_id)
Foreign-key constraints:
    "fk_d7943d6834128b91" FOREIGN KEY (network_id) REFERENCES network(id) ON DELETE RESTRICT
    "fk_d7943d68727aca70" FOREIGN KEY (parent_id) REFERENCES area(id) ON DELETE CASCADE
Referenced by:
    TABLE "network_area_flat" CONSTRAINT "fk_10aae5b2bd0f409c" FOREIGN KEY (area_id) REFERENCES area(id) ON DELETE CASCADE
    TABLE "area_language" CONSTRAINT "fk_17d42f7dbd0f409c" FOREIGN KEY (area_id) REFERENCES area(id) ON DELETE CASCADE
    TABLE "area_zip_code" CONSTRAINT "fk_62a3bf90bd0f409c" FOREIGN KEY (area_id) REFERENCES area(id) ON DELETE CASCADE
    TABLE "member" CONSTRAINT "fk_70e4fa78bd0f409c" FOREIGN KEY (area_id) REFERENCES area(id) ON DELETE RESTRICT
    TABLE "network_area_flatdeep" CONSTRAINT "fk_c29e8800bd0f409c" FOREIGN KEY (area_id) REFERENCES area(id) ON DELETE CASCADE
    TABLE "area" CONSTRAINT "fk_d7943d68727aca70" FOREIGN KEY (parent_id) REFERENCES area(id) ON DELETE CASCADE
Has OIDs: no 
```

成员表：

```
182450 rows
                                                               Table "public.member"
        Column         |              Type              |                      Modifiers                      | Storage  | Stats target | Description 
-----------------------+--------------------------------+-----------------------------------------------------+----------+--------------+-------------
 id                    | integer                        | not null default nextval('member_id_seq'::regclass) | plain    |              | 
 language_id           | integer                        | not null                                            | plain    |              | 
 area_id               | integer                        | not null                                            | plain    |              | 
 company_id            | integer                        |                                                     | plain    |              | 
 external_source_id    | integer                        |                                                     | plain    |              | 
 email                 | character varying(255)         | not null                                            | extended |              | 
 password              | character varying(40)          | not null                                            | extended |              | 
 status                | integer                        | not null                                            | plain    |              | 
 name                  | character varying(150)         | not null                                            | extended |              | 
 zip_code              | character varying(20)          |                                                     | extended |              | 
 phone_number          | character varying(120)         | default NULL::character varying                     | extended |              | 
 using_email_service   | boolean                        | not null                                            | plain    |              | 
 edited_date           | timestamp(0) without time zone | default NULL::timestamp without time zone           | plain    |              | 
 created_date          | timestamp(0) without time zone | not null                                            | plain    |              | 
 hiding_on_own_network | boolean                        | not null                                            | plain    |              | 
 staff                 | boolean                        | not null                                            | plain    |              | 
 superuser             | boolean                        | not null                                            | plain    |              | 
 external_id           | character varying(255)         | default NULL::character varying                     | extended |              | 
 last_login_date       | timestamp(0) without time zone | default NULL::timestamp without time zone           | plain    |              | 
 deleted_adverts       | integer                        | not null                                            | plain    |              | 
Indexes:
    "member_pkey" PRIMARY KEY, btree (id)
    "user_email_idx_uq" UNIQUE, btree (email)
    "user_external_idx_uq" UNIQUE, btree (external_id, external_source_id)
    "idx_70e4fa7882f1baf4" btree (language_id)
    "idx_70e4fa78979b1ad6" btree (company_id)
    "idx_70e4fa78b167b375" btree (external_source_id)
    "idx_70e4fa78bd0f409c" btree (area_id)
    "user_external_id_idx" btree (external_id)
    "user_name_idx" btree (name)
    "user_status_idx" btree (status)
Foreign-key constraints:
    "fk_70e4fa7882f1baf4" FOREIGN KEY (language_id) REFERENCES language(id) ON DELETE RESTRICT
    "fk_70e4fa78979b1ad6" FOREIGN KEY (company_id) REFERENCES company(id) ON DELETE SET NULL
    "fk_70e4fa78b167b375" FOREIGN KEY (external_source_id) REFERENCES externalsource(id) ON DELETE RESTRICT
    "fk_70e4fa78bd0f409c" FOREIGN KEY (area_id) REFERENCES area(id) ON DELETE RESTRICT
Referenced by:
    TABLE "user_link" CONSTRAINT "fk_4c2dd538a76ed395" FOREIGN KEY (user_id) REFERENCES member(id) ON DELETE CASCADE
    TABLE "advert" CONSTRAINT "fk_54f1f40ba76ed395" FOREIGN KEY (user_id) REFERENCES member(id) ON DELETE CASCADE
    TABLE "banner" CONSTRAINT "fk_6f9db8e7a76ed395" FOREIGN KEY (user_id) REFERENCES member(id) ON DELETE SET NULL
    TABLE "user_admin_module_permission" CONSTRAINT "fk_74fee7cea76ed395" FOREIGN KEY (user_id) REFERENCES member(id) ON DELETE CASCADE
    TABLE "user_admin_resource_permission" CONSTRAINT "fk_c9fcf279a76ed395" FOREIGN KEY (user_id) REFERENCES member(id) ON DELETE CASCADE
Has OIDs: no 
```

Network_area_flatdeep 表：

```
10177 rows
                                                           Table "public.network_area_flatdeep"
    Column    |              Type              |                             Modifiers                              | Storage | Stats target | Description 
--------------+--------------------------------+--------------------------------------------------------------------+---------+--------------+-------------
 id           | integer                        | not null default nextval('network_area_flatdeep_id_seq'::regclass) | plain   |              | 
 network_id   | integer                        | not null                                                           | plain   |              | 
 area_id      | integer                        | not null                                                           | plain   |              | 
 created_date | timestamp(0) without time zone | not null                                                           | plain   |              | 
Indexes:
    "network_area_flatdeep_pkey" PRIMARY KEY, btree (id)
    "area_flatdeep_idx_uq" UNIQUE, btree (area_id, network_id, created_date)
    "idx_c29e880034128b91" btree (network_id)
    "idx_c29e8800bd0f409c" btree (area_id)
Foreign-key constraints:
    "fk_c29e880034128b91" FOREIGN KEY (network_id) REFERENCES network(id) ON DELETE CASCADE
    "fk_c29e8800bd0f409c" FOREIGN KEY (area_id) REFERENCES area(id) ON DELETE CASCADE
Has OIDs: no 
```

简短的服务器配置：

```
 version                                                    
--------------------------------------------------------------------------------------------------------------
 PostgreSQL 9.2.4 on x86_64-unknown-linux-gnu, compiled by gcc (GCC) 4.4.7 20120313 (Red Hat 4.4.7-3), 64-bit

            name            |  current_setting   |        source        
----------------------------+--------------------+----------------------
 shared_buffers             | 1800MB             | configuration file
 work_mem                   | 4MB                | configuration file 
```

结论：

数据越多（过滤掉的越少），查询速度就越快。我现在有点不知所措。PostgreSQL 怎么会这么慢？再说一遍：40ms 看起来并不是特别慢，但是对于带有大 SELECT 语句的实际查询，查询大部分时间是 1.5 秒，最多可能需要 3 秒。

所有过滤都是在索引上完成的。排序也是在索引上完成的。

有谁知道如何改进这个我显然需要分离数据的简单过滤器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:52:59.447

尝试用`IN(subquery)`相应的替换`EXISTS(correlated subquery)`

```
SELECT a0_.id  AS id0
FROM   advert a0_
INNER JOIN member m6_
               ON a0_.user_id = m6_.id
INNER JOIN area a7_
               ON m6_.area_id = a7_.id 
WHERE a0_.status IN ( 1 )
AND m6_.status IN ( 1 )
AND EXISTS (
     SELECT*
     FROM network_area_flatdeep xx
     WHERE xx.area_id = m6_.area_id
     AND xx.network_id IN  (2)
     )
ORDER  BY a0_.created_date DESC
LIMIT  60
   ; 
```

你当然需要主键和相关的外键。我不知道`network_area_flatdeep.area_id`，如果它不是 PK 或 FK，您可能需要一个索引（或使其成为复合 PK 的一部分）

更新：带有合成数据的测试平台：

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE Table area
 ( id   SERIAL  not null PRIMARY KEY
 , zzzz varchar
        );

CREATE Table member
 ( id   SERIAL  not null PRIMARY KEY
 , language_id  integer not null DEFAULT 0
 , area_id      integer not null REFERENCES area(id)
 , company_id   integer
 , external_source_id   integer
 , status       integer not null  DEFAULT 0
 , name varchar not null
 , zip_code     varchar not null
 , phone_number varchar default NULL
 , using_email_service  boolean not null DEFAULT False
 , edited_date  timestamp(0) without time zone  default NULL
 , created_date timestamp(0) without time zone  not null
 , hiding_on_own_network        boolean not null DEFAULT False
 , staff        boolean not null DEFAULT False
 , superuser    boolean not null DEFAULT False
 , external_id  varchar default NULL
        );

CREATE TABLE advert
 ( id   SERIAL NOT NULL PRIMARY KEY
 , user_id      integer NOT NULL  REFERENCES member(id)
 , advert_category_id   integer NOT NULL DEFAULT 0
 , currency_id  integer NOT NULL DEFAULT 0
 , advert_kind_id       integer NOT NULL DEFAULT 0
 , advert_price_id      integer
 , external_source_id   integer
 , status       integer NOT NULL DEFAULT 0
 , type integer NOT NULL DEFAULT 0
 , title        varchar NOT NULL
 , description  text NOT NULL
 , price        numeric(10,2) default NULL
 , accepting_bids       boolean NOT NULL DEFAULT False
 , promoted     boolean NOT NULL  DEFAULT False
 , edited_date  timestamp(0) without time zone default NULL
 , created_date timestamp(0) without time zone NOT NULL
 , archived_date        timestamp(0) without time zone  default NULL
 , views        integer NOT NULL  DEFAULT 0
 , checked_date timestamp(0) without time zone default NULL
 , archived_by_cron     boolean NOT NULL  DEFAULT False
 , unarchived_by_cron   boolean NOT NULL  DEFAULT False
 , containting_forbidden_words  boolean NOT NULL  DEFAULT False
 , external_id  varchar default NULL
        );

CREATE INDEX advert_created_date_idx ON advert (created_date);

CREATE Table network_area_flatdeep
        -- the surrogate key in a junction table is questionable
 ( id   SERIAL not null PRIMARY KEY
 , network_id   integer not null -- REFERENCES network(id) ON DELETE CASCADE
 , area_id      integer not null REFERENCES area(id) ON DELETE CASCADE
 , created_date timestamp(0) without time zone not null
        -- the date in the below constraint is questionable
 , CONSTRAINT area_flatdeep_idx_uq UNIQUE (area_id, network_id, created_date)
        );
CREATE INDEX idx_c29e880034128b91 ON network_area_flatdeep(network_id);
CREATE INDEX idx_c29e8800bd0f409c ON network_area_flatdeep(area_id);
INSERT INTO area ( zzzz)
SELECT 'Zzzz_' || gs::text
FROM generate_series(1,39) gs
        ;

INSERT INTO network_area_flatdeep
        -- the surrogate key in a junction table is questionable
 ( network_id , area_id , created_date)
SELECT gs % 7 , aa.id, now()
FROM generate_series(1,76) gs
JOIN area aa ON aa.id = 1+gs % 39
        ;

INSERT INTO member
 ( area_id , name , zip_code, created_date)
SELECT aa.id
        , 'Member_'|| gs::text
        , 'Code_'|| gs::text
        , now()
FROM generate_series(1, 10086) gs
JOIN area aa ON aa.id = 1 + gs % 39
        ;
INSERT INTO advert( user_id , title, description, edited_date , created_date)
SELECT 1+ (gs* 321) % 10086
        , 'Tit_'|| gs::text
        , 'Desc_'|| gs::text
        , now()
        , now() - (random() * 10000 * '1 sec'::interval)
 from generate_series(1,47569 ) gs
        ;

UPDATE member SET status = 1 WHERE random() < .3;
UPDATE advert SET status = 1 WHERE random() < .3;

VACUUM ANALYZE member;
VACUUM ANALYZE advert;
VACUUM ANALYZE area;
VACUUM ANALYZE network_area_flatdeep; 
```

我的查询在 12 毫秒 (PG-9.1) 内执行，计划与 OP 相同。（所以这一定是配置问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T00:03:31.153

当您删除明显不必要的（并因此分散注意力的）加入区域时，您会得到什么样的计划？

```
SELECT a0_.id  AS id0
FROM   advert a0_
       INNER JOIN member m6_
               ON a0_.user_id = m6_.id
WHERE  a0_.status IN ( 1 )
       AND m6_.status IN ( 1 )
       AND m6_.area_id IN (SELECT area_id FROM network_area_flatdeep WHERE network_id IN (1))
ORDER  BY a0_.created_date DESC
LIMIT  60; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T14:35:43.553

如果你把查询转过来会发生什么？因此，首先您选择区域，然后加入成员并在该区域上投放广告。您还可以通过`JOIN`直接添加 WHERE 部分来限制连接。

```
SELECT a0_.id  AS id0

FROM    area a7_
        LEFT JOIN member m6_
            ON a7_.id = m6_.area_id AND m6_.status IN ( 1 )
        LEFT JOIN advert a0_
            ON m6_.id = a0_.user_id

WHERE   a7_.id IN (SELECT area_id FROM network_area_flatdeep WHERE network_id IN (1))
        AND a0_.status IN ( 1 )

ORDER  BY a0_.created_date DESC
LIMIT  60; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T11:35:05.457

您的一个查询的一个小变化

```
SELECT a0_.id  AS id0
FROM   advert a0_
       INNER JOIN member m6_
               ON a0_.user_id = m6_.id
       INNER JOIN area a7_
               ON m6_.area_id = a7_.id 
       INNER JOIN (
                SELECT area_id
                FROM network_area_flatdeep
                WHERE network_id IN (2)
                ) network_area_flatdeep n14_
               ON a7_.id = n14_.area_id
WHERE  a0_.status IN ( 1 )
       AND m6_.status IN ( 1 )
ORDER  BY a0_.created_date DESC
LIMIT  60; 
```

# java - 在 Java 中创建二维列表数组

> ID：15929101
> 
> 赞同：0
> 
> 时间：2013-04-10T14:46:38.180
> 
> 标签：java, arrays, list, pointers, null

我正在尝试为数独创建一个二维列表数组。基本上 81 列出了每个包含数独网格中该框的可能解决方案。到目前为止，我已经尝试了多个声明，但是每当我尝试向列表添加值时，它都会返回一个空指针异常。这是一个示例，只需使用数字 1-9 填充每个列表。

```
List<Integer>[][] sudoku = (List<Integer>[][]) new List[9][9];

for (int i = 0; i < 9; i++) {
        for (int j = 0; j < 9; j++) {
            for (int k = 1; k < 10; ) {
                sudoku[i][j].add(k);
            }
        }
} 
```

我什至不肯定 2D 列表数组是解决此问题的最佳方法，但到目前为止，我已经从头开始做了所有事情（对 java 的了解相对较低），所以我想继续使用这种方法. 原始代码如下所示：

```
List[][] sudoku = new List[9][9]; 
```

研究很快表明，这不会削减它。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:10:47.870

试试这个。一般的想法是，创建一个主列表，然后在循环遍历它时创建一个内部列表。

```
 /* Declare your intended size. */
    int mainGridSize = 81;
    int innerGridSize = 9;

    /* Your master grid. */
    List<List<Integer>> mainList = new ArrayList<List<Integer>>(mainGridSize);

    /* Your inner grid */
    List<Integer> innerList = null;

    /* Loop around the mastergrid */
    for (int i=0; i<mainGridSize; i++) {

        /* create one inner grid for each iteration of the main grid */
        innerList = new ArrayList<Integer>(innerGridSize);

        /* populate your inner grid */
        for (int j=0; j<innerGridSize; j++) 
            innerList.add(j);

        /* add it to your main list */
        mainList.add(innerList);
    } 
```

插图：

![在此处输入图像描述](https://i.stack.imgur.com/4hFi5.png)

如果您需要改变网格，只需更改 gridSize 的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:52:10.193

[您不能创建通用列表数组](https://stackoverflow.com/a/217110/1651233)。

您可以创建列表列表：

```
List<List<List<Integer>>> soduko = new ArrayList<>(); 
```

然后根据需要填充它。

或使用铸造：

```
List[][] soduko = (List<IntegerNode>[][]) new LinkedList[9][9]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:50:50.203

您已经创建了数组，`Lists`但没有对其进行初始化。在第二行插入这个问题应该解决。

```
for (int i = 0; i < 9; i++) {
    for (int j = 0; j < 9; j++){
         sudoku[i][j]=new ArrayList<Integer>(); 
    }
} 
```

或者一次性完成所有操作，如下所示：

```
for (int i = 0; i < 9; i++) {
    for (int j = 0; j < 9; j++) {
        sudoku[i][j]= new ArrayList<Integer>();
        for (int k = 1; k < 10; ) {
            sudoku[i][j].add(k);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:57:12.730

如果您知道您需要 81 个 2D 数组，则可以创建 3D 数组：

```
int[][][] sudoku = new int[81][9][9]; 
```

你现在这样做的方式会产生编译错误。

# javascript - div 中的固定和相对元素

> ID：15929102
> 
> 赞同：0
> 
> 时间：2013-04-10T14:46:38.450
> 
> 标签：javascript, jquery, html, css-position

[我正在尝试在我的网站](http://violetoeuvre.com/)的 div （而不是整个页面）内放置一个固定元素。

我希望将导航（deadspin、gawer、awl、other）固定在写作部分，这样即使用户滚动，导航仍然存在。但目前它已针对整个页面进行了修复。

正如您[在我的测试页面上](http://violetoeuvre.com/scroll.html)看到的，导航是按照我想要的方式固定的。

我试着弄乱`position:relative`/但这没有帮助`position:fixed`。`#small-box-links`

```
.home_writing {
  display: block;
  position: relative;
  background: rgba(50, 50, 50, 0);
  height: 1000px;
  text-align: left;
}

#small-box-container {
  border: 1px solid black;
  background: rgba(10, 200, 10, 0);
  width: 980px;
  height: 800px;
  overflow: auto;
}

#small-box-links {
  position: relative;
  margin-left: 700px;
  height: 25px;
  margin-top: 10px;
}
```

```
<div id="small-box-container">
  <div id="small-box-links">
    <a href="#small-box1" class="top_link_style">deadspin |</a>
    <a href="#small-box2" class="top_link_style">gawker |</a>
    <a href="#small-box3" class="top_link_style">the awl |</a>
    <a href="#small-box4" class="top_link_style">other</a>
  </div>
  <div style='overflow:hidden; width:980px;'>
    <div style='overflow:scroll; width:988px'>
      <div id="small-box1" class="small-box">
        <h2>deadspin</h2>
        <h3>How Pat Summitt Ruined The Best Thing About Women's Basketball</h3>
<!-- etc. for other boxes -->
```

我发现[了这个](https://stackoverflow.com/q/6872665)相关的问题，但是当我尝试上/左等时，元素仍然固定在页面上，而不是写 div。（我尝试将父元素 ,`.home_writing`设为相对，但这并不能解决我的问题。）

（另一方面，我不明白为什么段落中的 Playfair 看起来不像侧边栏导航。它的样式相同）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:08:28.650

`position:fixed`总是使用视口作为参考框架，所以你不能在这里使用它。

但解决方案相当简单 -`position:absolute`改为使用将导航定位在具有`position:relative`（和固定高度）的容器元素内，然后将内容作为该容器内的同级，具有固定高度和`overflow:auto`该元素：

```
<div style="position:relative; height:800px;">
  <div style="position:absolute; top:0; …"> [link link link] </div>
  <div style="height:800px; overflow:auto;">
    Lorem ipsum, dolor sit …
  </div>
</div> 
```

# php - PHP解析语法错误

> ID：15929106
> 
> 赞同：0
> 
> 时间：2013-04-10T14:46:43.437
> 
> 标签：php

我是 PHP 新手，遇到语法错误。

**代码：**

```
<?php

    // configuration
    require("../includes/config.php");

    // if form was submitted
    if ($_SERVER["REQUEST_METHOD"] == "POST")
    {
        if(empty($_POST['username'])) || empty($_POST['password'] || $_POST['password'] != $_POST['confirmation']){
            apologize('You did something wrong!');
        }
    }
    else
    {
        // else render form
        render("register_form.php", ["title" => "Register"]);
    }

?> 
```

**错误：**

> 解析错误：语法错误，意外的“||” (T_BOOLEAN_OR)，在第 9 行的 /home/jharvard/vhosts/localhost/html/register.php 中期待 ')'

我对 PHP 很陌生，这段代码可能有多个错误。作为参考，apouse 只是在附加输入的同时呈现一个抱歉的消息，而 render 只是一个使用模板简化呈现过程的函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:48:26.863

改变：

```
if(empty($_POST['username'])) || empty($_POST['password'] || $_POST['password'] != $_POST['confirmation']){ 
```

至：

```
if(empty($_POST['username']) || empty($_POST['password']) || $_POST['password'] != $_POST['confirmation']){
                           ^                            ^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T14:47:50.767

括号太多。代替

```
if(empty($_POST['username'])) || empty($_POST['password'] || $_POST['password'] != $_POST['confirmation']){
                            ^                            ^
                            too much here                too less here 
```

你应该有

```
if( empty($_POST['username']) || empty($_POST['password']) || $_POST['password'] != $_POST['confirmation']) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:49:27.257

这是因为太多的paranethesis。尝试这个，

```
 if(empty($_POST['username']) || empty($_POST['password']) || ($_POST['password'] != $_POST['confirmation'])){
        apologize('You did something wrong!');
    } 
```

# c# - 更改堆栈面板上的可见性时出现异常

> ID：15929108
> 
> 赞同：0
> 
> 时间：2013-04-10T14:46:46.733
> 
> 标签：c#, silverlight, xaml, silverlight-4.0

我有两个堆栈面板，每个包含一个数据网格。

我在加载源时设置了我的数据网格的 itemsSource。

我的面板一开始是折叠的，然后，当我选中一个 RadioButton 时，必须出现。

这是 stackpanel 的 xaml ：

```
 <StackPanel Name="spListeList"
                                        Grid.Row="0"
                                        Grid.Column="2"
                                        Orientation="Horizontal"
                                        Visibility="Collapsed">
                                <sdk:DataGrid Name="dgListList" 
                                              VerticalAlignment="Top"
                                              HorizontalAlignment="Left"
                                              AutoGenerateColumns="False"   
                                              AlternatingRowBackground="Orange" 
                                              IsReadOnly="True">
                                    <sdk:DataGrid.Columns>
                                        <sdk:DataGridTextColumn Binding="{Binding IdList, Mode=TwoWay}" 
                                                        Visibility="Collapsed"
                                                        Width="10"/>
                                        <sdk:DataGridTextColumn Header=" "
                                                        Width="85"
                                                        Binding="{Binding LibList, Mode=TwoWay}"/>
                                    </sdk:DataGrid.Columns>
                                </sdk:DataGrid>
                            </StackPanel>
                            <StackPanel Name="spListeJury"
                                        Grid.Row="0"
                                        Grid.Column="3"
                                        Orientation="Horizontal"
                                        Visibility="Collapsed">
                                <sdk:DataGrid Name="dgListeJury" 
                                              VerticalAlignment="Top"
                                              HorizontalAlignment="Left"
                                              AutoGenerateColumns="False"   
                                              AlternatingRowBackground="Orange" 
                                              IsReadOnly="True">
                                    <sdk:DataGrid.Columns>
                                        <sdk:DataGridTextColumn Binding="{Binding IdJury, Mode=TwoWay}" 
                                                        Visibility="Collapsed"
                                                        Width="10"/>
                                        <sdk:DataGridTextColumn Header=" "
                                                        Width="85"
                                                        Binding="{Binding LibJury, Mode=TwoWay}" />
                                    </sdk:DataGrid.Columns>
                                </sdk:DataGrid>

                            </StackPanel> 
```

我为他们准备了 10 个单选按钮和 2 个处理程序（除名称外类似）。

```
void rbListeList_Checked(object sender, RoutedEventArgs e)
{
    try
    {
        if (templateColumnListeList == null)
        {
            templateColumnListeList = new DataGridTemplateColumn();
        }

        dgListeList.Columns.Remove(templateColumnListeList);
        templateColumnListeList.Header = "Select";
    templateColumnListeList.CellTemplate = (DataTemplate)Resources["ItemTemplateSelect"];
    dgListeList.Columns.Add(templateColumnListeList);
    templateColumnListeList.DisplayIndex = 0;
    spListeList.Visibility = Visibility.Visible;
    spListeJury.Visibility = Visibility.Collapsed;
}
catch (Exception ex)
{
    throw new Exception(ex.Message);
} 
```

}

当我评论改变可见性的线条时，没有任何问题。但如果不是，我得到了 ArgumentOutOfBound 异常

并且当两个面板在开始时可见时，它们看起来很好，没有错误。当我单击单选按钮并进入处理程序时，模板列也会出现......

我尝试了另一个：当我同时显示两个可见时，应用程序运行良好，并且面板以我想要的方式出现和消失......所以看起来，当我同时折叠时出现问题。

我不能在应用程序运行时更改包含 Source 的面板的可见性吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:04:47.050

当您在 XAML 中设置 Visibility="Collapsed" 时，该控件在窗口加载时不会被实例化。如果使用 WPF，请尝试 Visibility="Hidden"。Silverlight 不支持隐藏可见性。或尝试在 Window 的 Loaded 事件中设置 Collapsed 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:39:59.747

我会说上面的列代码存在问题，但是如果没有更多代码就很难说。我通常将控件的可见性属性绑定到页面数据上下文上的属性，并在需要时设置该值。如果您发布更多代码，我可能会提供更多帮助。

# mysql - 如何让 MySQL Workbench 忘记我重命名了一个表？

> ID：15929109
> 
> 赞同：0
> 
> 时间：2013-04-10T14:46:50.590
> 
> 标签：mysql, synchronization, database-schema, mysql-workbench

在我设计阶段的早期，我犯了重命名表然后使用旧名称创建新表的错误。出于某种原因，MySQL Workbench 决定*很好*地记住这个事实。现在，每次我尝试与数据库同步时，MySQL Workbench 都希望将（新）表重命名为其旧名称。

我这样做了：

1.  重命名 my_table => my_new_table
2.  创建名为“my_table”的新表

现在 MySQL Workbench 坚持这将是正确的方法：

1.  重命名 my_new_table => my_table
2.  删除 my_new_table

这显然是一个错误，但是 MySQL Workbench 如何跟踪它对随机数据库的表所做的事情？是否有一些我可以清除的元数据让 MySQL Workbench 相信这种变化已经发生并且不需要重复？显然，Workbench 所做的不仅仅是模型和现有数据库之间的差异......

（我意识到我可以忽略同步过程中的特定步骤，但我不想每次同步时都这样做，当然对这两个特定表的任何更改都不会执行......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:20:24.210

通过使用“仅跳过数据库更改和更新模型”运行一次同步来设法解决该问题。不清楚是否有一些不同步的模式，但至少现在有新的变化继续存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:59:30.570

重命名一个对象并创建一个具有相同名称的新对象是一种特殊情况，这使得同步过程非常困难。原因是 Workbench 使用名称来查找对象（因为没有其他识别机制，如 UUID 或类似的）。因此需要执行额外的步骤来查找这种重命名情况。Workbench 明确保留旧名称，以便找到要同步的内容。

# javascript - 在向下箭头按下时关注列表项

> ID：15929117
> 
> 赞同：16
> 
> 时间：2013-04-10T14:47:06.193
> 
> 标签：javascript, jquery, focus, html-lists

我正在创建一个自定义自动建议框，我需要`li`在向下箭头键上移动项目。

所以我向 li 添加了 tabindex 属性，它得到了关注。但问题是它以一些随机高度向上滚动 div，从而从 div 中选择出 li。

![在此处输入图像描述](https://i.stack.imgur.com/Ngx0c.jpg)

**在向下箭头键之后：**

![在此处输入图像描述](https://i.stack.imgur.com/mtw7q.jpg)

**并在按下箭头键后：**

![在此处输入图像描述](https://i.stack.imgur.com/S6NWa.jpg)

之后，当鼠标按下时，它会消失在屏幕外，表现完美。

在这里，我做了一个[演示 JSFiddle](http://jsfiddle.net/38zR3/1/) ， 首先单击`item1`，然后按下箭头，它的行为相同。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T15:36:09.073

**详细说明我的评论**

将容器设置`scrollTop`为`index of focused li`* `li height`。

`return false`在 keydown 时防止溢出父级的正常浏览器滚动。

```
$('div.container').on('focus', 'li', function() {
    var $this = $(this);
    $this.addClass('active').siblings().removeClass();
    $this.closest('div.container').scrollTop($this.index() * $this.outerHeight());
}).on('keydown', 'li', function(e) {
    var $this = $(this);
    if (e.keyCode === 40) {        
        $this.next().focus();
        return false;
    } else if (e.keyCode === 38) {        
        $this.prev().focus();
        return false;
    }
}).find('li').first().focus(); 
```

jsfiddle [http://jsfiddle.net/38zR3/42/](http://jsfiddle.net/38zR3/42/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:58:19.633

您是否尝试过使用锚点而不是 tabindex？例如

```
<li><a href="#"></li> 
```

根据我的经验，某些浏览器无法正确处理对 tabindex 的关注

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:57:31.847

我曾经遇到过这样的问题，并通过将`overflow`包含 div 的 CSS 样式设置为`none`或`hidden`取决于您的偏好来解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:50:46.077

添加一个[`.scrollTop()`](http://api.jquery.com/scrollTop/)以确保它居中或您想要的样子。

# google-closure - Google Closure Templates 是否支持扩展模板

> ID：15929119
> 
> 赞同：1
> 
> 时间：2013-04-10T14:47:07.367
> 
> 标签：google-closure, google-closure-templates

例如，我希望我的页面模板 page1.soy、page2.soy、pagex.soy 扩展我的 base.soy 模板，其中包括页眉和页脚。

这支持吗？

这是 Django 和 Jinja2 模板引擎中的常见功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T00:43:41.700

在闭包中，组合比层次结构更自然。即，有一个页面组件来管理页眉和页脚（或添加页眉/页脚组件）。然后您可以在页面组件上设置pageContent区域（另一个组件）。

您还可以通过创建包含页眉/页脚的页面模板以及基于传入属性的特定内容模板来模拟层次结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T18:44:17.370

当然，试试这个：

```
{namespace sample}

/**
 * Layout
 * @param title
 * @param body
 */
{template .base}
  <html>
    <head>
      <title>{$title}</title>
    </head>
    <body>
      {$body}
    </body>
  </html>
{/template}

/**
 * Page example
 */
{template .page1}
  {call .base}
    {param title}
      Sample Title
    {/param}
    {param body}
      Sample body
    {/param}
  {/call}
{/template} 
```

# php - Behat - 找不到上下文类。

> ID：15929123
> 
> 赞同：7
> 
> 时间：2013-04-10T14:47:13.890
> 
> 标签：php, zend-framework2, behat

这是我的目录结构：

```
composer.json
composer.phar
vendor/
    bin/
        behat
tests/
    functional/
        behat.yml
        features/
            registration.feature
            bootstrap/
                FeatureContext.php 
```

我做了：

```
cd tests/functional
../../vendor/bin/behat --init 
```

这为我创造了基本结构。这是在 behat.yml 中：

```
default:
  paths:
    features: '%behat.paths.base%/features'
    bootstrap:  '%behat.paths.base%/features/bootstrap' 
```

现在我尝试像这样运行 BDD 测试：

```
vendor/bin/behat -c tests/functional/behat.yml 
```

我得到：

```
 [RuntimeException]                                                       
  Context class not found.                                                 
  Maybe you have provided wrong or no `bootstrap` path in your behat.yml:  
  http://docs.behat.org/guides/7.config.html#paths                         

behat [--init] [-f|--format="..."] [--out="..."] [--lang="..."] [--[no-]ansi] [--[no-]time] [--[no-]paths] [--[no-]snippets] [--[no-]snippets-paths] [--[no-]multiline] [--[no-]expand] [--story-syntax] [-d|--definitions="..."] [--name="..."] [--tags="..."] [--cache="..."] [--strict] [--dry-run] [--rerun="..."] [--append-snippets] [--append-to="..."] [features] 
```

知道有什么问题吗？

我通过 Composer 安装了 Behat。这是我的composer.json：

```
{
    "name": "hello",
    "description": "Hello World",
    "minimum-stability": "dev",
    "require": {
        "php": ">=5.3",
        "zendframework/zendframework": "2.1.4",
        "doctrine/common": "dev-master#d7987c96675e153638729383577090feed9854f1"
    },
    "require-dev": {
        "phpunit/phpunit": "3.7.14",
        "behat/behat": "2.4.*@stable"
    }
} 
```

我安装的是：

```
php composer.phar install --dev -o 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:58:04.340

您在目录中时初始化了 Behat，`tests/functional`但您试图从根目录运行它。

修复路径：

```
default:
  paths:
    features: 'tests/functional/features'
    bootstrap:  'tests/functional/features/bootstrap' 
```

`tests/functional`或者从目录运行 Behat 。

我建议保留原始文件布局（根目录中的功能）。 **编辑：**实际上，我尝试自己设置它，它与您提供的配置一起使用。一定有其他你在做的事情没有在问题中指定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T15:35:35.797

这是有效的。

```
cd tests/functional
../../vendor/bin/behat --init
cd ../../
vendor/bin/behat -c tests/functional/behat.yml 
```

使用此配置文件：

```
default:
  paths:
    features: features
    bootstrap: features/bootstrap 
```

# algorithm - 合并树结构中分支的模式或算法？

> ID：15929135
> 
> 赞同：9
> 
> 时间：2013-04-10T14:47:36.443
> 
> 标签：algorithm, design-patterns

我正在尝试将 DAG（有向无环图）映射到下面显示的结构中。

这是我开始的 DAG 示例

![在此处输入图像描述](https://i.stack.imgur.com/w6CiL.png)

弧总是从左到右。

然后我恢复图形并将其跨越到具有重复节点的树中，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/1kzIL.png)

我正在寻找的是一些算法或模式来实现以下合并结构。（注意它又被还原了）

![在此处输入图像描述](https://i.stack.imgur.com/U0Yhl.png)

目标是生成这样的 XML：

```
<root>
    <seq>
        <mod1/>
        <flow>
            <seq>
                <mod4/>
                <mod7/>
            </seq>
            <seq>
                <flow>
                    <seq>
                        <flow>
                            <mod4/>
                            <mod3/>
                        </flow>
                        <mod6/>
                    </seq>
                    <seq>
                        <flow>
                            <mod4/>
                            <mod3/>
                            <mod2/>
                        </flow>
                        <mod5/>
                    </seq>
                </flow>
                <mod8/>
            </seq>
        </flow>
    </seq>
</root> 
```

我认为这无关紧要，但我正在解析 JSON 以使用 JAVA 7 编写 XML。框是 Web 服务，箭头表示输入和输出参数，例如，模块 5 被调用一次模块 1、2、3 和 4已经完成，它们的输出是它的输入。

**编辑：**好的，这是另一个有十个节点的例子。我希望这能让您更好地了解 I 节点何时应该被合并。

![在此处输入图像描述](https://i.stack.imgur.com/2YTmM.jpg)

回答@blubb，在这个例子中，我们可以看到“服务” 8 和 9 是如何被合并的。否则，他们需要工作的所有服务（1、2、3、4、5 和 6）将被调用两次而无需。最后一个草图中的中间分支将执行两次：一次用于 8，一次用于 9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:27:31.090

我对树数据结构了解不多，我想这可能是结果的一个好地方，而且我对转换为 XML 的知识也不太了解，但是如果我得到了映射出路由的数据，那么例子，

```
1 4 7
1 2 5 8
1 3 5 8
1 4 5 8
1 3 6 8
1 2 5 9
1 3 5 9
1 4 5 9
1 3 6 9
1 2 10
1 2 5 10
1 3 5 10
1 4 5 10 
```

那么合并节点的一种方法可能是：

```
Take increasingly larger chunks from the end of each line and examine the
first cell to the left of them. Nodes are merged if matching right-side 
chunks flow to the same aggregated first cells on the left. Remove duplicate 
paths. 
```

**说明/示例：**

**第一次通过**（取末端单元格，与它们左侧的聚合第一个单元格进行比较）：

```
 4   <- 7
  5,6 <- 8
  5,6 <- 9
  2,5 <- 10 
```

唯一可以合并的节点是 8 和 9，因为它们都流向相同的聚合单元 (5,6)。

**第一次通过的结果：**

```
1 4 7
1 2 5 (8,9) -- merged
1 3 5 (8,9)
1 4 5 (8,9)
1 3 6 (8,9)
1 2 5 (8,9)
1 3 5 (8,9)
1 4 5 (8,9)
1 3 6 (8,9)
1 2 10
1 2 5 10
1 3 5 10
1 4 5 10 
```

**第二遍**（取末端单元格 + 1 个单元格，与左侧聚合的第一个单元格进行比较）：

```
 1      <- 4 7
  2,3,4  <- 5 (8,9)
  3      <- 6 (8,9)
  1      <- 2 10
  2,3,4  <- 5 10 
```

没有可以合并，因为没有匹配的右侧路径流向左侧相同的聚合第一个单元格。

**第三遍**（取末端细胞 + 2 个细胞，与左侧聚合的第一个细胞进行比较）：

```
 N/A    <- 1 4 7
  1      <- 2 5 (8,9)
  1      <- 3 5 (8,9)
  1      <- 4 5 (8,9)
  1      <- 3 6 (8,9)
  N/A    <- 1 2 10
  1      <- 2 5 10
  1      <- 3 5 10
  1      <- 4 5 10 
```

可以进行两次合并。首先：[2 5 (8,9)]、[3 5 (8,9)]和[4 5 (8,9)]都流向1。其次：[2 5 10]、[3 5 10] , 和 [4 5 10] 都流向 1。

**第三遍结果：**

```
1 4 7
1 (2,3,4) 5 (8,9)
1 3 6 (8,9)
1 2 10
1 (2,3,4) 5 10 
```

看起来很像我要求的结果。（末端的重复单元格可以合并到单个节点，即左侧的 1，以及右侧的 (8,9) 和 10，如 eskalera 的最终草图。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T15:07:34.350

最后，我找到了一个可以完成这项工作的算法。这是给所有试图帮助我的人的：

首先，我在草图 1 中从 DAG 构建了一个反向生成树。所以我从模块 7 和 8 开始，反向构建树，并在其中复制模块。

之后，我创建名为 FLOW 和 SEQUENCE 的虚拟节点并将它们引入树中，以便每个 MODULE 节点都是 SEQUENCE 节点的子节点。跨越分支是 SEQUENCE 节点，它们是 FLOW 节点的子节点。我认为这一步足够直观，但重要的想法是了解我们需要虚拟节点，以便我们可以关闭 FLOW 节点，这些节点是从一个节点拆分为多个节点的节点。

之后，我首先检查树的深度，对于每个模块（我们将其称为驱动程序），我将其子代与驱动程序兄弟姐妹的子代进行比较。如果它们不匹配，我将继续与驱动程序兄弟姐妹的孙辈向下，因此，来自驱动程序兄弟姐妹的所有分支都必须通过与驱动程序相同的节点。从图形上看，这意味着在某些时候，两个节点都需要完全相同的模块。

如果它们匹配，我会从重合节点向下清理合并的分支，这意味着我将它们从父节点中切断。从那里向上，它与驱动程序 SEQUENCE 节点一起进入一个新的 SEQUENCE 节点，进入同一个 FLOW 节点。

在遍历整个树之后，只要进行了合并，我们就会再次遍历树，这一次关系更大。这意味着我们不是比较司机的孩子，而是比较司机的好孩子。

最后一步显然是再次恢复树。

由于这些虚拟节点的编程隐含的复杂性，我忽略了一些概念。主要是因为一旦引入虚拟节点，所有的父子兄弟关系都会丢失。但我希望大体的想法已经被理解。

# windows - Windows 上 Perl 的 NetCDF

> ID：15929138
> 
> 赞同：1
> 
> 时间：2013-04-10T14:47:41.613
> 
> 标签：windows, perl, 64-bit, netcdf

我正在帮助我们的一位学生在 Windows 7（64 位）上使用 NetCDF 文件进行一些数据访问。我们拥有首选语言 (Perl) 的绑定，但找不到预构建的 NetCDF 库二进制文件，或者找不到将它放在哪里以便 Perl 可执行文件可以找到它。有人有任何开始的面包屑吗？我们希望避免为此目的加载整个 Cygwin GCC 堆栈；实际上，我们需要的只是一个 DLL 和正确放置它的位置的知识。

TIA,

读写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:59:53.763

我记得这曾经是一个真正的痛苦，但是在 Windows 上使用现代 Perl，需要 C 编译的模块通常可以像在 Linux 上一样容易地安装。

[Strawberry Perl](http://strawberryperl.com/) for Windows 带有已经设置好的编译器环境。

ActivePerl 还允许您下载 C 编译器，但我自己没有尝试过。

遗憾的是 NetCDF 没有通过 CPAN 发布他们的模块，但您仍然应该能够使用 Perl 附带的编译器。

我还找到了这个替代模块： [http ://search.cpan.org/~dhunt/PDL-NetCDF-4.05/netcdf.pd](http://search.cpan.org/~dhunt/PDL-NetCDF-4.05/netcdf.pd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:40:47.970

以下是适用于 Windows 的最新 netCDF DLL：

[http://www.unidata.ucar.edu/software/netcdf/docs_rc/winbin.html](http://www.unidata.ucar.edu/software/netcdf/docs_rc/winbin.html)

# html - 边距顶部不使用

> ID：15929141
> 
> 赞同：41
> 
> 时间：2013-04-10T14:47:47.957
> 
> 标签：html, label

我试图通过为标签分配一个类“brtop”来轻推电子邮件标签并稍微输入。

`.brtop`只是增加了一个上边距。

好像什么都没做，是不是我做错了什么？

```
/* html5doctor.com Reset v1.6.1 - http://cssreset.com */
html,body,div,span,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,abbr,address,cite,code,del,dfn,em,img,ins,kbd,q,samp,small,strong,sub,sup,var,b,i,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}nav ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}a{margin:0;padding:0;font-size:100%;vertical-align:baseline;background:transparent}ins{background-color:#ff9;color:#000;text-decoration:none}mark{background-color:#ff9;color:#000;font-style:italic;font-weight:bold}del{text-decoration:line-through}abbr[title],dfn[title]{border-bottom:1px dotted;cursor:help}table{border-collapse:collapse;border-spacing:0}hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}input,select{vertical-align:middle}

/*  ^^CSS_RESET^^ --- vv CSSforsite vv */

form{
	width:500px;
	padding:1.5em;
	overflow:hidden;
	border:1px solid red;
}
fieldset{
	float:left;
	border:none;
	margin-left:1em;
}

.brtop{
margin-top:5px;
}

input{
}
```

```
<form name="messageform">
		<fieldset>
			<label for="username" >Name:</label><br/>
			<input type="text" name="username"/><br/>
			<label for="email"class="brtop">Email:</label><br/>
			<input type="text" name="email"/>
		</fieldset>
		<fieldset>
			<label>Message:</label><br/>
			<textarea name="message" cols="20" rows="4"></textarea>
		</fieldset>		
	</form>
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-10T14:52:29.813

添加`display:inline-block`到您的 brtop 规则。

```
.brtop {
    margin-top:5px;
    display:inline-block;
} 
```

```
/* html5doctor.com Reset v1.6.1 - http://cssreset.com */

html,
body,
div,
span,
object,
iframe,
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote,
pre,
abbr,
address,
cite,
code,
del,
dfn,
em,
img,
ins,
kbd,
q,
samp,
small,
strong,
sub,
sup,
var,
b,
i,
dl,
dt,
dd,
ol,
ul,
li,
fieldset,
form,
label,
legend,
table,
caption,
tbody,
tfoot,
thead,
tr,
th,
td,
article,
aside,
canvas,
details,
figcaption,
figure,
footer,
header,
hgroup,
menu,
nav,
section,
summary,
time,
mark,
audio,
video {
  margin: 0;
  padding: 0;
  border: 0;
  outline: 0;
  font-size: 100%;
  vertical-align: baseline;
  background: transparent
}

body {
  line-height: 1
}

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
menu,
nav,
section {
  display: block
}

nav ul {
  list-style: none
}

blockquote,
q {
  quotes: none
}

blockquote:before,
blockquote:after,
q:before,
q:after {
  content: none
}

a {
  margin: 0;
  padding: 0;
  font-size: 100%;
  vertical-align: baseline;
  background: transparent
}

ins {
  background-color: #ff9;
  color: #000;
  text-decoration: none
}

mark {
  background-color: #ff9;
  color: #000;
  font-style: italic;
  font-weight: bold
}

del {
  text-decoration: line-through
}

abbr[title],
dfn[title] {
  border-bottom: 1px dotted;
  cursor: help
}

table {
  border-collapse: collapse;
  border-spacing: 0
}

hr {
  display: block;
  height: 1px;
  border: 0;
  border-top: 1px solid #ccc;
  margin: 1em 0;
  padding: 0
}

input,
select {
  vertical-align: middle
}

/*  ^^CSS_RESET^^ --- vv CSSforsite vv */

form {
  width: 500px;
  padding: 1.5em;
  overflow: hidden;
  border: 1px solid red;
}

fieldset {
  float: left;
  border: none;
  margin-left: 1em;
}

.brtop {
  margin-top: 5px;
  display: inline-block;
}

input {}
```

```
<form name="messageform">
  <fieldset>
    <label for="username">Name:</label>
    <br/>
    <input type="text" name="username" />
    <br/>
    <label for="email" class="brtop">Email:</label>
    <br/>
    <input type="text" name="email" />
  </fieldset>
  <fieldset>
    <label>Message:</label>
    <br/>
    <textarea name="message" cols="20" rows="4"></textarea>
  </fieldset>
</form>
```

由于您的标签显示为内联元素，因此上边距不会产生任何影响。

> 边距属性指定框的边距区域的宽度。'margin' 速记属性设置所有四个边的边距，而其他边距属性只设置它们各自的边。这些属性适用于所有元素，但垂直边距不会对未替换的内联元素产生任何影响。- [W3](http://www.w3.org/TR/CSS21/box.html#margin-properties)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-10T14:52:14.623

`<label>`是`display: inline`。如果你添加`display: inline-block`它`.brtop`会尊重边距。

# javascript - 从 url 中查找和删除未知值

> ID：15929149
> 
> 赞同：0
> 
> 时间：2013-04-10T14:48:05.413
> 
> 标签：javascript, url

我写了一些 js 来清理路径名。到目前为止，我有以下内容：

```
var corePageUrl = window.location.pathname.toLowerCase();
if (corePageUrl.indexOf("/account/logon")>=0||corePageUrl.indexOf("/account/summary")>=0)) {
  // do function here    
} 
```

基本上，该函数需要执行以下操作：获取路径名，从中删除尾随的 /，如果这两个`.indexOf`语句之外还有任何内容符合 if 语句，则将其删除。无数的谷歌搜索让我无处可去，当我开始处理更复杂的 javascript 问题时，这让我无法理解。

我没有要求任何人为我编写此代码，因此请帮助我了解导致我达到预期结果的逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:01:15.813

听起来您只需要一些基本的字符串操作。你的意思是这样的？

```
var url = window.location.pathname.toLowerCase(),
    i = -1, // var for indexOf
    lookFor = ['/account/logon', '/account/summary'], // what to look for
    j = lookFor.length; // var for loop
// remove query
i = url.indexOf('?');
if (i !== -1) { // has query
    url = url.slice(0, i); // trim
    i = -1; // reset i for later
}
// remove trailing /
while (url.slice(-1) === '/') { // has trailing /
    url = url.slice(0, -1); // trim it
}
// trim url in special cases 
while (i === -1 && j) { // find a match
    i = url.indexOf(lookFor[--j]); // remember to decrease loop counter
}
if (i !== -1) {
    i = i + lookFor[j].length; // position of end of match
    url = url.slice(0, i); // trim after it
}
url; // resulting url 
```

* * *

```
// Alternately,
// remove query
url = url.split('?', 1)[0]; // get the segment before the first ? (all if no ?)
// remove trailing /
url = url.match(/^([\s\S]*?)\/*$/)[1]; // capture group excludes trailing "/"s
// etc 
```

* * *

例子：

```
http://example.com/some/random///?thing=in_my_url
http://example.com/some/random

http://hilario.us/page/account/summary/place?stuff
http://hilario.us/page/account/summary 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:33:55.583

如果我对您的理解正确，您希望该功能执行以下操作：

**输入**：`http://www.example.com/account/logon/foo?bar=baz`。

**输出**：`http://www.example.com/account/logon`

您可以使用正则表达式轻松完成此操作并捕获您想要匹配的 URL 部分。

```
var url = window.location.pathname.toLowerCase(),
    match;

if (match = url.match(/.*\/account\/(?:logon|summary)/)) {
    // do function here    
} 
```

Where`match`将包含 URL，包括直到`/account/logon`or的所有内容`/account/summary`。

# symfony - 禁用生成集并获取实体

> ID：15929151
> 
> 赞同：0
> 
> 时间：2013-04-10T14:48:10.053
> 
> 标签：symfony, doctrine-orm

DISABLED 如何为实体生成集和获取？

```
app/console doctrine:generate:entities AppAdminBundle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:38:17.583

为实体生成 getter 和 setter 是该`doctrine:generate:entities`命令的主要目标 ( [http://symfony.com/doc/current/book/doctrine.html#generating-getters-and-setters](http://symfony.com/doc/current/book/doctrine.html#generating-getters-and-setters) )。

如果您只需要实体，请调用`doctrine:generate:entity`命令 ( [http://symfony.com/doc/current/book/doctrine.html#creating-an-entity-class](http://symfony.com/doc/current/book/doctrine.html#creating-an-entity-class) )。

# md5 - 如何从 md5 哈希中检查秘密词

> ID：15929160
> 
> 赞同：-6
> 
> 时间：2013-04-10T14:48:31.583
> 
> 标签：md5

我正在获取 md5 哈希以响应服务，我会检查我的密钥是否存在于 md5 哈希中。我需要一些关于如何解码 md5 哈希键来检查我的话的想法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:53:24.723

除了散列你认为的 MD5 并比较之外，没有真正的方法可以解密像 MD5 这样的散列。

MD5 是一种[单向散列算法](http://en.wikipedia.org/wiki/One-way_function)。没有办法解码它们。远程找出 MD5 哈希表示什么的唯一方法是使用[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)，即使如此，您也受到最多 64 个字符左右的字符串长度的限制，以字典单词、数字和任何相关组合。

简单而肯定的答案是否定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:51:56.083

一般来说，解决这个问题的方法是将相同的散列算法应用于您已知的秘密词，然后将结果与您从服务收到的散列进行比较。按照设计，不可能解密 MD5 哈希

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:03:07.800

我完全同意上述答案。例如，如果您想使用密码获取任何用户，那么您需要使用 like

```
password='".md5($_POST['password'])."' 
```

在您的选择查询中，当用户因登录时间而被检查时......我认为你需要这样......如果你之前不使用.md5，你不能将发布的密码与 Db 匹配..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:53:15.650

您无法解码 md5 哈希。

了解通常如何工作的一个想法：例如，您需要将 md5 存储在 BD 中。之后，您将用户输入的字符串，例如，转换为 md5，然后比较两个字符串。

# node.js - node.js https.get() 触发错误 ECONNREFUSED

> ID：15929167
> 
> 赞同：8
> 
> 时间：2013-04-10T14:48:45.593
> 
> 标签：node.js, facebook-graph-api, https

OAuth 舞蹈的步骤之一涉及将通过回调接收到的代码交换为访问令牌。专门针对 Facebook 服务器端身份验证，以下 https GET 请求在响应正文中返回访问代码：

```
https://graph.facebook.com/oauth/access_token?
  client_id=YOUR_APP_ID
  &redirect_uri=YOUR_REDIRECT_URI
  &client_secret=YOUR_APP_SECRET
  &code=CODE_GENERATED_BY_FACEBOOK 
```

Node.js 在尝试连接时会引发错误：

```
 https.get( /**String | Object*/ options, function ( res ) {
   res.setEncoding( 'utf8' );

   res.on( 'data', function ( data ) {
     // parse response body
   } );

 } ).on( 'error',function ( e ) {
      Log.w( TAG, "Error requesting access_token", e );
 } ).end(); 
```

错误是：

```
{  code: 'ECONNREFUSED',
   errno: 'ECONNREFUSED',
   syscall: 'connect' } 
```

该调用适用于 wget/curl，因此它不是传出防火墙规则等问题。节点请求有什么问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T14:48:45.593

原来问题是 https 证书验证失败。从节点的 https.request()[文档](http://nodejs.org/api/https.html#https_https_request_options_callback)：

> **rejectUnauthorized**：如果为 true，则根据提供的 CA 列表验证服务器证书。如果验证失败，则会发出“错误”事件。验证发生在连接级别，在发送 HTTP 请求之前。默认为真。

除非明确提供，否则 http[s].[request|get] 将使用忽略[tls.connect()](http://nodejs.org/api/tls.html#tls_tls_connect_options_callback)选项（包括*rejectUnauthorized*标志）的全局代理。需要修改获取（或请求）的调用：

```
var options = require('url').parse( /**String*/ url );
options.rejectUnauthorized = false;
options.agent = new https.Agent( options );

https.get( /**Object*/ options, function ( res ) {
  // handle response & body
} ).on( 'error',function ( e ) {
  // handle errors
} ).end(); 
```

# arrays - 如何在矩阵中获得多个数字

> ID：15929174
> 
> 赞同：0
> 
> 时间：2013-04-10T14:49:01.320
> 
> 标签：arrays, matlab, matrix, numbers

好的。我有一个简单的问题，尽管我对 Matlab 还是很陌生（自学）。所以我想要一个`1x6`矩阵如下所示：

```
0

0

1

0

321, 12      <--- needs to be in one box in 1x6 matrices

4,30,17,19   <--- needs to be in one box in 1x6 matrices 
```

有没有可能的方法来做到这一点，或者我只需将它们全部写在单独的框中，从而使其成为一个`1x10`矩阵？

我的代码：

```
event_marker = 0;
event_count  = 0;
block_number = 1;

date = [321,12] % (its corresponding variables = 321 and 12)

time = [4,30,17,19] % (its corresponding variable = 4 and 30 and 17 and 19) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:04:47.467

因此，如果我理解正确，您需要一个包含 6 个元素的数组，其中 1 个元素等于`1`，另一个元素是数组`[312,12]`，最后一个元素是数组`[4,30,17,19]`。

我将建议两件事来实现这一点：矩阵和单元阵列。

## 元胞数组

在 Matlab 中，`cell`数组是任意类型数据的容器。您使用花括号定义它（而不是矩阵的大括号）。所以，例如，

```
C = {'test', rand(4), {@cos,@sin}} 
```

是包含一个字符串 ( `C{1}`)、一个普通矩阵 ( `C{2}`) 和另一个包含函数句柄 ( `C{3}`) 的单元格的东西。

对于您的情况，您可以这样做：

```
C = {0,0,1,0, [321,12], [4,30,17,19]}; 
```

或者当然，

```
C = {0, event_marker, event_count, block_number, date, time}; 
```

## 矩阵

根据您使用它的位置，普通矩阵也可能就足够了：

```
M = [0  0  0  0 
     event_marker  0  0  0 
     event_count  0  0  0
     block_number  0  0  0 
     321 12  0  0
     4 30 17 19]; 
```

请注意，您需要一些填充（意思是，您必须以某种方式在右上角添加这些零）。有很多方法可以做到这一点，但我会“把它作为练习”:)

同样，这完全取决于上下文，哪个更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:02:08.667

考虑为您的任务使用[元胞数组](http://www.mathworks.com/help/matlab/cell-arrays.html)而不是矩阵。

```
data = cell(6,1); % allocate cell
data{1} = event_marker; % note the curly braces here!
...
data{6} = date;   % all elements of date fits into a single cell. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:44:12.150

如果您的`date`和`time`变量实际上代表日期（天数、月数、年数）和时间（小时、分钟、秒），则可以将它们打包成一个或两个数字。

查看[DATENUM](http://www.mathworks.com/help/matlab/ref/datenum.html)函数。如果您有一个向量，例如，`[2013, 4, 10]`表示 2013 年 4 月 10 日，您可以将其转换为序列日期：

```
daten = datenum([2013, 4, 10]); 
```

如果您一年中有天数，那没关系，但没有几个月。`datenum([2013, 0, 300])`也将工作。

时间可以和日期一起打包，也可以单独打包：

```
timen = datenum([0, 0, 0, 4, 30, 17.19]); 
```

或者

```
datetimen = datenum([2013, 4, 10, 4, 30, 17.19]); 
```

获得此序列日期后，您可以将其与其他数字一起保存在一个向量中。

[您可以使用DATEVEC](http://www.mathworks.com/help/matlab/ref/datevec.html)和[DATESTR](http://www.mathworks.com/help/matlab/ref/datestr.html)函数将此数字转换回日期向量或日期字符串。

# c# - WebClient 相同的请求适用于 WinForms 但不适用于 WP7

> ID：15929176
> 
> 赞同：3
> 
> 时间：2013-04-10T14:49:12.220
> 
> 标签：c#, windows-phone-7, webclient

这是我的代码：

```
 var client = new WebClient();
    client.Headers[HttpRequestHeader.Authorization] = "Basic " +    "SECRETCODE";
    client.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded; charset=UTF-8";
    client.Headers[HttpRequestHeader.Host] = "api.quizlet.com";
    client.UploadStringCompleted += ClientOnUploadStringCompleted;

    client.UploadStringAsync(new Uri("https://api.quizlet.com/oauth/token"), "POST", string.Format("grant_type={0}&code={1}&redirect_uri={2}",
        HttpUtility.HtmlEncode("authorization_code"), HttpUtility.HtmlEncode(code), HttpUtility.HtmlEncode(AfterOAuthUrl))); 
```

当我在 WinForms 中测试此代码时，我收到了正确的令牌，但是当我在 WP7 上使用它时，它抛出异常：远程服务器返回：“未找到”。我应该怎么办？这是 WP 证书问题，还是我必须在 WP7 上做一些不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:07:54.853

好的...尝试以下操作：

```
client.Headers[HttpRequestHeader.Referer] = "http://api.quizlet.com"; 
```

如果这不起作用：

```
client.Headers[HttpRequestHeader.Referer] = "api.quizlet.com"; 
```

在 WP 项目中。让我知道它是否不起作用。

# javascript - 如何处理在 emberjs 中显示动态全局属性

> ID：15929178
> 
> 赞同：2
> 
> 时间：2013-04-10T14:49:13.510
> 
> 标签：javascript, templates, ember.js

我想要一个标题标题，它会根据使用的控制器而改变。

这是我的应用程序模板：

```
<div class="container">
  <div class="content">
    <div class="page-header">
      {{#if pageTitle}}
        <h1>{{pageTitle}}</h1>
      {{/if}}
    </div>
    <div class="span12">
      {{outlet}}
    </div>
  </div>
</div> 
```

如果设置了页面标题，它应该显示它。

现在说我有一个我试过的帖子控制器：

```
App.PostsController = Ember.ArrayController.extend({
  pageTitle: 'Posts'
}); 
```

这没有用。

我还尝试在以下路线中进行设置：

```
App.PostsRoute = Ember.Route.extend({
  model: function() {
    return App.Post.find();
  },
  setupController: function(controller) {
    controller.set('pageTitle', 'Posts');
  }
}); 
```

我确信这很简单，我只是没有看到做我想做的事情的最佳方式。

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:59:03.853

您需要`pageTitle`在您`ApplicationController`的 .

```
App.PostsRoute = Ember.Route.extend({
  model: function() {
    return App.Post.find();
  },
  setupController: function(controller) {
    this.controllerFor("application").set('pageTitle', 'Posts');
  }
}); 
```

# typo3 - 流动比较日期

> ID：15929181
> 
> 赞同：9
> 
> 时间：2013-04-10T14:49:15.810
> 
> 标签：typo3, fluid

我想比较两个日期。我想创建一个条件来检查我的数据库中的日期是否早于两天内的日期。

这是我的两个变量：

```
{<f:format.date format="d.m.Y">+2 days</f:format.date>}
{<f:format.date format="d.m.Y">{day.valid}</f:format.date>} 
```

我想在模板中解决这个问题，而不是在模型或控制器中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T16:16:32.777

将您的日期分配给变量 »yourdate«。

```
<f:if condition="{f:format.date(date: '+2 days', format: 'Y-m-d')} < {f:format.date(date: yourdate, format: 'Y-m-d')}">
    <f:then>
       yourdate is smaller than now + 2 days.
    </f:then>
    <f:else>
        yourdate is greater than or equal to now + 2 days.
    </f:else>
</f:if> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-12T19:56:51.423

这是我当前的解决方案，它添加了当前日期并使用内容中的日期进行了一些计算。

在控制器中，将当前日期添加到数据中：

`$this->view->assign('date_now', new \DateTime());`

这在流体中作为 {date_now} 可用，然后：

```
<f:if condition="{f:format.date(date: date_now, format: '(Y-m-d)')} > {f:format.date(date: '{event.date}-4 weeks', format: '(Y-m-d)')}">
   <f:then>
      <p>Event date is past</p>
   </f:then>
   <f:else>
      <p>Event date is upcoming</p>
   </f:else>
</f:if> 
```

请注意在右侧（进行了一些计算）中，额外的引号和大括号如何出现在 ( `'{event.date}-4 weeks'`) 中。

PS我更喜欢日期比较的`Y-m-d`格式`U`，因为我们不想比较当前时间——只是日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T16:02:15.663

`format="U"`使用并比较它们将日期转换为 unix 时间戳。您需要添加一个包含比较日期的变量。

```
<f:if condition="{f:format.date(date: day.valid, format: 'U')} > {f:format.date(date: date_compare, format: 'U')}">
    Date is valid
</f:if> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-03T13:33:47.373

实际上：因为 DateTime 有一个`getTimestamp`方法（[http://php.net/manual/en/datetime.gettimestamp.php](http://php.net/manual/en/datetime.gettimestamp.php)，自 5.3.0 起）完全符合 Fluid 中支持的 getter 方法命名，所以以下是完全可能的。给定 $date1 和 $date2 都是分配给模板的 DateTime 实例：

```
<f:if condition="{date1.timestamp} < {date2.timestamp}">...</f:if> 
```

将两个日期作为*unix 时间戳整数*进行比较，而无需格式化日期。因此，对于您的情况，请从您的控制器操作中分配一个`$date = (new \DateTime('now'))->modify('+2 days');`并与 Fluid 中的操作进行比较。或者只是分配`time()`时间戳并直接与之比较，跳过 DateTime 的使用。

# node.js - 自动将对象发送到每个 res.render()

> ID：15929183
> 
> 赞同：0
> 
> 时间：2013-04-10T14:49:20.477
> 
> 标签：node.js, express, pug

我有一个配置对象，我想在我的快速应用程序的几乎每个视图中使用它。它看起来像这样：

```
{
  "url" : "http://whatever.com",
  "more" : "yadda yadda"
} 
```

我想要的所有观点都可以访问，因此我可以轻松参考`config.url`

问题是我不想每次都传递这个变量`res.render('viewname')`

使用 express，是否可以始终提供此服务？我什至做得对吗？或者 express 已经有这方面的东西了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:04:37.513

如果属性是静态的（所有请求都相同），请使用 app.locals。

```
app.locals = {
  "url" : "http://whatever.com",
  "more" : "yadda yadda"
}; 
```

设置的变量`app.set()`可以通过视图中的 settings.x 自动访问。请参阅[文档](http://expressjs.com/api.html#app.locals)。

# javascript - javascript IE 8 错误

> ID：15929188
> 
> 赞同：0
> 
> 时间：2013-04-10T14:49:28.167
> 
> 标签：javascript, internet-explorer, internet-explorer-8

我不断在代码中遇到这个特殊错误

对象不支持此操作

这是什么意思“对象不支持这个动作”？？？

```
attachEvent = function(state){
                if(state == 'up'){
                    slideUp();
                    return false;
                }
                if(state == 'down'){
                    slideDown();
                    return false;
                }
                $(up).click(function(){
                    slideUp();
                });
                $(down).click(function(){
                    slideDown();
                });
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:11:48.197

如果不使用`var`，您的代码将尝试为`attachEvent`全局对象中调用的属性分配值。全局对象`window`位于浏览器中，因此尝试分配在 IE 中失败，因为存在预先存在的只读`window.attachEvent`方法。

最简单的解决方法是使用`var`：

```
var attachEvent = function(state) {
    // Stuff
}; 
```

# javascript - Angular.js 过滤器和函数作用域每秒都在变化

> ID：15929191
> 
> 赞同：0
> 
> 时间：2013-04-10T14:49:31.337
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-scope, angularjs-ng-repeat

问题。我有一个条目表（`$scope.entries`），每行（ng-repeat）有 5 列，其中 2 列有针对各种转换的定制过滤器。

现在在同一个范围内，我有 active_entry( `$scope.active_entry`)，它每秒钟都在变化，因为它以及 angular 的工作原理（我猜），整个范围都在不断检查，我的过滤器也被执行。

这导致Batarang 中的**Watch Expressions**随着时间的推移而高涨。

如何使用为 active_entry 创建某种隔离范围，这样我的过滤器就不会每秒一遍又一遍地渲染？

制定指令是创建隔离范围的唯一方法吗？它会起作用吗？如果我稍后在控制器中需要来自隔离范围的值怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:03:58.617

你在你的问题中问了很多问题。最好在单独的 SO 问题中分别询问他们。

每当一个[Angular 摘要循环](http://docs.angularjs.org/guide/concepts#runtime)运行时，所有的监视和过滤器都会运行。更改 Angualar “内部”的内容将导致摘要循环运行。你怎么变`$scope.active_entry`？如果您可以在 Angular 之外更改它，您也许可以做您想做的事。正如您所提到的，您还必须将该属性放入新的子范围（`scope: true`）或隔离范围（`scope: {...}`）中，然后您可以调用`$scope.digest()`（在更改之后`active_entry`）仅消化该范围。

创建指令将是创建隔离范围的最佳方式。您可以使用 ng-controller 或指令创建子范围。

另请参阅[https://groups.google.com/d/topic/angular/1XtEAX93ces/discussion](https://groups.google.com/d/topic/angular/1XtEAX93ces/discussion)

# sql - Drupal 使用 group by 和 sum 查看查询

> ID：15929192
> 
> 赞同：0
> 
> 时间：2013-04-10T14:49:36.553
> 
> 标签：sql, group-by, views

我已经考虑并使用 D7 视图模块已经有一段时间了，但我无法让它工作。

如果您在下面看到 SQL，我想要简单的分组和求和使用：

桌子

```
name　        age             sex

　　Los　         20　             1

　　San　         25　             0

　　Lan　         30　　           0

    Bos　         23　            1

　　mini          28              1 
```

SQL：

```
SELECT sex,sum(age) FROM `msg_info` group by sex 
```

结果：

```
sex       sum(age)　　

　　0　　　　   55

　　1　　　　   71 
```

我曾尝试使用“聚合”和“查询设置”（不同）来获取这样的表但我不能。“高级”下有一个“纯不同”查询设置，最后只显示一行。我认为这会有所帮助，但不是真的。

真实数据的列比我在这里给出的示例多。聚合设置出现在默认值为“将字段结果组合在一起”的每个字段中。我一直在玩这个。我为要进行 SUM 的字段设置了“总和”。就是不行。

也许任何人都可以提供帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:55:00.500

如果您想要年龄总和，为什么要按性别使用分组？在 select 和 remove group by 中删除性别，它将起作用

# c# - .NET 的并发收集超时？

> ID：15929194
> 
> 赞同：9
> 
> 时间：2013-04-10T14:49:42.440
> 
> 标签：c#, .net, collections, concurrency, timeout

我有一个并发集合。

```
var q = new ConcurrentQueue<int>(); // Or a stack/bag/etc... 
```

我可以得到这样的物品。

```
int i;
if (q.TryDequeue(out i))
    DoStuff(i); 
```

但我需要它，比如“等待 10 秒再返回 false，以防有人添加新项目”：

```
int i;
if (q.TryDequeue(TimeSpan.FromSeconds(10), out i))
    DoStuff(i); 
```

我可以写一个这样的扩展方法：

```
public static bool TryDequeue<T>(
    this ConcurrentQueue<T> queue,
    TimeSpan timeout,
    out T result)
{
    // Validations...

    for (int i = 0; i < 2; i++)
    {
        if (queue.TryDequeue(out result))
            return true;
        else if (i == 1)
            return false;

        Thread.Sleep(timeout);
    }
} 
```

但是如果有人在 5 秒内将一个项目添加到队列中，我不想再等 5 秒。

.NET 中是否有任何支持此功能的线程安全集合？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T14:51:54.303

与其直接使用，不如`ConcurrentQueue`将其包装在[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx). 然后您可以使用[`TryTake(out T, TimeSpan)`](http://msdn.microsoft.com/en-us/library/dd287247.aspx).

`BlockingCollection`专为生产者/消费者场景设计。（请注意，您应该同时查看[TPL 数据流](http://msdn.microsoft.com/en-us/library/hh228603.aspx)。）

# github - 使用 Github 进行发布控制和问题跟踪

> ID：15929195
> 
> 赞同：1
> 
> 时间：2013-04-10T14:49:43.340
> 
> 标签：github, tracking, release-management, issue-tracking

根据我的[SO 帖子](https://stackoverflow.com/questions/10722989)，我一直使用 Github 作为我们的 VCS，并且在 windows Github 工具的帮助下，处理这些基本操作非常棒。然而，对于类似合并的操作，我必须回到 Gitbash （[SO Post](https://stackoverflow.com/questions/15705883)），但没关系。

> 因此，源代码级别的 VCS 就位。现在，我们想向前迈出一步，使用其简单的问题跟踪器来进行“发布控制”。对我们来说，这意味着能够跟踪每个稳定的构建（它可以是新功能或错误修复等）。[这个想法](https://stackoverflow.com/questions/13418167)是创建问题，将它们绑定到里程碑并使用 Github 提交评论来关闭问题并标记它作为一个稳定的版本/构建。标记在哪里出现？

我了解到我们有一个“开发”分支来进行持续的更改，并定期与 master 合并（即每个稳定版本）。

*这是正确的方法吗？我们需要能够从 1.1 回到发布/构建 1.0 - 某种回滚以防万一将来需要它（这可能吗？如何？） Github 是否满足或我们还需要使用一些[外部工具](https://stackoverflow.com/questions/623130)？*

请分享您的经验和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:11:19.737

在等待其他专家的评论时，我想分享一个我遇到的并且看起来很棒的模型！

[**一个成功的 Git 分支模型**](http://nvie.com/posts/a-successful-git-branching-model/)（ [SO Post](https://stackoverflow.com/questions/11811880)）

总而言之，这是我如何满足我的基本需求（并在需要时对其进行扩展）-

*   最初维护两个分支“master”和“development”
*   Master 应该始终有一个稳定的版本，并且开发有一个持续的源（可能不稳定）
*   未来，如果我们需要在发布后修复错误，我们可以创建一个 hotfix 分支，并在稳定时将其与 master/development 合并
*   我发现的一件好事是我可以以标签的形式维护稳定的版本（即每个新版本的新标签）
*   最终，随着我们继续每个稳定版本，主分支将与开发合并

使用上述模型可以处理更多内容，但我看到我最初的担忧得到了解决。有更好的建议吗？

# objective-c - ALAsset 缩略图有黑色背景

> ID：15929196
> 
> 赞同：2
> 
> 时间：2013-04-10T14:49:44.597
> 
> 标签：objective-c, alassetslibrary, alasset

我通过使用类编写了自己的图像选择器`ALAssetsLibrary`类。

几乎一切都很好，**但是有些图像缩略图具有黑色背景，而实际图像是透明/Alpha 通道。**

如何解决这个问题？

这是我从 ALAsset 缩略图属性加载图像的枚举块：

```
[reversedItems enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^(void) {
        UIImage *image = [UIImage imageWithCGImage:[[_assets objectAtIndex:allItems - idx] thumbnail]];

        dispatch_async(dispatch_get_main_queue(), ^{
            GridView *gridView = (GridView *)obj;
            gridView.imageView.image = image;
        });
    });

}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T11:24:54.377

如果您使用 fullScreenImage 属性，则有一种解决方法，它的执行速度应该较慢，但应该可以正常工作。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) {
        ALAsset *asset = [_assets objectAtIndex:allItems - idx];
        UIImage *smallImage = [UIImage imageWithCGImage:[asset thumbnail]];
        UIImage *image;

        CGSize size = [smallImage size];
        CGRect box = CGRectMake(0, 0, size.width, size.height);

        UIGraphicsBeginImageContext(size);
        CGContextRef context = UIGraphicsGetCurrentContext();

        CGContextSetFillColorWithColor(context, [[UIColor clearColor] CGColor]);
        CGContextFillRect(context, box);

        CGContextTranslateCTM(context, 0.0, size.height);
        CGContextScaleCTM(context, 1.0, -1.0);

        CGContextDrawImage(context, box, [[asset defaultRepresentation] fullScreenImage]);

        image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        dispatch_async(dispatch_get_main_queue(), ^{
            TTGridView *gridView = (TTGridView *)obj;
            gridView.imageView.image = image;
        });
    }); 
```

# sql - 过程或函数 XXX 指定的参数过多

> ID：15929201
> 
> 赞同：1
> 
> 时间：2013-04-10T14:49:51.390
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

所以我整天都在与这个问题作斗争。起初我认为这一定与我的调用代码有关，尽管一切看起来都很好。调用代码只是来自 VB 代码隐藏文件的标准调用，无论如何都没有链接到数据绑定。我提到这一点是因为我看到很多其他有这个问题的人由于 DataGrids 等而遇到过这个问题。

然后我转到数据库本身并手动执行该过程，它在 SQL Sevrer Manager 中给出了相同的错误。我已经尝试删除该过程并重新创建它，甚至从头开始重新编写它，它仍然会发生。我还尝试从 @Password 参数中删除默认的 NULL 值，但仍然没有变化。

我正在运行 SQL Server 2008 R2

这是程序代码：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[sp_AddUser] 
    @Username       varchar(50),
    @Fullname       varchar(50),
    @Password       varchar(50) = NULL,
    @Datecreated    DateTime,
    @RoleID         int,
    @ResetPwd       bit,
    @Email          varchar(50), 
    @locked         bit, 
    @Sign           varchar(max), 
    @Sysuser        bit
AS
BEGIN
    INSERT INTO users ( 
        user_name,
        full_name,
        password,
        datetime_created,
        role_id,
        password_reset,
        email_address, 
        locked, 
        email_signature, 
        asrsys_user)
    VALUES (
        @Username,
        @Fullname,
        @Password,
        @Datecreated,
        @RoleID,
        @ResetPwd,
        @Email, 
        @locked, 
        @Sign, 
        @Sysuser)
END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:56:20.350

您应该避免将`sp_`其用作存储过程的前缀 - 它保留给 Microsoft 使用 - 并调用奇怪的查找规则（`master`在当前数据库之前搜索），这意味着 MS 是否引入了同名的 SP（例如通过服务包），MS SP 将“获胜”。

但是在这种情况下，Microsoft*已经*“赢了”——他们有一个名为 的存储过程`sp_adduser`，而它就是被调用的那个。重命名您的存储过程。

# java - 位图不显示

> ID：15929203
> 
> 赞同：0
> 
> 时间：2013-04-10T14:49:56.807
> 
> 标签：java

`file.name = "/sdcard/Pictures/Screenshots/Screenshot_2013-01-15-10-42-02.jpg";`

但是，每次我尝试通过单击位图打开文件时，都会导致打开的应用程序崩溃，而不是我的应用程序。此外，位图不会以某种方式显示图像。

Adapter.java（到位图）

```
public View getView(int position, View convertView, Viewgroup parent(){
   case Image:
   Bitmap bp = new BitmapFactory().decodeFile(file.name);
   image.setImageBitmap(bp.createBitmap(200,200,Config.ARGB_8888));
   break;

} 
```

我的对话框显示目录“/sdcard”及其所有文件。选择文件/图像后，路径将与位图图像一起保存。

（例如：）`file.name = "/sdcard/Pictures/Screenshots/Screenshot_2013-01-15-10-42-02.jpg";`此外，位图不会以某种方式显示图像。

我已经设置了写外部存储权限。和代码片段如下。我真的不知道出了什么问题。我也尝试了所有文件类型，例如 txt、pdf、doc 等，所有这些都导致打开文件应用程序崩溃，并且无法打开文件。

Adapter.java（到位图）

```
public View getView(int position, View convertView, Viewgroup parent(){
   case Image:
   Bitmap bp = new BitmapFactory().decodeFile(file.name);
   image.setImageBitmap(bp.createBitmap(200,200,Config.ARGB_8888));
   break;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:25:22.763

哦，我刚刚注意到您的评论“位图无法以某种方式显示图像”。

改变

```
image.setImageBitmap(bp.createBitmap(200,200,Config.ARGB_8888)); 
```

至

```
image.setImageBitmap(bp); 
```

`createBitmap()`创建一个空白位图。它不会调整现有位图的大小。

有几种不同的方法可以调整现有位图的大小。例如，您可以使用：

```
image.setImageBitmap(Bitmap.createScaledBitmap(bp, 200, 200, true)); 
```

# javascript - jQuery 选择器找不到存在的元素

> ID：15929205
> 
> 赞同：0
> 
> 时间：2013-04-10T14:50:00.743
> 
> 标签：javascript, jquery, html

这不起作用

```
var name= "#443.selected:first";
selectedEntity = $(name).attr('entityId'); 
```

这有效

```
var name= "li.selected:first";
 selectedEntity = $(name).attr('entityId'); 
```

`selectedEntity`未定义，但确实存在 id="443" class="selected" 的元素。

为什么第一个示例不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:55:17.390

您可以使用属性选择器：

```
$('[id="443"].selected:first') 
```

看到这个[jsFiddle 演示](http://jsfiddle.net/LGmxZ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:19:39.673

尽管在 HTML5 ID 以外的 HTML 中不允许使用以数字开头的 ID，但您的选择器应该可以工作（[工作 Demo](http://jsfiddle.net/DG9W9/)）。您的代码和/或标记中的其他地方一定有错误。

您应该解决几个问题：

1.  ID 必须是唯一的，否则您的 HTML 无效
2.  过度使用 ID-Selector 对性能不利，因为 1) 甚至没有必要
3.  ID-Selectors 只返回第一个元素，所以 using`:first`是无用的（也受第 1 点影响）
4.  不要使用自定义属性，例如`entityId`. 而是使用[`data-`前缀](http://ejohn.org/blog/html-5-data-attributes/). 然后您可以使用[jQuerys 数据](http://api.jquery.com/data/)方法来获取/设置这些属性。（但请注意，您不能使用[camelCase](http://bugs.jquery.com/ticket/9066)）。

# jsp - 禁用 304 HTTP Tomcat

> ID：15929214
> 
> 赞同：0
> 
> 时间：2013-04-10T14:50:20.293
> 
> 标签：jsp, tomcat, caching

我最近开始使用 F5 的 BigIP Web Accelerator 来代理我的 tomcat Web 服务器。缓存由 HTTP 响应 304 触发的来自 tomcat 的内容可能存在错误（请参阅：http: [//support.f5.com/kb/en-us/solutions/public/12000/800/sol12802.html](http://support.f5.com/kb/en-us/solutions/public/12000/800/sol12802.html)） .

为了证明这是正确的理论 - 我想暂时禁用来自 tomcat 服务器的 304 HTTP 响应，看看它是否能解决问题。

Ubuntu 上的 tomcat 版本是 7.0.26-1。在 context.xml 中设置并重新启动 tomcat 并没有解决问题。

欢迎提出建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T07:36:19.990

我不知道这是否可以通过tomcat中的配置进行。我几乎不这么认为，至少对于非静态文件。（但是我不知道）。

但是您要求提供建议，所以我会尝试删除负责 HTTP 304 响应的请求和响应标头。所以在响应中，这将是`ETag`标题。在请求中，它将是`If-None-Match` and`If-Modified-Since`标头。

如何实现这一点取决于您的环境。您可以为您的应用程序编写一个 Java EE 过滤器来删除它们，或者在 tomcat 中全局使用阀门（我认为后者是 tomcat 特定的可能性）。

如果您的 Tomcat 前面有一个带有 mod_jk 的 apache，您可以使用 mod_headers 取消设置标头（访问[http://httpd.apache.org/docs/2.2/mod/mod_headers.html](http://httpd.apache.org/docs/2.2/mod/mod_headers.html)）或者如果 apache 本身正在生成标头只需轮到 ETag 生成。我能想到的最后一种可能性是您的 f5 设备提供了一种删除标题的方法。

希望这可以帮助！

# ruby-on-rails - Rails View with an Exception - Without different Layouts and Design from the rest of the application

> ID：15929217
> 
> 赞同：0
> 
> 时间：2013-04-10T14:50:22.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, view

Is it possible for one view in Rails NOT to have the layout of the other views. How can I do this? It automatically has the header and footer etc of the rest of the views, but I want just one of the views to look very different, and have it's own separate stylesheets, javascripts and layouts, and not have the header and footer of the rest of the pages.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:53:01.573

You can use the `:layout` option to tell Rails to use a specific file as the layout for the current action:

```
render :layout => 'special_layout' 
```

# .net - 从实体框架编辑模型

> ID：15929218
> 
> 赞同：0
> 
> 时间：2013-04-10T14:50:23.777
> 
> 标签：.net, entity-framework, model

我的数据库中有下一张表：

```
Users:
   id
   userName
   pass

    1
    |
    *

Users_Groups:
   id_user
   id_group
   delegate(bool)

    *
    |
    1

Groups:
   id
   GroupName
   ... 
```

我使用实体框架创建模型，使用 add-> EF 数据模型...在 3 个表中选择...获取 .edmx 文件

但我得到了模型：

```
-Users
-users_Groups
-Groups 
```

我只想

```
-Users
-Groups (whit the delegate value) 
```

我如何编辑模型或如何创建一个新模型来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:31:00.163

Delegate 属性是否在逻辑上描述了组或用户？还是用户组的组合？

您的模型说它是用户组组合的属性，因此用户组组合成为它自己的实体，因为它具有两个外键以外的属性。

如果您的组在逻辑上有一个（并且只有一个）用户作为它的委托，那么您应该将 UserId 添加为组的外键属性。如果许多用户可以成为许多组的代表，那么它应该是现在（具有 Delegate 属性的单独 UserGroup 实体），或者您可以有 2 个连接表，一个描述组的普通用户，另一个描述代表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:57:34.197

我在这里找到了我的解决方案： [https ://skydrive.live.com/?cid=245ed00edb4c374e&id=245ED00EDB4C374E!132](https://skydrive.live.com/?cid=245ed00edb4c374e&id=245ED00EDB4C374E!132)

在第 76 页的 2.2.5 上“将多对多表映射为 2 个多对多关联”

对所有人

# python - 对数据框的列名应用更改

> ID：15929220
> 
> 赞同：0
> 
> 时间：2013-04-10T14:50:28.043
> 
> 标签：python, pandas

我有一个数据框，我想更改列名。目前我正在使用下面的方法，其中涉及转置、重新索引和转置。必须有一个更简单的方法......

任何建议表示赞赏

```
import pandas as pd

#make a dataframe with wacky column names
d = {'garbled #### one' : pd.Series([1., 2., 3., 4.], index=['a', 'b', 'c', 'd']),
     'garbled ### two' : pd.Series([1., 2., 3., 4.], index=['a', 'b', 'c', 'd'])}
df = pd.DataFrame(d)

#fix the column names by transposing, reseting index, string manipulation,
#and transposing back  
df = df.T
df = df.reset_index()
df['index'] = df['index'].apply(lambda x: x.split()[0]+ " " +x.split()[2])
df = df.set_index('index')
df = df.T
df

index   garbled two garbled one
a    1   1
b    2   2
c    3   3
d    4   4 
```

谢谢，扎克cp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:55:54.503

`rename_axis`允许重命名而不创建/删除列。重命名可以使用函数或一对一映射（类似字典）来完成，映射可以是部分的（不必包括所有名称）。

```
In [42]: df
Out[42]: 
   garbled #### one  garbled #### two
a                 1                 1
b                 2                 2
c                 3                 3
d                 4                 4

In [43]: df.rename_axis(lambda x: x.split()[0]+ " " +x.split()[2])
Out[43]: 
   garbled one  garbled two
a            1            1
b            2            2
c            3            3
d            4            4

In [44]: df.rename_axis({'garbled #### one': 'one', 'garbled #### two': 'two'})
Out[44]: 
   one  two
a    1    1
b    2    2
c    3    3
d    4    4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:31:46.570

也许我低估了这个问题，但这是一个相当微不足道的方法。

使用以下命令获取列名列表（实际上是 a `pd.Index`）：

```
df.columns 
```

遍历列名以查看是否有乱码。如果发现一列名称乱码，则新建一个名称好听的列，然后删除旧列，如下所示：

```
df["good-one"] = df["garbled #### one"]
del df["garbled #### one"] 
```

除非表很大，并且复制的数据量是一个问题，否则这将起作用。

# php - 将选择值附加到 URL

> ID：15929223
> 
> 赞同：-2
> 
> 时间：2013-04-10T14:50:36.627
> 
> 标签：php, jquery, symfony

我找到了这些提示

```
<select id="title">
          <option value="1">Mr</option>
          <option value="2">Mrs</option>
          <option value="3">Miss</option>
        </select> 
```

现在用户已经选择了第二个选项：Mrs. 获取值（在本例中为“2”）：

```
$("select#title").val(); 
```

这一切都好。我想要做的是追加 **$("select#title").val();** 到这样的 URL

```
 $.get('http://localhost/Symfony/web/app_dev.php/select/2', function(data) 
```

代替 2 我试过`$.get('http://localhost/Symfony/web/app_dev.php/select/ $("select#title").val()', function(data)` ，但这失败了。有什么想法吗？

```
<div id="teln_operatorbundle_centrextype">
<div>
<label class="required" for="teln_operatorbundle_centrextype_numberrange">Numberrange</label>
<select id="teln_operatorbundle_centrextype_numberrange" multiple="multiple" required="required" name="teln_operatorbundle_centrextype[numberrange][]">
<option value="2">060013000</option>
<option value="3">060014700</option>
</select>
</div>
<input id="teln_operatorbundle_centrextype__token" type="hidden" value="f239bb430b4153d5d88fc7234751039a73253e87" name="teln_operatorbundle_centrextype[_token]">
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:51:34.270

尝试这个：

```
$.get('http://localhost/Symfony/web/app_dev.php/select/' + $("select#title").val(), function(data) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T14:52:53.320

否则试试这个，

```
var title = $("select#title").val();

$.get('http://localhost/Symfony/web/app_dev.php/select/'+title) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:53:01.947

您需要使用字符串连接从两部分（静态字符串和动态值）形成 URL：

```
$.get('http://localhost/Symfony/web/app_dev.php/select/' + $('#title').val(), function(data) {

}); 
```

# javascript - 使用 javascript 的 Angular ng-animate 未按预期工作

> ID：15929225
> 
> 赞同：3
> 
> 时间：2013-04-10T14:50:42.437
> 
> 标签：javascript, angularjs, ng-animate

我尝试使用 JS 实现演示示例，但 ng-switch 出现问题......我可以看到新元素正在添加到 dom 中，但 ng-switch 没有删除不需要的 DIV。你能帮忙吗...

这里是**[小提琴...](http://jsfiddle.net/LFFav/9/)**

```
var ngModule = angular.module('myApp', []);
ngModule.animation('js-wave-enter', function () {
return {
    setup: function (element) {
        //prepare the element for animation
        element.css({ 'position': 'absolute', 'left': '100%' });
    },
    start: function (element, done, memo) {
        //start the animation
        element.animate({ 'left': 0  }, function () {
            //call when the animation is complete
            done();
        });
    }
}
});

ngModule.animation('js-wave-leave', function () {
return {
    setup: function (element) {
        //prepare the element for animation
        element.css({'position': 'absolute',  'left': 0     });           
    },
    start: function (element, done, memo) {
        //start the animation
        element.animate({ 'left': '-100%'      }, function () {
            //call when the animation is complete
            done();
        });
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:39:22.377

jQLite 不包括 animate() 方法。在包含 Angular 之前，您需要正确包含 jQuery，并且您的代码可以正常工作。因此，只需在包含 AngularJS 的脚本标记之前添加以下内容：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

[更新了 jsFiddle](http://jsfiddle.net/ud3323/LFFav/10/)

# c# - C# 等效于 JScript 的新 ActiveXObject

> ID：15929231
> 
> 赞同：4
> 
> 时间：2013-04-10T14:50:56.017
> 
> 标签：c#, activex, jscript.net

我正在尝试使用`ActiveXObject()`C# 中 JScript.NET 中的新功能。我怎样才能做到这一点？

并且不要说你可以用 COM 对象做的任何事情都可以在 C# 中完成。如果我想那样做，我已经做到了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T07:25:00.113

您可以使用创建 COM 对象的实例

```
Activator.CreateInstance(Type.GetTypeFromProgID(ProgID)) 
```

然后使用后期绑定与他们合作。例如：

```
using System.Reflection;
...

Type wshType = Type.GetTypeFromProgID("WScript.Shell");
object wshShell = Activator.CreateInstance(wshType);
wshType.InvokeMember("Popup", BindingFlags.InvokeMethod, null, wshShell, new object[] {"Hello, world!"}); 
```

或者，使用 C# 4 的`dynamic`关键字：

```
// NB: Add reference to Microsoft.CSharp.dll
dynamic wshShell = Activator.CreateInstance(Type.GetTypeFromProgID("WScript.Shell"));
wshShell.Popup("Hello, world!"); 
```

# python - 用 Python 编写分词器

> ID：15929233
> 
> 赞同：18
> 
> 时间：2013-04-10T14:51:00.060
> 
> 标签：python, regex, token, tokenize, nltk

我想在 Python 中设计一个自定义标记器模块，让用户指定用于输入的标记器。例如，考虑以下输入：

> 问：实现这一目标的好方法是什么？答：我不太确定。我想我会使用 Python。

我希望能够提供[NLTK 的句子标记化](http://nltk.org/api/nltk.tokenize.html)，`sent_tokenize()`作为一种选择，因为它在许多情况下都能很好地工作，我不想重新发明轮子。除此之外，我还想提供一个更细粒度的标记化构建器（类似于规则引擎的东西）。让我解释：

假设我提供了几个标记器：

```
SENTENCE # Tokenizes the given input by using sent_tokenize()
WORD # Tokenizes the given input by using word_tokenize()
QA # Tokenizes using a custom regular expression. E.g., Q: (.*?) A: (.*?) 
```

我想支持如下规则：

1.  QA -> SENTENCE：首先应用 QA 分词器，然后是句子分词器
2.  QA：仅应用 QA 分词器

因此，预期的输出如下：

**1\. 质量保证 -> 句子**

```
[
  ('QUESTION', 
             ('SENTENCE', 'What is a good way to achieve this?'), 
  ),
  ('ANSWER', 
             ('SENTENCE', 'I am not so sure', 'I think I will use Python')
  )
] 
```

**2\. 质量保证**

```
[
  ('QUESTION', 'What is a good way to achieve this?'),
  ('ANSWER', 'I am not so sure. I think I will use Python')
] 
```

有什么好的设计可以有效地实现这一目标？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T15:47:26.393

由于在 Python 中标记化很容易，我想知道您的模块计划提供什么。我的意思是，当启动一个软件时，一个好的设计而不是首先考虑使用场景，而不是首先考虑数据结构。

您的预期输出示例有点令人困惑。我假设您希望标记器在左侧返回名称，在右侧返回标记列表。我玩了一点来获得类似的结果，但使用列表更容易处理：

```
import re

# some tokenizers
def tokzr_WORD(txt): return ('WORD', re.findall(r'(?ms)\W*(\w+)', txt))  # split words
def tokzr_SENT(txt): return ('SENTENCE', re.findall(r'(?ms)\s*(.*?(?:\.|\?|!))', txt))  # split sentences
def tokzr_QA(txt):
    l_qa = []
    for m in re.finditer(r'(?ms)^[\s#\-\*]*(?:Q|Question)\s*:\s*(?P<QUESTION>\S.*?\?)[\s#\-\*]+(?:A|Answer)\s*:\s*(?P<ANSWER>\S.*?)$', txt):  # split (Q, A) sequences
        for k in ['QUESTION', 'ANSWER']:
            l_qa.append(m.groupdict()[k])
    return ('QA', l_qa)
def tokzr_QA_non_canonical(txt):  # Note: not supported by tokenize_recursively() as not canonical.
    l_qa = []
    for m in re.finditer(r'(?ms)^[\s#\-\*]*(?:Q|Question)\s*:\s*(?P<QUESTION>\S.*?\?)[\s#\-\*]+(?:A|Answer)\s*:\s*(?P<ANSWER>\S.*?)$', txt):  # split (Q, A) sequences
        for k in ['QUESTION', 'ANSWER']:
            l_qa.append((k, m.groupdict()[k]))
    return l_qa

dict_tokzr = {  # control string: tokenizer function
    'WORD'    : tokzr_WORD,
    'SENTENCE': tokzr_SENT,
    'QA'      : tokzr_QA,
}

# the core function
def tokenize_recursively(l_tokzr, work_on, lev=0):
    if isinstance(work_on, basestring):
        ctrl, work_on = dict_tokzr[l_tokzr[0]](work_on)  # tokenize
    else:
        ctrl, work_on = work_on[0], work_on[1:]  # get right part
    ret = [ctrl]
    if len(l_tokzr) == 1:
        ret.append(work_on)  # add right part
    else:
        for wo in work_on:  # dive into tree
            t = tokenize_recursively(l_tokzr[1:], wo, lev + 1)
            ret.append(t)
    return ret

# just for printing
def nestedListLines(aList, ind='    ', d=0):
    """ Returns multi-line string representation of \param aList.  Use \param ind to indent per level. """
    sRet = '\n' + d * ind + '['
    nested = 0
    for i, e in enumerate(aList):
        if i:
            sRet += ', '
        if type(e) == type(aList):
            sRet += nestedListLines(e, ind, d + 1)
            nested = 1
        else:
            sRet += '\n' + (d + 1) * ind + repr(e) if nested else repr(e)
    sRet += '\n' + d * ind + ']' if nested else ']'
    return sRet

# main()
inp1 = """
    * Question: I want try something.  Should I?
    * Answer  : I'd assume so.  Give it a try.
"""
inp2 = inp1 + 'Q: What is a good way to achieve this?  A: I am not so sure. I think I will use Python.'
print repr(tokzr_WORD(inp1))
print repr(tokzr_SENT(inp1))
print repr(tokzr_QA(inp1))
print repr(tokzr_QA_non_canonical(inp1))  # Really this way?
print

for ctrl, inp in [  # example control sequences
    ('SENTENCE-WORD', inp1),
    ('QA-SENTENCE', inp2)
]:
    res = tokenize_recursively(ctrl.split('-'), inp)
    print nestedListLines(res) 
```

顺便提一句。Python/Lib/tokenize.py（用于 Python 代码本身）可能值得一看如何处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T15:19:38.427

如果我正确理解了这个问题，那么我认为您应该重新发明轮子。我将为您想要的不同类型的标记化实现状态机，并使用 python 字典来保存标记。

[http://en.wikipedia.org/wiki/Finite-state_machine](http://en.wikipedia.org/wiki/Finite-state_machine)

示例状态机将使用带空格的句子并打印出单词，当然您可以以更简单的方式执行此特定示例！但是通常使用状态机，您可以获得线性时间性能并且可以轻松地对其进行成本化！

```
while 1:
    if state == "start":
        if i == len(text):
            state = "end"
        elif text[i] == " ":
            state = "new word"
            i = i - 1
        else:
            word.append(text[i])
    elif state == "new word":
        print(''.join(word))
        del word[:]
        state = "start"
    elif state == "end":
        print(''.join(word))
        break
    i = i + 1 
```

[http://docs.python.org/2/library/collections.html#collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)

然后你可以例如使用这个 python 数据结构来保存你的令牌。我认为它非常适合您的需求！

希望这是一些帮助。

# sql - 合并前的子查询与临时表

> ID：15929239
> 
> 赞同：1
> 
> 时间：2013-04-10T14:51:07.953
> 
> 标签：sql, sql-server, tsql, optimization

我有一个复杂的查询，我想将其用作合并到表中的源。这将在数​​百万行中执行。目前我正在尝试通过在合并之前将其插入临时表来对数据应用约束。

操作是：

*   过滤掉重复数据。
*   加入一些表以提取其他数据
*   插入临时表。

这是查询。

```
-- Get all Orders that aren't in the system
WITH Orders AS
(
    SELECT *
    FROM [Staging].Orders o
    WHERE NOT EXISTS
    (
        SELECT 1
        FROM Maps.VendorBOrders vbo
        JOIN OrderFact of
        ON of.Id = vbo.OrderFactId
        AND InternalOrderId = o.InternalOrderId
        AND of.DataSetId = o.DataSetId
        AND of.IsDelete = 0
    )
)
INSERT INTO #VendorBOrders
    (
      CustomerId
     ,OrderId
     ,OrderTypeId
     ,TypeCode
     ,LineNumber
     ,FromDate
     ,ThruDate
     ,LineFromDate
     ,LineThruDate
     ,PlaceOfService
     ,RevenueCode
     ,BillingProviderId
     ,Cost
     ,AdjustmentTypeCode
     ,PaymentDenialCode
     ,EffectiveDate
     ,IDRLoadDate
     ,RelatedOrderId
     ,DataSetId
    )
SELECT
     vc.CustomerId
    ,OrderId
    ,OrderTypeId
    ,TypeCode
    ,LineNumber
    ,FromDate
    ,ThruDate
    ,LineFromDate
    ,LineThruDate
    ,PlaceOfService
    ,RevenueCode
    ,bp.Id
    ,Cost
    ,AdjustmentTypeCode
    ,PaymentDenialCode
    ,EffectiveDate
    ,IDRLoadDate
    ,ro.Id
    ,o.DataSetId
FROM
Orders o
-- Join related orders to match orders sharing same instance
JOIN Maps.VendorBRelatedOrder ro
ON ro.OrderControlNumber = o.OrderControlNumber
AND ro.EquitableCustomerId = o.EquitableCustomerId
AND ro.DataSetId = o.DataSetId
JOIN BillingProvider bp
ON bp.ProviderNPI = o.ProviderNPI
-- Join on customers and fail if the customer doesn't exist
LEFT OUTER JOIN [Maps].VendorBCustomer vc
ON vc.ExtenalCustomerId = o.ExtenalCustomerId
AND vc.VendorId = o.VendorId; 
```

我想知道是否有什么我可以做的来优化它的时间。我曾尝试使用 DB Engine Tuner，但此查询比我正在运行的其他查询多占用 100 倍的 CPU 时间。还有什么我可以研究的，或者查询不能进一步改进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:29:07.303

通常，当我进行速度测试时，我会检查 SQL 的各个部分以查看问题所在。打开“执行计划”，看看大部分时间都花在了哪里。此外，如果您只想快速而肮脏地突出显示您的 CTE 并运行它。是不是很快，是的，继续前进。

我有时发现一个索引被关闭会抛出整个复杂的连接逻辑，只需让数据库做一些大事情的一部分，然后找到那个部分。

另一个想法是，如果您在生产环境或类似环境中有一个快速的 tempdb，那么也将您的 CTE 转储到一个临时表中。对此进行索引，看看是否可以加快速度。有时 CTE、表变量和临时表在连接时会失去一些性能。我发现在部分对象上创建索引有时会提高性能，但您也会在 tempdb 上增加更多负载来执行此操作，因此请记住这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:17:40.043

CTE 只是语法

在该联接上评估（运行）该 CTE

首先将其作为选择语句运行（不插入）

如果选择很慢，则：
将该 CTE 移动到 #TEMP，以便对其进行一次评估并具体化
在三个连接列上放置一个索引（PK，如果适用）

如果选择不慢那么它是#VendorBOrders 上的插入时间
拳头只创建PK并对PK上的插入进行排序，以免对该聚集索引进行碎片化
然后在插入完成后构建任何其他必要的索引

# c# - 将 XML 属性添加到序列化的类属性

> ID：15929245
> 
> 赞同：1
> 
> 时间：2013-04-10T14:51:12.460
> 
> 标签：c#, xml, xmlserializer

我看过一个使用包装类来执行此操作的示例，但我想知道是否有更好（更简单）的方法。

我的课程如下：

```
public class PartData
{
  public List<PartInfo> PartList { get; set; }
}

public class PartInfo
{
  public string PartNumber { get; set; }

  public string OEMNumbers { get; set; }

  public List<VehicleApplication> VehicleApplications { get; set; }
}

public class VehicleApplication
{

  public string Year { get; set; }

  public string Make { get; set; }

  public string Model { get; set; }
} 
```

序列化代码：

```
//serialize
private void serialize()
{
   PartData p = GetParts();
   SerializeClass(p);
}

public void SerializeClass(object instance)
{
  var serializer = new XmlSerializer(typeof(PartData));

  using (var writer = new StreamWriter("C:\\TestFile.xml"))
  {
    serializer.Serialize(writer, instance);
  }
} 
```

序列化时，我得到以下输出：

```
 <PartData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <PartList>
    <PartInfo>
      <PartNumber>12345</PartNumber>
      <OEMNumbers>14556, 14557, 14558, 14559</OEMNumbers>
      <VehicleApplications>
        <VehicleApplication>
          <Year>2001</Year>
          <Make>Ford</Make>
          <Model>F150</Model>
        </VehicleApplication>
        <VehicleApplication>
          <Year>2001</Year>
          <Make>Ford</Make>
          <Model>F150</Model>
        </VehicleApplication>
        <VehicleApplication>
          <Year>2001</Year>
          <Make>Ford</Make>
          <Model>F150</Model>
        </VehicleApplication>
        <VehicleApplication>
          <Year>2001</Year>
          <Make>Ford</Make>
          <Model>F150</Model>
        </VehicleApplication>
      </VehicleApplications>
    </PartInfo>
  </PartList>
</PartData> 
```

理想情况下，我想让 PartNumber 成为这样的属性：

```
 <PartData xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <PartList>
    <PartInfo>
      <PartNumber Id ="12345">
      <OEMNumbers>14556, 14557, 14558, 14559</OEMNumbers>
      <VehicleApplications>
        <VehicleApplication>
          <Year>2001</Year>
          <Make>Ford</Make>
          <Model>F150</Model>
        </VehicleApplication>
        <VehicleApplication>
          <Year>2001</Year>
          <Make>Ford</Make>
          <Model>F150</Model>
        </VehicleApplication>
        <VehicleApplication>
          <Year>2001</Year>
          <Make>Ford</Make>
          <Model>F150</Model>
        </VehicleApplication>
        <VehicleApplication>
          <Year>2001</Year>
          <Make>Ford</Make>
          <Model>F150</Model>
        </VehicleApplication>
      </VehicleApplications>
    </Partnumber>
    </PartInfo>
  </PartList>
</PartData> 
```

我试过添加：

```
public class PartInfo
{
  [XmlAttribute("Id")]
  public string PartNumber { get; set; }

  public string OEMNumbers { get; set; }

  public List<VehicleApplication> VehicleApplications { get; set; }
} 
```

但创建：

```
<PartInfo Id="12345"> 
```

当我需要时：

```
<PartNumber Id="12345"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:30:37.013

我认为这是实现您想要实现的目标的唯一方法

```
public class PartDetail
{
  [XmlAttribute]
  public string ID{ get; set; }

  public string OEMNumbers { get; set; }

  public List<VehicleApplication> VehicleApplications { get; set; }
}

public class PartInfo
{
  public PartDetail { get; set; }
} 
```

在回答您的第一条评论时，这是实现它的最简单方法，另一种方法是编写自定义序列化程序

# encoding - 如何获取 Encoding.GetEncoding("iso-8859-1") 十六进制码？

> ID：15929247
> 
> 赞同：1
> 
> 时间：2013-04-10T14:51:15.577
> 
> 标签：encoding, character-encoding, sms, sms-gateway

我需要通过 HTTP Post 发送带有“caiò”等特殊字符的 SMS

因此，使用我的代码，我尝试将我的字符串转换为 ISO-8859-1。

基本上，如果我的字符串在 ISO-8859-1 中转换，并且在其上调用 Uri.EscapeDataString() 方法，我应该使用“F2”十六进制代码代替“ò”。但我得到 %C3%A0 ，这是 UTF8 编码的十六进制代码。

```
 Encoding iso = Encoding.etEncoding("ISO-8859-1");   

                string StringBody = iso.GetString(iso.GetBytes(Body));

   UrlParameter += "&data=" + Uri.EscapeDataString(StringBody); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:18:48.493

首先，对字符串进行编码并立即对其进行解码，充其量只是一次毫无意义的往返，最坏的情况是会导致数据丢失。

`Uri.EscapeDataString`始终[正确](http://en.wikipedia.org/wiki/Percent-encoding#Current_standard)编码为 UTF-8。任何服务器都应该支持这一点。

您可以尝试[`HttpUtility.UrlEncode`](http://msdn.microsoft.com/en-us/library/h10z5byc.aspx)接受编码参数：

```
Encoding iso = Encoding.getEncoding("ISO-8859-1");  
UrlParameter += "&data=" + HttpUtility.UrlEncode(Body, iso); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T18:03:21.623

我相信文本 API 应该有 Unicode 支持...在您的末尾正确编码文本消息很重要...但是文本消息 API 也应该支持...支持 UNICODE 消息传递的 API 将完成工作...。

这是我在 PHP 中所做的...我不太愿意为其他语言编码，对此感到抱歉

```
if ($cmd['method'] == 'POST') {
$opts['http']['method'] = 'POST';
$opts['http']['header'] .= "\r\nContent-type: application/x-www-form-urlencoded"; 
$opts['http']['content'] = $post_data;
}

$context = stream_context_create($opts); 
```

我使用 了提供 Unicode 支持并允许我发送中文、日文、阿拉伯文和其他语言消息的[创新文本 API 网关。](http://www.innovativetxt.com)

# math - Set of tiles - calculate outline path

> ID：15929251
> 
> 赞同：1
> 
> 时间：2013-04-10T14:51:20.953
> 
> 标签：math, line, tiles-game

**Problem (psuedo)** How to find the outline of a set of tiles? Let's assume we have three tiles, at the x/y coordinates A[20,20], B[20,30] and C[30,30] (this will make a simple L-shape). Those points represent the centers of the tiles. Each tile has 4 vertexes: TL (top left), TR, BL (bottom left) and BR. Together, the 3 tiles have 8 unique (non-overlapping) vertexes.

We want the red line (path), defined by green dots (vertexes): [http://img7.imageshack.us/img7/2469/lshapetiles.png](http://img7.imageshack.us/img7/2469/lshapetiles.png)

**Needed solution** The output of the algorithm should be a path that forms the outline shape of the tiles, consisting out of these vertexes - in this order: A TL, A TR, A BR, C TR, C BR, C BL, B BL, B TL (and optional, A TL again, to close). See the red line.

**Possible solution(s)** One option is to iterate over all the tiles, and for each tile check: + does it have a neighbor above? If not, at TL and TR to path + does it have a neighbor on the right? If not, at TR and BR to path + does it have a neighbor underneath? If not, at BL and BR to path + does it have a neighbor on the left? If not, at TL and BL to path

If you only add the found vertexes to the path if they're not added already yet, you've succesfully collected the unique vertexes for the path. However, they might be in the wrong order. This is a (the) problem.

Does someone know of a good solution (algorithm) for this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:00:11.903

You can try something like this:

You iteratively build a graph representing the tiles, except for a small change -when an edge is doubled, you remove it.

So you add the first tile to the graph G, all its edges will be added. For the next tile, you add all its edges to G, but if any of its edges overlap with an edge in G, you remove that edge from G. You continue this process for all tiles.

At the end, you will only be left with "outside" edges, so you just traverse the path you have left.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:08:39.940

First, build a data structure to represent the tile structure.

Algorithm: 1 find the top-left point. 2 start from this point, iteratively find the next point by using the up, right,down,left order (in the data structure, each point contains these 4 links) 3 stop when go back the initial point.

if the graph contains separated structures, run the above algorithm for each connected component.

# c# - 在弹出窗口中显示表单

> ID：15929253
> 
> 赞同：0
> 
> 时间：2013-04-10T14:51:27.713
> 
> 标签：c#, asp.net-mvc, razor

我有两个 cshtml 页面，一个具有使弹出窗口出现的链接，另一个只有表单数据，并且想知道我如何在使用 MVC 时在弹出窗口上显示表单来创建形式，有链接的plage在`~/views/client/index.cshtml`while thr形式是`~/views/fb/CreateOrEidt.cshtml`colller称为“FB”，调用方法是edit，它带有参数Id

我已经尝试过`@hmtl.renderpartial, @html.renderaction, @hmtl.partial, @html.action,` ，我还在 @ 和结尾之后用 { 绑定了这些方法，不给我错误 bust 仍然不显示信息

我得到的错误是剃刀无法将类型对象转换为 void

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:39:41.223

有点不清楚您要实现的目标，但是根据您在调用 Html.RenderAction 时提到的错误，您需要使用以下方法调用：

```
@{
    Html.RenderAction("ACTIONNAME");
} 
```

对动作视图调用其他方法将不起作用。

如果您尝试在弹出窗口中显示视图，但您要小心不要最终包含布局页面等，因为这可能不是您想要的外观......！

我通常为这样的事情实现的模式是简单地部分出我需要重用的表单位并调用 renderpartial 在我需要的地方显示它。这只会呈现我之后的html，而不是整个视图（+布局）。

# java - 我的 JFrame 出现在基本设计中，而不是 java netbeans 的高级设计中

> ID：15929255
> 
> 赞同：1
> 
> 时间：2013-04-10T14:51:30.277
> 
> 标签：java, swing, netbeans, look-and-feel, nimbus

最近我为登录系统制作了一个桌面应用程序，如果我更改任何代码，我总是运行该程序以确保该代码是否运行良好，无论如何，当我运行该程序时，它总是显示为高级设计，我不知道你怎么称呼它。让图像解释一下。

基本设计

[http://www5.0zz0.com/2013/04/10/14/418370274.jpg](http://www5.0zz0.com/2013/04/10/14/418370274.jpg)

先进的设计

[http://www5.0zz0.com/2013/04/10/14/868362737.jpg](http://www5.0zz0.com/2013/04/10/14/868362737.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:59:39.440

您的基本设计基本上是 Metal Look And Field 而高级设计是 Nimbus Look And Field 所以在创建 JFrame 类的对象之前使用以下代码。

```
try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } 
```

此代码会将任何外观和字段更改为 Nimbus 外观和字段

# c++ - 如果未加入则中断线程

> ID：15929258
> 
> 赞同：3
> 
> 时间：2013-04-10T14:51:40.880
> 
> 标签：c++, multithreading, boost, boost-thread

我正在寻找一种方法（最好使用 boost 线程），如果线程没有加入，则中断它。我启动了多个线程，并希望在 200 毫秒内结束其中的任何一个。我尝试过这样的事情

```
boost::thread_group tgroup;
tgroup.create_thread(boost::bind(&print_f));
tgroup.create_thread(boost::bind(&print_g));
boost::this_thread::sleep(boost::posix_time::milliseconds(200));
tgroup.interrupt_all(); 
```

现在这工作了，所有线程在 200 毫秒后结束；但是，如果它们在 200 毫秒之前完成，我想尝试加入这些线程，如果在一定时间内没有完成，有没有办法加入和中断？

编辑：我需要在超时之前加入的原因：

我正在创建一个速度非常重要的服务器。不幸的是，我必须向其他服务器请求一些信息。所以我想并行进行这些调用，并尽快完成。如果服务器花费的时间太长，我必须忽略来自该服务器的信息，并在没有它的情况下继续。所以我的超时时间是我可以等待的最长时间。当收到所有响应时，能够继续沉思，而不是等待超时计时器，这对我来说是非常有益的。所以我的程序将：

- 获取客户的请求。

-解析信息。

**创建线程**

- 将信息发送到多个其他服务器。

- 从服务器获取信息。

- 将来自服务器的信息放在共享队列中。

**结束线程**

-从共享队列中解析信息。

- 将信息返回给客户

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:56:42.623

如果您使用的是最新的 Boost 和 C++11，请使用`try_join_for()`( [http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html#thread.thread_management.thread.try_join_for](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html#thread.thread_management.thread.try_join_for)）。否则，请使用`timed_join()`（[http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html#thread.thread_management.thread.timed_join](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html#thread.thread_management.thread.timed_join)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T15:25:58.020

您想要使用的可能是一组范围线程，并在超时后对所有剩余线程调用终止。不幸的是，线程组和作用域线程不能一起使用。

线程组类实际上是一个非常简单的容器：如果您还没有指向它的指针，则无法删除它的线程，并且您无法获得指向已由组创建的线程的指针。类 API 也没有提供太多。在您的情况下，这有点妨碍管理。

其余的解决方案依赖于在组外创建线程，并让每个线程在完成之前执行特定任务。它可能：

*   从组中删除自己，
*   然后将自己添加到另一个组

管理线程将不得不调用`join_all`后面的组，并像以前一样处理前者。

```
using namespace boost;
void thread_end(auto &thmap, thread_group& t1, thread_group& t2, auto &task){
    task();
    thread *self = thmap[this_thread::get_id()];
    t1.remove_thread(&self);
    t2.add_thread(&self);
}

 std::map<thread::id, thread *> thmap;
thread_group trunninggroup;
thread_group tfinishedgroup;
thread *th;
th = new thread(
    bind(&thread_end, thmap, trunninggroup, tfinishedgroup, bind(&print_f)));
thmap[th->get_id()] = th;
trunninggroup.add_thread(th);
th = new thread(
    bind(&thread_end, thmap, trunning_group, tfinishedgroup, bind(&print_g)));
thmap[th->get_id()] = th;
trunninggroup.add_thread(th);
boost::this_thread::sleep(boost::posix_time::milliseconds(200));
tfinishedgroup.join_all();
trunninggroup.interrupt_all(); 
```

但是，如果您确实希望在线程实际发生时通知管理线程线程结束（而且我不确定它是否会做任何有用的事情），这并不理想。获得通知的解决方案可能是：

*   如上所述进行组迁移
*   然后触发管理线程正在执行的条件变量`timed_wait`

但是您必须进行一些时间计算以跟踪收到通知后的剩余时间，并在剩下的时间恢复睡眠。这将完全取决于用于该任务的 Duration 类。

## 更新

从大局来看，我会尝试一种完全不同的方法：我不认为终止一个已经完成的线程是一个问题，所以我会将它们全部留在组中，并使用组来创建它们，作为你的代码演示它。

*但是，我会在所有*线程完成后或超时后尝试唤醒管理线程。这`thread_group`仅靠该类提供的内容是不可行的，但可以通过定制的信号量或`boost::barrier`允许定时等待的修补版本来完成。

基本上，您为组中的线程数加一（主线程）设置障碍，并让主线程时间等待它。每个工作线程完成其工作，完成后，将其结果发布到队列和`wait`屏障上。如果所有工作线程都完成了他们的任务，每个人都会等待并触发屏障。

然后主线程（以及所有其他线程，但没关系）唤醒并可以通过终止组并处理结果来继续。否则，它将在超时时被唤醒并做同样的事情。

的补丁`boost::barrier`应该不会太难，你应该只需要复制`wait`方法并将里面的条件变量替换为`wait`a `timed_wait`（我没有看代码，这个假设可能完全有道理）。[否则，我为这个问题](https://stackoverflow.com/questions/15252292/extend-the-life-of-threads-with-synchronization-c11)提供了一个示例信号量实现，也应该不难修补。

最后一点考虑：终止线程通常不是最好的方法。相反，您应该尝试向它们发出中止线程的信号，并等待它们，或者以某种方式让它们将未完成的任务传递给应该连续清理的辅助线程。然后，您的线程组将准备好处理下一个任务，并且您不必一直销毁和创建线程，这是一项代价高昂的操作。它将需要在应用程序的上下文中形式化任务的概念，并使线程在循环上运行以获取新任务并处理它们。

# ruby-on-rails - 如何在 ruby 中获得自己的 TimeZone？

> ID：15929261
> 
> 赞同：0
> 
> 时间：2013-04-10T14:51:51.723
> 
> 标签：ruby-on-rails, ruby

寻找一种方法来获取我自己的时区，我可以在 application.rb 中传递给 config.time_zone 以便在 Rails 中设置它。背景：我允许用户在 yaml 配置中指定他们的时区，但如果没有设置，我想明确使用框的时区。我*必须*设置一个值，因为我将它用作转换时区以供显示的参考——每个登录到 Rails 应用程序的用户都可以设置他们的个人时区，我将为他们进行转换。

但是，在 Ruby 或 Rails 中似乎没有很好的 API 来执行此操作。Time.now.zone 返回 3 个字母的代码（例如 EDT 或 CDT），但您不能传递它，因为它不够具体—— TZInfo 类将只接受“长”描述。

这就是我现在正在做的事情，这看起来很hacky：

```
time_zone = CONFIG[:time_zone] # set your local time zone here. use rake time:zones:local to choose a value, or use UTC.

unless time_zone
  # try to detect one

  if File.exists?('/etc/localtime')
    path = File.readlink('/etc/localtime')
    items = path.split("zoneinfo/")
    if items.length == 2
      time_zone = items[1]
    end
  end

  unless time_zone
    puts "*** Warning:  no time zone is set in config/config.yaml and could not detect system time. Using UTC as the default time; behavior may be unexpected."
    time_zone = "UTC"
  end
end

config.time_zone = time_zone 
```

有更好的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:53:32.850

为什么这不起作用的任何原因？：

`Time.now.zone`

编辑：

在获得区域之前，您可以`Time.now.gmt_offset`在几秒钟内获得您的 GMT 偏移量。之后，您可以`Time.now.zone`获取您的区号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T15:20:12.010

您可以尝试以下方法：

```
off_set = Time.now.gmt_offset
p ActiveSupport::TimeZone[off_set].name # "Atlantic Time (Canada)" 
```

或者

```
p ActiveSupport::TimeZone[off_set].tzinfo.name # "America/Halifax" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-03T16:25:12.490

由于 3 字母代码不够精确，请让用户从[IANA 时区数据库](https://en.wikipedia.org/w/index.php?title=IANA_time_zone_database&redirect=no)中指定全名。

然后你可以使用`Time.zone = 'America/Halifax'`（例如）。
`Time.zone.name`返回 IANA 名称，并`Time.zone.now`返回指定时区的当前时间。

要以编程方式查找此格式的时区，您可以使用`/etc/timezone`它（如果可用）。其他系统有其他方法（如果有的话）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-28T02:00:14.010

如果您想要以小时为单位的时区偏移量，就像某些数据库（如 Postgres）那样，您可以使用以下方法：

```
2.3.1 :063 > Time.zone.formatted_offset
"-07:00" 
```

或者如果您需要以秒为单位的偏移量，则使用这种方法：

```
2.3.1 :059 > Time.zone.utc_offset
-25200 
```

# mysql - Rspec：Carrierwave 不会从规范/夹具中保存文件

> ID：15929262
> 
> 赞同：0
> 
> 时间：2013-04-10T14:51:54.020
> 
> 标签：mysql, ruby-on-rails, rspec, carrierwave

我有我的`Report`模型：

```
class Report < ActiveRecord::Base
  belongs_to :user

  attr_accessible :ready_status, :document

  mount_uploader :document, DocumentUploader

  def attach( report_file )
    self.update_attributes( :document => File.open( report_file ), :ready_status => true )
  end
end 
```

这个模型有`attach`方法，我用它来保存文档和其他参数。现在我想测试这个功能是否有效。

**/spec/models/report_spec.rb**

```
# encoding: utf-8
require 'spec_helper'

describe Report do
  before(:each) do
    @user = User.make!
  end

  ...

  context "File's saving" do
    before(:each) do
      @report = @user.reports.create
      @csv_report_file = "#{Rails.root}/spec/files/report.csv"
    end

    it "CSV should be saved" do
      csv_report_filename = @csv_report_file.split("/").last

      @report.attach @csv_report_file
      @report.reload

      @report.document.file.filename.should == csv_report_filename
    end
  end
end 
```

当我尝试从中保存文件时，`/spec/files`出现这样的错误：

```
Report File's saving CSV should be saved
     Failure/Error: @report.document.file.filename.should == csv_report_filename
     NoMethodError:
       undefined method `filename' for nil:NilClass 
```

但是当我从另一个文件夹（例如`"#{Rails.root}/samples/my-report.csv"`）尝试另一个文件时，我的测试通过了。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:18:31.543

哦，我找到了答案。Carrierwave 不保存空文件，我有一个。当我在文件（`/spec/files/report.csv`）中添加一些数据时，我的问题已经消失了。

# servlets - 在 JBOSS 5.1 中部署 WAR 时出错

> ID：15929265
> 
> 赞同：0
> 
> 时间：2013-04-10T14:52:07.427
> 
> 标签：servlets, deployment, jboss, war

我不明白为什么在部署我的 web 应用程序时出现错误。第一次部署工作，但从第二次我得到这个错误：

> 部署出错：部署“vfszip:/C:/jboss/deploy/TestServlet.war/”由于以下原因而出错：org. jboss.deployers.spi.DeploymentException：部署 URL 文件的 Web 映射已存在：/C:/jboss/tmp/a6q5r3z-z5l3qt-hfcant4w-1-hfclha33-ta/TestServlet.war/

我在网上阅读了几个线程，我必须将 jboss-web.xml 文件添加到 WEB-INF 文件夹中。所以我添加了以下内容，但我仍然得到同样的错误：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE jboss-web PUBLIC
   "-//JBoss//DTD Web Application 5.0//EN"
   "http://www.jboss.org/j2ee/dtd/jboss-web_5_0.dtd">
<jboss-web>
  <context-root>/TestServlet</context-root>
</jboss-web> 
```

AS 是 JBOSS 5.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T03:27:12.080

更改`<context-root>/TestServlet</context-root>`为`<context-root>TestServlet</context-root>`。'/' 在这里不是必需的。请尝试一下。还有一件事，你在 Jboss 中有 ROOT.war

# sql - SQL 比较和空值的问题

> ID：15929269
> 
> 赞同：19
> 
> 时间：2013-04-10T14:52:12.270
> 
> 标签：sql, sql-server-2008

我有一个更新查询，当值与另一个表中的字段不匹配时，它会更新一个表中的字段。

```
UPDATE  table1
SET     a.field1 = b.field3
FROM    table1 a ,
        table2 b
WHERE   a.field2 = b.field2
        AND a.field1 <> b.field3 
```

我遇到的问题是，当 a.field1 为 null 且 b.field3 为值或 a.field1 为值且 b.field3 为 null 时，它不会启动。

我通过添加以下内容解决了这个问题......

```
UPDATE  table1
SET     a.field1 = b.field3
FROM    table1 a ,
        table2 b
WHERE   a.field2 = b.field2
        AND ( a.field1 <> b.field3
              OR (a.field1 IS NOT NULL
              AND b.field3 IS NULL)
              OR (a.field1 IS NULL
              AND b.field3 IS NOT NULL)
            ) 
```

我的问题更集中在为什么会发生这种情况以及如何最好地构建查询以防止这种情况发生？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T15:00:53.537

问题在于 NULL 比较。如果 a.field1 或 b.field3 为 NULL，则需要使用 IS NULL 或 IS NOT NULL 语句。您可以使用 ISNULL 函数为 a.field1 和 b.field3 使用默认值。

```
ISNULL(a.field1,0) <> ISNULL(b.field3,0) 
```

在这种情况下，与值 0 进行比较。

```
SELECT IIF(NULL=NULL,'true','false')  -- The result is false.  Amazing! 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-10T15:07:30.507

将任何东西与 NULL 进行比较的结果，甚至它本身，总是 NULL（不是 TRUE 或 FALSE）。将选项与 EXISTS 和 EXCEPT 运算符一起使用。

```
UPDATE table1
SET a.field1 = b.field3
FROM table1 a JOIN table2 b ON a.field2 = b.field2
WHERE EXISTS (
              SELECT a.field1
              EXCEPT
              SELECT b.field3
              ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T14:58:41.950

除了正确处理 NULL 逻辑之外，您还需要**将要一起应用的多个条件括在括号中**。

像这样的东西（不确定我是否完全理解你的情况）。

```
UPDATE  table1
SET     a.field1 = b.field3
FROM    table1 a ,
        table2 b
WHERE   a.field2 = b.field2
        AND (
              ( a.field1 <> b.field3)
              OR (a.field1 IS NOT NULL AND b.field3 IS NULL)
              OR (a.field1 IS NULL AND b.field3 IS NOT NULL)
            ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T15:00:30.790

Tim Shmelter 在他的评论中是对的，`NULL`不等于任何东西——甚至包括`NULL`。`NULL`字面意思是值未知。

这意味着，即使`a.field1`and `b.field3`both are `NULL`，条件`a.field1 <> b.field3`以及`a.field1 = b.field3`both 也将始终返回 false。试试看，你会看到！

我认为这里的解决方案并不在于`IFNULL`SQL Server 的功能。它更多地在于您的加入逻辑。您已经有了解决方案，即问题中的第二个查询。我建议你多玩一点`NULL`价值观，这样你就可以理解它们的真正含义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-16T14:20:33.333

您可以`coalesce`在 SQL Server 中使用将列的值默认为非空值。`Coalesce`返回列表中的第一个非空值。

```
UPDATE  table1
SET     a.field1 = b.field3
FROM    table1 a ,
        table2 b
WHERE   a.field2 = b.field2
        AND (
           coalesce(a.field1,-1) <> coalesce(b.field3, -1)
        ) 
```

我假设您的类型是数字，尽管您可以使用其他数据类型。我还假设如果两个值都是 NULL，那么这两行是等价的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T15:04:20.367

当您在查询中编写时，您`a.field1 = b.field3`实际上做了两个假设：表 a 中的 field1 必须包含一个值，而 b 表中的 field3 也必须包含一个值。无法将“缺失信息和不适用信息”与某个值进行比较。这种比较的结果是未知的。[您可以在Wikipedia](https://en.wikipedia.org/wiki/Null_%28SQL%29#Null-specific_and_3VL-specific_comparison_predicates)上查看更多信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-01T23:00:24.833

这将检查 Column1 和 Column2 是否相等，另外使用转换为 VARBINARY 来比较区分大小写，如果不需要，您可以将其删除。

```
--c1 = Length of Column1
--c2 = Length of Column2

ISNULL(NULLIF(CONVERT(VARBINARY(cl), LTRIM(RTRIM(Column1))), CONVERT(VARBINARY(c2),LTRIM(RTRIM(Column2)))), NULLIF(CONVERT(VARBINARY(c2),LTRIM(RTRIM(Column2))), CONVERT(VARBINARY(c1),LTRIM(RTRIM(Column1))))) IS NULL 
```

您可以将表达式的结尾更改`IS NOT NULL`为检查不相等的条件。

希望这有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-03-17T18:56:23.857

另一种方法是使用[CHECKSUM](https://msdn.microsoft.com/en-us/library/ms189788.aspx)函数

```
create table #temp
  (
    val1 varchar(255),
    val2 varchar(255)
  )

  insert into #temp values(NULL, NULL) 
  insert into #temp values(NULL, 'B') 
  insert into #temp values('A', NULL) 
  insert into #temp values('A', 'B') 
  insert into #temp values('A', 'A') 

  select *, 
  'Are Not Equal' = case 
   when val1 <> val2 or checksum(val1) <> checksum(val2) then 'true' 
   else 'false' end 
  from #temp 
```

# r - 创建带有误差线的条形图

> ID：15929280
> 
> 赞同：0
> 
> 时间：2013-04-10T14:52:31.790
> 
> 标签：r, diagram

我是 R 新手，需要画一个错误栏。原始数据如下所示：

```
ID    Day    pH
1      1      7
1      1      7.2
1      1      7.1
2      1      7.3
2      1      7.4
2      1      7.2
3      1      7
3      1      7.1
3      1      7.5
4      1      7.3
4      1      7.2
4      1      7.6
1      2      7
1      2      7.2
1      2      7.1
2      2      7.1
2      2      7.4
2      2      7.2
3      2      7.5
3      2      7.1
3      2      7.5
4      2      7.2
4      2      7.2
4      2      7.3
1      3      7.4
1      3      7.2
1      3      7.1
2      3      7.2
2      3      7.4
2      3      7.2
3      3      7.4
3      3      7.2
3      3      7.5
4      3      7.4
4      3      7.2
4      3      7.7 
```

我想创建一个带有误差条的条形图，在 y 轴上显示平均 pH 值，在 x 轴上显示 ID，不同颜色条中的天数和标准偏差作为误差条。

# c# - 如何通过函数调用设置 XAML 属性？

> ID：15929287
> 
> 赞同：0
> 
> 时间：2013-04-10T14:52:46.077
> 
> 标签：c#, wpf, xaml, windows-runtime, winrt-xaml

我有一个带有矩形、椭圆、两个滑块和一个文本块的简单页面。

两个滑块控制（通过绑定）矩形的高度和宽度。

我想根据矩形尺寸的最小值设置椭圆的宽度和高度。XAML 代码如下所示：

```
<UserControl
x:Class="App16.MyUserControl1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:App16"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="400"
d:DesignWidth="400"
x:Name="MyRoot">   

<Grid Background="Black">

    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>

    <Grid.RowDefinitions>
        <RowDefinition Height="2*" />
        <RowDefinition />
    </Grid.RowDefinitions>

    <Rectangle Name="rect" Fill="Yellow" 
               Width="{Binding ElementName=rectX,Path=Value}" 
               Height="{Binding ElementName=rectY,Path=Value}" Grid.Column="0"/>

    <Ellipse Fill="Yellow" 
             Width="{Binding ElementName=MyRoot,Path=SampleFunction}" 
             Height="{Binding ElementName=MyRoot,Path=SampleFunction}" Grid.Column="1" />

    <StackPanel Grid.Row="1" Grid.ColumnSpan="2">                       
        <Slider Name="rectX" HorizontalAlignment="Stretch" Minimum="100" Maximum="200" Value="150" />
        <Slider Name="rectY" HorizontalAlignment="Stretch" Minimum="100" Maximum="200" Value="150" />
        <TextBlock Foreground="White" Text="{Binding ElementName=MyRoot, Path=SampleFunction}" />
    </StackPanel>

</Grid> 
```

后面的代码如下所示：

```
public Double SampleFunction {             
        get { return (rect.Width <= rect.Height ? rect.Width : rect.Height); }
    } 
```

在当前状态下，矩形会根据滑块中的值正确调整大小，但在加载页面后永远不会调用“SampleFunction”。

当然，我可以通过“调整大小”事件来做到这一点，但我想知道如果不这样做是否可行。

有什么建议么？当用户调整滑块控件时，我希望看到矩形和椭圆改变大小。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:55:26.167

您`SampleFunction`需要重命名（它是一个属性，而不是一个函数）。

并使其适用于 DataBinding 它需要实现`INotifyPropertyChanged`

另外，内部逻辑应该是基于`ActualWidth`and `ActualHeight`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:14:19.157

Henk 对我的评论的建议可以使它起作用，但实际上对于您的情况，您可以完全删除绑定并简单地设置

```
<Ellipse
    Fill="Yellow"
    VerticalAlignment="Stretch"
    HorizontalAlignment="Stretch"
    Stretch="Uniform" /> 
```

# java - 针对生成的 pojo 实施策略模式

> ID：15929288
> 
> 赞同：0
> 
> 时间：2013-04-10T14:52:47.083
> 
> 标签：java, hibernate, validation, strategy-pattern

我正在为几个不同的数据库表编写解析器。我们在 Eclipse 中使用 Hibernate，并且我们制作`hbm.xml`了与我们的表相对应的映射文件，以便我们的 .java 文件根据表生成。

我们添加了一个名为 Gamer 的新表，其中包含常用的用户内容（地址名称电话号码等）。它与已建立的 Customer 表无关（还包含地址名称 phone# 等），但在验证步骤中有很多共享行为。

我认为这对于应用策略设计模式来说已经成熟了，问题是 Customer POJO 和 Gamer POJO 没有从任何东西继承，并且它们是从独立的不相关表中定义的。

我对设计模式很陌生，我很担心我可能是个十足的笨蛋，所以任何关于我如何前进和分享验证逻辑的建议，而不必求助于 CustomerAddressValidator 和 GamerAddressValidator 类完全相同的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:07:20.107

首先，您必须区分 Gamer 是 Customer，还是 Gamer 和 Customer 都是 Person。

在这两种情况下，您都会有一些基类和扩展类。在 Hibernate（和 JPA）中，有三种处理继承的方法：单表、联接和每类表。这三种方法各有利弊，因此您必须根据您的具体领域问题选择一种。有关 ineritance 的更多信息，您可以[在此处（JPA）](http://ci.apache.org/projects/openjpa/1.2.x/manual/jpa_overview_mapping_inher.html)和[此处（Hibernate）](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html)阅读。

之后，您将能够为基类编写单个验证器（如果验证所需的所有值都放在基类中）并为基类和扩展类调用该验证器。

从您的回答中我可以看出您需要地址验证器，所以您必须将地址放在基类中。希望这有帮助。

# python - 为什么 sympy 会覆盖 `__new__` 而不是 `__init__`？

> ID：15929292
> 
> 赞同：6
> 
> 时间：2013-04-10T14:52:56.807
> 
> 标签：python

中的每个对象[`sympy`](http://sympy.org/en/index.html)都是[Basic](https://github.com/sympy/sympy/blob/master/sympy/core/basic.py)类的子类，它们都使用`__new__`without `__init__`，而且大多数情况下是这样的

```
def __new__(cls, some, parameter, **others):
    obj = parentclass.__new__(cls, **others)
    obj.some = some
    obj.parameter = parameter
    return obj 
```

`__init__`使用like有什么区别

```
def __init__(self, some, parameter, **others):
    parentclass.__init__(self, **others)  # or super().__init__(...)
    self.some = some
    self.parameter = parameter 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:52:55.550

看看[数字](https://github.com/sympy/sympy/blob/master/sympy/core/numbers.py#L210) 。他们希望对象的类是灵活的。`Number(...) => Int/Float/...`这是无法实现的`__init__`。

此外，`__init__`将获得的参数，`__new__`但您不需要原始参数，请参阅[matexpr.py](https://github.com/sympy/sympy/blob/master/sympy/matrices/expressions/matexpr.py#L299)或者您需要它们适应`__new__`已经做过的事情（例如[for`__reduce__`](https://github.com/sympy/sympy/blob/master/sympy/core/basic.py#L93)）。

大多数对象定义自己的`__slots__`，因此可以分配给它们的固定属性。分配可以在`__new__`和中完成`__init__`。我认为不需要打开一个新`__init__`的来设置它们并且不执行其他操作 - 正如 Martijn Pieters 和 user4815162342 [[来源]](http://www.python.org/download/releases/2.2/descrintro/#__new__)指出的对象是不可变的。

如果您更改类，有时`__init__`会调用不，一次或两次：

```
class X(object):
    def __new__(self): # sorry but self is the class I apologize!
        obj = object.__new__(Y)
        return obj
    def __init__(self):
        print 1

>>> class Y(object):
    def __init__(self):
        print 2
>>> X() # no __init__ call, limiting you to stay in the class hierarchy
<__main__.Y object at 0x7f287e769350>
>>> class Y(X):
    def __init__(self):
        print 2

>>> X() # one __init__ call
2
<__main__.Y object at 0x7f287e7693d0>
>>> class X(object):
    def __new__(self):
        obj = Y()
        return obj
    def __init__(self):
        print 1

>>> class Y(X):
    def __new__(self):
        return object.__new__(self)
    def __init__(self):
        print 2

>>> X() # __init__ called twice, structure copied from number.py
2
2
<__main__.Y object at 0x7f287e7692d0> 
```

如果我错了，请纠正我。我不认为这个答案是完整的，但这些是我发现值得激励不要使用的复杂性，`__init__`除了 Martijn Pieters 和 user4815162342 提到的对象应该是不可变的[[来源]](http://www.python.org/download/releases/2.2/descrintro/#__new__)

等待 2 票否决以删除答案。

# android - 服务处于活动状态时显示进度条

> ID：15929293
> 
> 赞同：0
> 
> 时间：2013-04-10T14:52:58.883
> 
> 标签：android, service, android-progressbar

我有一项服务，它从广播开始，将运行并导入 vcards 。如果用户打开具有此服务的应用程序时服务仍在运行，我想显示一个进度条。并在服务停止后关闭进度条。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:58:31.023

您可以创建一个 AsyncTask 来检查服务是否正在运行。在 AsyncTask 中，如果服务未运行，您可以在 onPreExecute 中打开进度条。在 doInBackground 中定期检查服务是否正在运行，只有在发现服务不再运行时才返回。然后在 onPostExecute 中，可以关闭进度条。

# php - html 列表框并提交到 php 页面

> ID：15929301
> 
> 赞同：0
> 
> 时间：2013-04-10T14:53:13.480
> 
> 标签：php, html, html-lists, html-select

我创建一个这样的列表

```
<select multiple="multiple" style="width: 120px;" id="list" name="keywordlist" size="0">                
</select> 
```

我通过 jquery 将项目添加到此项目中，并且一切正常，直到我将其提交到服务器（PHP） post 变量仅包含我最后一次`<option></option>`单击的我想从服务器端获取所有列表。

这是jquery：

```
 $("#list").append("<option value='"+$("#keyword").val()+"' selected='true'>"+$("#keyword").val()+"</option>");
                var i= $("#list").attr("size");
                i=parseInt(i);
                i++;
                $("#list").attr("size",i); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:55:09.670

使用选择名称`keywordlist[]`而不是`keywordlist`

# jquery - 来自 jquery datepicker 的属性

> ID：15929305
> 
> 赞同：0
> 
> 时间：2013-04-10T14:53:23.587
> 
> 标签：jquery, properties, jquery-ui-datepicker

也许我的问题很简单，但没有找到答案。
如何从日期选择器获取属性？
示例：在很多地方我设置`minDate`了 datePicker 字段，但我不知道现在设置了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:55:52.053

根据[手册](http://api.jqueryui.com/datepicker/#method-option)，要获取 的当前设置值`minDate`，您可以使用：

```
var minDate = $('#yourdatepickerid').datepicker('option', 'minDate'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:57:58.280

请参阅他们描述使用 minDate [http://jqueryui.com/datepicker/#date-range的文档](http://jqueryui.com/datepicker/#date-range)

# java - Java 反射 ~ 设置原始类型的内部对象值

> ID：15929308
> 
> 赞同：2
> 
> 时间：2013-04-10T14:53:34.997
> 
> 标签：java, reflection, integer, primitive

我有一个类型为 int、short、byte 或 long 的对象，我需要给它一个新值。这在 Java 中可能吗？如果是的话怎么办？

```
public static void set(Object obj, int value) throws Exception
{
    Class<?> c = obj.getClass();
    if (c.equals(Integer.class))
    {
        // ???
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:57:38.433

整数是不可变的。您不能为`Integer`实例设置值。

同样，原始类型的其他包装类也是不可变的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:59:23.547

是的，只要您知道要处理的原始类型。

```
Class clazz = Class.forName("TheClass");
Field f = clazz.getDeclaredField("ThePrimitiveField");
Object obj;
f.setBoolean(obj, true); 
```

这将改变 obj 的“ThePrimitiveField”字段。如果你不知道类型...

```
Field f;
Object obj;
try {
    f.setBoolean(obj, true);
} catch (IllegalArgumentException ex) {
    try {
        f.setByte(obj, 16);
    } catch (IllegalArgumentException ex) {
        try {
            f.setChar(obj, 'a');
            // etc
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:00:07.900

如果您知道类型，请执行以下操作：

```
public class Main 
{
    public static void main(String[] args) 
        throws NoSuchFieldException, 
               IllegalArgumentException, 
               IllegalAccessException 
    {
        Foo            fooA;
        Foo            fooB;
        final Class<?> clazz;
        final Field    field;

        fooA = new Foo();
        fooB = new Foo();
        clazz = fooA.getClass();
        field = clazz.getDeclaredField("bar");

        System.out.println(fooA.getBar());
        System.out.println(fooB.getBar());
        field.setAccessible(true);  // have to do this since bar is private
        field.set(fooA, 42);
        System.out.println(fooA.getBar());
        System.out.println(fooB.getBar());
    }
}

class Foo
{
    private int bar;

    public int getBar()
    {
        return (bar);
    }
} 
```

如果您不知道类型，您可以执行以下操作：

```
public class Main 
{
    public static void main(String[] args) 
        throws NoSuchFieldException, 
               IllegalArgumentException, 
               IllegalAccessException 
    {
        Foo            fooA;
        Foo            fooB;
        final Class<?> clazz;
        final Class<?> type;
        final Field    field;

        fooA = new Foo();
        fooB = new Foo();
        clazz = fooA.getClass();
        field = clazz.getDeclaredField("bar");

        System.out.println(fooA.getBar());
        System.out.println(fooB.getBar());
        field.setAccessible(true);  // have to do this since bar is private        
        type = field.getType();

        if(type.equals(int.class))
        {
            field.set(fooA, 42);
        }
        else if(type.equals(byte.class))
        {
            field.set(fooA, (byte)1);
        }
        else if(type.equals(char.class))
        {
            field.set(fooA, 'A');
        }

        System.out.println(fooA.getBar());
        System.out.println(fooB.getBar());
    }
}

class Foo
{
    private char bar;

    public char getBar()
    {
        return (bar);
    }
} 
```

而且，如果您想使用包装类（整数、字符等），您可以添加以下内容：

```
else if(type.equals(Integer.class))
{
    field.set(fooA, new Integer(43));
} 
```

# makefile - mingw32-make 尝试创建子文件夹 .lib 一个非法名称

> ID：15929310
> 
> 赞同：0
> 
> 时间：2013-04-10T14:53:39.983
> 
> 标签：makefile, mingw, autotools

我正在尝试编译一个需要 freetype 库的项目，所以我正在研究如何将 freetype 安装到 mingw32，更安全的方法是编译它。

无论如何，问题是编译 freetype-2.4.11 我进入了 msys 中提供的 bash 我`./configure`在 freetype 的主目录中做了，接下来一切看起来都很好`mingw32-make`，这造成了问题

```
libtool: compile:  gcc -pedantic -ansi -Ig:/Downloads/freetype-2.4.11/objs -I./b
uilds/unix -Ig:/Downloads/freetype-2.4.11/include -c -Wall -g -O2 "-DFT_CONFIG_C
ONFIG_H=<ftconfig.h>" -DFT2_BUILD_LIBRARY "-DFT_CONFIG_MODULES_H=<ftmodule.h>" g
:/Downloads/freetype-2.4.11/src/base/ftsystem.c  -DDLL_EXPORT -DPIC -o g:/Downlo
ads/freetype-2.4.11/objs/.libs/ftsystem.o
Assembler messages:
Fatal error: can't create g:/Downloads/freetype-2.4.11/objs/.libs/ftsystem.o: No
such file or directory
g:/Downloads/freetype-2.4.11/builds/freetype.mk:198: recipe for target 'g:/Downl
oads/freetype-2.4.11/objs/ftsystem.lo' failed
mingw32-make[4]: *** [g:/Downloads/freetype-2.4.11/objs/ftsystem.lo] Error 1 
```

`g:/Downloads/freetype-2.4.11/objs/.libs/ftsystem.o`似乎它正在尝试使用 Windows 中非法的目录。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:23:45.827

尝试`make`改用（即来自 MSYS 发行版的那个），并避免`mingw32-make`将来使用（来自 MinGW 发行版）以节省您的时间和精力。摘自 MinGW Wiki：

> **make 和 mingw32-make 有什么区别？**
> 
> make 的“本机”（即：依赖于 MSVCRT）端口缺少某些功能，并且由于 Win32 上缺少 POSIX 而修改了功能。MSYS 发行版中还存在一个依赖于 MSYS 运行时的 make 版本。该端口的操作更多地与 make 的预期操作相同，并且在执行期间减少了令人头疼的问题。基于此，MinGW 开发人员/维护人员/打包人员决定最好重命名本机版本，以便“本机”版本和 MSYS 版本可以同时存在而不会发生文件名冲突。

# apache - 确保我的重写规则是 301 重定向

> ID：15929314
> 
> 赞同：0
> 
> 时间：2013-04-10T14:53:50.687
> 
> 标签：apache, mod-rewrite, seo

我有以下将 krmmalik.com 指向 krmmalik.com/me 的重写规则我如何确保此规则是 301 重定向，如果它还不是一个，我该如何将它变成一个？

我试过使用这个网站的混合和匹配技巧

[http://www.webweaver.nu/html-tips/web-redirection.shtml](http://www.webweaver.nu/html-tips/web-redirection.shtml)

以及 Google 的支持文章和现有的 SO 问题，但运气不佳。请注意，到目前为止，重写规则本身运行良好。

我还在我的 DNS 文件中将“www”的 CNAME 添加到“krmmalik.com”。这是否足够好，或者我是否还需要为此添加特定的 301 重定向？

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?krmmalik.com$
RewriteRule ^(/)?$ me [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:58:28.787

尝试以下操作：

```
RewriteRule ^/?$ /me [L,R=permanent] 
```

该`R=permanent`标志指示 301 状态重定向（如果您愿意，可以使用`R=301`，但我认为“永久”更具可读性）。

在目标 URL 的开头放置一个正斜杠`/me`将告诉 Apache 将用户重定向到 Web 服务器公共根目录中名为“me”的目录。因此，在您的情况下，它应该将用户重定向到 krmmalik.com/me（或 www.krmmalik.com/me）。

此外，您不需要将匹配模式括在括号中，因为您不需要捕获斜线以供以后使用。所以`^/?$`会做得很好。

# jquery - 从 jQuery 对话框中的部分视图创建表单，使用 AJAX 验证输入

> ID：15929316
> 
> 赞同：0
> 
> 时间：2013-04-10T14:53:57.340
> 
> 标签：jquery, ajax, asp.net-mvc, partial-views

我已经阅读了一些有关如何执行此操作的帖子，但无法将它们全部放在一起。

我有我的模型：

```
 public class Period
   {
       [Required]
       [DataType(DataType.DateTime)]
       [Display(Name = "Start")]
       public DateTime Start { get; set; }

       [Required]
       [DataType(DataType.DateTime)]
       [Display(Name = "End")]       
       public DateTime End { get; set; }

   } 
```

我的控制器

```
 public ActionResult Test()
    {

        return PartialView();
    }
    [HttpPost]
    public ActionResult Test(Period model)
    {
        if(model.IsValid){
           return RedirectToAction("Report", model)
        }
        return PartialView(model);
    } 
```

和局部视图

```
 @model Period

<a onclick="openRequestOrderReportForm()" class="" role="button" aria-disabled="false">Report</a>

<div id="dRequestOrderReport">

@using (Ajax.BeginForm("Test", "Reports", null, new AjaxOptions { UpdateTargetId = "dRequestOrderReport" }, new { id = "RequestOrderReportForm" }))
{
    @Html.EditorFor(m => Model)
}
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $("#dRequestOrderReport").dialog({
            modal: true,
            autoOpen: false,
            title:'title',
            buttons: {
                "Go": function () {
                    $("#RequestOrderReportForm").submit();
                },
                Cancel: function () {
                    $(this).dialog("close");
                }
            }
        });
    });
    function openRequestOrderReportForm()
    {
        $("#dRequestOrderReport").dialog("open");
    }
</script> 
```

我需要能够验证输入 - 如果它无效，那么表单必须保持打开状态，如果它是有效的，整个页面必须进行其他操作。

最接近我想要的是[jQuery Modal Dialogs 和 MVC3 Partial Views](https://stackoverflow.com/questions/9911312/jquery-modal-dialogs-and-mvc3-partial-views)，但我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:10:39.823

此处描述的最终工作解决方案：

[http://www.mayanksrivastava.com/2012/02/showing-aspnet-mvc-30-views-and-posting.html](http://www.mayanksrivastava.com/2012/02/showing-aspnet-mvc-30-views-and-posting.html)

# php - 使用 curl 的 POST mime 类型

> ID：15929325
> 
> 赞同：0
> 
> 时间：2013-04-10T14:54:09.467
> 
> 标签：php, post, curl, types, mime

所以我正在尝试使用一个名为[Sky Biometry](https://www.skybiometry.com)的 api ，用于面部检测和面部识别。该 api 接受 url 或 post 作为 MIME 类型。在这种情况下，我想直接将图片发布到 api，这是文档中的内容：

“注意：如果您想发布图像而不是指定 url，则对方法的请求必须形成为使用 POST 数据发送的 MIME 多部分消息。每个参数都应指定为单独的表单数据块。”

我已经尝试四处寻找示例，但还没有找到任何示例，如果有人可以帮助新手，将不胜感激。

[天空生物测量文档](https://www.skybiometry.com/Documentation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:59:51.610

这是使用 curl 发布值的示例结构，

```
$value1 = 'DATA 1;
$value2 = 'DATA 2';
$url = 'http://www.skybiometry.com/file/api/facedetection/example';
$fields = array(
                        'mimetype' => urlencode($value1),
                        'mimetype2' => urlencode($value2)
                );

//url-ify the data for the POST
$fields_string = '';
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:57:24.053

多部分消息实际上是标准的 POST enctype="multipart/form-data" 请求。您可以使用简单的表单非常简单地生成它们，或者您可以使用 cURL（我怀疑您已经这样做了），如下所示：

```
curl_setopt($channel, CURLOPT_POSTFIELDS, array("myfile" => "@/path/to/my/image.png")); 
```

cURL 将自动完成其余的工作（转换您的内容类型并对其进行 mime-type ）。

# c++ - 模板类型的格式说明符

> ID：15929326
> 
> 赞同：1
> 
> 时间：2013-04-10T14:54:09.980
> 
> 标签：c++, templates, format-specifiers

我有一个以整数类型为模板的 C++ 类，例如，

```
template<typename int_type> 
```

假设在那个类的某个地方，我想用来`sscanf`从文件中读取一些值，例如，

```
int_type num_rows;
fgets( buffer, BUFSIZE, in_file );
sscanf( buffer, "%d", &num_rows); 
```

格式说明符仅在`int_type`是内在的 时才能正常工作`int`。

有没有更好的方法来处理 general 的格式说明符`int_type`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T14:56:31.180

而不是使用`sscanf()`and 格式说明符使用[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)with [`operator>>()`](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt)：

```
if (fgets( buffer, BUFSIZE, in_file ))
{
    std::istringstream in(buffer);
    if (!(in >> num_rows))
    {
        // Handle failure.
    }
} 
```

替换（未显示）`FILE*`并用 a[`std::ifstream`](http://en.cppreference.com/w/cpp/io/basic_ifstream)可以删除`std::istringstream`并直接从 the 中读取`std::ifstream`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T15:28:18.697

您可以`fmt`在您的类中声明并在实现中为每种类型提供显式值：

```
// foo.hpp
template< typename T >
class foo
{
private:
    static const char* fmt;

public:
    void print() const
    {
        T num_rows;
        fgets( buffer, BUFSIZE, in_file );
        sscanf( buffer, fmt, &num_rows);
    }
}; 
```

和

```
// foo.cpp
template<> const char* foo< int >::fmt = "%d";
template<> const char* foo< long >::fmt = "%ld"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:57:32.603

您可以创建模板助手类：

```
template<class int_type>
struct fmt_helper_f{};

template<>
struct fmt_helper_f<int>
{
  static const char * fmt() {return "%d";}
};

template<>
struct fmt_helper_f<float>
{
  static const char * fmt() {return "%f";}
}; 
```

实际上，您可能希望使用流进行输入和输出

# ruby-on-rails - 如何覆盖 Devise Remeberable 的行为

> ID：15929335
> 
> 赞同：0
> 
> 时间：2013-04-10T14:54:48.917
> 
> 标签：ruby-on-rails, authentication, devise

我对 Rails 很陌生，我们有使用 Devise 身份验证的应用程序，我们使用可记忆的功能，我们希望将其从“保持登录”的行为覆盖到“在输入字段内的登录页面上保存用户凭据”的行为“所以有人知道如何实现这种行为吗？任何想法都将受到高度赞赏。

# python - 任何用于集合/字典的查询缓存类型功能的库？

> ID：15929336
> 
> 赞同：2
> 
> 时间：2013-04-10T14:54:49.853
> 
> 标签：python, data-structures, set

对于我目前正在从事的一个项目，我注意到我正在做的许多集合查找都是聚集的，所以即使我的集合包含 100k+ 元素，查找也是高度可预测的，所以如果我现在查找 X，我的下一个查找将是 X，概率为 90% 以上。似乎我可以通过在我的集合顶部添加一个薄缓存来提高查找速度，该缓存可以记住最近 10 个查找的项目。在我自己实现这样的事情之前，是否有任何现有的库可以做到这一点？有什么建议吗？

# asp.net-mvc - 从正在运行的代码中删除断点？

> ID：15929354
> 
> 赞同：0
> 
> 时间：2013-04-10T14:55:38.803
> 
> 标签：asp.net-mvc, visual-studio-2010

当我测试我的代码并设置断点时，它会在遇到它时停止。

然后我可以取消单击断点并继续测试我的代码的不同区域。除了（尽管未单击）断点仍被存储，并且每次通过此代码时都会在同一点停止。

停止代码并删除断点有效 - 有没有更简单的方法可以在不停止调试的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:14:32.333

我认为您确实删除了运行时的断点。因此，如果您在运行时删除断点。它不会保存。所以它会再次击中同一个地方。

请在正常模式下删除断点（调试前）。

让我知道它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:56:55.157

您可以从调试菜单中禁用或删除所有断点。如您所见，要删除所有断点，您需要按**ctrl+shift+F9**

![在此处输入图像描述](https://i.stack.imgur.com/ZZ3Cs.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:57:49.400

Ctrl + Shift + F9 将从您的项目中删除所有断点。我用它来有效地清除所有断点。

如果您删除断点，它将不再命中。如果是这样，您的项目可能有问题

# jquery - jquery 单图滑块

> ID：15929355
> 
> 赞同：1
> 
> 时间：2013-04-10T14:55:40.047
> 
> 标签：jquery, html

我需要构建一个图像滑块。楼下有一个图像滑块示例，但它不是工作属性。当我按下左键时，滑块工作正常，但是当我单击右键时，它超出了范围。

HTML：

```
<div class="slider">
    <img src="http://lh5.googleusercontent.com/-k__maLyJIPw/UWV1-WyW9rI/AAAAAAAAAJk/MVfNsKPQLsU/s1539/slider.png" alt="" />
    <a href="" class="left">left</a>
    <a href="" class="right">right</a>
</div> 
```

JAVASCRIPT：

```
$(document).ready(function() {
    var SELIDER_OFFSET_LEFT = $(".slider").offset().left;
    $(".slider .left,.slider .right").click(function(){
        var lambda = -1;
        var isLeft = false;   
        var animateWidth = 100;
        var isFirst = true;
        if($(this).hasClass('left')){
            lambda = 1;
            isLeft = true;
        }

        var leftOfImg =   $(".slider img").offset().left;
        console.log(leftOfImg); 
         console.log('*');
        console.log(SELIDER_OFFSET_LEFT);

       var leftTTT = (isFirst)?SELIDER_OFFSET_LEFT - animateWidth:SELIDER_OFFSET_LEFT;
        if(leftOfImg  >= leftTTT &&  isLeft){
             return false;
        }else if(leftOfImg + $(".slider img").width() && !isLeft){

        }   

        var isFirst = false;

        $(".slider img").stop().animate({
            marginLeft: '-='+-animateWidth*lambda
        },1000);
        return false;
    });

}); 
```

这是一个演示：http: [//jsfiddle.net/5AdTe/1/](http://jsfiddle.net/5AdTe/1/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:42:41.550

我能看到的 3 件事是错误的，都在第 21 行的 else 块中

```
else if(leftOfImg + $(".slider img").width() && !isLeft) 
```

1）这里需要一个逻辑运算符'< / > / =='而不是'+'

2）当你向右动画时，leftOfImg 变量变得越来越小

3) else 块中没有 return 语句，即使它确实触发了，所以它只会继续动画

# java - iText：根据 ResultSet 更改页面尺寸

> ID：15929365
> 
> 赞同：0
> 
> 时间：2013-04-10T14:56:09.240
> 
> 标签：java, pdf, itext

我有一个通过 iText1.4.6 生成的动态 PDF（是的，我坚持使用这个旧版本）。我在两件事上遇到了麻烦：
1）向所有页面添加水印，而不仅仅是第一个。
2) 根据结果集中的结果数量更改页面维度。

这是一些代码：

```
Document testScoreReport = new Document(PageSize.A4,50,50,25,230);
OutputStream outStream = response.getOutputStream();
PdfWriter writer = null;

writer = PdfWriter.getInstance(testScoreReport, outStream);    
testScoreReport.open(); 

Image watermark = Image.getInstance(CreateTestReport.class.getResource("/resource/img.jpg"));

// Build table
PdfPTable testTable = new PdfPTable(3);
PdfPCell cell1  = new PdfPCell(new Phrase("Test Date", FONT)));
PdfPCell cell2  = new PdfPCell(new Phrase("Test Name", FONT)));
PdfPCell cell3  = new PdfPCell(new Phrase("Test Score", FONT)));
testTable.addCell(cell1);
testTable.addCell(cell2);
testTable.addCell(cell3);

// QUERY HERE
while (resultSet.next()) {

   if (resultTestCount > 20) {
      // NEW PAGE, SO PRINT WATERMARK AND CHANGE PAGE DIMENSIONS OF NEW PAGE
      resultTestCount = 0;
   }

   PdfPCell cell1  = new PdfPCell(new Phrase(testDate, FONT)));
   PdfPCell cell2  = new PdfPCell(new Phrase(testName, FONT)));
   PdfPCell cell3  = new PdfPCell(new Phrase(testScore, FONT)));

   resultTestCount++;
}

testScoreReport.close(); 
```

我认为这就是所有相关的代码。我试图将水印添加到表格单元格中，或者只是将其添加到 while 循环中，但它似乎只是忽略了它。页面尺寸 - 我尝试了一些东西，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:38:37.947

对于水印示例，请在iText 官方网站上查找关键字[水印。](http://itextpdf.com/themes/keyword.php?id=226)您会发现应该使用[页面事件](http://itextpdf.com/themes/keyword.php?id=204)添加水印。

至于更改页面大小，这可能不是一个好主意（我不知道您为什么要在您的情况下这样做），但可以使用[`Document.setPageSize()`](http://api.itextpdf.com/itext/com/itextpdf/text/Document.html#setPageSize%28com.itextpdf.text.Rectangle%29). [请注意，只有在触发下一个newPage()](http://api.itextpdf.com/itext/com/itextpdf/text/Document.html#newPage%28%29)之后，页面的大小才会有所不同。

您的代码有些令人困惑：您创建了一个`PdfPTable`，但您没有将其添加到文档中。您创建`PdfPCell`对象，但不会将它们添加到表中。您说您想根据结果集更改页面大小，但您没有测量行的高度（您将如何定义页面的尺寸？）等等......

我想知道您为什么坚持使用那个过时的版本以及为什么您的设计与 iText 的“标准使用”不同。

# php - PHP PDO SQLITE - 连接

> ID：15929366
> 
> 赞同：1
> 
> 时间：2013-04-10T14:56:10.180
> 
> 标签：php, sqlite, codeigniter, pdo, connection

这是在 php 中设置到 SQlite 数据库的 PDO 连接的正确方法吗？

```
new PDO(";dbname=sqlite:c:/path/database.sqlite", "", ""); 
```

因为这会给我一个错误：

> PHP 致命错误：未捕获的异常“PDOException”与消息“找不到驱动程序”

因为每当我离开**;dbname=**部分时，它就不会再给我这个错误了。

那么正确的方法是什么？

**PS**：我已经在 php.ini 中正确设置了驱动程序，请参阅此链接以获取 phpinfo() 的屏幕截图：http: [//puu.sh/2xtEF.jpg](http://puu.sh/2xtEF.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:52:34.163

好像如果你离开 ;dbname= 部分，它只是主机名（DSN）。所以它应该是

```
"sqlite:c:/path/database.sqlite" 
```

或者

```
"sqlite:c:/path/database.sqlite;dbname=whateverthenameis" 
```

# ios - iOS OpenGL ES 在 2d 世界中执行捏缩放

> ID：15929368
> 
> 赞同：1
> 
> 时间：2013-04-10T14:56:11.163
> 
> 标签：ios, ipad, opengl-es, pinchzoom

我正在 iPad 上制作 2d OpenGL 应用程序。我需要实现捏/缩放。

我想在`(x,y)`平面上移动相机并通过捏合手势控制相机`x,y`和值。`z`

方法中的每一帧`update`我都像这样制作视图矩阵（相机）

`lookAt = GLKMatrix4MakeLookAt(view_x, view_y, view_z, view_x, view_y, 0.0f, 0.0f, 1.0f, 0.0f);`

其中 view_x、view_y 和 view_z 在程序开始时定义如下： `view_x = view_y = 0.0f; view_z = kStartZoom;` kStartZoom 是 3000。所以相机在 (0,0,3000) 并看向 (0,0,0)

处理夹点事件的几乎可行的解决方案是

```
- (IBAction) handlePinch:(UIPinchGestureRecognizer*) recognizer {
switch (recognizer.state)
{
    case UIGestureRecognizerStateBegan:
    {
        if (recognizer.numberOfTouches == 2)
        {
            prevTouchOrigin1 = [recognizer locationOfTouch:0 inView:self.view];
            prevTouchOrigin2 = [recognizer locationOfTouch:1 inView:self.view];
        }
    } break;
    case UIGestureRecognizerStateChanged:
    {
        if (recognizer.numberOfTouches == 2)
        {
            CGFloat newDistance, oldDistance;

            oldDistance = distanceBetweenTwoCGPoints(&prevTouchOrigin1, &prevTouchOrigin2);
            currTouchOrigin1 = [recognizer locationOfTouch:0 inView:self.view];
            currTouchOrigin2 = [recognizer locationOfTouch:1 inView:self.view];

            newDistance = distanceBetweenTwoCGPoints(&currTouchOrigin1, &currTouchOrigin2);

            if (newDistance == 0 || oldDistance == 0)
            {
                scaleFactor = 1;
            } else {
                scaleFactor = oldDistance / newDistance;
            }

            GLfloat check = view_z * scaleFactor;
            if (check < kMinZoom || check > kMaxZoom)
                return;

            view_z *= scaleFactor;

            // translate

            // formula: newPos = currTouchOrigin + (objectOrigin - prevTouchOrigin) * scaleFactor

            static CGPoint translationDelta;
            GLfloat z_ratio = view_z_old / view_z;

            newPos1.x = currTouchOrigin1.x - ((prevTouchOrigin1.x - view_x) * scaleFactor);
            newPos1.y = currTouchOrigin1.y - ((prevTouchOrigin1.y - view_y) * scaleFactor);

            newPos2.x = currTouchOrigin2.x - ((prevTouchOrigin2.x - view_x) * scaleFactor);
            newPos2.y = currTouchOrigin2.y - ((prevTouchOrigin2.y - view_y) * scaleFactor);

            midpoint = CGPointMidpoint(&newPos1, &newPos2);

            translationDelta = CGPointMake(midpoint.x - view_x, midpoint.y - view_y);

            view_x += translationDelta.x;
            view_y -= translationDelta.y;

            prevTouchOrigin1 = currTouchOrigin1;
            prevTouchOrigin2 = currTouchOrigin2;
        }
    } break;
    case UIGestureRecognizerStateEnded:
    {
    } break;
    default :
    {
    }
}} 
```

几乎都在工作。

我在 x,y 上有更多的运动，然后我需要让相机四处摆动。

问题是我没有应用从屏幕坐标到世界坐标的一些转换吗？

可能是什么问题？我正在研究的其他示例仅根据前一个手指位置和最后一个手指位置之间的距离修改相机位置，这就是我正在做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T08:50:44.990

这是我的解决方案：

我有两个类，一个负责所有 OpenGL 的东西（RenderViewController），另一个负责所有手势识别器以及 OpenGL 部分和应用程序其他部分之间的通信（EditViewController）。

这是有关手势的代码：

**编辑器视图控制器**

它捕获手势并将有关它们的信息发送到 RenderViewController。由于坐标系不同，您必须小心。

```
- (void) generateGestureRecognizers {

    //Setup gesture recognizers
    UIRotationGestureRecognizer *twoFingersRotate = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(twoFingersRotate:)];
    [self.hitView addGestureRecognizer:twoFingersRotate];

    UIPinchGestureRecognizer *twoFingersScale = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(twoFingersScale:)];
    [self.hitView addGestureRecognizer:twoFingersScale];

    UIPanGestureRecognizer *oneFingerPan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerPan:)];
    [self.hitView addGestureRecognizer:oneFingerPan];

    [twoFingersRotate setDelegate:self];
    [twoFingersScale setDelegate:self];
    [oneFingerPan setDelegate:self];
}

- (void) oneFingerPan:(UIPanGestureRecognizer *) recognizer {    

    //Handle pan gesture
    CGPoint translation = [recognizer translationInView:self.hitView];
    CGPoint location = [recognizer locationInView:self.hitView];

    //Send info to renderViewController
    [self.renderViewController translate:traslation];

    //Reset recognizer so change doesn't accumulate
    [recognizer setTranslation:CGPointZero inView:self.hitView];    
}

- (void) twoFingersRotate:(UIRotationGestureRecognizer *) recognizer {  

    //Handle rotation gesture
    CGPoint locationInView = [recognizer locationInView:self.hitView];
    locationInView = CGPointMake(locationInView.x - self.hitView.bounds.size.width/2, locationInView.y - self.hitView.bounds.size.height/2);

    if ([recognizer state] == UIGestureRecognizerStateBegan || [recognizer state] == UIGestureRecognizerStateChanged) {

        //Send info to renderViewController
        [self.renderViewController rotate:locationInView degrees:recognizer.rotation];

        //Reset recognizer
        [recognizer setRotation:0.0];
    }
}

- (void) twoFingersScale:(UIPinchGestureRecognizer *) recognizer {

    //Handle scale gesture
    CGPoint locationInView = [recognizer locationInView:self.hitView];
    locationInView = CGPointMake(locationInView.x - self.hitView.bounds.size.width/2, locationInView.y - self.hitView.bounds.size.height/2);

    if ([recognizer state] == UIGestureRecognizerStateBegan || [recognizer state] == UIGestureRecognizerStateChanged) {

        //Send info to renderViewController
        [self.renderViewController scale:locationInView ammount:recognizer.scale];

        //reset recognizer
        [recognizer setScale:1.0];
    }

}

//This allows gestures recognizers to happen simultaniously
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    if (gestureRecognizer.view != otherGestureRecognizer.view)
        return NO;

    if ([gestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]] || [otherGestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]])
        return NO;

    return YES;
} 
```

**渲染视图控制器**

对于每一帧，modelViewMatrix 是根据其他三个临时矩阵（平移、缩放和旋转）计算得出的

```
- (void) setup {

    //Creates the modelViewMatrix from the initial position, rotation and scale
    translatemt = GLKMatrix4Translate(GLKMatrix4Identity, initialPosition.x, initialPosition.y, 0.0);
    scalemt = GLKMatrix4Scale(GLKMatrix4Identity, initialScale, initialScale, 1.0);
    rotatemt = GLKMatrix4Rotate(GLKMatrix4Identity, initialRotation, 0.0, 0.0, 1.0);
    self.modelViewMatrix = GLKMatrix4Multiply(GLKMatrix4Multiply(GLKMatrix4Multiply(translatemt, rotatemt), scalemt), GLKMatrix4Identity);

    //set these back to identities to take further modifications (they'll update the modelViewMatrix)
    scalemt = GLKMatrix4Identity;
    rotatemt = GLKMatrix4Identity;
    translatemt = GLKMatrix4Identity;

    //rest of the OpenGL setup
    [self setupOpengGL];

}

//public interface
- (void) translate:(CGPoint) location {
    //Update the translation temporary matrix
    translatemt = GLKMatrix4Translate(translatemt, location.x, -location.y, 0.0);
}

//public interface
- (void) rotate:(CGPoint) location degrees:(CGFloat) degrees {
    //Update the rotation temporary matrix
    rotatemt = GLKMatrix4Translate(GLKMatrix4Identity, location.x, -location.y, 0.0);
    rotatemt = GLKMatrix4Rotate(rotatemt, -degrees, 0.0, 0.0, 1.0);
    rotatemt = GLKMatrix4Translate(rotatemt, -location.x, location.y, 0.0);
}

//public interface
- (void) scale:(CGPoint) location ammount:(CGFloat) ammount {
    //Update the scale temporary matrix
    scalemt = GLKMatrix4Translate(GLKMatrix4Identity, location.x, -location.y, 0.0);
    scalemt = GLKMatrix4Scale(scalemt, ammount, ammount, 1.0);
    scalemt = GLKMatrix4Translate(scalemt, -location.x, location.y, 0.0);
}

- (void)update {

    //this is done before every render update. It generates the modelViewMatrix from the temporary matrices
    self.modelViewMatrix = GLKMatrix4Multiply(GLKMatrix4Multiply(GLKMatrix4Multiply(rotatemt, translatemt), scalemt), self.modelViewMatrix);

    //And then set them back to identities
    translatemt = GLKMatrix4Identity;
    rotatemt = GLKMatrix4Identity;
    scalemt = GLKMatrix4Identity;

    //set the modelViewMatrix for the effect (this is assuming you are using OpenGL es 2.0, but it would be similar for previous versions
    self.effect.transform.modelviewMatrix = self.modelViewMatrix;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:20:04.613

我不太确定我是否理解您的问题，但对于捏识别我使用 UIPinchGestureRecongizer：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPinchGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIPinchGestureRecognizer](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPinchGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIPinchGestureRecognizer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T15:56:44.803

此解决方案使用 x,y 平面上方的移动相机。世界保持静止。我们在某个 z 位置，我们通过捏合手势控制相机移动。

所需要的是将单位从以点表示的屏幕空间转换为以离散单位表示的开放式 gl 空间。

我通过在 x,y 平面上以 opengl 单位绘制 50x50 正方形来获得这个常数，相机居中`x = 0, y = 0, z = 100`。

然后我添加了两个`UIView`s 并设置平移手势来移动这两个视图。通过平移手势，我将它们的帧原点物理地居中于 opengl 正方形的右上角和右下角。点击手势设置为`NSLog`它们的起源。这就是我得到这个常数的方式：

```
static const GLfloat k = 0.125f; // 445 CG units is 50 discrete OpenGL units at Z = 100; 0.112359f 
```

因此，对于任意相机 z 位置，我可以计算缩放我们从捏缩放手指位置获得的增量。

一些init方法中的矩阵初始化：

```
aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(65.0f), aspect, 0.1f, 5000.0f);
lookAt = GLKMatrix4MakeLookAt(view_x, view_y, view_z, view_x, view_y, 0.0f, 0.0f, 1.0f, 0.0f); 
```

所有伊瓦尔的：

```
GLfloat view_x;
GLfloat view_y;
GLfloat view_z;
GLfloat view_z_base;

CGPoint currTouchOrigin1, currTouchOrigin2;
CGPoint prevTouchOrigin1, prevTouchOrigin2;
CGPoint newPos1, newPos2;
CGPoint midpoint;
CGFloat scaleFactor; 
```

我们通过 view_x、view_y 和 view_z ivars 移动相机。

所有常量：

```
static const GLfloat k              = 0.125f; // 445 CG units is 50 discrete OpenGL units at Z = 100; 0.112359f
static const GLfloat default_z      = 100.0f;
static const GLfloat kMinZoom       = 30.0f;
static const GLfloat kMaxZoom       = 4000.0f;
static const GLfloat kStartZoom     = 200.0f; 
```

这是全捏缩放处理程序：

```
- (IBAction) handlePinch:(UIPinchGestureRecognizer*) recognizer {

switch (recognizer.state)
        {
            case UIGestureRecognizerStateBegan:
            {
                if (recognizer.numberOfTouches == 2)
                {
                    prevTouchOrigin1 = [recognizer locationOfTouch:0 inView:self.view];
                    prevTouchOrigin2 = [recognizer locationOfTouch:1 inView:self.view];
                }
            } break;
            case UIGestureRecognizerStateChanged:
            {
                if (recognizer.numberOfTouches == 2)
                {
                    CGFloat newDistance, oldDistance;

            oldDistance = distanceBetweenTwoCGPoints(&prevTouchOrigin1, &prevTouchOrigin2);
            currTouchOrigin1 = [recognizer locationOfTouch:0 inView:self.view];
            currTouchOrigin2 = [recognizer locationOfTouch:1 inView:self.view];

            newDistance = distanceBetweenTwoCGPoints(&currTouchOrigin1, &currTouchOrigin2);

            if (newDistance == 0 || oldDistance == 0)
            {
                scaleFactor = 1;
                //break;
            } else {
                //scaleFactor = oldDistance / newDistance;
                scaleFactor = newDistance / oldDistance;
            }

            GLfloat view_z_old = view_z;
            view_z /= scaleFactor;
            if (view_z < kMinZoom || view_z > kMaxZoom)
            {
                view_z = view_z_old;
                return;
            }

            // translate

            // formula: newPos = currTouchOrigin + (objectOrigin - prevTouchOrigin) * scaleFactor

            //static CGPoint tmp1, tmp2;
            static CGPoint translationDelta;

            newPos1.x = currTouchOrigin1.x - ((prevTouchOrigin1.x - (screenRect.size.width / 2)) * scaleFactor);
            newPos1.y = currTouchOrigin1.y - ((prevTouchOrigin1.y - (screenRect.size.height / 2)) * scaleFactor);

            newPos2.x = currTouchOrigin2.x - ((prevTouchOrigin2.x - (screenRect.size.width / 2)) * scaleFactor);
            newPos2.y = currTouchOrigin2.y - ((prevTouchOrigin2.y - (screenRect.size.height / 2)) * scaleFactor);

            midpoint = CGPointMidpoint(&newPos1, &newPos2);

            translationDelta = CGPointMake(midpoint.x - (screenRect.size.width / 2), midpoint.y - (screenRect.size.height / 2));

            static GLfloat r = 0.0f;
            static GLfloat k2 = 0.0f;

            r = view_z / default_z;
            k2 = k * r;

            // In openGL, coord sys if first quadrant based
            view_x += -translationDelta.x * k2;
            view_y +=  translationDelta.y * k2;

            // store current coords for next event
            prevTouchOrigin1 = currTouchOrigin1;
            prevTouchOrigin2 = currTouchOrigin2;
        }
    } break;
    case UIGestureRecognizerStateEnded:
    {

    } break;
    default :
    {

    }
  }
} 
```

# php - 如何编辑 dynamic_sidebar() 的内容？

> ID：15929372
> 
> 赞同：4
> 
> 时间：2013-04-10T14:56:14.120
> 
> 标签：php, wordpress, wordpress-theming

我很了解 PHP，但我是 Wordpress 的新手。我有一个不完整的 Wordpress 网站。它有一个带有 Aweber 时事通讯表格的静态主页。我尝试深入研究已安装的主题和 home.php 并遇到：

```
<div class="home-infobox">
<?php if ( is_active_sidebar( 'homepage-infobox' ) ) : ?>
    <?php dynamic_sidebar( 'homepage-infobox' ); ?>
<?php endif; ?>
</div> 
```

当我在主页上查看源代码时，Aweber 时事通讯订阅表单正好出现在`<div class="home-infobox">`. 作为我的第一步，我必须对表单进行更改，我试图弄清楚它从哪里获取内容。它是来自数据库还是来自任何 PHP 文件？我完全一无所知。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-05T16:36:28.607

您可以使用以下代码获取值而不是打印。

```
<?php 
  ob_start();
  dynamic_sidebar( 'homepage-infobox' ); 
  $output = ob_get_contents();
  ob_end_clean();
  echo $output;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-05T12:31:49.020

那行：

```
 <?php dynamic_sidebar( 'homepage-infobox' ); ?> 
```

正在打印主页信息框侧边栏的内容。侧边栏可以包含小部件。您可以在 Appearence->Widgets (/wp-admin/widgets.php) 下查看（和更改）侧边栏内容。小部件可以由您安装的某个插件创建，或者您可以自己创建一个，即从functions.php。即使您找到了创建小部件的插件并且找到了正在执行此操作的实际代码，更改第 3 方代码也不是一个好习惯——通过一些更新，您的更改可能会被覆盖。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-10T15:52:10.213

打开主题文件夹（如`'\wp-content\themes\twentyeleven'`）。您将找到一个名为 .php 的 php 文件`functions.php`。打开它并搜索`homepage-infobox`，您会在`register_sidebar`.

# iphone - NSFetchedResultsController 中的切换部分

> ID：15929375
> 
> 赞同：0
> 
> 时间：2013-04-10T14:56:20.273
> 
> 标签：iphone, xcode

我正在使用 XCode 3.2.6 并在我的 iPhone 4s 上进行测试。

我的应用程序在 UITableView 中显示产品列表。

我有一个设置了“sectionNameKeyPath”的 NSFetchedResultsController (NFC)，所以我看到我的字母部分标题都很好。我想在我的 UISearchBar 中使用相同的控制器，但是当用户键入搜索项目时，我不想在后一种情况下显示部分标题。

有谁知道我是否可以重复使用相同的 NFC 并“关闭”sectionNameKeyPath 功能，还是需要使用单独的 NFC？

任何帮助都会很好，或者确实链接到可能显示它是如何完成的示例的链接。谢谢 - 罗南

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:38:30.650

`sectionNameKeyPath`是只读的。因此，一种方法是在视图控制器上设置一个布尔搜索状态，如果您正在搜索，则该状态 == YES。然后 ...

```
// assuming ARC

- (void)setSearch:(BOOL)search {

    if (_search == search) return;
    _search = search;
    self.fetchedResultsController = nil;
} 
```

这将导致您的 FRC 延迟初始化在下次请求时发生...

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    // here's the key - set this based on search state
    NSString *sectionNameKeyPath = (self.search)? nil : @"mySectionNameKeyPath";

    _fetchedResultsController =
        [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                            managedObjectContext:moc
                                              sectionNameKeyPath:sectionNameKeyPath
                                                       cacheName:@"Root"];

    // and so on
} 
```

感觉像是浪费查询来更改搜索模式，但希望这不会太昂贵。

# actionscript-3 - 如何从火花中的TextInput中删除角半径

> ID：15929382
> 
> 赞同：2
> 
> 时间：2013-04-10T14:56:34.627
> 
> 标签：actionscript-3, apache-flex, flex-spark

我正在创建一个移动应用程序，`Flex`并且我收到的设计在字段`AS3`中没有拐角半径。`TextInput`

在移动项目中，`Flash Builder`只能`Spark`用于布局，并且根据 Adob​​e 的文档，该`TextInput`元素没有设置角半径的属性。

我还有其他方法可以做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:02:04.720

感谢您的回复，我发现标准皮肤`Spark`没有圆角。这就是我需要得到我想要的结果的皮肤。

我发现的皮肤位于 中`spark.skins.spark.TextInputSkin`，除了它有正常的角而不是圆角之外，我让所有东西都保持不变。

再次感谢您的帮助。

# doctrine-orm - 如何从 Doctrine 中的部分实体获取外键？

> ID：15929385
> 
> 赞同：2
> 
> 时间：2013-04-10T14:56:39.427
> 
> 标签：doctrine-orm, doctrine, zend-framework2

[我正在使用 Doctrine and Zend Framework 2。当我使用“ Doctrine partials](http://docs.doctrine-project.org/en/latest/reference/partial-objects.html) ”时，我不知道如何获取实体的外键。我还使用查询生成器，我想返回数组。

在我使用: 之前`IDENTITY(e.variable)`，但现在当我使用[partial](http://docs.doctrine-project.org/en/latest/reference/partial-objects.html)时，我有一个类似的代码：`partial e.{id, name...}`。而且我不知道我应该在哪里以及用什么来获取外键。

如果我要使用`e.{id, name}, IDENTITY(e.variable)`，那么我会得到外键，但它不是同一个数组的一部分：

```
array (size=2)
  0 => 
    array (size=2)
      'id' => int 1
      'name' => string 'Test' (length=4)
  'countryId' => string 'en' (length=2) 
```

但我想得到：

```
array (size=2)
  0 => 
    array (size=2)
      'id' => int 1
      'name' => string 'Test' (length=4)
      'countryId' => string 'en' (length=2) 
```

我也知道，`HINT_INCLUDE_META_COLUMNS`但这个解决方案适用于所有外键，然后我无法决定我想选择哪个外键，我想要更灵活。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-13T07:29:23.447

我想你已经解决了这个问题，但我来自谷歌搜索类似的东西，并决定分享我的经验。

要像使用 SQL 一样获得平面矩形数据集，Doctrine 建议使用部分对象。如果您想在结果集中也包含外键，只需删除部分语法并直接列出列：

```
SELECT e.id, e.name, IDENTITY(e.country) as countryId FROM MyEntity e ... 
```

只要确保您使用该`getArrayResult`方法来检索您的纯数据数组。

[http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#array-hydration](http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#array-hydration)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-06T20:57:49.257

似乎没有办法做到这一点，因为根据[http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#select-expressions](http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#select-expressions) 'partial' 只接受 'SimpleStateField '。

所以必须加入“Country c”并选择“partial c.{id}”。

# angularjs - 具有特定类型的通用指令（UI 组件继承）

> ID：15929386
> 
> 赞同：2
> 
> 时间：2013-04-10T14:56:40.690
> 
> 标签：angularjs, angularjs-directive

我正在开发一个以特殊 XML 作为输入来呈现 HTML 的项目。我已经成功完成了基本案例。例如：

```
<mybutton name="layla"></mybutton> 
```

被转换为

```
<div class="btn">Layla</div> 
```

使用类似的指令

```
.directive('mybutton', function() {
    return {
        restrict: 'E',
        scope: {
            name: '@'
        },
        templateUrl: 'uicomponents/uiButton.html'
    }
}) 
```

我将收到的真正 XML 输入是：

```
<ui type="back_button" x="10.0" y="630.0"/> 
```

我想避免更改 XML 语法，但如有必要，可以这样做。所有屏幕组件都在`<ui></ui>`标签中。该`type`属性定义了组件。

你会如何为这种标签编写指令？`<ui>`为元素创建一个巨大的指令并在内部为属性设置一个长开关盒似乎并不聪明。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:04:49.180

您可以创建一个 ui 指令，根据 type 属性转换元素，然后重新编译元素 - 如下所示：

```
app.directive('ui',function($compile){
  return {
    restrict:'E',
    compile:function(tElement,tAttrs){
      if(tAttrs.type){
        tElement.attr(tAttrs.type,'');
        tElement.removeAttr('type');
        return function(scope,el){
          $compile(el)(scope);
        }
      }

    }  
  }
});

app.directive('backButton',function(){
  return {
    replace:true,
    template:'<button ng-click="btnClick()">A back-button template</button>'
  }
}); 
```

编辑：在我最初的示例中，我犯了编译模板元素的错误——如果在 ngRepeat 中使用该指令，这将不起作用。修复很简单，而是编译链接元素。我已经更新了代码和示例。

查看[这个 plnkr 示例](http://plnkr.co/edit/9WLjVgzSVUapJ0esBDyy?p=preview)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:47:19.607

我不知道创建绑定属性值的指令的方法，但也许你可以看看这个以前的 SO 答案：[自定义输入类型](https://stackoverflow.com/questions/14736469/how-to-create-a-custom-input-type-in-angular-js)

这个想法是使用指令的编译功能根据属性的值创建不同的模板。您可以在开始时缓存所有自定义输入模板（不是必需的）。

```
angular.module('myapp', ['myapp.directives'])
    .run(['$http', '$templateCache', function($http, $templateCache) {
        $templateCache.put('span.html', '<span>text</span>');
        $http.get('back_button.html', {cache:$templateCache});
    }]); 
```

并根据 type 属性从缓存中检索输入模板：

```
angular.module('myapp.directives', [])
    .directive('ui', ['$templateCache', function($templateCache) {
        return {
            restrict: 'E',
            compile: function(elem, attrs)
            {
                var type = attrs.type || 'span.html'; // default value ?
                elem.replaceWith($templateCache.get(type));
            }
        }
    }]); 
```

此代码未经测试。

**编辑：**我认为，这也可以工作，使用带有 $compile 的链接函数，而不预加载模板，但仍然缓存它们：

```
angular.module('myapp.directives', [])
    .directive('ui', ['$http', '$templateCache', '$compile', function($http, $templateCache, $compile) {
        return {
            restrict: 'E',
            link: function(scope, elem, attrs)
            {
                var type = attrs.type || 'span.html'; // default value ?
                $http.get('views/' + type + '.html', {cache: $templateCache}).then(function(result) {
                    elem.replaceWith($compile(result.data)(scope));
                });
            }
        }
    }]); 
```

这段代码对我有用。

# java - 合并排序错误的问题

> ID：15929388
> 
> 赞同：0
> 
> 时间：2013-04-10T14:56:41.173
> 
> 标签：java, mergesort

我正在尝试实现合并排序，但遇到了合并功能：

这是我的功能：

```
public static void merge(Comparable[] a, Comparable[] aux, int low, int mid, int hi) {
    // Copy the elements to the aux array
    for(int i = low; i < a.length; i++) {
        aux[i] = a[i];
    }

    int i = low, j = mid + 1;
    for (int k = low; k <= hi; k++) {
        if      (i > mid)              a[k] = aux[j++];
        else if (j > hi)               a[k] = aux[i++];
        else if (less(aux[j], aux[i])) a[k] = aux[j++];
        else                           a[k] = aux[i++];
    }
} 
```

运行以下输入：

```
[2, 4, 6, 8, 3, 5, 7, 9] 
```

产生这个结果：

```
[2, 3, 3, 3, 3, 5, 7, 9] 
```

这是调用本身：

```
 int mid = 0 + (my_array.length - 0) / 2;
    MergeSort.merge(my_array, my_array, 0, mid -1, my_array.length-1); 
```

我不能完全确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:31:05.233

`a`并且`aux`是同一个数组。因此，您首先将数组复制到自身中，这毫无用处。然后，在第二个循环中，您在读取值时更改它，这会搞砸一切。

不要传递两个（相同的）数组，而是在 merge 方法中创建一个新数组并返回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:06:06.607

看来您实际上并不知道这里的合并是什么意思。归并排序是一种分而治之的算法。在这里，征服部分意味着你要合并两个排序的数组。因此，要合并它们，您总是取两个数组中最低的项并将其放入输出数组的下一个位置，并在数组中推进您从中取出项的位置。

以这种合并方法为例，只是为了理解。

```
public class MergeTest {

public static void main(String[] args) {
    int[] sorted1 = new int[] {2, 5, 6, 8, 10};
    int[] sorted2 = new int[] {1, 3, 4, 7, 9};

    int[] result = merge(sorted1, sorted2);
    // returns [1,2,3,4,5,6,7,8,9,10]
}

public static int[] merge (int[] input1, int[] input2) {
    int[] output = new int[input1.length + input2.length];

    int pos1 = 0;
    int pos2 = 0;

    while (pos1 < input1.length && pos2 < input2.length) {
        int val1 = input1[pos1];
        int val2 = input2[pos2];

        if (val1 < val2) {
            output[pos1++ + pos2] = val1;
        } else {
            output[pos1 + pos2++] = val2;
        }
    }
    while (pos1 < input1.length) {
        int val = input1[pos1];
        output[pos1++ + pos2] = val;
    }
    while (pos2 < input2.length) {
        int val = input2[pos2];
        output[pos1 + pos2++] = val;
    }
    return output;
}

} 
```

这里还有一点额外的：mergeSort 方法本身。

```
public static int[] mergeSort (int[] input) {

    if (input.length == 1) {
        return input;
    }

    int middle = input.length / 2;

    // divide
    int[] divided1 = Arrays.copyOfRange(input, 0, middle);
    int[] divided2 = Arrays.copyOfRange(input, middle, input.length);
    // conquer
    int[] sorted1 = mergeSort(divided1);
    int[] sorted2 = mergeSort(divided2);

    return merge(sorted1, sorted2);
} 
```

# linux - 一种在 linux 中的应用程序之间进行通信的方法

> ID：15929393
> 
> 赞同：3
> 
> 时间：2013-04-10T14:56:53.003
> 
> 标签：linux, daemon, raspberry-pi

我目前处于计划阶段，可以提供帮助。我将使用插入各种模块（i2C、USB 等）的 rasberry pi，这些可以是任何东西，例如测量温度、风速、方向等的模块。

这个想法是让每个模块运行自己的守护程序，该守护程序将根据请求将数据提供给主程序，或者主程序可以请求守护程序重新启动。

所有这些都将在树莓派上发生，而不是通过任何类型的网络。

我的问题是使用什么来在主程序和守护进程之间进行通信。我一直在阅读有关使用 dbus 的信息，但是有很多人说将其用作最后的手段。

我已经研究了一段时间，无法想出任何其他（也许更简单）的方法。

附带说明一下，将它们分开的想法是因为如果任何模块有问题，我可以轻松地重新启动它而不会影响主程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:24:27.893

查看 ZeroMQ。这是类固醇上的插座。

它很容易上手，非常适合同一进程中的线程之间或不同进程之间的通信。ZMQ 消除了多线程和进程通信通常意味着的许多令人头疼的问题。

只需`socket.bind`在您的“主程序”和`socket.connect`您的客户中使用。

在您的情况下，听起来您可能对 Pub-Sub 模式感兴趣，其中服务器订阅，客户端发布，这意味着它是一种单向通信。

否则，您可能对 Req-Router-Dealer-Rep 模式感兴趣。

[http://www.zeromq.org/](http://www.zeromq.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:02:54.190

我只会使用[unix 套接字](http://en.wikipedia.org/wiki/Unix_domain_socket)。

> Unix 域套接字的 API 类似于 Internet 套接字，但它不使用底层网络协议进行通信。

我无法链接到示例，因为您没有提供语言，但基本上服务器将在文件系统的某处打开一个套接字（最好是它具有读/写访问权限的某个地方，但所有其他程序只有读访问权限）。然后客户端程序可以连接到该套接字并发送请求，就像通过 Internet 一样。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-10T15:07:35.787

好吧，有一种观点认为，您应该将应用程序执行的每项工作编程为一个单独的、离散的程序，该程序只执行一项工作，然后通过 shell 将它们相互传递，或者在您的主​​程序需要时调用它们中的每一个程序。

如果需要和易于轮询，只需在后台运行的几个程序（必须爱＆）被杀死。

不需要重新发明轮子，你知道的。

# servicestack - 从 MVC4 Web API 迁移到 ServiceStack 的新 API

> ID：15929394
> 
> 赞同：2
> 
> 时间：2013-04-10T14:56:53.240
> 
> 标签：servicestack

在 ServiceStack 新 API 中组织文件/代码的最佳方式是什么。我在 MVC 4 Web API 上工作，我们在 App_start 文件夹（路由、webapiconfig、过滤器）、控制器（所有 apiControllers）中组织文件？

我也有 Controllers 文件夹，我有 2 个文件 pc.cs 和 mobile.cs。pc.cs 具有所有与 pc 相关的 api，可以通过 xyz.com/api/pc/GetUsers 访问服务，mobile.cs 具有所有与移动相关的 api，可以通过 xyz.com/api/mobile/GetMinutes 访问服务。

使用应用主机

```
setConfig(new EndpointHostConfig {ServiceStackHandlerFactoryPath = "api"}); 
```

我可以在uri中实现api。

这可以在 ServiceStack 中复制吗？如果是怎么办？另一方面，在组织此类服务方面建议（最佳实践）是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:42:58.037

查看推荐的[Physical Project Structure wiki](https://github.com/ServiceStack/ServiceStack/wiki/Physical-project-structure)中的示例，该示例展示了我们将如何为这个[简单的 REST API 设计示例](https://stackoverflow.com/questions/15231537/recommended-servicestack-api-structure/15235822#15235822)对项目进行物理布局。

如果您希望维护大量服务，请查看[Modularizing services wiki](https://github.com/ServiceStack/ServiceStack/wiki/Modularizing-services)，它展示了如何将服务拆分为多个 dll 并将它们封装在[Plugins](https://github.com/ServiceStack/ServiceStack/wiki/Plugins)中。

# python - 录制和播放从麦克风录制的音频流

> ID：15929399
> 
> 赞同：0
> 
> 时间：2013-04-10T14:57:01.147
> 
> 标签：python, audio, playback, microphone, recording

我想用python（pyaudio）录制声音/对话，然后使用录制的流并使用套接字在另一台计算机上播放（没有文件，只有python）

我怎样才能做到这一点？我应该使用哪些模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:58:24.183

只需通过套接字发送原始帧，而不是写入文件。使用端口音频网页上的播放示例。只需在 pyaudio 示例中替换此代码即可进行录制（[http://people.csail.mit.edu/hubert/pyaudio/](http://people.csail.mit.edu/hubert/pyaudio/)）：

```
wf = wave.open(WAVE_OUTPUT_FILENAME, 'wb')
wf.setnchannels(CHANNELS)
wf.setsampwidth(p.get_sample_size(FORMAT))
wf.setframerate(RATE)
wf.writeframes(b''.join(frames))
wf.close() 
```

通过套接字发送 ((b''.join(frames)), FORMAT, CHANNELS, RATE)。编码此信息的一种简单方法可能是作为发布请求，其中参数是 FORMAT、CHANNELS 和 RATE，正文是音频字节串。

```
import urrllib2
url = '192.168.1.10'
data = urllib.urlencode({'FORMAT' : format,
                         'CHANNELS'  : channels,
                         'RATE' : rate})
response = urllib2.urlopen(url=url, data= b''.join(frames)).read()
assert(response == "Successfully Played") 
```

只需在这个例子中修改你的 ip 地址，然后在接收端设置一个简单的 web 服务器（例如用flask）来处理请求。

然后，用户可以在套接字上解码此信息并使用播放示例，方法是创建一个具有正确参数的新流（例如播放示例）。

如果您需要实时音频流，请使用格式通道和速率发起单个请求，然后只需打开一个原始 tcp 套接字即可发送原始帧。

# ruby - Ruby SHA1 符号返回与 OpenSSL 符号不同的结果

> ID：15929401
> 
> 赞同：2
> 
> 时间：2013-04-10T14:57:05.213
> 
> 标签：ruby, openssl

当我在 linux 命令行执行 openssl 命令时：

```
echo -n "aaaaaa" | /usr/bin/openssl dgst -sha1 -sign myprivatekey.pem | /usr/bin/openssl enc -base64 -A 
```

我得到这个结果：

```
2GmJqeVDbGFsaJjMKcjW4JhPYBdI7mSwNYKrmdHtM2xpWVVSdhXc0d3zidF790mz9n9nb2yX+jMZpzNNd8xAx/WeSRxnYCg0Y/TXoMG4ynbCnttpzxrN08TJNggLOz0fWbzfMQZbHy+WghU8SlOhQExngtH8yvtE71060C/KKtI= 
```

通过运行这个 ruby​​ 脚本：

```
require 'openssl'
require 'base64'

pkey = OpenSSL::PKey::RSA.new(File.read("myprivatekey.pem"))
plaintext = OpenSSL::Digest::SHA1.new("aaaaaa").digest
enc = pkey.private_encrypt(plaintext)
puts Base64.encode64(enc) 
```

结果不一样：

```
rHdXk0itL88vrz84QvCpRHM7J1w/B+Jaoo7n3fQ1D0UiPYQ4jClLQcO3iQLVifq/jMXBYvPLzQVZa/J9D7gjOwKYkKlu5c18HV8U4h0jXM7yTNCYlekhVsBThUcfb2kb1Lf2Ow3cjwL7ss66bvUc9+bwDGHtp3uJ9/GbJlZdphE= 
```

谁能帮我 ？为什么我在红宝石部分做错了？我想复制linux命令行命令！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:22:51.790

找到了解决方案...签名与 private_encrypt 不同...但仍然不明白为什么:)

```
require 'openssl'
require 'base64'

pkey = OpenSSL::PKey::read(File.read("privatekey.pem"))
enc = pkey.sign(OpenSSL::Digest::SHA1.new,"aaaaaa")       
puts Base64.encode64(enc) 
```

# c# - WPF 应用程序中的虚拟键盘

> ID：15929403
> 
> 赞同：1
> 
> 时间：2013-04-10T14:57:12.107
> 
> 标签：c#, wpf, xaml, keyboard

![两个文本框：伪密码和虚拟键盘](https://i.stack.imgur.com/NFR2m.png)

我正在使用虚拟键盘做一个 WPF 应用程序。如图中提到的，有两个文本框 `pseudo`，`password`我想使用虚拟键盘输入它们的值。

问题是如何知道光标是在第一个字段中还是在第二个字段中或外面。我试过`isfocused`了，但没有给出结果。

那么我该怎么做这个任务呢？

```
public partial class Authentification : Window
{
    public TextBox numero = new TextBox();
    bool isPseudoFocused = false;
    bool isPasswordFocused = false;
    public Authentification()
    {
        InitializeComponent();
        WindowStartupLocation = System.Windows.WindowStartupLocation.CenterScreen;
        if (Keyboard.FocusedElement == pseudo)
            MessageBox.Show("hhhh");
    }

    private void un_Click(object sender, RoutedEvent e)
    {
        if (isPseudoFocused) pseudo.Text += "1";
        if (isPasswordFocused) password.Text += "1";
    }
    private void pseudo_FocusableChanged(Object sender, DependencyPropertyChangedEventArgs e)
    {
        MessageBox.Show("pseudo");
        isPseudoFocused = true;
        isPasswordFocused = false;
    }
    private void password_FocusableChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        MessageBox.Show("password");
        isPseudoFocused = false;
        isPasswordFocused = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:19:10.737

你应该有这样的东西：

```
bool isPseudoFocused = false;
bool isPasswordFocused = false;

//when Pseudo gets focus the set 
isPseudoFocused = true; 
isPasswordFocused = false;

//when Password gets focus then set
isPseudoFocused = false; 
isPasswordFocused = true;

//when you are typing text then you know where to put your text. 
```

更新：

您应该将此代码放入`TextBox_GotFocus`处理程序中。

```
private void pseudo_GotFocus(object sender, RoutedEventArgs e)
{
    MessageBox.Show("pseudo"); isPseudoFocused = true; isPasswordFocused = false;
}
private void password_GotFocus(object sender, RoutedEventArgs e)
{
    MessageBox.Show("password"); isPseudoFocused = false; isPasswordFocused = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:01:57.580

你可以用`Keyboard.FocusedElement`这个

# entity-framework - EntityFramework：关于 OptimisticConcurrencyException

> ID：15929407
> 
> 赞同：2
> 
> 时间：2013-04-10T14:57:17.123
> 
> 标签：entity-framework, objectcontext, optimistic-concurrency

我有两个相关的表：`dbo.resources`和`dbo.reservation`; `dbo.resources`有一个指向选项的外`dbo.reservation`键`ON DELETE SET NULL`。我还有一个“之后”触发器`dbo.resources`，当资源被删除时，它会删除保留。

`OptimisticConcurrencyException`当我尝试手动删除预订和资源时，我已经“设法”提出了一个问题，这看起来很正常。

然后我找到了问题并消除了它，但现在我想通过捕获`OptimisticConcurrencyException`并刷新上下文来强制执行更强大的异常处理机制。

我的问题是：谁能向我解释为什么这段代码：

```
 catch (System.Data.OptimisticConcurrencyException ocException)
        {
            foreach (var objectStateEntry in ocException.StateEntries)
                _Context.Refresh(System.Data.Objects.RefreshMode.ClientWins, objectStateEntry.Entity);
            _Context.SaveChanges();
        } 
```

不工作，

而这个：

```
 catch (System.Data.OptimisticConcurrencyException ocException)
        {
            foreach (var objectStateEntry in ocException.StateEntries)
                _Context.Refresh(System.Data.Objects.RefreshMode.StoreWins, objectStateEntry.Entity);
            _Context.SaveChanges();
        } 
```

做？EF 如何处理每种情况下的对象上下文（StoreWins 和 ClientWins）？“幕后”究竟发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:43:32.433

根据[此处找到](http://msdn.microsoft.com/en-us/library/bb896255.aspx)的参考文章：

> 调用 Refresh 方法后，对象的原始值将始终使用数据源值更新，但当前值可能会或可能不会使用数据源值更新。这取决于 RefreshMode。StoreWins 模式意味着应该更新对象以匹配数据源值。ClientWins 值意味着只有对象上下文中的更改将被持久化，即使数据源中有其他更改。为确保对象已被数据源端逻辑更新，您可以在调用 SaveChanges 方法后使用 StoreWins 值调用 Refresh 方法。

# ruby - 在 Ruby 中使用文件名中的空格执行脚本

> ID：15929409
> 
> 赞同：5
> 
> 时间：2013-04-10T14:57:23.637
> 
> 标签：ruby

我编写了一个简单的脚本来检查 Dropbox 文件的状态并将其移动到另一个文件夹，如果文件已完全同步和下载（状态 == '最新'）。

我现在唯一的问题是，如果文件或目录中有空格，那么我的脚本将无法正确运行。

我曾经`#{...}`传递文件名，但似乎它会在空格处拆分给它的任何内容。

这是我的脚本：

```
# runs in Ruby 1.8.x (ftools)                                                                                    

 class DropboxHelper                                                                  

     require 'ftools'                                                                 

     def self.move                                                                    
         directory = "Foo"                                                     
         destination = "Bar"                                                   

         while true                                                                   
             Dir.glob(directory+"/**/*") do |item|                                    
                 next if item == '.' or item == '..'                                  
                 fileStatus = `~/bin/dropbox.py filestatus #{item}`                   
                 puts "processing " + item                                            
                 puts "filestatus: " + fileStatus                                     
                 if (fileStatus.include? "up to date")                                
                     puts item.split('/',2)[1] + " is up to date, starting to move file now."
                     `cp -r #{item + " " + destination + "/" + item.split('/',2)[1]} >> copiedFile.out`

                     # remove file in Dropbox folder, if current item is not a directory and 
                     # copied file is the identical.                                  
                     if (!File.directory?(item) && File.cmp(item, destination + "/" + item.split('/',2)[1]).to_s)
                         puts "remove " + item                                        
                         `rm -rf #{item} >> removedFile.out`                          
                     end                                                              
                 else                                                                 
                     puts item + " is not up to date, moving to next file."           
                 end                                                                  
             end                                                                      

             # execute every hour                                                     
             puts "sleeping now"                                                      
             sleep(3600)                                                              
         end                                                                          
     end                                                                              
 end                                                                                  

 DropboxHelper.move 
```

运行脚本时，如果文件或目录中有空格，我会得到以下输出。它甚至说文件不是最新的，尽管它是：

```
Foo/Name with spaces is not up to date, moving to next file.
processing Foo/Name with spaces/file #1.txt
filestatus: Foo/Name: File doesn't exist
with:                 File doesn't exist
spaces/file:          File doesn't exist
Foo/Name with spaces/file #1.txt is not up to date, moving to next file. 
```

任何建议如何改进和修复代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:02:45.713

像这样将所有出现的 o`#{item}`括在单引号中`'#{item}'`。例如：

```
fileStatus = `~/bin/dropbox.py filestatus '#{item}'` 
```

您需要这样做，因为 bash（或您正在使用的任何 shell）以特殊方式解释空格。由于您的文件名本身包含一个空格，因此您需要对其进行转义。另见[3.3。引用](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_03.html)[Bash Guide for Beginners](http://tldp.org/LDP/Bash-Beginners-Guide/html/index.html)中的字符以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-28T16:46:20.623

您可以使用内置`shellescape`

```
fileStatus = `~/bin/dropbox.py filestatus #{item.shellescape}` 
```

[http://ruby-doc.org/stdlib-2.3.0/libdoc/shellwords/rdoc/Shellwords.html#method-c-shellescape](http://ruby-doc.org/stdlib-2.3.0/libdoc/shellwords/rdoc/Shellwords.html#method-c-shellescape)

# php - PHP显示空输出

> ID：15929413
> 
> 赞同：0
> 
> 时间：2013-04-10T14:57:31.087
> 
> 标签：php, android

我正在编写一个 android 应用程序来检索属于特定用户的数据。我在 Activity2 中使用 Activity1 的 SharedPreference。

这是我存储在 Activity1 中的 SharedPreference

```
SharedPreferences sp = getSharedPreferences("login details", 0);
SharedPreferences.Editor spedit = sp.edit();
spedit.putString("sPhone",sPhone);              
spedit.putString("sPassword", sPassword);
spedit.commit(); 
```

我在 Activity2 中使用上述 SharedPreference 并将其作为字符串发送到 PHP 文件： Activity2 代码：

```
SharedPreferences prefs = getSharedPreferences("login details", 0);
String str = prefs.getString("sPhone", "");

nameValuePairs.add(new BasicNameValuePair("userid", str));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
httppost.setHeader("Content-type", "application/json");
response = httpclient.execute(httppost);
entity = response.getEntity();
is = entity.getContent(); 
```

这是PHP代码：

```
<?php
mysql_connect("localhost","root","");
mysql_select_db("assigndroid");
header('content-type=application/json; charset=utf-8');

//$userID = isset($_POST['userid']) ? $_POST['userid'] : '';
$userID = mysql_real_escape_string($_POST['userid']);   

$sql=mysql_query("select * from newassignment where issuedBy='$userID';");
while($row=mysql_fetch_assoc($sql))
    $output[]=$row;
print(json_encode($output));
mysql_close();
?> 
```

但 SQL 查询返回“null”。我收到一条错误消息“未定义的变量输出”。由于这个空值，应用程序通过说“FATAL EXCEPTION AsyncTask #1”在模拟器上崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:06:46.267

您需要先在 PHP 中声明您的数组，然后再尝试为其附加一个值：

```
// ...

$output = array(); // Add this line
while($row=mysql_fetch_assoc($sql))
    $output[]=$row;

// ... 
```

如果这样做，错误将消失，输出将不再是无效的 JSON。

但是，请注意，[`display_errors`](http://php.net/display-errors)无论如何您都应该在生产中禁用，因为错误可能会暴露有关您的应用程序的信息，进而可能会将攻击向量暴露给恶意用户。

您还将请求内容类型设置为`application/json`，但您传递的数据的实际类型是`application/x-www-form-urlencoded`。PHP 不会解码您发送的数据，`$_POST`也不会被填充。更改请求内容类型：

```
httppost.setHeader("Content-type", "application/x-www-form-urlencoded"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:12:09.447

DaveRandom 所说的关于首先声明你的数组，但你也应该检查查询是否真的*成功*。是的，当您手动运行它时它可以工作，但这并不能保证其他地方出了问题，例如从您的 Android 客户端获取奇怪的数据。

例如：

```
if( $sql = mysql_query("select * from newassignment where issuedBy='$userID';") ) {
  while($row = mysql_fetch_assoc($sql)) {
    $output[] = $row;
  }
  print(json_encode($output));
} else {
  print(json_encode('query failed: ' . mysql_error()));
}
mysql_close(); 
```

另外，停止使用`mysql_*`函数。Blah blah 弃用 blah SQL 注入，你知道整个歌舞......

# javascript - 正则表达式：如何从 '+key:value+key2:"value+value"+' 中提取键和值？

> ID：15929414
> 
> 赞同：0
> 
> 时间：2013-04-10T14:57:31.800
> 
> 标签：javascript, regex

如果我有一个输入字符串，如：`+key:value+key2:"value+value"+`我想要一个返回以下形式的正则表达式我：`key:value`和`key:"value+value"`

理想情况下，我想将它包装在一个返回如下对象的函数中：

```
{
  key: 'value',
  key2: 'value+value'
} 
```

基本上价值可以是任何东西——任何字符。这里唯一的规则实际上是当值内有一个 + 号时，这不应该分隔正则表达式操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:05:08.720

```
function parseRagulkasString(str) {
    var regex = /\+([^:]+):((?!")[^+]*|"([^"]*)")/g, o = {}, match;
    while ((match = regex.exec(str)) !== null)
        o[match[1]] = match[match[3] === undefined ? 2 : 3];
    return o;
} 
```

演示：http: [//jsfiddle.net/NRhST/2/](http://jsfiddle.net/NRhST/2/)

### 解释

*   `\+`匹配文字加号。
*   `([^:]+)`匹配任何非`:`符号，并被捕获为第一组。
*   `:`匹配文字冒号。
*   `( ... )`捕获第二组：
    *   `(?!")[^+]*`如果后面没有引号，则匹配所有连续的非加号字符。
    *   `|`否则
    *   `"([^"]*)"`匹配引号内的所有非引号字符，并捕获该组 (3)。

while 循环重复运行输入字符串的正则表达式，并按如下方式处理所有匹配项：

*   `match[1]`是第一个捕获的组，并用作键。
*   如果值没有被引用，`match[3]`is`undefined`和`match[2]`is 值。
*   否则，`match[3]`包含引号内的内容，并`match[2]`包含包含引号的内容。

例如 ( `+key:value+key2:"value+value"+`)：

```
match[0] = 'key:value'   match[0] = 'key2:"value+value"'
match[1] = 'key'         match[1] = 'key2'
match[2] = 'value'       match[2] = '"value+value"'
match[3] = undefined     match[3] = 'value+value' 
```

因为`match[2]`只有当值没有被引用时才有意义，所以我们首先检查 if `match[3]`is `undefined`。如果是，则不引用该值，我们使用第二组。否则，使用第三组。

注意：此实现需要问题中指定的格式（最后一个加号是可选的）。您可以使用以下方法验证输入字符串是否与预期格式匹配：

```
function isRagulkasString(str) {
    return /^(\+[^:]+:((?!")[^+]*|"[^"]*"))+\+?$/.test(str);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:07:11.427

为此使用正则表达式并不是最简单的解决方案。

这是一个解决方案：

```
var str = '+key:value+key2:"value+value"+';
var o = {};
str.split('"').map(function(v,i){
  return i%2 ? v.replace(/\+/, 'ù') : v
}).join('').split('+').forEach(function(v){
  var t = v.split(':');
  if (t.length==2) o[t[0]]=t[1].replace(/ù/,'+');
});
console.log(o); 
```

它假设您`ù`的字符串中没有。如果是这种情况，可能会调整代码以使用另一个（更长的）分隔符。

[演示](http://jsbin.com/iyimaz/1/edit)（打开控制台）

请注意，如果您想与 IE8 兼容，则必须使用`for`循环而不是`forEach`.

# regex - 如何在sed中匹配没有一些字符串的行

> ID：15929417
> 
> 赞同：0
> 
> 时间：2013-04-10T14:57:33.217
> 
> 标签：regex, linux, sed

我试图打印出文件夹下每个文件的第一行（以 > 开头，因为文件是 fasta 文件），并使用 sed 提取出没有质粒和片段的那些行。

我做了`ls * | xargs -I one sed -n -e '/^>.*[^fragment|plasmid].*/p' one > outfile` ，但它不工作？我应该如何修改它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:58:33.780

如果该行不包含片段或质粒，我是否认为您只想打印每个文件的第一行？那就是：

```
awk 'FNR==1 && !/fragment|plasmid/' * 
```

如果这不是您想要的，请使用一些具有代表性的示例输入和预期输出来更新您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:00:43.717

这对你有用吗？

```
head -q -n 1 * | egrep -v "^>.*(fragment|plasmid).*" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:39:35.670

如果我将您的要求读作以 > 开头的打印行，除非它们包含片段或质粒，那么我认为这将为您做到：

```
sed -ne '/^>/{/fragment/;b;/plasmid/b;p;}' one > outfile 
```

它忽略所有不以 > 开头的行，如果找到片段或质粒，它会跳到脚本的末尾并转到下一行。

# php - 从单个数组构建多维

> ID：15929440
> 
> 赞同：0
> 
> 时间：2013-04-10T14:58:21.410
> 
> 标签：php, arrays, multidimensional-array

**大纲**

在花了 2 天的时间试图让它工作之后......

**解决方案**

我想将我的数组重组为具有以下结构的多维数组：

```
 Level 1 -> All level 1s
       Level 2 -> All level 2s
               Level 3 -> Each level Three Item
               Level 3 -> Each level Three Item
       Level 2 -> All level 2s
               Level 3 -> Each level Three Item
               Level 3 -> Each level Three Item
 Level 1 -> All level 1s
       Level 2 -> All level 2s
               Level 3 -> Each level Three Item
               Level 3 -> Each level Three Item
       Level 2 -> All level 2s
               Level 3 -> Each level Three Item
               Level 3 -> Each level Three Item 
```

**数据**

数据按我需要的顺序写入。例如，所有`level 2`直接位于`Level 1`其父级中的应该站点下方的所有内容，`Level 1`直到下一个`Level 1`出现在数据中。`Level 2`这对于和应该是相同的`3`。基本上在出现更高的数字之前，它应该开始新的一行。

我有很多不同的值，下面的数据只是一个例子。数组内部是`level`指它应该位于哪个级别。

```
 array (
      0 => 
      array (
        'key' => 0,
        'id' => '7',
        'level' => '1',
        'name' => 'About Me',
      ),
      1 => 
      array (
        'key' => 1,
        'id' => '78',
        'level' => '2',
        'name' => 'My Conduct at Work',
      ),
      2 => 
      array (
        'key' => 2,
        'id' => '270',
        'level' => '3',
        'name' => 'Dispute Resolution/Grievance',
      ),
      3 => 
      array (
        'key' => 3,
        'id' => 'TBC',
        'level' => '3',
        'name' => 'Learn More',
      ),
      4 => 
      array (
        'key' => 4,
        'id' => '77',
        'level' => '2',
        'name' => 'My Environment, Health & Safety',
      ),
      5 => 
      array (
        'key' => 5,
        'id' => 'TBC',
        'level' => '3',
        'name' => 'Learn More',
      ),
      6 => 
      array (
        'key' => 6,
        'id' => '238',
        'level' => '3',
        'name' => 'Policies and Guidance',
      ),
      7 => 
      array (
        'key' => 7,
        'id' => '79',
        'level' => '2',
        'name' => 'My GSK Employment Journey',
      ),
      8 => 
      array (
        'key' => 8,
        'id' => '274',
        'level' => '3',
        'name' => 'Changes in Role',
      ),
      9 => 
      array (
        'key' => 9,
        'id' => '275',
        'level' => '3',
        'name' => 'Leaving GSK',
      ),
      10 => 
      array (
        'key' => 10,
        'id' => '273',
        'level' => '3',
        'name' => 'My Moves',
      ),
      11 => 
      array (
        'key' => 11,
        'id' => '272',
        'level' => '3',
        'name' => 'Starting at GSK',
      ),
      12 => 
      array (
        'key' => 12,
        'id' => '80',
        'level' => '2',
        'name' => 'My Personal Information',
      ),
      13 => 
      array (
        'key' => 13,
        'id' => 'TBC',
        'level' => '3',
        'name' => 'Learn More',
      ),
      14 => 
      array (
        'key' => 14,
        'id' => '276',
        'level' => '3',
        'name' => 'Manage my Personal Information',
      ),
      15 => 
      array (
        'key' => 15,
        'id' => '76',
        'level' => '2',
        'name' => 'My Talent, Performance & Development',
      ),
      16 => 
      array (
        'key' => 16,
        'id' => '266',
        'level' => '3',
        'name' => 'My Development',
      ),
      17 => 
      array (
        'key' => 17,
        'id' => '268',
        'level' => '3',
        'name' => 'My Learning',
      ),
      18 => 
      array (
        'key' => 18,
        'id' => '267',
        'level' => '3',
        'name' => 'My Performance',
      ),
      19 => 
      array (
        'key' => 19,
        'id' => '75',
        'level' => '2',
        'name' => 'My TotalReward',
      ),
      20 => 
      array (
        'key' => 20,
        'id' => '287',
        'level' => '3',
        'name' => 'Learn More My Benefits',
      ),
      21 => 
      array (
        'key' => 21,
        'id' => '288',
        'level' => '3',
        'name' => 'Learn More My Pay',
      ),
      22 => 
      array (
        'key' => 22,
        'id' => '264',
        'level' => '3',
        'name' => 'My Benefits',
      ),
      23 => 
      array (
        'key' => 23,
        'id' => '263',
        'level' => '3',
        'name' => 'My Pay',
      ),
      24 => 
      array (
        'key' => 24,
        'id' => '265',
        'level' => '3',
        'name' => 'My Recognition',
      ),
      25 => 
      array (
        'key' => 25,
        'id' => '81',
        'level' => '2',
        'name' => 'Time Off, Time & Attendance',
      ),
      26 => 
      array (
        'key' => 26,
        'id' => '281',
        'level' => '3',
        'name' => 'Flexible Working',
      ),
      27 => 
      array (
        'key' => 27,
        'id' => 'TBC',
        'level' => '3',
        'name' => 'Learn More',
      ),
      28 => 
      array (
        'key' => 28,
        'id' => '279',
        'level' => '3',
        'name' => 'Leave of Absence',
      ),
      29 => 
      array (
        'key' => 29,
        'id' => '280',
        'level' => '3',
        'name' => 'Time & Attendance',
      ),
      30 => 
      array (
        'key' => 30,
        'id' => '278',
        'level' => '3',
        'name' => 'Time Off',
      ),
      31 => 
      array (
        'key' => 31,
        'id' => '1',
        'level' => '1',
        'name' => 'Buying and Paying',
      ),
      32 => 
      array (
        'key' => 32,
        'id' => '1',
        'level' => '2',
        'name' => 'Budget Management',
      ),
      33 => 
      array (
        'key' => 33,
        'id' => '1',
        'level' => '3',
        'name' => 'Asset scrapping or sale (equipment, PC â€¦)',
      ),
      34 => 
      array (
        'key' => 34,
        'id' => '221',
        'level' => '3',
        'name' => 'Cost center creation & change',
      ),
      35 => 
      array (
        'key' => 35,
        'id' => '2',
        'level' => '3',
        'name' => 'Finance Partner',
      ),
      36 => 
      array (
        'key' => 36,
        'id' => '3',
        'level' => '3',
        'name' => 'Operating Budget',
      ),
      37 => 
      array (
        'key' => 37,
        'id' => '222',
        'level' => '3',
        'name' => 'Provision request',
      ),
      38 => 
      array (
        'key' => 38,
        'id' => '4',
        'level' => '3',
        'name' => 'X-charge (Cost Transfer)',
      ),
      39 => 
      array (
        'key' => 39,
        'id' => '3',
        'level' => '2',
        'name' => 'Checks, GOA & X-Charge',
      ),
      40 => 
      array (
        'key' => 40,
        'id' => '10',
        'level' => '3',
        'name' => 'Check Requests',
      ),
      41 => 
      array (
        'key' => 41,
        'id' => '11',
        'level' => '3',
        'name' => 'Collections, credits and debts',
      ),
      42 => 
      array (
        'key' => 42,
        'id' => '12',
        'level' => '3',
        'name' => 'Discounts, Rebates, Commissions and Allowances',
      ),
      43 => 
      array (
        'key' => 43,
        'id' => '217',
        'level' => '3',
        'name' => 'Grant of Authority',
      ),
      44 => 
      array (
        'key' => 44,
        'id' => '4',
        'level' => '3',
        'name' => 'X-charge (Cost Transfer)',
      ),
      45 => 
      array (
        'key' => 45,
        'id' => '6',
        'level' => '2',
        'name' => 'Finance for Finance',
      ),
      46 => 
      array (
        'key' => 46,
        'id' => '241',
        'level' => '3',
        'name' => 'Finance Assurance',
      ),
      47 => 
      array (
        'key' => 47,
        'id' => '22',
        'level' => '3',
        'name' => 'Order to Cash',
      ),
      48 => 
      array (
        'key' => 48,
        'id' => '23',
        'level' => '3',
        'name' => 'R2R - Group Consolidation and Intercompany Profit',
      ),
      49 => 
      array (
        'key' => 49,
        'id' => '24',
        'level' => '3',
        'name' => 'R2R - Management Reporting',
      ),
      50 => 
      array (
        'key' => 50,
        'id' => '25',
        'level' => '3',
        'name' => 'R2R - Record, Forms & Reports',
      ),
      51 => 
      array (
        'key' => 51,
        'id' => '251',
        'level' => '3',
        'name' => 'R2R - Record, General Information',
      ),
      52 => 
      array (
        'key' => 52,
        'id' => '252',
        'level' => '3',
        'name' => 'R2R - Record, Get Help',
      ),
      53 => 
      array (
        'key' => 53,
        'id' => '26',
        'level' => '3',
        'name' => 'R2R - Statutory Reporting',
      ),
      54 => 
      array (
        'key' => 54,
        'id' => '27',
        'level' => '3',
        'name' => 'R2R - Technical Accounting',
      ),
      55 => 
      array (
        'key' => 55,
        'id' => '28',
        'level' => '3',
        'name' => 'Supply Chain Accounting',
      ),
      56 => 
      array (
        'key' => 56,
        'id' => '65',
        'level' => '2',
        'name' => 'Invoice and Supplier Services',
      ),
      57 => 
      array (
        'key' => 57,
        'id' => '13',
        'level' => '3',
        'name' => 'Invoice and Supplier Services',
      ),
      58 => 
      array (
        'key' => 58,
        'id' => '93',
        'level' => '2',
        'name' => 'Mergers, Acquisitions and Divestments Support',
      ),
      59 => 
      array (
        'key' => 59,
        'id' => '317',
        'level' => '3',
        'name' => 'Engage with MAD',
      ),
      60 => 
      array (
        'key' => 60,
        'id' => 'TBC',
        'level' => '3',
        'name' => 'Learn More',
      ),
      61 => 
      array (
        'key' => 61,
        'id' => '66',
        'level' => '2',
        'name' => 'Procurement Card',
      ),
      62 => 
      array (
        'key' => 62,
        'id' => '14',
        'level' => '3',
        'name' => 'Procurement Card Program',
      ),
      63 => 
      array (
        'key' => 63,
        'id' => '10',
        'level' => '2',
        'name' => 'Procurement for Procurement',
      ),
      64 => 
      array (
        'key' => 64,
        'id' => '49',
        'level' => '3',
        'name' => 'Contract Management',
      ),
      65 => 
      array (
        'key' => 65,
        'id' => '50',
        'level' => '3',
        'name' => 'Market Intelligence/Research Portal',
      ),
      66 => 
      array (
        'key' => 66,
        'id' => '325',
        'level' => '3',
        'name' => 'Procurement Training',
      ),
      67 => 
      array (
        'key' => 67,
        'id' => '51',
        'level' => '3',
        'name' => 'Risk Management',
      ),
      68 => 
      array (
        'key' => 68,
        'id' => '52',
        'level' => '3',
        'name' => 'Spend Analytics',
      ),
      69 => 
      array (
        'key' => 69,
        'id' => '53',
        'level' => '3',
        'name' => 'Supplier Diversity & Development Support',
      ),
      70 => 
      array (
        'key' => 70,
        'id' => '54',
        'level' => '3',
        'name' => 'Supplier Relationship & Performance Management',
      ),
      71 => 
      array (
        'key' => 71,
        'id' => '64',
        'level' => '2',
        'name' => 'Purchases',
      ),
      72 => 
      array (
        'key' => 72,
        'id' => '9',
        'level' => '3',
        'name' => 'Buy Something',
      ),
      73 => 
      array (
        'key' => 73,
        'id' => '259',
        'level' => '3',
        'name' => 'Learn About',
      ),
      74 => 
      array (
        'key' => 74,
        'id' => '3',
        'level' => '1',
        'name' => 'Expenses & Travel',
      ),
      75 => 
      array (
        'key' => 75,
        'id' => '69',
        'level' => '2',
        'name' => 'Book a Flight',
      ),
      76 => 
      array (
        'key' => 76,
        'id' => '72',
        'level' => '3',
        'name' => 'Airline Reservations',
      ),
      77 => 
      array (
        'key' => 77,
        'id' => '71',
        'level' => '2',
        'name' => 'Book a Ground Transportaion',
      ),
      78 => 
      array (
        'key' => 78,
        'id' => '319',
        'level' => '3',
        'name' => 'Rail',
      ),
      79 => 
      array (
        'key' => 79,
        'id' => '76',
        'level' => '3',
        'name' => 'Taxi, Chauffeur & Limousine Services',
      ),
      80 => 
      array (
        'key' => 80,
        'id' => '70',
        'level' => '2',
        'name' => 'Book a Hotel',
      ),
      81 => 
      array (
        'key' => 81,
        'id' => '75',
        'level' => '3',
        'name' => 'Hotel Room Booking',
      ),
      82 => 
      array (
        'key' => 82,
        'id' => '67',
        'level' => '2',
        'name' => 'Credit Card',
      ),
      83 => 
      array (
        'key' => 83,
        'id' => '68',
        'level' => '3',
        'name' => 'Amex',
      ),
      84 => 
      array (
        'key' => 84,
        'id' => '13',
        'level' => '2',
        'name' => 'Expense Policies and Information',
      ),
      85 => 
      array (
        'key' => 85,
        'id' => '69',
        'level' => '3',
        'name' => 'Expense Policies',
      ),
      86 => 
      array (
        'key' => 86,
        'id' => '71',
        'level' => '3',
        'name' => 'VAT Reclaim',
      ),
      87 => 
      array (
        'key' => 87,
        'id' => '68',
        'level' => '2',
        'name' => 'Report Expenses',
      ),
      88 => 
      array (
        'key' => 88,
        'id' => '70',
        'level' => '3',
        'name' => 'Report Expenses',
      ),
      89 => 
      array (
        'key' => 89,
        'id' => '15',
        'level' => '2',
        'name' => 'Travel Information',
      ),
      90 => 
      array (
        'key' => 90,
        'id' => '73',
        'level' => '3',
        'name' => 'Benefits Administration and Management (UK/US)',
      ),
      91 => 
      array (
        'key' => 91,
        'id' => '74',
        'level' => '3',
        'name' => 'Commuter Services/Shuttle Busses',
      ),
      92 => 
      array (
        'key' => 92,
        'id' => '77',
        'level' => '3',
        'name' => 'Health while travelling',
      ),
      93 => 
      array (
        'key' => 93,
        'id' => '320',
        'level' => '3',
        'name' => 'Travel Alerts',
      ),
      94 => 
      array (
        'key' => 94,
        'id' => '14',
        'level' => '2',
        'name' => 'Travel Insurances',
      ),
      95 => 
      array (
        'key' => 95,
        'id' => '65',
        'level' => '3',
        'name' => 'Loss and theft',
      ),
      96 => 
      array (
        'key' => 96,
        'id' => '66',
        'level' => '3',
        'name' => 'Material damages insurance',
      ),
      97 => 
      array (
        'key' => 97,
        'id' => '67',
        'level' => '3',
        'name' => 'Travel insurance for personal injury',
      ),
      98 => 
      array (
        'key' => 98,
        'id' => '4',
        'level' => '1',
        'name' => 'IT Services & Access',
      ),
      99 => 
      array (
        'key' => 99,
        'id' => '16',
        'level' => '2',
        'name' => 'Basic IT Access',
      ),
      100 => 
      array (
        'key' => 100,
        'id' => '78',
        'level' => '3',
        'name' => 'Getting an ID',
      ),
      101 => 
      array (
        'key' => 101,
        'id' => '254',
        'level' => '3',
        'name' => 'Remote Access Tokens',
      ),
      102 => 
      array (
        'key' => 102,
        'id' => '79',
        'level' => '3',
        'name' => 'Request Access',
      ),
      103 => 
      array (
        'key' => 103,
        'id' => '255',
        'level' => '3',
        'name' => 'Request Access - Unix, Linux, VAX, AS400',
      ),
      104 => 
      array (
        'key' => 104,
        'id' => '23',
        'level' => '2',
        'name' => 'Business Unit Systems',
      ),
      105 => 
      array (
        'key' => 105,
        'id' => '93',
        'level' => '3',
        'name' => 'Corporate Finance Systems',
      ),
      106 => 
      array (
        'key' => 106,
        'id' => '84',
        'level' => '3',
        'name' => 'Customer Relationship Management & Marketing Systems',
      ),
      107 => 
      array (
        'key' => 107,
        'id' => '120',
        'level' => '3',
        'name' => 'Discovery Systems',
      ),
      108 => 
      array (
        'key' => 108,
        'id' => '94',
        'level' => '3',
        'name' => 'Global Finance Systems',
      ),
      109 => 
      array (
        'key' => 109,
        'id' => '125',
        'level' => '3',
        'name' => 'HH and EHS Systems',
      ),
      110 => 
      array (
        'key' => 110,
        'id' => '118',
        'level' => '3',
        'name' => 'IT support for audits and inspections',
      ),
      111 => 
      array (
        'key' => 111,
        'id' => '127',
        'level' => '3',
        'name' => 'Legal & Procurement Systems',
      ),
      112 => 
      array (
        'key' => 112,
        'id' => '95',
        'level' => '3',
        'name' => 'Make MRP Services Systems',
      ),
      113 => 
      array (
        'key' => 113,
        'id' => '85',
        'level' => '3',
        'name' => 'Market and Sell systems',
      ),
      114 => 
      array (
        'key' => 114,
        'id' => '121',
        'level' => '3',
        'name' => 'Medical Systems',
      ),
      115 => 
      array (
        'key' => 115,
        'id' => '96',
        'level' => '3',
        'name' => 'Pack & Move Services Systems',
      ),
      116 => 
      array (
        'key' => 116,
        'id' => '86',
        'level' => '3',
        'name' => 'PPV & Sales Reporting & Compliance Systems',
      ),
      117 => 
      array (
        'key' => 117,
        'id' => '122',
        'level' => '3',
        'name' => 'Pre-Clinical Systems',
      ),
      118 => 
      array (
        'key' => 118,
        'id' => '119',
        'level' => '3',
        'name' => 'Quality, Risk & Analytics Systems',
      ),
      119 => 
      array (
        'key' => 119,
        'id' => '312',
        'level' => '3',
        'name' => 'SAP Commercial',
      ),
      120 => 
      array (
        'key' => 120,
        'id' => '128',
        'level' => '3',
        'name' => 'SAP Manufacturing',
      ),
      121 => 
      array (
        'key' => 121,
        'id' => '129',
        'level' => '3',
        'name' => 'Supply Chain Planning Services Systems',
      ),
      122 => 
      array (
        'key' => 122,
        'id' => '123',
        'level' => '3',
        'name' => 'Test Lab Systems & Support',
      ),
      123 => 
      array (
        'key' => 123,
        'id' => '27',
        'level' => '2',
        'name' => 'Desk Phones, Smartphones & Tablets',
      ),
      124 => 
      array (
        'key' => 124,
        'id' => '110',
        'level' => '3',
        'name' => 'Desk Phone',
      ),
      125 => 
      array (
        'key' => 125,
        'id' => '111',
        'level' => '3',
        'name' => 'Fax',
      ),
      126 => 
      array (
        'key' => 126,
        'id' => '247',
        'level' => '3',
        'name' => 'IP Phone Communicator Configuration',
      ),
      127 => 
      array (
        'key' => 127,
        'id' => '112',
        'level' => '3',
        'name' => 'IP Phone Communicator Help & How To',
      ),
      128 => 
      array (
        'key' => 128,
        'id' => '104',
        'level' => '3',
        'name' => 'Mobile and Smart phones',
      ),
      129 => 
      array (
        'key' => 129,
        'id' => '250',
        'level' => '3',
        'name' => 'Ordering an IP Phone and Headsets',
      ),
      130 => 
      array (
        'key' => 130,
        'id' => '107',
        'level' => '3',
        'name' => 'Synchronization with MS Outlook',
      ),
      131 => 
      array (
        'key' => 131,
        'id' => '108',
        'level' => '3',
        'name' => 'Tablets',
      ),
      132 => 
      array (
        'key' => 132,
        'id' => '113',
        'level' => '3',
        'name' => 'Teleconference solution choice',
      ),
      133 => 
      array (
        'key' => 133,
        'id' => '114',
        'level' => '3',
        'name' => 'Video phone',
      ),
      134 => 
      array (
        'key' => 134,
        'id' => '109',
        'level' => '3',
        'name' => 'Wifi Guest for Smartphone',
      ),
      135 => 
      array (
        'key' => 135,
        'id' => '18',
        'level' => '2',
        'name' => 'EMail and Collaboration',
      ),
      136 => 
      array (
        'key' => 136,
        'id' => '87',
        'level' => '3',
        'name' => 'Distribution lists',
      ),
      137 => 
      array (
        'key' => 137,
        'id' => '324',
        'level' => '3',
        'name' => 'Effective Collaboration',
      ),
      138 => 
      array (
        'key' => 138,
        'id' => '88',
        'level' => '3',
        'name' => 'Filtering spam',
      ),
      139 => 
      array (
        'key' => 139,
        'id' => '89',
        'level' => '3',
        'name' => 'Group mailbox',
      ),
      140 => 
      array (
        'key' => 140,
        'id' => '80',
        'level' => '3',
        'name' => 'Live Meeting',
      ),
      141 => 
      array (
        'key' => 141,
        'id' => '90',
        'level' => '3',
        'name' => 'Lotus Notes',
      ),
      142 => 
      array (
        'key' => 142,
        'id' => '81',
        'level' => '3',
        'name' => 'Office communicator',
      ),
      143 => 
      array (
        'key' => 143,
        'id' => '91',
        'level' => '3',
        'name' => 'Outlook Mailbox & calendar',
      ),
      144 => 
      array (
        'key' => 144,
        'id' => '92',
        'level' => '3',
        'name' => 'Securing email',
      ),
      145 => 
      array (
        'key' => 145,
        'id' => '83',
        'level' => '3',
        'name' => 'Videoconference',
      ),
      146 => 
      array (
        'key' => 146,
        'id' => '19',
        'level' => '2',
        'name' => 'Hardware',
      ),
      147 => 
      array (
        'key' => 147,
        'id' => '97',
        'level' => '3',
        'name' => 'Borrow hardware',
      ),
      148 => 
      array (
        'key' => 148,
        'id' => '98',
        'level' => '3',
        'name' => 'Buy Hardware',
      ),
      149 => 
      array (
        'key' => 149,
        'id' => '99',
        'level' => '3',
        'name' => 'Move hardware',
      ),
      150 => 
      array (
        'key' => 150,
        'id' => '100',
        'level' => '3',
        'name' => 'Protect computer',
      ),
      151 => 
      array (
        'key' => 151,
        'id' => '101',
        'level' => '3',
        'name' => 'Repair hardware',
      ),
      152 => 
      array (
        'key' => 152,
        'id' => '102',
        'level' => '3',
        'name' => 'Smartphone and Mobile Devices',
      ),
      153 => 
      array (
        'key' => 153,
        'id' => '103',
        'level' => '3',
        'name' => 'Upgrade computer',
      ),
      154 => 
      array (
        'key' => 154,
        'id' => '8',
        'level' => '2',
        'name' => 'IT for IT',
      ),
      155 => 
      array (
        'key' => 155,
        'id' => '35',
        'level' => '3',
        'name' => 'Application Infrastructure Provisioning',
      ),
      156 => 
      array (
        'key' => 156,
        'id' => '216',
        'level' => '3',
        'name' => 'Application, Process and Data Integration',
      ),
      157 => 
      array (
        'key' => 157,
        'id' => '42',
        'level' => '3',
        'name' => 'Connect to or from External Partners',
      ),
      158 => 
      array (
        'key' => 158,
        'id' => '36',
        'level' => '3',
        'name' => 'Data Center Operations and Facilities',
      ),
      159 => 
      array (
        'key' => 159,
        'id' => '37',
        'level' => '3',
        'name' => 'Database Services',
      ),
      160 => 
      array (
        'key' => 160,
        'id' => '47',
        'level' => '3',
        'name' => 'Hosting Services',
      ),
      161 => 
      array (
        'key' => 161,
        'id' => '321',
        'level' => '3',
        'name' => 'Infrastructure Services',
      ),
      162 => 
      array (
        'key' => 162,
        'id' => '39',
        'level' => '3',
        'name' => 'IT Audit and Risk',
      ),
      163 => 
      array (
        'key' => 163,
        'id' => '40',
        'level' => '3',
        'name' => 'Malicious Code Management',
      ),
      164 => 
      array (
        'key' => 164,
        'id' => '41',
        'level' => '3',
        'name' => 'Network Services',
      ),
      165 => 
      array (
        'key' => 165,
        'id' => '326',
        'level' => '3',
        'name' => 'Optimise Application Performance',
      ),
      166 => 
      array (
        'key' => 166,
        'id' => '28',
        'level' => '2',
        'name' => 'Printer, archiving & scanning',
      ),
      167 => 
      array (
        'key' => 167,
        'id' => '115',
        'level' => '3',
        'name' => 'Archiving',
      ),
      168 => 
      array (
        'key' => 168,
        'id' => '116',
        'level' => '3',
        'name' => 'Desk Printers',
      ),
      169 => 
      array (
        'key' => 169,
        'id' => '117',
        'level' => '3',
        'name' => 'Printing & scanning',
      ),
      170 => 
      array (
        'key' => 170,
        'id' => '74',
        'level' => '2',
        'name' => 'Remote Access Tokens',
      ),
      171 => 
      array (
        'key' => 171,
        'id' => '11',
        'level' => '2',
        'name' => 'Reporting and Data Management',
      ),
      172 => 
      array (
        'key' => 172,
        'id' => '55',
        'level' => '3',
        'name' => 'BI/DW (Business Intelligence/Data Warehouse)',
      ),
      173 => 
      array (
        'key' => 173,
        'id' => '242',
        'level' => '3',
        'name' => 'Business Objects Application',
      ),
      174 => 
      array (
        'key' => 174,
        'id' => '56',
        'level' => '3',
        'name' => 'CERPS Data Management Service (CDMO)',
      ),
      175 => 
      array (
        'key' => 175,
        'id' => '243',
        'level' => '3',
        'name' => 'Cognos Application',
      ),
      176 => 
      array (
        'key' => 176,
        'id' => '244',
        'level' => '3',
        'name' => 'Cognos Planning Application',
      ),
      177 => 
      array (
        'key' => 177,
        'id' => '245',
        'level' => '3',
        'name' => 'DataStage Application',
      ),
      178 => 
      array (
        'key' => 178,
        'id' => '246',
        'level' => '3',
        'name' => 'DataWarehouse Service',
      ),
      179 => 
      array (
        'key' => 179,
        'id' => '57',
        'level' => '3',
        'name' => 'ONE Service',
      ),
      180 => 
      array (
        'key' => 180,
        'id' => '29',
        'level' => '2',
        'name' => 'Software',
      ),
      181 => 
      array (
        'key' => 181,
        'id' => '313',
        'level' => '3',
        'name' => 'Manage AIT',
      ),
      182 => 
      array (
        'key' => 182,
        'id' => '124',
        'level' => '3',
        'name' => 'Requesting or Removing Software',
      ),
      183 => 
      array (
        'key' => 183,
        'id' => '30',
        'level' => '2',
        'name' => 'Wi-Fi & internet',
      ),
      184 => 
      array (
        'key' => 184,
        'id' => '131',
        'level' => '3',
        'name' => 'GSK network for business partners',
      ),
      185 => 
      array (
        'key' => 185,
        'id' => '132',
        'level' => '3',
        'name' => 'Wifi for visitors',
      ),
      186 => 
      array (
        'key' => 186,
        'id' => '133',
        'level' => '3',
        'name' => 'Wifi in the office',
      ),
      187 => 
      array (
        'key' => 187,
        'id' => '134',
        'level' => '3',
        'name' => 'Working from Home',
      ),
      188 => 
      array (
        'key' => 188,
        'id' => '135',
        'level' => '3',
        'name' => 'Working in the Office',
      ),
      189 => 
      array (
        'key' => 189,
        'id' => '5',
        'level' => '1',
        'name' => 'My Team',
      ),
      190 => 
      array (
        'key' => 190,
        'id' => '88',
        'level' => '2',
        'name' => 'Environment, Health & Safety',
      ),
      191 => 
      array (
        'key' => 191,
        'id' => 'TBC',
        'level' => '3',
        'name' => 'Learn More',
      ),
      192 => 
      array (
        'key' => 192,
        'id' => '89',
        'level' => '2',
        'name' => 'My Teams\' Conduct at Work',
      ),
      193 => 
      array (
        'key' => 193,
        'id' => '296',
        'level' => '3',
        'name' => 'Code of Conduct',
      ),
      194 => 
      array (
        'key' => 194,
        'id' => '294',
        'level' => '3',
        'name' => 'Disciplinary',
      ),
      195 => 
      array (
        'key' => 195,
        'id' => '270',
        'level' => '3',
        'name' => 'Dispute Resolution/Grievance',
      ),
      196 => 
      array (
        'key' => 196,
        'id' => 'TBC',
        'level' => '3',
        'name' => 'Learn More',
      ),
      197 => 
      array (
        'key' => 197,
        'id' => '90',
        'level' => '2',
        'name' => 'My Teams\' Employment Journey',
      ),
      198 => 
      array (
        'key' => 198,
        'id' => '301',
        'level' => '3',
        'name' => 'Changes',
      ),
      199 => 
      array (
        'key' => 199,
        'id' => '297',
        'level' => '3',
        'name' => 'Hiring',
      ),
      200 => 
      array (
        'key' => 200,
        'id' => 'TBC',
        'level' => '3',
        'name' => 'Learn More',
      ),
      201 => 
      array (
        'key' => 201,
        'id' => '275',
        'level' => '3',
        'name' => 'Leaving GSK',
      ),
      202 => 
      array (
        'key' => 202,
        'id' => '300',
        'level' => '3',
        'name' => 'Manage an International Assignment',
      ),
      203 => 
      array (
        'key' => 203,
        'id' => '141',
        'level' => '3',
        'name' => 'Onboarding',
      ),
      204 => 
      array (
        'key' => 204,
        'id' => '299',
        'level' => '3',
        'name' => 'Transfer/Promote/Change Job Permanent',
      ),
      205 => 
      array (
        'key' => 205,
        'id' => '298',
        'level' => '3',
        'name' => 'Transfer/Promote/Change Job Temporary',
      ),
      206 => 
      array (
        'key' => 206,
        'id' => '91',
        'level' => '2',
        'name' => 'Reporting , Data & Analytics',
      ),
      207 => 
      array (
        'key' => 207,
        'id' => 'TBC',
        'level' => '3',
        'name' => 'Learn More',
      ),
      208 => 
      array (
        'key' => 208,
        'id' => '304',
        'level' => '3',
        'name' => 'My Teams\' Information',
      ),
      209 => 
      array (
        'key' => 209,
        'id' => '303',
        'level' => '3',
        'name' => 'Workday Reporting',
      ),
      210 => 
      array (
        'key' => 210,
        'id' => '87',
        'level' => '2',
        'name' => 'Talent, Performance & Development',
      ),
      211 => 
      array (
        'key' => 211,
        'id' => '290',
        'level' => '3',
        'name' => 'Learning',
      ),
      212 => 
      array (
        'key' => 212,
        'id' => '291',
        'level' => '3',
        'name' => 'Performance & Development',
      ),
      213 => 
      array (
        'key' => 213,
        'id' => '292',
        'level' => '3',
        'name' => 'Talent',
      )
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:15:28.517

您可以尝试使用 PHP 链接[运算符 &](https://stackoverflow.com/questions/5930177/phps-operator)，尝试这样的事情：

```
 $collection = array();
    $list = yourArray[];
    foreach ($list as $item) {
      if (isset($list[$item['key']])) {
        $list[$item['key']]['levels'][$item['key']] =& $list[$item['key']];
      } else {
         $collection[$item['key']] =& $list[$item['key']];
      }
    } 
```

第二种变体

```
$row = array();
if (is_array($source) && !empty($source)) {
    foreach ($source as $item) {
        if (!isset($row[$item['level']])) {
            $row[$item['level']] = array($item['level']);
            $row[$item['level']]['parent'] = $item['level'] - 1;
        }
        if(isset($row[$item['level']])){
            $row[$item['level']]['child'][$item['key']] = $item;
        }
    }
    if(!empty($row)){
        foreach($row as $rowK => $rowV){
            if(isset($row[$rowV['parent']])){
                $row[$rowV['parent']]['level-' . $rowK][] =& $row[$rowK];
            } else {
                $collection[$rowK] =& $row[$rowK];
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:30:03.473

递归实体从来都不是一件容易的事，尤其是当您开始使用 PHP 时。

以下是一个简短的函数，它通过使用 php 引用来避免使用递归函数。引用可能会令人困惑，递归也是如此。最好的建议是阅读并尝试一些事情，以了解他们的行为方式。

下面的工作使用一个跟踪级别的堆栈，并不断引用最后一个级别以找到最新的父级。

```
function stackItems( $items ){
  $level = 0;
  $return = array();
  $stack = array(&$return);
  foreach ( $items as $key => $item ) {
    while ( $level >= $item['level'] ) {
      unset($stack[$level--]);
    }
    $parent = &$stack[$level];
    if ( !isset($parent['children']) ) {
      $parent['children'] = array();
    }
    $parent['children'][] = &$items[$key];
    if ( $item['level'] > $level ) {
      $level = $item['level'];
      $stack[$level] = &$items[$key];
    }
  }
  return $return['children'];
} 
```

带评论版本：

```
function stackItems( $items ){
  $level = 0;
  $return = array();
  /// build our stack with our return array as first item
  $stack = array(&$return);
  /// step each item
  foreach ( $items as $key => $item ) {
    /// if our next item is lower down than current 
    /// level, drop the stack down.
    while ( $level >= $item['level'] ) {
      /// we may as well unset to clear memory
      unset($stack[$level--]);
    }
    /// create a shortcut reference to our parent on the stack
    $parent = &$stack[$level];
    /// to avoid warnings create the children array first
    if ( !isset($parent['children']) ) {
      $parent['children'] = array();
    }
    /// now add ourselves to the current parent on the stack
    $parent['children'][] = &$items[$key];
    /// if our current item is higher level than current, add to
    /// the stack ready to be treated as the next parent.
    if ( $item['level'] > $level ) {
      /// level ourselves to the current item
      $level = $item['level'];
      /// store in the stack a reference to item
      $stack[$level] = &$items[$key];
    }
  }
  /// return the first set of children as there seems
  /// to be only one level 1 item.
  return $return['children'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:36:58.940

这就是我想出的......这不是一个非常有效的方法，但也许有人可以将它变成一个花哨的递归函数以使其抽象 - 我尝试了一点，但我真的很讨厌递归:-P

```
function cascade_array ($array, $current_level = 1) {

    // filter only the array elements with the level==current_level
    $chunks = array_filter ($array, function ($v) use ($current_level) { 
        return $v['level'] == 1; } 
    );

    // extract the keys from those elements an put them in reverse order
    $splice_keys = array_reverse(array_keys($chunks));

    // now splice the array at those keys and put the 
    // array-parts in a result-array, so you have an array of e.g. all level1
    foreach ($splice_keys as $offset) {

            $results[] = array_splice($array, $offset);
    }

    //now walk through the results and basically do the same
    foreach($results as &$level) {

        $level[0]['children'] = array();

        $array = array_splice($level, 1);
        $chunks = array_filter ($array, function ($v) use ($current_level) {  
            return $v['level'] == 2; } 
        );  
        $splice_keys = array_reverse(array_keys($chunks));

        foreach($splice_keys as $offset) {

            $level[0]['children'][] = array_splice($array, $offset);

        }

        foreach($level[0]['children'] as &$child_level) {

            $child_level[0]['children'] = array();

            $array = array_splice($child_level, 1);
            $chunks = array_filter ($array, function ($v) use ($current_level) {

                return $v['level'] == 3; } 
            );  
            $splice_keys = array_reverse(array_keys($chunks));

            foreach($splice_keys as $offset) {

                $child_level[0]['children'][] = array_splice($array, $offset);

            }

        }

    }

    return $results;

} 
```

我猜代码实际上非常简单。这是一个工作示例：[http](http://codepad.viper-7.com/kb5JBc) ://codepad.viper-7.com/kb5JBc - 我希望它有所帮助:)

# php - 在表单提交期间文件上传在什么时候发生？

> ID：15929442
> 
> 赞同：1
> 
> 时间：2013-04-10T14:58:29.573
> 
> 标签：php, html, ajax, file-upload

在 HTML 表单提交期间的什么时候将文件上传到服务器上的临时目录（特别是 PHP）？我有一个包含几个字段和文件上传的表单。我正在通过 AJAX 处理此表单。

我正在使用通过 AJAX 上传文件的第 3 方插件（使用 iFrame/xhr）。上传文件后，用户可以提交表单。从技术上讲，此文件输入字段位于表单内。当我通过 AJAX 处理时，我正在序列化整个表单（包括文件输入字段）的数据并发送出去进行处理。

我想知道的是；我应该在提交之前通过 JS 以编程方式清除文件输入字段，以防止客户端/服务器再次尝试文件上传吗？或者基于功能，在 AJAX 调用中是否完全忽略了该字段？

基本上我只是想确定，如果用户上传一个需要 10 秒才能上传的 3MB 文件，当他们实际提交表单（我通过 jQuery 捕获）时，即使文件实际上无法上传，他们是否必须在客户端发送文件时再等待 10 秒。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:02:43.883

如果您通过 AJAX 提交表单，您可以控制发送到服务器的内容。如果您使用`$('form').serialize()`，则文件内容将不会包含在序列化数据中，因此不...您不必清除该字段。只要确保您阻止了默认表单提交。

要防止默认表单提交，您应该执行以下操作：

```
$('form').on('submit', function(event) {
    event.preventDefault();

    // the rest of your form submission stuff,
    // including your AJAX call

    return false;
}); 
```

# parsing - 如何使用 phpQuery 解析 HTML 页面创建多维数组？

> ID：15929451
> 
> 赞同：2
> 
> 时间：2013-04-10T14:58:40.247
> 
> 标签：parsing, phpquery

在这里，我有这段代码可以正常工作

```
include ("classes/phpQuery-onefile.php");
$url = "http://www.website.com";
$rawHTML = fetchRawData ( $url );
$parsedData = parseSpecificData ( $rawHTML );

//displayData ( $parsedData );
print '<pre>';
print_r($parsedData);
print '</pre>';

//our fetching function
function fetchRawData($url) {
    $ch = curl_init ();
    curl_setopt ( $ch, CURLOPT_URL, $url );
    curl_setopt ( $ch, CURLOPT_RETURNTRANSFER, true ); //return the output as a variable
    curl_setopt ( $ch, CURLOPT_FAILONERROR, true ); //fail if error encountered
    curl_setopt ( $ch, CURLOPT_FOLLOWLOCATION, true ); //allow redirects
    curl_setopt ( $ch, CURLOPT_TIMEOUT, 10 ); //time out length

    $data = curl_exec ( $ch );
    if (! $data) {
        echo "<br />cURL error:<br/>\n";
        echo "#" . curl_errno ( $ch ) . "<br/>\n";
        echo curl_error ( $ch ) . "<br/>\n";
        echo "Detailed information:";
        var_dump ( curl_getinfo ( $ch ) );
        die ();
    }
    curl_close ( $ch );
    return $data;
}

//our parsing function
function parseSpecificData($data) {
    $parsedData = array ();
    phpQuery::newDocumentHTML ( $data );

    foreach ( pq ( ".box a" ) as $link ) {
        //print '<pre>';print_r($link);print'</pre>';
        $title = pq ( $link )->text ();
        if ($title) {
            $parsedData [] = array ("title" => $title,
                                            "href" => pq ( $link )->attr ( 'href' )
                                           );
        }
    }
    return $parsedData;
} 
```

这里是需要解析的页面内容

```
<div class="box">
    <span class='name'>Name</span><br>
    <span class="address">Address</span><br>
    <a href='http://www.website.com'>www.website.com</a>
</div> 
```

这里有输出

```
Array
(
    [0] => Array
        (
            [title] => www.website.com
            [href]  => http://www.website.com
        )
) 
```

我的问题是如何用键`name`和`address`. 在问之前我真的是一路搜索尝试，但是在phpQuery类中有一些我没有理解的东西。谢谢你的帮助。亚历克斯

# javascript - D3.js：在前一个完成之前不要开始新的过渡？

> ID：15929453
> 
> 赞同：3
> 
> 时间：2013-04-10T14:58:48.183
> 
> 标签：javascript, d3.js

我在 Google Map 旁边使用 D3 图表。我希望图表在地图缩放发生变化时进行转换。如果缩放没有比过渡完成更新更快地变化，它工作正常。但是，连续单击两次缩放会导致过渡中断。

如何在上一个转换完成之前停止下一个转换？

这是我的代码（它是一个 Backbone 应用程序）：

```
 render: function() { 
      this.renderMap();
    },
    renderMap: function() {
      var that = this; 
      ...
      google.maps.event.addListener(that.mapControl, 'zoom_changed', function() {
        that.change();
      });
    },
    change: function() {
      var that = this;
      d3.transition().duration(750).each(function() {
        that.redraw();
      });
    },
    redraw: function() {
      ...
      this.redraw = function() {
        ...
        var barUpdate = d3.transition(bar).attr("transform", function(d) {
            return "translate(0," + (d.y0 = y(d.State)) + ")";
        }).style("fill-opacity", 1);
      };
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:22:52.610

查看您的代码，我认为您可以通过添加基于索引的延迟来分离您的转换。

```
.transition()
  .duration(750)
  .delay(function(d, i){
        return i * 750
  }) 
```

如果您正在寻找转换结束的确切时刻，您可以尝试将 .each("end", listener) 添加到 transition() 中，这将在转换结束时调用侦听器。[过渡#控制](https://github.com/mbostock/d3/wiki/Transitions#wiki-each)。让代码看起来像这样？

```
.transition()
    .duration(750)
    .each("end", that.redraw()) 
```

希望这可以帮助。

# git - 如何在不在 repo 服务器上创建 Git Hooks

> ID：15929458
> 
> 赞同：0
> 
> 时间：2013-04-10T14:59:05.317
> 
> 标签：git

我正在尝试在 git 中设置一些钩子，所以我做了以下操作：

```
git clone git@git:project
cd project/.git/hooks
vi post-receive 
```

然后我将我的代码添加到 post-receive 文件中。然后我提交了该项目并进行了推送，但我没有在服务器上看到我的钩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:04:15.893

该`.git`目录存储有关存储库的数据。此目录中的文件**不***被*Git 跟踪，而是用于存储有关 Git 跟踪的文件的数据。

因此，该`.git/hooks`目录不在存储库之间共享，也没有版本控制。您需要在服务器本身上进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:19:11.080

你没有。提交对 repo 管理的代码的访问与对 repo 的管理控制完全不同。为此，您需要直接访问托管它的系统（或某种形式的手动自动委派，可能以 git hooks 的形式......）。

# regex - tcl 正则表达式名称验证

> ID：15929460
> 
> 赞同：-1
> 
> 时间：2013-04-10T14:59:08.920
> 
> 标签：regex, tcl

我需要在 tcl 中验证一个名称，它可以是：

字母（大写和小写）

数字

这些符号中的任何一个：“_”下划线“-”破折号“/”斜杠

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:02:57.520

我会使用：

```
regexp {^[\w/-]+$} $string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:04:19.833

虽然其他答案可以解决问题，但这里有一个答案，您可以自己编写：

*   字符串应该只包含定义的字符：
    必须匹配整个字符串，所以添加约束：`^`在开头（标记字符串的开头）和`$`结尾。

*   字符串应包含一个或多个字符：
    `[a-z]+`表示从 a 到 z 范围（包括）内的一个或多个字符。

*   添加更多可能的字符：（`^[a-zA-Z_0-9/-]+$`
    注意`-`是在最后，否则它定义了一个范围）

瞧。你的正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:01:57.243

```
/^[\w-\/]+$/ 
```

`\w`用于字母、数字和下划线。[资源](http://www.regular-expressions.info/reference.html)

# javascript - Ext.mixin.Observable.on() / .un()：函数引用不匹配

> ID：15929464
> 
> 赞同：1
> 
> 时间：2013-04-10T14:59:22.730
> 
> 标签：javascript, extjs, sencha-touch-2, listener

我正在尝试在运行时使用`on()`和`un()`函数（和的别名`addListener`）添加和删除侦听器`removeListener`。我从使用 Sencha 检索的组件实例中获取函数引用`getCmp()`

```
Ext.Viewport.on('orientationchange', Ext.getCmp('foo').handleOrientationChange, foo, {buffer: 50});
Ext.Viewport.un('orientationchange', Ext.getCmp('foo').handleOrientationChange); 
```

从煎茶文档：

> un( eventName, fn, [scope], [options], [order] )
> 
> 要删除的处理程序。这必须是对传递给 addListener 调用的函数的引用。

我不清楚为什么这不起作用。显然第二个函数引用与第一个不匹配，但为什么会发生这种情况？不应该`Ext.getCmp('foo')`返回相同的对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:34:01.107

调用时`removeListener`，您还需要传递与指定的范围相同的范围，`addListener`然后只会删除侦听器

```
Ext.Viewport.un('orientationchange', Ext.getCmp('foo').handleOrientationChange, foo); 
```

* * *

```
scope : Object (optional)
The scope originally specified for the handler. It must be the same as the scope argument specified in the original call to addListener or the listener will not be removed. 
```

查看：

[煎茶文档](http://docs.sencha.com/touch/2-1/#!/api/Ext.mixin.Observable-method-removeListener)

# c++ - 从套接字中提取数据？

> ID：15929467
> 
> 赞同：0
> 
> 时间：2013-04-10T14:59:26.023
> 
> 标签：c++, visual-studio-2010, sockets, boost-asio

我目前正在通过以下方式从套接字中提取数据

```
 boost::asio::read_until( *socket, buffer, "\n", error ); 
            std::string s( (std::istreambuf_iterator<char>(&buffer)), std::istreambuf_iterator<char>()); 
```

看来拉机制很慢，我需要更快地拉更多数据。关于我可以做些什么来提高性能的任何建议？有没有办法让我创建另一个套接字并将一些提取工作委托给那个套接字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:57:40.487

我过去曾在交易应用程序上工作过，我可以告诉您，我从未见过任何订单路由系统或实时报价系统实施过搜索“\n”的协议。FIX 当然不支持这个。这意味着在您的订单路由或实时报价系统的某个地方，有一个应用程序很可能会获取那些可能使用 FIX 协议的报价消息并将它们转换为您现在使用的协议。这很可能至少与系统速度慢的原因有关。

如果每个字符串代表一个股票报价，那么我会考虑重写广播价格更新的系统以批量发送它们，并且每秒发送它们不超过 3 - 5 次 - 假设该系统不被自动化使用交易程序（这将是一个完全不同的主题，需要一种截然不同的方法）。看起来该应用程序也在以 ascii 文本格式发送引号。我会将其更改为使用二进制格式。FIX 已经支持二进制格式很长一段时间了，称为[FAST FIX](http://www.fixprotocol.org/fast)。自定义二进制协议也是可以接受的。

根据您对股票报价进行的处理类型，我会考虑不将每个报价传递给不同的线程。如果唯一的处理仅涉及使用新报价更新窗口，则尤其如此。我将传递整个缓冲区（假设它有超过 1 个引号并且只包含引号）以供用户界面线程处理。如果需要进行其他处理，例如将其保存到磁盘或数据库，那么我将有一个单独的线程来处理这种处理。

您没有向我们展示太多代码。如果客户端应用程序很慢，那么您可以尝试以下一些想法进行改进：

1.  不要动态创建线程。在应用程序开始时创建一个线程池，并根据需要使用它们。了解太多线程可能比只有一个线程更糟糕，因此在决定线程数时尝试尝试找到一个快乐的平衡点。

2.  与上述相同，尝试只创建一次对象并在需要时重用它们。这可以通过将一组对象存储在向量、堆栈或队列中来完成。仅当容纳它们的容器已用尽时才创建新对象。如果您的应用程序经常使用 new 运算符在堆上创建对象，则尤其如此。

3.  在上面的代码中，正如 Panasyuk 指出的那样，缓冲区可以移到 while 循环之外。错误对象也可以。在代码中寻找可以只创建一次对象而不是一遍又一遍地创建对象的其他区域。

4.  了解何时需要对象的实例 .vs。一个静态的。如果多个线程需要写入对象，通常需要一个对象的实例。当只有一个线程，或者有多个线程只需要从中读取时，可以使用静态对象。

5.  从处理套接字处理的线程向用户界面线程传递消息时，请确保使用 BeginInvoke 而不是 Invoke。Invoke 是同步的，将等待被调用的方法完成，然后再继续处理。BeginInvoke 是异步的，会立即返回，因此效率更高。如果应用程序正在丢弃消息并且正在使用 Invoke，那么这就是原因。

6.  由于应用程序正在使用多个线程，因此可以合理地假设存在一些用于防止多个线程同时执行的锁定对象或语句。查看这些情况并确保锁本质上是细粒度的——这意味着为了方便起见，锁没有设置在函数的顶部。将其设置在仅需要它的函数中间的某个位置。确保代码也使用临界区而不是互斥锁，因为 Microsoft 领域的临界区效率更高。唯一需要使用互斥锁的情况是在将 DLL 附加到两个或多个 exe 时，现在很少这样做了。

# iphone - 如何在 scrollViewDidZoom 中动态调整 contentInset？我最初在 UIScrollview 中设置 UIImageView 的 contentInset

> ID：15929468
> 
> 赞同：6
> 
> 时间：2013-04-10T14:59:30.090
> 
> 标签：iphone, ios, objective-c, uiscrollview, uiimageview

我正在进行一个自定义`'Move and Scale' Controller`. `UIImagePickerController`（控制器何时出现 if `imagePickerController.allowsEditing=YES`）

我想`crop an UIImage`在裁剪矩形中，如下图所示。

![截图 1](https://i.stack.imgur.com/Cr3ux.png)

我做了一些代码来设置`contentInset`。

```
 self.selectedImageView.backgroundColor = [UIColor redColor];

    CGRect cropRect = [SKPhotoCropFrameView getCropRectFromOrientation:self.photoCropOrientation];
    CGRect aspectFitRect = AVMakeRectWithAspectRatioInsideRect(self.selectedImageView.image.size, self.selectedImageView.frame);
    CGFloat difference = fabsf(cropRect.size.height - aspectFitRect.size.height);
    self.contentInset = UIEdgeInsetsMake(difference/2, 0, difference/2 + 20, 0);   // 20 is status bar height 
```

这是结果。

![截图 2](https://i.stack.imgur.com/Xp5SZ.png)

黑色区域是 contentInset 区域。

但是，如果我捏这个 scrollView 来放大，就会发生一些事情。

![截图 3](https://i.stack.imgur.com/P3Ghx.png)

我想我必须做点什么

```
 - (void)scrollViewDidZoom:(UIScrollView *)scrollView 
```

动态调整 contentInset。我怎样才能做到这一点？请给我一些帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T06:26:34.073

我希望有人回答这个问题，我很伤心，因为它不是。

但是感谢上帝，我解决了这个问题。

在

```
 - (void)scrollViewDidZoom:(UIScrollView *)scrollView 
```

使用 zoomScale 动态调整 contentInset。我只是`Lanscape mode`为了测试而实现，但`Portrait mode`方式完全相同。

```
// adjust contentInset
CGFloat increasingZoomScale = (scrollView.zoomScale == 1) ? 0 : (-1 * (1 - scrollView.zoomScale));

CGRect cropRect = [SKPhotoCropFrameView getCropRectFromOrientation:self.photoCropOrientation];
CGRect aspectFitRect = AVMakeRectWithAspectRatioInsideRect(self.selectedImageView.image.size, self.selectedImageView.frame);
CGFloat difference = fabsf(cropRect.size.height - aspectFitRect.size.height);

// implement at `Landscape` mode first
if (self.photoCropOrientation == SKPhotoCropOrientationPortrait) {

}else{
    // get scaledFrameHeight because it's `Landscape` crop mode
    CGFloat increasingFrameHeight = scrollView.frame.size.height * increasingZoomScale;
    self.contentInset = UIEdgeInsetsMake(difference/2 - increasingFrameHeight/2, 0, difference/2 - increasingFrameHeight/2, 0);
} 
```

和砰。这是屏幕截图。

![截图 4](https://i.stack.imgur.com/JmDvc.png)

# c# - 发布 VS2012 后缓存的旧 IIS 站点

> ID：15929474
> 
> 赞同：1
> 
> 时间：2013-04-10T14:59:53.173
> 
> 标签：c#, asp.net, caching, iis

我习惯于在网站的任何“关键”文件更改（例如 bin 文件夹中的 DLL 或 web.config 更改）时让 IIS 自动重置网站。因此，每当我使用 VS2012“发布”网站时——目标 IIS 网站（即使它在另一台服务器上）总是会自行重启，以便进行额外的测试。

出于某种原因，我本周正在进行的一个项目没有这样做。我可以完全删除并重新发布该站点——但 IIS 会继续提供“旧”内容，直到我回收相关的 AppPool。当我回收 AppPool 时它可靠地更新 - 并且在我这样做之前不会可靠地更新（似乎不管磁盘上的文件是什么）。

就好像它正在缓存我的整个 ASP.NET 3.5 网站。我已经使用 IIS 将近 20 年了，我从未见过它有这样的行为。

有什么建议/想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:10:02.023

此语句允许您以编程方式回收 AppDomain（类似于回收整个 AppPool，但仅涉及当前应用程序，因此其他任何内容都不会受到影响）

```
HttpRuntime.UnloadAppDomain(); 
```

我通常`#if(DEBUG)`在我的项目中使用它，因此它不会脱离开发环境。

# c# - C#：属性.设置

> ID：15929475
> 
> 赞同：1
> 
> 时间：2013-04-10T14:59:53.390
> 
> 标签：c#, visual-studio-2010

我犯了一个可怕的错误，并从我的 VS2010 项目中删除了 Settings.Settings。

是否有可能重新创建该文件？我还没有找到任何东西。

干杯，马可

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:03:05.790

如果“重新创建”是指“制作一个新的”：

1.  右键单击解决方案资源管理器中的项目，
2.  选择“属性”
3.  选择左侧的“设置”
4.  单击中心窗格中显示“此项目不包含设置文件。单击以创建一个”的链接
5.  输入您的设置。

或者，从源代码控制系统中提取副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:02:34.760

如果您删除任何引用您拥有的设置的内容并转到项目的属性并单击设置，它应该提示您重新创建它：[Visual Studio 项目：Properties/Settings.settings Missing](https://stackoverflow.com/questions/13769273/visual-studio-project-properties-settings-settings-missing)

# android - 针对具有多个 APK 的多个设备

> ID：15929477
> 
> 赞同：1
> 
> 时间：2013-04-10T14:59:59.373
> 
> 标签：android, google-play, nexus-7, multiple-apk

我正在为 Android 开发游戏，并且由于 Android 设备的性质非常不同（从`Samsung Galaxy Y`到`Google Nexus 10`），我决定使用 Google Play 的“多个 APK”功能。我决定创建 4 个不同的包，每个包都有不同大小的资产。

其中最小的只有大约 10 兆字节，图形资源缩小到 240p（以节省 Galaxy Y 上非常有限的内存），而最大的将近 50 兆字节，资源放大到约 1500p，为 Nexus 10 提供清晰的图形。

我正在使用`<compatible-screens>`将每个版本过滤到不同的设备。我正在使用screenSizes `small`、和和screenDensities `normal`、和。`large``xlarge``ldpi``mdpi``hdpi``xhdpi`

我在这里提到的每个 screenSize-screenDensity 组合都包含在四个 APK 之一中。**问题**是`Google NEXUS 7`不属于这些！它用

`<screen android:screenSize="large" android:screenDensity="213" />`

现在，很容易手动将这些添加到四个 APK 之一，但真正的问题是……我是否必须按照 Google 决定继续添加这些看似任意的屏幕密度类别的速度更新我的 APK？或者我**有更好的过滤 APK 的方法吗？**

Android API 文档建议`<supports-screens>`改用，但它提到它并没有真正将它用于过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:18:54.093

在我看来，您应该按照目前的方式过滤您的小型和普通 APK，但按照[此处](http://developer.android.com/guide/practices/screens-distribution.html#FilteringTabletApps)所述过滤您的大型和超大 APK 。这似乎是谷歌在这种情况下推荐的。

# c# - 从局部视图刷新编辑视图

> ID：15929480
> 
> 赞同：0
> 
> 时间：2013-04-10T15:00:10.950
> 
> 标签：c#, asp.net-mvc, viewmodel

是否可以从我的控制器中的方法刷新编辑视图？

我有一个对控制器进行回调的局部视图。通过这个方法，我想根据我传递给这个方法的值刷新我的整个编辑视图。

```
 public ActionResult AssignPractice(Guid id, Guid doctorId)
    {
        var doctorViewModel = Map.This(_doctorService.GetDoctor(doctorId)).To<DoctorViewModel>();
        AddSelectLists(doctorViewModel);
        var practice = _practiceService.GetPractice(id);
        doctorViewModel.Practice = new PracticeSelectListViewModel()
            {Item = practice, DoctorId = doctorId, SelectList = _practices};
        return View("Edit", doctorViewModel);
    } 
```

提前致谢，

编辑：

我会详细说明一下。我面临的情况如下：

需要为医生分配一个实践，这不仅会影响医生的 practiceId，而且还会影响我的医生视图模型上的 20 个其他属性，并且它们需要反映在视图中。也许我通过寻求上述解决方案来看待这个错误的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:10:36.517

如何使用 jQuery 加载函数调用您的控制器方法 trhu JSON？你调用你的控制器方法，更新你的 ViewModel 并返回你的编辑视图或其他东西。

jQuery：

```
$('#buttonToRefresh').click(function () {
    $('#mainContent').load('@Url.Content("YourAction", "YourController")', $('#yourFormID').serialize());
}); 
```

看法：

```
<div id="mainContent">
    @Html.BeginForm("Action", "Controller", FormMethod.Post, new { id = "yourFormID" })
    {
        // Your content goes here.
    }
</div> 
```

您的控制器保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:41:34.093

好的，所以我使用了所有解决方案来找到适合我的情况的解决方案。

Javascript：

```
function Doctor() {
this.id = null;
this.FirstName = "";
this.LastName = "";
this.Code = "";
this.PhoneNumber = "";
this.PhoneNumber2 = "";
this.PhoneNumberActive = 0;
this.PhoneNumber2Active = 0;
this.Email = "";
this.Practice = new Practice();

function AssignPractice() {

var myModel = new Doctor();
myModel.id = Id.value;
myModel.FirstName = FirstName.lastChangedValue;
myModel.LastName = LastName.lastChangedValue;
myModel.Code = Code.lastChangedValue;
myModel.PhoneNumber = PhoneNumber.lastChangedValue;
myModel.PhoneNumber2 = PhoneNumber2.lastChangedValue;
myModel.PhoneNumberActive = PhoneNumberActive.lastChangedValue;
myModel.PhoneNumber2Active = PhoneNumber2Active.lastChangedValue;
myModel.Email = Email.lastChangedValue;
myModel.Practice.id = cbbPractice.lastSuccessValue;
var postData = JSON.stringify(myModel);  
$.ajax({
    url: assignPracticeUrl,
    type: 'POST',
     data: postData,
    success: function (data) {
        $('#yourFormID').html(data);
    }
}); 
```

看法：

```
@using (Html.BeginForm("Edit", "Doctor", FormMethod.Post, new { id = "yourFormID" })) 
```

控制器：

```
 public ActionResult AssignPractice(FormCollection form)
    {

        JavaScriptSerializer js = new JavaScriptSerializer();
        var doctor = js.Deserialize<Doctor>(form[0]);
        var doctorViewModel = Map.This(_doctorService.GetDoctor(doctor.Id)).To<DoctorViewModel>();

        AddSelectLists(doctorViewModel);
        var practice = _practiceService.GetPractice(doctor.Practice.Id);
        var practiceViewModel = Map.This(practice).To<PracticeViewModel>();
        doctorViewModel.Practice = new PracticeSelectListViewModel() { Item = practice, SelectList = _practices };
        doctorViewModel.FirstName = doctor.FirstName;
        doctorViewModel.LastName = doctor.LastName;
        doctorViewModel.PhoneNumber = doctor.PhoneNumber;
        doctorViewModel.PhoneNumber2 = doctor.PhoneNumber2;
        doctorViewModel.PhoneNumberActive = doctor.PhoneNumberActive;
        doctorViewModel.PhoneNumber2Active = doctor.PhoneNumberActive;
        doctorViewModel.Email = doctor.Email;
        doctorViewModel.OpeningHours = practiceViewModel.OpeningHours;
        doctorViewModel.AppointmentHours = practiceViewModel.AppointmentHours;
        doctorViewModel.AddressViewModel = practiceViewModel.AddressViewModel;
        doctorViewModel.Website = practiceViewModel.Website;
        doctorViewModel.Labo = practiceViewModel.Labo;
        doctorViewModel.KeyChain = practiceViewModel.KeyChain;
        return PartialView("Edit",  doctorViewModel);
    } 
```

# javascript - 使用 javascript 读取 .txt 文件并填充数组

> ID：15929482
> 
> 赞同：-1
> 
> 时间：2013-04-10T15:00:27.303
> 
> 标签：javascript, arrays

我有以下html：

```
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
      google.load('visualization', '1', {'packages': ['geomap']});
      google.setOnLoadCallback(drawRegionsMap);

      function drawRegionsMap() {
        var data = google.visualization.arrayToDataTable([
          ['Country', 'Money', ''],
          ['US', 80.21, 'United States']
          ['JP', 10.01, 'Japan']
...
        ]);

        var options = {};

        var geomap = new google.visualization.GeoMap(document.getElementById('chart_div'));
        geomap.draw(data, options);
      };
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 750px; height: 550px;"></div>
  </body>
</html> 
```

我需要直接读取具有以下内容的 .txt 文件：

```
['Country', 'Money', ''],
['US', 80.21, 'United States']
['JP', 10.01, 'Japan'] 
```

并填充此处使用的数组：

```
var data = google.visualization.arrayToDataTable([...]); 
```

我怎样才能使它成为javascript？

谢谢丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:04:10.627

如果您的文件是格式正确的 JSON，即：

```
[
    ["Country","Money",""],
    ["US",80.21,"United States"],
    ["JP",10.01,"Japan"],
    ...
] 
```

然后，您可以简单地使用 AJAX real 加载它并运行它`JSON.parse()`以获得所需的数组。有很多关于从文件中检索 JSON 的教程，所以请尝试一下，如果您有更具体的问题，请告诉我们。

# mongodb - Mongodb PHP 驱动程序：MongoCursorException

> ID：15929487
> 
> 赞同：1
> 
> 时间：2013-04-10T15:00:41.390
> 
> 标签：mongodb, mongodb-php

我决定在 2.4.0 版本中升级 mongo。我在他的上一个版本中使用了 php 驱动程序，但是现在当我执行 batchInsert() 时，有时会出现此错误：

> PHP致命错误：未捕获的异常'MongoCursorException'带有消息'无法连接：无法连接（我的mongos URL）包：从套接字读取错误：光标超时（超时：10000，剩余时间：0:0，状态： 0)

有人可以解释一下这个错误是什么，我该如何解决我的问题？

提前致谢

# oracle - 日期字符串在日期范围选择语句中不起作用

> ID：15929492
> 
> 赞同：2
> 
> 时间：2013-04-10T15:00:49.710
> 
> 标签：oracle, date, coldfusion

我在几个约会方面遇到了问题，目前我正在逃避。

我有以下格式的 2 个日期字符串：`dd-mm-yyyy`. 所以例如

*   日期1 =`10-03-2013`
*   日期2 =`15-03-2013`

我需要在以下查询中使用这些日期：

```
<cfquery name="qry1" datasource="#getDSN()#">
        SELECT      
            DOCUMENT_NUMBER
        FROM
            MY TABLE            
        WHERE
            DATE_ORDER_ENTER 
        BETWEEN 
            <cfqueryparam value="#DATE1#"  maxlength="10">
        AND
            <cfqueryparam value="#DATE2#" maxlength="10">                   
    </cfquery> 
```

我遇到的问题是将这些日期字符串转换为实际日期。我发现月份和日期正在交换。我已经尝试过诸如`createODBCDate()`查看是否可以解决问题的功能，但它仍然无法正常工作。有没有人有办法解决吗？

我正在使用 CF9.01 和 Oracle 10g。

非常感谢，JC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:34:23.290

> 我发现月份和日期正在交换。我已经尝试过 createodbcdate() 之类的函数，看看这是否能解决问题，但仍然无法正常工作。

标准 CF 日期函数（如 CreateODBCDate、ParseDateTime 等）**始终**使用[英语（美国）日期格式约定](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7843.html)。所以日期字符串`10-03-2013`将**始终**被视为 10 月 3 日。你很幸运能使用明确的日期字符串，例如`15-03-2012`. 显然没有第 15 个月，所以 CF 会自动交换它们。这就是为什么它*似乎*适用于一些非美国日期字符串，但不适用于其他日期字符串。

要解析区域设置敏感日期，请使用`LSxxxxx`@duncan 建议的日期函数。忽略验证，如下所示：

```
 <cfset dateObject = LSParseDateTime("10/03/2013", "pt_PT")> 
```

请注意，根据文档，破折号即 dd-mm-yyyy在大多数其他语言环境[中不是标准的。](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6e12.html)显然只有荷兰语（标准）和葡萄牙语（标准）。

此外，请务必`cfqueryparam`按照@Dan 的建议添加正确的日期类型。否则，它将默认为 type`char`并可能导致语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T19:13:18.457

不像 Leigh 的回答那样圆滑，但这也应该有效。

```
dateString = "10-03-2013";  // March 10 2013
dateObj = CreateDate(   ListLast(dateString, "-")
                        , ListGetAt(dateString, 2, "-")
                        , ListFirst(dateString, "-")
                    ); 
```

换句话说，将您的字符串视为连字符分隔的列表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T13:41:34.483

您可以使用以下函数来创建日期：

```
CreateDate(year, month, day) 
```

并使用以下功能根据您的需要对其进行格式化

```
DateFormat("date" [, "mask" ]) 
```

# html - 使用“按系统日期拆分 JSP 表列表” 我想显示“用户”参加的旅行列表。我希望它分成“即将到来”和“以前的”表。目前它只显示数组列表中的所有行程。 我想创建一个 If Else 循环，它会说“如果日期稍后将列添加到该表”，否则“将列添加到该表” 信息： 创建两个表是一种选择 我可以从数组列表中提供所有日期 问问题 问问题 2013-04-10T15:00:52.307 449 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. htmljspif-statementhtml-table 4 1 回答 1 This answer is useful 1 这是一项应该由控制器以 Java 代码而不是视图来完成的工作。使其将列表一分为二，将两个列表存储在两个请求属性中，让您的 JSP 只需有两个单独的循环，无需任何日期比较。 于 2013-04-10T15:04:20.877 回答 Related 0 button - facebook like iframe 按钮，当它链接到一个 url 时显示，但不是 facebook 页面（仅限 safari）在 FF 中工作 1 qt - 如何从 QWidget 的paintEvent() 中获取帧缓冲区 2 jena - 将 ontModel 写为 owl 而不是 jena 的 rdf 1 c# - 如何将 C# 函数指针传递给 CLI/C++ 代码？ 1 c# - 需要帮助使列表接受多个用户输入而不删除之前的输入 3 r - 生成变量名（类似于 get()） 1 ms-access - 将 JBoss 5.1 MDB EJB3 连接到远程 JMS 提供程序队列 1 android - Android 数据库 SQLite 或 MySQL？ 2 java - Android - 仅发送所需的 json 1 asp.net - 站点不在 IIS 中工作，但在 Visual Studio 调试模式下工作 Asp.Net Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15929493
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, jsp, if-statement, html-table

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:04:20.877

这是一项应该由控制器以 Java 代码而不是视图来完成的工作。使其将列表一分为二，将两个列表存储在两个请求属性中，让您的 JSP 只需有两个单独的循环，无需任何日期比较。

# javascript - 在 node.js 中获取控制台路径

> ID：15929497
> 
> 赞同：2
> 
> 时间：2013-04-10T15:00:59.787
> 
> 标签：javascript, node.js, npm

我正在为 node.js 开发一个控制台应用程序，我需要一些帮助。如果您使用“npm”安装我的控制台应用程序，则可以通过键入“程序”来调用它，但如果我的控制台位于该位置`C:/Users/JhonDoe/Documents`，我如何在 nodejs 中获取该位置。我知道如何获取脚本位置（例如`C:/Program Files/nodejs/node_modules/program/bin`），但如何在控制台中获取位置。澄清我的目标；我需要在他们当前所在的文件夹中获取一个文件，因此我需要知道他们从中调用我的应用程序的文件夹。
谢谢你，
@_C1D

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T15:03:44.713

[`process.cwd()`](http://nodejs.org/api/process.html#process_process_cwd)给出进程的当前工作目录。

# c# - NServiceBus 在 MSMQ 上的性能不佳

> ID：15929499
> 
> 赞同：1
> 
> 时间：2013-04-10T15:01:07.170
> 
> 标签：c#, .net, msmq, nservicebus

我们正在尝试将 NServiceBus/MSMQ 集成到我们当前的 Web 应用程序 (REST) 中。

运行分析器，似乎花费了**大量**时间将消息发送到队列（请参见分析器屏幕截图[1](https://i.stack.imgur.com/kHMW4.png)，突出显示的 30 是总执行时间的 30%）。仅将消息发送到 MSMQ 所花费的时间大约是在 Mongo 中保存一组全新文档（在远程服务器上运行）的两倍。

向 MSMQ 队列发送消息这么慢是正常的还是我们缺少一些配置调整？

以下是我们当前的总线配置（基于 NServiceBus 文档 - [http://support.nservicebus.com/customer/portal/articles/894008-using-nservicebus-with-asp-net-mvc](http://support.nservicebus.com/customer/portal/articles/894008-using-nservicebus-with-asp-net-mvc)）：

```
// NServiceBus configuration
Configure
    .WithWeb()
    .CastleWindsorBuilder(_container)
    .JsonSerializer()
    .Log4Net()
    .MsmqTransport()
    .IsTransactional(false)
    .PurgeOnStartup(true)
    .UnicastBus()
    .ImpersonateSender(false)
    .SendOnly(); 
```

和 web.config：

```
 <MessageForwardingInCaseOfFaultConfig ErrorQueue="Error" />
 <MsmqTransportConfig NumberOfWorkerThreads="1" MaxRetries="5" />
 <UnicastBusConfig>
   <MessageEndpointMappings>
     <add Messages="Messages" Endpoint="MessageHandlers" />
   </MessageEndpointMappings>
 </UnicastBusConfig> 
```

![ANTS profiler 截图](https://i.stack.imgur.com/kHMW4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:11:52.267

这看起来像一个[MSMQ 问题](http://ayende.com/blog/4251/what-am-i-missing-msmq-perf-issue)。事务性 MSMQ 根本没有针对快速写入它进行优化。

# c - 如何从 C 中的 mmap 区域获取固定大小的缓冲区？

> ID：15929502
> 
> 赞同：0
> 
> 时间：2013-04-10T15:01:17.527
> 
> 标签：c, io, mmap

我接下来要做的是：我有一个巨大的文件（超过 4GB）。我想对其进行映射，然后从这个映射的区域缓冲区中获取 128 个字节。我该怎么做？对于 mmap 文件，我使用这个：

```
int fd = open(file_name, O_RDONLY);
void* addr = mmap(0, /*ULONG_MAX*/100000000, PROT_READ, MAP_SHARED, fd, 0); 
```

在这些字符串之后，我想获得上述缓冲区的描述，但我不知道怎么做，也没有在网上找到它。

附加信息：file_name 是文本文件。它包含字符串

UPD：我将尝试解释：我想对文件进行映射，然后从映射区域中取出 128 个字节（实际上是字符）并将其放入某个缓冲区。现在我使用下一个代码：

```
char buffer[128];
struct str* addr = mmap(0, /*ULONG_MAX*/128, PROT_READ, MAP_SHARED, fd, 0);
scanf((char*)addr, "%s", buffer);
printf("%s\n", buffer); 
```

但它不起作用。所以我正在寻找解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:13:40.143

成功后`mmap`，文件的内容（最大为`mmap`'d 大小）在 指向的内存区域中可用`addr`。所以你可以做

```
memcpy(buffer, addr, 128); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:14:02.853

哦，好吧，这不是真正的问题`mmap`，而是 的问题`scanf`。这很容易。 [不要使用scanf。](https://stackoverflow.com/questions/15664664/scanf-regex-c/15664816) 要将 128 字节的固定块从一个`mmap`区域复制到另一个缓冲区，您需要[memcpy](http://linux.die.net/man/3/memcpy)。

```
...
unsigned char *addr = mmap(0, /*ULONG_MAX*/100000000, PROT_READ, MAP_SHARED, fd, 0);
unsigned char buf[128];
...
memcpy(buf, addr + offset, 128); 
```

这就是它的全部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:21:35.157

如果要打印每块 128 个字符，请执行此操作

```
char buf[129];

// put a nul char to ensure the string will be terminated
buf[128] = '\0';

// other stuff you've done
....

// get the file mapped to addr memory pointer
void* addr = mmap(0, /*ULONG_MAX*/100000000, PROT_READ, MAP_SHARED, fd, 0);

long i = 0

while (i < 100000000)
{
    // copy out the 128 bytes of the block
    memcpy(buf, (char *) &addr[i], 128);

    // print it out
    printf("BUF: %s\n", buf);

    // move to the next block
    i += 128;
} 
```

# meteor - 如果更新了 Meteor 中两个模板引用的文档，则防止在 Meteor 中进行不必要的渲染

> ID：15929507
> 
> 赞同：1
> 
> 时间：2013-04-10T15:01:24.070
> 
> 标签：meteor

我有一个 Meteor 项目，其中两个不同的模板依赖于同一文档中的数据：

```
{ "title": "My Project", "data": "My project data" } 
```

一个模板呈现“标题”，另一个呈现“数据”。

如果用户更改文档中的“数据”字段，我不希望使用“标题”字段的模板重新呈现。我只想要使用“数据”的模板重新渲染。

例如，标题可能在页眉中，如果项目的数据发生更改，则不需要重新渲染。

如何做到这一点？

我的流星模板：

```
<head>
  <title>experiment</title>
</head>

<body>
  {{>hello}}
</body>

<template name="hello">
    <div>
        My projects.
    </div>

    {{#each projects}}
    <div>
        {{>projectTitle}}
        {{>projectData}}
    </div>
    {{/each}}

</template>

<template name="projectTitle">
    <div>
        Project title: {{title}}
    </div>
</template>

<template name="projectData">
    <div>
        Project data: {{data}} 
    </div>
</template> 
```

我的流星 Javascript：

```
Experiments = new Meteor.Collection("experiments");

if (Meteor.isClient) {
  Template.hello.projects = function() {
    return Experiments.find();
  }

  Template.projectTitle.title = function() {
    return Experiments.find().fetch()[0].title;
  }

  Template.projectData.data = function() {
    return Experiments.find().fetch()[0].data;
  }

  Template.projectTitle.rendered = function() {
    console.log('Rendered projectTitle');
  }

  Template.projectData.rendered = function() {
    console.log('Rendered projectData');
  }
} 
```

每当 Project 文档中的任一字段发生更改时，此代码当前都会输出“Rendered projectTitle”和“Rendered projectData”，这表明两个模板都在重新渲染。

**编辑**我不知道是否有一种“正确”的方法可以做到这一点，但可以发布两个订阅，它们返回文档的单独部分。不过，这似乎与 Meteor 的哲学背道而驰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:28:04.820

您可以让模板从`Session`变量中读取，然后使用`Meteor.autorun`.

然后当您的对象更改时，`Meteor.autorun`将再次执行，但如果字段未更改，则 Session 不会更改。

# php - 使用数据重定向到另一个控制器

> ID：15929510
> 
> 赞同：2
> 
> 时间：2013-04-10T15:01:29.923
> 
> 标签：php, fuelphp

我有一个`action_register`尝试注册新用户的功能。如果成功，我希望将用户转发到登录表单（通过 显示`action_login`）。但是，我还想向登录视图发送一个`$message`和`$message_type`，上面写着“您的帐户已创建，请登录”之类的内容。

最好的方法是什么。最好的意思是可维护、清洁和安全。

到目前为止我的想法：

*   将数据发布到路由到`action_login`并重定向的 url。
*   找到一种方法将数据直接发送到控制器方法并`action_login`像往常一样渲染。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:36:51.687

你实际上不需要做任何代码片段来设置会话消息，Fuel php 提供了一个非常好的接口来处理这样的特性。它的核心会话类是我们需要按照文档使用的方式。

在您的情况下，假设您需要从 register_action 重定向到 login_action 并在成功注册过程后，然后只需设置如下所示的 flash 消息

```
Session::set_flash('success', 'Your account has been successfully created !'); 
```

稍后在登录的视图文件中，您可以使用下面的代码来获取您想要的 Flash 消息。有些像这样

```
<?php if (Session::get_flash('success')): ?>
    <div class="alert-box info">
        <?php echo  Session::get_flash('success') ; ?>

    </div>
<?php endif; ?> 
```

您也可以使用如下所示的 delete_flash 方法删除上述示例中的会话消息“成功”

```
Session::delete_flash('success'); 
```

要了解有关会话课程的更多信息，您可以从下面的链接中了解

[FuelPhp 会话类文档](http://fuelphp.com/docs/classes/session/usage.html)

而且为了重定向用户，您不需要编写任何新的 PHP 代码，Fuel php 也为此提供了一个很好的接口，它的“响应”类具有为您定义的方法

这是您需要在任何控制器操作中重定向用户的方式

```
Response::redirect('yourRouteName'); 
```

利用框架中定义的类始终是一种很好的做法，这些类实际上是为了让开发人员的生活更轻松而定义的。

在您的编程方法中面向对象，尤其是在使用像fuelPhp 这样的优质OOP MVC 框架时，通过为您提供对现成的[Getter 和setter的访问，可以防止您总是重新发明轮子(](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters) [DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself) ) 。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:15:42.687

这种情况下的消息只显示一次（注册后），但我相信将来你的项目会出现很多这样的消息。

您应该制作代码片段来执行该操作并实现可重用性 - 在您执行某些操作后，您需要将消息存储到会话变量中，然后重定向到其他操作 例如：

```
 $_SESSION['msg'] = 'Your account has been created, please log in'; 
```

*   在屏幕目标上，检查是否设置了会话变量，然后打印存储在会话变量上的消息并清除它。

    ```
     <?php
            if(isset($_SESSION['msg']){
            ?>
            <script>
            //call some javascript function to display popup for example
            var msg = '<?php echo $_SESSION['msg']; ?>';
            display_popup_message(msg);

            function display_popup_message(msg){
                alert(msg);
            }
            </script>
            <?php
            unset($_SESSION['msg']);
            }
            ?> 
    ```

# c# - Windows 商店 xaml 和 c# 如何创建手风琴样式列表

> ID：15929515
> 
> 赞同：1
> 
> 时间：2013-04-10T15:01:45.867
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我有一个 ListView IsGroupedSource 在它的 CollectionViewSource 中设置为 true。我试图在单击组标题时切换组的可见性。

```
<CollectionViewSource
        x:Name="FiltersViewSource"
        Source="{Binding Filters}"
        IsSourceGrouped="true"
        ItemsPath="AttributeValues"
        />

<ListView
                    x:Name="filtersListView"
                    AutomationProperties.AutomationId="ItemListView"
                    AutomationProperties.Name="Grouped Items"                      
                    Grid.Row="1"
                    Margin="0,-10,0,0"
                    Padding="30"
                    ItemsSource="{Binding Source={StaticResource FiltersViewSource}}"
                    SelectionMode="None"
                    IsSwipeEnabled="false"
                    IsItemClickEnabled="True"
                    ItemClick="ItemView_ItemClick">
                    <ListView.GroupStyle>
                        <GroupStyle>
                            <GroupStyle.HeaderTemplate>
                                <DataTemplate>
                                    <Grid Margin="7,7,0,0">
                                        <Button AutomationProperties.Name="Group Title"
                                            Click="Header_Click"
                                            Style="{StaticResource TextPrimaryButtonStyle}">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding Name}" Foreground="White" FontSize="35" Margin="3,-7,10,10" Style="{StaticResource GroupHeaderTextStyle}" />
                                                <TextBlock Text="{StaticResource ChevronGlyph}" Foreground="White" HorizontalAlignment="Right" FontFamily="Segoe UI Symbol" Margin="0,-7,0,10" Style="{StaticResource GroupHeaderTextStyle}"/>
                                            </StackPanel>
                                        </Button>
                                    </Grid>
                                </DataTemplate>
                            </GroupStyle.HeaderTemplate>
                            <GroupStyle.Panel>
                                <ItemsPanelTemplate>
                                    <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,0,0"/>
                                </ItemsPanelTemplate>
                            </GroupStyle.Panel>
                        </GroupStyle>
                    </ListView.GroupStyle>
                    <ListView.ItemTemplate>
                        <DataTemplate >
                                <StackPanel  Visibility="{Binding Visibility}" Orientation="Horizontal">
                                    <CheckBox Margin="0,0,20,0"/>
                                    <TextBlock Text="{Binding Name}" Style="{StaticResource ItemTextStyle}" Foreground="White" FontSize="20" MaxHeight="40"/>
                                    <TextBlock Text="(40)" Style="{StaticResource ItemTextStyle}" Foreground="White" FontSize="25" MaxHeight="40"/>
                                </StackPanel>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView> 
```

基本上我正在尝试创建一个手风琴样式列表。我尝试添加。

```
<VariableSizedWrapGrid Visibility="{Binding Visibility}" Orientation="Vertical" Margin="0,0,0,0"/> 
```

可见性是基础组对象中可见性类型的属性。

但它不起作用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:28:28.510

您可以尝试将 Header Button 的 Command 属性绑定到视图模型命令，该命令会更改您将绑定到 VariableSizedWrapGrid 的组视图模型 Visibility 属性。

# php - 谷歌分析集成代码点火器

> ID：15929516
> 
> 赞同：1
> 
> 时间：2013-04-10T15:01:48.757
> 
> 标签：php, codeigniter, google-analytics

谷歌上有很多结果，但大多数都是一年多的。

我使用[了这个库](https://github.com/chonthu/Codeigniter-Google-Analytics-Class) ，但登录时出现错误：

> 遇到错误
> 
> Google Analytics API 库：GData authError AuthorizationInvalid Credentials

我的控制器代码是：

```
$this->load->library('ga_api');
$this->ga_api->login();
$data['google'] = $this->ga_api
->dimension('adGroup , campaign , adwordsCampaignId , adwordsAdGroupId')
->metric('impressions')
->limit(30)
->get_object();

$this->load->view('includes/template', $data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:12:45.380

我检查了库，它似乎在 Google Analytics 中使用了报告 API 的 v2。该 API 有一个新的 v3 版本。

对于授权，它使用 ClientLogin。从[ClientLogin 文档](https://developers.google.com/accounts/docs/AuthForInstalledApps "客户登录")：

> **重要提示**：ClientLogin 已于2012 年 4 月 20 日[正式弃用](http://googledevelopers.blogspot.com.br/2012/04/changes-to-deprecation-policies-and-api.html)。它将根据我们的[弃用政策](https://developers.google.com/accounts/terms)继续工作，但我们鼓励您尽快迁移到[OAuth 2.0](https://developers.google.com/accounts/docs/OAuth2)。

.

> **重要提示**：如果您的任何客户在使用 ClientLogin 时遇到问题，他们的帐户可能由于各种可能的原因与其不兼容。例如，使用两步验证、SAML 或 Open ID 的帐户与 ClientLogin 不兼容。[一种解决方法是告诉用户生成一个由访问代码](http://support.google.com/a/bin/answer.py?hl=en&answer=1032419)提供的一次性密码，这允许他们在 Web 浏览器中登录到他们的帐户并生成一个长密码，他们可以使用 ClientLogin 在任何应用程序的密码字段中输入该密码. 更好的解决方案是将您的应用程序转换为使用与所有现有 Google 帐户兼容的 OAuth 2.0。

如果您在您的帐户中启用了两步验证，您应该尝试访问代码解决方法，否则您应该联系库开发人员并建议他们放弃已弃用的授权方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:11:29.307

看来你有身份验证问题，所以你的 API 应该注册一些对谷歌的身份验证访问，你唯一可以忘记的，我在图书馆文档中找到的是：

```
// Set new profile id if not the default id within your config document
$this->ga = $this->ga_api->login()->init(array('profile_id' => '182918291281')); 
```

我想您需要一个 API 密钥或使用 profile_id，如本例所示

# mod-rewrite - Mod_rewrite 不包括子目录

> ID：15929517
> 
> 赞同：0
> 
> 时间：2013-04-10T15:01:50.207
> 
> 标签：mod-rewrite

我有一个 mod_rewrite （主要感谢堆栈成员 Olaf），它从 `index.php?URL=pages/the-page.php`简单重定向到`the-page`. 问题是，当请求的页面不是直接在`pages`（即`pages/sub`）中时，它会重定向我的 .css 和 .js ，这是不好的。

**我想要完成的是：**

*   只重写文件`pages`夹中的文件，但包括它的所有子目录。

重要的是它永远不会重写`files`文件夹的 URL。

这是代码：

```
Options +FollowSymlinks
RewriteEngine on
# prevent endless loop
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

# redirect the client
RewriteCond %{QUERY_STRING} URL=pages/(.+?)\.php
RewriteRule ^index\.php$ /gr/%1? [R,L]

# exclude rewriting all files located in /gr/files
RewriteCond %{REQUEST_URI} !^/gr/files/
# rewrite to real content
RewriteRule ^.*$ /gr/index.php?URL=pages/$0.php [L] 
```

我花了无数个小时与这段代码作斗争。即使是很小的更改也会引发 404 或 500 错误。

*它还会杀死外部链接*，使其成为 .com/www 而不是适当的地址，这是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:34:33.557

你不应该混淆 CSS 和脚本的 mod_rewrite 规则。这听起来像是一个相对 URI 问题。将您的链接更改为绝对 URI：

从：

```
<link rel="stylesheet" href="style.css" type="text/css"> 
```

至：

```
<link rel="stylesheet" href="/style.css" type="text/css"> 
```

或者“style.css”的绝对路径是什么。

如果您不想更改所有链接，请在页面标题中添加 URI 基础：

```
<base href="/"> 
```

# sql - Sql Join ，更新一个表并从另一个表生成输出

> ID：15929520
> 
> 赞同：0
> 
> 时间：2013-04-10T15:02:00.753
> 
> 标签：sql, create-table, updating

```
CREATE TABLE LeadCustomer 
( 
  CustomerID INTEGER NOT NULL, FirstName VARCHAR(20) NOT NULL, 
  Surname VARCHAR(40) NOT NULL, BillingAddress VARCHAR(200) NOT NULL, 
  email VARCHAR(30) NOT NULL    
)

CREATE TABLE Flight 
(
 FlightID INTEGER NOT NULL, FlightDate TIMESTAMP NOT NULL, 
 Origin VARCHAR(30) NOT NULL, Destination VARCHAR(30) NOT NULL, 
 MaxCapacity INTEGER NOT NULL, PricePerSeat DECIMAL NOT NULL
)

CREATE TABLE FlightBooking 
(
 BookingID INTEGER NOT NULL, CustomerID INTEGER NOT NULL, FlightID INTEGER NOT NULL,
 NumSeats INTEGER NOT NULL, Status CHAR(1) NOT NULL, BookingTime TIMESTAMP NOT NULL, 
 TotalCost DECIMAL 
) 
```

如果航班改期，我们如何生成需要联系的客户列表？

到目前为止，我已经完成了：

```
SELECT
LeadCustomer.CustomerID,Flight.FlightID 
FROM LeadCustomer 
inner join FlightBooking 
ON LeadCustomer.CustomerID = FlightBooking.CustomerID            
inner join 
Flight ON FlightBooking.FlightID = Flight.FlightID; 
```

但不知道如何更新飞行时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:14:27.120

我了解 Flight.FlightDate 等于 FlightBooking.BookingTime。当您更新第一列时，您可以搜索一个与另一个不同的地方，例如：

```
SELECT
LeadCustomer.CustomerID,Flight.FlightID 
FROM LeadCustomer 
inner join FlightBooking 
ON LeadCustomer.CustomerID = FlightBooking.CustomerID            
inner join 
Flight ON FlightBooking.FlightID = Flight.FlightID
WHERE Flight.FlightDate <> FlightBooking.BookingTime 
```

如果我错了，你能更好地解释一下吗

# hibernate - SQL 查询上的 DB2 Hibernate 分页

> ID：15929526
> 
> 赞同：1
> 
> 时间：2013-04-10T15:02:09.570
> 
> 标签：hibernate, db2, paging

我们在 DB2 中使用休眠。我们的方法需要分页来支持前端。我们使用`setMaxResults`and`setFirstResult`方法。这适用于 HQL，但是当我们尝试通过以下方式将 SQL 转换为 bean 时：

```
sql.setResultTransformer(Transformers.aliasToBean(SubscriptionAndDecode.class)); 
```

我们得到了异常：

```
org.hibernate.PropertyNotFoundException: Could not find setter for ROWNUMBER_ on class gov.usdoj.afms.enote.model.query.UM02.SubscriptionAndDecode 
```

这是真的，因为这个 bean 没有，`ROWNUMBER_`因为它不是 SQL 的一个元素。我在其他地方读到，Hibernate 应该构建一个子查询来创建一个假行号并进行分页，因为 DB2 没有提供太多帮助，但这`ROWNUMBER_`不应该是实际结果的一部分，也不应该是转换后 bean 的一部分我明白了。

当然，我们可以为每个以这种方式使用的 bean 添加一个“假”属性，但这不是最佳的。我们需要做些什么来按摩 bean 转换或其他什么？

# notepad++ - SublimeText 2 的搜索结果面板

> ID：15929527
> 
> 赞同：9
> 
> 时间：2013-04-10T15:02:14.390
> 
> 标签：notepad++, sublimetext2

我在 PC 上使用 Notepad++，在 Mac 上使用 Sublime Text 2。您可以在 Notepad++ 中“查找所有文本实例”，然后它将在窗口中显示查找结果。在这个窗口中，我看到了文本所在的行号和周围文本的片段。我觉得这非常有用。

Sublime Text 2 中是否有类似的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:06:21.617

您可以使用 Find All 然后 Cmd+F2 来设置书签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-09T03:30:03.133

是的。使用在文件中查找 ( **Ctrl+Shift+F** )，然后在“where:”文本字段的末尾选择“**添加当前文件”选项。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-24T03:33:23.103

如果您只想在notepad++之类的面板中看到这个，当您使用++搜索时，`ctrl`您可以单击“查找：”左侧的“使用缓冲区”按钮，然后答案将显示在屏幕下方的面板中`shift``f`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T04:39:30.670

如果您正在谈论的搜索框确实是您可以在按 Ctrl+F 或 Search->Find 时查看的标准搜索框，那么重新获得窗口的一种方法就像您使用 Windows 中具有默认处理的所有其他窗口一样：

按 Ctrl+F 或 Search->Find 以确保您的查找窗口位于前台并处于焦点位置。

```
1)OPress Alt+Space to open the Window Context Menu of your Find window.
2) Press Enter to select the "Move" entry of your context menu.
3) Press one of the Arrow Keys at least once.
4) Move your mouse. The Window should now follow your mouse coursor.  
   Place it wherever you need it, and click. 
```

问候 Arvind Yadav 先生 www.Objectzoom.com

# c# - 如何在 web api get 中返回 IEnumerable DbSet？

> ID：15929529
> 
> 赞同：3
> 
> 时间：2013-04-10T15:02:17.317
> 
> 标签：c#, .net, entity-framework, asp.net-web-api

“用户”类由实体框架模型第一个设计者自动生成。

```
public partial class user
{
    public user()
    {
        this.distributorDevice = new HashSet<distributorDevice>();
        this.managerDevice = new HashSet<managerDevice>();
        this.logUserLogin = new HashSet<logUserLogin>();
        this.logUserOperates = new HashSet<logUserOperates>();
        this.clientApp = new HashSet<clientApp>();
    }

    public int Id { get; set; }
    public string name { get; set; }
    public byte[] password { get; set; }
    public bool isActive { get; set; }
    public System.DateTime RegisterTime { get; set; }
    public int permissionId { get; set; }
    public System.DateTime lastLoginTime { get; set; }

    public virtual permission permission { get; set; }
    public virtual ICollection<distributorDevice> distributorDevice { get; set; }
    public virtual ICollection<managerDevice> managerDevice { get; set; }
    public virtual ICollection<logUserLogin> logUserLogin { get; set; }
    public virtual ICollection<logUserOperates> logUserOperates { get; set; }
    public virtual ICollection<clientApp> clientApp { get; set; }
    public virtual customerDevice customerDevice { get; set; }
} 
```

如果我这样写

```
 public class UserController : ApiController
 {
 public IEnumerable<user> Get()
    {
        List<user> users = new List<user>();
        return user;
    }
 } 
```

当我在资源管理器中访问“localhost:3700/api/user”时，它可以工作。

```
<ArrayOfuser xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/UpdateServer.Model"/> 
```

如果我这样写

```
 public IEnumerable<user> Get()
    {
        using (var mydb = new ModelContainer())
        {
            return mydb.userSet.AsEnumerable();
        }
    } 
```

当我在资源管理器中访问“localhost:3700/api/user”时，我收到错误消息：

```
103 (net::ERR_CONNECTION_ABORTED) 
```

按照建议，我应该使用 ToList() 而不是 asEnumerable，我像这样更改代码

```
using (var mydb = new ModelContainer())
        {
            var users = mydb.userSet.ToList();
            return users;
        } 
```

但是资源管理器中仍然出现同样的错误

```
103 (net::ERR_CONNECTION_ABORTED) 
```

我在

```
return users; 
```

发现用户已经从数据库中获取了数据，但是没有正确返回给客户端。

我做了更多测试，我添加了一个权限名称为“Admin”的用户，如果我使用下面的代码，没有找到用户，它正确地响应客户端。

```
var users = mydb.userSet.Where(p=>p.permission.name == "Administrator").ToList();
return users; 
```

如果我这样写

```
var users = mydb.userSet.Where(p=>p.permission.name == "Admin").ToList();
return users; 
```

返回客户端失败，报错

```
103 (net::ERR_CONNECTION_ABORTED) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:48:33.420

EF 使用延迟加载。这意味着 EF 在您尝试使用结果之前实际上不会调用数据库。

要解决这个问题，您可以使用[ToList()](http://msdn.microsoft.com/en-gb/library/bb342261.aspx)。不像[AsEnumerable](http://msdn.microsoft.com/en-gb/library/bb335435.aspx) ToList 会立即执行查询。

另一种选择是不处置上下文。尽管这看起来可能是错误的，但您实际上可以让数据库上下文保持活动状态，并在您不再使用任何返回的用户对象时让垃圾收集器获取它。

# java - 查询 URL 的 Android 浏览器历史记录

> ID：15929537
> 
> 赞同：0
> 
> 时间：2013-04-10T15:02:40.230
> 
> 标签：java, android, google-chrome, browser, android-intent

我可以使用以下方法查看 Android 浏览器历史记录：

```
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.Browser;
import android.widget.TextView;

public class ReadHistoryDetails extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
TextView tv = (TextView) findViewById(R.id.hello);
String[] projection = new String[] { Browser.BookmarkColumns.TITLE,
Browser.BookmarkColumns.URL };
Cursor mCur = managedQuery(android.provider.Browser.BOOKMARKS_URI,
projection, null, null, null);
mCur.moveToFirst();
int titleIdx = mCur.getColumnIndex(Browser.BookmarkColumns.TITLE);
int urlIdx = mCur.getColumnIndex(Browser.BookmarkColumns.URL);
while (mCur.isAfterLast() == false) {
tv.append("\n" + mCur.getString(titleIdx));
tv.append("\n" + mCur.getString(urlIdx));
mCur.moveToNext();
}
} 
```

但是，如果搜索符合我的预定义条件之一，我想搜索浏览器历史记录并执行新意图。

假设我想查询浏览器历史记录中包含 playboy.com 的任何内容

我想我会使用诸如：

```
public class ReadHistoryDetails extends Activity {
{
TextView tv = (TextView)findViewById(R.id.hello);
String[] projection = new String[] { Browser.BookmarkColumns.TITLE,
Browser.BookmarkColumns.URL };

Cursor cursor = managedQuery(android.provider.Browser.BOOKMARKS_URI,
projection, null, null, null);
 String urls = "";
if (cursor.moveToFirst()) {
String url1 = null;
String url2 = null;
do {
urls = urls
+ cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.TITLE)) + " : "
+ cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.URL)) + "\n";
} while (cursor.moveToNext()); 
tv.setText(urls);
} 
```

但是我收到一条错误消息`setText(String) is undefined for the type String ....`，并且由于这种格式错误的代码而缺少搜索结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:05:31.423

一个天真的实现：

```
Cursor cursor = managedQuery(android.provider.Browser.BOOKMARKS_URI,
                             projection, null, null, null);
String urls = "";
if (cursor.moveToFirst()) {
    String url1 = null;
    String url2 = null;
    do {
        // Just check if the url contains www.playboy.com
        String url = cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.URL));
        if (url.toLowerCase().contains("www.playboy.com")) {
        urls = urls
             + cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.TITLE)) + " : "
             + url + "\n";
        }
    } while (cursor.moveToNext()); 
tv.setText(urls);
} 
```

更优化的实现是将过滤器直接包含在查询中：

```
Cursor cursor = managedQuery(android.provider.Browser.BOOKMARKS_URI,
                             projection, Browser.BookmarkColumns.URL + " LIKE '%playboy.com%'" , null, null); 
```

# xml - 在 if-test 中根据数组检查文本字符串

> ID：15929538
> 
> 赞同：0
> 
> 时间：2013-04-10T15:02:40.917
> 
> 标签：xml, arrays, xslt, if-statement, xslt-1.0

有没有办法检查文本字符串是否包含预定数组中的任何条目？用例是我正在解析大量文本并寻找文本链接。因此，我正在浏览每个单词并检查每个单词以寻找流行的顶级域，看看它们是否是一个链接。这是一些损坏的代码，但给了您一个想法：

XML:

```
<feed>
  <description>You can come here to yourwebsite.org to learn more</description>
</feed> 
```

XSL：

```
<xsl:variable name="tlds" select="'.com .net .org .edu .gov .ly'" />

*** There is a bunch of XSL here that chopps up description into individual words to check ***

<xsl:if test="contains($current_word, $tlds)">
  The current word being checked contained an item in the array! 
</xsl:if> 
```

除了检查顶级域外，一切正常。所以我不需要任何循环或任何东西，只需要如何检查 $tlds 数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:33:43.957

目前，您的**$tlds**变量不是一个数组，而是一个简单的字符串。你可以做的是像这样设置变量，使它更像一个数组

```
<xsl:variable name="tlds">
   <tld>.com</tld>
   <tld>.net</tld>
   <tld>.org</tld>
   <tld>.edu</tld>
   <tld>.ly</tld>
</xsl:variable> 
```

然后在 XSLT 样式表中定义另一个变量来引用这个变量

```
<xsl:variable name="lookup" select="document('')//xsl:variable[@name='tlds']"/> 
```

然后，要查找**$tlds**变量中是否存在单词，只需执行以下操作：

```
 <xsl:if test="$lookup/tld=$word">
       The current word being checked contained an item in the array!
   </xsl:test> 
```

编辑：或者，如果您想检查一个单词是否包含数组中的一项，您可以这样做：

```
 <xsl:if test="$lookup/tld[contains($word, .)]">
       The current word being checked contained an item in the array!
   </xsl:test> 
```

例如，这里有一些 XSLT 充分展示了这一点

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="text"/>

   <xsl:variable name="tlds">
      <tld>.com</tld>
      <tld>.net</tld>
      <tld>.org</tld>
      <tld>.edu</tld>
      <tld>.ly</tld>
   </xsl:variable>

   <xsl:variable name="lookup" select="document('')//xsl:variable[@name='tlds']"/>

   <xsl:template match="description">
      <xsl:call-template name="checkword">
         <xsl:with-param name="word">www.pie.com</xsl:with-param>
      </xsl:call-template>
      <xsl:call-template name="checkword">
         <xsl:with-param name="word">www.pie.co.uk</xsl:with-param>
      </xsl:call-template>
   </xsl:template>

   <xsl:template name="checkword">
      <xsl:param name="word"/>
      <xsl:choose>
         <xsl:when test="$lookup/tld[contains($word, .)]">
             <xsl:value-of select="$word" /> is contained an item in the array!
         </xsl:when>
         <xsl:otherwise>
             <xsl:value-of select="$word" /> is not in the array
           </xsl:otherwise>
      </xsl:choose>
   </xsl:template>
</xsl:stylesheet> 
```

这应该输出以下内容：

```
www.pie.com is contained an item in the array!
www.pie.co.uk is not in the array 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T16:04:45.520

如果您的变量 $tlds 必须是“数组”（标识符的空白分隔列表），这是一个解决方案。这个想法是使用递归模板调用将该列表拆分为单词。（可能就像您已经对输入文本所做的那样。）

```
<xsl:template name="checkword">
    <xsl:param name="current_word"/>
    <xsl:variable name="contain_tld">
        <xsl:call-template name="check_tlds">
            <xsl:with-param name="current_word" select="$current_word"/>
            <xsl:with-param name="l_tlds" select="$tlds"/>
            <xsl:with-param name="cnt_tlds" select="0"/>
        </xsl:call-template>
    </xsl:variable>

    <xsl:if test="$contain_tld &gt; 0">
    The current word being checked contained an item in the array!
    </xsl:if>

</xsl:template>

<xsl:template name="check_tlds">
    <xsl:param name="current_word"/>
    <xsl:param name="l_tlds"/>
    <xsl:param name="cnt_tlds"/>

    <xsl:choose>
        <xsl:when test="contains($l_tlds,' ')">
            <xsl:variable name="result">
                <xsl:call-template name="check_tlds">
                    <xsl:with-param name="current_word" select="$current_word"/>
                    <xsl:with-param name="l_tlds" select="substring-before($l_tlds,' ')"/>
                    <xsl:with-param name="cnt_tlds" select="0"/>
                </xsl:call-template>
            </xsl:variable>
            <xsl:call-template name="check_tlds">
                <xsl:with-param name="current_word" select="$current_word"/>
                <xsl:with-param name="l_tlds" select="substring-after($l_tlds,' ')"/>
                <xsl:with-param name="cnt_tlds" select="$cnt_tlds+ $result"/>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:choose>
                <xsl:when test="contains( $current_word, $l_tlds)">
                    <xsl:value-of select="$cnt_tlds + 1"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="$cnt_tlds"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

这只应该表明这个想法。当然有一些改进可能。

# javascript - 在 onclick 事件下将 jstl 列表传递给 javascript 函数

> ID：15929552
> 
> 赞同：0
> 
> 时间：2013-04-10T15:03:10.300
> 
> 标签：javascript, jsp, jstl

正如标题所说。我从控制器中得到了一个对象，它的一个属性是一个列表。现在我想将此列表传递给外部文件 javascript 函数。

像这样的东西：

```
<a href="#" onClick="showAuthorityOverlay(<c:out value='${userDetail.grantedAuthorityList}'/>)">[SHOW AUTHORITY]</a> 
```

现在传递给 javascript 的值是这样的：

[ADMIN_USER，COMMON_USER]

因此，当我单击该链接时，我收到一个 javascript 错误消息：

ADMIN_USER 未定义。

这里有什么问题？是否将 ADMIN_USER 和 COMMON_USER 作为变量名？或者是什么？有点怪。

甚至尝试在我的jsp中制作一个内部脚本来获得这样的列表：

```
<script type="text/javascript>
    function showAuthorityOverlay() {
          var obj = "<c:out value='${userDetail.grantedAuthorityList}'/>";
          sendToExternalJSFile(obj);
    }
</script> 
```

但仍然得到相同的结果。看起来这些值没有作为 List 参数正确传递。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:13:30.910

JSTL 代码在服务器端执行。在这种情况下，它不是用于生成 HTML，而是用于生成 JavaScript 代码（这是完全有效的）。

`toString()`您调用的列表方法返回列表中`<c:out>`每个 Java 对象的 toString 表示，用逗号分隔它们，并用括号括起来。最终结果是

```
[ADMIN_USER, COMMON_USER] 
```

生成的 HTML + JavaScript 然后由浏览器下载，它解释 JavaScript 代码：

```
showAuthorityOverlay([ADMIN_USER, COMMON_USER]); 
```

这发生（偶然）是语法正确的 JavaScript 代码。这意味着：`showAuthorityOverlay()`使用 JavaScript 数组作为参数调用函数。该数组包含两个 JavaScript 变量的值`ADMIN_USER`和`COMMON_USER`.

我假设您实际上想要一个 JavaScript 字符串数组，它应该写为`['ADMIN_USER', 'COMMON_USER']`.

您应该做的是在控制器中将 Java 数组转换为 JSON 字符串，然后在 JavaScript 代码中使用此 JSON 字符串：

```
showAuthorityOverlay(${jsonString}) 
```

# symfony - Doctriine Query VS QueryBuilder Symfony 2.0

> ID：15929553
> 
> 赞同：1
> 
> 时间：2013-04-10T15:03:14.800
> 
> 标签：symfony, doctrine, query-builder

a 对 Doctrine Query 和 QueryBuilder 有点怀疑。

我曾经在存储库中使用简单的查询，例如：

```
$em = $this->getEntityManager();
$dql = "select X from ApuestaBundle:Apuesta X  ORDER BY X.Jornada DESC";
$query = $em->createQuery($dql);
$entity = $query->getResult(); 
```

但是我必须从 Sonata 的 Admin 类中修改函数“createQuery($context = 'list')”来过滤要显示的实体，并且我必须像这样使用查询生成器：

```
public function createQuery($context = 'list'){
     $query = $this->getModelManager()->createQuery($this->getClass(), 'entity');

     $query->select ('e');
     $query->from($this->getClass(), 'e');
     $query->from('CoreBundle\Entity\Resource', 'r');
     $query->where('e.id = r.id AND r.company = :company');
     $query->setParameter('company', 1);  

     return $query;
} 
```

所以，这是我的问题，这是使用 Query 或 QueryBuilder 的区别。因为这样，我不能调用一个Repository的函数来改变Admin Class的函数createQuery。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:51:12.077

回答你的第一个问题，一般学说的区别如下：

**Query**是表示 DQL 查询的对象。它上面的方法主要与水合和获取查询结果有关：例如getResult()、getArrayResult()、getSQL()

QueryBuilder是构建 DQL 查询的流畅方式**。**这些方法主要与添加/更改 DQL 子句有关：例如 select()、from()、where()

但是，我不确定从 ModelManagerInterface::createQuery() 返回的 Sonata ProxyQueryInterface。

# javascript - Windows Phone 7.1 中的 JavaScript

> ID：15929556
> 
> 赞同：1
> 
> 时间：2013-04-10T15:03:24.003
> 
> 标签：javascript, windows-phone-7

我正在创建一个 Windows 7.1 Phone 应用程序，我在其中使用 webbrowser 显示 ePUB 书。我想在这个 html 文件中添加一个 JavaScript 脚本，并想知道如何在我的应用程序的浏览器对象中启用 JavaScript？我已将该`IsScriptEnabled`属性设置为 true，但这似乎没有帮助。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:19:07.063

例如，您可以在 html 页面中添加 js 代码：

Xaml 文件

```
 <phone:WebBrowser Name="webBrowser" Height="500" HorizontalAlignment="Stretch" VerticalAlignment="Top" IsScriptEnabled="True" ScriptNotify="webBrowser_ScriptNotify"/> 
```

.cs文件

```
private void scrollTo_Click(object sender, RoutedEventArgs e)
    {
        string H = y.Text;
        webBrowser.InvokeScript("scroll", H);
    }

    private void getscroll_Click(object sender, RoutedEventArgs e)
    {
        webBrowser.InvokeScript("getScroll");
    }

    private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
            StreamReader reader = new StreamReader(TitleContainer.OpenStream("page.html"));
            string content = "<script language=\"JavaScript\">"
                + "function scroll(H)"
                + "{"
                + "window.scrollTo(0, H);"
                + "}"
                + "function getScroll()"
                + "{"
                + "var body = document.body;"
                + "var docElem = document.documentElement;"
                + "var Y = window.pageYOffset || docElem.scrollTop || body.scrollTop;"
                + "window.external.Notify(\"\"+Y);"
                + "}"
                + "</script>"
                + reader.ReadToEnd();
            webBrowser.NavigateToString(content);
    }

    private void webBrowser_ScriptNotify(object sender, NotifyEventArgs e)
    {
        y.Text = e.Value;
    } 
```

带有源代码的原始文章[（](http://wp7rocks.com/posts/details/2550)俄语）

# php - div 不会在 PHP 中使用 include 和 Javascript 刷新

> ID：15929557
> 
> 赞同：1
> 
> 时间：2013-04-10T15:03:24.030
> 
> 标签：php, html

我正在尝试创建一个登录页面。

现在您只需在 login.php 页面上单击*登录，然后它会向**index.php*发送一个请求，该请求会显示成功登录的消息并更改`loggedin`会话中使用的变量以查看用户是否已登录，然后重定向到主页。

现在我的*导航栏*（nav.php）检查会话变量`loggedin`并相应地显示内容，即用户是否登录以及他们是否可以看到我的个人资料链接等...

问题是当登录页面 ( `login.php`) 向登录页面发送请求时`index.php`，它会进行如下检查：

索引.php：

```
.row, .col { overflow: hidden; position: absolute; }
.row { left: 0; right: 0; }

...

.menu.row { height: 75px; top: 75px; background-color: #EDEDED;  }
...

<div class="menu row">
    <?php 
        include("nav.php"); ?>
</div> 

...

case 'logged_in':
    $_SESSION['loggedin'] = true;   
    print '<script type="text/javascript">'; 
    print 'alert("You have been logged in successfully and will be re-directed to your homepage...")'; 
    print '</script>';
    include('home.html');
    echo '<script type="text/javascript">$(".menu.row").load("index.php");</script>';
break; 
```

如您所见，最后一个 echo 语句尝试更新包含的菜单行 div 类，`nav.php`以反映`loggedin`正在显示的会话变量的更改，但它仅在我单击`nav.php`页面上的另一个链接后才显示更改。

所以基本上我在问为什么我的

```
echo '<script type="text/javascript">$(".menu.row").load("index.php");</script>'; 
```

不刷新包含我的*nav.php*的 div，从而允许*nav.php*执行 PHP 代码以检查变量`loggedin`并采取相应措施？

这是一些代码：

索引.php：

```
<?php session_start(); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>CC Chat</title>
        <meta 
        http-equiv="content-type" content="text/html; charset=utf-8" 
        />
        <!-- 
        Thanks too http://stackoverflow.com/a/7851347/1133011 for the help
        on layout which acts more like frames but avoids them and using divs. As frames have 
        known draw backs see here http://stackoverflow.com/questions/4600648/frames-with-php we
        should thus rather use include in php
        !-->
        <style type="text/css" media="screen">
        /* Generic pane rules */
        body { margin: 0 }
        .row, .col { overflow: hidden; position: absolute; }
        .row { left: 0; right: 0; }
        .col { top: 0; bottom: 0; }
        .scroll-x { overflow-x: auto; }
        .scroll-y { overflow-y: auto; }

        .header.row { height: 75px; top: 0; background-color: #E5E5E5; }
        .menu.row { height: 75px; top: 75px; background-color: #EDEDED;  }
        .body.row { top: 150px; bottom: 50px; background-color: #F5F5F5; }
        .footer.row { height: 75px; bottom: 0; background-color: #EBEBEB; }
        </style>
    </head>
    <body>
        <div class="header row">
        <?php include("header.html"); ?>
        </div> 

        <div class="menu row">
        <?php 
            include("nav.php"); ?>
        </div> 

        <div class="body row scroll-y">
        <?php
            if(isset($_GET['page'])) {
                switch ($_GET['page']) {
                    case 'login':
                        include('login.php');
                    break;
                    case 'logged_in':
                        $_SESSION['loggedin'] = true;   
                        print '<script type="text/javascript">'; 
                        print 'alert("You have been logged in successfully and will be re-directed to your homepage...")'; 
                        print '</script>';
                        include('home.html');
                        echo '<script type="text/javascript">$(".menu.row").load("index.php");</script>';
                    break;
                    case 'log_out':
                        $_SESSION['loggedin'] = false;
                        include('loggedout.html');
                    break;
                    case 'profile':
                        include('profile.php');
                    break;
                    case 'contact_us':
                        include('contact.html');
                    break;
                    default:
                    include('home.html');
                    break;
                }
            } else
                include('home.html'); 
        ?>
        </div> 

        <div class="footer row">
        <?php include("footer.php"); ?>
        </div>
    </body>
</html> 
```

导航.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Navigator</title>
        <meta
        http-equiv="content-type"
        content="text/html; charset=iso-8859-1"
        />
    </head>

    <body>
            <p align="center">
                <?php 
                    if(isset($_SESSION['loggedin'])) {
                        switch ($_SESSION['loggedin']) {
                            case true:
                                echo "<a href=\"index.php?page=home\">Home</a> <a href=\"index.php?page=contact_us\">Contact Us</a> <a href=\"index.php?page=profile\">My profile</a> <a href=\"index.php?page=log_out\">Log out</a>";
                            break;
                            default:
                                echo "<a href=\"index.php?page=home\">Home</a> <a href=\"index.php?page=contact_us\">Contact Us</a> <a href=\"index.php?page=login\">Login</a>";
                            break;
                        }
                    } else {
                        echo "<a href=\"index.php?page=home\">Home</a> <a href=\"index.php?page=contact_us\">Contact Us</a> <a href=\"index.php?page=login\">Login</a>";
                    }
                ?>  
            </p>
    </body>

</html> 
```

登录.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <title>Login</title>
        <meta http-equiv="content-type"
        content="text/html; charset=iso-8859-1"
        />
    </head>

    <body>
        <h2 align="center">Login</h2>
        <p align="center">
            <?php 
                $var=true;//user password was correct
                if($var==true){
                    echo '<a href="index.php?page=logged_in">Login</a>';
                } else {
                    print '<script type="text/javascript">'; 
                    print 'alert("Password is incorrect.")'; 
                    print '</script>';
                }
            ?> 
        </p>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:21:49.383

> 好的，但我看到我有 text/javascript" 我尝试更改为 echo cript type=text/jquery">$(".menu.row").load("index.php");; 但按下登录后仍然没有效果我仍然需要单击 nav.php 上的链接才能刷新 – David Kroukamp 4 分钟前

恐怕我无法发表评论，所以必须使用答案。将类型更改为 text/jquery 将不起作用。在调用 jQuery....之前包括以下内容

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

并将您的脚本类型保留为 text/javascript

您还可以下载最新的 jquery.min.js 并将其链接到您自己的服务器上，而不是链接到 googleapis.com

**更新**

目前，您正在包括 nav.php 并 THEN 设置会话变量。这就是为什么在页面加载后单击 nav.php 时它起作用的原因。

```
case 'logged_in':
                        $_SESSION['loggedin'] = true; 
```

以上需要先设置

```
include('nav.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:22:59.887

在 nav.php 中试试这个：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Navigator</title>
        <meta
        http-equiv="content-type"
        content="text/html; charset=iso-8859-1"
        />
    </head>

    <body>
            <p align="center">
                <?php 
                    if(isset($_GET) && isset($_GET['page'])) {
                        if($_GET['page'] == 'logged_in') {
                            echo "<a href=\"index.php?page=home\">Home</a> <a href=\"index.php?page=contact_us\">Contact Us</a> <a href=\"index.php?page=profile\">My profile</a> <a href=\"index.php?page=log_out\">Log out</a>";
                        } else {
                            echo "<a href=\"index.php?page=home\">Home</a> <a href=\"index.php?page=contact_us\">Contact Us</a> <a href=\"index.php?page=login\">Login</a>";
                        }
                    } else {
                        echo "<a href=\"index.php?page=home\">Home</a> <a href=\"index.php?page=contact_us\">Contact Us</a> <a href=\"index.php?page=login\">Login</a>";
                    }
                ?>  
            </p>
    </body>

</html> 
```

Switch 语句很棘手，所以我倾向于避开它们。您最初的错误是引用变量`$_SESSION['logged_in']`而不是`$_SESSION['page']`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:21:52.143

JavaScript 库是某人为提供特定功能而编写的一堆代码。它不是自己独立的语言。所以你`type`应该仍然是`text/javascript`。但是您需要在页面上包含该库。您可以从[http://jquery.com/download/](http://jquery.com/download/)下载它，也可以使用托管版本，如下所示：

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

如果您愿意，也可以使用 Google 的 CDN：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

* * *

***更新：***

`nav.php`看起来它包含整个 HTML 文档。您将其插入到另一个 HTML 文档中的 div 中。您应该修改 nav.php 以仅包含您想要进入 div 的内容（可能只是`<p>`标签的内容。

此外，看起来您并没有在 nav.php 中启动 PHP 会话。因此它将无法访问`$_SESSION`变量。确保你打电话`session_start();`。`nav.php`

# sql - SQL Server Group By/Sum By Company Name, Balance

> ID：15929560
> 
> 赞同：1
> 
> 时间：2013-04-10T15:03:31.853
> 
> 标签：sql, sql-server, stored-procedures

我在 SQL Server 2005 中工作。我有一个存储过程，它创建一个临时表并从数据库表中提取数据。该临时表包含付款人类别的名称、余额/信用、时间段（月）和余额的“年龄”（当前、逾期 30 天、逾期 60 天等）。

我现在需要做的是按保险公司名称和年龄对这些数据进行分组/求和。例如，Aetna 的每条记录都减少为一条记录。该记录具有当前余额字段、逾期 30 天余额字段、逾期 60 天余额字段等。Aetna 的每个当前余额应汇总在一个 Aetna 记录的第一个字段中。Aetna 的每 30 天逾期余额应在一条 Aetna 记录的第二个字段中求和，依此类推。结果表应如下所示：

```
Payor Class Cur         30          60          90          120         150
Aetna       1234.00     987.00      0.00        123.00      456.00      0.00
Blue Cross  3216.00     2100.00     321.00      0.00        212.00      401.00
Cigna       56123.00    30887.00    0.00        0.00        0.00        0.00
Kaiser      21003.00    1806.00     904.00      305.00      0.00        0.00 
```

我当前的存储过程从应用程序 (VB.NET) 获取开始日期，计算周期（即 30 天，60 天等），然后将所有余额记录拉入临时表。有一些预先确定的分组（医疗保险、医疗补助、私人），但任何不属于这些组之一的都被分配到一个付款人类别，该付款人类别只是付款人的姓名（例如 Aetna、Blue Cross 等）。

我的问题是我事先不知道可能有多少不同的保险公司记录，所以我不确定如何根据该记录和年龄进行分组/求和。如果可以避免的话，我宁愿不为每个循环做一个。任何帮助将非常感激！

当前的：

```
CREATE PROCEDURE [AgedReport]    
    @VCurrStart     DATETIME
AS
BEGIN
    SET NOCOUNT ON;

    BEGIN TRY

        CREATE TABLE #t_temp
            (
                payor_class             VARCHAR(30),
                bal                     DECIMAL(11, 2), 
                period                  DATETIME,               
                age                     VARCHAR(10)
            )

        CREATE TABLE #t_class
            (
                payor_class             VARCHAR(30),
                balType                 VARCHAR(10),
                balTotal                DECIMAL(11,2),
                balAdv                  DECIMAL(11,2),
                balCurr                 DECIMAL(11,2),
                bal30                   DECIMAL(11,2),
                bal60                   DECIMAL(11,2),
                bal90                   DECIMAL(11,2),
                bal120                  DECIMAL(11,2),
                bal150                  DECIMAL(11,2),
                bal180                  DECIMAL(11,2),
                bal210                  DECIMAL(11,2),
                bal240                  DECIMAL(11,2),
                bal270                  DECIMAL(11,2)
            )

        DECLARE @VCurrEnd           DATETIME
        DECLARE @V30Start           DATETIME
        DECLARE @V60Start           DATETIME
        DECLARE @V90Start           DATETIME
        DECLARE @V120Start          DATETIME
        DECLARE @V150Start          DATETIME
        DECLARE @V180Start          DATETIME
        DECLARE @V210Start          DATETIME
        DECLARE @V240Start          DATETIME

SET @VCurrEnd = DATEADD(DAY,-1,(DATEADD(MONTH,1,@VCurrStart)))
SET @V30Start = DATEADD(month,-1,@VCurrStart)
SET @V60Start = DATEADD(month,-2,@VCurrStart)
SET @V90Start = DATEADD(month,-3,@VCurrStart)
SET @V120Start = DATEADD(month,-4,@VCurrStart)
SET @V150Start = DATEADD(month,-5,@VCurrStart)
SET @V180Start = DATEADD(month,-6,@VCurrStart)
SET @V210Start = DATEADD(month,-7,@VCurrStart)
SET @V240Start = DATEADD(month,-8,@VCurrStart)

INSERT INTO #t_temp
            (
                payor_class,
                bal,
                period,             
                age
            )            
SELECT 
DISTINCT
                (CASE 
                    (CASE WHEN p.payor_specific = 1 THEN 
                        (SELECT TOP 1 ar_account
                            FROM payor_seg ps
                            WHERE ps.payor_code = b.payor_code 
                            AND ps.start_date <= @VCurrEnd 
                            ORDER BY ps.start_date DESC) 
                    ELSE (SELECT TOP 1 ar_account
                            FROM plan_seg pls 
                            WHERE pls.plan_code = b.plan_code 
                            AND pls.start_date <= @VCurrEnd 
                            ORDER BY pls.start_date DESC) END) 

                WHEN '123100' THEN 'Private'
                WHEN '123110' THEN 'Medicaid'
                WHEN '123120' THEN 'Medicaid'
                WHEN '123130' THEN 'Medicaid'
                WHEN '123140' THEN 'Medicare A'             
                WHEN '123150' THEN 'Medicare B'

                ELSE (CASE WHEN p.payor_specific = 1 THEN 
                        (CASE WHEN (SELECT TOP 1 payor_name
                                    FROM payor p
                                    WHERE p.payor_code = b.payor_code) IS NULL THEN
                            'UNKNOWN'
                              WHEN (SELECT TOP 1 payor_name
                                    FROM payor p
                                    WHERE p.payor_code = b.payor_code) = '' THEN
                            'UNKNOWN'
                              ELSE '*' + SUBSTRING(p.payor_name,1,19) END)                            

                    WHEN p.payor_specific = 0 THEN 
                        (CASE WHEN (SELECT TOP 1 plan_description
                                    FROM plans pl
                                    WHERE pl.plan_code = b.plan_code) IS NULL THEN
                            'UNKNOWN'
                              WHEN (SELECT TOP 1 plan_description
                                    FROM plans pl
                                    WHERE pl.plan_code = b.plan_code) = '' THEN
                            'UNKNOWN'                             
                              ELSE '*' + SUBSTRING(pl.plan_description,1,19) END)
                    ELSE 'UNKNOWN'
                    END) END),

                b.bal,
                b.period,               
                (SELECT CASE 
                WHEN period > @VCurrStart THEN 'ADV'
                WHEN period = @VCurrStart THEN 'CUR'
                WHEN period = @V30Start THEN '30'
                WHEN period = @V60Start THEN '60'
                WHEN period = @V90Start THEN '90'
                WHEN period = @V120Start THEN '120'
                WHEN period = @V150Start THEN '150'
                WHEN period = @V180Start THEN '180'
                WHEN period = @V210Start THEN '210'
                WHEN period = @V240Start THEN '240'
                WHEN period < @V240Start THEN '270'
                END)
            FROM balance b WITH(NOLOCK)         

SELECT * FROM #t_temp

END TRY
    BEGIN CATCH

    END CATCH
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:56:44.823

除非我遗漏了您的一些要求，否则应该执行以下操作：

```
SELECT payor_class, SUM(balCurr), SUM(bal30), SUM(bal60), SUM(bal90), SUM(bal120), 
       SUM(bal150), SUM(bal180), SUM(bal210), SUM(bal240), SUM(bal270)
FROM Temp
GROUP BY payor_class
ORDER BY payor_class 
```

如果`payor_class`不是保险公司**名称**而只是一些代码，那么我可以添加`INNER JOIN`到具有全名的表中。

# javascript - 在 2D Javascript 数组中复制元素

> ID：15929561
> 
> 赞同：0
> 
> 时间：2013-04-10T15:03:33.143
> 
> 标签：javascript, arrays, multidimensional-array

我有一个循环运行 2D 数组的长度。我需要一种方法来复制其中一个子数组（打开一个循环）并将其添加到主数组的末尾（使循环也通过该元素。）一切正常，直到我尝试添加新数组。抽象代码如下。

```
var agent = new Array()
    agent[0] = ["Black",    0,  5,  7]
    agent[1] = ["Yellow",   1,  3,  2]
    agent[2] = ["Orange",   5,  9,  2]
    agent[3] = ["Pink",     8,  1,  5]
    agent[4] = ["Blue",     9,  5,  8]  

for(i=0;i<=agent.length;i++){
   //Test something
   if(something == true) {    
       agent.push = agent[i]
   }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:06:32.590

```
agent.push = agent[i] 
```

应该

```
agent.push(agent[i]); 
```

***编辑：***如果要复制数组，请使用：

```
agent.push(agent[i].slice(0)); 
```

# java - 原因：java.sql.SQLException: Connection is not associated with a managed connection.org.jboss.resource.ada

> ID：15929564
> 
> 赞同：10
> 
> 时间：2013-04-10T15:03:43.370
> 
> 标签：java, hibernate, jboss, jboss5.x, h2

我有一个带有 Jboss、Seam、Hibernate 和 h2 的应用程序。我编写了一个简单的操作，用于从外部文件将数据导入数据库。

```
@Name("importAction")
@AutoCreate
@Scope(ScopeType.CONVERSATION)
@Transactional
public class ImportCosAction extends AbstractAction {

saveOrUpdate(member);

protected void saveOrUpdate(AbstractEntity entity) {
    final Session session = getSession();
        session.saveOrUpdate(entity);
    flushSession();
} 
```

它按预期的数字工作，但是，在某些时候我得到以下异常：

```
16:50:13,558 ERROR [JDBCExceptionReporter] Connection is not associated with a managed connection.org.jboss.resource.adapter.jdbc.jdk5.WrappedConnectionJDK5@3c4b0529
16:50:13,558 ERROR [AbstractFlushingEventListener] Could not synchronize database state with session
org.hibernate.exception.GenericJDBCException: Could not execute JDBC batch update
        at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:126)
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:114)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
        at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:275)
        at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:114)
        at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:109)
        at org.hibernate.jdbc.AbstractBatcher.prepareBatchStatement(AbstractBatcher.java:244)
        at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2252)
        at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2688)
        at org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:79)
        at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:263)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:167)
        at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:321)
        at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
        at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1027)
        at org.jboss.seam.persistence.HibernateSessionProxy.flush(HibernateSessionProxy.java:187)
        at com.capecapital.dealmarket.usecase.AbstractAction.flushSession(AbstractAction.java:434)
        at com.capecapital.dealmarket.usecase.registration.AbstractRegistrationAction.createNewAccount(AbstractRegistrationAction.java:251)
        at com.capecapital.dealmarket.usecase.registration.RegistrationAction.primRegister(RegistrationAction.java:71)
        at com.capecapital.dealmarket.usecase.registration.AbstractRegistrationAction.register(AbstractRegistrationAction.java:146)
        at com.capecapital.dealmarket.usecase.importCoS.ImportCosAction.register(ImportCosAction.java:401)
        at com.capecapital.dealmarket.usecase.importCoS.ImportCosAction.execute(ImportCosAction.java:154)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.seam.util.Reflections.invoke(Reflections.java:22)
        at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:32)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56)
        at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:28)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.transaction.TransactionInterceptor$1.work(TransactionInterceptor.java:97)
        at org.jboss.seam.util.Work.workInTransaction(Work.java:47)
        at org.jboss.seam.transaction.TransactionInterceptor.aroundInvoke(TransactionInterceptor.java:91)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:44)
        at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
        at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107)
        at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:185)
        at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:103)
        at com.capecapital.dealmarket.usecase.importCoS.ImportCosAction_$$_javassist_seam_18.execute(ImportCosAction_$$_javassist_seam_18.java)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:335)
        at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:280)
        at org.jboss.el.parser.AstMethodSuffix.getValue(AstMethodSuffix.java:59)
        at org.jboss.el.parser.AstMethodSuffix.invoke(AstMethodSuffix.java:65)
        at org.jboss.el.parser.AstValue.invoke(AstValue.java:96)
        at org.jboss.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
        at com.sun.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:68)
        at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
        at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
        at javax.faces.component.UICommand.broadcast(UICommand.java:387)
        at org.ajax4jsf.component.AjaxViewRoot.processEvents(AjaxViewRoot.java:329)
        at org.ajax4jsf.component.AjaxViewRoot.broadcastEventsForPhase(AjaxViewRoot.java:304)
        at org.ajax4jsf.component.AjaxViewRoot.processPhase(AjaxViewRoot.java:261)
        at org.ajax4jsf.component.AjaxViewRoot.processApplication(AjaxViewRoot.java:474)
        at org.openfaces.ajax.richfaces.A4JAjaxViewRoot.access$301(A4JAjaxViewRoot.java:28)
        at org.openfaces.ajax.richfaces.A4JAjaxViewRoot$1.parentProcessApplication(A4JAjaxViewRoot.java:51)
        at org.openfaces.ajax.CommonAjaxViewRoot.processApplication(CommonAjaxViewRoot.java:197)
        at org.openfaces.ajax.richfaces.A4JAjaxViewRoot.processApplication(A4JAjaxViewRoot.java:112)
        at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
        at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:265)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.openfaces.util.ResourceFilter.doFilter(ResourceFilter.java:99)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83)
        at org.jboss.seam.web.RewriteFilter.doFilter(RewriteFilter.java:63)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at com.capecapital.dealmarket.filter.UserAgentFilter.doFilter(UserAgentFilter.java:46)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at com.capecapital.dealmarket.filter.DealmarketExceptionFilter.doFilter(DealmarketExceptionFilter.java:72)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:42)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)
        at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290)
        at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388)
        at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515)
        at org.jboss.seam.web.Ajax4jsfFilter.doFilter(Ajax4jsfFilter.java:56)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at com.capecapital.dealmarket.filter.RequestLoggingFilter.doFilter(RequestLoggingFilter.java:90)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.HotDeployFilter.doFilter(HotDeployFilter.java:53)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60)
        at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69)
        at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:433)
        at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
        at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.sql.SQLException: Connection is not associated with a managed connection.org.jboss.resource.adapter.jdbc.jdk5.WrappedConnectionJDK5@3c4b0529
        at org.jboss.resource.adapter.jdbc.WrappedConnection.lock(WrappedConnection.java:81)
        at org.jboss.resource.adapter.jdbc.WrappedStatement.lock(WrappedStatement.java:64)
        at org.jboss.resource.adapter.jdbc.WrappedStatement.executeBatch(WrappedStatement.java:767)
        at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:70)
        at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:268)
        ... 117 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T18:12:54.500

此错误意味着您的代码正在使用不再有效的连接（即，由于连接错误或应用程序的无效连接缓存而关闭/销毁的连接，其中缓存的连接被上游的其他代码关闭）。在您的情况下，池中的连接 ID 是`@3c4b0529`. 因此，您可以在 TRACE 级别的日志记录中参考此内容，以查看是否可以找出连接关闭的原因（由于一些错误，例如 DB 终止连接或网络问题或应用程序代码错误地处理连接）。

1.  您**应该**优化您的代码，使交易完成的时间不会太长。`deploy/transaction-jboss-beans.xml`另一种选择是增加`TransactionManager`bean的事务超时时间：-

    .... 300 ....

    默认值为 5 分钟（300 秒）。增加此事务超时可能会有所帮助，但这实际上并不能解决根本原因，即您的应用程序中长时间运行的事务。增加事务超时的副作用是您将资源保留更长时间，因此它会对 JBoss 中其他服务的性能产生负面影响。

我希望你不打算`h2`在生产中使用。`h2`不适用于持久性的生产用途。

2.  您还应该检查您的数据源设置以确保您`idle-timeout-minutes`没有被禁用（设置为 0）。默认值为 15 分钟，如果事务之间的连接空闲时间超过该时间，您可以增加它。

3.  最后，请确保您没有缓存任何数据源连接对象或语句，因为这些对象或语句可能会保留过时的连接或语句太久。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-17T03:36:08.233

最近我遇到了同样的问题，调试后发现我在执行语句之前关闭了连接，确保你的连接仍然是打开和有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-08T13:48:07.337

我有同样的问题。我的问题是我尝试在仅执行读取操作的连接上调用提交或回滚。

# c++ - 需要帮助开始使用 Boost.Python

> ID：15929566
> 
> 赞同：10
> 
> 时间：2013-04-10T15:03:44.740
> 
> 标签：c++, python, boost, boost-python

我正在尝试构建我的第一个 Boost.Python 示例。

```
#include <iostream>
#include <boost/python.hpp>

using namespace boost::python;

class Hello {

public:
    std::string greet() {
        std::cout << "Hello World" << std::endl;
    }
};

BOOST_PYTHON_MODULE(hello)
{
    class_<Hello>("Hello")
        .def("greet", &Hello::greet);
}

int main() {
    std::cout << "Boost.Python Test" << std::endl;
    Hello hello;
    hello.greet();
    return 0;
} 
```

编辑：正如@cdhowie 所指出的，缺少 Python 开发标头。我已经找到并包含了所需的头文件。现在链接器抱怨：

```
 10:43:58 **** Build of configuration BoostPythonTest-DPar for project BoostPythonTest 

****
make all 
Building file: ../src/BoostPythonTest.cpp
Invoking: GCC C++ Compiler
/usr/local/bin/g++-4.7 -I/usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/include/python3.3m -I/usr/include -I/usr/local/Cellar/gcc/4.7.2/gcc/include/c++/4.7.2 -O0 -g3 -p -pg -Wall -c -fmessage-length=0 -std=c++11 -MMD -MP -MF"src/BoostPythonTest.d" -MT"src/BoostPythonTest.d" -o "src/BoostPythonTest.o" "../src/BoostPythonTest.cpp"
Finished building: ../src/BoostPythonTest.cpp

Building target: libBoostPythonTest-DPar.dylib
Invoking: MacOS X C++ Linker
/usr/local/bin/g++-4.7 -L/usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/lib/python3.3/config-3.3m -L/usr/local/Cellar/python3/3.3.0/Frameworks/Python.framework/Versions/3.3/lib -L/usr/local/Cellar/boost/1.51.0/lib -std=c++11 -Xlinker -ldl -framework CoreFoundation -lpython3.3m -dynamiclib -o "libBoostPythonTest-DPar.dylib"  ./src/BoostPythonTest.o   -lpython3.3m -lboost_python-mt -lpython3.3
Undefined symbols for architecture x86_64:
  "boost::python::detail::init_module(PyModuleDef&, void (*)())", referenced from:
      _PyInit_hello in BoostPythonTest.o
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status
make: *** [libBoostPythonTest-DPar.dylib] Error 1 
```

我已经链接到`-lpython3.3m -lboost_python-mt -lpython3.3`- 还缺少什么？

编辑：我想我已经链接到`python3.3-config`列出的所有内容。由于缺少符号，链接仍然不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T15:19:16.177

当发生这种特定的链接器错误时，通常是应用程序针对一个 Python 版本（例如 Python 3.x 头文件）构建的结果，而该`boost_python`库是针对不同版本（例如 2.x）构建的。

在[`boost/python/module_init.hpp`](http://svn.boost.org/svn/boost/tags/release/Boost_1_53_0/boost/python/module_init.hpp)中，该`init_module`函数在针对 Python 3.x 构建时具有以下签名：

```
PyObject* boost::python::detail::init_module(PyModuleDef&, void(*)()); 
```

以及针对 Python 2.x 构建时的以下签名：

```
PyObject* boost::python::detail::init_module(char const* name, void(*)()); 
```

[从实现](http://svn.boost.org/svn/boost/tags/release/Boost_1_53_0/libs/python/src/module.cpp)中可以看出，Boost.Python 库中只有一个函数。因此，鉴于正在链接 Boost.Python 库，而链接器只是抱怨无法解析 3.x`init_module`函数，那么 Boost.Python 库很可能是针对 Python 2.x 构建的版本，而应用程序代码是针对 Python 3.x 头文件构建的。您可以通过转储 Boost.Python 库的符号并检查`init_module`签名来验证这一点。

要解决此问题，请使用构建 Boost.Python 的同一版本的 Python 构建应用程序。在这种情况下，要么：

*   使用 Python 2.x 头文件构建应用程序并链接到 Python 2.x 库。
*   针对 Python 3.x 构建 Boost.Python。 [本](http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html#get-boost)文档描述了构建 Boost 的步骤，[本](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/building.html)文档详细介绍了 Boost.Python。可能有必要使用参数显式地提供 Boost.Python 将在此`bootstrap`过程中构建的 Python 可执行文件`--with-python`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T15:05:59.617

您缺少 Python 开发标头。你的 Linux 发行版应该有一个包。（例如，`python-dev`在 Debian 或 Ubuntu 上。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T19:45:12.213

您正在构建一个共享库，因为这就是二进制 Python 模块。为此，您需要 -shared 或 -dynamic （查看文档），并且您不应该有 main() 函数。

此外，如果这没有帮助并且您仍然有链接器错误，请使用“objdump -T --demangle /path/to/lib”来找出库包含哪些符号以及它是否具有您需要的符号。还要检查“ldd”的输出，它列出了依赖的共享对象。这应该会提示您链接哪个或哪些库。

在我的系统上，我还有一个名为“python-config”和“python2.7-config”的程序。检查你是否有类似的东西，因为这个脚本知道至少要为 python 链接哪些库。一个类似的工具是 pkg-config，它更通用，也可能为 boost 提供信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T20:47:43.760

不确定这是否是这样做的方法，但似乎 PY_VERSION_HEX 设置错误。如果你会发生什么

```
#define PY_VERSION_HEX 0x03300000 
```

在您的 BoostPythonTest.cpp 中包含 boost.python 标头之前？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T18:30:15.237

您还必须与 Boost.System 以及链接器提到的任何其他库进行链接。此外，尝试其他编译器，例如XCode 附带的Clang( [https://svn.boost.org/trac/boost/ticket/7536 )（](https://svn.boost.org/trac/boost/ticket/7536) [XCode 4.5 中的最新 Clang 位置](https://stackoverflow.com/questions/12525247/latest-clang-location-in-xcode-4-5)）。另外，尝试发布您的makefile。另一种尝试是使用 bjam/b2 而不是 make。

# c# - 如何将操作推送到 Excel 撤消堆栈？

> ID：15929567
> 
> 赞同：10
> 
> 时间：2013-04-10T15:03:45.100
> 
> 标签：c#, excel, vsto

我正在构建一个操作多个单元格值的 VSTO Excel 加载项。我想允许用户通过标准 Excel 功能撤消和重做由加载项创建的更改。我宁愿避免使用 VBA。

这可能吗？如果是这样，怎么做？

另一个问题：是否可以检查现有的撤消/重做堆栈？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T22:14:57.820

您没有提及您希望使用哪个版本的 Excel/.NET/VSTO 运行时，但这并不重要：]
如果不注入 VBA，就无法完成自定义撤消，您需要设置一个撤消方法来回滚您的操作，通过使用补偿（即反向操作）或通过恢复保存的状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T03:24:23.893

我知道您想避免使用 VBA，但正如其他人所提到的，这实际上是不可能获得`Undo`.

这是一个 VBA 示例，它将现有选择保留为自定义数据类型，以便以后可以撤消。

```
Option Explicit
'Stores info about current selection'
Public OldWorkbook As Workbook
Public OldSheet As Worksheet
Public OldSelection() As SaveRange

'Custom data type for undoing'
Type SaveRange
    Value As Variant
    Address As String
End Type

Public Sub YourSubRoutine()
    'A simple subroutine that acts on a Range selection'
    Dim UserRange As Range

    Set UserRange = Selection

    If UserRange Is Nothing Then
        Exit Sub
    End If

'## The next block of statements '
'## Save the current values for undoing '
    Set OldWorkbook = ActiveWorkbook
    Set OldSheet = ActiveSheet

    Application.ScreenUpdating = False

    '## Code to manipulate the Selection range '
    '## Code to manipulate the Selection range '
    '## Code to manipulate the Selection range '

    '## Specify the Undo Sub '
    Application.OnUndo "Undo the YourSubRoutine macro", "UndoYourSubRoutine"

End Sub
Public Sub UndoYourSubRoutine()

Dim i As Integer

'   Undoes the effect of the YourSubRoutine '

'   Tell user if a problem occurs '
    On Error GoTo Problem

    Application.ScreenUpdating = False

'##  Make sure the correct workbook and sheet are active '
    OldWorkbook.Activate
    OldSheet.Activate

'## Restore the saved information '
    For i = 1 To UBound(OldSelection)
        Range(OldSelection(i).Address).Value = OldSelection(i).Value
    Next i
    Exit Sub

'   Error handler'
Problem:
    MsgBox "Can't undo"

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T19:26:53.930

您可以使用以下方法将操作添加到堆栈：

```
Application.OnUndo text, procedureName 
```

其中**Text**是与 Undo 命令（编辑菜单）一起出现的文本，**procedureName**是您的一个潜艇的名称。您还可以使用以下方式以编程方式撤消操作：

```
Application.Undo 
```

我认为不可能访问现有的撤消操作；至少我从来没有听说过。可能有一个您可以在线访问的图书馆允许这样做。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-04T14:28:30.313

我实际使用的解决方案如下：

*   保存剪贴板状态的副本
*   清除剪贴板
*   以制表符/换行符分隔的格式生成我想要的数据，将其推送到剪贴板
*   模拟 Ctrl+V 操作到 Excel
*   清除剪贴板
*   恢复原始剪贴板状态

显然，这仅限于单元格操作，因此您不能将任意操作/回调推送到撤消堆栈。此外，我显然违反了在 Windows 中使用剪贴板的原则，但如果 Microsoft 为此类事情公开了更好的 API（*提示*），我就不必这样做了。

此外，我没有采用我在对 David Zemens 的回答的第一条评论中描述的解决方案，因为我在我们的环境中遇到了一些安全违规行为（即，将 VBA 代码注入工作簿是禁止的）。

不管怎样，谢谢大家！

# c# - DateTimePicker 也显示时间

> ID：15929568
> 
> 赞同：0
> 
> 时间：2013-04-10T15:03:47.360
> 
> 标签：c#, date, time, picker

我的表单上有一个日期和时间选择器，它应该只以这种格式显示时间：

```
01-May-13. 
```

我已将属性中的自定义格式设置为：dd/mm/yyyy，但该值仍显示我在列表框（链接）中加载数据的时间。

这是我用来显示数据库中数据的代码：

```
 private void loadlist() // methode om de lijsten te laden (SELECT*)
    {
        listBox1.Items.Clear();  // Maakt listBox1 leeg
        listBox2.Items.Clear();  // Maakt listBox2 leeg
        listBox3.Items.Clear(); // Maakt listBox3 leeg
        listBox4.Items.Clear(); // Maakt listBox4 leeg
        cn.Open();                  // DB connectie openen
        cmd.CommandText = "SELECT * FROM tafel"; // Query
        dr = cmd.ExecuteReader();
        if (dr.HasRows)
        {
            while (dr.Read())
            {
                listBox1.Items.Add(dr[1].ToString());  // Voegt rows uit tbl in listbox
                listBox2.Items.Add(dr[2].ToString());  // en zet ze om in string
                listBox3.Items.Add(dr[3].ToString());
                listBox4.Items.Add(dr[4].ToString());
            }
        }
        cn.Close();
    } 
```

![在此处输入图像描述](https://i.stack.imgur.com/1E9ZG.png)

我当前的格式是：dd/MM/yyyy（它在列表框中显示：10-Apr-2013 17:08）

如果这是一个简单的问题，我很抱歉。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:11:30.557

尝试几种不同的方法。

```
string dateOnly = dateTimeVariable.ToString("dd-MM-yyyy"); 
```

或者

```
dateTimeVariable.ToShortDateString(); 
```

两者都应该给你你正在寻找的东西。

编辑：从您的代码中，现在试试这个：

```
DateTime.Parse(dr[1]).ToShortDateString()); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T15:20:33.450

```
Convert.ToDateTime(dr[1].ToString()).ToString("yyyy/MM/dd"); 
```

添加这个

# networking - 如何连接到 ec2 上的 ac# 聊天服务器

> ID：15929570
> 
> 赞同：1
> 
> 时间：2013-04-10T15:03:49.277
> 
> 标签：networking, tcp, amazon-ec2, udp

我用 c# 创建了一个聊天服务器。我可以在本地主机上运行这一切，客户端可以连接到服务器。

我设置了 Amazon EC2 云服务。我在那里设置服务器并启动它。我无法从运行在家用计算机上的客户端连接到运行在我的 ec2 实例中的服务器。

我设置了一个弹性 IP 地址。然后我将它分配给运行服务器的实例。

我设置安全组如下：

![在此处输入图像描述](https://i.stack.imgur.com/2vB5A.png)

![在此处输入图像描述](https://i.stack.imgur.com/0FJoU.png)

我现在可以 ping 我的服务器，但我的客户端仍然无法连接到服务器。（我意识到开放安全组这么危险，但这是针对学校项目，所以我只需要一次运行 5 分钟）

我错过了什么？如何让我的客户端连接到我的服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:58:58.003

检查 TcpListener 绑定的源代码。它应该监听所有 IP 地址而不是本地主机，这是一个常见的错误。使用 IPAddress.Any。

# javascript - javascript 库中的透明覆盖

> ID：15929572
> 
> 赞同：0
> 
> 时间：2013-04-10T15:03:50.610
> 
> 标签：javascript

我正在使用下面的代码从我网站上的链接创建画廊。我知道没有完全保护图像，但想在图像上添加透明覆盖。我可以通过将图像放在 div 标签中并使用 css 来查看执行此操作的方法，但我不确定这是否适合我正在使用的 javascript。

有没有人有办法在 javascript 中添加覆盖？

```
 <script type="text/javascript">
    var mygallery=new simpleGallery({
        wrapperid: "simplegallery1", //ID of main gallery container,
        dimensions: [250, 180], //width/height of gallery in pixels. Should reflect dimensions of the images exactly
        imagearray: [
            ["gallery/img1.png", "", "_new", "&copy; me"],
            ["gallery/img2.png", "", "_new", "&copy; me"],
            ["gallery/img3.png", "", "_new", "&copy; me"],

        ],
        autoplay: [true, 2500, 2], //[auto_play_boolean, delay_btw_slide_millisec, cycles_before_stopping_int]
        persist: false, //remember last viewed slide and recall within same session?
        fadeduration: 500, //transition duration (milliseconds)
        oninit:function(){ //event that fires when gallery has initialized/ ready to run
            //Keyword "this": references current gallery instance (ie: try this.navigate("play/pause"))
        },
        onslide:function(curslide, i){ //event that fires after each slide is shown
            //Keyword "this": references current gallery instance
            //curslide: returns DOM reference to current slide's DIV (ie: try alert(curslide.innerHTML)
            //i: integer reflecting current image within collection being shown (0=1st image, 1=2nd etc)
        }
    })
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:29:27.973

在您的画廊上添加一个透明的 div。

你可以这样做：

```
.overlay {
    height : 100px; // height and width of your gallery
    width : 200px;
    z-index: 2000000!important;
    opacity:0.00001;
    position:absolute;
} 
```

[http://jsfiddle.net/659hq/](http://jsfiddle.net/659hq/)

# elasticsearch - 如何在弹性搜索中停止正在进行的导入

> ID：15929573
> 
> 赞同：0
> 
> 时间：2013-04-10T15:03:50.710
> 
> 标签：elasticsearch

我已经使用 oneshot 策略设置了一个 jdbc 河，并成功导入了我的数据库数据。

但是当我重新启动服务器时，它又开始重新索引所有数据。

我怎样才能停止这个过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:07:50.430

河流完成后，您可以使用以下命令将其从 _river 索引中删除：

```
curl -XDELETE localhost:9200/_river/you_river_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T18:45:15.507

您可以关闭河流，然后在稍后重新打开：

```
POST _river/_close 
```

打开：

```
POST _river/_open 
```

注意：我已经从集群 ip 所在的位置执行了这些操作：localhost:9200

**更新**

DELETE _river 就可以了。

# ruby - 时间戳中最近午夜的时间戳

> ID：15929575
> 
> 赞同：3
> 
> 时间：2013-04-10T15:03:57.703
> 
> 标签：ruby

我有时间戳

```
timestamp = Time.now.utc.to_f 
```

我需要在同一天的午夜 UTC 找到时间戳：

```
t = Time.at timestamp
Time.at(((t - t.hour * 3600).to_f / 3600).to_i * 3600).to_f 
```

有没有办法获得相同的时间戳而不必将原始对象转换`timestamp`为`Time`对象？以类似于将时间戳四舍五入到最近一小时的方式：

```
(timestamp / 3600).to_i * 3600 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:07:15.350

由于 UTC 时间戳从 1970 年 1 月 1 日UTC**午夜**开始，只需执行以下操作：

```
timestamp - timestamp % (3600*24) 
```

这将为您提供世界标准时间最后一个午夜的时间戳。

要调整您的时区，只需在计算模数**之前**添加或删除相应的小时数，然后添加或删除它们以获得相应的 UTC 时间戳。

# javascript - 嵌套滑动视图

> ID：15929576
> 
> 赞同：0
> 
> 时间：2013-04-10T15:04:10.100
> 
> 标签：javascript, html, carousel, mobile-website, swipeview

我遇到了这样一种情况，我有父 SwipeView 轮播（工作正常）并且在其中一个页面内我需要制作图像轮播（通过滑动）。我希望为此使用 SwipeView，但我运气不佳。当我滑动图像时，它也开始滑动父页面，因此两个页面最终都发生了变化。

任何建议将不胜感激。

谢谢，斯坦

```
EDIT: Here's a quick and dirty fiddle http://jsfiddle.net/RNTDN/ 
```

# java - java select语句不起作用

> ID：15929579
> 
> 赞同：0
> 
> 时间：2013-04-10T15:04:13.997
> 
> 标签：java, jdbc, ms-access-2010

我正在尝试从 Access DB(2010) 中的表中返回记录，但每次运行该语句时，我都会收到此错误：

`"AWT-EventQueue-0" java.lang.NullPointerException` 我初始化**stmt**的线程中的异常

 **我没有在这段代码中显示数据库的名称。这是我的代码：

```
public class util {

static String path = "path to db";         
static String database = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ="+path;

  static Connection conn ; 
  static Statement s;

 public static boolean  ajouterFormule(String formule){
     boolean success = false;
      PreparedStatement stmt;
    try{
       Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
       conn = DriverManager.getConnection(database, "", ""); 
       String ajout_sql = "INSERT INTO FORMULE(form_nom)"
             + "VALUES(?)";

       stmt= conn.prepareStatement(ajout_sql);
       stmt.setString(1, formule);
       int num_row = stmt.executeUpdate();
       if(num_row > 0)
           success =true;
    }
    catch(Exception e){
        System.out.println(e.getMessage());
             System.out.println("ERROR2");
    }
     return success;
 }

public static String[] getFormule()throws SQLException{
  String[] arr = new String[10];
   String getFormSql = "SELECT form_nom, form_statut "
            + "from formule";
    int i=0;
      System.out.println("NO");
    //Statement stmt = null;
    // ResultSet rs ;
    try{                   
        Statement stmt =  conn.createStatement();
      //  System.out.println(stmt);
        stmt.execute(getFormSql);
        ResultSet rs = s.getResultSet();
        while(rs.next()){
           String txt = rs.getString("form_nom");
    //       arr[i] = rs.getString("form_nom");
           System.out.println("Nothing..."+txt);

           i++;
        }
    }
    catch(SQLException e){
         System.out.println(e.getMessage());
          System.out.println("Error..");
    }
    System.out.print("Length "+ arr.length);

    return arr;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:22:05.340

getFromSql 等于“SELECT form_nom,form_statutfrom formule”，你必须写：

```
String getFormSql = "SELECT form_nom,form_statut "
            + "from formule"; 
```

注意statut后面的空格''

编辑：当你这样做的时候

```
Statement stmt =  conn.createStatement();
      //  System.out.println(stmt);
        stmt.execute(getFormSql);
        ResultSet rs = s.getResultSet(); 
```

您从与刚刚执行的语句不同的语句中读取 ResultSet。

编辑之二：初始化连接的方式也搞砸了。它是一个静态字段，但只有在调用插入方法 'ajouterFormule' 时才对其进行初始化：

```
conn = DriverManager.getConnection(database, "", ""); 
```

你没有在你的选择方法'getFormule'中这样做，所以如果你选择而不先插入你的连接将为空。

删除您的静态字段（conn 和 s），并在每种方法中为您的连接和您的语句使用本地字段（此外，您应该在完成插入/选择后关闭它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:07:03.980

看起来你还没有`conn`在任何地方初始化。

您需要在访问它之前对其进行初始化。**

# database - ClickOnce 和管理连接字符串

> ID：15929580
> 
> 赞同：3
> 
> 时间：2013-04-10T15:04:14.877
> 
> 标签：database, encryption, sql-server-ce, clickonce, user.config

我们的应用程序使用 ClickOnce 由用户在他们的计算机上进行无管理员部署。该应用程序有一个包含敏感数据的 SqlServerCE 数据库。要求是在部署时以及之后每 20 天更改一次数据库密码（可配置）。我们正在处理 db 密码更改、connstring 更改和加密 app.config 文件的 connString 部分 ok。

问题在于后续的 ClickOnce 部署。如果新部署的数据库与初始部署不同（manifest 中的 hash 值发生了变化），则没有问题。新数据库替换旧数据库并具有立即更新的初始默认密码。

当新部署的数据库与初始部署相同（manifest 中的哈希值相同）时，就会出现问题。ClickOnce 将旧数据库滚动到新部署中，但应用程序不再有权访问密码。它在旧的 app.config 文件中，并且不会前滚。您会认为，当 db 存在时，至少连接字符串部分会前滚，但我想这要求太多了。

所以好吧，不是问题。我们添加了将当前密码复制到 user.config 文件中的代码。现在在部署时，如果应用程序无法打开数据库，它会从 user.config 中获取密码并更新 app.config 中的连接字符串。ClickOnce 似乎会自动复制旧 user.config 的内容并创建新的 user.config，而无需应用程序执行诸如调用 settings.default.upgrade() 和 .Save() 之类的操作。

但如果 user.config 被加密，这将不起作用。似乎 ClickOnce 尝试将数据从旧的 u.config 文件复制到新文件，但由于加密而失败。因此它只包含在 app.config 的 userSettings 中部署的任何数据。

是否有任何机制可以访问旧的 user.config 文件、解密和获取其中包含的数据？旧的和新的 user.config 在 ClickOnce 数据文件夹集中都可用，但我不想编写试图手动定位旧文件的代码。

就本地数据的安全性而言，ClickOnce 是一头野兽。它只是没有帮助。如果我无法让 user.config 工作，我将不得不在 ClickOnce 无法控制的某个用户可访问区域中放置一个文件，并从那里管理密码数据。内容当然会被加密。

# php - 每5分钟自动调用一个类函数

> ID：15929586
> 
> 赞同：0
> 
> 时间：2013-04-10T15:04:26.657
> 
> 标签：php, function

是可以编码可以自动调用X类函数的PHP脚本。

例如我有一个类，带有一个函数LoadAuto RSS()，这个最新的加载信息来自CNN 网站的一个RSS 提要，我想每隔5 分钟函数会applelée automatiquement.yat 有解决方案吗？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:10:43.160

你到底想达到什么目的？如果您想定期运行更新数据库中的值、移动服务器上的文件或类似内容的服务器端功能，您需要查看[Cron 作业](http://en.wikipedia.org/wiki/Cron)。

另一方面，如果您想以固定的时间间隔向已将您的网站加载到其浏览器中的用户显示新内容，那么您正在寻找基于[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)的解决方案。

`/run_me.php`每 5 分钟调用一次的示例 cron-job ：

```
*/5 * * * * /usr/bin/wget -q -O /dev/null http://localhost/run_me.php 
```

# android - 如何获得可用的网络运营商？（使用 RIL 和非 API 方法）

> ID：15929591
> 
> 赞同：1
> 
> 时间：2013-04-10T15:04:39.567
> 
> 标签：android, ril

**免责声明**- 我知道调用非 API 方法会如何影响我的应用程序。它不会在 Google Play 上发布，我创建它只是为了个人使用。

**任务**- 在有根手机 (Android 2.3.3) 上获取可用的网络运营商。型号已知。

**我试过什么**

很多反思：

*   试图得到`PhoneFactory`，得到默认`Phone`（`getDefaultPhone`）或`GSMPhone`。我收到了一个实际的参考`PhoneProxy`并且能够调用`getAvailableNetworks`它返回一个`CommandException`- RADIO_NOT_AVAILABLE
*   试图`RIL`直接实例化。尝试以`getAvailableNetworks`相同的结果调用此处（RADIO_NOT_AVAILABLE）。试图调用`registerForAvaiable`它永远不会将消息发送回处理程序。
*   试图连接`LocalSocket`到“rild”。得到`IOException: Permission denied`

我已经使用存储在我的应用程序尝试了上述所有`/system/app/`操作 - 结果是相同的。

**问题**

1.  甚至可以在`RIL`不使用系统密钥签署我的应用程序或使用自定义 Android 构建的情况下访问方法吗？
2.  也许我可以通过直接为 Linux 构建应用程序来克服这个问题？
3.  非常感谢有关此问题的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:09:01.600

有趣的问题 - 如果我们可以访问 RIL，那就太好了。

在 XDA 上，我有时会找到显示 RIL 信息的应用程序。当我仔细观察时，我通常会发现他们正在调用键盘代码，然后解析输出 - 而不是调用 API。哦，这是其中一个应用程序。（此方法是特定于制造商的。）
[http://forum.xda-developers.com/showthread.php?t=1687249](http://forum.xda-developers.com/showthread.php?t=1687249)

这是关于PhoneFactory等的帖子。
[https://stackoverflow.com/a/6504808/150016](https://stackoverflow.com/a/6504808/150016)

这里有一个关于该主题的很好的讨论：
[可以通过 sdk 实例化一个 telephony.Phone 对象吗？](https://stackoverflow.com/questions/2143754/can-a-telephony-phone-object-be-instantiated-through-the-sdk?lq=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-12T02:23:05.017

您可以构建自己的 RIL 实现。您可以通过设置 android 属性 rild.lib 来告诉 Android 加载您的库。在有根手机上，你可以做

```
getprop | grep ril 
```

查看您当前使用的 rild 库。

有针对 sierra gsm 加密狗/华为加密狗等的开源 ril 实现。你会有所了解。

但并非一切都容易实现。使用这种机制，您只能实现 android 对您进行的回调。例如，它不允许您进行数据漫游连接。这仍然由 android 框架控制。

要将您当前的 rild 库更改为您自己的，您可以设置

```
setprop rild.lib \system\modules\yourlibrary.so 
```

另见[http://www.kandroid.org/online-pdk/guide/telephony.html](http://www.kandroid.org/online-pdk/guide/telephony.html)

# opencl - 两个缓冲区的索引副本

> ID：15929592
> 
> 赞同：0
> 
> 时间：2013-04-10T15:04:46.667
> 
> 标签：opencl, gpu, gpgpu

我有以下例程，它应该根据在 index.html 中找到的索引将元素从 src 矩阵复制到 dst 矩阵。索引计算正确，但 dst 未更新。我错过了什么？

```
__kernel void
src_indexed_copy(__global real *dst, __global const real *src,
   __global const int *index, int src_offset)
{
        int id = get_global_id(ROW_DIM);
        int src_idx = src_offset + index[id];
        dst[id] = src[src_idx];
} 
```

全局工作区具有与索引数组中的索引一样多的工作项。

线性代码看起来像这样：

```
for (k = 0; k < n; k++) {
        dst[k] = src[m * column + index[k]];
} 
```

它从矩阵 src 的列中复制所有索引元素。

这就是我读取缓冲区的方式（在评论中询问）：

```
rc = clEnqueueReadBuffer(ompctx->clctx.queue, c,
        CL_TRUE, 0, i * sizeof(real), &tmp[0],
        0, NULL, NULL);
if (rc != CL_SUCCESS) {
    log_error("omp", "[%d] readbuf() failed", rc);
    goto err;
}
log_info("omp", "c");
for (k = 0; k < i; k++) {
    log_info("omp", "%6.8f", tmp[k]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:57:33.047

主机代码一定有问题。请验证：

*   **所有**OpenCL API 调用的返回值，
*   缓冲区创建标志（您需要对目标缓冲区进行 WRITE 访问），
*   内核参数对应于内核代码。

# java - 使用digester3模式从xml属性中提取值

> ID：15929594
> 
> 赞同：2
> 
> 时间：2013-04-10T15:04:47.327
> 
> 标签：java, apache-commons-digester

有xml：

```
<root>
  <person id = "123"/>
</root> 
```

豆映射：

```
public class Root {
    private Person person;
    public void setPerson(Person person) ...
}

public class Person {
    String id;
    public void setId(String id) ...
} 
```

我不知道，**如何**以这种风格使用它的**setter** ( )来实现类设置`digester3`的**模式：**`id``Person`**`setId(String id)`**

 **```
new AbstractRulesModule() {
        @Override
        protected void configure() {
            forPattern("root").createObject().ofType(Root.class);    
            forPattern("root/person").createObject().ofType(Person.class).then().setNext("setPerson");
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-06T11:33:56.507

使用**callMethod()**和**callParam()**。您的代码将是这样的：

```
new AbstractRulesModule() {
    @Override
    protected void configure() {
        forPattern("root").createObject().ofType(Root.class);
        forPattern("root/person").createObject().ofType(Person.class).then()
                .callMethod("setId").withParamCount(1).then()
                .callParam().ofIndex(0).fromAttribute("id").then()
                .setNext("setPerson");
        }
} 
```

您可以查阅[digester3 的javadoc](http://commons.apache.org/proper/commons-digester/apidocs/index.html?org/apache/commons/digester3)以获得更好的想法。**

# memory - 如何分析 neo4j 商店中的磁盘空间使用者？

> ID：15929596
> 
> 赞同：1
> 
> 时间：2013-04-10T15:04:48.190
> 
> 标签：memory, profiling, neo4j

在考虑 neo4j 存储使用的磁盘空间时，可以粗略地将 Lucene 所需的数据（索引文件夹的内容）和 neo4j 本身使用的数据（我的 neo4j 文件夹的内容）分开。

但是，就像在[WinDirStat](http://windirstat.info/)中一样，是否可以在边和顶点级别分析哪些元素/子图是最大的磁盘空间消耗者？

# speech-recognition - 如何使用 CMU Sphinx 进行强制对齐音素识别？

> ID：15929597
> 
> 赞同：2
> 
> 时间：2013-04-10T15:04:51.463
> 
> 标签：speech-recognition, text-to-speech, cmusphinx

我正在研究简单的 TTS 引擎。最好有一个自动双音素分割系统，它采用录音机声音和音素下标（对于单个话语）并设置声音中的音素边界。可以用 CMU Sphinx 完成吗？我应该使用哪个版本的狮身人面像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:12:01.653

您可以使用 Sphinxtrain 训练特定于您的扬声器的扬声器相关模型。有关培训的更多详细信息，请参阅

[http://cmusphinx.sourceforge.net/wiki/tutorialam](http://cmusphinx.sourceforge.net/wiki/tutorialam)

要分割数据库，您可以使用 sphinx3_align 二进制文件，如下所示：

```
 sphinx3_align \
    -hmm <model_dir> \
    -dict dictionary.dic \
    -ctl db.fileids \
    -cepdir <feats_folder> \
    -cepext .mfc \
    -insent db.transcription \
    -outsent db.out \
    -phlabdir phlabdir 
```

电话级别对齐将在名为 phlabdir 的文件夹中创建

# wpf - 将移动应用程序从 asp.net 映射到 wpf

> ID：15929598
> 
> 赞同：1
> 
> 时间：2013-04-10T15:04:55.767
> 
> 标签：wpf, mapquest

我工作的公司决定创建一个与我们网站功能相似的 wpf 应用程序。该网站的主要组成部分之一是使用 MapQuest javascript api。我的任务是开发一种适用于 wpf 应用程序的替代方案。

我做了大量的研究，并模拟了一个 WebBrowser 控件，该控件包含一个可以在其中构建地图的 html 页面。不幸的是，我们使用的不仅仅是地图，还有多边形地理围栏、点、方向等……这需要（在 asp.net 端）大量客户端脚本来处理所有这些。根据我对 wpf 和 WebBrowser 控件的了解，增加了另一层复杂性来管理所有客户端脚本。

我的问题是——

我是否继续沿着这条路径创建 WebBrowser 控件？或者.. 我应该看看 GMap.NET 等第三方库吗？

**一个旁注。MapQuest 是我唯一的选择，因为我们需要付费才能使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:33:08.437

找到了解决方案……嗯，不是真正的问题解决方案，但是……公司决定走 bing map api for wpf 的路线。在 WebBrowser 中使用 MapQuest javascript api 走另一条路线将是维护的一场噩梦。

# jquery - 未捕获的 ReferenceError - Jquery 冲突

> ID：15929601
> 
> 赞同：1
> 
> 时间：2013-04-10T15:05:00.470
> 
> 标签：jquery

我遇到了滑动导航和滑块之间的 JQuery 冲突问题。任何帮助，将不胜感激！在 Chrome 控制台中，我得到：

```
Uncaught ReferenceError: $ is not defined smooth-scroll.js:2
Uncaught ReferenceError: jQuery is not defined jquery.sticky.js:112
Uncaught ReferenceError: jQuery is not defined jquery.fancybox-1.3.4.pack.js:46
Uncaught ReferenceError: jQuery is not defined
Uncaught ReferenceError: jQuery is not defined jquery.mousewheel-3.0.4.pack.js:14
Uncaught ReferenceError: $ is not defined index.html:46
Uncaught ReferenceError: $ is not defined index.html:52 
```

这是我的标题：

```
<head>
  <meta charset="utf-8">
    <title>DCC Marketing - Decatur Illinois Public Relations, Advertising, Strategic Planning, & Web Development</title>
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="robots" content="" />

    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Oxygen">
    <link href="css/reset.css" rel="stylesheet" type="text/css" />
    <link href="css/960.css" rel="stylesheet" type="text/css" />
    <link href="css/styles.css" rel="stylesheet" type="text/css" />
    <link href="fancybox/jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css" />

    <link rel="stylesheet" href="css/example.css">
    <style>
        body {-webkit-font-smoothing: antialiased;font: normal 15px/1.5 "Helvetica Neue", Helvetica, Arial, sans-serif;}
        #slides {display: none;margin-top:36px;}
        .slidesjs-container {width:1000px;height:252px;margin-bottom:-21px;}
        #slides .slidesjs-navigation {margin-top:-17px;visibility: hidden;}
        #slides .slidesjs-previous {margin-right: 5px;float: left;visibility: hidden;}
        #slides .slidesjs-next {margin-right: 5px;float: left;visibility: hidden;}
        .slidesjs-pagination {margin: 0px 6px 0;float: right;list-style: none;position:relative;z-index:1000;}
        .slidesjs-pagination li {float: left;margin: 0 1px;}
        .slidesjs-pagination li a {visibility:hidden;display: block;width: 14px;height: 0;padding-top: 14px;background-image: url(images/pagination.png);background-position: 0 0;float: left;overflow: hidden;}
        .slidesjs-pagination li a.active,
        .slidesjs-pagination li a:hover.active {background-position: 0 -14px}
        .slidesjs-pagination li a:hover {background-position: 0 -28px}
        #slides a:link,
        #slides a:visited {color: #333}
        #slides a:hover,
        #slides a:active {color: #9e2020}
        .navbar {overflow: hidden}
    </style>

    <script type="text/javascript" src="js/smooth-scroll.js"></script>
    <script type="text/javascript" src="js/jquery.sticky.js"></script>
    <script type="text/javascript" src="fancybox/jquery.fancybox-1.3.4.pack.js"></script>
    <script type="text/javascript" src="js/jquery.easing-1.3.pack.js"></script>
    <script type="text/javascript" src="fancybox/jquery.mousewheel-3.0.4.pack.js"></script>
    <script type="text/javascript" src="cform.js"></script>

<script type="text/javascript"> // sticky nav bar 
  $(document).ready(function(){
    $("nav").sticky({topSpacing:0});
  });
</script>

<script type="text/javascript"> // fancybox
$(document).ready(function() {

    $("a.single_image").fancybox();

    $("a#inline").fancybox({
        'hideOnContentClick': true
    });

    $("a.group").fancybox({
        'transitionIn'  :   'elastic',
        'transitionOut' :   'elastic',
        'speedIn'       :   600, 
        'speedOut'      :   900, 
        'overlayShow'   :   false
    });

});
</script>
</head> 
```

这是设置滑块的正文中的代码：

```
 <div id="slides">
    <img src="images/flash1.png">
    <img src="images/flash2.png">
    <img src="images/flash3.png">
      <a href="#" class="slidesjs-previous slidesjs-navigation"><i class="icon-chevron-left icon-large"></i></a>
      <a href="#" class="slidesjs-next slidesjs-navigation"><i class="icon-chevron-right icon-large"></i></a>
    </div>
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script src="js/jquery.slides.js"></script>
<script>
$(function(){
  $("#slides").slidesjs({
    play: {
      active: true,
      effect: "slide",
      interval: 5000,
      auto: true,
      swap: true,
      pauseOnHover: true,
      restartDelay: 2500,
      width:936,
      height:247
    }
  });
});
</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:06:36.713

在加载“js/smooth-scroll.js”之前加载“js/jquery-1.9.1.min.js”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:07:22.200

```
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script> 
```

把它移到顶部。它应该在包含任何其他脚本之前包含在内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:08:07.047

Jquery javascript文件应该首先加载，所以，试着把它移到顶部

```
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script> 
```

# symfony - 树枝和子控制器之间有东西在吃我的东西

> ID：15929608
> 
> 赞同：2
> 
> 时间：2013-04-10T15:05:23.967
> 
> 标签：symfony, twig, symfony-2.2

好的，首先是免责声明。我正在处理我的第一个 Sf2 项目并处理现有的 sf1 项目，将其重构为 Sf2 以了解所有抽屉已移至何处。

现在，发生了一些奇怪的事情，它让我扯掉了最后一根头发。

**--- TL;DR：总结 ---**

我正在从树枝模板渲染控制器并将数组传递给该子控制器。数组值之一是一个对象，但该对象在到达控制器之前就消失了。

我已经尽我所能通过 Symfony2 流程追踪它，并且我可以追踪到该对象是完整的。然后我迷路了，但是在 Symfony\Component\HttpKernel\Fragment\InlineFragmentRenderer::render() 和我的（子）控制器之间的某个地方，对象消失了。

这是一个功能，一个错误还是只是我发疯了？

**- - 详细地 - -**

我有一个 twig 模板，它处理一个实体对象（分配给 twig 变量“collection”），其中包含链接的实体，例如 imageItem 和 linkedPageItem）。

我的实体已设置为扩展实现 ArrayAccess 的基类，因此无论对象是否水合，我都可以使用数组表示法访问值。（遵循此处概述的选项#1 方法：http: [//docs.doctrine-project.org/en/latest/cookbook/implementing-arrayaccess-for-domain-objects.html](http://docs.doctrine-project.org/en/latest/cookbook/implementing-arrayaccess-for-domain-objects.html)）。

在树枝中，我有一条这样的线，它将一些对象传递给子控制器以渲染图像块。renderImage 子控制器在渲染自己的树枝块之前管理所有内容的清理。

这是主树枝文件中的代码：

```
{# blockLinks.html.twig #}
...
{{- render(controller(
    'MyBundle:Helper:renderImage',
    {
        'image': collection['imageItem'], 
        'options': {
            'html_options': { 'class': 'foo' },
            'link_options': { 'class': 'bar' },
            'link_url':     collection['item_link_url'],
            'link_page':    collection['linkedPageItem']
        }
    }
)) -}}
... 
```

但是，renderImage 子控制器永远不会收到 $options['link_page'] 的值。

这很奇怪，所以我更详细地研究了它。我找到了 twig 将 blockLinks.html.twig 渲染到的 PHP 文件，并对其进行了深入研究。

在那里我们发现：

```
// /app/cache/dev/twig/01/30/lotsofnumbers.php
...
echo $this->env->getExtension('http_kernel')->renderFragment($this->env->getExtension('http_kernel')->controller(
    "CaponicaFdsWebsiteBundle:Helper:renderImage", 
    array(
        "image" => $this->getAttribute($_collection_, "imageItem", array(), "array"), 
        "options" => array(
            "html_options" => array("class" => "foo"), 
            "link_options" => array("class" => "bar"),
            "link_url" => $this->getAttribute($_collection_, "item_link_url", array(), "array"), 
            "link_page" => $this->getAttribute($_collection_, "linkedPageItem", array(), "array")
        )
    )
));
... 
```

好的，看起来不错。

为了弄清楚我做了什么`\Doctrine\Common\Util\Debug::dump($this->getAttribute($_collection_, "linkedPageItem", array(), "array"));`，它报告说这确实返回了一个 Page 对象。

即它报告类似：

```
object(stdClass)[874]
  public '__CLASS__' => string 'MyBundle\Entity\Page'
... 
```

从缓存中编译的 twig php 文件开始
-> Symfony\Bridge\Twig\Extension\HttpKernelExtension::renderFragment()
-> Symfony\Component\HttpKernel\Fragment\FragmentHandler::render()
-> Symfony\Component\HttpKernel\Fragment \InlineFragmentRenderer::render()

此时对象仍然完好无损（通过在调用 $this->kernel->handle($subRequest, HttpKernelInterface::SUB_REQUEST, false) 之前转储 $subRequest->attributes->get('options') 可以看到）；在 InlineFragmentRenderer 的第 62 行）

我不确定接下来会去哪里。我以为它去了 [\vendor\symfony\symfony\src]Symfony\Bundle\FrameworkBundle\HttpKernel 但我似乎无法跟踪那里的任何活动。

但是，如果我查看 renderImage 控制器并转储如下选项：

```
// MyBundle\Controller\HelperController.php

public function renderImageAction($image, $options = array()) {
    print_r(\Doctrine\Common\Util\Debug::dump($options)); // I'm sure there's a 1337 way to use the logger/toolbar for this, I'll figure that out some other day
    ...
} 
```

我明白了：

```
array (size=2)
  'html_options' => 
    array (size=1)
      'class' => string 'foo' (length=3)
  'link_options' => 
    array (size=1)
      'class' => string 'bar' (length=3) 
```

换句话说，'link_page' 对象已经从选项中*删除*了——一些饥饿的东西（而且非常可怕）似乎潜伏在 Symfony 的深处并吃掉我的对象！

这是一个功能吗？（你不能将数组中的对象传递给子请求......也许这激怒了超级严格的 MVC 神？）
或者它是一个错误？（有些东西正在吃它不应该吃的东西？）
或者我只是把这根棍子弄错了？

我希望有人能帮忙，在我失去最后一根头发之前......

C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T16:09:47.913

将渲染函数与控制器函数结合使用时，您可以传递对象。我的意思是，它应该得到支持，并且应该按照您的方式工作。

但也许你遇到了和这个家伙一样的 bug，它似乎与 Doctrine2 对象特别相关：[https ://github.com/symfony/symfony/issues/7124](https://github.com/symfony/symfony/issues/7124)

# makefile - CMake：具有明确目标及其相互依赖关系的并行构建？

> ID：15929609
> 
> 赞同：0
> 
> 时间：2013-04-10T15:05:29.437
> 
> 标签：makefile, cmake

我正在使用`cmake`它生成我`make`在基于 GCC 的环境中执行的 GNU Makefile。经过几年的使用，现在才意识到我有问题：

想象一下这是我的 CMakelists.txt：

```
add_library(lib1 STATIC empty.cpp)
add_library(lib2 STATIC empty.cpp)
add_library(lib3 STATIC empty.cpp)
add_executable(main main.cpp)
target_link_libraries(main lib1 lib2 lib3) 
```

（empty.cpp 为空，main.cpp 为 void main(void){}）

然后我运行`cmake`和`make -j4`. 它按预期工作：它并行构建 lib1、lib2 和 lib3 并将其链接到 main。

但是，如果我运行`make -j4 main lib1`（因此明确说明 main 和 lib1 目标）它会构建 lib1 两次。输出：

```
[200%] [300%] [300%] [300%] Building CXX object CMakeFiles/lib1.dir/empty.cpp.o
Building CXX object CMakeFiles/lib3.dir/empty.cpp.o
Building CXX object CMakeFiles/lib2.dir/empty.cpp.o
Building CXX object CMakeFiles/lib1.dir/empty.cpp.o
Linking CXX static library liblib1.a
Linking CXX static library liblib3.a
Linking CXX static library liblib2.a
Linking CXX static library liblib1.a
[300%] Built target lib1
[300%] Built target lib1
[  0%] Built target lib3
Built target lib2
Building CXX object CMakeFiles/main.dir/main.cpp.o
Linking CXX executable main
Built target main 
```

这是正常的吗？为什么 make 没有意识到 lib1 被调用了两次？这是cmake或make中的问题吗？有解决方法或正确的方法吗？这是一个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T12:02:19.097

这是*正常行为*。它确实意识到它`lib1`被调用了两次，但它只是检查是否`lib1`已构建。

说为`main`它建`lib1`。但是对于`lib1`您*明确*指定的目标，它会再次检查相同的内容。

# caching - 同一项目中的 Azure 共享缓存和并置缓存

> ID：15929610
> 
> 赞同：0
> 
> 时间：2013-04-10T15:05:31.860
> 
> 标签：caching, azure, azure-caching

所以我想知道是否可以同时使用 Azure 共享缓存和新的共同定位缓存来实现 Web 角色？我想将会话状态存储在旧的 Azure 共享缓存中，以使用 VIP 交换保留应用程序部署之间的会话状态。我想使用新的共存缓存来缓存内存中的值，这些值被频繁访问但在数据库中不经常更改，因此使它们成为使用新的共存缓存和通知进行缓存的理想选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:46:45.847

应该可以正常工作 - 只是在配置部分中为缓存使用了不同的名称：

```
<dataCacheClients>
    <dataCacheClient name="colocated">
       <autoDiscover isEnabled="true" identifier="[cache cluster role name]" />
    </dataCacheClient>
    <dataCacheClient name="shared">
       <hosts>
           <host name="yourcachename.cache.windows.net" cachePort="22233" />
       </hosts>
    </dataCacheClient>
</dataCacheClients> 
```

在代码中：

```
DataCache coloCache = new DataCache("colocated");
DataCache sharedcache = new DataCache("shared"); 
```

并在您的会话配置中：

```
<!-- Windows Azure Caching session state provider -->
<sessionState mode="Custom" customProvider="AFCacheSessionStateProvider">
  <providers>
    <add name="AFCacheSessionStateProvider" 
      type="Microsoft.Web.DistributedCache.DistributedCacheSessionStateStoreProvider, Microsoft.Web.DistributedCache"
      cacheName="shared" 
      dataCacheClientName="shared" 
      applicationName="AFCacheSessionState"/>
  </providers>
</sessionState> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:26:40.400

我认为不可能让两者都工作。似乎一个版本的缓存需要 101.0.0.0 版本的 Microsoft.ApplicationServer.Caching 和 Microsoft.Web.DistributedCache，而另一个需要 1.0.0.0 版本。这可以通过为 Azure 缓存和 Azure 共享缓存安装不同的 nuget 包来验证。如果有人确实知道如何让两者都运行，请在此处发布解决方案。

我已使用 Microsoft ASP.NET 通用提供程序将会话数据迁移到 Azure SQL，并将分布式缓存添加到项目中，而不是同时使用这两种缓存方法。

# javascript - 淘汰赛js可见数据绑定属性未显示结果

> ID：15929611
> 
> 赞同：1
> 
> 时间：2013-04-10T15:05:36.480
> 
> 标签：javascript, asp.net-mvc, knockout.js, knockout-2.0, knockout-templating

我正在使用淘汰赛 js - 我有一个视图页面，我在其中以两种不同的布局显示相同的信息。我正在使用敲除模板，并且我将敲除脚本放在一个单独的文件中，我在视图页面中调用该文件。

**问题**
目前，我要么同时显示两种不同的布局（网格视图和列表视图），要么我没有得到任何布局，具体取决于我如何配置数据绑定。我想要一个切换按钮来改变显示项目的布局——我不介意有两个按钮，一个用于网格，一个用于列表。

**查看页面**

```
<div class="btn-group">
    <button type="button" class="btn" data-bind="click: toggleView" >Toggle</button>
</div>

<div data-bind="template: {name:'grid', foreach: Users, visible: grid()}"></div>
<div data-bind="template: {name:'list', foreach: Users, visible: !grid()}"></div>

<script style="float:left" type="text/html" id ="grid">
    <section id="Images" style=" float:left">
    <section id="users">
        <div id="nameImage">
            <figure id="content">
                <img width="158" height="158" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
                <figcaption>
                    <a title="Email" id="emailIcon" class="icon-envelope icon-white" data-bind="attr:{'href':'mailto:' + Email()}"></a>
                    <a title="Profile" id="profileIcon" class="icon-user icon-white"></a>
                </figcaption>
            </figure>
            <p data-bind="text:Name"></p>
            </div>
        </section>
    </section>
</script>

<script style="float:left" type="text/html" id="list">
        <div>
            <div class="border_bottom light buffer" style="width:60%; float:left; margin:10px; height:58px">
                <img style="margin-right:5px; vertical-align:middle" width="58" height="58" alt="Gravatar" data-bind="attr:{src: GravatarUrl}"/>
                <span style="height:58px; vertical-align:middle" data-bind="text:Name"></span>
                <a style=" margin: 5px; vertical-align:middle"  title="Email" class="icon-envelope icon-black" data-bind="attr:{'href':'mailto:' + Email()}"></a>
                <a style=" margin: 5px; vertical-align:middle"  title="Profile"  class="icon-user icon-black"></a>
            </div>
        </div>
</script>

@section scripts{
    @Scripts.Render("~/bundles/user" + ViewBag.Layout.AppVersionForUrls)

    <script type="text/javascript">
        (function ($) {
            $.views.User.GetUser('@url');
        })(jQuery);
    </script>
    } 
```

**淘汰赛 js 我在一个单独的文件中，不在视图中**

> ```
> $.views.User.UserViewModel = function (data) {
>         var self = this;
>         self.Name = ko.observable(data.Name);
>         self.Email = ko.observable(data.Email);
>         self.MD5Email = ko.observable(data.MD5Email);
>         self.GravatarUrl = ko.computed(function () {
>            return 'http://www.gravatar.com/avatar/' + self.MD5Email() + '?s=300&d=identicon&r=G';
>         });
>         self.grid = ko.observable(true);
>         self.toggleView = function () {
>             self.grid(!self.grid());
>         }
>     }; 
> ```

我真的很想得到任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T11:19:44.233

我也有这个问题。使用 if 和 ifnot 代替可见。这为我解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T02:56:06.193

我认为您的“可见”绑定应该在您的模板绑定之外，如下所示：

```
<div data-bind="template: {name:'grid', foreach: Users}, visible: grid()"></div>
<div data-bind="template: {name:'list', foreach: Users}, visible: !grid()"></div> 
```

[这](http://jsfiddle.net/Dcxj2/)是一个小提琴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:42:49.807

您可以添加基于 ko.observable 的 visible: 属性，例如 showGrid 或 showList 以相互隐藏。

如果您制作 js.fiddle，我可以让您更好地了解将它们放在哪里。

# google-apps-script - 带有电子表格的 Google 脚本 - 计算列值的函数

> ID：15929613
> 
> 赞同：2
> 
> 时间：2013-04-10T15:05:43.660
> 
> 标签：google-apps-script

我正在构建一个谷歌电子表格，我将在该电子表格中输入一堆数据，然后在另一张表上，我想从中提取统计数据。我很难正确计算这些值。

**我正在尝试完成**的工作 - 构建一个可以添加到任何单元格的函数，以通过根据函数中的目标/参数计算重复值来获取特定列的统计信息。

例子：

> 表 1 包含我需要在 E 列中计算的数据（包含 1 或 2 个字母以指示状态。表 2 是我将提取所有统计数据的地方。我添加了一个像这样的函数：=getData("A")
> 
> 函数本身已经指向 sheet1 和 E 列。函数在这里说的是，“我希望你提取 E 列中的所有数据并告诉我有多少单元格被标记为 A”，然后给我计数.
> 
> 我有大约 5 个不同的值，我会在这里独立搜索。我们会说 A、B、C、D 和 E。所以如果我去搜索 C，我会使用：=getData("C") 将统计信息拉到我的统计表上的另一个单元格中

**到目前为止我所得到的（那行不通）** - 我对这些东西的编码很粗略，所以我还在学习很多东西。这是我到目前为止所尝试的：

```
function getData(target) {
  var ss = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("SHEET1");
  var lrow = ss.getLastRow();
  var r = ss.getRange(2, 5, lrow, 1);
  var data = r.getValues();
  var count;

  for (var i = 0; i < lrow ; i++) {
    var count = 1;
    for (var j = 0; j < i; i++) {
      if (data[j][0].value(target) == data[i][0].value(target)) {
        count++;
      }
    }
  return (count);
  }
} 
```

我也试过： if (data.value() == target) { count++; }

但这似乎也无济于事。我究竟做错了什么？要么我没有正确计算和/或没有提取数据来正确计算它。我已经搜索了很多帖子，似乎无法将我需要的东西放在一起。

我感谢任何人可以提供的任何帮助。谢谢。

* * *

**已解决的代码（感谢@ScampMichael）** - 这种细微的变化实际上允许我使用 =getData("Example1","Example2") 格式搜索多个值并计算总数：

```
function getData(target1, target2) {
  var ss = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("SHEET1");
  var lrow = ss.getLastRow();
  var r = ss.getRange(2, 5, lrow-1, 1); // lrow-1 to not count header
  var data = r.getValues();
  var count = 0; // 0 must be declared here or you'll get error: Overflow on the spreadsheet

  for (var i=0; i<data.length; i++) {
    if (data[i][0] == target1) { // can repeat this part depending how many values you want to search for
      count++;
    }
    if (data[i][0] == target2) {
      count++;
    }
  }
  return (count);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:52:17.517

编辑：我错过了 var r = ss.getRange(2, 5, lrow, 1); 应该

```
 var r = ss.getRange(2, 5, lrow - 1, 1);  // because starting at row 2 
```

因为您的源数据只有一列宽，所以您不需要循环中的循环，但我已将其保留，以防您希望源中包含多列。

```
 for (var i = 0; i < data.length ; i++) {
    for (var j = 0; j < data[i].length; j++) {
      if (data[i][j] == target) {
        count++;
      }
    }
  } 
```

对于单个列，您可以：

```
 for (var i = 0; i < data.length ; i++) {
      if (data[i][0] == target) {
        count++;
    }
  } 
```

还有内置函数：=COUNTIF(SHEET1!E2:E,"A")

# c# - 构建后的 powershell 脚本

> ID：15929615
> 
> 赞同：5
> 
> 时间：2013-04-10T15:05:50.693
> 
> 标签：c#, visual-studio, powershell, post-build-event, building

我有以下构建后事件：

```
powershell Set-ExecutionPolicy Unrestricted
powershell -file "$(SolutionDir)Obfuscation\_obfuscate.ps1" "$(SolutionDir)" "$(ProjectDir)"
powershell Set-ExecutionPolicy Restricted 
```

和 PS 脚本开头：

```
param
(   
    [string]$slnDir,
    [string]$projectDir
) 
```

当 MSBuild 尝试运行它时，我的第一个参数`"$(SolutionDir)"`被分成两个参数，因为解决方案路径包含一个空格字符：`D:\Projects\Dion2 Mercurial\repo\Dion2Web\`. 所以我的脚本`D:\Projects\Dion2`作为第一个参数和`Mercurial\repo\Dion2Web\`第二个参数接收。

将这些参数发送到脚本文件的正确方法是什么？

注意：当脚本只有一个参数时，此类构建后脚本可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:32:11.683

尝试调整您的后期构建事件以使用以下内容：

```
powershell -file "$(SolutionDir)Obfuscation\_obfuscate.ps1" -slnDir '$(SolutionDir)' -projectDir '$(ProjectDir)' 
```

# java - PrintWriter 写入 CSV - 新行不起作用？

> ID：15929619
> 
> 赞同：0
> 
> 时间：2013-04-10T15:06:01.960
> 
> 标签：java, csv, printwriter

我已经尝试了几乎所有我可以在网上和这个特定网站上找到的东西，但这些选项都不起作用。我正在遍历对象列表并创建一个 CSV 文件。我想打破每个对象条目，但到目前为止还没有运气。

这是我目前拥有的：

```
 String value = FacesContext.getCurrentInstance().
            getExternalContext().getRequestParameterMap().get("cityId");

    String seperator = System.getProperty("line.separator");

    try {

        PortletResponse response1 = (PortletResponse)FacesContext.getCurrentInstance().getExternalContext().getResponse();
        HttpServletResponse resp = PortalUtil.getHttpServletResponse(response1);
        resp.setHeader("Content-Type", "text/csv");
        resp.setHeader("Content-disposition", "attachment;filename=myFile.csv");

       List<Person> people = ppApi.getPeopleByCityId(Long.parseLong(value));

       PrintWriter out = resp.getWriter();

       for(Person pp : people) {

           out.print(pp.getFirstName() + ",");
           out.print(pp.getLastName() + ",");
           out.print(pp.getEmail() + ",");
           out.print(pp.getPhone() + "%%n");
           out.print("\r\n");
           out.print("\n\r");
           out.print("\n");
           out.print("\r");
           out.print("\\r\\n");
           out.print("\\n");
           out.print("\\n\\r");
           out.print(seperator);
           out.println('\n');
           out.println("%n");
           out.println("%%n");
        }

        //Close the output stream
        out.flush();
        out.close();
    }
    catch(Exception e) {
        e.printStackTrace();
    } 
```

所以这些东西都不起作用。我的输出看起来像这样：

> jeff,smith,jsmith@email.com,555-123-1234 rick,smith,rsmith@email.com,123-123-1233

应该看起来像：

> 杰夫，史密斯，jsmith@email.com，555-123-1234
> 
> rick,smith,rsmith@email.com,123-123-1233

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:08:49.637

请不要发明自行车并使用[`Java CSV`](http://www.csvreader.com/java_csv.php)图书馆。它会消除你所有的问题。

# c# - 如何在 linq to sql 中使用 or 运算符

> ID：15929621
> 
> 赞同：0
> 
> 时间：2013-04-10T15:06:16.127
> 
> 标签：c#, .net, linq

我正在使用此代码，但出现错误。我想使用`OR`运算符。

```
DataClasses1DataContext dc = new DataClasses1DataContext();

private void button4_Click(object sender, EventArgs e)
{
   var i = dc.vins
             .Where(aa => aa.startDate < DateTime.Now)
             .Where(aa => aa.Sno > 1)
             .Select(aa => aa);
   dataGridView1.DataSource = i;
} 
```

此代码作为`"AND"`操作员工作，我怎样才能让它充当`"OR"`操作员？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T15:07:38.477

只需将两个条件放在一个`Where`调用中，并使用普通的 C#`||`运算符：

```
var i = dc.vins.Where(aa => aa.startDate < DateTime.Now || aa.Sno > 1); 
```

请注意，我还删除了您的`Select`电话，因为它没有做任何有用的事情。

请注意，根据您的具体情况，您可能希望使用`DateTime.UtcNow`而不是`DateTime.Now`; 您应该仔细考虑您希望如何处理时区。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T15:07:31.193

这个怎么样？

```
var i = dc.vins.Where(aa => (aa.startDate < DateTime.Now) || (aa.Sno > 1)); 
```

实际上你的`AND`情况应该是这样的，

```
var i = dc.vins.Where(aa => (aa.startDate < DateTime.Now) && (aa.Sno > 1)); 
```

`.Select()`是可选的，因为您尚未对 . 进行任何计算或修改`aa`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:09:31.687

只需使用`||`inside your`WHERE`子句

```
var i = dc.vins.Where(aa => aa.startDate < DateTime.Now || aa.Sno > 1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T15:07:22.490

利用

```
.Where(aa => aa.startDate < DateTime.Now || aa.Sno > 1 ).Select... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T15:08:06.180

OR 运算符是`||`，因此您可以尝试：

```
var i = dc.vins.Where(aa => aa.startDate < DateTime.Now || aa.Sno > 1); 
```

# android - 获取自定义视图的 InnerShadow

> ID：15929626
> 
> 赞同：2
> 
> 时间：2013-04-10T15:06:28.327
> 
> 标签：android, android-layout, android-widget

我正在尝试制作一个自定义计时器，这是我的代码，这是完美的工作问题是我想拥有内部阴影

公共类 CustomChronometer 扩展 Chronometer {

```
private boolean start = false;
private long startTime, elapsedTime;
private float angle = 0f;
private Paint paint, p;
private RectF r;

public CustomChronometer(Context context, AttributeSet attrs) {
    super(context, attrs);
    paint = new Paint();
    paint.setColor(Color.parseColor("#0897ef"));
    paint.setStrokeWidth(25);

    paint.setStyle(Paint.Style.STROKE);

    paint.setAntiAlias(true);

//      paint.setStrokeCap(Cap.ROUND);

}

@SuppressLint("DrawAllocation")
@Override
protected void onLayout(boolean changed, int left, int top, int right,
        int bottom) {
    super.onLayout(changed, left, top, right, bottom);
    r = new RectF(left + 30, top + 30, right - 30, bottom - 30);
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    if (start) {
        elapsedTime = System.currentTimeMillis();
        angle = (elapsedTime - startTime) * 0.006f;
        canvas.drawArc(r, 270f, angle, false, paint);
        if (angle >= 360) {
            startTime = System.currentTimeMillis();
            angle = 0f;
        }
        invalidate();
    }

}

@Override
public void start() {
    super.start();
    start = true;
    startTime = System.currentTimeMillis();
}

@Override
public void stop() {
    super.stop();
    start = false;
}
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/QO3k7.png)

我要求它看起来像这样

![在此处输入图像描述](https://i.stack.imgur.com/Wskq5.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-19T08:20:53.910

```
paint paint.setColor(Color.parseColor("#0897ef"));
paint.setStrokeWidth(40);
paint.setStyle(Paint.Style.STROKE);
paint.setAntiAlias(true); 
paint.setMaskFilter(new BlurMaskFilter(7, Blur.INNER)); 
```

还应从清单中禁用硬件加速 -

# android - 使用单选 where 语句和多选参数进行查询

> ID：15929627
> 
> 赞同：2
> 
> 时间：2013-04-10T15:06:31.237
> 
> 标签：android, android-contentresolver

我需要实现以下查询：

```
query(uri, projection, "parent_id=? ", selectionArgs, null) 
```

...`selectionArgs`长度字符串数组在哪里，每次使用此查询都会动态变化。但它似乎`null`作为光标返回。

# javascript - 从 AJAX 返回 Jquery UI 滑块

> ID：15929633
> 
> 赞同：0
> 
> 时间：2013-04-10T15:06:43.477
> 
> 标签：javascript, jquery, ajax, jsp, jquery-ui-slider

我有两个页面，第一个是 ask.jsp，第二个是 get.jsp。在询问 .jsp 时有一个按钮...按下时通过 ajax 调用 get.jsp，我试图从中返回一个滑块页面...但看不到它...但是如果我从该页面发送一些短信，它会显示在 ask.jso 上，那么如何通过第二页返回滑块？

**问.jsp**

```
 <%@ page language="java" contentType="text/html; charset=windows-1256"
        pageEncoding="windows-1256"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
   <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1256">
    <script>
    function update()
    {

        var xmlhttp;    

        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
          }
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
        xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
$( "#slider" ).slider();
            document.getElementById("refresh").innerHTML=xmlhttp.responseText;
            }
          }
        xmlhttp.open("GET","get.jsp");
        xmlhttp.send();

    }
    </script>
    </head>
    <body>
    <input type="button" id="1" value="1" onClick="update();"/>

    <%
    int value=1;
    %>
    <div id="refresh">
    <%=value %>
    </div>

    </body>
    </html> 
```

**获取.jsp**

```
$(function() {
$( "#slider" ).slider();
});
</script>
<p>
heyyyyyyyyyy
</p>
<p id="slider">
</p> 
```

演示：[Plunker](http://plnkr.co/edit/QJAsaM8KvlTrfRpsUUMl?p=preview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:21:48.273

在 AJAX 调用中的成功函数中，重新调用显示滑块的函数。

我没有像您在代码中那样使用 AJAX，但可以肯定的是，那里有一个成功函数

（也许你的成功部分是：

```
if (xmlhttp.readyState==4 && xmlhttp.status==200)) {} 
```

)

注意：据我所知，AJAX 使用 jquery ajax 函数更好，例如：

```
$.ajax({
                    type: "GET",
                    url: "url.php",
                    dataType: 'html',
                    data: ({ action: 'youraction', parameters... }),
                    success: function(data){

                          $( "#slider" ).slider(); 
                          // other AJAX actions.
                    },
                    error: function(data)  
                    {  

                    }  

                }); 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:34:50.017

尝试重新组织get.php

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<p>
    heyyyyyyyyyy
</p>
<p id="slider">
</p>
<script>
    $(function() {
        $( "#slider" ).slider();
    });
</script> 
```

将脚本移动到底部

还使用[.load()](http://api.jquery.com/load/)将远程 html 加载到元素

```
function update(){
    $('#refresh').load('get.jsp')
} 
```

看起来问题是插入的脚本元素`innerHTML` [不会被执行](https://stackoverflow.com/questions/11694977/setting-innerhtml-with-a-script-inside)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:48:29.210

我觉得你应该：

*   1 从 get.jsp 中删除所有链接标签和脚本标签。仅保留必要的 HTML 标记（在您的情况下为 : `<p id="slider"></p>`）。我们当然应该在主页中调用这些库。

*   2 在您的 AJAX 调用中，在 AJAX 完成返回所需的人员后，再次调用 jquery 操作负责显示滑块

    在您的情况下，此操作是`$( "#slider" ).slider();`. 所以在里面`if (xmlhttp.readyState==4 && xmlhttp.status==200)`或者之后调用它`xmlhttp.send();`。这里的想法是重新调用它，以便在 AJAX 更新 DOM 后触发它。

*   3 如果所有这些解决方案都不起作用，请使用我的第一个答案中描述的 jquery new ajax 方式。

# jquery - 以兼容模式（IE7 标准）运行的 IE9 不运行 jQuery

> ID：15929637
> 
> 赞同：0
> 
> 时间：2013-04-10T15:06:54.863
> 
> 标签：jquery, internet-explorer

我在兼容模式（IE 7 标准）下运行 Jquery（1.8.1）的 IE9 遇到了奇怪的问题，有时它运行 jQuery 命令，有时它只是在单击按钮时不对按钮执行任何操作。下面是这个简单页面的代码。我正在使用图块来包含 javascript、css 等资源。

当我单击按钮时，有时它会运行逻辑，而有时它不会运行，我使用 f12 进行了调试，我可以看到页面已经下载了 jQuery js 以便运行。请让我知道我因这种奇怪的行为而错过了什么。

```
<div style="margin: 50px 20px 50px 20px; text-align: center;">

<span>Do you want to submit this form ?</span>  

<form>
    <input id="yesButton" type="button" value="Yes"/> 
    <input id="noButton" type="button" value="No"/>
</form>

</div>

<script language="JavaScript">
    $(document).ready(function() {

        $('#yesButton').on('click', function() {
            $('#yesButton').attr('disabled', 'disabled');
            $('#noButton').attr('disabled', 'disabled');
            window.location = contextRoot + '/imging/stre/${caseId}/${documentTypeCode}';
        });

        $('#noButton').on('click', function() {
            $('#yesButton').attr('disabled', 'disabled');
            $('#noButton').attr('disabled', 'disabled');
            $.ajax({
                url: contextRoot + '/imging/clr/${Id}/${documentTypeCode}',
                type: 'POST',
                dataType: 'text'
            });
            window.close();
        });

    });
</script> 
```

# visual-studio - Visual Studio / MSBuild - “干净”的解决方案

> ID：15929656
> 
> 赞同：0
> 
> 时间：2013-04-10T15:07:24.200
> 
> 标签：visual-studio, msbuild, umbraco

我正在使用 Web 应用程序 Umbraco。为了加快我的工作流程，我将“服务”Umbraco 文件夹作为我的 Visual Studio 解决方案中的一个项目。这允许我创建我的 umbraco Web 应用程序所依赖的其他项目（.Logic、.Wcf、.etc）。

该解决方案效果很好（易于调试，无需 xcopy 等）。但是，如果发出“清理”命令 (msbuild solution.sln /t:Clean)，MSBuild 会按照您的预期查看 Umbraco 的 /bin 文件夹，然后清理该目录。导致无法构建的解决方案。（例如，它看到很多 DLL 没有在解决方案中使用并删除它们 - 实质上是删除 Umbraco 应用程序）

*   产品
*   *   Product.Logic（包含 Logic 的项目）
*   *   Product.Web（包含 Umbraco 应用程序的项目）

有没有办法让 MSBuild 知道这些文件（在 /bin 中）不应该被删除？或者更好的方法是将 Umbraco DLL 和我的项目 /bin 分开，然后在构建事件中重新组合它们？

我已经尝试将 DLL 作为引用添加到 CSProj 中，但这并不能解决问题。

```
<ItemGroup>
<Reference Include="businesslogic">
  <SpecificVersion>False</SpecificVersion>
  <Private>True</Private>
</Reference>
<Reference Include="ClientDependency.Core">
  <SpecificVersion>False</SpecificVersion>
  <Private>True</Private>
</Reference>
</ItemGroup>
<!-- etc --> 
```

最好的祝愿，

劳伦斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:17:19.980

我建议将所需的 DLL 复制到相应项目的 bin 文件夹中，作为需要它们的项目的[预构建事件](http://msdn.microsoft.com/en-us/library/vstudio/42x5kfw4%28v=vs.100%29.aspx)。这样，内置的“清洁”功能就不必定制，您的流程也不会那么脆弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-19T13:50:11.990

受上述启发，我现在找到了一个更强大的解决方案来解决这个问题。

问题是，Visual Studio 项目只能知道项目内部的内容。通过直接在 Umbraco wwwroot 中工作，视觉工作室 BIN 变得与 Umbraco 混为一谈。这使得“清理”解决方案或准确跟踪 DLL 变得不可能。

我建议将“输出”目录设置为“干净”位置，然后在构建期间复制文件。这对于多个项目解决方案特别有效。

1.  项目属性
2.  构建选项卡
3.  配置 = 所有配置
4.  输出路径 = ..\output\

然后，您甚至需要构建将该目录的内容复制到您的 Umbraco Bin 中。这可以使用 MSBUILD 完成。这可以放在包含 Umbraco 的项目的 *.csproj 中。

```
<!-- Copy output DLLs into BIN -->
<ItemGroup>
  <ProjectsOutput Include="..\output\**\*.*" />
</ItemGroup>
<Copy SourceFiles="@(ProjectsOutput)"   DestinationFolder="bin\%(RecursiveDir)" /> 
```

# php - 从 /images 获取图像

> ID：15929657
> 
> 赞同：0
> 
> 时间：2013-04-10T15:07:24.443
> 
> 标签：php, sql, path

我有这段代码可以将数据上传到mysql（包括图片）：

```
<?
require("connect.php");

$gravar_descricao = $_POST['descricao'];
$gravar_observacoes = $_POST['observacoes'];
$gravar_imagem01 = $_FILES['imagem01'];
$gravar_imagem02 = $_FILES['imagem02'];
$gravar_imagem03 = $_FILES['imagem03'];
$gravar_imagem04 = $_FILES['imagem04'];
$gravar_imagem05 = $_FILES['imagem05'];
$gravar_imagem06 = $_FILES['imagem06'];

  if (!empty($gravar_imagem01["name"])) {

  preg_match("/\.(gif|bmp|png|jpg|jpeg){1}$/i", $gravar_imagem01["name"], $ext);

$nome_imagem = md5(uniqid(time())) . "." . $ext[1];

$caminho_imagem = "../../images/" . $nome_imagem;

  move_uploaded_file($gravar_imagem01["tmp_name"], $caminho_imagem);

}

$sqlinsert = "INSERT INTO tb_carros (id_carro, descricao, observacoes, imagem01, imagem02, imagem03, imagem04, imagem05, imagem06) 
            value ('', '$gravar_descricao', '$gravar_observacoes', '$gravar_imagem01', '$gravar_imagem02', '$gravar_imagem03', '$gravar_imagem04', '$gravar_imagem05', '$gravar_imagem06')";

mysql_query($sqlinsert) or die ("Nao foi possivel salvar os dados");

  echo "Dados inseridos com sucesso";

?> 
```

如您所见，我只使用`imagem01`代码中的 来获得我想要的结果。然后我将处理其他图像。

该代码可以正常工作并且也可以保存`image01`。`../../images`但我想在`carro_admin.php`（代码）中显示此图像：

```
<?

require("db/connect.php");

session_start();
     if(isset($_SESSION['logged_in'])) {
           session_start();
     } else {
           header("location:index.php");   
     }

$sql = "SELECT * FROM tb_carros";

$limite = mysql_query("$sql");

$dados = array();
while ($sql = mysql_fetch_array($limite) ) {
    $dados[] = $sql;
}
?> 
....
<div class="fotoResumo">
    <img src="../images/<?=$row['imagem01'] ?>" /> <!-- the carro_admin.php is one level up of the insert code -->
</div><!-- END of fotoResumo -->

<div class="dadosResumo">
     Descricao: <?=$row['descricao']?><br /><br />
     Observacoes:   <?=$row['observacoes']?><br /><br />
</div><!-- END of dadosItem --> 
```

来自`descricao`和`observacoes`正在加载的数据很好，但是`imagem01`显示了一个损坏的图像图标。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:47:00.533

**您不是在数据库中插入图像的名称，而是“数组”一词。**

您当前正在插入`$gravar_imagem01`，`imagem01`这等于 `$_FILES['imagem01']`在您的实际代码中。

**`$gravar_imagem01['name']`**而是在您的字段中插入**`imagem01`**，因为您想检索图像的名称以便稍后使用`<img src="../images/<?=$row['imagem01'] ?>" />`.

*注意：由于您不能`'$gravar_imagem01['name']'`在 SQL 查询中使用，我建议您之前将其存储在临时变量中，然后在查询中使用它。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:42:21.727

我解决了伙计们。这是最终代码：

```
<?

            require("connect.php");

            $gravar_carro = $_POST['carro'];
            $gravar_valor = $_POST['valor'];
            $gravar_ano = $_POST['ano'];
            $gravar_km = $_POST['km'];
            $gravar_cor = $_POST['cor'];
            $gravar_portas = $_POST['portas'];
            $gravar_combustivel = $_POST['combustivel'];
            $gravar_cambio = $_POST['cambio'];
            $gravar_final_placa = $_POST['final_placa'];
            $gravar_carroceria = $_POST['carroceria'];
            $gravar_descricao = $_POST['descricao'];
            $gravar_observacoes = $_POST['observacoes'];
            $gravar_imagem01 = $_FILES['imagem01'];
            $gravar_imagem02 = $_FILES['imagem02'];
            $gravar_imagem03 = $_FILES['imagem03'];
            $gravar_imagem04 = $_FILES['imagem04'];
            $gravar_imagem05 = $_FILES['imagem05'];
            $gravar_imagem06 = $_FILES['imagem06'];

                        preg_match("/\.(gif|bmp|png|jpg|jpeg){1}$/i", $gravar_imagem01["name"], $ext);
                        preg_match("/\.(gif|bmp|png|jpg|jpeg){1}$/i", $gravar_imagem02["name"], $ext);
                        preg_match("/\.(gif|bmp|png|jpg|jpeg){1}$/i", $gravar_imagem03["name"], $ext);
                        preg_match("/\.(gif|bmp|png|jpg|jpeg){1}$/i", $gravar_imagem04["name"], $ext);
                        preg_match("/\.(gif|bmp|png|jpg|jpeg){1}$/i", $gravar_imagem05["name"], $ext);
                        preg_match("/\.(gif|bmp|png|jpg|jpeg){1}$/i", $gravar_imagem06["name"], $ext);

                        $nome_imagem01 = md5(uniqid(time())) . "." . $ext[1];
                        $nome_imagem02 = md5(uniqid(time())) . "." . $ext[1];
                        $nome_imagem03 = md5(uniqid(time())) . "." . $ext[1];
                        $nome_imagem04 = md5(uniqid(time())) . "." . $ext[1];
                        $nome_imagem05 = md5(uniqid(time())) . "." . $ext[1];
                        $nome_imagem06 = md5(uniqid(time())) . "." . $ext[1];

                        $caminho_imagem01 = "../../images/" . $nome_imagem01;
                        $caminho_imagem02 = "../../images/" . $nome_imagem02;
                        $caminho_imagem03 = "../../images/" . $nome_imagem03;
                        $caminho_imagem04 = "../../images/" . $nome_imagem04;
                        $caminho_imagem05 = "../../images/" . $nome_imagem05;
                        $caminho_imagem06 = "../../images/" . $nome_imagem06;

                        move_uploaded_file($gravar_imagem01["tmp_name"], $caminho_imagem01);
                        move_uploaded_file($gravar_imagem02["tmp_name"], $caminho_imagem02);
                        move_uploaded_file($gravar_imagem03["tmp_name"], $caminho_imagem03);
                        move_uploaded_file($gravar_imagem04["tmp_name"], $caminho_imagem04);
                        move_uploaded_file($gravar_imagem05["tmp_name"], $caminho_imagem05);
                        move_uploaded_file($gravar_imagem06["tmp_name"], $caminho_imagem06);

                        $sqlinsert = "INSERT INTO tb_carros (id_carro, carro, valor, ano, km, cor, portas, combustivel, cambio, final_placa, carroceria, descricao, observacoes, imagem01, imagem02, imagem03, imagem04, imagem05, imagem06)
                        value ('', '$gravar_carro', '$gravar_valor', '$gravar_ano', '$gravar_km', '$gravar_cor', '$gravar_portas', '$gravar_combustivel', '$gravar_cambio', '$gravar_final_placa', '$gravar_carroceria', '$gravar_descricao', '$gravar_observacoes', '$nome_imagem01', '$nome_imagem02', '$nome_imagem03', '$nome_imagem04', '$nome_imagem05', '$nome_imagem06')";

                        mysql_query($sqlinsert) or die ("Nao foi possivel salvar os dados");

                        echo "Dados inseridos com sucesso";

            ?> 
```

# php - PHP PDO 查询问题

> ID：15929660
> 
> 赞同：2
> 
> 时间：2013-04-10T15:07:32.520
> 
> 标签：php, mysql

我正在将我的项目切换到 PDO，但我遇到了以下代码的问题。它不会抛出错误，但也不会插入数据库。我一直在阅读 PDO 并研究了`DebugdumpParams()`. 我添加`$result->debugDumpParams()`了，页面没有加载。

我需要使用`BindParam()`after `prepare()`, before`execute()`才能调试吗？

```
public function CustomerInsert($name, $street1, $street2, $city, $state, $zip, $phone_area, $phone, $email, $notes, $leadtype, $rating, $newsletter, $frequency)
    {
$q = "INSERT INTO customers VALUES('', :name , :street1 , :street2 , :city , :state , :zip , :phone_area , :phone , :email , :notes , :newsletter , :leadtype , :frequency )";

try{
$result = $this->connection->prepare($q); 

$result->execute(array(':name'=>$name, ':street1'=>$street1, ':street2'=>$street2, 
                                ':city'=>$city, ':state'=>$state, ':zip'=>$zip, ':phone_area'=>$phone_area, 
                                ':phone'=>$phone, ':email'=>$email, ':notes'=>$notes, ':newsletter'=>$newsletter, 
                                ':leadtype'=>$leadtype, ':frequency'=>$frequency));
}
catch (PDOException $e) 
{  
   throw new Exception('Connection failed: ' . $e->getMessage());
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:20:40.373

您的查询看起来没有错误，所以我的猜测是值的数量与表中的字段数量不匹配。您可以通过在查询中指定字段来解决此问题：

```
$q = "INSERT INTO `customers` 
      (`name`,`street1`,`street2`,`city`,`state`,`zip`,`phone_area`,`phone`,`email`,`notes`,`newsletter`,`leadtype`,`frequency`)
      VALUES(:name , :street1 , :street2 , :city , :state , :zip , :phone_area , :phone , :email , :notes , :newsletter , :leadtype , :frequency )"; 
```

但是，如果您[在 PDO 中打开错误报告，](http://php.net/manual/en/pdo.setattribute.php)您将能够从 MYSQL 中看到错误，例如：

```
$this->connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

# junit - 如何扩展 xUnit 以将每个测试用例作为单独的可执行文件运行

> ID：15929662
> 
> 赞同：1
> 
> 时间：2013-04-10T15:07:34.223
> 
> 标签：junit, fortran, mpi, xunit

我创建了一个单元测试框架 pFUnit，它在很大程度上遵循了 JUnit 的当前设计，并且正在寻找有关如何扩展该框架以处理特定情况的建议。出于好奇，这个框架 pFUnit 是用 OO Fortran 编写的（是的——Fortran 现在具有 OO 功能！）并支持使用 MPI 进行分布式编程。但我认为关于语言选择的唯一相关方面是，如果 SUT 真的崩溃了，那么测试框架也会崩溃。幸运的是，这是一种相对罕见的情况，但它仍然经常发生，足以让人们尖叫着寻求解决方案。

我的意图是提供一个替代的 TestRunner，它将每个测试作为一个单独的可执行文件作为 RPC 或类似的东西运行。这样做的运行时开销可能很大，尤其是在重复启动 MPI 时，所以我不想让它成为默认行为。不幸的是，当我研究如何编写这种方法时，我发现 TestRunner 似乎并不适合这样的扩展，因为它只管理嵌套的 TestSuite 系列的顶部的运行。

通过让 TestRunner 导航嵌套结构，我可以看到一种使其工作的笨拙方式，但这会在很大程度上破坏 TestSuite 的作用。

实际上，我想出的最简单的方法是继承 TestResult。TestResult 在每个 TestCase 上调用 runBare()，因此扩展可能只是启动一个单独的可执行文件，该可执行文件只调用该 runBare() 方法并返回任何异常。这个解决方案打扰了我的审美，因为它不是 TestResult 应该负责的事情。

我还可以向 TestCase 添加一个 launch() 方法，该方法检查一些全局参数以确定是作为过程运行还是作为单独的可执行文件启动。这看起来不优雅，但可能并不比我之前提到的 TestResult 扩展难多少。

希望这是足够的背景知识，对 JUnit 的设计有更深入了解的人可以提出比我提出的替代方案更好/更清洁的方法。或者如果失败，可以为我提出的设计罪提供宽恕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:37:28.243

JUnit 本身并不会进行分叉，而是将其留给调用 JUnit 的事物，例如 Eclipse 或 Maven 万能。

Eclipse 分叉 jvm，然后在单独的 JVM 中执行，并通过与分叉的 JVM 的连接来传达结果。

Maven Surefire 具有用户可以控制分叉方式和时间的选项 - 它有不同的分叉选项，请参阅[Maven Surefire - 分叉选项和并行测试执行](http://maven.apache.org/surefire/maven-surefire-plugin/examples/fork-options-and-parallel-execution.html)。

一种选择是拥有一个 ForkingTestRunner，一个分叉的 TestRunner。然后你可以做相当于`@RunWith(ForkingTestRunner.class)`，每个测试方法分叉一次。

如果这仍然太慢，您可以分叉一个跑步者，并通过套接字或其他东西将结果传达回监视器进程。如果 SUT 崩溃，则监控进程会检测到这一点并导致测试失败并重新启动运行器（但带有一个缩减列表）。

这样一来，每组测试只有一个 fork，除非 SUT 经常崩溃。

# php - 从国家重定向中排除 IP 地址

> ID：15929663
> 
> 赞同：-2
> 
> 时间：2013-04-10T15:07:34.350
> 
> 标签：php, exception, geoip

我有这段代码，目前将加拿大的任何人重定向到我们网站的加拿大版本：

```
<?php
require_once('geoip.inc');
$gi = geoip_open('GeoIP.dat', GEOIP_MEMORY_CACHE);
$country = geoip_country_code_by_addr($gi, $_SERVER['REMOTE_ADDR']);
// prints the country code  your visitor is in
if($country == 'CA')
{
header('Location: http://www.WEBSITE.ca');
exit();
}
// the end
geoip_close($gi);?> 
```

我想知道的是如何才能将加拿大某人的 IP 地址排除在自动重定向之外，以便他们也可以访问我们网站的美国和欧盟版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:09:23.947

您可以在 if 语句中添加另一个条件。

```
$ip = $_SERVER['REMOTE_ADDR'];
if($country == 'CA' && $ip !== '127.0.0.1')
{
   header('Location: http://www.WEBSITE.ca');
   exit();
} 
```

$ip 将是当前正在查看该站点的人的 IP 地址。您可以通过以下方式获得：

```
$_SERVER['REMOTE_ADDR']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:09:38.593

`&&`在语句中使用`if`以添加附加条件，例如“远程地址不等于此字符串”。

# php - 获取表中包含用户 ID 的行

> ID：15929666
> 
> 赞同：0
> 
> 时间：2013-04-10T15:07:37.460
> 
> 标签：php, mysql

我有一个包含 4 列 id、用户、文本和日期的表。

我正在尝试获取“用户”包含许多用户 ID 之一的行。那里可以有一个到无穷大的用户 ID。

用户 ID 示例

```
"4, 5, 23" 
```

“用户”列示例

```
"4, 12, 44" 
```

基本上我正在尝试制作一个状态更新系统，只有用户的朋友才能看到状态更新，有点像 facebook 和 twitter。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:09:34.873

您不应该有一个列来存储多个用户 ID。制作一个表格并参考它，然后查找将很简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:31:28.263

如果我正确理解你的问题，你想把它分成多个表。

带有 id、userid、文本和日期的状态表。

带有 id、用户名等的用户表（由您决定）。

一个带有 id、userid、friendid 的友谊表。（友谊的两个条目，你可以做friend1和friend2，但这意味着每个查询都要检查两个字段）。

最后一张表是根据友谊的需要做的两种方式！因此，与 twitter 相对的 facebook 约定遵循但可能没有遵循的约定。

然后，您将显示您（作为登录用户）与之有友谊的用户的更新。

> SELECT s.text, s.date, u.username, s.userid FROM status s INNER JOIN username u ON s.userid = u.id INNER JOIN Friendship f ON f.friendid = s.userid WHERE f.userid = 'LOGGED IN USER ID' ORDER BY s.date DESC LIMIT 10

将 LOGGED IN USER ID 更改为当前登录用户的用户 ID。这通常使用会话变量来设置。

将`LIMIT 10`显示最新的 10 个状态更新！

然后显示文本和日期以及带有链接到其个人资料的用户 ID 的用户名（如果适用）！

# jboss - 找不到大气处理程序 - Jetty Websocket Jboss

> ID：15929671
> 
> 赞同：1
> 
> 时间：2013-04-10T15:07:42.657
> 
> 标签：jboss, jetty, atmosphere

我正在尝试建立一个项目，例如： - Jboss 作为主容器 Web - 一个项目调用 PWS，它与码头一起运行以支持 Jboss 中的 Web 套接字 - 与 Web Socket 连接以使用 Atmosphere 框架。

我的程序化码头服务器配置：

JettyIntegration.java

```
public final class JettyIntegration implements ServletContextListener {

    private Server server;

    public void contextInitialized(ServletContextEvent sce) {
        String jbossWebHost;

        MBeanServer mBeanServer = ManagementFactory.getPlatformMBeanServer();
        try {
            jbossWebHost = "localhost";
            // ObjectName http =
            // new ObjectName("jboss.as:socket-binding-group=standard" +
            // "-sockets,socket-binding=http");
            // jbossWebHost =
            // (String) mBeanServer.getAttribute(http, "boundAddress");
            // jbossWebPort = (Integer) mBeanServer.getAttribute(http,
            // "boundPort");

        } catch (Exception e) {
            throw new Error(e);
        }

        server = new Server();

        SelectChannelConnector connector = new SelectChannelConnector();
        connector.setHost(jbossWebHost);
        connector.setPort(8181);
        server.addConnector(connector);

        ContextHandlerCollection contexts = new ContextHandlerCollection();
        contexts.setHandlers(new Handler[] { createJerseyRestServletHandler() });

        server.setHandler(contexts);

        try {
            server.start();
        } catch (Exception e) {
            sce.getServletContext().log("An error occurred while starting Jetty", e);
        }
    }

    public void contextDestroyed(ServletContextEvent sce) {
        if (server != null) {
            try {
                server.stop();
            } catch (Exception e) {
                sce.getServletContext().log("An error occurred while shutting down Jetty", e);
            }
        }
    }

    private ServletContextHandler createJerseyRestServletHandler() {
        MeteorServlet servlet = new MeteorServlet();
        ServletHolder atmosphereServletHolder = new ServletHolder(servlet);

        // atmosphere
        atmosphereServletHolder.setInitParameter("org.atmosphere.useWebSocket", "true");
        atmosphereServletHolder.setInitParameter("WebSocketProtocol", "PWSHandler");
        atmosphereServletHolder.setInitParameter("org.atmosphere.cpr.atmosphereHandlerPath", "/WEB-INF/classes/com/sis/sante/centaure/pws/web");

        atmosphereServletHolder.setAsyncSupported(true);

        FilterHolder filterHolder = new FilterHolder(CrossOriginFilter.class);
        filterHolder.setInitParameter("allowedOrigins", "*");
        filterHolder.setInitParameter("allowedMethods", "GET, POST");

        ServletContextHandler servletHandler = new ServletContextHandler(ServletContextHandler.SESSIONS);
        servletHandler.addServlet(atmosphereServletHolder, "/pws/*");
        servletHandler.addFilter(filterHolder, "/*", null);
        servletHandler.setInitParameter("org.atmosphere.cpr.atmosphereHandlerPath", "/WEB-INF/classes/com/sis/sante/centaure/pws/web");

        return servletHandler;
    }

} 
```

PWSHandler.java

```
@WebSocketHandlerService(path = "/pws", broadcaster = SimpleBroadcaster.class)
public class PWSHandler extends WebSocketHandlerAdapter {

    private final ObjectMapper mapper = new ObjectMapper();

    @Override
    public void onOpen(WebSocket webSocket) {
        System.out.println("on Open");
        webSocket.resource().setBroadcaster(BroadcasterFactory.getDefault().lookup("/pws", true));
    }

    @Override
    public void onTextMessage(WebSocket webSocket, String data) {
        System.out.println("on Message");
        AtmosphereResource r = webSocket.resource();
        Broadcaster b = r.getBroadcaster();
        b.broadcast("test message" + data);
        //b.broadcast(mapper.writeValueAsString(mapper.readValue(message, Data.class)));
    }

} 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app ...>   
    <listener>
        <listener-class>com.sis.sante.centaure.pws.web.JettyIntegration</listener-class>
    </listener> 
</web-app> 
```

在 Jboss 下部署时，我可以在大气客户端响应时在 Web Socket 中连接：使用 URL：ws://localhost:8181/pws?X-Atmosphere-tracking-id=0&X-Atmosphere-Framework=1.0&X-Atmosphere-Transport =websocket&X-Cache-Date=0&Content-Type=application/json jquery.atmosphere.js:2301 Websocket成功打开

但是服务器向我抛出了那个日志：

```
16:55:29,618 INFO  [org.eclipse.jetty.server.Server] (MSC service thread 1-5) jetty-8.1.2.v20120308
16:55:29,652 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Atmosphere is using org.atmosphere.cpr.DefaultAnnotationProcessor for processing annotation
16:55:29,655 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Auto detecting atmosphere handlers /WEB-INF/classes/com/sis/sante/centaure/pws/web
    16:55:29,656 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Auto detecting WebSocketHandler in /WEB-INF/classes/com/sis/sante/centaure/pws/web
    16:55:29,656 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Installed WebSocketProtocol org.atmosphere.websocket.protocol.SimpleHttpProtocol 
    16:55:29,667 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Atmosphere is using async support: org.atmosphere.container.JettyAsyncSupportWithWebSocket running under container: jetty/8.1.2.v20120308 with WebSocket enabled.
    16:55:29,668 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Installing Default AtmosphereInterceptor
    16:55:29,669 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5)    org.atmosphere.interceptor.JavaScriptProtocol : Atmosphere JavaScript Protocol
    16:55:29,670 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5)    org.atmosphere.interceptor.JSONPAtmosphereInterceptor : JSONP Interceptor Support
    16:55:29,671 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5)    org.atmosphere.interceptor.SSEAtmosphereInterceptor : SSE Interceptor Support
    16:55:29,672 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5)    org.atmosphere.interceptor.AndroidAtmosphereInterceptor : Android Interceptor Support
    16:55:29,673 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5)    org.atmosphere.interceptor.StreamingAtmosphereInterceptor : Streaming Interceptor Support
    16:55:29,675 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5)    org.atmosphere.interceptor.DefaultHeadersInterceptor : Default Response's Headers Interceptor
    16:55:29,675 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Installed Default AtmosphereInterceptor [Default Response's Headers Interceptor, Streaming Interceptor Support, Android Interceptor Support, SSE Interceptor Support, JSONP Interceptor Support, Atmosphere JavaScript Protocol]. Set org.atmosphere.cpr.AtmosphereInterceptor.disableDefaults in your xml to disable them.
    16:55:29,678 WARN  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) No BroadcasterCache configured. Broadcasted message between client reconnection will be LOST. It is recommended to configure the org.atmosphere.cache.EventCacheBroadcasterCache
    16:55:29,679 WARN  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Neither TrackMessageSizeInterceptor or TrackMessageSizeFilter are installed. atmosphere.js may receive glued and incomplete message.
    16:55:29,679 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) HttpSession supported: false
    16:55:29,680 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Using BroadcasterFactory: org.atmosphere.cpr.DefaultBroadcasterFactory
    16:55:29,680 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Using WebSocketProcessor: org.atmosphere.websocket.DefaultWebSocketProcessor
    16:55:29,681 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Using Broadcaster: org.atmosphere.cpr.DefaultBroadcaster
    16:55:29,682 INFO  [org.atmosphere.cpr.AtmosphereFramework] (MSC service thread 1-5) Atmosphere Framework 1.1.0.beta3 started.
    16:55:29,705 INFO  [org.eclipse.jetty.server.AbstractConnector] (MSC service thread 1-5) Started SelectChannelConnector@localhost:8181
    16:55:29,715 INFO  [org.jboss.web] (MSC service thread 1-5) JBAS018210: Registering web context: /pws
    16:55:29,798 INFO  [org.jboss.as.server] (HttpManagementService-threads - 17) JBAS018559: Deployed "pws.war"
    16:55:30,114 ERROR [org.atmosphere.cpr.AsynchronousProcessor] (qtp292954387-257) No AtmosphereHandler found. Make sure you define it inside WEB-INF/atmosphere.xml or annotate using @AtmosphereHandlerService
    16:55:30,115 WARN  [org.atmosphere.websocket.DefaultWebSocketProcessor] (qtp292954387-257) Failed invoking AtmosphereFramework.doCometSupport(): org.atmosphere.cpr.AtmosphereMappingException: No AtmosphereHandler found. Make sure you define it inside WEB-INF/atmosphere.xml or annotate using @AtmosphereHandlerService
        at org.atmosphere.cpr.AsynchronousProcessor.action(AsynchronousProcessor.java:188) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.atmosphere.cpr.AsynchronousProcessor.suspended(AsynchronousProcessor.java:165) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.atmosphere.container.JettyWebSocketUtil.doService(JettyWebSocketUtil.java:78) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.atmosphere.container.JettyAsyncSupportWithWebSocket.service(JettyAsyncSupportWithWebSocket.java:69) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.atmosphere.cpr.AtmosphereFramework.doCometSupport(AtmosphereFramework.java:1403) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.atmosphere.websocket.DefaultWebSocketProcessor.dispatch(DefaultWebSocketProcessor.java:360) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.atmosphere.websocket.DefaultWebSocketProcessor.open(DefaultWebSocketProcessor.java:145) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.atmosphere.container.JettyWebSocketHandler.onOpen(JettyWebSocketHandler.java:106) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.eclipse.jetty.websocket.WebSocketConnectionRFC6455.onWebSocketOpen(WebSocketConnectionRFC6455.java:435) [jetty-websocket-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.websocket.WebSocketServletConnectionRFC6455.handshake(WebSocketServletConnectionRFC6455.java:57) [jetty-websocket-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.websocket.WebSocketFactory.upgrade(WebSocketFactory.java:288) [jetty-websocket-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.websocket.WebSocketFactory.acceptWebSocket(WebSocketFactory.java:361) [jetty-websocket-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.atmosphere.container.JettyWebSocketUtil.doService(JettyWebSocketUtil.java:65) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.atmosphere.container.JettyAsyncSupportWithWebSocket.service(JettyAsyncSupportWithWebSocket.java:69) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.atmosphere.cpr.AtmosphereFramework.doCometSupport(AtmosphereFramework.java:1403) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.atmosphere.cpr.AtmosphereServlet.doPost(AtmosphereServlet.java:294) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at org.atmosphere.cpr.AtmosphereServlet.doGet(AtmosphereServlet.java:280) [atmosphere-runtime-1.1.0.beta3.jar:1.1.0.beta3]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:594) [jetty-servlet-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1366) [jetty-servlet-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.servlets.CrossOriginFilter.handle(CrossOriginFilter.java:212) [jetty-servlets-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.servlets.CrossOriginFilter.doFilter(CrossOriginFilter.java:179) [jetty-servlets-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1337) [jetty-servlet-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:484) [jetty-servlet-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413) [jetty-servlet-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.Server.handle(Server.java:351) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:634) [jetty-http-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230) [jetty-http-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77) [jetty-server-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:609) [jetty-io-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:45) [jetty-io-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599) [jetty-util-8.1.2.v20120308.jar:8.1.2.v20120308]
        at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534) [jetty-util-8.1.2.v20120308.jar:8.1.2.v20120308]
        at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_07]

    16:55:30,130 WARN  [org.atmosphere.websocket.protocol.SimpleHttpProtocol] (qtp292954387-257) org.atmosphere.cpr.AtmosphereMappingException: No AtmosphereHandler found. Make sure you define it inside WEB-INF/atmosphere.xml or annotate using @AtmosphereHandlerService Status 500 Message Server Error 
```

会出什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:04:24.907

不要尝试使用 Jetty，而是将 websockets 安装到 JBoss AS 7.2 / JBoss EAP 6.1.Alpha，你应该没问题。

这是[说明](https://github.com/Atmosphere/atmosphere/wiki/Installing-JBoss-WebSocket-Support)，但根据我的经验，它们有点过时（过时）。你真正需要的是 1\. **APR enabled** , so switch

```
<subsystem xmlns="urn:jboss:domain:web:1.1"
        default-virtual-server="default-host" native="true"> 
```

至：

```
<subsystem xmlns="urn:jboss:domain:web:1.1"
        default-virtual-server="default-host" native="true"> 
```

在您的 Web 服务器配置（domain.xml 或 Standalone.xml）中，以及 2.**使用 maven 依赖项**

```
<dependency>
     <groupId>org.atmosphere.jboss.as</groupId>
     <artifactId>jboss-as-websockets</artifactId>
     <version>0.4</version>
</dependency> 
```

就是这样，那么你应该很高兴。只需在您的应用程序中扩展 org.atmosphere.jboss.as.websockets.servlet.WebSocketServlet。

编辑：对于感兴趣的，我[在 github 中](https://github.com/eis/jboss-websocket-demo)有一个简单的示例应用程序源代码。

# python - 在 Excel 中访问数据 - 来自 python 的路透社

> ID：15929676
> 
> 赞同：4
> 
> 时间：2013-04-10T15:08:01.883
> 
> 标签：python, excel, com, win32com

我正在使用 Excel 中集成的路透社来检索市场数据。对于任务自动化，我目前使用 VBA，但现在我想切换到 python。该包`pyxll`没有太大帮助，因为原理与VBA相同（我需要在Excel中并单击RUN按钮......）所以我正在考虑使用win32com通过COM对象从外部访问Excel。但是，当我这样做时：

```
from win32com.client import Dispatch 
xlApp = Dispatch("Excel.Application") 
```

此代码打开一个新的 Excel 实例，其中没有 Reuter 插件（因此我不能使用 Reuter 函数来检索数据）。我不知道如何从 python 访问 Excel-with-Reuter 实例？我已经查看了`Com Explorer`该服务并没有看到除 Excel 之外的任何其他服务

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T04:52:53.723

尝试这个 -

```
import os
from win32com.client import GetObject

os.startfile(r'C:\path\to\ReutersExcel.exe')
xlApp = GetObject(None, 'Excel.Application') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-20T08:13:01.593

如果您使用 Excel 访问 Thomson Reuters Dataworks Enterprise（以前的 Datastream），请查看 pydatastream（[https://github.com/vfilimonov/pydatastream](https://github.com/vfilimonov/pydatastream)） - 它允许您将数据直接获取到 python in pandas.DataFrame 格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-17T01:13:09.887

如果您使用 Excel VBA，则很有可能出现错误结果（您也很难编写更多代码来处理可能导致问题的状态）。

根据我的经验，我们应该直接从提要中使用数据并对其进行操作。它易于维护且可靠（我肯定在 python 中这样做）。

我正在使用 PyRFA 来使用来自我的 P2PS 的数据并对其进行操作（这个 API 很棒，因为它目前是免费的！它提供了消费者和提供者的能力）。以下是此 API 的更多详细信息：

[http://www.devcartel.com/pyrfa](http://www.devcartel.com/pyrfa)

您需要做的是联系他们的支持团队以获取更多详细信息并开始繁荣编码！

干杯，迈克尔

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-20T15:43:04.187

您可以使用以下代码启动加载项：在选择自动登录之前制作 sur。

```
Import win32com.client
xl = win32com.client.DispatchEx("Excel.Application") 
```

# c# - 字符串和字符串

> ID：15929680
> 
> 赞同：0
> 
> 时间：2013-04-10T15:08:11.330
> 
> 标签：c#, string

c#`String`和有什么区别？`string`

即使我使用`String`代替`string`并分配一个变量，它的功能与`string`. 那么它们之间有什么区别呢？

# selenium - 通过 SSH 运行测试 NG Selenium 测试

> ID：15929685
> 
> 赞同：1
> 
> 时间：2013-04-10T15:08:19.433
> 
> 标签：selenium, ssh, testng, bamboo

我有一个服务器 A，上面设置了 eclipse、testNG、selenium 和其他东西。我有另一台服务器 B，上面安装了 Bamboo。

我能够在服务器 A 上运行一个 testNG 脚本，该脚本在我正在开发的 Web 应用程序上运行一组硒测试。我使用 eclipse 中显示的 vm 属性中的 java 命令通过 Bamboo 在服务器 B 上创建 ssh 任务。

然而，它似乎只是坐在那里，从未真正完成 Bamboo 的工作。

我尝试从另一台笔记本电脑 ssh 到服务器 A，并运行相同的命令。我没有收到任何错误消息或任何东西，但系统似乎只是冻结了。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T23:53:23.723

安装 Xvfb，它伪装成监视器，但不会出现在任何地方。
`sudo apt-get install xvfb`.

如果您想要更少的错误，请添加这些字体，但这些警告并不重要。
`sudo apt-get install xfonts-100dpi xfonts-75dpi xfonts-scalable xfonts-cyrillic`

然后开始运行并将您的显示器设置为系统不会使用的东西。这就是我所做的，记住`&`让终端在后台运行一些东西。
`Xvfb :99 -ac &`
`export DISPLAY=:99`
`firefox &`

当我退出 ssh 终端时，我也遇到了 ruby​​ on rails 服务器断开连接的问题。要解决该问题，请使用 Screen。Screen 在不受 ssh 影响的情况下运行另一个终端。
`sudo apt-get install screen`

然后在执行上述操作之前启动屏幕。
`screen`

要退出当前屏幕窗口，只需单击“Ctrl + A”，然后单击“D”并返回输入`screen -r`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:04:27.360

以下是您的选择吗？

主机 A：让浏览器和 selenium-rc 始终运行并监听任何（4444）端口；主机 B：有 TestNG + 构建作业，并且有指向主机 A 的 selenium-rc 的测试。

这是在不同主机上运行的 selenium 和 ci 的常规设置。

如果服务器 A 运行 linux/unix，那么只需 ssh-ing 并启动浏览器（使用 selenium，您最终会尝试启动浏览器）将不会成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:54:29.797

尝试将 DISPLAY 环境变量设置为“:0”（或您机器上的任何显示器——您可以通过 GUI 启动终端并运行“echo $DISPLAY”来检查）。我可以使用以下命令通过 ssh 启动 Firefox：

ssh somehost "env DISPLAY=:0 firefox"

但说真的，我赞同 patrungel 的建议——使用 selenium grid/rc。它是为这种事情而设计的。

# javascript - 如何通过 JavaScript 解码 unicode HTML？

> ID：15929686
> 
> 赞同：11
> 
> 时间：2013-04-10T15:08:19.830
> 
> 标签：javascript, unicode, decode

如何使用 JavaScript 解码：

```
\u003cb\u003estring\u003c/b\u003e 
```

至

```
<b>string</b> 
```

（我在互联网上搜索，有一些网站有同样的问题，例如： [Javascript html 解码](https://stackoverflow.com/questions/4692882/javascript-html-decoding)
或 [如何解码 HTML 实体](https://stackoverflow.com/questions/11366021/how-to-decode-html-entities)
，但它**没有相同的编码格式**）
非常感谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-05-29T16:05:59.693

这是[如何使用转义的 unicode 解码字符串？](https://stackoverflow.com/q/7885096/8388). 那里给出的答案之一应该有效：

```
var x = '\\u003cb\\u003estring\\u003c/b\\u003e';
JSON.parse('"' + x + '"') 
```

输出：

```
'<b>string</b>' 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-10T15:09:54.617

```
decodeURIComponent('\u003cb\u003estring\u003c/b\u003e');

//  "<b>string</b>" 
```

编辑 - 如果可以的话，我会删除上面的答案。

原来的问题有点模棱两可。

`console.log('\u003cb\u003estring\u003c/b\u003e');`将已经产生`<b>string</b>`

如果`\`字符被转义，则可以使用替换方法来替换`\\`just `\`，从而允许正确的 Unicode 转义序列。

# android - 在 phonegap 中捕获 logcat 错误

> ID：15929689
> 
> 赞同：0
> 
> 时间：2013-04-10T15:08:32.523
> 
> 标签：android, cordova

有谁知道如何在 phonegap 中捕获 logcat 错误？

有没有可能

```
try
{
}
catch(err)
{
} 
```

提前致谢。

科比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:12:55.737

我猜您是在问如何从 Phonegap 打印日志？
如果是这样，请查看这篇文章： [如何使用 Eclipse 和 HTC Desire HD 在 PhoneGap 应用程序中显示 console.log() 输出？](https://stackoverflow.com/questions/5847290/how-to-display-console-log-output-in-phonegap-app-using-eclipse-and-htc-desire)

# java - 带有自动滚动选项卡的 JTabbedPane

> ID：15929690
> 
> 赞同：0
> 
> 时间：2013-04-10T15:08:36.777
> 
> 标签：java, swing, jtextarea, jtabbedpane, autoscroll

如果我在程序中多次使用此功能，选项卡将停止自动滚动。使用一个选项卡自动滚动炒锅：

```
protected JTextArea addTab(String name){
    JTextArea tab = new JTextArea();
    tab.setEditable(false);
    JScrollPane scroller = new JScrollPane(tab);
    scroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    this.tabPane.add(name, scroller);
    return tab;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:27:01.653

不确定我是否理解问题，您可以查看[Text Area Scrolling](http://tips4java.wordpress.com/2008/10/22/text-area-scrolling/)，了解有关使用 JTextArea 时滚动的一般信息。

# html - 如何只制作一张当前表格？

> ID：15929692
> 
> 赞同：0
> 
> 时间：2013-04-10T15:08:41.340
> 
> 标签：html, html-table

那里`TEST`我有另一张桌子，但如果它只有一张桌子会更好吗？

```
<Table border="1">
    <Tr>
       <th>1</th>
        <th>2</th>
        <th>4</th>
        <th colspan="3">
           <table>
              <tr>
                  <td colspan="3" style="border-bottom: 1px solid">TEST</td>
               </tr>
               <tr>
                   <td style="border-right: 1px solid">1</td><td>2</td><td style="border-left: 1px solid">3</td>
               </tr>
            </table>
        </th>
    </tr>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
    </tr>
</table> 
```

如您所见，在这个 html 中我有两个表格，我怎样才能只制作其中一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:13:07.620

没有嵌套：

```
<table>
    <tr>
        <td rowspan="2">1</td>
        <td rowspan="2">2</td>
        <td rowspan="2">4</td>
        <td colspan="3">TEST</td>
    </tr>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
    </tr>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
    </tr>
</table> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/gbrqB/)**（您的代码在顶部）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:13:50.653

是的你可以。一种方法是使用该`rowspan`属性并具有 2 个标题行。像这样：

```
<table>
    <tr>
        <th rowspan="2">1</th>
        <th rowspan="2">2</th>
        <th rowspan="2">4</th>
        <th colspan="3">TEST</th>
    </tr>
    <tr>
        <th>1</th>
        <th>2</th>
        <th>3</th>
    </tr>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
    </tr>
</table> 
```

[这是一个例子](http://jsfiddle.net/KCnzX/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:16:32.367

试试下面的方法，它会帮助你..

**HTML：**

```
<table border="1">

<tr>
<td rowspan="2">1</td>
<td  rowspan="2">2</td>
<td  rowspan="2">4</td>
<td colspan="3">Test</td>
</tr>

<tr>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>

<tr>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>

</table> 
```

**输出 ：**

![在此处输入图像描述](https://i.stack.imgur.com/X8jmN.png)

# wpf - WPF数据网格排序错误

> ID：15929708
> 
> 赞同：3
> 
> 时间：2013-04-10T15:09:26.787
> 
> 标签：wpf, datagrid

我试图让我的列使用 datagrid`SortMemberPath="COLUMN"`属性进行排序，我得到一个奇怪的排序顺序，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/cUkPm.jpg)

看起来该列是根据数字的第一位而不是整个数字进行排序的。我怎样才能解决这个问题？

编辑：

好的，我知道问题出在哪里了。我现在正在使用这个转换器，但仍然没有变化。

```
public class IntToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value is string)
        {
            string s = (string)value;
            int num;
            if (int.TryParse(s, out num))
                return Int32.Parse(s);
        }
        return DependencyProperty.UnsetValue;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {

        int number = (int)value;
        return number.ToString();
    }
} 
```

我将此添加到我的 xaml 文件 Windows.Resource 中：

```
<me:IntToStringConverter x:Key="IntToStringConverter"/> 
```

并在我的数据部分进行了此更改：

```
<toolkit:DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding MinRun, Converter={StaticResource IntToStringConverter}}" HorizontalAlignment="Center" />
                        </DataTemplate>
                    </toolkit:DataGridTemplateColumn.CellTemplate> 
```

这是 XAML 的 DataGrid 部分。请注意，在所有列中，我首先尝试让“MinRun”列正确排序，然后我将在其他列上使用相同的技术。

[http://pastebin.com/ec14p4ks](http://pastebin.com/ec14p4ks)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:13:37.753

您的列可能绑定到一个`String`对象。因此，排序是按字母顺序完成的，而不是数字。

您应该将列绑定到`int`值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:21:11.450

看起来它正在执行字符串排序，这向我表明您正在将该列绑定到 String 属性。将属性更改为整数类型，DataGrid 将正确排序。

根据我的经验，程序员将属性设为字符串类型是因为他们希望，例如，当值无效时显示空白字符串。为此，请使用 ValueConverter，因此您可以灵活地显示所需的任何字符串，同时 WPF 对基础数据进行数字排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T00:34:26.017

**给定**

一个 DataGrid 显示一组 TestResults ，其中经过时间在模型中转换为字符串。当绑定到 DataGrid 时，排序是按字符串而不是数值。

解决方案如下所示：`var qry`是一个`List`具有 type 属性`TestElapsedTime`的自定义类型`Double`。

**将排序事件处理程序添加到 DataGrid**

```
 <DataGrid x:Name="testResultsDataGrid" Sorting="OnSorting"> 
```

**在事件处理程序中**

```
 private void OnSorting(object sender, DataGridSortingEventArgs e)
    {
        var col = e.Column.Header.ToString();
        if (col == "Elapsed Time")
        {
            var qry = GetCollectionViewSourceDefaultView();
            qry.Sort((x, y) =>
            {
                var diff = x.TestElapsedTime - y.TestElapsedTime;
                return (int)diff;
            });
        }
    } 
```

**问题**

经过的时间是双倍的，因此 lambda 必须执行转换为 int，如图所示。

**惊喜**

排序的方向由显示的数据网格决定，它知道如何使用一个排序功能对两个方向进行排序！

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-02-13T15:02:55.547

对我来说幸运的是，我可以更改原来的课程，但我对答案很感兴趣。

我添加了一个只读整数属性。

# ruby - Guard 或 guard-uglify 抛出错误不会重新运行

> ID：15929716
> 
> 赞同：0
> 
> 时间：2013-04-10T15:09:39.940
> 
> 标签：ruby, guard

刚开始运行Guard，我遇到了一个奇怪的问题。一旦我添加了多个文件来连接和 uglify --- uglifier 就会继续触发。我必须按 ^C 让它停止，这会引发以下错误：

```
 ERROR - Guard::Uglify failed to achieve its <run_on_change>, exception was:
 ExecJS::RuntimeError: 
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:142:in `exec_runtime'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:28:in `block in exec'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:27:in `exec'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/uglifier-1.3.0/lib/uglifier.rb:100:in `compile'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-uglify-0.1.0/lib/guard/uglify.rb:23:in `run_on_change'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:99:in `block in run_supervised_task'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:97:in `catch'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:97:in `run_supervised_task'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:146:in `block in run_first_task_found'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:144:in `each'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:144:in `run_first_task_found'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:79:in `block in run_on_changes'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:175:in `block (3 levels) in scoped_guards'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:174:in `each'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:174:in `block (2 levels) in scoped_guards'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:173:in `catch'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:173:in `block in scoped_guards'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:172:in `each'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:172:in `scoped_guards'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard/runner.rb:72:in `run_on_changes'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard.rb:141:in `block (2 levels) in setup_listener'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard.rb:365:in `block in within_preserved_state'
 <internal:prelude>:10:in `synchronize'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard.rb:362:in `within_preserved_state'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/guard-1.7.0/lib/guard.rb:140:in `block in setup_listener'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/listen-0.7.3/lib/listen/listener.rb:212:in `call'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/listen-0.7.3/lib/listen/listener.rb:212:in `on_change'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/listen-0.7.3/lib/listen/listener.rb:221:in `block in initialize_adapter'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/listen-0.7.3/lib/listen/adapter.rb:198:in `call'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/listen-0.7.3/lib/listen/adapter.rb:198:in `report_changes'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/listen-0.7.3/lib/listen/adapter.rb:210:in `poll_changed_dirs'
 /Users/joe/.rvm/gems/ruby-1.9.3-p194/gems/listen-0.7.3/lib/listen/adapters/darwin.rb:38:in `block in start' 
```

请注意，代码仍然被正确挖掘并且一切正常......但是一旦我点击 ^C uglify 就不会再次触发。就像我说的，我是 Guard 的新手，所以我不知道我是否做错了什么，这是 Guard-uglify 的错误还是 Ruby 的错误，或者只是 Guard 本身的错误。

几点注意事项：

1.  是的，所有宝石都是最新的
2.  红宝石 1.9.3
3.  Mac OSX 10.8.3

另外，这是我的 Guardfile：

```
guard :concat, type: "js", files: %w(vendor/jquery-1.9.1.min vendor/handlebars vendor/jquery.iosslider.min app), input_dir: "js", output: "js/s.min"

guard 'uglify', :destination_file => "js/s.min.js" do
  watch (%r{js/s.min.js})
end 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T20:59:44.087

uglifier 插件被配置为写入它正在监视更改的同一文件，从而创建一个无限循环。您需要使用不同的文件：

```
guard :concat, {
  type: 'js',
  files: %w(vendor/jquery-1.9.1.min vendor/handlebars vendor/jquery.iosslider.min app),
  input_dir: 'js',
  output: 'js/s'
}

guard 'uglify', :destination_file => 'js/s.min.js' do
  watch (%r{js/s.js})
end 
```

## 编辑

由于后来报错了，我看了一下插件，发现已经更新了，但是没有新的gem推送到RubyGems。所以看起来创作者对插件失去了兴趣。您可以通过更改以下内容直接从 GitHub 获取最新插件`Gemfile`：

`gem 'guard-uglify', github: 'pferdefleisch/guard-uglify'`

这使它在我的机器上工作。老实说，我的工具链中没有那个未完成和未维护的插件。您可以通过使用[guard-jammit](https://github.com/guard/guard-jammit)或[guard-process](https://github.com/socialreferral/guard-process)来达到同样的效果。

# jquery - 图片在页面刷新后从表格中删除，点击它也不会触发功能

> ID：15929718
> 
> 赞同：0
> 
> 时间：2013-04-10T15:09:48.477
> 
> 标签：jquery, ajax, image, html-table

我有一个表，每次用户单击添加按钮时，它都会添加一个新行，其中包含 4 个`<td>`元素，其中三个是输入元素，最后一个是一个小按钮。单击添加按钮效果很好，但是每当我单击小按钮时，什么都没有发生。它不会触发功能，当我刷新页面时，按钮而不是输入元素会消失。这是添加表格行的ajax：

```
 var new_period = $("<tr data-pid='" + period.id + "' class='period'>" +
    "<td>Name:</td><td><input class='period_name' type='text'></td>" +
    "<td>Start:</td><td><input class='period_start' type='text'></td>" +
    "<td>End:</td><td><input class='period_end' type='text'></td>" + 
    "<td><a id='remove_periods_btn' href = '#'><img src='/img/x.png'></a></td>" +
    "</tr>"); 
```

这是我点击小按钮时应该触发的 jQuery 函数：

```
 $("#remove_periods_btn").click(function(e) {
        alert("Working");
        e.preventDefault();
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:13:19.660

```
$(document).on('click', "#remove_periods_btn", function(e) {
    alert("Working");
    e.preventDefault();
}); 
```

您只是将事件处理程序附加到当前在 DOM 中的元素；如果它们是通过 ajax 添加的，您可以将事件处理程序附加到文档对象并检查目标是您的元素。

一个“更糟糕”的解决方案（本质上是 jQuery 为上述代码在幕后所做的）

```
$(document).click(function(eventObject){
    if (eventObject.target.id === 'remove_periods_btn') {
        alert("Working");
        e.preventDefault();
    }
}); 
```

# c - C UNIX 多进程间信号量同步

> ID：15929719
> 
> 赞同：2
> 
> 时间：2013-04-10T15:09:49.610
> 
> 标签：c, unix, semaphore

我在 unix 编程方面有点新，我需要一些帮助。

我想做一些事情，比如用信号量忙等待。我有多个由父级分叉的进程。在这个父级中，我创建了一个信号量。基本上我需要像障碍一样的东西。我想在另一个孩子完成他的初始化部分时向所有子进程发出信号。我想等到所有子进程都完成他们的初始化，然后我想开始繁重的计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:18:38.423

这些步骤并不是真正特定于 UNIX。

在父级中，创建一个值与子级数相同的信号量。

当每个孩子完成它的初始化时，孩子递减信号量并等待为零。

当信号量达到零时，所有的孩子都被初始化，你可以做其他事情。

# android - OSMDroid ItemizedOverlayWithBubble 带有列表的地图气球

> ID：15929721
> 
> 赞同：1
> 
> 时间：2013-04-10T15:09:54.570
> 
> 标签：android, map, osmdroid

当在地图上单击兴趣点 (POI) 图标时，我正在使用 OSM 机器人及其奖励包来创建气球弹出窗口。我能够让**ItemizedOverlayWithBubble**工作得很好。然而，在某些情况下，POI 图标非常接近，因此很难用于自由点击他们想要的那个。我认为的一种解决方案是将 POI 合并为一个顶部带有数字的图标。我也有这个工作得很好。

所以我想做的是有一个**ItemizedOverlayWithBubble** 显示一个小的可滚动和可选择的列表。单击列表中的项目会将用户带到另一个屏幕以详细说明 POI。

[根据本教程](https://code.google.com/p/osmbonuspack/wiki/Tutorial_2)中找到的线索，我假设下面的代码可以工作，但这不起作用，只显示**标题**和**描述**向量中的最后一项。

任何有关如何解决此问题的建议将不胜感激。

```
 //================================================================================================================
      /**
       * Adds a map information bubble with a selectable list if items.
       * 
       * @param location The location of the info bubble on the map,
       * @param titles The titles to go in the info bubble.
       * @param descriptions The descriptions to go in the info bubble.
       * @param mapMarkerType The map marker type.
       */
      //================================================================================================================
      public void addMapInfoList(GeoPoint location, Vector<String> titles, Vector <String> descriptions, int mapMarkerType)
      {
           new DefaultResourceProxyImpl(this.ctx);
           Drawable localDrawable = getMapMarker( 8);

           ArrayList<ExtendedOverlayItem> localArrayList = new ArrayList<ExtendedOverlayItem>();//items list

           int i = 0;
           for (String title: titles)
           {

            String description = descriptions.get(i);
            ExtendedOverlayItem localExtendedOverlayItem = new ExtendedOverlayItem(title, description, location, this.ctx);
            localExtendedOverlayItem.setImage(this.ctx.getResources().getDrawable(2130837507));
            localExtendedOverlayItem.setMarkerHotspot(OverlayItem.HotspotPlace.CENTER);
            localExtendedOverlayItem.setMarker(localDrawable);
            localArrayList.add(localExtendedOverlayItem); 
            i++;
           }

           ItemizedOverlayWithBubble<ExtendedOverlayItem> localItemizedOverlayWithBubble = new ItemizedOverlayWithBubble<ExtendedOverlayItem>(this.ctx, localArrayList, this.map);

          // ItemizedOverlayWithBubble<ExtendedOverlayItem> poiMarkers =   new ItemizedOverlayWithBubble<ExtendedOverlayItem>(this, poiItems, map);

           this.map.getOverlays().add(localItemizedOverlayWithBubble);
      }//================================================================================================================ 
```

# sharepoint - 将共享点列表与访问前端连接

> ID：15929728
> 
> 赞同：1
> 
> 时间：2013-04-10T15:10:09.610
> 
> 标签：sharepoint, ms-access

我有一个访问数据库，我已将其拆分为前端和后端两个文件。

我已将后端迁移到共享点列表，现在我想使用访问前端配置共享点列表。有选择吗？如果你让我知道会很棒的程序。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:27:50.003

我有类似的设置。在您的 Access 前端（假设您有 2010）：

1.  转到**外部数据**
2.  在**导入和链接**下，转到**更多**
3.  选择**SharePoint 列表**
4.  链接到您选择的表格。

这有帮助吗？

# php - 用php操作对象数组中的字符串

> ID：15929729
> 
> 赞同：-4
> 
> 时间：2013-04-10T15:10:09.830
> 
> 标签：php, loops, stdclass

我有一系列 stdClass ：

```
array (size=2)
  0 => 
    object(stdClass)[2136]
      public 'id' => string '1946' (length=4)
      public 'office' => string 'test' (length=4)
      public 'level1' => string 'test level 1' (length=12)

  1 => 
    object(stdClass)[2135]
      public 'id' => string '1941' (length=4)
      public 'office' => string 'test' (length=4) 
```

如何用 span 标签包装每个“测试”值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:30:36.617

```
foreach ($array as $stdClass)
    foreach ($stdClass as &$value) // reference
        if ($value === "test")
            $value = "<span>".$value."</span>"; 
```

只需遍历数组和类，因为它们都可以使用 foreach 进行迭代。（通过引用迭代类，否则它不会改变）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:37:04.743

要将与单词“test”匹配的所有对象值包装在一个跨度中，您需要遍历对象属性以及数组本身。您可以使用 foreach 执行此操作：

```
foreach ($object in $array) {
    foreach ($property in $object) {
        if ($object->$property == 'test') {
            $object->$property = "<span>{$object->property}</span>";
        }
    }
} 
```

如果您想用跨度将单词 test 的所有实例包装在属性值中，您可以使用 preg_replace 执行此操作，如下所示：

```
foreach ($object in $array) {
    foreach ($property in $object) {
        $object->$property = preg_replace('/\b(test)\b/', '<span>$1</span>', $object->$property);
    }
} 
```

给定字符串“This test is for testing purpose as a test”，上面的调用将输出：

```
This <span>test</span> is for testing purposes as a <span>test</span>. 
```

# php - Heroku postgres 入口 - 无法连接到服务器错误

> ID：15929731
> 
> 赞同：0
> 
> 时间：2013-04-10T15:10:20.930
> 
> 标签：php, heroku, heroku-postgres, php-pgsql

**背景..** 我正在尝试从 php 脚本外部连接到我的 heroku 数据库，但出现“无法连接到服务器”错误

**技术..** 这是一个“起重机”生产级数据库，而不是共享数据库。我正在尝试从运行在共享托管平台上的 php 脚本连接，

**到目前为止的故事......** 我可以从我的本地机器和 postgres.heroku.com 输出的 php 连接字符串进行连接。我也可以连接 psql 字符串，所以连接信息没有问题

.. 但是当我将该 php 脚本移动到我在另一台主机上启动并运行的 php 服务器时，我会收到“无法连接”错误。这些主机向我保证，从它们的外部连接没有限制边。

**编码..**

```
$dbconn = pg_connect("host=ec2-54-235-162-154.compute-1.amazonaws.com port=5882 dbname=***** user=***** password=***** sslmode=require options='--client_encoding=UTF8'") or die('Could not connect: ' . pg_last_error()); 
```

**错误..**

```
Warning: pg_connect(): Unable to connect to PostgreSQL server: could not connect to server: Connection refused Is the server running on host "ec2-54-235-162-154.compute-1.amazonaws.com" and accepting TCP/IP connections on port 5882? in /usr/local/pem/vhosts/164125/webspace/httpdocs/scheduled/postgres_vr.php on line 3 Warning: pg_last_error(): No PostgreSQL link opened yet in /usr/local/pem/vhosts/164125/webspace/httpdocs/scheduled/postgres_vr.php on line 3 Could not connect: 
```

**选项**

我在 heroku 中找不到任何关于将 IP 地址列入白名单的文档，这将是第一个猜测？还有其他指针吗？

**编辑**我刚刚找到了这个线程，它类似于..
[Heroku Postgres Connection from localhost PHP application](https://stackoverflow.com/questions/12393269/heroku-postgres-connection-from-localhost-php-application) .. 但据我所知，我启用了正确的 ssl 设置。这是openssl和pgsql上phpinfo（）的相关部分。

```
OpenSSL support enabled
OpenSSL Library Version OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008
OpenSSL Header Version  OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008

PostgreSQL(libpq) Version   8.1.23
Multibyte character support enabled
SSL support enabled
Active Persistent Links 0
Active Links    0

Directive   Local Value Master Value
pgsql.allow_persistent  On  On
pgsql.auto_reset_persistent Off Off
pgsql.ignore_notice Off Off
pgsql.log_notice    Off Off
pgsql.max_links Unlimited   Unlimited
pgsql.max_persistent    Unlimited   Unlimited 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T07:02:36.920

这可以在本地工作，但不能在单独的服务器上工作。该错误表示它无法建立连接，表明它永远不会完成 syn/ack 握手。由于这可以在您的计算机上运行，​​我们可以消除 Heroku 和 PostgreSQL。具体的错误和场景表明它不是 PHP。

所以它必须是别的东西。我首先要看的是位于您的服务器和互联网之间的任何防火墙。如果做不到这一点，请检查您在 AWS EC 实例上可能拥有的任何设置，尤其是关于 iptables 的设置。

# php - 使用 PHP 向 android 发送和接收变量

> ID：15929737
> 
> 赞同：0
> 
> 时间：2013-04-10T15:10:42.090
> 
> 标签：php, android, mysql, http-post

将变量发送到远程 php 文件并在单独的变量中接收 MySQL 行中的其余数据的最佳方法是什么（只会发送一个变量）。我已经将要发送的变量保存为“名称” 这是我的 PHP

```
<?php

// Make a MySQL Connection
mysql_connect("mysql8.000webhost.com", "a6811170_NTUDB", "?????") or die(mysql_error());

// Select the database
mysql_select_db("a6811170_NTUDB") or die(mysql_error());

//Get Name
$name=name; //Whatever is sent

// Get data from the table
$result = mysql_query("SELECT * FROM SocietyDatabase WHERE Name=$name") or die(mysql_error());  

while($row = mysql_fetch_array( $result )) {
print(json_encode($row['Name']));
print(json_encode($row['President']));
print(json_encode($row['Description']));
} 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:12:32.180

使用 url (GET) 或 POST 中的变量从您的应用程序调用您的 php 页面，并将结果解析为 JSON。

编辑：从您的应用程序调用您的 php 脚本：[使用 android 发出 HTTP 请求](https://stackoverflow.com/questions/3505930/make-an-http-request-with-android)

并且更喜欢使用 PDO，mysql_ 函数自 php 5.5.0 起被标记为已弃用。使用 PDO 将是：

```
<?php

$db = new PDO('mysql:host=mysql8.000webhost.com;dbname=a6811170_NTUDB', 'a6811170_NTUDB', 'PASSWORD');
$query = $db->prepare("SELECT * FROM SocietyDatabase WHERE Name=?");
$query->execute(array($_GET['name']));
$result = $query->fetchAll();

print(json_encode($result));

?> 
```

这样，输入参数就不会被注入，并且您正在使用最新的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:23:06.990

短数据的最佳方式是您调用的 http“get”

[http://www.myserver.de/myscript.php?name=honkytonk](http://www.myserver.de/myscript.php?name=honkytonk)

您可以在 $_REQUEST['name'] 中找到“name”的内容。

如果您的数据变大，请使用发布请求。对于图片或文件，请使用带有内容/多部分数据的帖子。

在一边：

始终逃避您的外部数据，否则您肯定会被黑客入侵！

像这样：

// 从表中获取数据

```
$result = mysql_query("SELECT * FROM SocietyDatabase WHERE 
       Name='".mysql_real_escape_string($name)."'") or die(mysql_error()); 
```

# perl - 在 ExtUtils::MakeMaker 下调用 gcc -pthread

> ID：15929739
> 
> 赞同：2
> 
> 时间：2013-04-10T15:10:43.090
> 
> 标签：perl, gcc, pthreads, makemaker

在 Makefile.PL 中使用`-pthread`( *not* )指定编译和链接的正确方法是什么？`-lpthread`

我的理解是，在针对 pthread 构建时应该调用 gcc `-pthread`，因为这个标志扩展为正确的平台特定标志，用于编译和链接。

我开始：

```
use Config;
my %mm = ( NAME => 'Local::Example::Pthreaded', ...);
...
if ($Config{ccname} eq 'gcc') {
  $mm{DEFINE} = join(' ', '-pthread', $mm{DEFINE});   # ??? in the right place?
  $mm{LIBS}   = ['-pthread'];                         # XXX ignored!

}
WriteMakefile(%mm); 
```

但是，我不确定 DEFINE 的用法是否放在`-pthread`正确的位置。（用户定义出现在编译命令的末尾。）此外，LIBS 参数被忽略，因为它看起来不像典型的`-l`/`-L`链接器参数：“LIBS 中无法识别的参数被忽略：'-pthread'”。

# wordpress - wp_dropdown_pages tax_query 子句

> ID：15929741
> 
> 赞同：0
> 
> 时间：2013-04-10T15:10:43.413
> 
> 标签：wordpress

我在 wordpress 中显示自定义帖子类型的下拉列表。第一个代码块使用 WP_Query

```
$houseQuery = new WP_Query(
    array(
        'post_type' => 'house',
        'order'     => 'ASC',
        'post_status' => 'publish',
        'orderby'   => 'title',
        'nopaging' => true,
        'tax_query' => array(
        array(
            'taxonomy'  => 'teamtype',
            'field'     => 'slug',
            'terms'     => 'sectorteam', // exclude house posts in the sectorteam custom teamtype taxonomy
            'operator'  => 'NOT IN')
        ))
);
if( $companyList->have_posts() ) :
    while ($companyList->have_posts()) : $houseQuery->the_post();
        if(get_the_ID()==$c)
            $name=$post->post_title;
        echo '{ value:'.get_the_ID().', label: "'.get_the_title(get_the_ID()).'"},';
    endwhile;
endif; 
```

这是使用 'wp_dropdown_page()' 方法的代码的第二个剪辑，更简洁一些

```
$args = array (
    'id' => 'house',
    'name' => 'house',
    'echo' => 1,
    'post_type' => 'house'
);
wp_dropdown_pages($args); 
```

我需要排除第一个示例中由“tax_query”定义的帖子，但要确保如何使用“wp_dropdown_pages”使用的参数来完成，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:50:45.210

您是否尝试过使用[Codex 中描述](http://codex.wordpress.org/Function_Reference/wp_dropdown_pages)`exlude`的或`exclude_tree`参数？

> **排除**
> 逗号分隔的要排除的类别 ID 列表。例如，'exclude=4,12' 表示类别 ID 4 和 12 将不会显示/回显或返回。默认不排除任何内容。

由于您使用的是`post_type`参数，我假设您的自定义帖子类型是分层的。

# gnu - 如何在eclipse中使用gnu trove

> ID：15929742
> 
> 赞同：1
> 
> 时间：2013-04-10T15:10:43.860
> 
> 标签：gnu, importerror, trove4j

我下载了 gnu trove 3.03 并将其解压到本地目录。然后我`trove-3.03-src.jar`在eclipse中添加到我的项目中，但仍然有导入错误`The import gnu.trove.TDoubleArrayList cannot be resolved`，我该如何解决这个问题？任何回复将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T00:56:27.517

您可能不应该只添加“-src”jar 文件。该 jar 文件用于源代码。您需要二进制 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-08T20:21:10.027

只需在最外面的文件夹中搜索 .jar，您应该会看到 3 个 jar。1\. Junit.jar 2\. trove-xxxx-src.jar 和 3\. trove-xxxx.jar 选择没有SRC的那个并导入。

# asp.net-mvc-3 - 检查用户是否被授权

> ID：15929746
> 
> 赞同：0
> 
> 时间：2013-04-10T15:10:53.880
> 
> 标签：asp.net-mvc-3, authentication, authorization, windows-authentication

我需要能够确定用户是否在我的 ASP.net MVC 3 应用程序中**获得授权（未经过身份验证）。**

我有一个使用 Windows 身份验证对用户进行身份验证的 Intranet 应用程序。只有“allowedUsers”组中的用户才被允许访问该站点，这是通过以下方式强制执行的`AuthorizeAttribute`：

```
[Authorize(Roles="allowedUsers")]
public abstract class BaseController : Controller 
```

这可以按预期工作，并且不会为不在组中的任何用户提供对该站点的访问权限。到目前为止，一切都很好。

但是，在用户经过身份验证但未授权的情况下，我现在遇到了问题。请允许我解释一下：

在我的`BaseController`我覆盖了该`Initialize`方法。在这里，我使用控制器所需的任何依赖项设置我的域服务，其中之一是`User.Identity`对象。

```
Service.Initialize(User.Identity); 
```

在我的服务中，我使用`Identity.Name`来从我的数据库中查找用户详细信息。我的服务是在这样的假设下设计的，即如果用户已经走到这一步，他们必须是授权用户，所以如果没有记录匹配，我假设他们是新的（但授权的）用户，并使用`Identity.Name`提供的准备好创建一个新的用户记录他们稍后输入其余的详细信息。

问题出现在用户经过身份验证但未授权的情况下；在这种情况下，用户被拒绝访问页面，但控制器仍在幕后实例化并初始化服务。该服务永远不会在数据库中找到匹配项（因为用户不应该具有访问权限）并创建新的用户记录。这给我留下了大量不应访问的用户的记录（仅`Identity.Name`填写）。

我第一次（天真的）尝试解决这个问题是检查`Identity.IsAuthenticated`我的服务中的属性，但是，经过大量研究，我了解了身份验证和授权之间的区别，并理解了为什么这是不够的，因为用户可以通过身份验证但不能授权。

所以我基本上正在寻找的是类似于`User.IsAuthenticated`但授权 EG的东西`User.IsAuthorised`。这个想法是我将在我的控制器中检查这一点，如果用户未获得授权，我将不会初始化服务。

有没有办法确定这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:43:19.067

我决定不从身份验证或授权的角度考虑这个问题，而是从 MVC 管道的角度考虑这个问题。

我的问题来自这样一个事实，即我正在以似乎被调用的`Initialize`方法初始化我的服务，`Controller`即使用户未经授权也是如此。这让我很清楚，在调用任何操作方法之前，我的服务的初始化需要在控制器的生命周期中尽可能晚地进行。

我将服务初始化逻辑移到了基本实现*之前*`OnActionExecuting`的方法中（以便在执行操作方法之前初始化我的服务）。如果用户既获得授权又经过身份验证，MVC 管道只会调用此方法，从而为我提供所需的行为。

# html - 如何找到 CSS 高度的来源？

> ID：15929749
> 
> 赞同：0
> 
> 时间：2013-04-10T15:11:02.460
> 
> 标签：html, css

我正在尝试修复这个经典的 asp spaghetti 代码页中的 CSS。问题是这个特定的 div 容器有一个垂直滚动条。现在我的理解是，除非您设置高度，否则 div 标签将展开以包含所有内容并且不会显示滚动条。当我查看 chrome f12 工具中的 div 标签时，我既没有看到在 CSS 中设置了高度，也没有看到它被设置为内联样式。

有什么工具或任何东西我可以用来查看这个高度（如果有的话）的设置位置。

我没有粘贴代码，因为呈现的 HTML 可能超过几页。

**更新：我设法去掉了所有不必要的部分并缩小到问题代码。**

我想知道的是为什么节点

```
 <div class="tabData" id="tab3data" style="visibility: visible;"> 
```

不扩展以适应内容。它的高度在哪里受到限制？

```
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style type="text/css">
        .tabData
        {
            width: 100%;
            background-color: Yellow;
            overflow: auto;
        }
    </style>
</head>
<body>
    <div class="tabData">
        <div style="height: 390px; background-color: Green;">
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />
            <br />

        </div>
        Hello
    </div>
</body>
</html> 
```

# c# - 例外：IsolatedStorageFileStream 上不允许操作 - foreach

> ID：15929750
> 
> 赞同：0
> 
> 时间：2013-04-10T15:11:15.117
> 
> 标签：c#, xml, windows-phone-7, exception

我声明了一个列表，其中包含位于此应用程序的独立存储中的一些 XML 文件的名称。从中，我试图提取 XML 的相关元素，然后将其用于创建一个对象，该对象添加到 ObservableCollection 以用于绑定应用程序的一个页面。

```
private void parseXML()
    {
        using (IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication())
        {
            foreach (string xmlname in selectedEventTypes)
            {
                using (IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream(xmlname, FileMode.Open, isoStore))
                {
                    XDocument xmldoc = XDocument.Load(isoStream);
                    foreach (XElement xe in xmldoc.Descendants("results"))
                    {
                        Event eventInfo = new Event();
                        eventInfo.eventname = xe.Element("eventname").Value;
                        eventInfo.name = xe.Element("venue").Element("name").Value;
                        eventInfo.address = xe.Element("venue").Element("address").Value;
                        eventInfo.town = xe.Element("venue").Element("town").Value;
                        eventInfo.postcode = xe.Element("venue").Element("postcode").Value;
                        eventInfo.type = xe.Element("venue").Element("type").Value;
                        eventInfo.imageurl = xe.Element("imageurl").Value;
                        eventInfo.date = xe.Element("date").Value;
                        eventInfo.description = xe.Element("description").Value;
                        eventInfo.doorsopen = xe.Element("openingtimes").Element("doorsopen").Value;
                        eventInfo.doorsclose = xe.Element("openingtimes").Element("doorsclose").Value;
                        eventInfo.lastentry = xe.Element("openingtimes").Element("lastentry").Value;
                        eventList.Add(eventInfo);
                    }
                }
            }
        }
    } 
```

我正在使用 foreach 语句来遍历列表并将其用作文件名，但是我相信这是问题所在，但不知道如何解决这个问题。

帮助将不胜感激。

# java - 数组中每个位置的链表

> ID：15929754
> 
> 赞同：2
> 
> 时间：2013-04-10T15:11:23.023
> 
> 标签：java, arrays, list, linked-list, hashtable

我正在处理一项任务，但我的代码遇到了问题。在赋值中，我们将获取一系列数字，对它们进行哈希处理，然后将它们放入一个数组中，其中每个位置都是一个链表。我已经为链表（称为 MyList）编写了类，并编写了代码，如果该数组位置中没有任何内容，则将整数放入数组中。我遇到的问题是，当我尝试打印时，我继续为数组中的每个位置获取“null”。我在这里犯了一个愚蠢的错误还是我的方法有缺陷？谢谢你。

```
public class MyHashTab {

public MyHashTab(int initialCapacity, MyList[] anArray) {

}

public static void insert(int searchKey, MyList[] anArray) {

    int hash = searchKey % anArray.length;

    MyList current = new MyList();

    current.iData = searchKey;

    if (anArray[hash] == null) {

        current = anArray[hash];

    }else{

        insertMyList(current, anArray);

    }

}

public static void insertMyList(MyList current, MyList[] anArray) {

    System.out.println("We are here.");
}

public static void printHash(MyList[] anArray) {

    System.out.println("The generated hash table with separate chaining is: ");

    for (int i = 0; i < anArray.length; i++) {

        System.out.println("The items for index[" + i + "]: " + anArray[i]);

    }
}

}

public class MyList {

int iData; // This integer is used as a key value, and as a way to see the actual node instead of it's memory address. 
MyList current;
MyList previous; // This is a pointer to a nodes left child. Pointing seems rude, but they sometimes point to null which, as well know, is less rude. 
MyList next; // This is a pointer to a nodes right child. 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:15:36.523

您的插入逻辑是相反的。代替

```
current = anArray[hash]; 
```

它应该是

```
anArray[hash] = current; 
```

`insertMyList(current, anArray)`我相信无论数组位置最初是否为空，您也应该调用，所以逻辑应该是

```
if(anArray[hash] == null) {
    anArray[hash] = new MyList();
}
insertMyList(anArray[hash], anArray); 
```

# jboss7.x - 从 JBoss AS 7 的 SAR 档案中引用外部库

> ID：15929755
> 
> 赞同：0
> 
> 时间：2013-04-10T15:11:24.007
> 
> 标签：jboss7.x, jmx, mbeans, sar

我的情况如下：我想使用 SAR 存档部署一个特殊的 MXBean。这应该很容易吧？

对，除非 bean 引用来自外部库的类。发生这种情况时，我发现无法告诉 JBoss 将那些我与 SAR 归档中的 bean 一起打包的外部库添加到类路径中。

到目前为止，我已经尝试了以下方法：
1\. 只需将库添加到存档的根目录中。
2\. 修改 Class-Path 清单条目以在其中添加库名称
3\. 添加 jboss-structure.xml（从 /deploy 目录中的 jboss5 的 sar 档案之一复制）
4\. 查看 jboss-deployment-structure.xml 但真的发现与我正在尝试做的事情没有任何联系。

无论我尝试了什么，我都无法说服 JBoss 从 sar 档案中打包为 jar 的库中加载我在 bean 中引用的类。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:51:42.130

与此同时，我设法弄清楚了，感谢以下文章 [http://middlewaremagic.com/jboss/?p=1081](http://middlewaremagic.com/jboss/?p=1081)

问题很简单：只需将 jboss-deployment-structure.xml 文件添加到 META-INF 目录，内容如下：

```
<jboss-deployment-structure>
<deployment>
    <resources>
        <resource-root path="_path_to_archive_goes_here_" />
    </resources>
</deployment> 
```

而已。Jboss 会将指定的资源添加到已部署的 SAR 存档的类路径中。希望这可以帮助某人。

# javascript - 执行 btn.click()

> ID：15929756
> 
> 赞同：0
> 
> 时间：2013-04-10T15:11:30.113
> 
> 标签：javascript, xpages

我有一个 xPage，在其上添加了一个按钮。在此按钮上，单击时会执行一些服务器端脚本。

我想要的是每当用户单击菜单中的链接时，都会执行此代码。因此，我在链接元素上创建了以下代码。

```
 <xp:link loaded="true" escape="true" id="lnkTab"
                value="#{javascript:rootNode.getFrame();}">
                <xp:this.text><![CDATA[#{javascript://return rootNode.getLabel();
return rootNode.getLabel();}]]></xp:this.text>
                <xp:eventHandler event="onclick" submit="true"
                    refreshMode="complete">
                    <xp:this.action><![CDATA[#{javascript:sessionScope.selectedPage = rootNode;}]]></xp:this.action>
                    <xp:this.script><![CDATA[
var currentPage = "#{javascript: return this.getParent().getValue();}";
var currentPageLocation = window.location.href;
var lastSlash = currentPageLocation.lastIndexOf("/");

var page = currentPageLocation.substring(lastSlash+1,currentPageLocation.length);
if(page == "UserProfile.xsp" && currentPage != "UserProfile.xsp"){
    if(isProfileChanged()){
        debugger;
        var retValue = confirm("U heeft wijzigingen niet opgeslagen.\nWilt u deze alsnog opslaan?");
        if(retValue){
            sendRedirectSignal("#{javascript: rootNode.getFrame();}","#{id:txtRedirectSignal}","#{id:btnProfileSave}");
            thisEvent.preventDefault();
            thisEvent.stopPropagation();        

            sendRedirectSignal("#{javascript: rootNode.getFrame();}","#{id:txtRedirectSignal}","#{id:btnProfileSave}");
            return false;

    }
}}]]></xp:this.script>

                </xp:eventHandler>
            </xp:link> 
```

sendRedirectSignal 的代码如下

```
function sendRedirectSignal(strPage,redirectId,btnId){
    var hidRedirect = dojo.byId(redirectId)
    var btnProfile = dojo.byId(btnId);
    if(hidRedirect!=null && btnProfile != null){
        console.log(btnProfile);
        hidRedirect.value = strPage;
        console.log(btnProfile.click());
    }

} 
```

如您所见，代码使用 dojo 检索按钮并发出 click 事件。由于某种原因，这根本行不通。没有在按钮上执行事件处理程序。当我在 firebug 中执行 btn 时，代码正在完美执行。有人可以帮助解决这个问题吗？为什么代码没有执行，我怎样才能让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:41:24.003

这是我对以下问题的重复回答：[我可以在数据表的（链接）列中使用 onclick 事件设置范围变量吗？](https://stackoverflow.com/questions/15389984/can-i-set-scoped-variable-with-onclick-event-in-link-column-within-data-table)

在我之后重复：客户端总是优先于服务器端:-)

xp:link 控件的 value 属性导致根本不执行服务器端事件。单击链接时，它只是对相关资源执行 HTTP GET。

因此，如果您删除 value 属性，则应该触发您的 onclick 服务器端事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:33:08.407

你可以简化一下。为什么将代码放在按钮中以使链接中的代码单击该按钮？两个行动方案：

*   删除按钮（如果您不需要它，否则）并将代码放在链接中
*   如果您也需要按钮：将按钮中的代码移动到 SSJS 函数中，然后从链接和按钮调用该函数。xp:link 也可以执行 SSJS

# c# - 解决方案中项目的不同 dll 版本

> ID：15929758
> 
> 赞同：0
> 
> 时间：2013-04-10T15:11:31.950
> 
> 标签：c#, .net, dll

我有一个包含大量项目的桌面应用程序的大解决方案。有一个使用旧版本的 MySql dll。我无法用更新的软件替换它，因为它不完全兼容，而且我无法承受任何意外行为（一群客户使用此软件）。

最近我创建了一个新项目，它使用 nhibernate（通过 nuget）和最新的 MySql。我想通过这个项目一点一点地开始使用数据库。问题是即使它编译成功，当我运行它时也会抛出异常。（引用上述两者的主项目找不到 MySql dll 之一）。

我现在不能仅仅替换旧的数据库访问项目，因为它在几百/千百个地方被引用。

最好的方法是什么？

# macos - PF 数据包过滤器：带星号的锚点如何工作？

> ID：15929759
> 
> 赞同：7
> 
> 时间：2013-04-10T15:11:34.740
> 
> 标签：macos, firewall, bsd

我目前正在学习`pf`安装在我的 Macbook（OS X Mountain Lion）上的数据包过滤器。

我无法理解的一件事是锚点，或者更具体地说，是与锚点有关的某个特征。您可以以`anchor "foo/*"`. 请注意锚名称末尾的星号。我的问题是：这是做什么的？

这是文档（[http://www.openbsd.org/faq/pf/anchors.html](http://www.openbsd.org/faq/pf/anchors.html)）关于这个主题的内容：

> 由于可以嵌套锚点，因此可以指定对指定锚点内的所有子锚点进行评估：
> 
> ```
> anchor "spam/*" 
> ```
> 
> 此语法导致对附加到垃圾邮件锚点的每个锚点内的每个规则进行评估。子锚点将按字母顺序进行评估，但不会递归下降。锚点总是相对于定义它们的锚点进行评估。

当我读到这篇文章时，这意味着这个锚定义被替换为 的所有子锚`spam`，按字母顺序排列。因此，如果`spam/foo1`和`spam/foo2`存在，`anchor "spam/*"`将被替换为`anchor "spam/foo1"`和`anchor "spam/foo2"`。`spam`锚内的其他规则将被忽略。但是看看默认的 OS X 配置我一定是错的：

```
$ pfctl -sr
scrub-anchor "com.apple/*" all fragment reassemble
anchor "com.apple/*" all

$ pfctl -a com.apple -sr
anchor "100.InternetSharing/*" all
anchor "200.AirDrop/*" all
anchor "250.ApplicationFirewall/*" all
anchor "300.NetworkLinkConditioner/*" all 
```

所以，根据我的理解，输出`pfctl -sr`也可以是：

```
$ pfctl -sr
scrub-anchor "com.apple/*" all fragment reassemble
anchor "100.InternetSharing/*" all
anchor "200.AirDrop/*" all
anchor "250.ApplicationFirewall/*" all
anchor "300.NetworkLinkConditioner/*" all 
```

但是，如果我现在查看 ApplicationFirewall 规则：

```
$ pfctl -a com.apple/250.ApplicationFirewall -sr
block drop in inet proto icmp all icmp-type echoreq
block drop in inet6 proto ipv6-icmp all icmp6-type echoreq 
```

这个锚点只包含过滤规则，没有子锚点。如果我的解释是正确的，星号语法不会加载这些。但显然它们是，因为我无法在启用此锚点的情况下 ping 我的 Macbook。

我希望你能理解我在理解这种语法时遇到的问题。谁能更清楚地向我解释一下？例子会很有帮助。

提前致谢！

# css - 悬停和高度扩展的奇怪css3错误

> ID：15929761
> 
> 赞同：0
> 
> 时间：2013-04-10T15:11:38.103
> 
> 标签：css, hover, height, transition, expand

我不知道我做错了什么，但显然它不起作用......我想悬停`<li id="photo">`，然后`#sub-menu`应该将它的高度从 扩大`65px`到`130px`

```
<div id="nav-wrapper">
        <div id="logo">CAB</div>
        <div class="navigator-line"></div>
        <ul id="nav-bar">
            <li><div class="navigator"></div>ABOUT</li>
            <li><div class="navigator"></div>WEB</li>
            <li><div class="navigator"></div>CORPORATE</li>
            <li id="photo"><div class="navigator"></div>PHOTOGRAPHY</li>
            <li><div class="navigator"></div>CONTACT</li>
        </ul>
    </div> 
```

简单的事情，但它没有运行

[http://jsfiddle.net/BrVuG/](http://jsfiddle.net/BrVuG/)

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:22:12.907

问题是`#photo:hover #sub-menu`- 因为`<li>`不是子菜单 div 的祖先 .. 并且在当前上下文中`#sub-menu`，悬停时无法定位，`#photo`因为它涉及回溯 DOM（目前不支持这样的组合器）。您只能通过定位后代或兄弟姐妹来实现此效果，而不是祖先..如果您使用不同的选择器，您会看到转换发生，例如

`#nav-wrapper:hover + #sub-menu`

[http://jsfiddle.net/BrVuG/2/](http://jsfiddle.net/BrVuG/2/)

但是，在当前情况下，您尝试做的事情是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:48:36.253

*（对 Adrift 所说的内容进行了一些补充……）*

如果你真的想用 来做到这一点`<li>`，你只有两个解决方案：

*   放在`#sub-menu`里面`<li>`或之后。很简单。我认为这样做更简单，特别是因为您在`#nav-wrapper`.
*   使用 javascript（使用鼠标悬停操作`<li>`将切换 的宽度`#sub-menu`）。

# excel-2007 - 使用 TOC 保存为 Pdf

> ID：15929762
> 
> 赞同：3
> 
> 时间：2013-04-10T15:11:39.517
> 
> 标签：excel-2007

在 Excel 2007 中，您可以将工作簿另存为 pdf，这会生成一个不错的 pdf 文档，该文档可以具有自定义页眉和页脚。

如果我的工作簿有 12 张表格，例如 1 月到 12 月的销售额，那么能够将其保存为 pdf 并带有每月引用的自动目录会很好。因此，当您打开 pdf 文档时，您可以使用超链接导航到文档中所需的点（月份）。

这可以使用另存为 pdf excel 功能吗？或者还能怎么做。是否有任何第三方软件可以从 VBA 调用以创建 pdf 并自动执行此操作？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T02:16:01.333

我想到的答案是使用 .NET。但是后来你提到了 VBA，所以我想你可能愿意走那条路。使用 VSTO 创建托管加载项（例如：C# 和 Excel 的对象模型）。使用 C#（一般为 .Net），您将拥有更多使用 PDF 生成器的选项。

一些有用的链接：

1.  VSTO：http: [//msdn.microsoft.com/en-us/office/hh133430.aspx](http://msdn.microsoft.com/en-us/office/hh133430.aspx)
2.  .NET 的众多 PDF 生成器之一：http: [//sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-16T08:48:26.673

也许您可以尝试一下[http://exceltopdf.org/](http://exceltopdf.org/) 我尝试转换 2 张 excel 文档，并得到了不错的输出

**更新 1**

为了在单个 PDF 文件（而不是多个 PDF）中打印所有单独的工作表，您需要为所有工作表设置相同的页面设置选项（Excel 中的页面设置会修改结果文件的打印大小，例如，如果您在 Excel 中将页面布局设置为横向，打印的页面将是横向的，但您的原始 Excel 文件仍将保持相同的视图）。

为所有单独的 Excel 工作表设置相同的页面设置选项： 打开 Excel 工作簿 右键单击​​工作区中任何工作表的选项卡（默认情况下，工作表选项卡名为 Sheet1、Sheet2 等...）选择 Select all Sheets 选项（这将选择工作区中的所有工作表，如果所有工作表选项卡都有白色背景，您可以知道它们已被选中，就像活动工作表选项卡一样）转到文件->页面设置，为生成的打印页面选择所需的选项（重要的是所有页面的打印质量相同），然后按确定，以便 Excel 记录所有页面具有相同打印设置的事实。即使您没有进行任何更改，也请务必按下“确定”按钮，因为这会“告诉”Excel 所有工作表都具有相同的页面设置选项。转到文件->打印预览，看看您是否喜欢打印为 PDF 时页面的显示方式。如果您对打印选项没有任何更改，请转到“文件”->“打印”，从“打印机名称”部分选择“打印内容”和“PDF XChange”下的“整个工作簿”选项，然后单击“确定”以创建 PDF 文件 PDF XChange 将询问您在哪里保存 PDF 并且（如果设置了该选项）它将在创建 PDF 时打开它。

资料来源：[http ://www.tracker-software.com/knowledgebase/185-How-do-I-make-Excel-print-several-sheets-in-a-single-PDF](http://www.tracker-software.com/knowledgebase/185-How-do-I-make-Excel-print-several-sheets-in-a-single-PDF)

**更新 2** 即使这不能解决问题，也请查看以下内容：[http://spreadsheets.about.com/od/exceltools/qt/10-02-06-create-pdf-file-excel-2010。 .htm](http://spreadsheets.about.com/od/exceltools/qt/10-02-06-create-pdf-file-excel-2010.htm)，[http: //www.novapdf.com/kb/printing-an-entire-excel-workbook-to-a-single-pdf-file-135.html](http://www.novapdf.com/kb/printing-an-entire-excel-workbook-to-a-single-pdf-file-135.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-16T11:47:14.453

1.  您可以在工作簿中创建一个额外的工作表，其中包含 12 个超链接（指向其他工作表）。

    *   您可以手动完成（[http://www.techrepublic.com/blog/microsoft-office/create-a-table-of-contents-in-an-excel-sheet-using-hyperlinks/](http://www.techrepublic.com/blog/microsoft-office/create-a-table-of-contents-in-an-excel-sheet-using-hyperlinks/)）。
    *   您可以为其创建宏（[http://blogs.office.com/2011/01/13/add-a-table-of-contents-to-your-workbook-its-easy-i-promise/](http://blogs.office.com/2011/01/13/add-a-table-of-contents-to-your-workbook-its-easy-i-promise/)）。

        AFAIK，您可以创建一个将创建 TOC 表的宏，然后调用 export-to-pdf 菜单项，然后删除 TOC 表。但是你需要吗？最简单的方法就是手动创建 TOC 表。

2.  使用 OpenOffice 导出为 PDF 时，它会*自动为每张工作表创建书签*。（MS Office 2007 Excel 不也是这样做的吗？或者你真的需要链接而不是书签，不是吗？）

# linux - sudo 的奇怪行为

> ID：15929763
> 
> 赞同：0
> 
> 时间：2013-04-10T15:11:42.300
> 
> 标签：linux, echo, sudo

在我的linux机器中，路径配置如下

> **非root用户**：/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/java
> 
> **根用户**：/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

当我试图

> 须藤回声 $PATH

它只显示非root用户路径而不是root路径

但是当我把

> 回声 $PATH

在脚本中并尝试使用 sudo 执行，它给出了根路径。有谁知道这个原因？实际上 sudo 是用于以 root 身份执行命令，但在我的第一种情况下它不能正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:17:56.903

`sudo echo $PATH``echo $PATH`在当前非 root 环境中以 root 身份执行，即非 root 值为`$PATH`. 当您这样做时`sudo bash somescript.sh`，bash 以 root 身份执行，并且在其初始化期间，它会加载包含 root 的值的 root 环境`$PATH`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:45:31.477

当你运行`sudo echo $PATH`时，shell`$PATH`在调用之前扩展`sudo`，所以你真的在运行这个：

```
sudo echo /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/java 
```

这给出了您所看到的结果 - 显示的非 root 用户`PATH`。

当`echo $PATH`嵌入到脚本中时`sudo somescript.sh`，运行脚本的 shell 以 root 身份运行，因此当它`$PATH`作为解释脚本的一部分展开时，它会看到 root 的环境并显示 PATH 的 root 版本。

为了避免第一种情况下的早期扩展，您可以这样做：

```
sudo bash -c 'echo $PATH' 
```

假设您`sudoers`的设置允许这样做。单引号可防止非 root 用户 shell 在将变量作为命令传递给`bash`.

# python - 在 python 中导入 ctypes 时出现 dll 错误

> ID：15929764
> 
> 赞同：0
> 
> 时间：2013-04-10T15:11:42.610
> 
> 标签：python, windows, dll, ctypes

我在 Windows XP 上使用 Python 2.5.2，我试图通过导入它（导入 ctypes）在 python 脚本中使用 ctypes。现在我收到以下错误：

```
File "C:\Python25\Lib\ctypes\__init__.py", line 348, in __init__
self._handle = _dlopen(self._name, mode)
WindowsError: [Error 126] The specified module could not be found 
```

在**init** .py 中，CDLL 类有第 348 行，我不确定是否缺少 DLL，因为我在另一台运行良好的计算机上使用相同的脚本。

我已经声明了一个环境变量**PYTHONPATH**，其中包含 Python 安装目录的所有地址。

您能否在这里指导我解决问题。

# ios - iOS/目标 C：代码解释

> ID：15929765
> 
> 赞同：-2
> 
> 时间：2013-04-10T15:11:44.433
> 
> 标签：ios, objective-c

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>
#import <CoreLocation/CoreLocation.h>

@interface CustomAnnotation : NSObject <MKAnnotation>
{
    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subTitle;
}

@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subtitle;

- (id)initWithLocation:(CLLocationCoordinate2D)coords title:(NSString *)aTitle andSubtitle:(NSString*)aSubtitle;

@end 
```

我正在做一个包含上面代码的教程。

我的问题：

1.  在大括号和@property 中定义变量有什么区别？
2.  为什么我们需要在这两个地方定义变量？
3.  在 .h 和 .m 文件中声明 #import 有什么区别？

请回答所有三个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:15:41.887

> `1.`在大括号和@property 中定义变量有什么区别？

```
    @接口 XXX:YYY
    {
       伊娃的地方
    }
    属性的地方。以 _(下划线) 为前缀的 ivars 会在新编译器中自动创建。
    @结尾

```

> `2.` 为什么我们需要在这两个地方定义变量？

这是旧样式，现在只是完成了。只有`@property`就够了。

> `3.`在 .h 和 .m 文件中声明 #import 有什么区别？

如果你想要一些类对象作为属性，你可以在 .h 中定义它，如果你只想在实现中而不是在 .m 中导入。

> 如果您将所有#imports 放在头文件中，则没有两个类可以相互依赖，因为文件无法导入导入它的文件。另一方面，如果您将#import 放在实现文件中，问题就会消失。

Chuck 的摘录，[最佳实践和基本原理：#import in .m or .h](https://stackoverflow.com/questions/1429888/best-practice-and-rationale-import-in-m-or-h)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:24:38.907

在大括号之间声明变量具有实际创建变量存储的效果。

`@property`声明将访问方法并自动为您生成支持 ivar，这使得第一个声明变得多余。所以你可以去掉花括号之间的声明，只保留你的属性声明。

自动合成的 ivar 将有一个前导下划线，当您直接访问 ivar 或通过访问器时，它会更加清晰，例如

```
@property (nonatomic, strong) MyThing *myThing; 
```

将在您的课堂上直接使用

```
_myThing = [[MyThing alloc] init]; 
```

或通过访问器

```
[self setMyThing:[[MyThing alloc] init]]; 
```

通常，除非您在被覆盖的访问器方法中，否则大多数时候通过访问器是您想要的。

* * *

曾经有一段时间`@property`并且`@synthesize`只会为您生成访问器方法，您必须确保为它们的使用创建存储 - 在花括号之间声明 ivar。

然后事情继续进行，`@property`并且`@synthesize`是您所需要的，并且支持 ivar 将被自动合成。

目前的游戏状态`@property`是（在大多数情况下）只需要 ，并且`@synthesize`隐式完成。

* * *

# 进口

没有技术差异，该语句实际上只是抓取您正在导入的文件的内容并将它们转储到它的位置。

您需要注意循环依赖

```
FileA           | FileB
----------------+----------------
#import "FileB" | #import "FileA"
                | 
```

从字面上看，这将成为

```
FileA           |<-
----------------|  \
#import "FileB" |  /
#import "FileA" |-' 
```

和

```
FileB           |<-
----------------|  \
#import "FileA" |  /
#import "FileB" |-' 
```

这两个文件都将处于循环循环中，试图导入自己，例如这不起作用。

因此，避免此问题的最简单方法是在您的标头中进行最少量的导入。

如果您需要在标题中引用一个类，请使用前向声明 ( `@class`)

所以你最终得到了这个

```
@class MyClass

@interface MyOtherClass : NSObject

@property (nonatomic, strong) MyClass *mything;

@end 
```

您基本上已经告诉编译器`MyClass`存在，因此您可以引用它。

`MyClass`然后，您可以在实现文件中导入实际的标头。

```
#import "MyOtherClass.h"
#import "MyClass.h"

@implementation MyOtherClass

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:24:57.243

> 1) 在大括号和@property 中定义变量有什么区别？

因为`@property`定义了变量的态度以及它的可访问性限制，如果你不写`@property`它也可以工作，但是如果你希望编译器自动为变量创建getter和setter方法，那么在.m文件中使用`@property`它`@synthesize`。

> 2）为什么我们需要在两个地方定义变量？

第一个答案的后半部分包括它的答案。简要“定义 setter 和 getter 方法及其可访问性”

> `#import`3)在 .h 和 .m 文件中声明有什么区别？

如果您在 .h 文件中导入使用它，它将对该类的所有子类可用，而如果您在 .m 文件中导入，它将仅对 .m 文件可用（范围）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T15:25:03.317

1.  在大括号内，您可以声明任何您希望的实例变量。大括号之外是您声明的地方`@properties`，它会自动为对象生成 getter 和 setter，以及您在实现文件中定义的任何非私有方法。

2.  正如@Anoop Vidya 所提到的，在这两个地方声明变量现在是多余的并且没有必要。

3.  导入文件的一般经验法则：相互导入的文件会产生运行时错误。因此，请遵守以下规则：

> 如果您需要另一个类的实例变量，请在头文件中使用 导入另一个类，`@class`然后`#import`将其导入实现文件中。
> 
> 如果您不需要从您创建的另一个类创建 ivar，那么只需`#import`将其放入您的实现文件中。

如果在执行这些步骤后仍然遇到相互依赖问题，那么您可能需要重新考虑您的设计。

# c# - Windows 8 App C#“字符串”不包含“复制”的定义

> ID：15929768
> 
> 赞同：2
> 
> 时间：2013-04-10T15:11:48.213
> 
> 标签：c#, string, windows-8, visual-studio-2012, copy

我目前正在开发 Windows 8 应用程序，需要使用字符串复制功能，但 C# 内置的 String.Copy 功能不起作用。有其他 String 方法，但没有 Copy。

我尝试创建一个通用的 C# 控制台应用程序，它工作得很好。Windows 8 App 项目是否不允许 System.String？

我在 Windows 8 Pro 上使用 Visual Studio 2012，一切都已更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:29:53.103

Windows 应用商店应用程序中不提供正确[复制。](http://msdn.microsoft.com/en-us/library/system.string.copy.aspx)如果您查看[此处的文档](http://msdn.microsoft.com/en-us/library/s1wwdcbf.aspx)，您会发现它旁边没有“绿色商店”字形。 [虽然CopyTo](http://msdn.microsoft.com/en-us/library/system.string.copyto.aspx)是可用的，但我想以下内容可以完成同样的事情：

```
 s = "foo";
        t = new String(s.ToCharArray()); 
```

# c++ - 面向组件的系统中的灵活数据消息传递

> ID：15929769
> 
> 赞同：2
> 
> 时间：2013-04-10T15:11:51.343
> 
> 标签：c++, visual-c++, components, game-engine, generic-programming

我正在为我正在开发的一个小游戏创建一个面向组件的系统。基本结构如下： 游戏中的每个对象都由一个“GameEntity”组成；一个容器，其中包含指向“组件”类中项目的指针向量。

组件和实体通过调用组件的父 GameEntity 类中的 send 方法相互通信。send 方法是一个模板，它有两个参数，一个 Command（它是一个枚举，包括 STEP_TIME 等指令）和一个泛型类型“T”的数据参数。send 函数循环遍历 Component* 向量并调用每个组件的接收消息，由于模板使用方便地调用对应数据类型 T 的重载接收方法。

然而，问题出现的地方（或者更确切地说是不便）是 Component 类是一个纯虚函数，并且总是会被扩展。由于不允许对模板函数进行虚拟化的实际限制，我必须在头文件中为每个可能被组件使用的数据类型声明一个虚拟接收函数。这不是很灵活也不是可扩展的，而且至少在我看来，这似乎违反了不要不必要地复制代码的 OO 编程精神。

**所以我的问题是，如何修改下面提供的代码存根，以使我的面向组件的对象结构尽可能灵活，而不使用违反最佳编码实践的方法**

以下是每个类的相关标头存根，以及可能以何种方式使用扩展组件类的示例，以便为我的问题提供一些上下文：

游戏实体类：

```
class Component;

class GameEntity
{

public: 
GameEntity(string entityName, int entityID, int layer);

~GameEntity(void){};

//Adds a pointer to a component to the components vector.
void addComponent (Component* component);

void removeComponent(Component*);

    //A template to allow values of any type to be passed to components
template<typename T>
void send(Component::Command command,T value){
       //Iterates through the vector, calling the receive method for each component
    for(std::vector<Component*>::iterator it =components.begin();  it!=components.end();it++){
        (*it)->receive(command,value);
    }
}
private:
     vector <Component*> components;    

}; 
```

组件类：#include "GameEntity.h" 类组件

```
{
public:
static enum Command{STEP_TIME, TOGGLE_ANTI_ALIAS, REPLACE_SPRITE};

Component(GameEntity* parent)
    {this->compParent=parent;};

virtual ~Component (void){};    

GameEntity* parent(){
    return compParent;
}
void setParent(GameEntity* parent){
    this->compParent=parent;
}

virtual void receive(Command command,int value)=0;
virtual void receive(Command command,string value)=0;
virtual void receive(Command command,double value)=0;
virtual void receive(Command command,Sprite value)=0;
    //ETC. For each and every data type

private:
GameEntity* compParent;

}; 
```

Component 类的可能扩展：

```
#include "Sprite.h"
#include "Component.h"
class GraphicsComponent: Component{
    public:
          GraphicsComponent(Sprite sprite, string name, GameEntity* parent);
          virtual void receive(Command command, Sprite value){
                 switch(command){
                      case REPLACE_SPRITE: this->sprite=value; break
                 }
           }

    private:
          Spite sprite;

} 
```

我应该使用空指针并将其转换为适当的类型吗？这可能是可行的，因为在大多数情况下，类型将从命令中得知，但同样不是很灵活。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-26T19:00:56.453

这是类型擦除的完美案例！

当基于模板的泛型编程和面向对象的编程发生冲突时，你会遇到一个简单但难以解决的问题：我如何以安全的方式存储一个变量，而我不关心*类型*而是关心*如何我可以用吗？*泛型编程往往会导致类型信息的爆炸式增长，而面向对象的编程依赖于非常特定的类型。程序员要做什么？

在这种情况下，最简单的解决方案是某种具有固定大小的容器，可以存储任何变量，并安全地检索它/查询它的类型。幸运的是， boost 有这样一个类型：[boost::any](http://www.boost.org/doc/libs/1_55_0/doc/html/any.html)。

现在你只需要一个虚函数：

```
virtual void receive(Command command,boost::any val)=0; 
```

每个组件“知道”它发送了什么，因此可以提取值，如下所示：

```
virtual void receive(Command command, boost::any val)
{
// I take an int!
    int foo = any_cast<int>(val);
} 
```

这将成功转换 int，或引发异常。不喜欢例外？先做一个测试：

```
virtual void receive(Command command, boost::any val)
{
// Am I an int?
    if( val.type() == typeid(int) )
    {
        int foo = any_cast<int>(val);
    }
} 
```

“可是哦！” 你可能会急切地不喜欢这个解决方案，“我想发送多个参数！”

```
virtual void receive(Command command, boost::any val)
{
    if( val.type() == typeid(std::tuple<double, char, std::string>) )
    {
        auto foo = any_cast< std::tuple<double, char, std::string> >(val);
    }
} 
```

“好吧”，您可能会思考，“我如何允许传递任意类型，就像我想要一次浮点数和另一次整数一样？” 对此，先生，你会被打败，因为那是个坏主意。相反，将两个入口点捆绑到同一个内部对象：

```
// Inside Object A
virtual void receive(Command command, boost::any val)
{
    if( val.type() == typeid(std::tuple<double, char, std::string>) )
    {
        auto foo = any_cast< std::tuple<double, char, std::string> >(val);
        this->internalObject->CallWithDoubleCharString(foo);
    }
}

// Inside Object B
virtual void receive(Command command, boost::any val)
{
    if( val.type() == typeid(std::tuple<float, customtype, std::string>) )
    {
        auto foo = any_cast< std::tuple<float, customtype, std::string> >(val);
        this->internalObject->CallWithFloatAndStuff(foo);
    }
} 
```

你有它。通过使用 boost::any 删除类型中讨厌的“有趣”部分，我们现在可以安全可靠地传递参数。

有关类型擦除的更多信息，以及擦除对象上不需要的类型部分的好处，以便它们与泛型编程更好地结合，请参阅[这篇文章](http://www.artima.com/cppsource/type_erasure.html)

如果你喜欢字符串操作，另一个想法是：

```
// Inside Object A
virtual void receive(Command command, unsigned int argc, std::string argv)
{
   // Use [boost::program_options][2] or similar to break argv into argc arguments
   //    Left as exercise for the reader
} 
```

这有一种奇怪的优雅。程序以相同的方式解析它们的参数，因此您可以将数据消息传递概念化为运行“子程序”，然后打开大量隐喻，从而可能导致有趣的优化，例如线程化部分数据短信等

但是，成本很高：与简单的强制转换相比，字符串操作可能非常昂贵。还要注意 boost::any 不是零成本的；与仅传递固定数量的参数所需的零查找相比，每个 any_cast 都需要 RTTI 查找。灵活性和间接性需要成本；在这种情况下，这是非常值得的。

如果您希望完全避免任何此类成本，则有一种可能性可以获得必要的灵活性以及没有依赖关系，甚至可能是更可口的语法。但是，虽然它是标准功能，但它可能非常不安全：

```
// Inside Object A
virtual void receive(Command command, unsigned int argc, ...)
{
   va_list args;
   va_start ( args, argc );

   your_type var = va_arg ( args, your_type );
   // etc

   va_end( args );
} 
```

例如 printf 中使用的可变参数功能允许您传递任意多个参数；显然，您需要告诉被调用函数传递了多少参数，所以这是通过 argc 提供的。但是请记住，被调用函数无法判断是否传递了正确的参数。它会很高兴地接受你给它的任何东西，并把它解释为它是正确的。因此，如果您不小心传递了错误的信息，将没有编译时支持来帮助您找出问题所在。垃圾进垃圾出。

此外，关于 va_list，还有很多需要记住的事情，例如所有浮点数都上转换为双精度，结构体通过指针传递（我认为），但如果你的代码是正确和精确的，就不会有问题，你会有效率，缺乏依赖，易于使用。对于大多数用途，我建议将 va_list 等包装成一个宏：

```
#define GET_DATAMESSAGE_ONE(ret, type) \
    do { va_list args; va_start(args,argc); ret = va_args(args,type); } \
    while(0) 
```

然后是两个参数的版本，然后是三个参数的版本。遗憾的是，这里不能使用模板或内联解决方案，但大多数数据包的参数不会超过 1-5 个，而且大部分都是原语（几乎可以肯定，尽管您的用例可能不同），所以设计一些帮助您的用户的丑陋宏将主要处理不安全方面。

我不推荐这种策略，但它很可能是某些平台上最快和最简单的策略，例如甚至不允许编译时依赖的平台或嵌入式系统，其中可能不允许虚拟调用。

# knockout.js - 检查扩展是否应用于 observable

> ID：15929770
> 
> 赞同：7
> 
> 时间：2013-04-10T15:11:51.500
> 
> 标签：knockout.js, knockout-validation, knockout-extensions

我想对我的函数进行单元测试，该函数基本上是从一组参数（TypeScript 代码）构建一个可观察的数组：

```
private BuildObservables(parameters: Parameter[]) {
        var observables = {};

        for (var parameterName in parameters) {

            var p = parameters[parameterName];

            // Build observable
            observables[parameterName] = ko.observable(p.Value);

            // Attach validation
            if (p.IsRequired) {
                observables[parameterName].extend({ required: true });
            }
        }
        return observables;
    } 
```

我的测试如下所示：

```
var parameters = [];

// new Parameter(int value, bool isRequired)
parameters["Param1"] = new Parameter("123", true);
parameters["Param2"] = new Parameter("456", false);

var viewModel = BuildObservables(parameters);

ok(viewModel["Param1"] != null);
ok(viewModel["Param2"] != null); 
```

如果第一个参数`isRequired`设置为`true`，如何检查是否应用了扩展（验证）（BuildObservables 中的“附加验证”部分）？

**编辑：**

在另一个功能中，我正在附加订阅者，但我不知道如何测试它们是否正确附加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-13T16:55:29.163

你可以调用`rules()`你的 observable，它应该给你一个数组。

```
observables[parameterName].rules(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:25:30.007

我对您的特定情况的验证插件了解不多，但更笼统地说，我怀疑是否有可能找出可观察对象是否已扩展，因为扩展机制非常通用并且不会强制执行特定操作在“扩展的”可观察对象上执行，将操作的所有细节留给扩展器本身（因此结果可能会有很大差异，从包装可观察对象，订阅它，甚至只是在外部服务中注册可观察对象或介于两者之间的任何东西）。

*如果您的问题仅*用于单元测试目的，您可以考虑模拟扩展函数，以便它将传递给它的参数（即扩展器）存储在调用它的可观察对象上 - 这样您以后可以检查是否存在所述扩展器.

对于更详细的内容，测试库[jasmine](http://pivotal.github.io/jasmine/)为模型提供了更多选项，包括检查是否调用了特定函数以及是否将某些特定参数传递给它的测试，因此您可能也会对它感兴趣。

# c# - 尝试评估布尔值时出错？

> ID：15929772
> 
> 赞同：2
> 
> 时间：2013-04-10T15:11:52.693
> 
> 标签：c#, asp.net

如果对象的 CRMID 是一个可以为空的字符串，我只想显示某个项目模板。

如果它是 null 我不想显示这个项目模板：

```
 <asp:TemplateField HeaderText="">
                <ItemTemplate>
                <a href="#myModal" id='rm_btn' runat="server" role="button" class="close custom-close"  onclick="showModal('#myModal')" onserverclick="rmbtn"
                    visible='<%# (bool)(DataBinder.Eval(Container.DataItem, "CRMID") == null) ? "true" : "false" %>'>
                    ×</a>
                </ItemTemplate>
            </asp:TemplateField> 
```

但是我收到以下错误：

```
Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. 

Compiler Error Message: CS0030: Cannot convert type 'string' to 'bool'

Source Error:

Line 136:                <asp:TemplateField HeaderText="">
Line 137:                    <ItemTemplate>
Line 138:                    <a href="#myModal" id='rm_btn' runat="server" role="button" class="close custom-close"  onclick="showModal('#myModal')" onserverclick="rmbtn"
Line 139:                        visible='<%# (bool)(DataBinder.Eval(Container.DataItem, "CRMID") == null) ? "true" : "false" %>'>
Line 140:                        ×</a> 
```

我不确定我做错了什么......

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:14:23.303

您正在尝试直接转换`"true"`或`"false"`即。`string`布尔值。所以尝试`true/ false`而不是像这样的字符串。

```
visible='<%# (bool)(DataBinder.Eval(Container.DataItem, "CRMID") == null) ? true : false %>'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:17:56.837

我可以建议几种尝试：

删除引号

```
// BEFORE
(bool)(DataBinder.Eval(Container.DataItem, "CRMID") == null) ? "true" : "false"

// AFTER
(bool)(DataBinder.Eval(Container.DataItem, "CRMID") == null) ? true : false 
```

或者`bool.Parse`它

```
// BEFORE
(bool)(DataBinder.Eval(Container.DataItem, "CRMID") == null) ? "true" : "false"

// AFTER
bool.Parse((DataBinder.Eval(Container.DataItem, "CRMID") == null) ? "true" : "false") 
```

或直接取出支票

```
// BEFORE
(bool)(DataBinder.Eval(Container.DataItem, "CRMID") == null) ? "true" : "false"

// AFTER
(DataBinder.Eval(Container.DataItem, "CRMID") == null) /* this is a bool already*/ 
```

# c# - 在打开的cmd中运行命令

> ID：15929781
> 
> 赞同：2
> 
> 时间：2013-04-10T15:12:27.053
> 
> 标签：c#, winforms, process

我的 C# 项目（Windows 窗体应用程序）有问题。我有两个按钮。当我单击第一个时，它将打开 cmd。一切正常。

我想要达到的目标：按钮 2 应该使用打开的 cmd，插入命令并从中收集输出。我不想为每个命令打开 cmd。会有更多带有不同命令的按钮。

可能吗？

```
private void button3_Click(object sender, EventArgs e)
        {
            string my_script = textBox3.Text;
            System.Windows.Forms.MessageBox.Show(my_id.ToString());

        }

        public int my_id;
        public void connection_Click(object sender, EventArgs e)
        {

            System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
            startInfo.FileName = "cmd.exe";
            System.Diagnostics.Process process = new System.Diagnostics.Process();
            process.StartInfo = startInfo;
            process.Start();
            my_id = process.Id;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:16:42.870

也许你最好在你的应用程序中嵌入一个控制台，尝试与外部控制台通信。

阅读： http: [//www.codeproject.com/Articles/335909/Embedding-a-Console-in-aC-Application](http://www.codeproject.com/Articles/335909/Embedding-a-Console-in-a-C-Application)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:19:02.723

您可以使用 process.StandardInput 发送命令以执行 cmd.exe，并使用 process.StandardOutput 来读取结果。

# coldfusion - Coldfusion中页面加载上的复选框

> ID：15929782
> 
> 赞同：0
> 
> 时间：2013-04-10T15:12:28.313
> 
> 标签：coldfusion

我在冷融合表格上有 2 个复选框，如下所示。在页面加载时，我希望同时检查并根据选中的复选框显示查询结果。我的以下代码工作正常，除了我现在取消选中复选框并点击视图的场景。作为即时设置

```
form.chkbox="" 
```

在页面加载时，即使我取消选中它们，它们仍然处于选中状态。我怎样才能让它们在页面加载时保持未选中状态。我尝试使用 JS 函数，但它似乎不起作用

```
 <script type="text/javascript">
  function callme(){
var box1 = document.getElementById('chkbox1').checked;
var box2 = document.getElementById('chkbox2').checked;
if (box1 && box2){
          alert("checked") ;
}else{    
box1.checked = false;
box2.checked = false;
}
}

 </script>  

    <cfset form.chkbox=""> 

    <form action="view_emp_qual.cfm?show=yes" method="post" name="Myform">
     <table align="center">
     <tr>
    <td>
  <cfif isDefined("form.chkbox") and (form.chkbox eq "" or listfind(form.chkbox, 1))>
  <input type="checkbox" checked="checked" name="chkbox" id="chkbox1" value="1">      
  <cfelse>
  <input type="checkbox" name="chkbox"  id="chkbox1" value="1">
   <input type="hidden" name="chkbox"  id="chkbox1" value="1">
  </cfif>
    <strong> Agreement Only</strong> &nbsp;&nbsp;
    <cfif isDefineD("form.chkbox") and (form.chkbox eq "" or listfind(form.chkbox, 2))>
      <input type="checkbox" checked="checked" name="chkbox" id="chkbox2" value="2">
    <cfelse>
     <input type="checkbox" name="chkbox"  id="chkbox2" value="2">
      <input type="hidden" name="chkbox"  id="chkbox2" value="2">
    </cfif>

    <strong>Active Employees</strong> &nbsp;&nbsp;
   </td>
  <td><input type="Submit" name="submitnow" value="View Selected" class="button"  onclick="return callme();">      </td>

      </tr>
      </table>
      </form> 

    <cfif not isDefined("form.chkbox")>
     Query1
     <cfelseif isDefined("form.chkbox") and ( listfind(form.chkbox, 1) eq 0 and listfind(form.chkbox, 2) eq 1)>
      Query 2
     <cfelseif isDefineD("form.chkbox") and (listfind(form.chkbox, 1) eq 1 and listfind(form.chkbox, 2) eq 0)>
    query 3
     <cfelse>
    query4
    </cfif> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:56:06.617

如果您在同一页面中提交表单，那么以下代码可能会解决您的目的。

我对你的主要代码做了一些调整。请看一看。

```
 <cfdump var="#form#" label="before">
    <!---flag for checking if form has submitted or not--->
    <cfif Not isDefined("form.submitnow")>
        <cfset form.chkbox = "1,2">
    </cfif>
    <cfdump var="#form#" label="after">
    <cfif isDefined("form.chkbox") > 
    <cfdump var="#listfind(form.chkbox, 1)#" ><br>
    <cfdump var="#listfind(form.chkbox, 2)#" >
    </cfif>

        <form action="" method="post" name="Myform">
            <table align="center">
                <tr>
                    <td>
                        <!---I have removed hidden fields and made a few changes in conditional checking    --->
                        <cfif isDefined("form.chkbox") and (listfind(form.chkbox, 1))> 
                            <input type="checkbox" checked="checked" name="chkbox" id="chkbox1" value="1"><span>1</span>      
                        <cfelse>
                            <input type="checkbox" name="chkbox"  id="chkbox1" value="1"><span>2</span> 
                        </cfif>

                        <strong> Agreement Only</strong> &nbsp;&nbsp;
                        <cfif isDefineD("form.chkbox") and (listfind(form.chkbox, 2))>
                            <input type="checkbox" checked="checked" name="chkbox" id="chkbox2" value="2"><span>3</span> 
                        <cfelse>
                            <input type="checkbox" name="chkbox"  id="chkbox2" value="2"><span>4</span> 
                        </cfif>
                        <strong>Active Employees</strong> &nbsp;&nbsp;
                    </td>
                    <td>
                        <input type="Submit" name="submitnow" value="View Selected" class="button">      
                    </td>

                </tr>
            </table>
          </form> 

        <cfif not isDefined("form.chkbox")>
         Query1
         <cfelseif isDefined("form.chkbox") and ( listfind(form.chkbox, 1) eq 0 and listfind(form.chkbox, 2) eq 1)>
          Query 2
         <cfelseif isDefineD("form.chkbox") and (listfind(form.chkbox, 1) eq 1 and listfind(form.chkbox, 2) eq 0)>
        query 3
     <cfelse>
    query4
    </cfif> 
```

# ios - IOS Enterprise Distribution 更新保留用户数据？

> ID：15929784
> 
> 赞同：2
> 
> 时间：2013-04-10T15:12:39.183
> 
> 标签：ios, distribution, updates, enterprise

我正在制作一个 iPad 应用程序，它将使用企业分发程序从我自己的 Web 服务器分发。该应用程序本身会检查服务器上的较新版本，并在 IOS 中调用 itms-services 来更新自身。这很完美。

应用程序包包含一个目录，其中包含图像和电影等资源。

苹果声称，如果捆绑标识符相同，更新将保留用户数据。

来自：[http ://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad802c](http://help.apple.com/iosdeployment-apps/mac/1.1/#app43ad802c)

> 如果您希望用户将应用程序的数据保存在他们的设备上，请确保新版本使用与它要替换的相同的捆绑标识符，并告诉用户在安装新版本之前不要删除他们的旧版本。如果捆绑标识符匹配，新版本将替换旧版本并将数据存储在设备上。

当从 Xcode 直接将应用程序运行到我连接的 iPad 时，我可以删除包含我的资源的文件夹，再次运行应用程序，该文件夹仍保留在我的 iPad 上的包中。

这种行为是我所寻找的。我计划通过新的更新添加更多包含新资源的文件夹。由于资源相当繁重，我不希望用户不得不下载越来越大的档案。我只想添加新的东西。

当我在没有文件夹的情况下创建新存档并像用户一样从我的 Web 服务器更新应用程序时，就会出现问题。然后文件夹似乎被删除了。

有这方面的经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:20:20.227

您安装的捆绑软件始终会被您安装的新捆绑软件覆盖。文档中提到的用户数据是存储在文件系统的 Documents 和 Library 文件夹中的数据。如果您希望确保旧的包文件始终可用，您可以将它们从包中复制到应用程序的 Library/Caches 文件夹中。值得一提的是，确保临时安装覆盖当前捆绑包的方法是确保更改捆绑包版本。

希望这有帮助:)

# visual-studio-2010 - 如何从 Visual Studio 中删除 ApexSQL 菜单？

> ID：15929788
> 
> 赞同：10
> 
> 时间：2013-04-10T15:12:52.187
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

我安装了免费版本的 ApexSQL，它在 SSMS 中非常棒，但我真的不希望 Visual Studio 中的所有这些菜单。我去了加载项管理器并取消选中它们，但启动列被选中并禁用，所以每次我重新启动 Visual Studio 时它们都会回来。

是否可以从 Visual Studio 中永久删除 ApexSQL 菜单？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T15:12:52.187

如果您安装了 ApexSql，并且您不希望 Visual Studio 中那些讨厌的菜单做两件事。

1.  在 Visual Studio 中，转到工具 > 插件管理器并取消选中 ApexSql 插件。关闭 Visual Studio。
2.  在 Windows 7 中，有一个隐藏文件夹 C:\ProgramData。在 Windows 资源管理器中，转到 C:\ProgramData\Microsoft\MSEnvShared\AddIns 文件夹。编辑每个 *.MsvsLoader.Addin 文件并将其设置`<LoadBehavior>`为 0。如果无法直接保存文件，则必须将文件保存到其他位置（可能是桌面），然后将它们复制回 C:\ ProgramData\Microsoft\MSEnvShared\AddIns 因为需要一些管理员权限。

现在，当您重新启动 VS 时，那些 ApexSQL 菜单应该消失了

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-29T23:51:02.450

拥挤菜单的问题在最新版本中得到解决，现在所有 ApexSQL 插件都在 ApexSQL 主菜单下作为子菜单。它们现在看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/6xJ82.png)

![在此处输入图像描述](https://i.stack.imgur.com/WtpGL.png)

如果您在 VS 或 SSMS 中不需要 ApexSQL 插件，您可以简单地选择在安装过程中不将它们与 VS 或 SSMS 集成，只需查看您希望插件集成的 SSMS 或 VS 版本

![在此处输入图像描述](https://i.stack.imgur.com/XnMiE.png)

注意：要获得此对话框，您可以在其中检查所需的集成，您需要使用单个安装程序而不是主要安装程序。[您可以在此链接](http://www.apexsql.com/Download.aspx)上找到所有个人安装程序

*免责声明：我作为支持工程师在 ApexSQL 工作*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-10T20:34:56.680

对于 Windows 7 上的 Visual Studio 2010，我尝试了 @Chris Bayles 的建议，但在 Tools->Add-in Manager 下没有看到 ApexSql 插件。

我遵循@Jerome2606 指向[https://knowledgebase.apexsql.com/remove-add-ins-just-visual-studio-retaining-sql-server-management-studio/](https://knowledgebase.apexsql.com/remove-add-ins-just-visual-studio-retaining-sql-server-management-studio/)的指针，它对我有用，但只有当我删除了父 ApexSQL 文件夹也是如此。

所需操作摘要：删除文件夹

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\ApexSQL 
```

根据 Visual Studio 的版本，默认安装位置的版本号会有所不同：

```
Product name    Version number
Visual Studio 2010  Microsoft Visual Studio 10.0
Visual Studio 2012  Microsoft Visual Studio 11.0
Visual Studio 2013  Microsoft Visual Studio 12.0
Visual Studio 2015  Microsoft Visual Studio 14.0 
```

选择并删除 ApexSQL 文件夹及其内容。

以管理员身份打开命令提示符，然后运行

```
"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe" /setup 
```

请注意，Visual Studio 2012、2013 和 2015 的命令不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-31T05:56:00.383

如果您使用的是 SSMS v18.0，那么您可以通过以下方式禁用顶点功能。 [![SSMS 详细信息窗口](https://i.stack.imgur.com/3yXAL.jpg)](https://i.stack.imgur.com/3yXAL.jpg)

您可以从以下路径找到**ApexSQL.Complete.Addin.SSMS18.pkgdef文件。**

C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\Extensions\ApexSQL Complete

**然后在Notepad++ 管理员模式下**打开这个文件并注释内容。

如果您需要进一步阅读，请点击此链接。 [https://knowledgebase.apexsql.com/remove-apexsql-tools-sql-server-management-studio/](https://knowledgebase.apexsql.com/remove-apexsql-tools-sql-server-management-studio/)

# windows - 如何具体检测到用户在 Windows 7 上处于空闲状态？

> ID：15929790
> 
> 赞同：2
> 
> 时间：2013-04-10T15:12:54.423
> 
> 标签：windows, user-inactivity

鉴于 Outlook 在大多数办公室运行，并且屏幕保护程序可能会占用 CPU、网络文件副本、病毒扫描或管理员的网络安装（当然，这通常在您注销时发生），以及所有无数在办公环境中的 Windows 7 桌面上可能发生的其他事情，我怎么可能知道用户处于空闲状态，而不仅仅是阅读 PDF？

我是使用一组指标定期采样并使用它来确定“离开”还是我需要监视某些文件，是否有应该公开的 API？

我不能依赖屏幕保护程序处于活动状态，或者计算机进入特定的电源状态，而且我不确定到底什么是禁区，但我也不知道什么是禁区。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:43:11.910

我认为您正在寻找[GetLastInputInfo](http://msdn.microsoft.com/en-us/library/ms646302%28VS.85%29.aspx)，它告诉您自从用户按下键盘上的键或摆动鼠标（或触摸支持触摸的屏幕？）以来已经过了多长时间。

# c - LLVM和GCC，不同的输出相同的代码

> ID：15929795
> 
> 赞同：2
> 
> 时间：2013-04-10T15:13:01.067
> 
> 标签：c, macos, gcc, compiler-construction, llvm

这是一个示例代码，只是为了显示 LLVM 编译器和 GCC 的不同输出。我想知道为什么？答案应该很简单，但我看不到。(Xcode 4.6.1)

编码：

```
#include <stdio.h>

#define MAX(a,b) ( (a) > (b) ? (a) : (b) )

int increment() {
    static int i = 42;
    i += 5;
    printf("increment returns %d\n",i);
    return i;
}

int main( int argc, char ** argv ) {
    int x = 50;
    printf("max of %d and %d is %d\n", x,increment(),MAX(x, increment()));
    printf("max of %d and %d is %d\n", x,increment(),MAX(x, increment()));
    return 0;
} 
```

**LLVM 输出：**

```
increment returns 47
increment returns 52
increment returns 57
max of 50 and 47 is 57
increment returns 62
increment returns 67
increment returns 72
max of 50 and 62 is 72 
```

**海合会输出：**

```
increment returns 47
increment returns 52
max of 50 and 52 is 50
increment returns 57
increment returns 62
increment returns 67
max of 50 and 67 is 62 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T15:14:45.173

未指定参数的评估~~顺序~~。所以这：

```
printf("max of %d and %d is %d\n", x,increment(),MAX(x, increment())); 
```

导致*~~未定义~~的未指定行为*。这就是为什么你在两个编译器上都有不同的结果。

另一个（潜在）问题是：`MAX`- 它可能导致两次调用`increment`. 避免使用此类宏。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-05-25T14:09:50.107

LLVM 代码根据 ANSI C 生成正确的结果。如果您不希望在每个打印语句中多次调用增量，请将返回值保存在变量中并使用它。精神上单步执行代码，显示应该是增量返回 47 增量返回 52 增量返回 57 最大值为 50 和 47 是 57 增量返回 62 增量返回 67 最大值为 50 和 62 是 72 所以我最初的反应和对代码的研究是错误的，并且 LLVM 输出是正确的。LLVM 结果的原因是 main 中的每个打印语句都调用了 3 次增量。使此代码打印合理输出的方法是将增量返回的值保存在变量中并打印该变量，而不是再次调用增量。据我所知，结果的差异并不取决于未定义的行为，

# java - 有没有办法避免打印语句在eclipse中的语法着色？

> ID：15929798
> 
> 赞同：0
> 
> 时间：2013-04-10T15:13:06.480
> 
> 标签：java, eclipse, eclipse-plugin

我在 Eclipse 中应用了一些语法着色。`System.out.println`根据类（系统）、方法（println）等也有不同的颜色。我在想有没有办法让 System.out.println() 只说一种颜色，这样更容易阅读？我希望其他语句有不同的颜色，但 System.out.println() 不希望。

可能吗？

![在此处输入图像描述](https://i.stack.imgur.com/6CUyX.png)

`System.out.println("HI")`颜色有深紫色、蓝色、棕色。有没有办法可以将整个语句分配为一种颜色？这将使我更容易阅读。我希望其他人保持原样。

我不知道是否存在这样的工具，您只能更改某些语句的颜色，但是拥有它会很酷！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:51:43.193

在Eclipse中，转到`Windows-> Preferences -> Java -> Editor -> Syntax Coloring`（这也可以通过在中搜索“Syntax Coloring”来启动`Windows -> Preferences`）

加载语法着色对话框后，它应该如下所示

![在此处输入图像描述](https://i.stack.imgur.com/BOTy6.jpg)

现在选择，**类**（即`System`）->启用它并选择您想要的任何颜色（我选择了黑色）选择**静态字段**（即`out`）->启用它并选择您想要的任何颜色和字体纹理，然后选择**静态方法调用**（对应`println`）->启用它并选择颜色

启用每个将更改分配给它们的默认颜色，并允许我们选择自定义颜色。这是更改后的结果（您甚至可以更改“关键字”和“文本文字”的颜色

![在此处输入图像描述](https://i.stack.imgur.com/qt1jS.jpg)

# flash - 仅更新组件数据时，Adobe Flash Professional 不会保存文档 (FLA) 更改

> ID：15929802
> 
> 赞同：0
> 
> 时间：2013-04-10T15:13:24.050
> 
> 标签：flash

在 Adob​​e Flash CS6 中，当我保存时，即使在被提升为保存之后，有时但并非总是如此，我的更新不会保存。

我有很多 FLA 文件中正在更新的自定义文本组件。如果我更新、发布、保存、然后重新打开，则发布的文件是正确的，并且新重新打开的文档看起来就像我更新之前一样。

有什么想法吗？

我目前的工作在下面列出作为答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:13:24.050

我目前使用的解决方法是始终“另存为”而不是“保存”。

# android - 如何在全屏启动画面中删除图像周围的白色边框

> ID：15929813
> 
> 赞同：1
> 
> 时间：2013-04-10T15:13:57.153
> 
> 标签：android, xml

我目前正在处理带有图像视图的启动画面。问题是当显示启动画面时，图像周围有一个白色边框。这样启动画面就会显示带有白色边框的图像。我想完全删除白色边框。有没有人知道这样做的原因或任何建议？

这是我的xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <View android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <ImageView android:id="@+id/ImageViewSplash"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:adjustViewBounds="true"
        android:scaleType="centerCrop"
        android:contentDescription="@string/splashImageContentDescription" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:57:32.190

我在用于启动页面的主题/样式中应用了透明背景，这样我就不必扭曲正在显示的图像以适应设备的屏幕尺寸。这在使用包含透明背景的 PNG 文件时特别有效。

这是我用于这个“透明”主题的风格：

```
 <style name="Theme.Transparent" parent="android:Theme">
        <item name="android:windowIsTranslucent">true</item>
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowIsFloating">true</item>
        <item name="android:backgroundDimEnabled">false</item>
    </style> 
```

然后将此主题应用于应用程序清单中的启动活动，如下所示：

```
 <activity
        android:name="com.masseria.homework9.SplashActivity"
        android:configChanges="orientation|keyboardHidden|screenSize"
        android:label="@string/app_name"
        android:theme="@style/Theme.Transparent" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:31:19.157

在我看来，您可以从布局中删除除`ImageView`. 所以它看起来像这样：

```
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/ImageViewSplash"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:adjustViewBounds="true"
        android:scaleType="centerCrop"
        android:contentDescription="@string/splashImageContentDescription" /> 
```

然后你可以在图像上使用 scaleType 直到你找到一个填满屏幕的。如果这些都不起作用，我建议提高图像文件的分辨率。

# asp.net - RadGrid - 客户端绑定和缓存

> ID：15929814
> 
> 赞同：1
> 
> 时间：2013-04-10T15:14:00.513
> 
> 标签：asp.net, telerik-grid, radgrid, clientside-caching

我有一个 asp.net 应用程序，其中有一个显示数据库记录的 radGrid 控件。我希望网格控件进行客户端缓存（分页和排序）。但是，我只能在 Telerik 的网站上找到一个示例（[网格 - 客户端绑定和缓存](http://demos.telerik.com/aspnet-ajax/grid/examples/client/caching/defaultcs.aspx)），但它使用 Web 服务作为数据绑定位置源。

有没有人有 radGrid 的经验，客户端缓存显示来自数据库的数据？

# eclipse - Eclipse Juno OSx 选项卡太大

> ID：15929819
> 
> 赞同：3
> 
> 时间：2013-04-10T15:14:15.557
> 
> 标签：eclipse, macos, tabs, styles

Eclipse Juno 上的新样式选项卡在 MacOSx 上太大（特别是高度）！疯狂浪费空间！

有什么想法让它们变小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:44:21.800

好吧，也许这是主题的错误。尝试将主题更改为旧主题：窗口>首选项>常规>外观>主题

# db2 - LUW 10 版还支持 ADMIN_LIST_HIST 表函数吗？

> ID：15929824
> 
> 赞同：0
> 
> 时间：2013-04-10T15:14:28.993
> 
> 标签：db2, db2-luw

我正在寻找一种通过 SQL 查询每种类型（完整、增量、公司）的最后备份的方法，而不是解析“列表历史备份”的输出，并且我在旧文档中发现了一个名为 ADMIN_LIST_HIST 的函数。但是，我在最近的信息中心（9、9.5、9.7 和 10.1）中没有看到任何文档，只有在旧的 8.2 中。

我仍然可以使用该表函数执行（在 9.7 中）查询，但我想知道它是否已被弃用，自 v8.2 以来是否已更改，是否仍受支持。

你知道吗？这是查询上次备份（inc、delta、full）和查询其他已执行命令的好工具。

（我知道我可以从 SNAPSHOT_DATABASE.SNAPSHOT_DATABASE 获取最后一个时间戳备份，但我想按类型过滤：完整、增量、增量）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:51:50.050

`SYSPROC.ADMIN_LIST_HIST()`仍然存在，但 IBM`SYSIBMADM.DB_HISTORY`在 DB2 9.1 中引入了该视图，它是获取此数据的首选方法。

仅供参考，一个快速查询`SYSCAT.VIEWS`显示 SYSIBMADM.DB_HISTORY 只是将旧`SYSPROC.ADMIN_LIST_HIST()`表函数包装在视图中。

但是，IBM 已经公开表示，其中许多表函数正在被视图所取代。据推测，这使 IBM 能够在必要时修改底层表函数时保持视图一致。

# visual-studio-2010 - Windows 8 - 如何运行 XNA？

> ID：15929827
> 
> 赞同：0
> 
> 时间：2013-04-10T15:14:31.537
> 
> 标签：visual-studio-2010, windows-8, visual-studio-2012, xna, xna-4.0

我有一台 windows 8 电脑，我最近安装了 windows phone 7.1 sdk，但它不断给我错误，它无法安装 XNA 4.0 Refresh 和 MS VS 2010 Extensions for XNA。当我制作一个 windows phone 项目并运行它时，它给了我这个错误：

```
Error   1   The target "GetCopyToOutputDirectoryContentProjectItems" does not exist in the project. PhoneApp2 
```

**任何建议/解决方案将不胜感激！**

**谢谢 ：）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:43:22.453

如果您在 Windows 8 上运行 Visual Studio 2010，那么按照这里的步骤应该可以工作： http: [//www.demonixis.net/blog/installer-xna-4-0-sous-windows-8/](http://www.demonixis.net/blog/installer-xna-4-0-sous-windows-8/)

如果可能的话，您可能想要卸载到目前为止的 xna 和 windows phone sdk 的内容。（如果不这样做，我不确定它是否能正常工作。）

基本上，它分为三个步骤：

1) 转到 xbox.com/en-US/LIVE/PC/DownloadClient
按此页面上的下载按钮开始。我不确定下载该客户端的意义是什么，但是，当我安装它时，它起到了作用。

2）然后在此页面上重新安装xna：
microsoft.com/en-us/download/details.aspx ?id=23714

3）最后一步是在此处下载 Windows SDK 7.1：
microsoft.com/en-us/download/details.aspx ?id=27570

# asp.net - 将带有数据库（sql server express）的 asp.net（express）应用程序移动到 server 2008 R2 而不会出现错误

> ID：15929829
> 
> 赞同：0
> 
> 时间：2013-04-10T15:14:31.780
> 
> 标签：asp.net, sql-server, windows-server-2008

我正在尝试将 asp.net 应用程序移动到安装了 windows server 2008 R2 的服务器，但是当我尝试在服务器上获取它时，它不断给我 sql-server 连接字符串和其他内容的错误。

我有 2 个数据库，1 个用于登录（使用 asp 的登录表单构建），1 个用于客户数据库，在 sql server 2008 express 上运行，有 3 个表，一切都在 windows 7 上运行，我安装了它，但我发现很难找到很好地做到这一点，

最好通过 USB 移动 asp.net 应用程序和数据库，因为我的 Windows 7 与服务器不在同一位置（ps 我在服务器上安装了 sql server express 和 iis

# mysql - 无法更新安全设置。用户'root'@'localhost'的访问被拒绝（使用密码：YES）

> ID：15929831
> 
> 赞同：12
> 
> 时间：2013-04-10T15:14:32.427
> 
> 标签：mysql, installation

在配置步骤中运行 mysql-installer-community-5.6.10 时，出现错误：

无法更新安全设置。用户'root'@'localhost'的访问被拒绝（使用密码：YES）

并且配置失败。

...并且密码是在配置过程的上一步中设置的，所以我看不出它怎么可能是错误的...

我曾尝试关闭 Windows 防火墙，但没有帮助。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-10T05:58:07.913

我刚遇到这个问题。之前的安装屏幕要求输入当前的 root 密码。但这是机器上第一次安装 MySQL。

答：当询问当前根密码时，将该字段留空。然后服务器就安装好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-15T15:13:31.340

我有同样的问题，我第一次安装 mysql。对我来说，事实上我没有以管理员身份运行 .msi 安装文件。通过以管理员身份运行的命令提示符启动，问题得到解决。这是在 Windows 7 上。

另外，我为这个问题卸载了两次。一旦我删除了（不存在的）服务器数据。在这种情况下，重新安装不会询问当前的 root 密码。当我没有删除 serverdata 时，在重新安装时确实询问了 Current root 密码。所以你可以绕过我相信的当前root密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-19T19:32:43.280

我只是有同样的问题。这帮助了我 C:\ProgramData\MySql\ 删除文件夹“MySQL Server”和所有 conf 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-27T21:00:38.603

问题是 MySQL 将其配置数据保存在不同的位置，其中包括您的旧 root 密码。如果你要重新安装 MySQL，你必须首先删除这个旧的配置数据，这些数据可以在以下位置找到：

```
C:\ProgramData\MySQL 
```

您可能必须告诉 Windows 显示隐藏的文件和文件夹，因为默认情况下该文件夹是隐藏的。

# reporting-services - 在 VS2012 中为 SSRS 创建共享数据源

> ID：15929833
> 
> 赞同：0
> 
> 时间：2013-04-10T15:14:38.583
> 
> 标签：reporting-services, visual-studio-2012

我只是想在 VS2012 中创建一个共享数据源，而不选择整个数据库方案。我们将主要通过 sql 查询进行所有数据集查询。

我找到了这个，但我仍然无法创建共享数据源。

[http://msdn.microsoft.com/en-us/library/ms159165.aspx](http://msdn.microsoft.com/en-us/library/ms159165.aspx)

`For an embedded data source, verify that Embedded connection is selected.` 不存在。

那么如何在 VS2012 中只用一个连接字符串创建一个共享数据源呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:23:11.817

就 SSRS 而言，DataSource 只是 xml 结构中元素中的连接字符串。共享的只是一个保留为它自己的对象，然后 rdl 元素（报告）在其 xml 中对该对象的引用。将 rds 文件（SSRS 的数据源）视为与 .NET 标准连接字符串非常相似：

```
Data Source=(server);Initial Catalog=(database) 
```

另外，您可以存储凭据以模拟运行报告的人员。因此，您可以让代理用户运行数据库连接。然而，SSRS 通过一个名为“商业智能开发工作室”的 GUI 来执行此操作，它是 Visual Studio 的一个附加组件，通常 SQL Server 版本与 VS 版本匹配，除了 2012 之外。那个创建了一个 VS 2010 的 shell Visual Studio，仅用于 BIDS .

据我所知，您应该直接在 BIDS 中创建这些文件，而不是尝试直接破解 RDS 文件，除非您让 ReportService2010.asmx Web 服务弄乱它在 .NET 中的属性（这需要更多的工作。）。

**要添加一个，您只需执行以下操作：**

1.  通过报告项目进入 BIDS
2.  展开一个项目
3.  右键单击“共享数据源”>“添加新的”
4.  单击连接字符串旁边的“编辑...”
5.  您将获得一个与 ADO.NET 标准连接字符串创建器非常相似的菜单
6.  输入服务器名称
7.  放入 DatabaseName 8*** 可选放入默认凭据。
8.  点击确定

通常，SSRS 所做的一切都包含三个部分

1.  数据源 = 连接字符串（未嵌入时的 rds 文件）
2.  数据集 = 选择查询或 proc 结果或其他数据源返回（未嵌入时的 rsd 文件）
3.  报告 = 参数、表格、矩阵等元素的结果 xml 显示（处理托管报告时的 RDL 文件）

一般来说，报告可以嵌入所有内容，或者只是引用他们使用的所有内容。为了部署，引用通常更容易，因为 SSRS 旨在查看数据源是否首先存在并且默认情况下不会覆盖它们。因此，如果您重用数据源，只要设置正确的策略，从长远来看会容易得多。

如果您只想知道 rds 文件的结构，它们看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<RptDataSource xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Name="Test">
  <ConnectionProperties>
    <Extension>SQL</Extension>
    <ConnectString>Data Source=TestServer;Initial Catalog=TestDatabase</ConnectString>
  </ConnectionProperties>
  <DataSourceID>45be0ac1-80a8-4d5c-906b-c13b03298e0a</DataSourceID>
</RptDataSource> 
```

# qt - QWebview - 重新打开关闭的窗口

> ID：15929836
> 
> 赞同：0
> 
> 时间：2013-04-10T15:14:49.853
> 
> 标签：qt, qtwebkit, window.open, qwebview

我正在`QT5`（IDE `Qt Creator 2.6.2`）中开发一个基本的网络浏览器。如果我点击 a `link\anchor`with `target`：

`<a target="newWindow" href="http://stackoverflow.com">Test</a>`

或执行打开`pop-up`( `onclick`、`onmouseover`、`onkeydown`等) 的事件：

`<input type="button" value="Test" onclick="window.open('','newWindow');">`

并关闭新打开的窗口，然后我无法重新打开该窗口。我点击，没有任何反应。

以下代码进行测试：

**测试-qwebview.pro**

```
QT       += webkitwidgets network core gui

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

TARGET = browserqt
TEMPLATE = app

SOURCES += main.cpp\
        mbrowserqt.cpp

HEADERS  += mbrowserqt.h

FORMS    += mbrowserqt.ui

# install
target.path = $$[QT_INSTALL_EXAMPLES]/webkitwidgets/previewer
INSTALLS += target 
```

* * *

**mbrowserqt.ui**

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>mBROWSERQT</class>
 <widget class="QMainWindow" name="mBROWSERQT">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>640</width>
    <height>320</height>
   </rect>
  </property>
  <property name="sizePolicy">
   <sizepolicy hsizetype="Preferred" vsizetype="Preferred">
    <horstretch>0</horstretch>
    <verstretch>0</verstretch>
   </sizepolicy>
  </property>
  <property name="baseSize">
   <size>
    <width>0</width>
    <height>0</height>
   </size>
  </property>
  <property name="windowTitle">
   <string>Browser QT5</string>
  </property>
  <property name="layoutDirection">
   <enum>Qt::LeftToRight</enum>
  </property>
  <property name="autoFillBackground">
   <bool>false</bool>
  </property>
  <property name="documentMode">
   <bool>false</bool>
  </property>
  <property name="tabShape">
   <enum>QTabWidget::Rounded</enum>
  </property>
  <widget class="QWidget" name="centralWidget">
   <property name="sizePolicy">
    <sizepolicy hsizetype="Minimum" vsizetype="Minimum">
     <horstretch>0</horstretch>
     <verstretch>0</verstretch>
    </sizepolicy>
   </property>
   <property name="minimumSize">
    <size>
     <width>50</width>
     <height>50</height>
    </size>
   </property>
   <property name="baseSize">
    <size>
     <width>0</width>
     <height>0</height>
    </size>
   </property>
   <layout class="QVBoxLayout" name="verticalLayout">
    <property name="spacing">
     <number>0</number>
    </property>
    <property name="sizeConstraint">
     <enum>QLayout::SetMaximumSize</enum>
    </property>
    <property name="leftMargin">
     <number>0</number>
    </property>
    <property name="topMargin">
     <number>0</number>
    </property>
    <property name="rightMargin">
     <number>0</number>
    </property>
    <property name="bottomMargin">
     <number>0</number>
    </property>
    <item>
     <widget class="QWebView" name="mybrowsertest">
      <property name="sizePolicy">
       <sizepolicy hsizetype="Preferred" vsizetype="Preferred">
        <horstretch>0</horstretch>
        <verstretch>0</verstretch>
       </sizepolicy>
      </property>
      <property name="minimumSize">
       <size>
        <width>50</width>
        <height>50</height>
       </size>
      </property>
      <property name="maximumSize">
       <size>
        <width>16777215</width>
        <height>16777215</height>
       </size>
      </property>
      <property name="baseSize">
       <size>
        <width>0</width>
        <height>0</height>
       </size>
      </property>
      <property name="contextMenuPolicy">
       <enum>Qt::DefaultContextMenu</enum>
      </property>
      <property name="acceptDrops">
       <bool>true</bool>
      </property>
      <property name="layoutDirection">
       <enum>Qt::LeftToRight</enum>
      </property>
      <property name="autoFillBackground">
       <bool>false</bool>
      </property>
      <property name="url">
       <url>
        <string>about:blank</string>
       </url>
      </property>
     </widget>
    </item>
   </layout>
  </widget>
 </widget>
 <layoutdefault spacing="0" margin="0"/>
 <customwidgets>
  <customwidget>
   <class>QWebView</class>
   <extends>QWidget</extends>
   <header>QtWebKitWidgets/QWebView</header>
  </customwidget>
 </customwidgets>
 <resources/>
 <connections/>
</ui> 
```

* * *

**mbrowserqt.h**

```
#ifndef mBROWSERQT_H
#define mBROWSERQT_H

#include <QMainWindow>

namespace Ui {
    class mBROWSERQT;
}

class mBROWSERQT : public QMainWindow
{
    Q_OBJECT

public:
    explicit mBROWSERQT(QWidget *parent = 0, bool q = false);
    ~mBROWSERQT();

private:
    Ui::mBROWSERQT *ui;

//adicionado
public slots:
    void closeMyWindow();
    void resizeMyWindow(const QRect & geom);
};
#endif // mBROWSERQT_H 
```

* * *

**mbrowserqt.cpp**

```
#include "mbrowserqt.h"
#include "ui_mbrowserqt.h"
#include <QtNetwork>

QWebSettings *settings;

class myWebPage : public QWebPage
{
    bool acceptNavigationRequest(QWebFrame *frame, const QNetworkRequest &request, NavigationType type){
        url = request.url();
        return QWebPage::acceptNavigationRequest(frame,request,type);
    }

    virtual QWebPage * createWindow(QWebPage::WebWindowType type) {
        Q_UNUSED(type);
        QMainWindow *wx = new mBROWSERQT(NULL,true);
        QWebView *wv = wx->findChild<QWebView*>("mybrowsertest");

        //Test
        connect(wv->page(), SIGNAL(windowCloseRequested()), wx, SLOT(deleteLater()));

        wx->showNormal();
        return wv->page();
    }

    private:
        QUrl url;
};

mBROWSERQT::mBROWSERQT(QWidget *parent, bool q) :
    QMainWindow(parent),
    ui(new Ui::mBROWSERQT)
{
    ui->setupUi(this);

    ui->mybrowsertest->setPage(new myWebPage());
    settings = QWebSettings::globalSettings();

    settings->setAttribute(QWebSettings::LocalContentCanAccessRemoteUrls,true);
    settings->setAttribute(QWebSettings::OfflineStorageDatabaseEnabled,true);
    settings->setAttribute(QWebSettings::LocalContentCanAccessFileUrls,true);
    settings->setAttribute(QWebSettings::JavascriptCanOpenWindows,true);
    settings->setAttribute(QWebSettings::JavascriptCanCloseWindows,true);
    settings->setAttribute(QWebSettings::JavascriptEnabled,true);
    settings->setAttribute(QWebSettings::PluginsEnabled,true);

    connect(ui->mybrowsertest->page(), SIGNAL(windowCloseRequested()), this, SLOT(closeMyWindow()));
    connect(ui->mybrowsertest->page(), SIGNAL(geometryChangeRequested(const QRect)),
            this, SLOT(resizeMyWindow(const QRect)));

    qDebug() << "new Page (target or window.open): " << q;
    if(q==false){
        QString fPage = "<!DOCTYPE html>";
                fPage.append("<html>\n");
                fPage.append("<head>\n");
                fPage.append("<script>\n");
                fPage.append("function openWin(q){\n");
                fPage.append("try{\n");
                fPage.append("var myWindow=window.open('','test','width=200,height=100,top=50,left=50');\n");
                fPage.append("  myWindow.document.write(\"<p>This is 'myWindow'</p>\");\n");
                fPage.append("} catch (ee){ alert(ee); } }\n");
                fPage.append("</script>\n");
                fPage.append("</head>\n");
                fPage.append("<body>\n");
                fPage.append("<p><input type=\"button\" value=\"Test window.open\" onclick=\"openWin();\"></p>\n");
                fPage.append("<p><a target=\"newWindow\" href=\"http://stackoverflow.com\">Test target</a></p>\n");
                fPage.append("</body>\n");
                fPage.append("</html>");
        ui->mybrowsertest->setHtml(fPage);
    }
}

void mBROWSERQT::resizeMyWindow(const QRect & geom){
    qDebug() << "geometry: " << geom;
    this->setGeometry(geom);
}

void mBROWSERQT::closeMyWindow(){
    qDebug() << "closeMyWindow/webView::stop...";
    ui->mybrowsertest->stop();
    qDebug() << "closeMyWindow/webView::page::view::close()...";
    ui->mybrowsertest->page()->view()->close();
    qDebug() << "closeMyWindow/webView::page::view::deleteLater()...";
    ui->mybrowsertest->page()->view()->deleteLater();
    qDebug() << "closeMyWindow/webView::close()...";
    ui->mybrowsertest->close();
    qDebug() << "closeMyWindow/MainWindow::close()...";
    close();//close widget
    deleteLater();//close Object
}

mBROWSERQT::~mBROWSERQT()
{
    delete ui;
} 
```

* * *

**主文件**

```
#include "mbrowserqt.h"
#include <QApplication>
#include <QtWebKitWidgets/QWebView>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);    
    mBROWSERQT w;
    w.show();
    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T00:53:41.467

我删除了：`closeMyWindow`

添加虚函数：`QMainWindow::closeEvent(QCloseEvent *event)`

~~使用`QWebFrame::evaluateJavaScript`我运行一个使用javascript发送关闭命令的javascript：~~

添加属性`QWEBVIEW->setAttribute(Qt::WA_DeleteOnClose, true);`

*完全固定来源*：

**mbrowserqt.h**

```
#ifndef mBROWSERQT_H
#define mBROWSERQT_H

#include <QMainWindow>

namespace Ui {
    class mBROWSERQT;
}

class mBROWSERQT : public QMainWindow
{
    Q_OBJECT

public:
    explicit mBROWSERQT(QWidget *parent = 0, bool q = false);
    ~mBROWSERQT();

private:
    Ui::mBROWSERQT *ui;

//adicionado
public slots:
    void closeEvent(QCloseEvent *event);
    void resizeMyWindow(const QRect & geom);
};
#endif // mBROWSERQT_H 
```

* * *

**mbrowserqt.cpp**

```
#include "mbrowserqt.h"
#include "ui_mbrowserqt.h"
#include <QtNetwork>
#include <QWebFrame>

QWebSettings *settings;

class myWebPage : public QWebPage
{
    bool acceptNavigationRequest(QWebFrame *frame, const QNetworkRequest &request, NavigationType type){
        url = request.url();
        return QWebPage::acceptNavigationRequest(frame,request,type);
    }

    virtual QWebPage * createWindow(QWebPage::WebWindowType type) {
        Q_UNUSED(type);
        QMainWindow *wx = new mBROWSERQT(NULL,true);
        QWebView *wv = wx->findChild<QWebView*>("mybrowsertest");
        wv->setAttribute(Qt::WA_DeleteOnClose, true);
        wx->showNormal();
        return wv->page();
    }

    private:
        QUrl url;
};

mBROWSERQT::mBROWSERQT(QWidget *parent, bool q) :
    QMainWindow(parent),
    ui(new Ui::mBROWSERQT)
{
    ui->setupUi(this);

    ui->mybrowsertest->setAttribute(Qt::WA_DeleteOnClose, true);
    ui->mybrowsertest->setPage(new myWebPage());
    settings = QWebSettings::globalSettings();

    settings->setAttribute(QWebSettings::LocalContentCanAccessRemoteUrls,true);
    settings->setAttribute(QWebSettings::OfflineStorageDatabaseEnabled,true);
    settings->setAttribute(QWebSettings::LocalContentCanAccessFileUrls,true);
    settings->setAttribute(QWebSettings::JavascriptCanOpenWindows,true);
    settings->setAttribute(QWebSettings::JavascriptCanCloseWindows,true);
    settings->setAttribute(QWebSettings::JavascriptEnabled,true);
    settings->setAttribute(QWebSettings::PluginsEnabled,true);

    connect(ui->mybrowsertest->page(), SIGNAL(windowCloseRequested()), this, SLOT(closeMyWindow()));
    connect(ui->mybrowsertest->page(), SIGNAL(geometryChangeRequested(const QRect)),
            this, SLOT(resizeMyWindow(const QRect)));

    qDebug() << "new Page (target or window.open): " << q;
    if(q==false){
        QString fPage = "<!DOCTYPE html>";
                fPage.append("<html>\n");
                fPage.append("<head>\n");
                fPage.append("<script>\n");
                fPage.append("function openWin(q){\n");
                fPage.append("try{\n");
                fPage.append("var myWindow=window.open('','test','width=200,height=100,top=50,left=50');\n");
                fPage.append("  myWindow.document.write(\"<p>This is 'myWindow'</p>\");\n");
                fPage.append("} catch (ee){ alert(ee); } }\n");
                fPage.append("</script>\n");
                fPage.append("</head>\n");
                fPage.append("<body>\n");
                fPage.append("<p><input type=\"button\" value=\"Test window.open\" onclick=\"openWin();\"></p>\n");
                fPage.append("<p><a target=\"newWindow\" href=\"http://stackoverflow.com\">Test target</a></p>\n");
                fPage.append("</body>\n");
                fPage.append("</html>");
        ui->mybrowsertest->setHtml(fPage);
    }
}

void mBROWSERQT::resizeMyWindow(const QRect & geom){
    qDebug() << "geometry: " << geom;
    this->setGeometry(geom);
}

void mBROWSERQT::closeEvent(QCloseEvent *event) {
    Q_UNUSED(event);

    ui->mybrowsertest->close();
}

mBROWSERQT::~mBROWSERQT()
{
    delete ui;
} 
```

# backbone.js - 在使用 mocha 和 phantomjs 执行任何测试之前，如何确保我的主干视图完全呈现？

> ID：15929837
> 
> 赞同：2
> 
> 时间：2013-04-10T15:14:52.887
> 
> 标签：backbone.js, phantomjs, mocha.js

这是我在做什么

## 我的测试脚本

```
requirejs(['jquery', 'application'], function($, app){
describe('View Products List', function(){
    // All test in this test suite fails    
    it('Products list should be present', function(done) {    
      $('.productlist').length.should.equal(1);  
      return done();
    });
    it('product list should be have a checkbox for product selection', function(done) {      
      $('.productlist td:first input[type=checkbox]').length.should.equal(1);  
      return done();
    });
    it('product name should be anchor which could be clickable', function(done) {
      $('.productlist td:first a').length.should.equal(1);  
      return done();enter code here
    });
    it('Should show product details on click of product name', function(done) {
      $('.productlist td:first a').click();
      $('.editproduct').length.should.equal(1);
      return done();
    });
 });
 }); 
```

## 骨干视图

```
var Products = new Backbone.View.extend({
tagName : 'div'
template : productsTemplate
render: function() {
       $(this.el).html(this.template());
   }
 initialize: function() {
       // some code
   }
}); 
```

## 描述

当我运行我的测试脚本并加载 url #products 时，产品视图将呈现到 html 正文。我希望测试用例检查视图生成的 DOM 元素。似乎测试首先运行，即在视图呈现 dom 元素之前，因此它失败了。我们如何确保在我的测试运行之前视图已经完全呈现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:38:00.857

在 Mocha 中，异步代码应该包含在一个`beforeEach`部分中，以确保它在测试之前执行。

在您的情况下，尝试重新渲染本节中的视图：

```
beforeEach(function() {
    productListView.render();
});

describe('View Products List', function(){
    it("...
    ... 
```

您可以查看这篇文章了解更多详情： http: [//lostechies.com/derickbailey/2012/08/17/asynchronous-unit-tests-with-mocha-promises-and-winjs/](http://lostechies.com/derickbailey/2012/08/17/asynchronous-unit-tests-with-mocha-promises-and-winjs/)

# ruby-on-rails - Rails，使用 Active Record Query 或 AREL 基于共享关联查找结果

> ID：15929838
> 
> 赞同：0
> 
> 时间：2013-04-10T15:14:55.463
> 
> 标签：ruby-on-rails, activerecord, arel

我正在开发一个 Rails 项目，我有一个用户，通过会员模型拥有多个团队。用户有一个隐私设置，可以是（公共的、私人的或受保护的）

在当前用户的主页上，我想显示所有将个人资料设置为公开的用户，以及将个人资料设置为受保护并与当前用户共享团队的用户。

我可以将其作为两个单独的查询来执行，然后组合生成的数组，但我假设将其保持为一个“更好” - 我认为它也会在 will_paginate 中表现得更好。

我认为由于 .or 条件，我可能需要使用 Arel，但我无法理解建立共享团队所需的联接。

我是 AREL、SQL 和 Stackoverflow 的新手，如果这没有多大意义，我深表歉意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:31:34.643

我假设以下设置：

```
class User < AR
  has_many :memberships
  has_many :teams, through: :memberships
end

class Membership < AR
  belongs_to :user
  belongs_to :team
end

class Team < AR
  has_many :memberships
  has_many :teams, through: :memberships
end 
```

那么这应该工作：

```
sql = <<QUERY
SELECT users.* FROM users WHERE users.privacy_setting = 'public'
UNION
SELECT users.* FROM users JOIN memberships ON users.id = memberships.user_id
WHERE memberships.team_id IN (#{current_user.team_ids})
AND users.privacy_setting = 'protected'
QUERY

# use the paginated find_by_sql method (provided by will_paginate)
User.paginate_by_sql(sql, page: params[:page], per_page: 50) 
```

当然，列名等取决于您的设置...

PS：不需要AREL，我想...

# asp.net - 与 ASP.NET 和 SQL Server 聊天

> ID：15929839
> 
> 赞同：2
> 
> 时间：2013-04-10T15:14:55.633
> 
> 标签：asp.net, sql-server, ajax, chat

我必须编程与asp.net 聊天。

消息保存在 SQL Server 数据库中。

如何实时从数据库中检索消息？

如果其他用户写了一条消息，我怎么知道？

我看到了一些关于`SqlCacheDependency`轮询和推送的内容，但我不想总是刷新页面。使用 ajax 或 ajax 可能更好`SqlDependency`？

你有什么想法吗？

有人有一些代码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:35:31.223

请试试这个，这是最好的框架[http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)**`real time chat's`**

# node.js - nodejs 和 socket.io.js 路径解析

> ID：15929842
> 
> 赞同：2
> 
> 时间：2013-04-10T15:14:58.137
> 
> 标签：node.js, socket.io, httpserver

我刚刚开始使用 socket.io.js 库学习 nodejs。我的问题与这些库中的内容无关，而是与访问浏览器如何提供文件有关。

在我的服务器目录中，只有 2 个文件（index.html 和 server.js）以及 node_modules 目录（用于 socket.io）。在 index.html 中，我有一个包含客户端 socket.io 库的脚本标记，如下所示，

```
<script src="/socket.io/socket.io.js"></script> 
```

相关的服务器代码是，

```
var server = http.createServer(
    function(req, res) {
        res.writeHead(200, { 'Content-type': 'text/html'});
        res.end(fs.readFileSync(__dirname + '/index.html'));
    }
    ).listen(8080, 
    function() {
        console.log('Listening at: http://localhost:8080');
    }
); 
```

我的问题是该文件在服务器上的什么位置（存在 index.html 的目录中没有 socket.io 目录）？那么网络浏览器如何以及从哪里正确解决和下载这个问题呢？

对不起菜鸟问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:22:31.177

客户端文件由 socket.io npm 模块自动注入，因此当您升级 npm 模块时，您的客户端版本的 socket.io 会自动更新。

实际文件位于：

`/usr/local/lib/node_modules/socket.io/node_modules/socket.io-client/dist/socket.io.js`

编辑：忘了提到，当你初始化 socket.io 时，你实际上是在让它启动它自己的服务器来服务文件。

# python - 根据文件中的值切割字符值

> ID：15929843
> 
> 赞同：0
> 
> 时间：2013-04-10T15:15:01.803
> 
> 标签：python, python-2.7

这就是我正在做的

```
import csv
output = open('output.txt' , 'wb')

# this functions return the min for num.txt
def get_min(num):
    return int(open('%s.txt' % num, 'r+').readlines()[0])

# temporary variables
last_line = ''
input_list = []

#iterate over input.txt in sort the input in a list of tuples 
for i, line in enumerate(open('input.txt', 'r+').readlines()): 
    if i%2 == 0: 
        last_line = line
    else:
        input_list.append((last_line, line))
filtered = [(header, data[:get_min(header[-2])] + '\n' ) for (header, data) in input_list]
[output.write(''.join(data)) for data in filtered]
output.close() 
```

在这段代码`input.txt`中是这样的

```
>012|013|0|3|M
AFDSFASDFASDFA
>005|5|67|0|6
ACCTCTGACC
>029|032|4|5|S
GGCAGGGAGCAGGCCTGTA 
```

`num.txt`是这样的

```
M 4
P 10 
```

我希望在上面通过查看与 in 相同的最后一列来`input.txt`检查来自 的值的数量，并根据该值剪切其字符`num.txt``num.txt`

我认为我的代码中的错误是它只接受整数文本文件，它也应该接受包含字母的文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:06:31.790

经过与 OP 长时间的交谈，完全修改后的版本；

```
import os
import re

# Fetch all hashes and counts
file_c = open('num.txt')
file_c = file_c.read()
lines = re.findall(r'\w+\.txt \d+', file_c)
numbers = {}

for line in lines:
    line_split = line.split('.txt ')
    hash_name = line_split[0]
    count = line_split[1]

    numbers[hash_name] = count

#print(numbers)

# The input file
file_i = open('input.txt')
file_i = file_i.read()

for hash_name, count in numbers.iteritems():
    regex = '(' + hash_name.strip() + ')'
    result = re.findall(r'>.*\|(' + regex + ')(.*?)>', file_i, re.S)

    if len(result) > 0:
        data_original = result[0][2]
        stripped_data = result[0][2][int(count):]

        file_i = file_i.replace(data_original, '\n' + stripped_data)

        #print(data_original)
        #print(stripped_data)

#print(file_i)

# Write the input file to new input_new.txt
f = open('input_new.txt', 'wt')
f.write(file_i) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:18:47.823

你可以这样做；

```
import re

min_count = 4 # this variable will contain that count integer from where to start removing
str_to_match = 'EOG6CC67M' # this variable will contain the filename you read

input = '' # The file input (input.txt) will go in here

counter = 0

def callback_f(e):
    global min_count
    global counter
    counter += 1
    # Check your input
    print(str(counter) + ' >>> ' + e.group())

    # Only replace the value with nothing (remove it) after a certain count
    if counter > min_count:
        return '' # replace with nothing

result = re.sub(r''+str_to_match, callback_f, input) 
```

使用这种策略，您可以使用全局计数器进行计数，并且无需使用复杂结构进行硬线循环。

**更新**

更详细的文件访问版本；

```
import os
import re

def callback_f(e):
    global counter
    counter += 1
    # Check your input
    print(str(counter) + ' >>> ' + e.group())

# Fetch all hash-file names and their content (count)
num_files = os.listdir('./num_files')
numbers = {}

for file in num_files:
    if file[0] != '.':
        file_c = open('./num_files/' + file)
        file_c = file_c.read()

        numbers[file.split('.')[0]] = file_c

# Now the CSV files
csv_files = os.listdir('./csv_files')

for file in csv_files:
    if file[0] != '.':
        for hash_name, min_count in numbers.iteritems():
            file_c = open('./csv_files/' + file)
            file_c = file_c.read()

            counter = 0

            result = re.sub(r''+hash_name, callback_f, file_c)

            # Write the replaced content back to the file here 
```

考虑的目录/文件结构；

```
 + Projects
   + Project_folder
     + csv_files
       - input1.csv
       - input2.csv
       ~ etc.
     + num_files
       - EOG6CC67M.txt
       - EOG62JQZP.txt
       ~ etc.
     - python_file.py 
```

*   CSV 文件包含您在原始问题中陈述的大量文本。
*   Num 文件包含带有 Integer 的哈希文件

这个脚本会发生什么；

1.  收集所有哈希文件（在字典中）及其内部计数
2.  循环遍历所有 CSV 文件
3.  对每个 CSV 文件收集的数字进行子循环
4.  `callback_f()`在一定计数后替换/删除（基于您在其中所做的）哈希
5.  写回输出（这是脚本中的最后一条注释，将包含`file.write()`功能）

# php - 用于在 Javascript 标记中获取数据的 HTML 源代码

> ID：15929846
> 
> 赞同：0
> 
> 时间：2013-04-10T15:15:08.930
> 
> 标签：php, javascript, html

我正在尝试获取网页的 HTML 源代码，然后对其进行表述以获取 Javascript 标记内的数据。

该页面上的 Javascript 标记如下所示：

```
<script>
fullplayer("player", {
            src:"full_width_player.swf",
            wmode:"window"
        }, { 
    key: '#$0c4de1874473849ff8a',
    canvas: {
        backgroundGradient: "none",
        backgroundColor: "#000000"
    },
    audio: {
        provider: 'servstat',
        q: '128'
    },
    playlist: '/get.php?location=/audio/welcome.mp3',
    plugins: {
        youtube: { }
    }
});
</script> 
```

我正在寻找一种方法来获取其中的值，`playlist:'*****',`这意味着音轨的位置-`/get.php?location=/audio/welcome.mp3`

这是否可以使用 HTML DOM 短语，还是我需要抓取 Javascript 标记内的所有内容并将数据读取为 XML 或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:20:28.730

试试这是一个正则表达式

```
 preg_match_all('~playlist:[ ]*[\'|"](.*?)[\'|"]~si',$HTML,$Match);
 print_r($Match); 
```

样品的输出：

```
 Array
 (
   [0] => Array
    (
        [0] => playlist: '/get.php?location=/audio/welcome.mp3'
    )

   [1] => Array
    (
        [0] => /get.php?location=/audio/welcome.mp3
    )

 ) 
```

卷曲

```
function HeaderProc($response,$Run="",$String=1/*[Is 1 IF Use for String Mode ]*/){
          if($String==1){
             $response=explode("\r\n",$response);  
          }
          $PartHeader=0;
          $out[$PartHeader]=array();
          while(list($key,$val)=each($response)){
              $name='';
              $value='';
              $flag=false;
              for($i=0;$i<strlen($val);$i++){
                  if($val[$i]==":"){
                      $flag=true;
                      for($j=$i+1;$j<strlen($val);$j++){
                        if($val[$i]=="\r" and $val[$i+1]=="\n"){    
                            break;
                        }
                        $value.=$val[$j];
                      }
                      break;
                  }
                  $name.=$val[$i]; 
              }
              if($flag){
                if($name=='' and $value==''){
                    $PartHeader++;  
                }else{
                  if(isset($out[$PartHeader][$name])){
                    if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                    }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$value;  
                    }
                  }else{
                    $out[$PartHeader][$name]=$value;
                  }
                }
              }else{
                if($name==''){
                    $PartHeader++;  
                }else{
                    if(isset($out[$PartHeader][$name])){ 
                      if(is_array($out[$PartHeader][$name])){   
                        $out[$PartHeader][$name][]=$value;
                      }else{
                        $T=$out[$PartHeader][$name];
                        $out[$PartHeader][$name]=array();
                        $out[$PartHeader][$name][0]=$T;  
                        $out[$PartHeader][$name][1]=$name;  
                      }
                    }else{
                        $out[$PartHeader][$name]=$name; 
                    }
                } 
              }
              if($Run!=""){
                $Run($name,$value);  
              }
          }
          return $out;
}

class cURL { 
    var $headers; 
    var $user_agent; 
    var $compression; 
    var $cookie_file; 
    var $proxy; 
    var $Cookie; 
    function CookieAnalysis($Cookie){//convert str cookie to array cookie 
       //echo $Cookie;
       $this->Cookie=array();
       preg_match("~(.*?)=(.*?);~si",' '.$Cookie.'; ',$M);
       $this->Cookie[trim($M[1])]=trim($M[2]);
       return $this->Cookie;
    }
    function cURL($cookies=false,$cookie='cookies.txt',$compression='gzip',$proxy='') {
         $this->headers[] = 'Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';
         $this->headers[] = 'Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3'; 
         $this->headers[] = 'Accept-Encoding:gzip,deflate,sdch';
         $this->headers[] = 'Accept-Language:en-US,en;q=0.8';
         $this->headers[] = 'Cache-Control:max-age=0';
         $this->headers[] = 'Connection:keep-alive';
         $this->user_agent = 'User-Agent:Mozilla/5.0 (SepidarSoft [Organic Search Engine Crawler] Linux Edition) AppleWebKit/536.5 (KHTML, like Gecko) SepidarBrowser/1.0.100.52 Safari/536.5';
         $this->compression=$compression; 
         $this->proxy=$proxy; 
         $this->cookies=$cookies; 
         if ($this->cookies == TRUE) $this->cookie($cookie); 
    } 
    function cookie($cookie_file) { 
         if (file_exists($cookie_file)) { 
            $this->cookie_file=$cookie_file; 
         } else { 
            fopen($cookie_file,'w') or $this->error('The cookie file could not be opened. Make sure this directory has the correct permissions');
            $this->cookie_file=$cookie_file; 
            @fclose($this->cookie_file); 
         } 
    }
    function GET($url) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process,CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         $response = curl_exec($process);
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
           if(!is_array($HeaderP['Set-Cookie']))continue;
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL); 
         curl_close($process); 
         return $result; 
    }
    function POST($url,$data) { 
         $process = curl_init($url); 
         curl_setopt($process, CURLOPT_HTTPHEADER, $this->headers); 
         curl_setopt($process, CURLOPT_HEADER, 1); 
         curl_setopt($process, CURLOPT_USERAGENT, $this->user_agent); 
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEFILE, $this->cookie_file);
         if ($this->cookies == TRUE) curl_setopt($process, CURLOPT_COOKIEJAR, $this->cookie_file);
         curl_setopt($process, CURLOPT_ENCODING , $this->compression); 
         curl_setopt($process, CURLOPT_TIMEOUT, 30); 
         if ($this->proxy) curl_setopt($process, CURLOPT_PROXY, $this->proxy); 
         curl_setopt($process, CURLOPT_POSTFIELDS, $data); 
         curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
         curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1); 
         curl_setopt($process, CURLOPT_POST, 1);
         $response = curl_exec($process); 
         $header_size = curl_getinfo($process,CURLINFO_HEADER_SIZE);
         $result['Header'] = HeaderProc(substr($response, 0, $header_size),'',1);
         foreach($result['Header'] as $HeaderK=>$HeaderP){
            if(!is_array($HeaderP['Set-Cookie']))continue;
           foreach($HeaderP['Set-Cookie'] as $key=>$val){
             $result['Header'][$HeaderK]['Set-Cookie'][$key]=$this->CookieAnalysis($val);
           }
         }
         $result['Body'] = substr( $response, $header_size );
         $result['HTTP_State'] = curl_getinfo($process,CURLINFO_HTTP_CODE);
         $result['URL'] = curl_getinfo($process,CURLINFO_EFFECTIVE_URL);
         curl_close($process); 
         return $result; 
    }
    function error($error) { 
         echo "<center><div style='width:500px;border: 3px solid #FFEEFF; padding: 3px; background-color: #FFDDFF;font-family: verdana; font-size: 10px'><b>cURL Error</b><br>$error</div></center>";
         die; 
    } 
 } 
```

样本：

```
 $cc = new cURL(); 
  $Data=$cc->get('http://www.yahoo.com');
  preg_match_all('~playlist:[ ]*[\'|"](.*?)[\'|"]~si',$Data['Body'],$Match);
  print_r($Match); 
```

# c# - 仅使用 Json.Net 序列化简单类型

> ID：15929848
> 
> 赞同：12
> 
> 时间：2013-04-10T15:15:15.423
> 
> 标签：c#, .net, json, json.net

我不确定为什么还没有人问过这个问题，但我试图使用`IContractResolver`接口仅序列化给定对象的简单类型。我真的不想使用`ShouldSerialize`方法或`JsonDataAttribute`类似的东西来标记每个属性。

到目前为止我所做的在 LinqPad 上显示如下

**一些要序列化的示例类**

```
class Customer
{
    public List<Order> Orders {get;set;}
    public int CustomerId {get;set;}
    public string[] Addresses {get;set;}
}

class Order
{
    public int OrderId{get;set;}
    public string Name {get;set;}
    public int Amount {get;set;}
    public Order PreviousOrder {get;set;}
} 
```

**序列化所有对象的扩展方法**

```
static class ExtensionMethods
{
    public static string JsonSerialize (this object obj)
    {
        var settings = new JsonSerializerSettings();
        settings.ContractResolver = new MyContractResolver();
        settings.DefaultValueHandling = DefaultValueHandling.Ignore;
        settings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;
        return JsonConvert.SerializeObject(obj,settings);
    }
} 
```

**我的自定义合同解析器类**

```
public class MyContractResolver: DefaultContractResolver
{
    protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
    {
        var property = base.CreateProperty(member,memberSerialization);
        property.ShouldSerialize = instance => instance.GetType().IsPrimitive || instance.GetType() == typeof(string) || instance.GetType() == typeof(decimal);
        return property;
    }
} 
```

**和主要方法：**

```
void Main()
{
    var customer = new Customer
                {
                    Orders = ProduceSomeOrders(),
                    Addresses = new string[] {"9450 S. Small Street Dr.","9521 Flintstone Dr. S"},
                    CustomerId = 1
                };

    var jsonOrder = customer.JsonSerialize();
    jsonOrder.Dump();
} 
```

我只想序列化样本类型，例如`int`, `double`, `string`,等`decimal`，`bool`而不是数组、集合、自定义对象等，它只会导航第一级，而不是第二级或更多级。我真的很想知道为什么在 Json.Net 中没有任何简单的方法可以做到这一点。

这是我运行此代码时的输出：（一个空的 json）

> { }

当我运行这段代码时，我意识到一件事，`member`传递给`CreateProperty`方法的第一个参数是主对象本身，在这种情况下是`Customer`实例。但由于这适用于所有类型的类型，我只是不想`instance.GetType() == typeof(Customer)`在方法中说或类似的东西。这种情况下的预期输出仅`CustomerId`在这种情况下。

你知道任何优雅的方式来处理我的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T16:17:12.650

通过更改下面的方法，我得到了结果：{“CustomerId”：1}。这是你要找的吗？

```
public class MyContractResolver:DefaultContractResolver
{
protected override JsonProperty CreateProperty(MemberInfo member, MemberSerialization memberSerialization)
{
    var property = base.CreateProperty(member,memberSerialization);

    var propertyType = property.PropertyType;
    if(propertyType == typeof(int) 
        || propertyType == typeof(string)){
        property.ShouldSerialize = instance => true;
    }
    else
    {
        property.ShouldSerialize = instance => false;
    }
    return property;
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T16:35:57.900

`CreateProperty`我不是覆盖方法，而是覆盖方法，`GetSerializableObjects`因为它提供了我将获得的所有可能成员：

```
public class MyContractResolver: DefaultContractResolver
{
    protected override List<MemberInfo> GetSerializableMembers(Type objectType)
    {
        var members = base.GetSerializableMembers(objectType);
        var filteredMembers = new List<MemberInfo>();
        members.ForEach(m=>{
            if(m.MemberType == MemberTypes.Property)
            {
                PropertyInfo info = (PropertyInfo) m;
                var type = info.PropertyType;
                if(type.IsPrimitive || type == typeof(string) || type == typeof(decimal))
                {
                    filteredMembers.Add(m);
                }
            }
        });
        return filteredMembers;
    }
} 
```

# objective-c - 通过打开对话窗口为图像选择图像

> ID：15929858
> 
> 赞同：0
> 
> 时间：2013-04-10T15:15:43.417
> 
> 标签：objective-c, xcode, macos, cocoa

我想选择一个带有浏览窗口的图像并很好地放入图像。

这是我的代码，我可以选择图像但看不到图像，选择后它应该很好地出现在窗口上的图像中。

```
- (IBAction)chooseImage:(id)sender 
{
    NSOpenPanel* openDlg = [NSOpenPanel openPanel];
    [openDlg setPrompt:@"Select"];
    [openDlg setCanChooseFiles:YES];

    [openDlg setCanChooseDirectories:YES];

    if ( [openDlg runModal] == NSOKButton )
    {

        NSArray* files = [openDlg URLs];

        // Loop through all the files and process them.
        for( int i = 0; i < [files count]; i++ )
        {
            NSString* fileName = [files objectAtIndex:i];
            NSImage *iconImage=[[NSImage alloc] initWithContentsOfFile:fileName];
            [imageView setImage:iconImage];
        }
    }
} 
```

在界面生成器中，我已将浏览按钮与

```
- (IBAction)chooseImage:(id)sender; 
```

和图像井对象

```
@property (assign) IBOutlet NSImageView* imageView; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:21:10.740

`initWithContentsOfFile`采用文件路径。但`URLs`包含 URL。所以你有一个阻抗不匹配，并且`iconImage`为零。

改为使用`initWithContentsOfURL`。

另外，为什么要允许用户选择多个图像然后循环浏览它们，将图像视图设置为连续显示每个图像？（它不会一起显示它们；它只能显示一个图像。）只需将图像视图设置为用户选择`image`的*第一个*（也是唯一一个）图像。

# active-directory - active directory ldap login auth when password needs changing

> ID：15929860
> 
> 赞同：0
> 
> 时间：2013-04-10T15:15:56.550
> 
> 标签：active-directory, windows-server-2008

Let me explain my issue.

I have a PHP application using an LDAP connection to an Active Directory server to authenticate. If i make it so that a user needs to change their password at the next login it won't allow me to authenticate them before i allow the password change. I can detect that the password change is required but if i allowed the user to change it then i have no way to work out that the user is valid or not, which means that the system could be hacked by just knowing the username of a user that's password as expired.

This to me seems daft... is there something im missing..

Currently I am

*binding to the server*

*checking if the password as expired or not*

*checking the authentication users details*

This is what I get returned if the users account is set to change password on next login, auth as failed but there is a password change request.

Is there a specific order the requests need to be sent so i can auth the user before the password change it sent?

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:36:20.957

通过将帐户标记`Must change password at next login`为实际上没有密码进行身份验证，因此这不会转化为网络。

更好的选择是将用户的`pwdLastSet`属性与域策略进行比较，并在应用程序中强制执行更改，而不是在 AD 中。

# python - pandas.to_datetime inconsistent time string format

> ID：15929861
> 
> 赞同：7
> 
> 时间：2013-04-10T15:16:02.257
> 
> 标签：python, datetime, pandas

I am attempting to convert the index of a `pandas.DataFrame` from string format to a datetime index, using `pandas.to_datetime()`.

Import pandas:

```
In [1]: import pandas as pd

In [2]: pd.__version__
Out[2]: '0.10.1' 
```

Create an example DataFrame:

```
In [3]: d = {'data' : pd.Series([1.,2.], index=['26/12/2012', '10/01/2013'])}

In [4]: df=pd.DataFrame(d) 
```

Look at indices. Note that the date format is day/month/year:

```
In [5]: df.index
Out[5]: Index([26/12/2012, 10/01/2013], dtype=object) 
```

Convert index to datetime:

```
In [6]: pd.to_datetime(df.index)
Out[6]: 
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-12-26 00:00:00, 2013-10-01 00:00:00]
Length: 2, Freq: None, Timezone: None 
```

Already at this stage, you can see that the date format for each entry has been formatted differently. The first is fine, the second has swapped month and day.

This is what I want to write, but avoiding the inconsistent formatting of date strings:

```
In [7]: df.set_index(pd.to_datetime(df.index))
Out[7]: 
data
2012-12-26   1
2013-10-01   2 
```

I guess the first entry is correct because the function 'knows' there aren't 26 months, and so does not choose the default month/day/year format.

Is there another/better way to do this? Can I pass the format into the `to_datetime()` function?

Thank you.

EDIT:

I have found a way to do this, without pandas.to_datetime:

```
import datetime.datetime as dt
date_string_list = df.index.tolist()
datetime_list = [ dt.strptime(date_string_list[x], '%d/%m/%Y') for x in range(len(date_string_list)) ]
df.index=datetime_list 
```

but it's a bit messy. Any improvements welcome.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T22:50:08.567

有（隐藏的？）`dayfirst`论点[`to_datetime`](https://github.com/pydata/pandas/blob/master/pandas/tseries/tools.py#L51)：

```
In [23]: pd.to_datetime(df.index, dayfirst=True)
Out[23]:
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-12-26 00:00:00, 2013-01-10 00:00:00]
Length: 2, Freq: None, Timezone: None 
```

在 pandas 0.11（更高版本）中，您将能够使用该`format`参数：

```
In [24]: pd.to_datetime(df.index, format='%d/%m/%Y')
Out[24]:
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-12-26 00:00:00, 2013-01-10 00:00:00]
Length: 2, Freq: None, Timezone: None 
```

# android - ViewFlipper 在设备的灯熄灭时停止翻转

> ID：15929865
> 
> 赞同：1
> 
> 时间：2013-04-10T15:16:16.003
> 
> 标签：android, android-layout

我`ViewFlipper`用来翻转两个图像。一个图像是一颗小心脏，另一个是一颗大心脏，它们不断地翻转，看起来心脏在跳动。

一切都很好，除了一件事

当`Activity`包含`ViewFlipper`在前面并且`ViewFlipper`一旦我打电话给正在翻转时`startFlippling`，一段时间后如果我的设备的灯变暗然后关闭并且如果我立即按下主页/电源按钮`ViewFlipper`停止翻转。在这种情况下没有`onResume`或被`onPause`调用。

此外，当设备的灯关闭时，如果我按下电源按钮并输入我的密码解锁屏幕，则`ViewFlipper`工作正常。

这是我的布局代码，我已将其设置为`autoStart`，`false`因为基于我正在调用`startFlipping`的某些事件`ViewFlipper`

```
<ViewFlipper
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:autoStart="false"
    android:flipInterval="700"
    android:id="@+id/heartThrob"
    android:layout_centerHorizontal="true"
    android:layout_centerInParent="true"

 >

     <ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/small"
    android:id="@+id/heartOne"

     />

<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/big" 
    android:id="@+id/heartTwo"
 />

</ViewFlipper> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:30:21.157

现在仪式我已将`ViewFlipper`属性 设置`android:keepScreenOn`为`true`以便屏幕保留`ON`，但我仍在等待更好的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T11:56:11.450

如果我将 viewFlipper 的 startFlipping 与 setFlipInterval 方法一起使用，我也会遇到同样的问题。所以我通过使用处理程序为 viewFlipper 设置动画解决了这个问题。

顺便说一句，这个问题出现在 Galaxy Nexus 4.0.1 上，但不在 Galaxy Nexus 4.2.2 上。

我希望我的这部分代码对您有所帮助。

```
private Handler handler = new Handler();

private Runnable autoSwipeRunnable = new Runnable() {
    @Override
    public void run() {
        moveLeft();
    }
};

private void moveLeft() {
    if (mViewFlipper != null && mViewFlipper.getChildCount() > 1) {
        mViewFlipper.setInAnimation(animLeftIn);
        mViewFlipper.setOutAnimation(animLeftOut);

        mViewFlipper.showNext();

        startAutoCycle();           
    }
}

private void startAutoCycle() {
    if (mViewFlipper.getChildCount() > 1) {

        if (autoCycleInterval <= 0) {
            autoCycleInterval = 5000;           
        }

        handler.removeCallbacks(autoSwipeRunnable);
        handler.postDelayed(autoSwipeRunnable, autoCycleInterval);          
    }
} 
```

# c - 计算C中数组中元素的数量

> ID：15929869
> 
> 赞同：6
> 
> 时间：2013-04-10T15:16:28.320
> 
> 标签：c, arrays, static-array

将数组传递给函数后，如何获取 C 中整数数组中存在的元素数？以下代码不起作用。

```
size=sizeof(array)/sizeof(array[0]); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-10T15:23:33.893

在C中，你只能得到静态分配数组的大小，即

```
int array[10];
size = sizeof(array) / sizeof(int); 
```

会给10。

如果您的数组被声明或传递为`int* array`，则仅给定此指针就无法确定其大小。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-10T15:18:35.167

您很可能在将数组传递给的函数中执行此操作。
数组衰减为指向第一个元素的指针所以你不能在被调用的函数中这样做。

在调用函数之前执行此计算并将大小作为函数参数传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:38:31.937

你正在以错误的方式去做。我将尝试使用一个小代码示例进行解释。解释在代码注释中：

```
int array[100];
int size = sizeof(array) / sizeof(array[0]);  // size = 100, but we don't know how many has been assigned a value

// When an array is passed as a parameter it is always passed as a pointer.
// it doesn't matter if the parameter is declared as an array or as a pointer.
int getArraySize(int arr[100]) {  // This is the same as int getArraySize(int *arr) { 
  return sizeof(arr) / sizeof(arr[0]);  // This will always return 1
} 
```

正如您从上面的代码中看到的那样，您不应该使用`sizeof`来查找数组中有多少元素。正确的方法是使用一个（或两个）变量来跟踪大小。

```
const int MAXSIZE 100;
int array[MAXSIZE];
int size = 0; // In the beginning the array is empty.

addValue(array, &size, 32);   // Add the value 32 to the array

// size is now 1.

void addValue(int *arr, int *size, int value) {
    if (size < MAXSIZE) {
        arr[*size] = value;
        ++*size;
    } else {
        // Error! arr is already full!
    }
} 
```

# emacs - 使用 Emacs 从区域中的每一行中删除第一个 'x' 字符

> ID：15929872
> 
> 赞同：16
> 
> 时间：2013-04-10T15:16:34.713
> 
> 标签：emacs, character, line

我想删除区域中每一行的前 x 个字符。

是否有任何键绑定可以在不使用正则表达式的情况下执行此操作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-10T15:23:01.100

最好的方法是使用“矩形”命令系列。例如，标记区域的开始。转到该区域的末尾并将点放在*X*列。`kill-rectangle`使用运行命令`C-x r k`。

当然，这不仅限于删除行首的字符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T15:22:44.227

如果标记在第 0 列，则将点放在 x 列上并使用`kill-rectange`：

```
C-x r k runs the command kill-rectangle, which is an interactive
autoloaded Lisp function in `rect.el'.

It is bound to C-x r k.

(kill-rectangle START END &optional FILL)

Delete the region-rectangle and save it as the last killed one.

When called from a program the rectangle's corners are START and END.
You might prefer to use `delete-extract-rectangle' from a program. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T05:49:29.953

对于这些类型的工作，我真正喜欢的一个命令是多个光标的编辑行：

[http://www.youtube.com/watch?v=jNa3axo40qM](http://www.youtube.com/watch?v=jNa3axo40qM)

与（原始问题的最佳解决方案）相比，它是多余`kill-rectangle`的，但它是工具箱中的一个了不起的工具。绝对值得一看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T09:30:31.890

使用矩形命令选择所需的矩形

```
M-x rectangle-mark-mode 
```

然后使用命令

```
M-x kill-region 
```

# .net - 找不到类型或命名空间名称“BasePage”

> ID：15929874
> 
> 赞同：0
> 
> 时间：2013-04-10T15:16:37.727
> 
> 标签：.net, reference

在**VS 2012**中，我在 App_Code 目录中有文件 BasePage。该文件中没有错误。

尝试编译我的项目时，我得到：

> 找不到类型或命名空间名称“BasePage”（您是否缺少 using 指令或程序集引用？）

在这行代码上：

```
public partial class Contact : BasePage 
```

没有使用命名空间，并且两个文件都在同一个 asp.net Web 表单项目中。**在App_Code**的 root 和 BasePage 中生成错误的文件。

不知道如何解决这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:44:49.577

创建了空的 Web 应用程序并从没有项目的站点复制了文件。

首先在bin目录下添加对dll文件的引用（解决方案资源管理器=>右键引用并浏览）。

然后单击解决方案资源管理器中的“显示所有文件”按钮。右键单击 App_Code => 包含在项目中。

编译项目（需要在添加其他内容之前执行此操作）。

开始将其他文件夹添加到项目中，例如 UserControls 文件夹，并在每次添加它们时进行编译。

最后在root下添加了所有的aspx和cs文件并再次编译没有错误。

# c# - 排队调用异步方法

> ID：15929876
> 
> 赞同：6
> 
> 时间：2013-04-10T15:16:42.337
> 
> 标签：c#, queue, async-await

我有一个名为 Refresh 的异步操作。如果在第一次完成之前进行第二次刷新调用，我需要对其进行排队。这就是我所拥有的：

```
public async Task Refresh(RefreshArgs refreshArgs)
{
    await EnqueueRefreshTask(refreshArgs);
}

private Queue<RefreshArgs> refreshQueue =
    new Queue<RefreshArgs>();

private async Task EnqueueRefreshTask(RefreshArgs refreshArgs)
{
    refreshQueue.Enqueue(refreshArgs);

    await ProcessRefreshQueue();
}

private Task currentRefreshTask = null;

private async Task ProcessRefreshQueue()
{
    if ((currentRefreshTask == null) || (currentRefreshTask.IsCompleted))
    {
        if (refreshQueue.Count > 0)
        {
            var refreshArgs = refreshQueue.Dequeue();

            currentRefreshTask = DoRefresh(refreshArgs);
            await currentRefreshTask;

            await ProcessRefreshQueue();
        }           
    }
}

private async Task DoRefresh(RefreshArgs refreshArgs)
{
    // Lots of code here, including calls to a server that are executed with await.
    // Code outside my control may make another Refresh(args) call while this one is still processing.
    // I need this one to finish before processing the next.
} 
```

它有效，但我不确定这是使用任务执行此操作的最佳方式。有什么想法吗？

**更新：**

我尝试使用 ActionBlock：

```
public async Task Refresh(RefreshArgs refreshArgs)
{
    if (refreshActionBlock == null)
    {
        var executionDataflowBlockOptions = new ExecutionDataflowBlockOptions();
        executionDataflowBlockOptions.MaxMessagesPerTask = 1;
        executionDataflowBlockOptions.TaskScheduler = TaskScheduler.FromCurrentSynchronizationContext();

        refreshActionBlock = new ActionBlock<RefreshArgs>(args => DoRefresh(args), executionDataflowBlockOptions);
    }

    await refreshActionBlock.SendAsync(refreshArgs);
} 
```

这将 DoRefresh 排队，并允许它在 UI 线程中运行（我需要）。问题是 SendAsync 不等待 DoRefresh 的工作。

SendAsync：“异步向目标消息块提供消息，允许延迟”。我只在等待发送，而不是操作本身。

这样做不会按预期工作：

```
await Refresh(RefreshArgs.Something);
// other code goes here. It expects the first refresh to be finished.
await Refresh(RefreshArgs.SomethingElse);
// other code goes here. It expects the second refresh to be finished. 
```

ActionBlock 将对第二次刷新进行排队，但在刷新完成之前等待就结束了。我需要他们在 DoRefresh 的工作完成后返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:25:11.753

我认为最简单的方法是使用`AsyncLock`. 您可以[从 Stephen Cleary 的库 AsyncEx](http://nitoasyncex.codeplex.com/wikipage?title=AsyncLock&referringTitle=Documentation)中获得一个，或者您可以阅读[Stephen Toub 关于如何自己构建它的文章](http://blogs.msdn.com/b/pfxteam/archive/2012/02/12/10266988.aspx)。

如果你有`AsyncLock`，实现你的`Refresh()`很简单：

```
public async Task Refresh(RefreshArgs refreshArgs)
{
    using (await m_lock.LockAsync())
    {
        // do your async work here
    }
} 
```

这将确保`Refresh()`es 一个接一个地执行（而不是交错），并且`Task`返回 from`Refresh()`仅在`Refresh()`实际完成后完成。

您*可以*使用`ActionBlock`from TPL Dataflow 来做同样的事情，但您还需要使用`TaskCompletionSource`它，它会比`AsyncLock`版本复杂得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:33:55.143

你可以看看这些帖子，他们谈论异步协调（信号量、重置事件）和使用**任务**的排除：

*   [构建异步协调原语，第 1 部分：AsyncManualResetEvent](http://blogs.msdn.com/b/pfxteam/archive/2012/02/11/10266920.aspx)

*   [构建异步协调原语，第 2 部分：AsyncAutoResetEvent](http://blogs.msdn.com/b/pfxteam/archive/2012/02/11/10266923.aspx)

*   [构建异步协调原语，第 4 部分：AsyncBarrier](http://blogs.msdn.com/b/pfxteam/archive/2012/02/11/10266932.aspx)

*   [构建异步协调原语，第 5 部分：AsyncSemaphore](http://blogs.msdn.com/b/pfxteam/archive/2012/02/12/10266983.aspx)

[**编辑**：添加第 6 部分]

*   [构建异步协调原语，第 6 部分：AsyncLock](http://blogs.msdn.com/b/pfxteam/archive/2012/02/12/10266988.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-25T09:56:35.400

这很简单 :) 只有你需要使用“switch-case”！现在让我们向您展示如何使用小示例代码。示例场景：我们要下载 2 张图片，一张一张作为队列。

命名空间测试{

```
public partial class SampleOfQueue : Form
{

    public SampleOfQueue() { InitializeComponent(); }
    DBContext db = new DBContext();
    int Queue;

    private void btnStartApp_Click(object sender, EventArgs e)
    {
        Queue = 0;
        DownloadQueue();
    }

    private void DownloadQueue()
    {
        switch (Queue)
        {
            case 0:
                {
                    DownloadFile("http://images.forbes.com/media/lists/53/2009/tom-cruise.jpg", "Tom Cruise 1", "");
                    Queue += 1; break;
                }
            case 1:
                {
                    DownloadFile("https://upload.wikimedia.org/wikipedia/commons/6/69/Tom_Cruise_Collateral.jpg", "Tom Cruise 2", "");
                    Queue += 1; break;
                }
            case 2:
                {
                    // Other....
                    Queue += 1; break;
                }
            default: break;
        }

    }

    public void DownloadFile(string urlAddress, string ImageName, string ImageFarsiName)
    {
        WebClient webClient = new WebClient();
        webClient.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);

        Uri URL = urlAddress.StartsWith("http://", StringComparison.OrdinalIgnoreCase) ? new Uri(urlAddress) : new Uri(urlAddress);
        webClient.DownloadFileAsync(URL, "d:\\x.jpg");

    }

    private void Completed(object sender, AsyncCompletedEventArgs e)
    {
        DownloadQueue();
        if (Queue == 3) { MessageBox.Show("finish"); }
    }

} 
```

}

在 VS 2015 windows 窗体中使用 C# 4.6 测试。我自己的创新方法:) 我希望有用 <3 祝你好运。

# xml - Get specific nodes from XPathDocument

> ID：15929878
> 
> 赞同：1
> 
> 时间：2013-04-10T15:16:49.410
> 
> 标签：xml, vb.net, xpath

So,

I have this *XPathDocument* that I get back from a POST-request, and it basically looks like this:

```
<eExact xsi:noNamespaceSchemaLocation="eExact-XML.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">    
  <Messages>      
    <Message type="0">        
      <Topic code="GLTransactions" node="GLTransaction">          
        <Data keyAlt="138100138" />        
      </Topic>        
      <Date>2013-04-10T16:57:00</Date>        
      <Description> Topic [GLTransactions] Bestaat reeds - Boekstuknummer: 138100138, Dagboek: 81, Boekjaar: 2013</Description>      
    </Message>      
    <Message type="2">        
      <Topic code="GLTransactions" node="Account">          
        <Data keyAlt="577" />        
      </Topic>        
      <Date>2013-04-10T16:57:00</Date>        
      <Description>Bijgewerkt</Description>     
    </Message>      
    <Message type="2">        
      <Topic code="GLTransactions" node="GLTransaction">          
        <Data keyAlt="138100140" />        
      </Topic>        
      <Date>2013-04-10T16:57:00</Date>        
      <Description>Aangemaakt</Description>      
    </Message>    
  </Messages>  
</eExact> 
```

This is way too much information, as I only need the following things: For every **Message** where the **Topic node="GLTransaction"** *AND* **Message type=2**, I need the **Data KeyAlt** and the **Description**.

The programming language is VB.NET.

Thanks a lot guys!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:55:51.153

The XPath that you need to to use to select the appropriate `Message` elements is:

```
//Message[(Topic/@node='GLTransaction') and (@type='2')] 
```

For instance:

```
Dim doc As New XPathDocument("test.xml")
Dim nav As XPathNavigator = doc.CreateNavigator()
Dim iter As XPathNodeIterator = nav.Select("//Message[(Topic/@node='GLTransaction') and (@type='2')]")
While iter.MoveNext
    Dim keyAlt As String = iter.Current.SelectSingleNode("Topic/Data/@keyAlt").Value
    Dim description As String = iter.Current.SelectSingleNode("Description").Value
End While 
```

Or, by using `XmlDocument`:

```
Dim doc As New XmlDocument()
doc.Load("test.xml")
For Each message As XmlNode In doc.SelectNodes("//Message[(Topic/@node='GLTransaction') and (@type='2')]")
    Dim keyAlt As String = message.SelectSingleNode("Topic/Data/@keyAlt").InnerText
    Dim description As String = message.SelectSingleNode("Description").InnerText
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:57:02.290

我想通了，类型和节点的过滤可以通过一个简单的 if 语句来完成：

```
 Dim xml As New XPathDocument(stream)
    Dim nav As XPathNavigator = xml.CreateNavigator()
    Dim Messages As XPathNodeIterator = nav.Select("/eExact/Messages/Message")
    Dim exactID As String
    Dim topic As String
    Dim description As String

    Dim bErrorsFound As Boolean = False

    If Messages.Count > 0 Then
        While Messages.MoveNext()
            nav = Messages.Current
            errorCode = nav.GetAttribute("type", String.Empty)

            topic = nav.Evaluate("string(Topic/@node)")
            exactID = nav.Evaluate("string(Topic/Data/@keyAlt)")
            description = nav.Evaluate("string(Description)")

        End While
    End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:57:33.860

这应该这样做：

```
' A class to contain both values
Public Class Obj
    Public Property DataKeyAlt As String
    Public Property Description As String
End Class

' A method to parse the XML and return your data
Public Function GetData(Xml as String) as IEnumerable(Of Obj)
    Dim doc As XDocument = XDocument.Parse(xml)

    return From el As XElement In doc...<Message> _
           Where el...<Topic>.First.@node = "GLTransaction" AndAlso el.@type = "2" _
           Select New Obj With { _
                   .DataKeyAlt = el...<Data>.@keyAlt, _
                   .Description = el...<Description>.Value}
End Function 
```

# c# - MS Dynamics CRM online 2011 - Authentication issues

> ID：15929879
> 
> 赞同：2
> 
> 时间：2013-04-10T15:16:49.980
> 
> 标签：c#, .net, dynamics-crm-2011, crm

I am a total newbie with dynamics crm online (2011), and although I have been working through the SDK sample code, I am trying to find the simplest way to perform a basic authenticated connection to our online Dynamics CRM service, and push some very basic data to a custom entity/extension I have created.

![code snippet](https://i.stack.imgur.com/F3kFg.png)

Hopefully you can see from the above code snippet (sensitive data blurred), I am probably trying to circumvent the authentication process? The above code example was based a little on some of the code samples in the CRM SDK, and also from [a code project example](http://www.codeproject.com/Articles/559599/Integrating-your-applications-with-MS-CRM-Online-2). I don't know if the code above would even work? actually it seems to try, and only when the "serviceProxy.Create" is executed do I get an authentication error.

I have also managed to navigate out of the corporate firewall with the following addition to my app.config file:

```
<system.net>
            <defaultProxy useDefaultCredentials=”true”&gt;
                <proxy usesystemdefault="true"/>   
            </defaultProxy>
</system.net> 
```

Again, not sure if there is a very basic way to connect? or should I really fall back to the SDK helper files?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T15:38:34.773

这是连接到 CRM Online 的最简单方法，您只需添加参考`Microsoft.Xrm.Sdk.Client`和`Microsoft.Xrm.Client.Services`

```
CrmConnection crmConnection = CrmConnection.Parse("Url=https://XXX.crm.dynamics.com; Username=user@domain.onmicrosoft.com; Password=passwordhere;");
OrganizationService service = new OrganizationService(crmConnection);

Entity account = new Entity("account");
account ["name"] = "Test Account";

Guid accountId = service.Create(account); 
```

请参阅此 msdn 文章以创建正确的连接字符串

[与 Microsoft Dynamics CRM 的简化连接](http://msdn.microsoft.com/en-us/library/gg695810.aspx)

# asp.net - Properties of WebUserControl are null in DataBind override

> ID：15929880
> 
> 赞同：2
> 
> 时间：2013-04-10T15:16:51.073
> 
> 标签：asp.net

I have WebUserControl with DataBind override:

```
public partial class WebUserControl1 : System.Web.UI.UserControl
{
    public object DataSource { get; set; }

    public string Text { get; set; }

    protected void Page_Load(object sender, EventArgs e)
    {
    }

    public override void DataBind()
    {
        // *** there when called, properties are null, why? ***
        repeater2.DataSource = DataSource;
        repeater2.DataBind();
    }
} 
```

This control is in repeater with declarative bounded properties:

```
<asp:Repeater ID="repeater" runat="server">
    <ItemTemplate>
        <WebUserControl1 runat="server" DataSource='<%# DataBinder.Eval(Container.DataItem, "levels") %>' Text='<%# DataBinder.Eval(Container.DataItem, "Text") %>' />
    </ItemTemplate>
</asp:Repeater> 
```

Now when i call DataBind() on repeater:

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ... data query
        repeater.DataSource = items;
        repeater.DataBind();
    }
} 
```

in overriden control's DataBind() method i don't have properly setted properties DataSource and Text, they are null, why?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:17:51.790

如果您只有一个中继器控件，则在**父中继器的**[Repeater.ItemDataBound 事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)中绑定该**子中继器**控件`WebUserControl1`会更容易。

 ****这是样本 -

![在此处输入图像描述](https://i.stack.imgur.com/SUSB8.png)

## ASPX

```
<asp:Repeater ID="ParentRepeater" runat="server" OnItemDataBound="ParentRepeater_ItemDataBound">
    <ItemTemplate>
        <asp:Label runat="server" ID="StreetLabel" /><br/>
        <asp:Repeater ID="ChildRepeater" runat="server">
            <ItemTemplate>
                <asp:Label runat="server" ID="FirstNameLabel" />
                <asp:Label runat="server" ID="LastNameLabel" />
            </ItemTemplate>
        </asp:Repeater><hr/>
    </ItemTemplate>
</asp:Repeater> 
```

## 代码背后

```
public class Address
{
    public int Id { get; set; }
    public string Street { get; set; }
    public List<User> Users { get; set; }
}

public class User
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        ParentRepeater.DataSource = new List<Address>
            {
                new Address
                    {
                        Id = 1,
                        Street = "1st Street",
                        Users = new List<User>()
                            {
                                new User {Id = 1, FirstName = "John", LastName = "Doe"},
                                new User {Id = 1, FirstName = "Marry", LastName = "Doe"}
                            }
                    },
                    new Address
                    {
                        Id = 2,
                        Street = "2nd Street",
                        Users = new List<User>()
                            {
                                new User {Id = 1, FirstName = "Eric", LastName = "Newton"},
                                new User {Id = 1, FirstName = "John", LastName = "Newton"}
                            }
                    }

            };
        ParentRepeater.DataBind();
    }
}

protected void ParentRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        var address = e.Item.DataItem as Address;

        var streetLabel = e.Item.FindControl("StreetLabel") as Label;
        streetLabel.Text = address.Street;

        var repeater = e.Item.FindControl("ChildRepeater") as Repeater;
        repeater.ItemDataBound += ChildRepeater_ItemDataBound;

        repeater.DataSource = address.Users;
        repeater.DataBind();
    }
}

protected void ChildRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        var user = e.Item.DataItem as User;

        var firstNameLabel = e.Item.FindControl("FirstNameLabel") as Label;
        firstNameLabel.Text = user.FirstName;

        var lastNameLabel = e.Item.FindControl("LastNameLabel") as Label;
        lastNameLabel.Text = user.LastName;
    }
} 
```

## 原始问题的解决方案

删除**public override void DataBind()**事件并在**PreRender 事件**中绑定**repeaters2**。

 **```
public partial class WebUserControl1 : System.Web.UI.UserControl
{
  protected override void OnPreRender(EventArgs e)
  {
    repeater2.DataSource = DataSource;
    repeater2.DataBind();

    base.OnPreRender(e);
  }
} 
```******

# bash - Linux bash 脚本告诉我文件的类型

> ID：15929885
> 
> 赞同：1
> 
> 时间：2013-04-10T15:17:05.597
> 
> 标签：bash, file, types

我正在编写一个 bash 脚本，我想检查文件的类型。假设我有一个包含不同文件的目录。我想检查每个文件，看看它是什么类型。

我需要一些命令来告诉我：“好的，这个文件是一个目录”或“这个文件是管道”或“这个文件是链接”等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:24:40.220

您可以像这样测试文件：

```
if [ -f $file ]
then
   echo "File is an ordinary file"
else
   echo "This is special file"
fi

if [ -d $file ]
then
   echo "File is a directory"
else
   echo "File is not a directory"
fi

if [ -s $file ]
then
   echo "File size is zero"
else
   echo "File size is not zero"
fi

if [ -e $file ]
then
   echo "File exists"
else
   echo "File does not exist"
fi

if [ -L $file ]
then
   echo "File is a link"
else
   echo "File is not a link"
fi 
```

查看更多[文件测试操作符](http://tldp.org/LDP/abs/html/fto.html)（感谢 birryree 提供的链接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:23:38.443

```
ls -la 
```

告诉你所有关于它们的信息，你只需要检查第一个字符。例如：

```
lrwxrwxrwx  1 kent kent  12 Apr  8 18:54 imlink -> /fpath/foo
-rw-r--r--  1 kent kent 242 Apr 10 16:40 file
drwxr-xr-x  2 kent kent  40 Apr 10 17:21 d/ 
```

在上面的例子中

```
l: link
-: file
d: dir 
```

你也可以写这个 awk 行：

```
ls -la | awk '{t=(/^d/?"Directory":/^-/?"File":/^l/?"Link":"unknown");print $NF "---"  t}' 
```

它会输出如下内容：

```
d/---Directory
file---File
./.gitignore---Link
outputaa---File 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:21:55.600

您可能还想检查[文件](http://www.linuxcommand.org/man_pages/file1.html)命令。

# asp.net-mvc-3 - Dropdown list in MVC3

> ID：15929889
> 
> 赞同：0
> 
> 时间：2013-04-10T15:17:35.777
> 
> 标签：asp.net-mvc-3

I have a form that wanna to select category and tag from drop down list and bind it to a post , this is my ViewModel:

```
public class PostViewModel
    {
        public IList<Category> Category { get; set; }
        public IList<Tag> Tag { get; set; }
    } 
```

and this is my get action :

```
 public ActionResult Add()
        {
            ViewBag.CategoryList = new SelectList(_categoryRepository.GetAllCategory());
            ViewBag.TagList = new SelectList(_tagRepository.GetAllTag());
            return View();
        } 
```

now how can I get the Id dropdownlst to send it to the Post action?? :

```
 <div>
        @Html.LabelFor(post => post.Category)
        @Html.DropDownListFor   ????
        @Html.ValidationMessageFor(post => post.Category)
    </div> 
```

I tried this one it it didn't work

```
<div>
            @Html.LabelFor(post => post.Category)
            @Html.DropDownListFor(post => post.Category, ViewBag.CategoryList as SelectList, "--- Select Category ---")
            @Html.ValidationMessageFor(post => post.Category)
        </div> 
```

please give me a solution about this ,thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:24:45.657

**Try to avoid dynamic stuff like ViewBag and ViewData.** Use strongly typed views.

ViewModel is just a POCO class which we will use to transfer data between your view and the action method. It will be specific to the view.

You have a viewmodel but you are not using it properly. Add 2 more properties to your viewmodel for getting the selected item from the dropdown. Also i changed the name of your proprties to pluralized for (`Categories` ,`Tags`) because they are for storing a collection.

```
public class PostViewModel
{
    public List<SelectListItem> Categories{ get; set; }
    public List<SelectListItem> Tags { get; set; }

    public int SelectedCategory { set;get;}
    public int SelectedTag { set;get;}
} 
```

Now in your `GET` Action method, create an object of your view model and set the collection properties and then send that object to your view using `View` method.

```
public ActionResult Add()
{
    var vm=new PostViewModel();
    vm.Categories= GetAllCategories();
    vm.Tags= GetAllTags();
    return View(vm);
} 
```

Assuming `GetAllCategories` and `GetAllTags` are 2 methods which returns a collection of `SelectListItem` for categories and tags.

```
public List<SelectListItem> GetAllCategories()
{
  List<SelectListItem> categoryList=new List<SelectListItem>();
  categoryList.Add(new SelectListItem { Text = "Sample", Value = "1" });
  // TO DO : Read from your dB and fill here instead of hardcoding

  return categoryList;
} 
```

and in your view,

```
@model PostViewModel
@using(Html.BeginForm())
{
    @Html.DropDownListFor(x => x.SelectedCategory, 
                       new SelectList(Model.Categories,"Value","Text"), "Select")

    @Html.DropDownListFor(x => x.SelectedTag, 
                       new SelectList(Model.Tags,"Value","Text"), "Select")

  <input type="submit" value="save" />

} 
```

And in your HttpPost action method, you can get the selected items in the 2 properties we added

```
[HttpPost]
public ActionResult Add(PostViewModel model)
{
  if(ModelState.IsValid)
  {
     //check model.SelectedCategory and model.SelectedTag
     //save and redirect
  }
  //to do :reload the dropdown again.
  return View(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:23:32.423

you were close:

```
public class PostViewModel
{
    public int CategoryId { get; set; } // <-- Altered
    public int TagId { get; set; } // <-- Altered
}

<div>
    @Html.LabelFor(post => post.Category)
    @Html.DropDownListFor(post => post.CategoryId, 
                                  ViewBag.CategoryList as IEnumerable<SelectListItem>, 
                                  "--- Select Category ---")
    @Html.ValidationMessageFor(post => post.Category)
</div> 
```

# android - Edittext causes stackoverflow

> ID：15929894
> 
> 赞同：1
> 
> 时间：2013-04-10T15:17:53.083
> 
> 标签：android, listview, android-edittext

below is my textwatcher class I am trying to change the textview content of my list based on the changes from the edittext of the list.

```
 public class MtQtyWatcher implements TextWatcher {
            View v;
            public MtQtyWatcher(View v){
                this.v = v;         
            }

            public void afterTextChanged(Editable s) {
                String qty = s.toString().trim();
                int quantity = qty.equals("")?0:Integer.parseInt(qty);
                EditText edtQty = (EditText)v.findViewById(R.id.qty);
                Item item = (Item)edtQty.getTag();

                if(item.getQty()!=quantity){
                    edtQty.setText(qty);
                    item.setQty(quantity);
                    float newRate = quantity * (item.getRate());
                    item.setAmt(newRate);
                    TextView txtAmt = (TextView) v.findViewById(R.id.amt);  
                    txtAmt.setText(""+item.getAmt());
                }
            }

            public void beforeTextChanged(CharSequence s, int start, int count,int after) {}

            public void onTextChanged(CharSequence s, int start, int before,int count) {}

        } 
```

This is the following stacktrace

```
04-10 15:00:13.179: E/AndroidRuntime(24454): FATAL EXCEPTION: main 
04-10 15:00:13.179: E/AndroidRuntime(24454): java.lang.StackOverflowError 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.text.SpannableStringBuilder.getSpans(SpannableStringBuilder.java:783) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.text.method.ReplacementTransformationMethod$SpannedReplacementCharSequence.getSpans(ReplacementTransformationMethod.java:184) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.text.Styled.drawUniformRun(Styled.java:67) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.text.Styled.drawDirectionalRun(Styled.java:322) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.text.Styled.measureText(Styled.java:454) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.text.Layout.measureText(Layout.java:1971) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.text.Layout.getLineMax(Layout.java:912) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.text.Layout.getLineMax(Layout.java:886) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.text.Layout.getHorizontal(Layout.java:742) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.text.Layout.getHorizontal(Layout.java:703) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.text.Layout.getPrimaryHorizontal(Layout.java:688) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.getFocusedRect(TextView.java:4522) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.view.FocusFinder.findNextFocus(FocusFinder.java:72)
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.view.ViewGroup.focusSearch(ViewGroup.java:476) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.view.ViewGroup.focusSearch(ViewGroup.java:478) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.view.ViewGroup.focusSearch(ViewGroup.java:478) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.view.ViewGroup.focusSearch(ViewGroup.java:478) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.view.ViewGroup.focusSearch(ViewGroup.java:478) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.view.ViewGroup.focusSearch(ViewGroup.java:478) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.view.ViewGroup.focusSearch(ViewGroup.java:478) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.view.View.focusSearch(View.java:3494) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.onCreateInputConnection(TextView.java:4922) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.view.inputmethod.InputMethodManager.startInputInner(InputMethodManager.java:945) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.view.inputmethod.InputMethodManager.restartInput(InputMethodManager.java:900) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2734) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2676) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.EditText.setText(EditText.java:178) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2651) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at com.eshopping.u.ItemList$MtQtyWatcher.afterTextChanged(ItemList.java:144) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.sendAfterTextChanged(TextView.java:6724) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2822) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2676) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.EditText.setText(EditText.java:178) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2651) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at com.eshopping.u.ItemList$MtQtyWatcher.afterTextChanged(ItemList.java:144) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.sendAfterTextChanged(TextView.java:6724) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2822) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2676) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.EditText.setText(EditText.java:178) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2651) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at com.eshopping.u.ItemList$MtQtyWatcher.afterTextChanged(ItemList.java:144) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.sendAfterTextChanged(TextView.java:6724) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2822) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2676) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.EditText.setText(EditText.java:178) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2651) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at com.eshopping.u.ItemList$MtQtyWatcher.afterTextChanged(ItemList.java:144) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.sendAfterTextChanged(TextView.java:6724) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2822) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2676) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.EditText.setText(EditText.java:178) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2651) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at com.eshopping.u.ItemList$MtQtyWatcher.afterTextChanged(ItemList.java:144) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.sendAfterTextChanged(TextView.java:6724) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2822) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2676) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.EditText.setText(EditText.java:178) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2651) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at com.eshopping.u.ItemList$MtQtyWatcher.afterTextChanged(ItemList.java:144) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.sendAfterTextChanged(TextView.java:6724) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2822) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2676) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.EditText.setText(EditText.java:178) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    at android.widget.TextView.setText(TextView.java:2651) 
04-10 15:00:13.179: E/AndroidRuntime(24454):    a 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:49:11.070

## I found a solution by removing the code from the afterTextChanged and adding the same to the onTextChanged

```
public class MtQtyWatcher implements TextWatcher {
        View view ;
        public MtQtyWatcher(View view ){
            this.view = view;
        }
        public void afterTextChanged(Editable s) {}
        public void beforeTextChanged(CharSequence s, int start, int count,int after) {}
        public void onTextChanged(CharSequence s, int start, int before,int count) {            
            if(s.length()>0){
                try{
                    String strQty = s.toString().trim();
                    int quantity = Integer.parseInt(strQty);
                    EditText txtQty = (EditText) view.findViewById(R.id.qty);
                    Item item = (Item)txtQty.getTag();                  
                    if (item.getQty()!=quantity){
                        item.setQty(quantity);
                        TextView txtAmt = (TextView) view.findViewById(R.id.amt);
                        float amt = quantity * (item.getRate());
                        item.setAmt(amt);
                        txtAmt.setText(String.valueOf(amt));
                    }
                }catch(Exception e){
                    Log.e(Tag,"onTextChnaged "+e);
                    e.printStackTrace();
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:23:11.053

在我看来，观察者正在被其中一个 setTexts 递归调用。

解决这个问题的一种方法是添加一个布尔值来停止重新进入。

```
public class MtQtyWatcher implements TextWatcher {

    boolean running = false;
    View v;

    public MtQtyWatcher(View v){
        this.v = v;         
    }

    public void afterTextChanged(Editable s) {
        if(!running){
            running = true;
            // add your stuff here
            running = false;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:22:31.533

您的 TextWatcher 是否附加到 EditText edtQty？如果是这样，您将获得无限递归，因为您正在修改 EditText 中的文本，该文本将再次调用 afterTextChanged。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T15:27:58.703

TextWatcher 中的 setText 导致无限堆栈循环。

我建议改用 InputFilter。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-11T14:51:08.370

您也可以在调用 setText 方法之前从 edittext 中删除 textwatcher；在 settext 之后，您需要再次添加 textwatcher。

# excel - RemoveDuplicates gives 1004 error

> ID：15929896
> 
> 赞同：3
> 
> 时间：2013-04-10T15:17:56.560
> 
> 标签：excel, vba, duplicates

I want to remove duplicates from my selection, but this line gives me a 1004 error:

```
ActiveSheet.Range("B3", Range("B3").End(xlDown)).RemoveDuplicates Columns:=2, Header:=xlNo 
```

How do I fix this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:24:35.063

将您的行更改为：

```
ActiveSheet.Range(range("B3"), Range("B3").End(xlDown)).RemoveDuplicates Columns:=1, Header:=xlNo 
```

或者，如果你真的有 2 列：

```
ActiveSheet.Range(range("B3"), Range("C3").End(xlDown)).RemoveDuplicates Columns:=2, Header:=xlNo 
```

# wordpress - htaccess 重定向不起作用

> ID：15929899
> 
> 赞同：0
> 
> 时间：2013-04-10T15:17:56.910
> 
> 标签：wordpress, .htaccess

我正在尝试重定向，以便当用户访问我的网站时......

```
www.mysite.com/wp-admin/wp-login.php?registration=disabled 
```

他们被重定向到...

```
www.mysite.com/custompage 
```

我无法在 Wordpress 本身中找到一种方法，所以我认为 htaccess 是要走的路吗？我已经尝试了以下......

RewriteCond %{QUERY_STRING} ^?registration=disabled$ [NC] RewriteRule ^wordpress/wp-login.php$ [http://www.mysite.com/custompage](http://www.mysite.com/custompage) [L,R=301,NC]

但它不起作用，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:25:05.300

尝试在您的*.htaccess*文件中使用此代码：

```
# once per htaccess file
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{QUERY_STRING} registration=disabled
RewriteRule ^wp-admin/wp-login.php /custompage [R] 
```

# c# - Sharepoint list item throws null error

> ID：15929903
> 
> 赞同：0
> 
> 时间：2013-04-10T15:18:08.437
> 
> 标签：c#, .net, sharepoint, sharepoint-2010, sharepoint-2007

I have am iterating through a list of SharePoint list items . A couple of items do not have data so throw the null exception.

I used

```
 if (!string.IsNullOrEmpty(xt["ows_LinkTitle"].ToString()))
    {
       Entity.DefectType = xt["ows_LinkTitle"].ToString();    
    } 
```

but an error still occurs.

I also tried

```
if(xt["ows_LinkTitle"].ToString()!= null)
   {
       Entity.DefectType = xt["ows_LinkTitle"].ToString();
   } 
```

I could put a try catch block around it but I don't want to do it for each and every line.

Is there any way to check the sharepoint item value without throwing an error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:21:41.017

尝试使用显式转换：

```
Entity.DefectType = (string)xt["ows_LinkTitle"]; 
```

`null`如果您想在分配值之前检查 a

```
if(xt["ows_LinkTitle"] != null) 
```

as `.ToString()`on a`null`是异常的原因。

# mysql - SQL 选择具有多个共同值的行

> ID：15929909
> 
> 赞同：3
> 
> 时间：2013-04-10T15:18:14.750
> 
> 标签：mysql, sql

我在根据条件选择一些文章行时遇到问题。

这是我的问题：我所有的文章都可以附加多个“标签”，所以我的结构如下所示：

```
articles       articles_tags       tags
¯¯¯¯¯¯¯¯       ¯¯¯¯¯¯¯¯¯¯¯¯¯       ¯¯¯¯
  id           article_id          id
  title        tag_id              name
  content
  [...] 
```

现在我想选择所有具有标签 2 和 3 的文章。我试过这个：

```
SELECT * FROM articles a
JOIN articles_tags at
    ON (a.id = at.article_id)
WHERE
    at.tag_id IN(2, 3)
GROUP BY article_id 
```

但这将选择所有具有至少标签 ID #2 或 #3 的文章（毕竟似乎是逻辑）

是否有任何技巧或东西可以仅获取具有已定义标签 ID 列表的文章？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:19:39.730

这个问题叫做`Relational Division`

```
SELECT  a.*
FROM    articles a
        INNER JOIN
        (
            SELECT at.article_id 
            FROM   articles a
                   INNER JOIN articles_tags at
                      ON a.id = at.article_id
            WHERE  at.tag_id IN(2, 3)
            GROUP  BY at.article_id
            HAVING COUNT(*) = 2
        ) b ON a.id = b.article_id 
```

*   [关系划分的SQL](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)

# c - 如何轻松地将小时和分钟添加到 gmtime

> ID：15929915
> 
> 赞同：0
> 
> 时间：2013-04-10T15:18:31.807
> 
> 标签：c, linux, time.h

是否有预定义的方法可以将小时和分钟添加到通过`gmtime`获得的`time.h`？我想写一个程序来显示各个国家的时间，所以我必须自己写逻辑还是有预定义的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:28:53.120

如果您有时区名称（如`Europe/Helsinki`or`US/Eastern`或`MST`），则有一个非常简单的 POSIX 界面。

它确实为整个进程应用了时区，因此如果您使用线程，则需要包装您的日期/时间函数以避免并发日期/时间访问，除非它们使用相同的时区，例如使用互斥锁。此处显示的示例不是线程安全的，以使示例更易于理解。

首先，将环境变量设置为`TZ`以冒号为前缀的时区名称。这是 POSIX 系统中用于为单个进程设置时区的方法（并影响进程中的所有线程）。例如，

```
setenv("TZ", ":Europe/Helsinki", 1); 
```

设置赫尔辛基时区。详情请参阅[`man 3 setenv`](http://man7.org/linux/man-pages/man3/setenv.3.html)。仅此还不够；您还必须通过调用来告诉 C 库更新当前时区

```
tzset(); 
```

然后，您可以检查全局变量`tzname[0]`（应包含`Europe`）和`tzname[1]`（应包含`Helsinki`）以查看实际设置的时区。详情请参阅[`man 3 timezone`](http://man7.org/linux/man-pages/man3/timezone.3.html)；例如，您可以使用 POSIX 时区定义语法来指定自定义时区。

在上述两行之后，无论何时使用[`localtime()`](http://man7.org/linux/man-pages/man3/localtime.3.html)或`localtime_r()`，都会应用选定的时区。就这么容易。

* * *

如果您还希望更改时间戳的格式以符合特定的语言环境，您可以通过以下方式设置语言环境（例如，to `fi_FI.utf8`）

```
setlocale(LC_TIME, "fi_FI.utf8"); 
```

请注意，正如[`man 3 setlocale`](http://man7.org/linux/man-pages/man3/setlocale.3.html)手册页所说，语言环境必须采用规范格式，短格式之类的`fi`将不起作用。然后，使用例如

```
time_t     now_time;
struct tm *now_tm;
char      *format;
char       buffer[256];
size_t     length;

time(&now_time);
now_tm = localtime(&now_time);
if (!now_tm) {
    /* Error, cannot get local time corresponding to now_time! */
    return -1;
}

format = nl_langinfo(D_T_FMT);
if (!format || !*format) {
    /* Error, cannot get date-time formatting string for this locale */
    return -1;
}

/* Note: both now_tm and format point to static buffers,
 *       and they will be overwritten by subsequent calls.
*/

length = strftime(buffer, sizeof buffer, format, now_tm);
if (length < 1 || length >= sizeof buffer) {
    /* Error in locale configuration; cannot generate date-time string. */
    return -1;
} 
```

此时`buffer`包含芬兰语（或上次`setlocale(LC_TIME, locale)`通话中设置的任何语言环境）、芬兰时区（或上次`setenv("TZ", ":Europe/Helsinki", 1); tzset();`通话中设置的任何时区）的日期和时间。

（最后的`length`检查向后兼容一些非常旧的系统，`sizeof buffer`如果缓冲区太小，则返回。较新的系统在缓冲区足够大时返回，但我希望 256 字节足以满足任何时间和日期语。）

我想指出这一点，因为在类似 POSIX 的系统中，语言环境（语言和格式）和时区是完全分开的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T16:00:48.073

没有标准化的功能可以完成必要的工作。但是，您可以通过修改`struct tm`. 该结构包含许多成员；一个小时，一个分钟等。一旦您更新了结构的成员，您应该调用`mktime`以规范化值。

例如，如果分钟已设置为 55，而您添加 10，则它们将设置为 65。呼叫`mktime`会将分钟设置为 5，并相应地更新小时和可能的其他成员。

例如，添加十分钟如下所示：

```
struct tm *t = ...
t->tm_min += 10;
mktime(t); 
```

# c - 链接 AIX 上的共享库

> ID：15929917
> 
> 赞同：1
> 
> 时间：2013-04-10T15:18:33.357
> 
> 标签：c, gcc, linker, aix, apr

我正在尝试使用 gcc/libtool 链接 AIX 5.3 上的共享库 (apr)。

编译器的输出如下（为简单起见，删除了一些不相关的标志）：

```
libtool: link: gcc  -o test test.o  -L/opt/freeware/lib -lapr-1 -lpthread -Wl,-blibpath:/opt/freeware lib:/usr/lib:/lib 
```

然后我检查了生成的二进制文件使用了哪些共享库：

```
$ ldd test 
test needs:
     /usr/lib/libc.a(shr.o)
     /usr/lib/libpthread.a(shr_xpg5.o)
     /unix
     /usr/lib/libcrypt.a(shr.o)
     /usr/lib/libpthreads.a(shr_comm.o) 
```

请注意，此处缺少“libapr-1”，尽管二进制文件中存在符号（使用 nm 验证），这表明它是静态链接的。

对于简单的程序来说，这不是一个大问题。不幸的是，我的代码使用动态可加载模块。主程序调用 apr_initialize 在库中设置一个静态变量“apr_pools_initialized”。然后可加载模块尝试使用 apr_pool_create 来检查初始化是否已经执行。由于它们有自己的静态链接 apr，因此静态变量“apr_pools_initialized”与主程序初始化的内存位置不同。这使得静态链接的二进制文件不起作用。

apr 库是使用预编译的二进制 rpm（apr 和 apr-devel）安装的。相关的库文件在那里：

```
# rpm -ql apr|grep \\.so$
/opt/freeware/lib/libapr-1.so
/opt/freeware/lib64/libapr-1.so
/usr/lib/libapr-1.so

# rpm -ql apr-devel|grep \\.a$
/opt/freeware/lib/libapr-1.a
/opt/freeware/lib64/libapr-1.a
/usr/lib/libapr-1.a
/usr/lib64/libapr-1.a
/usr/lib64/libapr-1.so 
```

我试图删除“.a”文件，希望链接器别无选择，只能使用“.so”并动态链接它，不幸的是 AIX 不同，这不起作用。关于这个主题，我找到[了这个](https://stackoverflow.com/questions/1580472/aix-does-not-install-shared-lib/13091921#13091921)答案和[另一个 libtool 问题](http://www.mail-archive.com/libtool@gnu.org/msg12995.html)，它们提供了一些见解。

问题是：**如何将它动态链接到我的二进制文件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:59:00.300

实际上，引用的链接包含此问题的解决方案，即：

```
-Wl,-brtl 
```

添加这些 LDFLAGS 解决了链接问题。

# nhibernate - Fluent NHibernate - 与 Nullable 字段的 1:1 关系

> ID：15929923
> 
> 赞同：1
> 
> 时间：2013-04-10T15:18:49.673
> 
> 标签：nhibernate, fluent-nhibernate

给定以下模型，我希望能够输入一个新的`WriteOffApprovalUser`并让该`Employee`字段为空。这是 1:1 或空关系。

```
public class WriteOffApprovalUser
{
    public virtual string UserName { get; set; }
    public virtual Employee Employee { get; set; }
}

public class Employee
{
    public virtual string EmployeeID { get; set; }
    public virtual string EmployeeStatusCode { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual string JobTitle { get; set; }
    public virtual string Division { get; set; }
    public virtual string Department { get; set; }
    public virtual string Location { get; set; }
    public virtual string City { get; set; }
    public virtual string DeskLocation { get; set; }
    public virtual string MailID { get; set; }
    public virtual string Phone { get; set; }
    public virtual string PreferredName { get; set; }
    public virtual string Fax { get; set; }
    public virtual string SecCode { get; set; }
    public virtual string SupervisorID { get; set; }
    public virtual string UserId { get; set; }
} 
```

**类图**

```
public class WriteOffApprovalUserMap : ClassMap<WriteOffApprovalUser>
{
    public WriteOffApprovalUserMap()
    {
        Table("WRITEOFF_APPROVAL_USER");

        Id(x => x.UserName).Column("USER_NAME");

        //Map(x => x.Employee).Nullable();

        HasOne(x => x.Employee)
            .Class<Employee>()
            .Constrained()
            .Cascade.SaveUpdate()
            .PropertyRef("UserId");
    }
}

public class EmployeeMap : ClassMap<Employee>
{
    public EmployeeMap()
    {
        Table("ADP_EMPLOYEE");

        Id(x => x.EmployeeID).Column("EMPLID").GeneratedBy.Native("");

        Map(x => x.FirstName).Column("FIRST_NAME");
        Map(x => x.LastName).Column("LAST_NAME");
        Map(x => x.PreferredName).Column("PREFERRED_NAME");
        Map(x => x.UserId).Column("USER_ID");
    }
} 
```

**查询/保存**

```
using (var session = SessionProvider.GetSession())
        {
            using (var tx = session.BeginTransaction())
            {
                var user = new WriteOffApprovalUser() { UserName = "SAMSTR" };

                session.Save(user);

                tx.Commit();
            }
        } 
```

这抱怨那`Employee`是空的。如何指定 Employee 可以为空？

另外，所有`Id`字段都必须是完整的吗？我们桌子上的很多键都是字符串。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T15:30:04.917

首先，如果您将其设置为 1:1，则它不应为 NULL，因为它不是正确的设计。

但这里有一个如何做到这一点的例子：

***1) 一种方式***

```
HasOne(x => x.Employee)
            .Class<Employee>().Nullable().NotFound.Ignore().PropertyRef("UserId"); 
```

***2) 第二种方式***

```
References(x => x.Category).Column("UserId").Nullable().NotFound.Ignore(); 
```

# c# - Detecting sprites in C#-XNA

> ID：15929924
> 
> 赞同：0
> 
> 时间：2013-04-10T15:18:52.360
> 
> 标签：c#, xna, sprite

I'm developing a game of uno in C# & XNA. At a certain stage of the game, I need to detect which card is at certain specific position. So how can we detect which sprite is at a certain position by passing the screen co-ordinates??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:39:21.513

将精灵位置存储在某个变量中，并将屏幕坐标与该变量进行比较。由于精灵覆盖了某个区域，您可能不仅要存储它的原点，还要存储它的高度和宽度；一个矩形会很好地完成这项工作。

例子：

```
class Game1
{
    List<Rectangle> cardSpriteAreas; // this is where you store the card's areas

    public void Update()
    {
         Point position = GetInterestingPosition(); // this is the point you want to check
         foreach(var spriteArea in cardSpriteAreas)
         {
              if (spriteArea.Contains(position))
              {
                   // position is contained within the card's area!
              }
         }
    }
} 
```

# mysql - 非常高级的 sql 查询的问题

> ID：15929926
> 
> 赞同：2
> 
> 时间：2013-04-10T15:19:01.553
> 
> 标签：mysql, sql, dynamicquery

我需要在 SQL 中进行高级选择，但我被卡住了。

我有下表：

```
id | user_id | position | value
1  |   1     |    1     |   1
1  |   1     |    2     |   1
1  |   1     |    3     |   3
1  |   2     |    1     |   2
1  |   2     |    2     |   2
1  |   2     |    3     |   2
1  |   3     |    1     |   3
1  |   3     |    2     |   2
1  |   3     |    3     |   1 
```

我需要一个查询，它给我一个按如下顺序排列的结果集：

1.  每个用户的总和（用户 1：5，用户 2：6，用户 3：6）
2.  每个用户的位置 3 的值（用户 1：3，用户 2：2，用户 3：1）
3.  Val for pos 3 + val for pos 2 每个用户（用户 1：4，用户 2：4，用户 3：4）
4.  位置 3 的值 + 位置 2 的值 + 位置 1 的值 每个用户（用户 1：5，用户 2：6，用户 3：6）

这只是一个例子，表实际上可以包含更多的位置，所以我需要一个没有硬编码在三个位置上的查询。

注意：每个 user_id 总是有相同数量的位置。在此示例中，它是三个，但我也可以截断表格并使用五个位置为每个用户添加数据。

一个丑陋的解决方案是假设不超过十个位置，创建 pos1、pos2 等作为列，然后在查询中相应地添加它们。如果你只使用三个位置，你会得到很多 NULL 值，而且你也会被最多十个位置卡住。

我考虑过使用临时表，但也没有找到突破口。

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:27:14.483

你可以做这样的事情：

```
select user_id
    , sum(value) as value_sum
    , (select value from my_table where user_id = t.user_id and position = 3) as pos_3_val
    , (select sum(value) from my_table where user_id = t.user_id and position >= 2) as pos_2_3_val
    , (select sum(value) from my_table where user_id = t.user_id and position >= 1) as pos_1_2_3_val
from my_table as t
group by user_id
order by user_id 
```

我认为这应该适用于大多数 RDBMS。

如果它必须是动态的，您可能会在存储过程或您的应用程序中创建此查询并运行它。

您还可以动态地从这样的查询中旋转您的结果：

```
select *
    , (
        select sum(value)
        from my_table
        where user_id = t.user_id
            and position >= t.position
    ) as running_total_descending
from my_table t 
```

请让我们知道这是否有效，如果您在创建动态版本（以及哪个 RDBMS）时遇到问题。

**更新**

现在我们知道了 RDBMS (MySQL)，我们可以有一个特定的动态版本：

```
set @sql = null;
select
  group_concat(distinct
    concat(
      ' sum(case when position >= ',
      position,
      ' then value end) as pos_',
      position,
      '_plus'
    )
  ) into @sql
from my_table;

set @sql = concat('select user_id,', @sql, ' from my_table t group by user_id;');

prepare stmt from @sql;
execute stmt;
deallocate prepare stmt; 
```

**[SQL小提琴](http://sqlfiddle.com/#!2/0b9b8/1)**

特别感谢 @bluefeet 经常发布此类解决方案。

我还应该指出，许多开发人员认为这种类型的旋转通常属于应用程序或前端。我也不例外，这既是为了分离关注点，也是因为您的应用程序通常可以比您的 OLTP 数据库更好地扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:06:06.707

> 我需要一个在三个位置上没有硬编码的查询。

那么你就不能输出*列*中的小计。SQL 要求在准备查询时列是固定的；您不能编写一个动态追加更多列的查询，因为它会发现数据中有多少不同的值。

但是，您可以输出动态*行*数。

```
SELECT t1.user_id, CONCAT(t1.position, '-', MAX(t2.position)) AS position_range, 
  SUM(t2.value) AS subtotal
FROM MyTable t1
INNER JOIN MyTable t2
  ON t1.user_id = t2.user_id AND t1.position <= t2.position
GROUP BY t1.user_id, t1.position; 
```

输出是：

```
+---------+----------------+----------+
| user_id | position_range | subtotal |
+---------+----------------+----------+
|       1 | 1-3            |        5 |
|       1 | 2-3            |        4 |
|       1 | 3-3            |        3 |
|       2 | 1-3            |        6 |
|       2 | 2-3            |        4 |
|       2 | 3-3            |        2 |
|       3 | 1-3            |        6 |
|       3 | 2-3            |        3 |
|       3 | 3-3            |        1 |
+---------+----------------+----------+ 
```

获取整个结果集后，您必须编写应用程序代码以将其转换为列。

抱歉，没有办法在任何品牌的 RDBMS 中编写完全动态的数据透视查询。你有两个选择：

1.  编写代码以根据数据生成 SQL，如@TimLehner 的更新答案所示

2.  编写代码来对我上面展示的通用查询进行后处理。

# php - Xml Php 警告文档末尾的额外内容

> ID：15929928
> 
> 赞同：0
> 
> 时间：2013-04-10T15:19:05.280
> 
> 标签：php, xml

我正在尝试编写一个在应用程序和 Web 服务之间发送和接收 XML 的机器人应用程序。当我尝试运行以下代码时

```
$dom = new domDocument;
$dom = simplexml_load_file('php://input');
$xml = simplexml_import_dom($dom);

$messages = Messages::find_by_sql("SELECT * FROM messages WHERE reciever = '$xml->userName'");
$xmlString = "";
if($messages)
{

    foreach($messages as $message)
    {
    $ts = strtotime($message->ts);
 $xmlString=$xmlString."<Message><sender>".$message->sender."</sender><reciever>".$message->reciever."</reciever><timestamp>"."123"."</timestamp><text>".$message->text."</text></Message>";
    }
}
else
{
    //do something
}
$xmlReturn = new DOMDocument('1.0', 'UTF-8');
$xmlReturn->loadXML($xmlString);
echo($xmlReturn->saveXML());
?> 
```

我在文档末尾收到警告额外内容。

错误来自这一行： `$xmlReturn->loadXML($xmlString);`

我不能 100% 确定您可以通过加载字符串来创建 xml 文档，但我已经看到了类似的事情，如果您看[这里，](http://softeng.cs.uwosh.edu/students/cs342g6/index.php)您可以看到它输出的内容，这对我来说看起来像是有效的 XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:34:18.733

一个 XML 文档只能有一个根元素。您在`<message>…&lt;/message>`这里将多个组合串在一起，因此缺少封装这些组合的根元素。

# java - 将非英文字符串插入 UTF-8 Oracle 数据库

> ID：15929929
> 
> 赞同：0
> 
> 时间：2013-04-10T15:19:05.457
> 
> 标签：java, oracle, utf-8, eclipselink

我有一个 Oracle，它的编码是 UTF-8。当我在其中插入一些非英语字符串时，我会得到 ORA-12899。我认为原因是一些非英语在 UTF-8 系统中需要 3 个字节。

最简单的解决方案是延长 Oracle 的长度。我想修剪字符串，但找不到修剪字符串的单一解决方案。有什么建议吗？我试图获取字节长度，但该值不适用于 UTF-8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:27:37.037

用于`lengthb()`获取以字节为单位的长度。截断你的字符串，直到它适合列：

```
while lengthb(x) > column_length_in_bytes loop
  x := substr(x, 1, length(x)-1);
end loop; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:53:33.723

```
public static String truncatedUTF8( String input, int maxBytesInUTF8 ) {
    if( input.length() * 4 <= maxBytesInUTF8 ) {
        return input;
    }
    int max = 0, i;
    boolean lastSurrogate = false;
    for( i = 0; i < input.length() && max <= maxBytesInUTF8; ++i ) {
        int cc = Character.codePointAt(input, i);
        lastSurrogate = false;
        if (cc <= 0x7F) {
            max++; 
        } else if (cc <= 0x7FF) {
            max += 2; 
        } else if (cc <= 0xFFFF) {
            max += 3;
        } else if (cc <= 0x10FFFF) {
            lastSurrogate = true;
            max += 4;
            i++;
        }    
    }

    if( max < maxBytesInUTF8 ) {
        return input;
    }
    if( max > maxBytesInUTF8) {
        i--;
        if( lastSurrogate ) i--;
    }

    if( i - 1 >= input.length() && 
        !Character.isSurrogatePair(input.charAt(i-2), input.charAt(i-1)) &&
        Character.isSurrogate(input.charAt(i-1))) {
        i--;
    }

    return input.substring(0, i);
}

System.out.println(truncatedUTF8("äää", 5));
//"ää" because "äää" takes 6 bytes and "ää" takes 4 
```

# powershell - Powershell send file as attachment of a mail

> ID：15929934
> 
> 赞同：2
> 
> 时间：2013-04-10T15:19:29.180
> 
> 标签：powershell, powershell-2.0, sendmail

I need to check if a file exist into a path.

if yes, I need to send it as attachment of mail.

this my code now:

```
$file='STREAM_preg.txt'
$pathfile ='c:\Users\root\Desktop'
$dest ='C:\Users\root\Desktop\test'

cd $pathfile
if(Test-Path $file){
        $datestamp = get-date -uformat "%Y%m%d%H%M"
    Copy-Item $file $dest\$datestamp"_"$file
    $new_file = echo $datestamp"_"$file
    echo $new_file
      # Send-MailMessage -SmtpServer xxxxxxxxxx -To pluto@pippo.com -From preg_new_stream@pippo.com -Subject "test mail" -Body "file name is: $new_file"
}else{
        echo false
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:58:44.743

`Send-Mailmessage`接受要附加的文件路径。

```
Send-MailMessage -SmtpServer xxxxxxxxxx -To pluto@pippo.com -From preg_new_stream@pippo.com -Subject "test mail" -Body "file name is: $new_file" -attachment $new_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:57:25.757

Send-mailmessage 将一个或多个文件路径作为附件的管道输入。只需将文件路径通过管道发送到该 send-meailmessage 命令，它就会作为电子邮件的附件发送。

# r - Problem with big data (?) during computation of sequence distances using TraMineR

> ID：15929936
> 
> 赞同：7
> 
> 时间：2013-04-10T09:54:28.627
> 
> 标签：r, traminer

I am trying to run an optimal matching analysis using TraMineR but it seems that I am encountering an issue with the size of the dataset. I have a big dataset of European countries which contains employment spells. I have more than 57,000 sequences which are 48 units long and consist of 9 distinct states. In order to get an idea of the analysis, here is the head of sequence object `employdat.sts`:

```
[1] EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-...  
[2] EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-...  
[3] ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-...  
[4] ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-...  
[5] EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-EF-...  
[6] ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-ST-... 
```

In a shorter SPS format, this reads as follows:

```
Sequence               
[1] "(EF,48)"              
[2] "(EF,48)"              
[3] "(ST,48)"              
[4] "(ST,36)-(MS,3)-(EF,9)"
[5] "(EF,48)"              
[6] "(ST,24)-(EF,24)" 
```

After passing this sequence object to the `seqdist()` function, I get the following error message:

```
employdat.om <- seqdist(employdat.sts, method="OM", sm="CONSTANT", indel=4)    
[>] creating 9x9 substitution-cost matrix using 2 as constant value  
[>] 57160 sequences with 9 distinct events/states  
[>] 12626 distinct sequences  
[>] min/max sequence length: 48/48  
[>] computing distances using OM metric  
Error in .Call(TMR_cstringdistance, as.integer(dseq), as.integer(dim(dseq)),  : negative length vectors are not allowed 
```

Is this error related to the huge number of distinct, long sequences? I am using a x64-machine with 4GB RAM and I have also tried it on a machine with 8-GB RAM which reproduced the error message. Does someone know a way to tackle this error? Besides, analyses for each single country using the same syntax with an index for the country worked well and produced meaningful results.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T10:54:18.270

我以前从未见过此错误代码，但这很可能是由于您的序列数量过多。您至少可以尝试做两件事：

*   使用`"full.matrix=FALSE"`seqdist 中的参数（参见帮助页面）。它将仅计算下三角矩阵并返回可直接在`hclust`函数中使用的“dist”对象。
*   您可以聚合相同的序列（您只有 12626 个不同的序列而不是 57160 个序列），计算距离，使用权重（根据每个不同序列在数据集中出现的次数计算）对序列进行聚类，然后添加聚类回到你的原始数据集。`WeightedCluster`使用库可以很容易地做到这一点。WeightedCluster 手册的第一个附录提供了执行此操作的分步指南（该过程也在网页[http://mephisto.unige.ch/weightedcluster](http://mephisto.unige.ch/weightedcluster)上进行了描述）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:16:41.867

一个通常效果很好的简单解决方案是仅分析数据的样本。例如

```
employdat.sts <- employdat.sts[sample(nrow(employdat.sts),5000),] 
```

将提取 5000 个序列的随机样本。探索如此重要的样本应该足以找出序列的特征，包括它们的多样性。

为了提高代表性，您甚至可以采用一些分层抽样（例如，按第一个或最后一个状态，或按数据集中可用的一些协变量）。由于您手头有原始数据集，因此您可以完全控制随机抽样设计。

* * *

更新

如果集群是目标，并且您需要每个单独序列的集群成员资格，请参阅[https://stackoverflow.com/a/63037549/1586731](https://stackoverflow.com/a/63037549/1586731)

# soapui - 将标头值作为属性传递？

> ID：15929941
> 
> 赞同：1
> 
> 时间：2013-04-10T15:19:41.943
> 
> 标签：soapui

SoapUI Pro 中有没有办法传输标头属性的值？我们不会从 REST 调用返回 XML 数据，但我们需要原始响应标头中的信息。如何最好地访问它？

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T09:21:44.563

要存储响应消息的 http 标头中的值，您需要通过在 REST 请求测试步骤之后添加一个 Groovy 脚本测试步骤来使用一些 Groovy 脚本。

下面的代码将检索特定响应标头属性的值：

```
def headerValue = testRunner.testCase.getTestStepByName("testStepName").httpRequest.response.responseHeaders["headerPropertyName"] 
```

将“testStepName”和“headerPropertyName”值更改为适合您的测试的值。

如果您想在进一步的测试步骤中使用此值，您需要将其存储为测试属性，以下链接应涵盖您需要的所有内容：

[http://www.soapui.org/Scripting-Properties/tips-a-tricks.html#1-1-get-and-set-properties](http://www.soapui.org/Scripting-Properties/tips-a-tricks.html#1-1-get-and-set-properties)

# javascript - How to prevent selected index from changing when bound data changes?

> ID：15929944
> 
> 赞同：0
> 
> 时间：2013-04-10T15:19:49.273
> 
> 标签：javascript, data-binding, knockout.js

Using knockout, I have a select (a list of names) whose options are bound to another set of knockout-bound data (people). When the name of any person changes, the value of the select option that is bound to that person's name is correctly updated. However, the select's selection is not preserved if you had that person selected already.

See this jsFiddle for a live example: [http://jsfiddle.net/DbBZQ/](http://jsfiddle.net/DbBZQ/)

1.  Select "Jane" from the list.
2.  Change the name "Jane" to something else ("Jane Doe" for example).
3.  Notice the select defaults back to the first item.

How can I make the selection stick to the same option index even if the underlying value has changed? Is there a way to instruct knockout to preserve the selection or do I have to do this separately using JS?

**Complete Code Example**

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <script type="text/javascript" src="http://knockoutjs.com/downloads/knockout-2.2.1.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type="text/javascript">
            var data =
            {
                people: ko.observableArray(
                [
                    { name: ko.observable("Jim") },
                    { name: ko.observable("Jane") },
                    {
                        name: ko.observable("Sam"),
                        subordinates: ko.observableArray(
                        [
                            { 
                        name: ko.observable("Tambone"),
                                subordinates: ko.observableArray(
                                [
                                    { name: ko.observable("Edward") },
                                    { name: ko.observable("Kristy") },
                                    { name: ko.observable("Thomas") },
                                    { name: ko.observable("Andy") }
                                ])
                            },
                            { name: ko.observable("Jules") }
                        ])
                    }
                ])
            };
            var allNames = ko.computed(function ()
            {
                var names = [];
                var selector = function (name, indent)
                {
                    var option =
                    {
                        value: name,
                        text: (indent || "") + name
                    };

                    return option;
                };

                for (var i = 0; i < data.people().length; i++)
                {
                    names.push(selector(data.people()[i].name()));
                    addSubordinates(names, 1, data.people()[i].subordinates, selector);
                }

                return names;
            });

            function addSubordinates(names, depth, subordinates, selector)
            {
                if (subordinates != null)
                {
                    var indentText = "";

                    for (var i = 0; i < depth; i++)
                        indentText += ". . ";

                    for (var i = 0; i < subordinates().length; i++)
                    {
                        names.push(selector(subordinates()[i].name(), indentText));
                        addSubordinates(names, depth + 1, subordinates()[i].subordinates, selector);
                    }
                }
            }
        </script>
    </head>
    <body>
        <div data-bind="foreach: data.people">
            <input type="text" data-bind="value: name" /><br />
        </div>
        <a href="JavaScript:data.people.push({ name: ko.observable('New Person') });">Add Person</a>

        <br /><br /><br />

        <select data-bind="options: allNames, optionsValue: 'value', optionsText: 'text', optionsCaption: 'All Names...'" />

        <script type="text/javascript">
            ko.applyBindings();
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T01:55:42.773

选择丢失的原因是因为选择的值直接与 name 属性匹配，而 name 属性会发生变化。因此，所选值不再存在于数据源 (allNames) 中。

如果您想保留选择，您有几个选择：

1.  实现一个 hack，例如跟踪索引，并在值更改后重置它
2.  将选定的值绑定到不变的属性。

您是否有可以用作选定值的不可变属性？

作为示例，我向数据源中的对象添加了一个 id 属性，并将其用作选定值而不是名称。这按您期望的方式工作：

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <script type="text/javascript" src="http://knockoutjs.com/downloads/knockout-2.2.1.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type="text/javascript">
            var data =
            {
                people: ko.observableArray(
                [
                    { id: 1, name: ko.observable("Jim") },
                    { id: 2, name: ko.observable("Jane") },
                    {
                        id: 3, name: ko.observable("Sam"),
                        subordinates: ko.observableArray(
                        [
                            { 
                        id: 4, name: ko.observable("Tambone"),
                                subordinates: ko.observableArray(
                                [
                                    { id: 5, name: ko.observable("Edward") },
                                    { id: 6, name: ko.observable("Kristy") },
                                    { id: 7, name: ko.observable("Thomas") },
                                    { id: 8, name: ko.observable("Andy") }
                                ])
                            },
                            { id: 9, name: ko.observable("Jules") }
                        ])
                    }
                ])
            };
            var allNames = ko.computed(function ()
            {
                var names = [];
                var selector = function (id, name, indent)
                {
                    var option =
                    {
                        value: id,
                        text: (indent || "") + name
                    };

                    return option;
                };

                for (var i = 0; i < data.people().length; i++)
                {
                    names.push(selector(data.people()[i].id, data.people()[i].name()));
                    addSubordinates(names, 1, data.people()[i].subordinates, selector);
                }

                return names;
            });

            function addSubordinates(names, depth, subordinates, selector)
            {
                if (subordinates != null)
                {
                    var indentText = "";

                    for (var i = 0; i < depth; i++)
                        indentText += ". . ";

                    for (var i = 0; i < subordinates().length; i++)
                    {
                        names.push(selector(subordinates()[i].id,subordinates()[i].name(), indentText));
                        addSubordinates(names, depth + 1, subordinates()[i].subordinates, selector);
                    }
                }
            }
        </script>
    </head>
    <body>
        <div data-bind="foreach: data.people">
            <input type="text" data-bind="value: name" /><br />
        </div>
        <a href="JavaScript:data.people.push({ name: ko.observable('New Person') });">Add Person</a>

        <br /><br /><br />

        <select data-bind="options: allNames, optionsValue: 'value', optionsText: 'text', optionsCaption: 'All Names...'" />

        <script type="text/javascript">
            ko.applyBindings();
        </script>
    </body>
</html> 
```

**编辑：** 作为替代方案，如果您将`value`属性设置为返回项目索引的 ko.computed 怎么办？像这样：

```
var allNames = ko.computed(function ()
{
    var names = [];
    var selector = function (item, name, indent)
    {
        var option =
        {
            value: ko.computed(function(){ return data.people().indexOf(item);}),
            text: (indent || "") + name
        };

        return option;
    };

    for (var i = 0; i < data.people().length; i++)
    {
        names.push(selector(data.people()[i], data.people()[i].name()));
        addSubordinates(names, 1, data.people()[i].subordinates, selector);
    }

    return names;
});

function addSubordinates(names, depth, subordinates, selector)
{
    if (subordinates != null)
    {
        var indentText = "";

        for (var i = 0; i < depth; i++)
            indentText += ". . ";

        for (var i = 0; i < subordinates().length; i++)
        {
            names.push(selector(subordinates()[i],subordinates()[i].name(), indentText));
            addSubordinates(names, depth + 1, subordinates()[i].subordinates, selector);
        }
    }
} 
```

# php - 使用 PHP 检查是否应该进行表更新

> ID：15929950
> 
> 赞同：0
> 
> 时间：2013-04-10T15:19:56.027
> 
> 标签：php, mysqli

各位程序员大家好。如果输入的值低于 db 中的值，我想在我的数据库中禁用表更新。代码看起来不错，但更新总是执行。这是我的代码：

```
$sql="UPDATE student SET _id_year='$_year' WHERE _index='$_index'";
$check1="SELECT _id_year FROM student WHERE _index='$_index'";

if('$_year'>'$check1')
{
mysqli_query($con,$sql);
} 
```

注意：_id_year 和 _index 是来自 DB 的值，而`$_year`,`$_index`是输入值。 `$con`是连接到数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:21:11.767

首先执行您的选择查询并获取`$check1`. 然后比较。

```
$qry    =  "SELECT _id_year FROM student WHERE _index='$_index'";
$exec   =  mysqli_query($con,$qry);
$result =  mysqli_fetch_object($result);
$check1 =  $result->_id_year ; 
```

另外，您没有使用**单引号**。试试这个，

```
if($_year > $check1)
{
  mysqli_query($con,$sql);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:27:53.887

使用[SafeMysql](https://github.com/colshrapnel/safemysql#safemysql)，代码与您编写的代码几乎相同，但它实际上会运行这些查询并使其*安全*：

```
$check=$db->getOne("SELECT _id_year FROM student WHERE _index=?s",$_index);

if($_year > $check )
{
    $db->query("UPDATE student SET _id_year=?s WHERE _index=?s",$_year,$_index);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:22:39.780

您应该先执行`$check1`查询，获取结果，然后将其与您的`$_year`变量进行比较

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T15:22:56.463

这总是正确的，因为你的 PHP 的引用字段不应该被引用

```
 if($_year>$check1)
 {
 mysqli_query($con,$sql);
 } 
```

# java - 如何在 JFileChooser 中拖动和选择文件

> ID：15929951
> 
> 赞同：1
> 
> 时间：2013-04-10T15:20:05.107
> 
> 标签：java, swing, jfilechooser

我有一个`JFileChooser`我想从中选择多个文件的文件。我希望能够拖动和选择多个文件；`Ctrl`具有与and相同的功能`Shift`（想想您的操作系统文件夹，当您单击并移动鼠标时突出显示的框）。

```
 JFileChooser chooser = new JFileChooser();
    chooser.setDialogTitle("Select Files");
    chooser.setMultiSelectionEnabled(true); 
    // this just lets the user select multiple items with shift and ctrl 
```

我该怎么做呢？

**编辑：**

我不是在问有关获取所选文件的问题。

**编辑2：**

从我所见，这似乎是不可能的，尽管这些来源最迟来自 2009 年。

# sql - 我应该在 SQL 中使用触发器来插入记录吗？

> ID：15929964
> 
> 赞同：0
> 
> 时间：2013-04-10T15:20:51.047
> 
> 标签：sql, triggers

我想知道是否有其他选择可以避免使用触发器。

当表通过（DELETE、INSERT 或 UPDATE）记录发生更改时，我想将记录插入到 QUEUE 表中。我正在做的当前方式是使用目标表的触发器。

还有哪些其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:26:13.603

如果您想避免触发器，您可以撤销表的直接权限并通过存储过程处理所有内容。该过程将执行操作以及队列条目。

# java - Oracle SQL Developer：找不到 JVM

> ID：15929967
> 
> 赞同：26
> 
> 时间：2013-04-10T15:21:01.740
> 
> 标签：java, oracle-sqldeveloper

我正在尝试在我的 Windows7 64 位上打开 Oracle SQL Developer。

当我尝试打开 SQL Developer 时，它询问 java.exe 路径，我给了 C:\Java\jdk1.6.0_34\jre\bin\java.exe

我从 Oracle SQL Developer 收到一条错误消息：无法找到 Java 虚拟机。指向 JVM 的位置。请参考 oracle9i jdeveloper 安装指南（jdev install.html）

![在此处输入图像描述](https://i.stack.imgur.com/wKlsD.png)

![在此处输入图像描述](https://i.stack.imgur.com/ehJez.png)

关于如何解决这个问题的任何线索？

**另一个解决方案：**

这对我有用几次。安装JDK7并指向jdk7\jre\bin\java.exe的位置

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-14T09:37:57.683

可能这就是您正在寻找的（来自[这篇](http://www.mkyong.com/oracle/oracle-sql-developer-unable-to-find-java-virtual-machine/)文章）：

> Oracle SQL 开发人员不支持 64 位 JDK。要解决它，请安装 32 位 / x86 JDK 并更新您的 SQL 开发人员配置文件，使其指向 32 位 JDK。
> 
> 修理它！编辑“sqldeveloper.conf”，可以在“{ORACLE_HOME}\sqldeveloper\sqldeveloper\bin\sqldeveloper.conf”下找到，确保“SetJavaHome”指向你的32位JDK。

**更新**：基于下面的@Freg 答案，在 Sql Developer 版本 4.XXX 中，您可以在特定于用户的配置文件中执行此操作：

*   转到属性 -> 帮助 -> 关于
*   添加/更改***SetJavaHome***到您的路径（例如 - C:\Program Files (x86)\Java\jdk1.7.0_03） - 这将覆盖 sqldeveloper.conf 中的设置

**更新 2**：根据下面的@krm 回答，如果您的 SQL Developer 和 JDK “位”版本不同，您可以尝试在 product.conf 中设置**SetJavaHome**属性的值

> ***SetJavaHome C:\Program Files\Java\jdk1.7.0_80***
> 
> product.conf 文件在我的例子中位于以下目录中：
> 
> *C:\Users\用户名\AppData\Roaming\sqldeveloper\1.0.0.0.0*

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-21T17:48:41.880

我刚刚安装了 SQL Developer 4.0.0.13，`SetJavaHome`现在可以被用户特定的配置文件覆盖（不确定这是否是 4.0.0.13 的新版本）。

此用户特定配置文件的位置可以在`user.conf`“属性”选项卡上的“帮助 -> 关于”下的属性中看到。例如，我的设置为：

```
C:\Users\username\AppData\Roaming\sqldeveloper\1.0.0.0.0\product.conf 
```

在 Windows 7 上。

该文件的第一部分用于设置 SQLDeveloper 应使用的 JDK：

```
#
# By default, the product launcher will search for a JDK to use, and if none
# can be found, it will ask for the location of a JDK and store its location
# in this file. If a particular JDK should be used instead, uncomment the
# line below and set the path to your preferred JDK.
#
SetJavaHome C:\Program Files (x86)\Java\jdk1.7.0_03 
```

**此设置覆盖 sqldeveloper.conf 中的设置**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-11T12:06:36.517

对我有用的解决方案：如果您安装了带有 java 的 Sqldeveloper，您可以使用 \sqldeveloper\bin\sqldeveloper.bat 来启动 sqldeveloper，如此[处](https://forums.oracle.com/thread/2323010?start=0&tstart=0)所述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-20T10:48:29.060

1.5 版非常非常旧。

在最新版本中，我们支持 32 位和 64 位 JDK。在 4.0 版中，我们在 Windows 上为您找到了 JDK。如果软件找不到它，它会提示输入该路径。

该路径看起来像这样 C:\Java\jdk1.7.0_45

[您可以在此处](http://www.thatjeffsmith.com/archive/2013/12/oracle-sql-developer-4-windows-and-the-jdk/)阅读有关此内容的更多信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-08T11:34:13.740

“C:\Users\admin\Downloads\sqldeveloper\sqldeveloper\bin\sqldeveloper.conf”具有误导性，它不是设置 Java Home 变量的文件。实际使用的文件是“%AppData%\sqldeveloper{PRODUCT_VERSION}\product.conf”[在我的例子中是“%AppData%\sqldeveloper\1.0.0.0.0\product.conf”]

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-02T14:05:25.707

秘诀是您需要将 msvcr100.dll 复制到安装提示缺少 msvcr100.dll 的路径（对话框），然后尝试安装 sql developer。

对我来说，我必须创建 bin 文件夹

**C:\sqldeveloper\jdk\bin**

并将**msvcr100.dll**复制到其中。

如果还是不行！试试这个！

您可能还需要更改在

**C:\sqldeveloper\sqldeveloper\bin**

下载并安装 32 位 JDK (Windows) 并将配置文件中的路径设置为

SetJavaHome **C:/Program Files (x86)/Java/jdk1.7.0_01**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-20T17:13:49.833

除了您正在运行的 Java 版本之外，还有另一种失败途径：您可能用完了堆/内存

如果您有 SQLDeveloper 的曾经工作版本，并且您开始看到原始帖子中引用的屏幕截图，那么您可以尝试在启动时调整 SQLDeveloper 请求的空间量。

编辑文件：

/ide/bin/ide.conf

编辑指定要使用的最大内存的行：AddVMOption -Xmx，减小大小。例如，我将文件更改为具有以下几行，从而解决了该问题。

```
#AddVMOption  -Xmx640M   # Original Value
AddVMOption  -Xmx256M    # New Value 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-24T05:27:32.857

如果您有**64 位版本的 SQL Developer**，但由于某种原因您的默认 JDK 是 32 位 JDK（例如，如果您开发需要 32 位 JDK 的 Eclipse RCP 应用程序），那么您必须设置该值将文件中的`SetJavaHome`属性转换为**64 位版本的 JDK**，以便运行 SQL Developer。例如：`product.conf`

 **```
SetJavaHome C:\Program Files\Java\jdk1.7.0_80 
```

在我的情况下，该`product.conf`文件位于以下目录中：

```
C:\Users\username\AppData\Roaming\sqldeveloper\1.0.0.0.0 
```

上述解决方案适用于我的情况。@evgenyl 和 @FGreg 的解决方案在我的情况下不起作用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-09T14:41:06.837

**不受**. _ `Oracle SQL developer`_ _ 要解决此问题：**`64bit JDK`**

 **1.  安装一个`32bit JDK (x86)`
2.  更新您的 SQL 开发人员配置文件（它现在应该指向新的`32bit JDK`）。
3.  编辑`sqldeveloper.conf`，可以在下面找到`{ORACLE_HOME}\sqldeveloper\sqldeveloper\bin\sqldeveloper.conf`
4.  确保`SetJavaHome`指向您的`32bit JDK`.

例如：

```
SetJavaHome C:\Program Files (x86) \Java\jdk1.6.0_13 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-02-11T05:27:36.043

即使`sqldeveloper.conf`. [如果您以此处](http://javahowto.blogspot.in/2006/06/6-common-errors-in-setting-java-heap.html)提到的任何错误方式定义了堆空间，则在启动它时仍然会显示相同的错误。

**编辑：** 设置堆大小参数的正确方法是这样的：

```
AddVMOption -XX:MaxPermSize=256M
AddVMOption -Xms256M
AddVMOption -Xmx768M 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-06-21T17:16:41.310

安装 32 位版本的 java 后，我也遇到了同样的问题。****

# javascript - jQuery 按钮从输入中获取值并执行操作 - 它是如何工作的？

> ID：15929974
> 
> 赞同：0
> 
> 时间：2013-04-10T15:21:18.483
> 
> 标签：javascript, jquery, html, jquery-ui

我这里有一小段代码

```
 <label for="pass">Password</label>
            <input type="text" id="pass" value="QWERTY">
            <button for="pass">Submit!</button> 
```

和 jquery 动作

```
$("button").click(function(){
        var value=$("input[id=pass]").attr("value");
        if (value==="QWERTY"){
            alert("Good!");
        }; 
```

它不起作用。你知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:24:24.780

尝试这个。

```
$("button").click(function(){
    var value=$("input#pass").val();
    if ( value === "QWERTY"){
        alert("Good!");
    }
}); 
```

jQuery 有它自己的内置函数，用于从输入字段中获取值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:25:00.113

您应该防止在单击按钮时触发默认操作（否则将提交表单，并且JS不会执行）。您还应该`val()`在访问输入值时使用。

您还应该将代码包装在 DOMReady 处理程序中，以确保在运行脚本时可以访问 DOM。

这是您的代码的更新版本：

```
$(function() {  
    $("button").click(function(e) {
        e.preventDefault();
        var the_value = $("#pass").val();

        if(value == "QWERTY")
        {
            alert("Good!");
        }
    };
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:25:39.573

试试这个：它更**优化......**

```
$("button").click(function(e){
    e.preventDefault();
    var value=$("#pass")[0].value;
    if (value==="QWERTY"){
        alert("Good!");
}; 
```

您还可以删除按钮上的“for”属性，这是不正确的；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T15:27:02.760

如果您没有忘记`});`最后的代码并将代码放入 dom 就绪回调函数中，您的代码应该可以工作。[演示。](http://jsfiddle.net/RezNR/)

你可以像下面这样写：

```
$("button").click(function(){
    if ($('#pass').val()==="QWERTY"){
        alert("Good!");
    };
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T15:29:20.927

我认为您只是有语法错误。您需要确保关闭函数花括号并单击关闭括号。

```
$("document").ready(function () {

    $("button").click(function () {
        var value = $("input[id=pass]").attr("value");
        if (value === "QWERTY") {
            alert("Good!");
        }
    });
}); 
```

示例：http: [//jsfiddle.net/pandaPowder/5VjeD/3/](http://jsfiddle.net/pandaPowder/5VjeD/3/)

# jquery - Modify next/prev pager for jQuery Cycle2

> ID：15929976
> 
> 赞同：3
> 
> 时间：2013-04-10T15:21:21.413
> 
> 标签：jquery, jquery-cycle2

I'm using Cycle2 to create a carousel of blog posts. Here is the code I am using successfully

```
<div class="slideshow cycle-slideshow" 
data-cycle-slides=">div" 
data-cycle-fx=carousel     
data-cycle-timeout=0 
data-cycle-carousel-visible=3 
data-cycle-carousel-fluid=true 
data-cycle-next="#next" 
data-cycle-prev="#prev"> 
```

When I click the next/prev links it advances 1 slide at a time.

Is it possible to make it advance 3 slides at a time? I am currently showing 3, so when clicking the next button I want it to show the next 3 posts.

Basically I want to accomplish this [http://www.malsup.com/jquery/cycle/div.html](http://www.malsup.com/jquery/cycle/div.html) using Cycle2 but instead of having 1, 2, 3... I want it to use Next/Prev buttons.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:22:02.497

将您的帖子分类成幻灯片，然后让节目通过帖子的幻灯片。

[我在这里有一个工作示例](http://jsfiddle.net/FKU2L/6/)：

```
<div class="slideShow cycle-slideshow" data-cycle-fx="scrollHorz" data-cycle-timeout="0" data-cycle-next="#next" data-cycle-prev="#prev" data-cycle-slides="> div" >
    <div>
        <img src="http://malsup.github.com/images/p1.jpg">
        <img src="http://malsup.github.com/images/p2.jpg">
        <img src="http://malsup.github.com/images/p3.jpg">
    </div>
    <div>
        <img src="http://malsup.github.com/images/p4.jpg">
    </div>
</div>
<div class="center"> 
    <a href=# id="prev">Prev</a>  
    <a href=# id="next">Next</a>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-08T07:25:04.363

**不要**`<div>`按照接受的答案中的建议在 -tags 中聚集一定数量的元素！

一旦您尝试实现响应性，例如当您的窗口被调整大小并且您突然想要连续显示两张图片而不是三张图片时，上述内容会打扰您。

更好的方法是简单地将点击事件绑定到您的`#next`and`#prev`并设置相对于当前幻灯片跳转的幻灯片数量，如下所示：

```
$('#next').click(function(){
    $('.cycle-slideshow').cycle('goto', parseInt($('.cycle-slideshow').data("cycle.opts").currSlide + 3));  
});
$('#prev').click(function(){
    $('.cycle-slideshow').cycle('goto', parseInt($('.cycle-slideshow').data("cycle.opts").currSlide - 3));  
}); 
```

您可以从幻灯片配置中删除以下两行：

 ~~~~```
data-cycle-next="#next"
data-cycle-prev="#prev" 
```~~  ~~一旦您的窗口调整大小并因此您的网格发生更改，则应更改步长（此处为 3）。为此使用 css 媒体查询和 jquery。~~~~

# linux - RPM Build Error: File must begin with "/"

> ID：15929978
> 
> 赞同：1
> 
> 时间：2013-04-10T15:21:27.040
> 
> 标签：linux, centos, redhat, rpm, rpmbuild

Here is my spec file: [http://pastebin.com/MtzxC1kv](http://pastebin.com/MtzxC1kv)

When I try to run `rpmbuild -ba myfile.spec`, I get the following errors:

```
+ /usr/lib/rpm/brp-python-bytecompile
+ /usr/lib/rpm/redhat/brp-java-repack-jars
Processing files: PA_Connector-1.0-1.0
error: File must begin with "/": %{_initddir}/pa_connector
error: File must begin with "/": attr(755,impulse,impulse)
error: File must begin with "/": attr(644,impulse,impulse)
error: File must begin with "/": attr(644,impulse,impulse)
error: File must begin with "/": attr(644,impulse,impulse)
error: File must begin with "/": attr(644,impulse,impulse)
error: File must begin with "/": attr(644,impulse,impulse)
error: File must begin with "/": attr(644,impulse,impulse)
Checking for unpackaged file(s): /usr/lib/rpm/check-files /var/tmp/PA_Connector-1.0-1.0-root
error: Installed (but unpackaged) file(s) found:
   /%{_initddir}/pa_connector
   /opt/pa_connector/config.xml
   /opt/pa_connector/lib/commons-logging-1.1.1.jar
   /opt/pa_connector/lib/log4j-1.2.17.jar
   /opt/pa_connector/lib/pa_connector.jar
   /opt/pa_connector/log4j.properties
   /opt/pa_connector/pa_connector.sh

RPM build errors:
    File must begin with "/": %{_initddir}/pa_connector
    File must begin with "/": attr(755,impulse,impulse)
    File must begin with "/": attr(644,impulse,impulse)
    File must begin with "/": attr(644,impulse,impulse)
    File must begin with "/": attr(644,impulse,impulse)
    File must begin with "/": attr(644,impulse,impulse)
    File must begin with "/": attr(644,impulse,impulse)
    File must begin with "/": attr(644,impulse,impulse)
    Installed (but unpackaged) file(s) found:
   /%{_initddir}/pa_connector
   /opt/pa_connector/config.xml
   /opt/pa_connector/lib/commons-logging-1.1.1.jar
   /opt/pa_connector/lib/log4j-1.2.17.jar
   /opt/pa_connector/lib/pa_connector.jar
   /opt/pa_connector/log4j.properties
   /opt/pa_connector/pa_connector.sh 
```

I've read a few posts on SO about correct what BuildRoot should be, and fixed it, but it still doesn't work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:26:43.163

看起来`_initddir`没有定义，或者它会在最终文件名中展开，并且您似乎有一个名为 " `/%{_initddir}/pa_connector`" 的文件。

此外，您需要`%`在前面`attr`使用`%attr`宏。

# matlab - How to display output according to initial format set in matlab?

> ID：15929981
> 
> 赞同：0
> 
> 时间：2013-04-10T15:21:35.280
> 
> 标签：matlab

for instance I had set the display format of a program at the very beginning such as `format shortG` and then I would like to use the `fprintf` command to display a certain values.

For example I have

```
x = 1.23456789 
```

> y = 12.3456789

If under format shortG it will show x = 1.2346 and y = 12.346\. My question is what format I should use when using the `fprintf` because like if using `%.4f` y will equal to 12.3457 which is not what I want. Thanks for every single help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:29:06.907

使用`g`代替`f`：

```
>> fprintf('%.5g\n',y)
12.346
>> fprintf('%.5g\n',x)
1.2346 
```

# c# - Trying to make a try catch continuously loop until service resumes

> ID：15929982
> 
> 赞同：0
> 
> 时间：2013-04-10T15:21:37.693
> 
> 标签：c#, winforms, wcf, error-handling

I basically have a method that is checking a service constantly in a different thread. This works fine, but I need to make a check so that if the host closes, it keeps trying until service is resumed.

I thought this would work

```
private void GetTankLevels()
        {
            Service1Client client = new Service1Client();
            while (true)
            {
                try
                {
                    this.DieselBox.Invoke(new MethodInvoker(delegate { DieselBox.Text = client.GetTankAmounts("Diesel").ToString(); }));
                    this.PetrolBox.Invoke(new MethodInvoker(delegate { PetrolBox.Text = client.GetTankAmounts("Unleaded").ToString(); }));
                    double DFuelLvl = client.GetTankAmounts("Diesel");
                    double PFuelLvl = client.GetTankAmounts("Unleaded");

                    int DieselProgress = (int)DFuelLvl;
                    int petrolProgress = (int)PFuelLvl;
                    if (DFuelLvl < 300)
                    {

                        this.DieselBar.Invoke(new MethodInvoker(delegate { DieselBar.Value = DieselProgress; }));

                    }
                    else if (DFuelLvl > 300 && DFuelLvl < 500)
                    {
                        this.DieselBar.Invoke(new MethodInvoker(delegate { DieselBar.Value = DieselProgress; }));

                    }
                    else if (DFuelLvl > 500 && DFuelLvl < 850)
                    {
                        this.DieselBar.Invoke(new MethodInvoker(delegate { DieselBar.Value = DieselProgress; }));

                    }
                    else
                    {
                        this.DieselBar.Invoke(new MethodInvoker(delegate { DieselBar.Value = DieselProgress; }));

                    }

                    if (PFuelLvl < 300)
                    {
                        this.Petrolbar.Invoke(new MethodInvoker(delegate { Petrolbar.Value = petrolProgress; }));

                    }
                    else if (PFuelLvl > 300 && PFuelLvl < 500)
                    {
                        this.Petrolbar.Invoke(new MethodInvoker(delegate { Petrolbar.Value = petrolProgress; }));

                    }
                    else if (PFuelLvl > 500 && PFuelLvl < 850)
                    {
                        this.Petrolbar.Invoke(new MethodInvoker(delegate { Petrolbar.Value = petrolProgress; }));

                    }
                    else
                    {
                        this.Petrolbar.Invoke(new MethodInvoker(delegate { Petrolbar.Value = petrolProgress; }));

                    }
                }
                catch
                {
                    MessageBox.Show("Lost connection to the host... Please wait");

                }

            }
        } 
```

But it's being a bit unpredictable. Ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:24:47.220

您正在从 访问您的服务`Invoke()`，因此代码不是在您的线程上执行，而是在主 UI 线程上执行。当那里抛出异常时，它不会被您的 try/catch 块捕获。

您可以将所有服务调用移到 Invoke 之外，以便它们在您的线程上执行。

# java - 如何从 URL 中获取请求查询字符串

> ID：15929983
> 
> 赞同：0
> 
> 时间：2013-04-10T15:21:39.327
> 
> 标签：java, portlet

我正在尝试使用 Java 从浏览器的静态 URL 中提取查询字符串。但是当我使用该`getQueryString()`方法时，它会返回特定 portlet 的查询字符串。

例如：我的静态 url 看起来像这样*/owner/?search&name=*并且 portlet URL 是*/home/create*，这在浏览器 URL 中是看不到的。

有什么方法可以从静态 URL 中提取查询字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:11:48.710

詹姆士，

您可以尝试使用[PortletRequest.getParameterMap()](http://www.bluesunrise.com/portlet-api/javax/portlet/PortletRequest.html)，返回 java.lang.String,java.lang.String[] 的 java.util.Map - 如官方 JSR-286 规范

检查链接，还有一些其他方法可以提取 URL 参数和值。

希望这会有所帮助，菲利普

# windows - PowerShell 复制项方法失败 - 文件名中的括号

> ID：15929985
> 
> 赞同：5
> 
> 时间：2013-04-10T15:21:44.553
> 
> 标签：windows, powershell

我正在尝试使用 PowerShell (v.1) 仅复制与模式匹配的文件。文件命名约定为：

```
Daily_Reviews[0001-0871].journal
Daily_Reviews[1002-9887].journal
[...] 
```

当我运行它时，“复制项目”方法抱怨：

**无法检索 cmdlet 的动态参数。指定的通配符模式无效：Daily_Reviews[0001-0871].journal
+ Copy-Item <<<< $sourcefile $destination**

该错误是由于文件名中的“[”和“]”造成的。当我删除左右括号时，它按预期工作。但看起来 PowerShell 1 没有 -LiteralPath 标志，那么是否有另一种方法可以让 Copy-Item 在 PowerShell 1 中使用包含括号的文件名？

```
$source = "C:\Users\Tom\"
$destination ="C:\Users\Tom\Processed\"

if(-not(Test-Path $destination)){mkdir $destination | out-null}

ForEach ($sourcefile In $(Get-ChildItem $source | Where-Object { $_.Name -match "Daily_Reviews\[\d\d\d\d-\d\d\d\d\].journal" }))
{

  Copy-Item $sourcefile $destination
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T16:45:48.080

好吧，在研究了更多之后，我找到了一个解决方法：

```
$src = [Management.Automation.WildcardPattern]::Escape($sourcefile)
Copy-Item  $src $destination 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:06:05.090

`$_`引用当前引用的参数；你不能像现在这样使用它，因为那是在管道之外。

```
$source = "C:\Users\Tom\"
$destination ="C:\Users\Tom\Processed\"

if(-not(Test-Path $destination)){mkdir $destination | out-null}

ForEach ($sourcefile In $(Get-ChildItem $source | Where-Object { $_.Name -match "Daily_Reviews\[\d\d\d\d-\d\d\d\d\].journal" }))
{

  Copy-Item -literalpath $sourcefile $destination
 } 
```

# android - android-将构造函数添加到主类后出错

> ID：15929989
> 
> 赞同：0
> 
> 时间：2013-04-10T15:21:51.870
> 
> 标签：android, constructor, runtime-error

当我在我的主类中添加构造函数时，由于下面的代码，它会给出错误。我能知道为什么吗？（没有构造函数它工作正常。）

```
 public class AndroidGPSTrackingActivity extends Activity implements OnClickListener{

        Button btnShowLocation ;

     private final Context mContext;

            public AndroidGPSTrackingActivity(Context context) {
                    this.mContext = context.getApplicationContext();
                    //tpMethod();
                }

      public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            Log.d("Main", "class");

            btnShowLocation = (Button) findViewById(R.id.btnShowLocation);
            // show location button click event
            btnShowLocation.setOnClickListener(this); 
    }
} 
```

错误：java.lang.RuntimeException：无法实例化活动 ComponentInfo
java.lang.InstantiationException

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:00:44.687

我认为您的活动未在清单中注册...

尝试将您的活动添加到 androidmanifest.xml

```
<activity
    android:name="com.xyz.Main.MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

试试这个...

# javascript - dojo issue in firefox

> ID：15929992
> 
> 赞同：0
> 
> 时间：2013-04-10T15:21:56.320
> 
> 标签：javascript, internet-explorer, parsing, firefox, dojo

im using dojo 1.8 to create a website and it works fine using IE8\. however, when i turn to firefox(version 20.0) and it cannot display the page properly. i feel like the parser didnt load when using ff, but i already set the parseOnLoad to true, and async to true as well. under that circumstance, the parser is supposed to load. anyone can help me out here? thanks!

type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/dojo/1.8.3/dojo/dojo.js" data-dojo-config="parseOnLoad: true, async:true"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:47:11.803

> > 现在我得到了这个：错误：scriptError makeError()dojo.j...ssed.js（第 119 行）req.injectUrl/errorDisconnector<()dojo.j...ssed.js（第 1669 行）返回混合（新错误(错误), {src:"dojoLoader", info:info}); dojo.j...ssed.js（第 119 行）源代码：dojoLoader dojo.j...ssed.js（第 1837 行）信息：[“ajax.googleapis....s/dojo/maqetta/space.js”

看起来您还没有配置 Dojo，告诉它 maqetta 模块在哪里。

[请参阅http://dojotoolkit.org/reference-guide/1.8/dojo/_base/config.html#dojoconfig-parameters](http://dojotoolkit.org/reference-guide/1.8/dojo/_base/config.html#dojoconfig-parameters)中的路径属性

# unity3d - Fighter Game in Unity3D - Fighter hit opponent [unityscript]

> ID：15929995
> 
> 赞同：0
> 
> 时间：2013-04-10T15:22:11.500
> 
> 标签：unity3d, unityscript

I'm making a fighter game in Unity. When I punch I need to find a way for Unity to detect that if I'm hitting the opponent. The problem is that I don't seem to find a way to do so. Isn't there a way to make it detect if the meshes are touching each other or maybe some better way.

Do you have any ideas?

Regards, Robert Dan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:04:15.283

我会看看[Physics.SphereCastAll](http://docs.unity3d.com/Documentation/ScriptReference/Physics.SphereCastAll.html)。球体投射类似于射线投射。考虑球体投射一个*厚的射线投射*。这背后的想法是从出拳的起点向出拳的方向投射一个球体。如果从函数返回任何对撞机，那么您就知道它撞到了什么东西，所以您只需要检查它撞到的东西是否满足正确的条件（即另一个玩家）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:02:00.757

最明显的解决方案是将网格碰撞器和运动学刚体添加到您正在攻击的网格中，并使用 OnCollisionEnter 检测与其他刚体的碰撞。

# java - Unable to invoke web service with security

> ID：15929997
> 
> 赞同：0
> 
> 时间：2013-04-10T15:22:13.210
> 
> 标签：java, jax-ws, cxf, mule, ws-security

I have crated a CXF JAXWS Service as below.

I have provided a custom UserNameToken validator and a callback handler.

But this is not working. It throws an error everytime.

```
<http:inbound-endpoint address="http://localhost:8080/HelloService"  exchange-pattern="request-response">
    <cxf:jaxws-service serviceClass="com.example.service.HelloServiceImpl" >
    <cxf:ws-security>
    <cxf:ws-config>                     
    <cxf:property key="action" value="UsernameToken" />
    </cxf:ws-config>
    <cxf:ws-custom-validator >                  
        <cxf:username-token-validator ref="customUsernameTokenValidator" />
    </cxf:ws-custom-validator>                  
      </cxf:ws-security> 
     <cxf:properties>
            <spring:entry key="ws-security.ut.validator" value-ref="customUsernameTokenValidator" ></spring:entry>
            <spring:entry key="ws-security.callback-handler" value-ref="myPasswordCallback" ></spring:entry>
        </cxf:properties>
        .....
        ..... 
```

And a policy on my WSDL binding as below

```
 <sp:SupportingTokens> 
            <wsp:Policy>
                <sp:UsernameToken sp:IncludeToken="http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient">
                    <wsp:Policy />
                </sp:UsernameToken>
            </wsp:Policy>
        </sp:SupportingTokens> 
```

I get the below error when I fire my request from SOAPUI with usernametoken and password.

```
2013-04-10 11:08:13,811 WARN  [qtp1221956599-40 - /HelloService] logging.LogUtils (LogUtils.java:384) - Interceptor for {http://example.org/HelloService}ProductSOAPService#{http://example.org/HelloService}addCompany has thrown exception, unwinding now
    org.apache.cxf.interceptor.Fault
        at org.mule.module.cxf.MuleInvoker.invoke(MuleInvoker.java:106)
        at org.mule.module.cxf.MuleJAXWSInvoker.invoke(MuleJAXWSInvoker.java:47)
        at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:75)
        .....
        .....
    Caused by: java.lang.NullPointerException
        at org.mule.module.cxf.MuleInvoker.invoke(MuleInvoker.java:60)
        ... 29 more 
```

Please help me understand what I missing here.

Note: I have tried the Mule way of implementing the security on jaxws using cxf:ws-security and my service is working and giving proper response.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:53:11.680

您的 cxf jaxws-service 应如下所示。然后它应该工作。

```
<http:inbound-endpoint address="http://localhost:8080/HelloService"  exchange-pattern="request-response">
<cxf:jaxws-service serviceClass="com.example.service.HelloServiceImpl" >
 <cxf:properties>
        <spring:entry key="ws-security.ut.validator" value-ref="customUsernameTokenValidator" ></spring:entry>
        <spring:entry key="ws-security.callback-handler" value-ref="myPasswordCallback" ></spring:entry>
    </cxf:properties>
  </cxf:jaxws-service> 
```

# c# - How to convert string to null-terminated one?

> ID：15929998
> 
> 赞同：3
> 
> 时间：2013-04-10T15:22:16.433
> 
> 标签：c#, string, data-conversion

How to convert a simple string to a null-terminated one?

### Example:

Example string: "Test message"
Here are the bytes:

```
54 65 73 74 20 6D 65 73 73 61 67 65 
```

I need string with bytes like follows:

```
54 00 65 00 73 00 74 00 20 00 6D 00 65 00 73 00 73 00 61 00 67 00 65 00 00 
```

I could use loops, but will be too ugly code. How can I make this conversion by native methods?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T15:23:22.450

看起来您想要一个以 null 结尾的 Unicode 字符串。如果字符串存储在变量`str`中，这应该有效：

```
var bytes = System.Text.Encoding.Unicode.GetBytes(str + "\0"); 
```

（[看到它运行](http://ideone.com/rGfHvy)。）

请注意，生成的数组末尾将有三个零字节。这是因为 Unicode 使用两个字节表示字符。第一个零是原始字符串中最后一个字符的一半，接下来的两个是 Unicode 如何编码空字符`'\0'`。（换句话说，使用我的代码的空字符比您最初指定的多一个，但这可能是您真正想要的。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T15:46:40.310

C# 字符串的一些背景知识是一个很好的起点。

C# 字符串的内部结构与 C 字符串不同。a) 它是 unicode，就像 'char' b) 它不是以 null 结尾的 c) 它包括许多 C/C++ 中需要的实用程序函数。

它如何在没有空终止的情况下逃脱？简单的！C# String 在内部管理一个 char 数组。C# 数组是结构，而不是指针（如在 C/C++ 中）。因此，他们知道自己的长度。C/C++ 中的 Null 终止是必需的，以便字符串实用程序函数（如 strcmp()）能够检测内存中字符串的结尾。

c# 中确实存在空字符。

```
string content = "This is a message!" + '\0'; 
```

这将为您提供一个以空终止符结尾的字符串。重要的是，空字符是不可见的，不会出现在任何输出中。它将显示在调试窗口中。当您将字符串转换为字节数组（用于保存到磁盘和其他 IO 操作）时，它也会出现，但如果您这样做`Console.WriteLine(content)`，它将不可见。

您应该了解为什么要使用空终止符，以及为什么要避免使用循环构造来获得所需的内容。除非您最终转换为字节数组，否则以空结尾的字符串在 c# 中是相当无用的。通常，只有当您想通过网络或 USB 设备将字符串发送到本机方法时，您才会这样做。

了解如何获取字节也很重要。在 C/C++ 中，一个 char 存储为 1 个字节（8 位），编码为 ANSI。在 C# 中，编码是 unicode，它是两个字节（16 位）。Jon Skeet 的回答向您展示了如何获取 unicode 中的字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T15:58:24.573

面面相觑，但可能有用的答案。如果您在**屏幕上**以十六进制输出后，如您所显示的那样，您需要执行两个步骤：

1.  将字符串（末尾带有空字符'\0'）转换为字节数组
2.  转换以十六进制编码的字节字符串表示
3.  与空格交错
4.  打印到屏幕

尝试这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace stringlulz
{
    class Program
    {
        static void Main(string[] args)
        {
            string original = "Test message";

            byte[] bytes = System.Text.Encoding.Unicode.GetBytes(original + '\0');

            var output = bytes.Aggregate(new StringBuilder(), (s, p) => s.Append(p.ToString("x2") + ' '), s => { s.Length--; return s; });

            Console.WriteLine(output.ToString().ToUpper());
            Console.ReadLine();
        }
    }
} 
```

输出是：

> 54 00 65 00 73 00 74 00 20 00 6D 00 65 00 73 00 73 00 61 00 67 00 65 00 00 00

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-26T22:16:31.807

这是一个经过测试的 xml 命令空终止的 C# 示例，效果很好。

```
strCmd       = @"<?xml version=""1.0"" encoding=""utf-8""?><Command name=""SerialNumber"" />";
sendB        = System.Text.Encoding.UTF8.GetBytes(strCmd+"\0");
sportin.Send = sendB; 
```

# opencv - 使用 OpenCV 进行人脸检测：如何获取每个检测到的人脸的邻居数？

> ID：15929999
> 
> 赞同：2
> 
> 时间：2013-04-10T15:22:23.170
> 
> 标签：opencv, face-detection

我正在使用 C++ 函数

> void CascadeClassifier::detectMultiScale(const Mat& image, vector& objects, double scaleFactor=1.1, int minNeighbors=3, int flags=0, Size minSize=Size(), Size maxSize=Size())

在 OpenCV 中进行人脸检测。众所周知，每个检测到的人脸的邻居数可以被视为置信度分数。我想知道如何在不破解源代码的情况下获得邻居的数量。我发现 Python 中的 OpenCV 实际上可以返回邻居的数量（见[这里](http://opencv.willowgarage.com/documentation/python/objdetect_cascade_classification.html#haardetectobjects)）。但是C++呢？是否有任何函数可以直接将这些值与检测到的人脸一起返回？

非常感谢。