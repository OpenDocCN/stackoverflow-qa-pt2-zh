# StackOverflow 问答 12769000-12769999

# iphone - 无法在 iphone 上更新linkedIn 的状态

> ID：12769001
> 
> 赞同：1
> 
> 时间：2012-10-07T12:52:18.720
> 
> 标签：iphone, objective-c, cocoa-touch, linkedin

我正在使用以下代码

```
 - (void)linkedInEngineAccessToken:(RDLinkedInEngine *)engine setAccessToken:(OAToken *)token {
        if( token ) {
            [token rd_storeInUserDefaultsWithServiceProviderName:@"LinkedIn" prefix:@"My app name"];
        }
        else {
            [OAToken rd_clearUserDefaultsUsingServiceProviderName:@"LinkedIn" prefix:@"My App name"];

        }
    }

    - (OAToken *)linkedInEngineAccessToken:(RDLinkedInEngine *)engine {
        return [OAToken rd_tokenWithUserDefaultsUsingServiceProviderName:@"LinkedIn" prefix:@"My app name"];
    }

    - (void)linkedInEngine:(RDLinkedInEngine *)engine requestSucceeded:(RDLinkedInConnectionID *)identifier withResults:(id)results {
        NSLog(@"++ LinkedIn engine reports success for connection %@\n%@", identifier, results);
        if( identifier == self.fetchConnection ) {
        //    NSDictionary* profile = results;

        }
    }

    - (void)linkedInEngine:(RDLinkedInEngine *)engine requestFailed:(RDLinkedInConnectionID *)identifier withError:(NSError *)error {
        NSLog(@"++ LinkedIn engine reports failure for connection %@\n%@", identifier, [error localizedDescription]);
    }

    - (void)fetchProfile {
        self.fetchConnection = [self.engine profileForCurrentUser];
        [self.engine updateStatus:@"Download app from the #Apple #AppStore and #Android #GooglePlay market."];
        [self dismissModalViewControllerAnimated:YES];
    }

    #pragma mark - RDLinkedInAuthorizationControllerDelegate

    - (void)linkedInAuthorizationControllerSucceeded:(RDLinkedInAuthorizationController *)controller {
        [self fetchProfile];
    }

    - (void)linkedInAuthorizationControllerFailed:(RDLinkedInAuthorizationController *)controller {

    }

    - (void)linkedInAuthorizationControllerCanceled:(RDLinkedInAuthorizationController *)controller {

    }

    @end 
```

我已经正确设置了东西。它需要我到linkedIn登录页面，登录后授予权限我收到此错误

> 无法加载页面错误域=NSURLErrorDomain 代码=-1003“找不到具有指定主机名的服务器。” UserInfo=0x81e2250 {NSErrorFailingURLStringKey=http://www.devbee.ca/?oauth_token=MY_TOKEN&oauth_verifier=VERIFIER, NSErrorFailingURLKey=MY_REDIRECT_URL/?oauth_token=MY_OAUTH_TOKEN&oauth_verifier=MY_VERIFIER, NSLocalizedDescription=找不到指定主机名的服务器。, NSUnderlyError= 0x810ddc0 "找不到指定主机名的服务器。"}

怎么了？

是不是因为

```
- (OAToken *)linkedInEngineAccessToken:(RDLinkedInEngine *)engine {
            return [OAToken rd_tokenWithUserDefaultsUsingServiceProviderName:@"LinkedIn" prefix:@"My app name"];
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:32:32.897

问题来自[http://www.devbee.ca](http://www.devbee.ca)没有启动和运行。我不知道您所指的代码或配置中的哪一点[http://www.devbee.ca](http://www.devbee.ca)，但这就是错误所在。

我猜在您的 LinkedIn 应用程序的配置中，您已将其设置`OAuth Accept Redirect URL`为[http://www.devbee.ca](http://www.devbee.ca)，这是一个不存在的 URL。但这只是一个猜测，您需要四处挖掘以找出 LinkedIn 将您重定向到[http://www.devbee.ca](http://www.devbee.ca)的原因。

**更新**

您似乎需要`http://linkedin_oauth/success`在应用程序的配置中将此 OAuth 接受重定向 URL 设置为。它在[GitHub 项目](https://github.com/ResultsDirect/LinkedIn-iPhone)的 How To 中说明了这一点：

> 最重要的是，必须将 OAuth 重定向 URL 设置为： `http://linkedin_oauth/success`以便通知 Web 视图的委托

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:07:14.813

由于 URL 连接错误，这是您的重定向 url 有问题。

看，错误说：`"A server with the specified hostname could not be found"`。这意味着您没有互联网连接，或者在您的提供商的 DNS 列表中找不到您的服务器主机名，或者您的服务器 url 错误。

你可以尝试什么。错误指定错误 url: `"NSErrorFailingURLKey=MY_REDIRECT_URL/?oauth_token=MY_OAUTH_TOKEN&oauth_verifier=MY_VERIFIER"`。您可以尝试在 Mac 上的 Safari/Chrome/etc 中打开指定的 url `"MY_REDIRECT_URL/?oauth_token=MY_OAUTH_TOKEN&oauth_verifier=MY_VERIFIER"`，看看会发生什么。如果您看到相同的错误，您应该仔细检查您的重定向 URL。如果成功打开，则说明 iOS 应用程序有问题。

# c# - HTTP Webrequest Wrapper / Helper Library

> ID：12769003
> 
> 赞同：2
> 
> 时间：2012-10-07T12:52:26.190
> 
> 标签：c#, .net, vb.net, httpwebrequest

我想知道你们是否可以让我知道好的 http 包装器/帮助器库来获取和发送用于 .NET Framework 3.5+ 的数据

Webclient 不适合我的需求，所以寻找一个好的替代方案。如果我没有找到任何好处，那么我将只使用自定义 webrequest 代码。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:31:12.720

一些用于 REST 客户端或 HTTP 的库：

1.  WebClient, HttpWebRequest/HttpWebResponse 正如你所说

2.  HttpClient 类

    对于 .NET 4.5 但这是一件非常酷的事情 [http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)

3.  RestSharp

    示例和文档甚至源代码都在尝试查找。网站 [http://restsharp.org/](http://restsharp.org/) ,

当您需要一些 .NET 内置类（如 WebClient 和 HttpClient）的替代品时 - 我建议尝试使用 RestSharp

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T04:13:32.250

我最近在服务堆栈（.NET 3.5 和 4）[http://www.servicestack.net/](http://www.servicestack.net/)上也很幸运。

# windows-phone-7 - 使应用程序可用于不同的语言

> ID：12769012
> 
> 赞同：1
> 
> 时间：2012-10-07T12:53:39.127
> 
> 标签：windows-phone-7, localization, marketplace

我完成了一个新的 WP7 应用程序，并且可以通过自定义代码切换到不同的语言。我想添加英语和法语，目前它只设置为德语。

当我尝试将其提交到市场时，我只能选择填写德语信息，但是我如何声明我的应用程序也可以在 EN 和 FR 中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:56:32.267

请参阅MSDN 上的[HowTo：。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff637520%28v=vs.92%29.aspx)

想法：如果您有支持语言的资源，则需要在**.csproj**文件中声明它们

```
<SupportedCultures>de-DE;fr-FR;us-EN;</SupportedCultures> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:56:13.757

**感谢安东，**我找到了解决方案：

如果您最终像我一样，请执行此操作以手动为您的应用添加不同的语言支持（无需填写资源）：

在您的项目中创建新资源项并将其命名为 AppResources.en-GB.resx 等。它应该符合语法。您无需填写或明确使用这些资源文件。

之后，您转到项目的 .csproj 文件并将这些语言信息添加（参见上面的帖子）到其中。然后，您会看到市场可以识别这些语言。

# c++ - 你能从 C++ 中的溢出中得到一个“nan”吗？

> ID：12769014
> 
> 赞同：2
> 
> 时间：2012-10-07T12:53:44.503
> 
> 标签：c++, debugging, nan

我正在编写一个程序，它使用非常长的递归（大约 50,000）和一些非常大的向量（双精度类型的长度也为 50,000）来存储每个递归的结果，然后再对它们进行平均。在程序结束时，我希望得到一个数字输出。

但是，我得到的一些结果是“nan”。神秘的是，如果我减少递归次数，程序就可以正常工作。所以我猜这可能与向量的大小有关。所以我的问题是，如果你在一个很长的向量（或者说数组）中溢出，会有什么影响？你会像我一样得到一个“nan”吗？

关于我的程序的另一个神秘之处是我尝试了一些更大的递归（100,000），但输出正常。但是当我更改了一个参数值，使得存储在向量中的每个数字都会变大（尽管它们仍然是 double 类型），输出变为“nan”。向量的最大容量是否取决于它存储的数字的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:07:14.110

您没有告诉我们您的递归是什么，但是如果您使用平方根、pow、反正弦或反余弦，则很容易生成具有长操作序列的 NaN。

假设您的计算产生了一个量，称为它`x`，它应该是某个角度 θ 的正弦值，并假设基础数学规定它`x`必须始终介于 -1 和 1 之间（含）。您通过取 的反正弦来计算 θ `x`。

这就是问题所在：在计算机上完成的算术只是对实数算术的近似。IEEE 浮点数的加法和乘法是不可传递的。你很可能得到一个 1.0000000000000002`x`而不是 1 的值。取这个值的反正弦，你得到一个 NaN。

一个标准的技巧是防止那些因数值错误而导致的未遂事件。不要使用内置的`asin`, `acos`,`sqrt`和`pow`. 使用可以防止诸如`asin(1.0000000000000002)`和之类的包装器`sqrt(-1e-16)`。将前者设为 pi/2 而不是 NaN，并将后者设为零。诚然，这是一个杂牌，这样做会给你带来麻烦。如果问题是您的计算公式不正确怎么办？将 1.0000000000000002 视为 1 是合法的，但最好不要将值 100 视为 1。`asin`包装器的值 100 最好通过抛出异常而不是截断为 1 来处理。

无穷大和 NaN 还有另一个问题：它们会传播。一次计算中的 Inf 或 NaN 很快就会变成数百个值的 Inf 或 NaN，然后​​是数千个值。我通常让浮点机器在获取 Inf 或 NaN 时引发浮点异常，而不是继续。（请注意：浮点异常不是 C++ 异常。）当你这样做时，你的程序会爆炸，除非你有一个信号处理程序。这不一定是坏事。您可以在调试器中运行该程序并准确找到问题所在。如果没有这些浮点异常，就很难找到问题的根源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T12:59:55.537

取决于您的计算的确切性质。如果您只是将*不是*NaN 的数字相加，那么结果也不应该是 NaN。不过，它可能是+无穷大。

但是，如果您的计算的某些部分产生 +infinity，另一个 -infinity，并且您稍后将这两个结果相加，您*将得到 NaN。*

假设您的体系结构符合 IEEE 754，此[http://en.wikipedia.org/wiki/NaN#Creation](http://en.wikipedia.org/wiki/NaN#Creation)说明算术运算返回 NaN 的情况。

# mysql - 在 MySQL 中花费很长时间的简单查询

> ID：12769015
> 
> 赞同：2
> 
> 时间：2012-10-07T12:53:51.933
> 
> 标签：mysql

我必须监督一些事情，但我有以下查询：

```
SELECT
    `Poster`, Round(Sum(If((`Date`>=DATE_ADD(CURDATE(),INTERVAL -1 Month) And `Date`<CURDATE()),1,0))/DATEDIFF(CURDATE(),DATE_ADD(CURDATE(),INTERVAL -1 Month)),0) AS `statistics`
FROM `forenposts`
GROUP BY `Poster`
ORDER BY `statistics` DESC
LIMIT 5 
```

在拥有超过 150 万个条目的数据库中，这大约需要 15 秒。

有没有一种简单的方法来优化它，或者如果函数只需要这么长时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:19:29.430

你可以试试这个查询吗？我从查询中删除了一些常量计算，因为每一行的操作往往非常慢。另外，我会在查询中使用常量，而不是 CURDATE() 函数，因此数据库服务器可以对其进行优化。我不能尝试，让我知道它是否有效，我可以用更多细节来解释它。

```
SET @CURDATE = CURDATE(); 
SET @DATEADD = DATE_ADD(@CURDATE,INTERVAL -1 Month);
SET @DATEDIFF = DATEDIFF(@CURDATE,@DATEADD);

SELECT
    `Poster`, 
    Round(Sum(If((`Date`>=@DATEADD And `Date`< @CURDATE), 1, 0)) / @DATEDIFF,0) AS `statistics`
FROM `forenposts`
GROUP BY `Poster`
ORDER BY `statistics` DESC
LIMIT 5 
```

# php - php preg_replace 从帖子标题制作 seo 链接的问题

> ID：12769018
> 
> 赞同：1
> 
> 时间：2012-10-07T12:54:31.040
> 
> 标签：php, regex, string

我制作了一个功能，用于从帖子标题中制作关键字并替换完整帖子中的每个单词。

这是我的功能

```
function myseonew($title,$text){
$title = stripslashes($title);
$text = stripslashes($text);    
$fburl = 'http://' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
$keywords = explode(" ",$title);
$regex = '/('.implode('|', $keywords).')/i';
$output = preg_replace($regex, '<a id="smalltext" href="'.$fburl.'">\\1</a>', $text);
return $output;
} 
```

但是我在输出所有字符时遇到了问题（��������）。

那么有什么办法可以解决这个问题

顺便说一下，我的编码是 UTF-8

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:49:28.867

尝试在您的正则表达式中使用 u 修饰符：

```
$regex = '/('.implode('|', $keywords).')/iu'; 
```

# c# - C#如何调查我的服务意外停止的原因

> ID：12769022
> 
> 赞同：1
> 
> 时间：2012-10-07T12:55:07.060
> 
> 标签：c#, exception

我的服务在随机的时间内工作得很好，然后就停止了。

我正在捕捉我能看到的所有异常。我在服务创建周围添加了一个 try/catch 来尝试得到某种错误，但我什么也没得到。服务刚刚停止。

```
 try
        {
                ServiceBase[] ServicesToRun;
                ServicesToRun = new ServiceBase[] { new my_service() };
                ServiceBase.Run(ServicesToRun);
        }
        catch (Exception e)
        {
            logEvent(e);   // Log any errors to a .txt file.
        } 
```

事件查看器显示以下内容：

```
Faulting application name: my_service.exe, version: 0.9.2.1, time stamp: 0x50717154
Faulting module name: ntdll.dll, version: 6.1.7601.17514, time stamp: 0x4ce7b96e
Exception code: 0xc0000005
Fault offset: 0x00055f99
Faulting process id: 0x%9
Faulting application start time: 0x%10
Faulting application path: %11
Faulting module path: %12
Report Id: %13 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T13:06:32.177

无法猜测您提供的信息出了什么问题。但是您可以尝试使用一种技巧来捕获每个未捕获的异常，并将其记录下来。

这是我在项目中的做法：

首先，在我的 Main() 中，我订阅了以下事件：

```
AppDomain.CurrentDomain.UnhandledException += UnhandledExceptionHandler; 
```

我定义了处理程序，它只是将堆栈跟踪记录到文件中并将其打印到控制台（尽管它与您无关，因为您将应用程序作为服务运行）：

```
private static void UnhandledExceptionHandler(object sender, UnhandledExceptionEventArgs e){
        try{
            Logger.Append(Severity.CRITICAL, "Unhandlable error : "+e.ExceptionObject); 

        }catch{}
        Console.WriteLine("Unhandlable error : "+e.ExceptionObject);
        Environment.Exit(10);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T13:07:45.827

如果您的服务已启动并正在运行，那么四处登录`Run()`对您没有多大好处，因为在该方法中没有执行任何操作。它基本上只会触发您的服务`OnStart`方法。

正常情况是您的服务`OnStart`方法启动一个全新的线程来运行实际服务。您需要在该线程中进行日志记录。在该线程的整个 threadstart 方法周围放置一个 try/catch，或订阅 AppDomain.CurrentDomain.UnhandledException 应该会为您提供服务正在生成但未捕获的任何异常，以便您可以记录它们。

但是问题（这很难知道，因为您没有显示服务的代码）似乎是服务在 ntdll.dll 中崩溃，这可能是 pinvoke（调用外部本机 DLL），这意味着您可能不会获取要捕获的任何异常。调试本机崩溃是一门完全不同的科学。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T13:28:44.593

你总是可以做一个简单的控制台应用程序，引用程序集，并从控制台应用程序调用代码并轻松调试它。（远射最简单的选择）。

# ruby-on-rails - 是否可以建立 #has_one 多态关联？

> ID：12769023
> 
> 赞同：3
> 
> 时间：2012-10-07T12:55:22.387
> 
> 标签：ruby-on-rails, activerecord, associations, polymorphism

我有一个应用程序，人们可以在其中进行测验。测验可以有许多问题，可以是不同类型的（“对或错”，在一组提供的答案中进行选择等）。

我发现最好的实现方式是有一个`Question`模型（和`questions`表），然后我将它的数据保存在不同的表中，这取决于它是什么类型的问题。例如，如果它是一个“真或假”问题，那么它会将其数据保存在

```
create_table :boolean_question_data do |t|
  t.boolean :answer
end 
```

例如，如果它是一个“图像”问题，那么它会将其数据保存在

```
create_table :image_question_data do |t|
  t.attachment :image
  t.string :image
end 
```

等等。

所以，我想实现这个的一种方法（我愿意接受建议:)）是`questions`表有列`#id`和`#category`，“数据”表（`boolean_question_data`, `image_question_data`）有一个`#question_id`列（**没有**主键），我也有这在我的`Question`模型中：

```
has_one :data, polymorphic: true 
```

我之所以要这样做，是因为我希望问题具有唯一的主键，而不管类别如何。所以，我想要正常的 URL，比如`/questions/3`，`Question`模型只会搜索`#id`3 的，然后看到它`#category`是“布尔值”，然后它知道它必须在`boolean_question_data`表中搜索它的数据。

我**不能**使用多态`belongs_to`（而不是`has_one`）的原因是因为它不适合这种用法。它没有为我提供`#build_data`等`#create_data`，而是希望我以相反的方式编写代码，即从“数据”模型中引用问题。这显然不是我想做的事情。

我会自己编写该关联，但我也想使用很多选项 ( `autosave: true, validate: true, dependent: :destroy`)，因此手动编写所有这些有点过头了。

你对我有什么建议吗？

# c# - C#/asp.net 将数据从一页发送到另一页时出错

> ID：12769027
> 
> 赞同：0
> 
> 时间：2012-10-07T12:55:57.450
> 
> 标签：c#, asp.net

> **可能重复：**
> [在 C# ASP.Net 中将数据从一个页面发送到另一个页面](https://stackoverflow.com/questions/12768674/send-data-from-one-page-to-another-in-c-sharp-asp-net)

嗨，我正在尝试在 asp.net 中将数据从一个页面发送到另一个页面，我发现了各种这样做的方法，我会尝试一些方法来了解它们是如何工作的，但我第一次尝试时似乎遇到了错误。这是我的代码：

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<br />
<asp:Button ID="Button1" runat="server" Text="Go" 
    PostBackUrl="~/Default2.aspx" />
<br /> 
```

我将数据从 Default.aspx 发送到 Default2.aspx。在 Page_Load 方法的 Default2.aspx 中，我写了这个来检索数据：

```
 if (Page.PreviousPage != null)
    {
        string txtBox1 = ((TextBox)Page.PreviousPage.FindControl("TextBox1")).Text;
    } 
```

从我在 MSDN 上阅读的内容来看，这应该可以工作，但我必须遗漏一些东西，因为当我按下按钮发送数据并加载 Default2.aspx 时，我得到一个如下所示的错误页面：

![在此处输入图像描述](../Images/c501c96db40ea88bbd60d5565a2288da.png) ![在此处输入图像描述](../Images/a009bbafb96e3aff4f33c983d8cd1731.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:39:17.283

如果您对 Default.aspx 使用母版页，则 Page.PreviousPage.FindControl 不起作用。因为在使用masterpage时，Default.aspx中的所有控件都放在ContentPlaceHolder中，而不是直接放在Form中。所以你可以使用下面的代码：

```
Page.PreviousPage.Form.FindControl("yourContentPlaceHolderID").FindControl("TextBox1"); 
```

我假设您使用母版页。否则，您的第一个代码必须有效。此外，如果您不使用母版页并将文本框放置在 PlaceHolder 或 Panel 中，您的代码将无法正常工作。FindControl 不会在子容器控件中递归搜索。

请参阅链接。[MSDN](http://msdn.microsoft.com/en-us/library/31hxzsdw.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:01:25.120

`Page.PreviousPage`仅在`Server.Transfer`用于重定向到新页面时可用。如果这是标准`GET`或`POST`，`Response.Redirect`则此代码将不起作用。

从您的上一页。用于`Server.Transfer`访问前一页数据。

# android - OpenGL ES 1.0 Android 简单顶点绘制

> ID：12769032
> 
> 赞同：0
> 
> 时间：2012-10-07T12:56:34.203
> 
> 标签：android, opengl-es

我正在尝试绘制一些三角形，但由于某种原因，我只得到了背景。我想念什么？

这是我的代码。它有 2 个缓冲区，在第一次调用 onDrawFrame 时创建，这些缓冲区从我通过加载 .OBJ 文件创建的 ArrayList 或 ArrayList 加载顶点和三角形数据。

```
 public FloatBuffer fb = null; // To be loaded once in the first draw
    public ShortBuffer ib = null;

    @Override
    public void onDrawFrame(GL10 gl)
        {
        gl.glEnable(GL10.GL_DEPTH_TEST);
        gl.glEnable(GL10.GL_LINE_SMOOTH);
        gl.glEnable(GL10.GL_POINT_SMOOTH);

        // Clear white
        gl.glClearColor(1,0,0,1);
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);            

        // Look At
        gl.glPushMatrix();
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
        GLU.gluLookAt(gl, 0, 0, -4, 0, 0, 0, 0,1.0f,0);
        try
            {
            gl.glColor4f(1.0f,1.0f,0,1.0f);
            int nv = SomeVertexArray.size();
            int nt = SomeTriangleArray.size();
        if (fb == null)
            {
            int TotalFBByteSize = 4*3*nv;
            fb = ByteBuffer.allocateDirect(TotalFBByteSize).order(ByteOrder.nativeOrder()).asFloatBuffer();
            fb.clear();
            for(int i = 0 ; i < SomeVertexArray.size() ; i++)
                {
                VERTEX v = SomeVertexArray.get(i);
                fb.put(v.x);
                fb.put(v.y);
                fb.put(v.z);
                }
            }
        if (ib == null)
            {
            int TotalTRByteSize = 4*3*nt;
            ib = ByteBuffer.allocateDirect(TotalTRByteSize).order(ByteOrder.nativeOrder()).asShortBuffer();
            ib.clear();
            for(int i = 0 ; i < nt ; i++)
                {
                TRIANGLE v = SomeTriangleArray.get(i);
                ib.put((short)v.i1);
                ib.put((short)v.i2);
                ib.put((short)v.i3);
                }
            }

        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glVertexPointer(3, GL10.GL_FLOAT, 0,fb);
        gl.glDrawElements(GL10.GL_TRIANGLES, nt*3, GL10.GL_UNSIGNED_SHORT,ib);
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
            }
        catch(Throwable ex)
            {
            ex.printStackTrace();
            }
        gl.glPopMatrix();
        gl.glFlush();

        }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height)
        {
        gl.glViewport(0, 0, width, height);
                gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity(); //reset projection matrix
                    GLU.gluPerspective(gl,54.0f, (float)width/(float)height, 1.0f, 1000.0f);
        gl.glMatrixMode(GL10.GL_MODELVIEW); //set modelview matrix
        gl.glLoadIdentity(); //reset modelview matrix
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:03:10.683

通过使用 fb.put(float[]) 而不是 fb.put(float) 解决了这个问题，即将整个顶点/三角形数组一次传递给直接缓冲区，而不是在循环内。

我不知道为什么，但它奏效了。

# xamarin.ios - 从通过设置 Cell.Accessory 添加的 DetailDisclosureButton 显示 UIPopoverController

> ID：12769034
> 
> 赞同：1
> 
> 时间：2012-10-07T12:56:58.310
> 
> 标签：xamarin.ios, uipopovercontroller, monotouch.dialog, uitableview

我有一个 UITableView，我使用的方式与Xamarin的[本教程中演示的方式相同。](http://docs.xamarin.com/ios/recipes/Content_Controls/Tables/Add_a_Cell_Accessory "这")

根据示例中的说明，我在方法中将 设置`cell.Accessory`为 a ，如下所示：`DetailDisclosureButton``GetCell`

```
public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
{
     (Some code to create/style the cell, etc. See tutorial link.)
     cell.Accessory = UITableViewCellAccessory.DetailDisclosureButton;
} 
```

我想`UIPopoverController`在点击时显示一个`DetailDisclosureButton`。它的锚点需要“附加”到按钮上。

为此，我需要`AccessoryButtonTapped`相应地更改方法，如下所示：

```
public override void AccessoryButtonTapped (UITableView tableView, NSIndexPath indexPath)
{
        uipoc = new UIPopoverController(uivc);
        uipoc.PopoverContentSize = new SizeF(200f, 300f);
        uipoc.PresentFromRect (tableView.CellAt (indexPath).AccessoryView.Frame, tableView, UIPopoverArrowDirection.Right, true);
} 
```

`Uipoc`是一个类变量，和 (still empty) 一样`UIViewController uivc`。

据我了解，`PresentFromRect`的第一个参数确定 UIPopoverController '挂钩'到的 UIView，它需要该视图的 Frame 属性才能这样做。

不幸的是，我上面的方法不起作用。`cell.AccessoryView`始终为空，即使我已设置`cell.Accessory`为`DetailDisclosureButton`.

[此处列出](https://stackoverflow.com/questions/3171637/show-a-uipopovercontroller-from-a-detail-disclosure-button-in-a-uitableviewcell "这里")的答案表明设置`cell.Accessory`不影响`cell.AccessoryView`属性（我知道它处理的是 ObjectiveC，但我想这同样适用于 MonoTouch）。

相反，建议通过分配 a来 `DetailDisclosureButton`手动添加 a 。但是，这意味着我不能使用Xamarin 示例中的方法，需要创建自己的事件处理程序，等等。`UIButton``cell.AccessoryView``AccessoryButtonTapped`

作为替代方案，我尝试在单元格中循环`Subviews`，并像这样连接 popovercontroller：

```
uipoc.PresentFromRect (tableView.CellAt(indexPath).Subviews[1].Frame, tableView, UIPopoverArrowDirection.Right, true); 
```

但是，使用`Subviews[0]`and `Subviews[2]`，它根本不起作用，同时`Subviews[1]`给了我奇怪的结果 - 弹出菜单总是显示`DetailDisclosureButton`在表格中的第一个单元格旁边，无论点击哪个单元格的按钮。

**我的问题：**如果只是设置为， 有没有办法获得`DetailDisclosureButton`的视图（ergo，附件的视图）？`cell.Accessory``UITableViewCellAccessory.DetailDisclosureButton`

如果不是，后一种解决方案（`UIButton`手动添加）是实现我想要的唯一方法吗？如何在 C#/MonoTouch 中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:02:28.353

经过一番摆弄后，我发现了一个有点难看但可行的解决方法：

```
public override void AccessoryButtonTapped (UITableView tableView, NSIndexPath indexPath)
{
    uipoc = new UIPopoverController(uivc);
    uipoc.PopoverContentSize = new SizeF(200f, 300f);
    uipoc.PresentFromRect (new RectangleF(cell.Frame.Right - 40f, cell.Frame.Y, cell.Frame.Width, cell.Frame.Height), tableView, UIPopoverArrowDirection.Right, true);
} 
```

我不需要附件的位置信息`Frame`，而是使用其`cell`自身的信息并从其右侧减去 40。这将在该单元格`UIPopupViewcontroller`的左侧显示`DetailDisclosureButton`，其箭头指向它。显然，您需要为正确的尺寸减去（或添加）40，具体取决于`UIPopoverArrowDirection`您选择的尺寸。

我怀疑这是正确的方法，但我想我会坚持下去，除非有人提出更好的建议。

# c# - 如何在 C# ASP.Net 中获取 jQuery 自动完成“标记”值

> ID：12769041
> 
> 赞同：1
> 
> 时间：2012-10-07T12:58:28.813
> 
> 标签：c#, javascript, jquery, asp.net, jquery-ui

我正在使用[Tagify](https://i.stack.imgur.com/shLtB.png)，它基本上是使用 jQuery Autocomplete，

参考 ：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js"></script>
    <script src="../../../Scripts/jquery.tagify.js" type="text/javascript"></script>
    <link href="../../../Styles/jqueryTagify.css" rel="stylesheet" type="text/css" /> 
```

脚本 ：

```
<script>
        var myTextArea = $("#txtbox").tagify();
        myTextArea.tagify('inputField').autocomplete({
            source: function(request, response) {
                $.ajax({
                    type: "POST",
                    url: "Demo.aspx/GetKeyword",
                    data: "{'match': '" + request.term + "'}",
                    dataType: "json",
                    contentType: "application/json",
                    success: function(data) {
                        response($.map(data, function(item) {
                            return {
                                label: item,
                                value: item,
                            }
                        }));
                    }
                });
            },
            position: { of: myTextArea.tagify('containerDiv') },
            close: function(event, ui) { myTextArea.tagify('add'); },
        });
        $('form').submit( function() {
             var tagStr = $("#txtbox").tagify('serialize');
             alert( "Got tags: " + tagStr );
             return false;
        });
      </script> 
```

HTML是：

```
<input type="text" id="txtbox" />
<input class="submit" type="submit" value="Get Values" /> 
```

所以当我们点击提交按钮时，我们从这里获取标签值

> var tagStr = $("#txtbox").tagify('serialize');

当我点击这样`getvalues`的结果 时![在此处输入图像描述](../Images/53945c81996da35e7cbf99d5f835f897.png)

我怎样才能在 C# 的代码隐藏中获得这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:03:43.513

在html中添加一个隐藏字段：

```
<input id="hiddenTags" name="tags" type="hidden"/> 
```

并更新提交js：

```
 $('form').submit( function() {
         var tagStr = $("#txtbox").tagify('serialize');
         alert( "Got tags: " + tagStr );
         $('#hiddenTags').val(tagStr);
         return false;
    }); 
```

现在您可以在 c# 中获取标签：

```
string tags = Request.Form["tags"]; 
```

# .net - 有没有从矢量坐标返回距离和角度的常用方法？

> ID：12769042
> 
> 赞同：-1
> 
> 时间：2012-10-07T12:58:48.027
> 
> 标签：.net, math, vector-graphics

我需要从 Vector2 获取角度（0~359.99°）和距离。在 Math 或 XNA 命名空间中的某个地方是否有通用方法？

我不是在寻找自定义实现，而是在寻找“官方”实现。看起来它们通常比定制的更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:02:05.937

该`Vector2.Length`方法返回向量的长度（即您所说的“距离”）。

要找到角度，请使用`Math.Atan2(P.Y, P.X)`。

该角度将以相对于正 X 轴（即标准欧几里得坐标）逆时针的弧度来测量。将结果乘以`180 / Math.PI`将其转换为度数。

# php - 用 jquery、ajax 注入 PHP

> ID：12769044
> 
> 赞同：0
> 
> 时间：2012-10-07T12:58:59.340
> 
> 标签：php, jquery, wordpress

我正在尝试将 PHP 注入到 wordpress 博客页面上的 div 元素中。我让它可以处理静态内容，但我的脚本不会加载 PHP。我的动态/PHP代码：

```
<?php // data.php
    $args = array( 'numberposts' => 1, 'category' => 4, 'orderby' => 'rand' );
    $postslist = get_posts( $args );
    // Get posts associated with category 4
     foreach ($postslist as $post) :  setup_postdata($post); ?> 
          <h2><?php the_title(); ?></h2>
              <?php 
                  global $more; 
                   $more=0;
                   the_content('read more');
               ?> 
 <?php endforeach; ?> 
```

我的ajax调用：

```
(function($) {
  $("div#content-here").click(function(){
  var url = '/wp-content/themes/elevenchild/data.php';

  $("div#content-here").load(url);
});
})( jQuery ); 
```

我的观点自然有

```
<div id="content-here"></div> 
```

元素。

我的 jquery 库加载正常。我可以注入简单的 HTML，所以我的方法有效，但它不适用于 PHP？在控制台中，它报告 500 Internal Server Error。

帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:10:42.347

它*不会那样工作*。您在页面中“注入”了一些 PHP 代码，那又如何？那是因为您只在已经呈现的页面上完成了该操作，即您的客户端（浏览器）已经从服务器接收到的页面。它是动态创建的还是静态的 HTML 页面甚至都没有关系，因为您在浏览器中看到的是“最终产品”——静态 HTML。

回到我们的位置 - 您在 HTML 中插入了一些 PHP 代码。您现在需要的是运行该代码的服务器。一种方法是将其发送回服务器，但这不是工作方式。服务器将只执行 PHP 代码......在其管辖范围内，比方说（文档根等）。方法是将您的 PHP 代码注入服务器文件中，但如果有可能，那么整个网站都会受到威胁，幸运的是，这种情况并不经常发生。

# java - 如何让 spring 为所有控制器/动作设置某些变量

> ID：12769046
> 
> 赞同：1
> 
> 时间：2012-10-07T12:59:02.837
> 
> 标签：java, spring, google-app-engine, annotations, tiles

我使用谷歌应用引擎、spring 和磁贴的配置，其中每个控制器操作都会导致渲染一组嵌套（磁贴）jsp。jsp 的一些元素要为（几乎）每个控制器计算/设置，例如页面上某处的登录/注销链接：

```
<%
com.google.appengine.api.users.UserService userService =
  com.google.appengine.api.users.UserServiceFactory.getUserService();
com.google.appengine.api.users.User user = userService.getCurrentUser();
if (user != null) {%>
  <li class="active"><a href="#feeds">Feeds</a></li>
  <li class="active"><a href="<%=userService.createLogoutURL("")%>">Logout</a></li>
<%} else {%>
  <li class="active"><a href="<%=userService.createLoginURL("")%>">Login</a></li>
<%}%> 
```

当然，这是可能的，我也可以制作可以简化此类代码的静态类。然而，这不是我喜欢在我的 jsp 中拥有的东西，而且在 thymeleaf 这样的模板引擎中（可能）不可能执行这样的代码。因此，我该如何做这样的事情：

```
@RequestMapping("/foo")
public class FooController {
    @RequestMapping(value="/{bar}", method = RequestMethod.GET)
    public String getMovie(@PathVariable String bar, ModelMap model) {
        model.addAttribute("bar", bar);
        model.addAttribute("message", "message");
        UserService userService = UserServiceFactory.getUserService();
                    User user = userService.getCurrentUser();
        model.addAttribute("isLoggedIn", user==null);

        return "somepage";

    }
} 
```

总结如下：我如何防止 isLoggedIn 代码在任何地方重复，最好是一个不同于需要调用一些“initUserModel（model）”方法的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T20:08:37.683

Tiles 知道[ViewPreparer](http://tiles.apache.org/2.2/framework/tutorial/advanced/preparer.html)的概念。ViewPreparer 在定义渲染之前执行，是设置 Tiles 视图通用属性的好地方。这些属性可以是请求属性（如下所示）或切片属性，如上述[ViewPreparer 教程页面](http://tiles.apache.org/2.2/framework/tutorial/advanced/preparer.html)上的示例所示。

ViewPreparer 被实现为“普通”的 spring 服务：

```
@Component
public class YourViewPreparer implements ViewPreparer {
    @Autowired
    private UserService userService;

    @Override
    public void execute(TilesRequestContext tilesContext, AttributeContext attributeContext) {
        // Some magic here to get the HttpRequest...
        Object[] requestObjects = tilesContext.getRequestObjects();
        if (requestObjects.length == 2) {
            HttpServletRequest request = (HttpServletRequest) requestObjects[0];
            User user = userService.getCurrentUser();
            request.setAttribute("isLoggedIn", user != null);
        }
    }
} 
```

然后通过设置 preparerFactoryClass 属性来配置您的 TilesConfigurer 以获取任何 ViewPreparer bean，如下所示：

```
<bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" id="tilesConfigurer">
    <property name="definitions">
        ...
    </property>
    <property name="preparerFactoryClass" value="org.springframework.web.servlet.view.tiles2.SimpleSpringPreparerFactory" />
</bean> 
```

并在您的视图声明中定义准备者。您可以从基础视图扩展您的所有视图，这样准备者声明只需执行一次。

```
<definition name="main" preparer="com.example.YourViewPreparer">
    ...
</definition>

<definition name="myView" extends="main">
    ...
</definition> 
```

或者，如果您有除 Tiles 视图之外的其他视图，您也可以实现自己的[HandlerInterceptor 。](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/HandlerInterceptor.html)

# asp.net - SparkView 引擎可以创建自定义标签吗？

> ID：12769048
> 
> 赞同：0
> 
> 时间：2012-10-07T12:59:21.477
> 
> 标签：asp.net, asp.net-mvc, spark-view-engine

这里 [有与 JSTL 标签等效的 ASP MVC 吗？](https://stackoverflow.com/questions/772634/is-there-an-asp-mvc-equivilent-to-jstl-tags)据说jstl for循环和sparkview引擎循环之间是等价的。

但除此之外，sparview 可以允许创建自定义标签而无需深入研究 sparkview 源代码，即它是否也是一个无需触及核心即可扩展的框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T20:42:31.187

不确定我是否完全理解这个问题，但我认为您可能指的是 Spark Bindings 功能，它允许您创建自定义标签，并且在标签定义中您可以执行您想要的任何有效操作。

在此处查看 Spark 绑定：http: [//sparkviewengine.com/documentation/bindings](http://sparkviewengine.com/documentation/bindings)

# c - 在运行时使用用户输入初始化 char*

> ID：12769052
> 
> 赞同：0
> 
> 时间：2012-10-07T12:59:48.433
> 
> 标签：c

我知道这是可能的

```
char text[A_BIG_NUMBER];
printf("Enter your name");
scanf("%s",text); 
```

但是有没有办法做到这一点？（不使用 char 数组作为备份）

```
char* text;
printf("Enter your name");
scanf("%s",text); 
```

虽然第一种方法很简单，但是如果 A_BIG_NUMBER 不足以容纳用户输入的字符串，那么它将给其余代码带来问题，另一方面，如果我们使用大数字，则会浪费内存！

谢谢

**编辑：对不起，错误的标签。我只问C。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T13:03:57.697

既然你说 C++，答案是“是的，字符串”：

```
std::string name;

std::cout << "Enter your name: ";

if (!std::getline(std::cin, name)) { /* unexpected end of input */ }

// now use "name" 
```

正如您所发现的，您通常需要动态分配来存储外部数据。（你的代码不是很通用：你不能有非常大的自动数组，固定大小会添加任意幻数和约束。） C++ 是*封装动态分配**和清理*细节的完美语言，因此你可以使用简单的自动变量为您完成所有工作。

如果您不喜欢 iostreams，您可以安装自己的重载`bool getline(std::FILE *, std::string &)`，循环调用`std::fgets` 并`+=`提取完整的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:02:57.200

您当然可以使用动态分配的内存而不是数组，但溢出的根本问题仍然存在：

```
char *text = malloc(A_BIG_NUMBER*sizeof(char));
printf("Enter your name");
scanf("%s",text); 
```

你需要告诉`scanf`空间是有限的，像这样：

```
char text[201];
printf("Enter your name");
scanf("%200s",text); 
```

请注意，`text[201]`终止符有一个额外的字符空间：`%200s`将输入限制为 200 个“真实”字符，因此您需要`char`为`'\0'`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T13:06:32.003

char* 不分配内存来存储用户输入字符串，这就是第二个代码不起作用的原因。

如果您担心内存使用/浪费，您可以使用程序特定的堆栈/堆来克服这些限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T13:07:10.197

[`fgets()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fgets.html)在循环中使用一个小的（ish）缓冲区。在循环 realloc() 内部是最终目的地。

```
/* UNTESTED */
char smallish[1000];
char *destin = NULL;
size_t destin_size = 1;
while (fgets(smallish, sizeof smallish, stdin)) {
    destin_size += strlen(smallish);
    char *tmp = realloc(destin, destin_size);
    if (!tmp) /* deal with error */;
    destin = tmp;
    strcat(destin, smallish);
    if (smallish[strlen(smallish) - 1] == '\n') break;
}
/* use destin */
free(destin); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T13:20:11.803

您可以使用 getchar，这是一个示例代码：

```
 int size = 128;
  char *s = (char*)malloc (size);
  char c;
  int i;
  while ((c = getchar ()) != '\n' && c != EOF)
    {
      s[i] = c;
      ++i;
      if (i == size)
        {
          size = size * 2;
          char *tmp = realloc (s, size);
          if (tmp != NULL)
            s = tmp;
          else ; // error, try with malloc and copy or exit or whatever you want
        }
    }
  s[i] = 0; 
```

# php - facebooklike按钮的实现

> ID：12769057
> 
> 赞同：0
> 
> 时间：2012-10-07T13:00:39.120
> 
> 标签：php, javascript, html

我正在开发一个带有 html 和 php 的网站...

到目前为止，我为页面上的“赞”按钮所做的如下（概念相同，只有名称在 facebook 上不同，在我的网站上是 Points Up）

```
<form method="post">
<input type="hidden" value="<?php echo $posts[postid]; ?>" name="postid">
<input type="submit" name="pointsup" value="Points Up" />
</form> 
```

以上将创建名称为 Points Up 的按钮。

`if(isset($_POST['pointsup'])) { in this if block i have written all queries to update database and user interface and all }`

我想要的不是那个按钮，而是应该有一些链接女巫将运行我的 sql 代码。

我也尝试过 JavaScript，但它没有任何帮助

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:25:18.657

当您使用单个锚标记（超链接）时，您应该通过 GET 方法发送参数。以防万一，`/your/address/rate.php?id=`并检查`$_GET['id']`PHP（验证/清理/...）

此外，您可以使用 AJAX 将您的请求作为 POST 发送。这是 jQuery 的示例：

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

看看[这里](http://api.jquery.com/jQuery.ajax/)

但是如果你想使用纯 JavaScript，你应该使用**XMLHttpRequest**对象。看看[这里](http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:27:49.717

您应该执行以下操作：

1.  找到您应该将链接指向的位置以及需要哪些参数，我将其称为 $url。它可能涉及诸如创建附加文件、重构代码等之类的事情......
2.  编写将请求发送到 $url 的 js 方法。我将这个方法称为 sendPointsUp；
3.  创建将对 onClick 事件做出反应的链接，并从那里使用所需参数调用 sendPointsUp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:29:29.617

您可以做的只是添加一个带有 id 的链接，这样您就可以使用 jquery 轻松访问它。
创建一个 php 页面，您可以在其中执行查询和其他操作（安全检查、cookie 以及您想做的任何事情），最后将 ajax 事件附加到链接以调用您的 php 页面。

打印页面中的链接：

```
<a href="" id="voteup">Vote up</a> 
```

创建php

```
<?php
  // do the query and other stuff, return the result in json format
  // if you want to do something with the result (for example display the votes) 
```

Javascript

```
$('#voteup').click(function(e){
  $.ajax({
  url: "your/url/to/phpfile",
}).done(function(data) { 
  // rewrite link to undo vote or whatever you want
  // do something with the returned data
});
}); 
```

# c# - OpenFileDialog 后 XmlDocument 不起作用

> ID：12769058
> 
> 赞同：0
> 
> 时间：2012-10-07T13:00:43.787
> 
> 标签：c#, xml, xmldocument, openfiledialog

这真的很奇怪。我正在编写一个编写 XML 文件的应用程序。但是，在某些情况下，不会创建/覆盖该文件。

我设法追踪导致它无法写入所需的特定事件，并将其分离成一个独立的程序：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        bool doFileOpenFirst = false;

        if (doFileOpenFirst)
        {
            OpenFileDialog dialog = new OpenFileDialog();

            dialog.CheckFileExists = true;
            dialog.Filter = "Image files|*.bmp;*.jpg;*.png";

            dialog.ShowDialog();
        }

        // Just write a trivial XML file
        XmlDocument doc = new XmlDocument();
        XmlDeclaration dec = doc.CreateXmlDeclaration("1.0", "UTF-8", null);
        doc.AppendChild(dec);// Create the root element

        XmlElement root = doc.CreateElement("Database");
        doc.AppendChild(root);

        doc.Save("Trivial.xml");
    }
} 
```

现在，如果您运行它，您将看到它最初是有效的。现在使 doFileOpenFirst 为真。在它写入 XML 之前，它会显示一个用于打开文件的对话框。如果您使用此对话框选择文件（任何文件；*不是*“Trivial.xml”），之后的 XML 保存将失败。默默。如果您在 OpenFileDialog 中点击取消，保存将正常工作。

所以这里的文件句柄可能存在一些问题，但解决方法是什么？您会看到强制 Dispose 的 OpenFileDialog 没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:17:49.150

您的对话框 (OpenFileDialog) 和您的 XML 保存代码彼此独立。因此，无论是否显示对话框都不会导致 XML 保存问题，尤其是在对话框中选择其他文件时。

另外为了帮助您，我已经检查了您的代码和步骤，并且无论是否使用 OpenFileDialog，XML 都在保存。因此，假设您的问题不取决于打开文件对话框。在您提供的样本中没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:21:44.517

似乎工作正常！我尝试并按预期工作。

打开随机图像文件没有问题：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Xml;

namespace StackOverflow
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        bool doFileOpenFirst = true;

        if (doFileOpenFirst)
        {
            OpenFileDialog dialog = new OpenFileDialog();

            dialog.CheckFileExists = true;
            dialog.Filter = "Image files|*.bmp;*.jpg;*.png";

            dialog.ShowDialog();
        }

        // Just write a trivial XML file
        XmlDocument doc = new XmlDocument();
        XmlDeclaration dec = doc.CreateXmlDeclaration("1.0", "UTF-8", null);
        doc.AppendChild(dec);// Create the root element

        XmlElement root = doc.CreateElement("Database");
        doc.AppendChild(root);

        doc.Save("Trivial.xml");
    }
}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T13:09:23.423

我认为您应该放置这些打开对话框并将xml保存到Form的加载事件中的代码。

# c++ - 无法从数组队列中手动释放内存

> ID：12769059
> 
> 赞同：1
> 
> 时间：2012-10-07T13:00:56.343
> 
> 标签：c++, memory-management, stl, queue

```
#ifndef UNICODE
#define UNICODE
#endif

#include <iostream>
#include <Windows.h>
#include <queue>

using namespace std;

void addSomeContent(queue<TCHAR*> &output)
{
    TCHAR* buffer;

    for(int i=0; i < 10000; i++)
        buffer = new TCHAR[1000];

}

int main()
{       
    queue<TCHAR*> foo;

    char sign;

beginning:

    addSomeContent(foo);

    while (!foo.empty())
    {
        delete [] foo.front();
        foo.pop();
    }

    wcout<<TEXT("Press y to repeat\n");
    cin>>sign;
    if(sign == 'y' || sign == 'Y') goto beginning;

    return 0;
} 
```

该程序的每次迭代都会占用 20MB 的 RAM。为什么它没有被这条指令分派？

```
 while (!foo.empty())
  {
    delete [] foo.front();
    foo.pop();
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:07:44.063

也许是因为当您传递`foo`to的引用`addSomeContent`并将`addSomeContent`其用作名为的变量`output`时，`addSomeContent`正在分配各种内存，但从未将这些分配放入`output`，所以回到 main 中`foo`是空的。

在 SO，我们希望提供帮助，但我们真的希望人们首先*尝试*帮助自己。如果您在发布之前进行了一些调试，那么您自己发现这将是一个简单的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:09:55.633

您正在尝试`delete[]`手动记忆。这总是很糟糕。改为使用`std::queue<std::vector<TCHAR>>`。还有，`goto`？这很糟糕，你应该感觉很糟糕。

如果要向队列中添加项目，则需要对其调用成员函数。

下面的代码实际上可能会起作用，并且可能不会让任何看到它的人发疯。

```
void addSomeContent(std::queue<std::vector<TCHAR>> &output)
{
    for(int i=0; i < 10000; i++)
        queue.push_back(std::vector<TCHAR>(1000));
}

int recursive_main() {
    std::queue<std::vector<TCHAR>> foo;
    addSomeContent(foo);
    while(!foo.empty()) foo.pop(); // no need to delete
    std::wcout << L"Press y to repeat\n";
    char sign;
    std::cin >> sign;
    if (sign == 'y' || sign == 'Y') return recursive_main();
    return 0;
}

int main()
{       
    return recursive_main();
} 
```

# javascript - Jquery CSS分配负值

> ID：12769060
> 
> 赞同：3
> 
> 时间：2012-10-07T13:01:01.100
> 
> 标签：javascript, jquery, css

这是我的 jQuery 代码：

```
<script type="text/javascript" src="js/jquery.js">
</script>
<script type="text/javascript">
 $(document).ready(function() {
     get_font_size();
     set_sidebar();

});
function get_font_size()
{
var b=$(window).width();
var side_size=b*260/1440;
b=b-side_size;
$("#sidebar").css({"width":side_size});
$("#alexa-widget img").css({"width":side_size});
$(".fb-like-box").attr("data-width",side_size); 
}
function set_sidebar()
{
var b=$(window).width();
var font_size=b*65/1440;
var font_size_2=b*133/1440;
var margin_top=b*10/1440;
margin_top*=-1;
margin_top=Math.round(margin_top);
$("#my_tabs li").css({"font-size":font_size});
$("#header").css({"font-size":font_size_2,"margin-top":margin_top});

}
</script> 
```

除了margin-top 属性外，一切正常。我无法将margin-top 分配给负值。它失败但字体大小和其他属性工作正常。为什么jquery css 设置因负值而失败？如果我在里面做同样的事情css 它工作得很好。我需要这个来根据屏幕分辨率改变网页所以我不能在 CSS 中这样做。我需要 jQuery 修复这个。我的代码中已经有 viewport 元标记所以请不要建议 viewport 或媒体查询解决方案。我已经用 alert(margin_top) 检查了 margin_top 变量，它根据需要向我显示了一个正确的负值，因此只有 css 设置部分失败才能正确进行计算。请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:05:29.243

使用 jQuery 设置 margin-top 时，必须在末尾添加单位（在本例中为：px）

例子：

```
>>> $("body").css("margin-top");
"0px"
>>> $("body").css("margin-top", "10");
[body]
>>> $("body").css("margin-top");
"0px"
>>> $("body").css("margin-top", "10px");
[body]
>>> $("body").css("margin-top");
"10px" 
```

* * *

**编辑**（为了更清楚地说明如何修复您的代码：

更改代码中的行，如下所示：

```
$("#header").css({"font-size":font_size_2,"margin-top":margin_top}); 
```

至

```
$("#header").css({"font-size":font_size_2,"margin-top":margin_top + "px"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:07:18.067

您需要为边距添加计量单位。

```
$("#header").css({"font-size":font_size_2,"margin-top":margin_top+"%"}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T13:10:31.757

这样做有什么[问题](http://jsfiddle.net/qXmfJ/)？

```
$('div').css({marginTop:-100});​ 
```

并非所有内容都需要[字符串类型](http://www.globalnerdy.com/2010/05/09/new-programming-jargon/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T13:09:09.930

我用`$("#header").css({"font-size":font_size_2,"margin-top":margin_top+"%"});`.

# javascript - Javascript 中是否有一种使用模式来防止 [1,3,5] === true 中的 2 的陷阱？

> ID：12769062
> 
> 赞同：1
> 
> 时间：2012-10-07T13:01:16.437
> 
> 标签：javascript

我觉得有点棘手的一些用法是

```
2 in [1, 3, 5]

for (var i in [1, 3, 5]) { ... }

str = "hello";
for (var i in str) { ... } 
```

第一个是`true`（我可能马上说`2 in [1, 3, 5]`是`false`），第二行循环通过 0、1、2 而不是 1、3、5，最后一部分循环通过 0 到 4，而不是`'h', 'e', 'l', 'l', 'o'`. 现在我只是在使用：每当看到`in`数组或数组的 for-in 循环时，立即考虑索引。否则，有没有一种方法或使用模式可以用来避免这个陷阱？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:03:10.570

是的，它被称为*“不要`in`用于数组”*。它测试一个对象是否有某个键 - 所以你不能在数组上正确使用它。

除非您`for(var x in something)`想遍历`something`.

要检查一个值是否包含在数组中，请使用`~arr.indexOf(value)`- 或者`arr.IndexOf(value) != -1`您是否希望它更详细。

要遍历数组中的元素，请使用`for(var i = 0; i < arr.length; i++)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:03:07.247

你可以使用`indexOf`方法。[jsfiddle](http://jsfiddle.net/azXqn/1/)

对于数组

```
var arr = [1,2,3,4];
arr.indexOf(2); // will return index of item if exist other wise return -1; 
```

对于字符串

```
var str = 'Hello world';
str.indexOf('e')
console.log(str.indexOf('e'),str.indexOf('n')); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T13:34:15.047

该`in`关键字旨在与对象一起使用，例如（取自[MDN 站点](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#in)）

```
// Arrays
var trees = new Array("redwood", "bay", "cedar", "oak", "maple");
0 in trees;        // returns true
3 in trees;        // returns true
6 in trees;        // returns false
"bay" in trees;    // returns false (you must specify the index number,
                  // not the value at that index)
"length" in trees; // returns true (length is an Array property)

// Predefined objects
"PI" in Math;          // returns true
var myString = new String("coral");
"length" in myString;  // returns true

// Custom objects
var mycar = {make: "Honda", model: "Accord", year: 1998};
"make" in mycar;  // returns true
"model" in mycar; // returns true 
```

数组可以被认为是一个对象。数组`['zero', 'one', 'two']`就像对象`{0: 'zero', 1: 'one', 2: 'two'}`

因此，如果您编写`for (i in ['zero', 'one', 'two'])`javascript 会将其视为您编写`for (i in {0: 'zero', 1: 'one', 2: 'two'})`的 .

您可以检查对象是否具有特定的属性值，如下所示：

```
function isIn(val, obj) {
  for (var i in obj) if (obj[i] == val) return true;
  return false;
}

isIn('car', ['car', 'horse']) // returns true 
```

如果您专门检查一个数组而不仅仅是一个任意对象，您可以使用返回其参数索引的[`indexOf`方法或数组的 -1 不包含参数。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

```
function isInArray(val, arr) {return arr.indexOf(val) > -1;}

isIn('car', ['car', 'horse']) // returns true 
```

# macos - 如何在 Firemonkey 中创建“无激活”表单

> ID：12769064
> 
> 赞同：147
> 
> 时间：2012-10-07T13:01:43.440
> 
> 标签：macos, delphi, delphi-xe2, c++builder, firemonkey

在 XCode 中，通过将这些方法添加到您的 NSView 子类可以防止窗口在单击时变为活动状态：

```
- (BOOL)shouldDelayWindowOrderingForEvent:(NSEvent )theEvent {
    return YES;
}
- (BOOL)acceptsFirstMouse:(NSEvent )theEvent {
    return YES; 
}
- (void)mouseDown:(NSEvent )theEvent {
    [[[NSApp]] preventWindowOrdering]; 
} 
```

在 Windows 平台上是通过这个简单的代码来完成的：

```
HWND hWnd = FindWindowW((String("FM") + fmxForm->ClassName()).c_str(), 
    fmxForm->Caption.c_str());

SetWindowLong(hWnd, GWL_EXSTYLE,
    GetWindowLong(hWnd, GWL_EXSTYLE) | WS_EX_NOACTIVATE); 
```

如何子类化 NSView 以防止我的 FMX TForm 在单击时变为活动状态？

如何在*firemonkey中创建“* **No Activate** ”表单？

 ** * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-03T19:30:10.127

可以使用带有**NSNonactivatingPanelMask**标志的**NSPanel 。**fmx 形式的 NSView 应该成为 NSPanel 的子项。我编写了一个适用于 Windows 和 Mac 平台的辅助类（**适用于 XE4**）：

```
unit NoActivateForm;

interface

uses Fmx.Forms, Fmx.Types
{$IFDEF POSIX}
    , Macapi.AppKit
{$ENDIF}
    ;

type TNoActivateForm = class
private
    form: TForm;
{$IFDEF POSIX}
    panel: NSPanel;
    timer: TTimer;  // for simulating mouse hover event
{$ENDIF}
    procedure SetPosition(const x, y: Integer);
    procedure GetPosition(var x, y: Integer);
    procedure SetDimensions(const width, height: Integer);
    procedure SetLeft(const Value: Integer);
    procedure SetTop(const Value: Integer);
    procedure SetHeight(const Value: Integer);
    procedure SetWidth(const Value: Integer);
    procedure SetVisible(const Value: Boolean);
    function GetLeft: Integer;
    function GetTop: Integer;
    function GetHeight: Integer;
    function GetWidth: Integer;
    function GetVisible: Boolean;
{$IFDEF POSIX}
    procedure OnTimer(Sender: TObject);
{$ENDIF}
public
    constructor Create(AForm: TForm);
    destructor Destroy; override;
    property Left: Integer read GetLeft write SetLeft;
    property Top: Integer read GetTop write SetTop;
    property Height: Integer read GetHeight write SetHeight;
    property Width: Integer read GetWidth write SetWidth;
    property Visible: Boolean read GetVisible write SetVisible;
end;

implementation
uses
    Classes, System.Types
{$IFDEF MSWINDOWS}
    , Winapi.Windows;
{$ELSE}
    , Macapi.CocoaTypes, FMX.Platform.Mac, Macapi.CoreGraphics, Macapi.CoreFoundation;
{$ENDIF}

constructor TNoActivateForm.Create(AForm: TForm);
{$IFDEF POSIX}
var
    rect: NSRect;
    bounds: CGRect;
    window: NSWindow;
    style: integer;
    panelCount: integer;
begin
    form := AForm;
    form.Visible := false;
    bounds := CGDisplayBounds(CGMainDisplayID);
    rect := MakeNSRect(form.Left, bounds.size.height - form.Top - form.Height,
        form.ClientWidth, form.ClientHeight);
    style := NSNonactivatingPanelMask;
    style := style or NSHUDWindowMask;
    panel := TNSPanel.Wrap(
        TNSPanel.Alloc.initWithContentRect(rect, style, NSBackingStoreBuffered,
        true));
    panel.setFloatingPanel(true);
    //panel.setHasShadow(false); optional
    window := WindowHandleToPlatform(form.Handle).Wnd;

    panel.setContentView(TNSView.Wrap(window.contentView));
    TNSView.Wrap(window.contentView).retain;

    timer := TTimer.Create(form.Owner);
    timer.OnTimer := OnTimer;
    timer.Interval := 50;
end;
{$ELSE}
var hWin: HWND;
begin
    form := AForm;
    form.TopMost := true;
    hWin := FindWindow(PWideChar('FM' + form.ClassName), PWideChar(form.Caption));
    if hWin <> 0 then
        SetWindowLong(hWin, GWL_EXSTYLE,
            GetWindowLong(hWin, GWL_EXSTYLE) or WS_EX_NOACTIVATE);
end;
{$ENDIF}

destructor TNoActivateForm.Destroy;
{$IFDEF POSIX}
begin
    panel.release;
end;
{$ELSE}
begin
end;
{$ENDIF}

procedure TNoActivateForm.SetPosition(const x, y: Integer);
{$IFDEF POSIX}
var point: NSPoint;
    screen: CGRect;
begin
    screen := CGDisplayBounds(CGMainDisplayID);
    point.x := x;
    point.y := round(screen.size.height) - y - form.height;
    panel.setFrameOrigin(point);
end;
{$ELSE}
begin
    form.Left := x;
    form.Top := y;
end;
{$ENDIF}

procedure TNoActivateForm.GetPosition(var x, y: Integer);
{$IFDEF POSIX}
var screen: CGRect;
begin
    screen := CGDisplayBounds(CGMainDisplayID);
    x := round(panel.frame.origin.x);
    y := round(screen.size.height - panel.frame.origin.y - panel.frame.size.height);
end;
{$ELSE}
begin
    x := form.Left;
    y := form.Top;
end;
{$ENDIF}

procedure TNoActivateForm.SetDimensions(const width, height: Integer);
{$IFDEF POSIX}
var size: NSSize;
begin
    size.width := width;
    size.height := height;
    panel.setContentSize(size);
end;
{$ELSE}
begin
    form.width := width;
    form.height := height;
end;
{$ENDIF}

procedure TNoActivateForm.SetLeft(const Value: Integer);
begin
    SetPosition(Value, Top);
end;

procedure TNoActivateForm.SetTop(const Value: Integer);
begin
    SetPosition(Left, Value);
end;

procedure TNoActivateForm.SetHeight(const Value: Integer);
begin
    SetDimensions(Width, Value);
end;

procedure TNoActivateForm.SetWidth(const Value: Integer);
begin
    SetDimensions(Value, Height);
end;

procedure TNoActivateForm.SetVisible(const Value: Boolean);
begin
{$IFDEF POSIX}
    panel.setIsVisible(Value);
{$ELSE}
    form.visible := Value;
{$ENDIF}
end;

function TNoActivateForm.GetLeft: Integer;
var x, y: Integer;
begin
    GetPosition(x, y);
    result := x;
end;

function TNoActivateForm.GetTop: Integer;
var x, y: Integer;
begin
    GetPosition(x, y);
    result := y;
end;

function TNoActivateForm.GetHeight: Integer;
begin
{$IFDEF POSIX}
    result := round(panel.frame.size.height);
{$ELSE}
    result := form.Height;
{$ENDIF}
end;

function TNoActivateForm.GetWidth: Integer;
begin
{$IFDEF POSIX}
    result := round(panel.frame.size.width);
{$ELSE}
    result := form.Width;
{$ENDIF}
end;

function TNoActivateForm.GetVisible: Boolean;
begin
{$IFDEF POSIX}
    result := panel.isVisible();
{$ELSE}
    result := form.visible;
{$ENDIF}
end;

{$IFDEF POSIX}
procedure TNoActivateForm.OnTimer(Sender: TObject);
var event: CGEventRef;
    point: CGPoint;
    form_rect: TRectF;
    client_point, mouse_loc: TPointF;
    shift: TShiftState;
begin
    event := CGEventCreate(nil);
    point := CGEventGetLocation(event);
    CFRelease(event);
    mouse_loc.SetLocation(point.x, point.y);
    if Visible = true then
    begin
        form_rect := RectF(0, 0, form.Width, form.Height);
        client_point.X := mouse_loc.X - Left;
        client_point.Y := mouse_loc.y - Top;
        if PtInRect(form_rect, client_point) then
            form.MouseMove(shift, client_point.x, client_point.y)
        else
            form.MouseLeave();
    end;
end;
{$ENDIF}

end. 
```

上述单位的用途：

```
TNoActivateForm *naKeyboard; // global scope    
void __fastcall TfrmKeyboard::TfrmKeyboard(TObject *Sender)
{
    naKeyboard = new TNoActivateForm(frmKeyboard); // frmKeyboard is a normal fmx form
    naKeyboard->Visible = true;
} 
```

如果 frmKeyboard 是你的主窗体，那么不要把上面的代码放在窗体构造函数中，建议把它放在 OnShow 中。

![在此处输入图像描述](../Images/708fb403a57ab0f16468eb058354c6a2.png)

**注意**： WindowHandleToPlatform 似乎在 XE3 中不存在，因此该行可以替换为

```
window := NSWindow(NSWindowFromObjC(FmxHandleToObjC(Form.Handle))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T12:20:58.750

您可以关闭表单鼠标处理以防止它被聚焦。假设您的表单名为 myform：

```
uses fmx.platform.mac, macapi.appkit;
.
.
Var nswin:nswindow;
.
.  
NSWin:= NSWindow(NSWindowFromObjC(FmxHandleToObjC(myform.Handle))); { get the NSWindow }
NSWin.setIgnoresMouseEvents(true);                                 { ignore mouse events }
NSWin.setAcceptsMouseMovedEvents(false); 
```

有一个小问题，它不会停止鼠标右键单击。如果这是一个问题，您将不得不响应表单中的 mousedown 事件并调用主表单 mousedown 以便它不会丢失鼠标事件。由于鼠标右键按下将捕获鼠标事件，因此您还需要响应鼠标移动和鼠标向上事件 - 将它们转发到您的主窗体。尽管它在右键单击时捕获了鼠标，但它仍然不会聚焦表单。

戴夫·彼得斯 DP 软件*

# file - 在文件中间插入或更新字节的最佳方法

> ID：12769069
> 
> 赞同：0
> 
> 时间：2012-10-07T13:02:38.620
> 
> 标签：file, node.js, notepad++

这个问题已经回答过很多次了。

人们最后说唯一的方法是将旧文件的字节复制到新文件中，然后插入新字节并完成从旧文件中复制剩余字节。然后删除旧文件并重命名新文件。

但我的问题与应用最好的文本/二进制编辑器的技术更相关。如果我打开一个非常大的二进制文件 (480MB) 并在 HxD 和 notepad++ 的开头添加 4 个字节，则程序似乎正在复制整个文件，因为我可以看到 HDD 上的 100% 活动和正在写入的数据速度（以约 100MB/s 的速度写入 3-4 秒）。我可以假设唯一的方法是将数据复制到临时文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T13:13:29.410

在文件末尾添加/删除字节的唯一方法是在这些字节之后重写任何内容。您可以就地执行此操作，但使用临时文件通常更容易、更安全，因为在写入新文件之前不会触及原始文件。

要就地插入 N 个字节，您需要从要插入它的位置读取至少 N 个字节。然后写入新字节，覆盖 N 个字节。但是您只是阅读它们，因此您现在可以将它们写回。但是，这将再次覆盖 N 个字节，因此您需要先读取这些字节。正如您所看到的，它涉及大量查找 - 对于不太大的文件，将所有剩余数据存储在内存中会更容易和更快。对于大文件，通常使用临时文件来避免这种麻烦。

# android - 旋转视图矩阵产生平面形状

> ID：12769071
> 
> 赞同：0
> 
> 时间：2012-10-07T13:02:44.890
> 
> 标签：android, opengl-es, view, matrix

我正在尝试在 Android 上的 opengl es 2 中旋转我的视图矩阵。我只是做

`Matrix.rotateM(mVM, 0, .1f, .5f, .5f, 0);`

在画框上。但是，当我这样做时，我看到相机按需要旋转，但 3d 形状不旋转。这些形状是面向相机创建的，当相机旋转时，您会看到同一张脸，而不是侧面。当相机围绕它们旋转时，这些形状应该是倾斜的。如果我打电话

```
Matrix.rotateM(MM, 0, 1, .5f, .1f, 0); 
```

在每个单独的形状的渲染中，它工作正常，我可以看到形状的各个方面。但我想围绕原点移动相机（正在工作）并以 3d 方式查看形状（不起作用）

# perl - 表中的 Perl 数据库脚本

> ID：12769075
> 
> 赞同：-1
> 
> 时间：2012-10-07T13:03:22.957
> 
> 标签：perl

> **可能重复：**
> [从 Perl 中的数据库到电子表格](https://stackoverflow.com/questions/12756971/from-database-in-perl-to-spreadsheet)

我有一个这样的事务表：

```
TranID  Date        AccNum   Type    Amount ChequeNo DDNo  
657520  02-07-1999  0181432  Debit   16000  465774     
657524  02-07-1999  0181432  Debit   13000           569086
657538  09-07-1999  0181432  Credit  11000  
657548  18-07-1999  0181432  Credit  15500  
657519  02-07-1999  0181432  Debit   12000  
657523  02-07-1999  0181432  Credit  11000  
657529  03-07-1999  0181433  Debit   15000  466777
657539  10-07-1999  0181433  Credit  10000  
657541  11-07-1999  0181433  Debit   12000  
657525  03-07-1999  0181433  Debit   15000           569999
657533  05-07-1999  0181433  Credit  12500 
```

我的问题是：从交易表中查询数据并计算每个账户的支票、dd和现金借记的总金额。我的代码是这样的：

```
#!/usr/bin/perl
use strict;
use warnings;
use DBI; 

print "content-type:text/html\n\n";

my $dbh = DBI->connect('dbi:mysql:database:3306','prithvi','prithvi') 
    or die "Couldn't connect";

my $tran_cur = $dbh->prepare("SQL Query");
$tran_cur->execute;

map { print "<td>$_</td>" } qw(AccountNumber-ChequeDebit-DDDebit-CashDebit);
print "<br/>";

while (my @data = $tran_cur->fetchrow_array()) {

    my $rec = join '-', @data;
    print "$rec<br/>";
}
$tran_cur->finish;
$dbh->disconnect; 
```

谁能告诉我如何使用单 SQL 查询来解决这个问题：我希望输出为：

```
AccountNumber-ChequeDebit-DDDebit-CashDebit
0181432-16000-13000-12000
0181433-15000-15000-12000 
```

提前致谢。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T17:24:02.617

试试下面的代码：

```
#!/usr/bin/perl
use strict;
use warnings;
use DBI;

print "content-type:text/html\n\n";

my $dbh = DBI->connect('dbi:mysql:database:3306','prithvi','prithvi')
    or die "Couldn't connect";

my $tran_cur = $dbh->prepare("
    SELECT `AccNum`, `Amount`
    FROM `database`
    WHERE `Type` = 'Debit'
    ORDER BY `TranID`;
");
$tran_cur->execute;

print "<br>AccountNumber-ChequeDebit-DDDebit-CashDebit</br>\n";

my %h;

while (my @data = $tran_cur->fetchrow_array()) {
    if ($h{$data[0]}) {
        $h{$data[0]} .= "-$data[1]";
    }
    else {
        $h{$data[0]} = $data[1];
    }
}

$tran_cur->finish;
$dbh->disconnect;

foreach my $key (sort keys(%h)) {
    print "<td>$key" . "-" . $h{$key} . "</td>\n";
} 
```

它是完美的，但它有效；）

# java - 如何将 ANTLR2 更改为 ANTLR3

> ID：12769080
> 
> 赞同：4
> 
> 时间：2012-10-07T13:03:59.697
> 
> 标签：java, antlr, antlr3

我正在使用 ANTLR 3.4 在 Java 中开发一个练习题。在 ANTLR 2.7 中给我们的说明并相对于版本 3 进行了更改。我发现页面显示了一些差异，但不是那些寻求的。

在 ANTLR 2.7 中，MiToken 可以像这样加载一个类：

```
analex.setTokenObjectClass ("MiToken")** 
```

ANTLR 3.4 中的等价物是什么？该版本中不存在此选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:03:27.967

在 ANTLR 3.4 中，setTokenObjectClass(Sting) 方法不存在。您应该查看该页面（是 ANTLR 3.4 的 wiki）：

[http://www.antlr.org/wiki/pages/viewpage.action?pageId=1844](http://www.antlr.org/wiki/pages/viewpage.action?pageId=1844)

我们使用相同的说明 PDF，您使用 C# 作为目标语言，但我们使用 Java 作为目标语言。我可以完成它，因为同一班级的其他学生找到要覆盖的方法的名称（在 ANTLR v3.4 中要覆盖的方法名称是 emit()。

# animation - 动画 D3 地球 (d3.geo.azimuthal)

> ID：12769083
> 
> 赞同：6
> 
> 时间：2012-10-07T13:04:22.100
> 
> 标签：animation, d3.js

我对 d3 javascript 库有疑问。我想使用[方位角](http://mbostock.github.com/d3/talk/20111018/azimuthal.html)地球仪，我想在地球仪上插入经度和纬度坐标的点，并使地球仪在不使用鼠标事件的情况下进行动画处理。

你认为这可能吗？你能给我一些关于如何做到这一点的好建议吗？

干杯雷神

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-28T03:41:15.853

为了使示例自行旋转，我实现了：

```
var newX = 185;
var newY = -200;

function setupRotate() {
    m0= [0,0];
    o0 = projection.origin();
  }

  function rotate() { 
    if (m0) {
      var m1 = [newX, newY];//d3.event.pageX, d3.event.pageY],
          o1 = [o0[0] + (m0[0] - m1[0]) / 8, o0[1] + (m1[1] - m0[1]) / 8];
      projection.origin(o1);
      //console.log(m1);
      circle.origin(o1)
      refresh();
      //console.log("rotate");
      //console.log("newX: "+newX+"  newY: "+newY);
    }
  }

function rotateInterval() {
    var theRotationInterval = setInterval(rotateAndIncrement,1);
    function rotateAndIncrement(){
      //console.log("rotateAndIncrement");
      if (newX === 3)//3065) {
      {
       //console.warn("!!Reset Rotation!!");
       clearInterval(theRotationInterval);
       newX = 185;
       rotateInterval();
      }
      //console.log("newX: "+newX+"  newY: "+newY);
      else {
        newX++;
        rotate();
      }
    }
  } 
```

我正在向地图添加点，这要复杂得多。如果我不能让它工作，我会在这里发帖。

# c++ - 如何在 Qt 中再次灰显菜单项

> ID：12769087
> 
> 赞同：2
> 
> 时间：2012-10-07T13:04:55.250
> 
> 标签：c++, linux, qt, menu, menuitem

我正在使用 qt 并创建了一个类似“文件”的菜单栏，其中包含一些子菜单项“打开”、“保存”、“另存为”、“关闭”、“退出”。我还创建了“actionNew”、“actionOpen”等动作。我对工具栏使用了相同的操作，并使用“disableItems()”函数将菜单和工具栏项禁用到构造函数中，效果很好，工具栏和菜单项是灰色的。如果我单击子菜单项“新建”，则工具栏和菜单项已启用并且不会变灰，这也可以正常工作，但是如果我单击子菜单项“关闭”，则只有工具栏项变灰并且菜单项目仍然启用:(。我该如何解决它？希望你能帮助我，对不起我的英语不好；）

```
MainWindow::MainWindow(QWidget *parent)
:QMainWindow(parent), ui(new Ui::MainWindow)
{
  ui->setupUi(this);
  /* disable menu items and tool bar items */
  disableItems();
}
void MainWindow::disableItems()
{
  ui->actionSave->setEnabled(false);
  ui->actionSaveAs->setEnabled(false);
  ui->actionClose->setEnabled(false);
}
void MainWindow::enableItems()
{
  ui->actionSave->setEnabled(true);
  ui->actionSaveAs->setEnabled(true);
  ui->actionClose->setEnabled(true);
}
void MainWindow::on_actionNew_triggered()
{
  enableItems();
}
void MainWindow::on_actionClose_triggered()
{
  disableItems();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:56:01.197

我有同样的问题。

我很困惑，因为代码的行为与 Linux 64（我通常开发的地方）、Windows（客户机器）、Linux 32（旧的开发和备份机器）不同。然后我意识到版本的差异。

我发现的唯一解决方法是从我的 Ubuntu 发行版附带的默认 QtSDK 升级到[从这里](http://qt-project.org/downloads)下载的最新版本。

我建议检查您使用的版本是否可以升级。

高温高压

**编辑**我注意到他们改变了一些更激进的东西：升级后，菜单栏不再在“顶部屏幕”上共享，而是更传统地在“主窗口”内共享。可能团队忽略了可移植性问题，考虑到他们拥有的广泛目标，这是合理的。

# c++ - 将常用表达式提取到变量中

> ID：12769088
> 
> 赞同：0
> 
> 时间：2012-10-07T13:05:00.847
> 
> 标签：c++, coding-style

假设我有一个指向类对象的指针`JoeBloggs`，这样计算会更好吗

```
int value = Factorize( (JoeBloggs->GetNumber()*CalculateHeight(57,88)) )*JoeBloggs->GetSpeed(); 
```

或者

```
int currentSpeed = JoeBloggs->GetSpeed();
int currentNumber = JoeBloggs->GetNumber();

int value = Factorise( (currentNumber*CalculateHeight(57,88)) )*currentSpeed; 
```

我一直在使用第一个，因为它要短得多，但是有很多次我认为第二个会产生更整洁的代码。我试图坚持一种一致的编码风格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:28:08.580

好的代码不是短代码。好的代码是可读的代码。代码的阅读频率大约是编写的 10 倍。如果它是现实生活中的商业应用程序，那么您将来会多次阅读此代码，并且您将不得不再次完全理解该代码的作用。从这个角度来看，哪个版本对您和您的团队来说更容易理解？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:11:32.690

我建议您将指针传递给计算结果的函数“Factorise”。
换句话说：封装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:32:09.943

你不必保持一致。

坚持你的第二条规则当然不是一个好主意，因为它使代码非常冗长。

但是你也不能强制执行第一条规则，因为表达式有时变得足够复杂，所以你必须打破它们。如果您访问使用成员函数等检索的对象的成员，则尤其如此。但话又说回来，这可能是您在错误的地方进行工作的好兆头。

顺便说一句，还有其他规则可以通过命名将代码分成几部分。如果你为你的表达的第一部分命名，那么读者就会明白你到底在做什么——因为这条规则你的例子是完美的，因为我不知道你在做什么......

```
int calculatedheight = Factorize( (JoeBloggs->GetNumber()*CalculateHeight(57,88));
int value = calculatedheight*JoeBloggs->GetSpeed(); 
```

...同样的论点也适用于`value`..那是什么？这是一个完全没有意义的变量名。

我强烈推荐 Martin Fowler 的有关重构的文章和书籍，其中有大量示例向您展示如何以正确的方式做到这一点。我提到的规则称为[Introduce Explaining Variable](http://refactoring.com/catalog/introduceExplainingVariable.html)。

# node.js - 查找、修改和删除递归嵌入文档 mongoosejs

> ID：12769092
> 
> 赞同：2
> 
> 时间：2012-10-07T13:05:48.917
> 
> 标签：node.js, mongoose

我使用示例中的方案描述。

```
Comment.add({
    title     : { type: String, index: true }
  , date      : Date
  , body      : String
  , comments  : [Comment]
});

var BlogPost = new Schema({
    title     : { type: String, index: true }
  , slug      : { type: String, lowercase: true, trim: true }
  , date      : Date
  , buf       : Buffer
  , comments  : [Comment]
  , creator   : Schema.ObjectId
}); 
```

我在评论中有几个层次的嵌套。如何在任何嵌套级别找到正确的评论并对其进行任何操作（删除编辑或添加新的嵌套评论）我试图对搜索进行递归但您无法保存或删除评论

```
BlogPost.methods.findComment = function (id, callback) {

  var curentComment = this.comments;
  var findComment = null;
  var recursiveFindComment = function(comment){
      for(i=0;i<comment.length;i++){
          if(findComment){
              break;
          }
          if(comment[i]._id == id){
              findComment  = comment[i];
              break;    
          }else if(comment[i].comments.length>0){
              findComment = recursiveFindComment(comment[i].comments)
          }
      }
      return findComment;

  }

  if(curentComment.id(id)){
     callback(curentComment);  
  }else{
     callback(recursiveFindComment(curentComment, null)) 
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:43:47.583

您可能想看看在 MongoDb ( [http://www.mongodb.org/display/DOCS/Trees+in+MongoDB](http://www.mongodb.org/display/DOCS/Trees+in+MongoDB) ) 中使用树。有许多不同的方法可以帮助您处理模式的递归性质。

```
> t = db.tree
test.tree

> // get entire tree -- we use sort() to make the order nice
> t.find().sort({path:1})
{ "_id" : "a", "path" : "a," }
{ "_id" : "b", "path" : "a,b," }
{ "_id" : "c", "path" : "a,b,c," }
{ "_id" : "d", "path" : "a,b,d," }
{ "_id" : "g", "path" : "a,b,g," }
{ "_id" : "e", "path" : "a,e," }
{ "_id" : "f", "path" : "a,e,f," }
{ "_id" : "g", "path" : "a,b,g," }

> t.ensureIndex( {path:1} )

> // find the node 'b' and all its descendents:
> t.find( { path : /^a,b,/ } )
{ "_id" : "b", "path" : "a,b," }
{ "_id" : "c", "path" : "a,b,c," }
{ "_id" : "d", "path" : "a,b,d," }
{ "_id" : "g", "path" : "a,b,g," }

> // find the node 'b' and its descendents, where path to 'b' is not already known:
> nodeb = t.findOne( { _id : "b" } )
{ "_id" : "b", "path" : "a,b," }
> t.find( { path : new RegExp("^" + nodeb.path) } )
{ "_id" : "b", "path" : "a,b," }
{ "_id" : "c", "path" : "a,b,c," }
{ "_id" : "d", "path" : "a,b,d," }
{ "_id" : "g", "path" : "a,b,g," } 
```

# android - 如何滑动以执行点击android

> ID：12769094
> 
> 赞同：3
> 
> 时间：2012-10-07T13:06:07.900
> 
> 标签：android, button, drag, multi-touch, slide

我正在尝试制作一个用户可以在一组按钮上滑动或拖动手指以执行点击的应用程序。我试过`onTouch`了，`MotionEvent.ACTION_MOVE`但我似乎无法让它工作。按钮根本不按。这是代码：

```
public boolean onTouch(View v, MotionEvent arg1) {
    if (arg1.getAction() == MotionEvent.ACTION_MOVE) {

        switch (v.getId()) {
        case R.id.key1:
            key1.performClick();
            break;
        case R.id.key2:
            key2.performClick();
            break;
        case R.id.key3:
            key3.performClick();
            break;
        case R.id.key4:
            key4.performClick();
            break;
        case R.id.key5:
            key5.performClick();
            break;
        case R.id.key6:
            key6.performClick();
            break;
        case R.id.key7:
            key7.performClick();
            break;
        case R.id.key8:
            key8.performClick();
            break;
        }

    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:52:41.353

我认为您最好捕获所有这些按钮上的关键事件，然后对每个按钮执行某种求和。例如

键 1 = 1 键 2 = 1+2 键 3 = 1+2+3 ...

当您到达 keyx 时，您可以检查总和是否符合您的期望。如果是这样，用户可能会在按钮上滑动他/她的手指。使用某种时间，必须按下 keyx 并且数字必须加起来为 N。这将避免用户按下按钮 3，然后返回按钮 1 等并仍然注册点击。

如果您想注册每个按钮的点击，请设置其 onclick 侦听器并确保按钮本身是可点击的（它们应该已经是可点击的）。

# cmake - CMake 找不到与“Visual Studio 11 Win64”对应的构建程序

> ID：12769106
> 
> 赞同：2
> 
> 时间：2012-10-07T13:07:28.193
> 
> 标签：cmake, visual-studio-2012

我使用 CMake 2.8.9 得到以下错误：

```
CMake Error: CMake was unable to find a build program corresponding to "Visual Studio 11 Win64". CMAKE_MAKE_PROGRAM is not set. You probably need to select a different build tool.
CMake Error: Could not find cmake module file:H:/ogredeps/CMakeFiles/CMakeCCompiler.cmake
CMake Error: Could not find cmake module file:H:/ogredeps/CMakeFiles/CMakeCXXCompiler.cmake
Configuring incomplete, errors occurred! 
```

我在 Windows 7 64 上使用 Visual C++ 2012 Express。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:53:27.323

我认为你正面临这个错误：[http ://www.cmake.org/Bug/view.php?id=13348](http://www.cmake.org/Bug/view.php?id=13348)

您可能对[CMake 2.8.10-RC1很满意](http://www.cmake.org/files/v2.8/cmake-2.8.10-rc1-win32-x86.exe)

# perl - 1970 年格式化之前的 Perl 纪元时间

> ID：12769110
> 
> 赞同：2
> 
> 时间：2012-10-07T13:07:45.403
> 
> 标签：perl, epoch, localtime

我在 Perl 中格式化和处理 1970 年 1 月 1 日之前的日期时遇到问题，日期以负整数形式返回：

```
my $time=timelocal(0, 0, 0, 1, 1, 1969);
print "$time\n"; 
$theTime = localtime($time); 
print "the time is good: $theTime\n\n"; 
```

如何在 Perl 中处理纪元之前的日期，在 unix 和 windows 上都有相同的问题 Perl 5.8.8。PHP 显示日期正常，没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:09:43.167

你试过使用[DateTime](http://search.cpan.org/~drolsky/DateTime-0.77/lib/DateTime.pm)吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T13:17:15.690

如果`perl`打印一个负整数，这是好的行为，因为 01/01/1970 是这种日期格式的零日。在[https://en.wikipedia.org/wiki/Unix_epoch](https://en.wikipedia.org/wiki/Unix_epoch)上搜索*否定词*

shell 中的一个例子：

```
$ date -d "1957-10-04T00:00:00Z" +%s
-386380800 
```

这是对的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T18:26:17.767

> 我需要将此负数传递给 localtime 或其他一些函数以返回格式化的日期时间数组。

好吧，是什么阻止了你？

```
# ActivePerl on Windows
>perl -E"say ''.localtime(-386380800)"
Thu Oct  3 20:00:00 1957

# Linux
$ perl -E'say "".localtime(-386380800)'
Thu Oct  3 16:00:00 1957

# Cygwin
$ perl -E'say "".localtime(-386380800)'
Thu Oct  3 16:00:00 1957 
```

# asp.net - 刷新 Web 表单页面时执行按钮单击处理程序

> ID：12769112
> 
> 赞同：1
> 
> 时间：2012-10-07T13:07:52.677
> 
> 标签：asp.net, vb.net, event-handling, refresh, page-refresh

在 VB.Net 代码隐藏文件中，我们有几个按钮单击处理程序。

我注意到如果用户单击一个按钮，一个按钮处理程序将执行。我们注意到了一些意想不到的事情。如果用户单击浏览器上的刷新按钮，即使用户没有单击 Web 表单上的任何按钮，先前执行的相同按钮处理程序也会再次执行。

当用户刷新 Web 表单页面时，有没有办法停止执行按钮单击处理程序？

# c# - EntityFramework CodeFirst 数据库不更新

> ID：12769113
> 
> 赞同：5
> 
> 时间：2012-10-07T13:07:55.743
> 
> 标签：c#, winforms, entity-framework, ef-code-first, sql-server-ce

一天前，我开始在简单的 Windows 窗体项目 (C#) 中使用实体框架 CodeFirst。我创建了两个模型：

```
[Table("SavesSet")]
public partial class Saves
{
    public Saves()
    {
        this.SkillsSet = new HashSet<Skills>();
    }

    [Key]
    public int SaveID { get; set; }

    public string Player { get; set; }
    public int Age { get; set; }
    public int Money { get; set; }

    public virtual ICollection<Skills> SkillsSet { get; set; }
}

[Table("SkillsSet")]
public partial class Skills
{
    [Key]
    public int SkillID { get; set; }

    public string Name { get; set; }
    public int Value { get; set; }
    public int SavesSaveID { get; set; }

    public virtual Saves SavesSet { get; set; }
} 
```

然后我使用 Visual Studio 数据库资源管理器（使用 SqlServerCe 3.5 的本地数据库）在我的数据库中添加了一行：

保存 ID = 1

播放器 =“测试”

年龄 = 1

金钱 = 1

我还用 ListView 创建了表单并编写了一些代码：

```
private SavesContext db = new SavesContext();
foreach (Saves s in db.SavesSet.ToList())
{
    ListViewItem l = new ListViewItem();
    l.Name = s.SaveID.ToString();
    l.Text = s.Player;
    ListViewSaves.Items.Add(l);
} 
```

但是当我开始程序调试时 ListView 是空的。我设置了断点，查看了局部变量，发现 SavesSet 计数为 0。

我通过代码添加了一行：

```
Saves s = new Saves();
s.Player = "TestName";
s.Age = 5110;
s.Money = 200;
db.SavesSet.Add(s);
db.SaveChanges(); 
```

ListView 显示了这个。但是在我的数据库中什么都没有（而且它的大小没有改变）。我重新启动了 Visual Studio - 我的问题仍然存在：ListView 显示项目，但数据库为空。我在 App.Config 和 VS Database Explorer 中检查了 ConnectionString - 它们是相等的。

所以，我的问题是：如何探索我的真实数据库以及它存储在哪里？

**更新。**

我的数据库上下文：

```
 public SavesContext()
        : base("Saves")
    {
    }

    public DbSet<Saves> SavesSet { get; set; }
    public DbSet<Skills> SkillsSet { get; set; } 
```

还有我的 App.Config：

```
<?xml version="1.0" encoding="utf-8"?>
    <configuration>
        <configSections>
        </configSections>
        <connectionStrings>
            <add name="TextSim.Properties.Settings.Saves" connectionString="Data          
            Source=C:\Documents and Settings\My\My Documents\visual studio       
            2010\Projects\TextSim\TextSim\Saves.sdf"
            providerName="System.Data.SqlServerCe.3.5" />
        </connectionStrings>
     </configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:50:04.150

实体框架使用一种称为约定优于配置的东西，这意味着如果您不为某些事物提供值，它会使用默认值。

如果未指定连接字符串，它将使用从 EF 的命名空间和 DbContext 名称派生的默认连接字符串。如果是这种情况，那么它将使用默认系统创建一个新的（空白）数据库，而不是使用您可能在 Web.Config 中配置的数据库。

因此，当您保存内容时，它确实会保存到错误的数据库中。

# php - WordPress 字符串常量是否有标准或编码标准？

> ID：12769114
> 
> 赞同：0
> 
> 时间：2012-10-07T13:08:00.630
> 
> 标签：php, wordpress, plugins, standards

我有一组选项要存储在 WordPress 插件中，这些名称可能永远不会改变。但是，我想说明他们所做的可能性。

如果`myplugin`是我正在开发的插件的名称，我有一个以以下样式命名的“选项名称”：

*   `myplugin_preference_name`
*   `myplugin_preference_address`

之类的东西。

`define()`无论如何，在这种情况下（在 WordPress 插件的上下文中）是否可以使用 PHP 调用似乎没有任何权威。

我已经浏览了 WordPress 编码标准：

> [http://codex.wordpress.org/WordPress_Coding_Standards](http://codex.wordpress.org/WordPress_Coding_Standards)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:10:59.337

WordPress 中的常量通常用大写字母书写。

您在编码标准中没有发现这一点，因为 WordPress 编码标准在历史上的记录和执行都很薄弱，我不会过分依赖该文件。

此外，您应该考虑不要过多地引入常量。您不能对所有内容都使用常量。它必须是一个，并且通常变量已经做得很好。

# magento - 在 Magento 中更改发票日期

> ID：12769118
> 
> 赞同：2
> 
> 时间：2012-10-07T13:09:03.317
> 
> 标签：magento, date, invoice

有谁知道我如何在 Magento 中更改订单和发票日期？我想及时更改订单日期。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T06:39:48.403

如果您不想以编程方式执行此操作，您可以修改存储在`sales_flat_order`和`sales_flat_invoice`表中的信息。

如果发票日期也需要在概览中更新，您必须同时进行`sales_flat_order_grid`修改`sales_flat_invoice_grid`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:42:13.793

尝试

```
 /* @var Mage_Sales_Model_Order_Invoice $invoice */
    $invoice = Mage::getModel('sales/order_invoice')->loadByIncrementId($invoiceIncrementId);
    $invoice->setCreatedAt(...);
    $invoice->setUpdatedAt(...);
    $invoice->save(); 
```

# python - psycopg2 游标的多种实现

> ID：12769119
> 
> 赞同：3
> 
> 时间：2012-10-07T13:09:08.777
> 
> 标签：python, psycopg2

如何混合光标实现`psycopg2`？在我的情况下，我希望光标同时充当 a`NamedTupleCursor`和 a `LoggingCursor`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:43:09.163

目前还没有，几天前我已经提交了[一个补丁](https://github.com/dvarrazzo/psycopg/commit/9f9da182f1d5c188c306161f8b96263ce333168b)来启用协作子类化。

日志游标并没有什么特别之处，它更像是一个演示而不是真正有用的东西：我建议您将 NamedTupleCursor 子类化并添加您需要的日志语句，看看 LoggingCursor 作为提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-03T11:41:15.373

作为记录，@piro 补丁可以使用 Mixin：

```
from psycopg2.extras import LoggingConnection,LoggingCursor,RealDictCursor

class MixinLoggedDictCursor(LoggingCursor, RealDictCursor):
   pass

conn = psycopg2.connect(
    cursor_factory=MixinLoggedDictCursor,
    connection_factory=LoggingConnection,
    **kwargs
)
conn.initialize(my_logger) 
```

# python - Django - 使用 ManyToMany 保存表单集

> ID：12769125
> 
> 赞同：1
> 
> 时间：2012-10-07T13:09:46.903
> 
> 标签：python, django, forms, save, formset

我有以下问题。一旦我尝试保存已编辑的对象（详情如下），我就会收到错误消息：

```
MultiValueDictKeyError at /apps/edit/1/

"Key 'application2server_set-0-id' not found in <QueryDict: {u'application2server_set-MAX_NUM_FORMS': [u''], u'name': [u'application1'], u'repository': [u'1'], u'application2server_set-INITIAL_FORMS': [u'2'], u'application2server_set-TOTAL_FORMS': [u'5'], u'csrfmiddlewaretoken': [u'bmEPdLCloNHKR0qUmwdhdmQ4aDKHV2CT'], u'servers': [u'1', u'2']}>" 
```

以下是使用的**模型和形式**：

```
class Server(models.Model):
    host = models.CharField(max_length=100)
    user = models.CharField(max_length=20)
    root_directory = models.CharField(max_length=200)

class Repository(models.Model):
    host = models.CharField(max_length=100)
    user = models.CharField(max_length=20)

class Application(models.Model):
    name = models.CharField(max_length=100)
    repository = models.ForeignKey(Repository)
    servers = models.ManyToManyField(Server, through='Application2Server', null=True, blank=True)

class Application2Server(models.Model):
    application = models.ForeignKey(Application)
    server = models.ForeignKey(Server)
    tag = models.CharField(max_length=100)
    deployment_date = models.DateTimeField(auto_now=True, blank=True)

class ServerForm(ModelForm):
    class Meta:
        model = Server

class RepositoryForm(ModelForm):
    class Meta:
        model = Repository

class ApplicationForm(ModelForm):
    class Meta:
        model = Application

class Application2ServerForm(ModelForm):
    class Meta:
        model = Application2Server
         exclude = ('application', 'server', 'tag') 
```

**用于保存日期的**视图：****

 **```
def app_edit(request, id):
    application = get_object_or_404(Application, pk=id)
    Application2ServerFormSet = inlineformset_factory(Application, Application2Server)

    if request.method == 'POST':
        form = ApplicationForm(request.POST, instance=application)
        formset = Application2ServerFormSet(request.POST, instance=application)

        if form.is_valid() and formset.is_valid():
            saved_application = form.save()
            formset.save()

            return HttpResponseRedirect(reverse(
                'proj.views.app_show',
                args=(saved_application.pk,)
            ))
    else:
        form = ApplicationForm(instance=application)
        formset = Application2ServerFormSet(instance=application)

    return render(request, 'app_edit.html', {'form': form, 'formset': formset}) 
```

和**模板**来生成 HTML 和表单本身：

```
<h1>App edit view</h1>
{% extends "base.html" %}

{% block container %}
    <form method="post">{% csrf_token %}
        <table>
            {{ formset.management_form }}

            {{ form.as_table }}
            <tr><th></th><td><input type="submit" value="Save changes" /></td></tr>
        </table>
    </form>
{% endblock %} 
```

任何帮助都感激不尽！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:31:06.593

您需要在表单集中以及模板中呈现每个表单。

将您的模板更新为这样的内容（您正在渲染表单集）：

```
<form method="post" action="">
    {{ formset.management_form }}
    <table>
        {% for form in formset %}
        {{ form.as_table }}
        {% endfor %}
    </table>
</form> 
```

参考：[模板中的Formset](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-a-formset-in-views-and-templates)**

# ruby-on-rails - simple_fields_for form_builder.object 返回新对象？

> ID：12769126
> 
> 赞同：2
> 
> 时间：2012-10-07T13:09:54.907
> 
> 标签：ruby-on-rails, nested-attributes, simple-form, fields-for, formbuilder

我试图弄清楚您应该如何使用 Rails 表单生成器（或在本例中为 simple_form）访问对象。

[我按照http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for)中的描述传入对象，如下所示：

```
- @document.sections.each do |section|
  = f.simple_fields_for :sections, section do |section_form|
    = render 'section_fields', :f => section_form 
```

但是，当我在部分内部调用 f.object 时，我得到一个包含 nil id 等的“新”Section 对象，从而破坏了我的 link_to 路径。

即使以“标准”方式传递变量似乎也被打破了，例如：

```
- @document.sections.each do |section|
  = f.simple_fields_for :sections, section do |section_form|
    = render 'section_fields', :f => section_form, :foo => section 
```

在部分内部有 foo 未定义。

我应该如何访问为使用 fields_for has_many 关联而构建表单的预期对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:47:08.080

我认为您需要构建关联对象并更改您的代码，如下所示：

```
- @document.sections.build if @document.sections.empty?
  = f.simple_fields_for :sections, @document.sections do |section_form|
   = render 'section_fields', :f => section_form 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:18:32.017

事实证明，Cocoon 方法“link_to_add_association”正在生成一个新对象，该对象破坏了包含 f.object 的 link_to，因为此时该对象显然不存在。

只需添加“除非 f.object.new_record？” 忽略 Cocoon 生成的新（隐藏）记录。

# jquery - 在 jQuery UI 模式中已禁用复选框状态检查

> ID：12769128
> 
> 赞同：0
> 
> 时间：2012-10-07T13:10:29.270
> 
> 标签：jquery, jquery-ui, checkbox

我需要选中显示在模式窗口中的表单中的两个复选框。问题是，如果模式显示我的复选框的状态被选中（用 JS 校对见下文），但复选框没有被选中（视觉上）。

（我只是打开模式然后检查复选框是否被选中，当警报窗口打开时，它告诉我复选框已被选中，但在单击“确定”后，选中状态消失（视觉上））

这是我的表格：

```
<div id="dialog_create_news" title="Neue News erstellen">
    <p class="validateTips">Bitte alle Felder ausfüllen!</p>
    <form method="post" id="news_add" action="edit.php?action=news_add" accept-charset="utf-8">
        <table>
            <tr>
                <td>Newsletter:</td>
                <td><input type="checkbox" name="newsletter_news" class="news_newsletter" value="1" /></td>
            </tr>
            <tr>
                <td>Kommentare:</td>
                <td><input type="checkbox" name="comments_news" class="news_comments" value="1" /></td>
            </tr>
            <tr class="press_title">
                <td>Titel:</td>
                <td><input type="text" id="title_news" name="title_news" /></td>
            </tr>
            <tr class="press_text">
                <td></td>
                <td><textarea cols="50" rows="15" name="content_news" id="content_news"></textarea></td>
            </tr>
        </table>
        <input type="hidden" name="news_submit" value="true" />​​​​​​​​​​​​​​​​​
    </form>
</div> 
```

这是我的 JS：

```
$("#add_news").button().click(function() {
    $( "#dialog_create_news" ).dialog( "open" );
    //Set checkboxes 'checked'  
    if ($("#dialog_create_news").dialog( "isOpen" ) === true) {
        $('.news_comments').prop('checked', true);
        $('.news_newsletter').prop('checked', true);
    }
    //Check if checkboxes are checked
    if( $('.news_comments').prop('checked')){
        alert('checked');
    }
    clear_form_elements('#news_add');
}); 
```

我在用：

```
<script type="text/javascript" src="js/jQuery_1_7_1.min.js"></script>
<script type="text/javascript" src="js/jQuery_ui_1.8.17.custom.min.js"></script> 
```

# javascript - 以逗号作为百位分隔符打印数字

> ID：12769130
> 
> 赞同：0
> 
> 时间：2012-10-07T13:10:50.367
> 
> 标签：javascript, regex

我有一个像“7847258998”这样的数字，我想用 javascript 中的百个逗号分隔符打印它。结果应该是：

```
7,84,72,58,998 
```

即右边的前三位数字应该组合在一起。剩余的数字以 2 为一组分组。我尝试了以下操作：

```
"7847258998".replace(/\B(?=(\d{3})+(\d{2})+(?!\d))/g, ",") 
```

但它返回：`7,8,4,72,58998`. 什么是正确的表达方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T13:55:54.547

尝试这个：

```
"7847258998".replace(/\B(?=(\d{2})*(\d{3})$)/g, ","); 
```

我在前瞻中匹配字符串的结尾，这样我总是在寻找理智的东西。否则几乎任何东西都匹配。

在输入长度 1-10 上进行了测试。足以确定它可能有效。但是，这样做的效率很低，因为对于每个字符，您必须解析字符串的其余部分。

但是您*确实*要求使用正则表达式来完成这项工作=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:16:38.447

```
function commafy(num)
{  
   num  =  num+"";  
   var  re=/(-?\d+)(\d{3})/  
   while(re.test(num))
   {  
     num=num.replace(re,"$1,$2")  
   }  
   return  num;  
}
function  commafyback(num)
{  
   var x = num.split(',');
   return parseFloat(x.join(""));
} 
alert(commafy(7847258998)) 
```

# android - 在 webview 加载之前加载图像？

> ID：12769139
> 
> 赞同：2
> 
> 时间：2012-10-07T13:11:54.630
> 
> 标签：android, android-asynctask, android-webview, android-websettings

我正在开发网络应用程序，我正在使用网络视图直接从网站 url 加载它。在 android webview 中加载该 url 时，它的加载速度非常慢，加载时间接近 5 -7 秒，平均在显示白屏时。所以，我在想的是在加载 webview 的过程中，我想在屏幕上显示一个图像，5 秒后应用程序将加载。因此，通过在 webview 加载时平均显示 5 秒的任何图像，用户可以直接访问应用程序而不会面临任何时间延迟（例如出现白屏）。

我的代码是：

```
 WebView webview = (WebView) findViewById(R.id.webView1);
    websetting = webview.getSettings();
    websetting.setJavaScriptEnabled(true);
    webview.setVerticalScrollBarEnabled(false);
    webview.loadUrl("/**here loading my url which is taking nearly 5-8 seconds to load**/"); 
```

我尝试使用启动画面，但是在启动画面超时后，webview 正在加载。

那么，任何人都可以帮助我解决这个问题。在加载 webview 时加载图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:05:19.483

您可以在每次调用时将图像缓存在磁盘上。在显示图像之前，请检查图像是否已存在于缓存中。如果它确实从那里加载它，则将图像下载到缓存并从那里加载。在加载图像时，向用户显示一个存根。我以前用图像视图做过这个。

请注意，您的缓存图像可能已过时。您的代码也必须处理它。这是一个已实施的相关问题

[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

该问题的一些最佳答案并未在 android 上使用良好的编码实践，因此请注意这一点。

# c# - C# - PostgreSQL (NpgSql) bytea 数据传输进度

> ID：12769140
> 
> 赞同：3
> 
> 时间：2012-10-07T13:12:14.460
> 
> 标签：c#, postgresql, npgsql

亲爱的 Stack Overflow 社区，

我正在使用带有 NpgSql .Net 连接器的 C# 中的 PostgreSQL 数据库。

当我将字节茶传输到 PostgreSQL 和从 PostgreSQL 传输时，我希望有一个进度条。我进行了很多搜索，但找不到任何可能的解决方法。

我使用的是一个 PostgreSQL 函数，它插入或检索存储在 bytea 列中的文件。也许，当我从应用程序上传文件以设置 ProgressBar.Maximum 属性时，我可以存储文件大小，但我不知道如何查看 NpgsqlConnection（或 NpgsqlCommand）中传输的当前字节数。

非常感谢您，伊格纳西奥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T14:18:51.987

亲爱的**Stackoverflow 社区**，

我在 pgFoundary 中问过这个问题，Francisco 友好地回答了我的问题如下。我想和你分享。

* * *

> 关于您的问题，我认为这是不可能的，因为 Npgsql 在发送数据时不会报告已将多少字节写入数据库。
> 
> 一种可能的解决方法是使用大对象支持（您可以在 manual.npgsql.org 中找到一个工作示例），您的应用程序将在其中以块的形式发送字节，以便您可以更新有关进度的 UI。

* * *

谢谢你，伊格纳西奥。

# android - 在 Eclipse Juno 中自动设置 Android SDK

> ID：12769144
> 
> 赞同：0
> 
> 时间：2012-10-07T13:12:36.737
> 
> 标签：android, eclipse, eclipse-plugin

我刚刚在 Ubuntu Linux 10.04 上安装了 Eclipse Juno，并创建了一个用于 Android 的新工作空间。

Eclipse 和工作区文件夹都是新的，所以我假设当我启动 Eclipse 时，没有使用来自我系统上其他 Eclipse 安装或工作空间的信息。

然后我启动了 Eclipse 并按照[此页面中的说明从](http://developer.android.com/sdk/installing/installing-adt.html)[ADT 插件](https://dl-ssl.google.com/android/eclipse/)存储库安装 Android 插件。安装顺利，安装插件后，Eclipse 自动重启。

重启 Eclipse 后，会显示一个对话框，要求指明 Eclipse 可以安装一个或多个 android-sdks 的文件夹。默认路径是

```
my_home_directory/android-sdks 
```

因为我想休息一下，所以我推动`cancel`计划稍后进行此安装。

当我重新启动 Eclipse 时，对话框不再显示。我可以自己下载 sdk，但我更喜欢使用 Eclipse 内置的自动安装。

所以我想也许 Eclipse 已经保存了一些关于自动安装被取消并且不再提供它的事实的信息。我已经删除了工作空间文件夹和 Eclipse 安装文件夹，创建了新的空文件夹，再次解压了 Eclipse 存档，并再次执行了 Android 插件安装。令我惊讶的是，android-sdk 自动安装对话框**不再**出现。

有谁知道如何解决这个问题？即如何

*   手动启动自动 Android-sdk 安装程序，
*   或者完全卸载 Eclipse，这样它就没有以前安装的任何记忆，它会自动显示安装对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:51:22.527

我不确定你说的是哪个安装文件夹。我认为它可能是 android 用来引用其可执行文件的那个（如 adb / monkey-runner）。

您是否尝试在 Window -> Preferences -> Android -> SDK Location -> Browse 中设置路径？

你已经完成了，你应该能够使用 Window -> Android SDK Manager 安装一个 Android 运行时

# django - Django mptt，扩展“base.html”

> ID：12769145
> 
> 赞同：2
> 
> 时间：2012-10-07T13:12:46.540
> 
> 标签：django, django-mptt

在 base.html 中：

```
<div id="menu_shop">
            <input name="search" placeholder="search">
            <p>Category:</p>
             {% load mptt_tags %}
<ul class="root">
    {% recursetree nodes %}
        <li>
            {{ node.name }}
            {% if not node.is_leaf_node %}
                <ul class="children">
                    {{ children }}
                </ul>
            {% endif %}
        </li>
    {% endrecursetree %}
</ul>
</div> 
```

在意见中：

```
def show_category_tree(request):
    return render_to_response("base.html",
                              {'nodes': Category.tree.all()},
                              context_instance=RequestContext(request)) 
```

网址.py：

```
url(r'^category/', 'item.views.show_category_tree'),
url(r'^category/(?P<slug>[\w\-_]+)/$', 'item.views.by_category'), 
```

如何在“by_category.html”中显示它

如果我尝试（例如）：

```
{% extends "base.html" %}

{% block content %}
{% for e in entries %}
<p><b>{{ e.name}}</b></p>

<p>{{ e.desc}}</p>
{% endfor %}

{% endblock %} 
```

我有这个错误：

[http://dpaste.com/810809/](http://dpaste.com/810809/)

{% extends "base.html" %} 不起作用。如果我删除它，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:21:14.983

您看到此错误是因为您的模板上下文`by_category`不包括`nodes`.

`extends`标签与模板相关，与视图无关。它使您的`by_category.html`模板扩展`base.html`模板，但它不包括来自任何其他视图的模板上下文。

最简单的解决方法是添加`nodes`到`by_category`视图中的模板上下文。

```
def by_category(request, slug):
    entries = Entry.objects.filter(...)
    return render_to_response("base.html",
        {'entries': entries,
         'nodes': Category.tree.all()},
        context_instance=RequestContext(request)) 
```

如果您想在许多其他视图中显示节点，这将是重复的。如果您想在所有视图中包含节点，您可能需要编写一个请求上下文处理器。如果您想将它包含在某些但不是所有页面中，请尝试编写自定义模板标签。

# silverlight - 将图像添加到页面后不会立即呈现图像

> ID：12769148
> 
> 赞同：0
> 
> 时间：2012-10-07T13:13:17.300
> 
> 标签：silverlight, windows-phone-7

我是 Windows 手机应用程序开发的新手。在我的一个页面上，我有一个可以完成大量工作的按钮。因此，当我按下按钮时，屏幕会冻结，然后在所有工作完成后恢复。现在我想展示一些在此期间要显示的等待图像或页面。

因此，我分别在按钮单击操作的开始和结束时在页面顶部创建和销毁了一个图像，但它仍然冻结并且只有在所有工作完成后才会呈现屏幕，使其无动于衷。我正在使用 Silverlite C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:51:43.937

您需要将繁重的工作推到后台线程上。当前发生的是工作正在 UI 线程上完成，因此它“冻结”，因为 UI 线程正在等待工作完成。有多种方法可以将工作推送到后台线程。一种方法是使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/4852et58%28v=vs.95%29.aspx)。

一个简单的例子，它不包括在工作完成时报告之类的东西，看起来像这样

```
BackgroundWorker bw = new BackgroundWorker();
bw.DoWork += new DoWorkEventHandler(BW_DoWork);
bw.RunWorkerAsync();

private void BW_DoWork(object sender, DoWorkEventArgs e)
{
    //Your heavy work code
} 
```

在后台线程上工作时要记住的重要一点是，如果要更改 UI 上的任何内容，则需要将数据编组到 UI 线程并在那里进行更新。你可以这样做：

```
Deployment.Current.Dispatcher.BeginInvoke(() => {
       myTextBlockExample.Text = "Changing the UI";           
} 
```

如果您尝试在`TextBlock`没有该`Dispatcher.BeginInvoke`方法的情况下更改 ，则会出现`Invalid Cross-Thread Access`错误。如果您在 WP 开发中看到该错误，则很可能您正在尝试从非 UI 线程更新 UI 元素。

您可以在调用之前放置显示加载图像的代码`bw.RunWorkerAsync`。

# haskell - Digestive Functors with a variable number of subforms (Snap/Heist)

> ID：12769153
> 
> 赞同：10
> 
> 时间：2012-10-07T13:13:57.637
> 
> 标签：haskell, haskell-snap-framework, heist, digestive-functors

I'm working on porting a site from PHP to Snap w/ Heist. I've ported some of the simpler forms to using Digestive Functors successfully, but now I have to do the tricky ones that require the use of subforms.

This application manages producing flyers for retail stores, so one of the tasks that need to be done is adding an ad size and defining its physical dimensions on the printed flyer. Sizes will vary depending on the type of page (configurable by the flyer owner) and its orientation (which can only be controlled by the administrators).

![what the form looks like in the PHP version](../Images/f3b47e491e6666a8cf689a7d98654de9.png)

This form is guaranteed to have a minimum of 3 cells, most likely going to have 9 cells (as pictured above from the PHP version), but could theoretically have an unlimited number.

Here's what I've got so far for the dimensions subform:

```
data AdDimensions = AdDimensions
    { sizeId :: Int64
    , layoutId :: Int64
    , dimensions :: Maybe String
    }

adDimensionsForm :: Monad m => AdDimensions -> Form Text m AdDimensions
adDimensionsForm d = AdDimensions
    <$> "size_id" .: stringRead "Must be a number" (Just $ sizeId d)
    <*> "layout_id" .: stringRead "Must be a number" (Just $ layoutId d)
    <*> "dimensions" .: opionalString (dimensions d) 
```

The form definition doesn't feel quite right (maybe I have completely the wrong idea here?). `AdDimensions.dimensions` should be a `Maybe String`, since it will be null when coming back from the database when running the query to get a list of all of the possible combinations of size_id/layout_id for a new ad size, but it will be not null from a similar query that will be run when creating the edit form. The field itself is required (`ad_dimensions.dimensions` is set to `not null` in the database).

From here, I have no idea where to go to tell the parent form that it has a list of subforms or how I might render them using Heist.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T14:00:46.100

I wrote [a special combinator for this](http://hackage.haskell.org/packages/archive/digestive-functors/0.2.1.0/doc/html/Text-Digestive-Forms.html#v%3ainputList) quite some time ago for digestive-functors-0.2\. It was a very [full featured solution](http://hackage.haskell.org/packages/archive/digestive-functors-blaze/0.2.1.0/doc/html/Text-Digestive-Blaze-Html5.html#v%3ainputList) that included [javascript code](http://hackage.haskell.org/packages/archive/digestive-functors-blaze/0.2.1.0/doc/html/src/Text-Digestive-Blaze-Html5.html#inputListJs) allowing fields to be dynamically added and removed. That code was based on a much earlier implementation Chris and I did for the formlets package which digestive-functors eventually superceded. This function was never ported to work with the new API that digestive-functors got in 0.3.

The problem is tricky and has some subtle corner cases, so I would recommend that you spend some time looking at the code. I think Jasper would probably accept a good port of the code into the current version of digestive-functors. It's just that nobody has done the work yet.

Edit: This has been done now for the latest digestive-functors. See the [listOf](http://hackage.haskell.org/packages/archive/digestive-functors/0.6.0.1/doc/html/Text-Digestive-Form.html#g:5) function.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-23T20:10:57.203

Using the `listOf` functionality (which wasn't around when the question was originally asked/answered), this is how one would go about about it. This requires 2 forms where the form representing your list's type is a formlet:

```
data Thing = Thing { name: Text, properties: [(Text, Text)] }

thingForm :: Monad m => Maybe Thing -> Form Text m Thing
thingForm p = Thing
    <$> "name" .: text (name <$> p)
    <*> "properties" .: listOf propertyForm (properties <$> p)

propertyForm :: Monad m => Maybe (Text, Text) -> Form Text m (Text, Text)
propertyForm p = ( , )
    <$> "name" .: text (fst <$> p)
    <*> "value" .: text (snd <$> p) 
```

# Simple forms

If you have a simple list of items, digestive-functors-heist defines some splices for this, but you might find that you'll end up with invalid markup, especially if your form is in a table.

```
<label>Name <dfInputText ref="formname" /></label>

<fieldset>
    <legend>Properties</legend>

    <dfInputList ref="codes"><ul>
    <dfListItem><li itemAttrs><dfLabel ref="name">Name <dfInputText ref="name" /></dfLabel>
        <dfLabel ref="code">Value <dfInputText ref="value" required /></dfLabel>
        <input type="button" name="remove" value="Remove" /></li></dfListItem>
    </ul>

    <input type="button" name="add" value="Add another property" /></dfInputList>
</fieldset> 
```

[There *is* JavaScript provided by digestiveFunctors to control adding and removing elements from the form that has a jQuery dependency](https://github.com/jaspervdj/digestive-functors/blob/master/digestive-functors-heist/js/df-list.js). I ended up writing my own to avoid the jQuery dependency, which is why I'm not using the provided `addControl` or `removeControl` splices (attributes for button type elements).

# Complex Forms

The form in the OP can't make use of the splices provided by digestive-functors-heist because the labels are dynamic (eg. they come from the database) *and* because we want it in a complex table layout. This means we have to perform 2 additional tasks:

## Generate the markup manually

If you haven't looked at the markup that are generated by the digestive-functors-heist splices, you might want to do that first so that you get an idea of exactly what you have to generate so that your Form can be processed correctly.

For dynamic forms (eg. forms where the users are allowed to add or remove new items on the fly), you will need a hidden *indices* field:

```
<input type='hidden' name='formname.fieldname.indices' value='0,1,2,3' /> 
```

*   formname = whatever you named your form when you ran it via `runForm`
*   fieldname = the name of the list field in your main form (adjust as necessary if you're using subforms), in this example it would be named "properties"
*   value = a comma delimited list of numbers representing the indices of the subforms that should be processed when the form is submitted

When one of the items from your list is removed or a new one is added, this list will need to be adjusted otherwise new items will be completely ignored and removed items will still exist in your list. This step is unnecessary for static forms like the one in the OP.

* * *

Generating the rest of the form should be pretty straight forward if you already know how to write splices. Chunk up the data as appropriate (groupBy, chunksOf, etc.) and send it through your splices.

In case you can't already tell by looking at markup generated by digestive-splices-heist, you'll need to insert the index value of your subform as part of the fields for each subform. Tthis is what the output HTML should look like for the first field of our list of subforms:

```
<input type='text' name='formname.properties.0.name' value='Foo' />
<input type='text' name='formname.properties.0.value' value='Bar' /> 
```

(Hint: zip your list together with an infinite list starting from 0)

# Pull the data back out of your form when handling errors

(I apologize in advance if none of this code is actually able to compile as written, but hopefully it illustrates the process)

This part is less straight forward than the other part, you'll have to dig through the innards of digestive-functors for this. Basically, we're going to use the same functions digestive-functors-heist does to get the data back out and populate our Thing with it. The function we're needing is `listSubViews`:

```
-- where `v` is the view returned by `runForm`
-- the return type will be `[View v]`, in our example `v` will be `Text`
viewList = listSubViews "properties" v 
```

For a static form, this can be as simple as zipping this list together with your list of data.

```
let x = zipWith (curry updatePropertyData) xs viewList 
```

And then your updatePropertyData function will need to update your records by pulling the information out of the view using the `fileInputRead` function:

```
updatePropertyData :: (Text, Text) -> View Text -> (Text, Text)
updatePropertyData x v =
    let
        -- pull the field information we want out of the subview
        -- this is a `Maybe Text
        val = fieldInputRead "value" v
    in
        -- update the tuple
        maybe x ((fst x, )) val 
```

# linux - 将 CouchDB .couch 文件从 Windows 传输到 Linux

> ID：12769155
> 
> 赞同：2
> 
> 时间：2012-10-07T13:14:18.573
> 
> 标签：linux, nosql, couchdb, admin

我目前正在做一个 CouchDB 项目，最近决定切换到 Linux 环境进行开发，因为我计划在 Linux 服务器上进行部署。

我希望直接从 - *Program Files/Apache Software Foundation/CouchDB-1-1-1/var/lib/couchdb*复制我的 .couch 文件- 并将它们直接粘贴到我猜应该的位置 - *var/lib/couchdb* - 但是每次我尝试访问*var/lib/couchdb*时，我都会遇到文件/文件夹权限错误。

是否可以按照我设想的方式传输 .couch 文件？

...

**更新**- 跟进多米尼克的评论，我设法应用了下面答案中的修复程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:33:38.363

经过一些调查工作，我发现这是一个权限错误，正如 Dominic Barnes 在评论中所建议的那样......

此处还讨论了该问题-[使用 couchdb 进行分段设置](https://stackoverflow.com/questions/6835918/staging-setup-with-couchdb)

为了修复它，我先跑了；

```
sudo chmod -R 755 var/lib/couchdb 
```

我可能也更改了相关父文件夹的权限。然后我可以将我的 .couch 文件复制到 var/lib/couchdb/COUCH-VERSION-NUMBER 中。之后，我必须使用 chmod 为新复制的文件设置有利的写权限，但还必须运行：

```
sudo chown couchdb var/lib/couchdb/COUCH-VERSION-NUMBER/ 
```

将这些文件打开到 couchdb 安装设置供内部使用的用户组（“couchdb”组）（我认为......）。之后，我重新启动了 couchdb，强制它停止：

```
ps -U couchdb -o pid= | xargs kill -9 
```

并重新启动：

```
/etc/init.d/couchdb start 
```

在那之后，一切似乎都按预期进行。希望能帮助其他遇到同样问题的人。

# android - YouTube iframe 不适用于三星 S2 I9100G

> ID：12769156
> 
> 赞同：2
> 
> 时间：2012-10-07T13:14:19.360
> 
> 标签：android, api, iframe, youtube, embed

我有一个使用 YouTube iframe 标签嵌入视频的 Android 应用程序。它适用于大多数手机（包括三星 S2 I9100），但今天当我尝试在三星 Galaxy S2 I9100 **G**上测试该应用程序时，它显示灰色屏幕，中间有一个卷轴按钮！任何人都知道如何解决这个问题？

```
WebView webview = (WebView) findViewById(R.id.webview);
WebSettings webViewSettings = webview.getSettings();webViewSettings.setJavaScriptCanOpenWindowsAutomatically(true);
            webViewSettings.setJavaScriptEnabled(true);
            webViewSettings.setPluginsEnabled(true);
            webViewSettings.setBuiltInZoomControls(true);
            webViewSettings.setPluginState(PluginState.ON); 
```

iframe 标签：

```
<iframe class="youtube-player" type="text/html" "width="420" height="250" src="http://www.youtube.com/embed/348fjdsf8?fs=0&autoplay=1" "frameborder="0" allowfullscreen="false"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T09:28:16.423

您可以使用 translate3d 变换方法来完成此操作。对我有用的代码如下：HTML

```
<div class="animClass">
    <iframe width="100%" height="58%" src="http://www.youtube.com/embed/-1UIBTve4dI?rel=0&;&autoplay=0&controls=1" frameborder="0" allowfullscreen></iframe>
</div> 
```

CSS

```
.animClass {
    -webkit-transform: translate3d(0, 0, 0);
} 
```

[http://www.telerik.com/forums/youtube-video-audio-but-no-video#JPiN4piN6U6eITVmd0hz9A](http://www.telerik.com/forums/youtube-video-audio-but-no-video#JPiN4piN6U6eITVmd0hz9A)

# javascript - 有没有办法用 jquery ui 实现这种可拖动的效果？

> ID：12769158
> 
> 赞同：0
> 
> 时间：2012-10-07T13:15:05.267
> 
> 标签：javascript, jquery, jquery-ui

有没有办法使用 jquery UI创建[这种效果？](http://www.switchonthecode.com/tutorials/javascript-tutorial-draggable-view-in-a-container)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:19:00.567

是的，如果你使用 firebug 并检查元素，你会看到另一个 div 中有一个可拖动的 div，它具有 overflow: hidden 属性。

```
<div style="width: 300px; height: 300px; overflow: hidden;">
    <div id="draggable" style="width: 800px; height: 800px;"></div>
</div>

$("#draggable").draggable(); 
```

这就是概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:20:31.530

You can use the `containment` option of jQuery UI Draggable.

Here is an example: [http://jsfiddle.net/AZwbP/](http://jsfiddle.net/AZwbP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:27:31.053

它不能用 jQuery 可拖动来实现。因为，此处的可拖动项目不应被拖动，使其顶部/左侧点大于其容器。所有 4 点也是如此。

使用 jQuery draggable 你不能限制元素的拖动超出某个坐标。

我建议使用 mousedown 和 mousemove 事件用法创建一个自定义 jQuery 插件。

# php - 使用 .htaccess Mod 重写规则将 PHP 查询 URL 重写为图像

> ID：12769159
> 
> 赞同：0
> 
> 时间：2012-10-07T13:15:20.163
> 
> 标签：php, apache, .htaccess, mod-rewrite, redirect

如何将 PHP 查询 url 重写为实际图像？

我想将*http://localhost/img.php?image=winter.jpg*重写为*http://localhost/img/winter.jpg*图像名称会动态变化。

我试过这样，但它不起作用。

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^.+img\.php\?.*?image\=(.+)[$&] ./img/$1 [NC] 
```

谢谢。

[更新]

访问*http://localhost/img.php?image=winter.jpg*后，以下文本被附加到日志文件中。浏览器显示消息“未找到对象！在此服务器上未找到请求的 URL。如果您手动输入了 URL，请检查您的拼写并重试。”

```
127.0.0.1 - - [<time>] [localhost/sid#975148][rid#4d09cb8/initial] (3) [perdir Z:/xampp/htdocs/] strip per-dir prefix: Z:/xampp/htdocs/img.php -> img.php
127.0.0.1 - - [<time>] [localhost/sid#975148][rid#4d09cb8/initial] (3) [perdir Z:/xampp/htdocs/] applying pattern '^.+img\.php\?.*?image=(.+)[$&]' to uri 'img.php'
127.0.0.1 - - [<time>] [localhost/sid#975148][rid#4d09cb8/initial] (3) [perdir Z:/xampp/htdocs/] pass through Z:/xampp/htdocs/img.php 
```

[更新]

错误日志说，

```
[<time>] [error] [client 127.0.0.1] script 'Z:/xampp/htdocs/img.php' not found or unable to stat 
```

所以我创建了一个名为的虚拟文件`img.php`，并且错误声明不再显示。我假设不需要一个虚拟文件。现在它只在我访问*http://localhost/img.php?image=winter.jpg时显示虚拟 PHP 文件的内容*

我试过`[NC,L]`, `[R,NC]`，`[R,NC,L]`但没有一个有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T02:41:10.377

这应该有效。可能需要重新启动浏览器。

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ^image=(.*)$
RewriteRule ^.*img\.php$ ./img/%1 [NC,QSA] 
```

相关：[图像+字符串到图像文件夹重写的mod重写规则](https://stackoverflow.com/questions/4730587/mod-rewrite-rule-for-image-string-to-imagefolder-rewrite)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:17:00.083

你没有重定向。添加重定向标志，最后尝试`[R]`：

```
RewriteRule ^.+img\.php\?.*?image\=(.+)[$&] ./img/$1 [R,NC]
                                                      ^ 
```

# assembly - 调用 printf 可以防止段错误

> ID：12769160
> 
> 赞同：2
> 
> 时间：2012-10-07T13:15:21.020
> 
> 标签：assembly, stack, try-catch, context-switching

IT工程专业的学生在这里。我们被要求进行上下文切换，一项特定的任务让我们实现了一个相当粗糙的尝试/抛出系统。这是我们一直在编写的代码：

```
struct ctx_s {
  int esp;
  int ebp;
};

struct ctx_s * pctx;

typedef int (func_t)(int); /* a function that returns an int from an int */

int try(func_t *f, int arg)
{
  /* saving context by storing values of %esp and %ebp */      
    asm ("movl %%esp, %0"
    : "=r"((*pctx).esp) 
    :
    );

    asm ("movl %%ebp, %0"
    : "=r"((*pctx).ebp) 
    :
    );

    /* calling the function sent to try(), returning whatever it returns */
    return f(arg);
}

int throw(int r)
{
    printf("MAGIC PRINT\n");

    static int my_return = 0;
    /* ^ to avoid "an element from initialisation is not a constant" */
    my_return = r;
    /* restituting context saved in try() */
    asm ("movl %0, %%esp"
    : 
    : "r"((*pctx).esp) 
    );

    asm ("movl %0, %%ebp"
    : 
    : "r"((*pctx).ebp) 
    );

    /* this return will go back to main() since we've restored try()'s context
     so the return address is whatever called try... */
    /* my_return is static (=> stored in the heap) so it's not been corrupted,
     unlike r which is now the second parameter received from try()'s context, 
     and who knows what that might be */
    return my_return;
} 
```

pctx 是一个指向包含两个 int 的简单结构的全局指针，f 是一个调用 throw() 并将一些返回代码 #define'd 发送到 42 的函数，而 main() 本质上是分配 pctx，result=try(f, 0)并打印结果。我们预计结果为 42。

现在，您可能已经在 throw() 中发现了 MAGIC PRINT。它在这里的原因尚不完全清楚；基本上，大多数（不是所有）学生都在 throw() 内部进行段错误；在这个函数中调用 printf() 使程序看起来正常工作，老师们认为任何系统调用都可以正常工作。

因为我并没有真正得到他们的解释，所以我尝试比较使用 gcc -S 为两个版本（有和没有 printf()）生成的汇编代码，但我无法充分利用它。在 throw() 的左大括号（第 33 行）设置断点并使用 gdb 反汇编给了我这个：

没有 printf()：

```
Breakpoint 1, throw (r=42) at main4.c:38
(gdb) disass
Dump of assembler code for function throw:
0x0804845a <throw+0>:   push   %ebp
0x0804845b <throw+1>:   mov    %esp,%ebp
0x0804845d <throw+3>:   mov    0x8(%ebp),%eax
0x08048460 <throw+6>:   mov    %eax,0x8049720
0x08048465 <throw+11>:  mov    0x8049724,%eax
0x0804846a <throw+16>:  mov    (%eax),%eax
0x0804846c <throw+18>:  mov    %eax,%esp
0x0804846e <throw+20>:  mov    0x8049724,%eax
0x08048473 <throw+25>:  mov    0x4(%eax),%eax
0x08048476 <throw+28>:  mov    %eax,%ebp
0x08048478 <throw+30>:  mov    0x8049720,%eax
0x0804847d <throw+35>:  pop    %ebp
0x0804847e <throw+36>:  ret    
End of assembler dump.
(gdb) c
Continuing.

Program received signal SIGSEGV, Segmentation fault.
0xb7e846c0 in ?? () 
```

使用 printf()：

```
Breakpoint 1, throw (r=42) at main4.c:34
(gdb) disassemble 
Dump of assembler code for function throw:
0x0804845a <throw+0>:   push   %ebp
0x0804845b <throw+1>:   mov    %esp,%ebp
0x0804845d <throw+3>:   sub    $0x18,%esp
0x08048460 <throw+6>:   movl   $0x80485f0,(%esp)
0x08048467 <throw+13>:  call   0x8048364 <puts@plt>
0x0804846c <throw+18>:  mov    0x8(%ebp),%eax
0x0804846f <throw+21>:  mov    %eax,0x804973c
0x08048474 <throw+26>:  mov    0x8049740,%eax
0x08048479 <throw+31>:  mov    (%eax),%eax
0x0804847b <throw+33>:  mov    %eax,%esp
0x0804847d <throw+35>:  mov    0x8049740,%eax
0x08048482 <throw+40>:  mov    0x4(%eax),%eax
0x08048485 <throw+43>:  mov    %eax,%ebp
0x08048487 <throw+45>:  mov    0x804973c,%eax
0x0804848c <throw+50>:  leave  
0x0804848d <throw+51>:  ret    
End of assembler dump.
(gdb) c
Continuing.
MAGIC PRINT
result = 42

Program exited normally. 
```

我真的不知道该怎么做。显然事情的发生方式不同，但我发现在这两种情况下都很难理解发生了什么......所以我的问题本质上是：调用 printf 如何使 throw 不是段错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:03:20.937

您正在“恢复”`ESP`到保存在另一个函数中的值。在这里可能不是一个有用的价值。

与“魔术”代码的区别在于它使编译器在`throw`函数中保存和恢复堆栈帧。

最后的一条`leave`指令相当于

```
mov    %ebp, %esp
pop    %ebp 
```

这可能会使堆栈指针回到函数入口处的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:03:33.683

好的，这是一个有点松散的分析，因为我看不到 try 部分，但从标准调用约定来看，包含 try 的方法将保存`%esp`到`%ebp`，减少`%esp`为局部变量腾出空间并运行你的“try”代码保存`%esp`和`%ebp`。

通常，当一个函数退出时，它会通过使用`leave`before return 来恢复这些更改。离开将恢复`%ebp`到`%esp`，弹出`%ebp`并返回。这可以确保`%esp`在为局部变量保留空间之前将其恢复到原来的位置。

没有版本的问题`printf`是它不使用`leave`which pops`%ebp`而不首先将其内容恢复到`%esp`. 该`ret`指令将弹出一个局部变量并返回该变量。不是最好的结果。

我的怀疑是，由于您的函数没有局部变量，编译器认为没有理由`%esp`从`%ebp`. 由于在堆栈上保留空间，编译器知道在返回之前必须恢复`printf`的那个版本。`%esp`

如果要测试理论，编译成汇编，替换即可；

```
0x0804847d <throw+35>:  pop    %ebp 
```

带有离开指令并组装结果。它应该也能正常工作。

或者，我怀疑您可以在您的 asm 指令中指示 gcc`%esp`已被破坏，从而使其产生休假。

编辑：显然标记`%esp`为 clobbered 本质上是 gcc 中的 NOOP ：-/

# java - 通过 config.properties 连接数据库

> ID：12769163
> 
> 赞同：0
> 
> 时间：2012-10-07T13:15:32.810
> 
> 标签：java

我正在创建一个程序，其中（除其他外）用户可以从空间中更改数据库连接的 url、名称和密码。

在一个类中，我得到了保存在文件中的值，直到这里一切正常。当我在课堂上讨论数据库的连接时，问题就出现了。错误不是 OutProp 方法（它在属性文件中获取数据），因为我在另一个类中尝试过它并且它工作得很好。所以我想可能在公共静态方法 Connection ConnectDb () 中编写代码存在问题，因为它是静态的，你必须表现得不同，而且由于我最近开始学习 Java，我想我错过了一些东西。

PS。写入`Connection conn = DriverManager. getConnection ("jdbc: mysql://localhost/databaseprogetto/root/root");`连接到数据库。

感谢您的任何建议或解决方案，我希望我解释得很好。

```
 import java.io.FileInputStream;
 import java.sql.*;
 import javax.swing.*;
 import java.io.IOException;
 import java.util.Properties;

 public class JavaConnect {

 Connection conn = null;
 static String url_database;
 static String username;
 static String password;

 public void OutProp (){

 Properties prop = new Properties();

    try {   
        prop.load(new FileInputStream("config.properties"));

            url_database = prop.getProperty("Url");
            username = prop.getProperty("Username");
            password = prop.getProperty("Password");

    } catch (IOException ex) {
        ex.printStackTrace();
    }
 }

 public static Connection ConnectDb(){

    try{         
        Class.forName ("com.mysql.jdbc.Driver");
        Connection conn = DriverManager.getConnection (url_database,username,password);

        return conn;
    }
    catch (Exception e) {
        JOptionPane.showMessageDialog(null, e);
        return null;
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:20:54.560

**1.**请**确保您**在属性文件中的 2 个操作数的任**一侧都没有空格。**

**例如：**

```
Property1=value1
Property2=value2 
```

**2.**试着把它放在你`Property file`的`bin`项目文件夹中。

# php - 这个时间戳格式是什么：090912154113？

> ID：12769165
> 
> 赞同：1
> 
> 时间：2012-10-07T13:15:43.450
> 
> 标签：php, date, format, timestamp

这是什么时间戳：

```
090912154113 
```

更多的 ：

```
082712032309
122711190042
091112090931 
```

它看起来像常规的 unix 时间，但格式不同，它是什么以及如何使用 php 来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T13:20:25.750

看起来像 2012 年 9 月 9 日 3 点（24 小时制 15 点）：41 和 13 秒（mmddyyhhmmss）。 [http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php) , mdyHis 使用 php 格式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-07T13:20:01.800

似乎是：MMDDYYHHmmSS。

# php - 有趣的 php for 循环

> ID：12769168
> 
> 赞同：-5
> 
> 时间：2012-10-07T13:16:25.280
> 
> 标签：php

```
 for ($i=1; $i<=500; $i++) 
 {
     echo "The number is " . $i . "<br />";
 } 
```

好吧，这是 for 循环，但我想要下一个输出：

```
This number is 1 is Red
This number is 2 is blue
This number is 3 is green
This number is 4 is orange
This number is 5 is Red
This number is 6 is blue
This number is 7 is green
This number is 8 is orange
This number is 9 is Red
This number is 10 is blue
This number is 11 is green
This number is 12 is orange 
```

- 基本上每四次重复红色、蓝色、绿色、橙色 - 这是脑筋急转弯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:23:36.543

这也是给你的预告片

```
echo "<pre>";
$li = new LimitIterator(new InfiniteIterator(new ArrayIterator(array("red","blue","green","orange"))), 0, 500);
foreach ( $li as $key => $teaser ) {
    printf("The number is %d %s %s", $key + 1, $teaser, PHP_EOL);
} 
```

[观看现场演示](http://codepad.org/GJulU5yI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:21:06.483

使用模函数根据计数器值决定要使用的颜色：

```
$colors=array ('red','blue','green','orange');
for ($i=1; $i<=500; $i++)
{
    $color=$colors[$i%4];
    echo "This number is ".$i." is ".$color."<br />\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:21:24.180

```
$colours = ["Red", "Blue", "Green", "Orange"];

for ($i=0; $i<500; $i++)
{
    $colour = $i%4;
    echo "The number is " . $i . " is ".$colours[$colour]. "<br />";
} 
```

# css - 如何修复/解决 QtWebKit 不正确的字体回退行为？

> ID：12769169
> 
> 赞同：5
> 
> 时间：2012-10-07T13:16:36.803
> 
> 标签：css, qt, qtwebkit

我有一个网站，其中一些页面包含用户生成的内容。我使用 phantomjs（基于 QtWebKit）来截取页面，所以它们必须在 QtWebKit 中完美呈现。

当内容不是英文时，问题就开始了。然后，流行的浏览器（例如 Chrome 和 Firefox）回退到 CSS 字体系列中的下一个字体，直到默认字体。但是，在我的测试中，QtWebKit 似乎表现出不同的行为：它错误地选择了无法呈现内容的字体。

考虑这个示例文件“fonts.html”：

```
calibri, arial:
<div style="font-family: calibri, arial; font-size: 36px;">
ฝ่ายอีเว้นท์พร้อมแล้วกับงานปาร์ตี้ที่สนุกที่สุดในกทม
</div>

calibri:
<div style="font-family: calibri; font-size: 36px;">
ฝ่ายอีเว้นท์พร้อมแล้วกับงานปาร์ตี้ที่สนุกที่สุดในกทม
</div>

arial:
<div style="font-family: arial; font-size: 36px;">
ฝ่ายอีเว้นท์พร้อมแล้วกับงานปาร์ตี้ที่สนุกที่สุดในกทม
</div>

default:
<div style="font-size: 36px;">
ฝ่ายอีเว้นท์พร้อมแล้วกับงานปาร์ตี้ที่สนุกที่สุดในกทม
</div> 
```

以下是它在 Chrome 和 Arora（基于 QtWebKit 的浏览器，它提供与我的 phantomjs 脚本相同的结果）中的呈现方式：

![Chrome 与 QtWebKit 中的字体回退问题](../Images/70720c2a0e25b704a01a7e6dde8f6485.png)

我想要的是在 Calibri 中呈现文本，如果不适合某些字符，则回退到 Arial。

我会接受告诉我如何配置 QtWebKit 以允许这样做的解决方案（我在网上找不到任何东西），或者如何将我的 HTML/CSS 更改为“支持 QtWebKit”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:20:19.420

如果问题是所选字体不包含指定的字符，我建议您将字体嵌入到您的网站中。有了它，您可以确保每个平台都能够呈现您的内容。

您说 Chrome 没有您描述错误的行为。所以原因一定是在你旧的 WebKit 实现中。您可以尝试更新到使用 WebKit 2.0 的 Qt 5，例如 Google Chrome。Qt 4.x 使用旧的 WebKit 1.x 版本。

修复 WebKit 代码是一个***非常***糟糕的主意。代码库大约有 200 万行代码，您需要一个 64 位工具链来编译 QtWebKit 模块。如果您不完全按照说明进行操作，也很可能会出现编译器错误。由于 GIF 图像渲染器中的错误，我需要调试 WebKit 代码。这是人间*真正的*地狱；）

# java - jdbc.SQLServerException：任何用户的用户登录失败

> ID：12769171
> 
> 赞同：10
> 
> 时间：2012-10-07T13:16:40.283
> 
> 标签：java, sql, sql-server, sql-server-2008

我试图测试与本地 sql DB 的连接。我有这个代码：

```
try{
    Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver").newInstance();
    DriverManager.getConnection("jdbc:sqlserver://localhost:1433;databaseName=SocialFamilyTree;user=SOSCOMP");

}catch(Exception e){
    System.out.println("Couldn't get database connection.");
    e.printStackTrace();
} 
```

我尝试了很多用户。我的 Windows 用户是 SOSCOMP，没有密码。我也知道 SQL 2008 将用户创建为“sys”“dbo”，我也尝试过这些。我总是得到：

```
Couldn't get database connection.
com.microsoft.sqlserver.jdbc.SQLServerException: Login failed for user 'SOSCOMP'.

    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:196)
    at com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:246)
    at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:83)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerConnection.java:2532)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConnection.java:1929)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.access$000(SQLServerConnection.java:41)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecute(SQLServerConnection.java:1917)
    at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4026)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1416)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1061)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:833)
    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:716)
    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:841)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:243)
    at FT_Receiver.FT_Receiver.main(FT_Receiver.java:12) 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-07T13:27:42.800

如果您尝试连接使用 Windows 身份验证的数据库，您可以在连接字符串中使用“integratedSecurity”选项。

```
DriverManager.getConnection("jdbc:sqlserver://localhost:1433;databaseName=SocialFamilyTree;integratedSecurity=true;"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-07T13:22:42.783

最近经历了这个，我为解决几乎相同的问题所采取的步骤是

1.  使用 SQL Server Management Studio 以所需帐户登录并确认读取权限（必要时可写入）
2.  使用 SQL Server 配置管理器确认服务器实例正在侦听目标 IP 地址
3.  禁用防火墙以检查是否没有妨碍（并在必要时添加例外以供将来使用）

对我来说，最重要的是了解实例设置为侦听的 IP 地址和端口，这样当我构建连接字符串时，连接就不会被拒绝。

此外，如果您想使用 Windows 登录进行连接，您需要确保 SQL 实例配置为混合模式身份验证（即允许 Windows 和 SQL 登录）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-01T07:04:44.920

由于您收到此错误，因此 Sql 服务器正确侦听该端口。

1.  打开 Sql Server Management Studio 连接到您的服务器。
2.  右键单击服务器的图标并选择属性。
3.  转到安全选项卡并勾选 Sql Server 和 Windows 身份验证模式。

如果要定义用户，请从树中转到 Security->Logins，右键单击 logins 文件夹，然后单击“New Login”。

现在您的服务器应该可以使用这个 Url String。使用可以帮助您了解其工作的服务器的日志文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T05:29:35.633

回复：做到了。仍然警告：无法加载 sqljdbc_auth.dll 原因：- java.library.path 中没有 sqljdbc_auth – Mike 10 月 7 日 14:03

如果您从 shell 运行，则必须通过在 Eclipse 或命令行中的 VM 参数下添加此路径来添加 sqljdbc_auth.dll 的路径：-Djava.library.path="\MS SQL Server JDBC Driver 3.0\sqljdbc_3.0\enu \auth\x86"

那是如果您运行的是 32 位 Windows。否则最终的子目录会相应改变。

我认为这可能是一个更好的答案，设置基于 SQL Server 用户的身份验证： [Connecting SQL Server 2008 to Java: Login failed for user error](https://stackoverflow.com/questions/6403636/connecting-sql-server-2008-to-java-login-failed-for-user-error/10567111#10567111)

（我试着在这里总结一下：http: [//silveira.wikidot.com/sql-server](http://silveira.wikidot.com/sql-server)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-03T07:18:48.247

我也遇到了同样的问题，在我的情况下，以下内容配置错误

1.  我的系统中正在运行两个 SQL（版本）服务器 --> Sol: 请检查我们所指向的服务器。
2.  端口配置为动态 --> Sol：如果我们连接到特定端口，我们应该设置端口 1433 和动态端口应该是 0。
3.  在创建新登录名（用户）时，我选择了选项“第一次登录后更改密码”--> Sol：如果我们尝试从其他服务（如 Openfire）进行连接，则在创建新登录名时不应选择此选项。

# gcc - 选择等效于 -O1 的 gcc 优化标志

> ID：12769173
> 
> 赞同：2
> 
> 时间：2012-10-07T13:17:08.790
> 
> 标签：gcc

我有一个小程序，在编译时性能要好得多，`-O1`而不是没有优化。我有兴趣知道编译器所做的优化导致了这种加速。

我想我会做的是获取`-O1`等效于（从手册页和来自`gcc -Q -v`）的优化标志列表，然后从列表中挑选以查看性能如何变化。

我发现即使包括整个优化列表仍然没有给我一个性能与 -O1 优化的程序一样好的程序。

换句话说

```
gcc -O0 -fcprop-registers -fdefer-pop -fforward-propagate -fguess-branch-probability \
    -fif-conversion -fif-conversion2 -finline -fipa-pure-const -fipa-reference \
    -fmerge-constants -fsplit-wide-types -ftoplevel-reorder -ftree-ccp -ftree-ch \
    -ftree-copy-prop -ftree-copyrename -ftree-dce -ftree-dominator-opts -ftree-dse \
    -ftree-fre -ftree-sink -ftree-sra -ftree-ter myprogram.c 
```

不一样

```
gcc -O1 myprogram.c 
```

我正在使用 gcc 版本 4.5.3

`-O1`手册中相关的优化标志列表中是否包含其他内容`-O1`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:28:24.240

使用 -S 选项检查生成的汇编程序怎么样？

从也使用“my_program.c”的两个实验看来，无论建议算法的长列表如何，-O0 选项都会禁用所有优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-12T12:48:38.947

这是预期的，而不是错误： [https ://gcc.gnu.org/wiki/FAQ#optimization-options](https://gcc.gnu.org/wiki/FAQ#optimization-options)

> -O1 是否还有其他未包含在手册中与 -O1 关联的优化标志列表中的内容？

是的，它开启了优化。指定单个`-fxxx`标志不会这样做。

如果您不使用 、 、 、 或优化选项之一`-O1`（`-O2`而`-O3`不是`-Ofast`）`-Og`，`-O0`则根本不会发生优化，因此调整*哪些*优化通道处于活动状态不会做任何事情。

要找出哪个优化通道产生影响，您可以打开`-O1`然后禁用单个优化通道，直到找到产生不同的优化通道。

即代替：

```
gcc -fxxx -fyyy -fzzz ... 
```

利用：

```
gcc -O1 -fno-xxx -fno-yyy -fno-zzz ... 
```

# c - 无法在 Windows 7 x64 上编译 C

> ID：12769176
> 
> 赞同：1
> 
> 时间：2012-10-07T13:17:26.297
> 
> 标签：c, windows, mingw, visual-studio-2012

我的电脑上安装了 Visual Studio 2012 Ultimate 和 mingw。但是，当我尝试编译任何程序时（我只尝试了一个简单的 hello world 程序），例如当我使用 Visual Studio cl 编译器或 gcc 编译器时，我得到了错误：

> cl 不是内部或外部命令、可运行程序或批处理文件。和 mingw-gcc 类似。

我在默认位置安装了 Visual Studio。我已经在 D:\MinGw 中安装了 mingw，但我已将其添加到路径变量中。此外，在对此感到沮丧之后，我已经安装了 CodeBlocks，当我从 CodeBlocks 内部尝试时，我的程序可以轻松构建和运行。我还可以通过单击构建和运行按钮从 Visual Studio 中编译我的程序。

在 Windows 7 中，我需要做什么才能从命令行编译和运行程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:24:19.030

不要运行“常规”命令提示符，而是运行“Visual Studio 命令提示符”。您可以在开始菜单中找到指向它的链接。

它本质上是相同的，但它为您设置了所有 VS 工具从命令行工作所需的所有环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:23:21.957

听起来你仍然有路径问题。例如，mingw-gcc 路径需要指向 bin 目录：

```
D:\MinGW\bin 
```

在你的情况下。然后你应该能够运行 gcc。

# bash - ./script 和 sh 脚本的区别

> ID：12769183
> 
> 赞同：2
> 
> 时间：2012-10-07T13:18:49.550
> 
> 标签：bash, shell, sh

有什么区别：

```
 sh myscript.sh 
```

和

```
./myscript.sh 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T13:49:56.007

`#!/bin/sh``sh`从该路径加载。如果在 Linux 上，那么它很可能是指向`bash`.

`sh tremor_script.sh`使用`PATH`环境变量 find `sh`，这可能完全不同。

跟踪`sh`您正在使用的，可能正在使用的`which sh`，并关注任何链接。请注意，Android 使用`ash`或`mksh`，具体取决于 Android 版本。

但是，诸如“行尾垃圾”之类的消息可能来自从 Windows 复制的文件，而没有将 \r\n 行尾更正为 \n。

# php - PHP：使用 mcrypt 在计数器模式下解密 AES

> ID：12769186
> 
> 赞同：0
> 
> 时间：2012-10-07T13:19:18.290
> 
> 标签：php, aes, mcrypt, rijndael

我有一个在计数器模式下用 AES 加密的字符串，它不是用 PHP 完成的，我不能用 mcrypt 来解码它:( 有一个按预期工作的类：[http://www.movable-type.co。 uk/scripts/aes.html](http://www.movable-type.co.uk/scripts/aes.html)（见页面底部），但速度很慢，所以我想用 mcrypt 解密。

根据类`decrypt`方法我做了以下：

```
 $key = $_POST['key'];

 $length = strlen($key);
 if($length > 32)
   $key = substr($key, 0, 32);

 $cyphered = base64_decode($_POST['cyphered']);
 /// make initialization vector with first 8 bytes treated as integers
 $f8b = array_map('ord', str_split(substr($cyphered, 0, 8)));
 array_unshift($f8b, 'I8');
 $iv = call_user_func_array('pack', $f8b);

 print mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, substr($cyphered, 8), 'ctr', $iv); 
```

结果是输出垃圾:(我不明白我做错了什么。有人可以说明一下这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:07:35.157

[phpseclib 的纯 PHP AES 实现](http://phpseclib.sourceforge.net/)几乎是可移动类型的 AES 实现的 4 倍：

[http://phpseclib.sourceforge.net/crypt/examples.html](http://phpseclib.sourceforge.net/crypt/examples.html)

那是 mcrypt 不可用的时候。当 mcrypt 可用时，它会使用它并且速度更快。

也就是说，如果你坚持使用 mcrypt……试试 MCRYPT_RIJNDAEL_128。MCRYPT_RIJNDAEL_256 的块大小为 256 位，适用于 Rijndael（Rijndael 的块大小可变）但不适用于 AES。

# window - Window Cmd Prompt - 移动带有特殊字符的文件

> ID：12769196
> 
> 赞同：0
> 
> 时间：2012-10-07T13:20:20.587
> 
> 标签：window, cmd, prompt

我得到了一个文件名的文件

```
[vvv]_PHØDE：GREAKER_-_01_[720p][10bit][z11].mkv 
```

如何在命令提示符下使用 move 命令移动文件以使其成为这种方式

```
move "*GREAKER*.mkv" "PHODE_GREAKER_-_01_[720p][10bit][z11].mkv" 
```

我希望在断路器之后将第二个 * 替换为 _- *01* [720p][10bit][z11]。

在 linux 中，我们可以使用像 (*.?) 这样的正则表达式模式，但是我如何在窗口中移动它。

带走这个`[vvv]_PHØDE：and make it as the string "PHODE"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:44:19.690

尝试这个：

```
setlocal EnableDelayedExpansion

for %%f in (*GREAKER*.mkv) do (
  set name=%%~f
  ren "%%~f" "PHODE_!name:~12!"
)

endlocal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:10:48.097

在 Windows 上，MOVE 主要用于将文件从一个文件夹移动到另一个文件夹。如果 MOVE 命令对单个文件进行操作，它只能重命名文件。如果您在源文件中使用通配符，那么您应该改用 REN（或 RENAME）。

但是，您还有另一个问题更大的问题。您的文件名中有`:`字符，这对 Windows 无效。这可能无法使用标准的 Windows 命令和实用程序来修复。也许以下超级用户链接之一可以提供帮助：

*   [如何使用文件名中的“：”批量重命名从 OSX 复制到 Windows 的文件？](https://superuser.com/q/49679/109090)
*   [如何强制 Windows XP 重命名具有特殊字符的文件？](https://superuser.com/q/31587/109090)
*   [文件名非法的文件](https://superuser.com/q/90227/109090)

# android - 数组适配器 setText

> ID：12769203
> 
> 赞同：2
> 
> 时间：2012-10-07T13:21:19.307
> 
> 标签：android, android-arrayadapter

我有一个扩展`ArrayAdapter<String>`为不同行显示不同图像的类，我不确定这是不是正确的方法。现在我的问题是：如何显示 ArrayList 中的项目，图像显示正常，但我无法设置文本。我在一个 TextView 中显示图标和文本。

```
class MyAdapter extends ArrayAdapter<String> {

Context context; 
int layoutResourceId;
ArrayList<String> list_text;

public MyAdapter(Context context, int layoutResourceId, ArrayList<String> list_text) {
    super(context, layoutResourceId, list_text);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.list_text = list_text;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    MyItemHolder holder = null;

    if(row == null) {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new MyItemHolder();
        holder.iconView = (TextView)row.findViewById(R.id.item);
        holder.textView = (TextView)row.findViewById(R.id.item);

        row.setTag(holder);
    }
    else {
        holder = (MyItemHolder)row.getTag();
    }

    int d = R.drawable.picture;
    ?ArrayList<String> text = list_text;

    holder.iconView.setCompoundDrawablesWithIntrinsicBounds(d, 0, 0, 0);
    ?holder.textView.setText(text);
    return row;
}

static class MyItemHolder {
    TextView iconView;
    TextView textView;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:25:18.477

```
String text = list_text.get(position);
holder.textView.setText(text); 
```

# ios - xcode中的辅助对象菜单？

> ID：12769205
> 
> 赞同：0
> 
> 时间：2012-10-07T13:21:27.973
> 
> 标签：ios, xcode

前几天我在玩 xcode 对象，我一定对用户界面对象做了一些事情，并且出现了一些其他对象。只要我记得有一些下拉菜单对象，一些其他滑块等。我如何获得该菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:51:51.890

您已设法打开 OSX 对象库而不是 iOS 对象库。请注意，这些对象不适用于您的 iOS 项目。如果你想探索它，你可以开始一个新的 OSX 项目。

如果您只想打开它（使用您当前的项目/工作区），请执行以下操作：

1.  关闭所有文件（多次使用 cmd-ctl-w）。
2.  重新启动 Xcode 并打开同一个项目。
3.  使用 cmd-alt-0 显示实用程序窗格。
4.  对象栏应该有整个对象集合（iOS 和 OSX）。

打开 iOS 的故事板/nib 文件后，对象库将重置为 iOS 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:26:36.387

您可以通过单击左下角的三角形来更精确地查看界面中的所有对象，这将展开扩展坞并向您显示 Xib/Nib 文件中的所有内容，包括所有菜单项。恢复丢失项目的唯一方法是再次手动添加它们，或者检查它们是否仍在备份中。

**编辑 1** 你是[这个](http://i.imgur.com/sLHIe.png)意思吗？

# android - android中存储长词义列表的首选数据库

> ID：12769206
> 
> 赞同：0
> 
> 时间：2012-10-07T13:21:32.567
> 
> 标签：android

我想在android中制作一个字典应用程序。存储词义列表的首选和有效数据库是什么？我是新手程序员，任何帮助都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:38:31.487

Android has [builtin SQLite support](http://developer.android.com/guide/topics/data/data-storage.html#db) that you can use in your application. I see that there is a [sample project](http://developer.android.com/tools/samples/index.html) called *Searchable Dictionary* that looks quite similar to what you are trying to achieve, so maybe you can use that as guide.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:33:23.173

因为它是一个移动环境，所以很小的东西似乎是一个更好的选择。

使用 sqlite3 或 xmlsimple java 库。

[http://simple.sourceforge.net/](http://simple.sourceforge.net/) http://www.sqlite.org/

# php - MYSQL Order 然后找出订单号

> ID：12769211
> 
> 赞同：0
> 
> 时间：2012-10-07T13:22:44.090
> 
> 标签：php, mysql

> **可能重复：**
> [MySQL 在 ORDER BY 中获取行位置](https://stackoverflow.com/questions/3614666/mysql-get-row-position-in-order-by)

我有一个用户表，我想按名为 Crown 的列对它们进行排序。然后我想找出它们在列表中的位置，但不完全确定如何去做。我试过用谷歌搜索它，但不完全确定要输入什么。（Crown 有 INT 输入。）

所以我有第一行：

```
mysql_query("SELECT * FROM users ORDER by crown DESC"); 
```

然后，在按皇冠订购时，我如何找出用户在列表中的位置？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:32:03.580

我会做这样的事情，假设你可以得到用户的皇冠价值。

```
SELECT `user_var_you_want`,
       (SELECT COUNT(*) FROM `users` WHERE `crown` > $user_crown_value)+1 AS `position`
FROM `users`
WHERE `user_var_you_want` = $search_value 
```

或者，如果您无法获得他们的皇冠价值：

```
SELECT `user_var_you_want`,
       (SELECT COUNT(*) FROM `users` WHERE `crown` > (SELECT `crown` from `users` WHERE `user_var_you_want` = $search_value)+1) AS `position`
FROM `users`
WHERE `user_var_you_want` = $search_value 
```

# mysql - cakephp2 从数据库中返回一条随机记录

> ID：12769218
> 
> 赞同：0
> 
> 时间：2012-10-07T13:24:28.713
> 
> 标签：mysql, random, controller, cakephp-2.2

我在查找返回随机记录时遇到问题。问题是，由于某种原因，条件不起作用。

D B：

```
quotes: 
        title (varchar255)
        content (varchar255)
        published (tinyint(1) NULL default = 0)

$random_quotes = $this->Quote->find('all',array('condition'=>array('Quote.published'=>1),'order'=>array('rand()'),'limit'=>1)); 
```

它返回 1 个引用，而不是什么已发布 = 0/1。它根本不使用查找中的条件。也尝试过先查找。仍然.. 0/1 发表并不重要。它返回一个记录，不管什么。

有谁知道为什么会这样？？

我现在在数据库中只有 2 个引号，并且都 = 已发布 = 0，但查找仍然返回结果。

感谢您对此的任何帮助！！！

-汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:23:38.940

条件选项应为条件（复数），否则无条件查询。

# javascript - 如何为不同版本的IE显示不同的页面

> ID：12769223
> 
> 赞同：-2
> 
> 时间：2012-10-07T13:25:05.730
> 
> 标签：javascript, jquery, html, internet-explorer, browser-detection

> **可能重复：**
> [javascript 中的浏览器检测？](https://stackoverflow.com/questions/2400935/browser-detection-in-javascript)

我想知道如何检测 IE 6、IE 7 和 IE8 并说其中是否有任何显示不同的页面而不是索引。

像 update.html 这样的东西就可以了。

我见过这些 IF IE6 之类的东西，但仅适用于 CSS，而不适用于索引页面。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:30:28.183

有很多资源描述了如何检测浏览器。[这是最明显的](http://www.w3schools.com/js/js_browser.asp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:31:14.243

在这个页面上有一个很好的脚本可以检测 IE 及其版本。

[更有效地检测 Windows Internet Explorer (MSDN)](http://msdn.microsoft.com/en-us/library/ms537509%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T13:32:54.207

试试这个 HTML 代码：

```
<html>
<body>
<!--[if IE]>
<script language="javascript">
document.location = "http://www.google.com/";
</script>
<![endif]-->
redirects to google if IE
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T13:34:47.077

You can detect Browser by jQuery as easy as:

```
jQuery.browser
jQuery.browser.version 
```

look [here](http://api.jquery.com/jQuery.browser/)

Then check the browser name or version as above, if TRUE then redirect the page to your favorite url:

```
window.location.replace("http://your/address/update.html"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-07T13:35:10.643

Try [$.browser](http://docs.jquery.com/Utilities/jQuery.browser) for easy browser detection.

# c - 明智地在区间内遍历数字

> ID：12769224
> 
> 赞同：0
> 
> 时间：2012-10-07T13:25:11.300
> 
> 标签：c, performance, algorithm, search, counting

我想明智地以大间隔扫描数字，直到找到我需要的数字。但是，我不知道这个数字可能在哪里，在搜索过程中我也不会有任何线索。

让我举一个例子，以便于陈述我的问题

假设我正在搜索 100000000000000 和 999999999999999 之间的数字

幼稚的方法将从 100000000000000 开始并计数到 99... 一个接一个。但这并不明智，因为如果我不走运，数字可能会在远端。

那么，解决这个问题的最佳方法是什么。我不是在寻找数学上最好的，我需要一种在 C 编程语言中易于实现的技术。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:04:25.660

你的问题没有解决办法，只有知识。如果您对数字一无所知，那么枚举它们的任何策略都同样好（或坏）。

如果您假设您正在与试图为您隐藏数字的对手作战，那么策略就是让您的下一步行动变得不可猜测。那将是随机选择范围内的数字并要求它们。（为避免重复，您必须使用数字的随机排列。）然后您会找到预期数字约为总数一半的数字，也就是说，您将从最坏的情况。但正如所说，所有这些都取决于您可以做出的假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T20:54:45.227

如您所知，没有提高搜索速度的策略。您所能做的就是通过使用多线程来加速搜索本身。因此，技术上最好的方法可能是尝试在[OpenCL](http://www.khronos.org/opencl/)中实现算法（它与 C 非常相似，可以通过 C 库使用）并并行运行数百个测试，具体取决于您的硬件 (GPU)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:32:57.017

使用二分搜索。首先看看你的数字是高于还是低于范围的中间。根据答案，分别对范围的上半部分或下半部分重复该过程。

# mysql - 如何优化我的 MySQL 查询？

> ID：12769229
> 
> 赞同：0
> 
> 时间：2012-10-07T13:25:58.767
> 
> 标签：mysql, optimization, query-optimization

我有两张表 Invoice( `Id`, `Status`, `VendorId`, `CustomerId`, `OrderDate`, `InvoiceFor`, )

发票项( `Id`, `Status`, `InvoiceId`, `ProductId`, `PackageQty`, `PackagePrice`, )

这里 invoice.id=invoiceItem.invoiceId (Foregin key) 和 Id 字段是主键 (big int) 这些表包含 100000(invoice) 和 450000(invoiceItem) 行

* * *

现在我必须编写一个查询，它将返回发票分类帐，其中发票 = 55 或 66 并且在某个日期范围内。我还必须返回最后一个拍摄日期，其中包含该特定客户之前拍摄的产品日期。

* * *

输出应为 OrderDate、InvoiceId、CustomerId、ProductId、LastTaken、PackageQty、PackagePrice

* * *

所以我写了以下查询

```
SELECT a.*, (
    SELECT MAX(ivv.orderdate)
    FROM invoice AS ivv , invoiceItem AS iiv 
    WHERE ivv.id=iiv.invoiceid
    AND iiv.ProductId=a.ProductId AND ivv.CustomerId=a.CustomerId AND ivv.orderDate<a.orderdate
) AS lastTaken FROM (
    SELECT iv.Id, iv.OrderDate, iv.CustomerId, iv.InvoiceFor, ii.ProductId,     
    ii.PackageQty, ii.PackagePrice
    FROM invoice AS iv, invoiceitem AS ii
    WHERE iv.id=ii.InvoiceId 
    AND iv.InvoiceFor IN (55,66)
    AND iv.Status=0 AND ii.Status=0 
    AND OrderDate BETWEEN '2011-01-01' AND '2011-12-31'
    ORDER BY iv.orderdate, iv.Id ASC 
) AS a 
```

**但我总是把时间赶出去。我将如何解决问题？？？**

该查询的解释如下： ![在此处输入图像描述](../Images/61916e0294d85bb639d46a728e3c8467.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T19:15:01.957

关于查询本身的两点：

1.  学习使用正确的 JOIN 语法。在`WHERE`从句中进行连接就像用莎士比亚英语写问题一样。
2.  子查询中的`ORDER BY`应该在最高级别之外。

然而，这些都不是扼杀性能。问题是`SELECT`子句中的子查询。我认为问题在于您在`SELECT`子句中的子查询没有直接加入这两个表。尝试包括`iiv.InvoiceId = ivv.InvoiceId`in，优选和`ON`子句。

如果这不起作用，请尝试索引策略。以下索引应提高该子查询的性能：

*   InvoiceItem(ProductId) 上的索引
*   发票上的索引 (CustomerId, OrderDate)

这应该允许 MySQL 从索引运行子查询，而不是全表扫描，这应该是一个很大的性能改进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:36:14.327

Create index on OrderDate and InvoiceFor attributes. It should be much faster.

# python - python中的奇怪选择错误

> ID：12769230
> 
> 赞同：3
> 
> 时间：2012-10-07T13:26:10.077
> 
> 标签：python, sockets, python-sockets

好的，所以我有 Python 2.5 和 Windows XP。我将 select.select 与套接字对象一起使用。我一次又一次地尝试它，但是每当我运行它时，它所在的线程都会给我一个错误，例如 select.error(9, "Bad file descriptor")。代码是这样的：

```
import socket, select
s = socket.socket()
s.bind((socket.gethostbyname(socket.gethostname()), 1312))
s.listen(5)
inputs = [s]
outputs = []
while True:
    r, w, e = select.select(inputs, outputs, inputs)
    for sock in r:
        if sock is s:
            inputs.append(s.accept()[0])
        else:
            print s
            print s.recv(1024) 
```

任何信息，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T13:35:03.097

1.  你打电话`select.select`没有任何论据。它应该是这样的：`select.select(inputs, outputs, [])`.

2.  在`else`你需要使用`sock`，而不是`s`（服务器）。

3.  一旦对等方与先前连接的套接字断开连接，您应该将其从`inputs`列表中删除。如果`sock.recv()`返回空字符串或引发`socket.error`异常，您可以知道对等方已断开连接。如果您不这样做，您最终可能会向 提供无效的套接字描述符`select.select`，从而导致您谈到的错误。

# java - ArrayLists 的对象，如何从对象中添加/删除它们？

> ID：12769234
> 
> 赞同：0
> 
> 时间：2012-10-07T13:26:30.230
> 
> 标签：java, object, arraylist

```
public class MapData {

    ArrayList<String> Redsp = new ArrayList<String>();
    ArrayList<String> Bluesp = new ArrayList<String>();
    ArrayList<String> Playersp = new ArrayList<String>();

    public MapData(ArrayList<String> redsp, ArrayList<String> bluesp, ArrayList<String> playersp) {
        Redsp = redsp;
        Bluesp = bluesp;
        Playersp = playersp;
    } 
} 
```

如何制作 MapData 的对象，并向对象添加/删除项目？我想在 和 中添加 6 个项目，在 中添加`bluesp`20`redsp`个项目`playersp`。

```
MapData TEST = new MapData(null,null,null);
TEST.?? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:32:18.587

我会为 MapData 创建更多方法

例如添加到 Bluesp

```
public void addToBlueSp(String string) {
    Bluesp.add(string);
} 
```

我也会使用 camelCase，因为这是 Java 中的标准操作。

我可能会建议在 ctor 中创建 ArrayLists，因为将它们传递给一个对象然后使用该对象从它们中添加/删除项目几乎没有什么意义。如果您有 ArrayList，则可以将它们添加到此对象之外。但这是一个设计问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:32:41.470

用途`add()`和`remove()`方法

**-**您可以选择创建**添加和删除** `methods`或将所有内容`ArrayList`设为**静态**

**例如：**

```
public void addToRedSp(String string) {

    Redsp.add(string);

} 

public void remToRedSp(String string) {

    Redsp.remove(string);

} 

MapData TEST = new MapData(null,null,null);

    // To add

    test.addToRedSp("Vivek");

    // To remove

    test.remToRedSp(0);   // or  MapData.Redsp.remove("Vivek"); 
```

**-** `ArrayList`作为**静态**

```
public static ArrayList<String> Redsp = new ArrayList<String>();
public static ArrayList<String> Bluesp = new ArrayList<String>();
public static ArrayList<String> Playersp = new ArrayList<String>();

MapData TEST = new MapData(null,null,null);

// To add

MapData.Redsp.add("Vivek");

// To remove

MapData.Redsp.remove(0);   // or  MapData.Redsp.remove("Vivek"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:33:33.127

最简单的方法是为三个集合提供 getter，然后以普通方式操作它们。此类操作将对成员字段生效：

```
public class MapData {

    ArrayList<String> Redsp = new ArrayList<String>();
    ArrayList<String> Bluesp = new ArrayList<String>();
    ArrayList<String> Playersp = new ArrayList<String>();

    public MapData(ArrayList<String> redsp, ArrayList<String> bluesp, ArrayList<String> playersp) {
        Redsp = redsp;
        Bluesp = bluesp;
        Playersp = playersp;
    }

    public ArrayList<String> getRedsp(); 
} 
```

然后你做：

```
MapData TEST = new MapData(null,null,null);
TEST.getRedsp().add("Text1");
TEST.getRedsp().add("Text2"); 
```

等等。

但是，请注意：您构造的不是空列表，而是 null，我的代码将触发 NPE。考虑将默认值设置为空列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T13:33:39.483

您可以为`List`s添加 getter 和 setter 方法`MapData`并添加新元素，如下所示：

```
TEST.getRedsp().add("hello"); 
```

和

```
public ArrayList<String> getRedsp()
{
    if(Redsp == null)
        Redsp = new ArrayList<String>();

    return Redsp;
} 
```

或者您可以为每个列表引入一个 add 方法`MapData`：

```
TEST.addToRedsp("hello"); 
```

和

```
public boolean addToRedsp(String value)
{
    if(Redsp == null)
        Redsp = new ArrayList<String>();

    return Redsp.add(value)
} 
```

对删除案例进行类似处理。

顺便说一句：看看[变量命名约定](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)。

# windows-7 - cython：mingw 的 memoryview 构建错误

> ID：12769236
> 
> 赞同：2
> 
> 时间：2012-10-07T13:26:54.797
> 
> 标签：windows-7, numpy, mingw, cython, memoryview

我一直在用 cython 编写一些 python 扩展模块。我编写的扩展构建并运行良好。然后，我想在访问我的 numpy 数组时使用类型化的 memoryviews，因为它们似乎有几个优点[http://docs.cython.org/src/userguide/memoryviews.html](http://docs.cython.org/src/userguide/memoryviews.html)

但是，一旦我在我的 cython 代码中使用 memoryview，我就会在构建扩展时遇到错误。例如，如果我添加此测试行：

cdef double[:, ::1] X = np.zeros((100, 100))

到现有的工作 cython 扩展。我会收到以下错误：

```
C:\MinGW\bin\gcc.exe -shared -s build\temp.win32-2.7\Release\image_box.o build\temp.win32-2.7\Release\image_box.def -Lc:\python27\libs -Lc:\python27\PCbuild -lp
ython27 -lmsvcr90 -o x:\ARframework\python\image_ops\image_box.pyd
build\temp.win32-2.7\Release\image_box.o:image_box.c:(.text+0xe23): undefined reference to `___sync_fetch_and_add_4'
build\temp.win32-2.7\Release\image_box.o:image_box.c:(.text+0x3318): undefined reference to `___sync_fetch_and_add_4'
build\temp.win32-2.7\Release\image_box.o:image_box.c:(.text+0x4c81): undefined reference to `___sync_fetch_and_sub_4'
build\temp.win32-2.7\Release\image_box.o:image_box.c:(.text+0x4d37): undefined reference to `___sync_fetch_and_sub_4'
build\temp.win32-2.7\Release\image_box.o:image_box.c:(.text+0x10767): undefined reference to `___sync_fetch_and_sub_4'
build\temp.win32-2.7\Release\image_box.o:image_box.c:(.text+0x10793): undefined reference to `___sync_fetch_and_sub_4'
collect2.exe: error: ld returned 1 exit status
error: command 'gcc' failed with exit status 1 
```

我已尝试将 -march=i486 添加到 gcc 行，如本文所述： [undefined reference to sync_fetch_and_add_4](https://stackoverflow.com/questions/7994614/undefined-reference-to-sync-fetch-and-add-4) 但这并没有解决问题。就此而言，我还尝试了 -march=i586 和 -march=pentium ，但均未成功。

知道这里发生了什么吗？

我的平台是Windows 7，mingw版本是4.70，Cython版本是0.17.1

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T01:33:10.357

我找到了解决方案。

实际上，gcc 标志 -march=i486 确实解决了问题！但是，当我在控制台中对其进行测试时，我只是将它应用到 gcc 行以进行链接步骤（这就是我得到错误的地方）并且由于它没有解决问题，我认为它只是不起作用。事实上，我需要在编译和链接步骤中都使用 -march=i486 ，然后就没有错误了。

至于在构建扩展时如何包含这些标志，我尝试添加

```
import os
os.environ['LDFLAGS'] = '-march=i486'
os.environ['CFLAGS'] = '-march=i486' 
```

到 setup.py 但它似乎没有用。

所以我修改了 c:\python27\Lib\distutils\cygwinccompiler.py 以在编译和链接步骤中包含这些标志。不确定这是否是设置这些标志的非常优雅的方式。欢迎任何替代品！

# c++ - C++注入问题

> ID：12769239
> 
> 赞同：0
> 
> 时间：2012-10-07T13:27:29.570
> 
> 标签：c++, visual-studio-2010, code-injection

我遇到了一些 C++ 注入困难。我正在使用 Win 7 x64，VS 2010

这是我尝试运行的完整代码：http: [//pastebin.com/avKS3r22](http://pastebin.com/avKS3r22)

我的问题：

1.  第 62 行。

    ```
    dwSize = (DWORD)iCodeEnd - (DWORD)iCode; //subtract the function from the limiter to obtain the function's size 
    ```

    如果 iCodeEnd 是 0x01151570 并且 iCode 是 0x01151490，为什么 dwSize 应该是 224 或 0xE0 时等于 4294966986（我认为这是 DWORD 的最大值）？是否需要为我的项目设置任何特定属性（我创建了一个没有 Unicode 的空 win32 项目）？

2.  第 92 行。

    ```
    if(!(hRemoteThread = CreateRemoteThread(hProcess, NULL, 0, HREAD_START_ROUTINE)lpAddr, prmAddr, 0, NULL))) 
    ```

如果我手动将 dwSize 设置为 224，我会收到“无法创建远程线程！”。我对 dwSize 的值有误吗？或者是别的什么？

请注意：这是我的第一个 C++ 应用程序（请提供更详细的答案）。代码不是我的，我只是重写它以学习基础知识。原始版本在我的平台下运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:07:54.043

1.  将 iCodeEnd 和 iCode 都设为静态会使编译器将函数一个接一个地放入内存中。这将 dwSize 修复为恰到好处。
2.  在 win7 中，从 \windows\system32 文件夹（例如记事本）注入进程失败，并出现“拒绝访问”错误（即使禁用了 UAC）。

# silverlight - 在不中断 Zune 音乐的情况下播放 MediaElement 声音

> ID：12769249
> 
> 赞同：0
> 
> 时间：2012-10-07T13:28:40.600
> 
> 标签：silverlight, windows-phone-7, audio, xna

我在我的 Windows Phone 应用程序中使用`MediaElement`. 当这些声音播放时，从其他应用程序（如 Zune）播放的背景音乐会暂停。有可能克服这一点吗？

我在某处读到它可以使用 XNA 来实现；但由于我在我的 Windows 8 机器上开发，我不能使用 XNA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:42:30.563

即使在 Windows 8 上进行开发，您也可以在 Windows Phone 应用程序中使用 XNA 库。据我所知，您可能应该使用 SoundEffect 和 SoundEffectInstance 来播放声音，唯一的问题是您需要将 wav 形式的声音作为项目的一部分，而不是 mp3 或存储在 MediaLibrary 中的文件。
[SoundEffect 和 SoundEffectInstance 类之间的区别](https://stackoverflow.com/questions/5499093/difference-between-soundeffect-and-soundeffectinstance-classes)

# javascript - 在 node.js 应用程序中根据 Mongo ID 查询 MongoDB

> ID：12769252
> 
> 赞同：16
> 
> 时间：2012-10-07T13:28:57.693
> 
> 标签：javascript, node.js, mongodb, express, mongodb-query

我正在使用 node.js 和 mongodb，我正在尝试使用以下命令根据 mongo 生成的 ID 查询数据库：

```
 collection.findOne( {_id:doc._id} , function(err, item) {}); 
```

我 100% 确定我的 doc._id 与我在集合中寻找的 doc _id 完全匹配，但我从 db 查询中得到了一个空响应。

我已经尝试使用文档中的其他键进行此操作，它可以很好地返回文档。只有当我尝试使用 mongo ID 时。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-07T14:09:30.183

MongoDb 是一个对象而不是字符串。要转换我使用的字符串：

```
 var id = require('mongodb').ObjectID(doc._id); 
```

这会将我的字符串转换为 mongo ObjectId 并匹配数据库中的 _id！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-04-07T09:27:40.743

以下是发现问题的示例：

```
var mongo = require('mongodb'),
    Server = mongo.Server,
    Db = mongo.Db,
    ObjectID = require('mongodb').ObjectID;
var MongoClient = require('mongodb').MongoClient

//let id = your _id, smth like '6dg27sh2sdhsdhs72hsdfs2sfs'...
var obj_id = new ObjectID('52cbd028e9f43a090ca0c1af');
var justId = '52cbd028e9f43a090ca0c1af'; // <== This will not work

MongoClient.connect('mongodb://127.0.0.1:27017/YourDbName', function(err, db) {
    console.log('err'  +  err);
    db.collection('YourCollectionName', function(error, collection) {
        //collection.find({_id:justId}),function(err, docs) { // <== This will not work
        collection.findOne({_id:obj_id},function(err, docs) {
          console.log("Printing docs from Array. count " + JSON.stringify(docs)); 
        });
  });
}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-09-18T04:38:41.450

用这个：

```
ObjectId = require('mongodb').ObjectID; 
```

然后，当您尝试通过 _id 在集合中查找对象时，请使用以下命令：

```
 console.log("find by: "+ id);
 database.collection("userRegister").findOne({_id: new ObjectId(id)}, 
   function(err, res) { 

     if (err) console.log(err);

     if(res!=null){
       console.log(res)
       return false;
     }

     if(res==null){
       callback({'status':_error,'flag':'notexist','message':_userNotExist});
       return false;
     }

   }); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-25T12:35:31.367

首先，我们需要`ObjectID`从`mongodb`库中获取并需要按照以下方式创建新实例，这样您将获得字符串的 ObjectID。如果您在代码中使用**es6** ，则此代码

```
import { ObjectID } from 'mongodb';

var emQuery = [
          {
            $match: {
              _id: new ObjectID(tlvaltResult[0].customers.createdBy)
            }
          },
          {
            $project: {
              _id:1,
              emailId:1,
              mobile:1
            }
          }
        ];

console.log(emQuery,'emQuery');

[ { '$match': { _id: 5ad83ff0b443435298741d3b } },
  { '$project': { _id: 1, emailId: 1, mobile: 1 } } ] 

var emResult = await User.getAggregation(emQuery);

console.log(emResult,'emResult');

[ { _id: 5ad83ff0b443435298741d3b,
    emailId: 'superAdmin@limitlessmobile.com' } ] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-07T16:02:46.403

首先，确保您已在 MongoDB 配置中添加了所有必需的模块：

```
var mongo = require('mongodb'),
    Server = mongo.Server,
    Db = mongo.Db,
    ObjectID = require('mongodb').ObjectID;
var BSON = require('mongodb').BSONPure;
var server = new Server('localhost', 27017, {
    auto_reconnect: true
});
var db = new Db('YOUR_DB_NAME', server); 
```

然后，当您尝试通过 _id 在集合中查找对象时，请使用：

```
//let id = your _id, smth like '6dg27sh2sdhsdhs72hsdfs2sfs'...
var obj_id = BSON.ObjectID.createFromHexString(id);
db.collection("NAME_OF_COLLECTION_WHERE_IS_YOUR_OBJECT", function(error, collection) {
    collection.findOne( {_id:obj_id} , function(err, item) {
        // console.log ( item.username );
    });
}); 
```

希望，这行得通。

# jquery - 从 jQuery 对话框中检索变量？

> ID：12769253
> 
> 赞同：1
> 
> 时间：2012-10-07T13:29:00.193
> 
> 标签：jquery, asp.net-mvc-3, modal-dialog

我想将一个页面加载到 jQuery Dialog 插件中（通过使用该代码[jQuery: Load Modal Dialog Contents via Ajax](https://stackoverflow.com/questions/3837166/jquery-load-modal-dialog-contents-via-ajax)）在该页面中，用户将选择一些数据。选择后，当他关闭对话框窗口时，我需要从该对话框窗口中检索用户选择的数据。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T15:14:32.987

您要做的第一件事是在对话框关闭时保存这些值。假设这是您正在加载的页面：

```
<input type="text" id="text1" name="text1" /><br />
<input type="text" id="text2" name="text2" /><br />
<a href="#" id="dialog_submit_button">Click</a> 
```

然后，当您加载对话框时，您应该添加以下内容：

```
jQuery('#dialog').dialog({
    // all you other stuff
    close: function(){
        var in1 = $('#text1').val();
        var in2 = $('#text2').val();
        jQuery.dialog_info = {
            input1 : in1,
            input2 : in2
        }
    }
}); 
```

现在，您可以随时在其余代码中提取这些文本值

```
var value1 = jQuery.dialog_info.input1;
var value2 = jQuery.dialog_info.input2; 
```

希望有帮助

# java - 使用 JSON 循环

> ID：12769255
> 
> 赞同：0
> 
> 时间：2012-10-07T13:29:07.157
> 
> 标签：java, json

下午好，

我有一个 servlet，我想在其中转换 Json 列表。

我使用以下代码

```
List<Reunion> lista_reuniones = facadeReunion.getServidoresTareas();

        JSONArray mJSONArray = JSONArray.fromObject(lista_reuniones); 
```

在 lista_reunion 我存储 Reunion 类型的对象

当我运行代码时出现以下错误：

> 严重：Servlet.service() para servlet reunionServlet lanzó excepción net.sf.json.JSONException: 层次结构中有一个循环！在 net.sf.json.util.CycleDetectionStrategy$StrictCycleDetectionStrategy.handleRepeatedReferenceAsObject(CycleDetectionStrategy.java:97) 在 net.sf.json.JSONObject._fromBean(JSONObject.java:857) 在 net.sf.json.JSONObject.fromObject(JSONObject .java:192) 在 net.sf.json.JSONObject._processValue(JSONObject.java:2774) 在 net.sf.json.JSONObject._setInternal(JSONObject.java:2798) 在 net.sf.json.JSONObject.setValue( JSONObject.java:1507) 在 net.sf.json.JSONObject._fromBean(JSONObject.java:940) 在 net.sf.json.JSONObject.fromObject(JSONObject.java:192) 在 net.sf.json.JSONArray._processValue (JSONArray.java:2557) 在 net.sf.json.JSONArray.processValue(JSONArray.java:

你知道问题出在哪里吗？如果有帮助的话，数据库的示意图如下：

![在此处输入图像描述](../Images/64478b683e624498c075e2b1f2818dfd.png)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T13:44:13.860

组织与团聚是一对多的关系。如果是双向关系，则可以形成循环引用，从而导致此类异常。

使用 Jackson 序列化我的 bean 时，我遇到了同样类型的问题。因为我当时在我的项目中使用 Hibernate。

您可以通过使用 Jackson 进行序列化并使用 @JsonManagedReference 和 @JsonBackReference 注释来避免此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-26T19:20:04.750

就我而言，出现问题是因为我的实体中的某些属性是 Lazy (JPA)。

为了解决这个问题，我在这个指令中包含了一个 jsonConfig：

```
JsonConfig jsonConfig = new JsonConfig();
jsonConfig.setExcludes(new String[]{"files", "createdBy", "lastUpdatedBy"});
jsonConfig.setIgnoreDefaultExcludes(false);
jsonConfig.setCycleDetectionStrategy(CycleDetectionStrategy.LENIENT);

JSONObject jsonObject = JSONObject.fromObject(obj, config); 
```

这对我很有效。;-)

# mysql - MySQL "date_sub(now(), INTERVAL X" Error Code: 1366 Incorrect string value: '\xEF\x80\xA6Top...' for column 's' at row 3

> ID：12769256
> 
> 赞同：0
> 
> 时间：2012-10-07T13:29:16.693
> 
> 标签：mysql, date

我有一个问题，这真的让我很困惑。我有一个 MySQL 查询，它工作正常.. 在大多数情况下。在查询中，我从表中查看日期和日期范围，并返回从今天起 X 天前的结果。它看起来像这样：

```
 WHERE tickets.date_created > date_sub(now(), INTERVAL 30 DAY) 
```

在大多数情况下，查询工作正常。但是，如果我将间隔更改为 80 到 97 之间的数字，我的脚本将无法执行。我得到的错误是：

```
 Error Code: 1366 Incorrect string value: '\xEF\x80\xA6Top...' for column 's' at row 3 
```

此外，尝试 3 个月，而不是 90 天是行不通的。100 中似乎还有其他数字也不起作用，但是，如果我设置类似 10000 天的值，所有结果都可以返回。

这是我数据库中的东西吗？是我的查询吗？有没有人看到这个日期间隔？我究竟做错了什么？

任何人有任何想法:)

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:51:38.093

我找到了答案！

我们的 MySQL 中内置了一个函数，可以从返回的结果中去除 HTML 和其他字符。虽然它没有在我的选择语句中对日期区域（或不应该）执行任何操作：

```
 mycleanup (left(tickets_messages.message, 250)) 
```

看来，如果我将其更改为简单

```
 left(tickets_messages.message, 250) 
```

然后我的查询有效！很奇怪，但我想我必须找到另一种方法来解决剥离 HTML 等问题。

# javascript - Javascript 和 VS2012 智能感知

> ID：12769258
> 
> 赞同：0
> 
> 时间：2012-10-07T13:29:27.640
> 
> 标签：javascript, webforms, visual-studio-2012, intellisense

我是 Visual Studio 2012 和 JavaScript 编码的新手。我有两个问题在网上找不到答案：

1.  我有一个 webforms 项目并将一些 js 文件添加到 sript 文件夹（http://raphaeljs.com/）。现在我想为我添加的那个 js 库提供 Intellisense 支持。那可能吗？

2.  脚本文件夹中的“_references.js”文件是什么？我将所有 js-library 文件添加到该文件中，但它没有启用智能感知。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:16:52.273

我不确定 Visual Studio 2012，但在 2010 年，如果您将一个 JavaScript 文件拖到另一个文件上，它将`/// <reference name="MyScript.js" />`在第二个文件的顶部添加一行。如果所引用的文件已记录在案，您将获得非常有用的智能感知，尽管它仍然很方便，即使不仅仅是能够探索 API 的表面。

这个问题中有一些很好的信息：[IntelliSense for Ajax and JavaScript library in Visual Studio](https://stackoverflow.com/questions/282129/intellisense-for-ajax-and-javascript-libraries-in-visual-studio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:46:34.107

简而言之，Visual Studio 在 javascript 的智能感知方面很糟糕。它仍然落后于 IntelliJ 和 WebStorm 等其他 IDE 光年。

解决方法是使用 ReSharper，它是一个插件，但您需要支付许可证费用 :(

希望有帮助。

# jquery - 如何在 Chrome 24 和 jQuery 1.8.2 中解析命名空间 XML？

> ID：12769262
> 
> 赞同：2
> 
> 时间：2012-10-07T13:29:38.513
> 
> 标签：jquery, xml, parsing, google-chrome

我正在尝试解析以下 XML：

```
<catalog>
   <ns:book>
       <author>Author</author>
   </ns:book>
</catalog> 
```

我进行了广泛的研究，发现了以下（过去的）解决方案，但目前它们都不能在带有 jQ​​uery 1.8 的 Chrome 24 中使用

```
 $(xml).find("ns\\:book").each(function()
  {
    $("#output").append($(this).find("author").text() + "<br />");
  }); 
```

也不

```
 $(xml).find("book").each(function()
  {
    $("#output").append($(this).find("author").text() + "<br />");
  }); 
```

也不

```
 $(xml).find("[nodeName=ns:book]").each(function()
  {
    $("#output").append($(this).find("author").text() + "<br />");
  }); 
```

在我的研究中，这似乎主要是 chrome 问题，而不是 jQuery 问题。有公认的解决方案吗？是否有更好的 js 库用于 XML 解析？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:54:19.180

我今天刚遇到同样的问题。使用 jQuery 1.8.3 和 Chrome 23，我注意到 2 种情况：

```
//Data is a string representing XML
var data = "<catalog><ns:book><author>Author</author></ns:book></catalog>"; 
```

情况1

```
//Case 1
var xml = $.parseXML(data); 
//xml is a XmlDocument
$(xml).find("book");
//$(xml) is a Document
//works directly, can't seem to be able to use namespace. 
```

案例 2。

```
var xml = $(data);
//xml is an Object
$(xml).find('ns\\:book')
//works just fine 
```

# android - 应用小部件中的 setShadowLayer？

> ID：12769263
> 
> 赞同：1
> 
> 时间：2012-10-07T13:29:50.353
> 
> 标签：android, textview

是否可以以编程方式执行此操作，以便用户可以在应用程序小部件 TextView 中选择是否包含阴影？

我只知道你可以设置一个 int 但 setShadowLayer 方法需要几个参数....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:27:44.857

您是对的，无法通过小部件使用的 RemoveViews 类调用 setShadowLayer() 。但是，在您的情况下，一种解决方案是为您希望能够设置阴影的每个 TextView 定义 2 个 TextView。一个 TextView 将有阴影，而另一个则没有。然后在小部件初始化期间，根据您的用户偏好隐藏相应的 TextView。

# c# - 从 WPF DataGrid 复制粘贴数据时，OpenClipboard 失败

> ID：12769264
> 
> 赞同：85
> 
> 时间：2012-10-07T13:29:51.303
> 
> 标签：c#, wpf, datagrid, clipboard, copy-paste

我有一个使用数据网格的 WPF 应用程序。该应用程序运行良好，直到我安装了 Visual Studio 2012 和 Blend+SketchFlow 预览版。现在，当我尝试使用`Ctrl`+ `C`（在任何应用程序中）将数据从网格复制到剪贴板时，我得到以下异常：

```
System.Runtime.InteropServices.COMException (0x800401D0): OpenClipboard Failed (Exception from HRESULT: 0x800401D0 (CLIPBRD_E_CANT_OPEN))
   at System.Runtime.InteropServices.Marshal.ThrowExceptionForHRInternal(Int32 errorCode, IntPtr errorInfo)
   at System.Runtime.InteropServices.Marshal.ThrowExceptionForHR(Int32 errorCode, IntPtr errorInfo)
   at System.Windows.Clipboard.Flush()
   at System.Windows.Clipboard.CriticalSetDataObject(Object data, Boolean copy)
   at System.Windows.Controls.DataGrid.OnExecutedCopy(ExecutedRoutedEventArgs args)
   at System.Windows.Controls.DataGrid.OnExecutedCopy(Object target, ExecutedRoutedEventArgs args)
   at System.Windows.Input.CommandBinding.OnExecuted(Object sender, ExecutedRoutedEventArgs e)
   at System.Windows.Input.CommandManager.ExecuteCommandBinding(Object sender, ExecutedRoutedEventArgs e, CommandBinding commandBinding)
   at System.Windows.Input.CommandManager.FindCommandBinding(CommandBindingCollection commandBindings, Object sender, RoutedEventArgs e, ICommand command, Boolean execute)
   at System.Windows.Input.CommandManager.FindCommandBinding(Object sender, RoutedEventArgs e, ICommand command, Boolean execute)
   at System.Windows.Input.CommandManager.OnExecuted(Object sender, ExecutedRoutedEventArgs e)
   at System.Windows.UIElement.OnExecutedThunk(Object sender, ExecutedRoutedEventArgs e)
   at System.Windows.Input.ExecutedRoutedEventArgs.InvokeEventHandler(Delegate genericHandler, Object target)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
   at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
   at System.Windows.Input.RoutedCommand.ExecuteImpl(Object parameter, IInputElement target, Boolean userInitiated)
   at System.Windows.Input.RoutedCommand.ExecuteCore(Object parameter, IInputElement target, Boolean userInitiated)
   at System.Windows.Input.CommandManager.TranslateInput(IInputElement targetElement, InputEventArgs inputEventArgs)
   at System.Windows.UIElement.OnKeyDownThunk(Object sender, KeyEventArgs e)
   at System.Windows.Input.KeyEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
   at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
   at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
   at System.Windows.Input.InputManager.ProcessStagingArea()
   at System.Windows.Input.InputManager.ProcessInput(InputEventArgs input)
   at System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
   at System.Windows.Interop.HwndKeyboardInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawKeyboardActions actions, Int32 scanCode, Boolean isExtendedKey, Boolean isSystemKey, Int32 virtualKey)
   at System.Windows.Interop.HwndKeyboardInputProvider.ProcessKeyAction(MSG& msg, Boolean& handled)
   at System.Windows.Interop.HwndSource.CriticalTranslateAccelerator(MSG& msg, ModifierKeys modifiers)
   at System.Windows.Interop.HwndSource.OnPreprocessMessage(Object param)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.LegacyInvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at System.Windows.Threading.Dispatcher.Invoke(DispatcherPriority priority, Delegate method, Object arg)
   at System.Windows.Interop.HwndSource.OnPreprocessMessageThunk(MSG& msg, Boolean& handled)
   at System.Windows.Interop.HwndSource.WeakEventPreprocessMessage.OnPreprocessMessage(MSG& msg, Boolean& handled)
   at System.Windows.Interop.ComponentDispatcherThread.RaiseThreadMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.Run()
   at System.Windows.Application.RunDispatcher(Object ignore)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run(Window window)
   at System.Windows.Application.Run() 
```

这真的很烦人。

我在[这里](https://stackoverflow.com/questions/10855940/wpf-datagrid-comexception-on-using-includeheader-clipboardcopymode)和网络上的不同位置看到了一些关于这个问题的参考，但没有真正的解决方案。

我可以验证在 Visual Studio 中引发此异常时剪贴板是否已锁定，因为我无法复制粘贴消息（必须将其写入文件）。此外，在复制过程开始之前，剪贴板没有被锁定。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-07-16T13:57:18.887

我们正在使用 .NET 4.0。我们遇到了同样的问题，但是在注销系统后，代码过去可以正常工作一段时间。

最后我们找到了替代方案。

如果要将字符串复制到剪贴板，

```
string data = "Copy This" 
```

到目前为止，我一直在使用以下方法

```
Clipboard.SetText(data); 
```

它一次又一次地失败了。*[然后我查看了可用于在剪贴板类](http://msdn.microsoft.com/en-IN/library/system.windows.clipboard.aspx)*中的剪贴板中设置文本的其他方法，并尝试了以下方法：

```
Clipboard.SetDataObject(data); 
```

它奏效了:)。我再也没有遇到过这个问题。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2012-11-23T04:39:58.927

这是 WPF 剪贴板处理程序中的一个错误。您需要在 Application.DispatcherUnhandledException 事件中处理未处理的异常。

将此属性添加到`Application`App.xaml 中的元素

```
DispatcherUnhandledException="Application_DispatcherUnhandledException" 
```

将此代码添加到您的 App.xaml.cs 文件

```
void Application_DispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e)
{
    var comException = e.Exception as System.Runtime.InteropServices.COMException;

    if (comException != null && comException.ErrorCode == -2147221040)
         e.Handled = true;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-23T14:40:37.930

我也一直在应用程序中遇到问题，我在用户细读 ListBox 时将信息复制到剪贴板。复制的信息与所选项目相关，并且允许他们将其（所述信息）粘贴到其他应用程序中以方便使用。有时我会在某些用户的系统上获得 CLIPBRD_E_CANT_OPEN，但在其他系统上却没有。

虽然我仍然无法*修复*争用，但我能够创建一些代码来查找导致争用的应用程序。我想至少分享这段代码，希望它对某人有所帮助。我将添加我创建的**using**语句、属性和方法来查找罪魁祸首的*Process*对象。从*进程*项中，您可以获得进程的名称、PID、主窗口标题（如果有的话）和其他可能有用的数据。这是我添加的代码行，没有调用它的代码。（**注意：**在代码片段下面我还有一个花絮要分享）：

```
using System.Diagnostics;               // For Process class
using System.Runtime.InteropServices;   // For DllImport's 
```

...

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
static extern IntPtr GetOpenClipboardWindow();

[DllImport("user32.dll", SetLastError = true)]
static extern uint GetWindowThreadProcessId(IntPtr hWnd, out uint lpdwProcessId); 
```

...

```
 ///-----------------------------------------------------------------------------
    /// <summary>
    /// Gets the Process that's holding the clipboard
    /// </summary>
    /// <returns>A Process object holding the clipboard, or null</returns>
    ///-----------------------------------------------------------------------------
    public Process ProcessHoldingClipboard()
    {
        Process theProc = null;

        IntPtr hwnd = GetOpenClipboardWindow();

        if (hwnd != IntPtr.Zero)
        {
            uint processId;
            uint threadId = GetWindowThreadProcessId(hwnd, out processId);

            Process[] procs = Process.GetProcesses();
            foreach (Process proc in procs)
            {
                IntPtr handle = proc.MainWindowHandle;

                if (handle == hwnd)
                {
                    theProc = proc;
                }
                else if (processId == proc.Id)
                {
                    theProc = proc;
                }
            }
        }

        return theProc;
    } 
```

**其他注意事项：** 我更改的另一件事简化了我的代码，是从使用*System.Windows.Clipboard*转换为*System.Windows.Forms.Clipboard*（请参阅[System.Windows.Forms.Clipboard 类](http://msdn.microsoft.com/en-us/library/ms158293%28v=vs.110%29.aspx)），因为后者有 4-参数*SetDataObject()*方法，其中包括重试计数和以毫秒为单位的重试延迟。这至少从我的代码中消除了一些重试*噪音。*

您的里程可能会有所不同......另外可能会有副作用，我还没有偶然发现，所以如果有人知道它们，请发表评论。无论如何，我希望这对某人有用。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-11-12T01:22:49.530

自从我安装了**TeraCopy**（Windows 7、64 位）以来，我在 WPF 4.0 和 4.5 中也遇到了这个问题。每个 Clipboard.SetText() 都因 System.Runtime.InteropServices.COMException 而失败。

我的第一个解决方案是卸载 TeraCopy - 它有效，但我喜欢这个应用程序，所以我不得不寻找另一个解决方案来解决这个问题。解决方案是更换

```
Clipboard.SetText("my string"); 
```

和

```
Clipboard.SetDataObject("my string"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-05T06:31:39.560

我对 RichTextBox 有同样的问题。以下代码随机崩溃：

```
TextRange tr = new TextRange(rich.Document.ContentStart, rich.Document.ContentEnd);
System.Windows.Clipboard.SetDataObject(tr.Text); 
```

似乎首选使用**System.Windows.Controls.RichTextBox.Copy**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-04T11:47:47.283

我在使用 .NET 4.6.1 从剪贴板检索 XAML 数据时遇到问题。

错误信息：

> OpenClipboard 失败（HRESULT 异常：0x800401D0 (CLIPBRD_E_CANT_OPEN)）

我解决了如下：

```
int counter = 0;
object xamlClipData = null;

while (xamlClipData == null)
{
    try
    {
        if (counter > 10)
        {
            System.Windows.MessageBox.Show("No access to clipboard xaml data.");
            break;
        }

        counter++;

        if (System.Windows.Clipboard.GetDataObject().GetDataPresent(DataFormats.Xaml))
        {
            xamlClipData = System.Windows.Clipboard.GetData(DataFormats.Xaml);
        }
    }
    catch { }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-08-01T14:53:49.793

我终于找到了使用 DataGrid 实现的默认复制模式的解决方案。

以前的答案对我不起作用：

*   使用 Clipboard.SetDataObject(data); 而不是 Clipboard.SetText(data) --> 这个解决方案不是我所期望的，我不想自己实现复制功能。
*   处理 DispatcherUnhandledException ：我不知道为什么，但它对我不起作用。未调用附加到此事件的方法。

我终于找到了解决这个问题的新方法。您只需要在按“Ctrl + C”之前清除剪贴板。

所以，我在 MainWindows.xaml 文件资源中创建了一个新样式：

```
<Window.Resources>
    <Style TargetType="DataGrid">
        <EventSetter Event="PreviewKeyDown" Handler="DataGrid_PreviewKeyDown"/>
    </Style>
</Window.Resources> 
```

此样式用于处理我的应用程序的所有数据网格中的“previewKeyDown”。调用的方法如下：

```
private void DataGrid_PreviewKeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.C && (Keyboard.Modifiers & ModifierKeys.Control) == ModifierKeys.Control)
    {
        System.Windows.Forms.Clipboard.Clear();
    }
} 
```

之后，问题就解决了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-12T05:20:06.150

在将 Excel 单元格复制到剪贴板并从剪贴板获取数据作为 HTML 字符串时，我遇到了同样的问题。

您可以在下面的代码中使用 (while-try-catch)。

```
Excel.Application exap = new Microsoft.Office.Interop.Excel.Application();
Excel.Workbook wb = exap.Workbooks.Open(
                      sourceFileNameTextBox.Text,
                      Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                      Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                      Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                      Type.Missing, Type.Missing);
Excel.Sheets sh = wb.Worksheets;

bool clip = false;

// Copy Excel cells to clipboard
while (!clip)
{
    try
    {
        ws.Cells.get_Range(cells[0], cells[1]).Copy(Type.Missing);
        clip = true;
    }
    catch
    {
        clip = false;
    }
}

string b = "";

// Get Excel cells data from the clipboard as HTML

clip = false;
while(!clip)
{
    try
    {
        b = Clipboard.GetData(DataFormats.Html) as string;
        clip = true;
    }
    catch
    {
        clip = false;
    }
} 
```

`while`此外，如果循环超过 10 次或更多，您可以有一个计数器，发生异常。我测试它的最大计数器是一次性循环剪贴板工作。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-09-17T12:44:46.950

代码 app.xaml

```
<Application.Resources>
        <Style TargetType="DataGrid">
            <EventSetter Event="PreviewKeyDown" Handler="DataGrid_PreviewKeyDown"/>
        </Style>
    </Application.Resources> 
```

## 代码文件 app.xaml.cs

```
using System;
using System.Collections.Generic;
using System.Configuration;
using System.Data;
using System.Linq;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Input;

namespace WpfApp1
{
    /// <summary>
    /// Interaction logic for App.xaml
    /// </summary>
    public partial class App : Application
    {
        private void DataGrid_PreviewKeyDown(object sender, KeyEventArgs e)
        {
            if (e.Key == Key.C && (Keyboard.Modifiers & ModifierKeys.Control) == ModifierKeys.Control)
            {
                System.Windows.Forms.Clipboard.Clear();
            }
        }
    }
} 
```

我已经处理了这段代码。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-09-16T14:44:34.080

有一个用于这个确切目的的 DataGrid 事件/方法签名`CopyingRowClipboardContent`( `object sender`, `DataGridRowClipboardEventArgs`e) 并且比`Clipboard.SetDataObject(data)`or更可靠`Clipboard.SetText(data)`。

以下是如何使用它。

在名为 myDataGrid 的 dataGrid 的 SelectionUnit 模式下设置“FullRow”

```
<DataGrid x:Name="myDataGrid" SelectionUnit="FullRow"></DataGrid> 
```

我们有一个方法，`myDataGrid_CopyingRowClipboardContent`该方法会为 dataGrid 中的**每一**行调用，以将其内容复制到剪贴板。例如，对于一个有七行的数据网格，这被调用了七次。

```
public int clipboardcalledcnt { get; set; } // CopyingRowClipboardContent invoked count
private void myDataGrid_CopyingRowClipboardContent(object sender, DataGridRowClipboardEventArgs e)
{
    PathInfo cellpath = new PathInfo(); // A custom class to hold path information
    string path = string.Empty;

    DataGrid dgdataPaths = (DataGrid)sender;
    int rowcnt = dgdataPaths.SelectedItems.Count;

    cellpath = (PathInfo)e.Item;

    path = "Row #" + clipboardcalledcnt + " Len=" + cellpath.Length.ToString() + ", path=" + cellpath.Path;

    e.ClipboardRowContent.Clear();

    if (clipboardcalledcnt == 0) // Add header to clipboard paste
        e.ClipboardRowContent.Add(new DataGridClipboardCellContent("", null, "--- Clipboard Paste ---\t\t\n")); // \t cell divider, repeat (number of cells - 1)

    clipboardcalledcnt++;
    e.ClipboardRowContent.Add(new DataGridClipboardCellContent(path, null, path));

    if (clipboardcalledcnt == rowcnt)
        clipboardcalledcnt = 0;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-29T17:06:02.040

我为 WPF Datagrid Export to Excel(CSV) 编写了一个扩展方法：

如果“MyDatagrid”是您的数据网格的名称，请使用一行代码调用自己的用户控件。

```
MyDatagrid.ExportToExcel(this); 
```

并将此方法添加到您的扩展静态类

```
#region DataGrid Extentions

public static void ExportToExcel(this DataGrid dg, UserControl owner, string filename = "")
{
    try
    {
        dg.SelectionMode = DataGridSelectionMode.Extended;
        dg.SelectAllCells();

        Clipboard.Clear();
        ApplicationCommands.Copy.Execute(null, dg);

        var saveFileDialog = new SaveFileDialog
        {
            FileName = filename != "" ? filename : "gpmfca-exportedDocument",
            DefaultExt = ".csv", 
            Filter = "Common Seprated Documents (.csv)|*.csv"
        };

        if (saveFileDialog.ShowDialog() == true)
        {
            var clip2 = Clipboard.GetText();
            File.WriteAllText(saveFileDialog.FileName, clip2.Replace('\t', ','), Encoding.UTF8);
            Process.Start(saveFileDialog.FileName);
        }    

        dg.UnselectAllCells();
        dg.SelectionMode = DataGridSelectionMode.Single;
    }
    catch (Exception ex)
    {
        owner.ShowMessageBox(ex.Message);
        Clipboard.Clear();
    }
}
#endregion 
```

最后别忘了

```
using Microsoft.Win32; 
```

在扩展类和设置

```
ClipboardCopyMode="IncludeHeader" 
```

为您的数据网格。

# c# - 在派生类中，编译器无法识别父类的变量，除非该变量在 cinstructor 中

> ID：12769268
> 
> 赞同：-3
> 
> 时间：2012-10-07T13:30:18.180
> 
> 标签：c#

我有以下内容。

只有当变量在构造函数中时，编译器才会识别派生类中的变量 flyBehaviour。这是为什么？

```
abstract class Duck
{
    protected IFlyBehaviour flyBehaviour;

    public IFlyBehaviour FlyBehaviour
    {
        get
        {return flyBehaviour;}
        set
        {flyBehaviour=value;}
    }

}

class MullardDuck: Duck
{
    flyBehaviour  //the compiler doesn't recognize this variable here
    public MullardDuck()
    {
        flyBehaviour = new FlyWithWings(); //here the compiler recognize this variable
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:42:03.437

这只是一个语法错误，而不是由于继承。

你也不能这样写：

```
abstract class Duck
{
    protected IFlyBehaviour flyBehaviour;
    flyBehaviour = ... ; // This wouldn't compile.

    public IFlyBehaviour FlyBehaviour
    {
        get
        {return flyBehaviour;}
        set
        {flyBehaviour=value;}
    }
} 
```

通过调用**flyBehaviour**，您可以调用已定义但在基类中的受保护字段。

如果要初始化该字段，则必须在构造函数中进行，如您所想，或者您可以在任何方法或属性中操作值。

```
class MullardDuck: Duck
{
    public MullardDuck()
    {
        // You can access the field from the constructor
        this.flyBehaviour = new FlyWithWings();
    }

    public void Method(){
        // You can also access the field from a method
        this.flyBehaviour = new FlyWithWings();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:38:01.193

why do you need to use that var in that place? can't you only do something like this if you say that in this place the var is recognized?

```
class MullardDuck: Duck
{
    IFlyBehaviour mullardFlyBehaviour;
    public MullardDuck(){
        mullardFlyBehaviour = flyBehaviour;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:38:19.770

You can access the variable in a method of derived class. Try to access the variable in the MullarDuck() function (constructor) or any other function you might define in the derived class. As per definition, the derived class already have this variable so you don't have to access that variable outside any method or property.

If you want to assign any value to this variable, you will have to assign it either in a method or in a property.

# c# - 如何使用 yahoo 邮件帐户从本地主机发送电子邮件？

> ID：12769270
> 
> 赞同：0
> 
> 时间：2012-10-07T13:30:26.763
> 
> 标签：c#, asp.net, smtp, yahoo

我正在使用 Visual Studio 2010 Ultimate 开发一个 ASP.NET 网站。我想使用我的雅虎邮件帐户向客户发送确认邮件。我该怎么做？我应该更改或添加哪些设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:51:33.860

这是雅虎邮件设置

*   雅虎！邮件 SMTP 服务器地址：smtp.mail.yahoo.com
*   雅虎！邮件 SMTP 用户名：您的完整 Yahoo! 邮件电子邮件地址（包括“@yahoo.com”）
*   雅虎！邮件 SMTP 密码：您的 Yahoo! 邮件密码
*   雅虎！邮件 SMTP 端口：465
*   雅虎！需要邮件 SMTP TLS/SSL：是

这是使用雅虎邮件设置发送电子邮件的示例代码

```
SmtpClient emailClient = new SmtpClient("smtp.mail.yahoo.com");
System.Net.NetworkCredential SMTPUserInfo = new System.Net.NetworkCredential("xyz@yahoo.com","*******"); 
emailClient.EnableSsl = true;
emailClient.Credentials = SMTPUserInfo;
emailClient.Port = 465;

MailMessage message = new System.Net.Mail.MailMessage("xyz@gmail.com", "someone@something.something", "fire!!", "Call up 911 and inform my house is on fire and my phone too");
emailClient.Send(message); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:46:12.237

你可以检查这个项目：

[http://www.codeproject.com/Articles/1684/Sending-Mail-Using-C-via-SMTP](http://www.codeproject.com/Articles/1684/Sending-Mail-Using-C-via-SMTP)

在那里，您将看到如何设置配置以使用任何（在您的情况下为雅虎）smtp 服务器发送邮件以发送电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:35:13.717

You need to have smtp/pop access to yahoo mail in order to send the mail using yahoo account. The free account offered by yahoo does not have that access. You might have to opt for yahoo mail pro.

For sending a mail using SMTP, all you need is username and password of an smtp account. You will use the pass this credentials and send the mail with classes system.net.mail namespace.

# erlang - OTP 的原理。在实践中如何区分功能代码和非功能代码？

> ID：12769275
> 
> 赞同：7
> 
> 时间：2012-10-07T13:31:03.490
> 
> 标签：erlang, erlang-otp

考虑我有一个用 gen_fsm 实现的 FSM。对于某个 StateName 中的某个事件，我应该将数据写入数据库并回复用户结果。所以下面的 StateName 用一个函数来表示：

```
statename(Event, _From, StateData)  when Event=save_data->
    case my_db_module:write(StateData#state.data) of
         ok -> {stop, normal, ok, StateData};
         _  -> {reply, database_error, statename, StateData)
    end. 
```

其中 my_db_module:write 是实现实际数据库写入的非功能代码的一部分。

我看到这段代码有两个主要问题：首先，FSM 的纯功能概念被部分非功能代码混合，这也使得 FSM 的单元测试成为不可能。其次，实现 FSM 的模块依赖于 my_db_module 的特定实现。

在我看来，两种解决方案是可能的：

1.  实现 my_db_module:write_async 作为向某个进程处理数据库发送异步消息，不要在 statename 中回复，将 From 保存在 StateData 中，切换到 wait_for_db_answer 并等待来自 db 管理进程的结果作为句柄信息中的消息。

    ```
    statename(Event, From, StateData)  when Event=save_data->
        my_db_module:write_async(StateData#state.data),
        NewStateData=StateData#state{from=From},
        {next_state,wait_for_db_answer,NewStateData}

    handle_info({db, Result}, wait_for_db_answer, StateData) ->
        case Result of
             ok -> gen_fsm:reply(State#state.from, ok),
                   {stop, normal, ok, State};
             _  -> gen_fsm:reply(State#state.from, database_error),
                   {reply, database_error, statename, StateData)
        end. 
    ```

    这种实现的优点是可以从 eunit 模块发送任意消息而不接触实际数据库。如果 db 较早回复，FSM 更改状态或另一个进程将 save_data 发送到 FSM，则该解决方案可能会遇到竞争条件。

2.  使用在 StateData 的 init/1 期间编写的回调函数：

    ```
    init([Callback]) ->
    {ok, statename, #state{callback=Callback}}.

    statename(Event, _From, StateData)  when Event=save_data->
        case StateData#state.callback(StateData#state.data) of
             ok -> {stop, normal, ok, StateData};
              _  -> {reply, database_error, statename, StateData)
    end. 
    ```

    此解决方案不受竞争条件的影响，但如果 FSM 使用许多回调，它确实会使代码不堪重负。尽管更改为实际的函数回调使单元测试成为可能，但它并没有解决函数代码分离的问题。

我对所有这些解决方案都不满意。是否有一些方法可以以纯 OTP/Erlang 方式处理这个问题？可能是我理解 OTP 和 eunit 的原理的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:14:35.487

解决这个问题的一种方法是通过数据库模块的依赖注入。

您将状态记录定义为

```
 -record(state, { ..., db_mod }). 
```

现在您可以在 gen_server 的 init/1 上注入 db_mod：

```
 init([]) ->
    {ok, DBMod} = application:get_env(my_app, db_mod),
    ...
    {ok, #state { ..., db_mod = DBMod }}. 
```

所以当我们有你的代码时：

```
 statename(save_data, _From,
           #state { db_mod = DBMod, data = Data } = StateData) ->
   case DBMod:write(Data) of
     ok -> {stop, normal, ok, StateData};
     _  -> {reply, database_error, statename, StateData)
   end. 
```

当使用另一个模块进行测试时，我们有能力覆盖数据库模块。注入存根现在非常容易，因此您可以根据需要更改数据库代码表示。

另一种选择是在`meck`测试时使用模拟数据库模块之类的工具，但我通常更喜欢使其可配置。

但总的来说，我倾向于将复杂的代码拆分为自己的模块，以便可以单独测试。我很少对其他模块进行大量单元测试，更喜欢大规模集成测试来处理这些部分中的错误。看看 Common Test、PropEr、Triq 和 Erlang QuickCheck（后者不是开源的，完整版也不是免费的）。

# php - 如何将货币 AED 转换为 USD 然后将其传递给 Paypal

> ID：12769277
> 
> 赞同：1
> 
> 时间：2012-10-07T13:31:08.087
> 
> 标签：php, paypal, currency, paypal-ipn

谁能给我一个解决方案。如何在将货币 AED 转换为 USD 之前将其传递给 Paypal。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:41:02.937

你可以简单地使用谷歌

尝试

```
var_dump(simpleConvert("AED","USD",1)); 
```

输出

```
array
  '1.000000' => string '0.272257' (length=8) 
```

使用的功能

```
function simpleConvert($from,$to,$amount)
{
    $content = file_get_contents('https://www.google.com/finance/converter?a='.$amount.'&from='.$from.'&to='.$to);

     $doc = new DOMDocument;
     @$doc->loadHTML($content);
     $xpath = new DOMXpath($doc);

     $result = $xpath->query('//*[@id="currency_converter_result"]/span')->item(0)->nodeValue;
     return $result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-27T09:50:22.807

您可以简单地添加此代码。

```
<?php

function convertCurrency($amount, $from, $to){
$data = file_get_contents("https://www.google.com/finance/converter?   a=$amount&from=$from&to=$to");
preg_match("/<span class=bld>(.*)<\/span>/",$data, $converted);
$converted = preg_replace("/[^0-9.]/", "", $converted[1]);
return number_format(round($converted, 3),2);
}
echo convertCurrency("10", "AED", "USD");

?> 
```

# c++ - Main 函数和状态之间的通信

> ID：12769279
> 
> 赞同：0
> 
> 时间：2012-10-07T13:31:13.687
> 
> 标签：c++, oop, design-patterns, communication

我考虑使用以下设计方法构建游戏引擎。

主要特点是创建所谓的系统，涵盖游戏菜单和游戏关卡。这些系统提供了诸如`Window`绘图、`Input`获取、`Sound`播放以及可能`Network`与服务器通信之类的对象。

```
class System // abstract class
{
     Window* Window;
     Input* Input;
     ...

     System(Window* Window, Input* Input, ...)
     {
          this->Window = Window;
          this->Input= Input;
          ...
     }

     virtual Pause() = 0;
     virtual Resume() = 0;
} 
```

主要功能处理系统因此菜单和级别。说`LevelOne`是从`System`.

```
int main()
{
     LevelOne Tutorial(&Window, &Input, ...); 
     Tutorial.Pause();
     ...
} 
```

这样我的代码就变得结构化并且（在我看来）易于理解。但是 main 函数如何与系统通信呢？

例如，菜单如何告诉主功能用户选择了一个级别，以及选择了哪个级别？为了让主函数删除菜单并创建一个新的关卡对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:39:35.323

我认为您在这里要做的是组织一个完整的模型-视图-控制器架构，您在这里提供的代码是它的模型和控制器部分。查看网上关于 MVC 的一些解释：

[http://www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html](http://www.codinghorror.com/blog/2008/05/understanding-model-view-controller.html)

如果您有一个 main() 函数尝试侦听来自子系统的消息并因此调用适当的操作，则您正在尝试实现单线程反应式消息循环。您可以考虑运行一个 ACE 反应器，它可以侦听 Qt GUI 消息以及网络事件等其他消息，然后适当地调用您的子系统（尽管可能存在一些性能问题）：

[http://www.cs.wustl.edu/~schmidt/PDF/reactor-rules.pdf](http://www.cs.wustl.edu/~schmidt/PDF/reactor-rules.pdf)

我不熟悉用于视频游戏编程的图形引擎，但大多数图形库在其初始化期间为您提供了一个消息循环，不需要您了解此类细节。您通常需要做的就是创建图形对象并将它们注册到库的主消息循环中。

与侦听图形事件的消息线程相比，我建议使用单独的线程侦听网络事件。它将工作分开并有助于提高图形的性能。

# c - fgets 回车

> ID：12769289
> 
> 赞同：8
> 
> 时间：2012-10-07T13:32:37.743
> 
> 标签：c, string, fgets, carriage-return

我正在运行以下代码：

```
#include<stdio.h>
#include<string.h>
#include<io.h>

int main(){
    FILE *fp;
    if((fp=fopen("test.txt","r"))==NULL){
        printf("File can't be read\n");
        exit(1);
    }
    char str[50];
    fgets(str,50,fp);
    printf("%s",str);
    return 0;
} 
```

text.txt 包含：`I am a boy\r\n`

由于我在 Windows 上，它需要 \r\n 作为换行符，所以如果我从文件中读取它应该存储`"I am a boy\n\0"`在. 我正在使用 mingw 编译器。`str``"I am a boy\r\n"`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-27T06:37:48.727

该行为取决于 c 库实现以及您传递给的模式`fopen`。`fopen` [请参阅(fopen on MSDN) 上](http://msdn.microsoft.com/en-us/library/vstudio/yeby3zcb.aspx)的 MSDN 文档中的此引用：

> b - 以二进制（未翻译）模式打开；涉及回车和换行字符的翻译被禁止。

意思是，如果您使用 Microsoft c 库，并打开省略“b”的文件，则将从流中删除回车符。

由于您使用的是 mingw，因此您的编译器可能会链接到遵循 POSIX 标准的 GNU c 库。这就是 GNU 文档所说的`fopen` [（gnu.org 上的 fopen）](http://www.gnu.org/software/libc/manual/html_node/Opening-Streams.html)：

> opentype 中的字符 'b' 具有标准含义；它请求二进制流而不是文本流。但这对 POSIX 系统（包括 GNU 系统）没有影响。

结论：您省略了“b”模式字符，它以文本模式打开您的流。您在 Windows 上，但使用了 GNU c 库，它在文本和二进制模式之间没有区别。这就是为什么`fgets`同时读取回车和换行的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T14:23:01.113

> 由于我在 Windows 上，它需要 \r\n 作为换行符...

这个假设是错误的。C 标准将回车和换行视为两个不同的事物，如 C99 §5.2.1/3（字符集）所示：

> [...] 在基本执行字符集中，应该有代表警告、退格、回车和换行的控制字符。[...]

`fgets`函数描述如下，在 C99 §7.19.7.2/2 中：

> fgets 函数从 stream 指向的流中最多读取比 n 指定的字符数少 1 的字符到 s 指向的数组中。***在换行符*****（保留）**之后或文件结尾之后**不会读取其他字符。***在读入数组的最后一个字符之后立即写入一个空字符。*

 *因此，当遇到 string 时`I am a boy\r\n`，符合要求的实现应该读取到该`\n`字符。`\r`没有可能基于平台丢弃实现的合理理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-19T08:57:53.660

c 标准对以下内容中的文本流进行了说明：

> 可能必须在输入和输出上添加、更改或删除字符，以符合在主机环境中表示文本的不同约定。因此，流中的字符与外部表示中的字符之间不需要一一对应。只有在以下情况下，从文本流中读取的数据必须与之前写入该流的数据相比较： 数据仅包含打印字符和控制字符水平制表符和换行符；空格字符前面没有换行符；最后一个字符是换行符。

换句话说，如果一个文件以文本模式打开，一个实现可以在进出磁盘时随意添加、删除和修改控制字符。这显然是 microsoft 实现对回车所做的，但 gnu 实现却没有。*

# file - Shell 解决输出问题 - 连接和文件读取问题

> ID：12769301
> 
> 赞同：0
> 
> 时间：2012-10-07T13:34:15.707
> 
> 标签：file, shell

我有一个简单的问题 - 我正在尝试解决一系列输出已更改的文件的问题。

输出应如下所示：

```
>Tests HadI-sdds1:4134:AAABBBBB:1:1101:6635:2407_2:N:0:TTTTTT
AAAABBBBBEEEECCCCERTTSFASFASFDSGFSDGGSFGFSGDFGDFGDFGDFGDFGDFGDFGDCCVBWAAAABBBBBEEEECCCCERTTSFASFASFDSGFSDGGSFGFSG 
```

但显示为：

```
>Tests HadI-sdds1:4134:AAABBBBB:1:1101:6635:2407_2:N:0:TTTTTT
AAAABBBBBEEEECCCCERTTSFASFASFDSGFSDGGSFGFSGDFGDFGDFGDFGDFGDFGDFGDCCVBW
AAAABBBBBEEEECCCCERTTSFASFASFDSGFSDGGSFGFSG 
```

我已经编写了以下代码来尝试修复它，但是第 16 行似乎返回了一个空字符串，但是当我在没有输入 var 的情况下执行 echo 时，我得到了完整的行。

```
#!/bin/sh 
FILENAME=$1
OUTPUT=$2
set LineToWrite=''

while read LINE 
do
if  [ `echo "$LINE" | awk '{print substr($0,1,1)}'` == ">" ]
    then
        echo "$LineToWrite" >> $OUTPUT
        echo "$LINE" >> $OUTPUT
        set LineToWrite=''
    else
        set currLine=`echo "$LINE" | awk '{print substr($0,1,70)}'`
        set LineToWrite+=$currLine
fi
done <$FILENAME 
```

有什么想法可以解决我的问题吗？（文件包含 > 100 万行）

非常感谢提前！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:38:00.600

Three things :

*   no space allowed between keys & values in shell
*   use more quotes on all variables
*   no need to cat FILE | while : use `while <condition>; do ...; done < FILE`

*USE MORE QUOTES!* They are vital. Also, learn the difference between ' and " and `. See [http://mywiki.wooledge.org/Quotes](http://mywiki.wooledge.org/Quotes) and [http://wiki.bash-hackers.org/syntax/words](http://wiki.bash-hackers.org/syntax/words)

# hadoop - 是否可以在hadoop中将映射器的一部分发送到reducer，而将另一部分写入HDFS？

> ID：12769309
> 
> 赞同：6
> 
> 时间：2012-10-07T13:35:14.250
> 
> 标签：hadoop, mapreduce

我想将映射器输出的一部分写入一个文件夹，比如 HDFS 中的文件夹 A。输出的另一部分，我希望它被reducer处理。这可能吗？我知道多个输出。这可以使用多个输出吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T12:42:27.443

是的，可以使用 MultipleOutputs，根据文档，在 map 阶段通过 MultipleOutputs 传递的任何输出都会被 reducer 忽略，所以这正是你想要的。[我在我的 GitHub 上](https://github.com/rystsov/learning-hadoop/blob/master/src/main/java/com/twitter/rystsov/mr/MultipulOutputExample.java)写了一个小例子，希望对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:49:16.260

您可以从映射器实现直接将输出写入 HDFS - 只需使用上下文的配置创建一个 FileSystem 对象，然后创建一个文件，写入它并记住将其关闭：

```
public void cleanup(Context context) {
    FileSystem fs = FileSystem.get(context.getConfiguration());
    PrintStream ps = new PrintStream(fs.create(
        new Path("/path/to/output", "map-output")));
    ps.println("test");
    ps.close();
} 
```

需要考虑的其他事项 - 每个文件需要在 HDFS 中唯一命名，因此您可以在文件名后加上映射器 ID 号，但您还需要了解推测执行（因为您的映射器任务实例可能在两个位置运行 - 两者尝试写入 HDFS 中的同一文件）。

您通常会从这里抽象出来，因为输出提交程序在 tmp HDFS 目录中创建具有任务 ID 和尝试编号的文件，仅在提交该任务尝试时将其移动到正确的位置和文件名。在运行 map 端（数据写入本地文件系统）而不关闭推测执行或在 HDFS 中创建多个文件（每次尝试之一）时，无法解决此问题。

所以一个更“完整”的解决方案看起来像：

```
FileSystem fs = FileSystem.get(context.getConfiguration());
PrintStream ps = new PrintStream(fs.create(new Path(
        "/path/to/output", String.format("map-output-%05d-%d",
        context.getTaskAttemptID().getTaskID().getId(),
        context.getTaskAttemptID().getId()))));
ps.println("test");
ps.close(); 
```

MultipleOutputs 将帮助您减少边，但我不认为映射边它会起作用，因为没有输出提交者并且工作目录不在 HDFS 中。

当然，如果这只是映射器的工作，那么 MultipleOutputs 就可以了。因此，另一种方法是运行仅地图作业，然后在辅助作业中使用所需的输出部分（使用身份映射器） - 取决于我猜你移动了多少数据。

# c++ - C++ 中的自动类型推断

> ID：12769311
> 
> 赞同：1
> 
> 时间：2012-10-07T13:36:03.813
> 
> 标签：c++, templates

我实现了一个`filtered_ostream_iterator`有助于使用谓词过滤流的类，并将其作为模板类。

```
template<typename T, typename Pred>
class filtered_ostream_iterator
{
    ostream& os;
    Pred _filter;

public:
    filtered_ostream_iterator(ostream & o, Pred filter): os(o),
                                                        _filter(filter) {}

    filtered_ostream_iterator& operator++()
    {
        return *this;
    }

    filtered_ostream_iterator& operator*()
    {
        return *this;
    }

    filtered_ostream_iterator& operator=(T t)
    {

        if (_filter(t))
            os << t;
        return *this;
    }
}; 
```

没关系，但现在我有一个问题。当我使用时，`filtered_ostream_iterator`我必须以下列方式定义它。

```
stringstream ss1;
auto filter = [](char t){ return (t >= 'a' && t <=  'z') || (t >= 'A' && t <=  'Z'); };
filtered_ostream_iterator<char, bool (*)(char)> it1(ss1, filter); // initialization 
```

特别是看起来不太好`<char, bool (*)(char)>`。然后我决定做一个可以自动推断类型的特殊功能。

```
template<typename Pred>
filtered_ostream_iterator<char, Pred> create_filtered_ostream_iterator(ostream& os, Pred pred)
{
    return filtered_ostream_iterator<char, Pred>(os, pred); // problem
} 
```

我以下列方式使用它

```
auto it1 = create_filtered_ostream_iterator(ss1, filter); 
```

你可以看到我应该在流中指定元素的类型，现在它实际上不是模板，但是当我试图用类似这样的东西替换下面的代码时

```
template<typename Pred, typename T>
filtered_ostream_iterator<T, Pred> create_filtered_ostream_iterator(ostream& os, Pred pred)
{
    return filtered_ostream_iterator<T, Pred>(os, pred); // error
} 
```

当我以同样的方式使用它时

```
auto it1 = create_filtered_ostream_iterator(ss1, filter); 
```

我收到以下错误。

```
error: no matching function for call to 'create_filtered_ostream_iterator' 
```

那么我应该如何避免所有这些问题呢？或者我应该使用我的第一个定义变体并且不介意它看起来有多难？你怎么看待这件事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T13:39:29.413

像这样写：

```
template <typename T, typename Pred>
filtered_ostream_iterator<T, Pred> create(std::ostream & os, Pred p)
{
    return filtered_ostream_iterator<T, Pred>(os, p);
} 
```

用法：

```
auto it = create<char>(ss1, filter); 
```

只能推导出*尾随*模板参数，但您可以随意指定任意数量的初始参数。

另一种方法是从流中推断类型：

```
template <typename TChar, typename TTraits, typename Pred>
filtered_ostream_iterator<typename TTraits::char_type, Pred>
create(std::basic_ostream<TChar, TTraits> & os, Pred & p)
{
    return filtered_ostream_iterator<typename TTraits::char_type, Pred>(os, p);
} 
```

用法：

```
auto it = create(ss, filter); 
```

# javascript - CSS textarea可见溢出文本可能吗？

> ID：12769314
> 
> 赞同：0
> 
> 时间：2012-10-07T13:37:23.877
> 
> 标签：javascript, css

这是一个例子：

[http://jsfiddle.net/TRpxM/](http://jsfiddle.net/TRpxM/)

是否可以使文本在 textarea 中完全可见？

在实际代码中，css 属性会自动复制，这里只是一个手动设置值的示例。

我正在尝试做文本编辑器，例如与可编辑的 div 无缝。

我正在使用 line-height 删除一些大字体大小的字体上的垂直空格。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:42:23.890

只需增加`line-height`to `35px`，因为它是完全可见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:50:34.713

您可以删除 line-height 并尝试通过 ap 或 span 属性控制字体。这将使您更好地控制设计。还要考虑将填充和边距归零或使用 css 重置文件，这样您就不会遇到任何跨浏览器问题。

# wcf - Upload file async issue with jQuery forms to a WCF service

> ID：12769315
> 
> 赞同：1
> 
> 时间：2012-10-07T13:37:38.107
> 
> 标签：wcf, jqueryform

I need to wrap this up but not sure how :-)

Basically, I'm using jQuery forms to upload a file to a WCF REST service.

Client looks like:

```
<script type="text/javascript">
    $(function () {
        $('form').ajaxForm(
            {
                url: '/_vti_bin/VideoUploadService/VideoUploadService.svc/Upload/theFileName',
                type: 'post'
            })
    });
</script>
<form id="fileUploadForm" name="fileUploadForm" method="post" action="/_vti_bin/VideoUploadService/VideoUploadService.svc/Upload" enctype="multipart/form-data">
  <input type="text" name="filename" />
  <input type="file" id="postedFile" name="postedFile" />
  <input type="submit" id="fileUploadSubmit" value="Do Upload" />
</form> 
```

While server relevant snippets are

```
[WebInvoke(UriTemplate = "Upload/{fileName}", ResponseFormat = WebMessageFormat.Json)]
void Upload(string fileName, Stream fileStream);

public void Upload(string fileName, Stream stream)
{
   // just write stream to disk...
} 
```

Problem is that what I write to disk looks like this, not the content of the file (in my case, "0123456789"):

```
-----------------------------7dc7e131201ea
Content-Disposition: form-data; name="MSOWebPartPage_PostbackSource"

// bunch of same stuff here

-----------------------------7dc7e131201ea
Content-Disposition: form-data; name="filename"

fdfd
-----------------------------7dc7e131201ea
Content-Disposition: form-data; name="postedFile"; filename="C:\Inter\Garbage\dummy.txt"
Content-Type: text/plain

0123456789
-----------------------------7dc7e131201ea-- 
```

Question - should I be manually parsing what I get above and extract the last part which corresponds to the uploaded file (not elegant)? Or there is a way to apply attribute, content type, whatever setting, in order to get in the stream JUST the uploaded file's content?

I'm suspect there is, but I'm missing it... any help?

Thanks much!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:56:18.943

看看 2 篇关于使用 ASP.NET Web API 上传表单文件的文章：

[http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-1)

[http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)

ASP.NET Web API 已经有类（如 MultipartFormDataStreamProvider）来解析多部分请求并从中保存数据。为什么不使用这些类来解决您的问题

**UPD 如果是 .NET 3.5 代码和托管：**

认为 MultipartFormDataStreamProvider 类及其程序集不适用于 .NET 3.5。在这些情况下，您应该使用其他一些库/类来解析多部分或手动进行。

尝试以下项目（MIT 许可证）并从此项目中文件 HttpMultipartParser.cs：

[https://bitbucket.org/lorenzopolidori/http-form-parser/src](https://bitbucket.org/lorenzopolidori/http-form-parser/src)

# javascript - Javascript意外{令牌错误

> ID：12769316
> 
> 赞同：-1
> 
> 时间：2012-10-07T13:37:51.270
> 
> 标签：javascript, html5-video, webrtc

我正在尝试制作 WebRTC 演示，但出现以下错误

`Unexptected token {`

附上屏幕截图。请帮助解决此错误。

![在此处输入图像描述](../Images/2df2ccad2fb4513262988bfd6104105c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:39:23.360

`{content }`这里的内容必须是 JavaScript 中的键值格式。问题是您试图创建一个语法无效的变量。

```
var inittiator = {{inittiator }}; 
```

必须像

```
 var inittiator = { key:{internalkey:value}};// depth 2
 var inittiator = { key: value};// depth 1 
```

# escaping - QProcess 和命令行“/c”参数

> ID：12769321
> 
> 赞同：5
> 
> 时间：2012-10-07T13:38:14.797
> 
> 标签：escaping, qstring, qprocess

我对 QProcess 有一个非常奇怪的问题，而且它的行为很奇怪。

最后我想得到的是这样的（这是Windows 7中的cmd.exe）

```
C:\path_to_somewhere>cmd /c "C:\Program Files\path_to_dir\executable" 
```

（cmd是为了与QProcess的show兼容）

所以要做这样的事情，我创建了这个：

```
QProcess proc;
QString command;
QStringList attributes;

command = "c:\\windows\\system32\\cmd.exe";
QStringList << QString("/c \"C:\\Program Files\\path_to-dir\\executable"");
proc.start(command, attributes); 
```

我得到的错误输出是：

```
Name '\"c:\Program Files\Quantum GIS Wroclaw\bin\gdalwarp.exe\"' is not recognized as
internat or external command, executable or batch file. 
```

（它是我从波兰语翻译过来的，所以英文可能有点不同）。

似乎 \ 字符没有在字符串中转义，将 \" 作为命令中的字符。我做错了什么？

我试过了

```
proces.start(QString) 
```

具有三重\“\”\”的功能，它也不起作用。我想这个问题的解决方案必须非常简单，以至于我没有考虑它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T22:35:26.157

好的，我不知道它是否是 Qt 错误，但在有关[`void QProcess::start(QString, QStringList, OpenMode)`](http://qt-project.org/doc/qt-4.8/qprocess.html#start "Qt 项目文档")它的文档中是这样说的：

> Windows：包含空格的参数用引号括起来。

似乎这不是真的，因为我的程序使用带空格的路径并且 cmd shell 在那里中断。

但是，我发现了为仅接受一个字符串参数的系统设计的函数（就像 Windows 一样）。

它是[`QProcess::setNativeArguments(QString)`](http://qt-project.org/doc/qt-4.8/qprocess.html#setNativeArguments "Qt 项目文档")

它接受一个 QString 作为参数，专为 Windows 和 Symbian 创建。

所以毕竟，如果一个人在将 Windows（或 Symbian）中的参数传递给系统时遇到问题，他应该尝试`setNativeArguments(QString)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T16:58:51.263

正如您已经注意到的，Qt 用引号将包含空格的参数包装起来，这意味着发出的实际命令`QProcess`看起来像这样（不确定内部引号）：

```
c:\windows\system32\cmd.exe "/c \"C:\Program Files\path_to_dir\executable\"" 
```

这不是您想要的：整个字符串都传递给`cmd`include `/c`。由于`/c`和 path 是两个参数，您应该将它们分别传递给`QProcess`，而不必担心空格，因为它们将被自动处理：

```
QString command = "cmd.exe";
QStringList arguments = 
    QStringList() << "/c" << "C:\\Program Files\\path_to_dir\\executable";
// note there are two arguments now, and the path is not enclosed in quotes
proc.start(command, arguments); 
```

# javascript - How can I add a number to a variable to which I assigned a number in Javascript?

> ID：12769323
> 
> 赞同：0
> 
> 时间：2012-10-07T13:38:51.080
> 
> 标签：javascript, jquery

I have the following:

```
var offset;
offset = localStorage.getItem('test.MenuList.Offset.' + examID + "." + level) || 0;
offset += 100; 
```

When I use the debugger this offset now has 0100\. I want it to add like a number not a string. How can I do this?

**Please note** I changed the question slightly because I realized I was getting the value from local storage. I assume this returns a string. But I am still not sure how to solve this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T13:40:40.927

~~The code you gave won't do that. I assume~~ your value in your actual code is a numeric string. ~~If so,~~ the `+` will behave as a *string concatenation* operator, so you must convert the value to a number before using `+`.

You can do that with [`parseFloat()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat).

```
var offset = localStorage.getItem('test.MenuList.Offset.' + examID + "." + level);

offset = parseFloat(offset) || 0; 
```

* * *

Or in most cases, you can simply use the unary version of `+` to do the conversion.

```
offset = +offset || 0; 
```

# reporting-services - SQL Server 2012 SSRS Over AlwaysOn 可用性组

> ID：12769331
> 
> 赞同：0
> 
> 时间：2012-10-07T13:39:52.627
> 
> 标签：reporting-services, sql-server-2012

我正在使用 SQL Server 2012 可用性组为我的项目设置 SQL BCDR。我可以成功地为我的数据库实现它。但我有 SSRS，我想将其包含在可用性组中。

什么是最好的方法。理想情况下，我希望我的客户端使用侦听器名称或通用静态名称连接到报告服务器，以便在故障转移期间客户端不需要更改任何内容。

在使用 AlwaysOn 配置 SSRS 方面有什么好的读物吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T17:34:32.963

这是一种非常常见的情况，但可以通过 SQL Server 2012（AlwaysOn 可用性组）中内置的可扩展性功能来实现。在计划将 SSRS 与 AlwaysOn 可用性组一起使用时，几乎没有限制和需要考虑的事项。请参阅此链接以获取更多详细信息。[http://msdn.microsoft.com/en-us/library/hh882437.aspx](http://msdn.microsoft.com/en-us/library/hh882437.aspx)

# java - 从文本文件中读取数据

> ID：12769332
> 
> 赞同：0
> 
> 时间：2012-10-07T13:40:30.737
> 
> 标签：java, android

我正在尝试读取文本文件并将这些文本文件中的数据插入 URL；但我有这个错误“java.lang.illegalargumentexception 包含路径分隔符文件”

这是我使用的读取方法

>

```
public  String ReadFile (String Path){
    String     res  =    null;
    try {
        String filePath = android.os.Environment.getExternalStorageDirectory().getPath() + "/" + Path;

        File file = new File(filePath);
        if(file.exists()){
           InputStream       in = openFileInput(filePath);

           if (in != null) {
            // prepare the file for reading
             InputStreamReader input = new InputStreamReader(in);
             BufferedReader buffreader = new BufferedReader(input);

              res = "";
              String line;
            while (( line = buffreader.readLine()) != null) {
                res += line;
              }
              in.close();

              }else{
            }
        }else{
               Toast.makeText(getApplicationContext(), "The File" + Path +  " not Found" ,Toast.LENGTH_SHORT).show();
        }
    } catch(Exception e){
           Toast.makeText(getApplicationContext(),e.toString() +   e.getMessage(),Toast.LENGTH_SHORT).show();
    }
    return res;
}

  >  String sendername = ReadFile ("SenderName.txt");
     String AccountName = ReadFile ("AccountName.txt");
     String AccountPassword = ReadFile ("AccountPassword.txt");
     String MsgText = ReadFile ("MsgText.txt"); 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:50:02.343

**-**虽然这个错误没有指向那里，但你仍然有权限在 Manifest.xml 文件中读取外部存储

**试试这样的..**

```
public void readFile(String path){

File f = new File(path);
FileReader fr = new FileReader(f);
BufferedReader br = new BufferedReader(fr);

String read = new String();

String temRead = new String();

while((temRead = br.readLine())!=null){

     read = read + temRead;

 }

} 
```

# ruby - 将 BigDecimal 转换为美分

> ID：12769334
> 
> 赞同：0
> 
> 时间：2012-10-07T13:40:53.187
> 
> 标签：ruby, bigdecimal

我想将 Ruby 中的 BigDecimal 转换为美分，这就是我所做的：

```
amount = BigDecimal('19.95')
#=> #<BigDecimal:7f80bc726b38,'0.1995E2',18(18)> 
amount_in_cents = amount*100
#=> #<BigDecimal:7f80bc794cc8,'0.1995E4',9(45)> 
amount_in_cents.to_f
#=> 1995.0
amount_in_cents.ceil
#=> 1995 
```

所以`ceil`给了我正确的美分金额，我需要与支付提供商沟通的金额。目前我不能 100% 确定我在这里所做的是否正确。也许有人知道更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:44:38.287

您也可以使用`to_i`，它可以更好地传达您的意图，除非您希望处理小数美分（在这种情况下，`to_i`似乎截断为零）。

# c - 如何在下面的 recusion 中实现动态规划？

> ID：12769336
> 
> 赞同：0
> 
> 时间：2012-10-07T13:40:55.530
> 
> 标签：c, algorithm, recursion

我有以下递归：

```
if(a%2 == 0){
f([a1,a2,...,aN],a,N) = (a1 + aN)/2 + f([a1,a2,...,a(N-1)],a+1,N-1)/2 + 
f([a2,...,aN],a+1,N-1)/2;
}
else{
f([a1,a2,...,aN],a,N) = f([a1,a2,...,a(N-1)],a+1,N-1)/2 + 
f([a2,...,aN],a+1,N-1)/2;
} 
```

基本情况：

```
f([a1,a2],a,2) = (a1+a2)/2; 
```

显然，如果我递归地实现它，就会出现堆栈溢出。我应该如何利用动态规划来获得这个递归的最优解？

[a1,a2,..,aN] 表示一个整数数组。

N 的限制是 2000 并且 a1,a2,..,aN <=999。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:22:04.623

这闻起来很像家庭作业问题。我建议您与讲师或助教见面，因为这是最好的互动学习方式。如果您使用此信息，请务必引用它，以免抄袭。

首先，观察结果在值中是线性的`[a0, a1, ... aN]`。因此，您实际上只需要跟踪它们的系数。出于符号的目的，让我们写`{b1, b2, ..., bN}`来表示`b1 * a1 + b2 * a2 + ... bN * aN`。

接下来，手动计算一些递归：

`f([a1, a2], a, 2) = { 1/2, 1/2 }`是 的基本情况`N=2`。

让我们看看`N=3`：

`f([a1, a2, a3], a, 3)`对于`a`偶数 = `{1/2, 0, 1/2} + { f([a1, a2], a+1, 2)/2, 0 } + { 0, f([a2, a3], a+1, 2)/2 } = { 1/2, 0, 1/2 } + { 1/4, 1/4, 0 } + { 0, 1/4, 1/4 } = { 3/4, 1/2, 3/4 }`。

`f([a1, a2, a3], a, 3)`对于`a`奇数 = `{ f([a1, a2], a+1, 2)/2, 0 } + { 0, f([a2, a3], a+1, 2)/2 } = { 1/2, 0, 1/2 } + { 1/4, 1/4, 0 } + { 0, 1/4, 1/4 } = { 1/4, 1/2, 1/4 }`。

现在`N=4`：

`f([a1, a2, a3, a4], a, 4)`对于`a`偶数 = `{ 1/2, 0, 0, 1/2 } + { f[a1, a2, a3], a+1, 3)/2, 0 } + { 0, f([a2, a3, a4], a+1, 3)/2 }`。因为`a`是`a+1`偶数，所以是奇数，所以我们在这种情况下`F([], even, 3)`。`f([a1, a2, a3, a4], a, 4)`对于`a`偶数 = `{ 1/2, 0, 0, 1/2 } + { 1/8, 1/4, 1/8, 0 } + { 0, 1/8, 1/4, 1/8 } = { 5/8, 3/8, 3/8, 5/8 }`。

`f([a1, a2, a3, a4], a, 4)`对于`a`奇数 = `{ f[a1, a2, a3], even, 3)/2, 0 } + { 0, f([a2, a3, a4], even, 3)/2 } = { 3/8, 1/4, 3/8, 0 } + { 0, 3/8, 1/4, 3/8 } = { 3/8, 5/8, 5/8, 3/8 }`。

现在您可以看到系数仅取决于`N`偶数`a`或奇数。

这意味着您的动态编程只需要记住每个组合的系数`N`和一个布尔值。由于`N`上限为 2000，这意味着您只需要 4000 个条目，这不应该是太大的负担。事实上，您可以放弃递归并像我们上面所做的那样简单地增量计算整个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:45:57.667

您需要存储所有 a,N 值对的答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T18:46:31.503

可以以增量方式计算每个 ai 的系数。我相信给定 n 的一半系数需要计算，因为另一半将包含重复的元素。所以每个 n 将在表中包含 n/2 个值。这种方法将导致 n^2 运行时间。不知道这可以进一步改进。

# image - Matlab中的白色二值图像

> ID：12769337
> 
> 赞同：1
> 
> 时间：2012-10-07T13:41:15.043
> 
> 标签：image, matlab, binary

在 Matlab 中，

如果我做：

```
output = false(5, 5);
imshow(output); 
```

它会显示一个黑色正方形而不是白色二进制正方形图像。这有什么理由吗？我怎样才能输出一个白色的二进制正方形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:02:42.690

原因是`false`被映射到`0`，并且`true`被映射到`1`。此外，在显示图像时，数字越大，强度越高。白色比黑色更具有强度。

另一种思考方式是，通常你有 256 个值 - `0-255`。`0`完全是黑色的，`255`完全是白色的。现在，假设您对两种颜色进行了量化。现在很明显`0`应该是黑色的。

为了显示白色方块，使用

```
 output = true(5,5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:26:51.863

你可以使用补全

```
imshow(imcomplement(false(5, 5))) 
```

或修改默认颜色映射（引用 imshow 的文档）

```
imshow(X,map) 
```

使用颜色映射图显示索引图像 X。颜色映射矩阵可以有任意数量的行，但它必须正好有 3 列。每一行都被解释为一种颜色，第一个元素指定红光的强度，第二个是绿色，第三个是蓝色。颜色强度可以在 0.0 到 1.0 的区间内指定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T15:29:04.550

您还可以更改图形的[颜色](http://www.mathworks.com/help/matlab/ref/colormap.html)图以自定义 MATLAB 如何将值映射到颜色：

```
BW = [false,true;true,false];
imshow(BW)
set(gcf, 'Colormap',[1,1,1;0,0,0]) 
```

![截屏](../Images/231edb67cf78b838acc27d711a71d66b.png)

# javascript - appending content in angular.js

> ID：12769338
> 
> 赞同：1
> 
> 时间：2012-10-07T13:41:19.087
> 
> 标签：javascript, angularjs

I have a table which I populate with data and I want to insert other rows to that table, under the element that was clicked dynamically. I have an array of json objects called rows and when I click on a row it should fetch an array of json objects called campaigns.

This is my html:

```
<tbody>
    <tr ng-repeat="row in rows">
    <td>
        <a href="javascript:;" ng-click="toggleCollapse(row.id)">{{ row.name }}</a>
    </td>
    <td>{{ row.clicks }}</td>
    </tr>

    <script type="text/ng-template" id="clicked">
    <tr ng-repeat="campaign in campaigns">
        <td>
            <a href="javascript:;">{{ campaign.name}}</a> 
        </td>
        <td>{{ campaign.clicks }}</td>
    </tr>
    </script>
</tbody> 
```

This is my function:

```
$scope.toggleCollapse = function(id) {
    var campaignId = id;
    if (campaignId === $scope.selectedRow) {
        $scope.selectedRow = null;
    } else {
        $scope.selectedRow = campaignId;
        $scope.ads.push({
            "id" : 1,
            "name" : "TestName",
            "clicks" : 400
        })
        // append template here 
    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:37:21.347

您不需要单独的模板，只需直接输入即可。如果campaigns 数组中没有任何内容，则将有0 个campaigns。

# php - .htaccess 无端口重定向

> ID：12769339
> 
> 赞同：0
> 
> 时间：2012-10-07T13:41:33.390
> 
> 标签：php, regex, .htaccess

我正在尝试从 site.com/foo/bar.php 重定向到 site.com/foo/bar

我想出了这段代码：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^(?!clients/).*$ %1 [R=301,L,NC] 
```

并将请求发送到 .php 文件：

```
RewriteCond %{REQUEST_FILENAME}.php -f [NC]
RewriteRule ^(?!clients/).*$ %{REQUEST_URI}.php [L,NC] 
```

但以上重定向到 site.com:8080/foo/bar

端口正在被添加，我已经尝试`RewriteCond %{SERVER_PORT} 8080`了很多其他的东西，但它没有用。多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:08:50.330

怎么样

```
RewriteCond %{REQUEST_FILENAME} \.php$ [NC]
RewriteRule ^(?!clients/)(.*)\.php$ $1 [NC,R=301,L] 
```

# android - 无法从数据库中检索数据并在列表视图中显示

> ID：12769340
> 
> 赞同：0
> 
> 时间：2012-10-07T13:41:57.977
> 
> 标签：android, android-listview, android-cursoradapter, android-sqlite

对不起，我是新人。我的数据库中有 2 个表：用户和帐户，我已成功将数据添加到数据库。我想从帐户表中检索数据并将其显示到列表视图中。但它不起作用。但是在编辑代码并尝试为用户检索数据后，它在列表视图中正确显示，但它不适用于帐户表。我不知道错误在哪里。你能帮忙吗？感谢 DatabaseAdapter.java

```
//User Table
public static final String KEY_ROWID = "_id";
public static final String KEY_UNAME = "name";
public static final String KEY_USURNAME = "surname";
public static final String KEY_UUSERNAME = "username";
public static final String KEY_UPASSWORD = "password";
public static final String KEY_UEMAILADDRESS = "emailadd";

//Account Table
public static final String KEY_ROWID1 = "_id";
public static final String KEY_BANKNAME =" bankname";
public static final String KEY_TYPE = " type";
public static final String KEY_ACCNUM = " accnum";
public static final String KEY_BALANCE = " balance";
public static final String KEY_EXPIRYDATE = " expirydate";

private static final String DATABASE_NAME = "MoneyManagerSys";
public static final String DATABASE_TABLE = " Usertb";
public static final String DATABASE_TABLE1 = " Accounttb";
private static final String DATABASE_TABLE2 = " Transactiontb";
private static final String DATABASE_TABLE3 = " BillRemindertb";
//Database Version
private static final int DATABASE_VERSION = 1;
private static String Usertb;
private static String Accounttb;
    private DbHelper MHelper;
private final Context MContext;
private SQLiteDatabase Mdatabase;

private static final String DATABASE_USER_TABLE = "CREATE TABLE" + DATABASE_TABLE + "  (" +
        KEY_ROWID + " INTEGER PRIMARY KEY, " +
        KEY_UNAME + " TEXT , " +
        KEY_USURNAME + " TEXT , " +
        KEY_UUSERNAME + " TEXT , " +
        KEY_UPASSWORD + " TEXT , " +
        KEY_UEMAILADDRESS + " TEXT );" ;

private static final String DATABASE_ACCOUNT_TABLE1 = "CREATE TABLE" + DATABASE_TABLE1 + " (" +
        KEY_ROWID1 + " INTEGER PRIMARY KEY, " +
        KEY_BANKNAME + " TEXT , " +
        KEY_TYPE + " TEXT , " +
        KEY_ACCNUM + " TEXT , " +
        KEY_BALANCE + " TEXT , " +
        KEY_EXPIRYDATE + " TEXT  );" ;

       public long createEntry1(String bankname, String type, String accnum, String balance, String expirydate) {
    ContentValues cv1 = new ContentValues();
    cv1.put(KEY_BANKNAME, bankname);
    cv1.put(KEY_TYPE, type);
    cv1.put(KEY_ACCNUM, accnum);
    cv1.put(KEY_BALANCE, balance);
    cv1.put(KEY_EXPIRYDATE, expirydate);
    return Mdatabase.insert(DATABASE_TABLE1, null, cv1);
}

public long createEntry(String name, String surname, String username, String password, String emailadd) {
    // TODO Auto-generated method stub
    ContentValues cv = new ContentValues();
    cv.put(KEY_UNAME, name);
    cv.put(KEY_USURNAME, surname);
    cv.put(KEY_UUSERNAME, username);
    cv.put(KEY_UPASSWORD, password);
    cv.put(KEY_UEMAILADDRESS, emailadd);
    return Mdatabase.insert(DATABASE_TABLE, null, cv);
}

public String getData() {
    // TODO Auto-generated method stub
    String[] columns = new String[] {KEY_ROWID, KEY_UNAME, KEY_USURNAME, KEY_UUSERNAME, KEY_UPASSWORD, KEY_UEMAILADDRESS};

    Cursor c = Mdatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);

    String result="";
    int iRow = c.getColumnIndex(KEY_ROWID); 
    int iUname = c.getColumnIndex(KEY_UNAME);   
    int iUsurnamne = c.getColumnIndex(KEY_USURNAME);    
    int iUuserpassword = c.getColumnIndex(KEY_UPASSWORD);   
    int iEmailAdd = c.getColumnIndex(KEY_UEMAILADDRESS);    

    for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
        result = result + c.getString(iRow) + " " + c.getString(iUname) + " " + c.getString(iUsurnamne) + " " + c.getString(iUsurnamne) + " " + c.getString(iUuserpassword) + " " + c.getString(iEmailAdd) + "\n";
    }
    return result;
}

 public boolean Login(String username, String password) throws SQLException  
    {  
        Cursor mCursor = Mdatabase.rawQuery("SELECT * FROM " + DATABASE_TABLE + " WHERE username=? AND password=?", new String[]{username,password});  
        if (mCursor != null) {  
            if(mCursor.getCount() > 0)  
            {  
                return true;  
            }  
        }  
     return false;  
    }  

  public Cursor fetchListItems() {

        Cursor cursor1 = Mdatabase.query(DATABASE_TABLE1, new String[] 
                      { KEY_ROWID1, KEY_BANKNAME, KEY_ACCNUM, KEY_BALANCE}, 
                      null, null, null, null, null);

        if (cursor1 != null) {
            cursor1.moveToFirst();
        }
        return cursor1;
    }
  } 
```

事务列表视图.java

```
 public class TransactionListView extends ListActivity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.translistview);
        DatabaseAdapter dbHelper = new DatabaseAdapter(this);
        dbHelper.open();

        // Get a Cursor for the list items
        Cursor listCursor = dbHelper.fetchListItems();
        startManagingCursor(listCursor);

        // set the custom list adapter
        setListAdapter(new MyListAdapter(this, listCursor));
    }

    private class MyListAdapter extends ResourceCursorAdapter {

        public MyListAdapter(Context context, Cursor cursor) {
            super(context, R.layout.list_item_with_description, cursor);
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor1) {

            TextView title = (TextView) view.findViewById(R.id.item_title);
            title.setText(cursor1.getString(
                        cursor1.getColumnIndex(DatabaseAdapter.KEY_BANKNAME)));

            TextView details = (TextView) view.findViewById(R.id.item_details);
            StringBuffer detailsText = new StringBuffer();

            int price = cursor1.getInt(cursor1.getColumnIndex(DatabaseAdapter.KEY_ACCNUM));
            if (price > 0){
                detailsText.append("Rs"+price+".00");
            } else {
                detailsText.append("Price Unavailable");
            }
            String description = cursor1.getString(cursor1.getColumnIndex(
                                                    DatabaseAdapter.KEY_BALANCE));
            if (description != null && description.length() > 0){
                detailsText.append(", "+description);
            }
            details.setText(detailsText.toString());

        }

    }

} 
```

错误：

```
 10-07 16:23:10.437: E/CursorWindow(13987): Bad request for field slot 0,-1\. numRows = 3,        numColumns = 4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:33:12.807

查看您的代码的猜测：

getColumnIndex(DatabaseAdapter.KEY_ACCNUM)

那不是返回您认为的列索引。在您的代码中抛出一条日志语句，然后查看该方法的值是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:14:34.767

首先，提供完整的堆栈，而不仅仅是单行错误。

其次，如果您从字段的名称常量中删除空格，这是一个好的开始。轻轻地在字符串中占用空格是一个坏主意。

# javascript - Json，显示用户名

> ID：12769342
> 
> 赞同：1
> 
> 时间：2012-10-07T13:42:15.173
> 
> 标签：javascript, json, instagram

使用

```
var arrayOfObjects = eval(photo.likes.data);

var objects = arrayOfObjects;
console.log(objects); 
```

我得到下面的代码是 console.log 的回声

**json**

```
[
Object
full_name: "marcab12"
id: "181407552"
profile_picture: "http://images.instagram.com/profiles/profile_181407550_75sq_1339521398.jpg"
username: "marcab12"
__proto__: Object
, 
Object
full_name: "Ramage1992"
id: "21574723"
profile_picture: "http://images.instagram.com/profiles/profile_21574703_75sq_1349343851.jpg"
username: "ramage_1992"
__proto__: Object
] 
```

由于我使用的 javascipt 似乎与 2 个对象相呼应，我如何才能设法在两行上显示用户名。

**编辑**

```
$.each(likesperimage,function(index){
                liked = likesperimage[index].username;
                console.log(photo.id+' - '+liked);
            }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T13:50:06.927

我假设这是一个 json 数组，你想显示这个数组中所有用户的用户名。下面的代码应该可以工作

```
 $.each(arrayOfObjects,function(index)
        {
           console.log(arrayOfObjects[index].username);              

        }); 
```

这是 jquery api [http://api.jquery.com/jQuery.each/中每个的链接](http://api.jquery.com/jQuery.each/)

请在使用之前测试此代码。这只是演示如何完成它，并且可能有更好的方法来做到这一点。

# sql - 1:1 表关系不能插入新行

> ID：12769346
> 
> 赞同：0
> 
> 时间：2012-10-07T13:42:32.110
> 
> 标签：sql, database, sql-server-2008, tsql, stored-procedures

我的数据库中有一个表继承。我有表“ `Item`”和表“ `Something`”。`Item`有`ItemId`哪个是**主键和自动增量**。在表中`Something`我有`ItemId`哪个是**主键（不是自动增量）**。这些表是**1:1**的关系。
所以我试图在这些表中插入数据，但这不起作用：

```
...
DECLARE @itemId int

    INSERT INTO dbo.Items
    (ItemTypeId,UserId,CreatedOnDate,Title,Description)
    VALUES
    (@p_ItemTypeId,@p_UserId,@p_CreatedOnDate,@p_Title,@p_Description)

    SELECT @itemId = SCOPE_IDENTITY()

    INSERT INTO dbo.Something
    (ItemsId)
    VALUES
    (@itemId)
... 
```

这是我得到的错误：

```
The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Items_Somethings". 
```

表创建脚本：

```
CREATE TABLE [dbo].[Items](
    [ItemdId] [int] IDENTITY(1,1) NOT NULL,
    [ItemTypeId] [int] NULL,
    [UserId] [int] NULL,
    [CreatedOnDate] [smalldatetime] NULL,
    [Title] [nvarchar](50) NULL,
    [Description] [nvarchar](max) NULL,

 CONSTRAINT [PK_Items] PRIMARY KEY CLUSTERED 
(
    [ItemId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Items]  WITH CHECK ADD  CONSTRAINT [FK_Items_Somethings] FOREIGN KEY([ItemId])
REFERENCES [dbo].[Somethings] ([ItemId])
GO

ALTER TABLE [dbo].[Items] CHECK CONSTRAINT [FK_Items_Somethings]
GO

CREATE TABLE [dbo].[Somethings](
    [ItemId] [int] NOT NULL,
 CONSTRAINT [PK_Somethings] PRIMARY KEY CLUSTERED 
(
    [ItemId] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:02:35.003

```
ALTER TABLE [dbo].[Items]  WITH CHECK ADD  CONSTRAINT [FK_Items_Somethings] FOREIGN KEY([ItemId])
REFERENCES [dbo].[Somethings] ([ItemId]) 
```

外键方向错误。

您应该将外键添加到 [dbo].[Somethings] 并引用 [dbo].[Items].ItemId 像这样：

```
ALTER TABLE [dbo].[Somethings]  WITH CHECK ADD  CONSTRAINT [FK_Somethings_Items] FOREIGN KEY([ItemId])
REFERENCES [dbo].[Items] ([ItemId]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:23:32.903

In this script, you have inverted the inheritance between the tables. If `Something` table inherits from `Item` table then the `FK` has to be created at Table `Something' like this :

```
ALTER TABLE [dbo].[Somethings]  WITH CHECK ADD  CONSTRAINT [FK_Somethings_Items] FOREIGN KEY([ItemId])
REFERENCES [dbo].[Items] ([ItemId])
GO

ALTER TABLE [dbo].[Somethings] CHECK CONSTRAINT [FK_Somethings_Items]
GO 
```

# perl - Perl 有没有办法报告错误的确切行号

> ID：12769347
> 
> 赞同：2
> 
> 时间：2012-10-07T13:43:05.887
> 
> 标签：perl

以下是会产生错误的代码：

```
#!/usr/bin/env perl
use strict
use warnings FATAL=>'all';

use ExtUtils::Installed;

my $instmod = ExtUtils::Installed->new();

foreach my $module ($instmod->modules())
{
    my $version = $instmod->version($module) || "???";
    print "$module -- $version\n";
    } 
```

只是不要使用“;” 在使用中严格

错误：

```
syntax error at ListModules.pl line 3, near "use strict
use warnings "
Execution of ListModules.pl aborted due to compilation errors. 
```

Perl 版本信息：

```
This is perl 5, version 12, subversion 4 (v5.12.4) built for x86_64-linux-gnu-thread-multi 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T13:50:53.273

简而言之，**没有**。但这并不是那么简单。

语法错误和人为错误是有区别的。您的人为错误是省略了`;`第 2 行末尾的 the，但这导致第 3 行出现语法错误。您的计算机无法知道您打算`;`在第 2 行写 a，这将是反 -让它尝试猜测很有成效。

只有事后诸葛亮——你对你的意图有记忆——你才能看到错误输出和你用眼睛看到的东西之间的差异。

总之，输出*是*正确的；它只是报告与您正在寻找的东西略有不同的东西......而您正在寻找的东西是难以处理的。学习阅读错误消息并将其转化为发现人为错误所需的知识是程序员的一项宝贵技能，它随着实践自然而然地出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T18:19:07.687

第 2 行没有错误。你可以写

```
use strict
   'vars'; 
```

并且可以通过更改您写入的内容来解决问题

```
use strict
;use warnings; 
```

语法错误出现`use`在表达式的中间，发生在第 3 行。

# c# - 通过 C# 自动滚动到 Panel 中的对象

> ID：12769352
> 
> 赞同：1
> 
> 时间：2012-10-07T13:44:19.287
> 
> 标签：c#, telerik, panel, scrollable, autoscroll

在我的应用程序中，通过连接到数据库，按钮添加到**RadScrollablePanel**。在另一个列表中，按钮的名称可用。当用户单击并从列表 2 中选择时，我想选择 RadScrollablePanel 中的按钮。我通过这段代码找到了按钮：

```
System.Windows.Forms.Control[] _controls = MainForm.Controls.Find(PointId.ToString(), true);
foreach (var itemButton in _controls)
{
    if (itemButton.Name == PointId.ToString())
    {
        if (BLL.PropertiesClass.LastFocusedExplorerbarItem != null)
            BLL.PropertiesClass.LastFocusedExplorerbarItem.BackColor = Color.AliceBlue;
        itemButton.BackColor = Color.FromArgb(0x4F, 0x00, 0x60, 0xFF);
        BLL.PropertiesClass.LastFocusedExplorerbarItem = itemButton;
        /* Which Method I Do This*/
        break;
    }
} 
```

我测试`PerformLayout`，`ScrollControlIntoView`但面板不在那里滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:31:57.223

我使用这段代码：

```
itemButton.Focus();
itemButton.Select();
PanelOfEachGroup.ScrollControlIntoView(MainForm.ActiveControl); 
```

# python - Python：改进逐块代码以读取数百万点的建议

> ID：12769353
> 
> 赞同：3
> 
> 时间：2012-10-07T13:44:29.897
> 
> 标签：python, performance, coding-style, matplotlib, chunked-encoding

我写了一个代码来用 Python 读取`*.las`文件。`*las`文件是特殊的 ascii 文件，其中每一行都是`x,y,z`点的值。

我的功能读取`N`。点数并检查它们是否在带有 的多边形内`points_inside_poly`。

我有以下问题：

1.  当我到达文件末尾时，我收到此消息：`LASException: LASError in "LASReader_GetPointAt": point subscript out of range`因为点数低于块维度。我不知道如何解决这个问题。
2.  `a = [file_out.write(c[m]) for m in xrange(len(c))]`我使用`a =`是为了避免视频打印。这是对的吗？
3.  在`c = [chunk[l] for l in index]`我创建一个新列表中`c`，因为我不确定替换一个新块是明智的解决方案（例如：）`chunk = [chunk[l] for l in index]`。
4.  在`if else...else`我使用的声明中`pass`。这是正确的选择吗？

真的很感谢帮忙。重要的是要改进听取专家的建议！！！！

```
import shapefile
import numpy
import numpy as np
from numpy import nonzero
from liblas import file as lasfile
from shapely.geometry import Polygon
from matplotlib.nxutils import points_inside_poly  

# open shapefile (polygon)
sf = shapefile.Reader(poly)
shapes = sf.shapes()
# extract vertices
verts = np.array(shapes[0].points,float)

# open las file
f = lasfile.File(inFile,None,'r') # open LAS
# read "header"
h = f.header

# create a file where store the points
file_out = lasfile.File(outFile,mode='w',header= h)

chunkSize = 100000
for i in xrange(0,len(f), chunkSize):
    chunk = f[i:i+chunkSize]

    x,y = [],[]

    # extraxt x and y value for each points
    for p in xrange(len(chunk)):
        x.append(chunk[p].x)
        y.append(chunk[p].y)

    # zip all points 
    points = np.array(zip(x,y))
    # create an index where are present the points inside the polygon
    index = nonzero(points_inside_poly(points, verts))[0]

    # if index is not empty do this otherwise "pass"
    if len(index) != 0:
        c = [chunk[l] for l in index] #Is It correct to create a new list or i can replace chunck?
        # save points
        a = [file_out.write(c[m]) for m in xrange(len(c))] #use a = in order to avoid video print. Is it correct?
    else:
        pass #Is It correct to use pass?

f.close()
file_out.close() 
```

@Roland Smith 提出并由 Gianni 更改的代码

```
f = lasfile.File(inFile,None,'r') # open LAS
h = f.header
# change the software id to libLAS
h.software_id = "Gianni"
file_out = lasfile.File(outFile,mode='w',header= h)
f.close()
sf = shapefile.Reader(poly) #open shpfile
shapes = sf.shapes()
for i in xrange(len(shapes)):
    verts = np.array(shapes[i].points,float)
    inside_points = [p for p in lasfile.File(inFile,None,'r') if pnpoly(p.x, p.y, verts)]
    for p in inside_points:
        file_out.write(p)
f.close()
file_out.close() 
```

我使用了这些解决方案：1）读取**f = lasfile.File(inFile,None,'r')**并在读取**头**之后，因为我需要在 *.las 输出文件中 2）关闭文件 3）我使用**inside_points = [p for p in lasfile.File(inFile,None,'r') if pnpoly(px, py, verts)]**而不是

```
with lasfile.File(inFile, None, 'r') as f:
...     inside_points = [p for p in f if pnpoly(p.x, p.y, verts)]
... 
```

因为我总是收到这个错误信息

**回溯（最近一次调用）：文件“”，第 1 行，在 AttributeError 中：_*退出*_**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:31:27.737

关于（1）：

首先，为什么要使用块？只需将 lasfile 用作迭代器（如[教程](http://www.liblas.org/tutorial/python.html)中所示），并一次处理一个点。以下应该通过使用[`pnpoly`](http://matplotlib.org/api/nxutils_api.html)列表推导中的函数而不是`points_inside_poly`.

```
from liblas import file as lasfile
import numpy as np
from matplotlib.nxutils import pnpoly

with lasfile.File(inFile, None, 'r') as f:
    inside_points = (p for p in f if pnpoly(p.x, p.y, verts))
    with lasfile.File(outFile,mode='w',header= h) as file_out:
        for p in inside_points:
            file_out.write(p) 
```

上面的五行应该替换整个大`for`循环。让我们一个一个地回顾它们：

*   `with lasfile.File(inFile`...：使用这种结构意味着文件将在`with`块完成时自动关闭。
*   现在是好的部分，完成所有工作的生成器表达式（之间的部分`()`）。它遍历输入文件 ( `for p in f`)。多边形 ( ) 内的每个点都`if pnpoly(p.x, p.y, verts)`被添加到生成器中。
*   `with`我们为输出文件使用另一个块
*   和所有的点（`for p in inside_points`，这是使用发电机）
*   被写入输出文件 ( `file_out.write(p)`)

因为此方法仅将多边形内的点添加到列表中，所以您不会在不需要的点上浪费内存！

如果上面显示的方法不起作用，您应该*只使用块。*使用块时，您应该正确处理异常。例如：

```
from liblas import LASException

chunkSize = 100000
for i in xrange(0,len(f), chunkSize):
    try:
        chunk = f[i:i+chunkSize]
    except LASException:
        rem = len(f)-i
        chunk = f[i:i+rem] 
```

关于（2）：对不起，但我不明白你在这里想要完成什么。“视频打印”是什么意思？

关于（3）：由于您不再使用原始块，您可以重新使用名称。意识到在 python 中，“变量”只是一个[nametag](http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#python-has-names)。

关于（4）：您没有使用`else`，所以完全不使用它。

# visual-studio-2010 - 提交通过 NuGet 添加的库

> ID：12769359
> 
> 赞同：5
> 
> 时间：2012-10-07T13:45:37.290
> 
> 标签：visual-studio-2010, visual-studio, nuget, visualsvn

我有一个 Visual Studio 项目，我已提交给 VisualSVN（通过 Visual Studio 中的`VisualSVN`=>`Commit`菜单）。我通过 NuGet 向这个项目添加了许多库。

我的同事已经下载了我上传到 SVN 的项目（通过`VisualSVN`=> `Get solution from Subversion...`），发现这些库丢失了，他不得不重新下载它们。

几个问题：

1.  这是设计使然吗？还是我没有正确提交我的解决方案？还是我的同事没有将解决方案正确下载到他的机器上？
2.  如果这是设计使然，那么重新添加对从 SVN 服务器下载的解决方案的引用的正确方法是什么？我担心我可能已经添加了一个参考并使用它，并且它可能已经更新，因此每当我的同事通过 NuGet 重新添加相同的参考时，他将获得一个不同的更新版本，并且这会破坏我的程序。这是一个有效的担忧吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T11:21:54.417

是的，这是设计使然。使用 Nuget 的整个概念是您不必在版本控制系统中保留库。

您需要在 Visual Studio 中右键单击您的解决方案并选择`Enable NuGet Package Restore`.

这将配置解决方案以在您进行构建时恢复 NuGet 包（如果有任何丢失或没有）。此外，您为特定项目添加的所有库都将`packages.config`在项目的源目录中创建的条目；例如：

```
<packages>
  <package id="jQuery" version="1.8.3" />
</packages> 
```

这样，NuGet 可以确保每个人都获得相同的版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T15:51:08.817

只需在您的解决方案中启用“Nuget 包恢复”，包将在构建期间自动下载：http: [//docs.nuget.org/docs/workflows/using-nuget-without-committing-packages](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)

# java - Java 作业类构造函数中的错误消息。请帮忙

> ID：12769360
> 
> 赞同：-1
> 
> 时间：2012-10-07T13:45:45.247
> 
> 标签：java, constructor, accessor

我从我的代码中收到以下错误消息，

找不到符号 - 变量 jobName

我们必须创建一个名为 Job 的类，其中包含两个简单的字段 Job name 和 Job length。

我不明白为什么我会收到此错误消息。代码如下。提前感谢您的帮助。

```
import java.util.ArrayList;
public class Job
  {
 // instance variables - replace the example below with your own
 private String name;
 private int duration;
 private boolean isComplete;

/**
 * Constructor for objects of class Job
 */
public Job(String name, int duration)
{
    // initialise instance variables
    jobName = name;
    jobDuration = duration;

}
/**
 * Accessor method for job name. 
 * 
 * @param  y   a sample parameter for a method
 * @return     value of job. 
 */
public String getName() {
    {
        // put your code here
        return jobName;
    }
}

/**
 * Accessor method for job duration.
 * 
 * @param y a sample parameter for a method
 * @return value of job duration.
 * 
 */

public int getDuration() {
    {
        return jobDuration;
    }

}

/**
 * Run method which prints. 
 * 
 * @param y a sample parameter for a method. 
 * @return 
 */

public void run(String name, int duration) {
    if (isComplete) 
    {
        System.out.print("JOB COMPLETE" + jobName);            
    }

 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:47:06.337

而不是`jobName`and `jobDuration`，您需要说`this.name`and `this.duration`，因为这就是这些字段的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T13:47:25.710

您将私有数据成员命名为“name”，但您一直将其称为“jobName”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T13:47:40.437

您的构造函数正在使用一个名为`jobName`and的新变量`jobDuration`，该变量未定义。更正如下：

```
 /**
     * Constructor for objects of class Job
     */
    public Job(String name, int duration){
        // initialise instance variables
        name = name;
        duration = duration;
    } 
```

此外，更好的做法是为参数和成员变量使用不同的名称，或者`this`在成员变量之前使用，例如

```
 /**
     * Constructor for objects of class Job
     */
    public Job(String aName, int aDuration) {
        // initialise instance variables
        name = aName;
        duration = aDuration;
    } 
```

或者

```
 /**
     * Constructor for objects of class Job
     */
    public Job(String name, int duration)   {
        // initialise instance variables
        this.name = name;
        this.duration = duration;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T13:49:20.533

改变这个

```
private String name;
private int duration; 
```

对此：

```
private String jobName;
private int jobDuration; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T13:49:45.243

这是因为您的班级中没有`jobName`变量，我认为您已将其命名为`name`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-07T13:54:03.927

你给了，

```
private String name;
private int duration; 
```

并且您正在使用`jobName, jobDuration`未定义的。请声明这些或使用，

```
this.name = name;
this.duration = duration; 
```

# php - 如何在wordpress中仅获取特色图片的网址

> ID：12769365
> 
> 赞同：4
> 
> 时间：2012-10-07T13:46:38.100
> 
> 标签：php, image, wordpress

我正在使用 timthumb.php 并且需要能够获取帖子的特色图片的 url，当我使用像`the_post_thumbnail`它这样的功能时，它不仅仅是 url。

这是代码，大写字母是我需要插入确切网址的地方，任何帮助都会很棒，谢谢。

```
<a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"> 
    <img src="<?php bloginfo('template_url'); ?>/wp-content/themes/limerickfc/timthumb.php?src=<?php URL OF FEATURED IMAGE ?>&h=760&width=474" alt="" title="<?php the_title(); ?>" />
</a> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-07T13:53:31.303

如果您的“缩略图”图像足够大，可以满足您的需求：

```
<?php wp_get_attachment_url(get_post_thumbnail_id($post->ID)); ?> 
```

否则，您将需要执行以下操作：

```
<?php $src = wp_get_attachment_image_src(get_post_thumbnail_id($post->ID), array(300, 300), false, ''); echo $src[0]; ?> 
```

**编辑：**该`array(300, 300)`位是您要获取的图像大小。WP 将替换它拥有的至少与您要求的一样大的任何图像。您还可以使用`'thumbnail'`、或选择预配置的大小之一`'medium'`，以及模板或插件中定义的任何名称。`'large'``'full'``add_image_size()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T13:52:31.733

## 首先获取特色缩略图的 id：

```
$thumb_id = get_post_meta( $post_id, '_thumbnail_id', true ); 
```

## 一种方法：

```
$thumb = get_post($thumb_id);
$thumb_url = $thumb->guid; 
```

## 另一种方法是：

```
$thumb_url = wp_get_attachment_url( $thumb_id ); 
```

请注意 GUID 中存储的内容以及`get_attachment_url`. 附件 url（取决于配置）可以是附件可访问的页面（不是原始文件 URL，而是使用的页面`attachment.php`）。

# c# - 易于使用的播放器嵌入winforms？

> ID：12769366
> 
> 赞同：0
> 
> 时间：2012-10-07T13:46:40.537
> 
> 标签：c#, winforms, video, media-player

我需要嵌入一个可以播放视频文件并使用字幕（.srt）的播放器。

哪些播放器（具有良好文档）可用于此任务？以及如何设置文件和字幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T20:10:51.860

## 解决方法

添加一个 Windows Media Player COM 对象。

添加计时器

```
private Timer playingTimer = new Timer();
public Main()
{
    InitializeComponent();

    playingTimer.Enabled = false;
    playingTimer.Tick += renderSubtitles;
} 
```

处理 StatusChange 以了解它何时开始播放

```
private void Main_Load(object sender, EventArgs e)
{
    player.StatusChange += player_StatusChange;
} 
```

播放时激活计时器

```
void player_StatusChange(object sender, EventArgs e)
{
    if (player.playState == WMPLib.WMPPlayState.wmppsPlaying)
    {
        playingTimer.Enabled = true;
    }
    else
    {
        playingTimer.Enabled = false;
    }
} 
```

从 获取当前秒数`player.Ctlcontrols.currentPosition`，如果找到字幕使标签可见，则设置文本并水平居中。如果没有任何字幕，请隐藏标签。

```
private void renderSubtitles(object sender, EventArgs e)
{
    var ts = TimeSpan.FromSeconds(player.Ctlcontrols.currentPosition);
    var entry = entries.FirstOrDefault(o => o.Start <= ts && o.End >= ts);

    if (entry != null)
    {
        subtitle.Visible = true;
        subtitle.Text = entry.Text;

        var w = splitContainer.Panel1.Width;
        subtitle.Location = new Point(w / 2 - subtitle.Width / 2, subtitle.Location.Y);
    }
    else
    {
        subtitle.Visible = false;
    }
} 
```

# iphone - iPhone / 如何创建类似 facebook 的应用程序？

> ID：12769371
> 
> 赞同：1
> 
> 时间：2012-10-07T13:47:31.823
> 
> 标签：iphone, facebook, menu, facebook-like

我想创建一个类似 Facebook 的应用程序，菜单如下：http: [//i.stack.imgur.com/yCyzF.png](http://i.stack.imgur.com/yCyzF.png)

**iOS 6 SDK 有简单的解决方案吗？** *PS.：它只适用于 iPhone（不是 iPad），我不需要搜索栏。*

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:18:14.837

你可以试试 ZUUIRevealController。[这](https://github.com/pkluz/ZUUIRevealController)是 GitHub 的链接，[这里](http://www.youtube.com/watch?v=nDYHFMYoDcU)是 Youtube 上的简单教程。

# c# - 如何在单个项目中从 C# 中的多个配置文件中读取值？

> ID：12769373
> 
> 赞同：12
> 
> 时间：2012-10-07T13:48:13.170
> 
> 标签：c#, app-config, configuration-files, config, configurationmanager

在我的项目中，我有两个名为`app.config`和的应用程序配置文件`accessLevel.config`。现在使用`OpenExeConfiguration`我可以访问`app.config.exe file`但不能访问`accessLevel.config`. 请帮助解决这个问题。

我有 2 个配置文件的主要原因是显示差异并使代码简单。我需要从`accessLevel.config`我的`C#`代码中读取值。

尝试了以下代码但没有用：

```
System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); 
config.AppSettings.File = "App2.config"; 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-07T13:56:10.410

见[这里](https://stackoverflow.com/questions/3638163/how-to-include-a-config-file-for-net)。

把它放在你的`App.config`：

```
<appSettings file="accessLevel.config"/> 
```

然后有另一个文件，`accessLevel.config`如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<appSettings>
  <add key="TestSetting" value="TestValue"/>
</appSettings> 
```

然后你可以在这样的代码中访问你的配置值：

```
string value = ConfigurationManager.AppSettings["TestSetting"]; 
```

确保将`accessLevel.config`其设置为复制到输出目录（右键单击 Visual Studio 中的文件 -> 属性 -> 复制到输出目录 -> 如果较新则复制）。

# hadoop - 机架本地地图任务和数据本地地图任务有什么区别？

> ID：12769376
> 
> 赞同：7
> 
> 时间：2012-10-07T13:49:08.257
> 
> 标签：hadoop, mapreduce, hadoop-streaming

当我运行“hadoop job -status xxx”时，输出以下一些列表。

```
Rack-local map tasks=124
Data-local map tasks=6 
```

机架本地地图任务和数据本地地图任务有什么区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T15:55:07.120

在数据本地任务中，不需要复制任何内容。这是因为该块与计算一样在物理上位于同一台服务器上。

下一层是机架本地任务，这里必须复制数据，因为没有可用的所需块的本地副本。请注意， rack-local 仅在网络的 rack-local 交换内复制。

还有最坏的情况，数据在本地不可用，也不在同一个机架上。因此，这必须通过两个交换机复制到运行计算的主机。我不知道是否有一个柜台，但基本上这必须是`#all tasks - #data-local tasks - #rack-local tasks`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T21:51:03.307

我要指出的是，在同一机架内的计算机之间提供千兆（或更快）网络比为更多数量的计算机提供便宜得多。
根本原因是以太网交换机不可扩展，我们无法以合理的价格为数百个端口提供这样的交换机。
因为它 hadoop 尝试至少在同一个机架上运行任务，如果不能在存储数据的节点上执行它。

# c# - XNA 与 Winforms 鼠标坐标不正确，直到窗口调整大小

> ID：12769380
> 
> 赞同：0
> 
> 时间：2012-10-07T13:49:33.933
> 
> 标签：c#, winforms, event-handling, xna, mouse

好吧，我的程序有问题。我将 XNA 客户端嵌入到 Winforms 应用程序中，并且使用鼠标事件处理程序来处理控件。但是，我遇到了一个相当奇怪的问题。当我第一次打开我的客户端时，鼠标点击会在远离鼠标本身的地方注册（事实上，这似乎与鼠标所在的 Y 轴成正比。也就是说，如果鼠标位于 y-坐标 0，但在 y 坐标 500 处非常远）。我可以通过找到偏移方程并应用它来解决这个问题，但这还不够，因为当我调整窗口大小时，无论调整多少，偏移都会消失并且一切都按预期工作，即使我将窗口返回到它的原始大小。

为了获取鼠标坐标，我从传递给事件处理程序的 MouseEventArgs 中获取值。我不知道为什么会发生这种情况。如果有人知道，如果他们能给我一个提示，我将不胜感激。

# text-files - 加载一个包含数字和字母的文本文件 2

> ID：12769381
> 
> 赞同：0
> 
> 时间：2012-10-07T13:49:43.763
> 
> 标签：text-files, octave

这个问题与[加载包含数字和字母的文本文件](https://stackoverflow.com/questions/8198428/load-a-text-file-containing-both-numbers-and-letters)有关，但我要求相反

```
blabla<tab>1
blabla<tab>2
... 
```

在这种情况下我还需要 fscanf 吗？

编辑：提到接缝的问题的答案是将单个字符视为cols。就我而言，我有不同长度的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T17:29:50.380

我找到了 textread 功能。它解决了这个问题。

# java - 二进制字符串转十进制函数

> ID：12769384
> 
> 赞同：3
> 
> 时间：2012-10-07T13:49:53.900
> 
> 标签：java, binary

我已经使用十进制数转换为二进制数

```
int k=8;
String toBinaryString = Integer.toBinaryString(k); 
```

经过一些操作后，我想要返回 int 值。任何人都可以帮助我使用该功能还是我必须仅使用循环来转换它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T13:53:50.503

您可以使用：

```
int originalValue = Integer.parseInt(toBinaryString , 2)); 
```

# algorithm - 如何计算多个重叠长方体的总体积

> ID：12769386
> 
> 赞同：5
> 
> 时间：2012-10-07T13:49:56.600
> 
> 标签：algorithm

我有一个长方体列表，由它们的左下角和右上角的坐标定义，边缘平行于轴。坐标是双精度值。这些长方体密集排列，会与一个或多个其他方体重叠，甚至完全包含其他方体。

我需要计算所有给定长方体所包含的总体积。重叠（甚至多次）的区域应该只计算一次。

例如，卷：

1.  ((0,0,0) (3,3,3))
2.  ((0,1,0) (2,2,4))
3.  ((1,0,1) (2,5,2))
4.  ((6,6,6) (8,8,8))

总体积为 27 + 1 + 2 + 8 = 38。有没有简单的方法可以做到这一点（在 O(n^3) 时间内或更好？）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T17:30:03.960

在处理每个长方体时维护一组不相交的长方体怎么样？

此集合将开始为空。

第一个长方体将被添加到集合中——它将是唯一的元素，因此保证不会与其他任何元素相交。

第二个和后续的长方体将根据集合中的元素进行检查。对于每个新的长方体*N*，对于集合中已经存在的每个元素*E*：

*   如果*N*完全被*E*包含，则丢弃*N*并在下一个新的长方体处继续处理。
*   如果*N*完全包含*E*，则从集合中删除*E*并继续针对集合中的其他元素测试*N 。*
*   如果*N与**E*相交，则将*N*分成最多五个（参见下面的评论）较小的长方体（取决于它们如何相交），代表不相交的体积，并继续针对集合中的其他元素测试这些较小的长方体。

*如果我们对具有从N*生成的一个或多个长方体的非相交元素进行测试结束（表示*N*贡献的不在任何先前长方体中的体积），则将它们全部添加到集合并处理下一个长方体。

处理完所有长方体后，总体积将是已建立的非相交长方体集合中的体积之和。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T16:48:37.247

这可以使用平面扫描算法有效地解决，这是[此处](https://stackoverflow.com/questions/244452/what-is-an-efficient-algorithm-to-find-area-of-overlapping-rectangles)建议的线扫描算法的直接扩展，用于查找重叠矩形的总面积。

对于每个长方体，在事件队列中添加它的左右 x 坐标并对队列进行排序。现在通过长方体扫描一个 yz 平面（具有恒定的 x 值）并记录事件队列中任意两个连续事件之间的体积。我们通过维护在任何阶段与平面相交的矩形列表来做到这一点

当我们扫描飞机时，我们会遇到两种类型的事件：

(1) 我们看到新长方体开始与扫掠平面相交。在这种情况下，一个新的矩形与平面相交，我们更新与扫描平面相交的矩形面积。

(2) 与平面相交的现有长方体的末端。在这种情况下，我们必须从当前与平面相交的矩形列表中删除相应的矩形，并更新生成的矩形的新区域。

任意两个连续事件 q [i]和 q [i+1]之间的长方体的体积等于两个事件之间的水平距离**乘以在 q** [i]处与扫描线相交的矩形面积。

通过使用 O(nlogn)[算法](https://stackoverflow.com/questions/244452/what-is-an-efficient-algorithm-to-find-area-of-overlapping-rectangles)计算矩形面积作为子程序，我们可以得到一个 O(n ² logn) 算法来计算长方体的总体积。但是可能有更好的方法来维护矩形（因为我们只在任何阶段添加或删除一个矩形）更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-16T11:33:46.773

我最近遇到了同样的问题，发现以下方法易于实现并且适用于*n*维。

首先建立一个网格，然后检查网格中的每个单元格是否与长方体重叠。重叠长方体的体积是包含在一个或多个长方体中的那些单元的体积之和。

*   用每个维度的最小值/最大值来描述你的长方体。
*   对于每个维度，将每个长方体的最小/最大值存储在一个数组中。对该数组进行排序并删除重复项。
*   现在你有一个非等距网格的网格点。网格的每个单元格要么完全在一个或多个长方体内，要么不在。
*   遍历网格单元并计算与一个或多个长方体重叠的那些单元的体积。

您可以使用[笛卡尔积](https://en.wikipedia.org/wiki/Cartesian_product)获取所有网格单元。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-31T15:55:57.750

我尝试了@ccssmnn 建议的蜂窝方法；它起作用了，但是太慢了。问题是用于“对于每个维度存储数组中每个长方体的最小/最大值”的数组大小。是`O(n)`，因此单元格的数量（因此，执行时间）是`n^d`，例如，`n^3`对于三个维度。

接下来，按照@krjampani 的建议，我尝试了嵌套扫描线算法；快得多，但仍然太慢。我相信复杂性是`n^2*log^3(n)`.

所以现在，我想知道是否有任何追索权。我读过几篇提到使用`interval trees`or的帖子`augmented interval trees`；这种方法可能具有更好的复杂性，例如，`n*log^3(n)`？

另外，我试图弄清楚在这种情况下增加的价值是多少？在点或范围查询的情况下，我可以看到长方体按它们排序`(xlo,ylo,zlo)`并使用`max(xhi,yhi,zhi)`每个子树作为增广值，但无法弄清楚如何扩展它以跟踪长方体的联合及其体积。

# ios - 自定义 UIPopover 在 iOS 6 上有奇怪的阴影

> ID：12769392
> 
> 赞同：2
> 
> 时间：2012-10-07T13:50:06.900
> 
> 标签：ios, ipad, uikit, uipopovercontroller, uipopover

我正在使用`UIPopoverBackgroundView`该类来显示自定义`UIPopover`.

事情就是这样。**在 iOS 5 上，弹出框的显示不会在弹出框后面留下**任何阴影。然而，在 iOS 6 中，popover 会掉落一个非常奇怪的阴影，它并不完全适合 popover：

![ios 5 弹出框](../Images/3ef6a15dce2183d28c858939d6331dda.png)

![ios 6 弹出框](../Images/e6f7f92b2b8a2c408f82a27940cc3453.png)

无论如何我可以控制这种行为以在两个版本上达到一致的外观吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T23:11:42.930

为了在 iOS 6 上移除阴影，并为您的弹出框添加自定义阴影：

1）通过覆盖删除阴影`layoutSubviews`

```
- (void)layoutSubviews {
    // remove shadow (iOS 6)
} 
```

2) 在 BG 视图中添加阴影属性

```
_borderView.layer.shadowColor = [UIColor blackColor].CGColor;
_borderView.layer.shadowOpacity = 1.f;
_borderView.layer.shadowRadius = 15;
_borderView.layer.shadowOffset = CGSizeMake(0.0f, 0.0f);

_borderView.layer.shouldRasterize = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:56:06.040

您可以在 UIPopoverBackgroundView 图层上手动设置阴影偏移：

```
self.layer.shadowOffset = CGSizeMake(_leftOffset, 0); 
```

编辑：换句话说，影子是对的，只是在错误的地方。

# sql - 以连续的形式引用正确的信息

> ID：12769404
> 
> 赞同：0
> 
> 时间：2012-10-07T13:51:41.127
> 
> 标签：sql, database, vba, ms-access

我在连续表格的每条记录的末尾都有一个按钮，它需要这样做：

```
Private Sub Update_Click()

Dim SellP As Double
Dim BuyP As Double
Dim Profit As Double

SellP = DLookup(SellPrice, Flips, [Current])
BuyP = DLookup(BuyPrice, Flips, [Current])

Profit = SellP - BuyP

Flips.Profit = Profit

End Sub 
```

现在我知道这不是正确的代码，但我希望它能让您了解它需要做什么，基本上：

找到 SalePrice，找到 BuyPrice，从 SalePrice 中减去 BuyPrice 并得到结果 Profit，然后用利润填充 Profit 字段。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:07:54.347

绑定表/查询的当前记录的列在代码中直接可用。例如，如果这些字段都是绑定数据的一部分，
您可以只写 。 然后，您可以将这段代码移动到 SalePrice 和 BuyPrice 文本字段的“AfterUpdate”事件中，可能像这样： `Profit = SalePrice - BuyPrice`

```
If IsNull(salePrice) Or IsNull(buyPrice) Then
    Profit = 0
Else
    Profit = salePrice - buyPrice
End If 
```

# java - 在java中用rest返回实现的类型

> ID：12769407
> 
> 赞同：1
> 
> 时间：2012-10-07T13:52:13.790
> 
> 标签：java, xml, rest, inheritance, jax-rs

我想知道是否可以强制java中的rest框架返回某个类的实际实现，而不是只在抽象类中可见的信息。

所以我有一个看起来像的方法

```
@GET
@Path("/}")
public Model getModel() {
    return (Car) system.getCar();
} 
```

所以我希望当有人走这条路时，返回的是关于 CAR 的信息，而不仅仅是模型中包含的信息。是否可以通过一些注释来强制这种行为？

PS上面的例子只是为了演示。实际原因是我有一个具有抽象类参数的类，我想查看 xml 中有关具体实现的信息，以便知道它是什么类型。

感谢您的帮助。

干杯

编辑

说实话，我不知道实施是什么。但也许这篇关于我使用的文章可以帮助你[http://docs.codehaus.org/display/TYNAMO/tapestry-resteasy+guide](http://docs.codehaus.org/display/TYNAMO/tapestry-resteasy+guide)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:02:12.567

我在我的 REST 项目中对此进行了测试，它无需任何额外工作即可工作。我正在使用 RestEasy 框架来实现[REST](http://www.jboss.org/resteasy) Web 服务。我检查了 XML 和 JSON 数据类型。对于 JSON 序列化，我使用的是[jackson](http://jackson.codehaus.org/)库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:03:43.043

REST 实现将类的实际具体实例（不是抽象类，因为无论如何您都不能拥有抽象类的实例）序列化为请求的内容类型，例如 JSON 或 XML。被序列化的是基于它们的映射的域对象的字段。您可以控制域对象的哪些字段被序列化，或者您可以创建一个自定义 POJO，其中仅包含您希望在响应中发送的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T20:33:02.000

它不适用于我的 JSON（使用 JACKSON），我认为它确实**不应该工作**。如果您的 API 提供了 a`Model`那么它不应该返回`Car`字段。API 的执行程序可能无法解析返回的`Car`字段，因为预期的`Model`.
这将是一种向上转换，通常显示出糟糕的设计。*恕我直言*。
不过我喜欢这个问题:)

# java - 在循环中使用线程，如何在到达主程序末尾之前完成 for 循环？

> ID：12769408
> 
> 赞同：0
> 
> 时间：2012-10-07T13:52:24.047
> 
> 标签：java, multithreading

我的预期输出是

```
Count : 1
Count : 2
Count : 3
Count : 4
Count : 5 
```

我尝试过同步和锁定，但它们都不起作用。我到达

> 结束主要

在我完全完成循环之前。当前输出为：

```
Starting Main
Count : 1
Count : 2
Count : 3
Count : 4
Ending Main
Count : 5 
```

知道为什么 Count : 5 在 Ending Main 之后吗？这是我的代码：

```
public class Demo {
    public static void main( String [] args ) {
        System.out.println( "Starting Main" ) ;
        for ( int i = 1 ; i <= 5 ; i++ ) {
            Thread numberThread = new Thread(new NumberTask(i)) ;
            numberThread.start() ;
        }
        System.out.println( "Ending Main" ) ; 
    }
}

class NumberTask implements Runnable {
    private Lock bankLock = new ReentrantLock();
    int count ;
    public NumberTask( int count ) {
        this.count = count ;
    }

    synchronized public void run() {
        bankLock.lock();
        try {
            System.out.println( "Count : " + count ) ;
        } finally {
            bankLock.unlock();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:54:41.157

> 知道为什么“计数：5”在“结束主要”之后吗？

当一个线程启动时，不能保证它立即开始运行。派生新线程的线程在新线程初始化时继续运行是正常的。所以，在主线程启动第 5 个线程后，它继续运行并击败线程到`System.out.println("Ending Main");`语句。

重要的是要意识到线程的全部意义在于它们以异步方式运行。因为线程可以在不同的 CPU/内核上调度并发运行，所以通常很难预测线程程序中的操作顺序。例如。[由于线程竞争条件](http://en.wikipedia.org/wiki/Race_condition#Computing)，您也可能会在“Count 1”*之前*看到“Count 2”打印。我刚从 500 个线程开始运行它，我看到：

```
Count : 128
Count : 130
Count : 129
Count : 131 
```

此外，由于您`bankLock`是类的本地对象`NumberTask`，因此它不会在线程*之间锁定。*您可以将锁设为静态以使*每个类*`NumberTask`有一个锁，或者您可以在 main 中实例化锁并将其传递给构造函数。你真的不需要这里的锁，因为它是一个对象。方法也是如此。由于您将在实例上同步，因此它不会做任何事情，因为没有其他线程将在同一个对象上同步。*`NumberTask``System.out``PrintStram``synchronized``synchronized` `run()``NumberTask`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:07:56.513

线程的执行是不可预测的，所以你会得到这种行为。使用[join()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)方法使一个线程的执行到另一个线程的执行结束。

请阅读[Java线程不可预知](https://stackoverflow.com/questions/7915337/java-thread-unpredictable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T14:09:12.363

您可以使用 join() 等待其他线程完成。您的代码需要更新如下：

```
public static void main( String [] args ) {

    System.out.println( "Starting Main" ) ;
        Thread numberThread;
        for ( int i = 1 ; i <= 5 ; i++ ) {
            numberThread = new Thread(new NumberTask(i)) ;
            numberThread.start() ;
        }
        numberThread.join();
        System.out.println( "Ending Main" ) ; 
    } 
```*

# c++ - 用渐变画圆有问题

> ID：12769409
> 
> 赞同：0
> 
> 时间：2012-10-07T13:52:29.343
> 
> 标签：c++, visual-studio-2010, opengl

我正在使用`ofSetColor(5, 239, 227);`. 它只在圆圈中绘制一种颜色。我想在圆圈中绘制渐变颜色。我试图使用 openGL 源代码。

```
glPushMatrix();
glColor3f ( 1.0f,  0.0f, 0.0f);
glVertex3f( 0.0f,  1.0f, 0.0f); 
glColor3f ( 0.0f,  1.0f, 0.0f); 
glVertex3f(-1.0f, -1.0f, 0.0f); 
glColor3f ( 0.0f,  0.0f, 1.0f); 
glVertex3f( 1.0f, -1.0f, 0.0f); 
glPopMatrix(); 
```

但它不起作用。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:58:17.250

我不知道你在哪里`glBegin/glEnd`，但你不能在开始/结束块内调用推送/弹出矩阵，它必须在它之外。

# android - Heroku 服务器上传

> ID：12769411
> 
> 赞同：0
> 
> 时间：2012-10-07T13:53:06.937
> 
> 标签：android, heroku, uploading

大家好，可以通过 android 将数据（图像、视频、文本）上传到 heroku 服务器。我正在为 android 创建一个应用程序，我想在其中添加将数据上传到 heroku 的功能。可能吗？？？如果是，那么我该怎么做。请提供一些可以帮助我的材料。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T00:57:50.067

Heroku 是只读的。[您的应用程序将需要使用Cloudinary](http://cloudinary.com)等第三方服务或使用 Amazon 的 S3 服务等 CDN。

有关 Heroku 文件系统的更多信息，请访问 [https://devcenter.heroku.com/articles/read-only-filesystem](https://devcenter.heroku.com/articles/read-only-filesystem)

# android - R.java 生成问题

> ID：12769412
> 
> 赞同：3
> 
> 时间：2012-10-07T13:53:09.637
> 
> 标签：android, r.java-file

我尝试创建新项目，在我的 R.java 中有下一个代码，例如：

```
public static final class layout {
public static int activity_main=0x7f030000; 
```

代替

```
public static final class layout {
public static final int activity_main=0x7f030000; 
```

所以我无法正常构建项目，因为它会生成**public static int**而没有**final**。

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T13:57:02.103

右键单击项目-> Android工具->修复项目属性

在执行此操作之前删除导入语句，例如

```
import android.R.*.. 
```

或尝试从

项目 --> 清洁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:36:39.187

这可能是因为很多事情。1\. 检查您的 xml 文件中是否有错误，因为这会阻止 R.Java 自动生成。2\. 清理你的项目。这将重建您的项目。3\. 删除任何 android.R import 语句。4.关闭并重新打开eclipse。

我也不建议摆弄 R.Java 文件 dirctley。

# mysql - 在 MySQL 结果集中包含一个额外的计数器

> ID：12769415
> 
> 赞同：4
> 
> 时间：2012-10-07T13:53:30.817
> 
> 标签：mysql, counter, calculated-columns

我可以在 MySQL 结果集中包含一个额外的计数器吗？我有以下查询，它给了我两列。我需要一个额外的列（仅在结果中），指示结果集中每一行的行。

```
select orderid, round(sum(unitprice * quantity),2) as value
from order_details
group by orderid
order by 2 desc
limit 10 
```

我需要以下内容：

```
10865 1 17250.00
11030 2 16321.90
10981 3 15810.00
10372 4 12281.20
10424 5 11493.20 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-07T13:55:32.457

尝试这个：

```
SET @counter = 0; 
Select sub.*
FROM
(
    select orderid, (@counter := @counter +1) as counter,
      round(sum(unitprice * quantity),2) as value
    from order_details
    group by orderid
) sub
order by 2 desc 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T13:55:47.643

尝试关注

```
SET @counter = 0;
select orderid, (@counter:= @counter + 1) as counter, round(sum(unitprice * quantity),2) as value
from order_details
group by orderid
order by 3 desc
limit 10 
```

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T20:16:39.703

基于这两个答案，我设法得到以下信息：

```
SET @counter = 0; 

Select sub.orderid,sub.value,(@counter := @counter +1) as counter
FROM
(
    select orderid, 
      round(sum(unitprice * quantity),2) as value
    from order_details
    group by orderid
) sub
order by 2 desc
limit 10 
```

原始答案显示来自内部查询的 ID 导致更大的整数和巨大的差距。使用修改，我得到了我的 pgfplots LaTeX 绘图所需的“1 到 x”范围。

# scala - Scala，如何在一行中读取多个整数并将它们分别放入一个变量中？

> ID：12769425
> 
> 赞同：10
> 
> 时间：2012-10-07T13:54:54.613
> 
> 标签：scala, io, integer

这是我的代码：

```
object theater extends App {

    val m = readInt
    val n = readInt
    val a = readInt

    val c1 = m/a + (if(m%a == 0) 0 else 1)
    val c2 = n/a + (if(n%a == 0) 0 else 1)
    print(c1 + c2)
} 
```

但是输入格式是：3个整数在同一行。但是对于一行中的 3 个整数，scala 会将其视为一个字符串。如何读取该字符串并获取 3 个分隔变量中的 3 个值？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-07T14:05:00.993

您可以使用以下代码读取一行并使用前 3 个空格分隔的标记作为输入。（期望例如“1 2 3”作为一行的输入）

```
val Array(m,n,d) = readLine.split(" ").map(_.toInt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T10:35:40.667

您可以在 scala 程序中使用 Java.util.Scanner。这支持在 java 中可用的 Scanner 的功能

```
import java.util.Scanner;
object Addition{
 def main(args: Array[String]){
  var scanner = new Scanner(System.in); //defining scanner object
  println("Enter two numbers : ");
  var a = scanner.nextInt();            //reading space separated input
  var b = scanner.nextInt();
  println("The result is : "+(a+b));
 }
} 
```

# c# - IEnumerator：集合已修改；枚举操作可能无法执行

> ID：12769427
> 
> 赞同：-2
> 
> 时间：2012-10-07T13:55:05.583
> 
> 标签：c#

代码：

```
public List<Interfaces.Test> IJ_;
IEnumerator<Interfaces.Test> Ij_ = Objects.GetEnumerator();
int count = IJ_.Count;
Ij_.MoveNext();
for (int x = 0; x < count; x++)
{
    if (x >= count)
        break;
    Test MyBase = IJ_.Current;
    if (MyBase == null)
        obj_.MoveNext(); //here the error
} 
```

错误：

```
System.InvalidOperationException: Collection was modified; enumeration operation may not execute.
at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)
at System.Collections.Generic.List`1.Enumerator.MoveNextRare()
at System.Collections.Generic.List`1.Enumerator.MoveNext() 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:02:05.057

枚举时锁定集合或对集合进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:16:07.147

正如错误所说，在迭代期间修改了集合，这是非法操作。

无论哪种方式，使用枚举器进行迭代的正确方法是：

```
var Ij_ = Objects.GetEnumerator();

while (Ij.MoveNext())
{
    Test MyBase = IJ_.Current;

    // I understood that you want to skip null elements, so...
    if (MyBase == null)
    {
        continue;
    }

    // ...
} 
```

您应该确保在迭代期间不添加、删除或设置集合中的项目（不在循环中，也不在不同的线程中）。允许更改元素的内部状态。

如果枚举器是您的实现，并且在确保迭代期间未修改集合之后仍然发生错误，那么发布枚举器的代码也可能会有所帮助。

# javascript - 为什么 {key:'value'} 在控制台中打印“value”

> ID：12769428
> 
> 赞同：2
> 
> 时间：2012-10-07T13:55:23.977
> 
> 标签：javascript, console

在我测试时，我看到了控制台（Chrome）的行为。如果我输入的是我所期望的`console.log({key:'value'})`打印 。`Object {key: "value"}`但是当我直接`{key:'value'}`在控制台中输入时，它`'value'`只会在我期望的时候打印`Object {key: "value"}`。

在 IE10 和 FF 中看到了相同的行为。这种行为背后的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T13:56:59.593

这是因为您的对象被解释为一个块语句，其中包含一个由标签前面的字符串文字组成的单个语句。

```
//  v---block----v
    {key: "value"}
//    ^--label 
```

为了让控制台将其解释为对象文字语法，它必须是表达式的一部分。如果你用括号括起来，你会得到预期的结果。

```
({key:"value"}) 
```

* * *

*边注：*

这是真正奇怪的部分。语句是语句，因为它不*返回*任何内容。那么它为什么会返回`"value"`呢？

在 JavaScript 中，语句具有类似于最终值的东西。*（我不记得它的确切名称。）*它不是程序代码中有用或可访问的任何东西，但是当评估程序时，最终值将返回给评估它的任何东西。

`eval()`用于评估程序时也是如此。它的最终语句值将被返回。由于控制台中的代码是`eval`'d，因此它会获取最终值并打印它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T13:57:06.450

那是因为您键入的内容已被解释。

`{key:'value'}`是一个块并返回“值”。你会得到与 just 相同的结果`key:'value'`or `'value'`。

如果您想要一个返回对象的表达式，请键入`({key:'value'})`.

# android - 在 Android 上为画布路径绘制动画

> ID：12769431
> 
> 赞同：8
> 
> 时间：2012-10-07T13:55:42.567
> 
> 标签：android, graphics, canvas

我想为路径的绘制设置动画，即让它逐渐出现在屏幕上。我正在使用画布，到目前为止我最好的猜测是使用 ObjectAnimator 来处理动画。但是，我无法弄清楚如何在 onDraw() 方法中实际绘制路径的相应段。有没有一种方法可以做到这一点？我需要为此涉及路径效果吗？

**编辑：**使用 DashPathEffect 并在动画中设置其“开”和“关”间隔以覆盖我们要为该步骤绘制的路径部分似乎在这里工作，但它需要为每个步骤分配一个新的 DashPathEffect动画。如果有更好的方法，我会留下这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-14T08:25:41.447

回答我自己的问题，因为我想出了一个令人满意的方法来做到这一点。

诀窍是使用 an`ObjectAnimator`来逐步改变当前笔画的长度，并使用 a`DashPathEffect`来控制当前笔画的长度。将`DashPathEffect`其 dashes 参数最初设置为以下内容：

```
float[] dashes = { 0.0f, Float.MAX_VALUE }; 
```

第一个浮动是可见笔划的长度，第二个是不可见部分的长度。第二长度选择得非常高。因此，初始设置对应于完全不可见的笔划。

然后每次对象动画器更新笔画长度值时，`DashPathEffect`都会使用新的可见部分创建一个新的并设置为 Painter 对象，并且视图无效：

```
dashes[0] = newValue;
mPaint.setPathEffect(new DashPathEffect(dashes, 0));
invalidate(); 
```

最后，onDraw() 方法使用这个painter来绘制路径，它只包含我们想要的部分：

```
canvas.drawPath(path, mPaint); 
```

我看到的唯一缺点是我们必须在每个动画步骤中创建一个新的 DashPathEffect（因为它们不能重复使用），但总体而言这是令人满意的 - 动画很好而且流畅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-24T21:29:29.240

```
package com.nexoslav.dashlineanimatedcanvasdemo;

import android.animation.ValueAnimator;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.DashPathEffect;
import android.graphics.Paint;
import android.graphics.Path;
import android.util.AttributeSet;
import android.util.Log;
import android.view.View;
import android.view.animation.LinearInterpolator;

import androidx.annotation.Nullable;

public class CustomView extends View {
    float[] dashes = {30, 20};
    Paint mPaint;
    private Path mPath;

    private void init() {

        mPaint = new Paint();
        mPaint.setColor(Color.BLACK);
        mPaint.setStrokeWidth(10f);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setPathEffect(new DashPathEffect(dashes, 0));

        mPath = new Path();
        mPath.moveTo(200, 200);
        mPath.lineTo(300, 100);
        mPath.lineTo(400, 400);
        mPath.lineTo(1000, 200);
        mPath.lineTo(1000, 1000);
        mPath.lineTo(200, 400);

        ValueAnimator animation = ValueAnimator.ofInt(0, 100);
        animation.setInterpolator(new LinearInterpolator());
        animation.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {
            @Override
            public void onAnimationUpdate(ValueAnimator valueAnimator) {
                Log.d("bla", "bla: " + valueAnimator.getAnimatedValue());
                mPaint.setPathEffect(new DashPathEffect(dashes, (Integer) valueAnimator.getAnimatedValue()));
                invalidate();
            }
        });
        animation.setDuration(1000);
        animation.setRepeatMode(ValueAnimator.RESTART);
        animation.setRepeatCount(ValueAnimator.INFINITE);
        animation.start();
    }

    public CustomView(Context context) {
        super(context);
        init();
    }

    public CustomView(Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public CustomView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        init();
    }

    public CustomView(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
        init();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.drawPath(mPath, mPaint);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T14:54:35.990

据我所知，唯一的方法是从一个空路径开始，并有一个可运行的，以定义的间隔将点附加到路径，直到它完成。

# ruby-on-rails - 在 Rails 中为单个请求禁用捆绑资产

> ID：12769436
> 
> 赞同：2
> 
> 时间：2012-10-07T13:56:00.977
> 
> 标签：ruby-on-rails, sprockets

因为`rack-mini-profiler`我想添加一个特殊的诊断选项，允许您在生产中查看“扩展的”css 和 js 资产。

因此，如果用户输入，`http://somesite.com/?pp=expand_assets`我们会通知 sprockets 以某种方式回退到为这个特定请求提供未压缩和未捆绑的资产。其余的请求应该不受影响。

我怎么会有这样的事情发生？我需要猴子补丁，还是有内置的钩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:21:44.783

阅读 Sprockets 代码，看起来[Rails 助手](https://github.com/rails/sprockets-rails/blob/master/lib/sprockets/rails/helpers/rails_helper.rb#L84)内置了这个：

1.  `config.assets.compile = true`通过在环境的配置文件中进行设置来启用后备资产编译。
2.  将参数添加`debug_assets=true`到任何请求。

# php - 按 id 和 parent_id 删除

> ID：12769457
> 
> 赞同：1
> 
> 时间：2012-10-07T13:59:39.437
> 
> 标签：php, mysql, sql-delete

我有一个看起来与此类似的表：

```
rule_id    parent_id
1          0
2          0
3          2
4          2
5          3 
```

当我使用 DELETE 查询并删除假设**id 2**时，我想删除以**parent_id**作为该 id 的行。

删除成功后，表格应如下所示：

```
rule_id    parent_id
1          0
5          3 
```

所以所有有**2**的东西现在都没有了。

我已经尝试过了，我确信它会起作用，但它没有。

```
$sql = 'DELETE FROM ' . RULES_TABLE .   
    ' WHERE rule_id = ' . (int) $rule_id . 
        (($type == 'cat') ? ' AND parent_id = ' . (int) $rule_id : ''); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:07:58.277

可能很傻，但你为什么不直接使用来自 INNODB 的旧的良好参照完整性呢？

`(rule_id, parent_id)`使用子句设置自反外引用键`ON DELETE CASCADE`可以轻松解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:03:00.987

您需要在 where 子句中使用“或”。

```
DELETE FROM RULES_TABLE WHERE rule_id=? OR parent_id=? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T14:03:59.847

将“与”更改为“或”：

```
$sql = 'DELETE FROM ' . RULES_TABLE .   
' WHERE rule_id = ' . (int) $rule_id . 
    (($type == 'cat') ? ' OR parent_id = ' . (int) $rule_id : ''); 
```

# xpath - 如何为没有 id 或 name 的复杂标签查找 XPath

> ID：12769458
> 
> 赞同：1
> 
> 时间：2012-10-07T13:59:44.013
> 
> 标签：xpath, selenium

我必须找出 XPath 的代码：

```
<td>
<input type="button" onclick="redirectToUserList(5);" class="btnManage" value="Manage Users" style="background-color: transparent;"> 
```

使用萤火虫的 XPath 是：

> /html/body/div/div/div[4]/table/tbody/tr/td/table/tbody/tr[2]/td/div/table/tbody/tr/td
> /table/tbody/tr[5 ]/td/div/div/form/table/tbody/tr[2]/td[4]/input

但是我怎样才能有一个更短的 XPath？例如，我希望可以运行以下命令： //input[@value='Manage Users']

请告知如何使用标准语法找到更短的 XPath？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T14:16:54.607

不强制使用 id 或 name。您可以使用该元素的任何属性。

以下是给定定位器的不同 xpath

```
 1\. "//input[@value='Manage Users']"
 2\. "//input[contains(@onclick,'redirectToUserList')]"
 3\. "//input[@type='button' and @class='btnManage']" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T14:11:09.320

You do not need to search for id or name, you can search for any attribute.

For example:

```
 //input[@value="Manage Users"] 
```

which sounds unique

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T07:02:52.280

作为上面给出的答案的插件，任何特定属性（如 id 或 name）都不是必需的。

我们主要使用 id 和 value 来唯一标识一个元素，因为其他属性也可能指定其他一些定位器。

如果任何属性不会与其他定位器混淆，您可以毫无顾虑地选择它。

**最后，如果您不擅长编写 xpath 并且不喜欢 firebug 提供的大型 xpath，只需安装一个名为Firepath**的 firebug 插件，它将为您提供最短的可行 xpath。

您还可以使用其他插件，例如 Xpath Checker 等。

# php - FILTER_FLAG_STRIP_LOW 与 FILTER_FLAG_STRIP_HIGH？

> ID：12769462
> 
> 赞同：19
> 
> 时间：2012-10-07T14:00:44.917
> 
> 标签：php, filter, validation, sanitization

参考`filter_var`PHP 5 中的函数：

我访问了它的文档： http: [//php.net/manual/en/filter.filters.sanitize.php](http://php.net/manual/en/filter.filters.sanitize.php)，但我仍然有这个问题：

**确切的**区别是什么？

为了更简单的说明，请提供一个例子。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-07T14:07:34.503

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-31T19:48:42.070

```
FILTER_FLAG_STRIP_LOW 
```

Remove characters with `ASCII` value `< 32`

```
FILTER_FLAG_STRIP_HIGH 
```

Remove characters with `ASCII` value `> 127`

# ruby-on-rails-3 - rails gem不兼容清除和railties，我该怎么办？

> ID：12769464
> 
> 赞同：1
> 
> 时间：2012-10-07T14:00:58.193
> 
> 标签：ruby-on-rails-3, rubygems, clearance, railtie

我有 rails 3.017 和 clear 1.0.0.rc2 并尝试安装 gem 'jquery-rails', '~> 2.1'

我需要旧版本的 jquery-rails 吗？如果是这样，我该如何解决这个问题？

谢谢乔尔

```
Bundler could not find compatible versions for gem "railties":
 In Gemfile:
  jquery-rails (~> 2.1) ruby depends on
    railties (< 5.0, >= 3.1.0) ruby

  clearance (= 1.0.0.rc2) ruby depends on
    railties (3.0.17) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:08:27.543

是的，您需要此 gem 的旧版本。`jquery-rails`如果你没有在你`Gemfile`的中指定某个版本`Bundler`，如果你运行`bundle install`.

您可以使用 gem manager 找出 gem 的依赖关系：

```
$ gem dependency jquery-rails -v 2.1.3 
```

# video - 高级视频分析 - 如何咬它？

> ID：12769469
> 
> 赞同：0
> 
> 时间：2012-10-07T14:02:03.683
> 
> 标签：video, video-capture, montecarlo, hidden-markov-models, markov-chains

我需要做一个应用程序：

*   从摄像机捕获视频数据，
*   做一些处理（蒙特卡洛方法，马尔科夫场和链等），
*   将数据保存为视频文件，上表面包含有关处理的信息（例如，将标记找到的对象），
*   将所有内容（不是视频本身，而是对象的位置等）保存到数据库中，以便将来进行统计管理。

所有这些都需要实时、连续地完成。

我是数据库程序员（C#、Java、Python），所以这对我来说是新事物......选择什么语言以及如何开始，据说我对需要完成的处理非常了解，但只是理论上 - 我知道步骤、计算……只需要一个工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:45:48.013

这一切似乎与您的归档相去甚远。如果您可以为您想要做的应用程序指定一个目的，那就太好了。

但是，您似乎想做一点计算机视觉/图像处理。我更喜欢的语言是 C++，OpenCV 库提供了当前计算机视觉算法和图像处理方法的可能实现。

C++ 非常适合图像处理，因为与您习惯的语言相比，它是一种相当“低级”的语言，因此用它快速编写代码可能会有点困难，但*编写快速代码*会更容易一些。

OpenCV 库的另一个好处是 Python 存在一个版本。与 C++ 相比，在 Python 中操作和试验某些操作更容易，并且可以更快地测试可以在以后集成到应用程序中的想法。

此外，对于一些简单的图像处理操作，Matlab 可能就足够了。它还提供了很多方法，但与 C++ 相比相当慢（我认为，甚至是 Python）。

最后，看起来像是对象检测，而您计划做的任何其他事情对您来说都是一个新领域。您可以浏览（或阅读，取决于可用时间）一些关于计算机视觉和图像处理的介绍性材料（例如，介绍性和选定的书籍章节）。对于推荐的阅读材料，我建议您**搜索**[Stack Overflow](http://stackoverflow.com)以及 Stackexchange 的Signal [Processing](http://dsp.stackexchange.com)。此外，如果您自己努力，这两个站点都可以帮助您进行*更具体*的编程以及解决问题。

# php - 从表中计数和求和

> ID：12769474
> 
> 赞同：1
> 
> 时间：2012-10-07T14:02:25.617
> 
> 标签：php, mysql

我在下面有这张表，我需要获取在考试中获得 A 的学生人数。这就是我想从下表中实现的目标：

3 A = 0 学生。2 A = 3 名学生。

```
+--------------+------------+------+
|  student_ID  | kod_subjek | gred |
+--------------+------------+------+
| 746123096687 | 02         | A    |
| 746123096687 | 12         | B    |
| 746123096687 | 21         | A    |
| 860206145454 | 12         | A    |
| 860206145454 | 02         | A    |
| 881012085535 | 02         | A    |
| 881012085535 | 21         | A    |
+--------------+------------+------+ 
```

我尝试：

```
mysql> SELECT student_ID, COUNT(gred) FROM data_exam GROUP BY student_ID; 
```

输出是：

```
+--------------+-------------+
| student_ID   | COUNT(gred) |
+--------------+-------------+
| 746123096687 |           3 |
| 860206145454 |           2 |
| 881012085535 |           2 |
+--------------+-------------+ 
```

它不起作用。它只会计算特定学生的所有成绩。请帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:09:54.157

```
SELECT a_count, COUNT(*) AS cnt
FROM
(
  SELECT COUNT(*) AS a_count
  FROM data_exam
  WHERE gred = 'A'
  GROUP BY student_id
) x
GROUP BY a_count
ORDER BY a_count 
```

[SQL-Fiddle](http://sqlfiddle.com/#!2/28de8/2)返回示例：

```
a_count   cnt
      2     3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:05:30.493

您可以使用子查询：

```
SELECT num_as, COUNT(1) AS num_students
FROM (
  SELECT student_ID, COUNT(gred) AS num_as
  FROM data_exam
  WHERE gred = 'A'
  GROUP BY student_ID
) counts_by_student
GROUP BY num_as 
```

# debian - 如何通过 GUI 在 Debian 的终端中执行 .sh 文件？

> ID：12769476
> 
> 赞同：2
> 
> 时间：2012-10-07T14:02:35.430
> 
> 标签：debian, executable, raspbian

我想通过 Raspbian GUI 运行一个 .sh 文件，只需双击它即可。

我已经通过`chmod +x`在终端中运行来使文件可执行，只需双击它即可。

现在，它会打开一个对话框弹出窗口，告诉我：

> 这个文本文件“myfile.sh”似乎是一个可执行脚本。你想用它做什么？
> 
> 执行、在终端中执行、打开、取消

单击前两个选项中的任何一个都没有任何效果。它只是关闭对话窗口。

否则我可以在终端中很好地运行脚本，只需键入`./myfile.sh`

知道我还应该做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T17:42:34.947

也许那时您应该找出在您的发行版中打开终端的命令是什么，并创建一个快捷方式或等效项，以您的脚本作为 arg 运行该命令。

例如：（`bash /Home/myuser/path/to/your/script.sh` 这对我有用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T21:40:37.777

这里最可能发生的事情是发生在我身上很多次，我尝试运行这样的脚本，它打开了几毫秒，因为它完成了代码的运行并退出了。尝试在脚本末尾添加它，看看窗口是否存在：

```
read -p "Press [Enter] key to continue..." 
```

如果没有，那么我很抱歉我帮不上忙。

# php - 使用共享主机且无法访问 webroot 外部时，如何保护我的数据库凭据？

> ID：12769478
> 
> 赞同：0
> 
> 时间：2012-10-07T14:02:45.243
> 
> 标签：php, mysql, security

我的所有数据库凭据都包含在我想放在我的 webroot 文件之外的包含文件中。

但是，我的共享托管计划不允许我将文件放在 webroot 之外。我是否必须考虑以某种方式加密我的文件以确保我的凭据安全？

我读过一种方法来生成一种假的 404 页面，但这对我来说听起来一点也不安全。

我还采取了创建只读用户帐户的步骤，这样如果我的帐户遭到入侵，那么至少不会覆盖或删除任何内容，但我显然希望尽可能安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:21:40.077

你不能

最好的办法是创建将由托管服务解释的 php 文件。

```
<?php

$DB_USER = 'your_user';
$DB_PASS = 'your_pass';
$DB_INSTANCe= 'your_instance'; 
```

当有人从网络浏览器访问您的文件时，他将看不到任何东西。当你需要你的文件时，只需包含它。

您还可以添加一些 .htaccess（可能），这样使用 Web 浏览器的任何人都无法访问您的文件。

可悲的是，与您对同一物理主机具有读取访问权限的人将能够访问此文件，并且没有办法阻止这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T16:03:20.100

如果服务器正在运行 apache 并且您可以覆盖指令，那么这可以通过使用以下行在 webroot 中创建一个 .htaccess 文件来实现，请务必将 <FILENAME>（包括 <>）替换为名称您要拒绝访问的文件的名称。

```
#Deny access to the .htaccess file

<Files ~ "^\.htaccess">

Order allow,deny

Deny from all

</Files>

#Deny the database file

<Files ~ "^\<FILENAME>$">

Order allow,deny

Deny from all

</Files> 
```

# mysql - 需要帮助连接到本地服务器上的 Mysql 数据库

> ID：12769482
> 
> 赞同：1
> 
> 时间：2012-10-07T14:03:21.080
> 
> 标签：mysql, connect

我对数据库很陌生，不知道我哪里出错了。请帮我找出为什么我无法连接到我的数据库。

我在使用 Dreamweaver 时遇到错误 - 无法发现与 Dynamicaly 相关的文件，因为该文档没有站点定义

我的站点根目录位于 htdocs 中。我要运行的主文件是“dataquery.php”-htdocs/LetsPlays/dataquery.php

```
<?php
include 'includes/databaseform.php';
$query = "SELECT * FROM userchanel";
$result = mysql_query($query);
while($person = mysql_fetch_array($result));
{
echo $person['chanelurl'];
}
?> 
```

数据查询连接到“databaseform.php” - htdocs/LetsPLays/includes/databaseform.php

```
<?php
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass ='';
$db = 'mysql_tut';
$conn = mysql_connect($dbhost,$dbuser,$dbpas);
mysql_select_db($userchanel);
?> 
```

所以我试图通过用户 tbl 截图连接到 userchanel 表：http: [//imageshack.us/f/23/usertbl.png/](http://imageshack.us/f/23/usertbl.png/)

通过 wordpress 运行的文件设置为在 127.0.0.1 上运行请帮助我。

对不起noobishness！我不知道我错过了什么！当我运行 html 文件时，我得到的只是一个空白页！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:40:27.117

代替 `htdocs/LetsPlays/dataquery.php`

尝试`localhost/dataquery.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:45:59.150

换行

```
$conn = mysql_connect($dbhost,$dbuser,$dbpas); 
```

和

```
$conn = mysql_connect($dbhost,$dbuser,$dbpass); 
```

注意 $dbpass 上的双 's'，如果我可能的话，您在编写新代码时不应该依赖已弃用的功能，请改用 PDO，也不要以 root 身份登录到 db，创建一个用户，不要偷懒，你的数据库连接代码应该是这样的：

```
<?php
$db = new PDO('mysql:dbname=databasename', 'username', 'password',
    array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")); 
```

init 命令实际上不是必需的，我只是将它包含在内，因为我总是使用它，而查询可以作为

```
<?php
include 'includes/databaseform.php';
$query = $db->prepare("SELECT * FROM userchanel");
$query->execute();
while(($person = $query->fetch(PDO::FETCH_ASSOC)) !== false);
{
    echo $person['chanelurl'];
} 
```

如果你只使用一列，你应该只获取如下：

```
<?php
include 'includes/databaseform.php';
$query = $db->prepare("SELECT chanelurl FROM userchanel");
$query->execute();
while(($channelurl = $query->fetch(PDO::COLUMN)) !== false);
{
    echo $channelurl;
} 
```

我没有为 php 代码包含右大括号，因为它们不是必需的，也可以进行一些错误检查`var_dump($db->errorInfo());`，并且`var_dump($query->errorInfo());`- 没有在代码中包含它，因为我只使用它们来检查我的代码的任何问题，祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T10:13:57.883

我建议您为数据库连接制作附加文件并将其包含在您需要的任何地方。因为当您需要实时推送项目时，您需要更改每个文件以防包含文件，您只需在一个地方进行更改，它会影响 localhost 的每个连接位置

```
 <?php
    // Replace the variable values below
    // with your specific database information.
    $host = "localhost";
    $user = "root";
    $pass = "";
    $db = "yourdatabase";
    // This part sets up the connection to the
    // database (so you don't need to reopen the connection
    // again on the same page).
    $ms = mysql_pconnect($host, $user, $pass);
    if ( !$ms )
    {
       echo "Error connecting to database.\n";
    }
    // Then you need to make sure the database you want
    // is selected.
    mysql_select_db($db);
    ?> 
```

将上述所有代码保存在一个文件中，将其另存为 dbConfig.php 并将其包含在任何类似的位置

```
include ("dbConfig.php"); 
```

现在在该文件中，您已连接到 db，您可以与数据库进行交互。

# git - 使用分离的工作树在接收后挂钩中检索更新文件的列表

> ID：12769485
> 
> 赞同：4
> 
> 时间：2012-10-07T14:03:55.350
> 
> 标签：git, web-deployment

我使用 Apache 提供文件的“分离工作树”将更新推送到 repo。使用接收后挂钩脚本，我需要一个已更改文件的列表，以便按照我们的 suphp 的要求更新它们的权限。但是，它不起作用。有什么想法为什么不呢？

```
GIT_WORK_TREE=/srv/www/live/ files=`git diff ..FETCH_HEAD --name-only --diff-filter=ACMRTUXB`
GIT_WORK_TREE=/srv/www/live/ sudo -u www-run /usr/bin/git checkout -f
for file in $files
do
     if [[ $file == *.php ]]
     then
             chmod 600 $file
     else
             chmod 644 $file
     fi
 done 
```

.git/config 的内容

```
[core]
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
        sharedrepository = 1
        worktree = /srv/www/live/
[receive]
        denyNonFastforwards = true
        denycurrentbranch = ignore 
```

# java - void 和（int、string 等）的区别

> ID：12769493
> 
> 赞同：1
> 
> 时间：2012-10-07T14:05:18.000
> 
> 标签：java, return-value

有什么区别

```
public void Sum() 
```

和

```
public int Sum() 
```

我尝试在 Google/YouTube 上进行搜索，发现`public int Sum()`需要`return`声明。我用`return`了很多，但我真的不知道它在方法上的用途。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T14:07:17.423

`public void sum()`不返回任何值，例如：

```
 public class Calculate{
     private int sum = 0;

     public void performSum(){
         sum(3,4);
         System.out.println("sum="+this.sum);
     }

     public void sum(int value, int value2){
           sum = value1+ value2;
           return; //optional
     }
  } 
```

`public int sum()`必须返回一个`int`e,g 类型的值，如下：

```
 public class Calculate{

     public void performSum(){
         int sum = sum(3,4);
         System.out.println("sum="+sum);
     }

     public int sum(int value, int value2){
          return value1+ value2;
     }
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T14:10:27.747

`void`方法不返回任何东西——它们只是执行一个动作。`int`另一方面，顾名思义，方法返回一个整数值。

例如，

```
public void sum() {
    System.out.println("1 + 1 = 2"));  // we don't return anything
}

public int sum() {
    return 1 + 1;  // we return an integer
} 
```

相似地，

```
public double sum() {...}  // returns a double

public boolean sum() {...}  // returns a boolean

public String sum() {...}  // returns a String

...  // you get the idea 
```

* * *

需要注意的是，方法名称以小写字母开头是惯例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T14:09:46.140

如果您想说只打印附加值，第一个不会返回任何您可以使用的。

第二种方法返回一个`int`你使用这种方法的方法，如果你想在你的程序的其他地方增加价值，以便你可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-28T16:04:57.437

void 方法不返回任何东西——它们只是执行一个动作。而 int、double、boolean、String 方法返回 integer、double、String 值。

例如，

```
public void sum() {
    System.out.println("1 + 1 = 2"));  // we don't return anything
}

public int sum() {
    return 1 + 1;  // we return an integer
} 
```

相似地，

```
public double sum() {...}  // returns a double

public boolean sum() {...}  // returns a boolean

public String sum() {...}  // returns a String 
```

第一个方法类型 void sum() 只是执行一个调用方法 println() 的操作，该方法的目的是打印一个字符串值。

这是另一个例子：

```
void bark() {
    System.out.println("Woof-Woof");
  } 
```

您将在屏幕上看到打印出来的内容：Woof-Woof，因为 bark() 方法的主体在 println() 方法内部，并且该方法有一个语句“Woof-Woof”类型字符串，因此 bark() 方法正在执行action：调用 println() 方法，println() 方法返回一个 String 语句。

`System.out.println`由三部分组成：

1) System – 是 java.lang 包中的最终类。

2) out – 是 System 类的静态成员字段，属于 PrintStream 类型。

3) println() – 是 PrintStream 类的一个方法。

如果您想了解有关 System.out.println 的更多信息，这里有一个链接，其中包含一些详细信息：

[http://javapapers.com/core-java/system-out-println/](http://javapapers.com/core-java/system-out-println/)

我希望这对你有帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-07T14:17:38.043

**命名约定：** `Always remember that your method name should start with the small letter.`方法名使用驼峰式大小写。

**void：**此方法不返回任何内容。

**int：**此方法返回一个整数。

请阅读一本好的java书，我建议你去`Java - Complete Reference by Herbert Schildt.`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-07T14:10:32.810

当你不想从函数返回任何东西时，使用 - void
如果你想返回整数，则使用 int

```
public void sum() {
    System.out.println(5+6);
}

public int sum() {
    return (5 + 6);
} 
```

```
public void sum() {
        System.out.println(5+6);
    } 
```

这个函数可以称为

```
sum(); 
```

```
public int sum() {
        return (5 + 6);
    } 
```

这个函数可以称为

```
int a=sum(); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-03-23T09:44:34.670

```
 public class Prime 
    {

        void dispaly()
        {
            for(int i=1;i<100; i++)

            {
                boolean isPrimeNumber = true;

                for(int j=2; j<i; j++)
                {

                    if(i%j==0) 
                    {
                    isPrimeNumber=false;
                    break;
                    }

                }

            if(isPrimeNumber)
            {

                System.out.print(i + " ");

            }

        }

        }

        void dispaly1()
        {
            System.out.print("\n");

            for(int i=1;i<100; i++)

            {

                for(int j=2; j<i; j++)
                {

                    if(i%j==0) 
                    {

                    System.out.print(i + " ");
                    break;

                    }

                }

            }

        }

        public static void main(String[] args)
        {
            Prime p= new Prime();
            System.out.print("The Prime Numbers are : ");
            System.out.print("\n");
            p.dispaly();
            System.out.print("\n");
            System.out.print("The Composite Numbers are : ");
            p.dispaly1();

        }
    } 
```

# iphone - 独家 iOS UTI

> ID：12769494
> 
> 赞同：8
> 
> 时间：2012-10-07T14:05:20.163
> 
> 标签：iphone, ios, instagram, uidocumentinteraction, uti

我正在尝试为我的 iOS 应用程序创建/导出专有的 UTI 类型（非常类似于 Instagram 专门处理 UTI com.instagram.exclusivegram 的方式）。

基本上，我希望 com.photoapp.photo 成为一个应用程序可以使用的东西，如果他们希望能够在任何注册用于拍照的应用程序中打开照片（类似于 Instagram 的 com.instagram.photo）。然后我希望 com.photoapp.exclusive 只能在我的应用程序中打开（类似于 com.instagram.exclusivegram）。

我在我的设备上遇到的是，即使使用 com.photoapp.exclusive，UIDocumentController 也会提示我在 PhotoApp 或 DropBox 中打开它，它应该只是 PhotoApp。

我有注册 UTI 的应用程序以及用于检查打开能力的示例应用程序。我在示例应用程序中使用的代码如下：

```
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"photoapp://"]]) {
        NSData *imageData = UIImageJPEGRepresentation([UIImage imageNamed:@"derp.png"], 1.0);
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *fullPathToFile = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"photoapp.pae"];
        [imageData writeToFile:fullPathToFile atomically:NO];

        interactionController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:[NSString stringWithFormat:@"file://%@", fullPathToFile]]];
        interactionController.UTI = @"com.photoapp.exclusive";
        interactionController.delegate = self;

        [interactionController presentOpenInMenuFromRect:self.view.frame inView:self.view animated:YES];
    } 
```

这是我的应用程序的 plist 文件中的内容：

```
<key>UTExportedTypeDeclarations</key>
<array>
    <dict>
        <key>UTTypeDescription</key>
        <string>Exclusive PhotoApp Photo</string>
        <key>UTTypeConformsTo</key>
        <array>
            <string>com.photoapp.photo</string>
        </array>
        <key>UTTypeIdentifier</key>
        <string>com.photoapp.exclusive</string>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <string>pae</string>
        </dict>
    </dict>
    <dict>
        <key>UTTypeTagSpecification</key>
        <dict>
            <key>public.filename-extension</key>
            <string>pa</string>
        </dict>
        <key>UTTypeIdentifier</key>
        <string>com.photoapp.photo</string>
        <key>UTTypeDescription</key>
        <string>PhotoApp Photo</string>
        <key>UTTypeConformsTo</key>
        <array>
            <string>public.png</string>
            <string>public.jpeg</string>
        </array>
    </dict>
</array>
<key>UIFileSharingEnabled</key>
<true/>
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.photoapp.exclusive</string>
            <string>com.photoapp.photo</string>
        </array>
        <key>CFBundleTypeName</key>
        <string>Photo</string>
        <key>LSHandlerRank</key>
        <string>Default</string>
    </dict>
</array> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T12:55:26.553

一旦您指定了一个 UTI，例如`public.png`或`public.jpeg`，所有指定它们可以打开这些类型文件的应用程序都将能够打开您的文件。因此，如果您在`com.photoapp.exclusive`UTI 中根本没有指定任何类型一致性，那么似乎没有应用程序支持它。

# ios - 覆盖 UIActivityViewController 默认行为

> ID：12769499
> 
> 赞同：9
> 
> 时间：2012-10-07T14:05:45.183
> 
> 标签：ios, ios6, uiactivity

在 iPhone 上的照片应用程序中，当您选择邮件共享选项时，照片会以动画方式进入向上滑动的模态视图控制器。如何修改内置 UIActivities 的行为？例如，我希望能够设置邮件撰写者的主题字段。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-17T15:38:30.157

不幸的是，自定义`UIActivityViewController`邮件编写器的主题字段还没有工作。

有一个记录和报告的关于尝试自定义这里讨论的错误：

[iphone - 如何在 iOS 6 中设置 UIActivityViewController 的收件人？](https://stackoverflow.com/questions/12623260/how-do-i-set-recipients-for-uiactivityviewcontroller-in-ios-6)

* * *

如果这有效，根据文档，您将能够自定义这些邮件编写器字段：

> **UIActivityTypeMail**：该对象将提供的内容发布到新的电子邮件中。使用此服务时，您可以提供 NSString 和 UIImage 对象以及指向本地文件的 NSURL 对象作为活动项的数据。您还可以指定其内容使用 mailto 方案的 NSURL 对象。

因此，使用 mailto 方案，**当它工作时**，您应该能够像这样自定义这些字段：

```
 NSString *text = @"My mail text";
    NSURL *recipients = [NSURL URLWithString:@"mailto:foo@bar.com?subject=Here-is-a-Subject"];
    NSArray *activityItems = @[text, recipients];

    UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:nil];
    [self presentViewController:activityController animated:YES completion:nil]; 
```

* * *

如果您正在寻找其他自定义方式，`UIActivityViewController`这里有一个很好的示例项目：

[https://github.com/russj/ios6ShareDemo](https://github.com/russj/ios6ShareDemo)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-12T16:45:48.847

我就是这样做的，它在 iOS 7 中为我工作。

创建一个符合 UIActivityItemSource 协议的类：

```
@interface CustomActivityItem : NSObject <UIActivityItemSource>
@end 
```

在实现中覆盖相关方法：

```
- (id)activityViewControllerPlaceholderItem:(UIActivityViewController *)activityViewController
{
    return @"";
}

- (NSString *)activityViewController:(UIActivityViewController *)activityViewController subjectForActivityType:(NSString *)activityType
{
    if ([activityType isEqualToString:UIActivityTypeMail])
    {
        return @"Subject"
    }

    return nil;
}

- (id)activityViewController:(UIActivityViewController *)activityViewController itemForActivityType:(NSString *)activityType
{
    if ([activityType isEqualToString:UIActivityTypeMail])
    {
        return @"body";
    }

    return nil;
} 
```

然后呈现活动视图控制器：

```
CustomActivityItem* activityItem = [[CustomActivityItem alloc] init];
UIActivityViewController* activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[activityItem]
                                                                                       applicationActivities:nil];

[self presentViewController:activityViewController animated:YES completion:nil]; 
```

# c - 为什么 char 与 signed char 或 unsigned char 不兼容？

> ID：12769500
> 
> 赞同：9
> 
> 时间：2012-10-07T14:06:00.407
> 
> 标签：c, char, compatibility

我发现 C99 标准有一个声明否认 char 类型和有符号字符/无符号字符类型之间的兼容性。

C99标准注释35：

> 在limits.h 中定义的CHAR_MIN 将具有值0 或SCHAR_MIN 之一，这可用于区分这两个选项。无论做出何种选择， char 都是与其他两种不同的类型，并且与任何一种都不兼容。

我的问题是，为什么委员会否认兼容性？理由是什么？如果 char 与 signed char 或 unsigned char 兼容，会发生可怕的事情吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T14:18:15.260

The roots are in compiler history. There were (are) essentially two C dialects in the Eighties:

1.  Where plain char is signed
2.  Where plain char is unsigned

Which of these should C89 have standardized? C89 chose to standardize neither, because it would have invalidated a large number of assumptions made in C code already written--what standard folks call *the installed base*. So C89 did what K&R did: leave the signedness of plain char implementation-defined. If you required a specific signedness, qualify your char. Modern compilers usually let you chose the dialect with an option (eg. gcc's `-funsigned-char`).

The "terrible" thing that can happen if you ignore the distinction between (un)signed char and plain char is that if you do arithmetic and shifts without taking these details into account, you might get sign extensions when you don't expect them or vice versa (or even undefined behavior when shifting).

There's also some dumb advice out there that recommends to always declare your chars with an explicit signed or unsigned qualifier. This works as long as you only work with pointers to such qualified types, but it *requires* ugly casts as soon as you deal with strings and string functions, all of which operate on pointer-to-plain-char, which is assignment-incompatible without a cast. Such code suddenly gets plastered with tons of ugly-to-the-bone casts.

The basic rules for chars are:

*   Use plain `char` for strings and if you need to pass pointers to functions taking plain char
*   Use `unsigned char` if you need to do bit twiddling and shifting on bytes
*   Use `signed char` if you need small signed values, but think about using `int` if space is not a concern

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T14:12:43.207

将`signed char`and`unsigned char`视为最小的算术整数类型，就像`signed short`/ `unsigned short`，等等`int`, `long int`, `long long int`。这些类型都是明确指定的。

另一方面，`char`它有一个非常不同的目的：它是 I/O 的基本类型以及与系统的通信。它不是用于计算，而是作为*数据*单位。这就是为什么你会`char`在命令行参数、“字符串”的定义、`FILE*`函数和其他读/写类型的 IO 函数以及严格别名规则的例外中发现使用它的原因。这种`char`类型的定义故意不那么严格，以便允许每个实现使用最“自然”的表示。

这只是分离职责的问题。

（不过，确实与and`char`的*布局兼容*，因此您可以显式地将一个转换为另一个并返回。）`signed char``unsigned char`

# java - 用于多对一关系的 Java DAO 类

> ID：12769501
> 
> 赞同：4
> 
> 时间：2012-10-07T14:06:00.407
> 
> 标签：java, database, jakarta-ee, jdbc

当具有多对一关系时，我有一个关于如何在 Java 中保存数据库中的对象的问题。

基本上我有 2 个类 - UserVO 和 GroupVO，看起来像这样：

```
public class UserVO extends ValueObject implements Serializable {

    /**
     * The default serial version ID
     */ 
    private static final long serialVersionUID = 1L;

    private String  login;
    private String  password;
    private Long    groupId;

    public UserVO() {
        super();

        this.setLogin("");
        this.setPassword("");
        this.setGroupId(0L);
    }

        // all the getters and setters
        // ...
} 
```

和

```
public final class GroupVO extends ValueObject implements Serializable {

    /**
     * The default serial version ID
     */ 
    private static final long serialVersionUID = 1L;

    private String      description;    
    private Set<UserVO> users = new HashSet<UserVO>();

    public GroupVO() {
        super();

        this.setDescription("");
    }

        // all the getters and setters
        // ...
} 
```

他们的超类是一个非常简单的抽象类：

```
public abstract class ValueObject {

    private Long    id;
    private String  name;

    public ValueObject() {
        super();

        // the ID is auto-generated
//      this.setId(0L);
        this.setName("");
    }

        // all the getters and setters
        // ...
} 
```

现在我必须为它们创建 DAO 类。在 UserDAO 中，我在数据库中创建和插入用户是这样的：

```
@Override
    public Long create(UserVO user) throws IllegalArgumentException, DAOException {
        if (user.getId() != null) {
            throw new IllegalArgumentException("User may already be created, the user ID is not null.");
        }

        Object[] values = { user.getName(), user.getLogin(), user.getPassword(), user.getGroupId() };

        Connection          connection          = null;
        PreparedStatement   preparedStatement   = null;
        ResultSet           generatedKeys       = null;

        try {
            connection = daoFactory.getConnection();
            preparedStatement = DAOUtil.prepareStatement(connection, SQL_CREATE_USER, true, values);

            int affectedRows = preparedStatement.executeUpdate();

            if (affectedRows == 0) {
                throw new DAOException("Creating user failed, no rows affected.");
            }

            generatedKeys = preparedStatement.getGeneratedKeys();

            if (generatedKeys.next()) {
                user.setId(generatedKeys.getLong(1));
            } else {
                throw new DAOException("Creating user failed, no generated key obtained.");
            }
        } catch (SQLException e) {
            throw new DAOException(e);
        } finally {
            DAOUtil.close(connection, preparedStatement, generatedKeys);
        }

        return user.getId();
    } 
```

还有一些辅助类，但我想你理解我的代码:)。

这是 GroupDAO 创建方法：

```
@Override
    public Long create(GroupVO group) throws IllegalArgumentException, DAOException {
        if (group.getId() != null) {
            throw new IllegalArgumentException("Group may already be created, the group ID is not null.");
        }

        Object[] values = { group.getName(), group.getDescription() };

        Connection          connection          = null;
        PreparedStatement   preparedStatement   = null;
        ResultSet           generatedKeys       = null;

        try {
            connection = daoFactory.getConnection();
            preparedStatement = DAOUtil.prepareStatement(connection, SQL_CREATE_GROUP, true, values);

            int affectedRows = preparedStatement.executeUpdate();

            if (affectedRows == 0) {
                throw new DAOException("Creating group failed, no rows affected.");
            }

            generatedKeys = preparedStatement.getGeneratedKeys();

            if (generatedKeys.next()) {
                group.setId(generatedKeys.getLong(1));
            } else {
                throw new DAOException("Creating group failed, no generated key obtained.");
            }

        } catch (SQLException e) {
            throw new DAOException(e);
        } finally {
            DAOUtil.close(connection, preparedStatement, generatedKeys);
        }

        return group.getId();
    } 
```

现在，如果我在主函数中做一个小测试，创建一个组并保存在数据库中，一切都很顺利：

```
DAOFactory usersGroupsRolesFactory = DAOFactory.getInstance("UsersGroupsRolesDB.jdbc");
System.out.println("DAOFactory successfully obtained: " + usersGroupsRolesFactory);

// Create an instance of the GroupDAO class
GroupDAO dao = usersGroupsRolesFactory.getGroupDAO();

// Create some GroupVO objects
GroupVO group1 = new GroupVO();
group1.setName("Administrators");
group1.setDescription("These users have all the right in the application");

dao.create(group1); 
```

由于 GroupVO 类有一组 UserVO 对象，如果我在主函数中还键入：

```
UserVO user1 = new UserVO();
user1.setName("Palancica Pavel");
user1.setLogin("login_pavel");
user1.setPassword("password_pavel");

group1.getUsers().add(user1); // I may also add some more users 
```

并说我是第一次打电话：dao.create(group1);

通常，这不仅应该保存组信息，还应该保存所有关联的 UserVO 对象。

对我来说这意味着在 GroupDAO 的“创建”功能中，成功生成组 ID 后，我需要做很多其他代码。

我想知道这是将这些用户保存在数据库中的正确方法，因为我认为我必须使 GroupDAO 类与 UserDAO 类以及与 DAOFactory 进行通信，在我的情况下，它可以给我们一个 UserDAO，或 GroupDAO 对象。或者我可以在不使用 UserDAO 类的情况下进行所有数据库交互以保存这些用户。

我在想的那个代码看起来很长，很乱/意大利面，我不太确定这是否是正确的方法:(。

请注意，我注意到使用任何 ORM 框架。

请各位大侠告诉我，你们怎么看？！如果您需要更多详细信息，我可以将我的项目发送给您，它不是商业用途 :D

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:08:07.530

我将使用 GroupDAO 仅创建组，使用 UserDAO 仅创建用户，以及委托给这两个 DAO 的功能服务以创建包含所有用户的组。它的代码如下所示：

```
Long groupId = groupDao.createGroup(groupVO);
for (UserVO userVO : groupVO.getUsers()) {
    userDao.createUser(userVO, groupId);
} 
```

# vb.net - 通过 TCP (VB.NET) 发送字符串

> ID：12769502
> 
> 赞同：1
> 
> 时间：2012-10-07T14:06:00.617
> 
> 标签：vb.net, tcpclient

我使用 TCP 客户端成功连接到 onlinenic API，但在尝试登录时遇到错误。

下面是我的代码（用户名和密码是由 onlinenic 提供的演示）

```
 Imports System
    Imports System.Net.Sockets
    Imports System.Text
Imports System.Security.Cryptography
Imports System.IO
Imports System.Text.RegularExpressions
Imports System.Configuration
Imports System.Xml.Linq
Imports System.Xml

Partial Public Class _Default
    Inherits System.Web.UI.Page
    Private client As New TcpClient()
    Private stream As NetworkStream
    Private PortNo As Integer = 30009
    Private testIP As String = "218.5.81.149"
    Private testID As String = "135610"
    Private testPassword As String = "654123"
    Private Function Connect() As Boolean
        client.Connect(testIP, PortNo)
        stream = client.GetStream()
        Dim responseData As String = ""
        Dim data As [Byte]() = New [Byte](255) {}
        Dim bytes As Int32 = stream.Read(data, 0, data.Length)
        responseData = Encoding.ASCII.GetString(data, 0, bytes)
        Return responseData.Contains("Your Connection with API Server is Successful")
    End Function

    Private Function Login() As Boolean
        Dim HashedPass As String = CreateMd5Hash(testPassword)
        Dim guid__1 As Guid = Guid.NewGuid()
        Dim chksum As String = CreateMd5Hash(testID + HashedPass + guid__1.ToString() + "login")
        Dim sb As New StringBuilder()
        sb.Append("<?xml version=""1.0"" encoding=""UTF-8"" standalone=""no""?>")
        sb.Append("<request>")
        sb.Append("<category>client</category>")
        sb.Append("<action>Login</action>")
        sb.Append("<params>")
        sb.Append("<param name=""clid"">" + testID + "</param>")
        sb.Append("</params>")
        sb.Append("<cltrid>" + guid__1.ToString() + "</cltrid>")
        sb.Append("<chksum>" + chksum + "</chksum>")
        sb.Append("</request>")
        Dim responseData As [String] = [String].Empty
        Dim data As [Byte]()
        data = System.Text.Encoding.ASCII.GetBytes(sb.ToString())
        stream.Write(data, 0, data.Length)
        Dim bytes As Int32 = stream.Read(data, 0, data.Length)
        responseData = System.Text.Encoding.ASCII.GetString(data, 0, bytes)
        bytes = stream.Read(data, 0, data.Length)
        responseData += System.Text.Encoding.ASCII.GetString(data, 0, bytes)
        Return responseData.Contains("Command completed successfully")
    End Function 
```

当我尝试使用上述 login() 函数进行连接时，出现以下错误：

你调用的对象是空的。

```
Line 49:         Dim data As [Byte]()
Line 50:         data = System.Text.Encoding.ASCII.GetBytes(sb.ToString())
Line 51:         stream.Write(data, 0, data.Length)
Line 52:         Dim bytes As Int32 = stream.Read(data, 0, data.Length)
Line 53:         responseData = System.Text.Encoding.ASCII.GetString(data, 0, bytes) 
```

错误消息出现在这一行：stream.Write(data, 0, data.Length)

> System.NullReferenceException 未被用户代码处理
> Message=Object 引用未设置为对象的实例。
> Source=App_Web_4023pkvf StackTrace：在 D:\Documents and Settings\sa\My Documents\Visual Studio 2010\WebSites\onlinenic_vb1\Default.aspx.vb 中的 _Default.Login() 处：_Default.Button2_Click 的第 51 行（对象发件人，EventArgs e ) 在 D:\Documents and Settings\sa\My Documents\Visual Studio 2010\WebSites\onlinenic_vb1\Default.aspx.vb:line 243 at System.Web.UI.WebControls.Button.OnClick(EventArgs e) at System.Web .UI.WebControls.Button.RaisePostBackEvent(String eventArgument) 在 System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) 在 System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) 在 System.Web.UI.Page 的字符串 eventArgument)。ProcessRequestMain（布尔型 includeStagesBeforeAsyncPoint，布尔型 includeStagesAfterAsyncPoint）
> 内部异常：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:16:44.350

你应该试试这个：

```
 Dim HashedPass As String = CreateMd5Hash(testPassword)
        Dim guid__1 As Guid = Guid.NewGuid()
        Dim chksum As String = CreateMd5Hash(testID + HashedPass + guid__1.ToString() + "login")
        Dim sb As New StringBuilder()
        sb.Append("<?xml version=""1.0"" encoding=""UTF-8"" standalone=""no""?>")
        sb.Append("<request>")
        sb.Append("<category>client</category>")
        sb.Append("<action>Login</action>")
        sb.Append("<params>")
        sb.Append("<param name=""clid"">" + testID + "</param>")
        sb.Append("</params>")
        sb.Append("<cltrid>" + guid__1.ToString() + "</cltrid>")
        sb.Append("<chksum>" + chksum + "</chksum>")
        sb.Append("</request>")
        Dim responseData As [String] = [String].Empty
        Dim data As [Byte]()
        data = System.Text.Encoding.ASCII.GetBytes(sb.ToString())
        stream.Write(data, 0, data.Length)
        Dim bytes As Int32 = stream.Read(data, 0, data.Length)
        responseData = System.Text.Encoding.ASCII.GetString(data, 0, bytes)
        bytes = stream.Read(data, 0, data.Length)
        responseData += System.Text.Encoding.ASCII.GetString(data, 0, bytes)
        Return responseData.Contains("Command completed successfully") 
```

# java - Java Swing setEditable(boolean) 在带有自定义渲染器的 JComboBox 中不起作用

> ID：12769505
> 
> 赞同：0
> 
> 时间：2012-10-07T14:06:30.647
> 
> 标签：java, swing, jcombobox, packaging, renderer

我有一个`JComboBox`类型`myclass`。我`CustomListRender`用来显示 的属性之一`myclass`，它工作正常。

然后我设置`myCombobox.setEditable(true)`。`JComboBox`变得可编辑，但默认情况下，文本设置为如下所示`combobox`：

```
 com.mypackagename.myclass 
```

谁能告诉我如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T16:18:15.723

如[*如何使用组合框：提供自定义渲染器*](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)中所述，

> 默认渲染器知道如何渲染字符串和图标。如果您将其他对象放在组合框中，则默认渲染器会调用该`toString`方法以提供要显示的字符串。

除非被覆盖，否则您可能会看到[`toString()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)继承自`Object`. 至少，您需要覆盖`MyClass#toString()`或~~更新您的渲染~~器，并相应地提供[自定义编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)；[这里](https://stackoverflow.com/a/7605780/230513)有一个相关的例子。大多数人更喜欢后者；您的[sscce](http://sscce.org/)显示您的自定义渲染器将更容易建议替代方案。

# macos - Excel网页查询输出控件

> ID：12769508
> 
> 赞同：2
> 
> 时间：2012-10-07T14:06:56.380
> 
> 标签：macos, excel-web-query, excel-2011

```
Excel for Mac 2011
Version 14.2.4 (120824)
Mac OS X 10.6.8 
```

此网络查询文件

```
WEB
1
http://finance.yahoo.com/d/quotes.csv?s=SGOL&f=sn 
```

将此文本返回到电子表格单元格中。

```
SGOL,"ETFS Physical Swi" 
```

我想知道的是如何使用“，”作为分隔符将返回的数据自动转换为列？

# jquery - 在每个循环中创建一个间隔

> ID：12769514
> 
> 赞同：2
> 
> 时间：2012-10-07T14:07:40.523
> 
> 标签：jquery, settimeout, each

我正在尝试使用 jQuery 在每个循环中设置一个间隔。我认为以下可能有效，但没有这样的运气：

```
menuSlide = $(this).animate({
  left: '250px'
}, 50, function() {
});

var slideIn = function() {

  $('._jsNav').each(function(){
    setTimeout(function(menuSlide) {
    }, 200);
 });
}

$('._jsStage').mouseenter(slideIn); 
```

任何人都可以让我知道它有什么问题吗？或者如果我不正确地接近它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:34:26.027

查看此链接[JavaScript Timing Events](http://www.w3schools.com/js/js_timing.asp)和此示例：

```
setTimeout(function(){alert("Hello")},3000); // anonymous function 
```

并回答问题（您的代码）：

```
setTimeout(function(menuSlide) { }, 200); // anonymous function with parameter
// menuSlide is undefined here 
```

这段代码必须如何工作？

**添加：**

据我了解，您试图创建类似[http://jsfiddle.net/hcFGv/](http://jsfiddle.net/hcFGv/)的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T16:02:58.057

你需要那个小[插件 jquery-timing](http://creativecouple.github.com/jquery-timing/)的帮助。**它用非常短的代码**做你想做的事：

```
$('._jsStage').mouseenter(function(){
    $('._jsNav').each($).wait(200).animate({left:250},50,$);
}); 
```

就这样！

* * *

如果你想在单个 jQuery 行中做同样的事情，该插件允许编写更短的代码：

```
$('._jsStage').on('mouseenter').$('._jsNav').each($).wait(200).animate({left:250},50,$); 
```

# android - TabView 在 android 中无法按预期工作

> ID：12769515
> 
> 赞同：0
> 
> 时间：2012-10-07T14:07:48.340
> 
> 标签：android, tabview

我在 android 中有一个 tabView，它的创建方式如下：

```
 Intent intentAndroid = new Intent().setClass(this, AndroidActivity.class);
        TabSpec tabSpecAndroid = tabHost.newTabSpec("Android");
        tabSpecAndroid.setIndicator("", ressources.getDrawable(R.drawable.icon_android_config));
        tabSpecAndroid.setContent(intentAndroid);

        // Apple tab
        Intent intentApple = new Intent().setClass(this, AppleActivity.class);
        TabSpec tabSpecApple = tabHost.newTabSpec("Apple");
        tabSpecApple.setIndicator("", ressources.getDrawable(R.drawable.icon_apple_config));
        tabSpecApple.setContent(intentApple); 
```

AppleActivity.class 定义如下：

```
public class AppleActivity extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.apple_layout);

        TextView textview = (TextView)findViewById(R.id.apple_textView);
        textview.setText("This is Apple tab");

    }
} 
```

但是我在名为“Apple”的选项卡中单击了 TextView 中未显示的字符串“这是 Apple 选项卡”。这里有什么问题？请帮我解决。图片如下：

![在此处输入图像描述](../Images/5c2f3eca8316db21b25624ab4fe3e3ac.png)

但是当我单击“Android”等其他选项卡时，图片如下：

![在此处输入图像描述](../Images/72ffa25d409a6d340dfc2ceb8526b9dd.png)

为什么 android 选项卡中的 textView 工作正常，为什么不在 Apple 选项卡中？

AppleLayout.xml 的 alyout 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

    <ListView
      android:layout_height="wrap_content"
      android:layout_width="match_parent"
      android:id="@+id/listView1">
    </ListView>

    <TextView
      android:text="TextView"
      android:id="@+id/apple_textView"
      android:layout_width="wrap_content" 
      android:layout_height="wrap_content">
    </TextView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:11:22.317

将 android:orientation="vertical" 添加到 LinearLayout。看起来默认是水平的，因此您的文本在右侧但不可见，因为列表与父级匹配。或者只是尝试将 textview 放在 listview 上方，看看它是否可见

# jquery - 展示文件名

> ID：12769516
> 
> 赞同：0
> 
> 时间：2012-10-07T14:07:50.773
> 
> 标签：jquery, file-upload

我正在尝试收集所选输入文件的文件名并将其添加到表中：

**HTML**

```
<div class="row-fluid">
  <div class="span12" id="upload-modal-button">
    <span class="btn btn-small btn-success fileinput-button">
      <span>Browse</span>
      <input type="file" name="file_1" enctype="multipart/form-data" />
    </span>
  </div>
</div>

<div class="row-fluid" id="image-table">
  <div class="span12">
    <table class="table table-striped" id="upload-list">
      <thead>
        <td>Filename</td>
        <td>State</td>
        <td>Rate</td>
      </thead>
      <tr id="filelist"></tr>
    </table>
  </div>
</div> 
```

**查询**

```
$('input[type=file]').change(function(e){
  $('#filelist').prepend('<td>'+$(this).val()+'</td>');
}); 
```

但我无法让文件名显示在表格中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:21:04.247

如果你使用“jquery 1.8”，选择器“type=file”可以正常工作，但如果你使用“jquery 1.6”，这个选择器将不起作用。正确的方法是使用这种类型的选择器：

```
$('input[type="file"]') 
```

或者，您可以将此类型选择器与类一起使用：

HTML：

```
<input class="input-type-file" type="file" name="file_1" enctype="multipart/form-data" /> 
```

JS：

```
$('.input-type-file') 
```

# cmake - CMake：“子投影”文件的最佳方法

> ID：12769521
> 
> 赞同：3
> 
> 时间：2012-10-07T14:08:07.940
> 
> 标签：cmake

我正在学习/审查 CMake，因为我正在考虑将我们的代码迁移到它。我们在当前的 make 系统中经常做的一件事是“子项目”公共代码文件。例如，我们有很多共享的通用头文件（加上一些 c/cpp 文件），它们包含在我们创建的每个项目中。我想在 CMake 中复制它，但我没有看到一个简单的方法。准确地说，我想做类似的事情：

**父 CMakeLists.txt**

```
add_subdirectory(shared_folder shared_build_folder)

#Next line should somehow add in the files reference in the shared_folder
add_executable([specific files for this project] build_folder) 
```

**子 CMakeLists.txt (shared_folder)**

```
#Somehow have a list of files here that get added to the parent project 
```

到目前为止，我已经找到了各种“方法”来做到这一点，但似乎都有些老套。我得出的结论是，这实际上是我必须做的事情，而 CMake 并不真正适合这种开发风格。为清楚起见，我的大多数解决方案都涉及在父级别创建一个由文件列表组成的变量之类的操作。这个变量（通过一些恶作剧）可以“传递”给任何孩子/从任何孩子“传递”，填充，然后当我调用 add_exectuable 时，我使用该变量来添加文件。

我所有的解决方案都涉及相当多的宏/函数，而且似乎有相当多的开销。这是其他人尝试过的吗？有关执行此操作的最佳方法的任何线索？

谢谢安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:45:06.067

我们面临着完全相同的问题，经过一段时间的哭泣后，我们接受了 CMake 方式，它产生了一个结构更好的项目，即使它意味着改变我们结构的某些部分。

当使用子目录时，一旦处理了-statement，目标就会自动导出到整个项目中（甚至在随后的其他add_subdirectory-calls中）`add_subdirectory`：包含公共代码的子项目正在创建库。

您还`PARENT_SCOPE`可以使用它来将变量导出到父 CMakeLists.txt

对于“其他”事物，我们通过将 .cmake-files 包含到主 CMakeLists.txt 中来模拟 FindPackage 机制`include`。这样做我们可以很容易地提供变量，改变`include_directories`和做其他对项目全局的花哨的事情。

由于 cmake 变量之间没有依赖关系，我们不使用 cmake 来配置源（项目的功能），而只使用构建（编译器、包含、库...）。这种拆分是我们构建系统重构的关键要素。

# cocos2d-iphone - iOS 6 模拟器中的 Cocos2d

> ID：12769524
> 
> 赞同：0
> 
> 时间：2012-10-07T14:08:24.040
> 
> 标签：cocos2d-iphone, ios6, sigabrt

我正在使用 Tiled Map Editor Cocos2d 和 Xcode 编写一个简单的程序，上次我尝试它工作但现在我得到了新的 iOS 6 模拟器，但它没有。错误只是“Sigbrt”，它意味着要中止的信号。我不知道我的程序有什么问题。这是 Hellowrold.h

```
//
//  HelloWorldLayer.h
//  game
//
//  Created by Alex Reichenbach on 9/29/12.
//  Copyright __MyCompanyName__ 2012\. All rights reserved.
//

// When you import this file, you import all the cocos2d classes
#import "cocos2d.h"

// HelloWorldLayer
@interface HelloWorldLayer : CCLayer
{
    CCTMXTiledMap *theMap;
    CCTMXLayer *bounds;
    CCTMXLayer *bgLayer;

}
@property (nonatomic,retain) CCTMXTiledMap *theMap;
@property (nonatomic,retain) CCTMXLayer *bounds;
@property (nonatomic,retain) CCTMXLayer *bgLayer;

// returns a CCScene that contains the HelloWorldLayer as the only child
+(CCScene *) scene;

@end 
```

这是 HellowWorldLayer.m

```
//
//  HelloWorldLayer.m
//  game
//
//  Created by Alex Reichenbach on 9/29/12.
//  Copyright __MyCompanyName__ 2012\. All rights reserved.
//

// Import the interfaces
#import "HelloWorldLayer.h"

// HelloWorldLayer implementation
@implementation HelloWorldLayer
@synthesize theMap;
@synthesize bgLayer;
@synthesize bounds;

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
HelloWorldLayer *layer = [HelloWorldLayer node];

// add layer as a child to scene
[scene addChild: layer];

// return the scene
return scene;
}

// on "init" you need to initialize your instance
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {

        self.theMap = [CCTMXTiledMap tiledMapWithTMXFile:@"game.tmx"];
        self.bgLayer = [theMap layerNamed:@"bg"];

        self.bounds = [_theMap layerNamed:@"by"];

        [self addChild:theMap z:-1];

}
return self;
}

// on "dealloc" you need to release all your retained objects
- (void) dealloc
{
    self.theMap = nil;
    self.bgLayer = nil;
    self.bounds = nil;
[super dealloc];
}
@end 
```

这是平铺程序

```
<?xml version="1.0" encoding="UTF-8"?>
<map version="1.0" orientation="orthogonal" width="32" height="54" tilewidth="10" tileheight="10">
 <tileset firstgid="1" name="Solid_blue" tilewidth="10" tileheight="10">
  <image source="Solid_blue.PNG" width="200" height="200"/>
 </tileset>
 <tileset firstgid="401" name="Light_green" tilewidth="10" tileheight="10">
  <image source="Light_green.png" width="300" height="300"/>
 </tileset>
 <layer name="bg" width="32" height="54">
  <data encoding="base64" compression="zlib">
   eJzt1bENACAMA7DwW/8XJ3EBrAXkwXukRmklKQC4yBz9GXBLAGDPjwd+YMt4nQ7D2QL3vs3R
  </data>
 </layer>
</map> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T23:11:03.090

```
self.bounds = [_theMap layerNamed:@"by"]; 
```

您发布的文件中没有名为“by”的图层。你在那条线上收到那个错误吗？

# javascript - 带有 javascript 的 svg - 轴标签

> ID：12769525
> 
> 赞同：-1
> 
> 时间：2012-10-07T14:08:24.340
> 
> 标签：javascript, svg, styles

我正在尝试使用以下代码标记图表的 Y 轴：

```
 svg1.append("text").attr("class", "y label")
.attr("text-anchor", "end")
.attr("y", 10)
.attr("dy", "-40")
.attr("transform", "rotate(-90)")
.text("life expectancy (years)"); 
```

但是当我尝试将“y”值更改为 50 时，标签向右移动，我无法理解为什么会这样。此外，什么是“dy”，为什么没有“x”属性。:(

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:16:14.797

您转换默认坐标轴。我猜 dy 表示动态 Y，你可以使用 x 和 dx。

[http://www.w3.org/TR/SVG11/text.html#TSpanElementDXAttribute](http://www.w3.org/TR/SVG11/text.html#TSpanElementDXAttribute)

# search-engine - 谷歌搜索：是否可以排除在引用的术语之间有标点符号的搜索结果？

> ID：12769532
> 
> 赞同：2
> 
> 时间：2012-10-07T14:09:08.213
> 
> 标签：search-engine

换句话说，如果我搜索“啤酒罐”，我会得到许多结果，其中包括“... beer. Can ...”之类的短语。我想排除所有不包含“啤酒 [空格] 罐头”一词的结果。我想从结果中删除所有可能的标点符号。

我想输入“-”。或“-'。'”会起作用，但它不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:20:08.557

Don't know if it helps, but have you tried [[beer can]](https://www.google.de/?q=%5Bbeer%20can%5D)? Possibly with additional exclude phrases such as -"beer cans", -"beercan" etc.?

# python - 错误：对象不是 JSON 可序列化的 Django

> ID：12769533
> 
> 赞同：0
> 
> 时间：2012-10-07T14:09:08.267
> 
> 标签：python, django, django-forms, django-templates, django-views

我在使用 pusher 传递对象时遇到问题，它给了我一个错误`Error: new_action is not JSON serializable`。我试过了`json.dumps(new_action)`，但还是不行。这是我的代码：

**视图.py：**

```
 new_action = Action(actor=actor, verb=verb, action_object=action_object,description=description, target=target)
 new_action.save()
 p['stream_' + str(actor.username)].trigger('liveStream', {
        'new_action': new_action,
 });
 return new_action 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:31:11.783

我不明白你附加的代码，但试试这个：

```
from django.core.serializers.json import DjangoJSONEncoder

# ...

json.dumps(new_action, cls=DjangoJSONEncoder) 
```

我希望这会有所帮助。

# php - Cookies 不会设置，会话有效

> ID：12769534
> 
> 赞同：0
> 
> 时间：2012-10-07T14:09:08.900
> 
> 标签：php, session, cookies, http-headers

很抱歉信息量很少，但我无法提供更多信息。问题是，当尝试扩展我的登录功能以添加保持登录的选项时，cookie 不会设置。会话本身有效（因此没有空白字符或其他内容）。我没有收到错误消息，只是没有设置 cookie（用 opera/firefox 测试）。困惑了一个多小时后，我决定在这里问它。下面是登录功能。再往下你会发现它是如何被调用的。不用担心 cookie 中的密码，它是经过哈希处理的。我测试了代码是否确实被执行（在 setcookie 之前放置了一个 echo 'abc'），就是这种情况。

```
public function login($password,$stayloggedin) {
if ( is_null( $this->id ) ) trigger_error ( "user::login(): Attempt to login an user object that does not have its ID property set.", E_USER_ERROR );

if ($this->compare_password($password))
{

    if ($stayloggedin)
    {
        setcookie("userid", $this->id, time()+3600);
        setcookie("userid", $this->password, time()+3600);
    }

    session_start();
    $_SESSION['user_id'] = $this->id;
    $_SESSION['user_name'] =  $this->name;
    $_SESSION['user_nummer'] =  $this->user_nummer;
    return true;
}
else
{
    return false; //wrong password
}

} 
```

这就是上述函数的调用方式。

```
<?php
header('Content-type: text/html; charset=UTF-8');
require_once 'required_script.php';
if (isset($_GET['login']))
{

    require_once CLASS_PATH.'user.class.php';

    $user_logging_in=new user();
    $user_logging_in->load_from_name($_POST['user_name']);
    if (isset($user_logging_in->id))
    {
        if ($user_logging_in->login($_POST['user_pass'],$_POST['remember_me']=='true'))
        {
            echo '1';
        }
        else
        {
            echo '0';
        }
    }
    else
    {
        echo '2';
    }
die;
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T05:11:09.297

您的 cookie 不会设置，因为您在登录/cookie 设置功能发生之前输出 HTML 标头。

在创建 cookie 之前，您不能将任何标头传递给浏览器。

# python - 如何在 Python 中编写函数范围

> ID：12769536
> 
> 赞同：1
> 
> 时间：2012-10-07T14:09:26.210
> 
> 标签：python, math, syntax, matplotlib

所以我希望在 python 中创建以下函数的 log(y) vs log(x)。我不确定应该如何组合范围 (w) 以获得良好的图表。现在我把它留空了。

```
import numpy as np
import matplotlib.pyplot as plt

w =  
y = 1/(1+2.56e-8*(w)^2)

plt.plot(log(w),log(y)); 
```

好的，所以现在我必须再做一个情节，但它有点复杂。

```
w = np.arange(1e3, 1e7, 1e3)

z = 1/ (((5.89824e-15 (w ** 4))+(1-2.56e-8 (w ** 2))) ** 0.5)
b = plt.loglog(w, z); 
```

这给了我一个错误：

```
 z = 1/ (((5.89824e-15 (w ** 4))+(1-2.56e-8 (w ** 2))) ** 0.5)
TypeError: 'float' object is not callable 
```

没关系，我修好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:55:44.290

您可以使用该`numpy.arange`函数获取范围的 numpy 版本。此函数的合理范围是：

```
w = np.arange(1e3, 1e7, 1e3) 
```

（即，以 1000 为步长从 1000 变为 10000000）。但是，请注意，为了让 Python 知道您正在尝试使用求幂而不是按位异或运算符，您应该将您的行更改为：

```
y = 1/(1+2.56e-8*(w ** 2)) 
```

然后，如果你制作一个对数图，你最终会得到：

```
plt.loglog(w, y) 
```

![在此处输入图像描述](../Images/ebfc5a00a5220297b127ca3550464ae3.png)

# c# - 如何知道点击时哪个win手柄会获得焦点？

> ID：12769538
> 
> 赞同：0
> 
> 时间：2012-10-07T14:09:34.783
> 
> 标签：c#, winapi, window, handle

所以这绝对是一个奇怪的问题。当窗口在背景上时，它没有焦点。但是当你点击它时，它会得到它并且“键盘光标”被放置在一个特定的位置。例如，如果您使用的是 Skype，则键盘光标将位于活动对话的文本框中。在 Skype 中，文本框有其特定的句柄。

所以问题是：当你点击主（父）窗口标题时，如何知道哪个窗口句柄会被聚焦？

问候

编辑1：

我为我的情况找到了一种解决方法：我想在一个变量中注册，每个主窗口的最后一个窗口的每个句柄代码。例如，我有 3 个打开的窗口，带有箭头的窗口是焦点：

1.)

->窗口 1 ->子窗口 1 -子窗口 2 -窗口 2 -窗口 3

2.）我选择了另一个窗口，所以失去焦点的子窗口的句柄号保存在一个变量中

-窗口 1 -子窗口 1 -子窗口 2 ->窗口 2 -窗口 3

=> 子 window1 的句柄保存在变量中

使用它，我可以知道每个应用程序最后使用的窗口句柄！每次用户更改焦点窗口句柄时，有什么方法可以生成事件？还是我需要设置一个计时器，这对我来说不是很聪明？

问候

# ios - URLForUbiquityContainerIdentifier 总是返回 nil

> ID：12769542
> 
> 赞同：2
> 
> 时间：2012-10-07T14:10:21.877
> 
> 标签：ios, core-data, release, icloud

`URLForUbiquityContainerIdentifier:`总是返回`nil`

```
NSURL *ubiquityURL = [fileManager URLForUbiquityContainerIdentifier:nil];
if (ubiquityURL == nil) 
```

1.  **由xcode 4.5**构建的应用程序
***   应用已启用**iCloud***   **IOS**登录**iCloud**账号**

 **`ubiquityURL`在调试中是正常的，但`ubiquityURL`总是`nil`在分发到应用商店后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T23:06:24.030

听起来您的发布配置具有错误的权利。.entitlements plist 中的 com.apple.developer.ubiquity-container-identifiers 值是多少？**

# javascript - 如何使用 jQuery 或 CSS 使许多元素无法选择？

> ID：12769547
> 
> 赞同：5
> 
> 时间：2012-10-07T14:10:39.610
> 
> 标签：javascript, jquery, html, css

> **可能重复：**
> [有没有办法使 DIV 不可选择？](https://stackoverflow.com/questions/924916/is-there-a-way-to-make-a-div-unselectable)

我已经看到了许多适用于元素的解决方案。但是我有一个带有标签和按钮的区域。它不仅仅是一个元素，它是 a 中的每个元素`DIV`。

我怎样才能使其中包含的任何内容无法`DIV`选择？请注意，我不能只在上面放置一个遮罩层，`DIV`因为`DIV`有我需要能够单击的按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T14:15:33.370

```
$(".yourdiv").children().css({userSelect: 'none'}); 
```

如果您想使用 CSS`user-select`属性禁用选择。如果不是，上面可以很容易地推广到其他方法。

以上只选择直接子代，要选择**所有**后代，使用`.find()`方法：

```
$(".yourdiv").find("*").css({userSelect: 'none'}); 
```

你也可以使用纯 CSS 来做到这一点：

```
.yourdiv * { /*this selects all elements that are children of yourdiv*/
    /*user-select: none rules*/
} 
```

或者：

```
.yourdiv > * { /*this selects all elements that are direct descendants of yourdiv*/
    /*user-select: none rules*/
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:20:49.897

CSS：

```
div.unselectable {
    -moz-user-select: -moz-none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    -o-user-select: none;
    user-select: none;
} 
```

HTML：

```
<div id="foo" class="unselectable">...</div> 
```

参考：

*   [有没有办法使 DIV 不可选择？](https://stackoverflow.com/questions/924916/is-there-a-way-to-make-a-div-unselectable)
*   [在 jQuery 中禁用选择](http://aleembawany.com/2009/01/20/disable-selction-on-menu-items-with-this-jquery-extension/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T15:46:52.457

`user-select`所有支持它们的浏览器都继承了专有的CSS 变体。看这个例子：

[http://jsfiddle.net/yD7bM/](http://jsfiddle.net/yD7bM/)

您的问题是不支持这些 CSS 属性的浏览器，即 Opera 和 IE <= 9。令人高兴的是，它们都实现了一个替代方案：[`unselectable`属性](http://msdn.microsoft.com/en-us/library/ms537840%28v=vs.85%29.aspx)。但是，不是继承的就是这个属性。

最好的解决方案是`unselectable="on"`在您需要在 HTML 中不可选择的每个元素上放置一个属性（即在服务器端进行）。但是，如果这不是一个选项，您可以使用 JavaScript 使用[递归函数](https://stackoverflow.com/a/4358620/96100)来实现。

如果您使用的是 jQuery，您可以执行以下操作以将`unselectable`属性添加到每个具有类“不可选择”的元素及其所有后代：

```
 $(".unselectable").find("*").andSelf().attr("unselectable", "on"); 
```

演示：http: [//jsbin.com/ulazic/2](http://jsbin.com/ulazic/2)

# android - 动态 AutoCompleteTextView 上的 NullPointerException

> ID：12769552
> 
> 赞同：3
> 
> 时间：2012-10-07T14:11:06.280
> 
> 标签：android, autocompletetextview

一些用户报告此错误：

```
java.lang.NullPointerException
at android.widget.ArrayAdapter.getCount(ArrayAdapter.java:291)
at android.widget.AutoCompleteTextView$PopupDataSetObserver$1.run(AutoCompleteTextView.java:1670)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method) 
```

这是我的代码片段：

```
 private List<City> autoCompleteCities = new ArrayList<City>();
    private List<City> autoCompleteCitiesOld = new ArrayList<City>();
    private ArrayAdapter<String> autoCompleteAdapter;
    private AutoCompleteTextView cityView;

    ...

    autoCompleteAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line);
    autoCompleteAdapter.setNotifyOnChange(true);

    cityView = (AutoCompleteTextView) findViewById(R.id.city);      

    cityView.setAdapter(autoCompleteAdapter);
    cityView.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            LogUtil.i("!!!!!!!!!!!!! ontextchanged", s.toString());
            autoCompleteAdapter.clear();
            autoCompleteCitiesOld = autoCompleteCities;
            if (s.toString().length() > 2) {
                autoCompleteCities = search(s.toString());
                for (City city : autoCompleteCities) {
                    autoCompleteAdapter.add(city.getDisplayName());
                }
            }
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }

        @Override
        public void afterTextChanged(Editable s) {
        }
    }); 
```

它不会发生在我身上，但我有足够的错误报告知道它发生在几个用户身上。知道有什么问题吗？为什么这种情况只发生在少数用户身上？

我找到了这篇[文章](https://stackoverflow.com/questions/5777357/arrayadapter-getcount-nullpointerexception)，但是将新的自动完成值的获取放在 AsyncTask 中意味着结果总是落后于用户输入的一个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:17:22.677

你在哪里将 ArrayList 传递给 ArrayAdapter。NullPointerException 在计算 ArrayAdapter 中的列表长度时抛出。但是列表并没有传递给Adapter，所以默认Adapter中的列表对象包含null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:14:06.623

我的假设是，您在某处使用静态变量，这些变量在活动重新创建后无效。在这里查看我的答案：[公共静态变量和 Android 活动生命周期管理](https://stackoverflow.com/questions/12189476/public-static-variables-and-android-activity-life-cycle-management/14034105#14034105)

创建 android v.4 模拟器，转到开发人员设置，禁用后台任务，禁用多个活动，然后尝试使用您的应用程序 - 它可能会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T15:28:49.393

I had exactly the same problem with the same issue. In my case I have thousands of streets I dynamically add and remove from the list. In my case it was always reproducable when I enter some value into the AutoComplete field, let's say 3 characters (while threshold is set to 0), so the dropdown list appears, and then I delete those characters by delete button very quickly. That means I hit the delete button a lot of times. It always crashes then. I figured out that clear causes the crashes. I put the clear in beforeTextChanged and the crashes were gone:

```
public class StreetTextWatcher implements TextWatcher {

    private final StreetArrayAdapter adapter;
    private boolean alreadyAdded = false;

    public StreetTextWatcher(StreetArrayAdapter adapter) {
        this.adapter = adapter;
    }

    @Override
    public void afterTextChanged(Editable s) {
        //not used
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        if (s.length() < 1)  {
            adapter.clear();

            alreadyAdded = false;
        }
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {           
        if (s.length() == 1) {
            if (s.toString().toLowerCase(Locale.GERMAN).startsWith("a") && !alreadyAdded)  {
                adapter.addAll(StreetNames.STREETS_A);
                alreadyAdded = true;
            }

            if (s.toString().toLowerCase(Locale.GERMAN).startsWith("b") && !alreadyAdded)  {
                adapter.addAll(StreetNames.STREETS_B);
                alreadyAdded = true;
            }

            //more streets...
        }
    }
} 
```

**StreetArrayAdapter:**

```
public class StreetArrayAdapter extends ArrayAdapter<String> {

    public StreetArrayAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public void addAll(String[] streets) {
        for (String street : streets) {
            add(street);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T04:29:36.393

你在哪里添加了 String 的数组，错误的原因可能是空数组列表为： autoCompleteAdapter = new ArrayAdapter(this, android.R.layout.simple_dropdown_item_1line);

在这里你没有分配任何字符串数组

并输入您的完整代码，这将有助于人们理解问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T09:06:57.610

最好在使用如下对象之前进行空检查，并在搜索功能中进行检查..

 `````
 if (s.toString().length() > 2) {
     autoCompleteCities = search(s.toString());
     if(autoCompeleteCities!=null){     
         for (City city : autoCompleteCities) {
              autoCompleteAdapter.add(city.getDisplayName());
         }
       } 
`````

# ios - App will relaunch when resume from suspend status

> ID：12769555
> 
> 赞同：1
> 
> 时间：2012-10-07T14:11:31.650
> 
> 标签：ios

I have a simple ios game, all is well, but if I click the home to switch the game to background, wait for a while and then click the app icon, the game will relaunch. i hope it resume the saved status (status before suspending).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T12:28:34.750

它不会自动发生。相反，您需要在代码中处理应用程序状态。这包括暂停所有动画、保存游戏状态等。

您还需要考虑用户可以从后台清除应用程序。所以，游戏应该在后台运行之前保存。

请参阅 iOS 应用程序编程指南，特别是[应用程序状态和多任务处理](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# wso2esb - WSO2ESB 动态注册表项查找

> ID：12769561
> 
> 赞同：0
> 
> 时间：2012-10-07T14:12:25.313
> 
> 标签：wso2esb

我希望能够根据传入消息的内容在本地注册表中查找值。有人知道怎么做吗？我似乎找不到任何文档记录，但我假设它是产品基本功能的一部分。

如果我不清楚，我想从传入的消息中取一个元素名称（让我们说soap的第一个孩子的名字：为了参数的缘故）。建立一个注册表 url eg(concat('local:/example/registry', local-name($Body/*[1}​​)) 然后根据 url 指向的注册表项的内容设置一个属性值。 (如果可能的话）

谢谢保罗

# android - ExpandableListView的孩子的android奇怪的背景

> ID：12769565
> 
> 赞同：1
> 
> 时间：2012-10-07T14:13:01.000
> 
> 标签：android, expandablelistview

我有一组和一个孩子的 ExpandableListView。
当我扩展组时，孩子看起来像我想要的那样。请参阅： 但是当我点击孩子并将手指移到屏幕上方（无论多远 - 10 像素或 50 像素）并移开手指时，我看到了这个白色背景： 我怎样才能避免这种行为？
[![好孩子](../Images/f38eb4632096d632295a149e4e635d61.png)](https://i.stack.imgur.com/Waq2m.png)

[![坏孩子](../Images/219835536d3c8619eb8196b61579ccad.png)](https://i.stack.imgur.com/AASUy.png)

编辑 1：
我又试了一次，发现即使我仍然按下屏幕，背景也发生了变化。它发生在我的手指在组视图上方的地方。

编辑2：

```
<ExpandableListView
        android:id="@+id/list_filters"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:groupIndicator="@null" 
        android:divider="@null"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:09:06.500

那似乎是缓存颜色提示...如果您将其设置为透明，我相信您的问题将得到解决。

您可以在`yourlistView.setCacheColorHint(0)`带有`android:cacheColorHint="#00000000"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:21:00.133

这可能是因为背景颜色。尝试将选择器设置为子视图的背景。选择器应该有 state_pressed 和 state_selected 条目。

# html - HTML5 Canvas 跨域安全问题

> ID：12769566
> 
> 赞同：0
> 
> 时间：2012-10-07T14:13:05.047
> 
> 标签：html, security, canvas, cross-domain

允许操纵跨域图像数据会产生哪些具体的安全问题？

我知道，如果您可以访问这两个域，则可以允许它。我想知道为什么不建议将 Facebook / Instagram 图像加载到画布中进行操作。

请注意，在本地尝试此操作无效，必须在本地主机或服务器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:55:31.777

我不认为安全问题在于操纵——它在于从另一个页面读取或捕获屏幕截图。主题的一个变体是从图像中读取原始像素，该图像旨在显示，但不适用于 OCR ......（例如一些银行账户机密。）

[http://www.contextis.com/resources/blog/webgl2/](http://www.contextis.com/resources/blog/webgl2/)

从一开始，WebGL 实现就遭受了不符合规范的困扰，这可能导致微软在 IE 上开发替代技术，同时声称通过网页提供对 GPU 的访问本身就是一个高风险。

# c# - Click evant 出现错误：索引超出范围。必须是非负数且小于集合的大小。参数名称：索引

> ID：12769571
> 
> 赞同：0
> 
> 时间：2012-10-07T14:13:56.620
> 
> 标签：c#, indexing, click, label

我有这个功能，它将`Click event`为`label list`. `label list`是标签列表：

```
Label[] label = new Label[50]; // 50 is only a ramdom number, is not the real number of number of labels 
```

`ii`是`number of labels`从`label`。

`orar[k]`是一个包含一些字段的列表：

```
static List<Orar> orar = new List<Orar>(); 
```

`Orar`是列表的一个类。`ii`该列表具有与（标签数）相同的字段数。

这是创建`Click`事件的代码。

```
for (int k = 0; k < ii; k++)
            {
                label[k].Click += (s, e) =>
                {
                    string materie = "", profesor = "", detali = "", zi = "", formatmaterie = "", sala = "", inputbox = "", inceputora = "", formatOra = "", saptamana = "", AMPM1 = "", p1 = "";
                    int cand = 1, vl1 = 0, apm = 0;

                    materie = orar[k].materie;
                    profesor = orar[k].profesor;
                    detali = orar[k].detali;
                    zi = orar[k].zi;
                    formatmaterie = orar[k].formatmaterie;
                    sala = orar[k].sala;
                    inceputora = orar[k].inceputora;
                    formatOra = orar[k].formatora.ToString();
                    saptamana = orar[k].saptamana;
                    AMPM1 = orar[k].apm;

                    vl1 = vl11;
                    cand = 1;

                    p1 = "Detali materie !";
                    apm = 0;

                    inputbox = Programarii.InputAddOrar.Show(p1, ref materie, ref formatOra, ref sala, ref inceputora, ref formatmaterie, ref profesor, ref zi, ref detali, ref saptamana, ref vl1, ref cand, ref apm, ref AMPM1).ToString();
                };
            } 
```

问题是那行不通。我有这个错误：`Index was out of range. Must be non-negative and less than the size of the collection. Parameter name: index`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:18:05.190

我的猜测是你必须为 List 中的 orar 元素分配内存。

所以：

```
orar.Add( new Orar()); 
```

然后做你的事情：

```
orar[i].someProperty = "SetProperty"; 
```

**编辑：** 捕获的变量可能是这里的原因。为我尝试一些东西，然后这样做：

```
for (int k = 0; k < ii; k++)
            {
                int j = k ; //replace the k's in the lambdas with j  
                label[k].Click += (s, e) =>
                {
                    string materie = "", profesor = "", detali = "", zi = "", formatmaterie = "", sala = "", inputbox = "", inceputora = "", formatOra = "", saptamana = "", AMPM1 = "", p1 = "";
                    int cand = 1, vl1 = 0, apm = 0;

                    materie = orar[j].materie;
                    profesor = orar[j].profesor;
                    detali = orar[j].detali;
                    zi = orar[j].zi;  
                    formatmaterie = orar[j].formatmaterie;
                    sala = orar[j].sala;
                    inceputora = orar[j].inceputora;
                    formatOra = orar[j].formatora.ToString();
                    saptamana = orar[j].saptamana;
                    AMPM1 = orar[j].apm;

                    vl1 = vl11;
                    cand = 1;

                    p1 = "Detali materie !";
                    apm = 0;

                    inputbox = Programarii.InputAddOrar.Show(p1, ref materie, ref formatOra, ref sala, ref inceputora, ref formatmaterie, ref profesor, ref zi, ref detali, ref saptamana, ref vl1, ref cand, ref apm, ref AMPM1).ToString();
                };
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:19:05.977

如果`ii = 50`然后改变`k < ii - 1`

# wordpress - WordPress 管理面板 - “快速编辑”删除列表条目 - add_theme_support 原因？

> ID：12769574
> 
> 赞同：0
> 
> 时间：2012-10-07T14:14:39.767
> 
> 标签：wordpress

我对 WordPress 3.4.2 有疑问。谷歌没有提出任何解决方案。其实我没有找到有同样问题的人。

现在问题来了，如果我在帖子上按“快速编辑”，它会从列表中删除该帖子（所有帖子列表）。如果我重新加载页面，帖子就会再次出现。我唯一添加的是*functions.php*中的这个片段（我做了一个完整的主题，但我不相信这个主题会导致这个错误）：

```
<?php add_theme_support('post-thumbnails'); ?> 
```

你认为这是问题所在吗？还有什么可能导致此错误？

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T21:25:14.590

好的，我修好了它知道：

1.  我从页面中删除了所有 cookie
2.  然后我删除了所有名称为 wordpress 的 cookie
3.  清空缓存
4.  禁用的 JavaScript
5.  启用 javascript

它再次起作用。我不知道，可能是什么问题。我希望它不会再发生。无论如何感谢所有人

# javascript - 更改输入时提交按钮的不透明度：focus

> ID：12769577
> 
> 赞同：2
> 
> 时间：2012-10-07T14:15:08.410
> 
> 标签：javascript, css, forms, input, opacity

我所拥有的是一个搜索栏和一个图像作为`submit`按钮。`submit`我希望按钮的不透明度`0.5`处于正常状态，并且`1.0`当搜索栏处于打开状态时`:focus`。

这是我的 HTML：

```
<form id='searchThis' action='/search' method='get' style='display: inline;'>
<input id='searchBox' name='q' onblur='if(this.value==&apos;&apos;)this.value=this.defaultValue;' onfocus='if(this.value==this.defaultValue)this.value=&apos;&apos;;' style='display:inline;font-family:Segoe UI, Microsoft Tai Le, trebuchet MS,&apos;lucida grande&apos;;width: 155px;color:#636363;' type='text' value='Search' vinput=''/>
<input id='submitsearch' alt='Search' height='20px' src='http://1.bp.blogspot.com/-Ab4nALwSEdw/T4LI1pym1LI/AAAAAAAABBA/_oQltx3svas/s320/search.png' style='display:inline; padding-left: 10px; margin-top:1px; position: absolute; opacity:0.5;' title='Search' type='image' width='20px'/>
</form> 
```

但我不知道我应该使用 CSS 还是 Javascript，而且我也不擅长。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-07T14:21:04.907

CSS：

```
#submitsearch {
  opacity: 0.5;

     -moz-transition: opacity 0.5s;
      -ms-transition: opacity 0.5s;
       -o-transition: opacity 0.5s;
  -webkit-transition: opacity 0.5s;
          transition: opacity 0.5s;
}

#searchBox:focus + #submitsearch {
  opacity: 1.0
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:23:29.033

你可以使用 css

```
#submitsearch:hover {opacity:0.5} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T14:25:39.327

您可以使用 CSS：

```
#submitsearch { opacity: 0.75; }
#submitsearch:hover, #submitsearch:active { opacity: 1; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T14:35:09.953

当我向 Newtron 的 CSS3 解决方案致敬时——我通常鼓励使用 jQuery 以获得更大的跨浏览器兼容性；以下是我通常会如何处理这种情况：http: [//jsfiddle.net/earthdesigner/qc6Qf/1/](http://jsfiddle.net/earthdesigner/qc6Qf/1/)

# php - 在类中包含字符串

> ID：12769579
> 
> 赞同：-1
> 
> 时间：2012-10-07T14:15:23.457
> 
> 标签：php

> **可能重复：**
> [我如何在 php 类中包含 php 文件](https://stackoverflow.com/questions/5578732/how-can-i-include-php-file-in-php-class)

我有一个这样开头的 PHP 文件：

```
<?php

include("strings.php");

class example { 
```

strings.php 的格式如下

```
$txt['something'] = "something";
$txt['something_else'] = "something else"; 
```

我的问题是，如何`$txt['something']`在课堂上调用内部方法`example`？我知道`$this->txt['something']`不起作用

这可能是基本的东西，但我刚开始学习 PHP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:23:20.740

Depends:

***Do the entire (or most of the) object need the strings to work, or just a method or two?***

*   If yes, you should pass it in the constructor of the object:

    ```
    class Example {
        private $texts;

        public function __construct($texts) {
            $this->texts = $texts; //Now the array is available for all of the methods in the object, via $this->texts
        }
    }

    $example = new Example($txt); 
    ```

*   If not, you should pass it in **to the relevant method** which needs it.

    ```
    class Example {
        private $texts;

        public function method($texts) {
            //Do stuff with $texts
        }
    }

    $example = new Example;
    $example->method($txt); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:22:11.373

An included file that just defines variables generally is a sign for bad design and definitely not OOP. But if you have to work with that, include the file from within the class and let it *return* the array:

```
class Example
{
    protected $txt;
    public function __construct($include = 'strings.php')
    {

        $this->txt = include($include);
    }
    public function someMethod()
    {
        return $this->txt['somestring'];
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-07T14:23:01.100

Unless strings.php contains any more wrapping code $txt is a global variable. Php does not allow access to normal global variables from within functions and methods unless explicitly declared.

[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

You call it by first declaring it in the function

```
class MyClass{

public function MyMethod() {
{
    global $txt;
    echo $txt['fddf']; 
```

This is a citation from php.net

```
<?php
$a = 1; /* global scope */ 

function test()
{ 
    echo $a; /* reference to local scope variable */ 
} 

test();
?>

This script will not produce any output because the echo statement refers to a local version of the $a variable 
```

# c# - 使用文本和图像 WPF/C# 动态填充 ListView

> ID：12769580
> 
> 赞同：1
> 
> 时间：2012-10-07T14:15:23.603
> 
> 标签：c#, wpf, image, listview

我对 .NET 4.0 中的列表视图控件感到非常沮丧。我想将文本添加到一行的第一列，然后将图像添加到第二列，然后将文本添加到第三列（全部在顶行），然后对下一行执行相同操作。但是，我的代码只是将文本添加到顶行的所有三列，然后将图像添加到下一行，然后将文本添加到下一行。我不知道如何指定行/列索引（例如 [1,2] 用于第二行第三列）。

我知道这似乎是一个非常基本的查询，那里有很多信息，但我是 .NET 的新手，我读的越多，我就越困惑:-(

我的 C# 代码是：

```
 ListViewItem lstItem1 = new ListViewItem();
      lstItem.Content = "Picture 1";
      lstView.Items.Add(lstItem);
      Image lstImage = new Image();
      ListViewItem lstItem2 = new ListViewItem();
      lstItem2.Source = SrcBmp;
      lstItemImage.Content = lstImage;
      lstView.Items.Add(lstItem2);
  ListViewItem lstItem3 = new ListViewItem();
      lstItem3.Content = "Blah blah";
      lstView.Items.Add(lstItem3); 
```

XAML在这里：

```
<ListView Height="412" HorizontalAlignment="Left" Margin="312,49,0,0" Name="lstView"     VerticalAlignment="Top" Width="636" ItemsSource="{Binding}" FontSize="12"> 
                              <ListView.View>
                    <GridView>
                            <GridViewColumn Header="Photo No." Width="50"/>
                            <GridViewColumn Header="Photo" Width="150"/>
                        <GridViewColumn Header="Description" Width="300"/>
                    </GridView>
                    </ListView.View>
               </ListView> 
```

提前谢谢了。

维格姆酋长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:22:00.687

you have to create a `StackPanel` for your Content property and add the Image and text to that StackPanel. e.g.

```
<Window.Resources>
    <DataTemplate x:Key="ItemTemplate">
        <StackPanel Orientation="Horizontal">
            <Image Width="10" Height="10" Stretch="Fill" Source="{Binding Cover}"/>
        <Label Content="{Binding Title}" />
        </StackPanel>
    </DataTemplate>
</Window.Resources>

<Grid x:Name="grid">
    <ListView ItemTemplate="{StaticResource ItemTemplate}" ItemsSource="{Binding Albums}" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:19:13.483

您添加了 3 行并获得了 3 行。应该不足为奇。

ListViewItem 只有一个内容。

您需要具有这两个属性的类或支柱。
然后将这些对象添加到 List 之类的集合中，并将 ListView 绑定到该集合。
然后在 GridViewColumn 中，绑定路径是属性的名称。

```
public class Album 
{
    public string Title { get; set; }
    public Image Img  { get; set; }
} 
```

# javascript - 在 TypeScript 中使用 Raphael JavaScript 库

> ID：12769582
> 
> 赞同：14
> 
> 时间：2012-10-07T14:15:39.413
> 
> 标签：javascript, visual-studio-2012, intellisense, typescript

是否可以在 TypeScript 中使用 JavaScript 库？

例如，我想在 TypeScript 中使用[Raphael](http://raphaeljs.com/)，并将 JS 文件添加到我的文件中`/scripts folder`并将它们添加到`_references.js`.

但是当我想在我的 TS 文件中声明时：

```
var r = Raphael(10,50,640,480); 
```

Intellisense 总是说：

> `Raphael does not exist in the current scope.`

并且 TS 文件无法编译。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-22T00:29:37.463

此行是环境声明：

```
declare var Raphael: any; 
```

虽然它有效，但您没有真正的打字。

[DefinitiveTyped](https://github.com/borisyankov/DefinitelyTyped)项目已经有 Raphael 的定义。

下载[raphael.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/raphael/raphael.d.ts)文件。

并像这样使用它：

```
/// <reference path="../Definitions/raphael.d.ts" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:35:22.960

如前所述，您可以将 Raphael 声明为“任何”类型的 var，但如果您想要 IntelliSense 和编译时检查，则需要一个声明文件。我已经在这里进行了初步尝试：[https ://bitbucket.org/keesey/raphaelts](https://bitbucket.org/keesey/raphaelts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T03:51:58.717

我支持前面的答案，将 Raphael 声明为类型为 any 的 var，它会起作用。但是如果你真的想利用类型脚本，那么为 Raphael js 创建声明文件。因此，每当您使用 Raphael js 时，它都会提供智能感知。这是Jquery 声明文件的[链接](http://typescript.codeplex.com/SourceControl/changeset/view/fe3bc0bfce1f#samples/jquery/jquery.d.ts)，该文件可在 typescript 站点提供的示例中找到。看看它会有所帮助。如果需要任何进一步的细节，请告诉我。

# ios - ScrollView 在 iOS 6 中搞砸了

> ID：12769583
> 
> 赞同：0
> 
> 时间：2012-10-07T14:15:49.163
> 
> 标签：ios, xcode, ios6, scrollview

当我在 Xcode 中制作和设置滚动视图时，它永远不会工作。它根本不会滚动并显示我的内容！我已经编码了它的后端，但不行！从 iOS 4 开始我就一直在使用这个教程：[Devx Scrollview Tutorial](http://www.devx.com/wireless/Article/45113)

现在，我认为由于新 iPhone 上的新屏幕尺寸，它在 iOS 6 中被打破了。这是我一直在使用的后端代码：

```
 scrollView.frame = CGRectMake(0, 0, 320, 520);

//---set the content size of the scroll view---
[scrollView setContentSize:CGSizeMake(320, 520)];
// Do any additional setup after loading the view. 
```

Xcode 中的滚动视图大小为宽度：320，高度：520。

我究竟做错了什么？这可能是一些愚蠢的事情。

**更新：**

```
 - (void)viewDidLoad
{
    [super viewDidLoad];
      [self.overlay removeFromSuperview];
    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];

    [nc addObserver:self selector:@selector(keyboardWillShow:) name:
     UIKeyboardWillShowNotification object:nil];

    [nc addObserver:self selector:@selector(keyboardWillHide:) name:
     UIKeyboardWillHideNotification object:nil];

    tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                            action:@selector(didTapAnywhere:)];
    [self customizeAppearance];
     self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"stone.png"]];

    [scrollView setScrollEnabled:YES];
    scrollView.frame = ([UIScreen mainScreen].bounds);

    //---set the content size of the scroll view---
    [scrollView setContentSize:CGSizeMake(320, 800)];

    // Do any additional setup after loading the view.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:36:13.220

您将框架大小和内容大小设置为相同。您希望滚动视图滚动到哪里？您应该将`UIScrollView`'s设置`frame`为您希望视口在屏幕上的位置（可能`[UIScreen mainScreen].bounds`），并将's 设置为`contentSize`您希望滚动到达的总区域，听起来您希望它是 320x520。

我写了一个简单的示例程序。我创建了一个新的“单一视图”项目并将其放入`viewDidLoad`主 VC 的方法中：

```
UIScrollView *sv = [[UIScrollView alloc] initWithFrame:CGRectMake(20, 20, 280, 424)];
UILabel *top = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 280, 50)];
top.text = @"TOP";
top.textColor = [UIColor greenColor];
top.backgroundColor = [UIColor blackColor];
top.textAlignment = UITextAlignmentCenter;
[sv addSubview:top];

UILabel *bottom = [[UILabel alloc] initWithFrame:CGRectMake(0, 500, 280, 50)];
bottom.text = @"BOTTOM";
bottom.textColor = [UIColor greenColor];
bottom.textAlignment = UITextAlignmentCenter;
bottom.backgroundColor = [UIColor blackColor];
[sv addSubview:bottom];

sv.backgroundColor = [UIColor orangeColor];
sv.contentSize = CGSizeMake(280, 550);

[super.view addSubview:sv]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T03:06:20.290

```
-(void)screenWasSwiped {

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
[scrollpage setScrollEnabled:YES];

[scrollpage setContentSize:CGSizeMake(320, 1300)];

NSLog(@"you swiped the screen UP");

}else {
    [scrollpage setScrollEnabled:YES];

    [scrollpage setContentSize:CGSizeMake(320, 950)];

} 
```

}

-（无效）viewDidLoad {

```
UISwipeGestureRecognizer *swipeUP = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(screenWasSwiped)];
swipeUP.numberOfTouchesRequired = 1;
swipeUP.direction=UISwipeGestureRecognizerDirectionUp;
[self.view addGestureRecognizer:swipeUP]; 
```

}

# php - 删除多个字段失败

> ID：12769588
> 
> 赞同：1
> 
> 时间：2012-10-07T14:16:21.067
> 
> 标签：php, mysql, sql, database, sql-delete

我希望能够从数据库中删除多个用户，但是下面的代码在某些时候会失败。发生的情况是只有最后点击的用户（即数组*$userIds*中的最后一个元素）被删除。

我究竟做错了什么？

**来自 UserModel.php：**

```
public function RemoveUser(Array $userIds) {

    $query = 'DELETE FROM Users WHERE id IN (?)';

    $stmt = $this->m_db->Prepare($query);

    foreach ($userIds as $value) {
        $stmt->bind_param('s', $value);
    }

    $ret = $this->m_db->DeleteUsers($stmt);

    $stmt->Close();

    return $ret;

} 
```

**来自 Database.php：**

```
public function DeleteUsers(\mysqli_stmt $stmt) {

    if ($stmt === FALSE) {
        throw new \Exception($this->mysqli->error);
    }

    if ($stmt->execute() == FALSE) {
        throw new \Exception($this->mysqli->error);
    }

    if ($stmt->fetch()) {
        return true;
    } else {
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:32:51.043

正如一些评论所暗示的，您需要`?`为每个用户 id 设置一个。目前，您正在尝试将每个用户 ID 绑定到相同的参数，因此只有最后一个实际应用。

```
$c = Array();
foreach ($userIds AS $u) {
  $c[] = "?";
}
$inPart = "(" . implode(",", $c) . ")";
$query = "DELETE FROM Users WHERE id IN $inPart"; 
```

由于`bind_param`期望每个变量作为单独的参数，因此您必须做一些 php 魔术来一次传递整个数组。您必须将绑定循环更改为：

```
call_user_func_array(array($stmt, 'bind_param'), array_unshift($userIds, 's')); 
```

这基本上叫`$stmt->bind_param('s', $userIds[0], $userIds[1]....)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T21:23:14.220

我修改了[Dan Simons 的答案](https://stackoverflow.com/a/12769710/937624)并设法让它发挥作用。

此解决方案的问题之一是需要引用**call_user_func_array中的第二个参数，**[这个问题](https://stackoverflow.com/q/2045875/937624)是关于。然而，通过使用函数**makeValuesReferenced**解决了这个问题。

编码：

```
public function RemoveUser(Array $userIds) {

    $c = Array();
    $s = '';

    foreach ($userIds AS $u) {
        $c[] = "?";
        $s.= 's'; 
    }

    $inPart = "(" . implode(",", $c) . ")";
    $query = "DELETE FROM Users WHERE id IN $inPart"; 

    $stmt = $this->m_db->Prepare($query);

    array_unshift($userIds, $s);

    call_user_func_array(array($stmt, 'bind_param'), $this->makeValuesReferenced($userIds));

    $ret = $this->m_db->DeleteUsers($stmt);    // Execution and fetching

    $stmt->Close();

    return $ret;

}

public function makeValuesReferenced(Array $arr) {
        $refs = array();

        foreach($arr as $key => $value)
            $refs[$key] = &$arr[$key];
        return $refs;

} 
```

# visual-studio-2012 - regtlibv12 发生了什么？

> ID：12769590
> 
> 赞同：34
> 
> 时间：2012-10-07T14:16:25.537
> 
> 标签：visual-studio-2012, windows-8, .net-4.5, regtlib

`regtlibv12.exe`我在分区上全新安装了 Windows 8，安装了 Visual Studio 11/2012 Professional，但在里面找不到`C:\Windows\Microsoft.NET\Framework\v4.0.30319`.

下面是我的 Windows 7 分区的屏幕截图，带有 .Net 4.0（和 regtlibv12）：

![视窗 7 - .Net 4](../Images/566072f9d32f89851b0e11642c31c080.png)

下面是带有 .Net 4.5（并且没有 regtlibv12）的 Windows 8：

![视窗 8 - .Net 4.5](../Images/37650648dec65ed42c2e8bf8261999c0.png)

regtlibv12**不再**是 .Net 框架的一部分了吗？我还需要安装 .Net 4.0 吗？如果我在 4.5 之上安装 .Net 4.0 会发生什么？我知道它们都位于硬盘驱动器上的同一位置，并且 4.5 有效地覆盖了 4.0，并且 Windows 8 上默认使用 4.5。我是否需要安装 4.0，然后重新安装 4.5 才能**恢复 regtlibv12**？

谢谢

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-07T16:15:37.793

它从来都不是框架的一部分。它是完全无证的。然而，有一个非常一致的谣言，很多程序员在他们的 v2.0.50727 或 v4.0.30319 目录中找到了它，并认为它可以解决注册问题。很多论坛帖子都提到了。

它在这些文件夹中显示的确切方式很难进行逆向工程，我看到的唯一模式是当您自己安装框架时它就会出现。并且当框架预装在机器上时不会出现。这有点道理，框架目录中有几个 .tlb 文件需要注册。它们包含客户端代码可能依赖的 .NET [ComVisible] 类型的类型信息。注册类型库的常规方式不适用于那些 .tlb 文件，因为它们没有嵌入到常规 COM 服务器中。额外的猜测是，在预安装的 .NET 版本中不需要该工具，因为注册信息已汇总到常规 Windows 设置中。

如果您已经依赖该工具，那么除了从另一台机器复制 .exe 之外，您将无能为力。或者解决你需要从另一端使用它的原因，这样你就不再需要它了：

*   这是忘记将 /tlb 选项与 Regasm.exe 一起使用的解决方法。当客户端代码尝试使用来自另一个线程的 COM 接口时，这可能会在运行时产生 TYPE_E_CANTLOADLIBRARY 错误。类型库提供标准编组器编组方法参数所需的类型信息。使用 /tlb 选项来解决这个问题。

*   这是让 COM 服务器显示在 Project + Add Reference，COM 选项卡中的一种解决方法。该选项卡列出了已注册的类型库。然而，这不是一个合适的解决方法，除了在构建服务器上，您可以编译您的代码，但由于注册未完成，您无法运行它。正确的方法是使用作者提供的安装程序或在紧要关头使用 Regsvr32.exe，以便注册类型库和 CLSID 键。

*   对于不注册其类型库的 COM 服务器，这是一种解决方法。与上面类似，但注册类型库是可选的，通常只需要在您的开发机器上，而不是在运行服务器的机器上。大多数可以使用类型库的工具都可以显式添加它们，而不是依赖于 TypeLib 注册表项。Visual Studio IDE 也是如此，您可以使用“浏览”选项卡直接选择 .tlb 文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-06-04T11:32:10.560

请参阅 Hans 对所提出问题的出色回答；这个答案解释了如何获取上述可执行文件。

1.  [从https://www.7-zip.org/download.html](https://www.7-zip.org/download.html)安装 7-Zip
2.  [从https://github.com/activescott/lessmsi/releases](https://github.com/activescott/lessmsi/releases)下载 lessmsi/Less MSIérables

（或者你可以使用[Chocolatey](https://chocolatey.org)来安装以上两个：包名分别是`7zip`和`lessmsi`。）

3.  [从https://www.microsoft.com/en-gb/download/details.aspx?id=17718](https://www.microsoft.com/en-gb/download/details.aspx?id=17718)下载 .NET Framework 4.0 独立安装程序
4.  使用 7-Zip 打开`dotNetFx40_Full_x86_x64.exe`从上一步下载的文件`netfx_Core_x64.msi`，将文件解压缩`netFxCore.mzz`到临时目录
5.  使用 lessmsi 打开`netfx_Core_x64.msi`，向下滚动文件列表并选择`regtlibv12.exe`（带有 Component =`regtlibv12_exe_amd64`的一个用于 x64 系统，另一个用于 x86，或者两者都需要），然后单击“提取”按钮
6.  浏览并选择要将文件提取到的目录，单击确定
7.  瞧，你现在有了`regtlibv12.exe`！

*   注意：我不是律师，不知道上述是否违反任何法律，如果这样做并给您带来麻烦，我也不承担责任。至少，**不要**再分发`regtlibv12.exe`（不管这样做是非法的，如果你认为你需要 - 你要么不这样做，要么你的软件有大问题）。

# java - 当参数作为通用 ArrayList 传递时如何添加

> ID：12769591
> 
> 赞同：1
> 
> 时间：2012-10-07T14:16:34.610
> 
> 标签：java, generics, collections

我有一个将泛型`ArrayList<?>`作为参数之一的函数，我发现当我尝试使用`ArrayList`

> 没有找到适合 add(MyClass) 的方法

我想要完成的是传递类和 ArrayList 的参数，并让函数用类的对象填充 ArrayList。虽然如果我可以从我的函数中创建并返回 ArrayList，那也很好（少一个参数会很好）。

这里有一些代码来说明我目前正在尝试如何解决这个问题：

```
public void myFunction(Class clazz, ArrayList<?> myList)
{
  Object myObject=null;
  try{myObject = clazz.newInstance();}catch(Exception e){}      
  myList.add(myObject);
} 
```

...或者可能是这样的：

```
public ArrayList<?> myFunction(Class clazz)
{
  ArrayList<clazz> myList = new ArrayList<clazz>();
  Object myObject=null;
  try{myObject = clazz.newInstance();}catch(Exception e){}      
  myList.add(myObject);
} 
```

如果有人可以请：

a) 向我展示一些执行此操作的代码
b) 解释如何使用泛型来实现我的目标
或 c) 让我知道哪里出错并提供另一种方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T14:31:47.813

为了向 ArrayList 添加一些东西，你需要使它的类型定义逆变。

所以像

```
public <T> void doSomething(...,List<? super T> args,...) 
```

会工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T14:36:03.380

您的第一种方法可以固定为：

```
public <T>
void myFunction(Class<T> clazz, ArrayList<T> myList) {
    T myObject = null;
    try {
        myObject = clazz.newInstance();
    } catch (Exception e) {
    }
    myList.add(myObject);
} 
```

第二个为：

```
public <T>
ArrayList<T> myFunction(Class<T> clazz) {
    ArrayList<T> myList = new ArrayList<T>();
    T myObject = null;
    try {
        myObject = clazz.newInstance();
    } catch (Exception e) {
    }
    myList.add(myObject);
    return myList;
} 
```

这里`T`称为类型参数。您可以使用任何字母或标识符来代替`T`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T14:18:49.940

您可以改用 an `ArrayList<Object>`，这将允许您将对象添加到列表中。至于[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)，如果没有看到整个代码，就很难说你是如​​何使用它的。

```
public List<?> myFunction(Class clazz) {
    List<Object> l = new ArrayList<Object>();
    Object o = clazz.newInstance();
    l.add(o);
    return l;
} 
```

# cakephp - CakePHP 1.3 代码创建 Html 标签

> ID：12769593
> 
> 赞同：0
> 
> 时间：2012-10-07T14:16:46.370
> 
> 标签：cakephp, cakephp-1.3

我想创建一个链接标签

> `<link rel="next" href="localhost/site/posts/index" />`

通过 cakephp 1.3 代码。我需要把它放在头部，但是从视图中定义它

我试过使用 $html->meta()，比如 $html->meta("some title", "localhost/site/posts/index", array('inline' => false, 'rel' => 'next ') ) ，但我明白了

> `<link title="some title" rel="next" type="application/rss+xml" href="localhost/site/posts/index">`

，如果我尝试摆脱类型或更改它，我只会得到以下内容`<meta rel="next">`，我也尝试过 $html->css()，但我无法删除/更改 type="text/css" 部分

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:20:53.763

将参数作为数组传递，这样会跳过大部分自动魔术，第二个参数将充当内联选项：

```
$html->meta(array('rel' => 'next', 'link' => 'localhost/site/posts/index'), false); 
```

刚刚用 CakePHP 1.3.15 测试过

# jquery - 用于字体大小的 jQuery UI 滑块

> ID：12769605
> 
> 赞同：3
> 
> 时间：2012-10-07T14:18:22.197
> 
> 标签：jquery, user-interface, slider, font-size

我正在尝试将 jQuery UI Slder 作为选择“字体大小”的滑块。我不知道我的语法中的问题在哪里，但它不起作用。文本输入中的数字正在改变，但文本大小没有......

[**例子**](http://jsfiddle.net/ynternet/AhcD6/)

HTML：

```
<div id="slider"></div>
<input type="text" id="font_size" style="border:0; color:#222; font-weight:bold;" />

<div class="textBox">Lorem ipsum dolor sit amet, id quaestio percipitur vel. Zril propriae vis in, an mei commune invidunt. Nam et nibh consul, vim ei facer nonumes principes. Nec te facilis noluisse. Utinam doming perfecto eum id, mea at patrioque liberavisse, at sit abhorreant referrentur.</div> 
```

jQuery :

```
$(function() {
    var aFontsSizeArray = new Array('5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '24', '26', '28', '30', '33', '36', '39', '42', '45', '48', '55', '65', '75', '85', '95', '110', '130', '150');
    $('#slider').slider({
        value: 7,
        min: 1,
        max: 35,
        step: 1,
        slide: function(event, ui) {
            var sFontSizeArray = aFontsSizeArray[ui.value];
            $('#font_size').val(sFontSizeArray + ' px');
            $('.textBox').css('font-size', sFontSizeArray );
        }
    });
    $('#font_size').val((aFontsSizeArray[$('#slider').slider('value')]) + ' px');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:22:15.570

您忘记`+ 'px'`在代码中添加：

```
$('.textBox').css('font-size', sFontSizeArray + 'px' ); 
```

### 小提琴：http: [//jsfiddle.net/AhcD6/3/](http://jsfiddle.net/AhcD6/3/)

# java - 有什么方法可以从“地图”中获取密钥（或整个条目）？

> ID：12769606
> 
> 赞同：10
> 
> 时间：2012-10-07T14:18:23.370
> 
> 标签：java, map

有什么方法可以**有效地**`HashMap`从一个（或另一个合适的`Map`）获取密钥（或整个条目） ？

 **在有人说之前，我从不需要它：我需要。我有一个这样的循环

```
for (long i=0; i<1e12; ++i) {
    Key key = new Key(i);
    Value value = map.get(key);
    if (something(key, value)) list.add(key);
} 
```

如果我可以用类似的东西 替换（新实例将有资格获得 GC），那么我`key`不必要地占用了可以保存的内存。**虽然它们是相等的，但重用旧实例会节省内存。**`list.add(key)``list.add(map.getKey(key))`

 **我知道我可以将密钥嵌入到值中或使用 Guava 的`Interner`; 两者都有帮助，但都需要一些内存。

* * *

解决一些误解评论：如果效率不是问题，则可以执行以下操作

```
Key getKeyFromMap(Key key, Map<Key, ?> map) {
    for (Key key2 : map.keySet()) {
        if (key.equals(key2)) return key2;
    }
    return null;
} 
```

* * *

接受的答案中描述的最有效的解决方案：

```
public static <K, V> K getKey(K key, HashMap<K, V> map) {
    final Entry<K, V> entry = map.getEntry(key);
    return entry==null ? null : entry.getKey();
} 
```

问题是它必须放入`package java.util`，因为它使用包私有方法。使用这种方法可能很危险，但在我的“运行一次”用例中没有问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T15:23:24.217

为了做到这一点，你准备犯下多少邪恶？

该`Map`界面不允许您检索密钥或条目。`Set`界面也不行。`HashMap`的公共接口也没有。

但是`HashMap`的*包*接口可以（至少在 Sun JDK 中）。看看[源代码](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/tip/src/share/classes/java/util/HashMap.java)；在第 355 行，有一个名为的方法`getEntry`，其开头如下：

```
 /**
   * Returns the entry associated with the specified key in the
   * HashMap.  Returns null if the HashMap contains no mapping
   * for the key.
   */
  final Entry<K,V> getEntry(Object key) { 
```

我相信这正是您所需要的。您可以通过反射调用它，或者将您自己的类偷偷放入`java.util`包中。Java 维护人员将来可能会取消此方法，并且它可能不会出现在所有平台上，但如果您准备好忍住并承担风险，这是一个简单的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T15:39:36.337

`NavigableMap`has `ceilingKey`，这将让您`equals`在返回的 Key 上使用以查看是否有该确切键的条目。但是您不能使用 HashMap，您需要 TreeMap 或其他东西，这可能会抵消任何内存性能优势（并且您的密钥需要实现`Comparable`）。此外，javadoc 没有说明返回的键是否与 Map 中使用的对象完全相同，因此它可能是特定于实现的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-02T22:23:10.687

我找到了另一种解决方法，利用集合（或映射）中元素（或键）比较的实现。

java.util 中的所有集合（或映射）实现（据我所知）都是通过用户搜索对象的`o.equals(e)`时间来比较元素。`o`所以我想出了以下解决方案：

```
public static <K> K getOriginalKey(final Map<K, ?> map, final K key) {
    OriginalElementExtractor extractor = new OriginalElementExtractor(key);
    map.containsKey(extractor);
    return (K) extractor.result;
}

public static <E> E getOriginalElement(final Collection<E> coll, final E element) {
    OriginalElementExtractor extractor = new OriginalElementExtractor(element);
    coll.contains(extractor);
    return (E) extractor.result;
}

private static class OriginalElementExtractor {

    final Object key;
    final int hash;
    Object result;

    OriginalElementExtractor(final Object key) {
        this.key = key;
        hash = key.hashCode();
    }

    @Override
    public boolean equals(final Object o) {
        boolean eq;
        if (eq = key.equals(o))
            result = o;
        return eq;
    }

    @Override
    public int hashCode() {
        return hash;
    }
} 
```

Collection（或映射）将调用该`OriginalElementExtractor.equals(Object)`方法来检查是否相等，并且原始元素将被传递。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T14:22:02.093

**编辑**：我认为你想要做的是测试内存效率，如果 a`key-Object`是你的关键`Map`：

```
Key getKeyFromMap(Key key, Map<Key, ?> map) {
  if(map.containsKey(key){
    return key;
  }else{
    return null;
  }
} 
```

老答案：

```
Map<String, Value> map = new HashMap<>();//Java 7 diamond operator.
Set<String> keySet = map.keySet();

for(String key: keySet){
  System.out.println(key + " is key in the map");
}
Object[] keyArray = keySet.toArray(); 
```

`Map#keySet()`返回一个`Set`包含映射中所有使用的键的值。您可以遍历您的 Set。一套不像你`Map`的那样订购，也是。但是您可以将其转换为数组并`Set#toArray()`返回一个对象数组，该数组可以转换为`Set`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T14:25:14.760

我建议你这样处理它。

```
 for (Iterator i = map.keySet().iterator(); i.hasNext();) {
        String key = (String) i.next();
        if (key.equals(value)) {
            ....
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-07T14:39:17.660

你想要它看起来的条目集。

```
for (Entry<Key,Value> entry : map.entrySet()) {
    if (something(entry.getKey(), entry.getValue())) {
        list.add(entry.getKey());
    }
} 
```

如果不利用有关您所获得数据的一些信息，您不会变得比这更好。

此外，[API 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)是您的朋友。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-07T14:58:43.120

如果您需要`Key`给定的`Value`，有三种可能性：

1.  遍历键集并找到您的值的键（错误的运行时）。
2.  除了原始映射（Value -> Key）之外保存逆映射（双倍空间消耗）
3.  [`HashBiMap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/HashBiMap.html)使用有方法的番石榴`inverse`。它将返回您的地图的倒数。然后，您可以简单地使用`inverse.get(value)`来获取您的密钥。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-12T14:58:40.320

我还没有找到一个好的解决方案，所以完成将密钥嵌入到值中，就像你说的那样：

```
 Map<K, Entry<K, V>> map = new HashMap<K, Entry<K, V>>();
    K key = new K(...);
    map.put(key, new AbstractMap.SimpleEntry<K, V>(key, value));

    //then I can retrieve the reference of original key, given another instance of de key
    Entry<K, V> keyObj = map.get(new K(...)); 
```****

# php - Sphinx's search.exe returning results correctly but the PHP API is returning nothing

> ID：12769614
> 
> 赞同：0
> 
> 时间：2012-10-07T14:19:28.293
> 
> 标签：php, api, sphinx, config

I've recently installed sphinx for my MySQL database, and have configured the config file & I am getting correct results when running search.exe, but when I use the PHP API (along with its wrapper for CodeIgniter ). I am still 0 zero results. Now I am pretty sure that my php code is correct since it is basic (get the keys, run a mysql query, and the return the results). What reasons could cause such a problem? here is the searchd portion of the sphinx config file, do I need to modify anything? :

```
searchd
{
# listen            = 9312
listen          = 9306:mysql41
port            = 3312
log         = C:/sphinx/log/searchd.log
query_log       = C:/sphinx/log/query.log
read_timeout        = 5
max_children        = 30
pid_file        = C:/sphinx/log/searchd.pid
max_matches     = 1000
seamless_rotate     = 1
preopen_indexes     = 1
unlink_old      = 1
workers         = threads # for RT to work
binlog_path     = C:/sphinx/data

} 
```

and here is my search.php sphinx query:

```
 $search_string=$this->input->post('q');
        $this->load->library('Sphinxclient');
        $this->sphinxclient->setMatchMode(SPH_MATCH_ANY);
        $this->sphinxclient->SetArrayResult(TRUE);
        $users_ids=$this->sphinxclient->Query('users_info',$search_string); 
```

Now I am not sure how the API or sphinx finds the mysql directory and connects to it, but I am reading the sphinx documentation, and in the basic api functions section, it says that the function SetServer has default values of "localhost", and port "9312". Could this be the problem since in my config file I have a different port and I have commented out the 9312 listening?

Here is my definition of users_info source and index (although I doubt this is the problem since search.exe is able to get results).

```
source users_info
{
type                            = mysql

sql_host                        = localhost
sql_user                        = admin
sql_pass                        = admin
sql_db                          = users
sql_sock                        =  /var/run/mysqld/mysqld.sock
sql_port                        = 3306                  

sql_query                       = \
        SELECT id, fullname,username FROM users_info;

sql_query_info          = SELECT * FROM users WHERE id=$id
} 
```

and index:

```
index users_info
{
source          = users_info
path            = C:/sphinx/data/users_info
docinfo         = extern
charset_type        = utf-8
} 
```

Also, one more thing, in the API, I flipped the arguments in the Query function in the API, I have fixed that but that didn't fix the issue.

Any Ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:36:08.193

> 它说函数 SetServer 的默认值为“localhost”和端口“9312”。这可能是问题，因为在我的配置文件中我有一个不同的端口并且我已经注释掉了 9312 监听？

那肯定是问题的根源。您需要服务器侦听客户端尝试连接的端口。它们必须相同。

就此而言，您甚至运行了 searchd 服务器守护程序吗？在 windows 下通常将其安装为服务。

（并检查防火墙是否阻止访问 searchd 正在侦听的端口）

# java - 字符串中的 replaceAll 方法如何工作

> ID：12769615
> 
> 赞同：0
> 
> 时间：2012-10-07T14:19:56.227
> 
> 标签：java, string, loops, replaceall

我需要检查一个字符串中不同字符的数量，其长度可以长达 20,000，并且总测试用例 <=10,000。我通过替换字符串的其他字符然后检查它的长度来做到这一点，如下面的代码所示：

```
 int no7=myString.replaceAll("[^7]","").length();
 int no0_3=myString.replaceAll("[^0-3]","").length();
 int no5_6=myString.replaceAll("[^56]","").length(); 
```

我想知道 replaceAll 方法是如何工作的，以及如果我在一个循环中检查字符串的每个字符是否会更快。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:29:32.870

首先，您可以通过`+`在字符类（例如`[^7]+`）之后添加一个来加快替换速度。这将替换连续运行的不需要的字符，而不是一次只替换一个。根据您的输入字符串，这可能会显着提升性能。

但在你的情况下，我不会真正更换任何东西并检查长度。你想要的是 7 的数量，0 到 3 之间的位数以及 5 和 6 的数量。所以只需编写一个循环来检查这些：

```
int no7 = 0, no0_3 = 0, no5_6 = 0;
for (int i = 0; i < myString.length(); i++) {
  char c = myString.charAt(i);
  if (c == '7') no7++;
  if (c >= '0' && c <= '3') no0_3++;
  if (c == '5' || c == '6') no5_6++;
} 
```

这会更快，因为您不必构造三个单独的字符串来检查它们的长度并再次丢弃它们，并且您还可以节省正则表达式的构造、解析和运行时。因此，对每个字符的简单迭代（这是正则表达式无论如何都必须做的）因此将您的时间*最多*减少到原始运行时间的三分之一，如果不是更多的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:29:19.687

replaceAll 在内部构造 Pattern，然后在提供的字符串上调用 Matcher 方法。模式的编译需要一些时间，所以如果你经常这样做——那么在你的代码中使用预编译的模式作为静态最终字段是最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T14:31:15.220

> 我想知道 replaceAll 方法是如何工作的

我认为[API 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)已经清楚地提到了它：

“调用这种形式为 str.replaceAll(regex, repl) 的方法会产生与表达式完全相同的结果

Pattern.compile(regex).matcher(str).replaceAll(repl)"

> 以及如果我在一个循环中检查字符串的每个字符是否会更快

I doubt that, compiled regex is almost always faster than manual character checking. It may be faster if the number of characters is small, but it also depends on how you will build the resulting string (remember that java strings are immutable).

# java - Uable to compile aspect jar file

> ID：12769619
> 
> 赞同：0
> 
> 时间：2012-10-07T14:20:15.513
> 
> 标签：java, tomcat7, aspectj

All,

I am trying to compile aspect jar file for the logging aspect.

I have created an aspectj project in eclipse and able to see aspectj working fine for logging before and after method advice. Tested it.. works fine.

Now I have a web-project and I want to apply the same aspect( above ) to apply to my web-project.

I am trying to compile the above project to a jar file and include it in the server(Tomcat in this case) jar.

But I am not able to compile the jar. below is build.xml

```
<project name="aspectlogger" default="dist">
<property name="root" value="/." />
<property name="src.dir" value="${root}/src" />
<property name="dist.dir" value="${root}/dist" />
<target name="dist">
<taskdef  classpath="lib/aspectjtools.jar"    resource="org/aspectj/tools/ant/taskdefs/aspectjTaskdefs.properties"></taskdef>
<iajc source="1.6" target="1.6" showweaveinfo="true" verbose="true" outxml="true" debug="true" outjar="${dist.dir}/logger.jar">
        <argfiles>
                <pathelement location="${src.dir}"/>
        </argfiles>
        <classpath>
                <path refid="${root}/lib" />
        </classpath>
</iajc>
</target>
</project> 
```

But I get the following error; Could not load definitions from resource org/aspectj/tools/ant/taskdefs/aspectjTaskdefs.properties. It could not be found.

I have the aspectjtools.jar but it does not contain the aspectjTaskdefs.properties. I googled around it but could not find the jar that contains it.

Please suggest?

# database-design - 拆分数据库密集型应用程序

> ID：12769620
> 
> 赞同：2
> 
> 时间：2012-10-07T14:20:26.133
> 
> 标签：database-design, reporting, soa

我目前正在为大约 90 KLOC 的保险经纪人开发一个数据库繁重的业务线 Rails 应用程序——其中大部分是通过业务交易进行数据操作，以及汇总所有数据的多个报告。

我们是一个非常小的团队，代码库的大小和复杂性开始超出我们管理它的能力。正因为如此，我们正在研究驯服它的方法，其中之一是将其转换为面向服务的架构——即将其拆分为几个较小的应用程序。

这种方法的问题在于报告方面：我们的报告通常涉及最多 7 个连接的表，过滤器在此过程中作用于多个表。如果我们放弃服务共享表的可能性（多篇文章都指出这是一种反模式），是否有可能以一种不会对性能造成太大影响的方式连接所有这些数据？

那么，SOA 是针对这类问题推荐的方法吗？还是它带来的问题多于解决的问题？

虽然我们的专长主要在于 Ruby（Rails 和 Sinatra）和 Python（Plone 和 Grok），但我也想知道其他技术（.NET、Java）周围的社区通常如何处理这个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:15:04.000

我来自数据仓库背景，对 ruby​​/rails 保持一些兴趣。阅读您的帖子，我感觉您的报告架构可能需要重新设计，并且需要脱离基础系统。

通过重新设计该部分，您的原始系统可能不会那么大/复杂。

简而言之，一个经过 7 级联接的报告要求让我感到“尴尬”，看起来您正在尝试使用您的事务系统进行报告？

我建议您使用预先计算的聚合转移到不同的模式/数据库（当然，杠杆将取决于您的业务案例）。这应该有助于降低基础系统的复杂性，并允许您更快和相对简单的报告环境。您可能会产生一些存储成本（对于 aggs env 的单独数据库/模式），但这应该是为了简单/设计而付出的小代价。

hth

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T07:52:34.713

SOA 确实会帮助您保持受人尊敬的服务的代码库更小并更好地分离。它还将简化您的操作数据库，因为每个服务的数据库将分开。当然，不利的一面是它不适用于报告。

另一方面，正如 learn4living 所指出的，无论如何，您最好使用单独的模式进行报告，因为操作数据库不方便报告，并且非规范化数据更易于使用。

我把这种[聚合报告](http://arnon.me/soa-patterns/aggregated-reporting/)的模式称为这种模式，你可以阅读我几年前写的一篇关于[弥合 BI 和 SOA 之间差距的文章](http://www.infoq.com/articles/BI-and-SOA)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T13:42:33.327

SOA、批处理和缓存的结合将在很大程度上解决您的问题。您需要确定哪些流程

1.  应该用于高可用性（**Webservices/Messaging**）
2.  您的用户能否负担得起等待结果（**批处理**）
3.  可以容忍陈旧数据的显示/消耗（**缓存**）

为了长期利益，投资一些非规范化可能也是值得的。

# php - 用 1 个或多个项目初始化数组的最佳方法

> ID：12769622
> 
> 赞同：1
> 
> 时间：2012-10-07T14:20:35.013
> 
> 标签：php

我将变量的值设置为数组。

根据某些条件，我必须初始化

```
array('a', 'b'); 
```

或者

```
array('a', 'b', 'c'); 
```

那么最好的方法是什么？

我们应该写

```
$a = array('a', 'b');

if($b > 0) {

    $a[] = 'c'?

} 
```

或者

```
if($b > 0) {

    $a = array('a', 'b', 'c');

} else {

    $a = array('a', 'b');

} 
```

第一个对我来说更好看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:42:31.183

首先我们应该定义什么是“最好的”。对我来说最好的是：

1.  执行速度很快。
2.  以“正确”的方式完成。
3.  易于阅读。

与执行速度相比，两者几乎相同（我做了一个 100 万次迭代的快速测试），所以这里没有明显的赢家。

这两个示例都很容易阅读，但是我会坚持使用第一个，因为如果由于某种原因要求您将“a1”添加到数组中，您将不得不更改一行代码，而不是两行。

编辑：这是我运行的代码（$b = 0 和 $b = 1 并没有太大变化。： EDIT2：似乎我的第一个基准测试是错误的。这是第二个只做一次迭代的代码。显然第二个块代码执行得更快。

```
$b = 1;

$t = microtime(true);

$a = array('a', 'b');
if($b > 0) {
    $a[] = 'c';
}

printf("%f\n", microtime(true)-$t);

$t = microtime(true);

if($b > 0) {
    $a = array('a', 'b', 'c');
} else {
    $a = array('a', 'b');
    $a[] = 'c';
}

printf("%f\n", microtime(true)-$t); 
```

输出：

```
0.000017
0.000003 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:21:41.487

IMO，第一个选项是最好的，因为它遵循 DRY 和分而治之的原则。

这是[另一个基准](http://ideone.com/ydqRu)，显示第一种方法平均仅慢 13.5%。

# jquery - 对主 div 使用 jQuery 指令，子 div 除外

> ID：12769623
> 
> 赞同：1
> 
> 时间：2012-10-07T14:20:37.227
> 
> 标签：jquery, html, css

我有一个 div 宽度`id="main"`。我希望单击时，它的主体背景变为黑色。

我通过以下代码做到这一点：

```
$("#main").click(function(){
    $("body").css("background", "#000");
}); 
```

我`id="second"`在 div 中有另一个 div `id="main"`：

```
<div id="main">
    <div id="second">
    </div>
</div> 
```

当我单击 div 时，我不希望正文背景发生变化`id="second"`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:23:10.130

[工作示例](http://jsfiddle.net/JpjF9/2/)。

```
$("#second").click(function (event) {
    event.stopPropagation();
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:22:19.353

如果你想阻止唯一的孩子，那么你可以这样做，

**[现场演示](http://jsfiddle.net/KTEJk/)**

```
$("#main").click(function(event){
  if(event.target.id != "second")
  {   
       $("body").css("background", "#000");
  }
}); 
```

# java - Downcasting from Serializable to LinkedList

> ID：12769629
> 
> 赞同：4
> 
> 时间：2012-10-07T14:21:13.160
> 
> 标签：java, android, linked-list, classcastexception, serializable

I'm trying to send a LinkedList from an Activity to an other one. In the first Activity I have:

```
LinkedList<Class> codaActivity;
/* Lots of code here... */
Intent intent = new Intent(this, codaActivity.remove());
intent.putExtra("codaRedditi", codaActivity); // this is putExtra(String, Serializable)
startActivity(intent); 
```

In the second one, instead:

```
// The following throws a ClassCastException
codaRedditi=(LinkedList<Class>) (getIntent().getSerializableExtra("codaRedditi")); 
```

When I try to run my app, the DVM throws a ClassCastException caused by that code (and talking about an ArrayList, that absolutely does't exists in the code! O.O)

What can be the mistake?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:41:08.470

您确定您正在访问的意图是您创建的意图吗？尝试调试意图，例如输出：

`getIntent().getSerializableExtra("codaRedditi").getClass()`

或对象本身：

`getIntent().getSerializableExtra("codaRedditi")`

你收到什么？

另外，您确定您使用正确`LinkedList`的演员阵容吗？查看进口，它是否说明：`java.util.LinkedList`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:03:25.677

从文档：

```
public Intent putExtra (String name, Serializable value)

Since: API Level 1
Add extended data to the intent. The name must include a package prefix, for example the app com.android.contacts would use names like "com.android.contacts.ShowAll".

Parameters
name    The name of the extra data, with package prefix.
value   The Serializable data value. 
```

它说，“名称”字段”应该有像“com.blah.something”这样的包前缀。也许这是导致问题的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T14:32:41.130

你确定`intent`是实例`LinkedList`吗？

试：

```
codaRedditi=new LinkedList((List)(getIntent().getSerializableExtra("codaRedditi"))); 
```

# php - php数学函数

> ID：12769631
> 
> 赞同：-2
> 
> 时间：2012-10-07T14:21:14.780
> 
> 标签：php

是否有任何替代的内置函数来完成以下相同的工作：

```
$price = round($price,-(strlen(ceil($price))-2)); 
```

例如：

```
$price = 1485;
echo $price = round($price,-(strlen(ceil($price))-2));//output 1500

$price = 148;
echo $price = round($price,-(strlen(ceil($price))-2));//output 150 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:24:09.680

你总是可以自己做：

```
function price($str) {
    $str = round($str,-(strlen(ceil($str))-2));
    return $str;
}

// Call function
echo price(1485); 
```

特里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:27:42.673

据我所知，没有这样的内置功能。

但是，您可以按如下方式缩短期限：

```
$price = round($price/100)*100; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T14:26:30.687

你只是四舍五入到最接近的 50。试试这个：`(round($price/50))*50`

# typescript - 如何让一个类在 Typescript 中实现调用签名？

> ID：12769636
> 
> 赞同：42
> 
> 时间：2012-10-07T14:22:10.023
> 
> 标签：typescript

我在打字稿中定义了以下接口：

```
interface MyInterface {
    () : string;
} 
```

这个接口只是引入了一个不带参数并返回一个字符串的调用签名。如何在类中实现这种类型？我尝试了以下方法：

```
class MyType implements MyInterface {
    function () : string {
        return "Hello World.";
    }
} 
```

编译器一直告诉我

> “MyType”类声明了“MyInterface”接口，但没有实现它：“MyInterface”类型需要调用签名，但“MyType”类型缺少调用签名

如何实现调用签名？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-07T15:32:22.540

类无法匹配该接口。我认为你能得到的最接近的是这个类，它将生成在功能上与接口匹配的代码（但不是根据编译器）。

```
class MyType implements MyInterface {
  constructor {
    return "Hello";
  }
}
alert(MyType()); 
```

这将生成工作代码，但编译器会抱怨`MyType`不可调用，因为它具有签名`new() = 'string'`（即使您使用 调用它`new`，它也会返回一个对象）。

要创建与接口完全匹配而编译器不会抱怨的东西，您必须执行以下操作：

```
var MyType = (() : MyInterface => {
  return function() { 
    return "Hello"; 
  }
})();
alert(MyType()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-01-25T08:08:33.147

如果可调用接口应该有其他方法，你可以这样做：

```
interface Greeter {
    (): void;
    setName(name: string): void;
}

class ConsoleGreeter {

    private constructor( // constructable via `create()`
        private name = 'world'
    ) {}

    public call(): void {
        console.log(`Hello ${this.name}!`);
    }

    public setName(name: string) {
        this.name = name;
    }

    public static create(): Greeter {
        const instance = new ConsoleGreeter();
        return Object.assign(
            () => instance.call(),
            {
                setName: (name: string) => instance.setName(name)
                // ... forward other methods
            }
        );
    }
}

const greeter = ConsoleGreeter.create();
greeter(); // prints 'Hello world!'
greeter.setName('Dolly');
greeter(); // prints 'Hello Dolly!' 
```

缺点：`greeter instanceof ConsoleGreeter`是`false`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-23T01:45:18.517

此答案中的代码示例假定以下声明：

```
var implementation: MyInterface; 
```

### 提供可调用接口的实现

[作为已接受答案](https://stackoverflow.com/a/12770145/238753)的后续行动，正如其一些评论者所建议的那样，与接口的调用签名匹配的函数隐式地实现了接口。所以你可以使用任何匹配的函数作为实现。

例如：

```
implementation = () => "Hello"; 
```

您不需要明确指定函数实现接口。但是，如果您想明确，可以使用强制转换：

```
implementation = <MyInterface>() => "Hello"; 
```

### 提供可重用的实现

如果您想像通常使用 Java 或 C# 接口一样生成接口的可重用实现，只需将函数存储在其使用者可访问的位置即可。

例如：

```
function Greet() {
    return "Hello";
}

implementation = Greet; 
```

### 提供参数化实现

您可能希望能够以与参数化类相同的方式参数化实现。这是执行此操作的一种方法：

```
function MakeGreeter(greeting: string) {
    return () => greeting;
}

implementation = MakeGreeter("Hello"); 
```

如果您希望将结果键入为接口，只需显式设置返回类型或强制转换返回的值。

# javascript - （jQuery插件）在多项选择测验中拖放答案

> ID：12769639
> 
> 赞同：3
> 
> 时间：2012-10-07T14:22:15.840
> 
> 标签：javascript, jquery, html, drag-and-drop, widget

我正在制作一个网页，用户必须在测验中连接两个列表中的元素。例如，假设有一个测验问题，您有两个列表，一个带有国家，一个带有大写字母，用户必须将大写字母与正确的国家/地区联系起来。

优选地，用户应该有一种方法可以将元素从第二个列表拖到靠近第一个列表的元素的区域。像这样：

![示例图像](../Images/69d10fba873a779302a77eb86b59e233.png)

在这里，您可以将蓝色框拖到灰色矩形中。

是否已经有 jQuery 插件或其他 JavaScript 库可以执行此类操作？还是我必须自己实施？如果是这样，是否有人对描述类似问题的解决方案的文章有一些指导，或者关于如何最好地解决这个问题的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:09:05.163

考虑使用[jQuery UI droppable](http://jqueryui.com/demos/droppable/)吗？它几乎可以满足您的需求。只需将灰色框设置为可放置，将蓝色框设置为可拖动即可。

您可能会使用[revert 选项](http://jqueryui.com/demos/droppable/#revert)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-12T07:20:42.537

你可以使用 Jquery-UI，看看这个小提琴：

[https://jsfiddle.net/esedic/xg9f3hhy/](https://jsfiddle.net/esedic/xg9f3hhy/)

**HTML：**

```
<h3>Treatment Areas</h3>
<div class="container">
  <div data-value="1" class="draggable">
    <p>Back</p>
  </div>
  <div data-value="1" class="droppable">
    <div class="droparea"></div>
    <p>Area 1</p>
  </div>
</div>
<div class="container">
  <div data-value="2" class="draggable">
    <p>Adomen</p>
  </div>
  <div data-value="2" class="droppable">
    <div class="droparea"></div>
    <p>Area 2</p>
  </div>
</div>
<div class="container">
  <div data-value="3" class="draggable">
    <p>Chest</p>
  </div>
  <div data-value="3" class="droppable">
    <div class="droparea"></div>
    <p>Area 3</p>
  </div>
</div> 
```

**查询：**

```
$('.draggable').draggable({

  //cursor: 'move'
});
$('.droppable').droppable({
  drop: function(event, ui) {
    $(this).addClass('ui-state-highlight');
    ui.draggable.position({
      of: $(this),
      my: 'left top',
      at: 'left+6 top+6'
    });
    $('.draggable').each(function(i) { 
      $(this).data('value', i+1); 
    }).filter(':first').trigger('listData');
  }
});

$('.draggable').on('listData', function() {
  $('.droppable').each(function() {
    console.log( $(this).text() + ' - ' + $(this).data('value') ); 
  });
}); 
```

**SCSS：**

```
body {
    padding: 1em;
}

.draggable {
    width: 100px;
    padding: 5px;
    float: left;
    margin: 10px 10px 10px 0;
    background: red;
    color: #fff;
    cursor: move;

      p {
      margin: 2px 0;
  }
}

.droppable {
    width: 300px;
    padding: 5px 10px 5px 5px;
    float: right;
    margin: 10px;
    border: 1px solid #ddd;

    p {
      float: right;
      width: 50px;
      height: 30px;
      padding: 5px 5px 0 0;
      text-align: center;
      margin: 0;
  }
}

.container {
    clear: both;
    margin: 10px;
    width: 100%;
}

.droparea {
    float: left;
    border: 1px dashed red;
    width: 108px;
    height: 30px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-10T04:32:51.060

这个拖放 Javascript 代码，它适用于浏览器，但不适用于 ipad 的 ibook 应用程序，即使我使用了 jquery.ui.touch-punch.min.js，请给我解决方案

```
 <?xml version="1.0" encoding="UTF-8"?>  
    <!DOCTYPE html> 
     <html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/OEBPS" xmlns:ibooks="http://apple.com/ibooks/html-extensions">
<head>
    <title>Demo 2: Drag and drop</title>

    <style type="text/css">
    /* CSS for the demo. CSS needed for the scripts are loaded dynamically by the scripts */
    #mainContainer{
        width:600px;
        margin:0 auto;
        margin-top:10px;
        border:1px solid #000;
        padding:2px;
    }

    #capitals{
        width:200px;
        float:left;
        border:1px solid #000;
        background-color:#E2EBED;
        padding:3px;
        height:400px;
    }
    #countries{
        width:300px;
        float:right;
            margin: 4px 61px 3px -8px;
        height:400px;
    }   
    #labels{
        width: 120px;
        float:right;
              margin: -403px 116px 3px -8px;
        height:400px;
        /*border: 1px solid red;*/
    }   
    .dragableBox,.dragableBoxRight{
        width:80px;
            height: 10px;
        border:1px solid #000;
        background-color:#FFF;      
        margin-bottom:5px;
        padding:10px;
        font-weight:bold;
        text-align:center;
    }
    .dragableBox,.labelBoxRight{
        width:80px;
            height: 10px;
        border:1px solid #000;
        background-color:#FFF;      
        margin-bottom:5px;
        padding:10px;
        font-weight:bold;
        text-align:center;
    }
    div.dragableBoxRight{
    height: 31px;
        width:110px;
        /*float:left;*/
        margin-right:5px;
        padding:5px;
        background-color:#D3D3D3;
        border: 1px dashed;
    }
    div.labelBoxRight{
               height: 31px;
        width:110px;
        /*float:left;*/
        margin-right:5px;
        padding:5px;
        background-color:#E2EBED;
    }
    .dropBox{
        width:190px;
        border:1px solid #000;
        background-color:#E2EBED;
        height:400px;
        margin-bottom:10px;
        padding:3px;
        overflow:auto;
    }       
    a{
        color:#F00;
    }

    .clear{
        clear:both;
    }
    img{
        border:0px;
    }   
    </style>    

</head>
<body>  

    <div id="mainContainer">

        <div id="capitals">

            <div id="dropContent">
                <div class="dragableBox" id="box1">Br<sup>&#x002B;</sup></div>
                <div class="dragableBox" id="box2">Br<sup>&#x2212;</sup></div>
                <div class="dragableBox" id="box3">CN<sup>&#x2212;</sup></div>
                <div class="dragableBox" id="box4">NO<sub>2</sub><sup>&#x002B;</sup></div>
                <div class="dragableBox" id="box5">NO<sub>2</sub><sup>&#x2212;</sup></div>
                <div class="dragableBox" id="box6">NH<sub>2</sub><sup>&#x2212;</sup></div>
                <div class="dragableBox" id="box7">RC=C<sup>&#x2212;</sup></div>
                <div class="dragableBox" id="box8">MeCO<sup>&#x002B;</sup></div>
            </div>
        </div>
        <div id="countries">
            <div id="box106" class="dragableBoxRight"></div>
            <div id="box107" class="dragableBoxRight"></div>
            <div id="box101" class="dragableBoxRight"></div>
            <div id="box104" class="dragableBoxRight"></div>
            <div id="box105" class="dragableBoxRight"></div>
            <div id="box102" class="dragableBoxRight"></div>
            <div id="box103" class="dragableBoxRight"></div>
            <div id="box108" class="dragableBoxRight"></div>

        </div>
        <div id="labels">
            <div id="boxl106" class="labelBoxRight">nucleophiles</div>
            <div id="boxl107" class="labelBoxRight">Electrophiles</div>
            <div id="boxl101" class="labelBoxRight">nucleophiles</div>
            <div id="boxl104" class="labelBoxRight">Electrophiles</div>
            <div id="boxl105" class="labelBoxRight">nucleophiles</div>
            <div id="boxl102" class="labelBoxRight">Electrophiles</div>
            <div id="boxl103" class="labelBoxRight">nucleophiles</div>
            <div id="boxl104" class="labelBoxRight">nucleophiles</div>

        </div>
        <div class="clear"></div>
        <div class="konaBody"></div>
    </div>

<div id="debug"></div>
<input type="button" value="reset" name="reset" onclick="r1();"/>
      <script type="text/javascript" src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js" type="text/javascript"></script>
<script src="js/jquery-1.9.1.js"></script>
     <script src="js/jquery-ui.js"></script>
     <script type="text/javascript" src="js/drag-drop-custom.js"></script>
<script src="js/jquery.ui.touch-punch.js"></script>
<script src="js/jquery.ui.touch-punch.min.js"></script>
<script src="js/hammer.min.js"></script>
   <!-- <link href="css/jquery-ui.css" rel="stylesheet"
        type="text/css" />-->

<script type="text/javascript">
     <![CDATA[

// Custom drop action for the country boxes
function dropItems(idOfDraggedItem,targetId,x,y)
{
    var targetObj = document.getElementById(targetId);  // Creating reference to target obj
    var subDivs = targetObj.getElementsByTagName('div');    // Number of subdivs
    if(subDivs.length>0 && targetId!='capitals')return; // Sub divs exists on target, i.e. element already dragged on it. => return from function without doing anything
    var sourceObj = document.getElementById(idOfDraggedItem);   // Creating reference to source, i.e. dragged object
    var numericIdTarget = targetId.replace(/[^0-9]/gi,'')/1;    // Find numeric id of target
    var numericIdSource = idOfDraggedItem.replace(/[^0-9]/gi,'')/1; // Find numeric id of source

    if(numericIdTarget-numericIdSource==100){   // In the html above, there's a difference in 100 between the id of the country and it's capital(example:
                                                // Oslo have id "box1" and Norway have id "box101", i.e. 1 + 100.
        sourceObj.style.backgroundColor='#0F0'; // Set green background color for dragged object
    }else{
        sourceObj.style.backgroundColor=''; // Reset back to default white background color
    }
    if(targetId=='capitals'){
    // Target is the capital box - append the dragged item as child of first sub div, i.e. as child of <div id="dropContent">
        targetObj = targetObj.getElementsByTagName('div')[0];   

    }
    targetObj.appendChild(sourceObj);   // Append   
}

function r1()
{

}

var dragDropObj = new DHTMLgoodies_dragDrop();  // Creating drag and drop object

// Assigning drag events to the capitals
dragDropObj.addSource('box1',true); // Make <div id="box1"> dragable. slide item back into original position after drop
dragDropObj.addSource('box2',true); // Make <div id="box2"> dragable. slide item back into original position after drop
dragDropObj.addSource('box3',true); // Make <div id="box3"> dragable. slide item back into original position after drop
dragDropObj.addSource('box4',true); // Make <div id="box4"> dragable. slide item back into original position after drop
dragDropObj.addSource('box5',true); // Make <div id="box4"> dragable. slide item back into original position after drop
dragDropObj.addSource('box6',true); // Make <div id="box4"> dragable. slide item back into original position after drop
dragDropObj.addSource('box7',true); // Make <div id="box4"> dragable. slide item back into original position after drop
dragDropObj.addSource('box8',true); 

// Assigning drop events on the countries
dragDropObj.addTarget('box101','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box102','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box103','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box104','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box105','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box106','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('box107','dropItems');
dragDropObj.addTarget('box108','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop
dragDropObj.addTarget('capitals','dropItems'); // Set <div id="leftColumn"> as a drop target. Call function dropItems on drop

dragDropObj.init(); // Initizlizing drag and drop object
    ]]>
</script>
</body>
</html> 
```

# delphi - 自助服务终端的登录页面会话超时

> ID：12769642
> 
> 赞同：0
> 
> 时间：2012-10-07T14:22:31.363
> 
> 标签：delphi, session, intraweb

我们有一个用 Delphi 和 Intraweb 编写的基于 Web 的产品，可以在公共信息亭（全屏）上运行。

有没有办法使用 Intraweb 显示一个不属于任何会话的登录页面（只是一个标准的 Intraweb 页面），所以只有在用户成功登录时才会创建会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-12T10:51:25.277

我们发现这样做的最佳方法是使用 Javascript 每隔 30 秒左右向 Intraweb 发出一个 AJAX 请求，以使 Intraweb 认为该页面仍在使用中，因此不会使会话超时。

Javascript（每 30 秒调用一次 Intraweb AJAX 方法）：

```
<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function(event) {
      window.setInterval(function() {
          executeAjaxEvent("", null, "ResetSessionTimer", false, null, true);
      }, 30000);
  }); 
```

Delphi（私有方法和注册回调）：

```
procedure TfrmLogin.ResetSessionTimer(EventParams: TStringList);
begin
 //Intraweb does everything for us, we just need this method to exist
end;

WebApplication.RegisterCallBack('ResetSessionTimer', ResetSessionTimer); 
```

# objective-c - Different pictograms for normal and selected state of tableView cells

> ID：12769653
> 
> 赞同：0
> 
> 时间：2012-10-07T14:23:37.007
> 
> 标签：objective-c, ios, uitableview

Here's my setup. Table view with custom designed cell, reused many times. The layout is four UILabels and one UIImageView.

I load the cells in `tableView:cellForRowAtIndexPath:`, and inside it, after finding out which cell (data item) it is, I populate the labels with appropriate text from the datasource.

Also I have 7 pictograms. Each cell gets one of those pictograms, based on the cell's content (item type). The problem is, each pictogram exists in its normal version and its "selected" version. That means when the cell is selected, the design team has provided me with a modified version of pictogram with slightly different colours.

So for each cell I need to load `pictogram_normal` and `pictogram_selected` into the same cell so that the selected one is shown when the cell is selected.

How should I set this up?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:47:48.683

当一个单元格被选中时，改变这个单元格的背景图像视图，然后使其他单元格的背景图像视图正常。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell* cell=[tableView cellForRowAtIndexPath:indexPath];
    cell.backgroundView=[[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"pictogram_selected.png"]] autorelease];
    cell.selected=YES;
    selectedIndex=indexPath.row;

    for(UITableViewCell* theCell in [tableView visibleCells]){
        if(![theCell isEqual:cell])
        {
            theCell.accessoryType=UITableViewCellAccessoryNone;
            theCell.selected=NO;
            [theCell.backgroundView removeFromSuperview];
        }
    }
} 
```

`selectedIndex`是一个保存 tableview 的 selectedindex 的数字。如果您想在 tableview 中保存所选状态，请使用 selectedIndex 使单元格被选中。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    ITableViewCell*   cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil] autorelease];
    cell.selectionStyle=UITableViewCellSelectionStyleNone;

    //your code here

    if(indexPath.row == selectedIndex)
    {
        cell.backgroundView=[[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"pictogram_selected.png"]] autorelease];
        cell.selected=YES;
    }

    //your code here

    return cell;
} 
```

# java - 如何支持缩放 JScrollPane 中显示的视图以避免将 JScrollBars 显示到最小尺寸？

> ID：12769656
> 
> 赞同：3
> 
> 时间：2012-10-07T14:24:23.870
> 
> 标签：java, swing, jscrollpane, scaling, layout-manager

我想要实现的行为是默认以 1:1 的比例显示视图。如果其容器变大（通过用户动态调整父 JFrame 的大小），则应缩放视图以适应更大的区域；如果做得更小，则应缩放视图以适应较小的区域 - 达到限制。当小于最小尺寸时，滚动条应与视口一起出现，以支持在以最小比例显示的视图周围导航。

我现在有一个运行不佳的实现，使用 JScrollPane 和 ComponentListener 来确定何时发生调整大小。基于新的大小，设置新的比例因子以绘制适合的视图（直到最小比例），设置视图的 preferredSize 并调用 revalidate()。问题是这会导致“抖动”显示；当调整大小超过应用新比例以避免显示滚动条的点时，滚动条出现，然后消失。我相信这是因为我的方法是被动的，而不是预测的。也就是说，LayoutManager 只是查看视图的 preferredSize 并基于它执行布局。一世' m 监听 JScrollPane 的调整大小，当它太小时才更改视图的首选大小，然后通过调用 revalidate() 再次布局容器。至少我是这么理解的。

我一直在查看 JScrollPane、JViewport 和它们各自的 LayoutManagers 的源代码。在这一点上，我正在考虑将一个或多个子类化以获得更好的（可预测的，导致更平滑的大小调整）实现。这似乎是其他人之前必须实现的行为。是否有另一种方法可以使用现有的 Containers/LayoutManagers/methods 来做这不会在不同的 LnF 或平台上进行子类化和冒意外行为的风险？

编辑：我已经破解了 ScrollPaneLayout 的原型子类。它在添加滚动条之前检查视图的最小尺寸。这是有效的（因为滚动条在视口小于视图的最小尺寸之前不会出现，而不是在视口小于视图的首选尺寸时显示滚动条的原始行为）但是当显示滚动条时视图认为它仍然是首选尺寸，而不是最小尺寸。我可能也不得不修改 ViewportLayout 类，但这很快就变成了我怀疑它是否健壮的东西。

**编辑：**

我回到基础并再次尝试了这些建议，并且成功了。我试图重载 ScrollPaneLayout 和 ViewportLayout 的默认行为，它们之间的交互方向不正确。在我第一次尝试之后，我确信在 LayoutManager 完成他们的工作之后，我无法避免我的“反应式”方法在修复不正确的大小时出现闪烁和不稳定性。幸运的是，有一种方法可以在不继承任何 LayoutManager 的情况下完成这项工作 - 如上所述，它是通过实现`Scrollable`界面（我之前已经正确完成，但没有进行其他更改以使其工作）。诀窍确实是实现 getScrollableTracksViewport() 以便它根据视口大小返回真/假。除了我正在做的其他计算之外，我还没有做的是更新视图的preferredSize。这是关键的一步。（请注意，我还依赖于侦听 ComponentListener.componentResized() 通知来触发正确设置返回值所需的计算）以下是功能代码，感谢您的帮助。

```
@SuppressWarnings("serial")
class ScalingScreenPanel extends JScrollPane {

private static final Dimension              PREFERRED_SIZE = new Dimension(800,200);

private static ScalingScreen                sScreen;

public ScalingScreenPanel() {
    setPreferredSize(PREFERRED_SIZE);
    getViewport().addComponentListener(new ComponentAdapter() {
        public void componentResized(ComponentEvent event) {
            sScreen.calculateSizes(event.getComponent().getSize());
        }
    });     
    setViewportView(sScreen=new ScalingScreen());       
}
public void setShow(Show pShow) {
    sScreen.setShow(pShow);
}
} // class PreviewScreenPanel

@SuppressWarnings("serial")
public abstract class ScalingScreen extends JPanel implements Scrollable {

private static final Dimension              PREFERRED_SIZE = new Dimension(1000,100);
private static final JLabel                 EMPTY_PANEL = new JLabel("Empty",SwingConstants.CENTER);

private static final int                    DEFAULT_SIZE = 7;
private static final int                    MINIMUM_SIZE = 5;
private static final int                    SPACING = 3;
private static final int                    MINIMUM_PITCH = MINIMUM_SIZE+SPACING; // Do not modify directly
private static final int                    DEFAULT_PITCH = DEFAULT_SIZE+SPACING; // Do not modify directly

protected int                               cSize;
protected int                               cPitch;
protected Dimension                         cOrigin;
private Dimension                           cMinimumScreenSize;
private Dimension                           cDefaultScreenSize;

protected Dimension                         cCurrentScreenSize;
private boolean                             cEnableVerticalScrollbar = false, cEnableHorizontalScrollbar = false;

protected Dimension                         cGridSize = null;

ScalingScreen() {
    cOrigin = new Dimension(0,0);
    add(EMPTY_PANEL);
}
public void setShow(Show pShow) {
    remove(EMPTY_PANEL);
    cGridSize = new Dimension(pShow.dimension());
    cMinimumScreenSize = new Dimension(cGridSize.width*MINIMUM_PITCH+SPACING,cGridSize.height*MINIMUM_PITCH+SPACING);
    cDefaultScreenSize = new Dimension(cGridSize.width*DEFAULT_PITCH+SPACING,cGridSize.height*DEFAULT_PITCH+SPACING);
    setMinimumSize(cMinimumScreenSize);
    setPreferredSize(cDefaultScreenSize);
    calculateSizes(getSize());
                repaint();
}
public void calculateSizes(Dimension pViewportSize) {
    if (cGridSize==null) return;
    cPitch = Math.max(MINIMUM_PITCH,Math.min((pViewportSize.width-SPACING)/cGridSize.width,(pViewportSize.height-SPACING)/cGridSize.height));
    cSize = cPitch - SPACING;
    cOrigin = new Dimension((pViewportSize.width-(cPitch*cGridSize.width))/2,(pViewportSize.height-(cPitch*cGridSize.height))/2);
    cCurrentScreenSize = new Dimension(Math.max(pViewportSize.width,cMinimumScreenSize.width),Math.max(pViewportSize.height,cMinimumScreenSize.height));
    Dimension preferredSize = new Dimension();
    if (pViewportSize.width<cMinimumScreenSize.width) {
        cOrigin.width = 0;
        cEnableHorizontalScrollbar = true;
        preferredSize.width = cMinimumScreenSize.width;
    } else {
        cOrigin.width = (pViewportSize.width-(cPitch*cGridSize.width))/2;
        cEnableHorizontalScrollbar = false;
        preferredSize.width = cDefaultScreenSize.width;         
    }
    if (pViewportSize.height<cMinimumScreenSize.height) {
        cOrigin.height = 0;
        cEnableVerticalScrollbar = true;
        preferredSize.height = cMinimumScreenSize.height;
    } else {
        cOrigin.height = (pViewportSize.height-(cPitch*cGridSize.height))/2;
        cEnableVerticalScrollbar = false;
        preferredSize.height = cDefaultScreenSize.height;
    }
    setPreferredSize(preferredSize);
                repaint();
}

// Methods to implement abstract Scrollable interface
@Override
public Dimension getPreferredScrollableViewportSize() {
    return getPreferredSize();
}
@Override
public boolean getScrollableTracksViewportHeight() {
    return !cEnableVerticalScrollbar;
}
@Override
public boolean getScrollableTracksViewportWidth() {
    return !cEnableHorizontalScrollbar;
}
@Override
public int getScrollableBlockIncrement(Rectangle pVisibleRect, int pOrientation, int pDirection) {
    switch (pOrientation) {
    case SwingConstants.VERTICAL:
        return pVisibleRect.height/2;
    case SwingConstants.HORIZONTAL:
        return pVisibleRect.width/2;
    default:
        return 0;
    }       
}
@Override
public int getScrollableUnitIncrement(Rectangle pVisibleRect,
        int pOrientation, int pDirection) {
    switch (pOrientation) {
    case SwingConstants.VERTICAL:
        return 1;
    case SwingConstants.HORIZONTAL:
        return 1;
    default:
        return 0;
    }
}
      @Override
      public void paintComponent(Graphcs g) {
          // custom drawing stuff
      }
} // class ScalingScreen 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:09:18.637

基本方法是让您的自定义组件实现 Scrollable 并根据需要对 getTracksViewportWidth/-Height 进行编码。

**编辑**

> 实现它们以返回 true（从而禁用滚动条），直到达到最小比例，然后返回 false？

确切地说，这就是想法 - 但没有像我预期的那样工作：在达到最小值时的“转折点”，图像被缩放到它的首选，即使有一个自我调整的 getPrefScrollable （这似乎没有任何效果，它在开始时调用一次）

**编辑 2**

在 OP 的帮助下：

> 更新视图的preferredSize

终于明白了：（我最初的尝试把它颠倒了;-) 将 prefScrollable 保持为“真正的”pref 并让 pref 返回最小值或 pref，具体取决于滚动条是否可见。

```
public static class JImagePanel extends JPanel implements Scrollable {

    private BufferedImage image;

    public JImagePanel(BufferedImage image) {
        this.image = image;
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        BufferedImage scaled = //new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);
                GraphicsUtilities.createCompatibleImage(getWidth(), getHeight());
        Graphics2D g2 = scaled.createGraphics();
        g2.drawImage(image, 0, 0, getWidth(), getHeight(), null);
        g.drawImage(scaled, 0, 0, this);
        g2.dispose();
    }

    /**
     * This method is used for laying out this container
     * inside the Viewport: let it return the "real" pref
     * or min, depending on whether or not the scrollbars
     * are showing.  
     */
    @Override
    public Dimension getPreferredSize() {
        Dimension size = getImageSize();
        if (!getScrollableTracksViewportWidth()) {
            size.width = getMinimumSize().width;
        }
        if (!getScrollableTracksViewportHeight()) {
            size.height = getMinimumSize().height;
        }
        return size;
    }

    @Override
    public Dimension getMinimumSize() {
        Dimension min = getImageSize();
        min.height /= 2;
        min.width /= 2;
        return min;
    }

    /**
     * This is used for laying out the scrollPane. Keep 
     * it fixed to "real" pref size.
     */
    @Override
    public Dimension getPreferredScrollableViewportSize() {
        return getImageSize();
    }

    /**
     * The unscaled image size (aka: "real" pref)
     */
    protected Dimension getImageSize() {
        return new Dimension(image.getWidth(), image.getHeight());
    }

    @Override
    public boolean getScrollableTracksViewportWidth() {
        return getParent() instanceof JViewport
                && getParent().getWidth() >= getMinimumSize().width;
    }

    @Override
    public boolean getScrollableTracksViewportWidth() {
        return getParent() instanceof JViewport
                && getParent().getWidth() >= getMinimumSize().width;
    }

    @Override
    public boolean getScrollableTracksViewportHeight() {
        return getParent() instanceof JViewport
              && getParent().getHeight() >= getMinimumSize().height;        }

    @Override
    public int getScrollableUnitIncrement(Rectangle visibleRect,
            int orientation, int direction) {
        return 10;
    }

    @Override
    public int getScrollableBlockIncrement(Rectangle visibleRect,
            int orientation, int direction) {
        return 100;
    }

} 
```

# version-control - 2个本地文件夹（不是跨网络）之间没有增量的大文件的版本控制？

> ID：12769658
> 
> 赞同：1
> 
> 时间：2012-10-07T14:24:52.323
> 
> 标签：version-control, usb, versioning

这是我想要做的：我有一个 USB 硬盘驱动器，其中有数据（图片、音频文件等）。这需要很多空间，并且有很多文件，不是文本，而是二进制文件。

通常我会重新组织这个文件夹，向其中添加文件，删除一些文件，因此更改可以来自 comp-A 或 comp-B，就像我在个人存储库上所做的那样，只是现在它需要更多空间。

我无法通过 Internet 连接使用传统的版本控制，原因有两个：

*   带宽太大

*   我不想“增量”文件，因为有足够小（100kB 和 20MB 之间）来替换而不是“diff'd”。文件的哈希足以保证文件没有更改并且不需要更新。

我想从我的电脑到我的 USB 硬盘驱动器（反之亦然），所以它会在两个文件夹之间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T06:50:38.790

这看起来更像是一个工件存储库，而不是一个版本控制系统。
该引用的路径可以是您的 USB 密钥上的一个存储。

[像Nexus](http://www.sonatype.org/nexus/)这样的工件存储库允许您存储文件，每个文件都有一个关联的 SHA1 和 MD5 校验和。请参阅“[什么是存储库](http://www.sonatype.com/books/nexus-book/reference/repoman-sect-repo.html)”。

# javascript - 为什么 jQuery click(next) 按钮不能正常工作？

> ID：12769660
> 
> 赞同：0
> 
> 时间：2012-10-07T14:25:01.963
> 
> 标签：javascript, jquery, fade

我想用简单的分页制作简单的 jQuery 渐变轮播。
一切正常。但是当我单击`NEXT`按钮时**，轮播每次都会返回到第一项。**

如何解决这个问题？

### [小提琴](http://jsfiddle.net/N4Bvx/)

如果小提琴过时，请参阅我的 HTML：

```
<body>    
    <ul id="carousel">
        <li class="is-showing" ><img src="http://aarontennyson.com/tutorials/demos/slide_show_fade/images/slide1.jpg" width="960" height="375" alt="image 1" /></li>
        <li class="is-showing" ><img src="http://aarontennyson.com/tutorials/demos/slide_show_fade/images/slide2.jpg" width="960" height="375" alt="image 2"  /><li>
            <li class="is-showing" ><img src="http://aarontennyson.com/tutorials/demos/slide_show_fade/images/slide3.jpg" width="960" height="375" alt="image 3"  /></li>
            <li class="is-showing" ><img src="http://aarontennyson.com/tutorials/demos/slide_show_fade/images/slide4.jpg" width="960" height="375" alt="image 4"  /></li>
            <li class="is-showing" ><img src="http://aarontennyson.com/tutorials/demos/slide_show_fade/images/slide5.jpg" width="960" height="375" alt="image 5"  /></li>
    </ul>
<span class="prev">prev</span>
<span class="next">next</span>
</body> 
```

和脚本：

```
$(document).ready(function() {
    slideShow();
});

function slideShow() {
    var showing = $('#carousel .is-showing');
    var next = showing.next().length ? showing.next() : showing.parent().children(':first');

    showing.fadeOut(800, function() {
        next.fadeIn(800).addClass('is-showing');
    }).removeClass('is-showing');
    setTimeout(slideShow, 5000);

    $(".next").click(function() {
        showing.fadeOut(800, function() {
            next.fadeIn(800).addClass('is-showing');
        }).removeClass('is-showing');
    })
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:39:55.687

你需要重写一些代码来解决这个问题。拆分函数中的重复动作。

### [固定示例](http://jsfiddle.net/N4Bvx/2/)

新脚本：

```
$(document).ready(function() {
    slideShow();
});

function slideShow() {
    var slides = $('#carousel li');
    var previousIndex = 0,
        currentIndex = 0,
        timer;
    slides.hide().removeClass('is-showing').eq(currentIndex).show().addClass('is-showing');

    function nextSlide() {
        previousIndex = currentIndex;
        if (currentIndex < slides.length - 1) currentIndex++;
        else currentIndex = 0;
        switchSlides();
    }

    function switchSlides() {
        slides.eq(previousIndex).removeClass('is-showing').fadeOut(300, function() {
            slides.eq(currentIndex).addClass('is-showing').fadeIn(300);
            autoRotate();
        });
    }

    function autoRotate() {
        clearTimeout(timer);
        timer = setTimeout(nextSlide, 5000);
    }

    autoRotate();
    $(".next").click(nextSlide);
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:41:52.603

因为当你淡出时你删除了“is-showing”类，所以对于那些 800ms 没有“is-showing”类

```
showing.fadeOut(800, function() {
    next.fadeIn(800).addClass('is-showing');
}).removeClass('is-showing'); 
```

所以当它到达这个代码时，没有“当前项目”，所以它会按照你的逻辑进入第一个项目

```
var showing = $('#carousel .is-showing');
var next = showing.next().length ? showing.next() : showing.parent().children(':first'); 
```

# asp.net-web-api - 我应该将 WebAPI 与我的网站集成还是将 WebAPI 分开？

> ID：12769662
> 
> 赞同：1
> 
> 时间：2012-10-07T14:25:36.317
> 
> 标签：asp.net-web-api

我实际上在我的网站上使用 ASP.NET MVC 4。该网站将与我的游戏数据库（登录名和用户配置文件）共享相同的数据库。我将仅将 WebAPI 用于游戏逻辑和请求，因此那里肯定会有高流量。我只提供两种方法，一种用于身份验证，一种用于请求。（这里有一种巨大的架构，我不会在这里解释）。由于 ASP.NET MVC 4 可以很容易地集成 web.api，尽管我自己几乎什么都不添加。为什么不直接将 api 添加到我的网站项目中以避免代码重复。您认为这是一个不错的选择吗？为什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:47:32.553

您的问题似乎更多是关于我应该如何扩展，而不是关于我应该在与我的网站相同的项目中使用 Web API。不知道细节很难推荐你应该如何扩展，所以我会坚持回答你关于在同一个网站中是否包含 Web API 的原始查询。

假设您打算将游戏和游戏逻辑（Web Api）加入您的网站，例如 www.mysuperniftygame.com（或任何您的 URL），***那么是的，您可能希望 Web API 成为网络的一部分网站***。为什么？这样一来，您的 API 请求将不需要子域，例如 gameapi.mysuperniftygame.com。

为什么这很重要？好吧，如果您的网站和 Web 应用程序正在发出 API 请求，您可能不必处理跨域问题，您必须合并[JSONP](https://stackoverflow.com/questions/2067472/please-explain-jsonp)或[CORS 之](https://stackoverflow.com/questions/4144547/cross-origin-resource-sharing)类的东西才能向您自己的 Web API 发出请求.

至于横向扩展和 API 是大量流量，您可以横向横向扩展 Web 前端，并且您应该至少考虑以下两件事：

1.  通过在控制器外部实现代码来使控制器（在这种情况下为 API 控制器）精简，这是最佳实践
2.  使 API 控制器[异步](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)执行，这将有助于您的网站和 API 继续响应，即使对您的数据库有长时间运行的请求。

# html - How to make html element look like "disabled", but pass values? When I'm disabling a <select name="sel" disabled=""><option>123</option></select> element, it doesnt pass its variable. What to do to look it like dis

> ID：12769664
> 
> 赞同：43
> 
> 时间：2012-10-07T14:25:52.597
> 
> 标签：html, select, disabled-input

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-07T14:43:26.797

您可以根据需要将其禁用，然后在提交表单之前删除 disabled 属性。

```
$('#myForm').submit(function() {
    $('select').removeAttr('disabled');
}); 
```

请注意，如果您依赖此方法，您还需要以编程方式禁用它，因为如果 JS 被禁用或不支持，您将被禁用选择卡住。

```
$(document).ready(function() {
    $('select').attr('disabled', 'disabled');
}); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-20T02:50:39.353

```
<select id="test" name="sel">
  <option disabled>1</option>
  <option disabled>2</option>
</select> 
```

或者你可以使用 jQuery

```
$("#test option:not(:selected)").prop("disabled", true); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-04-15T20:12:20.150

我的解决方案是在 CSS 中创建一个禁用的类：

```
.disabled {
    pointer-events: none;
    cursor: not-allowed;
} 
```

然后您的选择将是：

```
<select name="sel" class="disabled">
    <option>123</option>
</select> 
```

用户将无法选择任何值，但选择值仍将在表单提交时传递。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-28T23:43:32.217

如果您可以为您的选择提供默认值，那么您可以对未选中的复选框使用相同的方法，这需要在实际元素之前隐藏输入，因为如果未选中，这些不会发布值：

```
<input type="hidden" name="myfield" value="default" />
<select name="myfield">
    <option value="default" selected="selected">Default</option>
    <option value="othervalue">Other value</option>
    <!-- ... //-->
</select> 
```

如果选择被 javascript（或 jQuery）禁用，或者即使您的代码编写的 html 使用属性禁用元素本身，这实际上会发布值“默认”（显然不带引号）： disabled="disabled"。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-07T14:34:43.890

添加一个类`.disabled`并使用这个**CSS**：

```
​.disabled {border: 1px solid #999; color: #333; opacity: 0.5;}
.disabled option {color: #000; opacity: 1;}​ 
```

### 演示：http: [//jsfiddle.net/ZCSRq/](http://jsfiddle.net/ZCSRq/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-05-11T12:51:38.697

可以使用与禁用列表具有相同名称和值的附加隐藏输入元素。这将确保值在 $_POST 变量中传递。

例如：

```
<select name="sel" disabled><option>123</select>
<input type="hidden" name="sel" value=123>
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-01T08:52:12.560

哇，我遇到了同样的问题，但是一行代码解决了我的问题。我写

```
$last_child_topic.find( "*" ).prop( "disabled", true );
$last_child_topic.find( "option" ).prop( "disabled", false );   //This seems to work on mine 
```

我将表单发送到一个 php 脚本，然后它打印每个选项的正确值，而它之前是“null”。

告诉我这是否可行。我想知道这是否只对我有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-18T14:34:05.480

如果您不想添加 attr disabled 可以以编程方式进行

可以使用以下代码将版本禁用到`<select class="yourClass">`元素中：

```
//bloqueo selects
  //block all selects
  jQuery(document).on("focusin", 'select.yourClass', function (event) {
    var $selectDiabled = jQuery(this).attr('disabled', 'disabled');
    setTimeout(function(){ $selectDiabled.removeAttr("disabled"); }, 30);
  }); 
```

如果你想试试，可以在这里看到：[https ://jsfiddle.net/9kjqjLyq/](https://jsfiddle.net/9kjqjLyq/)

# matlab - 追加从矩阵（matlab）中删除的列？

> ID：12769667
> 
> 赞同：-2
> 
> 时间：2012-10-07T14:26:06.837
> 
> 标签：matlab, matrix

通过本网站用户的帮助，我来到以下从矩阵中删除列：

```
a = [5 1 4; 2 1 1; 5 2 8];
n = size(a,1)
for i=1:n,  
    [v, i] = min(a(3,:));
    col = a(:, i);
    a(:, i) = [];
end 
```

我希望将每次迭代的 col 组合到一个矩阵中。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:51:36.650

获取第三行元素的排序顺序并用于重新排列 a 的列：

```
[s idx] = sort(a(3, :);
a_new = a(:, idx); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T18:27:40.183

您的代码中有一些严重的问题：

1.  您在循环内重新分配循环变量。这是一种可怕的做法，如果不是未定义的行为，可能会导致一些难以调试的行为。始终对具有不同含义的事物使用唯一的变量名。

2.  您正在`i`用作变量名。尽管在 Matlab 中完全合法，但它仍然被认为是不好的做法，因为`i`(and `j`) 也表示虚数单位。这就像说`1 = sin(x)`，你`1`不是作为一个数字使用，而是作为一个变量名......有点令人困惑。

3.  您在每次迭代时调整矩阵 a 的大小。这不是提高性能的最佳方法——调整数组大小意味着 matlab 必须为不同大小的新数组保留内存，将旧数组的内容复制到新数组，然后删除旧数组。在这样的循环中完成所有复制和删除操作会占用大量时间，并且因为不需要这样做而造成浪费；你可以做

    ```
     a(:,i) = inf 
    ```

    代替

    ```
     a(:, i) = [] 
    ```

4.  你在重新发明轮子。您似乎想按第三行中的元素对矩阵进行排序。Matlab 完全有能力做到这一点：

    ```
    b = sortrows(a.',3).' 
    ```

    或者

    ```
    [~, inds] = sort(a(3,:);
    b = a(:, inds); 
    ```

    Matlab 能够对您能想到的矩阵进行任何相对基本的操作，通常也可以采用多种方式。通常，它在这方面做得比你或我好得多，仅仅是因为它的许多工具已经由数十名程序员多年来开发、改进和调试，其中许多人在这方面更有才华和经验比你或我永远存在的某个领域。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T14:45:55.667

我不太确定我是否理解这个问题。你想要这个吗：

```
a = [5 1 4; 2 1 1; 5 2 8];
n = size(a,1);
result = [];
for i=1:n
    [v, i] = min(a(3,:));
    col = a(:, i);
    result = [result col];
    a(:, i) = [];
end 
```

结果将如下所示：

```
 1     5     4
 1     2     1
 2     5     8 
```

# c# - C# 从 Web 浏览器控件中提取 Cookie 值？

> ID：12769675
> 
> 赞同：0
> 
> 时间：2012-10-07T14:27:56.457
> 
> 标签：c#, cookies, webbrowser-control

好吧，到目前为止，我一直在寻找的这个问题以前从未被问过...

我正在尝试从我的 webbrowser 控件中提取 cookie 值我无法找到任何有用的信息我想在 webbrowser 导航后提取 cookie 值：

```
 private void Form1_Load(object sender, EventArgs e)
        {
            webBrowser1.Navigate("http://site.com");
        } 
```

我有一个很好的正则表达式代码为 httpwebreqest 查找类似于 webbrowser 控件的东西是我想要做的：

```
 List<string> cookieValues = new List<string>();
            foreach (Cookie cookie in agent.LastResponse.Cookies)
            {
                cookieValues.Add(cookie.Value);
            }
  foreach (string i in cookieValues)
            {
                Match match2 = Regex.Match(i, @"bert=([\w]*)",
                   RegexOptions.IgnoreCase);

                // Ensure match
                if (match2.Success)
                {
                    // Finally, we get Group value and display it.
                    key2 = match2.Groups[1].Value;

                } 
```

老实说，我没有玩过网络浏览器，所以我不知道从哪里开始。有什么想法吗？从我一直在研究的内容来看，IE 中的 Webbrowser 控件可能是相同的 cookie？

# vb.net - VB 2008 速成版与 VB 6

> ID：12769676
> 
> 赞同：1
> 
> 时间：2012-10-07T14:28:00.733
> 
> 标签：vb.net

谁能告诉我**VB.NET** (2008 Express Edition) 比**VB 6**有什么优势？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:32:23.567

您可以在 Wiki 中找到很好的比较： [VB.NET](http://en.wikipedia.org/wiki/VB.NET)

简而言之：VB.NET 的最大特点是托管代码。它还包含 VB6 和 VB.NET 中 Long 和 Integer 之间的一点区别。还有许多小的语法更改（例如，VB.NET 支持结构化异常处理）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-23T21:38:55.180

.NET 具有多线程和更多功能组件（例如用于网络）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-08T09:49:09.740

VB6 是微软的一款老式编程软件。它不用作在每台机器上使用的基本 .NET 框架。另请访问维基百科 VB

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-10T15:19:29.477

Visual Basic 是 Microsoft 的第三代事件驱动编程语言和集成开发环境 (IDE)，其组件对象模型 (COM) 编程模型于 1991 年首次发布，最终版本是 1998 年的第 6 版 (VB6)，并在2008 年。

Visual Basic.net 是 .net 框架（如 C# 或 F#）的一部分，该框架于 2002 年首次发布，Microsoft 不断更新。

您可以在 Visual Studio 2008 Express（免费）或任何 Visual Studio IDE 中使用 VB.Net，例如 Visual Studio 2017 社区版（也是免费的）。

[https://en.wikipedia.org/wiki/Comparison_of_Visual_Basic_and_Visual_Basic_.NET](https://en.wikipedia.org/wiki/Comparison_of_Visual_Basic_and_Visual_Basic_.NET)

VB6 使用像[动态数据交换 (DDE)](https://en.wikipedia.org/wiki/Dynamic_Data_Exchange "动态数据交换 (DDE)")和[DAO](https://en.wikipedia.org/wiki/Jet_Data_Access_Objects "数据访问对象 (DAO)")这样的遗留框架。VB6 IDE 很难在新操作系统上安装（原始设置在 Windows 7、8 或 10 上会出错）。

# python - Web2py：运行时出现内部错误

> ID：12769679
> 
> 赞同：2
> 
> 时间：2012-10-07T14:28:38.267
> 
> 标签：python, web2py

我收到这个错误

> 发出内部错误票：不可恢复

当尝试从[https://github.com/web2py/web2py/tree/e1bb2b4556352612a8f0386373d23e49f3e138c4运行 web2py](https://github.com/web2py/web2py/tree/e1bb2b4556352612a8f0386373d23e49f3e138c4)

我正在使用 ubuntu 12.04，并且已经有 web2py 1.99.4。但我想检查新版本。正如 repo 的自述文件中所述，我应该只运行 python web2py.py

但是，当我启动服务器时，我发现了内部错误。

以下是我从外壳中得到的：

```
gofrendi@arcaneSanctum:~/Documents/web2py-web2py-e1bb2b4$ python web2py.py -M
web2py Web Framework
Created by Massimo Di Pierro, Copyright 2007-2012
Version 2.0.9 (2012-10-07 01:10:05) dev
Database drivers available: SQLite(sqlite2), SQLite(sqlite3), MySQL(pymysql), MySQL(MySQLdb), PostgreSQL(psycopg2), PostgreSQL(pg8000), CouchDB(couchdb), IMAP(imaplib)
please visit:
    http://127.0.0.1:8000
starting browser...
Exception AttributeError: AttributeError("'_DummyThread' object has no attribute '_Thread__block'",) in <module 'threading' from '/usr/lib/python2.7/threading.pyc'> ignored
Created new window in existing browser session.
ERROR:web2py:Traceback (most recent call last):
  File "/home/gofrendi/Documents/web2py-web2py-e1bb2b4/gluon/main.py", line 614, in wsgibase
    BaseAdapter.close_all_instances('rollback')
  File "/home/gofrendi/Documents/web2py-web2py-e1bb2b4/gluon/dal.py", line 525, in close_all_instances
    for db_uid, db_group in dbs:
NameError: global name 'dbs' is not defined

ERROR:web2py:Traceback (most recent call last):
  File "/home/gofrendi/Documents/web2py-web2py-e1bb2b4/gluon/main.py", line 614, in wsgibase
    BaseAdapter.close_all_instances('rollback')
  File "/home/gofrendi/Documents/web2py-web2py-e1bb2b4/gluon/dal.py", line 525, in close_all_instances
    for db_uid, db_group in dbs:
NameError: global name 'dbs' is not defined

ERROR:web2py:Traceback (most recent call last):
  File "/home/gofrendi/Documents/web2py-web2py-e1bb2b4/gluon/main.py", line 614, in wsgibase
    BaseAdapter.close_all_instances('rollback')
  File "/home/gofrendi/Documents/web2py-web2py-e1bb2b4/gluon/dal.py", line 525, in close_all_instances
    for db_uid, db_group in dbs:
NameError: global name 'dbs' is not defined

ERROR:web2py:Traceback (most recent call last):
  File "/home/gofrendi/Documents/web2py-web2py-e1bb2b4/gluon/main.py", line 614, in wsgibase
    BaseAdapter.close_all_instances('rollback')
  File "/home/gofrendi/Documents/web2py-web2py-e1bb2b4/gluon/dal.py", line 525, in close_all_instances
    for db_uid, db_group in dbs:
NameError: global name 'dbs' is not defined

ERROR:web2py:Traceback (most recent call last):
  File "/home/gofrendi/Documents/web2py-web2py-e1bb2b4/gluon/main.py", line 614, in wsgibase
    BaseAdapter.close_all_instances('rollback')
  File "/home/gofrendi/Documents/web2py-web2py-e1bb2b4/gluon/dal.py", line 525, in close_all_instances
    for db_uid, db_group in dbs:
NameError: global name 'dbs' is not defined 
```

那么，这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:21:10.973

该提交刚刚被破坏。如果你看代码，`dbs`变量永远不会被定义，所以`close_all_instances`函数总是会失败。有一个错误报告：[web2py issue #1072](http://code.google.com/p/web2py/issues/detail?id=1072)

您可以在自己上方应用补丁，或使用我已应用补丁（并发送拉取请求）的补丁[1分支，或者您可以在代码被破坏之前使用提交（](https://github.com/dbarnett/web2py/tree/patch-1) [231a3e1278](https://github.com/web2py/web2py/tree/231a3e127884ef37dfbbde77d138e544811ff0ef)），或者只是等待它在 master 中得到修复，我认为这很快就会发生。

# html - 谁能告诉我是什么原因导致联系表格和页脚之间出现空白？

> ID：12769681
> 
> 赞同：1
> 
> 时间：2012-10-07T14:29:21.997
> 
> 标签：html, footer

我已经编写了 html，但联系表格是从另一个地方复制的……无论我做什么，我都无法摆脱那条白线。

谁能告诉我我做错了什么？

注意：在这里，在 jsfiddle.net

[http://jsfiddle.net/j6RMW/embedded/result/](http://jsfiddle.net/j6RMW/embedded/result/) 或 [http://jsfiddle.net/j6RMW/](http://jsfiddle.net/j6RMW/)

那里的空白消失了....但是您可以看到它实际上存在的屏幕截图。

注意2：这是导致问题的原因......这是html问题：

```
<form name="freecontactform" method="post" action="freecontactformprocess.php" onsubmit="return validate.check(this)">
<table width="400px" class="freecontactform">
<tbody><tr>
 <td colspan="2">

 <div class="freecontactformheader">Contacto</div>

 <div class="freecontactformmessage">Fields marked with <span class="required_star"> * </span> are mandatory.</div>

 </td>
</tr>
<tr>
 <td valign="top">
  <label for="Full_Name" class="required">Nombre/apellidos<span class="required_star"> * </span></label>
 </td>
 <td valign="top">
  <input type="text" name="Full_Name" id="Full_Name" maxlength="80" style="width:230px">
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="Email_Address" class="required">Email<span class="required_star"> * </span></label>
 </td>
 <td valign="top">
  <input type="text" name="Email_Address" id="Email_Address" maxlength="100" style="width:230px">
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="Telephone_Number" class="not-required">Número de telefono</label>
 </td>
 <td valign="top">
  <input type="text" name="Telephone_Number" id="Telephone_Number" maxlength="100" style="width:230px">
 </td>
</tr>
<tr>
 <td valign="top">
  <label for="Your_Message" class="required">Tu mensaje<span class="required_star"> * </span></label>
 </td>
 <td valign="top">
  <textarea style="width:230px;height:160px" name="Your_Message" id="Your_Message" maxlength="2000"></textarea>
 </td>
</tr>
<tr>
 <td colspan="2" style="text-align:center">
  <div class="antispammessage">
  To help prevent automated spam, please answer this question
  <br><br>
      <div class="antispamquestion">
       <span class="required_star"> * </span>
       Using only numbers, what is 10 plus 15? &nbsp; 
       <input type="text" name="AntiSpam" id="AntiSpam" maxlength="100" style="width:30px">
      </div>
  </div>
 </td>
</tr>
<tr>
 <td colspan="2" style="text-align:center">
 <br><br>
  <input type="submit" value=" Submit Form " style="width:200px;height:40px">
  <br><br>
  <br><br>
 </td>
</tr>
</tbody></table>
</form> 
```

我是新来的。感谢您提供到目前为止的信息......我会保持更新，并让你们知道我是否可以自己解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:40:30.310

将您的标签更改为此

```
<form name="freecontactform" method="post" action="freecontactformprocess.php" onsubmit="return validate.check(this)" style="margin-bottom: 0;"> 
```

因为它是内联 CSS，所以它接管了任何外部样式表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:44:54.290

如果您使用 Chrome 鼠标右键单击空间并单击检查元素。如果没有选择元素的选项，请右键单击您的表单并从那里开始。

您现在应该在屏幕底部有一个窗口，使用它现在向您显示 HTML 的窗口，通过将鼠标悬停在 HTML 标记上找到 HTML 代码中的白色块。如果你找不到白色块找到你的标签并从那里去。

如果您已经查看了表单标签，您应该会在上面的屏幕上看到它突出显示。如果当您将鼠标悬停在白色块上时突出显示，您知道它是样式表中的 CSS 属性，如果它没有突出显示，那么它与您无关，还有其他东西放在那里。重复这些步骤，直到找到突出显示白色块的标签。

找到它后，请查看屏幕底部右侧的“样式”部分。浏览与该标签相关的样式并逐个勾选它们，直到块消失。然后你就知道是什么 CSS 属性影响了它。

希望这可以帮助

# java - JPQL Criteria Query Play Framework 1x Inner Join And Where 子句构造

> ID：12769688
> 
> 赞同：0
> 
> 时间：2012-10-07T14:30:29.773
> 
> 标签：java, playframework, jpql, playframework-1.x, criteriaquery

我被困在试图在 JPA 中构建以下 SQL 查询（对于 Java 和 JPA 来说还是新手，我搜索了很多，但仍然没有得到它，抱歉，如果这是一个菜鸟问题）。

JPQL 查询几乎可以满足我的需求并且可以工作

```
SELECT s
FROM Sentence s
INNER JOIN s.words sw
WHERE s.date = :date
AND sw IN (:words) 
```

Sentence 和 Word 都是类 SentenceWord 是 Sentence 和 Word 之间的 ManyToMany 连接。所以 s.words 是一个属于一个句子的列表。s.Date 是一个 Import 对象，用于存储导入的东西数据：date 是我们要匹配的单个 Import。:words 是我们要在句子中检查的单词的列表。

此查询对 IN 运算符工作得很好。

然而，我们现在需要检查一个句子是否包含我们正在传递的列表中的所有单词（我们从 s.words 列表中组装）。

现在我只是使用字符串生成器和 FOR EACH 循环手动构建 WHERE AND 子句，并将它们附加到字符串和使用查询。它可以工作，但它超级丑陋并且看似反Javay，我想以正确/类型安全的方式来做。

我找到了 CriteriaBuilder 和 CriteriaQuery 但只是无法让 INNER JOIN 工作。完全没有。可悲的是，这是在我 RTFM 之后。[http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/querycriteria.html#querycriteria-from-join](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/querycriteria.html#querycriteria-from-join)

对于动态 WHERE AND 查询，据我所知

```
q.where(
    cb.and(
        cb.equal(s.get("date"), date)

        for (Word word : words) {
            , cd.equal(s.get("words"), word)          
        }

    )
); 
```

但这似乎都是错误的，我无法测试它，因为我无法加入。如果有人可以为我指出正确的方向，以获取有关简单人员联接和循环通过集合创建 AND 子句的 CriteriaQuery 教程，或者在此示例中写出正确的查询，我将非常感激！

**更新 - 查询效率**

替代的 JPQL 查询是：

```
SELECT s 
FROM Sentence s
INNER JOIN s.words sw
WHERE s.date = :date
AND sw IN (:words)
GROUP BY s
HAVING count(sw) = :numberOfWords 
```

JQPL 似乎需要 Group By，但对于 SQL 中的同一查询则不需要。我现在只有一个小数据集，所以两者都很快，但很好奇一个是否比另一个更受欢迎。

另外，我只是使用 Query 来设置参数，是否有更好的类用于这些？我更喜欢命名术语而不是？。

```
Query query = JPA.em().createQuery(jpql);
query.setParameter("date", date);
query.setParameter("numberOfWords", new Long(words.size()));
query.setParameter("words", words); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:02:30.813

以下查询应该做你想做的事。不知道是否有更好的选择：

```
select s 
from Sentence s
where s.date = :date
and :numberOfWords = (select count(sw) from SentenceWord sw
                      where sw.sentence = s
                      and sw in (:words)) 
```

其中`numberOfWords`是要匹配的单词集合中包含的单词数。当然，此集合不得包含任何重复项。

解释查询的作用：它检查要匹配的单词集中的单词数是否等于该集合中的单词部分并被句子引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T05:39:13.020

您可以在游戏中使用 JpqlSelect 来动态地构建您的查询

```
JpqlSelect select = new JpqlSelect();
Map<String, Object> params = new HashMap<String, Object>();
select.select("s");
select.from("Sentence s inner join s.words sw");
select.where("where s.date = ?");
params.param(date);
for (Word word : words) {
    select.andWhere("sw = ?");
}
return fin(select.toString(), select.getParams()); 
```

但我不认为这个查询是你想要使用的一个句子的所有单词都不等于你的 words 参数中的每个单词。我认为JB的查询更好

# python - 如何从文本文件中制作二维数组？

> ID：12769689
> 
> 赞同：0
> 
> 时间：2012-10-07T14:30:45.050
> 
> 标签：python, arrays, text, 2d

> **可能重复：**
> [如何使用现有列表制作二维数组？](https://stackoverflow.com/questions/12768862/how-can-i-make-a-2d-array-with-existing-lists)

我有一个文本文件'mapview.txt'，它的内容是：

```
1234
5678
9012 
```

我希望结果是：

```
[[1,2,3,4],[5,6,7,8],[9,0,1,2,]] 
```

我不想要这样的：

```
[['1','2','3','4'],['5','6','7','8'],['9','0','1','2']] 
```

我有这样的代码：

```
getit = open('./mapview.txt')
readit = getit.read()

itsline = readit.split()
line0 = list(itsline[0])
line1 = list(itsline[1])
line2 = list(itsline[2])

final = [line0,line1,line2]

print final 
```

但结果是

```
[['1','2','3','4'],['5','6','7','8'],['9','0','1','2']] 
```

我怎样才能得到

```
[[1,2,3,4],[5,6,7,8],[9,0,1,2,]] 
```

? 我需要这种形式，因为我将使用数组中的整数。

有什么建议么？任何帮助都会很棒。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:32:26.173

您可以将列表中的所有字符串更改为整数：

```
map(int, lst) 
```

（该`map`函数将函数应用于列表的每个项目，该`int`函数将字符串转换为列表）。在您的情况下，您需要更改*列表列表中的*所有字符串，因此您需要类似

```
[map(int, lst) for lst in final] 
```

关于您的代码要注意的另一件事是

```
line0 = list(itsline[0])
line1 = list(itsline[1])
line2 = list(itsline[2]) 
```

这不是一个好主意 - 它仅在您的文件中有 3 行时才有效。这也可以通过以下方式改进：

```
final = map(list, itsline) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T14:33:13.207

要修改您的解决方案，请更改

```
line0 = list(itsline[0])
line1 = list(itsline[1])
line2 = list(itsline[2]) 
```

至

```
line0 = [int(i) for i in itsline[0]]
line1 = [int(i) for i in itsline[1]]
line2 = [int(i) for i in itsline[2]] 
```

但是这个列表理解会更有效：

```
[[int(i) for i in line.strip()] for line in open('file/path')] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T14:43:49.030

```
with open('./mapview.txt') as file:
     array2d = [[int(digit) for digit in line.strip()] for line in file]

print(array2d) 
```

### [输出](http://ideone.com/y3EA6)

```
[[1, 2, 3, 4], [5, 6, 7, 8], [9, 0, 1, 2]] 
```

# java - Java 覆盖方法丢弃异常

> ID：12769692
> 
> 赞同：0
> 
> 时间：2012-10-07T14:31:00.060
> 
> 标签：java, oop, design-patterns, inheritance, interface

**总结**：

对象 A 具有抛出异常的方法 { m1, m2, ... }；验证后，其中一些方法将不再*为人所知*`throw`。在 OO 中对验证阶段的这种进展进行建模，其中，当检查运行并返回肯定结果时，对象被“提升”到对其方法的可靠性更高的置信度，并且不再对客户端进行异常检查

**完整版**：

您能否建设性地批评这种设计选择：

* * *

*   接口描述对象“类”的能力。要“成为”一个这样的对象，实例支持接口协议就足够了，该协议仅建立“尝试”一定数量的事物的能力（实现抛出异常的方法）

*   上述例子的一个简单的存在形式是所有操作都可以尝试但预计会有很多失败的阶段（未受过教育的野蛮人是一个人，因为他可以尝试人类的所有任务，但没有人会在他们中的任何一个的成功上打赌）

*   基本接口的子类型保持相同的功能，但表示高级验证的完成，以便保证其某些操作始终成功。这种“提升”和演员阵容遵循对内部状态和合同先决条件的检查，以“升级”对象的顺序

* * *

您能否指出相应的模式或*反模式*（如果您想阻止我采用这个想法），它们捕获了通过验证阶段进行的对象的相同概念，有关基本操作可靠性的信息随着渐进式检查？

我试图通过接口层次结构对此进行建模，其中操作都在具有相关检查异常的基本接口中，但存在异常从方法签名中消失的子类型（子接口）。

在这里发布之前，我考虑了装饰器模式，但它在许多层面上都无法将耳朵标记对象的原理建模为“在某一点上得到验证”。我还考虑了“组合而不是继承”，其中有关验证阶段的元数据（枚举？）被组合到对象中并`switch`继续编辑。

主要目标是：

* * *

*   当对对象的给定“样本”一无所知时，让客户**检查异常**

*   当对象已发送到验证层并以“已检查且正常工作”的形式返回时，客户不必承担检查异常的责任。使用高阶接口意味着：“这使用起来既快速又安全”

*   允许客户**选择**立即尝试使用该对象，但处理可能发生的奇怪情况，或者在尝试调用其方法之前将其*转发*给验证*缓慢的委托。*当然，委托返回对象的高阶接口转换以表示可靠性

* * *

接下来是幽默的演绎，即使设计困境对我来说实际上是最重要的：

* * *

```
interface CivilisedMan extends Man {
  @Override
  void act();
}
interface Man {
  void act() throws UnreasonableBehaviourException;
}
class UnreasonableBehaviourException extends Exception {
  public UnreasonableBehaviourException(String embarrassingCircumstance) {
    super(embarrassingCircumstance);
  }
}
public class StackOverflow {
  public static void main(String[] args) {
    Man williamConnollyJr = new Man() {
      @Override
      public void act() throws UnreasonableBehaviourException {
        throw new UnreasonableBehaviourException("F*rt!");
      }
    };
    CivilisedMan harryPotter = new CivilisedMan() {
      @Override
      public void act() {
        System.out.println("Swish and flick.");
      }
    };
    try {
      williamConnollyJr.act();
    } catch (UnreasonableBehaviourException unreasonableBehaviourException) {
      System.out.println(unreasonableBehaviourException.getMessage());
    }
    harryPotter.act();
  }
} 
```

* * *

如果需要，我可以放弃这个设计并重新开始，但我需要一些备份参考来做到这一点......

注意：这种行为模式在生活中经常发生。你拿起一个新物体，对它一无所知，并且对如何扔它/旋转它/变形它/...你检查它和“尝试它”的次数越多，你就越能建立信心关于该对象对每个设想的动作的适用程度...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T18:55:48.523

如前所述，对非异常使用异常并不是一个好主意。对我来说，这看起来像是 Guava 的[Optional](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Optional.html)或您自己的类似课程的一个明显案例。我可以做更多，也许像

```
@lombok.RequiredArgsConstructor(access=AccessLevel.PRIVATE)
class Result {
    // the computed value if case of a success
    private final Value value;
    // the failure reason  if case of a failure
    private final Problem problem;

    public static success(Value value) {
        return new Result(checkNonNull(value), null);
    }
    public static fail(Problem problem) {
        return new Result(null, problem);
    }

    public boolean isSuccess() {
        return value!=null;
    }
    public Value value() {
        if (!isSuccess()) throw new SomeRuntimeException();
        return value;
    }
    public Value problem() {
        if (isSuccess()) throw new SomeRuntimeException();
        return problem;
    }
} 
```

通过返回`Result`，您的问题并没有解决，而是很好地避开了。

*   客户端不检查任何异常，但是由于您的方法不返回任何直接可用的内容，因此可以防止由于忘记检查成功而导致的错误——它们返回`Result`并且客户端必须提取第`value`一个提醒他们首先检查的内容`isSuccess`。

*   这些检查既快速又简单，因此我不会试图将客户从他们手中解放出来。如果你真的想要，那么创建一个类层次结构并实现`Value actDirectly()`子类中的方法（除了`Result act()`在超类中）。但是（正如已经说过的），这可能导致类爆炸，并且向下转换也不利于代码的可读性。

*   关于慢速验证和快速路径，恕我直言，这应该对客户端隐藏并由您的类在内部处理，这应该缓存诸如验证结果之类的内容。关于客户的选择，我不确定你的意思，但也许你可以为`unchecked`你的方法提供和参数（或者像额外的类或其他更花哨的东西）。

* * *

我没有看到推广的价值，但如果我这样做了，我会做类似的事情

```
class Man {
    private Boolean isCivilized; // cache

    public boolean isCivilized() {
        if (isCivilized==null) isCivilized = isCivilizedInternal();
        return isCivilized; // unboxed
    }
    public Result act() {
        return isCivilized() ? newValue() : newProblem();
    }
    public CivilizedMan asCivilizedMan() throws UncivilizedException {
        if (!isCivilized()) throw new UncivilizedException();
        return new CivilizedMan(this);
    }
}

class CivilizedMan implements ManInterface {
    private final Man delegate;

    public Value actDirectly() {
        // just this, no optimizations and no additional logic here
        // as this all gets done in Man itself
        return delegate.act().value();

        // actually it could be
        // return delegate().newValue();
        // but that's something JIT can do instead of me
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:56:49.717

老实说，我不喜欢你的设计有几个原因：

*   *您在某些动作出乎意料*的地方使用异常。注意细微的差别。应使用异常来指示异常、不稳定的行为。非法状态，错误参考，丢失文件。如果您希望异常经常发生，请使用不同的构造。

*   您没有显示*不安全*对象和已*验证*对象之间的区别。您将如何判断，让某个对象的实例实现`CivilisedMan`它是否经过验证？您提到了“升级”到经过验证的级别和一些特殊的子界面。这意味着您将不得不将接口数量增加一倍，从而引入大量重复。

*   使用检查的异常。避开他们。实际上，在您的情况下，它们很好，因为它们是预期的-但您不应该期望异常（它们是……意外）

* * *

那么我推荐什么设计呢？就用老办法吧。界面不应该表明“尝试”的能力——它应该表明能力。如果你的对象实现`CivilisedMan`了，它就是一个文明人。如果没有，它就不能执行`act()`，也不文明。时期。

```
Object williamConnollyJr = //...
Object harryPotter = //...
if(williamConnollyJr instanceof CivilisedMan) {
    ((CivilisedMan)williamConnollyJr).act();
} else {
  System.out.println(unreasonableBehaviourException.getMessage());
}
if(harryPotter instanceof CivilisedMan) {
    ((CivilisedMan)harryPotter).act();
} 
```

# 优点：

*   尽管向下转换，但更清洁且更具可读性
*   `Object`验证/提升是自动的 - 一旦您检查并从to向下转换`CivilisedMan`，对象就会被验证。
*   如果需要，您可以使用*装饰器*模式回退到以前的设计
*   您可以使用动态组合不同的功能[`java.lang.reflect.Proxy`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)。

# 缺点

*   `instanceof`并被`Object`使用
*   动态性较低，对象是否`CivilisedMan`存在必须在编译时确定，而不是在运行时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T16:11:06.017

恕我直言，走你的路会很痛苦。

以免假设 Man 有 3 种方法，每种方法都会引发 3 个异常……对于每种方法，您需要 8 (2^4) 种变体（不抛出，抛出一个，抛出两个，...）。因此，您将需要 24 (3*8) 个专用接口……哎呀。

在没有太多开销的情况下，在 Java 中提升本身是不可能的。

我会尝试策略，如果它还不够，则在其之上添加一些责任链的变体。

所以它会这样：

```
class UnreasonableBehaviourException extends RuntimeException {}

interface Man {
  boolean canAct();
  void act();
} 
```

现在，如果有人想使用一种方法，他就有了一种干净的方法。如果他不在乎，那是他的问题。

```
Man man = new Man() {
  ...
}

if(man.canAct()) man.act(); 
```

如果界面很简单（方法不多），我会停在这里。如果界面复杂：

```
interface SomethingToDo {
  public void act(Man man);
}

class CanAct {
  private final Man man;
  private SomethingToDo next;

  public CanAct(SomethingToDo next) {
    this.next = next;
  }

  public void act(Man man) {
    if(man.canAct()) {
      man.act();
    }
    if(next == null) return;
    next.act();
  }
}

class MustAct {
  private SomethingToDo next;

  public CanAct(SomethingToDo next) {
    this.next = next;
  }

  public void act(Man man) {
    if(man.canAct()) {
      man.act();
      if(next == null) return;
      next.act();
    }
    else {
      ... some error handling ...
    }
  }
} 
```

扩展此示例，您可以创建要执行的操作：

SomethingToDo toBeDone = new MustDo1(new MustDo2(new CanDo3(new MustDo2(null))));

```
toBeDone.act(new SavageMan()) <- will fail due to something
toBeDone.act(new Nobleman())  <- will succeed 
```

**优点**

*   向上转型是通过测试能力来完成的
*   你可以定义复杂的动作（如果他能做到并且不能那样做）
*   易于阅读人应该具备的能力
*   SomeToDo.act 的干净和简单的实现
*   促销是自动的，您可以或不能完成该操作。
*   你不需要考虑所有的可能性。您的用户将为您执行此操作（他们将实现接口 SomethingToDo）
*   无论您的用户是否会受到异常的困扰，这是您/他们的决定（SomethingToDo 的实施方式如何）

**缺点**

*   错误处理可能很复杂，尤其是在需要回滚时。
*   可以生成大量实现SomethingToDo的类
*   Man界面中每个方法的附加方法

# .net - Mono.Cecil：注入try/finally？

> ID：12769699
> 
> 赞同：4
> 
> 时间：2012-10-07T14:31:42.067
> 
> 标签：.net, mono.cecil

[在Mono.Cecil](https://stackoverflow.com/questions/11074518/add-a-try-catch-with-mono-cecil/11074910#11074910)中实现 try/catch 的很好的概述在这里得到了回答，但他在没有完整的 try/catch/finally 时停止了。那么如何使用 Mono.Cecil 实现 try/finally？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T10:43:30.950

这里是如何注入finally。

首先，您需要修复您的退货声明。你只想要一个。

```
Instruction FixReturns()
{
    if (Method.ReturnType == TypeSystem.Void)
    {
        var instructions = body.Instructions;
        var lastRet = Instruction.Create(OpCodes.Ret);
        instructions.Add(lastRet);

        for (var index = 0; index < instructions.Count - 1; index++)
        {
            var instruction = instructions[index];
            if (instruction.OpCode == OpCodes.Ret)
            {
                instructions[index] = Instruction.Create(OpCodes.Leave, lastRet);
            }
        }
        return lastRet;
    }
    else
    {
        var instructions = body.Instructions;
        var returnVariable = new VariableDefinition("methodTimerReturn", Method.ReturnType);
        body.Variables.Add(returnVariable);
        var lastLd = Instruction.Create(OpCodes.Ldloc, returnVariable);
        instructions.Add(lastLd);
        instructions.Add(Instruction.Create(OpCodes.Ret));

        for (var index = 0; index < instructions.Count - 2; index++)
        {
            var instruction = instructions[index];
            if (instruction.OpCode == OpCodes.Ret)
            {
                instructions[index] = Instruction.Create(OpCodes.Leave, lastLd);
                instructions.Insert(index, Instruction.Create(OpCodes.Stloc, returnVariable));
                index++;
            }
        }
        return lastLd;
    }
} 
```

然后找到第一条指令。如果它是实例构造函数，则需要跳过 2。

```
Instruction FirstInstructionSkipCtor()
{
    if (Method.IsConstructor && !Method.IsStatic)
    {
        return body.Instructions.Skip(2).First();
    }
    return body.Instructions.First();
} 
```

然后缝合在一起

```
void InnerProcess()
{
    body = Method.Body;
    body.SimplifyMacros();
    ilProcessor = body.GetILProcessor();

    var returnInstruction = FixReturns();

    var firstInstruction = FirstInstructionSkipCtor();

    var beforeReturn = Instruction.Create(OpCodes.Nop);
    ilProcessor.InsertBefore(returnInstruction, beforeReturn);

    InjectIlForFinaly(returnInstruction);

    var handler = new ExceptionHandler(ExceptionHandlerType.Finally)
        {
            TryStart = firstInstruction,
            TryEnd = beforeReturn,
            HandlerStart = beforeReturn,
            HandlerEnd = returnInstruction,
        };

    body.ExceptionHandlers.Add(handler);
    body.InitLocals = true;
    body.OptimizeMacros();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-03T22:06:22.103

发现检查的示例非常有用且非常有用。但是，在更复杂的条件下确实遇到了问题。在 FixReturns() 中，无论是 void 还是非 void 返回范围，通过创建新指令来更改 ret -> leave 的方法都会孤立原件。这可以将带有孤立项的其他指令作为操作数（例如，分支到原始 ret）。结果代码最终无效。

我们只是更新了现有的 ret 指令的操作码/操作数对，而不是创建新的，一切看起来都很好。

干杯。

# c - 我编写了 Matrix Multiply CUDA 程序，但与我的 CPU 结果相比，它总是得到错误的答案？

> ID：12769707
> 
> 赞同：-3
> 
> 时间：2012-10-07T14:32:38.667
> 
> 标签：c, cuda

```
// Includes
#include <stdio.h>
#include <cutil_inline.h>
#include <shrQATest.h>
#include <time.h>
#define CLOCKS_PER_SEC ((clock_t)1000)

// Variables
float* h_A;
float* h_B;
float* h_C;
float* h_C_cpu;
float* d_A;
float* d_B;
float* d_C;
bool noprompt = false;

// Functions
void CleanupResources(void);
void RandomInit(float*, int);
void ParseArguments(int, char**);
void ZeroInit(float*, int);
// Device code

__global__ void MatrixMul(const float*A,const float*B,float*C,int Arow,int Acol,int Bcol)
{
    int coli= blockDim.x * blockIdx.x + threadIdx.x;
    int rowi= blockDim.y * blockIdx.y + threadIdx.y;
    float tmp=0;
    C[rowi*Bcol+coli]=0;
    for(int k=0;k<Acol;k++)
    {
        if(rowi<Arow&&coli<Bcol)
            C[rowi*Bcol+coli]+=A[rowi*Acol+k]*B[k*Bcol+coli];
    }
    //__syncthreads();
    //C[rowi*Bcol+coli]=tmp;
}

// Host code
int main(int argc, char** argv)
{
    shrQAStart(argc, argv);
    clock_t start,end;
    double duration;
    printf("Vector Addition\n");
    int a_row=800,a_col=600,b_row=600,b_col=900;
    int a_size =a_row*a_col* sizeof(float);
    int b_size=b_row*b_col*sizeof(float);
    int c_size=a_row*b_col*sizeof(float);
    //const int matrixrow=10000,matrixcol=10000;

    h_A=(float*)malloc(a_size);
    h_B=(float*)malloc(b_size);
    h_C=(float*)malloc(c_size);
    h_C_cpu=(float*)malloc(c_size);
    RandomInit(h_A, a_size/sizeof(float));
    RandomInit(h_B, b_size/sizeof(float));
    //memset(h_C,0,c_size);
    ZeroInit(h_C,c_size/sizeof(float));
    //memset(h_C_cpu,0,c_size);
    ZeroInit(h_C_cpu,c_size/sizeof(float));
    //RandomInit(h_C, c_size);
    start=clock();
    int i,j,k;
    for(i=0;i<a_row;i++)
    {
        for(j=0;j<b_col;j++)
        {
            for(k=0;k<a_col;k++)
            {
                h_C_cpu[i*b_col+j]+=h_A[i*a_col+k]*h_B[k*b_col+j];
            }
        }
    }
    end=clock();
    duration=double(end-start)/CLOCKS_PER_SEC;
    printf("CPU time: %lf\n",duration);

    cutilSafeCall(cudaMalloc((void**)&d_A,a_size));
    cutilSafeCall(cudaMalloc((void**)&d_B,b_size));
    cutilSafeCall(cudaMalloc((void**)&d_C,c_size));

    ParseArguments(argc, argv);

    // Allocate input vectors h_A and h_B in host memory
    /*h_A = (float*)malloc(size);
    if (h_A == 0) CleanupResources();
    h_B = (float*)malloc(size);
    if (h_B == 0) CleanupResources();
    h_C = (float*)malloc(size);
    if (h_C == 0) CleanupResources();*/

    // Initialize input vectors

    // Allocate vectors in device memory
    /*cutilSafeCall( cudaMalloc((void**)&d_A, size) );
    cutilSafeCall( cudaMalloc((void**)&d_B, size) );
    cutilSafeCall( cudaMalloc((void**)&d_C, size) );*/
    start=clock();
    // Copy vectors from host memory to device memory
    cutilSafeCall( cudaMemcpy(d_A, h_A, a_size, cudaMemcpyHostToDevice) );
    cutilSafeCall( cudaMemcpy(d_B, h_B, b_size, cudaMemcpyHostToDevice) );

    // Invoke kernel
    //int threadsPerBlock = 1024;
    dim3 dimblock(32,32);
    int blockx = (b_col + dimblock.x - 1) /dimblock.x;
    int blocky = (a_row + dimblock.y - 1) /dimblock.y;
    dim3 dimgrid(blockx,blocky);

    MatrixMul<<<dimgrid, dimblock>>>(d_A,d_B,d_C,a_row,a_col,b_col);

    //myVecAdd<<<1,threadsPerBlock>>>(d_A,d_B,d_C,N);
    cutilCheckMsg("kernel launch failure");
#ifdef _DEBUG
    cutilSafeCall( cutilDeviceSynchronize() );
#endif

    // Copy result from device memory to host memory
    // h_C contains the result in host memory
    cutilSafeCall( cudaMemcpy(h_C, d_C, c_size, cudaMemcpyDeviceToHost) );
    end=clock();
    duration=double(end-start)/CLOCKS_PER_SEC;
    printf("GPU time: %lf\n",duration);
    // Verify result
    for (i = 0; i < a_row*b_col; ++i) {
        //float sum = h_A[i] + h_B[i];
        if (fabs(h_C[i] - h_C_cpu[i]) > 1e-5)
        {
            //printf("The result is wrong!\n");
            break;
        }
    }

    CleanupResources();
    shrQAFinishExit(argc, (const char **)argv, (i==a_row*b_col) ? QA_PASSED : QA_FAILED);
}
void ZeroInit(float* a, int N)
{
    for(int i=0;i<N;i++)
        a[i]=0;
}
void CleanupResources(void)
{
    // Free device memory
    if (d_A)
        cudaFree(d_A);
    if (d_B)
        cudaFree(d_B);
    if (d_C)
        cudaFree(d_C);

    // Free host memory
    if (h_A)
        free(h_A);
    if (h_B)
        free(h_B);
    if (h_C)
        free(h_C);

    cutilDeviceReset();
}

// Allocates an array with random float entries.
void RandomInit(float* data, int n)
{
    for (int i = 0; i < n; ++i)
        data[i] = rand() / (float)RAND_MAX;
}

// Parse program arguments
void ParseArguments(int argc, char** argv)
{
    for (int i = 0; i < argc; ++i) {
        if (strcmp(argv[i], "--noprompt") == 0 ||
            strcmp(argv[i], "-noprompt") == 0) 
        {
            noprompt = true;
            break;
        }
    }
} 
```

上面是我的CUDA代码：“MatrixMul.cu”，我的项目只有这一个文件，我写在SDK里，VectorAdd项目，修改一下即可。*我在一个cu*文件中编写了内核函数和 main 函数。

我将结果与我的 CPU 结果进行了比较，发现它不一样。另一个问题是，当我使用 tmp 变量而不是 C[rowi*matrixcol+coli] 时，它也是错误的，我也不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T21:14:53.080

我发现您的代码中有 2 个问题。首先，在您的内核中，您没有正确地将代码调整为有效的线程索引。有效的线程索引是对应于实际结果矩阵元素的那些。无效的线程索引是在该区域之外的那些。您对此进行了检查，但它位于代码中的错误位置。而不是这个：

```
C[rowi*Bcol+coli]=0; 
for(int k=0;k<Acol;k++) 
{ 
    if(rowi<Arow&&coli<Bcol) 
        C[rowi*Bcol+coli]+=A[rowi*Acol+k]*B[k*Bcol+coli]; 
} 
```

用这个：

```
if(rowi<Arow&&coli<Bcol)  {
  C[rowi*Bcol+coli]=0; 
  for(int k=0;k<Acol;k++) 
    { 

        C[rowi*Bcol+coli]+=A[rowi*Acol+k]*B[k*Bcol+coli]; 
    } 
} 
```

由于您的代码的编写方式，一些超出有效范围的线程正在将某些元素归零，而这些元素不应该归零，因为这行代码在您的有效线程检查之前：

```
C[rowi*Bcol+coli]=0; 
```

我发现的第二个问题是您的等效检查可能太严格了。你在哪里有这个：

```
 if (fabs(h_C[i] - h_C_cpu[i]) > 1e-5) 
```

我把它改成这样：

```
 if (fabs(h_C[i] - h_C_cpu[i]) > 1e-4) 
```

通过上述更改，我能够获得匹配的结果。您可以摆弄等价检查以查看有多少匹配数字，但您期望 32 位浮点数的匹配数字太多。您在此处的剩余检查未按比例缩放，因此您不能像您想象的那样紧。如果您创建缩放残差检查，那么您可以确定检查每个元素的给定精度。

作为进一步的建议，在您的结果比较循环中，我将更改以下行：

```
 //printf("The result is wrong!\n"); 
```

至：

```
 printf("The result is wrong at idx: %d CPU: %f GPU: %f\n", i, h_C_cpu[i], h_C[i]); 
```

如果您想进一步使用它并且出现问题，为了获得更有用的结果。

# java - 为什么十六进制整数到字符转换的输出不同？

> ID：12769709
> 
> 赞同：0
> 
> 时间：2012-10-07T14:32:50.087
> 
> 标签：java

为什么输出在以下两个代码中都不同，因为我正在应用相同的显式类型转换。

```
 int hex = (char)0xA;
    System.out.println(hex);

    int hex = 0xA;
    System.out.println((char)hex); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:36:00.263

在第一行，您向函数发送一个`int`值`println`。在您发送 `char`价值的那一刻，因此差异..

考虑[System.out.println(char x)](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintStream.html#println%28char%29)的以下重载 和 : [System.out.println(int x)的重载](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/PrintStream.html#println%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:02:15.650

正如@Mortalus 回答的那样，差异的原因是因为在一种情况下您将int 传递给println，在另一种情况下您传递了一个char。

我只是想补充一点，我可以看到，在第一种情况下，您试图创建一个 char 而不是 int 但是语法不正确。代替：

```
int hex = (char)0xA; 
```

采用

```
char hex = 0xA; 
```

在上面的第一个语句中，文字 0xA 是十进制值 10 的 int 文字。然后显式转换为值 10 的 char。最后将 char 分配给 int 变量 hex。由于 10 对 int 和 char 都有效，因此执行隐式转换，将 char 转换回 int，最终得到一个 int 变量，而不是 char 变量。

在上面的第二个语句中，我们有相同的文字值并将其分配给一个字符。执行隐式转换，您有一个值为 10 的 char 变量 hex。

如果您对示例进行相应的更改，您将看到它们现在都打印出相同的结果。

```
char hex = 0xA;
System.out.println(hex);

int hex = 0xA;
System.out.println((char)hex); 
```

[更新]

在每种情况下，这都会打印出值为 10 的字符 - 几乎每个系统都将其解释为换行符，然后是系统定义的行分隔符序列（因为 println 保证它将在输出中添加行分隔符）。

请注意，在 Windows 上，行通常由 CR LF（13 后跟 10）分隔，而在 Linux/Mac 系统上，行通常由 LF（10）分隔。

因此，在 Windows 上，这两个语句都会产生 3 个字节（10、13、10）。在 Linux/Mac 上，这两个语句都会产生两个字节 (10, 10)。

无论哪种方式，输出看起来都像几个空行。它在 Linux/Mac 上看起来不错 - 但在 Windows 上可能看起来很奇怪，因为您发送的行分隔符无效。

顺便说一句 - 我实际上并不推荐上面的代码来生成换行符。相反，您应该使用系统属性 line.separator 并改用该字符串。

```
String newLine = System.getProperty("line.separator").toString(); 
```

# php - 使用 getElementsByTagName 使用 php 检索 rss 图像

> ID：12769712
> 
> 赞同：2
> 
> 时间：2012-10-07T14:33:00.197
> 
> 标签：php, xml, parsing, rss

我在这里有这段代码，但它给了我一个`getAttributes`在线错误，我一生都无法弄清楚原因。

这是我收到的错误消息：

> 致命错误：在第 58 行的 /Applications/MAMP/htdocs/blogDepot/application/pages/myBlogs/index.php 中的非对象上调用成员函数 getAttribute()

```
<?php
$rss = new DOMDocument();

$rss->load('http://newsrss.bbc.co.uk/rss/newsonline_uk_edition/uk/rss.xml');
$feed = array();

foreach ($rss->getElementsByTagName('item') as $node) {
    $item = array ( 
        'title' => $node->getElementsByTagName('title')->item(0)->nodeValue,
        'desc' => $node->getElementsByTagName('description')->item(0)->nodeValue,
        'link' => $node->getElementsByTagName('link')->item(0)->nodeValue,
        'date' => $node->getElementsByTagName('pubDate')->item(0)->nodeValue,
        'image' => $node->getElementsByTagName('thumbnail')->item(0)->getAttribute('url')
        );

    array_push($feed, $item);
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:47:23.670

也许那不是一个对象，尝试查看元素是否存在：

```
'image' => $node->getElementsByTagName('thumbnail')->item(0) ? $node->getElementsByTagName('thumbnail')->item(0)->getAttribute('url') : '' 
```

# php - Mysql Php 平均温度读数除以小时

> ID：12769713
> 
> 赞同：2
> 
> 时间：2012-10-07T14:33:09.927
> 
> 标签：php, mysql, algorithm

我有一个带有两列的 MYSQL DB，一列是温度，另一列是读取温度的时间，例如[http://pastebin.mozilla.org/1860064](http://pastebin.mozilla.org/1860064)。读取之间的温度通常有 5 分钟的差异，但这并不总是与这个时间间隔有关。

我需要弄清楚的是一种算法来读取所有值并保存每小时读取的平均值，因此温度将保存在数据库中，每小时一个温度，每天读取 24 次，它会保存在另一个数据库中桌子。

例如：

![在此处输入图像描述](../Images/255f6676abed79695146954856eb106a.png)

它将保存平均温度和日期 2012-10-07 10:00:00,

我说清楚了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:03:04.310

这是仅通过查询执行此操作的一种方法。如果您需要存储在数据库中的结果，您将需要自己的插入，但这将为您提供您正在寻找的数据。

```
SELECT AVG(temperature),HOUR(read_time) as read_hour FROM temperature_reads WHERE DATE(read_time) = '2012-10-06' GROUP BY read_hour 
```

您可以将零件换成`2012-10-06`您正在查看的任何日期。

**编辑：**这里更新了您的信息：

```
SELECT AVG(temperatura),HOUR(data) as read_hour FROM leituras WHERE DATE(read_time) = '2012-10-06' GROUP BY read_hour 
```

这应该可以解决问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:08:24.957

另一种方法是不过滤任何一天，并在分组子句中包括一整天和一小时：

```
SELECT AVG(temperature),
       DATE_FORMAT(date, '%d/%m/%Y %H') day_hour_read
  FROM TABLE
GROUP BY DATE_FORMAT(date, '%d/%m/%Y %H') 
```

# mysql - 用另一个计数更新表

> ID：12769716
> 
> 赞同：4
> 
> 时间：2012-10-07T14:33:17.627
> 
> 标签：mysql, sql

我试图用另一个表的计数来更新一个表。我认为我的查询结构正确，但我不断收到 SQL 错误：

```
UPDATE c
SET c.sales = p.ProductCount
FROM products c
INNER JOIN
(SELECT p_key, COUNT(*) AS ProductCount 
FROM sales
GROUP BY p_key) p
ON c.link = p.p_key 
```

两张表的结构：

**产品** product_name (varchar)、sales (int)、link (char)、

**销售** 电子邮件 (char), p_key (char)

我刚刚展示了关键列。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-07T14:39:24.620

您正在使用连接语法 for `T_SQL`，在`MySQL`执行此操作时，

```
UPDATE  products c
        INNER JOIN 
        (
            SELECT  p_key,
                    COUNT(*) AS ProductCount
            FROM sales
            GROUP BY p_key
        ) p
            ON c.link = p.p_key
SET c.sales = p.ProductCount 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-07T14:38:33.793

这是正确的语法：

```
UPDATE products c
INNER JOIN
(
   SELECT p_key, COUNT(*) AS ProductCount 
   FROM sales
   GROUP BY p_key
) p ON c.link = p.p_key
SET c.sales = p.ProductCount 
```

# iphone - iOS Core 数据关系故障

> ID：12769717
> 
> 赞同：2
> 
> 时间：2012-10-07T14:33:22.557
> 
> 标签：iphone, objective-c, ios, core-data

我有一个包含 3 个实体的核心数据模型。驱动程序、清单和工作。

每个 Manifest 有一个驱动程序，每个驱动程序有多个 Manifest，每个 Manifest 可以有一个或多个 Jobs，每个 Job 引用一个 Manifest。

当我像这样建立对象时

```
//Loop through all the Manifests for the driver
for (SDZManifest *manifest in allData)
{
    //Create an new instance of manifest in core data
    Manifest *newManifest = (Manifest*)[[SKCoreDataManager sharedInstance] insertObjectforEntity:kEntity_Manifest];

    // ***
    // Set the data for this manifest
    // ***
    [newManifest setDriverID:[NSNumber numberWithInt:[manifest DriverId]]];
    [newManifest setManifestID:[manifest ManifestId]];
    [newManifest setManifestRef:[manifest ManifestRef]];
    [newManifest setSupplierID:[NSNumber numberWithInt:[manifest SupplierId]]];
    [newManifest setTruckID:[NSNumber numberWithInt:[manifest TruckId]]];

    //Get all the jobs for the manifest
    NSArray *allJobsForManifest = [manifest Jobs];
    NSMutableArray *formattedJobsForManifest = [NSMutableArray array];

    //Loop through all the Jobs for this manifiest
    for (SDZJob *job in allJobsForManifest)
    {
        //Set the returned data into a Job object
        Job *newJob = (Job*)[[SKCoreDataManager sharedInstance] insertObjectforEntity:kEntity_Job];

        [newJob setInstructions:[job Instructions]];

        [newJob setDateCreated:[job DateCreated]];

        [newJob setCreatedBy:[job CreatedBy]];

        [newJob setIsLive:[NSNumber numberWithBool:[job IsLive]]];

        [newJob setCollectionSequence:[NSNumber numberWithInt:[job CollectionSequence]]];

        [newJob setPlannedDeliveryDate:[job PlannedDeliveryDate]];
        [newJob setPlannedCollectionDate:[job PlannedCollectionDate]];

        [newJob setCustomerRef:[job CustomerRef]];
        [newJob setCustomerName:[job CustomerName]];

        // ***
        // Collection address
        // ***

        //Break down the address
        SDZAddress *collectionAddress = [job CollectionAddress];
        [newJob setCollectionAddressID:[NSNumber numberWithInt:[collectionAddress Id]]];
        [newJob setCollectionAddressLine1:[collectionAddress line1]];
        [newJob setCollectionAddressLine2:[collectionAddress line2]];
        [newJob setCollectionAddressLine3:[collectionAddress line3]];
        [newJob setCollectionAddressCity:[collectionAddress city]];
        [newJob setCollectionAddressCounty:[collectionAddress county]];
        [newJob setCollectionAddressCountry:[collectionAddress country]];
        [newJob setCollectionAddressPostcode:[collectionAddress postcode]];

        //Get the lat and lng of the collection address
        SDZGeoLocation *collectionAddressLatLng = [collectionAddress Geocode];
        [newJob setCollectionAddressLat:[collectionAddressLatLng Lat]];
        [newJob setCollectionAddressLng:[collectionAddressLatLng Lng]];

        // ***
        // Delivery address
        // ***

        //Break down the address
        SDZAddress *deliveryAddress = [job DeliveryAddress];
        [newJob setDeliveryAddressID:[NSNumber numberWithInt:[deliveryAddress Id]]];
        [newJob setDeliveryAddressLine1:[deliveryAddress line1]];
        [newJob setDeliveryAddressLine2:[deliveryAddress line2]];
        [newJob setDeliveryAddressLine3:[deliveryAddress line3]];
        [newJob setDeliveryAddressCity:[deliveryAddress city]];
        [newJob setDeliveryAddressCounty:[deliveryAddress county]];
        [newJob setDeliveryAddressCountry:[deliveryAddress country]];
        [newJob setDeliveryAddressPostcode:[deliveryAddress postcode]];

        //Get the lat and lng of the collection address
        SDZGeoLocation *deliveryAddressLatLng = [deliveryAddress Geocode];
        [newJob setDeliveryAddressLat:[deliveryAddressLatLng Lat]];
        [newJob setDeliveryAddressLng:[deliveryAddressLatLng Lng]];

        [formattedJobsForManifest addObject:newJob];

        NSLog(@"\n\n-- NEW JOB --\n%@\n\n", newJob);
    }
    //Show all Jobs for this manifest
    NSLog(@"\n\n-- JOBS FOR MANIFEST --\n%@\n\n", formattedJobsForManifest);

} 
```

然后我将该 Manifest 对象保存到核心数据。

当他们单击表格视图单元格时，我从清单数组中获取对象并将其传递给另一个视图。当我记录传递的清单时，它会记录：

```
-- PASSED MANIFEST --
<Manifest: 0xe59d540> (entity: Manifest; id: 0xe59c3e0 <x-coredata://9F572794-745F-4E43-B4D0-9EC3506EA6E4/Manifest/p5> ; data: {
    driver = nil;
    driverID = 1;
    jobs = "<relationship fault: 0x7b3d290 'jobs'>";
    manifestID = "f705c777-9455-4792-bd84-2deada410dab";
    manifestRef = 001;
    supplierID = 2;
    truckID = 8;
}) 
```

当我记录`NSLog(@"\n\n-- PASSED MANIFEST JOBS --\n%@\n\n", [passedManifest jobs]);`结果是

```
-- PASSED MANIFEST JOBS --
Relationship 'jobs' fault on managed object (0xe59d540) <Manifest: 0xe59d540> (entity: Manifest; id: 0xe59c3e0 <x-coredata://9F572794-745F-4E43-B4D0-9EC3506EA6E4/Manifest/p5> ; data: {
    driver = nil;
    driverID = 1;
    jobs = "<relationship fault: 0x7b3d290 'jobs'>";
    manifestID = "f705c777-9455-4792-bd84-2deada410dab";
    manifestRef = 001;
    supplierID = 2;
    truckID = 8;
}) 
```

为什么它说**托管对象（0xe59d540）上的关系“作业”错误**？

当我`NSLog(@"\n\n-- JOB COUNT --\n%u\n\n", [[passedManifest jobs] count]);`返回**0**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T04:35:04.130

我刚刚遇到了完全相同的问题。我想我仍然不完全确定为什么，但似乎直到比您预期的更晚才真正获取关系。不过，预取它们实际上非常简单。只需将以下内容添加到您的核心数据请求中...

```
[request setRelationshipKeyPathsForPrefetching:@[ @"relationship_name" ]]; 
```

您可以通过这种方式预加载多个关系，从而预加载数组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-07T15:00:06.787

核心数据故障仅意味着尚未从“磁盘”加载数据。

但是，它会在需要时自动为您加载，因此无需担心。

# vb.net - 如何从 VB.net 组合框中的数据库中获取特定列的所有行？

> ID：12769718
> 
> 赞同：1
> 
> 时间：2012-10-07T14:33:32.673
> 
> 标签：vb.net, visual-studio-2010, ms-access-2007

在这里，我试图从组合框中的数据库中获取列。
下面的代码导致组合框`System.Data.DataViewManagerListItemTypeDescriptor`在组合框中。
我的代码中缺少什么？

```
Imports System.Data
Imports System.Data.OleDb

Public Class Sales
    Private Const s As String = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Users\HOME\Desktop\Project\company\company\login.mdb"
    Public conn As OleDbConnection
    Public adapt As OleDbDataAdapter
    Public ds As DataSet
    Public tables As DataTableCollection
    Public table As DataTable
    Public rows As DataRowCollection
    Public row As DataRow
    Public cols As DataColumnCollection
    Public col As DataColumn
    Public sql As String
    Public isql, usql, dsql As String
    Public icmd, ucmd, dcmd As OleDbCommand
    Public p As OleDbParameter

    Private Sub Sales_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        'TODO: This line of code loads data into the 'LoginDataSet1.Login' table. You can move, or remove it, as needed.
        Me.LoginTableAdapter.Fill(Me.LoginDataSet1.Login)
        Try
            sql = "select cust_ID from Customer"
            conn = New OleDbConnection(s)
            adapt = New OleDbDataAdapter(sql, conn)
            ds = New DataSet
            conn.Open()

            adapt.Fill(ds, "ABC")
            ComboBox1.DataSource = ds
            ComboBox1.DisplayMember = "cust_ID"
            ComboBox1.ValueMember = "cust_ID"

            conn.Close()

        Catch ex As Exception

        End Try
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:21:24.347

一个数据集包含数据表，所以你想要

```
Dim connStr = "Data Source=.\SQLEXPRESS;Initial Catalog=testing;Integrated Security=true;"
Dim sql = "SELECT str FROM testTable"
Dim da = New SqlDataAdapter(sql, connStr)
Dim ds = New DataSet
da.Fill(ds)
ComboBox1.DataSource = ds.Tables(0)
ComboBox1.DisplayMember = "str"
ComboBox1.ValueMember = "str" 
```

但直接使用 DataTable 更简单：

```
Dim connStr = "Data Source=.\SQLEXPRESS;Initial Catalog=testing;Integrated Security=true;"
Dim sql = "SELECT str FROM testTable"
Dim da = New SqlDataAdapter(sql, connStr)
Dim dt = New DataTable
da.Fill(dt)
ComboBox1.DataSource = dt
ComboBox1.DisplayMember = "str"
ComboBox1.ValueMember = "str" 
```

当然，您将使用我使用的 SqlWhatever 命令的 OleDbWhatever 等效命令。

# ios - 实施 CoverFlow 视图

> ID：12769719
> 
> 赞同：2
> 
> 时间：2012-10-07T14:33:37.993
> 
> 标签：ios, xcode, coverflow

我必须创建一个视图，我必须在其中放入图像的 CoverFlow。我该怎么做？会有带有标签的图像可以解释图像。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T14:48:17.180

有很多方法可以做到这一点

*   如果你的应用只有 iOS6+ 并且不需要支持 iOS5，你可以使用[UICollectionView](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)来实现它。您将需要构建一些自定义布局——使用您的 Apple ID 登录后，请[在此处查看 WWDC'12 的 session 219 。](https://developer.apple.com/videos/wwdc/2012/)你也可以在网上找到很多教程，只需谷歌搜索`UICollectionView`关键字。
*   如果您需要支持 iOS5 或更早版本，或者您不想构建自己的自定义`UICollectionViewLayout`，您可以使用一些已经制作好的类——网上有很多。其中最著名的是**github 上的****[iCaroussel](https://github.com/nicklockwood/iCarousel)**，它是免费的，兼容多个 iOS 版本（不仅是 iOS6），并且允许您执行几乎所有类型的轮播，包括`iCarouselTypeCoverFlow`和`iCarouselTypeCoverFlow2`类型（请参阅其 github 上的 README）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-07T14:38:49.943

iOS6 中的 UICollectionView 将允许您执行此操作。查看 WWDC 2012 视频（在 developer.apple.com 上）：

*   会话 205 - 介绍集合视图
*   会话 219 - 高级集合视图和构建自定义布局

要获取视频：

*   登录 developer.apple.com 并点击“iOS Dev Center”（左侧）
*   然后在“开发视频”（左侧）下单击 WWDC 2012
*   系统可能会提示您再次登录，但之后您只需点击视频即可
*   所有 WWDC 2012 视频也可在 iTunesU 上获得

这些视频还显示了示例代码。

Github 上也有示例代码： [Coverflow 示例](https://github.com/schwa/Coverflow)

# sql-server - 在 MonoTouch 中连接到远程数据库的最佳实践是什么

> ID：12769720
> 
> 赞同：0
> 
> 时间：2012-10-07T14:33:44.133
> 
> 标签：sql-server, orm, ado.net, xamarin.ios

我正在使用 MonoTouch 创建一个 iPad 应用程序，我想将数据保存到远程 SQL Server 数据库。我相信我的选择是：

1.  网络
2.  打盹 - ORM

我想使用一些东西，以防万一我没有互联网连接，它会在本地存储它，当我获得连接时，它会自动同步。但这是最好的情况。我假设 100% 的时间他们将是一个连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:40:52.547

最佳做法是通过一组安全的 Web 服务公开您的数据，而不是将其直接公开给 Internet。

目前MT的ADO.NET实现[有限，](http://docs.xamarin.com/ios/advanced_topics/system.data)主要用于连接本地SQLite dbs。

# c# - 允许用户安排方法

> ID：12769721
> 
> 赞同：1
> 
> 时间：2012-10-07T14:34:23.537
> 
> 标签：c#, winforms, events, delegates

假设我有一`Player`堂课。它有一个`Move`接收方向参数的`ChangePosition`方法、一个接收两个整数的方法、一个`Disappear`void 方法等。

我希望允许用户（可能使用列表框）能够将其中一些方法添加到 Player 对象的行为中。例如，他们可以选择让它向右移动，然后向下移动，然后消失。然后他们选择的方法将被添加到一个事件中，这样当该事件发生时，他们选择的方法就会执行。

有没有人做过这样的事情？做这个的最好方式是什么？（我 13 岁，我不太了解设计模式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:41:43.177

Another option is to use an Action generic and just add the methods you want and you can then invoke those actions on any particular player object.

This is just an alternative to the inteface design idea proposed by others, but your style may prefer this method.

```
Action<Player> playerActions = p => {}; //Do Nothing
playerActions += p => { p.Move(3); }; //Move
playerActions += p => { p.ChangePosition(1, 1); }; //Change position
playerActions += p => { p.Disappear(); }; //Disappear

//Invoke Actions
Player player = new Player();
playerActions(player);

//Invoke on another object as well
Player player2 = new Player();
playerActions(player2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T14:48:12.337

首先，您应该将所有游戏逻辑放入一个 Engine 项目中，并带有一个 Engine 类，该类单独负责（处理所有游戏逻辑并与 UI 和 Framework [以及更低层，如果有的话] ）。

其次，您可以拥有一个 EngineAction 类，该类具有枚举 EngineActionType（Move、ChangePos、Disappear、...）和其他属性。总体思路是这样的：

*有一个枚举来保存类型：*

```
public enum EngineActionType
{
    Move,
    ChangePos,
    Disappear,
    ...
} 
```

*创建一个抽象类以对所有引擎操作类进行逻辑分组，并使用公共类型属性添加它们：*

```
public abstract class EngineAction
{
    public readonly EngineActionType Type;

    protected EngineAction(EngineActionType type)
    {
        this.Type = type;
    }
} 
```

*为每个引擎操作创建一个类，将所有需要的参数作为属性保存。它应该派生自 EngineAction 并将适当的 EngineActionType 发送到基本构造函数：*

```
public class EngineActionMove : EngineAction
{
    public int XDelta;
    public int YDelta;

    public EngineActionMove() : base(EngineActionType.Move)
    {
    }
}

public class EngineActionChangePos : EngineAction
{
    ...
}

... 
```

*毕竟，您可以按照用户的命令将这些对象放在一个列表中，然后对其进行迭代，根据它们的类型一个一个地执行它们：*

```
foreach (EngineAction action in actionsToDo)
{
    switch (action.Type)
    {
        case EngineActionType.Move:
            EngineActionMove mvAction = (EngineActionMove)action;

            // Example:
            player.Position = player.Position.Offset(mvAction.XDelta,
                                                     mvAction.YDelta);
            break;
        case EngineActionType.ChangePos:
            EngineActionChangePos cpAction = (EngineActionChangePos)action;

            // Example:
            player.Position = new Point(cpAction.X, cpAction.Y);
            break;
        case EngineActionType.Disappear:
            // Just make the player disappear,
            // because the operation needs no parameters
            player.Disappear();
            break;
        case ...:
        default:
            // maybe throw an error here, to find errors during development
            // it helps you find non-handled action types
    }
} 
```

**进一步提示：UI 中的逻辑越少越好。总是。**

**编辑：查理的好主意：**

```
public interface IEngineAction
{
    void Do(Player target);
}

public class EngineActionMove : IEngineAction
{
    public int XDelta;
    public int XDelta;

    public void Do(Player target)
    {
        // Example
        target.Position = ...
    }
}

public class EngineActionDisappear : IEngineAction
{
    public void Do(Player target)
    {
        // Example
        target.Visible = false;
    }
}

... 
```

添加到列表示例：

```
var actionsToDo = new List<IEngineAction>();

actionsToDo.Add(new EngineActionDisappear());
actionsToDo.Add(new EngineActionMove { XDelta = 10, YDelta = 20 }); 
```

和迭代：

```
foreach (IEngineAction action in actionsToDo)
{
    action.Do(player);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T14:55:56.500

有很多方法可以做到这一点。一种方法是使用工厂模式和策略模式。

```
public static class PlayerBuilder
{
    public static Player BuildPlayer(BuildDefinition definition)
    {
        //logic in here to build a player -- pseudo-return value below as an example
        var strategy = new PlayerMovementStrategy();
        return new Player(strategy);
    }
} 
```

您的`BuildDefinition`课程可以根据您的用户选择构建。听起来他们不能只添加任何东西，而是从预定义选项列表中进行选择。根据您的 UI 选择创建适当的策略。

```
abstract class MovementStrategy
{
    public abstract void Move();
    public abstract void ChangePosition(Direction d);    
}
class PlayerMovementStrategy
{
    public override void Move()
    {
        //move
    }
    public override void ChangePosition(Direction d)
    {
        //change position
    }
}
abstract class VisibilityStrategy
{
    public abstract void Disappear();
}
class PlayerVisibilityStrategy
{
    public void Disappear()
    {
        //poof 
    }
}

class Player
{
     private readonly PlayerMovementStrategy movement;
     private readonly PlayerVisibilityStrategy visibility;

     public Player(PlayerMovementStrategy movement, PlayerVisibilityStrategy visibility)
     {
         this.movement = movement;
         this.visibility = visibility;
     }

     public void Disappear()
     {
         visibility.Disappear();
     }         
     public void Move(Direction d)
     {
         movement.Move(d);
     }
} 
```

# asp.net - .包含一个列表作为变量

> ID：12769730
> 
> 赞同：0
> 
> 时间：2012-10-07T14:35:49.927
> 
> 标签：asp.net, linq, c#-4.0

我正在尝试将逗号分隔的文本框解析为列表，然后检查字符串是否包含列表中的任何字符串。

例如： txtLastName: smit txtFirstName: joh,jon,j。

我需要搜索一个包含 smith 和 joh 或 jon 或 j 的字段 combine_name 的数据库。在里面。

这是我到目前为止所拥有的：

```
 var fullName = txtSearchBox0.Text.Trim();
        List<string> firstName = new List<string>(txtSearchBox1.Text.Split(',').Select(x => Convert.ToString(x)).ToList());

        var rows = (from c in db.GetTable<defendants_ALL>()
                    where c.combined_name.Contains(fullName) && c.combined_name.Contains(firstName)
                    select c).ToList(); 
```

这不适用于 firstName 作为列表，但如果它是 var 就像姓氏一样。是否可以将 .Contains 与列表变量一起使用，或者我需要其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:06:19.503

很简单。

尝试将名字列表中的值搜索为

```
string fullName = txtSearchBox0.Text.Trim();
List<string> firstName = txtSearchBox1.Text.Split(',').ToList();

var rows = (from c in db.GetTable<defendants_ALL>()
            where c.combined_name.Contains(fullName) 
                && firstName.Contains(c.combined_name)
            select c)
           .ToList(); 
```

# vb.net - COM 插件在 oulook 中访问另一个 COM 插件

> ID：12769733
> 
> 赞同：1
> 
> 时间：2012-10-07T14:36:04.017
> 
> 标签：vb.net, plugins, com, outlook, outlook-addin

我有一个 COM 插件，它是一个从公司购买的应用程序，它在 Outlook 中提供了一些菜单栏，我希望能够通过制作我自己的 COM 插件来使用购买的 COM 插件来自动化一些按钮点击和处理，该插件将访问其他。

我在 Outlook 插件中使用 C# 或 VB，不确定，无论如何我需要知道是否可以让我的插件控制另一个，例如一个典型的场景是我的插件执行按钮单击购买的插件输入一些文本，然后单击另一个按钮，例如。保存表格

任何想法我怎么能做到这一点？

谢谢

# html - wordpress 主题添加左侧边栏

> ID：12769736
> 
> 赞同：0
> 
> 时间：2012-10-07T14:36:21.153
> 
> 标签：html, css, wordpress, sidebar

[http://judopassion.com/wordpress/](http://judopassion.com/wordpress/)

我会将 leftSidebar（现在位于右侧边栏下方）移动到内容的左侧，如下图所示： ![在此处输入图像描述](../Images/f652199875d9ccc1b52d6dbbcd13e311.png)

我必须添加什么css代码？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:47:48.710

为了让它看起来像右边的图像，您必须重新排序模板上的标记，以便`<aside id="leftSidebar"></aside>`在`<div id="content">`文档流程中出现。

![更改模板中的标记](../Images/664ac99072af8cf4ce82a7bebbae070f.png)

考虑到所有现有的填充等，您还必须将#content 的宽度减小到 476px。

# javascript - 如果 HoverOut 不想显示标题

> ID：12769737
> 
> 赞同：1
> 
> 时间：2012-10-07T14:36:52.983
> 
> 标签：javascript, jquery

我在 jquery 中创建了一个悬停功能，当您将鼠标悬停在图像上时，它会在 div 框中显示其标题。假设所有图像一个接一个地在一起，它们之间没有空格，如果我从第一行开始悬停到最后一行，它会显示所有的标题。我设置了 1 秒的延迟

继承人代码

```
 $('.media-content img').hover(function(e){
var x = -5;
var y = 15;
var detail= $(this).attr('alt');
$('<span class="hovercontent">'+ detail +'</span>')
            .delay(800)
            .css('top', e.pageY + y)
            .css('left', e.pageX + x)
            .appendTo('body')
            .fadeIn('fast');
            }, function()
            {
             $('.hovercontent').fadeOut(50);
           }); 
```

在这种情况下，如果我从图像中悬停，然后一秒钟后它会显示。我希望如果我立即悬停，那么该图像的标题将不会显示。您可以说，当您将文件悬停在操作系统中时，它会显示详细信息，如果您绕过则不会。我想要的类似//

# objective-c - 如何让我的视图停留在窗口的右侧？

> ID：12769738
> 
> 赞同：0
> 
> 时间：2012-10-07T14:36:53.077
> 
> 标签：objective-c, macos, cocoa, nsview

我想将我的视图“对齐”到我的窗口右侧，而不调整大小。我在下面输入代码

```
tableContainer.autoresizingMask = NSViewHeightSizable | NSViewLayerContentsPlacementRight; 
```

但它总是调整我的视图宽度。我只想创建一个宽度保持不变且始终位于窗口右侧的视图。所以就像 Photoshop 中的面板一样。我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:55:57.333

您没有为`autoresizingMask`. `NSViewLayerContentsPlacementRight`枚举将与方法一起使用，`setLayerContentsPlacement:`而不是`setAutoresizingMask:`像您那样与方法一起使用。

[根据文档，](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/doc/constant_group/Resizing_masks)`autoresizingMask`属性的值`NSView`是以下值的按位或组合。

因此，出于您的目的，您需要使用**`NSViewMinXMargin`**（而不是`NSViewLayerContentsPlacementRight`），以便左边距灵活，而不是右边距，以便在调整超级视图大小时，您的视图将保持右边框的距离固定，从而保持它在其超级视图的右侧。

当然，如果您希望视图的高度与您看起来的父视图的高度一起调整大小，请`NSViewMinXMargin`在按位或组合中使用它`NSViewHeightSizable`

```
tableContainer.autoresizingMask = NSViewHeightSizable | NSViewMinXMargin; 
```

# vb.net - 谷歌图表：动态数据

> ID：12769739
> 
> 赞同：1
> 
> 时间：2012-10-07T14:37:03.873
> 
> 标签：vb.net

我想用我的 VB.Net 3.5 Web 应用程序后面的代码中计算的数字替换硬编码的数字。换句话说，就是下面的数字 20、13 和 34。在此先感谢您的帮助。

```
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      ['Tiers', 'Apps'],
      ['Tier 1', 20],
      ['Tier 1.5', 13],
      ['Tier 2', 34]
    ]);

    var options = {
      title: 'Balance'
    };

    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T03:13:23.867

假设这需要比仅提供 3 个数字更通用，您可以在后面的代码中创建一个 JSONArray 变量（如果使用 MVC，则为模型的一部分等）。这是一个简单的示例，应该可以帮助您：

```
<script type="text/javascript">
  google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([ <%= JSONArray %> ]);
  ... 
```

在您后面的代码中，您将从正在执行的任何计算中构建字符串 JSON：

```
Public Class WebForm1
    Inherits System.Web.UI.Page

    Protected JSONArray As String

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        JSONArray = "" + _
              "['Tiers', 'Apps'], " + _
              "['Tier 1', 20], " + _
              "['Tier 1.5', 13], " + _
              "['Tier 2', 34]"

    End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T21:42:27.317

您可以使用 Google.DataTable.Net.Wrapper 库以完全类型安全的方式为您创建一个方便的 JSON 字符串，而不是直接在代码中操作字符串。

在这里您可以找到一个广泛的示例：[http ://www.agile-code.com/blog/using-the-google-datatable-net-wrapper/](http://www.agile-code.com/blog/using-the-google-datatable-net-wrapper/)

代码很简单：

```
using Google.DataTable.Net.Wrapper;
private static string GetDataTableJson()
{
    var dt = new DataTable();

    //Act -----------------
    dt.AddColumn(new Column(ColumnType.Number, "Tiers"));
    dt.AddColumn(new Column(ColumnType.String, "Apps"));

    var row1 = dt.NewRow();
    var row2 = dt.NewRow();
    var row3 = dt.NewRow();

    row1.AddCellRange(new[] { new Cell("Tier 1"),   new Cell(20) });
    row2.AddCellRange(new[] { new Cell("Tier 1.5"), new Cell(13) });
    row3.AddCellRange(new[] { new Cell("Tier 2"),   new Cell(34) });

    dt.AddRow(row1);
    dt.AddRow(row2);
    dt.AddRow(row3);

    return dt.GetJson();
} 
```

这将返回你这样一个 JSON 表示

```
{
"cols": [
            {"type": "string" ,"id": "Tiers" }, 
            {"type": "number" ,"id": "Apps" }
        ],
"rows" : 
        [
            {"c" : [{"v": "Tier 1"},   {"v": 20}]}, 
            {"c" : [{"v": "Tier 1.5"}, {"v": 13}]}, 
            {"c" : [{"v": "Tier 2"},   {"v": 34}]}
        ]
} 
```

然后你可以直接嵌入到你的javascript中

```
// Create our data table out of JSON data loaded from server.
var data = new google.visualization.DataTable(jsonData); 
```

# python - 如何使用带有条件扩展的 empy 模板？

> ID：12769742
> 
> 赞同：0
> 
> 时间：2012-10-07T14:37:31.727
> 
> 标签：python, templates, empy

如果变量具有值，我尝试使用**em.py的条件来扩展不同的：**

```
import em

d1={"year":2012, "title":"abc"}
d2={"year":None, "title":"abc"}

p="@(year?year)@title" # the pattern
#p="@(year?year - )@title" # this does not work

print em.expand(p, d1)
print em.expand(p, d2)

# I would like to have it expanded into: "2012 - abc" for d1 and "abc" for d2 
```

因此，如果设置了年份（与 不同`None`），则应该插入一个额外的分隔符（我使用带有空格的破折号：“ - ”）也应该插入年份。

**那么：我应该使用什么模式 p ？**

我知道这有效：

```
@(year?year)@(year?" - ") 
```

但这不像我喜欢的那样可读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:49:12.983

如何使用 python 表达式`and`：

```
@(year and str(year) + ' - ') 
```

如果`year`是`None`，则短路并返回`None`，否则返回`str(year) + ' - '`。您需要使用`str(year)`，否则您将连接一个`int`和一个`str`类型。

# c++ - ifstream 打开文件 C++

> ID：12769745
> 
> 赞同：5
> 
> 时间：2012-10-07T14:37:55.667
> 
> 标签：c++

我对 ifstream 打开功能有疑问。我在netbeans的linux下创建应用程序。我的代码是：

```
ifstream file;
file.open(path);
file.is_open()
.
.
. 
```

问题在路上。当我使用 ~/Desktop/file.txt 并运行应用程序时，文件未打开。但是当我调试应用程序时，一切正常。这个问题的任何提示？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T14:41:36.463

路径名 ~/Desktop/file.txt 将不匹配文件，除非它扩展了波浪号字符，这通常由 shell 在将其传递给程序之前完成。如果您直接调用它，那么您需要使用完整路径名

```
/home/user/Desktop/file.txt 
```

或相对路径

```
./Desktop/file.txt 
```

我怀疑调试器正在扩展文件名，以便在将其传递给程序之前对您有所帮助。

# c++ - 在 XCode 4.4.1 上构建 gtest 框架

> ID：12769746
> 
> 赞同：1
> 
> 时间：2012-10-07T14:38:00.403
> 
> 标签：c++, xcode, testing, stl, googletest

[我正在尝试按照此处](http://www.youtube.com/watch?v=7vND8C3bF5A&feature=relmfu)和[此处](http://code.google.com/p/sidelight/wiki/gtestSample)的说明为 XCode 4.4.1 构建 gtest ；但是，似乎在尝试构建“gtest-framework”时，我的“方案”中唯一可能的目的地是“我的 Mac 64 位”。

当我尝试构建项目时，出现以下错误：-

> 运行目标 My Mac 64 位对运行方案“gtest-framework”无效。方案“gtest-framework”不包含可以为运行目标 My Mac 64 位支持的 SDK 构建的可构建项目。确保您的目标都指定了此版本 Xcode 支持的 SDK。

我怎样才能继续为 XCode 构建 gtest 以便我可以将它用于我的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T21:16:37.237

在 General.xcconfig 中更改 SDKROOT 和 MACOSX_DEPLOYMENT_TARGET 的值

```
// Default SDK and minimum OS version is 10.4
SDKROOT = $(DEVELOPER_SDK_DIR)/MacOSX10.7.sdk
MACOSX_DEPLOYMENT_TARGET = 10.7 
```

在项目 Build Settings 中，将 Base SDK 更改为 10.7，将 Compiler 更改为默认编译器。

构建 gtest 现在应该可以工作了。

# mysql - 我的 WordPress 安装使用的是哪个 MySQL 数据库？

> ID：12769751
> 
> 赞同：5
> 
> 时间：2012-10-07T14:38:27.760
> 
> 标签：mysql, database, wordpress

我正在为一个在她的虚拟主机帐户上有多个网站的客户开发一个网站。我想将在 WordPress 上运行的网站之一移动到我的本地主机。但是我遇到了 MySQL 数据库的问题，无法弄清楚该站点正在使用哪个数据库。

*wp-config.php*指向一个数据库，但是当我在 phpMyAdmin 中查看同一个数据库时，那里没有常见的 WordPress 表。而不是前缀`wp_`，而是一堆带有前缀的表`cp_`。我不知道那是什么意思。客户的主机帐户上还有其他具有 WordPress 表的数据库，但它们的`wp_options`表都指向其他站点 URL，而不是我正在尝试处理的那个。

如何找出正在使用的数据库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T14:41:58.303

表前缀可能已更改为，`cp_`而不是标准的`wp_`. 一些安装这样做是为了减轻某些类型的 SQL 注入攻击。`wp-config.php`应始终指向真实数据库，在您的情况下，该数据库应具有表名，如`cp_posts`, `cp_postmeta`,`cp_options`等。

检查`$table_prefix`配置文件中的变量，或者它可能隐藏在某个 cPanel 选项中。

# php - 在非对象上调用成员函数 query()

> ID：12769756
> 
> 赞同：0
> 
> 时间：2012-10-07T14:39:13.913
> 
> 标签：php, mysqli

我对 PHP 有点陌生，对 MySQLi 也很陌生，**我试图在由 5 个变量组成的数据库中插入一行。**

```
if($_POST['submit']) {
            $title = mysqli_escape_string($_POST['title']);
            $content = $_POST['content'];
            $author = $_SESSION['fullname'];
            $publishedtime = time();
            $pageID = $_POST['pageid'];
            $connection = new mysqli(DB_HOST, DB_USER, DB_PASS, DB_NAME);

            if ($connection->errno) {
                printf("Connection failed: %s\n", $connection->error);
                exit();
            }

            $author = $_SESSION['fullname'];
            $publishedtime = time();
            $q = "INSERT INTO posts (title, content, author, publishedtime, pageID) VALUES ('".$title."', '".$content."', '".$author."', '".$publishedtime."', '".$pageID."')";

            if (!$dbc->query($q)) {
                echo "INSERT failed: (" . $dbc->errno . ") " . $dbc->error;
            }    
            echo "Newest user id = ",$dbc->insert_id;

            $connection->close();

        }
        else {
            addPostForm();
        } 
```

我得到这些错误：

> 警告：mysqli_escape_string() 需要 2 个参数，1 个在第 11 行的 /admin/manage.php 中给出
> 
> 致命错误：在第 27 行的 /admin/manage.php 中的非对象上调用成员函数 query()

我可以很好地读取数据库，但无法插入其中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:44:08.553

如果您`real_escape_string`在创建`mysqli`对象后使用，则可以使用

```
$connection->real_escape_string($_POST['title']) 
```

[http://www.php.net/manual/en/mysqli.real-escape-string.php](http://www.php.net/manual/en/mysqli.real-escape-string.php)

* * *

至于查询错误……`$dbc`从哪里来？！你会想要使用：

```
$connection->query(...); 
```

# javascript - 向弹出信息窗口的标记添加侦听器 - Google Maps API

> ID：12769763
> 
> 赞同：1
> 
> 时间：2012-10-07T14:40:12.423
> 
> 标签：javascript, google-maps, google-maps-markers

如何向我的标记添加一个侦听器，当单击标记时读取“Hi”。我的代码看起来像：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAGcwOypxqebsKcF-A6pZUqDvijKbjltw0&sensor=false">
    </script>
    <script type="text/javascript">
      function initialize() {
    var myLatlng = new google.maps.LatLng(61.455019, 23.84559);

    var myOptions = {
        zoom: 15,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.TERRAIN
    }

    var myMap = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var myMarker = new google.maps.Marker({
        position: myLatlng,
        map: myMap,
    });

    google.maps.event.addListener(myMarker, 'click',
      function() 
      {
         var htmlString = "Hi";
         myMarker.openInfoWindowHtml(htmlString);
      }
   );
}
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

我想我在调用 addListener 事件时出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:04:59.750

请参阅Google Maps API v3 的 infowindow[文档](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)，没有 .openInfoWindowHtml 方法。

[文档中的工作示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/event-closure)

[使用 v3 语法的地图工作版本](http://www.geocodezip.com/v3_MarkerListenerA.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T08:12:04.813

我认为问题可能出在点击功能上...您可以从您的 var myMarker 替换此代码。

```
 var myMarker  = new google.maps.Marker({

                position: myLatlng,
                map: myMap,
                title: 'xxxxx'
            });

            google.maps.event.addListener(myMarker  , 'click', function() {
                var infowindow = new google.maps.InfoWindow;
                infowindow.setContent('Hi');
                infowindow.open(myMap, myMarker);
            }); 
```

# ios - 如何优化drawRect？

> ID：12769775
> 
> 赞同：0
> 
> 时间：2012-10-07T14:42:15.043
> 
> 标签：ios, ipad, drawrect

下面是我自定义视图的drawRect，它画了一个棋盘，棋盘有19*19的线，上下左右各有一个字符，左右各1-19，也是9个点：

```
- (void)drawRect:(CGRect)rect
{
    // Get the drawing context
    CGContextRef context = UIGraphicsGetCurrentContext ();

    CGContextSaveGState(context);

    // Draw the board background
    UIImage *bk = [UIImage imageNamed:@"board_bg_011.png"];

    CGColorRef shadowColor = CreateDeviceRGBColor(0.5, 0.5, 0.5, 1);
    CGContextSetShadowWithColor(context, CGSizeMake(2, 2), 10, shadowColor);
    [bk drawInRect:CGRectMake(TEXT_AREA_OFFSET, TEXT_AREA_OFFSET, self.bounds.size.width - TEXT_AREA_OFFSET * 2, self.bounds.size.height - TEXT_AREA_OFFSET * 2)];

    CGColorRelease(shadowColor);
    CGContextRestoreGState(context);

    // Draw board edage square
    UIBezierPath *path = [UIBezierPath bezierPathWithRect:tableRect];
    path.lineWidth = 2.0;
    [path stroke];

    // Draw board lines
    UIBezierPath *line = [UIBezierPath bezierPath];
    line.lineWidth = 1.0;
    for (int i = 1; i <= 17; i ++) {
        float x = tableRect.origin.x + i * qiziSize;
        [line moveToPoint:CGPointMake(x, tableRect.origin.y)];
        [line addLineToPoint:CGPointMake(x, tableRect.origin.y + tableRect.size.height)];
        [line stroke];

        float y = tableRect.origin.y + i * qiziSize;
        [line moveToPoint:CGPointMake(tableRect.origin.x, y)];
        [line addLineToPoint:CGPointMake(tableRect.origin.x + tableRect.size.width, y)];
        [line stroke];
    }

    // Draw 9 dots
    CGContextSaveGState(context);

    CGRect dotRect = CGRectMake(0, 0, 6, 6);
    CGContextTranslateCTM(context, tableRect.origin.x + qiziSize * 3 - 3, tableRect.origin.y + qiziSize * 3 - 3);
    UIBezierPath *dot = [UIBezierPath bezierPathWithOvalInRect:dotRect];
    [dot fill];

    CGContextTranslateCTM(context, qiziSize * 6, 0);
    [dot fill];

    CGContextTranslateCTM(context, qiziSize * 6, 0);
    [dot fill];

    CGContextTranslateCTM(context, - qiziSize * 12, qiziSize * 6);
    [dot fill];

    CGContextTranslateCTM(context, qiziSize * 6, 0);
    [dot fill];

    CGContextTranslateCTM(context, qiziSize * 6, 0);
    [dot fill];

    CGContextTranslateCTM(context, - qiziSize * 12, qiziSize * 6);
    [dot fill];

    CGContextTranslateCTM(context, qiziSize * 6, 0);
    [dot fill];

    CGContextTranslateCTM(context, qiziSize * 6, 0);
    [dot fill];

    CGContextRestoreGState(context);

    CGContextSaveGState(context);

    UIFont *font = [UIFont fontWithName:@"Helvetica" size:12];
    int fontHeight = [@"1" sizeWithFont:font].height;
    UIColor *textColor = [UIColor grayColor];
    [textColor setFill];
    [textColor setStroke];

    for (int i = 1; i <= 19; i ++) {
        // Top text
        NSString *str = [NSString stringWithFormat:@"%c", ((i < 9)?i:(i+1)) + 'A' - 1];
        CGRect textRect = CGRectMake(tableRect.origin.x + qiziSize * (i - 1) - qiziSize / 2, 0, qiziSize, TEXT_AREA_OFFSET);
        [str drawInRect:textRect withFont:font lineBreakMode:UILineBreakModeClip alignment:UITextAlignmentCenter];

        // Bottom text
        textRect.origin.y = self.bounds.size.height - TEXT_AREA_OFFSET + 2;
        [str drawInRect:textRect withFont:font lineBreakMode:UILineBreakModeClip alignment:UITextAlignmentCenter];

        // Left text
        str = [NSString stringWithFormat:@"%i", i];
        textRect = CGRectMake(0, tableRect.origin.y + qiziSize * (i - 1) - fontHeight / 2, TEXT_AREA_OFFSET - 2, fontHeight);
        [str drawInRect:textRect withFont:font lineBreakMode:UILineBreakModeClip alignment:UITextAlignmentRight];

        // Right text
        textRect.origin.x = self.bounds.size.width - TEXT_AREA_OFFSET + 2;
        [str drawInRect:textRect withFont:font lineBreakMode:UILineBreakModeClip alignment:UITextAlignmentLeft];
    }

    CGContextRestoreGState(context);
} 
```

在 iPad3 上运行，此方法耗时 1 秒以上。关于如何优化它有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:51:48.300

我认为这是您之前关于旋转性能不佳的问题的后续。

创建和绘制（和缩放）图像和字体非常昂贵。在工具中使用时间分析器将突出显示代码中最昂贵的区域，但这些是最有可能的候选者。

您应该考虑将您的视图分解为 UIImageView 和 UILabel 实例，它们将缓存它们的后备存储并且不需要重新绘制，只需重新定位。但是，在您分析代码并发现性能瓶颈之前，您不应该做*任何事情。*

# c++ - 获取迭代器返回的字符串的 size()

> ID：12769776
> 
> 赞同：5
> 
> 时间：2012-10-07T14:42:28.030
> 
> 标签：c++, visual-c++

```
vector<string> frame(const vector<string>& v){
   vector<string> ret;
   string::size_type maxlen = width(v);
   string border(maxlen + 4,'*');

   //write the top border
   ret.push_back(border);

  //write each interior row
  for(vector<string>::const_iterator i = v.begin();i != v.end();++i){
     ret.push_back("* " + *i + string(maxlen- (*i.size()),' ') + " *");
  }

  //write the bottom border
  ret.push_back(border);

  return ret;
 } 
```

在 for 循环中，访问迭代器 i ----> *i.size(); 返回的字符串的 size() 成员函数时出现错误

"类 "std::_Vector_const_iterator>>" 没有成员 "size"

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-07T14:44:07.970

`(*i).size()`. 运算符的`.`优先级高于`*`

# c# - 尝试使用水平选项卡布局创建 PDF 包

> ID：12769779
> 
> 赞同：1
> 
> 时间：2012-10-07T14:42:39.343
> 
> 标签：c#, vb.net, pdf, pdf-generation

我正在尝试使用水平选项卡布局构建 PDF 包；看来，完成这项工作的唯一方法是利用内置在 Flash 中的自定义投资组合导航器（PDF 规范支持此类投资组合导航器），该导航器需要单独构建，然后包含在 PDF 投资组合中。

但是，希望现在有几个 .NET 库可以在不使用 Flash 的情况下完成这项工作？

# c - 如何检查 Unix C 中的文件是否相同？

> ID：12769781
> 
> 赞同：4
> 
> 时间：2012-10-07T14:43:15.367
> 
> 标签：c, file, unix

如何使用 Unix C 检查一个文件是否与另一个文件相同（具有相同的内容）？我的意思是，当我不能使用`fopen, fread, fclose`但只是`open, read, close`？我对仅在 Unix C 中显示如何执行此操作的答案感兴趣。

我编写了一个程序，将一个文件复制到另一个文件，但不知道如何检查它们是否相同：/：

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    const char *in_filename = "in.txt", *out_filename = "out.txt";
    int in_fd, out_fd, bytes_read, bytes_written;
    int buffsize = 512;
    char buffer[512];
    int success = 0;

    in_fd = open(in_filename, O_RDONLY);
    if (in_fd == -1)
        return -1;
    out_fd = open(out_filename, O_WRONLY | O_APPEND, S_IRUSR | S_IWUSR);
    if (out_fd == -1)
        return -1;

    for(;;)
    {
        bytes_read = read(in_fd, buffer, buffsize);
        if (bytes_read > 0)
        {
            bytes_written = write(out_fd, buffer, bytes_read);
            if(bytes_written < 0)
                return -1;
        }
        else
        {
            if (bytes_read == 0)
            {
                if (close(in_fd) < 0)
                    return -1;
                if (close(out_fd) < 0)
                    return -1;
                success = 1;
                break;
            }
            else if (bytes_read == -1)
            {
                break;
                return -1;
            }
        }
    }

    if(success)
        fprintf(stdout, "%s", "Success!\n");

    return 0;
} 
```

**这是我尝试过的：**

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    const char *in_filename = "in.txt", *out_filename = "out.txt";
    int in_fd, out_fd, bytes_read_in, bytes_read_out;
    int buffsize = 512;
    char in_buffer[512], out_buffer[512];
    int the_same = 0;

    in_fd = open(in_filename, O_RDONLY);
    if (in_fd == -1)
        return -1;
    out_fd = open(out_filename, O_RDONLY);
    if (out_fd == -1)
        return -1;

    for(;;)
    {
        bytes_read_in = read(in_fd, in_buffer, buffsize);
        if (bytes_read_in > 0)
        {
            bytes_read_out = read(out_fd, out_buffer, buffsize);
            if(bytes_read_out > 0)
            {
                int i = 0;
                for(i=0; i<buffsize; i++)
                {
                    if(in_buffer[i] != out_buffer[i])
                        the_same = 0;
                }
                the_same = 1;
            }
        }
        else
        {
            if (bytes_read_in == 0)
            {
                if (close(in_fd) < 0)
                    return -1;
                if (close(out_fd) < 0)
                    return -1;
                break;
            }
            else if (bytes_read_in == -1)
            {
                break;
                return -1;
            }
        }
    }

    if(the_same)
        fprintf(stdout, "%s", "Files are the same!\n");

    return 0;
} 
```

但它表明文件是相同的，而它们不是:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:57:54.020

您只需要同时读取两个缓冲区。例如（也考虑处理错误），根本不使用 C 标准库：

```
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>

#define BUFFER_SIZE 1024

static int 
bufcmp(const void *p, const void *q, size_t n)
{
    const char *p1 = p;
    const char *p2 = q;

    while (n-- > 0) {
        if (*p1++ != *p2++)
            return 0;
    }

    return 1;
}

int
main(int argc, char *argv[]) 
{
    int fd1 = open(argv[1], O_RDONLY);
    int fd2 = open(argv[2], O_RDONLY);
    int same = 1;

    for (;;) {
        char buf1[BUFFER_SIZE], buf2[BUFFER_SIZE];
        ssize_t n1 = read(fd1, buf1, BUFFER_SIZE);
        ssize_t n2 = read(fd2, buf2, BUFFER_SIZE);

        if (n1 < n2) {
            same = 0;
            break;
        } else if (n1 == 0) {
            break;
        } else if (bufcmp(buf1, buf2, n1) == 0) {
            same = 0;
            break;
        }
    }

    if (same)
        write(STDOUT_FILENO, "Same content.\n", 14);

    close(fd1);
    close(fd2);    

    return 0;
} 
```

**注意（感谢[user4815162342](https://stackoverflow.com/users/1600898/user4815162342)）：**此代码并不完全正确。`read`实际上，如果读取返回的字节数小于请求的字节数，这不是错误。但是，为了缩短此代码，我没有包含此管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:56:47.067

使用*两个*缓冲区有什么问题，每个文件一个，将相同数量的字节读入每个缓冲区，然后将缓冲区内容与 比较`memcmp`？

# java - Log4j 不会记录到文件，只记录到控制台

> ID：12769791
> 
> 赞同：3
> 
> 时间：2012-10-07T14:44:30.020
> 
> 标签：java, tomcat, web-applications, logging, log4j

我想使用 log4j 来登录我的 Tomcat webapp。我有一个数据访问类，它应该在请求用户信息等时记录活动。我已经向我的 rootlogger 添加了一个文件处理程序和一个控制台处理程序，并且我完全能够在控制台中看到正确的日志消息，但是不幸的是不在指定的文件中。

我的代码如下：

```
imports...

public class UserDao {
    private final Logger logger = Logger.getRootLogger();

    public UserDao() {
        FileAppender fa = new FileAppender();
        fa.setLayout(new PatternLayout("%d{yyyy-MM-dd HH:mm:ss.SSSS} %p %t %c \u2013 %m%n"));
        fa.setName("UserDaoFileAppender");
        fa.setFile("UserDao.log");
        fa.setThreshold(Level.INFO);
        fa.setAppend(true);
        fa.activateOptions();
        logger.addAppender(fa);

        ConsoleAppender ca = new ConsoleAppender();
        ca.setLayout(new PatternLayout("%d{yyyy-MM-dd HH:mm:ss.SSSS} %p %t %c \u2013 %m%n"));
        ca.setThreshold(Level.WARN);
        ca.activateOptions();
        logger.addAppender(ca);

        logger.warn("Test warning");
        logger.error("Test error");
        logger.info("Test info");
        logger.debug("test debug");
    }

    // Rest of the class.

} 
```

我曾尝试使用属性文件方式来设置 appender 配置，但我始终无法让它工作。我尝试将它放在 WEB-INF/classes 文件夹和 src-root 中，正如这里的一些人所建议的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:03:39.557

我有工作样本（如果你对属性文件没问题）。您需要将 log4j.properties 复制到 WEB-INF 文件夹

```
log4j.rootLogger=INFO, stdout, logfile

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - %m%n

log4j.appender.logfile=org.apache.log4j.RollingFileAppender
log4j.appender.logfile.File=${billing.root}/WEB-INF/billing.log
log4j.appender.logfile.MaxFileSize=512KB
# Keep three backup files.
log4j.appender.logfile.MaxBackupIndex=3
# Pattern to output: date priority [category] - message
log4j.appender.logfile.layout=org.apache.log4j.PatternLayout
log4j.appender.logfile.layout.ConversionPattern=%d %p [%c] - %m%n 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:21:26.213

您正在为 FileAppender 使用无参数构造函数。请使用带有至少 2 个参数的构造函数。

```
FileAppender fa = new FileAppender();
fa.setLayout(new PatternLayout("%d{yyyy-MM-dd HH:mm:ss.SSSS} %p %t %c \u2013 %m%n")); 
```

将这两行替换为以下内容：

```
FileAppender fa = new FileAppender(new PatternLayout("%d{yyyy-MM-dd HH:mm:ss.SSSS} %p %t %c \u2013 %m%n"), "path of the log file"); 
```

# android - 硬编码字符串“Image”，应该使用@string资源

> ID：12769792
> 
> 赞同：0
> 
> 时间：2012-10-07T14:44:47.463
> 
> 标签：android, android-layout, android-intent

大家好，我又是我，我目前正在开发 android 应用程序。我正在使用 Eclipse Classic，当我将 ImageView 放入我的 main.xml 布局时遇到了困难，有一条错误消息说硬编码字符串“按钮”，应该使用 @string 资源。我所做的是打开 string.xml 我需要将图像源放在结束标记之前吗？

我正在尝试在我的项目中做隐含的意图。此应用程序的输出是当我打开图库然后单击在我的虚拟设备中上传的一张图片时单击共享有可以处理该事件的选项。例如，当我点击分享时，我有“facebook、tweeter options”。类似的东西。

顺便说一句，谢谢大家，我从你们那里学到了很多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:13:03.217

我认为这个问题与 ImageView 源没有任何关系。问题是您在 xml 中使用了硬编码字符串，而不是您可以通过以下方式将其放入 strings.xml 中：

```
<string name="stringId">The actual string value</string> 
```

在您的 xml 中检索它时，您可以使用 @string/stringId

我希望你能找到解决办法。如果您不这样做，请在此处粘贴您的代码，以便我们可以全面了解您要做什么。

# android - 如何在 Eclipse 中打开 LogCat（用于 Android 调试）

> ID：12769798
> 
> 赞同：6
> 
> 时间：2012-10-07T14:46:15.003
> 
> 标签：android, eclipse, debugging, logcat

我正在从我买的书中调试我的 Android 应用程序。在书中说（并在书中的 PrintScreen 上显示），我需要查看 LogCat 控制台。但我没有在我的 Eclipse 中打开它。我在选项中搜索，但找不到如何打开它。

如何打开 LogCat 控制台？！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-07T14:48:57.733

LogCat 位于此处：

窗口 > 显示视图 > 其他 > Android > LogCat

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T14:48:49.427

它在这里可用：

在 Eclipse 中，转到窗口-> 显示视图-> 其他-> Android-> Logcat。

你可以在这里找到你可以用 logcat 做的命令和东西：http: [//developer.android.com/reference/android/util/Log.html](http://developer.android.com/reference/android/util/Log.html)

# attributes - ember，如何在许多链接中获取“名称”属性？

> ID：12769802
> 
> 赞同：2
> 
> 时间：2012-10-07T14:46:56.590
> 
> 标签：attributes, ember.js

我是 Ember 的初学者。我有很多链接（即），带有attritube“名称”，当我点击其中一个时，我想获得这个属性。我知道如何只使用一个和 bindAttr，但是更多我正在尝试使用此代码，但无法正常工作。我需要为每个链接使用许多 bindAttr ???，昨天我做了这个（只有一个链接）：

```
<body>

    <div id="templateHere"></div>

            <!--handlebar-->
    <script type="text/x-handlebars" data-template-name="text">
            <h1>Send the message:</h1>              
            <a {{action "clicked" on="click"}} name='link1'>Click me!!</a>
            <a {{action "clicked" on="click"}} name='link2'>click me again</a>
    </script>​

    <script>
            //namespace
            App = Ember.Application.create();

            //define view 
            App.myview = Ember.View.extend({
                            templateName: 'text',
                            name_attribute:'name_buttooooon',               
                            message: '',
                            clicked: function(event) {
                            console.log(jQuery(this).attr('name'));//get attribute name value
                            }                               
            });

            //create view
            App.myview=App.myview.create();

            //insert view in body
            $(function() {
                App.myview.append('#templateHere');
            });

    </script>

</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:07:15.897

您可以通过使用`event.currentTarget`. 它是一个[jQuery 属性](http://api.jquery.com/event.currentTarget/)：

> 描述：事件冒泡阶段中的当前 DOM 元素。
> 
> 此属性通常等于函数的 this。
> 
> 如果您使用 jQuery.proxy 或其他形式的范围操作，这将等于您提供的任何上下文，而不是 event.currentTarget

我猜 Ember 为事件制作了一些特殊的上下文，因为 jQuery 文档说`currentTarget`应该等于`this`.

所以它在你的代码中看起来像这样：

```
clicked: function(event) {
    console.log($(event.currentTarget).attr('name'));
} 
```

[您可以在此 JSFiddle](http://jsfiddle.net/rvMbC/)中尝试此解决方案。

# python - Django 在运行时添加模型方法

> ID：12769804
> 
> 赞同：1
> 
> 时间：2012-10-07T14:47:05.620
> 
> 标签：python, django, django-models, django-admin

我想将运行时方法添加到我的 django 模型中，以便可以通过管理界面查看。感觉：用户应该能够添加一个 CalculationRule 并且应用规则会出现一个“虚拟”表。

```
# model.py
from django.db import models
import types

def rule(self):
  return 12 * self.calorific_requirement

class BuildingTable(models.Model):
    building_nr = models.IntegerField()
    square_meter = models.FloatField()
    calorific_requirement = models.FloatField()

    @staticmethod
    def __new__(cls, *args, **kwargs):
      setattr(cls, "rule", types.MethodType(rule, cls))
      return models.Model.__new__(cls, *args, **kwargs)

    def reqirement_per_m2(self):  # this is also a rule!
      return self.calorific_requirement / self.square_meter

    def __unicode__(self):
        return "Building " + str(self.building_nr)

class CalculationRule(models.Model):
    name = models.CharField(max_length=200)
    rule = models.CharField(max_length=200)

    def __unicode__(self):
        return str(self.name) 
```

但是，如果我将“规则”添加到我`admin.py`的`BuldingTableAdmin.list_display[4], 'rule' is not a callable or an attribute of 'BuldingTableAdmin' or found in the model 'BuildingTable'.`

```
# admin.py
from calccols_app.models import BuildingTable, CalculationRule
from django.contrib import admin

class BuldingTableAdmin(admin.ModelAdmin):
  list_display = ["building_nr", "square_meter", "calorific_requirement", "reqirement_per_m2", "rule"]

admin.site.register(BuildingTable, BuldingTableAdmin)
admin.site.register(CalculationRule) 
```

我`BuildingTable`在 django 的 shell 中测试过；- 方法存在，但`rule`不能正常工作。有什么想法可以注入方法，以便 django 可以处理/注册它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:57:37.833

您无需在模型中创建字段即可在管理员中显示它。您可以在 ModelAdmin 实体中执行此操作。

```
class UserAdmin(admin.ModelAdmin):
    list_display = ['username', 'fullname']

    def fullname(self, model):
        return  model.first_name + " " + model.second_name 
```

尽管我们可以动态地向您的模型添加方法。但是你必须把它当作一个方法，而不是一个属性：

```
def _status(invite):
    if invite.is_activated:
        return "Activated"
    if invite.is_alive:
        return "Live"
    return "Expired"

_status.short_description = 'status'
Invite.status = _status # Invite is model class 
```

这个“属性”通常显示在 admin 和 Django 模板中。

# iphone - 带有 XIB 的自定义 UIButton

> ID：12769807
> 
> 赞同：4
> 
> 时间：2012-10-07T14:47:45.497
> 
> 标签：iphone, ios, uibutton, custom-controls

我知道可以使用 XIB 文件制作自定义 UITableViewCell 并执行此操作，但是我如何使用 Button 执行此操作，所以制作新的 Lables 或其他东西？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:14:50.900

像这样实现 UIButton：

```
@interface MyNewButton : UIButton{
  UILabel* nickNameLabel;
  UIImageView* myImageView;
}

@property (nonatomic, retain) UIImageView *myImageView;
@property (nonatomic, retain) UILabel* nickNameLabel;
@end

@implementation MyNewButton
@synthesize myImageView;
@synthesize nickNameLabel;

- (id)initWithFrame:(CGRect)frame
{
    myImageView=[[AXSImageView alloc] initWithFrame:CGRectMake(10, 3, 40, 40)];

    [self addSubview:myImageView];
    nickNameLabel=[[UILabel alloc] initWithFrame:CGRectMake(myImageView.frame.origin.x + myImageView.frame.size.width + 6, 15, 80, 17)];
    [self addSubview:nickNameLabel];
}
- (void)drawRect:(CGRect)rect
{
    //DO What You Need
}
- (void)dealloc
{

    [nickNameLabel release],nickNameLabel=nil;
    [myImageView release],myImageView=nil;
    [super dealloc];
}
@end 
```

使用 XIB 文件的 UIView 也可以作为子视图添加到这个类中，你知道什么意思:)

# xml - 如何删除xml列表名称

> ID：12769810
> 
> 赞同：1
> 
> 时间：2012-10-07T14:47:52.137
> 
> 标签：xml, serialization

我正在序列化一个具有子类列表的类。如何从 xml 中排除集合节点？一个例子将说明我的观点。

```
public class A
{
   public List<Person> People;
}

public class Person
{
  [XmlAttribute]
  public string name;
} 
```

这序列化为：

```
<A>
   <People>
     <Person name = "a"/>;
     <Person name = "b"/>;
     <Person name = "c"/>;
   </People>
</A> 
```

现在这在逻辑上似乎是正确的，但是我试图复制的 xml 看起来像这样：

```
<A>
     <Person name = "a"/>;
     <Person name = "b"/>;
     <Person name = "c"/>;
</A> 
```

如何做到这一点？

非常感谢

# android - 是否可以找到交点

> ID：12769819
> 
> 赞同：2
> 
> 时间：2012-10-07T14:49:29.363
> 
> 标签：android, path

在 Android 中，由“quadTo”方法创建的路径。如果我有 X 坐标值，是否可以找到 Y 坐标值？

和以前一样，我考虑过“PathMeasure”。但我没能找到正确的结果。

有人可以给出一些想法吗？

![在此处输入图像描述](../Images/701e892b91acceebc6719f4f0392f981.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T14:59:16.627

`Path.quadTo()`在当前点之间创建一个标准的二次贝塞尔曲线，逼近第一个 (x,y) 参数并在第二个 (x,y) 点结束。您应该能够显式生成方程并求解。我认为，不幸的是，API 中没有任何内容可以进行此计算。

但是请注意，任何特定的二次贝塞尔曲线都可能与该线相交`x = constant`0 到 3 次。

# matlab - 如何在matlab中找到xlabel的实际长度或坐标

> ID：12769822
> 
> 赞同：4
> 
> 时间：2012-10-07T14:50:36.230
> 
> 标签：matlab, text, plot, label

我正在使用以下代码在 matlab 图中查找 xlabel 的位置。

```
xlabel('X');
get(get(gca,'XLabel'),'Position'); 
```

这给了我一些坐标（0.4981 -0.0669 1.0001）。我认为坐标只是标签左上角的位置。那么，如果我只知道字体大小，我如何找到标签的界限呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T14:57:04.850

文本对象有一个["Extent"](http://www.mathworks.com/help/matlab/ref/text_props.html#zmw57dd0e406428)属性：

> **程度**
> 
> 文本的位置和大小。定义文本字符串大小和位置的四元素向量：
> 
> ```
> [left,bottom,width,height] 
> ```
> 
> 如果 Units 属性是 data（默认），left 和 bottom 是文本 Extent 左下角的 x 和 y 坐标。
> 
> 对于 Units 的所有其他值，left 和 bottom 是从坐标区 Position 矩形的左下角到文本 Extent 的左下角的距离。width 和 height 是 Extent 矩形的尺寸。所有测量均采用 Units 属性指定的单位。

# sql - 在 Web 应用程序中提供快速的“选择计数（*）”功能

> ID：12769823
> 
> 赞同：4
> 
> 时间：2012-10-07T14:50:40.520
> 
> 标签：sql, postgresql, heroku, berkeley-db

我正在重新实现一个应用程序来支持全国工程竞赛，将其从本地服务器移动到云端。

为了告诉团队他们目前所处的位置，查询的形式为

```
select 1 + count(*) from team where where score < ? 
```

球队的分数变化非常动态。可能有多达 200 万个团队，我需要每秒处理至少 10 个这样的查询。

通过使用单独的伯克利团队/得分记录数据库，原始版本获得了所需的性能（实际上它已经在 1999 年的硬件中实现了）。Berkeley DB 中有一个“记录编号”功能，它提供了完全正确的功能，而且速度非常快。

Heroku 显然没有办法支持 Berkeley DB。他们的标准数据库 PostgreSQL`select count(*)`使用全表或索引扫描，这太慢了。

关于如何进行的任何想法？我不喜欢 Heroku，但必须转向某种云解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T01:11:40.337

创建一个排名表并尽可能频繁地更新。包括类别（公开或官方）和分数，这样您就不必在查询时将其加入团队表：

```
create table "rank" (
    team integer primary key, 
    category integer,
    score integer,
    rank_consolidated integer,
    rank_category integer
);

begin;
truncate table "rank"
;
insert into "rank" (team, category, score, rank_consolidated, rank_category)
select 
    team, category, score,
    rank() over(order by score desc) rank_consolidated,
    rank() over(partition by category order by score desc) rank_category
from team
;
commit
;
select * from "rank" where team = 11; 
```

至于确切的排名行为，请查看[窗口函数](http://www.postgresql.org/docs/9.2/interactive/functions-window.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T14:00:52.710

使用[redis](http://redis.io)将您的团队数据存储在`sorted set`. 然后该[`ZRANK`](http://redis.io/commands/zrank)函数将返回您需要的计数。Redis 总体上非常快，并且`ZRANK`函数是 O(log N) 预期的。它是用跳过列表实现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:16:24.247

将索引放在分数上应该避免全表扫描。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T08:11:23.293

如果它的读取量比写入量多得多，并且它始终必须是最新的，那么这对于触发器维护的汇总表（一种物化视图）来说是一个理想的工作。

`team`在表上有一个触发器，它`AFTER EACH INSERT OR UPDATE OR DELETE FOR EACH ROW`执行一个触发器函数，`team_summary`用新分数更新该团队的表条目。

该`team_summary`表可以通过一个简单的、直接的等式索引查找来访问，所以它会非常快。由于 Pg 支持同时读取器和写入器，`team_summary`即使表被非常频繁地更新，它也会保持响应。为了获得最佳结果，您真正需要做的唯一事情是`FILLFACTOR`在表中设置为 50`team_summary`左右，以便 HOT 可以正常工作，并确保将 autovacuum 设置为经常运行以分散 Vacuum I/O churn 的负载。

编写触发器应该很简单。您只需要小心编写一个并发安全触发器，当您通过多个并发连接对同一团队进行并发更新时，该触发器不会中断。就像是：

```
UPDATE team_summary SET score = score + 1 WHERE team_id = NEW.team_id; 
```

`SERIALIZABLE`和`READ COMMITTED`隔离下应该没问题。请参阅[并发控制](http://www.postgresql.org/docs/current/static/mvcc.html)。唯一困难的一点是，您必须确保`team_summary`在将新团队的第一行插入之前插入新行，`team`这样您的触发器就不必处理表`team_summary`中可能尚不存在该行的异常棘手的情况`team`。获得正确的 upsert/merge 有点棘手。

如果写入速率也非常高，并且您可以避免每隔几秒/分钟更新一次结果，请改用 Clodoaldo 的方法。

# ios - iOS App：在 UIButton 上设置自定义字体会清除按钮

> ID：12769825
> 
> 赞同：2
> 
> 时间：2012-10-07T14:51:18.117
> 
> 标签：ios, uibutton, truetype

我对 iOS 上的自定义字体有一个奇怪的问题。

我在我的项目中包含了一个 TTF 字体，并以编程方式为一堆 UI 控件设置它——我尝试了很多方法，它们都产生了相同的奇怪结果：

对于 UILabels 它工作正常（除了多行标签折叠成一行，非常烦人），但对于 UITextEdit 和 UIButton，标签被清除（不是白色或透明；它消失了）。

这是我用于标签的代码：

```
- (void)setLabelFontOn:(UILabel *)label
{
  label.font = [UIFont fontWithName:@"DIN-Regular" size:label.font.pointSize];
} 
```

这是我用于 UIButton 的代码

```
- (void)setButtonFontOn:(UIButton *)button
{
  [self setLabelFontOn:button.titleLabel];
} 
```

它正在做同样的事情！然而一个有效，另一个无效。

我尝试在 viewDidAppear 和 viewDidLoad 中的视图集合上调用它。我试图创建一个自定义 UIButton 并在 awakeFromNib 中实现上述内容 - 都具有相同的结果 - 我似乎无法让该字体显示在 UIButton 上。

按钮 UILabel 上使用的字体与常规 UILabel 不同，是否有一些时髦的要求？

# java - 如何放大或缩小 JComponents？

> ID：12769830
> 
> 赞同：1
> 
> 时间：2012-10-07T14:51:51.983
> 
> 标签：java, swing, scaling, jtextarea, paintcomponent

在我的应用程序中，我需要`JTextArea`在面板上的某个位置上绘图，并且需要能够放大和缩小它。

`paintComponent`对于定位它，我可以使用绝对定位，但缩放带来了挑战——我可以通过调整方法轻松地缩小它：

```
@Override
public void paintComponent(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;
    g2.scale(0.5,0.5);
    super.paintComponent(g2);
} 
```

但是按比例放大不起作用 - 因为我使用`setBounds`显式设置组件的边界，所以部分按比例放大的组件最终不会被绘制。我该如何解决？

编辑：有点解释。

我维护的应用程序是一种图形编辑器，我需要添加一个功能，即在工作区添加注释之类的东西，以便用户可以直接在该工作区键入文本。与大多数图形编辑器一样，工作区域可以移动和放大/缩小，因此用户输入文本的文本区域也应该移动和缩放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T17:01:37.063

如果文本组件在缩放时必须保持可编辑状态，您可以将使用的（粗略）比例缩放到比例因子，如此[处](https://stackoverflow.com/a/4568041/230513)`Font`所示。

![图片](../Images/0ffd2954d876039c45e0f56837833908.png)

# c# - Datagridview 到特定的 excel 单元格

> ID：12769832
> 
> 赞同：2
> 
> 时间：2012-10-07T14:52:36.790
> 
> 标签：c#, winforms, excel

我有 2 个 datgridviews，试图将标题和它的值复制到 excel 表中。第一个循环对于第一个 datagirdview 工作正常

```
for (int i = 1; i < dataGridView1.Columns.Count + 1; i++)
            {
                worksheet.Cells[7, i] = dataGridView1.Columns[i - 1].HeaderText;
            }

            // storing Each row and column value to excel sheet
            for (int i = 0; i < dataGridView1.Rows.Count - 1; i++)
            {
                for (int j = 0; j < dataGridView1.Columns.Count; j++)
                {
                    worksheet.Cells[i + 8, j + 1] = dataGridView1.Rows[i].Cells[j].Value.ToString();
                }
            } 
```

这是第二个 datagridview，我正在尝试复制标题及其值。

第一个 datagridview 标题值在`D7`第 7 行单元格处完成，行值在第 8 行单元格处完成`D8`。

我想放置第 7 行的第二个 datagridview 标题和第 8 行`E7`的行值`E8`。

```
//Primary Continuation
        for (int i = 7; i < dataGridView2.Columns.Count + 1; i++)
        {
            worksheet.Cells[7, i] = dataGridView2.Columns[i - 1].HeaderText;
        }

        // storing Each row and column value to excel sheet
        for (int i = 0; i < dataGridView2.Rows.Count - 1; i++)
        {
            for (int j = 0; j < dataGridView2.Columns.Count; j++)
            {
                worksheet.Cells[i + 8, j + 1] = dataGridView2.Rows[i].Cells[j].Value.ToString();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:33:28.713

因此，如果我对您的理解正确，您想在 Excel 工作表上将您的两个表格并排放置吗？在这种情况下，您似乎在第二个循环中混淆了偏移量`DataGridView`。在这个循环中：

```
//Primary Continuation
for (int i = 7; i < dataGridView2.Columns.Count + 1; i++)
{
    worksheet.Cells[7, i] = dataGridView2.Columns[i - 1].HeaderText;
} 
```

无需将计数偏移 7（这会驱动网格中的源数据位置），您需要偏移 Excel 工作表中的目标，因为第二个中的位置`DataGridView`将与第一个相同。您可以复制您的第一个循环，但只需稍微更改目标即可。事实上，这同样适用于您的最终循环。

还值得注意的是，复制值的循环将错过最后一行。我不确定这是不是故意的，但我已经纠正了。这是您的第二组循环的外观。

```
//Primary Continuation
for (int i = 1; i < dataGridView2.Columns.Count + 1; i++)
{
    worksheet.Cells[7, i + dataGridView2.Columns.Count] = dataGridView2.Columns[i - 1].HeaderText;
}

// storing Each row and column value to excel sheet
for (int i = 0; i < dataGridView2.Rows.Count; i++)
{
    for (int j = 0; j < dataGridView2.Columns.Count; j++)
    {
        worksheet.Cells[i + 8, j + 1 + dataGridView2.Columns.Count] = dataGridView2.Rows[i].Cells[j].Value.ToString();
    }
} 
```

您会注意到，由于您的两组循环之间的差异现在可以忽略不计，您可以轻松地将它们组合在一起，从而减少执行时间（尽管显然只有在使用更多数据时才会注意到影响）。

# php - 在 PHP 中使用递归

> ID：12769834
> 
> 赞同：1
> 
> 时间：2012-10-07T14:53:01.220
> 
> 标签：php, function, recursion

我正在使用递归来减少一个数字的值并将其等于另一个数字，但产生的结果是空白的，我找不到错误。

```
$A = 40;
$B = 130 ;

function Equalize( $A , $B ) {
    if (   $B  -   $A   >= 30 ) {
        $Start = $A + 30 ;
        Equalize($Start , $B );
    }
    else {
       //if I place- echo 'A='.$A; here;
       // then it echoes : A=130.but **return** doesn't works....???       
       return $A;        
    }
}

$Result  = Equalize( $A , $B );
 echo 'Final Result ='.$Result ; //here it shows result as empty 
```

**更新**

```
$A = 40;
$B = 130 ;

function Equalize( $A , $B ) {
    if (   $B  -   $A   > 30 ) {
        $Start = $A + 30 ;
        Equalize($Start , $B ); **DO I NEED 'return' HERE TOO before function call ????**   
    }         
    else {
        //if I place- echo 'A='.$A; here;
        // then it echoes : A=100.but **return** doesn't works....???
        return $A;            
    }
}       
$Result  = Equalize( $A , $B );
echo 'Final Result ='.$Result ; //here it shows result as empty 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:54:20.973

在第一次调用`Equalize($Start , $B );`within`Equalize`时，让它返回`Equalize`函数的调用，而不是仅仅调用它。

```
 $Start = $A + 30;
 return Equalize($Start , $B ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T14:55:14.607

在您的`if`块更改中

```
Equalize($Start , $B ); 
```

到

```
return Equalize($Start , $B ); 
```

因为您没有从`if`块中显式返回任何内容，因此[返回了 null](https://stackoverflow.com/questions/1218580/what-does-a-php-function-return-by-default)。

# ios - Ios自动地图揭示了战争迷雾对网格的影响

> ID：12769835
> 
> 赞同：2
> 
> 时间：2012-10-07T14:53:36.397
> 
> 标签：ios, map, show

我正在尝试找出为我正在做的游戏制作战争迷雾效果的最佳方法。效果应该会显示您所在的方格。当您移动时，效果应该会显示 40x40 网格中的正方形。我试图找出最好的方法来做到这一点。我知道我可以将地图制作成图像，然后添加一组 40 x 40 的图像来覆盖并隐藏它们，然后在你走在广场上时显示出来，这似乎效率很低。我的地图也位于滚动视图上，因此您可以平移地图并调整其大小以放大和缩小。我不确定是否有更好的功能来显示图像的某些部分。任何人都知道如何最好地处理这是最有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T14:57:26.150

听起来你想覆盖一个视图，然后显示它的一部分。在某种程度上，这就像一个橡皮擦工具。这里有几件事可能对您有所帮助。

*   看看[这个](https://stackoverflow.com/questions/10227769/making-an-eraser-tool-for-a-paint-app-in-ios)关于创建橡皮擦效果的问题。
*   这是[一篇](http://craigcoded.com/2010/12/08/erase-top-uiview-to-reveal-content-underneath/)关于擦除图像以显示下面的视图的博客文章

重要的部分是使用它来清除雾（如果它是用 CoreGraphics 绘制的）：

```
CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear); 
```

# drawing - 带有触摸和点击事件的 Canvas Kinetic 绘图形状

> ID：12769836
> 
> 赞同：0
> 
> 时间：2012-10-07T14:53:42.120
> 
> 标签：drawing, html5-canvas, kineticjs

当用户单击这些点时，我想使用动力学绘制具有给定点（x，y）的形状，我将绘制一条连接这些点的线，当用户再次单击第一个点时，我们将通过连接所有点来获得一个形状并用给定的颜色填充它。

这是我的代码，但是在 drawShape 函数中，在我将它添加到我的图层后，多边形形状不会出现，请看一下并给我一些建议以使其工作，谢谢

```
$(document).ready(function() {

var stage = new Kinetic.Stage({
    container : "web",
    height : 470,
    width : 470
}), imgLayer = new Kinetic.Layer(), imgObj = new Image(), arrPosNode = [], clickedNode = [], animations = {}, pointArr = [];
arrPosNode = ["221 22", "220 130", "220 235", "18 170", "420 170", "99 405", "345 405", "125 202", "320 202", "160 321", "286 320"];
animations = {
    normal : [{
        x : 0,
        y : 0,
        height : 400,
        width : 410
    }],
    active : [{
        x : 0,
        y : 400,
        height : 400,
        width : 410
    }]
}

function addNode(pos, layer, activeColor, num) {
    var newPos = pos.split(" ");
    //console.log(newPos[0], newPos[1]);
    var node = new Kinetic.Circle({
        x : newPos[0],
        y : newPos[1],
        radius : 15,
        fill : 'transparent',
        id : 'node_' + num
    });

    node.on('click', function() {
        //node.setFill(activeColor);
        drawShape(node.getX(), node.getY(), node.getRadius(), layer);
        layer.draw();
    });

    layer.add(node);
}

function saveClickedPoint(x, y, radius) {
    for (var n = 0; n < clickedNode.length; n++) {
        if (x == clickedNode[n].x && y == clickedNode[n].y) {
            return;
        }
    }
    clickedNode.push({
        id : ('draw_' + (clickedNode.length + 1)),
        x : x,
        y : y,
        radius : radius
    });
}

function getArrFromPoint(obj) {
    pointArr = [];
    for (var n = 0; n < obj.length; n++) {
        pointArr.push(parseInt(obj[n].x));
        pointArr.push(parseInt(obj[n].y));
    }
    return pointArr;
}

function drawShape(x, y, radius, layer) {
    saveClickedPoint(x, y, radius);
    if (clickedNode.length == 1)
        return;
    else {
        var points = getArrFromPoint(clickedNode);
        console.log(points);
        var poly = new Kinetic.Polygon({
            points : points,
            fill : "#d99694",
            stroke : "#d99694",
            strokeWidth : 5
        });
        layer.add(poly);
    }
}

imgObj.onload = function() {
    var bg = new Kinetic.Sprite({
        x : 15,
        y : 10,
        image : imgObj,
        height : 400,
        width : 410,
        animation : 'normal',
        animations : animations,
        frameRate : 1
    });

    imgLayer.add(bg);

    for (var n = 0; n < arrPosNode.length; n++) {
        addNode(arrPosNode[n], imgLayer, 'transparent', n);
        /*d99694*/
    }

    stage.add(imgLayer);

    $('.valider').bind('click', function() {
        bg.setAnimation('active');
        imgLayer.draw();
    });
};

imgObj.src = "images/web_sprite.png"; 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:20:50.673

尝试使用：

```
 stage.getContainer().addEventListener('mousedown', function(evt) {}); 
```

然后在其中定义您的绘图功能。

也试试这个：http: [//jsfiddle.net/robtown/SGQq7/22/](http://jsfiddle.net/robtown/SGQq7/22/)

# security - 通过代理实现 SSL

> ID：12769837
> 
> 赞同：1
> 
> 时间：2012-10-07T14:53:43.310
> 
> 标签：security, rest, ssl, proxy

我们正在编写一个提供 RESTful API 的应用程序。应用程序需要受到保护，但我不希望我的*身份验证/加密*机制污染接口程序或 API。

我想知道代理是否对我们的情况有所帮助，但由于我不是 Web 开发方面的专家，我需要知道我的图片是否有意义。系统结构应如下所示：

1.  服务器程序只是在 TCP 端口上导出 API，但是只能从本地进程访问（绑定到`127.0.0.1`）；

2.  代理服务器管理 SSL 和身份验证：

    *   URI 和方法按原样导出，但是……</li>
    *   只有经过**身份验证**且具有**所需功能**的用户才能真正调用它们，并且……</li>
    *   通信必须在加密通道上运行

所以，我的问题是：

1.  这是一个合理的场景吗？

2.  什么是我可以为这项工作运行的好的代理服务器？

3.  这样做有什么缺点吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:39:06.273

似乎可以通过使用 HTTPS*反向*代理来实现您所拥有的一般场景。那里有多种实现。

一个流行的是 Apache Httpd：它可以处理传入的 HTTPS 连接、身份验证（使用各种机制）和反向代理。

一个典型的场景是，你将有一个“普通”的 HTTP 应用程序监听`localhost`，它前面有 Apache Httpd 并处理外部连接，其中：

*   [`mod_ssl`](http://httpd.apache.org/docs/2.2/mod/mod_ssl.html)处理服务器的 SSL/TLS 配置。
*   各种[`mod_auth*`](http://httpd.apache.org/docs/2.2/howto/auth.html)模块之一处理身份验证（取决于您要如何执行身份验证）；这些应该能够将经过身份验证的用户名（例如`REMOTE_USER`）导出到后端进行授权。
*   [`mod_proxy`](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)处理与后端应用程序的连接（例如，`mod_proxy_http`当应用程序服务器使用 HTTP 本身时）。

仅让具有所需能力的用户执行某些操作是授权部分。这一个更难与您的主要 API 分开，因为前端无法猜测您如何定义“拥有所需的功能”。这并不是说您必须将它与您的其他逻辑纠缠在一起，但是授权系统需要知道您的 API 是如何工作的（即可能的操作是什么），因此它通常最好在主应用程序中实现。

# google-app-engine - 在开发模式下运行 appengine 和 gwt 项目时无法加载模块错误

> ID：12769838
> 
> 赞同：0
> 
> 时间：2012-10-07T14:53:58.040
> 
> 标签：google-app-engine, gwt

![在此处输入图像描述](../Images/bc08218ec63a3dfbdfd70dcf88ad3fdd.png)请帮我纠正这个问题。每次我必须将项目上传到 app-engine 来运行它时，我都无法在本地以开发模式运行我的项目。终端输出： ![在此处输入图像描述](../Images/6569fd936a3efe6046507ee2710ee8d6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T16:56:40.473

在这里找到了解决方案[Getting errors with GWT tutorial on developers.google.com](https://stackoverflow.com/questions/11113169/getting-errors-with-gwt-tutorial-on-developers-google-com)但仍然不知道如何设置 jvm 标志：“-javaagent:/lib/agent/appengine-agent.jar”

# android - Android SyncAdapter 服务：onPerformSync 结束后保持活动状态？

> ID：12769839
> 
> 赞同：4
> 
> 时间：2012-10-07T14:53:58.280
> 
> 标签：android, service, android-syncadapter

我已经使用 Android[示例项目](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)、Steele 的两部分教程（[1](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/)和[2](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-2/)）和 Google I/O 2010 talk on REST applications 设置了一个 SyncAdapter。

似乎 AbstractThreadedSyncAdapter 总是在其 onPerformSync 完成后立即在 SyncAdapter 服务上调用 onDestroy。不过，我想从 SyncAdapter 服务中分离出其他线程，我想知道是否有可能让 SyncAdapter 服务保持活动状态，直到这些线程完成——例如，将这些异步工作线程的回调注册回 SyncAdapter 服务.

是否可以在 onPerformSync 之后不终止服务的情况下做到这一点？或者您是否必须将所有同步方法放入 SyncAdapter onPerformSync 方法中的同一个线程中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T16:45:34.787

我很确定答案是否定的……但即使有可能，你为什么还要这样做呢？它`SyncAdapter`已经在后台线程上工作了......那么为什么你必须在服务中触发单独的工作线程`SyncAdapter`来执行同步？

我想如果你尝试注册回调和/或弄乱`SyncAdapter`' 的生命周期来实现这一点，事情会开始变得混乱。Android 的同步服务负责为任意数量的应用程序（即 GMail、Google Drive 等）安排/执行同步操作，所以当`onPerformSync`完成时，这是一种告诉 Android 工作已经完成并且应该专注于它必须同步的下一个应用程序。

# php - php utf8_decode 无法识别 $_GET 的平方根

> ID：12769840
> 
> 赞同：1
> 
> 时间：2012-10-07T14:54:02.260
> 
> 标签：php, mysql, utf-8, utf8-decode

当我发送这个完美的方形字符时：

```
25² 
```

并使用我得到的 utf8_decode 在另一个页面中检索它（如预期的那样）：

```
25² 
```

现在我想用平方根做同样的事情。当我发送这个平方根时：

```
√225 
```

并使用 utf8_decode 检索（_$GET）它，就像我得到之前一样：

```
?255 
```

注意：我更喜欢在检索值时解决这个问题的方法（如 â^š225），而不是强制我更改它的初始表示的方法。

编辑：我以为我在使用 mysql 但我不是。抱歉误导。这是我用来检索值的脚本：

```
if (isset($_GET['json'])){  
  $json = urldecode($_GET['json']);
  $roots = json_decode($json, true);
  $arrList = utf8_decode(implode(",,,", $roots['nameList']));
  print_r($arrList)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:29:24.573

该`utf8_decode`函数将字符串从 UTF-8 转换为 latin1。平方根符号在 latin1 中不可用，因此`utf8_decode`用问号代替它。² 不会发生这种情况，因为它确实存在于 latin1 的 0xB2 位置。[（您可以在 Wikipedia](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)的 latin1 页面中查看哪些字符可用）

一个可能的解决方案是删除对的调用`utf8_decode`并将文本保留为 UTF-8，但是您必须确保其余代码可以处理 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:31:15.823

ISO-8859-1 中不包含平方根字符。所以它**不能**转换，这会导致一个问号。如果你想使用这样的特殊字符，最好坚持使用 UTF-8

# networking - 传输到另一个子网上的主机

> ID：12769846
> 
> 赞同：0
> 
> 时间：2012-10-07T14:54:45.040
> 
> 标签：networking, ip

我有两个小问题：

1.  当一个数据包需要传输到另一个子网上的主机时，IP 头的目标字段将使用什么 IP 地址？
2.  当一个数据包需要传送到另一个子网上的主机时，MAC 头的destiantion 字段中将使用什么IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T21:39:15.130

关键点是：

对于普通路由，dest ip src ip 保持不变，而 dest mac "或" src mac 改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:08:47.473

您必须发送到另一个子网的网关，而后者又需要配置正确的路由，以便将其发送到子网主机。如您所说，假设它们位于不同的网络上，则没有直接的 MAC 地址关联，因此您必须将其发送到网关，并且两个标头都将引用网关的地址。

[这可能很有趣。](https://stackoverflow.com/questions/1601570/how-to-send-packets-between-two-ip-hosts-on-different-subnets)

# c++ - 我的快速排序代码溢出堆栈

> ID：12769848
> 
> 赞同：0
> 
> 时间：2012-10-07T14:54:49.160
> 
> 标签：c++, sorting, stack-overflow, quicksort

该代码适用于 small `num_items`，但会溢出堆栈`num_items = 1000`。

我认为 1000 是一个很小的数字，因此应该有一种方法可以使这项工作达到更大的数字。我该怎么做才能让它在更多的递归调用中存活下来？

```
#include <iostream>
#include <algorithm>
#include <vector>
#include <cstdlib>
#include <ctime>

void printv(std::vector<int>& v) {
    for (int i=0; i<v.size(); i++) std::cout << v[i] << " ";
    std::cout << std::endl;
}

void quicksort(std::vector<int>& v, int begin, int end) {

    if (((end - begin) <= 1) ||
        (begin < 0) ||
        (end > (v.size() - 1))) return;

    int pivot = v[std::rand() % v.size()];

    int x = 0;
    int y = v.size() -1;

    while(x < y) {
        int changed = 0;
        if(v[x] <= pivot) {
            x++;
            changed = 1;
        }
        if (v[y] > pivot) {
            y--;
            changed = 1;
        }
        if (!changed){
            std::swap(v[x], v[y]);
            x++;
            y--;
        }
    }

    if (x == y) y++;
    if (x > y) std::swap(x, y);

    quicksort(v, begin, x);
    quicksort(v, y, end);
}

int ran() {
    return std::rand() % 100;
}

int main() {
    std::srand(std::time(0));
    int num_items = 1000;
    std::vector<int> v (num_items);
    std::generate_n(v.begin(), num_items, ran);

    printv(v);
    quicksort(v, 0, v.size()-1);
    printv(v);
} 
```

也欢迎对代码进行一般评论。

* * *

卡在`[0,4]`：

```
#1  0x0000000000400b4c in quicksort (
    v=std::vector of length 1000, capacity 1000 = {...}, begin=0, end=4)
    at quicksort.cpp:14
#2  0x0000000000400cc1 in quicksort (
    v=std::vector of length 1000, capacity 1000 = {...}, begin=0, end=4)
    at quicksort.cpp:43
#3  0x0000000000400cc1 in quicksort (
    v=std::vector of length 1000, capacity 1000 = {...}, begin=0, end=4)
    at quicksort.cpp:43
#4  0x0000000000400cc1 in quicksort (
    v=std::vector of length 1000, capacity 1000 = {...}, begin=0, end=4)
    at quicksort.cpp:43
#5  0x0000000000400cc1 in quicksort (
    v=std::vector of length 1000, capacity 1000 = {...}, begin=0, end=4)
    at quicksort.cpp:43
#6  0x0000000000400cc1 in quicksort (
    v=std::vector of length 1000, capacity 1000 = {...}, begin=0, end=4)
    at quicksort.cpp:43
#7  0x0000000000400cc1 in quicksort (
    v=std::vector of length 1000, capacity 1000 = {...}, begin=0, end=4)
    at quicksort.cpp:43 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:05:24.760

```
int pivot = v[std::rand() % v.size()];

int x = 0;
int y = v.size() -1; 
```

您显式传递`begin`和`end`定位，但您从完整列表中选择枢轴元素。这听起来不对。`begin`您应该在和之间选择一个枢轴元素`end`。此外，`x`应该从 开始`begin`，并且`y`应该从 开始`end`。否则，您总是在每个递归步骤中处理完整的列表，这将解释您正在经历的无限递归。

# android - 清单中声明的 Broadcastreceiver 没有输出到 Log.d

> ID：12769849
> 
> 赞同：2
> 
> 时间：2012-10-07T14:54:57.837
> 
> 标签：android, broadcastreceiver

我已经在清单上声明了 MyBroadcastReceiver。我的班级正在扩展广播接收器。当我尝试从中获得反应时，System.out.println 和 Log.d 都没有打印 - 从系统获取信息的唯一方法是通过 Toast。有可能让它工作，或者这就是它的方式。

API 最小值和最大值 = 16。我使用的是 Android 版本（而不是 Google）我使用的是模拟器 Android API 16。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T16:28:02.667

尝试在你`android:debuggable="true"`的`<application>`标签中设置`AndroidManifest.xml`。

# java - jtree 节点 isCollapsed/isExpanded 不起作用

> ID：12769850
> 
> 赞同：1
> 
> 时间：2012-10-07T14:55:08.517
> 
> 标签：java, swing, jtree, treenode

我有这段代码

```
if (tree.isCollapsed(new TreePath(selectedNode.getPath()))){
      tree.expandPath(new TreePath(selectedNode.getPath()));
}else{              
      tree.collapsePath(new TreePath(selectedNode.getPath()));
} 
```

问题是，如果我双击 jtree 中的节点，isCollapsed 返回错误的值。发生这种情况时，当我双击节点时，它会展开，然后我再次双击同一节点，isCollapsed 再次返回 true。仅当我直接单击节点标题（即某些字母）时才会发生这种情况。当我单击该行但在标题旁边时，一切都很好......有什么问题？

# asp.net-mvc - CKEditor 不显示

> ID：12769853
> 
> 赞同：1
> 
> 时间：2012-10-07T14:55:22.103
> 
> 标签：asp.net-mvc, vb.net, ckeditor

我正在尝试将 CKEditor 集成到 MVC 应用程序中。据我所知，我真正要做的就是。

将以下内容添加到我的母版页。

```
<script type="text/javascript" src="../../ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="../../ckeditor/adapters/jquery.js"></script>
<script type="text/jscript" src="../../Scripts/jquery-1.3.2.js"></script> 
```

然后在我看来。我有以下代码：

```
<script type="text/javascript">        
    $(document).ready(function() { $('#news').ckeditor(); });
</script>

<fieldset>
    <legend>Fields</legend>
        <p>
            <label for="title">Title:</label>
            <%=Html.TextBox("title")%>
            <%= Html.ValidationMessage("title", "*") %>
        </p>
        <p>
            <label for="news">News:</label>
            <%=Html.TextArea("news")%>
            <%= Html.ValidationMessage("news", "*") %>
        </p>
        <p>
            <label for="publishedDate">Publication Date:</label>
            <%= Html.TextBox("publishedDate") %>
            <%= Html.ValidationMessage("publishedDate", "*") %>
        </p>
        <p>
            <input type="submit" value="Create" />
        </p>
</fieldset> 
```

请记住，我并不是想让它真正做任何明智的回发。只是为了首先实际渲染。有人能准确指出我做错了什么吗？

哦，如果它有助于任何 VS 也会给我以下警告：

> 警告 1 更新 JScript IntelliSense 时出错：..剪切以保护无辜..\ckeditor\ckeditor.js：'getFirst()' 为空或不是对象@ 15:180 ..剪切以保护无辜..\Views\ Shared\Admin.Master 1 1 ilaTraining

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:13:56.667

使用该行`$('.test').ckeditor();`，您尝试将 ckeditor 应用于具有 css 类的元素`.test`。但在您看来，没有一个输入有这个类。

假设你想把你`TextArea`变成一个ckeditor，所以你需要添加[这个重载](http://msdn.microsoft.com/en-us/library/dd493070%28v=vs.108%29.aspx)的类：

```
<%= Html.TextArea("news", new { @class = ".test" }) %> 
```

或者您也可以通过 id "news" 引用您的 TextArea（因为这是您使用 expression 为输入提供的 id `Html.TextArea("news")`）。所以下面的代码也应该工作：

```
$('#news').ckeditor(); 
```

因为您正在尝试使用 ckeditor 的 jQuery 适配器，所以**您必须确保在加载 jQuery 之后加载 ckeditor**。所以脚本包含的正确顺序应该如下：

```
<script type="text/javascript" src="<%= Url.Content("~/Scripts/jquery-1.3.2.js %>"></script>
<script type="text/javascript" src="<%= Url.Content("~/ckeditor/ckeditor.js %>"></script>
<script type="text/javascript" src="<%= Url.Content("~/ckeditor/adapters/jquery.js %>"></script> 
```

附带说明：`Url.Content`在使用 ASP.NET MVC 时包含脚本或 css 时应使用帮助程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:29:02.967

如果您通过 id 引用元素，则应使用`#`，例如`$('#news').ckeditor();`

查看[ID Selector](http://api.jquery.com/id-selector/)和[Class Selector](http://api.jquery.com/class-selector/)在 jQuery API 中的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T04:38:26.117

有几件事要看：

尝试不使用 jQuery 适配器来查看编辑器是否加载。

消除：

```
<script type="text/javascript" src="../../ckeditor/adapters/jquery.js"></script> 
```

代替：

```
<script type="text/javascript">        
    $(document).ready(function() { $('#news').ckeditor(); });
</script> 
```

和：

```
<script type="text/javascript">        
    $(document).ready(function() { CKEDITOR.replace( 'news' ); });
</script> 
```

* * *

有几个版本的 jQuery 适配器有错误，也许尝试不同的 CKEditor 版本？

* * *

您可以尝试使用更新版本的 jQuery。您使用的版本 ( jquery-1.3.2 ) 于 2009 年 2 月发布。它已有 3 1/2 年历史。

* * *

所有浏览器都会出现这个问题吗？

# javascript - 当 $.proxy 或 myFunc.bind 不能用于更正对“this”关键字的引用时

> ID：12769856
> 
> 赞同：-1
> 
> 时间：2012-10-07T14:55:49.730
> 
> 标签：javascript, oop, scope, this

我以为我已经了解了 javascript 中的上下文和范围。我不明白为什么在一种情况下代理/绑定有效，而在另一种情况下却没有。请问有人可以解释吗？

示例 1：代理（或绑定）工作：

```
function Cat(name){
    this.name = name;

    $("#cat").click(
        $.proxy(
            function(e){ this.meow(e); }
        , this)
    );

    this.meow = function(){ alert(this.name + "says meow"); }
}
var cat = new Cat(); 
```

示例 2：代理和绑定不起作用：

```
function Dog(breed){
    this.breed = breed;

    this.save = function(){
        var that = this;
        $.ajax({
            url: '/ajax/savedog.php', dataType: 'json',

            // This works?? Shouldn't scope be of .ajax()?
            data: this.breed, 

            // success: $.proxy(... // won't work? why?
            success: that.dogSaved, error: ajaxFail
        });
    };

    this.dogSaved = function(){ alert("Dog Saved"); }
}
var dog = new Dog(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T14:57:14.763

您正在复制`this`到“点击”处理程序`that` *内部。*在外面做。

的值`this`会在每次函数调用时重新设置。因此，在您的“点击”处理程序中，`this`它不是一条狗，而是一个 DOM 元素。

注意 JavaScript 中的计算顺序也很重要。*函数的参数在调用*环境的上下文中被完全评估。在您的第一个示例中，`this`传入的值`$.proxy()`是正确的，因为它是构造函数上下文中的参数`Cat`，因此它正确地是一只猫。`$.ajax`但是，在构造函数中的调用中`Dog`，对的引用`this.breed`将不具有正确的值，因为它是在“单击”处理程序的上下文而*不是*构造函数的上下文中评估的。“数据”属性的值应该是`that.breed`在您`that`如上所述修复了初始化之后。

（另请注意，正如@Musa 指出的那样，`Dog`构造函数在语法上不正确；我认为这只是一个转录错误。）

*编辑*-我不确定您`$.proxy()`在更新的问题中尝试了什么，但是如果您像这样设置它，那么“成功”属性应该可以工作：

```
 success: $.proxy(that.dogSaved, that), 
```

第一个参数`$.proxy()`是要调用的函数，第二个参数是调用函数时想要的值`this`。在这种情况下，您希望它是对 dog 对象的保存引用。但是请注意，它只有在调用“保存”函数并`this`设置为狗时才有效。也就是说，如果你在某个地方这样做：

```
 var fido = new Dog();
   fido.save(); 
```

那么事情应该会奏效。但是，如果您以某种方式使用该“保存”功能而`this`不是对狗的引用，那么它将不起作用。同样，如果在“Dog”构造函数中，您要将“that”的声明移出构造函数范围而不是“save”，那么如何调用“save”就无关紧要了，因为“that”*总是*对 dog 对象的引用。

# html - 根据内容自动更改 iframe 的高度

> ID：12769861
> 
> 赞同：0
> 
> 时间：2012-10-07T14:56:03.430
> 
> 标签：html, css, iframe, height

我嵌入了一个带有 的论坛页面，论坛`iframe`的主页在高度方面有一定数量的像素，更准确地说是 1500px，但是当我按下一个高度大于 1500px 的主题时，`iframe`会添加一个滚动条。有什么办法可以动态实现吗？适应我按的每一个新主题？

这是代码：

```
<div align="center">
    <iframe height="1500" width="1300" frameborder="0" src="http://thc-racing.forumotion.co.uk/">
        your browser does not support IFRAMEs
    </iframe>
</div> 
```

我在谷歌上搜索，但我没有找到任何可以工作的代码。

这是链接：[http ://thc-racing.ucoz.com/index/forum/0-14](http://thc-racing.ucoz.com/index/forum/0-14)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:28:17.267

Pavlo 是对的，您不能仅使用 HTML 和 CSS 来完成此操作，因为论坛位于不同的域中。但是，您可以使用一些服务器端脚本（如 PHP）在您的域中获取论坛帖子。我不确定这是否适合您的项目，但我会为您描述一下，以防万一。您要做的是将 iFrame 源设置为服务器上的一个页面，例如 forum.php。然后，在该文件中，从所需的 URL 加载 HTML 并将其放入 DOM 对象中。这使您可以对已拉出的页面执行各种整洁的操作，例如确定事物的高度。我有一个非常相似的 Github。它从 Google 日历中获取源代码，以便您可以动态设置它的样式。在此处查看代码：

[https://github.com/jmeas/PHP-Styled-Google-Calendar](https://github.com/jmeas/PHP-Styled-Google-Calendar)

如果您想要选择 PHP，请告诉我，我可以为您提供更详细的回复。

# xna - XNA 如何创建骨骼

> ID：12769862
> 
> 赞同：1
> 
> 时间：2012-10-07T14:56:02.960
> 
> 标签：xna

我从二进制文件加载了自定义模型，但现在我不知道如何使用我的骨骼数据。有没有办法将它用于 ModelBone 或类似的东西？我有自定义骨 []：

```
class CustomBone 
{
    int parentIndex;
    Vector3 positionAbs;
    Quaternion rotationAbs;
    Vector3 positionRel;
    Quaternion rotationRel;
} 
```

或者如何填充 ModelBoneCollection？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:51:38.537

首先 - 您不能`Model`在运行时创建或修改 a （[详细信息](http://blogs.msdn.com/b/shawnhar/archive/2010/08/03/content-pipeline-optional.aspx)）。事实上，如果你需要，你应该[实现你自己的](http://blogs.msdn.com/b/shawnhar/archive/2007/09/19/note-to-self-model-hammer.aspx). `Model`只是让您入门的最低限度的功能。

但是，您*可以*`Model`通过内容管道在构建时创建一个。

或者，更具体地说，您可以创建一个自定义内容导入器来输出`NodeContent`. 反过来，这可以通过内容管道传递给`ModelProcessor`（或您自己的派生类），它将输出`ModelContent`. 您也无法进行有用的修改`ModelContent`。将`ModelContent`被序列化，然后`Model`在运行时作为 a 加载。

`NodeContent`to 输出是代表您的模型的树结构。它实际上由`MeshContent`和`BoneContent`节点组成（这些是派生自 的类`NodeContent`）。

老实说，该树的确切结构很难追踪（文档非常缺乏）。[这](https://gamedev.stackexchange.com/q/26647/288)是一个应该让您走上正轨的问题和答案。`FbxImporter`您还可以通过使用带有已知模型的内置函数并使用[XNA Content Pipeline Debugger](http://blogs.msdn.com/b/shawnhar/archive/2010/11/01/xna-content-pipeline-debugging-4-0.aspx)（在实现您自己的导入程序时通常会派上用场的工具）检查其输出来获得好运。

* * *

骨骼数据存储为`Matrix`in `BoneContent.Transform`。要创建此矩阵，我相信您需要执行以下操作：

```
boneContent.Transform = Matrix.Transform(
        Matrix.CreateTranslation(customBone.positionRel),
        customBone.rotationRel); 
```

如果您想`Quaternion`在运行时将骨骼数据保留为 a，则必须实现自己的替代`Model`.

# slickgrid - SlickGrid 与 Zurb 基金会

> ID：12769863
> 
> 赞同：1
> 
> 时间：2012-10-07T14:56:05.710
> 
> 标签：slickgrid, zurb-foundation

有没有人使用 css“网格”框架成功实现 slickgrid.js（电子表格/数据表类型“网格”）？网格这个词的使用令人困惑，我知道......

我试图在 zurb 基础中使用它，并且 slickgrid.js 正确呈现所需的表 div 从宽度的角度来看超出了所有内容，这似乎是由 javascript 自动设置的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T23:43:05.523

我确实设法用基础制作了 slickgrid。你有什么问题？。我正在使用基础 3.2 和 slickgrid 2.1。只需对 CSS 进行两个修复：

```
#myGrid * {
  -moz-box-sizing: content-box;
  -webkit-box-sizing: content-box;
  box-sizing: content-box;
}
#myGrid [class*="column"]:last-child {
  float: none;
} 
```

在 Firefox 上测试它的行为不同，所以有必要添加

```
.slick-header-column {
   -webkit-box-sizing: content-box;
   -moz-box-sizing: content-box;
   box-sizing: content-box;
} 
```

因为在 slick.grid.js 的第 548 行，它从未附加到 DOM 的 div 中获取宽度。

# java - 在 Java 中将 2e+08 转换为整数

> ID：12769865
> 
> 赞同：2
> 
> 时间：2012-10-07T14:56:31.563
> 
> 标签：java, types, number-formatting

我想知道`2e+08`编程中的格式是什么意思？我有一些与项目预算有关的数据。如何在 Java 中将其转换为整数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-07T14:58:47.987

`2e+08`表示*2*乘以*10^8*。换句话说，*2*后跟*8*个零：

> 2e+08 = 200000000

要将其转换为`int`我们可以简单地转换：

```
int n = (int)2e+08 
```

* * *

以下所有内容在 Java 中都是等价的：`2e+08`, `2e08`, `2e8`, `2E+08`, `2E08`, `2E8`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:59:18.307

该数字使用[科学计数法](http://en.wikipedia.org/wiki/Scientific_notation)。表示取`e`幂，在这种情况下以 10 为底。所以这个数字是 2×10 ⁸。

因为计算器、计算机编程语言等通常不使用上标符号，`e`而是用来表示取幂。

为了在 Java 中将这个数字表示为整数文字，可以这样写：

```
200000000

```

正如@Saintali 有用地指出的那样，在 Java SE 7 及更高版本中，您可以在文字中使用下划线来提高清晰度：

```
200_000_000

```

如果您正在阅读的数据使用科学计数法，则它表示浮点值。您真的应该将其转换为整数数据吗？如果您确实需要从文件中读取它然后转换为 int，您应该读入浮点数据类型，然后转换为`int`.

# python - 在python中打印两个不同列表的相同索引

> ID：12769866
> 
> 赞同：2
> 
> 时间：2012-10-07T14:56:31.920
> 
> 标签：python, list, for-loop

我有一个巨大的字符串，并且我在该字符串中创建了一个名为“found”的所有匹配模式的列表。我还创建了一个名为“位置”的模式的所有位置列表。现在我想在一行中打印找到的模式及其相应的位置，用制表符分隔，但我被循环绊倒了。这是我最近的尝试：

```
for i in found:
    print i + '\t' + locations['i'] 
```

但我显然得到了一个错误。我可以让它打印位置或图案或一个然后另一个，但我不太确定如何将它们全部放在同一行。

编辑：发现变量=字符串列表（在整个字符串中找到的模式）和位置=使用re.finditer找到的所述模式的位置列表

无论如何， zip() 非常适合我的需求。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T14:59:57.153

尝试`zip()`：

```
for i,j in zip(found,locations):
    print "\t".join((i,str(j))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T14:59:28.557

为了通过其索引访问列表，您需要传递一个整数；`'i'`是一个字符，而不是您希望在 中找到的整数`i`。这样做：

```
for i in found:
    print i + '\t' + locations[i] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T15:04:45.690

也许`enumerate()`是您正在寻找的：

```
for i, pattern in enumerate(found):
    print pattern + '\t' + locations[i] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T15:19:38.747

您的代码假设只有一个匹配项。要查找并打印所有匹配项，使用该`re`模块非常有效。

```
import re

patterns = ['test', 'is', 'a', 'jest']
txt = 'This test is just a test, not a jest'

for p in patterns:
    pos =  [m.start() for m in re.finditer(p, txt)]
    if len(pos):
        print '\t'.join((p, str(pos))) 
```

这打印：

```
test    [5, 20]
is      [2, 10]
a       [18, 30]
jest    [32] 
```

# java - 在选择排序、插入排序、合并排序和快速排序中计算比较？

> ID：12769869
> 
> 赞同：0
> 
> 时间：2012-10-07T14:57:02.110
> 
> 标签：java, sorting, data-structures

我正在编写一个程序来计算每种排序方法中的操作。我在这里计算的是数组中两个值之间的比较。那么有人可以检查我是否正确放置了 count[]++ 吗？

> 排序方法：

```
public void selectionSort (int [] data) {
    int mindex,
           tmp;

    for (int x = 0; x <= data.length-2; x++) {
        mindex = x;

        for (int y = x+1; y <= data.length-1; y++) {
            if (data [y] < data[mindex]){
                mindex = y;                     
            }
            count[0]++;// counts the operations for selectionSort method.
        }//ends for (int y=x+1;...).

    tmp = data[x];
    data[x] = data[mindex];
    data[mindex] = tmp;

    }//ends for (int x = 0;...).     
 }//ends selectionSort method.

/*
 * insertionSort method that sorts the array by using the insertionsort algorithm and counts the operations. 
 */
public void insertionSort(int [] data){
    int x,
        y,
        tmp;

    for (x = 1; x < data.length; x++){
        tmp = data[x];           
        for (y = x; y > 0 && data[y-1] > tmp; y--,count[1]++){ // count[1] counts the operations for insertionSort method.  
            data[y] = data[y-1];               
        }//ends for (y=x;...). 

        data[y] = tmp;               
    }//ends for(x=1;...).

}//ends insertionSort method.

/*
 * mergeSort method that sorts the array by using the mergesort algorithm.
 */
public void mergeSort(int [] data, int first, int n){
    int n1;
    int n2;

    if (n>1) {
        n1 = n/2;
        n2 = n-n1;
        mergeSort(data,first,n1);
        mergeSort(data,first+n1,n2);
        merge(data,first,n1,n2);
    }         
}//ends mergeSort method.

/*
 * merge method that is called by mergeSort method to sort the array and counts the operations. 
 */
public void merge(int [] data, int first, int n1, int n2){
    int [] temp = new int[n1+n2];
    int copied = 0, copied1 = 0, copied2 = 0, i;

    while((copied1<n1) && (copied2<n2)){
        if(data[first+copied1] < data[first + n1 + copied2]){
            temp[copied++] = data[first + (copied1++)];
            count[2]++;//counts the operations for mergeSort method.
        } else {
            temp[copied++] = data[first + n1 + (copied2++)];
            count[2]++; // counts the operations for mergeSort method.
          }
    }// ends while.

    while (copied1<n1)
        temp[copied++] = data[first + (copied1++)];
    while(copied2<n2)
        temp[copied++] = data[first + n1 + (copied2++)];

    for (i=0;i<n1+n2;i++)
        data[first+i] = temp[i];
}//ends merge method.

/*
 * quickSort method that sorts the array by using the quicksort algorithm.
 */
public void quickSort(int data[], int left, int right)
{
      int index = partition(data, left, right);// Creates an integer variable (index) and calls partition method to find the index value.

      if (left < index - 1){
            quickSort(data, left, index - 1);    
      }
      if (index < right){
            quickSort(data, index, right);
      }
}//ends quickSort method.

/*
 * partition method that is called by quickSort to sort the array and counts the operations. 
 */
int partition(int data[], int left, int right){

  int i = left, j = right;
  int tmp;
  int pivot = data[(left + right) / 2];

  while (i <= j)
  {
        while (data[i] < pivot) {
              i++;
              count[3]++;// counts the operations for quickSort method.
        }// ends while loop.

        while (data[j] > pivot) {
              j--;
              count[3]++;// counts the operations for quickSort method.
        }// ends while loop.

        if (i <= j)
        {
              tmp = data[i];
              data[i] = data[j];
              data[j] = tmp;
              i++;
              j--;
        }// ends if.

  }// ends while loop.
  return i;// returns i value to the method.
}//ends partition method. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T15:14:32.830

由于您的问题未标记为作业，因此我假设您主要想了解在排序过程中进行了多少比较。为此，我会

*   不是重新发明排序，而是使用 Java 库中的高效排序
*   使用自己的 Comparator 来装饰现有的 compare() 或 compareTo() 来计算比较次数。

# javascript - 无法从外部 javascript 调用函数

> ID：12769871
> 
> 赞同：-3
> 
> 时间：2012-10-07T14:57:06.797
> 
> 标签：javascript, html

我想使用javascript来检查`radio button`是否被选中。如果`tidak setuju`单选按钮被选中或`setuju`单选按钮未被选中，我想要`alert`一个对话框。但不知何故，按钮上的`onclick`功能`submit`不起作用。

我暂时将我的页面上传到免费服务器。

[这](http://anonynewbie.site11.com/BorangStaf.html)是我的网站，[这](http://anonynewbie.site11.com/js/checkForm.js)是外部 javascript 文件。

我的代码有什么问题？

在我的 HTML 中，单选按钮和提交按钮的代码：

```
 <tr>

      <td width = "25%">

          <div align="right">

            <input type="radio" name="RadioGroup1" value="Setuju" id="RadioGroup1_0" />

      </div></td>

        <td width = "25%" class = "left">Setuju</td>

        <td width = "25%" class = "right"><div align="right">

          <input type="radio" name="RadioGroup1" value="Tidak Setuju" id="RadioGroup1_1" />

      </div></td>

        <td width = "25%" class = "left">Tidak Setuju</td>

    </tr>

</table>

<input id="Submit" name="Submit" type="submit" value="Submit" class="Button" onclick="return agree(); " /> 
```

这是javascript：

```
function agree(){

if(document.getElementById("RadioGroup1_1").checked || !document.getElementById("RadioGroup1_0").checked)
{
    alert("Anda mesti setuju syarat-syarat permohonan.");
    return false;
}
} 
```

更正：

我忘记在函数中有更多条件的地方设置`ID`我的另一个。因此，该功能无法正常运行。`textfield``agree()`

这是我的错误：

```
<input type="text" name="stafNumber" />    <-- missing ID declaration, but declared in javascript. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:13:51.460

在 checkform.js 的第 19 行，您的验证函数中有一个错误：

```
var address = document.getElementById("stafAddress").value; 
```

这会给出“未捕获的类型错误：无法读取 null 的属性‘值’”，因为您的页面上没有 ID 为“stafAddress”的此类元素。

您还需要在第 13 行修复另一个错误：

```
document.getElementById("error_stafName").style.display = 'none'; 
```

出于类似的原因给出类似的错误。

你试过 Chrome 的 Javascript 调试器吗？这对于找出问题非常有用。您可以在菜单 > 工具 > 开发人员工具 > 源中打开它。

# objective-c - 使用带有隐藏图像的 OBShapedButton 的不规则形状按钮

> ID：12769878
> 
> 赞同：1
> 
> 时间：2012-10-07T14:58:10.640
> 
> 标签：objective-c, ios, xcode, uibutton, transparency

我正在尝试使用 OBShapedButton 类制作一个不规则形状的按钮。没关系，创建它没有任何问题，但是我需要图像是透明的。所以，我只想要图像中可以点击的区域，但看不到图像。我尝试在图像、图像视图和按钮本身上设置 alphas，但它都不起作用。

我该怎么做？

也许它可以通过其他东西来完成，而不是 UIButton，但不幸的是我没有在网上找到任何我可以理解和使用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:31:04.503

好的，所以最简单的方法是：

1.  子类 UIButton 并添加 touchesBegan、touchesEnded、touchesMoved、touchesCancelled。
2.  然后在 touchesBegan 上，隐藏按钮的图像并在背景中显示正确的图像。
3.  最后在 touchesEnded 或 touchesMoved 上，再次显示按钮的图像。

希望它会帮助某人:)

# javascript - ReferenceError：找不到变量：使用 CoffeScript 的 goToByScroll

> ID：12769880
> 
> 赞同：2
> 
> 时间：2012-10-07T14:58:15.443
> 
> 标签：javascript, coffeescript

这个 javascript 代码工作正常。

```
 function goToByScroll(id){
     $('html,body').animate({scrollTop: $("#"+id).offset().top - 50},'slow');
  } 
```

我很难使用它的 CoffeScript 版本。我在`application.js.coffee`.

```
 goToByScroll = (id) ->
    $("html,body").animate ->
      scrollTop: $("#" + id).offset().top - 50
    , "slow" 
```

但我得到了错误

```
ReferenceError: Can't find variable: goToByScroll 
```

知道可能导致错误的原因是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T15:03:08.917

如果该函数位于不同的文件中，则它位于闭包内且不可访问。将该函数附加到窗口对象或在同一文件中声明它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T21:27:50.940

**Jordan**说的是正确的：您需要以某种方式将您的函数导出到全局可访问的范围，或者使用`bare` 标志编译您的 CoffeeScript，防止输出被包装在匿名函数中。

此外，您的 CoffeeScript 中存在一些错误：您将回调传递给`jQuery.animate`，而不是像在 JavaScript 代码中那样的对象字面量。对于等效行为，您可能想要这样的东西：

```
goToByScroll = (id) ->
    $("html,body").animate
        # CoffeeScript supports string interpolation, that's what the #{}
        # syntax does
        scrollTip: $("##{id}").offset().top - 50
    , "slow"

# Then, export it by attaching it to the window or some object accessible
# outside this scope
window.goToByScroll = goToByScroll 
```

# flash - ActionScript 2：无法将视频帧抓取到位图

> ID：12769881
> 
> 赞同：2
> 
> 时间：2012-10-07T14:58:23.260
> 
> 标签：flash, bitmap, actionscript-2

我正在尝试从 RTMP 视频中获取视频帧。视频播放得很好，我可以在我的视频表面上看到它，但我无法将它抓取到位图并且位图是黑色的.. :( 我需要使用**ActionScript 2**来完成。

有任何想法吗？

这是我的代码：

```
import flash.media.Video;
import flash.net.*;
import flash.display.*;
import flash.geom.Rectangle;
import flash.geom.Point;
import flash.display.*;

var i = 0;
var kVIDEOW = 720;
var kVIDEOH = 576;
var vidBmpHolder:BitmapData;
var vidBmpDisplay:BitmapData;
var vidBmp = createEmptyMovieClip("bmp", 0);
var vidBmpRect:Rectangle;
var vidBmpPoint:Point;

var connection_nc:NetConnection = new NetConnection();
connection_nc.connect("rtmp://tvserver.chaneladd.tv:1935/live");
var stream:NetStream = new NetStream(connection_nc);

vidBmpHolder = new BitmapData(kVIDEOW, kVIDEOH, false, 0x000000);
vidBmpDisplay = new BitmapData(kVIDEOW, kVIDEOH, false, 0x000000);
vidBmpRect = new Rectangle(0, 0, kVIDEOW, kVIDEOH);
vidBmpPoint = new Point(0, 0);
// Create the Bitmap display object
vidBmp.attachBitmap(vidBmpDisplay,0);
vidBmp.x = 0;
vidBmp.y = 0;

if (stream) 
{
    video.my_video.attachVideo(stream);
    stream.play("437.stream");

    onEnterFrame = function ()
    {
        video.my_video.attachVideo(null);
        vidBmpHolder.draw(video);
        video.my_video.attachVideo(stream);
        vidBmp.attachBitmap(vidBmpHolder,0);
        addChild(vidBmp);
    };
}
else
{
    trace("not connected");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:44:23.080

检查此链接：[如何在 Flex Builder 3 中捕获流式视频显示并将其保存到磁盘？](https://stackoverflow.com/questions/6017259/how-to-capture-a-streaming-video-display-and-save-it-to-disk-in-flex-builder-3)

简而言之，它不能完成，因为它违反了安全限制。解释它的文档位于第 49 页：http: [//wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/flashplayer/pdfs/flash_player_10_security.pdf](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/flashplayer/pdfs/flash_player_10_security.pdf)

# php - 为正在检查的每个复选框列表数据更新 div 中的内容

> ID：12769884
> 
> 赞同：0
> 
> 时间：2012-10-07T14:58:43.433
> 
> 标签：php, yii

我认为有两个部门：左派和右派。左侧部分显示一个复选框列表（只是从另一个视图部分呈现并通过 AJAX 表单提交进行更新）。我希望对于复选框的每一次单击，被选中的数据都会自动显示在右侧部分（如果可能，再次消失，当我单击右侧部分中的数据时，复选框将重新取消选中）。

需要提示。. .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:52:18.483

将函数绑定到复选框的 onclick 事件并在该函数上执行您想要的操作

```
$('input[type=checkbox]').click(function(){
  $('#right_div').append(something);
}) 
```

如果在 ajax 请求期间出现复选框，您可以将函数绑定到

```
$('input[type=checkbox]').live('click',function(){
  $('#right_div').append(something);
}) 
```

你可以用另一种方式做类似的事情，当你在右边的div上附加文本时，在那个引用复选框的标签上放一些东西，然后你将一个函数绑定到你刚刚插入的那个标签的点击事件

# php - jQuery Ajax 调用和 PHP $_POST['data']

> ID：12769890
> 
> 赞同：1
> 
> 时间：2012-10-07T14:59:18.187
> 
> 标签：php, jquery, ajax

我想通过使用 jquery ajax 函数向我的 PHP 文件发送一些数据。

我创建了这样的功能：

```
function ajax_call (url, select, select_name)
{

    $(select).change(function () {
          $(".result").fadeIn(400).html('<img src="ajax-loader.gif"/>');            
          var select_value = $(this).val();

            $.ajax({        
              type: 'POST', 
              url: url, 
              data: { select_name : select_value }, 
                  success: function(data){  
                      $(".result").html(data); 
                  } 
              });
    });
} 
```

我称之为：

```
ajax_call ('url path to my PHP file', '#my_select_div', 'my_data_name'); 
```

我对这部分有疑问：

```
data: { select_name : select_value } 
```

我想得到：

```
$_POST['my_data_name'] 
```

但我得到：

```
$_POST['select_name'] 
```

有任何想法吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:02:06.963

使用对象文字语法时，键可以是字符串或标识符。标识符表示键名，而不是变量。如果要使用变量键名，则必须在创建对象后分配键/值。

```
var data = {};
data[select_name] = select_value;
            $.ajax({        
              type: 'POST', 
              url: url, 
              data: data 
```

# ruby-on-rails - RoR 系统找不到指定的路径

> ID：12769892
> 
> 赞同：2
> 
> 时间：2012-10-07T14:59:25.850
> 
> 标签：ruby-on-rails

我正在尝试通过“带有 RoR 的命令提示符”创建新目录，这就是我得到的：

```
$ cd ~/rails_projects
The system cannot find the path specified. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:01:38.703

您需要先通过`rails new`命令创建 rails 项目。

```
$ cd ~
$ rails new rails_projects
$ cd rails_projects 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:03:04.910

将第一个命令分成两个单独的命令

```
$ cd ~
$ rails new rails_projects 
```

＆ 然后

```
$ cd rails_projects 
```

# python - 如何使用 Python（编码参数）从字符串中删除重音符号？

> ID：12769900
> 
> 赞同：0
> 
> 时间：2012-10-07T15:00:37.713
> 
> 标签：python

我正在尝试从 csv 文件中的数据中删除重音符号。所以我使用 remove_accents 函数（见下文），但为此我需要在 utf-8 中编码我的 csv 文件。但是我遇到了错误`'encoding' is an invalid keyword argument for this function`
，我可能必须使用 Python3 然后执行 python3 ./myscript.py？这是正确的方法吗？或者有没有另一种方法来删除重音而不必安装 python3 ？任何帮助将非常感激

```
 #!/usr/bin/env python

import re
import string
import csv
import unicodedata

def remove_accents(data):
    return ''.join(x for x in unicodedata.normalize('NFKD', data) if \
    unicodedata.category(x)[0] == 'L').lower()

reader=csv.reader(open('infile.csv', 'r', encoding='utf-8'), delimiter='\t')
writer=csv.writer(open('outfile.csv', 'w', encoding='utf-8'), delimiter=',')

for line in reader:
    if line[0] != '':
        person=re.split(' ',line[0])

        first_name = person[0].strip().upper()
        first_name1=unicode(first_name)
        first_name2=remove_accents(first_name1)
        if len(person) == 2:
            last_name=person[1].strip().upper()
            line[0]=last_name
        line[15]=first_name2

    writer.writerow(line) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:03:05.213

[`codecs.open()`](http://docs.python.org/library/codecs.html#codecs.open)如果您希望能够指定编码，则需要使用。另外，[`unidecode`](http://pypi.python.org/pypi/Unidecode/).

# ios - iOS 无法更改 UIButton 的框架

> ID：12769906
> 
> 赞同：13
> 
> 时间：2012-10-07T15:01:46.620
> 
> 标签：ios, uibutton, storyboard

我目前遇到一个非常奇怪的问题。我正在使用 iOS 6 和 Xcode 4.5。我有一个带有 a`UIViewController`和 a的故事板`UIButton`。我为我的 .h 文件做了一个薄弱的`UIButton`出口。

在 .m 文件中，我想更改按钮的框架，但没有任何反应。然而，我有一个与 ' 相同的`UIImageView`创建和连接方式，但我可以毫无问题`UIButton`地更改' 框架。`UIImageView`

当我这样做时：

```
NSLog(@"%@", button) 
```

我得到这个输出：

```
<UIButton: 0xa185a40; frame = (191 330; 73 44); opaque = NO; autoresize = TM+BM; layer = <CALayer: 0xa185640>> 
```

这些是我的代码的相关部分：

```
-(void)viewDidLayoutSubviews{
    [self addStampGrid];
}

-(void)addStampGrid {

    // ...

    [_button setFrame:CGRectMake(10,10,10,10)];
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-07T10:58:01.083

使用 XCode 4.5 和 iOS 6 作为部署目标时，我遇到了同样奇怪的问题。我没有使用故事板。我设法通过禁用界面生成器中的“使用自动布局”选项来解决它。（在文件检查器->界面构建器文档中。

希望这可以帮助

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-14T04:27:16.233

You can change frame of your UIButton by changing layer's frame of UIButton

```
 [self.button.layer setFrame:] 
```

import QuartzCore framework in your class header before using this. This will work with auto layout also.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-05T09:33:10.000

你可以用这个

```
[_button setTranslatesAutoresizingMaskIntoConstraints:YES]; 
```

在此之后，您可以设置按钮的框架。

它可能会在日志中给出一些关于约束的警告，因为此属性会覆盖您在自动布局中提供的约束。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-06T07:17:54.043

从超级视图中删除视图，并在设置框架后再次将此视图添加为子视图。希望这会正常工作...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-03T03:48:37.843

//从父视图中移除视图

```
UIView *view = yourButton.superview;
[yourButton removeFromSuperview]; 
```

//改变UIButton的框架

```
CGRect bounds = view.bounds;
yourButton.center = CGPointMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds)); 
```

//再次将此视图添加为子视图

```
[view addSubview:yourButton]; 
```

# c++ - Boost::Spirit::QI 解析器：解析元素的索引

> ID：12769907
> 
> 赞同：5
> 
> 时间：2012-10-07T15:01:48.833
> 
> 标签：c++, boost, boost-spirit

是否可以（使用 Boost::Spirit::QI）从逗号分隔的字符串中解析数字，以便获得每个解析后的数字的索引？

假设我有一个字符串`"23,123,65,1"`，并且我想将这些数字中的每一个插入到给定位置（0、1、2、3）的矩阵中。一种方法是将数字解析为 std::vector，然后将它们复制到矩阵行，但这并不是特别快。

目前我正在使用向量变体：

```
Matrix data(10, 4);
int row = 0;
int col = 0;
std::string str = "23,123,65,1";
std::vector<double> res;
if (qi::parse(str.begin(), str.end(), qi::double_ % ',', res))
{
  std::for_each(res.begin(), res.end(), [&col, &data, &row](double elem) {

      data(row, col) = elem;
      col++;
});
} 
```

如果解析器有一个采用 lambda 函数或类似功能的成功回调，那就太棒了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T19:25:58.873

有多种方法。

*   相反，我通常推荐的是使用经过深思熟虑的`repeat(n)`表达式，并直接暴露*容器属性*（如`vector<vector<double> >`）。

*   您*似乎*正在寻找的是带有状态的语义动作。（这是来自 lex/yacc 的常见做法）。

**我在下面的三个完整演示中处理这些方法**（1.、2\. 和 3.）

*   一种高级技术是使用*自定义点*来允许 Spirit 直接将您的`Matrix`类型视为容器属性并使用`spirit::traits`. 对于这种方法，我参考了这个答案：[pass attribute to child rule in boost spirit](https://stackoverflow.com/questions/12520649/pass-attribute-to-child-rule-in-boost-spirit/12527010#12527010)。

## 使用[*继承的属性*](http://www.boost.org/doc/libs/1_51_0/libs/spirit/doc/html/spirit/qi/reference/parser_concepts/nonterminal.html)

这是一个相对简单的方法：

1.  直接解析成`vector<vector<double> >`（**[完整代码在线直播](http://liveworkspace.org/code/b37f3239dea7ca469e84b77c51eee8dd)**）

    ```
    qi::rule<It, Matrix::value_type(size_t cols), qi::blank_type> row;
    qi::rule<It, Matrix(size_t rows,size_t cols), qi::blank_type> matrix;

    row    %= skip(char_(" \t,")) [ repeat(_r1) [ double_ ] ];
    matrix %= eps // [ std::cout << phx::val("debug: ") << _r1 << ", " << _r2 << "\n" ]
           >> repeat(_r1) [ row(_r2) >> (eol|eoi) ]; 
    ```

    用法：

    ```
    if (qi::phrase_parse(f,l,parser(10, 4),qi::blank, m))
        std::cout << "Wokay\n";
    else
        std::cerr << "Uhoh\n"; 
    ```

2.  同样，但调整`Matrix`结构（**[完整代码在这里](http://liveworkspace.org/code/5ae234c5644337de7afef2a492243636)**）

    ```
    struct Matrix
    {
        Matrix(size_t rows, size_t cols) : _cells(), _rows(rows), _cols(cols) { }

        double       & data(size_t col, size_t row)       { return _cells.at(row).at(col); } 
        const double & data(size_t col, size_t row) const { return _cells.at(row).at(col); } 

        size_t columns() const { return _cols; }
        size_t rows()    const { return _rows; }

        std::vector<std::vector<double> > _cells;
        size_t _rows, _cols;
    };

    BOOST_FUSION_ADAPT_STRUCT(Matrix, (std::vector<std::vector<double> >,_cells)) 
    ```

    用法

    ```
    Matrix m(10, 4);

    if (qi::phrase_parse(f,l,parser(m.rows(),m.columns()),qi::blank, m))
        std::cout << "Wokay\n";
    else
        std::cerr << "Uhoh\n"; 
    ```

### 使用语义动作/qi::locals

**3.**这是更多的工作，但可能更灵活。您将定义一个多态可调用类型以在给定单元格中插入一个值：

```
struct MatrixInsert
{
    template <typename, typename, typename, typename> struct result { typedef bool type; };
    template <typename Matrix, typename Row, typename Col, typename Value>
        bool operator()(Matrix &m, Row& r, Col& c, Value v) const
        {
            if (r < m.rows() && c < m.columns())
            {
                m.data(r, c++) = v;
                return true; // parse continues
            }
            return false;    // fail the parse
        }
};

BOOST_PHOENIX_ADAPT_CALLABLE(matrix_insert, MatrixInsert, 4) 
```

最后一行使它成为一个`phoenix`惰性函数，因此您可以在语义操作中使用它而无需奇怪的绑定语法：

```
qi::rule<It, Matrix(), qi::blank_type, qi::locals<size_t /*_a: row*/, size_t/*_b: col*/> > matrix;
matrix = eps    [ _a = 0 /*current row*/ ]
     >> (
            eps     [ _b = 0 /*current col*/ ] 
         >> double_ [ _pass = matrix_insert(_val, _a, _b, _1) ] % ','
        ) % (eol    [ ++_a /*next row*/])
     ; 
```

完整代码再次**[在 liveworkspace.org 上发布](http://liveworkspace.org/code/9b2817f5f6dcf0e0a8d0f024bd96cb9b)**

# ruby-on-rails - 在单元格中处理请求/访问数据库是一种好习惯吗？以及更多关于 MVC 和单元格和 OOP 的信息

> ID：12769912
> 
> 赞同：1
> 
> 时间：2012-10-07T15:02:31.183
> 
> 标签：ruby-on-rails, oop, model-view-controller, search, rails-cells

*我只是想知道这是否是在单元定义中发出模型请求的好方法......？*

从 OOP 的角度来看，我还需要从总体上定义在不同上下文中为搜索结果实现不同表示的更方便的方法。

**我需要这个做什么？**

我有项目的类别。我想将搜索结果实现为一个单元格。根据三种情况，搜索结果应该以稍微不同的方式表示：

*   搜索指定类别中的所有项目

例如，让类别为“动物”（此类别包含：数据库中的狗、猫和鸟项目）然后我应该在浏览器中看到：

> ```
>  Category Items
>     dog
>     cat
>     bird 
> ```

*   在所有类别中搜索与指定“模式”相似的项目

例如让模式为“做”：

> ```
> Similar Items
>    Animals
>       dog
>    Cars
>       dodge 
> ```

*   在指定“类别”中搜索与指定“模式”相似的项目

例如，让模式为“做”，类别为“动物”：

> ```
> Category Items
>     dog
> Similar Items
>     Cars
>        dodge 
> ```

我决定尝试使用细胞宝石来实现这些东西......

这就是我想通过单元格显示的内容：（app/cells/search_result/display.html.haml）

```
%h1
  = @category_items[:title]
%ul
  - for i in @category_items[:items]
    %li
      = link_to "#{i.code} #{i.summary}", category_item_path(i.category.name, i.code)

%h1
  = @similar_items_by_category[:title]
%ul
  - for cat in @similar_items_by_category[:items_by_category].keys
    %li
      = "#{cat.name}"
      %ul
        - for i in @similar_items_by_category[:items_by_category][cat]
          %li
            = link_to "#{i.code} #{i.summary}", category_item_path(i.category.name, i.code) 
```

这是我的单元格：（app/cells/search_result_cell.rb）

```
class SearchResultCell < Cell::Rails

  def display options
    setup! options

    render
  end

  def setup! options

    #some code here that defines
    # category_items_title, like "Category Items"
    # array_of_found_items
    # similar_item_title, like "Similar Items"
    # hash_of_found_items_by_category
    #this code will be different for each search case in correspondent overridden function

    @category_items = { title: category_items_title, items: array_of_found_items }
    @similar_items_by_category = { title: similar_item_title, items_by_category: hash_of_found_items_by_category }
  end

end 
```

我将为每个“搜索”案例创建单独的单元格类，从 SearchResultCell 派生它（也许我会将其重命名为 GenericSearchResultCell 之类的名称），然后覆盖设置！每种情况的功能...然后将使用构建器来定义要构建的类...

这是我的观点：（app/views/items/index.html.haml）

```
= render_cell :search_result, :display #, ... - and here some options... 
```

现在**问题**：

1.  我应该在“设置！”中提出真正的搜索请求吗？在细胞中起作用？然后让我的控制器 ItemsController 只是“解析”路由，并提供要传递给我的 SearchCell 的选项......

2.  或者我应该让我的 ItemsController 负责“解析”路由和发出搜索请求（自行定义 array_of_found_items 和 hash_of_found_items_by_category）？然后将所有这些东西作为选项传递给 SearchCell...

3.  所有这些“细胞实验”值得吗？有没有更方便的方法来实现我的“搜索”视图和控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:10:34.337

考虑单元格 gem 的一个好方法是它提供了一个控制器支持的部分。换句话说，您的视图可以调用一个控制器，然后该控制器将呈现一个部分。当部分显示在许多视图中并且包含您不想在每个控制器中重复的重要数据处理时，这非常好。

但是，这似乎不适合您的情况。您只提到了一个控制器 ItemsController，它将显示搜索结果，因此所有数据处理都可以在该控制器中完成。

您似乎也有两个视图，类别项目和类似项目。更好的方法可能是将它们定义为两个部分，然后在主视图中使用一些逻辑来确定显示哪个或两者。

总而言之，当您希望视图循环并进行另一个控制器调用以处理数据并显示部分时，单元格非常棒，但在您的情况下，这似乎不是您真正需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:30:15.780

您应该将查询逻辑与控制器和渲染完全分离。引入一个`ItemsFinder`执行所有搜索并返回结果集的类。

现在您有了合适的模型集可以讨论，您可以继续进行渲染。通常，当视图不太复杂（没有 if-else，没有太多嵌套的局部）时，“旧”Rails 局部方式就可以了。

但是，通常您只想覆盖子子子部分的一小部分，这就是单元格视图继承开始的地方。它还鼓励您为“部分”定义接口，因此请记住这一点。

我同意 Max 的观点，当您的视图中有可重复使用的“小部件”时，单元通常有助于保持控制器清洁。不要过度使用它，你;-)

# c++ - 椭圆面片之间的仿射变换

> ID：12769913
> 
> 赞同：2
> 
> 时间：2012-10-07T15:02:47.933
> 
> 标签：c++, opencv, affinetransform

我是 OpenCV 的新手，我正在学习做一些图像处理。作为我项目的一部分，我遇到了将椭圆形式的图像补丁变形为目标椭圆的问题。据我了解，我需要计算两个补丁之间的仿射变换，然后将此转换扭曲到目标补丁中。浏览互联网寻求帮助，我没有找到一种方法来计算两个椭圆补丁之间的仿射变换。我在正确的轨道上吗？如果您能给我一些如何进行或在哪里寻找更多信息的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:14:26.723

您的元素是椭圆的事实与变换的计算无关。变换同样适用于任意形状。假设你有关于某个原点 O 的仿射变换 [A] 和 [B]，你想要 [A] 和 [B] 之间的变换。有几种方法可以考虑这样做，最简单的一种是从 [A] 到 O 的转换，然后从 O 到 [B] 并将它们组合起来。[A] 到 O 只是 [A] 的倒数，而 O 到 [B] 只是 [B] 所以

```
final_transform = [B]*inverse([A]); 
```

[这](https://stackoverflow.com/questions/12283501/how-to-calculate-extrinsic-parameters-of-one-camera-relative-to-the-second-camer/12284566#12284566)是一个类似的问题，用向量表示求解同样有效。

要进行实际的变形，您可以使用[cv::warpAffine](http://opencv.willowgarage.com/documentation/cpp/geometric_image_transformations.html)

# android - 如何检测设备旋转以设置 EXIF 方向标签（Android）

> ID：12769914
> 
> 赞同：2
> 
> 时间：2012-10-07T15:02:53.663
> 
> 标签：android, camera, orientation, exif

在我的相机应用程序中，UI 方向固定为纵向。

通过设置 camera.setdisplayorientation(90) 可以在横向和纵向上正确显示预览。

我可以拍照并将其保存到文件中。当我通过 ImageView 显示它时，横向拍摄的图片可以正确显示。（我左边的手机顶部）

但是……纵向拍摄的那张就没有那么幸运了……好像向左转了90度。

我尝试通过传感器检测设备方向，以便我可以设置 EXIF 标头，但是......到目前为止......这对我来说太难了......有没有人可以帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T15:06:43.507

使用 getRotation 方法：

```
Display display = ((WindowManager)
context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
int rotation = display.getRotation(); 
```

从文档中：

```
Returns the rotation of the screen from its "natural" orientation. 
The returned value may be Surface.ROTATION_0 (no rotation), Surface.ROTATION_90, Surface.
ROTATION_180, or Surface.ROTATION_270\. 
For example, if a device has a naturally tall screen, and the user has turned it on its side to go into a landscape orientation, the value returned here may be either Surface.ROTATION_90 or Surface.ROTATION_270 depending on the direction it was turned. 
The angle is the rotation of the drawn graphics on the screen, which is the opposite direction of the physical rotation of the device.
For example, if the device is rotated 90 degrees counter-clockwise, to compensate rendering will be rotated by 90 degrees clockwise and thus the returned value here will be Surface.ROTATION_90. 
```

getRotation 是从 Android 2.2 引入的。如果您的目标是旧设备，请使用 getOrientation。

在这里得到答案： [如何检测android设备的方向？](https://stackoverflow.com/questions/5112118/how-to-detect-orientation-of-android-device)

如果您只想检测设备的方向，则可以使用 OrientationEventListener。

这是官方文档： http: [//developer.android.com/reference/android/view/OrientationEventListener.html#onOrientationChanged(int)](http://developer.android.com/reference/android/view/OrientationEventListener.html#onOrientationChanged(int))

但在你使用任何东西之前，请查看这篇关于 android 中方向处理的优秀博文： [http ://android-developers.blogspot.in/2010/09/one-screen-turn-deserves-another.html](http://android-developers.blogspot.in/2010/09/one-screen-turn-deserves-another.html)

# php - 换行中的Javascript意外令牌非法

> ID：12769915
> 
> 赞同：0
> 
> 时间：2012-10-07T15:02:57.080
> 
> 标签：php, javascript, line-breaks

我渲染一些数据`Twig`并做一些这样的想法：

```
var products = {
    {% for item in items %}
    {{ item.id }} : {
        'title': '{{ item.title }}',
        'info': '{{ item.info }}',
    }
} 
```

有一个错误，由`item.info`变量中的换行引起。

我尝试了一些技巧：替换`\n\r`为`<br />`等。

我该怎么办？

**UPD #1**

错误信息：`Uncaught SyntaxError: Unexpected token ILLEGAL`

**UPD #2**

替换`\n`并`\r`没有问题。问题是我需要变量**与 line-breaks 一起使用**，而不是在一行中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T06:47:35.377

尝试用反斜杠结束每一行，即 \ 例如

```
console.log("Line\
New") 
```

# php - php同时上传一堆文件

> ID：12769920
> 
> 赞同：1
> 
> 时间：2012-10-07T15:03:09.623
> 
> 标签：php, file-upload

> **可能重复：**
> [文件上传时多张图片上传数量错误](https://stackoverflow.com/questions/10170277/multi-image-upload-wrong-quantity-on-file-upload)

嘿，所以我有一个将一个文件上传到服务器的 php 脚本，如何更改代码以允许同时上传多个文件。在人们开始链接到其他问题之前，我知道如何搜索 stackoverflow 和谷歌，但是我通过搜索找到的答案我无法弄清楚如何应用于我的代码。我的代码如下：

```
<?php
session_start();
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));

if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
     echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {

echo "Upload: " . $_FILES["file"]["name"] . "<br />";
echo "Type: " . $_FILES["file"]["type"] . "<br />";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

if (file_exists($_SESSION['user']."/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"][$i],
  $_SESSION['user']."/" . $_FILES["file"]["name"]);
  echo "Stored in: " . $_SESSION['user']."/" . $_FILES["file"]["name"];

  }
}

else
  {
  echo "Invalid file";
  }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:18:32.313

[这](https://github.com/qolami/PHP-Multiple-file-uploader)是我几年前写的一个高级文件上传系统：

HTML：

```
<form action="upload.php" method="post" enctype="multipart/form-data" >
    <input type="file" name="myfile[]" /><br>
    <input type="file" name="myfile[]" /><br>
    <input type="file" name="myfile[]" /><br>
    <!-- MORE AND MORE -->
    <input type="submit" name="submit" value="Upload" />
</form> 
```

PHP：

```
<?php // upload.php
// Set timezone for probable usage.
date_default_timezone_set('Asia/Tehran');

// Assign valid types
$valid_mime = array(
    'image/jpeg',
    'image/pjpeg',
    'image/jpeg',            
    'image/png',
    'image/gif'
);

function upload($files, $dir, $size_limit=1024, $prevent_duplicate=false){
    global $valid_mime;

    // $files must be given.
    if(!isset($files)) return false;

    // Look for $valid_mime array.
    isset($valid_mime) and is_array($valid_mime) or die('Error in data resources, valid_mime array not found.');

    // Make directory if not exists. set permission to 0777.
    is_dir($dir) and chmod($dir, 0777) or mkdir($dir, 0777, true);

    $count = 1;
    foreach($files as $file){
        $file['error'] === UPLOAD_ERR_OK or die('Error in uploading file(s).');

        // Check uploaded-file type.
        in_array($file['type'], $valid_mime) or die();

        // Set size_limit in KB.
        $file['size'] > $size_limit*1024 and die('The uploaded file exceeds the maximum file size.');

        // Prevent duplicate filenames.
        $prefix = ($prevent_duplicate == true) ? time().'_' : '';
        $suffix = ($prevent_duplicate == true) ? '_'.$count++ : '';

        $file_extension = strrchr($file['name'], '.');
        $filename = basename($file['name'], $file_extension);

        $file_path = "{$dir}/{$prefix}{$filename}{$suffix}{$file_extension}";

        // Move uploaded-file from php temp folder to desire one.
        move_uploaded_file($file["tmp_name"], $file_path);

        // Make an array of filepaths
        $output[] = $file_path;
    }

    // Change permission of folder according to security issues.
    chmod($dir, 0755);

    return $output; 
}
/////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////  Controller Section  ////////////////////////////////

// Assign tmp_arr from $_FILES['myfile'] and do die if there is any problem.
$tmp_arr = (isset($_POST['submit']) and isset($_FILES['myfile'])) ? $_FILES['myfile'] : die('Error in posting data.');

// Create an array with desired structure.
for($i=0; $i<count($tmp_arr['name']); $i++){
    $files[] = array(
        'name'      =>  $tmp_arr['name'][$i],
        'type'      =>  $tmp_arr['type'][$i],
        'tmp_name'  =>  $tmp_arr['tmp_name'][$i],
        'error'     =>  $tmp_arr['error'][$i],
        'size'      =>  $tmp_arr['size'][$i],
    );
}

// size_limit in KB
$path_arr = upload($files, './public', 1024, true);

// SEE WHAT HAPPENS ;)
echo '<pre>';
var_export($path_arr);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:10:09.137

使用这样的东西

```
<input type="file" name="uploadfile[]" multiple="multiple"/> 
```

你的 php 代码应该是这样的

```
<?php

foreach ($_FILES['uploadfile']['name'] as $filename) 
            {
                $temp=$target;
                $tmp=$_FILES['file']['tmp_name'][$count];
                $count=$count + 1;
                $temp=$temp.basename($filename);
                move_uploaded_file($tmp,$temp);//add more security as required
                $temp='';
                $tmp='';
            }

?> 
```

# javascript - `x = y, z` JavaScript 中的逗号赋值

> ID：12769922
> 
> 赞同：22
> 
> 时间：2012-10-07T15:03:28.207
> 
> 标签：javascript, variable-assignment, assignment-operator, assign, iterable-unpacking

> **可能重复：**
> [Javascript 语法：逗号是什么意思？](https://stackoverflow.com/questions/3561043/javascript-syntax-what-comma-means)

[我在阅读本文](http://byfat.xxx/if-hemingway-wrote-javascript)时遇到了代码（执行`Ctrl`+`F`搜索`Andre Breton`）：

```
//function returning array of `umbrella` fibonacci numbers
function Colette(umbrella) {
  var staircase = 0, galleons = 0, brigantines = 1, armada = [galleons, brigantines], bassoon;
  Array.prototype.embrace = [].push;

  while(2 + staircase++ < umbrella) {
    bassoon = galleons + brigantines;
    armada.embrace(brigantines = (galleons = brigantines, bassoon));
  }

  return armada;
} 
```

构造是什么`x = (y = x, z)`意思？或者更具体地说，是什么`y = x, z`意思？我称它为逗号赋值，因为它看起来像赋值并且有一个逗号。

[在 Python](https://stackoverflow.com/questions/1708292/meaning-of-using-commas-and-underscores-with-python-assignment-operator)中，这意味着元组解包（或在这种情况下打包）。这里的情况是一样的吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-07T15:06:00.567

这是逗号运算符。

> 逗号运算符计算其两个操作数（从左到右）并返回第二个操作数的值。
> 
> 计算 a,b,c,...,n 时的结果值将始终是最右边表达式的值，但是链中的所有表达式仍会被计算（从左到右）。

* * *

因此，在您的情况下，仍将评估分配，但最终值为`bassoon`.

**结果：**

```
galleons = brigantines
brigantines = bassoon
armada.embrace(basson) 
```

* * *

更多信息：[Javascript“元组”表示法：它的意义何在？](https://stackoverflow.com/questions/9018295/javascript-tuple-notation-what-is-its-point)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-07T15:07:07.657

`var`语法允许多重赋值，因此当您看到以下内容时，您是在使用一个`var`语句声明多个变量。

```
var a, b, c; 
```

请注意，此语法不是*逗号**运算符*。

* * *

`,`可以用作[*逗号运算*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)符。它只是评估一系列表达式。因此，当您看到以下语法时，您会看到一系列表达式正在被计算，并且最后一个表达式的返回值被返回。

```
x = (y = x, z) 
```

在括号内，`x`分配给`y`，然后`z`从 评估并返回`()`并分配给`x`。

* * *

我建议这种语法不清楚并且没有什么好处。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-07T15:07:48.310

逗号操作数计算其所有操作数并返回最后一个。在这种情况下，如果我们使用

```
x = (y = x, z); 
```

或者

```
y = x;

x = z; 
```

它可以带走那行代码。

# javascript - TypeScript 文件中的 JavaScript Intellisense

> ID：12769924
> 
> 赞同：8
> 
> 时间：2012-10-07T15:03:43.290
> 
> 标签：javascript, intellisense, typescript

是否只能通过引用`.ts`具有自己编码接口的文件来在 TypeScript 文件中获得智能感知？

现有的 JavaScript 库有解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T18:04:21.453

您可以通过在脚本顶部使用外部脚本引用指令来获取其他 TypeScript 文件的 IntelliSense：

```
///<reference path="someOtherScript.ts" /> 
```

作为旁注，TypeScript IntelliSense 参考指令不像 JavaScript 参考指令那样支持波浪号运算符。例如，如果您的脚本位于“~/Scripts/foo/”中，则在 JavaScript 中您可以参考：

```
///<reference path="~/Scripts/otherScriptFile.js" /> 
```

而在 TypeScript 中，您必须相对于当前文件引用：

```
///<reference path="../otherScriptFile.ts" /> 
```

有关这方面的更多信息，请参阅[TypeScript Spec](http://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdf)的 11.1.1 Source Files Dependencies 部分。

关于 TypeScript 文件中的 JavaScript IntelliSense，目前似乎无法获取 JavaScript 引用 IntelliSense。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T22:58:44.200

正如我之前的其他人指出的那样，您需要定义文件。

[DefinitiveTyped GitHub 存储库为许多流行的库](https://github.com/borisyankov/DefinitelyTyped)提供了出色的（并且不断增长的）定义文件列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T16:00:03.993

您将获得对每个 JS 代码的智能支持（质量可能会有所不同），但是特定于 typescript 的内容仅在使用适当的定义文件 (*.d.ts) 时可用。

您可以在源代码库中找到额外的定义文件（> typings，目前只有 jQuery 和 WinJS/RT）[http://typescript.codeplex.com/SourceControl/BrowseLatest](http://typescript.codeplex.com/SourceControl/BrowseLatest)

# asp.net-mvc - Razor 编译器警告/错误 - ASP.NET MVC 4

> ID：12769926
> 
> 赞同：14
> 
> 时间：2012-10-07T15:03:55.813
> 
> 标签：asp.net-mvc, razor, compiler-errors, asp.net-mvc-4, compiler-warnings

我有一个问题似乎已在此处报告：

[需要剃刀视图引擎自动完成才能在类库中工作？](https://stackoverflow.com/questions/4158573/need-razor-view-engine-auto-complete-to-work-in-a-class-library)

我的问题是以下警告：

> G:\Accountable\Accountable\Views\LedgerUser\EditorTemplates\LedgerServiceViewModel.cshtml：ASP.NET 运行时错误：没有为扩展“.cshtml”注册构建提供程序。您可以在 machine.config 或 web.config 的部分中注册一个。确保它具有包含值“Web”或“All”的 BuildProviderAppliesToAttribute 属性。

这个问题在我所有的观点中都很明显。下面的示例图像。

![在此处输入图像描述](../Images/da1ca7f8c16bdabb79e71a803a9b80a5.png)

![在此处输入图像描述](../Images/119750b16754513d1421bfb727f9ca3d.png)

![在此处输入图像描述](../Images/3d12ae4fc9e4ab8562f042209a340c54.png)

现在，我发现的所有在线帖子和参考资料都引用了添加各种 Web.config（如上一篇文章中所述）选项，但这似乎不起作用，因为我在项目中默认了这些配置。这是我的网络配置：

[主 Web.config](http://pastebin.com/9uCEFsQS)

[查看根 Web 配置](http://pastebin.com/8yz4gJYv)

我认为这个问题可能在我还在视图上得到以下编译器错误时：

> 当前上下文中不存在名称“Html”

![在此处输入图像描述](../Images/c8ed922239869d2bcacef6012e6349e5.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-07T16:02:30.127

Arrrgghhh 我错过了 ROOT Web.config 中的以下内容：

```
 <compilation debug="true" targetFramework="4.0">
  <!-- New -->
  <assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
</compilation> 
```

这允许修复错误并允许我在视图中使用 Intellisense。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-30T17:34:22.620

在根 Web.config 中放回以下行已修复：

```
<system.web>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
</system.web> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-31T04:13:43.907

我通过简单地卸载和重新加载项目来让它工作。上面的所有命名空间都已经存在于根 web.config 中，我仍然遇到这个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-08T13:40:46.610

删除临时 asp.net 框架文件对我有用。

停止 IIS 并删除此文件夹下的所有内容：

> C:\Windows\Microsoft.NET\Framework64\[框架版本]\Temporary ASP.NET Files

然后重新启动 IIS。砰！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-30T04:15:51.393

我尝试重新启动 IIS，删除临时 ASP.NET 文件并更改 Web 配置文件中的编译标记。它们都不适合我。

我通过删除 System.Web.MVC 并将其添加到项目中解决了这个问题。

在我的情况下，Razor 语法以红色突出显示。

# php - 检索 ResponseCode、ResponseDescription、Amount 和 CardNumber

> ID：12769930
> 
> 赞同：0
> 
> 时间：2012-10-07T15:04:04.037
> 
> 标签：php, soap

我一直在尝试使用 simplexml 检索 ResponseCode、ResponseDescription、Amount 和 CardNumber，但它一直返回一个空字符串。

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body>
    <GetTransactionDataResponse xmlns="http://services.interswitchng.com/">
    <GetTransactionDataResult xmlns:a="http://schemas.datacontract.org/2004/07/WebPAY.Core.ServiceFramework.Contract" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <ResponseCode xmlns="http://schemas.datacontract.org/2004/07/TechQuest.Framework.ServiceFramework.Contract">61</ResponseCode><ResponseDescription xmlns="http://schemas.datacontract.org/2004/07/TechQuest.Framework.ServiceFramework.Contract">Exceeds Withdrawal Limit</ResponseDescription>
    <a:Amount>10000000</a:Amount>
    <a:CardNumber>3386</a:CardNumber>
    <a:LeadBankCbnCode i:nil="true"/><a:LeadBankName i:nil="true"/>
    <a:MerchantReference i:nil="true"/><a:PaymentReference i:nil="true"/>
    <a:RetrievalReferenceNumber i:nil="true"/><a:SplitAccounts/>
    <a:TransactionDate>0001-01-01T00:00:00</a:TransactionDate>
    </GetTransactionDataResult>
    </GetTransactionDataResponse>
    </s:Body>
    </s:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:25:34.373

如果您指的是肥皂响应，我会看看[Nusoap](http://sourceforge.net/projects/nusoap/)，它是一个用于 PHP 的 Web 服务库，可以处理与 xml 之间的所有转换，从而非常容易使用 Web 服务。

我自己用过很多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:08:04.737

如果您使用`Interswitch`支付系统，您应该会收到此信息。使用[SoapClient](http://php.net/manual/en/class.soapclient.php)代替，但如果您仍然需要解析它，那么：

```
$sxe = new SimpleXmlElement($xml);
$sxe->registerXPathNamespace('s', 'http://schemas.xmlsoap.org/soap/envelope/');
$sxe->registerXPathNamespace('a', 'http://schemas.datacontract.org/2004/07/WebPAY.Core.ServiceFramework.Contract');
$sxe->registerXPathNamespace('i', 'http://www.w3.org/2001/XMLSchema-instance');

$list = array();
$list['code'] = (string) $sxe->children("s", true)->Body->children()->GetTransactionDataResponse->GetTransactionDataResult->ResponseCode;
$list['desciption'] = (string)  $sxe->children("s", true)->Body->children()->GetTransactionDataResponse->GetTransactionDataResult->ResponseDescription;
$list['amount']  = (string)  $sxe->xpath('//a:Amount');
$list['amount'] = (string)  $list['amount'][0];
$list['card']  = $sxe->xpath('//a:CardNumber');
$list['card'] = (string) $list['card'][0];

echo "<pre>";
print_r($list); 
```

输出

```
Array
(
    [code] => 61
    [desciption] => Exceeds Withdrawal Limit
    [amount] => A
    [card] => 3386
) 
```

[观看现场演示](http://codepad.viper-7.com/cr7Lf4)

# python - 如何在不压缩文件的情况下估计文件的可压缩性？

> ID：12769933
> 
> 赞同：9
> 
> 时间：2012-10-07T15:04:21.883
> 
> 标签：python, compression, twisted

我在twisted python中使用基于事件循环的服务器来存储文件，我希望能够根据文件的可压缩性对文件进行分类。

如果他们从压缩中受益的可能性很高，他们会去一个打开 btrfs 压缩的目录，否则他们会去其他地方。

我不需要确定——80% 的准确率就足够了，而且会节省大量的磁盘空间。但由于也存在 CPU 和 fs 性能问题，我不能只保存压缩的所有内容。

这些文件是低兆字节。如果不使用大量 CPU 并过度延迟事件循环或重构压缩算法以适应事件循环，我就无法测试压缩它们。

是否有任何最佳实践可以快速估计可压缩性？我想出的是从文件的开头获取一小块（几 kB）数据，测试压缩它（可能有一个可以容忍的延迟）并以此为基础做出决定。

有什么建议么？提示？我的推理和/或问题有缺陷吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-07T17:11:10.633

*文件中间*只有 10K就可以了。您不需要开头或结尾，因为它们可能包含不代表文件其余部分的标题或结尾信息。10K 足以使用任何典型算法进行一定程度的压缩。这将预测整个文件的相对压缩量，以中间 10K 为代表。您获得的绝对比率与整个文件的绝对比率不同，但它与未压缩的差异量将允许您设置阈值。只需对许多文件进行试验，看看在哪里设置阈值。

如前所述，您可以通过对明显已经压缩的文件（例如 .png）不执行任何操作来节省时间。.jpg、.mov、.pdf、.zip 等。

测量熵不一定是一个好的指标，因为它只给出了可压缩性的零阶估计。如果熵表明它足够可压缩，那么它是正确的。如果熵表明它没有足够的可压缩性，那么它可能是正确的，也可能不是正确的。您的实际压缩器是一个更好的可压缩性估计器。在 1K 上运行它不会花费很长时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-07T15:15:58.550

我认为您正在寻找的是[如何计算文件的熵？](https://stackoverflow.com/questions/990477/how-to-calculate-the-entropy-of-a-file)

这个问题包含各种计算文件熵的方法（通过它你可以获得文件的“可压缩性”）。[这是本文](http://users.ece.utexas.edu/~touba/research/tcad07a.pdf)摘要的引述（**熵与测试数据压缩之间的关系** Kedarnath J. Balakrishnan，IEEE 成员和 Nur A. Touba，IEEE 高级成员）：

> 一组数据的熵是衡量其中包含的信息量的指标。已使用完全指定数据的熵计算来获得关于可以压缩多少数据的理论界限。本文扩展了熵的概念，用于不完全指定的测试数据（即，具有未指定或不关心的位），并探索使用熵来显示如何计算特定符号分区的最大压缩量的界限。研究了将测试数据划分为符号的不同方式对熵的影响。对于使用固定长度符号的一类分区，描述了一种用于指定无关减少熵的贪心算法。它被证明等价于最小熵集覆盖问题，因此在所有指定不关心的方式中关于最小熵的附加常数误差内。描述了一种可用于近似计算熵的多项式时间算法。针对熵界限分析了文献中提出的不同测试数据压缩技术。使用熵理论研究某些类型的测试数据编码策略的局限性和优势

为了更具建设性，请查看[此](http://blog.dkbza.org/2007/05/scanning-data-for-entropy-anomalies.html)站点以获取数据块熵计算的 python 实现

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-07T15:27:13.750

压缩文件通常不能很好地压缩。这意味着几乎任何媒体文件都不会很好地压缩，因为大多数媒体格式已经包含压缩。显然，这有例外，例如 BMP 和 TIFF 图像，但您可以建立一个压缩良好的文件类型（PNG、MPEG 和冒险远离视觉媒体 - gzip、bzip2 等）的白名单以跳过然后假设您遇到的其余文件将很好地压缩。

如果您想变得花哨，可以在系统中建立反馈（观察您所做的任何压缩的结果并将结果比率与文件类型相关联）。如果您遇到压缩一直很差的文件类型，您可以将其添加到白名单中。

这些想法取决于能够识别文件的类型，但是有一些标准实用程序可以很好地完成这一工作（通常比 80% 好得多）——file(1)、/etc/mime.types 等。

# vb.net - 在 VB.NET 中使用 Printdialog 打印 RTF 文件

> ID：12769935
> 
> 赞同：0
> 
> 时间：2012-10-07T15:04:38.110
> 
> 标签：vb.net, printing, rtf, printdocument, printdialog

我有这个代码：

```
Private printDocument1 As New PrintDocument()
Private stringToPrint As String

Private Sub ReadFile()
    Dim docName As String = "print_doc.rtf"
    Dim docPath As String = fsPathPrintDoc
    printDocument1.DocumentName = docName
    Dim stream As New FileStream(docPath + docName, FileMode.Open)
    Try
        Dim reader As New StreamReader(stream)
        Try
            stringToPrint = reader.ReadToEnd()
        Finally
            reader.Dispose()
        End Try
    Finally
        stream.Dispose()
    End Try
End Sub 
```

我使用以下方法进行打印：

```
ReadFile()
printDocument1.Print() 
```

我想使用 VB.NET 打印一个 rtf 文件`printdialog.show()`，因为想要选择特定的打印机进行打印，但是我上面的代码我不知道如何嵌入`printdialog`这里。

这是必需的，因为我想使用使用网络的不同系统上可用的打印机打印该文件。现在所有这些可用的打印机都可以在打印对话框中使用，我想要的是简单地打印驱动器中的特定文件使用`printdialog()`

另外，我试图找到一种使用打印文件的可能性`printdialog`，`printdocument`但不幸的是失败了。

**编辑：**

我找到了[http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument.aspx)但它不包括`printdialog`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T15:59:50.127

您将 PrintDocument 分配给[PrintDialogs](http://msdn.microsoft.com/en-us/library/system.windows.forms.printdialog.aspx) [文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.printdialog.document.aspx)属性，然后它将选定的打印机添加到您的文档中。然后您照常打印文档。

```
PrintDialog1.AllowSomePages = True 
PrintDialog1.ShowHelp = True 
PrintDialog1.Document = printDocument1 'Assign your Document here

Dim result As DialogResult = PrintDialog1.ShowDialog()

If (result = DialogResult.OK) Then
    printDocument1.Print()
End If 
```

# ruby-on-rails - 关于在ruby中使用inject

> ID：12769945
> 
> 赞同：0
> 
> 时间：2012-10-07T15:06:00.357
> 
> 标签：ruby-on-rails

如果你能解释这段代码的第三行，请有人帮忙。此方法是从第 2 个数字开始减去一个数字数组。从第 1 号和第 3 号中减去。从结果中减去等等......

```
def subtract(*numbers)

  sum = numbers.shift

  numbers.inject(sum) { |sum, number| sum - number }  

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:14:22.123

[http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)

inject 所做的是获取一些初始值（总和），并对可枚举的每个元素应用一些操作。所以在这里，我们取 1，然后从 1 中减去第一个元素，然后从该结果中减去第二个元素，等等......

所以下面我们有`1 - 2 = -1`，然后`-1 - 3 = -4`。

```
>> numbers=[1,2,3]
=> [1, 2, 3]
>> sum = numbers.shift
=> 1
>> numbers
=> [2, 3]
>> numbers.inject(sum) { |sum, number| sum - number }
=> -4 
```

# c++ - 如何让“应用程序”项目模板重新出现在 Qt Creator IDE 中？

> ID：12769946
> 
> 赞同：2
> 
> 时间：2012-10-07T15:06:19.790
> 
> 标签：c++, qt, qt-creator

我刚刚安装了 Qt Creator IDE，当我第一次启动 QtCreator.exe 文件并单击新建项目时，它显示了“应用程序”模板，我可以从中选择 Qt Gui 应用程序类型。但是现在当我再次运行它时，它只显示一些模板（提供了图片链接）

如何再次带回“应用程序”模板？

![在此处输入图像描述](../Images/77106de36798b8e06f029db263b3c560.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T16:24:25.053

转到 Tools -> Options -> Build & Run > Qt Versions 选项卡，查看您安装的 Qt 版本是否被识别。

如果需要，重新安装 Qt 库、Qt Creator 或整个 QtSDK 总是一个好主意。

**编辑：**因此，由于某种原因，Qt Creator 已停止检测您的 Qt 库。您不需要单独的 SDK。按该对话框中的“添加”按钮并找到您安装的`qmake.exe`文件（它应该`bin`在您安装 Qt 库的目录中）。如果仍然无法识别，请重新安装库。

# java - 如何将多个对象的坐标 x、y、z 坐标转换为显示这些对象位置的 Android 应用程序？

> ID：12769950
> 
> 赞同：-1
> 
> 时间：2012-10-07T15:06:46.923
> 
> 标签：java, android, 3d, coordinates

我正在使用带有adk android插件的eclipse，我完全迷失了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:34:16.730

这取决于您通过显示他们的位置是什么意思：

1.  在空白屏幕上彼此相对。阅读坐标中的距离计算并绘制相对于彼此距离的位置。

2.  在地图上，彼此分开或在一起。使用网络/二进制 API 进行地图显示，如谷歌地图（不想发送垃圾邮件和以我的声誉发布链接），或编写您的应用程序以显示来自 OpenStreetMap 等来源的开放地图数据。

3.  在卫星/航空图像上。与＃3几乎相同，只是您可以进行调查和尝试的选择更少。

如果你的问题更清楚一点，我可以更具体的回答，如果你编辑你的问题并澄清更多，我可以更具体。

# c# - 从“Var”变量中获取值

> ID：12769951
> 
> 赞同：0
> 
> 时间：2012-10-07T15:06:53.207
> 
> 标签：c#, sql, sql-server, database, select

我正在尝试从我的 SQL Server 数据库中获取一行。我不知道如何得到它我尝试了很多方法，但我没有得到任何好的解决方案。

```
databasEntities db = new databasEntities();
var medlem = from medlemar in db.medlemar
             where medlemar.namn == "Ali"
             select medlemar; 
```

这是我的数据库表`Medlemar`：

*   ID
*   名字
*   迷失
*   邮局

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T15:09:40.007

medlem 将是对象的集合，因此您应该可以使用 foreach 或 .first 。

```
foreach(var m in medlem)
{
     var namn = m.namm;
     ...
} 
```

或者

```
 var m1 = medlem.First(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-07T15:27:08.160

在 C# 中，`var`不是无类型类型。它实际上是一种隐式键入对象的方法，而无需键入整个类型名称。

例如：

```
var someString = "Any String Value"; 
```

和

```
string someString = "Any String Value"; 
```

编译成完全相同的 IL。

因此，在您的情况下，LINQ 返回一个`IEnumerable<T>`集合，其中 T 是您的`medlemar`对象的类型。

由于它是一个集合，因此您需要像访问任何其他集合一样访问它。一种可能性是使用`foreach`

```
foreach(var m in medlem)
{
    //Do Something
} 
```

另一种可能性是`ToList()`通过索引调用然后访问单个成员：

```
var medlemList =  medlem.ToList();
var namn = medlemList[i].namn;   // where i is some specific index in the collection 
```

或者，如果您只想获取集合中的第一个对象，则根据您的用例，您有几种选择：

```
var firstMedlem = medlem.Single();
var firstMedlem = medlem.First();
var firstMedlem = medlem.SingleOrDefault();
var firstMedlem = medlem.FirstOrDefault(); 
```

上面的每一个都做大致相同的事情，但如果集合有零个或多个对象，它们的行为会有所不同。

`Single()`将返回集合中唯一的对象。如果集合包含多个对象或零个对象，则会抛出异常。同样，`SingleOrDefault()`如果有多个对象，会抛出异常，但会返回由返回的值`default(T)`（通常为null，T为值类型时除外）。

`First()`如果集合为空并返回默认值，则其`FirstOrDefault()`行为方式与 where`First()`将抛出异常的方式相同。`FirstOrDefault()`它们与`Single..()`方法的不同之处在于，如果集合具有多个值，它们将始终返回第一个成员。

所以基本上，`FirstOrDefault()`除非集合本身为空，否则永远不会抛出异常。根据`IEnumerable<T>`集合的内容，其他变体将在一种或多种情况下引发异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T15:09:39.150

我认为你需要使用类似的[`FirstOrDefault()`](http://msdn.microsoft.com/en-us/library/bb340482.aspx)东西：

```
 var medlem = from medlemar in db.medlemar
                           where medlemar.namn == "Ali"
                           select medlemar;
   string nameFromVar = medlem.FirstOrDefault(); 
```

除此之外，您还可以使用其他选项`FirstOrDefault()`：

*   [`Single`](http://msdn.microsoft.com/en-us/library/bb155325.aspx)返回一个类似的项目，`FirstOrDefault()`但如果没有或不止一个项目，它将引发异常。

*   [`First`](http://msdn.microsoft.com/en-us/library/bb291976.aspx)也返回单个项目，但在没有项目时抛出。

但如果是，`FirstOrDefault()`它将返回第一项或在没有项目或更准确的情况下返回 null：

> 如果源为空，则默认（TSource）；否则，源中的第一个元素。

# django - Django：模型 FormSet 上的 IntegrityError - 不包括必需的 M2M 字段

> ID：12769956
> 
> 赞同：0
> 
> 时间：2012-10-07T15:07:42.747
> 
> 标签：django, many-to-many, django-forms

所以我有一个 House 模型的 modelformset，它有一个 owner manytomany 字段，我排除了 owner 字段，因为我希望它自动将当前登录的用户 ID 保存为所有者 - 我*可以*破解这个带有隐藏字段，但宁愿知道它是如何正确完成的。

为清楚起见，完整性错误是 owner_id 不能为空，我尝试通过硬编码修复它只是为了在 manage_houses 的开头看到失败

**视图.py**

```
 def manage_houses(request):                                                                                                                                                                                                                 
    HousesFormSet = modelformset_factory(House, form=ManageHousesForm)                                                                                                                                                                  

    if request.method == 'POST':                                                                                                                                                                                       
        formset = HousesFormSet(request.POST)                                                                                                                                                                                               

        # failed attempt at fixing integrity error                                                                                                                                                                                                                 
        for form in formset:                                                                                                                                                                                                                  
            form.owner_id = 1                                                                                                                                                                                                            

        if formset.is_valid():                                                                                                                                                                                                                
            if formset.save():                                                                                                                                                                                                                
                notice      = "Success! Your houses were updated in the system."                                                                                                                                                            
                notice_type = "success"                                                                                                                                                                                                       
            elif not formset.has_changed():                                                                                                                                                                                                   
                pass                                                                                                                                                                                                                          
            else:                                                                                                                                                                                                                             
                notice      = "Something went wrong! Your houses may not have been updated."                                                                                                                                                
                notice_type = "error"                                                                                                                                                                                                         
    else:                                                                                                                                                                                                                                     
        formset = SpecialsFormSet()                                                                                                                                                                                                           

    response_details = { 'formset': formset,                                                                                                                                                                                                  
                     'fields':  ManageHousesForm.base_fields }                                                                                                                                                                          

    try:                                                                                                                                                                                                                                      
        response_details['notice']      = notice                                                                                                                                                                                              
        response_details['notice_type'] = notice_type                                                                                                                                                                                         
    except NameError:                                                                                                                                                                                                                         
        pass                                                                                                                                                                                                                                  

    return render_to_response('houses/manage.djhtml', response_details) 
```

**模型.py**

```
class House(models.Model):                                                                                                                                                                                                               
    class Meta:                                                                                                                                                                                                                               
        app_label = 'houses'                                                                                                                                                                                                             

    # Fields                                                                                                                                                                                                                                  
    owners          = models.ManyToManyField(User)                                                                                                                                                                                            

    name            = models.CharField(max_length=50)                                                                                                                                                                                         
    slug            = models.SlugField(max_length=100, blank=True, editable=False, unique=True)                                                                                                                                               
    address         = models.CharField(max_length=75)                                                                                                                                                                                                 

    def __unicode__(self):                                                                                                                                                                                                                    
        return self.name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T22:27:54.680

根据 Django 文档，这就是[内联表单集](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/#inline-formsets)的用途：

> 内联表单集是模型表单集之上的一个小型抽象层。这些简化了通过外键处理相关对象的情况。

# javascript - Backbone.js 内联模板在 Opera 中不起作用

> ID：12769965
> 
> 赞同：1
> 
> 时间：2012-10-07T15:08:56.197
> 
> 标签：javascript, backbone.js, underscore.js, backbone-views

我创建了一个使用内联模板的主干.js 应用程序，示例如下：

```
<script type="text/html" id="header-template">
<div class='header'>
<strong><%= name %></strong>
</div>
</script> 
```

然后在视图中：

```
template = _.template($("#header-template").html()); 
```

`$("#header-template").html()`在 Opera 中，这会由于返回 null而引发错误。有谁知道如何解决这个问题？

谢谢

**更新：**

我在控制台中遇到的错误是`Unhandled Error: 'App.view.header' is not a constructor`. 当我将 underscore.js 和backbone.js 更新到最新版本时，Chrome 中也会出现此错误。

标头定义如下：

```
App.view.header = App.view.header || {} 

App.view.header = Backbone.View.extend({
...
}); 
```

并在路由器中呈现如下：

```
$('header').html( new App.view.header().render().el); 
```

**另一个更新**

我创建了一个具有相同问题的小型backbone.js 应用程序：

[http://goo.gl/KoOvq](http://goo.gl/KoOvq)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:43:46.937

您可以将模板包装在一个函数中，并仅在需要时调用它。

我更喜欢这种方式，因为如果您开始将模板放在另一个文件中，它们只会在需要时加载，就像您现在所做的那样，它们会在应用程序启动时加载。

> 模板=函数（变量）{返回_.模板（模板，变量）}

# database - sql server - 图书馆管理系统设计

> ID：12769975
> 
> 赞同：0
> 
> 时间：2012-10-07T15:10:09.570
> 
> 标签：database

我正在设计一个图书馆数据库架构，假设有一本书，它属于几个学科，如何设计列来存储这些学科？使用 nvarchar 存储 subjectId(s)？

```
---------
Book
---------
id    ----- int 
title ----- nvarchar(50)
subjectId ----- int (foreign key to Subject table)

---------
Subject
---------
id    ----- int 
name ----- nvarchar(50) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T15:13:31.617

我建议再创建一个表`BookBelong( bookId, subjectId)` BookId 和 subjectId 必须是键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:14:39.293

不，正确的方法是添加另一个包含关系的表。这是一篇解释它的文章 [http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php](http://www.tomjewett.com/dbdesign/dbdesign.php?page=manymany.php)

# php - 参考 - 这个错误在 PHP 中是什么意思？

> ID：12769982
> 
> 赞同：1229
> 
> 时间：2012-10-07T15:11:00.930
> 
> 标签：php, debugging, error-handling, warnings, custom-error-handling

### 这是什么？

这是一些关于您在编写 PHP 时可能遇到的警告、错误和通知的答案，但不知道如何修复它们。这也是一个社区 Wiki，因此邀请每个人参与添加和维护此列表。

### 为什么是这样？

Stack Overflow 上经常会出现诸如[“已发送标头”](https://stackoverflow.com/a/12770075)或[“调用非对象成员”之类的问题。](https://stackoverflow.com/a/12769983)这些问题的根本原因总是相同的。因此，这些问题的答案通常会重复它们，然后向 OP 显示在其特定情况下要更改哪一行。这些答案不会为站点增加任何价值，因为它们仅适用于 OP 的特定代码。其他具有相同错误的用户无法轻松地从中读取解决方案，因为他们过于本地化。这很可悲，因为一旦您了解了根本原因，修复错误就变得微不足道了。因此，此列表试图以通用的方式解释解决方案。

### 我应该在这里做什么？

如果您的问题已被标记为与此问题重复，请在下面找到您的错误消息并将修复程序应用于您的代码。答案通常包含进一步调查的链接，以防仅从一般答案中不清楚。

如果您想做出贡献，请添加您“最喜欢的”错误消息、警告或通知、每个答案一个、简短描述其含义（即使它只是在其手册页中突出显示术语）、可能的解决方案或调试方法以及有价值的现有问答列表。此外，请随时改进任何现有答案。

## 名单

*   [什么也看不见。该页面是空的和白色的。](https://stackoverflow.com/a/12772851)（也称为*白页/死亡屏幕*）
*   [代码不运行/输出了我的 PHP 代码的部分内容](https://stackoverflow.com/a/24423272)
*   [警告：无法修改标头信息 - 标头已发送](https://stackoverflow.com/a/12770075)
*   [警告：mysql_fetch_array() 期望参数 1 是资源，给定的布尔值](https://stackoverflow.com/a/12770072)又名
    [警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果资源](https://stackoverflow.com/a/12770072)
*   [警告：*[function]*期望参数 1 是资源，给定的布尔值](https://stackoverflow.com/a/14067623)
*   [警告：*[功能]*：无法打开流：*[原因]*](https://stackoverflow.com/a/12820243)
*   [警告：open_basedir 限制生效](https://stackoverflow.com/a/12772244)
*   [警告：除以零](https://stackoverflow.com/a/21507314)
*   [警告：非法字符串偏移 'XXX'](https://stackoverflow.com/a/27678436)
*   [警告：count()：参数必须是数组或实现 Countable 的对象](https://stackoverflow.com/a/56011600)
*   [解析错误：语法错误，意外的 '['](https://stackoverflow.com/a/22316776)
*   [解析错误：语法错误，意外的 T_XXX](https://stackoverflow.com/a/12770089)
*   [解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE](https://stackoverflow.com/a/13935532)
*   [解析错误：语法错误，意外的 T_PAAMAYIM_NEKUDOTAYIM](https://stackoverflow.com/a/12770129)
*   [解析错误：语法错误，意外的“require_once”（T_REQUIRE_ONCE），期望函数（T_FUNCTION）](https://stackoverflow.com/q/23726288)
*   [解析错误：语法错误，意外的 T_VARIABLE](https://stackoverflow.com/a/15539535)
*   [致命错误：已用尽允许的 XXX 字节内存大小（尝试分配 XXX 字节）](https://stackoverflow.com/a/12770179)
*   [致命错误：在非对象或 null 上调用成员函数 ...](https://stackoverflow.com/a/12769983)
*   [致命错误：调用未定义函数 XXX](https://stackoverflow.com/a/12784048)
*   [致命错误：无法重新声明 XXX](https://stackoverflow.com/a/13879461)
*   [致命错误：无法在写入上下文中使用函数返回值](https://stackoverflow.com/a/12770530)
*   [致命错误：AAA::BBB() 的声明必须与 CCC::BBB()](https://stackoverflow.com/q/1885302)的声明兼容'
*   [AAA::BBB() 的返回类型应该与 CCC::BBB() 兼容，或者应该使用 #[\ReturnTypeWillChange] 属性](https://stackoverflow.com/q/71133749)
*   [致命错误：不在对象上下文中使用 $this](https://stackoverflow.com/a/12770317)
*   [致命错误：类 Closure 的对象无法转换为字符串](https://stackoverflow.com/a/56658110)
*   [致命错误：未定义的类常量](https://stackoverflow.com/a/59619392/1255289)
*   [致命错误：未捕获的类型错误：参数 #n 必须是 x 类型，给定 y](https://stackoverflow.com/a/67781316)
*   [注意：数组到字符串的转换](https://stackoverflow.com/a/24507107)
*   [注意：试图获取非对象错误的属性](https://stackoverflow.com/a/26572398)
*   [注意：未定义的变量或属性](https://stackoverflow.com/a/12778634)
*   [“注意：未定义的索引”或“警告：未定义的数组键”](https://stackoverflow.com/a/12770836)
*   [注意：未定义的偏移量 XXX](https://stackoverflow.com/a/21793407) [参考]
*   [注意：未初始化的字符串偏移量：XXX](https://stackoverflow.com/a/17630869)
*   [注意：使用未定义的常量 XXX - 假定为 'XXX'](https://stackoverflow.com/a/12773272)
*   [MySQL：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在...附近使用...行...](https://stackoverflow.com/a/12771239)
*   [严格标准：非静态方法*[<class>::<method>]*不应被静态调用](https://stackoverflow.com/a/21942832)
*   [警告：函数期望参数 X 为布尔值/字符串/整数](https://stackoverflow.com/a/52771226)
*   [HTTP 错误 500 - 内部服务器错误](https://stackoverflow.com/a/53843354)
*   [不推荐使用：不推荐使用带有花括号的数组和字符串偏移访问语法](https://stackoverflow.com/a/59158847)

另见：

*   [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/q/3737139)

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2012-10-07T15:21:03.630

### 警告：无法修改标头信息 - 标头已发送

当您的脚本尝试向客户端发送 HTTP 标头但之前已经有输出时会发生这种情况，这导致标头已经发送到客户端。

这是一个[`E_WARNING`](http://www.php.net/manual/en/errorfunc.constants.php)并且它不会停止脚本。

一个典型的例子是这样的模板文件：

```
<html>
    <?php session_start(); ?>
    <head><title>My Page</title>
</html>
... 
```

该`session_start()`函数将尝试将带有会话 cookie 的标头发送到客户端。`<html>`但是 PHP 在将元素写入输出流时已经发送了标头。您必须将其移至`session_start()`顶部。

您可以通过检查代码触发警告*之前*的行并检查其输出位置来解决此问题。将任何标头发送代码移到该代码之前。

一个经常被忽视的输出是 PHP 关闭后的新行`?>`。`?>`当它是文件中的最后一件事时，省略它被认为是一种标准做法。同样，此警告的另一个常见原因是开头`<?php`有空格、行或不可见字符，导致 Web 服务器发送标头和空格/换行符，因此当 PHP 开始解析时将无法提交任何标题。

如果您的文件中包含多个`<?php ... ?>`代码块，则它们之间不应有任何空格。（注意：如果您有自动构建的代码，您可能有多个块）

还要确保您的代码中没有任何字节顺序标记，例如当脚本的编码是带有 BOM 的 UTF-8 时。

相关问题：

*   [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)
*   [Stackoverflow 上的所有 PHP“标头已发送”问题](https://stackoverflow.com/search?q=headers+already+sent+[php])
*   [字节顺序标记](https://stackoverflow.com/search?q=BOM+php)
*   [什么 PHP 函数创建输出？](https://stackoverflow.com/questions/4673747/what-php-functions-create-output)

* * *

## 回答 #2

> 赞同：199
> 
> 时间：2012-10-07T15:11:00.930

### 致命错误：在非对象上调用成员函数 ...

发生类似于`xyz->method()`where `xyz`is not an object 的代码，因此`method`无法调用。

这是一个致命错误，它将停止脚本（向前兼容性通知：从 PHP 7 开始它将成为一个可捕获的错误）。

大多数情况下，这表明代码缺少对错误条件的检查。在调用它的方法之前验证一个对象实际上是一个对象。

一个[典型的](https://stackoverflow.com/search?q=%5Bphp%5D+%5Bpdo%5D+Fatal+error%3A+Call+to+a+member+function+on+a+non-object)例子是

```
// ... some code using PDO
$statement = $pdo->prepare('invalid query', ...);
$statement->execute(...); 
```

在上面的示例中，无法准备查询`prepare()`并将分配`false`给`$statement`. 尝试调用该`execute()`方法将导致致命错误，因为`false`它是“非对象”，因为该值是布尔值。

弄清楚*为什么*你的函数返回一个布尔值而不是一个对象。例如，检查`$pdo`对象中发生的最后一个错误。有关如何调试的详细信息将取决于如何处理相关特定函数/对象/类的错误。

如果即使`->prepare`失败了，那么您的`$pdo`数据库句柄对象[也没有传递到当前范围内](https://stackoverflow.com/questions/4910796/scope-error-call-to-a-member-function-prepare-on-a-non-object)。找到它被定义的地方。然后将其作为参数传递，将其存储为属性，或通过全局范围共享。

另一个问题可能是有条件地创建一个对象，然后尝试在该条件块之外调用一个方法。例如

```
if ($someCondition) {
    $myObj = new MyObj();
}
// ...
$myObj->someMethod(); 
```

通过尝试在条件块之外执行该方法，您的对象可能未定义。

相关问题：

*   [调用非对象的成员函数](https://stackoverflow.com/q/54566/727208)
*   [在 Stackoverflow 上列出所有 PHP“致命错误：在非对象上调用成员函数 ...”问题](https://stackoverflow.com/search?q=%5Bphp%5D+Fatal+error%3A+Call+to+a+member+function+on+a+non-object)

* * *

## 回答 #3

> 赞同：124
> 
> 时间：2012-10-07T21:06:14.763

### 什么也看不见。该页面是空的和白色的。

也称为*死亡白页*或*死亡白屏*。当关闭错误报告并发生致命错误（通常是语法错误）时，会发生这种情况。

如果您启用了错误日志记录，您将在错误日志中找到具体的错误消息。这通常在一个名为“php_errors.log”的文件中，或者在中心位置（例如`/var/log/apache2`在许多 Linux 环境中）或在脚本本身的目录中（有时用于共享主机环境）。

有时，临时启用错误显示可能更直接。然后白页将显示错误消息。请小心，因为访问该网站的每个人都可以看到这些错误。

这可以通过在脚本顶部添加以下 PHP 代码来轻松完成：

```
ini_set('display_errors', 1); error_reporting(~0); 
```

该代码将打开错误显示并将报告设置为最高级别。

由于[`ini_set()`](http://php.net/ini_set)在运行时执行它对解析/语法错误没有影响。这些错误将出现在日志中。如果您还想在输出中显示它们（例如在浏览器中），您必须将[`display_startup_errors`](http://php.net/display_startup_errors)指令设置为`true`. [在运行时](http://docs.php.net/configuration.changes)[*之前*](http://docs.php.net/configuration.changes)`php.ini`或`.htaccess`通过[影响配置的任何其他方法](http://docs.php.net/configuration.changes)*执行此操作。*

 *您可以使用相同的方法设置[log_errors](http://php.net/manual/pt_BR/errorfunc.configuration.php#ini.log-errors)和[error_log](http://php.net/manual/pt_BR/errorfunc.configuration.php#ini.error-log)指令来选择您自己的日志文件位置。

查看日志或使用显示，您将获得更好的错误消息以及脚本停止的代码行。

相关问题：

*   [PHP的白屏死机](https://stackoverflow.com/questions/1475297/phps-white-screen-of-death)
*   [白屏死机！](https://stackoverflow.com/questions/2914127/white-screen-of-death)
*   [PHP 不显示错误信息](https://stackoverflow.com/questions/5680831/php-5-3-does-not-display-error-messages)
*   [PHP 发出 500 错误 - 这是在哪里记录的？](https://stackoverflow.com/q/3075355/367456)
*   [如何在 PHP 中获取有用的错误消息？](https://stackoverflow.com/questions/845021/how-to-get-useful-error-messages-in-php)
*   [Stackoverflow 上的所有 PHP“死亡白页”问题](https://stackoverflow.com/search?q=%5Bphp%5D+White+Page+Screen+Of+Death)

相关错误：

*   [解析错误：语法错误，意外的 T_XXX](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770089/#12770089)
*   [致命错误：在非对象上调用成员函数 ...](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12769983#12769983)
*   [代码不运行/输出了我的 PHP 代码的部分内容](https://stackoverflow.com/a/24423272/476)

* * *

## 回答 #4

> 赞同：108
> 
> 时间：2012-10-07T16:53:29.207

### “注意：未定义的索引”或“警告：未定义的数组键”

当您尝试通过数组中不存在的键访问数组时发生。

`Undefined Index`通知的典型示例是（[演示](http://codepad.org/bsoiXSzw)）

```
$data = array('foo' => '42', 'bar');
echo $data['spinach'];
echo $data[1]; 
```

两者`spinach`和`1`都不存在于数组中，导致一个[`E_NOTICE`](http://www.php.net/manual/en/errorfunc.constants.php)被触发。在 PHP 8.0 中，这是一个 E_WARNING。

解决方案是在访问该索引之前确保索引或偏移量存在。这可能意味着您需要修复程序中的错误，以确保这些索引在您期望的时候确实存在。或者这可能意味着您需要使用[`array_key_exists`](http://php.net/array_key_exists)or测试索引是否存在[`isset`](http://php.net/isset)：

```
$data = array('foo' => '42', 'bar');
if (array_key_exists('spinach', $data)) {
    echo $data['spinach'];
}
else {
    echo 'No key spinach in the array';
} 
```

如果您有如下代码：

```
<?php echo $_POST['message']; ?>
<form method="post" action="">
    <input type="text" name="message">
    ... 
```

then`$_POST['message']`不会在第一次加载此页面时设置，您将收到上述错误。只有当表单提交并且此代码第二次运行时，数组索引才会存在。您通常通过以下方式检查：

```
if ($_POST)  ..  // if the $_POST array is not empty
// or
if ($_SERVER['REQUEST_METHOD'] == 'POST') ..  // page was requested with POST 
```

相关问题：

*   [参考：“注意：未定义的变量”和“注意：未定义的索引”</a>](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)
[](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)
*   [Stackoverflow 上的所有 PHP“通知：未定义索引”问题](https://stackoverflow.com/search?q=%5Bphp%5D+undefined+index)
*   [http://php.net/arrays](http://php.net/arrays)

* * *

## 回答 #5

> 赞同：89
> 
> 时间：2012-10-07T15:20:41.277

### 警告：mysql_fetch_array() 期望参数 1 是资源，给定的布尔值

首先也是最重要的：

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](http://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

当您尝试从结果中获取数据`mysql_query`但查询失败时，会发生这种情况。

这是一个警告，不会停止脚本，但会使您的程序出错。

您需要检查`mysql_query`by返回的结果

```
$res = mysql_query($sql);
if (!$res) {
   die(mysql_error());
}
// after checking, do the fetch 
```

相关问题：

*   [mysql_fetch_array() 期望参数 1 是资源，在 select 中给出布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)
*   [Stackoverflow 上的所有“mysql_fetch_array() 期望参数 1 是资源，布尔值”问题](https://stackoverflow.com/search?q=Warning:%20mysql_fetch_array%28%29%20expects%20parameter%201%20to%20be%20resource&submit=search)

相关错误：

*   [警告：*[function]*期望参数 1 是资源，给定的布尔值](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/14067623#14067623)

其他`mysql*`也期望 MySQL 结果资源作为参数的函数将出于相同的原因产生相同的错误。

* * *

## 回答 #6

> 赞同：82
> 
> 时间：2012-10-07T15:52:06.820

### 致命错误：不在对象上下文中使用 $this

[`$this`是 PHP](http://php.net/language.variables.basics)中的一个特殊变量，不能赋值。如果在不存在的上下文中访问它，则会给出此致命错误。

可能会发生此错误：

1.  如果静态调用非静态方法。例子：

    ```
    class Foo {
       protected $var;
       public function __construct($var) {
           $this->var = $var;
       }

       public static function bar () {
           // ^^^^^^
           echo $this->var;
           //   ^^^^^
       }
    }

    Foo::bar(); 
    ```

    ***如何修复：***再次检查您的代码，`$this`只能在对象上下文中使用，并且永远不应该在静态方法中使用。此外，静态方法不应访问非静态属性。用于`self::$static_property`访问静态属性。

2.  如果来自类方法的代码已被复制到普通函数或只是全局范围*并*保留`$this`特殊变量。
    ***如何修复：***查看代码并`$this`用不同的替换变量替换。

相关问题：

1.  将非静态方法称为静态方法：[PHP 致命错误：不在对象上下文中使用 $this](https://stackoverflow.com/q/2350937/367456)
2.  复制代码：[致命错误：不在对象上下文中使用 $this](https://stackoverflow.com/q/1643931/367456)
3.  [Stackoverflow 上的所有“不在对象上下文中使用 $this”的问题](https://stackoverflow.com/search?q=Fatal%20error:%20Using%20$this%20when%20not%20in%20object%20context)

* * *

## 回答 #7

> 赞同：77
> 
> 时间：2012-10-08T14:43:16.253

### 致命错误：调用未定义的函数 XXX

当您尝试调用尚未定义的函数时发生。常见原因包括缺少扩展和包含、条件函数声明、函数声明中的函数或简单的拼写错误。

**示例 1 - 条件函数声明**

```
$someCondition = false;
if ($someCondition === true) {
    function fn() {
        return 1;
    }
}
echo fn(); // triggers error 
```

在这种情况下，`fn()`将永远不会被声明，因为`$someCondition`它不是真的。

**示例 2 - 函数声明中的函数**

```
function createFn() 
{
    function fn() {
        return 1;
    }
}
echo fn(); // triggers error 
```

在这种情况下，`fn`只会在`createFn()`被调用时声明。请注意，后续调用`createFn()`将触发有关重新声明现有函数的错误。

您也可能会在 PHP 内置函数中看到这一点。[尝试在官方手册](http://php.net/manual/en/funcref.php)中搜索该函数，并查看它属于哪个“扩展”（PHP模块），以及PHP的哪些版本支持它。

如果缺少扩展，请安装该扩展并在 php.ini 中启用它。有关您的函数出现的扩展，请参阅 PHP 手册中的安装说明。您还可以使用包管理器（例如`apt`，在 Debian 或 Ubuntu、`yum`Red Hat 或 CentOS 中）或控制面板启用或安装扩展在共享主机环境中。

如果该函数是在您使用的较新版本的 PHP 中引入的，您可以在手册或其注释部分找到替代实现的链接。如果它已从 PHP 中删除，请查找有关原因的信息，因为它可能不再需要。

如果缺少包含，请确保在调用函数之前包含声明函数的文件。

如果有错别字，请更正错别字。

相关问题：

*   [https://stackoverflow.com/search?q=Fatal+error%3A+Call+to+undefined+function](https://stackoverflow.com/search?q=Fatal+error%3A+Call+to+undefined+function)

* * *

## 回答 #8

> 赞同：73
> 
> 时间：2012-10-07T15:22:38.873

### 解析错误：语法错误，意外的 T_XXX

当您在意想不到的地方有[`T_XXX`令牌](http://php.net/tokens)、不平衡（多余的）括号、使用短标签而不在 php.ini 中激活它等等时，就会发生这种情况。

相关问题：

*   参考：[PHP 解析/语法错误；以及如何解决它们？](https://stackoverflow.com/q/18050071/367456)
*   [解析错误：语法错误：意外'{'](https://stackoverflow.com/questions/7059753/parse-error-syntax-error-unexpected)
*   [解析错误：语法错误，我的 PHP 代码中的文件意外结束](https://stackoverflow.com/questions/11482527/parse-error-syntax-error-unexpected-end-of-file-in-my-php-code)
*   [解析错误：语法错误，意外的 '<' in - 修复？](https://stackoverflow.com/questions/992403/parse-error-syntax-error-unexpected-in-fix)
*   [解析错误：语法错误，意外的“？”](https://stackoverflow.com/questions/9762216/parse-error-syntax-error-unexpected)

如需进一步帮助，请参阅：

*   [http://phpcodechecker.com/](http://phpcodechecker.com/) - 它确实为您的语法问题提供了一些更有用的解释。

* * *

## 回答 #9

> 赞同：71
> 
> 时间：2012-10-07T16:16:35.923

### 致命错误：无法在写入上下文中使用函数返回值

这通常发生在直接使用函数时`empty`。

例子：

```
if (empty(is_null(null))) {
  echo 'empty';
} 
```

这是因为[`empty`](http://php.net/manual/en/function.empty.php)它是一种语言结构而不是函数，在 5.5 之前的 PHP 版本中不能使用表达式作为其参数来调用它。在 PHP 5.5 之前，参数 to`empty()`必须是*variable*，但 PHP 5.5+ 允许任意表达式（例如函数的返回值）。

`empty`，尽管它的名字，实际上并不检查变量是否为“空”。相反，它会检查变量是否不存在，或者`== false`. 表达式（如`is_null(null)`示例中的）将始终被视为存在，因此这里`empty`仅检查它是否等于 false。您可以将`empty()`此处替换为`!`，例如`if (!is_null(null))`，或明确比较为 false ，例如`if (is_null(null) == false)`。

相关问题：

*   [致命错误：不能使用函数返回值](https://stackoverflow.com/questions/4872184/fatal-error-cant-use-function-return-value)

* * *

## 回答 #10

> 赞同：64
> 
> 时间：2012-10-07T17:45:04.700

### MySQL：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在...附近使用...行...

此错误通常是由于您忘记正确转义传递给 MySQL 查询的数据而引起的。

**不**该做什么的一个例子（“坏主意”）：

```
$query = "UPDATE `posts` SET my_text='{$_POST['text']}' WHERE id={$_GET['id']}";
mysqli_query($db, $query); 
```

此代码可以包含在带有要提交的表单的页面中，URL 为[http://example.com/edit.php?id=10](http://example.com/edit.php?id=10)（编辑帖子 n°10）

如果提交的文本包含单引号会怎样？`$query`最终会得到：

```
$query = "UPDATE `posts` SET my_text='I'm a PHP newbie' WHERE id=10'; 
```

而当这个查询发送到 MySQL 时，它会抱怨语法错误，因为中间多了一个单引号。

为避免此类错误，您**必须**始终在用于查询之前对数据进行转义。

在 SQL 查询中使用之前转义数据也非常重要，因为如果您不这样做，您的脚本将对 SQL 注入开放。SQL 注入可能导致记录、表或整个数据库的更改、丢失或修改。这是一个非常严重的安全问题！

文档：

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)
*   [`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string)
*   [`mysqli_real_escape_string()`](http://php.net/mysqli_real_escape_string)
*   ["Bobby Tables" XKCD 漫画中的 SQL 注入是如何工作的？](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)
*   [绕过 mysql_real_escape_string() 的 SQL 注入](https://stackoverflow.com/questions/5741187/sql-injection-that-gets-around-mysql-real-escape-string)

* * *

## 回答 #11

> 赞同：55
> 
> 时间：2012-12-18T14:52:32.023

### 解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE

在 PHP 8.0 及更高版本中，消息改为：

> 语法错误，意外的字符串内容“”，需要“-”或标识符或变量或数字

当整个复杂变量*构造*未包含在`{}`.

### 错误案例：

这将导致`Unexpected T_ENCAPSED_AND_WHITESPACE`：

```
echo "This is a double-quoted string with a quoted array key in $array['key']";
//---------------------------------------------------------------------^^^^^ 
```

### 可能的修复：

在双引号字符串中，PHP 将允许使用数组键字符串*unquoted*，并且不会发出`E_NOTICE`. 所以上面可以写成：

```
echo "This is a double-quoted string with an un-quoted array key in $array[key]";
//------------------------------------------------------------------------^^^^^ 
```

整个复杂数组变量和键可以包含在 中`{}`，在这种情况下，它们*应该*被引用以避免`E_NOTICE`. [PHP 文档](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double)建议对复杂变量使用这种语法。

```
echo "This is a double-quoted string with a quoted array key in {$array['key']}";
//--------------------------------------------------------------^^^^^^^^^^^^^^^
// Or a complex array property of an object:
echo "This is a a double-quoted string with a complex {$object->property->array['key']}"; 
```

当然，上述*任何*一种方法的替代方法是连接数组变量而不是插值：

```
echo "This is a double-quoted string with an array variable". $array['key'] . " concatenated inside.";
//----------------------------------------------------------^^^^^^^^^^^^^^^^^^^^^ 
```

有关参考，请参阅[PHP 字符串手册页](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.double)中的**变量解析部分**

* * *

## 回答 #12

> 赞同：53
> 
> 时间：2012-10-07T15:36:31.607

### 致命错误：已用尽允许的 XXX 字节内存大小（尝试分配 XXX 字节）

没有足够的内存来运行您的脚本。PHP 已达到内存限制并停止执行。这个错误是致命的，脚本停止。[内存限制](http://php.net/memory_limit)的值可以在`php.ini`文件中配置，也可以`ini_set('memory_limit', '128 M');`在脚本中使用（这将覆盖中定义的值`php.ini`）。内存限制的目的是防止单个 PHP 脚本吞噬所有可用内存并导致整个 Web 服务器停机。

首先要做的是尽量减少脚本所需的内存量。例如，如果您将一个大文件读入一个变量或从数据库中获取许多记录并将它们全部存储在一个数组中，则可能会使用大量内存。更改您的代码，改为逐行读取文件或一次获取一个数据库记录，而不将它们全部存储在内存中。这确实需要对幕后发生的事情以及数据何时存储在内存中以及何时存储在其他地方有一些概念性的认识。

如果此错误发生在您的脚本未执行内存密集型工作时，您需要检查您的代码以查看是否存在内存泄漏。该[`memory_get_usage`](http://php.net/manual/function.memory-get-usage.php)功能是您的朋友。

相关问题：

*   [Stackoverflow 上的所有“致命错误：允许的 XXX 字节内存大小已用尽”问题](https://stackoverflow.com/search?q=Fatal%20error:%20Allowed%20memory%20size%20of%20xxxx%20bytes%20exhausted)

* * *

## 回答 #13

> 赞同：46
> 
> 时间：2012-10-10T13:14:49.320

### 警告：*[功能]*：无法打开流：*[原因]*

当您通常通过 调用文件时会发生这种情况`include`，`require`或者`fopen`PHP 找不到该文件或没有足够的权限来加载该文件。

这可能由于多种原因而发生：

*   文件路径错误
*   文件路径是相对的
*   包含路径错误
*   权限太严格
*   SELinux 生效
*   还有很多 ...

一个常见的错误是不使用绝对路径。这可以通过使用完整路径或[魔术常量](http://php.net/manual/language.constants.predefined.php)（如`__DIR__`or ）轻松解决`dirname(__FILE__)`：

```
include __DIR__ . '/inc/globals.inc.php'; 
```

或者：

```
require dirname(__FILE__) . '/inc/globals.inc.php'; 
```

确保使用正确的路径是解决这些问题的一个步骤，这也可能与不存在的文件、文件系统的权限阻止访问或 PHP 本身的基于打开的限制有关。

快速解决此问题的最佳方法是遵循下面的故障排除清单。

相关问题：

*   [故障排除清单：无法打开流](https://stackoverflow.com/questions/36577020/failed-to-open-stream-no-such-file-or-directory)

相关错误：

*   [警告：open_basedir 限制生效](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12772244#12772244)

* * *

## 回答 #14

> 赞同：45
> 
> 时间：2012-10-08T09:14:58.090

### 注意：未定义的变量

当您尝试使用以前未定义的变量时会发生这种情况。

一个典型的例子是

```
foreach ($items as $item) {
    // do something with item
    $counter++;
} 
```

如果之前没有定义`$counter`，上面的代码会触发通知。

正确的方法是在使用之前设置变量

```
$counter = 0;
foreach ($items as $item) {
    // do something with item
    $counter++;
} 
```

类似地，变量在其范围之外是不可访问的，例如在使用匿名函数时。

```
$prefix = "Blueberry";
$food = ["cake", "cheese", "pie"];
$prefixedFood = array_map(function ($food) {
  // Prefix is undefined
  return "${prefix} ${food}";
}, $food); 
```

这应该使用`use`

```
$prefix = "Blueberry";
$food = ["cake", "cheese", "pie"];
$prefixedFood = array_map(function ($food) use ($prefix) {
  return "${prefix} ${food}";
}, $food); 
```

### 注意：未定义的属性

此错误的含义大致相同，但指的是对象的属性。重复使用上面的示例，此代码将触发错误，因为`counter`尚未设置属性。

```
$obj = new stdclass;
$obj->property = 2342;
foreach ($items as $item) {
    // do something with item
    $obj->counter++;
} 
```

相关问题：

*   [Stackoverflow 上的所有 PHP“注意：未定义变量”问题](https://stackoverflow.com/search?q=Notice%3A+Undefined+Variable+%5Bphp%5D)
*   [“注意：未定义的变量”、“注意：未定义的索引”和“注意：未定义的偏移量”使用 PHP](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)
*   [参考：什么是变量范围，哪些变量可以从哪里访问，什么是“未定义变量”错误？](https://stackoverflow.com/questions/16959576/reference-what-is-variable-scope-and-which-variables-are-accessible-from-where/16959577#16959577)

* * *

## 回答 #15

> 赞同：45
> 
> 时间：2012-10-07T15:29:54.690

### 解析错误：语法错误，意外的 T_PAAMAYIM_NEKUDOTAYIM

范围解析运算符也称为“Paamayim Nekudotayim”，来自希伯来语 פעמיים נקודתיים‎。这意味着“双冒号”。

如果您无意中`::`输入了代码，通常会发生此错误。

相关问题：

*   参考：[PHP 解析/语法错误；以及如何解决它们？](https://stackoverflow.com/q/18050071/367456)
*   [PHP中的两个冒号是什么意思？](https://stackoverflow.com/questions/2903564/what-do-two-colons-mean-in-php)
*   [PHP 中 :: （双冒号）和 -> （箭头）有什么区别？](https://stackoverflow.com/questions/3173501/in-php-whats-the-difference-between-double-colon-and-arrow)
*   [意外的 T_PAAMAYIM_NEKUDOTAYIM，需要 T_NS_Separator](https://stackoverflow.com/questions/8734823/unexpected-t-paamayim-nekudotayim-expecting-t-ns-separator)

文档：

*   [范围解析运算符 (::)](http://php.net/manual/en/language.oop5.paamayim-nekudotayim.php)

* * *

## 回答 #16

> 赞同：44
> 
> 时间：2012-10-07T22:06:37.380

### 注意：使用未定义的常量 XXX - 假定为 'XXX'

或者，在 PHP 7.2 或更高版本中：

### 警告：使用未定义的常量 XXX - 假定为“XXX”（这将在 PHP 的未来版本中引发错误）

当在代码中使用一个标记并且看起来是一个常量，但未定义该名称的常量时，就会出现此通知。

此通知的最常见原因之一是未能引用用作关联数组键的字符串。

例如：

```
// Wrong
echo $array[key];

// Right
echo $array['key']; 
```

另一个常见原因是`$`变量名前面缺少（美元）符号：

```
// Wrong
echo varName;

// Right
echo $varName; 
```

或者您可能拼错了其他一些常量或关键字：

```
// Wrong
$foo = fasle;

// Right
$foo = false; 
```

当您尝试访问由该库定义的常量时，这也可能表明缺少所需的 PHP 扩展或库。

相关问题：

*   [PHP 错误消息“注意：使用未定义的常量”是什么意思？](https://stackoverflow.com/questions/2941169/what-does-the-php-error-message-notice-use-of-undefined-constant-mean)

* * *

## 回答 #17

> 赞同：43
> 
> 时间：2012-12-14T13:18:39.567

### 致命错误：无法重新声明类*[类名]*

### 致命错误：无法重新声明*[函数名称]*

这意味着您要么两次使用相同的函数/类名并需要重命名其中一个，要么是因为您已经使用过`require`或`include`应该在哪里使用`require_once`or `include_once`。

当一个类或函数在 PHP 中声明时，它是不可变的，以后不能用新值声明。

考虑以下代码：

*类.php*

```
<?php

class MyClass
{
    public function doSomething()
    {
        // do stuff here
    }
} 
```

*索引.php*

```
<?php

function do_stuff()
{
   require 'class.php';
   $obj = new MyClass;
   $obj->doSomething();
}

do_stuff();
do_stuff(); 
```

第二次调用`do_stuff()`将产生上述错误。通过更改`require`为`require_once`，我们可以确定包含 的定义的文件`MyClass`只会被加载一次，并且可以避免错误。

* * *

## 回答 #18

> 赞同：36
> 
> 时间：2013-03-21T04:31:16.187

### 解析错误：语法错误，意外的 T_VARIABLE

可能的情况

我似乎无法找到我的代码出错的地方。这是我的完整错误：

> 解析错误：语法错误，第 x 行上的意外 T_VARIABLE

我正在尝试什么

```
$sql = 'SELECT * FROM dealer WHERE id="'$id.'"'; 
```

回答

**解析错误：**程序的语法有问题，例如在语句末尾留下分号，或者像上面的情况一样，缺少`.`运算符。解释器在遇到解析错误时停止运行您的程序。

简而言之，这是一个语法错误，这意味着您的代码中有一些东西阻止它被正确解析并因此无法运行。

**你应该做**的是仔细检查错误所在的行是否有任何简单的错误。

该错误消息意味着在文件的第 x 行中，PHP 解释器希望看到一个左括号，但它却遇到了一个名为`T_VARIABLE`. 那`T_VARIABLE`东西叫做a `token`。它是 PHP 解释器表达程序不同基本部分的方式。当解释器读入一个程序时，它会将你写的内容翻译成一个标记列表。无论您在程序中的何处放置变量，`T_VARIABLE`解释器列表中都会有一个标记。

[**好读：解析器令牌列表**](http://php.net/tokens)

因此，请确保至少`E_PARSE`在您的`php.ini`. 生产脚本中不应存在解析错误。

我总是建议在编码时添加以下语句：

```
error_reporting(E_ALL); 
```

[PHP错误报告](http://php.net/manual/en/function.error-reporting.php)

此外，使用 IDE 是一个好主意，它可以让您在输入时知道解析错误。您可以使用：

1.  [NetBeans](http://netbeans.org/downloads/)（一款精美的免费软件）（我认为最好的）
2.  [PhpStorm](http://www.jetbrains.com/phpstorm/)（戈登叔叔喜欢这个：P，付费计划，包含专有和免费软件）
3.  [Eclipse](http://www.eclipse.org/downloads/packages/eclipse-php-developers/heliosr)（美女与野兽，免费软件）

相关问题：

*   参考：[PHP 解析/语法错误；以及如何解决它们？](https://stackoverflow.com/q/18050071/367456)

* * *

## 回答 #19

> 赞同：35
> 
> 时间：2013-07-13T14:00:02.723

### 注意：未初始化的字符串偏移量：`*`

顾名思义，当您最有可能尝试迭代或从具有不存在键的数组中查找值时，就会发生此类错误。

考虑一下你，正试图展示来自`$string`

```
$string = 'ABCD'; 
for ($i=0, $len = strlen($string); $i <= $len; $i++){
    echo "$string[$i] \n"; 
} 
```

上面的例子会生成（[在线演示](https://eval.in/38350)）：

```
A
B
C
D
Notice: Uninitialized string offset: 4 in XXX on line X 
```

而且，一旦脚本完成回`D`显，您就会得到错误，因为在`for()`循环中，您已经告诉 PHP 向您显示`'ABCD'`存在的第一个到第五个字符串字符，但是由于循环开始计数`0`并回显`D`当它到达 时`4`，它会抛出一个偏移错误。

类似错误：

*   [非法字符串偏移 'option 1'](https://stackoverflow.com/q/14086365/367456)

* * *

## 回答 #20

> 赞同：34
> 
> 时间：2014-10-26T11:20:33.417

### 注意：试图获取非对象错误的属性

当您在没有对象的情况下尝试访问对象的属性时会发生这种情况。

非对象通知的典型示例是

```
$users = json_decode('[{"name": "hakre"}]');
echo $users->name; # Notice: Trying to get property of non-object 
```

在这种情况下，`$users`是一个数组（所以不是一个对象）并且它没有任何属性。

这类似于访问不存在的索引或数组的键（请参阅[注意：未定义索引](https://stackoverflow.com/a/12770836/367456)）。

这个例子被简化了很多。大多数情况下，这样的通知表示一个未经检查的返回值，例如，当一个库返回时，`NULL`如果一个对象不存在或只是一个意外的非对象值（例如，在 Xpath 结果中，具有意外格式的 JSON 结构，具有意外格式的 XML 等）但代码不会检查这种情况。

由于这些非对象通常会被进一步处理，因此在调用非对象上的对象方法时通常会发生致命错误（请参阅：[致命错误：调用成员函数......在非对象上](https://stackoverflow.com/a/12769983/367456)）暂停脚本。

通过检查错误条件和/或变量是否符合预期，可以很容易地防止这种情况发生。这是一个带有**DOMXPath**示例的通知：

```
$result  = $xpath->query("//*[@id='detail-sections']/div[1]");
$divText = $result->item(0)->nodeValue; # Notice: Trying to get property of non-object 
```

问题是访问`nodeValue`第一项的属性（字段），而尚未检查它是否存在于`$result`集合中。相反，通过将变量分配给代码操作的对象来使代码更加明确是值得的：

```
$result  = $xpath->query("//*[@id='detail-sections']/div[1]");
$div     = $result->item(0);
$divText = "-/-";
if (is_object($div)) {
    $divText = $div->nodeValue;
}
echo $divText; 
```

相关错误：

*   [注意：未定义索引](https://stackoverflow.com/a/12770836/367456)
*   [致命错误：在非对象上调用成员函数 ...](https://stackoverflow.com/a/12769983/367456)

* * *

## 回答 #21

> 赞同：29
> 
> 时间：2012-10-07T19:44:32.163

### 警告：open_basedir 限制生效

与文件和目录访问相关的各种功能可能会出现此警告。它警告配置问题。

当它出现时，表示某些文件已被禁止访问。

警告本身不会破坏任何东西，但如果阻止文件访问，脚本通常无法正常工作。

修复通常是更改[PHP 配置](http://www.php.net/manual/en/configuration.php)，调用相关设置[`open_basedir`](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)。

有时使用了错误的文件或目录名称，然后解决方法是使用正确的名称。

相关问题：

*   [open_basedir 限制生效。文件（/）不在允许的路径内：](https://stackoverflow.com/questions/1846882/open-basedir-restriction-in-effect-file-is-not-within-the-allowed-paths)
*   [Stackoverflow 上的所有 PHP“警告：open_basedir 限制生效”问题](https://stackoverflow.com/search?q=%5Bphp%5D+Warning%3A+open_basedir+restriction+in+effect)

* * *

## 回答 #22

> 赞同：29
> 
> 时间：2014-03-11T04:55:52.383

### 解析错误：语法错误，意外的 '['

此错误有两个变体：

### 变体 1

```
$arr = [1, 2, 3]; 
```

这种数组初始化语法只在 PHP 5.4 中引入；它会在此之前的版本上引发解析器错误。如果可能，请升级您的安装或使用旧语法：

```
$arr = array(1, 2, 3); 
```

另请参阅手册中的[此示例](http://docs.php.net/manual/en/language.types.array.php#example-83)。

### 变体 2

```
$suffix = explode(',', 'foo,bar')[1]; 
```

PHP 5.4 中还引入了数组解引用函数结果。如果无法升级，则需要使用（临时）变量：

```
$parts = explode(',', 'foo,bar');
$suffix = $parts[1]; 
```

另请参阅手册中的[此示例](http://docs.php.net/manual/en/language.types.array.php#example-89)。

* * *

## 回答 #23

> 赞同：23
> 
> 时间：2012-12-28T09:51:52.383

### 警告：*[function]*期望参数 1 是资源，给定的布尔值

（警告的更一般的变体[：mysql_fetch_array() 期望参数 1 是资源，给定的布尔值](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770072#12770072)）

资源是PHP中的一种[类型（如字符串、整数或对象）。](http://php.net/manual/en/language.types.resource.php)资源是一个不透明的 blob，它本身没有固有的有意义的价值。资源是特定于一组 PHP 函数或扩展并由其定义的。例如，Mysql 扩展[定义了两种资源类型](http://php.net/manual/en/mysql.resources.php)：

> MySQL 模块中使用了两种资源类型。第一个是数据库连接的链接标识符，第二个是保存查询结果的资源。

cURL 扩展定义了另外[两种资源类型](http://php.net/manual/en/curl.resources.php)：

> ...一个 cURL 句柄和一个 cURL 多句柄。

编辑时`var_dump`，值如下所示：

```
$resource = curl_init();
var_dump($resource);

resource(1) of type (curl) 
```

这就是大多数资源的全部内容，`(1)`某种类型的数字标识符 ( ) ( `(curl)`)。

你随身携带这些资源，并将它们传递给不同的功能，这样的资源对这些功能有意义。通常，这些函数会在后台分配某些数据，而资源只是它们用来在内部跟踪这些数据的参考。

* * *

“ **... 期望参数 1 是资源，给定布尔值**” 错误通常是未经检查的操作的结果，该操作本应创建资源，但却返回`false`。例如，该[`fopen`函数](http://php.net/manual/en/function.fopen.php)具有以下描述：

> **返回值**
> 
> 成功或`FALSE`错误时返回文件指针资源。

所以在这段代码中，`$fp`要么是 a`resource(x) of type (stream)`要么`false`：

```
$fp = fopen(...); 
```

如果您不检查`fopen`操作是成功还是失败，因此是否`$fp`是有效资源或`false`传递`$fp`给另一个需要资源的函数，您可能会收到上述错误：

```
$fp   = fopen(...);
$data = fread($fp, 1024);

Warning: fread() expects parameter 1 to be resource, boolean given 
```

您总是需要错误检查试图分配资源***并可能失败***的函数的返回值：

```
$fp = fopen(...);

if (!$fp) {
    trigger_error('Failed to allocate resource');
    exit;
}

$data = fread($fp, 1024); 
```

相关错误：

*   [警告：mysql_fetch_array() 期望参数 1 是资源，给定的布尔值](https://stackoverflow.com/questions/12769982/reference-what-does-this-error-mean-in-php/12770072#12770072)

* * *

## 回答 #24

> 赞同：22
> 
> 时间：2014-12-28T16:40:40.100

### 警告：非法字符串偏移 'XXX'

当您尝试使用方括号语法访问数组元素时会发生这种情况，但您是在字符串而不是数组上执行此操作，因此该操作显然*没有意义*。

例子：

```
$var = "test";
echo $var["a_key"]; 
```

如果您认为变量应该是一个数组，请查看它的来源并在那里解决问题。

* * *

## 回答 #25

> 赞同：20
> 
> 时间：2014-06-26T05:51:40.513

### 代码不运行/输出了我的 PHP 代码的部分内容

如果您没有从您的 PHP 代码中看到任何结果和/或您在网页中看到部分文字 PHP 源代码输出，那么您可以非常确定您的 PHP 实际上没有被执行。如果您在浏览器中使用查看源代码，您可能会看到整个 PHP 源代码文件。由于 PHP 代码嵌入在`<?php ?>`标签中，浏览器会尝试将其解释为 HTML 标签，结果可能看起来有些混乱。

要实际运行您的 PHP 脚本，您需要：

*   执行脚本的网络服务器
*   将文件扩展名设置为 .php，否则 Web 服务器不会这样解释它*
*   通过网络服务器访问您的 .php 文件

[* 除非你重新配置它，否则一切都可以配置。]

最后一个特别重要。只需双击该文件，就可能会使用以下地址在浏览器中打开它：

```
file://C:/path/to/my/file.php 
```

这完全绕过了您可能正在运行的任何 Web 服务器，并且该文件没有被解释。您需要访问 Web 服务器上文件的 URL，可能类似于：

```
http://localhost/my/file.php 
```

您可能还想检查您是否使用短开标签`<?`而不是`<?php`您的 PHP 配置已关闭短开标签。

另请参阅[PHP 代码没有被执行，而是代码显示在页面上](https://stackoverflow.com/questions/5121495/php-code-is-not-being-executed-i-can-see-it-on-source-code-of-page)

* * *

## 回答 #26

> 赞同：19
> 
> 时间：2014-07-01T09:42:50.003

### 注意：数组到字符串的转换

如果您尝试将数组视为字符串，则会发生这种情况：

```
$arr = array('foo', 'bar');

echo $arr;  // Notice: Array to string conversion
$str = 'Something, ' . $arr;  // Notice: Array to string conversion 
```

数组不能简单地用`echo`'d 或与字符串连接，因为结果定义不明确。PHP 将使用字符串“Array”代替数组，并触发通知指出这可能不是预期的，您应该在此处检查您的代码。你可能想要这样的东西：

```
echo $arr[0];  // displays foo
$str = 'Something ' . join(', ', $arr); //displays Something, foo, bar 
```

或者循环数组：

```
foreach($arr as $key => $value) {
    echo "array $key = $value";
    // displays first: array 0 = foo
    // displays next:  array 1 = bar
} 
```

如果此通知出现在您意想不到的地方，则表示您认为是字符串的变量实际上是数组。这意味着您的代码中有一个错误，它使该变量成为数组而不是您期望的字符串。

* * *

## 回答 #27

> 赞同：18
> 
> 时间：2015-09-20T16:40:26.730

### 警告：mysql_connect(): 用户 'name'@'host' 的访问被拒绝

当您使用无效或缺少凭据（用户名/密码）连接到 MySQL/MariaDB 服务器时，会显示此警告。所以这通常*不是*代码问题，而是服务器配置问题。

*   [`mysql_connect("localhost", "user", "pw")`](http://php.net/mysql_connect)有关示例，请参见手册页。

*   检查您是否实际使用了 a`$username`和`$password`。

    *   不使用密码即可获得访问权限的情况并不常见——这就是警告：说`(using password: NO)`.
    *   只有本地测试服务器通常允许使用用户名`root`、无密码和`test`数据库名称进行连接。

    *   您可以使用命令行客户端测试它们是否**真的正确：**
        `mysql --user="username" --password="password" testdb`

    *   用户名和密码*区分大小写，**不会*忽略空格。如果您的密码包含类似的元字符`$`，请将它们转义，或将密码放在[单引号](https://stackoverflow.com/questions/3446216/what-is-the-difference-between-single-quoted-and-double-quoted-strings-in-php)中。

    *   大多数共享主机提供商预先声明与 unix 用户帐户相关的 mysql 帐户（有时只是前缀或额外的数字后缀）。请参阅文档以获取模式或文档，以及用于设置密码的 CPanel 或任何界面。

    *   请参阅 MySQL 手册中的使用命令行[添加用户帐户。](https://dev.mysql.com/doc/refman/5.1/en/adding-users.html)当以*管理员用户*身份连接时，您可以发出如下查询：
        `CREATE USER 'username'@'localhost' IDENTIFIED BY 'newpassword';`

    *   或者使用[Adminer](https://www.adminer.org/)或[WorkBench](http://downloads.mysql.com/archives/workbench/)或任何其他图形工具来创建、检查或更正帐户详细信息。

    *   如果您无法修复您的凭据，那么请求互联网“请帮助”将无效。只有您和您的托管服务提供商拥有诊断和修复问题的权限和足够的访问权限。

*   使用提供商提供的主机名验证您是否**可以访问**数据库服务器：
    `ping dbserver.hoster.example.net`

    *   直接在您的网络服务器上通过 SSH 控制台进行检查。从本地开发客户端到共享托管服务器的测试很少有意义。

    *   通常您只希望服务器名称为`"localhost"`，它通常在可用时使用本地命名套接字。其他时候你可以尝试`"127.0.0.1"`作为后备。

    *   如果您的 MySQL/MariaDB 服务器侦听不同的端口，则使用`"servername:3306"`.

    *   如果失败，那么可能是防火墙问题。（题外话，不是编程问题。不可能进行远程猜测。）

*   使用诸如or之类的**常量**时，请检查它们是否实际已[定义](http://php.net/define)。`DB_USER``DB_PASSWORD`

    *   如果你得到 a`"Warning: Access defined for 'DB_USER'@'host'"`和 a `"Notice: use of undefined constant 'DB_PASS'"`，那就是你的问题。

    *   验证您的 eg`xy/db-config.php`是否实际包含在内，等等。

*   检查正确设置的**[`GRANT`](http://dev.mysql.com/doc/refman/5.6/en/grant.html)权限**。

    *   `username`有一个+对是不够的`password`。

    *   每个 MySQL/MariaDB 帐户都可以附加一组权限。

    *   这些可以限制您可以连接到哪些数据库，连接可能来自哪个客户端/服务器，以及允许哪些查询。

    *   [`mysql_query`](http://php.net/mysql_query)因此，如果您无权访问`SELECT`特定表或`INSERT`/`UPDATE`以及更常见的`DELETE`任何内容，则“访问被拒绝”警告也可能会出现在调用中。

    *   您可以在每个命令行客户端使用*管理员帐户连接时*[调整帐户权限](https://stackoverflow.com/questions/5016505/mysql-grant-all-privileges-on-database)，查询如下： *`GRANT ALL ON yourdb.* TO 'username'@'localhost';`*

**   如果警告首先出现，`Warning: mysql_query(): Access denied for user ''@'localhost'`那么您可能有一个[php.ini-preconfigured account/password pair](http://php.net/manual/en/mysql.configuration.php)。

    *   检查`mysql.default_user=`并`mysql.default_password=`具有有意义的值。

    *   通常这是提供者配置。因此，请联系他们的支持以解决不匹配问题。

        *   查找您的共享主机提供商的文档：

    *   例如[HostGator](http://support.hostgator.com/articles/specialized-help/technical/sql-errors)、[GoDaddy](https://www.godaddy.com/help/connecting-to-mysql-using-php-216)、[1and1](https://hilfe-center.1und1.de/hosting/skript--und-programmiersprachen-c10082634/php-c10082686/problemloesung-c10085144/haeufige-mysql-fehlermeldungen-in-php-skripten-oder--programmen-a10791915.html)、[DigitalOcean](https://www.digitalocean.com/community/questions/access-denied-for-installing-mysql)、[BlueHost](https://my.bluehost.com/cgi/help/2213)、[DreamHost](http://wiki.dreamhost.com/MySQL)、[MediaTemple](https://mediatemple.net/community/products/dv/204642990/why-can't-i-connect-to-my-mysql-database-from-php)、[ixWebhosting](http://www.inmotionhosting.com/support/community-support/databases/1045-access-denied-for-user-mysql-error)、[lunarhosting](http://www.lunarforums.com/php-and-mysql-support/trouble-connecting-to-my-sql-db/)，或者只是谷歌你的。

    *   否则，请通过他们的支持渠道咨询您的虚拟主机提供商。

        *   请注意，您可能还*耗尽了可用的连接池*。对于太多并发连接，您将收到拒绝访问警告。（您必须调查设置。这是一个离题的服务器配置问题，而不是编程问题。）

    *   您的 libmysql 客户端版本可能与数据库服务器*不兼容。*通常，可以使用在驱动程序中编译的 PHP 访问 MySQL 和 MariaDB 服务器。如果您有自定义设置、过时的 PHP 版本、更新的数据库服务器或明显过时的数据库服务器 - 那么版本不匹配可能会阻止连接。（不，你必须自己调查。没人能猜到你的设置）。* 

 *更多参考：

*   [Serverfault: mysql access denied for 'root'@'name of the computer'](https://superuser.com/questions/584106/mysql-access-denied-for-rootname-of-the-computer)
*   [警告：mysql_connect()：访问被拒绝](https://stackoverflow.com/questions/18782452/warning-mysql-connect-access-denied)
*   [警告：mysql_select_db() 用户 ''@'localhost' 的访问被拒绝（使用密码：否）](https://stackoverflow.com/questions/15531530/warning-mysql-select-db-access-denied-for-user-localhost-using-password)
*   [使用 PHPMyAdmin 拒绝用户 'root'@'localhost' 的访问](https://stackoverflow.com/questions/11482970/1045-access-denied-for-user-rootlocalhost-using-password-no)

> 顺便说一句，您可能不想再使用[`mysql_*`函数了](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)。新人经常迁移到[mysqli](http://php.net/manual/en/mysqlinfo.api.choosing.php)，但这同样乏味。而是阅读[PDO 和准备好的语句](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。
> `$db = new PDO("mysql:host=localhost;dbname=testdb", "username", "password");`

* * *

## 回答 #28

> 赞同：14
> 
> 时间：2019-12-03T14:02:44.483

### 不推荐使用：不推荐使用带有花括号的数组和字符串偏移访问语法

`{}`在 PHP 7.4.0 之前，可以通过花括号访问字符串偏移量和数组元素：

```
$string = 'abc';
echo $string{0};  // a

$array = [1, 2, 3];
echo $array{0};  // 1 
```

这自 PHP 7.4.0 起已被弃用并生成警告：

> 不推荐使用：不推荐使用带有花括号的数组和字符串偏移访问语法

您必须使用方括号`[]`来访问字符串偏移量和数组元素：

```
$string = 'abc';
echo $string[0];  // a

$array = [1, 2, 3];
echo $array[0];  // 1 
```

此更改的[RFC](https://wiki.php.net/rfc/deprecate_curly_braces_array_access)链接到试图以机械方式修复此问题的 PHP[脚本。](https://gist.github.com/theodorejb/763b83a43522b0fc1755a537663b1863)

* * *

## 回答 #29

> 赞同：13
> 
> 时间：2014-02-02T05:12:07.517

### 警告：除以零

警告消息“除以零”是新 PHP 开发人员最常问的问题之一。该错误不会导致异常，因此，一些开发者偶尔会通过在表达式前添加错误抑制运算符@来抑制警告。例如：

```
$value = @(2 / 0); 
```

但是，与任何警告一样，最好的方法是追踪警告的原因并解决它。警告的原因将来自您尝试除以 0、等于 0 的变量或尚未分配的变量（因为 NULL == 0）的任何实例，因为结果将是“未定义”。

要更正此警告，您应该重写您的表达式以检查该值是否不为 0，如果是，请执行其他操作。如果该值为零，则您不应该除以，或者您应该将值更改为 1，然后除以除以仅除以附加变量的结果。

```
if ( $var1 == 0 ) { // check if var1 equals zero
    $var1 = 1; // var1 equaled zero so change var1 to equal one instead
    $var3 = ($var2 / $var1); // divide var1/var2 ie. 1/1
} else {
    $var3 = ($var2 / $var1); // if var1 does not equal zero, divide
} 
```

相关问题：

*   [警告：除以零](https://stackoverflow.com/questions/5539002/warning-division-by-zero)
*   [警告：PHP 和 MySQL 上的零除法](https://stackoverflow.com/questions/11592602/warning-division-by-zero-working-on-php-and-mysql)
*   [WordPress主题中除以零错误](https://stackoverflow.com/questions/6667601/division-by-zero-error-in-wordpress-theme)
*   [如何抑制“除以零”错误](https://stackoverflow.com/questions/3731710/how-to-suppress-the-division-by-zero-error-and-set-the-result-to-null-for-the)
*   [如何捕捉除以零？](https://stackoverflow.com/questions/3071067/how-to-catch-a-division-by-zero)

* * *

## 回答 #30

> 赞同：8
> 
> 时间：2014-02-21T18:52:49.970

### 严格标准：非静态方法*[<class>::<method>]*不应被静态调用

当您尝试在类上调用非静态方法时发生，因为它是静态的，并且您的设置`E_STRICT`中也有标志`error_reporting()`。

例子 ：

```
class HTML {
   public function br() {
      echo '<br>';
   }
} 
```

`HTML::br()`或者`$html::br()`

您实际上可以通过不添加`E_STRICT`来避免此错误`error_reporting()`，例如

```
error_reporting(E_ALL & ~E_STRICT); 
```

因为对于 PHP 5.4.0 及更高版本，`E_STRICT`包含在`E_ALL`[ [ref](http://dk1.php.net/manual/en/migrating5.errorrep.php) ] 中。但这不是可取的。解决方案是将您预期的静态函数定义为实际的`static`：

```
public static function br() {
  echo '<br>';
} 
```

或按惯例调用该函数：

```
$html = new HTML();
$html->br(); 
```

* * *

相关问题：

*   [如何解决“在 PHP 5.4 中不应静态调用非静态方法 xxx:xxx()？](https://stackoverflow.com/questions/10768576/how-can-i-solve-non-static-method-xxxxxx-should-not-be-called-statically-in)

* * *

## 回答 #31

> 赞同：8
> 
> 时间：2019-06-18T23:03:53.150

### 致命错误：类 Closure 的对象无法转换为字符串

这意味着您没有执行匿名函数（或闭包）。

此示例使用箭头函数将引发错误：

```
echo $fn = fn($x = 42) => $x; 
```

或者对于任何匿名函数

```
echo function($x = 42) { return $x; }; 
```

要解决此错误，您需要执行闭包。

```
echo $fn = (fn($x = 42) => $x)(30); // take notice of the 2 sets of brackets

echo (function($x = 42) { return $x; })(30); 
```

这种语法称为[IIFE](https://en.wikipedia.org/wiki/Immediately_invoked_function_expression)，它是[在 PHP 7 中添加的](https://stackoverflow.com/a/35044545/1839439)。

* * *

## 回答 #32

> 赞同：7
> 
> 时间：2018-12-19T01:23:40.927

### HTTP 错误 500 - 内部服务器错误

HTTP 状态代码 500 和典型的 Apache 或浏览器警告是一个非常广泛的消息。这不是真正的错误。要确定它是网络服务器配置错误 ( `.htaccess`) 还是 PHP 致命错误，您必须查看**`error.log`**.

[![阿帕奇错误页面：](../Images/39a29db6d2bbdfcb02ccbf5c9f1674c6.png)](https://i.stack.imgur.com/iyGWj.jpg)

您通常可以在以下位置找到网络服务器日志：

*   `/var/log/apache2`在 Linux 服务器上，通常用于本地和虚拟主机。
*   `/var/www/_user12345_/logs`或类似的共享托管计划。
    通常`logs/`每个文件夹旁边都有一个目录`htdocs/`。
*   `C:\xampp\apache\logs\error.log`用于Apache+PHP的[WAMP](https://stackoverflow.com/questions/19713001/where-can-i-find-the-wamp-error-log) / [XAMPP发行版。](https://stackoverflow.com/questions/3719549/where-does-phps-error-log-reside-in-xampp)
*   或者，只需使用文件搜索功能来查找名为“error.log”的任何内容。
    或者查看您的 Apache`httpd.conf`及其`ErrorLog`指令。
*   `/var/log/nginx/nginx_error.log`对于[NGINX](https://stackoverflow.com/questions/1706111/where-can-i-find-the-error-logs-of-nginx-using-fastcgi-and-django)。
*   `C:\inetpub\logs\LogFiles`对于[IIS](https://stackoverflow.com/questions/6426375/where-can-i-find-the-iis-logs)。
*   幸运的是，这仍然不常见，但`journalctl -r -u apache2.service`也可以保存 Linux 设置的部分日志。

这是一个文本文件。搜索与错误时间最接近的条目，并使用错误消息的重要部分（从“PHP 错误：...”到“在线...”）进行进一步的谷歌搜索。

> `[Mon 22:10] [:error] [pid 12345] [client 127.0.0.1] FastCGI: server "/fcgi/p73" stderr: PHP message:`**`PHP Error: Unfiltered input`**`variable $_JSON['pokestop_lng'] in filyfile.php on line 845`

对于 FPM 设置，您通常会在这里看到致命的 PHP 错误。而较旧的 mod_php（共享主机）配置经常混合警告和通知（通常也值得检查）。

如果未配置为使用系统或 Apache 日志记录机制，您可能还需要查看[PHP 的 error.log](https://stackoverflow.com/questions/5127838/where-does-php-store-the-error-log-php5-apache-fastcgi-cpanel)。通常，保留默认值并启用`error_display`+`error_reporting`以显示具体错误更简单。毕竟 HTTP 500 包罗万象的页面只是[PHP 的白屏死机的](https://stackoverflow.com/questions/1475297/phps-white-screen-of-death)一种变体。

也可以看看：

*   [php 文件的 500 内部服务器错误，而不是 html](https://stackoverflow.com/questions/17693391/500-internal-server-error-for-php-file-not-for-html)
*   [如何让 PHP 显示错误而不是给我 500 Internal Server Error](https://stackoverflow.com/questions/2687730/how-can-i-make-php-display-the-error-instead-of-giving-me-500-internal-server-er)
*   [如何在 IIS7 上显示和记录 PHP 错误？](https://serverfault.com/questions/19561/how-can-i-display-and-log-php-errors-on-iis7)
*   [如何修复 WordPress 中的 500 内部服务器错误](https://www.wpbeginner.com/wp-tutorials/how-to-fix-the-internal-server-error-in-wordpress/)

* * *

## 回答 #33

> 赞同：6
> 
> 时间：2017-11-07T14:27:54.193

### 致命错误：[TraitA] 和 [TraitB] 在 [ClassC] 的组合中定义了相同的属性 ([$x])

当一个类尝试[`use`多个 Traits](http://php.net/manual/en/language.oop5.traits.php#language.oop5.traits.multiple)时发生，其中两个或多个 Traits[定义了](http://php.net/manual/en/language.oop5.traits.php#language.oop5.traits.properties)同名的属性，并且该属性具有不同的初始值。

例子：

```
<?php
trait TraitA
{
    public $x = 'a';
}
trait TraitB
{
    public $x = 'b';
}
class ClassC
{
    use TraitA, TraitB;
} 
```

**有问题的：**虽然可以解决[竞争方法](http://php.net/manual/en/language.oop5.traits.php#language.oop5.traits.conflict)之间的冲突，但目前没有语法可以解决两个竞争属性之间的冲突。此时唯一的解决方案是[重构](https://en.wikipedia.org/wiki/Code_refactoring)；即，避免产生致命错误的属性名称之间的冲突。

* * *

相关问题：

*   [PHP Traits：如何解决属性名称冲突？](https://stackoverflow.com/questions/41679384/php-traits-how-to-resolve-a-property-name-conflict)
*   [特征 - 与父类的属性冲突](https://stackoverflow.com/questions/24158392/traits-property-conflict-with-parent-class)

* * *

## 回答 #34

> 赞同：5
> 
> 时间：2018-10-12T02:09:58.443

### 警告：*函数*() 期望参数*X*为布尔值（或整数、字符串等）

如果将错误类型的参数传递给函数——而 PHP 无法自动转换它——则会引发警告。此警告标识出问题的参数以及预期的数据类型。解决方案：将指示的参数更改为正确的数据类型。

* * *

例如这段代码：

```
echo substr(["foo"], 23); 
```

输出结果：

> PHP 警告：substr() 期望参数 1 是字符串，给定数组

* * *

## 回答 #35

> 赞同：4
> 
> 时间：2019-05-06T19:56:46.937

### 警告：count()：参数必须是数组或实现 Countable 的对象

不言自明；传递给`count()`函数的参数必须是可数的，通常是数组。

可能的问题是传递了诸如字符串或整数之类的标量值，或者传递了未实现`Countable`接口的对象。在有问题的变量上使用`var_dump()`可以显示是否是这种情况。

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2020-01-06T21:45:30.997

### 致命错误：未定义的类常量

此错误意味着您尝试使用不存在的[类常量。](https://www.php.net/manual/en/language.oop5.constants.php)与其他“未定义”通知和警告不同，这是一个致命错误，将立即停止脚本。

首先要检查的应该是印刷错误。确认常量是在类中定义的，并且使用适当的命名空间调用它。还要确认已包含所有适当的文件以解析常量。

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2021-06-01T00:06:00.803

### 致命错误：未捕获的类型错误：some_function()：参数 #1 必须是 x 类型，给定 y

这个错误解释了自己。您的代码尝试调用`some_function()`并传递错误类型的数据作为参数之一。例如：

```
<?php declare(strict_types=1);

function multiply(int $x, int $y) { return $x * $y; }

echo multiply("3", 4); 
```

因为被调用函数的第一个参数是`int`标量类型，并且调用是在一个启用了严格类型（`stict_types=1`）的文件中，所以在传递 a`string`给它时会出现类型错误：

> 致命错误：未捕获的类型错误：multiply()：参数 #1 ($x) 必须是整数类型，字符串在...

这个[例子在 3v4l.org 上](https://3v4l.org/SJvqd)。**

# python - 用户可以在不下载 Python 的情况下打开我的程序吗？

> ID：12769987
> 
> 赞同：4
> 
> 时间：2012-10-07T15:11:15.580
> 
> 标签：python, compilation, cross-platform, cross-compiling

我正在用 python 制作一个程序，但是一旦我完成了程序，用户是否必须下载 python 环境才能使用我的程序，或者编译后它是否可以在没有 python 环境的情况下工作？此外，它会自动跨平台还是我必须下载转换程序才能使其适用于 Linux、Mac OS 和 Windows？我是这门语言的新手，所以这让我很困惑。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-07T15:20:09.250

许多 Linux 系统已经安装了 Python。但是，如果不是，有一些工具可以提供帮助：

*   [适用于 Windows、Linux 和 Mac OS X 的pyinstaller](http://www.pyinstaller.org/)（不适用于 Python 3）
*   适用于 Windows 和 Linux 的[bbfreeze](http://pypi.python.org/pypi/bbfreeze/)
*   适用于 Windows 的[py2exe](http://www.py2exe.org/)
*   [冻结](http://wiki.python.org/moin/Freeze)Linux
*   Mac OS X 的[py2app](http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:14:56.510

看看[py2exe](http://www.py2exe.org/) for windows, linux and mac 很可能已经预装了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-07T15:19:35.770

他们需要一个 python 解释器来使用你的程序，除非你把你的 python 脚本变成一个 windows 可执行文件。一种方法是使用[Py2exe](http://www.py2exe.org)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T15:52:32.987

这取决于您在程序中包含哪些 3rd 方库。

例如，我从未设法通过使用 py2exe 使用 PyQt lib 制作 Windows 可执行文件。但这是 2-3 年前的事了，情况可能已经发生了变化。

也不要在你的程序中硬编码路径并使用像[os.path.join 这样的函数](http://docs.python.org/library/os.path.html#os.path.join)

不要对配置文件和东西做出假设。请在运行时检查程序运行的平台并采取相应措施。

In general, your biggest problem will be the Windows platform.

# sql - 如何一次执行多个存储过程？

> ID：12769991
> 
> 赞同：3
> 
> 时间：2012-10-07T15:11:47.983
> 
> 标签：sql, sql-server, sql-server-2005

我想知道有什么方法可以一次执行所有存储过程。目前我正在使用`exec "Stored Procedure name"`命令执行每个存储过程。我有超过 200 个存储过程要在我的数据库上执行。

是否有任何简单的方法可以一次执行所有这些存储过程，因为我很难跟踪它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-07T15:14:35.820

我建议您编写一个调用其他存储过程的存储过程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-07T15:14:58.053

将所有存储过程放在一个存储过程中，

```
CREATE PROCEDURE CallAllProcedure
AS
BEGIN
    CALL Proc1
    CALL Proc2
END 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-07T15:17:57.947

假设您使用的是查询分析器，只需在所有存储的 proc 和运行脚本之间放置一个 GO。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-07T16:29:52.043

如果你想并行执行它们，你可以创建一个 SQLJob 并安排它们同时执行。下面的链接是 SQL 作业的一般用法。

[http://msdn.microsoft.com/en-us/library/ms190268.aspx](http://msdn.microsoft.com/en-us/library/ms190268.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T16:10:51.487

您可以从查询 type='P' 的 sys.objects 表中选择所有存储过程名称。之后就可以对每个存储过程名称使用游标来执行了。但是带参数的存储过程呢？您还必须提供参数值以避免错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-16T03:01:26.757

您可以使用服务代理来执行此异步操作，但我认为同时运行 200 个存储过程不是一个好主意，除非您确定数据库上不会有任何争用

# google-maps-api-3 - 我的代码可以获取 Google 地图 API 版本号吗？

> ID：12769992
> 
> 赞同：4
> 
> 时间：2012-10-07T15:11:54.223
> 
> 标签：google-maps-api-3

加载 Google 地图 API 时，我没有使用 v 参数。因此，我总是得到 API 的“发布”版本。

我的应用程序有一个“关于”功能，我想显示 API 版本号。

有没有办法让我获得这个价值，或者这会是一个增强请求吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T00:01:50.820

只需使用：`google.maps.version`

[**http://jsfiddle.net/doktormolle/anN4U/**](http://jsfiddle.net/doktormolle/anN4U/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T15:19:52.133

有一种方法可以从加载的脚本的文件名中获取它：

```
//*************************************************************
// API version from post on Google Maps API group by bratliff
var file,loop;
var tags=document.getElementsByTagName("SCRIPT");
// alert("tags="+tags.length);

for (loop=0;tags[loop];loop++)
{
       if (file=tags[loop].src.match(/http:\/\/[^\&\?]+\.google\.[^\&\?]+\/([0-9]+)\/[^\&\?]+\/main\.js/)) {
          //alert(file[1]);
          document.getElementById("apiv").innerHTML = "API v2."+file[1];
       }
}
//************************************************************* 
```

您应该能够对 API v3 执行类似的操作。

# python - scrapy - 获取最终重定向的 URL

> ID：12769994
> 
> 赞同：5
> 
> 时间：2012-10-07T15:12:23.593
> 
> 标签：python, scrapy

我正在尝试在 scrapy 中获取最终重定向的 URL。例如，如果锚标记具有特定格式：

```
<a href="http://www.example.com/index.php" class="FOO_X_Y_Z" /> 
```

然后我需要获取 URL 重定向到的 URL（如果是，如果是 200 则 OK）。例如，我得到适当的锚标签，如下所示：

```
def parse (self, response)  
    hxs     = HtmlXPathSelector (response);
    anchors = hxs.select("//a[@class='FOO_X_Y_Z']/@href");

    // Lets assume anchor contains the actual link (http://...)
    for anchor in anchors:
        final_url = get_final_url (anchor);   // << I would need something like this

        // Save final_url 
```

因此，如果我访问了`http://www.example.com/index.php`，那将通过 10 次重定向发送给我，最后它会停止`http://www.example.com/final.php`- 这就是我需要`get_final_url()`返回的内容。

我想破解我的解决方案，但我在这里问scrapy是否已经提供了一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:29:40.360

同样，假设`anchor`包含一个实际的 URL，我用**urllib2**完成了它：

```
def parse (self, response)  
    hxs     = HtmlXPathSelector (response);
    anchors = hxs.select("//a[@class='FOO_X_Y_Z']/@href");

    // Lets assume anchor contains the actual link (http://...)
    for anchor in anchors:
        final_url = urllib2.open(anchor, None, 1).geturl()

        // Save final_url 
```

`urllib2.open()`返回一个带有两个附加方法的类文件对象，其中一个是`geturl()`返回最终 URL（在所有重定向之后）。它不是 Scrapy 的一部分，但它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T00:04:59.757

我使用`response.headers`它将返回一个信息列表。新的 url 值位于“Location”键旁边。

```
In [1]: response.headers
Out[1]: 
{'Date': 'Thu, 09 Jun 2016 00:18:18 GMT',
 'Location': 'https:/www.protiviti.com/en-US/Pages/default.aspx',
 'Server': 'nginx/1.9.1',
 'X-Ms-Invokeapp': '1; RequireReadOnly'} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-10-07T15:30:32.763

这很简单：

```
print response.url #(inside parse() ) 
```

# android - 无法暂停活动 - 在 android 中播放 bgm 时出现非法状态异常

> ID：12769996
> 
> 赞同：1
> 
> 时间：2012-10-07T15:12:40.187
> 
> 标签：android, android-mediaplayer, illegalstateexception

（我已经解决了，只需向下滚动直到 EDIT 2）

我有一个应用程序，在打开时会循环播放背景音乐。我决定我可以更进一步，在应用程序暂停时暂停 bgm，并在恢复时暂停的地方播放。它工作正常。

但是，我遇到的问题是退出应用程序时。它给出了错误： `10-07 22:50:04.535: E/AndroidRuntime(5852): java.lang.RuntimeException: Unable to pause activity {com.cs119.megamanstrikes/com.cs119.megamanstrikes.MainActivity}: java.lang.IllegalStateException`

我的 onCreate 看起来像：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    backgroundMusic = MediaPlayer.create(MainActivity.this, R.raw.mmbn_3);
    backgroundMusic.setLooping(true);
    backgroundMusic.start();

    Button start = (Button) findViewById(R.id.Start);
    Button highScore = (Button) findViewById(R.id.highScore);
    Button quit = (Button) findViewById(R.id.quit);

    start.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v){
            startGame();
        }
    });

    highScore.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v){
            highScore();
        }
    });

    quit.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v){
            quit();
        }
    });

} 
```

这些是 onPause 和 onResume 的覆盖：

```
@Override 
public void onPause(){
   super.onPause();
   backgroundMusic.pause();
}

@Override
public void onResume(){
    super.onResume();
    backgroundMusic.start();
} 
```

当用户点击退出按钮或后退按钮时：

```
@Override
public void onBackPressed(){
    quit();
}

public void quit(){
    quitDialog();
}

private void quitDialog() {
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(this);

    // Set title.
    alertDialogBuilder.setTitle("QUIT");

    // Set dialog message.
    alertDialogBuilder
            .setMessage("Are you sure you want to quit?")
            .setCancelable(false)
            .setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            //backgroundMusic.stop();
                            backgroundMusic.release();
                            finish();
                        }
                    })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    // if this button is clicked, resume teh gaem
                    //inputName();
                }
            });

    // Create alert dialog.
    AlertDialog alertDialog = alertDialogBuilder.create();

    // Show it.
    alertDialog.show();
} 
```

单击“是”退出游戏后，应用程序冻结并强制关闭。这是完整的 LogCat 错误

```
10-07 22:50:04.535: E/AndroidRuntime(5852): FATAL EXCEPTION: main
10-07 22:50:04.535: E/AndroidRuntime(5852): java.lang.RuntimeException: Unable to pause activity {com.cs119.megamanstrikescom.cs119.megamanstrikes.MainActivity}:java.lang.IllegalStateException
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2358)
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2315)
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2295)
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.app.ActivityThread.access$1700(ActivityThread.java:117)
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:946)
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.os.Handler.dispatchMessage(Handler.java:99)
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.os.Looper.loop(Looper.java:123)
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.app.ActivityThread.main(ActivityThread.java:3691)
10-07 22:50:04.535: E/AndroidRuntime(5852): at java.lang.reflect.Method.invokeNative(Native Method)
10-07 22:50:04.535: E/AndroidRuntime(5852): at java.lang.reflect.Method.invoke(Method.java:507)
10-07 22:50:04.535: E/AndroidRuntime(5852): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
10-07 22:50:04.535: E/AndroidRuntime(5852): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
10-07 22:50:04.535: E/AndroidRuntime(5852): at dalvik.system.NativeStart.main(Native Method)
10-07 22:50:04.535: E/AndroidRuntime(5852): Caused by: java.lang.IllegalStateException
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.media.MediaPlayer._pause(Native Method)
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.media.MediaPlayer.pause(MediaPlayer.java:1001)
10-07 22:50:04.535: E/AndroidRuntime(5852): at com.cs119.megamanstrikes.MainActivity.onPause(MainActivity.java:163)
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.app.Activity.performPause(Activity.java:3877)
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
10-07 22:50:04.535: E/AndroidRuntime(5852): at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2345)
10-07 22:50:04.535: E/AndroidRuntime(5852): ... 12 more 
```

我也尝试过`backgroundMusic.stop();`代替`backgroundMusic.pause()`onPause 方法，但是，在恢复应用程序时，即使`backgroundMusic.play()`onResume() 方法中存在声音也不会播放。

我还注意到，无论我在 onPause() 和 onResume() 中放置什么，错误仍然存​​在，我尝试退出应用程序。

谢谢您的帮助。

编辑 1：我将 system.out 行放在 onPause 和 onResume 覆盖中，以便我可以看到它何时执行。启动应用程序时，onResume 执行，关闭应用程序时，onPause 执行。我很困惑为什么会发生这种情况，因为 onResume 与 onCreate 不同。

编辑2：好的，我已经解决了这个问题。问题主要来自退出按钮，因为它执行这些代码行：

```
backgroundMusic.stop();
backgroundMusic.release();
finish(); 
```

它以某种方式进入 onPause 方法并尝试执行`backgroundMusic.pause()`。现在应用程序强制关闭，因为 backgroundMusic 已经发布并且无法完成命令`backgroundMusic.pause()`。

我通过创建另一个全局变量来解决这个问题： boolean flag = false;

该标志检查是否选择了退出按钮以及用户是否想要退出游戏。一旦用户想要退出游戏，它就会将该标志设置为真。

```
flag = true;
backgroundMusic.stop();
backgroundMusic.release();
finish(); 
```

我将标志设置为true，以便当它从finish（）进入onPause（）方法时（关于Android的活动生命周期我可能是错误的，但似乎onPause（）在finish（）之内或之后执行)，这将执行：

```
@Override 
public void onPause(){
    super.onPause();
    if(!flag){
        if(backgroundMusic.isPlaying()){
            backgroundMusic.pause();
        }
    }

} 
```

在这里，如果用户想退出游戏，它只会执行 super.onPause()。否则，如果游戏真的被暂停（通过主页按钮或其他东西），那么 Flag 仍然是 false 并且背景音乐将被暂停。

我还修改了 onResume() 以确保安全：

```
@Override
public void onResume(){
    super.onResume();
    if(!backgroundMusic.isPlaying()){
        backgroundMusic.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:19:30.337

根据 Android 文档：

“如果内部播放器引擎尚未初始化或已释放，则出现 IllegalStateException。”

我想说首先确保你已经初始化和/或没有释放播放器。

您还需要在 onPause() 中释放播放器，除非您有非常特殊的要求来保留它。

此外，如果您为 MediaPLayer 使用静态全局变量，这可能是问题所在。仔细检查它是如何被初始化和释放的，尤其是在类和类似的东西之间切换时。

如果您确实需要保存状态，那么您可以使用`getCurrentPosition()`onPause() 和 onResume() 中的方法保存轨道的当前位置，您可以使用 `seekTo (int msec)`方法并传入从 getCUrrentPosition() 获得的值，以便您可以从中断的地方继续播放。

这些功能的官方文档在[这里](http://developer.android.com/reference/android/media/MediaPlayer.html#getCurrentPosition%28%29)和[这里](http://developer.android.com/reference/android/media/MediaPlayer.html#seekTo%28int%29)

# java - Java Swing，Corba 对象 - 如何在 DefaultListModel 中存储 Corba 对象？

> ID：12769997
> 
> 赞同：1
> 
> 时间：2012-10-07T15:12:46.750
> 
> 标签：java, c++, swing, corba, defaultlistmodel

我有这样的 IDL 接口：

```
interface User
{
    string toString();
    //..
};

interface Group
{
    typedef sequence<User> Users;
    Users getUsers();

}; 
```

当我将它翻译成 C++ 时，我得到了这样的结果：

```
// ...
Group::Users* GroupImpl::getUsers()
{
    // ..return sequence of 'User'-objects
} 
```

在客户端（用 Java 编写）我想向我的用户展示。我这样做：

```
public void showAllUsers() 
{
    User[] users = interface_obj.getUsers();
    if(users.length != 0)
    {
        DefaultListModel model = new DefaultListModel();
        for(int i=0; i<users.length; i++)
            model.addElement(users[i]);
        this.usersList.setModel(model);
    }
} 
```

this.usersList 是一个`JList`.

当我像我写的那样这样做时，我只看到我的用户对象的 IOR：

```
IOR :0123405948239481293812312903891208320131293812381023
IOR: 0092930912617819919191818173666288810010199181919919 
```

等等 ...

如何做到这一点，看看他们的 toString(); DefaultListModel 中的表示？我不想这样做：

`model.addElement(users[i].toString());`

那不是重点。当我使用 RMI 而不是 CORBA 时，`model.addElement(users[i]);`这正是我所需要的，因为我看到了用户字符串表示。但我需要使用 CORBA 并存储在 DefaultListModel corba-user- **objects**中，而不是字符串。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T15:19:50.373

我猜存根的 toString() 方法实际上并没有调用远程 CORBA 对象的 toString() 方法。尝试使用另一个方法名称（如`getName()`），并使用调用此方法的自定义渲染器。

也就是说，将 User 建模为远程 CORBA 对象真的是个好主意吗？这将导致大量或远程方法调用只是为了显示用户的姓名，而这些方法调用基本上是您无法控制的，因为 Swing 组件会生成它们。你不应该改用 DTO 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T15:21:37.873

一种方法是创建一个 UserView 类，您将其实例放入列表模型中：

```
public class UserView {

    private final User corbaUser;

    public UserView(User corbaUser) {
        this.corbaUser = corbaUser
    }

    @Override
    public String toString() {
       String ret = null;
       // construct the string as you want here
       return ret;
    }
} 
```

编辑：

正如 JB Nizet 所指出的，请小心您放入 toString() 中的代码，因为每次需要显示列表时都会调用它 - 或者显示最新数据可能正是您想要的。