# StackOverflow 问答 13465000-13465999

# python - 没有模板命名索引错误

> ID：13465000
> 
> 赞同：3
> 
> 时间：2012-11-20T00:48:12.553
> 
> 标签：python, web.py, pythonanywhere

我是 Python 新手，我正在尝试使用 Python Anywhere 运行 web.py 应用程序，但我不断收到`No template named index`错误消息。我已经修改`wsgi.py`为使用以下内容：

```
import web
import MySQLdb

urls = (
  '/', 'index'
)

render = web.template.render('/home/user/templates/') 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T02:08:58.730

您使用了文字路径`'/home/user/templates/'`。除非您的用户名实际上是`user`，否则没有这样的目录，因此尝试`index`从该目录中读取模板将会失败。

如果您的用户名是 ，例如`rhpt`，您将其更改为`'/home/rhpt/templates/'`.

更好的是，您可能希望使用`os.path.expanduser('~/templates/')`而不是硬编码您的用户名。（然后您可以将您的代码提供给朋友或客户，他们可以托管它而无需编辑代码。）

# android - android - 在内容提供者中使用可绘制的资源

> ID：13465002
> 
> 赞同：1
> 
> 时间：2012-11-20T00:48:30.997
> 
> 标签：android, android-contentprovider, android-resources

我正在尝试通过单独应用程序中的内容提供程序传回图像。我有两个应用程序，一个带有（app a）中的活动，另一个带有内容提供者（app b）

我有应用程序 a 使用以下代码通过应用程序 b 从我的 SD 卡中读取图像。

应用程序：

```
public void but_update(View view)
{
    ContentResolver resolver = getContentResolver();
    Uri uri = Uri.parse("content://com.jash.cp_source_two.provider/note/1");
    InputStream inStream = null;

    try
    {
        inStream = resolver.openInputStream(uri);
        Bitmap bitmap = BitmapFactory.decodeStream(inStream);
        image = (ImageView) findViewById(R.id.imageView1);
        image.setImageBitmap(bitmap);
    }
    catch(FileNotFoundException e)
    {
        Toast.makeText(getBaseContext(), "error = "+e, Toast.LENGTH_LONG).show();   
    }

    finally {
        if (inStream != null) {
            try {
                inStream.close();
            } catch (IOException e) {
                Log.e("test", "could not close stream", e);
            }
        }
    }
}; 
```

应用程序 b：

```
@Override
public ParcelFileDescriptor openFile(Uri uri, String mode)
       throws FileNotFoundException {   
    try
    {
        File path = new File(Environment.getExternalStorageDirectory().getAbsolutePath(),"pic2.png");
        return ParcelFileDescriptor.open(path,ParcelFileDescriptor.MODE_READ_ONLY);
    }
    catch (FileNotFoundException e)
    {
            Log.i("r", "File not found");
            throw new FileNotFoundException();
    }
} 
```

在应用程序 a 中，我可以显示应用程序 a 的资源文件夹中的图像，使用 setImageURi 并使用以下代码构造 URI。

```
int id = R.drawable.a2;
Resources resources = getBaseContext().getResources(); 
Uri uri = Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE + "://" + 
resources.getResourcePackageName(id) + '/' + 
resources.getResourceTypeName(id) + '/' + 
resources.getResourceEntryName(id) );
image = (ImageView) findViewById(R.id.imageView1);
image.setImageURI(uri); 
```

但是，如果我尝试在应用程序 b 中执行相同操作（从应用程序 b 的资源文件夹而不是 SD 卡上的图像读取）它不起作用，说它找不到文件，即使我正在创建路径来自资源的文件，所以它肯定在那里。

有任何想法吗？它是否以某种方式限制通过内容提供者发送资源？

PS当我尝试创建文件时，我也遇到了错误

`File path = new File(uri);`说'没有适用的构造函数`(android.net.Uri)`'虽然[http://developer.android.com/reference/java/io/File.html#File(java.net.URI)](http://developer.android.com/reference/java/io/File.html#File(java.net.URI))似乎认为这是可能的......除非java。 net.URI 与 android.net.URI 不同，在这种情况下我可以转换它们吗？

谢谢

拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:35:27.630

android.net.URI 不存在。有一个 android.net.Uri（注意拼写）。这与 java.net.URI 不同。您可能可以将 Uri 转换为 String，然后再转换为 URI。

因此，您可以在 SD 卡上打开文件（或者您声称），并且可以在主 Activity 中设置图像（或者您声称）。我没有看到您从内容提供商那里取回图像或其他任何内容？

内容提供者存储数据。它可以返回文件（即文件描述符），包括资产文件的文件描述符，但它与应用程序中的资源无关。

# php - 从 url 获取返回数据

> ID：13465006
> 
> 赞同：0
> 
> 时间：2012-11-20T00:49:00.180
> 
> 标签：php, javascript

我正在尝试使用 GET 将用户信息提交到 URL，然后获取错误（如果有）并使用它们告诉客户出了什么问题。所以，目前我有一个将此客户信息提交到 iframe 的表单（因此页面不会被重定向，我可以看到我的购物车软件的响应）。提交信息后，这是我从购物车服务器得到的响应：

```
errorFound=1&responseCode=329&...etc. 
```

我需要得到这个响应代码，并且想知道最简单的方法是什么。一旦我得到它，我就可以告诉客户问题出在哪里......我应该在 iframe 加载后使用 java 来读取 iframe 中的数据吗？或者我可以使用 Fopen 之类的东西来打开 URL 并获取返回数据（虽然不能在我的服务器上启用 fopen，但是类似的东西？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:19:43.197

Java != javascript

一个快速的方法：

```
$errorcodes = array("329" => "Wrong blabla");

if( isset( $_GET['errorFound'] ) && isset( $_GET['responseCode'] ) ){
    $errorNr = (int) $_GET['responseCode'];
    $error = getErrorFromDB();
   //OR
   //$error = isset( $erorCodes[ $errorNr ] )? $errorcodes[ $errorNr] : false;
    if( $error !== false){
      exit( "<script type='text/javascript'>
             alert( '".htmlspecialchars($error)."' )
        </script>"); 
    }

}

function getError( $code )
{
  $code = (int) $code;
  $db = getYourPdoInstance();
  $q = $db->prepare("SELECT `message` FROM `errorCodes` WHERE `errorCode` = ?");
  $q->execute( array( $code) );
  $return = $q->fetch(2);
  return isset($return['message'])?$return['message']:false;
 } 
```

# scala - 如何将 java.lang.Object 与 Scala 模式匹配匹配

> ID：13465008
> 
> 赞同：0
> 
> 时间：2012-11-20T00:49:10.193
> 
> 标签：scala, pattern-matching

我正在尝试使用 Scala 来查找一系列 Java 类的基类（java.lang.Object 除外）。我定义了一个递归函数：

```
def baseClass(cls: Class[_]): Class[_] = {
  val nextClass = cls.getSuperclass
  nextClass match {
    case java.lang.Object => cls 
    case _ => baseClass(nextClass)
  }
} 
```

编译器给出以下错误：错误：对象对象不是值

如何正确终止递归并返回 java.lang.Object 下面的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T00:59:08.963

```
scala> (new Object) match { case o: Object => "hi" }
res2: java.lang.String = hi 
```

除了这对您没有帮助，因为 Object 是您匹配的超类。

这个功能做你想做的事。

```
def baseClass(cls: Class[_]): Class[_] = { 
  val nextClass = cls.getSuperclass
  println(nextClass)
  if(classOf[Object] == nextClass)
    cls
  else {
    baseClass(nextClass)
  }
}

scala> baseClass(classOf[java.util.ArrayList[_]])
class java.util.AbstractList
class java.util.AbstractCollection
class java.lang.Object
res9: java.lang.Class[_] = class java.util.AbstractCollection 
```

# xml - 基于存储在数据库中的 XML 数据创建 Microsoft SQL 报告 (SSRS)

> ID：13465011
> 
> 赞同：4
> 
> 时间：2012-11-20T00:49:26.063
> 
> 标签：xml, visual-studio-2012, ssrs-2008, reporting-services

我正在尝试在 Visual Studio 2012 中创建 Microsoft SQL 报告。我的报告数据输入是存储在数据库中的 XML 二进制文件。

为了打破它，这就是我想做的事情：

1.  从数据库中检索 XML 二进制文件

2.  使用 XML 的内容填充报告

3.  创建报告的 PDF 版本

第 1 步和第 3 步没有问题。但是第2步是。我不知道如何在数据集中使用 XML 数据，所以我在报告中使用它。

我缺少一些基本的东西吗？

我以前只使用数据库中的数据而不是 XML 来创建许多报告。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:29:38.790

如果 XML 存储在数据库中并且您只能通过 SQL 查询访问它，我建议如下：

1.  使用空连接字符串创建 XML 数据源。通常它是一个网站/服务 URL。
2.  在报表的数据集中选择使用 XML 数据源。请注意，现在唯一可能的命令类型是文本。
3.  为报告添加一个内部参数，该参数将包含您的 XML 文件。
4.  编写表达式以从数据库中获取参数的默认值。该值应该是您的 XML。
5.  在 dataset 命令中使用[XML Query](http://msdn.microsoft.com/en-us/library/ms345251.aspx)选择字段，例如：

    ```
    <Query>
       <XmlData>
        <!-- Your XML starts -->
        <Books>
            <Book id='1'>Foo</Book>
            <Book id='2'>Bar</Book>
            <Book id='3'>Baz</Book>
        </Books>
        <!-- Your XML ends -->
       </XmlData>
       <ElementPath>Books/Book</ElementPath>
    </Query>
        <!--just tweaked indentation--> 
    ```

这将添加两个字段：`id`和`Book`。您需要使用参数而不是 XML。

更新：对于 XML 格式的抱歉，我无法让代码块工作。

# python - 难以理解在哪里查看源代码，以便创建网络抓取工具

> ID：13465016
> 
> 赞同：1
> 
> 时间：2012-11-20T00:49:59.440
> 
> 标签：python, web-scraping, web-crawler

我是 python 的菜鸟，从今年夏天开始就断断续续地自学。我正在阅读 scrapy 教程，偶尔会阅读有关 html/xml 的更多信息以帮助我理解 scrapy。我对自己的项目是模仿scrapy教程以抓取[http://www.gamefaqs.com/boards/916373-pc](http://www.gamefaqs.com/boards/916373-pc)。我想得到一个线程标题列表以及线程 url，应该很简单！

我的问题在于不理解xpath，我猜也是html。在查看 gamefaqs 网站的源代码时，我不确定要查找什么来获取链接和标题。我想说只看锚标签并抓住文本，但我对如何做感到困惑。

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from tutorial.items import DmozItem

class DmozSpider(BaseSpider):
name = "dmoz"
allowed_domains = ["http://www.gamefaqs.com"]
start_urls = ["http://www.gamefaqs.com/boards/916373-pc"]

def parse(self, response):
    hxs = HtmlXPathSelector(response)
    sites = hxs.select('//a')
    items = []
    for site in sites:
        item = DmozItem()
        item['link'] = site.select('a/@href').extract()
        item['desc'] = site.select('text()').extract()
        items.append(item)
    return items 
```

我想改变它以在gamefaqs上工作，那么我会在这条路上放什么？我想象程序返回的结果类似于这个线程名称线程 url 我知道代码并不正确，但有人可以帮我重写它以获得结果，这将帮助我更好地理解抓取过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:01:21.857

网页的布局和组织可能会发生变化，并且基于深度标签的路径可能难以处理。我更喜欢模式匹配链接的文本。即使链接格式发生变化，匹配新模式也很简单。

对于游戏常见问题，文章链接如下所示：

[http://www.gamefaqs.com/boards/916373-pc/37644384](http://www.gamefaqs.com/boards/916373-pc/37644384)

那是协议、域名、字面“板”路径。“916373-pc”标识论坛区域，“37644384”是文章 ID。

我们可以使用正则表达式匹配特定论坛区域的链接：

```
reLink = re.compile(r'.*\/boards\/916373-pc\/\d+$')
if reLink.match(link) 
```

或使用以下任何论坛区域：

```
reLink = re.compile(r'.*\/boards\/\d+-[^/]+\/\d+$')
if reLink.match(link) 
```

添加与您的代码匹配的链接，我们得到：

```
import re
reLink = re.compile(r'.*\/boards\/\d+-[^/]+\/\d+$')

def parse(self, response):
    hxs = HtmlXPathSelector(response)
    sites = hxs.select('//a')
    items = []
    for site in sites:
        link = site.select('a/@href').extract()
        if reLink.match(link)
            item = DmozItem()
            item['link'] = link
            item['desc'] = site.select('text()').extract()
            items.append(item)
    return items 
```

许多网站都有单独的摘要和详细信息页面或描述和文件链接，其中路径与带有文章 ID 的模板相匹配。如果需要，您可以像这样解析论坛区域和文章 ID：

```
reLink = re.compile(r'.*\/boards\/(?P<area>\d+-[^/]+)\/(?P<id>\d+)$')
m = reLink.match(link)
if m:
    areaStr = m.groupdict()['area']
    idStr = m.groupdict()['id'] 
```

`isStr`将是一个字符串，很适合填写 URL 模板，但如果需要计算之前的 ID 等，则将其转换为数字：

```
idInt = int(idStr) 
```

我希望这有帮助。

# jquery - jQuery - 将 POST 响应加载到 iframe

> ID：13465017
> 
> 赞同：2
> 
> 时间：2012-11-20T00:50:18.487
> 
> 标签：jquery, servlets, post, iframe

我提出了一个让我失去理智的问题。我需要开发一个用于协同浏览的 servlet，其逻辑是：“master”在地址栏中键入一个地址，然后一个 POST 方法（一个表单）将此信息发送到 servlet。

servlet 通过对象 HttpGet 检索请求的资源并添加标签以解决由于相关链接引起的任何问题。

返回的资源然后显示在 IFRAME 中（搜索栏的形式以 iframe 为目标）

当我单击 iframe 内页面上的任何链接时，使用 jquery 的链接操作被阻止（event.prevent()），并且将在其位置发送一个 POST 以更新 iframe 中显示的页面。

更新工作正常，servlet 正常工作，实际上 POST 响应包含请求页面的 html。

现在的问题是：如何在 iframe 中显示它？

我试过：

```
$('.myIframe').contents().load("myServlet", {someParameters}); 
```

与：

```
$.post("myServlet", {someParameters}).success(function(data) {
$(".myIframe").contents().html(data);}); 
```

但在这两种情况下，我都会收到正确的响应（html），但 iframe 是空的。而且，在这些情况下，浏览器无法解析相对链接（用firebug 不满足用相对链接引用的资源要求，并收到404 响应），尽管第一次调用（地址栏）工作。

任何的想法？

PS对不起我的英语！

HTML代码是：

```
<div id="searchbar">
<form action="myServlet" target="navigation" name="form" method="POST">
<input type="text" name="goTo" id="addressbar">
</form></div>
<div id="iframe"><iframe class="myIframe" scrolling="no" name="navigation"></iframe> 
```

并且，当 iframe 被加载时，每次点击链接都会被识别：

```
$('.myIframe').load(function() {
   $('.myIframe').contents().find('a').click(function(event) {  
      $('html', $('.myIframe').contents()).load("myServlet", {someParameters});
   });
}); 
```

在 post 响应中获得的数据类型是典型的 Web 资源（与您在 servlet 协同浏览之外浏览相同 - html、asp、php 等）

@Yevgeniy：嗨，它可以工作，但是现在，当以这种方式加载页面时，没有启用识别点击链接的事件（iframe load() 事件未触发？）

一些更新我通过 GET 将 POST 的操作（更新会话协同浏览）分开（而不是异步检索资源会话并应显示 iframe）

POST端没问题，

异步 GET 是使用 AsyncContext 和这个 JS（oracle 教程）实现的：

```
var messagesWaiting = false;          
function getMessages(){
    if(!messagesWaiting){
        messagesWaiting = true;
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange=function(){
            if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                messagesWaiting = false;
                var iframe = $(".browser")[0].contentWindow.document;
                iframe.open();
                iframe.write(xmlhttp.responseText);
                iframe.close();
            } 
        }
        xmlhttp.open("GET", "CoBroServlet?t="+new Date()+"&type=UPDATE&sharedSessionId="+ document.getElementById("ssid").innerHTML, true);
    xmlhttp.send();
    }
}
setInterval(getMessages, 1000); 
```

奇怪的是，在某些情况下它可以正常工作，但在其他情况下，包含远程资源的 GET 的全部内容都“原始”打印在屏幕上（它没有放入嵌套在 iframe 中的 #document 中，而是在

更好地解释：有时（总是在地址栏中进行第一次搜索）萤火虫显示 iframe 的内容是预期的内容。通过与 servlet 和输出的 iframe 交互浏览站点是可以的。

突然（在地址栏中进行新搜索）iframe 打印 GET 响应的内容。

从此时起，在第一个站点（运行良好的站点）的地址栏中也重复搜索，页面的原始 html 将打印到屏幕上。

我还尝试用$('.MyIframe) 清除getMessages 函数() 的每个新周期的iframe。空（），但我没有得到任何不同！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:57:47.280

请像这样修改您的javascript，然后重试：

```
$('html', $('.myIframe').contents()).load("myServlet", {someParameters}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T19:24:30.757

我通过传递编码为请求路径的参数来解决它，只需替换 iframe 的 src 属性：

```
$(".myIframe").attr('src', "myServlet/"+encodedParam); 
```

谢谢大家

# php - kohana 3.2 使用 2.3 的 sql 端口进行数据库查询

> ID：13465019
> 
> 赞同：-1
> 
> 时间：2012-11-20T00:50:48.807
> 
> 标签：php, sql, kohana

我正在尝试将数据库查询从在 Kohana 2.3 中运行的应用程序移植到在 Kohana 3.2 中运行的新应用程序。尽管阅读了用户指南并查看了 Google 上的许多示例，但我对查询构建器完全感到困惑。

在 Kohana 2.3 应用程序中有以下代码

```
$query = "SELECT w.id as wid, wc.id as wcid, w.*, wc.* FROM widgets as w INNER JOIN widget_controls as wc ON w.id=wc.widget_id
                WHERE wc.position_id=1  AND wc.supplier_id = '".$supid."' AND wc.status = 1
                ORDER BY wc.display_order ASC";
$result = $db->query($query); 
```

我知道 $db->query 在 3.2 中不再存在，它已经变成了类似于 DB::select 的东西

如果有人能给我一些关于如何将此 sql 查询转换为适用于 3.2 的表单的指导，我将不胜感激。

亲切的问候

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:44:59.820

您可以使用`DB::query()`方法： http: [//kohanaframework.org/3.3/guide-api/DB#query](http://kohanaframework.org/3.3/guide-api/DB#query)

# css - 用于共享点站点设置的 CSS

> ID：13465024
> 
> 赞同：0
> 
> 时间：2012-11-20T00:51:25.263
> 
> 标签：css, sharepoint

我有一个加载到自定义 css 文件中的母版页。这适用于最终用户看到的已发布页面。但是，CSS 也会影响看起来很糟糕的站点设置页面。有没有办法只为已发布的页面提供自定义 css 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:19:54.447

干杯@Neps。系统有一个不同的母版页，但我发现我使用的是备用 CSS，它将样式表应用于两者。所以我删除了它并将链接代码直接放入母版页。

# iphone - 从coredata获取数据时出错？

> ID：13465025
> 
> 赞同：0
> 
> 时间：2012-11-20T00:51:30.063
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios6

我正在开发一个使用 CoreData 保存 URL 的应用程序。我在 对象类而不是 AppDelegate中定义`NSManagedObjectContext`, 。我正在使用 CoreDataRepository 的引用保存此 URL。我正在使用下面的代码来获取 CoreData`NSManagedObjectModel``NSPersistentStoreCoordinator``CoreDataRepository`

```
-(void)getcoredata
 {
  _coredatarep = [[CoreDataRepository alloc] init];

  NSManagedObjectContext *context=[_coredatarep managedObjectContext];
  NSFetchRequest *request=[[NSFetchRequest alloc] init];
  NSEntityDescription *entity=[NSEntityDescription entityForName:@"UrlData" inManagedObjectContext:context];
  [request setEntity:entity];

  NSError *error;
  NSArray *recordsDataArray=[context executeFetchRequest:request error:&error];

  urlMutableArray = (NSMutableArray *)recordsDataArray;

  for (int i=0; i<[urlMutableArray count]; i++)
  {
      urlString = [NSString stringWithFormat:@"%@", [urlMutableArray objectAtIndex:0]];
       NSLog(@"urlString is %@",urlString);
      _urlLabel.text=urlString;
  }

} 
```

在输出中，标签文本显示为

```
<NSManagedObject: 0x9920620> (entity: UrlData; id: 0x991faf0 <x-coredata://A00EB59A-C480-4237-A749-8A40BF908655/UrlData/p1> ; data: <fault>) 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:06:24.197

正如我在您的另一个线程中所说，它正在打印您告诉它打印的内容。 `[urlMutableArray objectAtIndex:0]`是一个`UrlData`对象，这就是它的描述。如果您想要一个存储在 中的字符串`UrlData`，您需要向它询问其属性之一……无论您在数据模型中将它们定义为什么。

# c++ - 在 H.263 上编码视频以通过 RTP 发送

> ID：13465028
> 
> 赞同：1
> 
> 时间：2012-11-20T00:51:59.330
> 
> 标签：c++, ffmpeg, libav

我正在开发一个应用程序，通过 RTP 将视频发送到只能播放 H.263 (1996) 和 H263+ (1998) 的客户端。

为此，我按照以下步骤使用 libav 对视频进行了编码：（这只是代码的一部分）

```
av_register_all();
avformat_network_init();
Fmt = av_guess_format("rtp", NULL, NULL);
...
st = add_video_stream(FmtCtx, CODEC_ID_H263);
...
avio_open(&FmtCtx->pb, rtp_url, URL_WRONLY) 
```

最后进入我对视频进行编码的循环，问题是该程序生成的流以**H.263-2000**（或 H.263++）编码，即使我使用 CODEC_ID_H263 或CODEC_ID_H263P 在初始化时也会发生同样的事情。

是否可以使用 libav 在那些旧的 H.263 版本中进行编码？我什至没有使用 ffmpeg 命令来做到这一点。流始终是 h.263-2000 (PT=96)

# matlab - Matlab 绘制正态分布概率密度函数

> ID：13465031
> 
> 赞同：1
> 
> 时间：2012-11-20T00:52:22.017
> 
> 标签：matlab, statistics, probability, normal-distribution, probability-density

我是统计新手。我有一个判别函数：

  g(x) = ln p(x| w)+ lnP(w)

我知道它有一个正态分布。我知道 mü 和 sigma 变量。如何在 Matlab 上绘制它的 pdf 函数？

这是一个对话：[如何在 MatLab 中绘制概率密度函数？](https://stackoverflow.com/questions/5757387/how-to-draw-probability-density-function-in-matlab)但是我不想使用 Matlab 的任何工具箱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T01:17:22.220

对多元正态分布使用[normpdf](http://www.mathworks.nl/help/stats/normpdf.html)或[mvnpdf ：](http://www.mathworks.nl/help/stats/mvnpdf.html)

```
mu = 0;
sigma = 1;

xs = [-5:.1:5];
ys = normpdf(xs, mu, sigma);
clf;
plot(xs, ys); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:25:38.507

MATLAB 绘制数据向量，因此您需要创建一个 X 向量和一个 Y 向量。

如果我有一个函数，比如 x^2，我可能会这样做：

```
x = -1:.01:1; %make the x-vector
y = x.^2; %square x
plot(x,y); 
```

您知道 PDF 的功能 (y = exp(-x.^2./sigma^2).*1/sqrt(2*pi*sigma^2) )，所以您所要做的就是制作 x-矢量，然后阴谋！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-20T21:54:26.410

根据@kamaci 的评论，这个问题使用[@Pete's answer](https://stackoverflow.com/a/13465719/8239061)给出了完整的答案。

为避免使用 MATLAB 工具箱，只需直接绘制[正态概率密度函数 (PDF)](https://en.wikipedia.org/wiki/Normal_distribution)。

```
mu = 12.5;      % mean
sigma = 3.75;   % standard deviation
fh=@(x) exp(-((x-mu).^2)./(2*(sigma^2)))*(1/sqrt(2*pi*(sigma^2)));  % PDF function
X = 0:.01:25;
p = plot(X,fh(X),'b-') 
```

[![普通版 PDF (12.5,3.75)](../Images/a8afa2532a690a5c62ad608e9b7906e2.png)](https://i.stack.imgur.com/RglqF.jpg)

# jquery - 使用 jQuery 将值插入输入字段？

> ID：13465034
> 
> 赞同：1
> 
> 时间：2012-11-20T00:52:57.593
> 
> 标签：jquery

在下面的代码中，我想使用 jQuery 将单词`"username"`放入 value 字段中。然后，当用户选择输入框时，“用户名”一词将消失，留下一个空白输入字段供用户输入他的用户名。

这可以用 jQuery 完成吗？

```
<p class="login-username">
    <input type="text" name="log" id="user_login" class="input" value="" size="20" tabindex="10">
</p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T00:57:33.740

`placeholder`您可以为此使用 HTML5

```
<input type="text" placeholder="Username" /> 
```

并为较旧的浏览器修复它（这正是您要问的部分）

```
$('[placeholder]').focus(function() {
  var input = $(this);
  if (input.val() == input.attr('placeholder')) {
    input.val('');
    input.removeClass('placeholder');
  }
}).blur(function() {
  var input = $(this);
  if (input.val() == '' || input.val() == input.attr('placeholder')) {
    input.addClass('placeholder');
    input.val(input.attr('placeholder'));
  }
}).blur(); 
```

[**资源**](http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html)

* * *

**更新**

要通过 jQuery 更改 HTML 并向输入字段添加占位符，您可以这样做

```
$("input").prop("placeholder", "username"); 
```

[**演示**](http://jsfiddle.net/sz8Gr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T00:59:27.227

占位符属性可能是您想要的，但要回答您的问题：

```
$(".login-username input").val("username");
$(".login-username input").on("focus", function() {
  if($(this).val() == "username") {
    $(this).val("");
  }
}).on("blur", function() {
  if($(this).val() == "") {
    $(this).val("username");
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T00:59:28.723

```
$("#user_login").val("username");

$("#user_login").focus(function(){
    $(this).val("");
}); 
```

工作示例：http: [//jsfiddle.net/jbB35/](http://jsfiddle.net/jbB35/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T01:07:31.977

你可以只使用简单的javascript：

```
<p class="login-username">
<input type="text" name="log" id="user_login" class="input" value="Username" size="20" tabindex="10" onfocus="if(!this._haschanged){this.value=''};this._haschanged=true;">
</p> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T01:02:34.473

如果你使用 XHTML

```
var user_login_text="Username";
$("#user_login").val=user_login_text;
$("#user_login").focus(function(){
    $(this).val("");
}).blur(function(){
    $(this).val(user_login_text);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-20T00:57:48.273

**选项 1：jQuery 插件（或自己编写）**

有几个默认文本插件可供选择。我偏爱这个：[http](http://www.examplet.buss.hk/jquery/defaultText.php) ://www.examplet.buss.hk/jquery/defaultText.php 。

**选项 2：HTML5 占位符属性**

利用`placeholder`属性 (HTML5)。在受支持的浏览器上使用`placeholder`将为您提供所需的功能。

```
<input type="text" id="user_login" placeholder="username" /> 
```

如果您选择使用占位符路线，您可以像这样设置默认文本的样式：

```
input::-webkit-input-placeholder {
    color:    #999;
}
input:-moz-placeholder {
    color:    #999;
}
input:-ms-input-placeholder {
    color:    #999;
} 
```

有关更多详细信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/2610497/change-an-inputs-html5-placeholder-color-with-css)。

**注意：**请注意，`placeholder`并非所有浏览器都支持。[您可以在此处](http://caniuse.com/input-placeholder)查看支持的浏览器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-20T00:57:55.737

为此，您不需要 jQuery。您可以只使用该`placeholder`属性。

从潜入 HTML5：

> HTML5 为 Web 表单带来的第一个改进是能够在输入字段中设置占位符文本。只要字段为空，占位符文本就会显示在输入字段内。当您单击（或制表符）输入字段并开始输入时，占位符文本会消失。

[http://diveintohtml5.info/forms.html#placeholder](http://diveintohtml5.info/forms.html#placeholder)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-20T00:59:15.353

使用 HTML5，您可以简单地设置`placeholder="username"`，现代浏览器会自动处理。为了赶上落后者，有许多脚本（例如[这个](https://github.com/danielstocks/jQuery-Placeholder)`shim`或[这个](http://afarkas.github.com/webshim/demos/)）为非 HTML5 兼容的浏览器提供占位符支持。`shiv`

# c# - 《文件系统模拟实现》

> ID：13465036
> 
> 赞同：2
> 
> 时间：2012-11-20T00:53:11.110
> 
> 标签：c#, file, system, simulation

我正在与一个小组合作，我们需要用 C# 设计和编写一个文件系统模拟程序。我做了很多研究，我想我了解文件系统的基础知识，我需要使用什么样的数据结构，以及要使用的空间分配算法和数据结构。正如我所说，它应该是一个非常简单的系统，我正在考虑使用树作为文件的数据结构，并使用链表进行空间分配。我的问题是如何实现所有这些？我知道这是一个广泛的问题，所以我会具体一点。对于我正在考虑创建一个类的文件：这是一个示例：

```
class File 
{
    private string Name;
    private string type;
    private DateTime DateOfCreation;
    private double size;
    private int Datalink;
    private string content;

    public File(
        string fileName,
        string fileType,
        DateTime dateofCreation,
        double filesize,
        int fileDataLink,
        string fileContent
        )
    {
        this.Name = fileName;
        this.size = filesize;
        this.DateOfCreation = dateofCreation;
        this.Datalink = fileDataLink;
        this.content = fileContent;
        this.type = fileType;

    }
    public File()
    {
    }
    public string get_Name()
    {
        return this.Name;
    }
} 
```

我创建了集合和获取。

我的问题是：如何创建此类的多个实例并像数据库记录一样将它们编入索引（例如按名称）？

我可能会跳出框框思考，我需要使用不同的数据结构（哈希表或字典）

请指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T20:32:21.780

您需要一个根节点（对象）并从该节点移动到所选节点。

# windows-phone - Windows Phone 8 的自动化测试

> ID：13465042
> 
> 赞同：1
> 
> 时间：2012-11-20T00:54:06.080
> 
> 标签：windows-phone, windows-phone-8

尝试在 Windows Phone 8 上设置 C++ 代码的自动化测试时遇到了几个问题。

1) 我正在达到我们设备上安装应用程序的限制。有没有办法自动卸载设备上的应用程序？通过命令行？

2) 有没有推荐的方法在 WinPhone8 上运行单元测试？目前，我正在使用 devenv 加载/运行我们的解决方案文件。这提供了不一致的结果。Windows Phone 调试器在某些情况下未设置，这会在尝试运行时导致“未设置调试器”错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T14:28:07.117

以下是有关 Windows Phone 8 中单元测试的一些有用信息：

[http://www.microsofttranslator.com/bv.aspx?from=&to=en&a=http://qmatteoq.com/blog/post/unit-testing-in-windows-phone-8-the-basics](http://www.microsofttranslator.com/bv.aspx?from=&to=en&a=http://qmatteoq.com/blog/post/unit-testing-in-windows-phone-8-the-basics)

[http://wp.qmatteoq.com/unit-testing-in-windows-phone-8-asynchronous-operations-and-mocking/](http://wp.qmatteoq.com/unit-testing-in-windows-phone-8-asynchronous-operations-and-mocking/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:46:11.800

JustinAngel 的回答[https://stackoverflow.com/a/13429709/2087252](https://stackoverflow.com/a/13429709/2087252)给出了如何在 Windows Phone 8 上自动安装、运行和删除应用程序的示例。

要使其正常工作，您需要从项目中引用以下 dll：

*   Microsoft.Smartdevice.Connectivity.Interface.dll
*   Microsoft.Smartdevice.Connectivity.dll
*   Microsoft.Smartdevice.MultiTargeting.Connectivity.dll

如果您想在模拟器上运行您的应用程序/测试，您可以使用以下命令行启动它：

```
"C:\Program Files (x86)\Microsoft XDE\8.0\xde.exe" /name "Emulator WVGA 512MB.username" 
```

`username`您的 Windows 用户名在哪里。

# numpy - 第 i 行与第 i 列的点积

> ID：13465047
> 
> 赞同：3
> 
> 时间：2012-11-20T00:54:37.147
> 
> 标签：numpy

在 NumPy 中：

```
A = np.array([[1,2,3],[4,5,6]])
array([[1, 3, 5],
       [2, 4, 6]])

B = np.array([[1,2],[3,4],[5,6]])
array([[1, 2],
       [3, 4],
       [5, 6]])

A.dot(B)
array([[35, 44],
       [44, 56]]) 
```

我只关心得到`A.dot(B).diagonal() = array([35, 56])`

有没有一种方法可以`array([35, 56])`不用计算所有行和列的内积？即`ith row`with的内积`ith column`？

我问是因为对于较大的矩阵，性能差异变得更加显着。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T01:04:12.330

这只是二维数组的矩阵乘法：

```
C[i, j] = sum(A[i, ] * B[, j]) 
```

所以既然你只想要对角线元素，看起来你在追求

```
sum(A[i, ] * B[, i]) # for each i 
```

所以你可以只使用列表理解：

```
[np.dot(A[i,:], B[:, i]) for i in xrange(A.shape[0])]
# [22, 64] 
```

或者，（这只是因为你想要 a`diagonal`所以这假设如果 A 的尺寸是`n x m`，B 的尺寸将是`m x n`）：

```
np.sum(A * B.T, axis=1)
# array([22, 64]) 
```

（这里没有花哨的 numpy 技巧，只是玩数学）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:02:34.290

您可以简单地省略您不关心的参数中的行吗？

2x3 x 3x2 为您提供 2x2 结果。

一个 1x3 x 3x2 矩阵只会给你 [A][B] 的第一行，一个 1x2 矩阵。

编辑：误读了这个问题。尽管如此，矩阵中的每个值都是由一列和一行转置的乘积产生的。

# python - Nodejs 加密与 python hashlib

> ID：13465048
> 
> 赞同：4
> 
> 时间：2012-11-20T00:54:42.727
> 
> 标签：python, node.js, cryptography, sha512, node-crypto

我正在尝试使 python 函数和 nodejs 函数计算相同的哈希值。但是，nodejs crypto 和 python hashlib 之间输出的二进制文件似乎不同。

我正在使用的python是：

```
hash = hashlib.sha512()
hash.update(salt)
hash.update(password.encode('utf8'))
hash.digest() 
```

节点/咖啡脚本是：

```
crypto.createHash('sha512').update(salt, 'binary').update(password, 'utf8').digest() 
```

这些行应该产生相同的结果，但由于某种原因它们不会。帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T01:28:16.937

它们似乎确实产生了相同的结果，但是因为 node`digest()`返回一个 Unicode 字符串，而 Python 返回一个`bytes`对象，这可能不会立即显而易见：

节点 0.8.11 上的 CoffeeScript 1.4.0：

```
coffee> salt='abc'
'abc'
coffee> password='def'
'def'
coffee> d = crypto.createHash('sha512').update(salt, 'binary').update(password, 'utf8').digest()
'ã.ñ#èí&ezK=\u0007­»v\u0018\u0006CWEVNAP §\u0003¾*}¶\u001e=9\f+¹~-L1\u001fÜiÖ±&\u0005õ© ç' 
```

Python 3.3.0：

```
>>> salt, password=b'abc', 'def'
>>> hash = hashlib.sha512()
>>> hash.update(salt)
>>> hash.update(password.encode('utf8'))
>>> d = hash.digest()
>>> print(d)
b'\xe3.\xf1\x96#\xe8\xed\x9d&\x7fez\x81\x94K=\x07\xad\xbbv\x85\x18\x06\x8e\x88CWEVN\x8dAP\xa0\xa7\x03\xbe*}\x88\xb6\x1e=9\x0c+\xb9~-L1\x1f\xdci\xd6\xb1&\x7f\x05\xf5\x9a\xa9 \xe7' 
```

看起来很不一样，对吧？但如果你仔细观察，可打印的字符是相同的——`CWEVN`运行非常明显。如果将其解码为 Latin-1，您会看到更多相似之处……</p>

```
>>> print(d.decode('latin1'))
ã.ñ#èí&ezK=­»vCWEVNAP §¾*}¶=9
                                   +¹~-L1ÜiÖ±&õ© ç 
```

很明显这是完全相同的字符串，只是 Node 正在转义不可打印的字符。

和 Python 2.7.2：

```
>>> salt, password='abc', u'def'
>>> hash = hashlib.sha512()
>>> hash.update(salt)
>>> hash.update(password.encode('utf8'))
>>> d = hash.digest()
>>> print(d)
?.?#??&ez??K=??v???CWEVN?AP???*}??=9
                                 +?~-L1?iֱ&? ?
>>> print(d.decode('latin1'))
ã.ñ#èí&ezK=­»vCWEVNAP §¾*}¶=9
                                   +¹~-L1ÜiÖ±&õ© ç 
```

再次，相同的字符串。

鉴于我的终端、C 语言环境等都是 UTF-8（这是 OS X），我不知道为什么 CoffeeScript 解码为 Latin-1。

# android - 实现上下文操作栏禁用行单击突出显示

> ID：13465050
> 
> 赞同：0
> 
> 时间：2012-11-20T00:54:58.523
> 
> 标签：android, android-actionbar, actionbarsherlock, contextual-action-bar

我[按照 Google 的说明](http://developer.android.com/guide/topics/ui/menus.html#CAB)实现了一个单行上下文操作栏。说明说要向`OnLongClickListener`每个视图添加一个，并且由于我使用的是 a `CustomAdapter`，因此我使用以下代码在每一行上实现了它：

```
 @Override
   public View getView(final int position, View convertView, final ViewGroup parent) {
       final ViewHolder holder;
       final View tempView = convertView;

        if (convertView == null) {
            holder = new ViewHolder();

                convertView.setOnLongClickListener(new View.OnLongClickListener() {

                public boolean onLongClick(View view) {
                    if (mActionMode != null) {
                        return false;
                    }

                    mActionMode = getSherlockActivity().startActionMode(mActionModeCallback);
                    view.setSelected(true);
                    return true;
                }
            });
        }
    } 
```

但是，使用该代码会禁用正常点击，因此我`OnClickListener`在每个视图中添加了一个：

```
 convertView.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

                tempView.setBackgroundColor(getResources().getColor(R.color.blue));

                final Intent details = new Intent(this, Details.class);
                startActivity(details);
            }
    }); 
```

这或多或少有效，但看起来很老套，背景颜色的变化不像正常的那样“平滑”。我还有另一个`ListView`我正在使用 a`MultiChoiceModeListener`并设置`ChoiceMode`to 的地方`CHOICE_MODE_MULTIPLE_MODAL`，因此用户可以选择多行，并且正常的行单击工作正常。

# html - HTML代码将图像放在左侧，将文本放在屏幕右侧，底部有页脚？

> ID：13465052
> 
> 赞同：2
> 
> 时间：2012-11-20T00:55:06.723
> 
> 标签：html

这就是我的页面应该是什么样子 -

```
--------Header (will put code to load header from external site here)
--Image on left side - Text on right side.
--------Footer ((will put code to load footer from external site here)) 
```

我怎样才能做到这一点？我实际上正在寻找一个模板，我所要做的就是放置我的图像、文本以及页眉和页脚代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T01:41:19.293

**选项1：**

对于环绕图像的文本，请使用以下基本 HTML：

```
<div id="header">
  ... contents go here ...
</div>

<div id="content">
  <img src="sample.jpg" alt="" />
  <p>Example content</p>
</div>

<div id="footer">
  ... contents go here ...
</div> 
```

这个CSS：

```
#content img {
  float: left;
} 
```

**选项 2：**

对于两个不同的内容列，请使用以下 HTML：

```
<div id="header">
  ... contents go here ...
</div>

<div id="content">
  <div class="col">
    <img src="sample.jpg" alt="" />
  </div>
  <div class="col">
    <p>Example content</p>
  </div>
</div>

<div id="footer">
  ... contents go here ...
</div> 
```

和 CSS：

```
#content .col {
  float: left;
}

#footer {
  clear: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:22:20.650

你可以使用这样的表：

```
<table style="width:100%">
<tr> 
    <td colspan="2">
    HEADER HERE
    </td>
</tr>
<tr>
    <td style="width: 70%">IMAGE</td> <-Change these to respective widths
    <td style="width: 30%">TEXT</td>
</tr>
<tr> 
    <td colspan="2">
    FOOTER HERE
    </td>
</tr>

</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T01:33:14.283

不要使用表格。看看这个小提琴[http://jsfiddle.net/2sWrF/1/](http://jsfiddle.net/2sWrF/1/)

您使用 css 浮动图像和文本，使它们并排

在`.cf`css 中是一个 clearfix 它使页脚将与图像和文本一起进入 div 下方，而不是在它的旁边

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T02:04:37.563

或者，您可以使用响应式布局[http://jsfiddle.net/PSBtr/12/](http://jsfiddle.net/PSBtr/12/) Iframe 作为 ebbedded 页面。

```
iframe 
```

采用网格作为标记。

# arrays - 更新数组值与对象值

> ID：13465060
> 
> 赞同：0
> 
> 时间：2012-11-20T00:56:37.090
> 
> 标签：arrays, json, mongodb, object

如何更新`sku`数组中的值，如示例“B”。我应该选择A而不是B吗？

## 选项 A - 对象

### 方案

```
"data" : {
    "products" : {
        235099432:{
            "product_id" : 101242538,
            "sku" : "",
            "variant_id" : 235099432
        },
    ]
} 
```

### 更新

```
db.col.update({
    "data.products.235099432.variant_id": 235099432
}, {
    $set: {
        "data.products.235099432.sku": "ITM-RED-212"
    }
}); 
```

## 选项 B - 数组

### 方案

```
"data" : {
    "products" : [
        {
            "product_id" : 101242538,
            "sku" : "",
            "variant_id" : 235099432
        },
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:25:23.210

您可以使用[`$`位置运算符](http://docs.mongodb.org/manual/reference/operator/positional/)来识别`products`要更新的与您的过滤器匹配的数组元素：

```
db.col.update({
    "data.products.variant_id": 235099432
}, {
    $set: {
        "data.products.$.sku": "ITM-RED-212"
    }
}); 
```

我的投票是选项 B；在选项 A 中使用动态键会变得非常混乱。

# python - 如何聚合MongoDB中集合中的每个项目

> ID：13465062
> 
> 赞同：0
> 
> 时间：2012-11-20T00:57:06.957
> 
> 标签：python, mongodb

MongoDB新手在这里...

当我在 shell 中执行 db.students.find().pretty() 时，我会从我的收藏中得到一个很长的列表......就像这样......

```
{
    "_id" : 19,
    "name" : "Gisela Levin",
    "scores" : [
        {
            "type" : "exam",
            "score" : 44.51211101958831
        },
        {
            "type" : "quiz",
            "score" : 0.6578497966368002
        },
        {
            "type" : "homework",
            "score" : 93.36341655949683
        },
        {
            "type" : "homework",
            "score" : 49.43132782777443
        }
    ]
} 
```

现在我有大约 100 多个...我需要在每个上面运行以下命令...

```
lowest_hw_score = 

db.students.aggregate(
    // Initial document match (uses index, if a suitable one is available)
    { $match: {
        _id : 0
    }},

    // Expand the scores array into a stream of documents
    { $unwind: '$scores' },

    // Filter to 'homework' scores 
    { $match: {
        'scores.type': 'homework'
    }},

    // Sort in descending order
    { $sort: {
        'scores.score': 1
    }},

    { $limit: 1}
) 
```

所以我可以在每个结果上运行这样的东西

```
for item in lowest_hw_score:
    print lowest_hw_score 
```

现在“lowest_score”只适用于一个项目我要在集合中的所有项目上运行它......我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:28:32.597

```
> db.students.aggregate(  
{ $match :  { 'scores.type': 'homework' } },
{ $unwind:  "$scores" },
{ $match:{"scores.type":"homework"} }, 
{ $group: { 
    _id : "$_id", 
   maxScore : { $max : "$scores.score"}, 
   minScore: { $min:"$scores.score"} 
  }
}); 
```

你并不真正需要第一个 $match，但如果“scores.type”被索引，这意味着它会在展开分数之前使用。（我不相信在 $unwind mongo 之后能够使用索引。）

结果：

```
{
"result" : [
    {
        "_id" : 19,
        "maxScore" : 93.36341655949683,
        "minScore" : 49.43132782777443
    }
],
"ok" : 1
} 
```

编辑：在 mongo shell 中测试和更新

# math - 计算循环的总次数

> ID：13465063
> 
> 赞同：1
> 
> 时间：2012-11-20T00:57:17.657
> 
> 标签：math, loops, time, complexity-theory

我正在尝试计算执行最里面的语句的总次数。

```
count = 0;
for i = 1 to n
    for j = 1 to n - i
       count = count + 1 
```

我认为循环最多可以执行 O(n*ni) = O(n^2)。我想通过使用双重求和来证明这一点，但我迷路了，因为我无法启动等式，因为 j = 1 被投入其中。

有人可以帮我解释一下吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:03:51.670

对于 each `i`，内部循环执行`n - i`次数（`n`是常数）。因此（因为`i`范围从`1`到`n`），要确定执行最里面的语句的总次数，我们必须评估总和

```
(n - 1) + (n - 2) + (n - 3) + ... + (n - n)

```

通过重新排列术语（将首先出现的所有 s 分组`n`），我们可以看到这等于

```
n*n - (1 + 2 + 3 + ... + n) = n*n - n(n+1)/2 = n*(n-1)/2 = n*n/2 - n/2

```

* * *

这是 Python 中的一个简单实现来验证这一点：

```
def f(n):
    count = 0;
    for i in range(1, n + 1):
        for _ in range(1, n - i + 1):
            count = count + 1
    return count

for n in range(1,11):
    print n, '\t', f(n), '\t', n*n/2 - n/2 
```

输出：

```
1 0 0
2 1 1
3 3 3
4 6 6
5 10 10
6 15 15
7 21 21
8 28 28
9 36 36
10 45 45

```

第一列是`n`，第二列是内部语句的执行次数，第三列是`n*n/2 - n/2`。

# php - 回显的 PHP 变量中脚本中的多层引号

> ID：13465064
> 
> 赞同：0
> 
> 时间：2012-11-20T00:57:27.857
> 
> 标签：php, variables

PHP：

```
$var123 = '<div class="mydiv" onclick="document.getElementById("dialog").style.display = "block";">Some text</div>';
echo($var123); 
```

我知道这完全是一个新手问题，但我该如何做呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T00:59:50.597

您可以在 Javascript 中使用单引号。由于您的字符串包含在单引号中，因此您还需要在 PHP 中使用反斜杠对其进行转义`\`。

```
$var123 = '<div class="mydiv" onclick="document.getElementById(\'dialog\').style.display = \'block\';">Some text</div>';
echo $var123; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:02:04.630

```
$var123 = 'Some text';
<div class="mydiv" onclick="document.getElementById("dialog").style.display = "block";">
<?php echo $var123; ?>
</div>; 
```

尝试这个

# java - 为什么 PermGen 的默认大小这么小？

> ID：13465067
> 
> 赞同：18
> 
> 时间：2012-11-20T00:57:36.673
> 
> 标签：java, heap-memory, permgen

限制 Java JVM 上 Permgen 空间大小的目的是什么？为什么不总是将它设置为等于最大堆大小？为什么Java默认为64MB这么少？他们是否试图通过这样做来强迫人们注意到他们代码中的永久问题？

如果我的应用程序使用 85MB 的 permgen，那么将其设置为 96MB 可能是安全的，但如果它只是主堆的一部分，为什么要设置这么小呢？允许 JVM 使用堆允许的尽可能多的 PermGen 不是很有效吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T01:16:07.730

PermGen 将在 JDK8 中消失。

> 限制 Java JVM 上 Permgen 空间大小的目的是什么？

不消耗资源。

> 为什么不总是将它设置为等于最大堆大小？

PermGen*不是*Java 堆的一部分。此外，即使是这样，用类元数据和常量字符串填充堆对应用程序也没有多大帮助，因为你会得到“OutOfMemoryError: Java heap size”错误。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-20T01:15:44.537

从概念上讲，对于程序员来说，您可能会争辩说“永久一代”在很大程度上是没有意义的。如果您需要加载一个类或其他“永久”数据并且有剩余的内存空间，那么原则上您最好将它加载到某个地方，而不关心将这些项目的聚合称为“一代”。

然而，理由可能更多的是：

*   将所有代码/类元数据放在内存空间中附近可能有好处（例如，从处理器缓存的角度来看），并且为了保证这一点，更容易分配固定大小的区域；
*   同样，存储代码/类元数据的内存空间可能具有某些“特殊”属性（特别是，如果您能提供帮助，您不希望它被分页到磁盘）并且系统可能无法设置此类属性以非常细化的方式在内存上，因此将所有“特殊”对象放在一个（或少数）连续块或内存空间中更为实用；
*   将永久对象放在一起有助于避免分割剩余的内存空间，最实用的方法是从一开始就分配一个固定大小的连续内存块。

所以正如我所看到的，大多数时候分配永久“代”的原因实际上是出于实际实施原因，而不是因为程序员真的非常关心。

另一方面，对于程序员来说，情况通常也不可怕：所需的永久代数量通常是可预测的，因此您应该能够以适当的余地分配所需的数量。因此，如果您发现自己意外超出了分​​配，这很可能是“严重错误”的信号。

注意 可能 PermGen 最初旨在解决的一些问题在具有更大处理器缓存的现代 64 位处理器上并不是那么大的问题。如果它在 Java 的未来版本中被删除，这可能表明 JVM 设计者认为它现在已经“达到了它的目的”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-20T01:25:11.760

PermGen 是分配*类*数据和其他静态内容（如字符串文字）的地方。

您宁愿为您的应用程序数据分配内存到*Java*堆（`Xms`并且`Xmx`，*年轻*（短期）和*终身*对象所在的位置（当 JVM 意识到它们需要停留更长时间时））。

因此，历史上的 PermGen 64MB 默认值可能是任意的，但是明确设置它可以让您知道（并控制）您的应用程序导致 JVM 存储多少静态数据。

# android - @font-face 无法在 Android 上的 Chrome 中呈现

> ID：13465068
> 
> 赞同：1
> 
> 时间：2012-11-20T00:57:46.543
> 
> 标签：android, google-chrome, css, font-face

在**Android**手机上的**Chrome**浏览器中，在[http://dev.belugalab.com/btm](http://dev.belugalab.com/btm)上未正确呈现徽标下的 3 个单词。但是，相同的字体似乎在页脚中起作用。我不确定这是否与*font-face*相关，但这是我最好的猜测。**这是Android Chrome**上发生的事情的屏幕截图：http : [//imm.io/MgE0](http://imm.io/MgE0)**`@font-face`**

 *******CSS：**

```
@font-face {
    font-family:'intro_regular';
    src: url('fonts/intro-webfont.eot');
    src: url('fonts/fonts/intro-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/intro-webfont.woff') format('woff'),
         url('fonts/intro-webfont.ttf') format('truetype'),
         url('fonts/intro-webfont.svg#intro_regular') format('svg');
    font-weight: normal;
    font-style: normal
}

h2 {
    font-family:'intro_regular';
    font-size:31px;
    font-weight:400;
    color:#fff;
    background:#000;
    display:inline-block;
    height:30px;
    margin:3px 0 4px 39px;
    line-height:30px;
    padding:0 4px
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:43:16.770

我没有安卓手机，但从屏幕截图来看，h2 甚至没有相同的字体。在 Chrome (Mac) 中打开页面并取消选中“字体系列”（在开发人员工具中）时，它看起来更接近屏幕截图。当我删除`line-height`标签并稍微增加文本的大小时，它看起来就像 Android 屏幕截图一样。

我会尝试删除`height`and`line-height`并调整`padding`以更接近你想要的。这至少可以防止文本被截断。

我怀疑`'intro_regular'`字体有问题。也许 Android Chrome 使用的字体格式与桌面不同？也许是 SVG？

我的第一个怀疑是另一个 CSS 规则覆盖了 Android 上的另一个而不是桌面。但我找不到任何其他规则可以做到这一点。

您是否尝试过清除 Android Chrome 上的缓存？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:56:08.857

它在适用于 iOS 的 Chrome 上正确呈现。我没有 Android 设备可以看到它，但请尝试使您的 H2 行高和高度与字体大小相同或更大。它们目前比您的字体大小短 1 个像素。*****

# ios - UIAlertView 中的焦点密码文本字段

> ID：13465072
> 
> 赞同：1
> 
> 时间：2012-11-20T00:57:57.563
> 
> 标签：ios, focus, uitextfield, uialertview

我正在尝试将 UIAlertView 内的初始焦点设置为密码字段，但到目前为止我所做的一切都没有奏效。

我希望这段代码有效，但有一个我无法弄清楚的错误：

```
- (void)showLoginFormWithUsername:(NSString*)username andPassword:(NSString*)password {
    UIAlertView *loginView = [[UIAlertView alloc] initWithTitle:@"Login"
                                                        message:@"Please enter your login data."
                                                       delegate:self
                                              cancelButtonTitle:@"Cancel"
                                              otherButtonTitles:@"Login", nil];

    loginView.alertViewStyle = UIAlertViewStyleLoginAndPasswordInput;

    // get TextFields
    UITextField *usernameField = [loginView textFieldAtIndex:0];
    UITextField *passwordField = [loginView textFieldAtIndex:1];

    // set text
    if (username)
        usernameField.text = username;
    if (password)
        passwordField.text = password;

    // set focus
    if (usernameField.hasText && !passwordField.hasText)
        [passwordField becomeFirstResponder];

    [loginView show];
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:03:26.730

在尝试使其成为响应者之前，您无需等待警报视图显示。相反，请在`didPresentAlertView:`方法中执行此操作。

# javascript - 如何从图像加载中捕获异常

> ID：13465073
> 
> 赞同：3
> 
> 时间：2012-11-20T00:57:56.480
> 
> 标签：javascript, image, exception-handling, try-catch

我无法弄清楚如何从调用的函数中捕获异常`image.onload`。请注意以下示例：

```
function afterImgLoads() {
     throw 'This is being thrown from img.onload!';
}

try {
    var img    = new Image();
    img.onload = afterImgLoads;
    img.src    = 'path/to/valid/image.jpg';
} catch(e) {
    throw 'This is being thrown after setting img.src';
} 
```

在上面的示例中，我无法弄清楚如何在`afterImgLoads()`抛出自己的错误时抛出第二个 throw 语句。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T01:19:18.443

你也许可以使用`onerror`

```
img.onerror = onErrorFunction; 
```

如果加载图像时出错，它将调用该函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:03:58.000

您可以设置 window.onerror ，它将在页面上任何地方的其他未被捕获的异常上调用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T01:00:50.207

由于 onload 是异步发生的，因此 catch 不可能抛出语句。

# c# - 与外部参考的持续集成

> ID：13465079
> 
> 赞同：0
> 
> 时间：2012-11-20T00:59:04.073
> 
> 标签：c#, asp.net, .net, msbuild, continuous-integration

我正在使用与 TeamCity 的持续集成，并且我的 msbuild 在编译时出现中断和错误。

我有一个外部参考，我正在调用并添加到 VS 2010 作为参考，但 msbuild 失败，我收到此错误：

```
[Csc] matrix\MatrixHandler.cs(5, 7): error CS0246: The type or namespace name 'Extreme' could not be found (are you missing a using directive or an assembly reference?) 
```

[16:49:21]

我该如何解决？

# php - 使用可用格式的逗号将 PHP 字符串回显到 JavaScript 变量。（见示例）

> ID：13465083
> 
> 赞同：0
> 
> 时间：2012-11-20T00:59:23.543
> 
> 标签：php, javascript

我想重新创建这样的东西......

```
var CA, AZ, TN = 'user1'; 
```

随着返回...

```
<?php 
$phpstring = $wpdb->get_row("SELECT value FROM user_data WHERE user_id = 5");
?>    
var state_phpstring = <?php echo $phpstring ?>; 
```

并将“user1”字符串添加到每个（CA、AZ 和 TN）中，就像我写进去一样。

有没有办法在不创建循环的情况下做到这一点，只需编写类似于此的代码......

```
var <?php echo $phpstring ?> = 'user1'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:07:31.583

您的变量带有一些检查...

```
<?php 
$phpstring = $wpdb->get_row("SELECT value FROM user_data WHERE user_id = 5");
?>    
var state_phpstring = <?php echo (is_array($phpstring)) ? implode(',',$phpstring):'null'; ?>; 
```

编辑：您可以在示例代码中使用此变量

```
var <?php echo $phpstring ?> = 'user1'; 
```

但是您从 db 获得的每条记录都将被分配给相同的属性，这没有任何意义，您最好将所有属性数据存储在 mysql 中并获取它们并稍后分配它们......顺便说一句，现在，在你告诉我想告诉你这些你想要实现的主要目标；

要存储主要变量的不同属性（示例中的个人），您最好使用数组。像这样;

```
user1 = new Array();
user1["state"] = "CA";
user1["country"] = "USA";
//and so on... 
```

要使用上面的示例 php，您可以尝试这样的操作；

```
<?php 
$phpstring = $wpdb->get_row("SELECT username,user_state,property2,property3 FROM user_data WHERE user_id = 5");
// make sure $phpstring is an array and has item in it here
// you can also assign more than one person data with foreach usage
foreach($phpstring as $individuals){
    echo $individuals["username"]." = new Array();";
    echo $individuals["username"].'["state"] = "'.$individuals["user_state"].'";';
    echo $individuals["username"].'["property2"] = "'.$individuals["property2"].'";';
    echo $individuals["property2"].'["property3"] = "'.$individuals["property2"].'";';
}
?> 
```

请注意，这只是一个示例，我不知道您的 phpstring 如何返回（关联或不关联等）

最后一点；实际上，使用将变量视为现实世界对象（例如人）的面向对象编程是最好的方法，但这需要了解 OOP 逻辑和用法，因此短期内数组会做你想做的更简单的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:02:50.400

```
var <?php echo implode( ', ', array( 'CA', 'AZ', 'TN')); ?> = 'user1'; 
```

虽然我不确定这是否会在 JS 中产生预期的结果。它会产生你正在寻找的输出：

```
var CA, AZ, TN = 'user1'; 
```

# google-chrome - Chrome中SVG线性渐变的舍入错误？

> ID：13465084
> 
> 赞同：4
> 
> 时间：2012-11-20T00:59:23.997
> 
> 标签：google-chrome, svg, gradient, linear-gradients, rounding-error

我最近看到 Chrome 渲染 SVG 线性渐变的一些问题。看看下面这个 SVG：

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<body>
<svg>
  <g>
    <linearGradient id="linearGradient" gradientUnits="userSpaceOnUse" x1="79px" x2="706px" y1="0" y2="0">
      <stop class="" offset="54.54545454545455%" style="stop-color: red;"></stop>
      <stop class="" offset="63.63636363636364%" style="stop-color: red;"></stop>
      <stop class="" offset="63.63636363636364%" style="stop-color: green;"></stop>
      <stop class="" offset="72.72727272727273%" style="stop-color: green;"></stop>
    </linearGradient>
    <path d="M79,241L136,196L193,194L250,212L307,159L364,152L421,339L478,46L535,205L592,134L649,215L706,74"
    style="opacity: 1; fill: none; stroke: url(#linearGradient); stroke-width: 2px;">
    </path>
  </g>
</svg>
</body>
</html> 
```

在Chrome（我的版本是23.0.1271.64）中加载这个html后，很容易在peek中看到一个明显的2px线性渐变误差，左侧线段显示一些绿色。在 IE 9 和最新的 Firefox 中，svg 都可以正确呈现。我认为这可能是 Chrome 或 WebKit 的错误。有谁知道如何解决？谢谢！

# jquery-ui - jquery Last UI dialog 多次悬停将我置于页面顶部

> ID：13465088
> 
> 赞同：1
> 
> 时间：2012-11-20T00:59:33.060
> 
> 标签：jquery-ui

我遇到了一个奇怪的问题，我有多个链接，当您将鼠标悬停在这些链接上时，它会打开一个对话框 ui。问题是当我将鼠标悬停在第一个链接上，然后没有悬停在任何其他链接上时，我将鼠标悬停在文档的最后一个链接上，浏览器将我置于第一页视图的最后一个链接（或第一页折叠的位置）。知道我搞砸了什么。这是完整的代码。

```
 <pre><code>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>jQuery UI Dialog: Position relative to mouse event</title>

<!-- jQuery UI  |  http://jquery.com/  http://jqueryui.com/  http://jqueryui.com/docs/Theming  -->
<style type="text/css">body{font:62.5% Verdana,Arial,sans-serif} li.nostyle{list-style-type: none;}</style>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.4/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.4/jquery-ui.min.js"></script>

<style type="text/css">
  code { font-size: 2em; }
</style>

</head>
<body>

  <h1>Placing dialog box next to mouse hover07</h1>

  <a class="a1" href="#" style="font-size: 2em;"><img src="/ProductImagesh/tn_test07.jpg" title="" alt="6mm Round Facetted Assorted Good Quality Acrylic Beads Mix (1lb) - NEW." border="0" /></a>

  <div class="dialog" title="jQuery UI Dialog1" style="display:none">
   <div style="width: 50%; float:left;">
    <div class="rs-slideshow">
    <div class="slide-container">
        <img src="/images/working.gif"
            alt="The first image in a slideshow demo." title="This is the first slide" />
    </div>

    <ol class="slides">
        <li class="nostyle">
            <a href="/productimagesh/test07.jpg"/></a>
        </li>
    </ol>
    </div>
    </div>
    <div style="width: 50%; float:left; text-align:center;">
    <p style="padding: 10px;"><br/>Part Number: IS-200-00<br>Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes, Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotesThank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes </p>
    </div>
  </div>  
  <br/><br/><br/><br/><br/><br/><br/><br/><br/>
  <h1>Placing dialog box next to mouse hover02</h1>

  <a class="a1" href="#" style="font-size: 2em;"><img src="/ProductImagesh/tn_test02.jpg" title="" alt="6mm Round Facetted Assorted Good Quality Acrylic Beads Mix (1lb) - NEW." border="0" /></a>

  <div class="dialog" title="jQuery UI Dialog2" style="display:none">
    <div style="width: 50%; float:left;">
    <div class="rs-slideshow">
    <div class="slide-container">
        <img src="/images/working.gif"
            alt="The first image in a slideshow demo." title="This is the first slide" />
    </div>

    <ol class="slides">
        <li class="nostyle">
            <a href="/productimagesh/test02.jpg"/></a>
        </li>
    </ol>
    </div>
    </div>
    <div style="width: 50%; float:left; text-align:center;">
    <p style="padding: 20px;"><br/>Part Number: IS-200-00<br>Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes, Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotesThank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes </p>
    </div>
  </div>
<br/><br/><br/><br/><br/><br/><br/><br/><br/>
  <h1>Placing dialog box next to mouse hover03</h1>

  <a class="a1" href="#" style="font-size: 2em;"><img src="/ProductImagesh/tn_test03.jpg" title="" alt="6mm Round Facetted Assorted Good Quality Acrylic Beads Mix (1lb) - NEW." border="0" /></a>

  <div class="dialog" title="jQuery UI Dialog2" style="display:none">
    <div style="width: 50%; float:left;">
    <div class="rs-slideshow">
    <div class="slide-container">
        <img src="/images/working.gif"
            alt="The first image in a slideshow demo." title="This is the first slide" />
    </div>

    <ol class="slides">
        <li class="nostyle">
            <a href="/productimagesh/test03.jpg"/></a>
        </li>
    </ol>
    </div>
    </div>
    <div style="width: 50%; float:left; text-align:center;">
    <p style="padding: 10px;"><br/>Part Number: IS-200-00<br>Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes, Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotesThank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes </p>
    </div>
  </div>
<br/><br/><br/><br/><br/><br/><br/><br/><br/> 
  <h1>Placing dialog box next to mouse hover04</h1>

  <a class="a1" href="#" style="font-size: 2em;"><img src="/ProductImagesh/tn_test04.jpg" title="" alt="6mm Round Facetted Assorted Good Quality Acrylic Beads Mix (1lb) - NEW." border="0" /></a>

  <div class="dialog" title="jQuery UI Dialog2" style="display:none">
    <div style="width: 50%; float:left;">
    <div class="rs-slideshow">
    <div class="slide-container">
        <img src="/images/working.gif"
            alt="The first image in a slideshow demo." title="This is the first slide" />
    </div>
    <ol class="slides">
        <li class="nostyle">
            <a href="/productimagesh/test04.jpg"/></a>
        </li>
    </ol>
    </div>
    </div>
    <div style="width: 50%; float:left; text-align:center;">
    <p style="padding: 10px;"><br/>Part Number: IS-200-00<br>Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes, Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotesThank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes </p>
    </div>
  </div>
<br/><br/><br/><br/><br/><br/><br/><br/><br/>
  <h1>Placing dialog box next to mouse hover04</h1>

  <a class="a1" href="#" style="font-size: 2em;"><img src="/ProductImagesh/tn_test04.jpg" title="" alt="6mm Round Facetted Assorted Good Quality Acrylic Beads Mix (1lb) - NEW." border="0" /></a>

  <div class="dialog" title="jQuery UI Dialog2" style="display:none">
    <div style="width: 50%; float:left;">
    <div class="rs-slideshow">
    <div class="slide-container">
        <img src="/images/working.gif"
            alt="The first image in a slideshow demo." title="This is the first slide" />
    </div>
    <ol class="slides">
        <li class="nostyle">
            <a href="/productimagesh/test04.jpg"/></a>
        </li>
    </ol>
    </div>
    </div>
    <div style="width: 50%; float:left; text-align:center;">
    <p style="padding: 10px;"><br/>Part Number: IS-200-00<br>Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes, Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotesThank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes </p>
    </div>
  </div>
 <br/><br/><br/><br/><br/><br/><br/><br/><br/> 
   <h1>Placing dialog box next to mouse hover04</h1>

  <a class="a1" href="#" style="font-size: 2em;"><img src="/ProductImagesh/tn_test04.jpg" title="" alt="6mm Round Facetted Assorted Good Quality Acrylic Beads Mix (1lb) - NEW." border="0" /></a>

  <div class="dialog" title="jQuery UI Dialog2" style="display:none">
    <div style="width: 50%; float:left;">
    <div class="rs-slideshow">
    <div class="slide-container">
        <img src="/images/working.gif"
            alt="The first image in a slideshow demo." title="This is the first slide" />
    </div>
    <ol class="slides">
        <li class="nostyle">
            <a href="/productimagesh/test04.jpg"/></a>
        </li>
    </ol>
    </div>
    </div>
    <div style="width: 50%; float:left; text-align:center;">
    <p style="padding: 10px;"><br/>Part Number: IS-200-00<br>Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes, Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotesThank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes </p>
    </div>
  </div>
 <br/><br/><br/><br/><br/><br/><br/><br/><br/> 
   <h1>Placing dialog box next to mouse hover04</h1>

  <a class="a1" href="#" style="font-size: 2em;"><img src="/ProductImagesh/tn_test04.jpg" title="" alt="6mm Round Facetted Assorted Good Quality Acrylic Beads Mix (1lb) - NEW." border="0" /></a>

  <div class="dialog" title="jQuery UI Dialog2" style="display:none">
    <div style="width: 50%; float:left;">
    <div class="rs-slideshow">
    <div class="slide-container">
        <img src="/images/working.gif"
            alt="The first image in a slideshow demo." title="This is the first slide" />
    </div>
    <ol class="slides">
        <li class="nostyle">
            <a href="/productimagesh/test04.jpg"/></a>
        </li>
    </ol>
    </div>
    </div>
    <div style="width: 50%; float:left; text-align:center;">
    <p style="padding: 10px;"><br/>Part Number: IS-200-00<br>Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes, Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotesThank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes </p>
    </div>
  </div>
 <br/><br/><br/><br/><br/><br/><br/><br/><br/> 
   <h1>Placing dialog box next to mouse hover04</h1>

  <a class="a1" href="#" style="font-size: 2em;"><img src="/ProductImagesh/tn_test04.jpg" title="" alt="6mm Round Facetted Assorted Good Quality Acrylic Beads Mix (1lb) - NEW." border="0" /></a>

  <div class="dialog" title="jQuery UI Dialog2" style="display:none">
    <div style="width: 50%; float:left;">
    <div class="rs-slideshow">
    <div class="slide-container">
        <img src="/images/working.gif"
            alt="The first image in a slideshow demo." title="This is the first slide" />
    </div>
    <ol class="slides">
        <li class="nostyle">
            <a href="/productimagesh/test04.jpg"/></a>
        </li>
    </ol>
    </div>
    </div>
    <div style="width: 50%; float:left; text-align:center;">
    <p style="padding: 10px;"><br/>Part Number: IS-200-00<br>Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes, Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotesThank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes </p>
    </div>
  </div>
 <br/><br/><br/><br/><br/><br/><br/><br/><br/> 
   <h1>Placing dialog box next to mouse hover04</h1>

  <a class="a1" href="#" style="font-size: 2em;"><img src="/ProductImagesh/tn_test04.jpg" title="" alt="6mm Round Facetted Assorted Good Quality Acrylic Beads Mix (1lb) - NEW." border="0" /></a>

  <div class="dialog" title="jQuery UI Dialog2" style="display:none">
    <div style="width: 50%; float:left;">
    <div class="rs-slideshow">
    <div class="slide-container">
        <img src="/images/working.gif"
            alt="The first image in a slideshow demo." title="This is the first slide" />
    </div>
    <ol class="slides">
        <li class="nostyle">
            <a href="/productimagesh/test04.jpg"/></a>
        </li>
    </ol>
    </div>
    </div>
    <div style="width: 50%; float:left; text-align:center;">
    <p style="padding: 10px;"><br/>Part Number: IS-200-00<br>Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes, Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotesThank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes </p>
    </div>
  </div>
 <br/><br/><br/><br/><br/><br/><br/><br/><br/> 
   <h1>Placing dialog box next to mouse hover51</h1>

  <a class="a1" href="#" style="font-size: 2em;"><img src="/ProductImagesz/tn_test51.jpg" title="" alt="6mm Round Facetted Assorted Good Quality Acrylic Beads Mix (1lb) - NEW." border="0" /></a>

  <div class="dialog" title="jQuery UI Dialog2" style="display:none">
    <div style="width: 50%; float:left;">
    <div class="rs-slideshow">
    <div class="slide-container">
        <img src="/images/working.gif"
            alt="The first image in a slideshow demo." title="This is the first slide" />
    </div>
    <ol class="slides">
        <li class="nostyle">
            <a href="/productimagesz/is_test51.jpg"/></a>
        </li>
    </ol>
    </div>
    </div>
    <div style="width: 50%; float:left; text-align:center;">
    <p style="padding: 10px;"><br/>Part Number: IS-200-00<br>Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes, Thank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotesThank you! I tried it it single quotes before and it didn't work. I guess I wasn't paying attention to the double quotes </p>
    </div>
  </div>

<script>

var dlg = $('div.dialog').dialog({
  autoOpen: false,
  draggable: false,
  resizable: false,
  width: 600,
  /*buttons: {
        "Ok": function(){ $(this).dialog("close"); }
    },*/
 });
var count1 = $('div').filter('.rs-slideshow').length;
   count1--;
$('a.a1').mouseover(function() {
   dlg.eq($('a.a1').index(this)).dialog('open');
   $(".rs-slideshow:eq(" + count1 + ")").rsfSlideshow('startShow');
}).mousemove(function(event) {
   dlg.dialog('option', 'position', {
    my: 'left top',
    at: 'right bottom',
    of: event,
    offset: '20 20'
  });
}).mouseout(function() {
  $(".rs-slideshow").rsfSlideshow('stopShow');
  dlg.dialog('close'); scrollTo(0, jQuery("body"));
});
$(document).ready(function () {
    $(".rs-slideshow").rsfSlideshow({
    interval: 0,
    transition: 0,
    loop: false, 
    autostart: false
    });
}); 
$(".ui-dialog-titlebar").hide();
</script>  
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="https://github.com/reallysimple/Really-Simple-Slideshow/raw/master/js/jquery.rs.slideshow.js"></script>
<script>
/**
*   Bootstrap the javascript
*/

$(document).ready(function () {

    $('.rs-slideshow').rsfSlideshow();

});
</script>   
</body>
</html>
 </code></pre> 
```

# linux-kernel - 如何在linux内核空间中映射文件？

> ID：13465095
> 
> 赞同：5
> 
> 时间：2012-11-20T01:01:12.903
> 
> 标签：linux-kernel, kernel-module, mmap

我尝试在 linux 内核模块中映射一个文件。我曾尝试使用该功能`do_mmap_pgoff`。但是返回的地址是当前进程的用户空间中的内存虚拟地址，即低于内核边界。相反，我想在内核空间中映射文件并获取映射区域的内核虚拟地址。Linux 中是否有任何内核 API 支持此操作？谢谢

# java - Java中的十进制到十六进制转换器

> ID：13465098
> 
> 赞同：20
> 
> 时间：2012-11-20T01:01:21.637
> 
> 标签：java, hex, decimal, converter

我有一个家庭作业，我需要在十进制、二进制和十六进制之间进行三向转换。我需要帮助的功能是将十进制转换为十六进制。我几乎不了解十六进制，但是如何将十进制转换为十六进制。我需要一个接受`int dec`并返回 a的函数`String hex`。不幸的是，我没有这个功能的任何草稿，我完全迷路了。我只有这个。

```
 public static String decToHex(int dec)
  {
    String hex = "";

    return hex;
  } 
```

我也不能使用像 Integer.toHexString() 这样的预制函数或任何东西，我需要实际制作算法，否则我不会学到任何东西。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-20T01:04:02.953

一种可能的解决方案：

```
import java.lang.StringBuilder;

class Test {
  private static final int sizeOfIntInHalfBytes = 8;
  private static final int numberOfBitsInAHalfByte = 4;
  private static final int halfByte = 0x0F;
  private static final char[] hexDigits = { 
    '0', '1', '2', '3', '4', '5', '6', '7', 
    '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'
  };

  public static String decToHex(int dec) {
    StringBuilder hexBuilder = new StringBuilder(sizeOfIntInHalfBytes);
    hexBuilder.setLength(sizeOfIntInHalfBytes);
    for (int i = sizeOfIntInHalfBytes - 1; i >= 0; --i)
    {
      int j = dec & halfByte;
      hexBuilder.setCharAt(i, hexDigits[j]);
      dec >>= numberOfBitsInAHalfByte;
    }
    return hexBuilder.toString(); 
  }

  public static void main(String[] args) {
     int dec = 305445566;
     String hex = decToHex(dec);
     System.out.println(hex);       
  }
} 
```

输出：

```
1234BABE 
```

无论如何，有一个库方法：

```
String hex = Integer.toHexString(dec); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-08-16T07:34:13.043

简单的：

```
 public static String decToHex(int dec)
  {
        return Integer.toHexString(dec);
  } 
```

如此处所述：[Java将整数转换为十六进制整数](https://stackoverflow.com/questions/9321553/java-convert-integer-to-hex-integer)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-10-09T08:27:18.987

> 我需要一个接受 int dec 并返回 String hex 的函数。

[我从http://introcs.cs.princeton.edu/java/31datatype/Hex2Decimal.java.html](http://introcs.cs.princeton.edu/java/31datatype/Hex2Decimal.java.html)找到了一个更优雅的解决方案 。我从原来的改变了一点（见编辑）

```
// precondition:  d is a nonnegative integer
public static String decimal2hex(int d) {
    String digits = "0123456789ABCDEF";
    if (d <= 0) return "0";
    int base = 16;   // flexible to change in any base under 16
    String hex = "";
    while (d > 0) {
        int digit = d % base;              // rightmost digit
        hex = digits.charAt(digit) + hex;  // string concatenation
        d = d / base;
    }
    return hex;
} 
```

免责声明：我在编码面试中问过这个问题。我希望这个解决方案不会太受欢迎:)

**2016 年 6 月 17 日编辑**：我添加了`base`变量以灵活地更改为任何基数：二进制、八进制、7 的基数……
根据评论，这个解决方案是最优雅的，所以我删除了`Integer.toHexString()`.

**编辑 2015 年 9 月 4 日**：我找到了一个更优雅的解决方案[http://introcs.cs.princeton.edu/java/31datatype/Hex2Decimal.java.html](http://introcs.cs.princeton.edu/java/31datatype/Hex2Decimal.java.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-31T01:18:28.920

考虑下面的 dec2m 方法，用于从 dec 转换为 hex、oct 或 bin。

样本输出为

`28 dec == 11100 bin 28 dec == 34 oct 28 dec == 1C hex`

```
public class Conversion {
    public static void main(String[] argv) {
        int x = 28;                           // sample number
        if (argv.length > 0)
            x = Integer.parseInt(argv[0]);    // number from command line

        System.out.printf("%d dec == %s bin\n", i, dec2m(x, 2));
        System.out.printf("%d dec == %s oct\n", i, dec2m(x, 8));
        System.out.printf("%d dec == %s hex\n", i, dec2m(x, 16));
    }

    static String dec2m(int N, int m) {
        String s = "";
        for (int n = N; n > 0; n /= m) {
            int r = n % m;
            s = r < 10 ? r + s : (char) ('A' - 10 + r) + s;
        }
        return s;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-05T06:48:03.473

这是任何数字的代码：

```
import java.math.BigInteger;

public class Testing {

/**
 * @param args
 */
static String arr[] ={"0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"}; 
public static void main(String[] args) {
    String value = "214";
    System.out.println(value + " : " + getHex(value));
}

public static String getHex(String value) {
    String output= "";
    try {
        Integer.parseInt(value);
        Integer number = new Integer(value);
        while(number >= 16){
            output = arr[number%16] + output;
            number = number/16;
        }
        output = arr[number]+output;

    } catch (Exception e) {
        BigInteger number = null;
        try{
            number = new BigInteger(value);
        }catch (Exception e1) {
            return "Not a valid numebr";
        }
        BigInteger hex = new BigInteger("16");
        BigInteger[] val = {};

        while(number.compareTo(hex) == 1 || number.compareTo(hex) == 0){
            val = number.divideAndRemainder(hex);
            output = arr[val[1].intValue()] + output;
            number = val[0];
        }
        output = arr[number.intValue()] + output;
    }

    return output;
}

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-10T22:19:02.427

另一种可能的解决方案：

```
public String DecToHex(int dec){
  char[] hexDigits = {'0', '1', '2', '3', '4', '5', '6', '7', '8', '9',
              'A', 'B', 'C', 'D', 'E', 'F'};
  String hex = "";
  while (dec != 0) {
      int rem = dec % 16;
      hex = hexDigits[rem] + hex;
      dec = dec / 16;
  }
  return hex;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-15T07:46:09.780

最简单的方法是：

```
String hexadecimalString = String.format("%x", integerValue); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-11T10:01:20.960

我会用

```
Long a = Long.parseLong(cadenaFinal, 16 ); 
```

因为有一些十六进制可以比整数大，它会抛出异常

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-27T11:44:06.087

将 DECIMAL 转换为 -> BINARY、OCTAL、HEXADECIMAL 的代码

```
public class ConvertBase10ToBaseX {
    enum Base {
        /**
         * Integer is represented in 32 bit in 32/64 bit machine.
         * There we can split this integer no of bits into multiples of 1,2,4,8,16 bits
         */
        BASE2(1,1,32), BASE4(3,2,16), BASE8(7,3,11)/* OCTAL*/, /*BASE10(3,2),*/ 
        BASE16(15, 4, 8){       
            public String getFormattedValue(int val){
                switch(val) {
                case 10:
                    return "A";
                case 11:
                    return "B";
                case 12:
                    return "C";
                case 13:
                    return "D";
                case 14:
                    return "E";
                case 15:
                    return "F";
                default:
                    return "" + val;
                }

            }
        }, /*BASE32(31,5,1),*/ BASE256(255, 8, 4), /*BASE512(511,9),*/ Base65536(65535, 16, 2);

        private int LEVEL_0_MASK;
        private int LEVEL_1_ROTATION;
        private int MAX_ROTATION;

        Base(int levelZeroMask, int levelOneRotation, int maxPossibleRotation) {
            this.LEVEL_0_MASK = levelZeroMask;
            this.LEVEL_1_ROTATION = levelOneRotation;
            this.MAX_ROTATION = maxPossibleRotation;
        }

        int getLevelZeroMask(){
            return LEVEL_0_MASK;
        }
        int getLevelOneRotation(){
            return LEVEL_1_ROTATION;
        }
        int getMaxRotation(){
            return MAX_ROTATION;
        }
        String getFormattedValue(int val){
            return "" + val;
        }
    }

    public void getBaseXValueOn(Base base, int on) {
        forwardPrint(base, on);
    }

    private void forwardPrint(Base base, int on) {

        int rotation = base.getLevelOneRotation();
        int mask = base.getLevelZeroMask();
        int maxRotation = base.getMaxRotation();
        boolean valueFound = false;

        for(int level = maxRotation; level >= 2; level--) {
            int rotation1 = (level-1) * rotation;
            int mask1 = mask << rotation1 ;
            if((on & mask1) > 0 ) {
                valueFound = true;
            }
            if(valueFound)
            System.out.print(base.getFormattedValue((on & mask1) >>> rotation1));
        }
        System.out.println(base.getFormattedValue((on & mask)));
    }

    public int getBaseXValueOnAtLevel(Base base, int on, int level) {
        if(level > base.getMaxRotation() || level < 1) {
            return 0; //INVALID Input
        }
        int rotation = base.getLevelOneRotation();
        int mask = base.getLevelZeroMask();

        if(level > 1) {
            rotation = (level-1) * rotation;
            mask = mask << rotation;
        } else {
            rotation = 0;
        }

        return (on & mask) >>> rotation;
    }

    public static void main(String[] args) {
        ConvertBase10ToBaseX obj = new ConvertBase10ToBaseX();

        obj.getBaseXValueOn(Base.BASE16,12456); 
//      obj.getBaseXValueOn(Base.BASE16,300); 
//      obj.getBaseXValueOn(Base.BASE16,7); 
//      obj.getBaseXValueOn(Base.BASE16,7);

        obj.getBaseXValueOn(Base.BASE2,12456);
        obj.getBaseXValueOn(Base.BASE8,12456);
        obj.getBaseXValueOn(Base.BASE2,8);
        obj.getBaseXValueOn(Base.BASE2,9);
        obj.getBaseXValueOn(Base.BASE2,10);
        obj.getBaseXValueOn(Base.BASE2,11);
        obj.getBaseXValueOn(Base.BASE2,12);
        obj.getBaseXValueOn(Base.BASE2,13);
        obj.getBaseXValueOn(Base.BASE2,14);
        obj.getBaseXValueOn(Base.BASE2,15);
        obj.getBaseXValueOn(Base.BASE2,16);
        obj.getBaseXValueOn(Base.BASE2,17);

        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE2, 4, 1)); 
        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE2, 4, 2)); 
        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE2, 4, 3)); 
        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE2, 4, 4)); 

        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE16,15, 1)); 
        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE16,30, 2)); 
        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE16,7, 1)); 
        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE16,7, 2)); 

        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE256, 511, 1)); 
        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE256, 511, 2)); 
        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE256, 512, 1));
        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE256, 512, 2)); 
        System.out.println(obj.getBaseXValueOnAtLevel(Base.BASE256, 513, 2)); 

    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-28T16:15:47.913

这是我的

```
public static String dec2Hex(int num)
{
    String hex = "";

    while (num != 0)
    {
        if (num % 16 < 10)
            hex = Integer.toString(num % 16) + hex;
        else
            hex = (char)((num % 16)+55) + hex;
        num = num / 16;
    }

    return hex;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-04T12:43:30.353

将 Decimal 转换为 HexaDecimal 的更好解决方案，这个解决方案不太复杂

```
import java.util.Scanner;
public class DecimalToHexa
{
    public static void main(String ar[])
    {
        Scanner sc=new Scanner(System.in);
        System.out.println("Enter a Decimal number: ");
        int n=sc.nextInt();
        if(n<0)
        {
            System.out.println("Enter a positive integer");
            return;
        }
        int i=0,d=0;
        String hx="",h="";
        while(n>0)
        {
            d=n%16;`enter code here`
            n/=16;
            if(d==10)h="A";
            else if(d==11)h="B";
            else if(d==12)h="C";
            else if(d==13)h="D";
            else if(d==14)h="E";
            else if(d==15)h="F";
            else h=""+d;            
            hx=""+h+hx;
        }
        System.out.println("Equivalent HEXA: "+hx);
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-11-21T10:30:07.933

查看下面的代码进行十进制到十六进制的转换，

```
import java.util.Scanner;

public class DecimalToHexadecimal
{
   public static void main(String[] args)
   {
      int temp, decimalNumber;
      String hexaDecimal = "";
      char hexa[] = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};

      Scanner sc = new Scanner(System.in);
      System.out.print("Please enter decimal number : ");
      decimalNumber = sc.nextInt();

      while(decimalNumber > 0)
      {
         temp = decimalNumber % 16;
         hexaDecimal = hexa[temp] + hexaDecimal;
         decimalNumber = decimalNumber / 16;
      }

      System.out.print("The hexadecimal value of " + decimalNumber + " is : " + hexaDecimal);      
      sc.close();
   }
} 
```

您可以在以下链接中了解有关将十进制转换为十六进制的不同方法的更多信息 >> [java convert decimal to hexadecimal](https://www.flowerbrackets.com/java-convert-decimal-to-hex/)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-05-17T17:33:03.713

以下将十进制转换为具有时间复杂度的十六进制十进制： O(n) 线性时间，没有任何 java 内置函数

```
private static String decimalToHexaDecimal(int N) {
    char hexaDecimals[] = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' };
    StringBuilder builder = new StringBuilder();
    int base= 16;
    while (N != 0) {
        int reminder = N % base;
        builder.append(hexaDecimals[reminder]);
        N = N / base;
    }

    return builder.reverse().toString();
} 
```

# ios - GKA成就解锁太早？

> ID：13465106
> 
> 赞同：0
> 
> 时间：2012-11-20T01:02:34.217
> 
> 标签：ios, game-center, percentage, achievements

我正在使用这个库来报告我的应用程序中的分数和成就：[https ://github.com/csdavies/DDGameKitHelper](https://github.com/csddavies/DDGameKitHelper)

因此，在我的应用程序中，我报告百分比以让用户知道他们距离完成成就有多近。所以我做这样的事情：

```
[[DDGameKitHelper sharedGameKitHelper] reportAchievement:@"Achievement1" percentComplete:totalTime/300.0f]; 
```

然而，似乎报告说我完成了成就“Achievement1”，尽管我没有。当我 NSLog`totalTime/300.0f`我得到一个像*0.563*而**不是** *100*的值。

所以现在我在想这个`reportAchievement`方法一定有问题，所以我看了看，我不确定可能是什么问题。以下是相关的方法`reportAchievement`：

```
-(void) reportAchievement:(NSString*)identifier percentComplete:(float)percent
{
    if (isGameCenterAvailable == NO)
        return;

    GKAchievement* achievement = [self getAchievement:identifier];
    if (achievement.percentComplete < percent)
    {
        NSLog(@"new achievement %@ reported", achievement.identifier);
        achievement.percentComplete = percent;
        [achievement reportAchievementWithCompletionHandler:^(NSError* error)
         {
             [delegate onReportAchievement:(GKAchievement*)achievement];
         }];

        [self saveAchievements];
    }
}

-(GKAchievement*) getAchievement:(NSString*)identifier
{
    GKAchievement* achievement = [achievements objectForKey:identifier];

    if (achievement == nil)
    {
        achievement = [[[GKAchievement alloc] initWithIdentifier:identifier] autorelease];
        [achievements setObject:achievement forKey:achievement.identifier];
    }

    return achievement;
} 
```

那么这里有什么可能导致我的成就被报告为提前完成，即使它们真的没有？

谢谢！

编辑1：

```
2012-11-19 20:50:15.946 App[16894:907] percent: 0.005556
2012-11-19 20:50:15.947 App[16894:907] achievement percentComplete: 0.004861
2012-11-19 20:50:15.972 App[16894:907] percent: 0.000000
2012-11-19 20:50:15.973 App[16894:907] achievement percentComplete: 0.000000
2012-11-19 20:50:15.974 App[16894:907] percent: 0.026000
2012-11-19 20:50:15.974 App[16894:907] achievement percentComplete: 0.024000
2012-11-19 20:50:16.003 App[16894:907] percent: 0.002600
2012-11-19 20:50:16.004 App[16894:907] achievement percentComplete: 0.002400
2012-11-19 20:50:16.010 App[16894:907] percent: 0.000000
2012-11-19 20:50:16.011 App[16894:907] achievement percentComplete: 0.000000
2012-11-19 20:50:16.012 App[16894:907] percent: 0.016667
2012-11-19 20:50:16.012 App[16894:907] achievement percentComplete: 0.016667
2012-11-19 20:50:16.013 App[16894:907] percent: 0.000000
2012-11-19 20:50:16.014 App[16894:907] achievement percentComplete: 0.000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:20:46.030

我认为这里的问题是在检查中`if (achievement.percentComplete < percent)`它太模糊了。我的百分比完成可能是 5%，我的百分比值可能是 6%，但绝不是 100% 完成。因此，使用上面的方法，每次更新成就的百分比完成时，它只会显示成就横幅，这不是 Game Center 应该工作的方式。我还注意到，即使横幅显示好像我确实解锁了成就，但当我签入 Game Center 应用程序时，我真的没有。所以下面的方法是我所做的：

```
-(void) reportAchievement:(NSString*)identifier percentComplete:(float)percent
{
    if (isGameCenterAvailable == NO)
        return;

    GKAchievement* achievement = [self getAchievement:identifier];
    if (percent > achievement.percentComplete)
    {
        NSLog(@"new achievement %@ reported", achievement.identifier);
        achievement.percentComplete = percent;
        [achievement reportAchievementWithCompletionHandler:^(NSError* error) {
             if (achievement.isCompleted) {
                [delegate onReportAchievement:(GKAchievement*)achievement];
             }
         }];

        [self saveAchievements];
    }
} 
```

在此代码中，它仍会向 100% 报告更新后的值，但仅在 GC 的 isComplete BOOL 返回 YES 时才会显示横幅。

# xml - 将 Delphi ClientDataSet 转换为 dfXML

> ID：13465108
> 
> 赞同：0
> 
> 时间：2012-11-20T01:02:34.317
> 
> 标签：xml, delphi, data-structures, tclientdataset

我刚刚安装了 Delphi 7 供个人使用，我正在尝试将 delphi ClientDataSet 文件转换为 dfXMLUTF8。我真正需要的是xml结构。 [该站点](http://embarcadero.newsgroups.archived.at/public.delphi.language.delphi.win32/200809/080930704.html)建议运行 4 行代码将生成我想要的输出。但请注意，我的文件是 .cds，而不是示例中的 .dat。我不知道这是否有区别。

```
ClientDataSet1.Active := false;
ClientDataSet1.CreateDataSet;
ClientDataSet1.LoadFromFile('MyBinaryFile.dat');
ClientDataSet1.SaveToFile('MyXMLFile.XML', dfXMLUTF8); 
```

我收到错误，因为我以前从未真正使用过 Delphi，我希望知道他们在做什么的人可以为我发布*非常短*的xml 结构。这是我正在使用[的文件（486 字节） 。](https://rapidshare.com/files/2116612914/Structure.cds)我将用完整的 dfXMLUTF8 输出奖励第一个海报的正确答案。谢谢！

**更新**：

好的，我刚刚从头开始这个项目，我想我已经进行了一些设置。我添加了`uses DBClient;`, `var ClientDataSet1: TClientDataSet`，最后添加了程序：

```
ClientDataSet1.LoadFromFile('C:\Documents and Settings\XPMUser\Desktop\DelphiCDS\Master.cds');
  ClientDataSet1.SaveToFile('C:\Documents and Settings\XPMUser\Desktop\DelphiCDS\output.XML', dfXMLUTF8); 
```

它抛出以下错误：

> 模块“Project.exe”中地址 004588B6 的访问冲突。读取地址 00000000。

**更新2**：

这就是我最终得到的结果：

```
unit Script3;

interface

uses
  Forms, DBClient;

type
  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
  end;

var
  Form1: TForm1;
  CDS: TClientDataSet;

implementation
{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  CDS := TClientDataSet.Create(nil);
  try
    CDS.LoadFromFile('.\input.cds');
    CDS.SaveToFile('.\output.xml', dfXMLUTF8);
  finally
    CDS.Free;
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T01:14:59.953

为了完成转换，您所做的比您必须做的要多得多。假设`MyBinaryFile.dat`实际上是二进制格式的 Delphi`TClientDataSet`文件，这两行代码（无需额外设置）将起作用：

```
ClientDataSet1.LoadFromFile('D:\Temp\MyBinaryFile.dat');
ClientDataSet1.SaveToFile('D:\Temp\MyXMLFile.xml', dfXMLUTF8); 
```

如果不知道更多关于你`MyBinaryFile.dat`是什么的信息，也没有关于你得到的错误的信息，那么提供更多信息是非常困难的。`animals.cds`在 Delphi 7 中测试并使用标准（`C:\Program Files\Common Files\Borland Shared\Data`在 Windowx XP 虚拟机上安装标准 D7）。

从您下面的评论看来，您遇到的实际问题是`TClientDataSet`当您尝试在代码中创建它时出现关于未识别标识符的编译器错误。如果你有足够高的 SKU 用于 Delphi 7，包括`TClientDataSet`（IIRC、Professional 和更高版本），你可以添加`DBClient`到你的 uses 子句：

```
implementation

uses 
  DBClient;

procedure TForm1.FormShow(Sender: TObject);
var
  CDS: TClientDataSet;
begin
  CDS := TClientDataSet.Create(nil);
  try
    CDS.LoadFromFile('MyBinaryFile.dat');
    CDS.SaveToFile('MyXMLFile.xml', dfXMLUTF8);
  finally
    CDS.Free;
  end;
end; 
```

或者，更好的是，如果您正在创建一个 VCL Forms 应用程序，只需`TClientDataSet`在您的表单上放一个；您会`DataAccess`在组件面板的选项卡上找到它。

# gnu-screen - 带有不同窗口命令的开始屏幕

> ID：13465109
> 
> 赞同：0
> 
> 时间：2012-11-20T01:02:39.853
> 
> 标签：gnu-screen

如何在几个不同的窗口中使用几个不同的命令启动 gnu screen？

即，（伪代码）

```
screen -window1="ping google.com" -window2="vim ~/secret_document.txt" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:41:34.920

您可以创建一个屏幕配置文件，例如

```
screen -t "window1" ping google.com
screen -t "window2" vim ~/secret_document.txt 
```

然后使用配置文件启动屏幕：

```
screen -c configfile 
```

# c++ - ToString 用于模板化链表？

> ID：13465110
> 
> 赞同：1
> 
> 时间：2012-11-20T01:02:43.227
> 
> 标签：c++, linked-list, stdout

这是我的代码：

```
template<typename T>
class list {                                               
    private:                                               
        node<T>* head;                                     
        node<T>* tail;                                     
        int len;                                           
    public:                                                
        list(){                                            
            this->len = 0;                                 
            this->head = this->tail = 0;                   
        }                                                  
        ~list(){                                           
            node<T>* n = this->head;                       
            if (!n) return;                                
            node<T>* t = NULL;                             
            while (n){                                     
                t = n->next;                               
                delete n;                                  
                n = t;                                     
            }                                              
        }                                                  

        /* other stuff */

        ostream& operator<<(ostream &o, const list<T>& l) {
            node<T>* t = l.head;                           
            while (t){                                     
                strm << *(t->value);                       
                if (!t->next) break;                       
                strm << ", ";                              
                t = t->next;                               
            }                                              
            return strm;                                   
        }                                                  
}; 
```

我收到以下编译错误：

```
rm bin *.o -f
g++ -g -Wall main.cpp -o bin
main.cpp:110: error: 'std::ostream& list<T>::operator<<(std::ostream&, const list<T>&)' must take exactly one argumentmain.cpp: In function 'int main(int, char**)':
main.cpp:151: error: no match for 'operator<<' in 'std::cout << l'
/usr/include/c++/4.4/ostream:108: note: candidates are: std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(std::basic_ostream<_CharT, _Traits>& (*)(std::basic_ostream<_CharT, _Traits>&)) [with _CharT = char, _Traits = std::char_traits<char>]
... other errors
make: *** [main] Error 1 
```

所以，这是我的问题。我需要做什么才能完成这项工作？我试图以[这个问题](https://stackoverflow.com/questions/1549930/c-equivalent-of-java-tostring)为例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:14:32.323

你`operator<<`被声明为成员函数。您需要改为使其成为自由函数，即在类之外定义它：

```
template <class T>
class list {
    // ...
};

template <class T>
ostream& operator<<(ostream &o, const list<T>& l) 
{
    // ...
}; 
```

如果你需要让你`operator<<`的班级成为朋友，那么请看看我对[这个问题的回答](https://stackoverflow.com/a/13464246/1030301)

另外，我注意到您使用 `ostream`without `std::`，这意味着您正在使用`using namespace std`.

如果您正在这样做，那么调用您的 class 是一个非常糟糕的主意`list`，因为将来任何时候都会将if添加到文件中，`std::list`从而将其拉入范围。`using namespace std``#include <list>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:13:07.910

您可以尝试使 operator<< 成为朋友吗？

```
....;
friend ostream& operator<<(ostream &o, const list<T>& l) {
....; 
```

这是因为如另一个问题所示，该函数必须声明为自由函数，如果声明为列表的成员，则仅在实际调用列表对象本身时才使用它。

* * *

### 编辑

@je4d 的好消息。

查看您的代码，您似乎不需要操作员成为朋友，因为我猜您将拥有头部和尾部的访问器。在类外部声明和定义它作为模板化的自由函数会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T10:48:22.773

我最终使用了`boost::lexical_cast<std::string>`和建议的`ostream& operator <<`方法的组合。

# php - 当我存储到数组时，PHP 类属性被覆盖

> ID：13465113
> 
> 赞同：0
> 
> 时间：2012-11-20T01:02:55.887
> 
> 标签：php, class, this-pointer

对此可能有一个非常简单的解释，但是我已经让这段代码工作了几个月，现在突然间今天它不起作用了。

我从表中检索所有行。我有和对象，它是我从中选择的表的实体模型。当我从关联结果数组中读取行时，我使用“$this->propertyName”存储每个属性，然后将每个对象推送到一个数组中。在我以对象数组结束之前，现在我以重复相同对象的数组结束。这是一个代码片段：

```
 $mdSelectALL_sql="SELECT * FROM member_data";

     $mdSelectALL=mysql_query($mdSelectALL_sql,$mdConn);

     if(!$mdSelectALL){
            die('Error: ' . mysql_error());
     }
     else{
            echo "RETURNING ALL MEMBER DATA RECORDS!!!<br>";

            //store all records into array
            while($row=mysql_fetch_array($mdSelectALL))
            {

                    $this->mdId=$row['md_id'];
                    $this->mdFname=$row['md_fname'];
                    $this->mdLname=$row['md_lname'];
                    $this->mdEmail=$row['md_email'];
                    $this->mdTwitter=$row['md_twitter'];
                    $this->mdFacebook=$row['md_facebook'];
                    $this->mdMyspace=$row['md_myspace'];
                    $this->mdPhoneNumber=$row['md_phonenumber'];
                    $this->mdNotes=$row['md_notes'];

                    //store records in array
                    array_push($mdArray,$this);

           }//end while

           // print_r($mdArray); prints the array and each element is the last record  encountered in the SQL retrieval

            return $mdArray;

            }//end else 
```

对于每个属性，我的 getter 和 setter 看起来像这样：

```
 function get_mdId(){
              return $this->mdId;
       }

       function set_mdId($id){
             $this->mdId=$id;
       } 
```

和建议或想法？

-TU

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:09:34.060

对象通过引用传递。这意味着当您更改一个值时，该值将在您使用该对象的任何地方发生变化。

当您每次都存储同一个对象时`$this`- 您最终会得到一个对同一对象的引用数组。

要解决它，您可以执行以下操作：

```
$mdArray = array();
while($row=mysql_fetch_array($mdSelectALL))
{
   $tmp_object = new MyObject;   // fill in the name of your object...

   $tmp_object->mdId=$row['md_id'];
   ...

   array_push($mdArray, $tmp_object);
} 
```

# javascript - 如何缩小正则表达式验证失败的原因？

> ID：13465114
> 
> 赞同：0
> 
> 时间：2012-11-20T01:03:03.957
> 
> 标签：javascript, jquery, regex, validation

有没有办法找出什么样的错误（文本是短、长、无效字符）触发了正则表达式中的匹配失败，如下所示？

```
regexes = {
    name: /^[a-zA-Z0-9_ -]{3,32}$/,
    title: /^[a-zA-Z0-9_ -]{3,128}$/,
    text: /^[\w' -]+$/,
    email: /^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,
    phone: /^[0-9-\/]{3,32}$/
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:08:58.243

不，一个正则表达式是否匹配一个字符串，但它不会给你一个失败的原因。

如果您想知道这一点，您需要拆分您的正则表达式并在不同的运行中测试所有条件。例如你的名字模式`/^[a-zA-Z0-9_ -]{3,32}$/`

1.  最小长度：`/^.{3,}/`如果失败，则太短。

2.  最大长度：`/.{0,32}/`如果失败，则太长。

3.  有效字符：`/^[a-zA-Z0-9_ -]*$/`如果失败，则字符串包含不允许的字符。

# grid - 分页工具栏 extjs 4 中的 totalPperty 是什么

> ID：13465123
> 
> 赞同：1
> 
> 时间：2012-11-20T01:03:49.510
> 
> 标签：grid, extjs4, paging, toolbar

下面是我的商店代理...我的问题是什么是 totalProperty？我正在阅读 100 条记录。但我想每页显示 10 条记录。我的 json 中的 totalProperty 应该是 10 还是 100？

```
 proxy: {
        type: 'ajax',
        url: 'GridView/writeRecord',
        reader: {
            type: 'json',
            totalProperty: "count",
            root: "myTable"
        }
    }, 
```

这是我的 JSON

```
{
"count": 100,
"myTable": [
{ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:19:35.647

这在文档中有所介绍

> 要从中检索数据集中记录总数的属性的名称。仅当整个数据集不是一次性传递，而是从远程服务器分页时才需要这样做。

所以应该是100。

# php - 解析维基百科类别

> ID：13465126
> 
> 赞同：0
> 
> 时间：2012-11-20T01:03:58.133
> 
> 标签：php, json, wikipedia

我正在尝试使用以下 URL 解析维基百科类别：

[http://en.wikipedia.org/w/api.php?action=query&format=json&cllimit=max&prop=categories&titles=Albert%20Einstein](http://en.wikipedia.org/w/api.php?action=query&format=json&cllimit=max&prop=categories&titles=Albert%20Einstein)

...其中“阿尔伯特·爱因斯坦”是任何维基百科页面

我遇到的问题是我不确定如何在不对 pageid 进行硬编码的情况下进行解析，pageid 是可变的（在本例中为“736” - 仅适用于该页面）。

注意：我今天刚开始学习 JSON，所以这可能很容易。

```
$page = $_GET['page'];
$page = str_replace('_',' ',$page);

$url = 'http://en.wikipedia.org/w/api.php?
action=query&format=json&cllimit=max&prop=categories&titles='.$page;

echo $url;

$ch = curl_init($url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_USERAGENT, "TestScript");

$c = curl_exec($ch);
$json = json_decode($c);

$content = $json->{'query'}->{'pages'}->{'736'}->{'categories'};

print_r ($content); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:15:00.537

人们会假设至少在理论上可以有多个页面，那么为什么不呢：

```
foreach ($json->{'query'}->{'pages'} as $page) {
    print_r ($page->{'categories'});
} 
```

# c - 如何在 C 中读入目标文件？

> ID：13465129
> 
> 赞同：0
> 
> 时间：2012-11-20T01:04:02.027
> 
> 标签：c, fgetc

假设有一个目标文件 input.obj。在终端中，如果我执行“cat input.obj”，它会返回一些随机字符，例如“???A?J”。但是当我“hexdump”它时，它会显示我想读入程序的值。

我将这个 obj 文件读入 program.c，首先使用 fopen 打开它，然后使用 fgetc 逐字节读取。但是，它实际上是在读取“cat input.obj”中显示的内容，而我希望它读取 hexdump 中的实际内容。有任何想法吗？

代码片段（来自海报的评论）：

```
 char *filename; 
 FILE *f; 
 char c; 
 f = fopen(filename, "r"); 
 c = fgetc(f); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:10:57.337

本质上，您需要打印每个字节的整数表示以获得所需的内容，而不是字节本身。尝试这个：

```
char ch = ...; // Set ch to the value you read from the file
printf("%x", ch & 0xff); 
```

& 0xFF 确保将值打印为 1 个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-23T13:08:02.207

这也是我曾经面临的一个问题。令人惊讶的是 fopen 和 fgetc 不会得到整个文本文件，并且会在不解析整个目标文件的情况下到达 EOF。

请改用 open() 和 read() 系统调用。您可以使用手册页检查它们的语法。

他们给你整个目标文件，就像你做的那样

$ hexdump -C 1_hello.o

# c - 在函数 arg 中传递指针与返回值之间的实现效率

> ID：13465132
> 
> 赞同：0
> 
> 时间：2012-11-20T01:04:15.917
> 
> 标签：c

> **可能重复：**
> [如何在 C++ 中“返回一个对象”](https://stackoverflow.com/questions/3350385/how-to-return-an-object-in-c)

假设有一个函数 func_foo 可以对给定的数据集进行一些计算，并在处理一些数字后得出需要返回给调用者的结果。将指针传递给结果变量是否有任何奖励（性能方面），并且它在函数与返回值的函数中得到修改 - 除了 Char* 和结构类型结果的便利性/实用性之外。

在发布问题之前，我对此查询进行了初步搜索，但找不到任何相关内容。如果存在相关讨论，请指出我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:12:47.950

作为常见的建议，以最容易阅读的方式对其进行编码。仅当分析表明这是一个瓶颈时才改变这种方式。

除非您打算返回一个可能需要复制的大结构，否则差异很小。即使在大结构的情况下，如果编译器很聪明，当您查看生成的代码时，两者在本质上是等价的。

大多数编译器使用寄存器来返回适合寄存器的值，这非常快。因此，对于这样的值，我无法想象使用指针返回值是一种优势的情况。

最后，将错误代码作为函数值返回是一种常见的 C 约定。因此，在这种情况下，使用指向内存的指针来返回值也很常见。使用此约定的 API 往往是统一的，因此易于使用。

非常简单的例子：

```
struct list_s {
   int size;
   struct element_s *array;
}

int initialize_list(struct list_s *list, int size)
{
   int err_code = 0;

   // do the intialization of *list, setting err_code if something goes wrong
   list->array = malloc(size * sizeof(struct element_s));
   if (list->array)
     list->size = size;
   else {
     size = 0;
     err_code = ERR_OUT_OF_MEMORY;
   }

   return err_code;
} 
```

# javascript - 使用jqueryTOOLS根据触发器类调整一些工具提示的位置

> ID：13465133
> 
> 赞同：0
> 
> 时间：2012-11-20T01:04:17.790
> 
> 标签：javascript, jquery, tooltip, jquery-tools

我正在使用 jquery 的[jqueryTOOLS](http://jquerytools.org/demos/tooltip/index.html)插件为我网站上的一组表单字段生成工具提示。

事件触发器由一小段 javascript 决定：

```
$(function() {
$("#myform :input[title],label[title]").tooltip({
position: "top center",
offset: [-10, 0],
effect: "fade",
opacity: 1.0
      });
    }); 
```

可以看到，这会触发 s 和 s 的 title 属性作为工具提示 onFocus。

您还可以看到，工具提示的配置是作为此 javascript 的一部分进行的，位置已设置，以及偏移量等。

**我的问题：**

相对于合适的表单中的字段，工具提示无法占据一个位置。有些元素我需要它出现在左边，一些在右边，还有一些在上面。我正在寻找一种基于元素类的方法来指定元素的替代位置。

**我试过了：**

设置我需要提示出现在左侧的元素的类，如下所示：

```
<input  
        title="This text becomes the tooltip" 
        class="errorleft" 
        type="radio" 
        name="somename" 
        value="value" 
        id="elementID"  
                /> 
```

然后调整我的 javascript 以包含一个额外的触发器：

```
$(function() {
$("#myform :input[title],label[title]").tooltip({
position: "top center",
offset: [-10, 0],
effect: "fade",
opacity: 1.0
      });
    });

    $(function() {
$("#myform.errorleft :input[title],label[title]").tooltip({
position: "center left",
offset: [0, 0],
effect: "fade",
opacity: 1.0
      });
    }); 
```

这不起作用（我知道为什么），我知道有办法做到这一点，但我看不到办法，到目前为止，我在 jqt 网站上找到的文档都没有讨论过这个问题。

任何想法都非常感谢

**jsFiddle**
这是我使用演示表单的情况的 jsfiddle，以及我尝试过的代码 - 在此示例中，电子邮件字段具有类“errorleft”，而所有其他字段都是无类的。所有工具提示都显示在右侧 [http://jsfiddle.net/DjHr7/1/](http://jsfiddle.net/DjHr7/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:50:20.450

您的选择器中缺少一个空格。如目前所写，

```
$("#myform.errorleft :input[title],label[title]") 
```

意思是，找到具有 id **#myform**和类**.errorleft**的元素。它应该使用以下语法：

```
$("#myform .errorleft") 
```

这意味着，在 id 为**#myform**的元素中找到类**.errorleft的元素**

 **`:input[title],label[title]`（如果你给每个输入字段一个类，你不必担心添加**

# codeigniter - Codeigniter 扩展助手但想调用旧助手

> ID：13465136
> 
> 赞同：1
> 
> 时间：2012-11-20T01:04:41.790
> 
> 标签：codeigniter

我正在篝火中开发一个应用程序。

他们扩展了表单助手。

有没有办法从 Codigniter 调用原始表单助手而不从 Bonfire 中删除扩展的表单助手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:12:47.450

“帮助程序”只是其中包含 PHP 函数的文件。它们实际上并没有“扩展”，Codeigniter在加载你的*之后*加载它的默认助手，并检查你是否“覆盖”了这样的函数：

```
if ( ! function_exists('form_open'))
{
    function form_open() {/* default code */}
} 
```

所以不幸的是，不 - 如果您已经声明了自己的函数，则无法调用原始函数。

**但是**`function_exists`： Bonfire似乎做了完全相同的事情，用（这可能会产生可怕的副作用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T06:33:16.913

面对同样的问题，user742736 的评论是解决问题的唯一答案。解释得很详细，可能这可以帮助一些人

您可以创建自己的辅助函数，而无需在此处的下拉列表 bonfire/application/helpers/MY_form_helper.php 复制函数 form_dropdown，将其命名为 form_dropdown_plain

修改函数的最后几行以输出不带 div 的内容

调用 form_dropdown_plain 而不是 form_dropdown

# php - 用相关值替换值

> ID：13465137
> 
> 赞同：0
> 
> 时间：2012-11-20T01:05:27.523
> 
> 标签：php, sql

我有一个显示画廊详细信息的表，每个条目都有一个 Gallery_ID，其中一个字段是 gallery_parent，如果记录没有父项，则为 0，如果有，则为父项的编号。

```
ID| Name      | parent
1 | gallery A | 0
2 | gallery B | 0
3 | gallery C | 0
4 | gallery D | 1
5 | gallery E | 2 
```

如何用父画廊名称替换父画廊编号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:11:08.600

你需要两个使用`LEFT JOIN`

```
SELECT  a.ID,
        a.Name,
        b.Name as ParentName               //-- you can apply COALESCE here
FROM    tableName a
        LEFT JOIN   tableName b
            ON a.parent = b.id 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/e222a/1)
*   [SQLFiddle 演示（*使用 COALESCE*）](http://sqlfiddle.com/#!2/e222a/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:22:39.337

上面的答案显示了如何选择数据，如果您确实想要更新并且如果父级是 varchar，您可以执行以下操作

```
UPDATE gal t1
LEFT JOIN gal t2 ON t1.parent=t2.ID
SET t1.parent = t2.name 
```

# netbeans - 使用 netbeans 和 xdebug 进行调试不起作用 - netbeans 不启动浏览器

> ID：13465140
> 
> 赞同：2
> 
> 时间：2012-11-20T01:05:48.547
> 
> 标签：netbeans, xdebug

尝试和错误..即使在“谷歌搜索”周围 2 小时后也没有帮助我。似乎没有人有我的问题，或者有一个我看不到的简单解决方案。

我的 phpinfo() 显示 xdebug 就好了：

```
version         2.1
xdebug.remote_enable    On
xdebug.remote_handler   dbgp
xdebug.remote_host      localhost
xdebug.remote_mode      req
xdebug.remote_port      9000 
```

我的 netbeans 监听端口 9000（但只是在 ipv6 上；可能是这个问题）：

```
tcp6       0      0 :::9000                 :::*                    LISTEN      5290/java 
```

可通过 telnet 访问 Netbeans：

```
$ telnet localhost 9000
Trying 127.0.0.1...
Connected to localhost. 
```

但是在我单击“停止”按钮之前，netbeans 不会启动浏览器。然后它会打开一个带有 ?XDEBUG_SESSION_START=netbeans-xdebug 的浏览器。如何为netbeans禁用ipv6？我不想禁用整个 ipv6 支持（在 phpinfo() 中启用了 ipv6 支持）。还有其他想法吗？

版本：

```
OS: Ubuntu 12.04 LTS
Apache: 2.2.22
PHP-CGI: 5.3.10
Netbeans: 7.2
Java: 1.7.0_05 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-01T04:00:10.210

我遇到了与浏览器没有出现相同的问题，以下是解决问题的方法。实际上有 3 个潜在位置可以指定调试端口

1.  php.ini -- {xdebug.remote_port=9000}
2.  在Netbeans IDE下--preferences--php--general {debugger port=9000; 会话 ID = netbeans-xdebug}
3.  在运行配置中 - 高级！不要设置这个——它指的是“调试器代理”，如果你设置这个，浏览器窗口不会出现，直到你在 netbeans - 首选项 - 常规选项卡中保持相同的代理设置。

PS：以上所有或在Mac上..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T08:32:55.957

在我的情况下，运行配置中项目属性下的项目 URL 指向一个子目录而不是服务器的根目录，在我更改为 localhost 之后，一切都很好。

看完这篇文章我找到了答案。

[http://shinephp.com/netbeans-7-0-php-waiting-for-connection-to-xdebug/](http://shinephp.com/netbeans-7-0-php-waiting-for-connection-to-xdebug/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:21:40.670

我在项目中有一个糟糕的运行配置。Netbeans 正在等待 localhost:9000 上的调试代理。我不记得设置此设置。如果有人有同样的问题，请检查此配置。

# regex - 替换字符串中的数字

> ID：13465141
> 
> 赞同：1
> 
> 时间：2012-11-20T01:06:14.773
> 
> 标签：regex

我正在尝试匹配这个字符串

```
'12.34.5.6',#### OR
'12.34.5.6', #### (Note the space after the comma) 
```

在一系列文件中，并将#### 替换为 2222。

我从小处着手，这条命令成功将 1234 改为 2222

```
sed -i 's/'12.34.5.6\''\,1234/'12.34.5.6\''\, 2222/g' file.txt 
```

所以我继续用正则表达式替换 1234，下面是我尝试过但不起作用的一些命令。

```
sed -i 's/'12.34.5.6\''\,\(\s?[0-9]{4,5}\)/'12.34.5.6\''\, 2222/g' file.txt
sed -i 's/'12.34.5.6\''\,[0-9][0-9][0-9][0-9][0-9]?/'12.34.5.6\''\, 2222/g' file.txt 
```

有人可以帮我解决这个问题或提供一些指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:31:28.140

```
sed -r "s/('12[.]34[.]5[.]6',[ ]?)[0-9]{4}/\\12222/g" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:18:05.113

这可能会奏效：

```
sed -E "s/('12.34.5.6',\s?)[0-9]{4,5}/\12222/g" 
```

**例子：**

```
$ echo "'12.34.5.6', 2134" | sed -E "s/('12.34.5.6',\s?)[0-9]{4,5}/\12222/g"
'12.34.5.6', 2222
$ echo "'12.34.5.6',9230" | sed -E "s/('12.34.5.6',\s?)[0-9]{4,5}/\12222/g"
'12.34.5.6',2222 
```

**说明：**

由于`-E`我们要求`sed`使用[扩展的正则表达式](http://en.wikipedia.org/wiki/Regular_expression#POSIX_Extended_Regular_Expressions)（但这主要是一个口味问题），正则表达式的开头相当简单：`'12.34.5.6',`只需匹配相同的字符串。然后我们添加一个空格，后跟一个`?`表示它是可选的。第一部分包含在大括号中，以便能够在替换模式中使用它。

然后，我们将`#`'s 添加到模式中。`#`根据您对`[0-9]{4,5}`and的尝试，我假设您使用's 代替数字`[0-9][0-9][0-9][0-9][0-9]`。

最后，在替换模式中，我们使用之前匹配的第一对花括号`\1`，并添加我们`2`的 's: `\12222`（这将替换数字 ( `#`'s)，因为没有包含在花括号中，所以在此过程中被丢弃）。

PS。下次请[格式化您的问题](https://stackoverflow.com/editing-help)以获得更好的可读性。聚苯乙烯。我认为这里真正的问题不是正则表达式，而是在你的正则表达式中转义的引号。也许看看[这个问题]。

# jquery - 警告框出现不止一次？

> ID：13465148
> 
> 赞同：0
> 
> 时间：2012-11-20T01:07:52.057
> 
> 标签：jquery, html

html:

```
<div class="box">
   <div><p>Hello World</p></div>
</div>
<input type="button" id="add" value="Add" /> 
```

jQuery：

```
$(document).ready(function(){

  var count = 0;
  $("#add").click(function(){
    $(".box").append('<div id="'+count+'"><button type="button" class="close">&times;  </button></div>');
    count++;
    $(".close").click(function(){
    alert("hi");
    });
  });
}); 
```

当我单击添加时，按钮一个接一个地附加。当我单击 id = 0 的类关闭的第一个按钮时，会出现警告框，显示之前添加按钮的次数。

我的意思是，如果我附加 5 个按钮并且当我按下 close who (id = 0) 时，警报框会出现 5 次。

如果 id = 1 , 4 次
id = 2 , 3 次
id = 3 , 2 次
id = 4, 1 次

如果我将 JQuery 关闭单击功能放在 JQuery 添加功能之外，则根本不会出现警报框。

每当我按下任何关闭按钮时，如何让警报框只出现一次？

希望我以其他人可以理解的方式解释它，如果不是我很抱歉。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T01:10:14.767

```
$(".box").on('click', '.close', function(){
   alert('hi');
}); 
```

绑定处理程序一次，而不是每次附加一个新按钮。
在处理程序中添加上述内容`document.ready`。

我正在演示一种将事件处理程序委托给祖先元素的方法，该元素在初始化时位于 DOM 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:10:41.613

我认为您只需要取消绑定关闭，例如：

```
$('.close').unbind('click'); 
```

因此，在您的最终代码中，这对您来说应该可以正常工作：

```
$(document).ready(function(){

  var count = 0;
  $("#add").click(function(){
    $(".box").append('<div id="'+count+'"><button type="button" class="close">& times;  </button></div>);
    count++;
    $('.close').unbind('click'); //<-- This line here
    $(".close").click(function(){
    alert("hi");
    });
  }); 
```

});

# emacs - irb模式下如何开启自动完成模式？

> ID：13465151
> 
> 赞同：2
> 
> 时间：2012-11-20T01:08:19.897
> 
> 标签：emacs, autocomplete

我已经配置了 AutoComplete 来帮助我编写 Ruby 程序，但是在 irb 窗口中，它是关闭的。如何在随后的 Emacs 启动中打开它并保持这种状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T06:41:33.137

放入您的配置中，例如：

```
 (defun my-inf-ruby-mode-hook ()
    (set (make-local-variable 'ac-auto-start) 2)
    (set (make-local-variable 'ac-auto-show-menu) t)
   )
 (add-hook 'inf-ruby-mode-hook 'my-inf-ruby-mode-hook) 
```

而且我认为，您还需要`ac-sources`在此挂钩中设置变量，因此它将使用 ruby​​ 字典...

# jquery - 验证网址输入 - jQuery 表单验证

> ID：13465154
> 
> 赞同：0
> 
> 时间：2012-11-20T01:09:13.490
> 
> 标签：jquery

我正在尝试让我的表单字段验证是否输入了有效的 Web URL。但它不起作用......无论我搜索多久......我做错了什么？

请注意，表单上的默认值为`<input>`“http://”。

```
 if(/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test(web_url)){
            alert('Please enter valid URL');
            // Do nothing
            return false;
        }; 
```

# iphone - 将新控制器附加到现有故事板

> ID：13465157
> 
> 赞同：0
> 
> 时间：2012-11-20T01:09:56.670
> 
> 标签：iphone, view, controller, storyboard, nib

我正在做一些 iPhone 开发，我正在使用 Storyboards 来模拟和加快我的开发。

我不是来自传统的做事方式，我必须这样做吗？

无论如何，我有故事板，

```
 TableViewController
NavigationController->ViewController->TabViewController [
                                                          AnotherViewController 
```

我想添加一个附加到 TableViewController 的新 ViewController，这样当我单击行项目时，它会在另一个视图上显示它；

1.  我找不到如何将新的 ViewController 连接到 TableViewController 的方法（反之亦然）

所以我尝试了常规的做事方式

```
didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

我把ff：

```
CViewController *controller = [[CViewController alloc] initWithNibName:????? bundle:nil];
[self.navigationController pushViewController:controller animated:YES];
[controller release]; 
```

我试图在 Attributes Inspector 上给控制器一个标识符，但它不起作用，并且给了我以下崩溃堆栈：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/paulvincentong/Library/Application Support/iPhone Simulator/5.1/Applications/A1C369F8-9EAD-4794-8861-945C73F7FE0B/SyncProto.app> (loaded)' with name 'ControllerViewName' 
```

如果我删除标识符，我会得到一个 no NibName 异常；

我该怎么办？我知道它应该与我能够达到四个级别的相关控制器相同，我的脑后可能有些东西让我感到困惑......

TIA,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:20:39.490

在你的 cellForRow 中试试这个

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath  
*)indexPath{

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Storyboard" 
bundle:nil];

ViewCont * view = (ViewCont *) [storyboard   
     instantiateViewControllerWithIdentifier:@"view"];

[tableView deselectRowAtIndexPath:indexPath animated:YES];  

[self view animated:YES completion:nil];

} 
```

确保您在项目管理器中也设置了故事板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:11:17.247

你在用IB吗？在那里你可以直接拖动。

否则在情节提要中，您不会使用您所说的推送方法。您使用 performSegueWithIdentifier。故事板是关于 segues 的。您可以直接进行 segue 或使用目标操作。

同样，故事板的优势在于它们的视觉表现。使用 IB。

否则，您可能还会考虑委托（ipad 的 ESP）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T05:06:57.743

在玩了之后......我找到了适合我的问题的答案；

我的问题似乎是

1.  困惑 - 一个新程序员的困境.. 虽然这个问题是一个常见的问题，但我们永远不会真正偏离它是否真的与那些已经存在并且之前问过的问题相同，直到我们自己尝试并发现它确实是。

解决方案可能因情况而异；对我来说，我试着做 ff：

方法1：（使用“instantiateViewControllerWithIdentifier”）带有segue箭头

1.  创建要添加的视图
2.  将鼠标指针定位到要触发 segue的 Nib 元素*源视图控制器，然后保持控制*
3.  将鼠标拖动到*目标视图控制器*
4.  将出现一个弹出窗口，选择您的 segue 类型（推送、模式、自定义）然后自动 xcode 将创建必要的连接
5.  选择您的目标视图控制器，在属性检查器上有一个带有标识符字段的可折叠组 - >在此字段上，您将为视图放置自定义标识符

所以源代码看起来像；

```
ViewController *view = [self.storyboard instantiateViewControllerWithIdentifier:@"CustomViewName"];
[self.navigationController pushViewController:view animated:YES]; 
```

方法2：（使用“instantiateViewControllerWithIdentifier”）没有segue箭头

1.  创建要添加的视图
2.  为新控制器提供必要的标识符，然后你就可以开始了
3.  使用与上述相同的来源

但是，使用这种方法会破坏故事板的一致性，为什么要使用这种方法？（仍然是我必须找出的东西），当您开始寻找从未存在的 segue 箭头时，它并不明显，尽管它有效。

由于我没有带有名称的笔尖 ????，此代码将不起作用，

```
CViewController *controller = [[CViewController alloc] initWithNibName:????? bundle:nil];
[self.navigationController pushViewController:controller animated:YES]; 
```

并且由于它在故事板上并**假设**一切都是使用故事板完成的，那么是时候忘记 nibName 因为它永远不会发生..

希望这个想法能帮助一些人......

学习是一个彻底的过程，但它是一件非常有趣的事情......

谢谢。

# c# - C# 需要帮助将文本值传递给其他表单文本框

> ID：13465158
> 
> 赞同：1
> 
> 时间：2012-11-20T01:10:06.997
> 
> 标签：c#, winforms

C# 文本框发送文本值。情况，我有2个表格。表格 1 和表格 2。Form1 有一个文本框，form2 有一个文本框和一个按钮，我将在 form2 文本框上放置一个文本值，当我单击 form2 按钮时，将发送 form2 文本框的值并更改 form1 文本框的值...。需要帮助。 .

这就是我所做的……我只是总结一下

**Form1 没有代码，只有 textbox1**

**这是form2按钮中的代码**

```
 private void change_Click(object sender, EventArgs e)
        {
         form1 frm1 = new form();
         string test = textbox2.text
         frm1.textbox.text = test;

} 
```

我尝试了一些弹出消息框来检查值是否通过......到目前为止，该值确实通过了，但 UI 中没有任何变化

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:25:27.047

假设您创建`Form2`为`Form1`(from inside 的子级`Form1`，执行类似的操作`Form2 from = new Form2();`，您可以从父级内部访问子表单的任何公共属性。因此，只需确保将 to 的可访问性设置`TextBox`为`public`，并执行以下操作：

```
var form = new Form2();
form.ShowDialog();
this.TextBox1.Text = form.TextBox1.Text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:18:32.843

您可以将 Form1 中的文本框声明为公开的，然后您可以通过以下方式从 form2 访问它`form1.textBoxName.propertyName`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T01:22:12.460

您可以为此使用事件：

定义一个接口：

```
public interface ITextChange
{
    event EventHandler SomeTextChanged;
} 
```

然后让您使用按钮实现此接口并在按钮单击时触发事件，将文本框中的值作为第一个参数传递：

```
public partial class Form1 : Form, ITextChange
{
    public event EventHandler SomeTextChanged = delegate { };

    public Form1 () {}

    private void button1_Click(object sender, EventArgs e)
    {
        SomeTextChanged(textBox1.Text, null);
    }
} 
```

将此表单的一个实例传递给您的第二个表单，如下所示：

```
public partial class Form2 : Form
{
    public Form2(ITextChange f)
    {
        InitializeComponent();
        f.SomeTextChanged += new EventHandler(f_SomeTextChanged);
    }

    void f_SomeTextChanged(object sender, EventArgs e)
    {
        textBox1.Text = sender.ToString();
    }
} 
```

因此，当您创建 Form2 时，您需要传递 Form1 的实例：

```
Form2 f = new Form2(form1); 
```

按下按钮后，第二个表单上的文本框将自动获取值。

PS：更多信息请看[活动教程](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T01:30:25.820

您可以通过公开 TextBox 来依赖 Form2 中的 Form1 知识。但在我看来，正确的方法是创建一个自定义事件处理程序，在 Form2 中订阅它并将文本作为 eventarg 传递。*改编[自此 MSDN 文章的代码](http://msdn.microsoft.com/en-us/library/w369ty8x.aspx)*

**表格1**

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            Form2 frm2 = new Form2();
            frm2.RaiseCustomEvent+=new CustomEventHandler(frm2_RaiseCustomEvent);
            frm2.Show(this);
        }

        void frm2_RaiseCustomEvent(object sender, CustomEventArgs a)
        {
            textBox1.Text = a.Message;
        }
    }
} 
```

**表格2**

```
namespace WindowsFormsApplication1
{
    public delegate void CustomEventHandler(object sender, CustomEventArgs a);

    public partial class Form2 : Form
    {
        public event CustomEventHandler RaiseCustomEvent;
        public Form2()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            RaiseCustomEvent(this, new CustomEventArgs(textBox1.Text));
        }
    }

    public class CustomEventArgs : EventArgs
    {
        public CustomEventArgs(string s)
        {
            msg = s;
        }
        private string msg;
        public string Message
        {
            get { return msg; }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-21T03:04:25.273

[您可以使用 .Tag 属性（在这里](https://stackoverflow.com/questions/13468241/how-to-apply-more-than-one-tag-property-in-c)看我的问题 ，简单的方法是这样的：您说 form2 中的 textBox.text 将替换 form1 中的 texBox.text 对吗？在 form2 中执行此操作

```
try
{
    private void change_Click(object sender, EventArgs e)
    {
         form2 frm2 = new form();
         frm2.Tag = this.textbox2.text;
         frm2.ShowDialog();
    }
}
catch (Exception ex)
{
   MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

然后在加载 form1 时写下这个

```
string myText = (string)this.Tag;
   this.textbox1.text = myText; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-13T10:12:10.900

您的 form1.textbox1 未更新的原因是您初始化了 form1 的新实例

```
form1 frm1 = new form(); 
```

因此，要更新屏幕上的 form1，您需要将其实例注入到 form2 中。例如，当您显示 form2 时，您设置了。

form2.Form1 = currentForm1Instance；

希望这可以帮助。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-02-13T10:04:18.313

我也有同样的疑问，所以我在互联网上搜索并找到了一种在 C# 中的表单之间传递变量值的好方法，这很简单，我期望的。没什么，只是在第一个表单中分配一个变量，您可以从任何表单访问该变量。我创建了一个关于“如何将值传递给表单”的视频教程

**转到以下链接以查看视频教程。**

[**在 Visual C# 中将文本框文本传递给另一个窗体**](https://www.youtube.com/watch?v=oLisJCbRHVs)

# php - Magento 在结帐/购物车中为每个产品设置自定义税额

> ID：13465163
> 
> 赞同：1
> 
> 时间：2012-11-20T01:11:20.770
> 
> 标签：php, zend-framework, magento, shopping-cart, checkout

我们正在使用 Magento 企业版，总的来说，我对 Magento 还很陌生。但我目前的目标是在购物车中设置自定义值（即自定义税额、促销金额等），并让他们使用这些自定义值结帐。我通过使用结帐/会话对象设置这些值。

例如：

> $cart = Mage::getSingleton('checkout/session')->getQuote(); $cart->setPromotionAmount($amount);

当我查看结帐/会话对象时

> print_r($cart->getData());

一切看起来都设置正确。但是当我进行结帐时。它会丢失这些值并默认为 Magento 执行的默认计算。我的假设是，如果我在此结帐/会话中设置自定义值。它将通过正常的结帐流程。检查这些新值。（即促销金额、关税金额）不是这样的。任何人都可以就如何完成此任务或建议给我建议吗？我开始意识到我不了解完整的结帐过程，并且会喜欢任何有用的链接或调试技巧。非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:46:44.347

你在打电话`$cart->save();`吗？由于报价存储在数据库中，也许您只是在 PHP 中设置页面加载期限的定价。这可以解释为什么一旦您继续结帐，报价就会从数据库中重新加载原始定价。

# php - SoapHeader 子节点中的 PHP 命名空间

> ID：13465168
> 
> 赞同：15
> 
> 时间：2012-11-20T01:12:26.990
> 
> 标签：php, xml, namespaces, soapheader

PHP SoapClient 标头。我在获取子节点中的命名空间时遇到问题。这是我正在使用的代码：

```
$security = new stdClass;
$security->UsernameToken->Password = 'MyPassword';
$security->UsernameToken->Username = 'MyUsername';
$header[] = new SOAPHeader('http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd', 'Security', $security);
$client->__setSoapHeaders($header); 
```

这是它生成的 XML：

```
<ns2:Security>
  <UsernameToken>
    <Password>MyPassword</Password>
    <Username>MyUsername</Username>
  </UsernameToken>
</ns2:Security> 
```

这是我希望它生成的 XML：

```
<ns2:Security>
  <ns2:UsernameToken>
    <ns2:Password>MyPassword</ns2:Password>
    <ns2:Username>MyUsername</ns2:Username>
  </ns2:UsernameToken>
</ns2:Security> 
```

我需要将命名空间引用放入 UsernameToken、Password 和 Username 节点。任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-10T15:35:08.340

[David](https://stackoverflow.com/users/1370430/david) has the [right answer](https://stackoverflow.com/a/13477414/111755). And he is also right that it takes *way too much effort and thought*. Here's a variation that encapsulates the ugliness for anyone working this particular wsse security header.

**Clean client code**

```
$client = new SoapClient('http://some-domain.com/service.wsdl');
$client->__setSoapHeaders(new WSSESecurityHeader('myUsername', 'myPassword')); 
```

**And the implementation...**

```
class WSSESecurityHeader extends SoapHeader {

    public function __construct($username, $password)
    {
        $wsseNamespace = 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd';
        $security = new SoapVar(
            array(new SoapVar(
                array(
                    new SoapVar($username, XSD_STRING, null, null, 'Username', $wsseNamespace),
                    new SoapVar($password, XSD_STRING, null, null, 'Password', $wsseNamespace)
                ), 
                SOAP_ENC_OBJECT, 
                null, 
                null, 
                'UsernameToken', 
                $wsseNamespace
            )), 
            SOAP_ENC_OBJECT
        );
        parent::SoapHeader($wsseNamespace, 'Security', $security, false);
    }

} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-20T16:17:03.570

弄清楚了。我使用了嵌套的 SoapVars 和数组。

```
$ns_s = 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd';
$node1 = new SoapVar('MyUsername', XSD_STRING, null, null, 'Username', $ns_s);
$node2 = new SoapVar('MyPassword', XSD_STRING, null, null, 'Password', $ns_s);
$token = new SoapVar(array($node1,$node2), SOAP_ENC_OBJECT, null, null, 'UsernameToken', $ns_s);
$security = new SoapVar(array($token), SOAP_ENC_OBJECT, null, null, 'Security', $ns_s);
$header[] = new SOAPHeader($ns_s, 'Security', $security, false); 
```

这完全花费了太多的努力和思考......

# c++ - Qt 控制台场景中未调用析构函数

> ID：13465172
> 
> 赞同：2
> 
> 时间：2012-11-20T01:12:44.823
> 
> 标签：c++, qt

我有一个问题可能看起来太简单了，但无论如何我都想了解答案。

示例代码如下。

* * *

```
 #include <QtCore/QCoreApplication>
    #include "parent.h"
    #include "childa.h"
    #include "childb.h"

    int main(int argc, char *argv[])
    {
        QCoreApplication a(argc, argv);

        Parent one;
        ChildA two;
        ChildB three;

        return a.exec();
    } 
```

* * *

```
#ifndef CHILDA_H
#define CHILDA_H

#include <iostream>
#include "parent.h"

using namespace std;

class ChildA : public Parent
{
public:
    ChildA();
    ~ChildA();
};

#endif // CHILDA_H 
```

* * *

```
 #ifndef CHILDB_H
    #define CHILDB_H

    #include <iostream>
    #include "parent.h"

    using namespace std;

    class ChildB : public Parent
    {
    public:
        ChildB();
        ~ChildB();
    };

    #endif // CHILDB_H 
```

* * *

```
#ifndef PARENT_H
#define PARENT_H

#include <iostream>

using namespace std;

class Parent
{
public:
    Parent();
    virtual ~Parent();
};

#endif // PARENT_H 
```

* * *

```
#include "childa.h"

ChildA::ChildA()
{
    cout << "in Child A const\n";
}

ChildA::~ChildA()
{
    cout << "in Child A destructor\n";
} 
```

* * *

```
#include "childb.h"

ChildB::ChildB()
{
    cout << "in Child B const\n";
}

ChildB::~ChildB()
{
    cout << "in Child B destructor\n";
} 
```

* * *

```
#include "parent.h"

Parent::Parent()
{
    cout << "in Parent const\n";
}

Parent::~Parent()
{
    cout << "in Parent destructor\n";
} 
```

* * *

为什么我没有看到调用的析构函数？
对象变量应该超出 main 的范围，应该调用析构函数，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:19:39.033

您的对象永远不会超出范围，因为您的应用程序不存在（即您不会超出主函数的范围）。您需要关闭您的应用程序，然后这样做：

```
int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    Parent one;
    ChildA two;
    ChildB three;
    // This will immediately terminate the application
    QTimer::singleShot(0, &a, SLOT(quit()));
    return a.exec();
} 
```

请注意，您可以将计时器设置为在特定时间内执行，对于上面的示例，我已将其设置为在 0 毫秒后执行。

如果您不想关闭应用程序，则可以强制范围

```
int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    // Force scope
    {
        Parent one;
        ChildA two;
        ChildB three;
    }

    return a.exec();
} 
```

# c - C 在头文件中使 volatile sig_atomic_t 全局化

> ID：13465179
> 
> 赞同：1
> 
> 时间：2012-11-20T01:13:27.883
> 
> 标签：c, global, volatile, sigint, sig-atomic-t

我正在尝试创建一个全局变量，在我的 msh.c 文件中初始化为：

```
volatile sig_atomic_t sig_int = 0; 
```

仅此一项似乎还不错。但是，如果我转到我的 proto.h 文件（该文件包含在该项目的所有 c 文件中），然后键入：

```
extern volatile sig_atomic_t sig_int; 
```

它抛出了一堆错误：

```
gcc -c -Wall msh.c arg_parse.c builtin.c expand.c
In file included from arg_parse.c:5:
proto.h:3: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘sig_int’
In file included from builtin.c:13:
proto.h:3: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘sig_int’
In file included from expand.c:11:
proto.h:3: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘sig_int’
make: *** [msh.o] Error 1 
```

我究竟如何使这个变量成为全局变量？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:44:50.523

您的`proto.h`文件需要包含`<signal.h>`以便`sig_atomic_t`定义类型，仅此而已。

# multithreading - 限制 Groovy 中的线程数

> ID：13465180
> 
> 赞同：6
> 
> 时间：2012-11-20T01:13:37.487
> 
> 标签：multithreading, grails, groovy

如何限制同时执行的线程数？这是我的算法示例：

```
for(i = 0; i < 100000; i++) {
    Thread.start {
        // Do some work
    }
} 
```

我想确保一旦我的应用程序中的线程数达到 100，算法将暂停/等待，直到应用程序中的线程数低于 100。

目前“一些工作”需要一些时间来完成，我最终在我的应用程序中有几千个线程。最终它耗尽了线程并且“一些工作”崩溃了。我想通过限制一次可以使用的池数量来解决它。

请让我知道如何解决我的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T01:50:43.377

我相信您正在寻找`ThreadPoolExecutor`Java 并发 API 中的一个。这里的想法是，您可以定义池中的最大线程数，然后无需使用 Runnable 启动新线程，只需`ThreadPoolExecutor`管理线程的上限即可。

从这里开始：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)

```
import java.util.concurrent.*;
import java.util.*;

def queue = new ArrayBlockingQueue<Runnable>( 50000 )
def tPool = new ThreadPoolExecutor(5, 500, 20, TimeUnit.SECONDS, queue);

for(i = 0; i < 5000; i++) {
    tPool.execute {
      println "Blah"
    }
} 
```

ThreadBlockingQueue 构造函数的参数：`corePoolSize (5)`，这是在系统空闲时要创建和维护`maxPoolSize (500)`的线程数，要创建的最大线程数，第 3 和第 4 个参数表示池应保持空闲线程至少 20 秒， queue 参数是一个阻塞队列，用于存储排队的任务。

您想要玩的是队列大小以及如何处理被拒绝的任务。如果你需要执行 100k 个任务，你要么必须有一个可以容纳 100k 个任务的队列，要么你必须有一个策略来处理被拒绝的任务。

# ios - Xcode，模拟器：在旧版模拟器上启动时应用程序崩溃

> ID：13465181
> 
> 赞同：1
> 
> 时间：2012-11-20T01:13:39.267
> 
> 标签：ios, xcode, version, simulator

我在支持旧版本的 iOS 时遇到了一些问题。当我的一个朋友使用我的应用程序并且它崩溃时，我第一次注意到这一点。他正在运行 iOS 5，而我正在运行 iOS 6。我正在使用基本 SDK 6.0 进行构建，并且尝试更改部署目标、架构以及几乎所有我能找到和想到的东西。没有任何效果，在 iOS 5 模拟器上构建时，应用程序在启动时崩溃。

我需要解决这个问题，以便下载我的应用程序的旧版本用户不会遇到崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:17:24.530

您是否在任何`xib`文件上使用自动布局？默认情况下你会。如果您仍然存在，请将其关闭。

# java - 在 ActionListener 中写入文件

> ID：13465186
> 
> 赞同：1
> 
> 时间：2012-11-20T01:14:27.053
> 
> 标签：java, swing, file, actionlistener, event-dispatch-thread

因此，当我按下某个按钮时，我的文件应该会“安全”更新。我的代码是：

```
 public void writeBallot() throws IOException{
    //need to make a new file
    File realfile = new File("Ballots.txt");
    File tempfile = new File("ballottemp.txt");
    tempfile.createNewFile();
    PrintWriter p = new PrintWriter(tempfile);

    for ( int i = 0 ; i<theButtons.length; i ++)
        p.println(indivelection.get(i) + ":" + intcounts[i]);

    realfile.delete();

    tempfile.renameTo(realfile); 
```

当我按下某个按钮时，应该执行此方法。我为按钮编写的代码是：

```
if(e.getSource()==castVoteButton){

            int reply = JOptionPane.showConfirmDialog(null,"Are you sure you are done voting?", "Are You Sure?", JOptionPane.YES_NO_OPTION);

            if (reply == JOptionPane.YES_OPTION){
                for (int j = 0; j<thePanels.length; j++){
                ((Ballot) thePanels[j]).buttonStatus(false);
                ((Ballot)thePanels[j]).checkyocolors();
                }
                castVoteButton.setEnabled(false);
                loginButton.setEnabled(true);

                for (int p = 0; p<thePanels.length; p++)
                    try {
                        ((Ballot)thePanels[p]).writeBallot();
                    } catch (IOException e1) {
                        e1.printStackTrace();} 
```

现在，我已经测试了在另一个类中编写更新文件的方法，它似乎可以工作，但是一旦我将它包装在 try, catch 中，这显然是 ActionListener 所必需的，它似乎没有做任何事情。

有没有人有任何建议或提示，以便我可以在按下 JButton 时实现我的方法？

# maven - Maven 发布过程替代

> ID：13465188
> 
> 赞同：4
> 
> 时间：2012-11-20T01:14:36.383
> 
> 标签：maven, maven-2, jenkins, release-management, maven-release-plugin

**问题：** 20 个不同的 JAVA 项目，相互依赖很多。每次在代码锁定后修复错误时，我们都必须根据需要发布一堆工件，具体取决于哪个工件发生了变化。例如，如果工件 3 已解锁并需要修复错误，我们将需要发布（使用 maven 发布插件）项目 3、4、5、6、7 和 10（因为 4、5、6、7 和 10 是取决于 3)。团队之间进行协调以完成这项任务需要时间。加上构建每个工件需要 20-40 分钟。

我们想缩短这个过程。我们正在考虑以下几点：

1.  使用带有时间戳的工件的快照
2.  使用 jenkins 作业和标记 svn 将单个工件提升到存储库。
3.  使用 mvn version:set 命令为每个需要依赖项的项目更新依赖项。

有没有人实施类似于上述的解决方案？如果是这样，您遇到了什么问题？

**任何其他不会重建工件并允许我们通过单击按钮释放 15-20 个工件的建议都会有所帮助:)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:37:57.743

不幸的是，如果你改变你的 pom 文件，你必须重建你的工件。否则，您在 VCS 中的状态并不代表您正在使用的状态。

让我们举个例子。项目 A，项目 B，其中 B 依赖于 A：

项目A：pom.xml

```
 <version>1.0-SNAPSHOT</version>
   Some dependencies etc. 
```

项目B：pom.xml

```
 <version>1.0-SNAPSHOT</version>

   Some dependencies etc. 
   <dependency>
     <groupId>project.a</groupId>
     <artifactId>A</artifactId>
     <version>1.0-SNAPSHOT</version>
   </dependency> 
```

现在您构建项目 A 和 B。存储库中的状态表示 pom 文件的状态及其对 SNAPSHOT 的状态/依赖关系。

现在您将更改项目 A 以从中“发布”，但您不会重建您的工件。比以下内容在您的版本控制中，并且可能是您对其进行标记。

项目A：pom.xml

```
 <version>1.0</version>
   Some dependencies etc. 
```

其次，您对项目 B 执行相同操作：项目 B：pom.xml

```
 <version>1.0</version>

   Some dependencies etc. 
   <dependency>
     <groupId>project.a</groupId>
     <artifactId>A</artifactId>
     <version>1.0</version>
   </dependency> 
```

但是您也不会重建您的人工制品。结果是您的存储库确实包含代表 SNAPSHOT 状态的工件，但您的版本控制说明了不同的内容。这只是问题的一个非常简单的例子。如果你有更多的项目等，事情会变得更糟。

此外，我会重新考虑更改项目结构，因为根据您所写的有关依赖项的内容，这些项目看起来应该一起发布，因此从它们中创建多模块构建可能是一个好主意。

此外，可以通过在 Jenkins 中使用可以处理依赖项的适当作业来完成重建，或者您可以考虑使用[构建管道插件](https://wiki.jenkins-ci.org/display/JENKINS/Build+Pipeline+Plugin)来处理此类事情。

但是我想到了另一个问题：为什么你的构建需要这么长时间？您可能会调查他们为什么要花这么长时间并总体上减少发布时间。

# http - 如何通过多线程最大化下载吞吐量

> ID：13465189
> 
> 赞同：0
> 
> 时间：2012-11-20T01:14:50.067
> 
> 标签：http, networking, optimization, download, web-crawler

我正在使用多线程来加快从 Web 下载一堆文件的过程。

我如何确定应该使用多少线程来最大化或接近最大化总下载吞吐量？

PS：

我正在使用自己的笔记本电脑，带宽为 1Mb。

我要的数据是*coursera.com的网页源代码*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:36:54.693

如果您想加快从网络下载文件的速度，除了线程数之外，还有更多因素。实际上我不相信你会实现这一点，因为你没有描述一些限制（比如服务器端每个连接的最大带宽，你有多链接客户端，你可以使用不同的链接下载不同的数据，你想从不同的服务器下载不同的部分，或类似的）。

在通常情况下，有多个线程来下载某些东西会减慢进程。您将需要维护几个连接并以某种方式同步数据（期望您是否会同时下载例如不同的文件）。

我想说，在“普通”条件下，更大的限制是您的带宽限制，因此使用更多线程不会使下载速度更快。在这种情况下，您将与许多连接共享您的整个带宽。

# cocos2d-iphone - Box2D Obj-C 改变动态碰撞

> ID：13465206
> 
> 赞同：0
> 
> 时间：2012-11-20T01:16:27.613
> 
> 标签：cocos2d-iphone, box2d

我有两个带有接触侦听器的动态主体，让我们调用主体 A 和 B。

当车身 (A.tag == Car) 与车身 (B.tag == Cat) 碰撞时，我不希望汽车被推回，我希望猫被推但不推回汽车（导致车也停下！）

我觉得我错过了一些简单的东西，但是有人可以解释一下我如何操纵 b2Contact 以使一个对象不改变是速度而另一个改变吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:08:43.557

您可以使用 PreSolve 和 PostSolve 回调。在 PreSolve 中将汽车速度、角速度、角度和位置保存在某处 - 例如，作为汽车的 userData 对象上的实例变量。在 PostSolve 中恢复这些值。

PreSolve 在这些物体碰撞之前调用， PostSolve 在碰撞之后调用 - 当速度改变时。自己没有尝试过，但应该可以。

# magento - Magento：每 $X 金额自动将礼券添加到购物车

> ID：13465210
> 
> 赞同：2
> 
> 时间：2012-11-20T01:17:08.183
> 
> 标签：magento, magento-1.6

我们有一个网站，我们正在尝试将某人每消费 1​​00 美元的礼品券添加到购物车中（即，客户每消费 1​​00 美元可获得 10 美元的礼品券）。我们目前正在使用 Magento 1.6.1 和 Unirgy Gift Cerificate 来做我们的礼券系统。有没有人有更好的解决方案或方法来使用我们当前的系统来做我们想做的事？

我研究了一大堆添加到购物车的扩展，但它们似乎都不允许我在购物车中添加礼券。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:11:17.580

扩展是付费的，所以我在这里帮不了你太多，但是：如果您知道如何将礼品卡添加到购物车（检查扩展代码以找出答案），您可以尝试使用“checkout_cart_product_add_after”事件添加观察者。关于如何添加事件，请在此处查看：

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

在观察者方法中，通过获取报价检查购物车有多少 $$$，例如：

$quote = Mage::getSingleton('checkout/type_onepage')->getQuote();

并收集总计（我猜是getGrandTotal方法）

并添加任意数量的优惠券（$total/100 = $gifcard_amount），然后使用

```
for ($i=0;$i<$giftcard_amount;$i++){
//giftcard add logic
} 
```

希望这会让你开始。

# command - 如何配置 Textmate（Mac 版）运行 Stata 命令？

> ID：13465218
> 
> 赞同：0
> 
> 时间：2012-11-20T01:17:49.633
> 
> 标签：command, textmate, stata

我是一名 Mac 用户，试图将 Textmate 配置为运行 Stata 命令。

我从这个网站下载并安装了 Stata 包（[http://bylr.net/3/2010/10/stata-bundle-for-textmate/](http://bylr.net/3/2010/10/stata-bundle-for-textmate/)）

这是我在 Textmate Bundle Editor 中看到的内容：

![Textmate Bundle Editor-STATA](../Images/e7a7d685bc21a35cd69810c64fb3b598.png)

这就是我卡住的地方。

我在菜单列表中没有看到任何用于运行 Stata 代码的命令。我下载了正确的捆绑包吗？如何在 Textmate 中运行 Stata 命令？我是Textmate的初学者。我要在终端中运行一些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T20:12:12.990

例如，您将无法像使用 R 一样在 TextMate 中执行 Stata 代码。解决方法：

1.  而是从终端运行 Stata 代码（我猜你可以编写 TextMate 来告诉终端告诉 Stata 运行一些代码，但这太疯狂了），正如理查德的回答中所解释的那样。

2.  使用 Tim Beatty 包将代码发送到 Stata 并从那里执行。我认为Phil Schumm 在 SourceForge 上提供了[一个更好的捆绑包。](http://sourceforge.net/projects/statatmbundle/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T17:18:00.403

在 Stata 的控制台中，您可以使用`do my_do_file`或从 terminal.app 运行 do 文件，您可以使用`stata -b do my_do_file &`.

[我在 Stata 文本编辑器常见问题解答](http://fmwww.bc.edu/repec/bocode/t/textEditors.html#mac)中没有看到 TextMate ，但常见问题解答可能会提供使 TextMate 捆绑包更健壮所需的提示。

# css - 是否可以从侧面或底部制作 Twitter Bootstrap 模式滑动而不是向下滑动？

> ID：13465221
> 
> 赞同：56
> 
> 时间：2012-11-20T01:18:15.437
> 
> 标签：css, twitter-bootstrap

目前模态下滑效果是通过将`fade`类添加到模态div来完成的。是否可以通过更改css将效果更改为从侧面（或从底部）滑动？我在网上找不到任何关于如何做到这一点的信息，而且我自己也没有足够的 css 来做到这一点。

html:

```
<div id='test-modal' class='modal fade hide'>
  <div>Stuff</div>
</div> 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2014-09-08T06:21:53.967

Bootstrap 3 现在使用 CSS 变换 translate3d 而不是 CSS 过渡，以使用 GPU 硬件加速获得更好的动画效果。

它使用以下 CSS（无缓动）

```
.modal.fade .modal-dialog {
    -webkit-transform: translate3d(0, -25%, 0);
    transform: translate3d(0, -25%, 0);
} 
```

这是您可以用来从左侧滑入的 CSS

```
.modal.fade:not(.in) .modal-dialog {
    -webkit-transform: translate3d(-25%, 0, 0);
    transform: translate3d(-25%, 0, 0);
} 
```

注意否定选择器。我注意到这是防止“.modal.in .modal-dialog”定义受到干扰所必需的。*注意：我不是 CSS 大师，所以如果有人能更好地解释这一点，请随意:)*

如何从不同侧面滑入：

*   最佳：`translate3d(0, -25%, 0)`
*   底部：`translate3d(0, 25%, 0)`
*   剩下：`translate3d(-25%, 0, 0)`
*   对：`translate3d(25%, 0, 0)`

* * *

如果你想混合和匹配不同的滑动方向，你可以为模态分配一个像“左”这样的类......

```
<div class="modal fade left">
    ...
</div> 
```

...然后使用 CSS 专门针对它：

```
.modal.fade:not(.in).left .modal-dialog {
    -webkit-transform: translate3d(-25%, 0, 0);
    transform: translate3d(-25%, 0, 0);
} 
```

## 小提琴：http: [//jsfiddle.net/daverogers/mu5mvba0/](http://jsfiddle.net/daverogers/mu5mvba0/)

**奖金**- 你可能会有点滑稽并以一个角度滑入：

*   左上方：`translate3d(-25%, -25%, 0)`
*   右上：`translate3d(25%, -25%, 0)`
*   左下方：`translate3d(-25%, 25%, 0)`
*   右下角：`translate3d(25%, 25%, 0)`

*更新（05/28/15）：我更新了小提琴以显示替代角度*

* * *

如果你想在 LESS 模板中使用它，你可以使用 BS3 的 vendor-prefix mixin（只要它包含在内）

```
.modal.fade:not(.in) .modal-dialog {
    .translate3d(-25%, 0, 0);
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-20T05:40:33.813

**此信息已过时。Bootstrap 3 现在以不同的方式处理这个问题。如果您使用的是较新版本，请查看[更新后的答案](https://stackoverflow.com/a/25718426/168175)**。

“滑入”过渡实际上由引导 css 处理。特别是由这部分处理：

```
// bootstrap.css

.modal.fade {
  top: -25%;
  -webkit-transition: opacity 0.3s linear, top 0.3s ease-out;
     -moz-transition: opacity 0.3s linear, top 0.3s ease-out;
       -o-transition: opacity 0.3s linear, top 0.3s ease-out;
          transition: opacity 0.3s linear, top 0.3s ease-out;
}

.modal.fade.in {
  top: 50%;
} 
```

要更改过渡方向，只需添加（在您**自己的**样式表中，因为引导 css 将在未来版本中更新）这些样式。这些将覆盖引导样式。要让模态从左侧滑入，请尝试：

```
.modal.fade {
  left: -25%;
  -webkit-transition: opacity 0.3s linear, left 0.3s ease-out;
     -moz-transition: opacity 0.3s linear, left 0.3s ease-out;
       -o-transition: opacity 0.3s linear, left 0.3s ease-out;
          transition: opacity 0.3s linear, left 0.3s ease-out;
}

.modal.fade.in {
  left: 50%;
}​ 
```

[在这里](http://jsfiddle.net/HdVyn/1/ "左右滑动模态")工作 jsfiddle 。

要从右到左转换，请为要转换的模态提供*较大的正*百分比，并将模态的最终静止位置更改为相应的方向。例如`.modal.fade { left: 200%; } ... .modal.fade.in { left: 50% };`

[从右到左的例子。](http://jsfiddle.net/xgkqP/1/ "左右滑动模态")

[从底部到顶部的示例。](http://jsfiddle.net/xgkqP/2/ "自下而上的模态")

更多关于[CSS 过渡的信息在这里](http://www.w3schools.com/css3/css3_transitions.asp "CSS 过渡")。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-05-14T18:06:31.107

这适用于正在寻找**Bootstrap 4**解决方案的人：

**HTML**

```
<a class="btn btn-primary" data-toggle="modal" data-target="#modalSidePaneRight">Slide Right Panel</a>

<div class="modal fade modal-right-pane" id="modalSidePaneRight" tabindex="-1" role="dialog" aria-labelledby="sidePaneRightModal" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content rounded-0">
      <div class="modal-header">
        <h5 class="modal-title" id="sidePaneRightModal"><i class="fi fi-calender"></i> Your Modal Title</h5>
        <button type="button" class="close" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body bg-primary">
        <h1>Your Content</h1>
      </div>
    </div>
  </div>
</div> 
```

**SCSS**

```
/*******************************
* MODAL AS LEFT/RIGHT SIDEBAR
* Add ".modal-left-pane" or ".modal-right-pane" in modal parent div, after class="modal".
*******************************/

// Modal Panel: Right
$header-nav-height: 56px;
$modal-height: calc(100vh - #{$header-nav-height});

.modal{
  &.modal-left-pane,
  &.modal-right-pane {
    .modal-dialog {
      max-width: 380px;
      min-height: $modal-height;
    }

    &.show .modal-dialog {
      transform: translate(0, 0);
    }

    .modal-content {
      min-height: $modal-height;
    }
  }
  &.modal-left-pane {
    .modal-dialog {
      transform: translate(-100%, 0);
      margin: $header-nav-height auto 0 0;
    }
  }

  &.modal-right-pane {
    .modal-dialog {
      transform: translate(100%, 0);
      margin: $header-nav-height 0 0 auto;
    }
  }
} 
```

# php - 文件上传PHP的问题

> ID：13465226
> 
> 赞同：0
> 
> 时间：2012-11-20T01:19:22.403
> 
> 标签：php, file-upload

我不确定这段代码有什么问题，所以我希望能提供一些有用的输入。

问题

它不会获取我上传的文件的名称，也不会实际将其上传到定义的目录中。

PHP 代码

```
<? include("header.php"); 
include("sidebar.php");
?>        

    <h2>Add Raffle</h2> 

 <?
$name = asql($_POST['name']);
$type = asql($_POST['prize']);
$min_points = asql($_POST['minp']);
$min_cash = asql($_POST['maxu']);
$cons = strtotime($_POST['cons']);
$cone = strtotime($_POST['cone']);

if($_POST['subm'])
{
if ($name == NULL OR $type == NULL OR $min_points == NULL OR $min_cash == NULL) {
print"Please Fill Out All Of The Required Fields<br /><a href='rafadd.php'><img src='img/green_arrow_left.png' alt='Go Back' /></a>"; include"footer.php";
exit();
}
if (!in_array($file['type'], array("image/gif", "image/jpeg", "image/png"))
           || $file['size'] > 20000)
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "There was an error";
    }
  else
    {
    echo "";
$filename = $_FILES["file"]["name"];
    if (file_exists("../images/rewards/" . $_FILES["file"]["name"]))
      {
unlink("../images/raffles/" . $_FILES["file"]["name"]);
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "../images/raffles/" . $_FILES["file"]["name"]);
      }
    else
      {
      move_uploaded_file($_FILES["file"]["tmp_name"],
      "../images/raffles/" . $_FILES["file"]["name"]);
      }
    }
  }
else
  {
  echo "Invalid file";

$updatecontests = mysql_query("INSERT INTO raffles (`id`, `raffle_name`, `raffle_prize`, `buy_in`, `max_entry`, `prize_image`, `start`, `end`) VALUES ('','$name','$type','$min_points','$min_cash','images/raffles/".$filename."','$cons','$cone')") or die(mysql_error());

if($updatecontests){
$create = mysql_query("CREATE TABLE IF NOT EXISTS `".$name."` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` text NOT NULL,
  `entries` int(11) NOT NULL,
  PRIMARY KEY (`username`(30)),
  KEY `id` (`id`)
)");
}
print "You Have Successfully Added this Raffle<br /><br />
<a href='rafadd.php'><img src='img/green_arrow_left.png' alt='Go Back' /></a>"; 

    }
    else
    {

print"<div class='form'>
         <form action='' method='post'><input type=hidden name=subm value=1>";
?>
         <div class="element">
                        <label for="name">Raffle Name: <span class="red">(required)</span></label>
                        <input id="name" name="name" size="50" />
                    </div>
         <div class="element">
                        <label for="prize">Raffle Prize: <span class="red">(required)</span></label>
                        <input id="prize" name="prize" size="50" />
                    </div>
<div class='element'>
                        <label for='file'>Prize Image:</label>
                        <input type='file' name='file' id='file' />
                    </div>

                    <div class="element">
                        <label for="cons">Start Date: <span class="red">(required)</span></label>
                        <input id="cons" name="cons" size="50" /><a href="javascript:NewCal('cons','mmddyyyy',true,12)"><img src="images/cal.gif" width="16" height="16" border="0" alt="Pick a date"></a>
                        </div>
                    <div class="element">
                        <label for="cone">End Date: <span class="red">(required)</span></label>
                        <input id="cone" name="cone" size="50" /><a href="javascript:NewCal('cone','mmddyyyy',true,12)"><img src="images/cal.gif" width="16" height="16" border="0" alt="Pick a date"></a>
                        </div>
                    <div class="element">
                        <label for="minp">Cost Per Ticket: <span class="red">(required)</span></label>
                        <input id="minp" name="minp" size="50" />
                        </div>
                    <div class="element">
                        <label for="maxu">Maximum Entries per User: <span class="red">(required 0 for unlimited)</span></label>
                        <input id="maxu" name="maxu" size="50" />
                        </div>
<?php
                    print" <dl class='submit'>
                    <input type='submit' name='subm' id='subm' value='Submit' />
                     </dl>

         </form>
         </div> "; 
      }
      ?>

     </div><!-- end of right content-->

  </div>   <!--end of center content -->               

    <div class="clear"></div>
    </div> <!--end of main content-->

    <div class="footer">

        <div class="left_footer">IN ADMIN PANEL | Powered by <a href="http://indeziner.com">INDEZINER</a></div>
        <div class="right_footer"><a href="http://indeziner.com"><img src="images/indeziner_logo.gif" alt="" title="" border="0" /></a></div>

    </div>

</div>      
</body>
</html> 
```

我在另一个脚本中使用了文件上传片段，它上传完美，所以我不确定为什么它在这里不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T01:27:15.857

在表单标签中添加 enctype="multipart/form-data"

```
<form action='' method='post'enctype="multipart/form-data"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:27:24.000

```
<form action='' method='post'> 
```

错了，应该是：

```
 <form action='' method='post' enctype='multipart/form-data'> 
```

另外，使用`<?php`代替`<?`

PS我错过了设置 $file 的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T01:30:03.423

它看起来不像文件在任何地方被实例化。你的意思是：

```
if (!in_array($_FILES['file']['type'], array("image/gif", "image/jpeg", "image/png"))
       || $_FILES['file']['size'] > 20000) 
```

# c++ - 大数组的堆栈溢出但没有同样大的向量？

> ID：13465227
> 
> 赞同：4
> 
> 时间：2012-11-20T01:19:29.910
> 
> 标签：c++, arrays, vector, stack-overflow

我今天在处理大型数据结构时遇到了一个有趣的问题。我最初使用向量来存储超过 1000000 个整数，但后来决定我实际上并不需要向量的动态功能（无论如何，我在声明它时就保留了 1000000 个点），相反，这将是有益的，能够在数据结构中的任何位置添加值。所以我把它切换到一个数组和*BAM*堆栈溢出。我猜这是因为在编译时声明数组的大小将其放入堆栈并使用动态向量而不是将其放在堆上（我猜它更大？）。

那么这里的正确答案是什么？回到动态内存系统，以便将其放入堆中？增加堆栈的大小？还是我在这里的整个事情都偏离了基础......？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T01:23:07.840

> 我最初使用向量来存储超过 1000000 个整数

好主意。

> 但后来我决定我实际上并不需要向量的动态功能（无论如何，一旦宣布它，我就保留了 1000000 个点）

不是一个好主意。你确实需要它。

> 相反，能够在数据结构中的任何位置添加值将是有益的。

我不跟。

> 我猜这是因为在编译时声明数组的大小将其放入堆栈并使用动态向量而不是将其放在堆上（我猜它更大？）。

很多。默认情况下，调用堆栈的大小通常约为 1MB-2MB。您的“堆”（免费存储）仅受可用 RAM 的限制。

> 那么这里的正确答案是什么？回到动态内存系统，以便将其放入堆中？

是的。

*[编辑：约阿希姆的权利——`static`是另一个可能的答案。]*

> 增加堆栈的大小？

您可以，但即使您可以从中扩展 4MB，您也没有为其他本地数据变量留下任何回旋余地。最好使用动态内存——这是正确的做法。

> 还是我在这里的整个事情都偏离了基础......？

不。

# oracle - SQL 中的聚合函数用法

> ID：13465232
> 
> 赞同：1
> 
> 时间：2012-11-20T01:19:59.500
> 
> 标签：oracle, plsql

我在工作中遇到过以下场景。考虑以下块：

```
Begin
Select Max(Column) from Table where some condition;
Exception
When No_Data_Found then
log into an audit table
End; 
```

当实际上没有找到行时，执行控制不会被转移到异常块中，而是返回 NULL。当尝试在没有该`MAX`函数的情况下执行时，执行的控制被捕获在异常块中。

谁能解释一下这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:24:57.593

MAX 是一个聚合函数。聚合函数对一组值执行计算并返回单个值。它们总是为每个组返回一个值（如果您没有 GROUP BY 子句，则只有一个组）。

因此，在您的代码中，您将永远不会有 NO_DATA_FOUND，因为 MAX 将始终返回一个值 - 可能为空。如果取出MAX，就是常规选择，可能会导致没有选择行，从而进入NO_DATA_FOUND块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:29:23.593

纯聚合函数——没有相应的分组列——总是只返回一行。

```
SQL> desc emp
 Name                                                  Null?    Type
 ----------------------------------------------------- -------- ------------------------------------
 EMPNO                                                 NOT NULL NUMBER(4)
 ENAME                                                          VARCHAR2(10)
 JOB                                                            VARCHAR2(9)
 MGR                                                            NUMBER(4)
 HIREDATE                                                       DATE
 SAL                                                            NUMBER(7,2)
 COMM                                                           NUMBER(7,2)
 DEPTNO                                                         NUMBER(2)

SQL> SET NULL [NULL]
SQL> SELECT MAX(sal) FROM emp WHERE 1 = 0;

  MAX(SAL)
----------
[NULL]

SQL> 
```

# c - 为什么`fgets()`需要一个*str而`getline()`需要一个**str参数？

> ID：13465233
> 
> 赞同：0
> 
> 时间：2012-11-20T01:20:14.103
> 
> 标签：c, arrays, string, pointers, io

他们俩都可以从流中得到一条线。

定义如下：

```
 ssize_t
 getline(char ** restrict linep, size_t * restrict linecapp, FILE * restrict stream); 
```

和

```
 char *
 fgets(char * restrict str, int size, FILE * restrict stream); 
```

为什么`getline`需要`a pointer to a pointer to char`，而不是`a pointer to char`像什么一样使用`fgets`呢？

下面的两个表达式是否等价？</p>

(1)

```
char *str = NULL
read = getline (&str, &len, fp); 
```

(2)

```
char *str = NULL
read = fgets (str, &len, fp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:22:31.867

getline() 可以，如果你传入一个指向 NULL 的指针，分配它自己的内存（你以后必须这样做`free`）。fgets*必须*传递一个现有的缓冲区。

getline 需要额外的间接寻址，因此它可以修改指向已分配内存的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T01:22:59.370

因为[`getline`](http://www.kernel.org/doc/man-pages/online/pages/man3/getline.3.html)如果你将一个指向 a `char*`which is的指针传递给它，它将为你分配一个缓冲区`null`。

至于您的第二个问题：否。该`fgets`示例可能会导致 SEGV。[`fgets`](http://www.kernel.org/doc/man-pages/online/pages/man3/fgets.3.html)期望缓冲区实际存在。

# php - 使用自定义自动加载器加载 php 核心类

> ID：13465244
> 
> 赞同：2
> 
> 时间：2012-11-20T01:22:48.400
> 
> 标签：php, autoloader, spl-autoloader

我一直在论坛上搜索问题数据库，但找不到针对我的问题的解决方案。

我来找你，因为我怀疑我正在开发的自动加载器出现了。

关键是，当我尝试实例化一个由我定义的类时，自动加载器工作正常，但是当我尝试实例化 PHP 核心的一个类时，我会抛出以下错误。

例如，当我尝试这样做时：

```
$conn = new PDO (...); 
```

然后向我抛出以下错误：

```
Fatal error: Class 'PDO' not found in ... 
```

我注意到自动加载器正在尝试加载我定义路由到我的类的类。

我的问题是，如果我使用自定义自动加载器，如何加载 PHP 核心类？

我希望你能指导我解决我遇到的这个问题。

提前非常感谢您。

请原谅我没有放置自定义自动加载器的代码，我错过了。

该代码与 symfony 中使用的代码相同，但经过修改和简化。

```
class ClassLoader {

private $prefixes = array ();
private $fallbackDirs = array ();
private $useIncludePath = false;

public function getPrefixes  () {
    return $this->prefixes;
}

public function getFallbackDirs  () {
    return $this->fallbackDirs;
}

public function addPrefixes ( array $prefixes ) {
    foreach  ( $prefixes as $prefix => $path )  {
        $this->addPrefix ( $prefix, $path );
    }
}

public function addPrefix ( $prefix, $paths ) {
    if  ( !$prefix ) {
        foreach ( ( array ) $paths as $path ) {
            $this->fallbackDirs [] = $path;
        }
        return;
    }
    if  ( isset ( $this->prefixes [ $prefix ] ) ) {
        $this->prefixes [ $prefix ] = array_merge ( $this->prefixes [ $prefix ], ( array ) $paths );
    } else {
        $this->prefixes [ $prefix ] = ( array ) $paths;
    }
}

public function setUseIncludePath ( $useIncludePath ) {
    $this->useIncludePath = $useIncludePath;
}

public function getUseIncludePath () {
    return $this->useIncludePath;
}

public function register ( $prepend = false ) {
    spl_autoload_register ( array ( $this, 'loadClass' ) , true, $prepend );
}

public function unregister () {
    spl_autoload_unregister ( array ( $this, 'loadClass' ) );
}

public function loadClass ( $class ) {

    if  ( $file = $this->findFile ( $class ) ) {
        require $file;
        return true;
    }
}

public function findFile ( $class ) {
    if ( '\\' == $class [ 0 ]  )  {
        $class = substr ( $class, 1 );
    }
    if  ( false !== $pos = strrpos ( $class, '\\' ) ) {
        // namespaced class name
        $classPath = str_replace ( '\\', DIRECTORY_SEPARATOR, substr ( $class, 0, $pos ) ) . DIRECTORY_SEPARATOR;
        $className = substr ( $class, $pos + 1 );
    } else {
        // PEAR-like class name
        $classPath = null;
        $className = $class;
    }
    $classPath .= str_replace ( '_', DIRECTORY_SEPARATOR, $className ) . '.php';
    foreach ( $this->prefixes as $prefix => $dirs ) {
        if ( 0 === strpos ( $class, $prefix ) ) {
            foreach ( $dirs as $dir ) {
                if ( file_exists ( $dir . DIRECTORY_SEPARATOR . $classPath ) ) {
                    return $dir . DIRECTORY_SEPARATOR . $classPath;
                }
            }
        }
    }
    foreach ( $this->fallbackDirs as $dir ) {
        if ( file_exists ( $dir . DIRECTORY_SEPARATOR . $classPath ) ) {
            return $dir . DIRECTORY_SEPARATOR . $classPath;
        }
    }
    if ( $this->useIncludePath && $file = stream_resolve_include_path ( $classPath ) ) {
        return $file;
    }
} 
```

}

但是如果你想看原始文件在这里

[https://github.com/symfony/symfony/blob/master/src/Symfony/Component/ClassLoader/ClassLoader.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/ClassLoader/ClassLoader.php)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T16:28:50.777

好吧，我的朋友们。

我得到了我没有加载 PHP 核心的 PDO 类的原因。

根据我的研究，我会做以下两件事之一：

或者在类实例的时候放一个反斜杠

```
$conn = new \PDO (...); 
```

或者将 PDO 类放在 use 子句中。

```
use api\ecobd\nucleo\Conexion, PDO; 
```

我评论说我选择了第二个，因为第一个不起作用。

无论如何，感谢您提供的帮助，很好地帮助我更好地定位我的搜索来解决我的问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T01:31:08.550

检查是否已加载 PDO 扩展并且 PDO 是否可以在未注册您的自动加载器的情况下工作。自动加载器不应影响核心类，并且您不需要自动加载器来加载核心类。

# java - ReentrantLock and Condition，最佳设计

> ID：13465245
> 
> 赞同：0
> 
> 时间：2012-11-20T01:22:55.157
> 
> 标签：java, multithreading, thread-safety, locking

我在资源池的上下文中使用 ReentrantLock 中的条件，据我所见，它简化了线程通信。我的问题是，我最终会有机地编写奇怪的条件语句，例如 acquireMapEmpty、freeQueueNotEmpty、更改等待和单个不同的东西。从技术上讲，它们可以全部被一个条件句替换或分解为更多条件句——是否有经验法则：

1.  识别条件
2.  弄清楚你是否有太多或太少
3.  当你在正确的轨道上或偏离路线时

这是删除资源的示例。

```
 public boolean remove(R resource) throws InterruptedException {

    System.out.println("Remove, resource: " + resource + " with thread: " + Thread.currentThread().getName());
    if (resource == null) {
        throw new NullPointerException();
    }
    mainLock.lock();
    try {
        if (!isOpen) {
            throw new IllegalStateException("Not open");
        }
        Object lock = locks.get(resource);
        if (lock == null) {
            return false;
        }
        if (freeQueue.remove(resource)) {
            locks.remove(resource);
            if (!freeQueue.isEmpty()) {
                freeQueueNotEmpty.signalAll();
            }
            return true;
        }
        while (!freeQueue.contains(resource)) {
            change.await();
            if (!isOpen) {
                throw new IllegalStateException("Not open");
            }
            lock = locks.get(resource);
            if (lock == null) {
                return false;
            }
        }
        if (freeQueue.remove(resource)) {
            locks.remove(resource);
            if (!freeQueue.isEmpty()) {
                freeQueueNotEmpty.signalAll();
            }
            return true;
        }
        return false;
    } finally {
        mainLock.unlock();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:28:56.083

在我看来，这里没有经验法则。
这真的取决于用例，同步根本不是一个简单的话题。当然，你不应该用锁“耗尽”你的系统——锁是一种昂贵的资源。
如果您觉得需要协调线程并保护共享资源，那么您别无选择，只能使用同步对象。
每次使用同步对象，例如锁或从锁获得的条件时，您应该问自己用例是什么，您真的需要锁，需要协调哪些其他线程（它们是什么？流）。
我想把这个问题稍微跑题，给你一个例子——我发现我们有几个线程使用同步关键字，
但是有些执行读取，有些执行写入，所以我切换到 ReaderWriterLock -
所以应该是你的情况，
不要使用各种同步对象，只是因为它们很酷 - 仔细了解它们是否以及在哪里真正需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T23:28:18.250

好吧，根据经验，我倾向于拥有与线程阻塞的原因一样多的条件变量。基本原理是，当您发出一个条件变量信号时，您想唤醒一个线程，该线程正在等待您发出信号的状态的特定变化，并且您真的，真的想避免“雷鸣群”综合症 -唤醒**所有**线程，在某个条件下被阻塞，只是让**其中一个**取得进展，而所有其他线程都重新进入睡眠状态，同时浪费了宝贵的 CPU 时间并破坏了缓存。

# objective-c - 更改嵌入式扫描仪的绿色边框 (ZBar)

> ID：13465249
> 
> 赞同：1
> 
> 时间：2012-11-20T01:23:13.970
> 
> 标签：objective-c, ios6, zbar-sdk, zbar

所以我在 UIViewController 中有一个 ZBarView（用于嵌入式扫描仪），我想知道如何更改绿色边框以使其具有这样的效果？

```
#import "ZBarSDK.h"

@interface ScanViewController : UIViewController <ZBarReaderViewDelegate>
@property (nonatomic, strong) IBOutlet ZBarReaderView *readerView;
@property (strong, nonatomic) IBOutlet UILabel *scannedMachineLabel;
@end

- (void)viewDidLoad
{
    [super viewDidLoad];

    _readerView.readerDelegate = self;
    // ensure initial camera orientation is correctly set
    UIApplication *app = [UIApplication sharedApplication];
    [_readerView willRotateToInterfaceOrientation: app.statusBarOrientation
                                        duration: 0];

} 
```

![在此处输入图像描述](../Images/7ae9ac8bf69a9d95516adce415675cc5.png)

# java - 如何在 Visual J++ 6.0 IDE 中更好地导航大型项目

> ID：13465253
> 
> 赞同：0
> 
> 时间：2012-11-20T01:23:40.207
> 
> 标签：java, ide, visualj#, j++

所以我有这个用 J++ 编写的非常大的旧代码库，有时我需要进入它来更新/修复某些东西。很多已经迁移到更新的语言，但旧代码仍在使用。我刚刚进入代码库，发现使用 Visual J++ 6.0 IDE 很难弄清楚。我习惯了较新的 Visual Studio .net IDE，甚至 Netbeans java IDE 也有更好的导航功能。

我最头疼的是没有“查找所有引用”类型的功能并且能够跳转到函数定义（在我所在的类之外），查看它对变量类型的期望，跳转到类声明等. 使用类视图跳转到该类中对象的定义似乎有限，但跳转到该类声明或外部函数定义似乎超出了它。更不用说窗户没有标签，所以它变得非常混乱。智能感知非常有限，等等。

我知道它很旧，但有些东西似乎会/应该得到支持。

**我想我正在寻找任何技巧，也许是可以帮助减少导航和学习这个代码库的痛苦的工具。我正在使用 Windows 资源管理器搜索项目中的所有文件，因为它甚至没有在文件中找到。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T18:03:19.950

我们有同样的问题。我通过为 Netbeans 创建一个新的 ANT 项目（自己的编译和清理等任务）解决了这个问题。我不得不这样做，因为我无法让 Netbeans 构建系统与添加的 J++ 编译器一起正常工作。然后我添加了新的 JDK 目标，以便 Netbeans 找到所有必需的 MS 类（来自 J++ 安装的 ZIP 文件）

毕竟，我有一个编译环境，我可以在其中使用 Netbeans 的所有优势，但仍然能够使用 J++ 编译器 (VJC) 进行编译。

我们仍然使用它来维护我们的旧平台。这使得代码库更容易处理，因为我们可以使用重构和 Netbeans 的所有其他自动化工具。

这样我们就可以将源代码放在 SVN 下，而不是之前可怕的 SourceSafe。

因此，如果这听起来像是一个想法，您想尝试一下，我会为您提供如何完成它的指示。

笔记！如果您使用了 GUI 构建器的东西，这不会那么好用，尽管我们设法制作了一个实验项目，其中我们有共享相同源的 ANT+Netbeans 项目和 J++ 项目。

# mysql - MySQL 逆 substr()

> ID：13465255
> 
> 赞同：0
> 
> 时间：2012-11-20T01:24:01.437
> 
> 标签：mysql, substr

`select now()`将输出`2012-11-20 09:05:38`.

`select substr(now(), locate(' ', now()))`将输出`09:05:38`.

我怎样才能获得这个结果：`2012-11-20`而不是？去过那里，做到了，但还没有实现。请原谅我的不足，但请帮助我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:25:28.153

您可以使用`DATE_FORMAT`

```
SELECT DATE_FORMAT('2012-11-20 09:05:38', '%Y-%m-%d') 
```

要不就`DATE`

```
SELECT DATE('2012-11-20 09:05:38') 
```

*   [SQLFiddle 演示（*两个查询*）](http://sqlfiddle.com/#!2/d41d8/3919)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:25:54.830

不是您关于子字符串的问题的具体答案，但如果我想要 NOW() 的 DATE 部分，我会这样做：

```
SELECT DATE(NOW()); 
```

或者对于时间部分

```
SELECT TIME(NOW()); 
```

对于实际的字符串目的，尽管您可以使用：

```
SUBSTR('SOME STRING', 0, LOCATE(' ', 'SOME STRING')) <- returns from position zero for a length of 4 characters 
```

或者

```
SUBSTRING_INDEX('SOME STRING', ' ', 1) <- gives 'SOME'
SUBSTRING_INDEX('SOME STRING', ' ', -1) <- gives 'STRING' 
```

# c - scanf 在 C 语言中不是很宽容

> ID：13465256
> 
> 赞同：0
> 
> 时间：2012-11-20T01:24:15.870
> 
> 标签：c, scanf

在下面的代码中，我希望给用户一个选项来输入“e”来退出代码并查看结果，而不是当前代码中使用的 100。但是代码无法在终端使用“e”正确运行，因为 scanf 需要一个整数，与声明的类型匹配。如果我输入任何字符而不是整数，scanf 会以某种方式将其存储在变量中。这种方式是固定的吗？如果它已修复，我可以使用该存储值来检查是否退出程序吗？

```
#include<stdio.h>
int main(void)
{
    int rating[11], x;

    for (int a = 0; a <= 11; a++)
        rating[a] = 0;

    while (1){
        printf("key in 100 to see the results\n");
        printf("Enter the rating on a scale from 1 to 10 ?");
        scanf("%i", &x);

        if ((x < 1 || x > 10) && x != 100)
            printf("bad entry ! \n");

        if (x == 100){
            printf("\nRatings..............No of responses\n");
            for (int y = 1; y <= 10; y++)
                printf("%2i.......................%2i\n", y, rating[y]);
            return 0;
        }

        rating[x]++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:27:50.183

`scanf`返回成功读取的项目数（或 -1 错误）。因此，您可以想象是否`scanf`返回 0，并在这种情况下保释；如果输入任何非数字，它将退出程序。

如果您特别想检查`'e'`，最好的办法是`fgets`输入一整行，使用 来检查您的特殊情况`strcmp`，然后使用`atoi`获取整数。

# sencha-touch-2 - 为什么在 Sencha touch 2 的启动功能中不能使用 Phonegap 的导航器对象？

> ID：13465258
> 
> 赞同：0
> 
> 时间：2012-11-20T01:24:37.537
> 
> 标签：sencha-touch-2

这很奇怪，如果我像这样单击页面上的按钮，我可以很好地使用 Phonegap 的导航器对象。

**控制器**

```
Ext.define('App.controller.MainController', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            homeButton: 'button[action=viewHome]',
        },
        control: {
            homeButton: {
                tap: 'showHome'
            },
        }
    },  
    showHome: function(button, e, options) {
        navigator.notification.vibrate(1000);
    },} 
```

但是，如果我尝试访问启动函数中的导航器对象，我会得到“未定义”。

**控制器**

```
Ext.define('App.controller.MainController', {
    extend: 'Ext.app.Controller',
    launch: function(){
        navigator.notification.vibrate(1000);
    },} 
```

app.js 的启动函数中也发生了同样的事情。任何人都知道这是为什么以及如何在启动功能中使用Phonegap？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T07:43:25.340

看来您正试图在 phonegap 'navigator' API 准备好之前访问它。您必须监听 deviceready 事件，一旦触发，您就可以调用 navigator。

你可以这样称呼它。

```
launch: function () {
    if(Ext.browser.is.PhoneGap && !Ext.os.is.Desktop) {
        document.addEventListener("deviceready", this.mainLaunch, false);
    } else {
        this.mainLaunch();
    }
},

mainLaunch: function() {
    navigator.notification.vibrate(1000);
} 
```

Ext.browser 检查也是为了在 chrome 浏览器上进行这项工作，否则您必须始终在模拟器或设备上测试应用程序。

# c - 将 .csv 文件读入 C LinkedList

> ID：13465264
> 
> 赞同：0
> 
> 时间：2012-11-20T01:25:13.710
> 
> 标签：c, parsing, data-structures, linked-list, nodes

我有以下内容`struct`：

```
struct NODE {
    char username[50];
    char password[50];
    char usertype[50];
    struct NODE *next;
} *head=NULL; 
```

我想从一个`.csv`文件中读取，比如`database.csv`表单`username, password, usertype`，将每一行标记为标记`strtok`，并将每个标记放在正确的字段中。例如，我的文件如下所示：

`johnnydepp, pirate123, user`
`tonystark, iron456, sysop`

我一直在阅读 C `LinkedList`，但我无法弄清楚。任何帮助将不胜感激，或者任何关于如何`LinkedList`在 C中实现 a 的良好参考。

我的主要问题是将元素放在每个节点中。我知道如何用来`strtok`标记文件中的一行。这是我到目前为止所做的：

```
void createList() {
    FILE *data;
    data = fileopen("password.csv", "r");
    char parsedLine[50];
    while (fgets(parsedLine, 50, data) != NULL) {
    char *ptr = strtok(parsedLine, ", ");
        node *temp;
        temp = (node*)malloc(sizeof(node));
    // I am stuck here //
} 
```

谢谢！

**编辑**

这行得通吗？

```
extern void createList() {

FILE *data;
data = fileopen("password.csv", "r");
char parsedLine[50];
while (fgets(parsedLine, 50, data) != NULL) {
    struct NODE *node = malloc(sizeof(struct NODE));
    char *getUser = strtok(parsedLine, ", ");
    strcpy(node->username, getUser);
    char *getPass = strtok(NULL, ", "); 
    strcpy(node->password, getPass);
    char *getType = strtok(NULL, ", ");
    strcpy(node->usertype, getType);    
    node->next = head;
    head = node;
}
fclose(data);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:40:07.583

它实际上非常简单......您有一个`NODE`结构，其中包含一个`next`指针和一个指向`head`列表头（第一个节点）的变量。头指针开始`NULL`表示列表为空。

要添加节点，您创建一个节点，然后将新创建的节点`next`指针设置为指向列表的当前头，并将头设置为指向新节点：

```
/* Allocate new node */
struct NODE *node = malloc(sizeof(struct NODE));

/* Link to the current head */
node->next = head;

/* Make the new node the head of the list */
head = node; 
```

这样做一次后，您将拥有一个包含一个节点的列表。执行两次后，您将获得一个双节点列表。等等。

# ruby-on-rails - 阻止可疑登录（Heroku、Amazon AWS、Gmail SMTP）

> ID：13465269
> 
> 赞同：20
> 
> 时间：2012-11-20T01:25:53.270
> 
> 标签：ruby-on-rails, heroku, amazon-web-services, smtp, gmail

我偶尔会收到来自 Google ( `accounts-noreply@google.com`) 的电子邮件，类似于以下内容：

```
Subject: Suspicious sign in prevented

Someone recently tried to use an application to sign in to your Google  
Account, ________@gmail.com. We prevented the sign-in attempt in case  
this was a hijacker trying to access your account. Please review the  
details of the sign-in attempt:

Monday, November 19, 2012 8:40:55 PM GMT
IP Address: 184.72.161.49 (amazonaws.com)
Location: Dixmoor, IL, USA

If you do not recognize this sign-in attempt, someone else might be trying  
to access your account. You should sign in to your account and reset your  
password immediately. Find out how at  
http://support.google.com/accounts?p=reset_pw

If this was you, and you want to give this application access to your  
account, complete the troubleshooting steps listed at  
http://support.google.com/mail?p=client_login

Sincerely,
The Google Accounts Team

© 2012 Google Inc. 1600 Amphitheatre Parkway, Mountain View, CA 94043

You have received this mandatory email service announcement to update you  
about important changes to your Google product or account. 
```

确实，这就是我，因为我在**Heroku**上运行了一个应用程序（因此 IP 地址来自`amazonaws.com`），并且我通过 Gmail SMTP 直接从我的应用程序发送电子邮件（我认为这无关紧要，但具体来说，我m 使用我[为 Rails 3.2 更新的](http://code.coneybeare.net/how-to-convert-simple-rails-23-style-plugins)[gmail_smtp 插件](https://github.com/adamwiggins/gmail_smtp)）。

有没有办法避免这个警告，或者有办法将已知 IP 列入白名单？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-05T20:58:32.293

**简答**

1.  在网络浏览器（可能是 Chrome/Incognito）中，登录到您的 Gmail 帐户（您尝试通过该帐户从您的应用程序发送电子邮件）。

2.  在另一个浏览器选项卡中，打开[https://accounts.google.com/DisplayUnlockCaptcha](https://accounts.google.com/DisplayUnlockCaptcha) - 并按照步骤操作。

**长答案**

我最终登录到我的 Gmail 帐户（`________@gmail.com`在上面的 Stackoverflow 问题中提到）并看到以下警告：

![在此处输入图像描述](../Images/72f36379064cbff157b992697c67cab2.png)

[注意：我在事后将这个答案拼凑在一起。]单击链接**是你吗？**，*我很确定*我被带到了一个包含以下内容的页面，尽管在它下面有一条关于将另一个应用程序添加到列表中的消息和按钮：

![在此处输入图像描述](../Images/0500da4e28c46ed26cfb5673bd885c1e.png)

[再次，*我很确定*......]单击该页面上的按钮将我带到[https://accounts.google.com/DisplayUnlockCaptcha](https://accounts.google.com/DisplayUnlockCaptcha) - 它看起来像这样：

![在此处输入图像描述](../Images/0a5fc370576f8363e060aa2f191db048.png)

单击**继续**将我带到另一个页面：

![在此处输入图像描述](../Images/1ad821d8f9172bf35b464d69832d8eac.png)

那时我只是去我的应用程序，并让它发送一封电子邮件。

注意：对于我的应用程序中电子邮件的一般实时测试，我有一个视图，`triggers#index`其中包含两个向这些操作发送`PUT`请求的按钮：`triggers#send_email`和`triggers#raise_exception`。这使管理员能够前往`/triggers`并*发送电子邮件*或*引发异常*以测试生产系统是否在能够发送电子邮件方面正常工作。在我的任何应用程序中通过 exception_notification 向我发送电子邮件详细信息中的[异常](https://github.com/smartinez87/exception_notification)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T21:34:26.703

当我尝试使用 PHP 通过 Gmail SMTP 发送电子邮件时，我遇到了同样的问题。您应该完成电子邮件末尾提供的故障排除步骤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-18T13:37:41.533

在您的 Gmail 邮箱中，查看右下角，您可以看到一个详细信息按钮。单击它，然后在弹出窗口中更改可疑警告设置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-07T21:53:10.870

为了让它在**Rails 4**的开发中工作，我必须启用对不太安全的应用程序的访问。

在登录到您的 gmail 帐户时访问[https://www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)，然后单击“打开”。请注意，这可以访问不太安全的应用程序，这可能会带来意想不到的后果。

> 某些应用和设备使用安全性较低的登录技术，这会使您的帐户更容易受到攻击。您可以关闭我们推荐的这些应用程序的访问权限，或者如果您想在有风险的情况下使用它们，则可以打开访问权限。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-30T09:32:08.470

要使其在 Rails 4 中正常工作，除了启用安全性较低的应用程序的访问权限外，如前所述（在登录到您的 gmail 帐户时访问[https://www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)并单击“打开'。请注意，这可以访问不太安全的应用程序，这可能会带来意想不到的后果。），如果帐户访问仍然被阻止，在某些情况下可能需要执行更多步骤。如果是这种情况，还请访问[https://accounts.google.com/DisplayUnlockCaptcha](https://accounts.google.com/DisplayUnlockCaptcha)并单击继续，以启用通过 gmail SMTP 发送的帐户访问权限。

[感](http://www.stevepolitodesign.com/blog/drupal-configure-smtp-module-work-gmail-updated)谢史蒂夫波利托

# mysql - MySQL 在哪里存储“特定于数据库”的权限？

> ID：13465272
> 
> 赞同：1
> 
> 时间：2012-11-20T01:26:09.920
> 
> 标签：mysql

我假设它在数据库文件夹中。但是在哪里......它可能在哪里？

* * *

问题通过运行解决`FLUSH PRIVILEGES`。我复制了该`mysql`文件夹，但没有重新启动服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:35:44.733

它们通常存储在“mysql”数据库中。

如[http://dev.mysql.com/doc/refman/5.5/en//grant-table-structure.html](http://dev.mysql.com/doc/refman/5.5/en//grant-table-structure.html)所示，该表称为“db”

```
mysql> use mysql;
mysql> show tables;

+---------------------------+
| Tables_in_mysql           |
+---------------------------+
| columns_priv              |
| db                        |
| event                     |
| func                      |
| general_log               |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| host                      |
| ndb_binlog_index          |
| plugin                    |
| proc                      |
| procs_priv                |
| proxies_priv              |
| servers                   |
| slow_log                  |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |
+---------------------------+ 
```

授予对特定数据库的访问权限，请使用：

```
GRANT SELECT ON database.* TO user@'localhost';
GRANT SELECT ON database.* TO user@'localhost' IDENTIFIED BY 'password'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:37:27.490

运行`SHOW GRANTS`（或其更具体的变体，如`SHOW GRANTS FOR 'user'@'host'`or `SHOW GRANTS FOR CURRENT_USER`）以获取特权信息。

`mysql`如果您希望将结果作为 SQL 结果集获取，您还可以从数据库中获取信息，如 julumme 的答案所示。

# javascript - 我必须使用什么方程来生成具有线性斜率的漏斗图？

> ID：13465275
> 
> 赞同：3
> 
> 时间：2012-11-20T01:26:58.423
> 
> 标签：javascript, math, geometry

我正在尝试使用 JavaScript 和 HTML5 画布开发动态漏斗图。我可以很好地绘制元素，唯一的问题是我的数学。我希望我的图表在每一侧都有一个线性斜率，以形成一个倒置的圆锥体。问题是我不知道是否可以用我拥有的信息量来完成。所以，这是我所拥有的信息：

1.  总图的宽度和高度（分别为 250x300）
2.  整个图的两个主基的长度（250和30）
3.  总图面积（42000像素）((250+30)/2)*300
4.  将有多少个阶段（为简单起见，假设为 3）
5.  每个阶段将占用的面积百分比（假设每个阶段分别为 30%、50% 和 20%）
6.  图的斜率/角度（上升/运行）300/110（它不是一个完美的三角形，第二个底边的长度为 30）

每个阶段都是梯形（以及图形本身）。现在，我可以使用什么公式来创建一个漏斗图，在给定斜率和舞台梯形的第一个底边的情况下，使每个舞台的高度正确？

我已经尝试过，但我似乎无法使数学工作。要么一个阶段对坡度太长，要么另一个阶段太小，导致坡度不一致。我需要坡度保持一致，并且只有舞台的高度可以改变。

我能找到的最接近我想要的图像是：

[http://dwh01.unife.it/microstrategy/help/WebUser/WebHelp/Lang_1033/images/defining_funnel_widget.gif](http://dwh01.unife.it/microstrategy/help/WebUser/WebHelp/Lang_1033/images/defining_funnel_widget.gif)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:30:38.627

我很欣赏 eh9 的回答，但老实说，我还不够聪明，无法通过 JavaScript 解决这种等式。然而，我最终想出了一个解决方案，我将在这里概述。

1.  在您所处的任何阶段找到以 1 为底的长度。（如果是第一阶段，则是图形的宽度）。
2.  计算下一个阶段需要的面积。我传递了一个百分比，因为我知道整个图表的总面积，我可以将该面积乘以百分比并找到要绘制的舞台面积。
3.  迭代一个 for 循环，其中 'i' 是高度，条件是 i <= graph_height。

    1.  使用以下等式计算具有给定高度 (i) 和斜率的第二个基本长度：b2 = (b1 - ((i/slope)*2)))。
    2.  在给定高度的情况下计算舞台的新临时区域。
    3.  将临时区域的差异与该区域的差异与高度（i）一起推入一个数组中。
4.  对数组进行排序，将最小差异区域差异作为数组中的第一个元素。

5.  您现在有一个数组，它的第一个元素包含与其相应高度的最小面积差。

因此，现在您有了给定面积的舞台高度。这就是你所需要的连同第一个基地和坡度来计算第二个基地的长度和位置。

这不是最有效的解决方案（主要是由于所做的计算猜测），但它确实有效并且是准确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:17:32.410

梯形的面积是高度乘以顶部和底部的平均值。在您描述的情况下，顶部和底部始终与高度呈线性关系。设`h`高度、`m`坡度和`b`底边。那么上边`t`等于`b + m * h`，所以面积是`1/2 * h * (b + b + m * h)`，等于`h * b + 1/2 * m * h^2`。将其设为您的面积，求解 的二次方程`h`，您就完成了。遍历相邻梯形，因为较低梯形的顶部是较高梯形的底部。

# jquery - 如何在 jQuery live click 中显示这个

> ID：13465281
> 
> 赞同：0
> 
> 时间：2012-11-20T01:28:00.693
> 
> 标签：jquery

有人可以帮我把它转换成 .live 点击吗？

```
<input class="productSubmitInput" name="AddToCart_Submit" type="submit" value="Add to Cart" onclick="AddToCart(26483,3123041,'',4,false);return false;"> 
```

onclick 上有一个 AddToCart 函数我需要使用 .live jquery 函数运行，但我不明白如何转换它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:48:17.877

除非您使用的是*真正*旧版本的 jQuery，否则您根本不应该使用该`.live()`方法。如果使用 1.7 或更高版本，请使用`.on()`; 如果使用早于 1.7 但高于 1.4.2 使用`.delegate()`.

```
$(document).on("click", ".productSubmitInput", function() { }) 
```

相当于

```
$(".productSubmitInput").live(function() { }) 
```

...除了更好，因为它更高效、更灵活。理想情况下，`$(document)`您不会做按钮`$("#someForm")`所在的表单在哪里。`"#someForm"`

话虽如此，以下是转换代码的一种方法。我假设您传递给`AddToCart()`函数的参数特定于每个按钮，因此您仍然需要以某种方式将它们与按钮相关联 - 我将使用`data-`属性：

```
<input class="productSubmitInput" name="AddToCart_Submit" type="submit"
       value="Add to Cart"
       data-param1="26483" data-param2="3123041"
       data-param3="" data-param4="4" data-param5="false"> 
```

然后，删除内联`onclick=`属性后，您将在脚本块中执行以下操作：

```
$(document).ready(function() {
    // $(document).on("click", ".productSubmitInput", function() {
    // OR, better
    $("#yourFormIdHere").on("click", ".productSubmitInput", function() {
        var $this = $(this);
        AddToCart( $this.data("param1"), $this.data("param2"), $this.data("param3"),
                   $this.data("param4"), $this.data("param5") );
        return false;
    });
}); 
```

当然，如果其中一些`AddToCart()`参数对于所有按钮都相同，那么您可以将它们直接放入 JS 中，而不是将它们作为属性存储在 HTML 中，例如，如果最后一个参数总是`false`：

```
 AddToCart( $this.data("param1"), $this.data("param2"), $this.data("param3"),
               $this.data("param4"), false ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:31:21.450

您可以在将运行 .live 的 onclick 语句中附加一个 ID 或添加一个函数，例如：

```
<input class="..." onclick="live(this)"> 
```

和JS：

```
function live(object)
{
    $(object).live(whatever you do here);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T01:31:27.113

```
<form id="formId">
    <input class="productSubmitInput" name="AddToCart_Submit" type="submit" value="Add to Cart">
</form> 
```

```
$('#formId').submit(function( e ){
   e.preventDefault();
   AddToCart(26483,3123041,'',4,false);
}); 
```

或替代已弃用的`.live()`方法：

```
$('#formId').on( 'click', 'input[name="AddToCart_Submit"]', function( e ){
   e.preventDefault();
   AddToCart(26483,3123041,'',4,false);
}); 
```

# c# - 嵌套起订量验证

> ID：13465282
> 
> 赞同：6
> 
> 时间：2012-11-20T01:28:17.850
> 
> 标签：c#, unit-testing, moq

在过去的几个小时里，我试图弄清楚这个 Moq 体操。我有以下课程 - 我正在尝试进行一些简单的验证并且它失败了 - 我似乎无法弄清楚为什么。

请注意，在 Moq 设置期间，我在请求 BeginCounter 时返回一个 Mock.Of - 但是当我尝试验证它时它失败了。但是，如果我取消注释 p.Setup(e => e.BeginCounter.Increment()) 行，则验证有效。

**我错过了什么？**

```
public interface IPerformanceCounters
{
    void Increment();
    void Decrement();
}

public interface IContext
{
    IPerformanceCounters BeginCounter { get; }
}

public class Test
{
    private readonly IContext context;
    public Test(IContext context) { this.context = context; }
    public void React() { this.context.BeginCounter.Increment(); }
}

void Test()
{
    // ARRANGE
    var p = new Mock<IContext>();
    p.Setup(e => e.BeginCounter).Returns(() => Mock.Of<IPerformanceCounters>());  // This does not work
    // p.Setup(e => e.BeginCounter.Increment()); // However, this works!

    // ACT
    var test = new Test(p.Object);
    test.React();

    // ASSERT
    p.Verify(v => v.BeginCounter.Increment(), Times.Once());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:21:49.737

我相信这是因为非设置方法是不可验证的。

据我所知，您正在返回一个模拟，然后尝试对其进行验证。但是，在您取消注释设置之前，它还没有准备好。

```
void Test()
{
    // ARRANGE
    var p = new Mock<IContext>();
    var perfCountMock = new Mock<IPerformanceCounters>();
    p.Setup(e => e.BeginCounter).Returns(() => perfCountMock.Object);  // This does not work
    perfCountMock.Setup(e => e.Increment());

    // ACT
    var test = new Test(p.Object);
    test.React();

    // ASSERT
    perfCountMock.Verify(v => v.Increment(), Times.Once());
} 
```

以上是你真正在做的事情。您不是在验证`IContext`呼叫，而是在验证`IPerformanceCounters`呼叫。我会以这种方式进行设置，以便更容易理解，但您可以轻松地取消注释该行

如果你想保持原样，你需要更好地理解它的`Mock.Of`功能。

```
void Test()
{
        // ARRANGE
        var p = new Mock<IContext>();
        var mockOfPerf = Mock.Of<IPerformanceCounters>();
        p.Setup(e => e.BeginCounter).Returns(mockOfPerf);  // This does not work

        // ACT
        var test = new Test1(p.Object);
        test.React();

                    // ASSERT
        Mock.Get(mockOfPerf).Verify(v=>v.Increment(), Times.Once());
} 
```

这和上面是一样的，只是使用`Mock.Of`. 您无法验证嵌套模拟，您需要根据实际模拟进行验证

# c - 如何在父母继续前进之前等待所有孩子终止？

> ID：13465284
> 
> 赞同：2
> 
> 时间：2012-11-20T01:28:17.760
> 
> 标签：c, fork, multiprocessing, wait

我正在做一些并行编程（多处理），我需要父母：

1.  `Fork`几个孩子

2.  在创建所有孩子之后，只需等待所有孩子终止

3.  在所有孩子都终止后，做一些其他的工作。

这是我尝试过的：

```
 int main(int argc, char **argv[])
{

  int j, i;
  pid_t children[3];
  int pid;

  // Fork the processes
  for(j = 0; j < 3; j++){
    if((children[j] = fork()) == 0){
      // Child process
      for(i = 0; i < 2; i++){
        printf("child %d printing: %d\n", j, i);
      }
    }else {
        // In parent now
        while (pid = waitpid(-1, NULL, 0)) {
            if (errno == ECHILD) {
                break;
            }
        }

        printf("all children terminated. in parent now\n");
    }
  }

  return 0;
} 
```

没有给出正确的输出。“所有孩子都终止了。现在在父母中”被打印了好几次，甚至在所有孩子都死之前。此外，对于每个进程，我应该只看到 2 个输出，但我看到的更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:21:58.300

这是您想要实现的更多目标吗？我刚刚为每个孩子设置了一个简单的计数，并延迟增加并行化的可见性。

```
#include <sys/wait.h>
#include <stdlib.h>
#include <stdio.h>
#include <errno.h>

int main(int argc, char **argv[])
{
  int i, j, k;
  int pid;

  // Fork the processes
  for(j = 0; j < 3; j++)
  {
    if (fork() == 0)
    {
        printf("starting child %d\n", j);
        // Child process - do your child stuff
        for (i = 0; i < 5; ++i)
        {
          for (k = 0; k < 10000000; ++k);
          printf("child %d printing: %d\n", j, i);
        }
         printf("child %d ending\n", j);
        // then just quit
        exit(0);
    }
  }

  j = 1;
  while (wait(NULL) > 0)
  {
    printf("%d child completed\n", j++);
  }

  // In parent now
  printf("all children terminated. in parent now\n");

  return 0;
} 
```

我得到的输出是

```
starting child 0
starting child 1
child 0 printing: 0
starting child 2
child 1 printing: 0
child 0 printing: 1
child 2 printing: 0
child 1 printing: 1
child 0 printing: 2
child 0 printing: 3
child 2 printing: 1
child 1 printing: 2
child 1 printing: 3
child 0 printing: 4
child 0 ending
child 2 printing: 2
1 child completed
child 1 printing: 4
child 1 ending
2 child completed
child 2 printing: 3
child 2 printing: 4
child 2 ending
3 child completed
all children terminated. in parent now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:37:44.597

每个孩子都在执行循环和分叉。`j`您需要在打印输出后跳出循环。由于这些孙子不是原始父代的子代，并且第一代子代从不等待它们，因此未指定输出顺序。此外，您需要`waitpid`退出 j 循环并且在所有子代都被分叉之前不要执行它。

# android - 从 Android Voice Regnition 获取号码

> ID：13465285
> 
> 赞同：0
> 
> 时间：2012-11-20T01:28:22.563
> 
> 标签：android, speech-recognition, voice-recognition, arrays

我已经实现了这样的识别器意图。

```
 Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);

    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Tell me stuff");
    startActivityForResult(intent, REQUEST_CODE); 
```

有了这样的回报

```
 if (requestCode == REQUEST_CODE && resultCode == RESULT_OK)
    {

        ArrayList<String> matches = data.getStringArrayListExtra(
                RecognizerIntent.EXTRA_RESULTS);

    } 
```

我想用这些数据做的是用数字实现简单的语法规则。例如像这样

```
 if(matches.contains("my number is"))
        {

             string number = matches.getNextWord();

                 //Then parse the string into an integer    

        } 
```

显然这段代码不起作用，但我想知道是否有人对此有解决方案，因为谷歌搜索完全没有产生任何结果。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T18:12:09.423

你不需要语法。

看看我是如何在这段代码中做到这一点的。

[https://github.com/gast-lib/gast-lib/blob/master/app/src/root/gast/playground/speech/food/command/AskForCalories.java](https://github.com/gast-lib/gast-lib/blob/master/app/src/root/gast/playground/speech/food/command/AskForCalories.java)

该库中的代码基本上循环调用此方法的所有可能识别结果的所有单词：

```
 private boolean isNumber(String word)
    {
        boolean isNumber = false;
        try
        {
            Integer.parseInt(word);
            isNumber = true;
        } catch (NumberFormatException e)
        {
            isNumber = false;
        }
        return isNumber;
    } 
```

您可能还希望让您的代码接受其他听起来像数字的词，例如“too”“tree”“for”等......

# java - 反转嵌套循环

> ID：13465286
> 
> 赞同：2
> 
> 时间：2012-11-20T01:28:30.720
> 
> 标签：java, for-loop, reverse, shape, nested-loops

我正在尝试反转此代码，以便可以打印带有边框的菱形。开始反转嵌套循环/一系列循环的最佳方法是什么？我尝试修改代码，但一切都变得混乱和无序。有什么建议吗？

另外，有没有办法在顶部星星的每一侧制作偶数个 .'s ？我能够让它工作的唯一方法是在每一面打印一个均匀的数量......

这是应该打印到控制台的内容：http: [//i.imgur.com/h55r2.jpg](http://i.imgur.com/h55r2.jpg)

这是我的代码：

```
public class SixTester {

    public static void main(String[] args)
    {
            int i,j,k;
            int numOfRows = 8;  // Made this a variable, so that the program can make any size diamond (try playing around with different values eg. 2 or 16)

            // Step 1\. The first Dash
            for(i=0;i<numOfRows*2 +2;i++)
                    System.out.print(" "); // Number of spaces is double the number of rows in your 'Half Pyramid'
            System.out.println("-");

            // Step 2\. The First half diamond
            for (j=0; j<numOfRows ; j++ )
            {
                    for(k=numOfRows*2; k>1+j*2; k--)
                            System.out.print(" ");

                    System.out.print("_/");
                    for (i=0; i< 2+j*4; i++)
                    {
                            // Prepare the Star rectangle, Note that it starts half the way (rows/2)
                            if(j >= numOfRows/2 && (i>j*2- numOfRows/2 && i<j*2+ numOfRows/2)) {
                                    System.out.print("*");                                 
                            }
                            else
                                    System.out.print(".");
                    }
                    System.out.println("\\_");
            }
            // Next Step  - Make the bottom pyramid...but how to reverse?
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:59:25.987

这不是最优雅的方式，但它有效。在您的代码显示“但如何反转？”的位置插入这些行。我已经用注释标记了对代码的更改

```
 // COUNT BACKWARDS NOW. YOU WANT LARGEST ROW FIRST, OTHERWISE IT'S OK EXCEPT...
        for (j=numOfRows-1; j>=0 ; j-- ) 
        {
                for(k=numOfRows*2; k>1+j*2; k--)
                        System.out.print(" ");

                System.out.print("\\_"); // BORDERS ARE BACKWARDS. PUT BORDER ON OTHER SIDE
                for (i=0; i< 2+j*4; i++)
                {
                        if(j >= numOfRows/2 && (i>j*2- numOfRows/2 && i<j*2+ numOfRows/2)) {
                                System.out.print("*");                                 
                        }
                        else
                                System.out.print(".");
                }
                System.out.println("_/"); // PUT BORDER ON OTHER SIDE
        }

        for(i=0;i<numOfRows*2 +2;i++)
                System.out.print(" ");
        System.out.println("-"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:38:58.260

如果你写了一个这样的构建器......

```
public static interface Reflection {
    String reflect(String str);
}

public static class Builder {
    private List<String> lines = new ArrayList<String>();
    private StringBuilder builder = new StringBuilder();
    public void newLine() {
        lines.add(builder.toString());
        builder = new StringBuilder();
    }
    public void repeat(String section, int count) {
        for (int i = 0; i < count; i++) {
            builder.append(section);
        }
    }
    public void padLeft(String section, int count) {
        while (builder.length() < count) {
            builder.append(section, 0, section.length());
        }
    }
    public void reflectX(Reflection reflection) {
        List<String> reflected = new ArrayList<String>();
        for (String line : lines) {
            StringBuilder tmp = new StringBuilder();
            tmp.append(reflection.reflect(line));
            tmp.reverse();
            tmp.append(line);
            reflected.add(tmp.toString());
        }
        lines = reflected;
    }
    public void reflectY(Reflection reflect) {
        List<String> reflection = new ArrayList<String>();
        for (String line : lines) {
            reflection.add(reflect.reflect(line));
        }
        Collections.reverse(reflection);
        lines.addAll(reflection);
    }
    public String build() {
        StringBuilder tmp = new StringBuilder();
        for (String line : lines) {
            tmp.append(line);
            tmp.append('\n');
        }
        return tmp.toString();
    }
    public void write(String string) {
        builder.append(string);
    }
} 
```

然后将您的代码代码简化为此，但这只是过度工程：

```
int nRows = 8;
int pad = 20;
Builder builder = new Builder();

builder.write("_");
builder.padLeft(" ", pad);
builder.newLine();

for (int i = 0; i < nRows; i++) {
    int dots = i * 2 + 1;
    int stars = i >= 4 ? 4 : 0;
    builder.repeat("*", stars);
    builder.repeat(".", dots - stars);
    builder.write("\\");
    if (i < nRows - 1) {
        builder.write("_");
    }
    builder.padLeft(" ", pad);
    builder.newLine();
}
builder.reflectX(new Reflection() {
    @Override
    public String reflect(String str) {
        return str.replace('\\', '/');
    }
});
builder.reflectY(new Reflection() {
    @Override
    public String reflect(String str) {
        return str.replace("\\", "%x").replace("/", "\\").replace("%x", "/").
                replace("_\\", "%x").replace("/_", "_/").replace("%x", "\\_");
    }
});
System.out.println(builder.build()); 
```

结果

```
 __                   
             _/..\_                 
           _/......\_               
         _/..........\_             
       _/..............\_           
     _/.....********.....\_         
   _/.......********.......\_       
 _/.........********.........\_     
/...........********...........\    
\...........********.........../    
 \_.........********........._/     
   \_.......********......._/       
     \_.....********....._/         
       \_.............._/           
         \_.........._/             
           \_......_/               
             \_.._/                 
               __ 
```

# javascript - Alloy UI 中的自动完成项目选择

> ID：13465288
> 
> 赞同：1
> 
> 时间：2012-11-20T01:28:42.800
> 
> 标签：javascript, autocomplete, liferay, alloy-ui

我正在使用 Liferay 附带的 Alloy UI 自动完成插件。我的自动完成部分工作得很好。

现在，我要做的是捕获从自动完成自动建议中选择的数据，并执行操作。

比方说，如果我写`ry`自动完成然后列表出现如下：

```
ryan
rynda
ryab 
```

现在，如果我单击任何项​​目或通过键盘箭头键选择并按 Enter，它将被复制到自动完成源输入框。但我想要的是，当用户选择一个特定的项目时，我想返回并且什么都不做`ryab`。

我找到了活动

```
autocomplete.on('itemSelect',function(event) {
}; 
```

当我选择任何项目时会触发它，但我不知道如何获取被选择的对象以及如何通过比较对象来返回 false/什么也不做。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T17:53:45.783

以下代码应该可以解决问题：

```
var expandit = false;

autocomplete.on('itemSelect', function(event) {
    var currentValue = autocomplete.inputNode.get('value');
    //do comparison logic with currentValue here, and eventually set input node value to empty string
    if (currentValue == 'foo') {
        expandit = true;
        autocomplete.inputNode.set('value', '');
        // stop event propagation
        event.stopImmediatePropagation();
        return false;
    }
});

autocomplete.on('containerCollapse', function(event) {
    //reopen the menu in case of "do nothing" selection
    if (expandit) {
        autocomplete._sendQuery(autocomplete.inputNode.get('value') + '*');
        expandit = false;
    }
}); 
```

小部件的Alloy UI[参考 API](http://alloyui.com/deploy/api/AutoComplete.html)和[源代码](http://alloyui.com/deploy/api/aui-autocomplete-debug.js.html)`Autocomplete`非常有用。

* * *

要以编程方式显示菜单，您可以使用：

```
autocomplete._sendQuery(autocomplete.inputNode.get('value') + '*'); 
```

# navigation - 居中我的导航栏

> ID：13465289
> 
> 赞同：1
> 
> 时间：2012-11-20T01:28:48.260
> 
> 标签：navigation, centering, nav

我正在尝试将我的水平导航栏居中。右边有点偏，不知道怎么弄。我已经尝试过这里发布的许多其他类似的解决方案，但似乎没有任何东西可以使我的导航正确居中。请问有人可以帮忙吗？下面是我的 HTML，后面是我的 CSS。谢谢！

**我的 HTML：**

```
<div id="nav">
            <ul>
                <li class="box"><a href="index.html">Home</a></li>
                <li class="box"><a href="earing/earing.html">Earrings</a></li>
                <li class="box"><a href="necklace/necklace.html">Pendants</a></li>
                <li class="box"><a href="rings/rings.html">Rings</a></li>
                <li class="box"><a href="sets/sets.html">Sets</a></li>
                <li class="box"><a href="orders/order.html">Order</a></li>
                <li class="box"><a href="contact/contactform.php">Contact Us</a></li>
        </ul>
   </div> 
```

**我的 CSS：**

```
#nav {
width: auto;
min-width: 1000px;
max-width: 100%;
text-align: center;
}

#nav li, #nav a {
display: inline;
background-color: #E5D9CF;
padding: 10px;
margin: 10px;
border-radius: 25px;
text-decoration: none;
color: #403D3A;
font-family: 'Nunito', sans-serif;
min-width: 80%;
} 

#nav a:hover {
color: #16B5D9;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:05:31.997

将以下内容添加到您的 CSS

```
#nav ul {
    padding: 0px;
} 
```

# iphone - 如何处理ios的连接丢失

> ID：13465291
> 
> 赞同：0
> 
> 时间：2012-11-20T01:28:53.753
> 
> 标签：iphone, ios, connection

我正在编写一个应用程序，它在一天中连接并不断与我们的服务器通信。

在这一天，用户可能会或可能不会失去他们的连接，超出范围等我想知道处理这些实例的最佳方式是什么，关于我的代码行为方式以及我通知用户的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:39:12.820

尝试通过 Internet、WiFi 可达性的示例（KSReachability）查看此来源

[KS可达性](https://github.com/kstenerud/KSReachability)

[可达性](https://github.com/Garfeild/Reachability)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:42:35.393

*注意：我假设您想通过 HTTP 执行网络操作

**读取**

对于读取的数据，这取决于您对数据变化速度的假设。

对于可变数据（预计每天更改几次的数据），请使用 SDURLCache。SDURLCache 提供 HTTP 本地缓存。如果你将它与 AFNetworking 连接起来，那么它也会遵守标准的 HTTP 缓存行为（过期标头、etag 等）。

对于“静态”数据，您可以将数据与应用程序本地捆绑在一起，并通过 HTTP 定期检查更新。

在任何一种情况下，您都应该尝试（如果可能）将一些数据与应用程序打包，以便在安装应用程序的那天，它可能根本不需要网络连接来运行。

**写**

对于写入，处理此问题的最佳方法是将所有写入排队并在适当的时间发布它们。实现队列相对简单，很大程度上取决于如何在本地存储东西。一种方法是在 SQLite db 表中设置标志以指示需要发布到服务器端的数据元素。另一个可能是构建文档并将它们写入磁盘，当有连接时，有一个单独的调度线程将它们发布到服务器端。

# html - 将图像放置在坐标上的简单代码

> ID：13465295
> 
> 赞同：-3
> 
> 时间：2012-11-20T01:29:27.537
> 
> 标签：html

我想将图像放置在页面上的固定坐标处，例如屏幕的左角。我还想控制图像的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:49:40.613

这是一个定位图像的示例。使用 img 标签的“margin”字段指定坐标。您可以通过改变宽度和高度来更改图像的大小。复制并保存下面的代码段（使用扩展 html），然后在任何浏览器中打开它以查看它的运行情况。

```
<img src="http://fanumusic.com/wp-content/uploads/2012/10/Free.jpg" style="float:right;    margin:0px 0px 15px 15px; cursor:pointer; cursor:hand; border:0" width="100" height="100" alt="sample image" /> 
```

这是一个详细说明各种 html 标记选项的页面[链接。](http://www.w3schools.com/tags/default.asp)

# java - 用于在 android 中编写自己的电子邮件应用程序的搜索库

> ID：13465297
> 
> 赞同：0
> 
> 时间：2012-11-20T01:29:49.087
> 
> 标签：java, android, email

我正在尝试为 android 平台编写自己的电子邮件 (imap) 应用程序。
在那里我搜索了一个库来帮助我获取 imap 文件夹，并通过发送电子邮件或使用方法和类从服务器获取电子邮件来帮助我。

*   我查看了 k9 的源代码-> 它对我来说很复杂。
*   我查看了 android 的官方电子邮件应用程序的源代码 - > 它对我来说很复杂，但我已经看到了 emailcommon 包，但没有文档。
*   我找到了库 javamail，但没有将它与 android 一起使用的文档。

为 android 编写电子邮件应用程序的最佳库是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:34:16.207

as I cannot comment so writing as answer.. To me Javamail is a very good one. you can find following links helpful

for android javamail project you can try

[http://code.google.com/p/javamail-android/](http://code.google.com/p/javamail-android/)

here is the javamail api doc

[http://javamail.kenai.com/nonav/javadocs/index.html](http://javamail.kenai.com/nonav/javadocs/index.html)

and i found a doc file helpful. can not give the link for limitation. search using javamail doc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T07:10:28.370

Jakarta Commons Net 库工作正常： http: [//nilvec.com/sending-email-without-user-interaction-in-android.html](http://nilvec.com/sending-email-without-user-interaction-in-android.html)

我用过它，对我来说已经足够好了。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-07-01T06:14:39.370

我找到了某人的图书馆，但我仍然阅读了代码。

你可以检查[这个](https://github.com/kristijandraca/BackgroundMailLibrary)。

# c - 如何从函数中的数组返回结构？（指针）

> ID：13465299
> 
> 赞同：4
> 
> 时间：2012-11-20T01:29:52.857
> 
> 标签：c

考虑这段代码：

```
typedef struct fruits_s
{
    char* key;
    char value;
} fruits_t;

static fruits_t fruit_array[] = {
{ "Apple", 1 },
{ "Banana", 2 },
{ "Grape", 3 },
{ "Orange", 4 } };

static fruits_t* getFruitFromValue(char value)
{
    int i;
    for (i = 0; i < sizeof(fruit_array)/sizeof(fruit_array[0]); i++){
        if (value == fruit_array[i].value){
            return fruit_array[i];
        }
    }
} 
```

我是 C 的新手，并且仍在学习何时需要/使用指针。我被 Java 背景宠坏了。所以，在上面的代码中，我感到困惑的是函数是否应该返回一个*指针* `fruits_t*`？或者是其他东西？当我这样做`fruit_array[i]`是指向我的结构的指针，还是结构本身？

话虽如此，稍后在我的代码中，当我想使用该功能时，是这样的：

```
 fruits_t* temp = getFruitFromValue(1); 
```

或者

```
 fruits_t temp = getFruitFromValue(1); 
```

或者

```
 fruits_t temp = &getFruitFromValue(1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T01:38:13.190

该函数可以返回任何一个——你的选择。你说过你会返回一个指针；只要你这样做就可以了。

当你写：

```
static fruits_t *getFruitFromValue(char value)
{
    int i;
    for (i = 0; i < sizeof(fruit_array)/sizeof(fruit_array[0]); i++){
        if (value == fruit_array[i].value){
            return fruit_array[i];
        }
    }
} 
```

有几个问题：

1.  `fruit_array[i]`是一个结构，而不是一个指针。使用`return &fruit_array[i];`.
2.  如果循环退出，则根本不会从函数返回值。

修复这些导致：

```
static fruits_t *getFruitFromValue(char value)
{
    int i;
    for (i = 0; i < sizeof(fruit_array)/sizeof(fruit_array[0]); i++)
    {
        if (value == fruit_array[i].value)
            return &fruit_array[i];
    }
    return NULL;
} 
```

这没关系，因为您返回的指针指向静态数据，该数据将超过函数的寿命。如果您尝试返回指向非静态数据的指针，则（可能）您手上会遇到错误，除非您使用动态内存分配（通过`malloc()`等）。

您也可以返回结构；处理错误返回变得更加困难。如果您有 C99，则可以使用“复合文字”：

```
static fruits_t getFruitFromValue(char value)
{
    int i;
    for (i = 0; i < sizeof(fruit_array)/sizeof(fruit_array[0]); i++)
    {
        if (value == fruit_array[i].value)
            return fruit_array[i];
    }
    return (fruits_t){ .key = "", .value = 0 };
} 
```

# c++ - 对类中结构的 c++ 向量进行排序

> ID：13465301
> 
> 赞同：0
> 
> 时间：2012-11-20T01:30:11.287
> 
> 标签：c++, class, sorting, vector, struct

我有一个基本上看起来像这样的类（我删除了不必要的代码）：

```
class WilxList {
private:    
    struct Test{
        double number;
        int sign;
        int rank;
    };
    bool testSorter(const Test & x1, const Test & x2);
public: 
    WilxList(std::vector<double> &argNumbers, std::string argName, int numberOfTests);
}; 
```

我正在尝试对这样的测试结构向量进行排序：

```
WilxList::WilxList(std::vector<double> &argNumbers, std::string argName, int numberOfTests)
{
    //Omitted code
    std::vector<Test> sortedTests;
    //Omitted code where Tests are created and added to the vector inside for loop
    std::sort(sortedTests.begin(), sortedTests.end(), testSorter); //ERROR 
```

}

我得到的错误是：

```
error C3867: 'WilxList::testSorter': function call missing argument list; 
use '&WilxList::testSorter' to create a pointer to member
c:\users\stenver\documents\visual studio 2012\projects\wilxoniastakutest\wilxoniastakutest\wilxlist.cpp 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T01:33:50.303

`testSorter`是导致困难的类的**非静态成员函数。**`WilxList`使用指向非静态成员函数的函数指针相对**比较困难**，并且不可能在期望像`sort`算法这样的自由（或静态成员）函数的情况下使用。

**解决此问题的一种方法是移动**到**`testSorter`结构本身并将其重命名为`operator<`. 这会让你做类似的事情`x1<x2`，你可以调用 sort`std::sort(sortedTests.begin(), sortedTests.end());`假设函数实际上表示一个`<`操作，如果它不是，它可能会变得混乱并且将其设为**静态成员函数**会更整洁。无论哪种情况，错误都会消失。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T01:33:52.143

问题是比较器函数是一个成员函数，这`std::sort`是不期望的。

您可以通过多种方式解决此问题：第一种是制作比较器函数`static`，另一种是使其成为独立函数，第三种方法是使用 C++11 lambda 表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T01:41:42.190

将代码更改为：

```
class WilxList {
private:    
    static bool testSorter(const Test & x1, const Test & x2);
}

std::sort(sortedTests.begin(), sortedTests.end(), WilxList ::testSorter); //ERROR 
```

非静态`testSorter`采用一个隐式`this`指针，该指针不兼容用作 in 中的谓词`std::sort`，它采用两个参数。

您也可以声明`testSorter`为全局函数，都可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T01:36:54.410

你要

```
 std::sort(sortedTests.begin(), sortedTests.end(), std::mem_fun(&WilxList ::testSorter)); 
```

或类似的东西。在这里查看[http://www.cplusplus.com/reference/std/functional/mem_fun/](http://www.cplusplus.com/reference/std/functional/mem_fun/)**

# transition - 使用 KineticJS 的 Node.TransitionTo 方法时，Chrome 中的 CPU 使用率很高

> ID：13465305
> 
> 赞同：2
> 
> 时间：2012-11-20T01:30:58.350
> 
> 标签：transition, kineticjs

我制作了一个动画示例来比较 KineticJS 和 Move.js(CSS3) 之间的 CPU/内存使用情况。在动画中，我使用了 Node.TransitionTo 方法。我发现 Chrome 22+ 的 CPU/内存使用率非常高。所以想问问有没有什么办法可以降低CPU/Memory的成本。

# c# - C# 中的 SecureRandom

> ID：13465312
> 
> 赞同：8
> 
> 时间：2012-11-20T01:32:04.613
> 
> 标签：c#, java

这是java代码：

```
SecureRandom random = SecureRandom.getInstance("SHA1PRNG");
random.setSeed(someBytes);//someBytes is the seed 
```

C#中是否有任何相等的方法？我得到的不正确：

```
RandomNumberGenerator rng = RNGCryptoServiceProvider.Create();
rng.GetBytes(someBytes);// out someBytes 
```

我确实需要种子，因为 java 代码需要，我必须将 java 代码翻译成 C#。当我传递相同的种子时，我从 C# 得到的序列必须与 java.util.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T01:47:28.643

抽象类`System.Security.Cryptography.RandomNumberGenerator`及其具体实现没有向开发人员公开设置种子的方法（尽管在内部，我怀疑他们确实使用了一个。）

我怀疑，设计的基本原理是，可重复性不会产生“密码学强”的随机值流。

如果您查看具体的实现，`RNGCryptoServiceProvider`虽然它确实公开了一个接受 a`byte[]`来大概初始化 PRNG 的构造函数，但它的文档说

> 该值被忽略。

评论继续说

> 此方法不直接初始化 RNGCryptoServiceProvider 类。调用此方法等效于调用 RNGCryptoServiceProvider 构造函数并传递**null**。

有关进入所使用种子的内容类型的信息，请参阅 MSDN 文档[`CryptGenRandom`](http://msdn.microsoft.com/en-US/aa379942)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T01:44:22.190

根据 MSDN 文档，[`RNGCryptoServiceProvider`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.aspx)似乎没有一种方法可以自己手动为其播种值。有些构造函数采用[`byte[]`](http://msdn.microsoft.com/en-us/library/s3bz1e1a.aspx)and [`string`](http://msdn.microsoft.com/en-us/library/y3dh7bhb.aspx)，但是*这两个参数都被忽略了*。

这无关紧要，因为任何有价值的随机数生成器都会在创建时正确地播种。您提供的任何值都不太可能比内部播种机制更好（这可能是一个高分辨率的时间衍生值）。

# asp.net-mvc - 将整数从控制器传递到视图 mvc

> ID：13465315
> 
> 赞同：1
> 
> 时间：2012-11-20T01:32:23.227
> 
> 标签：asp.net-mvc

我正在努力完成我认为很简单的事情。我只是无法围绕它。

我有一个组织列表，它只是组织 ID 和名称。我想做的是在每个组织旁边都有一个“添加”链接，就像编辑一样（就像删除和编辑按钮一样）。

它会抓取 OrganizationID 并将其传递给我在其他控制器中的一个创建视图，并自动填写 OrganizationID 字段。

添加链接将简单地指向具有 DropDownList 的视图。然后，用户将选择选项之一，例如地址，以将地址添加到从组织列表中选择的组织。用户选择地址后，他们点击提交按钮。然后它转到 OrganizationAddress Create View 并自动填写 OrganizationID 字段。

我真的希望我解释得足够好。

这是我的 OrganizationController 中的 Add ActionResult

```
public ActionResult Add(int id)
{
    using (var db = new VAGTCEntities())
    {
        ViewBag.OrgPages = ddp.PageList();
        return View(db.Organizations.Find(id));
    }
} 
```

抓住组织。

这是我的添加视图中的表单：

```
 <fieldset>
        <legend>Organization</legend>

        @Html.HiddenFor(model => model.OrganizationID)

        <div class="editor-label">
            @Html.Label("Add:")
        </div>
        <div>
            @Html.DropDownList("OrgPages")
        </div>
        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

这是我的 OrganizationController 中的 Add POST ActionResult

```
[HttpPost]
public ActionResult Add(int id, Organization organization, int OrgPages)
{

    try{
        ViewBag.OrgID = id;
        if (OrgPages == 2)
            return RedirectToAction("Create", "OrgAddress");
        else if (OrgPages == 3)
            return RedirectToAction("Create", "OrgIE");
        else if (OrgPages == 4)
            return RedirectToAction("Create", "OrgMembership");
        else if (OrgPages == 5)
            return RedirectToAction("Create", "OrgBusinessType");
        else if (OrgPages == 6)
            return RedirectToAction("Create", "OrgIndustryType");
        else if (OrgPages == 7)
            return RedirectToAction("Create", "OrgPhone");
        else if (OrgPages == 8)
            return RedirectToAction("Create", "OrgEmail");
        else if (OrgPages == 9)
            return RedirectToAction("Create", "OrgWebsite");
        else if (OrgPages == 9)
            return RedirectToAction("Create", "OrgNote");
        else                   
            return RedirectToAction("Index");
    }
    catch (Exception)
    {
        ModelState.AddModelError("Error", "This item exists in the database already.");
        ViewBag.OrgPages = ddp.PageList();
    }
    return View(organization);
} 
```

从这里我无法弄清楚。我尝试传递的任何内容都为空。我还是 MVC 的新手——慢慢地，慢慢地学习我的方式！

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:47:09.473

您是否有自定义路线来说明您传递的以下参数？

```
public ActionResult Add(int id, Organization organization, int OrgPages) 
```

在您的视图中，您可以指定表单将发布到的操作并包含参数，或者只需将这些属性（即组织、OrgPages）添加到视图模型，然后让 MVC 为您完成所有绑定。

[阅读此内容了解详情](http://weblogs.asp.net/nmarun/archive/2010/02/25/asp-net-mvc-model-binding.aspx)

# python - 在哪里托管烧瓶和炼金术应用程序？

> ID：13465316
> 
> 赞同：0
> 
> 时间：2012-11-20T01:32:27.347
> 
> 标签：python, sqlalchemy, hosting, flask

好吧，我想使用flask和sqlAlchmey在flask中制作一个应用程序网站，但我不知道在哪里托管，我将在数据库中使用mysql或postgrest。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:42:41.587

当前的大多数云 PaaS 平台，例如[AppFog](https://www.appfog.com/)和[Heroku](http://www.heroku.com/)都提供烧瓶托管。您可以先尝试他们的免费托管选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T07:59:02.930

如果您想要共享主机，那么[http://www.webfaction.com/](http://www.webfaction.com/)非常好。易于设置，易于运行。还有指导如何在那里部署它[http://flask.pocoo.org/snippets/65/](http://flask.pocoo.org/snippets/65/)。还有一些更高级的，包括 virtualenv 的使用等等。

# java - Java Swing JFrame 背景未显示

> ID：13465319
> 
> 赞同：3
> 
> 时间：2012-11-20T01:32:47.123
> 
> 标签：java, swing, background, jframe

我不知道为什么我的 Jframe 上没有显示背景颜色。下面是我尝试过的代码。

当我打电话

```
AnimatedDialogBox animatedDialogBox = new AnimatedDialogBox("Saving TransSet form", dataSheetTable); 
```

它没有显示我需要的确切颜色。它显示没有任何背景颜色。AnimatedDialogBox 类如下：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Point;
import java.awt.Toolkit;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JProgressBar;
import javax.swing.SwingWorker;
import net.miginfocom.swing.MigLayout;

public class AnimatedDialogBox {

    private JFrame progressDialog ;
    private JProgressBar bar;
    private Task task;
    private ResourceManager resourceManager = new ResourceManager();

    public AnimatedDialogBox(String message, JComponent parentComponent) {
        progressDialog = new JFrame( message);
        progressDialog.setLayout(new MigLayout());
        progressDialog.setUndecorated(true);
          progressDialog.setBackground(resourceManager.getColor("error.Panel.background")); // RGB = 243, 255, 159
        progressDialog.setPreferredSize(new Dimension(300, 100));
        JLabel label = new JLabel(message);
        label.setBackground(resourceManager.getColor("error.Panel.background"));
        progressDialog.add(label, "gapbefore 80,gapbottom 30, wrap");
        bar = new JProgressBar(0, 100);
        bar.setIndeterminate(true);
        bar.setBackground(resourceManager.getColor("error.Panel.background"));
        progressDialog.add(bar, "gapbefore 80, gapbottom 30, wrap");
        progressDialog.setFocusableWindowState(false);
        Point point = progressDialog.getLocation();
        Dimension cDim = parentComponent.getSize();

        progressDialog.setLocation((int) (cDim.getWidth() / 2)-100,
                    (int) cDim.getHeight() + 350);

        progressDialog.pack();

        task = new Task();
        task.addPropertyChangeListener(new PropertyChangeListener() {
            @Override
            public void propertyChange(PropertyChangeEvent evt) {
                if (evt.getPropertyName().equalsIgnoreCase("progress")) {
                    int progress = task.getProgress();
                    if (progress == 0) {
                        bar.setIndeterminate(true);
                    } else {
                        bar.setIndeterminate(false);
                        bar.setValue(progress);
                        progressDialog.dispose();
                    }
                }
            }
        });
        task.execute();
        progressDialog.setVisible(true);
    }

    class Task extends SwingWorker<Void, Void> {
        private static final long SLEEP_TIME = 1000;

        public Task() {
        }

        @Override
        public Void doInBackground() {
            setProgress(0);
            try {
                Thread.sleep(SLEEP_TIME);// imitate a long-running task
            } catch (InterruptedException e) {
            }
            setProgress(100);
            return null;
        }

        @Override
        public void done() {
            Toolkit.getDefaultToolkit().beep();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:04:22.160

a 的背景颜色`JProgressBar`由它的 UI 委托决定`ProgressBarUI`。例如，

```
UIManager.put("ProgressBar.background", Color.red); 
```

并非所有实现都使用颜色；例如，`com.apple.laf.AquaProgressBarUI`忽略设置有利于[此处](https://stackoverflow.com/a/7262450/230513)看到的外观。作为替代方案，您可能需要考虑有色背景或`Border`封闭面板，如此处建议的[那样](https://stackoverflow.com/a/3420431/230513)。

另请注意，您可以从该方法更新 GUI ，如此[处](https://stackoverflow.com/a/4637725/230513)`process()`所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T02:18:39.877

一些想法：

1.  您不应该将组件直接添加到 JFrame。相反，您的内容应该放在“内容窗格”中。请参阅 JFrame.setContentPane()、JFrame.getContentPane()。您可能需要参考 JFrame 文档或教程。

2.  如果一个组件不是不透明的，那么它的背景将不会被渲染。请参阅 JComponent.setOpaque()、Component.isOpaque()。

# java - 如何编写一个接受 int 变量并返回最大的方法？

> ID：13465320
> 
> 赞同：3
> 
> 时间：2012-11-20T01:32:59.243
> 
> 标签：java, compare, max

我正在尝试编写一个方法来比较 3 个数字并返回其中最大的一个。

这是我的代码，但它不起作用......

```
public int max(int x, int y, int z){
    return Math.max(x,y,z);
} 
```

如何更正我的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T01:36:07.790

尝试这个...

```
public int max(int x, int y, int z){
    return Math.max(x,Math.max(y,z));
} 
```

该方法`Math.max()`仅接受 2 个参数，因此如果要比较 3 个数字，则需要执行此方法两次，如上面的代码所示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T01:35:13.550

对于您当前的 3 个整数参数的解决方案，您可以替换：

```
Math.max(x,y,z) 
```

和

```
Math.max(Math.max(x, y), z) 
```

[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#max%28int,%20int%29)显示需要`Math.max`2 个参数。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T01:36:20.310

对于任意数量的 int 值，您可以这样做（tip 'o the hat to zapl）：

```
public int max(int firstValue, int... otherValues) {
    for (int value : otherValues) {
        if (firstValue < value ) {
            firstValue = value;
        }
    }
    return firstValue;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T02:44:42.117

尝试使用 JDK api：

```
public static int max(int i, int... ints) {
    int nums = new int[ints.length + 1];
    nums[0] = i;
    System.arrayCopy(ints, 0, nums, 1, ints.length);
    Arrays.sort(nums);
    return ints[nums.length - 1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T02:16:52.483

如果 Apache Commons Lang 在您的类路径中，您可以使用`NumberUtils`.

有几个`max`,`min`功能。也是你想要的。

检查 API：[http ://commons.apache.org/lang/api/org/apache/commons/lang3/math/NumberUtils.html](http://commons.apache.org/lang/api/org/apache/commons/lang3/math/NumberUtils.html)

Commons Lang 很有用，因为它扩展了标准的 Java API。

# python - 在字符串中查找 http 或 // 或 \\ 并用 href 属性包围

> ID：13465321
> 
> 赞同：-1
> 
> 时间：2012-11-20T01:33:01.123
> 
> 标签：python

我正在尝试找到一个包含 http 或 // 或 \ 的链接，并在找到后用 href 标签包围，有没有人对如何做到这一点有任何想法

```
 INput:-http://pastebin.com/p9H8GQt4

sanity_results = sanity_results.replace('\n','<br>\n')
return sanity_results

def main ():
resultslis=[]
xmlfile = open('results.xml','r')
contents = xmlfile.read()
testresults=getsanityresults(contents)
#print testresults
for line in testresults:
    #print line
    line = line.strip()
    #print line
    line = re.sub(r'(http://[^\s]+|//[^\s]+|\\\\[^\s]+)', r'<a href="\1">\1</a>', line)
    print line       
    resultslis.append(line)
print resultslis

if __name__ == '__main__':
main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:54:59.200

您可能希望为此使用[正则表达式](http://docs.python.org/2/library/re.html)：

```
line = re.sub(r'(http://[^\s]+)', r'<a href>\1</a>', line) 
```

那只是处理这个`http://`案子。要处理所有这三个，只需执行以下操作：

```
line = re.sub(r'(http://[^\s]+|//[^\s]+|\\\\[^\s]+)', r'<a href>\1</a>', line) 
```

在控制台中使用该正则表达式以确保它执行您想要的操作，但它似乎按照[您发布的输入数据的](http://pastebin.com/p9H8GQt4)要求执行操作。正如我在评论中提到的，一般来说，如果你想自动链接文本，你需要弄清楚哪些分隔符可以结束链接。

同时，您确定问题规范是正确的吗？通常，您不希望这样：

```
<a href>http://foo/bar</a> 
```

… 但是这个：

```
<a href="http://foo/bar">http://foo/bar</a> 
```

为此，只需将`sub`替换表达式更改为`r'<a href="\1">\1</a>'`.

你也可以用字符串函数来写整个东西，但除了简单的情况外，这实际上比学习正则表达式要困难得多。例如，上面的 one-liner 的等价物是这样的：

```
index = 0
while index is not None:
    index = min(line.find(pattern, index) for pattern in ('http:', '//', '\\\\'))
    if index == -1:
        break
    space = line.find(' ', index)
    if space == -1:
        space = None
    line = line[:index] + '<a href>' + line[index:space] + '</a>' + line[space:]
    index = space 
```

除了我愿意打赌我至少有一个明显的栅栏错误，并且可能至少有一个带有可能重叠模式的细微错误，等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:36:54.963

您应该阅读有关[字符串转义序列](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)和[字符串操作](http://docs.python.org/2/library/string.html)的文档。

```
if (line.find('http') != -1 or line.find('\\\\') != -1 or line.find('//') != -1):
    line = '<a href="">'+line+'</a>' 
```

# java - 如何在可运行 Jar 中包含外部库

> ID：13465322
> 
> 赞同：0
> 
> 时间：2012-11-20T01:33:01.803
> 
> 标签：java, netbeans

所以，我正在研究这个 NetBeans 项目，它是一个使用外部库播放声音的 jframe。当我从 NetBeans 运行应用程序时，声音会播放，但是当我构建应用程序并从 Windows 资源管理器启动可运行的 jar 时，声音不会播放。我不认为该库包含在可运行的 jar 中。不知道是否需要参考。如何在 NetBeans 中完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:37:22.730

您可以使用这样的东西[来](http://ninjacave.com/jarsplice)创建一个包含您的库的“胖罐子”（取决于您的使用，可能存在版权问题）。否则，您需要将其包含在[classpath](http://javarevisited.blogspot.com/2011/01/how-classpath-work-in-java.html)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:47:19.233

您可以使用多种方法来实现此目的。

1.  提取所有 Jar 的内容并将它们合并到一个 Jar 中。这样做的问题是，如果您有任何名称匹配的文件，那么它们将被覆盖。如果您将这些文件用作服务的查找，这会很痛苦（例如）
2.  [您可以使用exe4j](http://www.ej-technologies.com/products/exe4j/overview.html)（我使用它，但您必须评估自己的解决方案）和/或[Mac App Bundle](https://developer.apple.com/library/mac/#documentation/java/conceptual/java14development/03-javadeployment/javadeployment.html)之类的东西创建一个自包含的本机可执行文件。这为您的构建增加了另一个级别的复杂性
3.  [使用类似OneJar](http://one-jar.sourceforge.net/)的东西将所有的 Jar 打包到一个 Jar 中（不压缩它们）。我个人在使用自定义类加载器加载新类时遇到了问题，但在其他方面效果很好。

# jquery - jquery在加载整个数据的同时显示数据

> ID：13465325
> 
> 赞同：1
> 
> 时间：2012-11-20T01:33:25.653
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我有 mvc3 站点，在一种情况下，我必须加载 1000 条记录，并且花费了太多时间。查询运行 1 秒，显示数据几乎需要 12 秒。有没有办法在加载剩余数据时显示部分数据。这是严重的性能问题。

非常感谢任何建议或样品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:49:47.060

您可以让 Web Worker 加载数据并在加载时将其发送到主应用程序，然后主应用程序可以在 DOM 中更新它，从而提供非常非阻塞的数据流。

您可能想要创建一个工作人员（或者可能是几个），它将为服务器生成一个 XHR 以获取一段数据，将其作为消息发送到主应用程序，然后一遍又一遍地执行此操作，直到您完成加载所有数据。同时，应用的主体部分会监听来自worker的消息并根据消息更新DOM，因为应用和Web Worker之间的通信是异步的，不会阻塞网站的流量和不会显示消息说脚本已停止。

[您可以在http://www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)了解更多关于网络工作者的信息

# java - Android中的后退按钮就像Gmail应用程序中的一样？

> ID：13465326
> 
> 赞同：0
> 
> 时间：2012-11-20T01:33:24.820
> 
> 标签：java, android, gmail, android-actionbar

在 Android ICS 和 JellyBean 中，当不在开始屏幕/收件箱中时，本机 Gmail 应用程序在 Gmail 图标旁边有一个后退按钮“<”。有没有办法可以将它集成到我的应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:34:13.927

是的。它是[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)组件的一部分。看一下[向上导航](http://developer.android.com/guide/topics/ui/actionbar.html#Up)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:39:38.387

如果您的目标是 API 级别 11 或更高级别，则可以使用[Android 操作栏。](http://developer.android.com/guide/topics/ui/actionbar.html)
否则，我建议您使用与市场上大多数设备兼容的[ActionBarSherlock 。](http://actionbarsherlock.com/)

# grid - 如何在鼠标悬停 extjs 网格行上显示一些文本

> ID：13465327
> 
> 赞同：1
> 
> 时间：2012-11-20T01:33:26.357
> 
> 标签：grid, extjs4, hover, row, mouseover

我使用的是 extjs 4.1。我经历了很多线程来解释鼠标悬停时使用 dataview 的工具提示。但是我只需要在网格的任何行上的鼠标悬停时显示一些文本，例如“双击这一行”......我有这个功能离另一个线程很远......但它在网格内不起作用

```
function renderTip(value, metaData, record, rowIdx, colIdx, store) {
                metaData.tdAttr = 'data-qtip="' + value + '"';
                return value;
        }; 
```

更新 - 这是我的网格

```
Ext.define('GridViewApp.view.GridViewApp', {
alias: 'widget.gridviewapp',
width: 800,
title: 'My Grid Panel',
grid: null,
store: null,
layout: {
    type: 'anchor'
},
constructor: function () {

    this.callParent(arguments);

    var store = Ext.create('Ext.data.Store', {

        storeId: 'myData',
        scope: this,
        fields: [
        { name: 'Q1', type: 'int' },
        { name: 'Q2', type: 'int' },
        { name: 'Q3', type: 'int' },
        { name: 'Q4', type: 'int' },
        { name: 'Q5', type: 'int' },
        { name: 'Improvements', type: 'string' },
        { name: 'Comments', type: 'string' }
        ],

        sorters: [
            {
                //property: 'myData',
                direct: 'ASC'
            }
         ],

        proxy: {
            type: 'ajax',
            scope: this,
            url: 'GridView/writeRecord',
            reader: {
                type: 'json',
                root: 'myTable',
                idProperty: 'ID'

                }
        } 
    });

    store.load();   
    this.grid = Ext.create('Ext.grid.Panel', {
        title: 'GridView App',
        store: this.store,
        columns: [
            {header: 'Q1', width: 100,
        sortable: true, dataIndex: 'Q1'
                    },
        { header: 'Q2', width: 100,
            sortable: true, dataIndex: 'Q2'
        },
        { header: 'Q3', width: 100,
            sortable: true, dataIndex: 'Q3'
        },
                    { header: 'Q4', width: 100,
                        sortable: true, dataIndex: 'Q4'
                    },
                    { header: 'Improvements', width: 200,
                        sortable: true, dataIndex: 'Improvements'
                    },
                    { header: 'Comments', width: 200,
                        sortable: true, dataIndex: 'Comments'
                    }
    ],
        stripeRows: true,
        width: 800,
        renderTo: Ext.getBody()
    });

    this.add(this.grid);
    this.grid.getView().getEl().set({ 'data-qtip': 'Double click me' });
}
}); 
```

更新 - 工作解决方案将此添加到网格上的侦听器中，它可以工作

```
 itemmouseenter: function (view, record, item) {
                        Ext.fly(item).set({ 'data-qtip': 'Hello' });
                    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:16:01.633

如果此渲染器作为每个列渲染器附加，则提示应该可以工作。验证您是否`Ext.QuickTips.init()`在代码中的某处调用。Bellow 是我认为通过将全局工具提示附加到视图来将其附加到网格的更简单方法。

```
grid.getView().getEl().set({ 'data-qtip': 'Double click me' });
Ext.QuickTips.init(); 
```

工作样本：http: [//jsfiddle.net/GCRA5/](http://jsfiddle.net/GCRA5/)

# java - 程序未正确计算因子并输入数组

> ID：13465328
> 
> 赞同：0
> 
> 时间：2012-11-20T01:33:36.657
> 
> 标签：java, arrays, methods, factorization

我的`testPerfect`方法有问题。我需要它来计算因子并将它们放入数组中，然后返回一个布尔值`true`or`false`数字是否完美。到目前为止，该数组刚刚得到 1,2,3...5,6,7... 到输入要检查的任何数字。有什么建议么？

```
import java.util.Arrays;
import java.util.Scanner;

public class moo_Perfect
{
public static void main ( String args [] )
{
    int gN;
    int gP = getPerfect();
    int [] array = new int[100];
    boolean tP = testPerfect(gP, array);
    //int printFactors;
    System.out.println(Arrays.toString(array));
}

public static int getNum() //Get amount of numbers to check
{
Scanner input = new Scanner ( System.in );
System.out.print( "How many numbers would you like to test? " );
int count = input.nextInt();
int perfect = 1;
boolean vN = validateNum(count, perfect);
while(!vN)
{
    System.out.print (" How many numbers would you like to test? ");
    count = input.nextInt();
    vN = validateNum(count, perfect);
}
return count;
}   

public static boolean validateNum( int count, int perfect  ) //Check if number is valid
{
if (( count <= 0) || ( perfect <= 0))

{ 
    System.out.print( "Non-positive numbers are not allowed.\n");
}

else 
{
    return true;
}
return false;

}
public static int getPerfect() //Gets the numbers to test
{
Scanner input = new Scanner ( System.in );
int perfect = -1;
int count = getNum();
System.out.print("Please enter a perfect number: " );
perfect = input.nextInt();  
boolean vN = validateNum(perfect, count);
while (!vN) 
{
    System.out.print("Please enter a perfect number: ");
    perfect = input.nextInt();
    vN=validateNum(perfect, count);
}
return perfect;
}

public static boolean testPerfect( int perfect, int[] array )

{
//testPerfect(perfect, array);
int limit = perfect;
int index = 0;
for ( int i = 1; i <=limit; i++)
{
    array[index++] = i;
    perfect /= i;
}
array[index] = perfect;
int sum = 0;
for ( int i =0; i < array.length; i++)
{
    sum = sum + array[i];
}

if ( sum == perfect)
{
    int[] w = array;

    return true;        
}

else
{
    return false;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:42:25.433

这是 a 的工作`List`，而不是数组（因为您不知道数组应该有多长，`List`请注意这一点）。在实例化整数列表（例如`factors`）后，您可以将第一个`for`-loop 的主体更改为

```
if (perfect % i == 0) factors.add(i) 
```

即“`i`仅当它平均分为`perfect`”时才添加到我们的因子列表中。

* * *

***编辑***：如果你*必须*使用一个数组，你可以这样做

```
array[i] = (perfect % i == 0) ? i : 0 
```

`i`只有当它分开时，它才会放在你的数组中，`perfect`否则它会放置`0`。因此，该数组中的元素之和将等于 的因子之和`perfect`。

# pyqt - QWidget 可以代表 QLineEdit 检测鼠标事件吗？

> ID：13465329
> 
> 赞同：3
> 
> 时间：2012-11-20T01:33:42.197
> 
> 标签：pyqt, mouseevent, qlineedit

我有一个 QWidget，它并排包含 QLabels 和 QLineEdits。

当我单击 QLabel 时，我可以在 QWidget 中使用 mousePressEvent。但是当我单击 QLineEdit 时，我无法在 QWidget 中检测到 mousePressEvent - 仅在 QLineEdit 中。我认为这与 QLineEdit 的工作方式有关 - 我不知道在整个区域内获取鼠标事件的方法。

**编辑**：

![在此处输入图像描述](../Images/7b0b2c8517b8eb208bc24c21b376bfc6.png)

我已经为 Maya 制作了一个自定义频道框，就像上面一样。我尝试通过拖动鼠标来选择多个通道。但正如我所提到的，在 QLineEdit 区域我不能这样做。

```
class channelWidget(QtGui.QWidget):
  def __init__(self, parent=None):
    super(channelWidget, self).__init__(parent)
    self.resize(180, 20)        
    self.setMinimumSize(180, 20)
    self.setMaximumHeight(20)
    self.attr_label = QtGui.QLabel(self)
    self.attr_label.setGeometry(QtCore.QRect(5, 0, 110, 20))
    self.attr_label.setAlignment(QtCore.Qt.AlignRight|QtCore.Qt.AlignTrailing|QtCore.Qt.AlignVCenter)
    self.value_field = focusLineEdit(self)
    self.value_field.setGeometry(QtCore.QRect(120, 0, 60, 20))
    self.value_field.setAlignment(QtCore.Qt.AlignLeft|QtCore.Qt.AlignLeading|QtCore.Qt.AlignVCenter)
    self.value_field.setValidator(QtGui.QDoubleValidator()) 
```

每个元素由一个 QLabel 和一个 QLineEdit 组成。

```
class channelContainerWidget(QtGui.QWidget):
  def updateChannel(self, node="", attrList=[]):
    _l = self.channel_layout
    _list = []
    for w in [_l.itemAt(i).widget() for i in range(_l.count()) if _l.itemAt(i).widget()]:
      if w in self._selectList: _list.append( str( w.attr_label.text() ) )
        sip.delete(w)

    _selList = []
    for _id, at in enumerate(attrList):
      _item = channelWidget(self)
      _item.attr_label.setText(at)
      _item.value_field.setText(value)
      _l.insertWidget(_id, _item) 
```

包含小部件的工作方式如上。当我单击 QLabel 区域时，我可以获得鼠标事件，但是当我单击 QLineEdit 区域时，我不能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:13:46.303

如果您`mousePressEvent()`从包含布局的主小部件观看 ，您看到点击的原因`QLabel`是因为默认情况下 a会`QLabel`忽略`mousePressEvent`并允许它冒泡到下一个父级。事件从 child->parent 向上传播。

然而， A`QLineEdit`确实需要接受并使用鼠标按下，以处理线编辑小部件常见的焦点和其他各种操作。

所以真正对您来说可能是一个不错的选择是使用[事件过滤器](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qobject.html#eventFilter)。这将允许您的主小部件监视其他小部件的事件，而无需子类化`QLineEdit`并实现`mousePressEvent`

在此示例中，它只是监视布局的任何成员和鼠标按下，然后打印，然后执行默认操作以不更改任何内容：

```
class Widget(QtGui.QWidget):

    def __init__(self):
        super(Widget, self).__init__()

        self.layout = QtGui.QHBoxLayout(self)

        self.label = QtGui.QLabel("Label")
        self.line = QtGui.QLineEdit()

        self.layout.addWidget(self.label)
        self.layout.addWidget(self.line)        

        # have this widget (self) watch events for these    
        self.label.installEventFilter(self)
        self.line.installEventFilter(self)

    def mousePressEvent(self, event):
        print "Main Widget Mouse Press"
        super(Widget, self).mousePressEvent(event)

    def eventFilter(self, obj, event):
        # you could be doing different groups of actions
        # for different types of widgets and either filtering
        # the event or not.
        # Here we just check if its one of the layout widgets
        if self.layout.indexOf(obj) != -1:
            if event.type() == event.MouseButtonPress:
                print "Widget click", obj
                # if I returned True right here, the event
                # would be filtered and not reach the obj,
                # meaning that I decided to handle it myself

        # regardless, just do the default
        return super(Widget, self).eventFilter(obj, event) 
```

当您测试此代码时，您将看到单击标签会导致主小部件及其事件过滤器中的打印。但是点击行编辑只会导致事件过滤器打印语句，因为默认`mousePressEvent`接受它并且不会进一步传播它。

# c++ - 编译时等效的 std::cout，或 c++11 中编译时常量值的 static_assert 字符串化

> ID：13465334
> 
> 赞同：20
> 
> 时间：2012-11-20T01:34:12.757
> 
> 标签：c++, c++11, cout, constexpr, static-assert

有没有办法在编译时打印 a`constexpr`或d 值的值？`#define`我想要相当于`std::cout <<`, 或某种方式来做类似的事情

```
constexpr int PI_INT = 4;
static_assert(PI_INT == 3,
              const_str_join("PI_INT must be 3, not ", const_int_to_str(PI_INT))); 
```

**编辑：**我可以用 s 做一些基本的编译时打印`constexpr`，至少在 gcc 上做一些类似的事情

```
template <int v>
struct display_non_zero_int_value;

template <>
struct display_non_zero_int_value<0> { static constexpr bool foo = true; };

static constexpr int v = 1;

static_assert(v == 0 && display_non_zero_int_value<v>::foo, "v == 0"); 
```

这给了我`error: incomplete type ‘display_non_zero_int_value<1>’ used in nested name specifier static_assert(v == 0 && display_non_zero_int_value<v>::foo, "v == 0");`。（另一方面，icpc 不太有用，只是说`error: incomplete type is not allowed`）有没有办法编写一个可以概括这一点的宏，以便我可以做类似的事情

```
constexpr int PI_INT = 4;
PRINT_VALUE(PI_INT) 
```

并以某种方式收到涉及 4 的错误消息？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T02:14:30.043

**引用§7/1 [dcl.dcl]**中为声明给出的语法 ：

> 静态断言声明：
> 
> `static_assert`（常量表达式，字符串文字）；

标准说它必须是字符串文字，所以你不走运；您不能使用 constexpr 函数来构造错误消息。

但是，您可以使用任何您喜欢的预处理器魔法来生成一个字符串文字。如果`PI_INT`是 #define 而不是 a `constexpr int`，则可以使用以下内容：

```
#define PI_INT 4
#define pi_err_str_(x) #x
#define pi_err_str(x) pi_err_str_(x)
#define pi_int_err "PI_INT must be 3, not " pi_err_str(PI_INT)

static_assert(PI_INT == 3, pi_int_err); 
```

输出：

> 错误：静态断言失败：“PI_INT 必须为 3，而不是 4”

* * *

**根据 OP 的评论和更新的问题进行**编辑****

 **> 有没有办法编写一个可以概括这一点的宏，以便我可以做类似的事情......并以某种方式获得涉及 4 的错误消息？

当然，假设您很高兴依赖于编译器特定的错误消息行为，那么一些预处理器的魔法可以概括这一点：

```
#define strcat_(x, y) x ## y
#define strcat(x, y) strcat_(x, y)
#define PRINT_VALUE(x) template <int> struct strcat(strcat(value_of_, x), _is); static_assert(strcat(strcat(value_of_, x), _is)<x>::x, "");

constexpr int PI_INT = 4;
PRINT_VALUE(PI_INT) 
```

> stackoverflow/13465334.cpp:20:1：错误：嵌套名称说明符中使用的类型“value_of_PI_INT_is<4>”不完整

至于其他编译器，我不知道您可以临时做什么，但您可能想查看 boost 的 static_assert.hpp 的副本，看看是否可以使用其中使用的任何技巧来打印评估的模板 arg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-11T16:31:03.023

您可以将常量表达式评估为模板的参数，其中将打印带有模板实例化名称及其参数的某种警告。**

# php - 如何解析对 PHP 数组的 REST XML 响应

> ID：13465337
> 
> 赞同：0
> 
> 时间：2012-11-20T01:34:23.623
> 
> 标签：php, xml, arrays, rest, response

我正在使用 REST 构建 Web 服务。当客户端发送请求时，服务器将响应以 XML 字符串的形式发回，如下所示。

```
 <?xml version="1.0" encoding="utf-8"?>
    <xml>
      <item>
        <user>1</user>
         <name>cym</name>
       <house_number>23423423</house_number>
      <house_number_addition>sfsfsdf</house_number_addition>  
      <zipcode>erwer</zipcode>
      <city>werwer</city>
      <street>ertyu</street>
      <state_name>state1</state_name>
      <countryName>Albania</countryName>
      </item>
      </xml> 
```

我如何将 XML 响应解析为这样的 php 数组？

```
 $arr['list']=array(name=>'abc',age=>'23',gender=>'male'); 
```

或者

```
 $arr=array(name=>'abc',age=>'23',gender=>'male'); 
```

如果这是不可能的，那么我怎样才能获得属性的值。我尝试使用 simplexml_load_string 进行此操作，但它返回 null。这是我的代码

```
 $response= $ex->getResponse();
  $xmldat=simplexml_load_string($response);
  $i= $xmldat->name; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:38:25.567

SimpleXML 允许您将 XML 作为对象进行交互，但它要求您指定每一代，从根元素（在您的情况下为`<xml/>`）开始，但不包括根元素。

尝试：

```
$i = $xmldat->list->name; 
```

这将返回一个 SimpleXMLElement 类型的对象，但如果您需要，可以轻松地将其转换为字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:40:49.180

有很多方法可以做到这一点

将其转换为数组

```
$xml = json_decode(json_encode((array) $xmldat), 1);
echo $xml['item']['name']; // according to your XML, u should use `item` first then the element 
```

或者

```
$response= $ex->getResponse();
$xmldat=simplexml_load_string($response);
$i= $xmldat->item->name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T01:43:40.257

很少有问题，XML 没有经过验证。以下作品，您应该可以从那里构建。

```
$xmldat = <<<XML
<?xml version="1.0" encoding="utf-8"?>
<xml>
<item>
<user>1</user>
<name>cym</name>
<house_number>23423423</house_number>
<house_number_addition>sfsfsdf</house_number_addition>  
<zipcode>erwer</zipcode>
<city>werwer</city>
<street>ertyu</street>
<state_name>state1</state_name>
<countryName>Albania</countryName>
</item>
</xml>
XML;
$xml = simplexml_load_string($xmldat);
print_r($xml);
echo $xml->item->name; 
```

# javascript - Metro App - 平滑 SemanticZoom 过渡

> ID：13465340
> 
> 赞同：1
> 
> 时间：2012-11-20T01:35:00.973
> 
> 标签：javascript, microsoft-metro, semantic-zoom

我正在使用 HTML5/JavaScript 框架在 Windows 8 中创建 Metro Style 应用程序。我的问题是，当我在语义缩放中时，如果我的用户捏着放大或缩小，过渡不像开始屏幕那样平滑。相反，用户捏合，然后语义缩放从放大到缩小。我希望它像开始屏幕一样，用户可以在其中使用手指控制内容的缩小/缩小方式，并且在用户手指捏合的同时缩小和缩小。有趣的是，[C#/XAML 语义缩放示例应用程序](http://code.msdn.microsoft.com/windowsapps/GroupedGridView-77c59e8e)包含此功能，但[JavaScript 示例](http://code.msdn.microsoft.com/windowsapps/ListView-grouping-and-6d032cc1)没有。是否有一个原因？是否可以在不完全重写语义缩放的情况下实现此功能。

我尝试在视图上使用 -ms-content-zoom CSS，但它不起作用。

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:38:15.870

您所描述的是语义缩放的本机功能，您不需要编写任何额外的代码。为了提供更多帮助，这里是[WinJS Semantic Zoom](http://code.msdn.microsoft.com/windowsapps/ListView-grouping-and-6d032cc1)的代码示例。

# asp.net - 如何在firefox中启用javascript调试器

> ID：13465341
> 
> 赞同：2
> 
> 时间：2012-11-20T01:35:10.177
> 
> 标签：asp.net, debugging, firefox

假设您在 asp.net 页面正文 onload 事件中有如下 javascript 代码示例。

```
function OnloadHandler()
{
    ...
    debugger;
    ...
} 
```

我们知道在 IE 中运行这个，`debugger`就像一个断点，等待我们调试。但是当我在 Firefox 中运行它时。代码`debugger;`不起作用。我不得不手动设置 Firebug 的断点。谁能告诉我如何`debugger`在 Firefox 中启用？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T01:40:51.517

使用 Firebug，`debugger;`只要执行到达它，关键字就应该起作用：

[http://getfirebug.com/wiki/index.php/Debugger;_keyword](http://getfirebug.com/wiki/index.php/Debugger;_keyword)

# c++ - 如何以多态方式创建对象的动态数组？

> ID：13465345
> 
> 赞同：3
> 
> 时间：2012-11-20T01:35:40.647
> 
> 标签：c++, arrays, dynamic, polymorphism, dynamic-arrays

如果我有一个带有派生类的抽象类并且不使用 STL 数据结构类，如何以多态方式创建对象的动态数组？（向量、列表等）

**对象的静态数组**

```
TwoDimensionShape *shapes[2];       
shapes[0] = &Triangle("right", 8.0, 12.0);  
shapes[1] = &Rectangle(10); 
```

我知道我不能这样做，因为你不能创建抽象类的对象：

```
cin >> x;
TwoDimensionShape *s = new TwoDimensionShape [x]; 
```

**编辑：**

感谢尼克，这有效：

```
 int x = 5;
  TwoDimensionShape **shapes = new (TwoDimensionShape*[x]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T01:39:48.303

您可以创建指向该类的指针数组：

```
TwoDimensionShape **s = new TwoDimensionShape*[x]; 
```

然后用它的特定类型构造每个对象：

```
s[0] = new Triangle("right", 8.0, 12.0);  
s[1] = new Rectangle(10); 
```

类似于你所拥有的。不再需要时记得删除。

# gmail - Gmail IMAP OAuth2 返回错误代码 400

> ID：13465349
> 
> 赞同：5
> 
> 时间：2012-11-20T01:36:02.970
> 
> 标签：gmail, oauth-2.0, imap, gmail-imap

尝试使用 XOAUTH2 机制 (https://developers.google.com/google-apps/gmail/xoauth2_protocol) 连接到 Google IMAP 服务时，有时会收到以下错误响应：

```
{"status":"400","schemes":"Bearer","scope":"https://mail.google.com/"} 
```

我想知道是否有人知道状态 400 到底是什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T16:08:28.957

当您使用过期的访问令牌时，似乎会出现错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-26T11:01:07.870

我有同样的问题，我在[这里](https://stackoverflow.com/questions/17700114/error-code-400-on-generating-oauth-2-sasl-string)找到了解决方案。这是由于令牌生成过程中缺少Gmail 范围（“ [https://mail.google.com/ ”）。](https://mail.google.com/)

# python - 删除标点python

> ID：13465351
> 
> 赞同：2
> 
> 时间：2012-11-20T01:36:15.260
> 
> 标签：python, python-3.x

在将链接发布到删除标点符号的最佳方法之前。

我正在创建一个 madLib 游戏，用名词、副词、动词、形容词等替换段落中的单词；它应该从一个单独的文件中取出一个随机单词并将其打印到适当的段落中，即动词 running 将被放置在段落状态 VERB 的位置。我遇到的唯一问题是，当我要替换的单词旁边有标点符号时，我无法做到这一点。比如VERB，或者VERB！

我的问题是如何在保留标点符号的同时替换所有这些值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:38:33.680

```
noun1="Donkey"
print("This should print a %s here"%(noun1)) 
```

本质上，您可以获取输入变量，并像此示例一样对待它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T01:44:01.177

不确定您的用例，但`replace`参数`count`设置为 1 是否有效？

```
>>> test = 'This is a VERB! Whoa, a VERB? Yeah, a VERB!#$%'
>>> test.replace('VERB', 'running', 1)
'This is a running! Whoa, a VERB? Yeah, a VERB!#$%'
>>> test.replace('VERB', 'running', 1).replace('VERB', 'swimming', 1).replace('VERB', 'sleeping', 1)
'This is a running! Whoa, a swimming? Yeah, a sleeping!#$%' 
```

当然，您必须对重复次数进行一些调整，但它应该可以很好地处理标点符号。

根据下面@mgilson 的建议，您可以`replace`通过执行以下操作来删除大量调用：

```
In [14]: s = 'This is a VERB! Whoa, a VERB? Yeah, a VERB!#$%'

In [15]: verbs = ['running', 'jumping', 'swimming']

In [16]: reduce(lambda x, y: x.replace('VERB', y, 1), verbs, s)
Out[16]: 'This is a running! Whoa, a jumping? Yeah, a swimming!#$%' 
```

这使用`reduce`函数`replace`在主字符串上运行，使用值`verbs`作为要替换的值。reduce 的最后一个参数是字符串本身，它将包含每次迭代的替换结果（并且一开始将是“正常”字符串）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T02:01:35.893

使用 re 模块中的子函数。捕获单词后面的字符，然后用新单词替换单词并使用反向引用附加捕获的标点符号：

```
>>> import re
>>> s = "VERB,"
>>> print re.sub(r'VERB([\,\!\?\;\.]?)', r'newword\1', s)
newword, 
```

您可以扩展字符类`[\,\!\?\;\.]`以包含您希望遇到的任何标点符号，这只是一个示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-17T15:20:46.820

[string.punctuation](https://docs.python.org/3/library/string.html#string.punctuation)包含以下字符：

> '!"#$%&\'()*+,-./:;<=>?@[\]^_`{|}~'

您可以使用 translate 和 maketrans 函数将标点符号映射到空值（替换）

```
import string

'This, is. A test! VERB! and VERB,'.translate(str.maketrans('', '', string.punctuation)) 
```

输出：

> '这是一个测试动词和动词'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-07T04:47:19.187

子功能适用于您的问题

```
from re import *
contents = 'The !ADJECTIVE! panda walked to the !NOUN? and then *VERB!. A nearby <NOUN> was unaffected by these events.'
print('Enter an adjective: ', end = '')
adj = input()
print('Enter a noun: ', end = '')
noun1 = input()
print('Enter a verb: ', end = '')
verb = input()
print('Enter a noun: ', end = '')
noun2 = input()
contents = sub(r'adjective',adj,contents,count = 1, flags = IGNORECASE)
contents = sub(r'noun',noun1,contents,count = 1, flags = IGNORECASE)
contents = sub(r'verb',verb,contents,count = 1, flags = IGNORECASE)
contents = sub(r'noun',noun2,contents,count = 1, flags = IGNORECASE) 
```

sub 函数有五个参数。re.sub（要查找的表达式，要替换的字符串，进行替换的字符串，count ie，应该替换的出现次数，IGNORECASE 查找所有情况，无论大小写） 代码的输出

```
Enter an adjective: silly
Enter a noun: chandelier
Enter a verb: screamed
Enter a noun: pickup truck
The !silly! panda walked to the !NOUN? and then *VERB!. A nearby <NOUN> was
unaffected by these events.
The !silly! panda walked to the !chandelier? and then *VERB!. A nearby <NOUN> was
unaffected by these events.
The !silly! panda walked to the !chandelier? and then *screamed!. A nearby <NOUN> was
unaffected by these events.
The !silly! panda walked to the !chandelier? and then *screamed!. A nearby <pickup truck> was
unaffected by these events. 
```

标点符号不受这些事件的影响。希望这可以帮助

# java - 通过 API 在 Google Drive 上共享文件时，防止默认的“编辑者将被允许添加人员和更改权限”行为

> ID：13465356
> 
> 赞同：3
> 
> 时间：2012-11-20T01:36:56.887
> 
> 标签：java, google-api, google-drive-api

我的应用程序要求一部分用户能够编辑与他们共享并由其他人拥有的 Google 文档，但是文档访问权限不应由这些用户管理，他们应该只有编辑权限。

似乎默认设置是编辑者可以管理共享文件访问，但可以通过在 UI 中将文件共享设置明确设置为“只有所有者可以更改权限”来防止这种情况。

问题是我正在使用 Google Drive SDK 管理这些文件，我看不到任何通过 SDK 更改此设置的方法。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T02:12:24.423

如果有人也在寻找这个答案，我会回答我自己的问题。您可以通过使用方法 file.setWritersCanShare(false) 在 File 对象上设置标志 writersCanShare 来禁用能够共享文件的写入者的功能。

我认为这将是权限的一部分，无论如何它就是这么简单。

# xampp - 在 CentOS 中为 XAMPP 运行 MySQLdump

> ID：13465357
> 
> 赞同：0
> 
> 时间：2012-11-20T01:37:05.617
> 
> 标签：xampp, mysqldump, crontab

希望我在正确的论坛上发布它..

基本上，我正在尝试运行一个脚本，该脚本将执行 MySQL 数据库转储，当我手动运行它时该脚本可以工作，但 crontab 由于某种原因似乎没有运行该特定脚本。

我的 crontab 是这样设置的（出于测试目的，每分钟运行一次）：

```
* * * * * /opt/lampp/htdocs/xyz/backup/backup.sh 
```

脚本设置如下：

```
#!/bin/bash
# Script to backup the database
/opt/lampp/bin/mysqldump -u root xyz > backup_$(date +%Y%m%d).sql
echo " backup_$(date +%Y%m%d)" > /opt/lampp/htdocs/xyz/backup/log.txt 
```

我知道脚本运行，因为 log.txt 已创建。但是由于某种原因，没有生成 SQL 文件。我也知道这条线

```
/opt/lampp/bin/mysqldump -u root xyz > backup_$(date +%Y%m%d).sql 
```

有效，因为如果我在命令行运行它，它会生成文件。

**非常**感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T12:11:17.340

试试这个：

```
/opt/lampp/bin/mysqldump -u root xyz > backup_$(date +%Y%m%d).sql 
```

将该根用户的密码放在`-p(password)`没有空格的位置，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:43:16.220

这个脚本在什么用户 ID 下运行？它将尝试将您的备份文件写入该特定帐户的主目录。确保该帐户对该目录具有写入权限，并且可以访问通往该位置的所有父目录。

除此之外，请注意您的脚本有些草率。考虑一下（也许）您会将脚本设置为每天晚上 11 点运行。如果转储时间超过 1 小时，您会将不同的日期转储到日志文件中（顺便说一下，您将覆盖，而不是附加，因为您使用的是`>`，而不是`>>`）。要解决此问题，您需要在脚本开头生成/分配日期给变量，然后使用该变量而不是更多的日期调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T20:10:31.203

所以当 crontab 运行 shell 脚本时，backup_(date).sql 文件实际上保存在 /root 文件夹下。

手动运行 shell 脚本会将 SQL 文件放在 shell 脚本所在的位置。

# c# - 头部跟踪和鼠标控制

> ID：13465362
> 
> 赞同：0
> 
> 时间：2012-11-20T01:37:40.103
> 
> 标签：c#, wpf, kinect

我正在尝试使用带有 Kinect 的头部跟踪来控制鼠标。我认为这是可能的，但仍然没有成功。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using Microsoft.Kinect;
using Microsoft.Kinect.Toolkit.FaceTracking;
using System.IO;
using System.Threading;
using System.Runtime.InteropServices;

namespace AwesomeFaceTracking
{
public partial class MainWindow : Window
{
    KinectSensor kinectSensor;
    FaceTracker faceTracker;
    private byte[] colorPixelData;
    private short[] depthPixelData;
    private Skeleton[] skeletonData;

    [DllImport("user32")]

    public static extern int SetCursorPos(int x, int y);

    private const int MOUSEEVENTF_MOVE = 0x0001;
    private const int MOUSEEVENTF_LEFTDOWN = 0x0002;
    private const int MOUSEEVENTF_LEFTUP = 0x0004;
    private const int MOUSEEVENTF_RIGHTDOWN = 0x0008;

    [DllImport("user32.dll",
        CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]

    public static extern void mouse_event(int dwflags, int dx, int dy, int cButtons, int dwExtraInfo);

    public MainWindow()
    {
        InitializeComponent();

        // For a KinectSensor to be detected, we can plug it in after the application has been started.
        KinectSensor.KinectSensors.StatusChanged += KinectSensors_StatusChanged;
        // Or it's already plugged in, so we will look for it.
        var kinect = KinectSensor.KinectSensors.FirstOrDefault(k => k.Status == KinectStatus.Connected);
        if (kinect != null)
        {
            OpenKinect(kinect);
        }
    }

    /// <summary>
    /// Handles the StatusChanged event of the KinectSensors control.
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The <see cref="Microsoft.Kinect.StatusChangedEventArgs"/> instance containing the event data.</param>
    void KinectSensors_StatusChanged(object sender, StatusChangedEventArgs e)
    {
        if (e.Status == KinectStatus.Connected)
        {
            OpenKinect(e.Sensor);
        }
    }

    /// <summary>
    /// Opens the kinect.
    /// </summary>
    /// <param name="newSensor">The new sensor.</param>
    private void OpenKinect(KinectSensor newSensor)
    {
        kinectSensor = newSensor;

        // Initialize all the necessary streams:
        // - ColorStream with default format
        // - DepthStream with Near mode
        // - SkeletonStream with tracking in NearReange and Seated mode.

        kinectSensor.ColorStream.Enable();

        //kinectSensor.DepthStream.Range = DepthRange.Near;
        kinectSensor.DepthStream.Enable(DepthImageFormat.Resolution80x60Fps30);

        //kinectSensor.SkeletonStream.EnableTrackingInNearRange = true;
        //kinectSensor.SkeletonStream.TrackingMode = SkeletonTrackingMode.Seated;
        kinectSensor.SkeletonStream.Enable(new TransformSmoothParameters() { Correction = 0.5f, JitterRadius = 0.05f, MaxDeviationRadius = 0.05f, Prediction = 0.5f, Smoothing = 0.5f });

        // Listen to the AllFramesReady event to receive KinectSensor's data.
        kinectSensor.AllFramesReady += new EventHandler<AllFramesReadyEventArgs>(kinectSensor_AllFramesReady);

        // Initialize data arrays
        colorPixelData = new byte[kinectSensor.ColorStream.FramePixelDataLength];
        depthPixelData = new short[kinectSensor.DepthStream.FramePixelDataLength];
        skeletonData = new Skeleton[6];

        // Starts the Sensor
        kinectSensor.Start();

        // Initialize a new FaceTracker with the KinectSensor
        faceTracker = new FaceTracker(kinectSensor);
    }

    /// <summary>
    /// Handles the AllFramesReady event of the kinectSensor control.
    /// </summary>
    /// <param name="sender">The source of the event.</param>
    /// <param name="e">The <see cref="Microsoft.Kinect.AllFramesReadyEventArgs"/> instance containing the event data.</param>
    void kinectSensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
    {
        // Retrieve each single frame and copy the data
        using (ColorImageFrame colorImageFrame = e.OpenColorImageFrame())
        {
            if (colorImageFrame == null)
                return;
            colorImageFrame.CopyPixelDataTo(colorPixelData);
        }

        using (DepthImageFrame depthImageFrame = e.OpenDepthImageFrame())
        {
            if (depthImageFrame == null)
                return;
            depthImageFrame.CopyPixelDataTo(depthPixelData);
        }

        using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
        {
            if (skeletonFrame == null)
                return;
            skeletonFrame.CopySkeletonDataTo(skeletonData);
        }

        // Retrieve the first tracked skeleton if any. Otherwise, do nothing.
        var skeleton = skeletonData.FirstOrDefault(s => s.TrackingState == SkeletonTrackingState.Tracked);
        if (skeleton == null)
            return;

        // Make the faceTracker processing the data.
        FaceTrackFrame faceFrame = faceTracker.Track(kinectSensor.ColorStream.Format, colorPixelData,
                                          kinectSensor.DepthStream.Format, depthPixelData,
                                          skeleton);

        // If a face is tracked, then we can use it.
        if (faceFrame.TrackSuccessful)
        {
            // Retrieve only the Animation Units coeffs.
            var AUCoeff = faceFrame.GetAnimationUnitCoefficients();

            var jawLowerer = AUCoeff[AnimationUnit.JawLower];
            jawLowerer = jawLowerer < 0 ? 0 : jawLowerer;
            MouthScaleTransform.ScaleY = jawLowerer * 5 + 0.1;
            MouthScaleTransform.ScaleX = (AUCoeff[AnimationUnit.LipStretcher] + 1);

            LeftBrow.Y = RightBrow.Y = (AUCoeff[AnimationUnit.BrowLower]) * 40;

            RightBrowRotate.Angle = (AUCoeff[AnimationUnit.BrowRaiser] * 20);
            LeftBrowRotate.Angle = -RightBrowRotate.Angle;

            CanvasRotate.Angle = faceFrame.Rotation.Z;
            CanvasTranslate.X = faceFrame.Translation.X;
            CanvasTranslate.Y = faceFrame.Translation.Y;

            Joint ScaledJoint = skeleton.Joints[JointType.Head];

            //Funcionando!!!
            int topofscreen = Convert.ToInt32(faceFrame.Translation.Y);
            int leftofscreen = Convert.ToInt32(faceFrame.Translation.X);

            SetCursorPos(leftofscreen, topofscreen);
            Thread.Sleep(1);
        }
    }
}
} 
```

如果我使用 topofscreen 和 leftofscreen，将它们设置为 faceFrame.Rotation.Y 和 X，当我向右或向左点头时它会起作用。但是我想做的是在我以所有可能的角度移动我的头时控制鼠标，比如抬头，对...

关于如何做到这一点的任何提示？

**更新**

我在这里走错方向了吗？我的意思是，我应该尝试用面部的特定点（如眼睛或鼻子）来跟踪和控制鼠标吗？如果是这样，有没有简单的方法可以做到这一点？

# r - 数据帧移位列

> ID：13465365
> 
> 赞同：1
> 
> 时间：2012-11-20T01:37:58.103
> 
> 标签：r, dataframe

我在 R 中使用了一个数据框，其中 col4 应该小于 col5，但有时这种情况不会发生。

无论如何我可以将值从 col4 转移到 col5，反之亦然，而不必使用 forloop，因为它们在 R 中相当耗时。

即，如果对于给定的行 col4 = 100，col5=10，我想移动它们，col4 应该变成 10，col5 应该变成 100。

欢迎指教，先谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T01:47:33.933

假设您的数据框名为 d：

```
newCol4 <- pmin(d$col4, d$col5)
newCol5 <- pmax(d$col4, d$col5)

d$col4 <- newCol4
d$col5 <- newCol5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T01:47:20.390

您可以使用逻辑索引，也可以使用临时变量来进行交换？

```
# find the rows where col4 >= col5 (or maybe >? depends on what you want)
idx <- data$col4 >= data$col5
# idx is TRUE for columns we want to swap.

# now do the swap:
# a) save data$col5
tmp <- data$col5[idx]
# b) replace data$col5 with the col4 values (where relevant)
data$col5[idx] <- data$col4[idx]
# c) replace data$col4 with our saved col5 values
data$col4[idx] <- tmp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T01:47:36.867

```
 indices <- which(data.frame.instance[,4]<data.frame.instance[,5])
 data.frame.copy <- data.frame.instance
 data.frame.copy[indices,5] <- data.frame.instance[indices,4]
 data.frame.instance[indices,5] <- data.frame.copy[indices,4]
 rm(data.frame.copy, indices) 
```

应该做你想做的事——而且没有 for 循环。

# magento - Magento 404 重定向到主页而不是 404

> ID：13465374
> 
> 赞同：2
> 
> 时间：2012-11-20T01:39:08.203
> 
> 标签：magento, http-status-code-404

在 Magento 中，我的 404 页面没有显示有问题。例如，以下 URL 将重定向到主页

[http://www.site.com/page_does_not_exist](http://www.site.com/page_does_not_exist)

但是，如果我添加尾部斜杠，页面将显示正确的 404 页面：

[http://www.site.com/page_does_not_exist/](http://www.site.com/page_does_not_exist/)

有没有人遇到过这个？

# .net - MSBuild 具有外部依赖关系的 SQL CLR 项目

> ID：13465377
> 
> 赞同：0
> 
> 时间：2012-11-20T01:39:29.907
> 
> 标签：.net, visual-studio-2010, exception-handling, msbuild, sqlclr

我正在为 VS 2010/SQL Server 2005 中的 SQL CLR 项目执行 msbuild（持续集成）。该项目在 VS 中正确构建，但我无法在 msbuild 中构建它，因为它需要第 3 方外部参考。

解决此问题的典型方法是添加一个库文件夹并将引用指向该库文件夹。我如何在 SQL CLR 项目中做到这一点？

我得到的构建错误是：

```
[19:38:42]CorrSqlServerCompo\PowerStatRegression.csproj.teamcity: Build target: Build
[19:38:42][CorrSqlServerCompo\PowerStatRegression.csproj.teamcity] CoreCompile
[19:38:42][CoreCompile] Csc
[19:38:42][Csc] matrix\MatrixHandler.cs(5, 7): error CS0246: The type or namespace name 'Extreme' could not be found (are you missing a using directive or an assembly reference?)
[19:38:42][Csc] matrix\MatrixHandler.cs(6, 7): error CS0246: The type or namespace name 'Extreme' could not be found (are you missing a using directive or an assembly reference?)
[19:38:42][Csc] matrix\MatrixHandler.cs(216, 51): error CS0246: The type or namespace name 'GeneralMatrix' could not be found (are you missing a using directive or an assembly reference?)
[19:38:42][CorrSqlServerCompo\PowerStatRegression.csproj.teamcity] Project CorrSqlServerCompo\PowerStatRegression.csproj.teamcity failed. 
```

构建项目文件中的 itemgroup 为：

```
<ItemGroup>
<Reference Include="Extreme.Numerics.Net20, Version=3.6.10055.0, Culture=neutral, PublicKeyToken=9e513770f58567b2, processorArchitecture=MSIL">
  <SubType>SQLCLR</SubType>
  <Private>True</Private>
</Reference>
<Reference Include="System" />
<Reference Include="System.Data" />
<Reference Include="System.XML" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:31:10.257

您应该能够使用添加引用功能将程序集引用添加到您的 SQL CLR 项目。然后将 Reference Properties - Copy Local 设置为 true。 ![在此处输入图像描述](../Images/15602365a4893cee950f9dd8412f87a0.png)

但是...如果这不起作用，则问题可能在于本地 GAC 中安装的内容与运行 CI 构建的 GAC 中安装的内容，因为 MSBuild 解析程序集引用的方式。

[Chris Mann](http://social.msdn.microsoft.com/profile/chris%20mann/?ws=usercard-mini) (MSFT)[在这里](http://social.msdn.microsoft.com/forums/en-US/msbuild/thread/6bcd30bb-4c2c-4af3-aad4-28f6969593db)详细介绍了 GAC 裁判：

> ...在幕后，他们都使用 msbuild 的 ResolveAssemblyReference 任务。如果 gac 中有依赖项，无论我们从哪里解析它，我们都会将 copy local 设置为 false。这是我们用来尝试确定程序集是否应该复制本地的启发式方法的一部分。我们假设因为它安装在 gac 中，所以它也将在任何目标机器的 gac 中，因此不需要复制本地。

# android - 如何测量屏幕上两点之间的物理距离（Android）？

> ID：13465383
> 
> 赞同：0
> 
> 时间：2012-11-20T01:40:22.503
> 
> 标签：android, resolution, dpi, pixels, density-independent-pixel

我正在构建一个Android应用程序，用户必须在屏幕上触摸一个圆圈，我需要记录用户的触摸距离圆圈中心有多远。

问题是，我想记录物理距离，而不是像素距离，因为我要在许多设备上运行这个应用程序，我希望所有结果都是统一的。例如，如果用户与圆心的触摸距离为 15 像素，则在一台设备上这可能是 0.5 厘米的物理距离，而在另一台设备上可能是 1 厘米（只是这些数字，但你明白了）。所以我只能依靠物理测量，而不是像素。

那么我应该如何记录触摸距离呢？该`View.onTouchEvent`方法以像素为单位为您提供触摸事件的 x 和 y（我假设），所以我是否只需获取从圆心到触摸的距离（以像素为单位），然后将其转换为**dp**（并存储所有结果以 dp 为单位）？或者我应该将像素距离转换为**pt**，这在任何设备上都应该是相同的物理尺寸？如果是这样，如何从 px 转换为 pt （我似乎无法在任何地方找到答案）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:55:09.433

您可以使用 DisplayMetrics 获取以像素为单位的屏幕尺寸和屏幕的 DPI，然后将宽度和高度除以 dpi 以获得宽和高的英寸数，并使用它将像素距离转换为真实世界的单位。 ..

如果这是有道理的。

链接到 DisplayMetrics：http: [//developer.android.com/reference/android/util/DisplayMetrics.html](http://developer.android.com/reference/android/util/DisplayMetrics.html)

# css - 响应式 CSS 的无序列表不在 DIV 中居中？

> ID：13465384
> 
> 赞同：1
> 
> 时间：2012-11-20T01:40:28.987
> 
> 标签：css, html, html-lists, responsive-design

在进行响应式设计时，我注意到除了我的无序列表之外的所有内容都是响应式的。当我调整浏览器的大小时，列表不会移动或保持在其 DIV 的中心。我一整天都尝试了很多东西，但就是想不通。对于上下文，#sitecontent 是包含所有内容的容器，#sitecontent .leftsidebar 包含图像和无序列表，#sitecontent .leftsidebar ul 是无序列表。有人可以检查一下并告诉我出了什么问题吗？

```
@-moz-document url-prefix() {
* { font-weight: 400; }
h1, h2 
}

@font-face { font-family: 'helvetica neue'; src: local('Arial'); } 

x:-o-prefocus, h1 {
padding-top: 22px;
}

x:-o-prefocus, h2 {
margin-top: -2%;
}

x:-o-prefocus, ul li {
line-height: 20px;
}

#sitecontent {
display: block;
width: 90%; /* 780px */
max-width: 780px;
padding-top: 150px;
margin: 0 auto;
}

#sitecontent .leftsidebar {
float: left;
width: 19.2%; /* 150px */
}

#profilepic {
-moz-border-radius: 20px;
border-radius: 20px;
max-width: 100%;
}
#sitecontent .leftsidebar ul {
position: relative;
top:-5px;
list-style-type: none;
font-family: 'Patua One', cursive;

}

#sitecontent a {
text-decoration: none;
color: #3f83ca;
}

#sitecontent .leftsidebar ul li{
display:inline;
margin-bottom: 3%;
float: left;
clear: both;
border-bottom: 1px solid #E5E5E5;
font-family: helvetica;
}

#sitecontent .leftsidebar ul li:hover {
border-bottom: 1px solid #3f83ca;
}

#sitecontent .rightsidebar {
float: right;
width: 76.9%;

}

#sitecontent .rightsidebar > h1 {
font-size:3.750em;
font-weight: normal;
color: #3f83ca;
line-height: 0;
font-family: helvetica;
font-weight:bold;

}

#sitecontent .rightsidebar > h2 {
line-height: 10px;
font-weight: normal;
color: #38414f;
font-family: helvetica;
font-weight: bold;

}

#sitecontent .rightsidebar > p {
text-align: justify;
padding-top: 16px;
line-height: 20px;
font-size: 0.938em;
font-family:'Helvetica Neue', Arial, sans-serif;

}

#secondparagraph {
text-align: justify;
color: #A1A1A1;
font-family:'Helvetica Neue', Arial, sans-serif;

}

#secondparagraph:hover {
color:#3f83ca;
opacity: 1.0;

}

#secondparagraph a {
font-size: 14px;
text-decoration: none;
color: inherit;
}

@media screen and (max-width: 480px) {

#sitecontent {
width: 100%;
padding-top: 10px;
}

#sitecontent .leftsidebar {
width: 100%;
float: none;
}

#profilepic {
display:block;
margin: 0 auto;
border-radius: 77px;
float:none;
}

#sitecontent .leftsidebar ul {  
position: relative;
top:35px;
}

#sitecontent .leftsidebar ul li{
margin-bottom: none;
border-bottom: none;
float: none;
clear: none;
padding:10px;
border-radius: 2px;
background-color:#3f83ca;
border: 1px solid #00688B;
font-family: helvetica;
font-weight: 400;
}

#sitecontent a {
text-decoration: none;
color: #EDEDED;
}

#sitecontent .leftsidebar ul li:hover {
border-bottom: none;
}

#sitecontent .rightsidebar {
float: none;
margin: 0 auto;
width: 90%;

}

#sitecontent .rightsidebar > h1 {
position: relative;
bottom: 36px;
text-align: center;
font-size:1.875em;
font-weight: 600;
color: #3f83ca;
margin-top: 6%;
font-family: helvetica;
font-weight:bold;

}

#sitecontent .rightsidebar > h2 {
display:none;

}

#secondparagraph {
display: none;

}

#sitecontent .rightsidebar > p > a:first-child {
color:#3f83ca;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:27:54.613

我只在站点最小化和最小化时才看到居中问题。

我补充说`text-align:center;`，它奏效了。

```
#sitecontent .leftsidebar {
  width: 100%;
  float: none;
  text-align: center;
} 
```

# java - 在Java中反转数组

> ID：13465385
> 
> 赞同：1
> 
> 时间：2012-11-20T01:40:29.153
> 
> 标签：java, arrays, reverse

我试图以两种方式反转数组：

1）通过创建一个非常简单的新数组：

```
public static int[] reverse(int[] array) {
    int[] reverseArray = new int[array.length];
    for(int i = 0; i < reverseArray.length; i++) {
        reverseArray[i] = array[array.length - i - 1];
    }
    return reverseArray;
} 
```

2）第二种方法我得到了答案，但我实际上不太了解它，它实际上利用了交换，将数组的值赋予一个临时变量，然后对其进行更改并将其返回给原始变量：

```
public static int[] reverse2(int[] array)
{
    for (int i=0; i < array.length / 2; i++)
    {   
        int temp = array[i];
        array[i] = array[array.length - i - 1];
        array[array.length - i - 1] = temp;
    }
    return array;
} 
```

有人可以向我解释第二个代码吗？我不明白除以2？如果数组大小是偶数或奇数会发生什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T01:43:17.933

除以 2 只是为了让你只通过数组的前半部分。如果你交换第一个和最后一个项目，当我达到 array.length 时，你不想再做一次。如果大小为偶数，则在下半场前停止，如果大小为奇数，则在中心位置前停止，无论如何都不需要切换。希望有帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-20T01:44:06.000

想象一下你的数组是这样的：

```
[ 1 2 3 4 5 ] 
```

您发布的第二个解决方案如下：

```
[ 1 2 3 4 5 ]
  ^--swap-^

[ 5 2 3 4 1 ]
    ^swp^

[ 5 4 3 2 1 ] 
```

如您所见，您只需要遍历数组的*一半*即可使其工作（因此使其性能优于第一个解决方案，您需要遍历整个数组）。这就是除以二的地方；*数组的一半*相当于只需要检查最多`array.length / 2`.

对于偶数个元素，它会做同样的事情，只是交换最里面的对：

```
[ 1 2 3 4 5 6 ]
  ^--swap---^

[ 6 2 3 4 5 1 ]
    ^swap-^

[ 6 5 3 4 2 1 ]
      ^-^

[ 6 5 4 3 2 1 ] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T01:45:36.367

除以 2 只是意味着您不必遍历数组中的所有元素。由于您正在反转数组，而循环位于第一个元素处，这意味着它应该只将它与另一端的第一个元素交换。

基本上除以2只是为了减少循环的次数。将其视为性能增强。

无论数组中的元素数是奇数还是偶数，循环仍然可以正常工作。如果元素的数量是奇数，则循环在中间元素之前停止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T01:44:18.487

数组除以 2，因为您将交换位置 0 和 n、1 和 n-1 等。如果数组有奇数个值，最后一个值应该直接位于数组的中心，不需要被交换。我们可以遍历除以 n 的数组大小，因为只需要发生 n/2 交换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-18T18:52:13.530

简单快速...

```
public class ReverseAnIntegerArray {
static void reverseAnArray(int[] arrNum) {
    System.out.println("Original Array :" + Arrays.toString(arrNum));

    for (int i = arrNum.length - 1; i >= 0; i--) {
        System.out.print(arrNum[i] + " ");
    }

}

public static void main(String[] args) {
    int myArr[] = { 1, 2, -3, 4, 5, 34, 50 };
    reverseAnArray(myArr);
}

} 
```

输出将是 - 原始数组：[1, 2, -3, 4, 5, 34, 50]

50 34 5 4 -3 2 1

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-03-01T18:41:43.243

除以 2 不会完全起作用。它仅在您有奇数个整数时才有效。

例如：

给我一个代表数组长度的整数：5

输入 5 个值

值 #0：1

价值#1：2

价值#2：3

价值#3：4

价值#4：5

您当前的数组：1 | 2 | 3 | 4 | 5 |

你的数组颠倒了：5 | 4 | 3 | 2 | 1 | 构建成功（总时间：11 秒）

**现在，如果你要输入一个偶数整数，比如 6，就会发生这种情况：**

给我一个代表数组长度的整数：6

输入 6 个值

值 #0：1

价值#1：2

价值#2：3

价值#3：4

价值#4：5

价值#5：6

您当前的数组：1 | 2 | **3** | **4** | 5 | 6 |

你的数组颠倒了：6 | 5 | **3** | **4** | 2 | 1 | 构建成功（总时间：5 秒）

**源代码：**

/* 编写一个程序，提示用户输入一个表示数组长度的整数，然后要求用户输入那么多值。将这些值存储在一个数组中并打印该数组。然后反转数组元素，使第一个元素成为最后一个元素，第二个元素成为倒数第二个元素，依此类推，旧的最后一个元素现在首先出现。不要只是颠倒它们的打印顺序；实际上改变了它们在数组中的存储方式。不要创建第二个数组；只需重新排列您拥有的数组中的元素。（提示：交换需要改变位置的元素。）当元素被反转后，再次打印数组。*/

包反转数组；

导入 java.util.Scanner；

公共类 ReversinganArray {

```
public static void main(String[] args) {
    int i = 0;
    Scanner input = new Scanner(System.in);
    System.out.print("Give me an integer that would represent the length of an array: ");
    int integer = input.nextInt();
    int[] test = new int[integer];
    System.out.println("Enter " + integer + " " + "value(s)");
    while (i < integer) {
        System.out.println("Value #" + i + ": ");
        test[i] = input.nextInt();
        i++;
    }
    System.out.print("Your current array: ");
    i = 0;
    while (i < integer) {
        System.out.print(test[i] + " | ");
        i++;
    }
    i = 0;
    while (i <= integer / 2) {
        int temp = test[i]; //a = b
        test[i] = test[(integer - i - 1)]; //b = c
        test[(integer - i - 1)] = temp;// c = a
        i++;
    }
    System.out.println("");
    System.out.print("Your array reversed: ");
    i = 0;
    while (i <= integer - 1) {
        System.out.print(test[i] + " | ");
        i++;
    }
} 
```

}

我碰巧试图自己解决这个问题......

# c++ - strcat 与 char 指针

> ID：13465390
> 
> 赞同：1
> 
> 时间：2012-11-20T01:41:14.950
> 
> 标签：c++, strcat

所以，我的问题很简单，我想创建一个函数来分隔文件中的单词并解析这些单词并为这些单词创建一个特殊的想法，但是，当我尝试分离标记时，strcat 出现错误：

看代码：

```
#include <stdio.h>
#include <string>
#include <Windows.h>

using namespace std;

bool compile(FILE *fp)
{
    char c;
    char token[256];
    bool _return = false;

    while ((c = getc(fp)) != EOF)
    {
        if(isalpha(c))
        {
                    // The error is here
            strcat(token, (char*)c);
            printf("%c\n", c);
        }
        else
        {
            printf("----> %c\n", c);
        }
    }

    printf("%s\n", token);

    return _return;
}

int main()
{
    char *filename = "test.in";

    FILE *fp = fopen(filename, "rb");
    if(!fp)
    {
        return 1;
    }

    if(!compile(fp))
    {
        printf("ERROR...\n");
    }
    fclose(fp);
} 
```

代码可以正常构建，但是，当我调试时，调试器会转到 strcat.asm 文件 :( 那么，我的错误在哪里，感谢您的帮助。（：

-0-0-0-0-0-0-0-0-0-> 编辑并且，当我将 strcat 更改为：

```
strcat(token, &c) 
```

我从调试器收到此错误：

> APP.exe 中 0x20E801F2 处的未处理异常：0xC0000005：访问冲突（参数：0x00000008）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T01:45:42.203

这是错误的：

```
strcat(token, (char *) c); 
```

该变量`c`不是字符串，它只是一个字符。转换`(char *)`为只是掩盖编译器错误。

如果您想一次向字符串中添加一个字符，

```
std::size_t pos = 0;
char buf[256];

// ...

if (isalpha(c)) {
    assert(pos < sizeof(buf));
    buf[pos++] = c;
}

// ...

assert(pos < sizeof(buf));
buf[pos] = '\0';
printf("buf = %s\n", buf); 
```

或者，你知道，用简单的方法来做：

```
#include <string>

std::string s;

// ...

if (isalpha(c)) {
    s += c;
}

// ...

printf("buf = %s\n", s.c_str()); 
```

不要费心调试`strcat()`. 如果你的程序在内部崩溃`strcat()`，那是调用函数中的错误。（甚至调用通常都是错误的`strcat()`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T01:44:55.060

`strcat`需要一个以 null 结尾的字符串；您不能将指针传递给单个字符并期望它正常工作。

代替

```
strcat(token, (char*)c); 
```

和

```
char tmp[2];
tmp[0] = c;
tmp[1] = '\0';
strcat(token, tmp); 
```

让它工作。

您还需要设置`token[0]`为零以避免由于未初始化而导致的未定义行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T01:46:54.650

当您`c`转换为 时`char *`，您将字符中的任何值（例如`100`十六进制）转换为内存地址 ( `0x100`)，然后在该内存地址处查找字符串。难怪它不起作用！在将字符弹出到`strcat`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T01:46:24.720

三件事：

*   您不检查是否溢出缓冲区中的 256 个字符
*   当您转换为时`char c`，`(char *) c`您说 c 是内存地址。实际上，它是一个值。你可能想要的是对角色的引用，`&c`
*   您需要在要连接的内容末尾添加一个空终止符。

# delphi - 如何在 2 个 Delphi 应用程序之间传递字符串

> ID：13465393
> 
> 赞同：3
> 
> 时间：2012-11-20T01:41:48.920
> 
> 标签：delphi, delphi-7

> **可能重复：**
> [寻找进程间通信中使用的 windows 消息的替代方法 进程](https://stackoverflow.com/questions/360289/looking-for-an-alternative-to-windows-messages-used-in-inter-process-communicati)
> [间通信](https://stackoverflow.com/questions/4088776/inter-process-communication)

我有一个正在运行的 Delphi 7 应用程序，它公开了一个类型库。TLB 公开的函数之一是 ProcessFile(fileName: string)。当调用该函数时，我希望运行一个 Windows 服务（也是一个 Delphi 7 应用程序）来获得通知该事件被调用以及文件名是什么。

任何关于如何做到这一点的想法将不胜感激。我已经尝试通过使用注册表和 txt 文件更改回调来做到这一点，但无论哪种方式，我偶尔都会丢失一个要处理的文件，因为这个 ProcessFile 方法可以每秒调用多次。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T10:08:38.120

管道非常适合这项工作。您可以在服务端实现管道读取器线程，并通过管道在客户端的 ProcessFile 方法中发送相应的字符串数据。

一个快速、简单的无错误检查管道使用示例：

管道服务器

```
var
  Form1: TForm1;
  t: TReadpipe;

  h: THandle;
  msg: string;

const BufSize=512;

implementation

{$R *.dfm}

procedure TForm1.FormClose(Sender: TObject; var Action: TCloseAction);
var
  chandle: THandle;
begin
  t.Terminate;

  chandle := CreateFile('\\.\pipe\myNamedPipe', GENERIC_WRITE, 0, nil,
    OPEN_EXISTING, FILE_FLAG_WRITE_THROUGH, 0);
  CloseHandle(chandle);

  t.WaitFor;
  t.Free;
  CloseHandle(h);
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  t := Treadpipe.Create(false);
end;

{ TReadPipe }

procedure TReadPipe.Execute;
var
  buf: array [0 .. BufSize-1] of char;
  read: cardinal;
begin
  while not Terminated do
  begin
    h := CreateNamedPipe('\\.\pipe\myNamedPipe', PIPE_ACCESS_DUPLEX,
      PIPE_TYPE_MESSAGE or PIPE_READMODE_MESSAGE or PIPE_WAIT,
      PIPE_UNLIMITED_INSTANCES, BufSize, BufSize, 0, nil);

    ConnectNamedPipe(h, nil);

    if Terminated then
      break;

    msg := '';

    repeat
      FillChar(buf, BufSize, #0);
      ReadFile(h, buf[0], BufSize, read, nil);

      msg := msg + Copy(buf, 0, read);
    until GetLastError <> ERROR_MORE_DATA;

    if msg <> '' then
      Synchronize(
        procedure
        begin
          form1.Memo1.Lines.Add(msg)
        end);
  end;

  DisconnectNamedPipe(h);
end; 
```

管道客户端

```
var
  Form1: TForm1;
  i: Integer = 0;
  pipe: THandle;

const
  BufSize = 512;

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
var
  buf: array [0 .. BufSize - 1] of char;
  written: Cardinal;
  str: pchar;
begin
  pipe := CreateFile('\\.\pipe\myNamedPipe', GENERIC_WRITE, 0, nil,
    OPEN_EXISTING, FILE_FLAG_WRITE_THROUGH, 0);

  if pipe = INVALID_HANDLE_VALUE then
    Halt;

  inc(i);
  str := pchar('someStr' + inttostr(i));
  fillchar(buf, BufSize, #0);
  move(str[0], buf[0], Length(str) * Sizeof(char));
  WriteFile(pipe, buf[0], Length(str) * Sizeof(char), written, nil);

  CloseHandle(pipe);
end; 
```

还要记住管道作为 FIFO 工作。

# ruby - Nginx 和后端服务器之间的 IPC 机制是什么？

> ID：13465394
> 
> 赞同：2
> 
> 时间：2012-11-20T01:41:49.413
> 
> 标签：ruby, node.js, nginx, webserver, ipc

Nginx 将请求传输到其他后端服务器，例如 Thin(Ruby 服务器)，或 Node.js 服务器，或 Tomcat，那么**它们之间的 IPC 机制是**什么？

共享内存？插座（即使在同一台机器上）？管道？标准 IO？（对于 CGI 或 FastCGI，它是）

或者是其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T01:47:52.237

根据您的设置，我使用 Unix 套接字或 TCP。

这将使用 TCP：

```
upstream my_site {
  server 127.0.0.1:9292;
} 
```

这将使用 Unix 套接字：

```
upstream my_site {
  server unix://path/to/socket;
} 
```

# jquery - 在页面加载时添加动画（从左/右滑动等）

> ID：13465395
> 
> 赞同：2
> 
> 时间：2012-11-20T01:42:00.420
> 
> 标签：jquery, onload, effect

我想在页面加载时添加一些动画。我尝试了几次，但没有成功。你能帮我做一个 jquery hack 吗？

**HTML & Jquery**部分：

```
 <div class="MainPozEstate"><a href=""><img src="assets/img/mrk-sng.png" alt="Acarkent Markavilla"/></a></div>
    <script type="text/javascript">
        jQuery( document ).ready( function($) {
            $( ".MainPozEstate a" ).mouseover( function() {
                $( this ).children( "img" ).stop( true, true ).animate({
                    opacity: 0.6
                }, 200, "swing", function() {
                    $( this ).animate({
                        opacity: 1
                    }, 400 );
                });
            });
        });
    </script> 
```

**CSS**行：

```
.MainPozEstate {float:left;width:980px;margin:0px auto;padding-top:30px;text-align:center;}
.MainPozEstate img {border:none;margin:0px auto;} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:06:31.577

如果您想添加其他效果，那么可能会再次调用。 [http://jsfiddle.net/fedmich/w8HzE/2/](http://jsfiddle.net/fedmich/w8HzE/2/)

```
jQuery( document ).ready( function($) {
    $( ".MainPozEstate a" ).mouseover( function() {
        $( this ).children( "img" ).stop( true, true ).animate({
            opacity: 0.6
        }, 200, "swing", function() {
            $( this ).animate({
                opacity: 1
            }, 400 );
        });
    });

    //
});

jQuery( document ).ready( function($) {
    //do your other effects here or just trigger/call mouseover if you want.
    $( ".MainPozEstate a" ).mouseover();
}); 
```

* * *

我认为您的代码正在运行，[http://jsfiddle.net/fedmich/w8HzE/](http://jsfiddle.net/fedmich/w8HzE/)

# struts2 - Struts2：在属性文件中加载值列表

> ID：13465396
> 
> 赞同：0
> 
> 时间：2012-11-20T01:42:04.530
> 
> 标签：struts2, properties-file

我有一个特殊的操作来加载扩展 ActionSupport 类的页面。这允许我使用 getText() 方法访问属性文件值。我的操作需要为任何页面加载文件列表。

我知道使用 Configuration 对象可以做到这一点：[Loading a list of values from a properties file](http://commons.apache.org/configuration/howto_properties.html)

```
public class MainAction extends ActionSupport{
..
..
    public String loadHomepage() throws Exception {
        page.setPageTitle(getText("homePage.title"));
        page.setCssFiles(getText("homePage.cssFiles"));
        page.setJsFiles(getText("homePage.jsFiles"));
        return INPUT;
    }
..
..
} 
```

MainAction.properties

```
homePage.title=Home Page
homePage.cssFiles=a.css,b.css,c.css
homePage.jsFiles=a.js,b.js,c.js 
```

我知道一个明显的方法是获取列表，然后使用逗号作为分隔符手动拆分它。但是在 struts2 中是否有任何更快/更清洁的方法来获取这些属性列表？

# excel - 提取列中的最大值时出错。VBA（它总是返回零，为什么？）

> ID：13465401
> 
> 赞同：1
> 
> 时间：2012-11-20T01:42:42.993
> 
> 标签：excel, vba, max

任何人都可以帮助更正代码吗？它总是返回零，为什么？我想比较 H 列中的数据，并提取值，存储在 offset(1,2) 中。请帮助检查我的错误，非常感谢

```
Dim Highest As Double

Highest = Application.WorksheetFunction.Max(Columns("H"))

 wkbCrntWorkBook.Activate

ActiveCell.Offset(1, 2).Value = Highest 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:51:34.410

试试这个 - 这是一个数组公式，`VBA`其中将文本转换为`Max`函数的数字。

```
Dim Highest As Double
Highest = Evaluate("Max(H:H*1)") 
```

# java - Universal Image Loader ViewPager如何实现

> ID：13465404
> 
> 赞同：1
> 
> 时间：2012-11-20T01:43:09.143
> 
> 标签：java, android, imageview, android-viewpager, universal-image-loader

对我来说已经快 2 个月了，尤其是用 java 编码，尤其是 android。我遇到了一个问题，我已经挣扎了两天多。

基本上，我有一个充满字符串（url）的数据库。我正在尝试构建一个应用程序，在其中将选定的（通过我的查询）网址传递到通用图像加载器中，并最终获得一个 Viewpager，其中包含从 UIL 下载的所有图像。

我已经构建了自己的适配器（以便将其用于 ViewPager），但我不知道如何使用 Universal Image Loader 并创建该 ViewPager。

这是我的代码： **MenuImages.java**

```
public class Menu_images extends Activity {

 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.menu_gallery);

 Bundle map = getIntent().getExtras();
 String rest_name=map.getString("key");
 String area=map.getString("key2");

 loadGalleryImages(rest_name, area);

 }

private void loadGalleryImages(String rest_name, String area) {
    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
    List<String> images_url = db.getImagesUrl(rest_name, area);

    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);

    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);

} 
```

**MyPagerAdapter.java**

```
public class MyPagerAdapter extends PagerAdapter {

Context context;

private Integer[] Imgid = {
         R.drawable.gallery_photo_1, R.drawable.gallery_photo_3, R.drawable.gallery_photo_1
};

public MyPagerAdapter(List<String> images_url) {
    // TODO Auto-generated constructor stub
}
public int getCount() {
    return Imgid.length;
}

public Object instantiateItem(View collection, int position) {      

    ImageView img = new ImageView(collection.getContext());

    int resId = 0;
    switch (position) {
    case 0:
        resId = Imgid[0];
        break;
    case 1:
        resId = Imgid[1];
        break;
    case 2:
        resId = Imgid[2];
        break;
    }

    img.setImageResource(resId);
    ((ViewPager) collection).addView(img, 0);
    return img;
}
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
}
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);
}
public Parcelable saveState() {
    return null;
} 
```

}

**数据库处理程序.java**

```
public List<String> getImagesUrl(String rest_name, String area) {
    List<String> images_url = new ArrayList<String>();

     // Select All Query
       String selectQuery = "a query goes here";

       SQLiteDatabase db = this.getReadableDatabase();
       Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
       if (cursor.moveToFirst()) {
           do {
               images_url.add(cursor.getString(cursor.getColumnIndex("_images")));
           } while (cursor.moveToNext());
       }

       // closing connection
        cursor.close();
        db.close();

       return images_url;
} 
```

如您所见，我从 DataBaseHandler 中获得了一个包含所有字符串（url）的列表。实际上，我需要从 MyPagerAdapter 中删除数组 Interger[] 并将其动态替换为我从 DataBaseHandler 中检索到的列表（带有 URL 的列表）。

总而言之，我试图让 Universal Image Loader 使用我传递给它的所有 URL 并用它们创建一个 viewpager。

如果你能帮我解决这个问题，我将永远感激不尽，因为我开始吓坏了。我在这部分花了很多天，搜索了几个小时，但没有找到适合我的东西。

在此先感谢并为冗长的谈话感到抱歉，哈里斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:46:17.070

这是一个完美的[例子](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)。下载右上角的源代码，然后运行应用程序。你可以研究源代码，它有你需要的一切。有点超前了，别着急。如果您有任何问题，请发布问题。

# ios - UIAutomation iOS 调试

> ID：13465407
> 
> 赞同：3
> 
> 时间：2012-11-20T01:43:16.233
> 
> 标签：ios, ios-ui-automation

我有一个应用程序，我正在尝试使用霰弹枪方法自动调试（长时间随机触摸该应用程序）。我目前正在使用 UIAutomation 和这个脚本：

```
var target = UIATarget.localTarget();
var app = target.frontMostApp();
var window = app.mainWindow();

target.delay(2);

window.tapWithOptions( { x:160.0, y:370.0 } );

target.delay(5);

for(i=0;i<=100000;i++)
{
    xPoint = Math.floor(Math.random()*319+1)
    yPoint = Math.floor(Math.random()*479+1)
    window.tapWithOptions( { x:xPoint, y:yPoint } );
} 
```

这可行，但不幸的是，当它最终崩溃时，我没有调试信息可以让我知道原因，无论如何我可以将 XCode 调试器与这种自动化联系起来吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T06:04:52.867

首先，如果您不介意无耻的插件，您可能会发现我的[UI AutoMonkey](http://cocoamanifest.net/articles/2012/11/chaos-testing-with-ui-automonkey.html)项目很有用。它是一种工具，可以随机生成具有各种可配置性的事件，以执行您所谓的“shotgun”测试。

因此，对于您的问题，有可能让 Instruments 在崩溃发生时中断。它没有使用完整的调试器，但通过使用 Allocations 工具，我们可以告诉它启用 NSZombie 检测。

打开自动化模板后，确保应用程序已关闭且未记录跟踪。打开仪器库并将分配仪器拖到时间线中。单击该仪器上的“i”并确保选中“启用 NSZombie 检测”复选框，如下所示：

![启用 NSZombie 检测](../Images/0b89d0f3a5d8beac848c3d161135df76.png)

然后，运行您的应用程序并进行自动化测试，如果它因内存问题而崩溃，您将看到分配工具显示如下弹出窗口：

![寻找僵尸](../Images/06717ebc6e8e7b093eb31e5ef2d21bf9.png)

单击弹出窗口中的小箭头，您将跳转到触发僵尸的位置。崩溃时的堆栈位于右侧边栏中。您应该能够双击该堆栈中的任何点并查看发生内存崩溃的 Objective C 代码。有一些很棒的[WWDC 视频](https://developer.apple.com/videos/wwdc/2012/)介绍了如何使用分配工具。我建议也检查一下。

# haskell - 将 c++ 代码转换为 haskell

> ID：13465419
> 
> 赞同：0
> 
> 时间：2012-11-20T01:44:19.290
> 
> 标签：haskell

我想用haskell写这个函数

它是一个复杂度为 o(m+n) 的联合函数

```
int printUnion(int arr1[], int arr2[], int m, int n)
{
  int i = 0, j = 0;
  while(i < m && j < n)
  {
    if(arr1[i] < arr2[j])
      printf(" %d ", arr1[i++]);
    else if(arr2[j] < arr1[i])
      printf(" %d ", arr2[j++]);
    else
    {
      printf(" %d ", arr2[j++]);
      i++;
    }
  }

  /* Print remaining elements of the larger array */
  while(i < m)
   printf(" %d ", arr1[i++]);
  while(j < n)
   printf(" %d ", arr2[j++]);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T10:32:34.147

```
import Control.Monad (mapM_) 
```

编程语言的区别不仅在于不同的编程语言不同，还在于我们使用不同的编程语言不同。例如，C 和 C++ 是相似的编程语言，但是 C 程序倾向于分配一些大的内存块，而 C++ 程序倾向于分配更多但更小的内存块。

所以：虽然你的 C 函数需要两个数组（并且必须明确地传递它们的长度），但在 Haskell 中我们将使用列表来代替。（这并不是说 Haskell 程序从不使用数组，正如 C 程序从不使用列表不是真的，只是 C 程序倾向于使用数组而 Haskell 程序倾向于使用列表。）

```
showSpaced :: Show a => a -> String
showSpaced x = " " ++ show x ++ " " 
```

您的 C 函数调用`printf()`，它们都格式化输出并将其发送到标准输出，但我们将分别处理这些事情。 `showSpaced`适用于我们可以传递给的所有值`show`。

```
union :: Ord a => [a] -> [a] -> [a]
union xs          []          = xs
union []          ys          = ys
union xs0@(x:xs1) ys0@(y:ys1) = case x `compare` y of
    LT -> x : union xs1 ys0
    GT -> y : union xs0 ys1
    EQ -> y : union xs1 ys1 
```

此`union`功能只要求可以比较底层元素。这两个列表必须具有相同的类型。您会注意到我们使用递归而不是循环，并且通过使用列表而不是数组，我们不必跟踪数组索引。

我们使用*模式匹配*，既给`union`自己三个方程，也给`case`表达式。模式匹配在 Haskell 中很重要：给自己找一个解释它的教程。

```
printUnion :: (Ord a, Show a) => [a] -> [a] -> IO ()
printUnion xs ys = mapM_ (putStr . showSpaced) (union xs ys) 
```

所以`printUnion`我们把它们放在一起。列表元素需要实现`Ord`（所以我们可以调用`union`）和`Show`（所以我们可以调用`showSpaced`），所以它们都出现在类型签名中。

当您来自 C 语言时，您可能会担心建立中间列表的效率。不要这样：优化器会将所有内容融合到一个循环中。

# assembly - 效率方面的 MWAIT 与 HALT

> ID：13465422
> 
> 赞同：11
> 
> 时间：2012-11-20T01:44:40.373
> 
> 标签：assembly, x86-64, cpu-architecture, instruction-set

关于 MONITOR-MWAIT 与 HLT 指令，我提出了一个奇迹。两者都停止处理器，都在各种外部触发器（中断等）上唤醒。

在我的实验中，考虑到 HLT 和 MWAIT 的功能几乎相同：

*   如果您**不是**OS 调度程序，那么带有上述指令的简单循环将很快被中断，并且由于 MWAIT 需要重新检查 MONITOR 和 MWAIT 之间的条件，有什么区别？（我要问的是，为什么不首先使用 HLT，并节省分配跟踪区域的痛苦（如果不仔细配置，它会避免 mon/mwait 机制并将其变成 NOP），因为如果你'不是操作系统调度程序，您不可能不会足够快地醒来以简单地检查 HLT 循环中的值...... ???

（当然，MWAIT 可能是更高的分辨率，我没有测量分辨率，但它似乎通过（我假设）中断等过度唤醒）..所以我看不到很大的优势。

谢谢，任何以这种方式提出的想法将不胜感激

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-20T02:37:24.733

为了表现；最重要的是，无论何时发生等待（HLT 的 IRQ，或 MWAIT 的 IRQ 或内存写入），CPU 退出其“等待”状态所需的时间。这会影响延迟 - 例如，在启动中断处理程序或实际发生任务切换之前需要多长时间。CPU 从等待状态出来的时间对于不同的 CPU 是不同的，对于同一个 CPU 上的 HLT 和 MWAIT 也可能略有不同。

这同样适用于功耗——等待时的功耗在不同的 CPU 之间可能会有很大差异（尤其是当您开始考虑诸如超线程之类的事情时）；HLT 与 MWAIT 的功耗和功耗在同一 CPU 上也可能略有不同。

对于使用，它们适用于不同的情况。HLT 用于等待 IRQ，而 MWAIT 用于等待内存写入发生。当然，如果您正在等待内存写入，那么您需要决定 IRQ 是否应该中断您的等待（例如，如果您只想等待内存写入，您可以这样做）`CLI`。`MWAIT`

然而，对于多任务系统，大多数情况下它们都只用于同一件事——在 CPU 空闲的调度程序中。在引入 MONITOR/MWAIT 之前，调度程序会在等待工作完成时使用 HLT（以减少一点功耗）。这意味着，如果另一个 CPU 解除阻塞一个任务，它不能只是将该任务放入调度程序的队列中，并且必须向 HLTed CPU 发送一个（相对昂贵的）“处理器间中断”以将其从 HLT 状态中剔除（否则当有工作可以/应该做时，CPU 将继续无所事事）。使用 MWAIT，这种“处理器间中断”（可能）是不必要的 - 您可以设置 MONITOR 以监视对调度程序队列的写入，以便将任务放入队列的行为足以导致等待的 CPU 停止等待.

也有一些研究将 MONITOR/MWAIT 用于诸如自旋锁和同步之类的事情（例如等待释放竞争锁）。这项研究的最终结果是 CPU 退出其“等待”状态所需的时间太长，并且像这样使用 MONITOR/MWAIT 会导致过多的性能损失（除非存在设计缺陷 - 例如使用自旋锁当你应该使用互斥锁时）。

我想不出任何其他原因（除了调度程序和锁定/同步）来使用 HLT 或 MWAIT。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-08T16:20:20.800

HLT 指令实现了单个线程可用的最浅空闲电源状态 (C-State)，而 MWAIT 指令允许您请求所有可用的空闲电源状态以及子状态。

在硬件层面，执行 HLT 相当于执行状态提示为 0 的 MWAIT。这将处理器置于 C1 状态，即内核的时钟门控。如果您想进入更深的 C 状态以对内核进行电源门控并可能对封装进行电源门控，则必须使用 MWAIT。

对于各种电源状态，在节能和退出延迟之间总是存在权衡。C-State 越深，省电越多，但退出 C-State 所需的时间越长。您还应该注意，现代 x86 处理器将根据中断频率限制电源状态的深度（即，如果您每 1 us 接收一次中断事件，硬件将不会尝试以 2 us 退出进入 C 状态潜伏）。

除了硬件禁止进入 C-State 之外，一些 C-State 只能通过线程之间的协调进入。例如，在具有超线程的 Intel x86 处理器上，内核中的两个线程都必须请求电源门控 C-State 才能在内核级别发生电源门控，同样，一个包中的所有内核都必须请求一个包- level power-gated C-State 用于在封装级别进行电源门控。硬件一般遵守最浅的请求，所以如果1个线程请求C1，另一个线程请求C3，处理器进入C1。

如果您不控制操作系统，那么这确实是一个有争议的问题（因为 MWAIT 仅在 CPL0 可用）。如果您“拥有”操作系统，那么使用 MWAIT 而不是 HLT 几乎总是有意义的，因为它在许多情况下可以节省更多的电量，并且可以访问与 HLT 相同的空闲电源状态。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-26T03:01:12.177

MONITOR/MWAIT*应该*可以“用于诸如自旋锁和同步之类的事情（例如等待释放竞争锁）”。

然而，MONITOR/MWAIT (a) 出于一个非常愚蠢和恼人的原因，不得不被限制为只能由 ring 0 内核代码使用，而不是用户代码，并且 (b) 加载了微码以进入低功耗睡眠状态。

一些公司已经更好地实现了类似或等效的指令，例如MIPS的LL/PAUSE大致相当于MONITOR/MWAIT。

# parallel-processing - 多核 CPU：避免令人失望的可扩展性的编程技术

> ID：13465425
> 
> 赞同：9
> 
> 时间：2012-11-20T01:45:05.967
> 
> 标签：parallel-processing, cpu, multicore, numa

我们刚刚购买了一台 32 核 Opteron 机器，我们得到的加速有点令人失望：超过 24 个线程，我们根本看不到加速（实际上总体上变慢了），大约 6 个线程后，它变得明显亚线性。

我们的应用程序对线程非常友好：我们的工作分解为大约 170,000 个小任务，每个小任务都可以单独执行，每个任务需要 5-10 秒。它们都从同一个大小约为 4Gb 的内存映射文件中读取。他们偶尔会对其进行写入，但每次写入可能需要 10,000 次读取 - 我们只是在 170,000 个任务的每一个结束时写入一点数据。写入受锁定保护。分析表明锁不是问题。线程在非共享对象中使用大量 JVM 内存，它们对共享 JVM 对象的访问很少，其中只有一小部分访问涉及写入。

我们在启用了 NUMA 的 Linux 上使用 Java 进行编程。我们有 128Gb 内存。我们有 2 个 Opteron CPU（型号 6274），每个 CPU 有 16 个内核。每个 CPU 有 2 个 NUMA 节点。在英特尔四核（即 8 核）上运行的相同作业几乎可以线性扩展到 8 个线程。

我们尝试将只读数据复制到每个线程一个，希望大多数查找可以在 NUMA 节点本地进行，但我们观察到这并没有加速。

对于 32 个线程，“top”显示 CPU 的 74%“us”（用户）和大约 23%“id”（空闲）。但是没有睡眠，几乎没有磁盘 i/o。使用 24 个线程，我们得到 83% 的 CPU 使用率。我不确定如何解释“空闲”状态 - 这是否意味着“等待内存控制器”？

我们尝试打开和关闭 NUMA（我指的是需要重新启动的 Linux 级别设置）并且没有发现任何区别。启用 NUMA 时，“numastat”仅显示大约 5% 的“分配和访问未命中”（95% 的缓存未命中发生在 NUMA 节点本地）。[编辑：] 但是添加“-XX:+useNUMA”作为 java 命令行标志给了我们 10% 的提升。

我们的一个理论是我们正在最大化内存控制器，因为我们的应用程序使用了大量的 RAM，并且我们认为有很多缓存未命中。

**我们可以做些什么来（a）加速我们的程序以接近线性可伸缩性，或者（b）诊断正在发生的事情？**

另外：（c）我如何解释“顶部”结果-“空闲”是否意味着“在内存控制器上被阻塞”？(d) Opteron 与 Xeon 的特性有什么不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:44:41.697

我还有一台 32 核 Opteron 机器，有 8 个 NUMA 节点（4x6128 处理器，Mangy Cours，不是 Bulldozer），我也遇到过类似的问题。

我认为顶部显示的 2.3%“sys”时间暗示了您的问题的答案。根据我的经验，这个 sys 时间是系统在内核中等待锁定的时间。当一个线程无法获得锁时，它就会处于空闲状态，直到它进行下一次尝试。sys 时间和空闲时间都是锁争用的直接结果。你说你的分析器没有显示锁是问题所在。我的猜测是，由于某种原因，导致问题锁定的代码未包含在配置文件结果中。

在我的情况下，锁争用的一个重要原因不是我实际正在执行的处理，而是将单个工作分配给每个线程的工作调度程序。此代码使用锁来跟踪哪个线程正在执行哪项工作。我对这个问题的解决方案是重写我的工作调度程序以避免互斥体，我已经读过它不能很好地扩展到 8-12 个内核之外，而是使用 gcc 内置原子（我在 Linux 上用 C 编程）。原子操作实际上是一种非常细粒度的锁，可以在高核心数的情况下更好地扩展。在您的情况下，如果您的工作包裹确实需要 5-10 秒，那么这对您来说似乎不太可能。

我也遇到了 malloc 的问题，它在高核心数的情况下会遇到可怕的锁定问题，但是我不知道这是否也导致了顶部的 sys 和空闲数字，或者它是否只是出现了使用 Mike Dunlavey 的调试器分析方法（[如何分析在 Linux 中运行的 C++ 代码？](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/6540100#6540100)）。我怀疑它确实会导致 sys & idle 问题，但我在挖掘所有旧笔记以找出答案时划清界限：) 我知道我现在尽可能避免运行时 malloc。

我最好的猜测是，您正在使用的某些库代码在您不知情的情况下实现了锁，未包含在您的分析结果中，并且无法很好地扩展到高核心数的情况。当心内存分配器！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T21:50:04.937

我确信答案将在于对硬件架构的考虑。您必须将多核计算机视为通过网络连接的单个机器。事实上，这就是 Hypertransport 和 QPI 的全部内容。

我发现要解决这些可伸缩性问题，您必须停止考虑共享内存并开始采用通信顺序进程的理念。这意味着思维方式非常不同，即想象一下，如果您的硬件是通过网络连接的 32 台单核机器，您将如何编写软件。现代（和古老）的 CPU 架构并非旨在提供您所追求的那种不受限制的扩展。它们旨在允许许多不同的进程继续处理自己的数据。

就像计算中的其他一切一样，这些东西也很流行。CSP 可以追溯到 1970 年代，但非常现代的 Java 派生的 Scala 是该概念的流行体现。请参阅Wikipedia 上有关 Scala 并发的[这一部分。](http://en.wikipedia.org/wiki/Scala_%28programming_language%29#Concurrency)

CSP 的理念是迫使您设计适合您的数据和您正在解决的问题的数据分发方案。这并不一定容易，但如果你管理它，那么你就有一个确实可以很好扩展的解决方案。Scala 可能会使开发变得更容易。

就我个人而言，我在 CSP 和 C 中做所有事情。它使我能够开发一个信号处理应用程序，该应用程序可以从 8 个内核完美线性扩展到几千个内核（限制是我的房间有多大）。

您要做的第一件事就是实际使用 NUMA。你打开它并不是一个神奇的设置，你必须在你的软件架构中利用它。我不了解 Java，但在 C 中，将内存分配绑定到特定核心的内存控制器（也称为内存关联），并且在操作系统没有得到提示的情况下，线程也类似（核心关联）。

我认为您的数据不会分解为 32 个整齐的离散块？如果不确切了解程序中隐含的数据流，就很难给出建议。但是从数据流的角度考虑。把它画出来；数据流图对此很有用（另一种古老的图形形式符号）。如果您的图片显示您的所有数据都通过单个对象（例如通过单个内存缓冲区），那么它会很慢......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T13:26:50.563

我假设你已经优化了你的锁，并且同步做了最小化。在这种情况下，它仍然很大程度上取决于您用于并行编程的库。

即使您没有同步问题，也可能发生的一个问题是内存总线拥塞。这是非常讨厌且难以摆脱的。我只能建议以某种方式使您的任务更大并创建更少的任务。这在很大程度上取决于您的问题的性质。理想情况下，您需要与内核/线程数一样多的任务，但这并不容易（如果可能）实现。

其他可以提供帮助的方法是为您的 JVM 提供更多堆。这将减少频繁运行垃圾收集器的需要，并加快一点速度。

> “空闲”是否意味着“在内存控制器上被阻塞”

不，你没有在顶部看到它。我的意思是如果 CPU 正在等待内存访问，它将显示为忙。如果你有空闲时间，它要么在等待锁，要么在等待 IO。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-07T23:55:10.477

我是原始海报。我们认为我们已经诊断出了问题，不是锁，不是系统调用，也不是内存总线拥塞；我们认为这是**2/3 级 CPU 缓存争用**。

重申一下，我们的任务是令人尴尬的并行，因此它应该可以很好地扩展。然而，一个线程拥有大量可以访问的 CPU 缓存，但是随着我们添加更多线程，每个进程可以访问的 CPU 缓存量越来越低（相同数量的缓存除以更多进程）。某些架构上的某些级别在裸片上的内核之间共享，有些甚至在裸片之间共享（我认为），这可能有助于使用您正在使用的特定机器“摆脱困境”，并优化您的算法，但我们的结论是，要实现我们认为可以获得的可扩展性，我们无能为力。

我们通过使用 2 种不同的算法将其确定为原因。访问更多 2/3 级缓存的缓存比使用更少数据进行更多处理的缓存更差。它们都频繁访问主存中的主要数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-06T17:58:24.970

如果您还没有尝试过：查看像 Oracle Studio 那样的硬件级分析器（用于 CentOS、Redhat 和 Oracle Linux），或者如果您被 Windows 卡住了：Intel VTune。然后开始查看每个指令指标具有可疑高时钟的操作。可疑的高意味着比单 numa、单 L3 缓存机器（如当前的英特尔台式机 CPU）上的相同代码高很多。

# r - 带有反斜杠的扫描（）错误

> ID：13465426
> 
> 赞同：0
> 
> 时间：2012-11-20T01:45:21.177
> 
> 标签：r

我正在运行以下代码并出现此类错误。

```
> rat <- scan("sortedratings.csv",nlines=760,sep=",",what=rat.cols,multi.line=FALSE);                                                       
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  :                                                                         
  line 755 did not have 8 elements                                                                                                                    
> 
```

这是造成所有麻烦的线路

```
ubuntu@ip-10-28-6-239:/data/csv$ sed -n "750,760p" sortedratings.csv                                                                                  
"281656475","2.5.0","Jul 17, 2011","","","KK9876",4,0                                                                                                 
"281656475","2.5.0","Jul 17, 2011","","","Lyteskin45",4,0                                                                                             
"281656475","2.5.0","Jul 17, 2011","","","Mrs. Felton",5,0                                                                                            
"281656475","2.5.0","Jul 17, 2011","","","Nick Bartoszek",4,0                                                                                         
"281656475","2.5.0","Jul 17,2011","","","SANFRANPSYCHO",5,0                                                                                          
"281656475","2.5.0","Jul 17, 2011","","","Wxcgfduytrewjgf@!?$(:@&amp;&amp;$&amp;@\"",5,0                                                              
"281656475","2.5.0","Jul 18, 2011","","","Downs58",5,0                                                                                                
"281656475","2.5.0","Jul 18, 2011","","","kitty1019",5,0                                                                                              
"281656475","2.5.0","Jul 18, 2011","","","Rj&amp;e",4,0                                                                                               
"281656475","2.5.0","Jul 18, 2011","","","Robin Kinzer",5,0                                                                                           
"281656475","2.5.0","Jul 18, 2011","","","Roderick Palmer",5,0                                                                                        
ubuntu@ip-10-28-6-239:/data/csv$ s 
```

我尝试了不同的修复方法，但我无法找出正确的修复方法。任何的想法？

对于没有文本或任何内容，我没有问题删除反斜杠。

哦，忘了补充，文件有 1.4GB 大，所以我无法读取所有文件，或者只是用 sed 替换它，因为它对我的系统来说太大了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T02:02:34.440

`?scan`在（由 等使用`read.table`）的“详细信息”部分`read.csv`：

```
 If ‘sep’ is non-default, the fields may be quoted in the style of
 ‘.csv’ files where separators inside quotes (‘''’ or ‘""’) are
 ignored and quotes may be put inside strings by doubling them.
 However, if ‘sep = "\n"’ it is assumed by default that one wants
 to read entire lines verbatim. 
```

因此，看起来您的问题是该`\"`行中的“转义”引号引起了麻烦-R 期望 CSV 的转义引号是双引号`""`，而不是反斜杠引号`\"`。

我认为您最好的选择是用双引号替换转义引号，无论是使用 Linux 还是在 R 中（下面的 R 示例）：

```
txt <- readLines("tmp.txt")
txt <- gsub('\\\\"', '""', txt) # note the weird double backslashing because
                                # `readLines` adds extra backslashes
# if you `cat(txt, sep='\n')` you will see that the `\"` is now `""` 
```

然后你可以使用`read.csv`or `scan`like before （注意`textConnection(txt)`它将字符串转换为类似文件的对象以`scan`供使用）：

```
read.csv(textConnection(txt), ...) 
```

* * *

## 编辑/添加

回复 OP 的评论 - 该文件为 1.4GB，一次将其全部读入 R 有困难，那么如何进行消毒？

### 选项1

您似乎在 Linux 上，因此您可以使用`sed`：

```
sed -ire 's!\\"!""!g' myfile.txt 
```

（根据您的数据来自哪里，也许您可​​以调整输出数据的程序以首先以您需要的格式输出，但这并不总是可能的）。

### 选项 2

如果您不喜欢使用 Linux 或想要内部 R 解决方案，请使用`n`参数 to`readLines`一次只读取几行：

```
# create the file object and open it, see ?file
f <- file('tmp.txt')
open(f)
txt <- ''

# now read in 100 lines at a time, say
while (length(txt)) {
    txt <- readLines(f, n=100)
    # now do the sanitizing/coercing into a data frame, store.
    # ...
}
close(f) 
```

# javascript - 无法获得画布的准确尺寸

> ID：13465431
> 
> 赞同：2
> 
> 时间：2012-11-20T01:46:03.930
> 
> 标签：javascript, css, html

我不知道为什么，但我的 JS 不会返回画布尺寸的正确值。

我有这个来获取值：

```
temp = document.getElementById('myCanvas');
canvas = new Array();
canvas['width'] = temp.width;
canvas['height'] = temp.height; 
```

我的 CSS 和 HTML 是：

```
//html
<canvas id="myCanvas" class="c"></canvas>

//related css
.c{
    width:100%;
    margin:0 auto;
    height:500px;
    background-color:green;
    position:absolute; 
    left: 0; 
    top: 0;
    border:1px solid red;
} 
```

数组结果显示：

```
width: 300, height: 150 
```

如果 CSS 将其设置为 500px 并且在屏幕上显示为 500px，则这是不正确的。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:14:33.950

**这是正确的尺寸！**

通过在 CSS 中设置画布尺寸，您没有更改画布的逐像素大小。它仍然是默认的 300x150，您只是拉伸了像素。如果你在拉伸的画布上画一个圆圈，你可以验证这一点：你会得到一个椭圆。最好直接改变canvas标签的width和height属性，不要在CSS中。

[来源](https://stackoverflow.com/questions/9741356/html5-canvas-and-mouse-events-issue),[例子](http://goo.gl/DqvTK)

# ios - 定位moreNavigationController的UITableView

> ID：13465436
> 
> 赞同：1
> 
> 时间：2012-11-20T01:46:36.327
> 
> 标签：ios, uinavigationbar, uitabbar

我的 NavigationController 有一个 54 像素高的自定义标题图像。在我单击 UITabBar 中的“更多”之前，一切正常。我无法读取 TableView 中第一行的部分文本，因为它在标题图像下剪辑。我已经查看了有关自定义 moreNavigationController 的每个主题，但没有任何运气。有谁知道如何更改 TableView 的位置，以便它在我的自定义标题的 54 像素之后立即开始？ ![在此处输入图像描述](../Images/c7b160d4d766635c13a937320966d104.png)

# ruby-on-rails - 使用小写类型名称的 Rails 单表继承

> ID：13465438
> 
> 赞同：2
> 
> 时间：2012-11-20T01:46:47.723
> 
> 标签：ruby-on-rails, activerecord

我正在开发一个与遗留数据库接口的应用程序，该数据库具有用于单表继承的类型列。该数据库仍被现有的 PHP 应用程序使用，因此我必须使用现有的数据库。我正在尝试为此设置一些模型，其中一个关键表设置有 STI 方案和类型列，但是，该列中的所有类型都是完全小写的。

到目前为止，在我的测试中，如果我更改值以匹配类名（例如，Claimant 而不是 Claimant），rails 可以很好地处理 type 列。但是，即使可能没问题，我也不想更改生产数据库中的这些值，也不想进入并修改旧版应用程序以不同方式保存名称...

为了解决这个问题，我有两个问题......

1）无论如何我可以配置模型来识别type ='claimant'映射到class ='Claimant'吗？

2）如果失败了，有没有办法告诉rails不要在这个表上使用STI，即使它有一个类型列？

我已经做了一些谷歌搜索，但还没有想出很多......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:33:51.267

我没有在 STI 设置中尝试过这个，但是当使用旧表时，我能够在 ActiveRecord 模型上使用方法“set_table_name”。

```
class Claimant < ActiveRecord::Base
  set_table_name 'claimant'
end 
```

或者使用自定义方法：

```
def table_name
  'claimant'
end 
```

抱歉，我没有方便的 STI 表来测试它，但认为它可能有助于解决您的问题。

在回答您问题的第二部分时，我相信您可以通过指定一个不存在的列名来禁用 Rails 查看类型列。

```
class Claimant < ActiveRecord::Base
  inheritance_column = :_type_column_disabled
end 
```

# vim - 如何将命令映射到多个编辑

> ID：13465439
> 
> 赞同：3
> 
> 时间：2012-11-20T01:46:49.613
> 
> 标签：vim

我正在使用插件[vim-surround](https://github.com/tpope/vim-surround)，它将 ds( 映射到“删除周围的括号”，例如将 (Hello) 转换为 Hello。我想映射一个命令以删除函数应用程序，例如将 foo(bar) 转换为 bar。

我试过

```
nmap <Leader>df bdt(ds( 
```

到单词的开头，删除到第一个（，然后删除周围的括号。但是，当我使用它时，它只删除到括号，并没有做括号本身的后续删除.我尝试在初始部分之后放置其他编辑命令，并且有效。所以

```
nmap <Leader>df bdt(x 
```

按预期工作。

同样，我试着做

```
nmap <Leader>s ds( 
```

这也有效！

其他不起作用的事情：

```
nmap <Leader>df bdt(<bar>ds( 
```

有谁知道我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:59:38.770

我会建议一个更简单的映射，如下所示。

```
nmap <silent> dsf ds)db 
```

这将删除“周围”功能应用程序，因此光标需要位于括号内或括号内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T07:38:03.770

另一个，假设光标在括号中的某处：

```
nnoremap <leader>df yi(B"_df)p 
```

*   `y`ank`i`括号内的内容
*   跳到`B`起点`function`
*   `d`删除黑洞寄存器中的整个函数调用
*   `p`ut 之前拉出的文本

# sql - SQL：查询以组合表

> ID：13465444
> 
> 赞同：2
> 
> 时间：2012-11-20T01:47:16.960
> 
> 标签：sql, join

我有这些 MySQL 表：

**表 A：**

```
id  t_id  type
--------------
1    1     0
2    2     0
3    3     0
4    4     0
5    5     0
6    1     1
7    2     1
8    3     1
9    4     1
10   5     1
11   1     2
12   2     2
13   3     2
14   4     2
15   5     2 
```

**表 B：**

```
id  b
-------
1   ba
2   bb
3   bc
4   bd
5   be 
```

**表 C：**

```
id  c
-------
1   ca
2   cb
3   cc
4   cd
5   ce 
```

**表 D：**

```
id  d
-------
1   da
2   db
3   dc
4   dd
5   de 
```

表 A 中的 type 字段引用了另一个表：

```
0 -> B
1 -> C
2 -> D 
```

t_id 指的是该特定表中的 id

现在我正在寻找一个给我这个结果的查询：

```
id    type  t_id  b     c     d
---------------------------------
1      0      1   ba    -     -
2      0      2   bb    -     -
3      0      3   bc    -     -
4      0      4   bd    -     -
5      0      5   be    -     -
6      1      1   -     ca    -
7      1      2   -     cb    -
8      1      3   -     cc    -
9      1      4   -     cd    -
10     1      5   -     ce    -
11     2      1   -     -     da
12     2      2   -     -     db
13     2      3   -     -     dc
14     2      4   -     -     dd
15     2      5   -     -     de

-  should be an empty field. 
```

这在 MySQL 中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:53:06.023

```
SELECT A.id, A.type, A.t_id, B.b, NULL AS c, NULL AS d
FROM A JOIN B ON A.t_id = b.id 
WHERE A.type = 0

UNION ALL

SELECT A.id, A.type, A.t_id, NULL, C.c, NULL
FROM A JOIN C ON A.t_id = c.id 
WHERE A.type = 1

UNION ALL

SELECT A.id, A.type, A.t_id, NULL, NULL, D.d
FROM A JOIN D ON A.t_id = d.id 
WHERE A.type = 2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T02:07:17.690

另一种替代解决方案是使用`LEFT JOIN`

```
SELECT  a.*,
        CASE WHEN a.type = 0 THEN b.b ELSE NULL END b,
        CASE WHEN a.type = 1 THEN c.c ELSE NULL END c,
        CASE WHEN a.type = 2 THEN d.d ELSE NULL END d
FROM    tableA a
        LEFT JOIN tableB b
            ON a.t_id = b.id
        LEFT JOIN tableC c
            ON a.t_id = c.id
        LEFT JOIN tableD d
            ON a.t_ID = d.id 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/4b53c/4)

# jquery - 无法让 jQuery dataTables 填充容器

> ID：13465447
> 
> 赞同：1
> 
> 时间：2012-11-20T01:47:22.817
> 
> 标签：jquery, css, datatables

[我的问题与这个](https://stackoverflow.com/questions/604933/jquery-datatables-table-width-problem)问题非常相似。我希望我的桌子能装满它的容器，但它可以采用任何它想要的大小。

表格周围的html标签是：

```
<body>
  <div>
    <section>
      <table id="my_table"> 
```

div 和部分的 css：

```
div {
    width: 50%;
    margin: 0px auto;
    overflow: hidden;
    padding: 0 0;
}

section {
    float: left;
    margin-bottom: 20px;
} 
```

我没有对 dataTables 做任何花哨的事情：

```
$('#my_table').dataTable() 
```

我尝试了链接帖子中的几乎所有内容，但我无法让数据表填充它们的容器。我删除了 autoWidth 并将 4 列设置为每列 25%。这改变了它们的相对尺寸，但总宽度仍然太小。

这可能与部分标签有关吗？

当我在搜索字段中输入任何内容时，表格就会变成适当的大小。

一个为我复制问题的 jsFiddle：http: [//jsfiddle.net/mushroom/GHU4f/1/](http://jsfiddle.net/mushroom/GHU4f/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:00:58.210

将 width : 100% 添加到 css 部分修复了问题：

```
section {
    float: left;
    margin-bottom: 20px;
    width:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-10T15:48:15.130

将下面的代码添加到“table”元素对我有用。

```
style="width: 100%;" 
```

# android - Android ListView 滞后于 ImageLoader

> ID：13465453
> 
> 赞同：0
> 
> 时间：2012-11-20T01:47:50.500
> 
> 标签：android, android-listview, lazy-loading

我正在使用 androidimageloader.com 并且当图像加载到列表中时会出现一些闪烁，这与使用它的演示和应用程序非常不同。我在应用程序类中有 imageLoader，但不明白为什么它会闪烁。这些图像是用户的 Facebook 个人资料图片。什么会导致这种情况？这是我的适配器：

```
public class FriendAdapter extends BaseAdapter {
    private Typeface tf;
    LayoutInflater inflater;
    private String[] nameEvents;
    private String[] urls;
    private ArrayList<Friend> friends;
    ImageManager imageManager;
    ImageTagFactory imageTagFactory;

    public FriendAdapter(Activity activity, ArrayList<Friend> friends) {
        this.friends = friends;
        setData(this.friends);
        tf = Typeface.createFromAsset(activity.getAssets(),
                "fonts/Roboto-Condensed.ttf");
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageManager = BuzzbabaApplication.getImageLoader();
        imageTagFactory = new ImageTagFactory(activity, R.drawable.no_pic_icon);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        FriendView fView;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.friend_layout, null);
            fView = new FriendView();
            fView.name = (TextView) convertView.findViewById(R.id.friendName);
            fView.name.setTypeface(tf);
            fView.pic = (ImageView) convertView.findViewById(R.id.profilePic);
            convertView.setTag(fView);
        } else {
            fView = (FriendView) convertView.getTag();
        }
        fView.name.setText(nameEvents[position]);
        // HomeScreen.imageLoader.DisplayImage(urls[position], fView.pic);
        ((ImageView) fView.pic).setTag(imageTagFactory.build(urls[position]));
        imageManager.getLoader().load(fView.pic);
        return convertView;
    }

    public void setData(ArrayList<Friend> friends) {
        nameEvents = new String[friends.size()];
        urls = new String[friends.size()];
        int index = 0;
        for (Friend f : friends) {
            String pos = f.getName();
            int num = f.getNumEvents();
            if (num == 1) {
                pos = pos + "\n" + num + " event";
            } else {
                pos = pos + "\n" + num + " events";
            }
            nameEvents[index] = pos;
            urls[index] = f.getPictureURL();
            index++;
        }
    }

    static class FriendView {
        TextView name;
        ImageView pic;
    }

    public int getCount() {
        return friends.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

} 
```

# c++ - 堆栈抛出内存访问冲突

> ID：13465456
> 
> 赞同：2
> 
> 时间：2012-11-20T01:48:02.727
> 
> 标签：c++, stack, access-violation, deque

所以我正在尝试创建一个简单的扑克游戏来让自己重新熟悉 C++，因为我已经离开它有一段时间了，想回到 C++。

我遇到了来自 STL 的堆栈问题（合适，不是吗？）。我似乎无法让它允许我向堆栈中添加任何东西。每次我在堆栈对象上调用 push 函数时，它都会引发内存访问冲突......我什至尝试创建一个整数堆栈，并将它们添加到堆栈中，但它仍然会引发内存访问冲突错误。这很奇怪。

当前将对象添加到堆栈的代码是：

```
//shuffles the deck
void Deck::shuffle()
{
    int index;

    for(int i = 0; i < DECK_SIZE; i++)
    {
        index = (rand() % 52);

        if(deck[index].drawn == false)
        {
            shuffledDeck.push(deck[index]); //throws the error
            deck[index].drawn = true;
        }
        else
        {
            i--;
        }
    }
} 
```

我设置了一个断点，然后沿着兔子洞向下走，发现它在这里抛出了异常：

```
void push_back(const value_type& _Val)
{   // insert element at end
    this->_Orphan_all();
    _PUSH_BACK_BEGIN;            //EXCEPTION!
    this->_Getal().construct(
    this->_Map[_Block] + _Newoff % _DEQUESIZ, _Val);
    _PUSH_BACK_END;
} 
```

哪个位于 deque.cpp ......这很奇怪。

作为参考，这是我认为可能需要的其余代码：

甲板.cpp

```
#include "stdafx.h"
#include "Deck.h"
#include <time.h>

using namespace std;
using namespace CardDeck;

const int DECK_SIZE = 52;

CARD deck[DECK_SIZE];
std::stack<CARD> shuffledDeck;

Deck::Deck()
{
    srand((unsigned int)time(NULL));
    loadCards();
}

Deck::~Deck()
{
}

//Draws a card from the deck
CARD Deck::drawCard()
{
    CARD card = shuffledDeck.front();
    shuffledDeck.pop();
    return card;
}

//shuffles the deck
void Deck::shuffle()
{
    int index;

    for(int i = 0; i < DECK_SIZE; i++)
    {
        index = (rand() % 52);

        if(deck[index].drawn == false)
        {
            shuffledDeck.push(deck[index]);
            deck[index].drawn = true;
        }
        else
        {
            i--;
        }
    }
}

    void Deck::loadCards()
    {

        //create input file stream
        ifstream cardList;

        //open the list of cards
        cardList.open("card.txt", ios::in);

        //if the file has opened successfully
        if(cardList.is_open())
        {
            int index = 0;

            //and while the cardlist has data left
            while(cardList.good())
            {
                char * context = NULL;
                CARD card = CARD();
                //read the cards
                string line;
                getline(cardList, line);

                char * s = strtok_s(&line[0], ", ", &context);

                card.value = *s;

                s = strtok_s(NULL, ", ", &context);

                card.suit = s;
                card.drawn = false;

                deck[index] = card;

                index++;
            }
        }

    } 
```

Deck.h（包含 CARD 结构）

```
#pragma once
#include <string>
#include <stack>
#include <fstream>
#include <sstream>
#include <iostream>
#include <string>

namespace CardDeck
{
    struct CARD
    {
        public:
            std::string suit;
            char value;
            bool drawn;

            CARD(){}

            CARD(const CARD& card)
            {
                suit = card.suit;
                value = card.value;
                drawn = card.drawn;
            }

            CARD& operator= (const CARD& card)
            {
                suit = card.suit;
                value = card.value;
                drawn = card.drawn;

                return *this;
            }
    };

        class Deck
        {
            public:
                Deck();
                ~Deck();
                Deck(const Deck& deck);
                CARD drawCard();
                void shuffle();

            private:
                void loadCards();

        };
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T02:06:45.000

您可能正在写入超出`deck`数组末尾的内容`loadCards()`，从而破坏了内存。

即使你正好有 52 行数据，`cardlist.good()`也会返回`true`直到一个指示*之后。*`EOF`

您可能想尝试以下循环（未经测试）：

```
string line;
while(getline(cardList, line) && (index < 52))
{
    char * context = NULL;
    CARD card = CARD();

    char * s = strtok_s(&line[0], ", ", &context);

    card.value = *s;

    s = strtok_s(NULL, ", ", &context);

    card.suit = s;
    card.drawn = false;

    deck[index] = card;

    index++;
} 
```

# javafx-2 - 动态添加 JavaFX2 控件

> ID：13465459
> 
> 赞同：6
> 
> 时间：2012-11-20T01:48:22.830
> 
> 标签：javafx-2, fxml

我对 java 和 javafx 很陌生，遇到了一个我无法解决的问题。我需要将新的自定义控件动态添加到 javafx 场景。此外，我需要主控件和添加的控件之间的交互。我已经在网上找到了一些有用的信息，但无法将它们放在一起。

所以我建立了一个小例子来解释：

主类：

```
public class Test_TwoController extends Application {

    @Override
    public void start(Stage stage) throws Exception {
        Parent root = FXMLLoader.load(getClass().getResource("Fxml1.fxml"));
        Scene scene = new Scene(root);                  
        stage.setScene(scene);
        stage.show();
    }    
    public static void main(String[] args) {
        launch(args);
    }
} 
```

主要的fxml：

```
<AnchorPane id="fxml1_anchorpane_id" fx:id="fxml1_anchorpane" prefHeight="206.0" prefWidth="406.0" xmlns:fx="http://javafx.com/fxml" fx:controller="test_twocontroller.Fxml1Controller">
  <children>
    <HBox id="fxml1_hbox_id" fx:id="fxml1_hbox" prefHeight="200.0" prefWidth="400.0">
      <children>
        <Button id="fxml1_button_id" fx:id="fxml1_button" mnemonicParsing="false" onAction="#button_action" prefHeight="200.0" prefWidth="200.0" text="Button" />
      </children>
    </HBox>
  </children>
</AnchorPane> 
```

及其控制器：

```
public class Fxml1Controller implements Initializable {

    @FXML HBox hbox;
    @FXML Button button;

    @Override
    public void initialize(URL url, ResourceBundle rb) { }

    public void button_action(ActionEvent event) throws IOException {
        // 1\. add an instance of Fxml2 to hbox
        // 2\. change to tab2 in new Fxml2
        // or
        // notify Fxml2Controller to change to tab2 in Fxml2
    }
} 
```

现在动态添加控件：

它的fxml：

```
<AnchorPane id="fxml2_anchorpane_id" fx:id="fxml2_anchorpane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="200.0" prefWidth="200.0" xmlns:fx="http://javafx.com/fxml" fx:controller="test_twocontroller.Fxml2Controller">
  <children>
    <TabPane id="fxml2_tabpane_id" fx:id="fxml2_tabpane" prefHeight="200.0" prefWidth="200.0" tabClosingPolicy="UNAVAILABLE">
      <tabs>
        <Tab id="fxml2_tab1_id" fx:id="fxml2_tab1" text="tab1">
          <content>
            <AnchorPane id="Content" minHeight="0.0" minWidth="0.0" prefHeight="180.0" prefWidth="200.0" />
          </content>
        </Tab>
        <Tab id="fxml2_tab2_id" fx:id="fxml2_tab2" onSelectionChanged="#onSelectionChanged" text="tab2">
          <content>
            <AnchorPane id="Content" minHeight="0.0" minWidth="0.0" prefHeight="180.0" prefWidth="200.0" />
          </content>
        </Tab>
      </tabs>
    </TabPane>
  </children>
</AnchorPane> 
```

和控制器：

```
public class Fxml2Controller {

    @FXML TabPane tabpane;
    @FXML Tab tab1;
    @FXML Tab tab2;

    public Fxml2Controller() throws IOException {
        Parent root = FXMLLoader.load(getClass().getResource("Fxml2.fxml"));
        Scene scene = new Scene(root);        
        Stage stage = new Stage();
        stage.setScene(scene);        
    }    

    public void onSelectionChanged(Event e) throws IOException {

        FXMLLoader loader = new FXMLLoader();
        // how can i get the current Fxml1 anchorpane instance?
        AnchorPane root = (AnchorPane) loader.load(getClass().getResource("Fxml1.fxml").openStream());

        Button b = (Button)root.lookup("#fxml1_button_id");        
        b.setText("New Button Text"); // dont change the buttons text!!!               
}
} 
```

用法是：在fxml1的hbox中添加一个fxml2。然后在 fxml1 中单击按钮后，fxml2 的选项卡应该会更改。你可以看看那个图片[http://s13.postimage.org/uyrmgylo7/two_controlls.png](http://s13.postimage.org/uyrmgylo7/two_controlls.png)

所以我的问题是：

*   如何将一个或多个 fxml2 控制器添加到 fxml1 的 hbox 中？
*   如何从另一个控件访问一个控件或在控件之间进行通信？有关详细信息，请参阅 Fxml2Controller 中的 onSelectionChanged() 方法。

提前谢谢你，solarisx

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T09:24:30.667

您似乎将很多不同的概念混合在一起。首先，**Stage**可以理解为屏幕上的一个窗口。它有一个包含实际 SceneGraph 的 Scene 对象。在您的示例中，您正在创建一个新阶段和一个新场景，它们将填充您的第二个 fxml 文件的内容。这意味着，如果工作，第二个窗口会弹出包含你的东西。我不认为这是你想要实现的。

此外，当 FXMLLoader 读取文件时，它会查找指定为其控制器的类并通过反射构造它的实例。这意味着当您在使用它加载的 fxml 文件的控制器的构造函数中调用 load 方法时，您将导致无限循环。

最后要理解的是，`load()`返回的对象是一个任意节点，可以像任何其他节点一样放入应用程序的 SceneGraph 中。

因此，要使您的概念发挥作用，您应该执行以下操作：

1.  将当前位于第二个控制器的构造函数中的加载代码移动到第一个控制器的 button_Action 方法。
2.  扔掉button_action中的new-stage-new-scene代码，取FXMLLoader返回的Node，添加到HBox的children中。
3.  对于第二个问题，如果您实际创建 FXMLLoader 的实例而不是调用静态方法，则可以获取控制器实例，并使用其中的`load()`方法。调用后，您可以通过和`load()`检索 fxml 文件的控制器和根对象。然后，您可以像使用逻辑中的任意对象一样使用它们。`getController()``getRoot()`

# mysql - 使用 DataImportHandler 将 UTF8 数据从 MySQL 索引到 SOLR 4

> ID：13465460
> 
> 赞同：3
> 
> 时间：2012-11-20T01:48:30.497
> 
> 标签：mysql, jdbc, solr, dataimporthandler

我有一个使用 Amazon 的 RDS（版本 5.5.x）的 MySQL 数据库的设置。我已经确认数据库配置为 UTF8。我可以使用 PHP 插入和选择中文字符。看起来不错。

我在 Tomcat6 上运行 SOLR（来自 Ubuntu 10.04LTS 的库存 Tomcat6）

现在的问题是使用 MySQL 自己的 JDBC 驱动程序将 SOLR 4.0 插入其中。

我将在下面提供相关配置，但我要解决的问题是，一旦我将我的 DB 表索引到 SOLR 中，ASCII 字符就可以了（当然），但是 unicode 字符（例如中文）显示为胡说八道。我也无法查询这些字符（但查询英文单词效果很好！）。

有没有人遇到过这个问题？

这是用于 DataImportHandler 的我的 db conf xml 文件：

```
<dataConfig>
        <dataSource     type="JdbcDataSource"
                        driver="com.mysql.jdbc.Driver"
                        url="jdbc:mysql://db.host.com/db_name?useUnicode=yes&amp;characterEncoding=UTF-8&amp;characterSetResults=UTF-8"
                        user="db_username"
                        password="db_password"
        />

        <document name="vspcm">
                <entity name="conversations"
                        query="select query from mysql"
                >
                </entity>
        </document>
</dataConfig> 
```

我已经使用了上面 url 变量中的参数，将 utf8 更改为 UTF-8 等。没有任何问题。（我已更改查询以删除我的表结构，但我确认它有效 - 增量导入工作正常）

对于 schema.xml，我从 collection1/conf/schema.xml 开始，删除了所有不必要的字段，并添加了自己的字段。所有文本字段（在 mysql 中是 varchars）都设置为 text_general 示例字段：

```
<field name="msg"       type="text_general"     indexed="true"  stored="true"  multiValued="true"/> 
```

（上面的字段中将包含 unicode 字符。

text_general 字段定义为：

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

只是为了确保 SOLR 与 unicode 字符配合得很好，我将 SOLR 4 下载中提供的示例 utf8-example.xml 模式导入到“collection1”中，它确实 idex 示例字符。我在xml文件中添加了一些中文，导入它，然后对collection1进行查询，我得到了中文字符。

所以我怀疑它在 DataImportHandler 的某个地方。

有没有人遇到过这种情况并提出解决方案？

非常感谢！克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:45:02.447

毫无疑问，Solr 支持汉字。

我想你需要添加这样的配置

```
 <dataSource type="FileDataSource" encoding="UTF-8"/> 
```

[有关更多信息，请参阅Solr wiki 中有关数据导入请求处理](http://wiki.apache.org/solr/DataImportHandler#Usage_with_RDBMS)程序的“疑难解答”部分。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-30T05:40:20.543

修复它 - 实际上是一个数据库问题。

# sql - 在 SQL 中使用 ID 代替名称会更好吗？

> ID：13465461
> 
> 赞同：0
> 
> 时间：2012-11-20T01:49:05.863
> 
> 标签：sql

> **可能重复：**
> [INT 和 VARCHAR 主键之间是否存在真正的性能差异？](https://stackoverflow.com/questions/332300/is-there-a-real-performance-difference-between-int-and-varchar-primary-keys)

这可能是一个愚蠢的问题，但是当我们在 SQL 中创建表时，使用 ID 代替名称会更好吗？

我已经为公司和客户创建了表，并且我刚刚使用公司名称连接了 2 个表。但是，我从其他线程中看到，很多人使用 company_ID 作为主键并将其与其他表中的 ID 连接起来。

他们使用身份证而不是公司名称有什么好的理由吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:35:34.773

选择使用“自然”或“代理”键有几个考虑因素。仔细检查每一个。 [本文](http://www.databasejournal.com/features/mssql/article.php/3922066/SQL-Server-Natural-Key-Verses-Surrogate-Key.htm)讨论了每种方法的一些优点和缺点。

生成的 ID 通常是一个不错的选择，但最佳答案可能取决于您存储的数据以及该数据库的使用方式。例如，在图书数据库的情况下，标题不会成为一个好的主键，因为两个作者可能写不同的书但使用相同的标题。ISBN 可能是一个很好的自然键。经常有人认为自然键不方便更改。一本书的 ISBN 多久更改一次？另一方面，公司名称偶尔会发生变化。

使用公司编号也很常见，但这些通常已经由会计部门分配。为什么您更喜欢存储生成的 CompanyID，并且总是必须查找 ID 所指的 CompanyNbr？

# ios - 出现此播放符号时如何启动进程

> ID：13465466
> 
> 赞同：0
> 
> 时间：2012-11-20T01:49:59.267
> 
> 标签：ios, audio, label, streaming, playback

在我的应用程序中，我正在流式传输音频，并且有 5-10 秒的时间取决于缓冲区加载的连接，在此之后，我的应用程序开始播放音频。当它开始播放音频时，这个符号会出现在屏幕上。

这是我正在谈论的图像。

[http://img27.imageshack.us/img27/3667/img0596.png](http://img27.imageshack.us/img27/3667/img0596.png)

当屏幕上出现此符号时，我想更改我的应用程序中的标签，但我不知道哪个功能让我检测到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:01:15.367

该符号是音乐设备通用的“播放”按钮。很可能有一个可以“收听”的 NSNotification 中心消息。但是，根据您缓冲声音的方式，可能有一个委托可以在选择器开始播放后通知它。没有更多细节，我无法给出更详细的建议。如果我处于您的位置，我会非常仔细地查看您正在使用的 API，很可能存在几种方法来发布通知或发送通知流状态以及播放的委托消息。我使用过一些流式音频 API，并且能够从流对象中获取缓冲区的状态以及许多其他消息。这些只是好的设计的一部分，所以很可能它就在那里。

# php - PHP - 下载前自定义 .zip 文件？

> ID：13465472
> 
> 赞同：1
> 
> 时间：2012-11-20T01:50:42.277
> 
> 标签：php, download, customization

所以我正在制作一个脚本，我想学习如何限制在一个域上的使用，但我需要在下载之前修改脚本。我的问题是，我想使用他们网站的用户填写的 $_GET 变量。使用 file_put_contents 或其他东西自定义脚本，然后下载修改后的脚本。我该怎么做？它需要 Javascript 和 PHP，还是只需要 Javascript？我不知道该怎么做。可以在[此处找到修改下载的示例](http://foundation.zurb.com/download.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:42:12.387

所以，如果我理解正确，用户用 var 填写一些表单（我们称之为 $var），然后单击表单的提交按钮来下载文件（我们称之为“myscript.php”）。

您想编辑“myscript.php”并在用户下载之前将 $var 放入该脚本中。这个假设正确吗？

为此，您需要预先准备好脚本，在某处放置一个占位符，然后在用户下载文件之前，更改预期代码块的占位符。或者，如果相关，您可以替换`<?php`代码的第一个标签。

小例子：

***myscript1.php***

```
<?php
$varb = 'a string with DEFAULT VAR inside just to test';
//Block of code goes here
//{%%DEFAULT VAR%%}
print $var; 
```

***表单调用的代码：***

```
<?php
$path = 'myscript1.php';
$file = file_get_contents($path);
$var = $_GET['var'];
$block = '
    // valid php code that you put inside script (without <?php)
    // Alternatively you can grab the block of code
    // from a file with file_get_contents
    $var = ' . $var . ';';
$file = str_replace('//{%%DEFAULT VAR%%}', $var, $file); 
```

* * *

这是一个更完整（和复杂）的例子......

***myscript2.php***

```
<?php
$var = '{%%DEFAULT VAR%%}';
$varb = 'another string with DEFAULT VAR inside just to test';
print $var; 
```

**下载脚本（由表单调用）**

```
<?php
$form = 
'<html>
    <head></head>
    <body>
        <form action="">
            <span>myVar</span><input type="text" id="var" name="var"/><br/>
            <input type="submit" value="download file"/>
        </form>
    </body>
</html>';

if (isset($_GET['var'])) {
    $var = $_GET['var'];
    $path = 'myscript2.php';
    $file = file_get_contents($path);

    // PART 1   
    /*
     * Tokenizer Approach (read http://php.net/manual/en/book.tokenizer.php)
     * Splits a php file into an Array with tokens (like the ZEND Engine Parser does)
     * Usefull for parsing and validating the PHP file
     * In this case we're just cheking if the script has
     * $var = {%%DEFAULT VAR%%}; somewhere but you can implement a more complex code to check 
     * complete statements or instructions!!! This is just for example's sake!
     * Skip this part if you don't need to validate the script
     */
    $tokens = token_get_all($file);
    if (!validatePHPScript($tokens)) {
        throw new Exception("script didn't pass validation");
    }
    //END PART 1

    // PART 2
    /*
     * The actual string replacement via str_replace
     * It actually just replaces a placeholder for anything
     * you want, in this case the $_GET['var'] value
     * You can actually replace a placeholder for a complete
     * block of code: just put the placeholder in the part you want
     * to insert and then comment it. #{‰‰PLACEHOLDER_NAME%%}
     * Then replace the placeholder with the comment tag
     *   
     */
      $file = str_replace('{%%DEFAULT VAR%%}', $var, $file);
    // END PART 2

    //PART 3
    /*
     * Serve the file to download through headers
     */
    header('Content-type: text/plain');
    header('Content-disposition: attachment; filename=myscript.php');
    header('Expires: 0');
    header('Cache-Control: must-revalidate');
    header('Pragma: public');
    header('Content-Length: ' . strlen($file));
    ob_clean();
    flush();
    print $file;
    // END PART 3

} else {
    print $form;
} 
```

* * *

***验证函数示例：***

```
//Validation example
function validatePHPScript(array $tokens)
{
    $max = count($tokens);

    $var_check = false;
    $operator_check = false;
    $string_check = false;
    $semicolon_check = false;

    // loop through all $tokens
    for ($i = 0; $i < $max; ++$i) {
        // only look for variables (tokens with type T_VARIABLE)
        if (is_array($tokens[$i]) && $tokens[$i][0] === T_VARIABLE) {
            // LOOK for a variable named $var
            if ($tokens[$i][1] === '$var') {
                // Found $var
                $var_check = true;

                // let's check if its an assignment statement
                // by looping through the remaining code until we find a colon
                for ($ii = $i +1; $ii < $max; ++$ii) {
                    // Look for the operator =
                    if ($tokens[$ii] === '=') {
                        $operator_check = true;

                    // Look for the string and check if it corresponds to the value
                    // we're going to replace
                    } else if ($operator_check && is_array($tokens[$ii]) && $tokens[$ii][0] === T_CONSTANT_ENCAPSED_STRING && $tokens[$ii][1] === "'{%%DEFAULT VAR%%}'") {
                        $string_check = true;

                    // Look for the statement end token (semicolon) 
                    } else if($string_check && $tokens[$ii] === ';') {
                        $semicolon_check = true;
                        break;
                    }
                }
                // All checks passed so we don't need to loop anymore
                if ($var_check && $operator_check && $string_check && $semicolon_check) {
                    return true;
                } else {
                    // reset checks
                    $var_check = false;
                    $operator_check = false;
                    $string_check = false;
                    $colon_check = false;
                }
            }
        }
    }
    return false;
} 
```

# c# - 如何并行化 Kinect AllFramesReady 事件

> ID：13465474
> 
> 赞同：2
> 
> 时间：2012-11-20T01:50:43.120
> 
> 标签：c#, multithreading, parallel-processing, task-parallel-library, kinect

我正在使用 Kinect 进行开发，我需要在 AllFramesReady 事件中执行一项任务。该任务包括大量使用`BinaryWriter`.

我知道框架（颜色、深度、骨架）存在很短的时间。

```
using (var imageFrame = e.OpenColorImageFrame())
{
     // Do the heavy task writing tons of bits do a `BinaryWriter`
} // The frame is no longer available :( 
```

有没有办法并行化它？或者一些提高我的代码性能的技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T06:58:22.553

通常，不要在 AllFramesReady 事件处理程序中进行繁重的工作。我的建议是：将 Frame 信息存储在一个队列中，然后使用另一个线程将存储的信息写入磁盘内存。请注意，当进入队列的速率超过离开队列的速率时，在某些时候，您将耗尽内存。

# mysql - 选择给定索引的最后插入行

> ID：13465475
> 
> 赞同：0
> 
> 时间：2012-11-20T01:50:55.560
> 
> 标签：mysql, sql

我制作了一个小型修订系统，每次修改时都会存储文本的新版本。

该表如下所示：

```
+-------+-----+----------+
| revID | nID |   text   |
+-------+-----+----------+
|   1   |  1  |   foo    |
+-------+-----+----------+
|   2   |  1  |  newfoo  |
+-------+-----+----------+
|   3   |  2  |   bar    |
+-------+-----+----------+
|   4   |  2  |   baz    |
+-------+-----+----------+
|   5   |  3  |    a     |
+-------+-----+----------+ 
```

什么 SQL 语句会给我每个 nID 的最后插入的行？像这样：

```
+-------+-----+----------+
| revID | nID |   text1  |
+-------+-----+----------+
|   2   |  1  |  newfoo  |
+-------+-----+----------+
|   4   |  2  |   baz    |
+-------+-----+----------+
|   5   |  3  |    a     |
+-------+-----+----------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T01:53:38.097

创建子查询的想法是获取每个的*最大值* ，然后将其与表本身连接，但有两个连接条件：它匹配并且它也匹配`RevID``NID``NID``RevID`

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT nid, MAX(revID) maxID
            FROM tableName
            GROUP BY nid
        ) b ON a.nid = b.nid AND
                a.revID = b.maxID 
```

*   [**SQLFiddle 演示**](http://sqlfiddle.com/#!2/4ed55/1)

# ruby-on-rails - 如何将当前的高电压页面名称添加为正文类？

> ID：13465477
> 
> 赞同：2
> 
> 时间：2012-11-20T01:51:10.020
> 
> 标签：ruby-on-rails, gem, ruby-on-rails-3.2, helper

我想知道如何将当前的 high_voltage 页面名称作为我的类呼应出来`<body>`？

我目前的解决方案有点麻烦：

```
# app/views/layouts/application.html.erb
<body class="<%= yield :body_class %>">

# app/views/pages/principles.html.erb
<% content_for :body_class do %>home<% end %> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T02:12:32.257

您可以创建一个视图助手，它将返回一个带有控制器名称、操作、id 等的字符串。

```
module ApplicationHelper
  def body_class
    "#{controller_name} #{controller_name}-#{controller.action_name} #{page_id}"
  end

  def controller_name
    controller.controller_path.gsub('/','-')
  end

  def page_id
    params['id']
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:45:47.423

@harlow 不错的解决方案，尽管我发现它暴露了很多关于我的 Rails 应用程序内部的信息（即“高电压”的使用）。

此外，对于 body 或在我的情况下为 html-tag，我不需要`params['id']`包含在类中的“high_voltage”页面的外部上下文。

我用这个：

```
module ApplicationHelper
  def html_class
    "#{controller.controller_name} #{controller.action_name} #{page_id}"
  end

  def page_id
    return params['id'].gsub('/','-') if controller.controller_name == 'pages'
    return nil
  end
end 
```

# mysql - 是否可以搜索一个值，可选择查看十进制值中的尾随 0

> ID：13465480
> 
> 赞同：0
> 
> 时间：2012-11-20T01:51:14.017
> 
> 标签：mysql

所以我要搜索“1.00”需要在 1、1.0、1.00、1.000、11、11.00 等上找到匹配项

所以我所追求的是一个简单的搜索，但尾随小数位是可选的，因为它们可能会或可能不会被用户添加到数据库中。

目前我有这个，这显然不会成功

```
SELECT * 
FROM `prices` 
WHERE `price` = '%1.00'; 
```

执行以下操作会起作用，但我想要更简洁的东西，因为

```
SELECT * 
FROM `prices` 
WHERE `price` = '1.00'
OR `price` = '1.0'
OR `price` = '1'; 
# NOTE THE LACK OF DECIMAL PLACE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:55:54.590

您真正想做的是将这些字符串作为数字进行比较，对吗？如果是这样，则`price`使用加法转换为数字。

尝试这个：

```
SELECT *
FROM `prices`
WHERE (0 + `price`) = 1; 
```

如果是小数，你可以这样做：

```
SELECT *
FROM `prices`
WHERE ROUND( 0 + `price` , 2 ) = 0.99; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:55:42.367

看起来我可以使用 TRIM() 函数来实现这一点，如

```
SELECT TRIM(TRAILING '0' FROM `price`) as trimmed
FROM `prices`
WHERE trimmed = '1' 
```

[https://stackoverflow.com/a/7968606/1613391](https://stackoverflow.com/a/7968606/1613391)

# ruby-on-rails - 通过 Nokogiri rails 选择输入标签

> ID：13465481
> 
> 赞同：0
> 
> 时间：2012-11-20T01:51:16.830
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, web-scraping, nokogiri

我在寻找选择和显示页面信息的方法时遇到了一些麻烦，我使用的是 NOKOGIRI 和 Rails 3。

所以我想选择以下输入标签：

```
<input type="text" name="tarificador.codPosDest.desMuniEstado" size="60"      value="PUEBLA,PUEBLA              " readonly="readonly" style="font-size: 11px;
                                            font-family: Verdana, Arial, Helvetica, sans-serif;
                                            color: #575553;
                                            font-weight: bold;
                                            text-align: justify;
                                            background-color: #f6ecce;
                                            border:0;"> 
```

我需要这个输入标签的值，我怎样才能在视图中显示它，我在我的控制器上使用这样的东西：

```
tarifa = ""
 doc.css("#tarificador.codPosDest.desMuniEstado").each do |d|
   puts d.attr("value")
   puts d.text
   tarifa << d.text
 end

respond_to do |format|
  if @sender.save
    format.html do 
        redirect_to @sender, notice: 'Sender was successfully created.'
        flash[:tarifa] = tarifa
    end
  end
end 
```

然后在我看来，我只显示 flash 标签：

```
 <div class="estafeta">
   <%=h flash[:tarifa].html_safe %>
  </div> 
```

您知道显示数据的更好方法吗？

PS：我输入的代码不起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:37:54.973

您正在选择它的 name 属性，而不是 id 所以也许：

```
tarifa = doc.search('input[name="tarificador.codPosDest.desMuniEstado"]').map{|x| x[:value]} * '<br />' 
```

`text`永远是空的。

# graphics - 持有并修改

> ID：13465484
> 
> 赞同：1
> 
> 时间：2012-11-20T01:51:56.120
> 
> 标签：graphics

我有一个图形格式，其中每个像素使用前一个像素的 RGB 值（使用黑色线条上的第一个像素），然后可以修改红色、绿色或蓝色，或者可以将像素设置为任何灰色值（不使用前一个像素的值）。所有这些都已实现（简单的部分）。

以最高质量将 24 位图像转换为这种格式的最佳方法是什么？

任何想法表示赞赏。

# android - 如果我有一串推文 (json)，我可以加载到 Twitter4j Tweet[] 中吗？

> ID：13465485
> 
> 赞同：2
> 
> 时间：2012-11-20T01:52:05.660
> 
> 标签：android, twitter, twitter-oauth, twitter4j

假设我有一个字符串

```
 String jsonTweets; 
```

我只是使用常规的 HttpClient 请求得到这个。如何使用 TwitterAPI ME 或 Twitter4j 以某种方式将此字符串转换为 Tweet 类？

注意：我不会使用 TwittrAPI ME 或 Twitter4j 来创建 jsonTweets 字符串。我已经有了它，只是想使用 API 来获得等效的 java 类。鸣叫.java。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:18:01.127

您可以使用 DataObjectFactory#createStatus() 从原始 json 字符串实例化 Status 对象。 [http://twitter4j.org/en/javadoc/twitter4j/json/DataObjectFactory.html#createStatus(java.lang.String](http://twitter4j.org/en/javadoc/twitter4j/json/DataObjectFactory.html#createStatus(java.lang.String) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:08:01.517

如果您只想要一个 Tweet 类和一些解析它们的方法，则不需要包含这些整个库。创建您自己的 Tweet 类，实例化一个 JSONObject，将您的 json 字符串传递给构造函数，并使用 getString 和 getXYZ 方法填充您的 Tweet 类。

如果你想使用 Twitter4j，通过他们的在线 JavaDoc 快速搜索导致我这样做：

[http://twitter4j.org/en/javadoc/twitter4j/json/DataObjectFactory.html#tweetConstructor](http://twitter4j.org/en/javadoc/twitter4j/json/DataObjectFactory.html#tweetConstructor)

看起来它从 Twitter 的 api 中接收标准推文数据的 JSON 字符串并返回它们的 Tweet 对象。

# android - 如果测验游戏在android中的任何时候停止，如何继续它

> ID：13465486
> 
> 赞同：0
> 
> 时间：2012-11-20T01:52:06.150
> 
> 标签：android, android-lifecycle

我正在创建一个多项选择问答游戏，其中有一个选项可以从用户离开的地方继续游戏。例如，如果用户在问题编号 4 处停止了应用程序，则按下继续选项将从问题编号 4 本身恢复问答游戏。我无法理解我应该如何通过编码方式继续前进？继续多项选择问答游戏的正确方法是什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:02:36.777

它实际上是一个简单的解决方案。当您进行选择调用时，sql 读取将始终导致相同的读取序列。因此，如果您有 100 行，并且您选择其中的 10 行并选择第一行，那么它总是相同的。经过实际测试，它可以工作。现在，您可以在您的表中创建一个“已玩”标志并标记您的测验已玩。这样，您将始终以与重置相同的顺序获得相同的问题。

如果你想随机化，我建议你编码。没有自动的方法可以做到这一点。

现在对于问题，您应该使用共享偏好来保存当前正在播放的问题。这样，当您重新启动应用程序时，您可以只读取这一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:05:09.480

例如，您可以使用[JDOM](http://www.jdom.org)。只需在项目构建路径中包含 .jar 文件，然后您就可以访问 JDOM 库方法。

使用 JDOM 库的示例：

```
// Create a new XML document in memory
Document doc = new Document();
Element root = new Element("child");
doc.setRootElement(root); // set ^ above element as the root element

root.addContent(new Element( "childname" )); // add a data element to the root

root.getChild("childname").setText("SOME INFO"); // give some data to the element <childname>

// Save the XML file
FileWriter writer = new FileWriter("FILENAME.xml");
XMLOutputter outputter = new XMLOutputter();
outputter.setFormat(Format.getPrettyFormat()); // sets correct tabbing/format in the file
outputter.output(doc, writer); 
```

这将是这样的：

```
<child>
    <childname>SOME INFO</childname>
</child> 
```

然后，您可以使用一些 JDOM 方法访问存储在 XML 文件中的信息，例如：

```
root.getChild("SOME CHILD").getText(); 
```

当然，JDOM 不是这里唯一的选择。这对你来说是最简单的，而不是我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T02:59:25.443

你从哪里得到你的问题？尝试围绕您的游戏构建一个 sqlite 数据库。从那里得到你的问题。然后当玩家出去时，将测验的状态保存在数据库表中，当他回来时恢复游戏。您还可以将他以前的表演、当前表演存储在单独的表格中。似乎是一个很好的方法。

# jquery - 从标题中删除单词

> ID：13465493
> 
> 赞同：1
> 
> 时间：2012-11-20T01:53:26.343
> 
> 标签：jquery

```
 $("p.author").text(function() {
     return $(this).text().replace(/(By|on)/g, '');
  }); 
```

我在之前的一篇文章中发现了这一点，该文章描述了如何从元素“p.author”中删除单词“By”

我想要做的是从标题中删除一个词

像这样的东西？

```
 v = $('.datarow .location').attr('title').replace(/,/g,'');
  $("span.name").attr('title').(v); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T01:55:54.527

```
$('.datarow .location').attr('title', function(index, attr){
  return attr.replace(/,/g,'');
}); 
```

`.attr()`接受一个函数作为第二个参数，并给我们 attr 的旧值作为它的第二个参数。

这是一个演示：http: [//jsfiddle.net/83WLm/](http://jsfiddle.net/83WLm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:56:01.613

```
$("p.author").text(function() {
 return $.trim($(this).text()).replace(/^(By|on)/gi, '');
});?

/gi => means ignore case, greedy
^ => means starting
$.trim()  jquery trim characters 
```

演示：http: [//jsfiddle.net/fedmich/wwmy9/](http://jsfiddle.net/fedmich/wwmy9/)

您也可以发布HTML代码吗？看到它们后，我会修改我的小提琴答案。

小心更换“on”，它可能会从 Ronnie 移除“on”

# iphone - 在用户仍然可以使用 UI 时在后台运行进程

> ID：13465496
> 
> 赞同：3
> 
> 时间：2012-11-20T01:53:55.973
> 
> 标签：iphone, ios, xcode

我试图在不锁定用户界面的情况下在后台运行数据库获取过程。

目前我有一个按钮可以执行此操作，但我希望它是自动的，以便在用户浏览当前结果时可以获得更多结果。

这是按钮执行的代码，我想让它自动执行，而不是锁定 UI。此外，如果有一种方法可以暂停该过程，但如果用户转到另一个也非常有用的屏幕，则继续它停止的地方。

提前致谢！

```
-(IBAction)continueUpdatingResultsButtonPressed:(UIButton*)sender{
[findMoreButton removeFromSuperview];
[self continueFindingMoreRecipes]; //(do this in background without locking screen)
[self loadRefreshButton];//At completion load this button (a blinking button) to refresh the cells with new results 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T03:01:22.667

您可以使用的典型模式是这样的：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // perform data processing here (done in the background)

    dispatch_async(dispatch_get_main_queue(), ^{
        // update user interface here (done on the main thread)
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T02:11:06.137

您可以执行批处理请求，每次您的 UI 在当前端的 Y 中获取时，您都会缓存下一个 X 数量的答案。根据您使用的内容，许多数据库都有可以帮助您轻松批量缓存的协议。祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T03:03:30.183

使用盛大的中央调度。创建一个新队列，用一个块调度它，当你需要更新时，调用 dispatch get main queue。但是，一旦调度了队列，就无法暂停此操作。也许将食谱加载到中介中，然后根据需要进行更新。

寻找一些 gcd 教程，那里有一些不错的教程。

会给你更多的代码，但我在 iPhone 上打字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T03:43:58.213

让我感到震惊（尤其是因为您自己[承认“对编程非常陌生”），在后台队列中使用](https://stackoverflow.com/questions/13391669/multithread-database-fetch-xcode/13392546)[GCD](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)预取数据可能并不谨慎，请确保您协调后台队列的数据库操作与前台的数据库操作（可能通过类似[FMDB](https://github.com/ccgus/fmdb)的`FMDatabaseQueue`东西或类似的东西），当您转到其他屏幕时（如您在问题中指出的那样）优雅地处理暂停此操作，并确保您不会在此过程中导致保留周期。

更糟糕的是，我认为这一切都是为了追求一个可能有问题的目标，如果我理解正确的话，那就是在后台检索 10,000 个食谱。不要误会我的意思。您当然可以像我们概述的那样设计所有后台操作，但我认为您应该停下来问问自己，这是否适合您的业务问题。

我可能会建议一个无限简单的解决方案。只需使用前*x 个*配方加载您的 tableview，当用户向下滚动时，当您开始接近 tableview 的末尾时，检测该事实并检索下一个*x*记录并将它们添加到 tableview。但是任何期望用户翻阅 10,000 个条目的用户界面都没有通过气味测试。当我想到一个包含 10,000 个条目的数据库时，我想到的更像是类似 imdb/wikipedia/google/facebook 的用户界面，而不是联系人样式的用户界面。

无论如何，您几乎肯定不希望您的应用程序只是在后台无休止地检索食谱。你可以解决你的 UI 性能问题，但也许用内存管理问题来代替它。当您的食谱应用程序是否需要时，您将设计一个复杂的系统架构。

# java - java web服务从类中检索空列表

> ID：13465497
> 
> 赞同：1
> 
> 时间：2012-11-20T01:54:05.477
> 
> 标签：java, web-services

这是我的类，我需要初始化 当我运行 web 方法时
，我的类上有一个静态初始化，我得到一个异常

```
@WebService( serviceName = "SalesManager")

public class SalesManager {
       private static ServerListner serverLister;
       private static  Set<Client> clients;
       public static Set<Sale> sales;
       private static String status;
public SalesManager(){}
// this is the static block which should run once
static {
    ApplicationContext serverLoader = new ClassPathXmlApplicationContext("salesLoader.xml")
    clients  = new LinkedHashSet<Client>();
    sales = (Set<Sale>) serverLoader.getBean("sales");
    serverLister = (ServerListner) serverLoader.getBean("Serverlistner");
    status = "Created";  }
//this is the webmothod which I need to run
@WebMethod (operationName = "getOpenSales")
public Set<Sale>  getOpenSales (){
return SalesManager.sales; } 
```

# r - R：根据数据计数生成直方图

> ID：13465498
> 
> 赞同：6
> 
> 时间：2012-11-20T01:54:06.247
> 
> 标签：r

假设我有向量`a`：

```
c(1, 6, 2, 4.1, 1, 2) 
```

和一个计数向量`b`：

```
c(2,3,2,1,1,0) 
```

我想生成向量`c`：

```
c(1, 1, 6, 6, 6, 2, 2, 4.1, 1) 
```

致电：

```
hist(c) 
```

我该如何构建`c`，或者有没有办法直接从`a`and生成直方图`b`？请注意 中的重复项`a`以及不等间距。

需要矢量化解决方案。`a`并且`b`对于 lapply 和朋友来说太大了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T01:58:29.030

`?rep`

```
> rep(a, b)
[1] 1.0 1.0 6.0 6.0 6.0 2.0 2.0 4.1 1.0
> 
```

* * *

编辑，因为我很好奇！

```
a <- sample(1:10, 1e6, replace=TRUE)
b <- sample(1:10, 1e6, replace=TRUE)

> system.time(rep(a, b))
   user  system elapsed 
  0.140   0.016   0.156 
> system.time(inverse.rle(list(lengths=b, values=a)))
   user  system elapsed 
  0.024   0.004   0.028 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T02:34:58.683

只是为了不同的东西`rep`：

```
> inverse.rle(list(lengths=b,values=a))
[1] 1.0 1.0 6.0 6.0 6.0 2.0 2.0 4.1 1.0 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T05:08:00.430

一些基准测试和更快的解决方案。`rep.int`是`rep`标准用例中更快的实现（来自`?rep`）

```
rep.int(a, b) 
```

我不相信上面的基准测试

`inverse.rle`只是`rep.int`. `rep.int`应该比`rep`. 我认为的`wrapper`组件`inverse.rle`应该比解释`rep()`为原始函数慢

一些微基准测试

```
library(microbenchmark)

microbenchmark(rep(a,b), rep.int(a,b), 
      inverse.rle(list(values = a, lengths =b)))
Unit: milliseconds
                                        expr      min       lq   median       uq
1 inverse.rle(list(values = a, lengths = b)) 29.06968 29.26267 29.36191 29.67501
2                                  rep(a, b) 25.65125 25.76246 25.84869 26.52348
3                              rep.int(a, b) 20.38604 23.31840 23.38940 23.69600
       max
1 72.80645
2 69.00169
3 66.40759 
```

内容不多，但`rep.int`似乎是赢家——它应该如此。

# heroku - 如何在 Heroku 上用 MongoID 判断数据库大小？

> ID：13465500
> 
> 赞同：0
> 
> 时间：2012-11-20T01:54:15.900
> 
> 标签：heroku, mongoid, mongoid3

我们在 Heroku 上使用[MongoHQ插件和](https://addons.heroku.com/mongohq)[Mongoid 3.0](http://mongoid.org/en/mongoid/index.html)适配器。插件计划带有大小限制，当达到 DB 限制时，Mongo 将默默地失败写入（除非配置为安全模式——在这种情况下它会抛出异常）。

我正在尝试从应用程序中查询我们离我们有多近，并在我们达到限制时发送警报。我怎样才能运行类似`db.stats()`命令但使用 Mongoid 的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:15:15.710

我在 Mongoid 3.x 中找到了如何做到这一点，它使用 Moped 作为驱动程序，而不是 10gen 的 Ruby 驱动程序。

是 Moped 的作者本人回答了关于此事提出的[github 问题](https://github.com/mongoid/moped/issues/139)。

```
Mongoid.default_session.command(collstats: 'collection_name') 
```

`db.stats()`这将返回与Mongo 控制台相同的结果。作为额外的奖励，如果集合有上限，则返回值中会有一个标志表明这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:16:57.000

您可以在您的对象（例如文档）上调用“.db”方法，然后对其执行 .stats。

例如：

```
MyBlog.db.stats 
```

对于 Mongoid 3.0.0 之前的版本，`Mongoid.master.stats`也应该可以工作。

# c# - 在 Session 中复制/克隆对象

> ID：13465504
> 
> 赞同：1
> 
> 时间：2012-11-20T01:54:32.150
> 
> 标签：c#, asp.net, class, object, cloneable

当我将自定义类的实例放入 Session 中然后将其拉出时，我需要它作为 Session 中的内容的副本出现，而不是对 Session 中的内容的引用。这就是我所拥有的，出于示例目的而淡化了。

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    Company selectedCompany = new Company("1234"); //a company code
    selectedCompany.AnotherClass.Value1 = "hello";
    Session["OLD.Company"] = selectedCompany;

    Company newCompany = (Company)Session["OLD.Company"]; //I want this to be a COPY of what's in Session, not a reference to it.
    newCompany.AnotherClass.Value1 = "goodbye";
    Session["NEW.Company"] = newCompany;
} 
```

我逐步查看了 Session 变量，上面的代码导致 OLD.Company 和 NEW.Company 的 AnotherClass.Value1 被设置为“再见”。

最初的 Google 搜索将我指向在我的 Company 类上实现 IClonable 的方向。我尝试了以下方法，但无济于事：

```
public class Company : ICloneable
{
    //properties...
    //constructors...
    public object Clone()
    {
        return this.MemberwiseClone();
    }
} 
```

进而...

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    Company oldCompany = (Company)Session["OLD.Company"];
    Company newCompany = (Company)oldCompany.Clone();
    newCompany.AnotherClass.Value1 = "goodbye";
    Session["NEW.Company"] = newCompany;
} 
```

仍然导致 OLD.Company 和 NEW.Company 的 Value1 都是“再见”。现在我怀疑这是因为 MemberwiseClone() 创建了一个“浅”副本，而我的问题是 Value1 是一个属性中的一个值，它是一个引用类型（AnotherClass）。

但同时，我也发现[这个网站](http://blogs.msdn.com/b/brada/archive/2003/04/09/49935.aspx)说不要实现 ICloneable。因此，出于我的目的，我不确定该做什么/追求什么建议。

我发现的其他几个网站显示了一些版本：

```
public static object CloneObject(object obj)
{
    using (MemoryStream memStream = new MemoryStream())
    {
        BinaryFormatter binaryFormatter = new BinaryFormatter(null, new StreamingContext(StreamingContextStates.Clone));
        binaryFormatter.Serialize(memStream, obj);
        memStream.Seek(0, SeekOrigin.Begin);
        return binaryFormatter.Deserialize(memStream);
    }
} 
```

这要求我让我的类可序列化 --- 这可能没问题（我必须阅读序列化），但是在阅读了关于不使用 ICloneable 的文章后，我不确定我是否应该花时间去追求一个ICloneable 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T02:09:38.130

您的问题与 Session 对象无关。您只需要制作一个对象的副本，对吗？

以下是编写复制构造函数的方法：

[http://msdn.microsoft.com/en-US/library/ms173116%28v=VS.80%29.aspx](http://msdn.microsoft.com/en-US/library/ms173116%28v=VS.80%29.aspx)

```
class Company 
{
...
  public Company (Company other)
  { 
    // copy fields here....
  }
} 
```

# ruby-on-rails - 有效地循环Ruby中的对象？

> ID：13465505
> 
> 赞同：0
> 
> 时间：2012-11-20T01:54:40.177
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, loops

`@pages`我有以下数组

```
#<Page id: 1, url: "/location1", name: "Information", sort_order: 2, parent_id: nil>
#<Page id: 2, url: "/location2", name: "Information 2", sort_order: 2, parent_id: 4>
#<Page id: 3, url: "/location3", name: "Information 3", sort_order: 1, parent_id: >
#<Page id: 4, url: "/location4", name: "Information 4", sort_order: 1, parent_id: nil>
#<Page id: 5, url: "/location5", name: "Information 5", sort_order: 1, parent_id: 2>
#<Page id: 6, url: "/location6", name: "Information 6", sort_order: 3, parent_id: nil> 
```

我正在尝试用这些页面建立一个导航......注意这只是一个例子我真的有70页类似于这个

我希望最终结果看起来像这样

```
<ul>
  <li><a href="/location4">Information 4</a>
    <ul>
      <li><a href="/location3">Information 3</a></li>
      <li><a href="/location2">Information 2</a>
        <ul><li><a href="/location5">Information 5</a></li></ul>
      </li>
    </ul>
  </li>
  <li><a href="/location1">Information 1</a></li>
  <li><a href="/location6">Information 6</a></li>
</ul> 
```

因此，如果 li 有另一个子 ul 和 li，则 parent_id 将发出信号，并且排序顺序是 chil li 的排序

我似乎无法围绕我需要如何`@pages`有效地循环......任何想法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T02:19:31.887

仅从顶层开始`Pages`，即`Pages`where `parent_id == nil`，order by`sort_order`

定义一个`children`方法，让您获得所有页面，其中`parent_id == self.id`，按顺序排列`sort_order`

然后你应该能够做这样的事情：

```
def build_navigation(pages, html = nil)
  return "" if pages.length == 0

  navigation_html = html || ""
  navigation_html << "<ul>"

  pages.each do |page|
    navigation_html << li_tag(page)
    navigation_html << build_navigation(page.children, navigation_html)
  end

  navigation_html << "</ul>"
end

def li_tag(page)
  "<li><a href='#{page.name}'>#{page.name}</a></li>"
end

build_navigation(parent_pages).html_safe 
```

更新：稍作调整，所以当你只想做一个查询时它可以工作：

```
def all_pages
  # get all the pages from the DB
end

def parent_pages(pages)
  parents = pages.reject { |page| page.parent_id.nil? }
  sort(parents)
end

def children(parent, pages)
  children = pages.map { |page| page.parent_id == parent.id }
  sort(children)
end

def sort(pages)
  pages.sort { |a, b| a.sort_order <=> b.sort_order }      
end

def build_navigation(pages, html = nil)
  return "" if pages.length == 0

  navigation_html = html || ""
  navigation_html << "<ul>"

  pages.each do |page|
    navigation_html << li_tag(page)
    navigation_html << build_navigation(children(page, all_pages), navigation_html)
  end

  navigation_html << "</ul>"
end

def li_tag(page)
  "<li><a href='#{page.name}'>#{page.name}</a></li>"
end

build_navigation(parent_pages(all_pages)).html_safe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:15:24.157

如果您可以使用额外的宝石，请查看[ruby​​tree](http://rubytree.rubyforge.org/rdoc/)。请注意，下面的代码示例不考虑您的`sort_order`属性。但是，您应该能够轻松地编织 sort_order 逻辑。

```
require 'tree'

class NavBuilder
    def initialize
        @pages     = Page.all
        @root      = Tree::TreeNode.new("SITEMAP", { :id => 0 })
        @processed = []
    end

    def pagetree
        pages_hash = {}
        @pages.each {|page| pages_hash[page.id] = page}

        @pages.each do |page|
            if page.parent_id.nil?
                if @root[page.id.to_s].nil?
                    @root << Tree::TreeNode.new(page.id.to_s, page)
                end 
            else
                parent_node = @root[page.parent_id.to_s]
                if parent_node.nil?
                    inserted = false
                    @root.each do |node| 
                        if page.parent_id == node.content[:id]
                            node << Tree::TreeNode.new(page.id.to_s, page)
                            inserted = true
                        end 
                    end 
                    if !inserted
                        @root << Tree::TreeNode.new(page.parent_id.to_s, pages_hash[page.parent_id]) << Tree::TreeNode.new(page.id.to_s, page)
                    end 
                else
                    parent_node << Tree::TreeNode.new(page.id.to_s, page)
                end 
            end
        end
    end

    def nav_html
        html = "<ul>"
        @root.each do |node|
            if node.content[:id] > 0
                html << html_tags(node.children.size,node)
            end 
        end 
        html << "</ul>"
    end 

    def html_tags(number_of_children,node)
        html = ""
        if !@processed.include?(node.content[:id])
            if number_of_children == 0
                html = "<li><a href=#{node.content.url}>#{node.content.name}</a></li>"
                @processed << node.content[:id]
            else
                html = "<li><a href=#{node.content.url}>#{node.content.name}</a>"
                html << "<ul>"
                node.children.each do |n|
                    html << html_tags(n.children.size,n)
                    @processed << node.content[:id]
                end 
                html << "</ul></li>"
            end     
        end 
        html
    end 
end 

nav = NavBuilder.new
nav.pagetree
puts nav.nav_html

# <ul>
#   <li><a href=/location1>Information 1</a></li>
#   <li><a href=/location4>Information 4</a>
#       <ul>
#           <li><a href=/location2>Information 2</a>
#               <ul><li><a href=/location5>Information 5</a></li></ul>
#           </li>
#           <li><a href=/location3>Information 3</a></li>
#       </ul>
#   </li>
#   <li><a href=/location6>Information 6</a></li>
# </ul> 
```

# html - 仅 CSS 复选框（具有内容属性）

> ID：13465507
> 
> 赞同：4
> 
> 时间：2012-11-20T01:54:56.120
> 
> 标签：html, css, checkbox

如何仅使用 CSS（无 JS 无 JQ）制作自定义复选框，内容：选中时为“on”，未选中时为 content：“off”。

谢谢。

重新编辑

好的，经过大量的复制/粘贴/删除，[它现在可以工作了](http://www.jsbin.com/iqobiy/3/)。

感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T02:11:15.230

```
input[type=checkbox] {
    position: relative;
    visibility: hidden;
    cursor: pointer;
}

input[type=checkbox]:after {
    display: block;
    content: "OFF";
    position: absolute;
    top: 0;
    right: -30px;
    visibility: visible;
    height: 30px;
    line-height: 30px;
    width: 50px;
    text-align: center;
    border-radius: 4px;
    background: #d00;
    color: #fff;
    font-weight: 600;
    cursor: pointer;
}

input[type=checkbox]:checked:after {
    content: "ON";
    background: #0a0;
}
```

```
<input type="checkbox" />
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T02:31:16.663

有可能的。查看 Ryan Seddon 的这些博客文章。他解释了如何使用复选框和 CSS

[http://www.thecssninja.com/css/custom-inputs-using-css](http://www.thecssninja.com/css/custom-inputs-using-css)

[http://www.thecssninja.com/css/futurebox3](http://www.thecssninja.com/css/futurebox3)

[http://www.thecssninja.com/css/css-tree-menu](http://www.thecssninja.com/css/css-tree-menu)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T02:03:26.457

无法使用 CSS 创建实际元素。但是，您可以使用 css 设置复选框的样式。

一个例子：

```
input[type=checkbox] {
    outline: 2px solid #f00;
} 
```

在处理不同的浏览器和平台时，依赖纯 CSS 也是一种让步。我希望这回答了你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T02:03:52.160

我相信仅使用 css 是不可能的。Css 装饰一个 html 元素并且不改变它的属性。如果您单击复选框，则该框必须进行回发才能在页面上显示。在这种情况下，css 将是相同的。你需要javascript。

是什么让你不想使用 javascript？

# ruby-on-rails-3 - Capistrano 带有嵌套的 rails 目录

> ID：13465517
> 
> 赞同：0
> 
> 时间：2012-11-20T01:56:06.267
> 
> 标签：ruby-on-rails-3, git, capistrano

我的 Ruby on Rails 应用程序不是我的 git 存储库的根文件。是否可以设置一个变量，以便 Capistrano 在我要求它运行迁移时知道要运行 rake 的目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:42:38.790

我会通过覆盖这样的`deploy:migrate`食谱来做到这一点：

```
namespace :deploy do
   task :migrate do
     run "cd /path/to/rails/root; rake RAILS_ENV=#{rails_env} #{migrate_env} db:migrate"
   end
end 
```

# asp.net-mvc-4 - @Html.ValidationSummary() 在 Ajax.BeginForm 中不起作用

> ID：13465518
> 
> 赞同：6
> 
> 时间：2012-11-20T01:57:20.723
> 
> 标签：asp.net-mvc-4, validationsummary, ajax.beginform

在表单`@Html.ValidationSummary()` 内使用有什么问题吗？`Ajax.BeginForm`

我有以下情况，我无法验证必填字段。表单刚刚发布，也没有引发错误。

这是视图：

```
@using (Ajax.BeginForm("Register", "Account", new AjaxOptions { HttpMethod = "POST", OnSuccess = "closeDialog('RegistroUsuario')" }))
{
   @Html.ValidationSummary() 
   <fieldset>
        <legend>Cadastro novo Usuário</legend>
       <table id="changePassword">
                <tr>
                    <td class="smallField">Username:</td>
                    <td>@Html.TextBoxFor(m => m.UserName)</td>
                </tr>
                <tr>
                    <td>Password:</td>
                    <td>@Html.PasswordFor(m => m.Password)</td>
                </tr>
                <tr>
                    <td>Repetir Senha:</td>
                    <td>@Html.PasswordFor(m => m.ConfirmPassword)</td>
                </tr>
                <tr>
                    <td>Email:</td>
                    <td>@Html.TextBoxFor(m => m.Email)</td>
                </tr>
                <tr>
                    <td>Pergunta Secreta:</td>
                    <td>@Html.TextBoxFor(m => m.SecretQuestion)</td>
                </tr>
                               <tr>
                    <td>Resposta:</td>
                    <td>@Html.TextBoxFor(m => m.SecretQuestionPassword)</td>
                </tr>
                <tr>
                    <td>Ativo:</td>
                    <td><input type="checkbox" name="status" id="status" value="Ativo"></td>
                </tr>    
            </table>           
    </fieldset>
    <input type="submit" value="Criar Usuário" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only button-link"/>
} 
```

那是控制器：

```
//
    // POST: /Account/Register
    [HttpPost]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            MembershipProvider mp  = Membership.Provider;
            MembershipCreateStatus Status;                

            // Tenta registrar o usuário
            try
            {
                //Verifica se usuário deve estar ativo ou não no sistema
                if (String.IsNullOrEmpty(Request.Form["status"]))
                {
                    model.Active = false;
                }
                else
                {
                    model.Active = true;
                }

                //Cria o usuário
                MembershipUser newUser = mp.CreateUser(model.UserName, model.Password, model.Email, model.SecretQuestion, model.SecretQuestionPassword, model.Active, Guid.NewGuid(), out Status);

                if (newUser == null)
                {   
                    /**/
                }
                else
                {                       
                    return RedirectToAction("Index", "Home");   
                }

            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

和模型：

```
public class RegisterModel
{
    [Required]
    [Display(Name = "Usuário")]
    public string UserName { get; set; }

    [Required]
    [Display(Name = "Email")]
    public string Email { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "A {0} deve ter no mínimo {2} caracteres.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Senha")]
    public string Password { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Repetir Senha")]
    [Compare("Password", ErrorMessage = "As senhas não coincidem")]
    public string ConfirmPassword { get; set; }

    [Required]
    [Display(Name = "Pergunta Secreta")]
    public string SecretQuestion { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "A {0} deve ter no mínimo {2} caracteres.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Senha Pergunta Secreta")]
    public string SecretQuestionPassword { get; set; }

    [Required]
    [Display(Name = "Ativo")]
    public bool Active { get; set; }
} 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T02:08:23.830

发现了问题。

未设置 Ajax.Options 目标 ID。一旦我设置了验证 dom 元素，我现在就会收到消息。

非常感谢

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-03T07:12:44.463

具体来说 Guilherme Longo 答案

将 AjaxOptions 设置为

```
new AjaxOptions() { HttpMethod = "Post", OnSuccess = "RefreshMethod", UpdateTargetId = "FormId" } 
```

注意`UpdateTargetId`设置为 formId。为我工作谢谢Guilherme

# phantomjs - 如何使用 Casper.js 测试 HTTP 到 HTTPS 隧道？

> ID：13465520
> 
> 赞同：6
> 
> 时间：2012-11-20T01:57:34.943
> 
> 标签：phantomjs, casperjs

我必须在我们公司的一些外联网上获得测试覆盖率，我们正在使用 phantom.js/casper.js，因为它最容易与我们的其余测试工作流程集成。

尝试通过隧道从 HTTP 转换到 HTTPS 时会出现问题。如果用户访问我们的网站 http//www.somecompany.com 并单击登录链接，他们的浏览器将重定向到 https//extranet.somecompany.com。如果您要查看 HTML 源代码，您会看到与用户被重定向到的表单正确对应的 HTML。

但是，当尝试使用 casper.js 重新创建工作流时，我成功地在登录链接上启动了 click 事件。然后我尝试识别一个表单元素来确认重定向成功，但是这个测试失败了。然后我修改了重定向后的下一步以捕获页面以查看 casper “看到”的内容。当我打开图像时，HTML 看起来好像我从未被重定向过。我知道重定向是有效的，因为我在 Fiddler 中看到了显示隧道正在建立到端口 443 的流量。

我已经搜索了 SO、google 和 Casper google 组，但找不到太多关于从 HTTP 到 HTTPS 的重定向，Casper/Phantom 是否能够自动化这样的工作流程，或者我是否需要查看 Selenium 之类的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-23T23:42:11.353

重定向在 PhantomJS 1.9.8 中开箱即用。如果不确定，请随时使用以下命令进行调试：

```
page.onResourceRequested = function(request) {
  console.log('Request ' + JSON.stringify(request, undefined, 4));
};
page.onResourceReceived = function(response) {
  console.log('Response ' + JSON.stringify(response, undefined, 4));
}; 
```

你应该在你的第一反应中看到：

```
"redirectURL": "https//extranet.somecompany.com", 
```

# django - Django 用户注册问题

> ID：13465522
> 
> 赞同：0
> 
> 时间：2012-11-20T01:57:50.437
> 
> 标签：django, ubuntu, python-2.7, user-registration

Django 新手，在 Ubuntu 12.04、Django 1.3.1 和 apt-get install python-django-registration 上运行。

尝试构建一个演示站点以使用用户注册模块。我按照[http://lightbird.net/dbe/forum3.html](http://lightbird.net/dbe/forum3.html)中的步骤进行操作。但是当我尝试访问帐户/或管理员/时，出现以下错误：“未定义名称'注册'”

在 urls.py 中注释掉注册部分后，我可以访问管理界面。有什么技巧可以克服这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:59:24.747

settings.py 中 INSTALLED_APPS 中的“注册”是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T09:01:21.697

django-registration 在你的`PYTHONPATH`? 此外，我假设您在将注册添加到已安装的应用程序后执行了 syncdb。如果两者都是真的，那么尝试打开一个 shell 提示符`python manage.py shell`并从注册模块中导入一些东西，看看会出现什么错误

# android - Android 中 Json 到 POJO 的映射

> ID：13465523
> 
> 赞同：6
> 
> 时间：2012-11-20T01:58:05.623
> 
> 标签：android, json, pojo

在 Android 中通过 Rest Framework 处理 json 有哪些好的做法。例如，如果我得到如下的某个 json 结果（或任何其他结果，我只是给出更复杂的东西）：

```
{"lifts": 
[{
   "id":26,
   "time":"2012-11-21T12:00:00Z",
   "capacity":4,
   "price":10,
   "from": { 
            "description":null,
            "city": {
                      "name":"Montreal"
                    }
           },
    "to":{
           "description":"24 rue de la ville",
           "city":{
                   "name":"Sherbrooke"
                  }
          },
    "driver":{
              "first_name": "Benjamin",  
              "image":"https://graph.facebook.com/693607843/picture?type=large"
             }
    }
]} 
```

1）我是否应该手动处理结果并获取每个值来填充我的用户界面...（不是真的）

2）我应该为每个对象创建一个 POJO（使用 JSONObject 处理映射）。在我的示例中，我将必须创建一个电梯对象来处理所有参数，甚至创建更多 POJO，以用于实例图像和可能的位置。（所以基本上，我经常需要检查我的 api rest 框架以查看我的对象是如何在服务器端完成的，我正在将我的模型从服务器复制到 android 客户端）。

3）是否有任何框架来处理映射（序列化和反序列化）。

我目前正在使用选项 2，但想知道那里是否有更好的东西。到目前为止，它对我有用，用于接收和发送。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T03:08:46.793

我喜欢为每个 api 端点创建一个响应对象，在其中映射调用的响应。

对于给定的示例并使用[GSON](http://code.google.com/p/google-gson/)，响应对象将类似于以下内容

```
public class Test
{
    static String jsonString = 
    "{\"lifts\":" + 
    "   [{" +
    "      \"id\":26," +
    "      \"time\":\"2012-11-21T12:00:00Z\"," +
    "      \"capacity\":4," +
    "      \"price\":10," +
    "      \"from\": { " +
    "               \"description\":null," +
    "               \"city\": {" +
    "                         \"name\":\"Montreal\"" +
    "                       }" +
    "               }," +
    "        \"to\":{" +
    "               \"description\":\"24 rue de la ville\"," +
    "               \"city\":{" +
    "                       \"name\":\"Sherbrooke\"" +
    "                      }" +
    "              }," +
    "        \"driver\":{" +
    "                  \"first_name\": \"Benjamin\"," +  
    "                  \"image\":\"https://graph.facebook.com/693607843/picture?    type=large\"" +
    "                 }" +
    "        }" +
    "     ]}";

    public static void main( String[] args )
    {
        Gson gson = new Gson();

        Response response = gson.fromJson( jsonString, Response.class );

        System.out.println( gson.toJson( response ) );
    }

    public class Response
    {
        @SerializedName("lifts")
        List<Lift> lifts;
    }

    class Lift
    {
        @SerializedName("id")
        int id;

        @SerializedName("time")
        String time;

        @SerializedName("capacity")
        int capacity;

        @SerializedName("price")
        float price;

        @SerializedName("from")
        Address from;

        @SerializedName("to")
        Address to;

        @SerializedName("driver")
        Driver driver;
    }

    class Address
    {
        @SerializedName("description")
        String description;

        @SerializedName("city")
        City city;
    }

    class City
    {
        @SerializedName("name")
        String name;
    }

    class Driver
    {
        @SerializedName("first_name")
        String firstName;

        @SerializedName("image")
        String image;
    }
} 
```

# internet-explorer-8 - 使用带有 Meteor 的 Handlebars 时，选择标记默认选择被 IE8 忽略

> ID：13465524
> 
> 赞同：2
> 
> 时间：2012-11-20T01:58:18.257
> 
> 标签：internet-explorer-8, meteor, handlebars.js

我创建了一个空白 Meteor 项目并尝试在车把 HTML 文件中放置一个 <SELECT> 标记。这适用于 Chrome、Firefox 和 Safari，但 IE8 会忽略 selected="selected" 属性：

```
<head><title>test</title>
</head>
<body>
  <select>
    <option>abc</option>
    <option selected="selected">def</option>
    <option>ghi</option>
  </select>
</body> 
```

所以 IE8 显示“abc”作为选择的选项。

我也尝试过编写 Handlebar 辅助函数，结果相同：

```
<head><title>test</title>
</head>
<body>
  {{{hbarselect}}}
</body>

// in the js file
Handlebars.registerHelper("hbarselect", function(value) {
    var ret = '';
    ret = '<select>';
    ret += '<option>abc</option>';
    ret += '<option selected="selected">def</option>';
    ret += '<option>ghi</option>';
    ret += '</select>';
    return new Handlebars.SafeString(ret);;
  }); 
```

如果我完全忽略 Handlebars 并且只编写一个简单的 HTML 文件，那么 IE8 会正常运行：

```
<html>
<head>
</head>
<body>
<select>
<option>abc</option>
<option selected="selected">def</option>
<option>ghi</option>
</select>
</body>
</html> 
```

我需要了解一些关于把手的信息才能完成这项工作吗？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:03:55.840

也许这种丢失选定状态的解决方法可能会有所帮助？

[https://stackoverflow.com/a/13013326/1758461](https://stackoverflow.com/a/13013326/1758461)

# google-maps - 从 Google 地图获取“我的地点”列表

> ID：13465525
> 
> 赞同：0
> 
> 时间：2012-11-20T01:58:24.630
> 
> 标签：google-maps, rss, kml

我正在制作一个网站，它有一个嵌入的谷歌地图（iFrame），上面有多个我在“我的地方”中设置的地名。我想要的是能够像在“我的地方”中那样在地图的一侧列出地名和地址。

显然，我可以只导出地图的 KML 数据，但我希望页面在将新地点添加到“我的地点”地图时自动更新，而无需导出新文件。

如果 Google 仍然支持 RSS 提要，我可能会使用它，但当前的 API 似乎需要依赖 URL 请求。

任何帮助或建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:41:49.950

我认为您不能使用嵌入式地图来做到这一点。您可以使用 Google Maps API v3、第三方 KML 解析器（如 geoxml3）和代理从 MyPlaces 向地图添加侧边栏。

[例子](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/xmlProxy060215.asp?https%3A%2F%2Fmaps.google.com%2Fmaps%2Fms%3Fmsa%3D0%26msid%3D204048902337864904598.0004cc332e8034251c1db%26ie%3DUTF8%26ll%3D37.668046%2C-80.289717%26spn%3D1.959603%2C5.642338%26output%3Dkml)

# python - 如何将mongo shell代码重写为常规python文件？

> ID：13465529
> 
> 赞同：0
> 
> 时间：2012-11-20T01:59:24.473
> 
> 标签：python, mongodb

下面的代码存在于我在 cli 上以“python test.py”运行的 python 文件中......

```
import pymongo

from pymongo import Connection

connection = Connection('localhost', 27017)

db = connection.school

data = db.students.aggregate(
 { $match :  { 'scores.type': 'homework'   },
 { $project: { id : $_id,
         name : $name,
         scores : $scores
 },
 {  $unwind:  "$scores" },
 { $group : {
     _id : "$id",
     minScore: { $min :"$scores.score" },
     maxScore: { $max: "$scores.score" }
   }
 });

for _id in data:

    print _id
    # NOTE: this can only be done ONCE...first find lowest_id then
    # remove it by uncommenting the line below...then recomment line.

    # db.students.remove(data) 
```

当我运行此代码时，我收到此错误...

```
 File "test.py", line 11
{ $match :  { 'scores.type': 'homework'   },
  ^
SyntaxError: invalid syntax 
```

如何重写此代码，使其在我的 test.py python 文件中正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:07:38.993

您有一些语法问题。

首先，管道是一个数组（Python 中的列表），您尝试在其中将多个管道元素作为单独的参数传递。

其次，需要引用管道运算符，例如$match：`'$match'`

这是一个有一些很好的例子的页面：http:
[//blog.pythonisito.com/2012/06/using-mongodbs-new-aggregation.html](http://blog.pythonisito.com/2012/06/using-mongodbs-new-aggregation.html)

# java - 编写一个接受整数作为参数并返回布尔值的函数。

> ID：13465538
> 
> 赞同：-1
> 
> 时间：2012-11-20T02:00:27.963
> 
> 标签：java, python

这是一道面试题：

1.  编写一个接受整数作为参数并返回布尔值的函数。如果整数是 2 的指数（幂），则返回的布尔值为真，否则为假。一个。没有数学库或按位运算，只有 + - * / % b。1 是二的零次方。C。没有花车，所以没有“负面力量”。d。通常应该比权力更快地识别非权力。e. 任何语言，尽管与所需位置的一般重叠都是明智的。

我对布尔值真的很粗鲁，因为我一年左右没有上过我的 Java 课，所以任何帮助或想法都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T02:09:17.693

满足所有 4 个要求的最佳方法是继续减半`n`，直到奇数或 1。

```
def ispow(n):
    while True:
        if n == 1:
            return True
        if n % 2 == 1:
            return False
        n = n / 2 
```

输出：

```
1 True
2 True
3 False
4 True
5 False
6 False
7 False
8 True
9 False
10 False 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T02:41:32.397

蒂姆的答案显然是面试官正在寻找的答案。

但是，您可以通过打破规则做得更好：

> d。通常应该比权力更快地识别非权力。

正如 BoppreH 指出的那样，向上计数而不是向下计数的答案会更快（至少对于大多数语言和平台而言），因为没有除法。在最坏的情况下，他的实现比 Tim 快了近一个数量级。

当然 BoppreH 的平均情况和最佳情况与最坏情况基本相同，而在 Tim 的最好情况下要好得多。但通常最坏的情况是非常重要的，所以这当然是一个值得研究的权衡。

或者：

> 一个。没有数学库或按位运算，只有 + - * / %

Tim 解决方案的缓慢部分是除法运算符，但实际上，它们不是必需的。你可以用 和 替换`n % 2 == 1`，`n & 1`它们`n = n / 2`保证`n = n >> 1`是等价的，突然之间，最坏的情况是快一个数量级——甚至比 BoppreH 的还要快。

这是你可能期望编译器在 C 语言中为你做的事情（然后再次尝试`2**100000`在 C 语言中不使用数学库来处理......），但在 Python 中（至少 CPython——它可能值得尝试 PyPy，并且也许是 Jython 和 IronPython），你必须手动完成。你应该被允许。

这就是为什么这类面试问题是愚蠢和毫无意义的，除了作为进一步讨论的起点。他们显然在寻找的答案通常不是您想要在实际代码中使用的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T02:15:28.310

更短，每次迭代只执行一次乘法。

```
def is_power(x):
    current_power = 1
    while current_power < x:
        current_power *= 2
    return current_power == x 
```

x = 2 ^ 100.000 的基准

```
number = str(2 ** 100000)
cProfile.run('is_power(' + number + ')')
cProfile.run('ispow(' + number + ')')
cProfile.run('is_pow_2(' + number + ')') 
```

*   is_power (this): 1.264 秒

*   [ispow](https://stackoverflow.com/a/13465598/252218)（蒂姆的回答）：11.455 秒

另一个还没写完……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T04:43:17.990

怎么样

```
import re
n = 2**5
print   bool(re.match("^10*$",bin(n)[2:])) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T02:07:40.297

当一切都失败时，使用武力：

```
def is_pow_2(x):
    i=0
    while 2**i <= x:
        if x == 2**i:
           return True
        i += 1
    return False 
```

# ruby-on-rails-3 - 使用函数格式化活动管理表数据

> ID：13465539
> 
> 赞同：0
> 
> 时间：2012-11-20T02:00:45.187
> 
> 标签：ruby-on-rails-3, activeadmin

我有一个为活动管理员定义的资源，就像这样。我要做的就是使用 rails *number_to_phone* 函数格式化手机。但是，要么文档不清楚，要么我仍然有限的 ruby​​/rails 词汇缺乏合适的术语。

```
 ActiveAdmin.register Voter do
  menu :label => "Voters"
  index do
    column :id
    column :last_name
    column :first_name
    column :middle_name
    column :suffix
    column :address
    column :city
    column :state
    column :zip
    column :zip4
    column :phone
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:14:23.317

根据[Rails Cast #284](http://railscasts.com/episodes/284-active-admin)

```
column :phone, :phone do |voter|
      number_to_phone voter.phone
    end 
```

# php - 单击保存按钮时如何保存在多个表中？

> ID：13465544
> 
> 赞同：1
> 
> 时间：2012-11-20T02:01:24.403
> 
> 标签：php, mysql

我需要同时将动态文本框中的值保存在不同的表中。有人可以帮我这样做吗？我有 4 张桌子需要填写。这是我的表格及其字段：

**表 1** - `desk_id` - `desk_user` - `desk_report` -`desk_action`

**表** 2 - `print_id` - `print_brand` - `print_model` - `print_report` -`print_action`

**表 3** - `tel_id` - `tel_local` - `tel_user` - `tel_report` -`tel_action`

**表** 4 - `remarks_id` -`remarks`

我的PHP代码：

```
 <?php

$con = mysql_connect ("localhost","root","nasi") or die
('cannot connect to database error: '.mysql_error());

if (isset($_POST['desk_user']) &&
isset($_POST['desk_report']) &&
isset($_POST['desk_action']) &&
isset($_POST['print_brand']) &&
isset($_POST['print_model']) &&
isset($_POST['print_report']) &&
isset($_POST['print_action']) &&
isset($_POST['tel_local']) &&
isset($_POST['tel_user']) &&
isset($_POST['tel_report']) &&
isset($_POST['tel_action']) &&
isset($_POST['remarks']))
{

$desk_user = $_POST['desk_user'];
$desk_report = $_POST['desk_report'];
$desk_action = $_POST['desk_action'];
$print_brand = $_POST['print_brand'];
$print_model = $_POST['print_model'];
$print_report = $_POST['print_report'];
$print_action = $_POST['print_action'];
$tel_local = $_POST['tel_local'];
$tel_user = $_POST['tel_user'];
$tel_report = $_POST['tel_report'];
$tel_action = $_POST['tel_action'];
$remarks = $_POST['remarks'];

if (!empty($desk_user)&& !empty($desk_report)&& !empty($desk_action) && !empty($print_brand) && !empty($print_model) && !empty($print_report) && !empty($print_action) && !empty($tel_local) && !empty($tel_user) && !empty($tel_report) && !empty($tel_action) && !empty($remarks)) {

mysql_select_db("csr", $con);
 $queries = array(); 
for($i=0; $i<count($desk_user || $print_brand || $tel_local || $remarks); $i++) 
{ 
    $queries [] = "('" .$desk_user [$i ] . "', '" .$desk_report [$i ] . "', '" .$desk_action [$i ] . "')" ;

    $queries1 [] = "( '" .$print_brand [$i ] . "', '" .$print_model [$i ] . "', '" .$print_report [$i ] . "', '" .$print_action [$i ] . "')" ;

    $queries2 [] = "('" .$tel_local [$i ] . "', '" .$tel_user [$i ] . "', '" .$tel_report [$i ] . "', '" .$tel_action [$i ] . "')" ;

    $queries3 [] = "('" .$remarks [$i ] . "')" ;
} 

if(count($queries) == 0) 
{ 
    # Nothing passed 
    # exit 
} 

$query = "insert into desktoplaptop (desk_user, desk_report, desk_action tel_local) values " . implode(", ", $queries) ; 

$query1 = "insert into printer (print_brand, print_model, print_report, print_action) values " . implode(", ", $queries1) ; 

$query2 = "insert into tel (tel_user, tel_report, tel_action) values " . implode(", ", $queries2) ;  

$query3 = "insert into remarks (remarks) values " . implode(", ", $queries3) ;  

if ($sql_run = mysql_query($query) || $sql_run = mysql_query($query1) || $sql_run = mysql_query($query2) || $sql_run = mysql_query($query3)) {
                            echo 'ok.'; 
                                }
                        else {
                                    echo '*Sorry, we couldn\'t register you at this time. Try again later.';

                                    }

}

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:25:17.317

如果有四个表，则每个表都需要一个唯一的 INSERT 语句。使用您提供的代码，您只需命名一个表：**desktoplaptop**

如果上面列表中建议的实际上有四个唯一表，则需要编写一个唯一的 INSERT 语句来引用每个表的模式。

例如：

```
$queries = array();
if(!empty($desk_user)) {
    $queries[] = "INSERT into desktop (desk_user, desk_report, desk_action) VALUES ('" . $desk_user . "', '" .$desk_report . "', '" . $desk_action . "')'";
} 
```

*重复其他 3 张桌子*

```
foreach($queries as $query) {
    if ($sql_run = mysql_query($query)) {
       echo 'ok.'; 
    } else {
       echo '*Sorry, we couldn\'t register you at this time. Try again later.';
    }
} 
```

请注意，如果您从 web 表单中获取输入，您还需要[mysql_escape_string()](http://php.net/manual/en/function.mysql-escape-string.php)每个 $_POST 变量以防止注入。此外，您似乎错误地使用了 count() 函数——当它需要一个数组时，您向它传递了一个布尔表达式。总的来说，我建议再看看你的代码是如何运作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:08:58.730

做四个`INSERT`循环？

```
$query[0] = "INSERT INTO TABLE1 (...) VALUES (...)";
$query[1] = "INSERT INTO TABLE2 (...) VALUES (...)";
//etc...

foreach ($query as $x)
  {
      if ($sql_run = mysql_query($x)) {
         echo 'ok.'; 
      } else {
         echo '*Sorry, we couldn\'t register you at this time. Try again later.';
      }
  } 
```

# cakephp - 哈希::使用 HABTM 提取

> ID：13465552
> 
> 赞同：1
> 
> 时间：2012-11-20T02:02:41.867
> 
> 标签：cakephp

在处理 HABTM 时，我很难理解 Hash::extract 的语法。

我有从 find() 返回的数据，如下所示：

```
array(
    (int) 0 => array(
        'EventsGroup' => array(
            'id' => '34',
            'event_id' => '5',
            'group_id' => '1'
        )
    ),
    (int) 1 => array(
        'EventsGroup' => array(
            'id' => '29',
            'event_id' => '2',
            'group_id' => '1'
        )
    )
) 
```

我试图得到一个看起来像这样的数组：`array(x,y,z)`其中 x,y,z 是`event_id`'s.

Cake 文档的示例如下所示：

```
$users = $this->User->find("all");
$results = Hash::extract($users, '{n}.User.id'); 
```

基于此，我尝试了：

```
$eventsGroups = $this->EventsGroup->findAllByGroupId($groupid);
$secEvents = Hash::extract($eventsGroups, '{n}.{EventsGroup}.event_id' );
$secEvents2 = Hash::extract($eventsGroups, '{n}.EventsGroup.event_id' );
$secEvents3 = Hash::extract($eventsGroups, '{n}.[text=EventsGroup].event_id); 
```

这些都没有奏效。

我找到了一种不使用 Hash::extract 来获得我想要的东西的方法，但我想使用它，因为其他一些方法在以后对我有用。

任何帮助或指示将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T18:08:58.597

你有没有尝试过：

```
 $eventsGroups = $this->EventsGroup->findAllByGroupId($groupid);
 $secEvents = Hash::extract($eventsGroups, '{n}.EventsGroup[event_id]' ); 
```

正如[文档](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html#hash-path-syntax)所说，要检索字段，您应该使用匹配器而不是表达式。并且不需要括号 ({})，它们用于构建像 '{n}.{s}' 这样的表达式...

# c - 使用 make 和 #include 时遇到问题

> ID：13465553
> 
> 赞同：-1
> 
> 时间：2012-11-20T02:02:47.680
> 
> 标签：c, include, makefile

我有一个包含三个文件的项目。主文件名为 login.c。我想使用 make #include 我的其他两个文件，但我在这样做时遇到了麻烦。提前感谢您的任何建议！！

这是我的makefile：

```
objects = login.o cipher.o linked.o
coptions = -Wall -g -ggdb

loginTest: ${objects}
    gcc ${coptions} -o loginTest ${objects}
login.o: login.c cipher.h linked.h
    gcc -c ${coptions} login.c 
cipher.o: cipher.c cipher.h
    gcc -c ${coptions} cipher.c
linked.o: linked.c linked.h
    gcc -c ${coptions} linked.c 
```

我得到的错误：

```
make: *** No rule to make target `cipher.h', needed by `login.o'.  Stop. 
```

我当前工作目录中的文件：

```
cipher.c
linked.c
linked.o
login.c
makefile 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:38:27.677

make 不能自动创建 *.h。

您需要自己创建它并#include 该 *.h 文件。

# pyqt - PyQt 线程 ftp：无法对“QUrlInfo”类型的参数进行排队

> ID：13465555
> 
> 赞同：1
> 
> 时间：2012-11-20T02:03:05.907
> 
> 标签：pyqt, signals, qthread

我需要下载 ftp 目录中的所有文件。在我的程序启动时我不知道目录中的文件，所以我希望程序列出目录的内容，然后下载它找到的每个文件。

我制作了一个小演示脚本，可以从 ftp 下载文件并在执行此操作时更新进度条。下载和更新进度条工作正常，但是，我正在尝试执行下一步，即列出一些目录的内容并下载文件，但这部分不起作用。

目前，我只是想在任何目录上做一个列表并将结果打印到命令行。

当我尝试执行 listInfo.connect 时，我收到一条错误消息：

QObject::connect: 不能对“QUrlInfo”类型的参数进行排队（确保使用 qRegisterMetaType() 注册了“QUrlInfo”。）

...据我了解， qRegisterMetaType 不能在 PyQt 中完成，也是一个基本问题的标志，这就是我的问题。我可以毫无问题地执行 commandFinished.connect 和 dataTransferProgress.connect，但 listInfo.connect 似乎不起作用（如我所料）。

任何想法如何纠正这个问题？

这是一些示例代码（请原谅长度）。我希望能够从函数“lister”打印列出的文件/url。最终，我想让该函数制定新的 url 并将它们传回 connectAndDownload 以下载每个文件（当然，这需要对 connectAndDownload 进行修改，但我们还没有）。

```
#!/usr/bin/env python

from PyQt4 import QtCore, QtGui, QtNetwork

class FtpWorker(QtCore.QThread):
    dataTransferProgress = QtCore.pyqtSignal(int,int)
    def __init__(self,url,parent=None):
        super(FtpWorker,self).__init__(parent)
        self.ftp = None
        self.outFile = None
        self.get_index = -1

        self.url = url

    def run(self):
        self.connectAndDownload()
        self.exec_()

    def ftpCommandFinished(self, command_index, error):
        print "-----commandfinished-----",command_index

        if self.ftp.currentCommand == QtNetwork.QFtp.ConnectToHost:
            if error:
                QtGui.QMessageBox.information(self, "FTP",
                        "Unable to connect to the FTP server at %s. Please "
                        "check that the host name is correct.")
            return

        if self.ftp.currentCommand == QtNetwork.QFtp.Get or command_index == self.get_index:
            if error:
                print "closing outfile prematurely"
                self.outFile.close()
                self.outFile.remove()
            else:
                print "closed outfile normally"
                self.outFile.close()

            self.outFile = None

    def ftpDataTransferProgress(self,a,b):
        self.dataTransferProgress.emit(a,b)

    def lister(self,url_info):
        print url_info.name()

    def connectAndDownload(self):
        if self.ftp:
            self.ftp.abort()
            self.ftp.deleteLater()
            self.ftp = None
            return

        self.ftp = QtNetwork.QFtp()
        self.ftp.commandFinished.connect(self.ftpCommandFinished)
        self.ftp.listInfo.connect(self.lister)
        self.ftp.dataTransferProgress.connect(self.ftpDataTransferProgress)

        url = QtCore.QUrl(self.url)

        print "connect",self.ftp.connectToHost(url.host(), url.port(21))
        print "login",self.ftp.login(url.userName(), url.password())

        print "Connecting to FTP server %s..." % str(url.host())

        import os
        fileName = os.path.basename(self.url)

        if QtCore.QFile.exists(fileName):
            print "removing '%s'" % fileName
            os.unlink(fileName)

        self.outFile = QtCore.QFile(fileName)
        if not self.outFile.open(QtCore.QIODevice.WriteOnly):
            QtGui.QMessageBox.information(self, "FTP",
                    "Unable to save the file %s: %s." % (fileName, self.outFile.errorString()))
            self.outFile = None
            return

        tmp = self.ftp.list()
        print "starting list",tmp

        print "ftp.get(%s,%s)" % (str(url.path()), self.outFile)
        self.get_index = self.ftp.get(url.path(), self.outFile)

class AddProgresWin(QtGui.QWidget):
    def __init__(self, parent=None):
        super(AddProgresWin, self).__init__(parent)

        self.thread = FtpWorker(url="ftp://ftp.qt.nokia.com/developerguides/qteffects/screenshot.png")

        self.thread.dataTransferProgress.connect(self.updateDataTransferProgress)

        self.nameLabel = QtGui.QLabel("0.0%")
        self.nameLine = QtGui.QLineEdit()

        self.progressbar = QtGui.QProgressBar()

        mainLayout = QtGui.QGridLayout()
        mainLayout.addWidget(self.progressbar, 0, 0)
        mainLayout.addWidget(self.nameLabel, 0, 1)

        self.setLayout(mainLayout)
        self.setWindowTitle("Processing")

        self.thread.start()

    def updateDataTransferProgress(self, readBytes, totalBytes):
        self.progressbar.setMaximum(totalBytes)
        self.progressbar.setValue(readBytes)
        perct = "%2.1f%%" % (float(readBytes)/float(totalBytes)*100.0)
        self.nameLabel.setText(perct)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.path)

    pbarwin = AddProgresWin()
    pbarwin.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:48:30.977

看来这是一个 Qt 错误。来自 Phil Thompson，“可以说这是一个 Qt 错误 - 它应该为信号参数中使用的任何类型调用 qRegisterMetaType() 本身。”

我还注意到，为此目的，不需要线程，因为 QFtp 是异步的并且带有自己的信号。我在主线程中重新实现了 ftp.list() （以及相关的信号处理），一切都很好。

# c++ - 额外资格成员 GCC

> ID：13465558
> 
> 赞同：3
> 
> 时间：2012-11-20T02:03:27.463
> 
> 标签：c++, gcc, compiler-errors

我知道这个问题的常见答案，但由于某种原因，当我在 Code::Blocks 上使用正确的语法时出现错误，我将发布一个示例以表明我没有虚张声势：

```
 class BulletPlacer : sf::Drawable
  {
     public:
        BulletPlacer();
        BulletPlacer(const unsigned Quantity);

        ~BulletPlacer();
  }; 
```

那只是 hpp 文件的一小部分。

```
 BulletPlacer::BulletPlacer()
     :Amount(0), Min(0)
   {}

   BulletPlacer::BulletPlacer(const unsigned Quantity)
     :Amount(Quantity), Min(0)
   {
       Bullet shot;
       ShotVec.reserve(Amount);
       for(unsigned i = 0; i < Amount; ++i)
       { ShotVec.push_back(shot); }
   }

   BulletPlacer::~BulletPlacer() { PolVecV.clear(); ShotVec.clear(); } 
```

那就是cpp。它编译得很好，直到我开始重构类并且我得到所有方法的错误。我还遇到了其他根本不存在的错误，并且我使用类中的所有功能得到了它们。我什至重新下载了一个 GCC 版本，却发现它给了我完全相同的结果。

这是错误日志的简化版本：

```
error: extra qualification 'BulletPlacer::' on member 'BulletPlacer' [-fpermissive]|
error: 'BulletPlacer::BulletPlacer()' cannot be overloaded|
error: with 'BulletPlacer::BulletPlacer()'| 
```

它在所有功能中都像这样重复。这很烦人，因为我的 SFML 游戏就因为这个而根本无法前进，并且仅仅因为编译器对我生气而检查 300 行文件是否有可能的错误一点也不好玩。不，“BulletPlacer”使用的文件都没有得到这个。

更糟的是，一个完全不相关的类也会得到类似的东西：

```
error: cannot define member function 'BulletPlacer::Enemy::Enemy' within 'BulletPlacer' 
```

当该类甚至不包含该文件时...

我正在使用 GCC 4.7.1

提前感谢我可能得到的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:21:24.030

这些错误意味着编译器认为这些定义是在类定义中的词法上找到的，这意味着缺少`};`或类似的东西。

从提供的信息中我只能说这些。

# c# - “基于图像的光”HLSL

> ID：13465559
> 
> 赞同：1
> 
> 时间：2012-11-20T02:03:34.617
> 
> 标签：c#, .net, xna-4.0, hlsl

我在 HLSL 中有一个代码，旨在模拟 IBL（基于图像的光[http://en.wikipedia.org/wiki/Image-based_lighting](http://en.wikipedia.org/wiki/Image-based_lighting)）。为了模拟 IBL，需要从对象周围的“世界”中获得纹理，我想通过对象的位置动态生成纹理。我有两个问题：

• 如何在物体周围生成360 度的世界纹理？我需要 6 个各 45 度的摄像头，或者只用一个可以做到这一点？

• 我已经知道如何使用“sampleCUBE”映射立方体纹理，但是我在 6 面有相同的图像，如何让每面都有自己的纹理？

[http://i.stack.imgur.com/Iz6RZ.png](http://i.stack.imgur.com/Iz6RZ.png)

IBL 出现在 Forza 4 和 Crysys 2 等游戏中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T16:06:57.993

您可能需要 6 次渲染（如果您设置了巨大的 FOV，可能需要 2 次或 4 次，但它会导致失真并且更难使用），或者如果您可以使用立方体贴图作为渲染目标或使用某种类型，您可以单程渲染它渲染到球形地图**[链接](https://stackoverflow.com/questions/3379650/gpu-render-onto-sphere)**如果没有完整的图片，您将没有足够的数据来处理。但这些渲染可能包括非常基本的着色器和低分辨率输出。此外，您不需要每帧刷新它们，而是可以稍微移动纹理，每 5 帧刷新近物体，每 10 帧刷新远物体。最重要的是，您只需要在可见部分上使用“基于图像的光”，因此您最多只能使用 3 遍而不是 6 遍。

# python - 比较 Python 字典的方法因某些值类型而失败？

> ID：13465562
> 
> 赞同：3
> 
> 时间：2012-11-20T02:03:58.097
> 
> 标签：python, dictionary, set

我想不通。我有两个相同的字典。我使用标准方法来确定差异，应该没有差异。但是某些值类型总是作为差异返回，即使它们不是。例如，如果值为 a `pymongo.bson.ObjectId`，则该方法无法将其评估为相同。

```
d1 = {'Name':'foo','ref1':ObjectId('502e232ca7919d27990001e4')}

d2 = {'Name':'foo','ref1':ObjectId('502e232ca7919d27990001e4')}

d1 == d2 
```

返回：

```
True 
```

但：

```
set((k,d1[k]) for k in set(d1) & set(d2) if d1[k] != d2[k]) 
```

返回：

```
set([('ref1',Objectid('502e232ca7919d27990001e4'))]) 
```

所以我发现这很奇怪，不是吗？

```
d1['ref1'] == d2['ref1']  # True

d1['ref1'] != d2['ref1']  # False 
```

什么?????!?!??!!?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:41:08.680

`ObjectId('502e232ca7919d27990001e4')`创建一个新对象并默认`!=`比较引用。尝试例如：

```
class Obj:
    def __init__(self, value):
        self.value = value

print Obj(1234) == Obj(1234) # False 
```

这将评估为假，因为它们是不同的实例，即使它们具有相同的值。为了使这项工作，该类必须实现**eq**方法：

```
class Obj:
    def __init__(self, value):
        self.value = value

    def __eq__(self, other):
        return self.value == other.value

print Obj(1234) == Obj(1234) # True 
```

要解决此问题，您可以“猴子补丁”类：

```
class Obj:
    def __init__(self, value):
        self.value = value

print Obj(1234) == Obj(1234) # False

Obj.__eq__ = lambda a, b: a.value == b.value

print Obj(1234) == Obj(1234) # True 
```

或者直接通过它们的值来比较它们。

```
print Obj(1234).value == Obj(1234).value 
```

尽可能比较这些值，因为猴子补丁可能会破坏看似无关的代码。

# c - C 中带有变量的矩阵

> ID：13465564
> 
> 赞同：2
> 
> 时间：2012-11-20T02:04:08.027
> 
> 标签：c, arrays, multidimensional-array, matrix

我将用伪代码编写以使我的问题更清楚。请记住，此代码将在 C 中完成。

想象一下，我有一个任意数量的数字数组。第一个数字告诉我我们正在处理的数组有多大。例如，如果我的第一个数字是 3，这意味着我有两个 3x3 矩阵。所以我创建了两个多维数组：

```
matrix1[3][3]
matrix2[3][3] 
```

我遇到的困难是将所有数字分配给矩阵的算术/编码，我很难想象它是如何完成的。

想象一个测试数组包含 [2,1,2,3,4,5,6,7,8]

我的程序现在应该有两个矩阵：

```
1 2    5 6
3 4    7 8 
```

我需要几个嵌套循环吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:13:22.540

目前我得到的唯一想法是使用两个`for loops`. 或者您可以创建一个函数并在每次需要时调用它（但不要忘记`k`用作第二个参数）。

```
int i, j, k;

/* We start in the 2nd element of the array that's why k = 1\. */
k = 1;

/* Now we fill the array1 copying 1 by 1 the elements of the "test array" until
   we fill it. Then we do the same with the array2\. */
for( i = 0; i < test[ 0 ]; i++ ){
   for( j = 0; j < test[ 0 ]; j++ ){
       array1[ i ][ j ] = test[ k ]
       k++;
   }
}

for( i = 0; i < test[ 0 ]; i++ ){
   for( j = 0; j < test[ 0 ]; j++ ){
       array2[ i ][ j ] = test[ k ]
       k++;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T03:20:05.380

您的数据以行优先顺序显示。在读取您的整数数组并验证内容后（即 dim=4 表示后面有 32 个值，dim=2 表示后面有 8 个值等）我不确定您为什么要分配或循环*任何内容*。

即**您可以使用您的物理测试[] 数据作为矩阵**：

```
int dim = test[0];
int (*mat1)[dim] = (int (*)[dim])(test+1);
int (*mat2)[dim] = (int (*)[dim])(test+1 + dim*dim); 
```

C99 在实现级别支持变量数组声明（即编译器可以支持标准定义的特性，但不是*必须*的；有关更多信息，请参见 C99 标准的 6.7.6.2）。如果您的工具链*不*支持它，则*必须*定义一个预定义的宏，并且可以在编译时进行测试（参见 C99 标准的第 6.10.8.3-1 节）。话虽如此，我在过去十多年中使用过的每一个符合 C99 的编译器都*支持*它，所以如果你的不支持，请在下面的评论中告诉我们。**`__STDC_NO_VLA__`**

 **如果是这样，请注意在`mat1`及`mat2`以上声明中使用“dim”）。它是 CI 中为数不多的 C++ 所没有的特性之一。所以和你带来的那个跳舞吧。

最后，假设您的编译器符合 C99 并支持 VLA（**`__STDC_NO_VLA__`**未定义），作为额外的超级特殊奖励，几乎可以保证它是获得两个矩阵的最快算法，因为*没有算法*。您读取一个数组元素，然后分配两个指针。O(3) 很难被击败。

**例子**

```
#include <stdlib.h>
#include <stdio.h>

// main loader.
int main(int argc, char *argv[])
{
    int test[] = {2,1,2,3,4,5,6,7,8};
    int dim = test[0];
    int (*mat1)[dim] = (int (*)[dim])(test+1);
    int (*mat2)[dim] = (int (*)[dim])(test+1 + dim*dim);

    // proof stuff is where it should be.
    int i=0,j=0;
    for (i=0;i<dim;i++)
    {
        for (j=0;j<dim;printf("%d ", mat1[i][j++]));
        printf ("   ");
        for (j=0;j<dim;printf("%d ", mat2[i][j++]));
        printf("\n");
    }

    return EXIT_SUCCESS;
} 
```

**输出**

```
1 2    5 6 
3 4    7 8 
```

使用 3x3 数据集的类似测试：

```
int test[] = {3,1,2,3,4,5,6,7,8,9,9,8,7,6,5,4,3,2,1}; 
```

**输出**

```
1 2 3    9 8 7 
4 5 6    6 5 4 
7 8 9    3 2 1 
```

最后，一个 4x4 数据集：

```
int test[] = {4,1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8,8,7,6,5,4,3,2,1,8,7,6,5,4,3,2,1}; 
```

**输出**

```
1 2 3 4    8 7 6 5 
5 6 7 8    4 3 2 1 
1 2 3 4    8 7 6 5 
5 6 7 8    4 3 2 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T02:19:16.983

C中多维数组的问题是您需要提前（在编译时）知道n-1的维度大小，当用作函数参数时它们也是一个拖累。

有几种替代方法：

1.  创建数组数组。即分配一个数组指针数组，然后将数组分配给这些指针。

    type **array = malloc(sizeof(type * ) * < firstnumread > );
    数组[0] = malloc(sizeof(type) * < firstnumread > );
    ...

2.  分配具有所有相乘维度大小的单维数组。IE

    类型 *array = malloc(sizeof(type) * < firstnumread > * < firstnumread >);

在您的情况下，第二个可能更合适。就像是：

```
matrix1 = malloc(sizeof(type)*<firstnumread>*<firstnumread>);  
matrix2 = malloc(sizeof(type)*<firstnumread>*<firstnumread>); 
```

然后你可以像这样分配值：

```
matrix1[column*<firstnumread> + row] = <value>; 
```

是的，有 2 个`for`循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T02:29:58.433

二维数组存储在矩阵的连续线系列中。所以你甚至不需要分配新的内存就可以使用你的原始数组。无论如何，您也可以创建 2 个新的独立阵列。您可以像这样创建一个函数，以获取正确的矩阵编号。

```
int getNumber(int array[], int arraynumber, int index_x, int index_y)
{
   return array[(((array[0]*index_x)+index_y)+1)+((array[0]*array[0])*arraynumber)];
} 
```

arraynumber 变量对于第一个矩阵是 0，对于第二个矩阵是 1。这个功能只有在所有参数都正确的情况下才起作用，所以没有错误检测。
使用此函数，您可以轻松循环并创建 2 个新数组：

```
int i,k;
for (i=0; i<array[0]; i++)
{
   for (k=0; k<array[0]; k++)
   {
      newarray1[i][k] = getNumber(array, 0, i,k);
      newarray2[i][k] = getNumber(array, 1, i,k);
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T02:32:09.703

这是在单个循环中工作的东西；没有巢也没有重复。我不知道它是否会胜过其他答案，但我只是想给你一个不同的答案^_^

**我没有测试过这段代码**，但看起来算法的逻辑是有效的——这就是重点，对吧？让我知道它是否有任何错误......

```
int c=0, x=0, y=0, size=test[0], length=sizeof(test);

for(i=1; i<length; i++) {
    if((c-size)<0) {
        matrix1[x][y] = test[i];
    } else {
        matrix2[x][y] = test[i];
    }
    ++y;
    if(y%size == 0) {
        ++c;
        y = 0;
        x = (c-size)<0 ? ++x : 0;
    }
} 
```**

# nginx - 如何通过配置 nginx.conf wa proxy_pass 使用 Nginx 作为博客的反向代理

> ID：13465566
> 
> 赞同：4
> 
> 时间：2012-11-20T02:04:31.770
> 
> 标签：nginx, reverse-proxy

我正在努力让我的网站 mysite.com/blog 显示我的 tumblr 博客，而不需要 tumblr URL。

我正在使用 NGINX 并由 nginx.conf 更新，内容如下：

```
location /blog {
  proxy_set_header  X-Real-IP  $remote_addr;
  proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header Host $http_host;
  proxy_redirect off;

  gzip on;
  gzip_min_length  1100;
  gzip_buffers     4 8k;
  gzip_proxied any;
  gzip_types  text/plain text/html text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript;

  if (!-f $request_filename) {
    rewrite ^/blog$     /;
    rewrite ^/blog/(.*)$ /$1;
    proxy_pass http://denise-puchol.tumblr.com/;
    break;
  }
} 
```

这是失败的，没有错误消息。有什么想法我在这里做错了吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T19:12:02.390

[这个 nginx 要点](https://gist.github.com/anonymous/887026)可能有助于为您的 Tumblr 博客建立反向代理。为了 SEO 目的，[绝对值得为您的博客创建子文件夹而不是子域。](http://www.seomoz.org/blog/what-is-a-reverse-proxy-and-how-can-it-help-my-seo)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-20T02:13:53.727

仅使用自定义域名怎么样： [http](http://www.tumblr.com/docs/en/custom_domains) ://www.tumblr.com/docs/en/custom_domains ？

您可能需要将您的 url 方案更改为 blog.mysite.com，但它的巨大优势是流量直接流向 tumblr 的服务器，而不是通过您的服务器代理。如果您的博客收到大量流量，您的服务器可能会不堪重负。此外，攻击者可能会滥用您的代理对 tumblr 发起攻击，然后这些攻击似乎来自您的服务器。

# database - 使用 codeigniter 项目在实时服务器上遇到数据库问题

> ID：13465570
> 
> 赞同：0
> 
> 时间：2012-11-20T02:04:50.247
> 
> 标签：database, codeigniter

我正在使用 codeigniter 开发一个项目。我完成了登录和注册编码，并在我的本地计算机上正常工作。但是当我将文件上传到实时服务器时，它会给我以下错误

```
A Database Error Occurred

Unable to select the specified database: zafarsal_membership

Filename: core/Loader.php

Line Number: 346 
```

在 database.php 中，我添加了正确的信息。zafarsal_membership 数据库确实存在，但它仍然给我这个错误。你能帮我我在哪里犯错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T16:08:29.670

我遇到了同样的错误...只需更改 $db['default']['dbdriver'] = 'mysql'; 到 $db['default']['dbdriver'] = 'mysqli'; [以下是“mysql”和“mysqli”之间的区别：](http://rudiv.se/Article/tutorials/when-to-use-mysql-vs-mysqli-vs-pdo-in-php) 希望对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:10:53.703

以下是常见的嫌疑人：

*   数据库用户是否具有对数据库的读/写访问权限？
*   您是否选择了正确的数据库驱动程序？
*   您与数据库的连接是否成功？
*   您是否在本地和您的服务器上运行相同版本的数据库服务器？

在 90% 的情况下，它是上述情况之一。

# javascript - 无法执行“GET”xmlhttrequest - 错误

> ID：13465579
> 
> 赞同：1
> 
> 时间：2012-11-20T02:06:42.040
> 
> 标签：javascript, xml, get, xmlhttprequest, onreadystatechange

```
 function regist(nome,pwd){
        URL+="register?nick=" + nome + "&key=" + pwd;
        var req = new XMLHttpRequest();
        req.open("get", URL, true);//Assincrono

        req.onreadystatechange = function(){
            if (req.readyState != 4) { 
                return;
            }
            else if (req.status != 200) {// Tratamento de erro (e.g., mostrar mensagem de erro)
                return;
            }
            var data=JSON.parse(req.responseText);
                    alert(data);
            if(data.error==null || data.error==undefined){
                    document.getElementById("register").innerHTML="Registo Bem Sucedido";
                }
                else{
                    document.getElementById("register").innerHTML="Utilizador já registado - Password errada";
                }
        };
        req.send();
    }; 
```

我无法访问 var 数据。可能是因为“*req.onreadystatechange = function(){-----” 发生了什么？我的数据警报不起作用，它没有被读取..你能帮我吗？>正确定义了 URL，别担心；）

* * *

我对同源策略问题一无所知... GET 中使用的 URL 是：dcc.fc.up.pt:8080/TabuWeb/rest/register?nick=ola&key=mundo 我的页面 URL：file:// /home/carlos/public_html/TabuWeb2/WebContent/index.html?nick=ola&key=mund‌​o

同源策略有什么问题吗？这就是为什么我的 req.status=0 和 firebug 指向 req.send()？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:15:30.353

它不工作的原因可能有很多，而且很难从 ajax 调用中分辨出来。

首先，要查看您应该使用的数据：

```
alert(JSON.stringify(data)); 
```

或者直接检查ajax是否返回有效的json：

```
alert(req.responseText); 
```

data 是一个对象，所以`alert(data)`不会显示太多。

另外，您的网址与当前页面是否在同一个域中？如果没有，您可能会成为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的受害者。

# apache2 - fpm-php 不会在 apache2 上启用

> ID：13465586
> 
> 赞同：2
> 
> 时间：2012-11-20T02:07:29.053
> 
> 标签：apache2, php

我已经安装了 apache 和 php5，想切换到 fpm-php。我执行了以下步骤，我的 phpinfo() 仍然显示服务器 API 是 Apache 2.0 处理程序！我正在运行 ubuntu 12.04 有人可以帮我吗

安装步骤；

1.  apt-get 安装 libapache2-mod-fastcgi php5-fpm php5
2.  a2enmod 动作 fastcgi 别名
3.  服务 apache2 重启
4.  编辑 etc/apache2/conf.d/php5-fpm.conf

    `AddHandler php5-fcgi .php Action php5-fcgi /php5-fcgi Alias /php5-fcgi /usr/lib/cgi-bin/php5-fcgi FastCgiExternalServer /usr/lib/cgi-bin/php5-fcgi -socket /tmp/php5-fpm.sock -pass-header Authorization`

5.  编辑/etc/php5/fpm/pool.d/www.conf

    `listen = /tmp/php5-fpm.sock`

6.  服务 php5-fpm 重新启动 服务 apache2 重新启动

我试过了

```
<IfModule mod_fastcgi.c>
   AddHandler php5-fcgi .php
   Action php5-fcgi /php5-fcgi
   Alias /php5-fcgi /usr/lib/cgi-bin/php5-fcgi
   FastCgiExternalServer /usr/lib/cgi-bin/php5-fcgi -host 127.0.0.1:9000 -pass-header Authorization
</IfModule>` 
```

和

```
listen = 127.0.0.1:9000 
```

没运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:49:44.687

这可能对你有一些帮助。这是我设置 Apache w/FPM 支持的工作配置。

[https://gist.github.com/3849349](https://gist.github.com/3849349)

我当前的设置是使用 Apache 2.4.x。要使其与 Apache 2.2 一起使用，只需对 Apache 配置本身进行少量更改。但是，所有 FPM 设置都适用于任一版本。

如果您想进行对话，您总能在 FreeNode IRC 频道#php-fpm 中找到我作为 Diemuzi

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-21T10:09:22.500

感谢@John Hamman，我通过运行解决了它：

```
a2dismod php5
service apache2 restart 
```

干杯伙计们..终于

# wordpress - Wordpress 类别模板显示来自所有类别的帖子，而不是特定类别的帖子

> ID：13465587
> 
> 赞同：0
> 
> 时间：2012-11-20T02:07:34.930
> 
> 标签：wordpress

我有一个存档页面，它设置为显示特定类别的帖子。但是，它不是在类别页面上仅显示给定类别的帖子，而是显示所有帖子。例如，请参见[此处](http://magazine.inspirato.com/category/escapes-adventures)。

这是我在archive.php 页面上使用的代码。我知道这是循环使用不当，但我不知道如何修复它。谢谢您的帮助。

```
<?php get_header(); ?>
    <div id="content">
        <div id="inner-content" class="wrap clearfix">
            <h1 class="blogTitle" style="margin:10px 0 3px 0;">Blog Title</h1>
                <nav class="blogNav" role="navigation">
                    <?php bones_blog_nav(); // Adjust using Menus in Wordpress Admin ?>
                </nav>
                <div id="main" class="eightcol first clearfix" role="main">
                    <div class="catwhiteBg">
                        <?php if (is_category()) { ?>
                        <h1 class="catTitle">
                            <span><?php _e("", "bonestheme"); ?></span> <?php single_cat_title(); ?>
                        </h1>
                        <?php echo category_description( $category_id ); ?>

                        <?php } elseif (is_author()) { ?>
                            <div class="authorTop">
                                <?php
                                $curauth = (get_query_var('author_name')) ? get_user_by('slug', get_query_var('author_name')) : get_userdata(get_query_var('author'));
                                ?>
                                <div class="author-pic"><?php echo get_avatar( $curauth->user_email, '80' ); ?></div>
                                <div class="author-name"><span style="font-weight: 200; color: #575757;">POSTS BY:</span>
                                        <?php echo $curauth->first_name; ?> <?php echo $curauth->last_name; ?>
                                </div>
                                <div class="author-bio"><?php echo $curauth->description; ?></div>
                                <a href="<?php echo $curauth->twitter; ?>" title="Twitter"><div class="author-twitter"><span>twitter</span></div></a>
                            </div>

                        <?php } elseif (is_day()) { ?>
                            <h1 class="archive-title h2">
                                <span><?php _e("Daily Archives:", "bonestheme"); ?></span> <?php the_time('l, F j, Y'); ?>
                            </h1>

                        <?php } elseif (is_month()) { ?>
                            <h1 class="archive-title h2">
                                <span><?php _e("Monthly Archives:", "bonestheme"); ?></span> <?php the_time('F Y'); ?>
                            </h1>

                        <?php } elseif (is_year()) { ?>
                            <h1 class="archive-title h2">
                                <span><?php _e("Yearly Archives:", "bonestheme"); ?></span> <?php the_time('Y'); ?>
                            </h1>
                        <?php } ?>
                    </div>

                    <div class="psts">  
                        <?php
                        global $wp_query;

                        $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;

                        if ( get_query_var('paged') ) {

                        $paged = get_query_var('paged');

                        } elseif ( get_query_var('page') ) {

                        $paged = get_query_var('page');

                        } else {

                        $paged = 1;

                        }

                        query_posts(array('posts_per_page' => '8','paged'=>$paged));
                        ?>

                        <?php 
                        $count = 1;

                        while (have_posts()) : the_post(); ?>

                        <div class="sixcol small pst<?php if ((isset($count)) && ($count % 2 == 0 )) { echo ' last';} // same logic to add class of last to last item in row of two ?>" id="post-<?php the_ID(); ?>">
                            <article id="post-<?php the_ID(); ?>" role="article">
                                <div class="thumb-wrapper mobile">
                                    <a href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><?php if(has_post_thumbnail()) { $image_src = wp_get_attachment_image_src( get_post_thumbnail_id(),'post-thumb' ); echo '<img src="' . $image_src[0] . '" width="100%" class="post-thumb" />'; } ?></a>

                                    <header class="post-thumb-header">
                                        <a href="<?php the_permalink() ?>" title="<?php the_title(); ?>"><h2 class="post-title"><?php the_title(); ?></h2></a>
                                    </header> <!-- end article header -->
                                    <p class="meta"><?php the_category(', '); ?></p>
                                </div>

                                <section class="mobile-content">
                                    <?php the_excerpt(); ?>
                                </section>
                            </article> <!-- end article -->
                        </div>

                        <?php $count++; ?>

                        <?php endwhile; ?>

                        <nav class="wp-prev-next">
                            <?php echo rb_pagination(); ?>
                        </nav>
                    </div> <!-- end .psts -->                                           
                </div> <!-- end #main -->

            <?php get_sidebar(); // sidebar 1 ?>

        </div> <!-- end #inner-content -->

    </div> <!-- end #content -->

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:30:22.680

我认为您正在用这一行覆盖原始查询：

```
query_posts(array('posts_per_page' => '8','paged'=>$paged)); 
```

你能把这条线换成这条线，让我知道结果吗？

```
global $query_string;
query_posts( $query_string . "&posts_per_page=8&paged=$paged" ); 
```

如果失败，试试这个：

```
query_posts(array('posts_per_page' => '8','paged'=>$paged, 'cat' => $category_id )); 
```

# jquery - jQuery动画不精确

> ID：13465588
> 
> 赞同：0
> 
> 时间：2012-11-20T02:07:37.857
> 
> 标签：jquery, jquery-animate, slider

我构建了使用 jQuery 动画的滑块。幻灯片应向左和向右移动。有时动画不精确 1 像素。假设它应该从左边滑到 0 像素，但它停在 1 像素。至少在谷歌浏览器中我遇到了这个问题。为什么会这样，我该如何预防？

这是功能：

```
var faces_width = 414;

function facebox_next (id) {
    var index = parseInt($(id).attr("index"));
    index++;
    if(index <= $(id).children("img").size()-1) {
        $(id).attr("index",index);
        $(id).animate({
            "left":-faces_width*index
        },300);
        //$(id).css("left",-faces_width*index);
    }
}

function facebox_prev (id) {
    var index = parseInt($(id).attr("index"));
    index--;
    if(index >= 0) {
        $(id).attr("index",index);
        $(id).animate({
            "left":-faces_width*index
        },300);
        //$(id).css("left",-faces_width*index);
    }
} 
```

小提琴：http: [//jsfiddle.net/vXYdu/](http://jsfiddle.net/vXYdu/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:00:06.087

我只是将`facechanger`div 更改为小 1px 的宽度，这为我解决了问题

```
div#facechanger {position:relative; height:542px; margin:32px 0;width:540px} 
```

# windows-phone-7 - WP7 如何使用 MediaPlayerLauncher 与库中的歌曲

> ID：13465592
> 
> 赞同：1
> 
> 时间：2012-11-20T02:07:42.353
> 
> 标签：windows-phone-7, media-player, launcher

[这篇文章](http://www.windowsphonegeek.com/articles/5-how-to-use-mediaplayerlauncher-in-a-wp7-app)说

> MediaPlayerLauncher 启动媒体播放器应用程序并播放指定的媒体文件。媒体文件存储在独立存储或应用程序的安装目录中。

但是，我想从库中选择某个专辑中的歌曲（使用`MediaLibrary`）并启动默认的媒体播放器来播放它。这该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T21:59:56.293

基本上你不能用当前的 API 做到这一点。

MediaPlayerLauncher 采用 [MediaLocationType](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.tasks.medialocationtype%28v=vs.105%29.aspx "MediaLocationType 枚举")类型的参数，从[文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394004%28v=vs.105%29.aspx "如何使用 Windows Phone 的媒体播放器启动器")中我们可以看到没有访问媒体库的选项

> 将 MediaLocationType.Data 用于存储在隔离存储中的媒体文件。将 MediaLocationType.Install 用于作为应用程序项目一部分的媒体文件。它们捆绑在 .xap 文件中并存储在应用程序的安装目录中。

我为此功能创建了一个[UserVoice请求。](http://windowsphone.uservoice.com/forums/101801-feature-suggestions/suggestions/3721632-mediaplayerlauncher-for-media-library)希望如果有足够多的人投票支持，我们将在下一次更新中获得它。

# php - file_get_contents 搞砸了网页

> ID：13465594
> 
> 赞同：0
> 
> 时间：2012-11-20T02:08:08.523
> 
> 标签：php, curl, proxy, file-get-contents

我已经配置了一个简单的 php 代理文件：

```
 echo file_get_contents($_GET['url']); 
```

它似乎适用于大多数页面（cnn.com、foxnews.com、twitter、facebook ...），但由于某种原因，它完全搞砸了其他页面，足以比较[www.index.hr](http://www.index.hr)和[http://phppetar。 heliohost.org/proxy.php?url=http://www.index.hr](http://phppetar.heliohost.org/proxy.php?url=http://www.index.hr)知道我的意思...

我还注意到 google.com 的徽标图像不起作用

有谁知道可能是什么问题？

PS我试过卷曲但结果相同..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T17:13:23.003

您可以添加`<base>`html 标记，以便从原始站点获取所有相对 URL。另一方面，他们会在他们的日志中看到您在推荐人字段中的 URL，但我不确定这对您是否重要。

# java - final int 和 final static int 的区别

> ID：13465600
> 
> 赞同：2
> 
> 时间：2012-11-20T02:09:25.097
> 
> 标签：java

> **可能重复：**
> [java：使用最终静态 int = 1 是否比普通 1 更好？](https://stackoverflow.com/questions/2070669/java-is-using-a-final-static-int-1-better-than-just-a-normal-1)

好吧，我想知道之间有什么区别： final int a=10; 和最终静态int a = 10；当它们是类的成员变量时，它们都具有相同的值，并且在执行期间不能随时更改。除了静态变量由所有对象共享并且在非静态变量的情况下创建副本之外，还有其他区别吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T02:11:35.930

如果在声明变量时对其进行初始化，则没有*实际区别。*

如果变量是在构造函数中初始化的，那么会有很大的不同。

请参见下面的示例：

```
/** 
 *  If you do this, it will make almost no 
 *  difference whether someInt is static or 
 *  not.
 *
 *  This is because the value of someInt is
 *  set immediately (not in a constructor).
 */

class Foo {
    private final int someInt = 4;
}

/**
 *  If you initialize someInt in a constructor,
 *  it makes a big difference.  
 *
 *  Every instance of Foo can now have its own 
 *  value for someInt. This value can only be
 *  set from a constructor.  This would not be 
 *  possible if someInt is static.
 */

class Foo {
    private final int someInt;

    public Foo() {
        someInt = 0;
    }

    public Foo(int n) {
        someInt = n;
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T02:12:07.427

静态变量可以通过类定义之外的点分隔符访问。因此，如果您有一个名为 myClass 的类，并且在其中您有 static int x = 5; 然后你可以用 myClass.x 来引用它；

final 关键字意味着在定义 x 之后，您不能更改它的值。如果您尝试这样做，编译器将停止并出现错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T02:33:33.350

我要指出的是，静态修饰符只能用于明确的需求，而 final 只能用于常量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-20T02:11:50.580

作为`static`变量，您不需要类的实例来访问该值。唯一的其他区别是该`static`字段未序列化（如果类是可序列化的）。也有可能编译代码中对它的所有引用都被优化掉了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-20T02:25:07.197

`int`如果您只使用s ，则差异不会出现。然而，作为一个例子，它是如何不同的：

```
class PrintsSomething {
   PrintsSomething(String msg) {
       System.out.println(msg);
   }
}

class Foo {
    public static final PrintsSomething myStaticObject = new PrintsSomething("this is static");
    public final PrintsSomething myLocalObject = new PrintsSomething("this is not");
} 
```

当我们运行这个：

```
new Foo();
new Foo(); 
```

...输出是这样的：

```
this is static
this is not
this is not 
```

# objective-c - 是否可以在实例化对象之前检查故事板中是否存在标识符？

> ID：13465602
> 
> 赞同：16
> 
> 时间：2012-11-20T02:09:32.530
> 
> 标签：objective-c, ios, cocoa-touch, uistoryboard

在我的代码中，我有这一行，但我想知道是否有办法在将*@"SomeController"与“* *instanceViewControllerWithIdentifier* ”方法一起使用之前检查它是否存在。如果标识符不存在，则应用程序崩溃。

如果没有好的方法，这不是一个大问题，我可以更加小心，不要让标识符名称变胖，但我希望我能更优雅地处理它。

```
UIViewController *newTopViewController = [self.storyboard    instantiateViewControllerWithIdentifier:@"SomeController"]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-27T07:24:51.303

正如汤姆所说，这个问题的最佳解决方案是 try-catch 块：

```
@try {
        UIViewController *newViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"identifier"];

    }
    @catch (NSException *exception) {
        UIAlertView *catchView;

        catchView = [[UIAlertView alloc]
                     initWithTitle: NSLocalizedString(@"Error", @"Error")
                     message: NSLocalizedString(@"Identifier not found on SB".", @"Error")
                     delegate: self
                     cancelButtonTitle: NSLocalizedString(@"OK", @"Error") otherButtonTitles: nil];

        [catchView show];
    } 
```

我希望它有帮助！即使答案真的很晚。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-07T08:34:33.800

你可以`valueForKey:`在`UIStoryboard`s 上使用。`UIStoryboard`s 有一个名为“identifierToNibNameMap”的键，它的值是那个故事板`NSDictionary`中的`UIViewController`s。此内部`NSDictionary`使用视图控制器的名称作为键，因此您可以使用以下代码实际检查情节提要中是否存在视图控制器：

```
if ([[storyboard valueForKey:@"identifierToNibNameMap"] objectForKey:myViewControllerName]) {
    // the view controller exists, instantiate it here
    UIViewController* myViewController = [storyboard instantiateViewControllerWithIdentifier:myViewControllerName];
} else {
    //the view controller doesn't exist, do fallback here
} 
```

**注意：**众所周知，Apple 会拒绝使用`valueForKey:`. 这些基础属性可能会在未来的任何时候发生变化，从而在没有警告的情况下破坏应用程序的功能。这些东西没有弃用过程。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-24T20:30:15.770

@Kevin 的解决方案有效。这是我在代码中使用的 Swift 3 的一段与函数完全相同的代码：

```
func instantiateViewController(fromStoryboardName storyboardName: String, withIdentifier identifier: String) -> UIViewController? {
    let mainStoryboard = UIStoryboard(name: storyboardName, bundle: nil)
    if let availableIdentifiers = mainStoryboard.value(forKey: "identifierToNibNameMap") as? [String: Any] {
        if availableIdentifiers[identifier] != nil {
            if let poiInformationViewController = mainStoryboard.instantiateViewController(withIdentifier: identifier) as? UIViewController {
                return viewController
            }
        }
    }
    return nil
} 
```

使用此功能如下：

```
if let viewController = self.instantiateViewController(fromStoryboardName: "YourStoryboardName", withIdentifier: "YourViewControllerStoryboardID") {
    // Here you are sure your viewController is available in the Storyboard
} else {
    print("Error: The Storyboard with the name YourStoryboardName or the Storyboard identifier YourViewControllerStoryboardID is not available")
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-20T02:23:25.130

不，没有检查。但是，您不需要这样做。`nil`如果标识符不存在，此方法将返回，因此只需使用`NSAssert`.

**编辑**实际上这是错误的！这很奇怪......文档的返回值部分与另一部分相矛盾......但答案最终是否定的（没有方法来检查标识符是否存在）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T22:06:59.450

您可以使用 try-catch 异常处理来包装代码，并决定在发生此类异常时如何做出反应。我使用这种方法来动态实例化视图控制器，而不必知道它们是在 Storyboard 中还是在 nib 文件中表示的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-15T09:04:32.837

**斯威夫特 4.2。**

在下面声明一个扩展。

```
extension UIStoryboard {
    func instantiateVC(withIdentifier identifier: String) -> UIViewController? {
        // "identifierToNibNameMap" – dont change it. It is a key for searching IDs 
        if let identifiersList = self.value(forKey: "identifierToNibNameMap") as? [String: Any] {
            if identifiersList[identifier] != nil {
                return self.instantiateViewController(withIdentifier: identifier)
            }
        }
        return nil
    }
} 
```

* * *

在任何地方使用这样的方法：

```
if let viewController = self.storyboard?.instantiateVC(withIdentifier: "yourControllerID") {
            // Use viewController here
            viewController.view.tag = 0; // for example
        } 
```

或者

```
 if let viewController = UIStoryboard(name: "yourStoryboardID", bundle: nil).instantiateVC(withIdentifier: "yourControllerID") {
        // Use viewController here
        viewController.view.tag = 0; // for example
    } 
```

将“yourControllerID”替换为您的控制器 ID。

# caching - 在本地缓存对象以供重用（Parse.com / Backbone）

> ID：13465606
> 
> 赞同：2
> 
> 时间：2012-11-20T02:09:56.327
> 
> 标签：caching, backbone.js, local-storage, marionette, parse-platform

当前使用的设置如下：[Backbone](http://backbonejs.org/)、[Parse](http://parse.com)、[Require](http://requirejs.org/)和[Marionette](https://github.com/marionettejs/backbone.marionette)。

我通过我的应用程序发现，我经常需要重用已经从 Parse 中提取的对象。

Parse 已经做到了这一点`Parse.User.current()`，但是最好在本地存储其他实体而不是一遍又一遍地检索它们。

是否有人对用于在本地缓存这些对象的良好实践或库有任何建议，或者在应用程序运行时拥有保存信息的全局变量就足够了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T06:09:33.840

Parse JavaScript SDK 是开源的，因此您可以查看 和 的`Parse.User.current`实现`Parse.User._saveCurrentUser`。也许你可以做类似的事情。 [http://www.parsecdn.com/js/parse-1.1.11.js](http://www.parsecdn.com/js/parse-1.1.11.js)

# java - 在循环中重绘 jlabel 定义的 jpanels 和循环中 jpanels 的 decleration

> ID：13465608
> 
> 赞同：0
> 
> 时间：2012-11-20T02:10:10.320
> 
> 标签：java, jpanel, jlabel, jtabbedpane

因此，为了好玩，我一直致力于开发这个简单的股票图表 GUI，它从 YahooFinance 获取图表并将它们显示到选项卡式 Jpanel 中。我已经能够让标签填充用户定义的股票和所有。但是，我开发了一些按钮，允许查询不同的图表方面（钟形带、移动平均线等），并希望能够使用此更新图表“重绘”面板。

问题：我不确定如何访问通过以下方法创建的各个面板。我需要能够选择一个面板（比如下面 i=1 时创建的 panel1）并在 ActionListener 中更新它。我真的只是想知道 Java 如何在循环中定义这些面板，以便我以后可以访问它们并重新绘制标签！干杯。

```
 public static void urlstock(String options,final String[] s, final JFrame f,final      
 JTabbedPane tpane) throws IOException{

for(int i=0;i<s.length;i++){

String path = "http://chart.finance.yahoo.com/z?s="+s[i]+options;

    URL url = new URL(path);

    BufferedImage image = ImageIO.read(url);

    JLabel label = new JLabel(new ImageIcon(image));

    JPanel panel=new JPanel();

    tpane.addTab(s[i],null, panel);

    panel.add(label);

} 
```

所以我尝试了这个提示按下按钮的方法，但它不起作用，因为它不能识别`panel`为变量，原因超出了我的理解：

```
 public void actionPerformed(ActionEvent e)
        { //Execute when button is pressed
    System.out.println("MAButton");
    tpane.getComponentAt(1);
    tpane.remove(panel);
    //Container.remove();

    String path = "http://chart.finance.yahoo.com/z?s=GOOG&t=7m&z=l&q=l&a=ss,sfs";

    URL url = new URL(path);

    BufferedImage image = ImageIO.read(url);

    JLabel label = new JLabel(new ImageIcon(image));
JPanel panel=new JPanel();

tpane.setComponentAt(1,panel);
panel.add(label);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:51:57.410

*   `s[i]`使用名称 ( )获取相关选项卡的索引[`JTabbedPane#indexOfTab(String)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#indexOfTab%28java.lang.String%29)
*   在检索到的索引处获取对组件的引用 ( [`JTabbedPane#getComponentAt(int)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html#getComponentAt%28int%29))
*   删除检索到的组件的内容[`Container#removeAll()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#removeAll%28%29)
*   添加新标签....

**更新示例**

```
public class TestTabPane {

    public static void main(String[] args) {
        new TestTabPane();
    }

    public TestTabPane() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final JTabbedPane tabPane = new JTabbedPane();

                JPanel panel = new JPanel();
                JButton updateButton = new JButton("Update me");
                panel.add(updateButton);
                updateButton.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        int indexOfTab = tabPane.indexOfTab("Testing");
                        JPanel panel = (JPanel) tabPane.getComponentAt(indexOfTab);
                        panel.removeAll();
                        panel.add(new JLabel("I've begin updated"));
                        panel.repaint();
                    }
                });

                tabPane.addTab("Testing", panel);

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(tabPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

} 
```

# android - Android：未调用的未决意图具有多个警报的打盹

> ID：13465609
> 
> 赞同：1
> 
> 时间：2012-11-20T02:10:17.690
> 
> 标签：android, alarmmanager, alarm, android-alarms

我正在努力在我现有的应用程序中添加多个警报功能。早些时候，警报只有一个，一切正常。我已经能够设置多个警报，它也工作正常，但问题在于贪睡功能。早些时候，贪睡运行完美。但是，在多个警报实施后，它不起作用。一旦我按下贪睡按钮，我就永远不会得到关于贪睡闹钟的对话框。这是我的代码：

**设置报警方式**

```
public void setAlarm(boolean AlarmEnabled, int AlarmHour, int AlarmMin) {
        //Build Intent/Pending Intent for setting the alarm
        Intent AlarmIntent = new Intent(MultipleAlarmActivity.this, AlarmReceiver.class);
        AlarmManager AlmMgr = (AlarmManager)getSystemService(ALARM_SERVICE);
        int _id = (int)System.currentTimeMillis();
        AlarmIntent.putExtra("REQUEST CODE", _id);
        Log.v("MultipleAlarmActivity RequestCode", ""+_id);
        PendingIntent Sender = PendingIntent.getBroadcast(MultipleAlarmActivity.this, _id, AlarmIntent, 0);     

        //Build Calendar objects for setting alarm
        Calendar curCalendar = Calendar.getInstance();
        Calendar alarmCalendar = Calendar.getInstance();

        //Initialize Seconds and Milliseconds to 0 for both calendars
        curCalendar.set(Calendar.SECOND, 0);
        curCalendar.set(Calendar.MILLISECOND, 0);           
        alarmCalendar.set(Calendar.SECOND, 0);
        alarmCalendar.set(Calendar.MILLISECOND, 0);

        //Update alarmCalendar with Alarm Hour and Minute Settings
        alarmCalendar.set(Calendar.HOUR_OF_DAY, AlarmHour);
        alarmCalendar.set(Calendar.MINUTE, AlarmMin);

        //If Alarm Time is now or in the past, set it for tomorrow 24 hours in advance from time selected
        if (alarmCalendar.getTimeInMillis() <= curCalendar.getTimeInMillis()) {
            alarmCalendar.add(Calendar.HOUR, 24);
        }
        //Set the alarm
        AlmMgr.set(AlarmManager.RTC_WAKEUP, alarmCalendar.getTimeInMillis(), Sender);

        //Build the Strings for displaying the alarm time through Toast
        String CalendarHourStr;
        if (AlarmHour > 12) {
            CalendarHourStr = Integer.toString(AlarmHour - 12);
        } else {
            CalendarHourStr = Integer.toString(AlarmHour);
        }
        String CalendarMinStr = Integer.toString(AlarmMin);
        if (AlarmMin < 10) {
            CalendarMinStr = "0" + CalendarMinStr;
        }

        String strAmPM;
        if (AlarmHour < 12) {
            strAmPM = "AM";
        }
        else {
            strAmPM = "PM";
        }
        String alarmTime = Integer.toString(alarmCalendar.get(Calendar.MONTH) + 1) + "/" + Integer.toString(alarmCalendar.get(Calendar.DAY_OF_MONTH)) + "/" + Integer.toString(alarmCalendar.get(Calendar.YEAR)) + " " + CalendarHourStr + ":" + CalendarMinStr + " " + strAmPM;
        Toast.makeText(this, "Alarm Set For " + alarmTime, Toast.LENGTH_LONG).show();       
         Log.v("MultipleAlarmActivity setAlarm", "in if loop");
    Log.v("MultipleAlarmActivity setAlarm", "setAlarm called");
} 
```

**报警接收器**

```
public class AlarmReceiver extends BroadcastReceiver
{
public static final String ALARM_ALERT_ACTION = "com.android.alarmclock.ALARM_ALERT";
public static final String ALARM_INTENT_EXTRA = "intent.extra.alarm";

@Override
public void onReceive(Context context, Intent intent) 
{ 
    Intent in = new Intent(Intent.ACTION_MAIN);
    in.setClass(context, SnoozeActivity.class);
    Log.v("AlarmReceiver RequestCode", ""+intent.getIntExtra("REQUEST CODE", 0));
    in.putExtra("REQUEST CODE", intent.getIntExtra("REQUEST CODE", 0));
    in.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(in);
}
} 
```

**打盹闹铃的方法**

```
private void snooze() 
{
        //Set Calendar Value for Snooze Alarm
        Calendar calendar = Calendar.getInstance();
        //int snoozeTime = mMinute + SNOOZE_MIN;
        calendar.add(Calendar.MINUTE, SNOOZE_MIN); //SNOOZE_MIN = 1;
        long snoozeTime = calendar.getTimeInMillis();
        //Build Intent and Pending Intent to Set Snooze Alarm               
        Intent AlarmIntent = new Intent(SnoozeActivity.this, AlarmReceiver.class);
        AlarmManager AlmMgr = (AlarmManager)getSystemService(ALARM_SERVICE);
        AlarmIntent.putExtra("REQUEST CODE", req_code);
        PendingIntent Sender = PendingIntent.getBroadcast(SnoozeActivity.this, req_code, AlarmIntent, PendingIntent.FLAG_UPDATE_CURRENT);   
        AlmMgr.set(AlarmManager.RTC_WAKEUP, snoozeTime, Sender);
        timer.cancel();   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:08:44.523

我发现了问题。我使用布尔值来检查是否设置了警报。而且，我在调用 setAlarm() 时忘记将此值设置为 true。那是我的错误。

# ms-word - 格式化word文档

> ID：13465621
> 
> 赞同：0
> 
> 时间：2012-11-20T02:11:53.463
> 
> 标签：ms-word

我已经在word文档中编写了我的报告索引，但页码格式不正确，我什至尝试使用表格但它仍然无法正常工作。

目录

章节：1 引言………………………………………………………………..…………..1 1.1 项目概要………………………… ……………………………………………………..2 1.2 目的…………………………………………………………………… ……………………………………2 1.3 范围…………………………………………………….……………………………… ..............2 1.4 技术和文献……………………………….……………………..2

像上面我有我的索引。在word文档中，页码没有排列成一行。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:44:05.237

尝试使用 Tab 按钮代替 Whitespace 按钮。

并且您可以添加一个点“。” 很好。数字将在真实的地方

# sql - 无法在 ACCESS 2012 中更改表

> ID：13465622
> 
> 赞同：0
> 
> 时间：2012-11-20T02:11:54.380
> 
> 标签：sql, ms-access, alter-table

我正在尝试更改访问数据库的表。我不断收到我认为应该很简单的语法错误。

这是我尝试做的事情以及我得到的错误。![在此处输入图像描述](../Images/7a34b54564cf156e0d39fb6cac951dbf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:14:42.743

是的，正如访问告诉你的那样，你有语法错误，试试这个

```
ALTER TABLE EMP_2 ADD COLUMN EMP_PCT NUMBER(4);
ALTER TABLE EMP_2 ADD COLUMN PROJ_NUM CHAR(3); 
```

语法

```
ALTER TABLE table {ADD {COLUMN field type[(size)] [NOT NULL] [CONSTRAINT index] |
ALTER COLUMN field type[(size)] |
CONSTRAINT multifieldindex} |
DROP {COLUMN field I CONSTRAINT indexname}} 
```

*   [ALTER TABLE 语句](http://office.microsoft.com/en-us/access-help/alter-table-statement-HA001231431.aspx)

# arrays - 使用 postgresql 中的其他列更新具有数组类型的列

> ID：13465628
> 
> 赞同：2
> 
> 时间：2012-11-20T02:12:47.253
> 
> 标签：arrays, postgresql

我有一张这样的桌子：

```
+-----+------------+-------+--------+-----------+
| ID  |  val1      | val2  | val3   |  array_3  |
+-----+------------+-------+--------+-----------+
| 100 |  110       | 25    | 53     |{110,25,53}|
| 101 |  56        | 75    | 59     |{56,75,59} |
| 102 |  65        | 93    | 82     |{65,93,82} |
| 103 |  75        | 70    | 80     |{75,70,80} |
+-----+------------+-------+--------+-----------+ 
```

想象一下，我有*ID、val1、val2 和 val3*列的值，我想要**array_3**表中的结果数组，它是一个数组类型，它的大小是 1*3。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:20:39.920

数组构造函数？

[http://sqlfiddle.com/#!12/c297a/](http://sqlfiddle.com/#!12/c297a/)

```
SELECT "ID", ARRAY[val1,val2,val3], array_3
FROM table1; 
```

要将输出放在单独的表中，请使用`CREATE TABLE .. AS`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T02:33:22.073

`update mytable set array_3=ARRAY[pix_val1, pix_val2]`

# java - 如何赋予 JButtons 不同的功能？

> ID：13465634
> 
> 赞同：2
> 
> 时间：2012-11-20T02:13:29.273
> 
> 标签：java, jbutton, actionlistener

如何使用相同的 ActionPerformed 函数为不同的 JButton 提供不同的功能？

```
public class ToolBarExample extends JPanel implements ActionListener  {

public JTextPane pane;
public JMenuBar menuBar;
public JToolBar toolBar;

public JButton Aster;
public JButton Azaleas;
public JButton ChristFern;
public JButton JapBarberry;

public ToolBarExample() {

    toolBar = new JToolBar("Formatting", JToolBar.VERTICAL);

    this.Aster = new JButton(new ImageIcon("images/PlantIcons/[Blueprint]_Aster.png"));
    this.toolBar.add(Aster);    
    this.Aster.addActionListener(this);
    this.Azaleas = new JButton(new ImageIcon("images/PlantIcons/[Blueprint]_Azaleas.png"));
    this.toolBar.add(Azaleas);
    this.Azaleas.addActionListener(this);
    this.ChristFern = new JButton(new ImageIcon("images/PlantIcons/[Blueprint]_ChristmasFern.png"));
    this.toolBar.add(ChristFern);
    this.ChristFern.addActionListener(this);
    this.JapBarberry = new JButton(new ImageIcon("images/PlantIcons/[Blueprint]_JapaneseBarberry.png"));
    this.toolBar.add(JapBarberry);
    this.JapBarberry.addActionListener(this);
}

public void actionPerformed(ActionEvent e) {
        try {
            if(e.getSource() == Aster) {
                NativePlant plant1 = new NativePlant(4, 5, 600, "test", "images/[Blueprint]_Aster.png", 200, 600);
                Game.setNatives(plant1);
            }

            if(e.getSource() == Azaleas) {
                NativePlant plant1 = new NativePlant(4, 5, 600, "test", "images/[Blueprint]_Azaleas.png", 100, 600);
                Game.setNatives(plant1);
            }
            if(e.getSource() == ChristFern) {
                NativePlant plant1 = new NativePlant(4, 5, 600, "test", "images/[Blueprint]_ChristmasFern.png", 300, 600);
                Game.setNatives(plant1);
            }
            if(e.getSource() == JapBarberry) {
                NativePlant plant1 = new NativePlant(4, 5, 600, "test", "images/[Blueprint]_JapaneseBarberry.png", 400, 600);
                Game.setNatives(plant1);
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
} 
```

现在我正在尝试使用 e.getSource 找出正在按下的按钮，然后为每个按钮执行不同的操作。但是，现在唯一起作用的按钮是第一个按钮（Aster）。

有谁知道我做错了什么，或者我应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:47:31.367

您可以使用每个按钮的 setActionCommand() 并从 actionPerformed 调用相应的 getActionCommand。在我看来，使用常量来定义动作将是一个好方法。一个小样本如下；

```
public class SwingTest extends JFrame implements ActionListener{

public SwingTest()
{
    JButton btnOne = new JButton("test one");
    btnOne.addActionListener(this);
    btnOne.setActionCommand("TestOne");
    JButton btnTwo = new JButton("test two");
    btnTwo.addActionListener(this);
    btnTwo.setActionCommand("TestTwo");

    this.setLayout(new FlowLayout());
    this.getContentPane().add(btnOne);
    this.getContentPane().add(btnTwo);
}

public static void main(String[] args) {
    SwingTest t = new SwingTest();
    t.pack();
    t.setVisible(true);
}

@Override
public void actionPerformed(ActionEvent e) {

    System.out.println(e.getActionCommand());
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:11:25.477

而不是让它成为

```
e.getSource() == Aster 
```

将其更改为：

```
e.getSource().equals(Aster) 
```

它看起来是一样的，但它会给你你正在寻找的结果......因为 .equals() 正在检查对象的状态，而 '==' 正在检查实际实例。

[http://www.javabeat.net/qna/13-what-is-difference-between-equals-and-/](http://www.javabeat.net/qna/13-what-is-difference-between-equals-and-/)

# jquery - Google Maps API，隐藏/显示标记

> ID：13465638
> 
> 赞同：4
> 
> 时间：2012-11-20T02:13:36.457
> 
> 标签：jquery, google-maps-api-3, google-maps-markers

我是 JavaScript 新手，但是这个问题已经让我发疯了两天，我找不到和我有同样问题的人。

我正在尝试添加一个按钮来隐藏我的地图上的所有标记（最终我想这样做，以便我按类别隐藏标记，但暂时隐藏所有标记就可以了）我正在使用来自谷歌的代码开发者网站。

这是我的代码

```
var map;
var service;
var infowindow;

function initialize() {
  var pyrmont = new google.maps.LatLng(49.2755189938682, -123.1185996613159);

  map = new google.maps.Map(document.getElementById('map'), {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: pyrmont,
    zoom: 17
  });

  var request = {
    location: pyrmont,
    radius: '500',
    types: ['atm','bus_station','parking']
  };

  infowindow = new google.maps.InfoWindow();
  service = new google.maps.places.PlacesService(map);
  service.nearbySearch(request, callback);
  TestMarker();
}

function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      var place = results[i];
      createMarker(results[i]);
    }
  }
}

function TestMarker() {
       CentralPark = new google.maps.LatLng(49.2755189938682, -123.1185996613159);
       addMarker(CentralPark);
}

function addMarker(location) {
    marker = new google.maps.Marker({
        position: location,
        map: map,
        icon: "http://maps.google.com/mapfiles/ms/micons/POI.png",
        title: 'Sues Party, Idaburn Salon' 
    });
}

function createMarker(place) {

    var iconType = {};
    iconType['atm'] = "http://maps.google.com/mapfiles/ms/micons/dollar.png";
    iconType['bus_station'] =     "http://maps.google.com/mapfiles/ms/micons/bus.png";
    //iconType['restaurant'] = "http://maps.google.com/mapfiles/ms/micons/restaurant.png";
    iconType['parking'] = "http://maps.google.com/mapfiles/ms/micons/parkinglot.png";
    var placeLoc = place.geometry.location;
    var marker = new google.maps.Marker({
      map: map,
      icon: iconType[place.types[0]],
      position: place.geometry.location
    });

    google.maps.event.addListener(marker, 'click', function() {
      infowindow.setContent(place.name);
      infowindow.open(map, this);
    });
  }

  google.maps.event.addDomListener(window, 'load', initialize); 
```

我添加了一个按钮来调用 a `function`，但我认为问题在于从数组中获取记录。真的卡住了，非常感谢任何帮助。甚至建议我需要做什么才能让它发挥作用

詹姆士

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T02:30:32.447

詹姆士。试试这个代码：

```
<html>
  <head>
    <title></title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&v=3&libraries=adsense,places"></script>
    <script type="text/javascript">
      var map;
      var service;
      var infowindow;
      var markers = [];

      function initialize() {
        var pyrmont = new google.maps.LatLng(49.2755189938682, -123.1185996613159);

        map = new google.maps.Map(document.getElementById('map'), {
          mapTypeId : google.maps.MapTypeId.ROADMAP,
          center : pyrmont,
          zoom : 17
        });

        var request = {
          location : pyrmont,
          radius : '500',
          types : ['atm', 'bus_station', 'parking']
        };
        infowindow = new google.maps.InfoWindow();
        service = new google.maps.places.PlacesService(map);
        service.nearbySearch(request, callback);
        TestMarker();

        var removeBtn = document.getElementById("removeBtn");
        google.maps.event.addDomListener(removeBtn, "click", onRemoveBtn_Clicked);
      }

      function onRemoveBtn_Clicked() {
        var i;
        for (i = 0; i < markers.length; i++) {
          markers[i].setMap(null);
        }
      }

      function callback(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
          for (var i = 0; i < results.length; i++) {
            var place = results[i];
            markers.push(createMarker(results[i]));
          }
        }
      }

      function TestMarker() {
        CentralPark = new google.maps.LatLng(49.2755189938682, -123.1185996613159);
        markers.push(addMarker(CentralPark));
      }

      function addMarker(location) {
        marker = new google.maps.Marker({
          position : location,
          map : map,
          icon : "http://maps.google.com/mapfiles/ms/micons/POI.png",
          title : 'Sues Party, Idaburn Salon'
        });
        return marker;
      }

      function createMarker(place) {
        var iconType = {};
        iconType['atm'] = "http://maps.google.com/mapfiles/ms/micons/dollar.png";
        iconType['bus_station'] = "http://maps.google.com/mapfiles/ms/micons/bus.png";
        //iconType['restaurant'] = "http://maps.google.com/mapfiles/ms/micons/restaurant.png";
        iconType['parking'] = "http://maps.google.com/mapfiles/ms/micons/parkinglot.png";
        var placeLoc = place.geometry.location;
        var marker = new google.maps.Marker({
          map : map,
          icon : iconType[place.types[0]],
          position : place.geometry.location
        });

        google.maps.event.addListener(marker, 'click', function() {
          infowindow.setContent(place.name);
          infowindow.open(map, this);
        });

        return marker;
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
    <style type="text/css">
      code.prettyprint {
        display: block;
        border: 1px solid #ccc;
        margin-bottom: 1em;
      }
      #map {
        width: 100%;
        height: 500px;
        margin: 0;
      }

    </style>
  </head>
  <body>
    <input type="button" id="removeBtn" value="Remove all markers" />
    <div id="map"></div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T02:42:36.963

您需要做的就是创建一个全局变量来保存所有标记。从结果中一一添加它们，您可以全部显示/隐藏它们。例如：

```
<script type="text/javascript">

    var markers = [];

    function HideAllMarkers() {
        for (var i = 0; i < markers.length; i++) {
           markers[i].setMap(null);
        }
    }

    function callback(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
            for (var i = 0; i < results.length; i++) {
                var place = results[i];
                createMarker(results[i],i);
            }
        }
    }

    function createMarker(place, index) {
        var iconType = {};
        iconType['atm'] = "http://maps.google.com/mapfiles/ms/micons/dollar.png";
        iconType['bus_station'] = "http://maps.google.com/mapfiles/ms/micons/bus.png";
        //iconType['restaurant'] = "http://maps.google.com/mapfiles/ms/micons/restaurant.png";
        iconType['parking'] = "http://maps.google.com/mapfiles/ms/micons/parkinglot.png";
        var placeLoc = place.geometry.location;
        markers[index] = new google.maps.Marker({
            map: map,
            icon: iconType[place.types[0]],
            position: place.geometry.location
        });

        google.maps.event.addListener(marker, 'click', function () {
            infowindow.setContent(place.name);
            infowindow.open(map, this);
        });
    }
</script> 
```

如果要显示所有标记，则应执行以下操作：

```
<script type="text/javascript">
    function ShowAllMarkers() {
        for (var i = 0; i < markers.length; i++) {
            markers[i].setMap(map);
        }
    }
</script> 
```

# java - JTextArea：如何将行、列转换为偏移量？

> ID：13465640
> 
> 赞同：2
> 
> 时间：2012-11-20T02:13:48.860
> 
> 标签：java, swing, offset, jtextarea

> **可能重复：**
> [JTextArea 中的行](https://stackoverflow.com/questions/13130486/rows-in-jtextarea)

在 JTextArea 中，select、highlight 等操作似乎都依赖于与文本开头的偏移量。在显示面向行的文本的应用程序中，我需要根据行和列选择、突出显示（基于其他地方的信息，而不是插入符号）。

是否有一些内置的功能，或者在一些帮助类中，可以从 row,col 中获取偏移量？我意识到我可以在行起始偏移等上维护单独的数据并计算行，col--> 偏移，但肯定 JTextArea（或其模型）已经知道这一点以便显示文本，所以我相信必须已经一种方法来做到这一点。

我确实看到了使用类似这样的示例[，](https://stackoverflow.com/questions/12331861/getting-caret-position-from-jtextarea)使用 textarea.viewToModel(new Point(x,y));，其中 x 和 y 据称是 row,col，但据我所知，x 和 y 是像素坐标，而不是行，列...所以不知道该怎么做。

线索？谢谢！

已编辑：因此，在五位评论者认为这是其他问题的重复问题的印象下，该问题已关闭，但事实并非如此。我没有问如何将偏移量转换为行、列，也没有问如何将屏幕像素坐标转换为偏移量，这些都是其他文章中涉及的主题。

万一其他人在这里偶然发现我实际提出的问题的答案，我现在发现它如下。

JTextArea 具有我期望找到的功能，但在早期浏览中显然被忽略了：getLineStartOffset(int line) 它将为特定的文本行（行）提供从文本开始的偏移量。对此可以轻松添加 char-posn-in-line，从而得出特定字符的偏移量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:01:36.553

textArea 包含一个文本流。没有什么神奇的方法可以在您的文本模型中定位行/列，因为如果您的文本包含可变宽度字符或不同的字体大小，这可能会模棱两可。 *您*必须维护必要的数据，以便根据*您*对特定（行、列）对数据的意义的想法进行映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T05:59:17.077

这是矩形片段选择的简单示例[http://java-sl.com/tip_vertical_selection.html](http://java-sl.com/tip_vertical_selection.html)

您可以使用 javax.swing.text.Utilities.getRowStart()/getRowEnd() 方法。首先找到行号的起始行偏移量。然后只需添加 col 编号即可获得偏移量。

# javascript - 如何使用 Backbone.js，但以非 RESTful 方式？

> ID：13465645
> 
> 赞同：17
> 
> 时间：2012-11-20T02:14:37.653
> 
> 标签：javascript, backbone.js, web

我现在是前端开发人员，有一个项目很好用BackboneJS，服务端是别人写的。有没有人可以告诉我如何以非 RESTful 方式覆盖删除、更新、添加等？服务器端的 URL 可能是这样的：

*   添加：`www.domain.com/addBookById`
*   消除：`www.domain.com/removeBookById`

非常感谢！！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-20T06:19:59.897

Backbone 用于[`Backbone.sync`](http://backbonejs.org/#Sync)管理与服务器的所有通信。对你来说有两件重要的事情`sync`；首先，它看起来像这样：

> **Backbone.sync**的方法签名是`sync(method, model, [options])`
> 
> *   **方法**– CRUD 方法（`"create"`、`"read"`、`"update"`或`"delete"`）
> *   **model** - 要保存的模型（或要读取的集合）
> *   **options** – 成功和错误回调，以及所有其他 jQuery 请求选项

第二个是您可以`sync`在每个模型和每个集合的基础上覆盖。因此，您可以将自己的`sync`实现添加到模型中：

```
var M = Backbone.Model.extend({
    sync: function(method, model, options) {
        //...
    },
    //...
}); 
```

如果您查看，`method`您可以决定使用哪个 URL 以及您是否正在执行 GET、POST、...请求。`model`它将告诉您要发送到服务器的数据。您需要合并`options`到`$.ajax`要使用的选项中。看一下 的标准实现`Backbone.sync`，它非常简单，应该向您展示您需要做什么：只需替换 URL 处理并删除一些您不关心的功能（例如`emulateHTTP`和`emulateJSON`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-20T11:49:40.923

**在您的情况下，最好的选择是像**[Backbone.service](http://mkuklis.github.io/backbone.service/)这样的插件。它是非宁静或半宁静 api 的骨干服务。

```
// define server targets / endpoints
var targets = {
  login: ["/login", "post"],
  signup: ["/signup", "post"],
  logout: ["/logout", "get"],
  search: "/search" // defaults to get
  resetPassword: ["/resetpassword", "post"],
  updateSettings: ["/updateSettings", "post"]
};

// standalone service
var service = new Backbone.Service({ url: "http://localhost:5000", targets: targets });

// extend backbone model
var User = Backbone.Model.extend(service); 
```

你可以像这样使用它：

```
var user = new User();
user.login({ username: 'bob', password: 'secret' }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T02:53:43.077

这是修改后的 Backbone.js ajax 调用的示例：

```
var Forecast = Backbone.Model.extend({
  url: function() {
    return "http://api.wunderground.com/api/7eaec3b21b154448/conditions/q/" + this.get( "zip" ) + ".json";
  },
  parse : function( data, xhr ) {
    var observation = data.current_observation;
    return {
      id: observation.display_location.zip,
      url: observation.icon_url,
      state: observation.display_location.state_name,
      zip: observation.display_location.zip,
      city: observation.display_location.city,
      temperature: observation.temp_f
    };
  }
}); 
```

来自：[Elijah Manor 对 Backbone.JS 的介绍](http://elijahmanor.github.com/talks/intro-to-backbonejs/index.html#/8/7)

# c# - 如果条件为真，则将指定元素从 xml 添加到文本框

> ID：13465649
> 
> 赞同：1
> 
> 时间：2012-11-20T02:15:26.247
> 
> 标签：c#, xml, linq-to-xml

我正在尝试将 XML 文件中的字符串添加到文本框，但还没有成功。我想要做的是通过“日期”元素，如果“bejovo”与“日期”元素匹配，那么将元素“名称”值放入列表中，并对价格求和。这是我的代码。

```
if (File.Exists(path))
            {
                XDocument doc = XDocument.Load(path);
                var c = from x in doc.Descendants("order")
                        where x.Element("date").Value == bejovo
                        select new
                        {
                            //??
                        };
                foreach (var item in c)
                {
                    textBox1.Text = item.ToString();                    
                }
            } 
```

这是我的 XML 文件：

```
<user id="0">
    <order id="0">
      <date>2012.11.20\. 1:29:20</date>
      <menuelem db="0">
        <name>Pizza</name>
        <price>1290</price>
      </menuelem>
      <menuelem db="1">
        <name>Coke</name>
        <price>300</price>
      </menuelem>
    </order>
  </user>
<user id="0">
    <order id="1">
      <date>2012.11.19\. 21:49:29</date>
      <menuelem db="0">
        <name>Milk</name>
        <price>200</price>
      </menuelem>
    </order>
  </user> 
```

所以如果bejovo="2012.11.20\. 1:29:20"，那么我的结果一定是“Pizza”和“Coke”，价格是1590。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:29:03.553

可能会尝试这些方面的东西。下面的代码未经测试，目前无法在 Visual Studio 中加载和测试。

```
var items = doc
   .Elements("user")
   .Elements("order")
   .Where(o => (string)o.Element("date") == bejovo)
   .Elements("menuelem")
   .Select(m => new 
   { 
     Name = (string)m.Element("name"), 
     Price = (int?).Element("price") 
   };
var names = items.Select(i => i.Name).ToList();
var price = items.Select(i => i.Price).Sum(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:26:15.870

当然，这段代码没有验证：

```
XDocument doc = XDocument.Load("In.xml");
var c = from x in doc.Descendants("order")
        where x.Element("date").Value == "2012.11.20\. 1:29:20"
        select new
        {
            Names = string.Join(", ", x.Elements("menuelem")
                                       .Elements("name")
                                       .Select(s => s.Value)),
            Price = x.Elements("menuelem")
                     .Elements("price")
                     .Select(s => decimal.Parse(s.Value))
                     .Sum()
        };
foreach (var item in c)
{
    textBox1.Text = string.Format("{0}\tprice:{1}", item.Names, item.Price);
} 
```

输出如下：`Pizza, Coke price:1590`

# algorithm - 数据结构。f(x) 和 g(x)

> ID：13465654
> 
> 赞同：0
> 
> 时间：2012-11-20T02:16:04.003
> 
> 标签：algorithm, complexity-theory

我可以理解算法中的运行时间复杂度。但是当我们知道算法运行时间复杂度为 O(n) 时，这有点令人困惑。

我们可以看出 f(n)< g(n)..

g(n)到底是什么..？

对不起菜鸟问题..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:27:33.053

让`f(x)`和`g(x)`是在实数的某个子集上定义的两个函数。一个写

```
f(x) = O(g(x)) as x -> infinity 
```

当且仅当存在一个正实数`M`和一个实数`x0`使得

```
|f(x)| <= M |g(x)| for all x > x0 
```

一般而言，`f(x)`是算法在输入规模上的实际成本（例如执行步骤数）`x`，而比用于表征 的复杂性行为`g(x)`要简单得多。`f(x)``f(x)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:25:12.927

我同意 f(x) 和 g(x) 只是一对函数的评论。f(x) = O(g(x)) 告诉我们它们以特定的方式相关。

这通常使用的方式是使 f(x) 成为一些复杂的、难以表征的函数。g(x) 是一个更简单的函数。知道 f(x) = O(g(x)) 让我们感觉随着 x 的增加， f(x) 的界限。

在计算机科学中的应用是使 f(x) 作为输入大小 x 的函数来衡量程序行为。例如，f(x) 可能是对 x 元素数组进行排序时的最大比较次数，或者是某些算法中使用的内存字数。f(x) 通常会非常混乱。

我们可以通过找到一个好的、干净的函数 g(x) 来使事情变得更简单，这样我们就可以证明 f(x) = O(g(x))。

例如，对于小于 30 的输入，某些算法实际上可能在其输入中每个元素采用 35 次操作或 10 次操作中的较大者，或者对于所有较大的输入，每个元素采用 1000 次操作中的较大者。

如果我们只注意到 f(x) = O(x)，那么比较算法会更简单，也更容易。

请注意，这与说 f(x) < g(x) 不同。在我的示例中，对于较大的 x，f(x) 是 g(x) 的一千倍。它只是意味着 g(x) 捕获了 f(x) 在 x 变大时的行为方式。

# php - 在mysql顶部使用'like'显示查询的搜索记录

> ID：13465656
> 
> 赞同：0
> 
> 时间：2012-11-20T02:16:07.530
> 
> 标签：php, mysql, database

我正在编写一个搜索查询，它根据名字和姓氏进行搜索。查询是这样的：

```
select fname,lname 
from users 
where fname like fname like '%$name%' or lname like '%$name%'; 
```

如果用户在搜索框中输入名字和姓氏，我用“空格”将其分解，查询如下

```
select fname,lname 
from users 
where fname like fname like '%$f_name%' or lname like '%$l_name%'; 
```

在第二个查询中，如果我输入**John Thomas**，它会向我显示姓名中包含 John 或 Thomas 的所有记录，但实际的搜索结果，即 John Thomas（**完全匹配**）在结果下方的某个位置。（如果我有 100结果位于第 60 位）。

如何修改查询以实现此目的，还是必须以编程方式处理它？即检查结果数组并匹配复选框值是否存在并显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:24:54.110

尝试：

```
SELECT fname, lname FROM users 
WHERE (fname = '$f_name' AND lname = '$l_name') 
OR (fname LIKE '%$f_name%') OR (lname LIKE '%$l_name%'); 
```

如果您需要订购，那么`ORDER BY lname, fname`在查询结束时，当然取决于您需要订购什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T02:25:36.610

在查询中添加

```
ORDER BY `fname` 
```

你可以在这里测试mysql排序更多信息==> [http://dev.mysql.com/doc/refman/5.0/en/sorting-rows.html](http://dev.mysql.com/doc/refman/5.0/en/sorting-rows.html)

# java - iText - 将内容添加到现有页面的底部

> ID：13465657
> 
> 赞同：0
> 
> 时间：2012-11-20T02:16:14.823
> 
> 标签：java, itext

我想在 PDF 文件的每一页中添加一段文本。[SO中的这个答案](https://stackoverflow.com/questions/3335126/itext-add-content-to-existing-pdf-file)很好用。但是，文本被添加到页面顶部。我想将我的文字添加到每一页的底部。我该怎么做呢？

这是代码的相关部分。

```
 while (iteratorPDFReader.hasNext()) {
        PdfReader pdfReader = iteratorPDFReader.next();

        // Create a new page in the target for each source page.
        while (pageOfCurrentReaderPDF < pdfReader.getNumberOfPages()) {
            document.newPage();
            pageOfCurrentReaderPDF++;
            currentPageNumber++;
            page = writer.getImportedPage(pdfReader, pageOfCurrentReaderPDF);
            cb.addTemplate(page, 0, 0);

            document.add(new Paragraph("My Text here"));  //As per the SO answer

        }
        pageOfCurrentReaderPDF = 0;
    } 
```

该代码是一个函数的一部分，它接受一个文件夹，读取其中的 PDF 文件并将它们合并到一个文件中。所以，我想在上面的循环本身中添加文本，而不是再次迭代文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T06:55:46.137

如果要自动将内容添加到每个页面，则需要一个页面事件。这在我的书“ [iText in Action - Second Edition](http://itextpdf.com/book) ”的第 5 章中进行了解释。如果您没有这本书的副本，您可以在[此处](http://itextpdf.com/book/chapter.php?id=5)查阅示例。您还可以通过查找关键字[Header / Footer](http://itextpdf.com/themes/keyword.php?id=221)来找到解决方案。

您所指的示例乍一看并不正确。当然，您可以使用“两次传递”，一次创建内容，另一次添加页眉或页脚，但建议的解决方案与推荐的解决方案不同：http: [//itextpdf.com/examples/iia.php ?id =118](http://itextpdf.com/examples/iia.php?id=118)

您正在复制问题中的错误：到底为什么要将刚刚创建的文档导入新文档，从而丢弃您添加到该文档中的所有可能的交互性？这没有任何意义。令人难以置信的是，这个答案获得了如此多的赞成票。我是 iText 的原始开发者，我对这个答案一点也不满意！

在您的情况下，可能不需要先在内存中创建文档，然后再添加页脚。看看[http://itextpdf.com/examples/iia.php?id=104](http://itextpdf.com/examples/iia.php?id=104)

您需要创建一个`PdfPageEvent`实现（例如使用`PdfPageEventHelper`）并且您需要实现该`onEndPage()`方法。

记录在案的警告：

*   不要`onStartPage()`用来添加内容，
*   不要向`Document`传递给页面事件的对象添加任何内容，
*   除非您指定不同的页面大小，否则左下角的坐标为`x = 0; y = 0`。添加页脚时需要考虑到这一点。页脚的 y 值低于页眉的 y 值。

欲了解更多信息：请参阅我的书。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T07:35:34.190

查看 iText in Action 第 2 版的[第 6 章](http://www.manning.com/lowagie2/samplechapter6.pdf)，尤其是第 6.4.1 小节：连接和拆分 PDF 文档。

清单 6.22，[ConcatenateStamp.java](http://itextpdf.com/examples/iia.php?id=128)，向您展示了如何从多个其他 PDF 的页面（在您的情况下为所有页面）的副本创建 PDF；该示例还添加了一个新的“Y 页 X”页脚；这演示了如何在合并源文件时在页面上的给定位置添加内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T03:46:29.387

也许[这](http://www.coderanch.com/how-to/java/ItextExample)在这里可能会有所帮助...我怀疑您想要执行以下操作：

```
cb.addTemplate(page, 0, 0);

document.add(new Paragraph("My Text here"));  
document.setFooter(new HeaderFooter("Footnote goes here"));
}
pageOfCurrentReaderPDF = 0; 
```

# jquery - Jquery 只被调用一次（win 8 javascript 应用程序）

> ID：13465658
> 
> 赞同：3
> 
> 时间：2012-11-20T02:16:31.843
> 
> 标签：jquery, windows-8, knockout.js

我正在为 Windows 8 构建一个 javascript 应用程序。我正在使用 jquery 和敲除进行数据绑定。

所以我有一个数据绑定元素的列表，我有一个让我添加新元素的表单。如果我使用表单添加一个新元素，它会将它添加到服务器上，但无论我做什么它都不会出现在列表中。我离开页面导航，在 jquery get 调用后返回并在断点处停止，该调用应该返回所有元素，但它返回没有新元素的列表......而在断点处我手动调用相同的 get从浏览器中，该元素位于 xml 列表中。

所以 jquery get 调用让我得到了旧列表，没有新元素，但该元素已经添加到服务器的列表中。会因为 jquery 缓存信息而根本没有进行新的 get 调用而发生这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T02:31:39.073

jQuery 默认缓存 ajax 请求，但你可以覆盖它：

```
$.ajax({
  url: 'my-webservice-url'
  cache: false // <-- this property 
}); 
```

阅读更多：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# android - onDataConnectionStateChanged 状态参数始终为 0

> ID：13465659
> 
> 赞同：0
> 
> 时间：2012-11-20T02:16:37.090
> 
> 标签：android, wifi, 3g, connectivity

我正在尝试使用 PhoneStateListener 来处理连接状态更改。我已经在服务的 onCreate 方法中注册了监听器。当我从手机设置启用或禁用 wifi 连接时，正在调用侦听器的覆盖方法 onDataConnectionStateChanged(int state)，但在这两种情况下，“状态”参数都是 0，并且它始终进入开关的第一种情况。这是我对该方法的实现：

```
PhoneStateListener listener = new PhoneStateListener() { 
        @Override
        public void onDataConnectionStateChanged(int state) {
            super.onDataConnectionStateChanged(state);
            switch (state) {
                case TelephonyManager.DATA_DISCONNECTED:
                    Toast.makeText(LocationService.this, "Data connection lost!", Toast.LENGTH_LONG).show();
                    break;
                case TelephonyManager.DATA_CONNECTED:
                    Toast.makeText(LocationService.this, "Data connection available!", Toast.LENGTH_LONG).show();
                    break;
            }
        }
    }; 
```

结果总是一条吐司消息说：“数据连接丢失！”。我确定我在这里遗漏了一些简单的东西，但我无法找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T02:42:27.790

老问题，但您显示的代码是针对“数据”的，而不是针对 Wifi 的。我有相同的代码，只有当我连接“LTE”（数据）时才会执行

```
private void registerDataListener(Context context) {

    listener = new PhoneStateListener() {
        @Override
        public void onDataConnectionStateChanged(int state) {
            switch (state) {
            case TelephonyManager.DATA_DISCONNECTED:
                Log.d(TAG, "Disconnected");
                break;
            case TelephonyManager.DATA_CONNECTED:
                Log.d(TAG, "Connected");
                break;
            case TelephonyManager.DATA_CONNECTING:
                Log.d(TAG, "Connecting");
                break;
            case TelephonyManager.DATA_SUSPENDED:
                Log.d(TAG, "Disconnecting");
                break;
            }
        }

    };
    telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    telephonyManager.listen(listener,PhoneStateListener.LISTEN_DATA_CONNECTION_STATE);
    Log.d(TAG, "Registering PhoneStateListener");

} 
```

并且不要忘记在清单中添加权限

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

# vb.net - vb中的多个相机拍摄

> ID：13465666
> 
> 赞同：1
> 
> 时间：2012-11-20T02:17:49.310
> 
> 标签：vb.net

看我有这个从 5 到 1 的简单 vb.net 代码，然后说捕获！单击开始按钮后，我需要连续执行 4 次.. 我尝试了一个直到循环，但它没有用，我是这里的新手，所以请帮忙..

```
Public Class Form_welcome
    Dim Count As Integer

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

        Count -= 1
        Label2.Text = Count
        If (Count = 0) Then
            Timer1.Enabled = False
            Label2.Hide()
            Label3.Show()
        End If

    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Count = 5
        Timer1.Enabled = True
        Label2.Text = Count
        Timer1.Interval = 1000
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:06:36.767

像这样的东西？

```
Public Class Form_welcome

    Dim Count As Integer
    Dim pictureCount as integer = 4

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick

        Count -= 1
        Label2.Text = Count
        If (Count = 0) Then
            pictureCount -=1
            If pictureCount = 0 then
                Timer1.Enabled = False
           End If
                'take a picture
            Label2.Hide()
            Label3.Show()
            Count = 5
        End If

    End Sub

    Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
        Count = 5
        Timer1.Enabled = True
        Label2.Text = Count
        Timer1.Interval = 1000
    End Sub

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T02:57:57.970

公共类 Form_welcome Dim Count As Integer

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click

    Admin_Login.Show()
    Me.Hide()

End Sub

Private Sub Form_welcome_FormClosing(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing
    Application.Exit()

End Sub

Private Sub Form_welcome_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Button4.Hide()
    Button5.Hide()
    Button6.Hide()

    'Timer1.Enabled = True
    'Label2.Text = Count
    'Timer1.Interval = 1000

End Sub

Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    Count -= 1
    'Label2.Text = Count
    If (Count = -1) Then
        Timer1.Enabled = False
        Label3.Show()
        Label3.Hide()
        Label2.Hide()
        Button4.Show()
        Button5.Show()
        Button6.Show()
        PictureBox4.Hide()
        PictureBox3.Show()
        pict1.Show()
        pict2.Show()
        pict3.Show()
        pict4.Show()
        Button2.Hide()
    End If
    If (Count Mod 3) = 0 Then
        Label2.Text = "Captured!"
    Else
        Label2.Text = Count

    End If

End Sub
Private Sub Button2_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button2.Click
    Count = 12
    Timer1.Enabled = True
    Label2.Text = Count
    Label2.Show()
    Timer1.Interval = 1000
End Sub

Private Sub Button7_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button7.Click
    Application.Exit()

End Sub

Private Sub Button5_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button5.Click

End Sub

Private Sub Button6_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button6.Click
    Button2.Show()
    Button4.Hide()
    Button5.Hide()
    Button6.Hide()
    PictureBox3.Hide()
    pict1.Hide()
    pict2.Hide()
    pict3.Hide()
    pict4.Hide()
    PictureBox4.Show()

End Sub 
```

结束类

# html - 动画故障

> ID：13465668
> 
> 赞同：0
> 
> 时间：2012-11-20T02:18:13.247
> 
> 标签：html, css, animation

对于我的图像，我遇到了一些故障。首先，我让这一切正常工作，然后我把一个班级变成了五个不同的班级，所以我可以单独更改它们的大小，而不会影响到它们。唯一的问题是，现在我这样做了，图片没有旋转，只有文字除了第一个。此外，当我将图像调整为更大时，我将这样做，它不会一直旋转。起初我认为这是动画的问题，但我不太确定，因为它被设置为 180 度旋转，无论大小都应该发生这种情况。我的网站在这里[http://spencedesign.netau.net/singapore-gallery.html](http://spencedesign.netau.net/singapore-gallery.html)我想要布局我的图片的方式是![在此处输入图像描述](../Images/02a18786a7b57e27775394f951a9cc2d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:51:32.023

图标动画中的错误是因为您*仅*指定了`.icon1`元素，您还必须对所有其他图标重复：

```
li:hover .icon1, li:hover .icon2, li:hover .icon3, li:hover .icon4, li:hover .icon5, li:hover .label {

  -webkit-transform:translateZ(-32px) rotateY(180deg);

  -webkit-animation-duration:0.33s;
  -webkit-animation-name:rotateOut;
  -webkit-animation-timing-function:linear;
  -webkit-animation-fill-mode:forwards;

} 
```

这是一个相当尴尬的 CSS 结构，而且很难维护，我想你应该给每个元素一个基于通用类的 CSS 动画规则，给每个元素另一个类，以便根据你的需要单独选择它，如下所示：

```
/* CSS */
.icon-bar li:hover .icon, .icon-bar li:hover .icon-label { 

   your animation code here
}

<!-- HTML -->

<ul class="icon-bar">
<li>
  <span class="icon first-icon"></span>
  <span class="label">item 1</span>
</li>
<li>
  <span class="icon second-icon"></span>
  <span class="label">item 2</span>
</li>
<li>
  <span class="icon third-icon"></span>
  <span class="label">item 3</span>
</li>
<li>
  <span class="icon fourth-icon"></span>
  <span class="label">item 4</span>
</li>
<li>
  <span class="icon fifth-icon"></span>
  <span class="label">item 5</span>
</li>
</ul> 
```

* * *

> 此外，当我将图像调整为更大时，我将这样做，它不会一直旋转。起初我认为这是动画的问题，但我不太确定，因为它被设置为 180 度旋转，无论大小都应该发生这种情况。

不幸的是，我看不到任何类似于您问题的第二部分的内容，是否附加了画廊插件或其他东西？我已经使用 Chrome Canary 和 FireFox 测试了您的网页

# maven - sourceFileExcludes maven-javadoc-plugin 中的标记

> ID：13465674
> 
> 赞同：6
> 
> 时间：2012-11-20T02:18:58.613
> 
> 标签：maven, javadoc

有没有人有一个示例如何使用[Maven Javadoc 插件](http://maven.apache.org/plugins/maven-javadoc-plugin/)`sourceFileExcludes`中的元素？我尝试了以下方法，但无法使其正常工作：

```
<sourceFileExcludes>
    <sourceFileExclude>**/internal/*</sourceFileExclude>
    <sourceFileExclude>**/Model/*</sourceFileExclude>
</sourceFileExcludes> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:24:33.250

您是否指定[了 excludePackageNames](http://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html#excludePackageNames)，因为您应该使用它们而不是您编写[的文档。](http://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html#sourceFileExcludes)

```
<excludePackageNames>*.internal:org.acme.exclude1.*:org.acme.exclude2</excludePackageNames> 
```

这似乎更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T19:54:34.610

它目前可能无法正常工作。插件问题跟踪器中记录了错误 - [MJAVADOC-365](http://jira.codehaus.org/browse/MJAVADOC-365)

# jquery - 如何使用 jQuery 样板制作回调函数

> ID：13465676
> 
> 赞同：0
> 
> 时间：2012-11-20T02:19:15.500
> 
> 标签：jquery, jquery-plugins, callback

我正在使用[jQuery Boilerplate](http://jqueryboilerplate.com/)模式创建一个新的 jQuery 插件。你能帮我展示创建回调函数的最佳方法吗？

```
// the semi-colon before function invocation is a safety net against concatenated 
// scripts and/or other plugins which may not be closed properly.
;(function ( $, window, undefined ) {

  // undefined is used here as the undefined global variable in ECMAScript 3 is
  // mutable (ie. it can be changed by someone else). undefined isn't really being
  // passed in so we can ensure the value of it is truly undefined. In ES5, undefined
  // can no longer be modified.

  // window and document are passed through as local variables rather than globals
  // as this (slightly) quickens the resolution process and can be more efficiently
  // minified (especially when both are regularly referenced in your plugin).

  // Create the defaults once
  var pluginName = 'defaultPluginName',
      document = window.document,
      defaults = {
        propertyName: "value"
      };

  // The actual plugin constructor
  function Plugin( element, options ) {
    this.element = element;

    // jQuery has an extend method which merges the contents of two or 
    // more objects, storing the result in the first object. The first object
    // is generally empty as we don't want to alter the default options for
    // future instances of the plugin
    this.options = $.extend( {}, defaults, options) ;

    this._defaults = defaults;
    this._name = pluginName;

    this.init();
  }

  Plugin.prototype.init = function () {
    // Place initialization logic here
    // You already have access to the DOM element and the options via the instance, 
    // e.g., this.element and this.options
  };

  // A really lightweight plugin wrapper around the constructor, 
  // preventing against multiple instantiations
  $.fn[pluginName] = function ( options ) {
    return this.each(function () {
      if (!$.data(this, 'plugin_' + pluginName)) {
        $.data(this, 'plugin_' + pluginName, new Plugin( this, options ));
      }
    });
  }

}(jQuery, window)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:45:30.670

在这种情况下，我仍然不明白您所说的*回调是什么意思。*如果你想要的是有一个返回值的方法，你必须创建一个对象的实例，`data`然后你可以调用你想要的方法。

```
var $instance = $('selector').plugin( options ).data('plugin_pluginName');
var returnedValue = $instance.methodThatReturnsSomething(); 
```

# ruby-on-rails - 在 Fedora 17 上安装 Redmine 时出现 mysql2 适配器问题

> ID：13465678
> 
> 赞同：1
> 
> 时间：2012-11-20T02:19:36.967
> 
> 标签：ruby-on-rails, redmine

我试图安装`Redmine`，`Fedora 17`遵循 [这个](http://www.redmine.org/issues/11071)

**直到这一步：**

`RAILS_ENV=production rake db:migrate`

**它抛出一个错误说：**

```
rake aborted!
Please install the mysql2 adapter: `gem install activerecord-mysql2-adapter` (cannot load such file -- mysql2/mysql2)
/var/www/redmine/lib/plugins/acts_as_activity_provider/init.rb:2:in `block in <top (required)>'
/var/www/redmine/config/initializers/00-core_plugins.rb:12:in `eval'
/var/www/redmine/config/initializers/00-core_plugins.rb:12:in `block in <top (required)>'
/var/www/redmine/config/initializers/00-core_plugins.rb:2:in `each'
/var/www/redmine/config/initializers/00-core_plugins.rb:2:in `<top (required)>'
/var/www/redmine/config/environment.rb:14:in `<top (required)>'
Tasks: TOP => db:migrate => environment 
```

**这很奇怪，因为我已经用 bundle 安装了 mysql2：**

```
bundle show
...
* mysql2 (0.3.11)//***which is right in the bundle show list***
... 
```

**我的 database.yml 就像：**

```
production:
  adapter: mysql2
  database: redmine
  host: localhost
  username: redmine
  password: 123456
  encoding: utf8 
```

其他人我参与

```
 ruby 1.9.3p327 (2012-11-10 revision 37606) [i386-linux]
    Rails 3.2.8                                          
    gem 1.8.24
    mysql  Ver 14.14 Distrib 5.5.28, for Linux (i686) using readline 5.1
    Redmine 2.1.3 
```

我通过谷歌找到了一些相关的问题，比如：[http](http://www.redmine.org/issues/11071#note-4) ://www.redmine.org/issues/11071#note-4 我按照他们说的做，添加符号链接

```
ln -s /usr/local/share/gems/gems/mysql2-0.3.11/lib /usr/share/ruby/mysql2 
```

**然后完全按照页面中发布的内容：**

```
rake aborted!
uninitialized constant Mysql2::Client::REMEMBER_OPTIONS 
```

我试图做 #6 中发布的内容，但它对我不起作用。这是解决我的问题的正确方法吗，我应该如何处理第二个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T11:40:19.810

添加`gem 'mysql2'`您的gemfile并运行`bundle install`，然后执行`RAILS_ENV=production rake db:migrate`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T15:10:25.937

如果您使用 Fedora 的 ruby​​，请尝试：

`yum install ruby-mysql`

如果您使用 RVM 或任何其他类似工具，请安装 mysql 的开发包，然后重新安装 ruby​​ mysql gem。

`yum install mysql-devel`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T08:07:23.820

```
> add gem "minitest" into Gemfile
> gem list | cut -d" " -f1 | xargs gem uninstall -aIx
> yum erase rubygem-activesupport-3.0.11-5.fc17.noarch
> yum install rubygem-bundler
> bundle install
> then other steps, this works!! 
```

详细请参考[此帖](https://bugzilla.redhat.com/show_bug.cgi?id=829209#c35) 谢谢！！

# python - 将 `defaultdict` 公开为常规 `dict`

> ID：13465681
> 
> 赞同：36
> 
> 时间：2012-11-20T02:20:11.317
> 
> 标签：python, python-3.x, wrapper, defaultdict

我正在使用`defaultdict(set)`在非常大的数据结构中填充内部映射。填充后，整个结构（包括映射）将暴露给客户端代码。那时，我不希望任何人修改映射。

没有人故意这样做。但有时，客户端代码可能会意外引用不存在的元素。那时，一个普通的字典会产生`KeyError`，但由于映射是`defaultdict`，它只是在该键处创建一个新元素（一个空集）。这很难捕捉，因为一切都在悄无声息地发生。但我需要确保不会发生这种情况（语义实际上不会中断，但映射会增长到巨大的大小）。

我该怎么办？我可以看到这些选择：

1.  在当前和未来的客户端代码中查找对映射执行字典查找的所有实例，并将其转换为`mapping.get(k, {})`。这太可怕了。

2.  `defaultdict`在数据结构完全初始化后“冻结” ，将其转换为`dict`. （我知道它并没有真正冻结，但我相信客户端代码实际上不会编写`mapping[k] = v`。）不优雅，并且性能受到很大影响。

3.  包装`defaultdict`成一个`dict`界面。有什么优雅的方法来做到这一点？恐怕性能损失可能很大（这种查找在紧密循环中大量使用）。

4.  子类`defaultdict`化并添加一个“关闭”所有`defaultdict`功能的方法，让它的行为就好像它是一个常规的`dict`. 它是上述 3 的变体，但我不确定它是否更快。如果不依赖实现细节，我不知道它是否可行。

5.  在数据结构中使用正则`dict`，重写那里的所有代码以首先检查元素是否在字典中，如果不在则添加。不好。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-20T02:29:33.173

[`defaultdict`](https://docs.python.org/3/library/collections.html#collections.defaultdict)文档说`default_factory`：

> 如果 default_factory 属性为 None，则会引发 KeyError 异常，并将键作为参数。

如果您只是将 defaultdict 的 default_factory 设置为`None`怎么办？例如，

```
>>> d = defaultdict(int)
>>> d['a'] += 1
>>> d
defaultdict(<type 'int'>, {'a': 1})
>>> d.default_factory = None
>>> d['b'] += 2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'b'
>>> 
```

不确定这是否是最好的方法，但似乎有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-24T19:35:59.237

完成填充 defaultdict 后，您可以简单地从中创建一个常规 dict：

```
my_dict = dict(my_default_dict) 
```

可以选择使用[`typing.Final`](https://docs.python.org/3/library/typing.html#typing.Final)类型注释。

如果默认字典是递归默认字典，请参阅使用递归解决方案的[此答案。](https://stackoverflow.com/a/30921635/832230)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T02:48:27.687

您可以创建一个包含对您的 dict 的引用并防止**setitem** ()的类

```
from collections import Mapping

class MyDict(Mapping):
    def __init__(self, d):
        self.d = d;

    def __getitem__(self, k):
        return self.d[k]

    def __iter__(self):
        return self.__iter__()

    def __setitem__(self, k, v):
        if k not in self.d.keys():
            raise KeyError
        else:
            self.d[k] = v 
```

# grails - 使用 chrome 驱动程序时出现 Selenium 异常

> ID：13465683
> 
> 赞同：1
> 
> 时间：2012-11-20T02:20:31.400
> 
> 标签：grails, selenium, geb, selenium-chromedriver

在 Grails 应用程序中使用 Geb 进行相同测试时，测试在使用默认的 HtmlUnitDriver 运行时通过。

但是，当我更改为 ChromeDriver 时，我收到了

> org.openqa.selenium.InvalidElementStateException：元素当前不可交互，可能无法操作

在测试登录页面时。

设置 emailField（通过其 id '#username' 选择）后立即引发异常。奇怪的是，我看到浏览器在字段上设置值，但在那之后（在执行以下代码行之前）它抛出了异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T00:18:35.577

我注意到登录页面有 2 个 id="username" 元素（其中一个是隐藏字段），这就是异常的原因。当我将登录页面的 id 更改为另一个值（并更新选择器）时，问题就解决了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-02-05T08:56:56.530

当我尝试访问弹出窗口上的文本字段时，我遇到了同样的异常。

```
org.openqa.selenium.InvalidElementStateException: Element is not currently interactable and may not be manipulated 
```

我意识到该窗口显示在两个位置，并验证了用于识别弹出窗口上的文本字段的 Xpath 确实在 FireBug+FirePath 插件中向我显示了两个结果。

我更新了 Xpath，以便它可以唯一地识别第二个弹出窗口上的文本字段，问题得到解决。

# drupal - 为什么我在使用 Varnish 的 ESI 片段上得到 503 服务不可用？

> ID：13465687
> 
> 赞同：0
> 
> 时间：2012-11-20T02:20:57.650
> 
> 标签：drupal, caching, varnish, esi

我已经在本地设置了 Varnish 并在页面的特定区域实现了 ESI 片段；但是，一旦我在 default.vcl 上打开 ESI，varnish 就会停止缓存，甚至更多，添加片段的页面的特定部分会呈现 503 服务不可用通知。

似乎使清漆停止缓存的行是这里的 else 语句：

```
if (req.url ~ "\.(png|gif|jpg|swf|css|js)$") {
    unset beresp.http.set-cookie;
    set beresp.ttl = 20m;
}
else {
    set beresp.do_esi = true;
} 
```

这是我的 default.vcl： http: [//pastebin.com/MEQF4Gbk](http://pastebin.com/MEQF4Gbk)

现在，在 RxHeaders 我得到很多“ESI_xmlerror c No ESI processing, first char not '<'”

这里是一个 RxHeaders 示例（用于 JS 文件） [http://pastebin.com/tX7zpBN1](http://pastebin.com/tX7zpBN1)

我想，我不明白如何告诉清漆只有在它有 esi 片段时才缓存？有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T19:44:03.137

您的 vcl 设置为不仅对包含 esi 的页面进行 esi 处理，而且对 esi 片段本身进行处理，后者失败导致 503s 而不是您想要的片段。如果您不想将片段作为 esi 容器本身递归处理，您可以将 VCL 更改为：

```
if (req.url ~ "\.(png|gif|jpg|swf|css|js)$") {
    unset beresp.http.set-cookie;
    set beresp.ttl = 20m;
}
else if (req.esi_level == 0 ) {
    set beresp.do_esi = true;
} 
```

如果您确实想将这些包含处理为 esi 容器本身，请确保它们以尖括号开头`<`（varnish 2 默认仅对 html/xml 执行 esi）。如果这不可能，您可以通过在启动 varnishd 时设置此参数来配置 varnish 不关心：

```
esi_syntax=0×1 
```

如果我是你，我会专门为可以包含 esi:includes 的资源启用 esi，而不是像你正在做的那样为选择的内容类型禁用它。这样您就不需要在您的 VCL 中维护可能更改的列表，并且不包含 esi 包含的资源不会浪费 varnish 扫描它们的时间。您可以基于来自后端的响应标头（例如 X-Varnish-Do-Esi）来执行此操作，并且仅为包含包含的资源发送该响应标头。

# php - 服务应用程序和 Google Analytics API V3：错误 101 (net::ERR_CONNECTION_RESET)

> ID：13465689
> 
> 赞同：3
> 
> 时间：2012-11-20T02:21:27.820
> 
> 标签：php, google-analytics-api

我正在尝试`Google Analytics`使用 PHP 获取我的帐户的一些信息。[我已经按照此答案](https://stackoverflow.com/a/10089698/1446827)在 Google Console API 中创建服务帐户的步骤进行了操作。我正在使用[Google API Client for PHP](https://code.google.com/p/google-api-php-client/)。

这是我到目前为止的代码：

```
<?php
$path_to_src = 'src';

// These files are in /src, upload its contents to your web server
require_once $path_to_src . '/Google_Client.php';               
require_once $path_to_src . '/contrib/Google_AnalyticsService.php';

$path_to_keyfile = '***'; //my private key

// Initialise the Google Client object
$client = new Google_Client();

// Your 'Product name'
$client->setApplicationName('My App Name');

$client->setAssertionCredentials(
    new Google_AssertionCredentials(        
        '**', //gserviceaccount mail
        array('https://www.googleapis.com/auth/analytics.readonly'),
        file_get_contents($path_to_keyfile)
    )
);

// Get this from the Google Console, API Access page
$client->setClientId('***'); // my cliente ID
$client->setAccessType('offline_access');
$analytics = new Google_AnalyticsService($client);

// create service and get data
$service = new Google_AnalyticsService($client);

// We have finished setting up the connection,
// now get some data and output the number of visits this week.

// Your analytics profile id. (Admin -> Profile Settings -> Profile ID)
$analytics_id   = 'ga:****'; // my profile id
$lastWeek       = date('Y-m-d', strtotime('-1 week'));
$today          = date('Y-m-d');

try {
    $results = $analytics->data_ga->get($analytics_id, 
                        $lastWeek, 
                        $today,'ga:visits');
    echo '<b>Number of visits this week:</b> ';
    echo $results['totalsForAllResults']['ga:visits'];
} catch(Exception $e) {
    echo 'There was an error : - ' . $e->getMessage();
} 
```

我`openssl`在 PHP 中启用了扩展：

![在此处输入图像描述](../Images/2f4f54bd2dce2f474e8bdbf17e79013d.png)

当浏览到 php 脚本的位置时，我只会得到一个几乎永远加载和以下错误：

![在此处输入图像描述](../Images/60f468b48c70074845a36ff573aec59e.png)

我正在使用 PHP 5.4.7：

![在此处输入图像描述](../Images/25a1452e394bc231de77762c0ff37f87.png)

调试 Google API 客户端代码后，脚本似乎在这一行中断：

```
if (!openssl_sign($data, $signature, $this->privateKey, "sha256")) 
```

这条线以下的任何东西都不会被调用。看起来错误发生在这一行。这里有不兼容的地方，还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T06:17:58.363

对于初学者来说，你应该改变一件事：

您将 AnalyticsService 实例化两次。取出你不使用的那个：

```
$service = new Google_AnalyticsService($client); 
```

看看这是否对您的问题有帮助。

# angularjs - 使用 URL 数据更改 AngularJS 中的类

> ID：13465690
> 
> 赞同：0
> 
> 时间：2012-11-20T02:21:38.777
> 
> 标签：angularjs

当我更改页面并使用 location.path() 或其他东西来获取相关的 URL 片段时，我想更改元素的类。

我正在使用 $routeProvider 进行路由。小提琴没有正确显示它，但它在我的代码中运行良好。我遇到的问题是当我加载下一页时它没有更新。

此代码获取我想要的 url 片段：

```
$scope.locationPath = $location.path().replace(/^\/([^\/]*).*$/, '$1'); 
```

这是一个非常简单的 JSfiddle：http: [//jsfiddle.net/timothybone/kmBXv/1/](http://jsfiddle.net/timothybone/kmBXv/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:04:37.747

will的答案几乎是正确的；您必须包装`$location.path()`一个函数，以便在每个摘要上执行它，而不仅仅是一次：

```
$scope.$watch(function () {
  return $location.path();
}, function() {
  return $location.path().replace(/^\/([^\/]*).*$/, '$1');
}); 
```

工作小提琴：http: [//jsfiddle.net/kmBXv/3/](http://jsfiddle.net/kmBXv/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T18:20:07.340

使用 $watch 的替代方法：

```
<li ng-class="{active:isActiveRoute('edit')}">edit</li>
<li ng-class="{active:isActiveRoute('list')}">list</li> 
```

然后在你的控制器中：

```
$scope.isActiveRoute = function(route) {
   // I added '/' instead of using a regex to remove it from path()
   return '/' + route === $location.path();
}; 
```

另请参阅[AngularJs: stateful client-side routing](https://stackoverflow.com/questions/13440876/angularjs-stateful-client-side-routing/13459608#13459608)，它有一个工作小提琴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T02:37:49.297

这样的事情怎么样？

```
$scope.$watch($location.path(), function() {
  return $location.path().replace(/^\/([^\/]*).*$/, '$1');
} 
```

# validation - 验证是否包含在选项数组中或为零

> ID：13465691
> 
> 赞同：12
> 
> 时间：2012-11-20T02:21:44.120
> 
> 标签：validation, activerecord, ruby-on-rails-3.2

我有一个模型，我想将字段的输入限制为 nil 或落在指定的值数组内。我可以让包含部分工作，但该`allow_nil: true`位似乎对我不起作用：

```
class Mock::Patient < ActiveRecord::Base
  LANGUAGE_OPTIONS = %w[English Spanish French German Chinese Hindi Punjabi]
  validates :preferred_language, inclusion: { in: LANGUAGE_OPTIONS }
end 
```

我尝试将最后一行修改为：

```
 validates :preferred_language, inclusion: { in: LANGUAGE_OPTIONS }, allow_nil: true 
```

但无济于事。表达简单包含或 nil 组合的最简单方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-15T17:03:29.273

允许 nil 验证同时仍然允许有限的值数组的正确形式如下：

```
validates :preferred_language, inclusion: { in: LANGUAGE_OPTIONS, allow_nil: true } 
```

注意 allow_nil 选项是如何*在*包含选项哈希中的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:16:38.193

我通过使验证行看起来像这样解决了这个问题：

```
validates :preferred_language, inclusion: { in: LANGUAGE_OPTIONS + [nil] } 
```

这样，我允许 nil，但我不会更改我在视图中用于提供选择选项集合的常量。从那以后，我还在数组前面添加了一个元素 ''，因此我不必在表单输入帮助程序中明确包含空白。

# c++ - C++ 中的日期验证和转换

> ID：13465695
> 
> 赞同：-1
> 
> 时间：2012-11-20T02:22:05.267
> 
> 标签：c++

我必须编写 2 个函数。将日期作为字符串接收并检查其是否为 mm/dd/yy 格式的方法；如果其格式不正确，则应对其进行编辑以使其正确。另一个函数应将验证日期转换为格式“月 dd，20yy”。

我很确定我可以处理第二个功能，但我在第一个功能上遇到了麻烦。我只是不知道如何检查它是否采用这种格式......有什么想法吗？

~~我以为这会起作用，但它似乎没有......~~

更新代码：

```
bool dateValidation(string shipDate)
{
    string temp;
    if(shipDate.length() == 8 )
    {
        if(shipDate[2] == '/' && shipDate[5] =='/')
        {
            int tempDay, tempMonth, tempYear;
            //Gather month
            temp = shipDate[0];
            temp += shipDate[1];
            //convert string to int
            tempMonth = temp.atoi;
            temp = "";

            //Gather day
            temp = shipDate[3];
            temp += shipDate[4];
            //convert string to int
            tempDay = temp.atoi;
            temp = "";

            //Gather year
            temp = shipDate[6];
            temp += shipDate[7];
            //convert string to int
            tempYear = temp.atoi;
            temp = "";

            if(tempMonth > 0 && tempMonth <= 12)
            {

                if(tempMonth == 9 ||
                   tempMonth == 4 ||
                   tempMonth == 6 ||
                   tempMonth == 11 ||)
                {
                    if(tempDay > 0 && tempDay <= 30)
                    {
                        if 30 days
                            }
                }
                else if(tempMonth == 2)
                {
                    if(tempDay > 0 && tempDay <= 28)
                    {
                        if 28 days
                            }
                }
                else
                {
                    if(tempDay > 0 && tempDay <= 31)
                    {
                        if 31 days
                            }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:30:00.160

您需要检查 4 件事：

*   有8个字吗？如果没有，那么甚至不要费心检查其他任何东西。它的格式不正确。
*   第三个和第五个字符都是'/'。如果没有，那么您仍然没有正确的格式。
*   检查每一对的有效值。一个月最多有 1 到 31 天，不超过 12 个月，月份范围从 01 到 12。一年可以是任意 2 位数字的任意组合。

这应该注意格式，但如果您想确保日期有效：

*   检查每个月的有效天数（1 月 31 日，2 月 28 日至 29 日...），并确实检查那些闰年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T04:38:29.673

这看起来很像我要评分的项目......如果这是我要评分的项目，您应该验证它是否符合公历。2012 年 1 月 1 日绝对有效，因此您可能想要做的，我希望您考虑的是创建一个 switch 语句来检查格式，例如 1/12/2012 和 10/2/2012，因为这些是有效的。然后从这些中解析出月份和年份。然后验证它们是否在公历的范围内。如果它是用于我猜是的类，您应该考虑将验证编写为与解析函数分开的函数。

所以先问日期是不是太长，是不是太短，不是是哪个版本，然后把dmy传给验证函数。这种模块化将简化您的代码并减少指令。

就像是

bool dateValidation(string shipDate) { string temp;

```
switch(shipDate.length())
{
     case(10):
        // do what  your doing
        verify(m,d,y);
        break;

     case(8):
        //dealing with single digits
        // verify 1 and 3 are '/' and the rest are numbers
        verifiy(m,d,y);
        break;

     case(9):
        //a little more heavy lifting here 
        // but its good thinking for a new programmer
        verifiy(m,d,y);
        break;
     default:       

      //fail message
        break;
} 
```

# asp.net - ReportViewer.Find 不工作

> ID：13465696
> 
> 赞同：0
> 
> 时间：2012-11-20T02:22:26.907
> 
> 标签：asp.net, reporting-services

我有一个文本框和一个链接按钮。在同一页面上，我有一个报告查看器。报告查看器位于更新面板中，链接按钮作为异步回发触发器。我正在尝试在报告中查找字符串（在文本框中输入）；当链接按钮被点击时。

```
protected void lbtnFind_Click(object sender, EventArgs e)
{
    ReportViewer1.Find(txtSearch.Text.Trim(), 1);
} 
```

但是那条线给出了错误：`Some parameters or credentials have not been specified`请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:52:43.500

如果`txtSearch`是您添加的控件，它不会在里面`ReportViewer1`。如果`txtSearch`是您内部的控件，`ContentTemplate`您应该在该控件中搜索如下：

```
var txtSrch = (TextBox)myUpdatePanel.ContentTemplate.Controls.FindControl("txtSearch"); 
```

您可以从那里获取文本值，然后设置 ReportViewer1 的参数并刷新它。

```
ReportParameter[] parameters = new ReportParameter[1];
parameters[0] = new ReportParameter("Search", txtSrch.Text);
ReportViewer1.LocalReport.SetParameters(parameters);
ReportViewer1.RefreshReport(); 
```

# asp.net - 在 windows azure 上打包和发布 web 角色时不包含资源文件

> ID：13465701
> 
> 赞同：0
> 
> 时间：2012-11-20T02:23:10.367
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010, azure, azure-storage

我想在 Windows Azure 上部署一个 Web 角色。该项目包含一个大型资源文件（实际上是一个扩展名为 的字典文件`.dct`）。

用vs2010打包后，查看文件，子目录`.cspkg`下没有`.dct`文件。`approot`可能是什么问题以及如何解决？

谢谢和最好的问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:35:12.563

您需要在文件属性中将其设置为 Copy Local。看这个截图：![在此处输入图像描述](../Images/7c4e4f542c5f3cb0e910a3dfda45914f.png)

编辑添加：根据@Summer_More_More_Tea，它不是 Copy Local 属性，而是将[Build Action 设置为 'Content'](http://msdn.microsoft.com/en-us/library/0c6xyb66.aspx)，它指定文件未编译但包含在输出中。

# caching - fread 使用预取吗？如果是这样，它如何处理一致性问题？

> ID：13465707
> 
> 赞同：1
> 
> 时间：2012-11-20T02:24:18.520
> 
> 标签：caching, fread, consistency, prefetch

我对 fread 的行为有疑问。fread 来自 stdio.h

我做了一个实验，如果我 fread(2KB)，那么 strace 日志显示有一个 read()=4KB。因此，这意味着 fread 使用了“预取”，或者至少四舍五入到 4KB。但是，如果 fread 使用预取并在库级别缓存数据，那么在程序使用“预取”数据之前，可能会被其他程序修改，而 fread 可能不知道这种修改，这将导致不一致的问题.

那么， fread 到底是做什么的呢？fread 是否有汇总、预取和库级别的 fread 缓存？如果它使用了预取，它如何处理不一致问题？

谢谢。

# vba - 重复 Microsoft Word VBA，直到找不到搜索结果

> ID：13465709
> 
> 赞同：10
> 
> 时间：2012-11-20T02:24:50.980
> 
> 标签：vba, ms-word

我创建了一个 MS Word 宏，用于搜索特定文本（由标记代码表示），剪切文本并将其插入新脚注，然后从脚注中删除标记代码。现在我希望宏重复，直到它在文本中找不到更多标记代码。
这是下面的宏

```
Sub SearchFN()

'find a footnote
Selection.Find.ClearFormatting
With Selection.Find
    .Text = "&&FB:*&&FE"
    .Replacement.Text = ""
    .Forward = True
    .Wrap = wdFindContinue
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchKashida = False
    .MatchDiacritics = False
    .MatchAlefHamza = False
    .MatchControl = False
    .MatchByte = False
    .MatchAllWordForms = False
    .MatchSoundsLike = False
    .MatchFuzzy = False
    .MatchWildcards = True
End With
Selection.Find.Execute

'cut the footnote from the text
Selection.Cut

'create a proper Word footnote
With Selection
    With .FootnoteOptions
        .Location = wdBottomOfPage
        .NumberingRule = wdRestartContinuous
        .StartingNumber = 1
        .NumberStyle = wdNoteNumberStyleArabic
    End With
    .Footnotes.Add Range:=Selection.Range, Reference:=""
End With

'now paste the text into the footnote
Selection.Paste

'go to the beginning of the newly created footnote
'and find/delete the code for the start of the note (&&FB:)
    Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
    .Text = "&&FB:"
    .Replacement.Text = ""
    .Forward = False
    .Wrap = wdFindContinue
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchKashida = False
    .MatchDiacritics = False
    .MatchAlefHamza = False
    .MatchControl = False
    .MatchByte = False
    .MatchAllWordForms = False
    .MatchSoundsLike = False
    .MatchFuzzy = False
    .MatchWildcards = True
End With
Selection.Find.Execute
With Selection
    If .Find.Forward = True Then
        .Collapse Direction:=wdCollapseStart
    Else
        .Collapse Direction:=wdCollapseEnd
    End If
    .Find.Execute Replace:=wdReplaceOne
    If .Find.Forward = True Then
        .Collapse Direction:=wdCollapseEnd
    Else
        .Collapse Direction:=wdCollapseStart
    End If
    .Find.Execute
End With

'do same for ending code (&&FE)
With Selection.Find
    .Text = "&&FE"
    .Replacement.Text = ""
    .Forward = True
    .Wrap = wdFindContinue
    .Format = False
    .MatchCase = False
    .MatchWholeWord = False
    .MatchKashida = False
    .MatchDiacritics = False
    .MatchAlefHamza = False
    .MatchControl = False
    .MatchByte = False
    .MatchAllWordForms = False
    .MatchSoundsLike = False
    .MatchFuzzy = False
    .MatchWildcards = True
End With
Selection.Find.Execute
With Selection
    If .Find.Forward = True Then
        .Collapse Direction:=wdCollapseStart
    Else
        .Collapse Direction:=wdCollapseEnd
    End If
    .Find.Execute Replace:=wdReplaceOne
    If .Find.Forward = True Then
        .Collapse Direction:=wdCollapseEnd
    Else
        .Collapse Direction:=wdCollapseStart
    End If
    .Find.Execute
End With

Selection.HomeKey Unit:=wdStory
'now repeat--but how??    

End Sub 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-13T23:20:17.373

这个问题很好，您可以使用结果循环浏览整个文档`Selection.Find.Found`。

`Selection.Find.Found`您所做的是开始搜索，如果找到结果，则仅在结果为真时进入循环。一旦你通过了这些，你就完成了。以下代码应该可以很好地为您解决问题。

```
Sub SearchFN()
    Dim iCount As Integer

    'Always start at the top of the document
    Selection.HomeKey Unit:=wdStory

    'find a footnote to kick it off
    With Selection.Find
        .ClearFormatting
        .Text = "&&FB:*&&FE"
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindContinue
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchKashida = False
        .MatchDiacritics = False
        .MatchAlefHamza = False
        .MatchControl = False
        .MatchByte = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchFuzzy = False
        .MatchWildcards = True
        .Execute
    End With

    'If we find one then we can set off a loop to keep checking
    'I always put a counter in to avoid endless loops for one reason or another
    Do While Selection.Find.Found = True And iCount < 1000
        iCount = iCount + 1

        'Jump back to the start of the document.  Since you remove the
        'footnote place holder this won't pick up old results
        Selection.HomeKey Unit:=wdStory
        Selection.Find.Execute

        'On the last loop you'll not find a result so check here
        If Selection.Find.Found Then

            ''==================================
            '' Do your footnote magic here
            ''==================================

            'Reset the find parameters
            With Selection.Find
                .ClearFormatting
                .Text = "&&FB:*&&FE"
                .Replacement.Text = ""
                .Forward = True
                .Wrap = wdFindContinue
                .Format = False
                .MatchCase = False
                .MatchWholeWord = False
                .MatchKashida = False
                .MatchDiacritics = False
                .MatchAlefHamza = False
                .MatchControl = False
                .MatchByte = False
                .MatchAllWordForms = False
                .MatchSoundsLike = False
                .MatchFuzzy = False
                .MatchWildcards = True
            End With
        End If
    Loop
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-22T05:51:33.753

这可以在不使用`Do while`（大量额外的行，以及空间/时间浪费）的情况下完成，它可以简单如下：

```
Sub SearchFN()

    'Start from The Top
    Selection.HomeKey Unit:=wdStory

    'Find the first search to start the loop
    Do
    With Selection.Find
        .ClearFormatting
        .Replacement.ClearFormatting
        .Text = "&&FB:*&&FE"
        .Replacement.Text = ""
        .Forward = True
        .Wrap = wdFindstop
        .Format = False
        .MatchCase = False
        .MatchWholeWord = False
        .MatchKashida = False
        .MatchDiacritics = False
        .MatchAlefHamza = False
        .MatchControl = False
        .MatchByte = False
        .MatchAllWordForms = False
        .MatchSoundsLike = False
        .MatchFuzzy = False
        .MatchWildcards = True
        .Execute
    End With

    'If we found the result then loop started
    If Selection.Find.Found Then

            '' Do your work here
            ' Always end your work after the first found result
            ' else it will be endless loop

    Else
    'If we do not found any then it will exit the loop
    Exit Do
    End If
    Loop

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-08T21:13:09.843

最简单的方法是使函数递归（函数调用自身）。将这一行添加到子函数或函数的底部：

```
If (Selection.Find.Found = True) then call SearchFN 
```

# jquery - 如何在 Django 中使用 jQuery/Ajax 发布？

> ID：13465711
> 
> 赞同：19
> 
> 时间：2012-11-20T02:24:57.053
> 
> 标签：jquery, python, ajax, django, post

我正在尝试在 Django 中使用 jQuery/AJAX 发布数据，但遇到了麻烦。当我运行下面的代码并单击“测试”按钮时，整个页面会再次重新加载，这不是我想要发生的（这就是我使用 AJAX 的原因）。

我也无法确认 AJAX 请求正在进入 Django 视图。

**编辑：**我已经对 return false 和`event.preventDefault()`. 未加载新页面，但我仍然无法在`<div id='message'>`字段中看到更新的文本。我不确定数据是否正在发送。我在控制台中看到：

```
POST /edit_favorites/ HTTP/1.1" 403 2294 
```

**视图.py**：

```
from django.shortcuts import render_to_response
from django.http import HttpResponse

def edit_favorites(request):
    if request.is_ajax():
        message = "Yes, AJAX!"
    else:
        message = "Not Ajax"
    return HttpResponse(message) 
```

**urls.py**：

```
url(r'^edit_favorites/', 'edit_favorites'), 
```

**HTML**：

```
<form method='post' id='test'>
  <input type="hidden" value="video34"/>
  <input type='submit' value='Test button'/>
  <div id='message'>Initial text</div>
</form> 
```

**JavaScript**：

```
$(document).ready(function () {
  $("#test").submit(function (event) {
    event.preventDefault();
    $.ajax({
      type: "POST",
      url: "/edit_favorites/",
      data: {
        'video': $('#test').val() // from form
      },
      success: function () {
        $('#message').html("<h2>Contact Form Submitted!</h2>")
      }
    });
    return false;
  });
}); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T02:31:47.570

错位`return false;`。它应该在`.submit()`函数的末尾。所以向上移动一行：

```
$(document).ready(function () {
  $("#test").submit(function (event) {
    $.ajax({
      type: "POST",
      url: "/edit_favorites/",
      data: {
        'video': $('#test').val() // from form
      },
      success: function () {
        $('#message').html("<h2>Contact Form Submitted!</h2>")
      }
    });
    return false; //<---- move it here
  });

}); 
```

**更新：**

关于问题`POST /edit_favorites/ HTTP/1.1" 403 2294`。检查与您的问题相似的这篇文章：

*   [Django jQuery 发布请求](https://stackoverflow.com/questions/12744159/django-jquery-post-request)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-24T03:18:57.563

以下方法对我有用。我也希望对你有所帮助。

```
from django.views.decorators.csrf import csrf_exempt
from django.http import HttpResponse

@csrf_exempt
def edit_favorites(request):
    if request.is_ajax():
        message = "Yes, AJAX!"
    else:
        message = "Not Ajax"
    return HttpResponse(message) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T02:31:38.887

这里发生的事情是，当您提交 HTML 表单时，它将表单的数据发送`action`到`<form>`. 在您的 javascript 中，您订阅了表单的提交事件，但是您永远不会禁用表单的默认行为，即遵循`action`属性。`preventDefault`在 jQuery 中，您可以通过在 event 参数上调用方法并返回来修改该行为`false`（如果您调用`preventDefault`，则返回`false`不是必需的，但最好确保...）：

```
$(...).submit(function(e) {
    e.preventDefault();
    ...
    return false;
}); 
```

**编辑**

至于错误，您的错误不是很有帮助，但我有一种预感，您没有验证 CSRF。更详细的解释在[这里](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)。然而，快速修复只是在您的 jQuery 之外包含[此](https://gist.github.com/3892061)文件并将[`ensure_csrf_cookie`](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.ensure_csrf_cookie)装饰器添加到您的视图中。

# twitter - Twitter Web 应用程序，用于显示提及我的推文

> ID：13465716
> 
> 赞同：3
> 
> 时间：2012-11-20T02:25:30.733
> 
> 标签：twitter

最近在一些 youtube 视频下有一个 Twitter 提要，显示与视频相关的所有推文以及人们对此的看法。

我想知道如何在我的网站上实现它，除了显示与我公司名称相关的推文。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:36:44.700

嗯，这是一个非常笼统的问题，所以我为您提供一个笼统的答案。使用 Twitter API 提取标有 @YourCompanyName 或 #YourCompany 的数据。

[https://dev.twitter.com/docs/api](https://dev.twitter.com/docs/api)

很直接。

# c# - WPF 设置焦点问题

> ID：13465722
> 
> 赞同：0
> 
> 时间：2012-11-20T02:26:25.410
> 
> 标签：c#, wpf, mvvm, focus

基础：我正在使用 MVVM 模式或其子集。

在我的主窗口中，我有一个按钮，可以打开一个带有新 DataContext 的用户控件，该函数看起来有点像这样：

```
public void SetUserControl()
{
     UCDatacontext = new UCViewModel(this);
     base.OnPropertyChanged("UCDatacontext");
     UCViewVisibilty = Visibility.Visible;
     UCDatacontext.IniFocus(); 
} 
```

然后当我完成后，我关闭用户控件并处理 DataContext。现在我遇到的问题是我似乎无法让焦点设置正常工作，我在用户控件中有一个文本框，我想在视图变为可见时将焦点设置为。然而，在我第一次尝试设置焦点时，它只用一个不闪烁的插入符号填充文本框，经过调查，我相信这是因为 TB 没有获得键盘焦点（只有逻辑焦点），但即使在明确设置键盘焦点后，我仍然得到不眨眼的插入符号，并且只有在点击 TB 之后它才会获得焦点。我用来设置焦点的方法与[此处](https://stackoverflow.com/questions/1356045/set-focus-on-textbox-in-wpf-from-view-model-c-wpf)描述的方法类似。
如果在视图中我通过在 FocusSet 事件中打印出它确实设置的文本框来进行一些写行调试，但是仅在我第一次调用 SetUserControl() 时。如果我再次调用 SetUserControl() 它什么也不做，除了使视图可见但不触发焦点设置事件。
以下是 MainWindow 中的代码行：

```
<Grid Grid.ColumnSpan="5" Grid.RowSpan="5" Visibility="{Binding Path=UCViewVisibilty }" x:Name="UCGrid"   >
    <Grid.Effect>
        <DropShadowEffect  />
    </Grid.Effect>
    <View:UCView DataContext="{Binding Path=UCDatacontext}"   />    
</Grid> 
```

和用户控制网格：

```
<Grid > 
    <TextBox Uid="UCTB" localExtensions:FocusExtension.IsFocused="{Binding Path=UCTBFocus}" Height="23" HorizontalAlignment="Left" Margin="113,56,0,0" Name="UCTB" VerticalAlignment="Top" Width="165" Text="{Binding Path=UCTBContent, UpdateSourceTrigger=PropertyChanged}" GotFocus="UCTB_GotFocus" />
</Grid > 
```

Focus 在 UserControlViewModel 中设置，在 Usercontrol 渲染后设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:53:33.850

事实证明，在摆弄代码之后，在 View 中没有正确设置焦点的原因是因为 View Model 中的绑定是这样的：

```
 bool _tBfocus;
    public bool UCTBFocus
    {
        get { return _tBfocus; }
        set
        {
            _tBfocus= value;
            base.OnPropertyChanged("UCTBFocus");

       } 
```

代替：

```
 bool _tBfocus;
    public bool UCTBFocus
    {
        get { return _tBfocus; }
        set
        {
            if (_tBfocus == value)
                return;
            _tBfocus= value;
            base.OnPropertyChanged("UCTBFocus");

        }
    } 
```

更改后一切正常：/但如果有人可以向我解释为什么我所遇到的这种烦恼是由此引起的，我将不胜感激：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T05:18:49.107

像这样从上到下一一设置焦点。

```
InitializeComponent();
        FocusManager.SetFocusedElement(this, TabItem); //this is Window , TabItem is UserControl in this Window
        FocusManager.SetFocusedElement(TabItem, TextBox); // TabItem is UserControl and TextBox is Control in TabItem UC 
```

我希望这将有所帮助。

# python - 项目未附加到列表，或列表在 python 中返回为空？

> ID：13465723
> 
> 赞同：3
> 
> 时间：2012-11-20T02:26:32.603
> 
> 标签：python, list, append

在我的代码中，项目 percentgrade 没有在 for 循环的每次迭代中附加到列表 lnpercentgrade ，但我不知道为什么。当我尝试对 lnpercentgrade 中的项目求和时（在代码末尾），我返回 0，因为 lnpercentgrade 是 empy。我将 lnpercentgrades 声明为 maininput() 函数之外的全局变量，因为否则当我尝试求和（lnpercentgrades）时，在代码的底部，我会返回“lnpercentgrades not defined”。

我猜 lnpercentgrades 没有在 maininput() 函数中以某种方式被修改，即使我确定我在 .append 函数之前输入正确。

我真正想做的是将总和（lnpercentgrades）与 100 匹配，但是当我输入 5 个项目的值都为 20 时，总和是 0 而不是 100。

重要的行用箭头标记<<<<<<<<<<<<<<<<<<<<

```
lnpercentgrades = []   <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
def maininput():
    numtests = int(input("Enter # of tests:"))
    numassign = int(input("Enter # of assignments:"))
    numquizzes = int(input("Enter # of quizzes:"))
    numlabs = int(input("Enter # of labs:"))

    l = [numtests, numassign, numquizzes, numlabs]
    ln = ["test", "assignments", "quizzes", "labs"]
    lnpercentgrades = [] <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
    testwavg = None
    numassignwavg = None
    numquizzeswavg = None
    numlabswavg = None
    numfinalwavg = None

    lnwavg = [testwavg, numassignwavg, numquizzeswavg, numlabswavg]
    print(l[0])
    print("Is there a separately weighted final?")
    yn = int(input("Enter 1 for yes. 2 for no:"))
    while (yn > 2 or yn < 1):
        yn = int(input("Enter 1 for yes. 2 for no, please:"))

    n = 4 
    if yn == 1:
        final = 1
        l.append(final)
        ln.append("final")
        lnwavg.append(numfinalwavg)
        n = 5

    for i in range (n):
        if l[i] > 0:
            print("Enter % of total grade of",ln[i],":") 
            percentgrade = float(input("")) 
            print("you inputed:", percentgrade)
            lnpercentgrades.append(percentgrade) <<<<<<<<<<<<<<<<<<<<<<
            percentgrade = percentgrade*.01 

            varscoreslist = []
            for x in range(l[i]):
                print("Enter score of", ln[i], x+1,"as a fraction:")
                from fractions import Fraction
                inputfrac = input("")
                varscore = float(sum(Fraction(s) for s in inputfrac.split())) 
                #the above converts fractional inputs to decimals
                varscoreslist.append(varscore)

            if ln[i] == "labs":
                score = sum(varscoreslist)
            else:
                sumscores = sum(varscoreslist)
                score = sumscores/l[i]

            lnwavg[i] = score*percentgrade

maininput()
print(lnpercentgrades)
print("sum of percent of grades", sum(lnpercentgrades)) <<<<<<<<<<<<<<<

if float(sum(lnpercentgrades)) != 100:  <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<
    print("Sorry, the grade percent of each item enter did not sum to 100:")
    print("Program will rerun.")
    input("")
    maininput()

coursegrade = sum(lnwavg)
print("Your course grade is:", coursegrade)

input("") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T02:30:29.773

乍一看，您可能有范围界定问题。您正在修改函数内部的列表，但请记住这是列表的本地副本。尽管您在外部范围内声明它，但您并没有在它前面加上`global`，这意味着它会创建一个函数本地副本，执行其业务然后退出，根本不会影响“主”列表。

我建议修改您的函数以返回您想要的列表，以便您可以按预期使用它们。这是一个基本示例：

```
def MyFunc():
    l1 = ['my', 'first', 'list']
    l2 = ['another', 'list']
    return l1, l2

main_list, second_list = MyFunc()

print(main_list)
print(second_list) 
```

这将输出：

```
['my', 'first', 'list']
['another', 'list'] 
```

如果您真的想将变量保留在外部范围内，则必须`global`在函数内部为其开头（尽管我可能会使用第一种方法）：

```
main_list = []
second_list = []

def MyFunc():
    global main_list
    global second_list
    main_list = ['more', 'good', 'stuff']
    second_list = ['another', 'list']

MyFunc()

print(main_list) # ['more', 'good', 'stuff']
print(second_list) # ['another', 'list'] 
```

# c# - 在数据绑定生成的 WPF 项目中进行所有者绘制

> ID：13465724
> 
> 赞同：0
> 
> 时间：2012-11-20T02:26:34.530
> 
> 标签：c#, wpf, data-binding, treeview, treeviewitem

我目前正在开发 WPF TreeView 显示。这个TreeView的内容来自普通的Data Binding：

```
<TreeView HorizontalAlignment="Stretch" 
      x:Name="LogMonitor" 
      VerticalAlignment="Stretch"
      ItemsSource="{Binding LogEntries, UpdateSourceTrigger = PropertyChanged }">
    <TreeView.Resources>
        <HierarchicalDataTemplate 
                DataType="{x:Type Log:SystemLog}"
                ItemsSource="{Binding Path=Lines}">
                <TextBlock Text="{Binding Header}"/>
        </HierarchicalDataTemplate>
    </TreeView.Resources>
</TreeView> 
```

TreeView 是按关键字过滤的，但我还希望对保留在 TreeView 中的所有 TreeViewItem 进行关键字突出显示。

例如，如果有一个带有标题*“This is an apple”*的 TreeViewItem，并且用户键入*“apple”*作为过滤关键字，它应该显示一个 TreeViewItem，如下所示：

![强调](../Images/d7ca443855d94205904fe4a490a5a8e2.png)

我尝试了一些方法，但运气不佳。

1.  使用内置样式：
    突出显示需要字符串匹配并将颜色块放在匹配的子字符串下方。似乎没有可以这样装扮的内置样式模板。

2.  在 ViewModel 对象中绘制到画布并将画布绑定到 TreeViewItem ：
    它仅在未选择 TreeViewItem 时有效，一旦选择，内置的绘制调用无法找到以“突出显示”样式绘制画布的方法并离开一个空白区域。

3.  创建 TreeViewItem 的子类并重写 OnRender 函数，然后替换 TreeView 的 ItemContainerGenerator 以返回我的 TreeViewItem 子类：
    不可能，TreeView 的 ItemContainerGenerator 不可设置且非虚拟。

    而且我只能想到另一种选择：

4.  放弃Data Binding，自己将重写了OnRender函数的TreeViewItem的子类推入TreeView的Items列表中。

它在实验中给了我积极的结果。但我对放弃数据绑定范式感到不舒服。所以我想问有没有其他方法可以用数据绑定礼物来做所有者绘制。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:00:14.910

创建一个用户控件，将文本分成 3 个区域：prehighlight、highlight 和 post highlight。您可以使用标准绑定和样式来完成这一切。每个 TreeViewItem 都是这些控件之一。

# sql - SQL 嵌套聚合函数

> ID：13465725
> 
> 赞同：0
> 
> 时间：2012-11-20T02:26:39.513
> 
> 标签：sql, oracle, select, aggregate-functions

我正在尝试获得数据库中电影的最低平均评分。

目前我有：

```
select movie.movietitle as "Lowest Average Rating"
from movie, rating 
where movie.movieid = rating.movieid
group by movie.movietitle
having avg(rating.rating) = min(avg(rating.rating)); 
```

但我收到错误“组函数嵌套太深”。谁能为我提供正确的方法并解释为什么这不起作用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:28:42.367

```
SELECT MOVIETITLE AS "Movie Title", AVG(RATING) AS "Lowest Average Rating"
FROM MOVIE, RATING
WHERE MOVIE.MOVIEID = RATING.MOVIEID
GROUP BY MOVIETITLE
HAVING AVG(RATING) =
(
    SELECT MIN(AVG(RATING)) AS "AVGRating"
    FROM MOVIE, RATING
    WHERE MOVIE.MOVIEID = RATING.MOVIEID
    GROUP BY MOVIETITLE
) 
```

*   [SQLFiddle 演示（*简单示例*）](http://www.sqlfiddle.com/#!4/9a3f2/31)
*   [SQLFiddle 演示（*简单示例*）](http://www.sqlfiddle.com/#!4/9a3f2/33)

# windows-phone-7 - 在 windows phone 7 中使用 AdControl

> ID：13465729
> 
> 赞同：0
> 
> 时间：2012-11-20T02:27:52.120
> 
> 标签：windows-phone-7, scroll

如何使 Adcontrol 始终在屏幕底部可见。现在它正在屏幕的尽头。

我有枢轴控制，其中我有与数据动态绑定的列表框。枢轴控制后，我有 adcontrol。因此，当 Listbox 中的数据增长时，adcontrol 就会下降。如何让它固定在底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:58:59.393

您的根布局控件应该是一个包含枢轴和广告控件的网格：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <toolkit:Pivot Grid.Row="0">
        <ListBox>
           ...
        </ListBox>
    </toolkit:Pivot>

    <AdControl Grid.Row="1"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:27:49.473

您当然可以使用弹出呼叫并在其中包含广告。我在下面的解决方案是使用画布来保存广告，其中会产生相同的结果，但可能更熟悉您以前使用过的内容。

此外，如果您不想，您不必设置列表框/数据透视容器的高度和宽度。画布/弹出窗口的作用是在枢轴控件之外，因此它始终位于堆栈顶部。

例如（近似您的代码）

```
<Grid x:Name="LayoutRoot">
   <controls:Pivot>
       <!--PivotItemOne-->
       <controls:PivotItem>
           <Grid>
            <!-- code -->
           </Grid>
       </controls:PivotItem>

   ....

   </controls:Pivot>

 <Canvas x:Name="Ad" VerticalAlignment="Bottom" Width="Auto" Height="80"/>
   <!-- or whatever height you want depending on ad size -->

</Grid> 
```

这样，画布始终位于页面底部并悬停在您的数据透视控件上。如果枢轴在枢轴控件之外发生变化，则无关紧要。

如果您曾经需要摆脱广告可见性或破坏容器本身，那么与更改列表框/枢轴大小相比，总体上需要更少的工作。

# android - Android WebViewClient 中的 onPageFinished 被认为是什么？

> ID：13465732
> 
> 赞同：18
> 
> 时间：2012-11-20T02:28:02.633
> 
> 标签：android, webview, webviewclient

在我的网页完成加载后，我正在尝试对 Android WebView 执行操作。我将 WebView 设置为具有 WebViewClient 以使用 onPageFinished 事件回调。但是，经过一些测试，似乎并没有等到页面上的所有 JS 都完成加载后，我的 onPageFinished 代码才会触发。

谷歌文档是这样说的：

```
public void onPageFinished (WebView view, String url) 
```

在 API 级别 1 中添加 通知主机应用程序页面已完成加载。此方法仅对主机调用。调用 onPageFinished() 时，渲染图片可能还没有更新。要获取新图片的通知，请使用 onNewPicture(WebView, Picture)。

> 参数
> 
> view 正在启动回调的 WebView。
> 
> url 页面的 url。

1) onPageFinished 是否只等待 DOM 加载？

2）有没有办法检测页面上的任何JS何时完成？如果是这样，我应该使用什么？

我在 WebViewClient 中看不到任何用于此目的的内容。我不想增加延迟，因为我的用户可以使用 EDGE 或 LTE。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T18:47:54.883

您需要实现来自 WebChromeClient 的回调。onPageFinished() 是 WebViewClient 提供的 API。还有另一个名为 WebChromeClient 的界面提供您正在寻找的进度信息：

[http://developer.android.com/reference/android/webkit/WebChromeClient.html#onProgressChanged(android.webkit.WebView](http://developer.android.com/reference/android/webkit/WebChromeClient.html#onProgressChanged(android.webkit.WebView) , int)

打开上面的链接并查找 onProgressChanged(WebView view, int newProgress) - 'newProgress' 变量为您提供已完成页面加载的百分比。当它达到 100 时，您就有了一个有效的页面。onPageFinished() 不能可靠地用于此（由于服务器端重定向等）

我不知道您所说的“页面上的 JS 完成时”是什么意思。也许你可以澄清你的意思？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-20T07:48:44.120

从：

[https://chromium.googlesource.com/chromium/src.git/+/master/android_webview/java/src/org/chromium/android_webview/AwWebContentsObserver.java](https://chromium.googlesource.com/chromium/src.git/+/master/android_webview/java/src/org/chromium/android_webview/AwWebContentsObserver.java)

```
 @Override
    public void didFinishNavigation(final String url, boolean isInMainFrame, boolean isErrorPage,
            boolean hasCommitted, boolean isSameDocument, boolean isFragmentNavigation,
            Integer pageTransition, int errorCode, String errorDescription, int httpStatusCode) {
        ...
        if (client != null && isFragmentNavigation) {
            client.getCallbackHelper().postOnPageFinished(url);
        }
    }

    @Override
    public void didFailLoad(
            boolean isMainFrame, int errorCode, String description, String failingUrl) {
        AwContentsClient client = mAwContentsClient.get();
        if (client == null) return;
        String unreachableWebDataUrl = AwContentsStatics.getUnreachableWebDataUrl();
        boolean isErrorUrl =
                unreachableWebDataUrl != null && unreachableWebDataUrl.equals(failingUrl);
        if (isMainFrame && !isErrorUrl && errorCode == NetError.ERR_ABORTED) {
            // Need to call onPageFinished for backwards compatibility with the classic webview.
            // See also AwContents.IoThreadClientImpl.onReceivedError.
            client.getCallbackHelper().postOnPageFinished(failingUrl);
        }
    }

    @Override
    public void didStopLoading(String validatedUrl) {
        if (validatedUrl.length() == 0) validatedUrl = ContentUrlConstants.ABOUT_BLANK_DISPLAY_URL;
            AwContentsClient client = getClientIfNeedToFireCallback(validatedUrl);
        if (client != null && validatedUrl.equals(mLastDidFinishLoadUrl)) {
            client.getCallbackHelper().postOnPageFinished(validatedUrl);
        mLastDidFinishLoadUrl = null;
        }
    } 
```

我们可以很容易地看到 onPageFinished 并不是您所期望的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T01:52:08.780

要回答您的第一个问题：我发现在所有资产（css/js/images）完成加载该页面之前不会调用它`onProgressChanged`。`100``onPageFinished`

但是，我找不到任何说明这一点的官方文件。

# javascript - JavaScript中有URL类吗？

> ID：13465733
> 
> 赞同：10
> 
> 时间：2012-11-20T02:28:08.897
> 
> 标签：javascript, url

在 JavaScript 中，是否有任何等价于

*   iOS SDK 中的 NSURL 类或
*   Java中的URL类？

有了这样的课程，我想：

*   规范化 URL，
*   从方案、主机、路径组件等组成一个 URL，以及
*   将 URL 分解为其元素。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T02:35:29.400

James Padolsey 解决了这个问题。

简而言之，您可以使用 来创建锚元素`document.createElement()`，然后可以轻松访问它的几个原生属性，例如`protocol`、`port`和`hostname`。

欲了解更多信息：http: [//james.padolsey.com/javascript/parsing-urls-with-the-dom/](http://james.padolsey.com/javascript/parsing-urls-with-the-dom/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-05-27T18:44:49.737

是的！现在有一个标准的、广泛兼容的 Javascript [URL 类](https://developer.mozilla.org/en-US/docs/Web/API/URL)。

> 构造函数采用 url 参数，如果 url 参数是相对 URL，则使用可选的 base 参数作为基础

```
const url = new URL(window.location.href);
console.log(url.hostname); // "www.example.com"
console.log(url.pathname); // "/cats" 
```

# ios5 - BadgeValue 在 iOS 5 的 TabBarController 的 moreTableView 上不起作用（在 iOS 6 上运行良好）

> ID：13465738
> 
> 赞同：2
> 
> 时间：2012-11-20T02:28:58.243
> 
> 标签：ios5, ios6, uitabbarcontroller, uitabbaritem, tabbarcontroller

我有一个在 MORE 表视图中显示的 ViewController 的 badgeValue。它在 iOS 6 上运行良好，但在 iOS 5 或更低版本上无法运行。

我正在设置 tabBarItem 的 badgeValue 来设置要显示的值。

任何人都可以建议该怎么做吗？

谢谢

# git - 从缓存中删除以前的 .git 文件夹

> ID：13465743
> 
> 赞同：1
> 
> 时间：2012-11-20T02:29:18.763
> 
> 标签：git

我将旧项目中的文件放入新项目中。

我将一个 git 存储库克隆到一个文件夹中，然后将其复制到另一个 git 存储库文件夹中，并进行了适当的初始更改，但我没有跟踪。我想将所有文件推送到新的 git 存储库。我试图添加这个：

```
$ git add old/* 
```

我回来了：

```
fatal: Path 'old/conf' is in submodule 'old' 
```

我试图删除整个 oldsoft/.git 文件夹（我在父文件夹中有新的 .git 文件夹），但是当我尝试添加 oldsoft/* 时它仍然给我同样的错误。我想我需要从缓存中删除 .git 信息，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:53:01.620

```
git rm --cached old
git add old 
```

# ios - iOS AVFoundation：设置视频方向

> ID：13465746
> 
> 赞同：7
> 
> 时间：2012-11-20T02:29:46.717
> 
> 标签：ios, video, avfoundation, quicktime

我一直在努力解决在 iOS 设备上捕获期间和之后控制视频方向的问题的几个方面。感谢Apple以前的答案和文档，我已经能够弄清楚了。但是，现在我想将一些视频推送到网站上，我遇到了一些特殊的问题。我在这个问题中特别概述[了这个问题](https://stackoverflow.com/questions/12486870/chrome-html5-video-flipping-portrait-sideways)，并且[建议的解决方案](http://help.videojs.com/discussions/problems/1508-video-orientation-for-iphone-wrong)结果证明需要在视频编码期间设置方向选项。

可能是这样，但我不知道如何去做。有关设置方向的文档是关于正确设置它以在设备上显示的，我已经实施了[此处找到的建议。](http://developer.apple.com/library/ios/#qa/qa1744/_index.html%23//apple_ref/doc/uid/DTS40011134)但是，此建议并未针对非 Apple 软件（例如 VLC 或 Chrome 浏览器）正确设置方向。

谁能提供有关如何在设备上正确设置方向以使其对所有查看软件正确显示的见解？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-09-14T12:48:37.317

最后，根据@Aaron Vegh 和@Prince 的回答，我想出了我的解决方案：//Converting video

```
+(void)convertMOVToMp4:(NSString *)movFilePath completion:(void (^)(NSString *mp4FilePath))block{

AVURLAsset * videoAsset = [[AVURLAsset alloc]initWithURL:[NSURL fileURLWithPath:movFilePath]  options:nil];

AVAssetTrack *sourceAudioTrack = [[videoAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

AVMutableComposition* composition = [AVMutableComposition composition];

AVMutableCompositionTrack *compositionAudioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio
                                                                            preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration)
                               ofTrack:sourceAudioTrack
                                atTime:kCMTimeZero error:nil];

AVAssetExportSession * assetExport = [[AVAssetExportSession alloc] initWithAsset:composition
                                                                      presetName:AVAssetExportPresetMediumQuality];

NSString *exportPath =  [movFilePath stringByReplacingOccurrencesOfString:@".MOV" withString:@".mp4"];

NSURL * exportUrl = [NSURL fileURLWithPath:exportPath];

assetExport.outputFileType = AVFileTypeMPEG4;
assetExport.outputURL = exportUrl;
assetExport.shouldOptimizeForNetworkUse = YES;
assetExport.videoComposition = [self getVideoComposition:videoAsset composition:composition];

[assetExport exportAsynchronouslyWithCompletionHandler:
 ^(void ) {
     switch (assetExport.status)
     {
         case AVAssetExportSessionStatusCompleted:
             //                export complete
                    if (block) {
                         block(exportPath);
                }
             break;
         case AVAssetExportSessionStatusFailed:
             block(nil);
             break;
         case AVAssetExportSessionStatusCancelled:
            block(nil);
             break;
     }
 }];
} 
```

//获取当前方向

```
 +(AVMutableVideoComposition *) getVideoComposition:(AVAsset *)asset composition:( AVMutableComposition*)composition{
    BOOL isPortrait_ = [self isVideoPortrait:asset];

    AVMutableCompositionTrack *compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

    AVAssetTrack *videoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack:videoTrack atTime:kCMTimeZero error:nil];

    AVMutableVideoCompositionLayerInstruction *layerInst = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTrack];

    CGAffineTransform transform = videoTrack.preferredTransform;
    [layerInst setTransform:transform atTime:kCMTimeZero];

    AVMutableVideoCompositionInstruction *inst = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    inst.timeRange = CMTimeRangeMake(kCMTimeZero, asset.duration);
    inst.layerInstructions = [NSArray arrayWithObject:layerInst];

    AVMutableVideoComposition *videoComposition = [AVMutableVideoComposition videoComposition];
    videoComposition.instructions = [NSArray arrayWithObject:inst];

    CGSize videoSize = videoTrack.naturalSize;
    if(isPortrait_) {
        NSLog(@"video is portrait ");
        videoSize = CGSizeMake(videoSize.height, videoSize.width);
    }
    videoComposition.renderSize = videoSize;
    videoComposition.frameDuration = CMTimeMake(1,30);
    videoComposition.renderScale = 1.0;
    return videoComposition;
   } 
```

//获取视频

```
+(BOOL) isVideoPortrait:(AVAsset *)asset{
BOOL isPortrait = FALSE;
NSArray *tracks = [asset tracksWithMediaType:AVMediaTypeVideo];
if([tracks    count] > 0) {
    AVAssetTrack *videoTrack = [tracks objectAtIndex:0];

    CGAffineTransform t = videoTrack.preferredTransform;
    // Portrait
    if(t.a == 0 && t.b == 1.0 && t.c == -1.0 && t.d == 0)
    {
        isPortrait = YES;
    }
    // PortraitUpsideDown
    if(t.a == 0 && t.b == -1.0 && t.c == 1.0 && t.d == 0)  {

        isPortrait = YES;
    }
    // LandscapeRight
    if(t.a == 1.0 && t.b == 0 && t.c == 0 && t.d == 1.0)
    {
        isPortrait = FALSE;
    }
    // LandscapeLeft
    if(t.a == -1.0 && t.b == 0 && t.c == 0 && t.d == -1.0)
    {
        isPortrait = FALSE;
    }
}
return isPortrait; 
```

}

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-19T15:59:28.493

[在此处](http://developer.apple.com/library/mac/#releasenotes/AudioVideo/RN-AVFoundation/#//apple_ref/doc/uid/TP40010717-CH1-DontLinkElementID_12)的 Apple 文档中，它指出：

> 客户端现在可以在其 AVCaptureVideoDataOutput -captureOutput:didOutputSampleBuffer:fromConnection: 委托回调中接收物理旋转的 CVPixelBuffer。在之前的 iOS 版本中，前置摄像头总是在 AVCaptureVideoOrientationLandscapeLeft 中提供缓冲区，而后置摄像头总是在 AVCaptureVideoOrientationLandscapeRight 中提供缓冲区。支持所有 4 种 AVCaptureVideoOrientation，并且旋转是硬件加速的。为了请求缓冲区旋转，客户端在 AVCaptureVideoDataOutput 的视频 AVCaptureConnection 上调用 -setVideoOrientation:。请注意，物理旋转缓冲区确实会带来性能成本，因此只有在必要时才请求旋转。例如，如果您希望使用 AVAssetWriter 将旋转视频写入 QuickTime 电影文件，

因此，Aaron Vegh 发布的使用 AVAssetExportSession 的解决方案有效，但不是必需的。就像 Apple 文档所说的那样，如果您想正确设置方向以便它在 VLC 等非苹果快速播放器或使用 Chrome 的网络上播放，您必须在 AVCaptureConnection 上为 AVCaptureVideoDataOutput 设置视频方向。如果您尝试为 AVAssetWriterInput 设置它，您将得到 VLC 和 Chrome 等播放器的错误方向。

这是我在设置捕获会话期间设置它的代码：

```
// DECLARED AS PROPERTIES ABOVE
@property (strong,nonatomic) AVCaptureDeviceInput *audioIn;
@property (strong,nonatomic) AVCaptureAudioDataOutput *audioOut;
@property (strong,nonatomic) AVCaptureDeviceInput *videoIn;
@property (strong,nonatomic) AVCaptureVideoDataOutput *videoOut;
@property (strong,nonatomic) AVCaptureConnection *audioConnection;
@property (strong,nonatomic) AVCaptureConnection *videoConnection;
------------------------------------------------------------------
------------------------------------------------------------------

-(void)setupCaptureSession{
// Setup Session
self.session = [[AVCaptureSession alloc]init];
[self.session setSessionPreset:AVCaptureSessionPreset640x480];

// Create Audio connection ----------------------------------------
self.audioIn = [[AVCaptureDeviceInput alloc]initWithDevice:[self getAudioDevice] error:nil];
if ([self.session canAddInput:self.audioIn]) {
    [self.session addInput:self.audioIn];
}

self.audioOut = [[AVCaptureAudioDataOutput alloc]init];
dispatch_queue_t audioCaptureQueue = dispatch_queue_create("Audio Capture Queue", DISPATCH_QUEUE_SERIAL);
[self.audioOut setSampleBufferDelegate:self queue:audioCaptureQueue];
if ([self.session canAddOutput:self.audioOut]) {
    [self.session addOutput:self.audioOut];
}
self.audioConnection = [self.audioOut connectionWithMediaType:AVMediaTypeAudio];

// Create Video connection ----------------------------------------
self.videoIn = [[AVCaptureDeviceInput alloc]initWithDevice:[self videoDeviceWithPosition:AVCaptureDevicePositionBack] error:nil];
if ([self.session canAddInput:self.videoIn]) {
    [self.session addInput:self.videoIn];
}

self.videoOut = [[AVCaptureVideoDataOutput alloc]init];
[self.videoOut setAlwaysDiscardsLateVideoFrames:NO];
[self.videoOut setVideoSettings:nil];
dispatch_queue_t videoCaptureQueue =  dispatch_queue_create("Video Capture Queue", DISPATCH_QUEUE_SERIAL);
[self.videoOut setSampleBufferDelegate:self queue:videoCaptureQueue];
if ([self.session canAddOutput:self.videoOut]) {
    [self.session addOutput:self.videoOut];
}

self.videoConnection = [self.videoOut connectionWithMediaType:AVMediaTypeVideo];
// SET THE ORIENTATION HERE -------------------------------------------------
[self.videoConnection setVideoOrientation:AVCaptureVideoOrientationPortrait];
// --------------------------------------------------------------------------

// Create Preview Layer -------------------------------------------
AVCaptureVideoPreviewLayer *previewLayer = [[AVCaptureVideoPreviewLayer alloc]initWithSession:self.session];
CGRect bounds = self.videoView.bounds;
previewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
previewLayer.bounds = bounds;
previewLayer.position=CGPointMake(CGRectGetMidX(bounds), CGRectGetMidY(bounds));
[self.videoView.layer addSublayer:previewLayer];

// Start session
[self.session startRunning]; 
```

}

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T03:20:57.930

万一其他人也在寻找这个答案，这是我制作的方法（修改了一下以简化）：

```
- (void)encodeVideoOrientation:(NSURL *)anOutputFileURL
{
CGAffineTransform rotationTransform;
CGAffineTransform rotateTranslate;
CGSize renderSize;

switch (self.recordingOrientation)
{
    // set these 3 values based on orientation

}

AVURLAsset * videoAsset = [[AVURLAsset alloc]initWithURL:anOutputFileURL options:nil];

AVAssetTrack *sourceVideoTrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
AVAssetTrack *sourceAudioTrack = [[videoAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];

AVMutableComposition* composition = [AVMutableComposition composition];

AVMutableCompositionTrack *compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration)
                               ofTrack:sourceVideoTrack
                                atTime:kCMTimeZero error:nil];
[compositionVideoTrack setPreferredTransform:sourceVideoTrack.preferredTransform];

AVMutableCompositionTrack *compositionAudioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio
                                                                            preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, videoAsset.duration)
                               ofTrack:sourceAudioTrack
                                atTime:kCMTimeZero error:nil];

AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
AVMutableVideoCompositionLayerInstruction *layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTrack];
[layerInstruction setTransform:rotateTranslate atTime:kCMTimeZero];

AVMutableVideoComposition *videoComposition = [AVMutableVideoComposition videoComposition];
videoComposition.frameDuration = CMTimeMake(1,30);
videoComposition.renderScale = 1.0;
videoComposition.renderSize = renderSize;
instruction.layerInstructions = [NSArray arrayWithObject: layerInstruction];
instruction.timeRange = CMTimeRangeMake(kCMTimeZero, videoAsset.duration);
videoComposition.instructions = [NSArray arrayWithObject: instruction];

AVAssetExportSession * assetExport = [[AVAssetExportSession alloc] initWithAsset:composition
                                                                      presetName:AVAssetExportPresetMediumQuality];

NSString* videoName = @"export.mov";
NSString *exportPath = [NSTemporaryDirectory() stringByAppendingPathComponent:videoName];

NSURL * exportUrl = [NSURL fileURLWithPath:exportPath];

if ([[NSFileManager defaultManager] fileExistsAtPath:exportPath])
{
    [[NSFileManager defaultManager] removeItemAtPath:exportPath error:nil];
}

assetExport.outputFileType = AVFileTypeMPEG4;
assetExport.outputURL = exportUrl;
assetExport.shouldOptimizeForNetworkUse = YES;
assetExport.videoComposition = videoComposition;

[assetExport exportAsynchronouslyWithCompletionHandler:
 ^(void ) {
     switch (assetExport.status)
     {
         case AVAssetExportSessionStatusCompleted:
             //                export complete
             NSLog(@"Export Complete");
             break;
         case AVAssetExportSessionStatusFailed:
             NSLog(@"Export Failed");
             NSLog(@"ExportSessionError: %@", [assetExport.error localizedDescription]);
             //                export error (see exportSession.error)
             break;
         case AVAssetExportSessionStatusCancelled:
             NSLog(@"Export Failed");
             NSLog(@"ExportSessionError: %@", [assetExport.error localizedDescription]);
             //                export cancelled
             break;
     }
 }];

} 
```

不幸的是，这些东西的文档记录很差，但是通过将其他 SO 问题中的示例串在一起并阅读头文件，我能够让它工作。希望这对其他人有帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-03T05:06:03.760

使用下面的这些来`method`设置`correct` `orientation`根据`video` `asset` `orientation``AVMutableVideoComposition`

```
-(AVMutableVideoComposition *) getVideoComposition:(AVAsset *)asset
{
  AVAssetTrack *videoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
  AVMutableComposition *composition = [AVMutableComposition composition];
  AVMutableVideoComposition *videoComposition = [AVMutableVideoComposition videoComposition];
  CGSize videoSize = videoTrack.naturalSize;
  BOOL isPortrait_ = [self isVideoPortrait:asset];
  if(isPortrait_) {
      NSLog(@"video is portrait ");
      videoSize = CGSizeMake(videoSize.height, videoSize.width);
  }
  composition.naturalSize     = videoSize;
  videoComposition.renderSize = videoSize;
  // videoComposition.renderSize = videoTrack.naturalSize; //
  videoComposition.frameDuration = CMTimeMakeWithSeconds( 1 / videoTrack.nominalFrameRate, 600);

  AVMutableCompositionTrack *compositionVideoTrack;
  compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
  [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack:videoTrack atTime:kCMTimeZero error:nil];
  AVMutableVideoCompositionLayerInstruction *layerInst;
  layerInst = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoTrack];
  [layerInst setTransform:videoTrack.preferredTransform atTime:kCMTimeZero];
  AVMutableVideoCompositionInstruction *inst = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
  inst.timeRange = CMTimeRangeMake(kCMTimeZero, asset.duration);
  inst.layerInstructions = [NSArray arrayWithObject:layerInst];
  videoComposition.instructions = [NSArray arrayWithObject:inst];
  return videoComposition;
}

-(BOOL) isVideoPortrait:(AVAsset *)asset
{
  BOOL isPortrait = FALSE;
  NSArray *tracks = [asset tracksWithMediaType:AVMediaTypeVideo];
  if([tracks    count] > 0) {
    AVAssetTrack *videoTrack = [tracks objectAtIndex:0];

    CGAffineTransform t = videoTrack.preferredTransform;
    // Portrait
    if(t.a == 0 && t.b == 1.0 && t.c == -1.0 && t.d == 0)
    {
        isPortrait = YES;
    }
    // PortraitUpsideDown
    if(t.a == 0 && t.b == -1.0 && t.c == 1.0 && t.d == 0)  {

        isPortrait = YES;
    }
    // LandscapeRight
    if(t.a == 1.0 && t.b == 0 && t.c == 0 && t.d == 1.0)
    {
        isPortrait = FALSE;
    }
    // LandscapeLeft
    if(t.a == -1.0 && t.b == 0 && t.c == 0 && t.d == -1.0)
    {
        isPortrait = FALSE;
    }
   }
  return isPortrait;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-04T05:31:48.263

[从 iOS 5 开始，您可以使用此处](http://developer.apple.com/library/mac/releasenotes/AudioVideo/RN-AVFoundation/#//apple_ref/doc/uid/TP40010717-CH1-DontLinkElementID_12)记录的 AVCaptureVideoDataOutput 请求旋转的 CVPixelBuffers 。这为您提供了正确的方向，而无需使用 AVAssetExportSession 再次重新处理视频。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-11T13:39:40.760

这是@Jagie 代码的最新快速版本。

```
extension AVURLAsset
{
    func exportVideo(presetName: String = AVAssetExportPresetHighestQuality, outputFileType: AVFileType = .mp4, fileExtension: String = "mp4", then completion: @escaping (URL?) -> Void)
    {
        let filename = url.deletingPathExtension().appendingPathExtension(fileExtension).lastPathComponent
        let outputURL = FileManager.default.temporaryDirectory.appendingPathComponent(filename)

        do { // delete old video, if already exists
                try FileManager.default.removeItem(at: outputURL)
        } catch {
            print(error.localizedDescription)
        }

        guard let sourceAudioTrack = self.tracks(withMediaType: .audio).first else { return }
        let composition = AVMutableComposition()
        let compositionAudioTrack = composition.addMutableTrack(withMediaType: .audio, preferredTrackID: kCMPersistentTrackID_Invalid)
        do{
            try compositionAudioTrack?.insertTimeRange(CMTimeRangeMake(start: CMTime.zero, duration: self.duration), of: sourceAudioTrack, at: CMTime.zero)
        }catch(let e){
            print("error: \(e)")
        }

        if let session = AVAssetExportSession(asset: composition, presetName: presetName) {
            session.outputURL = outputURL
            session.outputFileType = outputFileType
            let start = CMTimeMakeWithSeconds(0.0, preferredTimescale: 0)
            let range = CMTimeRangeMake(start: start, duration: duration)
            session.timeRange = range
            session.shouldOptimizeForNetworkUse = true

            session.videoComposition =  getVideoComposition(asset: self, composition: composition)

            session.exportAsynchronously {
                switch session.status {
                case .completed:
                    completion(outputURL)
                case .cancelled:
                    debugPrint("Video export cancelled.")
                    completion(nil)
                case .failed:
                    let errorMessage = session.error?.localizedDescription ?? "n/a"
                    debugPrint("Video export failed with error: \(errorMessage)")
                    completion(nil)
                default:
                    break
                }
            }
        } else {
            completion(nil)
        }
    }

    private func getVideoComposition(asset: AVAsset, composition: AVMutableComposition) -> AVMutableVideoComposition{
        let isPortrait = isVideoPortrait()

        let compositionVideoTrack: AVMutableCompositionTrack = composition.addMutableTrack(withMediaType: .video, preferredTrackID:kCMPersistentTrackID_Invalid)!

        let videoTrack:AVAssetTrack = asset.tracks(withMediaType: .video).first!
        do{
        try compositionVideoTrack.insertTimeRange(CMTimeRangeMake(start: CMTime.zero, duration: asset.duration), of: videoTrack, at: CMTime.zero)
        }catch(let e){
            print("Error: \(e)")
        }

        let layerInst:AVMutableVideoCompositionLayerInstruction = AVMutableVideoCompositionLayerInstruction(assetTrack: compositionVideoTrack)

        let transform = videoTrack.preferredTransform
        layerInst.setTransform(transform, at: CMTime.zero)

        let inst:AVMutableVideoCompositionInstruction = AVMutableVideoCompositionInstruction()
        inst.timeRange = CMTimeRangeMake(start: CMTime.zero, duration: asset.duration);
        inst.layerInstructions = [layerInst]

        let videoComposition: AVMutableVideoComposition = AVMutableVideoComposition()
        videoComposition.instructions = [inst]

        var videoSize:CGSize = videoTrack.naturalSize;
        if(isPortrait) {
            print("video is portrait")
            videoSize = CGSize(width: videoSize.height, height: videoSize.width)
        }else{
            print("video is landscape")
        }

        videoComposition.renderSize = videoSize;
        videoComposition.frameDuration = CMTimeMake(value: 1,timescale: 30);
        videoComposition.renderScale = 1.0;
        return videoComposition;
    }

    func isVideoPortrait() -> Bool{
        var isPortrait = false
        let tracks = self.tracks(withMediaType: .video)
        if(tracks.count > 0) {
            let videoTrack:AVAssetTrack = tracks.first!;

            let t:CGAffineTransform = videoTrack.preferredTransform;
            // Portrait
            if(t.a == 0 && t.b == 1.0 && t.c == -1.0 && t.d == 0)
            {
                isPortrait = true;
            }
            // PortraitUpsideDown
            if(t.a == 0 && t.b == -1.0 && t.c == 1.0 && t.d == 0)  {

                isPortrait = true;
            }
            // LandscapeRight
            if(t.a == 1.0 && t.b == 0 && t.c == 0 && t.d == 1.0)
            {
                isPortrait = false;
            }
            // LandscapeLeft
            if(t.a == -1.0 && t.b == 0 && t.c == 0 && t.d == -1.0)
            {
                isPortrait = false;
            }
        }
        return isPortrait;
    }
} 
```

# javascript - 如何将页码添加到指向锚点的链接？

> ID：13465747
> 
> 赞同：2
> 
> 时间：2012-11-20T02:29:51.163
> 
> 标签：javascript, html, css, printing

我的网页中有几个锚点（即`<a name="my-magical-anchor"></a>`）散布在页面上。我的页面上还有几个指向这些锚点的链接（即`<a href="#my-magical-anchor">Go to the Magical Anchor</a>`）。对于打印页面时，我想知道是否可以使用 CSS 或 JavaScript 修改链接的文本，以读取类似于`Go to the Magical Anchor (page 12)`指示读者应该在打印文档中翻到的页码的内容。

如果可能的话，我希望不必手动分配分页符，而是让我的内容在页面之间流动，然后在打印之前更新链接文本。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:52:56.100

查看这篇文章并转到标题为“交叉引用”的部分：[http ://www.alistapart.com/articles/boom](http://www.alistapart.com/articles/boom)

建议是使用`target-counter`, 定位`page`计数器，使用`href`属性作为目标链接。

```
a.magical::after {
    content: "(page" target-counter(attr(href), page) ")"
} 
```

也推荐整篇文章。向与它相关联的 Nathan Kot 致敬。

# c# - LINQ 查询比较

> ID：13465761
> 
> 赞同：0
> 
> 时间：2012-11-20T02:31:28.927
> 
> 标签：c#, linq, entity-framework

我在这里有 2 个 LINQ 查询，我只想知道这些查询中的哪一个是正确且快速使用的。

样品一

```
var GetUSer = (from UserItem in dbs.users
               where UserItem.UserID == UserID
               select new User(UserItem))
               .OrderBy(item => item.FirstName)
               .Skip(0)
               .Take(10)
               .ToList(); 
```

样品二

```
var GetUSer = (from UserITem in dbs.user
                 .Where(item => item.UserID == UserID)
                 .OrderBy(item => item.FirstName)
                 .Skip(0)
                 .Take(10)
                 .AsEnumerable()
               select new User(UserItem)).ToList(); 
```

尽管它们都运行良好，但我只想知道哪个是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:36:51.440

在这两者之间，我更喜欢第一个（为了可读性，如果您希望整个查询在数据库中执行，则需要切换一些东西）。如果他们都工作，这取决于你。

就个人而言，我不喜欢将查询语法与 lambda 语法混合，如果我不需要的话，我更喜欢 lambda。我会这样写：

```
var GetUsers = db.user
                 .Where(u => u.UserID == UserID)
                 .OrderBy(u => u.FirstName)
                 .Take(10)
                 .Select(u => new User(u))
                 .ToList(); 
```

这使用单一语法，尽可能多地在数据库中查询，并省略任何多余的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:36:59.647

第二个更好，第一个 1 进行选择然后进行过滤，这意味着它必须先从数据库中获取数据才能将其转换为用户对象，然后再进行过滤。

第二个将在数据库端进行查询，然后将其转换为用户对象

第一个可以通过将选择移动到 ToList() 之前来修复

# javascript - Firebase 中有序列表的性能

> ID：13465767
> 
> 赞同：13
> 
> 时间：2012-11-20T02:32:09.143
> 
> 标签：javascript, firebase

如果我想在 Firebase 中维护一个有序列表，最好的方法似乎是手动为列表中的每个项目分配优先级。这意味着如果我从列表中插入或删除一个项目，我必须更新它后面所有项目的优先级。对于列表开头的项目，这意味着更新列表中的每个项目。在这种情况下是否有更好的数据结构或算法可以使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T03:28:33.263

您可以通过适当地设置元素的优先级来创建有序列表。列表中的项目按优先级按字典顺序排序，或者如果优先级可以解析为数字，则按数值排序。

如果您想将项目插入现有列表的中间，修改现有项目的优先级会起作用，但效率会非常低。更好的方法是在要插入值的两个项目之间选择一个优先级，并为新项目设置该优先级。

例如，如果元素 1 的优先级为“a”，元素 2 的优先级为“b”，则可以在两者之间插入元素 3，优先级为“aa”（或“aq”、“az”等）。

根据我们的经验，大多数情况下，当您创建有序列表时，您不一定事先知道要在列表中插入项目的位置。例如，如果您正在为游戏创建排行榜，您事先并不知道要将新分数放在列表中的第 3 位，而是知道要将其插入到分数 10000 获得的任何位置（可能恰好是第三个）。在这种情况下，只需将优先级设置为分数即可完成此操作。在此处查看我们的排行榜示例： [https ://www.firebase.com/tutorial/#example-leaderboard](https://www.firebase.com/tutorial/#example-leaderboard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T02:36:19.110

Ruby gem[排名模型](https://github.com/mixonic/ranked-model)有一个有趣的方法来解决这个问题。它像许多其他“充当列表”实现一样使用位置整数，但它不依赖于重写每个位置移动的所有整数。相反，它将整数分开很远，因此每次更新可能只影响一两行。可能值得阅读自述文件和代码，看看这种方法是否适合这里。

# jquery - jQuery标签，跳转到页面顶部，如何停止？

> ID：13465769
> 
> 赞同：1
> 
> 时间：2012-11-20T02:32:10.920
> 
> 标签：jquery, tabs

我已经阅读了关于此的其他帖子，但是当单击选项卡时，我仍然无法让页面跳转到顶部。继承人的HTML

```
<ul class="tabs-nav">
    <li class="active"><a href="#tab1"><i class="icon-list-ul"></i> Tab 1</a></li>
    <li><a href="#tab2"><i class="icon-map-marker"></i> Tab 2</a></li>
</ul>

<!-- Tabs Content -->
<div class="tabs-container">
    <div class="tab-content" id="tab1">Stuff</div>
    <div class="tab-content" id="tab2">Stuff</div>
</div> 
```

这是js...

```
(function() {

    var $tabsNav    = $('.tabs-nav'),
        $tabsNavLis = $tabsNav.children('li'),
        $tabContent = $('.tab-content');

    $tabsNav.each(function() {
        var $this = $(this);

        $this.next().children('.tab-content').stop(true,true).hide()
                                             .first().show();

        $this.children('li').first().addClass('active').stop(true,true).show();
    });

    $tabsNavLis.on('click', function(e) {
        var $this = $(this);

        $this.siblings().removeClass('active').end()
             .addClass('active');

        $this.parent().next().children('.tab-content').stop(true,true).hide()
                                                      .siblings( $this.find('a').attr('href') ).fadeIn();

        e.preventDefault();

    });

})(); 
```

现在我尝试添加

```
onclick="return false;" 
```

到html中的标签href，但这无济于事。非常感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:42:32.520

它因此而跃居榜首`<a href="#tab1">`

尝试`<a href="javascript:void(0);"`使用另一个属性来确定应该打开哪个 div，您可以添加任何以`data-`诸如`data-id="#tab1` 然后读取该属性开头的属性，

或者你可以重新考虑你的 HTML 是如何设置的，

如果您真的必须保持原样，那么您可以尝试

```
 var $tabsNav    = $('.tabs-nav'),
        $tabsNavLis = $tabsNav.children('a'),  //this line changed
        $tabContent = $('.tab-content'); 
```

然后：

```
 $tabsNavLis.on('click', function(e) {
        e.preventDefault();   //now this is <a> click , not <li> click
        var $this = $(this).parent();
        $this.siblings().removeClass('active').end()
             .addClass('active');
        $this.parent().next().children('.tab-content').stop(true,true).hide()
                                                      .siblings( $this.find('a').attr('href') ).fadeIn();

    }); 
```

# iphone - 创建一个每 4 小时执行一次命令的后台线程

> ID：13465772
> 
> 赞同：1
> 
> 时间：2012-11-20T02:32:51.027
> 
> 标签：iphone, ios, multithreading, grand-central-dispatch

我试图弄清楚如何使用后台线程每 4 小时执行一次命令。

我以前从来没有创造过这样的东西，所以到目前为止只读过它。我读过的一件事是这个

“线程占用物理内存和关键系统资源”

所以在那种情况下，让这个线程检查时间然后执行我的方法会是一个坏主意......还是有更好的选择，我已经阅读了 GCD（Grand Central Dispatch），但我不确定这是否是适用，因为我认为它更适用于并发请求？不是一遍又一遍地检查时间的东西..

或者最后有没有我完全错过的东西，你可以每 4 小时执行一次请求？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:36:32.037

允许后台进程运行的最长时间（10 分钟）会使您的方法变得困难。您的下一个最佳尝试是计算下一个事件，将时间戳保存在某处。然后，如果应用程序在该事件时或之后执行，它可以执行您想要的任何操作。

这可能会有所帮助： [http ://www.audacious-software.com/2011/01/ios-background-processing-limits/](http://www.audacious-software.com/2011/01/ios-background-processing-limits/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T02:58:04.450

我认为最好利用时间戳并在时间从现在开始几个小时后发布通知。

多线程不是一个很好的方法来做到这一点，因为基本上你会运行一个循环四个小时吃时钟周期。多亏了操作系统的魔力，这不会吃掉整个核心或任何类似的愚蠢的东西，但是如果允许它运行，它将被连续计算。这将是对资源的巨大浪费，因此是不允许的。GCD 并不是真的适合这种事情。它的目的是允许并发来平滑 UI 交互以及更有效地完成任务，一个 4 小时的循环将是低效的。将并发视为一种工具，用于在加载或更改内容时与表格进行交互。GCD 块在正确使用时使这非常容易。GCD 和其他多线程能力提供了在后台进行计算以及与数据库交互和处理请求的工具，而不会影响用户体验。许多比我聪明得多的人都写了大量关于多线程/多任务是什么以及它有什么好处的文章。在某种程度上发布消息一段时间将是多任务处理的方法，而无需通过 GCD 不断执行块以等待 4 小时的时间段，但是可以这样做。您可以执行一个块，该块监视的时间少于线程生命周期的最大长度，然后当线程执行过度时再次分派它，直到达到所需的时间。这是一种不好的做法。向通知中心发布通知，

您可以发布通知请求以观察时间变化，它会返回其注释，但这需要您的应用程序处于活动状态或在后台。我不能保证操作系统不会杀死您的应用程序，但是如果它在“后台”状态下运行良好且安静且内存占用很小，则其通知中心请求将保持活动状态并按预期运行。

# angularjs - 将模拟加载到 AngularJS 单元测试中

> ID：13465773
> 
> 赞同：2
> 
> 时间：2012-11-20T02:33:06.693
> 
> 标签：angularjs

我正在尝试设置我的 AngularJS 应用程序来测试控制器、路由、模板等，但是我在让**angular-mocks.js**提供的一些辅助方法工作（即**module**和**inject**）时遇到问题.

我正在使用 testacular 加载测试套件，并在规范之前添加了以下文件：

```
files = [
  MOCHA,
  MOCHA_ADAPTER,
  '../application/lib/angular.min.js',
  './lib/angular/angular-mocks.js',
  './lib/angular/angular-scenario.js',
  '../application/application.js',
  './lib/chai.js',
  './lib/chai-should.js',
  './lib/chai-expect.js',
  './spec/**/*.js'
]; 
```

到目前为止一切顺利，但是当我运行测试时，我遇到了这个问题：

```
ReferenceError: Can't find variable: module 
```

不确定这是在哪里加载的。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:45:09.197

首先要检查的是所有这些文件都在测试浏览器中加载。在您的配置中出错并且没有意识到这一点非常容易。如果您使用 运行 testacular `autowatch`，您可以`http://localhost:9876/context.html`使用浏览器导航到并使用开发人员工具检查元素/资源/网络，看看是否缺少任何东西。

如果那里一切都很好并且您仍然遇到问题，请发布一些您的测试代码，我会看看。

更新：从[angular-mocks.js](https://github.com/angular/angular.js/blob/master/src/ngMock/angular-mocks.js#L1629)（第 1635 行）源代码中的注释中（奇怪地）出现，`window.module`它仅适用于 Jasmine。看起来您使用的是 Mocha 而不是 Jasmine。这很可能是罪魁祸首。

回答：

我不能正确地相信这个 Matsko，因为你自己想出来了......但事实证明，当前的 AngularJS 稳定下载和 angular-seed 包含不支持 Mocha 的旧版本的 ngMock。用来自 github repo 的最新版本手动替换模拟文件可以解决问题。很高兴我能帮上忙 ;-）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T20:48:35.483

我今天遇到了这个问题，我想向其他人提供完成此工作所需步骤的完整摘要。首先假设您有一个名为 myApp 的模块。在该模块内部有一个名为 myModel 的服务。myModel 服务有一个名为 getItems() 的方法。

1.  目前，angular-mocks.js（我使用的是 AngularJS 1.0.6）不支持 Mocha。您需要访问此[链接](https://raw.github.com/angular/angular.js/master/src/ngMock/angular-mocks.js%20this)并将 1.0.6 版本替换为 AngularJS GitHub 项目的 master 分支中的版本。一个简单的方法（如果你有 wget）是`wget https://raw.github.com/angular/angular.js/master/src/ngMock/angular-mocks.js`在正确的目录中。如果您使用正确配置的 Sublime 或 vim，它也可以轻松地为您拉下它。
2.  确保您的 karma.conf.js 文件在 files 数组中包含 angular-mocks.js 文件
3.  在您的 tests.js 文件中的某处（可能在顶层描述）包含`beforeEach(module('myApp'));`或您命名主模块的任何内容。
4.  如果您计划在多个地方使用该服务（或您想在测试中包含的任何内容），您可以在需要的地方调用另一个 beforeEach，如下所示：

`beforeEach(inject(function(myModel) {
mymodel = myModel;
}));`

否则你可以在需要的地方注入。现在 mymodel 变量（注意这是您在上面的 beforeEach 中分配的变量）将可供您在下一个块中进行测试。例如，您现在可以编写：

`describe('when fetched', function() {
it('should return 3 items', function() {
// console.log(mymodel.getItems());
expect(mymodel.getItems()).to.have.length(3);
});
});`

# vba - 更改非英文文本框的字体

> ID：13465774
> 
> 赞同：8
> 
> 时间：2012-11-20T02:33:09.720
> 
> 标签：vba, fonts, powerpoint

请考虑以下代码

```
With ActivePresentation
    Set sldNewSlide = .Slides.Add(.Slides.Count + 1, ppLayoutBlank)
    With sldNewSlide
    Set shpCurrShape = .Shapes.AddTextbox(msoTextOrientationHorizontal, 25, 50, 50, 200)

        With shpCurrShape
           With .TextFrame.TextRange

              '------------ Below is an ARABIC string
              .Text = ChrW$(&H6A9) & ChrW$(&H64A) & ChrW$(&H641) & " " & ChrW$(&H62D) & ChrW$(&H627) & ChrW$(&H644) & ChrW$(&H643)

              With .Font
                 .Name = "someFontName" '-------------- THIS LINE IS NOT WORKING
                 .Size = 65
              End With

           End With
        End With

    End With
End With 
```

如上所述，阿拉伯语文本的字体没有改变。当文本框包含英文文本时，字体更改效果很好。如果混合了阿拉伯文和英文文本，则会更改英文字体，但阿拉伯文文本保持默认字体（即 Arial）。

此代码在 Office 2003 中运行良好，但我在尝试在 Office 2007/2010 中运行时遇到了这个问题。我已经仔细检查过，我尝试指定的字体已安装在计算机上。

虽然我只测试了阿拉伯语脚本语言（阿拉伯语/乌尔都语/波斯语等），但我想在处理任何非拉丁脚本语言时都会出现这个问题。

有什么建议么？似乎是更高版本的 ms office 中的错误。

PS。按照@Steve ( `.LanguageID = msoLanguageIDArabic`) 的建议设置文本框语言无效:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T16:37:35.910

我自己找到了答案。对于不同的脚本，类中有不同`Name`的属性。[这是所有](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.powerpoint.font_members%28v=office.14%29.aspx)[成员](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.powerpoint.font_members%28v=office.14%29.aspx)的列表。就我而言，我不得不使用财产。结合这种变化，代码就像一个魅力`Font`[`Font`](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.powerpoint.font_members%28v=office.14%29.aspx)`NameComplexScript`

```
.Font.NameComplexScript = "someFontName" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:01:25.483

[这是一个类似的案例，这个解决方案是为`Chinese`字体提供的 :)](https://stackoverflow.com/questions/14080723/how-to-display-unicode-characters-in-vb6/14081257#14081257)并且可以用于任何你知道`CharSet`代码以及支持`Font Name`的情况，因为并非每种字体都支持所有语言字符集。

在您的情况下，您需要找到您想要使用的字符集`Arabic`和支持`Font Name`（根据以下示例进行设置）。您将**在运行时看到结果**。

```
UserForm1.TextBox2.Font.Charset = 134    '--CHINESESIMPLIFIED_CHARSET
UserForm1.TextBox2.Font.Name = ChrW(&H5B8B) + ChrW(&H4F53) '-- 宋体 SimSun font

UserForm1.TextBox2.Text = ChrW(37446)
strTxt2 = UserForm1.TextBox2.Text
'notice that ChrW(9246) produces a different character in Chinese
UserForm1.TextBox2.Text = strTxt2 & " " & ChrW(9246) 
```

# ruby - 设置默认值

> ID：13465778
> 
> 赞同：0
> 
> 时间：2012-11-20T02:33:37.610
> 
> 标签：ruby

我正在学习 ruby​​，我专门在其中玩 OOPS。我正在尝试在 ruby​​ 中编写与此 PHP 代码等效的代码

```
 class Abc {
        $a = 1;
        $b = 4;
        $c = 0;

        function __constructor($cc) {
            $this->c = $cc
        }

        function setA($v) {
            $this->a = $v
        }

        function getSum() {
            return ($this->a + $this->b + $this->c);
        }
    }

    $m = new Abc(7);
    $m->getSum(); // 12

    $m->setA(10);
    $m->getSum(); // 21 
```

我正在尝试将相当于上述 PHP 的内容编写为 ruby​​。请注意，我的目标是拥有类变量的 soem 的默认值，如果我想覆盖它，那么我可以通过调用 getter/setter 方法来实现。

```
 class Abc 
        attr_accessor :a
        def initialize cc
            @c = cc
        end

        def getSum 
            #???
        end

    end 
```

我不喜欢做

```
Abc.new(..and pass value of a, b and c) 
```

我的目标是拥有默认值，但如果需要，它们可以通过实例进行修改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T02:38:20.790

```
class Abc
  attr_accessor :a, :b, :c 

  def initialize a = 1, b = 4, c = 0 
    @a = a
    @b = b
    @c = c
  end

end 
```

这将分别接受 1、4 和 0 作为默认值，但可以通过传入参数来覆盖它们。

因此，如果您不`example = Abc.new`使用参数，它将具有默认值 1,4,0​​ 但您可以这样做：

```
 example2 = Abc.new 5, 5 
```

如果不为 c 传递值，那么默认情况下您仍然会拥有`a = 5`和`b = 5`with 的值`c = 0`。

更广泛地说，在上面的 Ruby 代码示例中，您在不需要的地方使用了括号。a`def method_name`开始一个块，a`end`将完成它。它们代替了传统上在其他语言中使用括号的方式。所以对于你的方法`getSum`，你可以简单地做

```
def get_sum
  #your_code
end 
```

此外，注意`def getSum`(camelCase) 在 Ruby 中通常是`def get_sum`(snake_case)。另请注意，在我上面给出的示例中，括号被删除了。Ruby 中不需要它们。

# matlab - 在 Matlab 中使用 fminbnd 函数时由于上下限导致的意外错误

> ID：13465779
> 
> 赞同：0
> 
> 时间：2012-11-20T02:33:40.213
> 
> 标签：matlab, optimization, constraints, limit, runtime-error

我根据系数的合法域值在函数中使用下限和上限`fminbnd`，如下所示：

```
[x,fval,exitflag] = fminbnd(@(x) minimize_me(sill, x(1), x(2), x(3), cov), [x1l x2l x3l], [x1u x2u x3u], opts); 
```

其中`[x1l x2l x3l]`和`[x1u x2u x3u]`是表示优化系数下限和上限的向量。我的问题的领域如下：

```
0<=x1l<=5
0<=x1u<=5

0<=x2l<=5
0<=x2u<=5

0<=x3l<=180
0<=x3u<=180 
```

奇怪的问题是，即使在我的域中选择一些值，我也会收到如下所示的错误：

```
??? Error using ==> mtimes
Inner matrix dimensions must agree.

Error in ==> fminbnd at 271
    x = xf + si * max( abs(d), tol1 ); 
```

例如，如果我选择，我会收到错误：

`[x1l x2l x3l], [x1u x2u x3u] = [0 0 0], [5 5 180]`或`[x1l x2l x3l], [x1u x2u x3u] = [1 1 0], [5 5 180]`或`[x1l x2l x3l], [x1u x2u x3u] = [1 2 0], [5 5 180]`等。

`[x1l x2l x3l], [x1u x2u x3u] = [5 5 0], [5 5 180]`但是，如果我选择等，我不会收到错误消息`[x1l x2l x3l], [x1u x2u x3u] = [3 0 0], [3 5 180]`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T05:13:13.357

根据[文档](http://www.mathworks.com/help/matlab/ref/fminbnd.html)，`fminbnd`仅适用于将单个标量作为参数的函数。

看一下`fminsearchbnd`文件交换：

[http://www.mathworks.com/matlabcentral/fileexchange/8277-fminsearchbnd](http://www.mathworks.com/matlabcentral/fileexchange/8277-fminsearchbnd)。

# c++ - 使用 UDP 的端口到端口数据传输

> ID：13465783
> 
> 赞同：0
> 
> 时间：2012-11-20T02:34:08.367
> 
> 标签：c++, sockets, udp

我正在处理这个项目，其中指定源端口和目标端口用于通过 C++ 中的 UDP 套接字发送消息。我的项目的 TCP 部分工作正常，但我不明白在设置时如何指定源端口和目标端口。

我知道如何做到这一点的方式是“接收者”设置一个 recvfrom() 调用，“发送者”也将在 sendto() 命令中使用的端口......但它需要相同港口。

那么，鉴于我需要“接收方”上的端口 x 与“发送方”上的端口 y 通信，我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T14:15:30.800

您可以`bind`在发送方调用时定义源端口。例如：

```
sockfd = socket(AF_INET, SOCK_STREAM, 0); 
if (sockfd < 0) { /*error*/}

sockaddr_in sin;
sin.sin_family = AF_INET;
sin.sin_addr.s_addr = htonl(INADDR_ANY);
sin.sin_port = htons(source_port);  // here

int res = bind(sockfd,(struct sockaddr*)&sin, sizeof(sin));
if (res < 0) { /*error*/} 
```

目标端口进入`sockaddr`传递给的参数`sendto`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T14:47:15.353

如果这是一对一的映射，即一个源与一个目标通信，则只需[`bind(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/bind.2.html)本地端口和[`connect(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/connect.2.html)远程 IP 和端口（与常见的误解相反，您*可以*连接 UDP 套接字）。在双方都这样做（当然使用适当的远程和本地 IP/端口），现在您可以只使用[`recv(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/recv.2.html)而[`send(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/send.2.html)无需显式寻址。

如果一方需要等待另一方发送第一个数据包，则提取接收到的源地址/端口[`recvfrom(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/recvfrom.2.html)，然后[`connect(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/connect.2.html)发送给它。

另一方面，如果一侧充当多客户端服务器，则在客户端上执行相同的[`bind(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/bind.2.html)/[`connect(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/connect.2.html)跳舞，但只[`bind(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/bind.2.html)对本地端口执行，然后在服务器上使用[`recvfrom(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/recvfrom.2.html)/ 。[`sendto(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/sendto.2.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T03:04:27.963

如果您需要同时进行双工通信，那么您应该在阻塞模式下使用套接字 -- `fcntl(...O_NONBLOCK...)`，并使用`select()`来确定您的套接字是可写的还是可读的或两者兼而有之。这是一个很好的例子，说明如何做到这一点[http://www.lowtek.com/sockets/select.html](http://www.lowtek.com/sockets/select.html)

# c - 单元化结构定义

> ID：13465784
> 
> 赞同：-2
> 
> 时间：2012-11-20T02:34:16.953
> 
> 标签：c, struct, typedef

我在结构定义方面遇到问题。我理解语法，但无法正确使用它来制作工作程序。我的任务是定义一种结构类型`element_t`来表示元素周期表中的一个元素。组件应包括原子序数、名称、符号、类别、重量和一个七元素整数数组，用于表示每个壳中的电子数。以下是`element_t`钠结构的组成部分。

```
11 Sodium Na alkali_metal 22.9898 2 8 1 0 0 0 0 
```

定义和测试 I/O 功能`scan_element`和`print_element`. 这是我的代码......但没有工作。我不明白为什么编译器说我没有初始化 element_t。提前致谢。

***以以下代码结束，还添加了适当的循环和 & 符号，尽管它没有在下面显示并且一切正常。我很想知道课堂上的幻灯片是如何使用 {2 8 1 0 0 0 0} 来填充 int 数组而不是循环的。我正在使用的书也使用了循环方法，但我想尝试使用 {} 方法。再次感谢。

```
#include <stdio.h>
#include <string.h>

typedef struct  {
    int atomic_num;
    char* element_name; revised:    char element_name[25];
char* element_symbol; revised:   element_symbol[2];
    char* element_class; revised:   char element_class[25];
    double atomic_weight;
    int electrons[7];
} element_t;

int scan_element(); revised: element_t scan_element();
void print_element(element_t my_element);

int scan_element() {
    element_t my_element;

    printf("Enter Atomic Number> ");
    scanf("%d", my_element.atomic_num);

    printf("Enter Element Name> ");
    scanf("%s", my_element.element_name);

    printf("Enter Element Symbol> ");
    scanf("%s", my_element.element_symbol);

    printf("Enter Element Class> ");
    scanf("%s", my_element.element_class);

    printf("Enter Atomic Weight> ");
    scanf("%lf", my_element.atomic_weight);

    printf("Enter Electons in each shell> ");
    scanf("%d", my_element.electrons);

    print_element(my_element);
    return 0;
}

void print_element(element_t my_element) {
    printf("%d %s %s %s %lf %d \n",my_element.atomic_num,my_element.element_name, my_element.element_symbol,my_element.element_class,my_element.atomic_weight,&my_element.electrons);
}

int main()
{
    scan_element(); revised: print_element(scan_element());

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:01:56.210

我在您的代码中发现了一些问题：

1) 使用 scanf 非指针类型（如 int 或 float）读取时，使用 & 运算符。Scanf 需要一个指向变量的指针，而不是变量本身。

2）如果您将字符串声明为动态（char*），请务必使用 malloc 为它们分配内存。否则像 char my_string[30] 一样静态声明它们。

3）您的 scan_element 函数应该返回一个 element_t 结构，而不是一个 int。或者，您可以将指针传递给现有 element_t 结构并在您的函数中对其进行修改。

4）您不能直接使用 scanf/printf 读取/打印 int 数组。每个元素都必须单独阅读。

5）您的 scan_element 函数可能不应该包含 print_element ：P

如果您想了解更多关于 ANSI C 中的控制台 I/O 的信息，也许[这篇文章](http://dystopiancode.blogspot.ro/2011/10/console-io-using-stdio-in-cc.html)会很有用。

这是更正后的代码：

```
include <stdio.h>
#include <string.h>

typedef struct  {
    int atomic_num;
    char element_name[30];
    char element_symbol[3];
    char element_class[30];
    double atomic_weight;
    int electrons[7];
} element_t;

element_t scan_element();
void print_element(element_t my_element);

element_t scan_element() {
    int i = 0;
    element_t my_element;

    printf("Enter Atomic Number> ");
    scanf("%d", &my_element.atomic_num);

    printf("Enter Element Name> ");
    scanf("%s", my_element.element_name);

    printf("Enter Element Symbol> ");
    scanf("%s", my_element.element_symbol);

    printf("Enter Element Class> ");
    scanf("%s", my_element.element_class);

    printf("Enter Atomic Weight> ");
    scanf("%lf", &my_element.atomic_weight);

    for(i = 0; i<7; i++)
    {
        printf("Enter Electon - electron nr %d\n",i);
        scanf("%d", &my_element.electrons[i]);
    }

    return my_element;
}

void print_element(element_t my_element) {
    int i;
    printf("%d %s %s %s %lf\n",
           my_element.atomic_num,
           my_element.element_name, 
           my_element.element_symbol,
           my_element.element_class,
           my_element.atomic_weight);
    for(i = 0; i<7; i++)
    {
        printf("%d",my_element.electrons[i]);
    }
    puts("\n");
}

int main()
{
    element_t val = scan_element();
    print_element(val);

    return 0;
} 
```

# c++ - Qt Release build 无法打开 DLL

> ID：13465787
> 
> 赞同：1
> 
> 时间：2012-11-20T02:34:39.027
> 
> 标签：c++, qt, dll

虽然我的应用程序使用 QtCreator 2.4.1 在 Qt 4.8.1 的调试模式下运行良好，但它无法在发布模式下启动。双击生成的 .exe 返回：

“应用程序无法正确启动（0XC000007B）。单击确定关闭应用程序。”

在 QtCreator 中运行只是停止（应用程序窗口不出现），它最终会返回错误代码：-1073741819

运行 Dependency Walker 将显示：

![在此处输入图像描述](../Images/9d8067b2aa3f936f7918a8ddad6324c8.png)

我试图搜索 msvcr90.dll 的位置，它出现在 C:/Windows/winsxd/... 下的多个目录中

此时我应该怎么做才能解决这个问题？我的机器是 64x Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:27:20.753

您应该部署 Qt（和其他一些）库，以便通过这种方式运行您的应用程序。

dll 文件位于库安装路径的 bin 文件夹中。例如，在我的机器上是：

```
C:\QtSDK\Desktop\Qt\4.8.0\msvc2010\bin 
```

因为我使用的是 Qt 的 MSVC2010 版本（而不是 MinGW 版本）。Dependency Walker 会告诉您必须复制哪些文件。

Qt Creator 应该可以正常运行您的应用程序。你用的是什么版本的Qt？（4.8，MinGW 或 VC2010）

# python - 导入文件，打印数据，搜索然后再次打印 - PYTHON

> ID：13465792
> 
> 赞同：0
> 
> 时间：2012-11-20T02:35:35.687
> 
> 标签：python, sorting, import

我一直在研究这个 python 问题。我正在上入门级课程，我被卡住了。现在我没有收到任何错误，但程序没有打印数据（来自 names.txt）或提示我搜索。任何帮助，将不胜感激。-谢谢！

```
def main():

    print("Last, \tFirst")
    print

    name_list = get_names()
    print_list(name_list)
    new_file(name_list)
    search_list(name_list)

def get_names():
    # open the data file
    infile = open('names.txt', 'r')

    # read all the lines from the file
    name_list = infile.read().split('\n')

    #close the input file
    infile.close()

    return(name_list)

#def print list
def print_list(name_list):
    #print the data
    for name in name_list:
        print (name)
    return(name)

#def new_file
def new_file(name_list):
    outfile = open('sorted_names.txt' ,'w')
    for item in name_list:
        outfile.write(item + '\n')

    outfile.close()

#def search_list
def search_list(name_list):
    again = 'Y'
    while again == 'Y':
        name = input("What name would you like to look for? :")
        try:
            name_index = name_list.index(name)
            print (name), (" was found in the list at index point: "), name_index

        except ValueError as err:
            print (name), (" was not found in the list.")

            print ("Would you like to search for another name?")
            again = input("Would you like to run the program again? [y/n]") == 'y'

# execute the main function
main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T02:37:03.943

`main()`没有做太多，它只是打印几行。你会想让它调用你的其他函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:11:49.453

修改最少的更正版本：

```
def main():

    print("Last, \tFirst")
    print

    name_list = get_names()
    print_list(name_list)
    new_file(name_list)
    search_list(name_list)

def get_names():
    # open the data file
    infile = open('names.txt', 'r')

    # read all the lines from the file
    name_list = infile.read().split('\n')

    #close the input file
    infile.close()

    #print data read into memory
    print(name_list)

    return(name_list)

#def print list
def print_list(name_list):
    #print the data
    for name in name_list:
        print (name)
    return(name)

#def new_file
def new_file(name_list):
    outfile = open('sorted_names.txt' ,'w')
    for item in name_list:
        outfile.write(item + '\n')

    outfile.close()

#def search_list
def search_list(name_list):
    again = 'Y'
    while again.upper()== 'Y':
        name = raw_input("What name would you like to look for? :")
        try:
            name_index = name_list.index(name)
            print (name), (" was found in the list at index point: "), name_index

        except ValueError as err:
            print (name), (" was not found in the list.")

            print ("Would you like to search for another name?")
            again = raw_input("Would you like to run the program again? [y/n]") == 'y'

# execute the main function
main() 
```

发生了什么变化：

*   在 get_names 中，读取的 name_list 实际上是一个字符串，而不是一个列表。要获取需要在换行符 ( `.split('\n')`) 上拆分的行列表。之后，您不需要从名称中删除换行符

*   get_names() 返回后，需要存储列表并传递给其他函数

*   new_file 使用了 name_list，但没有将其作为参数接收

*   try/except 块应该嵌套在 while 块中

恭喜，它似乎正在工作（：

# list - 在 Groovy 映射中获取具有重复值的键

> ID：13465794
> 
> 赞同：3
> 
> 时间：2012-11-20T02:35:50.803
> 
> 标签：list, groovy, map, key

我只是在探索 groovy 时遇到了这个问题，我有一个地图，我想从该地图中获取具有相同值的键。

```
Map maps = ['a': 10, 'b': 10, 'c': 11, 'd': 12] 
```

是否有可能只获得具有相同值的键，我想从这个例子中得到一个带有值的列表：

```
List keys = ['a','b'] 
```

我有一个解决这个问题的方法，而且代码很长，我只是想知道是否可以`findAll`在 Map 中解决这个问题。我很难计算地图中的值。

感谢您分享您的想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T05:35:03.227

如果您*知道*需要键的值，则可以使用该`findAll`方法获取具有该值的所有条目，然后`keySet`使用 splat 运算符或使用 splat 运算符获取键`*.key`：

```
def keysForValue(map, value) {
    map.findAll { it.value == value }*.key
}

def map = ['a': 10, 'b': 10, 'c': 11, 'd': 12]

assert keysForValue(map, 10) == ['a', 'b']
assert keysForValue(map, 12) == ['d']
assert keysForValue(map, 13) == [] 
```

* * *

如果您不知道哪个值应该具有重复的键，而您想要的只是获取具有重复值的键（如果有的话），您可以尝试以下操作：

```
def getKeysWithRepeatedValue(map) {
    map.groupBy { it.value }.find { it.value.size() > 1 }?.value*.key
} 
```

它首先按值对映射条目进行分组，因此`map.groupBy { it.value }`示例映射的结果是`[10:[a:10, b:10], 11:[c:11], 12:[d:12]]`. 然后它找到该映射中的第一个条目，该条目具有一个包含多个元素作为值的列表；该条目对应于具有多个关联键的值。的结果`.find { it.value.size() > 1 }`将是地图条目`10={a=10, b=10}`。最后一个条件导航和 splat 运算符`?.value*.key`是在该条目存在的情况下获取该条目的值，然后获取该值的键。用法：

```
assert getKeysWithRepeatedValue(['a': 10, 'b': 10, 'c': 11, 'd': 12]) == ['a', 'b']

// If no value has more than one key, returns null:
assert getKeysWithRepeatedValue(['a': 10, 'c': 11, 'd': 12]) == null

// If more than one value has repeated keys, returns the keys that appear first:
assert getKeysWithRepeatedValue(['a': 10, 'b': 11, 'c': 10, 'd': 11]) == ['a', 'c'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T02:50:09.780

你的意思是

```
Map maps = ['a': 10, 'b': 10, 'c': 11, 'd': 12] 
```

也许？很简单，但地图不保留元素的顺序。您可以使用以下命令以不特定顺序检索键列表：

```
List output = maps.keySet() as List 
```

或者，如果您想反转映射，并找到每个值的键列表，您可以使用以下命令：

```
Map output = maps.groupEntriesBy {
   it.value
}.each {
   it.value = it.value.collect {
      it.key
   }
} 
```

# hadoop - Hadoop - textouputformat.separator 使用 ctrlA ( ^A )

> ID：13465795
> 
> 赞同：8
> 
> 时间：2012-11-20T02:35:58.723
> 
> 标签：hadoop, separator, control-characters

我正在尝试使用 ^A 作为减少输出文件中键和值之间的分隔符。我发现配置设置“mapred.textoutputformat.separator”是我想要的，这正确地将分隔符切换为“，”：

```
conf.set("mapred.textoutputformat.separator", ","); 
```

但它不能处理 ^A 字符：

```
conf.set("mapred.textoutputformat.separator", "\u0001"); 
```

抛出此错误：

`ERROR security.UserGroupInformation: PriviledgedActionException as:user (auth:SIMPLE) cause:org.apache.hadoop.ipc.RemoteException: java.io.IOException: java.lang.RuntimeException: org.xml.sax.SAXParseException; lineNumber: 68; columnNumber: 94; Character reference "&#`

我找到了这张票[https://issues.apache.org/jira/browse/HADOOP-7542](https://issues.apache.org/jira/browse/HADOOP-7542)并看到他们试图解决这个问题，但由于 XML1.1 问题而恢复了补丁。

所以我想知道是否有人成功地将分隔符设置为 ^A （似乎很常见），使用简单的解决方法。或者，如果我应该解决并使用制表符分隔符。

谢谢！

我在 CentOS 6.2 上运行 Hadoop 0.20.2-cdh3u5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T03:56:17.827

环顾四周，我发现可能有三个选项可以解决这个问题：

*   [字符引用“&#1”是无效的 XML 字符](https://stackoverflow.com/questions/11308480/character-reference-1-is-an-invalid-xml-character)- 类似的 SO 问题
*   [Unicode 字符/Ctrl G 或 Ctrl A 作为 TextOutputFormat (Hadoop) 分隔符](http://hadoopified.wordpress.com/2011/06/24/unicode-charactersctrl-g-or-ctrl-a-as-textoutputformat-hadoop-delimiter/)

上面链接中详述的可能解决方案是：

1.  您可以对分隔符进行 Base64 编码。然后，您需要创建一个自定义 TextOutputFormat 来覆盖 getRecordWriter 方法并解码 Base64 编码的分隔符。
2.  再次创建自定义 TextOutputFormat，除了更改选项卡中的默认分隔符。
3.  通过 XML 资源文件提供分隔符。您可以使用作业配置的 addResource() 方法指定自定义资源文件。

# javascript - D3 javascript foreach 和 each 的区别

> ID：13465796
> 
> 赞同：90
> 
> 时间：2012-11-20T02:36:02.613
> 
> 标签：javascript, d3.js

D3js`forEach`和in 有什么区别？`each`

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2012-11-20T04:50:32.317

首先，`.forEach()`它不是 d3 的一部分，它是 javascript 数组的本机函数。所以，

```
["a", "b", "c"].forEach(function(d, i) { console.log(d + " " + i); });
// Outputs:
a 0
b 1
c 2 
```

即使页面上没有加载 d3，这也有效。

接下来，d3`.each()`处理 d3 选择（当你得到什么`d3.selectAll(...)`）。从技术上讲，您可以调用`.forEach()`d3 选择，因为在幕后，d3 选择是一个具有额外功能的数组（其中一个是`.each()`）。但你不应该这样做，因为：

1.  这样做不会产生所需的行为。知道如何使用`.forEach()`d3 选择以产生任何所需的行为将需要深入了解 d3 的内部工作原理。那么为什么要这样做，如果您可以使用 API 的文档化、公共部分。

2.  当您调用`.each(function(d, i) { })`d3 选择时，您获得的不仅仅是`d`和`i`：该函数被调用，使得该`this`函数内任何地方的关键字都指向与 . 关联的 HTML DOM 元素`d`。换句话说`console.log(this)`，从内部`function(d,i) {}`将记录类似`<div class="foo"></div>`或任何 html 元素的内容。这很有用，因为你可以在这个`this`对象上调用函数来更改它的 CSS 属性、内容或其他任何东西。通常，您使用 d3 来设置这些属性，如`d3.select(this).style('color', '#c33');`.

主要的收获是，使用`.each()`您可以访问您需要的 3 个东西`d`：`this`和`i`. 使用`.forEach()`, 在数组上（就像一开始的例子）你只能得到 2 个东西（`d`和`i`），你必须做很多工作才能将 HTML 元素与这 2 个东西关联起来。这就是 d3 的用处。

# ios - CFBundleDocumentTypes 未注册

> ID：13465797
> 
> 赞同：1
> 
> 时间：2012-11-20T02:36:01.940
> 
> 标签：ios, ios6, zip, info.plist, uti

现在我正在为 iOS 制作一个基于文档的应用程序。我目前正在尝试注册 .zip 以使用我的应用程序打开。我已经尝试过苹果的示例和许多其他教程，例如[此处](http://www.raywenderlich.com/1980/how-to-import-and-export-app-data-via-email-in-your-ios-app/ "这里")的教程。但是，它们都没有让我的应用程序出现在 mail.app 或任何其他应用程序中。我什至尝试删除该应用程序，然后运行它没有运气。如果它有所作为，我正在运行 iOS 6。 info.plist 的一部分如下：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>Zip File</string>
        <key>CFBundleTypeRole</key>
        <string>Editor</string>
        <key>LSHandlerRank</key>
        <string>Owner</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.pkware.zip-archive</string>
        </array>
    </dict>
</array> 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T02:56:37.363

我处理 zip 文件并有这个：

```
 <dict>
        <key>CFBundleTypeName</key>
        <string>ZIP</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.pkware.zip-archive</string>
            <string>public.zip-archive</string>
        </array>
    </dict> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-20T03:17:40.673

事实证明，它适用于 iPhone，但不适用于 iPad。这一定是 iOS 6 中的错误，或者这是一个仅限 iPhone 的项目，而不是通用应用程序。

# database - K 表示对数据进行聚类或排序

> ID：13465801
> 
> 赞同：2
> 
> 时间：2012-11-20T02:36:31.053
> 
> 标签：database, k-means

我有一个大型数据库，其中包含有关国家名称、位置、HDI（人类发展指数）和人口等国家的数据。我需要根据人口将这些数据分为“K”个组。我的一位朋友建议，在这种情况下，K-means 集群将很有用。但我在想，这可以直接通过根据人口对数据进行排序然后将这些排序的数据分成组来完成。这两种方法有什么区别吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T00:23:31.417

沿一维递归拆分会产生决策树。这是一种不同的数据结构。组之间的所有切割都沿轴（水平或垂直）。K-means 可以实现平衡，因为切割不一定是水平或垂直的（大多数情况下不是）。

实际上，决策树方法也非常有用。你不妨试试看。

# iphone - 如何使用 NSUserDefaults 而不是我自己的服务器添加消耗品应用内购买？

> ID：13465804
> 
> 赞同：1
> 
> 时间：2012-11-20T02:36:45.650
> 
> 标签：iphone, objective-c, ios, xcode, in-app-purchase

我是新手，所以如果可能的话，我需要简单的答案。我的第一个应用程序即将完成（但它甚至没有提交到商店），我想添加应用程序内购买。我的应用程序是一个用户从一些虚拟货币“硬币”开始的游戏。我想为他们添加一个 IAP，以便他们能够以三到五个不同的价格点购买更多的硬币。

我看过大量的教程，似乎信息参差不齐。任何人都可以帮助我了解如何在这里进行，对于一个非常新的开发人员来说是现实的并且与我的特定案例相关。我想免费添加 IAP，但如果有一个真正值得的简单付费解决方案，那可能没问题。

我正在使用 Xcode 4.3.2。我想使用 NSUserDefaults 而不是我自己的服务器，并且我为 NSUserDefaults 准备了代码。至少它存储“硬币”并具有价值的关键。

此外，现在 IOS 6 发布后情况有所不同，我需要全新版本的 Xcode 吗？

感谢您的帮助，请原谅我没有写好问题的经验:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T21:19:22.130

由于没有人回答这个问题，我会......即使只是为了帮助以后查看这个的人。

请承认，我还没有使用应用内购买.. 但我是一位经验丰富的 obj-c 程序员&我相信我在看过一次苹果文档后理解了这个概念......这是一个非常简单的“消耗品”示例应用内购买（*注意，如果它们是非消耗品或其他，您应该在此处添加更多内容）：

首先，将“StoreKit”objective-c 框架包含到您的项目中。

我创建了一个名为“InAppPurchaser”的简单类 - 请也包括这个类..

“InAppPurchaser.h”：

```
#import <Foundation/Foundation.h>
#import <StoreKit/StoreKit.h>

@protocol InAppPurchaserDelegate <NSObject>
- (void) InAppPurchaserHasCompletedTransactionSuccessfully:(SKPaymentTransaction *)transaction productID:(NSString *)productID;
- (void) InAppPurchaserHasCompletedTransactionUnsuccessfully:(SKPaymentTransaction *)transaction productID:(NSString *)productID error:(NSError *)error;
@end

@interface InAppPurchaser : NSObject <SKPaymentTransactionObserver>

@property (nonatomic, retain) id <InAppPurchaserDelegate> delegate;

#pragma mark Instantiation...
- (id) init;
+ (InAppPurchaser *) purchaser;
+ (InAppPurchaser *) purchaserWithDelegate:(id <InAppPurchaserDelegate>)delegate;

#pragma mark Utilities...
- (void) purchaseProductWithProductIdentifier:(NSString *)productID quantity:(NSInteger)quantity;
- (void) restoreTransactions;

@end 
```

“InAppPurchaser.m”：

```
#import "InAppPurchaser.h"

@implementation InAppPurchaser

@synthesize delegate;

- (id) init {

    if ( self = [super init] ) {

        [[SKPaymentQueue defaultQueue] addTransactionObserver:self];

    } // ends condition...

    return( self );

} // ends method...

+ (InAppPurchaser *) purchaser {

    return( [[InAppPurchaser alloc] init] );

} // ends method...

+ (InAppPurchaser *) purchaserWithDelegate:(id <InAppPurchaserDelegate>)delegate {

    InAppPurchaser *purchaser = [InAppPurchaser purchaser];
    purchaser.delegate = delegate;

    return( purchaser );

} // ends method...

#pragma mark Actions...

- (void) purchaseProductWithProductIdentifier:(NSString *)productID quantity:(NSInteger)quantity {

    SKMutablePayment *payment = [[SKMutablePayment alloc] init];
    payment.productIdentifier = productID;
    payment.quantity = quantity;

    [[SKPaymentQueue defaultQueue] addPayment:payment];

} // ends method...

#pragma mark SKPaymentTransactionObserver...

- (void) paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {

    for ( SKPaymentTransaction * transaction in transactions ) {

        switch ( transaction.transactionState ) {

            case SKPaymentTransactionStatePurchased:
                [self completeTransaction:transaction];
                break;

            case SKPaymentTransactionStateFailed:
                [self failedTransaction:transaction];
                break;

            case SKPaymentTransactionStateRestored:
                [self restoreTransaction:transaction];
                break;

            default:
                // ...
                break;

        } // ends switch statement...

    } // ends loop...

} // ends method...

- (void) completeTransaction:(SKPaymentTransaction *)transaction {

    if ( delegate != nil && [delegate respondsToSelector:@selector(InAppPurchaserHasCompletedTransactionSuccessfully:productID:)] )
        [delegate InAppPurchaserHasCompletedTransactionSuccessfully:transaction productID:transaction.payment.productIdentifier];

        [[SKPaymentQueue defaultQueue] finishTransaction:transaction];

} // ends method...

- (void) restoreTransaction:(SKPaymentTransaction *)transaction {

    if ( delegate != nil && [delegate respondsToSelector:@selector(InAppPurchaserHasCompletedTransactionSuccessfully:productID:)] )
        [delegate InAppPurchaserHasCompletedTransactionSuccessfully:transaction productID:transaction.payment.productIdentifier];

        [[SKPaymentQueue defaultQueue] finishTransaction:transaction];

} // ends method...

- (void) failedTransaction:(SKPaymentTransaction *)transaction {

    if ( delegate != nil && [delegate respondsToSelector:@selector(InAppPurchaserHasCompletedTransactionUnsuccessfully:productID:error:)] )
        [delegate InAppPurchaserHasCompletedTransactionUnsuccessfully:transaction productID:transaction.payment.productIdentifier error:transaction.error];

        [[SKPaymentQueue defaultQueue] finishTransaction: transaction];

} // ends method...

- (void) restoreTransactions {

    [[SKPaymentQueue defaultQueue] restoreCompletedTransactions];

} // ends method...

@end 
```

示例用法：

“MyClassViewController.h”：

```
#import <UIKit/UIKit.h>
#import "InAppPurchaser.h"

@interface MyClassViewController : UIViewController <InAppPurchaserDelegate>

@end 
```

“MyClassViewController.m”：

```
#import "MyClassViewController.h"

@interface MyClassViewController ()

@end

@implementation MyClassViewController

- (void)viewDidLoad {

    [super viewDidLoad];

} // ends method...

- (void)didReceiveMemoryWarning {

    [super didReceiveMemoryWarning];

} // ends method...

#pragma mark Purchasing...

- (void) myPurchaseMethod {

    InAppPurchaser *purchaser = [InAppPurchaser purchaserWithDelegate:self];
    [purchaser purchaseProductWithProductIdentifier:@"MyProduct" quantity:1];

} // ends method...

- (void) InAppPurchaserHasCompletedTransactionUnsuccessfully:(SKPaymentTransaction *)transaction productID:(NSString *)productID error:(NSError *)error {

    // handle success code.. IE: [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"MyProduct"];

} // ends method...

- (void) InAppPurchaserHasCompletedTransactionSuccessfully:(SKPaymentTransaction *)transaction productID:(NSString *)productID {

    // handle failure code...

} // ends method...

@end 
```

此代码未经测试，但它应该可以工作。显然，它可以改进，但它应该让你开始。

最后，您还想在您的 AppDelegate 中使用它......就像从 ViewController 调用它一样，除了不收取购买费用......只需调用我包含的“restoreTransactions”方法......这将恢复任何不完整的由于应用程序或互联网连接故障或其他原因而发生的交易。

例子：

在“AppDelegate.h”中：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate, InAppPurchaserDelegate> 
```

在“AppDelegate.m”中：

```
- (BOOL) application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    InAppPurchaser *purchaser = [InAppPurchaser purchaserWithDelegate:self];
    [purchaser restoreTransactions];

    return( YES );

} // ends method...

- (void) InAppPurchaserHasCompletedTransactionUnsuccessfully:(SKPaymentTransaction *)transaction productID:(NSString *)productID error:(NSError *)error {

    // handle success code.. IE: [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"MyProduct"];

} // ends method...

- (void) InAppPurchaserHasCompletedTransactionSuccessfully:(SKPaymentTransaction *)transaction productID:(NSString *)productID {

    // handle failure code...

} // ends method... 
```

# javascript - Windows 8 app dev JavaScript - 在 JavaScript 代码中显示/隐藏 Div

> ID：13465805
> 
> 赞同：0
> 
> 时间：2012-11-20T02:36:49.227
> 
> 标签：javascript, windows-8

我正在尝试根据 Windows 8 应用程序中的用户设置显示或隐藏 div。我的 html 文件中有 2 个 div：

```
<div id="fillBlank"><p>Fill in the Blank area</p></div>
<div id="multipleChoice"><p>Multiple choice area</p></div> 
```

在 JavaScript 文件中，我有：

```
var answerStyle = "mc";

function showArea() {
    if (answerStyle == "mc") {
        // Multiple choice
        multipleChoice.visible = true;
        fillBlank.visible = false;
    } else if (answerStyle == "fb") {
        // Fill in the blank
        multipleChoice.visible = false;
        fillBlank.visible = true;
    }
} 
```

这行不通。有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:31:55.477

在 JavaScript 中执行此操作的一种方法是使用 style 属性：

```
var fillBlank = document.getElementById("fillBlank");    
fillBlank.style.display = "none"; 
```

将 style.display 设置为 "" 将使用元素当前设置的显示时间使其可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:34:29.807

你很亲近！

```
var answerStyle = "mc";

function showArea() {
    if (answerStyle == "mc") {
        // Multiple choice
        multipleChoice.style.visibility ='visible';
        fillBlank.style.visibility = 'hidden';
    } else if (answerStyle == "fb") {
        // Fill in the blank
        multipleChoice.style.visibility = 'hidden';
        fillBlank.style.visibility = 'visible';
    }
} 
```

# python - XML在python中行走

> ID：13465807
> 
> 赞同：6
> 
> 时间：2012-11-20T02:36:51.877
> 
> 标签：python, xml, lxml, elementtree

我是 python 新手，想了解解析 xml。我还没有找到任何很好的例子或解释如何创建一个通用程序来遍历 XML 节点集。

我希望能够按名称和值对所有元素和属性进行分类和识别，而无需任何有关 xml 模式的信息。我不想依赖专门通过标签名称或文本调用元素和属性。

有人可以指出我正确的方向吗？

谢谢

更新：

被问到的具体问题是，“我一般如何在不了解模式的情况下从 XML 文档中的根节点递归所有节点。”

当时，我刚接触 python 并了解如何在许多其他语言中执行该操作，我对任何不依赖命名节点遍历 DOM 的真实示例感到困惑，这根本不是我想要的.

希望这可以澄清问题，因为该线程中的信息确实很有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T03:04:42.623

在 python 帮助中查看[ElementTree的文档](http://docs.python.org/2/library/xml.etree.elementtree.html)

该页面的基本代码存根是：

```
 import xml.etree.ElementTree as ET
    tree = ET.parse(filename)
    root = tree.getroot()
    for child in root:  
      child.tag, child.attrib 
```

您可以继续`for child in root:`向下递归运行，直到不再有孩子为止。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T07:14:38.207

使用 cElementTree；它比 Python 版本的 ElementTree 快 15-20 倍，并且使用的内存减少了 2-5 倍。 [http://effbot.org/zone/celementtree.htm](http://effbot.org/zone/celementtree.htm)

```
import xml.etree.cElementTree as ET
tree = ET.parse('test.xml')
for elem in tree.getiterator():
    if elem.tag:
        print 'my name:'
        print '\t'+elem.tag
    if elem.text:
        print 'my text:'
        print '\t'+(elem.text).strip()
    if elem.attrib.items():
        print 'my attributes:'
        for key, value in elem.attrib.items():
            print '\t'+'\t'+key +' : '+value
    if list(elem): # use elem.getchildren() for python2.6 or before
        print 'my no of child: %d'%len(list(elem))
    else:
        print 'No child'
    if elem.tail:
        print 'my tail:'
        print '\t'+'%s'%elem.tail.strip()
    print '$$$$$$$$$$' 
```

# asp.net - Trace.axd 返回 YSOD 不是自定义错误

> ID：13465808
> 
> 赞同：2
> 
> 时间：2012-11-20T02:36:55.060
> 
> 标签：asp.net, iis, web-config, stack-trace, ysod

这正式让我发疯......我有一个运行 ASP.Net 3.5 的 IIS7 网站。跟踪已关闭，并且我配置了自定义错误，但是当我访问 www.mysite.com/trace.axd 时，我收到一个标准的 ASP.Net YSOD 而不是我的自定义错误页面。返回的状态为 500，但使用 Cassini 或 Dev Server 时更奇怪的是状态为 403。

所以我的问题是如何在 live box 而不是标准的 ASP.Net YSOD 上返回我的自定义错误页面？

自定义错误配置：

```
<customErrors mode="RemoteOnly" defaultRedirect="~/Error.aspx" redirectMode="ResponseRewrite">
<error statusCode="404" path="~/404.aspx" redirect="~/404.aspx" responseMode="ExecuteURL" /></customErrors> 
```

跟踪设置：

```
<tracing>
            <traceFailedRequests>
                <add path="*.aspx">
                    <traceAreas>
                        <add provider="ASP" verbosity="Verbose" />
                        <add provider="ASPNET" areas="Infrastructure,Module,Page,AppServices" verbosity="Verbose" />
                        <add provider="ISAPI Extension" verbosity="Verbose" />
                        <add provider="WWW Server" areas="Authentication,Security,Filter,StaticFile,CGI,Compression,Cache,RequestNotifications,Module" verbosity="Verbose" />
                    </traceAreas>
                    <failureDefinitions timeTaken="00:00:00" statusCodes="500" />
                </add>
            </traceFailedRequests>
        </tracing> 
```

非常感谢这里的任何帮助，如果您需要其他任何帮助，请告诉我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-04T12:26:43.500

删除 Web.config 文件中的跟踪 HTTP 处理程序：

```
 <system.webServer>
    <!-- remove TraceHandler-Integrated - Remove the tracing handlers so that navigating to /trace.axd gives us a 
         404 Not Found instead of 500 Internal Server Error. -->
    <handlers>
      <remove name="TraceHandler-Integrated" />
      <remove name="TraceHandler-Integrated-4.0" />
    </handlers>
  </system.webServer> 
```

导航到 /trace.axd 现在给我们一个 404 Not Found 而不是 500 Internal Server Error。

# python - 简单功能不起作用，看不到错误

> ID：13465811
> 
> 赞同：1
> 
> 时间：2012-11-20T02:37:10.813
> 
> 标签：python, function, syntax-error

我是一个初级 Python 程序员，但已经编写了几个脚本，包括我定义自己的函数并使用它们的脚本。我似乎无法让任何用户定义的函数在 IDLE 中工作。想知道我是不是疯了/笨。有人可以解释以下结果吗？谢谢：

```
def f(x,y):
    solution = x+y
    return solution
f(2,2)
SyntaxError: invalid syntax
>>> a = f(2,2)

Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    a = f(2,2)
NameError: name 'f' is not defined 
```

* * *

```
def g(x):
    solution = x + 2
    return solution
g(2)
SyntaxError: invalid syntax
>>> a = g(2)

Traceback (most recent call last):
  File "<pyshell#11>", line 1, in <module>
    a = g(2)
NameError: name 'g' is not defined 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T02:39:05.850

在函数定义后添加一个空行，让解释器明白它已经完成。

```
>>> def f(x,y):
        solution = x+y
        return solution

>>> f(2,2)
4 
```

# java - 在对话框关闭时杀死一个线程

> ID：13465812
> 
> 赞同：1
> 
> 时间：2012-11-20T02:37:22.357
> 
> 标签：java

我有一个在循环中运行的线程，并且想在启动线程的对话框关闭后终止一个线程。最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T02:41:13.780

你可以调用`interrupt()`线程。但是，这不会停止线程，除非您在线程循环中对其进行处理。

```
Thread t = new Thread() {
    @Override
    public void run() {
        while (shouldLoop() && !isInterrupted()) {
            . . .
        }
    }
}();

// somewhere else:
t.interrupt(); // will exit thread on next loop iteration 
```

如果您不想使用`interrupt()`（例如，您没有对线程的引用），您可以在线程代码可访问的某处设置一个标志。您仍然需要在线程循环中检查它并退出循环（和`run()`方法）才能退出线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:41:04.420

您[可以收听](https://stackoverflow.com/questions/7652821/java-listener-on-dialog-close)对话框关闭事件，并[中断](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#interrupt%28%29)线程。

# css - 多个伪元素

> ID：13465817
> 
> 赞同：8
> 
> 时间：2012-11-20T02:37:55.327
> 
> 标签：css, pseudo-element

是否有可能在这样的一个对象中获取多个伪元素？

```
div { content: 'A' }
div::before { content: 'B'; }
div::before(2) { content: 'C'; }
div::before(3) { content: 'D'; } 
```

我已经尝试过了，但[它不起作用](http://jsfiddle.net/2mQpa/)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T03:10:52.620

该语法来自[旧的 Generated Content level 3 模块](http://www.w3.org/TR/css3-content/#inserting0)。它不起作用，因为从来没有人实现过这个模块的任何部分。事实上，由于缺乏兴趣和实施，规范本身已被废弃多年，并且正在[等待低优先级的重写](http://www.w3.org/Style/CSS/current-work.en.html)。

甚至没有人知道这个特性是否会在重写后继续存在，因为没有人愿意实现它。而且，坦率地说，我没有屏住呼吸......

您在这里唯一的解决方案是使用额外的标记而不是伪元素，或者找到其他方法来使用脚本生成该内容。

# c# - Crystal Report WinForm 如何修复错误对象引用未设置为对象的实例？

> ID：13465818
> 
> 赞同：0
> 
> 时间：2012-11-20T02:37:57.727
> 
> 标签：c#, winforms, crystal-reports, compiler-errors, crystal-reports-2008

WindowsForm C#上的水晶报告2008

**错误：对象引用未设置为对象的实例。**

如何修复它？

```
string appConn = ConfigurationManager.ConnectionStrings["connDB"].ConnectionString;

private void button5_Click(object sender, EventArgs e)
        {
            SqlConnection objConn = new SqlConnection();
            SqlCommand objCmd = new SqlCommand();
            SqlDataAdapter dtAdapter = new SqlDataAdapter();

            DataSet ds = new DataSet();
            DataTable dt;
            string strSQL;

            strSQL = "SELECT * FROM filesTA WHERE ChkDate = '" + dateTimePicker2.Value.ToString("yyyy-MM-dd") + "'";

            objConn.ConnectionString = appConn;
            var _with1 = objCmd;
            _with1.Connection = objConn;
            _with1.CommandText = strSQL;
            _with1.CommandType = CommandType.Text;
            dtAdapter.SelectCommand = objCmd;

            dtAdapter.Fill(ds, "myDataTable");
            dt = ds.Tables[0];

            dtAdapter = null;
            objConn.Close();
            objConn = null;

            ReportDocument rpt = new ReportDocument();
                   rpt.Load(System.Web.HttpContext.Current.Server.MapPath("Report\\CrystalReport1.rpt")); <<< Error
            rpt.SetDataSource(dt);
            this.crystalReportViewer1.ReportSource = rpt;
            this.crystalReportViewer1.Refresh();
        } 
```

请帮帮我。谢谢你的时间。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:00:31.120

好吧，我建议仔细查看堆栈跟踪。但是，我的猜测`System.Web.HttpContext.Current`是空的。许多人没有意识到这可以为 null，因此当您尝试引用它的`Server`属性时，您会得到一个 null 引用异常。

# jquery - 使用 jQuery 中的 each 函数来应用一个类

> ID：13465819
> 
> 赞同：0
> 
> 时间：2012-11-20T02:38:04.157
> 
> 标签：jquery

我正在使用一个简单的 each 函数将一个类添加到无序列表中的一组 li 标签中。

```
$('div ul li').each(function(e){
   $(this).addClass('c' + e);       
}); 
```

它返回以下 HTML

```
<div>
    <ul>
        <li class="c0"></li>
        <li class="c1"></li>
        <li class="c2"></li>
        <li class="c3"></li>
    </ul>
</div>  
<div>
    <ul>
        <li class="c4"></li>
        <li class="c5"></li>
        <li class="c6"></li>
        <li class="c7"></li>
    </ul>
</div> 
```

它正在做它应该做的就是将索引添加到类名的末尾。我怎样才能使它为每个新的无序列表重置。所以它会返回这样的东西。

```
<div>
    <ul>
        <li class="c0"></li>
        <li class="c1"></li>
        <li class="c2"></li>
        <li class="c3"></li>
    </ul>
</div>  
<div>
    <ul>
        <li class="c0"></li>
        <li class="c1"></li>
        <li class="c2"></li>
        <li class="c3"></li>
    </ul>
</div> 
```

这是我上面粘贴的代码的 JS 小提琴，以及我目前拥有的工作版本：http: [//jsfiddle.net/kdGgK/1/](http://jsfiddle.net/kdGgK/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T02:42:16.963

使用[`.index()`](http://api.jquery.com/index/)，它会告诉您每个元素相对于其兄弟元素的索引

```
$('div ul li').each(function(e){
   $(this).addClass('c' + $(this).index());        
}); 
```

[http://jsfiddle.net/mowglisanu/kdGgK/3/](http://jsfiddle.net/mowglisanu/kdGgK/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T02:42:14.267

您可以嵌套 each() 函数。

```
$('div ul').each(function() {
   $(this).children('li').each(function(e){
      $(this).addClass('c' + e);        
   });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T02:42:27.423

只需选择第`ul`一个，从 开始循环`ul`并将该类应用于`li`每个`ul`.

```
$('div ul').each(function(e){
    $(this).find('li').each(function (e) {
        $(this).addClass('c' + e);        
    });
}); 
```

JS 小提琴：http: [//jsfiddle.net/kdGgK/2/](http://jsfiddle.net/kdGgK/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-20T02:43:06.503

为每个无序列表 li 应用不同的类

```
 $('div ul').each(function(){
    $(this).children('li').each( function(e){
       $(this).addClass('c' + e);       
     });
  }); 
```

为每个无序列表 li 应用一个类

```
 $('div ul').each(function(e){
    $(this).children('li').addClass('c' + e);       
  }); 
```

# entity-framework - 如何调试实体框架代理？

> ID：13465822
> 
> 赞同：2
> 
> 时间：2012-11-20T02:38:51.607
> 
> 标签：entity-framework, poco

经过几周的 Entity Framework 5.0 试验后，我想我了解了基础知识。有两种类型的代理 - 仅延迟加载和更改跟踪。我知道如何启用/禁用每个以及何时使用它们。但是，我想看看这些课程。我希望能够在调试时进入它们，并且我想看看逻辑实际上做了什么。但是，由于它们是运行时生成的，Visual Studio 无法调试它们。理想情况下，我可以预编译它们，但现在我只想看看它们在做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T05:30:13.330

我认为您实际上无法调试代理 - 至少不能使用 Visual Studio。这些类型是动态生成的。生成代理的代码在这里：[http](http://entityframework.codeplex.com/SourceControl/changeset/view/190eef267fc7#src%2fEntityFramework%2fCore%2fObjects%2fInternal%2fEntityProxyFactory.cs) ://entityframework.codeplex.com/SourceControl/changeset/view/190eef267fc7#src%2fEntityFramework%2fCore%2fObjects%2fInternal%2fEntityProxyFactory.cs （请注意，这是在 EF6 中完成的但自 EF5 以来并没有太大变化）。您可能还想看看这篇博文： http: [//davedewinter.com/2010/04/08/viewing-generated-proxy-code-in-the-entity-framework/](http://davedewinter.com/2010/04/08/viewing-generated-proxy-code-in-the-entity-framework/) - 有一些黑客你会能够将生成的类型保存到磁盘并使用反射器查看代码。

# hover - 当悬停在高度变化时，如何添加延迟？

> ID：13465825
> 
> 赞同：2
> 
> 时间：2012-11-20T02:39:04.837
> 
> 标签：hover, jquery-animate, delay

```
$(function(){
    $("#top-img").hover(function(){
    $(this).stop().animate({height:"400px"},{queue:false,duration:700});
        }, 

        function() {
    $(this).stop().animate({height:"300px"},{queue:false,duration:700});
    });
}); 
```

这是我正在使用的代码，大部分都很简单。当我将鼠标悬停在 div`#top-img`上时，它会从高度（在 CSS 中设置）将其设置`300px`为`400px`.

我想稍微延迟一下，以便

1.  人们必须在它运行前悬停一秒钟，然后
2.  你必须先离开它一秒钟，然后它才能回到 `300px`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:44:27.973

查看[HoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html) jQuery 插件。我过去使用过它，它非常易于使用和实施

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:53:39.537

这种工作，但问题是当悬停和关闭悬停很多次时，它并没有结束，只是继续上下。所以我需要一些如何从两者中添加我需要的东西。.

```
$(document).ready(function(){
    $("#top-img").hover(function(){
    $(this).delay(400).animate({height:400},1000);
},function(){

    $(this).delay(300).animate({height:300},500);
    });
}); 
```

# node.js - node.js 模块路径

> ID：13465829
> 
> 赞同：42
> 
> 时间：2012-11-20T02:40:17.337
> 
> 标签：node.js, npm

我意识到，当我全局安装 node.js 模块（带有 -g 标志）时，除非我编写了整个路径，否则节点无法使用该模块。

我的意思是，如果模块已全局安装，这将不起作用：

```
cheerio = require('cheerio'), 
```

我必须这样写：

```
cheerio = require('/usr/lib/node_modules/cheerio'), 
```

我怎么能告诉节点它必须在正确的路径中寻找模块？

谢谢你。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-20T08:58:23.157

一般来说，我建议让 npm 为您提供路径并如上所述设置：

```
$ echo 'export NODE_PATH="'$(npm root -g)'"' >> ~/.bash_profile && . ~/.bash_profile 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-09-16T14:57:59.993

对于 Windows 平台中的用户，请将其添加到系统变量中的 PATH 中：

```
C:\Users\<username>\AppData\Roaming\npm 
```

PS：在 Windows 8.1 上测试

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-11-20T02:43:35.317

您可以将以下内容添加到 ~/.bash_profile：

```
export NODE_PATH=/usr/lib/node_modules:$NODE_PATH 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-06-07T06:15:50.223

对于安装了 ZSH 的人：

`echo 'export NODE_PATH="'$(npm root -g)'"' >> ~/.zshrc && . ~/.zshrc`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-06-05T06:40:41.963

更好的方法是在你的 js 文件中设置模块路径。

就我而言，我`npm install mysql`在 /usr/etc 运行，mysql 将显示在“/usr/etc/node_modules”中，所以这是正确的路径：

```
var mysql = require('/usr/etc/node_modules/mysql'); 
```

# ruby-on-rails - 从 Ruby on Rails 控制器本地保存渲染的静态 html、css、javascript 文件

> ID：13465832
> 
> 赞同：2
> 
> 时间：2012-11-20T02:40:49.770
> 
> 标签：ruby-on-rails, ruby

您如何将 Ruby on Rails 呈现的页面保存到本地带有 html、css、javascript 文件的静态页面中？

[我最初想`wget`在 Rails 中使用 using 命令，但失败了。](https://stackoverflow.com/questions/13465101/using-wget-on-rails-server-itself)

似乎也有很多线程在使用`render_to_string`，但这仅处理静态页面的 HTML。它对保存 css 和 javascript 没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:52:54.440

**app.get URL** on **rails console**是你一直在寻找的......（[如何从 Rails 的控制台调用控制器/视图方法？](https://stackoverflow.com/questions/151030/how-do-i-call-controller-view-methods-from-the-console-in-rails)）

# c# - ASP.Net 模拟方法的区别

> ID：13465833
> 
> 赞同：3
> 
> 时间：2012-11-20T02:40:55.410
> 
> 标签：c#, asp.net, .net, iis, impersonation

在这篇关于“如何在 ASP.NET 应用程序中实现模拟”的MSDN[文章中，他们列出了 4 种不同的方法来更改用于执行 Web 请求的帐户。](http://support.microsoft.com/kb/306158/en-us)不幸的是，它没有描述这些替代方案之间的差异。

我正在尝试模拟经过 IIS 身份验证的用户来从他们的本地计算机上复制一些文件。当我使用 WIN32 api`LogonUserA`并模拟特定用户时，它可以工作。但我需要 webapp 与许多用户一起工作（我没有可以访问每个人的文件的帐户）。

我认为简单地设置 Impersonate = "true" 并配置 IIS 应该可以工作，但有些不同。当我检查 Environment.UserName 时，它​​似乎在模拟正确的帐户，但我收到“访问被拒绝”错误。

有人知道这些模拟方法之间的区别吗？是否可以模拟经过 IIS 身份验证的用户，然后对其进行一些文件操作？

**更新**：根据我收到的反馈，我需要更清楚地了解我所面临的问题。

**环境设置**：IIS：禁用匿名身份验证，启用集成windows身份验证ASP.Net的web.config：身份验证模式=“windows”，impersonate=true，拒绝匿名用户

假设我以“userA”身份访问该页面：

**方案 1**：模拟 IIS Authenticated 用户

```
try{
  File.Copy(srcFile, destFile);   // Access Denied even though userA has access to srcFile.
} catch(Exception ex) {
...
} 
```

**方案 2**：使用 LogonUser 模拟 userA

```
try{
  // Impersonater is a wrapper around the WIN32 LogonUser API
  using(Impersonater imp = new Impersonator("domain", "userA", "pwd")) 
  {
    File.Copy(srcFile, destFile); // Works
  }
} catch(Exception ex) {
...
} 
```

在这两种情况下，我都在冒充“userA”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T04:22:21.863

> **问：**有人知道这些模拟方法之间的区别吗？

**答：**首先介绍一下 IIS 如何处理请求的背景知识。

IIS 服务器使用一个特定的系统用户 IUSR_computername *（* IIS6 中的默认值）来处理文件访问。IIS 服务器上运行着一个名为 Aspnet_wp.exe 的进程，该进程在名为 ASPNET 或 NetworkService 的帐户下运行。

因此，当向服务器发出请求时，IIS 会做出反应，如果请求是针对 ASP.NET 应用程序的，它会将请求传递给该进程。

这意味着如果 IIS 服务器设置为使用 IUSR_computername *（*匿名）访问方法。服务器将使用该帐户来处理请求，如果它发现它是一个 ASP.NET 应用程序，它会将请求传输到 ASP.NET 进程。

默认情况下禁用模拟，这意味着当 ASP.NET 进程处理请求时，请求将在 ASPNET 或 NetworkService 帐户下运行。

现在来了解模拟方法之间的区别：

*   **模拟经过 IIS 身份验证的帐户或用户**
    使用 IIS 设置使用的帐户。通常 IUSR_*计算机*名。
    用法：`<identity impersonate="true" />`

*   **为特定身份启用模拟**
    使用指定的特定帐户。
    用法：`<identity impersonate="true" userName="accountname" password="password" />`

第三个选项是默认状态，即禁用模拟。

> **问：**是否可以模拟 IIS 认证用户，然后对其进行一些文件操作？

**A:**取决于 IIS 认证用户的权限。如果该帐户具有操作文件的权限（Windows 中的 NTFS 权限），则答案是肯定的。

在这里阅读更多：

1.  [IIS 身份验证](http://msdn.microsoft.com/en-us/library/aa292114%28v=vs.71%29.aspx)
2.  [ASP.NET 身份验证](http://msdn.microsoft.com/en-us/library/aa292118%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T03:34:16.357

我相信您遇到了[此处](http://weblogs.asp.net/owscott/archive/2008/08/22/iis-windows-authentication-and-the-double-hop-issue.aspx)描述的“双跳”问题。基本上，客户端和 IIS 之间的连接是一跳，IIS 和网络共享之间的连接是第二个，默认情况下不允许模拟双跳。这意味着在您的第一个示例中，用户应该能够访问 IIS 机器的本地资源，但不能访问远程资源。

当以编程方式在 IIS 上输入凭据时，没有第二个跃点。这就是您要寻找的差异。

为了支持您的要求，您需要实现*委托*而不是*模拟*。请查看[MSDN](http://web.archive.org/web/20120922182002/http://support.microsoft.com/kb/810572)以获取更多信息。

# php - 无法使用 IP 地址连接数据库服务器

> ID：13465835
> 
> 赞同：0
> 
> 时间：2012-11-20T02:41:05.863
> 
> 标签：php, mysql, linux, system-administration

我正在使用 PHP 和 MySQL 建立数据库连接，问题是：

当我尝试连接到数据库远程服务器时，我本地计算机中的 Web 应用程序项目一切正常

```
mysql_connect("x.xx.xx.x","username","password") or die(mysql_error()); 
```

当我在具有 mysql 数据库的远程服务器中部署 Web 应用程序并尝试使用该 Web 应用程序时，我没有得到任何数据库错误连接！如果我将数据库连接更改为：

```
mysql_connect("localhost","username","password") or die(mysql_error()); 
```

使用 localhost (127.0.0.1) 而不是使用 IP 地址一切正常，我尝试检查 /etc/my.conf 文件并添加 bind-address=192.168.15.15 并重新启动 mysql 服务器仍然无法连接到数据库
任何想法！ ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:07:15.027

你需要检查两件事。首先，确保端口`3306`已打开以进行连接。其次，如果您要远程连接，则需要创建一个通配符用户（主机将是一个百分号`%`）。看看`mysql.user`桌子。如果您尝试连接的用户拥有`Host`of `localhost`，您将无法远程连接。

创建新用户：

`CREATE USER 'newuser'@'%' IDENTIFIED BY 'password';`

给那个用户权限，我建议只给有问题的数据库：

```
GRANT ALL PRIVILEGES ON your_database.* TO 'newuser'@'%'; 
```

最后，重新加载权限：

```
FLUSH PRIVILEGES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T08:49:31.927

问题是我启用了 SElinux，所以我用 commad 启用了 httpd 网络：

```
setsebool -P httpd_can_network_connect=1 
```

# java - Eclipse 中的 LTE-CIVIL UnsatisfiedLinkError

> ID：13465839
> 
> 赞同：6
> 
> 时间：2012-11-20T02:41:31.937
> 
> 标签：java, image-processing

我正在尝试使用 LTE-CIVIL，我刚刚获得了库并将 no-swt.jar 和本机 win32 .jar 添加到我在 Eclipse 中的项目中，我收到了这个错误。知道如何解决此错误。我只是想运行项目附带的示例代码。

```
Exception in thread "main" com.lti.civil.CaptureException:java.lang.UnsatisfiedLinkError: no civil in java.library.path at com.lti.civil.impl.jni.NativeCaptureSystemFactory.createCaptureSystem(NativeCaptureSystemFactory.java:24)at com.lti.civil.test.CaptureSystemTest.main(CaptureSystemTest.java:33)Caused by: java.lang.UnsatisfiedLinkError: no civil in java.library.path at java.lang.ClassLoader.loadLibrary(Unknown Source)at java.lang.Runtime.loadLibrary0(Unknown Source) at java.lang.System.loadLibrary(Unknown Source)at com.lti.civil.impl.jni.NativeCaptureSystemFactory.createCaptureSystem(NativeCaptureSystemFactory.java:21) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T08:43:05.853

当您的应用程序使用任何本机库或 dll 时，会出现此错误。要解决此问题，您必须添加 dll 的 java.library.path 变量。就像如果您的本机 dll 在 C:/Work/lti-civil/native/win32-x86 中预先存在，那么您必须在使用任何民用类之前添加以下代码

```
 System.setProperty( "java.library.path", "C:/Work/lti-civil/native/win32-x86/" );
    Field fieldSysPath = ClassLoader.class.getDeclaredField( "sys_paths" );
    fieldSysPath.setAccessible( true );
    fieldSysPath.set( null, null ); 
```

它将您的 dll 加载到您的应用程序中。

# activerecord - 如何使用 Active Record 使 Sinatra 中的 SQLite3 记录器静音？

> ID：13465842
> 
> 赞同：5
> 
> 时间：2012-11-20T02:41:37.623
> 
> 标签：activerecord, logging, rspec, sqlite, sinatra

防护输出窗口填满

```
D, [2012-11-19T18:36:30.391459 #53057] DEBUG -- :    (0.1ms)  begin transaction
D, [2012-11-19T18:36:30.392668 #53057] DEBUG -- :   SQL (0.4ms)  INSERT INTO "foo" ("created_at", "id", "foo", "foo", "updated_at", "value") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", 2012-11-19 18:36:30 -0800], ["id", 4], ["bar", 2], ["foo", 12], ["updated_at", 2012-11-19 18:36:30 -0800], ["value", true]]
D, [2012-11-19T18:36:30.393572 #53057] DEBUG -- :    (0.7ms)  commit transaction 
```

如何关闭此输出？

我试过`ActiveRecord::Base.logger = nil`了，但这似乎没有任何作用。

使用`sinatra-activerecord`,`rspec`和`guard`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T13:06:17.393

```
ActiveRecord::Base.logger.level = 1 
```

任何值为 1 或更大的作品。我想它也可能适用于其他数据库。

[参考](http://blog.habanerohq.com/post/16800611137/selectively-silence-activerecord-logging)

# jquery - 使用过多实时查询时可能出现的性能问题

> ID：13465845
> 
> 赞同：-1
> 
> 时间：2012-11-20T02:42:19.460
> 
> 标签：jquery, html, performance

正如标题所说，有什么问题吗？

例如，我以这种方式使用它们：

```
$("abbr.timeago").livequery(function() {
    $(this).timeago();
});

$("#btnPhoto").livequery(function() {
    createUploader();
});

$("#inputTagline").livequery(function () {
    $(this).charCount();
});; 
```

**编辑** ![在此处输入图像描述](../Images/b4d6f440e03af32fcfddd56132581007.png) 我的网页单独使用了 100k 内存。
如果页面内容是由 ajax 生成的，你们中有人知道如何解决 .timeago() 问题吗？我非常感谢。谢谢

**更新** 现在我可以通过下面的@Linas answe 摆脱 livequery。**欢迎任何更好的答案！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:03:25.977

我正在从事与您类似的项目，并且我也使用 time ago 插件，所以我现在面临与您相同的问题。

我所做的是我做了一个辅助函数，它可以做各种各样的事情，比如更新时间、删除未使用的内容等等。因此，当我更新页面上的任何内容时，我只需调用该帮助函数，而不是使用 livequery，从而节省大量内存。

**编辑** 这只是您为自己创建的一个非常简单的功能：

```
function helper(){
   //update all time that exists on current page
   //just put same class name in each time object for example class="time_ago"
   //now it will update each object with class "time_ago"
   $(".time_ago").timeago();
   //now do some other stuff like remove old content unbind events and so on here...
} 
```

每次你使用某种函数，它在调用后通过 ajax 更新你的内容`helper()`，它会处理你需要的东西，无需担心插件及其性能，因为你可以完全控制你的脚本。

# java - 应用程序、远程脚本和安全/混淆

> ID：13465850
> 
> 赞同：0
> 
> 时间：2012-11-20T02:43:15.707
> 
> 标签：java, android, algorithm, security

我将构建一个虚构的应用程序来构建我的问题。

我编写了一种寻宝应用程序，如果用户访问城镇周围的几个地方，他们将获得奖品。实际上，该应用程序将获取他们当前的纬度/经度并检查其与“宝藏位置”列表的接近程度，如果它们在任何宝藏位置的 10 米范围内，他们就会收到通知。

然后，该应用程序将对基本上插入数据库的远程脚本进行 http 发布。发布参数将是设备的 uuid 和他们访问的位置。

攻击者可以轻松地监视wireshark 并获取脚本的名称和参数。他们可以更进一步，反编译 apk 并获得其他东西，例如任何散列/混淆。然后，他们可以随心所欲地使用 curl 随意发帖，而对于非作弊者来说，游戏将被毁掉。这是一个从未真正需要解决的问题，因为在我编写的所有应用程序中，总会有不敏感的数据，我不介意将它暴露给公众。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:47:57.027

您可以做的最好的想法是以安全的方式发送数据。无论采用何种方法，使用 HTTPS 都会是更好的选择。这有效地防止了窃听者，它是互联网上任何安全通信背后的基础技术。

除了与服务器通信的协议之外，仍然存在不安全性。从本质上讲，有三种方法可以克服这些问题。

1.  玩家的位置可以定期发送到服务器。如果它们足够靠近其中一个区域，则服务器会做出响应。也许服务器可以包含足够的智能来知道从 A 点到 B 点需要时间。
2.  一次可以将一个位置发送到应用程序。也可以上传用户的轨迹，以验证位置是否正确。
3.  这些位置可以通过单向函数发送到程序。然后可以将真正的答案发送到服务器。这样做的问题是需要发现确切的位置才能返回相同的哈希值。然而，由于 GPS 坐标往往只能精确到几米，并且不会给出微不足道的数字，因此可以在当前位置附近测试多个值。单向函数必须需要一些时间才能以有效的方式进行计算，否则对于一个坏人来说，简单地测试城市中的每一平方米以找出可行的方法将是微不足道的。

从安全的角度来看，最好的方法是第一种，因为应用程序在到达该位置之前永远不知道它应该去哪里。当然，这会不必要地多次 ping 服务器。

# android - Android 抽象布局

> ID：13465854
> 
> 赞同：1
> 
> 时间：2012-11-20T02:44:00.190
> 
> 标签：android, android-layout, abstract-class

我试图找出一种方法来制作抽象布局。

我有一个 XML 布局文件，定义为：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/Title"
        style="@style/bigText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" />

    <ViewGroup
        android:id="@+id/QuestionArea"
        android:layout_below="@+id/Title"
        android:layout_centerHorizontal="true" />

    <ViewGroup
        android:id="@+id/AnswerArea"
        android:layout_alignLeft="@+id/Title"
        android:layout_below="@+id/Title" 
        android:layout_alignParentBottom="true"/>

</RelativeLayout> 
```

我想创建一个类族，它们都用自己的自定义视图替换 QuestionArea 和 AnswerArea ViewGroups。我已经想出了如何获取 ViewGroup，但我不知道如何获取另一个视图并将其与我正在制作的自定义视图叠加。本质上，我想要一个抽象的布局，我可以挑选并选择要插入到占位符中的自定义视图。

或者，我会很感激任何关于什么可能是做我想做的事情的更好方法的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:22:06.673

您可以尝试使用 ViewStubs 并设置`inflatedId`by 代码。

[http://developer.android.com/reference/android/view/ViewStub.html](http://developer.android.com/reference/android/view/ViewStub.html)

# objective-c - 无法附加到 NSString

> ID：13465856
> 
> 赞同：1
> 
> 时间：2012-11-20T02:44:14.613
> 
> 标签：objective-c, cocoa, nsstring, nsmutablestring

我正在尝试将文件扩展名附加到子类 NSTextFieldCell 返回的 stringValue

我已经尝试了所有我知道的并且可以在互联网上找到的东西，但这只是让我头疼

方法如下：

```
- (void)drawWithFrame:(NSRect)cellFrame inView:(NSView *)controlView {

    NSMutableString *filename = [[NSMutableString alloc] init];
    [filename appendString:self.stringValue];

    NSString *iconFileName = [[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:filename] stringByAppendingPathExtension:@"png"];
    NSLog(@"%@", iconFileName);

} 
```

返回的值虽然没有扩展！我还尝试了以下方法：

```
filename = [NSString stringWithFormat: @"%@.png", filename]; 
```

这将返回没有“.png”的“文件名”字符串

相似地：

```
filename = [filename stringByAppendingString: @".png"]; 
```

只返回“文件名”

该单元格所属的表列绑定了一个NSObject，向该列发送数据的方法如下：

```
- (NSString *) nationString {
    NSMutableString *string = [[NSMutableString alloc] init];
    int index = 0;

    if (nationAddress && nationAddress > 0x0) {
        index = [[[[controller database] nationsAddressIndex] valueForKey:[NSString stringWithFormat:@"%lli", nationAddress]] intValue];
        Nation *nationality = [[[controller database] nations] objectAtIndex:index];
        [string appendString:[nationality name]];
    }
    else {
        [string appendString:@"---"];
    }

    return string;
} 
```

任何人都知道为什么会发生这种情况，或者可以提出任何替代方案？任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:00:54.347

这应该返回带有扩展名的完整路径：

```
NSString *path =  [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"Default.png"];
NSLog(@"%@", path); 
```

所以，假设 self.stringValue 包含扩展，你的方法*应该*使用这个：

```
- (void)drawWithFrame:(NSRect)cellFrame inView:(NSView *)controlView {    
    NSString *iconFileName = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:self.stringValue];
    NSLog(@"%@", iconFileName);
} 
```

如果它不包含扩展名，请尝试以下操作：

```
- (void)drawWithFrame:(NSRect)cellFrame inView:(NSView *)controlView {
    NSString *strWithPath = [NSString stringWithFormat:@"%@.png", self.stringValue];
    NSString *iconFileName = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:strWithPath];
    NSLog(@"%@", iconFileName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:53:42.950

这些应该可以工作（除非有错别字）：

```
NSString* filename = @"abc";

NSString* result1 = [NSString stringWithFormat:@"%@.png", filename];

NSString* result2 = [filename stringByAppendingString:@".png"];

NSMutableString* result3 = [filename mutableCopy];
[result3 appendString:@".png"]; 
```

如果它们似乎不起作用，那么您在初始化或显示值的方式上会遇到一些问题。

*提示：在上述每一项之后立即*放置一个`NSLog(@"The answer is %@", resultN);`语句（适当更改“resultN”），看看你得到了什么。请记住，如果您从不同的对象看，您可能会看到不同的变量。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T02:54:09.293

只是为了测试。尝试使用此代码并在此处更新输出值：

```
NSMutableString *filename = [[NSMutableString alloc] init];
[filename appendString:self.stringValue];
NSLog(@"text1: %@ ;", filename);

filename = [NSString stringWithFormat: @"%@.png", filename];
filename = [NSString stringWithFormat: @"%@.png%@", filename, filename];
NSLog(@"text2: %@ ;", filename); 
```*

# mysql - 将日期添加到当前日期mysql

> ID：13465857
> 
> 赞同：2
> 
> 时间：2012-11-20T02:44:16.033
> 
> 标签：mysql, date

我必须找出我仓库中的哪些物品将在接下来的 30 天内到期。我写了以下查询

```
SELECT ItemName, ExpirationDate, 
FROM table 
WHERE ExpirationDate BETWEEN DATE_ADD(SYSDATE(), INTERVAL 30 DAY) and SYSDATE() 
```

我也试过了`CURDATE()`。`ExpirationDate`存储为`'DATE'` 查询不返回任何结果。我确定有物品将在接下来的 30 天内到期。我也尝试过提供大量数据`INTERVAL 30000 DAY`。我没有得到任何结果。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:56:24.677

[http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html)

Mysql 正在寻找`BETWEEN`子句中的第一项是较低的值，第二项是较高的值。

```
SELECT ItemName, ExpirationDate FROM table 
WHERE ExpirationDate BETWEEN SYSDATE() AND DATE_ADD(SYSDATE(), INTERVAL 30 DAY); 
```

# javascript - 如何使用 Javascript/jQuery 和不区分大小写的文本或搜索字段动态显示/隐藏 div（在 KeyUp、iTunes 样式上）

> ID：13465858
> 
> 赞同：4
> 
> 时间：2012-11-20T02:44:18.223
> 
> 标签：javascript, jquery, search, html, dynamic

我开始了使用 Javascript 创建类似 iTunes 的搜索的旅程。我了解了 jQuery，并在 StackOverflow 上的一些人的帮助下，我取得了[成功](http://jsfiddle.net/DcYd2/)。

我回到这里与您分享一种基于用户输入创建动态隐藏/显示列表的非常简单的方法。

```
Let's search! 
```

完整的教程代码可以在[这里](http://pastebin.com/e8DXHWex)找到。

它的 JSFiddle 就在[这里](http://jsfiddle.net/mXUtv/)！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:44:18.223

首先，创建一个简单的 div 布局，在 div 和上方的搜索栏中包含一些文本。

```
 <div class="search_bar">
      <form><!--The Field from which to gather data-->
        <input id="searchfield" type="text" onclick="value=''" value="Case Sensitive Search">
      </form>
    </div>
    <!--Containers With Text-->
    <div class="container">
      <div class="container_of_hc">
        <div class="horizontal_containers">Cat</div>
        <div class="color">Black</div>
        <div class="color">White</div>
        <div class="color">Orange</div>
      </div>
      <div class="horizontal_containers">Dog</div>
      <div class="horizontal_containers">Rat</div>
      <div class="horizontal_containers">Zebra</div>
      <div class="horizontal_containers">Wolf</div>
    </div> 
```

CSS：

```
 .container {
        width: 100%;
      }
      .horizontal_containers {
        height:10%;
        border: solid 3px #B30015;
        font-size: 45px;
        text-align: center;
      } 
```

其次，您将使用 jQuery 创建一个脚本。请记住标题说这是一个动态搜索，这意味着（对我们而言）我们希望使用键入的每个键来更新搜索：

```
$("#searchfield").keyup(function() { 
```

*注意：需要[选择器](http://www.w3schools.com/jquery/jquery_selectors.asp)复习吗？*

然后我们将变量设置为#searchfield 中的值：

```
 var str = $("#searchfield").val();  //get current value of id=searchfield 
```

为了确保在搜索字段中没有任何内容时显示列表中的所有 div，我们根据新变量 (str) 的长度创建一个 if 语句：

```
 if (str.length == 0) {
    //if searchfield is empty, show all
    $(".horizontal_containers").show();
  } 
```

最后，如果 str 的长度不为 0，我们会实际隐藏 div：

```
 else {
    //if input contains matching string, show div
    //if input does not contain matching string, hide div
    $("div:contains('" + str + "').horizontal_containers").show();
    $("div:not(:contains('" + str + "')).horizontal_containers").hide();
  }
}); 
```

`div:contains()`and`div:not(:contains())`语句用于设置条件。它本质上是一个 if 语句。他们搜索包含在 div 中的文本，而不是 div 属性。如果要搜索更深的 div 结构，可以在脚本的 jQuery 语句中使用多个选择器，如下所示：

```
if (str.length == 0) {
//if searchfield is empty, show all
  $(".container .color").show();
  } else {
    //if input contains matching string, show div
    //if input does not contain matching string, hide div
    $(".container div:contains('" + str + "').color").show();
    $(".container div:not(:contains('" + str + "')).color").hide();
  } 
```

替换您已经尝试过的脚本语句。

*注意：div 的嵌套结构必须与选择器中的嵌套结构相匹配。*

基本上就是这样。如果您有改进的技巧，知道如何将其更改为[不区分大小写的搜索](http://css-tricks.com/snippets/jquery/make-jquery-contains-case-insensitive/)，或者您能想到的任何其他内容，请告诉我！

***感谢 MrXenoType，我学会了 :contains 函数不区分大小写。***

要为此项目创建不区分大小写的搜索，只需添加：

```
$.expr[":"].contains = $.expr.createPseudo(function(arg) {
    return function( elem ) {
        return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
    };
}); 
```

这会为 contains 函数创建一个伪。将此代码放在您的其他脚本之上（在同一脚本中），以仅适用于该脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T03:49:36.493

很高兴看到尼克在这个实验中取得了成功。在学习如何做这件事上做得很好:)

万一您还没有遇到过这个 jquery 插件，您可能也想看看它，它被称为快速搜索。

[https://github.com/riklomas/quicksearch](https://github.com/riklomas/quicksearch)

我已经在许多页面上使用过它，它就像一个魅力。示例： http: [//fedmich.com/works/types-of-project.htm](http://fedmich.com/works/types-of-project.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T03:36:53.940

尝试：

```
$.expr[":"].contains_nocase = $.expr.createPseudo(function(arg) {
    return function( elem ) {
        return $(elem).text().toUpperCase().indexOf(arg.toUpperCase()) >= 0;
    };
}); 
```

用于使用 jQuery 1.8 添加 :contains_nocase() 选择器

# magento - 我想弄清楚如何在 Magento 设置的主页上列出带有缩略图的类别

> ID：13465860
> 
> 赞同：0
> 
> 时间：2012-11-20T02:44:25.480
> 
> 标签：magento

我尝试了一些不同的教程，但我缺乏经验显然阻碍了我。有人可以解释如何在 Magento 设置的主页上列出带有缩略图的类别。

谁能给我一个明确的答案？我正在运行 Magento v1.6。向我指出任何可能有帮助的方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:01:39.963

尝试这个

```
Mage::getModel('catalog/category')->load($_category->getId())->getThumbnail() 
```

并使用`foreach`循环来获取每个类别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T03:23:07.310

尝试（将 category_id 更改为您的 id）

```
{{block type="catalog/product_list" category_id="123"  template="catalog/product/list.phtml"}} 
```

您可以创建一个新文件调用 homepage_list.phtml 并使用 list.phtml 作为模板

阅读更多@ [http://www.magentocommerce.com/boards/viewthread/2075/P15/](http://www.magentocommerce.com/boards/viewthread/2075/P15/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T14:10:17.703

你可以尝试下面的链接来实现你想要的 [http://fishpig.co.uk/blog/display-categories-and-subcategories-in-magento.html](http://fishpig.co.uk/blog/display-categories-and-subcategories-in-magento.html)

# xcode - 归档时 XCode 4.5.2 挂起

> ID：13465862
> 
> 赞同：2
> 
> 时间：2012-11-20T02:44:31.117
> 
> 标签：xcode, archive

最近，由于 xcode 更新以及 xcode ofcourse，我将我的操作系统更新为山狮。我认为这引起了某种问题

1.  我试过改变 LLVM
2.  我试过跳过安装是/否
3.  我尝试过更改配置
4.  我试过重新安装 XCode
5.  我试过重新启动我的 Mac
6.  我尝试了另一个项目
7.  我试过“sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer
8.  尝试回到 4.5.1 仍然不起作用

但是 XCode 仍然卡住了，见下文。
几乎在存档几个小时结束时。
请问有没有人建议？

![在此处输入图像描述](../Images/a21c48a51f26e362ef786fe865f1aa5a.png)

# scala - Scala foldRight 中令人费解的类型不匹配

> ID：13465866
> 
> 赞同：4
> 
> 时间：2012-11-20T02:45:22.480
> 
> 标签：scala, type-mismatch

有人可以告诉我这个函数定义有什么问题吗？

```
def incr[Int](l: List[Int]): List[Int] = 
  l.foldRight(List[Int]())((x,z) => (x+1) :: z) 
```

Scala 编译器抱怨传递给的函数体中的类型不匹配`foldRight`：

```
<console>:8: error: type mismatch;
 found   : Int(1)
 required: String
           l.foldRight(List[Int]())((x,z) => (x+1) :: z)
                                                ^ 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T03:11:59.623

您已经定义了`def incr[Int]`一个任意类型，名称为`Int`，它会覆盖现有的类型。摆脱`[Int]`类型参数，它可以正常工作，或者使用不同的名称，如`T`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T04:35:16.863

路易吉说的对我有用。我不确定您为什么需要 type 参数，因为您已经将输入指定为 Int 列表：

```
def incr(l: List[Int]): List[Int] = l.foldRight(List[Int]())((x,z) => (x+1) :: z)

incr(List(1,2,3))                 //> res0: List[Int] = List(2, 3, 4) 
```

但在旁注中，与实际问题无关，如果这是预期的结果，另一种方法可能是：

```
def incr2(l:List[Int]):List[Int] = l map (_+1) 
```

# c# - 缺少 Sql Server Compact 4.0 提供程序

> ID：13465868
> 
> 赞同：1
> 
> 时间：2012-11-20T02:45:31.903
> 
> 标签：c#, .net, entity-framework-4, sql-server-ce

我一直在研究在 .NET 4.0 解决方案中使用 SQL Compact Editition 4.0，在我决定重命名一堆项目及其命名空间之前我做得很好。从那以后，我失去了从 SDF 文件生成 EDMX 模型的能力。

通常，我会将 EDMX 作为新项目添加到我的项目中，然后“从数据库生成”，然后我可以使用 SQL Server Compact 4.0 提供程序创建 SDF 文件。当然，这会生成一个空模型，但提供者仍然可用。

现在，我明白了：

![没有CE！！](../Images/542367437dc5509aea535ad3f46472da.png)

我试过卸载/安装 SQL CE 及其 SP1，Visual Studio SQL CE 4.0 Tools SP1，不行。

我需要重新格式化我的系统驱动器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:27:22.323

4.0 Provider 仅适用于 Web 类型的项目，而不是类库和桌面项目。解决方法是添加一个 web 类型的项目，然后移动 .edmx（以及 app.config/web.config 中的相应连接字符串）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:09:21.143

最终在我的工作站上卸载了 VS2010 和与开发相关的所有内容并安装了这个 VS2010 插件：[http ://sqlcetoolbox.codeplex.com/](http://sqlcetoolbox.codeplex.com/)

允许您将 EDMX 模型导出为任何类型的项目类型。:)

（您似乎是作者，在发布此内容后意识到，大声笑）

# ruby-on-rails - 如何使用 Clockwork Rails 调度程序 Gem？

> ID：13465869
> 
> 赞同：4
> 
> 时间：2012-11-20T02:45:35.093
> 
> 标签：ruby-on-rails, heroku, rake, scheduled-tasks

我遇到了 Clockwork 调度程序进程的语法问题。我实际上遇到了与此线程中讨论的问题类似的问题，但从未完全回答（[如何使用 Rails 发条 gem 运行 rake 任务？](https://stackoverflow.com/questions/11513058/how-do-i-use-rails-clockwork-gem-to-run-rake-tasks)）

当我使用“heroku rake send_notifications”对其进行测试时，我的“scheduler.rake”工作正常。我的 clock.rb 进程也在工作，因为它将每 30 秒触发一次。但是，在我的“rake.scheduler”中正确运行“send_notifications”任务时，clock.rb 的语法存在问题。这是它的样子：

```
# scheduler.rake
desc "This task is called by the Heroku scheduler add-on"
task :send_notifications => :environment do

   puts "this test is working correctly!"

end 
```

下面是clock.rb 的样子：

```
require File.expand_path('../../config/boot',        __FILE__)
require File.expand_path('../../config/environment', __FILE__)
require 'clockwork'

include Clockwork

every(30.seconds, 'Send notifications') {
   # Heroku::API.new.post_ps('pocket-pal', 'rake scheduler:send_notifications')
    rake scheduler:send_notifications
} 
```

如您所见，我尝试使用 Heroku API 并调用 rake 进行分离进程。

当我使用 Heroku API 时，我得到这个错误：

```
ERROR -- : uninitialized constant Heroku (NameError) 
```

当我调用 rake 时，出现以下错误：

```
ERROR -- : undefined local variable or method `send_notifications' for main:Object (NameError) 
```

有谁知道这两种方法的正确语法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-30T06:54:25.287

[这个答案有效，](https://stackoverflow.com/a/11516026/3448554)但是您需要完全遵循其字符串语法**。** 所以在你的情况下：

```
every(30.seconds, 'Send Notifications') {
  `rake scheduler:send_notifications`
} 
```

这意味着确保`` ``用于包装 rake 任务，而不是`" "`因为这会绊倒一些人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T10:51:17.210

Hereko 关于实现发条的文档可能会有所帮助

[带有 Clockwork 的 Ruby 中的计划作业和自定义时钟进程](https://devcenter.heroku.com/articles/scheduled-jobs-custom-clock-processes)

# variables - 在 XSLT 中设置标志以检测第一次通过循环

> ID：13465871
> 
> 赞同：2
> 
> 时间：2012-11-20T02:46:02.890
> 
> 标签：variables, xslt, foreach, umbraco

xslt 的新手。在 umbraco 中使用它，所以它是 1.0 版。

尝试在内联页脚列表中的链接之间插入分隔符，因此将它们放在除第一个链接之外的每个链接之前。这是一个简单的编程问题，您在循环外将标志设置为 0，然后一旦进入，您测试标志是否为 1，如果不是，则跳过在链接前添加分隔符。作为第一次循环中的最后一位，您将标志设置为 1。

我怎样才能在 xslt 中做到这一点？我对语法有点困惑，并且读到一旦设置了变量值，就无法更改它。有人有一个简单的例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T03:37:10.807

**这是一个简单的例子**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pBase" select="'http://myBase.com/'"/>

 <xsl:template match="num">
  <xsl:if test="position() > 1">, </xsl:if>
  <a href="{$pBase}{.}"><xsl:value-of select="."/></a>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**产生了想要的正确结果：**

```
<a href="http://myBase.com/01">01</a>, <a href="http://myBase.com/02">02</a>, <a href="http://myBase.com/03">03</a>, <a href="http://myBase.com/04">04</a>, <a href="http://myBase.com/05">05</a>, <a href="http://myBase.com/06">06</a>, <a href="http://myBase.com/07">07</a>, <a href="http://myBase.com/08">08</a>, <a href="http://myBase.com/09">09</a>, <a href="http://myBase.com/10">10</a> 
```

**它在浏览器中显示为**：

[01](http://myBase.com/01) , [02](http://myBase.com/02) , [03](http://myBase.com/03) , [04](http://myBase.com/04) , [05](http://myBase.com/05) , [06](http://myBase.com/06) , [07](http://myBase.com/07) , [08](http://myBase.com/08) , [09](http://myBase.com/09) , [10](http://myBase.com/10)

**解释：**

1.  XSLT 是一种函数式语言——这意味着变量一旦定义就无法更改。

2.  标准的 XPath**[`position()`](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-position)**函数可用于检查当前节点的位置是否具有特定值。

3.  使用**[内置 XSLT 模板](http://www.w3.org/TR/1999/REC-xslt-19991116#built-in-rule)**，匹配元素的模板具有以下正文：`<xsl:apply-templates/>`。这是：的缩写，`<xsl:apply-templates select="child::node()"/>`并将模板应用于当前节点的所有子节点——按文档顺序。

4.  因为我们已经指定`<xsl:strip-space elements="*"/>`了 ，所以在 XML 文档的解析过程中，任何元素的纯空格子元素都已被去除。这仅留下顶部元素的非空白子节点，`nums`它们都是`num`元素。

5.  模板内函数的值`position()`是当前节点在`<xsl:apply-templates>`执行指令时形成的节点列表中的位置。这意味着`position()`模板匹配内部函数的值在处理`num`第一个元素时为1，在`num`处理第二个元素时为2 `num`，...，在处理第10个`num`元素时为10。

6.  为值大于 1的所有`num`元素生成的输出以字符串“，”开头——完全符合这个问题的要求。`position()`对于第一个`num`元素，不会生成字符串“,”，因为`position()`在这种情况下的值为 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T09:50:50.503

XSLT 中没有时间之类的东西。你无法检测到“第一次通过循环”，因为没有时间的概念，因此没有第一次，实际上，它根本不是传统编程意义上的循环。输入列表中的所有项目在概念上都是并行处理的。这就是为什么您不能设置变量以在以后的迭代中使用 - 没有“以后的迭代”之类的东西。

您可以做的是检测您正在处理输入序列中的第一项（或排序后输入序列中的第一项，如果您使用 xsl:sort）。你用 test 来做到这一点`position() = 1`。

# java - java模式过滤器

> ID：13465873
> 
> 赞同：1
> 
> 时间：2012-11-20T02:46:21.540
> 
> 标签：java

我需要创建 java 模式来过滤数据，例如 13.6Gb、12MB、15.5Kb 我使用这些代码

```
 Pattern   p   =   Pattern.compile("(\\d+)(\\w+)"); 
  Matcher   m   =   p.matcher(content);
  String   num_letter   =   m.group(1); 
  String    union  =   m.group(2); 
```

但它不能检测十进制数，所以如何修改这个模式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:53:50.370

尝试为小数部分添加条件匹配：

```
Pattern.compile("(\\d+(?:[.]\\d+)?)(\\w+)"); 
```

注意小数部分使用*非捕获组*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:54:34.190

Have 是条件小数匹配的一种变体：

```
Pattern.compile("(\\d+\\.?\\d+?)+(\\w+)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T02:59:49.843

如果您使用的是 eclipse，我更喜欢使用类似的工具：http: [//myregexp.com/eclipsePlugin.html](http://myregexp.com/eclipsePlugin.html) - 它让这一切变得简单。

盯着你的，我会说这样的`(\\d+(\\.?(\\d+))?)`话，你可以先看看你有多少匹配组，然后再把你想要的匹配组拉出来。或者，使用命名的捕获组将更具可读性。

-瑞安

# memory - memcached 每个平板限制最多 100820 个项目？

> ID：13465875
> 
> 赞同：0
> 
> 时间：2012-11-20T02:46:44.043
> 
> 标签：memory, memcached

我们在 memcached 中存储了许多小的固定长度值，并且我不断观察 memcached 使用的内存如何停止增长而未达到其定义的内存限制。通常它会在最小的平板中达到 100820 个项目时停止增长。我尝试使用 -f 因子无济于事：在一块板上达到 100820 个项目时停止增长。

有没有办法修改 100820 项限制？我在任何地方都找不到有关它的信息。

详细统计如下。

运行字符串：

```
/usr/bin/memcached -m 328 -p 11211 -u nobody -l 127.0.0.1 -n 52 -C 
```

3.2.0-32-generic #51-Ubuntu SMP Wed Sep 26 21:33:09 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

内存缓存 1.4.13

```
STAT 1:chunk_size 104
STAT 1:chunks_per_page 10082
STAT 1:total_pages 10
STAT 1:total_chunks 100820
STAT 1:used_chunks 100820
STAT 1:free_chunks 0
STAT 1:free_chunks_end 0
STAT 1:mem_requested 10407999
STAT 1:get_hits 262079
STAT 1:cmd_set 321590
STAT 1:delete_hits 0
STAT 1:incr_hits 0
STAT 1:decr_hits 0
STAT 1:cas_hits 0
STAT 1:cas_badval 0
STAT 1:touch_hits 0

stats sizes
STAT 96 8
STAT 128 100812
STAT 160 5
STAT 192 195
STAT 224 4533
STAT 256 7859
STAT 288 10608
STAT 320 21084
STAT 352 26051
[...] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T09:06:41.187

在手册页上，您会看到 -I 的选项，它允许您调整平板的大小（[http://linux.die.net/man/1/memcached](http://linux.die.net/man/1/memcached)），如果您与-f 因素开关，您很快就会意识到如何最大化 memcache 存储大小。

如果没有，这里有一个更好的解释：http: [//artur.ejsmont.org/blog/content/a-few-memcache-gotchas](http://artur.ejsmont.org/blog/content/a-few-memcache-gotchas)

# c# - 从另一个类调用 Timer Tick 事件

> ID：13465884
> 
> 赞同：0
> 
> 时间：2012-11-20T02:48:16.313
> 
> 标签：c#, windows, timer

我正在开发一个 Windows 窗体应用程序。它在运行应用程序时触发 Tick 事件。private void tmrDisplay_Tick(object sender, EventArgs e) - 当一个线程启动时，方法应该被另一个类调用。有关如何从另一个类调用相同的滴答事件的任何帮助 - Class1 c？万分感谢

```
 namespace XT_3_Sample_Application
 {
   public partial class Form1 : Form
    {
    TcpClient tcpClient;
    Socket Socket_Client;
    StreamReader TcpStreamReader_Client;    // Read in ASCII
    Queue<string> receivedDataList = new Queue<string>();

    System.Timers.Timer tmrTcpPolling = new System.Timers.Timer(); 

    public Form1()
    {
        InitializeComponent();
        TM702_G2_Connection_Initialization();

    }

    void TM702_G2_Connection_Initialization()
    {
        tmrTcpPolling.Interval = 1;
        tmrTcpPolling.Elapsed += new ElapsedEventHandler(tmrTcpPolling_Elapsed);
    }
    #region Timer Event
    void tmrTcpPolling_Elapsed(object sender, ElapsedEventArgs e)
    {
        try
        {
            if (tcpClient.Available > 0)
            {
                receivedDataList.Enqueue(TcpStreamReader_Client.ReadLine());
            }
        }
        catch (Exception)
        {

            //throw;
        }
    }

    private void tmrDisplay_Tick(object sender, EventArgs e)
    {

        if (receivedDataList.Count > 0)
        {
            string RAW_Str = receivedDataList.Dequeue();
            //tbxConsoleOutput.AppendText(RAW_Str + Environment.NewLine);
            tbxConsoleOutput.AppendText(Parser_Selection(RAW_Str) + Environment.NewLine);
        }
    } 
   #endregion

   private void btnConnect_Click(object sender, EventArgs e)
    {
        tbxConsoleOutput.AppendText(Connection_Connect(tbxTCPIP.Text, Convert.ToInt32(tbxPort.Text, 10)));
        Thread t = new Thread(threadcal);
        t.Start(); 
    }
    static void threadcal()
    {
        Class1 c = new Class1();
        c.test("192.168.2.235",9999);

      }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T02:51:45.587

只要您有对计时器类的引用，您就可以公开一个可以调用的公共刻度方法。然后在计时器的事件中使用它而不是复制代码

```
private void tmrDisplay_Tick(object sender, EventArgs e)
{
    Tick();
}

public void Tick()
{
    if (receivedDataList.Count > 0)
    {
        string RAW_Str = receivedDataList.Dequeue();
        //tbxConsoleOutput.AppendText(RAW_Str + Environment.NewLine);
        tbxConsoleOutput.AppendText(Parser_Selection(RAW_Str) + Environment.NewLine);
    }
} 
```

# c++ - Eigen::MatrixXd 到 flann::Matrix 转换

> ID：13465890
> 
> 赞同：7
> 
> 时间：2012-11-20T02:49:26.303
> 
> 标签：c++, stl, matrix, nearest-neighbor, eigen

假设`mat`下面是类型`Eigen::MatrixXd`并且已经包含一些数据。为了避免重复内存，我尝试`flann::Matrix<double>`从指向 Eigen3 分配的原始内存块的指针实例化一个对象：

```
flann::Matrix<double> input(const_cast<double *>(mat.data(), mat.rows(), mat.cols()) 
```

但是，我的算法输出垃圾，但丑陋的就很好：

```
flann::Matrix<double> input(new double[mat.rows()*mat.cols()], mat.rows(),  mat.cols());
for (int i = 0; i  < mat.rows(); i++) {
for (int j = 0; j < mat.cols(); j++) {
  input[i][j] = mat(i, j);
} 
```

}

我研究了`Matrix_`从 flann 子类化基本类型以创建 Eigen3 矩阵的适配器的选项。但问题在于，它`Matrix_`依赖于`[]`操作符在其交互中的实现。这让我觉得我可能会遇到与上面显示的简单（但损坏）解决方案相同的内存问题。

你认为什么可以解释这种行为？

*   行/列主要问题
*   内、外步幅问题
*   内存对齐不兼容
*   `Eigen::Map`很甜，但不是我想要的。重写我的代码以`stl::vector<std::vector<double> >`用作基本类型并将`Eigen::Map`它们用于`Eigen::MatrixXd`
*   [http://nanoflann-reference.mrpt.org/svn/structnanoflann_1_1KDTreeEigenMatrixAdaptor.html](http://nanoflann-reference.mrpt.org/svn/structnanoflann_1_1KDTreeEigenMatrixAdaptor.html)不幸的是离基础 libflann 库太远而无法使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T19:33:34.807

我还得到了 libflann 的作者 Marius Muja 的确认，它`flann::Matrix`以行优先顺序存储，而 Eigen 默认使用列优先。这是他通过电子邮件给我的答案：

> 问题很可能是 Eigen 以列优先顺序存储矩阵 > 而 FLANN 要求它们以行优先顺序存储。
> 
> 一个解决方案是使用`Matrix<double, Dynamic, Dynamic, RowMajor>`代替`MatrixXd`，然后 FLANN 和 Eigen 矩阵可以共享相同的内存，否则将需要一个副本。马吕斯·穆加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T13:48:19.860

Eigen::Matrix 连续存储数据，因此您不应该遇到跨步问题。如果您尝试在其上构造 Eigen::Matrix ，则对齐可能是问题（但我无法想象这是怎么可能的）。默认情况下 Eigen::Matrix 是列优先的，这可能是你的问题。我不知道 flann 如何处理矩阵，如果它们是行优先的，那么就是这样。以下示例使用 Eigen::Matrix< double, -1, -1, Eigen::RowMajor > for mat，但使用 Eigen::MatrixXd 失败。

```
int k = 0;
for (int i = 0; i<mat.rows(); ++i)
{
    for (int j = 0; j<mat.cols(); ++j, ++k) {
        mat(i, j) = k;
    }
}

double* mptr = mat.data();
for (int i = 0; i<mat.rows() * mat.cols(); ++i) {
    assert(mptr[i] == i);
} 
```

我没有收到你对 Eigen::Map 的抱怨。将某些数据视为特征矩阵（请注意，默认情况下它仍然是列优先的），从矩阵子类化或实现自定义特征表达式可能是痛苦的，这是最好的方法。

# php - 从存储为位数据类型的mysql中检索php（codeigniter）中的字段

> ID：13465891
> 
> 赞同：2
> 
> 时间：2012-11-20T02:49:29.523
> 
> 标签：php, mysql, codeigniter

我在 MySQL 中有一个表，其中一列是位类型，我们称之为 'flag' 。我在 PHP 中使用 codeigniter 作为框架进行开发。我不太确定，如何在我的控制器中检索这个位字段“标志”。'query' 是从模型 'm_project_info' 中获取数据的数组。

```
$query['info'] = $this->m_project_info->project_info($id);
foreach ($query['info'] as $row)
            if ($row->flag == 0)
                     ....; 
```

所以我肯定知道`$row->flag`，这不是正确的方法。知道它应该是什么吗？

奇怪的是，这在 Windows 平台上运行良好，但在 Redhat 中失败。但这将是一个完全不同的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:02:29.503

`print_r`并`$query['info']`检查结果。然后你可以决定做什么

如果它是一个对象

```
$query['info'][0]->flag 
```

如果它是一个数组

```
$query['info'][0]['flag'] 
```

# eclipse - 如何设置 Eclipse IDE 选项卡切换设置

> ID：13465894
> 
> 赞同：1
> 
> 时间：2012-11-20T02:49:50.507
> 
> 标签：eclipse, settings

当我想在选项卡之间切换时，我通常会按`CTRL`+`TAB`来循环浏览选项卡.. 和使用 Netbean 时，Tabbing`CTRL`再次循环回来..

它让我可以快速跳转到 2 个脚本。但是在 Eclipse 中，这不起作用。这对我来说是一件巨大的事情，我希望我可以设置它。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:52:32.853

Eclipse 具有相同的功能，但您按+而不是`CTRL`+ 。`Tab``CTRL``F6`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:43:22.207

看起来这是他们目前正在解决的一个长期问题：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=206299](https://bugs.eclipse.org/bugs/show_bug.cgi?id=206299)

Next Editor 快捷键是您描述的行为的合适选择，但我无法让它在我的机器上工作。Ctrl+Tab 切换到激活工具栏和侧面板。显然这是故意的，修改键绑定似乎不会改变这种行为。

我正在运行 Eclipse 4.2.1。

# android - 在android中播放连续视频流而不会中断

> ID：13465904
> 
> 赞同：3
> 
> 时间：2012-11-20T02:52:01.963
> 
> 标签：android

我需要在 android 应用程序中一个接一个地播放连续视频。我在一部电影中有 5 个部分，我需要不间断地播放所有部分。我的问题是，当我准备下一个视频（第 2 部分）时，它在中间播放，暂停后播放视频。我需要有人帮助我如何避免在开始下一个视频之前出现的黑框。数据来自服务器。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:33:15.353

Here is a [code](http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/) you can refer and try :

**[Android Tutorial 3: Custom Progressive Audio Streaming with MediaPlayer](http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/)**

# delphi - 如何在显示之前操作 DB Grid 的内容？

> ID：13465910
> 
> 赞同：3
> 
> 时间：2012-11-20T02:53:11.103
> 
> 标签：delphi, dbgrid, tdbgrid

我在存储压力的数据库表中有一个列。压力始终存储为 PSI，可以通过潜水 14.5 转换为 BAR。

用户可以使用无线电组切换 PSI/BAR 的显示。

我正在使用 a`TStringGrid`并且正在转换为 a `TDbGrid`- 这对我来说很新。

当用户切换 PSI/BAR 时，如何更新我的数据库网格中的显示？（我想我只是再次执行它的查询？或调用`query.Refresh()`？）但是我该如何进行转换？

1.  可能是一个存储过程，虽然这看起来有点矫枉过正，存储过程对我来说也是新的......
2.  通过更改`SELECT`我的查询语句？但我该怎么做呢？`SELECT pressure / 14.5 FROM measurements`? 或者怎么做？
3.  或者有没有`OnBeforeXXX()`我可以编码的？或者`OnGetDisplayText()`类似的？

我确信这是非常基本的，但直到现在我一直在显示未经处理的数据，现在我需要一个转换函数。谷歌没有帮助，但我可能不知道该要求什么。

我还想更改列标题的文本，在“压力 (PSI)”和“压力 (BAR)”之间切换。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T04:02:49.837

为压力字段编写一个 OnGetText 事件处理程序，如下所示：

```
type
  TPressureMU = (pmuPSI, pmuBAR);

const
  PSIToBarFactor = 1/14.5;

procedure TdmData.qMeasurementsPressureGetText(Sender: TField; var Text: string;
  DisplayText: Boolean);
begin
  case PressureMU of
    pmuPSI: Text := FloatToStr(Sender.AsFloat); //Already PSI
    pmuBAR: Text := FloatToStr(Sender.AsFloat * PSIToBarFactor); //ConvertingToBAR
  end
end; 
```

我正在使用声明的枚举的属性 PressureMU 来控制压力是否以 PSI 或 BAR 测量单位显示。

这样，当用户更改选择时，您只需调整该属性的值。

如果您使用持久性字段，您可以使用对象检查器将事件处理程序直接链接到您的字段，如果没有，您可以通过如下代码执行此操作：

```
begin
  qMeasurements.FieldByName('Pressure').OnGetText := qMeasurementsPressureGetText;
end; 
```

`qMeasurementsPressureGetText`方法的名称在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T03:52:20.430

创建持久字段（右键单击查询，然后选择`Add Fields`在设计时创建存储在 .dfm 中的字段）。右键单击查询，然后添加一个新字段。将其设为计算字段，并在`OnCalcFields`查询时将 PSI 转换为 BAR。

现在，当用户切换显示时，您只需通过设置来显示`PSI`或`BAR`列，将其`Column.FieldName`设置为实际`PSI`列或新计算的`BAR`列。

当然，如果您不使用持久字段，则可以在查询中完成所有操作。只需在 SQL 语句中添加一个包含转换结果的新列，您仍然可以`Column.FieldName`在运行时更改以切换正在显示的值。

# android - android onTouchEvent 工作

> ID：13465911
> 
> 赞同：0
> 
> 时间：2012-11-20T02:53:17.297
> 
> 标签：android, multithreading, android-view

我通过扩展“SurfaceView”创建了自己的自定义视图类。然后我重写 onTouchEvent 方法。两个问题。

（1）即使我处理了我需要的一切（我认为），我是否应该同时调用 super.onTouchEvent ？(2) 是否应该在新线程中完成工作？我收到很多***跳过的 32 帧！应用程序可能在其主线程上做的工作过多*** onTouchEvent 是从 UI 线程调用的吗？

我的观点只不过是一个操纵杆，在触摸事件中，我只需用 3 或 4 行代码移动对象的坐标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T04:25:07.040

1.  这里不需要调用 superOnTouchEvnet。但请记住，如果返回 false，它将不起作用。因此，如果要处理事件，最好在完成任务后返回 super.OnTouchEvent。如果对于某些情况或某些输入，您不想处理触摸事件，那么不使用 super 方法就返回 false。

2.  是的。此方法由主 UI 线程处理。所以对于长任务使用任何安全的方法，比如使用不同的线程、asynctask 或 handler.post。

# c - 将 OpenCV Mat 图像与英特尔 IPP 一起使用？

> ID：13465914
> 
> 赞同：14
> 
> 时间：2012-11-20T02:53:35.963
> 
> 标签：c, image-processing, opencv, computer-vision, intel-ipp

我最近开始使用[Intel Performance Primitives (IPP)](http://software.intel.com/en-us/intel-ipp)进行图像处理。对于那些还没有听说过 IPP 的人，可以将 IPP 看作是用于图像处理的[MKL](http://software.intel.com/en-us/intel-mkl)的类似物，而不是线性代数。

我已经在 OpenCV 中实现了一个有点复杂的视觉系统，我想将一些 OpenCV 例程（例如卷积和 FFT）换成更快的 IPP 例程。我的 OpenCV 代码总是使用`cv::Mat`图像数据结构。但是，根据 IPP 代码示例，似乎 IPP 更喜欢[`CIppiImage`](http://www.codeforge.com/read/116995/ippiImage.h__html)数据结构。

我的系统在 OpenCV 中进行了几次图像转换，然后我想在 IPP 中做一些事情，然后在 OpenCV 中做更多的工作。这是使 OpenCV 和 IPP 很好地结合在一起的一种天真的方法：

```
 cv::Mat = load original image
 use OpenCV to do some work on cv::Mat
 write cv::Mat to file

 CIppiImage = read cv::Mat from file //for IPP
 use IPP to do some work on CIppiImage
 write CIppiImage to file

 cv::Mat = read CIppiImage from file
 use OpenCV to do more work on cv::Mat
 write final image to file 
```

但是，这有点乏味，并且读/写文件可能会增加整体执行时间。

* * *

我试图让图像处理程序中的 OpenCV 和 IPP 之间的交替更加无缝。这里有几件事可以解决这个问题：

1.  是否有一个可以将 a 转换为`cv::Mat`反之亦然`CIppiImage`的单线器？
2.  我对`cv::Mat`实现细节非常熟悉，但对`CIppiImage`. 是否具有相同`cv::Mat`的`CIppiImage`数据布局？如果是这样，我可以做类似于以下演员的事情吗？`CIppiImage cimg = (CIppiImage)(&myMat.data[0])`?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T02:05:02.573

有一种干净的方法可以将 OpenCV 数据传递到 IPP 函数中。

如果我们有一个 OpenCV `Mat`，我们可以`*Mat.data[0]`转换为一个`const Ipp<type>*`. 例如，如果我们正在处理 8 位 unsigned char ( `8u`) 数据，我们可以插入`(const Ipp8u*)&img.data[0]`IPP 函数。这是一个使用`ippiFilter`具有典型[Lena](https://i.stack.imgur.com/SCW3u.png)图像的函数的示例：

```
Mat img = imread("./Lena.pgm"); //OpenCV 8U_C1 image
Mat outImg = img.clone(); //allocate space for convolution results

int step = img.cols; //pitch
const Ipp32s kernel[9] = {-1, 0, 1, -1, 0, 1, -1, 0, 1};
IppiSize kernelSize = {3,3};
IppiSize dstRoiSize = {img.cols - kernelSize.width + 1, img.rows - kernelSize.height + 1};
IppiPoint anchor = {2,2};
int divisor = 1;

IppStatus status = ippiFilter_8u_C1R((const Ipp8u*)&img.data[0], step,
                                     (Ipp8u*)&outImg.data[0], step, dstRoiSize,
                                     kernel, kernelSize, anchor, divisor); 
```

当我`outImg`（从上面的代码）写入文件时，它给出了预期的结果： ![在此处输入图像描述](../Images/09e8edcd29d6a581e6d59ad6682767f2.png)

这与我`nppiFilter`使用相同参数运行 Nvidia 版本时得到的结果相匹配： ![在此处输入图像描述](../Images/7d133bb06716cf703dbbecd98d4b1cac.png)

* * *

我提到了`CIppiImage`原始问题中称为的结构。`CIppiImage`只是一个简单的数组包装器。

# javascript - 发布到我的推特帐户

> ID：13465922
> 
> 赞同：0
> 
> 时间：2012-11-20T02:54:09.863
> 
> 标签：javascript, twitter

我想向我的 Twitter 帐户发布消息。

我见过的大多数示例都围绕 oauth 并以用户身份登录。我只想传递我的访问代码并发布。

当我去 twitter oauth 页面生成一个 curl 发布请求时，它说：

> 重要提示：这只会在几分钟内有效。还要记住 cURL 命令将实际执行请求。

如何获得始终有效的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:13:58.580

在 OAuth 身份验证参数中，有一个称为时间戳的时间戳`oauth_timestamp`，它为您的请求提供日期（自 1970 年 1 月 1 日以来的秒数）。它是`oauth_nonce`标识您在 Twitter 端的请求的 2 个主要参数之一（带有 ，一种 UUID）。如果`oauth_timestamp`太旧或对应于将来的某个日期，Twitter 将认为您的请求无效。有关详细信息，请参阅 Twitter 文档中的相应页面：[https ://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)

因此，无法执行始终有效的请求。

# haskell-platform - Haskell 中的有向图

> ID：13465927
> 
> 赞同：0
> 
> 时间：2012-11-20T02:54:56.780
> 
> 标签：haskell-platform, template-haskell, haskell, haskell-mode

我现在正在与 Haskell 斗争。甚至，我对命令式语言和 OOP 有一些经验，但 Haskell 似乎与它们不同。我低估了 Haskell，并认为学习一门新语言对我来说不是问题。然而，在花了整整一周的时间学习许多新概念（typeclass、functors、applicative、monoids、monads...阅读了这个[learnyouahaskell](http://learnyouahaskell.com/)的所有 14 章）之后，我注意到它们让我很困惑，不知道如何开始写作Haskell 的一个程序。一些专家说你需要几个月的时间才能掌握 Haskell。但我只有两周的时间来完成一个大项目。

1）所以我的第一个问题是如何学习 Haskell

2）什么时候需要使用应用函子，什么时候需要使用单子？

3）我的项目是处理基于许多演示的有向图：

*   邻接矩阵
*   二叉搜索树

我是一个 Haskell 新手，所以不知道在 Haskell 中我可以从哪里开始有向图？你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:15:12.107

要回答您的第一个问题（如何学习 Haskell），我想说您需要实际编写代码。听起来您阅读了 Learn You A Haskell 的许多章节，但它们让您头晕目眩。慢一点，更重要的是，通过键入和评估代码来跟随。你说你“不知道从哪里开始用 Haskell 编写程序”。实际编写和执行示例的做法正是您需要了解代码的工作原理以及从哪里开始的内容。

您可能还没有完全准备好回答第二个问题（何时使用`Monad`和何时使用`Applicative`）——不过，通过 LYAH 工作，您肯定会知道何时使用每个问题。

具体就有向图而言，[这是一个很好的资源](https://rads.stackoverflow.com/amzn/click/com/0201596040)（亚马逊的评论不是很好，但我认为这是对 Haskell 中图和抽象数据类型概念的一个很好的介绍）。

祝你好运 - Haskell 非常值得奋斗！

# php - PHP上传图片

> ID：13465929
> 
> 赞同：15
> 
> 时间：2012-11-20T02:55:42.393
> 
> 标签：php, image, upload

好吧，我在这方面投入了很多时间。我是 PHP 编程的新手并试图掌握基础知识，但截至昨晚我有点迷失，我能够获得一个 PHP 表单来上传基本数据，如名称地址和我的（MySQL）服务器。

但是今天我说让我们做下一步，这将是一个图像到服务器。我已经在 YouTube 上观看了 3 个视频，大概 100 次只是重新复制代码并以多种不同的方式尝试它。

```
http://www.youtube.com/watch?v=CxY3FR9doHI
http://www.youtube.com/watch?v=vFZfJZ_WNC4&feature=relmfu 
```

仍然无法得到它。

但长话短说：我有一个连接到服务器的 config.php 文件，这是我在上传表单页面上运行的代码：

```
<html>
  <head>
    <title>Upload an image</title>
  </head>
<body>
  <form action="UploadContent.php" method="POST" enctype="multipart/form-data">
  File:
    <input type="file" name="image"> <input type="submit" value="Upload">
  </form>
<?php

// connect to database
include"config.php";

// file properties
$file = $_FILES['image']['tmp_name'];

if (!isset($file))
  echo "Please select a profile pic";
else
{
  $image = addslashes(file_get_content($_FILES['image']['tmp_name']));
  $image_name = addslashes($FILES['image']['name']);
  $image_size = getimagesize($_FILES['image']['tmp_name']);

  if ($image_size==FALSE)
    echo "That isn't a image.";
  else
  {
    $insert = mysql_query("INSERT INTO content VALUES ('','','','','','','','','','$image_name','$image',)");
  }
}
?>
  </body>
</html> 
```

插入行上所有的原因`'', '', '', ''`是因为我在第 10 个字段中有名称，在第 11 个字段中有图像 blob，所有导致这些的都是名字、姓氏和类似的随机内容。我怎样才能解决这个问题？它返回错误：

> 致命错误：在第 22 行的 /home/content/34/9587634/html/WEBPAGE/UploadContent.php 中调用未定义函数 file_get_content()

我不知道该怎么办。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-20T03:11:58.757

该代码忽略了调用函数 move_uploaded_file() ，该函数将检查指示的文件是否对上传有效。

您可能希望在以下位置查看一个简单的示例：

[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-10T10:57:08.987

您需要添加两个新文件，一个是 index.html，复制并粘贴以下代码，另一个是 imageup.php，它将上传您的图像

```
 <form action="imageup.php" method="post" enctype="multipart/form-data">
 <input type="file" name="banner" >
 <input type="submit" value="submit">
 </form>

 imageup.php
 <?php
 $banner=$_FILES['banner']['name']; 
 $expbanner=explode('.',$banner);
 $bannerexptype=$expbanner[1];
 date_default_timezone_set('Australia/Melbourne');
 $date = date('m/d/Yh:i:sa', time());
 $rand=rand(10000,99999);
 $encname=$date.$rand;
 $bannername=md5($encname).'.'.$bannerexptype;
 $bannerpath="uploads/banners/".$bannername;
 move_uploaded_file($_FILES["banner"]["tmp_name"],$bannerpath);
 ?> 
```

上面的代码将使用加密名称上传您的图像

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T03:00:12.523

`file_get_content()`将代码中的函数更改为`file_get_contents()`. 您在函数名称的末尾缺少“s”。这就是为什么它给出未定义的函数错误。

[文件获取内容（）](http://php.net/manual/en/function.file-get-contents.php)

`$image`在行中归档后删除最后一个不必要的逗号

```
"INSERT INTO content VALUES         ('','','','','','','','','','$image_name','$image',) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-05T10:29:05.290

我建议您将图像保存在服务器中，然后将 URL 保存在 MYSQL 数据库中。

首先，你应该对你的图像做更多的验证，在未经验证的文件可能导致巨大的安全风险之前。

1.  检查图像

    ```
    if (empty($_FILES['image']))
      throw new Exception('Image file is missing'); 
    ```

2.  将图像保存在变量中

    ```
    $image = $_FILES['image']; 
    ```

3.  检查上传时间错误

    ```
    if ($image['error'] !== 0) {
       if ($image['error'] === 1) 
          throw new Exception('Max upload size exceeded');

       throw new Exception('Image uploading error: INI Error');
    } 
    ```

4.  检查上传的文件是否存在于服务器中

    ```
    if (!file_exists($image['tmp_name']))
        throw new Exception('Image file is missing in the server'); 
    ```

5.  验证文件大小（根据需要更改）

    ```
     $maxFileSize = 2 * 10e6; // = 2 000 000 bytes = 2MB
        if ($image['size'] > $maxFileSize)
            throw new Exception('Max size limit exceeded'); 
    ```

6.  验证图像（检查文件是否为图像）

    ```
     $imageData = getimagesize($image['tmp_name']);
         if (!$imageData) 
         throw new Exception('Invalid image'); 
    ```

7.  验证图像 mime 类型（根据您的需要执行此操作）

    ```
     $mimeType = $imageData['mime'];
     $allowedMimeTypes = ['image/jpeg', 'image/png', 'image/gif'];
     if (!in_array($mimeType, $allowedMimeTypes)) 
        throw new Exception('Only JPEG, PNG and GIFs are allowed'); 
    ```

这可能会帮助您使用 PHP 创建安全的图像上传脚本。

代码来源：[https ://developer.hyvor.com/php/image-upload-ajax-php-mysql](https://developer.hyvor.com/php/image-upload-ajax-php-mysql)

此外，我建议您使用[MYSQLI 准备好的语句](https://developer.hyvor.com/php/prepared-statements)进行查询以提高安全性。

谢谢你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-01T17:03:10.873

同一页面上的简单 PHP**文件/图像上传代码。**

```
<form action="" method="post" enctype="multipart/form-data">
  <table border="1px">
    <tr><td><input type="file" name="image" ></td></tr>
    <tr><td> <input type="submit" value="upload" name="btn"></td></tr>
  </table>
</form>

 <?php
   if(isset($_POST['btn'])){
     $image=$_FILES['image']['name']; 
     $imageArr=explode('.',$image); //first index is file name and second index file type
     $rand=rand(10000,99999);
     $newImageName=$imageArr[0].$rand.'.'.$imageArr[1];
     $uploadPath="uploads/".$newImageName;
     $isUploaded=move_uploaded_file($_FILES["image"]["tmp_name"],$uploadPath);
     if($isUploaded)
       echo 'successfully file uploaded';
     else
       echo 'something went wrong'; 
   }

 ?> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-04T05:00:14.677

这是一个基本示例，说明如何将具有某些限制（如下所列）的图像文件上传到服务器。

*   图像的存在。
*   图片扩展验证
*   检查图像大小。

    ```
    <?php
       $newfilename = "newfilename";

       if(isset($_FILES['image'])){
          $errors= array();
          $file_name = $_FILES['image']['name'];
          $file_size =$_FILES['image']['size'];
          $file_tmp =$_FILES['image']['tmp_name'];
          $file_type=$_FILES['image']['type'];
          $file_ext=strtolower(end(explode('.',$_FILES['image']['name'])));

          $expensions= array("jpeg","jpg","png");
          if(file_exists($file_name)) {
            echo "Sorry, file already exists.";
            }
          if(in_array($file_ext,$expensions)=== false){
             $errors[]="extension not allowed, please choose a JPEG or PNG file.";
          }

          if($file_size > 2097152){
             $errors[]='File size must be excately 2 MB';
          }

          if(empty($errors)==true){
            move_uploaded_file($file_tmp,"images/".$newfilename.".".$file_ext);
            echo "Success";
            echo "<script>window.close();</script>";

          }

          else{
             print_r($errors);
          }
       }
    ?>
    <html>
       <body>

          <form action="" method="POST" enctype="multipart/form-data">
             <input type="file" name="image" />
             <input type="submit"/>
          </form>

       </body>
    </html> 
    ```

    Credit to [this](https://www.tutorialspoint.com/php/php_file_uploading.htm) page.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-07T20:43:19.710

```
<?php

$filename=$_FILES['file']['name'];
$filetype=$_FILES['file']['type'];
if($filetype=='image/jpeg' or $filetype=='image/png' or $filetype=='image/gif')
{
move_uploaded_file($_FILES['file']['tmp_name'],'dir_name/'.$filename);
$filepath="dir_name`enter code here`/".$filename;
}

?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-13T23:46:20.680

```
 <?php 
 $target_dir = "images/";
    echo $target_file = $target_dir . basename($_FILES["image"]["name"]);
    $post_tmp_img = $_FILES["image"]["tmp_name"];
    $imageFileType = strtolower(pathinfo($target_file, PATHINFO_EXTENSION));
    $post_imag = $_FILES["image"]["name"];
        move_uploaded_file($post_tmp_img,"../images/$post_imag");
 ?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-03T14:30:27.783

这段代码很容易通过 php 上传文件。在这段代码中，我在同一页面中执行上传任务，这意味着我们的 html 和 php 代码都驻留在同一个文件中。此代码生成图像名称的新名称。

首先看html代码

```
<form action="index.php" method="post" enctype="multipart/form-data">
 <input type="file" name="banner_image" >
 <input type="submit" value="submit">
 </form> 
```

现在看php代码

```
<?php
$image_name=$_FILES['banner_image']['name'];
       $temp = explode(".", $image_name);
        $newfilename = round(microtime(true)) . '.' . end($temp);
       $imagepath="uploads/".$newfilename;
       move_uploaded_file($_FILES["banner_image"]["tmp_name"],$imagepath);
?> 
```

# java - 如何处理Java中的超时异常？

> ID：13465930
> 
> 赞同：1
> 
> 时间：2012-11-20T02:55:59.373
> 
> 标签：java, timeout

这是我的代码：

```
 private void synCampaign() {
    List<Campaign> campaigns;
    try {
        campaigns = AdwordsCampaign.getAllCampaign();
        for(Campaign c : campaigns) 
            CampaignDao.save(c);
    } catch (ApiException e) {
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e1) {
            e1.printStackTrace();
        }
        synCampaign();
        e.printStackTrace();
    } catch (RemoteException e) {
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e1) {
            e1.printStackTrace();
        }
        synCampaign();
        e.printStackTrace();
    }

} 
```

`AdwordsCampaign.getAllCampaign()`试图获取一些远程资源。这可能会抛出一个`RemoteException`，因为互联网连接超时。当异常被捕获时，我只想让线程休眠一段时间，然后再次尝试获取远程资源。

我的代码有问题吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:14:38.343

没有什么真正的问题，但是（可能是无限的）带有递归（以及堆栈增长）的重试循环让我有点紧张。我会写：

```
private void synCampaignWithRetries(int ntries, int msecsRetry) {
    while(ntries-- >=0 ) {
       try {
         synCampaign();
         return; // no exception? success
       } 
      catch (ApiException e ) {
           // log exception?
      }
      catch (RemoteException e ) {
           // log exception?
      }
      try {
           Thread.sleep(msecsRetry);
      } catch (InterruptedException e1) {
           // log exception?
      }
   }
   // no success , even with ntries - log?
}

private void synCampaign() throws ApiException ,RemoteException {
    List<Campaign> campaigns = AdwordsCampaign.getAllCampaign();
    for(Campaign c : campaigns) 
            CampaignDao.save(c);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T03:05:58.643

这看起来不错，除了在 catch 块中重复代码（**确保你想要的重试次数**）。您可能希望创建一个私有方法来处理您的异常，如下所示：

```
 private void synCampaign() {
        List<Campaign> campaigns;
        try {
            campaigns = AdwordsCampaign.getAllCampaign();
            for(Campaign c : campaigns) 
                CampaignDao.save(c);
        } catch (ApiException e) {
            e.printStackTrace();
            waitAndSync();
        } catch (RemoteException e) {
            e.printStackTrace();
            waitAndSync();
        }

    }

    private void waitAndSync(){
        try {
            Thread.sleep(5000);
        } catch (InterruptedException e1) {
            e1.printStackTrace();
        }
        synCampaign();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-08T12:42:26.090

您确实无法将其作为 SocketTimeoutException 捕获。可能的方法是捕获 RemoteException，检索它的原因并检查它是否是 SocketTimeoutException 的实例。

```
 try{
             // Your code that throws SocketTimeoutException

        }catch (RemoteException e) {
          if(e.getCause().getClass().equals(SocketTimeoutException.class)){
             System.out.println("It is SocketTimeoutException");
             // Do handling for socket exception
            }else{
              throw e;
            }
        }catch (Exception e) {
           // Handling other exception. If necessary
        } 
```

# php - 旋转并保存图像

> ID：13465931
> 
> 赞同：1
> 
> 时间：2012-11-20T02:56:22.143
> 
> 标签：php, gd

我已经在旋转图像：

```
$filename = 'http://gabomacias.zapto.org/flecha';
$grados = $_POST["grados"];

header('Content-type: image/png');

$source = imagecreatefrompng($filename);

$rotate = imagerotate($source, $grados, 0);

imagejpeg($rotate); 
```

并在页面中显示，

但是我怎样才能保存它，所以如果有人再次旋转它，它会从最后一个旋转点开始，而不是形成原来的旋转点，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:29:07.833

从[imagejpeg 文档](http://php.net/manual/en/function.imagejpeg.php)：

> imagejpeg - 将图像输出到浏览器或文件

所以，

```
imagejpeg($rotate, 'myimage.jpg'); 
```

应该做的伎俩。在文件的顶部，您可以`myimage.jpg`使用 来检查文件是否存在[`file_exists()`](http://php.net/manual/en/function.file-exists.php)，如果存在，则加载该文件以再次旋转它。

# java - 从 URL 绘制图像

> ID：13465936
> 
> 赞同：0
> 
> 时间：2012-11-20T02:57:18.440
> 
> 标签：java, image, url

它适用于 pacman 游戏，当我从计算机导入它时，它可以完美运行。但是当我尝试从 URL 中获取它时，我的游戏开始滞后并且图像不显示。

```
URL url = new URL("https://www.dropbox.com/s/xpc49t8xpqt8dir/pacman%20down.jpg");
image = ImageIO.read(url);  

G.drawImage(image, x, y, 20,20,null); 
```

## 图片

![吃豆人](../Images/7e11a8252a13084d0c9f077d23fca57c.png)

( [http://i.stack.imgur.com/Cp1XL.png](https://i.stack.imgur.com/Cp1XL.png)在 IMGUR )

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-20T03:08:12.847

`https://www.dropbox.com/s/xpc49t8xpqt8dir/pacman%20down.jpg`是返回 HTML 文本而不是图像数据。

这是一个 hack，但请尝试`https://www.dropbox.com/s/xpc49t8xpqt8dir/pacman%20down.jpg?dl=1`。但请注意，drop box 将来可能会更改此查询。

![在此处输入图像描述](../Images/384acf98be7b2bec90c410a5f636209b.png)

```
public class TestURL02 {

    public static void main(String[] args) {
        new TestURL02();
    }

    public TestURL02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new PacPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PacPane extends JPanel {

        private BufferedImage image;

        public PacPane() {
            InputStream is = null;
            try {
                URL url = new URL("https://www.dropbox.com/s/xpc49t8xpqt8dir/pacman%20down.jpg?dl=1");
//                StringBuilder sb = new StringBuilder(1024);
//                byte[] buffer = new byte[1024 * 1024];
//                is = url.openStream();
//                int in = -1;
//                while ((in = is.read(buffer)) != -1) {
//                    sb.append(new String(buffer));
//                }
//                System.out.println(sb.toString());
                image = ImageIO.read(url);
            } catch (IOException exp) {
                exp.printStackTrace();
            } finally {
                try {
                    is.close();
                } catch (Exception e) {
                }
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return image == null ? super.getPreferredSize() : new Dimension(image.getWidth(), image.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (image != null) {
                int x = (getWidth() - image.getWidth()) / 2;
                int y = (getHeight() - image.getHeight()) / 2;
                g.drawImage(image, x, y, this);
            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T03:05:29.033

我认为它可能会滞后，因为每次使用`Graphics`对象绘制图像时程序都会下载图像。您应该为您的图像使用缓存系统，或者为所有程序执行下载一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T03:01:21.460

我的猜测，这只是一个猜测，因为您没有告诉我们，但是您是否可能尝试从 Swing 或 AWT`paint(...)`或`paintComponent(...)`方法中的 URL 读取图像？如果是这样，请不要这样做。读取一次图像，然后在方法中*使用*它。`paintComponent(...)`

如果这没有帮助，请告诉我们我们需要知道的详细信息才能为您提供帮助。

# ajax - How to populate array with data returned from ajax call?

> ID：13465937
> 
> 赞同：1
> 
> 时间：2012-11-20T02:57:18.707
> 
> 标签：ajax, jquery

I'm making a call to an app to fetch data (routes), then looping through that data to fetch additional data about each individual route. The final data will show up in console.log without a problem, but I can't get it into an array.

```
$.getJSON('http://example-app/api/routes/?callback=?', function(data) {
            var routes = [];

            $(data).each(function(i){
                routes.push(data[i]._id);
            });

            function getRouteData(route, callback) {
                $.ajax({
                    url: 'http://example-app/api/routes/'+route+'?callback=?',
                    dataType: 'json',
                    success: function(data) {
                        callback(data);
                    }
                });
            }

            var route_data = [];

            $(routes).each(function(i) {
                getRouteData(routes[i], function(data) {
                    console.log(data); // this shows me the 13 objects
                    route_data.push(data);
                });
            });

            console.log(route_data); // this is empty

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:56:01.230

nnnnnn's right, you have to use Deferreds/promises to ensure that `route_data` is populated before sending it to the console.

It's not immediately obvious how to do this, with particular regard to the fact that `$.when()` accepts a series of discrete arguments, not an array.

Another issue is that any individual ajax failure should not scupper the whole enterprise. It is maybe less than obvious how to overcome this.

I'm not 100% certain but something along the following lines should work :

```
$.getJSON('http://example-app/api/routes/?callback=?', function(data) {
    var route_promises = [];
    var route_data = [];
    function getRouteData(route) {
        var dfrd = $.Deferred();
        $.ajax({
            url: 'http://example-app/api/routes/'+route+'?callback=?',
            dataType: 'json'
        }).done(function(data) {
            //console.log(data); // this shows me the 13 objects
            route_data.push(data);
        }).fail(function() {
            route_data.push("ajax error");
        }).then(function() {
            dfrd.resolve();
        });
        return dfrd.promise();//By returning a promise derived from a Deferred that is fully under our control (as opposed to the $.ajax method's jqXHR object), we can guarantee resolution even if the ajax fails. Thus any number of ajax failures will not cause the whole route_promises collection to fail.
    }
    $(data).each(function(i, route) {
        route_promises.push( getRouteData(route) );
    });
    //$.when doesn't accept an array, but we should be able to use $.when.apply($, ...), where  the first parameter, `$`, is arbitrary.
    $.when.apply($, route_promises).done(function() {
        console.log(route_data);
    });
}); 
```

*untested*

See comments in code.

# javascript - 如何从 Android Java 代码调用 jQuery 文件中的函数？

> ID：13465938
> 
> 赞同：0
> 
> 时间：2012-11-20T02:57:31.257
> 
> 标签：javascript, android, jquery, webview

jQuery 文件的内容如下所示，部分内容被忽略。

```
(function ($){
...
...
...
function hideDiv()
{
    // "vodmain" is the id of a div
    $("#vodmain").hide();
}
})(jQuery); 
```

一些html代码：

```
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/myjquery.js"></script>

<!--
// if the function is defined like this, it can be invoked 
<script type="text/javascript">
function hideDiv()
{
    $("#vodmain").hide();
}
</script>
-->

<div id="vodmain" class="vodmain">
<img src="scene.jpg"/>
    ...
</div> 
```

调用函数“hideDiv”的 Java 代码（在 Activity 中）如下所示：

```
public boolean onKeyUp(int keyCode, KeyEvent event) {

    if(keyCode == 4 && webView.canGoBack())
    {
        webView.goBack();
        return true;
    }
    if(keyCode == 18 || keyCode == 19 || keyCode == 20 || keyCode == 21 || keyCode == 22)
    {
        webView.loadUrl("javascript:hideDiv()");
        //webView.dispatchKeyEvent(event);
        return false;
    }
    return super.onKeyUp(keyCode, event);
} 
```

我的问题是：如果JS函数写在html文件中，我可以从Activity调用它，但是如果它写在jQuery文件中，我不能调用它。而且我不知道为什么，那是因为它只是在jQuery中调用了一个函数还是其他原因？

# php - 计算数据库中的列，然后拉入表格单元格

> ID：13465939
> 
> 赞同：0
> 
> 时间：2012-11-20T02:57:50.610
> 
> 标签：php, mysql, mysqli

编辑：我已经成功地能够计算出我试图获得的值，但不是为每一行计算该值，它只是计算一次并将该值发布到任何地方。如何使用我拥有的代码重新计算每一行？

图片：http: [//img515.imageshack.us/img515/9064/example2w.png](http://img515.imageshack.us/img515/9064/example2w.png)

新代码：

```
<html>
<head>
<title>PHP-MySQL Project 4</title>

    <div align="center">
        <p>
            PHP-MySQL Project 4
        <br/>
            By: Ryan Strouse
        </p>
    </div>
</head>
<body bgcolor="#99FFFF">

<?php

$DBName = "surveys";
$DBConnect = @mysqli_connect("localhost", "students", "password")
    Or die("<p>Unable to connect to the database server.</p>"
    . "<p>Error code " . mysqli_connect_errno()
    . ": " . mysqli_connect_error()) . "</p>";

if (!$DBConnect)
    {
    echo "<p> The database server is not available.</p>";
    }
else
    {
    echo "<p> Successfully connected to the database $DBName</p>";
    }

mysqli_select_db($DBConnect, $DBName); 
echo "<p>Database -'$DBName'- found</p>";

$SQLstring = "SELECT * FROM surveys WHERE surveyCode = 'GEI001'";
$QueryResult = @mysqli_query($DBConnect, $SQLstring);
echo $SQLstring;
$row = mysqli_fetch_assoc($QueryResult);

$count_surveys = $row['surveyResponses'];

echo "<p>Total Responses: $count_surveys</p>";

$SQLstring2 = "SELECT * FROM results WHERE surveyCode = 'GEI001'";
$QueryResult2 = @mysqli_query($DBConnect, $SQLstring2);
echo $SQLstring2;
echo "<br/>";
$Row = mysqli_fetch_assoc($QueryResult2);

$SQLstring3 = "SELECT * FROM surveys, results";
$QueryResult3 = @mysqli_query($DBConnect, $SQLstring3);
$fetchrow = mysqli_fetch_assoc($QueryResult3);
$result_amount = (($fetchrow['resultResponses'] / $fetchrow['surveyResponses']) * 100);

echo "<table>";
echo "<tr><th>Commercial</th> <th>Views</th> <th>Percentage</th></tr>";
do {
    echo "<tr><td>{$Row['resultDescription']}</td>";
    echo "<td>{$Row['resultResponses']}</td>";
    echo "<td>$result_amount</td></tr>";
    $Row = mysqli_fetch_assoc($QueryResult3);
} while ($Row);
echo "</table>";

?>

<center>
<h3><a href="Survey1.html">Return To Main Page</a></h3>
<h3><a href="../Menu.html">Return to Menu</a></h3>
</center>
</body>

<footer>
<div align="center">
&copy; Copyright Ryan Strouse &copy;

</div>
</footer>
</html> 
```

我有两个数据库表，并且我成功地将列数据拉入表中。表格的第三个单元格我想计算数据库中某些列的百分比。我不知道如何编写代码...我试图从另一个我发现没有运气的线程中的 SELECT 语句中想出一些东西。

这是我要开始工作的查询的图片：http: [//img696.imageshack.us/img696/3862/examplegw.png](http://img696.imageshack.us/img696/3862/examplegw.png)

```
<html>
<head>
<title>PHP-MySQL Project 4</title>

</head>
<body bgcolor="#99FFFF">

<?php

$DBName = "surveys";
$DBConnect = @mysqli_connect("localhost", "students", "password")
    Or die("<p>Unable to connect to the database server.</p>"
    . "<p>Error code " . mysqli_connect_errno()
    . ": " . mysqli_connect_error()) . "</p>";

if (!$DBConnect)
    {
    echo "<p> The database server is not available.</p>";
    }
else
    {
    echo "<p> Successfully connected to the database $DBName</p>";
    }

mysqli_select_db($DBConnect, $DBName); 
echo "<p>Database -'$DBName'- found</p>";

$SQLstring = "SELECT * FROM surveys WHERE surveyCode = 'GEI001'";
$QueryResult = @mysqli_query($DBConnect, $SQLstring);
echo $SQLstring;
$row = mysqli_fetch_assoc($QueryResult);

$count_surveys = $row['surveyResponses'];

echo "<p>Total Responses: $count_surveys</p>";

$SQLstring2 = "SELECT * FROM results WHERE surveyCode = 'GEI001'";
$QueryResult2 = @mysqli_query($DBConnect, $SQLstring2);
echo $SQLstring2;
echo "<br/>";
$Row = mysqli_fetch_assoc($QueryResult2);

//this is where I am trying to calculate the value and then below it display in table 
//cell # 3
$SQLstring3 = "SELECT *,((resultResponses/surveyResponses)*100) AS AMOUNT FROM surveys, results";
$QueryResult3 = @mysqli_query($DBConnect, $SQLstring3);

do {
    echo "<table>";
    echo "<tr><th>Commercial</th> <th>Views</th> <th>Percentage</th></tr>";
    echo "<tr><td>{$Row['resultDescription']}</td>";
    echo "<td>{$Row['resultResponses']}</td>";
    echo "<td>$QueryResult3</td></tr>";
    $Row = mysqli_fetch_assoc($QueryResult);
} while ($Row);
echo "</table>";

?>

<center>
<h3><a href="Survey1.html">Return To Main Page</a></h3>
<h3><a href="../Menu.html">Return to Menu</a></h3>
</center>
</body>

<footer>

</footer>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T03:11:39.197

**如果**我理解您的要求，您可能正在尝试计算可以在 MySQL 查询结果中找到的值的百分比。如果是这样，那么我将使用该函数`mysql_num_rows`来获取记录的总数，然后在 a 中`while`，`if`我将有一个计数器来记录我达到该值的次数。

然后你只需做简单的数学运算，例如：

```
result = (100 * counter) / mysql_num_rows 
```

并有一个百分比。然后，您就`echo`可以随心所欲地获得结果！:)

我希望我正确理解了你的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T03:13:38.993

```
$result = mysql_query("SELECT yourRow FROM yourTable");
$aArray = array();
$cont=0;
while($col = mysql_fetch_assoc($result){
   $aArray[$cont] = $col['yourRow'];
   cont++;
} 
```

这应该给你一个可行的数组，让你用它来做你的数学，然后回显它。干杯

# android - Android：使用按钮处理 ViewPager 中的片段

> ID：13465946
> 
> 赞同：0
> 
> 时间：2012-11-20T02:59:14.890
> 
> 标签：android, fragment, android-fragmentactivity

我的活动中有 3 个片段，由扩展 FragmentPagerAdapter 的自定义类管理。

我的主要 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
      >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
          />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
          />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
          />

  <android.support.v4.view.ViewPager
                android:id="@+id/tabviewpager"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1" />

</LinearLayout> 
```

我的活动：

```
public class RankingFragmentActivity extends FragmentActivity{
....

  List fragments = new Vector();

fragments.add(Fragment.instantiate(this,Tab1Fragment.class.getName()));
fragments.add(Fragment.instantiate(this,Tab2Fragment.class.getName()));
fragments.add(Fragment.instantiate(this,Tab3Fragment.class.getName()));

//adapter
MyPagerAdapter mPagerAdapter =  new MyPagerAdapter(super.getSupportFragmentManager(), fragments);

ViewPager pager = (ViewPager) super.findViewById(R.id.tabviewpager);

pager.setAdapter(this.mPagerAdapter);

} 
```

我可以完美地从片段从 letf 切换到右（以及从右到左）。

我想将按钮设置为侦听器（以更改显示的片段），但我不知道该怎么做。

例如：单击 button1 ：显示片段 1

点击 button2 ：显示片段 2

点击 button3 ：显示片段 3

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T04:09:23.897

答案在[FragmentPagerAdapter 的文档中是正确的](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)

```
 // Watch for button clicks.
    Button button = (Button)findViewById(R.id.goto_first);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            mPager.setCurrentItem(0);
        }
    }); 
```

# java - 识别调用 Web 服务的用户

> ID：13465967
> 
> 赞同：0
> 
> 时间：2012-11-20T03:01:51.233
> 
> 标签：java, web-services, security

我有一个 Web 服务，需要根据调用者的 id 设置结果。

将服务器上的接口定义为：

```
public String[] getUserLogFile(int userId){
    return logDAO.getLogs(userId);
} 
```

登录时，Web 服务返回一个 userId。客户端可以在将来的调用中包含此 userId。但是，如果客户端设置了自己的 userId，调用者可以尝试其他 userId。这带来了安全问题。

识别 Web 服务调用者的最佳方法是什么？服务器是Java。客户端可以是 iPad、.Net、Android 等。

谢谢。J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T06:27:00.360

一个简单但有效的安全策略是使用 SSL 保护您的 Web 服务，然后在每次调用时传递一个[基本的身份验证标头。](http://en.wikipedia.org/wiki/Basic_access_authentication)此设置的 SSL 部分***至关重要***。您的客户将在每次调用中包含以下形式的授权标头：

> 授权：基本 QWxhZGluOnNlc2FtIG9wZW4=

编码字符串是用户名和密码的串联，base 64 编码

```
Base64(username:password) 
```

这照顾了客户端的责任。在服务器端，您要检查授权标头的所有传入呼叫。如果存在，对其进行解码，拆分用户名和密码，并使用这两条信息来验证请求。通常在身份验证时为用户创建一个安全主体，其中包含有关用户及其角色（或应用程序授权）的基本信息。为了提高效率，这项工作通常在网络过滤器中完成。我会推荐以下库，它们可以为您自动执行许多服务器端任务：

*   [Seam 安全性](http://www.seamframework.org/Seam3/SecurityModule)（内置于 JBoss AS 7）
*   [阿帕奇希罗](http://shiro.apache.org/)
*   [春季安全](http://static.springsource.org/spring-security/site/)

# php - Zend 框架、FusionCharts、PHP、Javascript

> ID：13465973
> 
> 赞同：0
> 
> 时间：2012-11-20T03:02:44.910
> 
> 标签：php, zend-framework, fusioncharts

这里有点奇怪：我在 1.12 中有一个 Zend Framework 设置。我的模型工作正常，并且我的所有包含都已设置...但在 Zend 视图中似乎找不到那里的 FusionCharts.js 文件。我将它附加在操作中，如下所示，当我检查 Firebug 上的路径时，它是绝对正确的——但仍然返回错误并声称它找不到 .js 文件。无论如何-这是代码：

```
public function indexAction()
    {
        try{
            $model = new Application_Model_DbTable_Daily;
            $dau = $model->getStats();
            $this->view->dau = $dau;
        }
        catch(Exception $e) {
            $this->view->dau = $e;
        }
        $this->view->headScript()->appendFile('/dashboard/public/fusioncharts/Charts/FusionCharts.js');
    } 
```

所以 - 在我看来，我得到：

```
<?php
echo $this->headScript();

echo "<pre>";
     $FC = new FusionCharts("Line", "500", "300");
     $FC->setSwfPath("/public/fusioncharts/Charts/");
     $strParamDAU = "caption=Daily Active Users;streamlinedData=0;decimals=0;decimalPrecision=0;formatNumberScale=0;slantLabels=1;labelDisplay=ROTATE";
     $FC->setChartParams($strParamDAU);
     foreach($this->dau as $k=>$v) {
         $FC->addChartData($v['session_date'], "label=" . $v['DAU']);
     }
    $FC->renderChart(); 
```

回声“”；

但是当我在 firebug 中查看视图时，我收到一条错误消息，指出它在公共目录中找不到 FusionCharts.js（路径绝对正确！）。任何想法为什么会发生这种情况？在那里。Firebug 读取了正确的目录（GET localhost/dashboard/public/fusioncharts/Charts/FusionCharts.js），但firebug 错误说它看不到文件。谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T07:06:37.097

如果文件确实存在，并且名称是 FusionCharts.js：

尝试添加 BaseUrl（只是为了安全起见）：

```
$this->view
     ->headScript()
     ->appendFile($this->view->baseUrl() . '/dashboard/public/fusioncharts/Charts/FusionCharts.js'); 
```

接下来检查您的 .htaccess，也许您没有转发 JS 文件？正确的.htaccess：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

# java - java isDirectory 显示错误结果

> ID：13465974
> 
> 赞同：0
> 
> 时间：2012-11-20T03:03:04.113
> 
> 标签：java, windows, directory

我有以下代码检查文件是否是目录，如果不是，则创建它。

```
 File folder = new File(destFolder);
        if (!folder.isDirectory()) {
            if (!folder.mkdir()) {
                System.out.println("Could not create " + folder.getAbsolutePath());
                return null;
            }
        } 
```

代码总是输出“无法创建”。我检查并确认具有该名称的文件夹已经存在。可能是什么原因？

如果我删除 destFolder，它仍然显示相同的错误。检查权限，我对该文件夹具有读取、写入和执行权限。（奇怪的是，它一直工作到上周五！）

我的机器运行 Windows 7，我正在运行来自 Netbeans 的代码。Java 平台是 - JDK 1.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:10:56.033

如果文件不是目录，即是文件，则只能调用 mkdir()。您正在尝试对文件运行 mkdir()。您应该检查它是否存在，而不是它是否是目录。

# .net - 如何设置触发器内的 TabItem ContentPresenter 的样式？

> ID：13465985
> 
> 赞同：0
> 
> 时间：2012-11-20T03:04:46.910
> 
> 标签：.net, wpf, xaml, contentpresenter

我正在重新设置 TabItem 的样式，并希望 TabItem Header 的背景、前景和文本颜色根据是否选择而有所不同。我可以在 ControlTemplate.Triggers 之外成功更改 ContentPresenter 的 TextBlock，但我不确定如何从 Trigger 中“获取”它。

这是我的 XAML：

```
<Style x:Key="SiteTabItemStyle" d:IsControlPart="True" TargetType="{x:Type TabItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TabItem}">
                <Grid>
                    <Border Margin="0,0,-4,0" x:Name="Border" BorderThickness="2" CornerRadius="15,15,0,0" BorderBrush="Black" Background="DimGray">
                        <ContentPresenter TextBlock.Foreground="LightGray" HorizontalAlignment="Center" Margin="12,2,12,2" x:Name="ContentSite" VerticalAlignment="Center" RecognizesAccessKey="True" ContentSource="Header"/>
                    </Border>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Panel.ZIndex" Value="100"/>
                        <Setter Property="Background" Value="Gold" TargetName="Border"/>
                        <Setter Property="BorderThickness" Value="2" TargetName="Border"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter Property="Background" Value="{DynamicResource DisabledBackgroundBrush}" TargetName="Border"/>
                        <Setter Property="BorderBrush" Value="{DynamicResource DisabledBorderBrush}" TargetName="Border"/>
                        <Setter Property="Foreground" Value="{DynamicResource DisabledForegroundBrush}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:44:44.093

在您的第二个触发器集属性**IsSelected**而不是**IsEnabled**中，它将正常工作。我希望这将有所帮助。

# jqplot - Chrome 中的 JqPlot canvasOverlay 问题

> ID：13465986
> 
> 赞同：1
> 
> 时间：2012-11-20T03:05:05.590
> 
> 标签：jqplot

我发现 canvasOverlay[示例](http://www.jqplot.com/deploy/dist/examples/canvas-overlay.html)在 Chrome 中没有显示，但在 Firefox 和 IE 中很好。有什么问题？如何在 Chrome 中显示。

![在 Firefox 和 IE 中](../Images/52081b771d173d2585464cb67692c8ee.png) ![在铬](../Images/2eb26752d35d2983e851f547d44be8bb.png)

# javascript - ApiController 返回的 Json 结果无法解析，为什么 dataType:"json" 不起作用？

> ID：13465987
> 
> 赞同：1
> 
> 时间：2012-11-20T03:05:15.203
> 
> 标签：javascript, asp.net-mvc, json

这是我的代码。我遇到的问题是代码`jsonVersionList[0]`得到了一个字符串“[”，实际上我想解析`jsonVersionList`为 Json 对象，我认为原因是 JavaScript 将`jsonVersionList`其视为字符串而不是 Json 对象。请帮助我。谢谢。

```
 function ajaxGetSystemTraceLog(jsonRequest) {
            var sUrl = "/api/SysTraceLog";
            $.ajax({
                cache: false,
                type: "POST",
                async: false,
                url: sUrl,
                data: jsonRequest,
                contentType: "application/json",
                dataType: "json",
                success: function (result) {
                    var sHtml = buildLogDiv(JSON.stringify(eval(result)));
                    $("#effect").html(sHtml);
                    showCenter("#effect", false, 0, 0);
                },
                error: function (xhr) {
                    alert(xhr.responseText);
                }
            });
        }

        function buildLogDiv(jsonVersionList) {
            var sHtml = "<table style=\"width:100%;\"><tr><td style=\"width:100%;background-color:#005CE6;\"  align=\"right\"><img onclick=\"hide('#effect', false);\" alt=\"close it\" title=\"close it\" src=\"/content/themes/default/images/cancel.png\" width=\"20\" height=\"20\" /></td></tr>";
            sHtml += "<tr><td  style='text-align:left'>";
            sHtml += jsonVersionList[0];
            sHtml += "</td></tr></table>";
            return sHtml;
        }

public class SysTraceLogController : ApiController
    {
        public string Post(QueryTraceLogRequestModel queryTraceLogReq)
        {
            return "[\"1\",\"2\",\"3\",\"4\"]";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:10:22.217

由于您指定`json`为 dataType`result`已经是一个 JavaScript 对象，因此您只需将其传递给`buildLogDiv`

```
var sHtml = buildLogDiv(result); 
```

如果由于某种原因 jQuery 没有解析您的数据，请使用 JSON.parse 将其转换为 JavaScript 对象

```
var sHtml = buildLogDiv(JSON.parse(result)); 
```

# php - mysql_select_db 使用 POST 变量

> ID：13465991
> 
> 赞同：2
> 
> 时间：2012-11-20T03:05:49.543
> 
> 标签：php, mysql

我对 PHP 很陌生，还有很长的路要走。可能是逻辑故障，或者我只是不知道 PHP 究竟是如何工作的。无论如何，我提交的代码来自我的管理控制面板。我正在尝试创建一个页面来连接到数据库，而不是显示所有数据库名称并从单选按钮中选择其中一个。当再次按下提交以显示表格时。显示表格后，下一步将是编辑，添加更新它们等。我还没有。因为我无法让 mysql_select_db 工作。它给出了错误。错误是；

> 注意：未定义的变量：在第 94 行的 /public_html/php/insert_delete_update_amend/mydata03.php 中连接
> 
> 警告：mysql_select_db()：提供的参数不是第 94 行 /public_html/php/insert_delete_update_amend/mydata03.php 中的有效 MySQL-Link 资源无法连接到 db

任何帮助都感激不尽。PS：同样，当第一个表单提交时，第一个表单消失，第二个出现，依此类推。

```
<?php 
// form variables
$DisplayDBinfoForm = true;
$DisplayDBform = false;
if (isset($_POST['db_info_submit'])) { //when user presses db info submit button
//select which form to hide or appear   
$DisplayDBinfoForm = false;
$DisplayDBform = true;

$hostname = $_POST['db_name'];
$db_user_name = $_POST['db_user_name']; 
$db_user_password = $_POST['db_user_password']; 

$connect = mysql_connect($hostname,$db_user_name,$db_user_password);
if(!$connect) die("Could not connect");
    echo "<p><b>connected successfully</b></p>\n";
    }

if($DisplayDBinfoForm) {        
 ?>
<form name="dbinfo" method="POST" action="mydata03.php" onsubmit="return         validateForm();">

Host Name:          <input type="text" name="db_name" /><br />
<br />
DB User Name        <input type="text" name="db_user_name" /><br />
<br />
DB User Password:   <input type="text" name="db_user_password" /><br />
<br />
<input type="submit" name="db_info_submit"value="Login"><br />
</form>
<?php
}
if($DisplayDBform) {
?>
<form name="delete_table" id="delete_table" action="mydata03.php" method="post">
    <table width="30%" border="1">
    <tbody>

<?php
$query = "SHOW DATABASES";
$resultSet = mysql_query($query);
while($database = mysql_fetch_array($resultSet)) { // go through each row that was     returned in $result
$dbname = $database[0];

echo "<tr><th>Database Name</th>
            <th>Select</th>
        </tr>
        <tr>
            <td>$dbname</td>
            <td><input name=\"radDB\" id=\"radDB\" type=\"radio\" value=\"$dbname\"</td>
        </tr>\n";
}

?>

        </tbody>
        </table>
<p>
<input name="btnSelectDB" type="submit" value="Select" />
</form>
</p>
<?php
}
if(isset($_POST['btnSelectDB'])) {

$DisplayDBinfoForm = false; // hide form
$DisplayDBform = false; // hide form

$db_name = $_REQUEST["radDB"]; // the db na,e

echo "The " . $db_name . " is selected\n";  
$select_db = mysql_select_db($db_name,$connect);
if(!$select_db) die("Could not connect to db". mysql_error());
    echo "<b>connected successfully to db</b>";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T03:16:14.720

首先，不要使用 mysql_* 函数。那个时候已经过去了。相反，使用[mysqli_*](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

话虽如此，与数据库服务器的初始连接似乎完成得很好，因为您的代码不会在以下位置对您产生影响：

```
$connect = mysql_connect($hostname,$db_user_name,$db_user_password);
if(!$connect) die("Could not connect"); 
```

尽管在后期阶段，当尝试连接到实际数据库时：`$select_db = mysql_select_db($db_name,$connect);`确实如此。

这让我相信您设置数据库名称的变量`$db_name = $_REQUEST["radDB"];`没有正确提取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T03:14:47.643

尝试

```
$connect = mysql_connect($hostname,$db_user_name,$db_user_password) or die("Could not connect");

if( $connect) 
    echo "<p><b>connected successfully</b></p>\n";
    } 
```

还要检查

```
if(  isset($_POST['db_name'] ) &&  isset($_POST['db_user_name']) && isset($_POST['db_user_password']){
     $hostname = $_POST['db_name'];
     $db_user_name = $_POST['db_user_name']; 
     $db_user_password = $_POST['db_user_password']; 

} 
```

> **不鼓励使用这个扩展（MYSQL_*）。相反，应该使用 MySQLi 或 PDO_MySQL 扩展**

好读

[**MySQL 开发人员的 PDO 教程**](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T03:17:26.373

您遇到的问题是只有在您使用“db_info_submit”发布帖子时才打开数据库（$connect=），但如果您发布了“btnSelectDB”，您仍然可以运行第 94 行。

最简单的解决方案是在顶部的 if ($_POST) 语句之外打开数据库，以防下面需要它。或包装打开它所需的任一条件（代码如下所示）

```
<?php 
// form variables
$DisplayDBinfoForm = true;
$DisplayDBform = false;
if (isset($_POST['db_info_submit']) || isset($_POST['btnSelectDB'])) {
    $connect = mysql_connect($hostname,$db_user_name,$db_user_password);
    if(!$connect) die("Could not connect");
  echo "<p><b>connected successfully</b></p>\n";
    }
}

if (isset($_POST['db_info_submit'])) { //when user presses db info submit button
    //select which form to hide or appear   
    $DisplayDBinfoForm = false;
    $DisplayDBform = true;

    $hostname = $_POST['db_name'];
    $db_user_name = $_POST['db_user_name']; 
    $db_user_password = $_POST['db_user_password']; 
}

if($DisplayDBinfoForm) {
?>

....

<?php
}
if(isset($_POST['btnSelectDB'])) {

    $DisplayDBinfoForm = false; // hide form
    $DisplayDBform = false; // hide form

    $db_name = $_REQUEST["radDB"]; // the db na,e

    echo "The " . $db_name . " is selected\n";  
    $select_db = mysql_select_db($db_name,$connect);
    if(!$select_db) die("Could not connect to db". mysql_error());
        echo "<b>connected successfully to db</b>";

}
?> 
```

* * *

这不是一个直接的答案，但它是最能帮助你的答案。

如果您的脚本中有一个以“myslq_”开头的函数（1 - mysql_real_esacape_string 除外），那么您正在遵循一个旧示例并且正在使用将要折旧的代码。当您刚刚学习 PHP 和 MySQL 时，请养成使用更现代函数的习惯，无论是[mysqli_](http://php.net/manual/en/book.mysqli.php)还是[PDO](http://au1.php.net/manual/en/book.pdo.php)

# java - 如何在 Eclipse 中重构泛型的元素类型，有什么快捷方式吗？

> ID：13465994
> 
> 赞同：2
> 
> 时间：2012-11-20T03:06:05.723
> 
> 标签：java, android, eclipse, refactoring

我在重构泛型的元素类型时遇到了麻烦，请查看下图，

**元素的类型是“String”，现在想重构为“Integer”，eclipse中该怎么做。我不想改变“titleName”的类型！**. 我已经检查过，如果我选择类型名称并右键单击，上下文菜单中没有“重命名”:-(

我用“帮助/替换”重构了类型作为解决方法，但是，我认为这不是一个好方法，它可能会导致拼写错误。

![代码重构示例](../Images/c0e2ab60f1f0c3b500f50598d3a2c3cb.png)

好吧，我知道我的问题有点奇怪，但我想很多人可能会遇到。例如，如何改变`"Map<String,Integer> map = HashMap<String, Integer>()" to "Map<Integer,User> map = HashMap<Integer, User>()"`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:11:58.810

```
CTRL + F 
FIND: <String>
REPLACE WITH: <Integer>
Replace All 
```