# StackOverflow 问答 15587000-15587999

# php - InnoDB 未提交但已写入（使用带有动态函数名称的 PHP）

> ID：15587001
> 
> 赞同：1
> 
> 时间：2013-03-23T12:52:34.460
> 
> 标签：php, mysql, innodb

我制作了一个 PHP 类，它将一些数据写入许多表中。我调用一些 PHP 函数将一些“标签”（更具体的 4 个标签）写入表中。函数名称因要写入的标签名称和表名称而异，因此我将这些函数保存到已注册的数组变量中，并使用这些变量名称调用这些函数。

由于我使用过`AUTOCOMMIT=0`，我认为如果我没有放入 COMMIT 语句，这些函数将永远不会写入表，但事实是它写入了 1 个没有 COMMIT 语句的第一个标签（它根本不应该写入表）。

我检查了这些表，它们绝对在使用 InnoDB，并且我使用 mysql 控制台进行的一些提交/回滚测试仍然是正常行为（按应有的方式正常提交/回滚）。

我在这里有什么遗漏或有什么问题吗，或者你能给我任何链接/资源以进一步解决这个问题吗？

非常感谢。

在这里，我将我的 php 代码与动态函数调用：

```
mysql_query("SET AUTOCOMMIT=0", $conn) or die(toAlert(mysql_error() . " on " . __FUNCTION__ . " line " . __LINE__ . " file " . __FILE__));
        mysql_query("START TRANSACTION", $conn) or die(toAlert(mysql_error() . " on " . __FUNCTION__ . " line " . __LINE__ . " file " . __FILE__));
        if (count($this->parentEntries) > 0) {

        foreach ($this->accounts as $label => $labelSrc) {

            echo "$label: $labelSrc\n";

            $_label = $label;
            $_companyID = $this->companyID;
            $_outletID = $this->outlet2ID;

            $_tgl = $this->tgl;
            $_bln = $this->bln;
            $_thn = $this->thn;

            $_jml = $this->parentEntries[$labelSrc]['qty'];
            $_nilai = $this->parentEntries[$labelSrc]['value'];
            $_jmlnota = 1;

            switch ($this->peopleLabel) {
                case "Supplier":
                    $_supplierID = $this->peopleID;
                    break;
                case "Customer":
                    $_customerID = $this->peopleID;
                    break;
                default:
                    break;
            }

            include "RegisterPBUFunctions.php";
            foreach ($this->parentRels as $relName) {
                $doYourJob = $arrPBUFunctions[$relName](
                    $arrPBUParams[$relName][0],
                    $arrPBUParams[$relName][1],
                    $arrPBUParams[$relName][2],
                    $arrPBUParams[$relName][3],
                    $arrPBUParams[$relName][4],
                    $arrPBUParams[$relName][5],
                    $arrPBUParams[$relName][6],
                    $arrPBUParams[$relName][7],
                    $arrPBUParams[$relName][8],
                    $arrPBUParams[$relName][9],
                    $arrPBUParams[$relName][10],
                    $arrPBUParams[$relName][11],
                    $arrPBUParams[$relName][12],
                    $arrPBUParams[$relName][13]
                ) or die("error on " . __FILE__ . " line " . __LINE__);
            }
        }
    }
    //$doApply = (mysql_query("COMMIT", $conn)) or die("Failed to apply transaction"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:52:38.580

您的 PHP 函数/包含的文件是否建立了新的数据库连接？这可能会导致挂起的事务提交

此外，如果您的任何 PHP 函数开始一个新事务，即使 AUTOCOMMIT=0，那么这将强制您的待处理事务提交

# http - HTTP Start-Line 的最大长度

> ID：15587003
> 
> 赞同：1
> 
> 时间：2013-03-23T12:52:48.290
> 
> 标签：http

HTTP 是否限制 Start-Line（Request-Line 或 Status-Line）的长度？

如果是这样，当收到请求行长于最大长度的 HTTP 请求时，哪个状态码 HTTP 服务器应该响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:09:34.477

引用[HTTP 1.1 RFC(2616)](http://www.w3.org/Protocols/rfc2616/rfc2616.html)，

> Request-Line 以方法标记开始，接着是 Request-URI 和协议版本，并以 CRLF 结束。元素由 SP 字符分隔。除了最后的 CRLF 序列外，不允许使用 CR 或 LF。
> 
> ```
>  Request-Line   = Method SP Request-URI SP HTTP-Version CRLF 
> ```

这没有指定长度限制。

Request-URI 本身可以很长，并且 rfc 也说明了这一点：

> HTTP 协议对 URI 的长度没有任何先验限制。服务器必须能够处理它们所服务的任何资源的 URI，并且如果它们提供可以生成此类 URI 的基于 GET 的表单，则应该能够处理无限长度的 URI。如果 URI 比服务器可以处理的长（参见第 10.4.15 节），服务器应该返回 414（Request-URI Too Long）状态。

因此 Request-URI 存在“太长”状态，但这意味着“此服务器无法处理太长”而不是“超过规范允许的时间”。

# android - 无法从 Youtube 播放 rtsp 流

> ID：15587008
> 
> 赞同：0
> 
> 时间：2013-03-23T12:53:48.560
> 
> 标签：android, youtube-api

几天以来，我一直在尝试在我的 Android 应用程序中播放 Youtube rtsp 流，但只能从 Android MediaPlayer 实例中获取错误 - 无法打开文件。

我试过打开3gp文件，它可以播放。试图打开互联网上发现的其他 rtsp 流 - 都可以播放，但 Youtube 不能。

测试了 Windows VLC 播放器中的视频网址 - 播放器无法播放使用 rtsp 协议流式传输的 YOutube 视频。

YT rtsp 流是否有问题，所以没有播放器可以播放该 URL？

感谢您的小提示，我可以尝试做什么；）

# c - 编辑库存档中的字符串 (filename.a)

> ID：15587010
> 
> 赞同：-2
> 
> 时间：2013-03-23T12:53:57.893
> 
> 标签：c, linux, hex, static-libraries

我已经编译了 C 库，并且我有文件库示例 filelib.a ，并且我想在 filelib.a 中编辑字符串，因为我的源代码 C 已从我的 PC 中删除，我想在文件 filelib 中编辑字符串。 a 有字符串“看到的文章”。如果我 grep：

```
$ grep -R "/etc/resolv.conf" *
Binary file filelib.a matches
Binary file filelib.so matches 
```

所以文件filelib.a和filelib.so中有字符串“/etc/resolv.conf”。如何编辑和替换二进制文件filelib.a和filelib.so中的字符串，例如我想将字符串“/etc/resolv.conf”替换为“/system/etc/resolv.conf”

我用十六进制编辑器 BLESS 进行了编辑，但是如果我使用这个库，我会得到错误：

```
could not read symbols: Malformed archive
collect2: error: ld returned 1 exit status 
```

我正在使用linux ubuntu。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:08:05.207

如果您**真的没有丝毫机会获得/恢复源代码，**并且新字符串与原始字符串一样长或更短，您可以使用十六进制编辑器打开存档，对字符串进行二进制修补并用零填充如果它比以前短（必须始终至少有一个终止零字节）。

如果您想将字符串更改为更长的内容，这并不容易 - 您最好的机会可能是提取存档，反汇编您要在其中进行更改的目标文件，更改程序集，然后重新组装并用于`ar`更新修改库中的目标文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:03:38.517

只要您要更改的字符串短于或等于二进制文件中的字符串，您就可以使用十六进制编辑器替换该字符串，并将任何扩孔字符替换为`\0`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:06:08.453

我相信[Bless Hex Editor](https://apps.ubuntu.com/cat/applications/bless/)应该为您完成这项工作。

只要确保您**不更改文件的长度**。如果插入终止符，则可以使用比旧字符串*更*短的*字符串*`'\0'`，但这完全取决于程序如何使用它，所以我建议不要这样做。

# ms-access - Access ODBC 查询中的转义下划线列名

> ID：15587012
> 
> 赞同：0
> 
> 时间：2013-03-23T12:54:23.507
> 
> 标签：ms-access, odbc

我在 MS Access 数据库中有一些这样的名字（在 ColdFusion 下）：

```
old_id, old_name 
```

当我尝试选择它们时，出现以下错误：

```
[ODBC Microsoft Access Driver] Too few parameters. Expected 1. 
```

我的查询是：

```
select TOP 10 id, old_id, name, old_name from tablename WHERE id IS NOT NULL 
```

试图将我的查询中的下划线转义为：

```
select TOP 10 [id],[old_id],[name],[old_name] from [tablename] WHERE [id] IS NOT NULL 
```

甚至：

```
(select TOP 10 [id],[old_id],[name],[old_name] from [tablename] WHERE [id] IS NOT NULL) 
```

仍然是同样的错误。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:11:52.997

根据上面的评论，我对这个问题的回答是：

“在编写 SQL 查询时，拼写很重要。” :)

# c - 卡在信号处理函数中 fgets 的 scanf

> ID：15587014
> 
> 赞同：0
> 
> 时间：2013-03-23T12:54:31.277
> 
> 标签：c, function, signals, printf, scanf

我像这样编写信号处理程序？

```
sig_quit(int signo)
{
    //char ans[5];
    char ans;

                printf("Are you sure want to exit program ?Y/N \n");
                //while(check){ check = !scanf("%s", ans); }

                //scanf("%c",&ans);
                ans=getchar();
                    //fgets(ans,sizeof(ans),stdin);;
                    printf("ans is : %c",ans);           
                    if(ans=='y' ||  ans=='Y')
                    {                                   
                        printf("Goodbye\n");
                        exit(0);
                        return;
                    }
                    else if(ans!='y')
                    {   

                        printf("why ans is : %c",ans);

                    }   
} 
```

好的，默认行为是当您按 ctrl+\ 时，问题会问您“您确定要退出”吗？如果用户按'y'它将退出，但如果用户按'y'以外的任何其他东西->它将`scanf`再次卡住，但我需要退出功能并在用户按'n'后返回主程序如何 ？

**Breifly：**它卡住了，`@ getchar()`或者`scanf()`在插入除 'y' 之外的任何字符后再次提示它进行新输入，如果用户插入任何新字符，它会卡住后退出信号处理函数返回到`main()`

**这是新版本的代码：**

所以这是最近的代码：

```
volatile sig_atomic_t eflag = 0;
    int main(int argc, char *argv[])
    {

      /*Here are some code  ,,,,,, */

        Signal(SIGQUIT, sig_quit);  /* must call waitpid() */
         while (eflag) 
         {
            /* Main loop program code */

            log_msg(SIGQUIT);
         }

 ////// there is code below...
          .
          .
          .

    }
void log_msg(int signum)
{   
    char ans;
    //signal(SIGQUIT,SIG_IGN);  
            printf("Are you sure want to exit program ?Y/N \n");                        
        do  {
                ans=getchar();
                if(ans=='y' ||  ans=='Y')
                {                                   
                    printf("Goodbye\n");
                    exit(0);
                    return;
                }
                if(ans == 'n' || ans == 'N') return;

            }while(1);          
}

void
sig_quit(int signo)
{
    eflag = 1;
    /* Do some handling specific to SIGINT */
    log_msg(SIGQUIT);
} 
```

**如果用户按下“n||N”，仍然会出现同样的问题 getchar() 再次阻塞，直到他再次按下任何 char 并返回 main()。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:13:22.230

根据 C 标准，在信号处理程序中调用大多数库函数会导致未定义的行为。

实现可以提供额外的支持，但是如果你用一个也做 IO 的处理程序中断一个已经在做 IO 的函数，它很可能会导致不可预知的行为。

执行此操作的“正常”方法是让您的信号处理程序设置一个全局变量，并进行测试`main`以检查是否设置了该变量，并采取适当的措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:58:23.220

替换`else`为

```
if(ans == 'n' || ans == 'N') break; 
```

**编辑**

我不知道是否还有另一种好方法：

```
int main(){  
char ans;  
printf('wanna exit?');  
do {  
ans = getchar();  
if(ans == 'y') exit(0);  
if(ans == 'n') break;  
}  
while(1);  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:11:49.370

你想让我们阅读这段代码吗？如果是这样，让它看起来像。否则，我们只会想“啊！那是阅读的负担。下一个！”...

信号处理程序返回`void`. 函数返回的类型应*始终*在 C 中显式声明。由于`ans`用于存储 的返回值`getchar()`，因此它应该是`int`.

```
void sig_quit(int sig) {
    int answer;
    do {
        puts("Are you sure you want to exit?");
        answer = getchar();
    } while (answer >= 0 && strchr("NnYy", answer) == NULL);

    if (strchr("Yy", answer)) { exit(0); }
} 
```

“卡住”到底是什么意思？这并不完全清楚，但我认为您指的是 scanf 和 getchar*阻塞*执行的行为；当程序无法立即使用数据时，它们将等待数据可用并同时阻止执行。您是否考虑过在用户在主线程中输入数据时运行后台线程以继续处理？

# html - CSS 倾斜边缘，边缘周围有外边框

> ID：15587027
> 
> 赞同：1
> 
> 时间：2013-03-23T12:55:54.563
> 
> 标签：html, css, css-shapes

仅使用 CSS 是否有可能？我需要创建两个带有外边框的倾斜边缘，但似乎我创建了带有边框的倾斜边缘，我完全迷失了。

![](../Images/f8333c5d57b51a2a119aa0fb9f5c54a5.png)

这就是我走多远。

JSFIDDLE 今天好像不想加载？？？但会尽快把它贴在那里:)。

这是CSS：

```
.wrap {width:29%;}
.slider-header:before {
    content:'';
        border-top:20px solid white;
    border-right: 20px solid #000;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    height:20px;
    position: absolute;
    top: 0;
    left: 0;
    height:100%;
    width: 20px;
}

.slider-header {
    color:#FFFFFF;
    font-family:Arial, Helvetica, sans-serif;
    background:#000000;
    position:relative;
    font-size:1em;
    padding-left:1.5em;
    width:200px;
    float:right;

}
.slider-header2:before {
    content:'';
    border-bottom:20px solid white;
    border-left: 20px solid #000;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    height:20px;
    position: absolute;
    top: 0;
    right: 0;
    height:100%;
    width: 20px;
}

.slider-header2 {
    color:#FFFFFF;
    font-family:Arial, Helvetica, sans-serif;
    background:#000000;
    position:relative;
    font-size:1em;
    padding-left:1.5em;
    width:200px;
    float:left;

} 
```

和 HTML：

```
<div class="wrap">
    <div class="slider-header">
    hey2
    </div>

    <div class="slider-header2">
    hey
    </div>
<div> 
```

嘿，每个人的回答都很棒，尤其是 Aequanox，但我需要这个才能在 IE8+ 上工作，如果它的 IE7+ 可能会以你的名字命名我的第一个出生的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:58:35.907

可以绘制形状： [http ://techcruser.blogspot.com/2011/08/draw-various-shapes-using-css.html](http://techcruser.blogspot.com/2011/08/draw-various-shapes-using-css.html)

我无需在其中写入即可获得形状：

html:

```
<table>
    <tr>
        <td class="triangle-topleft">
            button1
        </td>
        <td class="triangle-bottomright">
            button2
        </td>
    </tr>
</table> 
```

CSS：

```
.triangle-topleft {
     width: 0;
     height: 0;
     border-top: 100px solid red; 
     border-right: 100px solid transparent;            
 */}
.triangle-bottomright {
     width: 0;
     height: 0;
     border-bottom: 100px solid red; 
     border-left: 100px solid transparent;
 } 
```

但老实说，我会使用 jquery 来做我的按钮或菜单。从长远来看，它更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:44:22.517

这是在不添加任何标记的情况下实现的。

```
<div class="wrap">
   <div class="slider-header">
   hey1
   </div>

   <div class="slider-header2">
   hey2
   </div>
<div> 
```

CSS根本没有优化，只是为了达到预期的效果。

```
 .wrap{width:500px; padding:5px; display:block; overflow:hidden}
  .wrap div{background:#333; color:#fff; width:235px; }

  .wrap:after{
      content:""; 
      display:block; 
      border-top:1px solid #333;
      margin-top:-5px;
      margin-left:265px;
      width:235px;
  }

  .wrap:before{
      content:""; 
      display:block; 
      border-bottom:1px solid #333;
      position:absolute;
      top:37px;
      width:235px;
  }

  .slider-header{position:relative; float:left;}
  .slider-header2{position:relative; float:right;}

  .slider-header:before{
      content:"";
      display:block;
      height:1px;
      width:70px;
      background:#333;
      position:absolute;
      left:225px;
      -webkit-transform: rotate(-45deg);
      -moz-transform: rotate(-45deg);
      -o-transform: rotate(-45deg);
  }

  .slider-header:after{
      content:""; 
      display:block;
      width:0;
      height:0;
      position:absolute;
      top:0;
      right:-20px;
      border-right: 20px solid transparent;
    border-top: 20px solid #333;
  }

  .slider-header2:before{
      content:""; 
      display:block;
      width:0;
      height:0;
      position:absolute;
      top:0;
      left:-20px;
      border-left: 20px solid transparent;
    border-bottom: 20px solid #333;
  } 
```

这是小提琴：http: [//jsfiddle.net/dG7mD/](http://jsfiddle.net/dG7mD/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T13:33:48.963

使用一些简单`hr`的 's 怎么样？

**HTML：**

```
<div id="elem"> <span>Text 1</span>
 <span>Text 2</span>

    <hr id="hr1" class="lines" />
    <hr id="hr2" class="lines" />
    <hr id="hr3" class="lines" />
</div> 
```

**CSS：**

```
#elem {
    height: 50px;
    width: 320px;
    background: black;
    margin: 50px;
    position: relative;
}
#elem > span {
    box-sizing: border-box;
    height: 100%;
    width: 50%;
    color: white;
    display: block;
    float: left;
    padding: 0.2em 1.5em;
}

hr.lines {
    height: 1px;
    background-color: black;
    color: black;
    border: 3px solid white;
    border-left: 0 none;
    border-right: 0 none;
    position: absolute;
    margin: 0;
}
hr#hr1 {
    -webkit-transform: rotate(-55deg);
    -moz-transform: rotate(-55deg);
    -o-transform: rotate(-55deg);
    width: 70px;
    top: 50%;
    left: 50%;
    margin-left: -40px;
    margin-top: -3px;
}

hr#hr2 {
    width: -webkit-calc(50% - 25px);
    bottom: -7px;
    left: 0;
}

hr#hr3 {
    width: -webkit-calc(50% - 15px);
    top: -7px;
    right: 0;
} 
```

**[小提琴！](http://jsfiddle.net/FSg4K/1)**

# python - 在 Python 中搜索两个复杂的正则表达式模式之一而不创建子匹配

> ID：15587033
> 
> 赞同：1
> 
> 时间：2013-03-23T12:56:21.003
> 
> 标签：python, regex

我正在解析一些由不同人转录的电视剧集，这意味着我需要搜索各种格式。例如，新场景以以下两种方式之一表示：

`[A coffee shop]`

或者

`INT. Coffee shop - NIGHT`

现在，我将它与 Python 中的以下正则表达式匹配：

```
re.findall("(^\[(.+?)\]$)|(^[INTEXT]{3}\. .+?$)", text) 
```

其中“文本”是整个脚本的文本（因此使用`findall`）。这总是出现在自己的行上，因此`^$`

这给了我类似的东西：`(None, None, "INT. Coffee Shop - NIGHT")`例如。

**我的问题：**你如何构造一个正则表达式来搜索两个复杂模式之一，使用`|`符号，而不创建你真的不想要*的子匹配？*或者，还有更好的方法？

非常感谢。

**更新**：我忽略了非捕获组的想法。我可以通过以下方式完成我想要的：

```
"(?:^\[.+?\]$)|(?:^[INTEX]{3}\. .+?$)" 
```

然而，这提出了一个新问题。我实际上并不想要场景中的括号或 INT/EXT，只是位置。我认为我可以在非捕获组中使用实际组，但我仍然得到其他表达式的空白匹配，如下所示：

```
import re

pattern = "(?:^\[(.+?)\]$)|(?:^[INTEX]{3}\. (.+?)$)"

examples = [                                                                                                                                                                     
    "[coffee shop]",                                                                                                                                                                 
    "INT. COFFEE SHOP - DAY",                                                                                                                                                        
    "EXT. FIELD - NIGHT",                                                                                                                                                            
    "[Hugh's aparment]"
]

for example in examples:
    print re.findall(pattern, example)

'''
[('coffee shop', '')]
[('', 'COFFEE SHOP - DAY')]
[('', 'FIELD - NIGHT')]
[("Hugh's aparment", '')]
''' 
```

我可以只`join()`使用它们，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:16:44.847

根据您提供的有限示例，如何为括号使用断言：

```
re.findall("((?<=^\[)[^[\]]+(?=\]$)|^[INTEXT]{3}\. .+?$)", text) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:07:27.257

最好只使用两个表达式。

```
patterns = [r'^\[(.+?)\]$', r'^(?:INT|EXT)\. (.+?)$']

for example in examples:
    print re.findall(patterns[0], example) or re.findall(patterns[1], example) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T18:38:39.750

这似乎做你想做的事：

```
(?m)^(?=(?:\[|[INTEX]{3}\.\s+)([^\]\r\n]+))(?:\[\1\]|[INTEX]{3}\. \1)$ 
```

首先，前瞻查看场景标记的文本，将其捕获在组 #1 中。然后正则表达式的其余部分继续执行并消耗包含标记的整行。虽然现在我想了想，你真的不需要消耗任何东西。这也有效：

```
result = re.findall(r"(?m)^(?=(?:\[|[INTEX]{3}\.\s+)([^\]\r\n]+))", subject) 
```

标记文本仍被捕获在组 #1 中，因此仍会添加到`findall()`. 再说一次，我不明白你为什么要在`findall()`这里使用。如果您尝试通过替换它们来规范化场景标记，则必须使用正则表达式的消费版本。

另外，请注意`(?m)`. 在您的示例中，您始终将正则表达式单独应用于场景标记。要将它们从整个脚本中提取出来，您必须设置`MULTILINE`标志，将`^`它们`$`变成线锚。

# c# - 调度程序计时器 - Windows Phone

> ID：15587034
> 
> 赞同：0
> 
> 时间：2013-03-23T12:56:27.107
> 
> 标签：c#, windows-phone-7, dispatchertimer

我正在我的 Windows 手机上构建一个小应用程序，但调度程序计时器出现问题。

每次加载页面时，调度程序都会在另一个时间运行。

基本上我有一个倒计时，当用户返回主页时（倒计时），调度程序计时器再次运行，这意味着倒计时的速度是两倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:09:37.943

基本上 DispatcherTimer 是一个创建新线程的类。因此，当您的页面重新加载时，它会创建一个新线程。因此，建议您在每次离开该类时处理 DispatcherTimer 类。

```
DispatcherTimer timer=new DispatcherTimer();

//OnNavigatedFrom(EventArgs e)
{
  timer=null;
} 
```

# php - 如何在 PHP 中进行闭包测试

> ID：15587035
> 
> 赞同：0
> 
> 时间：2013-03-23T12:56:31.957
> 
> 标签：php, closures, lambda

查找对象是否为匿名函数的正确方法是什么？

```
if (is_object($value) and method_exists($value, '__invoke'))
    $value(); 
```

1000000 次迭代，时间：3.27 s，或

```
if (is_object($value) and $value instanceof Closure)
    $value(); 
```

1000000 次迭代，时间：1,71 s

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:06:45.123

方法的存在[`__invoke()`](http://php.net/manual/en/language.oop5.magic.php#object.invoke)并不意味着该项目是匿名函数。任何类都可以实现该方法，并且实例将是可调用的。

假设“匿名函数”是指使用没有名称（[docs](http://php.net/manual/en/functions.anonymous.php)）的函数声明语法创建的函数 - 而不是旧[`create_function()`](http://php.net/manual/en/function.create-function.php)的 - 手册（所有知识的字体）状态（强调我的）：

> 在 PHP 5.3 中实现的匿名函数产生这种 [Closure] 类型的对象。这个事实曾经被认为是一个实现细节，但**现在可以依赖它。**
> 
> [http://php.net/manual/en/class.closure.php](http://php.net/manual/en/class.closure.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T12:59:53.150

我通常只是去：

```
if ($value instanceof Closure)
{
    $value();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T15:38:26.663

你的例子并不相同。具有 __invoke 魔术方法的对象可能不是闭包。所以如果你只想要闭包检查闭包。如果您想要所有可调用对象，请检查可调用对象。

您可以使用[Callable 类型提示](http://www.php.net/manual/en/language.types.callable.php)或使用[is_callable 函数](http://php.net/manual/en/function.is-callable.php)。

# android - 带有建议的 Actionbarsherlock 搜索视图

> ID：15587041
> 
> 赞同：0
> 
> 时间：2013-03-23T12:57:08.213
> 
> 标签：android, actionbarsherlock, searchview

我的开发环境是 Eclipse，我正在使用 Actionbarsherlock。我希望一旦我开始在 actionbarsherlock SearchView 中编写文本，它就会下拉一个建议列表。像这样：

![](../Images/571ae5d845e8db2af8f2051f7220e365.png)

我对在 android 中使用 ActionbarSherlock 库真的很陌生，所以请你给我一个例子，说明一旦你开始在 SearchView 中搜索，如何制作这个下拉列表。

主要是我正在阅读电话联系人内容提供程序，如果您在搜索视图中写入的字符串包含子字符串或联系人姓名的整个字符串，我想显示他们的姓名+电话号码+照片。基本上，我希望 SearchView 可以让您按姓名搜索联系人，并显示他们的姓名+电话+照片的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:42:59.117

使用当前的 ActionBarSherlock 库（4.2 版），这是不可能的。尽管 ActionBarSherlock 的开发树中有一个修复程序，但它允许您这样做。

只需[在 ActionBarSherlock 项目页面上打开开发树分支，](https://github.com/JakeWharton/ActionBarSherlock/tree/dev)然后将存储库下载为 zip 文件。别担心，ActionBarSherlock 的下一个版本（包含此修复程序）可能不会太远。现在开发树应该足够了。

遵循[有关使用 SearchView 的官方指南，](http://developer.android.com/guide/topics/ui/actionbar.html)或者直接跳到我[关于 ActionViews 的博客文章](http://www.grokkingandroid.com/adding-actionviews-to-your-actionbar/)- 我还展示了如何使用它。我自己在那里使用 ActionBarSherlock。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T07:12:24.113

你确定是一样的吗？因为我在论坛上看到人们说actionbarsherlock与android官方不同......

# php - 如何使用 PHP 在多个文件中查找和替换一行

> ID：15587044
> 
> 赞同：1
> 
> 时间：2013-03-23T12:57:11.727
> 
> 标签：php, file, replace, line, config

我想为我当前的项目创建一个安装程序，它会自动修改几十个配置文件。

因此，如果表单已发送，PHP 脚本应查看搜索选项在哪个配置文件中并进行更改。在你问之前，我不能把文件放在一起；）。

一个基本的配置行如下所示： `$config['base_url'] = 'test';`. 我尝试使用`str_replace()`，但这不起作用，因为我不知道变量中当前有什么。

所以我需要一个`$config['base_url'] = '%';`在多个文件中搜索并将其替换为`$config['base_url'] = 'new_value';`（例如）的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:19:09.057

我意识到答案已被接受，最初我删除了这个，但是，在评论中你提到配置是可编辑的，这可能意味着其他用户，所以你不能保证间距会匹配，也不能保证他们会使用`'`而不是`"`总是，所以下面的内容可能更宽容一点

```
$name = 'base_url';
$value = 'new_value';
$config = '$config["base_url"] = "old_value";';

$config  = preg_replace('/\[(?:\'|\")'.$name.'(?:\'|\")\]\s*=\s*(\'|\")(.*)\\1;/', "['".$name."'] = '$value';", $config);

echo '<pre>', var_dump($config), '</pre>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:09:48.353

您可以使用如下的正则表达式：

```
/\$config\['base_url'\] = '[a-zA-Z0-9]';/ 
```

您必须适应每一行。

在我看来，更好的解决方案是创建一个模板配置文件，其行如下：

```
$config['base_url'] = '%BASE_URL%'; 
```

您可以简单地使用`str_replace()`.

# linux - Apache2 站点可用配置

> ID：15587048
> 
> 赞同：0
> 
> 时间：2013-03-23T12:57:48.640
> 
> 标签：linux, apache, debian

首先，我已经完成了搜索并找到了答案，但我仍然不明白以下内容。

我有两个 .co.uk 域，在我的 Debian 盒子上设置了两个目录，位于 /home/site1/public_html/ 和 /home/site2/public_html/ -（例如，已设置用户等）。

所以我将我的域指向我的盒子 IP 地址，带有两个 DNS 条目（两者相同）：

```
DNS Entry      Type      IP Address
@              A         myip
www            A         myip 
```

现在对于可用站点的配置，我创建了两个新的“文件”，两者的设置相同，但相应域的路径和信息已更改：

```
<VirtualHost *:80>
    ServerAdmin my-email-address
    ServerName www.site1.co.uk
    ServerAlias site1.co.uk
    DocumentRoot /home/site1/public_html/
</VirtualHost> 
```

&

```
<VirtualHost *:80>
    ServerAdmin my-email-address
    ServerName www.site2.co.uk
    ServerAlias site2.co.uk
    DocumentRoot /home/site2/public_html/
</VirtualHost> 
```

我a2ensite，重新加载apache。

现在，如果我去 www.site1.co.uk 或 site1.co.uk 它工作正常。如果我到 www.site2.co.uk 它可以工作，但 site2.co.uk 不起作用（找不到页面），我真的不知道为什么。

谁可以给我解释一下这个？我是否应该添加一些其他 DNS 条目、不同的配置等？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:16:32.503

根据我的经验，您需要将 site2.co.uk 重定向到 www.site2.co.uk。

这是你应该在 Apache2 中做的事情

```
RewriteCond %{HTTP_HOST}   !^www\.site2\.co.uk [NC]
RewriteCond %{HTTP_HOST}   !^$
RewriteRule ^/?(.*)         http://www.site2.co.uk/$1 [L,R,NE] 
```

有关详细信息，请参阅[https://httpd.apache.org/docs/2.4/rewrite/remapping.html](https://httpd.apache.org/docs/2.4/rewrite/remapping.html) - 规范主机名。

# objective-c - 指向整数转换的不兼容指针将“void *”发送到“NSEnumerationOptions”类型的参数（又名“unsigned int”）

> ID：15587049
> 
> 赞同：0
> 
> 时间：2013-03-23T12:57:51.450
> 
> 标签：objective-c, types, nsarray, warnings

如何指定我想在没有任何选项的情况下“枚举ObjectsAtIndexes：”？当我尝试将 nil 传递给 options 参数时，Xcode 给了我这个警告。不会引起投诉的等值价值是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:02:03.797

`opts`是一个枚举，（在这种情况下）基本上是 and `unsigned int`，所以 pass `0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T13:10:27.710

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSEnumerationOptions](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/doc/c_ref/NSEnumerationOptions)

阅读有关此方法的 NSArray 文档，然后单击描述中的 NSEnumerationOptions 链接。

**NSEnumerationOptions**

块枚举操作的选项。

```
enum {
   NSEnumerationConcurrent = (1UL << 0),
   NSEnumerationReverse = (1UL << 1),
};
typedef NSUInteger NSEnumerationOptions; 
```

显然它是一个 NSUInteger 位被屏蔽。0 或以上两者之一或两者，但`NSEnumerationConcurrent`注意仅作为提示且不保证。

`nil`不是一个`NSUInteger`。并非所有方法参数都是对象。`nil`仅当对象参数是可选的时才应传递。

# optimization - 在 Octave 中只读取一种 RGB 颜色

> ID：15587050
> 
> 赞同：1
> 
> 时间：2013-03-23T12:58:05.667
> 
> 标签：optimization, image-processing, octave

我必须使用 PNG 格式读取数百张 RGB 图像。我只需要一种颜色（红色、绿色或蓝色），现在我正在做这样的事情：

```
A = imread(file);
A = A(:, :, 1); 
```

我想知道是否可以只读取一种颜色的值，以加快读取速度。我需要这个操作尽可能快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:40:04.080

就像@carandraug 提到的那样，octave 没有提供这样的方法。您已经发布了最简单的选项。Octave 使用[ImageMagick](http://www.imagemagick.org/)作为后端来读取图像文件。这里没有太大的优化空间。

此外，如果您确实需要加快阅读大量图像的速度，您可能需要寻找替代阅读方法或实现自己的阅读方法。一个好的起点是[libpng](http://www.libpng.org/)的源代码。另一个想法是首先将您的 RGB png 转换为未压缩的简单 bmp。让您选择的另一个快速程序处理转换图像的过程。例如在内存驱动器中创建bmp，并使用低级命令（fread）从八度音程读取它们。这种策略可以在某种程度上进行优化。但只有当我们谈论很多图像时，它们才值得付出努力。

# php - 通过json更新mysql数据

> ID：15587057
> 
> 赞同：-1
> 
> 时间：2013-03-23T12:59:05.020
> 
> 标签：php, mysql, pdo

大家好，所以我可以从 json url 更新记录并将其放入 Mysql 现在我正在尝试更新记录，它只获取 1 个值并将所有记录更新为新值，因此它只更新现有记录这里有 1 条记录是我正在使用的

```
$ApiLink     = "JSON URL HERE";
$json_decode = (json_decode(file_get_contents($ApiLink), true));
$output      = $json_decode["character_list"];

/************************************************/

$do_stuff = $dbh->prepare("UPDATE damage_given_vehicle SET veh_id=:veh_id, veh_name=:veh_name, veh_total=:total_value, veh_faction_nc=:veh_faction_nc, veh_faction_tr=:veh_faction_tr, veh_faction_vs=:veh_faction_vs WHERE character_number = :char_id");

foreach ($output as $key => $value) {
    $character_id[$key] = $output[$key]["id"];

    if (isset($output[$key]["stats"]["vehicle_kills"]["vehicle"])) {
        $vehicle_kills[$key] = $output[$key]["stats"]["vehicle_kills"]["vehicle"];
        foreach ($vehicle_kills[$key] as $row) {
            $do_stuff->bindValue(':char_id', $update_id);
            $do_stuff->bindValue(':veh_id', $row["id"]);
            $do_stuff->bindValue(':veh_name', $row["name"]);
            $do_stuff->bindValue(':total_value', $row["value"]);
            $do_stuff->bindValue(':veh_faction_nc', $row["faction"]["nc"]);
            $do_stuff->bindValue(':veh_faction_tr', $row["faction"]["tr"]);
            $do_stuff->bindValue(':veh_faction_vs', $row["faction"]["vs"]);
            $do_stuff->execute();
        }
    }
} 
```

数据库起初看起来像这样：

```
key | id | name | value 1 | value 2 | value 3 | value 4 |
5428029729515051201     11  name_1 6 45 23 34 
5428029729515051201     11  name_2 2 34     63 63
5428029729515051201     11  name_3 34 0     17  17 
```

在我使用更新脚本后，它会将这些值转换为：

```
5428029729515051201     11  name    34  0   17  17
5428029729515051201     11  name    34  0   17  17
5428029729515051201     11  name    34  0   17  17 
```

如果您对脚本如何在这里输入 json 数据感到好奇，请执行以下操作：

```
$stmt = $dbh->prepare("
    INSERT INTO damage_given_vehicle (
        character_number, veh_id, veh_name, veh_total,
        veh_faction_nc, veh_faction_tr, veh_faction_vs)
    VALUES(
        :char_id, :veh_id, :veh_name, :total_value,
        :veh_faction_nc, :veh_faction_tr, :veh_faction_vs)
");
foreach ($output as $key => $value) {
    $character_id[$key] = $output[$key]["id"];

    if (isset($output[$key]["stats"]["vehicle_kills"]["vehicle"])) {
        $vehicle_kills[$key] = $output[$key]["stats"]["vehicle_kills"]["vehicle"];
        foreach ($vehicle_kills[$key] as $row) {
            $stmt->bindValue(':char_id', $character_id[$key]);
            $stmt->bindValue(':veh_id', $row["id"]);
            $stmt->bindValue(':veh_name', $row["name"]);
            $stmt->bindValue(':total_value', $row["value"]);
            $stmt->bindValue(':veh_faction_nc', $row["faction"]["nc"]);
            $stmt->bindValue(':veh_faction_tr', $row["faction"]["tr"]);
            $stmt->bindValue(':veh_faction_vs', $row["faction"]["vs"]);
            $stmt->execute();
        }
    }
} 
```

我如何让它分别更新每个数组，如果我在任何 $row[""] 上执行 var_dump，它们会生成数组应该如何显示，但是当它通过并进入 mysql 时，它只获取 1 个值

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:51:01.277

你在哪里设置`$update_id`以及你的表中有什么值`character_number`？对我来说，看起来您在每个循环中都覆盖了表的每个条目，因为您`$update_id`的`where`语句中始终具有相同的条目。所以最后你会得到表中每个条目的最后一个循环的值。

但它很难找到，因为你还没有发布真正的表格。

# .net - 是否可以将文档库映射到网络驱动器的文件夹？如果可能的话怎么办？

> ID：15587058
> 
> 赞同：2
> 
> 时间：2013-03-23T12:59:06.037
> 
> 标签：.net, sharepoint-2010

是否可以将文档库映射到 SharePoint 2010 中的共享驱动器文件夹？如果可能的话怎么办？如果不是，这可以通过编码实现吗？实际上我想在文档库和共享驱动器上的文件夹之间自动同步？我怎么能做到这一点。请给我一些启示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T20:23:55.350

如果您想要同步，SharePoint Workspace 是您的最佳答案。如果你只想映射一个文件夹，你可以创建一个网络驱动器，这里有很好的教程：[http ://www2.imperial.ac.uk/blog/webguide/2010/07/01/mapping-network-drives-to-共享点库/](http://www2.imperial.ac.uk/blog/webguide/2010/07/01/mapping-network-drives-to-sharepoint-libraries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T20:59:01.723

You can definitely go the other way (map a document library as a network drive) but there are other attributes / metadata that SharePoint is going to want to keep track of which would make this problematic. Additionally, SharePoint doesn't have OOTB methods to ping a drive for changes, at least not that I'm aware of.

What I'd recommend instead is a timer job that runs maybe once a day (or more often if you aren't concerned about server load), looks at the network drive to see if anything's been added or changed over the last day, and then uploads the files either as a new version of a current document or (if it can't find the filename) as a brand new one.

[This answer](https://stackoverflow.com/questions/468469/how-do-you-upload-a-file-to-a-document-library-in-sharepoint) should get you started.

# assembly - Return from a procedure in ARM assembly

> ID：15587060
> 
> 赞同：1
> 
> 时间：2013-03-23T12:59:13.577
> 
> 标签：assembly, arm

When creating a function in ARM assembly, I usually push contents of `LR` register into `r4-r5` at the beggining and after the function has finished I pop `r4-r5` to `PC`:

```
.global myfunc
.type   myfunc, %function

myfunc:
push {r4-r5,lr}
... do stuff...
pop {r4-r5,pc} 
```

However, I have read that using `stmfd` and `ldmfd` one might get better performance:

```
myfunc:
stmfd sp!,{r4-r11,lr}
...do stuff...
ldmfd sp!,{r4-r11,pc} 
```

What is exactly the `sp`? I presume it's not really worth saving all the registers `r4-r11` in case I'm not actually using them inside `myfunc`, right? So the push-pop variant is better in that case?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T13:35:28.967

`PUSH {...}` is the Thumb equivalent of the ARM instruction `STMDB SP!,{...}`

`POP {...}` is the Thumb equivalent of the ARM instruction `LDMIA SP!,{...}`

**STM** means STore Multiple.
**DB** means Decrement Before, i.e. decrement the destination address before each store in this case.
**IA** means Increment After, i.e. increment the source address after each load in this case.
**!** means write back the final address to the source/destination address register. For example if `SP` was 0x100 and you did `STMDB SP!,{R0-R2}` you'd have 0xF4 in `SP` afterwards.
**SP** is an alias for `R13`, and is used as the stack pointer on ARM processors.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T13:37:39.297

push and pop are pseudo instructions to the assembler they are not real instructions. You either get a store with the base register updated an stm.

```
push {r11}
stmdb r13!,{r11}

push {r10-r12}
stmdb r13!,{r10-r12} 
```

I prefer stmdb to stmfd just different syntax for the same instruction. (stmdb and ldmia make sense to me, decrement before and increment after).

assemble then disassemble.

```
 0:   e52db004    push    {fp}        ; (str fp, [sp, #-4]!)
   4:   e92d0800    stmfd   sp!, {fp}
   8:   e92d1c00    push    {sl, fp, ip}
   c:   e92d1c00    push    {sl, fp, ip} 
```

If you look up the stm encoding or even just look at the bits and think about it the upper bits of the instruction 0xe92d are stmia/fd, the lower bits are flags indicating what registers what to be saved, notice at address 4 that is a push of 11, then on 8 and c you have that bit set r11, and then the one below it r10 and the one above it r12.

push and pop are easier to read than trying to remember to use sp and use the ! after the register and remember the ia/db/fd, etc suffix and all that.

I believe that thumb might have an actual push/pop.

The single register variant for arm turned into a single store, doesnt matter if you use an stm with one instruction or an str, the operations are functionally equivalent.

So long as you update r13 after the operation and you use db or fd for the stm the you can use the pseudo instruction or the real instructions.

if you are going to store/restore more than one register then definitely list them in a single instruction, dont make a list of several pushes or pops

```
no:
push {r10}
push {r11}
push {r12}
yes:
push {r10-r11} 
```

Unless on thumb then you might not have a choice as you can only push r0-r7+r14 and pop r0-r7+r15 to save higher registers you have to copy them down into lower registers then use push. and you have to use push the stm wont let you use r13\. (thumb2 depending on what extensions are available to your architecture, give you more of an arm-like experience).

re-reading your question

sp is r13, the stack pointer. the pseudo instruction chooses the right instructions so you dont need to worry about stm vs str. When you store more than one register you "can" get an optimization on modern arm systems, but not guaranteed. If your amba/axi bus is 64 bits wide it is more than 2 times faster to write 64 bits at a time rather than 32 bits at a time, because on a 64 bit memory system it takes a read-modify-write to do a 32 bit write, but a 64 bit write does not (lets ignore the cache behavior). If the stm is on an aligned address (when using the stack it would take too much code to figure that out, dont worry about it) then a push of 2 registers would be noticeably faster than two separate pushes (unless the core optimizes those into one bus cycle). If you push say 4 registers one of three things happens if unaligned then you get three transfers a 32 bit transfer on the unaligned address (lets say 0x1004), then a 64 bit transfer on the aligned address after that (0x1008), then a 32 bit transfer of the last register (0x1010). If that four register push had been on analigned address then one of two things happens either two separate 64 bit transfers two registers to 0x2010 lets say and two to 0x2018 or a length of 2 transfer (two 64 bit items in an single transfer) at the aligned base address, say 0x2010\. You wont get the worst case though which is four individual 32 bit transfers, so it is worth using the stm/push.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T20:51:39.063

You don't need to push the registers onto the stack if you are not going to use them. Having said that, you will have to see if that adds any real performance benefit. I think, it is simple to push everything, as at later point of time if you or someone modifies the code, it won't accidentally corrupt the registers and the stack.

By the way you can also do this; that is, save only r4-r5 using `stmfd`.

```
myfunc:
stmfd sp!,{r4-r5,lr}
...do stuff...
ldmfd sp!,{r4-r5,pc} 
```

OR

```
myfunc:
stmfd r13!,{r4-r5,r14}
...do stuff...
ldmfd r13!,{r4-r5,pc} 
```

You can make out that `sp` is alias for `r13` and `lr` is alias for `r14`. Where, `sp` stands for stack pointer and `lr` for link register.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T13:05:45.917

`SP` is the stack pointer register - indicates the top of the current stack. I believe you only need to use `stmfd` if you're saving higher registers. If you only need to save a couple of lower registers just push & pop.

# java - 使用 Hibernate 使用的 Javassist 实体类进行检测

> ID：15587061
> 
> 赞同：1
> 
> 时间：2013-03-23T12:59:17.163
> 
> 标签：java, hibernate, javassist

我开发了一个库，该库在给定抽象类中的某些注释的情况下在运行时生成抽象类的特化类。所以我的图书馆有点像：

```
X x = newInstance(X.class) //X is an abstract class 
```

该库使用 Javassist 在运行时生成将由该`newInstance`方法实例化的子类。

据我了解，Hibernate 还利用 Javassist 在运行时实体类进行检测（如果不是这种情况，请有人纠正我）。

我的问题是是否有可能使这两个框架一起工作？我的意思是，我可以告诉 Hibernate 每次它需要一个实体类（一个抽象类）的实例时，它应该使用我的库中的特定工厂方法吗？

我不知道 Hibernate 是否通过在实体类的运行时生成子类（假设 Hibernate 也需要对它们进行检测）来支持 Courtains。如果是这种情况，将某些类的工厂传递给 Hibernate 的解决方案将不起作用。在那种情况下，Hibernate 是否支持使用抽象实体类？我的意思是，应该可以使用抽象（或接口？）实体类，并以某种方式告诉 Hibernate，当需要使用这些抽象实体类之一时，它应该检测哪个是正确的具体类。

但另一个复杂之处在于，在编译时不存在专门化抽象实体类的具体类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T09:27:23.853

在前往您的回答之前：

*   是的，你是对的，Hibernate 目前使用 Javassist（过去它使用 GCLib，但它已被弃用）在运行时检测类。
*   Hibernate 确实会在运行时创建子类，这些子类可以为您的持久实体提供代理。

## 简短的回答

遗憾的是，我认为您无法将 Hibernate 配置为使用您自己的工厂。有关详细信息，我邀请您阅读长答案部分。

## 长答案

据我所知，目前，Hibernate 4.x 仅支持 Javassist 作为其字节码操作提供程序。虽然，它曾经允许您在 3.x 版本中在 GClib 和 Javassist 之间切换。回到那些版本，您可以通过配置名为`hibernate.bytecode.provider`.

此设置不再显示在[Hibernate 4.1 文档中，但您仍然可以在](http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html_single/)[可选配置属性](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/session-configuration.html#configuration-optional)下的 Hibernate 3.2 文档中找到有关它的信息。

作为一名开发人员，我知道有时我们是一些棘手的人，仅仅因为某些东西不在文档中并不意味着它一定不在代码中 :-) 所以，我认为*如果*设置仍然存在，我们可以尝试利用它是为了做你想做的事（不过，以不受支持的方式）。

出于好奇，因为我的机器中有 Hibernate 4.0.1 代码（但请注意这不是最新的），我做了一些挖掘......而且惊喜，惊喜财产仍然存在！在跟踪使用过的引用（感谢 Eclipse）后，我最终进入了 org.hibernate.cfg.Environment 类（[版本 4.2.0.CR2 的代码](http://grepcode.com/file/repo1.maven.org/maven2/org.hibernate/hibernate-core/4.2.0.CR2/org/hibernate/cfg/Environment.java#342)），在那里我找到了以下代码（我的版本和 4.2 中的代码都是相同的.0CR2):

```
 public static BytecodeProvider buildBytecodeProvider(Properties properties) {
    String provider = ConfigurationHelper.getString( BYTECODE_PROVIDER, properties, "javassist" );
    LOG.bytecodeProvider( provider );
    return buildBytecodeProvider( provider );
}

private static BytecodeProvider buildBytecodeProvider(String providerName) {
    if ( "javassist".equals( providerName ) ) {
        return new org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl();
    }

    LOG.unknownBytecodeProvider( providerName );
    return new org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl();
} 
```

到目前为止，我可以说它是您的代理工厂的 Javassist 实现，并且不会有标准的方法来更改它。

* * *

**疯子旁注**

我要说的是纯粹的*疯狂*，它不应该被考虑到生产代码中，但只有在*它真正工作/学术/让事情发生的情况下才会*考虑。

<锤子黑客>

*   您可以尝试扩展自己的框架来检测类，以便不仅添加满足您需求的字节码，还添加休眠需要的字节码 - 我会说这就像将您的操作与`org.hibernate.bytecode.internal.javassist.BytecodeProviderImpl`操作合并。
*   然后，您可以重命名扩展类以`BytecodeProviderImpl`将其放在同一个包中`org.hibernate.bytecode.internal.javassist`，最后将其放在类路径中的某个位置，类加载器会在 jar 中的那个之前找到它（或者可能使用自定义类加载器）

然后你会喜欢*听*Hibernate、你的框架和可能整个 JVM 惊慌失措的尖叫，不知道该做什么，或者它可以工作......

</锤子黑客>

无论如何，如果您有时间并愿意尝试，请告诉我是否成功。

* * *

**更新**

在评论部分聊了一会儿之后，我有了使用自定义[EntityPersister](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/persister/entity/EntityPersister.html)的想法。因为我对此不太确定，所以我用谷歌搜索了一下，看看我是否能找到一些可以告诉我我的想法是否可行的东西。

甚至比找出我的直觉是否正确更好，我在 Stackoverflow 中发现了一个[与您的问题非常相似](https://stackoverflow.com/questions/953800/can-i-have-hibernate-create-an-object-through-factory-method)的问题。可悲的是，那里没有公认的答案。

但是该问题的第一个答案给出了与我的想法类似的链接。引用 Pascal Thivent 的话：

> 自定义 EntityPersister 实现（您可以[在 Hibernate 初始化期间使用自定义 Configuration 为特定实体注册](http://grails.1312388.n4.nabble.com/GROM-mapping-and-EntityPersister-tp2134133p2134326.html)）

确实，该示例适用于 Grails 中的 Hibernate，但在纯 Java 中几乎相同：

```
 public void registerCustomEntityPersister(Configuration configuration) {
     final Iterator<PersistentClass> classesIterator = configuration.getClassMappings();
 while (classesIterator.hasNext()) {
    final PersistentClass persistentClass = classesIterator.next();
        if (checkIfIsOneTheClassesThatMatters(persistentClass)) {
          persistentClass.etEntityPersisterClass(CustomEntityPersister.class); 
        }
 } 
```

尽管这看起来可行，但看起来工作量太大了，因为实现 EntityPersister 看起来并不那么简单……太多的事情。您可以尝试扩展 Hibernate 使用的默认一个（我真的不知道是哪一个）并尝试覆盖 getProxy() 方法以返回您的检测类之一。

抱歉，如果它仍然不是答案，但遗憾的是我不是 Hibernate 专家，我通常开箱即用，实际上由于 javassist 标签，我发现了你的问题，发现它很有趣。

我希望至少我给了你可以帮助你的信息。

# java - Java Stripe 库：收集拒绝或无效 CVC 等错误

> ID：15587065
> 
> 赞同：3
> 
> 时间：2013-03-23T12:59:34.537
> 
> 标签：java, stripe-payments

我在应用程序中使用 Stripe 作为支付处理器，并且有一些关于在使用 Java 库时获得错误响应的问题，而不是通过 HTTP 接收错误，如[官方 Stripe 文档上的错误代码描述中所述](https://stripe.com/docs/api?lang=java#errors)

我用来根据之前使用条带创建的客户对象向信用卡收费的方法是：

```
public void charge(BigDecimal amount) throws AuthenticationException, InvalidRequestException, APIConnectionException, CardException, APIException {
    //Convert amount to cents
    NumberFormat usdCostFormat = NumberFormat.getCurrencyInstance(Locale.US);
    usdCostFormat.setMinimumFractionDigits(1);
    usdCostFormat.setMaximumFractionDigits(2);
    double chargeAmountDollars = Double.valueOf(usdCostFormat.format(amount.doubleValue()));
    int chargeAmountCents = (int) chargeAmountDollars * 100;
    Map<String, Object> chargeParams = new HashMap<String, Object>();
    chargeParams.put("amount", chargeAmountCents);
    chargeParams.put("currency", "usd");
    chargeParams.put("customer", subscription.getCustomerId());
    Charge charge = Charge.create(chargeParams);
    //Should I be inspecting the returned charge object and throwing my own errors here?
} 
```

该方法会引发各种异常。**CardException 似乎可以为我提供有关付款错误的详细信息，但它实际上是用来检测诸如拒绝和无效卡参数之类的事情？**这些异常会告诉我诸如“信用卡被拒绝”或“cvc 代码不正确”之类的信息，还是我应该检查返回的 Charge 对象以获取该数据？

调用 Charge 方法的方法示例可能类似于：

```
BigDecimal discount = cost.multiply(BigDecimal.valueOf(discountPercentage).setScale(2, RoundingMode.HALF_EVEN));
cost = cost.subtract(discount);

if(cost.compareTo(BigDecimal.ZERO) > 0) {
    //Charge the credit card.
    try {
        paymentManager.charge(cost);
                    //Everything went ok, return success to user.
    } catch (AuthenticationException e) {
        //Authentication with API failed. Log error.
    } catch (InvalidRequestException e) {
        //Invalid parameters, log error.
    } catch (APIConnectionException e) {
        //Network communication failure. Try again.
    } catch (CardException e) {
        String errorCode = e.getCode();
        String errorMsg = e.getParam();
        if(errorCode.equals("incorrect_number")) {
            //Tell the user the cc number is incorrect.
        } else if(errorCode.equals("invalid_cvc")) {
            //Tell the user the cvc is wrong.
        }
        //This is a sample, production will check all possible errors.
    } catch (APIException e) {
        //Something went wrong on Stripes end.
    }
} 
```

其次，我应该担心来自美国以外的付款还是 Stripe 会为我处理所有这些？**我是否需要根据用户的语言环境检测货币并设置正确的货币代码，或者 Stripe 是否会将所有付款转换为美元，因为这是存入我账户的货币？**

**更新：** 根据我从 Stripe 支持团队收到的一封电子邮件，非美国卡的发卡银行将自动执行从本地到美元的所有货币转换。我不必根据所收费卡的来源调整货币代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T13:43:17.857

似乎`CardException`会给您提供与卡相关的（无效的 CVC）和与付款相关的（拒绝）错误。

[从文档](https://stripe.com/docs/api?lang=java#create_charge)中，这里如何使用该`Charge.create()`方法：

> 如果收费成功，则返回一个收费对象。如果出现问题，将返回错误。常见的错误来源是无效或过期的卡，或可用余额不足的有效卡。

从[条纹 Java 文档](https://stripe.com/docs/api?lang=java#errors)：

```
Card Errors
Type: card_error

Code                  Details
incorrect_number      The card number is incorrect
invalid_number        The card number is not a valid credit card number
invalid_expiry_month  The card's expiration month is invalid
invalid_expiry_year   The card's expiration year is invalid
invalid_cvc           The card's security code is invalid
expired_card          The card has expired
incorrect_cvc         The card's security code is incorrect
card_declined         The card was declined.
missing               There is no card on a customer that is being charged.
processing_error      An error occurred while processing the card. 
```

至于货币，有一个货币值在 Map 中传递给该`Charge.create()`方法，该方法似乎表明您想要收取费用的货币。不过，我不确定这与结算有何关系。

# php - 检查多边形中的坐标

> ID：15587069
> 
> 赞同：0
> 
> 时间：2013-03-23T13:00:00.507
> 
> 标签：php, javascript, google-maps-api-3, geolocation

我在 HTML5 中使用 Google Maps api 和地理定位功能。恢复：我在智能手机上显示的页面上使用“navigator.geolocation.watchPosition”的结果，并检查区域中是否存在坐标。

在第一次测试中，我发现了这个功能： http: [//www.mail-archive.com/google-maps-js-api-v3%40googlegroups.com/msg04561.html](http://www.mail-archive.com/google-maps-js-api-v3%40googlegroups.com/msg04561.html)

现在，我发现了这个：[Point-in-Polygon PHP Errors](https://stackoverflow.com/questions/8040671/point-in-polygon-php-errors)

所以我有一个 javascript 函数和一个 php 函数可以完成相同的工作：检查坐标，如果坐标在一个区域内，则返回 true/false。

最好是通过 javascript 函数（因此通过移动设备）还是通过 php 函数（当然，由于 Ajax 调用和其他函数而使用的 php 函数）进行验证？

哪种方法速度更快，消耗更少等？对我来说，最好将费用归因于 php 服务器而不是客户端设备，但我将这个问题告诉专家:-)

谢谢你的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-30T17:12:52.057

如果您可以信任客户端，或者您不关心脚本可能被破解，我宁愿将 JavaScript 代码放在客户端以避免客户端/服务器请求，它应该提供更好的用户体验，而不是AJAX 调用。

如果在任何情况下您有一个客户端/服务器请求，并且如果您可以在同一个请求中组合检查，那么在 PHP 中会更好。

# jquery - 通过 jquery 将文本附加到 URL src

> ID：15587071
> 
> 赞同：0
> 
> 时间：2013-03-23T13:00:08.520
> 
> 标签：jquery, dom, attr

我正在抓取一些内容，并且这张图片包含以下内容：

```
<div id="targetImage"><img src="alfresco/nap/webAssets/webPage/homepage/desktop/common/intl/global/images/primary-v=1.13.jpg" alt="" title="" width="550" height="682"></div> 
```

我需要附加

```
"http://www.targetdomain.com/" 
```

前

```
"alfresco" 
```

通过 jquery 实现这一目标的最佳方法是什么？我需要正则表达式吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:04:01.340

以下应该有效：

```
var img = $("#targetImage").children("img")[0];
img.attr("src", "http://www.targetdomain.com/"+img.attr("src")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T13:05:55.283

```
var img= $("#targetImage img:first");
img.attr("src", "http://www.targetdomain.com/"+img.attr("src")); 
```

这是给你的小提琴[http://jsfiddle.net/9ajgj/1/](http://jsfiddle.net/9ajgj/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:11:26.290

```
var root = 'http://www.targetdomain.com/';
$('.someContent').find('img').each(function(index, image) {
    image.src.indexOf('http') !== 0 && (image.src = root + image.src);
}); 
```

# java - 部署到 Heroku 时无法在 Java HelloWorld 中收集 Maven 依赖项

> ID：15587073
> 
> 赞同：0
> 
> 时间：2013-03-23T13:00:22.587
> 
> 标签：java, maven, heroku, maven-dependency-plugin, jetty-8

我正在按照[heroku guide](https://devcenter.heroku.com/articles/java)玩 Java 和 heroku 。但几乎没有修改。在这种情况下，我使用 JDK 1.7、Jetty 8.1.2.v20120308 和 Maven 依赖插件 2.7（因为似乎无法构建 2.4）

一切都在本地构建好

> mvn包

但是当我使用

> git push heroku 大师

要在 heroku 上部署，我收到以下消息：

```
 [ERROR] Failed to execute goal on project helloart: Could not resolve dep
endencies for project main.java:helloart:jar:1.0-SNAPSHOT: Failed to collect dep
endencies for [org.eclipse.jetty:jetty-servlet:jar:8.1.2.v20120308 (compile), ja
vax.servlet:servlet-api:jar:2.5 (compile)]: Failed to read artifact descriptor f
or org.eclipse.jetty:jetty-servlet:jar:8.1.2.v20120308: Could not transfer artif
act org.eclipse.jetty:jetty-parent:pom:19 from/to centralMirror (http://s3posito
ry.heroku.com/jvm/): Error transferring file: Server returned HTTP response code
: 503 for URL: http://s3pository.heroku.com/jvm/org/eclipse/jetty/jetty-parent/1
9/jetty-parent-19.pom -> [Help 1]
       [ERROR]
       [ERROR] To see the full stack trace of the errors, re-run Maven with the
-e switch.
       [ERROR] Re-run Maven using the -X switch to enable full debug logging.
       [ERROR]
       [ERROR] For more information about the errors and possible solutions, ple
ase read the following articles:
       [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/Depende
ncyResolutionException
 !     Failed to build app with Maven
 !     Heroku push rejected, failed to compile Java app

To git@heroku.com:aqueous-castle-5897.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:aqueous-castle-5897.git' 
```

[我在http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException](http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException)阅读了有关错误的信息，但似乎我必须配置一个 settings.xml 文件（在 heroku 上？）如果这是解决方案，我该怎么做它？

如果没有……还有其他想法吗？

这是**我的 pom.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>main.java</groupId>
    <version>1.0-SNAPSHOT</version>
    <artifactId>helloart</artifactId>
    <dependencies>
        <dependency>
            <groupId>org.eclipse.jetty</groupId>
            <artifactId>jetty-servlet</artifactId>
            <version>8.1.2.v20120308</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.7</version>
                <executions>
                    <execution>
                        <id>copy-dependencies</id>
                        <phase>package</phase>
                        <goals><goal>copy-dependencies</goal></goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

这是**我的 system.properties**

```
java.runtime.version=1.7 
```

谢谢！祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:05:00.993

由于 pom[似乎位于 maven central 中](http://search.maven.org/#search|gav|1|g%3A%22org.eclipse.jetty%22%20AND%20a%3A%22jetty-parent%22)，这听起来像是一个 heroku 问题，您应该联系 heroku 支持。[您可以在https://help.heroku.com/](https://help.heroku.com/)打开 Heroku 支持的票证。

# android - 运行时生成 FIleNotFoundException 错误

> ID：15587084
> 
> 赞同：0
> 
> 时间：2013-03-23T13:02:02.377
> 
> 标签：android, file, android-file

```
private void readFileFromSDCard() {
        File directory = Environment.getExternalStorageDirectory();

        File file = new File(directory+"/HomeActivityLogs");
        //file.getParentFile().mkdirs();

        if (!file.exists()) {

            FileWriter gpxwriter;
            try {
                System.out.println(" IN TRY Error");
                file.createNewFile();
                gpxwriter = new FileWriter(file);

                System.out.println(" file writer Error");
            BufferedWriter out = new BufferedWriter(gpxwriter);
            out.write("http://192.168.1.126/msfaws2_4/Service.asmx");
            System.out.println(" in url Error");
        ///    out.write("http://192.168.1.250/msfaws2_4/Service.asmx");
            out.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                loginLog.appendLog("Exception in readFileFromSDCard() " + e.getMessage(),"MainActivity");
            }
        }

        BufferedReader reader = null;
        try {
            System.out.println("Error");
            reader = new BufferedReader(new FileReader(file));
            StringBuilder builder = new StringBuilder();
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
            Constant.URL = builder.toString();
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (reader != null) {
                try {
                    reader.close();
                } catch (IOException e) {
                    e.printStackTrace();
                    loginLog.appendLog("Exception in readFileFromSDCard() " + e.getMessage(),"MainActivity");
                }
            }
        }
} 
```

请帮我解决这个问题。当数据被临时存储然后从活动中检索时，它会给出一个错误 filenotfound 及其从 Web 服务动态创建的文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:25:22.047

试试这个，在你里面添加这个权限`manifest.xml`

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# ios - 如何在文本文件单击时弹出 datePicker 并在编辑完成后消失

> ID：15587087
> 
> 赞同：7
> 
> 时间：2013-03-23T13:02:17.047
> 
> 标签：ios, uitextfield, uipickerview

我有类似下面的视图

![在此处输入图像描述](../Images/d665a13eb6a073038c35441d1bba23d9.png) 日期选择器视图总是在那里我怎样才能让它在点击输入日期时弹出，当我点击背景时，日期选择器应该下降

我刚刚习惯了日期选择器视图，但我不知道如何做到这一点出现和消失

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T13:29:30.177

行。这是您对动画的要求的一些示例代码。

```
- (void) showView
{
    [self.view addSubview:yourDatePickerView];
        yourDatePickerView.frame = CGRectMake(0, -250, 320, 50);
        [UIView animateWithDuration:1.0
                         animations:^{
                             yourDatePickerView.frame = CGRectMake(0, 152, 320, 260);
                         }];
} 
```

这里是如何隐藏你的 DatePickerView

```
- (void) hideView
{
    [UIView animateWithDuration:0.5
                         animations:^{
                             yourDatePickerView.frame = CGRectMake(0, -250, 320, 50);
                         } completion:^(BOOL finished) {
                             [yourDatePickerView removeFromSuperview];
                         }];
}

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    if(textField == yourDateTextField)
    {
         [self showView];
         return NO; // preventing keyboard from showing
    }
    return YES;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    if(textField == yourDateTextField)
    {
         [self hideView];
    }
} 
```

这就是你所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T13:27:50.367

您应该在委托方法中识别文本字段。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    if(textField == DATE_TEXT_FIELD)
    {
             //Display date picker
    }
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{

        if(textField == DATE_TEXT_FIELD)
        {
                 //Hide date picker
            }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T13:28:28.690

*   创建一个`UIView`包含此日期选择器视图的参考。
*   现在将其分配`datePickerContainerView`给`textField.inputView` 属性。
*   然后分配`textfield.delegate`并`self`实现您的 `textFieldShouldReturn`方法。在那个方法中，写下这几行

    [textField resignFirstResponder];

    返回是；

现在，当您点击该文本字段时，它将根据 inputview 属性设置加载 datepicker 视图来代替默认键盘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-22T08:38:02.440

在为 datePicker 编写代码之前，请确保键入以下代码行

```
 [textField resignFirstResponder]; 
```

众所周知，键盘是文本字段的默认第一响应者。因此，您应该先将其退出，然后再为选择器编码，否则键盘也会弹出。

# android - 向上滚动到软键盘

> ID：15587089
> 
> 赞同：11
> 
> 时间：2013-03-23T13:02:29.887
> 
> 标签：android, android-softkeyboard

我的表格很长，当出现软键盘时，我看不到底部的 editTexts

这是我的xml

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin" >

    <TextView
        android:id="@+id/register_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:text="@string/register"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/register_username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_title"
        android:layout_centerHorizontal="true"
        android:text="@string/username" />

    <EditText
        android:id="@+id/register_edit_username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_username"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="text" >
    </EditText>

    <TextView
        android:id="@+id/register_password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_edit_username"
        android:layout_centerHorizontal="true"
        android:text="@string/password" />

    <EditText
        android:id="@+id/register_edit_password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_password"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="textPassword" >
    </EditText>

    <TextView
        android:id="@+id/register_confirm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_edit_password"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:text="@string/confirm" />

    <EditText
        android:id="@+id/register_edit_confirm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_confirm"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="textPassword" >
    </EditText>

    <TextView
        android:id="@+id/register_mail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_edit_confirm"
        android:layout_centerHorizontal="true"
        android:text="@string/mail" />

    <EditText
        android:id="@+id/register_edit_mail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_mail"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="textEmailAddress" >
    </EditText>

    <TextView
        android:id="@+id/register_phone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_edit_mail"
        android:layout_centerHorizontal="true"
        android:text="@string/phone" />

    <EditText
        android:id="@+id/register_edit_phone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_phone"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="phone" >
    </EditText>

    <TextView
        android:id="@+id/register_last_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_edit_phone"
        android:layout_centerHorizontal="true"
        android:text="@string/last_name" />

    <EditText
        android:id="@+id/register_edit_last_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_last_name"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="text" >
    </EditText>

    <TextView
        android:id="@+id/register_first_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_edit_last_name"
        android:layout_centerHorizontal="true"
        android:text="@string/first_name" />

    <EditText
        android:id="@+id/register_edit_first_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_first_name"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="text" >
    </EditText>

    <TextView
        android:id="@+id/register_alert_password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_edit_first_name"
        android:layout_centerHorizontal="true"
        android:text="@string/register_alert_pwd" />

    <EditText
        android:id="@+id/register_edit_alert_password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_alert_password"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="textPassword" >
    </EditText>

    <TextView
        android:id="@+id/register_alert_password_confirm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_edit_alert_password"
        android:layout_centerHorizontal="true"
        android:text="@string/register_alert_pwd_confirm" />

    <EditText
        android:id="@+id/register_edit_alert_password_confirm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_alert_password_confirm"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="textPassword" >
    </EditText>

    <CheckBox
        android:id="@+id/register_tou"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_edit_alert_password_confirm"
        android:layout_centerHorizontal="true"
        android:text="@string/register_tou" />

    <Button
        android:id="@+id/register_valid"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/register_tou"
        android:layout_centerHorizontal="true"
        android:text="@string/confirm" />

</RelativeLayout>

</ScrollView> 
```

我还在清单中更新了我的活动

```
<activity
        android:name="my name"
        android:label="@string/title_activity_register"
        android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen"
        android:windowSoftInputMode="stateVisible|adjustResize" >
</activity> 
```

在所有其他帖子中，我看到解决方案是

```
android:windowSoftInputMode="stateVisible|adjustResize" 
```

但它不适用于我的情况

谢谢

**编辑**

更新到我最后的代码

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/register"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:fillViewport="true" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/register_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:text="@string/register"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/register_username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:text="@string/username" />

    <EditText
        android:id="@+id/register_edit_username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="text" >
    </EditText>

    <TextView
        android:id="@+id/register_password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:text="@string/password" />

    <EditText
        android:id="@+id/register_edit_password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="textPassword" >
    </EditText>

    <TextView
        android:id="@+id/register_confirm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:text="@string/confirm" />

    <EditText
        android:id="@+id/register_edit_confirm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="textPassword" >
    </EditText>

    <TextView
        android:id="@+id/register_mail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:text="@string/mail" />

    <EditText
        android:id="@+id/register_edit_mail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="textEmailAddress" >
    </EditText>

    <TextView
        android:id="@+id/register_phone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:text="@string/phone" />

    <EditText
        android:id="@+id/register_edit_phone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="phone" >
    </EditText>

    <TextView
        android:id="@+id/register_last_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:text="@string/last_name" />

    <EditText
        android:id="@+id/register_edit_last_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="text" >
    </EditText>

    <TextView
        android:id="@+id/register_first_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:text="@string/first_name" />

    <EditText
        android:id="@+id/register_edit_first_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="text" >
    </EditText>

    <TextView
        android:id="@+id/register_alert_password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:text="@string/register_alert_pwd" />

    <EditText
        android:id="@+id/register_edit_alert_password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:inputType="textPassword" >
    </EditText>

    <TextView
        android:id="@+id/register_alert_password_confirm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:text="@string/register_alert_pwd_confirm" />

    <EditText
        android:id="@+id/register_edit_alert_password_confirm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:ems="10"
        android:imeOptions="actionSend"
        android:inputType="textPassword" >
    </EditText>

    <CheckBox
        android:id="@+id/register_tou"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:text="@string/register_tou" />

    <TextView
        android:id="@+id/register_condition"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_marginBottom="20dp"
        android:text="@string/register_read_tou" />

    <Button
        android:id="@+id/register_valid"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal"
        android:text="@string/confirm" />
</LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T23:45:16.610

是的..全屏模式不会调整大小:) [https://stackoverflow.com/a/7509285/1499064](https://stackoverflow.com/a/7509285/1499064)

如果您不使用全屏，则 adjustPan 和其他一切都可以工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:26:14.320

您可以在清单文件中尝试此操作：

```
android:windowSoftInputMode="adjustUnspecified" 
```

我在我的应用程序中有`ScrollView`它，它对我有用。我认为这也可能是默认值，`windowSoftInputMode`但我不是 100% 确定。

编辑：这是我的开头`ScrollView`，未更改。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent">
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     tools:context=".MainActivity"
     android:id="@+id/testing"> 
```

也许也可以尝试提高您的`LinearLayout`身高`match_parent`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:57:25.567

尝试将此添加到您的滚动视图中：

```
android:fillViewport="true" 
```

我认为在清单中以下设置

```
android:windowSoftInputMode="adjustResize" 
```

会做正确的工作。

# javascript - 单击 jQuery 删除或添加额外的类

> ID：15587091
> 
> 赞同：0
> 
> 时间：2013-03-23T13:02:31.497
> 
> 标签：javascript, jquery, class, html, click

我非常想通过单击 div 来切换“橙色”类中添加的额外首选项。它添加了没有任何问题的类，但我无法通过再次单击来删除它。

```
$("div.hidden").click(function(){
   $(this).addClass("orange");
});

$("div.orange").click(function(){
   $(this).removeClass("orange");
});

<div class="hidden"></div>

.hidden{
    width:100px;
    height:100px;
    float:left;
    background-color:#ccc;
    margin-bottom:5px;
    margin-right:5px;
}

.orange {background-color:#F90;} 
```

当我单击 div 框时，它变为 class="hidden orange"

正因为如此，我也尝试过

```
$("div.hidden orange").click(function(){
   $(this).removeClass("orange");
}); 
```

简单地从“橙色”中去除“隐藏的橙色”并保持原样，但它不起作用。

在现有课程之后切换课程的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:05:09.170

```
$("div").click(function(){
   $(this).toggleClass("orange");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:04:59.687

您需要检查它是否具有`orange`类并切换它。

```
var $div = $('div.hidden');
if ($('div.hidden').hasClass('orange')) {
    $div.removeClass('orange');
}
else $div.addClass('orange'); 
```

我将您的 div 分配给一个`$div`变量，所以我不会经常搜索它。

Shuping 建议的`.toggleClass()`也是一个很好的解决方案，前提是您不想运行任何其他脚本，具体取决于 是否`div`具有`orange`类。

`addClass()`：[http](http://api.jquery.com/addClass/)
`hasClass()` : //api.jquery.com/addClass/ ：http://api.jquery.com/hasClass/ ： [http](http://api.jquery.com/hasClass/)
`removeClass()` : [//api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:17:53.790

删除该类的事件处理程序不起作用的原因是它没有应用于元素。在您绑定事件时，类中没有元素`orange`，因此该事件处理程序不会绑定到任何元素。

您可以使用委托，以便您可以在元素上处理该事件，尽管它尚不存在，但您仍然需要始终防止第一个事件触发，这意味着您必须引入类似另一个类只是为了跟踪元素的状态。

如果您在单个事件处理程序中执行此操作，则可以使用类本身来跟踪状态：

```
$("div.hidden").click(function(){
  if ($(this).hasClass("orange")) {
    $(this).removeClass("orange");
  } else {
    $(this).addClass("orange");
  }
}); 
```

或者您可以使用`toggleClass`相同的方法：

```
$("div.hidden").click(function(){
  $(this).toggleClass("orange");
}); 
```

`div.hidden orange`选择器没有做任何事情的原因是因为它会匹配`<orange>`div 内的标签，而不是具有两个类的 div。为了匹配，您将使用选择器`div.hidden.orange`，但是当事件被绑定时，它仍然不会匹配任何元素，因为`orange`稍后会添加该类。

# ios - RubyMotion 重新加载 UITableView 的部分

> ID：15587095
> 
> 赞同：0
> 
> 时间：2013-03-23T13:03:35.973
> 
> 标签：ios, objective-c, rubymotion

如何重新加载表格的特定部分？

```
[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationFade] 
```

我怎样才能用 ruby​​ 的语法写出这样的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T07:32:24.203

这是RubyMotion语法：

```
sections = NSIndexSet.indexSetWithIndex(indexPath.section)
self.tableView.reloadSections sections, withRowAnimation:UITableViewRowAnimationFade 
```

# java - android注册表崩溃

> ID：15587101
> 
> 赞同：0
> 
> 时间：2013-03-23T13:04:25.247
> 
> 标签：java, android, eclipse, phpmyadmin

我在eclipse中用java编写了一个代码，可以让我在本地数据库上创建一个产品..实际上它可以工作，但是当它完成时，应用程序崩溃了，如果我去我的数据库，我可以看到创建的产品任何人都可以帮忙我在这？

```
public class MainActivity extends Activity {

// Progress Dialog
    private ProgressDialog pDialog;

    JSONParser jsonParser = new JSONParser();
    EditText inputName;
    EditText inputPrice;
    EditText inputDesc;

    // url to create new product
    private static String url_create_product = "http://10.0.2.2/android_connect/create_product.php" ;

    // JSON Node names
    private static final String TAG_SUCCESS = "success";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

 // Edit Text
        inputName = (EditText) findViewById(R.id.inputName);
        inputPrice = (EditText) findViewById(R.id.inputPrice);
        inputDesc = (EditText) findViewById(R.id.inputDesc);

        // Create button
        Button btnCreateProduct = (Button) findViewById(R.id.btnCreateProduct);

        // button click event
        btnCreateProduct.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // creating new product in background thread
                new CreateNewProduct().execute();
            }
        });

}

class CreateNewProduct extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("Creating Product..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    protected String doInBackground(String... args) {
        String name = inputName.getText().toString();
        String price = inputPrice.getText().toString();
        String description = inputDesc.getText().toString();

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("name", name));
        params.add(new BasicNameValuePair("price", price));
        params.add(new BasicNameValuePair("description", description));

        // getting JSON Object
        // Note that create product url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                "POST", params);

        // check log cat fro response
        Log.d("Create Response", json.toString());

        // check for success tag
        try {
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // successfully created product
                Toast.makeText(getBaseContext(), "Succes!", Toast.LENGTH_SHORT).show();

                // closing this screen
                finish();
            } else {
                // failed to create product
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:24:58.137

移动这条线

```
 Toast.makeText(getBaseContext(), "Succes!", Toast.LENGTH_SHORT).show(); 
```

到您的 onPostExecute() 方法。

# google-app-engine - Google App Engine - DataNucleus JPA - 一对多 - 父/子 - EntityManager.Persist - IllegalArgumentException：超出字段索引：-1

> ID：15587103
> 
> 赞同：1
> 
> 时间：2013-03-23T13:04:33.587
> 
> 标签：google-app-engine, jpa, datanucleus

我在 SO 上的第一篇文章 - 万岁！

我正在尝试使用他们的数据存储在 Google 应用引擎上创建 Java REST 服务。我已经启动并运行了该服务，并且我能够很好地存储单个实体，但是现在，我在存储具有关系的实体时遇到了麻烦。( IllegalArgumentException: out of field index :-1 - 请参阅下面的堆栈跟踪)

我花了一些时间进行挖掘，发现有几个人能够通过重新运行数据增强器来解决这个问题（[https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/Uc7fVnSqcL0](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/Uc7fVnSqcL0)）。我已经重新运行了增强器，我可以在 Eclipse 中验证它正在运行并增强了类（大概没有错误）。不幸的是，这并没有解决问题。

注意：显然 Jersey 不适用于生产中的 ASM 4.0。我不得不切换到 ASM 3.1 版，除此之外，我发现 JPA 2.0 不能与 ASM 3.1 一起使用，所以现在我只能使用 ASM 3.1 和 JPA 1.0 - 请告诉我这一切我错了。

一段时间后，我在互联网上找到了我的问题的一个非常基本的版本（包括书籍和章节），但我仍然遇到同样的错误。在我的原始项目中，我什至尝试使用 KeyFactory 生成适当的子父键，但得到了相同的错误： IllegalArgumentException: out of field index :-1

这是我的代码、堆栈跟踪和我的项目工作区的一些屏幕截图。让我知道是否还有其他我可以提交的帮助。谢谢！

```
 import java.util.ArrayList;
    import java.util.List;
    import javax.persistence.CascadeType;
    import javax.persistence.Entity;
    import javax.persistence.GeneratedValue;
    import javax.persistence.GenerationType;
    import javax.persistence.Id;
    import javax.persistence.OneToMany;

    import com.google.appengine.api.datastore.Key;

    @Entity
    public class Book {
        @Id
        @GeneratedValue(strategy=GenerationType.IDENTITY)
        private Key id;

        private String title;

        @OneToMany(mappedBy = "book", cascade = CascadeType.ALL)
        private List<Chapter> chapters = new ArrayList<Chapter>();

        public Key getId() {
            return id;
    }

    public void setId(Key id) {
        this.id = id;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public List<Chapter> getChapters() {
        return chapters;
    }

    public void setChapters(List<Chapter> chapters) {
        this.chapters = chapters;
    }
}

    @Entity
    public class Chapter {
        @Id
        @GeneratedValue(strategy=GenerationType.IDENTITY)
        private Key id;

        private String title;
        private int numPages;

        @ManyToOne(fetch = FetchType.LAZY)
        private transient Book book;

        public Key getId() {
            return id;
        }

        public void setId(Key id) {
            this.id = id;
        }

        public String getTitle() {
            return title;
        }

        public void setTitle(String title) {
            this.title = title;
        }

        public int getNumPages() {
            return numPages;
        }

        public void setNumPages(int numPages) {
            this.numPages = numPages;
        }

        public Book getBook() {
            return book;
        }

        public void setBook(Book book) {
            this.book = book;
        }
    } 
```

我的测试 REST 服务：

```
EntityManager _em = EMF.get().createEntityManager();

@GET
@Path("/ff")
@Produces(MediaType.APPLICATION_JSON)
public Response ff() {

Book b = new Book();
b.setTitle("JPA 4eva");

Chapter c1 = new Chapter();
c1.setTitle("Intro");
c1.setNumPages(10);

Chapter c2 = new Chapter();
c2.setTitle("Configuration  - aa");
c2.setNumPages(9);

b.getChapters().add(c1);
b.getChapters().add(c2);

_em.getTransaction().begin();
try {
       _em.persist(b);
       _em.getTransaction().commit();
} finally {
    if (_em.getTransaction().isActive()) {
            _em.getTransaction().rollback();
        }
    }
    Gson gson = new Gson();
    return Response.ok(gson.toJson(b), MediaType.APPLICATION_JSON).build();
} 
```

我将堆栈跟踪上传到：

[![堆栈跟踪](../Images/013ba0b8be18759998da3b96fcf3189a.png)](https://i.stack.imgur.com/1IKi3.png)

# java - 需要帮助来阅读文本文件

> ID：15587106
> 
> 赞同：1
> 
> 时间：2013-03-23T13:05:08.077
> 
> 标签：java, xml, file-io

我是 JAVA 的新手，我想读取文本文件并用 XML 编写它，这是我的输入：

1.  R.-J。Roe, J. Appl.Phys。36, 2024 (1965)。

和输出但是是：

```
 <ref id="1">
        <label>1</label>
        <citation-alternatives>
            <mixed-citation>R.-J. Roe, J. Appl.Phys. 36, 2024 (1965).</mixed-citation>
        </citation-alternatives>
    </ref> 
```

在许多情况下，此输入分为两行，它们之间没有空格，如下所示：

1.  R.-J。鱼子，

    J.应用物理。36, 2024 (1965)。

输出将是这样的：

```
 <ref id="1">
        <label>1</label>
        <citation-alternatives>
            <mixed-citation>R.-J. Roe, </mixed-citation>
        </citation-alternatives>
    </ref>

    <ref id="1">
        <label>1</label>
        <citation-alternatives>
            <mixed-citation>J. Appl.Phys. 36, 2024 (1965).</mixed-citation>
        </citation-alternatives>
    </ref> 
```

现在我的问题是我怎样才能把这两行读成一个像第一个输出一样的东西？这是我的代码：

```
try {
            String strLine;
            String num="";
            String mix="";
            DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

            // Back element
            Document doc = docBuilder.newDocument();
            Element rootElement = doc.createElement("Back");
            doc.appendChild(rootElement);

            // ref-list element
            Element reflist = doc.createElement("ref-list");
            rootElement.appendChild(reflist);

            while( (strLine = br.readLine()) != null)                   

            {                       
                if (strLine.equals("")) {
                    continue;
                }
                int dotIndex = strLine.indexOf(".");

                num = strLine.substring(0,dotIndex);
                mix = strLine.substring(dotIndex+2,strLine.length());

                // ref element
                Element ref= doc.createElement("ref");
                reflist.appendChild(ref);

                // set attribute of ref element
                Attr attr = doc.createAttribute("id");
                attr.setValue(num);
                ref.setAttributeNode(attr);

                // label element
                Element label = doc.createElement("label");
                ref.appendChild(label);
                label.setTextContent(num);

                // citation-alternatives element
                Element citationalternatives = doc.createElement("citation-alternatives");
                ref.appendChild(citationalternatives);

                // mixed-citation element
                Element mixedcitation = doc.createElement("mixed-citation");
                citationalternatives.appendChild(mixedcitation);
                mixedcitation.setTextContent(mix);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:15:05.467

在将 strLine 插入元素之前，检查是否 strLine.endsWith( "," )，如果是，则读取下一行（依此类推）并附加到第一条 strLine。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:28:32.533

您的代码`<ref>`在读取包含额外换行符的记录时创建两条记录的原因是您使用换行符来定义记录的开始时间。

您需要明确定义**记录开始的标志。**

例如，也许所有记录都以数字开头，后跟句点。也许它更可预测：它们都以序号开头，后跟一个句点。利用此逻辑，我们可以根据条件移动您创建新元素：

```
 Element ref= doc.createElement("ref");
    while( (strLine = br.readLine()) != null) {                       
        if (strLine.equals(""))
            continue;
        int dotIndex = strLine.indexOf(".");
        num = strLine.substring(0,dotIndex);
        mix = strLine.substring(dotIndex+2,strLine.length());
        if(refStart(strLine)) {
            ref= doc.createElement("ref");
            reflist.appendChild(ref);
        }
        //now decide how to parse the input - maybe it will be different depending on 
        //whether the line we just read starts a new record or continues one from
        //the previous line.
    }

    public boolean refStart(String line) {
        if(line.length()<2) 
            return false;
        int dotIndex = strLine.indexOf(".");
        if(dotIndex<=0 || dotIndex>5) //assuming largest value is 99999
            return false;
        String numString = strLine.substring(0,dotIndex);
        for(int i=0; i<numString.length(); i++) {
            if(!Character.isDigit(numString.charAt(i) )
               return false;
        }
        return true;
    } 
```

# ruby-on-rails - 在 rails 和 rspec API 上使用 mock 和 stub

> ID：15587110
> 
> 赞同：0
> 
> 时间：2013-03-23T13:05:42.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的问题更多的是一般性质。在处理不同类型的代码时，我已经对控制器进行了 rspec 测试，其中一些代码使用 rails 和 rspec API，而其他代码使用 mock 和存根，我开始思考。

> 我正在考虑使用模拟和存根而不是内置的 rails 和 rspec API 来测试控制器的优缺点是**什么**，**如果****有人**可以解释哪种方法**更好**？

 ****一般来说，他们可以做同样的事情（至少在某种程度上）。除了代码外观或使测试更具表现力之间的差异之外，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:51:33.960

如果您的问题是关于为什么要模拟和存根，那么没有简短的答案。这些任务使测试变得更加容易，因为它允许您在测试期间更好地控制软件的行为。这样，测试变得更快、更简单和更“单一”。

例如，`create`在您的控制器中的一个动作中，您可能想要在模型是否保存时测试它的行为。如果您没有存根，则需要创建两个不同的实例；一个有效，另一个无效。

```
it "redirects to message with a notice on successful save" do
  message_params = FactoryGirl.attributes_for(:message)
  post :create, message_params
  flash[:notice].should_not be_nil
  response.should redirect_to(Message.last)
end
it "renders a :new template with a notice on unsuccessful save" do
  message_params = FactoryGirl.attributes_for(:message, name: nil)
  post :create, message_params
  flash[:notice].should_not be_nil
  response.should render_template :new
end 
```

如您所见，有必要创建 ; 的两个实例`Message`。一有效一无效。我们必须使用 FactoryGirl 来创建它们。换句话说，测试不是完全统一的，因为在创建实例时可能会出现其他问题。我们真正想要测试的是：如果保存成功，它会重定向到页面 X 吗？所以我们只想确保在一种情况下`@message.valid?`返回，在另一种情况下返回。这可以使用存根轻松完成：`true``false`

```
it "should redirect to message with a notice on successful save" do
  Message.any_instance.stubs(:valid?).returns(true)
  post 'create'
  flash[:notice].should_not be_nil
  response.should redirect_to(Batch.last)
end
it "should render new template with a notice on unsuccessful save" do
  Message.any_instance.stubs(:valid?).returns(false)
  post 'create'
  flash[:notice].should be_nil
  response.should render_template('new')
end 
```

因此，在这种情况下，测试要轻松得多，因为我们不必创建对象的实例，我们只需对方法进行存根以返回我们希望它返回的内容。使用它还有许多其他原因，您可以阅读更多关于模拟和存根的信息。

但是，如果您的问题是使用 Rspec 的内置模拟和存根功能，或者使用外部 gem，例如 Mocha，那么答案会更短：今天，我相信更多的是个人喜好。过去，像 Mocha 这样的框架有 Rspec 所没有的特性，比如`any_instance`上面使用的方法。但是 Rspec 不断发展，今天它和其他产品一样好。****

# php - 检索在值字符串 php 和 jquery 之间带有空格的选择下拉值

> ID：15587112
> 
> 赞同：0
> 
> 时间：2013-03-23T13:05:50.527
> 
> 标签：php, jquery, select, drop-down-menu, default-value

目前我有一个工作选择下拉菜单，它有一个 on-change 事件来操作某个 div 内的数据。

它可以按我的意愿工作，但是我无法检索中间有空格以返回任何内容的值。我知道并且我已经检查过该值是否将正确的数据存储到数据库中，但它根本不起作用。

我也在网上搜索过，我的代码似乎一切都很好，但这很奇怪。

我的问题：如何从数据库中检索在文本字符串之间有空格的选择下拉值属性？

下面是我的代码：

头文件.php

```
<select id="category" class="selectDropDown">
                    <option>Select Category...</option>
                    <option value="All Categories">All Categories</option>
                    <option value="Financial">Financial</option>
                    <option value="Administration">Business And Administration</option>
                    <option value="Care">Care</option>
                    <option value="Construction">Construction</option>
                    <option value="Creative">Creative</option> 
```

等等。问题在于所有类别的值。

```
category.php

include('config.php');

$category = $_REQUEST['category'];

$query = "SELECT * FROM podContent WHERE category = '$category'";

$result = mysql_query( $query, $con ); 
```

非常感谢任何帮助，这可能是一个简单的解决方案，但我已经看了好几个小时了。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:11:39.680

您必须使用 的`name`属性，而`select`不是`id`属性。在您的情况下，您应该将 HTML 更改为

```
<select id="category" name="category" class="selectDropDown">
    ...
</select> 
```

# c++ - MinGW 在编译多源程序文件时是否创建目标文件？

> ID：15587123
> 
> 赞同：1
> 
> 时间：2013-03-23T13:06:51.467
> 
> 标签：c++, c, mingw

听说在 Linux 上用 gcc 编译多源文件时，gcc 会为每个源代码文件创建目标文件 *.o，所以只更改一个文件时不需要重新编译所有文件。我在 Win7 x64 上使用 MinGW，而 MinGW 不创建任何目标文件。

主程序

```
//main.c
#include "header.h"
int main(void)
{
    Message();
    return 0;
} 
```

来源.c

```
//source.c
#include <stdio.h>
#include "header.h"

void Message()
{
    printf("Hello World...\n");
} 
```

头文件.h

```
//header.h
#ifndef HEADER_H
#define HEADER_H

#include <stdio.h>

void Message(void);

#endif 
```

如果我将这些文件放在桌面上并使用命令编译：`gcc main.c source.c -o program` 我只会得到 program.exe，而不是任何 .obj 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:09:33.087

是`MinGW`的，确实保存临时文件。临时文件的路径将等于`%TEMP%`您机器中的变量。也可以通过这个命令查看临时文件

```
gcc -o example.out source.c main.c --save-temps 
```

**编辑**

更正一处错字。路径将是`%TEMP%`而不是`PATH`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T23:49:09.973

在这方面，GCC 在 Linux 上的行为与 Windows 上的 MinGW 相同。

您可以明确告诉 gcc 生成目标文件以供以后链接：

```
gcc -c main.c source.c          # compile to object files
gcc -o program main.o source.o  # link the object files and produce an executable 
```

# python - Sphinx 从脚本中获取文档字符串

> ID：15587125
> 
> 赞同：2
> 
> 时间：2013-03-23T13:07:01.280
> 
> 标签：python, package, python-sphinx

我有经典的 Python 包结构：

```
bin/
    my_script
docs/
my_package/
   ... 
```

我用 Sphinx 创建文档。

我想`my_script`自动获取文档字符串。有什么办法吗？

为什么要我这样做？我在这个脚本中有使用信息，我想在文档中显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:29:28.413

我的解决方案 - 我认为这不是最好的。

我`__init__.py`在 bin 目录中创建并符号链接`my_script.py`到`my_script`. 进入`conf.py`（狮身人面像的配置）我添加：

```
sys.path.insert(0, os.path.abspath('..')) 
```

现在我可以使用自动模块：

```
.. automodule:: bin.my_script 
```

# django - 努力以编程方式更新我的 Django 表单字段小部件中的类属性

> ID：15587129
> 
> 赞同：0
> 
> 时间：2013-03-23T13:07:34.547
> 
> 标签：django, django-forms

我无法遍历表单中的字段并更新字段小部件中的类属性。这是我的循环：

```
for field in form:
    try:
        field.widget.attrs['class'] += " invalid"
    except:
        pass 
```

我一生都无法弄清楚为什么。我认为这将是访问字段小部件的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:37:29.260

尝试这个：

```
for field in form:
    try:
        field.field.widget.attrs['class'] = (field.field.widget.attr.get('class') or '') + " invalid"
    except Exception as e:
        print e 
```

问题 在于，如果密钥不存在 `field.field.widget.attrs['class'] += " invalid"` ，它将引发密钥错误，因为它会执行类似的操作`class``field.field.widget.attrs['class'] = field.field.widget.attrs['class'] + " invalid"`

# birt - 在 BIRT 中对值进行单列求和

> ID：15587130
> 
> 赞同：5
> 
> 时间：2013-03-23T13:07:48.217
> 
> 标签：birt

我这里有问题。

我正在使用 BIRT 制作发票模板。我有一个表格列数量，单价和数量（单价*数量）。在表尾，我想计算总金额，例如 excel 如何计算其列值的总和。我该怎么做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-04T16:23:01.170

在表格页脚中，添加一个数据。然后，在数据绑定中，在表达式上：

`Total.sum(dataSetRow["yourRow"])`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-11T08:12:10.690

首先，从您想要总和的调色板中将数据元素插入网格中。然后右键单击报告中的该数据元素并单击“更改数据列”选择具有“数量”和“单位成本”等列的数据集，然后单击此选择数据类型浮点数和函数总和中的添加聚合并添加表达式您想要总和的哪个数据行（列名）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:32:04.203

大多数报告工具都允许您从工具栏中执行此操作。

在您的报告中选择金​​额列并查找总计/总和/聚合工具栏图标，它应该会为您执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-06T14:27:36.933

您可以添加一个`Dynamic Text`元素。

然后在表达式生成器中选择要汇总的行：

[![求和截图](../Images/0ec4b34e9a4a21f4f5c80d435aa58c75.png)](https://i.stack.imgur.com/CrNci.png)

# php - 自动注册 Laravel 4 中的所有控制器

> ID：15587146
> 
> 赞同：4
> 
> 时间：2013-03-23T13:10:08.340
> 
> 标签：php, laravel, laravel-4

在 L4 中，是否有 L3 的等价物`Route::controller(Controller::detect());`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:44:47.473

我认为没有等价物，但注册控制器很容易：

```
Route::controller('users', 'UserController'); 
```

> 控制器方法接受两个参数。第一个是控制器处理的基本 URI，而第二个是控制器的类名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T14:44:19.483

这很可能不会在 laravel 4 中实现，原因是自动加载所有控制器被设计破坏了。在 laravel 中，定义控制器的顺序很重要，这意味着自动加载所有控制器可能会破坏您的应用程序。

# ios - 有什么我不应该保存在 NSUserDefaults 中的吗

> ID：15587149
> 
> 赞同：4
> 
> 时间：2013-03-23T13:10:26.073
> 
> 标签：ios, objective-c, nsuserdefaults, rubymotion

我刚刚开始使用 RubyMotion，据我所知，它建议将 NSUserDefaults 用于数据存储。这对我来说似乎有点奇怪，因为它的名字暗示它应该只用于存储配置变量等而不是对象。

可以将我的对象（例如用户、公司、任务等）存储在 NSUserDefaults 中还是应该使用其他方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T13:15:55.627

用户默认值通常可以存储少量不需要加密的数据。大数据或可能随时间增长的数据应该进入文件系统或核心数据。任何需要保密的东西（例如密码）都必须进入[keychain](https://developer.apple.com/library/ios/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)。

这是[一个答案，其中包含有关如何为您的应用选择存储模型的建议](https://stackoverflow.com/a/10245064/335858)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T13:15:19.587

`NSUserDefaults`应该用于保存应用程序的用户首选项。它*不是*一般的数据存储。[NSUserDefaults 类参考](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)声明：

> 默认系统允许应用程序自定义其行为以匹配用户的偏好。例如，您可以允许用户确定应用程序显示的度量单位或自动保存文档的频率。

因此，如果您的应用程序管理用户、公司和任务，则不要使用`NSUserDefaults`它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T13:15:32.717

**NSUserDefaults**类提供了方便的方法来访问常见类型，例如`floats`、`doubles`、`integers`、`Booleans`和`URLs`。

默认对象必须是属性列表，即（或集合的实例组合）的实例：`NSData`、`NSString`、`NSNumber`、`NSDate`、`NSArray`或`NSDictionary`。

如果要存储任何其他类型的对象，通常应将其归档以创建`NSData`.

有关更多详细信息，请参阅[NSUserDefaults 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T13:15:10.013

[请参阅https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/UserDefaults/AboutPreferenceDomains/AboutPreferenceDomains.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/UserDefaults/AboutPreferenceDomains/AboutPreferenceDomains.html)上的指南

问题与 RubyMotion 无关，而与 Cocoa touch 无关。

通常，用户默认设置只是用户的偏好设置，仅此而已。不要在那里存储需要保护的数据。请勿存储偏好设置以外的数据。保持小。

这不是存储其他东西（例如您的对象）的合适位置。

# wcf - 使用 phonegap 使用 wcf 服务

> ID：15587150
> 
> 赞同：0
> 
> 时间：2013-03-23T13:10:26.773
> 
> 标签：wcf, cordova

我创建了一个 wcf 服务和一个 phonegap 应用程序来使用 wcf 服务。当我使用 IIS 部署 Mywcf 服务时，它不会进行调试，但它是使用“Visual Studio 开发服务器”运行的。当我运行 phonegap 应用程序成功功能时，数据显示“未定义”，然后显示错误消息。我的phonegap代码如下：

```
$(document).ready(function () {
$.getJSON("http://localhost:20999/MobileService.svc/GetProductCategories", {
beforeSend: function (xhr) {
},complete: function () {
$.mobile.hidePageLoadingMsg();},
contentType: "application/json; charset=utf-8",
dataType: 'json',
type: 'GET',
success: function (data) {
    alert("success");
    alert("Exito " + JSON.stringify(data));  },
error: function () {
alert('Something awful happened');
}});}); 
```

什么问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:08:10.063

For your success function try.

```
alert("Exito " + JSON.stringify(data[0]));  }, 
```

You may have to post code of your WCF service and set up the service to run through IIS instead of the port. It looks like the service is trying to return an object that you're not identifying with the data value.

Usually you have to do something like

```
alert("Exito " + JSON.stringify(data.[Object Name]));  }, 
```

# python-2.7 - 连续向子进程发送数据

> ID：15587155
> 
> 赞同：3
> 
> 时间：2013-03-23T13:10:42.703
> 
> 标签：python-2.7, subprocess, inter-process-communicat

我正在测试与子进程的通信。我必须启动一个服务器，定期发送数据。最终目标是获取气象数据的进程和绘图服务器。采样率是数量级或分钟....我编写了这两个代码片段以了解python中ipc的基础知识，但我什至无法使它们工作。同步性不是问题。

主要流程

```
import sys, time
from subprocess import Popen, PIPE

print 'starting'
proc = Popen (['python.exe',
    'C:\Documents and Settings\Administrator\Desktop\sub.py'], 
                stdin = PIPE, stdout = PIPE)
print 'launched'

w = 0
while True:
    w += 1 
    time.sleep (2)
    print 'writing', w
    proc.stdin.write (repr(w))
    proc.stdin.flush()
    print proc.stdout.read() 
```

子流程：

```
import sys, time

print 'reading'
v = 0
while True:
    v = sys.stdin.read()
    sys.stdout.write('ACK')
    sys.stdout.flush ()
    time.sleep (4) 
```

主进程正在阻塞，显然子进程没有读取 - 发送 ACK。我哪里错了？？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:47:10.207

对块的调用`sys.stdin.read()`，因为它试图读取*整个*流，因此在流关闭之前它不能返回。

在使用（在两个进程中）编写时尝试使用`sys.stdin.readline()`并添加换行符`sys.stdout.write()`，例如`sys.stdout.write('ACK\n')`. 这应该确保读取命令只会阻塞，直到读取一行。

# layout - Primefaces Layout 自行调整大小并在调整浏览器窗口大小后显示滚动条

> ID：15587160
> 
> 赞同：1
> 
> 时间：2013-03-23T13:11:17.540
> 
> 标签：layout, primefaces

每当我重新调整浏览器的大小时，`Layout`内部都会自行重新调整大小并显示滚动条。

这可以避免吗？

Primefaces 版本 3.0 至 3.5

![在此处输入图像描述](../Images/5a17e5e66df1deef2b4077fd0efc6bf5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:56:19.357

解决了这个问题。设置`fullPage`= `true`。

```
<p:layout id="layout" fullPage="true"> 
```

# java - VisualVM 和 Java 5

> ID：15587161
> 
> 赞同：2
> 
> 时间：2013-03-23T13:11:19.623
> 
> 标签：java, profiling

至于这个[VisualVM 功能](http://visualvm.java.net/features.html) *，“VisualVM 在 Oracle/Sun JDK 6 上运行，但能够监控在 JDK 1.4 及更高版本上运行的应用程序”*。

我想要做的是监控在 JDK5 下运行的 JBoss 4.2 应用程序。我想我可以做一些事情，比如使用运行 Java 6 的机器并尝试远程监控我的 Java 5 应用程序，但我的问题是：有没有办法让 VisualVM 在 Java 5 虚拟机下运行？

# jquery - 嵌入轮播时不显示推特提要

> ID：15587163
> 
> 赞同：1
> 
> 时间：2013-03-23T13:11:23.710
> 
> 标签：jquery, twitter, carousel

我在这里遇到了一个很奇怪的问题。我创建了一个无限轮播，不断滚动浏览 3 个列表项。在第一个列表项中，我嵌入了一个 twitter 小部件。然而，这似乎没有加载，而是它只是说“tweets by ...”

更奇怪的是，当我滚动浏览我的轮播时，它到达了 twitter 小部件返回的位置，它现在正在工作。因此，当页面加载时它不起作用，但是一旦我浏览了轮播中的所有列表项，它就会起作用。

任何人都可以建议为什么会发生这种情况，甚至可以解决它。网站在这里，您可以看到问题： http: [//www.samskirrow.com/client-bionic](http://www.samskirrow.com/client-bionic)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:09:02.427

它在 Mac 上的 Firefox 中对我有用，但问题可能是在其他浏览器中，直到 twitter carosel iframe 项目可见时才会调用 twitter。在页面加载时，该项目不会呈现，因此此时可能不会进行调用，因为没有必要加载页面。

甜蜜的网站虽然:)

# java - SimpleAsyncTaskExecutor 在处理完成后尝试读取记录

> ID：15587166
> 
> 赞同：1
> 
> 时间：2013-03-23T13:11:44.007
> 
> 标签：java, spring, jdbc, spring-batch

在我的 spring 批处理项目中，我需要从表中读取行列表，创建一个 4 的块并进行处理，然后写入另一个表。我已经实现了 SimpleAsyncTaskExecutor 以允许并行处理块，但我发现在处理记录集中的所有记录之后，Spring Batch 正在尝试继续读取下一批结果并失败。在它超过跳过级别后，它显然会中止工作。

我的查询是 - 为什么在处理完集合中的所有记录后，批处理会继续寻找下一条记录？

我最后得到的错误是：

> org.springframework.batch.core.step.item.FaultTolerantChunkProvider - 跳过失败的输入 org.springframework.jdbc.UncategorizedSQLException：尝试处理下一行失败；SQL 的未分类 SQLException

下面是我的批处理 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/batch"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.1.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

    <beans:import resource="../launch-context.xml" />

    <beans:bean id="wsStudentItemReader"
        class="org.springframework.batch.item.database.JdbcCursorItemReader"    
        scope="step">
        <beans:property name="dataSource" ref="rptDS" />
        <beans:property name="sql"
            value="SELECT * FROM STUDENTS WHERE BATCH_ID=?" />
        <beans:property name="preparedStatementSetter">
            <beans:bean class="com.test.BatchDtSetter"
                autowire="byName">
                <beans:property name="batchId" value="#{jobParameters[batchId]}" /> 
            </beans:bean>
        </beans:property>
        <beans:property name="rowMapper" ref="wsRowMapper" />
    </beans:bean>

 <beans:bean id="outputWriter"
        class="org.springframework.batch.item.support.ClassifierCompositeItemWriter">
        <beans:property name="classifier" ref="writerClassifier" >      
        </beans:property>       
 </beans:bean>  

<beans:bean id="writerClassifier"
    class="com.test.WriterClassifier">
    <beans:property name="codeFailWriter" ref="failJdbcBatchItemWriter" />
    <beans:property name="codePassWriter" ref="passJdbcBatchItemWriter"></beans:property>
</beans:bean>

    <beans:bean id="failJdbcBatchItemWriter"
        class="org.springframework.batch.item.database.JdbcBatchItemWriter">
        <beans:property name="dataSource" ref="rptDS" />
        <beans:property name="sql"
            value="DELETE FROM STUDENTS WHERE BATCH_ID=?" />
        <beans:property name="itemPreparedStatementSetter" ref="FailStatusSetter" />
    </beans:bean>

<beans:bean id="FailStatusSetter" class="com.test.FailStatusSetter" />

    <beans:bean id="passJdbcBatchItemWriter"
        class="com.test.PassBatchItemWriter">
    </beans:bean>

    <beans:bean id="WSListnr"
        class="com.test.WSBatchListnr">
        <beans:property name="dataSource" ref="rptDS" />
    </beans:bean>

    <beans:bean id="wsRowMapper" class="com.test.WSReqMapper" />
    <beans:bean id="wsReqPrcsr" 
         class="com.test.WSReqProc">
         <beans:property name="dataSource" ref="rptDS" />
    </beans:bean>
    <beans:bean id="wsReqPrepStmtSetter" class="com.test.wsStudentSetter" />

    <step id="initiateStep">
        <tasklet ref="initiateStepTask" />
    </step>
    <step id="wsStudentGenStep">
        <tasklet task-executor="taskExecutor">
            <chunk reader="wsStudentItemReader" processor="wsReqPrcsr"
                writer="outputWriter" commit-interval="4" skip-limit="20">
                <skippable-exception-classes>
                    <include class="java.lang.Exception" />
                </skippable-exception-classes>
            </chunk>
            <listeners> 
                <listener ref="WSListnr" />
            </listeners>            
        </tasklet>
    </step>
    <job id="wsStudent">
        <step id="wsStudentFileGenIntialStep" parent="initiateStep"
            next="wsStudentFileGenStep" />
        <step id="wsStudentFileGenStep" parent="wsStudentGenStep" />
    </job>

    <beans:bean id="initiateStepTask" class="com.test.Initializer"
        scope="step">
    </beans:bean>

    <beans:bean id="taskExecutor"
       class="org.springframework.core.task.SimpleAsyncTaskExecutor">
       <beans:property name="concurrencyLimit" value="2"/>
   </beans:bean>

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T14:01:20.280

该问题已通过使用 JdbcPagingItemReader 得到解决。此读取器将同步读取，并且还需要按特定列对数据进行排序。

# neo4j - 从 neo4j 数据库中提取子图

> ID：15587173
> 
> 赞同：1
> 
> 时间：2013-03-23T13:12:32.380
> 
> 标签：neo4j, subgraph

我在 neo4j 数据库中有一个图表。我想提取给定特定节点和特定深度的子图。
我尝试使用遍历框架，但它只返回一组路径。它提供了到达特定深度的路径。如何根据获得的路径集构建子图？有没有其他方法可以获得所需的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:31:06.930

如果通过子图，您的意思是节点列表，并且您已经从遍历中获得了 Path 对象，您可以只收集列表中每个路径的结束节点。

# java - 树的递归和非递归遍历

> ID：15587177
> 
> 赞同：0
> 
> 时间：2013-03-23T13:13:09.597
> 
> 标签：java, data-structures

通过在二叉搜索树上执行递归和非递归前序遍历，我**没有得到相同的结果**

*递归法*

```
public static void preorder(TreeNode root) {
    if (root == null)
        return;
    else {
        System.out.print(root);
        inorder(root.getLeftPtr());
        inorder(root.getRightPtr());
    }
} 
```

*非递归方法*

```
public static void preorder2(TreeNode root){
    if(root==null)return;
    Stack<TreeNode> stack=new Stack<TreeNode>();

    while(true){
        while(root!=null){
            //process current Node
            System.out.print(root);
            stack.push(root);
            root=root.getLeftPtr();
        }
        if(stack.isEmpty())break;
        root=stack.pop();
        root=root.getRightPtr();
    }

} 
```

*结果*

```
 recursive method-> 10-> 5-> 6-> 8-> 12-> 15-> 20
  non recursive method-> 10-> 6-> 5-> 8-> 15-> 12-> 20 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T13:20:13.313

我认为你的递归方法应该是这样的，

```
public static void preorder(TreeNode root) {
    if (root == null)
        return;
    else {
        System.out.print(root);
        preorder(root.getLeftPtr());
        preorder(root.getRightPtr());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T16:23:47.170

Java中的前序树遍历非递归实现：

```
public static void preTraverseNoRec(Node root){
    Stack<Node> stack = new Stack<eNode>();
    stack.push(root);
    while(stack.size()!=0) {
        Node node = stack.pop();
        System.out.println(node.data);
        if(node.right != null) stack.push(node.right);
        if(node.left != null) stack.push(node.left);
    }
} 
```

节点定义为：

```
public class Node {
    int data;
    Node left, right, nextRight;

    Node(int item)
    {
        data = item;
        left = right = nextRight = null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T23:17:57.023

这是前序树遍历非递归实现

```
public void preorderDisplay(Node root) {
    Node current = root;
    LinkedList<Node> stack = new LinkedList<>();
    while (true) {
        if (current != null) {
            stack.push(current);
            System.out.print(current.data + " ");
            current = current.left;
        } else if (!stack.isEmpty()) {
            current = stack.poll();
            current = current.right;
        } else {
            break;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-25T13:36:52.213

**#简化**

```
public static void preorder(TreeNode root) {
    if (root != null) {
        System.out.print(root);
        preorder(root.getLeftPtr());
        preorder(root.getRightPtr());
    }
} 
```

[http://www.geeksforgeeks.org/tree-traversals-inorder-preorder-and-postorder/](http://www.geeksforgeeks.org/tree-traversals-inorder-preorder-and-postorder/)

# jquery - 将 JSON 数组转换为 java 列表 使用 Spring MVC

> ID：15587179
> 
> 赞同：3
> 
> 时间：2013-03-23T13:13:28.117
> 
> 标签：jquery, json, spring-mvc

我的 javascript 代码中有一个字符串列表，我通过 JQuery 将其发送到基于 REST 的服务，如下所示：

```
var ids = []; 
$("input:checked").each(function() {
    ids.push(this.id);
});
var selectedIds = JSON.stringify(ids);
$.post("/todonotes/tasks/removeTask", selectedIds,function(e) {
}, "json"); 
```

如您所见，我将 javascript 数组转换为 JSON 数组。

现在，在服务器端，我使用 Spring MVC 和 Jackson 来接收和解析输入 JSON：

```
@RequestMapping(value="/tasks/removeTask", method = RequestMethod.POST)
public @ResponseBody String removeTask(@RequestBody List<String> selectedIds) {
    ...
} 
```

但我总是得到：

```
HTTP Status 415 - 

--------------------------------------------------------------------------------

type Status report message 

description The server refused this request because the request entity is in a format     not supported by the requested resource for the requested method. 
```

我试图从 JSON 对象中删除引号，也尝试使用`@RequestParam`但没有成功。

根据 OQJF 建议更新：

我修改了我的帖子请求如下：

```
$.post("/todonotes/tasks/removeTask", {selectedIds: selectedIds},function(e) {  
}, "json"); 
```

现在我的控制器方法被调用，但每个`List`元素都填充了双引号和括号。这是 List 参数：

```
[["15", "21"]] 
```

所以例如第一个元素看起来像：

```
["15" 
```

我宁愿不`String`解析`List`.

我也尝试删除`JSON.stringify`转换，但我的控制器甚至没有被调用。有了这个我得到：

```
HTTP Status 400 - Required List parameter 'selectedIds' is not present

--------------------------------------------------------------------------------

type Status report

message Required List parameter 'selectedIds' is not present

description The request sent by the client was syntactically incorrect. 
```

**更新**

我试图创建一个对象来保存我的 id，如下所示：

```
public class TaskIdHolder {

    private String[] selectedIds;

    public String[] getSelectedIds() {
        return selectedIds;
    }

    public void setSelectedIds(String[] selectedIds) {
        this.selectedIds = selectedIds;
    }
} 
```

然后我修改了我的控制器方法签名：

```
public @ResponseBody String removeTask(@RequestBody TaskIdHolder selectedIds) { 
```

我的 JSON 请求如下所示：

```
{"selectedIds":["15"]} 
```

我还按照 Andrei 的建议修改了我的 Jquery 代码：

```
var data = JSON.stringify({selectedIds:selectedIds});
$.post("/todonotes/tasks/removeTask", data, function(e) { 
```

其中 selectedIds 是一个 JavaScript 数组。

但现在我得到：

```
POST http://localhost:8080/todonotes/tasks/removeTask 415 (Unsupported Media Type) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T13:25:07.590

据我所知，您不需要使用`JSON.stringify(),`您的代码可以是这样的：

```
var ids = []; 
$("input:checked").each(function() {
    ids.push(this.id);
});

$.post("/todonotes/tasks/removeTask", $.param({'id': ids}, true),function(e) {
}, "json"); 
```

在服务器端，您应该指定以下值：

```
public methodName(@RequestParam("id") List<String> selectedIds) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-28T22:03:58.897

尝试以下操作，无需更改控制器的方法签名或创建对象来保存您的 id。

```
$.post("/todonotes/tasks/removeTask", {selectedIds: selectedIds.join(',')},function(e) {  
}, "json"); 
```

这样，如果您将请求参数声明为or （适用于这两种情况），您将发送您的 id `selectedIds: id1,id2,id3`，这就是控制器期望它们的方式。`String[]``List<String>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T13:18:26.950

尝试给请求参数一个明确的名称：

```
$.post("/todonotes/tasks/removeTask", {selectedIds: selectedIds},... 
```

**更新**。您还可以尝试将整个请求数据对象字符串化为 JSON：

```
var data = {selectedIds: selectedIds};
$.post("/todonotes/tasks/removeTask", JSON.stringify(data),... 
```

# c# - 从返回的 JSON 字符串中提取数据（C#、WinForms）

> ID：15587183
> 
> 赞同：0
> 
> 时间：2013-03-23T13:13:34.833
> 
> 标签：c#, json, winforms, google-maps

我正在尝试使用 Google Mapping API 使用邮政编码获取地址。到目前为止，我可以从响应中获取 JSON 数据并将其存储在“var”中。

但是，我无法将街道、城镇和县等字段提取到理想情况下，将它们分别提取为单独的字符串变量。

到目前为止，这是我的代码。

```
string postcode = Convert.ToString(tbPostcode.Text);

string searchCode = "http://maps.googleapis.com/maps/api/geocode/json?address=" + postcode + "&sensor=false";
var result = "";

var httpWebRequest = (HttpWebRequest)WebRequest.Create(searchCode);
httpWebRequest.ContentType = "text/json";
httpWebRequest.Method = "POST";

using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
{
    streamWriter.Write("");
    streamWriter.Flush();
    streamWriter.Close();

    var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();

    using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
    {
        result = streamReader.ReadToEnd();
    }
}

MessageBox.Show(result); 
```

希望有人能帮忙，谢谢！

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:17:50.693

看看类似的东西

[如何：序列化和反序列化 JSON 数据](http://msdn.microsoft.com/en-us/library/bb412179%28v=vs.100%29.aspx)

它利用了[DataContractJsonSerializer 类](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer%28v=vs.100%29.aspx)

> 将对象序列化为 JavaScript 对象表示法 (JSON) 并将 JSON 数据反序列化为对象。

这应该可以帮助您创建所需的 tyhe C# 类

[json2csharp : 从 json 生成 c# 类](http://json2csharp.com/)

# java - 定位器响应

> ID：15587184
> 
> 赞同：1
> 
> 时间：2013-03-23T13:13:34.667
> 
> 标签：java, android, eclipse, gps, location

我使用此代码查找我的位置（纬度和经度），但此代码有时会
快速响应（几秒钟），有时延迟超过 10 分钟。问题在哪里？

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        LocationManager locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10L,
                5.0f, locationListener);
    }

    private void updateWithNewLocation(Location location) {
        TextView myLocationText = (TextView) findViewById(R.id.text);
        String latLongString = "";
        if (location != null) {
            double lat = location.getLatitude();
            double lng = location.getLongitude();
            latLongString = "Lat:" + lat + "\nLong:" + lng;

        } else {
            latLongString = "No location found";
        }
        myLocationText.setText("Your Current Position is:\n" + latLongString);
    }

    private final LocationListener locationListener = new LocationListener() {

        @Override
        public void onLocationChanged(Location location) {
            updateWithNewLocation(location);
        }

        @Override
        public void onProviderDisabled(String provider) {
            updateWithNewLocation(null);
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:24:01.367

您正在使用 GPS_PROVIDER 获取位置。

GPS->此提供商使用卫星确定位置。根据具体情况，此提供程序可能需要一段时间才能返回位置修复并给出大约 20 英尺的准确结果。

您可以使用的另一个提供程序是 NETWORK_PROVIDER。该提供商根据蜂窝塔和 WiFi 接入点的可用性确定位置，并给出大约 200 英尺的准确结果，并且它消耗的内存比 GPS_PROVIDER 少。将此权限用于 NETWORK_PROVIDER

```
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

# image - 有人能用opencv 2.4.3打开这个jpg吗？

> ID：15587185
> 
> 赞同：1
> 
> 时间：2013-03-23T13:13:35.463
> 
> 标签：image, opencv, loadimage

我在使用 OpenCV-2.4.3 函数 imread、cvLoadImage 和 cvLoadImageM 打开这张图片时遇到问题。它总是返回一个空的 Mat 或 IplImagepointer。许多其他 jpg.s 正在工作，但不是这个，但我可以用 gimp 或 Gwenview 等其他查看器打开它。

我正在使用 Qt Creator 和 OpenSuse 12.2。谢谢你。

PS：在我展示图片之前，我需要一些声誉。有没有其他的加载方式？我是新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:33:34.570

不，但在我将其重命名为“Wappen_Erfurt_Gross.jpg”后，工作正常。问题在于非 ASCII 字符。

# javascript - 绝对位置下方的悬停效果

> ID：15587189
> 
> 赞同：0
> 
> 时间：2013-03-23T13:13:56.160
> 
> 标签：javascript, css

我的问题中包含三个标签。

1.  围绕我的图像并相对定位的包装器 div。
2.  绝对定位的锚标记，宽度和高度为 100%。这样，用户可以单击图像上的任意位置以转到其 url，或者能够右键单击并在新选项卡中打开。
3.  最后是图像标签。

我的目标是在用户将鼠标悬停在图像上时为图像添加效果。正如您在`onmousover`警报属性中看到的那样，唯一的问题是当您悬停图像时，只会触发悬停在锚标记上。所以我猜我需要以某种方式将我的 onmouseover 传播到图像上？我很茫然，任何帮助将不胜感激。哦，请避免使用任何框架（jquery、原型），请只使用 js 和 css。非常感谢。

```
<div class="boardPostImage">
    <a href="image?id=${image.id}" class="boardPostImageAnchor"></a>
    <img alt="${boardPost.content}" src="${initParam.imageCropMedium}${image.id}.jpg" onmouseover="alert('hello')" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:31:27.907

如果您坚持将锚点与图像分开，则可以。

JavaScript 解决方案：

```
function HoverOverImage()
{
    alert("Hello");
}

function HoverOverAnchor()
{
   //Do the stuff you want
   //Execute the other function
   HoverOverImage();
}

<a href="image?id=${image.id}" class="boardPostImageAnchor" onmouseover="HoverOverAnchor()"></a> 
```

jQuery解决方案：

```
$("img").mouseover(function(){
        alert("Hello");
});

$("a").mouseover(function(){
        $("img").mouseover();
}); 
```

# javascript - 我相信这个游戏使用 websocket 但我的 WebSocket 覆盖不起作用？

> ID：15587192
> 
> 赞同：2
> 
> 时间：2013-03-23T13:14:32.637
> 
> 标签：javascript, flash, google-chrome, websocket, greasemonkey

许多流行的网页游戏都是用 Flash 创建的。我相当肯定他们也利用 websockets 来完成诸如聊天和持续更新之类的任务。有问题的游戏是亚特兰蒂斯之龙，虽然我真的希望能够对他们所有人都这样做。该游戏同时使用 XMLHTTPRequests 进行操作，我相信我在此处的 flash 参数中找到的 websocket：

```
 <object id="castlemania_swf" width="760" height="800" type="application/x-shockwave-flash" data="https://s3-external-1.amazonaws.com/castlemania-production/flash/game/current/preloader.swf?cachebreaker=23423423429">
<param name="allowScriptAccess" value="always">
<param name="allowFullScreen" value="true">
<param name="wmode" value="opaque">
<param name="flashvars" value="session_id=fjdkfjal2j3j2lkj232&locale=en&api_server=http://realm193.c10.castle.wonderhill.com/api&pub_server=c10.castle.wonderhill.com&pub_port=7000&user_id=89234787492&user_hash=242343234242342432342343424232&user_time=1344028407&dragon_heart=234343242432432432432342432&platform=yahoofb&subnetwork=&s3_server=https://s3-external-1.amazonaws.com/castlemania-production&s3_swf_prefix=/flash/game/current&assets_server=https://assets-castle.wonderhill.com&assets_prefix=/flash/gam...ode_is_cdn=false&preloader_cachebreaker=243234432423&primary_ui_cachebreaker=23432432&secondary_ui_cachebreaker=24322432423&i18n_cachebreaker=2432423342432&manifest_cachebreaker=24342423423&building_cachebreaker=23423423342&sound_cachebreaker=2432423342423&client_cachebreaker=2432423342423&lazy_loaded_swf_cachebreaker=2432432423&map_bin_cachebreaker=24342323&assets_cachebreaker=2432432423_2423423423.24323423&statics_translations_cachebreaker=20130305_213355.49364792&statics_manifests_cachebreaker=243223423234_213429.42776785"> 
```

所以你不必在这里搜索是我感兴趣的参数

```
 api_server=http://realm193.c10.castle.wonderhill.com/api&pub_server=c10.castle.wonderhill.com&pub_port=7000 
```

在尝试使用 Chrome 并且没有看到浏览器开发人员工具嗅探 WebSocket 并覆盖 WebSocket 的证据后，我正在使用greasemonkey 和 firefox

```
 (function(){
var proxied=window.WebSocket.prototype.send;
window.WebSocket.prototype.send=function(){
    alert(arguments[0]);
    return proxied.apply(this,[].slice.call(arguments));
};
    })(); 
```

尽管它确实适用于所有基于 html5 的应用程序，但仍然没有运气。闪存是否绕过浏览器，这就是 Chrome/Firefox/Javascript 不接收 websocket 调用的原因。 **有没有办法使用 flash 使用的 websockets？** 我的目标不仅是嗅探流量，而且以有意义的方式使用它，因此仅查看流量是不够的。谢谢你的帮助！！

（我知道 websockets 的一个流行答案是使用 Chrome，但在这种情况下，它根本不适用于默认的 Chrome，谢谢！）

# vim - 如何在 vi 映射中使用插件？

> ID：15587193
> 
> 赞同：0
> 
> 时间：2013-03-23T13:14:34.757
> 
> 标签：vim, vim-plugin

我正在使用 Tim Pope 的[vim-commentary](https://github.com/tpope/vim-commentary)插件，通过病原体加载。

现在我想`<leader>yyp`复制一行代码，把原来的注释掉。我可以`yypkgccj`在正常模式下使用命令执行此操作（`gcc`vim-commentary 默认注释掉当前行）所以我在我的 .vimrc 中尝试了这个映射：

```
nnoremap <leader>yyp yypkgccj 
```

不工作。然而，这

```
nnoremap <leader>yyp yypk:normal gcc<cr>j 
```

作品。

这种行为与 OSX 和 Linux 上的 vim 以及 OSX 上的 mvim 和 Linux 上的 gvim 相同。有人知道为什么我必须`:normal`在映射中使用该命令吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T13:34:55.423

如果`gcc`已映射，您想在新映射中重用它，在这种情况下，您可以尝试：（不带`nore`）

```
nmap <leader>yyp yypkgccj 
```

# .htaccess - 将对文件的请求重定向到子目录中的文件

> ID：15587201
> 
> 赞同：2
> 
> 时间：2013-03-23T13:15:22.370
> 
> 标签：.htaccess, mod-rewrite

我已经搜索了几天来寻找这个 ModRewrite 问题的答案，并尝试了许多解决方案但没有成功。有人可以帮忙吗？

我有一个网站[http://www.xxxx.co.uk](http://www.xxxx.co.uk) 我希望有人请求一个简单的 URL，例如 URL/mobile（没有文件扩展名） 这将被重定向到一个名为 URL/mobile 的子文件夹并访问一个名为[http://www.xxxx.co.uk/mobile/mobile.php的文件](http://www.xxxx.co.uk/mobile/mobile.php)

任何帮助将不胜感激。

# ruby-on-rails - 在 Rails4 Beta1 中使用 default_locale 的复数化不起作用

> ID：15587208
> 
> 赞同：1
> 
> 时间：2013-03-23T13:16:34.093
> 
> 标签：ruby-on-rails, locale, ruby-on-rails-4, pluralize

我只是想在 Rails 4，Beta 1 中设置一个应用程序。该应用程序（仅）用德语，因此 URL 也应该是德语。我想为一个名为“Region”的实体创建一个控制器和模型；Rails 将其复数为“Regions”，但它应该是“Regionen”。我所做的是：在 config/application.rb 取消注释这一行：

```
config.i18n.default_locale = :de 
```

在 config/initializers/inflections.rb 我把这个：

```
ActiveSupport::Inflector.inflections(:de) do |inflect|
  inflect.irregular 'region', 'regionen'
end 
```

但它不起作用......当我将拐点更改为

```
inflect.irregular 'region', I18n.locale 
```

并删除 (:de) 我可以看到传递的语言环境是 :en 而不是 :de。为什么我的默认语言环境没有传递给这个变形？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T18:13:06.940

我不知道为什么会这样（我有同样的问题），但也试试这个：

```
config.i18n.locale = :de 
```

# regex - 大于 x 且小于 y 的数字的正则表达式

> ID：15587213
> 
> 赞同：1
> 
> 时间：2013-03-23T13:17:40.443
> 
> 标签：regex, range

我正在我的网站上创建一个用于捐赠的表格我希望捐赠字段成为一个文本框，其中包含 5 到 500 之间的任何金额的金额，以及 2000 到 200000 之间的其他货币，请帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:23:11.183

**此处不要使用正则表达式**

有太多方法可以检查 ie`x`是否在一个范围内。正则表达式在这里会导致性能问题。

**这是实际的答案**

范围 5 到 500 的正则表达式：

```
/^(?:[5-9]|(?:[1-9][0-9])|(?:[1-4][0-9][0-9])|(?:500))$/ 
```

**编辑^2**

我不知道为什么正则表达式在这里很重要。但我会解释它是如何工作的。

由于正则表达式是一种模式匹配语言，我们只能用它来匹配模式。所以，我们必须在其中找到一些模式。
这里的模式是：5-9 或 10-99 或 100-499 和 500。

因此，如果我们的正则表达式是`/[5-9]/`，它将匹配我们的第一个。于是`/[1-9][0-9]/`，`/[1-4][0-9][0-9]/`来`/500/`了。

但是，我应该多次验证我们的数据吗？
不，你还有另一个选择。
我们将使用管道进行交替检查。
`/[5-9]|([1-9][0-9])|([1-4][0-9][0-9])|(500)/`

实际上这也应该可以正常工作，但我让它们不被捕获。所以我把`?:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:31:59.850

您*可以*为此使用正则表达式，但请记住，在 6 个月内您是否会记住它是如何工作的。

```
^(500|[1-4][0-9][0-9]|[1-9][0-9]|[5-9])$ 
```

您的其他值的功能类似：从上限开始并逐字指定；然后工作到你的下限，按字面意思指定它（或者在这种情况下通过字符类）。位数的每次更改（例如 100 => 99）都需要进行新的更改。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T13:29:51.163

您不需要在这里使用正则表达式。只需捕获表单输入的值，然后将其与您的数字范围进行比较。这是 JavaScript 中非常常见的任务，被称为“表单验证”。

[http://jsbin.com/ihoxut/2/edit](http://jsbin.com/ihoxut/2/edit)

```
document.forms["myform"].onsubmit = function () {
  var donationAmount = document.getElementById('donation').value;
  if (donationAmount > 500) {
    alert("Too high!");
    return false;
  } else if (donationAmount < 5) {
    alert("Too low!");
    return false;
  } else {
    alert("Just right!");
    return false;
    // You would actually want to return true for this one to submit the form, but that would break jsbin
  }
}; 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-23T13:30:25.147

不要使用正则表达式。

如果您使用 php，请执行以下操作：

```
if (($currency == $currency1) && ($amount >= 5) && ($amount <= 500)) {
    echo "Between 5 and 500 at currency 1";
} elseif (($currency == $currency2) && ($amount >= 2000) && ($amount <= 200000)) {
    echo "Between 2000 and 200000 at currency 2";
} else {
    echo "Not a valid amount";
} 
```

当然你可以在客户端的java或你想使用的任何其他语言中做类似的事情

# php - 如何使用 PHP 中的正则表达式在字符串中搜索可以按任何顺序排列的子字符串

> ID：15587215
> 
> 赞同：2
> 
> 时间：2013-03-23T13:17:51.240
> 
> 标签：php, regex, json

我目前正在使用以以下格式输出 JSON 数据的 Web 服务：

```
{"ID":1291,"Name":"Houses of the Holy","Artist":"Led Zeppelin","Year":1973} 
```

但是，从一个项目到下一个项目的顺序并不一致。例如：

```
{"ID":2958,"Label":"Reprise Records","Name":"Electric Ladyland","Year":1968} 
```

自然，我不能编写依赖于统一顺序的属性的正则表达式，因为顺序从一个项目到下一个项目不同（尽管它们总是以 ID 开头）。

我会使用 preg_split 使用 ',"' 作为分隔符，但偶尔会有一个跟踪列表，如下所示：

```
{"ID":9237,"Tracklist":[{"Track1":"Taxman","Track2":"Eleanor Rigby"}]} 
```

......这会搞砸的。

如何使用正则表达式搜索可能以任何顺序出现或根本不出现的子字符串？或者我是否必须对 Web 服务返回的每个项目运行多个正则表达式，每个可能的属性一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T13:23:37.457

使用 json_decode() 应该很容易访问每个项目

```
$results = json_decode('{"ID":2958,"Label":"Reprise Records","Name":"Electric Ladyland","Year":1968}', true);
print_r($results); 
```

输出：Array（[ID] => 2958 [Label] => Reprise Records [Name] => Electric Ladyland [Year] => 1968）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:24:17.347

我想知道你为什么不想使用 json_decode()

```
$json_string = '{"ID":1291,"Name":"Houses of the Holy","Artist":"Led Zeppelin","Year":1973}';
 $json_array =json_decode($json_string,true); 
```

输出将是

```
Array
(
[ID] => 1291
[Name] => Houses of the Holy
[Artist] => Led Zeppelin
[Year] => 1973
) 
```

然后，您可以按照您想要的方式操作数组

# xml - 有效的 XPath 不返回 IMPORTXML 公式的值

> ID：15587217
> 
> 赞同：1
> 
> 时间：2013-03-23T13:17:55.727
> 
> 标签：xml, xpath, google-sheets

我不明白如何获取属性？

此代码返回错误**错误：xPath 查询未返回任何数据**

```
=IMPORTXML(
  "http://www.cbr.ru/scripts/XML_dynamic.asp?date_req1=01.01.2013&date_req2=15.03.2013&VAL_NM_RQ=R01235";
  "/ValCurs/Record/@Date"
) 
```

有一个类似的问题[Can't figure out how to get time attribute](https://stackoverflow.com/questions/10378453/google-spreadsheet-importxml-cant-figure-out-how-to-get-time-attribute)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T21:21:13.723

必须使用小写的属性名称

```
=ImportXML("http://www.cbr.ru/scripts/XML_dynamic.asp?date_req1=01.01.2013&date_req2=15.03.2013&VAL_NM_RQ=R01235";"/ValCurs/Record/@date") 
```

# c - 使用 MPI (C) 交换光环/重影单元时出现未知错误

> ID：15587221
> 
> 赞同：0
> 
> 时间：2013-03-23T13:18:18.057
> 
> 标签：c, mpi

我是 MPI 的新手，所以请放轻松...无论如何，我正在尝试使用 MPI_Isend 和 MPI_Irecv 进行非阻塞通信。我编写了一个名为“halo_exchange”的子程序，每次我需要在相邻子域之间交换光环单元时都想调用它。我能够正确地拆分域，并且我知道我的每个邻居等级。在下面的代码中，邻居是北/南的（即我使用一维行分解）。所有过程都用于计算。也就是说，所有的进程都会调用这个子程序，并且需要交换数据。

最初我对北边界和南边界使用一组 MPI_Isend/MPI_Irecv 调用，但后来我把它分开，认为将“MPI_PROC_NULL”传递给函数可能有问题（边界不是周期性的）。这就是 if 语句的原因。代码继续挂在“MPI_Waital”语句上，我不知道为什么？它实际上只是在等待，我不确定它在等待什么？

```
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

//---------------------------------------------------------------------------------------
// FUNCTION "halo_exchange"
//---------------------------------------------------------------------------------------
void halo_exchange(PREFIX **array, MPI_Comm topology_comm,              \
       int nn, int S_neighbor, int N_neighbor)
{
  int halo = 2;
  int M = 20;

  ...

  double *S_Recv,*N_Recv;
  double *S_Send,*N_Send;

  // Receive buffers
  S_Recv = (double *) calloc( M*halo,sizeof(double) );
  N_Recv = (double *) calloc( M*halo,sizeof(double) );

  // Send buffers
  S_Send = (double *) calloc( M*halo,sizeof(double) );
  N_Send = (double *) calloc( M*halo,sizeof(double) );

  ...
  // send buffers filled with data
  // recv buffers filled with zeros (is this ok...or do I need to use malloc?)
  ...

  if (S_neighbor == MPI_PROC_NULL)
  {
  MPI_Status status[2];
  MPI_Request req[2];

  MPI_Isend(&N_Send,halo*M,MPI_DOUBLE,N_neighbor,2,topology_comm,&req[0]);
  MPI_Irecv(&N_Recv,halo*M,MPI_DOUBLE,N_neighbor,2,topology_comm,&req[1]);
      ...
      ...
  MPI_Waitall(2,req,status);

  }
  else if (N_neighbor == MPI_PROC_NULL)
  {
  MPI_Status status[2];
  MPI_Request req[2];

  MPI_Isend(&S_Send,halo*M,MPI_DOUBLE,S_neighbor,1,topology_comm,&req[0]);
  MPI_Irecv(&S_Recv,halo*M,MPI_DOUBLE,S_neighbor,1,topology_comm,&req[1]);
      ...
      ...
  MPI_Waitall(2,req,status);

  }
  else
  {
  MPI_Status status[4];
  MPI_Request req[4];

  MPI_Isend(&S_Send,halo*M,MPI_DOUBLE,S_neighbor,1,topology_comm,&req[0]);
  MPI_Isend(&N_Send,halo*M,MPI_DOUBLE,N_neighbor,2,topology_comm,&req[1]);

  MPI_Irecv(&N_Recv,halo*M,MPI_DOUBLE,N_neighbor,2,topology_comm,&req[2]);
  MPI_Irecv(&S_Recv,halo*M,MPI_DOUBLE,S_neighbor,1,topology_comm,&req[3]);
      ...
      ...
  MPI_Waitall(4,req,status);

  }
  ...
} 
```

这是我最初的理解，显然漏掉了一些东西：由于每个进程都调用了这个子程序，所以所有的send/recv函数都被调用了。然后所有进程将在它们的 MPI_Waital 点等待相应的通信发生。当他们完成后，它会继续前进....有人能告诉我为什么我的不动吗？？？另外我对“标签”论点不太清楚（线索？）提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T15:23:00.797

这段代码

```
 MPI_Status status[4];
  MPI_Request req[4];

  MPI_Isend(&S_Send,halo*M,MPI_DOUBLE,S_neighbor,1,topology_comm,&req[0]);
  MPI_Isend(&N_Send,halo*M,MPI_DOUBLE,N_neighbor,2,topology_comm,&req[1]);

  MPI_Irecv(&N_Recv,halo*M,MPI_DOUBLE,N_neighbor,2,topology_comm,&req[2]);
  MPI_Irecv(&S_Recv,halo*M,MPI_DOUBLE,S_neighbor,1,topology_comm,&req[3]);
      ...
      ...
  MPI_Waitall(4,req,status); 
```

大部分都很好，你不应该`if`在`MPI_PROC_NULL`邻居周围; 这就是`MPI_PROC_NULL`目的，这样您就可以将极端情况推入 MPI 例程本身，从而大大简化面向开发人员的通信代码。

这里的问题实际上是标签。标签附加到单个消息。标签可以是任何非负整数，直到某个最大值，但关键是发送者和接收者必须就标签达成一致。

如果您要向北邻居发送一些带有标签 2 的数据，那很好，但现在假设您是北邻居；您将收到来自您的南部邻居*的相同消息，标签为 2*。同样，如果您要发送带有标签 1 的南邻居数据，则该南邻居将需要从其带有标签 1 的北邻居接收数据。

所以你实际上想要

```
 MPI_Isend(&S_Send,halo*M,MPI_DOUBLE,S_neighbor,1,topology_comm,&req[0]);
  MPI_Isend(&N_Send,halo*M,MPI_DOUBLE,N_neighbor,2,topology_comm,&req[1]);

  MPI_Irecv(&N_Recv,halo*M,MPI_DOUBLE,N_neighbor,1,topology_comm,&req[2]);
  MPI_Irecv(&S_Recv,halo*M,MPI_DOUBLE,S_neighbor,2,topology_comm,&req[3]); 
```

**根据以下 OP 评论进行更新：**

事实上，因为 `S_Recv`etc. 已经是指向数据的指针，如：

```
 S_Recv = (double *) calloc( M*halo,sizeof(double) ); 
```

你真正想要的是：

```
 MPI_Isend(S_Send,halo*M,MPI_DOUBLE,S_neighbor,1,topology_comm,&req[0]);
  MPI_Isend(N_Send,halo*M,MPI_DOUBLE,N_neighbor,2,topology_comm,&req[1]);

  MPI_Irecv(N_Recv,halo*M,MPI_DOUBLE,N_neighbor,1,topology_comm,&req[2]);
  MPI_Irecv(S_Recv,halo*M,MPI_DOUBLE,S_neighbor,2,topology_comm,&req[3]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T11:53:05.720

除了正确获取标签之外，您还可以进一步改进您的代码。您使用非阻塞操作实现的数据通信操作非常常见，以至于 MPI 提供了自己的调用来执行此操作 - `MPI_SENDRECV`。有了它，您的代码将简化为：

```
MPI_Sendrecv(&S_Send, halo*M, MPI_DOUBLE, S_neighbor, 0,
             &N_Recv, halo*M, MPI_DOUBLE, N_neighbor, 0,
             topology_comm, MPI_STATUS_IGNORE);
MPI_Sendrecv(&N_Send, halo*M, MPI_DOUBLE, N_neighbor, 0,
             &S_Recv, halo*M, MPI_DOUBLE, S_neighbor, 0,
             topology_comm, MPI_STATUS_IGNORE); 
```

这里有几点：

*   您不需要为不同方向的通信使用单独的标签。它只会像您原来的问题一样导致混乱。
*   Replacing your `MPI_ISEND`/`MPI_IRECV` scheme with the sequence of `MPI_SENDRECV` as outlined allows you to easily extend the halo swap to 2D, 3D and anyD cases. Of course you can still use non-blocking sends, but if done sequentially with `MPI_SENDRECV`, it automagically moves the diagonal elements to the respective halo too (i.e. it moves the topmost leftmost local element to the halo of the top-left diagonal neighbour in 2D).

# actionscript-3 - 使用 TextEvent.TEXT_INPUT 时的延迟

> ID：15587230
> 
> 赞同：0
> 
> 时间：2013-03-23T13:19:10.777
> 
> 标签：actionscript-3, text, textbox

我在文本框中使用 TextEvent.TEXT_INPUT 事件侦听器将框中的条目拆分为字符数组，但是当我尝试使用事件侦听器跟踪该数组时，它仅显示倒数第二个字符文本框。

例如：

我输入“你好”，输出给我“地狱”。然后我把它改成“helloq”，输出给我“hello”。

我该如何解决这个问题？我试过添加另一个只跟踪但没有区别的。谢谢。

代码（searchBox为文本框，splitSearch为数组）：

```
searchBox.addEventListener(TextEvent.TEXT_INPUT, splitBox);
function splitBox(e:TextEvent):void{
    splitSearch = searchBox.text.split("");
}
searchBox.addEventListener(TextEvent.TEXT_INPUT, split);
function split(e:TextEvent):void{
    trace(splitSearch);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:29:04.580

您的问题是 TEXT_INPUT 事件在文本字段更新之前触发。有两种方法可以得到你想要的结果。我认为最简单的方法是收听 Event.CHANGE 事件的文本字段。如果你真的要使用TEXT_INPUT，你需要将文本字段的字符拆分，然后将用户刚刚输入的字符压入数组中。两种解决方案都可以正常工作。

```
package 
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.TextEvent;
    import flash.text.TextField;
    import flash.text.TextFieldType;

    public class Main extends Sprite 
    {
        private var searchBox:TextField;
        private var splitSearch:Array;

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);

            searchBox = new TextField();
            searchBox.border = true;
            searchBox.type = TextFieldType.INPUT;
            addChild(searchBox);
            searchBox.addEventListener(TextEvent.TEXT_INPUT, splitBox);
            searchBox.addEventListener(TextEvent.TEXT_INPUT, split);

            searchBox.addEventListener(Event.CHANGE, onTxtChange);
        }

        private function splitBox(e:TextEvent):void{
            trace("splitBox() " + e.text + "  " + searchBox.text);
            splitSearch = searchBox.text.split("");
            splitSearch.push(e.text);
        }
        private function split(e:TextEvent):void{
            trace("split() " + splitSearch);
        }
        private function onTxtChange(e:Event):void
        {
            trace("onTxtChange() " + searchBox.text);
        }
    }
} 
```

# python - 制作单选按钮组

> ID：15587231
> 
> 赞同：1
> 
> 时间：2013-03-23T13:19:21.367
> 
> 标签：python, radio-button, tkinter

我是否有可能创建两个不同的单选按钮组。我现在有 4 个单选按钮，只有一个选项。我想要 2 个组有 2 个选项，所以我可以单击两个选项。

现在的代码：

```
Radiobutton(root, text="Ja", variable=var, value=1,
                  command=setValueTrue).grid(row=0,column=8)

Radiobutton(root, text="Nee", variable=var, value=2,
                  command=setValueFalse).grid(row=1,column=8)

Radiobutton(root, text="Ja", variable=var, value=3,
                  command=setValueTrue1).grid(row=3,column=8)

Radiobutton(root, text="Nee", variable=var, value=4,
                  command=setValueFalse1).grid(row=4,column=8) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:40:14.863

然后您需要创建一个新变量以在第二组中使用：

```
Radiobutton(root, text="Ja", variable=var, value=1, ...)
Radiobutton(root, text="Nee", variable=var, value=2, ...)
Radiobutton(root, text="Ja", variable=var2, value=3, ...)
Radiobutton(root, text="Nee", variable=var2, value=4, ...) 
```

# asp.net - 无法导入 MySql.Data.MySqlClient

> ID：15587233
> 
> 赞同：0
> 
> 时间：2013-03-23T13:19:58.460
> 
> 标签：asp.net, mysql, vb.net, database-connection

我创建了一个使用`MySQL`数据库的网站，但是当我把它放到网上时，它就不再起作用了。在我`connection.vb`用于连接数据库的课程中，我收到以下警告：

> Imports 'MySql.Data.MySqlClient' 中指定的命名空间或类型不包含任何公共成员或找不到。确保命名空间或类型已定义并包含至少一个公共成员。确保导入的元素名称不使用任何别名。

它说`mysqlconnection`没有定义类型。

这是我的代码：

```
Imports Microsoft.VisualBasic
Imports MySql.Data.MySqlClient

Public Class connection
    Public Shared cn As New MySqlConnection(ConfigurationManager.ConnectionStrings("cnDatabase").ConnectionString)
End Class 
```

如果我在其他`vb`文件（例如 index.aspx.vb）中执行相同的导入语句，它不会给我任何错误

有人知道出了什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:31:07.300

确保将`dll`文件嵌入`Mysql`. 检查项目的依赖关系，资源路径必须与本地配置不同。[我想你可以在这个网站](http://dev.mysql.com/downloads)上找到你要找的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-27T17:11:53.213

尝试这个，

1.  双击我的项目。
2.  在“参考”选项卡中删除 MySQL.Data。
3.  尝试重新安装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T12:38:42.353

试试这个，您必须删除该文件的旧引用添加新引用，因为当我们将文件从一台机器复制到另一台机器时，组装的参考也需要从复制的机器中获取。

所以你可以检查这个，

1.  选择 -> 项目属性
2.  转到参考 3.检查程序集的参考是否存在
3.  如果路径显示“系统找不到指定的引用”
4.  [从https://dev.mysql.com/downloads/connector/net/](https://dev.mysql.com/downloads/connector/net/)为 .Net Mono下载最新的 MySql 连接器/Net
5.  从 Visual Studio-Proerties-reference 中删除引用并添加新引用

# ember.js - 单击按钮时从余烬列表中删除对象

> ID：15587235
> 
> 赞同：0
> 
> 时间：2013-03-23T13:20:13.010
> 
> 标签：ember.js

我有待办事项列表[http://jsfiddle.net/WKn3P/15/](http://jsfiddle.net/WKn3P/15/)

```
Todos.todosController = Em.ArrayController.create({
    content: [],

    createTodo: function(title){
        var todo = Todos.Todo.create({ title: title });
        this.pushObject(todo);    
    },

    removeTodo: function(view){
        this.removeObject(view.context);
        debug;
    },

}); 
```

我正在尝试制作“删除按钮”，它提供了删除列表中对象的机会。但现在它不起作用。另外，我不明白为什么“data-ember-action =“1”会出现在这里。我阅读了所有的 Ember.js 指南，谷歌了很多，但完全迷路了。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:41:51.527

> > 我不明白为什么“data-ember-action="1" 会出现在这里

{{action}} 应该在标签内：

```
<button {{action removeTodo}}>Remove</button> 
```

你的在外面（有文字）。

也就是说，小提琴有几个问题。我已修复它们，您可以在[此处查看 [ 新更新版本](http://jsfiddle.net/WKn3P/16/)

主要问题是：

*   路由是 Ember.js 中非常重要的一部分。在构建应用程序时，您需要将它们考虑在内。它们是控制器和模型之间的粘合剂，也是渲染模板的粘合剂。
*   您不应该手动创建控制器，让 Ember.js 为您创建它们。而不是`Todos.todosController = Em.ArrayController.create()`，使用`Todos.TodosController = Em.ArrayController.extend()`.

我还修复了其他一些小问题。看看更新的小提琴并发现这些变化。

祝你好运！:)

# python - 如何用 Python 求解两个数值方程？

> ID：15587246
> 
> 赞同：2
> 
> 时间：2013-03-23T13:21:12.883
> 
> 标签：python, numerical, sympy

也许这是向您展示代码并尝试稍后解释的最简单方法：

```
sigma_aussen = 7.1
roh_aussen = 38
lambda_schreib = 532*10**-9
lambda_rek = 432*10**-9
sigma_aussen=radians(sigma_aussen)
roh_aussen=radians(roh_aussen)

def BraggMatch(sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_rek):

    gw2, sig_innen, ref_innen, sig_din, ref_din, p2, sig, ref =var('gw2 sig_innen ref_innen sig_din ref_din p2 sig ref')

    sigma = asin(1/n_brech*sin(sigma_aussen))
    roh = asin(1/n_brech*sin(roh_aussen))
    gw = (sigma+roh)/2
    sigma_din =  (roh-sigma)/2
    roh_din =  (sigma-roh)/2

    gw2 = (asin(1/n_brech*sin(sig))+asin(1/n_brech*sin(ref))/2)
    print("gw2: ", gw2)

    sig_innen = asin(1/n_brech*sin(sig))
    ref_innen = asin(1/n_brech*sin(ref))
    print ("sig_innen: ", sig_innen)
    print ("ref_innen: ", ref_innen)

    sig_din = gw2-sig_innen
    ref_din = gw2-ref_innen
    print ("ref_din: ", ref_din)

    p = lambda_schreib/(n_brech*(sin(sigma_din)-sin(roh_din)))
    print ("p: ",p)
    p2 = lambda_rek/n_brech*(sin(sig_din)-sin(ref_din))
    print ("p2: ", p2)

    Winkel=nsolve([gw-gw2, p-p2],[sig,ref], [0,0])
    return Winkel    

Winkel = BraggMatch(sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_rek) 
```

这是我的解释：BraggMatch 是一种以弧度返回两个角度的方法。

这两个方程是 gw-gw2=0 和 p-p2=0。gw 和 p 是两个已知变量。只有两个变量是未知的，sig 和 ref。两个未知变量应该以数值方式求解并在 BraggMatch 方法中返回。

使用 Maple 软件求解这两个方程是没有问题的。也许它可以帮助，向您展示解决方案：sig=0.064 和 ref=0.734

这是错误：“ValueError：在给定的容差内找不到根。（0.0448851 > 2.1684e-19）尝试另一个起点或调整参数。”

你帮助我解决这个问题让我非常感激。这是我硕士论文的核心。

* * *

首先，感谢您的快速反应。

但我不认为这是正确的方法。你是对的，我忘记了`n_brech=1.5`。今天，我发现，`gw-gw2`可以解决解析。所以我只需要一个解决方案`p-p2`。`ref`和的解决方案`sig`可以在 PI 和`sigma_aussen, roh_aussen, lambda_rek`-PI 之间，通过 的变化，这就是我开始在 0 处寻找解决方案的原因。

在这里你可以看到我的新代码：

```
n_brech = 1.5
sigma_aussen = 7.1
roh_aussnen = 38
lambda_schreib = 532*10**-9
lambda_rek = 432*10**-9
sigma_aussen=radians(sigma_aussen)
roh_aussen=radians(roh_aussen)

def BraggMatch(sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_rek):

    gw2, sig_innen, ref_innen, sig_din, ref_din, p2, sig, ref =var('gw2 sig_innen ref_innen sig_din ref_din p2 sig ref')

    sigma = asin(1/n_brech*sin(sigma_aussen))
    roh = asin(1/n_brech*sin(roh_aussen))
    gw = (sigma+roh)/2
    sigma_din =  (roh-sigma)/2
    roh_din =  (sigma-roh)/2

    gw2 = (asin(1/n_brech*sin(sig))+asin(1/n_brech*sin(ref))/2)
    ref_list=solve(gw-gw2,ref)
    ref=ref_list[0]
    print("ref: ", ref)
    gw2 = (asin(1/n_brech*sin(sig))+asin(1/n_brech*sin(ref))/2)

    sig_innen = asin(1/n_brech*sin(sig))
    ref_innen = asin(1/n_brech*sin(ref))
    sig_din = gw2-sig_innen
    ref_din = gw2-ref_innen

    p = lambda_schreib/(n_brech*(sin(sigma_din)-sin(roh_din)))
    p2 = lambda_rek/(n_brech*(sin(sig_din)-sin(ref_din)))
    print ("p2: ", p2)
    print ("p-p2: ", p-p2)
    sig=fsolve(p-p2,0)
    Winkel=[sig, ref]
    return Winkel

Winkel=BraggMatch(sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_rek) 
```

如果你擅长 Maple，在我上传的图片中，你完全可以看到我必须用 Python 解决的问题，因为在这里我可以用 VPython 将它可视化。Maple 代码以度为单位返回角度，这没问题。 ![在此处输入图像描述](../Images/9e22fc96ea3c8ea46ff7738fefe6bd31.png)

* * *

现在我尝试编写代码，就像我在 Maple 中所做的那样。我现在得到一些错误：

`ZeroDivisionError`

这是代码：

```
n_brech = 1.5
sigma_aussen = 7.1
roh_aussen = 38
lambda_schreib = 532*10**-9
lambda_rek = 432*10**-9
sigma_aussen=radians(sigma_aussen)
roh_aussen=radians(roh_aussen)

def BraggMatch(sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_rek):

    sig, ref =var('sig ref')

    def sigma(n_brech, sigma_aussen):
        return (asin(1/n_brech*sin(sigma_aussen)))
    def roh(n_brech, roh_aussen):
        return (asin(1/n_brech*sin(roh_aussen)))
    def gw(n_brech, sigma_aussen, roh_aussen):
        return ((sigma(n_brech, sigma_aussen)+roh(n_brech, roh_aussen))/2)
    def sigma_din(n_brech, sigma_aussen, roh_aussen):
        return (gw(n_brech, sigma_aussen, roh_aussen)-sigma(n_brech, sigma_aussen))
    def roh_din(n_brech, sigma_aussen, roh_aussen):
        return (gw(n_brech, sigma_aussen, roh_aussen)-roh(n_brech, roh_aussen))
    def p(n_brech, sigma_aussen, roh_aussen, lambda_schreib):
        return (lambda_schreib/(n_brech*(sin(sigma_din(n_brech, sigma_aussen, roh_aussen))-sin(roh_din(n_brech, sigma_aussen, roh_aussen)))))

    return (nsolve([gw(n_brech, sigma_aussen, roh_aussen)-gw(n_brech, sig, ref), p(n_brech, sigma_aussen, roh_aussen, lambda_rek)-p(n_brech, sig, ref, lambda_schreib)], [sig, ref], [0, 0]))

Winkel=BraggMatch(sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_rek) 
```

我不明白为什么它不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T08:50:12.307

该问题也可以用数值方法解决，例如`scipy.optimize.minimize()`：

```
from scipy.optimize import minimize;
from math import radians, asin, sin;

sigma_aussen = 7.1
roh_aussen = 38
lambda_schreib = 532*10**-9
lambda_rek = 432*10**-9
sigma_aussen=radians(sigma_aussen)
roh_aussen=radians(roh_aussen)

n_brech = 1

def BraggMatch(sig,ref,sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_rek):
    sigma = asin(1/n_brech*sin(sigma_aussen))
    roh = asin(1/n_brech*sin(roh_aussen))
    gw = (sigma+roh)/2
    sigma_din =  (roh-sigma)/2
    roh_din =  (sigma-roh)/2
    gw2 = (asin(1/n_brech*sin(sig))+asin(1/n_brech*sin(ref))/2)
    sig_innen = asin(1/n_brech*sin(sig))
    ref_innen = asin(1/n_brech*sin(ref))
    sig_din = gw2-sig_innen
    ref_din = gw2-ref_innen
    p = lambda_schreib/(n_brech*(sin(sigma_din)-sin(roh_din)))
    p2 = lambda_rek/n_brech*(sin(sig_din)-sin(ref_din))
    return (gw-gw2)**2 + (p-p2)**2  

def f(x,sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_re):
    return BraggMatch(x[0],x[1],sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_re)

print(minimize(f,[0,0],args=(sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_rek)).x) 
```

但是我不得不猜测，`n_brech = 1`因为它的值没有在问题中显示。`scipy.optimize.minimize()`事实上，确实找到了解决方案 ( `[ 0.3148574 0.1574287]`)，但它与 Maple 找到的解决方案不同。

在不知道方程式的来源以及它们的含义的情况下，我无法确定它们的公式是否正确。但是，我可以检查多种解决方案。`[0.064, 0.734]`从 at而不是 at开始优化`[0, 0]`给出了结果`[ 0.0340574 0.7190287]`。

因此，这些方程似乎有多个解，并且（至少对于 的这个值`n_brech`），如果从不同的点开始，优化将找到不同的解。

（进一步编辑）

为了研究多种解决方案，我使用了以下代码：

```
from scipy.optimize import minimize;
from math import radians, asin, sin, log;

sigma_aussen = 7.1
roh_aussen = 38
lambda_schreib = 532*10**-9
lambda_rek = 432*10**-9
sigma_aussen=radians(sigma_aussen)
roh_aussen=radians(roh_aussen)

n_brech = 1.5

def BraggMatch(sig,ref,sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_rek):
    sigma = asin(1/n_brech*sin(sigma_aussen))
    roh = asin(1/n_brech*sin(roh_aussen))
    gw = (sigma+roh)/2
    sigma_din =  (roh-sigma)/2
    roh_din =  (sigma-roh)/2
    gw2 = (asin(1/n_brech*sin(sig))+asin(1/n_brech*sin(ref))/2)
    sig_innen = asin(1/n_brech*sin(sig))
    ref_innen = asin(1/n_brech*sin(ref))
    sig_din = gw2-sig_innen
    ref_din = gw2-ref_innen
    p = lambda_schreib/(n_brech*(sin(sigma_din)-sin(roh_din)))
    p2 = lambda_rek/n_brech*(sin(sig_din)-sin(ref_din))
    return log((gw-gw2)**2 + (p-p2)**2) 

import matplotlib
import itertools
import numpy as np
import matplotlib.cm as cm
import matplotlib.mlab as mlab
import matplotlib.pyplot as plt

matplotlib.rcParams['xtick.direction'] = 'out'
matplotlib.rcParams['ytick.direction'] = 'out'

delta = 0.001
sig = np.arange(0, 1, delta)
ref = np.arange(0, 1, delta)
XY = [(x,y) for x in sig for y in ref]
Z = [ BraggMatch(x,y,sigma_aussen, roh_aussen, n_brech, lambda_schreib, lambda_rek) for x,y in XY]
X = [x for x,y in XY]
Y = [y for x,y in XY]
Z = np.reshape(Z,(len(sig),-1))

plt.figure()
CS = plt.contour(sig, ref, Z)
plt.clabel(CS, inline=1, fontsize=10)
plt.title('Contour plot')
plt.xlabel('sig')
plt.ylabel('ref')

plt.show() 
```

...产生以下输出：

![在此处输入图像描述](../Images/944e4ad4875ce6b8a2fbcf5a7c0ee4a9.png)

...从中可以看出，在感兴趣的范围内，沿曲线有许多局部最小值。因此，我对不同的方法（和不同的软件）找到不同的最小值并不感到惊讶。

# jquery - 将 jQuery 效果应用于纯 2 级 CSS 菜单

> ID：15587252
> 
> 赞同：0
> 
> 时间：2013-03-23T13:22:44.610
> 
> 标签：jquery, css, effects

我正在使用一个简单的 2 级导航菜单的网站。请参阅下面的链接。

[http://tinyurl.com/d3wjtrc](http://tinyurl.com/d3wjtrc)

我需要做的是在显示子菜单时有一些不错的 jQuery 效果。诸如淡入或任何其他很酷的效果之类的东西。

我正在使用纯 css 代码来显示子菜单。代码如下。

```
.menu{
    list-style:none; list-style-type:none;
    margin:25px 0 0 0;
}

.menu li{
    height:58px;
    background-repeat:no-repeat;
    position:relative;
}

.menu li a, .menu li a:visited {
    display:block;
    text-decoration:none;
    text-indent:-9999px;
    height:50px;
    background-repeat: no-repeat;
}

.menu li ul{
    display:none;
    height:157px;
    list-style:none; list-style-type:none;
    border-bottom:1px solid #777;
}

.menu li ul li{
    height:157px; float:left;
}

.menu li ul li img:hover{
    opacity:0.7;
    filter:alpha(opacity=70); /* For IE8 and earlier */
}

.menu li ul li a, .menu li ul li a:visited{
    text-indent:0;
}

.menu li.menu_jack:hover ul{
    width:1024px;
    height:157px;
    display:block;
    background:#000;
    position:absolute; top:58px; left:-132px;
}

.menu li.menu_family:hover ul{
    width:1024px;
    height:157px;
    display:block;
    background:#000;
    position:absolute; top:58px; left:-270px;
}

.menu li.menu_cocktails:hover ul{
    width:697px;
    padding:0 0 0 327px;
    height:157px;
    display:block;
    background:#000;
    position:absolute; top:58px; left:-420px;
}

.menu li.menu_partner:hover ul{
    width:924px;
    padding:0 0 0 100px;
    height:175px;
    display:block;
    background:#000;
    position:absolute; top:58px; left:-508px;
}

.menu li.menu_competitions:hover ul{
    width:1024px;
    height:157px;
    display:block;
    background:#000;
    position:absolute; top:58px; left:-659px;
}

.menu li.menu_games:hover ul{
    width:1024px;
    height:157px;
    display:block;
    background:#000;
    position:absolute; top:58px; left:-770px;
}

.menu li.menu_photos:hover ul{
    width:1024px;
    height:137px;
    display:block;
    background:#000;
    position:absolute; top:58px; left:-836px;
} 
```

非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:30:53.497

当您标记 jQuery 时，我猜您是在使用非 CSS 解决方案？如果是这样，那么您可以使用类似下面的方法来实现淡入效果。

```
$('#menuItem').hover(function(){
   $('.itemToFade').fadeIn();
},
function{
   $('.itemToFade').fadeOut();
}); 
```

# iphone - 使用 ARC 创建类方法的正确方法 - NSDictionary Leaks

> ID：15587271
> 
> 赞同：0
> 
> 时间：2013-03-23T13:25:24.623
> 
> 标签：iphone, automatic-ref-counting, nsdictionary, memory-leaks, class-method

我做了一个类方法来读取 plist 文件，它工作正常。我在 ARC 中进行了更改，现在课程看起来像：

```
+ (NSDictionary *)readPlistDic:(NSString*)filePlist
{
    NSString *documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *filePath = [[NSString alloc] initWithString:[[documentsDirectoryPath stringByAppendingPathComponent:filePlist]stringByAppendingPathExtension:@"plist"]];
    NSString *path = [[NSBundle mainBundle] bundlePath];
    NSString *startPath = [[path stringByAppendingPathComponent:filePlist]stringByAppendingPathExtension:@"plist"];
    if (![[NSFileManager defaultManager] fileExistsAtPath:filePath]){
        if([[NSDictionary dictionaryWithContentsOfFile:startPath] writeToFile:filePath atomically:NO])
            NSLog(@"File dei profili Copiato nell App DocumentsDirectory\n\n");
        else
            NSLog(@"Errore durante la copia in DocumentsDirectory\n\n");
    }
    NSDictionary *dicReturn = [[NSDictionary alloc] initWithContentsOfFile:filePath];
    return dicReturn;
#warning    return [NSDictionary dictionaryWithContentsOfFile:filePath];
} 
```

它可以工作，但会产生泄漏

![在此处输入图像描述](../Images/e0b8327a562c39e0282b731511d81f31.png)

我错了什么？有什么建议吗？非常感谢！

**更新** 我在这里写plist：

```
NSMutableDictionary *dic = [[NSMutableDictionary alloc] initWithDictionary:[ReadWritePlistNew readPlistDic:@"PartitaDefault"]];

    NSDate *dataOggi = [NSDate date];
    [dic setValue:dataOggi forKey:Data_Partita];

    NSNumber *idPartitaNum = [NSNumber numberWithInt:ultimoID+1];
    [dic setValue:idPartitaNum forKey:ID_Partita];

    NSArray *salvaGioc = [NSArray arrayWithObjects:ID_GIOCATORE_NORD,ID_GIOCATORE_SUD,ID_GIOCATORE_EST,ID_GIOCATORE_OVEST, nil];
    for (int i=0; i<4; i++) {
        [dic setValue:[NSNumber numberWithInt:[[[self.players objectAtIndex:i] objectForKey:defID_Player] intValue]] forKey:[salvaGioc objectAtIndex:i]];
    }

    NSNumber *numGiocatori = [NSNumber numberWithInt:numeroGiocatori];
    [dic setValue:numGiocatori forKey:GIOCATORI_NUM];
    [dic setValue:[NSNumber numberWithInt:tavoloNumero]    forKey:TAVOLO_NUMERO];

    [dic setValue:[NSNumber numberWithBool:isEXP] forKey:EXP_MODE];

    [dic setValue:[NSNumber numberWithBool:isVPAttivoLocal] forKey:VictoryPointAttivo];

    if (isVPAttivoLocal) {
        [dic setValue:[NSNumber numberWithInt:numeroSmazzateIndex] forKey:NumeroSmazzateIndex];
    }
//GPS#warning salvare gps
    //NSLog(@"isCustomVP_Local  %@",isCustomVP_Local ? @"Attivo":@"Non attivo");
    [dic setValue:[NSNumber numberWithBool:isCustomVP_Local] forKey:ISVP_CUSTOM];
    [dic setValue:[NSString stringWithFormat:@"%d",puntiMax] forKey:PUNTI_FINE_PARTITA];

    //salva tutto sul plist database
    NSMutableDictionary *dicOld = [[NSMutableDictionary alloc] initWithDictionary:[ReadWritePlistNew readPlistDic:@"PartiteDB"]];
    NSMutableArray *arrToSave = [[NSMutableArray alloc] initWithArray:[dicOld objectForKey:@"Partite"]];
    //NSLog(@"dic: %@",dic);
    [arrToSave addObject:dic];
    [dicOld setValue:arrToSave forKey:@"Partite"];
    [ReadWritePlistNew writeToPlist:@"PartiteDB" dic:dicOld]; 
```

和`[ReadWritePlistNew writeToPlist:]:`

```
+ (void)writeToPlist:(NSString*)filePlist arr:(NSArray*)arr
{
    NSString *documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *filePath = [[documentsDirectoryPath stringByAppendingPathComponent:filePlist]stringByAppendingPathExtension:@"plist"];
    [arr writeToFile:filePath atomically:YES];

} 
```

# bash - 让 node.js 使用 bash PATH

> ID：15587272
> 
> 赞同：0
> 
> 时间：2013-03-23T13:25:29.540
> 
> 标签：bash, node.js, imagemagick, osx-lion, node-imagemagick

我正在尝试使用 node.js 中的 imagemagick 的“识别”，但它不起作用。我已经使用安装了 imagemagick

```
brew install imagemagick 
```

它在 /usr/local/bin/identify 等。

我创建了一个脚本来启动我的服务器，如下所示：

```
#!/bin/bash
echo "imagemagick: `which identify`"
/Users/myname/.nvm/v0.6.10/bin/node /path/to/server.js -g /some/directory/argument -port 8475 
```

当我从终端（Mac OS X 10.7）运行脚本时，输出如下：

```
imagemagick: /usr/local/bin/identify
[... output from node.js comes here ...] 
```

但是，后来脚本抱怨`identify`找不到。确保您已安装它并在您的路径等中。

node.js imagemagick 模块调用`childproc.spawn('identify', args);`.

如何让 node.js 使用与 bash 脚本相同的 PATH？

# java - 我应该在我的网络应用程序的不同层中设置 bean 的范围

> ID：15587274
> 
> 赞同：0
> 
> 时间：2013-03-23T13:25:56.600
> 
> 标签：java, spring, spring-mvc

我应该在我的Web应用程序的不同层中设置bean的范围我的应用程序中的每个控制器在服务层中都有一个bean的实例变量自动装配&服务层中的每个bean都有一个从DAO层自动装配的bean&DAO层中的每个bean都有sessionfactory autowired 这是线程安全的，因为 spring 中的控制器默认是单例的，其他所有 bean 都是一样的，所以我很困惑每层中 bean 的范围应该是什么，所以应用程序没有遇到并发问题？？？

# php - CakePHP 变量解析变化

> ID：15587275
> 
> 赞同：0
> 
> 时间：2013-03-23T13:26:14.590
> 
> 标签：php, variables, cakephp

我有一个奇怪的问题；我有一个变量，如下：

```
$postBSGlobal = $post['Post']['B/S'] 
```

哪个，在调试时，正确交付

```
"B" 
```

但是，后来值神奇地变为

```
"1" 
```

没有我以任何方式操纵变量。

我需要此语句的字符串值：

```
if ($userId <> $post['Post']['OWNER'] && $postBSGlobal = 'B'){
    echo "Dein Verdienst:";
}; 
```

由于这个问题，今天我的应用程序完全无法使用。也许我的托管服务器上的 PHP 版本已更改？如何防止 PHP 返回“1”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:29:23.647

您使用了单个 = 而不是 ==。将其更改为：

`$postBSGlobal == 'B'`

# joomla - joomla的模态窗口关闭后的特定href

> ID：15587277
> 
> 赞同：2
> 
> 时间：2013-03-23T13:26:31.097
> 
> 标签：joomla, mootools, joomla1.5

我在这里有一个**Joomla 1.5.26**站点，我正在尝试使**模态窗口**在**close**时采用特定的**href**。查看**modal.js**文件，我发现了这部分代码... 例如，我将其更改为，但没有任何反应！当我关闭模式窗口时没有得到**index.php**。任何的想法？感谢您的时间！****`this.btnClose = new Element('a', {id:'sbox-btn-close', href:'#', title:'Close'});``href:'#'``href:'index.php'`****

 ******* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:25:15.357

Joomla 中使用的模态库是[SqueezeBox](http://digitarald.de/project/squeezebox/)

我建议不要修改 Joomla 核心库。您应该改用 Squeezebox API：添加一个侦听器来关闭事件：

```
SqueezeBox.addEvent('onClose', function() {
    window.location = 'index.php';
}); 
```

*模态窗口可能是通过其他方式，如外部。*

该元素`<a id="sbox-btn-close" href="#" />`只是一个观察点击的 UI 元素，但它的本机功能被抑制（不像链接那样工作）。

如果您问自己，为什么它是`<a href="#" />`而不是`<span />`，诀窍是当您将鼠标指向它时显示一个指针光标 - 不使用 CSS。******

# iphone - iOS webview - 加载多个文件

> ID：15587289
> 
> 赞同：0
> 
> 时间：2013-03-23T13:27:46.313
> 
> 标签：iphone, ios, uiwebview

我是 iOS 新手。我创建了一个简单的应用程序，`UIWebview`其中我正在从服务器加载一个文件夹，该文件夹由**4 个子文件夹（1\. CSS 2\. Images 3\. Audio 4\. Html files）**组成，其中我想显示 Html Files 文件夹中的第一个文件 html 文件`webview`，然后当用户滑动页面时，我想显示 Html 文件文件夹中的下一个 html 文件.. 这里有可能.. 我是新手iOS请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:33:38.443

**滑动效果**

这是一个基本代码片段：

```
UISwipeGestureRecognizer *mSwipeUpRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(doSomething)];

[mSwipeUpRecognizer setDirection:(UISwipeGestureRecognizerDirectionUp | UISwipeGestureRecognizerDirectionDown | UISwipeGestureRecognizerDirectionLeft | UISwipeGestureRecognizerDirectionRight)];

[webview addGestureRecognizer:mSwipeUpRecognizer];

[mSwipeUpRecognizer release]; 
```

并在 .h 文件中添加：

```
<UIGestureRecognizerDelegate> 
```

现在在`doSomething`方法实现中，更改您的 web NSURL 并将该 url 再次加载到 web 视图。

**对于卷曲动画：**

以下是一些示例链接：

[如何在 webView 中赋予页面卷曲动画？](https://stackoverflow.com/questions/8178378/how-to-give-page-curl-animation-in-webview)

[用动画翻页（UIWebView）](https://stackoverflow.com/questions/2598307/turn-a-page-a-uiwebview-with-an-animation)

# compiler-construction - g++ 编译期间的 CPU 操作

> ID：15587290
> 
> 赞同：1
> 
> 时间：2013-03-23T13:27:48.157
> 
> 标签：compiler-construction, g++, cpu, cpu-architecture, build-server

我想投资构建服务器以减少 g++ 编译的时间。由于源是可并行的，我们的想法是一个多核系统。（32-48-64 核）

我的问题是在编译过程中使用了什么类型的 cpu 操作？（新的 AMD CPU 只有 1 个浮点单元用于 2 个内核）

通常 CPU 会使用很多软件进行基准测试，但我找不到任何网站对 CPU 进行编译测试。哪些类型的软件与 g++ 编译器的工作方式相似？（x264 编码、压缩、加密？）

所以基本问题是，当处理器专门用于编译代码时，最重要的参数是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:52:31.440

编译器主要使用内存加载/存储操作和整数操作。它们根本不使用浮点或 SIMD（可能用于加载/存储除外）。

编译软件通常形成一个自己的基准测试类，并且是一个硬性测试。处理器制造商不喜欢这些基准，因为它通常很难优化。

主要因素是内存带宽，而不是时钟频率。当然，这一切都在发挥作用。但是你想要广泛访问内存，你想要所有级别的大缓存。例如，您不希望时钟速度提高 10% 并将缓存大小减半。

# c# - OnItemCommand 事件不会在 ListView 中触发

> ID：15587292
> 
> 赞同：0
> 
> 时间：2013-03-23T13:27:52.043
> 
> 标签：c#, asp.net, events

`OnItemCommand`当我按下里面的按钮时，事件**不会**触发？我尝试了一些东西，但什么也没发生。我忘了放什么东西吗？我应该怎么做才能修复它？`click``ItemTemplate`

页面：

```
<asp:ListView ID="ShowPostsListView" runat="server" OnItemDataBound="ShowPostsListView_ItemDataBound" OnItemCommand="ShowPostsListView_ItemCommand">
    <ItemTemplate>
      <asp:Button ID="AddCommentButton" CssClass="addCommentButton" runat="server" Text="Add Comment" CommandName="Add Comment" />
    </ItemTemplate>
</asp:ListView> 
```

页面后面的代码：

```
protected void ShowPostsListView_ItemCommand(object sender, ListViewCommandEventArgs e)
{
    if (e.CommandName == "Add Comment")
    {
                 ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:40:05.410

做同样事情的另一种方法是将 OnClick 事件处理程序添加到按钮，如下所示：

```
<asp:ListView ID="ShowPostsListView" runat="server"    
 OnItemDataBound="ShowPostsListView_ItemDataBound">
    <ItemTemplate>
      <asp:Button ID="AddCommentButton" CssClass="addCommentButton" 
        OnClick="addCommentButton_OnClick" runat="server" 
        Text="Add Comment"  />
    </ItemTemplate>
</asp:ListView> 
```

接着：

```
protected void addCommentButton_OnClick(obejct sender, EventArgs e)
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:44:54.140

have you set the eventhandling in webconfig false to get rid of the error, if you did that please change it back to same way or make it true, and before binding the data to your listview jst add

```
if(!isPostBack)
ListView1.Databind(); 
```

i hope this will solve the problem, and your event will fire

# java - 解析 JSONArray

> ID：15587294
> 
> 赞同：-5
> 
> 时间：2013-03-23T13:28:08.933
> 
> 标签：java, json

解析 JSONArray

```
{
    "SyncUserGpsDataList" :
     [
        {
            "date_time": "2013-03-23 16:34:53PLUS0530",
            "Battery": {
                "Level": "51",
                "State": "Not charging",
                "Temperature": "3.78",
                "Voltage": "30.6",
                "Health": "Good"
            },
            "Location": {},
            "GPS_bool": "true",
            "WIFI_bool": "true",
            "notes": "Trying to get location information"
        }
    ]
} 
```

如何解析这个 JSONArray？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:31:27.950

使用 JSON 解析库，例如[GSON](https://code.google.com/p/google-gson/)。

无需重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:30:56.620

[Json.org](http://www.json.org/)对理解 JSON 有很好的解释和教程，以及跨各种语言的库列表。

值得研究并选择最适合您需求的产品。您的问题尚不清楚您尝试过什么或打算如何使用它，因此可能需要进行一些进一步的研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:04:16.160

有许多库使它相当轻松。我最近使用了 json.jar，你可以从[sourceforge](http://sourceforge.net/projects/json-lib/files/)下载它。Java 文档发布在[json.org上](http://www.json.org/java/index.html)

这是一个小代码，可以帮助您入门：

```
public static void main(String[] args) throws Exception {
    File json = new File("json.txt"); //stores your sample data.
    Scanner in = new Scanner(json);
    JSONObject obj = new JSONObject(in.nextLine());
    JSONArray list = obj.getJSONArray("SyncUserGpsDataList");
    System.out.print("Number of elements in this array: ");
    System.out.println(list.length());
    JSONObject data = list.getJSONObject(0);
    System.out.println("Need to parse:" + data.toString());
    System.out.println("\n Keys : Values");
    Iterator itr =data.keys(); 
    //List key-value pairs stored in the JSON object.
    while(itr.hasNext()) {
       String key = itr.next().toString();
       System.out.print(key + "  :  ");
       System.out.println(data.get(key));
    } 
} 
```

# arrays - 如何将二进制位转换为数组

> ID：15587295
> 
> 赞同：1
> 
> 时间：2013-03-23T13:28:11.960
> 
> 标签：arrays, matlab, binary

在我的项目中，我想将二进制位转换为数组。

例如 ：

的二进制值

```
a= dec2bin(1) = 0001 
```

但我想把它转换成数组并像这样存储

```
a=[0 0 0 1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:32:22.283

`str2num`转置数组的使用`a`：

```
a = dec2bin(1,4);

out = str2num(a')'; 
```

这样，字符串的每个元素都`a`被单独转换为一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:32:39.083

您可以使用`bitand`，例如，

```
>> bitand(1, 2.^(7:-1:0)) > 0

ans =

 0     0     0     0     0     0     0     1 
```

或者

```
bitand(10, 2.^(7:-1:0)) > 0

ans =

 0     0     0     0     1     0     1     0 
```

并且，如果您需要计算多个 2 的幂以包含任意数字，则可以使用`ceil(log2(theNumber))`

# osx-lion - 即使使用“--with-gcc=clang”，也无法在 OS X Lion 中通过 rvm 安装 Ruby 1.9.3

> ID：15587298
> 
> 赞同：3
> 
> 时间：2013-03-23T13:28:23.937
> 
> 标签：osx-lion, rvm, ruby-1.9.3

我一直在这里检查其他问题，来自人们在使用 RVM 在 Lion 中安装 ruby​​ 1.9.3 时遇到问题，问题似乎与我的相同，所以我尝试了没有成功提供的解决方案：

我第一次尝试： `rvm install 1.9.3 --with-gcc=clang`

返回： `Installing requirements for osx/10.7/x86_64, might require sudo password. Skipping `brew update` make sure your formulas are up to date. Missing required packages: libtool, pkg-config, libyaml, readline, libxml2, libxslt, openssl, sqlite. requirements_brew_generate_openssl_cert:4: no such file or directory: /usr/local/Cellar/openssl/1.0.1e/bin/openssl Skipping update of certificates in '/cert.pem'. Warning: found user selected compiler 'clang', this will suppress RVM auto detection mechanisms. Installing Ruby from source to: /Users/****/.rvm/rubies/ruby-1.9.3-p392, this may take a while depending on your cpu(s)... ruby-1.9.3-p392 - #downloading ruby-1.9.3-p392, this may take a while depending on your connection... ruby-1.9.3-p392 - #extracted to /Users/****/.rvm/src/ruby-1.9.3-p392 (already extracted) ruby-1.9.3-p392 - #configuring................................................................................................................................................................................................................................................................................................................................................................................................................................................................. ruby-1.9.3-p392 - #compiling................ ruby-1.9.3-p392 - #installing .............. ruby-1.9.3-p392 is not installed. To install do: 'rvm install ruby-1.9.3-p392'`

注意`ruby-1.9.3-p392 is not installed.`接近尾声的样子。

之后我尝试按照以下建议进行操作： `CC=/usr/bin/gcc-4.2 rvm install 1.9.3 --enable-shared`

但它返回了： `You requested building with '/usr/bin/gcc-4.2' but it is not in your path.`

所以我基本上被困在这里，不知道如何进行。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T13:54:05.547

这应该解决它：

```
rvm get head
rvm install 1.9.3 --autolibs=4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T22:59:38.657

安装失败，因为 Homebrew 维护的某些软件包需要更新。在代码的第二行“跳过`brew update`确保您的公式是最新的”。

```
brew update 
```

可能需要

```
sudo brew update 
```

然后

```
rvm install 1.9.3 --with-gcc=clang 
```

应该覆盖 rvm 允许您下载 ruby​​ 1.9.3 的稳定版本

```
sudo rvm install 1.9.3 --with-gcc=clang 
```

可能也有效。

# java - 由于设计选择导致的 java 泛型沉重

> ID：15587302
> 
> 赞同：0
> 
> 时间：2013-03-23T13:28:44.927
> 
> 标签：java, generics, architecture

我有以下我想要通用的学习课程：

```
public abstract class Study<
    T1 extends Context, 
    T2 extends Region,
    T3 extends Domain<T2>, 
    T4 extends Solution> {... 
```

派生类的示例如下：

```
public class AmericanCultureStudy<
    T1 extends AmericanCultureContext, 
    T2 extends AmericanCultureRegion,
    T3 extends AmericanCultureDomain<T2>, 
    T4 extends AmericanCultureSolution>
extends Study<T1, T2, T3, T4> {...

public class ContemporaryAmericanCultureStudy<
    T1 extends ContemporaryAmericanCultureContext, 
    T2 extends ContemporaryAmericanCultureRegion,
    T3 extends ContemporaryAmericanCultureDomain<T2>, 
    T4 extends ContemporaryAmericanCultureSolution>
extends AmericanCultureStudy<T1, T2, T3, T4> {...

public class ContemporaryMainstreamAmericanCultureStudy<
    T1 extends ContemporaryMainstreamAmericanCultureContext, 
    T2 extends ContemporaryMainstreamAmericanCultureRegion,
    T3 extends ContemporaryMainstreamAmericanCultureDomain<T2>, 
    T4 extends ContemporaryMainstreamAmericanCultureSolution>
extends ContemporaryAmericanCultureSolution<T1, T2, T3, T4> {... 
```

这种设计的结果是主代码中类的实例化变得繁重，如下所示：

```
ContemporaryMainstreamAmericanCultureStudy<
    ContemporaryMainstreamAmericanCultureContext, 
    ContemporaryMainstreamAmericanCultureRegion,
    ContemporaryMainstreamAmericanCultureDomain<
        ContemporaryMainstreamAmericanCultureRegion>,
        ContemporaryMainstreamAmericanCultureSolution> 
    study = new ContemporaryMainstreamAmericanCultureStudy<
        ContemporaryMainstreamAmericanCultureContext,
        ContemporaryMainstreamAmericanCultureRegion,
        ContemporaryMainstreamAmericanCultureDomain<
            ContemporaryMainstreamAmericanCultureRegion>,
        ContemporaryMainstreamAmericanCultureSolution>() ; 
```

尽管不同，但包含的所有类`Study`都是相同的关注类型，因此必须有一种方法通过减少`Study`.

任何人都可以帮助解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:55:40.467

在这种情况下，泛型实际上是必要的吗？例如，是否有可能只在您的构造函数中接收一组从`Context`、`Region`、`Domain`和派生的类的对象`Solution`？如果这是可能的，那绝对是正确的方法。

如果这是不可能的，您至少可以通过创建一个中间`Culture`类来隐藏一些沉重：

```
class Culture<
    C extends Context, 
    R extends Region,
    D extends Domain<R>, 
    S extends Solution> {
  ...
} 
```

你需要一个凌乱的声明，比如说，，`ContemporaryAmericanCulture`但是你的`Study`实例化可能是`Study<ContemporaryAmericanCulture> study = new Study<ContemporaryAmericanCulture>()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:12:46.533

在某些时候，动态地做一些事情是值得的，比如将如下所示的外部表存储在文件或数据库中：

```
|ID    | Context | Region | Domain | Solution |  
|123   | Abc     | Def    | Ghi    | Jkl      |  
... 
```

然后，您可以为这些实体定义操作/数据，例如打印时要使用的字体、应该重定向的页面、允许多少学生参加学习等等。

你的对象看起来像

```
 class Study {
       int id;
       String context;
       String region;
       String domain;
       String solution;
   } 
```

类型安全性很好，但如果您想管理许多和/或不可预见数量的实体，那么您不应该以每次添加/更改/删除实体时都需要触摸代码的方式进行编码。

# c++ - 如何使用其参数化构造函数初始化成员

> ID：15587304
> 
> 赞同：3
> 
> 时间：2013-03-23T13:28:58.380
> 
> 标签：c++, oop, class, prototype

没有代码很难描述，所以这里是：我试图在另一个（a）的头文件中对一个对象（b）进行原型化，然后在（a）的构造函数中调用（b）的构造函数并传递它的值，所以我可以使用 b 的方法，这取决于它的构造函数和传递给它的值，但是我这样做的方式给出：定价构造函数的左括号中的红色下划线表示：“monteCarlo 不存在默认构造函数”，然后在下一行 m 用红色下划线表示：“在没有适当的 operator() 或转换函数到函数指针类型的情况下调用类类型的对象”。非常欢迎任何其他批评我的程序的人，我正在努力学习编程，而且很好。

在文件定价.cpp 我有：

```
#include "pricing.h"
#include <math.h>
#include <vector>
pricing::pricing(void)
{
 m(10,0.0,0.01,50);
}
double pricing::expectedValue(void)
{
expectedExValue = m.samplePaths[2][3]; //yes this isn't an expected value, 
// its just for illustration purposes/making it compile.
return 0;
} 
```

在pricing.hi 有：

```
#pragma once
#include "pricing.h"
#include "monteCarlo.h"
class pricing
{
public:
pricing(void);
~pricing(void);
double euroCall();
std::vector<double> samplePathing;
double expectedValue();
    monteCarlo m;

}; 
```

然后 montecarlo.cpp 看起来像：

```
#include "monteCarlo.h"
#include "randomWalk.h"
#include <vector>
#include <iostream>

monteCarlo::monteCarlo(int trails, double drift, double volidatity, int density)
{
for (int i = 0; i < trails; i++)
{
    std::cout << "Trail number " << i+1 <<  std::endl;
    randomWalk r(drift,volidatity,density);
    r.seed();
    samplePaths.emplace_back(r.samplePath);
    std::cout << std::endl << std::endl;
}
}

monteCarlo::~monteCarlo(void)
{
} 
```

最后 montecarlo.h 是：

```
#pragma once
#include <vector>

class monteCarlo
{
public:
monteCarlo(int, double, double, int);
~monteCarlo(void);
std::vector< std::vector<double> > samplePaths;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:31:48.457

```
pricing::pricing(void)
{
 m(10,0.0,0.01,50);
} 
```

这试图*调用* `m`它，就好像它是一个函数（如果它已经重载`operator()`，你将能够做到这一点，这就是错误所说的）。要进行初始化`m`，请使用成员初始化列表：

```
pricing::pricing(void)
 : m(10,0.0,0.01,50)
{ } 
```

此冒号语法用于在构造函数中初始化对象的成员。您只需按名称列出成员并使用`( expression-list )`or`{ initializer-list }`语法对其进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:47:19.550

定价.cpp

```
#include "pricing.h"

pricing::pricing() 
  : m(10,0.0,0.01,50) 
{
}

double pricing::expectedValue()
{
    return m.samplePaths[2][3]; 
} 
```

定价.h

```
#ifndef PRICING_H
#define PRICING_H
#include "monteCarlo.h"
#include <vector>

class pricing
{
public:
    pricing();
    double euroCall();
    std::vector<double> samplePathing;
    double expectedValue();
private:
    monteCarlo m;
};

#endif 
```

montecarlo.cpp 看起来像：

```
#include "monteCarlo.h"
#include "randomWalk.h"
#include <iostream>

monteCarlo::monteCarlo(int trails, double drift, double volidatity, int density)
{
    for (int i = 0; i < trails; i++)
    {
        std::cout << "Trail number " << i+1 <<  std::endl;
        randomWalk r(drift,volidatity,density);
        r.seed();
        samplePaths.emplace_back(r.samplePath);
        std::cout << "\n" << std::endl;
    }
} 
```

最后 montecarlo.h 是：

```
#ifndef MONTECARLO_H
#define MONTECARLO_H
#include <vector>

class monteCarlo
{
public:
    monteCarlo(int, double, double, int);
    std::vector< std::vector<double> > samplePaths;
};

#endif 
```

我会使用一些非常基本的规则：

1.  使用包括警卫
2.  仅包含标头中真正需要的标头
3.  在实现中包含头文件作为第一个文件。
4.  不要在标题中使用“使用命名空间”
5.  如果可能，使用前向声明而不是包含

3) 确保标头包含所有必要的包含文件

# python - 有什么方法可以通过 sphinx 使用 python2.x 和 python3.x 生态系统构建文档？

> ID：15587305
> 
> 赞同：4
> 
> 时间：2013-03-23T13:29:01.297
> 
> 标签：python, python-sphinx

我有[一个](https://bitbucket.org/estin/pomp)使用单个代码库同时支持 Python 2.7 和 Python 3.x 的项目。在其中，我使用了可选的期货：

*   扭曲（仅限 Python 2.x）
*   [concurrent.futures](http://docs.python.org/dev/library/concurrent.futures.html)（仅限 Python 3.2）

如果应用程序在 Python 2.x 上运行，则 Twisted 可用。

如果应用程序在 Python 3.2+ 上运行，`concurent.futures`则可用。

我想为整个项目使用 Sphinx 构建文档，但是如何为这两个生态系统做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:52:43.340

为了解决这个问题，我发布[了 mockautodoc](https://pypi.python.org/pypi/sphinxcontrib-mockautodoc) sphinx 扩展

# python - 使用python计算抛物线

> ID：15587311
> 
> 赞同：3
> 
> 时间：2013-03-23T13:29:27.523
> 
> 标签：python, math, python-2.7

```
def parabola(h, k, xCoordinates): 
```

h 是抛物线与 x 轴接触的 x 坐标，k 是抛物线与 y 轴相交的 y 坐标，xCoordinates 是沿主轴的 x 坐标列表。该函数使用下面显示的等式返回 y 坐标列表。x 坐标列表中的每个 x 坐标都有一个 y 坐标。

```
y(x, h, k) = a(x − h)2, where a =k/h2 
```

我知道如何在 python 中工作，因为我已经计算了面积，

```
def computeArea(y_vals, h):
    i=1
    total=y_vals[0]+y_vals[-1]
    for y in y_vals[1:-1]:
        if i%2 == 0:
            total+=2*y
        else:
            total+=4*y
        i+=1
    return total*(h/3.0)
y_values=[13, 45.3, 12, 1, 476, 0]
interval=1.2
area=computeArea(y_values, interval)
print "The area is", area 
```

但是上面的问题伤害了我，因为它纯粹是数学，我只是想要一点帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:50:53.060

您可以使用[`**`幂运算符](http://docs.python.org/2/reference/expressions.html#the-power-operator)对值进行平方：

```
y = (k / h ** 2) * (x - h) ** 2 
```

其中`**`求幂的[优先级](http://docs.python.org/2/reference/expressions.html#operator-precedence)高于乘法或除法。

所以对于一系列`x`坐标，那就是：

```
def parabola(h, k, xCoordinates):
    return [(k / h ** 2) * (x - h) ** 2 for x in xCoordinates] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T22:32:24.333

Martijn Pieters 给出的答案很好。

如果你对这个概念有点困惑，我发现这个例子很容易理解（使用顶点形式方程）：

```
x = range(-10,10)
y = []

a = 2 # this is the positive or negative curvature
h = 0 # horizontal offset: make this term +/- to shift the curve "side to side"
k = 0 # vertical offset: make this term +/- to shift the curve "up to down"

for xi in x:
    y.append(a * (xi + h)** 2 + k) 
```

您可以使用 pylab 绘制它。

[蟒蛇](/questions/tagged/python "显示标记为“python”的问题")[数学](/questions/tagged/math "显示标记为“数学”的问题")

# collections - 红黑树能保证同一棵树吗？

> ID：15587313
> 
> 赞同：0
> 
> 时间：2013-03-23T13:29:29.990
> 
> 标签：collections, tree

在二叉树中，我添加项目的顺序会影响树结构。如果我改变将项目添加到树中的顺序，我可能会得到不同的树结构。我知道红黑树确保了一种平衡的树。问题是红黑树是否确保任何添加项目的顺序都完全相同的树结构。

# java - 为什么java不支持三等号

> ID：15587315
> 
> 赞同：-3
> 
> 时间：2013-03-23T13:29:42.570
> 
> 标签：java

这是我的代码。但我的问题是为什么 java 不支持这个运算符，其他语言支持什么，如 php、javascript。

```
int a=1;
float b=1;

if(a===b)
    out.println("true");
else
    out.println("false"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T13:35:25.650

PHP 和 JavaScript 允许使用此运算符检查变量的类型。这在 Java 中不是必需的，因为它的类型是静态的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T13:39:54.517

=== 运算符执行深度比较并检查类型相等性。java 中的等价物是覆盖 equals() 和 hashCode() 以提供执行深度 equals() 检查的合约。Java 不需要'==='。

# php - 如何从 php 中的数组中获取 .org 域？

> ID：15587317
> 
> 赞同：-2
> 
> 时间：2013-03-23T13:30:07.977
> 
> 标签：php, regex, preg-match

我有一个包含 html 标签、文本等的数组。我想只从列表中获取 .org 域。

我的代码不起作用：

```
<?php

$list = htmlentities(file_get_contents('list.html'));

preg_match("/^[a-zA-Z0-9-.]+(.org)$/", $list, $matches);

var_dump ($matches);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:49:02.870

```
$list = "google.com
    http://d.org
    google.org
    <ul>
        <li>www.yahoo.co.uk</li>
        <li>http://www.bsdflj.org.uk</li>
        <li>nsdfljsdf.org</li>
    </ul>";

preg_match_all("~([a-zA-Z0-9-.]+.org)[^\.]~s", $list, $matches);
var_dump ($matches[1]); 
```

$list 是我测试过的。

var_dump() 的输出：

```
array(3) {
  [0]=>
  string(5) "d.org"
  [1]=>
  string(10) "google.org"
  [2]=>
  string(13) "nsdfljsdf.org"
} 
```

# vba - 如何在excel vba宏中绘制循环图

> ID：15587325
> 
> 赞同：3
> 
> 时间：2013-03-23T13:31:22.437
> 
> 标签：vba, loops, excel, charts

我正在尝试使用 Excel VBA 在列上循环散点图，但确实知道如何做到这一点。

这是我通过用 RAND() 函数填充 Y 系列生成的虚拟数据，该图显示了我生成的示例图表。

![在此处输入图像描述](../Images/57c39d573f1c2b0345824dadd32e23bf.png)

以下是相关代码：

```
Sub multichart()
    Range("A1:B21").Select
    Charts.Add
    ActiveChart.ChartType = xlXYScatter
    ActiveChart.SetSourceData Source:=Sheets("Sheet1").Range("A1:B21"), PlotBy _
        :=xlColumns
    ActiveChart.Location Where:=xlLocationAsObject, Name:="Sheet1"
    With ActiveChart
        .HasTitle = True
        .ChartTitle.Characters.Text = "Y1"
        .Axes(xlCategory, xlPrimary).HasTitle = False
        .Axes(xlValue, xlPrimary).HasTitle = False
    End With
    ActiveSheet.Shapes("Chart 6").ScaleHeight 0.61, msoFalse, msoScaleFromTopLeft
    ActiveChart.PlotArea.Select
    Selection.Top = 1
    Selection.Height = 106
    Selection.Height = 113
    With Selection.Border
        .ColorIndex = 16
        .Weight = xlThin
        .LineStyle = xlContinuous
    End With
    With Selection.Interior
        .ColorIndex = 2
        .PatternColorIndex = 1
        .Pattern = xlSolid
    End With
End Sub 
```

我想循环这个过程来创建 N 个图表（其中 N 是任何工作表中 Y 列的数量），意味着因工作表而异。也将一个接一个地附加地块。Y 限制和 X 限制在所有图中都应相同以进行比较。输出看起来像（例如，仅显示 4 个变量）：

![在此处输入图像描述](../Images/3dffc8e467337b4a2317a1de5a7ab7e3.png)

对不起，如果这是一个基本问题，因为我是 Excel VBA 客人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T16:34:04.903

你不说什么版本的Excel。这适用于 2010 年，我认为应该适用于其他版本。但我不是 VBA 图表专家。希望变量名称是不言自明的：

```
Sub multichart()
Dim ws As Excel.Worksheet
Dim i As Long
Dim cht As Chart
Dim cho As ChartObject
Dim TitleRange As Excel.Range
Dim DataRange As Excel.Range
Dim ChartHeight As Long
Dim LastCol As Long
Dim LastRow As Long
Dim MaxAmountToChart

Set ws = ActiveSheet
'delete the old ones
For Each cho In ws.ChartObjects
    cho.Delete
Next
ChartHeight = 20
With ws
    LastCol = .Cells(1, .Columns.Count).End(xlToLeft).Column
    LastRow = .Cells(.Rows.Count, 1).End(xlUp).Row
    MaxAmountToChart = Application.WorksheetFunction.Max(ws.Range(ws.Cells(1, 2), .Cells(LastRow, LastCol)))
    Set TitleRange = .Range("A1:A" & LastRow)
    For i = 2 To LastCol
        Set DataRange = .Range(.Cells(1, i), .Cells(LastRow, i))
        Set cht = Charts.Add
        cht.Location Where:=xlLocationAsObject, Name:=.Name
        Set cho = .ChartObjects(.ChartObjects.Count)
        cho.Top = (i - 1) * ChartHeight * .Rows(1).RowHeight
        cho.Left = 0
        Set cht = cho.Chart
        '.Shapes(cht.Name).ScaleHeight 0.61, msoFalse, msoScaleFromTopLeft
        With cht
            .ChartType = xlXYScatter
            .SetSourceData Source:=Union(TitleRange, DataRange), PlotBy:=xlColumns
            .HasTitle = True
            .ChartTitle.Characters.Text = "Y1"
            .Axes(xlCategory, xlPrimary).HasTitle = False
            .Axes(xlValue, xlPrimary).MaximumScale = MaxAmountToChart
            With .PlotArea
                .Top = 1
                .Height = 106
                .Height = 113
                With .Border
                    .ColorIndex = 16
                    .Weight = xlThin
                    .LineStyle = xlContinuous
                End With
                With .Interior
                    .ColorIndex = 2
                    .PatternColorIndex = 1
                    .Pattern = xlSolid
                End With
            End With
        End With
    Next i
End With
End Sub 
```

# javascript - 测试是否加载了所有图像

> ID：15587330
> 
> 赞同：5
> 
> 时间：2013-03-23T13:31:32.467
> 
> 标签：javascript, image, load, image-loading

这是我测试是否已加载所有图像的能力的尝试：

```
for (var i = 0; i < imgCount; i ++) {
    loadArr[i] = false
    imgArr[i] = new Image()
    imgArr[i].src='img'+i+'.png'
    imgArr[i].onload = function() {
        loadArr[i] = true //but wait! At the end of
                          //the loop, i is imgCount
                          //so this doesn't work.
    }
} 
```

问题是一旦循环完成，变量`i`就是`imgCount`. 这意味着所有其他“已加载”标志在加载图像时永远不会设置为`true`。

是否有某种方法可以向图像添加“加载”属性，或者是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T13:37:10.850

您需要使用闭包定义 onload 函数：

```
for (var i = 0; i < imgCount; i ++) {
    loadArr[i] = false
    imgArr[i] = new Image()
    imgArr[i].src='img'+i+'.png'
    imgArr[i].onload = (function(i){
        return function(){ loadArr[i] = true }
    })(i);
} 
```

这是一个[jsFiddle](http://jsfiddle.net/q5Dnt/)，它演示了在类似场景中的工作。

另外，请注意，您当前选择作为答案的解决方案实际上不起作用：

```
imgArr[i].onload = (function() {
        loadArr[i] = true;
    })(); 
```

立即评估此功能。这意味着在循环中，loadArr 的每个元素都设置为 true，onload 事件也是如此。该代码在功能上等同于：

```
imgArr[i].onload = loadArr[i] = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:40:23.737

您必须像这样将索引值传递给匿名函数，

```
for (var i = 0; i < imgCount; i++) {
    loadArr[i] = false
    imgArr[i] = new Image()
    imgArr[i].src = 'img' + i + '.png'
    imgArr[i].onload = function (index) {
        return function () {
            loadArr[index] = true //but wait! At the end of
            //the loop, i is imgCount
            //so this doesn't work.
        };
    }(i);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T13:43:34.690

这就是关闭的原因！您的循环几乎立即运行，并且在加载第一张图像之前很久就结束了。所以 i==imgCount 立即“跳过”所有其他值。闭包可以避免这种情况并将 i 的每个值影响到不同的图像。

但是，在您的情况下，我确实会为每个图像添加一个“加载”属性。

```
// Construct your image array
for (var i = 0; i < imgCount; i++) {
    imgArr[i] = new Image();
    imgArr[i].src='img'+i+'.png';
}

//Then iterate over the array, adding a 'loaded' attribute when it occurs
imgArr.each(function(){
    $(this).onload(function() {
        $(this).attr('loaded','true');
    });
} 
```

# netty - 寻求关于共享 Netty 老板/工人池的建议

> ID：15587331
> 
> 赞同：1
> 
> 时间：2013-03-23T13:31:33.537
> 
> 标签：netty

上下文：Netty 3.6.3.Final、Java 1.7、Scala 2.9.x

为了尽量减少（可能空闲的）线程的数量，我想与不同的 NIO 套接字通道工厂（TCP）和一个 NioDatagramChannelFactory 共享 NIO 客户端/服务器和工作池。我正在使用至少两套（或三套 Finagle 堆栈）服务器/客户端引导程序集，每套都有自己的 NIO 套接字通道工厂。为每个老板和工作池使用新的缓存线程池会导致大部分时间不使用的线程负载。粗略的目标是将所有引导程序/通道工厂的工人数量限制为 2 * CPU 核心数，并将老板数限制为 CPU 核心数。

我正在尝试为我自己的一组引导程序切换到 NioServer/ClientBossPool 和 NioWorkerPool。但是根据底层 ThreadPoolExecutor 的配置，关闭引导程序会导致主线程在 AbstractNioSelector 关闭闩锁上永远等待。

```
class NioClientBossPoolTest {

  @Test def shutdown() {
    val corePoolSize = 1
    val maxPoolSize = Integer.MAX_VALUE
    val keepAliveSeconds = 60
    val keepAliveUnit = TimeUnit.SECONDS

    val blocking = true
    val queue: BlockingQueue[Runnable] =
      if(blocking) new LinkedBlockingQueue[Runnable](Integer.MAX_VALUE)
      else new SynchronousQueue[Runnable]()

    val executor = new ThreadPoolExecutor(corePoolSize,
        maxPoolSize,
        keepAliveSeconds,
        keepAliveUnit,
        queue)

    val clientBossPool = new NioClientBossPool(executor, 1) // B
    new NioServerBossPool(executor, 1) // C
    val workerPool = new NioWorkerPool(executor, 1) // A

    val channelFactory = new NioClientSocketChannelFactory(clientBossPool, workerPool)
    val bootstrap = new ClientBootstrap(channelFactory)

    // hangs waiting for shutdown latch in AbstractNioSelector (NioWorker or NioClientBoss
    // depending on the order of statement A, B, C) for
    // LinkedBlockingQueue, corePoolSize = 1 and sequence of statements A, B and C other than [B, A, C]
    // LinkedBlockingQueue, corePoolSize = 2 and sequence of statements A, B and C other than
    // [A, B, C], [B, C, A] and [C, B, A]
    bootstrap.shutdown()
  }
} 
```

我很确定执行器服务配置必须满足一些特定要求，但是哪个（核心池大小、队列类型）？bootstrap.shutdown() 将永远阻塞，除非语句 A、B 和 C 的执行顺序正好是 [B, A, C]。对于三个语句的六种组合中的三种，将核心池大小增加到 2 个块。核心池大小 > 2 或 SynchronousQueue 时，每个组合都会终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:35:48.713

实际上，这似乎是一个错误。我认为如果 xou 为老板和工人池使用不同的执行器，它会起作用。你能打开一个错误报告吗？

# c# - 计算与字符串中的模式匹配的标记数

> ID：15587335
> 
> 赞同：1
> 
> 时间：2013-03-23T13:31:51.867
> 
> 标签：c#, c++, regex, pattern-matching

一种计算与字符串中的模式匹配的标记数的方法。

记号是“$”后跟“$$”，“$”和“$$”之间可以有任意数量的字符。

例如：`"$123$$, $ab$$, $qqwe123$$`

输入字符串可以是`"$122$$dddd$1aasds$$"`.

对于上述字符串，该方法的输出应为 2。

编程语言可以是 C# 或 C++。

这是我想出的代码，但试图找到最好的方法：

```
static int CalculateTokenCount()
        {
            string s = "$ab$$ask$$$$123$$";
            int tokenCount = 0;
            bool foundOneDollar = false;
            bool foundSecondDollar = false;

            if (string.IsNullOrEmpty(s))
            {
                return tokenCount;
            }
            for (int i = 0, x = 0; i < s.Length; i++)
            {
                if (s[i] == '$' && !foundOneDollar)
                {
                    foundOneDollar = true;
                    continue;
                }

                if (foundOneDollar)
                {
                    if (s[i] == '$' && !foundSecondDollar)
                    {
                        foundSecondDollar = true;
                        continue;
                    }
                }

                if (foundSecondDollar)
                {
                    if (s[i] == '$')
                    {
                        tokenCount++;
                    }  
                    foundSecondDollar = false;
                }
            }
            Console.WriteLine(tokenCount);
            return tokenCount;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:33:57.920

看看使用类似的东西

[Regex.Matches 方法（字符串）](http://msdn.microsoft.com/en-us/library/e7sf90t3.aspx)

> 在指定的输入字符串中搜索所有出现的正则表达式。

也可以看看[正则表达式语言 - 快速参考](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:55:48.387

您可以使用以下正则表达式

```
\$.*?\$\$ 
```

这会检测中间的*任意*数量的字符，甚至是零个字符。如果您需要至少一个字符，请替换`*`为`+`.

正如@astander 已经说过的，要检索匹配数，请使用`Regex.Matches`

```
string input = "$122$$dddd$1aasds$$";
string pattern = @"\$.*?\$\$";
Regex rgx = new Regex(pattern);
MatchCollection matches = rgx.Matches(input);
int count = matches.Count(); 
```

# javascript - node.js 实现背后的基本思想？

> ID：15587337
> 
> 赞同：1
> 
> 时间：2013-03-23T13:31:57.560
> 
> 标签：javascript, node.js, server-side

这是我目前关于 node.js 将如何工作的理论：

1.  我在我的服务器上安装 node.js 以便它可以解释 javascript 文件。
2.  然后我编写我的 javascript 文件并将它们放在我的服务器上（就像我使用 PHP 文件一样）。
3.  然后我通过我的客户端 javascript 与这些文件进行交互。

显然我有问题，因为过去一个小时左右我一直在寻找一个教程，它将教我如何在我的服务器上安装它 - 但他们似乎都专注于在本地安装它。

有人可以简要说明最终实施将如何工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:36:24.957

您可以像安装任何其他机器一样将它安装在“服务器”上——通过[安装程序](http://nodejs.org/download/)或[包管理器](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)进行管理员/根访问。

现在，这假设“服务器”指的是计算机。相反，如果您指的是现有的“服务器应用程序”，例如 Apache 或 IIS——Node.js 不会直接与这些集成。它主要替换它们，允许您从相当低的级别将整个服务器应用程序定义为脚本。

可以在[项目的主页](http://nodejs.org/)上找到这样的脚本：

> 这个用 Node 编写的简单 Web 服务器对每个请求都响应“Hello World”。
> 
> ```
> var http = require('http');
> http.createServer(function (req, res) {
>   res.writeHead(200, {'Content-Type': 'text/plain'});
>   res.end('Hello World\n');
> }).listen(1337, '127.0.0.1');
> console.log('Server running at http://127.0.0.1:1337/'); 
> ```
> 
> 要运行服务器，请将代码放入文件中，然后从命令行`example.js`使用程序执行它：`node`
> 
> ```
> % node example.js
> Server running at http://127.0.0.1:1337/ 
> ```

除了这个示例之外，您还需要检查[`req.method`](http://nodejs.org/api/http.html#http_message_method)and [`req.url`](http://nodejs.org/api/http.html#http_message_url)，通常通过[路由器](https://npmjs.org/browse/keyword/router)或[Web 框架](https://npmjs.org/browse/keyword/web-framework)来确定如何响应。[`express`](https://npmjs.org/package/express)或者[`compoundjs`](https://npmjs.org/package/compoundjs)是开始的不错选择。

您仍然可以将其他服务器应用程序用作 Node.js 的 HTTP 代理，从而传递流量。但 Node.js 仍将单独运行。如果您使用的是 IIS，甚至还有[iisnode](https://github.com/tjanczuk/iisnode)涵盖了大部分设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:39:06.813

Node.js 是一个服务器端 JavaScript 引擎，它使您能够使用 JavaScript 语言构建 Web 服务器。它类似于 Apache 上的 PHP 和 IIS 上的 C#。不同的是，Node.js 是基于事件的，它不会像 C# IIS 那样创建很多线程。因此，Node.js 具有处理高并发请求的潜力。对于 Node.js 教程，您可以参考 Node.js 网站：[http ://nodejs.org/api/](http://nodejs.org/api/)

> 然后我通过我的客户端 javascript 与这些文件进行交互。

我不同意你的观点，因为 Node.js 所做的只是创建一个 Web 服务器，服务器和客户端之间的任何交互都是基于 HTTP 的，这意味着 Node.js Web 服务器从客户端响应你的请求。

# c++ - 向量构造函数和垫子

> ID：15587349
> 
> 赞同：1
> 
> 时间：2013-03-23T13:32:27.363
> 
> 标签：c++, opencv, vector

如何在 OpenCV 中将 3 元素向量构造函数与 Mat 相乘？我尝试了以下但它抛出了一个错误：

```
cv::multiply(src, cv::Vec<_Tp, 3>(2.0, 1.0, 1.0), src); 
```

它给出了以下错误：

```
OpenCV Error: Assertion failed (src2.type() == CV_64F && (src2.rows == 4 || src2.rows == 1)) in arithm_op, file /Users/abhishek/Documents/OpenCV-2.4.3/modules/core/src/arithm.cpp, line 1275
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:20:49.630

你有没有尝试过：

```
cv::multiply(src, cv::Scalar(2.0, 1.0, 1.0), src); 
```

# python - 使用正则表达式在路径中查找文件

> ID：15587350
> 
> 赞同：-2
> 
> 时间：2013-03-23T13:32:33.603
> 
> 标签：python, regex

我有一些文件到这样的目录中：

```
XXXXX_<start_time>_<end_time>.log
YYYYY_<start_time>_<end_time>.log
ZZZZZ_<start_time>_<end_time>.log 
```

我需要编写一个 python 脚本来搜索作为参数给出的 start_time 和 end_time 之间的文件。

我会尝试使用正则表达式，但我是初学者！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:34:31.920

您可以使用类似这样的正则表达式：

```
[A-Z]{5}_(.*)_(.*)\.log 
```

或者，您可以按以下方式拆分`.`：

```
"XXXXX_<starttime>_<endtime>", "log" 
```

然后将第一个结果除以`_`并取第二个和第三个索引。

```
"XXXXX", "<starttime>", "<endtime>" 
```

所以，

```
'XXXXX_<starttime>_<endtime>.log'.split('.')[0].split('_') 
```

结果是：

```
['XXXXX', '<starttime>', '<endtime>'] 
```

第二个选项肯定更容易，但如果格式发生变化（例如`DEFGH<starttime>__<endtime>.log`，正则表达式会更具适应性。

# laravel - 检查经过身份验证的用户是否也是另一个模型的实例的最佳方法是什么？

> ID：15587351
> 
> 赞同：0
> 
> 时间：2013-03-23T13:32:35.230
> 
> 标签：laravel, laravel-3

我正在使用普通的 auth eloquent 驱动程序对用户进行身份验证。
我还想检查用户（登录后）是否也是另一个模型的实例。
我发现他有一个包含所有 model_2 数据的数组，但检查它是否为空
听起来像是一种解决方法。
我应该如何解决这个问题？

模型 1：Auth::user
模型 2：教师

```
if(Auth::check) {// check for logged in
    if(Auth::user()->is_teacher() ? // -- how can I do this? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:49:55.030

也许这对你有用：

```
$email = Auth::user()->email;
$match = false;

if (Teacher::where('email','=',$email)->first() != NULL) {
    $match = true;
}

return $match; 
```

# c# - 找不到 Facebook.FacebookClient

> ID：15587353
> 
> 赞同：0
> 
> 时间：2013-03-23T13:32:42.750
> 
> 标签：c#, facebook-c#-sdk

自 dotNet 大约 10 年前发布以来，我一直在使用它，所以我对它有相当好的把握。我正在使用 VB 2008 和 C# 2008。

我的目标是使用 dotNet 的桌面应用程序与 FB 建立连接。（并从那里与 fb 交互，无需打开浏览器。）

在我看来，fb 已经改变了一次或两次关于如何连接的协议，所以我发现的一些代码示例可能已经过时了。

最初我使用的是与“FacebookAuthClient”（此论坛）相关的示例，但由于我在 facebook 命名空间中看不到它，我发现它已被删除，取而代之的是“FacebookClient” - 从 V6 开始。

我使用了 facebook.dll 版本 0.2009.5.8 和版本 3.0.1.0，以及与之捆绑的所有其他程序集，并在对象浏览器中进行了搜索（Visio Studio VB2008 和 C#2008）

在此论坛上连接的最新示例提供：

var fb = 新的 FacebookClient(); （我在课堂上添加了“使用 Facebook；”）。

我已经搜索[http://facebooksdk.net/](http://facebooksdk.net/) 并导航到 GitHub 和 Microsoft facebook C# SDK - 我仍然找不到“Facebook.FacebookClient”存在的程序集。

基本上是询问 Facebook C# SDK 的最新存储库的位置。

我真的很感激帮助。J。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:55:50.670

找到了我自己的答案——难怪我遇到了这么多麻烦。

我必须使用 neget.exe 构建我自己的 facebook.dll（与 linux 世界中使用的 apt-get 命令非常相似——我没想到会这样）。

我实际上在我曾经去过的领域找到了答案，我只是忽略了解决方案，因为它似乎不是我想要的。

1.  转到“ [https://github.com/facebook-csharp-sdk/facebook-winclient-sdk](https://github.com/facebook-csharp-sdk/facebook-winclient-sdk) ”

2.  滚动到页面底部附近查找 NuGet。查找链接“NuGet.exe 命令行”（“ [http://nuget.codeplex.com/downloads/get/222685](http://nuget.codeplex.com/downloads/get/222685) ”）并单击。（或者更好的是右键单击并在新选项卡中打开）。

3.  您可以选择 NeGet 引导程序或 NuGet 命令行（我选择命令行，因为我的 VisioStudio 是 2008 年的）。

4.  保存下载的文件“NuGet.exe” - 我将其移至“C:\tmp_fb”以便于命令行访问。

5.  返回第一个网页（在步骤 2 中提到），然后在剪贴板中复制命令“nuget install Facebook.Client -pre”。

6.  打开命令行外壳。（点击开始，运行，输入“cmd”）。将目录更改为保存 NuGet.exe 的位置，在我的例子中是 c:\tmp-fb。

所以只需输入： cd c:\tmp-fb

1.  现在输入：Install-Package Facebook.Client -pre

2.  安装时，您将在屏幕上收到一些消息解决依赖关系等...以及一些成功安装。

我希望这可以帮助别人。

# android - 为了让我的安卓相机闪光灯打开，缺少什么？

> ID：15587356
> 
> 赞同：0
> 
> 时间：2013-03-23T13:32:51.250
> 
> 标签：android, flashlight

我正在尝试创建一个基本的查找我的电话应用程序，但遇到了一些问题。到目前为止，我可以向我的手机发送一个密码字并让它播放一首歌曲。接下来，我希望能够输入一个不同的关键词，并让它以稳定的光线或脉动的方式打开相机闪光灯。到目前为止，我已经看到了大量的示例代码，但我不明白为什么它对我不起作用。

我已在清单中包含访问相机和相机闪光灯的权限。我已经尝试了此链接中的两个示例[Setting Parameters.FLASH_MODE_TORCH doesn't work on Droid X 2.3](https://stackoverflow.com/questions/6881004/setting-parameters-flash-mode-torch-doesnt-work-on-droid-x-2-3)

然而，我见过的其他几个打开相机闪光灯的选项需要整个类而不是一个小函数。

这是我到目前为止的代码：

```
import java.util.Timer;
import java.util.TimerTask;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.graphics.Camera;
import android.hardware.*;
import android.hardware.Camera.Parameters;
import android.media.MediaPlayer;
import android.net.Uri;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver {

    public static final String SMS_EXTRA_NAME = "pdus";
    public static final String SMS_URI = "content://sms";

    public void onReceive(Context context, Intent intent) {
        // Get SMS map from Intent
        Bundle extras = intent.getExtras();

        String messages = "";

        if (extras != null) {
            // Get received SMS array
            Object[] smsExtra = (Object[]) extras.get(SMS_EXTRA_NAME);

            // Get ContentResolver object for pushing encrypted SMS to incoming
            // folder
            ContentResolver contentResolver = context.getContentResolver();

            for (int i = 0; i < smsExtra.length; ++i) {
                SmsMessage sms = SmsMessage.createFromPdu((byte[]) smsExtra[i]);

                String body = sms.getMessageBody().toString();
                String address = sms.getOriginatingAddress();

                messages += "SMS from " + address + " :\n";
                messages += body + "\n";

            }

            // Display SMS message
            Toast.makeText(context, "WE GOT A MESSAGE", Toast.LENGTH_SHORT)
                    .show();

            // plays eye of the tiger for 45 seconds
            if (messages.contains("Hey Sarah")) {
                final MediaPlayer mp = MediaPlayer.create(context,
                        R.raw.sound_file_1);
                mp.start();

                // play ring tone for 45 seconds
                new Timer().schedule(new TimerTask() {
                    @Override
                    public void run() {
                        mp.stop();
                    }
                }, 45000);
            }

            //turn the flash on 
            if (messages.contains("Hey Geoff")) {

                Camera mCamera = Camera.open();
                mCamera.startPreview();
                Camera.Parameters params = mCamera.getParameters();
                if (params.getFlashMode() != null) {
                        params.setFlashMode(Camera.Parameters.FLASH_MODE_TORCH);
                }
                mCamera.setParameters(params);
            }
        }
    }
} 
```

似乎 camera.open() 存在问题（错误：方法 open() 未定义为 Camera 类型）与 startPrevies() （错误：将演员表添加到 mCamera）与 Camera.Parameters（错误：Camera.Parameters）。参数无法解析为类型）等。

此代码片段是否尝试访问 android.graphics.Camera 而不是 android.hardware.Camera 的问题？我是 android 的新手，所以这对我来说是一个陡峭的学习曲线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:48:49.497

需要删除 import android.graphics.Camera - 否则不清楚正在使用哪个相机。

一直在学习新事物！

# google-app-engine - BadRequestError：不能在具有相等过滤器的属性上使用投影

> ID：15587363
> 
> 赞同：1
> 
> 时间：2013-03-23T13:33:36.277
> 
> 标签：google-app-engine

在下面的代码片段中，当我尝试执行这两行时，我得到了这个错误：“BadRequestError: cannot use a projection on a property with a equal filter”

```
myname = self.response.get('state') 
```

qy1=db.GqlQuery(*SELECT name,phoneNumber,description,city,state FROM Table1 WHERE state =:1",myname)

在此之后我确实有一个 for 循环来遍历 qy1 中 i 的结果集：（做一些 json 转储）现在 state 字段是 StringProperty ，甚至做 str(myname) 也会产生相同的结果。我一直在寻找他们说你应该做我以前做过的事情或者做“一些字符串”中的状态，但是如果我把它改成那个，我会得到一个错误，它不是一个列表。

有什么建议吗？

完整的堆栈跟踪是：

```
INFO     2013-03-23 14:12:08,756 dev_appserver.py:3103] "POST /sendNearByPlaces.html HTTP/1.1" 500 -
ERROR    2013-03-23 14:12:22,023 webapp2.py:1552] cannot use projection on a property with an equality filter
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1535, in __call__
    rv = self.handle_exception(request, response, e)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1529, in __call__
    rv = self.router.dispatch(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
    return route.handler_adapter(request, response)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
    return handler.dispatch()
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 572, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\defiant\Desktop\PythonServer\bar.py", line 368, in post
    for i in qy1:
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\db\__init__.py", line 2326, in next
    return self.__model_class.from_entity(self.__iterator.next())
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\datastore\datastore_query.py", line 2892, in next
    next_batch = self.__batcher.next()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\datastore\datastore_query.py", line 2754, in next
    return self.next_batch(self.AT_LEAST_ONE)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\datastore\datastore_query.py", line 2791, in next_batch
    batch = self.__next_batch.get_result()
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\datastore\datastore_query.py", line 2528, in __query_result_hook
    self._batch_shared.conn.check_rpc_success(rpc)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\datastore\datastore_rpc.py", line 1224, in check_rpc_success
    raise _ToDatastoreError(err)
BadRequestError: cannot use projection on a property with an equality filter
INFO     2013-03-23 14:12:22,075 dev_appserver.py:3103] "POST /sendNearByPlaces.html HTTP/1.1" 500 - 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T04:04:18.967

根据[文档](https://developers.google.com/appengine/docs/python/datastore/queries#Projection_Queries)“您不能投影在相等过滤器中也引用的属性。例如，不支持 SELECT A FROM kind WHERE A = 1，但 SELECT A FROM kind WHERE B = 1 或 SELECT A FROM kind WHERE A >支持1。”

[编辑]简而言之：

```
qy1=db.GqlQuery(*SELECT name,phoneNumber,description,city,state FROM Table1 WHERE state =:1",myname) # WRONG 
qy1=db.GqlQuery(*SELECT name,phoneNumber,description,city       FROM Table1 WHERE state =:1",myname) # CORRECT 
```

[/编辑]

# html - 使用 JSON 文件中的值分配页面上的元素

> ID：15587367
> 
> 赞同：1
> 
> 时间：2013-03-23T13:33:49.510
> 
> 标签：html, ajax, json

我有一个多语言 Web 应用程序，我想将所有文本存储在 JSON 文件中，并为每个页面上的每个元素加载每个文本。例如：

```
$("h1.text1").append(data[language]['startpage'][0]['text1']); 
```

Tjis 将根据语言在 h1.text1 中显示不同的文本。

目前，我给每个元素一个唯一的类，例如 h1.text1 并在 JSON 中由该类调用它们，例如。文本：“标题”。然后我像上面的例子一样用 JQuery 分配它们。只是想知道是否有更好的方法来做到这一点？因为我要在每个页面的每个元素中分配很多代码行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:39:39.040

我可能会这样做的方式是使用数据标签：

```
<div data-translate="myTranslateIdHere"></div> 
```

然后你可以让你的 json 数据包含数据翻译 id。这在javascript中会很简单。您可以遍历您的 json 数组，并使用 data-translate id 来查找元素，并设置该元素的文本。如下所示：

```
$(myJSON).each(function(key, val) {
    $("[data-translate='" + val["translateId"] + "']").text(val["translateValue"]);
}); 
```

然后，您只需更新您的 JSON 以获得正确的结构，并将 translateId 映射到 translateValue。显然，您还必须重新编写上面的 JavaScript 以适应您的 JSON，这只是该想法的一个快速示例。

# c# - 将数据行传递给表单并将控件绑定到它

> ID：15587369
> 
> 赞同：4
> 
> 时间：2013-03-23T13:34:01.130
> 
> 标签：c#, data-binding, crud, datarow

许多小时的互联网搜索没有发现这个问题的明确答案，所以我想我会重新散列它。我需要将数据行传递给表单，然后将该表单中的控件绑定到数据行中的值。Datarow 是由一个类方法创建的：

```
DataRow newRow = cusData.PrimeRecord();
newRow["recordid"] = cusData.GetRecordID();
newRow["recdate"] = DateTime.Now;
newRow["lastmod"] = DateTime.Now;
CusUpdate updateFrm = new CusUpdate(newRow); 
```

其中 PrimeRecord() 方法使用以下代码定义：

```
public DataRow PrimeRecord(){    
    DataTable dt = new DataTable();
    MySqlCommand cmd = new MySqlCommand("SELECT * FROM "+tableName+" LIMIT 1",sqlConnect);
    MySqlDataAdapter da = new MySqlDataAdapter(cmd);
    da.FillSchema(dt,SchemaType.Mapped);
    DataRow dr = dt.NewRow();
    return dr;
} 
```

我所有的数据库 CRUD 代码都已定义，我不想绑定到 DataAdapters 等。我只想将 DataRow 传递给表单，更新数据然后将其传递给正确的 CRUD 方法。我会接受任何建议。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T14:03:17.853

您可以使用`Windows Forms`. 不幸的是，您不能直接使用该对象（请参阅该类的`DataRow`备注部分）。改用表格/视图，在表单内：[`ctor`](http://msdn.microsoft.com/en-us/library/4wkkxwcz.aspx)`Binding`

```
DataView dv = row.Table.DefaultView;
dv.RowFilter = "recordid=" + row["recordid"].ToString();
dtpRecDate.DataBindings.Add("Value", dv, "recdate");
dtpLastMod.DataBindings.Add("Value", dv, "lastmod"); 
```

传递给表单构造函数`row`的对象在哪里，并且是控件。`DataRow``dtpRecDate``dtpLastMod`[`DateTimePicker`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datetimepicker.aspx)

# jquery - Web 服务在生产环境中返回“301 错误永久移动”

> ID：15587374
> 
> 赞同：0
> 
> 时间：2013-03-23T13:34:52.837
> 
> 标签：jquery, web-services, iis, relative-path

我正在使用 jQuery 调用 Web 服务，但我遇到了一个非常奇怪的问题，我整个早上都遇到了问题。当我在开发环境中调用 Web 服务时，一切正常。投入生产时，我从 Firebug 获得“301 Moved Permanently 38ms”。

我的脚本是这样的：

```
 var data = '{"product":"' + productName + '", "from":"' + from + '", "question":"' +     question + '", "phone":"' + phone + '", "type":"' + typeOfMail + '"}';
$.ajax({
    type: "POST",
    datatype: "json",
    data: data,
    url: '<%= Page.ResolveUrl("~/Services/MailService.asmx/SendProductEmail") %>',
    contentType: "application/json; charset=utf-8",
    success: function (data) {
        resetContactControls();
        $('#<%=AskQuestionProductBtn.ClientID %>').hide();
    },
    failure: function (data) {
    }
}); 
```

这在生产中编译为以下 URL：

```
url: '/Services/MailService.asmx/SendProductEmail' 
```

在我的生产环境中，使用 Firebug 我可以看到它试图访问我的 URL：

```
http://www.hcemballering.dk/Services/MailService.asmx/SendProductEmail 
```

当手动尝试打开此 URL 时，我点击了我的网络服务。我也尝试过更改网址，所以它只使用正常的 ../Services/MailService.asmx/SendProductEmail 。

我还尝试查看我的安全设置，它应该可以工作（所有进程都可以访问）。我什至试图让用户“每个人”完全访问“服务”，所以这不应该是问题。

这是我的网络服务类：

```
[ScriptService]
public class MailService : System.Web.Services.WebService {

    ILog logger = LogManager.GetLogger(typeof(MailService));

    [WebMethod]
    public bool SendProductEmail(string product, string from, string question, string phone, string type)
    {
        try
        {

            StringBuilder content = new StringBuilder();

            content.AppendLine(
                string.Format(
                    "Produkt:<br/>{0}<br/><br/>Fra email:<br/>{1}<br/><br/>Telefon:<br/>{2}<br/><br/>Type af henvendelse:<br/>{3}<br/><br/>Spørgsmål:<br/>{4}",
                    product, from, phone, type, question));
            var module = new MailModule(content.ToString(), "Kontakt om HC produkt: " + product);
            module.SendMail();
        }
        catch (Exception exp)
        {

            throw new Exception("Mailen blev desværre ikke sendt, da der skete en fejl");
        }

        return true;
    }

} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:42:32.600

好吧，这很愚蠢。

这是由我的 web.config 中的规则引起的。我有以下规则：

```
 <rule name="LowerCaseRule1" stopProcessing="true">
          <match url="[A-Z]" ignoreCase="false"/>

          <action type="Redirect" url="{ToLower:{URL}}"/>
        </rule> 
```

当然，我的 URL 不是小写的。所以我这样做了：

```
 <rule name="LowerCaseRule1" stopProcessing="true">
          <match url="[A-Z]" ignoreCase="false"/>
          <conditions>
            <add input="{URL}" matchType="Pattern" pattern="^.+\.((axd)|(js)|(xaml)|(asmx))$" ignoreCase="true" negate="true"/>
          </conditions>
          <action type="Redirect" url="{ToLower:{URL}}"/>
        </rule> 
```

并且还把所有的东西都小写了，只是因为它的风格很好。

它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:38:45.810

当您手动点击 Web 服务时，您正在使用 GET。你 ajax 正在使用 POST。您的 Web 服务是否设置为接收 POST？

# android - 我在做什么错 - MapView 上的灰色方块

> ID：15587379
> 
> 赞同：1
> 
> 时间：2013-03-23T13:35:15.900
> 
> 标签：android, google-maps, android-manifest

我将我的应用程序的 SH1 提供给：`https://code.google.com/apis/console`，然后我输入了我的应用程序映射键的 API。然后导出为签名的.apk。

我只能看到一个灰色方块而不是我的地图，虽然所有功能都在工作，但我看不到地图视图......

我的清单是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="in.adam.hems20"
    android:versionCode="20"
    android:versionName="3.0"
     >

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"
        />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="13"
        />

    <uses-permission android:name="in.adam.hems10.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.SEND_SMS"/>
    <uses-permission android:name="android.permission.READ_CONTACTS"
        />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar" 
        >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name="in.adam.hems10.MainActivity"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="in.adam.hems10.Settings"
            android:label="@string/title_activity_setting" 
            android:theme="@style/AppTheme"
            android:screenOrientation="portrait">
        </activity>
    </application>

</manifest> 
```

我错过了什么吗？....我真的很绝望。

谢谢 ：-（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:59:58.557

正如@CommonsWare 已经提到的那样，您正在使用这两个 API，这就是您得到灰色方块而不是地图的原因。这是我写的关于如何实现 Google Maps API V2 的博客文章：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

# jquery - 移动页面更改返回到页面中的特定位置

> ID：15587385
> 
> 赞同：0
> 
> 时间：2013-03-23T13:35:37.213
> 
> 标签：jquery, jquery-mobile

```
$.mobile.changePage($("#apage#alocationinpage")); 
```

我正在探索一种响应式网页设计技术，在这种技术中，您可以在小型设备上向下滚动一个大页面，但在更大的屏幕上，页面部分会浮动到 2 或 3 列中。

因此，当我执行诸如从对话框返回之类的操作时，我想返回到页面下方的位置。我在想我可以使用一些版本的

```
$("#aroom").animate({ scrollTop: 300 }, "slow"); 
```

如何从对话框返回到页面中的特定位置？

# ember-data - 使用 ember-data basic-Adapter 创建记录

> ID：15587387
> 
> 赞同：1
> 
> 时间：2013-03-23T13:35:49.923
> 
> 标签：ember-data

我有几个关于使用 basicAdapter api 来创建记录的问题。假设我有两个模型，如下所示，并且我想创建父记录，等待响应然后创建子记录，这是这样做的方法：

```
App.Contact = DS.Model.extend({
  address: DS.belongsTo("App.OneChild") 
});

App.Address = DS.Model.extend({
  street: DS.attr("string")
}); 
```

然后我在路由模型钩子或模型中创建记录。

```
contact = App.Contact.sync = {
   createRecord: function(contact, process) {
    process(contact).save();
  });
},

contact.on('didCreate', async(function() {
 address = App.Address.sync = { 
    createRecord: function(address, process){
     process(address).save();
    });
 }
}); 
```

**问题2**

我也可以做一个这样的嵌套帖子。这不是真正的代码，我只是修改了代码，以便从他们的博客文章**中发出 ajax getJson 查找****[请求](http://emberjs.com/blog/2013/03/22/stabilizing-ember-data.html)。**

```
 App.Contact.sync = {
   createRecord: function(contact, process) {
    $.post("/contacts/1/addresses/create", { contact_name: id   }).then(function(contact) {        
     process(contact)                 
      .primaryKey('contact_name')
      .camelizeKeys()
      .save();
     });
  } 
```

**问题 3**

另外，在调用createRecord之前我是否总是需要像上面那样定义一个**同步对象**，如果是这样，是否意味着我只能从定义了同步函数的模型中调用createRecord。或者，我仍然可以从路由器或控制器调用 createRecord，而与定义**同步对象**的位置无关。代码中的一个示例将很有用。

谢谢你看这个。

# php - mysql_num_rows() 导致警告

> ID：15587388
> 
> 赞同：-1
> 
> 时间：2013-03-23T13:35:54.190
> 
> 标签：php, html, mysql

我遇到了 mysql_num_rows 的问题。当我尝试登录时，会出现以下警告：

### 警告：mysql_num_rows() 期望参数 1 是资源，在 #no 行的 path/to/userClass.php 中给出的对象。

我搜索了那个错误，得到了那个错误，这是由于错误的 sql 查询引起的。但我不确定。请帮忙。

# 用户类.php

## 登录功能

```
$sql = "SELECT id, username FROM `user` WHERE username = '$username' AND hashed_password ='$password'";

$result = mysqli_query( $this->con, $sql );
if ( !$result ) die ("Database query failed" . mysql_error());
else{
    $count = mysql_num_rows( $result );
        if( $count == 1 ){
            $found_user = mysql_fetch_array( $result );
            $_SESSION['user_id'] = $found_user['id'];
            $_SESSION['username'] = $found_user['username'];    
            header( "Location:{$location}" );
        }else{ 
            //username/password combo was not found in the database
            $this->pass_notverified = "Username/password incorrect.";                       
            return;
        }
} 
```

# 头文件.php

```
<?php require_once 'class/userClass.php';?>
<?php $obj = new userClass;?> 

<?php 
if( isset( $_POST['login'] ) ){
    $obj->login( $_POST,"home.php" );
}?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:40:39.817

简单的解决方案：

```
$result = mysqli_query( $this->con, $sql ); 
```

和

```
$count = mysql_num_rows( $result );
$found_user = mysql_fetch_array( $result ); 
```

不要一起工作。使用 $count 和 $found_user 的 mysqli 函数（你可以在[这里](http://www.php.net/manual/en/book.mysqli.php)找到它们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:45:53.103

使用`mysqli_num_rows`代替`mysql_num_rows`和`mysqli_fetch_array`代替`mysql_fectch_array`。

你不能使用 mysql 和 mysqli functiins 的组合

# java - Java 构建一个基本的 WebServer 如何将标头发送到浏览器

> ID：15587389
> 
> 赞同：0
> 
> 时间：2013-03-23T13:35:59.643
> 
> 标签：java, http

我仍在学习 java 并尝试使用 Sockets 构建一个基本的 WebServer，现在我让服务器正常工作并将输出数据发送回浏览器，但我不确定如何发送我认为它们只是“\r\n”的标头\r\n" 来自内容正文

这就是我当前写入浏览器的方式

```
Socket socket = socketServer.accept();
System.out.println("Web Request From: "+socket.getInetAddress().toString());

BufferedReader in = new BufferedReader(
     new InputStreamReader(socket.getInputStream())
);
PrintWriter out = new PrintWriter(socket.getOutputStream());
Stirng output = "<!DOCTYPE html><html><body><h1>403 Forbidden</h1></body></html>"
out.write(output, 0, output.lenght());
out.flush();
out.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:42:50.200

将标题放在输出字符串中，彼此之间用 . 分隔，`\r\n`与主体之间用 . 分隔`\r\n\r\n`。或者，使用 PrintWriter 只需一个一个地打印它们，一个空行，然后是正文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:08:23.957

你应该看看[NanoHttpd](https://github.com/elonen/nanohttpd/blob/master/NanoHTTPD.java)。它是一个单文件 Web 服务器，玩起来很有趣。他们正在发回标头，因此您应该能够相当轻松地查看他们的代码并了解他们在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:16:23.597

您被迫先发送 HTTP 信息

```
out.println("HTTP/1.0 200"); 
```

在发送任何其他代码或主体之前需要

# mysql - 在另一个 jsp 文件中使用 ResultSet 值

> ID：15587391
> 
> 赞同：0
> 
> 时间：2013-03-23T13:36:40.260
> 
> 标签：mysql, jsp, session, resultset

我正在尝试在另一个 jsp 文件中使用结果集值，但我正在`null`访问网站。

```
<%
    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/database", "root", "root");
        Statement st = con.createStatement();
        ResultSet rs = st.executeQuery("select * from users");
        String var = null;
        while (rs.next()) {
            var = rs.getString(2);
        }
       session.setAttribute("var1", var);
        response.sendRedirect("Select.jsp");

    } catch (Exception e) {
    }
%> 
```

选择.jsp：

```
<% out.println(request.getParameter("var1")); %> 
```

selct1.jsp 正在显示`null`。哪里有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:04:16.300

你坐在参数 using`setAttribute`但你试图获取 using `getParameter`，

使用方法获取结果`getAttributes`：-

```
<% out.println((String)request.getAttribute("var1")); %> 
```

或与

```
<% out.println(session.getAttribute("var1")); %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:43:45.313

我认为问题在于您正在设置`session`范围内的值：

```
session.setAttribute("var1", var); 
```

但是您正试图从`request`范围中获取它：

```
request.getParameter("var1") 
```

所以保持相同的范围（两者`session`或两者`request`）。

此外，您应该避免在 JSP 中使用 scriplets，因为不建议这样做。

# c++ - Gnu C++ 4.8 thread_local 实现背后的机制是什么，确切的“运行时惩罚”是什么？

> ID：15587393
> 
> 赞同：2
> 
> 时间：2013-03-23T13:37:06.030
> 
> 标签：c++, gcc, c++11, thread-local, gcc4.8

gcc 4.8.0 添加了 `thread_local`来自 C++11 标准的实现。[更改](http://gcc.gnu.org/gcc-4.8/changes.html)状态可能存在“运行时惩罚” ：

> G++ 现在实现了 C++11`thread_local`关键字；[...]不幸的是，这种支持**需要对在不同翻译单元中定义的非函数局部`thread_local`变量的引用进行运行时惩罚，即使它们不需要动态初始化**，[...]。
> 
> 如果程序员可以确定在非定义 TU 中没有使用变量需要触发动态初始化（或者因为变量是静态初始化的，或者在定义 TU 中的变量的使用将在另一个使用之前执行） TU），他们可以使用 -fno-extern-tls-init 选项避免这种开销。

谁能向我解释 G++ 对`thread_local`全局变量的作用？

*   一般机制是什么？
*   是什么导致了开销？
*   每次访问涉及多少开销？指针间接？昂贵的锁？
*   究竟在什么情况下没有开销？

从更改说明中，我假设例如这不会产生开销：

```
thread_local Data data { 1000 };

void worker() {
    for(auto &elem : data)
        elem.calulcate();
} 
```

因为`data`在同一个翻译单元？

`worker`如果并且`data`在不同的翻译单元中，这将如何变化？这是一个例子吗？

```
// module.cpp

void worker();

thread_local Data data { 1000 };

void start() {
    worker();
}

// main.cpp

extern thread_local Data data; // correct decl?

void worker() {
    for(auto &elem : data)
        elem.calulcate();
} 
```

现在使用`data`in`worker`会产生开销吗？还是这样，即使它是`start`开始的`worker`？

# c# - Server.Transfer + Jquery '$' 未定义

> ID：15587395
> 
> 赞同：1
> 
> 时间：2013-03-23T13:37:20.807
> 
> 标签：c#, asp.net

当我使用这个时，我的 json 方法工作正常：

```
Response.Redirect("~/Default.aspx"); 
```

但是当我使用

```
Server.Transfer(string.Format("~/Default.aspx"); 
```

它给了我错误'$未定义'

假设目前我在 routing.aspx 页面中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:02:40.830

我在页面的 head 标记中给出了 jquery 的完整路径。

改变：

```
 <script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script> 
```

到

```
<script src="http://localhost:50847/Scripts/jquery-1.4.1.js" type="text/javascript"></script> 
```

我知道硬编码不是好的做法，但我会优化它，现在可能这可以帮助像我这样的人。

# javascript - 静默浏览器中的 javascript 错误

> ID：15587396
> 
> 赞同：1
> 
> 时间：2013-03-23T13:37:26.920
> 
> 标签：javascript, browser, cors

假设我正在执行 CORS 请求，但由于各种原因我并不总是知道它是否有效。像这样的请求：

```
$.ajax('http://a-website.com:8888'); 
```

当它失败时，浏览器会在控制台中显示错误：

> XMLHttpRequest 无法加载`http://a-website.com:8888`。Access-Control-Allow- Origin`http://another-website.com`不允许 Origin。

如何拦截它并避免它在页面控制台中显示为错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:46:02.587

你可以把你的ajax调用放在try catch中

```
try{
   $.ajax('http://a-website.com:8888');
}
catch(e){
   //your catching logic
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T00:48:02.477

如果它正在控制台中打印，则意味着正在执行此操作。

在我的项目中，我使用 top 在 HTML 文档中打印一个 JS 变量，并使用一个函数在控制台中打印。该功能还允许为日志提供标题并打印数据类型。

在那个函数中，我验证了那个变量，如果它是假的，我就直接返回而不打印任何东西。通过这种方式，我可以轻松关闭应用程序范围内的任何日志。

我建议你看看这个 console.log() 在哪里，然后删除它，或者让它的作者允许禁用它。

# mysql - IN（）不工作 - MySQL

> ID：15587403
> 
> 赞同：0
> 
> 时间：2013-03-23T13:37:48.277
> 
> 标签：mysql

我有这个简单的查询-：

```
SET @rejects = "'song1','song2'"; 
SELECT * FROM media WHERE share_src IS NULL || share_src NOT IN(@rejects) 
```

但这不起作用，并且还显示带有`share_src = song1`and的行`share_src = song2`。

我的查询有什么问题。感谢帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:39:45.717

`IN`不适用于*一个*字符串。您要么使用真正的逗号分隔值，而不仅仅是一个字符串，要么使用*Prepared Statement*。

这样可行：

```
SELECT * FROM media 
WHERE share_src IS NULL || share_src NOT IN('song1', 'song2') 
```

但这不是

```
SELECT * FROM media 
WHERE share_src IS NULL || share_src NOT IN("'song1','song2'") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:43:09.187

这是*动态sql的版本*

```
SET @rejects = "'song1','song2'"; 
SET @sql = NULL;

SET @sql = CONCAT('SELECT * 
                    FROM media 
                    WHERE share_src IS NULL OR share_src NOT IN(',@rejects,')');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:39:18.267

您将其视为一个字符串。

您将不得不将整个语句作为字符串执行...（在 Oracle 中`EXECUTE IMMEDIATE`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T14:17:18.163

尝试使用 find_in_set 函数

```
SET @rejects = "song1,song2"; 
SELECT * FROM media WHERE share_src IS NULL ||  NOT FIND_IN_SET(share_src, @rejects) 
```

# c# - 无法在具有类型约束的泛型方法中将类型转换为接口实例？

> ID：15587405
> 
> 赞同：0
> 
> 时间：2013-03-23T13:38:18.337
> 
> 标签：c#, .net, generics, interface

为什么这会给我一个编译时错误`Cannot convert 'ListCompetitions' to 'TOperation'`：

```
public class ListCompetitions : IOperation
{
}

public TOperation GetOperation<TOperation>() where TOperation : IOperation
{
    return (TOperation)new ListCompetitions(); 
} 
```

然而这是完全合法的：

```
public TOperation GetOperation<TOperation>() where TOperation : IOperation
{
    return (TOperation)(IOperation)new ListCompetitions(); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T13:39:13.303

这种转换是不安全的，因为您可以提供与`ListCompetitions`for不同的通用参数`TOperation`，例如，您可以：

```
public class OtherOperation : IOperation { }
OtherOperation op = GetOperation<OtherOperation>(); 
```

如果编译器允许您的方法，这将在运行时失败。

您可以添加一个新的约束，例如

```
public TOperation GetOperation<TOperation>() where TOperation : IOperation, new()
{
    return new TOperation();
} 
```

或者，您可以将返回类型更改为`IOperation`：

```
public IOperation GetOperation()
{
    return new ListCompetitions();
} 
```

从您的示例中不清楚在这种情况下使用泛型有什么好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:39:22.003

因为`TOperation`可能是**任何**实现的东西`IOperation`，你不能确定它`ListCompetitions`是一个`TOperation`.

您可能想要返回一个 IOperation：

```
public IOperation GetOperation<TOperation>() where TOperation : IOperation
{
    return new ListCompetitions(); 
} 
```

# javascript - jQuery：删除结束标签

> ID：15587408
> 
> 赞同：3
> 
> 时间：2013-03-23T13:38:42.827
> 
> 标签：javascript, jquery, html

有没有办法使用 jQuery 删除单个关闭 HTML-Tag？

例子：

```
 <div class="one">
    <div class="two">CONTENT</div>
  </div>
</div> 
```

我必须删除最后一个，这意味着 div.one 关闭后的关闭 div-tag 。

不幸的是，我必须用 JS/jQuery 来做这件事，因为我在这个项目上使用的系统无法删除它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T13:48:45.127

不，那是不可能的。页面中根本没有结束标签。

结束标记在解析之前存在于 HTML 代码中，一旦解析，每个元素都是一个对象，而不是标记中的起点和终点。

浏览器会尝试修复无效标记，但问题是不同的浏览器会做不同的事情。一些浏览器可能会忽略额外的结束标签，而另一些浏览器可能会暗示一个开始标签以使其成为一个完整的元素。您可以尝试重新排列元素以使它们恢复到没有额外结束标记的状态，但要做到这一点，您需要知道所有不同的浏览器在解析代码时会做什么。

更糟糕的是，如果该代码在另一个`div`中，则该标签将在那里结束，而无效代码将在此之后出现。如何处理取决于您显示的代码之外的代码，并且不同的浏览器可能以不同的方式处理无效代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:46:42.200

克隆方法：

```
$tmp = $('.one').clone( true );
$('#wrapper').empty().append($tmp) 
```

# android - listView 项目的 setBackgroundColor 在 JellyBean 上不起作用

> ID：15587410
> 
> 赞同：1
> 
> 时间：2013-03-23T13:38:54.807
> 
> 标签：android, android-listview, android-4.2-jelly-bean

我有一个带有自定义适配器的 listView。选择时，我已使 listView 项目的背景更改颜色。这在三星 Galaxy S2 上的 Ice Cream Sandwich 4.0.4 和模拟器上的 ICS 4.0.3 上完美运行。但它不适用于 4.2.2 JellyBean 模拟器。在 JB 上，当一个项目被选中时，它的背景保持不变。

这是我的代码的一部分，其中我有在选择项目时设置背景颜色的逻辑：

```
private int mItemIndex = -1;

@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;           
        ....

        if (convertView == null) {
            ....
            ....

        } else {
            /* To highlight the selected item */
            if (position == mItemIndex) {
                convertView.setSelected(true);
                convertView.setPressed(true);
                convertView.setBackgroundColor(context.getResources().getColor(R.color.SkyBlue));
            } else {
                convertView.setSelected(false);
                convertView.setPressed(false);
                convertView.setBackgroundColor(context.getResources().getColor(R.color.WhiteSmoke));
            }
            /* To highlight the selected item - end */

            ....
            ....

        return v;
    } 
```

或者，我尝试 `convertView.setBackgroundResource(context.getResources().getColor(R.color.SkyBlue));`了而不是 setBackgroundColor，但它也不起作用。

有没有办法让它在 Jellybean 上工作？还是我在代码中遗漏了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:20:26.167

采用具有两个不同状态图像的自定义选择器进行选择和非选择

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/pause_button"
          android:state_selected="true" />
    <item android:drawable="@drawable/play_button" />
</selector> 
```

1.在你的活动中创建一个全局变量

`View previous;`（以您的列表行视图组）

在你的 onCreate 方法中，在 setContentView 之后像这样初始化

```
previous=new View(context); 
```

在你的 listView 的 onItemClick 侦听器中这样做

```
list.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> arg0, View view,
                        int arg2, long arg3) {
                    view.setSelected(true);
                                       previous.setSelected(false);
                                        previous=current;
                }
            }); 
```

# php - Facebook API：/oauth/access_token 不工作

> ID：15587420
> 
> 赞同：0
> 
> 时间：2013-03-23T13:39:46.283
> 
> 标签：php, facebook, facebook-php-sdk

我正在尝试使用 PHP-SDK 从 Facebook 获取用户访问令牌。服务器端登录过程效果很好，重定向到正确的页面并提供`$code`。

重定向后（并检查是否`$code`存在），然后我调用以下 API 方法来交换`$code`用户令牌（API 参数在此处被抑制）：

```
$fb->api('/oauth/access_token',array(
    'client_id'     => APP_ID,
    'client_secret' => APP_SECRET,
    'redirect_uri'  => REDIRECT_URI,
    'code'          => $code
));

$fb_token = $fb->getAccessToken();
echo $fb_token; 
```

不幸的是，我从这个脚本中得到的仍然是应用程序令牌。事实上，将脚本简化为以下内容并没有任何区别：

```
$fb_token_user = $fb->getAccessToken();
echo $fb_token_user; 
```

所以我认为这完全是关于由于`/oauth/access_token`某种原因没有工作或至少没有采取行动的电话。它也不返回任何错误。

我已经尝试并测试了几种替代方法，例如`get_file_contents()`Facebook 教程中建议的方法以及向上述 API 调用添加其他参数（例如`type=client_cred`，以及更多），但从未成功。

有人知道为什么 API 调用不起作用吗？是脚本还是 Facebook 上的某个应用设置？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T10:11:58.583

**解决了！**问题中的代码仍然无法正常工作，尽管这个社区和其他社区有这么多线程表明它确实有效（奇怪的是，它似乎对[他们](https://stackoverflow.com/a/10877126/2201252)有效）。

所以我想我必须回到[Facebook](https://developers.facebook.com/docs/howtos/login/server-side-login/)`file_get_contents()`解释的方法，结果发现这种方法以前不起作用，因为在我的服务器上被禁用。不想承担启用它的风险，我发现[cURL](http://php.net/manual/en/book.curl.php)是一种解决方法。`allow_url_fopen`

这是工作代码：

```
// cURL Load Function
function cURLget ($ch_url) {
  $ch = curl_init();
  curl_setopt($ch,CURLOPT_URL,$ch_url);
  curl_setopt($ch,CURLOPT_RETURNTRANSFER,true);
  curl_setopt($ch,CURLOPT_USERAGENT,$_SERVER['HTTP_USER_AGENT']);
  $ch_send = curl_exec($ch);
  curl_close($ch);
  return $ch_send;
};

// Obtain User Token
$fb_token_get = cURLget("https://graph.facebook.com/oauth/access_token"
  . "?client_id=" . APP_ID
  . "&client_secret=". APP_SECRET
  . "&redirect_uri=" . urlencode(REDIRECT_URI)
  . "&code=" . $CODE
);
$fb_token_params = null;
parse_str($fb_token_get,$fb_token_params);

// Print Token Data
echo "Token: " . $fb_token_params['access_token']
  . "<br />Expires: " . $fb_token_params['expires']; 
```

感谢@FabioAntunes 尝试帮助我编写原始代码，感谢@ShawnECarter 提供他的 cURL 加载函数[脚本](https://stackoverflow.com/a/10864928/2201252)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T12:47:18.027

今天也偶然发现了这个问题。似乎我的 PHP SDK (v.3.2.2) 提供了一个解决问题的函数：setExtendedAccessToken()。（做几乎相同的事情：调用图形的“/oauth/access_token”并将旧令牌与“长期”令牌交换）。

# html - 画布：在线点击事件

> ID：15587424
> 
> 赞同：2
> 
> 时间：2013-03-23T13:40:08.333
> 
> 标签：html, events, canvas, click, line

请看一下这个小[例子](http://jsfiddle.net/9V2Sq/)。clickhandler 仅在您单击该行的中间时才起作用。该方法`isPointInPath`似乎没有考虑线的宽度。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T15:08:39.423

是的，你是对的。

新的 isPointInPath() 仅适用于“胖”线的中心线——而不是线的整个宽度。

它对大于 1 像素宽的封闭形状更加用户友好；）

针对您的确切问题的解决方法：不要画一条粗线，而是画一个 20px 宽的矩形。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/QyWDY/](http://jsfiddle.net/m1erickson/QyWDY/)

此代码使用基本三角法围绕一条线创建一个矩形。在 mousedown 事件处理程序中，它透明地重绘矩形，然后测试 isPointInPath()。

如果您需要测试折线，您可以使用这些相同的原则为折线的每一段制作矩形线。

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    // get canvas's relative position
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    // line specifications
    var x1=50;
    var y1=50;
    var x2=300;
    var y2=100;

    // draw the lineRectangle
    var lineRect=defineLineAsRect(x1,y1,x2,y2,20);
    drawLineAsRect(lineRect,"black");

    // overlay the line (just as visual proof)
    drawLine(x1,y1,x2,y2,3,"red");

    function drawLine(x1,y1,x2,y2,lineWidth,color){
        ctx.fillStyle=color;
        ctx.strokeStyle=color;
        ctx.lineWidth=lineWidth;
        ctx.save();
        ctx.beginPath();
        ctx.moveTo(x1,y1);
        ctx.lineTo(x2,y2);
        ctx.stroke();
        ctx.restore();
    }

    function drawLineAsRect(lineAsRect,color){
        var r=lineAsRect;
        ctx.save();
        ctx.beginPath();
        ctx.translate(r.translateX,r.translateY);
        ctx.rotate(r.rotation);
        ctx.rect(r.rectX,r.rectY,r.rectWidth,r.rectHeight);
        ctx.translate(-r.translateX,-r.translateY);
        ctx.rotate(-r.rotation);
        ctx.fillStyle=color;
        ctx.strokeStyle=color;
        ctx.fill();
        ctx.stroke();
        ctx.restore();
    }

    function defineLineAsRect(x1,y1,x2,y2,lineWidth){
        var dx=x2-x1; // deltaX used in length and angle calculations 
        var dy=y2-y1; // deltaY used in length and angle calculations
        var lineLength= Math.sqrt(dx*dx+dy*dy);
        var lineRadianAngle=Math.atan2(dy,dx);

        return({
            translateX:x1,
            translateY:y1,
            rotation:lineRadianAngle,
            rectX:0,
            rectY:-lineWidth/2,
            rectWidth:lineLength,
            rectHeight:lineWidth
        });
    }

    function handleMouseDown(e){
      mouseX=parseInt(e.clientX-offsetX);
      mouseY=parseInt(e.clientY-offsetY);

      // draw our lineRect
      drawLineAsRect(lineRect,"transparent");

      // test if hit in the lineRect
      if(ctx.isPointInPath(mouseX,mouseY)){
              alert('Yes');
      }
    }

    canvas.addEventListener("mousedown", handleMouseDown, false);

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=310 height=115></canvas>
</body>
</html> 
```

# java - 计算多个表中的实体

> ID：15587425
> 
> 赞同：0
> 
> 时间：2013-03-23T13:40:09.730
> 
> 标签：java, jpa-2.0, jpql

我有一个非实体类

```
public class CountryStatistics {

    public CountryStatistics(Long numTowns, Long numVillages) {
    ...
    }

} 
```

对于给定的国家，我想构建一个统计对象。

国家、村庄和城市是实体，所以我按照下面的代码尝试了一些事情。

```
String queryString = 
"SELECT NEW mypackage.CountryStatistics(count(t), count(v)) 
 FROM Town t, Village v WHERE t.country = :country AND v.country = :country"

TypedQuery<CountryStatistics> query = 
em.createQuery(queryString ,CountryStatistics.class).setParameter("country", country);

query.getSingleResult() 
```

问题：在同一查询中计算不同表中的某些实体的正确方法是什么？

通过上面的查询，如果我像下面这样区分，我最终会得到很高的数字，城镇的数量将是正确的。

```
"SELECT NEW mypackage.CountryStatistics(count(distinct t), count(v)) 
 FROM Town t, Village v WHERE t.country = :country AND v.country = :country" 
```

但是，如果我将它设置为村庄，我也会得到：

```
java.sql.SQLSyntaxErrorException: Multiple DISTINCT aggregates are not supported at this time. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:57:48.017

以下查询（未测试）应该做你想做的事：

```
select count(distinct t.id), count(distinct v.id) from Country c
left join c.towns t
left join c.villages v
where c.id = :countryId 
```

# c++ - 为什么 int** ptr 在访问 ptr[i][j] 时不指向与 int arr[3][3] 相同的地址？

> ID：15587429
> 
> 赞同：3
> 
> 时间：2013-03-23T13:40:24.777
> 
> 标签：c++, pointers

我正在回答这个[问题](https://stackoverflow.com/questions/15586075/new-matrixnn-failure/15586169#15586169)，但是当我测试以下代码时，我感到困惑。

```
#include <iostream>

using namespace std;

int main()
{
        int **ptr;
        int arr[3][3];
        ptr =(int **) arr;
        for (int i=0;i<3;i++){
                for (int j=0;j<3;j++){
                        cout << &arr[i][j] << " =? ";
                        cout << &(ptr[i][j]) << endl;
                }

        }

        return 0;
} 
```

但我得到这个输出：

```
0x7fff5700279c =? 0
0x7fff570027a0 =? 0x4
0x7fff570027a4 =? 0x8
0x7fff570027a8 =? 0
0x7fff570027ac =? 0x4
0x7fff570027b0 =? 0x8
0x7fff570027b4 =? 0
0x7fff570027b8 =? 0x4
0x7fff570027bc =? 0x8 
```

为什么他们不一样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T13:49:31.207

```
ptr =(int **) arr; 
```

这非常糟糕 - 它涉及 a`reinterpret_cast`并导致未定义的行为。这两种类型 - an`int[3][3]`和 an `int**`- 在内存布局方面完全不兼容。

3×3 2D 数组是一个连续的内存块，如下所示：

```
 0,0   0,1   0,2   1,0   1,1   1,2   2,0   2,1   2,2
┌─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┬─────┐
│ int │ int │ int │ int │ int │ int │ int │ int │ int │
└─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┴─────┘ 
```

指向`int`每个指针指向数组中第一个元素的指针的指针如下所示：

```
┌─────┐
│     │ // The int**
└──╂──┘
   ┃
   ▼
┌─────┬─────┬┄
│     │     │   // An array of int*
└──╂──┴──╂──┴┄
   ┃     ┗━━━━━━━━━━┓
   ▼                ▼
┌─────┬─────┬┄   ┌─────┬─────┬┄
│ int │ int │    │ int │ int │    // Arrays of ints
└─────┴─────┴┄   └─────┴─────┴┄
  0,0   0,1        1,0   1,1 
```

这涉及两个间接级别。二维数组类型没有要通过的指针数组。此外，`int`在这种`int**`情况下，s 的数组不一定是连续的。

So think about when you do `ptr[0]`, for example. What is the type of the expression? Since `ptr` is an `int**`, the type of `ptr[0]` is an `int*`. However, what is *actually* at the location `ptr[0]`? Not a pointer at all! Instead, there's an array of `int`s.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-23T13:46:25.523

`int **ptr`和 an`int arr[3][3]`不同，因为：

```
 -----------------------------------
|    C    |         Maths           |
 -----------------------------------
| ptr + 1 | ptr + sizeof(int*)      |
 -----------------------------------
| arr + 1 | arr + 3 * sizeof(int*)  |
 ----------------------------------- 
```

所以你根本不会得到相同的结果（此外，`ptr`可能`arr`没有相同的内存表示）。

```
int (*ptr)[3] = arr; 
```

会起作用，因为只有第一个维度`arr`会衰减为指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T13:48:05.617

int** 是一个指向 int 的指针。这意味着它指的是一个指针数组。但是， int[x][y] 是大小为 x x y 的整数数组。它是一个单独的内存块，排列成 x 行，每列 y 列（如果你愿意这样想的话。

要实现您想要的，您必须收集列的地址并将它们存储在 int** 指针的行中。

```
int   arry[3][3];
int** ptr = malloc( sizeof(int*) * 3 );

for( int i = 0; i < 3; i++ )
   ptr[i] = arry[i];

for( int i = 0; i < 3; i++ )
    for( int j = 0; j < 3; j++ )
        printf( "%d -> %d\n", arry[i][j], ptr[i][j];

free( ptr ); 
```

# git - 使用更新的资源更新 github 存储库而无需拉取

> ID：15587438
> 
> 赞同：1
> 
> 时间：2013-03-23T13:40:52.243
> 
> 标签：git

情况就是这样；github上有一个repo，很久没有更新了。一段时间以来，人们在 Dropbox 上开发和存储资源。

我如何更新 github repo：-无需强制推送-无需手动将文件从新版本（dropbox）复制到从 github 版本中提取？

谢谢，周末愉快！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:33:09.170

您的意思是只有源存储在保管箱中吗？或者人们是否一直在将他们的整个目录结构（包括 .git 目录！）复制到 Dropbox？

如果是前者，那么如果不从 Dropbox 手动复制文件、提交到本地存储库然后推送到 github，就无法更新 github。

如果是后者，那么您可以将整个目录结构从 Dropbox 复制到本地计算机，然后推送到 github。但如果是这种情况，那么不同的人是如何设法合并他们的更改的呢？我也对人们为什么以这种方式开发而不是遵循更标准的 git 工作流程感兴趣。有关协作的标准方法，请参阅[github 的帮助页面](https://help.github.com/categories/63/articles)。并阅读[Pro-Git](http://git-scm.com/book)。

# matlab - 如何使表达式的值等于另一个表达式的第二个返回值

> ID：15587440
> 
> 赞同：2
> 
> 时间：2013-03-23T13:41:42.580
> 
> 标签：matlab

Matlab 中是否有一种惯用的方式将表达式的值绑定到另一个表达式的第 n^个返回值？

例如，假设我想要一个索引数组，该数组对应于存储在元胞数组中的多个向量的最大值。我可以做到这一点

```
function I = max_index(varargin)
    [~,I]=max(varargin{:});

cellfun(@max_index, my_data); 
```

但这需要`max_index`为每个想要在表达式中选择特定返回值的情况定义一个函数 ()。我当然可以定义一个通用函数来做我想要的：

```
function y = nth_return(n,fun,varargin)
    [vals{1:n}] = fun(varargin{:});
    y = vals{n}; 
```

并称它为：

```
cellfun(@(x) nth_return(2,@max,x), my_data) 
```

但是，添加此类功能会使代码片段的可移植性降低且更难理解。是否有一种惯用的方式来实现相同的结果而不必依赖自定义`nth_return`函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:19:37.067

据我所知，与您提到的解决方案一样，这是不可能的。所以只需使用语法：

```
[~,I]=max(var); 
```

或者确实创建一个额外的功能。但我也建议不要这样做。只需编写额外的代码行，以防您想在另一个函数中使用输出。我在 stackoverflow 上发现了两个较早的问题，它们涉及相同的主题，并且似乎证实这是不可能的。

[在 MATLAB 中使用匿名函数跳过输出](https://stackoverflow.com/questions/3096281/skipping-outputs-with-anonymous-function-in-matlab)

[如何优雅地忽略 MATLAB 函数的某些返回值？](https://stackoverflow.com/questions/747296/how-to-elegantly-ignore-some-return-values-of-a-matlab-function)

某些版本之前将 ~ 运算符添加到 MATLAB 的原因是为了防止您保存不需要的变量。如果存在与您正在搜索的语法类似的语法，则没有必要。

# dns - 如何将自定义域映射到 AWS Elastic Beanstalk URL？

> ID：15587443
> 
> 赞同：5
> 
> 时间：2013-03-23T13:41:54.993
> 
> 标签：dns, amazon-web-services, amazon-elastic-beanstalk, cname

我正在按照[将自定义域与 AWS Elastic Beanstalk](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customdomains.html)一起使用的说明将自定义域映射到[AWS Elastic Beanstalk](http://aws.amazon.com/elasticbeanstalk/) URL。

我的 Elastic Beanstalk URL 如下：

```
http://myenvironment-specific-string.elasticbeanstalk.com/ 
```

我创建了一条 CNAME 记录，上面写着：

```
www.example.com     myenvironment-specific-string.elasticbeanstalk.com  8 hrs 
```

我还使用 MxToolBox 的[CNAME 查找工具查找](http://www.mxtoolbox.com/CNAMELookup.aspx)了 CNAME ，它正确显示了它。但是当我尝试时`www.example.com`，它没有出现。

我错过了什么吗？我被困住了，这让我绞尽脑汁！帮我！:(

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-13T22:43:17.063

1.  使用 Route53
2.  使用这些值创建一个记录集：

    名称：www.example.com

    类型：A - IPv4 地址

    别名：是

    别名目标：[单击并选择您的弹性负载均衡器]

    Alias Hosted Zone ID：[选择上述时自动填写，您可以将其与您的日志相匹配]

如果不使用 Route53，你可能会打一场艰苦的战斗，我不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-18T04:04:27.927

来自 GoDaddy（可能不是最好的方式）似乎对我有用。

1.  cname www MYENVIRONMENT.elasticbeanstalk.com
2.  转发功能：转发至：[www.MYDOMAIN.com](http://www.MYDOMAIN.com)（类型：永久：301，设置：仅转发）

我猜它的工作方式 MYDOMAIN.com 转发到 1) www 然后 www 转到 MYENVIRONMENT.elasticbeanstalk.com

# php - 在 PHP 中验证字体文件

> ID：15587448
> 
> 赞同：0
> 
> 时间：2013-03-23T13:42:31.580
> 
> 标签：php, validation, fonts

如何确保提供的文件 - 字体（TrueType）？可以使用自定义扩展名（非`.ttf`）指定文件路径。

我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:51:32.680

检查这个：[finfo](http://www.php.net/manual/en/function.finfo-file.php)

例如：

```
$fileName = 'file.ext';
$mimeTypes = array('font/ttf','font/truetype');
$finfo = finfo_open(FILEINFO_MIME_TYPE);
$mime = finfo_file($finfo, $fileName);
if(in_array($mime, $mimeTypes)){
    echo 'font file';
}
finfo_close($finfo); 
```

你必须检查`FILEINFO_MIME_TYPE`。

# git - Git 发布具有大量 NuGet 依赖项的 Azure 网站

> ID：15587451
> 
> 赞同：1
> 
> 时间：2013-03-23T13:42:51.527
> 
> 标签：git, azure, nuget

我还没有尝试过任何事情（因为这意味着将我的项目从 SVN 转换为 Git）所以我想早点问这个以评估可能的选项。

我有一个 Web 项目要部署到 Windows Azure，它有很多 NuGet 依赖项，目前由 Visual Studio 管理。我没有将它托管在 Github 上，但我会将它托管在我的源服务器上的专用存储库上（与 SVN 平行）。由于在源代码控制中您只存储代码，并且 NuGet 允许您在更改开发工作站时检索依赖项（与 Maven 完全一样），我想问 Azure 在处理 Git 和 NuGet 依赖项时的行为方式。

AFAIU 当您`git push`使用 Azure 时，您只需将源代码推送到他们的分支，以便他们检测传入的代码，使用 .NET 编译器进行编译并部署到托管您网站的所有负载平衡 Web 服务器。但是，如果您的项目需要 NuGet 依赖项会怎样？Azure 会自动为您下载它们还是编译器会崩溃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T07:01:54.597

您可以在解决方案上启用包还原[http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages) 并使用 kudu 功能推送它，如本博客文章 [http://blog 中所述。 davidebbo.com/2012/06/introducing-open-source-engine-behind.html](http://blog.davidebbo.com/2012/06/introducing-open-source-engine-behind.html) hth

# android - 在 ActionBar.Tabs 问题之间切换

> ID：15587452
> 
> 赞同：0
> 
> 时间：2013-03-23T13:42:52.293
> 
> 标签：android, android-layout, android-fragments, android-actionbar, android-progressbar

我已经实现了从 web 下载数据然后在两个`ActionBar.Tab`s 中显示它的应用程序。我有一个问题。如果我从一个选项卡切换到另一个选项卡，应用程序会开始另一次下载，并且在下载未完成时，应用程序会冻结。如果互联网连接速度很慢，它会变得非常烦人。我决定添加`ProgressDialog`到应用程序以向用户显示应用程序正在从网络下载数据。我添加了一段实现下载的代码`ProgressDialog`，`AsyncTask`但这没有帮助。我理解为什么会发生这种情况，但找不到解决方法:(

将适合选项卡的数据表示为`Fragment`类的实例。这个实例创建后会被添加到`transaction`中，只有添加`mFragment`对象到 中后`transaction`，app 才会切换到另一个选项卡。

这是`tabListener`代码的一部分：

```
// ...

@Override
public void onTabSelected(Tab tab, FragmentTransaction transaction) {
    if (mFragment == null) {
        /*
         * Creation of ParkFragment is the reason why app locks!! Because in
         * ParkFragment data is being downloaded from web
         */
        mFragment = new ParkFragment(mUrl, mActivity);
        /*
         * mFragment can't be added to transaction until downloading is
         * finished, that's why app doesn't switch fast
         */
        transaction.add(android.R.id.content, mFragment, mTag);
    } else {
        transaction.attach(mFragment);
    }
} 
```

请，如果有人有任何想法如何实施`ProgressDialog`以避免标签之间切换的延迟，请与它分享。

感谢您的阅读。

更新：我已经阅读了这个问题的答案，但不明白该实施将如何帮助我管理延迟：[Changing Tabs is Slow/Laggy - Using Fragments](https://stackoverflow.com/questions/9237431/changing-tabs-is-slow-laggy-using-fragments)。

升级版：

```
public class ParkFragment extends ListFragment {
        private ArrayList<Cinemas> cinema;
        private CinemasAdapter cinemaAdapter;
        private String url;
        private Activity activity;

        public ParkFragment (String cinema,Activity activ){
            url = cinema;
            activity = activ;
        }

        public void onCreate(Bundle savedInstanceState){
            super.onActivityCreated(savedInstanceState); 
            cinema = new Handler().handle(url,activity);
            cinemaAdapter = new CinemasAdapter(activity, R.layout.movie_data_row, cinema);
            setListAdapter(cinemaAdapter);
        }

        @Override
        public void onListItemClick(ListView l, View v, int position, long id) {
            Cinemas movie = cinemaAdapter.getItem(position);
            Intent intent = new Intent (activity, More.class);
            intent.putExtra("Cinemas", movie);
            intent.putExtra("data", movie.getBitmap());

            Bundle translateBundle =
                   ActivityOptions.makeCustomAnimation(activity,
                   R.anim.slide_in_left, R.anim.slide_out_left).toBundle();
                   startActivity (intent, translateBundle);

        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:03:40.113

在您的`ParkFragment`中，您可以使用与[loader](http://developer.android.com/guide/components/loaders.html)结合的[内容提供](http://developer.android.com/guide/topics/providers/content-providers.html)程序。下载数据应该在[服务](http://developer.android.com/guide/components/services.html)中处理，完成后服务通过内容提供者将数据插入数据库。在您的片段中，加载器将加载数据。

在任何安卓模拟器中都有一个名为 API Demos 的应用程序，其中有几个与内容提供者/加载器/服务相关的示例……其源代码在 Android SDK 中可用，位于：`[Android SDK]/samples/android-x/ApiDemos`，其中`x`API 级别。

我只是这么认为，但如果你可以分享你的代码`ParkFragment`，也许会有另一个问题？

* * *

*已编辑*

在`ParkFragment`您的. [`ResultReceiver`](http://developer.android.com/reference/android/os/ResultReceiver.html)_ 该服务保留 的实例，完成后，它通过 将下载的数据发送回您的片段。A可以保存原始数据类型，例如, , ... 对于更复杂的数据，您可以创建一个类来保存它，该类实现或。`Intent``url``ResultReceiver`[`send(int, Bundle)`](http://developer.android.com/reference/android/os/ResultReceiver.html#send%28int,%20android.os.Bundle%29)[`Bundle`](http://developer.android.com/reference/android/os/Bundle.html)`String``int``byte[]`[`Parcelable`](http://developer.android.com/reference/android/os/Parcelable.html)[`Serializable`](http://developer.android.com/reference/java/io/Serializable.html)

或者使用[Bound Services](http://developer.android.com/guide/components/bound-services.html)，您可以直接从片段中调用服务的方法。请注意，服务在主 UI 线程上运行，因此为了避免这种情况[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)，您需要在服务中使用类似的东西`Thread`。

# algorithm - 我们可以有一个没有任何红色节点的红黑树吗？

> ID：15587455
> 
> 赞同：0
> 
> 时间：2013-03-23T13:43:18.043
> 
> 标签：algorithm, tree, red-black-tree

我想知道一棵红黑树是否应该至少有一个红色节点。另外，给定 BST，如果我们可以将其转换为 RBT，是否有一种独特的方法可以将这棵树变成红黑树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:06:38.283

快速浏览一下[红黑树的属性会](https://en.wikipedia.org/wiki/Red-black_tree#Properties)发现，不需要任何节点都是红色的。出现红色节点的唯一方法是通过属性 5：

> 从给定节点到其任何后代叶子的每条简单路径都包含相同数量的黑色节点。

[任何完美二叉树](https://en.wikipedia.org/wiki/Binary_tree#Types_of_binary_trees)也满足这个性质，因此每棵只有黑色节点的完美二叉搜索树也是红黑树。（不过，我不确定教科书的红黑树算法是否会产生这些。）

> 另外，给定 BST，如果我们可以将其转换为 RBT，是否有一种独特的方法可以将这棵树变成红黑树？

任意 BST 没有单一的唯一 RBT；总是有多个等效的 RBT，除了非常浅的树。

# javascript - 从数组内容中设置 div id

> ID：15587457
> 
> 赞同：3
> 
> 时间：2013-03-23T13:43:28.327
> 
> 标签：javascript, jquery, arrays, html, styles

我试图弄清楚如何为 16 个不同的 div 提供存储在 16 个元素长数组中的 id 名称。

这样我就可以为记忆游戏随机化 div 的“放置”，因为如果可能的话，将会有 8 种不同的 div 样式随着 div id 的变化而变化。

我的计划是 div id 的名称与该特定 div 的样式名称相同。

有什么办法可以将第一个div的id和style设置为myarray[0]中的值，第二个div的id和style设置为myarray[1]，以此类推？

**编辑：**

```
var card = ["orange","orange","pink","pink","red","red","purple","purple",
"blue","blue","green","green","brown","brown","yellow","yellow"];

for(var j, x, i = card.length; i; j = parseInt(Math.random() * i),
x = card[--i], card[i] = card[j], card[j] = x); 
```

然后稍后在正文中，我试图实现代表这一点的东西：

```
<div id="card[0]"></div>
<div id="card[1]"></div>
<div id="card[2]"></div> 
```

等等...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T14:01:06.213

这是使用纯 JavaScript 随机化类名的解决方案。

## 更新的答案

既然问题已经澄清，我已经更新了我的解决方案，它适合你的颜色。我已将s 设置`background-color`为`.card`数组中设置的颜色。这也可以很容易地完成`id`，我建议不要在其中使用`[]`字符，`id`因为我认为我不确定这是否符合标准。

[jsFiddle](http://jsfiddle.net/Tyriar/3u28X/1/)

![在此处输入图像描述](../Images/d295d72d8be7145ad8396d1db9c66d9c.png)

```
var colors = [
    "orange","orange","pink","pink","red","red","purple","purple",
    "blue","blue","green","green","brown","brown","yellow","yellow"
];

var divs = document.getElementsByClassName("card");

while (divs.length > 0) {
    var i = Math.floor(Math.random() * colors.length);
    divs[0].style.backgroundColor = colors[i];
    colors.splice(i, 1);
    divs = [].slice.call(divs, 1);
} 
```

## 原始答案

给定一个 id 数组和一组 HTML 元素，将随机`id`分配给来自`ids`.

[jsFiddle](http://jsfiddle.net/Tyriar/pqK7H/1/)

![在此处输入图像描述](../Images/baeac60ea140886af4f55c085f9bf0d9.png)

**JavaScript**

```
var ids = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"];
var divs = document.getElementsByClassName("game-element");

while (divs.length > 0) {
    var i = Math.floor(Math.random() * ids.length);
    divs[0].id = 'item-' + ids[i];
    ids.splice(i, 1);
    divs = [].slice.call(divs, 1);
} 
```

**HTML**

```
<div class="game-element"></div>
<div class="game-element"></div>
<div class="game-element"></div>
<div class="game-element"></div>
<div class="game-element"></div>
<div class="game-element"></div>
<div class="game-element"></div>
<div class="game-element"></div>
<div class="game-element"></div>
<div class="game-element"></div> 
```

**CSS**

```
.game-element {
    width:10px;
    height:10px;
    float:left;
}

#item-1  { background-color:#F00; }
#item-2  { background-color:#0F0; }
#item-3  { background-color:#00F; }
#item-4  { background-color:#FF0; }
#item-5  { background-color:#F0F; }
#item-6  { background-color:#0FF; }
#item-7  { background-color:#A0A; }
#item-8  { background-color:#0AA; }
#item-9  { background-color:#AA0; }
#item-10 { background-color:#000; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T13:48:26.650

为每个 div 分配一个`randomdiv`类或类似的东西。这将确保您可以在不影响其他 div 的情况下选择您想要的那些。

然后你可以这样做

```
var idArr = [/**random ids here**/];
$( ".randomdiv" ).each(function( index ) {
  $(this).attr("id",idArr[index]);
}); 
```

这将使用类遍历每个 div`randomdiv`并为其分配一个值`idArr`，您可以根据需要定义该值，我想为您的用例使用某种类型的随机化函数

### 更新

随着您对问题的更新，我看到了一个问题。您有要设置的非唯一 ID。id 必须是唯一的。如果你想将它们中的多个分配为相同的，你想使用类。所以代码看起来像这样

```
var card = ["orange","orange","pink","pink","red","red","purple","purple", 
```

"蓝色","蓝色","绿色","绿色","棕色","棕色","黄色","黄色"]; $( ".randomdiv" ).each(function( index ) { $(this).addClass(card[index]); });

然后你可以像这样用css定义你想要的样式

```
.randomdiv.blue{
  background-color:blue;
}

.randomdiv.green{
  background-color:green;
}
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T13:48:39.277

很难确切知道你在追求什么，但如果使用 jQuery，你可以这样做：

HTML：

```
<div class="random"></div>
<div class="random"></div>
<div class="random"></div> 
```

JavaScript：

```
var myarray = ["one","two","three"];    

// loop through all divs
$('div.random').each(function(index) {

    // set div id to array value
    $('div').attr('id', myarray[index]);

}); 
```

结果：

```
<div class="random" id="one"></div>
<div class="random" id="two"></div>
<div class="random" id="three"></div> 
```

附加评论：

值得确保或至少检查数组长度是否等于`div`元素的数量，否则您可能会收到异常。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-23T13:49:20.277

您的页面可以在服务器端或客户端呈现

1) 在服务器端，使用服务器端语言（例如 C#）和框架（例如 ASP.NET）更容易

2) 在客户端，您可以基于任何 JavaScript 模板（例如下划线模板）生成 DOM，并通过将数组作为数据模型传递来呈现它）您可以参考下划线模板方法：[http ://underscorejs.org/#template](http://underscorejs.org/#template)

**编辑**

对于服务器端的示例（我使用 C# 和 MVC razor 视图作为示例，但如果您使用任何其他语言和 Web 服务器，它可能是相同的想法）。

```
@{ ids = ... }
@foreach (var id in ids) 
{
  <div id="@id"></div>
} 
```

该代码将帮助您生成具有您定义的 id 的 div。

在客户端（我使用下划线模板，但如果您使用任何其他引擎，同样的想法）

```
var list = "_.each(ids, function(id) {<div id='<%id%>'></div>});";
_.template(list, {ids: ['id1', 'id2', 'id3']}); 
```

这将生成 3 个 div，其中列出了 id。

**更新**

最好在生成div的时候生成id，而不是先生成div再修改id。

# android - 在android的根目录下创建一个文件夹并写入

> ID：15587458
> 
> 赞同：4
> 
> 时间：2013-03-23T13:43:30.203
> 
> 标签：android, mkdir

我不想在 /mnt/sdcard 上写入外部 sd。我正在尝试为可能的应用程序文件创建一个文件夹，并让其他人可以访问它们。

我有一个名为 Libra 的应用程序，它在导出数据时生成 .csv 文件，并且所有这些文件都进入 /Libra/ 文件夹。我希望我的应用程序也这样做。

据我所见，外部存储是 sd，内部存储是应用程序的非公共场所。

如何像 Libra 一样在 android 文件系统的根目录下创建一个目录？

如果我要求外部存储，我会得到以下不需要的位置：

```
Environment.getExternalStorageDirectory() 
```

> ```
> /storage/emulated/0/ (in my Nexus)
> /mnt/sdcard          (in the emulator) 
> ```

如果我尝试在绝对路径 /MyDiary 中创建文件夹，则会返回创建文件夹时出错

```
File folder = new File("/MyDiary");
boolean success = true;
if (!folder.exists()) {
        success = folder.mkdir();
}
if (success) {
        Toast.makeText(getBaseContext(), "Already exists", Toast.LENGTH_LONG).show();
} else {
        Toast.makeText(getBaseContext(), "Error creating directory", Toast.LENGTH_LONG).show();
        return;
} 
```

如果我尝试检查 Libra 文件夹是否存在，它会说它不存在：

```
File folder = new File("/Libra");
boolean success = true;
if (!folder.exists()) {
        success = folder.mkdir();
}
if (success) {
        Toast.makeText(getBaseContext(), "Libra exists", Toast.LENGTH_LONG).show();
} 
```

注意：我有在外部存储中写入的清单权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-11T03:17:16.330

根是 ramdisk。其中一些文件夹是由init.rc创建的。只有 init.rc 有权在 ramdisk 中创建文件夹。如果您通过 init.rc 创建文件夹，您仍然需要 init.rc 帮助才能在新文件夹上挂载真正的存储设备。

Repack like[重启时重新生成的 init.rc 文件](https://stackoverflow.com/questions/12778878/the-init-rc-file-regenerated-on-restart)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:13:59.887

首先你需要root访问权限才能写。您可以使用 rootexplorer 应用程序查看它是否在那里创建了文件夹。获得root权限后试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:53:35.940

我认为这不是在 Android 操作系统中创建文件的正确方法。从[http://developer.android.com/training/basics/data-storage/files.html](http://developer.android.com/training/basics/data-storage/files.html)：

> 如果您想将公共文件保存在外部存储上[**我已经阅读了您的建议，但我认为这样您可以从多个应用程序访问文件，如果这是您想要的**]，请使用 getExternalStoragePublicDirectory() 方法获取代表的文件外部存储上的相应目录。该方法接受一个参数，指定要保存的文件类型，以便它们可以与其他公共文件进行逻辑组织，例如 DIRECTORY_MUSIC 或 DIRECTORY_PICTURES。例如：

```
public File getAlbumStorageDir(String albumName) {
    // Get the directory for the user's public pictures directory. 
    File file = new File(Environment.getExternalStoragePublicDirectory(
        Environment.DIRECTORY_PICTURES), albumName);
    if (!file.mkdirs()) {
        Log.e(LOG_TAG, "Directory not created");
    }
    return file;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T17:45:32.573

尝试首先获得对您的应用程序的超级用户权限。在第一次运行您的应用程序时，运行 linux 命令以创建要写入数据的文件夹和文件（您只能使用 linux 命令执行此操作）。然后您可以通过以下方式将数据写入文件获取 FileOutputStream("filename") 对象。如果它有效，请留下您的评论。上述程序的部分代码是

```
 Process p=Runtime.getRuntime().exec("su");
    OutputStream o=p.getOutputStream();
    o.write("mkdir foldername\n".getBytes());
    o.write("cd foldername\n".getBytes());
    o.write("cat > filename\n".getBytes());
    o.write("exit\n".getBytes());
    o.flush();
    p.waitFor(); 
```

# objective-c - 创建一个宏来执行默认初始化

> ID：15587465
> 
> 赞同：2
> 
> 时间：2013-03-23T13:43:49.343
> 
> 标签：objective-c, macros

我有很多方法可以重复这个简单的样板：

```
- (id)myObject {
    if(!_myObject) {
        self.myObject = [_myObject.class new];
    }
    return _myObject;
} 
```

所以我想用一个简单的宏替换它：

```
#define default_init(instance) \
    if(!instance) instance = [instance.class new]; \
    return instance; 
```

所以我只需要打电话：

```
- (id)myObject {
        default_init(_myObject);
} 
```

上面的代码当前可以编译，但问题是宏直接设置了实例变量的值。相反，我想调用 self.instance = value;

所以而不是

```
if(!instance) instance = [instance.class new]; 
```

我想要类似的东西；

```
if(!instance) self.instance = [instance.class new]; 
```

但显然当前的代码不允许这样做。我怎么能完成这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:04:03.937

使用此宏：

```
#define default_init(class, instance)      \
    if ( ! _##instance ) {                 \
        self.instance = [class new] ;      \
    }                                      \
    return _##instance 
```

我能够创建这个实例方法：

```
- (NSMutableArray*) myObject {
    default_init(NSMutableArray, myObject) ;
} 
```

我必须添加一个定义类的参数，因为`_myObject`is still `nil`，因此`_myObject.class`is `nil`。

[这个 StackOverflow 问题](https://stackoverflow.com/a/154138/1523962)和[这个 Cprogramming 页面](http://www.cprogramming.com/tutorial/cpreprocessor.html)建议将您的多行宏包装在`do {...} while(0)`：

```
#define default_init(class, instance)          \
    do {                                       \
        if ( ! _##instance ) {                 \
            self.instance = [class new] ;      \
        }                                      \
        return _##instance ;                   \
    } while(0) 
```

如果你真的想要，你可以创建一个定义整个方法的宏：

```
#define default_getter(class, instance)        \
    - (class*) instance {                      \
        if ( ! _##instance ) {                 \
            self.instance = [class new] ;      \
        }                                      \
        return _##instance ;                   \
    } 
```

并这样使用它：

```
default_getter(NSMutableArray, myObject) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T16:36:17.373

我通常不使用宏来构建 getter 方法，而是声明属性：

## 实例.h

```
@interface Instance : NSObject
@property NSMutableArray* myObject ;
@end 
```

并覆盖`- init`以初始化属性：

## 实例.m

```
- (id) init {
    self = [super init] ;
    if ( self ) {
        self.myObject = [NSMutableArray new] ;
    }
    return self ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T16:45:59.573

好的，这是我的看法。

注意：这样做只是为了看看是否可以完成。我认为在运输代码中使用它不是一个好主意。

首先`#import "EXTRuntimeExtensions.h"`从[libextobjc](https://github.com/jspahrsummers/libextobjc)导入。然后：

```
#define underize(name) _##name

#define property_type(property) \
    property_attr(property)->objectClass

#define property_attr(propertyName) \
    ext_copyPropertyAttributes(class_getProperty(self.class, # propertyName))

#define default_init(propertyName) \
    - (id)propertyName { \
       if(!underize(propertyName)) self.propertyName = [property_type(propertyName) new]; \
       return underize(propertyName); \
} \ 
```

然后说你有一个财产：

```
@property (nonatomic) NSArray *myArray; 
```

你可以做：

```
default_init(myArray); 
```

这会创建一个默认的 getter。

# msbuild - 使用 XmlRead 在 MSBuild 中获取给定属性的键值

> ID：15587467
> 
> 赞同：0
> 
> 时间：2013-03-23T13:44:06.537
> 
> 标签：msbuild

我有一个包含（除其他外）这样的 xml 结构的文件：

```
<exchanges>
    <name deliverycode="11">BIT</name>
    <name deliverycode="92">BOTC</name>
    <name deliverycode="24">BTEC</name>
    <name deliverycode="24">BTEX</name>
    <name deliverycode="60">NPCH</name>
    <name deliverycode="00">TSE</name>
    <name deliverycode="00">TSP</name>
    <name deliverycode="91">UCA</name>
</exchanges> 
```

对于给定的首字母缩写词，我想要交付代码编号，例如“BIT”应该返回“11”、“BOTC”->“92”等。我使用 MSBuild v4.0 并且没有成功尝试 XmlRead 任务来完成此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:24:33.013

您可以使用其中一种[在线 XPath 生成器](https://www.google.de/search?q=online%20xpath%20generator&aq=f&oq=online%20xpath%20generator&aqs=chrome.0.57j0l3j62j61.1054&sourceid=chrome&ie=UTF-8)和 XPath 评估器来快速获得正确的 XPath。

我用[这个](http://www.online-toolz.com/tools/xpath-editor.php)来测试以下 XPath：

```
string(/exchanges//name[text()="BOTC"]/@deliverycode) 
```

它产生正确的输出`92`

您可以使用[MSBuild 社区任务项目中的](https://github.com/loresoft/msbuildtasks)**XMLRead**任务来检索值（看起来您在帖子中引用了它，所以我提到它是为了确保我们在同一页面上）。

注意：我现在没有在 msbuild 环境中测试 XPath 的设置（我只使用我提到的 web 评估器进行了测试），因此可能需要进行一些小的调整以使其在 msbuild env 中产生值。

# java - 我的自定义 JDialog 最小化并且 JScrollPane 的滚动消失了

> ID：15587469
> 
> 赞同：0
> 
> 时间：2013-03-23T13:44:20.320
> 
> 标签：java, image, swing, jscrollpane, jdialog

我创建了一个基本的摇摆程序，`JDialog`它在通过`JFileChooser`. 我`JScrollPane`在对话框内部使用了`JLabel`一个，在窗格内使用了一个作为图标添加的图像。

以下是我用来构造对话框及其内容的代码，对象已经通过一个简单的 new 调用进行了初始化：

```
 jDialog1.setTitle("Image");
    jDialog1.setModal(true);

    jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
    jScrollPane2.setViewportView(jLabel1); 
```

Netbeans 已用于构建 GUI。

以下是我用来加载和显示图像的代码：

```
 int rval = jFileChooser1.showDialog(this, "Show");
    File f = jFileChooser1.getSelectedFile();
    jDialog1.setTitle(jDialog1.getTitle() + " : " + f.getName());
    try {
        BufferedImage bf = ImageIO.read(f);
        jLabel1.setIcon(new ImageIcon(bf));
    }
    catch (IOException ioe) {
    }
    jDialog1.setLocationRelativeTo(null);
    jDialog1.setVisible(true);
    jDialog1.pack(); 
```

虽然图像已加载并显示，但问题是

*   我的对话框以最小化的形式出现在左上角，我必须拖动它的角才能查看图像。包括相同的图像。

    ![在此处输入图像描述](../Images/6bd609e94168a2fa7a99e98e56ddbb4e.png)

*   滚动窗格的水平滚动在对话框完全展开和图像完全显示之前很久就消失了。虽然垂直滚动条效果很好。

我已经尝试设置两者的大小和首选大小，`JDialog`但`JLabel`问题仍然存在。

提前谢谢！

**注意：**水平滚动条问题用`pack()`对话框上的方法解决了，但是最小化的对话框还在。此外，对话框现在也出现在屏幕中央。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T10:43:56.970

模式对话框的方法调用顺序很重要，您必须在使对话框可见之前调用包（因为否则在关闭对话框之前不会执行包）：

```
dialog.pack();
// Edit: manually double its size:
dialog.setSize(dialog.getPreferredSize().width * 2, dialog.getPreferredSize().height * 2);
dialog.setVisible(true); 
```

# css - Chrome 1px 背景随机错误

> ID：15587472
> 
> 赞同：0
> 
> 时间：2013-03-23T13:44:26.130
> 
> 标签：css, google-chrome, background

我的 chrome 中 div 的背景有问题，这取决于窗口的大小（完全随机），我的 div 的背景显示向下偏移 1px。

你知道有什么技巧可以避免这个 Chrome 错误吗？使用 background-attachment: 修复了这个错误消失，但是使用浮动 div，背景变得疯狂，然后，我不能使用这个技巧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:58:18.253

您是否尝试过 background-size:contain ？

# css - 链接的颜色并不总是正确显示

> ID：15587474
> 
> 赞同：0
> 
> 时间：2013-03-23T13:44:44.943
> 
> 标签：css, hyperlink

这是我的 CSS：

```
/* Navigation Bar */
#linkBar
{
    position: relative; 
    overflow: hidden; 
    height:24px;
    width:999px;
    background:#990033;
}

.linkbar ul
{
    list-style-type:none;
    margin:0;
    padding:0;
    overflow:hidden;
}
.linkbar li
{
    float:left;
}
.linkbar a:link,a:visited
{
    font-size: 14px;
    display:block;
    width:134px;
    font-weight:bold;
    color:#FFFFFF;
    background-color:#990033;
    text-align:center;
    padding:4px;
    text-decoration:none;
    text-transform:uppercase;
}
.linkbar a:hover,a:active
{
    background-color:#000000;
}

/* Links */
a:link,a:visited,a:active
{
    font-size: 8pt;
    font-weight:bold;
    color:#990033;
    text-decoration:underline;
}
a:hover
{
    color:#0000FF;
    text-decoration:none;
} 
```

我的预期结果是链接显示如下：

![普通链接](../Images/1e84c298e9317b6dc61023417f09fc33.png)

![链接栏](../Images/024cf337fca0c5bf1e2340a035d83490.png)

大多数元素都是这种情况，但是链接栏上的第一个链接最终如下：

![错误的](../Images/eb40b072bfd14dd957abb5dff6e26158.png)

链接条码：

```
<div id="linkBar" class="linkbar">
    <ul>
        <li><a href="index.php">Home</a></li>
        <li><a href="course.php">Course</a></li>
        <li><a href="help.php">Help</a></li>
    </ul>
</div> 
```

我为此做了一个[jsfiddle](http://jsfiddle.net/goldfishdancer/GpZr8/)（在 jsfiddle 上，我没有发现链接栏中的第一个链接有问题，所以这意味着我的其余代码有问题？）。

如果我只是将css更改为：我可以解决导航栏的问题：

```
#linkBar
{
    position: relative; 
    overflow: hidden; 
    height:24px;
    width:999px;
    background:#990033;
}

/* Links */
a:link,a:visited,a:active
{
    font-size: 8pt;
    font-weight:bold;
    color:#990033;
    text-decoration:underline;
}
a:hover
{
    color:#0000FF;
    text-decoration:none;
}
/* Navigation Bar */
.linkbar ul
{
    list-style-type:none;
    margin:0;
    padding:0;
    overflow:hidden;
}
.linkbar li
{
    float:left;
}
.linkbar a:link,a:visited
{
    font-size: 14px;
    display:block;
    width:134px;
    font-weight:bold;
    color:#FFFFFF;
    background-color:#990033;
    text-align:center;
    padding:4px;
    text-decoration:none;
    text-transform:uppercase;
}
.linkbar a:hover,a:active
{
    background-color:#000000;
} 
```

但这意味着访问的普通链接文本颜色是白色的——这不是我想要的（因为一些普通链接在浅色或白色背景上）。

我为此做了一个[jsfiddle](http://jsfiddle.net/goldfishdancer/AMrwC/)（访问的链接是白色的）。

谁能看到我做错了什么/指出如何解决它的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:00:31.953

在你写的地方`.linkbar a:link,a:visited`你需要重复之前的类名`a:visited`

现在您实际上是在说“.linkbar 链接，然后覆盖所有 a:visited”

所以应该是`.linkbar a:link, .linkbar a:visited { .. }`

# c# - StreamInsight 中的 Linq 使用

> ID：15587477
> 
> 赞同：0
> 
> 时间：2013-03-23T13:45:21.510
> 
> 标签：c#, sql-server, linq, streaminsight

在 StreamInsight 中，许多示例解决了流的 count、sum、filter 的 linq 用法。

```
var cepStream = enumerable.ToPointStream(application, e =>  PointEvent<Car>.CreateInsert(new DateTimeOffset(e.TimeStamp, TimeSpan.Zero), e), AdvanceTimeSettings.IncreasingStartTime);

var step1 = from e in cepStream
                    where e.Color == "RedCar"
                    select e; 
```

定义提取在一定时间长度内发生的记录的查询有一些困难。例如step1存储的是“RedCar”的积分事件，但是如何提取10分钟内连续发生的两个“RedCar”事件呢？

真的被困在这里，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:50:06.407

To determine if 2 events occur within a certain time of each other, we have to manipulate their event lifetimes so that they are both valid at the same time. We can determine if 2 events are valid at the same time by using a join.

1.  Shift the event time for step1 as step2.

    var step2 = from e in step1.ShiftEventTime(e => TimeSpan.FromMinutes(10)) select e;

2.  Alter the event duration of step1 as step3.

    var step3 = from e in step1.AlterEventDuration(e => TimeSpan.FromMinutes(10)) select e;

3.  Join step2 and step3 as step4.

    var step4 = from l in step2 join r in step3 on l equals r select l;

Does that help?

# java - 打开 excel ooxml 2007 xlsx 文档返回 nullPointer 异常

> ID：15587479
> 
> 赞同：2
> 
> 时间：2013-03-23T13:45:27.980
> 
> 标签：java, apache-poi, xlsx

如何使用 Apache POI 打开 2007 xlsx ooxml 文件？我已将所有内容添加到我的类路径中，但不断收到此`java.lang.NullPointerException`错误：

```
"C:\Program Files\Java\jdk1.7.0_13\bin\java" -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:1804,suspend=y,server=n -Dfile.encoding=UTF-8 -classpath "C:\Program Files\Java\jdk1.7.0_13\jre\lib\charsets.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\deploy.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\javaws.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\jce.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\jfr.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\jfxrt.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\jsse.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\management-agent.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\plugin.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\resources.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\rt.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\ext\dnsns.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.7.0_13\jre\lib\ext\zipfs.jar;C:\Users\Patrick\Desktop\xmlChanger\out\production\xmlChanger;C:\poi-3.9\poi-3.9-20121203.jar;C:\poi-3.9\poi-examples-3.9-20121203.jar;C:\poi-3.9\poi-excelant-3.9-20121203.jar;C:\poi-3.9\poi-ooxml-3.9-20121203.jar;C:\poi-3.9\poi-ooxml-schemas-3.9-20121203.jar;C:\poi-3.9\poi-scratchpad-3.9-20121203.jar;C:\poi-3.9\lib\commons-codec-1.5.jar;C:\poi-3.9\lib\commons-logging-1.1.jar;C:\poi-3.9\lib\junit-3.8.1.jar;C:\poi-3.9\lib\log4j-1.2.13.jar;C:\poi-3.9\ooxml-lib\dom4j-1.6.1.jar;C:\poi-3.9\ooxml-lib\stax-api-1.0.1.jar;C:\poi-3.9\ooxml-lib\xmlbeans-2.3.0.jar;C:\Program Files (x86)\JetBrains\IntelliJ IDEA 12.0.1\lib\idea_rt.jar" Main
Connected to the target VM, address: '127.0.0.1:1804', transport: 'socket'
java.lang.NullPointerException
    at org.apache.poi.openxml4j.opc.OPCPackage.getPart(OPCPackage.java:625)
    at org.apache.poi.POIXMLDocumentPart.<init>(POIXMLDocumentPart.java:91)
    at org.apache.poi.POIXMLDocument.<init>(POIXMLDocument.java:56)
    at org.apache.poi.xssf.usermodel.XSSFWorkbook.<init>(XSSFWorkbook.java:183)
    at org.apache.poi.ss.usermodel.WorkbookFactory.create(WorkbookFactory.java:73)
    at Main.main(Main.java:178)
Disconnected from the target VM, address: '127.0.0.1:1804', transport: 'socket'

Process finished with exit code 0 
```

我的代码如下：

```
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.ss.usermodel.WorkbookFactory;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import java.io.File;
import java.util.Iterator;

public class Main {
    public static void main(String[] args) {
        try {

            File file = new File(root_dir + "2013-03-13 iom diff.xlsx");
            Workbook workbook = WorkbookFactory.create(file); //fails here

            //...

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

同样，我已经搜索过这个但没有找到任何有效的答案（例如，确保目录路径正确，超出范围等）

我之前问过一个类似的问题，但错误是不同的，因为我相信在 Microsoft Excel 中保存时我只使用了普通的 xlsx 格式而不是 OOXML xlsx 格式。

这个空指针异常来自哪里的任何想法或使抛出的异常更有意义的方法？

**编辑**

当我使用以下代码创建工作簿时，它会打开上面发布的代码：

```
 Workbook wb = new XSSFWorkbook();
        CreationHelper createHelper = wb.getCreationHelper();
        Sheet sheet = wb.createSheet("new sheet");

        Row r = sheet.createRow((short) 0);

        Cell cell = r.createCell(0);
        cell.setCellValue(1);

        r.createCell(1).setCellValue(1.2);
        r.createCell(2).setCellValue(createHelper.createRichTextString("This is a string"));
        r.createCell(3).setCellValue(true);

        // Write the output to a file
        FileOutputStream fileOut = new FileOutputStream("workbook.xlsx");
        wb.write(fileOut);
        fileOut.close(); 
```

这意味着格式无效，但我不确定交易是什么，因为我在 Excel 中保存为 OOXML

# string - 就地替换字符串中的模式

> ID：15587482
> 
> 赞同：3
> 
> 时间：2013-03-23T13:45:56.137
> 
> 标签：string, algorithm, string-algorithm

在一次采访中，我被问到一个关于字符串的问题。问题给出了一个字符串**s1= "ABCDBCCDABCD"**。和一个**模式 "BC"**。我们必须用其他字符串（“UVW”或“U”或“uv”）替换此模式。这需要就地到位。

```
 Take the case as:  
          replace "BC" with  following 
 a) "uvw"   s1=AUVWDUVWCDAUVWD .
 b)  "U"    s1=AUDUCDAUD .
 c)  "UV"   s1=AUVDUVCDAUVD . 
```

有人提供程序和算法将对您有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:23:13.847

我的计划是创建一个链接列表来保存最终输出。

创建一个变量来保存模式中的当前索引。

循环输入字符串，如果当前字符与模式中索引处的字符匹配，则我们增加索引。

如果索引现在等于模式的长度，则将替换字符串附加到输出并重置索引

如果当前字符与模式中索引处的字符不匹配，则将模式中的所有内容附加到（并包括）模式中的索引并重置索引。

在 java 中，这看起来像：

```
public static void main(String[] args) {
    final String s = "ABCDBCCDABCD";
    System.out.println(replaceAll(s, "BC", "UVW"));
    System.out.println(replaceAll(s, "BC", "U"));
    System.out.println(replaceAll(s, "BC", "UV"));
}

public static String replaceAll(final String in, final String p, final String r) {
    final List<Character> newString = new LinkedList<>();

    final List<Character> pattern = new ArrayList<>();
    for (final Character c : p.toCharArray()) {
        pattern.add(c);
    }
    final List<Character> replace = new ArrayList<>();
    for (final Character c : r.toCharArray()) {
        replace.add(c);
    }
    int positionInPattern = 0;
    for (final char c : in.toCharArray()) {
        if (c == pattern.get(positionInPattern)) {
            positionInPattern++;
            if (positionInPattern == pattern.size()) {
                newString.addAll(replace);
                positionInPattern = 0;
            }
        } else {
            if (positionInPattern > 0) {
                newString.addAll(pattern.subList(0, positionInPattern + 1));
                positionInPattern = 0;
            }
            newString.add(c);
        }
    }
    final StringBuilder sb = new StringBuilder();
    for (final Character c : newString) {
        sb.append(c);
    }
    return sb.toString();
} 
```

输出：

```
AUVWDUVWCDAUVWD
AUDUCDAUD
AUVDUVCDAUVD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T13:55:02.037

实际上，您可以在具有 realloc 的语言中就地执行此操作（如果 realloc 就地成功，则根本无法保证）。

如果替换字符串比原始模式长，那么我们首先扫描模式并计算新字符串的长度。然后我们调用 realloc 来扩展可用的缓冲区并开始向后复制到字符串。

```
[A][B][C][D][B][C][C][D][A][B][C][D][␀]
# extend buffer:
[A][B][C][D][B][C][C][D][A][B][C][D][␀][ ][ ][ ]
# after first few iterations of the copy loop
[A][B][C][D][B][C][C][D][A][B][C][D][␀][ ][ ][␀]
[A][B][C][D][B][C][C][D][A][B][C][D][␀][ ][D][␀]
[A][B][C][D][B][C][C][D][A][B][C][D][␀][C][D][␀]
[A][B][C][D][B][C][C][D][A][B][C][U][V][W][D][␀]
[A][B][C][D][B][C][C][D][A][B][A][U][V][W][D][␀] 
```

我的 C 有点生锈，但这段代码似乎可以完成这项工作：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int pat_match(char* str, char* pattern)
{
    while(*pattern == *str) 
    {
        if(*pattern == '\0' || *str == '\0') break;
        pattern++;
        str++;
    }
    return (*pattern == '\0');
}

char* replace(char* str, char* pattern, char* rep)
{
    int len_str = strlen(str);
    int len_pattern = strlen(pattern);
    int len_rep = strlen(rep);

    if(len_rep > len_pattern)
    {
        int count_matches = 0;
        char* scan = str;
        while(*scan) 
        {
            if(pat_match(scan, pattern))
            {
                printf("Match!\n");
                count_matches++;
                scan += len_pattern;
            }
            else
            {
                scan++;
            }
        }
        if(count_matches == 0) return str;

        int len_new = len_str + count_matches * (len_rep - len_pattern);

        str = realloc(str, len_new+1);
        int new_pos, pos;
        for(pos=len_str-1,new_pos=len_new-1;pos>=0;pos--,new_pos--)
        {
            if(pat_match(str+pos, pattern))
            {
                memcpy(str+new_pos-(len_rep-len_pattern), rep, len_rep);
                new_pos = new_pos - (len_rep-len_pattern);
            }
            else
            {
                str[new_pos] = str[pos];
            }
        }
        str[len_new] = '\0';
    }
    else
    {
        int new_pos, pos;
        for(pos=0,new_pos=0; pos<len_str; pos++,new_pos++)
        {
            if(pat_match(str+pos, pattern))
            {
                memcpy(str+new_pos, rep, len_rep);
                pos += len_pattern-1;
                new_pos += len_rep-1;
            }
            else
            {
                str[new_pos] = str[pos];
            }
        }
        str[new_pos] = '\0';
    }

    return str;
}

void main() 
{
    char* s = (char*)malloc(12);
    strcpy(s, "Hello world");
    printf("%s\n", replace(s, "llo", "x"));
} 
```

# css - 自定义字体显示奇怪

> ID：15587488
> 
> 赞同：1
> 
> 时间：2013-03-23T13:46:41.133
> 
> 标签：css, fonts, webfonts

从一开始我就需要说我知道我想要做的不是“正确的方法”，但我正在为之工作的客户非常想要这种特定的字体。

所以，我需要在客户的网站上使用 VOGUE 使用的确切字体。所以我拿了 .eot & .ttf 并将它们上传到我的服务器上。然后我添加了 CSS 定义：

```
/*fonts fonts for IE*/
@font-face {
    font-family: VogueDidot;
    src: url('font/FBDidotL-Regular.eot') format('embedded-opentype');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: "VogueDidot Light";
    src: url('font/FBDidotL-Light.eot') format('embedded-opentype');
    font-weight: normal;
    font-style: normal;
}

/*fonts for other browsers*/
@font-face {
    font-family: VogueDidot;
    src: url('font/FBDidotL-Regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: "VogueDidot Light";
    src: url('font/FBDidotL-Light.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

我的元素的 CSS 是：

```
.post h1 {
    display: block;
    height: 100%;
    font-family: VogueDidot;
    font-size: 55px;
    text-transform: uppercase;
    overflow: hidden;
    line-height: 58px;
} 
```

而且，通常情况下，我希望看到一切都像魅力一样运作。

但这不是...

它应该是这样的：

![在此处输入图像描述](../Images/8dc3368d7ab3f6cc09725405f42dd346.png)

这就是它在我的网站上的外观：

![在此处输入图像描述](../Images/1c180a63a661321f828e3fe2818adfa4.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T13:52:41.210

看起来浏览器正在尝试将字体显示为粗体并重复相邻的灰色像素（来自细线）。尝试使用`font-weight: normal`（`font-weight:bold`从 h1 元素继承）。

# ios - CGFloat 比较错误

> ID：15587492
> 
> 赞同：2
> 
> 时间：2013-03-23T13:47:10.613
> 
> 标签：ios, objective-c, quartz-graphics

在我的应用程序中，我正在检查 CGPoint 的 x 值是否不同于 if 语句中的零。但是，尽管该点的 x 值为零，但应用程序会进入 if 语句。这是代码：

```
CGPoint previousPoint;

     if (previousPoint.x != 0) {
            NSLog(@"YES");
            CGContextMoveToPoint(context, previousPoint.x, previousPoint.y);
            CGContextAddLineToPoint(context, 150+(40*[[[self.grades objectAtIndex:i] semesterGPA] doubleValue]), 59+(40*(i+1)));
        }
    } 
```

运行应用程序后打印“YES”，虽然它不应该像 previousPoint 是 (0.000000, 0.000000) 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:50:01.953

确保`previousPoint`以一定的价值启动！并将 float 与 float 而不是 int 进行比较。

```
CGPoint previousPoint;

     if (previousPoint.x != 0.0f) {
            NSLog(@"YES");
            CGContextMoveToPoint(context, previousPoint.x, previousPoint.y);
            CGContextAddLineToPoint(context, 150+(40*[[[self.grades objectAtIndex:i] semesterGPA] doubleValue]), 59+(40*(i+1)));
        }
    } 
```

# c - 已失效的进程，fork()

> ID：15587500
> 
> 赞同：2
> 
> 时间：2013-03-23T13:48:09.960
> 
> 标签：c, fork

如果我运行这个程序，我会有失效的进程吗？我正在尝试创建一个主程序，该程序并行运行 5 个进程，然后不获取已失效的进程。麻烦主要是要确保这不会发生。我不太确定我到目前为止是否做得对。我听说这是一个很好的做法，通过让你的进程“wait()”来确保你的进程没有失效的进程，以确保尽可能多的孩子已经被“fork()”了。

```
#include <time.h>
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <stdlib.h>

void forkChildren(int nrofChildren, int *nr_of_children) {
    pid_t pid;
    int i;
    for(i=0; i<5; i++) {
        /* fork a child process */
        pid = fork();
        (*nr_of_children)++;
        /* error occurred */
        if (pid < 0) {
            fprintf(stderr, "Fork failed\n");
            exit(-1);
        }
        /* successful child */
        else if (pid == 0) {
            int sleeptime=1; //rand()%10;
            printf("I am child: %d \nwith parent: %d \nin loop: %d \nand will sleep for: %d sec\n\n", getpid(), getppid(), i, sleeptime);
            sleep(sleeptime);
            printf("Ending of child: %d \nwith parent :%d in loop: %d\n\n", getpid(), getppid(), i);
        }
        /* parent process 
        else {
            wait(NULL); Do I need this to make sure I dont get defunct processes???
        } */
    }
}

int main(int argc, char *argv[]) {
    srand((unsigned int)time(NULL));
    int nr_of_children=0;
    if (argc < 2) {
        /* if no argument run 5 childprocesses */
        forkChildren(5, &nr_of_children);
    } else {
        forkChildren(atoi (argv[1]), &nr_of_children);
    }
    wait(NULL);
    printf("End of %d, with %d nr of child-processes\n\n", getpid(), nr_of_children);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:50:48.003

是的，您需要`wait`在子进程上。原因是否则仍然会有与现在僵尸进程关联的数据，例如进程返回值的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:56:49.443

看看使用 daemon() 命令将您的应用程序置于后台，然后使用 pthreads 来管理并行性。

> **NAME** 守护进程 - 在后台运行
> 
> **概要** #包括
> 
> ```
>  int daemon(int nochdir, int noclose); 
> ```
> 
> glibc 的功能测试宏要求（参见 feature_test_macros(7)）：
> 
> ```
>  daemon(): _BSD_SOURCE || (_XOPEN_SOURCE && _XOPEN_SOURCE < 500) 
> ```
> 
> **说明** daemon() 函数适用于希望将自身与控制终端分离并作为系统守护进程在后台运行的程序。
> 
> ```
>  If nochdir is zero, daemon() changes the process’s current working directory to the root directory ("/"); otherwise,
> 
>    If noclose is zero, daemon() redirects standard input, standard output and standard error to /dev/null; otherwise, no changes are made 
> ```
> 
> 到这些文件描述符。

# c++ - c ++具有给定概率数组的随机数

> ID：15587505
> 
> 赞同：0
> 
> 时间：2013-03-23T13:48:24.597
> 
> 标签：c++, random, distribution, probability, random-sample

对于由数组索引标识的某些动作，我有一个概率数组（例如 Boltzmann 分布）

```
for(int i=0;i<N_ACTIONS;i++)
        {
            p[i]=exp(q_tab[state()][i]/T);

            if(isnan(p[i]))
            {
                p[i]=0;
            }

        }
        long double s=p.sum();
        for(int i=0;i<N_ACTIONS;i++)   
        {
            p[i]=p[i]/s; 
        } 
```

我必须选择一个随机数 i 介于 0 和 N_ACTIONS-1 之间，概率为 p[i]; 我做了这个，但似乎效果不佳：

```
int ChoiceFromDist(valarray<long double> p)
{
    int                   index=0;
    valarray<long double> cumulativa(p.size());

    cumulativa[0]=p[0];

    for(int i=1; i < p.size(); i++)
        cumulativa[i]  =  cumulativa[i-1]+p[i];

    long double num= ( (long double)rand()/(long double)RAND_MAX ); 

    while(index<p.size() && cumulativa[index]<num )
        index++;
    return index;
} 
```

呼叫者：

```
srand(time(0));
act=ChoiceFromDist(p); 
```

似乎总是选择相同的数字（从 0 到 2 它选择 2）...。您是否看到错误或错误可能出现在另一个代码点中？谢谢

# ios - ios - 验证捆绑包时，错误提示捆绑包无效，但我确保它匹配

> ID：15587509
> 
> 赞同：1
> 
> 时间：2013-03-23T13:48:42.697
> 
> 标签：ios, xcode, ios6

当我验证档案时，我收到错误：

```
This bundle is invalid. The value for key CFBundleVersion [.99] in the Info.plist file must be period-separated list of non-negative integers. 
```

我不完全确定为什么会发生该错误。我到处都有 .99 版本。有谁知道为什么会这样？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:56:41.847

由于“Info.plist 文件中键 CFBundleVersion [.99] 的值必须是由句点分隔的非负整数列表”，因此您应该设置版本号`0.99`。

# css - CSS图像显示空白？

> ID：15587512
> 
> 赞同：0
> 
> 时间：2013-03-23T13:48:52.890
> 
> 标签：css, perl

我有一个小的 Perl 脚本，可以将一些外部图像加载到页面中。图像链接（其中 50 个）都在一个数组中，我遍历该数组以转储到屏幕。虽然我在 Perl 方面相当出色，但我之前从未做过任何 Web 开发，所以我完全是 CSS 的菜鸟。我在 html 模板中有以下代码

```
[% FOREACH dvd IN dvd_chart %]

<div class="thumbnail">
<img  src="[% dvd.thumbnail %]" />
<br>
</div>

[% END %] 
```

CSS是这样的：

```
.thumbnail
{
float: left;
width: 120px;
border: 1px solid #999;
margin: 0 15px 15px 0;
padding: 5px;
} 
```

编辑：生成的 HTML 如下所示：

```
<div class="thumbnail">
<img  src="http://content9.flixster.com/movie/11/16/78/11167831_pro.jpg" />
<br>
Taken 2
</div>
<div class="thumbnail">
<img  src="http://content9.flixster.com/movie/11/16/86/11168615_pro.jpg" />
<br>
The Possession
</div>
<div class="thumbnail">
<img  src="http://content7.flixster.com/movie/11/16/80/11168037_pro.jpg" />
<br>
Won't Back Down
</div>
<div class="thumbnail">
<img  src="http://content9.flixster.com/movie/11/16/51/11165143_pro.jpg" />
<br>
To Rome with Love
</div 
```

问题是图像开始完美加载，前两行很好，但随后会有几行只有一张图像，然后是更多好的行。没有丢失的 URL。任何人都可以建议可能出了什么问题，甚至可以建议将动态图像加载到 div 中的好教程 - 包装！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:30:35.070

我在 JS fiddle 中查看了您的 HTML 和 CSS，我立即发现这是任何具有较长电影标题的项目的高度问题。在 Google 上快速搜索“CSS 库可变高度”会显示本教程：http: [//jonathanweatherhead.com/2012/12/31/how-to-make-a-flowing-css-gallery-layout/](http://jonathanweatherhead.com/2012/12/31/how-to-make-a-flowing-css-gallery-layout/)

我会遵循的。否则，您可能必须为所有画廊项目设置高度（不是最佳计划）或限制电影标题的长度（也不是很好）。

# php - 以下查询有什么问题？

> ID：15587513
> 
> 赞同：0
> 
> 时间：2013-03-23T13:48:54.573
> 
> 标签：php, database, mysqli

我试过这个查询

```
 SELECT *
 FROM `references`
 WHERE
 (`continent_id` IN (2,8) AND `country_id`IN (18) )
   OR `continent_id` IN (2,8)
 LIMIT 0 , 30 
```

在这里，我要做的是选择那些同时具有**国家和大陆 id**或只有**大陆 id**的记录，但上面的查询总是导致只有大陆 id 的记录， **即**（ OR `continent_id`IN (2,8) 始终为**真**）

知道这个查询出了什么问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:08:03.833

试试这个：

```
SELECT * FROM `references` WHERE `continent_id` IN (2,8) OR `country_id`IN (18) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:01:12.827

这是错误的，因为如果您的第一个条件是好的，那么第二个肯定是正确的。然后它是 OR 所以只有第二个条件有效。

# c# - 处理类资源

> ID：15587515
> 
> 赞同：3
> 
> 时间：2013-03-23T13:49:02.007
> 
> 标签：c#

我有以下课程：

```
public class MailData : IDisposable
{
  public IDictionary<String, Tuple<Byte[], String>> Attachments { get; set; }
  public String From { get; set; }
  public IList<String> To { get; set; }   
  public MailType Type { get; set; }
} // MailData 
```

处置班级的正确方法是什么？

我的意思是，我认为我应该`Byte[]`从`Dictionary`...中删除所有内容

其他属性呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T13:53:38.233

.NET 是一个托管环境，您必须允许垃圾收集器完成它的工作，您没有理由处置简单的引用类，`byte[]`它仍然是一个引用。

通常您使用该`Dispose`模式来释放有价值的资源，例如文件 I/O、各种流、数据库连接...等

但是，在您的情况下，您无需自己做任何事情。

欢迎来到 C# 的托管世界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:54:09.740

你不需要做任何事情，除非你的`MailType`类也是一次性的，在这种情况下你会想要处理它。您不需要清除任何集合，因为它们会在超出范围后的某个时间连同其内容一起被垃圾收集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T14:00:35.193

`MailType`除非有一些非托管资源，否则您无需执行任何操作。在这种情况下，您应该重写此类的 Dispose 并调用 MailType 对象的 Dispose。

此外，如果字典中的字节数很大，则应将实例包装在`using`语句中。

```
using(var m = new MailData())
{
   // use the object here

} // the m.Dispose() gets called here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T14:00:12.830

首先，您应该考虑需要实现哪些方法。[你可以在这里](http://msdn.microsoft.com/de-de/library/vstudio/b1yfkh5e%28v=vs.100%29.aspx)找到一篇有趣的文章 总结：你应该只在真正需要它们时才实现 dispose / finalize，否则只会减慢 GC 的速度。在这些方法中，您只需要释放非托管资源。要了解有关非托管资源的更多信息，请查看[此](https://stackoverflow.com/questions/3433197/what-exactly-are-unmanaged-resources). 还要问自己：我是要通过调用 dispose 显式释放非托管资源，还是要让 GC 通过隐式调用 Finalize 来完成它。

希望有帮助，Xaser

# google-sheets - 对符合 3 个条件的列中的项目进行求和/计数

> ID：15587517
> 
> 赞同：0
> 
> 时间：2013-03-23T13:49:05.613
> 
> 标签：google-sheets, google-docs, formula

提前感谢任何可以帮助我的人，我想我已经很接近了，但它仍然无法正常工作。

我有一个简单的活动报告表，我要求员工在来年完成 - 它有 5 列：

1.  A 列：日期 - 格式（2013 年 4 月 4 日 13:30:00）
2.  B 列：标题 - 格式（文本字符串）
3.  C 列：出勤 - 格式（数字）V
4.  D 列：Vol led - 格式（文本字符串）
5.  E 列：人员领导 - 格式（文本字符串）

使用这些数据我有 90% 的肯定，我可以在不同的汇总表上汇总，其中包含一些静态数据，如月份（在 B 列中）进行汇总。我无法在过滤器中配置标准，但会导致正确的输出为 sum 或 count 。

*   **由工作人员或 vol 编辑的事件数量，如果两个框都未选中，则不应计算事件）**现在我正在尝试这个，但它不起作用

*=SUM(FILTER('旅馆活动'!A:A,MONTH('旅馆活动'!A:A)=$B3, NOT(AND(ISBLANK('旅馆活动'!D:D),ISBLANK('旅馆活动'! '!E:E)))*

*   **一个月内由工作人员或志愿者领导的活动的总出席人数**现在我正在尝试这个，但它不起作用

*=SUM(FILTER('旅馆活动'!A:A,MONTH('旅馆活动'!A:A)=$B3, NOT(AND(ISBLANK('旅馆活动'!D:D),ISBLANK('旅馆活动'! '!E:E)))*

*   行得通！## 标题 ##**一个月内志愿者领导的活动总数**现在我正在使用它并且它正在工作

*=COUNT(FILTER('旅舍活动'!A:A,month('旅舍活动'!A:A)=B3,not(isblank('旅舍活动'!E:E))))*

感谢您的任何帮助和/或指导

丹尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:30:22.003

我在您的前两个公式中看到的第一个问题是您正在调用`SUM`您的`FILTER`结果。但是`FILTER`返回的`A`是日期列。所以，你基本上总结日期，这肯定不会产生你正在寻找的结果。你为什么不使用`COUNT`，就像你在上一个公式中所做的那样？

其次，您粘贴的前两个公式是相同的，您如何期望它们返回不同的结果？

似乎前两个想要总结一个 OR 条件。您可以通过两种方式做到这一点（我现在能想到的）。更简单的理解是将两个`COUNT(FILTER(...`公式相加，每个标准一个，例如

```
=COUNT(FILTER('Hostel Activities'!A:A,month('Hostel Activities'!A:A)=B3,not(isblank('Hostel Activities'!D:D)))) + B6 
```

假设 on`B6`是另一个`COUNT`公式（第三个，已经有效）。

另一种选择是使用`OR`函数作为`FILTER`. 像这样：

```
=COUNT(FILTER('Hostel Activities'!A:A,month('Hostel Activities'!A:A)=B3, OR(NOT(ISBLANK('Hostel Activities'!E:E)), NOT(ISBLANK('Hostel Activities1!D:D))) )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:16:37.303

我相信我已经找到了一种通过对公式和源数据进行一些调整来工作的方法。

基本上

**在源报告数据中**：

我将 D 列和 E 列合并到同一列中，并添加了数据验证，因此如果活动由员工、志愿者或两者都不是，协调员必须输入。

**在每月汇总报告中**：

为了计算由工作人员或志愿者领导的活动数量，我使用了这个：

=COUNT(FILTER('旅舍活动'!A:A,month('旅舍活动'!A:A)=B3,'旅舍活动'!D:D="Staff"))+E3

*E3 是使用以下公式得出的志愿者主导活动的计数：

=COUNT(FILTER('旅舍活动'!A:A,month('旅舍活动'!A:A)=B3,'旅舍活动'!D:D="志愿者"))

将工作人员或志愿者开展的活动的参与者人数相加有点困难，但我能够通过将两个独特的方程式相加来做到这一点。我更喜欢在过滤条件中使用 OR 语句，但我无法让它发挥作用。这就是我能够实现它的方式：

=SUM(FILTER('旅舍活动'!C:C,month('旅舍活动'!A:A)=B3,'旅舍活动'!D:D="Staff")) + SUM(FILTER('旅舍活动' '!C:C,month('宿舍活动'!A:A)=B3,'宿舍活动'!D:D="志愿者"))

谢谢大家的帮助

# javascript - JavaScript 歌曲播放和暂停

> ID：15587518
> 
> 赞同：0
> 
> 时间：2013-03-23T13:49:12.963
> 
> 标签：javascript, html, dom

我已经设法在单击图像后立即播放和暂停 mp3 文件，问题是每次我选择另一个图像（这意味着播放不同的 mp3 歌曲）时，它都会自动恢复同一首歌曲。

我的 JavaScript：

```
function StartOrStop(audioFile)
  {
    var audie = document.getElementById("myAudio");
    if(!audie.src)
       audie.src = audioFile;
    if(audie.paused == false)
     {
        audie.pause();
     }
     else
     {
       audie.play();
     }
  } 
```

和 HTML：

```
<img src="images/play.png" alt="Play Button" width="57" height="50" onclick="StartOrStop('RWY.mp3')">

<img src="images/play.png" alt="Play Button width="57" height="50" onclick="StartOrStop('EL.mp3')">

<audio controls id="myAudio" ></audio> 
```

任何建议我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:45:19.403

您不是`src`在点击时分配新的，而是首先检查它是否存在。第二个文件永远不会被分配，`src`因为`src`已经存在。

**编辑**

您应该改为检查是否`audie.src === audioFile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T02:18:42.513

这种方法怎么样

```
<audio id="demo1" src="RWY.mp3"></audio>
<div>
  <button onclick="document.getElementById('demo1').play()">Play the Audio</button>
  <button onclick="document.getElementById('demo1').pause()">Pause the Audio</button>
  <button onclick="document.getElementById('demo1').volume+=0.1">Increase Volume</button>
  <button onclick="document.getElementById('demo1').volume-=0.1">Decrease Volume</button>
</div> 
<audio id="demo2" src="EL.mp3"></audio>
<div>
  <button onclick="document.getElementById('demo2').play()">Play the Audio</button>
  <button onclick="document.getElementById('demo2').pause()">Pause the Audio</button>
  <button onclick="document.getElementById('demo2').volume+=0.1">Increase Volume</button>
  <button onclick="document.getElementById('demo2').volume-=0.1">Decrease Volume</button>
</div> 
```

而不是按钮，您可以使用图像只是标签更改。

# javascript - 有没有比循环更有效的方法来填充下拉列表？

> ID：15587524
> 
> 赞同：0
> 
> 时间：2013-03-23T13:49:46.687
> 
> 标签：javascript, jquery, performance, knockout.js

我一直在提高页面性能，但是在加载各种下拉菜单时，我浪费了太多时间。有没有比这更快的方法来填充控件？

my.service.data.controls 是来自 ajax 调用的 json 数据集合的内存集合，用于键/值对（Id、Name）、Days、Years、Salutations 等中的各种控件

```
$.each(my.service.data.controls.Days, function (i, p) {
     days.push(new my.models.dropdown(selectedItem)
     .Id(p.Id)
     .Name(p.Id));
});

// for creating Position Models
my.models.dropdown = function (selectedItem) {
    var self = this;
    self.Id = ko.observable();
    self.Name = ko.observable();
    // non-persitable properties
    self.isSelected = ko.computed(function () {
        return selectedItem() === self;
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:57:05.430

我建议您在尝试优化之前分析您的 js（如果您还没有）。性能上的痛苦可能源于代码中的其他地方。

首先，打开 Chrome 检查器，选择“配置文件”选项卡，然后单击开始。然后加载您的页面，单击停止，看看发生了什么！

# objective-c - 放大 NSImage 并保存

> ID：15587527
> 
> 赞同：2
> 
> 时间：2013-03-23T13:49:57.207
> 
> 标签：objective-c, macos, nsimage, nsimageview, nsbitmapimagerep

我想放大 64 像素的图像以使其变为 512 像素（即使它是模糊的或像素化的）

我正在使用它从我的 NSImageView 获取图像并保存它：

```
NSData *customimageData = [[customIcon image] TIFFRepresentation];
    NSBitmapImageRep *customimageRep = [NSBitmapImageRep imageRepWithData:customimageData];

    customimageData = [customimageRep representationUsingType:NSPNGFileType properties:nil];

    NSString* customBundlePath = [[NSBundle mainBundle] pathForResource:@"customIcon" ofType:@"png"];
    [customimageData writeToFile:customBundlePath atomically:YES]; 
```

我试过 setSize: 但它仍然保存 64px。

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T16:18:30.993

您不能使用 NSImage 的`size`属性，因为它仅与图像表示的像素尺寸有间接关系。调整像素尺寸的一个好方法是使用[NSImageRep](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSImageRep_Class/Reference/Reference.html)`drawInRect`的方法：

```
 - (BOOL)drawInRect:(NSRect)rect 
```

> 在指定的矩形中绘制整个图像，并根据需要对其进行缩放以适合。

这是一个图像调整大小的方法（以您想要的像素大小创建一个新的 NSImage）。

```
- (NSImage*) resizeImage:(NSImage*)sourceImage size:(NSSize)size
{

    NSRect targetFrame = NSMakeRect(0, 0, size.width, size.height);     
    NSImage* targetImage = nil;
    NSImageRep *sourceImageRep =
    [sourceImage bestRepresentationForRect:targetFrame
                                   context:nil
                                     hints:nil];

    targetImage = [[NSImage alloc] initWithSize:size];

    [targetImage lockFocus];
    [sourceImageRep drawInRect: targetFrame];
    [targetImage unlockFocus];

return targetImage; 
} 
```

它来自我在这里给出的更详细的答案：[NSImage doesn't scale](https://stackoverflow.com/questions/12697465/nsimage-doesnt-scale/13978985#13978985)

另一个有效的调整大小方法是 NSImage 方法`drawInRect:fromRect:operation:fraction:respectFlipped:hints`

```
- (void)drawInRect:(NSRect)dstSpacePortionRect 
          fromRect:(NSRect)srcSpacePortionRect 
         operation:(NSCompositingOperation)op 
          fraction:(CGFloat)requestedAlpha 
    respectFlipped:(BOOL)respectContextIsFlipped 
             hints:(NSDictionary *)hints 
```

这种方法的主要优点是`hints`NSDictionary，您可以在其中对插值进行一些控制。放大图像时，这可能会产生截然不同的结果。`NSImageHintInterpolation`是一个可以取五个值之一的枚举...</p>

```
 enum {
       NSImageInterpolationDefault = 0,
       NSImageInterpolationNone = 1,
       NSImageInterpolationLow = 2,
       NSImageInterpolationMedium = 4,
       NSImageInterpolationHigh = 3
    };
    typedef NSUInteger NSImageInterpolation; 
```

使用这种方法不需要提取 imageRep 的中间步骤，NSImage 会做正确的事情......

```
- (NSImage*) resizeImage:(NSImage*)sourceImage size:(NSSize)size
{
    NSRect targetFrame = NSMakeRect(0, 0, size.width, size.height);
    NSImage*  targetImage = [[NSImage alloc] initWithSize:size];

    [targetImage lockFocus];

    [sourceImage drawInRect:targetFrame
                   fromRect:NSZeroRect       //portion of source image to draw 
                  operation:NSCompositeCopy  //compositing operation
                   fraction:1.0              //alpha (transparency) value
             respectFlipped:YES              //coordinate system
                      hints:@{NSImageHintInterpolation:
     [NSNumber numberWithInt:NSImageInterpolationLow]}];

    [targetImage unlockFocus];

    return targetImage;
} 
```

# php - 最佳实践：在 php-doc 中使用 @throws，以及如何处理它

> ID：15587530
> 
> 赞同：40
> 
> 时间：2013-03-23T13:50:08.720
> 
> 标签：php, exception, phpdoc

假设我有一个具有如下方法的类：

```
/*
 *
 * Loads the user from username.
 *
 * @param string $username The username
 *
 * @return UserInterface
 *
 * @throws userNotFoundException if the user is not found
 */
public function getUser($username)
{
    // someFunction return an UserInterface class if found, or null if not.
    $user = someFunction('SELECT ....', $username);
    if ($user === null) {
        throw new userNotFoundException();
    }

    return $user
} 
```

现在假设由于 XYZ 原因`someFunction`可能会抛出一个`InvalidArgumentException`// `RuntimeException`。`PDOException`我该怎么办？**什么不是？**

## 1号

添加所有可能`someFunction`在 php-docs 中抛出的异常。

```
/*
 *
 * Loads the user from username.
 *
 * @param string $username The username
 *
 * @return UserInterface
 *
 * @throws userNotFoundException if the user is not found
 * @throws InvalidArgumentException
 * @throws ...
 */ 
```

## 2号

添加一个 try-catch 块以确保该方法应该抛出异常，仅记录在案

```
/*
 *
 * Loads the user from username.
 *
 * @param string $username The username
 *
 * @return UserInterface
 *
 * @throws userNotFoundException if the user is not found
 * @throws RuntimeException 
 */
public function getUser($username)
{
    try {
        $user = someFunction('SELECT ....', $username);
    } catch (Exception $e) {
        throw new RuntimeException();
    }

    if ($user === null) {
        throw new userNotFoundException();
    }

    return $user
} 
```

## 3 号

不要做任何事。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-23T13:55:55.707

就我个人而言，我会考虑处理`@throws`类似于 Java 的已检查异常

这在 Java 中的工作方式是基本上可以抛出从 RuntimeException 继承的异常，而不必处理。任何其他类型的异常都必须有一个 try-catch 块来处理它们。此处理代码必须在调用者中。

基本上在 PHP 中有点像这样：

当一个方法有`@throws`注解时，你*必须*添加代码来处理它的异常。

任何未提及的异常对于调用代码中的处理都是可选的。

* * *

现在，我自己并没有 100% 遵循这个原则。整个处理异常的事情有点取决于程序员的偏好，但这只是我认为如何以合理的方式处理它的一些想法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-23T14:58:50.797

关于文档，如果一个函数*显式*抛出异常，那么它应该包含在函数的文档中。因此，对于每条语句，在 PHP 文档中`throw`都应该有对应的。`@throws`

~~关于处理，如果抛出异常时应该执行一些操作，则捕获它。否则，让它冒泡——前提是`catch`稍后有一个声明来处理它。~~

### 更新：

几年后，我改变了这样一种观点，即只有当异常仍然与模块的抽象级别相关时，才应该让异常“冒泡”而不加修改。应采用捕获和重新抛出策略以使异常更有意义。它还应该通过避免不必要地泄露有关抽象底层模块的信息来使错误处理更加安全。

```
/**
 * @throws UserNotFoundException
 */
public function getUser($username)
{
    try {
        $user = someFunction('SELECT ....', $username);
    } catch (DatabaseException $dbe) {

        /* Re-throw since a database exception may no longer be
         * meaningful to the caller.
         */
        throw new UserNotFoundException();
    }

    return $user
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-23T13:56:04.587

从文档维护的角度来看，我只会为特别抛出的异常添加@throw 行，否则您将很快使您的文档过时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-27T10:28:26.653

**第二**，但可能在返回之前抛出，因为抛出动作将在返回之前发生......

# ruby-on-rails - 如何模仿asp.net在rails中设置

> ID：15587533
> 
> 赞同：0
> 
> 时间：2013-03-23T13:50:45.490
> 
> 标签：ruby-on-rails, ruby

我正在尝试`get{}` `set{}`在 rails 中模仿 asp.net，这是我在控制器中尝试的：

```
def get_segment=(segment)
    if params[:s] != nil
      segment = params[:s]
    else
      segment = "personal"
    end
end 
```

然后我试图像这样访问它：

```
@something = get_segment 
```

但它总是返回为`nil`.

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:36:22.377

为什么要使用 get segment=(segment)？

看起来你想要做的是测试 params[:s]，所以 = 是不必要的，段参数也是如此。

```
def get_segment
    if params[:s] != nil
      params[:s]
    else
      "personal"
    end
end 
```

我认为这会给你你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T15:01:45.930

如果你只是想`get{}` `set{}`在 C# 中模仿，属性`Segment`

```
private string _segment;
public string Segment {
    get { return _segment; }
    set { _segment = value; }
} 
```

用 Ruby 编写如下：

```
# get
def segment
    @segment
end

# set
def segment=(value)
    @segment = value
end

# if you don't have additional logic, you can just write
attr_accessor :segment 
```

然后您可以使用`some_instance.segment`来检索值并`some_instance.segment = some_value`修改值。

根据上面的代码示例，如果`s`参数不存在，您希望使用默认值获取参数。您应该定义一个 getter，而不是您提供的 setter 形式。

```
def get_segment     # or just "segment"
    params[:s] || "personal"
end 
```

# excel - 如何制作一个excel单元格来显示今天的日期

> ID：15587539
> 
> 赞同：-4
> 
> 时间：2013-03-23T13:51:22.047
> 
> 标签：excel, date

我试图像这样打印今天的日期

```
=DATE(2013,3,23) 
```

但它只会打印该日期，直到某些用户更改数字。所以请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:55:12.817

`=Today()`

这个公式是动态的，将*始终*显示当前日期。

您可以这样做，或使用`Date()`公式，然后复制/粘贴值。

但是即使您这样做，用户仍然可以事后“更改数字”，因此除非您保护工作表或实施某种基于事件的宏来维护所需的日期，否则您无法避免这种情况。

这是一个简单的宏，无论用户对它做什么，它总是将今天的日期放在单元格 A1 中。将它放在工作表的代码模块中。

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Intersect(Target, Range("A1")) Is Nothing Then Exit Sub 'This will only trigger the event if the cell A1 changes. You can modify this as needed.

Target.Value = DateSerial(Year(Now()), Month(Now()), Day(Now()))

End Sub 
```

# ruby-on-rails - 如何通过与Active Record的关联查找has_many中缺少关联记录的记录？

> ID：15587540
> 
> 赞同：6
> 
> 时间：2013-03-23T13:51:22.067
> 
> 标签：ruby-on-rails

比方说，我们有“主题 - 关系 - 类别”。

即Topic has_many 通过关系分类。

我认为很容易获得具有类别的主题

```
 #Relationship  Model
  Topic_id: integer
  Category_id: integer

  @topics=Topic.joins(:relationships) 
```

但是，并非每个主题都有一个类别。那么我们如何检索没有类别的主题呢？有**减号**查询吗？

也许看起来我在[相当于 SQL 'minus'](https://stackoverflow.com/questions/3428852/activerecord-equivalent-to-sql-minus)`@topics=Topic.where('id NOT IN (?)', Relationship.all)` 的 activerecord 中找到了它，但不确定这个解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T15:26:10.280

作为一个关系会更好，真的。认为这会起作用：

```
@topics = Topic.joins('left join relationships on relationships.topic_id = topics.id').where('relationships.category_id is null') 
```

或这个：

```
@topics = Topic
    .joins('left join relationships on relationships.topic_id = topics.id join categories on categories.id = relationships.category_id')
    .group('topics.id').having('count(categories.id) = 0') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-20T04:37:05.590

我一直在寻找最简单的答案，我认为是使用`includes`.

`topics = Topic.includes(:relationships).where(relationships: {id: nil})`

另一种更正确的方式，让您认为 SQL 是`LEFT OUTER JOINS`.

```
Topic.joins("LEFT OUTER JOINS relationships ON relationships.topic_id = topics.id")
     .where(relationships: {id: nil}) 
```

# php - PHP计算树中的所有节点

> ID：15587542
> 
> 赞同：-1
> 
> 时间：2013-03-23T13:51:48.963
> 
> 标签：php, class, tree, nodes

我需要创建一个 Node 类，它实际上将是一个节点树，并且在同一个类中我需要创建一个函数来计算树中的所有节点，包括根元素。我能够用两个类（节点类和树类）做一些事情。我需要在一个类（节点）类中完成所有操作。

就像是：

```
class myclass
{
       //Array of nodes with childs 

        public function count();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:56:01.053

就像是

```
public function count() {
  $childCount = 0;
  foreach($this->childs as $c) $childCount+=$c->count();
  return 1 + $childCount;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:56:27.127

您可以使用`mode`count() 函数的参数。

```
public function count() {
    return count(array, COUNT_RECURSIVE);
} 
```

有关计数功能的更多信息，请参见[http://php.net/manual/en/function.count.php](http://php.net/manual/en/function.count.php)。

# ios - 集合视图调整大小问题 iPhone 4 与 iPhone 5

> ID：15587544
> 
> 赞同：0
> 
> 时间：2013-03-23T13:52:21.713
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我在视图中有一个集合控制器。

集合控制器没有覆盖屏幕顶部的 40 像素，因此我可以在那里放置按钮。

在 iphone 4 上它看起来像这样（正确的方式）：蓝色是集合视图，红色是单元格 ![在此处输入图像描述](../Images/baf69166406bb9166bc77dc679ce2926.png)

但是在 iPhone 5 上它看起来像这样，我不确定为什么它不会扩散并覆盖蓝色部分

![在此处输入图像描述](../Images/58f612da2da777fd2b77f8acaded4ed3.png)

用于此的界面构建器如下所示：

收藏视图： ![在此处输入图像描述](../Images/8dc3239cba6c49c2908aa8685d2d87b1.png)

集合视图单元格 ![在此处输入图像描述](../Images/81affecc11cedb44514d9fa1cc401a81.png)

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:57:30.420

您的收藏视图具有固定大小。您是否启用了自动布局？如果是，只需转到 iPhone 5 的视图并调整大小，使其适合 iPhone 5 的**限制**。之后，它应该会自动调整为 iPhone 5 和 iPhone <5

**约束**：如果您达到这些约束，InterfaceBuilder 将执行一些“磁性”行为。

# javascript - 绑定和取消绑定绑定函数到事件

> ID：15587551
> 
> 赞同：1
> 
> 时间：2013-03-23T13:53:24.977
> 
> 标签：javascript, event-handling, dom-events, underscore.js, bind

我在我的应用程序中使用[EventEmitter2](https://github.com/hij1nx/EventEmitter2)作为内部消息总线。现在我需要绑定和取消绑定一些事件处理程序。由于我还希望它们将它们[绑定](http://underscorejs.org/#bind)到给定的上下文，因此我最终得到以下语法：

```
messageBus.on('foo::bar', _.bind(eventHandler, this)); 
```

问题是我需要在稍后的时间点解除绑定，所以我写道：

```
messageBus.off('foo::bar', _.bind(eventHandler, this)); 
```

不幸的是，这不起作用，因为`_.bind`每次都返回包装函数的一个新实例。现在我当然可以运行`_.bind`一次并绑定包装的函数，例如：

```
var fn = _.bind(eventHandler, this);
messageBus.on('foo::bar', fn);
messageBus.off('foo::bar', fn); 
```

这工作得很好，但是如果你有一些事件处理程序，代码很快就会变得比必要的可读性差。

在不需要外部化对函数的调用的情况下如何解决这个问题`bind`？如果您多次调用它并且函数和上下文相同，是否有一个替代函数总是返回相同的包装器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:29:28.700

Underscore.js`bindAll`为这个用例提供了一个方法，来自[文档](http://underscorejs.org/#bindAll)：

> 绑定由 methodNames 指定的对象上的许多方法，以便在调用它们时在该对象的上下文中运行

如果做不到这一点，你可以使用一个闭包，它在调用时总是返回相同的绑定函数，即：

```
function getOrCreateBoundEventHandlerFor(eventType, callback) { 

    // Initialise the handler map if it's not already been created.
    this._boundEventHandlerMap = this._boundEventHandlerMap || {};

    // If no handler was mapped, create a new one.
    if (this._boundEventHandlerMap[eventType] === void 0) {
        this._boundEventHandlerMap[eventType] = _.bind(callback, this);
    }

    return this._boundEventHandlerMap[eventType];
} 
```

# java - 无法使用 gwt 读取 word 和 pdf 文件

> ID：15587553
> 
> 赞同：1
> 
> 时间：2013-03-23T13:53:30.003
> 
> 标签：java, javascript, gwt

我想在 GWT 客户端中阅读 .doc 和 .pdf 文件。我正在使用以下软件包：`org.vectomatic.file`

以下是我的代码：

```
fileUpload.addChangeHandler(new ChangeHandler() {

  @Override
  public void onChange(ChangeEvent event) {
      uploadChecking();

      event.getNativeEvent().getEventTarget();
      FileList fileList = FileList.fromEvent(event.getNativeEvent());
      FileReader reader = FileReader.create();
      File file = fileList.get(0);

      reader.readAsBinaryString(file, progressCallback);
  }
});

ProgressCallback progressCallback= new ProgressCallback() {

        @Override
        public void onError(ProgressEvent e) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onLoad(ProgressEvent e) {
            String result =e.getResult();
    }
} 
```

如果我正在上传 .txt 文件，那么它会从 .txt 文件中提供正确的数据`result`。上传 PDF 和 .doc 时，它会给出一些字符。有什么方法可以获取正确的数据，或者有什么方法可以直接从文件中读取字节，因为我认为它可以克服这个问题。

我想要文件内容客户端，因为它在进入服务器之前需要一些处理。

# objective-c - 使默认属性无法访问？

> ID：15587557
> 
> 赞同：4
> 
> 时间：2013-03-23T13:54:01.427
> 
> 标签：objective-c, cocoa

A`UITableViewCell`默认有一个`textLabel`属性。现在，我`UITableViewCell`对`textLabel`. 为了减少出错的机会，我想让`textLabel`编译器无法使用默认属性（自动完成），并且如果我尝试在类之外访问它，代码将无法编译。

将属性设为只读仍将允许我访问和更改标签的属性，因此这不起作用。

有没有办法做到这一点？

**编辑：**

所以到目前为止我最接近的是在我的子类中重新声明该属性并弃用它：

```
@property (nonatomic) UILabel *textLabel NS_DEPRECATED_IOS(2_0, 3_0); 
```

如果我尝试访问该属性，当前会给我一个警告。但这并没有完全对编译器隐藏它，它还给了我一个警告“可用性与先前的声明不匹配”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T14:16:30.167

好的，想通了。您可以使用`UNAVAILABLE_ATTRIBUTE`宏来完成此操作：

```
@property (nonatomic) UILabel *textLabel UNAVAILABLE_ATTRIBUTE; 
```

然后做`cell.textLabel`给出一个编译错误：`textLabel is unavailable`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T13:57:44.487

它是只读的。您可以访问但不能分配。见头文件。

```
@property(nonatomic,readonly,retain) UILabel *textLabel 
```

//例子

```
@interface myCell : UITableViewCell
{

}

@end

@implementation myCell

-(void)check
{
    //You can access
    UILabel *label = self.textLabel;

    //You canot assign
    self.textLabel = label;
}

@end 
```

# vb.net - 如何将某些 C# 代码转换为 VB.NET

> ID：15587561
> 
> 赞同：0
> 
> 时间：2013-03-23T13:54:11.320
> 
> 标签：vb.net, sql-server-2005, visual-studio-2008

我一直在谷歌搜索并阅读这篇文章

[C# 如何以编程方式获取 SQL Server 安装路径？](https://stackoverflow.com/questions/1165576/c-sharp-how-to-get-sql-server-installation-path-programatically)

这正是我在 VB.NET 中所需要的，但是我不擅长将这段代码翻译成 VB.NET 代码。因此，任何帮助将不胜感激。谢谢你。

注意：我使用的是 SQL Server 2005 和 Visual Basic 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:08:11.580

虽然这个问题最初的标题是关于检索 SQL Server 的安装路径，但我觉得它更多的是关于代码翻译问题（解决方案已经存在，只是语言不正确）。

但是后来我觉得原代码中的方法相当生硬。

Evan 为您提供了我认为是现有解决方案的可行翻译。但可能是执行此特定任务的一种更简单的方法 - 假设您只需要找到您已经连接到的实例的安装路径，并假设可以读取注册表的用户也将具有`VIEW SERVER STATE`权限 - 是发出这个从您的程序中[对 DMV`sys.dm_os_loaded_modules`](http://msdn.microsoft.com/en-us/library/ms179907%28v=sql.90%29.aspx)进行简单查询：

```
SELECT name 
  FROM sys.dm_os_loaded_modules
  WHERE name LIKE '%sqlservr.exe'; 
```

这会给你这样的东西：

> C:\Program Files\Microsoft SQL Server\MSSQL11.SQL2012\MSSQL\Binn\sqlservr.exe

您需要进行一些解析，具体取决于您所追求的内容（例如，您想停在`MSSQL`，还是`Binn`？），但这比阅读注册表或其他恕我直言的方法要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:49:06.027

我只是用了一个代码转换器......只有基本的东西需要改变..

```
Using sqlServerKey As RegistryKey = Registry.LocalMachine.OpenSubKey("SOFTWARE\Microsoft\Microsoft SQL Server")
    For Each subKeyName As String In sqlServerKey.GetSubKeyNames()
        If subKeyName.StartsWith("MSSQL.") Then
            Using instanceKey As RegistryKey = sqlServerKey.OpenSubKey(subKeyName)
                Dim instanceName As String = instanceKey.GetValue("").ToString()

                If instanceName = "MSSQLSERVER" Then
                    'say
                    Dim path__1 As String = instanceKey.OpenSubKey("Setup").GetValue("SQLBinRoot").ToString()
                    path__1 = Path.Combine(path__1, "sqlserver.exe")
                    Return path__1
                End If
            End Using
        End If
    Next
End Using 
```

如果您只是阅读有关 C# 的快速文章，您会注意到字符串的声明方式不同，并且存在细微的语法差异，例如`foreach`vs`for each`

您可以[在此处](http://www.harding.edu/fmccown/vbnet_csharp_comparison.html)阅读一些更常见的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T02:25:25.627

我使用了一个非常好的（***离线***）工具，叫做**[Convert .NET Free](http://www.fishcodelib.com/Convert.htm)**

它来自[www.fishcodelib.com](http://www.fishcodelib.com/)

这是最新版本的直接链接（截至 2014 年 4 月 19 日）**大小：** 2.06MB，**文件**：Zip：

[[直接链接]](http://www.fishcodelib.com/files/ConvertNet2.zip)

希望这有一些用处；）

PS这个软件需要**.NET Framework 4.5**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T00:13:53.850

这几乎永远不会失败！：） 祝你好运

[http://www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

# c - 代码“应该”工作，但程序停止工作

> ID：15587564
> 
> 赞同：0
> 
> 时间：2013-03-23T13:54:16.870
> 
> 标签：c, if-statement

我是一个有几个小时经验的初学者，我正在尝试制作一个非常简单的程序来熟悉 IF 命令。我想出了这段代码：

```
#include<stdio.h>

int main()
{
    char ans;
    char n;
    char y;
    printf("Do you want to exit?\n");
    scanf("%c\n",ans);
    if (ans == y)
    {
        printf("As you wish!\n");
        return 0;
    }
    else (ans == n);
    {
        printf("You'll exit anyways!\n");
        return 0;
    }
} 
```

我认为它应该可以工作，但是在我输入某些内容后，程序会停止工作！提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T13:55:24.477

这

```
if (ans == y) 
```

应该读

```
if (ans == 'y') 
```

前者比较`ans`未初始化变量的值`y`，而后者检查是否`ans`包含字符`'y'`。

也是如此`'n'`。

`y`和变量是不必要的`n`，可以删除。

此外，以下行不正确：

```
else (ans == n); 
```

它应该读

```
else if (ans == 'n') 
```

（我添加了`if`并删除了分号。）

最后，`scanf()`应该是：

```
scanf("%c",&ans); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T13:56:15.267

```
else (ans == n); 
```

这不会给出预期的结果。删除`;`and 条件。 `else`可能只需要一段代码。它不处理条件。如果您需要条件，请使用`else if`：

```
else if (ans == 'n') 
```

更多错误：

```
if (ans == y) 
```

这里的 y 指的是变量，它被声明但没有值。当然，您想引用角色`'y'`：

```
if (ans == 'y') 
```

此外，`scanf`需要一个指针，所以不要`ans`使用`&ans`. 它需要写入值的内存地址。它不在乎价值。您最终将了解指针。（假设您在几个小时的经验中还没有研究过它们）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T13:56:13.277

存在三个主要错误。

*   您应该将*指针*传递给该函数，因此您必须在( )`scanf`之前添加一个 & 符号。`ans``&ans`

*   语句`;`末尾有一个尾随。`else`

*   `y`指的是一个变量（不存在），而您想与`ans`字符*进行* `'y'`比较。

# eclipse - 如何从 spring applicationContext 访问其他项目的资源？

> ID：15587568
> 
> 赞同：0
> 
> 时间：2013-03-23T13:55:06.977
> 
> 标签：eclipse, spring, jsf, maven

我有一个名为 fc-jsf 的项目。这个项目的spring context引用了fc-bus项目中另一个名为Beans.xml的spring context。我有 fc-bus 作为 fc-jsf 的项目依赖项。

我像这样导入 Beans.xml：

```
<import resource="classpath*:com/fc/spring/Beans.xml" /> 
```

它可以工作，但它说 fc-jsf 项目看不到 Beans.xml 中声明的属性：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>com/fc/properties/database.properties</value>
        </property>
    </bean> 
```

例外是：

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanInitializationException: Could not load properties; nested exception is java.io.FileNotFoundException: Could not open ServletContext resource [/com/fc/properties/database.properties] 
```

如何在不将属性文件复制到 fc-jsf 项目的情况下访问 database.properties？

编辑：这些是 maven 项目，database.properties 在 fc-bus -> src/main/resurces/com/fc 文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:00:37.620

尝试使用类似的属性

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location">
        <value>classpath:com/fc/properties/database.properties</value>
    </property>
</bean> 
```

否则它不知道应该从哪个包中使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:01:23.487

尝试 `<value>classpath*:database.properties</value>`

# javascript - 用于将 Python / Boo / Ruby 之类的语法编译为 C / C++ / LLVM / Javascript 的工具（使用 JS ArrayBuffer 提高速度）

> ID：15587572
> 
> 赞同：7
> 
> 时间：2013-03-23T13:55:31.637
> 
> 标签：javascript, python, firefox, llvm, pypy

我正在尝试将使用 Pythonic 语义编写的代码自动编译/转换为本机和快速的 Javascript 代码。

什么工具可以做到这一点，并且可以像 Java 等那样提供良好的调试支持？

有人做过吗？

**为什么？**

我正在尝试编写一些具有复杂主循环、时间线、一些物理模拟和一些复杂交互的可视化代码。IE：这是一个实际的 CPU 绑定问题。

使用 Javascript 编写并在其浏览器环境中进行测试比在像样的 IDE 中运行的 Java、.NET 或 Python 更难调试。但是对于使用复杂的客户端代码进行实际的大规模Web开发，如果不是直接编写的话，至少需要编译成Javascript。

**背景：最新进展**

Emscripten 允许将 C/C++ 编译为 Javascript，由于 ArrayBuffer 的类型化数组支持和新的浏览器 JS 引擎，它可以在浏览器中以更高的效率运行，因为[ASM.js](http://asmjs.org/)和[***LLJS***](http://jlongster.com/Compiling-LLJS-to-asm.js,-Now-Available-)利用了 Mozilla 最近的速度改进（其他供应商可能很快就会跟随）。

[***Altjs.org***](http://Altjs.org)有一份 Javascript 替代方案的清单，但还没有特别关注最近的速度改进或良好的语义，但人们使用更好的工具为浏览器编写代码已成为普遍的地方。特别是 Emscripten 有[*大量令人惊叹的演示*](https://github.com/kripken/emscripten/wiki)。

**已经考虑的可能选项：**

*   Shedskin - 目前我已经尝试让 Shedskin 工作，但我的 C++/C 技能有限（Emscripten 只为它使用的受 Boehm 启发的垃圾收集器公开了一个 C API，而 Shedskin 需要一个 C++ 垃圾收集类来处理它的对象，但它不存在然而）。
*   Unladen Swallow / RPython，到 LLVM - 还不能在 Ubuntu 上正确设置
*   Boo 到 Java，然后到 LLVM（还不能在我的 Ubuntu 系统上设置）

**附加约束：**

*   我需要在我的 Ubuntu 系统上使用它。
*   编译后的 Javascript 应该可能小于 1 MB
*   使用同样交叉编译的本机语言进行调试应该仍然是可能的，允许利用现有的调试工具。

*“这个构建指令表的过程应该非常有趣。它没有成为苦力的真正危险，因为任何非常机械的过程都可能交给机器本身。”* ——艾伦·M·图灵，1946

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:36:45.817

您想要一种可以编译为高效低级 JavaScript 的高级动态语言吗？哪有这回事。如果动态语言速度很快，我们一开始就不需要 asm.js。

如果您想编写可编译为高效 JavaScript 的代码，则必须学习较低级别的语言。Emscripten 速度快的原因是它从低级语言 (C/C++) 编译，与常规 JavaScript 相比，它允许更好的编译器优化。这也是为什么 asm.js 和 LLVM 可以更快的原因。它们的速度来自没有动态类型、垃圾收集（特别是这使得使用 ArrayBuffer 作为内存成为可能）和其他高级特性。

底线是。不存在将具有 Pythonic 语义的语言编译成本机和快速 Javascript 代码的工具。并且根据您所说的语义，这种事情不太可能出现，因为 Python 本身就是一种慢速语言。

目前生成快速 JavaScript 的最佳选择是 Emscripten。您也可以考虑使用 LLJS 或手动编写快速的 JavaScript（Chrome 有这方面的调试工具）。

此外，考虑到您的问题的标题，您非常关心语法。你不应该。在为工作选择正确的语言时，语法是最不重要的因素之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T21:35:03.797

既然你自己提到[了 shedskin](http://code.google.com/p/shedskin/)，我想你可以分享一些你的经验（并解释你认为 shedskin 到底缺少什么，除了它的输入是受限制的 python 语法）。我还可以假设 Cython/Pyrex 是不可接受的（由于语法限制）。

如果 shedskin 在 alpha 阶段对你来说太多了，那么你可能正在寻找像[Numba](https://github.com/numba)项目这样的东西，它包括将动态 python 编译到 LLVM 以及 llvm-py，它允许链接 LLVM 暴露的字节码，类似于 ctypes 允许链接共享库并构建 LLVM IR 编译器。

这是[博客](http://jakevdp.github.io/blog/2012/08/24/numba-vs-cython/)的一部分，其中展示了如何将 Numba 用作 numpy 的 JIT（包括与等效 Cython 代码的性能比较）：

```
import numpy as np
from numba import double
from numba.decorators import jit

@jit(arg_types=[double[:,:], double[:,:]])
def pairwise_numba(X, D):
    M = X.shape[0]
    N = X.shape[1]
    for i in range(M):
        for j in range(M):
            d = 0.0
            for k in range(N):
                tmp = X[i, k] - X[j, k]
                d += tmp * tmp
            D[i, j] = np.sqrt(d) 
```

Emscripten 应该允许您公开和调用您的 python -> llvm -> JS 代码，如下所述：[https ://github.com/kripken/emscripten/wiki/Interacting-with-code](https://github.com/kripken/emscripten/wiki/Interacting-with-code)

# php - 2195端口打开但无法访问APNS服务器

> ID：15587579
> 
> 赞同：4
> 
> 时间：2013-03-23T13:55:59.803
> 
> 标签：php, ssl, ssl-certificate, apple-push-notifications, apns-php

问题：我无法访问 APNS 服务器。我收到 110 连接超时错误。

我的情况：

1.  我已经联系了我的主人（hostmonster）。他们说我的 2195,2196 端口已经开放。
2.  我的证书和密码没有问题，因为我已经在本地 Mac 上对其进行了测试。
3.  我用一个很简单的PHP来测试。这是我的代码：

    ```
    $ctx = stream_context_create();
    stream_context_set_option($ctx, 'ssl', 'local_cert', 'apn.pem');
    stream_context_set_option($ctx, 'ssl', 'passphrase', 'aaa');
    $fp = stream_socket_client("ssl://gateway.sandbox.push.apple.com:2195", $err,     
          $errstr,60,STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT,$ctx);

    if ($fp)
        echo ('aa');
    else
        echo ($err.$errstr); 
    ```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-23T12:40:44.663

I had the same exact problem, but with Bluehost. In my case, it turned out the Bluehost firewall was not properly open. The first line chat support from Bluehost said the ports 2195 & 2196 are open, and the problem was not with them. To demonstrate the problem was on their side, I asked them to run the following telnet command from the Bluehost server:

```
telnet gateway.push.apple.com 2195

Trying 17.149.36.246...
Trying 17.149.35.166...
Trying 17.149.35.170...
Trying 17.149.35.177...
... Connection timed out 
```

The output should be:

```
telnet gateway.push.apple.com 2195

Trying 17.149.36.230...
Connected to gateway.push.apple.com.
Escape character is '^]'. 
```

Then i submitted a support ticket to Bluehost with this information. They resolved the issue in 6 hours by properly opening the firewall.

# html - 防止“美化”标签转换为空格

> ID：15587580
> 
> 赞同：0
> 
> 时间：2013-03-23T13:55:59.493
> 
> 标签：html, css, formatting

因此，我们最近将浏览器支持政策更改为 Windows 7 上的 IE 8 / 9、Firefox、Chrome 和 Safari，所有这些都`box-sizing: border-box;`以某种形式提供支持（例如，有些需要前缀`-moz-`）。这使我们能够创建一个宽度为 45em 的表单，使用宽度为 21em 且边距为 1em 的标签（在标签和关联的输入/选择之间创建一点空间），然后将选择/文本输入设置为 23em。Textareas 是 45em，我们使用带有 text-align right 的 div 来右对齐按钮。表单*完美*排列，无需特定于浏览器的调整！

然而，当我昨晚开始一个新项目时，我遇到了一个问题。我使用了这种技术，但无法让它发挥作用。输入都下降到下一行。我终于弄清楚问题的根源是什么，但找不到（我喜欢的）方法来解决它。这是我正在使用的标记：

```
<div class="input-pair">
    <label for="mainBackgroundColor">Background Colour</label>
    <input type="text" id="mainBackgroundColor" name="mainBackgroundColor" class="text color">
</div> 
```

事实证明，我用来使其更易于阅读的回车和制表符正在被转换为空格。所以标签和输入的实际总宽度是21em + 1em + 23em + 一个空格，也就是45em + 一个空格，但是容器只有45em。我在 CSS 中尝试了不同的空白值，但没有运气。我真的不想将标签和输入放在代码中的同一行 - 它看起来很可怕而且不那么容易阅读。有谁知道如何阻止这条新行和选项卡被空格替换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T13:59:17.893

这是一篇很好的文章：[与内联块元素之间的空间战斗](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)。

# python - 数千个网络的两个列表之间的交叉点

> ID：15587587
> 
> 赞同：0
> 
> 时间：2013-03-23T13:56:43.573
> 
> 标签：python, networking, apache-pig

我有一个巨大的网络列表（称为 A），我需要检查这些网络的地址是否存在于另一个网络列表（称为 B）中：

两个列表的格式如下：

清单 A

```
1.2.3.4
145.2.3.0/24
6.5.0.0/16
3.4.1.0/24 
```

清单 B

```
1.5.6.7
10.0.3.0/24
1.2.3.0/24
3.4.0.0/16 
```

两个列表 A ∩ B 相交的预期结果：等

```
1.2.3.4
3.4.1.0/24 
```

我的第一次测试很天真：

*   [使用ipaddr](https://code.google.com/p/ipaddr-py/source/browse/#git/branches/3144)模块列出所有 ip
*   将每个列表的 IP 分成[两组](http://docs.python.org/2/library/collections.html#collections.Set)
*   对两个集合的[交集](http://docs.python.org/2/library/sets.html)做。

此方法适用于小列表。但是，此解决方案不适用于数千个网络（即数百万个 IP 地址），因为我[没有足够的内存](http://docs.python.org/2/library/exceptions.html#exceptions.MemoryError)。此外，该解决方案不适用于**IPv6**网络。

**将两个列表相交的最有效方法是什么？**

另外：我还必须在列表 A 和其他列表之间重复此操作为 B：A ∩ C、A ∩ D 等。

我愿意接受所有建议，即使是[猪](http://pig.apache.org/index.html):-)

**解决方案 ：**

```
def chunks(l, n):
  for i in xrange(0, len(l), n):
    yield l[i:i+n]

res = []
for chunk_a in chunks(A, 1000):
  for chunk_b in chunks(B, 1000):
      C = IPSet(chunk_a) & IPSet(chunk_b)
      if C > IPSet([]):
          res.append(C) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:36:54.333

这是基于`netaddr`实现 IP 地址/网络集的包的一种可能性。

首先，考虑如果 A = A1 ∪ A2 且 B = B1 ∪ B2，则 A ∩ B = (A1 ∩ B1) ∪ (A1 ∩ B2) ∪ (A2 ∩ B1) ∪ (A2 ∩ B2)。

所以你把你的列表分解成小的集合，并使用上面的方法来逐步计算交集。例如：

```
from netaddr import IPSet

A1 = IPSet(['1.2.3.4','145.2.3.0/24'])
A2 = IPSet(['6.5.0.0/16','3.4.1.0/24'])
B1 = IPSet(['1.5.6.7','10.0.3.0/24'])
B2 = IPSet(['1.2.3.0/24','3.4.0.0/16'])

A1B1 = A1 & B1
A1B2 = A1 & B2
A2B1 = A2 & B1
A2B2 = A2 & B2

A1B1 | A1B2 | A2B1 | A2B2
-> IPSet(['1.2.3.4/32', '3.4.1.0/24']) 
```

但是考虑到，在使用 IPSet 时，您不需要列出所有地址，您可以执行交叉操作，而无需将列表分解为小集合。

* * *

更新：在具有 4GB 内存的笔记本电脑上，两个 5,000 个随机定义的网络列表（长度 8 到 24 位）的交集只需要几秒钟：

制作两个 IP 地址列表：

```
import random

f = open('iplist1.txt','w')
for i in range(5000):
    ip = '.'.join([str(random.randint(1,254)) for i in range(4)])
    ip += '/'+str(random.randint(8,24))
    f.write(ip+'\n')
f.close()

f = open('iplist2.txt','w')
for i in range(5000):
    ip = '.'.join([str(random.randint(1,254)) for i in range(4)])
    ip += '/'+str(random.randint(8,24))
    f.write(ip+'\n')
f.close() 
```

将它们相交：

```
import time
import netaddr

ipset1 = netaddr.IPSet(open('iplist1.txt','r').readlines())
ipset2 = netaddr.IPSet(open('iplist2.txt','r').readlines())

print "Set 1:", len(ipset1), "IP addresses"
print "Set 2:", len(ipset2), "IP addresses"

start = time.time()
ipset = ipset1 & ipset2
print "Elapsed:", time.time() - start
print "Intersection:",len(ipset),"IP addresses" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T04:35:49.947

好吧，如果您对 Pig 持开放态度，那么没有什么比这更容易了。它不会出现内存不足的问题，并且交叉点很简单`JOIN`：

```
A = LOAD '/path/to/A' AS (ip:chararray);
B = LOAD '/path/to/B' AS (ip:chararray);

intersection = FOREACH (JOIN A BY ip, B BY ip) GENERATE A::ip;
STORE intersection INTO '/path/to/output'; 
```

完毕。

# asp.net - 我可以将 NetBeans 与 asp.net 一起用作编辑器吗？

> ID：15587591
> 
> 赞同：6
> 
> 时间：2013-03-23T13:56:51.433
> 
> 标签：asp.net, netbeans

我想用 asp.net (C#.net) 设计一个网站，我的管理面板需要一个编辑器来添加图片等文件，所以我必须使用 ckeditor、tinyMce 或任何其他建议。

然而，我的一位朋友告诉我，我不应该在您的站点中使用编辑器，而是使用 NetBeans（带有 asp.net 插件）。
是否可以？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T13:01:43.400

据我所知，没有；目前不支持。

我做了一些研究（谷歌），但找不到任何插件。如果这是可能的，将会有一个 Netbeans 插件。

[看看这个链接](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://forums.netbeans.org/ptopic4393.html&ei=s5tRUaP0Bcam0wXbi4CYCw&usg=AFQjCNFUV1Z9XBUJHkUGGB8OGJaTDE28Ww&bvm=bv.44158598,d.d2k)

您可能想问您的朋友为什么他建议使用 Netbeans。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-13T10:04:23.137

我仍在为 NetBeans 开发插件 .NET Core：[https](https://github.com/Chris2011/DotNetCore-for-NetBeans) ://github.com/Chris2011/DotNetCore-for-NetBeans 。还有很长的路要走，但我正在努力。

干杯

克里斯

# http - 寻找用于 HTTP 负载共享的消息总线

> ID：15587592
> 
> 赞同：6
> 
> 时间：2013-03-23T13:57:00.910
> 
> 标签：http, load-balancing, middleware

我有一个 HTTP 应用程序，其中包含运行良好的独立工作者。问题是有时他们需要清除和重建缓存，因此他们停止响应长达 30 秒。

我研究了许多负载均衡器，但似乎都没有解决这个问题。我已经尝试过 Perlbal 和一些 Apache 模块（如 fcgid），它们很乐意向忙于重建缓存的工作人员发送请求。

所以我的看法是这样的：难道没有某种消息总线解决方案，所有的http请求都排队，让工作人员在他们有能力的时候处理消息吗？

或者 - 或者 - 一个负载均衡器，它可以考虑到工作人员有时无法响应。

**稍后添加：**我知道一种策略可能是工作人员可以在忙碌时使用管理协议来通知负载均衡器，但是该解决方案似乎很笨拙，我担心会出现一些导致虚假错误的边缘情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T01:39:55.707

如果您使用 Amazon Web Services 负载均衡器，您可以获得您想要的结果。您可以在 Elastic Load Balancer (ELB) 后面的 EC2 实例执行此缓存清除和重建时将其标记为运行状况不佳。

我要做的是为每个实例创建一个额外的端点，例如调用`rebuild_cache`。因此，如果您的 ELB 后面有 5 个实例，您可以编写一个脚本来命中每个单独的实例（而不是通过负载均衡器）`rebuild_cache`端点上的每个单独的实例（而不是通过负载均衡器）。这个端点会做 3 件事：

1.  将实例标记为不正常。负载均衡器将在健康检查失败后意识到它不健康（健康检查的时间和阈值可从 AWS Web 控制台配置）。
2.  运行缓存清除并重建
3.  将实例标记为健康。负载均衡器将对实例运行运行状况检查，并且只有在达到所需数量的运行状况检查后才开始向其发送流量（同样，此阈值通过 ELB 运行状况配置定义）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T21:34:19.977

我在这里看到了两种策略：在一段时间内让一个工人离线，所以平衡器会放弃它；逆向控制 - 工作人员从平衡器中提取任务，而不是平衡器将任务推送给工作人员。第二种策略很容易使用消息队列。

# ruby-on-rails - 由于错误无法创建 Rails 应用程序

> ID：15587594
> 
> 赞同：0
> 
> 时间：2013-03-23T13:57:06.607
> 
> 标签：ruby-on-rails, ruby, ruby-2.0

这是我正在做和得到的

```
rails new ffffff
/usr/lib/ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find railties (>= 0) amongst [activemodel-4.0.0.beta1, activesupport-4.0.0.beta1, atomic-1.0.1, backports-3.1.1, bcrypt-ruby-3.0.1, bson-1.8.3, bson_ext-1.8.3, builder-3.1.4, bundler-1.3.1, chunky_png-1.2.7, coderay-1.0.9, compass-0.12.2, daemons-1.1.9, eventmachine-1.0.3, exceptional-2.0.33, fssm-0.2.10, haml-4.0.0, i18n-0.6.4, jsmin-1.0.1, mail-2.5.3, method_source-0.8.1, mime-types-1.21, minitest-4.6.2, moped-1.4.3, multi_json-1.6.1, nokogiri-1.5.6, origin-1.0.11, polyglot-0.3.3, pony-1.4, pry-0.9.12, pry-nav-0.2.3, rack-1.5.2, rack-mount-0.8.3, rack-protection-1.5.0, rack-test-0.6.2, rack-timeout-0.0.3, rake-10.0.3, rubygems-bundler-1.1.1, rvm-1.11.3.6, sass-3.2.7, shotgun-0.9, sinatra-1.3.5, sinatra-assetpack-0.1.7, sinatra-contrib-1.3.2, sinatra-flash-0.3.0, sinatra-support-1.2.2, slop-3.4.4, thin-1.5.0, thread_safe-0.1.0, tilt-1.3.5, time-lord-1.0.1, treetop-1.4.12, tzinfo-0.3.37] (Gem::LoadError)
    from /usr/lib/ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
    from /usr/lib/ruby/1.9.1/rubygems.rb:1231:in `gem'
    from /usr/local/bin/rails:22:in `<main>' 
```

我只安装了 ruby​​ 2.0

```
rvm list

rvm rubies

=* ruby-2.0.0-p0 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:00:25.580

好像你没有安装railties：

```
gem install railties 
```

# emacs - ediff merge 可以同时显示祖先、A、B 和合并缓冲区吗？

> ID：15587595
> 
> 赞同：21
> 
> 时间：2013-03-23T13:57:10.313
> 
> 标签：emacs, merge, diff, kdiff3, emacs-ediff

我是一个铁杆`emacs`用户，但到目前为止一直用于[`kdiff3`](http://kdiff3.sourceforge.net/)与祖先的 3 路合并，例如在执行`git merge`或`rebase`. 我真的很喜欢这种方式，`kdiff3`它不仅可以同时显示正在合并的所有四个版本的文本：

*   共同祖先（缓冲区*A*中`kdiff3`）
*   “我们的”又名“本地”（缓冲区*B* in `kdiff3`）
*   “他们的”又名“远程”（缓冲区*C* in `kdiff3`）
*   合并结果或目标

而且还通过颜色突出显示*A*、*B*和*C*之间的差异。然而，与合并缓冲区的文本编辑`kdiff3`相比，`emacs`这并不令人惊讶，因为`kdiff3`它不是一个成熟的文本编辑器。它也没有与优秀的[`magit`](http://philjackson.github.com/magit/)包装一起开箱即用。所以我试图[`ediff`](http://www.gnu.org/software/emacs/manual/ediff.html)在解决这个*特定*场景中的冲突时切换到使用（多年来我已经成功地`ediff`用于*其他*用例）。

然而，尽管阅读了[`ediff`手册](http://www.gnu.org/software/emacs/manual/ediff.html)和[EmacsWiki 页面](http://emacswiki.org/emacs/EdiffMode)，并在`#emacs`IRC 上询问，我还是找不到同时显示所有 4 个缓冲区的方法。默认情况下它显示：

*   “我们的”又名“本地”（标记为缓冲区*A*）
*   “他们的”又名“远程”（标记为缓冲区*B*）
*   合并结果或目标（标记为缓冲区*C*）

按`/`切换显示合并结果缓冲区 ( *C* ) 的窗口，使其显示祖先缓冲区，但您无法同时看到祖先和合并结果。（此外，祖先缓冲区中的差异以单一颜色突出显示，这并不能清楚地显示哪些位与其他两个可见缓冲区（*A*和*B*）不同，尽管根据[这个线程](http://gnu.emacs.help.narkive.com/djAhFzov/ediff-merge-ancestor-refinement)，不幸的是，祖先差异细化似乎没有'尚未实施。）

有没有一种简单的方法可以配置`ediff`为同时显示所有 4 个缓冲区？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-03-14T07:46:52.840

这已添加到主干版本中。现在默认情况下，3 路合并显示四个缓冲区，即“本地”（缓冲区 A）、“远程”（缓冲区 B）、合并结果（缓冲区 C）和祖先。您可以更改此默认值，自定义新选项“ediff-show-ancestor”。

键“/”现在绑定到新命令“ediff-toggle-show-ancestor”：它切换是显示 3（本地、远程和结果）还是 4（本地、远程、结果、祖先）缓冲区。

这些更改将在 Emacs 26.1 版本中可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T17:26:38.653

不，没有简单的方法来配置它来做到这一点。有选项`ediff-window-setup-function`，您可以将其自定义为您想要的任何功能。您可以查看默认设置，`ediff-setup-windows-plain`并`ediff-setup-windows-multi`了解您需要做什么。事实上，最简单的方法是将其中一个复制到您的 emacs 配置中并修改它（当然要更改名称）；他们不是微不足道的。

# java - 使用 String _id 从 JDO/DataNucleus 和 MongoDB 获取 DB 对象

> ID：15587598
> 
> 赞同：0
> 
> 时间：2013-03-23T13:57:32.577
> 
> 标签：java, mongodb, jdo, datanucleus

我正在使用 JDO 和 DataNucleus 将运行时生成的对象持久保存到 MongoDB 中。数据库对象有自己的唯一标识符，一个字符串，我将它放入 Mongo 的 _id 字段中。这很好用，我最终得到了这个对象：

```
(in the mongo shell)
> db.CollectionName.find({"_id":"01e293bc-970d-e0b3-aac1-14109fdb7235_ZMUkU234ufY3opYPeov38T4EilNLURIb8ki"}).pretty()
{
    "_id" : "01e293bc-970d-e0b3-aac1-14109fdb7235_ZMUkU234ufY3opYPeov38T4EilNLURIb8ki",
... 
```

当我想从 Mongo 中取回一个对象时，我会拨打我认为应该有效的电话：

```
PersistenceManager pm = pmf.getPersistenceManager();
String keyString = "01e293bc-970d-e0b3-aac1-14109fdb7235_ZMUkU234ufY3opYPeov38T4EilNLURIb8ki";
Object dbObject = pm.getObjectById(keyString); 
```

但是我没有得到一个 dbObject，而是 JDO 抛出了一个 JDONotFoundException。我想也许我需要指定 DB 对象的类，这很困难，因为它是运行时生成的，但是我添加了一个 hack，它在我持久化时保存了指向该类的指针，以便以后可以使用它：

```
this.savedDBclass = obj.getClass();
pm.makePersistent(obj);
...
PersistenceManager pm = pmf.getPersistenceManager();
String keyString = "01e293bc-970d-e0b3-aac1-14109fdb7235_ZMUkU234ufY3opYPeov38T4EilNLURIb8ki";
Object dbObject = pm.getObjectById(this.savedDBclass, keyString); 
```

在这种情况下，我得到一个 JDOFatalUserException “没有为类注册元数据”。

当我查看[文档](http://www.datanucleus.org/products/datanucleus/jdo/pm.html)时，似乎此过程应该很简单：“然后您可以返回数据层并按如下方式检索对象：Object obj = pm.getObjectById(id);”

我认为我的问题是我使用的是字符串而不是 ObjectId，但我无法弄清楚使字符串 ID 起作用的巫术。我在文档中读到“DataNucleus 扩展是将身份的字符串形式传递给上述方法”，但据我所知，我们没有使用该扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:38:42.097

建议您阅读 JDO 规范，该规范非常清楚什么是“身份”（不是字符串），以及什么是 PK 值。您不发布课程本身，因此人们只能猜测。要获得“身份”，您可以轻松做到

```
Object identity = pm.newObjectIdInstance(MyObject.class, "my_pk_value_when_string"); 
```

这就是`pm.getObjectById(id)`. 然后，如果有问题，请查看日志。

# bash - MATLAB Bash 脚本

> ID：15587602
> 
> 赞同：2
> 
> 时间：2013-03-23T13:58:07.567
> 
> 标签：bash, matlab, shell, redirect, command-line

假设我有这个 MATLAB 函数

```
function a = testfun(filename)
% do something with file contents and create some variable a
disp(a); 
```

我想要一个在 Cygwin 上运行的 shell 脚本，如下所示：

```
./testscript.sh < inputforfunction.txt > outputoffunction.txt 
```

输入文件将包含我需要的数据。运行此命令后，输出文件将包含运行 testfun(filename) 的结果。

到目前为止，我可以将输出写入文件 outputoffunction.txt。

**问题是我想读取文件名“inputforfunction.txt”。**

我可以读取**文件内容**但不能读取**文件名**，请问有什么提示吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T06:42:04.647

```
read file_name
./testscript.sh < $file_name > outputoffunction.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:07:00.017

为什么不将文件作为**参数**传递给 bash 脚本？

```
./testscript.sh inputforfunction.txt > outputoffunction.txt 
```

在您可以访问的脚本中`$1`- 它将评估为`'inputforfunction.txt'`.

# extjs - 如何在其中自动高度视口子面板？

> ID：15587606
> 
> 赞同：3
> 
> 时间：2013-03-23T13:58:43.370
> 
> 标签：extjs, extjs4, extjs4.1, border-layout, extjs4.2

我在 ExtJS4 工作。我被困在我想自动调整边界布局东部区域的高度。实际上，我的要求是根据其中的子元素内容自动增加任何区域的高度。我尝试了很多，但我没有得到解决方案。请给我一些建议。

在我的代码中，我只是在东部地区测试一个包含 5 个面板的简单代码，其中显示了这四个面板。第五个面板不显示，如何使其可见？我只是使用示例代码作为参考。

这是我的视口代码：

```
Ext.define('Am.view.Viewport', {
    extend: 'Ext.container.Viewport',
    layout: 'border',
    id:'viewportId',
    alias:'widget.Viewport',
    autoScroll:true,

       //        closable:true,
               items: [
                       {
                           region:'north',
                                       items:[
                                  {
                                      xtype:'panel',
                                      flex:.2,
                                      title:'north region',
                                      html:'<p>north region'
                                  }

                                  ]//end of items

                       },
                       {
                           region:'west',
                           id:'westId',
                           //margins:'0 5 5 5',
                           flex:.3,
                           //layout:'accordion',
                           items:[
                                              {
                                      title:'This day in a history',
                                      xtype:'Content'
                                  }

                                  ]//end if items
                       },// end of region west
                       {
                           //title:'center',
                           region:'center',
                           id:'centerId',
                           //html:'center region',
                           items:[
                                  ]//End of itmes
                       },// end of region center
                       {
                           region:'east',
                           id:'eastId',
                           //margins:'0 5 0 5',
                           flex:.3,
                           //layout:'accordion',
                           items:[
                                  {
                                      xtype:'panel',
                                      title:'panel1',
                                      html:'hi<br>hello<br>good<br><br><br><br><br>morning<br>nice<br>looking',
                                  },
                                  {
                                      xtype:'panel',
                                      title:'panel2',
                                      html:'hi<br>hello<br>good<br><br><br><br<br>noon<br>nice<br>looking',
                                  },
                                  {
                                      xtype:'panel',
                                      title:'panel3',
                                      html:'hi<br>hello<br>good<br><br><br><br><brafter noon<br>nice<br>looking'
                                  },
                                  {
                                      xtype:'panel',
                                      title:'panel4',
                                      html:'hi<br>hello<br>good<br><br><br><br><br><br><brnigth<br>nice<br>looking'
                                  },
                                  {
                                      xtype:'panel',
                                      title:'panel5',
                                      html:'good bye'
                                  },
                                  ]//end if items
                       },
                       {
                           //title:'South',
                           region:'south',
                           id:'southId',
                           items:[{
                                  xtype:'panel',
                                  title:"footer",
                                  html:'footer '
                           }]
                       },//mainMenu   // used mainMenu when you are using mainMenu variable
                       ]//end if items
});//End of view port 
```

这是我的屏幕截图输出： ![在此处输入图像描述](../Images/201bde7708fbee500ef46d3ba0000112.png)

不显示子组件 panel5。我怎样才能让它可见？如何显示具有此要求的所有面板？我想根据面板内容自动增加东部区域的大小。
请给我一些建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T21:13:19.863

# 让面板根据其内容自动调整大小

您应该将其设置`flex`为 0，并确保其他面板具有`flex`与 0 不同的值。因此，在以下代码中，页脚具有;`flex: 0`中心区域具有`flex: 1`; 因此，页脚将根据其内容调整大小。这是一个[有效的 JsFiddle](http://jsfiddle.net/pmuhH/2/)：

```
Ext.create('Ext.panel.Panel', {
    width: 500,
    height: 300,
    title: 'Border Layout',
    layout: 'border',
    items: [{
        title: 'Footer',
        region:'south',
        xtype: 'panel',
        margins: '5 0 0 5',
        flex: 0, // Notice this.
        id: 'footer',
        layout: {
            type: 'vbox',
            align : 'stretch',
            pack  : 'start',
        },
        items:[{
            title: '1',
            height: 50
        },{
            title: '2',
            height: 50                                   
        }]
    },{
        title: 'Center Region',
        flex: 1, // Notice this.
        region: 'center',
        xtype: 'panel',
        layout: 'fit',
        margins: '5 5 0 0'
    }],
    renderTo: Ext.getBody()
});

Ext.getCmp('footer').add({
    title: '3',
    height: 50                        
}); 
```

# 根据内容滚动固定大小的面板

只需添加`autoScroll: true`容器（区域面板）。

这是一些工作代码，您可以在[此 JsFiddle](http://jsfiddle.net/Izhaki/pmuhH/)上看到这些代码：

```
Ext.create('Ext.panel.Panel', {
    width: 500,
    height: 300,
    title: 'Border Layout',
    layout: 'border',
    items: [{
        title: 'West Region',
        region:'west',
        xtype: 'panel',
        margins: '5 0 0 5',
        width: 200,
        id: 'west-region-container',

        // Notice the next line
        autoScroll: true,
        layout: {
            type: 'vbox',
            align : 'stretch',
            pack  : 'start',
        },
        items:[{
            title: '1',
            height: 100
        },{
            title: '2',
            height: 100            
        },{
            title: '3',
            height: 100                        
        }]
    },{
        title: 'Center Region',
        region: 'center', 
        xtype: 'panel',
        layout: 'fit',
        margins: '5 5 0 0'
    }],
    renderTo: Ext.getBody()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:59:28.547

您正在搜索`flex`配置设置：

```
 items:[{
        title: 'panel1',
        flex: .3
    },{
        title: 'panel2',
        flex: .3
    },{
        title: 'panel3',
        flex: .4
    }] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T19:48:09.527

这有效（至少对于您的第一个问题）：

```
 Ext.define('MyApp.view.ui.MyViewport', {
    extend: 'Ext.container.Viewport',

    layout: {
        type: 'border'
    },

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'container',
                    region: 'center'
                },
                {
                    xtype: 'panel',
                    width: 150,
                    title: 'My Panel',
                    region: 'west'
                },
                {
                    xtype: 'container',
                    width: 150,
                    layout: {
                        align: 'stretch',
                        type: 'vbox'
                    },
                    region: 'east',
                    items: [
                        {
                            xtype: 'panel',
                            title: 'My Panel',
                            flex: 1
                        },
                        {
                            xtype: 'panel',
                            title: 'My Panel',
                            flex: 1
                        },
                        {
                            xtype: 'panel',
                            title: 'My Panel',
                            flex: 1
                        },
                        {
                            xtype: 'panel',
                            title: 'My Panel',
                            flex: 1
                        },
                        {
                            xtype: 'panel',
                            title: 'My Panel',
                            flex: 1
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    height: 50,
                    title: 'My Panel',
                    region: 'north'
                },
                {
                    xtype: 'panel',
                    height: 50,
                    title: 'My Panel',
                    region: 'south'
                }
            ]
        });

        me.callParent(arguments);
    }
}); 
```

![在此处输入图像描述](../Images/759a6a0b088f93395fe56e6306e7a7c3.png)

# java - 区分枚举和字段

> ID：15587607
> 
> 赞同：0
> 
> 时间：2013-03-23T13:58:51.530
> 
> 标签：java, enums

我正在做一个纸牌游戏。我制作了一个卡片类，可以存储卡片的花色和价值。我正在使用枚举来跟踪卡片的花色和价值。当我尝试使用枚举时，我在区分枚举“西装”和字段“西装”时遇到了问题。我应该如何命名 Emum “Suit” 和 Field “Suit” 以使它们的名称不同？

```
public class Card 
    {

        public enum Suit
        {
            SPADES, HEARTS, DIAMONDS, CLUBS;
        }

        public enum Value
        {
              ACE, TWO, THREE, FOUR, FIVE, SIX,
              SEVEN, EIGHT, NINE, TEN, JACK, QUEEN, KING;
        }

        Suit Suit;
        Value Value;

        public Card(Suit suit, Value value)
        {
            Suit = suit
            Value = value
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T13:59:57.540

代替

```
Suit Suit;
Value Value; 
```

采用：

```
Suit suit;
Value value; 
```

Java 区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:02:55.173

**遵循命名约定** [(1)](http://www.oracle.com/technetwork/java/codeconv-138413.html) [(2)](http://java.about.com/od/javasyntax/a/nameconventions.htm)

*   类/枚举名称应为 CamelCase，以大写字母开头。
*   字段/方法名称应为驼峰式，以小写字母开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:01:14.290

您可以根据约定将标识符命名为任何名称，但范围中存在的类型（包/超级等）在这里`Suit`＆`Value`也是类型。例如，您可以将`suit`&`value`作为名称（注意小写）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T14:01:19.553

使用适合枚举，适合领域。

# iphone - 当我们在 iOS 中有没有像素失真的小图像时，如何创建大图像？

> ID：15587608
> 
> 赞同：1
> 
> 时间：2013-03-23T13:58:54.380
> 
> 标签：iphone, ios, objective-c, ipad, retina-display

我正在开发一个完全依赖图像的应用程序。我有像 320*480 这样的图像，现在我想要那些尺寸为 768*1024 的相同图像。我可以通过 UI 设计师获得它并放在我的包中，但我的应用程序是通用应用程序，所以我需要为 iPhone Retina、iPad、iPad Retina 包含相同的图像。如果我使用多个图像，我的 IPA 大小会增加（例如：如果一个 320*480 的图像现在有 200KB，如果我再次添加 768*1024，我的 IPA 的大小将增加到至少 200KB）。

**想法：**我只放置 320*480 图像并计划以编程方式创建 768*1024 图像，这意味着我在我的包中只使用了一组图像。

**完成的工作：**通过查看一些博客，我发现使用下面的代码我们可以创建所需的图像大小。

```
- (UIImage *)scale:(UIImage *)image toSize:(CGSize)size
{
    UIGraphicsBeginImageContext(size);
    [image drawInRect:CGRectMake(0, 0, size.width, size.height)];
    UIImage *scaledImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return scaledImage;
}

UIImage *smallImage=[UIImage imageNamed:@"1.png"];
    UIImage *bigImage=[self scale:smallImage  toSize:CGSizeMake(768, 1024)];
    [UIImageJPEGRepresentation(bigImage,2.0) writeToFile:[[self applicationDocumentsDirectory]stringByAppendingPathComponent:@"upload.png"]  atomically:YES]; 
```

**问题：**上面的代码很酷，可以得到预期的图像大小，但唯一的问题是我在最终图像上出现像素失真。

**问题：** 是否有任何好的或有效的解决方案可以从小图像中获得不同尺寸且不失真的图像，或者我需要从 UI 设计师那里获取所有图像。如果我们有正常的图像，我们可以为视网膜显示创建相同的图像吗？

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T15:37:52.567

不可能从没有失真或像素化的较小图像创建更大的图像。没有办法神奇地填写额外的细节。

现实世界不像电视或电影那样人们放大图像并神奇地获得很多细节。:)

如果您在包含 5 组图像时觉得您的应用太大：

1.  iPhone 3.5" 非视网膜
2.  iPhone 3.5" 视网膜
3.  iPhone 4" 视网膜
4.  iPad 非视网膜
5.  iPad视网膜

那么你有几个选择：

1.  制作两个应用程序。一款用于 iPhone 和 iPod touch，一款用于 iPad。
2.  仅使用一小部分图像来发布您的应用程序。然后当应用程序第一次运行时，应用程序只能下载当前设备所需的图像。
3.  仅包括最大的图像。由于应用程序需要每个图像，它可以创建适当大小的图像版本并使用它。每次转换只需要对每个图像进行一次。缩小图像尺寸比尝试放大图像效果要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:04:27.940

您可以以编程方式调整图像大小，但它们看起来不太好。我不会太担心捆绑包的大小。只需为所有设备放置原始分辨率图像，而无需调整大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T16:26:08.210

如果你愿意，你可以从大图像中裁剪和缩小*，*但如果你放大，就会有质量损失，因为文件不包含所有这些像素的足够信息。我会建议：

1）最简单的方法是制作一堆不同版本的图像。（见 rmaddy 的回答）。

2）如果您真的不想要多张图像，请取最大的一张并向下缩放。由于它们具有不同的纵横比，因此简单地缩放会导致一些失真；你也需要裁剪。

无论哪种方式，您都需要打开图像编辑器并制作更大的图像。

# c - 使用 Bison 解析错误

> ID：15587609
> 
> 赞同：5
> 
> 时间：2013-03-23T13:58:55.693
> 
> 标签：c, parsing, grammar, bison

我正在使用 flex 和 bison 编写自己的脚本语言。我有一个语法，我能够生成一个解析器，它可以在正确的脚本上正常工作。我希望能够为特殊错误情况添加一些有意义的错误消息。例如，我希望能够识别语句块的不匹配括号或缺少的分号等。假设我有这些语句（这里的语法不完整）：

```
...
statements: statement SEMICOLON statements
    | statement SEMICOLON;

statement: ifStatement
    | whileStatement
    ;

ifStatement: IF expression THEN statements END
    | IF expression THEN statements ELSE statements END
    ;

whileStatement:  DO statements WHILE expression END
    ;
... 
```

我希望能够打印诸如“缺少分号”或“缺少然后关键字”等消息。我应该修改我的语法以启用错误处理吗？还是有一些 Bison 功能可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T13:49:38.330

## 更新（2021 年 9 月）

由于版本 3.7 Bison 支持用户定义的错误消息：指定`%define parse.error custom`，并提供一个`yyreport_syntax_error`函数，例如：

```
int
yyreport_syntax_error (const yypcontext_t *ctx)
{
  int res = 0;
  YYLOCATION_PRINT (stderr, *yypcontext_location (ctx));
  fprintf (stderr, ": syntax error");
  // Report the tokens expected at this point.
  {
    enum { TOKENMAX = 10 };
    yysymbol_kind_t expected[TOKENMAX];
    int n = yypcontext_expected_tokens (ctx, expected, TOKENMAX);
    if (n < 0)
      // Forward errors to yyparse.
      res = n;
    else
      for (int i = 0; i < n; ++i)
        fprintf (stderr, "%s %s",
                 i == 0 ? ": expected" : " or", yysymbol_name (expected[i]));
  }
  // Report the unexpected token.
  {
    yysymbol_kind_t lookahead = yypcontext_token (ctx);
    if (lookahead != YYSYMBOL_YYEMPTY)
      fprintf (stderr, " before %s", yysymbol_name (lookahead));
  }
  fprintf (stderr, "\n");
  return res;
} 
```

[在文档的语法错误报告函数 yyreport_syntax_error](https://www.gnu.org/software/bison/manual/bison.html#Syntax-Error-Reporting-Function)部分中了解更多信息。

## 原始答案（2013 年 3 月）

Bison 不是生成自定义错误消息的合适工具，但它的标准错误消息也不错，只要您启用`%error-verbose`. 查看文档：[http](http://www.gnu.org/software/bison/manual/bison.html#Error-Reporting) ://www.gnu.org/software/bison/manual/bison.html#Error-Reporting 。

如果您真的想提供自定义错误消息，请阅读有关 YYERROR 的文档，并为您想要捕获的模式生成规则，并自己引发错误。例如，这里除以 0 被视为语法错误（这是可疑的，但提供了自定义语法错误消息的示例）。

```
 exp:
   NUM           { $$ = $1; }
 | exp '+' exp   { $$ = $1 + $3; }
 | exp '-' exp   { $$ = $1 - $3; }
 | exp '*' exp   { $$ = $1 * $3; }
 | exp '/' exp
     {
       if ($3)
         $$ = $1 / $3;
       else
         {
           $$ = 1;
           fprintf (stderr, "%d.%d-%d.%d: division by zero",
                    @3.first_line, @3.first_column,
                    @3.last_line, @3.last_column);
         }
     } 
```

另请注意，为令牌提供字符串会生成更好的错误消息：

```
%token NUM 
```

会产生`unexpected NUM`，而

```
%token NUM "number" 
```

会产生`unexpected number`.

# linux - mmap 是最有效的进程间通信方法吗？

> ID：15587614
> 
> 赞同：3
> 
> 时间：2013-03-23T13:59:20.927
> 
> 标签：linux

mmap 为进程提供了一种写入和读取内存的方法，在写入/读取时不需要进程切换到内核模式。更少的系统调用意味着更高效。其他用于进程间通信的方法，如管道、套接字，在读/写时通常必须切换到内核模式。所以，正如我所见，mmap 是最有效的进程间通信方法。这样对吗？

# c - 程序在读取输入时循环运行

> ID：15587623
> 
> 赞同：1
> 
> 时间：2013-03-23T14:00:42.550
> 
> 标签：c, input

我在阅读我的输入时遇到问题。我正在接受输入`fgetc(stdin)`。在方程式之前，我得到方程式的数量。我的代码看起来像这样

```
 char c;

    for (int i = 0; i < rows; i++)
    {
        do
        {               
           c=fgetc(stdin);

           if(c!='+' && c!='-' && c!='\n' && !isspace(c) && c!='=' && c!=EOF)
           {
               l++;
               equation[l]=c;
           }

           if(/* other conditions*/) eqToGauss(i,l,s,gaussMatrix,equation,sign);

        } while (c!= '\n');

    } 
```

问题是，在倒数第二条车道的尽头（车道 8，编号 584 之后），它得到 '\n' 之后它不会停止程序，而是像在循环中运行一样。Xcode 调试进入汇编模式，从那一刻起读取的下一个字符是 '\xff'。该算法适用于短/少方程。

此输入在方程式后没有空行。

> > 299 x2 + 529 x3 + 194 x5 + 282 x3 + 364 x5 + 135 x4 + 388 x1 + 492 x2 + 236 x4 + 165 x2 + 557 x1 = 135 x3 + 26 x2 + 566
> > 
> > 482 x2 + 582 x5 = 530 x3 + 417 x1 + 424 x3 + 147 x5 + 81 x4 + 143 x3 + 195 x4 + 8 x2 + 479
> > 
> > 532 x5 + 61 x4 + 318 x4 + 288 x5 + 573 x5 + 162 x4 = 99 x4 + 44 x3 + 190 x1 + 60
> > 
> > 224 x1 + 145 x4 + 29 x4 + 1 x1 + 549 x5 + 186 x5 + 509 x4 + 178 x4 + 321 x1 + 320 x1 = 172 x4 + 537 x5 + 15
> > 
> > 398 x5 + 79 x5 + 357 x2 + 153 x5 + 37 x5 + 301 x1 + 174 x5 + 111 x2 = 170 x4 + 208 x1 + 368 x3 + 14 x4 + 100 x2 + 531 x2 + 578 x3 + 510 x4 + 583 x1 + 281
> > 
> > 301 x5 + 394 x5 + 272 x3 + 514 x5 = 412 x2 + 288 x4 + 182 x5 + 218 x1 + 210
> > 
> > 331 x5 + 333 x4 + 376 x2 + 490 x5 + 275 x5 + 105 x4 + 498 x2 + 152 x3 + 51 x2 = 328 x4 + 135 x5 + 452 x4 + 62 x5 + 533 x1 + 261 x3 + 527 x1 + 124 x5 + 295 x4 + 532 x2 + 4
> > 
> > 388 x2 + 415 x4 + 172 x4 + 403 x5 + 30 x1 = 511 x3 + 231 x5 + 104 x2 + 516 x2 + 380 x2 + 274 x5 + 522 x2 + 584
> > 
> > 554 x1 + 434 x4 + 288 x5 + 98 x2 + 85 x5 + 413 x2 + 40 x1 = 584 x3 + 113 x2 + 262 x5 + 348 x5 + 285 x5 + 328 x4 + 351 x4 + 77 x5 + 149 x5 + 170 x1 + 203

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:05:45.543

您使用 fgetc 读取了 EOF(end-of-file) 字符，并且无法像 exit 语句那样退出循环
，`c != '\n'`但是只要 EOF 在流中， fgetc 就不会使用它并且不会更改变量`c`，从而导致无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:05:57.977

您需要在 fgetc() 上测试 EOF - 0xFF 意味着文件结束，但我在您的代码片段中没有看到任何停止读取 EOF 输入的内容。

```
if( (c = fgetc(stdin)) == EOF )
{
    printf( "end of input\n" );
    exit( 0 );
} 
```

# javascript - 如何使flexslider上的方向导航保持不变？

> ID：15587624
> 
> 赞同：6
> 
> 时间：2013-03-23T14:00:43.143
> 
> 标签：javascript, jquery, plugins, flexslider

我希望小悬停灰色箭头在缩略图导航上悬停时显示块而不是动画。[你可以在这里](http://flexslider.woothemes.com/thumbnail-slider.html)看到演示。我一直在涉水插件的 javascript 并且无法为我的生活找出动画箭头的位置。如果可以的话，我只会注释掉该代码。那么其他人可以吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T15:50:19.243

这让我困惑了一会儿，但事实证明箭头动画实际上不在插件 javascript 中。它在 CSS 中使用`-webkit-transition: all .3s ease;`. 如果您查看默认 CSS 文件并转到第 52 行，则需要从`.flex-direction-nav a`. 所以这条线应该如下所示。

```
.flex-direction-nav a {
   width: 30px; 
   height: 30px; 
   margin: -20px 0 0; 
   display: block; 
   background: url(images/bg_direction_nav.png) no-repeat 0 0; 
   position: absolute; 
   top: 50%;
   z-index: 10; 
   cursor: pointer; 
   text-indent: -9999px; 
   opacity: 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-12T17:14:52.253

我最近遇到了这个问题并通过覆盖以下样式解决了它（在这个问题/答案的帮助下）：

```
.flex-direction-nav a {
    ...
    -webkit-transition: all .3s ease;
    -moz-transition: all .3s ease;
    transition: all .3s ease;
} 
```

在我自己的 CSS 中使用这些样式：

```
.flexslider .flex-direction-nav a.flex-prev,
.flexslider .flex-direction-nav a.flex-next {
    ...
    -moz-transition: none;
    -webkit-transition: none;
    transition: none;
} 
```

我非常喜欢不修改库提供的源代码，所以我认为这是一个更好、更完整的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-22T08:34:40.380

这很简单，只需像这样更改以下css代码：

```
.flexslider .flex-direction-nav .flex-next {
    right: 5px; /* adjust offset to match the hover style */
    opacity: .8; /* adjust opacity to match the hover style */
}

.flexslider .flex-direction-nav .flex-prev {
    left: 5px; /* adjust offset to match the hover style */
    opacity: .8; /* adjust opacity to match the hover style */
}
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T14:53:55.017

制作自己的箭头：禁用`directionNav`和使用`manualControls`.

# dom - DOM：默认情况下 div 是否有文本对象子节点？

> ID：15587627
> 
> 赞同：1
> 
> 时间：2013-03-23T14:00:52.333
> 
> 标签：dom

HTML：

```
<div id="Box" style="height: 100px; width= 100px; background-color: red;">
 <img src="someImg.jpg"></img>
</div> 
```

就是这样。我在 HTML 文件中有一个简单的 div。现在，在我写的 javascript 文件中

```
window.onload = initAll;

function initAll(){
document.getElementById("Box").onclick = childNodes;
}

function childNodes(){

for(var n = 0 ; n < this.childNodes.length; n++){
alert(this.childNodes.item(n));
} 
```

现在，我不应该只看到一个警告框（因为 div 元素只有一个子元素是图像）。相反，我收到了 3 个警报框。第一个和第三个警报“对象文本”和第二个警报“Obkect HTMLImageElement”。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:05:44.367

您的`img`标签周围有空白区域，被标识为文本节点。

# c# - 基于平台或字节序的条件编译器指令？

> ID：15587628
> 
> 赞同：2
> 
> 时间：2013-03-23T14:01:05.557
> 
> 标签：c#, visual-studio-2010, c-preprocessor, endianness

我有一些代码有一天会发现自己被埋在一个大型 C# 应用程序中，长期以来被遗忘和忽视，而我可能早已不在或年迈。不过，这段代码有一个严重的问题。它取决于平台的字节顺序，并且由于代码的性质，我不能简单地将它包含在`if(BitConverter.IsLittleEndian)`. *（它涉及一些 LayoutKind.Explicit 结构和接收外部值的重叠字段 - 重叠字段需要正确定位以实现小/大字节序，否则程序将在读取错误值时慢慢损坏自身）*

我想要的是源代码中的编译器指令，以根据目标平台提供两种结构布局（“任何 CPU”有点问题），或者更有可能只是检测代码是否正在为其他平台编译然后是 x86 或 x64 并发出一个编译器`#error`，以便维护代码的人被定向到该源文件并看到我的注释，指示平台依赖性以及 big-endian 所需的任何更改。

我可以在构建配置中粘贴一个符号，但是没有一个好的方法来记录它为什么存在或以其他方式确保未来的程序员不会放弃它，或者盲目地将它复制到 ARM 或其他设备的新构建配置中大端平台。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:22:27.020

也许这样的事情会起作用？：

```
interface MyStruct { ... }
struct BigEndianStruct : MyStruct { ... }
struct LittleEndianStruct : MyStruct { ... } 
```

在任何地方都使用 MyStruct 而不是特定于字节序的结构。要创建这些结构，您将拥有如下内容：

```
public static MyStruct CreateStruct() { 
  return BitConverter.IsLittleEndian
          ? new LittleEndianStruct()
          : new BigEndianStruct();
} 
```

# jquery - jQuery：将 hashchange 与点击功能相结合

> ID：15587632
> 
> 赞同：1
> 
> 时间：2013-03-23T14:01:16.837
> 
> 标签：jquery, html, css, hashchange

我在让 hashchange 函数按我想要的方式工作时遇到了一些麻烦。我目前有一个 div 的砌体网格，每行（4 个）之后都有一个清除 div，它是隐藏的。单击其中一个 div 会显示最近的清除 div，在其中附加相关内容并重新加载其周围的砌体。
这一切都很好，但是当我想链接到从其他页面显示的这些 div 时，我想将哈希附加到函数中。哈希值被添加到 URL，但如果您加载 URL，它将无法运行该函数并显示相关的 div。
这是一个 jsfiddle：http: [//jsfiddle.net/EV7yg/1/](http://jsfiddle.net/EV7yg/1/)

jQuery：

```
$(document).ready(function () {
$(window).hashchange( function(){

    $(".content-block-footer").click(function () {

        $('.content-block-preview').hide();
        var previewForThis = $(this).parent(".content-block-small").nextAll('.content-preview:first');
        var otherPreviews = $(this).parent(".content-block-small").siblings('.content-preview').not(previewForThis);
        otherPreviews
            .addClass('excluded') // exclude other previews from masonry layout
            .hide();
        previewForThis
            .removeClass('excluded')
            .append($('#content-preview' + $(this).attr('hook')).show())
            .hide()
            .delay(400)
            .fadeIn("slow");
        $('html, body').animate({ scrollTop: $(this).offset().top-95 }, 'slow');
        $('#block-wrap').masonry('reload');
    });
    });
$(window).hashchange();
}); 
```

HTML：

```
<div id="block-wrap">

<div class="content-block-small" style="background-color: white;">
<div class="content-block-footer" hook="01"><a href="#test01">READ MORE</a>
</div>
</div>

<div class="content-block-small" style="background-color: white;">
<div class="content-block-footer" hook="02"><a href="#test02">READ MORE</a>
</div>
</div>

<div class="content-block-small" style="background-color: white;">
<div class="content-block-footer" hook="03"><a href="#test03">READ MORE</a>
</div>
</div>

<div class="content-block-small" style="background-color: white;">
<div class="content-block-footer" hook="04"><a href="#test04">READ MORE</a>
</div>
</div>

<div class="content-preview excluded">
</div>

<div id="content-preview01" class="content-block-preview">
CONTENT GOES HERE
</div>

<div id="content-preview02" class="content-block-preview">
CONTENT GOES HERE
</div>

<div id="content-preview03" class="content-block-preview">
CONTENT GOES HERE
</div>

<div id="content-preview04" class="content-block-preview">
CONTENT GOES HERE
</div>

</div> 
```

是否可以将哈希附加到此类点击功能并从外部页面链接到这些哈希（显示相关内容）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:08:49.997

将 click 事件处理程序放入 hashchange 事件是没有意义的。

看看我的分叉小提琴：

[http://jsfiddle.net/y9X2D/35/](http://jsfiddle.net/y9X2D/35/)

您可以通过以下 url 检查哈希处理：

[http://fiddle.jshell.net/y9X2D/35/show/](http://fiddle.jshell.net/y9X2D/35/show/)

我只是将您的点击事件代码排除在一个单独的函数中。click 事件现在更改触发`hashchange`事件的 url 哈希。然后`hashchange`事件调用`showDetail`.

当然你也可以`showDetail`不改变hash直接调用。

```
$(window).hashchange( function(){
    var hash = location.hash;
   if(hash)
   {
    var element = $('.content-block-footer[hook="'+hash.substring(1)+'"]');
     if(!element) element = $('.content-block-footer').first();
    showDetail(element);
   } else {
    element = $('.content-block-footer').first();
    showDetail(element);
   }
});

$(document).ready(function() {  
    $(window).hashchange();

    $(".content-block-footer").click(function () {
        document.location.hash = $(this).attr('hook');
    });
}); 
```

# c# - 是否可以为整个应用程序启用 ToolTipService.ShowOnDisabled=true

> ID：15587635
> 
> 赞同：11
> 
> 时间：2013-03-23T14:01:35.393
> 
> 标签：c#, wpf, tooltip

有什么方法可以`ToolTipService.ShowOnDisabled = true`为整个应用程序启用，还是我必须手动为我的 WPF 应用程序中的每个控件设置它？

我不认为重新设计每个控件是一个好的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T15:58:45.623

您可以覆盖属性元数据`ToolTipService.ShowOnDisabled`并将其默认值设置为`true (by default value is false)`，它将应用于应用程序中的所有控件。

将此代码放入您的`App.xaml.cs`

```
static App()
{
    ToolTipService.ShowOnDisabledProperty.OverrideMetadata(typeof(Control),
              new FrameworkPropertyMetadata(true)); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T15:50:07.117

您可以使用`VisualTreeHelper`类 ( [msdn](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.aspx) ) 和静态方法`ToolTipService.SetShowOnDisabled`( [msdn](http://msdn.microsoft.com/en-us/library/system.windows.controls.tooltipservice.setshowondisabled.aspx) )。

我创建了简单的类来遍历所有元素并将`ShowOnDisabled`属性设置为`True`.

```
class ToolTipServiceHelper
{       
    public void EnumVisual(Visual myVisual)
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(myVisual); i++)
        {
            Visual childVisual = (Visual)VisualTreeHelper.GetChild(myVisual, i);                
            ToolTipService.SetShowOnDisabled(childVisual, true);
            EnumVisual(childVisual);
        }
    }
} 
```

使用示例：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        ToolTipServiceHelper ttsh = new ToolTipServiceHelper();
        ttsh.EnumVisual(this.Content as Visual);
    }
} 
```

# .htaccess - 使用 / 与 htaccess

> ID：15587636
> 
> 赞同：0
> 
> 时间：2013-03-23T14:01:42.107
> 
> 标签：.htaccess, mod-rewrite

这是我当前的 .htaccess 图像行：

```
RewriteRule ^([a-zA-Z0-9_-]+).(ico|gif|jpg|png)$ /app/app/assets/images/$1.$2 [L] 
```

但现在它不适用于我放入子文件夹（例如文件夹/image.png）的图像，有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:35:26.063

这应该有效：

```
RewriteRule ^(?:.+/)?([a-zA-Z0-9_-]+\.(?:ico|gif|jpg|png))$ /app/app/assets/images/$1 [L] 
```

# php - 如何在应用程序上为每个用户创建新的数据库或数据库实例？

> ID：15587638
> 
> 赞同：0
> 
> 时间：2013-03-23T14:02:07.267
> 
> 标签：php, mysql, cakephp, partitioning, multi-tenant

如您所知，当您拥有像博客这样的应用程序时，用户可以发布文章、画廊、创建静态页面、编辑器编辑它们......

你有这样的表：

*   文章
*   作者
*   编辑
*   画廊
*   静态页面等

如果您想创建一个每个用户都可以创建自己的博客的博客服务怎么办？

当我们再次查看上面的示例时，我们必须在每个表上创建一些额外的表和字段。

一些用户可以订阅我们的服务，并创建他们的博客：

订阅者 博客subscriber_id 作者 blog_id 编辑者 blog_id 画廊 blog_id 静态页面 blog_id

你必须检查每个请求，如果用户有那个博客，是否被授权等等。

如您所见，这使一个简单的博客软件极其复杂。

取而代之的是，是否有任何应用程序或云服务可以在我的软件上使用它的 api，并使用应用程序 sql 以及当我的用户注册并开始使用他们的服务时创建一个全新的干净数据库实例？

我现在非常坚持...任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:23:23.247

我有点困惑。

1.  您想拥有一个博客服务，人们可以在其中注册并获得自己的博客网站吗？
2.  您想将每个新的博客用户放在一个单独的数据库中吗？

除非您计划拥有数十万用户，否则您实际上只需要 1 个数据库即可启动。

我认为您不需要创建额外的表或字段。所有链接到作者的表都应该已经有一个 author_id 字段或一个连接表。

所以..博主在注册的时候会被归为作者。

作者将包含那里的 ID。

所有其他表将通过 id 字段或连接表与该 id 相关。因此，如果您从文章、画廊等中进行选择……您只需这样做

SELECT * FROM 文章 WHERE author_id=1234

# php - 从子文件夹重定向到不同的文件

> ID：15587640
> 
> 赞同：0
> 
> 时间：2013-03-23T14:02:18.423
> 
> 标签：php, .htaccess, url-rewriting, url-redirection

当`http://www.hostname.com/first/api.php?type=link`用户请求`http://www.hostname.com/first/api/getlink`.

所以我尝试了以下

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^www\.hostname\.com\/first$

RewriteBase /

RewriteRule ^api/getlink$ \/api.php?type=link [L] 
```

在一个`.htaccess`文件中并放置在`first/`文件夹中。我无法获得正确的重定向。但我越来越`404 error`。有人可以指导我吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:08:06.393

您可以在目录中的一个 .htaccess 文件中尝试此操作`/first`：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /first
RewriteCond %{REQUEST_URI}   !api\.php               [NC]
RewriteRule  ^api/getlink  /first/api.php?type=link  [NC,L] 
```

对于永久重定向，将 [NC,L] 替换为 [R=301,NC,L]

# jquery - phonegap 单页 jquery 幻灯片功能更改 html 文档？

> ID：15587642
> 
> 赞同：0
> 
> 时间：2013-03-23T14:02:24.740
> 
> 标签：jquery, html, cordova, slide, singlepage

我目前正在开发一个 phonegap 应用程序。当我切换到另一个菜单时，我会这样做：

```
$('#newMenu').show('slide', {direction: 'right'}, 200); 
```

显示的菜单元素是 html 正文顶部的定位绝对元素。我真的很喜欢幻灯片功能，并且想在我更改它们之间的所有菜单时都使用它，但是是否可以使用此功能来更改整个 html 页面？否则我注定要开发单页html应用程序，对吧？？我的意思是，如果我在 newMenu 上想要转到另一个菜单，那么我将不得不再次做同样的事情，在顶部放置另一个绝对元素。这意味着我必须将其全部开发为单页布局，我认为这会变得混乱..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:14:51.917

是的，您可以像这样使用 jquerymobile 的 changePage 功能更改整个 html 页面

$.mobile.changePage("index2.html", { transition: "slide" });

# jquery - 计算类的数量并将其作为数字附加到 div

> ID：15587646
> 
> 赞同：2
> 
> 时间：2013-03-23T14:02:36.877
> 
> 标签：jquery

我有一个带有许多图像的 div。现在每个图像都有一个类，并且许多图像具有相同的类。现在我想遍历每个图像，收集它的类并计算具有特定类的图像数量......

HTML：

```
<div id="articleThumb">
    <ul id="makeThumb">
            <li>
                <img class="merc" src="../img/items/merc_sedan.jpg" />
            </li>
            <li>
                <img class="merc" src="../img/items/merc_sedan2.jpg" />
            </li>
            <li>
                <img class="bmw" src="../img/items/bmw_sedan.jpg" />
            </li>
            <li>
                <img class="bmw" src="../img/items/bmw_hatchback.jpg" />
            </li>
            <li>
                <img class="bmw" src="../img/items/bmw_sedan3.jpg" />
            </li>
            <li>
                <img class="ford" src="../img/items/ford_sedan.jpg" />
            </li>
            <li>
                <img class="ford" src="../img/items/ford_hatchback.jpg" />
            </li>
            <li>
                <img class="ford" src="../img/items/ford_bakkie.jpg" />
            </li>
            <li>
                <img class="ford" src="../img/items/ford_suv.jpg" />
            </li>
            <li>
                <img class="mit" src="../img/items/mit_sedan.jpg" />
            </li>
            <li>
                <img class="merc" src="../img/items/merc_suv.jpg" />
            </li>
            <li>
                <img class="bmw" src="../img/items/bmw_suv.jpg" />
            </li>
            <li>
                <img class="bmw" src="../img/items/bmw_suv2.jpg" />
            </li>
            <li>
                <img class="mit" src="../img/items/mit_suv.jpg" />
            </li>
            <li>
                <img class="mit" src="../img/items/mit_bakkie.jpg" />
            </li>
    </ul>
</div> 
```

现在我知道我可以使用：

```
$('.bmw').length; 
```

计算 .bmw 类的图像数量，但如果你有 300 个类，那效率就不高了。

**我想做的是用jQuery（不是我指定的）确定类并像这样计算它：**

```
 $('#articleThumb ul li img').each(function () {
                var y = $(this).attr('class');
                var allClasses = [y];
            }); 
```

现在计算所有类并将每个类的计数附加到其匹配的显示 div...

```
var countEachClass = allClasses.length;
$(countEachClass).appendTo('#count .' + [y]);

<div id="count">
    <div class="bmw">number calculated by .length</div>
    <div class="merc">number calculated by .length</div>
    <div class="ford">number calculated by .length</div>
    ...etc
</div> 
```

**更新：** 我想用**以下内容**替换#count div以显示数字：

```
 <article class="make">
                    <div class="content">
                       <h4><a class="merc" href="#latestClick">Mercedes-Benz</a></h4>
                       <div class="date">12 March 2013</div>
                       <div class="count">THE  NUMBER HERE</div>
                    </div>
                 </article>
                 <article class="make latest">
                    <div class="content">
                       <h4><a class="bmw" href="#latestClick">BMW</a></h4>
                       <div class="date">12 March 2013</div>
                       <div class="count">THE NUMBER HERE</div>
                    </div>
                 </article> 
```

**答案：http:** [//jsfiddle.net/YNqGR/9/](http://jsfiddle.net/YNqGR/9/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:07:25.853

您可以使用类名作为键、计数器作为值的对象：

```
var map = {};

$('#articleThumb ul li img').each(function () {
    map[this.className] = (map[this.className] || 0) + 1;
}); 
```

现在您可以遍历该对象并使用它做任何您想做的事情。请注意，这仅在每个图像只有一个类时才有效。

附加到另一个元素只是：

```
$('#count').children().text(function() {
    return map[this.className] || 0;
}); 
```

如果元素尚不存在，您还必须创建它们：

```
var $count = $('#count');
$.each(map, function(cls, count) {
    $count.append($('<div />', {'class': cls, text: count}));
}); 
```

* * *

实际上，最后一次更新也让我意识到，如果元素已经存在，你可以这样做：

```
var $images = $('#articleThumb ul li img');
$('#count').children().text(function() {
    return $images.filter('.' + this.className).length;
}); 
```

有很多方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:13:10.213

如果您预先知道这些类是什么，您可以将它们存储在这样的数组中：

```
var types = ['merc', 'bmw', 'mit', 'ford'];

$.each(types, function (i, type) {
    $('div.' + type).html( $('img.' + type).length );
}); 
```

# c# - 如何在 WPF 中移动焦点？

> ID：15587649
> 
> 赞同：3
> 
> 时间：2013-03-23T14:02:41.650
> 
> 标签：c#, wpf, focus

我想知道是否无论如何要从当前控件更改焦点并将其移动到 WPF 中 TabIndex 分配的控件上的其他控件。

示例我有 TabIndex 1 到 5 的控件，有没有办法将焦点从 1 跳到 5 ？

```
<TextBox TabIndex="1" Focusable = "true" LostFocus="test_LostFocus"/>
<TextBox TabIndex="2" Focusable = "true"/>
...
<TextBox TabIndex="5" Focusable = "true" name="LastControl"/> 
```

.

```
private void test_LostFocus(object sender, RoutedEventArgs e)
{
  LastControl.Focus();
} 
```

我试过 了`Keyboard.Focus()`，`FocusManager.SetFocusedElement()`但没有运气。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:29:09.383

如评论中所述，`KeyDown`是一种更好的方法（失去焦点会导致奇怪的行为，例如用户专门单击第二个控件，而焦点转到最后一个控件）...

确保你设置`e.Handled`为真虽然..！

这将起作用：

```
private void TextBox1_KeyDown(object sender, KeyEventArgs e)
{
        if (e.Key == Key.Tab)
        {
            e.Handled = true;
            LastControl.Focus();
        }
 } 
```

文本框的减速应该是这样的：

```
<TextBox TabIndex="1" Focusable = "true" KeyDown="TextBox1_KeyDown"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:27:27.027

只需处理`KeyDown`文本框的事件并在那里设置焦点。由于您正在使用`Tab`，请让控件知道您将通过设置来处理它`e.Handled = true`，这将停止`tab`使用 next 跳转到控件的默认操作`TabIndex`。

```
private void tb_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Tab)
    {
        e.Handled = true;
        LastControl.Focus();
    }
} 
```

# jquery - 动画 div 容器不会停留在同一位置

> ID：15587651
> 
> 赞同：0
> 
> 时间：2013-03-23T14:02:58.253
> 
> 标签：jquery, jquery-animate

我有 div 容器，图像作为喷气机的背景，我想模拟这个元素的喷气飞行，当动画这个元素时，从右到左移动我从左位置移动：600 像素到左位置：-1600 像素，但是这一次没有repit的工作，返回位置左侧600 px，其他时间转到-1600 px

**我把我的代码放在这里：**

```
 $("#header_fly_1").fadeIn(100, function() {

        $(this).animate({
            'left': '-1600'
        }, 8000);
    });

    setInterval(function() {
        $("#header_fly_1").css('right','0').fadeIn(100, function() {
            $(this).animate({
                'left': '-1600'
            }, 8000);
        });
    }, 5000); 
```

我尝试了很多次，但没有得到作为一个动画循环的作品

问候 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:16:12.430

您正在设置左右，检查这是否有效：

```
$(function() {
    $("#header_fly_1").fadeIn(100, function() {
        $(this).animate({
            'right': '50%'
        }, 1500);
    });

    setInterval(function() {
        $("#header_fly_1").css('right','0').hide().fadeIn(100, function() {
            $(this).animate({
                'right': '50%'
            }, 1500);
        });
    }, 2000);
}); 
```

### 演示：[jsFiddle](http://jsfiddle.net/praveenscience/haEJb/2/)

# actionscript-3 - Actionscript：使伪流搜索更快

> ID：15587654
> 
> 赞同：2
> 
> 时间：2013-03-23T14:03:31.193
> 
> 标签：actionscript-3, video-streaming

我试图让寻找 Netstream 更快的设置`NetStream.bufferTime=0.1`，但似乎它忽略了它。

我试图在视频转换过程中找到答案。设置`avconv -g 25`，但这只是有点帮助。

如果我会增加关键帧的数量，那会缩短搜索时间吗？

我想让视频立即开始播放，如何通过 Flash 播放器实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:57:28.050

在您的视频中拥有更多关键帧不会改变搜索性能。它只影响搜索的精度。

寻求性能问题可能是由于您的流媒体服务器。您是否尝试过使用不同的播放器 (vlc) 读取您的流，以检查它是否更多的是播放器问题而不是服务器问题？

**更新 ：**

看看这个 nginx 模块：http: [//nginx.org/en/docs/http/ngx_http_mp4_module.html](http://nginx.org/en/docs/http/ngx_http_mp4_module.html)。即使我从未尝试过，它也应该可以完成这项工作......

# c - 在 bash 脚本中自动引用 .h 文件

> ID：15587660
> 
> 赞同：1
> 
> 时间：2013-03-23T14:04:08.450
> 
> 标签：c, bash, unix

我在 Apache 源代码上运行 concolic 分析工具 crest ( [http://code.google.com/p/crest/ )。](http://code.google.com/p/crest/)该应用程序的用法是：

```
../crestSVN/bin/crestc server/request.c 
```

因此，对于每个存在的 .c 文件，都需要运行此命令。为了加快速度，我继续编写了一个小的 bash 脚本来循环遍历目录中的所有 .c 文件并在其上运行此命令。问题是许多 .c 文件都有它们引用的头文件。如果在目录中找不到头文件，则 crest 命令在尝试分析 .c 文件时会崩溃。

为了解决这个问题，我为包含 .h 文件的各种文件夹编写了一个小语句“export C_INCLUDE PATH=”.....。这工作正常，Crest 能够很好地处理大多数文件。但是，有一些问题。我确定我忘记在我创建的“C_INCLUDE_PATH”语句中包含一些 .h 文件的目录。此外，我相信当不同的“include.h”文件位于不同的目录中时会出现问题。使用上述过程，可能会引用错误的“include.h”文件，从而导致当 crest 尝试在 .c 文件上运行时出现问题。

我的问题是：

*   有没有办法找到正确的 .h 文件并将其链接到我试图以更自动化的方式引用的 .c 文件？
*   你有什么一般性的建议？

这是我使用的 C_INCLUDE_PATH 语句。

```
[root@localhost dan]# export C_INCLUDE_PATH=/home/dan/Downloads/httpd-2.2.14/modules/http:/home/dan/Downloads/httpd-2.2.14/include:/home/dan/Downloads/httpd-2.2.14/srclib/apr/include:/home/dan/Downloads/httpd-2.2.14/srclib/apr-util/include:/home/dan/Downloads/httpd-2.2.14/os/unix/:/home/dan/Downloads/httpd-2.2.14/server/mpm/worker/:/home/dan/Downloads/httpd-2.2.14/mpm/netware/:/home/dan/Downloads/httpd-2.2.14/srclib/pcre/:/home/dan/Downloads/httpd-2.2.14/srclib/apr/include/arch/netware/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T18:46:39.550

这是一种解决方法，它通过耗尽当前目录下的所有可能目录来填充整个导出的变量：

```
C=`find . -name "*.h" -print0 | xargs -0 -If | sed -e 's!\/[^\/]*\.h!:!g;' | uniq`
export C_INCLUDE_PATH=`echo $C | sed 's/: */:/g'` 
```

如果路径名中有空格，它也需要注意

# asp.net - Insert into 语句中的语法错误（Odbc 参数化查询）

> ID：15587665
> 
> 赞同：0
> 
> 时间：2013-03-23T14:04:27.170
> 
> 标签：asp.net, ms-access

```
OdbcConnection conn = new OdbcConnection(@"Dsn=ani;dbq=D:\anita\inventory\chemicals.accdb;defaultdir=D:\anita\inventory;driverid=25;fil=MS Access;maxbuffersize=2048;pagetimeout=5;uid=admin");
String CommandText = "INSERT INTO SupplierDetails (ID, Supplier, Company, Address, State, Country, Pincode, PhoneNo, MobileNo, Email, Fax, RawMaterials, Note) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
conn.Open();
OdbcCommand exe = new OdbcCommand(CommandText, conn);
exe.Parameters.Add("@ID", OdbcType.VarChar, 10).Value = TextBox3.Text;
exe.Parameters.Add("@Supplier", OdbcType.VarChar, 50).Value = TextBox4.Text;
exe.Parameters.Add("@Company", OdbcType.VarChar, 50).Value = TextBox1.Text;
exe.Parameters.Add("@Address", OdbcType.VarChar, 50).Value = TextBox11.Text;
exe.Parameters.Add("@State", OdbcType.VarChar, 20).Value = TextBox2.Text;
exe.Parameters.Add("@Country", OdbcType.VarChar, 20).Value = TextBox5.Text;
exe.Parameters.Add("@Pincode", OdbcType.VarChar, 15).Value = TextBox10.Text;
exe.Parameters.Add("@PhoneNo", OdbcType.VarChar, 15).Value = TextBox6.Text;
exe.Parameters.Add("@MobileNo", OdbcType.VarChar, 15).Value = TextBox7.Text;
exe.Parameters.Add("@Email", OdbcType.VarChar, 15).Value = TextBox8.Text;
exe.Parameters.Add("@Fax", OdbcType.VarChar, 15).Value = TextBox9.Text;
exe.Parameters.Add("@RawMaterials", OdbcType.VarChar, 50).Value = TextBox12.Text;
exe.Parameters.Add("@Note", OdbcType.VarChar, 50).Value = TextBox13.Text;
exe.ExecuteNonQuery(); 
```

# oop - UML：当一个类具有指向另一个类的方法参数指针时

> ID：15587667
> 
> 赞同：8
> 
> 时间：2013-03-23T14:04:53.003
> 
> 标签：oop, uml, class-diagram

当一个类具有指向另一个类的方法参数指针（或引用，或对象）时，在 UML 中它反映为关联或聚合，带有菱形，还是有一些特定的符号？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T08:57:36.003

您需要的不是关联（也不是特定关联的聚合或组合），因为关联指的是 ClassA 的属性，属于 ClassB 类型。

在这里，对于方法参数，您可以在类之间使用依赖箭头（虚线箭头）。这是一个非常普遍的关系，应该符合您的目的。

参见例如这里的解释：[http ://martinfowler.com/bliki/DependencyAndAssociation.html](http://martinfowler.com/bliki/DependencyAndAssociation.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-24T09:27:07.973

正如其他人所解释的那样，您应该使用依赖关系而不是任何形式的关联（聚合和组合）。

依赖意味着源元素的规范或实现需要目标元素。

但是，有许多不同类型的依赖关系。依赖的类型可以通过关键字和原型来指定。在您的情况下，您应该**使用`dependency`with 关键字`<<use>>`**：

![在此处输入图像描述](../Images/71cd17160f43d613328d3a619fee9cec.png)

为了解释`<<use>>`，我引用了[UML 2 and The Unified Process](http://www.amazon.ca/UML-Unified-Process-Practical-Object-Oriented/dp/0321321278)一书第 196 页的部分内容：

*这种依赖（使用）是由以下任何一种情况产生的：*

*1- A 类的操作需要 B 类的参数*

*2- A 类的操作返回 B 类的值*

*3- A 类的操作在其实现的某处使用 B 类的对象，但不作为属性。*

PS：依赖项可以具有的其他关键字/原型是调用、创建、派生、实例化、允许、实现、细化和跟踪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T15:41:37.977

[关联](http://en.wikipedia.org/wiki/Class_diagram#Association)是一个类到另一个类的链接，因此指针/引用描述了一个关联。

[聚合](http://en.wikipedia.org/wiki/Class_diagram#Aggregation)/[组合](http://en.wikipedia.org/wiki/Class_diagram#Composition)描述了关联的类型，因此实际上是它的详细说明（但有些关联类型不是聚合/组合）。

您是否要使用聚合或关联取决于您要在图表中显示的详细信息级别。

鉴于问题描述，连接的类型较弱，因为它不是静态链接，而是瞬态链接。在这种情况下，更合适的是使用[依赖](http://en.wikipedia.org/wiki/Class_diagram#Dependency)关系而不是关联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-22T12:08:53.563

“使用依赖项没有指定客户如何使用供应商，除了供应商被客户的定义或实现使用这一事实。例如，它可能意味着（客户）类中的某些方法使用另一个（供应商）类的对象（例如参数）。”

ref:[在此处输入链接描述](http://www.uml-diagrams.org/dependency.html?context=class-diagrams#usage)

# python - 查找特定字符串

> ID：15587672
> 
> 赞同：0
> 
> 时间：2013-03-23T14:05:42.593
> 
> 标签：python, string, character

我有以下形式的数据

```
str = '"A,B,C,Be,F,Sa,Su"' # where str[1]='M' and str[2]=',' 
```

我想找到`if "mystring" in str:`。其中 mystring 是 M、T、W 或 Th 等等。

但是，我只想要特定的字符串。即`if "S" in str:`输出应该是无。并且`if "B" in str:`应该只是“B”而不是“Be”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:08:04.623

```
>>> text = '"A,B,C,Be,F,Sa,Su"'
>>> 'A' in text.strip('"').split(',')
True
>>> 'S' in text.strip('"').split(',')
False 
```

# c - 从文本文件（fgetc）中存储名称并在数组中使用它们

> ID：15587674
> 
> 赞同：1
> 
> 时间：2013-03-23T14:05:45.070
> 
> 标签：c, scanf

我需要帮助，非常糟糕。我想要一个二维数组（其中第一个维度是单词的位置，第二个维度是单词本身）并且我还有一个临时数组，其中单词是临时存储的，而 fgetc 读取一个文本文档，其中有单词写成行（没有空格），名称的最大长度为 499

这就是我创造的

```
char Temp[500];
char Potential[20][500];
char FileName[100];

printf("Insert the name of the textFile you want to read from: ");
scanf("%s", FileName);

FILE *file = fopen(FileName,"r");
for(int i = 0; fgets(Temp, 500, file) != EOF; i++ ){
    Potential[i] = Temp;
} 
```

我显然做错了什么，但我不知道是什么

---已编辑---完整代码

```
int main(){

    char Temp[500];
    char Potential[20][500];
    char FileName[100];

    printf("Insert textfile Name: ");
    scanf("%s", FileName);

    FILE *file = fopen(FileName,"r");
    if (file == NULL){
        printf("error!!\n");
        return 0;
    }
    int counter;
    char c;
    while (1) {
        if ((c = fgetc(file)) != EOF) {
            Potential[counter][0] = c;
        }
        else { break;}

        fscanf(file, "%s\n", &Potential[counter][1]);
        counter++;
    }
    for(int i = 0; i < 1 ; i++){   //i used this to check if it saved, but it really hasnt 
       printf("%s ", Potential[i][0]);  //came to this
    }

} 
```

- - - 文本文件

```
clarkson
bender
Pony
BB
Sonic
dudewhat 
```

# php - 为什么 file_exists 总是返回 false？

> ID：15587675
> 
> 赞同：0
> 
> 时间：2013-03-23T14:05:45.020
> 
> 标签：php, file-io

使用`file_exists(`) 时，它总是返回 false。但该文件实际存在并且可以使用`require`. 这是我的代码：

```
// Creating dependency lists.
$data_dependency = array("mysql", "oracle", "postgresql", "sqlite", "access");

// Calling the dependecny files.
foreach ($data_dependency as $list) {
    $list = "class.data.$list.php";
    _system::debug("Calling required class $list ...");

    if (file_exists($list)) {
        include($list);
        _system::debug("Calling $list was successfull.");
    } else {
        _system::debug("Calling $list was failed. Now we close the system load.");
        exit("Calling $list was failed. Now we close the system load.");
    }
} 
```

当我加载页面时，页面总是`exit()`. 我认为原因是`file_exists()`函数总是返回false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-17T13:09:33.533

此函数返回`FALSE`由于安全模式限制而无法访问的文件。

使用`$_SERVER['DOCUMENT_ROOT']`文件路径中的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-03T07:14:04.533

尝试使用相对路径`ex : $_SERVER['DOCUMENT_ROOT']`而不是绝对路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:22:01.363

关于**file_exists()** Php.net 指出

对于由于安全模式限制而无法访问的文件，此函数返回 FALSE。但是，如果这些文件位于 safe_mode_include_dir 中，仍然可以包含这些文件。

这可以解释包含有效而存在检查无效的事实。

[http://www.php.net/manual/en/function.file-exists.php](http://www.php.net/manual/en/function.file-exists.php)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-23T14:17:55.887

`$list`在您的 foreach 循环中可能设置不正确。你试过`$list="class.data.".$list.".php";`吗？

# msbuild - MSBuild.exe 复制任务无法正常工作，除非该文件的某个版本已出现在目标中

> ID：15587678
> 
> 赞同：1
> 
> 时间：2013-03-23T14:05:52.993
> 
> 标签：msbuild

我正在使用 MSBuild.exe v4.00。我的项目文件中有一个构建目标，它将名为Parameters.MyEnvironment.xml 的文件复制到Parameters.xml。“MyEnvironment”可能因调用 MSBuild.exe 的时间/位置而异。

这将运行，然后 MSDeployPublish 目标中的其他进程使用 Parameters.xml。

最后，我删除了 Parameters.xml 文件，因为它只是我的环境特定文件之一的副本。

如上所述运行时，MSDeployPublish 目标的行为就像 Parameters.xml 不存在但不报告错误一样。

但是，如果我删除删除任务，以便在我的项目构建完成后保留 Parameters.xml，MSDeployPublish 会看到它并正确使用它。奇怪的是，对 Parameters.MyEnvironment.xml 的任何更改都会立即反映在下一个构建过程中。

总而言之 - 将文件（以前不存在）复制到我的项目文件夹中，后续目标使用该文件夹不起作用。但是，如果我将原始文件留在那里并用新版本的源文件覆盖它，它会反映新内容！

这位作者已经确定了 MSBuild 的锁定/打开文件问题，我在这里发生了同样的事情吗？ [http://dotnet.dzone.com/articles/using-custom-webconfig-0](http://dotnet.dzone.com/articles/using-custom-webconfig-0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:35:35.900

好吧，我还没有弄清楚为什么 MSDeployPublish 目标会绊倒我的 Copy 任务。但是，我有一个我现在可以忍受的凌乱的解决方法。

我已将这些目标添加到我的 wdproj 文件中：

```
<Target Name="BeforeTeamCity">
    <Copy Condition="Exists('$(MSBuildProjectDirectory)\Parameters.$(Configuration).xml')" SourceFiles="$(MSBuildProjectDirectory)\Parameters.$(Configuration).xml" DestinationFiles="$(MSBuildProjectDirectory)\Parameters.xml" />
  </Target>

<Target Name="AfterTeamCity">
  <Delete Files="$(MSBuildProjectDirectory)\Parameters.xml"/>
</Target> 
```

以前我试图使用 BeforeTargets 和 AfterTargets 属性将它们折叠到构建的其余部分，这样我就可以通过一次调用 MSBuild.exe 来完成整个事情，它们会很好地链接在一起。

放弃这个，我现在调用 MSBuild.exe 三次。一次用于 BeforeTeamCity 目标，一次用于 MSDeployPublish 目标，一次用于 AfterTeamCity 目标。工作正常，去图。

# ios - 如何遍历 NSDictionaries 和 NSArrays 的嵌套层次结构并将所有内容转换为可变副本？

> ID：15587679
> 
> 赞同：8
> 
> 时间：2013-03-23T14:05:53.160
> 
> 标签：ios, objective-c, recursion, nsarray, nsdictionary

我有一个`NSDictionary`包含许多不同类型对象（`NSArrays`、、、、`NSDictionaries`等`NSStrings`）的实例`NSNumbers`。许多`NSDictionaries`and`NSStrings`都有自己的嵌套`NSDictionaries`and `NSArrays`。

如何从上到下遍历整个层次结构，并分别将 and 的所有实例转换为`NSDictionaries`and ？`NSArrays``NSMutableDictionaries``NSMutableArrays`

有没有我不知道的简单的“递归制作可变副本”功能？如果没有，我是否只需要反复循环和键入检查？我可以随时更换还是重建整个层次结构？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-23T14:58:11.363

以下方法创建嵌套数组、字典和集合的嵌套（深层）可变副本。它还可用于在层次结构内创建非集合对象的可变副本，例如字符串。

```
@interface NSObject (MyDeepCopy)
-(id)deepMutableCopy;
@end

@implementation  NSObject (MyDeepCopy)
-(id)deepMutableCopy
{
    if ([self isKindOfClass:[NSArray class]]) {
        NSArray *oldArray = (NSArray *)self;
        NSMutableArray *newArray = [NSMutableArray array];
        for (id obj in oldArray) {
            [newArray addObject:[obj deepMutableCopy]];
        }
        return newArray;
    } else if ([self isKindOfClass:[NSDictionary class]]) {
        NSDictionary *oldDict = (NSDictionary *)self;
        NSMutableDictionary *newDict = [NSMutableDictionary dictionary];
        for (id obj in oldDict) {
            [newDict setObject:[oldDict[obj] deepMutableCopy] forKey:obj];
        }
        return newDict;
    } else if ([self isKindOfClass:[NSSet class]]) {
        NSSet *oldSet = (NSSet *)self;
        NSMutableSet *newSet = [NSMutableSet set];
        for (id obj in oldSet) {
            [newSet addObject:[obj deepMutableCopy]];
        }
        return newSet;
#if MAKE_MUTABLE_COPIES_OF_NONCOLLECTION_OBJECTS
    } else if ([self conformsToProtocol:@protocol(NSMutableCopying)]) {
            // e.g. NSString
        return [self mutableCopy];
    } else if ([self conformsToProtocol:@protocol(NSCopying)]) {
            // e.g. NSNumber
        return [self copy];
#endif
    } else {
        return self;
    }
}
@end 
```

像这样使用它

```
NSDictionary *dict = ...;
NSMutableDictionary *mdict = [dict deepMutableCopy]; 
```

（不复制字典键，只复制值）。

我很确定我在 SO 上看到过类似的东西，但现在找不到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T14:58:45.373

虽然 Anoop 的答案很好（我认为，我也没有编译它），但如果您的实例层次结构实际上是一个属性列表，那么您可以使用[NSPropertyListSerialization](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPropertyListSerialization_Class/Reference/Reference.html)反序列化具有可变容器和/或叶节点的 plist。

这将减少到更少的代码行，并且可能比通过对象图手动下降更快，但只有当您最初从某个地方反序列化 plist 时，此解决方案才真正有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T14:12:30.887

对于外部 NSDictionary，这将创建 1 级向下。

您需要在一个方法中调用它，然后继续获取所有`dict`和`array`.

```
NSMutableDictionary *dict=[NSMutableDictionary new];
NSMutableArray *array=[NSMutableArray new];

for(NSDictionary *dict in yourMainDictionary){
   if([outerDict[dict] class]==[NSDictionary class]){
      [dict setObject:outerDict[dict] forKey:dict];
   }
   else if([outerDict[dict] class]==[NSArray class]){
      array[array.count]=outerDict[dict];
   }
} 
```

*没有编译器检查。读为算法*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-17T17:11:55.800

如果您使用某些操作系统方法来创建字典：这些方法通常具有允许您创建可变对象的参数。例如，JSON 序列化器类具有使所有字典和数组可变的标志，并使所有 NSString 对象可变（NSNumber 和 NSNull 永远不可变）。

# django - 使用信号概念来做事件

> ID：15587680
> 
> 赞同：0
> 
> 时间：2013-03-23T14:05:53.177
> 
> 标签：django, django-models, django-views, django-signals

这是我在数据库中更新记录后发送邮件的目的。我已经在名为 listeners.py 的单独文件中定义了接收器来接收信号。

信号.py

```
import django.dispatch

send_email_to = django.dispatch.Signal() 
```

听众.py

```
@receiver(send_mail_to)
def send_update(sender, instance, created, **kwargs):
    if instance.author_name:
        message = "Book details has been updated"
        subject = "Book updates"
        send_mail(subject, message, settings.DEFAULT_FROM_EMAIL,[instance.email,])

post_save.connect(send_update, sender=Book) 
```

视图.py

```
def addbook(request):      

    form = BookForm

    if request.POST:
        form = BookForm(request.POST)

        if form.is_valid():
            cd = form.cleaned_data
            form.save()
            post_save.connect(send_update, sender=Book)     
            return redirect('/index/')
    return render_to_response('addbook.html',{ 'form':form },context_instance=RequestContext(request)) 
```

我收到如下错误消息。

```
NameError at /addbook/
global name 'send_update' is not defined
Request Method: POST
Request URL:    http://localhost:8000/addbook/
Django Version: 1.4.3
Exception Type: NameError
Exception Value:    
global name 'send_update' is not defined
Exception Location: /root/Samples/DemoApp/DemoApp/views.py in addbook, line 50
Python Executable:  /usr/bin/python
Python Version: 2.7.0
Python Path:    
['/root/Samples/DemoApp',
 '/usr/lib/python2.7/site-packages/distribute-0.6.28-py2.7.egg',
 '/usr/lib/python27.zip',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7/site-packages',
 '/usr/lib/python2.7/site-packages/PIL',
 '/usr/lib/python2.7/site-packages/gst-0.10',
 '/usr/lib/python2.7/site-packages/gtk-2.0',
 '/usr/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info',
 '/usr/lib/python2.7/site-packages/webkit-1.0']
Server time:    Sat, 23 Mar 2013 19:05:01 +0500 
```

任何人都可以看到会是什么问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:33:21.743

因为您`send_update`在视图中定义了没有价值的东西。这就是为什么错误说您需要定义 send_update。

但是为什么你把它`post_save.connect(send_update, sender=Book)`放在你的观点中呢？你必须删除它。在你的 listeners.py 中已经理解了。因此，无论您使用 Book 模型执行什么操作，该模型都会向该信号发送请求。

# powershell - 无法在 Core i7 上运行 Powershell 64

> ID：15587685
> 
> 赞同：5
> 
> 时间：2013-03-23T14:06:03.720
> 
> 标签：powershell, windows-7-x64, powershell-3.0

我正在尝试进入 Powershell 工作流程，但是如果我尝试使用“工作流程”关键字，则会收到以下错误：

基于 Windows PowerShell x86 的控制台不支持 Windows PowerShell 工作流。打开基于 Windows PowerShell x64 的控制台，然后重试。

常识会告诉你打开64位版本：

```
C:\Windows\SysWOW64\WindowsPowerShell\v1.0 
```

我打开哪个版本的 powershell 似乎并不重要，我会收到相同的消息。

```
$env:Processor_Architecture always returns x86 
```

我在我的两台笔记本电脑（第一个 Win7，第二个 Win8）上都试过这个，它们的行为都一样

```
$env:PROCESSOR_IDENTIFIER : 
1st PC: Intel64 Family 6 Model 37 Stepping 2, GenuineIntel 
2nd PC: Intel64 Family 6 Model 42 Stepping 7, GenuineIntel 
```

我只是缺少一些简单的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T14:08:07.677

SysWOW64 中的版本为 32 位版本。WOW64 是 64 位 Windows 上的 32 位模拟器（WoW 的意思是“Windows 上的 Windows”）。您需要从 system32 运行该版本，即 64 位版本。

# lucene - 不要使用 plucene::simple 索引所有字段

> ID：15587686
> 
> 赞同：0
> 
> 时间：2013-03-23T14:06:09.243
> 
> 标签：lucene, indexing, pubmed

我正在寻找用于存储大量数据的 plucene，我对此很陌生。数据的每条记录都有一个唯一的 ID 和另外 3 个字段。这些字段有很多文本，但我只希望 id 可以搜索/索引，所以当我提供 id 时，我可以检索其他字段。一个简单的示例代码是这样的：

```
my $newIndex = Plucene::Simple->open("data");
$newIndex->add(id1 => {pubmedID => "1223323", title => "a_title", abstract => "an abstract"}); 
my @results = $newIndex->search("1223323"); 
```

我正在尝试使用 plucene::simple 并且我有 2 个问题/问题：

1.  我看不到不索引某些字段的选项。
2.  在`@results`数组中我会得到`'id1'`. 我怎样才能找回例如抽象领域？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:11:45.150

查看 Plucene::Document::Field 设置索引和存储选项。您希望在索引时拥有所有 4 个字段，但只会索引“idl”（存储其他 3 个字段）。

# c++ - 如何在 iOS 的 openframeworks 中构建 3d 钻石

> ID：15587688
> 
> 赞同：0
> 
> 时间：2013-03-23T14:06:20.277
> 
> 标签：c++, ios, 3d, openframeworks, cinder

如何在 iOS 的 openframeworks 中构建 3d 钻石？我很难在 openframeworks 中找到有用的 3d 渲染教程，而且我来自 Processing。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:16:26.380

I think there are two sides of the story:

1.  the nerdy openframeworks/c++/gl part part: how do you actually render a mesh of triangles together
2.  the fun part: geometry

For the 1st part I recommend starting with the oF documentation on [ofVbo](http://www.openframeworks.cc/documentation/gl/ofVbo.html). The article shows you how to render an icosahedron which with [flat shading](http://poniesandlight.co.uk/notes/flat_shading_on_osx/) (and optionally perhaps basic subdivision) can look like a diamond

![ofVbo](../Images/4c6dfd5a179fadd03a8091889a0c1b3f.png)

The point is you need to get used to working with vbos, vertices and faces. Once you've got the hang of that you can explore geometry

You can work out the indices to draw a common diamond (using the polar to cartesian formula and a bit of offsetting/scaling):

![diamond](../Images/e5d60453e4978c64d41164805a67a4ed.png)

Or you can explore geometry further by looking at:

*   platonic solids (see icosahedron/dodecahedron)
*   archimidean solids
*   polar zonohedron maybe ? (I played with this a bit in [Processing](https://stackoverflow.com/questions/9398570/problems-rendering-a-polar-zonohedron-in-processing) porting [Rob Bell](http://zomadic.com)'s Polar Zonohedron free Sketchup Ruby Script, plenty of interesting geometry on his site)

If you have the time also explore resources from geometers like [Paul Bourke](http://paulbourke.net/geometry/) or [George Hart](http://georgehart.com/virtual-polyhedra/vp.html)

# javascript - 适合标题 html/js 的窗口

> ID：15587690
> 
> 赞同：0
> 
> 时间：2013-03-23T14:06:25.327
> 
> 标签：javascript, html, window, width, title

有没有办法显示网页的弹出窗口，以便始终以适合窗口标题的方式选择宽度？

窗口总是会弹出js函数`window.open`

# sql - 创建筛选索引在 SQL Server 2012 Express 中不起作用

> ID：15587696
> 
> 赞同：4
> 
> 时间：2013-03-23T14:07:24.047
> 
> 标签：sql, sql-server, sql-server-2012-express

我正在尝试创建一个过滤的非聚集索引。在 gui 中，我右键单击`Indexes`我想要索引的表的文件夹。添加应应用索引的列，然后单击过滤器页面添加此语句：`WHERE eMail IS NOT NULL`。单击“确定”，出现此错误：

> 索引“fix_Email”的创建失败。(Microsoft.SqlServer.Smo)
> 关键字“WHERE”附近的语法不正确。
> 关键字“with”附近的语法不正确。如果此语句是公用表表达式、xmlnamespaces 子句或更改跟踪上下文子句，则前面的语句必须以分号结束。（Microsoft SQL Server，错误：156）

这直接来自一本关于 SQL Server 2008 管理的书。我安装了 SQL 2012 express 来看看两者之间会有什么不同。之前的所有示例都有效，创建了聚集索引、非聚集索引和覆盖索引。这是本书或 SQL Server 2012 或 Express 版的问题吗？我尝试按照我的陈述末尾的错误消息的建议放置一个分号`WHERE`，但这并没有做任何事情。

我能够在查询窗口中使用此代码创建索引：

```
CREATE NONCLUSTERED INDEX fix_Prices
ON dbo.Customers (eMail)
WHERE eMail IS NOT NULL; 
```

为什么这行得通但不使用 Management Studio gui？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T14:24:40.897

当您在对话框中输入过滤器表达式时，您不需要`WHERE`自己添加子句。只需输入：

```
eMail IS NOT NULL 
```

否则，如果您以 a开头`WHERE`，您将有两个`WHERE`子句（并且不要在末尾添加分号，因为它会中断索引创建语句的其余部分）。当您添加列、输入过滤条件并单击`Script`按钮时，您可以看到这一点。选择新的查询窗口。你会看到这样的东西：

```
USE [yourdb]
GO
SET ANSI_PADDING ON
GO
CREATE NONCLUSTERED INDEX [fix_Prices] ON [dbo].[Customers]
(
[eMail] ASC
)
WHERE WHERE eMail IS NOT NULL
------^^^^^ OOPS!

WITH (...index options...)
GO 
```

可以说，SSMS 应该足够聪明，可以去除多余的`WHERE`子句，或者甚至可以使用 IntelliSense 向您展示您的脚本的外观，并轻松指出此类简单错误，但坦率地说，它们有比这更重要的错误要修复。（我的意思是，来吧，[在 2008 年，他们宣布弃用不以分号结尾的语句，](http://msdn.microsoft.com/en-us/library/ms143729(v=sql.100).aspx)我[一直在努力让每个人都参与进来很长一段时间](https://sqlblog.org/2009/09/03/ladies-and-gentlemen-start-your-semi-colons)。你看到上面有一个分号吗？ 没有。）

# jquery - jQuery Ajax 只工作一次

> ID：15587698
> 
> 赞同：0
> 
> 时间：2013-03-23T14:07:35.017
> 
> 标签：jquery

我有这段代码

```
$(document).ajaxStart($.blockUI).ajaxStop($.unblockUI); 
```

它按我的预期工作，除非它只工作一次。刷新页面后，上面的代码运行良好，但就像以前一样只运行一次。任何建议如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:18:21.497

请阅读[.ajaxStart 文档](http://api.jquery.com/ajaxStart/)。

说明：

> 描述：注册一个处理程序，以便在第一个 Ajax 请求开始时调用。这是一个 Ajax 事件。
> 
> 每当要发送 Ajax 请求时，jQuery 都会检查是否还有其他未完成的 Ajax 请求。如果没有进行中，jQuery 会触发 ajaxStart 事件。此时会执行已使用 .ajaxStart() 方法注册的所有处理程序。

这意味着如果第一个 ajax 请求没有终止并且您发送另一个请求，则不会再次触发此事件。

然后，我们可以很容易地假设 ajaxStop 的行为是相同的。 [这](http://api.jquery.com/ajaxStop/)是文档

> 描述：注册一个处理程序以在所有 Ajax 请求完成时调用。这是一个 Ajax 事件。
> 
> 每当一个 Ajax 请求完成时，jQuery 都会检查是否还有其他未完成的 Ajax 请求。如果没有剩余，jQuery 会触发 ajaxStop 事件。此时会执行已使用 .ajaxStop() 方法注册的所有处理程序。如果通过在 beforeSend 回调函数中返回 false 来取消最后一个未完成的 Ajax 请求，也会触发 ajaxStop 事件。

这意味着正如预期的那样，只有当所有当前正在运行的 ajax 请求都被终止时，才会触发此事件。

或者也许我不明白你的问题？

## 编辑

您也可以尝试使用 ajaxComplete（没有足够的代表来插入链接）

> （全局事件）此事件的行为与完成事件相同，每次 Ajax 请求完成时都会触发。

无论 ajax 调用成功还是失败，都会触发此事件。但它也会为每个完成的请求调用。

# jquery - jQuery交换ID

> ID：15587700
> 
> 赞同：0
> 
> 时间：2013-03-23T14:07:51.750
> 
> 标签：jquery, attr

我有交换div的。当我单击`#inactive`id 时，`#active-page`应该消失并且`#inactive-page`应该出现。此外，`#active id`应该成为`#inactive`id，反之亦然。我已经使用交换 id 的= >`#inactive-page-swap`和.`#inactive-page``#active-swap``#active`

问题是 - 当我点击`#inactive`id 时，`#active-page`消失但`#inactive-page`没有出现。

```
<script>
$(document).ready(function(){
    $("#inactive").click(function(){
        $(#inactive).attr("id","active-swap");
        $("#active").attr("id","inactive");
        $("#active-swap").attr("id","active");
        $("#active-page").attr("id","inactive-page-swap",function(){
            $("#inactive-page").attr("id","active-page");
            $("#inactive-page-swap").attr("id","inactive-page");
        });
    });
});
</script> 
```

请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:22:05.203

试试这个...

```
$(document).ready(function(){
    $("#inactive").click(function(){
        var id = $(this).attr('id');
        inactive = $('#inactive');
        active = $('#active');
        swap = $('#active-swap');
        inactive.attr('id', 'active-swap');
        active.attr('id', 'inactive');
        swap.attr('id', 'active');
        inactive = $('#active-page');
        inactivepage = $('#inactive-page');
        inactiveswap = $('#inactive-page-swap');
        $(inactive).attr("id","inactive-page-swap");
        $(inactivepage).attr("id","active-page");
        $(inactiveswap).attr("id","inactive-page");
    });
}); 
```

看到这个[jsFiddle 例子](http://jsfiddle.net/m52jp/2/)

# android - 将 SQLite 与 ListFragment 一起使用会产生问题

> ID：15587707
> 
> 赞同：0
> 
> 时间：2013-03-23T14:08:13.153
> 
> 标签：android, android-fragments, android-sqlite, android-listfragment

我正在使用 ListFragment 来显示数据库中的数据。但数据显示不正确。

在我的 Fragment 中，在用户单击 ActionBar 项目并插入名称后，我将联系人添加到 SQLite 数据库：

```
//Handle OnClick events on ActionBar items
@Override
public boolean onOptionsItemSelected(MenuItem item) {
   // handle item selection
   switch (item.getItemId()) {
      case R.id.menu_add:
         Toast.makeText(getActivity(), "Click", Toast.LENGTH_SHORT).show();

         LayoutInflater factory = LayoutInflater.from(getActivity());

         //textEntryView is an Layout XML file containing text field to display in alert dialog
         textEntryView = factory.inflate(R.layout.dialog_add_room, null);       

         //get the control from the layout      
         enter_room = (EditText) textEntryView.findViewById(R.id.enter_room);

         //create Dialog
         final AlertDialog.Builder alert1 = new AlertDialog.Builder(getActivity());
         //configure dialog
         alert1.setTitle("Raum hinzufügen:").setView(textEntryView)
         .setPositiveButton("Hinzufügen",
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,
                    int whichButton) {
                String roomname = enter_room.getText().toString();

                Log.d("Insert: ", "Inserting ..");
                dbHandler.addContact(new Contact(roomname, "0"));

                adapter.notifyDataSetChanged();
            }
         }).setNegativeButton("Abbrechen",
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,
                    int whichButton) {
                //cancel dialog
            }
         });
         alert1.show();          
         return true;
      default:
         return super.onOptionsItemSelected(item);
   }
} 
```

然后我想获取所有联系人并使用以下代码在 ListFragment 中显示它们：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //display ActionBar items
        setHasOptionsMenu(true);

        //database
        dbHandler = new DatabaseHandler(getActivity());

        //get all contacts
        contacts = dbHandler.getAllContacts();

        adapter = new ArrayAdapter<Contact>(getActivity(),
                android.R.layout.simple_list_item_activated_1,
                android.R.id.text1, contacts);

        adapter.setNotifyOnChange(true);

        //show all contacts in the ListFragment
        setListAdapter(adapter);
    } 
```

我的 DatabaseHandler 中的 getAllContacts()：

```
// Getting All Contacts
public List<Contact> getAllContacts() {
    List<Contact> contactList = new ArrayList<Contact>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Contact contact = new Contact();
            contact.setID(Integer.parseInt(cursor.getString(0)));
            contact.setName(cursor.getString(1));
            contact.setPhoneNumber(cursor.getString(2));
            // Adding contact to list
            contactList.add(contact);
        } while (cursor.moveToNext());
    }

    // return contact list
    return contactList;
} 
```

但是在我的 ListFragment 中显示了以下内容：

```
com.example.fragmentmasterdetail.sqlite.Contact@21059ed8 
```

我想查看联系人的姓名。任何人的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:12:26.810

根据[ArrayAdapter 文档](http://developer.android.com/reference/android/widget/ArrayAdapter.html)：

> 然而，TextView 被引用，它将被数组中每个对象的 toString() 填充。您可以添加自定义对象的列表或数组。覆盖对象的 toString() 方法以确定将为列表中的项目显示哪些文本。

因此，要将自定义文本添加到您的列表中，`toString()`请在您的类中添加一个方法`Contact`：

```
public String toString()
{
    return name;
} 
```

# objective-c - 不点击objective-c中的textview时，uitextview文本为空

> ID：15587710
> 
> 赞同：0
> 
> 时间：2013-03-23T14:08:21.220
> 
> 标签：objective-c, ios5

我正在使用 UITextView，当我修改 textview 并获得文本时，它的委托方法调用得很好。它工作正常。当我没有修改 textview 文本时，我得到了空值。

```
NSLog(@"currentTextView.text is %@",currentTextView.text);
 NSLog(@"currentTextView.tag is %d",currentTextView.tag); 
```

currenttextview.tag 为 0，但 text 为空。

我不明白是什么问题。但我清楚地理解一件事，那就是点击 textview 时只调用委托方法。如果没有被点击，代表不会被调用，但是之前的文本在哪里，它是空的。

请告诉我任何建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:23:33.960

只需在加载视图时将焦点设置在 TextView 上，它将调用 UITextView 的“- (void)textViewDidBeginEditing:(UITextView *)textView”

```
[youTextViewObj becomeFirstResponder]; 
```

这是因为委托是与 Control 绑定的操作/事件，它会在 Control 上的某些操作上触发，这就是为什么它不单击它就不会返回 Nil 值。

# windows - Visual Basic 6.0 中的数据网格未更新

> ID：15587712
> 
> 赞同：1
> 
> 时间：2013-03-23T14:08:39.800
> 
> 标签：windows, datagrid, vb6, coding-style

我正在使用vb 6.0做一个补习中心数据库和注册系统，我创建了两个表格，表格1是秘书输入注册学生的数据，第二个表格是数据库，我使用了Adodc 方法并使用datagrid 来查看。我的问题是当我第一次插入数据时，在表格1中单击保存，我转到表格2，第一个数据在数据网格中，但是当我回到表格1并插入新数据并保存时，然后我去表格2，没有第二个数据，只有第一个数据。第二个数据只有在我退出整个系统并重新打开系统后才会出现。如何让我的数据网格在每次保存时更新数据？我在 google 中寻找答案，提供者给出的答案通常来自 vb.NET，但我的是 vb 6.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T03:57:23.743

尝试刷新数据网格。“datagrid.refresh”或通过更新代码刷新整个数据库。点击下面的链接。 [http://www.angelfire.com/cantina/flashando/ch02/ch02.htm](http://www.angelfire.com/cantina/flashando/ch02/ch02.htm)

# objective-c - Facebook Graph API - 搜索地点失败

> ID：15587716
> 
> 赞同：1
> 
> 时间：2013-03-23T14:09:12.050
> 
> 标签：objective-c, facebook, facebook-graph-api, facebook-ios-sdk

我使用以下代码来获取我在 Facebook iOS SDK 中的位置信息。

```
[FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"search?type=place&center=%f,%f&distance=200&limit=100&offset=0", la, lo] completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    if (error) {
        NSLog(@"error.localizedDescription:%@", error.localizedDescription);
    }

    NSArray *list = [result objectForKey:@"data"];
    NSLog(@"list:%@", list);
}]; 
```

这些以前工作正常，但今天失败了。这是错误信息。

```
The operation couldn’t be completed. (com.facebook.sdk error 5.) 
```

我去 facebook API 页面。（[http://developers.facebook.com/docs/reference/api/search/](http://developers.facebook.com/docs/reference/api/search/)）

而且，我发现[https://graph.facebook.com/search?q=coffee&type=place¢er=37.76,-122.427&distance=1000](https://graph.facebook.com/search?q=coffee&type=place&center=37.76,-122.427&distance=1000)返回零。

所以，我试图弄清楚这个问题是否是由于facebook，而我唯一能做的就是等待？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-17T16:42:15.277

使用最新的 SDK

```
NSMutableDictionary *params2 = [NSMutableDictionary dictionaryWithCapacity:3L];

    [params2 setObject:@"37.416382,-122.152659" forKey:@"center"];
    [params2 setObject:@"place" forKey:@"type"];
    [params2 setObject:@"1000" forKey:@"distance"];

    [[[FBSDKGraphRequest alloc] initWithGraphPath:@"/search" parameters:params2 HTTPMethod:@"GET"] startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection, id result, NSError *error) {
        NSLog(@"RESPONSE!!! /search");
        NSLog(@"result %@",result);
        NSLog(@"error %@",error);
    }]; 
```

# php - 使用 Imagick 将图像从 RGB 转换为 CMYK

> ID：15587718
> 
> 赞同：4
> 
> 时间：2013-03-23T14:09:31.347
> 
> 标签：php, imagick

我正在尝试将 RGB 图像转换为 CMYK，因为它们需要打印。我正在使用这段代码：

```
<?php
$filePath = 'rgb.jpg';

// First save image as png
$image = new Imagick($filePath);
$image->setImageCompression(Imagick::COMPRESSION_UNDEFINED);
$image->setImageCompressionQuality(0); 
$image->setImageFormat("png");
$filePath = 'rgb.png';
$image->writeImage($filePath);
$image->clear();
$image->destroy();
$image = null;

// Convert colors
$image = new Imagick($filePath);
$image->stripImage();
$image->setImageColorspace(Imagick::COLORSPACE_CMYK);
$image->setImageCompression(Imagick::COMPRESSION_UNDEFINED);
$image->setImageCompressionQuality(0); 
$image->setImageFormat("png");
$filePath = 'cmyk.png';
$image->writeImage($filePath);

$image->clear();
$image->destroy();
$image = null;

$fileUrl = 'http://www.product-designer.nl/rgb2cmyk/cmyk.png';
?>
CMYK Image:<br/>
<img src="<?php echo $fileUrl; ?>" width="400" /><br /><br />
<?php
$fileUrl = 'http://www.product-designer.nl/rgb2cmyk/rgb.png';
?>
RGB Image:<br/>
<img src="<?php echo $fileUrl ?>" width="400" /> 
```

您可以在[http://product-designer.nl/rgb2cmyk](http://product-designer.nl/rgb2cmyk)上看到结果， 我不知道如何，但不知何故，图像上的颜色会反转。我需要转换图像，但颜色需要尽可能接近 RGB 颜色。

有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:19:18.343

看看[这里](http://www.php.net/manual/en/imagick.setimagecolorspace.php#107716)：

```
<?php 
// don't use this (it inverts the image) 
//    $img->setImageColorspace (imagick::COLORSPACE_RGB); 

if ($img->getImageColorspace() == Imagick::COLORSPACE_CMYK) { 
   $profiles = $img->getImageProfiles('*', false); 
   // we're only interested if ICC profile(s) exist 
   $has_icc_profile = (array_search('icc', $profiles) !== false); 
   // if it doesnt have a CMYK ICC profile, we add one 
   if ($has_icc_profile === false) { 
       $icc_cmyk = file_get_contents(dirname(__FILE__).'/USWebUncoated.icc'); 
       $img->profileImage('icc', $icc_cmyk); 
       unset($icc_cmyk); 
   } 
   // then we add an RGB profile 
   $icc_rgb = file_get_contents(dirname(__FILE__).'/sRGB_v4_ICC_preference.icc'); 
   $img->profileImage('icc', $icc_rgb); 
   unset($icc_rgb); 
} 

$img->stripImage (); // this will drop down the size of the image dramatically (removes all profiles) 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-15T15:43:53.407

好的，所以这是一个棘手的问题。我遇到了同样的问题，我花了好几天才解决这个问题。您需要 negateImage()，请参阅我的示例并确保您只为 php 5.3.x 执行此操作，因为此问题是该 php vs.

```
$range = $jpeg->getQuantumRange();
$php_vs_arr = preg_split("/\./", phpversion());
$php_vs = $php_vs_arr[0] . '.' . $php_vs_arr[1];
if ($jpeg->getImageColorspace() == Imagick::COLORSPACE_CMYK) {

    //make sure cmyk color-space is set correctly
$jpeg->setImageColorspace(12);

// then we add an RGB profile
$icc_rgb = file_get_contents(FRAMEWORK_PATH . DS . 'color' . DS . 'AdobeRGB1998.icc');
$jpeg->profileImage('icc', $icc_rgb);
unset($icc_rgb);

//set color space to rgb
$jpeg->setImageColorspace(13);

//fix gamma, hue, saturation, brightness
if($php_vs < 5.3) {
    //ADJUST GAMMA BY 2.0 for 5.2.x
    $jpeg->levelImage(0, 2.0, $range['quantumRangeString']);
} else {
    //php 5.3 hack FOR INVERTED COLORS
    $jpeg->negateImage(false, Imagick::CHANNEL_ALL);
}

}
$jpeg->stripImage(); 
```

注意：我的 Imagick 对象显然是 $jpeg

此外，您需要从 Adob​​e 网站下载 Adob​​eRGB1998.icc 配置文件，只需在 Google 上搜索即可。

我希望这会有所帮助，请将其标记为正确答案，因为很多人对此有疑问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T05:46:52.150

可能的原因是 RGB 是加色方案，而 CMYK 是减色方案。即我们可以使用以下公式将 RGB 转换为 CMYK：

```
C = 255 - R;
M = 255 - G;
Y = 255 - B; 
```

它看起来像“如何反转颜色”。所以在这种情况下我们也应该算出K值。

为了避免它，我们可以使用[ICC-profiles](http://www.computer-darkroom.com/ps13_colour/ps13_1.htm)。

可能的解决方案之一：

```
$image = new Imagick('img/test.jpg');
$profiles = $image->getImageProfiles('*', false);
if (!array_search('icc', $profiles)) {
    // Without this code Photoshop cannot open image with original icc-profile
    $icc_rgb = file_get_contents('profiles/AppleRGB.icc');
    if ($image->profileImage('icc', $icc_rgb))
        echo '<br>Changed!';
    unset($icc_rgb);
}
// don't use this code, it leads to inverted image
//$image->setImageColorspace(Imagick::COLORSPACE_CMYK);
// tiff format supports CMYK colorscheme
$image->setFormat('tiff');
$image->setImageCompression(Imagick::COMPRESSION_UNDEFINED);
$image->setImageCompressionQuality(0);
// We can download profiles here http://www.adobe.com/support/downloads/thankyou.jsp?ftpID=4075&fileID=3790
$icc_cmyk_profile_path='profiles/USWebCoatedSWOP.icc';

$icc_cmyk = file_get_contents($icc_cmyk_profile_path);
if ($image->profileImage('icc', $icc_cmyk))
    echo '<br>Changed!';
unset($icc_cmyk);
// Drops all profiles, so we comment it
//$image->stripImage();
if ($image->writeImage('img/test_cmyk.tiff'))
    echo '<br>Save!';
$image->clear();
$image->destroy(); 
```

文件大小已更改，例如从 72Kb 更改为 1.4Mb 。

# c# - 将敏感数据从我的网站发送到我的 C# 应用程序

> ID：15587720
> 
> 赞同：2
> 
> 时间：2013-03-23T14:09:40.397
> 
> 标签：c#, php, security, login, https

我有一个安装了 mysql、php 技术的工厂外部托管网站（linux platofmr）。我需要我的 C# 应用程序从网站收集数据。

我的网站上有一个 MYSQL 数据库，我想发送我的用户名和密码以访问一些敏感数据（使用 PHP 脚本）

我目前的设计看起来像这样：

C# 应用程序 POST 到网站上的 login.php 脚本。

例如 mywebsite.com/login.php?username=admin?password= **MD5HashedPassword**

如果用户名和密码与数据库中的用户名和密码匹配，该脚本会生成一个带有“OK”的空白页面。

现在我认为这对于登录来说可能是安全的，但是如果我希望登录脚本生成包含敏感信息的 XML 数据，我认为这不是一种安全的方式。我这样想对吗？

那我应该往哪个方向走。我的应用程序和网站之间是否应该有某种 PHP 会话。这是一件简单的事情吗？我应该放弃使用 PHP 并使用不同的技术吗？

非常欢迎任何意见和建议。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:16:04.133

这应该没问题，前提是您的交易满足以下条件：

1.  对 PHP 页面的 POST 请求发生在 C# 服务器到 PHP 服务器，用户的浏览器*不*执行 POST。如果用户的浏览器向 PHP 服务器执行 POST，那么攻击者可以简单地使用[Burp Suite](http://portswigger.net/burp/)等代理拦截请求并提取散列密码，然后发出额外的恶意请求。

2.  用户名/密码作为 POST 参数而不是 GET 参数在查询字符串中传递。您使用了以下示例：`e.g mywebsite.com/login.php?username=admin?password=MD5HashedPassword`在我看来，它就像使用查询字符串的 GET 请求。这是*不安全*的。

3.  POST 请求仅通过 HTTPS/SSL 而不是常规 HTTP。这将确保通信从 TCP 向下加密。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T14:19:53.507

SSL 是保护线路上数据的标准方式。如果您有证书，只需将其加载到您的 Web 服务器（服务器之间的过程不同）并确保您的程序将 https 指定为协议。

您的身份验证系统看起来……不标准。如果您要使用程序化 http 请求，通常不能使用平台的表单身份验证。但是，您应该更喜欢基本或摘要式身份验证，而不是自己动手。在这种情况下，凭据将在标头中传递，而不是作为查询字符串的一部分显式传递。由于您使用的是 SSL，因此基本身份验证是安全的。

# modx-revolution - 登录到管理器时无法查看上下文

> ID：15587721
> 
> 赞同：0
> 
> 时间：2013-03-23T14:10:49.833
> 
> 标签：modx-revolution

**问题**

我希望我的网站有两种语言，英语和西班牙语。我已按照这篇[文章](http://designfromwithin.com/blog-webdesign-development/2012/01/12/modx-multilingual-setting-up-babel-and-have-a-website-with-multible-languages/)的出色说明进行操作。

如果我在一个选项卡中登录到管理器，然后打开另一个选项卡到西班牙语页面，我确实会看到西班牙语页面。例如， [http://www.site.com/es/somepage.html](http://www.site.com/es/somepage.html)，有效！

但是，如果我没有登录到管理器并尝试导航到此页面，我会收到 503 错误，找不到页面。我在错误日志中看不到任何内容。

显然，这是一些安全问题，但我查看了匿名用户，他们确实具有对西班牙语和英语上下文的加载访问权限。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:19:53.510

听起来您没有授予匿名用户访问西班牙语上下文的权限。

*   那篇文章看起来已经有好几年了，请查看官方 babel 网站： http: [//www.multilingual-modx.com/](http://www.multilingual-modx.com/)那里也有分步教程。

*   什么版本的modx？2.2.6 在设置上下文时有些不同。

*   你得到了什么错误？503 [服务器错误] 还是 404 [找不到页面]？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T04:25:14.027

我发现了这个问题。

当我复制 web 上下文以使我的西班牙语上下文时，西班牙语上下文下的任何资源都没有发布。啊。

感谢您的帮助@Sean Kimball。

# ios - applicationWillEnterForeground 和情节提要检查

> ID：15587722
> 
> 赞同：-1
> 
> 时间：2013-03-23T14:11:00.247
> 
> 标签：ios, uistoryboard, usersession

我有一个 ios 应用程序，我在其中使用了故事板。

我有一个问题：当用户从后台返回时，我会检查用户会话是否仍然有效。如果此会话已过期，我会将用户发送到登录控制器（我的故事板上的第二步）我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:22:40.710

就这样做

伪代码不是实际代码

```
(void)applicationWillEnterForeground
{
if(sessionAvailable)
{
//do normal next working
}
else
{
LoginViewController *loginViewController=[self.storyBoard instantiateViewControllerWithidentifier:@"LoginViewController"];
[self.navigationController pushViewController:loginViewController animates:YES];
}
} 
```

# php - 如何将此 wget 函数转换为 php？

> ID：15587725
> 
> 赞同：-1
> 
> 时间：2013-03-23T14:11:08.557
> 
> 标签：php, xml, linux, wget

```
wget -d --header="Content-Type:application/xml" --post-data="$(cat <your xml file>)" http://sample.sample.com/api 
```

我如何在 php 中使用这个函数？我也想得到这个函数的响应。我在php中有一个变量可行的是这样的

```
$xml = '<sample>
    <Request target="test">
    </Request>
</sample>' 
```

这是我要发布的 xml。

我尝试了以下方法：

```
$url = 'sample.sample.com/api';;
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, "$(cat <".$xml.">)"); // receive server response ...
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
echo $server_output = curl_exec ($ch);
curl_close ($ch); 
```

但它返回了这个错误：

> 解析 XML 失败：需要开始标记，未找到“<”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:17:11.200

您应该能够遵循[使用 PHP 发送和接收 XML](http://www.bharath.co.uk/articles/2011/05/php-sending-and-receiving-xml-using-php)中所示的类似场景。该站点的第二部分（发送 XML）使用 curl 来处理此操作，该操作具有与 wget 相似的属性，但使用 PHP 库而不是命令行二进制文件和参数。为了长寿，我将包含该站点的此代码段。

```
<?php
  /*
   * XML Sender/Client.
   */
  // Get our XML. You can declare it here or even load a file.
  $xml_builder = '
                  <?xml version="1.0" encoding="utf-8"?>
                  <Test>
                      <String>I like Bharath.co.uk!</String>
                  </Test>
                 ';
  // We send XML via CURL using POST with a http header of text/xml.
  $ch = curl_init('http://' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI']);
  curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
  curl_setopt($ch, CURLOPT_HEADER, 0);
  curl_setopt($ch, CURLOPT_POST, 1);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_builder);
  curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
  curl_setopt($ch, CURLOPT_REFERER, 'http://www.bharath..co.uk');
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  $ch_result = curl_exec($ch);
  curl_close($ch);
  // Print CURL result.
  echo $ch_result;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:17:42.487

我认同 ...

```
$cmd = "wget -d --header=\"Content-Type:application/xml\" --post-data=\"$(cat <your xml file>)\" http://sample.sample.com/api";
exec($cmd);
$outputfile = "dl.html";
echo file_get_contents($outputfile); 
```

# django - Django 信用账户示例

> ID：15587728
> 
> 赞同：2
> 
> 时间：2013-03-23T14:11:10.590
> 
> 标签：django

是否有处理信用和帐户的 Django 包。例如，用户需要 3 个学分来发送电子邮件等，我正在寻找此类事情所需的模型和功能的示例。我找不到一个包，所以有人知道 Django 中有什么应用程序可以做类似的事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:54:43.647

看看[django-oscar-accounts](https://github.com/tangentlabs/django-oscar-accounts/blob/master/accounts/abstract_models.py)它跟踪交易和信用账户。可以调整以供您使用，或者您可以从我发布的链接中的模型中汲取灵感。希望这可以帮助。

# internet-explorer - CSS 溢出：使用 PIE.htc 隐藏，位置：已修复

> ID：15587731
> 
> 赞同：1
> 
> 时间：2013-03-23T14:11:14.133
> 
> 标签：internet-explorer, css, css3pie

```
<!DOCTYPE html>
<style>
body { border: 0; margin: 0; padding: 0; }
#fixed { position: fixed; width: 100%; height: 40px; top: 0; left: 0; background: red; border-radius: 0 0 100% 100%; overflow: hidden; behavior: url(PIE.htc); }
#over { width: 1000px; height: 100%; margin: auto; background: green; }
</style>

<div id='fixed'><div id='over'></div></div> 
```

我正在尝试做的是使用 PIE.htc 在 IE 7、IE 8 上模拟边框半径属性。溢出似乎有问题：当涉及到位置时隐藏：固定元素。我的问题是：有没有办法让这个工作，或者，也许，一个解决方法？

谢谢，用户1885099

# asp.net-mvc-4 - 获取 MVC 4 / Razor 中 Ajax ActionLink 的文本框值

> ID：15587733
> 
> 赞同：2
> 
> 时间：2013-03-23T14:11:24.840
> 
> 标签：asp.net-mvc-4, razor-2

我正在做一个带有按钮的经典搜索字段。我正在为按钮使用 Ajax.ActionLink，但我无法弄清楚如何获取在 ActionLink 中发布的文本框值。我看起来像这样：

```
<div class="input-append">
    <input type="text" id="Company_CompanyName" />
    @Ajax.ActionLink("search",
                     "CompanySearch",
                      new { searchString = "???" },
                            new AjaxOptions
                            {
                                HttpMethod = "GET",
                                InsertionMode = InsertionMode.Replace,
                                UpdateTargetId = "CompanySearchResults"
                            },
                            htmlAttributes: new { @class = "btn" })
</div>

<div id="CompanySearchResults"></div> 
```

在哪里？？？是，我不知道如何从文本框中获取值。我该怎么办？

**更新1：它是一个嵌套形式**

正如我应该在原始帖子/问题中提到的那样，这是一个嵌套表单，即要提交一个外部表单。因此，如果我在其中创建一个带有提交的 Ajax.BeginForm()，它将调用外部表单的提交。我显然想避免这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:35:33.507

好的，所以，我会尝试将其设为“哑”链接/按钮并处理通过 javascript 传递的所有信息。它看起来像下面这样。

我相信以下脚本中存在语法错误，因此仅将其用作指导。

```
<input type="text" id="Company_CompanyName" />
<a href="#" id ="CompanySearch" class="btn">Search</a>
<div id="CompanySearchResults"></div>

<script type="text/javascript">
$('#CompanySearch').click(function() {
    var searchTerm = $("#Company_CompanyName").text();
    $.ajax({
        url: @Url.Action("search","CompanySearch") ,
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        data: {'SearchTerm' : searchTerm}  // JSON.stringify(searchTerm),
        success: function(result) {
            $('#CompanySearchResults').html(result);
        }
      });
     return false;   
});
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T01:08:25.243

*这个答案没有实际意义，链接在表格中，稍后我会尝试再做一个答案...*

为此使用 ajax 表单 - 而不是链接。您需要一个表单来在回发中包含值，即。

```
@using (Ajax.BeginForm("search", "CompanySearch",new AjaxOptions { HttpMethod = "GET", InsertionMode =      InsertionMode.Replace, UpdateTargetId = "SearchResults" }))
{    
<h1>Search</h1>
<input type="text" placeholder="Search Terms" name="SearchTerms"/>
 <input type="submit" name="Command" value="Search" />
}

<div id="SearchResults"></div> 
```

# r - 将 levelplot() 保存到 R 的 lattice 包中的文件

> ID：15587734
> 
> 赞同：3
> 
> 时间：2013-03-23T14:11:30.563
> 
> 标签：r, lattice, levelplot

我注意到我的脚本中发生了一些非常奇怪的事情：

```
pdf("name.pdf")
levelplot(my_data)
dev.off() 
```

`lattice`如果我想将绘图保存到文件中，则不适用于's levelplot。我阅读了`lattice`包装手册和 levelplot 帮助功能，但找不到关于这个特定问题的任何信息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T14:34:42.243

通过“脚本”，我假设您没有以交互方式运行它？无论如何，简单地调用基于网格的图形函数（例如**lattice**或**ggplot2**包中的函数）不会**进行**任何绘图 - 它只是创建一个描述绘图的 R 对象。你需要`print`这个对象来让 R 绘制情节。

在交互式使用中，对象会自动打印，但不会在脚本中（例如，不在循环中）。

尝试：

```
pdf("name.pdf")
print(levelplot(my_data))
dev.off() 
```

如果这不起作用，您需要解释更多，因为如果您完全按照给定的方式运行代码并且`my_data`.

# doctrine-orm - Doctrine2 PostPersist：更新对应的实体

> ID：15587742
> 
> 赞同：0
> 
> 时间：2013-03-23T14:13:10.707
> 
> 标签：doctrine-orm, updating

我有两个实体（请注意，省略了不相关的方法和属性）：

```
/**
* @Entity
*/
class Manager {

   /**
    * @Column(type="integer")
    */
    private $referencesCount;

    /**
    * @OneToMany(targetEntity="Reference", mappedBy="manager")
    */
    private $references;

    public functions increaseReferenceCount() {
        $this->referencesCount++;
    }

     // other properties and methods
}

/**
* @Entity
* @HasLifecycleCallbacks
*/
class Reference {

    /**
    * @ManyToOne(targetEntity="Manager", inversedBy="references")
    * @JoinColumn(nullable=false)
    */
    private $manager;

    /**
    * @PostPersist
    */
    public function updateManagerReferenceCount() {
        $this->manager->increaseReferenceCount()
    }

     // other properties and methods
} 
```

经理可以有许多参考。一份参考完全属于一位经理。我的模型应该针对查询进行优化，所以为了避免昂贵的连接（Manager 有更多的关联），我添加到 Manager 模型的 $referencesCount 属性，你猜对了，它保存了它的引用数。新的引用被持久化后，$referencesCount 应该增加。但现在不是。我错过了什么？（我已经厌倦了 cascade={"all"} 但它对我不起作用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:15:03.170

您应该添加[传递持久性](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#transitive-persistence-cascade-operations)

`cascade={"all"}`

到`Reference`实体（不仅为`Manager`）。

并替换`@PostPersist`为`@PrePersist`.

# java - 在 JLabel 中设置固定大小的图标

> ID：15587744
> 
> 赞同：1
> 
> 时间：2013-03-23T14:13:18.693
> 
> 标签：java, swing, jpanel, jlabel, fixed-width

我在更大的 JPanel 中有一个 JPanel，我想添加图像并在运行时更改它。而且我需要在执行程序时将较小面板中的图像调整为固定大小。我设法通过使用 JLabel 在其中添加图像，但我无法修复它的大小或调整它的大小。我从互联网上搜索的大多数建议对我没有帮助，实际上，我并不理解其中的大部分。这是我的代码：

```
public PhotoPanel() throws IOException {
    initComponents();
    jPanel1.setLayout(new GridLayout(1,1));

    BufferedImage myPicture = ImageIO.read(new URL("http://www3.pictures.fp.zimbio.com/Nicholas+Cage+David+Letterman+-EtX2RCI91al.jpg"));
    JLabel picLabel = new JLabel(new ImageIcon( myPicture ));
    jPanel1.add( picLabel );
} 
```

这就是我的程序的 GUI： ![在此处输入图像描述](../Images/12b6300fead50e5d1282ce1d4a16e37f.png)

我希望我解释清楚。

# django - Djangobook 示例：没有 {% csrf_token %} 并传递 context_instance=RequestContext(request) 的 POST。如何？

> ID：15587747
> 
> 赞同：0
> 
> 时间：2013-03-23T14:13:31.613
> 
> 标签：django, django-csrf

[我已经实现了djangobook 第 7 章`Tying Form objects into views`](http://www.djangobook.com/en/2.0/chapter07.html)中的以下示例（我使用的是 Django1.4）：

```
# views.py

from django.shortcuts import render_to_response
from mysite.contact.forms import ContactForm

def contact(request):
    if request.method == 'POST':
        form = ContactForm(request.POST)
        if form.is_valid():
            cd = form.cleaned_data
            send_mail(
                cd['subject'],
                cd['message'],
                cd.get('email', 'noreply@example.com'),
                ['siteowner@example.com'],
            )
            return HttpResponseRedirect('/contact/thanks/')
    else:
        form = ContactForm()
    return render_to_response('contact_form.html', {'form': form})

# contact_form.html

<html>
<head>
    <title>Contact us</title>
</head>
<body>
    <h1>Contact us</h1>

    {% if form.errors %}
        <p style="color: red;">
            Please correct the error{{ form.errors|pluralize }} below.
        </p>
    {% endif %}

    <form action="" method="post">
        <table>
            {{ form.as_table }}
        </table>
        <input type="submit" value="Submit">
    </form>
</body>
</html> 
```

当我转到绑定到此视图的 url 并提交我得到的表单时`Forbidden(403) CSRF verification failed, Request aborted`。我必须在`{% csrf_token %}`之后添加`<form action="" method="post">`并通过`context_instance=RequestContext(request)`才能`render_to_response`使其正常工作。**是不是我做错了什么/我监督了一些设置，因为我不明白作者是如何在没有我必须做的更正的情况下让这个例子工作的**。顺便说一句，我没有更改默认设置配置的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:32:22.403

Django 书是使用 Django 1.0 或 1.1 编写的。CSRF 保护在 1.2 版中已更改，因此您需要显式插入令牌。

# powershell - powershell 调用命令

> ID：15587753
> 
> 赞同：0
> 
> 时间：2013-03-23T14:14:21.157
> 
> 标签：powershell, invoke-command

我正在尝试从服务器在 DC 上运行以下脚本，但我不断收到错误消息

```
Cannot bind parameter 'Identity'. Cannot convert value "1" to type "Microsoft.ActiveDirectory.Management.ADComputer". Error: 
"Invalid cast from 'System.Char' to 'Microsoft.ActiveDirectory.Management.ADComputer'."
    + CategoryInfo          : InvalidArgument: (:) [Get-ADComputer], ParameterBindingException
    + FullyQualifiedErrorId : CannotConvertArgumentNoMessage,Microsoft.ActiveDirectory.Management.Commands.GetADComputer
    + PSComputerName        : dc-test.com 
```

脚本代码：

```
$Credentials = New-Object System.Management.Automation.PSCredential -ArgumentList $UserName, $password
$list = gc c:\test.txt
#example of what i would contain $i= Workstation1-"ou=test,dc=test,dc=com"

foreach ($i in $list)
{
  $s=$i.Split('-')

  $ScriptBlock = {
    param ($s) 
    Import-Module ActiveDirectory

    get-adcomputer $s[0] | Move-ADObject -TargetPath $s[1]
  }

  invoke-command -computer dc.test.com -Argu $s -scriptblock $ScriptBlock -cred $Credentials 
}
} 
```

当我在 DC 上运行它时，它工作正常。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:58:44.783

这里的问题是您将数组作为参数传递给`-ArgumentList`参数。这不会像您期望的那样工作。不是将数组作为一个整体传递，而是将此数组的每个元素传递给给定的参数。只有一个，所以只使用传递数组的第一个元素。

要了解发生了什么，请尝试以下操作：

```
$script = {
    param ($array?)
    $array?[0]
}

$array = 'a1-b2-c3'.Split('-')

Invoke-Command -ScriptBlock $script -ArgumentList $array
Invoke-Command -ScriptBlock $script -ArgumentList (,$array) 
```

因此，您可以确保您的数组不会被破坏（使用一元逗号），或者只是更改代码并假设您将分别获得两个参数：

```
$ScriptBlock = {
    param ($comp, $target) 
    Import-Module ActiveDirectory
    get-adcomputer $comp | Move-ADObject -TargetPath $target
} 
```

顺便说一句：我怀疑当前的 TargetPath 可能存在问题 - 它将通过引号传递给 cmdlet，因此`Move-ADObject`可能会失败。

# jquery - 使用 parseJSON 和长度进行迭代

> ID：15587761
> 
> 赞同：0
> 
> 时间：2013-03-23T14:15:23.373
> 
> 标签：jquery, json

大家早，

我正在尝试迭代一个字符串并用 解析数据`$.parseJSON`，然后将其发送到一个选择，但由于某种原因，当启动时`for`什么都没有发生，没有错误或类似的事情......简单地说，脚本停止工作（作为退出，在 php 中）

json：

```
{
"response": {
    "chars": {
        "0": {
            "guid": "728166",
            "name": "Pepito",
            "race": "1",
            "class": "6",
            "gender": "0",
            "level": "80",
            "money": "1412915382",
            "apoints": "0",
            "hpoints": "200000",
            "tkills": "1731",
            "title": "0"
        },
        "1": {
            "guid": "778879",
            "name": "Chocolate",
            "race": "7",
            "class": "8",
            "gender": "1",
            "level": "88",
            "money": "0",
            "apoints": "0",
            "hpoints": "0",
            "tkills": "0",
            "title": "0"
        }
    }
} 
```

}

编码：

```
var json = *this is the top json*;    
var parsed = $.parseJSON(json);
for (var i=0; i<parsed.length; i++){
    console.log(parsed.response.chars[i].name);
} 
```

哪一部分是错的？据我所知，我认为没有错。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:21:36.907

尝试：

```
var json = *this is the top json*;    
var parsed = $.parseJSON(json);
for (var i = 0; i < parsed.response.chars.length; i++){
    console.log(parsed.response.chars[i].name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:21:52.780

您正在迭代一个对象而不是一个数组！

```
var json = *this is the top json*;    
var parsed = $.parseJSON(json);
for (var key in parsed.response.chars){
    console.log(key);
    console.log(parsed.response.chars[key].name);
} 
```

# javascript - 如何将旧的 Javascript 文件包含到新的 Wordpress 网站重新设计中

> ID：15587764
> 
> 赞同：1
> 
> 时间：2013-03-23T14:15:42.187
> 
> 标签：javascript, wordpress

我将重新设计现有网站并将使用 Wordpress。当前站点位于不同的 CMS 上。当前站点中有很多 Javascript 幻灯片类型的文件，重新创建所有文件需要很长时间。

在模板中添加 js 文件是否相当容易？您是否像往常一样添加它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:34:40.980

WordPress 提供了一种更好的（推荐的）`scripts`使用[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)函数添加的方法，例如，以下代码（粘贴到您的文件中）将从文件夹`functions.php`中添加一个`my_custom_script.js`文件`yourThemeDirectory/js/`

```
function add_my_script() {
    wp_enqueue_script(
        'custom-script',
        get_template_directory_uri() . '/js/my_custom_script.js',
        array( 'jquery' )
    );
}

add_action( 'wp_enqueue_scripts', 'add_my_script' ); 
```

在这个给定的示例中，第一个参数是`handle/name`您的脚本，第二个参数是您要添加的文件名的完整路径，第三个参数是脚本依赖项，在这种情况下，WordPress 需要`jQuery`在加载之前`my_custom_script.js`加载.

要加载`jQuery`简单的你可以使用`wp_enqueue_script( 'jquery' )`with `add_action`，因为在`WordPress`某些库中是默认注册的（包括 jQuery）。阅读文档以获取更多详细信息。

# c# - 实施搜索和突出显示 - 当突出显示缓慢时如何避免延迟？

> ID：15587767
> 
> 赞同：2
> 
> 时间：2013-03-23T14:15:52.890
> 
> 标签：c#, winforms, asynchronous, richtextbox

我有一个 RichText，并且想要实现高亮搜索，就像您在 VS 或 Chrome 中看到的那样。我得到了一个相当有效的实现：

```
private void _txtSearch_TextChanged(object sender, EventArgs e)
{
    new RichTextNode(richTextBox1).Highlight(_txtSearch.Text);
}

public void Highlight(string text)
{
    textBox.BeginUpdate();   // Extension, implemented with P/Invoke

    textBox.SelectionStart = 0;
    textBox.SelectionLength = textBox.Text.Length;
    textBox.SelectionBackColor = textBox.BackColor;

    int highlights = 0;

    if (!string.IsNullOrEmpty(text))
    {
    int pos = 0;

    string boxText = textBox.Text;
    while ((pos = boxText.IndexOf(text, pos, StringComparison.OrdinalIgnoreCase)) != -1 && (highlights++) < 500)
    {
        textBox.SelectionStart = pos;
        textBox.SelectionLength = text.Length;

        textBox.SelectionBackColor = Color.Yellow;
        pos += text.Length;
    }
    }

    textBox.EndUpdate();  // Extension, implemented with P/Invoke
} 
```

但是，我想支持大量文本 - 最多 2MB。当有很多文本时，每次这样的更新需要 250 毫秒。单次搜索没问题 - 但是，我的搜索是增量搜索，这意味着如果用户键入 10 个字母的作品，每个字母会在 250 毫秒后出现，这看起来很糟糕。

我使用计时器实现了等待：

```
private void _txtSearch_TextChanged(object sender, EventArgs e)
{
    performSearch.Stop();
    performSearch.Interval = 100; // Milliseconds
    performSearch.Start();
}

private void performSearch_Tick(object sender, EventArgs e)
{
    new RichTextNode(richTextBox1).Highlight(_txtSearch.Text);
    performSearch.Stop();
} 
```

这工作得很好。但是，当文本很短时，它会减慢增量搜索，这是次优的。我想我可以数数字符，但这感觉就像一个黑客......

理想情况下，我不想强​​调何时会有额外的击键：

```
private void _txtSearch_TextChanged(object sender, EventArgs e)
{
    if (!_txtSearch.Magic_are_additional_TextChanged_events_already_queued())
        new RichTextNode(richTextBox1).Highlight(_txtSearch.Text);
} 
```

有没有办法做到这一点？或者计时器解决方案是我所希望的最好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:56:54.507

我最终使用了问题中描述的计时器解决方案，延迟为 1ms。

# javascript - 在 Backbone.js 中处理现有数据的最佳方法是什么

> ID：15587768
> 
> 赞同：1
> 
> 时间：2013-03-23T14:15:55.000
> 
> 标签：javascript, backbone.js

我正在学习 Backbone.js。我喜欢我所看到的，但对我来说有些不清楚......处理页面上已经存在的数据的最佳方法是什么。最好是遍历所有这些并为每个创建一个模型。

```
$('element').each(function() {
     var model = new Model();
     collection.add(model);
}); 
```

或者我应该加载页面，然后从那里获取数据并处理它。

或者，有没有更好的方法来做到这一点，我错过了什么？

**编辑**

如果服务器端我循环遍历我的数据以使用页面引导它

*服务器端*

```
<div>
    <p>{{ model.someInformation }}</p>
</div> 
```

我应该直接实例化一个新模型吗？

```
<script>
    Backbone.Model.extend({
        var model = new Model();
    });
</script> 
```

我在引导程序[http://backbonejs.org/#FAQ-bootstrap](http://backbonejs.org/#FAQ-bootstrap)上阅读了有关集合重置的信息，但似乎有些东西我没有得到...我想我需要模型来添加到集合中，如果我没有的话我的模型在某个地方实例化`reset`了集合的用途......我在这里有点迷失了。

**编辑 2**

我已经能够使我的应用程序工作在执行以下操作：

```
$('#active-cards .card').each(function(i) {
     window['card' + i] = new Card(),
         window['cardView' + i] = new CardView({ el: $(this) });
         id = $(this).attr('id'),
         name = $(this).find('input[name="name"]').val(),
         client =  $(this).find('input[name="client"]').val(),
         field =  $(this).find('input[name="field"]').val();
     window['card' + i].set({ id: id, name: name, client: client, field: field });
     cards.add(window['card' + i]);
}); 
```

在此之后我可以通过做找到模型

```
var id = this.$el.attr('id');
var card = cards.get(id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:57:24.513

不，您通常不会那样做。看起来您正在寻找在页面加载时填充集合。主干文档对此有一[节](http://backbonejs.org/#FAQ-bootstrap)，称为引导。

**编辑以回答评论**
这可能是一个奇怪的概念，但您不需要在添加到集合之前实例化模型。根据重置文档：

> 使用 reset 将集合替换为新的模型列表（或属性哈希）

因此，您可以使用 Collections 指定[`model`属性](http://backbonejs.org/#Collection-model)，然后简单地添加一个对象字面量数组。例如：

```
UserCollection = Backbone.Collection.extend({
   model: User
});
myUserCollection = new UserCollection();
myUserCollection.reset([
   {
      name: "Bob",
      age: 25
   }, {
      name: "Foo",
      age: 26
   }
]); 
```

`myUserCollection`现在将包含 2 个`User`模型。

**第二次编辑**
我仍然认为您不太了解这个概念。这就是我认为你想要实现的目标：http: [//jsfiddle.net/67E6t/](http://jsfiddle.net/67E6t/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:55:40.877

因此，如果您想将初始模型引导到集合中，您希望直接将初始模型从服务器端放入集合中。

```
<script>
  var myCol = new Backbone.Collection;
  accounts.reset(models_prepared_in_server>); //you utilize your server side to replace the models_prepared_in_server with your actual data.
</script> 
```

因此，当页面传输到客户端时，您的代码可能如下所示（例如）：

```
<script>
  var myCol = new Backbone.Collection;
  myCol.reset([
     { name: model1,
       some_prop: prop_value;
     },
     { name: model2,
       some_prop: prop_value2;
     }
  ]);
</script> 
```

因此，在您的浏览器执行脚本后，其中`myCol`会充满您的模型。

# dynamic - 如何生成具有动态列数（和一组固定行）的表？

> ID：15587774
> 
> 赞同：0
> 
> 时间：2013-03-23T14:16:43.193
> 
> 标签：dynamic, abap

我在工资单方面进行了一些计算，每个月/年都会产生大量数据和两个日期：开始日期 (mm/yyyy) 和结束日期 (mm/yyyy)。

我想要什么：生成一个内部表，该表的列数与 begda-year 到 endda-year 一样多（以年为单位）。例如，我的 begda 是 05/2010，endda 是 03/2013，那么我需要一个这样的表，其中包含 2010、2011、2012、2013 列和每个月的行：

![从 05/2010 到 03/2013 的表格](../Images/9cdda20a5ae2c6d733e8beb1c782d58a.png)

对我来说困难的部分是，表格列（或 endda 和 begda）总是在变化，我怎么能意识到这一点？创建某种动态表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:12:42.043

检查[创建数据句柄](https://help.sap.com/http.svc/rc/abapdocu_740_index_htm/7.40/en-US/abapcreate_data_handle.htm)文档。我不建议使用`cl_alv_table_create=>create_dynamic_table`，因为它的内部限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T08:47:03.543

一般要工作多少年？与其根据行来考虑它，不如记住，表中的行数与您附加到它的行数一样多。

您可以通过任何方式创建动态结构，通过 create_data 或 cl_alv_table_create （只要您没有几千列就可以正常工作）。

所以做伪代码并帮助你一点：

```
Step 1) Create a structure which contains a column for each year
Step 2) Pass the structure to CL_ALV_TABLE_CREATE=>CREATE_DYNAMIC_TABLE and get the table
        with the unique structure
Step 3) Append 12 rows to the table, 1 row representing each month of the year
Step 4) When needing to read the data, READ TABLE <table> WITH TABLE KEY monthname = 'MONTHNAME' INTO <structure>.
Step 5) ASSIGN <year>->* OF STRUCTURE <structure> TO <data>.
Step 6) <data> = whatever. 
```

我不记得如何使用运行时创建的数据，但在谷歌上快速搜索可以让你知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T17:29:19.267

检查此代码。希望能帮助到你：

```
report  zdynamiccol.

type-pools: slis.

data: gt_fieldcat type slis_t_fieldcat_alv with header line,

gs_layout type slis_layout_alv,
g_repid type sy-repid.

types: begin of ty_years,
  zyear(4) type c,
end of ty_years.

data it_years type table of ty_years. " The structure that will hold the years to create the dynamic columns

types: begin of st_output, " Sample data
  zmonth type string,
  zyear(4) type c,
  zvalue type i,
  check type c,
end of st_output,
gt_tbl_data type standard table of st_output.

data: gt_output type standard table of st_output ,
      gt_output2 type standard table of st_output.

data:
r_dyn_table type ref to data,
t_fieldcat1 type lvc_t_fcat,
wa_fieldcat1 type lvc_s_fcat.

data:
t_fieldcat2 type slis_t_fieldcat_alv,
wa_fieldcat2 like line of t_fieldcat2.

field-symbols:
<t_dyn_table> type standard table,
<wa_dyn_table> type any,
<w_field> type any,
<fs_st_output> type st_output,
<wa_years> type ty_years.

initialization.
  g_repid = sy-repid.

select-options s_dats for sy-datum.

start-of-selection.

  perform get_years. " Make the year column structure

  perform create_catalog. " Make the field catalog with the columns

  perform get_data. " Sample data

  perform process_data. " Fill table

  perform build_alv. " Create ALV

form get_years.

  refresh: it_years.

  data zline like line of it_years.
  data year type i.

  year = s_dats-low(4).
  while year <= s_dats-high(4).
    clear zline.
    zline-zyear = year.
    append zline to it_years.
    add 1 to year.
  endwhile.

endform.

form create_catalog.
  data: cont type i.

  refresh: t_fieldcat1, t_fieldcat2.
  clear: wa_fieldcat1, wa_fieldcat2.
  cont = 1.

  wa_fieldcat1-fieldname = 'ZMONTH'.
  wa_fieldcat1-col_pos = cont.
  wa_fieldcat1-coltext = 'MONTH'.
  wa_fieldcat1-key = 'X'.
  wa_fieldcat1-seltext = wa_fieldcat1-coltext.

  append wa_fieldcat1 to t_fieldcat1.

  wa_fieldcat2-fieldname = 'ZMONTH'.
  wa_fieldcat2-ref_fieldname = 'MONTH'.
  wa_fieldcat2-seltext_l  = 'Month'.
  wa_fieldcat2-seltext_m  = 'Month'.
  wa_fieldcat2-seltext_s  = 'Month'.
  wa_fieldcat2-key = 'X' .
  wa_fieldcat2-outputlen = 10.
  wa_fieldcat2-col_pos = cont.
  append wa_fieldcat2 to t_fieldcat2.

  loop at it_years assigning <wa_years>.
    at new zyear.
      clear: wa_fieldcat1, wa_fieldcat2.

      wa_fieldcat1-fieldname = <wa_years>-zyear.
      wa_fieldcat1-inttype = 'I'.
      wa_fieldcat1-col_pos = cont.
      wa_fieldcat1-coltext = <wa_years>-zyear.
      wa_fieldcat1-seltext = wa_fieldcat1-coltext.

      append wa_fieldcat1 to t_fieldcat1.

      wa_fieldcat2-fieldname = wa_fieldcat1-fieldname.
      wa_fieldcat2-seltext_l  = wa_fieldcat1-seltext.
      wa_fieldcat2-col_pos = cont.
      append wa_fieldcat2 to t_fieldcat2.

      add 1 to cont.
    endat.
  endloop.

  call method cl_alv_table_create=>create_dynamic_table
    exporting
      it_fieldcatalog           = t_fieldcat1
    importing
      ep_table                  = r_dyn_table
    exceptions
      generate_subpool_dir_full = 1
      others                    = 2.

  assign r_dyn_table->* to <t_dyn_table>.
endform.

form get_data.
  data zrows type i value 10.
  data month type i.
  data line like line of gt_output.
  field-symbols <wa_gt_output> type st_output.

  clear line.
  line-zmonth = 'January'.
  line-zyear = 2010.
  line-zvalue = 100.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'February'.
  line-zyear = 2010.
  line-zvalue = 150.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'March'.
  line-zyear = 2010.
  line-zvalue = 160.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'April'.
  line-zyear = 2010.
  line-zvalue = 240.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'April'.
  line-zyear = 2013.
  line-zvalue = 233.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'January'.
  line-zyear = 2012.
  line-zvalue = 151.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'May'.
  line-zyear = 2012.
  line-zvalue = 101.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'June'.
  line-zyear = 2012.
  line-zvalue = 762.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'September'.
  line-zyear = 2012.
  line-zvalue = 666.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'October'.
  line-zyear = 2012.
  line-zvalue = 500.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'November'.
  line-zyear = 2012.
  line-zvalue = 101.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'December'.
  line-zyear = 2013.
  line-zvalue = 829.
  append line to gt_output.
  append line to gt_output2.

  clear line.
  line-zmonth = 'December'. " Sum to the same month
  line-zyear = 2013.
  line-zvalue = 1.
  append line to gt_output.
  append line to gt_output2.
endform.

form process_data.

  field-symbols <fs_data> type st_output.
  field-symbols <fs_check> type st_output.
  data lv_index type sy-tabix.

  loop at gt_output assigning <fs_st_output>.

    check <fs_st_output>-check eq space.

    append initial line to <t_dyn_table> assigning <wa_dyn_table>.

    assign component 'ZMONTH' of structure <wa_dyn_table> to <w_field>.
    <w_field> = <fs_st_output>-zmonth.

    loop at gt_output2 assigning <fs_data> where zmonth = <fs_st_output>-zmonth and check eq space.
      lv_index = sy-tabix.

      check <wa_dyn_table> is assigned.
      assign component <fs_data>-zyear of structure <wa_dyn_table> to <w_field>.
      <w_field> = <w_field> + <fs_data>-zvalue.

      read table gt_output assigning <fs_check> index lv_index. " Check so the position will never be processed later
      <fs_check>-check = 'X'.
    endloop.

  endloop.

endform.

form build_alv.
  data: x_layout  type slis_layout_alv,
        t_fieldcat type slis_t_fieldcat_alv.

  refresh t_fieldcat.
  clear x_layout.

  g_repid = sy-repid.

  call function 'REUSE_ALV_GRID_DISPLAY'
      exporting
        i_callback_program       = g_repid
        is_layout                = gs_layout
        it_fieldcat              = t_fieldcat2
          tables
        t_outtab = <t_dyn_table>
    exceptions program_error = 1
    others = 2 .
  if sy-subrc <> 0.
    message id sy-msgid type sy-msgty number sy-msgno with sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
  endif.
endform. 
```

# delphi - Delphi XE3蓝牙怎么样？

> ID：15587777
> 
> 赞同：0
> 
> 时间：2013-03-23T14:17:17.947
> 
> 标签：delphi, bluetooth, vcl, delphi-xe3

嘿，伙计们，我有一个问题，我一直在寻找一种让 Delphi 连接到蓝牙设备的方法，但没有运气，我找到了“无线通信库 VCL 版”组件，但它们不是免费的，并且演示不适用于我很好，所以我想知道我可能会使用其他解决方案吗？我需要能够通过蓝牙向设备发送命令从中获取数据等。所有标准蓝牙功能

IDE：德尔福 XE3

我对所有想法持开放态度，它可以是 DLL 库或 .pas

# machine-learning - 期望最大化 - 抛硬币示例中的观察计数

> ID：15587779
> 
> 赞同：0
> 
> 时间：2013-03-23T14:17:22.367
> 
> 标签：machine-learning, statistics, nlp, expectation-maximization

我可以看到许多与期望最大化算法相关的示例。

很少有链接

[期望最大化抛硬币示例](https://stackoverflow.com/questions/15513792/expectation-maximization-coin-toss-examples)
[https://math.stackexchange.com/questions/81004/how-does-expectation-maximization-work-in-coin-flipping-problem](https://math.stackexchange.com/questions/81004/how-does-expectation-maximization-work-in-coin-flipping-problem)
[https://math.stackexchange.com/questions/25111/如何实现期望最大化工作](https://math.stackexchange.com/questions/25111/how-does-expectation-maximization-work)
[http://www.nature.com/nbt/journal/v26/n8/full/nbt1406.html?pagewanted=all](http://www.nature.com/nbt/journal/v26/n8/full/nbt1406.html?pagewanted=all)

在所有情况下，我们都有一组隐藏的来源（通常是硬币）和一组观察结果（通常是一组抛硬币）。

例如
SRC = { Coin-1, Coin-2 }
OBSERVATIONS ARE
{ HTH, SRC1 },
{ THH, SRC2 },
{ HHH, SRC3 },
{ HTH, SRC4 },
{ HTT, SRC5 }
这里我们选择一个硬币（ unobserved,SRC1) 并折腾 3 次（observed, HTH）。

我的问题是，如果我以抛硬币的形式进行观察，例如
{ H, SRC1 },
{ T, SRC2 },
{ H, SRC3 },
{ H, SRC4 },
{ H, SRC5 }
EM 会为此工作吗案子 ？
如果是这样，结果会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:04:04.550

是的。有可能的。我在下面包含一个推导（但这并不适合stackoverflow）：

![在此处输入图像描述](../Images/283bb6a20e83f0a0ea925b1dcb6db6ac.png) ![在此处输入图像描述](../Images/7911813cf6a754ae320f391e91440b8c.png)

# c++ - C ++，将包含二进制文件的字符串存储到文本文件中

> ID：15587781
> 
> 赞同：2
> 
> 时间：2013-03-23T14:17:27.953
> 
> 标签：c++, binaryfiles, fstream, ofstream, huffman-code

我目前正在尝试存储一个包含二进制代码的字符串。

当我尝试将此字符串写入文本文件时，它只是以字符串格式存储每个 0 和 1 字符，而不是按照我的要求将其存储为 8 位块。这会导致文件比预期的大，考虑到它使用 8 位来存储每个 0 和 1。

我应该将字符串写入 .bin 文件而不是 .txt 文件吗？如果是这样，我将如何去做，如果可能的话，一个带有一些工作代码的例子。

感谢您提前提供任何建议。

```
 string encoded = "01010101";    
   ofstream myfile;   
   myfile.open ("encoded");   
   myfile <<  encoded;   
   myfile.close(); 
```

澄清：我有一个由 1 和 0 组成的字符串（由霍夫曼树产生），我希望将这个字符串分成 8 位块，我希望将所述缝隙表示的每个字符写入压缩文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:21:59.647

我只是猜测，因为您没有显示任何代码，但似乎您有一个包含*字符* `'1'`和`'0'`. 如果你把它写到一个文件中，它当然会是一个文本。您需要先将其转换为整数。

有关将任意基数的字符串转换为整数的函数，请参见例如[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)或。[`std::strtol`](http://en.cppreference.com/w/cpp/string/byte/strtol)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:35:44.857

[`std::bitset`](http://en.cppreference.com/w/cpp/utility/bitset)可以将字符串转换为整数。

```
std::bitset<8> bits("01010101");
cout << bits.to_ullong(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:22:38.920

> 我应该将字符串写入 .bin 文件而不是 .txt 文件吗？

如果你愿意的话……但这也没有什么不同。`ofstream`不关心文件名。只需将字符串转换为字节 ( `uint8_t`) 并将该字节写入文件：

```
string s = "10101010";
uint8_t byte = strtoul(s.c_str(), NULL, 2);
myfile << byte; 
```

# java - 计算不同的单词 V2

> ID：15587783
> 
> 赞同：0
> 
> 时间：2013-03-23T14:17:37.273
> 
> 标签：java, distinct, bufferedreader, infinite-loop

我之前问过这个问题（[Counting distinct words with Threads](https://stackoverflow.com/questions/15292350/counting-distinct-words)）并使代码更合适。如第一个问题所述，我需要计算文件中的不同单词。

调试表明我所有的单词都正确存储和排序，但现在的问题是测试类中的无限“while”循环在读取所有单词后继续进行（调试确实有助于找出一些要点。 ..)。我现在正在一个不超过 10 个字的小文件上测试代码。

DataSet 类进行了大部分修改。

我需要一些建议如何摆脱困境。

测试看起来像这样：

```
package test;

import java.io.File;
import java.io.IOException;

import junit.framework.Assert;
import junit.framework.TestCase;
import main.DataSet;
import main.WordReader;

public class Test extends TestCase
{

   public void test2() throws IOException
   {
      File words = new File("resources" + File.separator + "test2.txt");

      if (!words.exists())
      {
         System.out.println("File [" + words.getAbsolutePath()
               + "] does not exist");
         Assert.fail();
      }

      WordReader wr = new WordReader(words);
      DataSet ds = new DataSet();

      String nextWord = wr.readNext();
      // This is the loop
      while (nextWord != "" && nextWord != null)
      {
         if (!ds.member(nextWord))
         {
            ds.insert(nextWord);
         }
         nextWord = wr.readNext();
      }
      wr.close();
       System.out.println(ds.toString());
       System.out.println(words.toString() + " contains " + ds.getLength()
       + " distinct words");

   }

} 
```

这是我更新的 DataSet 类，尤其是 member() 方法，我仍然不确定，因为在某些时候我曾经得到一个 NullPointerExeption （不知道为什么......）：

```
package main;

import sort.Sort;

public class DataSet
{

   private String[] data;
   private static final int DEFAULT_VALUE = 200;
   private int nextIndex;
   private Sort bubble;

   public DataSet(int initialCapacity)
   {
      data = new String[initialCapacity];
      nextIndex = 0;
      bubble = new Sort();
   }

   public DataSet()
   {
      this(DEFAULT_VALUE);
      nextIndex = 0;
      bubble = new Sort();
   }

   public void insert(String value)
   {
      if (nextIndex < data.length)
      {
         data[nextIndex] = value;
         nextIndex++;
         bubble.bubble_sort(data, nextIndex);
      }
      else
      {
         expandCapacity();
         insert(value);
      }
   }

   public int getLength()
   {
      return nextIndex + 1;
   }

   public boolean member(String value)
   {
      for (int i = 0; i < data.length; i++)
      {

         if (data[i] != null && nextIndex != 10)
         {
            if (data[i].equals(value))
               return true;
         }
      }
      return false;
   }

   private void expandCapacity()
   {
      String[] larger = new String[data.length * 2];
      for (int i = 0; i < data.length; i++)
      {
         data = larger;
      }
   }
} 
```

WordReader 类没有太大变化。ArrayList 被替换为简单数组，存储方式也进行了修改：

```
package main;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;

public class WordReader
{

   private File file;

   private String[] words;

   private int nextFreeIndex;

   private BufferedReader in;

   private int DEFAULT_SIZE = 200;

   private String word;

   public WordReader(File file) throws IOException
   {
      words = new String[DEFAULT_SIZE];
      in = new BufferedReader(new FileReader(file));
      nextFreeIndex = 0;
   }

   public void expand()
   {
      String[] newArray = new String[words.length * 2];
      // System.arraycopy(words, 0, newArray, 0, words.length);
      for (int i = 0; i < words.length; i++)
         newArray[i] = words[i];
      words = newArray;
   }

   public void read() throws IOException
   {

   }

   public String readNext() throws IOException
   {
      char nextCharacter = (char) in.read();

      while (in.ready())
      {
         while (isWhiteSpace(nextCharacter) || !isCharacter(nextCharacter))
         {
            // word = "";
            nextCharacter = (char) in.read();

            if (!in.ready())
            {
               break;
            }
         }

         word = "";
         while (isCharacter(nextCharacter))
         {
            word += nextCharacter;
            nextCharacter = (char) in.read();
         }
         storeWord(word);

         return word;
      }

      return word;
   }

   private void storeWord(String word)
   {
      if (nextFreeIndex < words.length)
      {
         words[nextFreeIndex] = word;
         nextFreeIndex++;
      }
      else
      {
         expand();
         storeWord(word);
      }

   }

   private boolean isWhiteSpace(char next)
   {
      if ((next == ' ') || (next == '\t') || (next == '\n'))
      {
         return true;
      }
      return false;
   }

   private boolean isCharacter(char next)
   {
      if ((next >= 'a') && (next <= 'z'))
      {
         return true;
      }
      if ((next >= 'A') && (next <= 'Z'))
      {
         return true;
      }
      return false;
   }

   public boolean fileExists()
   {
      return file.exists();
   }

   public boolean fileReadable()
   {
      return file.canRead();
   }

   public Object wordsLength()
   {
      return words.length;
   }

   public void close() throws IOException
   {
      in.close();
   }

   public String[] getWords()
   {
      return words;
   }

} 
```

并且为字符串更改了冒泡排序类：

```
package sort;

public class Sort
{
   public void bubble_sort(String a[], int length)
   {
      for (int j = 0; j < length; j++)
      {
         for (int i = j + 1; i < length; i++)
         {
            if (a[i].compareTo(a[j]) < 0)
            {
               String t = a[j];
               a[j] = a[i];
               a[i] = t;
            }
         }
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:00:21.477

我想实际阻塞的方法是`WordReader.readNext()`. 我的建议是你使用`Scanner`而不是`BufferedReader`，它更适合将文件解析为单词。

您的`readNext()`方法可以这样重做（其中 scan 是扫描仪）：

```
public String readNext() {
    if (scan.hasNext()) {
        String word = scan.next();
        if (!word.matches("[A-Za-z]+"))
            word = "";
        storeWord(word);
        return word;
    }
    return null;
} 
```

这将具有与您的代码相同的功能（不使用`isCharacter()`或`isWhitespace()`- 正则表达式（内部`matches()`）检查一个单词是否仅包含字符。该`isWhitespace()`功能是内置在`next()`分隔单词的方法中。添加的功能是它返回 null 时有文件中没有更多的单词。

您必须更改 Test 类中的 while-loop 才能正常工作，否则您将得到一个`NullPointerException`- 只需切换循环定义中的两个条件（之前总是检查 null ，否则第一个会给出 NPE 和空检查没用）。

要制作扫描仪，您可以使用 a`BufferedReader`作为参数或`File`直接使用，如下所示：

```
Scanner scan = new Scanner(file); 
```

# asp.net - Windows Azure - NetworkInformationException (0x80004005)：访问被拒绝 - HttpWebRequest

> ID：15587789
> 
> 赞同：4
> 
> 时间：2013-03-23T14:17:56.883
> 
> 标签：asp.net, azure, permissions

GetResponse 在我的本地计算机上运行良好，但在部署到 Windows Azure 时，我收到以下异常。我的 ASP.NET 网站运行一个我作为新进程创建的 exe，它是 exe 中的代码遇到下面列出的异常。谁能建议我可以查看的可能的权限设置来解决这个问题？

```
HttpWebRequest request = WebRequest.Create(requestUrl) as HttpWebRequest;
request.UserAgent = _userAgent;
request.Timeout = 50000;
HttpWebResponse response = request.GetResponse() as HttpWebResponse; 
```

System.Net.NetworkInformation.NetworkInformationException (0x80004005)：在 System.Net.NetworkInformation.SystemIPGlobalProperties.get_FixedInfo() 在 System.Net.NetworkInformation.SystemIPGlobalProperties.GetFixedInfo() 的访问被拒绝 System.Net.NetworkInformation.SystemIPGlobalProperties.get_HostName()在 System.Net.NclUtilities.GuessWhetherHostIsLoopback(String host) 在 System.Net.ServicePoint.get_ConnectionLimit() 在 System.Net.ConnectionGroup..ctor(ServicePoint servicePoint, String connName) 在 System.Net.ServicePoint.SubmitRequest(HttpWebRequest 请求，字符串 connName) 在 System.Net.HttpWebRequest.SubmitRequest(ServicePoint servicePoint) 在 System.Net.HttpWebRequest.GetResponse()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T11:37:41.590

需要更多信息，但我的第一个想法是您是：

*   尝试将套接字绑定到特权端口（端口 <= 1024）
*   尝试将套接字绑定到您在该机器上没有的 IP
*   您的本地网站运行该代码的用户比 Windows Azure 用户（例如 IIS AppPool？）运行它的权限更高

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T03:31:37.710

尝试使用特定凭据从 asp.net 启动进程。即使用本地用户凭据。azure 可能会阻止未经身份验证的进程访问 Internet。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T20:37:55.170

DirectoryService COM 无法创建身份验证对象。查看 [http://blogs.msdn.com/b/distributedservices/archive/2009/11/06/a-com-server-application-may-stop-working-on-windows-server-2008.aspx](http://blogs.msdn.com/b/distributedservices/archive/2009/11/06/a-com-server-application-may-stop-working-on-windows-server-2008.aspx)

# python - sqlalchemy 和双外连接

> ID：15587791
> 
> 赞同：7
> 
> 时间：2013-03-23T14:18:09.683
> 
> 标签：python, sqlalchemy, outer-join

我需要对以下 2 个表 A 和 B 进行双重外连接，以使用 SQLAlchemy ORM 或 SQL 表达式获得呈现的结果。

表 B 应该被外部连接两次，以获得相同的 A 记录的连接 2 个结果集（由 c_id 区分）。外连接用于获取在第一个 (c_id = 66) 或第二个 (c_id = 70) 外连接中缺少 B 结果的 NULL。

一张桌子：

```
id
--
1
2
3
4 
```

B表：

```
id | a_id | c_id
---+------+------
1  |  1   | 66
2  |  2   | 66
3  |  3   | 70
4  |  4   | 66
5  |  4   | 70 
```

查询结果应该是：

```
a_id | b1_id (66) | b2_id (70)
-----+------------+-----------
 1   |  1         |  NULL
 2   |  2         |  NULL
 3   |  NULL      |  3
 4   |  4         |  5 
```

我到了正确的原始 SQL 查询如下所示的地步：

```
SELECT 
  A.id AS a_id,
  B_1.id AS b1_id, 
  B_2.id AS b2_id,  
FROM 
  A
LEFT OUTER JOIN   B AS B_1  ON A.id = B_1.a_id AND B_1.c_id = 66
LEFT OUTER JOIN   B AS B_2  ON A.id = B_2.a_id AND B_2.c_id = 70
WHERE
  B_1.id is not NULL or 
  B_2.id is not NULL; 
```

现在，您知道如何在 SA ORM 或 SA SQL 表达式中对此进行编码吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T06:08:42.510

自己找到了解决方案：

```
b1 = aliased(B)
b2 = aliased(B)
q = session.query(A.id, b1.id.label("b1_id"), b1.id.label("b2_id"))
q = q.outerjoin(b1, sqlalchemy.and_(A.id == b1.a_id, b1.c_id == 66))
q = q.outerjoin(b2, sqlalchemy.and_(A.id == b2.a_id, b2.c_id == 70))
q = q.filter(sqlalchemy.or_(b1.id != None, b2.id != None)) 
```

# java - 将行插入 MySQL 数据库？

> ID：15587794
> 
> 赞同：0
> 
> 时间：2013-03-23T14:18:46.750
> 
> 标签：java, sql

编码：

```
sql = "INSERT INTO `admin` (`id`,`username`,`password`,`access`) VALUES ('"+(numIds+1)+"','"+addedUsername+"','"+addedPassword+"','"+addedAccess+"');";

Statement statementAdd = (Statement) DBconnection.createStatement();
result = statementAdd.executeUpdate(sql); 
```

错误：

```
MySQLLogin.java:133: error: incompatible types
            result = statementAdd.executeUpdate(sql);
                                               ^
required: ResultSet
found:    int
1 error 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T14:20:18.673

ExecuteUpdate 返回整数，您似乎将其分配给结果集

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T15:29:31.667

为了这：

```
'"+(numIds+1)+"' 
```

您要么尝试对字符串进行数学运算，要么将字符串插入到数字字段中。鉴于您的错误信息，我怀疑是后者。单引号使它成为一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T16:13:59.673

`executeUpdate`返回受影响的行数（在您的情况下，它将返回插入的行数。但是您正在尝试将返回分配给`int`对象`ResultSet`。

所以只需将其更改为：

```
int insertedRows = statementAdd.executeUpdate(sql); 
```

有关更多信息，请参阅[类的](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)[javadocs 。`Statement`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)

# html - 关于流浪标签的投诉

> ID：15587795
> 
> 赞同：0
> 
> 时间：2013-03-23T14:18:48.293
> 
> 标签：html

W3C 验证器和我的 Firefox 源代码浏览器都在抱怨停留`<head>`标签。页面本身显示正常。下面是我的 php 脚本生成的部分 html 代码。

```
<!DOCTYPE HTML>
<html>
<!--scripts/head.php-->
<!--
Copyright (c) 2012 Studiopatty
-->
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
    <title>Studio Patty: Kapster en Buikdanseres - Kapster</title>
    <meta name="keywords" content="Patty studiopatty dansschool buikdansschool kapster buikdansen buikdanstheater oervrouwen Rozenburg Voorne-putten">
    <link rel="stylesheet" href="css/fonts.css?20121212" type="text/css"/>
    <link class="cssfx" rel="stylesheet" href="css/table.css?20121212" type="text/css"/>
    <link class="cssfx" rel="stylesheet" href="css/main.css?20121212" type="text/css"/>
    <script src="scripts/cssfx.min.js"></script>
    <link rel="shortcut icon" href="images/tattoo.ico">

</head>
<body>
<!--scripts/navigation.php-->
<div id="sidebar">
<a class="logo" href="index.php"></a>

<ul class="nav">
    <li><a class="nav" id="upper" title="Over mijn kapsalon" href="kapster.php">Kapster</a></li>
    <li><a class="nav" title="Algemeen" href="buikdanseres.php">Buikdanseres</a></li>
    <li><a class="nav" title="Mijn ervaring met buikdansen" href="over.php">Over Patty</a></li>
    <li><a class="nav" title="Informatie over lessen die ik geef" href="lessen.php">Lessen</a></li>
    <li><a class="nav" title="Het buikdantheater" href="buikdanstheater.php">Buikdanstheater</a></li>
    <li><a class="nav" title="Agenda" href="evenementen.php">Evenementen</a></li>
    <li><a class="nav" title="Videos van projecten, optredens en lessen" href="media.php">Beeld en geluid</a></li>
    <li><a class="nav" title="Contact" href="contact.php">Contact</a></li>
    <li><a class="nav" id="down" title="Links naar andere webpagina's" href="links.php">Vrienden</a></li>
</ul>
<footer><p class="center footer"><a href="copyright.php">&copy Copyright 2012 - Patty Willemsen<br>
and others</a></p></footer>
</div><!--scripts/foto.php-->
<script>
var pic_array=new Array("foto/Patty.jpg", "foto/IMG_5635.jpg", "foto/DSCN0889.jpg", "foto/Buikdanslesgroep_073.JPG", "foto/385079_270974476272094_100000786300365_743607_1443696752_n.jpg", "foto/863234958_5_nK1e.jpg", "foto/374577_270974419605433_100000786300365_743605_1359936845_n.jpg");
var num_pics=7;
var current_pic=0;
var picTimer;

function timePictures()
{ picTimer=setTimeout("nextPicture()", 10000); }

function nextPicture()
{ current_pic++; if(current_pic>=num_pics) current_pic=0;
document.getElementById("NewPic").src=pic_array[current_pic]; }

</script>

<div class="slideshow">
<img id="NewPic" src="foto/Patty.jpg" alt="test" onload="timePictures();"/>
</div>

<div id="text">
<div class="banner"></div>

<!--content/kapster_text.php-->
<h2>Heren-en Dameskapster<br>"Patty"</h2>

<table class="nice" border="0">
<tr><th rowspan="3">Werktijden:</th><td class="middle">maandag </td><td>13.00 - 20.00 uur</td></tr>
<tr>                                                <td class="middle">dinsdag </td><td>09.30 - 16.30 uur</td></tr>
<tr>                                                <td class="middle">donderdag </td><td>09.30 - 16.30 uur</td></tr>
</table>

<p class="nice"><b>Behandeling op afspraak.</b> <br>
Elzenlaan 15 <br> 
3181 BG Rozenburg <br>
0181-213372 / 06-12896620 </p>

<p class="center">
Graag wil ik je uitnodigen voor prachtig haar
</p>
<div class="banner"></div>
</div> <!--div id="text"-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:35:17.843

`<head>`我用谷歌搜索了实际的网页，问题是标签前第二条评论之前的单个不可见字符。

```
<!--scripts/head.php-->
 <!--
^
HERE IS AN INVALID CHARACTER

Copyright (c) 2012 Studiopatty
--> 
```

该字符导致验证器认为`<head>`已经隐式启动并抱怨实际`<head>`标签。

如果您使用 ctrl 或 alt 等修饰符按空格键，某些编辑器允许您添加不可见的绑定字符，这很容易导致这种情况。

# windows - 无法在 xampp 服务器上创建应用程序

> ID：15587802
> 
> 赞同：0
> 
> 时间：2013-03-23T14:20:06.023
> 
> 标签：windows, yii, xampp

嗨朋友我是 yii 的新手，我已经下载了 yii 文件夹并将其放入

> C:\xampp\htdocs

此目录，当我尝试使用以下命令创建应用程序时

> C:/xampp/htdocs/yii/framework/yiic webapp C:/xampp/htdocs/blog

` 它正在抛出错误，任何人都可以告诉我我在哪里做错了吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:24:36.333

按照这个步骤。

右键单击“我的电脑”进入“高级”选项卡下的“系统属性”，单击“系统变量”下的“环境变量”，找到名为“PATH”的变量，然后单击“编辑”按钮

在“变量值”中，在 php.exe 路径后面加上一个分号，如下所示；C:\xampp\php

cd c:\xampp\htdocs\yii\framework

yiic webapp ..\newapp

# amazon-ec2 - Amazon EC2 API 工具和 AMI 工具之间的区别？

> ID：15587806
> 
> 赞同：4
> 
> 时间：2013-03-23T14:20:26.150
> 
> 标签：amazon-ec2

[此处](http://aws.amazon.com/developertools/Amazon-EC2?browse=1)的开发人员工具页面列出了 Amazon EC2 的两组工具

1.  亚马逊 EC2 API 工具
2.  亚马逊 EC2 AMI 工具

两组工具有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T14:23:37.263

> API 工具用作 Amazon EC2 Web 服务的客户端接口。使用这些工具注册和启动实例、操作安全组等
> 
> Amazon EC2 AMI 工具是命令行实用程序，可帮助捆绑 Amazon 系统映像 (AMI)、从现有机器或安装的卷创建 AMI，并将捆绑的 AMI 上传到 Amazon S3。

[根据Developer Tools](http://aws.amazon.com/developertools/Amazon-EC2?browse=1)中显示的定义。

因此，如果您想管理实例，请使用 API 工具；如果您想构建和上传 AMI（亚马逊系统映像），请使用 AMI 工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T06:11:43.343

以下是亚马逊文档中的内容：

Amazon EC2 命令行界面工具（也称为 CLI 工具）封装了 Amazon EC2 API 操作。这些工具是用 Java 编写的，包括适用于 Windows 和 Linux/UNIX/Mac OSX 的 shell 脚本。

Note 或者，您可以使用 AWS 命令​​行界面 (AWS CLI)，它为广泛的 AWS 产品集（包括 Amazon EC2）提供命令。要开始使用 AWS CLI，请参阅 AWS 命令​​行界面用户指南。有关 Amazon EC2 的 AWS CLI 命令的更多信息，请参阅 AWS 命令​​行界面参考中的 ec2。在您可以使用 Amazon EC2 CLI 工具之前，您需要下载它们并将它们配置为使用您的 AWS 账户。您可以在自己的计算机或 Amazon EC2 实例上设置这些工具。

[http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/set-up-ec2-cli-windows.html](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/set-up-ec2-cli-windows.html)

# javascript - PhoneGap 和 Highcharts

> ID：15587814
> 
> 赞同：1
> 
> 时间：2013-03-23T14:22:09.823
> 
> 标签：javascript, cordova, highcharts

我正在使用 Highcharts 开发混合移动应用程序 (Cordova-Phonegap)，我正在从数据库中查询数据并尝试在图表上动态显示数据。

这是获取数据的代码，并且有效。

```
var exerciseData = [];//global
var chart;//global 
```

编辑2：

```
$(document).ready(function() {
 //chart is here
}

//Cordova is ready               
  function onDeviceReady() {   
  db.transaction(queryDB);
} 
```

// 查询数据库

```
function queryDB(tx) {
      //get all results from db
      tx.executeSql('SELECT * FROM MYTABLE', [], querySuccess, errorCB); 
 } 

function querySuccess(tx, results) {

          var len = results.rows.length;
          console.log("MYTABLE table: " + len + " rows found.");

          for (var i=0; i<len; i++){
              console.log("Row = " + i + " Reading_name = " + results.rows.item(i).Reading_name + " Date="+results.rows.item(i).Rec_date + " Reading =  " + results.rows.item(i).Reading);

           //get exercise data only
           if(results.rows.item(i).Reading_name=='exercise'){

               var reading=parseInt(results.rows.item(i).Reading);
               var thisDate=results.rows.item(i).Rec_date;

               var exObj=([manageDate(thisDate), reading]);
               exerciseData.push(exObj);     
              }

           } 
          } 
```

现在，当我采取`exerciseData`并设置如下：

```
chart.series[0].setData(exerciseData,true); 
```

然后图表上不会显示任何内容。

但如果我将其设置为：

```
chart.series[0].setData([[1383824000000,10] ],true); 
```

然后我可以在图表上看到数据点。

如何修复`exerciseData`数组以在 Highchart 图表系列上显示数据？

`console.log(exObj);`显示：

```
[1363996800000, 10] 
```

并`console.log(exerciseData);`给我这个：

```
[
Array[2]
0: 1363996800000
1: 10
length: 2
__proto__: Array[0]
] 
```

编辑：图表代码

```
 $(document).ready(function() {

             chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'container',
                    defaultSeriesType: 'line'
                },
                title: {

                    text: 'chart'
                },
                xAxis: {
                    type: 'datetime',
                    labels: {
                             formatter: function() {
                            return Highcharts.dateFormat('%a %d %b', this.value);
                            },
                                dateTimeLabelFormats: { 
                                        minute: '%H:%M',
                                        hour: '%H:%M',
                                        day: '%e. %b',
                                        week: '%e. %b',
                                        month: '%b \'%y',
                                        year: '%Y'
                                    }
                           } 

                },
                yAxis: {

                   title: {
                      text: ''
                    },
                      min: 0
                },

                series: [
                    {
                        name: 'Exercise',
                        data: [],
                        type:'spline'
                    },
                    {
                        name: 'MyData2',
                        data: [],
                        type:'line'
                    });

            chart.series[0].setData(exerciseData,true);//does not work
            chart.series[1].setData([[1383824000000,10]],true);

          }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:13:22.567

试试这个：

```
var exObj=[];
exObj.push(manageDate(thisDate));
exObj.push(reading);
exerciseData.push(exObj); 
```

另一种方法是使用 x,y 指定点，例如

```
var exObj = {
    x:manageDate(thisDate),
    y:reading
} 
```

另外，你需要打电话

```
chart.series[0].setData(exerciseData,true 
```

在你的成功函数中。

# matlab - Matlab：一步矢量化转置？

> ID：15587816
> 
> 赞同：0
> 
> 时间：2013-03-23T14:22:21.010
> 
> 标签：matlab

我想同时使用 (:) 运算符和转置。这可能吗？基本上我想做类似的事情

```
output = A'(:) 
```

除了这不起作用。有谁知道解决方法？

谢谢！

伊莫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:36:23.537

在这种情况下，`:`运算符是将矩阵重塑为向量的简写。您可以通过显式使用该`reshape`函数来解决使用运算符的限制：

```
octave>  A = [1 2;3 4]
A =

   1   2
   3   4

octave> B=A'
B =

   1   3
   2   4

octave> C=B(:)
C =

   1
   2
   3
   4

octave> D=reshape(A',[],1) #% vectorize transpose in one line
D =

   1
   2
   3
   4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T14:40:46.927

尝试：

```
output = reshape( A.', numel(A), 1);

>> A = rand(4,3);
>> output = reshape( A.', numel(A), 1);

A = 

    0.447213   0.046896   0.679087
    0.903294   0.768745   0.651481
    0.701071   0.122534   0.611390
    0.535844   0.478595   0.772810

output =

    0.447213
    0.046896
    0.679087
    0.903294
    0.768745
    0.651481
    0.701071
    0.122534
    0.611390
    0.535844
    0.478595
    0.772810 
```

请注意，reshape 会读取沿列访问的矩阵，因此您可能不需要转置矩阵 A。

另外，请记住该运算符`'`是厄米特运算符，即转置的共轭，而`.'`只是转置，您也可以通过转置（A）获得。

您可能希望在一行中完成所有操作，而无需每次都重新输入。一种解决方案是将函数句柄创建为 boop：

```
>> boop = @(x) reshape( transpose(x), numel(x), 1)
>> output = boop(A)

output =

    0.447213
    0.046896
    0.679087
    0.903294
    0.768745
    0.651481
    0.701071
    0.122534
    0.611390
    0.535844
    0.478595
    0.772810 
```

# php - PHP Facebook fql查询返回空数组

> ID：15587817
> 
> 赞同：0
> 
> 时间：2013-03-23T14:22:22.080
> 
> 标签：php, facebook-graph-api, facebook-fql

我刚刚将我的代码从我的开发人员服务器移到了实时站点，而 Facebook api 没有返回它应该返回的正确 FQL 结果。实际上它返回一个空数组。我已经检查了权限，这些似乎是有序的。有问题的查询确实适用于我的开发服务器，也适用于探索图工具。

有问题的查询：

```
$fql = "SELECT post_id, actor_id, created_time, updated_time, likes.count, attachment.media.video.source_url, attachment.name
            FROM stream WHERE source_id = ".$this->id." AND (attachment.caption = 'soundcloud.com' or attachment.caption = 'www.youtube.com')
            ORDER BY created_time DESC limit 30"; 
```

但是，此查询确实可以使用 php sdk：

```
$fql = "SELECT post_id, actor_id, created_time, updated_time, likes.count, attachment.media.video.source_url, attachment.name
            FROM stream WHERE source_id = ".$this->id." ORDER BY created_time DESC limit 30"; 
```

**更新**

如果我通过代理服务器或在我自己的浏览器中运行查询，它也可以工作。所以问题必须与服务器有关。我尝试增加超时，但这没有做任何事情。

**更新**

我想我遇到了一个已知的错误：http: [//developers.facebook.com/bugs/305190986273056](http://developers.facebook.com/bugs/305190986273056)

你能找到什么线索吗？

# java - 获取数字位数的最快方法？

> ID：15587818
> 
> 赞同：13
> 
> 时间：2013-03-23T14:22:22.653
> 
> 标签：java, string, math, numbers, int

我确实检测到数字上的位数。例如，`329586`有`6`数字。

我所做的只是将数字解析为字符串，并获取字符串长度，例如：

```
number.toString().length() 
```

但是，有没有一种最快的方法来计算数字的位数？我必须多次使用这种方法，所以我认为使用`toString()`会影响性能。

谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-23T14:24:29.393

```
Math.floor(Math.log10(number) + 1)
// or just (int) Math.log10(number) + 1 
```

例如：

```
int number = 123456;
int length = (int) Math.log10(number) + 1;
System.out.println(length); 
```

**输出：**

```
6 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-23T14:29:18.917

这个自制的解决方案怎么样：

```
int noOfDigit = 1;
while((n=n/10) != 0) ++noOfDigit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:31:56.603

试试这个 ：

[工作示例](http://ideone.com/VP9uPT)

```
public class Main {
    public static void main(String[] args) {
        long num = -23;
        int digits = 0;
        if (num < 0) 
            num *= (-1);
        if (num < 10 && num >= 0)
            digits = 1;
        else {
            while(num > 0) {
                num /= 10;
                digits++;
            }
        }
        System.out.println("Digits: " +digits);
    }
} 
```

# algorithm - 数一无所有的方法有多少种？

> ID：15587819
> 
> 赞同：3
> 
> 时间：2013-03-23T14:22:26.910
> 
> 标签：algorithm, dynamic-programming

这是我在解决问题时经常犯的错误。当参数处于最低极端时，我们如何确定递归函数的值是多少。一个例子会有所帮助：

> 给定 n，找出仅使用 2x1 块来平铺 3xN 网格的方法数。允许旋转块。

DP解决方案很容易找到

> f(n)：平铺 3xN 网格的方式数
> 
> g(n)：平铺 3xN 网格的方法数，在最右边一列截断 1x1 块
> 
> f(n) = f(n-2) + 2*g(n-1)
> 
> g(n) = f(n-1) + g(n-2)

我最初认为基本情况是 f(0)=0, g(0)=0, f(1)=0, g(1)=1。但是，这会产生错误的答案。然后我在某处读到 f(0)=1 并将其推断为

> 平铺 3x0 网格的方式数量是一种，因为只有一种方式我们不能使用任何平铺（2x1 块）。

我的问题是，按照这种逻辑，g(0) 不应该也是一个。但是，在正确的解决方案中，g(0)=0。一般来说，我们什么时候可以说**无用的方法是一种**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:41:43.820

About your specific question of tiling, think this way:

*   How many ways are there to "tile a 3*0 grid"?
    I would say: Just one way, don't do anything! and you can't "do nothing" any other way. (f(0) = 1)

*   How many ways are there to "tile a 3*0 grid, cutting that specific block off"?
    I would say: Hey! That's impossible! You can't cut the specific block off since there is nothing. So, there's no way one can solve the task anyhow. (g(0) = 0)

Now, let's get to the general case:

*   There's no "general" rule about zero cases.
*   Depending on your problem, you may be able to somehow "interpret" the situation, and find the reasonable value. **Most of the times** (depending on your definition of "ways") number of ways of doing "nothing" is 1, and number of ways of doing something impossible is 0!
*   Warning! Being able to somehow "interpret" the zero case is not enough for the relation to be correct! You should recheck your recursive relation (i.e. the way you get the n-th value from the previous ones) to be applicable for the zero-to-one case as well, since most of the time this would be a "tricky" case.
*   You may find it easier to base your recursive relation on some non-zero case, if you find the zero-case being tricky, or confusing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T15:08:01.767

# html - iframe 定位

> ID：15587823
> 
> 赞同：9
> 
> 时间：2013-03-23T14:22:43.280
> 
> 标签：html, iframe, position, css-position

这是谷歌翻译的 iframe 代码。

```
<div id="contentframe" style="top: 160px; left: 0px;">
<iframe src="/translate_p?hl=en&amp;ie=UTF8&amp;prev=_t&amp;sl=auto&amp;tl=en&amp;u=http://yahoo.co.jp/&amp;depth=1&amp;usg=ALkJrhjrVT6Mc1tnruB-zgrtu9cyQ1bSeA" name="c" frameborder="0" style="height:100%;width:100%;position:absolute;top:0px;bottom:0px;">&lt;/div&gt;
</iframe></div> 
```

我尝试使用相同的 div 和 iframe 标签做类似的事情，但 html 页面最终不像谷歌翻译。

```
<div id="contentframe" style="top: 160px; left: 0px;">
<iframe src="http://stackoverflow.com" style="height:100%;width:100%;position:absolute;top:0px;bottom:0px;">&lt;/div&gt;
</iframe></div> 
```

iframe 出现在页面顶部，而不是 div 指定的 160px 之后出现。

我不确定我的代码有什么问题，这与谷歌代码几乎相同。

编辑：添加位置：相对于标签不适合作为解决方案。它将 div 缩小为一个高度较小的条形图。这也意味着无法指定 相对于页面的确切位置作为结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T14:24:15.197

那是因为你错过`position:relative;`了`#contentframe`

```
<div id="contentframe" style="position:relative; top: 160px; left: 0px;"> 
```

`position:absolute;`将自己定位在最接近的祖先中，该祖先具有`position`that is not `static`。由于默认设置是`static`导致您的问题的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-30T15:52:00.823

你必须使用这个 css 属性，

```
 position:relative; 
```

将它用于您的#contentframe div 标签

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T14:57:03.173

尝试添加 css 样式属性

```
position:relative; 
```

到 div 标签，它可以工作，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-08T15:59:11.217

你应该使用位置：相对；对于一个 iframe 和位置：绝对；第二个；

示例：对于第一个 iframe 使用：

```
<div id="contentframe" style="position:relative; top: 100px; left: 50px;"> 
```

对于第二个 iframe 使用：

```
<div id="contentframe" style="position:absolute; top: 0px; left: 690px;"> 
```

# php - Silverstripe googlesitemaps 模块

> ID：15587825
> 
> 赞同：2
> 
> 时间：2013-03-23T14:22:59.090
> 
> 标签：php, seo, silverstripe

我已经安装了 SilverStripe 3.0 的谷歌站点地图模块，来自

[https://github.com/silverstripe-labs/silverstripe-googlesitemaps](https://github.com/silverstripe-labs/silverstripe-googlesitemaps)

我可以看到模块生成的站点地图...我读到这个模块会通知谷歌任何修改或新的页面

但是第一次我们是否必须将 XML 提交给 Google 进行索引，或者这甚至是由模块完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T23:40:03.527

我建议将 sitemap.xml 提交给 Google 进行索引。该模块不会自动提交，尽管 google 会在下次抓取该站点时检测到它。

以下是有关该模块的更多信息：

[https://github.com/silverstripe-labs/silverstripe-googlesitemaps/blob/master/docs/en/index.md](https://github.com/silverstripe-labs/silverstripe-googlesitemaps/blob/master/docs/en/index.md)

# java - 将值从 main() 传递到不同类中的数组堆栈时，有哪些最佳实践和技巧？

> ID：15587831
> 
> 赞同：-1
> 
> 时间：2013-03-23T14:23:50.217
> 
> 标签：java, stack, inner-classes

我正在尝试将值从 my 传递`private static void main(...)`到一个在构造函数中初始化了数组堆栈的类。我想知道如何将我分配给变量的值`main()`和`push`该值放到这个内部类中的数组堆栈上？

我知道数组堆栈有效，我之前已经实现过这个类没有问题，但我只使用`arrayStack()`我创建的和一个`main()`. 第三课的加入让我很困惑。

在没有深入了解我的代码的情况下，我希望有人可以向我解释（或指向我一些资源）如何将参数传递给在构造函数中初始化的堆栈，参数来自`main()`不同类的方法（相同的包)?

我试图获取值的示例：

```
package program2;
public class Exec {
public Exec(DStack ds) {
    /*I have initilized an arrayStack to hold doubles (i.e. DStack). 
     * I can use ds.push()/pop()/top() etc. 
     * I cannot take the value from Calculator.java and push that value
     * here, which is what I need help understanding?
     * */
     ds.push(Calculator.i); //I would expect an error here, or the value stored in 
                           //Calculator.i to be added to the stack. Instead program
                           //terminates. 
   }
} 
```

我想从哪里获取值：

```
package program2;
public class Calculator {
public static double i;
public static void main(String[] args) {
    i=9; //I'm expecting that by using Calculator.i in the Exec class that
        //I should be able to push 'i' onto the stack. 
   }
} 
```

这个问题伴随着我昨天在这里工作的问题和答案：[Get answer from user input and pass to another class](https://stackoverflow.com/questions/15581898/get-answer-from-user-input-and-pass-to-another-class)。有三个区别，一是我不再从菜单中选择答案并执行操作。第二，我想知道如何在堆栈上获取项目，而不是`String`在一系列 if/else 语句中进行比较。最后，我想更详细地了解一下这个动作的具体细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T14:32:34.013

您似乎完全误解了应用程序的工作原理。当您启动程序时，java 会执行您的 main 方法。它的所有指令都按顺序执行，直到方法结束。如果您还没有从此方法启动任何其他线程，则当 main 方法中的最后一条指令已执行时，程序将终止。

在这种情况下，main 方法只包含一条指令：

```
i = 9; 
```

所以这条指令被执行，因为它是最后一条，程序终止。你甚至没有在任何地方引用 Exec 类，所以这个类甚至没有被 JVM 加载。

如果你想使用 Exec 类，那么你必须在程序的某个地方做一些事情。例如，你可以做

```
i = 9;
DStack dstack  = new DStack();
Exec exec = new Exec(dstack); 
```

请注意，将某些内容存储在公共静态变量中以便其他对象能够获取此值是一种非常糟糕的参数传递形式。如果 Exec 对象需要一个值才能工作，那么它应该是其构造函数的参数：

```
public Exec(DStack ds, double value) {
    ds.push(value);
} 
```

在 main 方法中，您将使用局部变量而不是公共静态变量：

```
double i = 9;
DStack dstack  = new DStack();
Exec exec = new Exec(dstack, i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:31:39.920

如果我正确理解你的问题，你应该创建一个`Exec`类的实例。您还可以在程序中创建一个实例，并在将值压入堆栈后将`DStack`其传递给`Exec`构造函数。`double`

```
package program2;
public class Calculator {
public static double i;
public static void main(String[] args) {
    DStack dStack = new DStack();
    dStrack.push(i);
    Exec exec = new Exec(dStack);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T14:33:32.073

我认为您混淆了类与实例的概念。您不会将值传递给类，而是将值传递给实例（`static`有时会调用字段`class variables`，这会使事情变得混乱，但暂时忽略它）。

简而言之，类是您编写的该类的代码。实例是从该类的定义中产生的实际事物，并且实际上是在做一些事情。所以第一个技巧是“实例化”你的类并创建一个实例。然后你传递你想要传递的任何值，如下所示：

```
class Foo {
    public static main(String[] args) {
        Bar bar = new Bar(); // <-- now you have an instance called bar
        bar.arrayStack.push(args[0]); // <-- Now it's passed!
    }

    class Bar {
        ArrayStack arrayStack;
        Bar(){
            arrayStack = new ArrayStack();
        }  
} 
```

# html - CSS 转换仅在按钮单击时发生一次

> ID：15587833
> 
> 赞同：1
> 
> 时间：2013-03-23T14:24:07.940
> 
> 标签：html, css, animation

### 我想做的是：

我正在尝试制作一个按钮控制的动画，其中一个小棒图根据单击的按钮向右或向左移动。

### 问题：

*   动画只发生一次*   仅适用于向右和向下按钮

### HTML：

```
<!DOCTYPE html>
<html>

<style>
    #stage{
        width: 100px;
        height: 100px;
        position: relative;
        border-style: dashed;
        border-color: gray;
        border-width: medium;
    }

    #actor{
        width: 13px;
        height: 15px;
        position: absolute;
        left: 0;
        top: 0;
        background-image: url("E:/Website Projects/man.PNG");

        -webkit-transition: all 2s ease-out 0s;
        -moz-transition: all 2s ease-out 0s;
        transition: all 2s ease-out 0s;
    }

</style>

<body>
    <div id="stage">
        <div id="actor"></div>
    </div>

    <div>
        <button class="control" id="top">TOP</button> <br>
        <button class="control" id="left">LEFT</button> <button class="control" id="right">RIGHT</button> <br>
        <button class="control" id="down">DOWN</button>
    </div>
</body>

<script>
    var maxWidth = 100;
    var maxHeight = 100;

    var top = document.querySelector("#top");
    var left = document.querySelector("#left");
    var right = document.querySelector("#right");
    var down = document.querySelector("#down");

    top.addEventListener("click",moveTop,false);
    left.addEventListener("click",moveLeft,false);
    right.addEventListener("click",moveRight,false);
    down.addEventListener("click",moveDown,false);

    function moveTop(){
        var actor = document.querySelector("#actor");
        actor.style.top -= "25px";
    }

    function moveDown(){
        var actor = document.querySelector("#actor");
        actor.style.top += "25px";
    }

    function moveRight(){
        var actor = document.querySelector("#actor");
        actor.style.left += "25px";
    }

    function moveLeft(){
        var actor = document.querySelector("#actor");
        actor.style.left -= "25px";
    }

</script>

</html> 
```

### 截屏

![棍子人](../Images/114fdd202c0f82e6c4c90f22b88fae83.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:29:25.043

您不能添加`25px`为`25px`字符串。

您只能将`+=`and`-=`用于整数。

你会希望你的函数看起来像这样：

```
function moveDown(){
    var actor = document.querySelector("#actor");
    var num = parseInt(actor.style.top) || 0;
    actor.style.top = num + 25 + "px";
} 
```

工作示例：http: [//jsfiddle.net/5CMWW/](http://jsfiddle.net/5CMWW/)

# javascript - 来自 Javascript 的某些警报会自动关闭？

> ID：15587834
> 
> 赞同：0
> 
> 时间：2013-03-23T14:24:09.627
> 
> 标签：javascript, key, alert, space

我打算实现对键的响应，所以我开始：

```
window.addEventListener('keydown', function(e) {
    alert(e.keyCode)
}, true) 
```

它适用于大多数键。当我按下一个键时，它会提醒键码。（当然，这不是最终设计；只是一个测试，看看它是否可以使调试更容易。）

但是，我发现了一些有趣的行为。当我使用空格键时，它会做一些奇怪的事情。

当我按空格键时，会出现带有数字“32”（空格键码）的警报。但是，当我释放键时，警报会自动关闭！

我发现使用该`Enter`键，我必须再次按下它才能关闭警报。虽然没有空间。

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:25:53.630

因为浏览器使用空格键来关闭警报消息（如回车）。

解释：有趣的行为是浏览器使用空格键键关闭警报，所以你只会看到你的键/键之间的对话框（在空格键不重复的例子中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:31:42.417

您正在触发 keydown 警报，这意味着警报按钮可能会侦听的 keyup 事件在警报已经存在时发生，从而有效地立即删除警报。

如果您改为在 keyup 上触发警报，这将不是问题。

# c# - 从字节数组加载，调整大小并加载到流 Dosent 在浏览器中显示图像

> ID：15587836
> 
> 赞同：0
> 
> 时间：2013-03-23T14:24:13.230
> 
> 标签：c#, asp.net-mvc-4

**抱歉标题不好**

我有这个功能：

```
 public Stream PictureStream( int size = 0 )
        {
            if( size == 0 )
            {
                return new MemoryStream( PictureFile );
            }
            else
            {
                ImageFormat format = null;
                if( FileFormat == ".jpg" || FileFormat == ".jpeg" )
                {
                    format = ImageFormat.Jpeg;
                }
                else if( FileFormat == ".png" )
                {
                    format = ImageFormat.Png;
                }
                else
                {
                    format = ImageFormat.Png;
                }
                var ms = new MemoryStream( PictureFile );
                var returnImage = Image.FromStream( ms );
                var img = returnImage.Resize( size );
                img.Save( ms , format );
                return ms;
            }
        } 
```

这个**ActionResult**：

```
 public FileStreamResult Image( long userkey , int? size )
    {
        var image = UserImagesService.Find( userkey );
        image.Size = size == null ? 0 : ( int )size;
        return new FileStreamResult( image.Stream , image.ContentType );
    } 
```

当我的大小为空时，图像加载正常，但是当我在 Firefox 中传递大小时，我看到了这个错误：

```
The image “http://localhost:8609/Profiles/Image/4006242570097652224/150” cannot be displayed because it contains errors. 
```

它很好地保存在磁盘上

我的问题是什么？

**更新**

我的调整大小功能：

```
 public static Image Resize( this Image imgToResize , int size )
    {
        int sourceWidth = imgToResize.Width;
        int sourceHeight = imgToResize.Height;

        float nPercent = 0;
        float nPercentW = 0;
        float nPercentH = 0;

        nPercentW = ( ( float )size / ( float )sourceWidth );
        nPercentH = ( ( float )size / ( float )sourceHeight );

        if( nPercentH < nPercentW )
        {
            nPercent = nPercentH;
        }
        else
        {
            nPercent = nPercentW;
        }

        int destWidth = ( int )( sourceWidth * nPercent );
        int destHeight = ( int )( sourceHeight * nPercent );

        Bitmap b = new Bitmap( destWidth , destHeight );
        Graphics g = Graphics.FromImage( ( System.Drawing.Image )b );
        g.InterpolationMode = InterpolationMode.HighQualityBicubic;

        g.DrawImage( imgToResize , 0 , 0 , destWidth , destHeight );
        g.Dispose();

        return ( System.Drawing.Image )b;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:01:11.503

您应该使用另一个 MemoryStream 来保存调整大小的图像，并在保存图像数据后倒回该流：

```
Image returnImage;

using (var ms = new MemoryStream(PictureFile))
{
    returnImage = Image.FromStream(ms);
}
// leaving the using block closes ms

var img = returnImage.Resize(size);

// create new MemoryStream to save the resized image
var resultStream = new MemoryStream();
img.Save(resultStream, format);

// rewind the stream
resultStream.Seek(0, SeekOrigin.Begin);

return resultStream; 
```

当您将字节写入流时，它会将其当前[位置](http://msdn.microsoft.com/en-us/library/system.io.memorystream.position.aspx)提高写入的字节数（例如参见[MemoryStream.Write](http://msdn.microsoft.com/en-us/library/system.io.memorystream.write.aspx)中的备注）。流对象的后续读取将从相同的位置开始。显然，当您要读取之前写入的字节时，您需要将流倒回到开始写入的位置。

# c# - 在 C# 中，用于许多插入和删除的最佳泛型是什么？

> ID：15587843
> 
> 赞同：1
> 
> 时间：2013-03-23T14:24:30.223
> 
> 标签：c#, list, generics

我有一个游戏循环，它绘制了一个对象列表，该列表称为“mylist”并包含大约 1000 个对象，需要不断从列表中添加和删除对象（尤其是快速飞行并击中物体的子弹），每个对象很少第二。

如果我理解正确，如果列表容量足够大，则 List 中的插入实际上是免费的，问题在于删除是 O(n)，因为首先我需要在列表中找到该项目，其次它会创建一个新列表拆除后。

如果我可以汇总所有删除并每帧进行一次，那将是有效的，因为我将使用 mylist.Except(listToRemove) 并且这将在 O(n) 中。但不幸的是我做不到。

链表也有问题，因为我需要在列表中找到对象。

有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:28:31.940

一个`HashSet`呢？它支持`O(1)`插入和删除。如果您需要排序，请使用树形数据结构或`LinkedList`加号`Dictionary`，以便您快速找到节点。

BCL 有 a`SortedList`和 a`SortedSet`和 a `SortedDictionary`。除了一个都非常慢，但我永远不记得哪一个是“好”的。它在内部是基于树的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:30:29.857

如果您正在搜索，那么您最好的选择是使用`Dictionary`平均情况为 O(1) 和最坏情况为 O(n) 的 a（当您散列到同一个存储桶时）。

如果您需要保持顺序，您可以使用平衡二叉搜索树的任何实现，您的性能将是 O(logn)。

在 .NET 中，这简单地归结为

[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)- 插入/删除 *O(1)*（平均情况）

[SortedDictionary](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx) - 保留有序操作的顺序，插入/删除*O(logn)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:30:46.710

因此，理想情况下，您希望使用具有*O(1)*或*O(log n)*删除和插入的数据结构。字典类型的数据结构可能是理想的，因为它们具有恒定的平均情况插入和删除时间复杂度。我会推荐 a[`HashSet`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)然后[覆盖`GetHashCode()`](https://stackoverflow.com/a/371348/1156119)你的游戏对象基类。

这是有关所有不同字典/哈希表数据结构的更多详细信息。

## 时间复杂度

以下是所有“类字典”数据结构及其时间复杂度：

```
Type              Find by key  Remove      Add
HashSet           O(1)*        O(1)*     O(1)**
Dictionary        O(1)*        O(1)*     O(1)**
SortedList        O(log n)     O(n)      O(n)
SortedDictionary  O(log n)     O(log n)  O(log n) 
```

`*`O(n) 有碰撞
`**`O(n) 有碰撞或添加超出数组的容量。

## HashSet 与字典

`HashSet`a和 a之间的区别在于`Dictionary`Dictionary 对 a 起作用，`KeyValuePair`而使用 a`HashSet`的键是对象本身（它的`GetHashCode()`方法）。

# SortedList 与 SortedDictionary

只有在需要维持订单时才应考虑这些。不同之处在于它`SortedDictionary`使用红黑树并`SortedList`对其键和值使用排序数组。

## 参考

*   [我的博文 - .NET 简单集合和字典](http://www.growingwiththeweb.com/2013/02/net-simple-collections-and-dictionaries.html)
*   [MSDN - 哈希集](http://msdn.microsoft.com/en-us/library/bb359438.aspx)
*   [MSDN - 字典](http://msdn.microsoft.com/en-au/library/xfhwa508.aspx)
*   [MSDN - 排序字典](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)
*   [MSDN - 排序列表](http://msdn.microsoft.com/en-us/library/ms132319.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T14:48:14.700

在性能方面，您可能会通过简单地不从任何类型的列表中插入或删除任何内容来看到最佳结果。分配一个足够大的数组并标记所有对象是否应该被渲染。

但是，鉴于您的要求，这可能都是过早的优化。您可以每秒 30 次重新创建 1000 个元素的整个列表，而不会看到任何性能下降。

我建议阅读 Braid 的创建者提供的关于在独立视频游戏中使用正确数据结构的演示文稿的幻灯片：http: [//the-witness.net/news/2011/06/how-to-program-independent-games/](http://the-witness.net/news/2011/06/how-to-program-independent-games/)（tl；博士只是对所有事情都使用数组）。

# tomcat - Tomcat下的奇怪错误Junit

> ID：15587845
> 
> 赞同：0
> 
> 时间：2013-03-23T14:24:43.517
> 
> 标签：tomcat, junit4

我正在开发一个 java web 应用程序，它使用运行 JUnit 4.10 测试（前向 T）的其他项目。T 项目也可以从命令行完美地执行测试。当我从运行在 tomcat 7 上的应用程序调用它时出现问题（我没有尝试过其他版本），我得到：initializationError(TestName), No runnable methods。

这是测试运行器代码：

```
 public ResultadoPrueba ejecuta() {
        List<String> LClassPathEjecucion = new ArrayList<String>();
        LClassPathEjecucion.addAll(this.LdirectoriosPrueba);
        LClassPathEjecucion.addAll(this.LdirectorioBaseCodigoPractica);
        LClassPathEjecucion.addAll(this.LclassPathNecesarioEjecutor);
        URL[] lClassPath = List2URL(LClassPathEjecucion);
        URLClassLoader cl = new URLClassLoader(lClassPath);
        Class<?>[] cClases = new Class<?>[this.LclasesTest.size()];
        for (int i = 0; i < this.LclasesTest.size(); i++) {
            try {
                cClases[i] = cl.loadClass(this.LclasesTest.get(i).toString());
                log.debug("CLASE " + this.LclasesTest.get(i).toString());
                for (int j = 0; j < cClases[i].getDeclaredMethods().length; j++) {                               
                    log.debug("\t" + cClases[i].getDeclaredMethods()[j].getName());
                    for (int k =0; k<cClases[i].getDeclaredMethods()[j].getAnnotations().length;k++) {
                        log.debug("\t\t"+ cClases[i].getDeclaredMethods()[j].getAnnotations()[k].toString());
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
        Request req = Request.classes(cClases);
        JUnitCore jUnitCore = new JUnitCore();
        log.debug("Version de jUnitCore " + jUnitCore.getVersion());
        //jUnitCore.addListener(new TextListener(System.out));
        ListenerPruebas listener = new ListenerPruebas();
        jUnitCore.addListener(listener);
        Result resultadoJUnit = jUnitCore.run(req);
        ResultadoPrueba resultado = new ResultadoPrueba();
        resultado.setResultado(resultadoJUnit);
        resultado.setEjecutados(listener.getResultados());
        resultado.setFallos(listener.getFallos());
        return resultado;
    }
} 
```

juntcore 版本的日志输出 writen、methods、annotations 完全相同，只是方法的编写顺序不同。

想法？

这是一个无法从 tomcat 调用的测试示例：

```
import static org.junit.Assert.*;

import org.junit.Before;
import org.junit.Test;

public class JTestDummyTested {

    private DummyTested dummyTested ;

    @Before
    public void startUp(){      
           dummyTested = new DummyTested(1,1);
    }

    @Test
    public void testSuma() {
        assertEquals("1+1 deberian ser 2", 2.0, dummyTested.suma(), 1e-6);
    }

} 
```

这是一个愚蠢的junit 4测试......

# ios - Cocos2D如何在后台显示网页？

> ID：15587848
> 
> 赞同：1
> 
> 时间：2013-03-23T14:25:12.173
> 
> 标签：ios, background, webview, cocos2d-iphone

我想在 iOS 中使用 Cocos2D 在我的游戏背景中显示一个网页。我知道 CCUIViewWrapper，但它没有在后台显示。

让我知道可能的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:35:54.573

请参阅线程中的答案：[在 UIView 之上分层透明的 openGL 视图？](https://stackoverflow.com/questions/1394934/iphone-layering-a-transparent-opengl-view-on-top-of-a-uiview)

将相同的概念应用于 AppDelegate 类中的 Cocos2d OpenGL 视图。

```
CCGLView *glView = [CCGLView viewWithFrame:[window_ bounds]
                                   pixelFormat:kEAGLColorFormatRGBA8 //kEAGLColorFormatRGB565   //kEAGLColorFormatRGBA8
                                   depthFormat:0    //GL_DEPTH_COMPONENT24_OES
                            preserveBackbuffer:NO
                                    sharegroup:nil
                                 multiSampling:NO
                               numberOfSamples:0]; 
```

# c# - POST to Notifications API 适用于“user-id-1”，但不适用于“user-id-2”

> ID：15587860
> 
> 赞同：2
> 
> 时间：2013-03-23T14:26:28.967
> 
> 标签：c#, asp.net, facebook, facebook-graph-api, facebook-c#-sdk

我正在尝试将服务器端 POST 发送到通知 API，但我无法使其始终如一地工作。

根据
[通知 API的要求](https://developers.facebook.com/docs/concepts/notifications/#impl)

我正在使用应用程序访问令牌发布到 Facebook 的通知 API。

两位用户都已授权该应用程序。

使用“specific-user-id-1/notifications”并返回 {"success":true} 时，通知帖子工作正常

当使用“specific-user-id-2/notifications”时，相同的代码行不起作用，并返回“(OAuthException - #2) 发生意外错误。请稍后重试您的请求。”

我应该更改发布到通知 API 的方式吗？

这也被提交给 facebook 错误...以防万一。

```
var fb = new FacebookClient();
fb.AppId = "APP_ID";
fb.AppSecret = "APP_SECRET";
fb.AccessToken = "APP_ACCESS_TOKEN";

dynamic nparams = new ExpandoObject();
nparams.access_token = "APP_ACCESS_TOKEN";
nparams.template = "testing";
nparams.href = "";

var response = fb.Post("RECIPIENT_FACEBOOK_USER_ID/notifications", nparams); 
```

**更新** 通知现在工作正常。（无需更改代码）这似乎是 Facebook 的问题。

**更新 2** 上一次更新后 1 天...不再工作...

# php - PHP PDO 使用 try

> ID：15587864
> 
> 赞同：1
> 
> 时间：2013-03-23T14:27:03.200
> 
> 标签：php

为了获得最佳实践，我应该将 fetch 命令部分放在 try 语句中，还是准备和执行足够？

```
$sql    = "SELECT * FROM links WHERE device = 'mobile' AND category = ? ORDER BY category asc, link_id asc";

try{
    $sth = $dbh->prepare($sql);
    $sth->bindValue(1, $cat, PDO::PARAM_STR);
    $sth->execute();
} 
catch(\PDOException $ex){
    print($ex->getMessage()); 
}

if($sth->rowCount()) {        
    print("<a data-rel=\"dialog\" data-transition=\"pop\" href=\"index.php?action=addnew&cat=$cat\">Add New Menu Item</a><br/><br/>");
    print("<ul data-role=\"listview\" data-filter=\"true\">");
    while($row = $sth->fetch(PDO::FETCH_BOTH)) {    
        print("<li>");
        print("<a data-transition='fade' href='$row[$COL_HREF]'>$row[$COL_LINK_NAME]<br/></a>");
        print("</li>\n");
    }
    print("</ul>");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:29:06.303

里面`try`有其余的代码。

如果您的代码`try`产生异常，您将打印出异常消息，但随后会继续检查`rowCount()`，这取决于`$sth`是否成功设置和执行。

# entity-framework - 当我运行所有时，MSTest 失败，但在其他情况下工作

> ID：15587865
> 
> 赞同：1
> 
> 时间：2013-03-23T14:27:07.547
> 
> 标签：entity-framework, unit-testing, mstest, rollback

所以我有一个使用 MSTest 的 Testclass，如果我一个一个地运行它们，每个测试都很好，但是如果我选择 2 个测试，即 can_register 和 can_register_existing_username，那么第二个测试失败（cannot_register_existing_username）。

我让我的 testclass 从一个看起来像这样的抽象类继承：

```
public abstract class RollbackCapabilities

{

private TransactionScope _transactionScope;

    [TestInitialize]
    public virtual void TestInitialize()
    {
        _transactionScope = new TransactionScope(TransactionScopeOption.RequiresNew, new TransactionOptions { Timeout = new TimeSpan(0, 10, 0) });
    }

    [TestCleanup]
    public virtual void TestCleanup()
    {
        Transaction.Current.Rollback();
        _transactionScope.Dispose();
    }

} 
```

如果我将此文件注释掉，那么它可以工作（但现在数据保留在我不想要的 test-db 中）。

使用上面的这个文件，第二个测试失败，测试看起来像这样

```
[TestMethod]
    public void Can_Register()
    {
        //Arrange
        AccountController ac = ControllerFactory.CreateAccountController();
        RegisterModel model = new RegisterModel();
        model.UserName = "TestUser";
        model.Password= "TestPassword";
        model.ConfirmPassword = "TestPassword";

        //Act
        ActionResult result = ac.Register(model);

        //Assert
        Assert.IsInstanceOfType(result, typeof(RedirectToRouteResult));
        Assert.AreEqual("Home", ((RedirectToRouteResult)result).RouteValues["controller"]);
        Assert.AreEqual("Index", ((RedirectToRouteResult)result).RouteValues["action"]);
    }

    [TestMethod]
    public void Cannot_Register_Existing_Username()
    {
        //Arrange
        AccountController ac = ControllerFactory.CreateAccountController();
        RegisterModel model = new RegisterModel();
        model.UserName = "TestUser";
        model.Password = "TestPassword";
        model.ConfirmPassword = "TestPassword";
        ac.Register(model);
        RegisterModel model2 = new RegisterModel();
        model2.UserName = "TestUser";
        model2.Password = "OtherTestPassword";
        model2.ConfirmPassword = "OtherTestPassword";

        //Act
        ActionResult result = ac.Register(model2);

        //Assert
        Assert.IsInstanceOfType(result, typeof(ViewResult));
        Assert.AreEqual("", ((ViewResult)result).ViewName);
        Assert.AreEqual(model2, ((ViewResult)result).ViewData.Model);
    } 
```

最后我得到的错误如下：

> 测试方法 Viducate.UnitTests.UserHandling.RegisterTests.Cannot_Register_Existing_Username 抛出异常：System.Data.EntityCommandExecutionException：执行命令定义时出错。有关详细信息，请参阅内部异常。---> System.Data.SqlClient.SqlException：对象名称“dbo.Users”无效。

那是我的问题，不是很大但很烦人，正如我提到的，如果我一次又一次地运行测试它可以工作，它也可以工作，但如果我注释掉我的 RollbackCapabilities 类，它会在数据库中留下数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T16:53:45.407

好的，所以我发现我的错误是我手动创建了数据库（但不是表），因为多事务不支持创建数据库。

但是，创建一个空数据库意味着 EF 假定已经有表，这就是它失败的原因，不知道 dbo.users 是什么。

所以我所做的就是创建了表格，现在它可以工作了。然而，这意味着如果不先创建表和数据库，我永远无法在新的开发机器上运行它。很烦人。

我想我将设置另一个不继承我的抽象回滚类的测试类和永久创建表的哈德......只要首先运行就应该解决问题。

# c# - 需要帮助进行 2d 绘图

> ID：15587869
> 
> 赞同：1
> 
> 时间：2013-03-23T14:27:42.433
> 
> 标签：c#, vb.net, drawing, autocad

我拥有来自我自己的工具的 system.drawing.rectangle 形式的门的所有数据。我试图构建一个包含所有尺寸的二维绘图（技术表），但它似乎不够专业，无法发送给客户。

[这是我的尝试](https://www.sugarsync.com/pf/D6613292_1094279_1900566)。

有没有免费的图书馆，我可以用来做这个？我想我可以导出到 AutoCAD，然后使用内置工具，有人试试这个吗？

我与 csharp/vb.net 合作。

编辑：更精确

我有两个工具。实际上，它们是来自 Visual Studio 上同一解决方案的两个项目。

第一个是配置门，选择模型，更换眼镜，尺寸等。配置后，我拥有基本上是矩形的对象中的所有数据。

第二个是做2d草稿，我不尊重任何[标准](http://en.wikipedia.org/wiki/Engineering_drawing)。

我不确定我是否可以在这里链接来自谷歌的图片，但如果你搜索“工程图”，你会发现很多。

目标是将规范发送给客户进行验证。

所以我有两个选择：

1.  通过实施一些标准来改进我的第二个工具，毕竟我们只做门。
2.  对第三方工具进行一些映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:24:36.597

做你想做的事情的正常方法是将你的 UI 和算法编写为 CAD 引擎的插件，然后使用你的代码使用本机 CAD API 生成 CAD 绘图。AutoCAD 对于您的需求可能有点过头了，但[Bricscad](http://www.bricsys.com/bricscad/)相当便宜并且可以满足您的需求。

# jquery - highstock 格式工具提示

> ID：15587870
> 
> 赞同：0
> 
> 时间：2013-03-23T14:27:45.653
> 
> 标签：jquery, highcharts

我在 highstock 图表中遇到了格式化工具提示的问题。

问题是什么号码告诉我：

```
120.9
1,234.03
3,567.98 
```

怎么可能改变逗号和点的位置？

结果：

```
120.9
1.234,03
3.567,98 
```

还有一个问题：我怎么能把上面的点值呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:01:22.657

您可以在 lang 选项中定义它：

-decimalPoint [http://api.highcharts.com/highcharts#lang.decimalPoint](http://api.highcharts.com/highcharts#lang.decimalPoint) -thousandsSep [http://api.highcharts.com/highcharts#lang.thousandsSep](http://api.highcharts.com/highcharts#lang.thousandsSep)

# android-intent - 确定意图返回的android中uri的Mime类型？

> ID：15587873
> 
> 赞同：7
> 
> 时间：2013-03-23T14:27:51.653
> 
> 标签：android-intent, mime-types, file-manager

首先是我想要实现的一些背景 -

我正在开发一个图像共享应用程序，我需要用户从文件系统中选择一个图像。

为此，我正在使用此代码 -

```
 Intent photoPickerIntent = new Intent(Intent.ACTION_GET_CONTENT);
    photoPickerIntent.setType("image/*");
    startActivityForResult(photoPickerIntent, REQUEST_CODE_IMAGE_PICKER_INTENT); 
```

现在，这会触发一个选择器，在其中我看到多个选项，包括我手机中的 Gallery 和 FileManager App。如果我选择画廊并从那里选择一个图像，那么我的活动会收到一个带有图像内容 uri 的意图。但如果我选择 FileManager 应用程序，我可以选择任何可能不是图像的文件。所以，我需要的是能够确定意图中返回的 uri 的 mime 类型。Intent 的 getType 方法返回 null 。

有没有办法从返回的意图中确定 mime 以确定内容是否为图像。

如果这不起作用，那么我可能不得不使用 MimeTypeMap 从文件扩展名中确定 mime。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-29T05:27:04.723

我找到了一种获取内容 uri 的 mime 类型的方法，但对于其他类型的 uri，例如 'file://.....' 形式的 uri，没有任何效果。

要获取内容 uri 的 mime 类型 -

```
 ContentResolver cr = this.getContentResolver();
    String mime = cr.getType(YOUR_CONTENT_URI); 
```

这仅适用于内容 uri 的 . 因此，对于其他 uri，我使用 MimeTypeMap 从文件扩展名推断他们的 mime 类型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-06T10:49:21.813

> 如果你有 URI，那么你可以得到类似的 mimetype

```
Uri uri = Uri.fromFile(file);
ContentResolver cR = context.getContentResolver();
String mime = cR.getType(uri); 
```

> 或尝试 // url = 文件路径或您想要的任何合适的 URL。

```
public static String getMimeType(String url)
{
    String type = null;
    String extension = MimeTypeMap.getFileExtensionFromUrl(url);
    if (extension != null) {
        MimeTypeMap mime = MimeTypeMap.getSingleton();
        type = mime.getMimeTypeFromExtension(extension);
    }
    return type;
} 
```

有关更多详细信息，[请参阅这些答案](https://stackoverflow.com/questions/8589645/how-to-determine-mime-type-of-file-in-android)

# android - android实现xmppconnection服务

> ID：15587875
> 
> 赞同：2
> 
> 时间：2013-03-23T14:28:10.487
> 
> 标签：android, service, xmpp, asmack

我正在尝试使用 asmack 和 Openfire 创建一个基本的聊天应用程序。我为 XMPPConnection 创建了一个绑定服务，每个 Activity 都绑定到它。

每当我尝试绑定到服务时，都会有很长的延迟。我知道 bindService 是异步的，但我想在开始寻找其他问题之前确定我的服务实现是正确的。

我在 onCreate 方法中绑定我的服务并尝试访问 onStart 中的连接。

我对此仍然很陌生，但我怀疑我在线程方面做错了。我的应用程序现在运行的方式是，只有当我尝试从 OnClickListener 访问 mBound 变量时，它才会返回 true。是什么在 Listener 中发生了如此大的差异？我试图找到 OnClick 方法的代码，但找不到。

我的 XMPPConnectionService 是这样的：

包 com.example.smack_text;

```
import java.io.File;
import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;
import android.app.Service;
import android.content.Intent;
import android.os.Binder;
import android.os.Build;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class XMPPService extends Service{

XMPPConnection connection;
//  private final IBinder mBinder = new LocalBinder();

@Override
public void onCreate(){
super.onCreate();
Log.d("service","created");
}

/**
 * Class used for the client Binder.  Because we know this service always
 * runs in the same process as its clients, we don't need to deal with IPC.
 */
@Override
public IBinder onBind(Intent intent) {
Log.d("sevice","bound");
LocalBinder mBinder = new LocalBinder (this);
return mBinder;
}

public class LocalBinder extends Binder {
XMPPService service;

public LocalBinder (XMPPService service)
{
this.service = service;
}

public XMPPService getService (){
return service;
}

//          XMPPService getService() {
//              return XMPPService.this;
//          }
}

public void connect(final String user, final String pass) {
Log.d("Xmpp Alex","in service");

ConnectionConfiguration config = new ConnectionConfiguration("10.0.2.2",5222);

//          KEYSTORE SETTINGS
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
config.setTruststoreType("AndroidCAStore");
config.setTruststorePassword(null);
config.setTruststorePath(null);
} 
else {
config.setTruststoreType("BKS");
String path = System.getProperty("javax.net.ssl.trustStore");
if (path == null)
path = System.getProperty("java.home") + File.separator + "etc"
       + File.separator + "security" + File.separator
       + "cacerts.bks";
    config.setTruststorePath(path);
} 

//          Create XMPP Connection

connection = new XMPPConnection(config);

new Thread(new Runnable() {
@Override
public void run() {

try {
connection.connect();
connection.login(user, pass);
if(connection.isConnected()){
Log.d("Alex", "connected biatch!");
}
else{
Log.d("Alex","not connected");
}

} catch (XMPPException e) {
e.printStackTrace();
}
}
}).start();
}
public void disconnect(){
if(connection.isConnected()){
connection.disconnect();
}  
else{
Toast.makeText(getApplicationContext(), "not connected", Toast.LENGTH_LONG).show();
}
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:10:02.150

我用 Asmack 实现了一个 Android 聊天。

我创建了一个服务。该服务有一个带有 XmppConnection 的全局变量。一开始我使用线程进行连接和登录。然后我为登录用户设置 VCard，设置 rosterListener 最后设置`connection.addPacketListener` 我用 BroadcastReceiver 活动端更新活动，然后

```
@Override
    public IBinder onBind(Intent arg0) {

        return mBinderXmpp;
    }

    public class BinderServiceXmpp extends Binder {
        ServiceXmpp getService() {
            return ServiceXmpp.this;
        }
    }

    private Runnable sendUpdatesToUI = new Runnable() {
        public void run() {
            DisplayInfo();
            handler.postDelayed(this, 2000); // 2 segundos
        }
    };
    private void DisplayInfo() {
        isRunning = true; // flag to know if service is running
        Intent tempIntent;
        tempIntent = new Intent(BROADCAST_ACTION);
        tempIntent.putExtra("UPDATE_OPTION", UPDATE_ACTION);
        sendBroadcast(tempIntent);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T00:28:10.787

您的实现有效，您仍然需要从绑定的客户端（例如 LoginActivity）实现 CONNECT 和 DISCONNECT 等操作的处理程序。

例子：

```
class IncomingHandler extends Handler { // Handler of incoming messages from clients bound.
    @Override
    public void handleMessage(android.os.Message msg) {
        switch (msg.what) {
            case MSG_CONNECT_XMPP:
                new AsyncTask<Void, Void, Boolean>(){
                    @Override
                    protected Boolean doInBackground(Void... params) {
                        // Do connection
                    }

                    @Override
                    protected void onPostExecute(Boolean aBoolean) {
                        // Notify the connection status
                    }
                }.execute();
                break;
            case MSG_DICCONNECT_XMPP:
                new AsyncTask<Void, Void, Boolean>(){
                    @Override
                    protected Boolean doInBackground(Void... params) {
                        // Do disconnection
                    }

                    @Override
                    protected void onPostExecute(Boolean aBoolean) {
                        // Notify the connection status
                    }
                }.execute();

                break;
            default:
                super.handleMessage(msg);
        }
    }
} 
```

但是，这种在服务需要运行网络操作时创建 AsyncTask 的方法将达到其在 BroadcastReceiver 中的 sendBroadcast 的限制。

如果您有 BroadcastReceiver 需要通过向 XMPPService 发送消息来启动或停止连接，您有如下内容：

```
public class NetworkConnectivityReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        NetworkInfo network = cm.getActiveNetworkInfo();

        network = intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);

        if (XmppService.isRunning() && network.isConnected()) {
            context.sendBroadcast(new Intent(XmppService.ACTION_CONNECT));
        } else if (XmppService.isRunning() && !network.isConnected()) {
            context.sendBroadcast(new Intent(XmppService.ACTION_DISCONNECT));
        }
    }
} 
```

然后，您需要在 XmppService 类中实现一个广播侦听器。但是，您不能在广播侦听器中运行 AsyncTask！

其余选项在我的帖子中描述：

[Android - 实现网络类的最佳选择](https://stackoverflow.com/questions/19929952/anroid-best-option-to-implement-networking-class/19990937#19990937)

# python - 在没有 python 命令的情况下在终端中运行 python 脚本

> ID：15587877
> 
> 赞同：48
> 
> 时间：2013-03-23T14:28:26.053
> 
> 标签：python, linux, command-line

我有一个 python 脚本，我们将其命名为 script1.py。我可以这样在终端中运行它：

```
python /path/script1.py
... 
```

但我想像命令行程序一样运行：

```
arbitraryname
... 
```

我该怎么做 ？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-03-23T14:31:42.653

您在脚本开头使用[shebang 行：](http://en.wikipedia.org/wiki/Shebang_(Unix))

```
#!/usr/bin/env python 
```

使文件可执行：

```
chmod +x arbitraryname 
```

并将其放在 PATH 上的目录中（可以是符号链接）：

```
cd ~/bin/
ln -s ~/some/path/to/myscript/arbitraryname 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-03-23T14:46:54.493

分为三个部分：

1.  在脚本顶部添加一个“shebang”，告诉如何执行脚本
2.  授予脚本“运行”权限。
3.  在您的 PATH 中创建脚本，以便您可以从任何地方运行它。

## 添加一个shebang

您需要在脚本顶部添加一个 shebang，以便 shell 在解析脚本时知道使用哪个解释器。一般是：

```
#!path/to/interpretter 
```

要在您的机器上找到您的 python 解释器的路径，您可以运行以下命令：

```
which python 
```

这将搜索您的 PATH 以找到您的 python 可执行文件的位置。它应该返回一个绝对路径，然后你可以使用它来形成你的 shebang。确保你的 shebang 在你的 python 脚本的顶部：

```
#!/usr/bin/python 
```

## 运行权限

您必须使用运行权限标记您的脚本，以便您的 shell 在您尝试将其用作命令时知道您想要实际执行它。为此，您可以运行以下命令：

```
chmod +x myscript.py 
```

## 将脚本添加到您的路径

PATH 环境变量是一个有序的目录列表，您的 shell 在查找您尝试运行的命令时将搜索这些目录。因此，如果您希望您的 python 脚本成为可以从任何地方运行的命令，那么它需要在您的 PATH 中。您可以看到运行命令的路径的内容：

```
echo $PATH 
```

这将打印出一长行文本，其中每个目录用分号分隔。每当您想知道从 PATH 运行的可执行文件的实际位置时，您可以通过运行以下命令找到它：

```
which <commandname> 
```

现在您有两个选择：将脚本添加到 PATH 中已经存在的目录中，或者将新目录添加到 PATH 中。我通常在我的用户主目录中创建一个目录，然后将其添加到 PATH。要将内容添加到您的路径中，您可以运行以下命令：

```
export PATH=/my/directory/with/pythonscript:$PATH 
```

现在您应该能够在任何地方将您的 python 脚本作为命令运行。但！如果您关闭 shell 窗口并打开一个新窗口，新窗口将不会记住您刚刚对 PATH 所做的更改。因此，如果您希望保存此更改，则需要在 .bashrc 或 .bash_profile 的底部添加该命令

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-23T14:31:31.033

将以下行添加到开头`script1.py`

```
#!/usr/bin/env python 
```

然后使脚本可执行：

```
$ chmod +x script1.py 
```

如果脚本驻留在`PATH`变量中出现的目录中，您只需键入

```
$ script1.py 
```

否则，您需要提供完整路径（绝对路径或相对路径）。这包括当前的工作目录，它*不*应该在你的`PATH`.

```
$ ./script1.py 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-23T14:32:05.113

您需要使用[hashbang](http://en.wikipedia.org/wiki/Hashbang)。将其添加到 python 脚本的第一行。

```
#! <full path of python interpreter> 
```

然后更改文件权限，并添加执行权限。

```
chmod +x <filename> 
```

最后使用执行它

```
./<filename> 
```

如果它在当前目录中，

# java - Hibernate JUnit 测试持久性与 jsf 实时持久性

> ID：15587879
> 
> 赞同：4
> 
> 时间：2013-03-23T14:28:43.567
> 
> 标签：java, hibernate, jsf-2, junit

如您所见，我有一个 HibernateUtil 用于将数据持久保存到我的数据库中。我在 userBean.save 方法中使用的代码与我在 junit 测试中使用的代码相同。在我下面的 junit 测试中，它运行良好。但是，当我尝试在命令按钮中调用 userBean.save 方法时，它给了我一个错误，org.hibernate.HibernateException: /hibernate.cfg.xml not found。

经过一些调试，我可以告诉你错误发生在 hibernateUtil 类 configuration.configure().addAnnotatedClass(userBean.class);

如果我将命令按钮操作更改为欢迎，这是我的欢迎页面的名称，表单通过将我重定向到欢迎页面并在页面上输出 bean 值可以正常工作。这意味着，就我而言，bean 已正确初始化。这很令人困惑，为什么它在我的 junit 测试中工作而不是在我的 jsf 页面上？

```
public class HibernateUtil {

private static final SessionFactory sessionFactory = buildSessionFactory();

private static ServiceRegistry serviceRegistry;

private static SessionFactory buildSessionFactory() {
    try {

        Configuration configuration = new Configuration();
        configuration.configure().addAnnotatedClass(userBean.class);
        serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
        SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry);
        // Create the SessionFactory from hibernate.cfg.xml
        return sessionFactory; 
    }
    catch (Throwable ex) {
        // Make sure you log the exception, as it might be swallowed
        System.err.println("Initial SessionFactory creation failed." + ex);
        throw new ExceptionInInitializerError(ex);
    }
}

public static SessionFactory getSessionFactory() {
    return sessionFactory;
} 
```

}

```
package Beans;
import javax.faces.bean.ManagedBean;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;

import org.hibernate.*;
import controller.HibernateUtil;
import javax.persistence.Table;

@ManagedBean
@Entity
@Table(name = "userBean")
public class userBean {

@Id @GeneratedValue
private int id;

public int getId() {
return id;
}
public void setId(int id) {
this.id = id;
}
private String name;
private int age=0;

public String getName() {
return name;
}
public void setName(String n) {
this.name = n;
}
public int getAge() {
return age;
}
public void setAge(int age) {
this.age = age;
}

//Methods
public void save(){
//HibernateUtil.getSessionFactory().close();
Session session = HibernateUtil.getSessionFactory().getCurrentSession();
session.beginTransaction();

userBean u=new userBean();
u.setName("saveName");
u.setAge(20);

session.save(u);

session.getTransaction().commit();
HibernateUtil.getSessionFactory().close();

}
} 
```

Junittest.java

```
public void test2(){

        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();

        userBean u=new userBean();
        u.setName("tommy");
        u.setAge(20);

        session.save(u);

        session.getTransaction().commit();
        HibernateUtil.getSessionFactory().close();
} 
```

索引.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">
<h:head>
<title>JSF 2: Blank Starting-Point Project</title>
<link href="./css/styles.css" 
  rel="stylesheet" type="text/css"/> 
</h:head>
<h:body>
<h:form>
<h:inputText id="it" value="#{userBean.name}"/>
<h:commandButton id="btn" value="Submit" action="#{userBean.save}"/>
</h:form>
</h:body>
</html> 
```

* * *

## 更多信息

正如我所说，问题来自 configuration.configure().addAnnotatedClass(userBean.class);

因此，当我们跨越这段代码时，我通过调试器并复制了控制台输出。这是工作 Junit 测试的输出

```
000021: Bytecode provider name : javassist
Mar 24, 2013 2:10:21 PM org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
Mar 24, 2013 2:10:21 PM org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
Mar 24, 2013 2:10:21 PM org.hibernate.internal.util.xml.DTDEntityResolver resolveEntity
WARN: HHH000223: Recognized obsolete hibernate namespace        http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/   instead.   Refer to Hibernate 3.6 Migration Guide!
Mar 24, 2013 2:10:21 PM org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null 
```

这是来自不工作的jsf运行的代码

```
14:23:03,988 INFO  [org.hibernate.cfg.Configuration] (http-localhost-127.0.0.1-8080-2) HHH000043: Configuring from resource: /hibernate.cfg.xml
14:23:03,998 INFO  [org.hibernate.cfg.Configuration] (http-localhost-127.0.0.1-8080-2) HHH000040: Configuration resource: /hibernate.cfg.xml
14:23:04,057 ERROR [stderr] (http-localhost-127.0.0.1-8080-2) Initial SessionFactory   creation failed.org.hibernate.HibernateException: /hibernate.cfg.xml not found 
```

实际上，这是我的文件夹结构的图像，其中还显示了我的 src 和已部署的资源 ![在此处输入图像描述](../Images/d2b5bc879364eb760bb1667c2493e446.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:28:12.250

问题的原因是 JUnit 找不到`hibernate.cfg.xml`. 发生这种情况是因为您将所有`*.xml`资源都放入`WEB-INF/classes`文件夹中。在这种情况下，这些资源在 Web 应用程序的类路径中可见，但对 JUnit 测试不可见。

作为解决方案，我建议您执行以下操作：

1.  将所有`*.xml`资源从`WEB-INF/classes`源文件夹的根目录中移动。
2.  确保您的编译器不会忽略`*.xml`文件

作为最终结果，您的`*.xml`资源无论如何都会在`WEB-INF/classes`文件夹中，但您也可以从*普通*类路径中获取这些资源。

请注意，您需要*移动*文件，否则可能会出现版本冲突。

# c# - TouchDevice.Capture() 实际上在 WPF 中做了什么？

> ID：15587880
> 
> 赞同：2
> 
> 时间：2013-03-23T14:28:53.143
> 
> 标签：c#, wpf, touch

我似乎找不到任何真正的文档来说明`TouchDevice.Capture()`真正的作用。我应该何时和/或如何使用它？或者我在哪里可以阅读更多关于它的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:45:55.100

它捕获指定 IInputElement 的触摸输入，与捕获鼠标输入的方式相同（请参阅[MouseDevice.Capture](http://msdn.microsoft.com/en-us/library/system.windows.input.mousedevice.capture.aspx)中的备注）。

当触摸输入被捕获时，即使触摸位置位于元素的命中测试区域之外，元素也会继续接收触摸事件。

您可以尝试使用或不使用捕获的[TouchDevice](http://msdn.microsoft.com/en-us/library/system.windows.input.touchdevice.aspx)中的示例代码，并观察不同的行为。

# performance - 如何在 CUDA 中不使用 atomic 进行总和计算

> ID：15587881
> 
> 赞同：1
> 
> 时间：2013-03-23T14:28:55.867
> 
> 标签：performance, optimization, cuda, sum

在下面的代码中，如何在不使用*atomicAdd的情况下计算***sum_array**值。

 *内核方法

```
__global__ void calculate_sum( int width,
                               int height,
                               int *pntrs,
                               int2 *sum_array )
{
    int row = blockIdx.y * blockDim.y + threadIdx.y;
    int col = blockIdx.x * blockDim.x + threadIdx.x;

    if ( row >= height || col >= width ) return;

    int idx = pntrs[ row * width + col ];

    //atomicAdd( &sum_array[ idx ].x, col );

    //atomicAdd( &sum_array[ idx ].y, row );

    sum_array[ idx ].x += col;

    sum_array[ idx ].y += row;
} 
```

启动内核

```
 dim3 dimBlock( 16, 16 );
    dim3 dimGrid( ( width + ( dimBlock.x - 1 ) ) / dimBlock.x, 
                  ( height + ( dimBlock.y - 1 ) ) / dimBlock.y ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:04:43.820

归约是这类问题的总称。查看[演示文稿](http://www.cse.nd.edu/courses/cse40833/www/kogge_gpu/lectures/logsum.pdf)以获得进一步的解释或使用 Google 获取其他示例。

解决这个问题的一般方法是在线程块内对全局内存段进行并行求和，并将结果存储在全局内存中。然后，将部分结果复制到 CPU 内存空间，使用 CPU 对部分结果求和，然后将结果复制回 GPU 内存。您可以通过对部分结果执行另一个并行求和来避免内存占用。

另一种方法是为 CUDA 使用高度优化的库，例如 Thrust 或 CUDPP，其中包含执行这些操作的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T15:15:57.910

我的 Cuda*非常生锈*，但这大致就是您的操作方式（由“Cuda by Example”提供，我强烈建议您阅读）：

[https://developer.nvidia.com/content/cuda-example-introduction-general-purpose-gpu-programming-0](https://developer.nvidia.com/content/cuda-example-introduction-general-purpose-gpu-programming-0)

1.  对需要求和的数组进行更好的分区：CUDA 中的线程是轻量级的，但不是太多，以至于您只需两个求和即可生成一个，并希望获得任何性能收益作为回报。
2.  此时，每个线程将负责对数据的一部分求和：创建一个与线程数一样大的共享 int 数组，其中每个线程将保存它计算的部分和。
3.  同步线程并减少共享内存数组：

（请把它当作*伪代码*）

```
// Code to sum over a slice, essentially a loop over each thread subset
// and accumulate over "localsum" (a local variable)
...

// Save the result in the shared memory
partial[threadidx] = localsum;

// Synchronize the threads:
__syncthreads();

// From now on partial is filled with the result of all computations: you can reduce partial
// we'll do it the illiterate way, using a single thread (it can be easily parallelized)
if(threadidx == 0) {
    for(i = 1; i < nthreads; ++i) {
        partial[0] += partial[i];
    }
} 
```

然后离开：partial[0] 将保存您的总和（或计算）。

请参阅“CUDA by example”中的点积示例，以获得对该主题的更严格讨论以及运行时间约为 O(log(n)) 的缩减算法。

希望这可以帮助*

# c - 在 C 中使用智能指针

> ID：15587890
> 
> 赞同：1
> 
> 时间：2013-03-23T14:29:47.480
> 
> 标签：c

我被赋予了实现以下`C`功能的任务，该功能实现了`C vector`：

```
 40 CVector *CVectorCreate(int elemSize, int capacityHint, CVectorCleanupElemFn fn)
 41 {
 42     //allocate a new CVector struct
 43     CVector *cvector = (CVector*)calloc(1, sizeof(CVector));
 44     assert(cvector != NULL);
 45     //allocate space for the buffer
 46     cvector->vector = calloc(capacityHint, elemSize);
 47     assert(cvector->vector != NULL);
 48     /*
 49      * Use these in other to make the code more efficient
 50      * and also there is going to have less coding in other to
 51      * perform the same operation
 52      * I'm also going to explicity initialize all the members of
 53      * vector even though I don't need
 54      */
 55     cvector->capacity = capacityHint;
 56     cvector->elemSize = elemSize;
 57     cvector->head = cvector->tail = 0;
 58     return cvector;
 59 } 
```

我还定义`CVector`为以下结构：

```
 17 typedef struct CVectorImplementation {
 18     // include your desired fields here
 19     int head;
 20     int tail;
 21     int numElements;
 22     int capacity;
 23     int elemSize;
 24     void* vector;
 25 }CVector; 
```

但是，在函数的头部`CVectorCreate`，有`CVectorCleanupElemFn`一个我想是用于使用智能指针的，但我不确定如何在我的结构中包含/使用该函数。请有更多经验的人告诉我它的目的是什么`CVectorCleanupElemFn`以及我该如何使用它？我还有以下功能（提莫的建议到位）：

```
 63 void CVectorDispose(CVector *cv)
 64 {
 65     assert(cv != NULL);
 66     // I would imagine cleanUp holds the function
 67     // that empties the buffer
 68     int index = cv->head;
 69     while(index <= tail) {
 70         (cv->cleanupFn)(cv->vector[index]);
            ++index;
 71     }
 72     free(cv->vector);
 73     // finally free the struct cv
 74     free(cv);
 75 } 
```

我试图弄清楚如何将它们绑定在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:58:32.523

如果我理解正确，清理功能用于清理向量中的单个元素。（在 C++ 术语中，它将是元素类型的析构函数。）因此，当您从向量中删除一个元素时，应该为该元素调用清理函数。它可能是这样定义的：

```
typedef void (*CVectorCleanupElemFn)(void*); 
```

所以你只需将函数指针存储在你的结构中

```
typedef struct CVectorImplementation {
    // include your desired fields here
     int head;
     int tail;
     int numElements;
     int capacity;
     int elemSize;
     void* vector;
     CVectorCleanupElemFn cleanupFn;
} CVector; 
```

你会这样称呼它：

```
(*cvector->cleanupFn)(pointerToTheElement) 
```

编辑：在 CVectorDispose 函数中，这个想法是正确的，但它有点错误。您正在存储一个指向缓冲区的 void 指针，因此您需要将其转换为`char*`对其进行算术运算。并且您需要考虑元素大小：

```
(*cv->cleanupFn)((char*)cv->vector + index * cv->elemSize); 
```

并且您的循环是一个元素太长，如果 tail 是最后一个元素之后的索引。应该

```
while(index < tail) 
```

# php - 从第三方站点返回后会话不正确

> ID：15587893
> 
> 赞同：2
> 
> 时间：2013-03-23T14:30:08.430
> 
> 标签：php, session

如果所有处理都在我自己的网站上进行，那么一切正常。会话变量被成功存储和检索。

现在我得到了第三方集成，它是通过 POST 数据处理的。我`session_start()`在每个 php 文件的第一行被调用。

*   **start_process.php** - 如下设置一些会话变量并调用重定向到 response.php 的第三方

    ```
     $_SESSION["id"] = $id       // Echoing these shows the correct values 
     $_SESSION["name"]= $name    // Echoing these shows the correct values 
    ```

*   **response.php** - 此页面接收来自第三方的响应并尝试从会话变量中获取数据

    ```
     $id = $_SESSION["id"]           // This comes out to be blank
     $name = $_SESSION["name"]       // This comes out to be blank 
    ```

在我的处理页面上，即response.php，我试图取回会话值，我没有取回会话变量。

在 SO 上搜索，很少有帖子建议检查

```
echo session_id(); 
```

在第一页和返回我的网站的后面的页面上会有所不同。进一步搜索显示以下的值需要为空

```
echo ini_get('session.cookie_domain'); 
```

这确实是空白。现在我被卡住了，因为我看到这个值是空白的，即使会话没有正确加载。

你能建议下一步做什么吗？有调试吗？有什么提示可以解决这个问题吗？

* * *

## 更新

### start_process.php

有一个表单，其发布操作是第三方网站的 url... 作为

```
<?php session_start(); 
$_SESSION["Check"] = "Abc";
echo session_id();
>
<form name="myform" action="http://<ThirdPartyUrl.com>/pathToSomePage.jsp" method="POST">
          <!-- some  hidden fields with value  and some other text fields -->
</form> 
```

### 响应.php

第三方在发布请求中再次向我的响应页面提供响应，在该页面我直接测试 POST 变量的输出，在这里我尝试使用我的会话变量

```
<?php session_start(); 
echo $_SESSION["Check"];
echo session_id(); // This is different from the one printed in the start_process.php page
?> 
```

我不认为第三方托管在同一台服务器上，因为目前我在共享主机上，第三方肯定有自己的服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T00:20:53.317

不看更多代码很难知道（start_process.php 如何挂钩第三方代码，第三方如何返回 response.php）。这里有几个猜测：

**理论 1：第三方代码干扰了您的会话（如果托管在同一台服务器上）**

此第三方集成是否托管在您的同一台服务器上？如果是这样，我怀疑第三方可能正在结束/重新创建，或以其他方式修改您的会话。

**理论 2：第三方使用单独的域重定向回您的站点**

您是否有可能从*mydomain.com*开始，第三方重定向回*www.mydomain.com*（或类似的东西）？尽管这两个域看起来应该相同，但就 PHP 会话而言，它们完全不同，您最终会得到不同的会话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T19:05:34.443

在处理购物车支付网关集成时，我处理过类似的问题。如果最终通过浏览器访问响应脚本（即用户在第 3 方站点上完成后被重定向到 response.php），会话 ID 和 cookie 将被保留。如果通过来自 3rd 方站点的服务器端请求联系您的响应脚本，则该请求将被视为一个全新的会话。在这种情况下，许多集成允许您发送“直通”变量，该变量将与第 3 方站点生成的其余数据一起发送回您的响应脚本。您可以使用此变量将用户会话连接到您稍后收到的服务器端请求（例如，您可以创建一个关联这两个值的数据库）。或者你可以“作弊” 系统。如果您每次都将响应脚本位置与您的请求一起传递，则可以在其中构建自己的传递变量。所以而不是像

`<responseURL>www.mysite.com/response.php</responseURL>`

你可以发送

`<responseURL>www.mysite.com/response.php?key=abcd1234</responseURL>`

我建议直接将 key 参数设置为会话 ID，因此您必须构建一些可以在两者之间转换的简单内容（如我上面提到的表格）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T08:44:40.273

首先，您需要在使用它之前启动一个会话。在将任何值分配给您的代码中的会话有效类型之前： session_start(); 不要忘记销毁/取消设置会话。希望它会起作用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-26T08:49:33.173

使用具有某些指定过期时间的 cookie！它会运作良好。用一些代码更新了您的问题，以便编码人员可以调试它！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T09:32:37.417

简短的回答是：找到饼干！

您可以在域或目录级别放松。请参阅[session_set_cookie_params()](http://www.php.net/manual/en/function.session-set-cookie-params.php)规范。

第三部分呢。response.php 是从同一个浏览器还是从另一个 Web 应用程序请求的，所以它有相同的 cookie 吗？在我看来，没有。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-01T16:16:23.670

解决问题需要分析流程步骤以确定每次执行的位置

如果第三方应用程序将自身调用到响应的 URL 并且不是重定向到客户端，则会话是不同的。

例子：

*   客户端导航到 start_process.php 并为客户端创建会话
*   start_process.php 调用第三方
*   第三方应用调用 response.php 并为第三方创建会话

检查会话 ID 是否由客户端 cookie 维护并在服务器中验证非常重要。启动进程的客户端和第三方是具有自己会话的应用程序的不同“客户端”。

* * *

根据您的问题显示您可能正在做的图表示例。

[![](../Images/f5ec67e2a5bf77459a592e6f0ecfa440.png)](https://i.stack.imgur.com/lXPv3.png)

可能您不能直接从客户端调用第三方。在客户端调用您主机上的一个页面，该页面调用第三方并捕获响应（例如使用 curl）

图表示例：

[![](../Images/837a7bdbe1d7da9df33b1c9bb929ddc9.png)](https://i.stack.imgur.com/uXJgc.png)

# sql - 股票价格的数据库建模

> ID：15587895
> 
> 赞同：5
> 
> 时间：2013-03-23T14:30:18.320
> 
> 标签：sql, database, database-design

我最近接到了一项任务，要为一个适合存储 140 多家公司的股票价格的数据库建模。所有这些公司每天每 15 分钟收集一次数据，持续 8.5 小时。我现在面临的问题是如何设置数据库以在给定这些数据的情况下实现快速搜索/获取。

一种解决方案是将所有内容存储在一个包含以下列的表中：

```
| Company name | Price | Date | Etc... | 
```

或者我可以为每家公司创建一个表格，只存储价格和收集数据的日期（以及 atm 未知的其他参数）。

您对这些解决方案有何看法？我希望问题得到足够详细的解释，否则请告诉我。

任何其他解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T15:08:18.407

鉴于您可能生成大量记录，我认为您担心性能 - 140 家公司 * 4 个数据点/小时 * 8.5 小时 * 250 个交易日/年意味着您每年要查看大约 120 万个数据点.

现代关系数据库系统可以在单个表中轻松处理这么多记录 - 受一些重要考虑因素 - 我认为存储 100 年的数据点没有问题。

所以，是的，你的初始设计可能是最好的：

公司名称 | 价格 | 日期 | 等等... |

创建公司名称和日期的索引；这将允许您回答以下问题：

*   x公司的最高股价是多少
*   公司 x 在 y 日的股价是多少
*   在第 y 日，最高股价是多少

为了帮助防止性能问题，我会构建一个测试数据库，并用示例数据填充它（[dbMonster](http://sourceforge.net/projects/dbmonster/)等工具使这变得容易），然后构建您（认为您）将针对真实系统运行的查询；使用数据库系统的调优工具来优化这些查询和/或索引。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-06T13:56:20.913

除了已经说过的话，我想说以下几点：不要使用“公司名称”或“股票代码”之类的东西作为您的主键。您可能会发现，股票价格有两个经常被忽视的重要特征：

*   有些公司可以在多个证券交易所报价，因此每个证券交易所的报价不同。
*   一些公司在同一证券交易所多次报价，但使用不同的货币。

因此，一个适当通用的解决方案应该使用（ISIN、货币、证券交易所）三元组作为报价的标识符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-23T15:01:06.300

第一个更重要的问题是将针对该表执行的查询的类型和使用模式是什么。这是一个在线事务处理 (OLTP) 应用程序，其中绝大多数查询是针对单个记录，还是最多针对一小组记录？或者是在线分析处理应用程序，其中大多数查询需要读取和处理大量数据以生成聚合并进行分析。这两种非常不同类型的系统应该以不同的方式建模。

如果它是第一种类型的应用程序 (OLTP)，那么您的第一个选项会更好，但是查询的使用模式和类型对于确定要放置在表上的索引类型仍然很重要。

如果它是一个 OLAP 应用程序（并且存储数十亿股票价格的系统听起来更像一个 OLAP 应用程序），那么您设置的数据结构可能会更好地组织以存储预先聚合的数据值，甚至可以一直使用基于[星型模式](http://en.wikipedia.org/wiki/Star_schema)的多维数据库，如[OLAP 多维数据集](http://en.wikipedia.org/wiki/OLAP_cube)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-23T15:19:32.313

把它们放在一张桌子上。现代数据库引擎可以轻松处理您指定的那些卷。

行号 | 股票代码 | 价格时间InUTC | 价格代码 | 询价 | 投标价格 | 体积

*   rowid：身份唯一标识符。
*   股票代码而不是公司。公司有多种类型的袜子。
*   PriceTimeInUTC 是将任何日期时间标准化为特定时区。
*   还有 datetime2 （更准确）。
*   PriceCode 用于识别价格：期权/期货/CommonStock、PreferredStock 等
*   AskPrice 是买入价
*   BidPrice 是销售价格。
*   交易量（用于买入/卖出）可能对您有用。

分别有一个 StockCode 表和一个 PriceCode 表。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-06-12T20:26:14.397

那是蛮力方法。第二次添加可搜索因素它可以改变一切。一个更灵活和优雅的选择是星型模式，它可以扩展到任何数量的数据。我是一个私人团体，我自己也在做这件事。

# xml - XSLT 排序元素不起作用

> ID：15587903
> 
> 赞同：2
> 
> 时间：2013-03-23T14:31:24.217
> 
> 标签：xml, sorting, xslt

我正在尝试对列表中显示的所有演员姓名进行排序。一定有一些简单的东西我错过了，但我就是不知道它是什么。

```
 <xsl:key name="kName" match="actor/name" use="." />

    <xsl:template match="/">
    <xsl:element name="html">
        <xsl:element name="head">
            <xsl:element name="title">
                <xsl:text>Actors list</xsl:text>
            </xsl:element>
            <xsl:element name="h2">Actors list</xsl:element>
        </xsl:element>
        <xsl:element name="body">
            <xsl:variable name="actorNames" select="/movies/movie/cast/actors/actor/name"/>
            <xsl:apply-templates select="$actorNames[generate-id() = generate-id(key('kName', .)[1])]">
                <xsl:sort select="./name"/>
            </xsl:apply-templates>
        </xsl:element>
    </xsl:element>
</xsl:template>

<xsl:template match="name">
      <xsl:element name="a">
          <xsl:attribute name="href">actor_details.php?movieID=<xsl:value-of select="../../../../@movieID"/>&amp;actorID=<xsl:value-of select="../@actorID"/></xsl:attribute>
              <xsl:value-of select="." />
      </xsl:element>
      <xsl:element name="br" />
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:51:18.190

您不需要 xsl:key 进行排序，您可以直接在应用模板中应用[排序。](http://www.dpawson.co.uk/xsl/sect2/N6461.html#d9253e19)

这有效：

```
 <xsl:key name="kName" match="actor/name" use="." />

 <xsl:template match="/">
    <xsl:element name="html">
      <xsl:element name="head">
        <xsl:element name="title">
          <xsl:text>Actors list</xsl:text>
        </xsl:element>
        <xsl:element name="h2">Actors list</xsl:element>
      </xsl:element>
      <xsl:element name="body">

        <!-- your way -->
        <xsl:variable name="actorNames" select="/movies/movie/cast/actors/actor/name"/>
        <xsl:apply-templates select="$actorNames[generate-id() = generate-id(key('kName', .)[1])]">
           <xsl:sort select="."/>
        </xsl:apply-templates>

        <!-- my way -->
        <xsl:apply-templates select="movies/movie/cast/actors/actor">
          <xsl:sort select="./name"/>
        </xsl:apply-templates>

      </xsl:element>
    </xsl:element>
  </xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T09:44:55.370

你实际上做错的是这个。您的应用模板正在选择名称元素。您的 xsl:sort 键是 ./name，它是相对于正在排序的节点进行评估的。由于名称元素没有名称子项，因此没有选择任何内容。

但正如 rene 指出的那样，您使用密钥也完全没有必要。

# java - 如何将图像和字符串都放在 JOptionPane 的按钮中

> ID：15587908
> 
> 赞同：0
> 
> 时间：2013-03-23T14:31:32.480
> 
> 标签：java, swing, jbutton, jlabel, joptionpane

我正在尝试制作一个 JOptionPane，其中包含带有图像和文本的按钮。JLabel 和 JButton 都允许同时显示文本和图像，但是使用 JLabel 会阻止实际按钮显示，而使用 JButton 会使按钮在单击后不执行任何操作。我发现使其工作的唯一方法是单独使用 String 或 ImageIcon ，这显然不是我想要的。

```
 JLabel[] members = {
       new JLabel(one.name,one.image,JLabel.LEFT), 
       new JLabel(two.name,two.image,JLabel.LEFT),  
       new JLabel(three.name,three.image,JLabel.LEFT), 
       new JLabel(four.name,four.image,JLabel.LEFT), 
       new JLabel("Continue",new ImageIcon("mog.gif"),JLabel.LEFT)};
    JButton[] members = {
       new JButton(one.name,one.image), 
       new JButton(two.name,two.image),  
       new JButton(three.name,three.image), 
       new JButton(four.name,four.image), 
       new JButton("Continue",new ImageIcon("mog.gif"))};
    String[] members = {
       one.name, 
       two.name,  
       three.name, 
       four.name, 
       "Continue"};

        choice= JOptionPane.showOptionDialog(null, "Here are your party members", "Party Members", JOptionPane.DEFAULT_OPTION,JOptionPane.QUESTION_MESSAGE, new ImageIcon("mog.gif"), members, members[4]); 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:02:04.517

> 我发现使它工作的唯一方法是单独使用 String 或 ImageIcon

查看[Compound Icon](http://tips4java.wordpress.com/2009/03/29/compound-icon/)和[Text Icon](http://tips4java.wordpress.com/2009/04/02/text-icon/)。您可以使用图标和文本（表示为图标）创建自定义图标：

```
import java.awt.*;
import javax.swing.*;

public class OptionPaneButton
{
    private static void createAndShowUI()
    {
        ImageIcon icon = new ImageIcon("About16.gif");
        JButton button = new JButton();
        TextIcon text = new TextIcon(button, "Maybe");
        CompoundIcon compound =
            new CompoundIcon(CompoundIcon.Axis.X_AXIS, button.getIconTextGap(), icon, text);

        Object options[] = {compound, "Not Now", "Go Away"};

        int value = JOptionPane.showOptionDialog(null,
            "Would you like some green eggs to go with that ham?",
            "A Silly Question",
            JOptionPane.YES_NO_CANCEL_OPTION,
            JOptionPane.QUESTION_MESSAGE,
            null,
            options,
            options[2]);

        System.out.println(value);

        if (value == JOptionPane.YES_OPTION)
        {
            System.out.println("Maybe");
        }
        else
        {
            System.out.println("Not today");
        }
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }

} 
```

# bash - URxvt 作为 shell-to-run-things 或如何退出 bash ，但执行到目前为止输入的字符串？

> ID：15587912
> 
> 赞同：1
> 
> 时间：2013-03-23T14:31:49.423
> 
> 标签：bash

我正在寻找的是替代您可能通过在各种平铺 WM 中按 Mod+R 或在 Gnome DE 中按 Alt+F2 的所有这些东西的替代品——一个从那里运行东西的小窗口。没有丢失我的 bash 别名和其他东西，我感到非常难过，因为这些 shell（至少我现在可以使用的那些）是非交互式的，并且它们的交互性不能在运行时设置为选项。

这就是为什么我决定使用 URxvt 窗口作为“一个命令的外壳”。在我的 WM 中，我绑定了 Mod+R 快捷方式来执行

```
/bin/bash -c 'export ONE_COMMAND_SHELL=t && urxvt -name one_command_shell' 
```

并放

```
[ -v ONE_COMMAND_SHELL ] && bind -x '"\C-m":"exit"' 
```

在我的 ~/.bashrc

这样我可以区分一个 URxvt 实例，它将成为“一个命令的 shell”，并设置 Cm 组合（是的，它也适用于 Enter）以退出 shell，因此，URxvt。问题是如何在退出之前执行到目前为止输入的字符串？

我发现了两个潜在的线索：

a) 使用 BASH_COMMAND

```
BASH_COMMAND
     The command currently being executed or about to be executed,  unless  the
     shell  is executing a command as the result of a trap, in which case it is
     the command executing at the time of the trap. 
```

但我没有让它工作，因为

```
[ -v ONE_COMMAND_SHELL ] && bind -x '"\C-m":"exec $BASH_COMMAND exit"' 
```

会导致`exec`exec `exec`。

b) SIGCHLD 上的陷阱！

如果您放置，它可能对您有用

```
[ -v ONE_COMMAND_SHELL ] && {
    PS1=
    eaoc() { exit; }
    trap eaoc SIGCHLD
} 
```

*在 ~/.bashrc 的末尾*。PS1 可能是非空的，但它可能没有子shell 调用，或者在生成提示之前陷阱将执行并且shell 将退出。这使 URxvt 保持打开状态，直到分叉的进程退出，因此可能被认为是解决方案的中途。

c) DEBUG 的陷阱。

DEBUG 陷阱*在*任何要执行的简单命令之前和每个函数中的第一个命令之前执行。如果我们通过 OC_SHELL 提供一个数字，并且会统计执行的命令的数量，比如……</p>

```
/bin/bash -c 'export OC_SHELL=0 && urxvt -name one_command_shell' 
# note a zero ----------------^ 
```

在 ~/.bashrc 的末尾

```
[ -v OC_SHELL ] && {
    export PS1=
    eaoc() { echo $OC_SHELL && [ $(( OC_SHELL++ )) -ge 1 ] && wait $! && exit; }
    trap eaoc DEBUG
} 
```

我们又失败了。因为我们的流程，fork like

```
$ gimp & 
```

与父母一起死去。如何处理？

有趣的是，DEBUG 陷阱在命令输入*后*立即执行，此陷阱不会等待进程返回其状态码或后台进程的 pid，以防使用`&`.

好的，这就是如何[创建独立于 bash 的进程](https://stackoverflow.com/questions/4916421/create-process-independent-of-bash)需要以某种方式将输入的字符串包装到`(nohup … &)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:19:39.203

这对我有用：

```
one_command_execute() {
    eval $(echo "$READLINE_LINE") &
    exit
}

[ -v ONE_COMMAND_SHELL ] && bind -x '"\C-m":"one_command_execute"' 
```

另一个版本没有`eval`：

```
one_command_checkexit() {
    [ -v ONE_COMMAND_DONE ] && exit
    ONE_COMMAND_DONE=1
}

[ -v ONE_COMMAND_SHELL ] && PROMPT_COMMAND=one_command_checkexit 
```

在命令退出之前，这不会关闭窗口。要在后台自动执行所有内容，请添加：

```
[ -v ONE_COMMAND_SHELL ] && bind '"\C-m":" & \n"' 
```

# javascript - 为什么console.log会无限循环直到溢出，而document.write不会

> ID：15587918
> 
> 赞同：2
> 
> 时间：2013-03-23T14:32:17.073
> 
> 标签：javascript, console

在 javascript 中，如果你有一个使用 console.log 的无限循环，它会将所有内容写入控制台，直到它溢出。但是，如果您使用 document.write 执行此操作，在无限循环中，它将冻结页面并且不会加载任何内容。有谁知道这是什么原因？

例子在这里

```
<html>
<head>
    <script type='text/javascript'>
    var x = 0;

    function conslog() {
        var x = 0;
        while (1) {
            console.log(x);
            x++;
        }
    }

    function dowrite() {
        var x = 0;
        while (1) {
            document.write(x);
            x++;
        }
    }
    </script>
</head>
<body>
    <button type='button' onClick='conslog()'>console</button>
    <button type='button' onClick='dowrite()'>write</button>
</body>
</html> 
```

[http://shodor.org/~amalani/infinite.html](http://shodor.org/~amalani/infinite.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:37:53.730

记录消息的查看过程独立于脚本。当脚本在无限循环中运行时，有时渲染器会拦截它并显示排队的消息。

相反，当[挂起的](http://www.w3.org/TR/html5/scripting-1.html#pending-parsing-blocking-script)[*解析阻止*](http://www.w3.org/TR/html5/scripting-1.html#pending-parsing-blocking-script)[脚本](http://www.w3.org/TR/html5/scripting-1.html#pending-parsing-blocking-script)完成运行[`document.write`](http://www.w3.org/TR/html5/dom.html#dom-document-write)时，写入将被解析的缓冲区。只是它没有完成……</p>[](http://www.w3.org/TR/html5/scripting-1.html#pending-parsing-blocking-script)

*如果您使用 DOM 附加新元素，它们可能会输出。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T14:37:58.990

当 Javascript 未执行时，页面将重新绘制，如果它正在运行循环，则页面不会重新绘制，因为 Javascript 仍在执行。页面上运行 Javascript 时，控制台可能会重新绘制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:36:14.103

很可能是因为 HTML 页面的大小没有有限的限制，但控制台调试日志会吗？我猜你的 CPU 负载也上升了，而浏览器实际上只是处理了一个循环。我猜这是使用某种形式的代码`while (1) { console.log ("something") };`？

你还没有说明这是用什么浏览器，所以你可能会发现不同的浏览器有不同的控制台日志行为。那些将其实现为不断增长的列表或环形缓冲区的人也可能会遭受浏览器挂起的影响。*

# javascript - 即使 getter 方法正确，JSF 页面上的值也不会更新

> ID：15587923
> 
> 赞同：0
> 
> 时间：2013-03-23T14:32:30.237
> 
> 标签：javascript, jsf, jsf-2, navigation, backing-beans

在 JSF 页面（比如说 page1）上，我单击一个链接，该链接通过 JavaScript 触发弹出窗口。弹出窗口出现，JSF page1 停留在后台。

在弹出窗口中，我也工作 JSF。当我完成弹出窗口时，我单击弹出窗口上的一个按钮，该按钮调用 window.close() JavaScript 函数来关闭它，并且该按钮的操作方法更新同一页面的管理 bean 中的值1 和返回页面 page1 的路径以将我重定向到启动弹出窗口的同一位置。所以 getter 方法获得了很好的价值，但我的 page1 没有得到更新，只是在手动刷新之后。

两个 bean（“调用者”弹出 bean 和“接收者”bean）都是 SessionScoped。

**编辑**

*   page1 == 测试.xhtml
*   tests.xhtml 的支持 bean 是 TestsBean
*   我单击 value="Test no. #{o.noGrid} 的链接之一
*   onclick 属性触发弹出窗口的 JavaScript 脚本
*   xhtml 的片段

    ```
     <tbody>
                            <ui:repeat var="o" value="#{testsBean.gridTableGeneral}"
                                varStatus="status">
                                <h:form>
                                    <h:panelGroup rendered="#{status.even}">
                                        <tr>
                                            <td class="order-table-even-row"><h:commandLink
                                                    action="#{gridPopUpBean.showGridTest()}" target="_blank"
                                                    onclick="confirmGrid('Are you sure you want to start the test no. #{o.noGrid}?');"
                                                    value="Test no. #{o.noGrid}">
                                                    <f:setPropertyActionListener value="#{o.noGrid}"
                                                        target="#{testsBean.noGridToShow}" />
                                                </h:commandLink></td>
                                            <td class="order-table-even-row">#{o.totalAccess}</td>
                                            <td class="order-table-even-row">#{o.maxPercentage} %</td>
                                            <td class="order-table-even-row"><h:commandLink
                                                    action="#{testsBean.showGridDetaildPage()}">
                                                    <img src="/juritest/resources/img/details.png"
                                                        alt="details" />
                                                </h:commandLink></td>
                                        </tr>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{status.odd}">
                                        <tr>
                                            <td class="order-table-odd-row"><h:commandLink
                                                    action="#{gridPopUpBean.showGridTest()}" target="_blank"
                                                    onclick="confirmGrid('Are you sure you want to start the test no. #{o.noGrid}?');"
                                                    value="Test no. #{o.noGrid}">
                                                    <f:setPropertyActionListener value="#{o.noGrid}"
                                                        target="#{testsBean.noGridToShow}" />
                                                </h:commandLink></td>
                                            <td class="order-table-odd-row">#{o.totalAccess}</td>
                                            <td class="order-table-odd-row">#{o.maxPercentage} %</td>
                                            <td class="order-table-odd-row"><h:commandLink
                                                    action="#{testsBean.showGridDetaildPage()}">
                                                    <img src="/juritest/resources/img/details.png"
                                                        alt="details" />
                                                </h:commandLink></td>
                                        </tr>
                                    </h:panelGroup>
                                </h:form>
                            </ui:repeat> 
    ```

*   此页面的支持 bean TestBean.java 的片段是

    ```
     @ManagedBean
           @SessionScoped
           public class TestsBean implements Serializable {

       private static final long serialVersionUID = 1L;

           @EJB
       TestsManager testsManager;

       @ManagedProperty(value = "#{applicationContainer}")
       private ApplicationContainer container;

       @ManagedProperty(value = "#{accessesBean}")
       private AccessesBean accessesBean;

           ...
           getters / setter for the ui:repeat

           ...

      public void extractInformationFromDB(int gridCategory) {

    // extract from the container the right category grids
    gridList = testsManager.extractFromContainerRightCategory(container, gridCategory);
    // extract from the right grids array list the grid numbers
    setNoGrid(testsManager.setNoGrid(gridList));

    // extract the accesses
    accessList = accessesBean.getAccessInformation(gridCategory);
    // extract from the access array list the grid numbers
    setNoAccessGrid(accessesBean.setNoAccessGrid(accessList));

    setGridTableGeneral(testsManager.createGridTableGeneral(gridList,
            getNoGrid(), accessList, getNoAccessGrid())); 
    ```

    }

*   完成后的弹出窗口以 answerResult.xhtml 结尾

    ```
     <ui:repeat var="n"
                    value="#{answerResultBean.accessWrongAnswerColumnWrapperList}">
                    <hr />
                    <h:outputText value="#{n.noQuestion}. #{n.question}" />
                    <table style="text-align: left;">
                        <tr>
                            <td>
                                <h:form>
                                    <h:graphicImage
                                        value="/resources/img/#{n.rightGridAnswerA ? 'tick' : 'x'}Small.png"
                                        alt="#{n.rightGridAnswerA ? 'right' : 'wrong'} " />
                                </h:form></td>
                            <td>
                                <h:outputText value="a) #{n.a}"
                                    style="#{n.userAnswerA ? 'font-weight:bold;' : 'font-weight:normal;'}" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <h:form>
                                    <h:graphicImage
                                        value="/resources/img/#{n.rightGridAnswerB ? 'tick' : 'x'}Small.png"
                                        alt="#{n.rightGridAnswerB ? 'right' : 'wrong'} " />
                                </h:form></td>
                            <td>
                                <h:outputText value="b) #{n.b}"
                                    style="#{n.userAnswerB ? 'font-weight:bold;' : 'font-weight:normal;'}" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <h:form>
                                    <h:graphicImage
                                        value="/resources/img/#{n.rightGridAnswerC ? 'tick' : 'x'}Small.png"
                                        alt="#{n.rightGridAnswerC ? 'right' : 'wrong'} " />
                                </h:form></td>
                            <td>
                                <h:outputText value="c) #{n.c}"
                                    style="#{n.userAnswerC ? 'font-weight:bold;' : 'font-weight:normal;'}" />
                            </td>
                        </tr>
                    </table>
                    <hr />
                </ui:repeat>
            </div>
            <div id="loginDiv">
                <h:commandButton style="text-align:left"
                    onclick="closeWindow(); return true;"
                    action="#{answerResultBean.closeButton()}" value="Close" />
            </div> 
    ```

*   弹出窗口的最后一页的支持 bean 是 AnswerResult.java

    ```
     @ManagedBean
     @SessionScoped
     public class AnswerResultBean implements Serializable {

        private static final long serialVersionUID = 1L;

    @ManagedProperty(value = "#{testsBean}")
    private TestsBean testsBean;

        private AccessAnswerResultWrapper accessAnswerResultWrapper;
    private ArrayList<AccessWrongAnswerColumnWrapper> accessWrongAnswerColumnWrapperList;

    // getter / setter START

    /**
     * @param testsBean The testsBean to set.
     */
    public void setTestsBean(TestsBean testsBean) {
    this.testsBean = testsBean;
     } 
    ```

    ...

    ```
     public String closeButton() {

    testsBean.extractInformationFromDB(GridHelper.convertingGridCategoryFromStringToInteger(getAccessAnswerResultWrapper().getCategory()));
    return Utils.path + "/tests/tests"; 
    ```

    }

*   我单击带有 value="Close" 触发器和关闭弹出窗口的事件的弹出窗口上的按钮，然后执行 closeButton() 方法，执行来自 TestBean.java 的提取方法，其中设置我在 ui:repeat 中用作属性的属性在 tests.xhtml 中，最后动作方法 closeButton() 将我重定向到 tests.xhtml，它又再次调用支持 bean TestBean.java。

我知道它一团糟，我知道它不是 DRY 并且设计有缺陷，但我正在不断学习。

在最后阶段，我重定向到tests.xhtml，在我设置它使用的属性之前，tests.xhtml 调用bean 并且应该用新值更新它。但它不会得到更新，只是在手动刷新之后。

# php - Facebook php sdk - 没有显示信息

> ID：15587926
> 
> 赞同：1
> 
> 时间：2013-03-23T14:33:05.567
> 
> 标签：php, facebook, sdk

我是 facebook 登录系统的新手。我已将以下代码放在[http://beta.jokesnfunnypics.com/login](http://beta.jokesnfunnypics.com/login)中。我只是复制了给定的代码，并将给定的应用程序 ID 替换为我的，并将应用程序密码替换为我的。但是获得许可后，页面中没有显示任何信息。请帮我。提前致谢。

```
<?php
require 'src/facebook.php';
$facebook = new Facebook(array(
  'appId'  => 'my-app-id-undisclosable',
  'secret' => '-my-app-secret-undisclosable',
));
// Get User ID
$user = $facebook->getUser();
if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
}

?>

<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <title>php-sdk</title>
    <style>
      body {
        font-family: 'Lucida Grande', Verdana, Arial, sans-serif;
      }
      h1 a {
        text-decoration: none;
        color: #3b5998;
      }
      h1 a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <h1>php-sdk</h1>

    <?php if ($user): ?>
      <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php else: ?>
      <div>
        Login using OAuth 2.0 handled by the PHP SDK:
        <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
      </div>
    <?php endif ?>

    <h3>PHP Session</h3>

    <?php if ($user): ?>
      <h3>You</h3>
      <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">
      <?php echo $user_profile[name]; ?>
    <?php else: ?>
      <strong><em>You are not Connected.</em></strong>
    <?php endif ?>
  </body>
</html> 
```

# html - 制作一个始终保持其比率的网站

> ID：15587927
> 
> 赞同：0
> 
> 时间：2013-03-23T14:33:14.030
> 
> 标签：html, css

我一直在尝试建立一个始终保持其比率并适应用户屏幕尺寸的网站，但我无法实现。

我已经开始构建一个简单的固定宽度/高度框架，如下所示：http: [//jsfiddle.net/WxNrh/](http://jsfiddle.net/WxNrh/)并开始使用它，但我总是卡住。

我想要实现的是最大宽度为 800 像素，并且取决于用户屏幕分辨率（或者我缩小浏览器窗口的程度），网站会相应地缩小，但始终保持其宽度/高度比。

这是我的固定网站：

```
<div id="wrapper">
<div id="header">Header</div>

<div id="content">
    <div id="left">Left</div>
    <div id="right">Right</div>
</div>

<div id="footer">Footer</div> 
```

和CSS：

```
#wrapper{width: 800px; height: 400px;}
#header{background-color: red; width: 800px; height: 100px;}
#left{float: left; background-color: yellow; width: 200px; height: 200px;}
#right{float: left; background-color: orange; width: 600px; height: 200px;}
#footer{clear: both; background-color: blue; width: 800px; height: 100px;} 
```

我真的很感激任何帮助！:)

编辑：

我用这个 css 得到了想要的效果：

```
#wrapper{max-width: 800px;}
#header{background-color: red; width: 100%; padding-top: 12.50%;}
#left{float: left; background-color: yellow; width: 25%; padding-top: 25.00%;}
#right{float: left; background-color: orange; width: 75%; padding-top: 25.00%;}
#footer{clear: both; background-color: blue; width: 100%; padding-top: 12.50%;} 
```

但问题是它通过使用填充来工作，这会迫使我的 div 内容向下，这意味着它不是很有用——因为内容不在它应该在的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T15:04:23.673

瞧。[http://jsfiddle.net/rudiedirkx/WxNrh/2/show/](http://jsfiddle.net/rudiedirkx/WxNrh/2/show/)

`padding`救援。虽然它不是很有用，因为您的内容可能不适合盒子......

魔术是相对填充和绝对定位：

```
.outer {
    height: 0;
    position: relative;
    /* padding-bottom: 25%; in the actual div like #header */
}
.inner {
    position: absolute;
    width: 100%;
    height: 100%;
} 
```

以及一大堆包装器 div =( (`.inner`和`.outer`)：

```
<div class="outer" id="wrapper">
    <div class="inner">
        <div class="outer" id="header">
            <div class="inner">Header</div>
        </div>
        <div class="outer" id="content">
            <div class="inner">
                <div class="outer" id="left">
                    <div class="inner">Left</div>
                </div>
                <div class="outer" id="right">
                    <div class="inner">Right</div>
                </div>
            </div>
        </div>
        <div class="outer" id="footer">
            <div class="inner">Footer</div>
        </div>
    </div>
</div> 
```

有一种情况非常有用。有时您确实需要保持该纵横比：响应式视频。对于内容框和整个页面：没那么有用。

但是你问！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:52:44.013

尝试这样的事情：

```
#wrapper{width: 800px; height: 400px;}
#header{background-color: red; width: 100%; height: 25%;}
#left{float: left; background-color: yellow; width: 25%; height: 25%;}
#right{float: left; background-color: orange; width: 75%; height: 25%;}
#footer{clear: both; background-color: blue; width: 100%; height: 25%;} 
```

使用百分比可能不适用于`float: left;`. 看看情况如何。它失败了，您可以尝试使用`max-width`and`max-height`或`min-width`and `min-height`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T16:11:33.220

## 使用图像驱动比率

我发现进行比率的最佳方法通常是使用一`img`组您想要的比率，并以此驱动容器大小。

**[这是一个修改原始代码的示例小提琴](http://jsfiddle.net/WxNrh/6/)**：

**HTML**

```
<div id="wrapper">
    <img class="ratioDriver" src="http://dummyimage.com/200x100/000/fff.gif&text=2w:1h+Ratio" />
    <div id="header">Header</div>

    <div id="content">
        <div id="left">Left</div>
        <div id="right">Right</div>
    </div>

    <div id="footer">Footer</div>
</div> 
```

**CSS**

```
body {
    margin: 0;
    padding: 0;
}

#wrapper{
    width: 100%; 
    max-width: 800px; 
    position: relative;
    margin: 0 auto;
}

.ratioDriver {
   width: 100%;   
   display: block; 
}

#header{
    background-color: red; 
    width: 100%; 
    height: 25%; /* 100 / 400 = .25 = 25% */
    position: absolute;
    top: 0;
    left: 0;
}
#left{
    position: absolute;
    top: 25%;
    left: 0;
    background-color: yellow; 
    width: 25%; /* 200 / 800 = .25 = 25% */
    height: 50%; /* 200 / 400 = .5 = 50% */
}
#right{
    position: absolute;
    top: 25%;
    left: 25%;
    background-color: orange; 
    width: 75%; 
    height: 50%;
}
#footer{
    position: absolute;
    top: 75%;
    left: 0;
    background-color: blue; 
    width: 100%; 
    height: 25%;
} 
```

## 处理内容的两种方法

您仍然必须决定如何处理您的内容。

**选项1**

您是否希望它在组件上使用[溢出时具有单独的滚动条](http://jsfiddle.net/WxNrh/8/)`overflow: auto`？如果内容大小未知，这是最佳选择。

**选项 2**

您是否想尝试缩放它，这将需要固定大小的内容供您计算因素。这实际上只适用[于现代浏览器](http://www.sitepoint.com/new-css3-relative-font-size/)（在 Firefox 19 和 IE9 中运行良好，但 Chrome 25 在撰写本文时无法正常运行）。这个[小提琴大致实现了它](http://jsfiddle.net/WxNrh/24/)使用这些添加到上面的 css 并在 html 中添加了一些内容：

```
html {
    font-size: 1vw;
}
 #header{
    font-size: 3rem;
}
#left{
    font-size: .99rem;
}
#right{
    font-size: 1.25rem;
}
#footer{
    font-size: 1.3rem;
} 
```

# c# - 使用 StreamReader 逐行读取文件

> ID：15587934
> 
> 赞同：1
> 
> 时间：2013-03-23T14:33:44.587
> 
> 标签：c#, windows-8, windows-runtime, streamreader

我正在尝试使用 StreamReader 在 Windows 8 C# 文件中逐行读取一个简单的文本文件。我尝试了许多解决方案，但没有一个奏效。有时文件被读取，有时不是（类为空，只有空值）。如果程序正在运行，它永远不会工作，但是当我设置调试器并使用它逐行运行时，它有时会工作。这是为什么？这就是来源：

```
public async void read(string fileName)
    {

        string File = Path.Combine(Package.Current.InstalledLocation.Path, "myfolder", fileName);

        StorageFolder folder = await StorageFolder.GetFolderFromPathAsync(Path.GetDirectoryName(File));

        Stream s = await folder.OpenStreamForReadAsync(Path.GetFileName(File));
        StreamReader streamReader = new StreamReader(s);

        myClass.name = streamReader.ReadLine();
        myClass.desc = streamReader.ReadLine();
        myClass.number = int.Parse(streamReader.ReadLine());
        myClass.house = new House[myClass.number];

        for (int i = 0; i < myClass.number; i++)
        {
            myClass.house[i] = new House();
            myClass.house[i].name = streamReader.ReadLine();
            myClass.house[i].size = double.Parse(streamReader.ReadLine());
        }  
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:52:39.640

仅`async void`当函数是事件处理程序（例如按钮按下）时才应使用。通常，您应该`async Task`改用。

将您的方法签名从更改`void`为`Task`：

```
public async Task read(string fileName) 
```

然后从您的调用代码中，`await`它：

```
await yourclass.read("c:\\my_filename.txt"); 
```

# asp.net - system.web.script 命名空间不可用

> ID：15587939
> 
> 赞同：0
> 
> 时间：2013-03-23T14:34:03.917
> 
> 标签：asp.net, dll

我正在使用 Visual Studio 2010 Express Edition，当我创建 Web 服务时，我没有得到 system.web.script 命名空间。这是什么原因。？

问候，

西瓦吉斯·S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T10:37:27.757

对于那些寻找对**System.Web.Script**或**System.Web.Script.Serialization**的引用的人...添加对**System.Web.Extensions** (4.0) 的引用，然后添加

> 使用 System.Web.Script.Serialization；

# sql-server - 当列是字符时，查询失败 column_name 为空

> ID：15587940
> 
> 赞同：0
> 
> 时间：2013-03-20T18:53:29.497
> 
> 标签：sql-server, hibernate

我正在使用带有 sql_server 的休眠，但发现以下问题：

```
select col_code 
from table 
where col_code is null 
```

查询失败：sql error 0, SQLState S1093 The column col_code is not valid

col_code 是一个 char(5)，可以从其他数据库浏览器中读取。它只是来自休眠 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-13T20:01:02.007

I got the same error when I was doing an native SQL query from Java EE/Hibernate. The SQL statement that I passed to persistence was "SELECT Count (1) From Table" and I made the mistake of including a mapping class as a parameter. COUNT(1) returns an integer, so it doesn't need to be mapped. Hope that helps. I would check that you're mapping is right.

# c# - 扩展没有“this”的 System.Web.WebPage

> ID：15587942
> 
> 赞同：0
> 
> 时间：2013-03-23T14:34:21.327
> 
> 标签：c#

我正在尝试扩展`System.Web.WebPage`该类以公开一个名为`RenderZone`：

```
using System.Web.WebPages;

public static class WebPageExtensions
{
    public static HelperResult RenderZone(this WebPage webPage, int zone) {
    return webPage.RenderPage("~/_RenderWidgets.cshtml", new {ZoneId = zone});
    }
} 
```

这可行，但为了在页面文件（.cshtml）中调用扩展方法，我必须在方法调用前加上`this`例如

```
@this.RenderZone(1) 
```

有没有办法扩展 WebPage 类型，以便我可以`this`以类似于从 cshtml 文件中调用 RenderPage 的方式省略？

```
@RenderPage("~/_PageToRender.cshtml") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T14:42:25.940

另一种方法是创建一个新类，您的页面派生自该类，而不是`WebPage`. 例如：

```
public class WebPagePlus : WebPage
{
    public HelperResult RenderZone(int zone) {
       return this.RenderPage("~/_RenderWidgets.cshtml", new {ZoneId = zone});
    }
} 
```

然后从中派生而不是 WebPage

```
public class MyWebPage : WebPagePlus // WebPage
{
//...
} 
```

# javascript - onreadystatechange 函数永远不会被调用

> ID：15587947
> 
> 赞同：1
> 
> 时间：2013-03-23T14:34:47.683
> 
> 标签：javascript, ajax, onreadystatechange

好的...所以我的代码很简单。唯一的问题是要调用的函数 onreadystatechange 永远不会被执行。我输入了一个警报来显示 readyState 和 xmlhttp 的状态，分别显示为 1 和 0。我不明白为什么状态没有改变。我也确实知道其他一切正常。我放入警告框以显示我从表单中获取的用户名......它正确显示它。请在这里帮我....我只是想不通...

```
function checkAvailability() {
    var xmlhttp;
    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    if (xmlhttp) {
        var regform = document.getElementById("regform");
        var username = regform.username.value;
        xmlhttp.open("POST", "http://localhost:8080/UsernameAvailability", true);
        xmlhttp.onreadystatechange = function() {
            alert(xyz);
        }
        xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xmlhttp.send("username=" + username.value);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T14:40:01.067

您需要切换 和 的调用顺序，`xmlhttp.onreadystatechange`以`xmlhttp.open`确保`onreadystatechange`在打开之前注册回调。

```
xmlhttp.onreadystatechange = function() {
  alert(xyz);
};
xmlhttp.open("POST", "http://localhost:8080/UsernameAvailability", true); 
```

# ajax - 验证失败后的 JSF Primefaces 表单错误

> ID：15587951
> 
> 赞同：1
> 
> 时间：2013-03-23T14:35:19.180
> 
> 标签：ajax, validation, jsf, primefaces

一般来说，我是 JSF/Java 的新手，但几天来一直在尝试解决这个问题。

我有一个卡在验证上的表单。当所有条目都有效时，一切正常。我打破验证的那一刻（例如不提供所需的值），表单就会卡住。发生的一件事是我无法更正看起来无效的条目并重新发布。此外，我有一个 selectOneMenu 的级联 ajax 调用，它突然开始失败......即使这不是表单的无效部分。

我注意到级联下拉菜单似乎在其覆盖的 equals 方法中引发了空指针异常。

我很茫然。

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:composition template="/templates/layout.xhtml">
    <ui:define name="content">
        <p:ajaxStatus onstart="statusDialog.show();" onsuccess="statusDialog.hide();"/>  

        <p:dialog modal="true" widgetVar="statusDialog" header="Status"   
                draggable="false" closable="false">  
        <p:graphicImage value="/resources/images/ajaxloadingbar.gif" />  
</p:dialog>
        <h:form id="form">
            <p:panel id="panel"
                header="Please ensure your personal details are accurate"
                style="margin-bottom:10px;">
                <p:messages id="msgs" />
                <h:outputText
                    value="Please ensure your personal details are up to date and accurate within the Admin Direct system. Please note that this application only supports GMD customers, so unless you are within GMD, or are a user of the GMD Admin Direct service, please do not enter your details or attempt to use the application for administrative support." />
                <h:panelGrid columns="3" cellpadding="5" id="grid">

                    <h:outputText value="First Name:" style="font-weight:bold" />
                    <p:inputText id="firstName"
                        value="#{personalDetailsBean.user.firstName}" 
                        requiredMessage="First name is required..." style="width:250px" />
                    <p:message id="firstNameMessage" for="firstName" />

                    <h:outputText value="Last Name:" style="font-weight:bold" />
                    <p:inputText id="lastName"
                        value="#{personalDetailsBean.user.lastName}" 
                        requiredMessage="Last name is required..." style="width:250px" />
                    <p:message id="lastNameMessage" for="lastName" />

                    <h:outputText value="Select Function:" style="font-weight:bold" />
                    <p:selectOneMenu id="functions"
                        value="#{personalDetailsBean.user.function}" 
                        style="width:250px">
                        <f:selectItem itemLabel="Select Function" itemValue="" />
                        <f:selectItems value="#{personalDetailsBean.functions}" var="func"
                            itemLabel="#{func.functionName}" itemValue="#{func}" />
                        <f:converter converterId="functionConverter" />
                    </p:selectOneMenu>
                    <p:message id="functionMessage" for="functions" />

                    <h:outputText value="Select Site" style="font-weight:bold" />
                    <p:selectOneMenu id="sites"
                        value="#{personalDetailsBean.user.site}" 
                        style="width:250px">
                        <f:selectItem itemLabel="Select Site" itemValue="" />
                        <f:selectItems value="#{personalDetailsBean.sites}" var="sit"
                            itemLabel="#{sit.siteName}" itemValue="#{sit}" />
                        <f:converter converterId="siteConverter" />
                        <p:ajax update="region" event="change" process="@this"/>
                    </p:selectOneMenu>
                    <p:message id="siteMessage" for="sites" />

                    <h:outputText value="Region" style="font-weight:bold" />
                    <h:outputText id="region"
                        value="#{personalDetailsBean.user.site.region.regionName}" />
                    <p:message id="regionMessage" for="region" />

                    <h:outputText value="Email" style="font-weight:bold" />
                    <p:inputText id="email" value="#{personalDetailsBean.user.email}"
                        required="true"
                        validatorMessage="Invalid email address format"
                        style="width:250px">
                    <f:validateRegex
                       pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                        <f:validateLength minimum="2" />
                    </p:inputText>
                    <p:message id="emailMessage" for="email" />
                </h:panelGrid>
                <p:separator />
                <p:commandButton value="Save" id="btnSubmit" actionListener="#{personalDetailsBean.saveUser}" process="@all" update="panel" />
            </p:panel>
        </h:form>
    </ui:define>
</ui:composition>
</html> 
```

非常感谢任何建议。

问候

SM

# amazon-ec2 - phpmyadmin 显示白页

> ID：15587953
> 
> 赞同：1
> 
> 时间：2013-03-23T14:35:26.763
> 
> 标签：amazon-ec2, phpmyadmin, wamp, amazon

我在 Windows amazon ec2 实例上安装了 wamp 服务器。

Phpmyadmin 打开正常，显示主页。但是当我点击任何东西时，例如数据库、导入、导出等，它只会在左侧显示数据库列表，在中间显示一个空白页。这是截图

[http://tinypic.com/r/2yv7z3o/6](http://tinypic.com/r/2yv7z3o/6)

我打开了错误日志，但错误日志中没有出现错误。

我找不到解决此问题的方法，因此非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T01:09:59.220

我有同样的问题，尝试完全卸载您正在使用的程序，然后重新下载 XAMPP for windows。我从这里下载：http: [//www.apachefriends.org/en/xampp-windows.html#641](http://www.apachefriends.org/en/xampp-windows.html#641)。这是 Windows 8 的教程：http: [//myownhomeserver.com/2012/12/how-to-install-xampp-1-8-on-windows-8/](http://myownhomeserver.com/2012/12/how-to-install-xampp-1-8-on-windows-8/)。在那之后你应该很好。

# gnuplot - 使用填充曲线的奇怪插值

> ID：15587954
> 
> 赞同：0
> 
> 时间：2013-03-23T14:35:30.773
> 
> 标签：gnuplot

我有一个这样的数据文件：

```
1 1 2
2 2 3
3 4 nan
4 5 6 
```

我想使用以下方法绘制它：

```
plot "bla" u 1:2:3 w filledcurves, "" u 1:2 w lp, "" u 1:3 w lp 
```

问题是第一部分完全忽略了第 3 行，即使 nan 仅在 $3 中。即使我在 2 美元中有一个值 (4)，它也会插入并跳过它。

我如何使它不忽略该值？

我可以通过将 nan 替换为在我的情况下应该存在的值 - (3+6)/2 来解决问题，然后它也会绘制 4。这有两个问题 - 我必须编写一个脚本来查找文件周围的 nans，并且它还会在我使用时绘制一个点，`w lp`就好像那里有一个值，但没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T17:41:59.743

你是在问 gnuplot 用来做一些它不打算做的事情。幸运的是，有一个有点 hacky 的解决方案。您需要使用 2 列版本的填充曲线，它考虑您的数据点来形成一个闭环。在这种情况下，您要绘制第 1 列和第 2 列中的内容，然后绘制第 3 列和第 1 列中的内容（以相反的顺序）。例如：

```
1 1
2 2
3 4
4 5
4 6
3 nan
2 3
1 2 
```

如果您的数据文件如下所示，您可以将其绘制为：

```
plot 'datafile' u 1:2 w filledcurves 
```

现在我很确定您实际上并不想重新生成数据文件，所以最简单的方法是使用 unix 工具为您完成：

```
plot "< sed 'x;1!H;$!d;x' test.dat | awk '{print $1,$3}' | cat test.dat -" u 1:2 w filledcurves 
```

这应该有效。请注意，如果您安装了丑陋的`sed`命令，则可以替换为。`tac`

# java - 在运行时获取类名

> ID：15587957
> 
> 赞同：1
> 
> 时间：2013-03-23T14:35:44.330
> 
> 标签：java, runtime, agent

我尝试通过使用类文件转换器和简单代理来获取新对象的名称，但我唯一能做的就是获取类名，而不是变量名。有没有办法做到这一点？我的例子：我有一个简单的主要：

```
public static void main(String[] args) {

    int z=1;
    if(z==0){
        Cube cube1= new Cube(2,3);
        System.out.println("Cube:"+ cube.area());

    }
    else{
        Cyrcle cyrcle1= new Cyrcle(2);
        System.out.println("Cyrcle:"+ cyrcle.area());
    }

} 
```

和一个类文件转换器：

```
public class SimpleTransformer implements ClassFileTransformer{
    public byte[] transform(ClassLoader    loader,
            String              className,
            Class<?>            classBeingRedefined,
            ProtectionDomain    protectionDomain,
            byte[]              classfileBuffer)
            throws IllegalClassFormatException {

      System.out.println(className);

       return classfileBuffer;
    }
} 
```

我想打印打印“cyrcle1”对象，但这种方式只打印类型 Cyrcle。

# css - 保持图像之间的 div 位置

> ID：15587959
> 
> 赞同：1
> 
> 时间：2013-03-23T14:35:46.213
> 
> 标签：css, html, position

我有 3 个`<div>`这样的：

```
-----------------------------------------
|         |        div2        |        |
|  div1   |--------------------|  div3  |
|         |////////new div/////|        |
-----------////////////////////---------- 
```

**CSS**

```
.parentdiv{
position:relative;
}
div1,div2,div3{
position:relative
float:left} 
```

我试着用它做新`<div>`的`position:relative`，`float` 但做不到。

我不想使用`position:absolute`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T14:39:24.263

将三个 div`float:left`或`display:inline`彼此放置，然后将中间的一分为二。

```
<div class="A">
</div>
<div class="B">
     <div class="upper">
     </div>
     <div class="lower">
     </div>
</div>
<div class="C">
</div> 
```

和 CSS 之类的

```
 .A,.B, .C
    {
       float:left;
       width:30%;
       height:200px;
       border:1px Solid #CCC;
    }
    .B .upper
   {
      width:100%;
      height:50%;
      background-color:Yellow;
   }
   .B .lower
   {
    width:100%;
    height:50%;
    background-color:Green;
   } 
```

看到这个[小提琴](http://jsfiddle.net/manishmishra121/rbM3r/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:44:35.063

`div`将内部元素包裹在 contains中`div`。如果您希望所有`div`元素都具有相同的高度，则需要在三个兄弟上指定一个高度，然后为每个 Wrapped 指定一个 0.5 * 上述高度的高度`div`。

**HTML**

```
 <div id="d1">Div1</div>
    <div id="dc">
        <div id="d2">Div 2</div>
        <div id="d3">Div 3</div>
    </div>
    <div id="d4">Div4</div> 
```

**CSS**

```
#d1,#dc,#d4{
    float:left;
    background: red;
    height: 40px;
    width: 40px;
    text-align: center;
}

#dc div{
    height: 20px;
} 
```

**工作示例：http:** [//jsfiddle.net/x64Vp/](http://jsfiddle.net/x64Vp/)

# php - 从 CSV 文件导入日期到 mySql

> ID：15587960
> 
> 赞同：3
> 
> 时间：2013-03-23T14:35:57.110
> 
> 标签：php, mysql

我儿子在他的托管站点上为家人建立了一个设施，以将旅行数据记录在 MySql 文件中。这些然后显示在地图上的网页上（使用谷歌地图，但私人托管。）

不幸的是，我儿子几周前被送进了医院，现在还在那里，所以他建议如果我把它贴在这里可能会得到一个问题的答案。

mysql 数据是通过使用 php 脚本从记录器生成的 csv 文件中导入来创建的。不幸的是，我的儿子不记得他从哪里获得的剧本。

此脚本适用于日期字段（这是至关重要的）除外。

脚本如下：

```
$tot = 0;
$handle = fopen($_FILES["uploaded"]["tmp_name"], "r");
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    for ($c=0; $c < 1; $c++) {

if($data[0] !='Latitude'){ 
                mysql_query("INSERT INTO positions(
                Latitude,
                Longitude,
                DateOccurred,
                Altitude,
                Speed,
                Angle
                )VALUES(
                    '".mysql_real_escape_string($data[0])."',
                    '".mysql_real_escape_string($data[1])."',
                    '".mysql_real_escape_string($data[2])."',
                    '".mysql_real_escape_string($data[16])."',
                    '".mysql_real_escape_string($data[15])."',
                    '".mysql_real_escape_string($data[8])."'

                )")or die(mysql_error());
}
    $tot++;}
}
fclose($handle); 
```

这会将所有内容导入 mysql，除了第三项（$data[2]），它是日期并导入为零（即 00:00:00 00:00）。

这里是否有任何善良的编码人员可以告诉我如何纠正这个问题，或者将我指向其他可以提供帮助的地方。

如果需要更多信息，请告诉我。

谢谢

编辑：这是 sql 表结构

```
|//**ID**//|int(11)|No|
|FK_Users_ID|int(11)|No|
|FK_Trips_ID|int(11)|Yes|NULL
|FK_Icons_ID|int(11)|Yes|NULL
|Latitude|double|No|
|Longitude|double|No|
|Altitude|double|Yes|0
|Speed|double|Yes|0
|Angle|double|Yes|NULL
|DateAdded|timestamp|No|CURRENT_TIMESTAMP
|DateOccurred|timestamp|Yes|0000-00-00 00:00:00
|Comments|varchar(255)|Yes|NULL
|ImageURL|varchar(255)|Yes|NULL
|SignalStrength|int(11)|Yes|NULL
|SignalStrengthMax|int(11)|Yes|NULL
|SignalStrengthMin|int(11)|Yes|NULL
|BatteryStatus|tinyint(4)|Yes|NULL 
```

以下是 CSV 文件内容的示例：

```
Latitude,Longitude,DateOccurred,ID,IconName,Comments,TripName,ImageURL,Angle,CellID,SignalStrength,SignalStrengthMin,SignalStrengthMax,BatteryStatus,Source,Speed,Altitude
51.1923274,-3.102753383,20/03/2013 14:17,2352,,,dentist,,287.2,,,,,,0,7.71666666,13
51.19254205,-3.103862483,20/03/2013 14:17,2353,,,dentist,,285.4,,,,,,0,7.665222216,14
51.19268602,-3.105032683,20/03/2013 14:17,2354,,,dentist,,272.1,,,,,,0,9.054222214,11.1 
```

如果还需要什么，请告诉我。

谢谢

**编辑 2**

我尝试了 Havelock 的解决方案 - 选项 3。

由于它仍然在 DateOccurred 字段中返回零，我添加了另一条指令，将 csv 中的日期插入到 mysql 数据库中的“comments”文本字段中。

代码如下

```
if($data[0] !='Latitude'){ 
           $timestamp = strtotime($data[2]);
           mysql_query("INSERT INTO positions(
           Latitude,
           Longitude,
           DateOccurred,
           Comments,
           Altitude,
           Speed,
           Angle
           )VALUES(
               '".mysql_real_escape_string($data[0])."',
               '".mysql_real_escape_string($data[1])."',
               '".mysql_real_escape_string($data[2])."',
               '".mysql_real_escape_string(date('Y-m-d H:i:s', $timestamp))."',
               '".mysql_real_escape_string($data[16])."',
               '".mysql_real_escape_string($data[15])."',
               '".mysql_real_escape_string($data[8])."'

                )")or die(mysql_error()); 
```

结果是在读取的所有记录中插入“评论”字段的数据

```
1969-12-31 18:00:00 
```

而csv中的信息是

```
20/03/2013 14:17 
```

如果我省略这些行

```
$timestamp = strtotime($data[2]);
and 
'".mysql_real_escape_string(date('Y-m-d H:i:s', $timestamp))."', 
```

注释字段包含来自 csv 文件的正确数据（作为文本）。

我不确定这个信息有多重要——但我认为这可能意味着什么。

**编辑 3**

由于 'DateTime::createFromFormat()' 应该适用于 PHP 5.3.22，我重新访问了脚本并输入了一些代码来测试它。我添加了这个

```
$date = DateTime::createFromFormat('d/m/Y H:i', $data[2]);
           echo $date->format('Y-m-d H:i:s'); 
```

回声是打印结果以查看它们是什么。脚本现在看起来像这样

```
if($data[0] !='Latitude'){ 
           $date = DateTime::createFromFormat('d/m/Y H:i', $data[2]);
           echo $date->format('Y-m-d H:i:s');
           mysql_query("INSERT INTO positions(
           Latitude,
           Longitude,
           DateOccurred,
           Altitude,
           Speed,
           Angle
           )VALUES(
               '".mysql_real_escape_string($data[0])."',
               '".mysql_real_escape_string($data[1])."',
               '".mysql_real_escape_string(date('Y-m-d H:i:s'))."',
               '".mysql_real_escape_string($data[16])."',
               '".mysql_real_escape_string($data[15])."',
               '".mysql_real_escape_string($data[8])."'

                )")or die(mysql_error());
} 
```

这导致脚本打印日期并在 mysql 字段中以正确的格式输入日期。

但是-正在打印和存储的日期是***当前日期和时间***，而不是存储在 csv 文件中的日期，因此该语句似乎忽略了 $data[2}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:50:31.693

检查这个：

```
// ...

$formatFromFile = 'Y-m-d'; // your format of date in csv file
$date = DateTime::createFromFormat($formatFromFile, $data[2]);

mysql_query("INSERT INTO positions(
            Latitude,
            Longitude,
            DateOccurred,
            Altitude,
            Speed,
            Angle
            )VALUES(
                '".mysql_real_escape_string($data[0])."',
                '".mysql_real_escape_string($data[1])."',
                '".mysql_real_escape_string($date->format('Y-m-d H:i:s'))."',
                '".mysql_real_escape_string($data[16])."',
                '".mysql_real_escape_string($data[15])."',
                '".mysql_real_escape_string($data[8])."'

            )")or die(mysql_error());
// ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:50:12.130

您可以使用[DateTime::createFromFormat()](http://www.php.net/manual/en/datetime.createfromformat.php)创建一个 DateTime 对象，然后以 MySQL 可读的方式输出它。例如，假设您的日期以“dmY”格式写入，例如 2010 年 1 月 10 日的“10012010”。要了解有关格式规范的更多信息，请阅读上面链接的 PHP 规范页面。

您可以使用以下函数将 'dmY' 格式转换为 mysql-format

```
function convert($date) {
  $d = DateTime::createFromFormat('dmY', $date);
  return $d->format('Y-m-d H:i:s');
} 
```

附带说明一下，我建议您看一下 MySQL 的[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)，这是一个更快的选项，可以将 cvs 文件导入到表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:54:02.943

这取决于 CSV 文件中日期的格式。阅读有关函数 strtotime 的信息，也许是解决方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T15:00:57.953

在我看来，问题是由于 CSV 文件中的日期/时间格式不同。根据有关插入表中的错误数据的信息，我假设该列的类型是`DATETIME`. 此类型具有以下格式`YYYY-MM-DD HH:MM:SS`，因此，如果 CSV 文件中的日期格式类似于`05/23/2012 5:35 p.m.`或其他格式，这不是预期的格式，则出现问题是可以理解的。在我看来，你有两个选择：

**选项 1：**
将日期保存在 CSV 文件中，以便符合 MySQL 的[`DATETIME`](http://dev.mysql.com/doc/refman/5.1/en/datetime.html). 这就像

```
2013-03-23 15:45:25 
```

然后插入应该正常工作。

**选项 2：**
此选项可能比前一个选项更“复杂”，特别是如果您不那么倾向于（通过阅读问题的全文）。您需要`DateTime`在 PHP 脚本中创建一个新对象，并`format()`在保存数据时使用它的方法。
不幸的是，我不知道 CSV 文件的格式，所以我只能做出一个疯狂的猜测。假设文件中的日期格式如下`03/24/2013 5:24 PM`

```
if($data[0] !='Latitude'){ 
           $date = DateTime::createFromFormat('m/d/Y g:i a', $data[2]);
           mysql_query("INSERT INTO positions(
           Latitude,
           Longitude,
           DateOccurred,
           Altitude,
           Speed,
           Angle
           )VALUES(
               '".mysql_real_escape_string($data[0])."',
               '".mysql_real_escape_string($data[1])."',
               '".mysql_real_escape_string($date->format('Y-m-d H:i:s'))."',
               '".mysql_real_escape_string($data[16])."',
               '".mysql_real_escape_string($data[15])."',
               '".mysql_real_escape_string($data[8])."'

           )")or die(mysql_error());
} 
```

如果我对 CSV 文件中的格式有误`'m/d/Y g:i a'`，您可以查看[DateTime 文档](http://www.php.net/manual/en/datetime.createfromformat.php)以了解如何通过选择适当的格式来修复它，因此它适合您的情况。

**选项 3：**
由于您的托管服务器上似乎安装了 PHP 版本 < 5.3，请尝试以下操作：

```
if($data[0] !='Latitude'){ 
           $timestamp = strtotime(str_replace('/', '-', $data[2]));
           mysql_query("INSERT INTO positions(
           Latitude,
           Longitude,
           DateOccurred,
           Altitude,
           Speed,
           Angle
           )VALUES(
               '".mysql_real_escape_string($data[0])."',
               '".mysql_real_escape_string($data[1])."',
               '".mysql_real_escape_string(date('Y-m-d H:i:s', $timestamp))."',
               '".mysql_real_escape_string($data[16])."',
               '".mysql_real_escape_string($data[15])."',
               '".mysql_real_escape_string($data[8])."'

           )")or die(mysql_error());
} 
```

**更新**
我已编辑`$timestamp`相关行以匹配您的 CSV 文件提供的格式。

# asp.net - 如何将 Linq 缓存到 Twitter OEmbed 端点结果？

> ID：15587964
> 
> 赞同：0
> 
> 时间：2013-03-23T14:36:08.247
> 
> 标签：asp.net, caching, twitter, oembed, linq-to-twitter

我正在使用 L2T 中的 oembed 功能在 asp.net 应用程序中嵌入推文。Twitter 建议缓存结果，因为它是速率限制的。如何将 Linq 缓存到 twitter oembed 结果？我可以使用页面缓存或配置文件缓存，还是有更好的 Linq 缓存方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T02:02:47.853

LINQ to Twitter 没有任何内置缓存支持。通常，对此有很多选择，因此假设您想为自己的应用程序设计的缓存策略对我来说是不明智的。也就是说，我将确定您可能要考虑的一些选项。

1.  正如您所提到的，输出缓存是一种选择，如果您将内容添加到控件，您可以有效地将页面缓存一段时间。这可能有效，也可能无效，具体取决于您对其他页面内容的新鲜度要求。您还可以将其与其他类型的服务器缓存一起使用。

2.  您可以使用 HttpContext Cache，它使您可以控制项目的缓存时间。这将允许您对项目设置超时，并且您需要检查该项目是否在缓存中，如果它在那里，则使用它，或者如果没有，则执行 Twitter 查询以获取它。还有一个选项可以在缓存驱逐项目时指定回调，以便您可以进行查询并刷新它。

3.  您可以使用 3rd 方缓存解决方案，例如 Enterprise Library Cache。这很好，有很多功能，而且很容易设置。

4.  如果您在 Azure 上，则可以使用 Azure 缓存服务，该服务非常适合可伸缩性。

# freeswitch - 使用 freeswitch 的呼出电话

> ID：15587966
> 
> 赞同：2
> 
> 时间：2013-03-23T14:36:17.560
> 
> 标签：freeswitch

这是我的外部 sip_profile：

```
<gateway name="outbound">
  <param name="realm" value="10.0.1.5:5062"/>
  <param name="username" value="1001"/>
  <param name="password" value="1234"/>
  <param name="dtmf-type" value="rfc2833"/>
  <param name="expire-seconds" value="600"/>
  <param name="register" value="false"/>
  <param name="caller-id-in-from" value="false"/>
</gateway> 
```

我的拨号方案是这样的：

```
<extension name="outbound_pstn">
  <condition field="destination_number" expression="^(.*)$">
    <action application="set" data="effective_caller_id_number=${outbound_caller_id_number}"/>
    <action application="bridge" data="sofia/gateway/outbound/$1"/>
  </condition>
</extension> 
```

我使用 HT503 作为我的 ATA。Freeswitch 在 IP 10.0.1.5 上运行，ATA 在 10.0.1.9

我似乎无法拨打外线电话。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T22:22:28.777

`realm`应该是远程端的地址，在您的示例中，它设置为 freeswitch 的本地地址

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T19:56:04.500

如果您想将 Freeswitch 连接到另一个 PBX/交换机，您应该设置：

```
<param name="register" value="true"/> 
```

不需要 PSTN 注册。使用这样的东西：

```
<include>
  <gateway name="sipmarket">
    <param name="username" value="user1"/>
    <param name="realm" value="sipmarket.net"/>
    <param name="from-user" value="user1"/>
    <param name="from-domain" value="sipmarket.net"/>
    <param name="password" value="strong_password"/>
    <param name="expire-seconds" value="300"/>
    <param name="register" value="true"/>
    <param name="register-transport" value="udp"/>
  </gateway>
</include> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T22:33:25.543

您应该查看[http://wiki.freeswitch.org/wiki/Main_Page](http://wiki.freeswitch.org/wiki/Main_Page)并查找出站网关页面。除非您愿意，否则您不必定义领域。

您还需要让网关实际注册到 SIP 提供商才能拨打电话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-21T15:05:35.357

如果你数字

索非亚状态网关

你能看到你的网关“出站”吗？否则你必须数字：

索菲亚个人资料外部重新扫描

如果您将网关放在外部 sip 配置文件下。

# r - R中列表中项目的频率

> ID：15587973
> 
> 赞同：2
> 
> 时间：2013-03-23T14:36:50.437
> 
> 标签：r, histogram

我有一个非常大的 csv 文件。我想计算第二列中项目的频率以绘制直方图。我的数据示例：

```
0010,10.1.1.16
0011,10.2.2.10
0012,192.168.2.61
0013,192.168.173.19
0014,10.2.2.10
0015,10.2.2.10
0016,192.168.2.61 
```

我使用了以下内容：

```
 inFile <- read.csv("file.csv")
  summary(inFile)
  hist(inFile$secondCol) 
```

摘要的输出：

```
 X0010                X10.1.1.16
  Min.   :11.00   10.2.2.10     :3   
  1st Qu.:12.25   192.168.173.19:1   
  Median :13.50   192.168.2.61  :2   
  Mean   :13.50                      
  3rd Qu.:14.75                      
  Max.   :16.00 
```

因为文件非常大，我没有得到正确的直方图。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T14:38:56.670

只需使用`table`.

```
DF <- structure(list(V1 = 10:16, V2 = structure(c(1L, 2L, 4L, 3L, 2L, 
             2L, 4L), .Label = c("10.1.1.16", "10.2.2.10", 
             "192.168.173.19", "192.168.2.61"), class = "factor")), 
             .Names = c("V1", "V2"), class = "data.frame", 
             row.names = c(NA, -7L))

table(DF$V2)
#     10.1.1.16      10.2.2.10 192.168.173.19   192.168.2.61 
#         1              3              1              2 
```

如果你想要一个 data.frame 出来，你可以使用`as.data.frame`：

```
as.data.frame(table(DF$V2))
#             Var1 Freq
# 1      10.1.1.16    1
# 2      10.2.2.10    3
# 3 192.168.173.19    1
# 4   192.168.2.61    2 
```

既然你说你想要 a `histogram`，这可以直接使用来完成，`ggplot2` *而不*必先得到计数，如下所示：

```
require(ggplot2)
ggplot(data = DF, aes(x = V2)) + geom_histogram(aes(y = ..count..)) 
```

![在此处输入图像描述](../Images/ad26e8a5e500b5a3583af271e73db0a1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-25T06:24:47.533

我们也可以在列上执行 as.numeric() 。

```
typeof(data$hourofcrime)
# gives me a list
#> typeof(data$hourofcrime)
#[1] "list"
hour_crime_rate <- as.numeric(data$hourofcrime)
hist(hour_crime_rate) 
```

# iphone - UINavigationBar 标题内的 UISegmentedControl 看起来没有格式化

> ID：15587978
> 
> 赞同：0
> 
> 时间：2013-03-23T14:37:27.660
> 
> 标签：iphone, uinavigationcontroller, uinavigationbar, uisegmentedcontrol

我正在尝试在 UINavigationController 的标题中添加 UISegmentedControl。然而，格式看起来像这样（即它的丑陋）。

![在此处输入图像描述](../Images/8b0c5dba7059f752cb585e6756a6ecdd.png)

当我希望它看起来像这样时（漂亮:)。有人可以帮忙吗？？

![在此处输入图像描述](../Images/9f82835e79843c3bf5e42032f145a91f.png)

我在[这里](http://redartisan.com/2010/6/27/uisegmented-control-view-switching-revisited)阅读了 Red Artisan 的流行示例。但是我并没有将其作为我的第一个视图（就像 Red Artisan 那样），所以我已经将很多代码从 App Delegate 中移出。在 App Delegate 中，我确实将此屏幕设置为 UINavigationController，其 rootView 为 UIViewController。

```
GenInfoViewController *genInfoController = [[GenInfoViewController alloc] initWithNibName:@"GenInfoViewController" bundle:nil];

UINavigationController *genInfoNavController = [[UINavigationController alloc] initWithRootViewController:genInfoController]; 
```

然后在 GenInfoViewController.m 的 viewDidLoad 中，我执行以下操作：

```
self.segmentedControl = [[UISegmentedControl alloc] initWithItems:@[@"Info",@"Map"]];
self.navigationItem.titleView = self.segmentedControl; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T14:41:45.660

要设置分段控件的样式，请将`segmentedControlStyle`属性设置为下列之一：

```
UISegmentedControlStylePlain
UISegmentedControlStyleBordered
UISegmentedControlStyleBar
UISegmentedControlStyleBezeled 
```

例如：

```
self.segmentedControl = [[UISegmentedControl alloc] initWithItems:@[@"Info",@"Map"]];
self.segmentedControl.segmentedControlStyle = UISegmentedControlStyleBordered;
self.navigationItem.titleView = self.segmentedControl; 
```

     这里有一些关于样式段控件的相关 Q+As：

*   [自定义分段控制](https://stackoverflow.com/questions/1281601/custom-uisegmentedcontrol)
*   [去除圆角](https://stackoverflow.com/questions/1834244/uisegmentedcontrol-without-rounded-corner)
*   [更改字体大小](https://stackoverflow.com/questions/2280391/change-font-size-of-uisegmentedcontrol)
*   [更改选定段的颜色](https://goddess-gate.com/dc2/index.php/post/454)

**如果您想尝试自定义分段控件**，请查看所有可用的[CocoaControls](http://www.cocoacontrols.com/search?q=segment&source=controls)和[CocoaPods](http://www.cocoacontrols.com/search?q=segment&source=cocoapods)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T14:42:00.570

是的，您需要在 UISegmented 控件上设置属性“segmentedControlStyle”。

您的选择如下：

```
typedef enum {
   UISegmentedControlStylePlain,
   UISegmentedControlStyleBordered,
   UISegmentedControlStyleBar, // This is probably the one you want!
   UISegmentedControlStyleBezeled,
} UISegmentedControlStyle; 
```

所以以下应该可以解决问题：

```
self.segmentedControl = [[UISegmentedControl alloc] initWithItems:@[@"Info",@"Map"]];
self.segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
self.navigationItem.titleView = self.segmentedControl; 
```

您可能还需要考虑的一件事是设置分段控件的“tintColor”。

```
self.segmentedControl = [UIColor blackColour]; 
```

会给你留下这样的东西：

![UI分段控制](../Images/d55baf2844356a6e3100aa3171336b95.png)

显然，您也可以进行许多其他自定义。看看这里的文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UISegmentedControl_Class/Reference/UISegmentedControl.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)

# opacity - 如何在 CAKeyFrameAnimation 中使用关键时间来为图层的不透明度设置动画？

> ID：15587982
> 
> 赞同：4
> 
> 时间：2013-03-23T14:37:58.123
> 
> 标签：opacity, labels, cakeyframeanimation

我正在尝试为图层设置动画，以使不透明度在大约 0.2 秒内从 0 变为 1，将不透明度保持在 1 秒，然后将不透明度恢复为 0。我正在尝试使用关键时间来做到这一点，但我无法正确处理。

```
CAKeyframeAnimation *opacityLabel = [CAKeyframeAnimation animationWithKeyPath: @"opacity"];

// 0.2 seconds fade in, 1 second hold, 0.2 seconds fade out
[opacityLabel setDuration: 1.4];
[opacityLabel setDelegate: self];
[opacityLabel setValue: @"countLabel" forKey: @"verify"];
[opacityLabel setValues: [NSArray arrayWithObjects: [NSNumber numberWithFloat: 1.0], [NSNumber numberWithFloat: 1.0], [NSNumber numberWithFloat: 0], nil]];
[opacityLabel setKeyTimes: [NSArray arrayWithObjects: [NSNumber numberWithFloat: 0.2], [NSNumber numberWithFloat: 1.2], [NSNumber numberWithFloat: 1.4], nil]];

[[tomorrowCountLabel layer] addAnimation: opacityLabel forKey: @"opacityUp"]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T20:36:45.180

你快到了。关键时间应该是介于 0 和 1 之间的值。您可以将它们视为百分比。此外，您的动画应该从不透明度 0 而不是 1 开始。因此，您应该更改以下两行：

```
opacityLabel.values   = @[@0, @1, @1, @0];
opacityLabel.keyTimes = @[@0, @(0.2/1.4), @(1.2/1.4), @1]; 
```

# ruby - Codekit 分段错误

> ID：15587985
> 
> 赞同：0
> 
> 时间：2013-03-23T14:38:29.817
> 
> 标签：ruby, sass, compass-sass, codekit

尝试在 Codekit 中保存时出现以下错误

```
/Applications/CodeKit.app/Contents/Resources/engines/oilypng/lib/oily_png/oily_png.bundle [BUG] Segmentation fault
ruby 1.9.3p286 (2012-10-12 revision 37165) [x86_64-darwin12.2.0] 
```

有人知道我需要修复什么吗？

**编辑** 我认为这与 Compass 无法编译有关。指南针已安装，直到今天一切正常。我今天将 Codekit 更新到 1.6.1 版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:39:09.037

尝试`compass clean`在您的项目文件夹中执行，然后再次编译。

# android - Eclipse 突然开始做奇怪的事情

> ID：15587987
> 
> 赞同：-4
> 
> 时间：2013-03-23T14:38:48.147
> 
> 标签：android, xml, eclipse, nullpointerexception, lint

首先，对不起我的英语不好。我是 android 新手，但我可以解决一些 logcat 问题，比如 classnotfoundexception ecc。但是那个，我真的看不懂。一段时间以来，eclipse 开始做一些非常奇怪的事情。首先，当我尝试打开它时，它会弹出一个窗口说“这个Android SDK需要Android Developer Toolkit 21.1.0或更高版本。当前版本是21.0.1.2012-12-6-2-58。请将ADT更新到最新版本版本”。所以我点击“检查更新”，过了一会儿它出现了另一个窗口，上面写着“没有找到更新”。哦，很酷，它要求我更新，但他找不到更新。

但无论如何：在我关闭它之后，它会立即在错误日志中向我显示这个错误：“未处理的事件循环执行”。我双击它，它似乎是：

```
java.lang.NullPointerException
    at com.android.ide.eclipse.adt.internal.wizards.newxmlfile.NewXmlFileCreationPage.updateAvailableTypes(NewXmlFileCreationPage.java:1062)
    at com.android.ide.eclipse.adt.internal.wizards.newxmlfile.NewXmlFileCreationPage.createControl(NewXmlFileCreationPage.java:536)
    at org.eclipse.jface.wizard.Wizard.createPageControls(Wizard.java:174)
    at org.eclipse.jface.wizard.WizardDialog.createPageControls(WizardDialog.java:736)
    at org.eclipse.jface.wizard.WizardDialog.createContents(WizardDialog.java:608)
    at org.eclipse.jface.window.Window.create(Window.java:431)
    at org.eclipse.jface.dialogs.Dialog.create(Dialog.java:1089)
    at org.eclipse.ui.internal.actions.NewWizardShortcutAction.run(NewWizardShortcutAction.java:122)
    at org.eclipse.jface.action.Action.runWithEvent(Action.java:498)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

会话数据：

```
eclipse.buildId=v21.0.1-543035
java.version=1.7.0_10
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=it_IT
Framework arguments:  -product com.android.ide.eclipse.adt.package.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product com.android.ide.eclipse.adt.package.product

This is a continuation of log file C:/XXXXX
Created Time: 2013-03-23 14:54:10.477 
```

我不知道这意味着什么，但看起来这不是项目本身的代码错误。

另外，第一次发生这个问题时，我打开了 SDK 管理器，我看到我之前下载的所有文件都不再安装了。无论如何，在我重新安装它们之后，有时（但由于某种奇怪的原因并非总是如此）一些安装的 sdk 需要更新（即使我在一两天前更新了它们）。

但现在最大的问题是：我所有的项目类都报告错误：它们无法识别诸如 floatmath 或 opengl es 矩阵等之类的东西（甚至是类名之类的愚蠢的东西）；如果我检查看起来没有错误的类（通过包资源管理器中的类图像，它通常会在类名称的左侧弹出一个红十字），无论如何都会有错误和甚至非常愚蠢（例如：@Override 无法解析为类型......什么？！）。

这不是我的错：在那个烦人的问题突然出现之前，我多次启动了我的所有项目，它们工作得非常好，嗯。

最后一件事：当我将某些内容保存在 xml 文件中时（呃另一个问题：布局文件夹中的主要内容消失了......），它显示：

“'运行 Android Lint' 遇到问题。失败”。我单击详细信息，它显示“失败的 java.lang.NullPointerException”。如果我检查错误日志，它会向我显示：“失败”。如果我双击它，如果显示我：

```
java.lang.NullPointerException
    at com.android.ide.eclipse.adt.internal.lint.EclipseLintClient.getTargets(EclipseLintClient.java:890)
    at com.android.tools.lint.client.api.LintClient.getHighestKnownApiLevel(LintClient.java:609)
    at com.android.tools.lint.client.api.LintDriver$LintClientWrapper.getHighestKnownApiLevel(LintDriver.java:1751)
    at com.android.tools.lint.checks.ManifestOrderDetector.visitElement(ManifestOrderDetector.java:396)
    at com.android.tools.lint.client.api.XmlVisitor.visitElement(XmlVisitor.java:170)
    at com.android.tools.lint.client.api.XmlVisitor.visitElement(XmlVisitor.java:209)
    at com.android.tools.lint.client.api.XmlVisitor.visitFile(XmlVisitor.java:150)
    at com.android.tools.lint.client.api.LintDriver.runFileDetectors(LintDriver.java:806)
    at com.android.tools.lint.client.api.LintDriver.checkProject(LintDriver.java:732)
    at com.android.tools.lint.client.api.LintDriver.analyze(LintDriver.java:340)
    at com.android.ide.eclipse.adt.internal.lint.LintJob.run(LintJob.java:153)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

会话数据：

```
Framework arguments:  -product com.android.ide.eclipse.adt.package.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product com.android.ide.eclipse.adt.package.productFramework arguments:  -product com.android.ide.eclipse.adt.package.product
Command-line arguments:  -os win32 -ws win32 -arch x86_64 -product com.android.ide.eclipse.adt.package.product 
```

所以有什么问题？我按照这里写的方式尝试了[当我加载 ADT 时为什么会收到错误“Android SDK 需要 Android Developer Toolkit 版本 XX.XX 或更高版本？”](https://stackoverflow.com/questions/15105730/when-i-load-adt-why-do-i-receive-the-error-the-android-sdk-requires-android-dev) ，但在那之后，android XML 像魔术一样消失了。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T18:29:24.420

同样的事情也发生在我身上。我刚刚从头开始重新安装所有东西，Eclipse，甚至是 Android SDK（因为 SDK 管理器和从 Eclipse 更新根本没有帮助）。

[如今，当您从http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载 Eclipse 时，它​​与 Android SDK 捆绑在一起

一旦我从头开始重新安装，放弃我以前的 android sdk，然后更新所有内容。一切又开始工作了。对不起，我没有更好的答案给你。

# ajax - ajax jsonp Get 请求在调用时跳过脚本但稍后触发它们

> ID：15587993
> 
> 赞同：0
> 
> 时间：2013-03-23T14:39:27.797
> 
> 标签：ajax, jsonp

我正在运行 ajax/jsonp/Get 请求。使用提琴手我可以看到一个正确的响应（ jsonpCallBack({"GetMetadataResult":{"TotalPages":"20"}}); ）但是在请求时，ajax调用只是返回没有运行成功，错误，完成，或 callbackFnt 脚本。稍后，在我的函数完成后，运行 ajax 成功脚本。不知道我做错了什么。

```
function getRequest( url, data )
{
    var ajaxRequest = undefined;  // The variable that makes Ajax possible

    //"Content-type": "application/json; charset=utf-8",
    var response =  $.ajax( {
        "url": url,
        "type": "GET",
        "dataType": "jsonp",
        "data": data,
        "contentType": "application/json; charset=utf-8",
        "jsonpCallback": "jsonpCallBack",
        "success": function ( r )
        {
            return r;
        },

        "complete": function ( r )
        {
            for ( var i = 0; i < r.count; i++ )
            {
                return r;
            }
        },
        "error": function ( xhr )
        {
            return false;
        }            
    } );

    return true;
}

function jsonpCallBack( r )
{
    return r;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T00:39:34.317

我不认为你的代码做错了什么，但设计是。正如您所发现的那样，没有同步 JSONP 这样的东西。来自[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

《跨域请求和`dataType: "jsonp"`请求不支持同步操作》

# php - 当浏览器关闭时，会话中保存的数据会丢失吗？

> ID：15587994
> 
> 赞同：1
> 
> 时间：2013-03-23T14:39:45.870
> 
> 标签：php, session

在 php 中，在创建会话并向该会话添加数据后，我们关闭浏览器。那么，当我打开浏览器时，我可以从会话中获取这些添加的数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T14:45:49.757

如果您希望用户的会话在关闭浏览器后仍然存在，请查看：

> session.cookie_lifetime 以秒为单位指定发送到浏览器的 cookie 的生命周期。值 0 表示“直到浏览器关闭”。默认为 0。另见 session_get_cookie_params() 和 session_set_cookie_params()。

显示在[有关会话的运行时配置页面上](http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)。这样，会话 cookie 不会只持续到浏览器关闭，它可以持续存在并在他们重新打开浏览器并返回您的站点时继续存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:45:59.007

这取决于会话的 cookie 参数（如果您使用的是内置会话）。如果`expires`设置`0`，会话将在浏览器关闭时过期。见[`setcookie()`](http://www.php.net/manual/en/function.setcookie.php)和[`session_set_cookie_params`](http://www.php.net/manual/en/function.session-set-cookie-params.php)了解详情

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T15:06:41.930

为了保存会话数据并在下次打开浏览器时重新使用它，您需要创建会话 cookie 以便它存储您需要的数据以供以后使用。但一定要加密 cookie。否则用户很容易更改 cookie。您可以参考：如何使用 PHP Sessions 存储数据 [http://www.thesitewizard.com/php/sessions.shtml](http://www.thesitewizard.com/php/sessions.shtml)

# c# - 使用 HtmlAgilityPack 将树保存到变量中

> ID：15587996
> 
> 赞同：0
> 
> 时间：2013-03-23T14:39:59.047
> 
> 标签：c#, html-agility-pack

我是 C# 的新手。我正在 HtmlAgilityPack 中寻找类似的功能。在名为 BeautifulSoup 的 Python 解析库中存在名为[contents](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#contents)的函数。我如何通过 HtmlAgility 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T23:56:51.893

好的，所以首先获取包含所有内容的文档根目录

```
//create a new document
var _htmlDoc = new  HtmlAgilityPack.HtmlDocument();

//fill it with html
_htmlDoc.Load(filePath) or _htmlDoc.LoadHtml(string...)

//get the document root node - it has all the contents
var docuemntNode = _htmlDoc.DocumentNode; 
```

然后...使用 linq 或 xpath 查询节点

```
string xpathExpressionSting = "//p";
var contents = htmlDoc.DocumentNode.SelectNodes(xpathExpressionSting)
//this would get paragraph tag nodes 
```

# python - 谷歌应用引擎pyobjc安装失败

> ID：15587997
> 
> 赞同：0
> 
> 时间：2013-03-23T14:40:00.107
> 
> 标签：python

当我尝试使用 easy-install 安装 pyobjc 时，我得到了这个

```
 sudo easy_install -U pyobjc 
```

搜索 pyobjc 最佳匹配：pyobjc 2.5.1 处理 pyobjc-2.5.1-py2.6.egg pyobjc 2.5.1 已经是 easy-install.pth 中的活动版本

使用 /Library/Python/2.6/site-packages/pyobjc-2.5.1-py2.6.egg 处理 pyobjc 的依赖关系 搜索 pyobjc-framework-ServiceManagement==2.5.1 阅读[http://pypi.python.org/ simple/pyobjc-framework-ServiceManagement/](http://pypi.python.org/simple/pyobjc-framework-ServiceManagement/) 阅读[http://pyobjc.sourceforge.net](http://pyobjc.sourceforge.net) 最佳匹配：pyobjc-framework-ServiceManagement 2.5.1 下载[http://pypi.python.org/packages/source/p/pyobjc-framework- ServiceManagement/pyobjc-framework-ServiceManagement-2.5.1.tar.gz#md5=0ec67fb8fae22104643d423a2b66ca17](http://pypi.python.org/packages/source/p/pyobjc-framework-ServiceManagement/pyobjc-framework-ServiceManagement-2.5.1.tar.gz#md5=0ec67fb8fae22104643d423a2b66ca17) 处理pyobjc-framework-ServiceManagement-2.5.1.tar.gz 运行pyobjc-framework-ServiceManagement-2.5.1/setup.py -q bdist_egg --dist-dir /tmp/easy_install-E_uAby/pyobjc-framework-ServiceManagement-2.5.1/egg-dist-tmp-eOOIVp

```
 error: Installed distribution pyobjc-core 2.2b3 conflicts with requirement pyobjc-core>=2.5.1 
```

请问你能帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T19:20:23.147

对于 Mac Os X 版本 10.7 和 10.8，您需要这个。

```
$ sudo env CC=clang easy_install -U pyobjc-core
$ sudo env CC=clang easy_install -U pyobjc 
```

# php - PHP非阻塞排他锁

> ID：15587999
> 
> 赞同：2
> 
> 时间：2013-03-23T14:40:03.517
> 
> 标签：php, locking, flock

我想使用排他/共享，阻塞和非阻塞锁，就像`flock()`. 如何使用信号量来实现这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-23T14:58:10.337

这取决于用例。

如果您只在一台服务器上，请使用锁定文件。

```
function doSomething() {
  $file = /temp/path/somthing.lock;
  if (file_exists($file)) {
    return false;
  }
  touch($file);
  // Safely mess with things
  unlink($file);
} 
```

如果您有多个 Web 服务器，例如在负载均衡器后面，则可以通过使用 mysql 中的表来完成相同的事情。

```
function doSomething() {
  $query = "SELECT * FROM locks WHERE name='something'");
  $res = mysqli_query($query);
  if (mysql_num_rows($res) > 0) {
    return false;
  }
  $query = "INSERT INTO locks (name) VALUES ('something')";
  mysqli_query($query);
  // Safely mess with things
  $query = "DELETE FROM locks WHERE name='something'");
  mysqli_query($query);
} 
```

Memcache 是另一个具有多机支持的明显候选者。

您不应使用 ACP，因为它仅用于缓存。这意味着您无法控制 ACP 存储何时被删除，它可能随时发生。

您也可以使用信号量，但是如果您使用多个服务器，则应用与锁定文件相同的警告。

我建议创建`lock($key)`,`is_locked($key)`和`release($key)`函数，然后在整个项目中虔诚地使用它们。这样您就可以从锁定文件开始（快速实施），然后在不编辑其余代码的情况下升级到更好的东西。如果您想真正花哨，可以将它们实现为记录器对象的方法，并将其放在代码的已知位置。