# StackOverflow 问答 13931000-13931999

# javascript - 在 Django 的默认管理页面中调用外部 javascript

> ID：13931001
> 
> 赞同：0
> 
> 时间：2012-12-18T10:32:42.037
> 
> 标签：javascript, django, django-admin

如何在 Django 的默认管理 html 页面中调用外部 javascript。

我知道使用`MEDIA`类我可以在 admin.py 文件中执行此操作。

这是我的尝试：

```
 class PlayerAdmin(admin.ModelAdmin):
      class Media:
        js = ('/static_files/js/adminsettings.js') 
```

但我没有得到写入 JavaScript 文件的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:51:02.143

您需要使用相对于[(or](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#modeladmin-media-definitions) [)的](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#modeladmin-media-definitions)[路径`STATIC_URL``MEDIA_URL`](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#modeladmin-media-definitions)，在您的示例中这可能有效：

```
 class PlayerAdmin(admin.ModelAdmin):
      class Media:
        js = ('js/adminsettings.js',) 
```

此外，在我的示例中，该`js`属性并不是一个元组（它可以是任何可迭代的、列表、集合等）

另一种方法是[覆盖管理模板](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)，它可以为您提供更大的灵活性，并允许您轻松地将相同的 javascript 应用于许多模型。

# mobile - 来自 json 的 qooxdoo 移动选择框

> ID：13931002
> 
> 赞同：0
> 
> 时间：2012-12-18T10:32:46.423
> 
> 标签：mobile, drop-down-menu, qooxdoo

我正在尝试从 json 初始化/更新 Qooxdoo Mobile 中的选择框。

```
 this.__model = new qx.data.Array();
    var selQuestion = "substance released";
    sel = new qx.ui.mobile.form.SelectBox();
    sel.setDialogTitle(selQuestion);
    sel.setModel(this.__model);
    form.add(sel, selQuestion) 
```

我曾尝试使用此方法对其进行更新，但根据手册，移动列表尚不支持。

```
test = ["item1", "item2"];
new qx.data.controller.List(new qx.data.Array(test), sel); 
```

同样在属性更改上使用 apply 方法我无法让它工作（框保持为空）：

```
__applySubstances : function(value, old) {
    this._model = new qx.data.Array();
    if(value) {
      for(i in value.toArray()) {
        this._model.push(value.toArray()[i].getName());
      }
    }
  } 
```

谁能把我推向正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:19:33.610

我在您的代码中没有发现任何错误。你能提供一个游乐场的例子吗？

请检查您的 __applySubstances 方法的值参数。

以下是移动展示的示例：

```
 var dd = new qx.data.Array(["Web search", "From a friend", "Offline ad"]);
      var selQuestion = "How did you hear about us ?";
      this.__sel = new qx.ui.mobile.form.SelectBox();
      this.__sel.set({required: true});
      this.__sel.set({placeholder:"Unknown"});
      this.__sel.setClearButtonLabel("Clear");
      this.__sel.setNullable(true);
      this.__sel.setDialogTitle(selQuestion);
      this.__sel.setModel(dd);
      this.__sel.setSelection(null);

      form.add(this.__sel, selQuestion); 
```

# javascript - 什么 javascript 代码可以知道浏览器是否具有 mp3、音频编码、视频编码和打印功能？

> ID：13931008
> 
> 赞同：0
> 
> 时间：2012-12-18T10:32:59.577
> 
> 标签：javascript

我想要一个 javascript 代码来了解我们的浏览器是否具有 Mp3、音频编码、视频编码和打印功能。例如，如果我单击下一页第一页上的按钮，我想看到类似的输出

Mp3 能力：真/假 音频编码能力：真/假 视频编码能力：真/假 打印能力：真/假

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:57:49.707

我建议使用[Modernizer](http://modernizr.com)进行功能检测，但如果这不适合您的情况，您可以使用以下 JS 代码测试用户代理（每个都支持不同的音频/视频格式）或测试 mpeg 支持（音频）：

```
function isMpegSupported(){
   var elem = document.createElement('audio');
   return !!(elem.canPlayType && elem.canPlayType('audio/mpeg;') !== '');
} 
```

（受此[问题](https://stackoverflow.com/questions/8469145/how-to-detect-html5-audio-mp3-support)启发的代码）

我还建议阅读有关[canPlayType](http://www.w3schools.com/tags/av_met_canplaytype.asp)方法和特征检测的信息，[这](http://diveinto.html5doctor.com/detect.html)是一个很好的起点（也有关于视频格式特征检测的大量信息）

# jquery - 使用 jquery 表单的自动文件上传提交在 IE 中引发访问被拒绝错误

> ID：13931009
> 
> 赞同：1
> 
> 时间：2012-12-18T10:33:02.147
> 
> 标签：jquery, access-denied, jquery-forms-plugin, ajax-upload, jqueryform

我正在使用[jquery 表单](http://malsup.com/jquery/form/#file-upload)上传图像而无需刷新页面。以下是html标记：

```
 <a href="javascript:void(0);" onclick="UpdateImage();"> 
<img src="@_fullImgPath" name="img-uploader" alt="" title="" /></a>

    @using (Html.BeginForm("UpdateImage", "Profile", FormMethod.Post, new { id = "img-file-upload-form", @class = "form", autocomplete = "off", enctype = "multipart/form-data" }))
    {
        @Html.Hidden("UpdateImageId")
        <input type="file" name="file" id="file" />
    }
    <script language="javascript" type="text/javascript">   
     $(function () {
        $("#img-file-upload-form").ajaxForm({
            iframe: true,
            dataType: "json",
            beforeSubmit: function () {
            },
            success: function (result) {
                alert('done');
            },
            error: function (xhr, textStatus, errorThrown) {
                alert('error');
            }
        });

        $("#file").change(function () {
             $("#img-file-upload-form").submit();
        });
    });

     function UpdateImage(id) {
            $("input[id=file]").click();
        }

    </script> 
```

这在 Firefox 和 Chrome 中运行良好，但在 IE 8 和 9 中，它会抛出拒绝访问错误。有什么解决办法吗？或者在不刷新页面的情况下上传图像的任何替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:55:26.233

您正在尝试在表单提交时保存图像。提交表单将对网页进行回发，因为我猜您的标记代表**MVC-3 Razor**。

我宁愿建议您使用以下 ajax 请求。

```
 var submitForm=new Form(); 
```

将图像添加到表单控件中

```
$.ajax({
    url:'webpage or your method in controller',
    type:'POST/GET',
    data:submitForm,
    dataType:'',
    ContentType:'',
    beforeSend:function(){},
    complete:function(){}, .....
}); 
```

要创建动态表单标签，您可以参考以下链接
[如何使用 JavaScript 动态创建表单？](https://stackoverflow.com/questions/3991204/how-to-create-a-form-dynamically-using-javascript)

# ruby - 有什么方法可以使用水豚单击 Flash 播放器中的元素？

> ID：13931012
> 
> 赞同：1
> 
> 时间：2012-12-18T10:33:13.490
> 
> 标签：ruby, capybara

我需要单击网页中的一个元素。但该元素存在于 Flash 播放器中。我也不能使用 xpath 和 CSS。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T16:12:31.213

您将需要使用像 Poltergeist 这样的成熟 Web 服务器一样的库。然后您可以单击页面上的精确坐标。那可能行得通。看看这里：[https ://github.com/jonleighton/poltergeist#clicking-precise-coordinates](https://github.com/jonleighton/poltergeist#clicking-precise-coordinates)

`page.driver.click(x, y)`

其中 x 和 y 是屏幕坐标。

# lua - 电晕表.sort()

> ID：13931014
> 
> 赞同：3
> 
> 时间：2012-12-18T10:33:21.243
> 
> 标签：lua, coronasdk

```
local tile = {"C", "O", "L", "I", "N", "F", "A", "R", "R", "E", "L", "L"}       
table.sort(tile, function(a,b) return ( math.random(1,2) <2) end)
print ( 'table: '..table.concat( tile, ', ')) 
```

我正在随机化表格的顺序，这似乎工作正常，但每次我运行程序时，我都会收到这个错误：`invalid order function for sorting`。关于正在发生的事情有什么建议吗？

我已经找到了解决方案。 [http://developer.coronalabs.com/code/shufflerandomize-tables](http://developer.coronalabs.com/code/shufflerandomize-tables) 这将随机播放您的表格内容，而不会出现上述方法的任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T12:14:02.040

如果您想随机播放数组，请查看[我的随机播放片段](http://snippets.luacode.org/snippets/Shuffle_array_145)。

主要思想是您创建一个包含随机数的项目表，在保留原始索引的同时对其进行排序，然后根据新顺序对项目重新排序。

```
function shuffled(tab)
    local n, order, res = #tab, {}, {}
    for i=1,n do order[i] = { rnd = math.random(), idx = i } end
    table.sort(order, function(a,b) return a.rnd < b.rnd end)
    for i=1,n do res[i] = tab[order[i].idx] end
    return res
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:18:39.207

假定给定的排序函数`table.sort`是确定性的，因为它总是为同一对参数返回相同的结果，并且在`a<b`和`b<c`暗示的意义上是一致的`a<c`。

# mysql - 将 Doctrine 2 与现有 MySQL 数据库一起使用

> ID：13931033
> 
> 赞同：3
> 
> 时间：2012-12-18T10:34:26.140
> 
> 标签：mysql, symfony, doctrine-orm

我们第一次使用 Symfony 2，我的公司使用现有的 MySQL 数据库。是否有可能在学说中“导入”它，或者我们可以只使用这个数据库并在我们现有的表之后创建 php/doctrine 实体？

如果您有一些关于这个主题的好东西要阅读，请发布它。谢谢，皮特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:25:55.227

从实体定义创建数据库显然比从现有数据库创建实体要好。这是 Doctrine2 的一个主要缺点......

但如果你有一个“健全”的现有模型，这是可能的，而且并不复杂。以下是[我的模型逆向工程 TODO 列表中的](http://blog.alterphp.com/2011/06/some-tips-for-doctrine2-entities.html)一些内容：

*   使用名为 auto_increment 整数的“id”作为每个表的 ID，
*   仅对布尔映射字段使用 SQL **TINYINT ！**如果需要短整数，请使用**SMALLINT 。**
*   仅在 Doctrine 2.1 中允许使用外键作为复合键

# android - 将 facebook 连接到 android eclipse

> ID：13931036
> 
> 赞同：0
> 
> 时间：2012-12-18T10:34:35.817
> 
> 标签：android, facebook, eclipse

我正在为 Eclipse（Android）制作一个项目，我想将 facebook 与我的应用程序连接起来，例如，我需要在我的应用程序中接收我的 facebook 帐户的所有帖子，但我不知道如何。你能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:44:29.670

集成来自 gihub 的官方 facebook 库。然后创建一个应用程序。在 facebook.com 你会得到钥匙。在您的 Java 代码中使用该密钥来获取访问令牌。现在，使用此令牌登录您的 Facebook 帐户。然后，您可以使用图形 API 或 FQL 从 facebook 获取帖子。还有 100 个关于堆栈溢出本身的示例。

# mongodb - grails mongodb findBy 返回 null

> ID：13931039
> 
> 赞同：0
> 
> 时间：2012-12-18T10:34:41.947
> 
> 标签：mongodb, grails

我遇到了 grails 在我的 mongdb 中设置的单个属性上返回空值的问题。从 mongo 控制台查看集合，值明确设置为“INFO”

```
....
"name" : "test"
"rules" : [
        {
                "field" : "level",
                "dataType" : "String",
                "value" : "INFO",
                "comparator" : "="
        }
]
.... 
```

以下将在除 value 字段之外的所有属性上显示 ok 值：

```
 def list = TheDomainObject.findByName("test")
 list.rules.get(0).comparator    -> results in return  "="
 list.rules.get(0).field         -> results in return  "level"
 list.rules.get(0).value         -> results in return  null 
```

我错过了什么，为什么值字段返回 null ？域定义为：

```
String field
String comparator
Object value
String dataType

static constraints = {
    field nullable: false, blank: false
    comparator nullable: false, blank: false
    value nullable: false
    dataType nullable: false, blank: false
} 
```

运行 grails 2.1.1 和 mongodb 2008plus-2.0.5

# python - ftplib，如何在没有 errno 属性的情况下管理异常？

> ID：13931043
> 
> 赞同：4
> 
> 时间：2012-12-18T10:34:50.047
> 
> 标签：python, exception, python-2.7, ftplib

如果文件不存在，我想在 ftp 站点上上传文件。这是一个更复杂的应用程序的任务，但在这种情况下并不重要。我的想法是使用该方法检查文件是否存在`FTP.size(filename)`以及错误是否为 550（系统找不到指定的文件）上传文件。

我的（不工作）代码：

```
from ftplib import *
ftp = FTP("ftp.test.com", "user", "password")
try:
    ftp.size("123.zip")
except ftplib.all_errors, e:
    if e.errno == 550:
        print "UPLOAD"
    else:
        print str(e) 
```

返回的错误是

```
Traceback (most recent call last):
  File "<pyshell#106>", line 4, in <module>
    if e.errno == 550:
AttributeError: 'error_perm' object has no attribute 'errno' 
```

或者如果发生临时错误：

```
AttributeError: 'error_temp' object has no attribute 'errno' 
```

我发现管理返回码的唯一解决方案是：

```
except ftplib.all_errors, e:
if str(e.args[0]).split(" ", 1)[0] == "550":
        print "UPLOAD"
    else:
        print str(e) 
```

但我想有一个最好的解决方案，因为只有当错误号是异常消息中的第一个单词时才有效。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:38:46.213

我不确切知道该错误的属性，因此您可以做的是在 except 子句激活时打印 dir(e) 。然后您将看到错误的所有属性。一个几乎从不作为标志失败的是“error.message”，它是一个字符串，因此您可以使用它构建 if 子句。

你会以类似的东西结束

```
try:
    ftp.size("123.zip")
except ftplib.all_errors as e:
    if e.message == 'message of the error'
        print 'UPLOAD'
    else:
        print str(e) 
```

顺便说一句，消息是执行 str(e) 时得到的一件事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T12:25:49.500

也许这有帮助，它来自 ftplib 的文档。

> 请注意，SIZE 命令不是标准化的，但许多常见的服务器实现都支持它。

链接[在这里](http://docs.python.org/2/library/ftplib.html)

尝试使用另一种方法来确定文件是否存在。

# django - 找不到带有参数“（）”和关键字参数“{}”的“””

> ID：13931044
> 
> 赞同：0
> 
> 时间：2012-12-18T10:34:56.907
> 
> 标签：django, python-2.7, django-forms, django-templates

请帮忙。我收到此错误：

> 未找到带有参数“()”和关键字参数“{}”的“ev_toggle_attendance”的反向操作。

这是我的html文件：

```
 {% extends "base.html" %}

{% block title %}Tonight - {{ block.super }}{% endblock %}

{% block main_content %}
    <a href ="{% url ev_create %}">Create an Event</a>
    {% if events %}
        {% for event, attending in events %}
            <p>{{event.creator.username}}: {{event.description}}</p>
            {% if attending %}
                <p> You are attending this event.</p>
            {% else %}
                <p> You are not attending this event. </p>
            {% endif %}
            <form method="POST" class="toggle_attendance_form" action="{% url ev_toggle_attendance %}">
                <input type="hidden" name="event_id" value="{{event.id}}"/>
                {% if attending %}
                    <input class="attendance unattend" type="submit" value="Unattend"/>
                {% else %}
                    <input class="attendance attend" type="submit" value="Attend"/>
                {% endif %}
            </form>

        {% endfor %}
    {% else %}
        <p>No events for today.</p>
    {% endif %}
{% endblock %} 
```

它说错误在这里：

```
<form method="POST" class="toggle_attendance_form" action="{% url ev_toggle_attendance %}"> 
```

urls.py 文件：

```
from django.conf.urls import patterns, include, url
from events import views

urlpatterns = patterns('',
    url(r'^create/$', views.create, name='ev_create'),
    url(r'^tonight/$', views.tonight, name='ev_tonight'), #ev_tonight is the name of the url pattern; good for templates
    url(r'^toggle-attendance/$', views.toggle_attendance, name='ev_toggle_attendance'),
) 
```

views.py 片段：

```
from events.models import Event, Attendance
from django.shortcuts import render_to_response, get_object_or_404
from django.template import RequestContext
from events.forms import EventForm
from dateutil.parser import parse
from django.core.urlresolvers import reverse
from django.http import HttpResponseRedirect, Http404
from django.contrib import messages
from django.contrib.auth.decorators import login_required

# Create your views here.

def tonight(request):
    events = Event.objects.today().filter(latest=True)
    #loop thru all the events and check to see if the currently logged in user is attending the event
    attending=[]
    for event in events: #for every event in all the events, query for an attendance objects that matches event for the user
        try:
            Attendance.objects.get(event=event, user=request.user)
            attending.append(True)
        except Attendance.DoesNotExist: #if can't find it
            attending.append(False)
    context = {
        'events':zip(events, attending), #zip function to merge event and attending
     }
    return render_to_response('events/tonight.html', context,
                              context_instance=RequestContext(request) )

    #context_instance: context processors: things that get run on request and add context to it; does things like adding the user variable to the template. 

def create(request):
    form = EventForm(request.POST or None)
    if form.is_valid():#check if there's data as well as within the 340 characters limit
        event = form.save(commit = False) #won't save to database coz creator isn't yet known
        event.creator = request.user
        guessed_date = None
        for word in event.description.split(): #split on every space - guess the date based on things inside the description
            try:
                guessed_date = parse(word)
                break#if found, break
            except ValueError:
               continue
        event.start_date = guessed_date
        event.save() #saves to the database
        messages.add_message(request, messages.INFO, 'Your event was posted.')
        #redirect user to another url
        if 'next' in request.POST: #if somewhere in the post value, there's a next
            next = request.POST['next']
        else:
            next = reverse('ev_tonight') #otherwise, next will be the url with ev_tonight
        return HttpResponseRedirect(next)

    #if the form isn't valid
    return render_to_response(
          'events/create.html',
          {'form':form},
          context_instance = RequestContext(request))
create = login_required(create) #ensuring that the user logged in or can do @login_required before the create model(python >= 2.4)

    def toggle_attendance(request):
        try:
            event_id = int(request.POST['event_id'])#assuming there are values in the post parameter; cast into an it
        except (KeyError, ValueError): #raise an exception when: no event id in the post parameter or a value that could not be cast to an int
            raise Http404
        event = get_object_or_404(Event, id=event_id)
        attendance, created = Attendance.objects.get_or_create(user=request.user, event=event)#calling for the user that is logged in and for the event that has already been queried for

        if created:
            messages.add_message(request, messages.INFO, 'You are now attending "%s"' %event)

        else:
            attendance.delete()
            messages.add_message(request, messages.INFO, 'You are no longer attending "%s"' %event)

        #checking to see if there's a next variable in the post parameter; if it isn't assign an empty string
        next=request.POST.get('next', '')
        if not next: #if it's the empty string
            next=reverse('ev_tonight')
        return HttpResponseRedirect(next)
    toggle_attendance = login_required(toggle_attendance) 
```

主网址文件：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^events/', include('events.urls')),
    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

非常感谢您提供的任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:45:38.660

尝试从未来的模板标签加载 url：`{% load url from future %}`

查看[对 url 和 ssi 的更改](https://docs.djangoproject.com/en/dev/releases/1.3/#changes-to-url-and-ssi)

# restlet - Restlet：持久连接

> ID：13931046
> 
> 赞同：0
> 
> 时间：2012-12-18T10:34:59.683
> 
> 标签：restlet, keep-alive, httpconnection, persistent-connection

我正在尝试创建一个将处理与其客户端的长时间会话的 Restlet 服务器。因此，在处理第一个请求后，我希望能够保持当前 http 连接打开并将其保存在连接列表中。这可能吗？我看过 Restlet 2.1 的文档，但没有找到任何例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:54:29.483

持久连接是 HTTP 1.1 规范的一部分，由 Restlet HTTP 服务器连接器支持，包括内部连接器、Jetty 和 Simple 扩展。

有关内部连接器，请参阅此 Javadocs 页面，例如： [http ://www.restlet.org/documentation/snapshot/jee/engine/org/restlet/engine/connector/ConnectionHelper.html](http://www.restlet.org/documentation/snapshot/jee/engine/org/restlet/engine/connector/ConnectionHelper.html)

# python - 线程队列已满 - python

> ID：13931048
> 
> 赞同：0
> 
> 时间：2012-12-18T10:35:03.097
> 
> 标签：python, multithreading, ubuntu

我有一个在 python 中使用线程的代码。如果满足条件，每个线程将创建 2 个新线程。现在的问题是活动线程总数超过了 ubuntu 12.04 支持的活动线程总数。现在活动线程队列中的每个线程都需要空间来创建新线程，然后它将终止。我的系统有 8 个 CPU。现在我的代码陷入僵局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:38:28.990

您可能不应该创建这么多线程。相反，使用`Queue.Queue`s 在不同线程之间进行通信。

# spss - 无法使用 GUI 将缺失值分配给 SPSS 中的字符串变量

> ID：13931049
> 
> 赞同：1
> 
> 时间：2012-12-18T10:35:09.093
> 
> 标签：spss, missing-data, data-manipulation

我正在努力使用图形用户界面在 SPSS 中重新编码缺失值。我可以使用 GUI 和如下所示的对话框轻松地重新编码数值变量：

![在此处输入图像描述](../Images/90983c9c988b683e7eab13213afd7d4b.png)

但是当我在同一个对话框中输入一个字符串变量时，将新值定义为“系统缺失”的选项不可用：

![在此处输入图像描述](../Images/6cbf22075d960c9ffc9a08f6b5ce43de.png)

这么简单的问题肯定不用语法编辑器就可以解决吗？

我使用的是 SPSS 19 版

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:59:52.480

这是因为系统缺失值仅针对数字变量定义。您可以为字符串定义用户缺失值。例如，重新编码为一些未使用的字符串值，`"99999"`然后将该值设置`"99999"`为用户丢失。

IBM SPSS Statistics 19 命令语法参考，第 55 页：

> 不能为字符串变量生成系统缺失值，因为任何字符都是合法的字符串值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-07T04:10:02.793

尝试...

```
RECODE OldStringVar ("Missing" = ""). 
```

或者...

```
DO IF OldStringVar = "".
RECODE OldStringVar (ELSE = COPY) INTO NewStringVar.
END IF. 
```

或这种方法的变体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-26T22:17:40.740

我有同样的问题。我在该教程中找到了答案：

[http://libguides.library.kent.edu/content_mobile.php?pid=481510&sid=4120229](http://libguides.library.kent.edu/content_mobile.php?pid=481510&sid=4120229)

在“自动重新编码”下

“事实上，这是让 SPSS 识别字符串变量缺失值的唯一方法；否则，SPSS 会将空白字符串视为有效值”

请按照上面的链接获取说明。谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-14T21:45:45.510

在代码中可以做到。执行以下操作（以地址字段为例）： - 使用“自动重新编码”生成一个新的临时变量，其中旧变量的缺失值将很容易识别。转到“Transform\Automatic Recode”，双击文本变量（地址），输入新名称（Addr_Temp），然后单击“添加新名称”。标记“将空白字符串值视为用户缺失”框，然后单击确定。在代码中：

```
AUTORECODE VARIABLES=Address 
    /INTO Addr_Temp
    /BLANK=MISSING
    /PRINT. 
```

** 可能，MISSING 将是最后一个（最高）值，我不确定，但很容易证明。现在，假设这个值为 94，这意味着您的数据中有 93 个绝对不同的有效值 address 并且第四个是空白（想象一个本地人出生地的数据，在一个有 93 家医院的城市。会有是93个不同的医院地址，有些是外国人的空白）。注意特殊字符，可能最后一个代码不会是空白字段...首先检查输出窗口的重新编码列表。- 将缺失值编码为已知和不寻常的代码，例如 9999FFFF（或其他不可能的街道地址，在我们的地址示例中），如下所示：

```
RECODE Addr_Temp (94='9999FFFF') INTO Address.
EXECUTE. 
```

不幸的是，这在图形界面中不起作用，只有语法，至少在我的 SPSS 版本中（你可以在你的版本中尝试，只需进行正常的重新编码）。它不接受存在的变量

现在您在文本字段中有值“9999FFFF”，而不是空白值，并且可以根据需要使用（包括手动重新编码）。请记住在创建最终变量或“自动重新编码”变量时将其重新编码为数据丢失。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-14T18:37:30.273

首先打开语法编辑器

缺少值 NAME_VAR1、NAME_VAR2 (" ")。执行

现在您可以使用 GUI 轻松地重新编码字符串变量。

重要的！！！仅适用于长度为 8 或更少的变量

# asp.net - 创建与已声明的另一个控件相同类型的新控件

> ID：13931050
> 
> 赞同：0
> 
> 时间：2012-12-18T10:35:11.010
> 
> 标签：asp.net, vb.net, winforms, controls

我正在使用自定义模板类来生成带有我的转发器控件的行，我希望能够从我的 aspx 页面后面的代码中动态地指定此转发器中的控件。在后面的代码中，我将控件添加到这样的列表中：

```
Dim lstControls As New List(Of Control)
lstControls.Add(New TextBox)
lstControls.Add(New Label)
lstControls.Add(New CheckBox)
lstControls.Add(New DropDownList)
lstControls.Add(New CheckBox) 
```

然后我使用这一行将控件添加到我的模板

```
rptrSummary.ItemTemplate = New myTemplate(ListItemType.Item, , lstControls) 
```

从 instantiateIn sub 我正在做这样的事情：

```
Dim ph As New PlaceHolder

For i = 0 To lstControls.Count - 1
    ph.Controls.Add(lstControls(i))
Next 
```

这不能正常工作，并且在我的转发器控件的 .databind() 之后，我指定的控件仅出现在最后一行。我认为这是因为我只将控件声明为 NEW 一次，所以我只有一行值。

***tldr?/ 结论：***

如何生成与列表中的控件相同类型的新控件？就像是：

```
Dim newControl as new Control = type(lstControl(0)) 
```

（这显然行不通）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:20:20.080

我找到了答案，这里有一些例子，以防其他人被卡住（我也可以更改标题，使其更类似于可能的搜索条件）：

```
dim egTextbox as new textbox
dim egLabel as new label

dim newObject1 as Object = Activator.CreateInstance(egTextbox.GetType)
dim newObject2 as Object = Activator.CreateInstance(egLabel.GetType) 
```

newObject1 现在是一个文本框 newObject2 现在是一个标签

# javascript - jQuery - 未捕获的类型错误：字符串不是函数

> ID：13931051
> 
> 赞同：2
> 
> 时间：2012-12-18T10:35:12.103
> 
> 标签：javascript, jquery

我现在收到此`jQuery - Uncaught Type Error: string is not a function`错误

有什么问题？

下面是我的代码

```
$(function(){
    $('#tabs').tabs();
    inputs = $('input[type="range"]#defaultSlider');
    slider = '#slider-one';
    tab = '#tabs-1';
    slider(inputs,slider,tab);

    var firstTab = $('#tabs ul li')[0];
    var secondTab = $('#tabs ul li')[1];
    $(firstTab).live('click',function(){
        $('#slider-two').hide();
        $('#slider-one').show();
        inputs = $('input[type="range"]#defaultSlider');
        slider = '#slider-one';
        tab = '#tabs-1';
        slider(inputs,slider,tab);
    });
    $(secondTab).live('click',function(){
        $('#slider-two').show();
        $('#slider-one').hide();
        inputs = $('input[type="range"]#defaultSlider-2');
        slider = '#slider-two';
        tab = '#tabs-2';
        slider(inputs,slider,tab);
    });

    function slider(inputs, slider, tab){
        $(inputs).live('change',function (event) {
            console.log(inputs);
            var updatedRangeValue = event.target.value;
            var currentValue = updatedRangeValue - 1
            currentStep = $(slider + ' dl.steps dt')[currentValue];
            $(slider + ' dl.steps dt').removeClass('active');
            $(currentStep).addClass('active');
            var currentArticle = $(tab + ' article')[currentValue];
            $(tab + ' article').hide();
            $(currentArticle).show();

            value = (event.target.value - event.target.min)/(event.target.max - event.target.min);
            $(event.target).css({
                backgroundImage: '-webkit-gradient(linear, left top, right top, color-stop(' + value + ', #007fb0), color-stop(' + value + ', #024069))'
            });
        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T10:38:27.463

您有冲突的变量名称：

```
 slider = '#slider-one';     // You re-define `slider` here
    tab = '#tabs-1';
    slider(inputs,slider,tab);  // Then you try to call the original `slider` 
```

重命名`slider`为其他名称，它应该可以正常工作（您有两个看起来像这样的代码块）：

```
 slider1 = '#slider-one';
    tab = '#tabs-1';
    slider(inputs,slider1,tab); 
```

# c++ - 标准库未在 Eclipse Juno 中解析

> ID：13931052
> 
> 赞同：1
> 
> 时间：2012-12-18T10:35:13.400
> 
> 标签：c++, eclipse, eclipse-cdt

我正在 Eclipse Juno 中构建一个 Makefile 项目，并且我已经设置它以便编译和调试（它使用 CMake，所以我没有使用内部工具）。但是，Eclipse 显然没有被告知正确的标头，如下面的代码所示：

```
#include <iostream>

using namespace std;

int main ()
{    
  cout << "Hello world << endl;
  return 0;
} 
```

包括“iostream”和符号“std”、“cout”和“endl”都未解决。

我应该如何让 Eclipse 意识到这些，以便它停止用红色强调所有内容并停止发送带有错误的垃圾邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:35:13.400

这可以通过在 Project->Properties->C++ Build->Environment 中指定以下环境变量来解决。

*   LANG=en_US
*   LC_ALL=en_US

显然，自动发现工具需要它们来确定包含的位置。

[从这个 Eclipse 论坛主题](http://www.eclipse.org/forums/index.php/t/275956/)中收集到的答案。

# .htaccess - 没有 index.php 的 Joomla（301 重定向）

> ID：13931059
> 
> 赞同：2
> 
> 时间：2012-12-18T10:35:34.380
> 
> 标签：.htaccess, joomla

我最近在 Joomla 开始了项目。我不得不从中删除 index.php （这是配置设置中的一些复选框）。我已经找到了怎么做。目前实际上所有的 URL 都是在没有 index.php 的情况下创建的。

但是，我可以直接输入 URL [http://mywebsite.com/index.php/article-name](http://mywebsite.com/index.php/article-name)并且它不会重写为[http://mywebsite.com/article-name](http://mywebsite.com/article-name)。如果我有一个菜单，那么 URL 正在正确创建（http://mywebsite.com/article-name - 所以没有 index.php）。

所以问题是：如何为带有 index.php 的网站创建 htaccess 重定向到没有 index.php 的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:59:24.303

由于您在内部将内容路由到 index.php，因此您必须匹配实际请求：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /index\.php/[^\ ]+
RewriteRule ^index\.php/(.*)$ /$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:04:08.857

转到您的全局配置页面并进行以下更改：

1.  打开 SEF（搜索引擎友好）URL 选项。
2.  对 Apache mod_rewrite 说“是”
3.  拒绝向 URL 添加后缀
4.  对 Unicode 别名说不
5.  拒绝以在页面标题中包含站点名称。

还将 htaccess.txt 更改为 .htaccess。现在在“重定向到此处”处添加新的重定向代码。

**代码**：

#### 开始 - 301 重定向

#

RewriteCond %{THE_REQUEST} ^[AZ]{3,9}\ /([^/]+/)*(index|home).html?\ HTTP/

RewriteRule ^(([^/]+/)*)(index|home).html?$ [http://www.example.com/](http://www.example.com/) $1 [R=301,L]

#

RewriteCond %{THE_REQUEST} !^POST

RewriteCond %{THE_REQUEST} ^[AZ]{3,9}\ /([^/]+/)*index.php\ HTTP/

RewriteCond %{SERVER_PORT}>s ^(443>(s)|[0-9]+>s)$

重写规则 ^(([^/]+/)*)index.php$ http%2://www.example.com/$1 [R=301,L]

#

RewriteCond %{HTTP_HOST} !^(www.example.com)?$

重写规则 (.*) [http://www.example.com/](http://www.example.com/) $1 [R=301,L]

#

#### 结束 - 301 重定向

注意：使用您的站点名称删除 www.example.com。

# c++ - 双10小数点精度

> ID：13931062
> 
> 赞同：3
> 
> 时间：2012-12-18T10:35:48.153
> 
> 标签：c++, c, visual-studio-2010

我们希望确保在将双精度值转换为字符串时保留最多 10 个小数点值。

当我们尝试 %e 或 %f 时，它不会保留超过 5 个小数点。当我们尝试 %.14f 时，小值（小于 1.0e-20）没有正确转换为字符串。

什么格式的字符串用于为双精度值保留最多 10 个小数点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T10:41:36.150

尝试`%.17g`以最合适的格式打印有问题的双精度。

```
printf("%.17g\n", 10000.);
printf("%.17g\n", 240.0008);
printf("%.17g\n", 0.0000000013);

10000
240.0008
1.3000000000000001e-009 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:39:34.743

我希望你*知道*类型`float`（单精度浮点）只能*保持*六位小数的精度？没有任何转换说明符可以给出开始时不存在的精度......（该`double`类型保持大约 15 位精度，仅供参考。）

链接：[http ://en.wikipedia.org/wiki/Floating_point#Internal_representation](http://en.wikipedia.org/wiki/Floating_point#Internal_representation)

**更新：** JasonD 有您更新问题的答案。保持这一点以备不时之需。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T10:39:46.077

浮点数只有在数字很小的情况下才能存储这个十进制数，否则使用双精度数。

在这个例子中`%.17g`并且 `%.14f`工作没有问题：

```
#include <stdio.h>

int main(void)
{
        double v = 0.12345678912345;
        printf("%.17g   %.14f  \n", v, v);
        return 0;
} 
```

显示结果：

```
0.12345678912345   0.12345678912345 
```

从文档

> **f**：十进制浮点数，小写 392.65
> 
> **e**：科学计数法（尾数/指数），小写 3.9265e+2
> 
> **g**：使用最短的表示： %e 或 %f 392.65

所以使用`%.14f`它很好

编辑：

> 小值（小于 1.0e-20）未正确转换为字符串。

显示多于20的十进制，你应该使用long double... 但是如果你只需要存储1.0e-20而不需要打印多于6的十进制，float可以容纳它。

对于 long double，您需要使用类似`%.21Lg`. 例如 ：

```
#include <stdio.h>

int main(void)
{
        long double v = 0.123456789123456789123456789;
        printf("%.21Lg   %.21Lf   \n", v, v);
        return 0;
} 
```

# postgresql - 将 postgresql 与 pgOleDb 提供程序和长字符串参数一起使用时出错

> ID：13931065
> 
> 赞同：0
> 
> 时间：2012-12-18T10:36:06.130
> 
> 标签：postgresql, oledb

我正在使用带有 pgOleDb 提供程序的 postgresql。当我尝试执行参数长度超过 35 个符号的查询时（我使用的是 utf-8），我收到此错误

```
ERROR:  identifier too long
DETAIL:  Identifier must be less than 64 characters. 
```

使用 devart 的 Ado.Net 提供程序运行此查询时没有问题。我该如何解决？

此站点的提供者： http://pgfoundry.org/frs/?group_id= [1000085](http://pgfoundry.org/frs/?group_id=1000085)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:29:09.913

将证明器切换到官方 ODBC [http://www.postgresql.org/ftp/odbc/versions/msi/](http://www.postgresql.org/ftp/odbc/versions/msi/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T15:20:22.517

我知道它现在有点老了，但我无法使用 ADO 组件解决这个问题，所以成功使用了 ZEOS 组件

# entity-framework - 防止在实体框架 (EF) 中获取计算列

> ID：13931075
> 
> 赞同：2
> 
> 时间：2012-12-18T10:36:36.647
> 
> 标签：entity-framework

我同时插入了很多记录。虽然我有一个我通常想要使用的时间戳字段，但这只是大约的大规模批量导入。1000 条记录。

使用分析器，我注意到在每次插入之后，EF 使用选择来检索计算列。在我对时间戳不感兴趣的大规模导入期间是否可以防止这种情况发生，因为我不会使用我刚刚在同一上下文中添加的值？

提前致谢！

# android - 带有图像的列表的最佳适配器

> ID：13931078
> 
> 赞同：0
> 
> 时间：2012-12-18T10:36:44.583
> 
> 标签：android, android-listfragment, android-adapter

我创建了一个列表，其中每行有几个信息，还有一个图像。我的问题是，当我查看下面的列表项时，必须加载图像并且它会堆叠直到它们被加载。我正在使用 BaseAdapter 来制作列表。有没有其他方法可以在不堆叠的情况下制作列表？例如，如果我尝试使用 ArrayAdapter 或 CursorAdapter 加载速度会更快吗？或者也许我必须更改其他内容才能使其正常工作？我会放代码......希望它会有所帮助！

列表片段

```
 public class SearchCarListActivity extends ListFragment {

private Button profileBtn;
private Button toggleMapListBtn;
private Button filterBtn;
private SearchCarListAdapter adapter;
private Location loc;
private SearchActivity parent;
private ArrayList<Car> cars;
private Location location;
private SearchFragmentActivity sfa;
private ArrayList<String> distance;

public void setCars(ArrayList<Car> cars){
    this.cars = cars;
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    SearchFragmentActivity afa = (SearchFragmentActivity)getActivity();
    afa.setCar((Car)adapter.getItem(position));
    Car c = (Car)adapter.getItem(position);
    afa.changeFragment(new SearchCarListExpandable());

}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    return inflater.inflate(R.layout.list_search_cars, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);
    setUpViews();
    parent = (SearchActivity)getActivity().getParent();

    LocationManager lm = (LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_COARSE);  // Faster, no GPS fix.
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    loc = lm.getLastKnownLocation(lm.getBestProvider(criteria, true));
    sfa = (SearchFragmentActivity) getActivity();
    cars = sfa.getCars();
    removeDeleted();
    setUpDistances();
    adapter = new SearchCarListAdapter(this.getActivity(), cars, distance);
    adapter.setCurrentLocation(loc);
    setListAdapter(adapter);
}

private void removeDeleted(){
    ArrayList<Car> c = new ArrayList<Car>();
    for (Car car:cars){
        if (car.getPricePerHour()!=0 || car.getPricePerKm()!=0){
            c.add(car);
        }
    }
    cars = c;
}

private void setUpDistances() {
    // TODO Auto-generated method stub
    distance = new ArrayList<String>();
    Location l = sfa.getMyLocation();
    String distan;
    for (Car car:cars){
        GeoPoint gp=car.getLocation();

        if (car.getLatitude()==0.0){
            distan = "Unknown";
        }else{
            float[] f = new float[3];
            Location.distanceBetween(l.getLatitude(), l.getLongitude(), (gp.getLatitudeE6()/1E6), (gp.getLongitudeE6()/1E6), f);
            Double dist = Double.valueOf(f[0]/1000);
            Short s = dist.shortValue();

            distan = (s.toString()+"Km");
        }
        distance.add(distan);
    }
}

private void setUpViews() {
    toggleMapListBtn = (Button)getView().findViewById(R.id.toggleMapListBtnInListView);
    toggleMapListBtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            SearchCarListActivity.this.getActivity().finish();

        }
    });

    filterBtn = (Button)getView().findViewById(R.id.filterListSearchBtn);
    filterBtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Intent i = new Intent(getActivity().getParent(), FilterSearchActivity.class);
            TabGroupActivity parentActivity = (TabGroupActivity)getActivity().getParent();
            parentActivity.startChildActivity("FilterSearchActivity", i);
        }
    });

}

@Override
public void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    adapter = new SearchCarListAdapter(this.getActivity(), cars, distance);
    adapter.setCurrentLocation(loc);
    setListAdapter(adapter);

}
  } 
```

基础适配器：

```
 public class SearchCarListAdapter extends BaseAdapter {

private ArrayList<Car> cars;
private Context context;
private Location currentLocation;
private ArrayList<String> distances;

public SearchCarListAdapter(Context c, ArrayList<Car> cars, ArrayList<String> distances){
    super();
    this.context = c;
    this.cars = cars;
    this.distances = distances;

}

public int getCount() {
    return cars.size();
}

public Object getItem(int position) {
    return (null == cars) ? null : cars.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    SearchCarItemView clv;
    if(null == convertView){
        clv = (SearchCarItemView)View.inflate(context, R.layout.search_car_list_item, null);
    } else {
        clv = (SearchCarItemView)convertView;
    }
    clv.setLocation(this.currentLocation);
    clv.setDistance(distances.get(position));
        clv.setCar(cars.get(position));

    return clv;
}

public Location getCurrentLocation() {
    return currentLocation;
}

public void setCurrentLocation(Location currentLocation) {
    this.currentLocation = currentLocation;
}

public String getNumberplate(int position) {
    Car c = cars.get(position);
    return c.getLicensePlate();

}

 } 
```

项目视图：

```
 public class SearchCarItemView extends LinearLayout {

private TextView name;
private ImageView iv;
private TextView distance;
private Car car;
private Context context;
private Location currentLocation;
private String distan;
private TextView addr;
private List<Address> address = new ArrayList<Address>();
private TextView priceKm;
private TextView priceH;
private TextView reviews;
private int reviCount;

public SearchCarItemView(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.context = context;
    // TODO Auto-generated constructor stub
}

@Override
protected void onFinishInflate(){
    super.onFinishInflate();
    name = (TextView)findViewById(com.tapazz.R.id.txtCarListItemName);  
    addr = (TextView)findViewById(R.id.txtCarListItemAddress);
    iv = (ImageView)findViewById(com.tapazz.R.id.carListItemSmallImage);
    distance = (TextView)findViewById(com.tapazz.R.id.txtCarListItemDistance);
    priceKm = (TextView)findViewById(R.id.txtCarListItemPricePerKm);
    priceH = (TextView)findViewById(R.id.txtCarListItemPricePerHour);
    reviews = (TextView)findViewById(R.id.txtCarListItemReviews);
}

public Car getCar() {
    return car;
}

public void setCar(final Car car){
    iv.setImageBitmap(null);
    this.car = car;
    name.setText(car.getName());
    getAddress();
    if(address.size()>0){
        String displayAddress = "";
        for(int i =0; i<address.get(0).getMaxAddressLineIndex(); i++){

            displayAddress += address.get(0).getAddressLine(i);
        }
        addr.setText(displayAddress);
    }
    Log.d("equals?", ((Boolean)car.getPhotoUrl().equals("")).toString());
    if(car.getPhotoUrl()!=null && !car.getPhotoUrl().equals("")){
        String thumbUrl = "http://tapazz.com/autopia/upload/thumbnail.php?image=cars/"+car.getPhotoUrl()+"&maxWidth=150&maxHeight=150";
        String urlString = "http://tapazz.com/autopia/upload/thumbnail.php?image=cars/"+car.getPhotoUrl()+"&maxWidth=150&maxHeight=150";
        DrawableManager.fetchDrawableOnThread(urlString, iv, null);
    }else{
        iv.setImageResource(R.drawable.take_photo_normal);
    }
    distance.setText(getDistance(car));
    priceKm.setText(String.format("€%.2f/km",car.getPricePerKm()));
    priceH.setText(String.format("€%.2f/H",car.getPricePerHour()));
    Thread thread = new Thread(){
        public void run(){

            Connection conn = Connect.getConnection();
                try {
                    Statement stmt = conn.createStatement();
                    String sql = "SELECT COUNT(Remarks) FROM BOOKING WHERE Car= "+car.getId()+" AND Remarks IS NOT NULL AND Remarks <> ''";
                    Log.d("SQL Review:", sql);
                    ResultSet rs = stmt.executeQuery(sql);
                    if (rs.next()){
                        reviCount = rs.getInt("COUNT(Remarks)");
                    }
                } catch (SQLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            finally{
            }   
        }
    };
    thread.start();
    try {
        thread.join();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    reviews.setText("Reviews: "+reviCount);
}

public void getAddress(){
    Geocoder geocoder = new Geocoder(context, Locale.getDefault());
    try {
        address = geocoder.getFromLocation(car.getLatitude(), car.getLongitude(), 1);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void setDistance (String distan){
    this.distan = distan;
}

private String getDistance(Car car) {
    String dis = "Distance: "+distan;

    //get distance
    return dis;
}

public void setLocation(Location currentLocation) {
    this.currentLocation =currentLocation;

}

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:42:54.877

您需要异步加载图像，请考虑在 ThreadPool 的上下文中使用 AsyncTask；你不应该在你的 UI 线程中处理加载图像，还要记住如果你没有正确处理大图片，最终可能会发生 OOM 异常。

看看这里，它将指导您完成您应该做什么： [http ://android-developers.blogspot.dk/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.dk/2010/07/multithreading-for-performance.html)

在他的 AsyncTask 类中，他正在处理下载图片，您应该将那段代码替换为从 sdcard 加载图片

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:35:40.907

您应该使用 LazyList 概念此链接将对您的 [惰性列表有所帮助](https://github.com/thest1/LazyList)

另一个链接是[链接](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:23:55.203

我发现了问题！问题是我是 sql 问题并从视图中的 url 下载图像，每次我在列表中向下时它都必须加载，所以它会堆叠直到加载。现在我首先加载片段中的所有信息并将其传递给适配器，现在速度更快（它已经不完美但运行良好）。我尝试更改为 ArrayAdapter，但我的情况没有任何区别。我必须尝试使用​​ cursoradapter 看看是否可以做得更好。感谢大家的帮助！！

# wpf - WPF MVVM 和父子组合框

> ID：13931079
> 
> 赞同：1
> 
> 时间：2012-12-18T10:36:45.273
> 
> 标签：wpf, data-binding, mvvm, combobox

我确定我已经在 StackOverflow 上找到了这个，但我似乎不够聪明，无法再次找到它

我想要做的是（在 WPF 中使用 MVVM）是这样的：

```
cmbSelectedAddressRegion: populated with the list of region
cmbSelectedAddressCities: populated with the list of cities in that region 
```

当用户点击某个地区时`cmbSelectedAddressRegion`，items 中的`cmbSelectedAddressCities`应该只有该地区的城市

我有这样的 XAML

```
 <ComboBox Name="cmbSelectedAddressRegion" 
SelectedValue="{Binding Path=selectedAddressItemRegion, UpdateSourceTrigger=PropertyChanged}" 
IsEnabled="{Binding Path=selectedAddressIsEnabled}" 
Style="{StaticResource style_flat_ComboBox}"></ComboBox>

    <ComboBox Name="cmbSelectedAddressCities" 
SelectedValue="{Binding Path=selectedAddressIdCities, UpdateSourceTrigger=PropertyChanged}" DisplayMemberPath="id" 
SelectedValuePath="id" 
ItemsSource="{Binding ElementName=cmbSelectedAddressRegion, Path=SelectedItem.Cities}" IsEnabled="{Binding Path=selectedAddressIsEnabled}" 
Style="{StaticResource style_flat_ComboBox}"></ComboBox> 
```

当我单击 cmbSelectedAddressRegion 中的一个区域时， cmbSelectedAddressCities 已正确填充

我还有一个`vmCustomer`带有很多`DependencyProperties`（其中`selectedAddressItemRegion`和`selectedAddressIdCities`）的虚拟机当我从主列表中选择客户（窗口中另一个包含客户列表的组合框）时，我看到`cmbSelectedAddressRegion`正确显示区域，但我没有看到中的任何东西`cmbSelectedAddressCities`。再次，如果我单击`cmbSelectedAddressRegion`已`cmbSelectedAddressCities`填充并选择当前选定的城市（在 中`vmCustomer`）

有`cmbSelectedAddressRegion.itemssource`界（在文件后面的 bode 中）到一个`ObservableCollection(of vmAddressRegion)` Each`vmAddressRegion`有，在其他 DependencyProperties 中，一个`cities`属性返回一个`ObservableCollection(of vmAddressCities)`

`ObservableCollection(of vmAddressRegion)`创建窗口时填充。同时，对于`ObservableCollection(of vmAddressRegion)`（类型`vmAddressRegion`）的每个项目，`ObservableCollection(of vmAddressCities)`都填充了相应的项目）

我希望我已经足够清楚了任何建议如何解决上述问题（`cmbSelectedAddressCities`没有被“填充”）？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:04:24.947

很抱歉耽搁了这么久。

我知道我承诺在本周末发回我的解决方案，但我的电脑决定第二天就死机了。关于我原来的问题，我采用了 2 个“解决方案”。首先，我删除了数字 ID，将其更改为地区/城市的完整描述。我认为这很好，但是对于一些“奇怪”的情况（例如第一次单击区域组合框时）仍然存在问题。在代码中挖掘了一段时间后，我发现真正的问题出在我为应用程序。在转换过程中，我犯了一个错误：我写了“if isnothing”而不是“ **if** **not isnothing** ”，结果是一个无转换为空格，搞乱了整个父子关系。正如我担心的那样，问题是在我的代码中，

再次感谢大家，再次为延误道歉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:46:41.813

WPF ComboBox 需要小心处理。如果 ItemsSource 和 SelectedValue/SelectedItem 以“错误”的顺序更改，绑定很容易混淆，尤其是在您使用 SelectedValue 时。

我的建议是用“SelectedItem”替换“SelectedValue”绑定。绑定表达式可以保持不变（尽管我认为您不需要指定 UpdateSourceTrigger）。

绑定到 SelectedItem 意味着您的**vmCustomer**需要**selectedAddressCity**属性而不是 selectedAddressIdCity id（并且您可以删除 cmbSelectedAddressCities 的 SelectedValuePath）。

# php - Zend Framework 2 - 整数形式验证

> ID：13931080
> 
> 赞同：5
> 
> 时间：2012-12-18T10:36:45.687
> 
> 标签：php, validation, zend-framework2

我有以下问题。我（根据教程）编写了一个表单验证。文本字段工作得很好，但整数字段表现得很奇怪。

这是我的验证器：

```
 $inputFilter->add($factory->createInput(array(
            'name'     => 'zip',
            'required' => false,
            'filters'  => array(
                array('name' => 'Int'),
            ),
        ))); 
```

它与其他过滤器一样位于我的 Entity.php 中。奇怪的是，这个甚至不接受字符串，但`required`在我将其设置为时忽略了`true`. 我尝试替换`Int`为`Digits`which 然后导致表单接受`required`但仍接受字符串。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T11:22:51.213

尝试使用[Between](https://zf2.readthedocs.org/en/latest/modules/zend.validator.between.html)验证器：

```
$inputFilter->add($factory->createInput(array(
            'name'     => 'zip',
            'required' => true,
            'filters'  => array(
                array('name' => 'Int'),
            ),
            'validators' => array(
              array(
                  'name' => 'Between',
                  'options' => array(
                      'min' => 1,
                      'max' => 1000,
                  ),
              ),
            ),
        ))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-25T06:19:50.373

这是一个老话题，但我应该提一下，`Filters`不会导致验证错误，它们在后台工作并默默地完成工作。

例如`Int`过滤器将从输入中删除任何非整数，因此当您`$form->getData()`使用过滤器执行该字段时，`Int`将只有整数值，如果为空，则为 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-28T07:26:05.493

```
 array(
                        'name' => 'not_empty',
                    ),
                    array(
                        'name' => 'Digits',
                    ), array(
                        'name' => 'Between',
                        'options' => array(
                            'min' => 0,
                            'max' => 1,
                        ),
                    ), 
```

# java - JTextField 焦点未在第一次单击 Tab 按钮时获得

> ID：13931081
> 
> 赞同：0
> 
> 时间：2012-12-18T10:36:46.510
> 
> 标签：java, swing, autocomplete, focus, jtextfield

我已经用两个具有自动完成功能的 JTextField 完成了一个应用程序，该应用程序工作正常，但是当鼠标指针位于第一个 TextField 上时单击 Tab 按钮时，鼠标焦点不会进入第二个 TextField，而是第二次获得焦点. 即为了传递焦点，我们按下 Tab 按钮两次

谁能告诉我这是这个问题的原因和解决方案

我的代码如下

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.*;
import java.text.Collator;
import java.util.*;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JComboBox;
import javax.swing.JTextField;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.PlainDocument;

public class AutoCompleteExample extends javax.swing.JFrame {
    public AutoCompleteExample() {
        initComponents();
         List<Country> countries = new ArrayList<Country>();

        Locale[] locales = Locale.getAvailableLocales();
        for (Locale locale : locales) {
        String iso = locale.getISO3Country();
        String code = locale.getCountry();

        String name = locale.getDisplayCountry();

        if (!"".equals(iso) && !"".equals(code) && !"".equals(name)) {
            countries.add(new Country(iso, code, name));
        }
        }

        Collections.sort(countries, new CountryComparator());
        java.util.Set<String> item = new java.util.TreeSet<String>();
        for(Country cn:countries){
            item.add(""+cn);
        }
        ArrayList<String> items = new ArrayList<String>(item);
        setupAutoComplete(country,code, items);
        country.setColumns(30);   
    }
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jDesktopPane1 = new javax.swing.JDesktopPane();
        jLabel1 = new javax.swing.JLabel();
        country = new javax.swing.JTextField();
        jLabel2 = new javax.swing.JLabel();
        code = new javax.swing.JTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jDesktopPane1.setBackground(javax.swing.UIManager.getDefaults().getColor("Button.background"));

        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel1.setText("Country Name");
        jLabel1.setBounds(0, 10, 80, 20);
        jDesktopPane1.add(jLabel1, javax.swing.JLayeredPane.DEFAULT_LAYER);

        country.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                countryFocusLost(evt);
            }
        });
        country.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyReleased(java.awt.event.KeyEvent evt) {
                countryKeyReleased(evt);
            }
        });
        country.setBounds(90, 10, 140, 20);
        jDesktopPane1.add(country, javax.swing.JLayeredPane.DEFAULT_LAYER);

        jLabel2.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel2.setText("Code");
        jLabel2.setBounds(235, 10, 50, 20);
        jDesktopPane1.add(jLabel2, javax.swing.JLayeredPane.DEFAULT_LAYER);
        code.setBounds(300, 10, 160, 20);
        jDesktopPane1.add(code, javax.swing.JLayeredPane.DEFAULT_LAYER);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jDesktopPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 473, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jDesktopPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 43, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>

    private void countryFocusLost(java.awt.event.FocusEvent evt) {
        // TODO add your handling code here:
    }

    private void countryKeyReleased(java.awt.event.KeyEvent evt) {

    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new AutoCompleteExample().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    public static javax.swing.JTextField code;
    public static javax.swing.JTextField country;
    private javax.swing.JDesktopPane jDesktopPane1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    // End of variables declaration

 private static boolean isAdjusting(JComboBox cbInput) {
        if (cbInput.getClientProperty("is_adjusting") instanceof Boolean) {
            return (Boolean) cbInput.getClientProperty("is_adjusting");
        }
        return false;
    }

    private static void setAdjusting(JComboBox cbInput, boolean adjusting) {
        cbInput.putClientProperty("is_adjusting", adjusting);
    }

    public static void setupAutoComplete(final JTextField txtInput,final JTextField txtInput2, final ArrayList<String> items) {
        final DefaultComboBoxModel model = new DefaultComboBoxModel();
        final JComboBox cbInput = new JComboBox(model) {
            public Dimension getPreferredSize() {
                return new Dimension(super.getPreferredSize().width, 0);
            }
        };
        setAdjusting(cbInput, false);
        for (Object item : items) {
            model.addElement(item);
        }
        cbInput.setSelectedItem(null);
        cbInput.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (!isAdjusting(cbInput)) {
                    if (cbInput.getSelectedItem() != null) {
                        txtInput.setText(cbInput.getSelectedItem().toString());
                        txtInput2.setText(datas.get(cbInput.getSelectedItem().toString())+"");
                    }
                }
            }
        });

        txtInput.addKeyListener(new KeyAdapter() {

            @Override
            public void keyPressed(KeyEvent e) {
                setAdjusting(cbInput, true);
                if (e.getKeyCode() == KeyEvent.VK_SPACE) {
                    if (cbInput.isPopupVisible()) {
                        e.setKeyCode(KeyEvent.VK_ENTER);
                    }
                }
                if (e.getKeyCode() == KeyEvent.VK_ENTER || e.getKeyCode() == KeyEvent.VK_UP || e.getKeyCode() == KeyEvent.VK_DOWN) {
                    e.setSource(cbInput);
                    cbInput.dispatchEvent(e);
                    if (e.getKeyCode() == KeyEvent.VK_ENTER) {
                        txtInput.setText(cbInput.getSelectedItem().toString());
                        // System.out.println("SEEEEE:"+datas.get(cbInput.getSelectedItem().toString()));
                        txtInput2.setText(datas.get(cbInput.getSelectedItem().toString())+"");
                        cbInput.setPopupVisible(false);
                    }
                }
                if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {
                    cbInput.setPopupVisible(false);
                }
                setAdjusting(cbInput, false);
            }
            @Override
             public void keyReleased(KeyEvent e)
             {
                setAdjusting(cbInput, true);
                if (e.getKeyCode() == KeyEvent.VK_SPACE) {
                    if (cbInput.isPopupVisible()) {
                        e.setKeyCode(KeyEvent.VK_ENTER);
                    }
                }
                if (e.getKeyCode() == KeyEvent.VK_ENTER || e.getKeyCode() == KeyEvent.VK_UP || e.getKeyCode() == KeyEvent.VK_DOWN) {
                    e.setSource(cbInput);
                    cbInput.dispatchEvent(e);
                    if (e.getKeyCode() == KeyEvent.VK_ENTER) {
                        txtInput.setText(cbInput.getSelectedItem().toString());
                        // System.out.println("SEEEEE:"+datas.get(cbInput.getSelectedItem().toString()));
                        txtInput2.setText(datas.get(cbInput.getSelectedItem().toString())+"");
                        cbInput.setPopupVisible(false);
                    }
                }
                if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {
                    cbInput.setPopupVisible(false);
                }
                setAdjusting(cbInput, false);
             }
        });

        txtInput.addFocusListener(new FocusListener() {
            public void focusGained(FocusEvent e) {

            }
            @Override
            public void focusLost(FocusEvent e) {
            try{     setAdjusting(cbInput, true);
                 e.setSource(cbInput);
                 cbInput.dispatchEvent(e);
                 txtInput.setText(cbInput.getSelectedItem().toString());
                       // System.out.println("SEEEEE:"+datas.get(cbInput.getSelectedItem().toString()));
                 txtInput2.setText(datas.get(cbInput.getSelectedItem().toString())+"");
                 cbInput.setPopupVisible(false); 
                 setAdjusting(cbInput, false);
            }catch(Exception s){country.setText("");code.setText("");
            }
              }
            });

        txtInput.getDocument().addDocumentListener(new DocumentListener() {
            public void insertUpdate(DocumentEvent e) {
                updateList();
            }

            public void removeUpdate(DocumentEvent e) {
                updateList();
            }

            public void changedUpdate(DocumentEvent e) {
                updateList();
            }

            private void updateList() {
                setAdjusting(cbInput, true);
                model.removeAllElements();
                String input = txtInput.getText();
                if (!input.isEmpty()) {
                    for (Object item : items) {
                        if ((item+"").toLowerCase().startsWith(input.toLowerCase())) {
                            model.addElement(item);
                        }
                    }
                }
                cbInput.setPopupVisible(model.getSize() > 0);
                setAdjusting(cbInput, false);
            }
        });
        txtInput.setLayout(new BorderLayout());
        txtInput.add(cbInput, BorderLayout.SOUTH);
    }
    public static HashMap datas=new HashMap();;
}

////////////////////////////////////////////////////class JTextFieldLimits for limiting texfield strength/////////////////////////////////////////

class JTextFieldLimits extends PlainDocument {
  private int limit;
  JTextFieldLimits(int limit) {
   super();
   this.limit = limit;
   }

    @Override
  public void insertString( int offset, String  str, AttributeSet attr ) throws BadLocationException {
    if (str == null) return;

    if ((getLength() + str.length()) <= limit) {
      super.insertString(offset, str, attr);
    }
  }
}

////////////////////////////////////////////////////class Country for getting names/////////////////////////////////////////

class Country {
  private String iso;

  private String code;

  public String name;

  Country(String iso, String code, String name) {
    this.iso = iso;
    this.code = code;
    this.name = name;
      AutoCompleteExample.datas.put(name, code);
  }

    @Override
  public String toString() {

    return  name;
  }

  public String getName() {
    return  code;
  }

}

class CountryComparator implements Comparator<Country> {
  private Comparator comparator;

  CountryComparator() {
    comparator = Collator.getInstance();
  }

    @Override
  public int compare(Country o1, Country o2) {
    return comparator.compare(o1.name, o2.name);
  }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:10:48.027

为什么要重新发明轮子，改用

*   [自动完成`JComboBox`/`JTextField`](https://stackoverflow.com/a/7255918/714968)

*   [装饰器实现在`SwingX`](http://java.net/projects/swingx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T22:17:34.740

问题是您`JComboBox`用于显示自动完成功能的焦点是可聚焦的。因此，当您点击选项卡时，它会专注于不可见的 ComboBox。如果您在声明后使用此行`cbInput`in `setupAutoComplete`，它应该可以解决您的问题：

```
 cbInput.setFocusable(false); 
```

例子：

```
public static void setupAutoComplete(final JTextField txtInput,final JTextField txtInput2, final ArrayList<String> items) {
        final DefaultComboBoxModel model = new DefaultComboBoxModel();
        final JComboBox cbInput = new JComboBox(model) {
            public Dimension getPreferredSize() {
                return new Dimension(super.getPreferredSize().width, 0);
            }
        };

        //The important line:
        cbInput.setFocusable(false);

        setAdjusting(cbInput, false);
        for (Object item : items) {
            model.addElement(item);
        }
        ...
} 
```

# git - 从 Git Flow 分支模型进入生产的最佳方式是什么？

> ID：13931089
> 
> 赞同：0
> 
> 时间：2012-12-18T10:37:03.607
> 
> 标签：git, git-flow

我最近加入了一个新的开发团队，我们正在将 Git 和 Git Flow 分支模型整合到我们的工作环境中。

到目前为止，我们已经在远程仓库中设置了开发和主分支。开发分支有一个自动钩子，当看到推送时，它会将代码部署到我们的暂存区。我还刚刚创建了一个包含生产就绪代码的标签。

我现在的问题是，从该州转向生产的最佳方式或行业标准是什么？

我看到的一些选项是：

1.  从生产位置的标签版本克隆 repo。然后在将来从新创建的标签中提取。
2.  `git archive <tag> | tar -x -C /path/to/live/site`每次我们想要使用新标签进行生产时，手动执行类似于此的命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:41:45.900

我个人更喜欢[这里](http://nvie.com/posts/a-successful-git-branching-model/)提到的策略。您可能想详细阅读？

# xml - 从 WSDL 文件确定端点

> ID：13931090
> 
> 赞同：4
> 
> 时间：2012-12-18T10:37:02.700
> 
> 标签：xml, soap, wsdl, soapui

我是 Web 服务的新手，我的任务是尝试在 PL/SQL 中编写一些包，这些包向外部 Web 服务发出请求，以允许客户查看他们当前的支持票证以及我们在支持方面的状态门票。我已经获得了我正在尝试使用的服务的 WSDL 位置，并且我已经使用 SOAPUI 来检查 WSDL 以形成一些请求。但是，当我尝试运行登录请求时，它总是失败（我认为是因为 SOAP UI 中定义的端点不正确。

这是我尝试使用的 WSDL 文件：http: [//www.visionproject.se/api/docs/service.wsdl](http://www.visionproject.se/api/docs/service.wsdl)

以及服务的 API：http: [//www.visionproject.se/api/docs/soap_service_VisionProjectWebServiceService.html#login2](http://www.visionproject.se/api/docs/soap_service_VisionProjectWebServiceService.html#login2)

这是我试图形成的请求（如下所示）。谁能指出我为什么会失败的正确方向？我相信这可能与顶部的端点有关，但我不确定。

正如我所说，我是 Web 服务和 PL/SQL 的新手（我来自 PHP 背景，以前从未做过这些事情），所以如果我没有提供足够的信息，我深表歉意。

![WSDL 使用](../Images/3cb3b06b802425a8dc5f30c2eef26d37.png)

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"     xmlns:vis="http://www.visionproject.se/service/VisionProjectService-v2">
   <soapenv:Header/>
   <soapenv:Body>
      <vis:login2>
         <!--Optional:-->
         <username>?</username>
         <!--Optional:-->
         <password>?</password>
         <!--Optional:-->
         <visionProjectVersion>?</visionProjectVersion>
      </vis:login2>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:19:17.483

端点看起来可能是正确的。WSDL 可以有一个“建议的”端点，但不能保证是实际的端点。即在您的 WSDL 的底部有一个条目：（StackOverflow 不喜欢我发布实际的 URL，因为它包含 localhost 并且显然是伪造的。）

您的请求可能会失败，因为您没有替换 ? 具有实际值的占位符。替换那些并再次发送。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T08:15:58.907

您提供的 API 文档链接中提供了一些示例测试客户端。这些使用以下端点 URL：

`http://www.visionproject.se/service/VisionProject-v2/VisionProjectWebServiceService`

将其粘贴到浏览器时，它会返回“无效的 SOAP 请求”，因此看起来好像有一个服务在此 URL 上运行。

试试这个。

# domdocument - php DomDocument ：匹配每个nodeValue，如果条件满足，则将属性添加到其nodeName

> ID：13931098
> 
> 赞同：-3
> 
> 时间：2012-12-18T10:37:29.097
> 
> 标签：domdocument, php

**检查每个文本节点是否存在于数据库中，如果存在则将一个类添加到其元素节点。**

我尝试过以下方式：

```
function extractText($node) {
    if (XML_TEXT_NODE === $node->nodeType || XML_CDATA_SECTION_NODE === $node->nodeType) {

// am considering that Login is the word that exists in DB
            if ($node->nodeValue == "Login"): 
                $node->setAttribute("class", "translated");
                return $node->nodeName;
            endif;
        } else if (XML_ELEMENT_NODE === $node->nodeType || XML_DOCUMENT_NODE === $node->nodeType
                || XML_DOCUMENT_FRAG_NODE === $node->nodeType) {
            if ('script' === $node->nodeName || 'style' === $node->nodeName)
                return '';

        $text = '';
        foreach ($node->childNodes as $childNode) {
            $text .= extractText($childNode);
        }
        return $text;
    }
}

$doc = new DomDocument;
$doc->loadHTMLFile('test.html');

//var_dump(extractText($doc->getElementsByTagName('body')->item(0)));
echo extractText($doc->getElementsByTagName('body')->item(0)); 
```

但它给出了错误消息。

**致命错误：调用未定义的方法 DOMText::setAttribute()**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:48:40.160

> 致命错误：调用未定义的方法 DOMText::setAttribute()

好吧，让我们看一下代码。

```
if (XML_TEXT_NODE === $node->nodeType || XML_CDATA_SECTION_NODE === $node->nodeType) {
// am considering that Login is the word that exists in DB
    if ($node->nodeValue == "Login"): 
        $node->setAttribute("class", "translated");
        return $node->nodeName;
    endif;
} /* else ... */ 
```

您只要求文本或 CDATA 节点，然后您尝试在文本上设置属性 ...。这行不通。文本节点不能有属性。

您需要找到包含文本的*元素*并在那里添加属性。因为[DOMText](http://php.net/class.domtext)继承自[DOMNode](http://php.net/class.domnode)，所以您可以检查该`parentNode`属性并*可能*返回一个元素。

# git - git 从整个历史记录中删除所有已删除的文件

> ID：13931099
> 
> 赞同：10
> 
> 时间：2012-12-18T10:37:31.217
> 
> 标签：git, bash, git-bash

我想知道是否有人有更有效、更智能的方法来做到这一点。循环结构要求通过读取每个提交从每个提交中删除每个已删除的文件。对于许多提交，这需要很长时间。

```
git log --pretty=format: --name-status | grep -i ^D | cut -f2- | sort -u | xargs -I {} git filter-branch -f --index-filter 'git rm --cached --ignore-unmatch {}' HEAD 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T07:04:41.713

这似乎一次删除每个文件。
考虑到[`git rm`](http://git-scm.com/docs/git-rm)可能需要删除多个文件。

因此，一种优化是构建该列表并调用一次过滤器分支。[您可以在“正确删除不需要的文件](https://stackoverflow.com/questions/12179611/proper-way-to-remove-unwanted-files-with-git-filter-branch-without-git-rm-failin)[而不](https://stackoverflow.com/questions/12179611/proper-way-to-remove-unwanted-files-with-git-filter-branch-without-git-rm-failin)[失败](https://stackoverflow.com/questions/12179611/proper-way-to-remove-unwanted-files-with-git-filter-branch-without-git-rm-failin)
” 中查看该方法的一个示例。[`git filter-branch``git rm`](https://stackoverflow.com/questions/12179611/proper-way-to-remove-unwanted-files-with-git-filter-branch-without-git-rm-failin)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-12T07:58:55.380

对于可能正在寻找相同答案的其他人，我使用[另一个线程](https://stackoverflow.com/questions/12179611/proper-way-to-remove-unwanted-files-with-git-filter-branch-without-git-rm-failin)中链接的建议修改了上面的原始命令，并创建了这个似乎对我有用的命令。

```
git filter-branch --prune-empty --index-filter 'git log --pretty=format: --name-status | grep -i ^D | cut -f2- | sort -u | xargs git rm --cached --ignore-unmatch DoesNotExistInMyProject' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-18T12:53:25.027

支持递归删除的小改进

```
git filter-branch --prune-empty --index-filter 'git log --pretty=format: --name-status | grep -i ^D | cut -f2- | sort -u | xargs git rm -r --cached --ignore-unmatch DoesNotExistInMyProject' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-07T17:16:09.670

改进了命令以避免带有 ' 的文件名导致 xargs 出错

`echo "/!\ This file contains a single quote ' and it's gonna bug with xargs, so it's excluded from the filter operation" ; bash -c "git log --pretty=format: --name-status | grep -i ^D " | grep \' git filter-branch -f --prune-empty --index-filter "git log --pretty=format: --name-status | grep -i ^D | grep -v \' | cut -f2- | sort -u | xargs git rm -r --cached --ignore-unmatch DoesNotExistInMyProject"`

# php - 关闭旧的 php websocket

> ID：13931101
> 
> 赞同：3
> 
> 时间：2012-12-18T10:37:37.227
> 
> 标签：php, websocket, phpwebsocket

我正在使用[PHP-Websockets](https://github.com/ghedipunk/PHP-Websockets)创建一个简单的聊天服务器。当我第一次运行在我的服务器上创建 websocket 的 php 脚本时，我的一切工作正常。如果脚本由于某种原因停止并且我尝试重新运行它，我会收到一条错误消息，指出脚本无法绑定套接字，因为它已经存在。

如何编写脚本来找到这个旧套接字（假设我知道它在哪个端口上运行）并关闭它以便建立新连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:48:11.003

如果您具有 shell 访问权限，我将使用以下命令来推断使用该套接字（端口）的进程的 PID。

```
netstat --tcp --listening --program 
```

然后杀死那个进程。

```
kill %pid% 
```

不过，为了防止这种情况发生，我会仔细检查您的脚本是否正常终止并首先关闭套接字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-07T23:09:04.880

在 Ubuntu(linux) 服务器上测试：

这是我解决它的方法：使用`exec()`函数，您可以轻松终止正在运行的 Web 套接字：让一个名为的 php 文件`socketControl.php`和代码：

```
exec('kill $(pidof php)'); 
```

这应该取消服务器中当前正在运行的 php websocket。

# google-maps - 谷歌地图 - 自动连接地点

> ID：13931104
> 
> 赞同：0
> 
> 时间：2012-12-18T10:37:48.193
> 
> 标签：google-maps

我在谷歌地图中有一张个性化的地图，上面标有东京市的一堆地方。

是否可以*“自动连接”* /在这些地方之间绘制一条步行路径，而无需手动链接每个地点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:51:28.607

结帐[方向服务](https://developers.google.com/maps/documentation/javascript/directions)，提供您的时使用此语法`waypoints`：

```
{
  origin: "Chicago, IL",
  destination: "Los Angeles, CA",
  waypoints: [
    {
      location:"Joplin, MO",
      stopover:false
    },{
      location:"Oklahoma City, OK",
      stopover:true
    }],
  provideRouteAlternatives: false,
  travelMode: TravelMode.WALKIN,
  unitSystem: UnitSystem.IMPERIAL
} 
```

# php - RewriteRule：试图摆脱破折号

> ID：13931105
> 
> 赞同：1
> 
> 时间：2012-12-18T10:37:48.543
> 
> 标签：php, apache, codeigniter, mod-rewrite, rewrite

我正在尝试重写 URL 中的破折号，以便它们在内部不存在。例如这个网址

本地主机/我的站点/**关于我**

**"about-me"**应该重写为**"aboutme"**。我需要这个，因为控制器类名取决于这个路由字符串，我显然不能为此使用破折号。

这是我发现的条件和规则，我认为应该适合我的需要：

```
# Condition is to avoid rewrite on files within specified subdirs
RewriteCond $1 !^(css|img|ckeditor|scripts)
RewriteRule ^([^-]+)-([^-]+)$ $1$2 [L] 
```

然而，它似乎不起作用，因为控制器类**Aboutme**没有实例化。相反，我收到了**404 错误**，并且对于名称中没有破折号的类似控制器类，我没有任何问题。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:42:53.810

为什么不走路线？

```
$route['about-me'] = 'aboutme/index'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:44:26.353

尝试删除 ^ 和 $

```
# Condition is to avoid rewrite on files within specified subdirs
RewriteCond $1 !^(css|img|ckeditor|scripts)
RewriteRule ([^-]+)-([^-]+) $1$2 [L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:52:26.137

您可以扩展路由器类。
在*/application/core*创建一个名为**MY_Router.php**的文件（**MY**是默认前缀）并将其复制到其中；

```
<?php if (! defined('BASEPATH')) exit('No direct script access allowed');
class MY_Router extends CI_Router {

    function set_class($class) {
        $this->class = str_replace('-', '_', $class);
    }

    function set_method($method) {
        $this->method = str_replace('-', '_', $method);
    }

    function _validate_request($segments) {
        // Does the requested controller exist in the root folder?
        if (file_exists(APPPATH.'controllers/'.str_replace('-', '_', $segments[0]).'.php')) {
            return $segments;
        }
        // Is the controller in a sub-folder?
        if (is_dir(APPPATH.'controllers/'.$segments[0])) {       
            // Set the directory and remove it from the segment array
            $this->set_directory($segments[0]);
            $segments = array_slice($segments, 1);

            if (count($segments) > 0) {
                // Does the requested controller exist in the sub-folder?
                if ( ! file_exists(APPPATH.'controllers/'.$this->fetch_directory().str_replace('-', '_', $segments[0]).'.php')) {
                    show_404($this->fetch_directory().$segments[0]);
                }
            } else {
                $this->set_class($this->default_controller);
                $this->set_method('index');

                // Does the default controller exist in the sub-folder?
                if ( ! file_exists(APPPATH.'controllers/'.$this->fetch_directory().$this->default_controller.'.php')) {
                    $this->directory = '';
                    return array();
                }

            }

            return $segments;
        }

        // Can't find the requested controller...
        show_404($segments[0]);
    }
} 
```

这将自动为您重写 - 为 _ 。
如果您不想使用下划线，请更改代码以将其替换为空；
的所有`str_replace('-', '_',`出现`str_replace('-', '',`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T16:23:38.510

这是一种使用 mod-rewrite 的方法：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  ^/(.*)([\w]*)-([\w]*)(.*)/?$ [NC]
RewriteRule  .* %1%2%3%4 [L,DPI] 
```

不会重定向，但可以`R=301`像这样添加 [R=301,DPI,L]。

不一定要`about-me`。可以是任何位置的任何单词对。IE

`localhost/mysite/about-me`=`.../aboutme`或

`localhost/mysite/folder1/folder2/folder3/my-folder`=`.../myfolder`或

`localhost/mysite/folder1/folder2/my-folder/folder3`= `.../myfolder/...`

# post - Yii：什么可以阻止访问 $_POST 数据？

> ID：13931109
> 
> 赞同：1
> 
> 时间：2012-12-18T10:38:03.247
> 
> 标签：post, yii, controls

我正在向控制器/操作（不是 ajax）发送帖子。

在动作内部，我正在执行检查它是否是帖子的标准方式（确切的方式适用于我正在使用的其他动作）。

```
if( isset( $_POST['LessonForm'] ) )
{
 ...
}
else
{
   Yii::trace( "Post Not Set" );        
} 
```

并且帖子始终未设置。

但是，如果我`var_dump( $_POST ); die();`在条件前面加上 a，我会得到：

```
array(2) { ["LessonForm"]=> array(3) { ["title"]=> string(4) "test" ["shortDescription"]=> string(4) "test" ["image"]=> string(0) "" } ["yt1"]=> string(0) "" } 
```

所以帖子显然在那里。此外，

```
foreach( $_POST as $key => $value )
{
    echo( $key.'<br>' );
} 
```

我明白了：

```
LessonForm
yt1 
```

进一步表明该职位在那里。

尝试在 $_POST 中使用变量时，它不存在。如果在 foreach 循环中访问它并将其分配给变量，我可以对变量进行 vardump 但不使用它。

为了测试它是否是一个访问控制问题，我删除了所有过滤器。

什么可以阻止这样的访问？

**更新：**

@Stu 是正确的，因为它不是作为 POST 发送的。表单方法是post。不知道如何强制发布？

**更新 2：**

问题已解决，但我仍然不确定是什么导致 CActiveForm 发送 get 而不是 post 并且仍然包含 post 数据。

从模型保存中删除事务后，问题就消失了（它本来就不应该存在）。

**更新 3：**

最初的问题是 actionCreate。这个问题神秘地消失了。接下来是一个动作编辑。呈现的视图（带有表单）是同一个文件。该操作被复制并粘贴，并修改了数据的保存方式和获取模型，而不是制作新模型。

查看网络流量后，有一个帖子紧跟在我的代码中没有的 302 重定向。出于某种原因，Yii 强制执行 302 重定向以执行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:40:24.947

Yii 已经抽象出获取请求变量，无论它们`POST`是`GET`

利用：`Yii::app()->request->getParam('SomeVarName', 'ADefaultValue');`

获取请求变量并在不存在时返回合理的默认值。但是，如果您一开始就无法从表单中发送变量，那可能是另一个问题。

# android - 如何确定电脑上安装的android SDK的版本？

> ID：13931110
> 
> 赞同：49
> 
> 时间：2012-12-18T10:38:09.353
> 
> 标签：android, sdk, android-sdk-tools

如何确定我电脑中安装的 Android SDK 版本？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-18T10:50:12.570

```
<Program files>\Android\Android-sdk\platforms\<platform SDK's> 
```

在 32 位机器上：“ `<Program files>`”将是 `\Program Files\`

在 64 位机器上：

如果您安装了 32 位 ADT，“ `<Program files>`”将是 `\Program Files (x86)\`

如果您安装了 64 位 ADT，“ `<Program files>`”将是 `\Program Files\`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-11-20T11:15:21.677

在`android list target`命令行中输入以查看您正在使用的 android API。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-06-18T18:23:43.063

```
C:\ <path to android sdk> \tools\source.properties (open with notepad) 
```

在那里你会找到它。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-01-10T13:07:17.400

Android Studio 现在（2015 年初）已完成测试。如果您使用它作为您的开发平台，SDK 管理器可能是查看可用内容的最简单方法。要从 Android Studio 中启动 SDK 管理器，请使用菜单栏：工具 > Android > SDK 管理器。

这不仅会提供 SDK 版本，还会提供 SDK Build Tools 和 SDK Platform Tools 的版本。如果您将它们安装在 Program Files 以外的其他位置，它也可以工作。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-10-23T18:54:38.660

您可以检查 Windows 10 的以下路径

C:\Users{用户名}\AppData\Local\Android\sdk\platforms

此外，您可以从 android studio 检查

文件 > 项目结构 > SDK 位置 > Android SDK 位置

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-02T15:54:42.750

打开android sdk->单击工具选项卡->关于，您将获得全部详细信息！

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-08-05T11:35:06.307

在 Linux 的情况下，您可以使用`sdkmanager`.

`your_path/android-sdk/tools/bin/sdkmanager --version`

就我而言

`/var/lib/jenkins/android-sdk/tools/bin/sdkmanager --version`[![在此处输入图像描述](../Images/1e3daa7f2d8c65f225619d24868d62c4.png)](https://i.stack.imgur.com/z7828.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-07-08T19:42:23.957

虽然一些回复显示了如何使用 Android SDK Manager GUI 获取已安装的 Android SDK 和各种 Android SDK 相关工具的版本，但这里有一种从命令行获取相同信息的方法：

```
%ANDROID_HOME%\tools\bin\sdkmanager.bat --list 
```

您可以将输出重定向到文件以方便查看和共享。

注意：在我的公司环境中，我还必须使用`--proxy`、`--proxy_host`和`--proxy_port`命令行 选项。您可能还需要使用它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-22T19:16:28.560

*我使用集成在Visual Studio 2017*中的 Xamarin 开发跨平台移动应用程序。

我更喜欢在 Visual Studio 2017 中安装和检查 Android SDK 的所有详细信息。这可以在菜单**TOOLS** -> **Android** -> **Android SDK Manager**下找到。

Bellow 是 Adroid SDK Manager 的可视化表示。[![在此处输入图像描述](../Images/977cf0580ce172c27f3a2fef0a69fecc.png)](https://i.stack.imgur.com/ulDrI.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-09T09:06:42.320

如果您更喜欢从 UI 进行管理，请在命令窗口中键入 android，这将打开 Android SDK 管理器。或者直接从 C:\Program Files (x86)\Android\android-sdk\SDK Manager.exe 打开

[![在此处输入图像描述](../Images/828dd9b634c6725fe4f9fb04000e88b5.png)](https://i.stack.imgur.com/IBIth.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-11-08T10:09:29.807

在 Windows 中创建一个批处理文件 (.bat)，其中包含以下命令：

`%ANDROID_HOME%\tools\bin\sdkmanager.bat --list && pause`

**注意：**必须使用`&& pause`才能查看信息，一旦列出。如果不使用，批处理文件将简单地运行，只需几秒钟即可显示信息并立即退出。

# mysql - 在mysql中添加具有自动增量的主键

> ID：13931111
> 
> 赞同：1
> 
> 时间：2012-12-18T10:38:12.363
> 
> 标签：mysql, primary-key, auto-increment, alter-table

如何在mysql.am中使用alter语句将特定列设置为主键并自动递增。但是当我在mysql中执行alter语句时出现错误。

```
alter statement
---------------

 ALTER TABLE tbl_travelplan add COLUMN TRREQNO id INT(11) NOT NULL AUTO_INCREMENT, ADD PRIMARY KEY (id); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:41:05.727

您需要先删除主键：试试这个::

```
ALTER TABLE tbl_travelplan add TRREQNO_id INT(11) NOT NULL AUTO_INCREMENT, DROP PRIMARY KEY,PRIMARY KEY;    

ALTER TABLE tbl_travelplan add TRREQNO_id INT(11) NOT NULL AUTO_INCREMENT PRIMARY KEY; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T10:57:07.380

我认为真正的问题是查询中 TRREQNO 和 id 之间的空格。尝试我在下面放置的查询：

```
ALTER TABLE tbl_travelplan add TRREQNO_id INT(11) NOT NULL primary KEY AUTO_INCREMENT; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:42:42.773

您必须首先使用删除现有索引

```
DROP_INDEX [your_existing_index] ON tbl_travelplan 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-07T05:38:14.063

您可以使用此查询

```
alter table tbl_travelplan 
    add TRREQNO_id int(11) NOT NULL AUTO_INCREMET PRIMARY KEY 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-18T10:43:51.917

我认为该表中已经有主键。所以只有这种错误来了。请删除主键并运行您的查询。

请运行此查询

```
ALTER TABLE `table_name` add TRREQNO id INT(11) NOT NULL AUTO_INCREMENT DROP PRIMARY KEY ,
ADD PRIMARY KEY ( `id` ) 
```

# c# - 多次回发

> ID：13931116
> 
> 赞同：0
> 
> 时间：2012-12-18T10:38:39.147
> 
> 标签：c#, asp.net, sharepoint, devexpress, postback

我需要一些指导，因为我似乎无法找出问题所在。

我的表单页面（包括 SharePoint 向导控件）正在提交 3 次回发。为什么会发回 3 次？为什么不是一次？

请注意，我们正在使用绑定到对象数据源的两个 DevExpress AspxGridView 网格（不确定这是否与问题有关）。

我有以下标记：

```
<asp:ValidationSummary runat="server" ID="ValidationSummary1" />
<br />
<asp:Wizard runat="server" ID="wizRequest" ActiveStepIndex="0" OnNextButtonClick="wizRequest_NextButtonClick" DisplaySideBar="false">
    <WizardSteps>
        <asp:WizardStep runat="server" ID="wsSection1">
            <fieldset>
                <legend><%= Localization.GetRequest("Section1") %></legend>
                <table style="width: 100%;">
                    <tr>
                        <th><%= Localization.GetRequest("Title") %></th>
                        <td colspan="5">
                            <asp:TextBox runat="server" ID="txtTitle" Width="95%" />
                            <asp:RequiredFieldValidator ID="rfvTitle" runat="server" ControlToValidate="txtTitle" Text="*" /></td>
                    </tr>
                    <tr>
                        <th><%= Localization.GetRequest("Summary") %></th>
                        <td colspan="5">
                            <asp:TextBox runat="server" ID="txtSummary" Width="95%" TextMode="MultiLine" Rows="3" />
                            <asp:RequiredFieldValidator ID="rfvSummary" runat="server" ControlToValidate="txtSummary" Text="*" /></td>
                    </tr>

... 
```

以及以下代码：

```
 [ToolboxItemAttribute(false)]
        public partial class RequestWizardWebPart : WebPart
        {
[System.Security.Permissions.SecurityPermission(System.Security.Permissions.SecurityAction.Assert, UnmanagedCode = true)]
            public RequestWizardWebPart()
            {
            }
            protected override void OnInit(EventArgs e)
            {
                base.OnInit(e);
                InitializeControl();
            }

            protected void Page_Load(object sender, EventArgs e)
            {
                AddSupportingDocumentControl();

                if (!Page.IsPostBack)
                {
                    LoadControlsLocalizedText();
                    LoadLists();
                    LoadRequest();
                }
            }

    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:05:04.053

使用**Request.Form["_EVENTTARGET"]**表达式了解哪个控件调用回发以及原因。

# javascript - 更改选择突出显示的高度

> ID：13931117
> 
> 赞同：7
> 
> 时间：2012-12-18T10:38:41.010
> 
> 标签：javascript, css, range, selection, rect

有没有办法在不更改`line-height`包含它的元素的情况下更改文本选择突出显示的高度？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:51:57.273

如果你只用 CSS 来做这件事，答案是否定的。

**在选择器中使用 ::selection 的规则中**只能使用一小部分 CSS 属性：****颜色、背景、背景颜色和文本阴影**。请注意，特别是 background-image 被忽略，就像任何其他属性一样。 [https://developer.mozilla.org/en-US/docs/CSS/::selection](https://developer.mozilla.org/en-US/docs/CSS/::selection)**

# backbone.js - 由于继承，Backbone.js 中的循环引用？

> ID：13931121
> 
> 赞同：1
> 
> 时间：2012-12-18T10:38:48.473
> 
> 标签：backbone.js

在 Backbone.js 文档中，它说当您遇到循环引用时，您应该重新设计您的应用程序。几个月来我一直在考虑这个问题（并正在解决它），但它一直在追赶我。请看看我的结构并告诉我你将如何设计它。

这很简单，我有小组，也有人。组有人（成员）。一个组可以与组有关系（例如：一个组织有部门），而人可以与人（同事、经理等）有关系。

如果我为团体和人（例如：组织、部门、同事、经理等）制作所有不同的模型，那么就没有问题。但是当我使用继承（org 扩展组，dep 扩展组，同事扩展人员等）时，循环引用开始了。

如何解决这个问题？一个经常听到的答案是：使用骨干关系。它可能是很棒的软件，但我想了解它是如何工作的（不仅仅是让它工作；），因此想自己做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:03:25.693

循环引用问题是 (duh) RequireJS 而不是 Backbone。

我一直遇到这个问题一段时间。RequireJS 网站说如果你遇到循环引用而不是你的设计是不行的。

我重新设计了。我现在使用两种不同的模型：一个完整​​的模型（有关系）扩展了一个最小的模型（没有关系）。集合中使用了最小的，因此不会发生循环引用。

到目前为止，这是我的解决方案。有更好的想法吗？:)

# ruby-on-rails-3 - 斯坦福核心 NLP Gem 错误

> ID：13931122
> 
> 赞同：1
> 
> 时间：2012-12-18T10:38:50.147
> 
> 标签：ruby-on-rails-3, stanford-nlp

我按照[https://github.com/louismullie/stanford-core-nlp](https://github.com/louismullie/stanford-core-nlp)给出的所有说明进行操作，然后按照随附文章中的建议安装了 JRE 1.6。

但现在我收到一个错误，上面写着

java.lang.NullPointerException

我是 Ruby 的新手，并且在所有地方都尝试过了解正在发生的事情。

actionpack (3.2.1) lib/action_controller/metal/rescue.rb:32:in `rescue in process_action' actionpack (3.2.1) lib/action_controller/metal/rescue.rb:29:in`process_action' actionpack (3.2.1) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action' activesupport (3.2.1) lib/active_support/notifications.rb:123:in`block in instrument' activesupport (3.2.1) lib/active_support/notifications/instrumenter.rb:20:in`instrument' activesupport (3.2.1) lib/active_support/notifications.rb:123:in`仪器'动作包 (3.2.1) lib/action_controller/metal/instrumentation.rb:29:in `process_action' actionpack (3.2.1) lib/action_controller/metal/params_wrapper.rb:205:in`process_action' activerecord (3.2.1) lib/active_record/railties/controller_runtime。 rb:18:in `process_action' actionpack (3.2.1) lib/abstract_controller/base.rb:121:in`process' actionpack (3.2.1) lib/abstract_controller/rendering.rb:45:in `process' actionpack (3.2.1) lib/action_controller/metal.rb:203:in`dispatch' actionpack (3.2.1) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch' actionpack (3.2.1) lib/action_controller/metal.rb:246:in`block in action' actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in `call' actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:66:in`dispatch' actionpack (3.2.1) lib/action_dispatch/routing/route_set.rb:30：在`call' journey (1.0.4) lib/journey/router.rb:68:in`阻塞呼叫'旅程（1.0.4）lib/journey/router.rb:56:in call'actionpack `each' journey (1.0.4) lib/journey/router.rb:56:in`（3.2.1）lib/action_dispatch/routing/route_set.rb:589:in `call' omniauth (1.1.1) lib/omniauth/strategy.rb:177:in`call！' omn​​iauth (1.1.1) lib/omniauth/strategy.rb:157:in `call' omniauth (1.1.1) lib/omniauth/builder.rb:48:in`call' actionpack (3.2.1) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call' rack (1.4.1) lib/rack/etag.rb:23:in`call' rack (1.4.1) lib/rack/ conditionalget.rb:25:in `call' actionpack (3.2.1) lib/action_dispatch/middleware/head.rb:14:in`call' actionpack (3.2.1) lib/action_dispatch/middleware/params_parser.rb:21:in `call' actionpack (3.2.1) lib/action_dispatch/middleware/flash.rb:242:in`call' rack (1.4.1) lib/rack/session/abstract/id.rb:205:在`context' rack (1.4.1) lib/rack/session/abstract/id.rb:200:in`调用中'actionpack (3.2.1) lib/action_dispatch/middleware/cookies.rb:338:in `call' activerecord (3.2.1) lib/active_record/query_cache.rb:64:in`call' activerecord (3.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call' actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in`block in call' activesupport (3.2.1) lib/active_support/callbacks.rb:405:`_run__3528916854062403214__call__361791269275604860__callbacks' activesupport (3.2.1) lib/active_support/callbacks.rb:405:in`__run_callback' activesupport (3.2.1) lib/active_support/callbacks.rb:385:in `_run_call_callbacks' activesupport (3.2.1) lib/active_support/callbacks.rb:81:in`run_callbacks' actionpack (3.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call' actionpack (3.2.1) lib/action_dispatch/middleware/reloader.rb:65:in`call' actionpack (3.2.1) lib/ action_dispatch/middleware/remote_ip.rb:31:in `call' actionpack (3.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:16:in`call' actionpack (3.2.1) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call' railties (3.2.1) lib/rails/rack/logger.rb:26:in`call_app' railties (3.2.1) lib/rails/rack/logger.rb: 16:in `call' actionpack (3.2.1) lib/action_dispatch/middleware/request_id.rb:22:in`call' rack (1.4.1) lib/rack/methodoverride.rb:21:in `call' rack (1.4.1) lib/rack/runtime.rb:17:in`call' activesupport (3.2.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call' rack (1.4.1) lib/rack/lock.rb:15:in`call' actionpack (3.2 .1) lib/action_dispatch/middleware/static.rb:53:in `call' railties (3.2.1) lib/rails/engine.rb:479:in`call' railties (3.2.1) lib/rails/application.rb:220:in `call' rack (1.4.1) lib/rack/content_length.rb:14:in`call' railties (3.2.1) lib/rails/rack/log_tailer .rb:14:in`call' rack (1.4.1) lib/rack/handler/webrick.rb:59:in`服务' /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:111:in `service' /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:70:in`run' /usr/local/lib/ruby/1.9.1/webrick/server.rb:183:in `block在 start_thread'

# git - git-svn：保留 .svn 目录

> ID：13931123
> 
> 赞同：2
> 
> 时间：2012-12-18T10:38:58.663
> 
> 标签：git, svn, metadata

我想在我们使用 SVN 的公司的项目中使用 Git SVN。然而，那里的构建脚本通过`svn`二进制或 SvnKit 从工作副本（WC 的状态、当前版本……）中检索一些 SVN 信息。所以`.svn` *元数据*目录必须存在（或者一个在 SVN 1.7 的根目录中）。git-svn 可以维护这些目录吗？

编辑：我无法更改 SCM 工具。构建脚本必须继续为仅使用 SVN 的公司工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:53:42.833

答案是否定的，`git-svn`不会为您创建这些目录。是否有机会改变构建脚本的工作方式？也许他们可以停止检查修订号，或者您可以在其位置放置一个 git 等效命令？

请记住，这可能是对构建过程的本地调整。我在一个项目上做了一年。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:42:00.080

`.svn`目录可以像任何其他目录一样使用 Git 进行版本控制。

它们对 Git 没有特殊意义。所以应该没问题。

# javascript - Javascript：函数检查分数的答案是否有超过 2 个小数位

> ID：13931127
> 
> 赞同：2
> 
> 时间：2012-12-18T10:39:06.273
> 
> 标签：javascript

我想为我的学生创建一个动态工作表，所以每次他们这样做时都会看到不同的问题。我正在尝试创建的问题是，如果我在 Y 的总分中得分 X，则计算百分比。

这是三个一起工作的函数，第一个生成一些数字，调用第二个，然后调用第三个检查它是否超过 2 个小数位，如果是，第二个创建一个新的 SCORE 数字，重复直到它找到一个小数点后 2 位或更少的答案，然后返回适用于第一个的 SCORE 数字，然后输出它。

我不断得到三个输出之一：未定义 SCORE 应该在哪里，根本没有输出，或者一个工作问题。

我有时无法理解它是如何工作的，有时会抛出未定义的，而在其他时候则完全没有给出任何东西。

有任何想法吗。

```
function scorePercent()
{
    var output="";
    var total = Math.floor((Math.random()*99)+1);
var score = Math.floor((Math.random()*(total-1))+1);
    output = output + "<div>A score of " + chkScore(score,total) + " out of " + total + ".</div></br>";

    document.getElementById("qOut").innerHTML=output;

}

function chkScore(n1,n2)
{
    var answ = (n1/n2)*100;
    if(dps(answ)>2)
    {
        var scoreNew = Math.floor((Math.random()*(n2-1))+1);
        chkScore(scoreNew, n2);
    }
    else
    {
        return n1;
    }       
}

function dps(num) 
{
    var match = (''+num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
    if (!match) { return 0; }
    return Math.max(
            0,
        // Number of digits right of decimal point.
            (match[1] ? match[1].length : 0)
        // Adjust for scientific notation.
         - (match[2] ? +match[2] : 0));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:49:19.900

您的 中有一个递归函数`chkScore`，但您没有`return`从“更深”的迭代中得到结果。

试试这个：

```
function chkScore(n1,n2){
    var answ = (n1/n2)*100;
    if(dps(answ)>2) {
        var scoreNew = Math.floor((Math.random()*(n2-1))+1);
        return chkScore(scoreNew, n2); // <-- return that.
    } else {
        return n1;
    }       
} 
```

那里的缺失`return`导致该函数有时不返回任何内容。

如果您知道我的意思，“更深”的迭代将只返回 1 个“级别”的值，因此“级别”必须通过它。

# android - Eclipse XML 编辑器不工作

> ID：13931130
> 
> 赞同：1
> 
> 时间：2012-12-18T10:39:10.717
> 
> 标签：android, eclipse-juno

![问题的屏幕截图](../Images/23d51c02692da1f708ba750fe81906b2.png)

我一直在努力解决这个问题。我想通过stackoverflow进行搜索，但是通过研究找不到任何解决方案。此外，我已经下载了 sdk 管理器中的几乎所有内容，并更改了其渲染的 API 级别。它首先从 4.2 开始渲染。![这是安装在 sdk 中的所有东西我错过了什么吗](../Images/d80a68838b450f5b3f7e2352ef440c28.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:46:53.263

更改 apptheme 可能是它正在工作。

# iphone - 动画徽标就像 Skype iPad 应用程序

> ID：13931132
> 
> 赞同：1
> 
> 时间：2012-12-18T10:39:17.287
> 
> 标签：iphone, objective-c, ios5

我正在构建一个应用程序，我需要像 Skype 应用程序一样为徽标设置动画。我仍然不确定如何在启动应用程序时出现受影响的 Skype 徽标

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T10:58:08.050

据我对您的问题的理解，您可以尝试在`UIImageView`.

```
 NSArray * imageArray  = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"1.png"], [UIImage imageNamed:@"2.png"], nil]; //this will be the frames of animation images in sequence.
 ringImage = [[UIImageView alloc]initWithFrame:CGRectMake(100,200,600,600)];
 ringImage.animationImages = imageArray;
 ringImage.animationDuration = 1.5;//this the animating speed which you can modify
 ringImage.contentMode = UIViewContentModeScaleAspectFill;
 [ringImage startAnimating];//this method actually does the work of animating your frames. 
```

**要停止动画，只需使用`[ringImage stopAnimating];`**

如果这回答了你的问题，请告诉我:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T06:09:10.713

嘿，我刚刚找到了这个使用 MCSpriteLayer 的例子......
你可以通过[这个链接](http://mysterycoconut.com/blog/2011/01/cag1/)......
他们也有可下载的[链接在这里](http://mysterycoconut.com/examplecode/CoreCastlevania.zip)

这解决了我的目的希望这对你们也有帮助

# vb.net - Winforms 阻止用户在文本框中输入除英语以外的其他语言字符

> ID：13931148
> 
> 赞同：0
> 
> 时间：2012-12-18T10:40:20.723
> 
> 标签：vb.net, winforms, localization, .net-2.0

我有一些文本框映射到数据库中的主键字段，我不希望用户使用除英语或数字以外的任何语言进行书写，即使使用手动将输入语言切换为其他语言也是如此。我怎样才能达到同样的效果。我在 .net 2.0 上，所以没有花哨的东西。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:53:32.040

您可以使用 . 检查您的输入`Regex`。此模式将匹配任何英文字母`[a-zA-Z]`

例如俄语 ю 将不匹配

```
Match m = Regex.Match("ю", "[a-zA-Z]"); 
```

处理 KeyPress 事件以实现所需的功能

```
 private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
    {
        e.Handled = !Regex.Match(e.KeyChar.ToString(), "[a-zA-Z]").Success;
    } 
```

# java - Apache Pivot - BXML 文件的位置

> ID：13931149
> 
> 赞同：0
> 
> 时间：2012-12-18T10:40:25.723
> 
> 标签：java, apache-pivot

我正在使用 maven 构建应用程序，我想尝试使用 apache pivot 进行 GUI 渲染。但是，看起来大多数枢轴教程都假设您使用的是 eclipse。我在我的 pom.xml 中添加了 2.0 版本（并尝试使用 2.0.2），但是，我收到了这个错误：

```
[DEBUG] joining on thread Thread[Timer-1,5,com.polyglot.HelloBXML]
java.lang.IllegalArgumentException: location is null.
at org.apache.pivot.beans.BXMLSerializer.readObject(BXMLSerializer.java:604)
at org.apache.pivot.beans.BXMLSerializer.readObject(BXMLSerializer.java:568)
at org.apache.pivot.beans.BXMLSerializer.readObject(BXMLSerializer.java:534)
at com.polyglot.HelloBXML.startup(HelloBXML.java:21) 
```

似乎无法找到 BXML 文件。我把它放在 src/main/resources 中。我搜索了论坛，看起来是因为 BXML 文件不在类路径中。我尝试了目标/类，但仍然无济于事。有人可以指导我 BXML 文件的正确位置是什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:40:52.293

对于 HelloBXML.java 示例

改变

```
window = (Window)bxmlSerializer.readObject(HelloBXML.class, "hello.bxml"); 
```

到

```
window = (Window)bxmlSerializer.readObject(HelloBXML.class, "/hello.bxml"); 
```

并将 hello.bxml 放在 src/main/resources 中。

（对于 MS Windows 环境可能需要反斜杠，但我不知道）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:00:40.437

将它放在类路径中的解决方案是正确的。我将它复制到 src/main/resources/{my package path} 中，它可以工作。我的错误是我将它直接放在 src/main/resources 中。

# ios - 如何标记朋友 - 类似于 facebook（同一文本字段/文本视图上的图像视图和普通文本）

> ID：13931150
> 
> 赞同：1
> 
> 时间：2012-12-18T10:40:26.160
> 
> 标签：ios, uiimageview, tags, uitextfield, uitextview

我正在开发一个社交网络应用程序。在我的 Textfield/Textview 上，我正在使用“@”搜索我的朋友。

例如：@s 将列出我所有以 s 开头的朋友。当我选择这些朋友中的任何一个时，我希望他们被标记（**类似于 facebook**）。

因此，在我的 Textfield/Textview 中，我朋友的名字将显示在 UIImageview 上（**类似于在提问期间输入的 StackOverflow 标签**）。

**我在同一个文本字段上需要普通文本和标记的朋友。** 现在如何在我的 Textfield/Textview 上显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:45:10.763

[请在此处](http://www.cocoacontrols.com/controls/jstokenfield)检查此第三方控件。它不包括您提到的图像，但您会有所了解。

作为另一种选择，您可以创建 UIScrollView 并放置您想要的任何控件，如果我需要非常自定义的带有图像和设计的文本条目，我会这样做。

# windows-8 - 使用 InstallShield 2010 在 Windows 8 上的 MSI 自定义操作错误 1721

> ID：13931156
> 
> 赞同：4
> 
> 时间：2012-12-18T10:40:50.757
> 
> 标签：windows-8, windows-installer, installshield, custom-action, installshield-2010

当我的基本 MSI 安装尝试运行自定义操作可执行文件时，我在 Windows 8 上收到错误 1721，而在 Windows XP 和 Windows 7 上，它按照我从[InstallShield](http://en.wikipedia.org/wiki/InstallShield)设置的方式运行。可执行文件存储在二进制表中。为什么会这样？

![包含错误 1721 的错误消息的屏幕截图：](../Images/bc7ad154aeaeb1ae6ac8a8ae4ea78674.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-21T10:02:38.650

以管理员身份运行。会的。我有同样的问题，并通过这样做解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-09T19:27:02.493

在自定义操作中将 In-Script Execution 更改为“Deferred Execution in System Context”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T05:52:35.603

这似乎最初与架构相关。确保对所有部分的自定义操作、程序、路径和文件名等都是有效的。同样如上所述，始终通过管理员帐户应用安装程序。

如果您正在调用存储在二进制表中的 EXE，请确保您也正确引用了它。Windows 安装程序通常会将 MSI 解压缩到“%temp%”文件夹，以便确认访问和路径是否正确。MSIEXEC 提取临时文件，例如“MSID974.tmp”，然后执行预配置的 MSI 功能，但失败了。

最后，尝试生成详细的 MSI 日志文件。它将帮助您更清楚地确定问题。

# jquery - 使用 jquery 更改 src 属性会使容器变小 1 秒...为什么？

> ID：13931157
> 
> 赞同：0
> 
> 时间：2012-12-18T10:40:55.047
> 
> 标签：jquery, html, src, attr, css

我正在尝试为移动网站创建一个小幻灯片。

这是html：

```
<div id="gallery">
    <a id="prev" data-icon="arrow-l" data-iconpos="left" data-role="button" href="#">Previous Image</a>
<div class="gallery-pic">
    <img class="slider" src="images/gallery/chateau-slider-1.jpg" />
</div>
<a id="next" data-icon="arrow-r" data-iconpos="right" data-role="button" href="#">Next Image</a>
</div> 
```

这是jquery代码：

```
$(document).ready( function() {

        var height = $('.slider').height();
        $('.gallery-pic, .slider').css('min-height',height);

        $('#prev').click(function(prev) {
            prev.preventDefault();
            var nameImg = $('img.slider').attr('src').split('/');
            var fileName = nameImg[2].split('-');
            var exp = fileName[2].split('.');
            var numImg = parseInt(exp[0]);
            if(numImg == 1) {
                numPrevImg = 18; }
            else {
            var numPrevImg = numImg - 1; }
            $('img.slider').fadeOut(500, function() {
                $('img.slider').attr('src','images/gallery/chateau-slider-' + numPrevImg + '.jpg');
                $('img.slider').fadeIn("slow");
            });
        });

        $('#next').click(function(next) {
            next.preventDefault();
            var nameImg = $('img.slider').attr('src').split('/');
            var fileName = nameImg[2].split('-');
            var exp = fileName[2].split('.');
            var numImg = parseInt(exp[0]);
            if(numImg == 18) {
                numNextImg = 1; }
            else {
            var numNextImg = numImg + 1; }
            $('img.slider').fadeOut(500, function() {
                $('img.slider').attr('src','images/gallery/chateau-slider-' + numNextImg + '.jpg');
                $('img.slider').fadeIn("slow");
            });
        });
    }); 
```

基本上，它搜索下一个图像并更改 src 属性。

容器（.gallery-pic）在 1/2 秒内变小，即使我使用了 min-height 属性。请注意，我在使用 Safari for iPhone 时遇到了这个问题。在浏览器中一切正常。

请帮帮我，我快疯了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:43:08.293

基本上，您为容器设置了不同的大小。确保你的容器有一个固定的高度和宽度，并且它不会扩展以适应它的孩子。当您更改 src 时，一瞬间内部没有图像，因此无需扩展它以适应某些大小。

在 CSS 中更改它，一切都应该没问题。

**我正在通过 iPhone 模拟器查看您的网站。**

**您正在从 HTML 标记或 javascript 中将 min-height 设置为 0，这会覆盖您的 min-height:160px;set from CSS!!!!**

此外，如果您将最小高度设置为 160 像素，并且您有一个高度大于 160 像素的图像，您肯定也会看到这种效果。在图像进入扩展它之前，容器会变得稍微小一些。

# entity-framework - 首先在实体框架模型中将文档添加到生成的代码中

> ID：13931159
> 
> 赞同：3
> 
> 时间：2012-12-18T10:40:58.927
> 
> 标签：entity-framework, visual-studio-2012, code-generation, ef-model-first

自 VS 2010 以来，我一直在使用实体框架模型。当我构建我的项目时，EF 会生成一个包含所有实体的 Model.Designer.cs 文件。此设计器文件还包含添加到 EDMX 文件中的实体的文档。

当我在 VS 2012 中创建一个新的 EF 模型第一个项目时，一个 Model.tt 文件被添加到我的 EDMX 文件中。此 T4 模板为我的模型中的每个实体生成一个文件。不幸的是，生成的代码中没有使用 EDMX 文件中的文档。

我真的很喜欢记录我的模型，以便在使用它时显示 IntelliSense。到目前为止，我发现的唯一解决方法是删除 Model.tt 和生成的类文件，然后重新打开我的 EDMX 文件上的代码生成。这将恢复到我在 VS 2010 中使用的行为。但是，我希望每个实体都有一个单独的文件。

有什么方法（最好使用 VS 工具，而无需修改 VS 附带的任何文件）将 EDMX 文件中的文档包含在生成的单个类文件中？

编辑：为了进一步说明我的问题，这里有一个简单的例子。

假设我的模型如下所示：![简单实体框架模型](../Images/0b96c706f7b5c05a8d8618604580d7d0.png)

我在 Id 属性的“属性”窗口中突出显示了我输入文档的部分。

这是实体在 EDMX 文件中的样子：

```
 <EntityType Name="Entity1">
      <Key>
        <PropertyRef Name="Id" />
      </Key>
      <Property Type="Int32" Name="Id" Nullable="false" annotation:StoreGeneratedPattern="Identity" >
        <Documentation>
          <Summary>This is documentation for the ID property.</Summary>
        </Documentation>
      </Property>
    </EntityType> 
```

Model.tt 生成的类（Entity1.cs）如下所示：

```
public partial class Entity1
{
    public int Id { get; set; }
} 
```

但是当我为我的模型打开代码生成时，这就是 Model.Designer.cs 中实体的样子：

```
/// <summary>
/// No Metadata Documentation available.
/// </summary>
[EdmEntityTypeAttribute(NamespaceName="Model1", Name="Entity1")]
[Serializable()]
[DataContractAttribute(IsReference=true)]
public partial class Entity1 : EntityObject
{
    #region Factory Method

    /// <summary>
    /// Create a new Entity1 object.
    /// </summary>
    /// <param name="id">Initial value of the Id property.</param>
    public static Entity1 CreateEntity1(global::System.Int32 id)
    {
        Entity1 entity1 = new Entity1();
        entity1.Id = id;
        return entity1;
    }

    #endregion

    #region Simple Properties

    /// <summary>
    /// This is documentation for the ID property.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Int32 Id
    {
        get
        {
            return _Id;
        }
        set
        {
            if (_Id != value)
            {
                OnIdChanging(value);
                ReportPropertyChanging("Id");
                _Id = StructuralObject.SetValidValue(value, "Id");
                ReportPropertyChanged("Id");
                OnIdChanged();
            }
        }
    }
    private global::System.Int32 _Id;
    partial void OnIdChanging(global::System.Int32 value);
    partial void OnIdChanged();

    #endregion

} 
```

所以您会看到：Model.Designer.cs 包含我的自定义文档字符串“这是 ID 属性的文档”。而 Entity1.cs 没有。但是，如果有很多实体，Model.Designer.cs 会变得很大，并且调试到这个文件有点慢。我更喜欢有几个小文件（每个实体一个），但仍然在生成的代码中保留来自 EDMX 文件的文档。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T00:49:50.043

我认为您必须修改 T4 文件。我遇到了同样的问题并稍微阅读了 T4 文件，并尝试按照此处的说明进行操作：http: [//karlz.net/blog/index.php/2010/01/16/xml-comments-for-实体框架/](http://karlz.net/blog/index.php/2010/01/16/xml-comments-for-entity-framework/)

但是，我们使用的是 VS 2012，并且该指令似乎不能 100% 工作。我最终更改了 T4 文件末尾的属性生成代码，它完全按照我想要的方式工作。更改位于 CodeStringGenerator.Property() 和 CodeStringGenerator.NavigationProperty()

```
public string Property(EdmProperty edmProperty)
{
    string doc = "";
    if (edmProperty.Documentation != null)
    {
        doc = string.Format(
        CultureInfo.InvariantCulture,
        "\n\t\t/// <summary>\n\t\t/// {0} - {1}\n\t\t/// </summary>\n\t\t",
        edmProperty.Documentation.Summary ?? "",
        edmProperty.Documentation.LongDescription ?? "");
    }

    return doc + string.Format(
        CultureInfo.InvariantCulture,
        "{0} {1} {2} {{ {3}get; {4}set; }}",
        Accessibility.ForProperty(edmProperty),
        _typeMapper.GetTypeName(edmProperty.TypeUsage),
        _code.Escape(edmProperty),
        _code.SpaceAfter(Accessibility.ForGetter(edmProperty)),
        _code.SpaceAfter(Accessibility.ForSetter(edmProperty)));
}

public string NavigationProperty(NavigationProperty navigationProperty)
{
    var endType = _typeMapper.GetTypeName(navigationProperty.ToEndMember.GetEntityType());
    string doc = "";
    if (navigationProperty.Documentation != null)
    {
        doc = string.Format(
        CultureInfo.InvariantCulture,
        "\n\t\t/// <summary>\n\t\t/// {0} - {1}\n\t\t/// </summary>\n\t\t",
        navigationProperty.Documentation.Summary ?? "",
        navigationProperty.Documentation.LongDescription ?? "");
    }

    return doc + string.Format(
        CultureInfo.InvariantCulture,
        "{0} {1} {2} {{ {3}get; {4}set; }}",
        AccessibilityAndVirtual(Accessibility.ForProperty(navigationProperty)),
        navigationProperty.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many ? ("ICollection<" + endType + ">") : endType,
        _code.Escape(navigationProperty),
        _code.SpaceAfter(Accessibility.ForGetter(navigationProperty)),
        _code.SpaceAfter(Accessibility.ForSetter(navigationProperty)));
} 
```

请注意，它不适用于类文档，因此您必须对实体和复杂类型执行类似的操作

```
<#=codeStringGenerator.UsingDirectives(inHeader: false)#>
<#if (!ReferenceEquals(entity.Documentation, null))
{
#>
/// <summary>
/// <#=entity.Documentation.Summary#> – <#=entity.Documentation.LongDescription#>
/// </summary>
<#}#>
<#=codeStringGenerator.EntityClassOpening(entity)#> 
```

# delphi - Indy IDHTTP & MSHTML 解析

> ID：13931164
> 
> 赞同：0
> 
> 时间：2012-12-18T10:41:10.527
> 
> 标签：delphi, delphi-xe2

> **可能重复：**
> [如何使用来自 TIdHTTP 的字符串创建 IHTMLDocument2？](https://stackoverflow.com/questions/11915903/how-do-i-create-an-ihtmldocument2-using-a-string-from-tidhttp)

如何将 MSHTML 与 Indy 一起使用来解析从网站返回的 HTML 代码。还是只能与 WebBrowser 控件一起使用？MSHTML 线程安全吗？

# c# - RegisterStartupScript 无法打开模式对话框

> ID：13931165
> 
> 赞同：0
> 
> 时间：2012-12-18T10:41:15.457
> 
> 标签：c#, jquery, asp.net, registerstartupscript

当在`Page_Load`.
我已经定义了对话框和初始化打开它所需的函数，如下所示：

```
$(document).ready(function () {
    $('#errorDialog').dialog({
        autoOpen: false,
        height: 120,
        width: 500,
        draggable: false,
        resizable: false,
        modal: true,
        title: "Error!",
        open: function (type, data) {
            $(this).parent().appendTo("form");
        }
    });
});

function showErrorPopup() {
    $('#addNoteButton').hide();
    $('#errorDialog').dialog("open");
}

<div id="errorDialog">
    <asp:Label ID="errMessage" runat="server"></asp:Label>
    <input type="button" id="Button3" onclick="closeDialog('errorDialog');"
                class="inputASPButton" value="Zrušit" />
</div> 
```

我这样打开它`Page_Load`：

```
Page.ClientScript.RegisterStartupScript(typeof(Page), UniqueID, "showErrorPopup();", true); 
```

它在执行时调用该函数，`$('#addNoteButton').hide();`隐藏按钮，但对话框本身从未出现。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:04:12.883

由于我看不到您包含哪些脚本库，我能提出的唯一建议是确保您包含 jQuery UI ( [http://jqueryui.com/download/](http://jqueryui.com/download/) )，因为对话框小部件是该库的一部分与标准的 jQuery 库相反。我纯粹基于这样一个事实，即您可以按预期隐藏按钮，但无法打开对话框。

[http://api.jqueryui.com/dialog/](http://api.jqueryui.com/dialog/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:56:13.433

如果您的错误消息不是动态的，您可以使用此代码

Page.RegisterStartupScript("err_msg", "alert('Start Date not found!');");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-29T18:22:17.990

`$(function(){ showErrorPopup(); });`在 jquery-ui 对话框显示之前，我必须像这样包装我的函数调用`RegisterStartupScript`。

# vim - 粘贴后如何跳转到插入文本的另一端

> ID：13931166
> 
> 赞同：1
> 
> 时间：2012-12-18T10:41:17.247
> 
> 标签：vim

在vim中粘贴一些文本后，如何跳转到插入文本的另一端？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T10:46:36.590

您可以使用``[`跳转到先前更改（或拉出）文本的第一个字符。

您可以使用``]`跳转到先前更改（或拉出）文本的最后一个字符。

这适用于我是否从未命名的寄存器或系统剪贴板粘贴（“放置”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T11:13:24.913

您可能也喜欢这些命令，`gp`并且`gP`. 它们很像`p`，`P`但将光标留在新文本之后。

# c# - C#：读取和修改另一个应用程序的 app.config 文件中的设置

> ID：13931171
> 
> 赞同：2
> 
> 时间：2012-12-18T10:41:35.230
> 
> 标签：c#, configuration, interprocess

我运行了许多相互通信的应用程序，但这些应用程序都没有自己的用户界面。我有一个系统控制台应用程序，它充当系统的用户界面（即所有相互通信的应用程序集）。

我希望能够使用系统控制台来读取和修改每个非 gui 应用程序的配置。
每个应用都有一个使用 Visual Studio 设置 GUI 创建的 app.config 文件。这些设置都在应用程序范围内，这导致 app.config 文件看起来有点像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
        <section name="ExternalConfigReceiver.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
</configSections>
<applicationSettings>
    <ExternalConfigReceiver.Properties.Settings>
        <setting name="Conf1" serializeAs="String">
            <value>3</value>
        </setting>
        <setting name="Conf2" serializeAs="String">
            <value>4</value>
        </setting>
    </ExternalConfigReceiver.Properties.Settings>
</applicationSettings> 
```

我尝试使用以下代码来读取配置设置：

```
System.Configuration.ExeConfigurationFileMap fileMap = new   System.Configuration.ExeConfigurationFileMap();
fileMap.ExeConfigFilename = "PATH_TO_THE_FOLDER\\app.config";

System.Configuration.Configuration config = System.Configuration.ConfigurationManager.OpenExeConfiguration(fileMap, System.Configuration.ConfigurationUserLevel.None);

someVariable =  config.AppSettings.Settings["Conf1"];
someVariable2 = config.AppSettings.Settings["Conf2"]; 
```

但是，在仔细检查 config.AppSettings 对象后，我发现它不包含任何设置。

我究竟做错了什么？我是否使用错误的方法来读取配置文件？这种方法最适合不同类型的配置文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:11:03.823

可以将配置文件用作 XML，然后使用 XPath 更改值：

```
using (TransactionScope transactionScope = new TransactionScope())
{
    XmlDocument configFile = new XmlDocument();

    configFile.Load("PathToConfigFile");

    XPathNavigator fileNavigator = configFile.CreateNavigator();

    // User recursive function to get to the correct node and set the value
    WriteValueToConfigFile(fileNavigator, pathToValue, newValue);

    configFile.Save("PathToConfigFile");

    // Commit transaction
    transactionScope.Complete();
}

private void WriteValueToConfigFile(XPathNavigator fileNavigator, string remainingPath, string newValue)
{
    string[] splittedXPath = remainingPath.Split(new[] { '/' }, 2);
    if (splittedXPath.Length == 0 || String.IsNullOrEmpty(remainingPath))
    {
        throw new Exception("Path incorrect.");
    }

    string xPathPart = splittedXPath[0];
    XPathNavigator nodeNavigator = fileNavigator.SelectSingleNode(xPathPart);

    if (splittedXPath.Length > 1)
    {
        // Recursion
        WriteValueToConfigFile(nodeNavigator, splittedXPath[1], newValue);
    }
    else
    {
        nodeNavigator.SetValue(newValue ?? String.Empty);
    }
} 
```

Conf1 的可能路径：

`"configuration/applicationSettings/ExternalConfigReceiver.Properties.Settings/setting[name=\"Conf1\"]/value"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:47:26.413

据我所知，您不能使用 System.Configuration.Configuration 访问其他应用程序的配置文件

它们是 xml 文件，您可以使用 xml 命名空间与它们进行交互

# java - 在 java 中编写适配器时的最佳实践

> ID：13931179
> 
> 赞同：1
> 
> 时间：2012-12-18T10:41:52.617
> 
> 标签：java, adapter

我正在尝试编写一个适配器。我有近 50 个属性，我正试图从一个类适应另一个类。

我的代码如下所示：

```
public static Type2 getType2(Type1 type1)
{
...

  if(!StringUtils.isEmpty(type1.getAttribute1()) {
     type2.setAttribute1( type1.getAttribute1() );
  }
  // and so on for all the 50 attributes
...
} 
```

有没有更好的方法来编写这个适配器方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:46:32.330

您可以使用一种通用方法将属性从一个实例复制到另一个实例：

```
public static <T> T copy(T source, T target) throws IllegalArgumentException, IllegalAccessException {
    for ( Field f : target.getClass().getDeclaredFields() ) {
        f.setAccessible( true );
        Object o = f.get( source );
        f.set( target, o);
    }
    return target;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:49:12.567

如果属性名称匹配，您可能会考虑使用[Apache Commons BeanUtils 。](http://commons.apache.org/beanutils/)

如果不需要类型转换，您可以使用[`PropertyUtils.copyProperties()`](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/PropertyUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object%29)：

```
public static Type2 getType2(Type1 type1) {
    Type2 type2 = new Type2();
    org.apache.commons.beanutils.PropertyUtils.copyProperties(type2, type1);
    return type2;
} 
```

如果需要类型转换，请[`BeanUtils.copyProperties()`](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/BeanUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object%29)改用。

# c# - ASP.Net：从本地主机上传文件到远程位置时出错？

> ID：13931180
> 
> 赞同：0
> 
> 时间：2012-12-18T10:41:52.407
> 
> 标签：c#, asp.net, file-upload

**情况：**

我正在处理图片库类型的应用程序，我有两个不同的服务器。一个只保存图像文件（CDN 或文件服务器可以说）。另一个将拥有可以访问这些图像的网页。

例如

网站托管在[http://www.abc.com](http://www.abc.com)上 ，图片上传到[http://www.imageserver.com/uploads/images/](http://www.imageserver.com/uploads/images/)目录下。假设我对它们都具有完全访问权限，并且还授予了 Images 目录的读/写权限。

**问题：**

当我从本地主机 {while development} 使用 FileUpload.SaveAs 时，它会抛出一个异常，类似于：

`The declared path is not rooted and SaveAs requires rooted path.`

请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:45:17.353

`FileUpload.SaveAs`不能用于将文件保存到远程服务器。它旨在用于将文件保存到“同一”网络服务器。

编辑：我会在远程服务器上有一个脚本并将您的图像上传表单发布到该脚本。

# handlebars.js - 如何使用车把获取集合中每个元素的位置

> ID：13931183
> 
> 赞同：1
> 
> 时间：2012-12-18T10:42:04.183
> 
> 标签：handlebars.js

如果我有类似的东西：

```
{
 people: [
          "Yehuda Katz",
          "Alan Johnson",
          "Charles Jolley"
         ]
} 
```

如何获取车把中每个值的位置？

```
{{#each people}}
   {{this}}
   <!--{{this.position}} -->

{{/each}} 
```

我希望答案是

```
 Yehuda Katz
           0
           Alan Johnson
           1
           Charles Jolley
           2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:08:23.990

您可以定义自己的块表达式，例如“each_with_index”，以完成此操作。您可以在此处的 Handlebars 文档中了解如何创建此自定义表达式：http: [//handlebarsjs.com/#block-expressions](http://handlebarsjs.com/#block-expressions)

这是一种快速而肮脏的方法：

```
var people = [ 'Yehuda Katz', 'Alan Johnson', 'Charles Jolley' ];

var source = '{{#each_with_index people}}' +
             '{{ this.index }}: {{ this.item }}\n' +
             '{{/each_with_index}}';

Handlebars.registerHelper('each_with_index', function(items, options) {
  var output = '';
  var item_count = items.length;
  var item;

  for (var index = 0; index < item_count; index ++) {
    item = items[index];

      output = output + options.fn({ item: item, index: index });
  }

  return output;
});

var $output = $('#output');
var template = Handlebars.compile(source);
var result = template({ people: people });

$output.html(result); 
```

看到它工作：http: [//jsfiddle.net/EECFR/1/](http://jsfiddle.net/EECFR/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T17:56:40.990

使用`@index`：

```
{{#each people}}
  {{this}}
  {{@index}}
{{/each}} 
```

[JSFiddle 演示](http://jsfiddle.net/EECFR/20/)（根据 Carl 的修改）

来自[http://handlebarsjs.com/#iteration](http://handlebarsjs.com/#iteration)：

> 在每个项目中循环时，您可以选择通过以下方式引用当前循环索引`{{@index}}`

```
{{#each array}}
  {{@index}}: {{this}}
{{/each}} 
```

# objective-c - 在 NSUserDefaults 中存储日期抛出异常

> ID：13931186
> 
> 赞同：2
> 
> 时间：2012-12-18T10:42:13.427
> 
> 标签：objective-c, ios, nsdate, nsuserdefaults

我正在将 date1 与 date2 与一小段代码进行比较，并收到崩溃通知。

**我在 NSUserDefaults 中得到 date1：**

```
NSDate *date1 = [[NSUserDefaults standardUserDefaults] 
objectForKey:@"date1"];

NSDate *date2 = [[NSDate alloc] init]; 

if (fabs([date2 timeIntervalSinceDate:date1]) < 60)
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"60 seconds or less" message:@"Text" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
    [alert show];
    return;
} 
```

**我将 date1 存储在 NSUserDefaults 中，如下所示：**

```
NSDate *date1 = [[NSDate alloc] init];

[[NSUserDefaults standardUserDefaults] setObject:date1 forKey:@"date1"];

[[NSUserDefaults standardUserDefaults] synchronize]; 
```

该应用程序崩溃说 -[__NSCFString timeIntervalSinceReferenceDate]: unrecognized selector sent to instance。有人有想法么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T10:47:50.540

要存储日期，请使用：

```
NSDate *myDate = [NSDate date];
[[NSUserDefaults standardUserDefaults] setObject:myDate forKey:@"myDateKey"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

并得到它使用这个：

```
NSDate *myDate = (NSDate *)[[NSUserDefaults standardUserDefaults] objectForKey:@"myDateKey"]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T10:49:36.280

我已经编译了你的代码，它对我有用。这是它的外观：

```
NSDate *date1test = [[NSDate alloc] init];
[[NSUserDefaults standardUserDefaults] setObject:date1test forKey:@"date1"];
[[NSUserDefaults standardUserDefaults] synchronize];

NSDate *date1 = [[NSUserDefaults standardUserDefaults]
                 objectForKey:@"date1"];
NSDate *date2 = [[NSDate alloc] init];
if (fabs([date2 timeIntervalSinceDate:date1]) < 60)
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"60 seconds or less" message:@"Text" delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
    [alert show];
    return;
} 
```

看看这是否适合你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:58:13.883

只是有一个愚蠢的错误......

您尚未在 中指定日期`date1`，请使用

```
NSDate *date1 = [NSDate date]; 
```

要检索它，请使用，

```
NSLog(@"-> %@",[[NSUserDefaults standardUserDefaults]objectForKey:@"myDateKey"]); 
```

# python - 如何在循环中执行循环

> ID：13931189
> 
> 赞同：0
> 
> 时间：2012-12-18T10:42:17.463
> 
> 标签：python, django

我试图在我的应用程序中创建一个部分，其中包含一个类别循环，然后是该类别中的表单。例如它应该显示如下：

**第一类**

表格 1

表格 2

**第 2 类**

表格 3

*但我实际上得到的是：*

**第一类**

表格 1

表格 2

表格 3

**第 2 类**

表格 1

表格 2

表格 3

我怎样才能解决这个问题？

我的看法是：

```
def homepage (request):

Categories = Category.objects.all()
Forms = Form.objects.all()

output = {
    'Category_Name': Categories,
    'Form_Title': Forms,

    }

return render_to_response('forms/home.html', RequestContext(request, output)) 
```

我的 HTML 是：

```
<ul>{% for c in Category_Name %}<li>{{ c.Name }}<ul>{% for c in Form_Title %}
<li><a href="/forms/{{ c.id }}">{{ c.Title }}</a></li>{% endfor %}</ul></li>{% endfor %}</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:51:56.670

如果您的表单通过外键关联到某个类别

```
class Form(models.Model):
    ...
    category = models.ForeignKey(Category) 
```

你可以这样做：

```
<ul>
    {% for c in Category_Name %}
    <li>{{ c.Name }}
        <ul>
        {% for form in c.form_set.all %}
        <li><a href="/forms/{{ form.id }}">{{ form.Title }}</a></li>
        {% endfor %}
        </ul>
    </li>
    {% endfor %}
</ul> 
```

看看外键文档。

还要注意在外部和内部循环中使用相同的变量（c）不是一个好主意，即使它像您的示例一样工作

在 python 中，变量名通常写成小写

```
from django.shortcuts import render

def homepage (request):
    categories = Category.objects.all()
    return render(request, 'forms/home.html', 
       {'categories': categories}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:45:10.453

此用例有一个重组模板标签：[https ://docs.djangoproject.com/en/1.4/ref/templates/builtins/?from=olddocs#regroup](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/?from=olddocs#regroup)

使用重组的另一个优点是，只涉及一个 sql 调用。如果您有许多类别，这可能是一个问题。

# jquery - 带有表单 ID 的 jQuery 初始化

> ID：13931194
> 
> 赞同：0
> 
> 时间：2012-12-18T10:42:37.060
> 
> 标签：jquery

我正在使用 JSF 中的复合组件，但遇到了关于我需要使用的 JavaScript 的麻烦。我有以下脚本：

```
$(document).ready(function() {
   $("#form_test\\:text_auto").bind("keyup",function() {
      setTimeout(function() {
         send_ajax();
      }, 500);
   });
}); 
```

为了能够在不同的地方使用它，具有不同的表单 id 而不是 prependId=false; 我需要以某种方式使用表单 id 初始化脚本（在本例中为“form_test”）。

使用 jQuery 绑定像“keyup”这样的事件效果很好，所以如果可能的话，我想继续使用这种机制。是否可以以某种方式动态设置表单 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:45:47.353

你可以尝试类似的东西：

```
$(document).ready(function() {
   $("form\\:text_auto").bind("keyup",function() {  // this will apply for each form tag
    // if you need something from the form use $(this) variable  
    setTimeout(function() {
        send_ajax();
    }, 500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:46:11.187

像这样的东西怎么样：

```
$(document).ready(function() {
   bindKeyupOnForm("form_test");
});

function bindKeyupOnForm(formId) {
    $("#" + formId + "\\:text_auto").bind("keyup",function() {
        setTimeout(function() {
            send_ajax();
        }, 500);
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:13:02.637

感谢您的回答。但是，我通过直接在脚本中设置表单 id #(cc.attrs.formId) 找到了另一种解决方法。

# opencv - 使用 OpenCV 保存 JPEG 元数据

> ID：13931195
> 
> 赞同：1
> 
> 时间：2012-12-18T10:42:36.767
> 
> 标签：opencv, metadata, jpeg

有什么方法可以使用 OpenCV 2.4.2 保存一些 JPEG 元数据（如曝光时间）？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:28:15.423

您可以使用[VideoCapture 属性](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=cv.getcaptureproperty#cv.GetCaptureProperty)从图像（帧）中检索信息。

我使用[pyexiv2](http://tilloy.net/dev/pyexiv2/)创建 exif 标签并将检索到的信息写入这些图像。

# javascript - Meteor template.find 未定义

> ID：13931196
> 
> 赞同：8
> 
> 时间：2012-12-18T10:42:39.053
> 
> 标签：javascript, events, templates, meteor

我试图用它[`template.find`](http://docs.meteor.com/#template_find)来让我的生活更轻松。

但在 javascript 控制台中，我得到：`undefined is not a function`

这就是我所拥有的。它被绊倒了`template.find(...)`

```
 Template.superuserHUD.events = 
  {
    'click input.new_device': function (template) {
      var id = template.find(".new_device_id").value;
      Device_IPs.insert({ID: id, IP: "Not Connected"});
    }
  } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T05:11:19.633

事件处理函数接收两个参数：`event`一个包含事件信息的对象，以及`template`一个模板实例，用于定义处理程序的模板。

第二个参数是可选的，但是当你想使用模板实例函数如`find()`、和时`findAll()`，需要在处理程序中接收它。`firstNode()``lastNode()`

因此，要`template.find()`在事件处理程序中使用，您需要将两个参数都传递为：

```
'click input.new_device': function (event, template) {
     // your event handling code
  } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T11:56:17.897

请使用第二个参数

```
Template.superuserHUD.events
    'click input.new_device': (event, template) ->
        options =
              id: template.find('.new_device_id').value
              IP: 'Not Connected'
        Device_IPs.insert options 
```

有时使用模板本身

```
Template.superuserHUD.events
    event: (event, template) ->
        @find('.new_device_id').value 
```

对于咖啡文盲，这在 javascript 中也是如此......

```
Template.superuserHUD.events({
  'click input.new_device': function(event, template) {
    var options;
    options = {
      id: template.find('.new_device_id').value,
      IP: 'Not Connected'
    };
    return Device_IPs.insert(options);
  }
}); 
```

* * *

```
Template.superuserHUD.events({
  event: function(event, template) {
    return this.find('.new_device_id').value;
  }
}); 
```

# objective-c - ObjC：将“super”与覆盖结合使用

> ID：13931207
> 
> 赞同：0
> 
> 时间：2012-12-18T10:42:55.427
> 
> 标签：objective-c, overriding, super

我有一个 A 类和一个 B 类，它是 A 的子类。两者都有以下方法：

```
-(void)anotherMethod{
    // implementation of A or B
}

-(void)aMethod{
    @try{
        [super aMethod];
    }
    @catch(NSException *e){
    }
    [self anotherMethod];
} 
```

现在：如果我调用A 的调用 B 的实现中包含`[instanceOfClassB aMethod]`的指令（因为它已被覆盖）而不是 A 的指令。我怎样才能使 A 的实现调用 A 的实现？`[self anotherMethod]``aMethod``anotherMethod``aMethod``anotherMethod`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:48:02.940

试试这个：

```
if ([self isKindOfClass:[ClassB class]]) {
    [super anotherMethod];
} else {
    [self anotherMethod];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:09:32.587

这应该可以帮助你：这个人和你有同样的问题。

[Objective-c：在基类上调用 [self message] 正在调用后代方法](https://stackoverflow.com/questions/13670919/objective-c-calling-self-message-on-a-base-class-is-invoking-the-descendant-m)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:13:25.333

解决方案是在调用 super 之前（和之后）进行方法调配，以便用超类替换子类实现。它需要“破解”运行时，没错，但我还没有发现比这更简单的东西。它有效。

# html - 受保护的页面

> ID：13931210
> 
> 赞同：-1
> 
> 时间：2012-12-18T10:43:04.567
> 
> 标签：html, asp.net, css

我有一个奇怪的要求，我不知道如何工作，你能帮我一些提示如何搜索这个吗

我们希望提供一个向员工显示政策的 Intranet 站点

这里奇怪的要求是他们希望政策是可查看和可搜索的，但不可保存，不可打印（就像您在 Kindle 云阅读器中获得的那样），您可以在浏览器中阅读该书但不能复制、保存或打印它。

有什么工具可以做到这一点！?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:53:44.627

**这是不可能的。**总有一种方法可以打印或保存网页。您唯一能做的就是让新手用户更难。

**打印：** 创建一个 print.css 文件，隐藏所有内容。例子：

```
@media print {
  html, body {
    display: none;  /* hide whole page */
  }
} 
```

**保存**：没有真正的解决方案，只能禁用右键单击。尝试这个：

```
<body oncontextmenu="return false;"> 
```

如上所述，这两种解决方案都不会阻碍超级用户。没有什么可以阻止只是制作屏幕截图。

# xslt - 跨页重复的 XSLT 文本

> ID：13931216
> 
> 赞同：0
> 
> 时间：2012-12-18T10:43:27.850
> 
> 标签：xslt, xsl-fo

我正在使用 XSLT-FO 生成一封信 (pdf)。在第一页上，我有公司徽标/图像和信件内容的开头。我不想在任何其他页面上显示徽标，所以我使用可重复页面主替代方案。问题是它在下一页重复文本块 (smf:body)，而不是从第一页继续。我做了很多互联网搜索，试图找出原因 - 但我无法解决。这是一个 XSL-FO：

```
 <xsl:template match="/smf:workItem">                                
    <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
        <fo:layout-master-set>

            <fo:simple-page-master master-name="first-page" page-height="29.7cm" page-width="21cm" margin-top="0.5cm"  margin-bottom="1cm" margin-left="1.75cm">
                <fo:region-body margin-right="2cm" margin-top="1.27cm" margin-bottom="1mm" /> 
                <fo:region-before region-name="header-first" extent="0mm" />
                <fo:region-after region-name="footer-first" extent="0mm" />
                <fo:region-end border-top-width="5pt" region-name="right-sidebar" writing-mode="tb-rl" extent="10mm" />                 
            </fo:simple-page-master>

            <fo:simple-page-master master-name="all-pages" page-height="29.7cm" page-width="21cm" margin-top="0.5cm"  margin-bottom="1cm" margin-left="1.75cm">
                <fo:region-body margin-left="0.25cm" margin-right="2cm" margin-top="1.27cm" margin-bottom="1mm" /> 
                <fo:region-before region-name="header-normal" extent="0mm" />
                <fo:region-after region-name="footer-normal" extent="0mm" />                    
            </fo:simple-page-master>        

            <fo:page-sequence-master master-name="document" font-family="Helvetica">
                <fo:repeatable-page-master-alternatives>
                    <fo:conditional-page-master-reference page-position="first" master-reference="first-page"/>
                    <fo:conditional-page-master-reference page-position="any" master-reference="all-pages" />
                </fo:repeatable-page-master-alternatives>
            </fo:page-sequence-master>

            <!--
            <fo:page-sequence-master master-name="document" font-family="Helvetica">
                    <fo:single-page-master-reference master-reference="first-page"/>
                    <fo:repeatable-page-master-reference master-reference="all-pages"/>
            </fo:page-sequence-master>
            -->

        </fo:layout-master-set>     

        <fo:page-sequence master-reference="document">          
            <fo:static-content flow-name="header-first" font-size="10pt">                                               
                <fo:external-graphic src="url('C:\Program Files (x86)\numerointeractive\whitemail\Images\club1830.jpg')" />     
            </fo:static-content>                                    

            <fo:flow flow-name="xsl-region-body">                                           
                <fo:block font-size="10pt" linefeed-treatment="preserve" white-space-collapse="false" white-space-treatment="ignore-if-surrounding-linefeed" wrap-option="wrap">    
                    <xsl:value-of select="smf:body"/>                                                           
                </fo:block>                                                     
            </fo:flow>
        </fo:page-sequence>                                                         
    </fo:root>
</xsl:template> 
```

请有人可以帮我解决这个问题。块 (smf:body) 位于定义我的布局的页面序列中，但由于某种原因它重复了它。任何帮助将不胜感激。

谢谢。

ps - 我也尝试过使用单个/可重复的页面母版，但它的行为相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T10:24:32.453

您可以将您的第一页创建为封面，而无需将其包含在 fo:repeatable-page-master-alternatives 元素中。看一个例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
  <fo:layout-master-set>
    <fo:simple-page-master master-name="Cover" margin="1in" page-height="11in" page-width="8.5in">
      <fo:region-body margin-top="2in"/>
    </fo:simple-page-master>
    <fo:simple-page-master master-name="StoriesOdd" page-height="11in" page-width="8.5in"
      margin=".5in">
      <fo:region-body margin=".5in"/>
      <fo:region-before region-name="oddHead" extent=".5in"/>
      <fo:region-after region-name="oddFoot" extent=".5in"/>
    </fo:simple-page-master>
    <fo:simple-page-master master-name="StoriesEven" page-height="11in" page-width="8.5in"
      margin=".5in">
      <fo:region-body margin=".5in"/>
      <fo:region-before region-name="evenHead" extent=".5in"/>
      <fo:region-after region-name="evenFoot" extent=".5in"/>
    </fo:simple-page-master>
    <fo:page-sequence-master master-name="Stories">
      <fo:repeatable-page-master-alternatives>
        <fo:conditional-page-master-reference master-reference="StoriesOdd" odd-or-even="odd"/>
        <fo:conditional-page-master-reference master-reference="StoriesEven" odd-or-even="even"/>
      </fo:repeatable-page-master-alternatives>
    </fo:page-sequence-master>
    <fo:page-sequence-master master-name="CoverPage">
      <fo:single-page-master-reference master-reference="Cover"/>
    </fo:page-sequence-master>
  </fo:layout-master-set>
  <fo:page-sequence master-reference="CoverPage">
    <fo:flow flow-name="xsl-region-body">
      <fo:block text-align="center" font-weight="bold" font-size="1in"> Cover Page </fo:block>
    </fo:flow>
  </fo:page-sequence>
  <fo:page-sequence master-reference="Stories">
    <fo:static-content flow-name="oddHead">
      <fo:block border-bottom-width="thin" border-bottom-style="solid" border-bottom-color="green"
        font-weight="bold" text-align="outside"> Story Title </fo:block>
    </fo:static-content>
    <fo:static-content flow-name="evenHead">
      <fo:block border-bottom-width="thin" border-bottom-style="solid" border-bottom-color="green"
        font-weight="bold" text-align="outside"> Book of Stories </fo:block>
    </fo:static-content>
    <fo:static-content flow-name="oddFoot">
      <fo:block border-bottom-width="thin" border-bottom-style="solid" border-bottom-color="green"
        font-weight="bold" text-align="outside">
        <fo:page-number/> | </fo:block>
    </fo:static-content>
    <fo:static-content flow-name="evenFoot">
      <fo:block border-bottom-width="thin" border-bottom-style="solid" border-bottom-color="green"
        font-weight="bold" text-align="outside"> | <fo:page-number/>
      </fo:block>
    </fo:static-content>
    <fo:flow flow-name="xsl-region-body">
      <fo:block/>
    </fo:flow>
  </fo:page-sequence>
</fo:root> 
```

# c# - 将文本绑定到 word 中的样式

> ID：13931217
> 
> 赞同：0
> 
> 时间：2012-12-18T10:43:39.450
> 
> 标签：c#, office-interop

我想为word中的每个段落绑定一个样式。该程序使用数据集中的数据填充合并字段。合并字段来自带有样式的预定义模板。

每行/段落我必须将条件样式绑定到段落，所以这是我使用的代码：

```
 objDoc = objWord.Documents.Add(ref objTemp, ref missing, ref missing, ref missing);
    objDoc.CopyStylesFromTemplate(objTemp.ToString());  //copy the styles to the active document

    objWord.Selection.set_Style(objDoc.Styles[stijl]);
    objWord.Selection.TypeText(resultaat); 
```

当我打开文档时，段落具有正确的字体等。但是，它们绑定到文档中的“普通”样式。每个段落中的制表符空间也是关闭的。

但是，没有文本（只有空格）的段落被绑定到输出文档中的预定义样式。

是否可以将布局绑定到段落？如果是这样，这也将解决我的制表位问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:43:45.260

显然，如果您切换最后两行代码，问题就解决了。

所以，这是答案：

```
 objWord.Selection.TypeText(resultaat);
    objWord.Selection.set_Style(objDoc.Styles[stijl]); 
```

# php - php 使用值作为数组中的变量名（作为键）从 Drupal 解压结果集

> ID：13931218
> 
> 赞同：0
> 
> 时间：2012-12-18T10:43:40.067
> 
> 标签：php, arrays, key-value

我将在我的代码中多次重用 Drupal db_query 结果集解包函数来处理各种不同的查询——我正在使用 OO，因此我想重用它并尽可能“干”。

因此，我尝试将其剥离为最通用的函数，以便只要`$columns`提供的与查询中使用的列相匹配，类似地`$resultset`，我可以循环并将值分配给键，如图所示，并返回一个`$rows[]`.

我还没有遇到尝试将变量的值用作变量名（the `$key`）的问题，如果这只是我应该完全避免的事情，请说。

```
foreach($this->resultSet as $aRecord) {

    $c = 0;

    while (isset($this->columns[$c])) {

        $value =  $this->columns[$c];
        $rows[$i] = array(
            $key[$this->columns[$c]] => $aRecord->$value,
        );

        $c++;
    }

    $i++;
} 
```

我已经阅读了以下内容，并开始认为这只是我迄今为止在 PHP 经验中所缺少的知识。

[我可以在 PHP 中使用生成的变量名吗？](https://stackoverflow.com/questions/130240/can-i-use-a-generated-variable-name-in-php)

[PHP使用函数返回值作为数组](https://stackoverflow.com/questions/2851465/php-use-function-return-value-as-array)

[https://wiki.php.net/rfc/functionarraydereferencing](https://wiki.php.net/rfc/functionarraydereferencing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:11:54.627

感觉不对，有人曾经告诉我，如果你必须开始用 PHP 编写复杂的函数，你可能已经错过了 PHP 已经提供的可用函数......非常真实......感谢（在撰写本文时......） 'MrCode' 对于这个建议。

```
 $this->sql = "SELECT foo, bar FROM foobar";
    $this->result = db_query($this->sql);

    if ($this->result->rowCount() > 0) {

        while ($row = $this->result->fetchAssoc()) {

            $this->resultArray[] = $row; 
        }
    } 
```

# entity-framework - 实体框架 6：“自定义代码优先约定”功能的正确用法？

> ID：13931220
> 
> 赞同：1
> 
> 时间：2012-12-18T10:43:47.587
> 
> 标签：entity-framework, entity-framework-6

我的要求是全局配置字符串长度映射，但也可以使用 MaxLengthAttribute 专门配置一个属性。这是我的代码：

```
public class StringLengthConvention
: IConfigurationConvention<PropertyInfo, StringPropertyConfiguration>
{
    public void Apply(
        PropertyInfo propertyInfo,
        Func<StringPropertyConfiguration> configuration)
    {
        StringAttribute[] stringAttributes = (StringAttribute[])propertyInfo.GetCustomAttributes(typeof(StringAttribute),true);
        if (stringAttributes.Length > 0)
        {
            configuration().MaxLength = stringAttributes [0].MaxLength;
        }
    }
}

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {           
        modelBuilder.Conventions.Add<StringLengthConvention>();
    }

public class ContentInfo
{
   // ...
    [MaxLength(200)]
    [String]        
    public string TitleIntact { get; set; }
   // ...
} 
```

我的问题是“MaxLength”不能再工作了。在 StringLengthConvention.Apply() 中应用全局配置之前，我是否需要检查属性是否具有 MaxLengthAttribute？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:23:48.610

在这种情况下可行的是创建一个轻量级约定，为字符串指定 MaxLength 属性。在这种情况下，约定将为所有字符串设置属性的最大长度，除非它已经由注释、流式 API 或其他约定配置。

在您的 OnModelCreate 方法中添加以下代码来设置您的默认 MaxLength：

```
modelBuilder.Properties<string>()
            .Configure(c => c.HasMaxLength(DefaultStringLength)); 
```

这里有一个约定的演练：http: [//msdn.microsoft.com/en-us/data/jj819164.aspx](http://msdn.microsoft.com/en-us/data/jj819164.aspx) 请务必查看页面底部的“更多示例”

# android - 如何绘制一个高度设置为填充父级的矩形？

> ID：13931222
> 
> 赞同：0
> 
> 时间：2012-12-18T10:43:52.197
> 
> 标签：android

我正在尝试在显示外部设备音量的应用程序中实现一个指示器。为此，我创建了一个布局，它应该根据所述设备的当前体积在运行时绘制矩形子级。

我该怎么做呢？具体来说，我希望绘制这些矩形的高度与它们的父级相匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:51:03.430

使用 ProgressBar 或 SeekBar（禁用触摸）视图并使用它们的方法 setProgress(int value) 进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:10:34.297

我认为这将有助于你的追求。其实很简单，只要`LinearLayout`用一些宽度相等的孩子就可以了。

```
import java.util.ArrayList;

import android.content.Context;
import android.graphics.Color;
import android.util.AttributeSet;
import android.view.View;
import android.widget.ImageView;
import android.widget.LinearLayout;

public class CustomView extends LinearLayout {
    private ArrayList<ImageView> views = new ArrayList<ImageView>();

    public CustomView(Context context, AttributeSet attributeSet) {
        super(context, attributeSet);
        init(context);
    }

    public CustomView(Context context) {
        super(context);
        init(context);
    }

    private void init(Context context) {
        this.setOrientation(LinearLayout.HORIZONTAL);
        for (int i = 0; i < 10; i++) {
            ImageView loadingPiece = new ImageView(context);
            loadingPiece.setBackgroundColor(Color.RED);
            this.addView(loadingPiece);
            LayoutParams layoutParams = (LayoutParams)loadingPiece.getLayoutParams();
            layoutParams.weight = 1.0f;
            layoutParams.height = this.getHeight();
            layoutParams.width = 0;
            loadingPiece.setLayoutParams(layoutParams);
            views.add(loadingPiece);
        }
    }

    public void setPercentage(int amountToShow) {
        for (int i = 0; i < views.size(); i++) 
            if (i < amountToShow)
                views.get(i).setVisibility(View.VISIBLE);
            else
                views.get(i).setVisibility(View.INVISIBLE);
    }
} 
```

希望能帮助到你。

# javascript - 如何使用 jquery 缩放 div 内容？

> ID：13931225
> 
> 赞同：26
> 
> 时间：2012-12-18T10:44:14.980
> 
> 标签：javascript, jquery, html

我有一个父母`<div>`。在里面我放置了一些文本和图像。现在我需要放大到该 parent 的特定部分`<div>`。是否可以？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-18T11:03:35.657

如果您希望在鼠标悬停时放大该图像：

```
$(document).ready( function() {
$('#div img').hover(
    function() {
        $(this).animate({ 'zoom': 1.2 }, 400);
    },
    function() {
        $(this).animate({ 'zoom': 1 }, 400);
    });
}); 
```

​或者，如果使用放大和缩小按钮，您可能会这样做：

```
$("#ZoomIn").click(ZoomIn());

$("#ZoomOut").click(ZoomOut());

function ZoomIn (event) {

    $("#div img").width(
        $("#div img").width() * 1.2
    );

    $("#div img").height(
        $("#div img").height() * 1.2
    );
},

function  ZoomOut (event) {

    $("#div img").width(
        $("#imgDtls").width() * 0.5
    );

    $("#div img").height(
        $("#div img").height() * 0.5
    );
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-16T22:53:06.473

@Gadde - 你的回答很有帮助。谢谢！我需要一个类似于“地图”的 div 缩放，并且能够在你的帖子中产生我需要的感觉。我的标准包括需要重复单击并在每次单击时继续缩小/缩小。下面是我的最终结果。

```
 var currentZoom = 1.0;

    $(document).ready(function () {
        $('#btn_ZoomIn').click(
            function () {
                $('#divName').animate({ 'zoom': currentZoom += .1 }, 'slow');
            })
        $('#btn_ZoomOut').click(
            function () {
                $('#divName').animate({ 'zoom': currentZoom -= .1 }, 'slow');
            })
        $('#btn_ZoomReset').click(
            function () {
                currentZoom = 1.0
                $('#divName').animate({ 'zoom': 1 }, 'slow');
            })
    }); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-18T11:07:52.337

```
 $('image').animate({ 'zoom': 1}, 400); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T03:35:29.393

使用 zoom-master/jquery.zoom.js。图像的缩放效果很好。这是该页面的链接。 [http://www.jacklmoore.com/zoom/](http://www.jacklmoore.com/zoom/)

```
 <script>
    $(document).ready(function(){
        $('#ex1').zoom();

    });
</script> 
```

# java - 插入列表 使用java进入mysql数据库

> ID：13931238
> 
> 赞同：0
> 
> 时间：2012-12-18T10:45:04.873
> 
> 标签：java, spring, hibernate

在我的代码中..

```
List<WeekdayType> weekday = new ArrayList<WeekdayType>(); 
```

我将插入`weekday` 数据库...听到`WeekdayType`的是枚举

```
public enum WeekdayType {
MONDAY(Calendar.MONDAY), TUESDAY(Calendar.TUESDAY), WEDNESDAY(
        Calendar.WEDNESDAY), THURSDAY(Calendar.THURSDAY), FRIDAY(
        Calendar.FRIDAY), SATURDAY(Calendar.SATURDAY), SUNDAY(
        Calendar.SUNDAY);
private int day;
private WeekdayType(int day) {
    this.day = day;
}
public int getDay() {
    return day;
}} 
```

我正在像这样在 Hibernate 中创建 Bean..

```
 @Entity
@Table(name="EC_TIMETABLE")
public class TimetableVO
{
-------
-----
@Column(name="REPEAT_DAYS")
    private List<WeekdayType> repeatDays;
//Setter and Getter...
} 
```

我将值插入数据库，但它给出了错误：

```
org.hibernate.MappingException: Could not determine type for: java.util.List, at table: EC_TIMETABLE, for columns: [org.hibernate.mapping.Column(REPEAT_DAYS)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:53:23.443

您需要使用注释对枚举列表进行`@Enumerated`注释。

```
@Column(name="REPEAT_DAYS")
@Enumerated(EnumType.STRING)
private List<WeekdayType> repeatDays; 
```

您可以使用 @Enumerated 批注的 EnumType 枚举属性指定枚举应如何保存在数据库中。EnumType.ORDINAL 指定枚举将作为整数值保存。在这里，设置为 VALUE1 的 myEnum 将保持为 0，将 VALUE2 保持为 1，以此类推。

另一种方法是使用 EnumType.STRING 指定枚举将使用该字段设置为的枚举值的名称进行持久化。因此，应用于前面的示例，将字段 myEnum 设置为 MyEnum.VALUE1 将保持为 VALUE1，等等。

**更新：** 您还需要指定`columnDefinition`具有所有有效枚举值的属性。

```
@Column(name="REPEAT_DAYS", columnDefinition="enum(1,2,3)") 
```

参考：[mapping-enum-types-with-hibernate-annotations](https://stackoverflow.com/questions/2569053/mapping-enum-types-with-hibernate-annotations)

# java - 请让我知道任何适用于 jdk 1.7 的 MySQL 版本

> ID：13931239
> 
> 赞同：1
> 
> 时间：2012-12-18T10:45:06.293
> 
> 标签：java, mysql, jdbc, mysql-connector

我安装了 JDK 1.7 并尝试连接到不同的 MySQL 数据库和 Connector/J 版本。但是每次加载驱动程序时都会出现以下错误：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
 at java.lang.Class.forName0(Native Method)
 at java.lang.Class.forName(Class.java:186)
 at jdbc.JDBC.main(JDBC.java:24)
Caused by: java.lang.RuntimeException: Uncompilable source code - com.mysql.jdbc.NonRegisteringDriver is not abstract and does not override abstract method getParentLogger() in java.sql.Driver
 at com.mysql.jdbc.NonRegisteringDriver.<clinit>(NonRegisteringDriver.java:69)
 ... 3 more 
```

哪个 MySQL 驱动程序版本与 JDK 1.7 兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:01:45.647

异常消息是这样说的：

> “原因：java.lang.RuntimeException：无法编译的**源代码**- com.mysql.jdbc.NonRegisteringDriver 不是抽象的，并且不会覆盖 java.sql.Driver 中的抽象方法 getParentLogger()”

我认为问题在于您（或其他人）已经/已经尝试从源代码构建 JDBC 驱动程序并且没有注意到存在编译错误，并将生成的损坏的“.class”文件组装到 JAR 文件中。

* * *

MySQL 网站上的标准 Connector/J 驱动程序 JAR 文件应该适用于 Java 7。当然，我从来没有遇到过这样的问题。

* * *

我更倾向于相信我在异常消息中看到的证据，而不是你对一切“完美”的保证：

*   您确定您使用的是从 MySQL 网站下载的 Connector/J JAR 文件吗？

*   您是否检查了 MD5 校验和以确保您得到了真实的东西？

*   如果您从源代码构建，您是否阅读过 docs/readme.txt 中有关正确构建所需的 JRE 版本的内容？

*   您的应用程序的类路径中是否有其他（损坏的）驱动程序副本？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:14:28.617

```
"Caused by: java.lang.RuntimeException: Uncompilable source code -
com.mysql.jdbc.NonRegisteringDriver is not abstract and does not override
abstract method getParentLogger() in java.sql.Driver" 
```

该方法在 Java 1.7 中`getParentLogger()`被引入到接口中。`Driver`

查找支持 Java 1.7 的 MySQL 驱动程序或切换回 Java 1.6。

编辑：附加信息：

我测试了 JDK 1.7.10 和一个名为：`mysql-connector-java-5.1.6-bin.jar`

使用以下代码：

```
public static void main(String[] args) throws ClassNotFoundException,
        InstantiationException, IllegalAccessException, SQLException {
    System.out.println("Java version: "
            + System.getProperty("java.version"));
    Driver driver = (Driver) Class.forName("com.mysql.jdbc.Driver")
            .newInstance();
    System.out.println("JDBC driver: " + driver.getMajorVersion() + "."
            + driver.getMinorVersion());
    Connection connection = DriverManager.getConnection(
            "jdbc:mysql://localhost:3306/DBNAME", "user", "pass");
    System.out.println("Connection: " + connection.getClass().getName());
} 
```

它提供以下输出：

```
Java version: 1.7.0_10
JDBC driver: 5.1
Connection: com.mysql.jdbc.JDBC4Connection 
```

可能您的 JDK/JRE 安装也有问题。安装 JDK 时，它要更新 SQL 驱动程序。
您可以尝试卸载并重新安装 JDK。

# c++ - 无法使用 GDB 进入共享库中的函数

> ID：13931242
> 
> 赞同：12
> 
> 时间：2012-12-18T10:45:10.693
> 
> 标签：c++, debugging, gdb, shared-libraries

我正在尝试调试一个使用 GDB 从多个共享库构建的应用程序。

gdb 的开始：

```
prompt$ gdb
GNU gdb (GDB) Red Hat Enterprise Linux (7.2-50.el6)
Copyright (C) 2010 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>. 
```

告诉 GDB 程序要调试：

```
(gdb) file /home/me/build-path/my-program
Reading symbols from /home/me/build-path/my-program...done. 
```

在应用程序中设置断点：

```
(gdb) my-program-src.cpp:57
breakpoint 1 at 0x819df9b: file src/my-program-src.cpp, line 57 
```

运行程序：

```
(gdb) run 
 Starting program: /home/me/build-path/my-program 
```

程序在断点处停止，正如预期的那样：

```
 Breakpoint 1 MyClass:func(this-0xffffc1c0) at src/my-program-src.cpp:235 
```

第 235 行`my-program-src.cpp`是一个构造函数调用，`class Derived`在`MySharedLib1.so`.

'class Derived' 派生自 'class Base'，它位于`MySharedLib2.so`

如果我现在迈出一步，程序会在 `MySharedLib2.so' 中退出，并带有一个 SIG SEGV（这是我要调试的），即：

```
Program received signal SIGSEGV, Segmentation fault.
0x0024c2fa in osal::MsgQMsg::id(unsigned int) () from /home/me/build-path/lib/libMySharedLib2.so 
```

GDB 没有进入任何一个共享库。

`bt`给出发生问题的函数的名称，但`list`显示代码`my-program-src.cpp`

所有代码都使用以下选项编译：

```
gcc -MD -D__LINUX__  -g -Wall -Wextra -Iinc -m32 -fpic -I../../public_inc /home/me/src/file.c -o /home/me/build-path/obj/file.o 
```

共享库与以下选项链接：

```
gcc -o /home/me/build-path/lib/libMySharedLib1.so -shared /home/me/build-path/obj/file.o -L/home/me/build-path/lib/ -m32 
```

如果我更改 Makefile 以便构建档案库（即`.a`），我可以按预期进入功能。

更多信息：

如果我手动尝试从共享库中添加符号，我会得到以下信息：

```
(gdb) add-symbol-file  /home/me/build-path/lib/libMySharedLib2.so
The address where /home/me/build-path/lib/libMySharedLib2.so has been loaded is missing 
```

`add-symbol-file`（注意：一旦断点被​​击中，我会得到相同的响应）

如果我可以在共享库中的函数中设置断点，GDB 会按预期中断，但如果我键入`list`GDB，则会在主应用程序代码中显示调用行（即不在共享库中的调用函数）。GDB 不会抱怨找不到源文件。

**为什么我不能进入我的共享库？**

**为什么我不能单步执行共享库中的代码？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-12-14T00:36:21.760

如果共享库没有调试符号/信息，gdb 默认会跳过它而不是进入它。您可以使用`stepi`(abbrev `si`) 来代替单条指令。我发现 .gdbinit 文件中的以下命令很有用：

```
define sx
  si
  x /1i $pc
end
document sx
    Step one instruction and print next instruction
end
define nx
  ni
  x /1i $pc
end
document nx
    Step one instruction running through calls and print next instruction
end 
```

它定义了命令`sx`/`nx`以单条指令逐步执行，然后反汇编要运行的下一条指令。在尝试通过没有调试信息的机器代码进行调试时非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T22:30:27.087

这可能是一个错字，但您在尝试加载符号时使用`libMySharedLib2.so`了`2`not a 。`1`

在任何情况下，您都应该使用`g++`来编译和链接 c++ 代码。此外，主程序不必是图片，尽管它可能不会受到伤害。

它对我有用，如下所示：

```
$ cat >lib.h
class Base
{
        int _x;
    public:
        Base(int);
};

class Derived : public Base
{
    public:
        Derived(int x);
};
$ cat >lib.cpp
#include "lib.h"

Base::Base(int x)
{
    _x = *reinterpret_cast<int*>(x);
}

Derived::Derived(int x) : Base(x)
{
}
$ cat >main.cpp
#include "lib.h"

int main(int, char**)
{
    Derived d(0);
    return 0;
}
$ g++ -shared -fpic -m32 -g -Wall -o libMySharedLib1.so lib.cpp
$ g++ -m32 -g -Wall -L. -l MySharedLib1 main.cpp
$ LD_LIBRARY_PATH=$PWD gdb ./a.out
GNU gdb (GDB) 7.3.50.20111117-cvs-debian
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>...
Reading symbols from a.out...done.
(gdb) r
Starting program: a.out     

Program received signal SIGSEGV, Segmentation fault.
0xf7fdb552 in Base::Base (this=0xffffd83c, x=0) at lib.cpp:5
5           _x = *reinterpret_cast<int*>(x);
(gdb) bt
#0  0xf7fdb552 in Base::Base (this=0xffffd83c, x=0) at lib.cpp:5
#1  0xf7fdb5ba in Derived::Derived (this=0xffffd83c, x=0) at lib.cpp:8
#2  0x08048591 in main () at main.cpp:5
(gdb) br main
Breakpoint 1 at 0x804857d: file main.cpp, line 5.
(gdb) r
The program being debugged has been started already.
Start it from the beginning? (y or n) y
Starting program: a.out     

Breakpoint 1, main () at main.cpp:5
5           Derived d(0);
(gdb) s
Derived::Derived (this=0xffffd83c, x=0) at lib.cpp:8
8       Derived::Derived(int x) : Base(x)
(gdb) s
Base::Base (this=0xffffd83c, x=0) at lib.cpp:5
5           _x = *reinterpret_cast<int*>(x); 
```

（gdb 输出略有编辑）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-19T18:41:46.183

这是使用未使用调试语句编译的库时通常遇到的问题。通常，gdb 将跳过这些函数，并且回溯将仅在库调用的加载内存中提供一个位置。这是因为没有这些符号，gdb 就没有可映射的内容。

如果您有库本身的源代码，请在激活调试标志的情况下重新编译它。根据您正在调试的内容，这可能会将时序伪影引入您的分析中。例如，如果您正在调试数据流入的某个缓冲区中的段错误，则符号的存在将引入足够的延迟以使缓冲区正确填充。

如果您没有源代码，这将非常具有挑战性，但在许多情况下并非不可能。如果库没有*被剥离*，回溯确实提供了足够的信息来了解发生错误时哪些函数正在执行。有了这个，您需要对执行进行逆向工程，以便您可以查看可用的任何源文件。根据您对 ISA 的熟悉程度，您可以通过查看组装说明自己梳理其中的一些细节。

最坏的情况是如果库被完全*剥离*。这是一个配对所有已编译代码的过程，以便删除其中的所有人类可读（真正的文本字符串）引用。即使在没有调试语句的情况下，编译器仍然会留下带有函数名称的标签，但`strip`会用唯一的整数替换那些标签（它会留下其他东西，但我想你可以理解我在这里的意思）。在这种情况下，gdb 甚至无法解析回溯中的函数名。这就是您对 ISA 的理解需要大放异彩的地方，而且您首先必须通过严格的逆向工程项目，然后才能解决错误本身的原因。

在主要的麻烦类中（即您没有源代码），您需要问自己一个重要问题：*我是否负责修复不是我的代码的部分？*在大多数情况下，专注于确保错误是可重现的并提交错误报告；让该库的维护者弄清楚。如果您仍然负责修复整体错误，请专注于您可以影响的内容并黑盒您无法影响的内容；查看是否需要以可以适当防止或处理错误的方式限制对这些库调用的输入。

# mercurial - lfconvert 后合并 mercurial repo

> ID：13931248
> 
> 赞同：0
> 
> 时间：2012-12-18T10:45:28.867
> 
> 标签：mercurial, mercurial-extension

我想使用 largefiles 扩展来跟踪我的存储库中的二进制数据。 [文档](http://mercurial.selenic.com/wiki/LargefilesExtension)声明您必须将“普通”存储库转换为“大文件”存储库。像这样：

```
hg lfconvert normal_repo largefiles_repo 
```

是否可以在将两个存储库转换为大文件存储库后合并两个存储库，而这两个存储库都没有在某个“时间”进行转换。还是所有 repos 都必须共享一个共同的“lfconvert 事件”才能在它们之间合并？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:33:21.790

看起来 lfconvert 从第一个大文件出现的地方重写了存储库历史记录。理论上，您可以将生成的存储库合并到旧存储库中，但是您在旧存储库中拥有的大文件（版本）也将在合并存储库中；你最终会得到一个有两个根的存储库。

# windows-phone-7 - windows phone game (480x800) 支持其他分辨率

> ID：13931250
> 
> 赞同：3
> 
> 时间：2012-12-18T10:45:34.047
> 
> 标签：windows-phone-7, xna, windows-phone-8, screen-resolution

我开发了一个基于480x800分辨率的xna游戏，这个游戏怎么能针对其他分辨率，比如HD720P（720x1280）或WXGA（768x1280）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:53:26.197

在 Windows Phone 8 设备上运行时，它将根据需要自动缩放 150% 或 160%（对于 720P 和 WXGA）。

由于无法创建直接针对 WP8 的 XNA 游戏，因此您无法创建使用 16:9 纵横比的 XNA，因此您无法使用 720P 设备的全屏。

# internet-explorer-10 - Filepicker 无法在 Windows 8、IE 10 上选择文件

> ID：13931258
> 
> 赞同：0
> 
> 时间：2012-12-18T10:46:20.050
> 
> 标签：internet-explorer-10, filepicker.io

我已经定义了一个这样的文件选择器小部件：

```
<input type="filepicker" data-fp-apikey="--" data-fp-mimetypes="image/jpg, image/jpeg, application/pdf" data-fp-container="modal" data-fp-multiple="true" onchange="on_file_picker_change(event,)" data-fp-button-text="Browse for files"> 
```

这在带有 Chrome、Safari 和 Firefox 的 Mac 上运行良好。它在带有 Firefox 的 Windows 8 上也能正常工作。但是它不适用于带有 IE10 的 Windows 8。拖放根本不起作用，单击“选择文件”会打开文件浏览器，但“文件类型”字段标记为“任何文件（未定义未定义未定义）”，然后选择我的小部件类型的文件允许是不可能的。

关于问题可能是什么的任何线索？我没有用其他版本的 IE 测试过。

# jaxb - cxf-java2ws-plugin 和 jaxb 注释类

> ID：13931262
> 
> 赞同：0
> 
> 时间：2012-12-18T10:46:27.090
> 
> 标签：jaxb, wsdl, jax-ws, cxf

我正在尝试从 java 生成 wsdl。

该插件为同一项目中包含的那些类生成模式信息，但似乎不是依赖包中的类。

```
<xs:element minOccurs="0" name="xxx" type="xs:anyType"/> 
```

该类`xxx`是一个 JAXB 注释类，并且驻留在具有不同（编译范围）工件的不同包中。

这是正常的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:41:17.760

我发现了问题。我正在为更多的访客回答我自己的问题。

这里有两个博客条目拯救了我的日子。

*   [http://city81.blogspot.kr/2011/11/jax-ws-jaxb-and-generics.html](http://city81.blogspot.kr/2011/11/jax-ws-jaxb-and-generics.html)
*   [http://tunatore.wordpress.com/2011/06/04/how-to-use-xmlseealso-annotation-in-jax-ws/](http://tunatore.wordpress.com/2011/06/04/how-to-use-xmlseealso-annotation-in-jax-ws/)

请任何人为我和其他人回答一些技术问题。

我的 JAXB 注释类看起来像这样。

```
@Entity
@Inheritance
abstract class Parent {
}

@Entity
class Sun extends Parent {
}

@Entity
class Daughter extends Parent {
} 
```

这三个类似乎都在 JPA 测试中工作。

当涉及到 JAX-WS 时，我需要`Parent`用`@XmlSeeAlso`.

```
@XmlSeeAlso({Sun.class, Daughter.class})
abstract class Parent {
} 
```

现在我可以和

```
abstract ParentService<P extends Parent> {
}

@WebService
class SunService extends ParentService<Sun> {
} 
```

# asp.net-mvc-4 - 为什么我的 API 控制器完成请求后会收到 Ninject InvalidOperation 异常？

> ID：13931265
> 
> 赞同：4
> 
> 时间：2012-12-18T10:46:34.467
> 
> 标签：asp.net-mvc-4, asp.net-web-api, ninject

我有一个 MVC4 Web 应用程序项目作为更大解决方案的一部分。我也有一个测试项目。我正在处理一堆不会重新编写的代码，所以我不能总是做出我想做的改变。

MVC4 Web 应用程序具有“普通”控制器和 Web API 控制器。我们使用的是 RTM 版本的 Web API，而不是 RC。

我试图将 IoC 引入项目中。使用 NuGet 安装技术（而不是下载 DLL 并直接引用它们），我安装了：

```
Ninject v3.0.1.10, 
Ninject.MVC3 v3.0.0.6
Ninject.Extensions.Factory v3.0.1.0
Ninject.Web.Common v 3.0.0.7 
```

我的解决方案中没有其他使用 Ninject 的引用组件。

然后，按照 Brad Wilson 和他的 Github Gist [https://gist.github.com/2417226](https://gist.github.com/2417226)给出的建议，以及 Filip W 在此处给出的类似建议[http://www.strathweb.com/2012/05/using- ninject-with-the-latest-asp-net-web-api-source/](http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/)，我已经实现了一个 NinjectResolver，并在全局配置中“注册”。

当我启动 Web 应用程序时，默认页面映射`Index`到`ProjectController`. 这会呈现一个视图，该视图使用 Knockout 通过调用`ApiController`名为 的操作来填充 ViewModel `ApiProjectController.Get()`。

我的`NinjectWebCommon.cs`代码如下所示：

```
using System.Collections.Generic;
using System.Diagnostics.Contracts;
using System.Web.Http;
using System.Web.Http.Dependencies;
using Ninject.Extensions.Factory;
using Ninject.Syntax;
using OfficeWebApp.Utilities;

[assembly: WebActivator.PreApplicationStartMethod(typeof(OfficeWebApp.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(OfficeWebApp.App_Start.NinjectWebCommon), "Stop")]

namespace OfficeWebApp.App_Start
{
    using System;
    using System.Web;

    using Microsoft.Web.Infrastructure.DynamicModuleHelper;

    using Ninject;
    using Ninject.Web.Common;

    public static class NinjectWebCommon 
    {
        private static readonly Bootstrapper Bootstrapper = new Bootstrapper();

        /// <summary>
        /// Starts the application
        /// </summary>
        public static void Start() 
        {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
            Bootstrapper.Initialize(CreateKernel);
        }

        /// <summary>
        /// Stops the application.
        /// </summary>
        public static void Stop()
        {
            Bootstrapper.ShutDown();
        }

        /// <summary>
        /// Creates the kernel that will manage your application.
        /// </summary>
        /// <returns>The created kernel.</returns>
        private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel();
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

            RegisterServices(kernel);

            GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);

            return kernel;
        }

        /// <summary>
        /// Load your modules or register your services here!
        /// </summary>
        /// <param name="kernel">The kernel.</param>
        private static void RegisterServices(IKernel kernel)
        {
            kernel.Bind<IDataManagerConnection>().To<DataManagerConnection>().WithConstructorArgument("overriddenConnectionString", string.Empty);
            kernel.Bind<IDataManagerConnectionFactory>().ToFactory();
        }        
    }

    public class NinjectDependencyScope : IDependencyScope
    {
        private IResolutionRoot resolver;

        internal NinjectDependencyScope(IResolutionRoot resolver)
        {
            Contract.Assert(resolver != null);

            this.resolver = resolver;
        }

        public void Dispose()
        {
            IDisposable disposable = resolver as IDisposable;
            if (disposable != null)
                disposable.Dispose();

            resolver = null;
        }

        public object GetService(Type serviceType)
        {
            if (resolver == null)
                throw new ObjectDisposedException("this", "This scope has already been disposed");

            return resolver.TryGet(serviceType);
        }

        public IEnumerable<object> GetServices(Type serviceType)
        {
            if (resolver == null)
                throw new ObjectDisposedException("this", "This scope has already been disposed");

            return resolver.GetAll(serviceType);
        }
    }

    public class NinjectDependencyResolver : NinjectDependencyScope, IDependencyResolver
    {
        private IKernel kernel;

        public NinjectDependencyResolver(IKernel kernel)
            : base(kernel)
        {
            this.kernel = kernel;
        }

        public IDependencyScope BeginScope()
        {
            return new NinjectDependencyScope(kernel.BeginBlock());
        }
    }
} 
```

`ProjectController`代码是：

```
public class ProjectController : Controller
{
    private readonly IDataManagerConnectionFactory _dataManagerConnectionFactory;

    public ProjectController(IDataManagerConnectionFactory dataManagerConnectionFactory)
    {
        _dataManagerConnectionFactory = dataManagerConnectionFactory;
    }

    [HttpGet]
    public ActionResult Index()
    {
        //TODO:             
        ViewBag.Organisation = "Preview";

        return View();
    }
} 
```

...和`ApiProjectController`：

```
public class ApiProjectController : ApiController
{
    private readonly IDataManagerConnectionFactory _dataManagerConnectionFactory;

    public ProjectsController(IDataManagerConnectionFactory dataManagerConnectionFactory)
    {
        _dataManagerConnectionFactory = dataManagerConnectionFactory;
    }

    [HttpGet]
    public IEnumerable<ProjectTileModel> Get()
    {
        using (IDataManagerConnection connection = _dataManagerConnectionFactory.Create())
        {
            List<ProjectTileModel> projectViewModels = connection.DataManager.GetProjectInfos()
                                                                             .ToList();
            return projectViewModels;
        }
    }
} 
```

在`ApiProjectController.Get()`action 方法完成后，Ninject 向我抛出以下异常：

```
Error loading Ninject component ICache
No such component has been registered in the kernel's component container.

Suggestions:
  1) If you have created a custom subclass for KernelBase, ensure that you have properly
     implemented the AddComponents() method.
  2) Ensure that you have not removed the component from the container via a call to RemoveAll().
  3) Ensure you have not accidentally created more than one kernel. 
```

调用堆栈如下所示：

```
Ninject.dll!Ninject.Components.ComponentContainer.Get(System.Type component) Line 160   C#
Ninject.dll!Ninject.Components.ComponentContainer.Get<Ninject.Activation.Caching.ICache>() Line 116 + 0x46 bytes    C#
Ninject.Web.Common.dll!Ninject.Web.Common.OnePerRequestHttpModule.DeactivateInstancesForCurrentHttpRequest.AnonymousMethod__1(Ninject.IKernel kernel) Line 74 + 0x27 bytes  C#
Ninject.dll!Ninject.GlobalKernelRegistration.MapKernels(System.Action<Ninject.IKernel> action) Line 75 + 0xe bytes  C#
Ninject.Web.Common.dll!Ninject.Web.Common.OnePerRequestHttpModule.DeactivateInstancesForCurrentHttpRequest() Line 76    C#
Ninject.Web.Common.dll!Ninject.Web.Common.OnePerRequestHttpModule.Init.AnonymousMethod__0(object o, System.EventArgs e) Line 56 + 0x9 bytes C# 
```

在文件中的以下 Ninject 代码中引发了此异常`ComponentContainer.cs`：

```
 Type implementation = _mappings[component].FirstOrDefault(); // <-- see note below...

        if (implementation == null)
            throw new InvalidOperationException(ExceptionFormatter.NoSuchComponentRegistered(component)); // <-- exception thrown here 
```

注意：在上面指出的行中，该`_mappings`集合仅包含一项；键与`Type`我们正在寻找的 ( `ICache`) 匹配，但`Values`成员 (即 a `List<Type>`) 为空 (0 计数)

我**不**应该使用`OnePerRequestHttpModule`吗？是否因为我`.ToFactory()`在绑定中使用而发生了一些有趣的事情？我真的不知道为什么`OnePerRequestHttpModule`调用`DeactivateInstancesForCurrentHttpRequest()`但 Ninject 似乎想要获取它的内部缓存（也许？？）

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T22:50:32.823

我从来没有真正深入了解这一点。我不知道这是否是 Ninject 中的错误，或者我是否只是错误地使用了它。但是，我通过将 IoC 容器切换到 AutoFAC 来解决我的问题。

# java - 我可以通过java执行cmd命令吗？

> ID：13931268
> 
> 赞同：0
> 
> 时间：2012-12-18T10:46:36.857
> 
> 标签：java, cmd, execute

我正在制作一个程序，它需要一些已经安装到计算机中的 Java 库以及要设置的“类路径”环境变量。

我想运行 set classpath 命令。我可以通过java来做吗？还是我需要做其他事情？任何例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:49:44.450

您只需要[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:49:46.063

如果要设置系统属性，可以使用[System.setProperty(key,value)](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#setProperty%28java.lang.String,%20java.lang.String%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T10:50:40.983

是的你可以。以下是一些示例，向您展示如何做到这一点：

[http://www.javaworld.com/jw-12-2000/jw-1229-traps.html](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html)

[http://www.ehow.com/way_5660016_java-runtime-exec-tutorial.html](http://www.ehow.com/way_5660016_java-runtime-exec-tutorial.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T10:59:24.163

就像是

```
public static void main(String[] args)
{
    try
    {
        if (args == null || (args != null && args.length != 1)) 
        {
        System.out.println("Please provide a command");
        }
        Runtime.getRuntime().exec(args);
    } 
    catch (Exception ex) 
    {
        ex.printStackTrace();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T10:49:59.657

`set.exe`是一个和其他程序一样的程序。您可以使用[Runtime.exec()](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)启动它。

# c++ - 使用 C++ 在 linux 中的系留相机应用程序

> ID：13931271
> 
> 赞同：3
> 
> 时间：2012-12-18T10:46:44.823
> 
> 标签：c++, opencv, camera, linux-device-driver, tethering

我想制作一个程序，为数码视频/静态相机（数码单反相机以外的消费类相机）提供联机操作，这样您就可以将相机插入计算机（USB 或其他）并使用它的功能（拍照，录制视频、缩放、对焦等）。目前的预期平台是 Linux。

据我所知，除了少数厂商（佳能、奥林巴斯、尼康）之外，没有制造商为他们的产品提供 SDK，但只针对他们的数码单反相机。

我对 c++ 并不陌生，但我没有用它参与过很多项目。但是，我对 OpenCV 完全陌生，我还不知道这个库的功能。为了测试 opencv 构建和我的配置，我制作了一个简单的应用程序，它只从网络摄像头获取流并将其显示在表单上。（使用 cvCreateCameraCapture）

这适用于数码相机或摄像机吗？我猜他们必须有一个可用的“网络摄像头模式”，但这并不常见（至少在摄像机中没有）。火线怎么样，或者有其他支持高清的连接器吗？它们会被 OpenCV 识别吗？如果可能的话，我想远离 HDMI 和捕获设备（额外费用）。

> 所以我想我的问题是，如果有人对这样的项目有任何经验：这种用途的首选相机规格是什么（哪些功能）？是否有任何图书馆可以缓解我的麻烦:)

我也在研究 libgphoto2 。如果需要，我会尝试为相机编写驱动程序，如果可能的话使用 libusb，但老实说，我不知道从哪里开始。嗅探 USB 端口（使用他们的本地驱动程序），之后如何处理这些信息？

> 如果有人也能对这个主题有所了解，我将非常感激 - 如何开始，有什么好书可以推荐关于编写驱动程序软件？

另外，我知道 Linux Kino 提供了类似的功能，所以我可以查看源代码，但它仅适用于 IEEE 1394 吗？

> 最后一个问题，考虑到它是通过 USB 连接的，我如何实现相机在计算机启动时自动启动？

抱歉发了这么长的帖子，

谢谢你和最良好的祝愿！

马泰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:40:27.080

要启动与 USB 连接设备对话的程序，您需要为其添加`udev`规则，如下[所示](http://www.reactivated.net/writing_udev_rules.html#external-run)。您可能希望使用`ATTR{device}`and`ATTR{vendor}`而不是`KERNEL`如示例中所示。

至于相机本身，[较旧的佳能 P&S 相机](http://www.usa.canon.com/cusa/consumer/standard_display/sdk_homepage)可以进行[联机拍摄](http://www.breezesys.com/PSRemote/features.htm#ps)。有些受[gphoto](http://gphoto.org/doc/remote/)支持。如果您的相机没有 Linux 支持，但它能够在其他操作系统中工作，您将不得不逆向工程支持。是的，从提供的软件发出命令，嗅探 USB 端口，找出消息格式，让您的程序通过 libusb2 写入/读取消息（或者可能添加对 libgphoto2 的支持）。

另一种可能性是基于 Android 的相机（不是手机，而是真正的 P&S）。尼康和三星都制造了这些东西。可能不需要对任何东西进行逆向工程，但您可能需要为相机编写一个 Android 应用程序。有一些应用程序可以做到这一点，但通过 WiFi/3G 工作，所以 USB 也应该可以。

# sql - 一条语句中的“如果表存在则更新”-如何？

> ID：13931277
> 
> 赞同：3
> 
> 时间：2012-12-18T10:47:00.643
> 
> 标签：sql, postgresql, postgresql-9.2

我对作为长事务的一部分的 SQL 语句有疑问。

`UPDATE tab_1 LEFT JOIN tab_2 ON tab_1.id = tab_2.tab_1_id SET tab_1.something = 42 WHERE tab1.id = tab_2.tab_1_id;`

只要数据库中存在 tab_1 和 tab_2 ，一切都很简单并且工作正常，这是显而易见的。;-)

问题是事务必须在 4 个不同的服务器上提交，并且 tab_2 是“动态”表，它可能存在于特定的 db / db 模式中，或者不......

如果 tab_2 不存在，数据库抛出异常并且整个事务没有提交。我想要的是继续（只需更新 0 行）！

我尝试过这样的事情：

`UPDATE [all the same as above] WHERE tab1.id = tab_2.tab_1_id AND EXISTS (select 1 from pg_class where relname='tab_2');`

...但它仍然是错误的，因为“异常检查”是在“where”条件之前进行的（它是我们要在 join 中使用的同一个表..）。

有没有办法用“纯” SQL 做到这一点？:)

类似于：LEFT JOIN tab_2 IF tab_2 EXISTS（如果不存在 - 什么也不做，返回 null 等？）

我知道在 pl/pgsql 过程中有一种方法可以做到这一点。第二种可能性是在语句之​​前创建表（如果不存在）。

但也许有某种简单而优雅的方法可以在一个语句中做到这一点？:)

数据库管理系统：PostgreSQL 9.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:52:40.593

我不认为`UPDATE`即使表不存在也能成功的语句是简单而优雅的。我认为这很奇怪和令人困惑。

为什么不只包含一个检查该表是否存在的条件，并且只在它存在时才执行更新？会清楚很多。

另一种选择是创建一个指向`tab_2`它是否存在的视图，否则指向一个空表。如果您有很多这样的查询，并且您不想全部更改，这可能会有所帮助。

**更新：**这是条件的样子（必须在函数或`BEGIN...END`块内）：

```
IF EXISTS (select 1 from pg_class where relname='tab_2') THEN 
   UPDATE...
END IF; 
```

根据 Postgresql 的详细信息，如果它看到语句中不存在的`UPDATE`表（我不是 Postgresql 用户），它仍然可能会导致编译失败。在这种情况下，您需要创建一个指向它是否存在的视图，`tab_2`如果它不存在则创建一个空表。

# javascript - 在全球范围内公开一个可计算的

> ID：13931278
> 
> 赞同：2
> 
> 时间：2012-12-18T10:47:06.263
> 
> 标签：javascript, knockout.js

我想在 knockout.js 中全局公开一个可计算对象（不提升到全局 javascript 范围），例如：

```
<span data-binding="text: resource('test/resources', 'myresource')"></span> 
```

或者有一些将新值传递给父值的绑定：

```
<span data-binding="text: {resource: res: 'test/resources', name: 'myresource'}"></span> 
```

不幸的是，我的详尽搜索没有出现任何结果。这是可能吗？

**注意：**我知道我可以将它添加到 中`ViewModel`，但这不会处理嵌套对象，并且`$root.resource`对于我的标准来说不够 DRY。我也可以使用继承，但如果可能的话我想避免这种*情况*。本质上，我想做的是扩展 ko 中的“表达式”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:51:34.163

好的，我要么去继承，使用[这种模式](https://stackoverflow.com/questions/12982850/inheriting-a-class-that-has-the-same-constructor-but-different-similar-prototype/12983130#12983130)，要么简单地从 ko 命名命名空间并改变它（基本上将命名空间从 ko 复制到某个对象并使用它，直到你实现所需的功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:49:55.517

您可以使用自定义绑定来完成此操作：

```
ko.bindingHandlers.resource = {
    init: function(element, valueAccessor){
        // Do here whathever you'd like to do with the resource

    }
}; 
```

您可以像标准 KO 绑定一样使用此自定义绑定，例如：

```
<div data-bind="resource: myResource"></div> 
```

在这里工作[小提琴](http://jsfiddle.net/anzeo/a95G9/2/)。

**编辑**根据您提供的新信息更新了我的小提琴，这里：[小提琴](http://jsfiddle.net/anzeo/a95G9/3/)

# multithreading - 观察者设计模式多线程通信

> ID：13931280
> 
> 赞同：0
> 
> 时间：2012-12-18T10:47:10.113
> 
> 标签：multithreading, thread-safety, observer-pattern

下面的问题是一个抽象的问题，我将不胜感激听取有关该问题的意见。

我的问题如下：

我有一个线程监听数据馈送并将其存储到缓存中。每次在缓存中添加某些内容时，观察者都会将其拾取并将其添加到 HashMap 中。我事先不知道我会得到多少个提要，但这个数字不是无限的。

此外，我的应用程序运行另一个线程，该线程正在执行一些处理，然后检索 HashMap 中的值。

我的问题是我真的不知道是否所有的值都存储在 HashMap 中，所以我不能在它们之间同步两个线程或通知后面的线程存储所有提要的工作已经完成。

流程类似于以下内容：

```
Thread-1 -> listens for data feeds -> cache data feeds -> cache observer -> HashMap

                                                                               ^
                                                                               |
Thread-2 -> starting execution at a random time and needs data from the      HashMap 
```

我真的很想听听一些关于这个问题的建议。上面要考虑的唯一棘手的事情是我真的不知道要存储在 HashMap 中的提要数量，因此我真的不能等待负责存储对象的其他线程通知。

任何回应表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:59:58.023

在完成预先记录的测试数据后，您不能使用 a直接`Condition`唤醒吗？测试中的两个线程可以共享一个对象（也许通过依赖注入）？`Thread-2``Thread-1``Condition`

# java - hibernate Criteria API 多对多

> ID：13931282
> 
> 赞同：0
> 
> 时间：2012-12-18T10:47:23.497
> 
> 标签：java, hibernate, criteria-api

任务类别.hbm.xml

```
<hibernate-mapping>
        <class name="TaskCategory" table="TASK_CATEGORY" select-before-update="true">
            <id name="taskCategoryId" type="integer">
                <column name="TASK_CATEGORY_ID" />
                <generator class="identity" />
            </id>
            <property name="taskCategory" type="string">
                <column name="TASK_CATEGORY" length="512" not-null="true" />
            </property>
            <property name="taskCategoryGroup" type="string">
                <column name="TASK_CATEGORY_GROUP" length="32" not-null="true" />
            </property>
            <property name="description" type="string">
                <column name="DESCRIPTION" length="255" />
            </property>

            <set name="jurisdictions" inverse="true" table="task_category_jurisdiction">
                <key>
                    <column name="task_category_id" not-null="true" />
                </key>
                <many-to-many entity-name="com.sterling.ag.model.Jurisdiction">
                    <column name="jurisdiction_ID" not-null="true" />
                </many-to-many>
            </set>
        </class>
    </hibernate-mapping> 
```

管辖权.hbm.xml

```
<hibernate-mapping default-access="field">
<class name="Jurisdiction" table="Jurisdiction">
    <id name="jurisdictionId" type="int">
        <column name="Jurisdiction_ID" />
        <generator class="identity" />
    </id>
    <many-to-one name="jurisdictionType" class="JurisdictionType" fetch="select">
        <column name="Jurisdiction_Type_ID" not-null="true" />
    </many-to-one>

     <one-to-one name="flattenedJurisdiction" class="FlattenedJurisdiction" />

    <set name="taskCategories" table="task_category_jurisdiction" fetch="select">
        <key>
            <column name="jurisdiction_id" not-null="true" />
        </key>
        <many-to-many entity-name="TaskCategory">
            <column name="task_category_id" not-null="true" />
        </many-to-many>
    </set>      
</class> 
```

我想实现这样的目标：

```
 whereClause.append(" and a.jurisdiction_id not in (select distinct   (j.jurisdiction_id) from " +
                        "task_category_jurisdiction j)" ); 
```

“a”还有另一个 Hibernate 文件，其中包含管辖权。where 子句是一个`StringBuffer`.

我试过这个：

```
DetachedCriteria dc1 = DetachedCriteria.forClass(TaskCategory.class);
dc1.setProjection(Projections.distinct(Projections.property("jurisdictions")));
criteriaQuery.add(Restrictions.not(Subqueries.in("a.jurisdiction", dc1))); 
```

# iphone - iOS 使用 AVFoundation 组合视频

> ID：13931284
> 
> 赞同：2
> 
> 时间：2012-12-18T10:47:37.523
> 
> 标签：iphone, ios

使用 AVFoundation 裁剪和组合视频的方法是什么？我需要从（视频的）顶部裁剪掉 x 个像素，并用不同的视频填充视频的那个部分。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T05:51:51.257

是的，这是可能的，但很棘手。你需要：

*   创建一个 AVMutableVideoComposition 并添加两个轨道以及要组合的两个视频。
*   将视频向上移动您想要的数量。为此，您需要找出适当的仿射变换并应用该仿射变换构建 AVMutableVideoCompositionInstructions。

这一切都非常混乱。这些幻灯片将帮助您完成它：

[http://www.slideshare.net/invalidname/advanced-av-foundation-cocoaconf-aug-11](http://www.slideshare.net/invalidname/advanced-av-foundation-cocoaconf-aug-11)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:52:34.220

抱歉不行。无法在 AVFoundation 中即时裁剪或屏蔽视频。`AVMutableVideoComposition`您可以使用和`AVMutableVideoCompositionLayerInstruction`s将视频向下平移到渲染区域（有效地“裁剪”底部）`setTransform:atTime:`

# ios - 我应该使用哪个高级 API 来管理 iOS 上的 UDP 套接字？

> ID：13931285
> 
> 赞同：7
> 
> 时间：2012-12-18T10:47:41.283
> 
> 标签：ios, networking, udp

在“[网络编程主题概念指南”的“](https://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/NetworkingTopics/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012546-SW1)[使用套接字和流](https://developer.apple.com/library/mac/documentation/NetworkingInternet/Conceptual/NetworkingTopics/Articles/UsingSocketsandSocketStreams.html)”一章中，Apple 说：

> **注意：** POSIX 网络不会激活 iOS 上的蜂窝无线电。出于这个原因，在 iOS 中通常不鼓励使用 POSIX 网络 API。

同样在“[网络概述指南”的“](https://developer.apple.com/library/mac/documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010220-CH12-BBCFIHFH)[网络提示和陷阱](https://developer.apple.com/library/mac/documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/CommonPitfalls/CommonPitfalls.html#//apple_ref/doc/uid/TP40010220-CH4-SW20)”一章中，Apple 说：

> 在 iOS 中，直接使用 POSIX 函数或 CFSocket 使用套接字不会自动激活设备的蜂窝调制解调器或按需 VPN。

好的，所以在 iOS 上既不应该使用 POSIX 套接字也不应该使用 CFSocket，它只是 POSIX 套接字的一个薄包装器，它通过 RunLoops 支持异步网络。没问题。**但是，如果您需要UDP Socket**，您应该使用什么 API ？

苹果在“[网络概述指南”的“](https://developer.apple.com/library/mac/documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010220-CH12-BBCFIHFH)[网络提示和陷阱](https://developer.apple.com/library/mac/documentation/NetworkingInternetWeb/Conceptual/NetworkingOverview/CommonPitfalls/CommonPitfalls.html#//apple_ref/doc/uid/TP40010220-CH4-SW20)”一章中进一步说：

> 避免在连接到主机之前解析 DNS 名称

因此，理想情况下，应该有一个 API 用于管理 UDP 套接字，而不是 POSIX API 和 CFSocket，它接受 DNS 名称而不是目标地址的 IP 地址。

也许我是盲人，但我找不到任何这样的 API。有任何想法吗？

使用任何第三方 API（不是来自 Apple）并不有趣，因为这样的 API 必须基于任何一个 Apple API，在这种情况下我可以直接使用这个 Apple API。围绕 POSIX 套接字编写我自己的包装 API 是小菜一碟，我之前写过很多套接字包装器，我已经知道所有令人讨厌的陷阱。但是我不会使用 POSIX API，这是这里最初的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:05:33.263

我问了 Apple 完全相同的问题，他们的回答或多或少是没有任何用于 UDP 套接字的高级接口。不管 Apple 在他们的指南中说什么，在使用 UDP 时，要么直接使用 POSIX 套接字，结合异步管理器，如`poll()`or `select()`，要么创建一个 POSIX 套接字（可能根据需要使用`bind()`和/或`connect()`在其上），然后将其包装成用于获取 RunLoop 集成的`CFSocket`对象。`CFSocketCreateWithNative()`这是现有的最好的 API。所有更高级别的 API 都设计为仅与 TCP 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T07:01:24.790

正在尝试同样的事情，尽管文档说较低级别的 API 不会激活蜂窝无线电和按需 VPN，但事实证明它对于 TCP 连接并不完全正确。

在 UDP 的情况下，这是正确的，并且您的 UDP 数据包大部分时间都不会被发送。要解决此问题，只需使用较低级别的 API 打开 TCP 侦听套接字，这将激活蜂窝无线电或按需 VPN，并在完成后关闭套接字。

对于 TCP，您可以将低级 API 用于 iOS 设备上的服务器端代码，这会激活蜂窝无线电或按需 VPN，但对于 iOS 设备上的客户端代码，最好使用更高级别的 API。假如。无论哪种方式，无线电都处于活动状态，您不必担心没有发送数据包。

顺便说一句，这就是我目前正在做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:01:40.560

Apple 有一个示例代码描述如何使用 UDP。我自己没有尝试过，但这应该会给你一些很好的指导：

[https://developer.apple.com/library/mac/#samplecode/UDPEcho/Introduction/Intro.html](https://developer.apple.com/library/mac/#samplecode/UDPEcho/Introduction/Intro.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-28T11:37:59.367

自 2018 年以来，Apple 推出了`Network`Framework，根据 Apple 的说法，它是一种现代替代方案`Sockets`，包括用于管理 TCP 和 UDP 连接的高级 API

# asp.net - 会话、缓存或 Cookie 使用哪一个来保留用户的搜索条件？（与案例研究一起发布）

> ID：13931287
> 
> 赞同：0
> 
> 时间：2012-12-18T10:47:55.370
> 
> 标签：asp.net

我正在开发一个基于 ASP.NET 4.0、JQUERY、AJAX 和 Javascript 的 Web 应用程序。我有一个特定的搜索页面，用户可以在其中通过多个因素进行搜索，即按日期、名称、代码、类别等。

例如

A) 在 SearchProducts 表单中，用户可以通过其唯一的编号或名称或开始日期/结束日期或类别或等来搜索产品。

B) 用户可以通过标准搜索表单应该能够执行的一个或所有参数进行搜索。

C）如果用户通过开始日期和结束日期搜索说 2012 年 12 月 1 日至 2012 年 12 月 31 日，例如，我的搜索结果包含 4 个产品，即 4 个产品是从 12 月 1 日到 12 月 31 日购买的

D) 结果显示在网格中，通过单击产品编号，通过查询字符串使用 ProductID 重定向到其查看页面（选择的产品特定完整详细信息）。

E)**我有一个要求，使用户能够保留他/她通过查看页面（选择的产品特定完整详细信息）页面中的返回搜索按钮搜索的搜索结果**。

现在，我的计划如下：

1)**当用户提交搜索时，我想存储用户输入的搜索参数的引用，即日期、名称、类别等。**

2）我将在查询字符串中设置一个值，以区分正常请求和通过返回搜索按钮请求。

3）搜索页面中的代码：

```
 if (!(IsPostBack))
       {
          string tempRequestMode = string.Empty;

          if (Request.QueryString["requestMode"] != null)
          {
              tempRequestMode = Request.QueryString["requestMode"].ToString();

              if (tempRequestMode == "searchResults")
              {
                 //RestoreValues();
                 //Fetch results from the database again based on above results
              }
          }
       } 
```

现在，我的问题是：

我想为此目的使用**ASP.NET 缓存：**

**优点**：它的过期和依赖

**缺点**：它具有应用范围，即它不像 Session 那样对每个用户都是明智的。

第二个选项是**会话**：

**优点**：对每个用户来说都是明智的。

**缺点**：会话更占用内存。

我很困惑我应该使用什么。是否有任何其他选项可以使用，**因为不同用户的搜索条件不同，因此希望用户明智地维护数据**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:55:47.627

您可以将所有搜索条件写入 QueryString。

当用户单击搜索按钮时，运行以下 Javascript：

客户端

```
<script type="text/javascript">
    var url = "Invoices.aspx?type=__type__&status=__status__&order=__order__";

    var type= $("#<%= drpType.ClientID%>").val(); // Type 
    var status = $("#<%= drpStatus.ClientID %>").val(); // Status Parameter
    var order = $("#<%= drpOrder.ClientID %>").val(); //  order Parameter

    window.location = url.replace("__type__",type).replace("__status__",status).replace("__order__",order).replace(");
</script> 
```

服务器端

```
 protected void Page_Load(object cart, EventArgs curt)
            {

                _type = Request.QueryString["type"];
                if (string.IsNullOrEmpty(_type))
                    _type = Enums.InvoiceUserTypes.RS.ToString(); //Default

                _status = Request.QueryString["status"];
                if (string.IsNullOrEmpty(_status)) _status = "ALL"; //Default

                _order= Request.QueryString["order"];
                if (string.IsNullOrEmpty(_order)) _order = "date"; //Default

                drpStatus.Value = _status;
                drpType.Value = _type;
                drpOrder.Value = _order;

RunReport();
            } 
```

当用户单击后退按钮时。搜索参数将在 URL 上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:43:40.047

我认为这种情况的最佳方法是在用户返回搜索页面后使用存储的过滤器重做搜索。任何其他方法都会给您带来很大的缺点。

缓存过期，如果您使用默认实现，它们将不允许您的应用扩展到多台机器，因为它们是本地的。

使用会话也是一个坏主意，因为它们会吃掉你的资源并且也不允许你扩展。

如果必须存储结果，则应将它们序列化（[LOB 模式](http://martinfowler.com/eaaCatalog/serializedLOB.html)）存储在数据库或其他网络可访问资源中，以便可以在任何应用程序服务器中检索它们。

# google-app-engine - Appengine 的索引顺序、游标和聚合

> ID：13931289
> 
> 赞同：1
> 
> 时间：2012-12-18T10:47:59.580
> 
> 标签：google-app-engine, cursor, aggregation, datastore

我需要对数据集进行一些连续聚合。我正在使用应用引擎高复制数据存储。

假设我们有一个简单的对象，该对象的属性包含创建日期的字符串。还有其他与该对象关联的字段，但在此示例中并不重要。

假设我创建并存储了一些对象。以下是与每个对象关联的日期。每个对象按以下顺序存储。这些对象将在单独的事务中创建。

```
Obj1: 2012-11-11
Obj2: 2012-11-11
Obj3: 2012-11-12
Obj4: 2012-11-13
Obj5: 2012-11-14 
```

这个想法是使用游标不断检查新的索引对象。将对新的索引实体进行聚合。

以下是我的问题：

1) 对象是否按顺序索引？就像 Obj4 是否可以在 Obj 1,2 和 3 之前被索引？如果我使用 ORDER BY 查询和游标继续搜索，这将是一个问题。如果索引出现延迟，将无法找到某些实体。

2) 如果没有指定 ORDER BY，查询中返回的实体是什么顺序？

3) 我将如何检查新的索引实体？如，抓取所有实体，存储光标，然后检查自上次查询以来是否有任何新实体被索引？

不那么重要，但值得深思

4）是否所有字段都被索引在一起？如，如果我有一个 date 属性，让我们说一个 name 属性，对于给定的对象，这两个属性是否会同时被索引？

5）如果在同一个事务中写入多个实体，那么事务中的所有实体是否同时被索引？

6）如果所有实体都属于同一个实体组，是否所有实体都同时被索引？

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:39:13.423

1.  所有实体都有每个属性的默认索引。如果您使用`ORDER BY someProperty`，那么您将获得按该属性的值排序的实体。您在索引构建方面是正确的：查询使用索引并且索引是异步构建的，这意味着查询可能在添加后不会立即找到实体。

2.  `ORDER BY`默认为`ASC`，即升序。

3.  为您的实体添加`created`时间戳，然后按它排序并重复光标。请参阅[游标和数据更新](https://developers.google.com/appengine/docs/java/datastore/queries#Cursors_and_Data_Updates)。

4.  索引是在`put()`操作返回后建立的。它们也是并行构建的。这意味着当您查询时，可能会构建一些索引，而有些则不会。请参阅[数据存储写入的生命周期](https://developers.google.com/appengine/articles/life_of_write)。请注意，如果您想在实体上强制*“应用”*，您可以发出`get()`after `put()`，这将强制应用更改（= 写入索引）。

5.  6\. 同一事务中涉及的所有实体必须在同一实体组中（=具有共同的父级）。[事务隔离文档](https://developers.google.com/appengine/articles/transaction_isolation)声明事务可以不应用，这意味着查询之后`put()`不会找到新实体。同样，您可以通过读取或祖先查询强制应用实体。

# objective-c - 许多类的 const 配置文件

> ID：13931291
> 
> 赞同：0
> 
> 时间：2012-12-18T10:48:01.927
> 
> 标签：objective-c, c

使用目标 c ，我有 2 个使用硬件的类，并用`c +objC`. 项目中的其他类是目标 c，它们创建这些类的实例。

我的问题 。

可以说我有`classA.m`和`classB.m`。他们都有一个需要相同的整数 const 说：`const int numOfSamples=7;`

我正在寻找创建一些配置文件的最佳解决方案，该文件将包含所有这些 const 变量，A 和 B 都可以看到它们。我知道一些方法，但我想知道正确的做法是什么。

1.  我想知道我是否可以创建一个 :`configuration.m`并将它们写入其中。
2.  使用`singleton`包含所有全局变量的文件。

数字 1 在我看来是最好的，但我应该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:53:53.380

要使方法 1 起作用，您需要定义两个文件：

1.  声明所有常量的头文件；

2.  定义和初始化常量的 .m 文件。

在您的示例中：

```
/* .h file */
extern const int numOfSamples;

/* .m or .c file */
const int numOfSamples = 7; 
```

然后，在需要这些常量的每个其他文件中包含 .h 标头。注意`extern`关键字，这将声明变量而不定义；这样，您可以多次包含 .h 文件而不会出现重复符号错误。

编辑：

我建议的方法是在 C 程序中处理全局变量的正确方法。

现在，如果全局变量是好事还是坏事，那是一个更长的故事。

一般来说，全局变量是棘手的，并且与 40 年来在程序中更好地封装（也称为信息隐藏）数据和行为的努力背道而驰（参见[“关于将系统分解为模块时使用的标准”](http://www.cs.umd.edu/class/spring2003/cmsc838p/Design/criteria.pdf)，David Parnas， 1972）。

为了进一步解释这一点，问题的一个方面正是您在评论中提到的：一个模块更改全局变量的值并因此影响程序的整体行为的可能性。这显然很糟糕，并导致无法控制的副作用（在任何非平凡的程序中）。

在你的情况下，我认为事情有点不同，因为你在谈论“配置”和“常量”值。这是与一般情况完全不同的情况，我认为您可以安全地使用 consts 的头文件来实现这一目标。

也就是说，您了解配置的整个主题通常是一个巨大的主题。例如，您可能需要动态更改程序配置的机制；在这种情况下，常量变量标题方法将不正确。或者，您的程序配置可能取决于某个远程系统的状态（想象一下：您已登录与未登录）。

我不能保证使用头文件是您情况的最佳方法，但我希望上述讨论和我给您的示例可以帮助您解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:53:37.793

我认为最好的方法是使用`plist`包含所有配置值的文件。

如果您的配置值很少，则可以使用该`Info.plist`文件。

# android - 我可以在没有可绘制资源的情况下创建自定义 Seekbar

> ID：13931295
> 
> 赞同：0
> 
> 时间：2012-12-18T10:48:10.753
> 
> 标签：android, xml, seekbar

我创建了一个使用 LayerList 的自定义 SeekBar。我没有使用可绘制资源。

它[在这里](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)说我的“项目”......

> 可绘制资源。**必填**。对可绘制资源的引用。

如果我不为此项目创建可绘制资源，我会遇到任何问题吗？

**custom_seek_bar.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@android:id/bkg">
        <shape>
            <corners android:radius="12dp" />
            <solid
                android:color="@color/white" />
        </shape>
    </item>
    <item android:id="@android:id/prog">
        <clip>
            <shape>
                <corners android:radius="12dp" />
            <solid
                android:color="@color/blue" />
            </shape>
        </clip>
    </item>

</layer-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:57:35.963

正如文档所说：

LayerDrawable 是一个可绘制对象，用于管理一系列其他可绘制对象。

Java代码中的等价物是Layer Drawable。（[http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html)）

因此，如果没有资源，它可能不会接受。将这样一个通用名称（图层列表）赋予仅与可绘制对象相关的东西确实是一个坏主意。

希望对您有所帮助！

# extjs - 如何根据 Extjs 4 中的用户操作动态更新网格单元格颜色和工具提示？

> ID：13931296
> 
> 赞同：0
> 
> 时间：2012-12-18T10:48:13.107
> 
> 标签：extjs, grid, tooltip, cell, background-color

基于用户操作，例如单击按钮，我们需要更新网格单元并修改其背景颜色和工具提示。

请注意，它只能是网格记录的特定单元格，而不是影响所有记录的整个列。

因此，我们如何为特定的网格记录单元格（背景颜色和工具提示）动态更新这两个内容？

提前感谢您的帮助。

PS：ExtJs 版本 4.1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:08:57.813

我已经能够找到解决方案。虽然，不确定它是否是最好的方式，但将其发布在这里，因为它可能会帮助寻找相同的人。

解决方案是为需要更新的列编写自定义渲染器函数，并在需要更新的用户操作上调用以下代码（如在单击按钮的处理程序中）：

```
 grid.getView().refresh(); 
```

上面的代码将调用列渲染器函数，该渲染器函数应该能够根据当前应用程序的状态判断在网格列上应用哪种背景颜色和工具提示。

希望这可以帮助。

# javascript - javascript：在用户键入或更改文本框值时忽略无效输入

> ID：13931298
> 
> 赞同：-1
> 
> 时间：2012-12-18T10:48:18.927
> 
> 标签：javascript

> **可能重复：**
> [如何使用 jQuery 在 HTML 输入框中只允许数字（0-9）？](https://stackoverflow.com/questions/995183/how-to-allow-only-numeric-0-9-in-html-inputbox-using-jquery)

当用户在文本框中输入内容时，如何限制用户输入？

例如，我只想接受一个数字，并且只要输入非数字字符，我就想忽略用户输入。所以，

1.  如果用户输入无效字符，我需要保留现有值
2.  它应该能够处理任何其他输入更改情况（即打字、复制粘贴等）。

谢谢！！！罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:53:45.550

在文本框上使用 onKeyPress() 事件获取用户输入并根据需要进行相应处理。

要处理复制 + 粘贴场景，您可以通过 onChange() 事件处理进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:55:24.957

您可以使用表单的`onsubmit`事件在 javascript 中验证表单：

```
<form enctype="application/x-www-form-urlencoded" method="post" onsubmit="validate(this);">
    <input type="text" name="number" />
    <input type="submit" name="submit" value="send" />
</form> 
```

然后剩下的就是验证：

```
function validate(form) {
    if(isNaN(form.number.value)) {
        alert('not a number!');

        return false;
    }
} 
```

问题是，javascript 是在**客户端**运行的。这意味着人们可以轻松绕过这一点，因此您必须以任何一种方式检查服务器端。

如果您确定您的受众使用现代浏览器，您也可以使用 HTML5 元素`<input type="number" />`。但是话又说回来，这是客户端，您必须检查服务器端。

# vb.net - 与多个控件交互的子事件

> ID：13931302
> 
> 赞同：0
> 
> 时间：2012-12-18T10:49:06.523
> 
> 标签：vb.net, events, arguments, controls, sender

我想调用这个片段传递一个像参数一样的“控件名称”，然后子与所需的控件交互

我怎么能这样做？

这是片段：

```
#Region " Move a control in real-time "
    ' Change Textbox1 to the desired control name
    Private Sub TextBox1_MouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles textbox1.MouseDown
        If e.Button = Windows.Forms.MouseButtons.Left Then
            textbox1.Capture = False
            Dim ControlMoveMSG As Message = Message.Create(textbox1.Handle, &HA1, New IntPtr(2), IntPtr.Zero)
            Me.DefWndProc(ControlMoveMSG)
        End If
    End Sub
#End Region 
```

更新：解决方案：

```
Private Sub MoveControl(sender As Object, e As EventArgs) Handles _
        TextBox1.MouseDown, _
        TextBox2.MouseDown, _
        PictureBox1.MouseDown

    Dim control As Control = CType(sender, Control)
    control.Capture = False
    Dim ControlMoveMSG As Message = Message.Create(control.Handle, &HA1, New IntPtr(2), IntPtr.Zero)
    Me.DefWndProc(ControlMoveMSG)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:53:44.013

在这种情况下，您可以只使用`sender`. 该`sender`参数是对引发事件的任何控件的引用。因此，如果您将相同的方法添加为多个控件的事件处理程序，`sender`那么哪个控件会引发它当前正在处理的事件，例如：

```
Private Sub MouseDown(sender As Object, e As EventArgs) _
        Handles TextBox1.MouseDown, TextBox2.MouseDown
    ' Note in the line above that this method handles the event 
    ' for TextBox1 and TextBox2
    Dim textBox As TextBox = CType(sender, TextBox)
    ' textBox will now be either TextBox1 or TextBox2, accordingly
    textBox.Capture = False
    ' ....
End Sub 
```

该`CType`语句将基本参数强制转换`Object`为特定`TextBox`类。在此示例中，该方法仅处理`TextBox`对象的事件，因此可以正常工作。但是，如果您让它处理来自其他类型控件的事件，则需要转换为更通用的`Control`类型（即`CType(sender, Control)`）。

# asp.net-mvc - RenderAction 中可能使用部分？

> ID：13931303
> 
> 赞同：0
> 
> 时间：2012-12-18T10:49:11.060
> 
> 标签：asp.net-mvc

是否可以在通过 Html.RenderAction 呈现的视图中使用 @section {} 构造？
似乎不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:34:39.393

似乎它真的是设计使然：[https ://stackoverflow.com/a/7556594/309821](https://stackoverflow.com/a/7556594/309821)

# c# - 一些查询后实体框架变慢

> ID：13931307
> 
> 赞同：2
> 
> 时间：2012-12-18T10:49:19.663
> 
> 标签：c#, entity-framework, asp.net-mvc-4

我有一个代码：

```
foreach (var idObject in ids)
{
    var parsedIDs = ParseId(idObject.id);

    var integers = new Dictionary<string, int>() { { "model_id", model }, { "year", 2010 }, { "quarter", 1 }, { "month", 1 }, { "rows", rows }, { "page", page } };
    var strings = new Dictionary<string, string>() { { "gr_str", "" }, { "row_id", "" }, { "sidx", sidx }, { "sord", sord } };
    var additionals = new Dictionary<string, object>() { { "rowid", idObject.id },
                                {"contr_group_id_e", parsedIDs[0]},
                                {"nomencl_group_set1_id_e", parsedIDs[1]},
                                {"nomencl_group_set2_id_e", parsedIDs[2]},
                                {"workshop_id_e", parsedIDs[3]},
                                {"unit_meas_id_e", parsedIDs[4]},
                                {"plant_id_e", parsedIDs[5]} };

    foreach (var datePair in queryDates)
    {
        additionals["begin_date_e"] = datePair.Key;
        additionals["end_date_e"] = datePair.Value;

        var parameters = InitParams(integers, strings, additionals).ToArray();

        var lastTimestamp = DateTime.Now;

        var queryResults = ModelEntities.ExecuteStoreQuery<ReadyProductIndexes>(Queries.SaleIndexGetRowByID, "Sale", MergeOption.NoTracking, parameters).ToList();

        Debug.WriteLine("TIme: " + (DateTime.Now - lastTimestamp).TotalSeconds);
    }

    Debug.WriteLine("rowid " + idObject.id);
} 
```

有一个问题 -`foreach`第一步一切正常，但在第二步和其他查询开始工作非常缓慢（例如，第一步为 0.2 秒，第二步为 8 秒）。

我的代码有什么问题？

**编辑**：我尝试使用 MS SQL 探查器，并且有一些有趣的事情 - 探查器显示 8 秒的请求持续时间，但是当我尝试从探查器手动运行请求时，它运行得很快。这很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:24:28.043

我认为这里的问题是一个很常见的问题，因为您的 EF 上下文会增长，查询所需的时间会成倍增加。这是因为检测更改（在大多数 EF 操作上运行）会枚举 EF 当前跟踪的每个对象。这意味着如果您要跟踪数千个实体，则可能需要相当长的时间。从您的代码示例中很难分辨出这个问题出在哪里，但它非常适合这种模式。我建议查看 DbSet 上的 .Local 集合，以确认跟踪的项目很多。

我写了几篇关于这个的文章，你可以[在这里](http://blog.staticvoid.co.nz/2012/05/entityframework-performance-and.html)和[这里](http://blog.staticvoid.co.nz/2012/04/entity-framework-and-asnotracking.html)阅读。

所有这一切的结果是您希望**减少 EF 正在跟踪的东西的数量**（通过使用 .AsNoTracking 或通过减少调用检测更改）并且您的查询应该是好的和快速的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T02:47:30.030

通过`OPTION(RECOMPILE)`在查询末尾使用解决

# globalization - Sagepay 非英语支持

> ID：13931311
> 
> 赞同：0
> 
> 时间：2012-12-18T10:49:32.150
> 
> 标签：globalization, opayo

我们目前有一个与 sagepay API 的服务器集成，当需要输入卡详细信息时，用户将被重定向到 sage pay 网站，该网站以英文显示所有信息。有谁知道是否可以指定 sage pay 使用哪种语言在其网站上显示信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:48:22.363

据我所知，这将在下一个协议版本可用时可用。

问候。

# android - 如何在android中显示浮动小部件（编辑文本和按钮）

> ID：13931314
> 
> 赞同：1
> 
> 时间：2012-12-18T10:49:39.783
> 
> 标签：android, button, widget, android-edittext, floating

我想在 android 屏幕上显示浮动编辑文本和按钮，例如查看图像下方，当前屏幕上有 3 个编辑文本和 2 个按钮。我在网上搜索了很多，但一无所获。所以请任何人建议如何做到这一点，即使是一些链接也会很有用。

![在此处输入图像描述](../Images/f14f3885fe815ffd44d4c9dfffd7ea62.png)

没关系，如果小部件不透明，但它应该给人一种它们漂浮在我当前屏幕上的感觉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:22:13.657

弹出或自定义警报对话框可能会解决您的问题。

但简单的解决方案是在活动的 xml 中采用另一种布局。在该布局中添加那些编辑文本和按钮。将其可见性设置为 false。当你想显示时，让布局的可见性变为真。

# smtp - 我必须在弧中释放无弧对象吗？

> ID：13931319
> 
> 赞同：0
> 
> 时间：2012-12-18T10:49:46.857
> 
> 标签：smtp, automatic-ref-counting

我正在使用以非弧（SMTP 库 - 通过使用编译器标志使其保持非弧）编写的库。现在，我的一个类被注册为该库的委托，并且库正在向我传递保留计数为 1 的对象。弧前我应该释放这样的对象，但现在在弧中我不知道该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:22:19.770

请记住，如果类本身被释放，则在 ARC 之前，您必须在对象之前释放每个类的每个实例变量。ARC之前的规则说，

*   当您使用 new、alloc 或 copy 创建对象时，该对象的保留计数为 1。您有责任在完成后向该对象发送释放或自动释放消息。这样，当它的使用寿命结束时，它就会被清理干净。

*   当您通过任何其他机制获取一个对象时，假设它的保留计数为 1 并且它已经被自动释放。你不需要做任何进一步的工作来确保它被清理干净。如果您要在任何时间段内抓住该对象，请保留它并确保在完成后释放它。

*   如果您保留一个对象，您需要（最终）释放或自动释放它。平衡这些保留和释放。

因此，如果您要临时使用该对象（例如在单个函数的范围内），您什么也不做，但为了更长时间的使用，您可以保留它（将保留计数增加到 2）并在完成后释放它，初始保留计数为 1将是图书馆的工作要做。

# c++ - 带有整数键和向量的映射之间的区别

> ID：13931325
> 
> 赞同：4
> 
> 时间：2012-12-18T10:50:09.270
> 
> 标签：c++, stl, vector, key, std

向量是具有整数键的 unordered_map 的特殊形式吗？之所以如此，是因为向量也有整数键。

如果不是，有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T10:58:51.857

主要区别在于数据的存储方式。

A`vector`将数据存储在它调整大小的内部数组中，您可以添加更多元素。An`unordered_map`在内部使用哈希表。

实际上，a`vector`在后面为您提供了分摊的恒定时间插入（它需要不时调整大小和复制/移动所有内容），按索引进行恒定时间访问，以及线性时间插入和删除（所有后续元素都必须是转移）。此外，由于 a`vector`是连续的，您可以将它传递给期望 c 样式数组的函数。

`unordered_map`通过键为您提供摊销的常数时间查找（因为散列并不完美，并且冲突迫使查找遍历内部链表），摊销的常数时间插入和删除。

请参阅：[http](http://en.cppreference.com/w/cpp/container/unordered_map) ://en.cppreference.com/w/cpp/container/unordered_map 和：[http ://en.cppreference.com/w/cpp/container/vector](http://en.cppreference.com/w/cpp/container/vector)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T10:52:09.377

不， a 中的索引`vector`是连续的，在 a 中`map`它们不必是连续的。

此外， a`vector`中的值保证在连续内存中，而不是在 a 中`map`。

这两个意味着对两者的大多数操作具有不同的复杂性。

# iphone - NSpredicate 过滤具有子字符串的元素数组

> ID：13931335
> 
> 赞同：0
> 
> 时间：2012-12-18T10:50:42.930
> 
> 标签：iphone, cocoa-touch, nsarray, nspredicate

我已经编写了 NSPredicate 来过滤元素。

```
-(void)filterResult:(NSMutableArray*)array
{
    search=TRUE;
    filteredCategoryList=[[NSArray alloc]init];

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"roles beginsWith %@ ||     UserResponseDetails IN %@ ",array,array];
    filteredCategoryList = [MembersList filteredArrayUsingPredicate:predicate]; 
    [filteredCategoryList retain];
} 
```

问题是我在 Roles 中得到一个字符串，如“sample;Example”，而其他字符串是单个字符串。如何编写谓词条件以获取 Sample、Example、sample 和 Example 的元素。.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-23T12:50:53.760

我得到了一个解决方案，我必须在谓词中使用 'contains' 关键字而不是 'beginswith'。

# windows - 注册 comdlg32.dll 获取 Regsvr32: DllRegisterServer entry point was not found

> ID：13931337
> 
> 赞同：55
> 
> 时间：2012-12-18T10:50:47.353
> 
> 标签：windows, dll, regsvr32, common-dialog, comdlg32

我有 Windows 7、64 位。

我正在尝试使用 regsvr32 注册一个 .dll (comdlg32.dll)。但是我收到一条错误消息，指出已读取 dll 但找不到 DLLRegistryServer 入口点。

我已经在 System32 和 SysWOW64 下运行了该命令，并且我已经使用“以管理员身份运行”运行了我的命令。

我的旧 MSComDlg.CommonDialog 组件不再使用 64 位。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T08:58:21.073

comdlg32.dll 不是 COM DLL，无法注册。

自己确认这一点的一种方法是运行以下命令：

```
dumpbin /exports comdlg32.dll 
```

您会看到 comdlg32.dll 不包含`DllRegisterServer`方法。因此 RegSvr32.exe 将无法工作。

这就是你的答案。

* * *

ComDlg32.dll 是一个系统组件。（同时存在于 c:\windows\system32 和 c:\windows\syswow64 中）尝试替换它或用旧版本覆盖任何注册可能会损坏 Windows 的其余部分。

* * *

我可以提供更多帮助，但我需要知道 MSComDlg.CommonDialog 是什么。它有什么作用以及它应该如何工作？您要注册哪个版本的 ComDlg32.dll（以及您从哪里获得的）？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-19T09:09:00.153

comdlg32.dll 并不是真正的 COM dll（您不能注册它）。

您需要的是包含 MSComDlg.CommonDialog COM 类的 comdlg32.ocx（并且确实依赖于 comdlg32.dll 才能工作）**。**一旦你掌握了 comdlg32.ocx，你就可以做`regsvr32 comdlg32.ocx`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-07T20:40:15.720

为 Fundsite 注册 DLL

过时或缺少 comdlg32.ocx 运行时库可能是导致此错误的问题。确保 comdlg32.ocx 文件没有损坏，否则下载文件 comdlg32.ocx (~60 Kb Zip)。

下载文件并将 comdlg32.ocx 解压缩到您的 Windows\System32 文件夹或 Windows\SysWOW64。在我的情况下，我从 Windows\System32 开始，但最后没有用，所以我再次保存在 Windows\SysWOW64 中。

在“开始”、“运行”对话框中键入以下命令：“c:\windows>System32\regsvr32 Comdlg32.ocx”或“c:\windows>SysWOW64\regsvr32 Comdlg32.ocx”</p>

现在 Comdlg.ocx 文件已注册，下一步是注册 DLL

1.  复制 Fundsite.Text.Encoding。将 dll 放入路径 C:\Windows\Microsoft.NET\Framework64\v2.0.50727 下的 64 位 .Net Framework 文件夹中

2.  然后在命令提示符下并转到目录 C:\Windows\Microsoft.NET\Framework64\v2.0.50727 然后运行以下命令，如下所示。

这将成功注册 dll。

**C:\Windows\Microsoft.net\framework64\v2.0.50727>regasm "Dll Name".dll**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-04T04:12:22.383

您是否卸载了 Internet Explorer？我做到了，我遇到了同样的问题，如果是这样，你必须：

1.  重新激活 IE（控制面板 -- 程序和功能 -- 打开或关闭 Windows 功能）。
2.  重新启动计算机
3.  （重要！）运行 Windows 更新以获取 Microsoft Explorer 的所有可用更新
4.  重新启动计算机（再次）

终于成功了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-14T13:47:19.400

有关在 Windows 10 上安装旧版 VB6 编译应用程序时缺少入口点错误的信息，我希望这对某人有用。

可以在 Visual Basic 6.0 安装程序包的“OS\System 文件夹”中找到丢失的 OCX 文件。今天我将相关的OCX文件（从我们的网络）复制到本地计算机

然后我以管理员身份键入以下命令，通常可以注册它。

```
cd \windows\syswow64
regsvr32.exe /u mscomctl.ocx
regsvr32.exe /i mscomctl.ocx 
```

（为 /i 命令添加本地复制文件的路径）

但是今天我从这两个 regsvr32.exe 命令中得到了错误。

第二个错误是给出 DllImport 缺少入口点错误，这与原始海报提到的错误相似。

为了解决这个问题，我尝试过的其中一件事是省略了开关 -

```
regsvr32.exe mscomctl.ocx 
```

令我惊讶的是，它然后说它是成功的。为了确认，应用程序随后正常启动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-12T13:48:39.307

我在 Windows 10 和 Visual Studio 2010 中遇到了与 COMDLG32.OCX 和 MSFLXGRD.OCX 相同的问题。它是一个 MFC 应用程序。

然后我从谷歌下载了它的 zip 文件，然后在以下路径解压复制它们：

```
C:\Windows\System32 (*For 32-bit machine*)
C:\Windows\SysWOW64 (*For 64-bit machine*) 
```

***然后以管理员***身份运行命令提示符，然后运行以下命令：

```
For Windows 64-bit systems c:\windows\SysWOW64\ regsvr32 comdlg32.ocx
c:\windows\SysWOW64\regsvr32 msflxgrd.ocx (My machine is 64-bit configuration) 
```

对于 Windows 32 位系统 c:\windows\System32\ regsvr32 comdlg32.ocx

c:\windows\System32\regsvr32 msflxgrd.ocx

在成功更新上述 cmds 时，它会显示成功消息。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2013-12-17T11:30:22.660

我在 Windows 7 中注册 myinfo.dll 文件时也遇到了类似的问题。以下为我工作：在桌面上创建快捷方式 C:\Windows\System32\regsvr32.exe c:\windows\system32\myinfo.dll 右键单击在刚刚创建的快捷方式上，选择以管理员身份运行。

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2013-03-11T14:50:50.680

Regsvr32 的解决方案：找不到 DllRegisterServer 入口点，

1.  转到systemdrive（通常为c:)\system32并搜索文件“Regsvr32.exe”
2.  右键单击并单击属性，然后转到安全选项卡并单击高级按钮。
3.  单击所有者选项卡，然后单击编辑并选择管理员，然后单击确定。
4.  点击权限
5.  点击更改权限。
6.  选择管理员并单击编辑并勾选完全控制并单击确定。
7.  同样，选择 SYSTEM 并编辑并在完全控制上打勾，然后单击确定，然后在打开的其他对话框中单击。
8.  现在.dll文件可以注册并且没有错误了，你应该重新安装任何在安装过程中没有注册dll文件的软件。

# javascript - 图像颜色选择器 - HTML5 Canvas 安全错误？

> ID：13931338
> 
> 赞同：0
> 
> 时间：2012-12-18T10:50:49.063
> 
> 标签：javascript, html, canvas, same-origin-policy

我正在尝试将这个东西与跨域图像一起使用：[http ://www.script-tutorials.com/demos/158/index.html](http://www.script-tutorials.com/demos/158/index.html)

但是同源策略阻止我使用该[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

抛出的错误： ![在此处输入图像描述](../Images/9a78a964d48f7dbd69e2fd1efad4dd09.png)

有没有办法将图像颜色选择器与外部图像一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:56:22.487

看看[这个插件](http://www.maxnov.com/getimagedata/)。这很像 hack，但是当你做一些标准不认可的事情时，这就是你所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:04:35.550

要为您的图像启用 CORS（跨源资源共享），请将 HTTP 标头与图像响应一起传递：

访问控制允许来源：*

如果您无法在图像服务器上更改它，则将该图像复制到您的其中一台服务器。

如果服务器支持，您也可以使用 JSONP。

# google-chrome - 用自定义内容替换 URL 的工具

> ID：13931341
> 
> 赞同：1
> 
> 时间：2012-12-18T10:50:53.243
> 
> 标签：google-chrome, google-chrome-extension, firefox-addon, developer-tools

是否有开发工具或 Chrome / Firefox 扩展程序可以让您用我自己的自定义内容替换特定 URL 的内容？

我不是在寻找一个简单的 /etc/hosts 文件更改，因为我想替换一个 URL，而不仅仅是一个域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T14:35:19.510

在 Chrome 扩展程序中，[`webRequest`](https://developer.chrome.com/extensions/webRequest.html)API 可用于将 URL 重定向到不同的 URL。这个其他 URL 可以是另一个在线页面，也可以是您的 Chrome 扩展程序中的一个页面。
API的一个简单示例`webRequest`以及其他选项的列表可以在[这个答案](https://stackoverflow.com/questions/12065029/chrome-redirect-extension/12070823#12070823)中找到。

注意：如果您只想在特定页面上添加/更改某些内容，[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)可能更合适。然后，您可以通过标准 DOM 方法更改特定页面的内容。

在 Firefox 中，您可以使用[Addon SDK](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/)[`page-mod`](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/page-mod.html)的模块来实现 Content 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:47:12.617

[chrome.tab API](https://developer.chrome.com/extensions/tabs.html)将允许您对窗口中的选项卡进行任何相关更改。

## 参考：

[a) 选项卡 API](https://developer.chrome.com/extensions/tabs.html)

[b) 基本 Chrome 扩展架构。](https://developer.chrome.com/extensions/overview.html)

您可以参考此示例扩展，将当前选项卡中的所有 URL 更改为[Google.co.in](https://www.google.co.in/)

### 清单.json

*这是我们注册所有 chrome 扩展内容的核心文件，确保它具有所有权限。*

```
{
"name":"Tabs Demo",
"description":"This Demonstrates Demo of Tabs",
"browser_action":{
"default_icon":"screen.png",
"default_popup":"popup.html"
},
"permissions":["tabs"],
"manifest_version":2,
"version":"1"
} 
```

### popup.html

引用 JS 文件以传递 CSP 的普通 HTML 文件。

```
<!doctype html>
<html>
<head>
<script src="popup.js"></script>
</head>
<body>
</body>
</html> 
```

### popup.js

```
function tabsfunction() {
    //fetching all tabs in window
    chrome.tabs.getAllInWindow(function (tabs) {
        // Iterating through tabs
        for (tab in tabs) {
            //Updating each tab URL to custom url 
            chrome.tabs.update(tabs[tab].id, {
                "url": /*You can place any URL you want here*/
                "https://www.google.co.in/"
            }, function () {
                //Call back
                console.log("Completed");
            });
        }
    });
}
//Binging a function on document events 
document.addEventListener("DOMContentLoaded", tabsfunction); 
```

如果您需要更多信息，请与我们联系。

# php - 为什么贝宝沙箱不重定向？

> ID：13931342
> 
> 赞同：1
> 
> 时间：2012-12-18T10:51:00.447
> 
> 标签：php, html, paypal

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="POST">

                    <input type="hidden" name="invoice" id="" value="<?php echo $pay_data['order_id']; ?>" />
                    <input type="hidden" name="cmd" value="_xclick">
                    <input type="hidden" name="business" value="mymail@gmail.com">
                    <input type="hidden" name="item_name" value="suite number">
                    <input type="hidden" name="item_number" value="1">
                    <input type="hidden" name="amount" value="<?php echo $pay_data['amount']; ?>">
                    <input type="hidden" name="no_shipping" value="1">
                    <input type="hidden" name="no_note" value="1">
                    <input type="hidden" name="currency_code" value="USD">
                    <input type="hidden" name="lc" value="US">  
                    <input type="hidden" name="bn" value="PP-BuyNowBF">

                    <input type="hidden" name="return" value="<?php echo base_url()."/home/paypal_subscripton"; ?>">
                    <input type="hidden" name="cancel_return" value="<?php echo base_url(); ?>">

                    <input type="hidden" name="notify_url" value="<?php echo base_url(); ?>" />

                    <input type="submit" value="Donate!" />
                </form> 
```

我使用此代码成功付款。但页面没有重定向到我的网站？我的代码有什么问题？

```
amount: 1
bn: PP-BuyNowBF
business:   mymail@gmail.com
cancel_return:  http://localhost/ebin/Spacelance/
cmd:    _xclick
currency_code:  USD
invoice:    50d04dd5ab186
item_name:  suite number
item_number:    1
lc: US
no_note:    1
no_shipping:    1
notify_url: http://mydomain/ebin/Spacelance/
return: http://mydomain/ebin/Spacelance/home/paypal_subscripton 
```

这是发送到贝宝的参数（来自萤火虫）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-03T23:14:07.430

如果您使用的按钮看起来像您，Paypal 只会重定向拥有 Paypal 帐户的用户。这就是他们的文档所说的：

> **注意：**如果您开启了自动退货并选择为新用户开启 PayPal Account Optional，新用户将不会被自动引导回您的网站，但可以选择退货。

所以我所做的就是创建一个页面，在该页面上我会在交易完成后显示点击“返回网站”链接的说明。尽管这是一种非常低效的处理方式。

来源：www.sandbox.paypal.com/?cmd=p/pop/express_return_learn_more

# ruby-on-rails - 使用 Guard 在备用端口上启动 Rails 应用程序

> ID：13931346
> 
> 赞同：0
> 
> 时间：2012-12-18T10:51:11.130
> 
> 标签：ruby-on-rails, guard

我正在使用 Guard，但似乎没有办法指定默认 3000 以外的备用端口。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:56:17.463

你可以使用[护栏](https://github.com/johnbintz/guard-rails)

```
guard 'rails', :port => 5000 do
  watch('Gemfile.lock')
  watch(%r{^(config|lib)/.*})
end 
```

# android - 将颜色更改为 ListView 中未选中项的默认值

> ID：13931349
> 
> 赞同：0
> 
> 时间：2012-12-18T10:51:22.927
> 
> 标签：android, android-layout, android-listview, android-ui

我想将`TextView`in的颜色更改`ListView`为主题默认值，但现在它具有不同的“未选择”颜色（在我的情况下为灰色而不是白色）。我尝试了以下代码来选择主题默认颜色，但它给了我一个错误`Binary XML file...`

```
<TextView
    android:id="@+id/botText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="17sp"
    android:paddingTop="2dp"
    android:paddingBottom="5dp"
    android:textColor="?android:attr/textColor"
/> 
```

# c# - mysql fatal error, but i think i did every thing right

> ID：13931354
> 
> 赞同：0
> 
> 时间：2012-12-18T10:51:39.377
> 
> 标签：c#, mysql, sql

I used this code, but it shows fatal error and didn't give any information about error.

> Fatal error encountered during command execution.
> 
> MySql.Data.MySqlClient.MySqlException was unhandled by user code Message=Fatal error encountered during command execution. Source=MySql.Data ErrorCode=-2147467259 Number=0 StackTrace:

Here is my code. I didn't show "connect" code because I call from outside. It worked fine with previous query method.

```
public int insertRateToDB(string tableName, double rate, int cid, int subGroup)
{         
    sql = "UPDATE " + tableName + " SET rate = @rate, subGroup = @subGroup WHERE id = @cid;";
    MySqlCommand cmd = new MySqlCommand(sql,connect);
    cmd.Prepare();
    cmd.Parameters.AddWithValue("@percent", rate);
    cmd.Parameters.AddWithValue("@subGroup", subGroup);
    cmd.Parameters.AddWithValue("@cid", cid);
    int result = cmd1.ExecuteNonQuery();
    return result;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:53:15.090

You need `@rate` parameter in the list not `@percent`

```
//cmd.Parameters.AddWithValue("@percent", rate);
cmd.Parameters.AddWithValue("@rate", rate); 
```

# string - Delphi：从 6 升级到 XE2 - TStringList

> ID：13931357
> 
> 赞同：0
> 
> 时间：2012-12-18T10:51:49.650
> 
> 标签：string, delphi, unicode, upgrade, tstringlist

我们必须升级到 XE2（从 Delphi6）。

我收集了很多关于此的信息，但其中一个对我来说并不清楚。

我们正在使用 String - XE 中的 AnsiString 是什么。

据我所知，我们必须替换库中的所有 (P)Ansi[String/Char] 以避免 Unicode 转换的副作用，并且我们可以编译我们的项目。

没关系，但我们也在使用 TStringList，而且我没有找到任何 TAnsiStringList 类来简单地更改它...... ;-)

你对此有什么了解？这也会引起问题吗？或者这个类可以选择保留字符串？

（好吧，貌似是3道题，其实只有1道题）

程序/操作系统语言是匈牙利语，字符集是WIN-1250，有一些奇怪的字符，如Ő和Ű...

感谢您提供的所有信息、链接等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:00:28.030

1) 首先 - 为什么你应该使用 AnsiStringList，而不是将你的所有项目都转换为支持 unicode 的 TStringList？这应该有某些详细的原因，以提出可行的替代方案。

Unicode 是 windows-1250、windows-1251 等的超集。通常，所有特定于语言环境的字符串都会无损地转换为 Unicode。IT 正好相反，Unicode 到 AnsiString，转换可能会丢失数据。显式或隐式（如“if char-var in char-set”中的 AnsiChar 缩减）

您可能在 DLL 中具有类型不安全的 API，其中编译器无法检查您是否传递 PChar 或 PAnsiChar，但无论如何您不应该将诸如 TStrings 的对象传递到 DLL，为此有 BPL。

所以你可能只是不需要 TAnsiStringList

2）你可以从绝地代码库中获取 TJclAnsiStringList

3) 您可以使用 XE2 库存`TList<AnsiString>`类型

# wget - wget页面并插入源域

> ID：13931364
> 
> 赞同：0
> 
> 时间：2012-12-18T10:52:17.297
> 
> 标签：wget

我正在尝试创建一个简短的脚本来在另一台服务器上缓存动态生成的网页。

我只想要一页所以使用

```
wget http://domain/file 
```

可能就足够了，但文件包含相对链接，这些链接在主机上无效。

关于用指向原始服务器/域的绝对链接替换相对链接的简单方法有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:10:33.657

您正在寻找以下`-k`选项：

> *   下载的文件将被更改为引用它们指向的文件作为相对链接。
> *   未下载的文件将被更改为包括主机名和它们指向的位置的绝对路径。

# c - 链接到静态库的多个版本

> ID：13931368
> 
> 赞同：7
> 
> 时间：2012-12-18T10:52:34.347
> 
> 标签：c, linux, linker, cmake

我的项目链接到静态库 libA.a 版本 1。

此可执行文件还链接到另一个静态库 B。B 链接到 A，但版本 2。

A 的版本 1 和 2 中的两个符号集是相同的。如果我知道我的项目和 B 之间没有共享与 A 有任何关系的东西，这是否可行？

我设法手动链接它，它似乎工作（也许有我不知道的陷阱）。

我不能使 lib B 成为共享对象，或将 A 用作共享对象。实际上，我只知道 B 在静态使用 A，因为我与写 B 的人交谈过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:27:43.267

我有待纠正，但似乎您可以通过仔细的编译过程和明智地使用 objcopy 来完成您想要的。您应该遵循的步骤是：

1.  编译 A 的第 2 版。
2.  针对 A2 编译库 B。
3.  将 B 和 A2 合并到单个库 C 中（有关讨论，请参见此[页面）。](https://groups.google.com/forum/?fromgroups=#!topic/comp.unix.programmer/Mz1Bw5r9CrU)
4.  通过使用 objcopy 创建 C2，本地化 A2 中存在于 C 中的所有符号。使用`objcopy --localize-symbols infile outfile`，并[在此处](http://sourceware.org/binutils/docs/binutils/objcopy.html)查看详细信息。
5.  编译 A 的版本 1。
6.  编译您的应用程序 (P)。
7.  链接 P A1 和 C2。

我在实践中从未这样做过，但所有构建块似乎都已到位。第 4 步是最难的，因为您必须识别所有冲突的符号——可能需要手动识别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:20:08.757

关于您问题的“链接”部分，实际上静态库没有链接在一起。仅执行链接步骤以获得最终的可执行文件。

实际上，您使用 A（版本 2）的标头**编译**了静态库 B。然后，您将可执行文件与 B 和 A（版本 1）库链接。

只要 A 的两个版本中的符号相同，就不存在编译问题。但是您必须知道您的可执行文件实际上只嵌入和使用 A 的版本 1。

# c++ - CMake：如何检查是否已定义某些标志

> ID：13931372
> 
> 赞同：1
> 
> 时间：2012-12-18T10:52:47.130
> 
> 标签：c++, cmake

我在 CMakeLists 文件中有类似的内容：

```
set(CMAKE_CXX_FLAGS "-g -Wextra -DFLAG1=A") 
```

稍后在文件中，我需要检查是否`FLAG1`已定义。有可能做这样的事情吗？

```
IF(${FLAG1} EQUAL A)
    #Do something
ELSE()
    #Do something else
ENDIF() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:00:47.830

好吧，你可以做

```
set(FLAG1 A)
set(CMAKE_CXX_FLAGS "-g -Wextra -DFLAG1=${FLAG1}")
...
if(${FLAG1} STREQUAL A)
... 
```

# ios - iOS 拉丁语本地化

> ID：13931378
> 
> 赞同：0
> 
> 时间：2012-12-18T10:53:17.670
> 
> 标签：ios, xcode, localization

[总结在这里。](http://thejoysofcode.com/post/35197031533/when-i-try-to-manage-the-coding-of-special-characters)

我们有一个包含拉丁语言环境的医疗应用程序。在最新的 Xcode 上，我无法将其添加为项目的本地化。漏洞？不可能？我们如何将拉丁语作为语言环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:57:30.780

在项目导航器中单击项目文件。

然后选择项目文件。

在那里，您可以选择添加您需要支持的语言。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:28:14.267

iOS 没有将拉丁语列为可用语言（常规 > 国际 > 语言），因此即使您能够在 XCode 项目中添加拉丁语本地化，也无法使用它。除非您打算提供自己的应用内语言切换？

顺便说一句，不要学究，但拉丁语不是语言环境，而是一种语言。

# php - MySQL 添加到查询会使现有部分无效

> ID：13931385
> 
> 赞同：1
> 
> 时间：2012-12-18T10:53:27.560
> 
> 标签：php, mysql, sql

数据库：

*   xx_users (id, name, user_id, email, location)
*   xx_questions (id, question, description, user_id)

原始代码：

```
$friends = $facebook->api('/me/friends');
$arr= $friends['data'];
$friend_ids_arr = array();
foreach($arr as $friend) {
    $friend_ids_arr[] = $friend['id'];
}

$sql = "SELECT * FROM xx_questions WHERE user_id IN (" . implode(',', $friend_ids_arr) . ") OR user_id = '$user' ORDER BY time DESC"; 
```

新代码：

```
$friends = $facebook->api('/me/friends');
$arr= $friends['data'];
$friend_ids_arr = array();
foreach($arr as $friend) {
    $friend_ids_arr[] = $friend['id'];
}
    $sql = "SELECT *
    FROM xx_questions q JOIN xx_users u ON
        q.user_id = u.user_id
    WHERE q.user_id IN (implode(',', $friend_ids_arr)) OR // STEP 1
        q.user_id = '$user' OR // STEP 2
        u.location = (SELECT location FROM xx_users WHERE user_id = $user) // STEP 3
    ORDER BY q .time DESC";

    $data = mysql_query($sql) or die(mysql_error());
    while ($row = mysql_fetch_assoc($data)) {
        echo $row[id];
        } 
```

如果出现以下三种情况中的任何一种，我正在尝试从 xx_questions（已由用户发布）中选择问题：

1.  发帖人的 user_id 与当前用户的其中一位朋友的值匹配的值（即发帖人和用户是朋友）
2.  发布者的 user_id 与用户的值匹配的那些值（即发布者是用户）
3.  发布者的位置与当前用户的位置匹配的那些值（即发布者和用户当前在同一城市）

我最初已经完成了第 1 步和第 2 步，但是当我添加第 3 步时，会发生两件事：

1.  第 1 步停止工作（即只返回来自当前用户和同一城市的人的帖子）
2.  while 循环中的`$row[id]`回显是 xx_users，而不是 xx_questions。我试过`$row[q.id]`但无济于事。

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:08:48.240

在您的几秒钟内查询您的内爆语句不在字符串之外。

```
"WHERE q.user_id IN (implode(',', $friend_ids_arr)) OR" // STEP 1 
```

虽然 php 可以将变量添加到双引号字符串（`$x = "test $test test"`$test 将更改为 $test 的值），但它不能转义函数。所以这将返回

```
"WHERE q.user_id IN (implode(',', Array)) OR" // STEP 1 
```

你应该使用：

```
"WHERE q.user_id IN (".implode(',', $friend_ids_arr).") OR" // STEP 1 
```

最后你正在使用`SELECT *`，如果两个表都有一个 Id 列，则只返回一个。最好`SELECT q.*`仅用于获取问题行，或者`SELECT q.*, u.location`从用户表中获取整个问题行和位置。

我还检查了你的查询，它应该做你想做的事

```
$sql = "SELECT q.*, u.location
            FROM xx_questions q 
            JOIN xx_users u 
            ON q.user_id = u.user_id
            WHERE q.user_id IN (".implode(',', $friend_ids_arr).") OR // STEP 1
            q.user_id = $user OR // STEP 2
            u.location = (SELECT location FROM xx_users WHERE user_id = $user) // STEP 3
            ORDER BY q.time DESC"; 
```

我唯一改变的是`implode`并删除 '' 周围`$user`。那是因为 $user 实际上不是一个整数，而是一个包含数字的字符串，但附加了一些额外的空格（例如 '1' 而不是 '1'）；

# javascript - 在 Magento 中扩展扩展 (SCP) 会导致 JS 错误？

> ID：13931386
> 
> 赞同：0
> 
> 时间：2012-12-18T10:53:28.013
> 
> 标签：javascript, magento

我不认为这是一个实际的 JS 错误，但症状与 JS 相关。我有一个带有 SCP（简单可配置产品）的 Magento 1.7.0.2 安装，它可以 100% 地按我的意愿/预期工作。在我早期的开发中，我向 SCP 模块中的 1 个特定文件添加了一些方法，`app/code/community/OrganicInternet/SimpleConfigurableProducts/Catalog/Model/Product/Type/Configurable.php`.

使用 SCP 模块中的这些方法，一切正常，但是我现在意识到我真的应该在本地代码池中创建一个额外的模块来扩展 SCP 并将我的额外方法放在那里。所以我创建了 Bendart_Matrix。我从 SCP 中删除了 3 种方法，`Configurable.php`并将它们放在我自己的模块中，`app/code/local/Bendart/Matrix/Catalog/Model/Product/Type/Configurable.php`. 虽然页面仍在加载，但似乎存在一些 JS 错误，这些错误最终与`Product`未正确创建 JS 对象有关。它不会`.Options`像我的方法是 SCP 的一部分那样使用该方法创建。

我找不到一个合乎逻辑的原因，所以我创建了我的模块的一些要点（Configurable.php、config.xml 和 Bendart_Matrix.xml）以及来自 SCP 的相同文件。再一次，如果我禁用或删除我的模块并将方法切换回 SCP 文件，它就可以工作。诡异的？

SCP config.xml：[https ://gist.github.com/4327015](https://gist.github.com/4327015)

SCP 模块声明 XML：[https ://gist.github.com/4327012](https://gist.github.com/4327012)

SCP Configurable.php（减去我文件中的方法：[https ://gist.github.com/4326996](https://gist.github.com/4326996)

我的 config.xml：[https ://gist.github.com/4326988](https://gist.github.com/4326988)

我的模块声明 XML：[https ://gist.github.com/4326986](https://gist.github.com/4326986)

我的 Configurable.php（只是有问题的方法）：[https ://gist.github.com/4326909](https://gist.github.com/4326909)

感谢任何帮助或建议，因为我想正确地做到这一点并从 SCP 模块中删除我的方法，但似乎有一些我错过的依赖关系或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:30:10.810

根据您发布的信息，我认为最可能的问题是您在布局更新中进行了更改，删除了所需的模板。在这种情况下，您似乎正确地扩展了模块并且通常与模板相关的 JS 错误。

*PS Slight 注意，今天早上我们注意到，如果有人从愿望清单页面将可配置产品添加到他们的购物篮中，SCP 将无法正常运行（它同时添加了可配置产品和简单产品，这对您来说可能无关紧要，但是我们自定义的导出和 adminhtml 更新这导致了问题）。如果您启用了愿望清单，您应该记住这一点。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:19:01.933

好的，感谢@Cags，我已经解决了一个问题。

我注意到，与我的实时工作版本相比，没有包含关于 scpoptions.phtml 的模板提示。我添加了以下几行（取自`simpleconfigurableproducts.xml`）

```
 <reference name="product.info.options">
        <action method="setTemplate"><template>catalog/product/view/scpoptions.phtml</template></action>
    </reference> 
```

这修复了关于 Product.Options 的所有 JS 警告以及我遇到的任何其他警告。一旦我开始选择自定义选项等，它还确保产品价格正确更新。

现在，最后一期，当我加载产品页面时，在我选择任何东西之前，价格显示为 0.00。一旦我选择了一个下拉菜单，价格就会“开始”并从那里开始工作，它似乎只是初始页面加载。我已经将模板文件与我的工作站点（但没有我的模块）进行了比较，所以这与包含我的模块有关，但是什么？

干杯。

# linq - 使用 LINQ to XML 对节点值求和

> ID：13931387
> 
> 赞同：1
> 
> 时间：2012-12-18T10:53:28.053
> 
> 标签：linq, linq-to-xml

示例 XML：

```
<PTC_FareBreakdowns>
  <PTC_FareBreakdown>
    <PassengerTypeQuantity Code="ADT" Quantity="1" />
    <FareBasisCodes>
      <FareBasisCode>RGOSAVE</FareBasisCode>
    </FareBasisCodes>
    <PassengerFare>
      <BaseFare Amount="4400" CurrencyCode="INR" />
      <Taxes>
        <Tax Amount="233" CurrencyCode="INR" TaxCode="OC" TaxGroupCode="SF" TaxGroupName="Taxes &amp;amp; Fees" />
        <Tax Amount="218" CurrencyCode="INR" TaxCode="OC" TaxGroupCode="SF" TaxGroupName="Taxes &amp;amp; Fees" />
        <Tax Amount="3500" CurrencyCode="INR" TaxCode="YQ" TaxGroupCode="SF" TaxGroupName="Taxes &amp;amp; Fees" />
        <Tax Amount="440" CurrencyCode="INR" TaxCode="OC" TaxGroupCode="SF" TaxGroupName="Taxes &amp;amp; Fees" />
        <Tax Amount="173" CurrencyCode="INR" TaxCode="OC" TaxGroupCode="SF" TaxGroupName="Taxes &amp;amp; Fees" />
        <Tax Amount="0" TaxCode="B2BMarkup" />
      </Taxes>
      <TotalFare Amount="8964" CurrencyCode="INR" />
      <Markups>
        <Markup Amount="0.0000" CurrencyCode="INR" Description="0.0  for client - 26472" MarkupCode="DisplayMarkup" Type="M" />
        <Markup Amount="0" CurrencyCode="INR" Description="0.0 % on base fare  for client - " MarkupCode="DisplayMarkup" MarkupType="M" Type="M" />
        <Markup Amount="0" Description="0.0% on fule surcharge  3500.0for client" MarkupCode="DisplayMarkup" MarkupType="M" Type="M" />
      </Markups>
    </PassengerFare>
  </PTC_FareBreakdown>
</PTC_FareBreakdowns> 
```

LINQ，到目前为止我已经尝试过，

```
 var Adult = from Main in xd.Descendants(ns + "PTC_FareBreakdown")
              from Sub1 in Main.Elements(ns + "PassengerTypeQuantity")
              where Sub1.Attribute("Code").Value == "ADT"
              from Sub2 in Main.Elements(ns + "PassengerFare").Elements(ns + "Taxes").Elements(ns + "Tax")
              where Sub2.Attribute("TaxCode").Value == "OC"
              select new
              {
                  OC = Sub2.Attributes("Amount").Sum(nd => Int32.Parse(nd.Value)),
              }; 
```

它返回值为 233,218,440 和 173。**但它必须返回所有值的总和 [233+218+440+173=1064]。**

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:00:15.540

```
 var query = xd.Descendants(ns + "PTC_FareBreakdown")
               .Elements(ns + "PassengerFare")
               .Elements(ns + "Taxes")
               .Elements(ns + "Tax")
               .Where(tax => (string)tax.Attribute("TaxCode") == "OC") 
               .Sum(tax => (int)tax.Attribute("Amount")); 
```

结果：`1064`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T13:15:21.807

@lazyberenzovsky 使用 LINQ 关键字语法的回答：

```
var Adult = (
    from tax in xd.Descendants("PTC_FareBreakdown")
                   .Elements("PassengerFare")
                   .Elements("Taxes")
                   .Elements("Tax")
    where (string)tax.Attribute("TaxCode") == "OC"
    select (int)tax.Attribute("Amount")
).Sum(); 
```

当然，您可能只使用：

```
var Adult = (
    from tax in xd.Descendants("Tax")
    where (string)tax.Attribute("TaxCode") == "OC"
    select (int)tax.Attribute("Amount")
).Sum(); 
```

如果这是您在 XML 中唯一拥有`Tax`元素的地方。

# objective-c - 循环在 Interface Builder 中设置的布局

> ID：13931389
> 
> 赞同：1
> 
> 时间：2012-12-18T10:53:31.913
> 
> 标签：objective-c, ios, xcode, layout

我只需要有人指出我应该如何做事的正确方向。我想制作一个类似于 Windows Phone 界面的 iOS 新闻类应用。分别代表一个新闻项目的大小图像图块。现在我正在考虑在情节提要中创建一些基本布局，其中包括例如标题和 3 个不同大小的图块/图像（附加图像上的灰色部分）。现在，我将数据作为一个包含不同新闻类别的 JSON 数组获取，所以我想知道是否可以在 for 循环中重用设置的布局，因为布局只会重复自身（附件图像上的红色部分) 并且只有数据会有所不同。![重复布局](../Images/673dcaabba0e135a19f17e802afca7e7.png)

可以做到这一点，我应该尝试做这样的事情，还是应该尝试以编程方式创建整个布局？我不介意以编程方式进行，只是我没有太多以这种方式创建布局的经验，并且想确保我不会做一些我以后可能会后悔的事情。感谢您的任何帮助和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:02:02.620

有可能，创建三个不同的类 UIView 子类来保存三个不同的图块，然后根据新闻类别，您可以添加一个子类 UIView。

```
if(category == NORMALSIZE) {
    TileView1 *tileView = (TileView1 *)[[[NSBundle mainBundle] loadNibNamed:@"TileView1" owner:self options:nil] objectAtIndex:0];
    [self.view addSubview:tileView];
}
else if(category == MEDIUMSIZE) {
    TileView2 *tileView = (TileView2 *)[[[NSBundle mainBundle] loadNibNamed:@"TileView2" owner:self options:nil] objectAtIndex:0];
    [self.view addSubview:tileView];
}
else {
    TileView3 *tileView = (TileView3 *)[[[NSBundle mainBundle] loadNibNamed:@"TileView3" owner:self options:nil] objectAtIndex:0];
    [self.view addSubview:tileView];
} 
```

# android - Button 的 Android 网格。使用线程“激活”它

> ID：13931390
> 
> 赞同：1
> 
> 时间：2012-12-18T10:53:32.357
> 
> 标签：android, multithreading, android-asynctask

```
package com.example.prova;

import java.util.Enumeration;
import java.util.Hashtable;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.graphics.Color;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class ScassaLaTalpa extends Activity 
         implements android.view.View.OnClickListener, 
                    TextWatcher {

    int life = 3;
    public static int NUMBER_OF_CELLS = 16;
    Hashtable<Integer, Button> buttons = 
                    new Hashtable<Integer, Button>();
    TextView lose;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_play);

        buttons = populateGrid(buttons);
        Enumeration<Integer> keys = buttons.keys();

        while(keys.hasMoreElements()){
         Integer key = (Integer) keys.nextElement();
            Button btn = buttons.get(key);
            btn.setText("");
            btn.setOnClickListener(this);
        }

      lose = (TextView) findViewById(R.id.lose);
      lose.addTextChangedListener(this);
      lose.setText(life + "");
      SpawnButton sb = new SpawnButton();
      sb.execute();
   }

   class SpawnButton extends AsyncTask<Void, Button, String> {

      @Override
      protected String doInBackground(Void...voids) {
         Button randomBtn= null;

         while(life > 0){
            int randomBtnNumber = (int) (Math.random() * 16);
            randomBtn= buttons.get(randomBtnNumber );
            publishProgress(randomBtn);
            try {
               Thread.sleep(1500);
            } catch (InterruptedException e) {
               // TODO Auto-generated catch block
               e.printStackTrace();
            }
    publishProgress(randomBtn);      
         }
         return "";
      }

      @Override
      protected void onProgressUpdate(Button... values) {
         // TODO Auto-generated method stub
     if(values[0].getText().equals("")
            values[0].setText("X");
     else
    values[0].setText("");
      }

      @Override
      protected void onPostExecute(String result) {
         // TODO Auto-generated method stub
         TextView lose = (TextView) findViewById(R.id.lose);
         lose.setText("You lose!");

         Enumeration<Integer> keys = buttons.keys();

         while(keys.hasMoreElements()){
            Integer key = (Integer) keys.nextElement();
            Button btn = buttons.get(key);
            btn.setBackgroundColor(Color.BLACK);
            btn.setEnabled(false);
         }   
      }
   }

   public void onClick(View v) {
      // TODO Auto-generated method stub
      Button btn= (Button) v;
      if(btn.getText().equals("X")){   // ??
         btn.setText("");
      } else {
         life--;
         lose.setText(life + "");
      }
   }

   /* UTILS METHOD */

   public Hashtable<Integer, Button> populateGrid(
                                        Hashtable<Integer, 
                                        Button> buttons){

      buttons.put(1, (Button) findViewById(R.id.btn1));
      buttons.put(2, (Button) findViewById(R.id.btn2));
      buttons.put(3, (Button) findViewById(R.id.btn3));
      buttons.put(4, (Button) findViewById(R.id.btn4));
      buttons.put(5, (Button) findViewById(R.id.btn5));
      buttons.put(6, (Button) findViewById(R.id.btn6));
      buttons.put(7, (Button) findViewById(R.id.btn7));
      buttons.put(8, (Button) findViewById(R.id.btn8));
      buttons.put(9, (Button) findViewById(R.id.btn9));
      buttons.put(10, (Button) findViewById(R.id.btn10));
      buttons.put(11, (Button) findViewById(R.id.btn11));
      buttons.put(12, (Button) findViewById(R.id.btn12));
      buttons.put(13, (Button) findViewById(R.id.btn13));
      buttons.put(14, (Button) findViewById(R.id.btn14));
      buttons.put(15, (Button) findViewById(R.id.btn15));
      buttons.put(16, (Button) findViewById(R.id.btn16));

      return buttons;
   }

   public void afterTextChanged(Editable s) {
      // TODO Auto-generated method stub

      if(s.toString().equals("0"))
         lose.setTextColor(Color.RED);
      else if(s.toString().equals("1"))
         lose.setTextColor(Color.MAGENTA);
      else if(s.toString().equals("2"))
         lose.setTextColor(Color.YELLOW);
      else if(s.toString().equals("3"))
         lose.setTextColor(Color.GREEN);

   }

   public void beforeTextChanged(CharSequence s,
                                 int start, 
                                 int count,
                                 int after) {
      // TODO Auto-generated method stub

   }

   public void onTextChanged(CharSequence s, 
                             int start, 
                             int before, 
                             int count) {
      // TODO Auto-generated method stub

   }
} 
```

我的目标是创建一个按钮网格并将按钮文本随机设置为“X”。我想模拟“鼹鼠猎人”游戏。因此，当按下激活的按钮时，文本将设置为“”以取消激活它。当按下未激活的按钮时，生命将减一。等等......这段代码有效，但它经常崩溃......我没有使用好的线程方法？

```
12-18 21:20:01.500: E/AndroidRuntime(1270): FATAL EXCEPTION: main

12-18 21:20:01.500: E/AndroidRuntime(1270): java.lang.NullPointerException

12-18 21:20:01.500: E/AndroidRuntime(1270):     at     com.example.pwnthamarmot.ScassaLaTalpa$SpawnMarmot.onProgressUpdate(ScassaLaTalpa.java:80)

12-18 21:20:01.500: E/AndroidRuntime(1270):     at com.example.pwnthamarmot.ScassaLaTalpa$SpawnMarmot.onProgressUpdate(ScassaLaTalpa.java:1)

12-18 21:20:01.500: E/AndroidRuntime(1270):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:432)

12-18 21:20:01.500: E/AndroidRuntime(1270):     at android.os.Handler.dispatchMessage(Handler.java:99)

12-18 21:20:01.500: E/AndroidRuntime(1270):     at android.os.Looper.loop(Looper.java:130)

12-18 21:20:01.500: E/AndroidRuntime(1270):     at android.app.ActivityThread.main(ActivityThread.java:3687)

12-18 21:20:01.500: E/AndroidRuntime(1270):     at java.lang.reflect.Method.invokeNative(Native Method)

12-18 21:20:01.500: E/AndroidRuntime(1270):     at java.lang.reflect.Method.invoke(Method.java:507)

12-18 21:20:01.500: E/AndroidRuntime(1270):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)

12-18 21:20:01.500: E/AndroidRuntime(1270):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)

12-18 21:20:01.500: E/AndroidRuntime(1270):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:35:09.390

如果您仔细查看堆栈跟踪，您会发现您进入`NullPointerException`了文件的第 80 行`ScassaLaTalpa.java`，特别是在您的`ScassaLaTalpa$SpawnMarmot.onProgressUpdate`方法中。没有看到该文件（标明行号），我不能说更多。

# java - 如何在 FileUtils 中的 copyDirectory 出现错误时继续复制（Apache Commons IO 2.4）

> ID：13931392
> 
> 赞同：4
> 
> 时间：2012-12-18T10:53:39.840
> 
> 标签：java, apache-commons-io, fileutils

我正在尝试使用来自apache commons io（2.4）的FileUtils方法“static void copyDirectory（File srcDir，File destDir）”将文件从一个文件夹复制到另一个文件夹，代码如下：

```
String srcDir  = "/sourceDirectory/examples/";
String destDir = "/tmp/examples/";
try{
    FileUtils.copyDirectory(new File(srcDir), new File(destDir));
} catch (IOException e){
    e.printStackTrace();
} 
```

文件结构如下所示：

```
examples/                           (read access)
examples/.subdirectory              (NO access)
examples/file1.txt                  (read access)
examples/file2.txt                  (read access)
examples/subdirectory2/file1.txt    (read access)
examples/subdirectory2/file2.txt    (NO access) 
```

问题是，在 srcDir 中有几个文件和一个我无权访问的子目录。FileUtils.copyDirectory 抛出“java.io.FileNotFoundException: .subdirectory (Permission denied)”并中止。

是否可以忽略那些我无权访问的文件，而只复制我可以读取的所有其他文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:02:14.477

使用`FileFilter`如下：

```
FileUtils.copyDirectory(new File(srcDir), new File(destDir), new FileFilter() {
    @Override
    public boolean accept(File pathname) {
        return pathname.canRead();
    }
}); 
```

有关更多信息，请参阅[javadoc](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html#copyDirectory%28java.io.File,%20java.io.File,%20java.io.FileFilter%29)。

# jquery - 是否可以通过 JQuery 部分附加 html 代码？

> ID：13931393
> 
> 赞同：0
> 
> 时间：2012-12-18T10:53:40.920
> 
> 标签：jquery

我正在尝试`li`使用 JQuery 附加来自 php 文件的元素。问题是html代码需要根据键值分别附加到不同的html ID。不幸的是，据我所知`append()`，只能在所有元素关闭的情况下附加正确的 html。否则它会自动关闭标签。下面的代码不会像`dval`包含代码那样工作，`<div><li class="some">Some value</li>`并且`append()`会从中产生`<div><li class="some">Some value</li></div>`出来。所以我想知道是否还有另一种方法，也许`append()`是能够附加html部分以外的功能？

编辑：

这是我的jQuery：

```
$.getJSON("../ajax.php", function(data)
{
    $.each(obj, function(key,val)
    {
        $.each(obj[key], function(key, dval)
        {                       
            if(key == "text")
            {                   
                $("#" + key).append(dval);
            }           
        })          
    });
}); 
```

这是我的PHP：

```
$json_arr = $json_arr."[";
if($counter % 2 == 0)
{
    $arr[0] = preg_replace('#<td class="some">(.*?)</td>#', '<li id="1234"><span class="some">$1</span>', $ja[0]);
}
else $ja[0] = preg_replace('#<td class="some">(.*?)</td>#', '<span class="some2">$1</span><div class="somediv"></div></li>', $ja[0]);

$json->id = $closest_key; // Closest key is the ID of an existing li element which is the closest to the current word
$json->text = $ja[0];
$json_arr = $json_arr.'{"id":"'.$json->id.'", "text":"'.addslashes($json->text).'"},';
$json_arr = substr($json_arr,0,-1);
$json_arr = $json_arr."]";
echo(json_encode($json_arr)); 
```

现在，如果 counter 是偶数`<li id="1234"><span class="some">$1</span>`，则应附加到`$closest_key`，如果是奇数，`<span class="some2">$1</span><div class="somediv"></div></li>`则应附加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:01:59.733

添加结束标记的不是真正的jquery，它是您的浏览器。为了呈现网页，它需要有一个有效的 HTML DOM，它会尝试为您修复错误。

使用大 obj 时，您正在做的事情会非常慢，因为每次追加后，整个页面都将被重新创建（意味着必须重新计算每个宽度/高度/位置）。（谷歌 javascript 重排/重绘）

最好的办法是先创建完整的 HTML 字符串，然后附加它。

```
var html = {};
$.each(obj, function(key,val)
{
    $.each(obj[key], function(key, dval)
    {                       
        if(key == "text")
        {            
            if (html[key]==undefined)
              html[key] = "";

            html[key] += dval.toString();
        }           
    })          
}); 

$.each(html, function(key,val)
{
    $("#" + key).append(val);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:00:04.150

您应该构建一个 HTML 字符串，然后一次全部追加。

这是一个例子。

```
var html = '<div><ul>';

for(var i = 0; i < 10; i++){
    html += '<li>Test</li>';
}
html += '</ul></div>';
jQuery('#test').html(html); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:03:58.980

你总是追加到`$('#text')`，那么为什么不只是构建字符串，然后再追加呢？

```
var html = '';

$.each(obj, function(key,val) {
    $.each(obj[key], function(key, dval) {
        if(key == "text") { //the element being appended to is always #text anyway ?
            html += dval;
        }           
    });
});

$('#text').append(html); 
```

# wso2 - 如何获取 WSO2 ESB 中存储过程返回的 CLOB 类型

> ID：13931395
> 
> 赞同：1
> 
> 时间：2012-12-18T10:53:41.400
> 
> 标签：wso2, wso2esb, esb

我在 Oracle 数据库中有一个存储过程。此存储过程返回一个 CLOB 类型。此 CLOB 类型包含嵌入的 xml。我使用 DBlookup 调解器来调用这个存储过程，如下所示：

```
<dblookup>
<connection>
<pool>
<dsName>XeDS</dsName>
</pool>
</connection>
<statement>
 <sql>select  pkg_ws_sol_cursos.fu_listado_cursos(?,?) as resultado from dual</sql>
 <parameter xmlns:xs="http://www.example.es" expression="//xs:HASH" type="VARCHAR" />
 <parameter xmlns:xs="http://www.example.es" expression="//xs:PV2_I_LANGISO" type="VARCHAR" />
 <result name="resultado_p" column="resultado" />
</statement>
</dblookup> 
```

当我使用存储过程返回的值获取属性“resultado_p”的值时，我意识到这个值是不正确的。返回值应该是包含嵌入 xml 的字符串，但不是这样。返回值是这样的字符串： oracle.sql.CLOB@423435435435 我认为这是执行 oracle.sql.CLOB java 类型的 toString 方法的结果，但我需要获取 CLOB 的内容而不是toString 结果。

是否有人调用了返回 CLOB 类型的存储过程？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:11:37.333

是的，DBMediators (DBLookup/DBReport) 不支持开箱即用的高级数据类型，例如 CLOB、BLOB 等。正如您正确指出的那样，正在尝试将返回字段的值序列化为字符串（因为这是默认行为）而不正确处理数据类型，这就是您观察上述行为的原因。

如果您想处理所有高级数据类型/SQL 逻辑，我们通常建议使用 WSO2 DSS（或数据服务功能），它为您提供了用于处理数据操作操作的完整功能堆栈。有了它，您可以轻松调用任何 SQL 逻辑，从简单的 SELECT 到非常严格的存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-15T00:05:52.377

尝试使用： SELECT sys_XMLGEN( pkg_ws_sol_cursos.fu_listado_cursos(?,?) , XMLFormat('Result')).getClobVal() as resultado from dual

# ffmpeg - ffmpeg错误创建缩略图不同的帧速率

> ID：13931402
> 
> 赞同：0
> 
> 时间：2012-12-18T10:54:01.953
> 
> 标签：ffmpeg, mp4

在命令行中使用它时，我会得到非常糟糕的图像，其中只有灰色或条纹。似乎“帧速率与容器帧速率不同：59.94 (60000/1001) -> 29.97 (30000/1001)”。

有什么办法可以在 ffmpeg 语句中解决这个问题？

```
ffmpeg -ss 00:00:10 -i FILENAME.mp4 -vframes 1 FILENAME.jpg 
```

这是我得到的输出：

```
FFmpeg version 0.5.2, Copyright (c) 2000-2009 Fabrice Bellard, et al.
  configuration: --prefix=/usr --libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --incdir=/usr/include --disable-avisynth --extra-cflags=-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC --enable-avfilter --enable-avfilter-lavf --enable-libdirac --enable-libfaac --enable-libfaad --enable-libfaadbin --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora --enable-libx264 --enable-gpl --enable-nonfree --enable-postproc --enable-pthreads --enable-shared --enable-swscale --enable-vdpau --enable-version3 --enable-x11grab
  libavutil     49.15\. 0 / 49.15\. 0
  libavcodec    52.20\. 1 / 52.20\. 1
  libavformat   52.31\. 0 / 52.31\. 0
  libavdevice   52\. 1\. 0 / 52\. 1\. 0
  libavfilter    0\. 4\. 0 /  0\. 4\. 0
  libswscale     0\. 7\. 1 /  0\. 7\. 1
  libpostproc   51\. 2\. 0 / 51\. 2\. 0
  built on Jun 13 2010 23:44:18, gcc: 4.1.2 20080704 (Red Hat 4.1.2-48) 
```

**似乎流 0 编解码器帧速率与容器帧速率不同：59.94 (60000/1001) -> 29.97 (30000/1001)**

```
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'FILENAME.mp4':
  Duration: 00:03:36.36, start: 0.000000, bitrate: 1305 kb/s
    Stream #0.0(eng): Video: h264, yuv420p, 640x428, 29.97 tbr, 29.97 tbn, 59.94 tbc
    Stream #0.1(eng): Audio: aac, 48000 Hz, stereo, s16
Output #0, image2, to 'FILENAME.jpg':
    Stream #0.0(eng): Video: mjpeg, yuvj420p, 640x428, q=2-31, 200 kb/s, 90k tbn, 29.97 tbc
Stream mapping:
  Stream #0.0 -> #0.0
Press [q] to stop encoding
[h264 @ 0x307f6b0]brainfart cropping not supported, this could look slightly wrong ...
[h264 @ 0x307f6b0]AVC: Consumed only 14978 bytes instead of 14984
[h264 @ 0x307f6b0]AVC: Consumed only 1147 bytes instead of 1153
[h264 @ 0x307f6b0]Missing reference picture
[h264 @ 0x307f6b0]AVC: Consumed only 1947 bytes instead of 1953
[h264 @ 0x307f6b0]Missing reference picture
[h264 @ 0x307f6b0]AVC: Consumed only 1870 bytes instead of 1876
[h264 @ 0x307f6b0]Missing reference picture
    Last message repeated 1 times
[h264 @ 0x307f6b0]AVC: Consumed only 810 bytes instead of 816
[h264 @ 0x307f6b0]Missing reference picture
    Last message repeated 1 times
[h264 @ 0x307f6b0]AVC: Consumed only 955 bytes instead of 961
[h264 @ 0x307f6b0]Missing reference picture
    Last message repeated 1 times
[h264 @ 0x307f6b0]AVC: Consumed only 1036 bytes instead of 1042
[h264 @ 0x307f6b0]Missing reference picture
    Last message repeated 1 times
[h264 @ 0x307f6b0]AVC: Consumed only 998 bytes instead of 1004
[h264 @ 0x307f6b0]Missing reference picture
frame=    1 fps=  0 q=3.3 Lsize=      -0kB time=0.03 bitrate=  -5.3kbits/s
video:14kB audio:0kB global headers:0kB muxing overhead -100.149568% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:14:37.027

It seems like at 10 seconds you do not have a reference frame, Try this: `ffmpeg -i FILENAME.mp4 -ss 00:00:10 -vframes 1 FILENAME.jpg`. This will apply the -ss option on the output,ffpeg would have already decoded your file and hence this should work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:57:06.490

试试这个 - 似乎裁剪在这里可能设置错误。（高度不是16的倍数认为按标准无效）

./ffmpeg -i ~/Sites/f3_voyage.mov -ss 00:00:10 -f image2 -vframes 1 -s 640x432 文件名.jpg

# ruby-on-rails - 避免父子控制器的控制器动作耦合的模式

> ID：13931406
> 
> 赞同：1
> 
> 时间：2012-12-18T10:54:22.420
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, dry, code-duplication

假设你有一个`Question`和一个`Answer`模型，并且新的答案是从`questions#show`页面提交的（比如 StackoverFlow）。

除非`questions#show`和`answers#create`动作加载相同的数据，`answers#create`否则如果新答案出现验证错误，则将抛出异常（通常在 nil 类上没有方法）。这不是一个主要问题，但是当您添加过滤器和其他类型的数据时，代码会开始产生异味，并且您会在两个操作之间获得紧密耦合。改变一个需要改变另一个——这很容易忘记。

我想知道有经验的 Rails 开发人员会做些什么来避免这种耦合？

```
 # Assume Discussion = Question, and Response = Answer
  # Discussions#show
  def show
    @discussion = Discussion.find(params[:id]) # The question
    @responses = @discussion.responses.includes(:author) # Existing answers
    @response = @discussion.responses.build # New answer object for the form
    order = 'users.role'
    if params[:filter].present?
      order = case params[:filter]
      when 'new'
        then 'responses.created_at DESC'
      end
    end
    @responses = @responses.order(order)
  end 
```

现在让我们看看这个`responses#create`动作，它必须加载相同的数据`render`才能工作（如果验证失败）：

```
 # Responses#create
  def create
    # @discussion is loaded using a before filter
    @response = @discussion.responses.build(params[:response])
    @response.author = current_user
    @responses = @discussion.responses.includes(:author)
    order = 'users.role'
    if params[:filter].present?
      order = case params[:filter]
      when 'new'
        then 'responses.created_at DESC'
      end
    end
    @responses = @responses.order(order)
    respond_to do |format|
      if @response.save
        format.html { redirect_to @discussion }
        format.js
      else
        format.html { render 'discussions/show' } # fails if discussions#show and responses#new do not load the same data.
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:10:05.113

您的问题似乎是您在不相关的控制器操作之间存在非常紧密的耦合，因为 answers#create 也试图成为一个讨论#show。

一种选择是在验证错误和成功时重定向到@discussion，并将提交的答案参数传递给重定向。然后您可以处理问题显示操作中有答案数据的“特殊”情况。

# c++ - 从 fstream 读取后，为什么它似乎需要在写入之前清除它的好位？

> ID：13931407
> 
> 赞同：2
> 
> 时间：2012-12-18T10:54:23.370
> 
> 标签：c++, file-io, fstream

下面是一个例子来说明这个问题：

```
// Create/truncate file and save '1'
const string NAME = "example.txt";
fstream file(NAME.c_str(), ios::out | ios::trunc);
file << '1';
file.close();

// Re-open file and output its only line
file.open(NAME.c_str(), ios::in | ios::out | ios::app);
string text;
getline(file, text);
cout << "Read \"" << text << "\"" << endl;
// OUTPUTS: Read "1"

// (Try to) Append '2'
file << '2';
file.seekg(0);
getline(file, text);
cout << "Read \"" << text << "\"" << endl;
// OUTPUTS: Read "1"

// (Try to) Append '3'
file.clear(ios::goodbit); /*** SHOULD IT BE NECESSARY TO CLEAR THIS FLAG? ***/
file << '3';
file.seekg(0);
getline(file, text);
cout << "Read \"" << text << "\"" << endl;
// OUTPUTS: Read "13" 
```

我对包含一行我不太了解的代码感到有些不安！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:22:55.637

`getline` sets the `eofbit` because it doesn't find the delimiter (newline). So there's certainly a flag set on the stream. `ios::goodbit` isn't really a bit, it means "all flags clear", so it's the eofbit you're clearing.

I'd be inclined to trust your implementation to respond correctly to that bit when writing, so if it tells you that the write fails then I more or less believe it. Someone will probably do the standards-diving to find the relevant text.

[Why does not seekg(0) clear the eof state of stream?](https://stackoverflow.com/questions/10141075/why-does-not-seekg0-clear-the-eof-state-of-stream) says there's a difference between C++03 and C++11\. In C++11, your call to `seekg` clears the `eofbit`, so because the write failed you read back `"1"`. In C++03, your call to `seekg` does not clear the `eofbit`, so the second read fails and `text` just happens to still contain `"1"` from before.

It's almost always incorrect to use `<<` or `>>` without checking the state of the stream immediately afterwards:

```
if (file << '2') {
    // seekg and so on to confirm what is in the file
} else {
    std::cout << "write failed" << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:22:52.937

`goodbit` isn't a bit you can clear, it's the state of not having any error state flag bits set. In a typical implementation of `ios`,

```
struct ios {
  enum iostate {
    goodbit = 0,
    badbit  = 0x1,
    failbit = 0x2,
    eofbit  = 0x4,
  };
}; 
```

The reason that you need to clear the error state flags is that after `getline` the eofbit is set so the `<<` operator has no effect. You can verify this by printing out the error state:

```
cout << file.rdstate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:25:55.403

> 获取线（文件，文本）；

您的文件没有换行符，因此它会读取到文件末尾并设置`eofbit`

在那之后你不能再读或写，直到你清除`eofbit`

# jquery - 使用 JQuery 在 HTML 中打印 Json 数组

> ID：13931408
> 
> 赞同：2
> 
> 时间：2012-12-18T10:54:26.993
> 
> 标签：jquery, json, append, each, getjson

这是循环 json 数据并打印 div 块的最有效方法吗？

我是否应该担心将这么多的 HTML 附加到 js 中？现在我的 json 数组只有 10 项，但如果是 150 项呢？我已经离开开发很长一段时间了，而且发生了很多变化。我将不胜感激任何方向，在此先感谢！

巴里

```
$.getJSON('output.php', function(data) {

    $.each(data, function(key, val) {

        $("#winesFriends").append(function() {
                return('<div id="wineBlock"><dl><dd><img src="img/sample_btl.jpg" alt="' + val.winery + ' - '+val.vintage+' '+val.varietal+' '+val.name+'"></dd><dt>' + val.winery + '</dt><dd>' + val.vintage + " " + val.name + '</dd></dl></div>');  
        }); 

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:58:22.107

您可以收集所有 HTML 代码，您正在生成并在一个步骤中附加它，如下所示：

```
$.getJSON('output.php', function(data) {

    var out = '';

    $.each(data, function(key, val) {
        out += '<div id="wineBlock"><dl><dd><img src="img/sample_btl.jpg" alt="' + val.winery + ' - '+val.vintage+' '+val.varietal+' '+val.name+'"></dd><dt>' + val.winery + '</dt><dd>' + val.vintage + " " + val.name + '</dd></dl></div>';  
    });

     $("#winesFriends").append( out );

}); 
```

除此之外，您的 HTML 似乎很冗长。您确定`<dl>`每个条目都需要单独的吗？我觉得一个`<dl>`就够了。这也将解决您现在遇到的另一个问题：所有`<div>`元素共享相同的`id`. 然而，一个在整个文档`id`中应该是**唯一的！**

```
$.getJSON('output.php', function(data) {

    var out = '<div id="wineBlock"><dl>';

    $.each(data, function(key, val) {
        out += '<dd><img src="img/sample_btl.jpg" alt="' + val.winery + ' - '+val.vintage+' '+val.varietal+' '+val.name+'"></dd><dt>' + val.winery + '</dt><dd>' + val.vintage + " " + val.name + '</dd>';  
    });

    out += '</dl></div>';

    $("#winesFriends").append( out );

}); 
```

# zend-framework2 - 如何在 zendframework 2 的 module.php 文件中获取服务管理器对象？

> ID：13931411
> 
> 赞同：0
> 
> 时间：2012-12-18T10:54:46.340
> 
> 标签：zend-framework2

我在 ZendFramework 2 模块的 module.php 文件中找到了以下函数。我不明白如何在此函数中获取服务管理器（$sm）的对象？

`

```
public function getControllerConfig()  
    {
        return array(  
             'initializers' => array(    
                function($instance, $sm){      
                      if($instance instanceof Service\FormServiceAwareInterface){  
                        $sm = $sm->getServiceLocator();
                        $formService = $sm->get('some_service');
                        $instance->setFormService($formService);
                      }
                 },
              ),
          );
      } 
```

`

谁能解释我如何在 getControllerConfig 函数中获取对象 $sm ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:18:08.327

ZF2启动mvc进程时，会先注册所有默认服务。

查看手册您将了解有关这些服务的更多信息：http: [//framework.zend.com/manual/2.0/en/modules/zend.mvc.services.html](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.services.html)

最重要的服务之一是*ModuleManager*，它处理所有与模块相关的功能。

*您*可以在`Zend\Mvc\Service\ModuleManagerFactory->createService()`.

注意这些代码：

```
$serviceListener->addServiceManager(
    'ControllerLoader',
    'controllers',
    'Zend\ModuleManager\Feature\ControllerProviderInterface',
    'getControllerConfig'
); 
```

这将临时调用`Zend\ModuleManager\Listener\ServiceListener->addServiceManager()`并保存模块名称和方法名称。

然后当 loadModule 事件触发时，`Zend\ModuleManager\Listener\ServiceListener->onLoadModule()`会被调用。在此方法中，所有返回的结果`Modele->getControllerConfig()`都将注册为服务并放入`Zend\ServiceManager\ServiceManager`.

最后，当您从 调用服务时`getControllerConfig()`，`Zend\ServiceManager\ServiceManager->create()`将调用实例和 ServiceManager 作为参数设置到您的闭包中：

```
foreach ($this->initializers as $initializer) {
    if ($initializer instanceof InitializerInterface) {
        $initializer->initialize($instance, $this);
    } elseif (is_object($initializer) && is_callable($initializer)) {
        $initializer($instance, $this);
    } else {
        call_user_func($initializer, $instance, $this);
    }
} 
```

我之前在beta3下ZF2时写了一篇关于[ZF2 Mvc过程](http://avnpc.com/pages/zf2-mvc-process)的笔记，也许可以帮助你（可以使用谷歌翻译）。

# c++ - 在调用链中使用 CRTP

> ID：13931413
> 
> 赞同：2
> 
> 时间：2012-12-18T10:55:06.983
> 
> 标签：c++, templates, crtp

在我的小部件库中，我想实现某种调用链来初始化用户提供的 VIEW 类，该类可能（！）从另一个类派生，该类添加了一些额外的功能，如下所示：

```
#include <iostream>

template<typename VIEW>
struct App
{
    VIEW view;
    void init() {view.initialize(); }
};

template<typename DERIVED>
struct SpecializedView
{
    void initialize()
    {
        std::cout << "SpecializedView" << std::endl;
        static_cast<DERIVED*>(this)->initialize();
    }
};

struct UserView : SpecializedView<UserView>
{
    void initialize() {std::cout << "UserView" << std::endl; }
};

int _tmain(int argc, _TCHAR* argv[])
{
    // Cannot be altered to: App<SpecializedView<UserView> > app;
    App<UserView> app; 
    app.init();
    return 0;
} 
```

是否有可能实现某种调用链（如果用户提供的 VIEW 类是从“SpecializedView”派生的），这样输出将是：

```
console output:

SpecializedView
UserView 
```

当然，使用派生的类型实例化变量 app 很容易，但此代码隐藏在库中，不应更改。换句话说：库代码应该只获取用户派生类型作为参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:18:31.640

您可以编写另一个函数来调用`initialize()`该类和基类（如果存在）并定义一个`initialize()`方法：

```
template <class T>
void callInitialize(T* t) {
    t->initialize();
    IF_EXISTS(base_class<T>::bc::initialize)
        callInitialize<base_class<T>::bc>(t);
} 
```

当然，调用的顺序可以颠倒。

请参阅[是否可以编写模板来检查函数的存在？](https://stackoverflow.com/q/257288/946850)关于实施`IF_EXISTS`。此外，`base_class<T>`它不是标准构造，[这个答案](https://stackoverflow.com/a/8709830/946850)表明这不能自动完成。语义看起来像这样：

```
template<T>
struct base_class<T> {
    typedef void bc;
};

template<>
struct base_class<UserView> {
    typedef SpecializedView<UserView> bc;
}; 
```

也许您的框架允许以半自动的方式执行此操作。

# codemirror - 使用 CodeMirror 进行单行表达式编辑

> ID：13931416
> 
> 赞同：4
> 
> 时间：2012-12-18T10:55:17.667
> 
> 标签：codemirror

CodeMirror 是实现单行表达式编辑器的好选择吗？如果可以将 CodeMirror 配置为执行以下操作，我无法从手册（或我查看的问题）中弄清楚：

*   不显示滚动条（如果太长而无法容纳，文本应向左滑动）
*   忽略插入新行的尝试
*   我确实需要对一组预定义的变量和运算符进行语法检查和突出显示以及自动完成，所以 DSL 编辑器肯定会让事情变得更容易

如果 CodeMirror 不是一个很好的匹配项，我应该考虑其他选择吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:20:51.617

“JQuery Terminal Emulator 是一个用于在应用程序中创建命令行解释器的插件。” 试试看：[http ://terminal.jcubic.pl/examples.php](http://terminal.jcubic.pl/examples.php)

# php - Symfony - app_dev 我的 ipv6 添加

> ID：13931417
> 
> 赞同：0
> 
> 时间：2012-12-18T10:55:18.890
> 
> 标签：php, symfony, development-environment, ipv6

我正在尝试为我的 ip 授予对 Symfony2 应用程序开发环境的访问权限。

**网页/app_dev.php**

```
if (isset($_SERVER['HTTP_CLIENT_IP'])
    || isset($_SERVER['HTTP_X_FORWARDED_FOR'])
    || !in_array(@$_SERVER['REMOTE_ADDR'], array(
        '127.0.0.1',
        'xxxx:xxx:xxxx:xxx:xxx:xxxx:xxxx:xxxx', // My ipv6
        '::1',
    ))
) { 
```

它适用于我的 ipv4，但不适用于我的 ipv6。

怎么解释？
我该如何调试呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-24T20:57:30.147

就个人而言，为了解决这个问题，我修改了**app_dev.php**，插入了一个从服务器角度显示您的 IP 的代码！:)

```
header('HTTP/1.0 403 Forbidden');
$monip = $_SERVER['REMOTE_ADDR'];
exit('You are not allowed to access this file. Check '.basename(__FILE__).' for more information.<br>Your IP is '.$monip); 
```

最后，我通过 ftp 在 app_dev.php 文件的 IP 数组中添加了显示的 IP。

```
if (isset($_SERVER['HTTP_CLIENT_IP'])
|| isset($_SERVER['HTTP_X_FORWARDED_FOR'])
|| !(in_array(@$_SERVER['REMOTE_ADDR'], array('127.0.0.1', 'fe80::1', '::1', 'yourIP_HERE')) || php_sapi_name() === 'cli-server') 
```

)

# eclipse - 使用 Eclipse 创建 Jar

> ID：13931420
> 
> 赞同：0
> 
> 时间：2012-12-18T10:55:38.313
> 
> 标签：eclipse, jar, resources

我在 Eclipse 中的项目大约显示以下文件夹：

```
application
- src
- JRE System Library [1.6]
- API.wsdl 
```

在我的项目中，我想使用 File > Export... > Executable JAR

很好，但有一些例外：如果我想运行我的 application.jar，我仍然需要将文件 API.wsdl 复制到与 application.jar 相同的位置。

我不明白，因为文件 API.wsdl 已经包含在我的 application.jar 中：

```
application.jar
- com
- META-INF
-.classpath
-.project
- API.wsdl 
```

希望有人可以帮助我，如何避免将 API.wsdl 复制到与 application.jar 相同的位置。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:25:42.443

您可能希望通过您的`ClassLoader`. 这样文件将从 jar 中获取，而不是从文件系统中获取。

# ios - : CGAffineTransformInvert：PhoneGap 应用上的奇异矩阵

> ID：13931423
> 
> 赞同：0
> 
> 时间：2012-12-18T10:56:05.910
> 
> 标签：ios, css, cordova, transform

我收到了这个错误，显然它应该与我正在使用的转换有关。我走过这条路，清除了所有的变换、动画、过渡，但仍然看到了这一点。

我在 ios 上使用 PhoneGap 2.2，我正在做所有规模的翻译。我没有将整个代码放在这里，因为我目前认为它应该有其他影响，因为我删除了所有花哨的东西并且仍然得到这个错误。可能是错的，可能已经跳过了一些东西，如果我发现我这边有错误，我会发布。

如果其他人以前有这个会很棒，所以在花几个小时之前可以节省时间。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:09:47.297

真的很奇怪，但我做了一件事解决了这个问题。

我曾经有`display: inline-block;`元素并正确对齐它们我曾经做给 parent 的技巧`font-size: 0;`，删除这个解决了这个问题。

无论如何，视觉上没有任何问题，但现在我没有收到任何控制台错误。

# c++ - 输入超过 11 个整数时 C++ 程序终止

> ID：13931430
> 
> 赞同：-1
> 
> 时间：2012-12-18T10:56:29.857
> 
> 标签：c++

我有一个用 C++ 编写的程序，要求用户输入他/她的 11 位手机号码。但是当我输入 11 位数字时，程序`continue`没有执行后续代码。

```
 string FriendName, FriendAdd,  EmailAdd;
 long MobileNumber, counter, counter1, counter2;
 //Create a new structure
 struct personData {
   string namePerson, addressPerson, emailAddress;
   long age;
   struct personData *next;
 };

//Initialize pointers to personData structure
typedef struct personData node;

node *firstRec, *currentRec, *tempRec, *tempRec2;

void InsertRec() {
  cin.ignore(200,'\n');

  cout<<"Enter your Friend's Name            : ";
  cin.ignore(1,'\n');
  getline(cin,FriendName);
  cout<<"Enter your Friend's Mobile Number   : ";
  cin>>MobileNumber;
  cout<<"Enter your Friend's Address         : ";
  cin.ignore(1,'\n');
  getline(cin,FriendAdd);
  cout<<"Enter your Friend's Email Add       : ";
  getline(cin,EmailAdd);
  cout<<endl<<endl;

  tempRec = new(personData);
  tempRec->namePerson = FriendName;
  tempRec->addressPerson = FriendAdd;
  tempRec->emailAddress = EmailAdd;
  tempRec->age = MobileNumber;
  tempRec->next=firstRec;
  //firstRec->next=tempRec;

  firstRec=tempRec;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:00:01.360

整数类型的大小取决于目标平台和编译器设置。假设它`long`是一个 32 位整数，它只支持 10 位数字。

32 位整数类型的最大值为：

有符号：-2147483647 到 2147483647
无符号：0 到 4294967295

更好的方法是将手机号码存储为字符串，而不是数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:59:42.370

电话号码不是整数，它是一串数字。

有符号整数（用于 32 位整数，取决于您的平台和编译器）可以包含的最大数字是 +2,147,483,647。这是10位数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:07:36.517

这是您选择使用手机号码的数据类型的问题。输入手机号码后，再次打印，看是否显示相同的值。您的 11 位数值超出`long`限制。

# javascript - 使用 sencha touch 遇到谷歌地图问题

> ID：13931435
> 
> 赞同：1
> 
> 时间：2012-12-18T10:56:56.990
> 
> 标签：javascript, google-maps, google-maps-api-3, sencha-touch, sencha-touch-2

我是 sencha touch 的新手，但我遇到的错误似乎与 google maps api 有关。我正在调用 google maps api 以搜索 sencha touch 中的特定位置。但我得到以下错误

![在此处输入图像描述](../Images/634a94af81c316b9203838544b169239.png)

这是我在 store/Places.js 文件中的代码

```
Ext.define('TestIOS.store.Places', {
extend: 'Ext.data.Store',
config: {
    model: 'TestIOS.model.Place',
    autoLoad: true,

    proxy: {
        type: 'ajax',
        url: 'https://maps.googleapis.com/maps/api/place/search/json?location=-33.8670522,151.1957362&radius=500&types=food&name=harbour&sensor=false&key=AIzaSyCFWZSKDslql5GZR0OJlVcgoQJP1UKgZ5U',
        reader: {
            type: 'json',
            rootProperty: 'results'
        }
    }
}
}); 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:02:01.063

这是由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy) ，所以要从其他服务器获取数据，我们必须使用[JSONP](http://en.wikipedia.org/wiki/JSONP) 但似乎最新版本的[Google Maps API (v3) 不支持 jsonp](http://blog.futtta.be/2010/04/09/no-more-jsonp-for-google-geocoding-webservice/)。因此，如果要进行地理编码，则需要使用 maps api：

包括

```
<script src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

在 index.html 添加 sencha microloader 之前

```
<script id="microloader" type="text/javascript" src="sdk/microloader/development.js"></script> 
```

要获取任何地址，请使用 google geocoder EX：

```
 var geocoder = new google.maps.Geocoder();
    geocoder.geocode( {'address': name of location },
        function(results, status) { console.log(results[0].geometry.location); }); 
```

# android - 如何在 Android 中读取和播放 .m3u8 文件？

> ID：13931436
> 
> 赞同：0
> 
> 时间：2012-12-18T10:56:59.260
> 
> 标签：android, android-mediaplayer

我想在我的应用程序中播放一个 .ts 格式的文件。我有一个 .m3u8 扩展文件的 url [http://devimages.apple.com/iphone/samples/bibpop/gear1/prog_index.m3u8](http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8)的url 。

当我从 url 播放视频时，它可以正常播放。这是从网址播放视频的代码...

```
 try
    {
        String path = "http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8";

        Uri uri = Uri.parse(path);
        videoView.setVideoURI(uri);
        videoView.start();
    } catch (Exception e)
    {
        // TODO: handle exception
        e.printStackTrace();
    } 
```

我检查了 prog_index.m3u8 文件是否包含 .ts 文件列表，并且该文件在通过 url 运行时可以完美运行。但我想要的是自己阅读 .m3u8 文件，然后我可以从那里提取 .ts 文件并播放那些 .ts 文件。

有可能吗？

如果无法读取 .m3u8 文件，我可以播放 .ts 文件吗。如果我将其存储在本地原始文件夹中或从流中读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:13:20.167

[好的，我在应用程序中使用FFmpeg](https://ffmpeg.org)解决了我的问题。我使用了[appunite](http://github.com/appunite/AndroidFFmpeg)给出的示例。

现在我可以正常播放 .ts 文件了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-02T12:21:27.383

**MainActivity.java**

包 com.example.hlsdemo；

```
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.MediaController;
import android.widget.VideoView;

public class MainActivity extends Activity {
    Button startB; 
    VideoView mVideoView;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        startB=(Button) findViewById(R.id.button);
        startB.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mVideoView = (VideoView) findViewById(R.id.surface_view);
                mVideoView.setVideoURI(Uri.parse("http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8"));
                mVideoView.setMediaController(new MediaController(MainActivity.this));
                mVideoView.requestFocus();
                mVideoView.postInvalidateDelayed(100);
                new Thread(new Runnable() {
                    public void run() {
                        mVideoView.start();

                    }
                }).start();
            }
        });
    }

} 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/surface_view"
        android:layout_width="fill_parent"
        android:layout_height="300dp"
        android:layout_gravity="center" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/surface_view"
        android:layout_marginRight="62dp"
        android:layout_marginTop="16dp"
        android:text="Stop" />

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="34dp"
        android:text="Start" />

</RelativeLayout> 
```

**并确保 AndroidManifest.xml 中的 Internet 权限**

# c# - 将 asp.net listview 切换到编辑模式而不重新加载所有数据

> ID：13931438
> 
> 赞同：1
> 
> 时间：2012-12-18T10:57:06.690
> 
> 标签：c#, asp.net

如何在不重新加载所有数据的情况下编辑列表视图中的一行（即：重新加载第 3 页中的所有数据）？
当我单击编辑链接时，每列中的每个标签都将转换为文本框（或下拉列表或 ...），而无需重新加载所有数据。
之后我单击保存链接，并刷新数据库中的所有更改（使用 ajax）。

换句话说，在listview asp.net控件中编辑一行的低成本解决方案是什么？

# php - 照片马赛克网络应用程序。KD树

> ID：13931441
> 
> 赞同：2
> 
> 时间：2012-12-18T10:57:13.027
> 
> 标签：php, language-agnostic, kdtree

上个月我一直在制作一个照片马赛克网站。我用 PHP 构建了所有东西，我让它工作得很好。我唯一不喜欢的是执行时间。由于线性比较搜索，我认为这太长了。所以我一直在询问如何改善我的搜索时间，大多数人都将我指向 KD-tree 的方向，这将使 k-最近邻变得更快。

所以我一直在研究 KD-tree 并且我了解如何手动构建这样的树。现在我当然想编写这个代码，我只能找到 C++ 和 java 的库。因为我只熟悉 PHP，所以我一直在尝试自己制作，但这并不像我想象的那么容易。

• 我面临的一个问题是如何存储所有内容。当我得到第一个包含所有点的数组时，我会将它分成 3 块。左分支、节点和右分支。当然我会对左分支做同样的事情，直到我不能再分裂，当然我循环穿过轴（XYZ）。但是我如何存储所有正确的分支，我将它们留在数组中吗？还是在我准备好使用它们时再次计算它们？

• 我想知道的另一件事是为什么没有 PHP KD-tree 脚本是因为 PHP 不是适合这项工作的语言？

这就是我到目前为止所得到的。

这个函数计算我用来测试其余部分的随机颜色 (RGB)。

```
<?php
function randomiser($number){

    if($number <= 0){ 
        echo 'Error: The input of randomiser() is less than or equal to zero !!';
        return FALSE;         
    }else{ 
        $R = array();
        $G = array();
        $B = array();

        for($x = 1; $x <= $number; $x++){
            $r = rand(1, 255);
            $g = rand(1, 255);
            $b = rand(1, 255);

            $rgb['pic ' . $x]['R'] = $r;
            $rgb['pic ' . $x]['G'] = $g;
            $rgb['pic ' . $x]['B'] = $b;    
        }  
    }
return $rgb;
}
?> 
```

此函数对特定键上的多维数组进行排序（默认为 R）

```
<?php
function sorter(&$array, $key = 'R'){

    if(!is_array($array)){ 
        echo 'Error: The input of sorter() is not an array !!<br>';
        return FALSE;         
    }else{ 
        uasort($array, function ($a, $b) use ($key){
            return strnatcmp($a[$key], $b[$key]);
        }); 
    }
}
?> 
```

此类将数组拆分为左分支、节点和右分支。

```
<?php
class splitting {

    public $left;
    public $node;
    public $right;

    function __construct($array){

        if(!is_array($array)){ 
            echo 'Error: The input of splitter() is not an array !!<br>';
            return FALSE;         
        }else{ 
            $number = count($array);
            $median = round($number / 2) - 1; 

            $this->left = array_slice($array, 0, $median);
            $this->node = array_slice($array, $median, 1);
            $this->right = array_slice($array, $median+1);
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:17:01.740

1.  您需要将指向树的指针存储在 $left 和 $right 变量中，而不是数组或您需要使用的任何变量。如果 kd-tree 太复杂，我也会研究 r-tree。r-tree 将平面分成 4 个边，即在真正的 2 euklidian 维度中，kd-tree 只是一个二叉树。然后你需要一个变量 $payload 或其他东西来备份中位数。
2.  不，您还可以找到 php 树示例。这是一个示例：http: [//blog.sandfox.co.uk/2012/09/10/php-kdtree/](http://blog.sandfox.co.uk/2012/09/10/php-kdtree/)。您还可以在 php 中查找我的 kart-trie 实现。它还使用 OO 以及节点和边类。[这是一个从http://www.blackpawn.com/texts/lightmaps/default.html](http://www.blackpawn.com/texts/lightmaps/default.html)将光照贴图打包到 kd 树中的脚本。

    ```
     struct Node
    {
         Node* child[2]
         Rectangle rc
          int imageID
     }

    Node* Node::Insert(const Image& img)
          if we're not a leaf then
          (try inserting into first child)
           newNode = child[0]->Insert( img )
          if newNode != NULL return newNode

     (no room, insert into second)
          return child[1]->Insert( img )
      else
    (if there's already a lightmap here, return)
    if imageID != NULL return NULL

    (if we're too small, return)
    if img doesn't fit in pnode->rect
        return NULL

    (if we're just right, accept)
    if img fits perfectly in pnode->rect
        return pnode

    (otherwise, gotta split this node and create some kids)
    pnode->child[0] = new Node
    pnode->child[1] = new Node

    (decide which way to split)
    dw = rc.width - img.width
    dh = rc.height - img.height

    if dw > dh then
        child[0]->rect = Rectangle(rc.left, rc.top, 
                                   rc.left+width-1, rc.bottom)
        child[1]->rect = Rectangle(rc.left+width, rc.top, 
                                   rc.right, rc.bottom)
    else
        child[0]->rect = Rectangle(rc.left, rc.top, 
                                   rc.right, rc.top+height-1)
        child[1]->rect = Rectangle(rc.left, rc.top+height, 
                                   rc.right, rc.bottom)

    (insert into first child we created)
    return Insert( img, pnode->child[0] ) 
    ```

# ruby - 寻找纯 Ruby 的图像处理库

> ID：13931442
> 
> 赞同：7
> 
> 时间：2012-12-18T10:57:16.900
> 
> 标签：ruby, image-processing

我发现的大多数库/代码都是用于 RoR 而不是纯 ruby​​。即使我用谷歌搜索纯 ruby​​ 图片上传，我也会得到 Pure Ruby On Rails ;)

所以......我正在寻找一个可以做一些简单事情的 gem/ library/ 代码：

*   检查它是否是有效的图像文件
*   将图像大小调整为预定义的值
*   将其保存为 jpg（来自 jpeg、jpg、png、gif、bmp）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T13:26:01.753

查看[mini magick](https://github.com/minimagick/minimagick)或[rmagick](https://github.com/rmagick/rmagick)：

还有[其他](https://www.ruby-toolbox.com/categories/image_processing)的。

请注意，您可以在 Ruby on Rails 之外使用 gem。在您的命令行中执行以下操作：

`$ gem install gem_name`

在你的 ruby​​ 文件中，需要它

`require 'gem_name'`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T15:31:17.433

结帐[https://github.com/jcupitt/ruby-vips](https://github.com/jcupitt/ruby-vips "红宝石贵宾")一个快速的很棒的图像处理库

# java - 遍历 Stateful Bean 中的所有 EntityManager

> ID：13931444
> 
> 赞同：1
> 
> 时间：2012-12-18T10:57:20.203
> 
> 标签：java, entitymanager

有没有办法遍历 Stateful Bean 中所有列出的 EntityManager？

```
@Stateful
@Local(SomeInterface.class)
public class ContextBean implements SomeInterface{

    @PersistenceContext(unitName="00")
    private EntityManager em00;

    @PersistenceContext(unitName="01")
    private EntityManager em01;

    ...

    @PersistenceContext(unitName="0n")
    private EntityManager em0n;

    public ContextBean() {}

    public void test(){

       for(EntityManager em : ???){
         // Do something
       }

    }

} 
```

我可以使用循环吗？请问如何使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:51:19.927

当然，您可以遍历每个字段，如下所示：

```
 Field[] fields = getClass().getDeclaredFields();
    for (Field field : fields) {
        if (field.getType().equals(EntityManager.class)) {
            EntityManager em = (EntityManager) field.get(this);
            // do something with em
        }
    } 
```

# jquery - jQuery Ajax 调用未调用成功

> ID：13931445
> 
> 赞同：0
> 
> 时间：2012-12-18T10:57:20.157
> 
> 标签：jquery, ajax, json, post

我遇到了ajax请求的问题。每当我运行以下命令时，我都会得到一个`x`（正如下面请求中的错误函数生成的那样），但我应该得到刻度图像，因为我确认调用确实在系统中进行了更改。

谁能帮我弄清楚我做错了什么？

阿贾克斯调用：

```
$.ajax({
    url: "/URL",
    type: "POST",
    dataType: 'json',
    data: { action: 'assoc_users', username: 'testuser', name: 'testname' },
    success: function(){
    $("#user_1_image").attr("src","http://domain.com/check.png");
  },
    error: function(){
    $("#user1_status").html("x");
  }
}); 
```

将作为输出的数据：

```
{status: 'OK', payload: ''} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:09:29.290

如果您从指定的 url 获取有效的 json，那么这将起作用，因为在您的代码中，您没有在成功函数中传递数据：

```
$.ajax({
    url: "/URL",
    type: "POST",
    dataType:'json',
    data: { action: 'assoc_users', username: 'testuser', name: 'testname' },
    success: function(data){
      if(data){
        $("#user_1_image").attr("src","http://domain.com/check.png");
      }
    },
    error: function(){
       $("#user1_status").html("x");
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:11:56.123

您的 json 字符串中有 Parse 错误，请先检查您的 json 字符串

```
Parse error on line 1:
{    action: 'assoc_users
-----^
Expecting 'STRING', '}' 
```

我已经更正了您的 json 字符串并进行了尝试。试试这个有效，

```
$(document).ready(function() {
 var actions = { "action": "assoc_users", "username": "testuser", "name": "testname" };
    $.ajax({
    url: "/URL",
    type: "POST",
    data: actions,
    dataType: "json",
    success: function(data){
        alert('action'+data.action+'username'+data.username+'name'+data.name); // this is to check whats coming from the server side
        $("#user_1_image").attr("src","http://domain.com/check.png");
    },
    error: function(jqXHR, exception){
        if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
  }
}); 
}); 
```

在 php 文件中

```
<?php echo json_encode($_POST); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:21:09.510

请使用它，可能是引号造成问题，所以试试吧。

```
$.ajax({
url: '/URL',
type: 'POST',
dataType: 'json',
data: { action: 'assoc_users', username: 'testuser', name: 'testname' },
success: function(){
$('#user_1_image').attr('src','http://domain.com/check.png');
},
error: function(){
$('#user1_status').html('x');
}
}); 
```

# mysql - 使用预定义密码安装的 MySQL

> ID：13931447
> 
> 赞同：0
> 
> 时间：2012-12-18T10:57:33.180
> 
> 标签：mysql, linux

所以我正在运行 crunchbang linux 并使用以下终端命令安装 mysql-server：

```
sudo apt-get install mysql-server 
```

安装程序运行没有问题，但在尝试访问 mysql 时出现“错误 1045 访问被拒绝”。

> 错误 1045 (28000)：拒绝用户“用户名”@“本地主机”的访问（使用密码：否）

使用 root 也是如此。

我使用的教程指出，在设置 mysql-server 期间，我会被要求设置密码，但这一步从未发生过。

编辑：从我的系统中完全删除了与 mysql 相关的所有内容（包括配置文件），问题仍然存在。

尝试的时候

```
mysql -u root mysql 
```

该错误也会发生，尽管根据[文档](http://dev.mysql.com/doc/refman/5.1/en/access-denied.html)，如果未设置密码，这应该授予我访问权限。

___更新：因为即使我的新笔记本电脑（现在运行 ubuntu 12.10）我仍然遇到这个问题，我会做一个快速更新：

两者都不

```
sudo dpkg-reconfigure mysql-server 
```

也不

```
mysql -u root

mysql> SET PASSWORD FOR 'root'@'localhost' = PASSWORD('yourpassword'); 
```

工作。有什么想法吗？

__更新 2

通过停止服务然后按照[本指南](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html#resetting-permissions-unix)，我似乎已经设法重置了 root 密码。

仍然，使用

```
mysql -u root -p 
```

并输入我设置的密码，它仍然会拒绝访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:17:51.930

我会尝试该命令的一些变体（只需按回车键/空/无密码）：

mysql -h 本地主机 -u root -p

mysql -h 127.0.0.1 -u root -p

mysql -h $主机名 -u root -p

可能只是 mysql 无法将您识别为本地用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:58:21.223

如果您是 Ubuntu/Debian，您可以执行以下操作：

```
sudo dpkg-reconfigure mysql-server 
```

如果我没记错的话，应该问你初始密码的初始问题。

编辑：

然后根据[https://help.ubuntu.com/community/ApacheMySQLPHP](https://help.ubuntu.com/community/ApacheMySQLPHP)

```
mysql -u root

mysql> SET PASSWORD FOR 'root'@'localhost' = PASSWORD('yourpassword'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:18:09.360

[您可以通过本手册http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)重置密码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:17:58.473

好吧，我的怀疑是对的：我使用突触包管理器安装了 mysql，在安装过程中这似乎跳过了设置 root 密码的步骤。我不知道为什么密码重置不起作用，但是从命令行安装 mysql 后一切正常。

# hadoop - gmond 如何获得 Ganglia 中的 Hadoop 指标？

> ID：13931449
> 
> 赞同：0
> 
> 时间：2012-12-18T10:57:36.937
> 
> 标签：hadoop, hbase, ganglia

我正在探索使用 ganglia 进行 Hadoop 监控。它使用用于监控的 gmond 和 gmetad 恶魔。

我想知道 gmond 如何从 Hadoop 获取监控指标？他们是使用 Hadoop 公开的 MBean，还是做更多的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:18:44.377

您可以在 Hadoop 和 HBase 配置中设置指标上下文。要使用 Ganglia，您可以将其设置为 GangliaContext 或 GangliaContext31。配置后，Hadoop 和 HBase 会将它们的指标写入 gmond。这是“推”，而不是“拉”。GangliaContext 的源代码可以在[这里](http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-core/0.20.2-320/org/apache/hadoop/metrics/ganglia/GangliaContext.java "神经节上下文")找到。

我相信默认值是 NoEmitMetricsContext，顾名思义，它根本不发出任何指标。您必须手动打开它。

# mysql - mysql查询具有多个评论的帖子

> ID：13931451
> 
> 赞同：1
> 
> 时间：2012-12-18T10:57:41.747
> 
> 标签：mysql

我有以下查询返回与用户关联的所有帖子（这很好用）

例如

```
//friends
wallusers.mem_id IN (".$matches.") 
// themselves    
OR wallusers.mem_id =".$user_id." 
//tagged in
OR wallposts.tagedpersons LIKE '%".$user_id."%'

    $qry = "SELECT DISTINCT wallposts.p_id,wallposts.type,wallposts.value,wallposts.media,wallposts.youtube,wallposts.post_type,wallposts.tagedpersons,wallposts.title AS thetitle,wallposts.url,wallposts.description,wallposts.cur_image,wallposts.uip,wallposts.likes,wallposts.userid,wallposts.posted_by,wallposts.post as postdata,wallusers.*, UNIX_TIMESTAMP() - wallposts.date_created AS TimeSpent,wallposts.date_created
    FROM wallposts,wallusers
    where (wallusers.mem_id IN (".$matches.") OR wallusers.mem_id =".$user_id." OR wallposts.tagedpersons LIKE '%".$user_id."%') and wallusers.mem_id = wallposts.userid
    order by wallposts.p_id desc 
    limit ".$show_more_post.", 10"; 
```

我现在想将评论添加到这个查询中，这样如果有人在评论中标记了用户，它就会在这个查询中返回。

这将加入：

```
wallposts.p_id = wallcomments.post_id 
```

where 子句是：

```
wallcomments.tagedpersons LIKE '%".$user_id."%' 
```

每个帖子都有多个评论，我正在努力弄清楚如何实现这一点，我会使用 INNER JOIN 吗？

**编辑：我只需要查询中的帖子，评论不需要在那里。因此，如果在帖子评论中标记，则在查询中包含帖子。**

任何帮助/指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:04:54.080

这可以完成这项工作，是的，您可以使用内部联接

```
 SELECT DISTINCT wallposts.p_id,wallposts.type,wallposts.value,wallposts.media,wallposts.youtube,wallposts.post_type,wallposts.tagedpersons,wallposts.title AS thetitle,wallposts.url,wallposts.description,wallposts.cur_image,wallposts.uip,wallposts.likes,wallposts.userid,wallposts.posted_by,wallposts.post as postdata,wallusers.*, UNIX_TIMESTAMP() - wallposts.date_created AS TimeSpent,wallposts.date_created
 FROM wallposts,wallusers
 INNER JOIN wallcomments 
 ON  wallposts.p_id = wallcomments.post_id
 WHERE (wallusers.mem_id IN (".$matches.") OR wallusers.mem_id =".$user_id." OR wallposts.tagedpersons LIKE '%".$user_id."%') and wallusers.mem_id = wallposts.userid AND wallcomments.tagedpersons LIKE '%".$user_id."%'
ORDER BY wallposts.p_id desc 
 LIMIT ".$show_more_post.", 10 
```

编辑：

```
 SELECT wallposts.p_id,wallposts.type,wallposts.value,wallposts.media,wallposts.youtube,wallposts.post_type,wallposts.tagedpersons,wallposts.title AS thetitle,wallposts.url,wallposts.description,wallposts.cur_image,wallposts.uip,wallposts.likes,wallposts.userid,wallposts.posted_by,wallposts.post as postdata,wallusers.*, UNIX_TIMESTAMP() - wallposts.date_created AS TimeSpent,wallposts.date_created
 FROM wallposts
 INNER JOIN wallusers
 ON  wallposts.userid = wallusers.mem_id     // LOOK IF wallusers.mem_id is same as wallposts.userid , im not sure about your table
 INNER JOIN wallcomments 
 ON  wallposts.p_id = wallcomments.post_id
 WHERE (wallusers.mem_id IN (".$matches.") OR wallusers.mem_id =".$user_id." OR wallposts.tagedpersons LIKE '%".$user_id."%') and wallusers.mem_id = wallposts.userid AND wallcomments.tagedpersons LIKE '%".$user_id."%'
ORDER BY wallposts.p_id,wallposts.type,wallposts.value,wallposts.media,wallposts.youtube,wallposts.post_type,wallposts.tagedpersons,wallposts.title
 LIMIT ".$show_more_post.", 10 
```

# c# - 我应该在查询中使用 IQueryable 列表而不是实体吗？

> ID：13931455
> 
> 赞同：1
> 
> 时间：2012-12-18T10:57:50.997
> 
> 标签：c#, entity-framework

我编写了一个实体助手类，通常我使用类似的东西

```
 private CVSystemEntities db;

public EntityHelper()
    {

        db = new CVSystemEntities();
   }

   public IQueryable<Members> GetMembersForRole(Role role)
    {
        if (!RoleExists(role))
            throw new ArgumentException(MissingRole);

        return db.Members.Where(m => m.RoleID == role.Id).OrderBy(m=>m.Name).AsQueryable();
    } 
```

没关系，但如果我使用类似的东西

```
 private CVSystemEntities db;
  private IQueryable<Members> membersDb;

public EntityHelper()
    {

        db = new CVSystemEntities();
        membersDb = db.Members.Select(s => s);
   }

   public IQueryable<Members> GetMembersForRole(Role role)
    {
        if (!RoleExists(role))
            throw new ArgumentException(MissingRole);

        return membersDb.Where(m => m.RoleID == role.Id).OrderBy(m=>m.Name).AsQueryable();
    } 
```

我使用了 membersClass 而不是 db.members。我从 db.members 创建了一个。

那么，您如何看待这种方式？我应该使用某种这种吗？如果你问为什么要使用它，我认为我没有查询我的数据库，也许更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:07:25.017

> 我应该使用某种这种吗？如果你问为什么要使用它，我认为我不查询我的数据库，也许更好？

不，您在数据库上做的工作量完全相同。这：

```
membersDb = db.Members.Select(s => s); 
```

...*不会*在数据库上执行查询然后保留结果，我相信您会这样。相反，它有效地构建了一个查询 - 但保留*该查询*以备后用。

如果您将其更改为：

```
IEnumerable<Members> membersDb;
...
membersDb = db.Members.ToList(); 
```

那么这*只会*访问数据库一次 - 但当然，如果数据库发生更改，您将获得陈旧的数据。也许没关系——目前还不清楚你的寿命是多少`EntityHelper`——但对我来说似乎不太可能。请注意，调用`ToList`也会从数据库中获取*所有*成员 - 否则您的查询将具有适当`Where`的子句，从而限制获取的内容。您可能不想将整个表提取到内存中，除非它真的很小。

# java - 使用 log4j 异步发送电子邮件

> ID：13931456
> 
> 赞同：1
> 
> 时间：2012-12-18T10:57:56.100
> 
> 标签：java, logging, log4j

我注意到，当使用 log4j 发送错误电子邮件时，由于 SMTP 协议协商和提交，程序的执行会暂停。

使错误电子邮件异步发送的推荐方法是什么？

如果错误对过程是致命的，这是否会产生影响？在终端异常的情况下，我不希望进程在发送电子邮件之前终止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:37:13.107

该方法似乎是：

1.  像往常一样创建您的电子邮件附加程序
2.  用一个“包裹”它`AsyncAppender`

配置类似于：

```
<appender name="SmtpAppender" class="org.apache.log4j.net.SMTPAppender">
    <!-- ... -->
</appender>

<appender name="AsyncSmtpAppender" class="org.apache.log4j.AsyncAppender">
    <appender-ref ref="MAIL"/>
</appender> 
```

但是，这并没有解决我对无法发送电子邮件导致进程中断的致命错误情况的担忧。有人可以澄清一下吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-21T14:21:14.843

如果您可以切换日志框架，请`logback`异步发送电子邮件（[http://logback.qos.ch/manual/appenders.html#SMTPAppender](http://logback.qos.ch/manual/appenders.html#SMTPAppender)），因此不需要异步包装器。

# php - 在 zf2 中得到渲染器致命错误的错误

> ID：13931460
> 
> 赞同：0
> 
> 时间：2012-12-18T10:58:09.937
> 
> 标签：php, zend-framework2

得到 'Zend\View\Renderer\PhpRenderer::render: Unable to render template "users/users/index" while I call my users module 这里是 module.config.php 的代码

```
<?php
 return array(
'controllers' => array(
    'invokables' => array(
        'Users\Controller\Users' => 'Users\Controller\UsersController',
    ),

),

'router' => array(
    'routes' => array(
        'users' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/users[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Users\Controller\Users',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
),

'view_manager' => array(
    'template_path_stack' => array(
        'users' => __DIR__ . '/../view',
    ),
),
); 
```

当我调用 localhost/myprj/public/users

它在 indexAction 中的我的 userscontroller.php 上进行，这里是控制器的代码。

```
public function indexAction()
{ 
    return new ViewModel(array(
            'users' => $this->getUsersTable()->fetchAll(),
        ));
} 
```

我得到了上面的致命错误我还在 module/Users/view/users/users 下创建了 index.phtml

这是我的 index.phtml 代码

```
 <?php 
     echo "here I am!!";
  ?> 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:39:27.107

尝试将您的模块配置更改为此（删除“用户”键）：

```
...
'view_manager' => array(
    'template_path_stack' => array(
        __DIR__ . '/../view',
    ),
), 
```

# vb.net - 数据绑定后文本框光标位置始终为 0

> ID：13931469
> 
> 赞同：1
> 
> 时间：2012-12-18T10:58:40.500
> 
> 标签：vb.net, winforms, data-binding, textbox, cursor

我有以下简单的命令：

```
me.textbox1.databindings.clear
me.textbox1.databindings.add("text",TicketsBindingSource,"TicketSubject") 
```

该命令成功执行，我可以在文本框中看到标题，但是一旦我点击 textbox1 光标的位置，它总是移动到位置 0 而不是我点击的文本框区域。例如，我的文本框有以下文本：`"Hello World"`. 如果我在文本框中的字母 W 或任何地方单击鼠标，则单击光标将移动到 0 索引。例如。一开始，为了向左或向右移动我的光标，我必须用我的键盘箭头键来做到这一点。

有人知道我该如何解决这个问题吗？

```
public sub LoadTicket(byval TicketID as integer)

    Dim CmdString As SqlClient.SqlCommand = New SqlClient.SqlCommand("Select * from CRMTicketDetails where ID=" & TicketID, ConnestionString)

    TicketTA.SelectCommand = CmdString
    TicketDS.Clear()
    TicketTA.Fill(TicketDS, "MyTable")
    TicketsBindingSource.DataSource = TicketDS.Tables("MyTable")
    TicketBuilder.DataAdapter = TicketTA 

    me.textbox1.databindings.clear
    me.textbox1.databindings.add("text",TicketsBindingSource,"TicketSubject")

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:31:26.140

好的，我终于找到了我的问题，这很奇怪。我的表单具有以下设置

```
 With Form_
            .TopLevel = False
            .MdiParent = MainForm
            .Parent = MainForm.SplitContainer1.Panel2
            .FormBorderStyle = Windows.Forms.FormBorderStyle.FixedToolWindow
            .Dock = DockStyle.Fill
            .Show()
            .BringToFront()
        End With 
```

解决问题的简短版本

```
form.borderstyle=none 
```

# facebook - 向尚未安装我的 Facebook 应用的人发送通知

> ID：13931474
> 
> 赞同：7
> 
> 时间：2012-12-18T10:58:55.447
> 
> 标签：facebook, facebook-graph-api, notifications, facebook-apps, facebook-app-requests

MyApp 用户可以选择一个 Facebook 朋友并向他们发送一个匿名的圣诞愿望。发送愿望的人的身份永远不会被泄露，这一点非常重要。

只要收件人也是 MyApp 用户，一切都可以，因为这样我就可以通过 Notifications API 发送通知。但是，如果收件人不是 MyApp 用户，我该怎么办？我对解决方法的想法是：

*   向发件人询问收件人的电子邮件地址，然后将通知发送到那里。
*   要求任何收件人的朋友是 MyApp 用户在他的墙上张贴/消息通知。

还有其他想法吗？请记住，收件人无法知道愿望发送者是谁。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T17:38:10.123

在我们当前的实现中，我们不得不解决这个限制。

您有多种策略：在朋友墙上发帖、发消息或打开图表操作。

我们实施了一项“招募”行动，该行动已张贴在您的墙上。

从这里开始，您可以将其绑定到自定义对象（可以代表您的应用程序网站）。

每个操作最多可以标记 10 个人，因此只需限制一次发送的邀请数量即可。这种庄严的最大优势是人们会被提醒他们在某处被引用，有些人可能需要通过个人资料检查，这会给你更高的知名度:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T22:11:08.907

正如您从[Notifications API 文档](https://developers.facebook.com/docs/app-notifications/)中看到的那样，通知只能发送给应用程序的现有用户 - 无法将它们发送给未授权您的应用程序的用户。

也无法在用户的时间线上发布“匿名”帖子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:34:48.523

您可以通过将提要发布到他们的时间线来向您的朋友发送通知。[这里](http://25labs.com/tutorial-post-to-multiple-facebook-wall-or-timeline-in-one-go-using-graph-api-batch-request/)的例子
但不幸的是 facebook 将在 2013 年 2 月删除这个设施，不用担心你也可以通过[对话提要](https://developers.facebook.com/docs/reference/dialogs/feed/)
发布 这些消息不是匿名的，facebook 不允许任何没有来源和接收者身份验证的东西，也不要透露身份。

# javascript - 如何从源获取 iframe 的高度

> ID：13931476
> 
> 赞同：1
> 
> 时间：2012-12-18T10:59:05.353
> 
> 标签：javascript, html, iframe

```
<iframe id="frame1" name="frame1" width="200" height="600" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://localhost/Widget/"></iframe> 
```

`http://localhost/Widget/`我想使用 JavaScript从页面中找到这个 iframe 的高度。

有什么办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:41:57.180

我在自己的解决方案中对这个问题采取了不同的方式：在 iframe 中，我有：

```
<body onload="parent.setsize(document.body.scrollHeight);"> 
```

在父级中，我有一个 js 函数：

```
function setsize(pixels){ 
if(navigator.appName=="Microsoft Internet Explorer") pixels+=40;
if (navigator.userAgent.indexOf("Firefox")!=-1) pixels+=40;
document.getElementById('produktet').style.height=pixels+"px"; 
```

如您所见，iframe 内容的总高度为：document.body.scrollHeight

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:02:47.917

你必须先让“父母”这样做。您可以通过 获取父级`document.parent`，因此以下应该有效（未经测试）：

```
parent.getElementById( 'frame1' ).getAttribute( 'height' ); 
```

如果您在父级中加载了 jQuery，则可以使用它：

```
parent.jQuery('#frame1').attr('height'); 
```

**编辑**：但是请注意，这里有一个安全限制：两个页面必须在同一个域上才能工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-27T17:18:15.110

绕过跨源问题。您可以在身体加载之前读取高度：

```
<html>
  <head>
    <script>
        var iframeSize = Math.max( document.documentElement.clientHeight,
                                   document.documentElement.scrollHeight,
                                   document.documentElement.offsetHeight );
    </script> 
  </head>
<body>
  ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:00:12.527

```
$('#frame1').attr('height'); 
```

使用 jQuery。或者

```
document.getElementbyId('frame1').getAttribute('height'); 
```

用纯js。

# wcf - 尝试在 WCF 服务中启动 NServiceBus 实例时出现空传输

> ID：13931477
> 
> 赞同：0
> 
> 时间：2012-12-18T10:59:07.583
> 
> 标签：wcf, ninject, nservicebus, nservicebus3

我正在使用 NServiceBus 3.3.3。我使用 Ninject 作为我的容器，并通过绑定到以下方法来初始化模块中的总线：

```
Bind<IBus>().ToMethod(context =>
{
    return CreateBus();
}).InSingletonScope();

private IBus CreateBus()
{
    var bus = NServiceBus.Configure.With()
    .NinjectBuilder(this.Kernel)
    .DefineEndpointName("MyEndpointName")
    .MsmqTransport()
    .IsTransactional(true)
    .PurgeOnStartup(false)
    .DisableRavenInstall()
.DisableTimeoutManager()
    .InMemorySubscriptionStorage()
    .XmlSerializer()
    .UnicastBus()
    .ImpersonateSender(false)
    .CreateBus();

    return bus.Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install());
} 
```

相同的代码在不同的（MVC4）项目中工作正常，但在我的 WCF WAS 服务中，我似乎总是为 null的`transport`成员，因此第 824 行失败。`UnicastBus``transport.MaxThroughputPerSecond = license.MaxThroughputPerSecond;`

> 你调用的对象是空的。在 NServiceBus.Unicast.UnicastBus.NServiceBus.IStartableBus.Start(Action startupAction) in c:\TeamCity\buildAgent\work\nsb.master_2\src\unicast\NServiceBus.Unicast\UnicastBus.cs:Access.Cloud.WebService 的第 824 行.Modules.NServiceBusModule.CreateBus() in l:\Projects\aCloud\InsightIntegration\Access.Cloud.WebService\Modules\NServiceBusModule.cs: 第 47 行 Access.Cloud.WebService.Modules.NServiceBusModule.b__0(IContext context) in l :\Projects\aCloud\InsightIntegration\Access.Cloud.WebService\Modules\NServiceBusModule.cs:line 25 at Ninject.Activation.Provider'1.Create(IContext context) in c:\Projects\Ninject\ninject\src\Ninject\ Activation\Provider.cs：C 中 Ninject.Activation.Context.Resolve() 的第 38 行：
> 在 System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 源) 在 System.Linq.Enumerable.WhereSelectArrayIterator2.MoveNext()

我也在调试器中检查过它，果然`transport`是空的。

我猜这是环境问题，但我认为传输只是来自一些在`MsmqTransport()`调用时设置的绑定。我尝试将加载模块的代码从 Ninject 网络引导程序移动到 Global.asax，但它没有任何区别。

任何帮助或指导表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T15:51:48.347

问题是您正在使用该方法来创建对总线的引用。您正在使用的方法应该在进程启动时调用一次，就是这样。

解决方法是将总线变量存储在该类的字段中，然后在容器注册中使用该字段，如下所示：

```
Bind<IBus>().ToMethod(context =>
{
    return bus;
}).InSingletonScope(); 
```

# html - 跨越浏览器 100% 高度和缩放的 Div

> ID：13931478
> 
> 赞同：0
> 
> 时间：2012-12-18T10:59:12.980
> 
> 标签：html, css, height, zooming

```
body, html{
    min-height: 100%;
    height: 100%;
}

#wrapper_with_fancy_bg_that_blends_into_bodys_bg{
    height: 100%; 
    min-height: 100%; 
} 
```

这很尴尬，但我不知道在放大然后向下滚动时如何解决这个问题：

![放大时高度 100% 不起作用](../Images/4ed1021e45ff8a7266c9055f5ee01cca.png) _

我想出的唯一解决方案是将 div 的高度设置为窗口调整大小时的主体高度。有什么办法可以让 div 实际上跨越 100% 的身高，无论使用纯 css 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:18:29.137

这应该可以解决问题：

```
html, body { 
    margin: 0; 
    padding: 0; 
    height: 100%; 
}  

#wrapper_with_fancy_bg_that_blends_into_bodys_bg {  
    min-height: 100%;
    height:auto !important;  
    height:100%; 
    overflow: hidden !important;
    /* your fancy background here */
} 
```

这是一个有效的 JsFiddle： http: [//jsfiddle.net/hehUH/1/](http://jsfiddle.net/hehUH/1/)或完整视图[http://jsfiddle.net/hehUH/1/show/](http://jsfiddle.net/hehUH/1/show/)

# asp.net - ASP.Net 向导控件在 ie10 中中断

> ID：13931488
> 
> 赞同：0
> 
> 时间：2012-12-18T10:59:54.870
> 
> 标签：asp.net, vb.net, internet-explorer-10

我有以下代码片段，用于嵌入在 datagridview 页脚中的 asp.net 向导控件，它可以根据我的需要完美运行。它仍然在 Firefox、Chrome 和 opera 中正确呈现，但是在升级到 IE 10 时，整个向导被扭曲了。

我们的大多数客户都是 IE 狂热者。悲伤。

[IE 和 FireFox 中的图像链接](https://www.dropbox.com/sh/2fl1i40bo71suuk/rATtGEK2OF)

我对向导所在的模板字段的标记

```
<asp:TemplateField HeaderText="ISCID">
                    <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" SortExpression="ISCID" Text='<%# Eval("ISCID") %>' ReadOnly="true" />
                    </ItemTemplate>

                    <FooterTemplate>
                        <asp:Panel runat="server" ID="FooterMessagePanel1" Style="text-align: center" Wrap="False">
                       <asp:Label runat="server" ID="LabelFooterMessage1" Text="Click the + button to initiate a new transfer" />
                        </asp:Panel>

                        <asp:Panel runat="server" ID="TransferWizardPanel" Style="display: none" Width="100%" Wrap="False">

                            <asp:Wizard ID="TransferWizard" DisplayCancelButton="true" runat="server" HeaderText="Share transfer Wizard"
                                HeaderStyle-Font-Size="Larger"
                                HeaderStyle-CssClass="CaptionLabelGVsm"
                                OnFinishButtonClick="TransferWizard_FinishButtonClick"
                                OnCancelButtonClick="TransferWizard_CancelButtonClick"
                                OnActiveStepChanged="TransferWizard_ActiveStepChanged"
                                StepNextButtonType="Image"
                                StepNextButtonImageUrl="~/images/Next16.png"
                                StepPreviousButtonType="Image"
                                StepPreviousButtonImageUrl="~/images/Previous16.png"
                                CancelButtonType="Image"
                                CancelButtonImageUrl="~/images/Cancel16.png"
                                ActiveStepIndex="0" Width="100%">

                                <SideBarTemplate>
                                    <asp:DataList ID="SideBarList" runat="server" OnItemDataBound="SideBarList_ItemDataBound" HorizontalAlign="Justify" RepeatDirection="Horizontal">
                                        <ItemTemplate>
                                            <asp:LinkButton ID="SideBarButton" ForeColor="Black" runat="server" CssClass="MenuBar"></asp:LinkButton>
                                        </ItemTemplate>
                                    </asp:DataList>

                                    </tr><tr>
                                </SideBarTemplate>
                                <StartNavigationTemplate>
                                    <asp:Panel ID="panStart" runat="server">
                                        <asp:ImageButton runat="server" ID="imgStart" ImageUrl="~/images/Next16.png"
                                            CommandName="MoveNext" />
                                        <asp:ImageButton ID="startCancelButton" runat="server" CausesValidation="False" CommandName="Cancel" ImageUrl="~/images/Edit_UndoHS.png" OnClientClick="return confirm('Are you sure you want to cancel');" />
                                    </asp:Panel>
                                </StartNavigationTemplate>
                                <StepNavigationTemplate>

                                    <asp:ImageButton ID="StepPreviousButton" runat="server" CausesValidation="False" CommandName="MovePrevious" ImageUrl="~/images/Previous16.png" />
                                    <asp:ImageButton ID="StepNextButton" runat="server" CausesValidation="true" CommandName="MoveNext" ImageUrl="~/images/Next16.png" />
                                    <asp:ImageButton ID="CancelButton" runat="server" CausesValidation="False" CommandName="Cancel" ImageUrl="~/images/Edit_UndoHS.png" />
                                </StepNavigationTemplate>
                                <FinishNavigationTemplate>
                                    <asp:ImageButton ID="FinishButton" runat="server" CausesValidation="False" CommandName="MoveComplete" ImageUrl="~/images/Finish16.png" />

                                </FinishNavigationTemplate>

                                <WizardSteps>
                                    <asp:WizardStep ID="WizardStep1" runat="server" Title="Transferor Details">
                                        <asp:Panel runat="server" ID="TransferFromAllotmentsPanel" Style="display: none">
                                            <table class="TableControlGV" style="width: 100%">
                                                <tr>
                                                    <td class="LabelColumnGV" style="text-align: left">Class</td>

                                                    <td class="DescColumnGV">
                                                        <asp:TextBox ID="AllotClassGVDDList" Width="100%" runat="server" CssClass="classInput" ReadOnly="False" />
                                                          <asp:RequiredFieldValidator ID="RequiredFieldValidatorAllotClass" runat="server" ControlToValidate="AllotClassGVDDList" Text="" InitialValue=""
                                                            Display="Dynamic" ErrorMessage="Enter share class"></asp:RequiredFieldValidator>
                                                    </td>
                                                </tr>
                                            </table>

                                            <table class="TableControlGV" style="width: 100%">
                                            <tr>
                                                <td colspan="6" class="CaptionLabelGVsm" style="text-align: left">Avalaible Certificates</td>
                                            </tr>
                                            <tr>
                                                <td style="width: 100%">

                                                    <asp:GridView ID="TrnsfreeWizardGridView" runat="server" AutoGenerateColumns="False" DataKeyNames="ISCID,ClassCode"
                                                        CssClass="grid" Width="100%" OnRowEditing="TrnsfreeWizardGridView_RowEditing"
                                                        EnableModelValidation="True" ShowFooter="False">
                                                        <RowStyle CssClass="GridViewRow" />
                                                        <SelectedRowStyle CssClass="GridViewRowSelected" />
                                                        <EditRowStyle BackColor="Azure" />
                                                        <EditRowStyle CssClass="GridViewRowEdit" />
                                                        <AlternatingRowStyle CssClass="GridViewRowAlt" />
                                                        <Columns>

                                                        </Columns>

                                                        <EmptyDataTemplate>

                                                        </EmptyDataTemplate>

                                                        <FooterStyle CssClass="CaptionLabelGVsm" />

                                                    </asp:GridView>
                                                </td>
                                            </tr>
                                        </table>

                                        </asp:Panel>
                                    </asp:WizardStep>
                                    <asp:WizardStep ID="WizadStep2" runat="server" Title="Transfer Details">

                                        <asp:Panel ID="NewTransferPanel" runat="server" Style="display: block" Width="100%">

                                        </asp:Panel>

                                    </asp:WizardStep>

                                    <asp:WizardStep ID="WizardStep3" runat="server" Title="Transfer Summary" OnActivate="WizardStep2_Activate">

                                        <asp:Panel ID="TransferSummaryPanel" runat="server">

                                            <asp:GridView ID="GridViewSummary" runat="server" AutoGenerateColumns="False" CssClass="grid">
                                                <Columns>
                                                    <asp:BoundField HeaderText="Date" DataField="TransDate" />
                                                    <asp:BoundField HeaderText="Transferor" DataField="Transferor" />
                                                    <asp:BoundField HeaderText="Transferee" DataField="Transferee" />
                                                    <asp:BoundField HeaderText="Class" DataField="ShareClass" />
                                                    <asp:BoundField HeaderText="OldCertNo" DataField="OldCertNumber" />
                                                    <asp:BoundField HeaderText="NewCertNo" DataField="NewCertNumber" />
                                                    <asp:BoundField HeaderText="Amount" DataField="Amount" />
                                                    <asp:BoundField HeaderText="Shares" DataField="Shares" />
                                                </Columns>
                                            </asp:GridView>
                                        </asp:Panel>

                                    </asp:WizardStep>

                                    <asp:WizardStep ID="WizardStep4" runat="server" Title="Transfer Complete">
                                        <asp:Panel ID="PanelComplete" runat="server" Style="display: block">

                                            <asp:Label ID="LabelMessage" runat="server" Text="Share transfer completed successfully<br>Click Finish to exit wizard or new to add a new transfer"></asp:Label>
                                            <asp:ImageButton ID="ButtonNew" runat="server" Text="New Transfer" OnClick="ButtonNew_Click" ImageUrl="~/images/add.png" />

                                        </asp:Panel>

                                    </asp:WizardStep>

                                </WizardSteps>
                            </asp:Wizard>

                        </asp:Panel>
                    </FooterTemplate>

                </asp:TemplateField> 
```

我已经尝试了好几个小时来纠正这个问题，但我所有的尝试都被顽固的 IE10 挫败了。请帮助不要让自己把头撞到墙上。侧边栏模板中不寻常的 tr 打开和关闭标签是一个 hack（得到在这个论坛上）强制侧边栏菜单水平运行，似乎不是渲染问题的根源。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:46:36.493

尤里卡!!!!。我发现 IE10 无法覆盖在行创建事件上设置的初始宽度。通过将此代码片段放在 datagridview 的行数据绑定事件中，

```
If e.Row.RowType = DataControlRowType.Footer Then
         If Request.Browser.Type = "IE7" Then
                    e.Row.Cells(1).Width = 800
                    e.Row.Cells(1).HorizontalAlign = HorizontalAlign.Left
         End if
End if 
```

我的问题解决了。奇怪的是如何在 Visual Studio 2012 中将 IE10 浏览器类型检测为 IE7。

# database - How to get the total number of tables in postgresql?

> ID：13931494
> 
> 赞同：47
> 
> 时间：2012-12-18T11:00:06.693
> 
> 标签：database, postgresql, postgresql-8.4

Is there any way by which I can get the total number of tables in a Postgresql database? The postgresql version I'm using is PostgreSQL 8.4.14.

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-12-18T12:41:01.667

```
select count(*)
from information_schema.tables; 
```

Or if you want to find the number of tables only for a specific schema:

```
select count(*)
from information_schema.tables
where table_schema = 'public'; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-18T11:59:42.353

Just try to search in pg_stat... tables or information_schema you can find there very useful informations about your database.
Example:

```
select * from  pg_stat_user_tables ;
select count(*) from  pg_stat_user_tables ; 
select * from  pg_stat_all_tables ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-24T08:47:21.213

If you want to get just the number of tables (without views) then:

```
select count(*) from information_schema.tables where table_type = 'BASE TABLE'; 
```

Or you can also filter by schema name by adding the where condition like:

```
table_schema = 'public' 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-10-21T10:12:48.670

```
select Count(*) from sys.tables 
```

# sql - sql语句访问sql

> ID：13931497
> 
> 赞同：1
> 
> 时间：2012-12-18T11:00:11.450
> 
> 标签：sql, ms-access

```
SELECT eventID,
       eventRedacteur,
       eventEvenement,
       eventGenreId,
       eventDatum,
       eventLocatieId,
       eventLocatieNaam,
       eventPlaatsId,
       eventBijzonderheden,
       eventBezoekers,
       lokId,
       lokNaam,
       lokUrl,
       pltsId,

       (SELECT pltsNaam
         FROM tblAgendaPlaatsen
         WHERE pltsId=tblAgendaPunten.eventPlaatsId) AS eventPlaatsNaam,

       (SELECT genreNaam
         FROM tblAgendaGenre
         WHERE genreId=tblAgendaPunten.eventGenreId) AS eventGenre,
       lokadres,
       lokhuisnr
FROM tblAgendaPunten
LEFT JOIN tblAgendaLocaties ON eventLocatieId=tblAgendaLocaties.lokId 
```

我收到不支持加入的错误。

我也尝试在 Access 中重新制作 SQL，但没有运气。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:13:08.547

您可能应该用连接替换您的子查询：

```
SELECT eventID,
   eventRedacteur,
   eventEvenement,
   eventGenreId,
   eventDatum,
   eventLocatieId,
   eventLocatieNaam,
   eventPlaatsId,
   eventBijzonderheden,
   eventBezoekers,
   lokId,
   lokNaam,
   lokUrl,
   pltsId,

   pltsNaam,

   genreNaam,

   lokadres,
   lokhuisnr
FROM ((tblAgendaPunten
LEFT JOIN tblAgendaLocaties 
    ON tblAgendaPunten.eventLocatieId = tblAgendaLocaties.lokId)
LEFT JOIN tblAgendaPlaatsen
    ON tblAgendaPunten.eventPlaatsId = tblAgendaPlaatsen.pltsId)
LEFT JOIN tblAgendaGenre
    ON tblAgendaPunten.eventGenreId = tblAgendaGenre.genreId 
```

请注意每个嵌套连接周围的括号。

# api - 无法使用 Linkedin API 获得技能？

> ID：13931501
> 
> 赞同：2
> 
> 时间：2012-12-18T11:00:27.533
> 
> 标签：api, linkedin, linkedin-api

我正在尝试构建一个小型应用程序，我可以在其中找到我的 LinkedIn 网络中人们的技能。我已经成功地进行人员搜索以找到此人的 ID。

但是我无法获得我拥有的身份的人的技能。

如果有可能通过LinkedIn获得我的第一和第二学位连接中的人的技能，我不是。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-10T22:45:36.400

TL;DR -**您无法使用 Linkedin 的 API 检索连接的技能**。

来自[Linkedin 的 Connections API 参考](https://developer.linkedin.com/documents/connections-api)：

> 对于 1 度连接，您只能检索具有 r_basicprofile 成员权限的个人资料字段

**但是**：虽然技能字段在 r_basicprofile 权限下不可用，但似乎技能是公开可用的，因此可以通过其他方法提取，例如。[刮](http://en.wikipedia.org/wiki/Web_scraping)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T16:48:17.117

我有同样的问题。您当然可以检索通过 LinkedIn 授权的会员资料的技能（您代表该用户拨打电话）。但似乎你无法获得 1 级和 2 级连接的技能。

阅读 LinkedIn 开发者论坛，我得到了很多关于个人资料字段的答案和问题。有人说-是的，有可能，其他人则没有。顺便说一句，LinkedIn 员工说不，而且您可以找到可以获得此类信息的系统/应用程序 - 例如[apigee.com](https://apigee.com/)，但请查看此线程：[API 密钥](https://developer.linkedin.com/forum/i-seem-have-access-my-1st-degrees-past-positions-and-skills) （这里谈论的是职位而不是门槛，但访问此信息的方式是相似的）

> 看起来允许您访问过去职位的第一度连接的 API 密钥是在我们 2012 年 8 月发布之前生成的。该版本引入了成员权限，并且该版本生成的任何密钥都不允许您访问过去的连接位置。仍然拥有旧密钥的用户可以继续使用该功能，直到他们选择将他们的密钥迁移到新版本，这也允许访问更多字段，例如用户电子邮件地址。

# facebook - Facebook评论审核问题

> ID：13931503
> 
> 赞同：0
> 
> 时间：2012-12-18T11:00:37.073
> 
> 标签：facebook, joomla2.5, facebook-comments

我想使用 Facebook 评论插件，所以我流这个[链接](http://developers.facebook.com/docs/reference/plugins/comments/)
我成功地将插件集成到我的 Joomla 页面中。我将下面的元标记添加到我的页面标题中：
`<meta property="fb:admins" content="{YOUR_FACEBOOK_USER_ID}"/>`

插件正在运行 我可以向我的内容添加评论，但我无法在[审核工具](https://developers.facebook.com/tools/comments)中审核它们。

PS：我在本地主机中使用插件，但其中的 URL`data-href`在线。我尝试创建一个 Facebook 应用程序，并`App domain`使用与`data-href`.

有肝吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:53:06.090

您添加了错误的元标记。如果您想在[审核工具](https://developers.facebook.com/tools/comments)中审核评论：

*   您需要添加`<meta property="fb:app_id" content="{YOUR_APPLICATION_ID}"/>`正确`YOUR_APPLICATION_ID`设置到您的页面标题，
*   在[应用程序的设置中](https://developers.facebook.com/apps)，您必须添加管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:59:01.447

我找到了解决方案，我只需在我的实时服务器中对其进行测试。但我不明白为什么它在我的本地机器上不起作用。

# c# - 结合 IMAP LIST 和 STATUS 命令

> ID：13931508
> 
> 赞同：0
> 
> 时间：2012-12-18T11:01:00.387
> 
> 标签：c#, imap

有没有办法结合 IMAP 命令来获取文件夹列表和获取文件夹的邮件计数的方法。

```
$ LIST "" *
$ STATUS INBOX (messages) 
```

这两个正在工作，但有点慢。我正在创建一个程序，它需要来自 IMAP 服务器（例如 Gmail）的这两个信息，并且只需一个服务器请求即可完成此任务，因为这会花费宝贵的时间。

我正在使用 c# 和一个基于[http://www.codeproject.com/Articles/29594/How-to-Access-Emails-Using-the-IMAP-Protocol的自写类](http://www.codeproject.com/Articles/29594/How-to-Access-Emails-Using-the-IMAP-Protocol "本教程")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:03:33.370

该协议允许您对命令进行管道化，因此您可以在等待第一个命令的结果时发出第二个命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T21:27:01.413

seit rfc 5819 ( [https://www.rfc-editor.org/rfc/rfc5819](https://www.rfc-editor.org/rfc/rfc5819) ) geht das, sofern der serve es unterstuetzt:

$ LIST "" * 返回（状态（消息））

__

根据 RFC 5819 ( [https://www.rfc-editor.org/rfc/rfc5819](https://www.rfc-editor.org/rfc/rfc5819) ) 是可以的，只要服务器支持以下命令：

```
$ LIST "" * RETURN (STATUS (MESSAGES)) 
```

# wpf - WPF DataGrid 与 RowDetailsTemplate 中的 DataGrid 没有获得垂直滚动条

> ID：13931510
> 
> 赞同：1
> 
> 时间：2012-12-18T11:01:02.127
> 
> 标签：wpf, datagrid, scrollbar, rowdetailstemplate

我有一个带有 RowDetailsTemplate 的 DataGrid，其中包含一个 DataGrid。父网格放置在它自己的行中。该行定义为

```
<RowDefinition Height="*" /> 
```

通常这意味着该行将采用可用高度的 REST 并初始化它。但是，如果 DataGrid 对于屏幕上剩余的空间来说太大，则 DataGird 的按钮会显示在“屏幕下方”而不是滚动条。

我试图通过为父网格定义 MaxHeight=400 来解决它，但即使如此，父网格的长度也是无限的，并且仍然会变得很长，以至于它的底部部分是不可见的。

有什么想法该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:25:05.630

我认为你不应该使用`StackPanel`. 如果`Orientation`是`Vertical`，它的高度将增长到无穷大。也许你应该使用另一个面板。

另请参阅此链接：[ScrollViewer not scrolling in WPF](https://stackoverflow.com/questions/1132967/scrollviewer-not-scrolling-in-wpf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:39:31.603

将 MaxHight 设置为父网格对网格的高度没有任何影响。另一方面，将 MaxHight 设置为内部网格确实有效。

因此我这样解决了：首先我把我的行命名为“rowGridRow”。

比我订阅内部网格的 Loaded 事件并这样做：

```
 private void dgGroupMedlem_Loaded(object sender, RoutedEventArgs e)
    {
        DataGrid dgGroupMedlem = sender as DataGrid;
        dgGroupMedlem.MaxHeight = rowGridRow.ActualHeight - xxx;
    } 
```

xxx 是补偿周围其他事物（如标题）的一些值，并且可能应该根据父网格具有的行数来计算。

# android - Android：未正确选择大小桶（适用于 720x1280 屏幕分辨率设备）

> ID：13931512
> 
> 赞同：0
> 
> 时间：2012-12-18T11:01:13.557
> 
> 标签：android, android-emulator

我有一个应用程序，其布局几乎适用于除 Android Note II 之外的所有设备，主要是因为一些报告的填充问题。

在查看了设备的规格后，我确定此设备的屏幕尺寸为 720x1280，并在与此配置匹配的值存储桶中添加了一个 dimens.xml 文件：

```
values-w720dp-h1280dp/dimens.xml 
```

我在 Manymo.com 上启动了一个模拟器并选择了一个屏幕为 720x1280 (320dpi) 的设备并运行了我的应用程序，似乎 Android 总是选择默认的 dimens.xml (ie `values/dimens.xml`) 并且从不`values-w720dp-h1280dp/dimens.xml`

由于我没有物理设备来测试它，所以我依赖于模拟它。这是模拟器上的问题还是我做错了什么？

# ajax - 在 jquery-jeditable.js 中使用 jquery-ajaxfileupload 时出现一些奇怪的错误

> ID：13931513
> 
> 赞同：2
> 
> 时间：2012-12-18T11:01:12.027
> 
> 标签：ajax, file-upload, jeditable

当您按下上传按钮或取消时，我收到了该错误。但是其他没有上传的可编辑字段工作正常。使用：Jeditable - jQuery 就地编辑插件版本 1.7.1

不知道该怎么办。谢谢你的回答。 ![错误](../Images/969203b80606485d75b0f3f2c4d5bdfd.png)

```
$.editable.addInputType('ajaxupload', {
/* create input element */
element: function (settings) {
    settings.onblur = 'ignore';
    var input = $('<input type="file" id="upload" name="upload"/>');
    $(this).append(input);
    return (input);
},
content: function (string, settings, original) { /* do nothing */ },
plugin: function (settings, original) {
    var form = this;
    form.attr("enctype", "multipart/form-data");
    $("button:submit", form).bind('click', function () {
       $.ajaxFileUpload({
            type: 'POST',
            url: "/EZhandler.ashx?exId=" + GetExhibitorId() + "&exhibitionId=" + GetExhibitionId()+"&type=logo",
            secureuri: false,
            fileElementId: 'upload',
            dataType: 'json',
            success: function (data, status) {
                $(original).html(data);
                original.editing = false;
                location.reload();
            },
            error: function (data, status, e) {
                alert(e);
            }
        });
        return (false);
    });
} 
```

});

```
$(document).ready(function () {
    $('.logo').editable(function (value, settings) {
        return value;
    },
    {
        type: 'ajaxupload',
        submit: 'Upload',
        cancel: 'Cancel',
        style: 'inherit',
        tooltip: "Click to upload..."
     });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:53:00.010

$(原始).html(数据); - 检查数据状态，mb 它是空的

# lua - 更新文本以显示变量

> ID：13931515
> 
> 赞同：1
> 
> 时间：2012-12-18T11:01:19.867
> 
> 标签：lua, coronasdk

我在屏幕上显示了一个变量，并且希望在发生任何事情时进行此更新。

我以为我用这个解决了它：

```
local function updateCredits( event )
    creditsText = display.newText(credits, 400, 0, native.systemFont, 36)
end

Runtime:addEventListener( "enterFrame", updateCredits ) 
```

但这只是每次都重绘文本（我应该已经看到了）。有什么方法可以更新文本而不需要我删除旧实例并放入新实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:46:04.890

通过使用 creditsText.text = credits 更新现有文本来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T00:33:33.150

在 Corona 中使用 newText 创建的每个文本都有一个名为 text 的属性。它代表将在屏幕上显示的文本。更改它将更新其在屏幕上的外观。

# scala - 这是参数类型吗 - [T <: AnyRef]

> ID：13931516
> 
> 赞同：3
> 
> 时间：2012-12-18T11:01:22.633
> 
> 标签：scala, scalatest

查看 scala 测试中“拦截”的方法签名：

```
 def intercept[T <: AnyRef](f: => Any)(implicit manifest: Manifest[T]): T = { 
```

不知道怎么`[T <: AnyRef]`用？这看起来像一个参数类型，但为什么它包含在尖括号 - [] 中？

这是完整的方法：

```
 def intercept[T <: AnyRef](f: => Any)(implicit manifest: Manifest[T]): T = {
    val clazz = manifest.erasure.asInstanceOf[Class[T]]
    val caught = try {
      f
      None
    }
    catch {
      case u: Throwable => {
        if (!clazz.isAssignableFrom(u.getClass)) {
          val s = Resources("wrongException", clazz.getName, u.getClass.getName)
          throw newAssertionFailedException(Some(s), Some(u), 4)
        }
        else {
          Some(u)
        }
      }
    }
    caught match {
      case None =>
        val message = Resources("exceptionExpected", clazz.getName)
        throw newAssertionFailedException(Some(message), None, 4)
      case Some(e) => e.asInstanceOf[T] // I know this cast will succeed, becuase iSAssignableFrom succeeded above
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:01:07.583

这种语言结构称为类型参数化，您可以在此处阅读有关它的更多信息：

[http://www.artima.com/pins1ed/type-parameterization.html](http://www.artima.com/pins1ed/type-parameterization.html)

在这种情况下，方法也可以声明类型参数。如果您已经有一些 Java 背景，那么这里有一个非常相似的 Java 等价物：

```
public <T extends Object> T intercept(Runnable f) {
  // ...
} 
```

# maven - 使用 Tycho 构建产品时出现“图标未替换”错误

> ID：13931518
> 
> 赞同：7
> 
> 时间：2012-12-18T11:01:27.423
> 
> 标签：maven, icons, eclipse-rcp, tycho, p2

我正在使用 Tycho 0.16.0，但出现以下错误：

```
Error - 7 icon(s) not replaced in C:\Users\weich01\AppData\Local\Temp\p2.brandingIron8219115442087687624\launcher.exe using C:\Development\Workspaces\Workspace RCP SR2\de.mycompany.myproduct.product\target\products\MyProduct\de.mycompany.myproduct.feature\logo_pms_2011.ico 
```

使用 Eclipse 中的导出向导，一切正常，因此产品定义正确。图标文件包含各种尺寸的位图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T11:28:38.750

您应该检查您的产品配置文件 (*.product)。图标的路径应该与产品项目相关。以项目为例：

```
com.myapplication.product/
    myProduct.product
    icons/
        application.ico 
```

您的 myProduct.product 文件应如下所示：

```
 ...
 <launcher name="executable">
   <linux icon="icons/application.xpm"/>
   <macosx icon="icons/application_32.icns"/>
   <solaris/>
   <win useIco="true">
      <ico path="icons/application.ico"/>
      <bmp/>
   </win>
 </launcher>
 ... 
```

检查这个 tycho 产品配置示例： [https ://github.com/jsievers/tycho-demo/tree/master/tychodemo.product](https://github.com/jsievers/tycho-demo/tree/master/tychodemo.product)

# php - 在 Wordpress 中发布和重定向

> ID：13931521
> 
> 赞同：1
> 
> 时间：2012-12-18T11:01:39.130
> 
> 标签：php, wordpress

使用基于 Wordpress 的功能：

$response = wp_remote_post()

我可以 POST 数据并在 $response->body 中检索 POST 页面的正文

但是如何发布并将用户重定向到发布页面？

创建表单页面和提交按钮不是一个选项，因为我正在尝试在 Wordpress 中创建一个用于团购插件的插件。

使用 GET 也不是一个选项，因为“目标”POST 页面不允许 URL 中的数据。

请帮我 ！

# facebook - 在无头浏览器上登录 Facebook

> ID：13931522
> 
> 赞同：0
> 
> 时间：2012-12-18T11:01:43.337
> 
> 标签：facebook, node.js, oauth-2.0, facebook-php-sdk, phantomjs

我的 Facebook 应用程序具有在服务器端无头浏览器上自动执行任务的功能（例如访问应用程序链接）。现在，我使用 Facebook SDK 登录用户并访问用户的新闻流以搜索链接和其他信息。一旦应用程序找到了所有链接，它应该将此信息传递给无头浏览器，然后例如继续访问它们。

问题是这些无头浏览器窗口没有登录。我希望无头浏览器在用户从应用程序启动任务时临时登录。

这可能吗？

# oop - 没有类概念的面向对象语言

> ID：13931524
> 
> 赞同：14
> 
> 时间：2012-12-18T11:01:45.847
> 
> 标签：oop, class, types, programming-languages, instances

我正在阅读 Scala 论文的介绍，发现以下声明：

> 需要注意的是，一些面向对象的语言没有类的概念。

**问题：**哪些面向对象的语言没有类概念，它们如何处理类型（类）-对象（类型实例）关系？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T12:09:44.767

尽管在流行语言中将它们混为一谈很常见，但类和类型是不同的概念。类正确理解为对象的蓝图，定义了类的实例所具有的属性和方法，但是（对象）类型是接口，描述了可以用什么参数调用什么方法。

因此，不难想象没有类的语言。您所需要的只是某种用于创建对象和赋予（新）对象属性和方法的构造；Javascript 是一个众所周知的例子。在此类语言中，继承看起来有点不寻常，但肯定可以做到（例如，参见[Antero Taivalsaari 的文章“关于继承的概念”](http://dl.acm.org/citation.cfm?id=243441)）。

# sql - 简单查询根据计数逻辑删除表中的记录

> ID：13931528
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:01:58.500
> 
> 标签：sql, plsql

具有 pk 和状态列的表，其值为“Y”、“N”、“NULL”

询问：

获取状态列为“Y”的记录计数，如果该计数超过记录总数的 1%，则不删除，否则删除表中的记录。

我试过这样

```
Declare   
  v_count Number;   
  v_count1 Number;   
BEGIN   
  v_count := select count(*) from temp; 
  v_count1 := select count(*) from temp where status = 'Y' ;

  v_count := v_count + ((0.1) * (v_count))

  if (v_count1 > v_count)
  {
    insert into  temp1 values(pk,status)
  } 
  else
  {   
    Delete from temp ;
  }
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:22:15.580

```
Declare   
v_count Number;   
v_count1 Number;   
BEGIN   
select count(*) into v_count from temp; 
select count(*) into v_count1 from temp where status = 'Y' ;

v_count := v_count + ((0.01) * (v_count))

if (v_count1 > v_count)
{
  insert into  temp1 values(pk,status)
} 
else
{   
  Delete from temp ;
}
END; 
```

像这样更正你的函数 sql 查询.......享受

# c++ - 在字典中查找单词模式，高性能

> ID：13931537
> 
> 赞同：4
> 
> 时间：2012-12-18T11:02:35.927
> 
> 标签：c++, regex, dictionary, map, unordered-map

我需要建立某种字典，另外还包含每个单词在语言中出现的单词频率。通常，这将使用 std::unordered_map 来实现，对吗？现在这是关键......我想找到所有符合某些正则表达式的单词及其频率，而性能是我最关心的问题。

我认为我无法避免迭代一系列元素并逐元素检查它们是否与模式匹配。因此，我认为使用一对向量而不是地图可能更聪明：

```
using namespace std;
typedef vector<pair<string, double>> Dictionary
vector<Dictionary::const_iterator> index;
Dictionary dict;
...
for_each(index['d'], index['e'], DoSomething); 
```

这将允许我有效地迭代所有以“d”开头的单词。当然，这只有在我已经知道我的正则表达式的第一个字母时才有帮助，而我认为这通常不是这种情况。另外，如果我已经毫无疑问地知道整个单词并且只想查找它的频率，我将不得不遍历整个部分，直到找到它。地图可以让我更快地查找它。例如，在寻找“鹿”这个词时

```
Dictionary::const_iterator it = 
    find_if(index['d'], index['e'], []    // Lambda
        (pair<string, double> const &pr)
        {
           return pr.first == "deer";
        }); 
```

根本不是最优的！一个解决方案可能是针对不同的情况使用不同的字典实现，即使内存不是大问题，这似乎是一个愚蠢的解决方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:37:28.520

按照您的想法， an `std::vector<std::pair<boost::regex, int> >`可能是最有效的；您反复尝试寻找匹配项。

如果您愿意做这项工作，一个更好的解决方案是实现您自己的正则表达式类，*无需* 捕获（`(...)`大多数正则表达式中的运算符）。如果没有捕获，将正则表达式转换为纯 DFA 相当容易，并且可以将正则表达式转换为正*则*表达式*，*每个正则表达式返回不同的接受代码。（这是我自己的正则表达式类的工作方式。对于大多数应用程序来说，它不如 Boost 灵活，因为它不支持捕获。但它确实允许以下操作：

```
RegularExpression t1( expr1", 0 );
RegularExpression t2( expr2", 1 );
//  ...
RegularExpression t = t1 | t2 /* | t3 | t4 | ... */ ; 
```

匹配时，expr1匹配返回0，expr2匹配返回1，以此类推；然后，您可以使用匹配 id 作为 int 向量的索引。（如果没有匹配则返回 -1。）

通过这种方式，搜索时间与输入的长度成线性关系。无论您尝试匹配多少个表达式。（我的 RegularExpression 类是 20 多年前设计的，用于生成编译器前端。大约 15 年前，我重做了它来处理 UTF-8 作为输入。）

多年来，代码都可以在网上找到，但我目前没有网页，所以除非有人保留了旧副本，否则没有。我很乐意将其发送给您，但请注意，该库已经有一段时间没有维护了，因此使用现代编译器对其进行编译可能并非易事。（它最初是用准标准 C++ 编写的，并且仍然包含许多变通方法以使其能够与 Sun CC 4.x 之类的东西一起编译。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:16:46.840

您最好的选择是使用有限的 Satae 传感器，例如[http://www.ims.uni-stuttgart.de/projekte/gramotron/SOFTWARE/SFST.html](http://www.ims.uni-stuttgart.de/projekte/gramotron/SOFTWARE/SFST.html)。

正如您所说，该地图将占用大量空间。

您可以将传感器视为一个大的正则表达式（正则表达式是一个编译的自动机）。

# php - 在 Windows 中，我在哪里可以找到 PhP 目录？

> ID：13931539
> 
> 赞同：0
> 
> 时间：2012-12-18T11:02:40.760
> 
> 标签：php, windows

我做了这段代码：

```
$privKey = openssl_pkey_new();  
    //define(INITIALCODE, "hello.com");
    $hello = openssl_error_string() ;
    $timenow=time(); 
```

$hello的内容是error:02001003:system library:fopen:No such process

所以我搜索解决方案，它说我必须将 PhP 目录添加到路径：

```
Go to Control Panel and open the System icon (Start -> Settings -> Control Panel -> System, or just Start -> Control Panel -> System for Windows XP/2003)
Go to the Advanced tab
Click on the ‘Environment Variables’ button
Look into the ‘System Variables’ pane
Find the Path entry (you may need to scroll to find it)
Double click on the Path entry
Enter your PHP directory ant the end, including ‘;’ before (e.g. ;C:\php)
Press OK and restart your computer 
```

问题是什么是 PHP 目录，我在哪里可以找到它？它在phpmyinfo中吗？什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:12:12.807

搜索`php.exe`。它所在的目录应该添加到您的路径变量中。

# css - 元素样式与计算样式具有不同的值

> ID：13931541
> 
> 赞同：1
> 
> 时间：2012-12-18T11:02:50.823
> 
> 标签：css, computed-style

我遇到了一个令人费解的问题，属性的计算样式与元素的样式具有不同的值。

先用几句话描述一下我的情况

我正在为元素的背景颜色属性设置动画，当动画结束时，我检索计算的 bgcolor 值并将其应用于元素的样式。这工作正常

但是，如果我现在尝试更改 bgcolor，则没有任何反应，尽管该值确实是在元素上设置的，正如开发人员工具报告的那样。

此时，如果您（通过浏览器的开发人员工具）在样式和计算样式之间切换，则 2 报告的内容之间存在差异，当然计算样式优先。

我在小提琴上创建了一个测试脚本，描述了这种情况 [http://jsfiddle.net/d2S3d/14/](http://jsfiddle.net/d2S3d/14/)

附加一些示例css导致stackoverflow不允许我在没有它的情况下提交帖子

.animate{ 动画名称：bg_kf; 动画持续时间：5s；动画定时功能：线性；动画延迟：0s；动画迭代计数：1；动画填充模式：转发；动画方向：正常；

```
 -webkit-animation-name: bg_kf;
    -webkit-animation-duration: 5s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-delay: 0s;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-fill-mode: forwards;
    -webkit-animation-direction: normal;

    -moz-animation-name: bg_kf;
    -moz-animation-duration: 5s;
    -moz-animation-timing-function: linear;
    -moz-animation-delay: 0s;
    -moz-animation-iteration-count: 1;
    -moz-animation-fill-mode: forwards;
    -moz-animation-direction: normal;

    -o-animation-name: bg_kf;
    -o-animation-duration: 5s;
    -o-animation-timing-function: linear;
    -o-animation-delay: 0s;
    -o-animation-iteration-count: 1;
    -o-animation-fill-mode: forwards;
    -o-animation-direction: normal;
}

@keyframes bg_kf {
    from {background-color:#FFFFFF}
    to {background-color:red}
}

@-moz-keyframes bg_kf {
    from {background-color:#FFFFFF}
    to {background-color:red}
}

@-webkit-keyframes bg_kf {
    from {background-color:#FFFFFF}
    to {background-color:rgba(255, 140, 74, 0.16)}
}

@-o-keyframes bg_kf {
    from {background-color:#FFFFFF}
    to {background-color:rgba(255, 140, 74, 0.16)}
} 
```

任何帮助表示感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:11:36.950

这里的问题是您定义的动画属性`.animate`保持背景颜色为红色，而不管实际的内联样式规则指定什么。这就是为什么切换内联样式似乎没有任何效果的原因。

如果您`.animate`在应用内联样式后立即删除该类，一切将再次恢复正常：

```
$("#sample").bind('animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd', function(){
    var computedBg = $(this).css('background-color');
    $(this).css('background-color', computedBg);
    $(this).removeClass('animate');
}); 
```

这是一个演示（尝试在动画完成后单击按钮）：http: [//jsfiddle.net/vcfDj/](http://jsfiddle.net/vcfDj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T09:40:46.690

您已将动画填充模式设置为“转发”。其效果是将动画 CSS 属性保持在动画结束时的值（不管其他样式设置）。将其设置为“无”将解决您的问题！

# c# - 选中复选框时打开文件上传

> ID：13931543
> 
> 赞同：2
> 
> 时间：2012-12-18T11:02:58.500
> 
> 标签：c#, asp.net, c#-4.0, file-upload

当我选中一个复选框时，我想打开文件上传。在我的 aspx 页面中包含一个复选框和一个文件上传。文件上传控件可见状态为假。现在我想在检查检查时打开文件上传对话框。请帮我这样做..

```
<form id="form1" runat="server">
    <div>
        <asp:CheckBox ID="chk1" runat ="server" />
        <asp:FileUpload ID="FileUpload1" runat="server" visible="false"  />

    </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:18:13.467

您需要使用[OnCheckedChanged](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.oncheckedchanged.aspx)事件。

例如。

```
 <asp:CheckBox ID="CheckBox1" runat="server" 
            oncheckedchanged="CheckBox1_CheckedChanged" AutoPostBack="True"/> 
```

在后面的代码中

```
protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
    {
        //open file upload
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:04:39.770

例如，您可以添加 onclick 事件

```
onclick="document.getElementById('<%=FileUpload1.ClientID%>').click(); return false;" 
```

# javascript - dygraph 不打印隐藏的 div 元素中的数据

> ID：13931549
> 
> 赞同：3
> 
> 时间：2012-12-18T11:03:35.690
> 
> 标签：javascript, jquery, dygraphs

我一直在尝试在我的网站中使用 dygraph ( [http://dygraphs.com/](http://dygraphs.com/) ) 进行可视化，它适用于所有功能。我正在尝试构建的网站是一个动态的网站，起初我尝试将其打印到可见`div`元素上，这很好。然后我尝试引入一个`div`可以在单击时展开和折叠的元素。所以如果我尝试打印`div`折叠的图表，它将不起作用，只有当它展开时，图表才会被打印出来。我正在添加一个 jsfiddle 链接来显示我的问题。

[http://jsfiddle.net/dTUQC/2/](http://jsfiddle.net/dTUQC/2/)

这个问题可能是什么原因？？？

```
 $("#chartdiv").css({"height":"160px"});
g = new Dygraph(document.getElementById("chartdiv"), input, {
    width : 500,
    includeZero : true,
    animatedZooms : true,
    drawXGrid : false,
    plotter : barChartPlotter
});
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:24:12.093

其背后的原因是，由于您使用的是[slideToggle()](http://api.jquery.com/slideToggle/)函数，因此 display 属性会根据需要保存和恢复。的样式`div chartdiv`是`display : none`关闭时...无法在该 dom 元素中呈现条形图。并且当它打开时，样式会更改为，`display:block`所以这次图表找到了`div chartdiv`.

这是小提琴..

[http://jsfiddle.net/dTUQC/3/](http://jsfiddle.net/dTUQC/3/)

检查控制台..我在哪里显示了样式...如果我将其更改`div chartdiv`为`display:block`..即使 div 处于关闭状态，也会呈现图形..

**更新**

或使用`.show()`..

[http://jsfiddle.net/dTUQC/9/](http://jsfiddle.net/dTUQC/9/) **一键**

# java - 读取为 JSONObject 时小写的对象属性

> ID：13931550
> 
> 赞同：1
> 
> 时间：2012-12-18T11:03:35.893
> 
> 标签：java, json, hibernate

我有以下问题。我正在使用 Hibernate 模板从我的 MySQL 数据库中读取记录列表，然后我需要修改结构，所以我是 JSONObject 和 JSONArray（使用我猜官方库： http: [//www.json.org/java /](http://www.json.org/java/)）。如果我使用 List 作为服务器响应，则记录字段会正确命名（感谢使用了 @JsonProperty 注释）。但是，如果我试图用这个 List 元素创建一个 JSONObject，我的所有字段都以小写字母开头，这会破坏我的 UI。

这是我使用的“任务”模型：

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

import org.codehaus.jackson.annotate.JsonAutoDetect;
import org.codehaus.jackson.annotate.JsonProperty;
import org.codehaus.jackson.annotate.JsonIgnoreProperties;

@JsonAutoDetect
@JsonIgnoreProperties(ignoreUnknown = true)
@Entity
@Table(name="tasks")
public class Task {

    @Id
    @GeneratedValue
    @Column(name="Id")
    private int Id;

    @Column(name="Name", nullable=false)
    private String Name;

    @JsonProperty("Id")
    public int getId() {
        return Id;
    }

    @JsonProperty("Id")
    public void setId(int id) {
        this.Id = id;
    }

    @JsonProperty("Name")
    public String getName() {
        return Name;
    }

    @JsonProperty("Name")
    public void setName(String name) {
        this.Name = name;
    }
} 
```

这是用于从数据库中获取记录的代码（去掉了所有不必要的部分）：

```
public List<Task> getEvents() {

    DetachedCriteria criteria = DetachedCriteria.forClass(Task.class);

    return hibernateTemplate.findByCriteria(criteria);
}    

private static JSONArray read() throws JSONException{
    List<Task> list = getEvents();
    Iterator<Task> listIterator = list.iterator();
    JSONArray ret = new JSONArray();
    String parentId;

    while(listIterator.hasNext()){
        Task task = listIterator.next();
        JSONObject taskJSON = new JSONObject(task);
        ret.put(taskJSON);
    }
} 
```

正如您在我的服务器响应中看到的，所有字段名称都以小写字母开头： `{"id":18,"name":"Release"}`

任何想法如何覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:41:20.110

JSON.org API 旨在用于非常简单的序列化/反序列化，它不能满足您的需求。话虽如此，您的大部分注释实际上来自杰克逊，它***可以***完成您想要完成的工作。

您已经为 Jackson 正确注释了 POJO，因此返回符合它们的 JSON 字符串，使用[ObjectMapper](http://jackson.codehaus.org/1.9.2/javadoc/org/codehaus/jackson/map/ObjectMapper.html)序列化：

```
final List<Task> list = getEvents();
final ObjectMapper mapper = new ObjectMapper();
final String json = mapper.writeValueAsString(list); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:49:45.550

您的类被过度注释，并且违反了 Java 代码约定。

最低要求如下。您添加的所有其他内容都是默认完成的。

```
@Entity
@Table(name="tasks")
public class Task {

    @Id
    @GeneratedValue
    @Column(name="Id")
    @JsonProperty("Id")
    private int id;

    @Column(name="Name", nullable=false)
    @JsonProperty("Name")
    private String name;

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

要序列化您的课程，您需要的只是`ObjectMapper`课程

```
String json = new ObjectMapper().writeValueAsString(getEvents()); 
```

其输出应如下所示：

```
[{"Id":18,"Name":"Build"}, {"Id":19,"Name":"Release"}] 
```

如果可能的话，我不鼓励使用大写的属性名称，因为它违反了一般的代码约定。

# asp.net - 如何通过 webconfig 连接到 ASPNETDB.MDF？

> ID：13931554
> 
> 赞同：0
> 
> 时间：2012-12-18T11:03:41.947
> 
> 标签：asp.net, form-authentication

我的 App_Data 中有一个数据库，当我将**Membership**和**Role Manager**和**Profile**合并到我的 Web 应用程序中时，系统会自动创建该数据库。

问题是 ASPNETDB 没有连接字符串，它不是由系统创建的。我假设它存储在其他地方，我感觉 machine.config。

我已经从 app_data 中删除了这个数据库并重新连接并将其存储在我的 SQL SERVER 2008 中。

如何通过 Webconfig.sys 连接到它以使我的应用程序服务正常工作？

问候，茶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:54:15.760

我将 machine.config 中的内容复制到`<provider>`,`<roleManager>`和`<Profile>`. 添加了一个连接字符串。工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T13:51:19.547

```
<system.web>
<membership defaultProvider="Pragatee_MLM_MamberProvider"> <providers> <add connectionStringName="ConnectionPragatee" enablePasswordRetrieval="false"
 enablePasswordReset="true" applicationName="PragateeMLM" requiresUniqueEmail="true" passwordFormat="Hashed" name="Pragatee_MLM_MamberProvider" type="System.Web.Security.SqlMembershipProvider" /></providers></membership><roleManager enabled="true" cacheRolesInCookie="true" defaultProvider="Pragatee_MLM_RoleProvider"><providers><add applicationName="PragateeMLM" connectionStringName="ConnectionPragatee" name="Pragatee_MLM_RoleProvider" type="System.Web.Security.SqlRoleProvider"/></providers></roleManager></system.web> 
```

# html - CSS未应用于溢出

> ID：13931556
> 
> 赞同：0
> 
> 时间：2012-12-18T11:03:54.027
> 
> 标签：html, css, overflow, css-tables

我有一个从文本文件加载的表。该表包含在容器 div 中。我已经为表格设置了样式，但是当表格的列对于容器 div 的宽度而言太多时，内容会溢出并且现在可以滚动。这不是问题，但是，从发生溢出的角度来看，表格的样式不再适用。

请看一下图片：

![带有溢出内容的表格](../Images/d6ff65e3f1de57b39d6dc5f12ce8429c.png)

此表的样式如下：

```
table.static {
 width: 100%;
 margin-bottom: 0!important;
 margin-top: 0!important;
}

table.static thead {
  background: #D0D6DA;
  border-bottom: 1px solid #aaa;
}

table.static thead tr th {
 border-left: none;
 border-right: none;
 line-height: 30px;
 padding: 0 10px;
 text-align: left;
 color: #333;
 font-weight: 400;
 text-shadow: 0 1px 0 #fff;
}

table.static tbody tr td {
 line-height: 25px;
 padding: 0 10px;
 border: 0 solid #999;
}

table.static tbody tr td {
 border-bottom: 1px solid #E1E5E7;
}

table.static tbody tr:last-child td {
 border-bottom: 0;
}

table.static tbody tr.even td {
 background-color: #EDF1F3;
 border-bottom: 1px solid #D8DCDE;
}

table.static tbody tr td input,
table.static tbody tr td button {
 margin: 10px 0;
} 
```

谁能解释为什么会这样，我能做些什么来解决它？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:08:12.320

试试这个

```
table.static {
    min-width: 100%;
    margin-bottom: 0!important;
    margin-top: 0!important;
} 
```

# android - LibGDX - 使用着色器创建复杂的纹理对象 (OpenGL ES 2.0)

> ID：13931558
> 
> 赞同：0
> 
> 时间：2012-12-18T11:03:58.340
> 
> 标签：android, 3d, opengl-es-2.0, libgdx

我正在尝试创建 3D 场景。有带云的纹理地球。我认为我可以通过透明球体和云的纹理来创建云（如果我错了，请纠正我）。所以我在下面有一些代码：

```
ShaderProgram shader;
Mesh mesh, cloudMesh;
Texture texture, cloudTexture;
Matrix4 matrix = new Matrix4();

 public void create() {
String vertexShader = "attribute vec4 a_position;    \n"
    + "attribute vec4 a_color;\n" 
    + "attribute vec2 a_texCoords;\n"
    + "uniform mat4 u_worldView;\n" 
    + "varying vec4 v_color;"
    + "varying vec2 v_texCoords;"
    + "void main()                  \n"
    + "{                            \n"
    + "   v_color = vec4(1, 1, 1, 1); \n"
    + "   v_texCoords = a_texCoords; \n"
    + "   gl_Position =  u_worldView * a_position;  \n"
    + "}                            \n";
String fragmentShader = "#ifdef GL_ES\n"
    + "precision mediump float;\n"
    + "#endif\n"
    + "varying vec4 v_color;\n"
    + "varying vec2 v_texCoords;\n"
    + "uniform sampler2D u_texture;\n"
    + "void main()                                  \n"
    + "{                                            \n"      
     + "  gl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n"
    + "}";

shader = new ShaderProgram(vertexShader, fragmentShader);
if (shader.isCompiled() == false) {     
  System.exit(0);
}

mesh = ObjLoader.loadObj(Gdx.files.internal("objects/earth.obj").read()); 
cloudMesh = ObjLoader.loadObj(Gdx.files.internal("objects/cloud_sphere.obj").read()); 
texture = new Texture(Gdx.files.internal("images/earthmap.jpg"));
cloudTexture = new Texture(Gdx.files.internal("images/earth_clouds_map.jpg"));
}

public void render() {
angle += Gdx.graphics.getDeltaTime() * 30;
matrix.setToRotation(axis, angle);

Gdx.graphics.getGL20().glViewport(-10, 10, Gdx.graphics.getWidth(),
    Gdx.graphics.getHeight());

Gdx.graphics.getGL20().glClearColor(0.2f, 0.2f, 0.2f, 1);
Gdx.graphics.getGL20().glClear(GL20.GL_COLOR_BUFFER_BIT);
Gdx.graphics.getGL20().glEnable(GL20.GL_TEXTURE_2D);
Gdx.graphics.getGL20().glEnable(GL20.GL_BLEND);
Gdx.graphics.getGL20().glBlendFunc(GL20.GL_SRC_ALPHA, GL20.GL_ONE_MINUS_SRC_ALPHA);
texture.bind();
shader.begin();
shader.setUniformMatrix("u_worldView", matrix);
shader.setUniformi("u_texture", 0);
mesh.render(shader, GL20.GL_TRIANGLE_STRIP);
shader.end();    
//SHOULD I USE SHADER PROGRAM LIKE BELOW?
cloudTexture .bind();
shader.begin();
shader.setUniformMatrix("u_worldView", matrix);
shader.setUniformi("u_texture", 0);
cloudMesh.render(shader, GL20.GL_TRIANGLE_STRIP);
shader.end();  
} 
```

所以我在球体上看不到任何纹理。错在哪里？如果有人有任何想法、链接或示例，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T16:38:46.433

在加载纹理之前，您必须定义一个“槽”来存储纹理：

```
Gdx.graphics.getGL20().glActiveTexture(GL20.GL_TEXTURE0);
texture = new Texture(Gdx.files.internal("images/earthmap.jpg"));
texture.bind();

Gdx.graphics.getGL20().glActiveTexture(GL20.GL_TEXTURE1);
cloudTexture = new Texture(Gdx.files.internal("images/earth_clouds_map.jpg"));
cloudTexture.bind(); 
```

然后在您的渲染方法中绑定纹理并使用这些“插槽”将其分配给着色器

```
shader.setUniformi("u_texture", 0);
...
...
shader.setUniformi("u_texture", 1); 
```

这应该是所有...

# excel - 如何在 Symfony2 liuggio Excel 中读取 Excel 中的数据

> ID：13931559
> 
> 赞同：-2
> 
> 时间：2012-12-18T11:03:58.530
> 
> 标签：excel, symfony, upload

嗨，我是 Symfony2 的新手，我需要将 Excel 文件上传到 MYSQL 数据库？谁能给我一个如何做的例子？谢谢你拉基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:05:28.023

首先将：“CodePlex/PHPExcel”：“1.7.7”添加到您的 composer.json 文件并进行更新。

在 PHPExcel 内容和您的代码之间添加一个类。就像是：

```
namespace Cerad\ArbiterBundle\Format;

class Excel
{
    protected function createReaderForFile($fileName,$readDataOnly = true)
    {
        // Most common case
        $reader = new \PHPExcel_Reader_Excel5();

        $reader->setReadDataOnly($readDataOnly);

        if ($reader->canRead($fileName)) return $reader;

        // Make sure have zip archive
        if (class_exists('ZipArchive')) 
        {
            $reader = new \PHPExcel_Reader_Excel2007();

            $reader->setReadDataOnly($readDataOnly);

            if ($reader->canRead($fileName)) return $reader;
        }

        // Note that csv does not actually check for a csv file
        $reader = new \PHPExcel_Reader_CSV();

        if ($reader->canRead($fileName)) return $reader;

        throw new Exception("No Reader found for $fileName");

    }
    public function load($fileName, $readDataOnly = true)
    {
        $reader = $this->createReaderForFile($fileName,$readDataOnly);

        return $reader->load($fileName);
    }
} 
```

现在在您的代码中，您将拥有类似的内容：

```
$excel = new Excel();
$reader = $excel->load('SomeFileName.xls');

$ws = $reader->getSheet(0);

$rows = $ws->toArray(); 
```

并处理掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T23:22:08.703

Cerad 的示例是一个选项，但它不使用该捆绑包，也不与 mysql 一起使用，该捆绑包是一个暴露服务的简单依赖项，如果您必须将数据从 excel 存储到 mysql，您需要先在某处上传文件，然后
用服务读取文件，$excelObj = $this->get('xls.load_xls5')->load($filename); 然后你必须阅读 PHPExcel 的文档

希望它有一点帮助

# web-services - 从 freebsd 或其他操作系统连接到 Web 服务

> ID：13931565
> 
> 赞同：0
> 
> 时间：2012-12-18T11:04:21.850
> 
> 标签：web-services, tcp, freebsd, gsoap

我会解释我的问题，请尝试帮助我

我想从 Point-Of-Cell Handheld 访问网络服务

它的SDK在eclipse上使用C语言

起初我想学习如何从 C 或 c++ LANGUAGE 访问 Web 服务

我成功地使用了 gsoap 库，我可以使用它访问网络服务。

我修改了 stdsoap2.c 文件以适应手持库，因为我修改了 tcp-connect 和 tcp-send 和 tcp-receive 等等

我的问题在这里这个文件中有很多错误，它是运行时错误，因为内存失败或 pthread 失败等等

我的主管告诉我这是因为这个文件是为windows准备的，并要求我在另一个平台上搜索gsoap版本工作

他尝试了Linux版本，但它也不起作用

他让我搜索适用于嵌入式系统或 FreeBSD 操作系统的副本

他是对的吗？是否有任何 gsoap 副本可以满足我的需求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:59:37.747

Gsoap 在 FreeBSD 上可用。只需从以下位置安装端口`/usr/ports/devel/gsoap`

如果您的代码是为 Windows 编写的，您将不得不用 FreeBSD 上可用的函数替换特定于 Windows 的函数。

# html - How can change width of dropdown list?

> ID：13931571
> 
> 赞同：76
> 
> 时间：2012-12-18T11:04:42.660
> 
> 标签：html, css, list, drop-down-menu, html-select

I have a listbox and I want to decrease its width.

Here is my code:

```
<select name="wgtmsr" id="wgtmsr" style="width: 50px;">
  <option value="kg">Kg</option>
  <option value="gm">Gm</option>
  <option value="pound">Pound</option>
  <option value="MetricTon">Metric ton</option>
  <option value="litre">Litre</option>
  <option value="ounce">Ounce</option>
</select> 
```

This code works on IE 6 but not in Mozilla Firefox (latest version). Can anybody please tell me how I can decrease the `width` of the dropdown list on Firefox?

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-12-18T11:11:34.427

Try this code:

```
<select name="wgtmsr" id="wgtmsr">
<option value="kg">Kg</option>
<option value="gm">Gm</option>
<option value="pound">Pound</option>
<option value="MetricTon">Metric ton</option>
<option value="litre">Litre</option>
<option value="ounce">Ounce</option>
</select> 
```

CSS:

```
#wgtmsr{
 width:150px;   
} 
```

If you want to change the width of the option you can do this in your css:

```
#wgtmsr option{
  width:150px;   
} 
```

Maybe you have a conflict in your css rules that override the width of your select

[DEMO](http://jsfiddle.net/B3uSD/2/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-18T11:16:53.343

The dropdown width itself cannot be set. It's width depend on the option-values. See also here ( jsfiddle.net/LgS3C/ )

How the select box looks like is also depending on your browser.

You can build your own control or use Select2 [https://select2.org](https://select2.org)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-18T11:13:10.313

try the `!important` argument to make sure the CSS is not conflicting with any other styles you have specified. Also using a [reset.css](http://www.cssreset.com/) is good before you add your own styles.

```
select#wgmstr {
    max-width: 50px;
    min-width: 50px;
    width: 50px !important;
} 
```

or

```
<select name="wgtmsr" id="wgtmsr" style="width: 50px !important; min-width: 50px; max-width: 50px;"> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-11-28T20:10:05.250

This:

`<select style="width: XXXpx;">`

XXX = Any Number

Works great in Google Chrome v70.0.3538.110

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-18T11:09:58.800

Create a css and set the value `style="width:50px;"` in *css* code. Call the class of *CSS* in the drop down list. Then it will work.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-18T11:13:35.690

If you want to control the width of the **list that drops down**, you can do it as follows.

**CSS**

```
#wgtmsr option {
    width: 50px;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-12-21T12:41:35.953

This worked for me:

```
ul.dropdown-menu > li {
    max-width: 144px;
} 
```

in Chromium and Firefox.

# ruby-on-rails - Rspec：在 get 方法中使用参数的正确方法

> ID：13931572
> 
> 赞同：1
> 
> 时间：2012-12-18T11:04:44.877
> 
> 标签：ruby-on-rails, rspec, rspec-rails

这是我的 RSpec 测试：

```
describe "GET #show" do
  it "assigns the requested user to @user" do
    user = FactoryGirl.build(:user)
   get :show, id: user
    assigns(:user).should eq(user)
  end
end 
```

这是我的导轨控制器：

```
 def show
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
  end 
```

我收到以下错误消息：

```
Failures:

  1) UsersController GET #show assigns the requested user to @user
     Failure/Error: get :show, id: user
     ActiveRecord::RecordNotFound:
       Couldn't find User without an ID
     # /home/tim/fairym/app/controllers/users_controller.rb:25:in `show'
     # ./users_controller_spec.rb:21:in `block (3 levels) in <top (required)>' 
```

为了使测试通过，在这里使用 get 方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:07:34.937

你应该使用`FactoryGirl.create`而不是`build`. 原因是`create`实际上在数据库中做了一个条目，包括ID。`build`只在内存中创建一个对象，没有 ID。

# ios - 如何在 iOS 应用程序中处理动态 WS URL

> ID：13931576
> 
> 赞同：0
> 
> 时间：2012-12-18T11:04:58.077
> 
> 标签：ios, web-services, url, redirect, dynamic

我正在开发一个与远程 WS 交互的 iOS 应用程序。

由于几个原因，我不能完全确定删除 WS 的 URL 是否永远相同，所以我想实现一个优雅的策略来自动检索当前的 WS URL。当然，这应该以透明的方式完成，在用户活动期间没有任何中断或需要更新应用程序。

我现在最好的想法是从不同的“稳定”URL 获取当前的 WS URL，例如 www.mystabledomain.com/getwsurl

你们有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:00:22.380

您可以在稳定服务上设置您的电话 url，并让稳定服务器上的脚本调用动态 url，然后将数据返回到您的手机吗？这样一来，您的手机始终与同一个 URL 通信，并且可以为您以后与 WS 通信的方式提供一些灵活性。

就像是

手机 <--> 稳定服务器 <--> 动态 WS

# javascript - 在多个页面上使用多个 jQuery 插件？

> ID：13931577
> 
> 赞同：0
> 
> 时间：2012-12-18T11:05:07.607
> 
> 标签：javascript, jquery, html

我有一个使用一些 JavaScript/jQuery 插件的网站，然后我有一个`default.js`文件，它为每个不同的页面使用插件功能。

例如，我拥有的一些插件包括：

*   自定义滚动条插件
*   幻灯片插件
*   一个cookie插件
*   等等

然后在`default.js`文件中，我将执行如下操作（伪代码）：

```
var scrolling = findScrollbarDiv;
scrolling.ScrollFunction({ options }); 
```

（然后对于幻灯片+我拥有的其他插件也是如此）

但是，如果有一个`findScrollbarDiv`返回 null 的地方，我会收到类似以下的错误：

> ScrollFunction 不是函数

这不是因为元素返回 null，而是因为我没有包含此页面的插件文件。我的理由是我不想在每个页面上都包含每个文件（即使它不需要），因为这可能会导致不必要的 HTTP 请求（尤其是在主页上，它只需要一个插件）

这个错误反过来又搞乱了 JavaScript 的其余部分。

克服这个问题的最佳方法是什么？无论是否需要，我都应该在每个页面上包含每个插件文件吗？或者是否有一些类似以下的 JavaScript 可以使用：

```
var scrolling = findScrollbarDiv;
if(scrolling != null) {
    scrolling.ScrollFunction({ options });
} 
```

（这对我来说有点笨拙，但如果这是最好的解决方案，请告诉我）

还是使用一个默认的 js 文件来启动所有插件是个坏主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:09:15.440

如果您使用相同的头文件并且不介意包含该文件，则可以始终在将事件附加到该元素之前检查该元素是否存在。

这是一个例子：

```
if(jQuery('#someElement').length > 0){
    jQuery('#someElement').ScrollFunction({ options });
} 
```

要么，要么为每个函数提供一个 JavaScript 文件。

因此，您将有一个用于画廊，一个用于 cookie 等。并且仅包括每个页面所需的那些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:17:34.123

如果：

```
scrolling && scrolling.ScrollFunction({ options }); 
```

这对于您想要调用的任何方法都非常有用，并且想要在您执行之前检查父对象是否存在。您可以更进一步（如果需要）并在执行之前检查方法本身是否存在：

```
scrolling && scrolling.ScrollFunction && scrolling.ScrollFunction({ options }); 
```

如果滚动是一个集合，只需检查它的长度（如果长度 == 0，语句将失败）：

```
scrolling.length && scrolling.ScrollFunction({ options }); 
```

# php - 在 php 中使用 rtrim 用于特定目的

> ID：13931579
> 
> 赞同：0
> 
> 时间：2012-12-18T11:05:15.970
> 
> 标签：php, trim

我不太习惯使用 rtrim 和 Reg 表达式。所以我想澄清一下我的疑问：

这是一个网址：`http://imgur.com/r/pics/paoWS`

我试图在这个 url 上使用 rtrim 函数来从整个 url 中只挑选出'paoWs'。这是我尝试过的：

```
$yurl = 'http://imgur.com/r/pics/paoWS';
$video_id = parse_url($yurl, PHP_URL_PATH);

$yid=rtrim( $video_id, '/' ); 
```

我正在使用“$yid”从 imgur 热链接图像。但是尝试此功能后我得到的是：

```
$yid= '/r/pics/paoWS' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:06:58.373

`rtrim`用于修剪右侧的某些字符或空格的字符串。它当然不应该用于您的目的。

假设 URL 结构总是相同的，你可以这样做：

```
$yurl = 'http://imgur.com/r/pics/paoWS'; 
$video_id = parse_url($yurl, PHP_URL_PATH);
$parts = explode('/', $video_id)
$yid = end($parts); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:08:00.820

对于如此“简单”的问题，您不应该使用正则表达式（这很“昂贵”）。

如果你想捕捉 URL 的最后一部分，在最后一个斜杠之后，你可以这样做：

```
$urlParts = explode('/', 'http://imgur.com/r/pics/paoWS');
$lastPart = end($urlParts); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:11:16.233

```
rtim( strrchr('http://imgur.com/r/pics/paoWS' , '/') );   rtrim + strrchr
substr(strrchr('http://imgur.com/r/pics/paoWS', "/"), 1);  substr + strrchr 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T11:13:05.597

`rtrim()`返回过滤后的值，而不是剥离的字符。而且您对它的使用也不正确-它会从**右侧**剥离传递的字符。你也不需要`parse_url()`。已经给出了正确的答案，但这里有一个更快的选择：

```
$yid = substr($yurl, strrpos($yurl, '/')+1); 
```

编辑：还有一个：

```
$yid = ltrim(strrchr($yurl, '/'), '/'); 
```

# java - 面对未显示的消息

> ID：13931581
> 
> 赞同：0
> 
> 时间：2012-12-18T11:05:30.163
> 
> 标签：java, jsf, primefaces

我有一个带有 sendmail 功能的页面。它是一个简单的富文本字段，当按下发送按钮时，会以文本字段作为正文发送邮件。这行得通。但我想显示一条消息“邮件发送”，以便用户看到邮件已发送。我可以通过执行以下操作来做到这一点：

```
addFacesMessage(FacesMessage.SEVERITY_INFO, getMsg("common_mail_send_ok") + " (" + toAddresses[0] + ")"); 
```

此消息显示在该字段中。但这是在我页面的一个完全不同的部分，所以我想在与richtextfield 关联的字段中显示消息。我尝试了以下操作，但没有收到任何消息，也没有收到错误消息。

这是我的jsf

```
<h:messages id="mainmessages" globalOnly="true" styleClass="info" errorClass="error" />
...
<p:fieldset id="emailPanel" toggleable="true" collapsed="true" style="width:800px;">
   <h:outputText value="#{msg.workorderdetail_message}:"/>
   <p:editor id="mailbody" value="#{workOrderDetail.message}" widgetVar="editor" width="500" height="200"/>
   <p:commandButton styleClass="button" process="emailPanel" update="emailPanel mailmessage mainmessages" value="#{msg.workorderdetail_sendemail}" actionListener="#{workOrderDetail.sendMail}" onstart="busyPopup.show()" oncomplete="busyPopup.hide()"/>
    <h:message id="mailmessage" for="mailbody" styleClass="info" errorClass="error"/>
</p:fieldset> 
```

这是我的课

```
public String sendMail() throws Exception {
    ....
    mailer.send();
FacesContext.getCurrentInstance().addMessage(
                "detail:wodetail:mailbody",
                new FacesMessage(FacesMessage.SEVERITY_INFO,
                        getMsg("common_mail_send_ok") + " (" + toAddresses[0] + ")", getMsg("common_mail_send_ok") + " ("
                                + toAddresses[0] + ")"));

        addFacesMessage(FacesMessage.SEVERITY_INFO, getMsg("common_mail_send_ok") + " (" + toAddresses[0] + ")");
...
} 
```

我不知道我做错了什么。我认为这在过去可以工作，我什至有时在开发时收到消息说一些错误消息已添加到 que，但无法显示（因为消息字段未重新呈现）但现在（更新版本的 prime3 .4.2) 我什么也得不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:32:27.733

当消息客户端 ID`detail:wodetail:mailbody`错误时会发生这种情况。对于尚未记住 JSF`NamingContainer`组件以便他们可以通过查看 JSF 源代码来计算它的初学者来说，计算正确客户端 ID 的最简单方法是查看生成的 HTML 输出。在浏览器中打开页面，右键单击并*查看源代码*，查看生成的 HTML 输出`<p:editor>`并将`id`顶级 HTML 元素的 HTML 元素用作 JSF 客户端 ID。

此外，另一个可能的原因是消息组件没有在 ajax 请求上更新。为此，您需要使用 PrimeFaces`autoUpdate="true"`或仅在 ajax 更新中指定消息组件的客户端 ID。在您的特定代码示例中，这似乎已经很好了。所以剩下的唯一可能的原因就是错误的消息客户端 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:42:00.127

添加以下代码。它会对你有所帮助

```
 <p:messages showDetail="true" /> 
```

谢谢

# iphone - 如何在我的应用程序中获取叠加视图

> ID：13931583
> 
> 赞同：1
> 
> 时间：2012-12-18T11:05:29.820
> 
> 标签：iphone, objective-c, ios, ios5, uisearchbar

我需要帮助。实际上，当我点击或单击搜索按钮时，我应该得到一个黑屏。如您所见，使用 in `ABPeoplePicker`。所以可以使用`UITableView`? 我添加了一张图片，可以帮助您解决我的问题。

这是我的代码：-

```
 -(void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
  {
      if(searching)
          return;
      [searchBar setShowsCancelButton:YES animated:YES];
      searching = YES;
      letUserSelectRow = NO;
      [contactTableView setScrollEnabled:NO];
  } 
```

![示例图像][1]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:11:56.113

如果您添加 a`UISearchDisplayController`而不是 a `UISearchBar`，则会自动出现黑屏。如果您在其他地方需要它`UISearchBar`，则必须添加具有黑色背景颜色的视图并在需要时显示/隐藏它。

# android - 如何在android中为具有多行的listview选择itemclick事件？

> ID：13931584
> 
> 赞同：0
> 
> 时间：2012-12-18T11:05:50.947
> 
> 标签：android, web-services, listview, adapter, simplecursoradapter

我正在尝试从服务器获取值并从服务器检索响应，从服务器响应的详细信息需要显示在列表视图中，我也实现了这一点，但是虽然 onitemclick 进程仅列表视图中的第一行执行单击操作，但它是没有为剩余的行执行，我该如何实现它，dat 是我选择的任何行和项目，它必须由我的代码处理，这是我的代码供参考，......

```
 public void userInterface() throws JSONException 
    {
        if(json_user.get(0) != null)
        {
            downloadList1 = (ListView)findViewById(R.id.lvinbox);
            populateData();
            downloadList1.setOnItemClickListener(new OnItemClickListener() 
            {
                public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
                {
                    // TODO Auto-generated method stub
                    fma=(TextView)findViewById(R.id.src);
                    st=(TextView)findViewById(R.id.sub);
                    fma.setOnClickListener(new OnClickListener() 
                    {
                        public void onClick(View v) 
                        {
                            // TODO Auto-generated method stub
                                                            String fm=fma.getText().toString();
                            String s=st.getText().toString();
                            Intent m = new Intent(getApplicationContext(), InActivity.class);
                            m.putExtra("f", fm);
                            m.putExtra("s", s);
                            startActivity(m);
                        }
                    });
                st.setOnClickListener(new OnClickListener() 
                    {
                        public void onClick(View v) 
                        {
                            // TODO Auto-generated method stub
                            String fm=fma.getText().toString();
                            String s=st.getText().toString();
                            Intent m = new Intent(getApplicationContext(), InActivity.class);
                            m.putExtra("f", fm);
                            m.putExtra("s", s);
                            startActivity(m);
                        }
                    });
                }
            });
        }
        else
        {
            Toast.makeText(getApplicationContext(),"Empty",  Toast.LENGTH_LONG).show();
            finish();
            Intent menu = new Intent(getApplicationContext(), MenActivity.class);
            menu.putExtra("username", dest);
            startActivity(menu);
        }
    }
    public void populateData() throws JSONException 
    {
        resultVector = new Vector<ListDataItemInbox>();

        int len = json_user.length();
        System.out.println("length--------------------->"+len);
        for(int i=0;i<len;i++)
        {
            JSONObject obj=json_user.getJSONObject(i);

            listData = new ListDataItemInbox();
            listData.sets(obj.getString(KEY_S));
            listData.setd(obj.getString(KEY_D));
            resultVector.add(listData);

            myHandler.post(myRunnable);

        }
    }
    private Handler myHandler = new Handler();
    private Runnable myRunnable = new Runnable() 
    {
        public void run() 
        {
            customListAdapter = new ListViewAdapterInbox(InActivity.this);
            customListAdapter.setResultsData(resultVector);
            downloadList1.setAdapter(customListAdapter);
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:46:00.040

你可以做这样的事情。在列表适配器类中创建 ArrayList

```
ArrayList<Integer> selectedIds = new ArrayList<Integer>(); 
```

并在同一个类中创建此方法。

```
public void toggleSelected(Integer position){
            selectedIds.clear();
            selectedIds.add(position);
        } 
```

现在，每当您单击列表视图的任何项目时，都会将该项目位置传递给此方法。在您的 getView 方法中，在设置文本之前设置检查。像这样的东西..

```
if (selectedIds.contains(position)){
                  ----- your code ----
              }else{
                 ----- your code ----
              } 
```

它只在选定的位置执行操作。试试看。！

# ruby-on-rails-3.2 - 找不到生成器 formtastic_stylesheets

> ID：13931585
> 
> 赞同：0
> 
> 时间：2012-12-18T11:06:05.533
> 
> 标签：ruby-on-rails-3.2

我想从 formtastic gem 生成样式表。我用的是windows 7。

我使用 Rails 3.2.1 和 ruby​​ 1.9.3p125。我已经安装了 formtastic-2.2.1

我运行命令：

```
rails generate formtastic_stylesheets. 
```

它返回：

```
Could not find generator formtastic_stylesheets. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T03:06:16.980

我相信你应该使用：`rails generate formtastic:install`代替。还，

Rails 3.1 引入了一个资产管道，允许像 Formtastic 这样的插件提供自己的样式表、Javascript 等，而无需运行将它们复制到主机应用程序的生成器。Formtastic 将三个样式表作为引擎提供，您只需要在全局样式表中要求它们。

```
# app/assets/stylesheets/application.css
*= require formtastic
*= require my_formtastic_changes` 
```

# ruby-on-rails - 设计不正确的轨道

> ID：13931587
> 
> 赞同：0
> 
> 时间：2012-12-18T11:06:25.500
> 
> 标签：ruby-on-rails, ruby, devise, gem

我在 rails 中有一个应用程序并使用 devise for `authentication`，显示以下错误而不是路由到`sign_in`页面

我的 route.rb 内容是：

```
Blog::Application.routes.draw do
  devise_for :users 
  resources :posts
  get "home/index"
   root :to => 'home#index'
end 
```

![在此处输入图像描述](../Images/23640f70d6a03d884b4fd9258e27edff.png)

我不确定我错在哪里，如果有人能告诉我错误在哪里，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:20:05.917

使用`:as`选项配置资源名称。

```
<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T02:50:01.673

您需要什么用例`SessionsController`？如果仅用于注销，您可以简单地创建自己的方法来调用`sign_out @user`.

看看[这篇 wiki](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview#using-omniauth-without-other-authentications)文章，看看它是否回答了你的问题。

祝你好运！

# encryption - 使用 db postgres 加密 openerp 中的字段

> ID：13931588
> 
> 赞同：2
> 
> 时间：2012-12-18T11:06:31.257
> 
> 标签：encryption, postgresql-9.1, openerp

我们将在数据库模型 res_partners 中存储一些关于我们客户的敏感信息。

但是，我们不想将此信息存储在简单的文本字段中。如果可能的话，我们希望对这些字段进行一些基本的加密。我们不希望有权访问数据库的人访问这些字段。

有没有办法我们可以在 openerp 或 postgres 中完成这项工作？

谢谢你，维沙尔·基亚拉尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:47:16.357

没有“基本”加密之类的东西。Rot13 无法将您带到这里。如果您的数据足够敏感，值得保护，那么您需要使用最先进的密码器，例如 Blowfish。我建议你好好看看 Bruce Schneier 的书[Applied Cryptography](http://www.schneier.com/book-applied.html)

实现此目的的简单（且不安全）方法是重载模型的`write`和`read`方法以在写入前加密和读取后解密。

棘手的部分是存储加密密钥。您可以将它存储在运行 OpenERP 服务器的计算机上的文件中（假设数据库在另一台服务器上运行）。这仍然很弱，因为密钥将在服务器上清晰可用，但如果您不信任您的数据库服务器管理员，但相信您的 openerp 服务器管理员，它仍然很有用。将数据库服务器放在安全和受信任的地方仍然更容易，并且如果需要加密数据库的脱机副本（例如备份）。

如果您想要更高的安全性，您必须将加密的数据发送到客户端应用程序，并使用用户提供的密钥进行解密。我对 openerp 的这部分知识不够了解，无法说出它是否容易实现。

# cpanel - cpanel 406错误

> ID：13931589
> 
> 赞同：6
> 
> 时间：2012-12-18T11:06:33.283
> 
> 标签：cpanel, bugzilla

我已经在我的 cpanel 上安装了 bugzilla。但是在创建新错误时，它会显示 406 错误

> 不能接受的
> 
> 在此服务器上找不到请求资源 /bugzilla/post_bug.cgi 的适当表示。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

请给我一个解决方案来解决这个问题。我google了很多，发现这可能是服务器问题。但我不知道如何在服务器上解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T09:38:51.443

您正在使用 mod_security？

尝试查看日志文件。

```
tail -f /usr/local/apache/logs/modsec_audit.log 
```

# spring.net - Spring.Objects.Factory.ObjectCreationException：System.ArgumentNullException：键不能为空

> ID：13931591
> 
> 赞同：1
> 
> 时间：2012-12-18T11:06:40.727
> 
> 标签：spring.net, argumentnullexception

这是一个长镜头...

我正在使用 spring 1.3.2，并且随机出现 ArgumentNullException 异常（请参阅下面的堆栈跟踪）。

我在 XML 和代码之间混合配置容器（直接使用 ObjectDefinitionBuilder，没有代码配置）。并且注册是并行进行的（5 个线程加载定义）。

我所有的对象都通过构造函数使用自动装配，错误发生在构造函数中是否有项目的两个组件中。

在容器中注册所有内容*后，*我正在执行以下调用

```
context.GetObjectsOfType(typeof (IFoo)).OfType<DictionaryEntry>().Select(d => (IFoo) d.Value) 
```

从堆栈跟踪和查看代码中，我看到调用`IsAlias`似乎失败了，但不确定我是否理解这是如何发生的。

有什么想法/想法吗？

堆栈跟踪：

```
Spring.Objects.Factory.ObjectCreationException: Error creating object with name 'My.App.SomeFooImplementation' : Initialization of object failed : Key cannot be null.
Parameter name: key ---> System.ArgumentNullException: Key cannot be null.
Parameter name: key
   at System.Collections.Hashtable.ContainsKey(Object key)
   at System.Collections.Specialized.OrderedDictionary.Contains(Object key)
   at Spring.Objects.Factory.Support.AbstractObjectFactory.IsAlias(String name)
   at Spring.Objects.Factory.Support.DefaultListableObjectFactory.DoGetObjectNamesForType(Type type, Boolean includeNonSingletons, Boolean allowEagerInit)
   at Spring.Objects.Factory.Support.DefaultListableObjectFactory.GetObjectNamesForType(Type type, Boolean includePrototypes, Boolean includeFactoryObjects)
   at Spring.Objects.Factory.ObjectFactoryUtils.ObjectNamesForTypeIncludingAncestors(IListableObjectFactory factory, Type type, Boolean includePrototypes, Boolean includeFactoryObjects)
   at Spring.Objects.Factory.Support.DefaultListableObjectFactory.FindAutowireCandidates(String objectName, Type requiredType, DependencyDescriptor descriptor)
   at Spring.Objects.Factory.Support.DefaultListableObjectFactory.ResolveDependency(DependencyDescriptor descriptor, String objectName, IList autowiredObjectNames)
   at Spring.Objects.Factory.Support.ConstructorResolver.CreateArgumentArray(String objectName, RootObjectDefinition rod, ConstructorArgumentValues resolvedValues, ObjectWrapper wrapper, Type[] paramTypes, MethodBase methodOrCtorInfo, Boolean autowiring, UnsatisfiedDependencyExceptionData& unsatisfiedDependencyExceptionData)
   at Spring.Objects.Factory.Support.ConstructorResolver.AutowireConstructor(String objectName, RootObjectDefinition rod, ConstructorInfo[] chosenCtors, Object[] explicitArgs)
   at Spring.Objects.Factory.Support.AbstractAutowireCapableObjectFactory.CreateObjectInstance(String objectName, RootObjectDefinition objectDefinition, Object[] arguments)
   at Spring.Objects.Factory.Support.AbstractAutowireCapableObjectFactory.InstantiateObject(String name, RootObjectDefinition definition, Object[] arguments, Boolean allowEagerCaching, Boolean suppressConfigure)
   --- End of inner exception stack trace ---
   at Spring.Objects.Factory.Support.AbstractAutowireCapableObjectFactory.InstantiateObject(String name, RootObjectDefinition definition, Object[] arguments, Boolean allowEagerCaching, Boolean suppressConfigure)
   at Spring.Objects.Factory.Support.AbstractObjectFactory.CreateAndCacheSingletonInstance(String objectName, RootObjectDefinition objectDefinition, Object[] arguments)
   at Spring.Objects.Factory.Support.AbstractObjectFactory.GetObjectInternal(String name, Type requiredType, Object[] arguments, Boolean suppressConfigure)
   at Spring.Objects.Factory.Support.AbstractObjectFactory.GetObject(String name) 
```

**编辑：** 我刚得到所有的定义名称，不知何故那里有一个空条目，这似乎是问题所在，不知道为什么会发生......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:12:08.613

我能想出的唯一解决办法是改变内部用反射`objectDefinitionNames ArrayList`包裹。*一点都不好，*但似乎可以完成这项工作。`ArrayList.Synchronized`

 *```
 var field = factory.GetType().GetField("objectDefinitionNames", BindingFlags.NonPublic | BindingFlags.Instance);
        if (field == null)
            throw new InvalidOperationException("Could not get Definitions field from application context.");

        var value = (ArrayList) field.GetValue(factory);
        field.SetValue(factory, ArrayList.Synchronized(value)); 
```*

# php - 如何使用 PHP 读取 CSV 文件并在 Table/DIV 中显示内容？

> ID：13931598
> 
> 赞同：4
> 
> 时间：2012-12-18T11:07:19.763
> 
> 标签：php, html, html-table, import-from-csv

我正在使用以下 PHP 代码读取包含两列（例如 x、y）的 CSV 文件并在表格中显示内容：

```
<?Php 

echo "<html><body><table border=1>\n\n";
$f = fopen("data2.csv", "r");
while (($line = fgetcsv($f)) !== false) {
        echo "<tr>";
        foreach ($line as $cell) {
                echo "<td>" . htmlspecialchars($cell) . "</td>";
        }
        echo "<tr>\n";
}
fclose($f);
echo "\n</table></body></html>";
?> 
```

但是，我现在正在使用一个新表格（见下文），我想用它来显示包含 1/2/3/4 等的单元格中的 A 列和包含 5/6/7/8 的单元格中的 B 列。

我怎样才能做到这一点？

```
<table style="text-align: left; width: 406px; height: 200px;"
 border="0" cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td width="25"></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td width="70"></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td colspan="4" rowspan="1">1</td>
      <td>&nbsp;</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td colspan="3" rowspan="1">5</td>
    </tr>
    <tr>
      <td></td>
      <td colspan="4" rowspan="1">2</td>
      <td>&nbsp;</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td colspan="3" rowspan="1">6</td>
    </tr>
    <tr>
      <td></td>
      <td colspan="4" rowspan="1">3</td>
      <td>&nbsp;</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td colspan="3" rowspan="1">7</td>
    </tr>
    <tr>
      <td></td>
      <td colspan="4" rowspan="1">4</td>
      <td>&nbsp;</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td colspan="3" rowspan="1">8</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T17:18:17.457

csv 是逗号分隔值。因此它是一个可以使用 file() 查看和访问的基本文本文件，您可以使用 "\n\r" 或 "\n"

```
 <?php 
     $data = file("all.csv");
     echo $dataintext = implode("\n",$data);
   ?> 
```

脚本从这里开始 tester()

```
 function tester(){
$.post("read.php",{action:'login'},function(data){
    $("#textarea").val(data);
    });
} 
```

html从这里开始

```
 <body> 
     <a href="javascript:tester();">read</a> 
     <textarea id="textarea" width="100%" height="100%" ></textarea>
</body> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T11:48:26.700

使用“fread($f, filesize(filename.kit)”而不是 fgetcsv。

```
<?Php 
echo "<html><body><table border=1>";
$f = fopen("data2.csv", "r");
$fr = fread($f, filesize("data2.csv"));
fclose($f);
$lines = array();
$lines = explode("\n\r",$fr); // IMPORTANT the delimiter here just the "new line" \r\n, use what u need instead of... 

for($i=0;$i<count($lines);$i++)
{
    echo "<tr>";
    $cells = array(); 
    $cells = explode(";",$lines[$i]); // use the cell/row delimiter what u need!
    for($k=0;$k<count($cells);$k++)
    {
       echo "<td>".$cells[$k]."</td>";
    }
    // for k end
    echo "</tr>";
}
// for i end
echo "</table></body></html>";
?> 
```

# c# - 为什么我在 C# 类中收到此错误？

> ID：13931599
> 
> 赞同：0
> 
> 时间：2012-12-18T11:07:21.770
> 
> 标签：c#, mysql, database, class

在有人否决我的问题之前，我想说这是我第一次在 C# 中使用类，我已经做了很多研究，但我仍然遇到错误。新手来了

我试图将 Insert、Delete、Update 和 Count 语句放在类文件中，以便我的代码整洁。

这是我制作的类文件（当然是在研究的帮助下）：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MySql.Data.MySqlClient;
using System.IO;
using System.Windows.Forms;

namespace classlib
{
public class DBConnect
{
    private static MySqlConnection mycon;
    private string server;
    private string database;
    private string uid;
    private string password;

    public DBConnect()
    {
        Initialize();
    }

    private void Initialize()
    {
        server = "localhost";
        database = "restaurantdb";
        uid = "user";
        password = "root";
        string connectionString;
        connectionString = "SERVER=" + server + ";" + "DATABASE=" + database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";
        mycon = new MySqlConnection(connectionString);
    }

    private static bool OpenConnection()
    {
        try
        {
                mycon.Open();
            return true;
        }
        catch (MySqlException ex)
        {
            switch (ex.Number)
            {
                case 0:
                    MessageBox.Show("Cannot connect to server.  Contact administrator");
                    break;

                case 1045:
                    MessageBox.Show("Invalid username/password, please try again");
                    break;
            }
            return false;
        }
    }

    private static bool CloseConnnection()
    {
        try
        {
            mycon.Close();
            return true;
        }

        catch (MySqlException ex)
        {
            MessageBox.Show(ex.Message);
            return false;
        }
    }

    public static void Insert(string query)
    {
        if (OpenConnection() == true)
        {
            MySqlCommand cmd = new MySqlCommand(query, mycon);
            cmd.ExecuteNonQuery();
            CloseConnnection();
        }
    }

    public static void Update(string query)
    {
        if (OpenConnection() == true)
        {
            MySqlCommand cmd = new MySqlCommand();
            cmd.CommandText = query;
            cmd.Connection = mycon;

            cmd.ExecuteNonQuery();
            CloseConnnection();
        }
    }

    public static void Delete(string query)
    {
        if (OpenConnection() == true)
        {
            MySqlCommand cmd = new MySqlCommand(query, mycon);
            cmd.ExecuteNonQuery();
            CloseConnnection();
        }
    }

    public static int Count(string query)
    {
        int count = -1;

        if (OpenConnection() == true)
        {
            MySqlCommand cmd = new MySqlCommand(query, mycon);

            count = int.Parse(cmd.ExecuteScalar() + "");

            CloseConnnection();

            return count;
        }

        else
        {
            return count;
        }
    }

}
} 
```

我只是在尝试某种形式的计数方法。这是我的代码：

```
 MessageBox.Show("NUMBER OF ACCOUNTS IN DATABASE = "+ DBConnect.Count("SELECT count(*) FROM usersettingsdb") +"", "CONFIRMATION"); 
```

但是我在类文件上的`OpenConnection()`方法上得到了这个错误`mycon.Open()`：

```
Object reference not set to an instance of an object. 
```

如何删除上述错误并通过像这样调用它来访问方法`DBConnect.MethodName()`？

我对类一无所知，但我真的很想知道如何创建自己的函数/方法以保持代码整洁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:09:59.140

好的，这是因为您在某些情况下使用静态字段而在其他情况下不使用。有大量关于静态类/成员的论文，例如，请参见[此处。](http://msdn.microsoft.com/en-en/library/79b3xss3%28v=vs.80%29.aspx)

如果您在使用时使用该类，则不会调用初始化代码。

在您的情况下，您应该有一个 DBConnect 实例并删除`static`from 方法

```
var db = new DBConnect(); 
```

然后使用它来进行查询：

```
db.Count(...); 
```

另一种解决方案是在`Initialize`方法内部调用`Count`方法。您应该修改`Initialize`以使其成为`static`（您必须将所有字段设置为`static`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:13:59.163

其他用户将适当地回答这个问题。所以我想提一些不同的东西。你的代码不是很好。您可以查看存储库模式的使用，而不是使用它。您还可以将 petapoco 用于数据库。这些有助于您的工作。

[http://www.remondo.net/repository-pattern-example-csharp/](http://www.remondo.net/repository-pattern-example-csharp/)

[http://www.toptensoftware.com/petapoco/](http://www.toptensoftware.com/petapoco/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:15:45.990

您的`myCon`对象在方法中初始化，该`Initialize()`方法在类的构造函数中调用，因此仅当您创建`DbConnect`.

```
mycon = new MySqlConnection(connectionString); 
```

在您的代码中，您没有 的实例`DbConnect`，您只需调用`Count`该类的静态方法。所以，`myCon`就是`null`。

# xml - T-SQL 将 XML 字段转换为多列数据集

> ID：13931604
> 
> 赞同：4
> 
> 时间：2012-12-18T11:07:33.987
> 
> 标签：xml, tsql, xquery

我想将 XML 字段“拆分”为多列数据集。XML 看起来像：

```
<simple>
    <propertyid>
        <value>p1</value>
        <value>p2</value>
        <value>p3</value>
        <value>p4</value>
    </propertyid>
    <complexid>
        <value>c1</value>
        <value>c2</value>
        <value>c3</value>
    </complexid>
</simple> 
```

我试图做类似的事情（每次我在 TSQL 中使用 XML 时我都觉得很麻烦，所以我的代码是错误的）：

```
;WITH source AS (
    SELECT CAST(@xmlstring AS XML) AS x
)
SELECT 
    items.item.query('.')
FROM source
CROSS APPLY x.nodes('/simple/*/value') AS items(item) 
```

预期数据集：

```
ColumnName      Value
------------------------
propertyid      p1
propertyid      p2
propertyid      p3
propertyid      p4
complexid       c1
complexid       c2
complexid       c3 
```

我怎样才能得到所需的结果？也许您可以推荐带有 T-SQL + XML + XQuery 解释和示例的好资源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:28:50.237

尝试这样的事情：

```
;WITH source AS (
    SELECT CAST(@xmlstring AS XML) AS x
)
SELECT
    ColumnName = XTbl.Parent.value('local-name(.)', 'varchar(50)'),
    [Value] = XTbl2.ChildValues.value('(.)[1]', 'varchar(20)')
FROM source
CROSS APPLY
    x.nodes('/simple/*') AS XTbl(Parent)
CROSS APPLY
    XTbl.Parent.nodes('value') AS XTbl2(ChildValues) 
```

这对你有用吗？在我的情况下，我得到了所需的输出（使用辅助表）。

[将此 SQL Fiddle 视为演示](http://www.sqlfiddle.com/#!6/59c13/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T11:32:28.450

这是我自己的 1 CROSS APPLY 解决方案：

```
;WITH source AS (
    SELECT CAST(@xmlstring AS XML) AS x
)
SELECT
    items.item.value('local-name(..)', 'varchar(300)') AS ColumnName,
    items.item.value('text()[1]', 'varchar') AS Value
FROM source
CROSS APPLY x.nodes('/simple/*/value') AS items(item) 
```

主要是我无法访问父节点，我尝试使用'../local-name()'，但是 local-name() 需要 XPath 来显示名称。之后显示父母节点名称变得容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T23:20:58.330

当您请求有关 XQuery 解决方案的建议时，这里是：

```
declare function local:createTestDoc() as node()* {
    <simple>
        <propertyid>
            <value>p1</value>
            <value>p2</value>
            <value>p3</value>
            <value>p4</value>
        </propertyid>
        <complexid>
            <value>c1</value>
            <value>c2</value>
            <value>c3</value>
        </complexid>
    </simple>
};

declare function local:doProcessing($arg as node()*) as xs:string* {
    let $simpleElement := $arg

    return (
        concat("ColumnName", "    ", "Value")
        ,
        for $propertyId in $simpleElement/propertyid/*
        return (
            concat("propertyid", "    ", data($propertyId))
        )
        ,
        for $complexId in $simpleElement/complexid/*
        return (
            concat("complexid", "    ", data($complexId))
        )
    )
};

local:doProcessing(local:createTestDoc()) 
```

而不是使用 local:createTestDoc()，您将不得不使用以下内容包含您的文档：

```
declare variable $myDoc := doc("urlToDoc"); 
```

并将其传递给 local:doProcessing() fn。

```
local:doProcessing($myDoc) 
```

# asp.net-mvc - MVC 4 验证整数溢出

> ID：13931609
> 
> 赞同：3
> 
> 时间：2012-12-18T11:07:48.090
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation, asp.net-mvc-4

我的视图模型类型有一个属性`int?`

```
/// <summary>
/// Represents A company Id 
/// </summary>
[Range(1, 999999999, ErrorMessage="Error"])          
public int? CompanyId{ get; set; } 
```

从文本框中，我用户输入了一个溢出`int32`maxValue 的大数字，然后我认为引发了内部验证异常，但没有出现消息。

我`global.asax`通过调用覆盖默认消息：

```
DefaultModelBinder.ResourceClassKey = "GlobalResources"; 
```

你知道我应该输入什么键来覆盖资源以便显示消息吗？是否有任何`Int32`溢出的特定消息？

我已经覆盖了，`PropertyValueInvalid`但它没有显示。似乎还有另一个键需要被覆盖。请指出我在哪里可以找到所有默认键列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:53:23.863

您需要添加`@Html.ValidationMessageFor(model => model.CompanyId)`到您的视图中，以便实际显示验证消息。`red`否则，正如您所提到的，您只会在文本框上获得边框。

# c#-4.0 - dataGridView 中的 OutOfMemory 异常

> ID：13931610
> 
> 赞同：1
> 
> 时间：2012-12-18T11:07:47.997
> 
> 标签：c#-4.0, datagridview

我正在使用 2 datagridview 在 Windows 窗体应用程序中查看数据。

第一个 DGV 根据传递给它们的 id 显示产品。

在 DGV1 中我的一列中单击 VIEW 时，它将产品 ID 传递给并从数据库中获取完整记录，并将记录显示给另一个 DGV2。

这是我的代码：

```
if (dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value == (Object)"View")
                {
                    if (con.State == ConnectionState.Closed)
                    {
                        con.Open();
                    }

                    int prod_id = Convert.ToInt16(dataGridView1.Rows[e.RowIndex].Cells[0].Value);
                    dataGridView2.DataSource = null;
                    dataGridView2.Rows.Clear();

                    retFindProducts = new MySqlCommand("SELECT DISTINCT tf_history.thefind_id, tf_product.product_id, tf_product.`name`, tf_product.product_url, tf_product.image_tpm, tf_product.image_thefind, tf_product.image_accuracy, (SELECT MIN(tf_h.price) FROM tf_history AS tf_h WHERE tf_h.thefind_id = tf_history.thefind_id) as price, oc_product.price AS priceTPM FROM tf_product LEFT JOIN tf_history ON tf_product.product_id = tf_history.product_id AND tf_product.thefind_id = tf_history.thefind_id LEFT JOIN oc_product ON tf_product.product_id = oc_product.product_id WHERE  tf_product.product_id = @product_id", con);
                    historyData = new MySqlCommand("SELECT price, date from tf_history WHERE thefind_id = @thefind_id", con);

                    retFindProducts.CommandTimeout = 300;
                    historyData.CommandTimeout = 300;

                    retFindProducts.Parameters.AddWithValue("@product_id", prod_id);
                    dr = retFindProducts.ExecuteReader();
                    retFindProducts.Parameters.Clear();

                    while (dr.Read())
                    {
                        dataGridView2.Rows.Add();
                        long fI = Convert.ToInt64(dr["thefind_id"]);
                        //if (!findId.Exists(p => p.Item1 == fI))
                        findId.Add(new Tuple<long>(fI));
                        decimal findPrice = Convert.ToDecimal(dr["price"]);
                        decimal tpmPrice = Convert.ToDecimal(dr["priceTPM"]);

                        if (findPrice > tpmPrice)
                        {
                            dataGridView2.Rows[cnt].Cells[4].Style.ForeColor = Color.Green;
                            dataGridView2.Rows[cnt].Cells[4].Style.Font = new Font(dataGridView2.DefaultCellStyle.Font.FontFamily, 9, FontStyle.Regular);
                        }
                        else if (findPrice < tpmPrice)
                        {
                            dataGridView2.Rows[cnt].Cells[4].Style.ForeColor = Color.Red;
                            dataGridView2.Rows[cnt].Cells[4].Style.Font = new Font(dataGridView2.DefaultCellStyle.Font.FontFamily, 10, FontStyle.Bold);
                        }

                        dataGridView2.Rows[cnt].Cells[0].Value = Image.FromFile(dr["image_tpm"].ToString());
                        dataGridView2.Rows[cnt].Cells[1].Value = Image.FromFile(dr["image_thefind"].ToString());
                        dataGridView2.Rows[cnt].Cells[2].Value = dr["name"].ToString();
                        dataGridView2.Rows[cnt].Cells[3].Value = dr["product_url"].ToString();
                        dataGridView2.Rows[cnt].Cells[4].Value = dr["price"].ToString();
                        dataGridView2.Rows[cnt].Cells[5].Value = dr["image_accuracy"].ToString();

                        cnt++;
                    }

                    foreach (DataGridViewRow row in dataGridView2.Rows)
                    {
                        row.Height = 60;
                    }
                    dr.Close();
                } 
```

现在，outofexception 不是在第一次点击时出现，而是在 DGV1 的 VIEW 列点击 5-8 次后出现。我怎样才能清除内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:23:41.163

尝试手动处理和创建 datagridview。代码可以是这样的：

```
 dgv.Dispose();
            dgv = new DataGridView();
            DataGridViewColumn col1 = new DataGridViewTextBoxColumn();
            DataGridViewColumn col2 = new DataGridViewTextBoxColumn();
            DataGridViewColumn col3 = new DataGridViewTextBoxColumn();
            DataGridViewColumn col4 = new DataGridViewTextBoxColumn();
            DataGridViewColumn col5 = new DataGridViewTextBoxColumn();

            col1.HeaderText = "COl1";
            col2.HeaderText = "COl2";
            col3.HeaderText = "COl3";
            col4.HeaderText = "COl4";
            col5.HeaderText = "COl5";
            dgv = new System.Windows.Forms.DataGridView();
            dgv.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
            dgv.Location = new System.Drawing.Point(59, 101);
            dgv.Name = "dataGridView1";
            dgv.Size = new System.Drawing.Size(240, 150);
            dgv.TabIndex = 2;

            dgv.Columns.Add(col1);
            dgv.Columns.Add(col2);
            dgv.Columns.Add(col3);
            dgv.Columns.Add(col4);
            dgv.Columns.Add(col5);

        this.Controls.Add(dgv);

        dgv.ColumnCount = 5;

        dgv.Visible = true; 
```

# javascript - 如何防止 Html 小部件在 iBooks Author 中用两个手指手势退出

> ID：13931612
> 
> 赞同：0
> 
> 时间：2012-12-18T11:07:55.190
> 
> 标签：javascript, gestures, ibooks

我对 HTML Widget 有疑问：在 i Pad 上打开的 HTML 小部件上，如果我用两根手指点击屏幕并捏合，小部件会退出并返回 iBook 的页面。这是默认行为。

但是如果我想修改这种行为呢？

我尝试了这些解决方案：

```
document.addEventListener('gesturechange', function (e) {e.preventDefault();}, false);
document.addEventListener('gesturestart', function (e) {e.preventDefault();}, false);
document.addEventListener('gestureend', function (e) {e.preventDefault();}, false);
document.addEventListener('touchmove', function (e) {e.preventDefault();}, false); 
```

在主 HTML 文件的头部。

我也试过，在我的代码中，

```
 $(document).bind("gesturestart", function(e) { 
    e.preventDefault()
    }
    ) 
```

但它不起作用。

我只想关闭我的 HTML 小部件，只点击左上角的“X”而不是用两个手指手势。

我在 i Bookstore 中看到了这方面的工作示例，但我当然没有代码。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:31:12.503

好的，我找到了！

这是正确的代码：

```
<script type="text/javascript"> 
document.addEventListener('touchmove', function (e) {e.preventDefault();}, false);
document.addEventListener('touchstart', function (e) {e.preventDefault();}, false);
document.addEventListener('touchend', function (e) {e.preventDefault();}, false);
</script> 
```

感谢 Apple 支持社区的 Thomas_101！ [https://discussions.apple.com/message/20631617#20631617](https://discussions.apple.com/message/20631617#20631617)

# php - 找不到 PHP SQL 循环的来源

> ID：13931622
> 
> 赞同：0
> 
> 时间：2012-12-18T11:08:55.017
> 
> 标签：php, mysql, sql, forms

对你们来说一个简单的问题 - 我正在尝试将数据提交到数据库中的表并且它成功地完成了，然后继续向表中添加无限数量的空白行。

这是代码：

```
<?php 
$name = $_POST['name'];
$email = $_POST['email'];
$about = $_POST['about'];
$msg  = $_POST['message'];

$con = mysql_connect("DATABASE","USERNAME","PASSWORD");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
$database = mysql_select_db("benpearl_co_uk_db", $con);
if(!$database) {
    die('Houston, we have a problem: ' . mysql_error());
}

    $sql="INSERT INTO contact (name, email, about, message) VALUES ('$name', '$email', '$about', '$msg')";

    if (!mysql_query($sql,$con))
        {
            die('Error: ' . mysql_error());
        }

?>
    <script language="JavaScript">
    self.location="?email=1";
    </script> 
```

重申一下，我在连接数据库或成功将表单中的值放入表中没有问题。但是，一旦输入了值，页面就会不断刷新，将空行添加到表中。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:25:16.400

you should run the insert only when the button submit is clicked if you have , so even when you load the page again it will not insert again the data

try doing this

```
 if (isset($_POST['submit']))     //then run your insert sql
   {

    $sql="INSERT INTO contact (name, email, about, message) VALUES ('$name', '$email', '$about', '$msg')";

    if (!mysql_query($sql,$con))
     {
        die('Error: ' . mysql_error());
     }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:11:40.233

问题在这里：

```
<script language="JavaScript">
self.location="?email=1";
</script> 
```

Self.location 重定向浏览器，您通过添加 url 参数重定向到同一页面，`email = 1`这当然会再次运行脚本导致无限循环。您应该检查是否`$_POST`包含有效值，然后才插入数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:12:07.410

好吧，这正是您的代码所做的：

*   在服务器端写一个 DB 行
*   将页面返回给客户端，其中包含`<script language="JavaScript">self.location="?email=1";</script>`
*   这反过来又使页面刷新。

您需要使 JS 部分成为有条件的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:14:55.450

您始终使用以下命令重定向到同一页面：

```
self.location="?email=1"; 
```

尝试类似：

```
$sql = "INSERT INTO contact (name, email, about, message) VALUES ('$name', '$email', '$about', '$msg')";

if (mysql_query($sql, $con))
{
    header('Location: $other_page');
}

die('Error: ' . mysql_error()); 
```

# javascript - jquery延迟加载动态加载的内容

> ID：13931623
> 
> 赞同：-5
> 
> 时间：2012-12-18T11:08:59.120
> 
> 标签：javascript, jquery, lazy-loading

我现在使用的插件：http: [//www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

我想对动态加载的内容使用延迟加载。即使用加载的内容

```
$.ajax({
        type: "POST",
        url: "some.php",
        data: postdata,
        success:function(data) {
                    $('#somediv').html(data);
                     //Do lazy loading now.
                    }
                }) 
```

延迟加载初始化

```
$("img.lazy").show().lazyload(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T11:32:35.753

```
$(document).ajaxStop(function(){
    $("img.lazy").lazyload({ 
        effect: "fadeIn" 
    }).removeClass("lazy");
}); 
```

# php - Eclipse 在特定文件中查找

> ID：13931625
> 
> 赞同：0
> 
> 时间：2012-12-18T11:09:10.447
> 
> 标签：php, eclipse

是否可以在我要搜索的项目内的女巫文件中定义？

这意味着，如果我正在搜索特定变量，我希望它**仅**在 .php 和 .js 文件中搜索。我不希望 eclipse 浪费我的时间，而是在图像或 pdf 文件等中搜索它。

那么，这可以做到吗？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:10:49.403

在菜单中：

```
Search -> File... 
```

然后，您可以输入包含文本以及文件名必须匹配的模式。

注意：Eclipse 4.2.0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:16:56.760

当编辑器窗口获得焦点时，按 Ctrl+H（或从主菜单中，单击搜索，然后单击搜索...）。如果未激活，请激活“文件搜索”选项卡。在“文件名模式”字段中，您可以输入带有通配符的逗号分隔列表。例如，值“*.php, *.js”将搜索扩展名为 php 或 js 的文件。

# algorithm - 计数小于 m 的数与 n 互质

> ID：13931628
> 
> 赞同：0
> 
> 时间：2012-12-18T11:09:26.167
> 
> 标签：algorithm, number-theory

计数小于 m, m 的数与 n 互质

我想通过**(phi(n)/n)*m**来做这件事，但它总是有一些小错误。

一种方法可以使用包含-排除原则，但我正在寻找比这更好的算法。

例如

```
n = 20 m = 10
{1, 3, 7, 9}
Ans = 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:00:06.560

首先，您可以找到所有 x < m，其中 x 是质数且 x 是 n 的除数。它以 O(m * (x.count)) 计算

```
i = 1;

while x[i] not empty do  
{
    j = 1;

    while x[i] * j < m
    {
        s[(x[i] * j)] = false;
        j++; 
    }

    i++;
} 
```

现在您可以找到所有 s[k] = true 的 s[k]。

它以 O(m) 计算

所以你可以在 O(m * (x.count)) 中完成所有步骤

# python - Flask 装饰器如何有参数？

> ID：13931633
> 
> 赞同：13
> 
> 时间：2012-12-18T11:09:44.817
> 
> 标签：python, decorator, flask

我以与此处相同的方式实现了一个装饰器 [How to make a python decorator function in Flask with arguments (for authorization)](https://stackoverflow.com/questions/13896650/how-to-make-a-python-decorator-function-in-flask-with-arguments-for-authorizati) 但问题仍未解决...

我有装饰器的这个功能

```
@blueprint.route('<var>')
@blueprint.my_decorator(var)
def function(var):
    do stuff 
```

我得到这个错误

```
NameError: global name 'var' is not defined 
```

我该如何解决这个问题？

* * *

**更新**

蓝图是继承蓝图类的类。所以我实现了这个方法

```
def my_decorator(self, fn):
    @wraps(fn)
    def decorator(*args, **kwargs):
        value = kwargs['value']
        # do stuff with value
        return fn(*args, **kwargs)
    return decorator 
```

但该值仍然是一个未知的键...

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-18T12:24:04.107

装饰器在导入时执行，它们本质上是语法糖：

```
@foo(bar)
def baz():
    return 'w00t!' 
```

相当于

```
def baz():
   return 'w00t!'
baz = foo(bar)(baz) 
```

所以在上面的例子中，变量`bar`在作为参数传递给装饰器之前必须存在于这个模块的全局范围内。这就是你得到的错误告诉你的。

* * *

**更新**

根据下面的讨论，问题中的代码应该拦截传递给视图函数的值并对其进行处理。这是一个演示它的示例：

```
from functools import wraps
from flask import Flask, abort

app = Flask(__name__)

def foobar(fn):
    @wraps(fn)
    def decorated_view(*args, **kwargs):
        value = kwargs['value']
        # Do something with value...
        if value == 'foobar':
            abort(400)
        return fn(*args, **kwargs)
    return decorated_view

@app.route('/<value>')
@foobar
def view(value):
    return value 
```

# html - 在 div 中填充图像

> ID：13931636
> 
> 赞同：0
> 
> 时间：2012-12-18T11:09:52.390
> 
> 标签：html, css, layout

我想为带有 div 的网页创建一个基本布局，并想为其背景设置图像。由于我有较小的图像，我想拉伸它们以填充 div。

有很多方法可以做到这一点。但我尝试了以下操作：

```
</html>
<head>
    <style>
       img#bg {  
         top:0;
         left:0; 
         width:100%;
         height:100%;
       } 
   <style>
<head>
<body>
  <img src="body.jpg" alt="background image" id="bg" />
  <div id="content"> </div>
<body>
</html> 
```

这行得通。然后我尝试在布局中使用它。

```
 <div id="hmenu" style="zindex=1;height:80px;background-color:#007980"></div>        
    <div id="content"  >
        <img src="body.jpg" alt="background image" id="bg" />
    </div> 
```

这也奏效了。但是，当我尝试以这种方式为设置了 float:left 或 CSS 宽度的 div 设置图像时，它不起作用：

```
 <div id="header" style="zindex=1;height:300px;width:100%"></div>
    <div id="hmenu" style="zindex=1;height:80px;background-color:#007980"></div>        
    <div id="content" style="float:right" >
        <img src="body.jpg" alt="background image" id="bg" />
    </div> 
```

这不起作用。在最后一个 HTML 通知中浮动：对。我想坚持这种方法，而不是任何 jQuery 方法或其他方法，并且也想知道这里出了什么问题，以及在我学习这个时应该做些什么来通过**CSS 修改获得所需的结果。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:15:36.713

好像你想要一个[背景图片](https://developer.mozilla.org/en-US/docs/CSS/background-image)

一个很好的解释可以在[这里找到](http://css-tricks.com/perfect-full-page-background-image/)

基本上，您可以使用 CSS 使 div 具有背景，而不必在其中放置标签，这几乎总是可取的。

您的示例代码可能是：

```
body {
   background-image: url('body.jpg');
   background-size: cover;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:15:48.703

为了使`height: 100%, Top:0`etc 工作，您需要将 a`position`应用于元素。

您没有按照给出的示例代码。提供更多代码，我可以提供更多帮助。但从你给出的来看，这是你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:31:13.427

```
background-size: cover; 
```

是一个不错的解决方案，但我不确定浏览器是否支持，因为它是 CSS3。

我做了一个小提琴，这就是你要找的吗？ [http://jsfiddle.net/NQY6B/5/](http://jsfiddle.net/NQY6B/5/)

顺便说一句，将“zindex”更改为“z-index”。

**编辑：**我已经用 div 中的文本内容更新了小提琴

# c# - 用于 asp.net 的 Visual Studio 2012 调试无法使用 IIS7

> ID：13931640
> 
> 赞同：1
> 
> 时间：2012-12-18T11:10:05.177
> 
> 标签：c#, asp.net, .net, asp.net-mvc, iis

我无法使用 IIS7 为 ASP 网络运行 Visual Studio 2012 调试。

我已经尝试过以下

**IIS 中的 ASP NET 设置**

.NET 编译：将默认语言更改为 c#

**IIS 设置**

ASP：

*   将脚本语言更改为 c#（手动）
*   启用客户端调试：true
*   启用服务器端调试：true

脚本 - 语言：c#

我也在使用 Asp Net v4.0 应用程序池

我可以更改任何其他设置以使其正常工作吗？

**编辑：**

我的用户是 Debugger 用户的一部分

错误如下：

无法在 Web 服务器上开始调试。Web 服务器配置不正确。有关常见配置错误，请参阅帮助。

**编辑2：**

这是日志

```
Software: Microsoft Internet Information Services 7.5
Version: 1.0
Date: 2012-12-18 11:29:55
Fields: date time s-ip cs-method cs-uri-stem cs-uri-query s-port cs-username c-ip cs(User-Agent) sc-status sc-substatus sc-win32-status time-taken
2012-12-18 11:29:55 ::1 DEBUG /tgpwebged/debugattach.aspx - 443 - ::1 - 403 7 5 43 
```

**编辑 3：**

我已经在 web.config 中手动配置了编译元素。这是实际的配置：

```
<compilation batch="true" debug="true" defaultLanguage="C#" explicit="false" 
maxBatchGeneratedFileSize="10000" maxBatchSize="10000" 
numRecompilesBeforeAppRestart="100" strict="false" 
tempDirectory="C:\Windows\Temp" urlLinePragmas="false"> </compilation> 
```

也只是为了测试目的，将运行在我帐户下的用户 ASP NET V4 应用程序池更改为我的帐户。不是 SYSTEM.. 我的个人帐户。还没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:33:33.070

我以前遇到过这个问题（虽然没有 VS2012）并且以下事情已经奏效：

*   确保为集成 Windows 身份验证配置 IIS。
*   确保启用了 HTTP Keep Alives。
*   确保`http://localhost`在您的 Web 浏览器中的受信任站点中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T08:25:21.240

我刚遇到同样的情况。我已经解决了，我是这样做的：

*   检查它是否是 IIS 上的正确 .NET Framework 版本。
*   检查您的应用程序池的管道模式，对于某些应用程序 - 它只允许`Classic mode`.
*   检查您要调试的应用程序下是否有任何其他应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:25:44.950

Can you attach your debugger to the w3wp process and debug that way ?

Here is an article: [Attatch debugger to an IIS process](http://msdn.microsoft.com/en-us/library/c6wf8e4z.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T14:54:40.167

通常，您必须以本地管理员身份运行 Visual Studio 才能进行调试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-05T15:37:19.740

我在 VS2010 上遇到了类似的问题，站点托管在 IIS7.5 上。我正在尝试按 F5 并让我的网站启动一个自动附加调试器。

我认为关键是您日志中的这一行：

```
2012-12-18 11:29:55 ::1 DEBUG /tgpwebged/debugattach.aspx - 443 - ::1 - 403 7 5 43 
```

据我所知，debugattach.aspx 是 VS 在实际启动和运行您的应用程序之前会尝试调用的某种钩子。*互联网上关于这个东西实际上是*什么的细节有点粗略，但似乎如果你没有得到 200（成功）VS 将无法自动附加。基本上它在步骤 1 中失败了。在您的日志中，您的请求有 403（授权错误），我的日志中有 404（未找到）。

在您的特定情况下，您的 IIS 配置中可能有一些东西阻止了 DEBUG 动词。阻止不常见的动词或除 POST 和 GET 之外的任何内容是一种常见的安全做法。就我而言，它可能是相似的——aspx 扩展名可能被过滤掉了。它也可能是相关应用程序的默认身份验证设置。

**更新：**我确实解决了这个问题，两个不同的事情是错误的。首先，我使用 UrlScan.dll 来保证安全，它阻止了 DEBUG 动词。此外，我使用 UrlRewrite 规则从 HTTP 转到 HTTPS，它生成的 302 重定向也阻止了这个 VS 请求。我能够使用 IIS Failed Request Tracing 功能找到这两个问题。该工具的日志可以深入了解管道中的各种模块和处理程序正在做什么。

希望这会有所帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T11:27:53.970

尝试在命令行中运行以下命令：

```
cd %windir%\Microsoft.NET\Framework\v4.0.30319
aspnet_regiis.exe -i 
```

# ide - 可以将 Notepad++ 配置为识别编译器错误消息并跳转到相应的位置吗？

> ID：13931641
> 
> 赞同：7
> 
> 时间：2012-12-18T11:10:15.523
> 
> 标签：ide, notepad++

我正在一台没有 IDE 但使用 Notepad++ 的机器上构建一些相当大的代码。

编译结果被重定向到一个文件，有时会出现错误消息，满足定义良好的正则表达式。

我想知道 NPP 是否有一个插件，它可以解析日志文件、识别错误/警告消息并让我在各自的错误/警告位置之间导航。

**编辑**

这是一个典型的输出示例（由运行 MSVC cl.exe 编译器生成）：

```
/cygdrive/c/vs2010/VC/Bin/cl   -Zi -nologo -MD /D _STATIC_CPPLIB  -FdC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/Win32SurfaceData.pdb -FmC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/Win32SurfaceData.map -W3 -DD3D_OVERLOADS  -DUNICODE -D_UNICODE  -DWIN32 -DIAL -D_LITTLE_ENDIAN -DWIN32 -D_X86_ -Dx86  -DWIN32_LEAN_AND_MEAN -I. -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/CClassHeaders -I../../../src/windows/javavm/export -I../../../src/share/javavm/export -I../../../src/share/javavm/include -I../../../src/windows/javavm/include -I../../../src/share/native/common -I../../../src/windows/native/common -I../../../src/share/native/sun/awt -I../../../src/windows/native/sun/awt -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/CClassHeaders/../../java/jvm -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj -I../../../src/share/native/common -I../../../src/windows/native/sun/windows -IC:/PROGRA~2/MICROS~1/Include -I../../../src/share/native/sun/awt/image/cvutils -I../../../src/share/native/sun/awt/image -I../../../src/share/native/sun/java2d/loops -I../../../src/share/native/sun/java2d -I../../../src/windows/native/sun/java2d -I../../../src/share/native/sun/java2d/opengl -I../../../src/windows/native/sun/java2d/d3d -I../../../src/windows/native/sun/java2d/opengl -I../../../src/windows/native/sun/java2d/windows -I../../../src/share/native/sun/font -I../../../src/share/native/sun/java2d/pipe -I../../../src/share/native/sun/dc/path -I../../../src/share/native/sun/dc/doe -I../../../src/share/native/sun/awt/debug -I../../../src/windows/native/sun/awt  -I../../../src/share/native/sun/awt/medialib   -DINTERNAL_BUILD  -c -FoC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/Win32SurfaceData.obj  ../../../src/windows/native/sun/awt/../java2d/windows/Win32SurfaceData.cpp
Win32SurfaceData.cpp
../../../src/windows/native/sun/awt/../java2d/windows/Win32SurfaceData.cpp(478) : warning C4530: C++ exception handler used, but unwind semantics are not enabled. Specify /EHsc
/cygdrive/c/vs2010/VC/Bin/cl   -Zi -nologo -MD /D _STATIC_CPPLIB  -FdC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/WinBackBufferSurfaceData.pdb -FmC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/WinBackBufferSurfaceData.map -W3 -DD3D_OVERLOADS  -DUNICODE -D_UNICODE  -DWIN32 -DIAL -D_LITTLE_ENDIAN -DWIN32 -D_X86_ -Dx86  -DWIN32_LEAN_AND_MEAN -I. -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/CClassHeaders -I../../../src/windows/javavm/export -I../../../src/share/javavm/export -I../../../src/share/javavm/include -I../../../src/windows/javavm/include -I../../../src/share/native/common -I../../../src/windows/native/common -I../../../src/share/native/sun/awt -I../../../src/windows/native/sun/awt -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/CClassHeaders/../../java/jvm -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj -I../../../src/share/native/common -I../../../src/windows/native/sun/windows -IC:/PROGRA~2/MICROS~1/Include -I../../../src/share/native/sun/awt/image/cvutils -I../../../src/share/native/sun/awt/image -I../../../src/share/native/sun/java2d/loops -I../../../src/share/native/sun/java2d -I../../../src/windows/native/sun/java2d -I../../../src/share/native/sun/java2d/opengl -I../../../src/windows/native/sun/java2d/d3d -I../../../src/windows/native/sun/java2d/opengl -I../../../src/windows/native/sun/java2d/windows -I../../../src/share/native/sun/font -I../../../src/share/native/sun/java2d/pipe -I../../../src/share/native/sun/dc/path -I../../../src/share/native/sun/dc/doe -I../../../src/share/native/sun/awt/debug -I../../../src/windows/native/sun/awt  -I../../../src/share/native/sun/awt/medialib   -DINTERNAL_BUILD  -c -FoC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/WinBackBufferSurfaceData.obj  ../../../src/windows/native/sun/awt/../java2d/windows/WinBackBufferSurfaceData.cpp
WinBackBufferSurfaceData.cpp
/cygdrive/c/vs2010/VC/Bin/cl   -Zi -nologo -MD /D _STATIC_CPPLIB  -FdC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/WBufferStrategy.pdb -FmC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/WBufferStrategy.map -W3 -DD3D_OVERLOADS  -DUNICODE -D_UNICODE  -DWIN32 -DIAL -D_LITTLE_ENDIAN -DWIN32 -D_X86_ -Dx86  -DWIN32_LEAN_AND_MEAN -I. -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/CClassHeaders -I../../../src/windows/javavm/export -I../../../src/share/javavm/export -I../../../src/share/javavm/include -I../../../src/windows/javavm/include -I../../../src/share/native/common -I../../../src/windows/native/common -I../../../src/share/native/sun/awt -I../../../src/windows/native/sun/awt -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/CClassHeaders/../../java/jvm -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj -I../../../src/share/native/common -I../../../src/windows/native/sun/windows -IC:/PROGRA~2/MICROS~1/Include -I../../../src/share/native/sun/awt/image/cvutils -I../../../src/share/native/sun/awt/image -I../../../src/share/native/sun/java2d/loops -I../../../src/share/native/sun/java2d -I../../../src/windows/native/sun/java2d -I../../../src/share/native/sun/java2d/opengl -I../../../src/windows/native/sun/java2d/d3d -I../../../src/windows/native/sun/java2d/opengl -I../../../src/windows/native/sun/java2d/windows -I../../../src/share/native/sun/font -I../../../src/share/native/sun/java2d/pipe -I../../../src/share/native/sun/dc/path -I../../../src/share/native/sun/dc/doe -I../../../src/share/native/sun/awt/debug -I../../../src/windows/native/sun/awt  -I../../../src/share/native/sun/awt/medialib   -DINTERNAL_BUILD  -c -FoC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/WBufferStrategy.obj  ../../../src/windows/native/sun/windows/WBufferStrategy.cpp
WBufferStrategy.cpp
/cygdrive/c/vs2010/VC/Bin/cl   -Zi -nologo -MD /D _STATIC_CPPLIB  -FdC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/WPrinterJob.pdb -FmC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/WPrinterJob.map -W3 -DD3D_OVERLOADS  -DUNICODE -D_UNICODE  -DWIN32 -DIAL -D_LITTLE_ENDIAN -DWIN32 -D_X86_ -Dx86  -DWIN32_LEAN_AND_MEAN -I. -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/CClassHeaders -I../../../src/windows/javavm/export -I../../../src/share/javavm/export -I../../../src/share/javavm/include -I../../../src/windows/javavm/include -I../../../src/share/native/common -I../../../src/windows/native/common -I../../../src/share/native/sun/awt -I../../../src/windows/native/sun/awt -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/CClassHeaders/../../java/jvm -IC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj -I../../../src/share/native/common -I../../../src/windows/native/sun/windows -IC:/PROGRA~2/MICROS~1/Include -I../../../src/share/native/sun/awt/image/cvutils -I../../../src/share/native/sun/awt/image -I../../../src/share/native/sun/java2d/loops -I../../../src/share/native/sun/java2d -I../../../src/windows/native/sun/java2d -I../../../src/share/native/sun/java2d/opengl -I../../../src/windows/native/sun/java2d/d3d -I../../../src/windows/native/sun/java2d/opengl -I../../../src/windows/native/sun/java2d/windows -I../../../src/share/native/sun/font -I../../../src/share/native/sun/java2d/pipe -I../../../src/share/native/sun/dc/path -I../../../src/share/native/sun/dc/doe -I../../../src/share/native/sun/awt/debug -I../../../src/windows/native/sun/awt  -I../../../src/share/native/sun/awt/medialib   -DINTERNAL_BUILD  -c -FoC:/openjdk/OUTPUT~1/tmp/sun/sun.awt/awt/obj/WPrinterJob.obj  ../../../src/windows/native/sun/windows/WPrinterJob.cpp
WPrinterJob.cpp
../../../src/windows/native/sun/windows/WPrinterJob.cpp(74) : warning C4530: C++ exception handler used, but unwind semantics are not enabled. Specify /EHsc
../../../src/windows/native/sun/windows/WPrinterJob.cpp(117) : error C2664: 'JNIEnv_::NewString' : cannot convert parameter 1 from 'LPWSTR' to 'const jchar *'
        Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast
../../../src/windows/native/sun/windows/WPrinterJob.cpp(142) : error C2664: 'JNIEnv_::NewString' : cannot convert parameter 1 from 'LPTSTR' to 'const jchar *'
        Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T15:51:15.613

由于您已将所有输出保存在日志文件中，因此 DeusAphor 建议我也会这样做。

另一种选择是让编译器输出正常地直接进入[NppExec](http://sourceforge.net/projects/npp-plugins/files/NppExec/NppExec%20Plugin%20v0.4.3/)的控制台，然后将 NppExec 设置为打开有问题的源文件并跳转到编译器指定的行。

这可以通过首先注意编译器发出的错误消息的模式来实现，然后打开对话框：**Plugins->NppExec->Console Output Filters->[Highlight] 选项卡**。插件识别的变量的快速示例显示在该选项卡中。

例如，对于 mingw32 GCC，输出控制台上会出现错误消息，格式如下：

> **文件**：**行**：some_other_num：**错误**类型：error_desription

因此，在对话框的 [Highlight] 选项卡中，您可以使用通配符语法将其添加到第一个文本框中，如下图所示（查看顶行）：

![在此处输入图像描述](../Images/ef4b2af8bcd6fa517ac0103b57e423ca.png)

（**您可能需要将 %FILE% 替换为 %ABSFILE%，具体取决于您的编译器和/或 Windows 版本**）

不要忘记**启用**文本框前面的复选标记（您还可以从文本框旁边的选项中定义一些颜色和/或文本样式）。

现在在关闭 NppExec 对话框之前，转到其**[Replace] 选项卡**并启用顶部的选项：“启用替换过滤器”。

最后，单击 OK 关闭 NppExec 对话框，并确保**选中****菜单项*** Plugins->NppExec->Console Output Filters 。如果没有，请检查它。

 **如果一切顺利，您现在应该能够双击 NppExec 输出控制台上显示的任何错误消息，让它打开相关文件并将光标移动到指示的行。

另一种选择是安装 Windows 命令提示符的替代终端，例如 MSYS，它可以嵌入或作为[mingw 工具链](http://sourceforge.net/projects/mingw/files/?source=navbar)的独立下载。

但是，它需要熟悉类 Unix 的 shell 实用程序，并且还涉及编写自己的 Np++ 或 NppExec 脚本。尽管这篇文章讨论了 Cygwin（Windows 上的 Unix 分层环境），但作为起点，[这篇文章可能很有用。](http://samueldotj.blogspot.gr/2007/10/notepad-as-ide.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T16:23:10.340

好吧，所以我要做的是使用“在文件中查找”...

鉴于您当前的示例，我只是将要查找的文本设置为“错误”；如果您想包含警告；启用正则表达式并搜索“错误|警告”

目录当然是要搜索的目录..

使用过滤器，您可以告诉它只查看名称为 X 的文件。示例：“compiler-output3844.txt”您将使用“compiler-output*.txt”

这会给你这样的东西......

![在文件中查找](../Images/a0ebb4dbaefa5fb6dd3812d4a33aefc8.png)**

# iphone - 将 NSString 转换为 UTF-16 兼容格式

> ID：13931645
> 
> 赞同：1
> 
> 时间：2012-12-18T11:10:27.750
> 
> 标签：iphone, objective-c, unicode

我正在使用 iPhone 制作表情符号。我想将“\u1F604”（NSString）之类的东西转换为“\U0001F604”（NSString）格式。

我怎样才能做到这一点？

谢谢，
吉姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:17:19.803

请尝试以下代码。

```
NSString* resultTemp = @"\u1F604";
NSData* data = [resultTemp dataUsingEncoding:NSUTF16StringEncoding];
NSString* result = [[NSString alloc] initWithData:data encoding:NSUTF16StringEncoding];
self.detailDescriptionLabel.text = result; 
```

# javascript - 用javascript切换“标签”

> ID：13931646
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:10:26.893
> 
> 标签：javascript, jquery

我想创建类似标签的东西。所以我有标签本身

```
 <div class="tab" >Tab1</div>
    <div class="tab" >Tab2</div>
    <div class="tab" >Tab3</div> 
```

每个选项卡的页面内容为

```
 <div class="pagecontent" >pagecontent for Tab1</div>
    <div class="pagecontent" >pagecontent for Tab2</div>
    <div class="pagecontent" >pagecontent for Tab3</div> 
```

如何使 js 以“聪明的方式”发挥作用，所以通过按“tab1”，“tab1 的页面内容”显示和其他 2 被隐藏？此外，选项卡的数量因页面而异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:14:04.093

```
$(function() {  
    $('.pagecontent').not(':eq(0)').hide();
    $('.tab').click(function() {  
        $('.pagecontent').hide();
        $('.pagecontent').eq($(this).index()).show();
    });  
}); 
```

请在此处查看工作演示 > [http://jsfiddle.net/Yce32/](http://jsfiddle.net/Yce32/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:01:10.667

尝试 jQuery UI 选项卡：

[http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

这是“聪明的方式” - 您将在一个框中添加\删除\订单标签

# .net - 如何部署 IE 扩展

> ID：13931647
> 
> 赞同：0
> 
> 时间：2012-12-18T11:10:28.933
> 
> 标签：.net, internet-explorer

我开发了一个 IE 扩展，完全没问题，我用过 AddinExpress.IE.dll，现在我需要为此创建 exe，所以任何人都可以指导我如何创建设置文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:12:46.110

对于 IE 扩展，重要的是在安装时注册并在卸载插件时取消注册。可以使用任何安装掌握技术/工具来完成。有很多 - MSI、Wix、InstallShield、Wise 安装程序、NSIS、...

对于 Addin-Express，有 Visua Studio MSI 和 Wix 的教程，在这里可以找到：

[http://www.add-in-express.com/docs/internet-explorer-addons-deployment.php](http://www.add-in-express.com/docs/internet-explorer-addons-deployment.php)

当您将使用本教程时，我建议选择 Wix，因为自 VS 2012 起，Visual Studio 中的 MSI mastering (Visual Studio MSI) 已被弃用。

# android - 刷新我的适配器

> ID：13931651
> 
> 赞同：1
> 
> 时间：2012-12-18T11:10:35.827
> 
> 标签：android

我有一个学生列表，显示在我在 MyCustomAdapter 类中创建的适配器中。
这是我调用适配器的类 ManageSection。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:12:36.670

您需要从**传递给自定义适配器适配器的列表中删除记录（我认为 studentList 是您的列表）**并调用`notifyDataSetChanged()`Method.

**编辑 ：**

```
if (stdel == false) 
{
Toast.makeText(getContext(), "Error deleting student, Please try again",
                    Toast.LENGTH_LONG).show();
}

if(stdel==true)
{
  notifyDataSetChanged();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:12:54.453

您将不得不调用适配器的 notifyDataSetChanged() 方法。它将刷新整个列表。试试吧。！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:15:14.717

利用`adapter.notifyDatsetChanged();`

也看到这个[答案](https://stackoverflow.com/questions/3669325/notifydatasetchanged-example)

看到这个[文档](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)

# linux - Crontab 无法在 Amazon EC2 服务器上运行

> ID：13931652
> 
> 赞同：2
> 
> 时间：2012-12-18T11:10:41.463
> 
> 标签：linux, amazon-web-services, crontab

Crontab 无法在 Amazon EC2 Linux 服务器上运行。

我已将以下代码保存在 /etc/crontab 文件中

```
crontab
# For details see man 4 crontabs 
# Example of job definition: 
# .---------------- minute (0 - 59) 
# | .------------- hour (0 - 23) 
# | | .---------- day of month (1 - 31) 
# | | | .------- month (1 - 12) OR jan,feb,mar,apr ... 
# | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat 
# | | | | | 
# * * * * * user-name command to be executed 
* 10 * * * tar cvfpz /home/backup/web_$(date +%Y%m%d).tar.gz /home/web 
```

我已经启动了 crontab 命令，但是这个没有用。

我也将这一行保存在“crontab -e”中，但 cron 不起作用。

```
* 10 * * * tar cvfpz /home/backup/web_$(date +%Y%m%d).tar.gz /home/web 
```

有没有和我一样经历的人？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:01:04.117

解决了这个问题。

我使用了这段代码，它有效！

```
* 2 * * * root tar cvfpz /home/backup/web_`date +\%Y\%m\%d`.tar.gz /home/web 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-01T10:08:05.140

我最近开始在 ec2 实例上使用 Amazon 的 linux 发行版，在为 cron 尝试了各种事情之后，我所需要的只是：
`sudo service crond start`
`crontab -e`
这允许我将 cron 作业设置为“ec2-user”而无需指定用户。例如：
`0 12 * * * python3 example.py`
事实上，在这里指定一个用户会阻止它运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-03T09:55:29.640

您应该使用`crontab -e`为登录的用户创建 cron，这样您就不需要通知用户名。见这里：[https ://stackoverflow.com/a/16986464/1777152](https://stackoverflow.com/a/16986464/1777152)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-10T12:25:43.690

对于与 AWS 机器和 EBS 打交道的人，您需要`root`在命令之前指定关键字，因为不允许 ec2-user 运行 crontabs。当然有办法解决这个问题。

您可以通过键入`sudo nano /etc/cron.d/mycrontabs`或编辑 crontab`crontab -e`

`* * * * * root bla bla`

*   还要确保 e 文件以新行结尾

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-09-13T22:18:52.907

不要使用`nano`，使用本机`sudo crontab -e`命令。

# seo - 单个博客与多个博客的 SEO 结果

> ID：13931659
> 
> 赞同：0
> 
> 时间：2012-12-18T11:11:04.413
> 
> 标签：seo, blogs, blogger, traffic

考虑一个有多个部分的网站，每个部分都有一组不同的数据/功能。现在通过博客来推广网站，以下哪种方法更好，哪种方法比另一种更好：

1.  创建具有多个类别的单个博客，每个类别对应于网站的一个部分。通过这种方式，网站的每个部分都被覆盖，您可以在一个博客中管理所有内容。
2.  为网站的每个部分创建单独的博客。每个博客的内容都是独一无二的，您可以更准确地宣传网站的每个部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:19:18.457

这取决于。如果您网站上的各个部分相互满足，例如围绕一个共同主题，如果您有足够的内容以高质量的方式填充它们，我只会创建单独的博客。如果您可以专注于一个博客，那么获得读者、反向链接和网站声誉会容易得多。

如果您网页上的内容非常多样化，我会选择单独的博客。这样，您的读者和搜索引擎就更容易掌握您的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T05:21:45.517

如果您的网站有多个行业并且每个行业都服务于许多服务，那么为每个行业单独的博客并将它们与您的行业相关服务进行分类。

如果您的网站只关注一个行业，那么只需制作一个博客并将它们分类为不同的服务。它还将帮助用户从单一平台阅读与您的不同服务相关的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:28:14.977

1.  单独的博客仅用于使用 url 的第一个职位，如果有多个博客，则需要更多的工作和时间
2.  但是单一的多合一博客总是成功的，高视图和收入，单一博客的搜索引擎优化也很容易和永久

# jquery - 使用 jQuery 在页面加载时使链接“单击”

> ID：13931668
> 
> 赞同：0
> 
> 时间：2012-12-18T11:11:18.470
> 
> 标签：jquery

我维护一个网站，我需要用 javascript 来“点击”一个链接。href 是内联 javascript，而不是 url，所以我不能只导航到该 url。

我希望这是不好的做法（网站的其余部分很糟糕！）但我需要使用 javascript 来“点击”链接。我正在使用 jQuery。

我知道以前有人问过这个问题，但似乎通常人们都在尝试点击链接，但我不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:13:00.820

我看到的最小的可能方式是通过一些查找器找到链接，比如通过 id，然后点击它：

```
$("#my_link_id").click(); 
```

但更好的是将该内联javascript从链接移动到某个函数中，并将函数名称留在链接的href中，然后在页面加载时调用该保存的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:16:29.600

最佳实践是创建一个“visitedLink”的 CSS 类，它的 CSS 与`a:visited`.

但是，如果您真的想实际单击链接但不关注它，您可以为返回 false 的链接分配一个事件（取消默认操作），然后运行`$('#myLink').click();`​​.

```
$('#myLink').click(function() { return false; });
$('#myLink').click();
//Then unassign/otherwise disable the initial handler. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:14:14.693

如果我正确理解了这个问题，那么您似乎希望在单击链接后对其进行样式设置。

如果这是正确的，请尝试下面的代码。单击锚点后，它将添加一个“选定”类。然后，您可以根据自己的喜好设置样式。

```
jQuery('.yourAnchor').click(function(e){
    e.preventDefault();
    jQuery('this').addClass('selected');
}); 
```

# android - Android Wifi Direct：连接到已知对等方时避免用户接受

> ID：13931671
> 
> 赞同：22
> 
> 时间：2012-12-18T11:11:33.970
> 
> 标签：android, user-permissions, wifi-direct

使用 WiFi Direct 连接到对等点时，需要用户许可。我知道如果没有用户从未给予许可，就无法建立连接，并且对这种功能有功能请求： [https ://code.google.com/p/android/issues/detail?id=30880](https://code.google.com/p/android/issues/detail?id=30880)

但是我不需要这个功能，在第一次连接时请求许可就可以了（也更安全）。是否有任何方法可以仅在第一次请求许可？并且稍后尝试连接到同一个对等方时，不需要权限。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-26T13:17:11.767

从 P2P 规范中，我们可以找到一种叫做“持久 P2P 组”的东西，它旨在在没有用户干预的情况下重新建立一个组。

在持久 P2P 组中，组所有者存储组的凭据，以便将来可以根据任何组成员的请求重新建立组，而无需用户干预。

可以通过在使用命令行连接时指定持久性来形成这样的组（请参阅 P2P`wpa_supplicant`并搜索`p2p_connect`命令[https://android.googlesource.com/platform/external/wpa_supplicant_8/+/ics-plus-aosp/wpa_supplicant/README -P2P](https://android.googlesource.com/platform/external/wpa_supplicant_8/+/ics-plus-aosp/wpa_supplicant/README-P2P)）。但我不知道该选项是否适用于当前设备。

编辑：查看问题的答案[我可以在 Wi-Fi Direct 中更改永久组中的组所有者吗？](https://stackoverflow.com/questions/15152817/persistent-group-in-wi-fi-direct)

由于我在 Ubuntu 上使用 Wi-Fi Direct，因此我使用`wpa_cli`（随 一起提供`wpa_supplicant`）来创建文件中指定的持久组`p2p_readme`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-19T00:56:47.490

我管理的最接近没有提示的 Wi-Fi Direct 功能是使用服务发现与旧模式相结合，即当连接应该发生时，您不使用 WifiP2pManager.connect() 但 WifiManager.enableNetwork( ） 反而。

我是一个非常简单的 P2P 堆栈的作者，它自动化了所有的魔法，你可以在[https://github.com/croconaut/wifon-mini](https://github.com/croconaut/wifon-mini)上查看一个例子，看看它的工作好坏（加上一些文档） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:37:28.263

我正在使用两个 HTC One V 和一个 HTC One X+。我一直在运行Android给出的WifiDirectDemo。除了打开 Wifi Direct 之外，不需要其他设置。我只需在应用程序中按下一个搜索按钮，就会列出同行。

起初我确实认为我需要另一个设备权限，正如你所描述的，每次我在我的设备上安装应用程序时都需要重新启用它。但这是在我注意到应用程序中的搜索按钮之前，并意识到这不是必需的。

你会不会犯和我一样的错误？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T05:58:29.813

不幸的是，不是在这个时候。也许在将来，或者如果您编写自己的 ROM。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-11-26T07:57:35.543

它可以通过反射方法。

# matlab - 时间序列分类 MATLAB

> ID：13931674
> 
> 赞同：1
> 
> 时间：2012-12-18T11:11:44.817
> 
> 标签：matlab, neural-network, time-series, classification

我的任务是使用 MATLAB 和任何神经网络框架对时间序列数据进行分类。

更具体地描述任务：是计算机视觉领域的一个问题。是一个场景边界检测任务。

源数据是来自视频流的 4 个相邻帧直方图相关性数组。基于这些数据，我们必须将此时间序列分为 2 类：

*   “场景中断”
*   “没有场景中断”

因此，每个源数据条目的网络输入是 4 个双精度值，输出是一个二进制值。我将在下面展示 src 数据的示例：

```
0.997894,0.999413,0.982098,0.992164
0.998964,0.999986,0.999127,0.982068
0.993807,0.998823,0.994008,0.994299
0.225917,0.000000,0.407494,0.400424
0.881150,0.999427,0.949031,0.994918 
```

问题是来自 Matlab 神经工具箱的模式识别工具（如 patternnet）威胁源数据，如独立实体。但我坚信，只有当 net 根据之前相关性的历史做出决定时，结果才会准确。

但我也没有设法从服务时间序列分析的递归网络（如延迟网络和 narxnet）中获得有效响应。

narxnet 和 delaynet 返回糟糕的结果，看起来这些类型的网络不应该解决分类任务。我没有在这里插入任何代码，而它几乎完全是使用 Matlab 神经工具箱 GUI 自动生成的。

我会很感激任何帮助。特别是，一些建议哪种工具更适合完成我的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:29:34.713

我不确定对这个问题进行分类有多难。给定您的样本，4 个输入和 1 个输出的前馈神经网络就足够了。

如果您坚持使用历史输入，您只需预处理您的输入`d`，这样

您的新输入`D(t)`（在 time 的一个向量`t`）由`d(t)`一个在 time 的 1x4 向量组成`t`；`d(t-1)`在时间是 1x4 向量`t-1`；...并且在时间`d(t-k)`是 1x4 向量`t-k`。

如果`t-k <0`，则将其视为'0'。

所以你有一个 1x(4(k+1)) 向量作为输入和 1 个输出。与 Dan 提到的类似，您需要找到一个好的`k`.

说到权重，我认为没有必要对输入进行额外的预处理，如窗口方法，因为神经网络将被训练为每个输入维度分配权重。

这听起来有点混乱，因为神经网络会独立考虑每个输入维度。这意味着您将信息丢失为四个相邻的相关性。

One possible solution is the pre-processing **extracts** the neighborhood features, e.g. using **mean** and **std** as two features representative for the originals.

# c# - 按下浏览器后退按钮后，无法在页面加载时读取选定的下拉列表值

> ID：13931677
> 
> 赞同：0
> 
> 时间：2012-12-18T11:11:53.710
> 
> 标签：c#, javascript, jquery, ajax, browser

按下浏览器后退按钮后，无法在页面加载时读取选定的下拉列表值。但这仅在第一次函数调用期间发生。我将详细解释：最初加载页面时，我附加了一个 ajax javascript，如下所示

```
this.Page.ClientScript.RegisterStartupScript(this.GetType(), "onload", "_Initialize_Chart();", true); 
```

下面是javascript AJAX函数

```
 function _Initialize_Chart() {

    var selectedDeptId = $(ddlQueues).val();
    var selectedMonth = $(ddlMonth).val();
    var selectedYear = $(ddlYear).val();
    $.ajax({
        type: "GET",
        url: ajaxCallHandlerUrl,
        data: {
            OpCode: "GetCallAverageMonthlyReportForGraph",
            Params: "DeptId^" + selectedDeptId + "~Month^" + selectedMonth + "~Year^" + selectedYear
        },
        dataType: "xml",
        beforeSend: function () {
            $('#' + lblCallAverageDetails).html('');
            document.getElementById(chartdiv).style.backgroundImage = "url('../images/ajax-loader_new_.gif')";
        },
        success: function (responseString) {
            document.getElementById(chartdiv).style.backgroundImage = "";
            _Load_Chart(responseString);
            _Load_CallAverageGridData();
        },
        error: function (xhr, errorType, exception) {
            var errorMessage = exception || xhr.statusText;
            alert("There was an error Initializing Charts :: " + errorMessage);
        }
    });
}

    function _Load_CallAverageGridData() {
    var selectedDeptId = $(ddlQueues).val();
    var selectedMonth = $(ddlMonth).val();
    var selectedYear = $(ddlYear).val();
    $.ajax({
        type: "GET",
        url: ajaxCallHandlerUrl,
        data: {
            OpCode: "GetCallAverageReportDetail",
            Params: "DeptId^" + selectedDeptId + "~Month^" + selectedMonth + "~Year^" + selectedYear
        },
        dataType: "",
        success: function (responseString) {
            $('#' + lblCallAverageDetails).html(responseString);
        },
        error: function (xhr, errorType, exception) { //Triggered if an error communicating with server  
            var errorMessage = exception || xhr.statusText; //If exception null, then default to xhr.statusText  
            alert("There was an error Fetching Call Average Data :: " + errorMessage);
        }
    });
} 
```

所以这个 javascript 加载页面内容，它是一个图形和一个网格。单击网格中的行时，它会导航到另一个页面。现在按下浏览器后退按钮时，最初调用了上面显示的 javascript，但 `var selectedMonth = $(ddlMonth).val();`没有给我下拉列表中实际选择的值的值。在第一次 Ajax 调用成功时，会进行另一个 Ajax 调用`_Load_CallAverageGridData();`，在该调用中我得到了`var selectedMonth = $(ddlMonth).val();`正确的值。任何人都可以阐明为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T12:50:46.550

您在页面加载中的代码

```
 this.Page.ClientScript.RegisterStartupScript(this.GetType(), "onload", "_Initialize_Chart();", true); 
```

不在页面加载时执行，要执行它，您需要使用 url 哈希函数。因为它只是使用这个

您在页面上单击产品/图像的位置调用 onclick javascript 函数，即

```
function getHashOnBack(valueget) 
{
   location.hash = "#backTo=" + $(window).scrollTop();$(document).height();
} 
```

现在，放

```
$(document).ready(function () 
{
var ab = window.location.hash.substring(1).split("=");
if (ab[0] == "backTo") 
{
 // this would be called automatically when back putton pressed and hav #back=1234   etc. // value in url

 $(window).scrollTop(parseInt(ab[1]));
}
} 
```

# google-floodlight - “https://fls.doubleclick.net”跟踪下载“http://www.googleadservices.com/pagead/conversion.js”

> ID：13931680
> 
> 赞同：3
> 
> 时间：2012-12-18T11:11:59.913
> 
> 标签：google-floodlight

我在我维护的一个网站的安全页面上有这个 Google Floodlight 代码。此内容在里面，而 iframe 又在里面：

```
<script type="text/javascript">
 document.write ('<IFRAME  src="https://fls.doubleclick.net/activityi;src=XXXXX;type=12312;cat=084;qty=1;cost=$iTotal;?" width="1" height="1" frameborder="1" style="display:none" 
 </IFRAME>')
 </script> 
```

最近 IE 发出一条消息，指出该页面包含不安全的内容。用提琴手检查页面我可以看到现在接收泛光灯的谷歌服务器也发回了一个 javascript 库：

```
 "http://www.googleadservices.com/pagead/conversion.js" 
```

这导致了不安全的内容消息。

你也遇到过这种情况吗？知道如何解决吗？

我在双击时发现了一个我不知道的标签：

```
<img src="https://gan.doubleclick.net/gan_conversion?advid=K123456&oid=12345&amt=123.45" width=1 height=1> 
```

但它是否做同样的事情还不是很清楚。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T07:13:24.123

在相应的 Google Floodlight 活动中，您需要选中“仅安全服务器 (https)”框。

# qt - 如何在 Qt 中使用 PaintEvent() 修改 QCombobox 当前项

> ID：13931684
> 
> 赞同：0
> 
> 时间：2012-12-18T11:12:14.657
> 
> 标签：qt, combobox, qt4, paintevent

我有一个组合框，它有 3 个项目，即项目 1、项目 2 和项目 3。我在 .ui 文件中添加了这 3 个项目，还使用资源文件为所有项目添加了一个图像。现在，当我运行应用程序时，它会在组合框中显示第一项以及向左显示的图像。当我单击下拉菜单时，我可以看到所有项目以及图像。

我基本上想做的只是在组合框中显示图像，当用户单击下拉菜单时，它也应该显示图像和文本。

**场景：** Combobox里面的item和image添加如下：

```
Image 1 Item 1
Image 2 Item 2
Image 3 Item 3 
```

当我运行应用程序时，它应该在组合框中显示为

`Image1`

因为默认情况下会显示第一项。我认为可以在绘制当前选择时完成，QCombobox 使用重新植入：`void MyCombo::paintEvent(QPaintEvent *e)`这是我不知道的。

任何人都可以帮助我吗？:)

我怎样才能实现它？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:27:05.730

您应该继承一个 QComboBox 并重新实现`void QComboBox::showPopup () [virtual]`
PS 如果您重新实现此函数以显示自定义弹出窗口，请确保调用 hidePopup() 来重置内部状态。
我的第二个想法是为组合框实现一个模型，但我现在不知道弹出元素是否有任何作用。

# redirect - Windows Server 上的 ISPAI 重写 301 重定向/SEO URL 规范化

> ID：13931685
> 
> 赞同：0
> 
> 时间：2012-12-18T11:12:17.737
> 
> 标签：redirect, isapi-rewrite, canonical-link

我是在 Windows 服务器上工作的新手，并且已经知道它是为 ISPAI Rewrite 设置的。

我尝试创建一个 httpd.ini 文件和一个 .conf 文件，可能会重定向，但没有任何效果。

有人可以告诉我如何创建正确的文件，然后重写以下内容：

[http://aspectexhibitions.co.uk/](http://aspectexhibitions.co.uk/)

应该重定向到：

[http://www.aspectexhibitions.co.uk/](http://www.aspectexhibitions.co.uk/)

--

[http://www.aspectexhibitions.co.uk/index.php](http://www.aspectexhibitions.co.uk/index.php) [http://aspectexhibitions.co.uk/index.php](http://aspectexhibitions.co.uk/index.php)

应该重定向到：

[http://www.aspectexhibitions.co.uk/](http://www.aspectexhibitions.co.uk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:09:03.533

完毕...

```
[ISAPI_Rewrite]

#Redirect Non WWW to WWW
RewriteEngine on

RewriteCond %{HTTPS} (on)?
RewriteCond %{HTTP:Host} ^(?!www\.)(.+)$ [NC]
RewriteCond %{REQUEST_URI} (.+)
RewriteRule .? http(?%1s)://www.%2%3 [R=301,L]

#Redirect index.php to root
RewriteEngine on
RewriteBase /

RewriteRule ^index\.php$ http://www.aspectexhibitions.co.uk/ [NC,R=301,L] 
```

# javascript - 禁用/启用提交按钮，直到填写完所有表格

> ID：13931688
> 
> 赞同：24
> 
> 时间：2012-12-18T11:12:35.890
> 
> 标签：javascript, forms, submit, disabled-control

我希望我的表单提交按钮被禁用/启用，具体取决于表单是否已完全填写。

当输入被填满时，禁用的按钮变为启用。这很好用。但我希望它在输入被清空时禁用按钮。

这是我的脚本：

```
<script type="text/javascript" language="javascript">
    function checkform()
    {
        var f = document.forms["theform"].elements;
        var cansubmit = true;

        for (var i = 0; i < f.length; i++) {
            if (f[i].value.length == 0) cansubmit = false;
        }

        if (cansubmit) {
            document.getElementById('submitbutton').disabled = false;
        }
    }
</script> 
<form name="theform">
<input type="text" onKeyup="checkform()" />
<input type="text" onKeyup="checkform()" />
<input id="submitbutton" type="submit" disabled="disabled" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-21T13:48:23.633

只需使用

```
document.getElementById('submitbutton').disabled = !cansubmit; 
```

而不是只适用于单向的 if 子句。

另外，对于禁用 JS 的用户，我建议`disabled`仅通过 JS 设置初始值。为此，只需将脚本移到后面`<form>`并调用`checkform();`一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T13:48:30.400

只需添加一个`else`then：

```
function checkform()
{
    var f = document.forms["theform"].elements;
    var cansubmit = true;

    for (var i = 0; i < f.length; i++) {
        if (f[i].value.length == 0) cansubmit = false;
    }

    if (cansubmit) {
        document.getElementById('submitbutton').disabled = false;
    }
    else {
        document.getElementById('submitbutton').disabled = 'disabled';
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-04T12:49:08.913

把它放在桌子里，然后在她身上做：

```
var tabPom = document.getElementById("tabPomId");
$(tabPom ).prop('disabled', true/false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-24T21:21:51.980

我刚刚在[禁用提交按钮上发布了这个，直到输入字段被填写](https://stackoverflow.com/questions/16761696/disable-submit-button-until-input-fields-filled-in)。为我工作。

使用提交时的表格。干净整洁。您不必担心更改和按键事件触发。不必担心键位和焦点问题。

[http://www.w3schools.com/jsref/event_form_onsubmit.asp](http://www.w3schools.com/jsref/event_form_onsubmit.asp)

```
<form action="formpost.php" method="POST" onsubmit="return validateCreditCardForm()">
   ...
</form>

function validateCreditCardForm(){
    var result = false;
    if (($('#billing-cc-exp').val().length > 0) &&
        ($('#billing-cvv').val().length  > 0) &&
        ($('#billing-cc-number').val().length > 0)) {
            result = true;
    }
    return result;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-23T05:18:38.757

这是代码

```
<html>
   <body>
      <input type="text" name="name" id="name" required="required"                                    aria-required="true" pattern="[a-z]{1,5}" onchange="func()">
      <script>
       function func()
       {
        var namdata=document.form1.name.value;
         if(namdata.match("[a-z]{1,5}"))
        {
         document.getElementById("but1").disabled=false;
        }
        }
        </script>
  </body>
</html> 
```

使用 Javascript

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-20T11:59:29.187

您可以根据下面的 javascript 验证启用和禁用提交按钮是验证码。

```
<script>
function validate() {

var valid = true;
valid = checkEmpty($("#name"));
valid = valid && checkEmail($("#email"));

$("#san-button").attr("disabled",true);
if(valid) {
$("#san-button").attr("disabled",false);
} 
}
function checkEmpty(obj) {
var name = $(obj).attr("name");
$("."+name+"-validation").html(""); 
$(obj).css("border","");
if($(obj).val() == "") {
$(obj).css("border","#FF0000 1px solid");
$("."+name+"-validation").html("Required");
return false;
}

return true; 
}
function checkEmail(obj) {
var result = true;

var name = $(obj).attr("name");
$("."+name+"-validation").html(""); 
$(obj).css("border","");

result = checkEmpty(obj);

if(!result) {
$(obj).css("border","#FF0000 1px solid");
$("."+name+"-validation").html("Required");
return false;
}

var email_regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,3})+$/;
result = email_regex.test($(obj).val());

if(!result) {
$(obj).css("border","#FF0000 1px solid");
$("."+name+"-validation").html("Invalid");
return false;
}

return result; 
}
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-25T04:11:20.383

我认为这对于 JavaScript 的初学者来说会简单得多

```
 //The function checks if the password and confirm password match
    // Then disables the submit button for mismatch but enables if they match
            function checkPass()
            {
                //Store the password field objects into variables ...
                var pass1 = document.getElementById("register-password");
                var pass2 = document.getElementById("confirm-password");
                //Store the Confimation Message Object ...
                var message = document.getElementById('confirmMessage');
                //Set the colors we will be using ...
                var goodColor = "#66cc66";
                var badColor = "#ff6666";
                //Compare the values in the password field 
                //and the confirmation field
                if(pass1.value == pass2.value){
                    //The passwords match. 
                    //Set the color to the good color and inform
                    //the user that they have entered the correct password 
                    pass2.style.backgroundColor = goodColor;
                    message.style.color = goodColor;
                    message.innerHTML = "Passwords Match!"
 //Enables the submit button when there's no mismatch                   
                    var tabPom = document.getElementById("btnSignUp");
                    $(tabPom ).prop('disabled', false);
                }else{
                    //The passwords do not match.
                    //Set the color to the bad color and
                    //notify the user.
                    pass2.style.backgroundColor = badColor;
                    message.style.color = badColor;
                    message.innerHTML = "Passwords Do Not Match!"
 //Disables the submit button when there's mismatch       
                    var tabPom = document.getElementById("btnSignUp");
                    $(tabPom ).prop('disabled', true);
                }
            } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-09T10:30:40.700

```
<form name="theform">
    <input type="text" />
    <input type="text" />`enter code here`
    <input id="submitbutton" type="submit"disabled="disabled" value="Submit"/>
</form>

<script type="text/javascript" language="javascript">

    let txt = document.querySelectorAll('[type="text"]');
    for (let i = 0; i < txt.length; i++) {
        txt[i].oninput = () => {
            if (!(txt[0].value == '') && !(txt[1].value == '')) {
                submitbutton.removeAttribute('disabled')
            }
        }
    }
</script> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-07T10:11:03.357

这是我使用禁用按钮验证表单的方法。看看下面的片段：

```
var inp = document.getElementsByTagName("input");
var btn = document.getElementById("btn");
// Disable the button dynamically using javascript
btn.disabled = "disabled";

function checkForm() {
    for (var i = 0; i < inp.length; i++) {
        if (inp[i].checkValidity() == false) {
            btn.disabled = "disabled";
        } else {
            btn.disabled = false;
        }
    }
}
```

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>JavaScript</title>
</head>
<body>

<h1>Javascript form validation</h1>
<p>Javascript constraint form validation example:</p>

<form onkeyup="checkForm()" autocomplete="off" novalidate>
    <input type="text" name="fname" placeholder="First Name" required><br><br>
    <input type="text" name="lname" placeholder="Last Name" required><br><br>
    <button type="submit" id="btn">Submit</button>
</form>

</body>
</html>
```

* * *

示例解释：

1.  我们创建一个变量来存储所有输入元素。

    ```
    var inp = document.getElementsByTagName("input"); 
    ```

2.  我们创建另一个变量来存储按钮元素

    ```
    var btn = document.getElementById("btn"); 
    ```

3.  我们遍历输入元素的集合

    ```
    for (var i = 0; i < inp.length; i++) {
        // Code
    } 
    ```

4.  最后，我们使用该`checkValidity()`方法检查输入元素（带有`required`属性）是否有效（代码插入到 for 循环中）。如果它无效，则按钮将保持禁用状态，否则将删除该属性。

    ```
    for (var i = 0; i < inp.length; i++) {
        if (inp[i].checkValidity() == false) {
            btn.disabled = "disabled";
        } else {
            btn.disabled = false;
        }
    } 
    ```

# android - Android：gps 和处理程序

> ID：13931694
> 
> 赞同：0
> 
> 时间：2012-12-18T11:12:59.763
> 
> 标签：android, gps, handler

我的应用程序必须捕获 gps 坐标并使用处理程序定期发送它们。在 onCreate 方法中，我执行以下操作：

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 5000, 1, this); 
```

然后`onLocationChanged`开始工作。在 onCreate 结束时，我启动了一个处理程序，它每 2.5 秒做一些事情。我认为这不是实现我的目标的正确方法，因为 onLocationChanged() 不是在单独的线程中执行的，所以如果处理程序执行 onLocation 就无法执行。
**编辑**
我不知道如何同时管理 GPS 坐标的检索（如何执行 onLocationChanged）。计时器每 2.5 秒运行一次任务，同时 onLocationChange 必须设置我在计时器中需要的 gps 值。我担心 onLocationChange 可能存在根本无法执行的问题。我想使用 AsyncTask，但如何执行呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:34:32.180

您可以使用 AsyncTask 来获取数据。

参考这个问题。希望你能找到答案。

[如何使用 AsyncTask 获取位置](https://stackoverflow.com/questions/5676653/how-to-get-location-using-asynctask)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:50:20.977

尽管您已经编辑了您的问题，但我仍然不清楚您到底关心什么。

我会给你一些关于并发的背景信息，让我们看看它是否有帮助......

**它是什么**

首先，并发性意味着软件设计为具有多个线程。这并不意味着多个线程将同时运行，只有当您的设备具有多个内核时才会发生这种情况。如果设备只有一个核心，一次只能运行一个线程，系统会在它们之间切换。

一旦您的系统被设计为具有多个线程，您必须确保处理共享对象的所有代码（和使用的库）都是线程安全的。

**为什么我需要它**

您需要使用线程的最常见原因是：

*   你有一段很重的代码，可以分成几部分，你有一个多核的设备。在这种情况下，您可以从两个（或更多）同时运行的线程处理部分工作中获得性能优势。
*   您的代码中有一个阻塞操作（即从套接字读取）。这应该移动到一个单独的线程以避免阻塞所有程序，直到 socket.read() 返回。
*   最后，也是 Android 中最常见的一个，任何长时间运行的操作（即超过几秒钟）都应该移动到与 UI（用户界面）使用的线程不同的线程，以避免倾倒用户体验和/或ANR 错误。

**你的情况**

您指的是您正在使用`LocationManager`和一个`Handler`. 这些类都没有暗示使用不同的线程。

`LocationManager`使用回调`onLocationChange()`运行您在 UI 线程中定义的代码。

`Handler`在分配处理程序的线程中运行代码。因此，如果您在 UI 线程中创建了处理程序，则处理程序回调也将在那里运行。

仅当您创建一个新的`Thread`（或任何其他具有相同功能的类）时，您才有一个真正的多线程应用程序，需要您小心使用共享对象。

希望能帮助到你。如果您需要更多说明，请告诉我。

问候。

# google-app-engine - 在 appengine 中使用反向光标进行分页

> ID：13931703
> 
> 赞同：5
> 
> 时间：2012-12-18T11:13:19.013
> 
> 标签：google-app-engine, app-engine-ndb

我正在尝试为我的应用程序上的查询进行正向和反向分页。

我从以下示例开始：[https ://developers.google.com/appengine/docs/python/ndb/queries#cursors](https://developers.google.com/appengine/docs/python/ndb/queries#cursors)

我希望该示例执行典型的向前/向后分页以创建可以传递给模板的光标，以便在当前页面之后/之前的后续请求中使用。但它正在做的是为同一页面获取游标，一个从头开始，另一个从结尾（如果我理解正确的话）。

我想要的是指向下一页开头的光标，以及指向上一页开头的光标，以便在我的 UI 中使用。

根据上面提到的例子，我已经设法用下面的代码几乎做到了：

```
 curs = Cursor(urlsafe=self.request.get('cur'))

    q = MyModel.query(MyModel.usett == usett_key)
    q_forward = q.order(-MyModel.sugerida)
    q_reverse = q.order(MyModel.sugerida)

    ofus, next_curs, more = q_forward.fetch_page(num_items_page,
                                                 start_cursor=curs)

    rev_cursor = curs.reversed()
    ofus1, prev_curs, more1 = q_reverse.fetch_page(num_items_page,
                                                 start_cursor=rev_cursor)

    context = {}

    if more and next_curs:
        context['next_curs'] = next_curs.urlsafe()

    if more1 and prev_curs:
        context['prev_curs'] = prev_curs.reversed().urlsafe() 
```

问题，以及这个问题的重点，是我使用`more`and`more1`来查看是否有下一页。这在倒退的意义上是行不通的。对于第一页，`more1`是`True`，在第二页`more1`是`False`，随后的页面给出`True`。

我需要`False`为第一页和`True`其他每一页提供的东西。看起来这个`more`返回值是要使用的东西，但也许我有一个错误的查询设置，或者任何其他错误。

感谢大家！

编辑：由于我没有找到一个简单的解决方案，我转而使用[ndbpager](http://vladimir-mihailenco.appspot.com/articles/2001/ndbpager-pager-for-google-appengine-ndb/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:52:47.970

没有这样的事情。如果您使用游标开始查询（第一页通常没有游标），您知道当前页面之前有（至少）一页。访问前一页的一个常见技巧是反转排序顺序。

如果您有一个按creationdate desc 排序的列表，您可以获取当前页面第一个元素的creationdate，使用倒排顺序查询creationdate < this creationdate 的元素。这将返回比给定创建日期更新的最旧元素。翻转检索到的元素列表（以再次将它们恢复到正确的顺序），您就可以在不使用光标的情况下获得之前页面的元素。

*注意*：这需要您的排序顺序的值不同。

在某些情况下，也可以使用允许随机访问不同页面的预构建索引，请参阅[https://bitbucket.org/viur/server/src/98de79b91778bb9b16e520acb28e257b21091790/indexes.py](https://bitbucket.org/viur/server/src/98de79b91778bb9b16e520acb28e257b21091790/indexes.py)了解更多信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-21T19:59:47.867

我有一个解决方法，而不是最好的解决方案。它正在重定向回上一页。

```
<a href="javascript:history.back()">Previous</a> 
```

我认为 PagedQuery 有能力，但仍在等待有人发布更全面的教程。

# c++ - Qt拖放按钮；跌落未检测

> ID：13931705
> 
> 赞同：1
> 
> 时间：2012-12-18T11:13:20.943
> 
> 标签：c++, qt, drag-and-drop

我正在 QT 中创建一个 2D 游戏，我正在尝试在我的程序中实现拖放。由于某种原因，drop 没有注册：qDebug 应该在 drop 时打印一条消息，但这不会发生。

```
#include "dialog.h"
#include "ui_dialog.h"
#include "world.h"
#include <vector>

Dialog::Dialog(QWidget *parent) : QDialog(parent), ui(new Ui::Dialog)
{
    ui->setupUi(this);

    scene = new QGraphicsScene(this);
    ui->graphicsView->setScene(scene);

    MySquare *item;
    QGraphicsRectItem *enemyItem;
    World *myWorld = new World();
    std::vector<Tile*> tiles = myWorld->createWorld(":/texture.jpg");

    int count = 0;
    foreach (Tile *tile, tiles){
        count++;
       item = new MySquare(tile->getXPos()*4,tile->getYPos()*4,4,4);
       item->setBrush(QColor(tile->getValue()*255,tile->getValue()*255,tile->getValue()*255));
       item->setAcceptDrops(true);
       scene->addItem(item);
    }

    player = new MySquare(10,20,10,10);
    player->setAcceptDrops(true);
    scene->addItem(player);

    //drag & drop part
    QPushButton *pushButton = new QPushButton("Click Me",this);
    connect(pushButton,SIGNAL(pressed()),this,SLOT(makeDrag()));
    setAcceptDrops(true);
}

void Dialog::makeDrag()
{
    QDrag *dr = new QDrag(this);
    // The data to be transferred by the drag and drop operation is contained in a QMimeData object
    QMimeData *data = new QMimeData;
    data->setText("This is a test");
    // Assign ownership of the QMimeData object to the QDrag object.
    dr->setMimeData(data);
    // Start the drag and drop operation
    dr->start();
} 
```

mysquare.cpp

```
#include "mysquare.h"
MySquare::MySquare(int _x,int _y, int _w, int _h)
{
    isPlayer=false;
    Pressed=false;
    setFlag(ItemIsMovable);
    setFlag(ItemIsFocusable);
    setAcceptDrops(true);

    color=Qt::red;
    color_pressed = Qt::green;

    x = _x;
    y = _y;
    w = _w;
    h = _h;
}

QRectF MySquare::boundingRect() const
{
    return QRectF(x,y,w,h); 
}

void MySquare::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)
{
    QRectF rec = boundingRect();
    QBrush brush(color);

    if (Pressed){
        brush.setColor(color);

    } else {
        brush.setColor(color_pressed);
    }

    painter->fillRect(rec,brush);
    painter->drawRect(rec);
}

void MySquare::mousePressEvent(QGraphicsSceneMouseEvent *event)
{
    Pressed=true;
    update();
    QGraphicsItem::mousePressEvent(event);
    qDebug() << "mouse Pressed";
}

void MySquare::mouseReleaseEvent(QGraphicsSceneMouseEvent *event)
{
    Pressed=false;
    update();
    QGraphicsItem::mousePressEvent(event);
    qDebug() << "mouse Released";
}

void MySquare::keyPressEvent(QKeyEvent *event){
    int x = pos().x();
    int y = pos().y();

    //key handling

    QGraphicsItem::keyPressEvent(event);

}

void MySquare::dropEvent(QDropEvent *event)
{
    qDebug("dropEvent - square");
    // Unpack dropped data and handle it the way you want
    qDebug("Contents: %s", event->mimeData()->text().toLatin1().data());
}

void MySquare::dragMoveEvent(QDragMoveEvent *event){
    qDebug("dragMoveEvent - square ");
    event->accept();
}

void MySquare::dragEnterEvent(QDragEnterEvent *event){
    event->setAccepted(true);
    qDebug("dragEnterEvent - square");
    event->acceptProposedAction();
}

void MySquare::setBrush(QColor _color){
    color = _color;
    color_pressed = _color;
    update(); //repaint
} 
```

![在此处输入图像描述](../Images/47bd97e8414e45a8845e5a6a05a09490.png)

编辑; qDebug() 没有问题我只是用它来测试它们我在拖动事件中..我不是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T17:02:24.153

在你的`mouseReleaseEvent`，你传递给`QGraphicsItem::mousePressEvent`而不是`QGraphicsItem::mouseReleaseEvent`

编辑：我不知道这是否重要，但在构造函数中初始化 QGraphicsItem

```
MySquare::MySquare(int _x,int _y, int _w, int _h) : QGraphicsItem() 
```

# sql - MS Access 的计数问题

> ID：13931707
> 
> 赞同：1
> 
> 时间：2012-12-18T11:13:24.493
> 
> 标签：sql, ms-access, count

以下查询在 MS Access 中运行良好，但我实际上只想获取 Main Project 字段加上 Name 的计数。就像是：

```
SELECT Sheet1.[Main project], Count(Sheet1.[Name]) AS Total 
```

当我这样做时，我收到以下错误：

“您尝试执行的查询不包含指定表达式‘主项目’作为聚合函数的一部分’

我在加入中做错了吗？知道什么是不正确的吗？

```
SELECT Sheet1.[Main project], Sheet1.[Main link], Sheet1.[Name]
FROM Sheet1
INNER JOIN Sheet1 AS Sheet1_1 

ON (Sheet1.[Main link] = Sheet1_1.[Main link]
AND Sheet1.[Main project] = Sheet1_1.[Main project])

WHERE Sheet1_1.[Name] ='0.4 Rollout plan approved'
AND Sheet1_1.[%compl#] = 100
AND (Sheet1_1.[Task class] <> '***Sammelvorgang' AND Sheet1_1.[Task class] <> '' AND  Sheet1_1.[Task class] <> 'M D-Muster')

AND Sheet1.[Main project] = 'AUDI AG, Ingolstadt'
AND (Sheet1.[Task class] <> '***Sammelvorgang' AND Sheet1.[Task class] <> '' AND  Sheet1.[Task class] <> 'M D-Muster')
AND (Sheet1.[Name] NOT LIKE '0.*' AND Sheet1.[Name] NOT LIKE '1.*')
AND Sheet1.[Start] < DateAdd("d",-7,Now()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:22:15.270

```
SELECT Sheet1.[Main project], Count(Sheet1.[Name]) AS Total
    FROM Sheet1
    GROUP BY Sheet1.[Main project] 
```

`Count()`仅当您想要表中所有内容的总数时，聚合函数才会自动工作。如果你想把它分解成更具体的分组，你需要一个`GROUP BY`语句来告诉数据库如何分解它。

将其集成到更大的查询中应该不是问题：只需注意`GROUP BY`子句位于子句之后`WHERE`；因此你应该在最后添加它。

# android - 第二次施放时AlertDialog崩溃

> ID：13931709
> 
> 赞同：1
> 
> 时间：2012-12-18T11:13:28.900
> 
> 标签：android, android-alertdialog

我正在尝试使用 alertdialog 从用户那里接收数据，我第一次使用它时没有问题，但是如果我第二次使用 alertdialog 时应用程序崩溃。

```
final AlertDialog.Builder alert = new AlertDialog.Builder(this);
        final LinearLayout marco=new LinearLayout(this);
        final EditText input = new EditText(this);
        final EditText input2 = new EditText(this);
        final TextView nom=new TextView(this);
        nom.setText("Nombre:");
        final TextView ap=new TextView(this);
        ap.setText("Apellido:");
        input.setWidth(500);
        input2.setWidth(500);
        ((LinearLayout)marco).addView(nom);
        ((LinearLayout)marco).addView(input);
        ((LinearLayout)marco).addView(ap);
        ((LinearLayout)marco).addView(input2);
        alert.setTitle("Introduce Datos:");
        marco.setOrientation(LinearLayout.VERTICAL);
        alert.setView(marco);
        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                String value = input.getText().toString().trim();
                String value2 = input2.getText().toString().trim();
                Toast.makeText(getApplicationContext(), value, Toast.LENGTH_SHORT).show();
                String nombre=value,apellido=value2;
            db.execSQL("INSERT INTO Usuarios (codigo, nombre, apellido) " +
                        "VALUES (" + codigo + ", '" + nombre +"','"+apellido+"')");
                codigo++;
                RellenarSpinner(db);

            }
        });
        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                dialog.cancel();
                ((AlertDialog.Builder) alert).setView(marco);
            }
        });
final Button alta=(Button)findViewById(R.id.btnAlta);
alta.setOnClickListener(new OnClickListener(){

            public void onClick(View arg0) {
                alert.show();
            }}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:23:57.383

当我开始使用 alertdialogs 时，我遇到了同样的问题。尝试制作一个全局变量 public AlertDialog myAlert; 然后在出现对话框时使用此变量。或者直接使用代码： new AlertDialog.Builder.set....set.(...).show(); ...

# batch-file - 批处理文件来定位静态左右边界之间的文本

> ID：13931710
> 
> 赞同：0
> 
> 时间：2012-12-18T11:13:29.657
> 
> 标签：batch-file, text, tags, locate

我正在寻找一个批处理文件来定位静态左右边界之间的文本。

找到的文本将回显到一个新文件。开始边界，和结束一样，都是标签（左卷曲实际上只是一个开始标签）：

```
{DomainName>some-domain.com{/DomainName> 
```

所以我想要做的是`some-domain.com`写入一个单独的文件。页面上方和下方都有更多的编码，但左右边界始终相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:37:50.717

```
@echo off
Setlocal EnableDelayedExpansion
Set "left={DomainName>"
Set "right={/DomainName>"
Set "text={DomainName>some-domain.com{/DomainName>"
Rem Change left delimiter
Set "text=!text:%left%= {"
Rem Change right delimiter
Set "text=!text:%right%=}"
Rem echo text found
For /F "tokens=2 delims={}" %%a in ("!text!") Do echo %%a 
```

# objective-c - 如何在 xcode 的表格视图中显示详细信息

> ID：13931711
> 
> 赞同：0
> 
> 时间：2012-12-18T11:13:32.010
> 
> 标签：objective-c, uitableview

如何在表格视图中创建 10 行`xcode`并在单击它们时将详细信息显示为警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:20:49.100

您必须在`didselectRowAtIndexPath`方法中编写逻辑

arr是`NSMutablearray`..

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle: @"Detail"
                              message:[arr objectAtIndex:indexPath.row]
                              delegate: nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
    [alert show];
} 
```

# blackberry - 如何从黑莓的经理中删除一个字段

> ID：13931713
> 
> 赞同：-2
> 
> 时间：2012-12-18T11:13:37.020
> 
> 标签：blackberry

首先，请尝试理解我的问题，因为我知道他们有太多与此相关的问题，但就我而言，没有人在工作

为什么我不知道，请看我的代码。

这是有效的

```
 public final class MyScreen extends MainScreen implements FieldChangeListener
    {
        private combine enter_in;
        private manager_s ms , ms_1 ;
        private Bitmap img;
        LabelField lb_1 , lb_2 , lb_3 ;

        public MyScreen()
        {        
            setTitle("MyTitle");

            img = Bitmap.getBitmapResource("icon.png");
            //Bitmap img_1 = Bitmap.getBitmapResource("icon.png");

            enter_in = new combine ( Field.FOCUSABLE , img  );      
            enter_in.setChangeListener(this);

            ms = new manager_s( 0 , 4 );
            ms.add(enter_in);

            lb_1 = new LabelField("Menu") ;
            lb_2 = new LabelField("Favorites") ;
            lb_3 = new LabelField("Reserved") ;

            ms.add(lb_1);
            ms.add(lb_2);
            ms.add(lb_3);

            add(ms);

        }
    } 
```

但是当我实现 FieldChangedListener 时，当时`ms.delete(lb_1)`不工作但`delete(ms)`正在工作，请帮助解决这个问题

```
 public void fieldChanged(Field field, int context) 
    {
        if ( field == enter_in )
        {
            ms.delete(lb_1);            
        }
    } 
```

所以，我要问的是，ms.delete(lb_1) 有什么理由不能在 MyScreen 类下工作。

看到这是我使用的 manager_class，Manager (custom_manager)，这个 manager 由我的类扩展，用于在屏幕内添加字段

```
public class manager_s extends Manager
    {
        int col ;
        int w_1 = 20 ;

        protected manager_s(long style , int col )
        {
            super(style);
            this.col = col ;
        }
        protected void sublayout(int width, int height) 
        {

                for ( int i = 0 ; i < col ; i ++ )
                {
                    Field field = getField (i);

                    layoutChild( field , 130 , 100 );
                }

                for ( int i = 0 ; i < col ; i ++ )
                {
                    Field field = getField (i);

                    setPositionChild ( field , w_1 , 20 );

                    w_1 = w_1 + 135 ;

            setExtent ( width , 200  );
        }    
    }
} 
```

并且错误是**INDEX_OUT_OF_BOUND_EXCEPTION**，这就是我的问题，因为互联网上的每个人（作为资源）都在说删除该字段，但我的情况是没有任何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:13:41.103

尝试这个 -

```
 setTitle("MyTitle");
    final ButtonField enter_in=new ButtonField("enter_in");
    add(enter_in);

    lb_1 = new LabelField("Menu") ;
    lb_2 = new LabelField("Favorites") ;
    lb_3 = new LabelField("Reserved") ;

    final HorizontalFieldManager ms=new HorizontalFieldManager();
    ms.add(lb_1);
    lb_1.setMargin(0,50,0,0);//Here you can set the spacing between the Fields.
    ms.add(lb_2);
    lb_2.setMargin(0,50,0,0);//Here you can set the spacing between the Fields.
    ms.add(lb_3);

    add(ms);

    FieldChangeListener listener=new FieldChangeListener() {

        public void fieldChanged(Field field, int context) {
        if(field==enter_in){
            ms.delete(lb_1);
            ms.invalidate();

        }
        }
    };
    enter_in.setChangeListener(listener); 
```

代替我的 ButtonField ，您可以使用您的组合。

# c# - MVC 4、EF 5 SaveChanges 不更新数据库

> ID：13931714
> 
> 赞同：1
> 
> 时间：2012-12-18T11:13:40.357
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4

我对此比较陌生，但我仍然有点尴尬，因为这真的应该很简单......

我要做的就是更新数据库表中的现有行。我首先使用 EF（我相信是 5）代码。

对于 MVC 3，我使用了这种方法（有效）：

```
ReportCommon reportcommon = db.ReportCommon.Single(r => r.ReportCommonId == id);
reportcommon.IP = StaticUtilities.GetIPAddress();
db.ObjectStateManager.ChangeObjectState(reportcommon, EntityState.Modified);
db.SaveChanges(); 
```

我尝试了一些我发现的示例，虽然它们没有出错，但数据库没有更新......

```
[HttpPost]
public ActionResult Edit(CitizenEntryViewModel citizenDetails)
    {
        ActiveCitizen activeCitizen = db.ActiveCitizen.SingleOrDefault(m => m.ID == citizenDetails.ActiveCitizen.ID);

        if (activeCitizen != null)
        {
            citizenDetails.ActiveCitizen.CitizenUpdatedRecordOn = DateTime.Now;
            // Fields we don't edit but still need to pass back
            citizenDetails.ActiveCitizen.PublicID = activeCitizen.PublicID;
            citizenDetails.ActiveCitizen.IsKIN = activeCitizen.IsKIN;
            activeCitizen = citizenDetails.ActiveCitizen;
            db.SaveChanges();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T12:41:50.843

我已设法使用[此 SO 帖子](https://stackoverflow.com/questions/6033638/an-object-with-the-same-key-already-exists-in-the-objectstatemanager-the-object)中提到的以下代码解决了此问题，该代码显示了如何仅保存新值：

```
db.Entry(activeCitizen).CurrentValues.SetValues(citizenDetails.ActiveCitizen); 
```

请注意，我遇到了错误：“ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象”

[这篇 SO 帖子](https://stackoverflow.com/questions/7221349/an-object-with-the-same-key-already-exists-in-the-objectstatemanager-except)帮助我克服了这个问题。

因此最终的代码是：

```
var currentCitizen = db.ActiveCitizen.Find(citizenDetails.ActiveCitizen.ID);
db.Entry(currentCitizen).CurrentValues.SetValues(citizenDetails.ActiveCitizen);
db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:47:20.533

试试这个

```
[HttpPost]
public ActionResult Edit(CitizenEntryViewModel citizenDetails)
{
    ActiveCitizen activeCitizen = db.ActiveCitizen.SingleOrDefault(m => m.ID == citizenDetails.ActiveCitizen.ID);

    if (activeCitizen != null)
    {
        UpdateModel(activeCitizen);
        db.SaveChanges();
    } 
```

# c# - EnableViewState="false" 不更新 asp.net 中的 updatePanel

> ID：13931715
> 
> 赞同：0
> 
> 时间：2012-12-18T11:13:40.617
> 
> 标签：c#, asp.net, updatepanel, viewstate

我想弄清楚这里有什么问题..当我在我的更新面板中禁用用户控件的 Viewstate 时，它​​只是不更新​​内容。

这是我的代码：

如果我将 Page ViewState-true 设置为工作正常，但在我需要时它不会隐藏它。

```
<asp:UpdatePanel ID="CheckoutUpdatePanel" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
         <uc:ClickAndCollect ID="ClickAndCollectPanel" runat="server" Visible="false" EnableViewState="false" />
         </ContentTemplate>
 </asp:UpdatePanel> 
```

=======================

# 我的用户控制

我的 UserControl 也包含在 updatePanel..

--：即使我禁用它，它也不会对 ViewState 产生任何影响。它在其他页面上工作正常

请帮忙。

谢谢，米兰P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:53:24.383

```
I think you should have ViewState information enabled always 
for doing update with Update Panel.

The update panel will refer the control state using ViewState even 
for partial request. This is why sometimes people say ASP.Net is evil, 
since it sends the whole page view state for every ajax request as parameter. 
```

所以我认为更新面板/ **asp.net ajax 严重依赖于** **ASP.Net Ajax的视图状态**

看

[http://encosia.com/why-aspnet-ajax-updatepanels-are-dangerous/](http://encosia.com/why-aspnet-ajax-updatepanels-are-dangerous/)

[限制 AJAX 调用的视图状态信息](https://stackoverflow.com/questions/8877252/limiting-view-state-information-on-ajax-calls)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:17:37.340

> 当我在更新面板中禁用用户控件的 Viewstate 时，它​​只是不更新​​内容。

由于您是`UpdatePanel`“`UpdateMode`有条件的”，因此您需要[`Update`](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.update.aspx)手动进行。

例如，在您想要显示/隐藏它的事件处理程序中的某处：

```
ClickAndCollectPanel.Visible = false;
CheckoutUpdatePanel.Update(); 
```

[`UpdatePanel.Update`方法](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.update.aspx)

> 如果您有必须执行以确定是否应更新 UpdatePanel 控件的服务器代码，请调用 Update 方法。如果您计划使用 Update 方法，请将 UpdateMode 属性设置为 Conditional。如果您希望决定在服务器逻辑中更新面板，请确保 ChildrenAsTriggers 属性为 false，并且没有为面板定义显式触发器。

# mule - MULE 表达式转换器不被接受

> ID：13931716
> 
> 赞同：1
> 
> 时间：2012-12-18T11:13:45.720
> 
> 标签：mule, expression

我正在尝试学习 Mule ESB，但在示例项目中遇到问题。为什么这些行带有红色下划线并且没有在消息流中表示？

```
<expression-transformer name="returnAttachments">
        <return-argument evaluator="attachments-list" expression="*.txt,*.ozb,*.xml" optional="false"/>
    </expression-transformer> 
```

作为示例项目的一部分，我从 mulesoft.org 剪切并粘贴了这些行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:40:02.127

Mule studio 在渲染嵌套元素时遇到问题（[此处](http://www.mulesoft.org/jira/browse/STUDIO-2295)报告了错误）

相反，您可以使用紧凑版本并将其替换为以下内容：

```
<expression-transformer expression="#[attachments-list:*.txt,*.ozb,*.xml]"  doc:name="Expression" /> 
```

附带说明一下，自从 mule 3.3.0 以来，新的[mule 表达式语言](http://www.mulesoft.org/documentation/display/MULE3USER/Mule+Expression+Language)，建议尽可能依赖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:12:59.450

@genjosanzo 是对的，MEL 等价物是：

```
<expression-transformer
        expression="#[($.value in message.inboundAttachments.entrySet() if $.key ~= '(.*\\.txt|.*\\.ozb|.*\\.xml)')]" /> 
```

# javascript - 第二张图片滑动不适用于javascript

> ID：13931720
> 
> 赞同：0
> 
> 时间：2012-12-18T11:13:55.067
> 
> 标签：javascript

我只想通过 JavaScript 在同一页面上添加两个图片滑块。但只有一个滑块在工作，另一个是静态的。

到目前为止，这是我从网站获得的代码。

```
<script type="text/javascript">    
    window.onload = function() {
        var rotator = document.getElementById("rotator");
        var images = rotator.getElementsByTagName("img");
        for (var i = 1; i < images.length; i++) {
            images[i].style.display = "none";
        }
        var counter = 1;
        setInterval(function() {
            for (var i = 0; i < images.length; i++) {
                images[i].style.display = "none";
            }
            images[counter].style.display = "block";
            counter++;
            if (counter == images.length) {
                counter = 0;
            }
        }, 3000);
    };​
</script> 
```

```
<div id="rotator">
    <img height="250px" width="200px" src="images/claim/1.jpg" alt="" />
    <img height="250px" width="200px" src="images/claim/2.jpg" alt="" />
    <img height="250px" width="200px" src="images/claim/3.jpg" alt="" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:16:53.580

这是因为您的代码仅在一个 div 上应用了幻灯片功能。创建另一个 id = 'rotator2' 的 div，然后下面的代码将在两者上触发滑动。

```
<script type="text/javascript">
        window.onload = function() {  slideIt("rotator");slideIt("rotator2") ; } ;  
        function slideIt(contId) {
            var rotator = document.getElementById(contId);
            var images = rotator.getElementsByTagName("img");
            for (var i = 1; i < images.length; i++) {
                images[i].style.display = "none";
            }
            var counter = 1;
            setInterval(function () {
                for (var i = 0; i < images.length; i++) {
                    images[i].style.display = "none";
                }
                images[counter].style.display = "block";
                counter++;
                if (counter == images.length) {
                    counter = 0;
                }
            }, 3000);
        };

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:17:10.583

您必须定义两个`<div>`，例如 rotator1 和 rotator2，并将 JS 代码应用于 2 个块。

```
<script type="text/javascript">
        window.onload = function () {
            var rotator = document.getElementById("rotator1");
            var images = rotator.getElementsByTagName("img");
            for (var i = 1; i < images.length; i++) {
                images[i].style.display = "none";
            }
            var counter = 1;
            setInterval(function () {
                for (var i = 0; i < images.length; i++) {
                    images[i].style.display = "none";
                }
                images[counter].style.display = "block";
                counter++;
                if (counter == images.length) {
                    counter = 0;
                }
            }, 3000);
        };

</script>  

    <div id="rotator1">
    <img height="250px" width="200px" src="images/claim/1.jpg" alt="" />
    <img height="250px" width="200px" src="images/claim/2.jpg" alt="" />
    <img height="250px" width="200px" src="images/claim/3.jpg" alt="" />
    </div>

<script type="text/javascript">
        window.onload = function () {
            var rotator = document.getElementById("rotator2");
            var images = rotator.getElementsByTagName("img");
            for (var i = 1; i < images.length; i++) {
                images[i].style.display = "none";
            }
            var counter = 1;
            setInterval(function () {
                for (var i = 0; i < images.length; i++) {
                    images[i].style.display = "none";
                }
                images[counter].style.display = "block";
                counter++;
                if (counter == images.length) {
                    counter = 0;
                }
            }, 3000);
        };

</script>  

    <div id="rotator2">
    <img height="250px" width="200px" src="images/claim/3.jpg" alt="" />
    <img height="250px" width="200px" src="images/claim/4.jpg" alt="" />
    <img height="250px" width="200px" src="images/claim/5.jpg" alt="" />
    </div> 
```

**注意**最好在单独的文件中定义一个JS函数并调用两次

# javascript - 页面刷新后对话框显示为 div

> ID：13931723
> 
> 赞同：0
> 
> 时间：2012-12-18T11:13:59.277
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, ruby-on-rails-3

我正在尝试创建单页 CRUD。现在，我在使用 show 函数时遇到了一些错误。

可以在此处找到该应用程序的示例：http: [//tryoutcreation.herokuapp.com/](http://tryoutcreation.herokuapp.com/)

它似乎工作正常。创建后，如果页面没有刷新，显示功能可以正常工作。

但是，如果刷新，对话框将停止作为对话框工作，而仅显示为 div。

您可以通过创建用户并单击显示功能来尝试。然后尝试刷新页面，相同的 div 将仅显示在页面上，而不是作为对话框显示。

源代码可以在这里找到： [https ://github.com/frozzie/ModalCrud](https://github.com/frozzie/ModalCrud)

相关代码：

对话框是显示形式。

```
 <tr id = "<%= dom_id user%>">
<td><%= user.user_name %></td>
<td><%= user.email %></td>
<td><%= user.password %></td>
<td><%= user.account_type %></td>
<td><%= link_to 'Show', user, :remote=>true%></td>
<td><%= link_to 'Edit', edit_user_path(user), :remote => true %></td>
<td><%= link_to 'Destroy', user, :remote => true, method: :delete, data: { confirm: 'Are you sure?' } %>
</td> 
<div id = "show-form" title="User Information">
  <p>
  <b>User name:</b>
    <%= user.user_name %>
  </p>

  <p>
    <b>Email:</b>
    <%= user.email %>
  </p>

  <p>
  <b>Password:</b>
    <%= user.password %>
  </p>

  <p>
    <b>Account type:</b>
    <%= user.account_type %>
 </p>
</div>
</tr> 
```

只有在单击显示按钮时才应打开它。$("#show-form").dialog("open");

这是对话框。

```
 $( "#show-form" ).dialog({
        autoOpen: false,
        height: 400,
        width: 350,
        modal: true,
        closeOnEscape: true,
        resizable:false,
        buttons: {
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    }) 
```

任何关于它为什么发生的想法都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:28:26.327

这与您的 js 的关系比与您的 php.ini 的关系要小。

从您的代码中删除它：

```
 <div id = "show-form" title="User Information">
        <p>
        <b>User name:</b>
        <%= user.user_name %>
        </p>

        <p>
        <b>Email:</b>
        <%= user.email %>
        </p>

        <p>
        <b>Password:</b>
        <%= user.password %>
        </p>

        <p>
        <b>Account type:</b>
        <%= user.account_type %>
        </p>
        </div> 
```

然后寻找正确输出用户信息。不要只在页面顶部输出它。

```
 <tr id = "<%= dom_id user%>">
            <td><%= user.user_name %></td>
            <td><%= user.email %></td>
            <td><%= user.password %></td>
            <td><%= user.account_type %></td>
            <td class="click_me" data-id="<%= dom_id user%>"><%= link_to 'Show', user, :remote=>true%></td>
            <td><%= link_to 'Edit', edit_user_path(user), :remote => true %></td>
            <td><%= link_to 'Destroy', user, :remote => true, method: :delete, data: { confirm: 'Are you sure?' } %>
            </td> 
        </tr>
        <tr  style="display: none;" class="hidden_<%= dom_id user%>">
        <td colspan="8">

        <div class = "show-form" title="User Information">
        <p>
        <b>User name:</b>
        <%= user.user_name %>
        </p>

        <p>
        <b>Email:</b>
        <%= user.email %>
        </p>

        <p>
        <b>Password:</b>
        <%= user.password %>
        </p>

        <p>
        <b>Account type:</b>
        <%= user.account_type %>
        </p>
        </div>
</td>
</tr> 
```

**JS**

现在，

```
$('td').on('click','.click_me', function(){
      var id = $(this).data('id');
      $('.hidden_'+id).slideToggle();
}); 
```

这并不完美......无论如何，大声笑，但至少你可以满怀希望地使用它。

# android - 在命令行过滤 Logcat 日志

> ID：13931729
> 
> 赞同：43
> 
> 时间：2012-12-18T11:14:24.223
> 
> 标签：android, logcat

```
public static final TAG = "Legendry Eagle"; 
```

问题：我想从命令行查看日志`"Legendry Eagle"`。

我试过：

```
 adb logcat -s "Legendry Eagle" 
 adb logcat -s <Legendry Eagle> 
```

但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-18T11:44:10.967

如果您只想显示特定 TAG 的 logcat，请执行以下操作：

```
adb logcat YourTAGHere:Priority *:S 
```

这`*:S`很重要，因为它将所有其他标签设置为静音。如果我只想`MainActivity`在 Verbose 级别跟踪我的标签，语法将如下所示。

```
adb logcat MainActivity:V *:S 
```

**编辑：** 我发现没有用空格过滤掉标签的好方法。`LegendryEagle`工作正常，但我无法过滤掉`Legendry Eagle`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-18T11:31:26.197

如果标准`adb logcat -s tagname`不起作用，您始终可以通过管道输出`adb`to`find`以过滤您需要的内容，例如

```
adb logcat | find "Legendry Eagle" 
```

这会将整个 logcat 传递给 DOS`find`命令，该命令又会过滤掉包含*Legendry Eagle*字符串的行。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-12-01T12:32:24.250

```
adb logcat | grep "your tag" 
```

只会显示带有“你的标签”的日志

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-18T12:05:48.383

答案很简单。请删除两个单词之间的空格，然后重试。

```
 public static final TAG = "LegendryEagle";
 adb logcat -s "LegendryEagle" 
```

并查看 logcat 。你得到了答案。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-18T11:31:39.993

使用这个命令 adb logcat *:W 并阅读它。[http://developer.android.com/tools/debugging/debugging-log.html](http://developer.android.com/tools/debugging/debugging-log.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-11T15:10:55.247

假设您使用 Eagle 作为日志记录标签，请使用以下命令：

> adb logcat 鹰：* *:s

据我了解 Eagle:* 意味着打开 Eagle 标签的所有日志，而 *:s 意味着使所有其他标签静音

我个人觉得 eclipse logcat 视图比命令行更容易使用，它对不同级别的日志有不同的颜色，你可以创建一个过滤器并保存它，它会永远留在那里，直到你删除那个过滤器

# objective-c - 更改模态 UIActivityViewController 的外观

> ID：13931733
> 
> 赞同：2
> 
> 时间：2012-12-18T11:14:34.007
> 
> 标签：objective-c, ios, modalviewcontroller, uiappearance, uiactivityviewcontroller

如何更改`UIActivityViewController`模式共享操作中使用的邮件撰写对象导航栏的外观？

![UINavigationBar - 错误的色调](../Images/d7f2021feffae0174fc4c561deb42b97.png)

`UIActivityViewController`符合`UIAppearance`，所以我认为以下确实有效，但事实并非如此。导航栏保持默认蓝色。

```
activityVC.navigationController.navigationBar.tintColor = [UIColor greyColor]; 
```

语境：

```
 - (IBAction)share {
        NSString *textToShare = ...;
        NSURL *url = ...;

        NSArray *activityItems = [[NSArray alloc]  initWithObjects:textToShare,url,nil];

        UIActivity *activity = [[UIActivity alloc] init];
        NSArray *applicationActivities = [[NSArray alloc] initWithObjects:activity, nil];
        UIActivityViewController *activityVC =
        [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:applicationActivities];
        [activityVC setExcludedActivityTypes:[NSArray arrayWithObjects:                                              UIActivityTypeMessage,UIActivityTypeCopyToPasteboard,
UIActivityTypeAssignToContact,UIActivityTypePostToWeibo,                                              UIActivityTypePrint,UIActivityTypeSaveToCameraRoll,
                                              nil]];

        activityVC.navigationController.navigationBar.tintColor = [UIColor greyColor];

        [self presentViewController:activityVC animated:YES completion:nil];
    } 
```

我怎样才能将颜色`UINavigationBar`从蓝色更改为灰色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:23:28.943

在您的应用程序委托中执行此操作，它将更改整个应用程序中显示导航栏的导航栏颜色

```
[[UINavigationBar appearance] setTintColor:[UIColor colorWithRed:.9 green:.9 blue:.9 alpha:1]]; 
```

您还可以在 Application Delegate 中使用它来更改文本颜色和字体

```
NSDictionary *navbarTitleTextAttributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                           [UIColor redColor],UITextAttributeTextColor,
                                           [UIFont fontWithName:@"Arial" size:19],UITextAttributeFont,
                                           nil];
[[UINavigationBar appearance] setTitleTextAttributes:navbarTitleTextAttributes]; 
```

# php - Laravel 中的模板登录视图

> ID：13931735
> 
> 赞同：0
> 
> 时间：2012-12-18T11:14:47.450
> 
> 标签：php, laravel, templating, laravel-routing

所以，我想知道将单个视图 ( `views/login.blade.php`) 包含到布局加载器中的最佳方法是什么，所以我不必再次重复所有代码。

这是我加载登录视图的路线：

```
Route::get('login', function() {
    return View::make('login');
}); 
```

而且我已经阅读了[Laravel](https://stackoverflow.com/questions/12524712/templating-in-laravel)中的模板，但他们谈论的是控制器或刀片布局，没有路由布局。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:20:29.527

您可以改为使用控制器路由，以便您拥有类似的东西

```
Route::get('login', array('uses' => 'login@index')) 
```

在您的登录控制器中，您有

```
class Login_Controller extends Base_Controller {

        public $restful = true;    

        public function get_index()
        {
            return View::make('login');
        } 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:28:25.417

我刚刚发现一些 Laravel 论坛帖子解释了做模板的方法

*   [http://forums.laravel.com/viewtopic.php?id=531](http://forums.laravel.com/viewtopic.php?id=531) - 路由
*   [http://forums.laravel.com/viewtopic.php?id=839](http://forums.laravel.com/viewtopic.php?id=839) - 控制器

还有这篇博客文章：

*   [http://jasonlewis.me/article/laravel-controller-and-route-layouts](http://jasonlewis.me/article/laravel-controller-and-route-layouts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:36:27.247

我喜欢这样使用它：

登录页面正在扩展主布局的内容部分。我喜欢完整页面的登录页面（导航、标题等）

# .net - .NET JsonReaderWriterFactory 读取错误

> ID：13931751
> 
> 赞同：0
> 
> 时间：2012-12-18T11:15:51.963
> 
> 标签：.net, json, serialization

我试图加载一个 .json 文件并使用“JsonReaderWriterFactory”读取它。我的代码如下：

```
string path = Server.MapPath(Url.Content("~/")) + "JsonData/file.json";
byte[] buffer = System.IO.File.ReadAllBytes(path);

System.Xml.XmlReader reader = System.Runtime.Serialization.Json.JsonReaderWriterFactory.CreateJsonReader(buffer, System.Xml.XmlDictionaryReaderQuotas.Max);

System.Xml.Linq.XElement root = System.Xml.Linq.XElement.Load(reader); 
```

但是当我调用“System.Xml.Linq.XElement.Load(reader)”时，我得到一个异常“**意外字符'ï'** ”。怎么了？我应该指定一个特定的编码吗？谢谢你。

我试图读取的数据应该是以这种方式组成的对象数组：

```
[
    {
        id: "ITEM_ID",
        label: "Item Label",
        url: "http://www.address.com",
        parameters: [
            "PARAM_1",
            "PARAM_2"
        ],
        filters: {
            logic: "or",
            filters: [
                { field: "fieldA", operator: "eq", value: 100 },
                {
                    logic: "and",
                    filters: [
                        { field: "fieldA", operator: "lt", value: 100 },
                        { field: "fieldB", operator: "eq", value: true }
                    ]
                }
            ]
        }
    }, 
    {...}, 
    {...} 
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:34:46.210

首先，我建议您在[http://jsonlint.com/](http://jsonlint.com/)
上验证您的 Json 数据。 看来您的 Json 数据格式不正确。

错误来了，因为您没有用`" "`标记包装您的钥匙。
所以它必须像这些。

```
{
    "id": "ITEM_ID",
    "label": "Item Label"
} 
```

# ajax - 无法序列化包含用于 Ajax 调用的 tinymce 编辑器的表单

> ID：13931756
> 
> 赞同：1
> 
> 时间：2012-12-18T11:16:00.787
> 
> 标签：ajax, asp.net-mvc, tinymce

我正在尝试将包含 tinyMCE 编辑器实例的表单发布到使用 AJAX 的操作方法。我的观点：

```
<script src="@Url.Content("~/Scripts/tinymce/tiny_mce.js")" type="text/javascript"></script>

<div>
    <fieldset>
       @using (Html.BeginForm("SubmitNewTRForm", "LaboratoriesOrdersGrid", FormMethod.Post,
            new {enctype = "multipart/form-data", @id = "newTrUploadForm" }))
            {
                <div  style="overflow: hidden;width: 763px; height:312px;  border: black solid thin;">
                      @Html.TextAreaFor(model => model.TestSummary, new {@class="TestSummaryEditor"})
                </div>
             }

    </fieldset>
</div> 
```

在同一个视图中，我实例化了编辑器：

```
 $(document).ready(function () {
        tinyMCE.init({
            directionality: "rtl",
            width: "760",
            height: "300",
            language: 'fa',
            // General options
            mode: "textareas",
            theme: "advanced",
            plugins: "autolink,lists,pagebreak,style,layer,table,save,advhr,advimage,advlink,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
            // Theme options
            theme_advanced_buttons1: "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect,|,sub,sup,|,charmap,iespell,advhr,|,print,|,fullscreen",
            theme_advanced_buttons2: "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,cleanup,|,insertdate,inserttime,preview,|,forecolor,backcolor,|,insertlayer,moveforward,movebackward,absolute,|,blockquote,pagebreak,|,insertfile,insertimage,|,visualchars,nonbreaking,template",
            theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,ltr,rtl,|,cite,abbr,acronym,del,ins,attribs",
            theme_advanced_toolbar_location: "top",
            theme_advanced_toolbar_align: "left",
            theme_advanced_statusbar_location: "bottom",
            theme_advanced_resizing: true,
            // Skin options
            skin: "o2k7",
            skin_variant: "silver",
            add_form_submit_trigger: false,
            // Example content CSS (should be your site CSS)
            content_css: "css/example.css",
            // Drop lists for link/image/media/template dialogs
            template_external_list_url: "js/template_list.js",
            external_link_list_url: "js/link_list.js",
            external_image_list_url: "js/image_list.js",
            media_external_list_url: "js/media_list.js",
            // Replace values for the template plugin
            template_replace_values: {
                username: "Some User",
                staffid: "991234"
            }
        });

    }); 
```

还有我的 AJAX 调用：

```
 $("form").live('submit', function (e) {
            tinyMCE.triggerSave(true, true);
            e.preventDefault();

    var form = $("#newTrUploadForm");
            if (form.valid()) {
                    $.ajax({
                        url: '@Url.Action("SubmitNewTRForm")',
                        data: form.serialize(),
                        type: 'POST',
                        error: function (xhr, textStatus, exceptionThrown) {
                            $("#errorDIV").html(xhr.responseText);
                        },
                        success: function (data) {
                            if (data.success) {

                            }
                            else {

                            }
                        }
                    });
                }
        }); 
```

每当 tinyMCE 编辑器在表单上时，我的 AJAX 调用总是返回错误，删除 tinyMCE 解决了问题，但为什么会发生这种情况？我知道这个问题已经在 SO 上解决了几次，但是我已经尝试了所有提出的解决方案，但似乎没有一个对我有用，而且这些解决方案有些过时了。在我的 AJAX 调用的序列化过程中，我收到此错误：

`[MissingMethodException: No parameterless constructor defined for this object.]`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:52:13.783

我发布的错误和 tinyMCE 问题恰好完全不相关。通过在阻止按钮单击的默认操作后保存内容来修复 tinyMCE 问题，基本上将我的 AJAX 调用从：

```
 $("form").live('submit', function (e) {
        tinyMCE.triggerSave(true, true);
        e.preventDefault(); 
```

到：

```
 $("form").live('submit', function (e) {
       e.preventDefault();
       tinyMCE.triggerSave(true, true); 
```

并且表格正确序列化，编辑器的内容完美地发送到行动中。

与这个问题完全无关，但是发布的错误是由于[将我的模型属性的类型设置为`SelectList`并且表单发布了`SelectListItem`](https://stackoverflow.com/a/10110665/189756).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:00:58.293

您的错误表明您尝试在控制器操作中绑定的模型需要一个构造函数，例如

```
public yourModel
{
    public yourModel()
    {
        //your logic here
    }
} 
```

看起来您的视图中也没有要发回的“表单”。我有一种感觉，有多个错误相互叠加，无参数构造函数只是第一个。

# c# - 从 C# 在 Outlook 中打开特定的 MailItem

> ID：13931757
> 
> 赞同：2
> 
> 时间：2012-12-18T11:16:07.980
> 
> 标签：c#, outlook-2010

我想从我的 C# winforms 应用程序在 Outlook 中打开一封特定的电子邮件。

目前我有以下代码：

```
//...Get Folder & Entry ID for last Email in Sent Box

Outlook.Application myApp = new Outlook.ApplicationClass();
Outlook.NameSpace mapiNameSpace = myApp.GetNamespace("MAPI");
Outlook.MAPIFolder mySentBox = mapiNameSpace.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderSentMail);                
Outlook.MailItem myMail = ((Outlook.MailItem)mySentBox.Items[1]);
string guid = myMail.EntryID;
string folderEntryID = mySentBox.EntryID;
string folderStoreID = mySentBox.StoreID;
string mailAddressee = myMail.To;
MessageBox.Show(mailAddressee);

//...Attempt to Open that Email at a later date

Outlook.MAPIFolder getFolder = (Outlook.MAPIFolder)mapiNameSpace.GetFolderFromID(folderEntryID, folderStoreID);
Outlook.MailItem getItem = (Outlook.MailItem)getFolder.Items.Find("[EntryID] = " + guid);
getItem.Display(); 
```

代码的第一部分和第二部分将在不同的时间运行，尽管它们目前使用相同的方法进行测试。

第一部分从 Outlook 获取最近发送的第一封电子邮件的相关 ID。这部分似乎可以很好地作为我内置的 Messagebox 的证据。

然而，第二部分不起作用，我正在努力寻找正确的代码来访问和打开已在第一部分中获得其 ID 和文件夹位置的特定 mailItem。

请任何能够为我完成这个小项目的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T12:01:43.233

最后通过替换以下代码行来完成。. .

```
Outlook.MAPIFolder getFolder = (Outlook.MAPIFolder)mapiNameSpace.GetFolderFromID(folderEntryID, folderStoreID);
Outlook.MailItem getItem = (Outlook.MailItem)getFolder.Items.Find("[EntryID] = " + guid); 
```

有了这个 。. .

```
Outlook.MailItem getItem = (Outlook.MailItem)mapiNameSpace.GetItemFromID(guid, folderStoreID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:50:54.107

你不能使用`EntryId`with`_Items.Find`方法。MSDN 参考在[这里](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._items.find%28v=office.14%29.aspx)。

还有一句话可能对您的项目很有趣：

> *“当项目被移动到另一个商店时，条目 ID 会发生变化，例如，从您的收件箱移动到 Microsoft Exchange Server 公用文件夹，或从一个个人文件夹 (.pst) 文件移动到另一个 .pst 文件。解决方案不应依赖于除非项目不会被移动，否则 EntryID 属性是唯一的。”*
> 
> [MailItem.EntryID 属性 (Outlook)](http://msdn.microsoft.com/en-us/library/office/ff866458%28v=office.14%29.aspx)。

# multicast - 使用 UPnP 的多播事件

> ID：13931758
> 
> 赞同：1
> 
> 时间：2012-12-18T11:16:11.770
> 
> 标签：multicast, upnp

我正在 Java 环境中实现多播事件功能。但是我找不到任何其他的实现来测试。有谁知道支持多播事件的堆栈，因为它可以为设备提供发送多播事件的服务？

我查看了 git hub 和 sourcefore 上的 MS 实现和一些开源内容，但找不到任何有用的东西。语言相对无关紧要，只要我能让它工作;)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T15:42:21.013

也许这个答案已经过时了，但你可以试试[XBMC](http://xbmc.org/)

它是一个安装在计算机上的 UPNP 软件堆栈，它就像一个真正的多媒体设备（例如电视）。您可以测试并向它发送命令，也可以监听它在网络中发送的 UDP 数据包，以便您可以为 UPNP 协议编写程序。

如果我的问题没记错的话，我认为 XBMC 软件可以用作具有可以发送多播消息的服务的设备。

# php - 选中 PHP MYSQL 复选框

> ID：13931759
> 
> 赞同：1
> 
> 时间：2012-12-18T11:16:11.497
> 
> 标签：php, mysql, checkbox

使用这行代码，我将每个选定复选框的值添加到数据库中：

```
 // ADD ALL TYPES TO PRODUCTIONLOG_TYPE TABLE
    $x=1;
    $values=array();
    foreach($_POST['id'] as $x)
    {
        $AddToListQuery = "
                        INSERT INTO
                        productionlog_type
                       (productionlogid, typeid)
                        VALUES
                       ('" . mysql_real_escape_string($_GET['productionlog']) . "', '". mysql_real_escape_string($x) ."')
                       ";
        mysql_query($AddToListQuery)or die("query fout " . mysql_error() );
    } 
```

我这样做是为了回显已选中的复选框是否已在数据库中。

现在的问题是，当用户取消选中复选框并发送表单时，它没有传递任何值，对吧？所以我不能从数据库中删除它......意味着复选框仍然处于选中状态。

我能做些什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:20:50.370

如果您知道将返回哪些复选框，则可以过滤掉您知道的那些复选框，然后只保留未选中的复选框。

您还可以在发送请求之前查看页面的某些处理，例如使用 JavaScript。

或者，您可以在表单中传递另一个隐藏变量，其中包含您应该在 PHP 脚本中收到的所有复选框。例如：

```
<input type="hidden" value="id_1,id_2,id_3" /> 
```

如果您随后在 PHP 脚本中收到此信息，您可以看到（复选框的）哪些 id 是预期的。

* * *

**编辑**

如果你有：

```
<form method="POST">
    <input type="hidden" name="checks" value="id1,id2" />
    <input type="checkbox" name="id1" checked="checked" />
    <input type="checkbox" name="id2" />
</form> 
```

然后在 PHP 中：

```
$arr = split(",", $_POST["checks"]);
foreach ($arr as $x){
    if(isset($_POST[$x])){
        // Add or update
    }else{
        // Remove
    }
} 
```

注意：我没有测试过代码，但你只是想了解它是如何工作的

# tfs - 使用 tfs api 在一次调用中查询多个项目工作项

> ID：13931761
> 
> 赞同：0
> 
> 时间：2012-12-18T11:16:30.753
> 
> 标签：tfs

是否可以通过一次调用查询 DefaultCollection 中 2 个不同项目的工作项。如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:38:48.993

您可以使用`IN`运算符创建 WIQL 查询并列出`Team Projects`您感兴趣的内容。

例如：

```
var wiql = @"SELECT * 
             FROM WorkItems 
             WHERE [System.TeamProject] IN ('Project1', 'Project2')";

using (var tfs = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(uri)
{
    tfs.EnsureAuthenticated();
    var store= tfs.GetService<WorkItemStore>();
    var workItems = store.Query(wiql);
} 
```

# php - 允许基于 HTTP:X-FORWARDED-FOR 在 htaccess 中访问

> ID：13931765
> 
> 赞同：4
> 
> 时间：2012-12-18T11:16:42.697
> 
> 标签：php, apache, .htaccess, mod-rewrite

嗨，我应该只允许特定的 IP 地址（即 HTTP:X-FORWARDED-FOR 地址）访问文件。我已经通过以下方式完成了

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP:X-FORWARDED-FOR} !^xxx.xxx.x.xx$
RewriteRule ^$ http://xxx.xxx.x.xx/access_denie.php [R=301,L] 
```

现在我必须允许它用于多个 ip，例如 yyy.yy.y.yy。我如何使用 htaccess 来做到这一点

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T12:02:19.647

你的`^xxx.xxx.x.xx$`部分`RewriteCond`只是一个正则表达式。您可以轻松地使用组来添加更多 IP 地址：

```
^(xxx\.xxx\.x\.xx|yyy\.yy\.y\.yy)$ 
```

你会注意到我`.`用反斜杠转义了所有的 s - 这是因为`.`在正则表达式中具有特殊含义，如果你希望它只匹配文字`.`字符，则需要对其进行转义。

所以你的新`RewriteCond`将如下所示：

```
RewriteCond %{HTTP:X-FORWARDED-FOR} !^(xxx\.xxx\.x\.xx|yyy\.yy\.y\.yy)$ 
```

您可以轻松添加更多 IP 地址，只需将它们用`|`字符分隔即可。

但是请注意，这种方法不会给您任何真正的安全性。欺骗请求以通过此操作很容易。如果您需要安全性，您应该使用 SSL 和适当的身份验证系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-24T17:07:18.980

```
RewriteCond %{HTTP:X-Forwarded-For}i 1\.1\.1\.1 [OR]
RewriteCond %{HTTP:X-Forwarded-For}i 2\.2\.2\.2 [OR]
RewriteCond %{HTTP:X-Forwarded-For}i 3\.3\.3\.3
RewriteRule ^(.*) - [F] 
```

或者

```
RewriteCond %{HTTP:X-Forwarded-For} (1\.1\.1\.1|2\.2\.2\.2|3\.3\.3\.3)
RewriteRule ^(.*) - [F] 
```

# testing - 一般应该如何使用 JUnit / 测试用例？

> ID：13931766
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:16:44.297
> 
> 标签：testing, junit, automated-tests

我在一个一年前的 java/J2EE 项目上已经两个月了，每次现有的 JUnit 测试因为我而失败，那是因为 JUnit 测试已经过时或错误......所以我想知道“那些有什么用测试他们失败的唯一一次是因为方法的名称已更改，还是因为他们做错了“......

那么......我们应该在多大程度上实现测试用例，对于什么样的方法？在项目的哪个时刻，为什么？总结一下：关于测试用例有什么好的做法可以告诉我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:40:44.203

你问了十个问题，可以填满一本大书。
我试着回答一些：
**什么**
单元测试主要是针对模块测试，虽然也可以用于集成测试，但是集成范围是次要的。
**单元测试的**
发明者在引入“测试优先”（提前写好测试用例）这个词的时候，因为他认识的软件开发者大多是懒惰和不守纪律的。如果他建议稍后进行测试，那么许多测试将永远不会编写。
我的方法是，在完成 30% 后进行测试，否则你没有可用的结构进行测试。我称之为“早期测试方法”
**，对**
Junit 测试有用，但对用户界面测试不太有用，它不容易工作。
对于具有高度集成特性的模块，单元测试有点难以编写，（中央管理方法）
其余的它们非常有用。尤其是它们对于算法数学公式和各种计算都是必须的。

主要优点之一是通过编写单元测试，您可以避免在实际代码中进行耗时的调试。你失去编写单元测试的时间，你通过避免调试获得了时间。

高达 80% 的源代码语句的单元测试覆盖率，单元测试不会产生额外的项目成本。

我的经验表明，即使是 getter 和 setter 也应该进行单元测试，因为这可以在每节课 2 分钟内完成（在 testGetterSetter() 上使用 uisng）。去年，他在 setter 和 getter 中有两个严重的错误。

> 如果他们唯一失败是因为方法的名称已更改

如果你使用eclipse refactor->rename，那么Unit case会被包含在refactoring中，只要它们在同一个项目中，这是值得推荐的。
当然，源代码中的更改会导致需要将单元案例、src 和单元测试组合在一起形成一个单元。

最后，单元测试的主要优点之一是，当您创建包含一些更改的新版本时，您仍然知道所有单元测试都在运行。当您从离开公司的同事那里继承工作时，这一点尤其重要。

# php - 用php识别字符串中的日期

> ID：13931770
> 
> 赞同：1
> 
> 时间：2012-12-18T11:16:46.480
> 
> 标签：php, date, datetime, time, date-parsing

我有两个不同的字符串：

*   婴儿 14% 28.07.2012
*   你好 2% 15.06.16 十

（“婴儿”或“14%”或“十”可以改变，所以我不能指定它们）

我想识别该字符串中的日期，并尝试使用：

```
$dt = date_parse($string); 
```

在第一种情况下，没关系，但在第二种情况下，它无法识别日期。

我试过没有成功

```
$dt = date_parse_from_format("d.m.Y", $string); 
```

我尝试使用 preg_match 或 preg_match_all 没有成功（我不太擅长）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T11:23:12.407

您可以使用正则表达式捕获日期，例如：

```
if(preg_match('/(.*)([0-9]{2}\.[0-9]{2}\.[0-9]{2,4})(.*)/', $yourString, $matches))
{
 $date = $matches[2];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:25:30.677

你提到宝贝，14%和10可以改变。但它总是一个单词/值吗？如果是这样，您可以使用：

```
$split = explode(' ', $string)
$date = $split[2];

//$split[0] = Baby
//$split[1] = 14%
//$split[2] = 28.07.2012

//$date = 28.07.2012

//$split[0] = Hello
//$split[1] = 2%
//$split[2] = 15.06.16
//$split[3] = Ten

//$date = 15.06.16 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-30T02:19:04.893

我喜欢 aurel.g 的答案，并出于我自己的目的对其进行了扩展。特别是，我想处理 Excel 不断将我的好日期转换成的两位数年份。如果日期是假的（如 2014 年 6 月 32 日），我还使用 strtotime() 返回 FALSE。我认为这可能会有所帮助（我没有找到将其作为评论发布的方法，抱歉）：

```
$result = preg_match("/^(.*)(\d{1,2}\/\d{1,2}\/\d{2,4})(.*)/",$date, $matches);
// use strtotime() to test if that's a valid date:
if ($result && strtotime($matches[2]) {
  // convert it back to the date in the desired format:
  return date('m/d/Y',strtotime($matches[2]));
} 
```

# java - 如何验证给定的用户名密码以登录黑莓的Browserfield

> ID：13931773
> 
> 赞同：-3
> 
> 时间：2012-12-18T11:16:53.187
> 
> 标签：java, blackberry, basic-authentication, browserfield

我是黑莓新手。我想如何在浏览器字段中进行身份验证

```
 BrowserField web;
    String Usname="yahoo@yahoo.com";
    String password="123456788";        
    setTitle("sample");
    String Welcome ="example@example.com/isloginmethod.aspx";
    String logindata ="LoginID="+Usname+"&Password="+password;
    byte[] encodeLogin =Base64OutputStream.encode(logindata.getBytes(),0,logindata.length(), false, false);
    BrowserFieldConfig myBrowserFieldConfig = new BrowserFieldConfig();
    myBrowserFieldConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,BrowserFieldConfig.NAVIGATION_MODE_POINTER);
    web = new BrowserField(myBrowserFieldConfig);
    add(web);
    web.requestContent(Welcome,encodeLogin,null); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:44:34.350

您在此处使用的 web.requestContent 方法用于调用 url/发布数据，而不是用于身份验证。

HTTP 身份验证在 BrowserField2 API 中不是标准的。您必须实现***ProtocolHandler***并覆盖它以进行身份​​验证。

检查这个：

```
http://208.74.204.192/t5/Java-Development/How-to-enable-HTTP-Authentication-in-your-BrowserField2/ta-p/623025 
```

这将帮助您实现这一点。

# java - Java 的客户端/服务器连接不完善，无法正常通信

> ID：13931776
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:17:03.487
> 
> 标签：java

> **可能重复：**
> [用于定时登录的客户端/服务器 - 我的代码很疯狂](https://stackoverflow.com/questions/13929985/client-server-for-a-timered-login-my-codes-are-creazy)

请看一下这个客户端服务器程序并帮助我让它们工作。只有在服务器检查客户端发送的登录并在登录检查后发回“OK”后，程序才应启动计时器。请帮助我，这些代码做了一些疯狂的事情，例如：当我单击客户端按钮“CONNETTI”（CONNECT）时，第二个客户端启动......我不知道为什么也不知道如何！请帮帮我，谢谢！！！

--- 客户项目 ---

```
enter code here

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.Date;

public class Cronometro{
    private JFrame frame;
    private JLabel labelTime;
    private JPanel panelButtons;
    private JButton buttonLogin;
    private JButton buttonLogout;
   JTextField username = new JTextField(15);
   JTextField password = new JTextField(15);
   JTextField telefono = new JTextField(6);
   JLabel status = new JLabel("Server Disconnesso");
   JLabel empty = new JLabel();
   JLabel title = new JLabel ("LudecaLog-In");
   JLabel nameLabel = new JLabel ("Nome Utente: ");
   JLabel passLabel = new JLabel ("Password: ");
   JLabel telLabel = new JLabel ("Telefono: ");
    private Timer timer;
    private long startTime;

    String rigaTesto;
   // DataInputStream in;
    BufferedReader in ;
    DataOutputStream  out;
    Socket clientSocket;

    public Cronometro ()
    {

        frame = new JFrame ("Cronometro");
        frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        frame.setSize (500, 500);

        labelTime = new JLabel ("0:00:00.0");
        labelTime.setFont (new Font ("SansSerif", Font.BOLD, 30));
        labelTime.setHorizontalAlignment (JLabel.CENTER);

        buttonLogin = new JButton ("START");
        buttonLogout = new JButton ("STOP");
        buttonLogout.setEnabled (false);

      title.setForeground(Color.blue);
      title.setHorizontalAlignment(JLabel.CENTER);
      Font titleFont = new Font("Title", Font.CENTER_BASELINE, 50);
      title.setFont(titleFont);

      GridBagConstraints constr = new GridBagConstraints();

        panelButtons = new JPanel (new GridBagLayout());

        constr.gridx=0;
      constr.gridy=2;
      panelButtons.add(nameLabel,constr);
        constr.gridx=1;
      constr.gridy=2;
      panelButtons.add(username,constr);
      constr.gridx=0;
      constr.gridy=4;
      panelButtons.add(passLabel,constr);
      constr.gridx=1;
      constr.gridy=4;
      panelButtons.add(password,constr);
      constr.gridx=0;
      constr.gridy=5;
      panelButtons.add(telLabel,constr);
      constr.gridx=1;
      constr.gridy=5;
      telefono.setHorizontalAlignment(JLabel.LEFT);
      panelButtons.add(telefono,constr);
      constr.gridx=1;
      constr.gridy=8;
      panelButtons.add(empty,constr);
      constr.gridx=1;
      constr.gridy=9;
      panelButtons.add(status,constr);
      constr.gridx=0;
      constr.gridy=10;
        panelButtons.add (buttonLogin,constr);
       constr.gridx=2;
      constr.gridy=10;
       panelButtons.add (buttonLogout,constr);
      frame.setVisible(true);
      frame.add(title,BorderLayout.NORTH);
        frame.add (labelTime, BorderLayout.CENTER);
        frame.add (panelButtons, BorderLayout.SOUTH);

        timer = new Timer (50, new ActionListener () {
            public void actionPerformed (ActionEvent e) {
                long diffTime = System.currentTimeMillis () - startTime;

                int decSeconds = (int) (diffTime % 1000 / 100);
                int seconds = (int) (diffTime / 1000 % 60);
                int minutes = (int) (diffTime / 60000 % 60);
                int hours = (int) (diffTime / 3600000);

                String s = String.format ("%d:%02d:%02d.%d", hours, minutes,
                                          seconds, decSeconds);

                labelTime.setText(s);

            }
        });

        buttonLogin.addActionListener (new ActionListener ()
        {
            public void actionPerformed (ActionEvent e)
            {

            /***************** 1 CONNESSIONE AL SERVER *******/
                      try {
                         clientSocket = new Socket("192.168.42.176",9910);
                         System.out.println("Connessione al Server in atto...");

                         String loginOperatore = new String() ;

                              loginOperatore=(username.getText()+password.getText()+telefono.getText());

                         //apertura stream di input
                          InputStreamReader isr=new InputStreamReader(clientSocket.getInputStream());
                          BufferedReader in=new BufferedReader(isr);

                          //apertura stream di output
                          OutputStreamWriter osw=new OutputStreamWriter(clientSocket.getOutputStream());
                          BufferedWriter bw=new BufferedWriter(osw);
                          PrintWriter out=new PrintWriter(bw,true);

                          //invio della stringa al server
                          out.println(loginOperatore.toString());
                          status.setText("Connesso al Server, controllo la Login");

                          String confermaLogin = new String();
                          System.out.println(confermaLogin=in.readLine());
                          System.out.println("ciao----->"+(confermaLogin));
                          if(confermaLogin.equals("OK"))
                          {
                             //if (clientSocket != null && out != null && in != null) {
                               Tempo tempo = new Tempo();
                             final Date data = tempo.dataCompleta;
                             startTime = System.currentTimeMillis();
                                timer.start();
                                buttonLogin.setEnabled(false);
                                buttonLogout.setEnabled(true);                      
                             status.setText("<html>Log In Effettuato con Successo! <br>Data e Ora:<br>"+ data+"</html>");

                      // }  
                          }
                          else if (confermaLogin.equals("DATI_ERRATI"))
                          {
                             status.setText("ERRORE!!! Dati di Log-In Errata!!");

                          }

                          //chiusura della socket e degli stream
                          clientSocket.close();
                          in.close();
                          bw.close();
                          out.close();                                

                      }
                      catch (UnknownHostException err)
                      {
                           System.err.println("Errore: probelmi di comunicazione");
                       }
                      catch (IOException err1)
                      {
                           System.err.println("Errore: probelmi di comunicazione");
                       }

                      /******************************** 1 FINE CONNESSIONE AL SERVER *******/
            }
        });

        buttonLogout.addActionListener (new ActionListener () {
            public void actionPerformed (ActionEvent e)
            {
                    timer.stop ();
                    buttonLogin.setEnabled (true);
                    buttonLogout.setEnabled (false);
                  Tempo tempo = new Tempo();
                  final Date data = tempo.dataCompleta;
                  status.setText("<html>Log Out Effettuato con Successo! <br>Data e Ora:<br>"+ data+"</html>");

            }
        });

        frame.setVisible (true);
    }

    public static void main (String[] args)
    {
       SwingUtilities.invokeLater (new Runnable()
                              {
                                  public void run()
                                  {
                                 new Cronometro();
                              }
                            });
    }
}

import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

public class Tempo{
          public int ore,minuti,secondi,giorno,mese,anno;
          public long dataMillis;
          public Date dataCompleta = new Date();

         //costruttore di default
         public Tempo(){        

           GregorianCalendar c =new GregorianCalendar();
           dataCompleta=c.getTime();
           dataMillis=c.getTimeInMillis()/* / (24*60*60*1000)*/;
            ore=c.get(Calendar.HOUR_OF_DAY);
            minuti=c.get(Calendar.MINUTE);
            secondi=c.get(Calendar.SECOND);
            giorno=c.get(Calendar.DAY_OF_MONTH);
            mese=c.get(Calendar.MONTH);
            anno=c.get(Calendar.YEAR);

         }//Tempo
   }//tempo 
```

--- 服务器项目 ----

```
enter code here

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.Date;

public class provaServer{

    private JFrame frame;
    private JPanel panelButtons;
    private JPanel panelSchermiTitolo;

    private JButton buttonConnetti;
    private JButton buttonDisconnetti;
    private JButton buttonSalvaFile;
    private JButton buttonAggiornaSchermi;
    private JButton buttonCreaLogin;
    private TextArea schermoOperatori;
    private TextArea schermoNotifiche;

   JTextField username = new JTextField(15);
   JTextField password = new JTextField(15);
   JTextField telefono = new JTextField(6);
    JLabel status = new JLabel("Server Disconnesso");
   JLabel empty = new JLabel();
   JLabel title = new JLabel ("LudecaLog-In Server");

    String rigaTesto;
   // DataInputStream in;
    BufferedReader in ;
    DataOutputStream  out;

    public provaServer ()
    {

     try {
         Socket clientSocket=null;
        ServerSocket serverSocket=null;
            serverSocket = new ServerSocket(9910);
            clientSocket = serverSocket.accept();
            System.out.println("Server: Sono attivo sulla Rete ");
            //serverSocket.setReuseAddress(true);

            status.setText("Il Server è adesso Attivo sulla Rete");

            BufferedReader in= new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
            //Stream di output
            DataOutputStream out=new DataOutputStream(clientSocket.getOutputStream());
            String loginOperatore = new String();
            loginOperatore=in.readLine();
            System.out.println("cronServer:---->"+loginOperatore);
            Operatore operatore = new Operatore();
            if(operatore.controllaLogin(loginOperatore)==true)
            {
               out.writeBytes("OK");
            }
            else
            {
               out.writeBytes("DATI_ERRATI");
            }

            System.out.println("Server: Sono attivo sulla Rete ");
            serverSocket.setReuseAddress(true);               
            status.setText("Il Server è adesso Attivo sulla Rete");

         }
         catch (IOException e1) {
            System.out.println(e1);
            System.out.println("Server: Non riesco ad aprire il socket");
         }

        frame = new JFrame ("CronometroServer");
        frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        frame.setSize (500, 500);

        //TEXT AREA
        //labelTime = new JLabel ("0:00:00.0");
        //labelTime.setFont (new Font ("SansSerif", Font.BOLD, 30));

        //labelTime.setHorizontalAlignment (JLabel.CENTER);

        buttonSalvaFile = new JButton ("SALVA FILE");
        buttonCreaLogin = new JButton ("CREA LOGIN");
        buttonAggiornaSchermi = new JButton ("AGGIORNA");
        buttonConnetti = new JButton ("CONNETTI");
        buttonDisconnetti = new JButton ("DISCONNETTI");
        //buttonSalvaFile.setEnabled (false);
        //buttonCreaLogin.setEnabled (false);
        //buttonAggiornaSchermi.setEnabled (false);
        //buttonDisconnetti.setEnabled (false);

        schermoOperatori = new TextArea();
        schermoNotifiche = new TextArea();
        schermoOperatori.setEnabled(false);
        schermoNotifiche.setEnabled(false);

      title.setForeground(Color.blue);
      title.setHorizontalAlignment(JLabel.CENTER);
      Font titleFont = new Font("Title", Font.CENTER_BASELINE, 45);
      title.setFont(titleFont);

      GridBagConstraints constr = new GridBagConstraints();

        panelButtons = new JPanel (new GridBagLayout());
        panelSchermiTitolo = new JPanel (new GridBagLayout());

      constr.gridx=0;
      constr.gridy=1;
      panelSchermiTitolo.add(title,constr);
      constr.gridx=0;
      constr.gridy=2;
      panelSchermiTitolo.add(schermoOperatori,constr);
      constr.gridx=0;
      constr.gridy=3;
      panelSchermiTitolo.add(schermoNotifiche,constr);
      constr.gridx=0;
      constr.gridy=4;
      panelSchermiTitolo.add(status,constr);
       constr.gridx=2;
      constr.gridy=0;
       panelButtons.add (buttonDisconnetti,constr);
       constr.gridx=3;
      constr.gridy=0;
       panelButtons.add (buttonAggiornaSchermi,constr);
       constr.gridx=4;
      constr.gridy=0;
       panelButtons.add (buttonSalvaFile,constr);
       constr.gridx=5;
       constr.gridy=0;
       panelButtons.add (buttonCreaLogin,constr);

      frame.add(title,BorderLayout.NORTH);
        frame.add (panelButtons, BorderLayout.SOUTH);
        frame.add (panelSchermiTitolo, BorderLayout.CENTER);
        frame.setVisible(true);

        buttonConnetti.addActionListener (new ActionListener()
        {
            public void actionPerformed (ActionEvent e)
            {

           }
        });

        buttonDisconnetti.addActionListener (new ActionListener () {
            public void actionPerformed (ActionEvent e)
            {
                try {
               clientSocket.close();
                   in.close();
                   out.close(); 
            } catch (IOException e1) {
               // TODO Auto-generated catch block
               e1.printStackTrace();
            }

            }
        });

        frame.setVisible(true);       
    }

    public static void main (String[] args)
    {

       SwingUtilities.invokeLater (new Runnable()
                              {
                                  public void run()
                                  {
                                 new provaServer();
                              }
                            });

    }
}

public class Operatore {

   private String identificatoreLogin = new String ();

   public Operatore()
   {
      identificatoreLogin="rafgrav1106";

   }

   public boolean controllaLogin(String loginInserita)
   {

         System.out.println("oper: "+identificatoreLogin);
            System.out.println("oper:" +loginInserita);
      if(loginInserita.equals(identificatoreLogin))
      {
         return true;
      }
      else
      {
         return false;
      }

   }

   public String getIdentificatoreLogin() {
      return identificatoreLogin;
   }

   public void setIdentificatoreLogin(String identificatoreLogin)
   {
      this.identificatoreLogin=identificatoreLogin;   
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:28:09.350

一个常见的错误是混合文本和二进制流，例如写入一个但读取另一个。

在您的情况下，您将二进制写入（服务器端）与文本读取（客户端）混合在一起，这肯定会令人困惑。此外，您在客户端上正确写入文本，但缓冲它不太可能有用，因为您必须每次都刷新它以确保它被发送。

我建议您使用 BufferedReader 和 PrintWriter 以及尽可能少的其他内容。BTW PrintWriter 不会抛出不理想的 IOException ，您必须`checkError()`查看它是否失败。:|

# python - Python 中的求值顺序不明确

> ID：13931779
> 
> 赞同：0
> 
> 时间：2012-12-18T11:17:10.723
> 
> 标签：python, python-3.x, variable-assignment, operator-precedence

> **可能重复：**
> [Python 中的多重赋值](https://stackoverflow.com/questions/8725673/multiple-assignment-in-python)

正如我们从 C 开始学习到的那样，在计算机上同时在一个线程中工作时，所有操作都会一个接一个地发生。

我对 Python 3 语言有疑问。我已经看到使用表达式交换变量值的代码：

```
a,b = b,a 
```

或者对于斐波那契数列使用：

```
a,b = b,a+b 
```

这些如何工作？但他们确实有效：O

Python 系统是否在内部为这些创建了一些临时变量？分配的顺序是什么，以便两者都能有效地给出正确的结果？

问候， 尼基尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:21:51.407

在较高级别上，您正在创建两个元组，左侧和右侧，并将右侧分配给左侧，这将变量一一更改为它们的对立面。Python 是一种高级语言，因此与 C 等语言相比，有更多这样的抽象。

在低级别，您可以通过使用该模块非常清楚地看到正在发生的事情`dis`，它可以向您显示函数的 python 字节码：

```
>>> import dis
>>> def test(x, y):
...     x, y = y, x
... 
>>> dis.dis(test)
  2           0 LOAD_FAST                1 (y)
              3 LOAD_FAST                0 (x)
              6 ROT_TWO             
              7 STORE_FAST               0 (x)
             10 STORE_FAST               1 (y)
             13 LOAD_CONST               0 (None)
             16 RETURN_VALUE 
```

发生的情况是它用于`ROT_TWO`交换堆栈中项目的顺序，这是一种非常有效的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:19:09.740

当你写作时`a, b`，你创造`tuple`。

```
>>> 1, 2
(1, 2) 
```

因此，评估顺序没有什么特别之处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:23:25.653

From the Fibonacci example with `a=1` and `b=1`. First, the right hand side is evaluated: `b,a+b` resulting in the tuple `(1,2)`. Next, the right hand side is assigned to the left hand side, namely `a` and `b`. So yes, the evaluation on the right is stored in memory, and then `a` and `b` changed to point to these new values.

# delphi - 线程内的消息循环

> ID：13931782
> 
> 赞同：12
> 
> 时间：2012-12-18T11:17:19.180
> 
> 标签：delphi, delphi-xe2

如何使用 OTL 在线程内实现消息循环？Application.ProcessMessages；是我到目前为止使用的，但使用它不是很安全。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T11:22:37.710

这就是我从线程队列中提取消息的方式：

```
while GetMessage(Msg, 0, 0, 0) and not Terminated do begin
  Try
    TranslateMessage(Msg);
    DispatchMessage(Msg);
  Except
    Application.HandleException(Self);
  End;
end; 
```

使用`Application.ProcessMessages`将拉取调用线程队列的消息。但它不适合在消息循环中使用，因为它不会阻塞。这就是你使用`GetMessage`. 如果队列为空，它会阻塞。并且`Application.ProcessMessages`还调用其他`TApplication`并非设计为线程安全的方法。所以有很多理由不从主线程以外的线程调用它。

当您需要终止线程时，我会这样做：

```
Terminate;
PostThreadMessage(ThreadID, WM_NULL, 0, 0);
//wake the thread so that it can notice that it has terminated 
```

这些都不是 OTL 特定的。这段代码都是为了生活在`TThread`后代中。然而，这些想法是可以转移的。

* * *

在评论中，您表明您想要运行一个繁忙的、非阻塞的消息循环。你会用`PeekMessage`它。

```
while PeekMessage(Msg, 0, 0, 0, PM_REMOVE) do begin
  Try
    TranslateMessage(Msg);
    DispatchMessage(Msg);
  Except
    Application.HandleException(Self);
  End;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T11:20:52.953

您可以构建一个类似于 Application.Run 中的循环。

您可以调用`PeekMessage`，它会检查消息是否可用。PeekMessage 检查*当前线程*的消息队列，因此如果您在线程中使用它，它会检查线程的消息队列（您可以使用 PostThreadMessage 向其发布消息）。

除了 PeekMessage，您还可以使用`GetMessage`，等待收到消息。`GetMessage` ~~返回 0~~返回`false`。***)**

当它收到一条`WM_QUIT`消息时，这也是终止消息循环的信号。之后再次调用 GetMessage 是有风险的，因为它可能不会收到另一条消息，并且可能会阻止您的应用程序正常关闭，因为它是阻塞的。

Application.ProcessMessages 确实不是很安全，因为它执行了许多特定于主线程的附加功能。一方面，它会在消息队列为空时立即触发 Application.OnIdle，这意味着它在线程消息队列为空时调用（问题 1）和（问题 2）在线程的上下文中，不允许任何事件中的 VCL 交互。

* **)**关于 GetMessage 的返回值：我注意到 Delphi 将 GetMessage 实现为返回一个 LongBool。然而，实际的返回值是一个整数。在 WM_QUIT 的情况下返回 0，在错误的情况下返回 -1，在其他情况下返回非零。[微软声明](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644936%28v=vs.85%29.aspx)：

> 因为返回值可以是非零、零或 -1，所以避免使用这样的代码：
> 
> ```
> while (GetMessage( lpMsg, hWnd, 0, 0)) ... 
> ```

不幸的是，您必须以不同的别名导入 GetMessage 才能正确使用它。

# vb.net - 编辑数据集中的条目长度

> ID：13931783
> 
> 赞同：1
> 
> 时间：2012-12-18T11:17:20.187
> 
> 标签：vb.net, dataset

我是在 VB 中使用数据集的新手，我一直无法找到实现以下目标的指导：

数据集中的一些描述太长了，有没有办法取描述的前 10 个字符？

我试过使用：

```
dataSet.Tables("statement-data").Rows(0).Item(1) = Left(dataSet.Tables("statement-data").Rows(1).Item(1).ToString) 
```

但是我得到一个“公共属性保留为整数没有参数并且它的返回类型不能被索引”错误

示例数据

数据集表：statement-data

```
Date        Description                         Debit/Credit    Amount
01122012    Computer Equipment for North Office D           1000.00
01122012    Coffee                              D           25.68
02122012    Payment for Service                 C           1500.00 
```

如果有人可以提供帮助，或者将我指向任何好的网站/指南，那就太棒了。谢谢马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:24:07.427

在这种情况下，使用 .NET 方法[`String.Substring`](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)。

```
Dim firstRow = DataSet.Tables("statement-data").Rows(0)
Dim description = firstRow.Field(Of String)("Description")
If description.Length > 10 Then
    description = description.Substring(0, 10)
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:56:11.740

您收到此错误的原因是您的代码位于表单（或用户控件）中。[`System.Windows.Forms.Form`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.aspx)有一个`Left`属性，所以你`Left`指的是`Form.Left`而不是`Microsoft.VisualBasic.Strings.Left`. 要克服错误，您可以：

*   明确限定该`Left`方法的使用`Microsoft.VisualBasic.Strings.Left`
*   改用该[`Substring`](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)方法
*   将您的代码放在一个单独的类或模块中，其中`Form`的属性不会与之冲突

# windows - 关于计数器的 POWERSHELL 信息和此语句

> ID：13931785
> 
> 赞同：0
> 
> 时间：2012-12-18T11:17:23.580
> 
> 标签：windows, powershell, active-directory

我在一个站点上找到了此代码：[更多 userAccountControl Flag Fun (Convert-ToUACFlag.ps1) - http://bsonposh.com/archives/288](http://bsonposh.com/archives/288)，适用于活动目录中的用户。我以为我理解了一点，所以我根据这篇文章创建了一个相反的函数，但它似乎可以用作计数器 | （管道）->？（如果） % 不是（非常）清楚，它做了什么（我不认为它是模运算符，否则我误解了管道）

%= 取模运算符赋值

```
echo( 1..($flags.length) | ? {$value -band [math]::Pow(2,$_)} |  %{ $flags[$_] }); 
```

这是原始功能，效果很好

```
function checkUserControl
{
    param
    ([int]$value)
    $flags = @("","ACCOUNTDISABLE","", "HOMEDIR_REQUIRED",
    "LOCKOUT", "PASSWD_NOTREQD","PASSWD_CANT_CHANGE", "ENCRYPTED_TEXT_PWD_ALLOWED",
    "TEMP_DUPLICATE_ACCOUNT", "NORMAL_ACCOUNT", "","INTERDOMAIN_TRUST_ACCOUNT", "WORKSTATION_TRUST_ACCOUNT",
    "SERVER_TRUST_ACCOUNT", "", "", "DONT_EXPIRE_PASSWORD", "MNS_LOGON_ACCOUNT", "SMARTCARD_REQUIRED",
    "TRUSTED_FOR_DELEGATION", "NOT_DELEGATED","USE_DES_KEY_ONLY", "DONT_REQ_PREAUTH",
    "PASSWORD_EXPIRED", "TRUSTED_TO_AUTH_FOR_DELEGATION")

    echo( 1..($flags.length) | ? {$value -band [math]::Pow(2,$_)} |  %{ $flags[$_] });
} 
```

所以我自己尝试（几次尝试）

```
function checkUserControl2
    {
        param
        ([string]$value)
        $flags = @("","ACCOUNTDISABLE","", "HOMEDIR_REQUIRED",
        "LOCKOUT", "PASSWD_NOTREQD","PASSWD_CANT_CHANGE", "ENCRYPTED_TEXT_PWD_ALLOWED",
        "TEMP_DUPLICATE_ACCOUNT", "NORMAL_ACCOUNT", "","INTERDOMAIN_TRUST_ACCOUNT", "WORKSTATION_TRUST_ACCOUNT",
        "SERVER_TRUST_ACCOUNT", "", "", "DONT_EXPIRE_PASSWORD", "MNS_LOGON_ACCOUNT", "SMARTCARD_REQUIRED",
        "TRUSTED_FOR_DELEGATION", "NOT_DELEGATED","USE_DES_KEY_ONLY", "DONT_REQ_PREAUTH",
        "PASSWORD_EXPIRED", "TRUSTED_TO_AUTH_FOR_DELEGATION")

        #echo( 1..($flags.length) | ? {$value -eq $flags[$_] } )} |  %{$_});
        #echo( 1..($flags.length) | ? {$value -match $flags[$_] } )} |  %{$_});
        #echo( 1..($flags.length) | ? {$value -ieq $flags[$_] } )} |  %{$_});
        #echo( 1..($flags.length) | ? {$value -imatch $flags[$_] } )} |  %{ $_ });
        #echo( 1..($flags.length) | ? {$value -ieq $flags[$_] } )} |  {$_});
        echo( 1..($flags.length) | ? {$value -imatch $flags[$_] } )} |  { $_ });
    }

 echo "DONT_EXPIRE_PASSWORD";
 checkUserControl2("DONT_EXPIRE_PASSWORD"); 
```

我得到的错误`an empty pipe is not allowed`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-13T00:10:53.157

这是执行用户帐户控制操作的另一种方法，我觉得它最终比其他建议的方法更清洁、更通用。这是我在[回答](https://stackoverflow.com/a/10232397/1015164)[Active Directory](https://stackoverflow.com/q/10231914/1015164)中的userAccountControl 时提供的相同方法的 PowerShell 版本。（另请参阅[如何使用 UserAccountControl 标志来操作用户帐户属性](http://support2.microsoft.com/kb/305144)。）

```
Add-Type -TypeDefinition @"
/// <summary>
/// Flags that control the behavior of the user account.
/// </summary>
[System.Flags()]
public enum UserAccountControl : int
{
    /// <summary>
    /// The logon script is executed. This flag does not work for the ADSI LDAP provider on either read or write operations. For 
    /// the ADSI WinNT provider, this flag is read-only data, and it cannot be set for user objects.
    ///</summary>
    SCRIPT = 0x00000001,

    /// <summary>
    /// The user account is disabled. 
    ///</summary>
    ACCOUNTDISABLE = 0x00000002,

    /// <summary>
    /// The home directory is required. 
    ///</summary>
    HOMEDIR_REQUIRED = 0x00000008,

    /// <summary>
    /// The account is currently locked out. 
    ///</summary>
    LOCKOUT = 0x00000010,

    /// <summary>
    /// No password is required. 
    ///</summary>
    PASSWD_NOTREQD = 0x00000020,

    /// <summary>
    /// The user cannot change the password. 
    ///</summary>
    /// <remarks>
    /// Note:  You cannot assign the permission settings of PASSWD_CANT_CHANGE by directly modifying the UserAccountControl attribute. 
    /// For more information and a code example that shows how to prevent a user from changing the password, see User Cannot Change Password.
    // </remarks>
    PASSWD_CANT_CHANGE = 0x00000040,

    /// <summary>
    /// The user can send an encrypted password. 
    ///</summary>
    ENCRYPTED_TEXT_PASSWORD_ALLOWED = 0x00000080,

    /// <summary>
    /// This is an account for users whose primary account is in another domain. This account provides user access to this domain, but not 
    /// to any domain that trusts this domain. Also known as a local user account. 
    ///</summary>
    TEMP_DUPLICATE_ACCOUNT = 0x00000100,

    /// <summary>
    /// This is a default account type that represents a typical user. 
    ///</summary>
    NORMAL_ACCOUNT = 0x00000200,

    /// <summary>
    /// This is a permit to trust account for a system domain that trusts other domains. 
    ///</summary>
    INTERDOMAIN_TRUST_ACCOUNT = 0x00000800,

    /// <summary>
    /// This is a computer account for a computer that is a member of this domain. 
    ///</summary>
    WORKSTATION_TRUST_ACCOUNT = 0x00001000,

    /// <summary>
    /// This is a computer account for a system backup domain controller that is a member of this domain. 
    ///</summary>
    SERVER_TRUST_ACCOUNT = 0x00002000,

    /// <summary>
    /// Not used. 
    ///</summary>
    Unused1 = 0x00004000,

    /// <summary>
    /// Not used. 
    ///</summary>
    Unused2 = 0x00008000,

    /// <summary>
    /// The password for this account will never expire. 
    ///</summary>
    DONT_EXPIRE_PASSWD = 0x00010000,

    /// <summary>
    /// This is an Majority Node Set (MNS) logon account. With MNS, you can configure a multi-node Windows cluster without using a common shared disk. 
    ///</summary>
    MNS_LOGON_ACCOUNT = 0x00020000,

    /// <summary>
    /// The user must log on using a smart card. 
    ///</summary>
    SMARTCARD_REQUIRED = 0x00040000,

    /// <summary>
    /// The service account (user or computer account), under which a service runs, is trusted for Kerberos delegation. Any such service 
    /// can impersonate a client requesting the service. 
    ///</summary>
    TRUSTED_FOR_DELEGATION = 0x00080000,

    /// <summary>
    /// The security context of the user will not be delegated to a service even if the service account is set as trusted for Kerberos delegation. 
    ///</summary>
    NOT_DELEGATED = 0x00100000,

    /// <summary>
    /// Restrict this principal to use only Data Encryption Standard (DES) encryption types for keys. 
    ///</summary>
    USE_DES_KEY_ONLY = 0x00200000,

    /// <summary>
    /// This account does not require Kerberos pre-authentication for logon. 
    ///</summary>
    DONT_REQUIRE_PREAUTH = 0x00400000,

    /// <summary>
    /// The user password has expired. This flag is created by the system using data from the Pwd-Last-Set attribute and the domain policy. 
    ///</summary>
    PASSWORD_EXPIRED = 0x00800000,

    /// <summary>
    /// The account is enabled for delegation. This is a security-sensitive setting; accounts with this option enabled should be strictly 
    /// controlled. This setting enables a service running under the account to assume a client identity and authenticate as that user to 
    /// other remote servers on the network.
    ///</summary>
    TRUSTED_TO_AUTHENTICATE_FOR_DELEGATION = 0x01000000,

    /// <summary>
    /// (Windows Server 2008/Windows Server 2008 R2) The account is a read-only domain controller (RODC). This is a security-sensitive 
    /// setting. Removing this setting from an RODC compromises security on that server.
    /// </summary>
    PARTIAL_SECRETS_ACCOUNT = 0x04000000,

    /// <summary>
    /// 
    /// </summary>
    USE_AES_KEYS = 0x08000000
}
"@ 
```

下面的 PowerShell 代码演示了如何使用这种类型。

```
# This is how you convert an integer to a UserAccountControl value
[int] $userAccountControlValue = 544
[UserAccountControl] $userAccountControl = [UserAccountControl] $userAccountControlValue

# This is how you can build an account value up from the flags
[UserAccountControl] $userAccountControl = [UserAccountControl]::NORMAL_ACCOUNT -bor [UserAccountControl]::PASSWD_NOTREQD

# Alternatively, PowerShell will allow you to cast a string containing valid flags separated by commas directly into UserAccountControl
[UserAccountControl] $userAccountControl = [UserAccountControl] "NORMAL_ACCOUNT, PASSWD_NOTREQD"

# This is how you would add a flag to an existing value
$userAccountControl = $userAccountControl -bor [UserAccountControl]::DONT_EXPIRE_PASSWD

# This gets a comma separated string of the flag names that apply.
[string] $userAccountControlFlagNames = $userAccountControl.ToString()

# This is how you test for an individual flag.
[bool] $isNormalAccount = ($userAccountControl -band [UserAccountControl]::NORMAL_ACCOUNT) -eq [UserAccountControl]::NORMAL_ACCOUNT
[bool] $isAccountDisabled = ($userAccountControl -band [UserAccountControl]::ACCOUNTDISABLE) -eq [UserAccountControl]::ACCOUNTDISABLE
[bool] $isAccountLockedOut = ($userAccountControl -band [UserAccountControl]::LOCKOUT) -eq [UserAccountControl]::LOCKOUT
[bool] $dontExpirePassword = ($userAccountControl -band [UserAccountControl]::DONT_EXPIRE_PASSWD) -eq [UserAccountControl]::DONT_EXPIRE_PASSWD

# The results are easily used to do things.
if ($isAccountDisabled -eq $true)
{
    # Do something about it.
}

# The results are also easy to output.
"The account flags are $userAccountControlFlagNames."

"Is this a normal account? $isNormalAccount"
"Is the account disabled? $isAccountDisabled"
"Is the account locked out? $isAccountLockedOut"
"Does the account password never expire? $dontExpirePassword" 
```

此外，如果您使用 Windows PowerShell Get-ADUser commandlet 的 Active Directory 模块，则可以使用以下代码快速查看解码的标志：

```
Get-ADUser username -Properties userAccountConrol | Select *, @{ name = 'userAccountControlFlags'; expression = { [UserAccountControl] $_.userAccountControl } } 
```

您还可以使用它来执行诸如搜索特定标志组合之类的操作：

```
[UserAccountControl] $desiredFlags = "NORMAL_ACCOUNT, ACCOUNTDISABLE"

# You can search for specific flags like this
$filter = "objectCategory -eq 'person' -and objectClass -eq 'user' -and (userAccountControl -band $([int] $desiredFlags))"
$users = Get-ADUser -Filter $filter -Property userAccountControl
$users | Select *, @{ name = 'userAccountControlFlags'; expression = { [UserAccountControl] $_.userAccountControl } }

# or you can search for the desired flags more efficiently using an LDAP filter.
$ldapFilter = "(&(objectCategory=person)(objectClass=user)(userAccountControl:1.2.840.113556.1.4.803:=$([int] $desiredFlags)))"
$users = Get-ADUser -LDAPFilter $ldapFilter -Property userAccountControl
$users | Select *, @{ name = 'userAccountControlFlags'; expression = { [UserAccountControl] $_.userAccountControl } } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:14:14.190

您的代码中似乎也有一些错误。我会使用：

```
function test {
param([string]$value)

$flags = @("","ACCOUNTDISABLE","", "HOMEDIR_REQUIRED",
        "LOCKOUT", "PASSWD_NOTREQD","PASSWD_CANT_CHANGE", "ENCRYPTED_TEXT_PWD_ALLOWED",
        "TEMP_DUPLICATE_ACCOUNT", "NORMAL_ACCOUNT", "","INTERDOMAIN_TRUST_ACCOUNT", "WORKSTATION_TRUST_ACCOUNT",
        "SERVER_TRUST_ACCOUNT", "", "", "DONT_EXPIRE_PASSWORD", "MNS_LOGON_ACCOUNT", "SMARTCARD_REQUIRED",
        "TRUSTED_FOR_DELEGATION", "NOT_DELEGATED","USE_DES_KEY_ONLY", "DONT_REQ_PREAUTH",
        "PASSWORD_EXPIRED", "TRUSTED_TO_AUTH_FOR_DELEGATION")

    ## output bit flag-number (disabled atm.)   
    #(1..$flags.length) | ? {$flags[$_] -match $value}

    ## value
    (1..$flags.length) | ? {$flags[$_] -match $value} | % {[Math]::Pow(2,$_)}
}

test "HOMEDIR_REQUIRED" 
```

输出：

```
8 
```

# excel - 对数组元素的 MINUS 操作

> ID：13931786
> 
> 赞同：1
> 
> 时间：2012-12-18T11:17:27.290
> 
> 标签：excel, vbscript, vba

我有一个数组说 A=(11,23,32,44,56,88,55,14,78,79) 和 B=(44,56,88,55,14) 。现在使用 VBScript 可以执行 Set操作***MINUS***以获得其他输出，例如 C=(11,23,32,78,79)？

数组 A 和 B 也可以被认为是两个 Excel 列。

不想使用任何循环技术。

请帮忙

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:32:43.053

不，vbs 或 vba 不能直接对两个数组进行减法运算（没有内置函数）您必须使用循环，这里是 vba [http://www.cpearson.com/excel/vbaarrays 中数组操作的一个很好的参考。 htm](http://www.cpearson.com/excel/vbaarrays.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T11:37:50.117

**字典**是在它们上实现（假的？）集合和操作的 VBScript 工具，这也许并不奇怪。请参阅[此设置演示](https://stackoverflow.com/a/6592801/603855)。

顺便说一句：如果您必须处理不止一件事情，您将不得不循环或请其他人为您循环。坚持“请不要循环”是没有意义的。如果“它有效”，您可以通过查找表或预计算替换多个循环（nxm .. xz）进行优化，但如果您不考虑循环，您将无法理解问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T18:14:21.370

如果您有命名范围，您可以在 Excel vba 中执行此操作`Acol` `Bcol`

```
Range("C3:C10").FormulaArray = "=Acol-Bcol" 
```

# java - 指定类文件目标eclipse ide

> ID：13931791
> 
> 赞同：2
> 
> 时间：2012-12-18T11:17:45.053
> 
> 标签：java, eclipse, jakarta-ee, tomcat

我正在使用`Eclipse - Indigo`创建一个 servlet。`Specify class file destination`每当我尝试创建新的 servlet 时，我都会不断收到以下信息。

我该如何克服呢？

![在此处输入图像描述](../Images/7794f44aaa4745580009f5ca62fd5076.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-23T07:27:28.097

如果您没有安装“Web、XML、Java EE 和 OSGi Enterprise Development”软件包，可能会出现问题。简单地：

*   帮助 > 安装新软件...
*   在使用下选择“-所有可用站点-”。
*   选择“Web、XML、Java EE 和 OSGi 企业开发”包
*   安装它。重新启动 eclipse 并再次尝试创建 servlet。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T12:44:07.070

我遇到了同样的问题。首先，尝试重新选择您的“项目”，这是“创建 Servlet”窗口中的第一行（在您的情况下为“一个”）。它对我有用。

如果这不起作用，请尝试一下：右键单击项目资源管理器中的项目。转到构建路径>配置构建路径，打开“属性”框。在此框的左侧窗格中，转到“Java Build Path”。现在，在右侧窗格中，单击“源”选项卡。在“确定”按钮上方，您可以看到一个标有“默认输出文件夹”的文本框。您可以使用“浏览”按钮设置所需的位置。我附上一张图片供您参考：![在此处输入图像描述](../Images/c6d3aa6a378e0e9bbe40cfb7dd2ffa81.png)

有关更多详细信息，
[请参阅此 Eclipse 文档](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-properties-build-path.htm)[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-properties-build-path.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-properties-build-path.htm)

那应该可以解决您的问题。希望这可以帮助。谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-05T13:45:49.577

我遇到了同样的问题，这是由我的 web.xml 中的错误引起的（有一个未转义的 &）。一旦我修复了 web.xml，我就可以创建一个 Servlet。

# jquery - JqueryUI DatePicker parseDate 比较

> ID：13931794
> 
> 赞同：2
> 
> 时间：2012-12-18T11:18:00.577
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在尝试比较 jqueryui datepicker.beforeShowDay() 中的日期以确定一天是否可选择。但是，它似乎不起作用。代码是：

```
function (d) {
    if ((d.getDay() == 0) || (d == $.datepicker.parseDate('yy/mm/dd', '2012/12/25'))) {
      return [false, ""];
    }
    else {
      return [true, "2"]
    };
} 
```

第一个测试（getDay）工作正常，但第二个没有：

```
(d == $.datepicker.parseDate('yy/mm/dd', '2012/12/25')): false 
```

虽然

```
$.datepicker.parseDate('dd/mm/yy', '25/12/2012'): Tue Dec 25 2012 00:00:00 GMT+0000 (GMT Standard Time) 
```

和

```
d: Tue Dec 25 2012 00:00:00 GMT+0000 (GMT Standard Time) 
```

在我看来是一样的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:24:00.707

使用`formatDate`方法先获取到字符串格式再做同类型的比较：

```
function (d) {
    var datestrInNewFormat = $.datepicker.formatDate("yy/mm/dd", d);
    if ((d.getDay() == 0) || (datestrInNewFormat == '2012/12/25')) {
      return [false, ""];
    }
    else {
      return [true, "2"]
    }
} 
```

[**演示**](http://jsfiddle.net/2j3c3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:49:37.733

我认为您尝试`object`与`string`. 在第一次测试中，您使用`d.getDay()`的是 JavaScript 中 Date 对象的方法。

尝试将您的`d`对象转换为字符串。

# c++ - 用 Spirit::qi 检查双倍符号

> ID：13931799
> 
> 赞同：2
> 
> 时间：2012-12-18T11:18:11.497
> 
> 标签：c++, boost-spirit-qi

我需要检查文本是否有双重符号。例如“1+1*2”应该可以，但“1**2+3”或“--1+4*3”不应该。考虑精神计算示例的一部分。

```
 expression =
            term[_val=_1]
            >> *(   ('+' >> term[_val+=_1])
                    |   ('-' >> term[_val-=_1])
                );

      term =
            factor[_val=_1]
            >> *(   ('*' >> factor[_val*=_1])
                |   ('/' >> factor[_val/=_1])
                );

      factor =
            double_[_val=_1]
            |   '(' >> expression[_val=_1] >> ')'
            |   ('-' >> factor[_val=_1])
            |   ('+' >> factor[_val=_1]); 
```

短语解析返回真，表达式如“1+++1”或“1**-1”。我尝试像这样使用重复：

```
 term =
            factor[_val=_1]
            >> *(   (repeat(0)[char_('*')] >> factor[_val*=_1])
                |   ('/' >> factor[_val/=_1])
                ); 
```

但它没有帮助。我想念什么？谢谢。

编辑：找到答案。应该在phrase_parse 之后比较字符串迭代器，而不是phrase_parse 输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:27:58.453

在这种情况下，'1+++++1' 正在正确解析，因为 factor 递归地接受 +（可能是一元 +/-）。

把它分开

```
 factor = ('-' >>  value[_val=-_1])
         | ('+' >> value[_val= _1])
         | value [_val = _1];
  value = double_ | '(' >> expression >> ')' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:27:13.313

找到了答案。应该在phrase_parse 之后比较字符串迭代器，而不是phrase_parse 输出。

# sitecore - DefaultPublishingTargets 是否忽略发布限制？

> ID：13931800
> 
> 赞同：1
> 
> 时间：2012-12-18T11:18:12.450
> 
> 标签：sitecore, sitecore6

在 Sitecore 实例的 web.config 文件中，有一个名为`DefaultPublishingTargets`. 这是一个设置为 3 个目标的示例：

```
<!--  PUBLISHING GROUPS
  Pipe separated list of default publishing groups.
  Groups in this list will be preselected in the Publish dialog.
-->
  <setting name="DefaultPublishingTargets" value="target1|target2|target3" /> 
```

当用户发布项目时，这会在“发布”对话框中预先选择上述发布目标。

如果该项目的发布限制与预先选择的`DefaultPublishingTargets`设置不一致，那么会发生什么？Sitecore 是否忽略或尊重发布限制？

例如，该项目仅限于发布到`target3`，但在发布对话框中，选择了所有 3 个目标。如果我单击发布，该项目是否会发布到所有 3 个目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T12:30:41.530

如果该项目有一个发布限制，即该项目不能发布到某个目标，那么无论发布对话框中的选择如何，它都不会发布到该目标。

请记住，在发布限制对话框中不检查任何目标意味着该项目可以发布到所有目标（而不是它可以发布到无）。

# c++ - 在我指责某人之前……这会奏效吗？

> ID：13931802
> 
> 赞同：0
> 
> 时间：2012-12-18T11:18:15.877
> 
> 标签：c++

我正在查看一些代码（实际上是 ArduPilot），将其用作我自己的东西的灵感。现在我想我发现了一个主要错误 - 但在大声喊叫之前;）也许有人可以帮助我检查我是否误解了 C++。

有一种方法（我已经简化了）：

```
void GCS_MAVLINK::update(void) {
    // receive new packets
    mavlink_message_t msg;
    mavlink_status_t status;

    // process received bytes
    while (data_available()) {
        uint8_t c = receive_data();
        // Try to get a new message

        if (parse_and_accumulate(c, &msg, &status)) {
            handleMessage(&msg);
        }
    }
} 
```

这是定期调用的。它从缓冲区读取数据直到用完，将其连同对最终消息的引用和状态结构一起扔到外部解析函数中，以通过副作用进行更新，并且每次解析器看到消息完成时，都会消耗该消息。

到目前为止，一切都很好。如果缓冲区在消息中间空了会发生什么？好的，其余的可能会在下一次计划调用时到达缓冲区。但是分配的本地/堆栈会发生什么！！！味精和状态变量？据我所知，与此同时，它们可能已被堆栈使用中的各种垃圾覆盖。堆栈指针甚至可能已经移动。

在我自欺欺人之前，有人可以帮我确认这里似乎有一个大问题..

此外，如果我通过将 msg 和 status 变量设为静态来“修复”它，它们对于包含该方法的类的每个实例仍然是分开的，对吧？

问候索伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:25:20.500

> What happens if the buffer runs empty in the middle of a message?

Presumably, `parse_and_accumulate` is supposed to store the incoming bytes somewhere, separately from the output message parameter, until a message is ready; and only write to that parameter if it is. There's only an error if that function assumes that the message object will be preserved between calls, and without seeing the function there's no way to tell.

> But what happens to the locally/stack allocated!!! msg and status variables?

As you say, they are destroyed when the function exits. *If* `parse_and_accumulate` has used them as persistent storage, then you have a bug since they are not persistent; hopefully, it doesn't, but that assumption is almost certainly what should be fixed if it does.

> Also, if I "fix" it by making the msg and status variables static, they will still be separate for each instance of the class containing the method, right?

Making them `static` won't fix anything; it will probably just cause obscure bugs due to non-reentrancy. If the function you haven't shown us is wrong, then that's what needs fixing.

If you make them `static` (whether as local variables or class members) then there will only be one instance of each. If they did need to be persistent, and associated with the object, then they would have to be non-static class members; but they almost certainly shouldn't be.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:22:53.943

> Before I make a fool of myself, can someone help me confirm that there seems to be a major problem here..

There may or may not be a problem. It's really impossible to tell with just the code you show.

> What happens if the buffer runs empty in the middle of a message? OK the rest will probably have arrived to the buffer at next scheduled invocation.

Before claiming that there is a bug, you need to make sure that this can actually happen. It doesn't look like the code you show has been written to deal with this, but maybe it doesn't need to?

> Also, if I "fix" it by making the msg and status variables static, they will still be separate for each instance of the class containing the method, right?

No, they won't. They will also make your code non-reentrant and not thread-safe.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:51:34.837

好的，在再次查看 parse_and_accumulate 的来源之后，我现在看到它**确实**跨调用存储数据。参数结构仅用于将完成的消息返回到..

所以我的坏 - 对不起。谢谢您的帮助！

# git - 使用接收后挂钩创建 zip

> ID：13931803
> 
> 赞同：3
> 
> 时间：2012-12-18T11:18:16.397
> 
> 标签：git, git-bash, git-post-receive

我已经玩了一段时间的钩子了，但我似乎无法让`post-receive`钩子按照我需要的方式工作。

在将更改推送到存储库后，我正在尝试`post-receive`创建一个 zip 文件夹并将其放置在 git 存储库文件夹之外的某个位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T06:58:50.447

在[Daniel Byrne的](http://blog.danielbyrne.net/)[这篇文章](http://blog.danielbyrne.net/2012/02/a-quick-and-easy-way-to-deploy-from-git-with-post-commit-hooks/)中，您有一个通过 post-receive 挂钩部署 zip 的好例子：

这个想法是使用**[`git archive --format=zip`](http://git-scm.com/docs/git-archive)**：

```
#!/bin/bash
#
# A post commit hook that takes any updates pushed to the 'release' branch
# and creates a release directory for the new version under the webroot.
# Live site is then symlinked to this new release directory.

oldrev=$1
newrev=$2
branch=$3

# this is the root of the website (a symlink to a release directory)
webroot=/var/www/danielbyrne.net/www

if [ "$branch" == "release" ]
then

    # create a release directory to extract files into
    target=/var/www/danielbyrne.net/releases/$2/
    mkdir $target

    echo "Making target directory: $target"

    # create an archive in the webroot of danielbyrne.net
    /usr/bin/git archive master --format zip --output $target/deploy.zip

    echo "unzipping archive..."

    # extract the archive
    unzip -o -q $target/deploy.zip -d $target

    echo "removing deployment archive"

    # remove the archive file
    rm $target/deploy.zip

    echo "switching symbolic link to $target"

    # now switch the live site to point to the new release
    ln -nsf $target $webroot

    echo "done";
fi 
```

# php - AJAX 将 base64 图像发送到外部服务器

> ID：13931805
> 
> 赞同：0
> 
> 时间：2012-12-18T11:18:27.240
> 
> 标签：php, javascript, ajax, jsonp, base64

我正在尝试发送在一台服务器上生成的 base64 图像并发送到另一台服务器上的 PHP 文件。到目前为止，我在客户端遇到了跨源错误，而带有 PHP 文件的服务器似乎没有收到任何东西。

这是代码：

服务器 1 JS：

```
function shareDesign() {
    $('#twitter').on('click', function() {
        //console.log('?image='+encodeURIComponent(canvasExport)+'&designName=test')
        $.ajax({
            type: 'POST',
            url: 'http://mysite.com/share_page.php',
            dataType: 'text',
            data: {
                image : canvasExport ,
                designName:'test'
            } ,
            success: function(data) {
                console.log(data);
            }
        })
    })
} 
```

服务器 2 PHP：

```
$image = $_POST['image'];
$designName = $_POST['designName'];

$sHTML_Header = "<html><head><title>SHare design test</title></head><body>"; 
$sHTML_Content = '<div id="test"><img src="'.$image.'"/> This design is called : '.$designName.'</div>' ; 
$sHTML_Footer =  "</body></html>"; 

echo "parseResponse({'status' :'success'})"; 
```

添加：

我需要这个在手机上工作，这可能吗？此外，我在 adobe 业务催化剂上的 JS 服务器上没有任何服务器控制。

# html - 首次加载时如何自动调整 HTML 页面以适应 iOS 屏幕？

> ID：13931807
> 
> 赞同：0
> 
> 时间：2012-12-18T11:18:31.173
> 
> 标签：html, ios, screen

当我运行项目并单击我创建的菜单时，我在 iOS 上的页面出现问题，它的显示与我上传的图片相同当我第一次加载时尝试使其适合屏幕不喜欢这样请告诉我非常感谢：D [单击此链接观看我上传的图片](http://upic.me/i/uz/screenshot2555-12-18at5.59.16pm.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:22:06.663

如果您在 a 中加载页面`UIWebView`，您可以获得外部页面的大小来调整/修改您的 webview。

您可以编辑代码，添加宽度和/或高度。

```
- (void) webViewDidFinishLoad:(UIWebView *)webview
{
  int h = [[webview stringByEvaluatingJavaScriptFromString:@"document.height"] floatValue];
  int 2 = [[webview stringByEvaluatingJavaScriptFromString:@"document.width"] floatValue];

  nslog(@"%d %d", h, w);
} 
```

这里有一篇文章可以做到这一点：[http ://www.albertopasca.it/whiletrue/2012/09/objective-c-uiwebview-html-page-size/](http://www.albertopasca.it/whiletrue/2012/09/objective-c-uiwebview-html-page-size/)

希望这可以帮助。

# c# - 读取内存中的 Excel 电子表格

> ID：13931808
> 
> 赞同：16
> 
> 时间：2012-12-18T11:18:37.430
> 
> 标签：c#, linq-to-excel

如何阅读刚刚发布到我的服务器的 Excel 电子表格？我搜索了一些东西，但我只找到了如何读取带有文件名路径的 Excel 电子表格，这不是我的情况。

我需要这样的东西：

```
public ActionResult Import(HttpPostedFileBase file)
{
     var excel = new ExcelQueryFactory(file); //using linq to excel
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-20T18:41:53.560

我遇到了同样的问题，但我不想切换到付费服务，所以这就是我所做的。

```
public class DataImportHelper : IDisposable
{
    private readonly string _fileName;
    private readonly string _tempFilePath;

    public DataImportHelper(HttpPostedFileBase file, string tempFilePath)
    {
        _fileName = file.FileName;
        _tempFilePath = Path.Combine(tempFilePath, _fileName);
        (new FileInfo(_tempFilePath)).Directory.Create();
        file.SaveAs(_tempFilePath);
    }

    public IQueryable<T> All<T>(string sheetName = "")
    {
        if (string.IsNullOrEmpty(sheetName))
        {
            sheetName = (typeof (T)).Name;
        }

        var excelSheet = new ExcelQueryFactory(_tempFilePath);

        return from t in excelSheet.Worksheet<T>(sheetName)
               select t;
    }

    public void Dispose()
    {
        File.Delete(_tempFilePath);
    }

} 
```

这是一个测试

```
[Fact]
    public void AcceptsAMemoryStream()
    {
        MemoryFile file;

        using (var f = File.OpenRead("SampleData.xlsx"))
        {
            file = new MemoryFile(f, "multipart/form-data", "SampleData.xlsx");

            using (var importer = new DataImportHelper(file, "Temp/"))
            {
                var products = importer.All<Product>();

                Assert.NotEmpty(products);

            }
        }
    } 
```

这是 MemoryFile.cs。该文件仅用于测试。它只是 HttpPostedFileBase 的一个实现，因此您可以测试您的控制器和我的小帮手。这是从另一个帖子借来的。

```
 public class MemoryFile : HttpPostedFileBase
    {
        Stream stream;
        string contentType;
        string fileName;

        public MemoryFile(Stream stream, string contentType, string fileName)
        {
            this.stream = stream;
            this.contentType = contentType;
            this.fileName = fileName;
        }

        public override int ContentLength
        {
            get { return (int)stream.Length; }
        }

        public override string ContentType
        {
            get { return contentType; }
        }

        public override string FileName
        {
            get { return fileName; }
        }

        public override Stream InputStream
        {
            get { return stream; }
        }

        public override void SaveAs(string filename)
        {
            using (var file = File.Open(filename, FileMode.Create))
                stream.CopyTo(file);
        }
    } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-20T04:15:16.453

不幸的是，无法使用 LinqToExcel 从流中读取电子表格。

那是因为它使用 OLEDB 从电子表格中读取，而无法从流中读取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-30T11:19:11.120

您可以使用 的`InputStream`属性`HttpPostedFileBase`来读取内存中的 excel 电子表格。

我使用[ClosedXML](https://www.nuget.org/packages/ClosedXML/) nuget 包从您的情况下可用的流中读取 excel 内容。它有一个简单的重载，它将流指向 excel 文件（又名工作簿）的流。

在代码文件顶部导入的命名空间：

```
using ClosedXML.Excel; 
```

源代码：

```
public ActionResult Import(HttpPostedFileBase file)
{
    //HttpPostedFileBase directly is of no use so commented your code
    //var excel = new ExcelQueryFactory(file); //using linq to excel
    var stream = file.InputStream;
    if (stream.Length != 0)
    {
        //handle the stream here
        using (XLWorkbook excelWorkbook = new XLWorkbook(stream))
        {
            var name = excelWorkbook.Worksheet(1).Name;
            //do more things whatever you like as you now have a handle to the entire workbook.
            var firstRow = excelWorkbook.Worksheet(1).Row(1);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-18T11:22:58.473

You need Office Interops assemblies. Check the [Excel Object Model](http://msdn.microsoft.com/en-US/library/wss56bz7%28v=vs.80%29.aspx) for reference.

# java - 从 Java 程序运行 Hadoop 作业

> ID：13931813
> 
> 赞同：0
> 
> 时间：2012-12-18T11:18:45.150
> 
> 标签：java, hadoop, mapreduce

我正在编写一个分布式系统，并且在将其连接到 Hadoop 时遇到了问题。这是我的情况：

1）我有一个在 3 台计算机（sys1、sys2、sys3）上运行的分布式系统

2) Sys2 和 Sys3 是两个不同 Hadoop 集群的 MasterNode。这两个 Hadoop 集群互不相连，各自独立运行。

3）我的分布式系统有三个部分（p1、p2、p3）。

P1 位于 sys1 上，从客户端（客户端是另一个系统）接收 Mappers/Reducers 的源代码。然后 P1 将联系 P2 或 P3 并向他们发送映射器/减速器的代码。

4）现在的问题是P2或P3需要在Hadoop上运行作业并将结果发送回P1。

我使用 hadoop 已经有一段时间了，知道如何编写一个简单的 mapReduce 程序，将其转换为 JAR 文件并在 Hadoop 上执行。问题是，在我的情况下，mapReduce 作业的源代码是在执行期间发送的，我无法从中制作 JAR 文件。我需要从收到的代码中制作一个 hadoop 作业并在 hadoop 中运行它。我将不胜感激有关如何解决此问题的任何建议/建议？

PS。我知道一种解决方案是将接收到的 map/Reduce 代码写入磁盘上的文件，执行所有必需的命令来制作 JAR 文件并从我的 Java 代码（使用运行时实例）中的 shell 中运行作业和.. . 但我更喜欢能够直接从我的 Java 代码运行作业，而不是经历上述解决方案的所有可能麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:42:35.173

使用[JavaCompiler API](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)怎么样？然后，您可以轻松地动态创建一个 jar 文件 [`JarOuptputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarOutputStream.html)

这是一篇很好的博客文章，解释了 API： [JavaBeat](http://www.javabeat.net/2007/04/the-java-6-0-compiler-api/)

# objective-c - 在设备中检测图像非常非常慢

> ID：13931814
> 
> 赞同：1
> 
> 时间：2012-12-18T11:18:49.300
> 
> 标签：objective-c, ios, xcode, opencv, surf

我正在使用此 SURF 代码来检测图像中的徽标。它工作正常，但速度很慢。关于如何优化它的任何想法？

```
- (void)findObject
{
    //NSLog(@"%@ %@", self, NSStringFromSelector(_cmd));

    width = 0;

    CvMemStorage* storage = cvCreateMemStorage(0);
    static CvScalar colors[] = 
    {
        {{0,0,255}},
        {{0,128,255}},
        {{0,255,255}},
        {{0,255,0}},
        {{255,128,0}},
        {{255,255,0}},
        {{255,0,0}},
        {{255,0,255}},
        {{255,255,255}}
    };

    if( !objectToFind || !image )
    {
        NSLog(@"Missing object or image");
        return;
    }

    CvSize objSize = cvGetSize(objectToFind);
    IplImage* object_color = cvCreateImage(objSize, 8, 3);
    cvCvtColor( objectToFind, object_color, CV_GRAY2BGR );

    CvSeq *objectKeypoints = 0, *objectDescriptors = 0;
    CvSeq *imageKeypoints = 0, *imageDescriptors = 0;
    int i;
    CvSURFParams params = cvSURFParams(500, 1);

    double tt = (double)cvGetTickCount();
    NSLog(@"Finding object descriptors");
    cvExtractSURF( objectToFind, 0, &objectKeypoints, &objectDescriptors, storage, params );

    NSLog(@"Object Descriptors: %d", objectDescriptors->total);
    cvExtractSURF( image, 0, &imageKeypoints, &imageDescriptors, storage, params );

    NSLog(@"Image Descriptors: %d", imageDescriptors->total);
    tt = (double)cvGetTickCount() - tt;

    NSLog(@"Extraction time = %gms", tt/(cvGetTickFrequency()*1000.));
    CvPoint src_corners[4] = {{0,0}, {objectToFind->width,0}, {objectToFind->width, objectToFind->height}, {0, objectToFind->height}};
    CvPoint dst_corners[4];
    CvSize size = cvSize(image->width > objectToFind->width ? image->width : objectToFind->width,
                         objectToFind->height+image->height);
    output = cvCreateImage(size,  8,  1 );
    cvSetImageROI( output, cvRect( 0, 0, objectToFind->width, objectToFind->height ) );
    //cvCopy( objectToFind, output );
    cvResetImageROI( output );
    cvSetImageROI( output, cvRect( 0, objectToFind->height, output->width, output->height ) );
    cvCopy( image, output );
    cvResetImageROI( output );

    NSLog(@"Locating Planar Object");
#ifdef USE_FLANN
    NSLog(@"Using approximate nearest neighbor search");
#endif
    if( locatePlanarObject( objectKeypoints, objectDescriptors, imageKeypoints,
                           imageDescriptors, src_corners, dst_corners ))
    {
        for( i = 0; i < 4; i++ )
        {
            CvPoint r1 = dst_corners[i%4];
            CvPoint r2 = dst_corners[(i+1)%4];
            //cvLine( output, cvPoint(r1.x, r1.y+objectToFind->height ),
                   //cvPoint(r2.x, r2.y+objectToFind->height ), colors[6] );
            cvLine( output, cvPoint(r1.x, r1.y+objectToFind->height ),
                   cvPoint(r2.x, r2.y+objectToFind->height ), colors[6],4 );
            //if(i==0)
                width = sqrt(((r1.x-r2.x)*(r1.x-r2.x))+((r1.y-r2.y)*(r1.y-r2.y)));
        }
    }
    vector<int> ptpairs;
    NSLog(@"finding Pairs");
#ifdef USE_FLANN
    flannFindPairs( objectKeypoints, objectDescriptors, imageKeypoints, imageDescriptors, ptpairs );
#else
    findPairs( objectKeypoints, objectDescriptors, imageKeypoints, imageDescriptors, ptpairs );
#endif
   /* for( i = 0; i < (int)ptpairs.size(); i += 2 )
    {
        CvSURFPoint* r1 = (CvSURFPoint*)cvGetSeqElem( objectKeypoints, ptpairs[i] );
        CvSURFPoint* r2 = (CvSURFPoint*)cvGetSeqElem( imageKeypoints, ptpairs[i+1] );
        cvLine( output, cvPointFrom32f(r1->pt),
               cvPoint(cvRound(r2->pt.x), cvRound(r2->pt.y+objectToFind->height)), colors[8] );
    }*/

    float dist = 629.0/width;
    [distanceLabel setText:[NSString stringWithFormat:@"%.2f",dist]];

    NSLog(@"Converting Output");
    UIImage *convertedOutput = [OpenCVUtilities UIImageFromGRAYIplImage:output];

    NSLog(@"Opening Stuff");
    [imageView setImage:convertedOutput];
    cvReleaseImage(&object_color);

    [activityView stopAnimating];

} 
```

在上面的代码`image`中是我的原始图像，`objectToFind`是我想要检测的标志。

如果我的问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:26:20.380

您需要使用分析来确定代码的哪一部分最慢。
由于您使用的是 XCode，因此您可以使用内置的分析器：

1.  在左上角，您按住“运行”按钮并选择“配置文件”。
2.  单击 Profile，然后选择 Time Profiler。
3.  过了一会儿，您在分析器中按“停止”，然后选择“隐藏缺失符号”、“隐藏系统库”和“顶级函数”，取消选择“按线程分隔”。
4.  现在查找 main 函数，它后面有一个隐藏的右箭头。单击该箭头，您可以通过调用树查看时间​​百分比和调用统计信息。

这就是你开始的方式。

一般来说，我有以下建议**而无需分析**：

*   尽可能避免创建新的图像和内存存储。（您可以将临时使用的图像传递给您的函数，并将这些图像保存在外部，以便您以后可以重用它们。）
*   缩小您的图像（和您的徽标）以显示图像的主要部分
*   使用较少的描述符

两条经验法则：

*   您需要决定**在 profiling 之后**要改进什么，因为 profiling 通常会产生令人惊讶的结果。
*   您尝试改进的部分越快，您获得的潜在收益就越少。

# java - 在没有 krb5.conf 的情况下配置 kerberos

> ID：13931824
> 
> 赞同：4
> 
> 时间：2012-12-18T11:19:19.520
> 
> 标签：java, security, kerberos, ntlm, gssapi

我正在使用 kerberos 身份验证登录到 ActiveDirectory。我正在使用 GSSAPI 进行操作。

目前，我正在使用 krb5.conf 文件，该文件描述了领域、加密算法等，并且身份验证工作正常。

我想避免使用这个文件。我可以在不使用此文件的情况下以编程方式配置 kerberos 吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:26:24.730

您可以尝试仅配置两个系统属性：

```
java.security.krb5.kdc
java.security.krb5.realm 
```

请注意，如果您使用 JDK 对 Kerberos 的本机支持，则无法以编程方式配置除此之外的任何内容。

如果您正在为 Windows 编写代码，我强烈建议您使用 WAFFLE 来实现无缝单点登录。不过，它没有 GSS-API 适配器。我自己写了，但这只是因为系统的其余部分已经依赖它了。您可以轻松跳过 GSS-API 并直接针对 WAFFLE 进行编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T10:39:34.503

如果您只想避免使用系统范围的 krb5.conf，则可以在程序中以任何名称（例如，在您的主目录中）的任何目录中创建它，并通过设置 Java 系统属性 java.security.krb5 来使用它。 conf 到它的完整路径。我相信这必须在您调用任何与 Kerberos 相关的代码之前完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-04T07:54:04.160

[来自 MIT 官方文档： [https://web.mit.edu/kerberos/krb5-latest/doc/admin/index.html]](https://web.mit.edu/kerberos/krb5-latest/doc/admin/index.html])

似乎我们可能没有官方的方法来配置没有 krb5.conf 的 Kerberos，即使忽略 keytabs 的某些部分（它们被定义为在 TGS 状态下自动获取，但有时事情正在连接）会导致致命错误。

# wordpress - Wordpress 中带有版本号的更新文件在哪里？

> ID：13931825
> 
> 赞同：0
> 
> 时间：2012-12-18T11:19:20.563
> 
> 标签：wordpress

几天前我更新了我的wordpress，现在一个插件正在使用以下文件：

```
http://tuhrig.de/wp-includes/js/thickbox/thickbox.js?ver=3.1-20121105 
```

我想编辑这个文件，但我找不到它。我知道原始文件在哪里（当然在*wp-includes/js/thickbox*中......），但是，当我更改它时，它不会影响具有新版本号的文件。那么，那个文件在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:29:14.897

使用您自己的`thickbox.js`. 我的意思是把它放在你的插件目录中的某个地方并包含它：

```
wp_enqueue_script('my_thickbox', PLUGIN_URL . '/js/thickbox.js'); 
```

# cakephp - 修复身份验证 cakePHP

> ID：13931826
> 
> 赞同：0
> 
> 时间：2012-12-18T11:19:20.907
> 
> 标签：cakephp, authentication

**我做了什么**

CakePHP 版本是 2.2.3

我使用 Cookbook 的这一部分来创建我的身份验证： Link 完成后，我将字段更改为电子邮件和密码（在 AppController.php 中）：

```
public $components = array(
        'Session',
        'Auth' => array(
            'authenticate' => array(
                'Form' => array('userModel' => 'User', 'fields' => array('username' => 'email', 'password' => 'password'))
            ),
            'loginRedirect' => array('controller' => 'twitter', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'users', 'action' => 'login'),
            'authorize' => array('Controller')
        )
    ); 
```

**发生了什么**

当我使用我的凭据登录时，它会将我重定向到登录页面，即使凭据不正确！

我希望有人可以帮助我解决这个问题。提前致谢！

**编辑：** 就我所见，现在登录有效！但是注销不起作用。它不会删除我的会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:54:04.543

你正在传递一些东西给`$this->Auth->login($something)`. 自 1.x 以来，代码已更改，传递给此方法的任何内容都将导致用户登录。

你应该`$this->Auth->login()`不带参数调用

# objective-c - 如何从 iOS 项目中删除弱引用 - AFUrlConnectionOperation.m？

> ID：13931829
> 
> 赞同：0
> 
> 时间：2012-12-18T11:19:20.183
> 
> 标签：objective-c, xcode, automatic-ref-counting, afnetworking, weak-references

我正在使用 AFNetworking 和 AFDownloadRequestOperation 在我的 iPhone 应用程序中进行下载。构建时出现错误：编译 AFUrlConnectionOperation.m **当前部署目标不支持自动 __weak 引用**

在我的文件 AFUrlConnectionOperation.m 的代码中，这是我可以看到错误的地方：

```
- (void)setCompletionBlock:(void (^)(void))block {
    [self.lock lock];
    if (!block) {
        [super setCompletionBlock:nil];
    } else {
        __weak __typeof(&*self)weakSelf = self;
        [super setCompletionBlock:^ {
            __strong __typeof(&*weakSelf)strongSelf = weakSelf;

            block();
            [strongSelf setCompletionBlock:nil];
        }];
    }
    [self.lock unlock];
} 
```

我该如何解决它，你能解释一下这背后的逻辑吗？谢谢

# regex - 手机号码格式规则自动完成

> ID：13931831
> 
> 赞同：0
> 
> 时间：2012-12-18T11:19:26.693
> 
> 标签：regex, phone-number

我正在寻找如何为每个县编译规则，这些规则专门确定手机的有效格式（仅限）。例如：英国国家代码是 44，所有（移动）号码都以 07 开头，后跟 xxx xxx xxx（九位数字），其中 x 为 [0-9]。手机没有扩展或其他，所以这里的规则非常简单。如果您是具有某些知识的任何其他国家/地区的居民，或者可以为您的国家/地区提供此类链接，请您回复一下，恐怕似乎不太可能有文件或 reg ex - 因为所有这些似乎都是为了更通用的电话号码，因此比我想要或需要的更广泛的 reg ex。

# php - Zend Framework 2 - 表单元素装饰器

> ID：13931834
> 
> 赞同：10
> 
> 时间：2012-12-18T11:19:47.787
> 
> 标签：php, zend-form, decorator, zend-framework2, zend-form-element

我想将 Zend 表单强制转换为 Twitter Bootstrap 样式。我目前遍历表单字段并将表单信息写入我的引导 div 构造。

我在 Zend Framework 1(!) 中看到有一种方法可以在装饰器中执行此操作。但由于某种原因，版本 2 的文档没有涵盖这一点......

我想做这样的事情：

```
protected $_format = '<label for="%s">%s</label>'
             . '<input id="%s" name="%s" type="text" value="%s"/>';

public function render($content)
{
    $element = $this->getElement();
    $name    = htmlentities($element->getFullyQualifiedName());
    $label   = htmlentities($element->getLabel());
    $id      = htmlentities($element->getId());
    $value   = htmlentities($element->getValue());

    $markup  = sprintf($this->_format, $name, $label, $id, $name, $value);
    return $markup;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T08:39:22.390

我现在正在使用`partials`。我正在迭代属性，为例如`CSRF`和构建一些例外`Submit`......这非常顺利：

*看法*

```
echo $this->partial('partial/form-partial', array(
'form' => $this->form,
'url' =>  $this->url('whatever', array('action' => 'add')))); ?> 
```

*部分的*

```
<?php
$form = $this->form;
$form->setAttribute ( 'action', $this->url () );
$form->prepare ();

echo $this->form ()->openTag ( $form );
foreach ( $form as $element ) :
?>
    <div
        class="control-group <?php if($this->formElementErrors($element)) echo "error" ?>">
        <label class="control-label"><?php echo $element->getLabel() ?></label>
        <div class="controls">
                <?php echo $this->formElement ( $element );
                    if ($this->formElementErrors ( $element ))
                ?>
            <span class="help-inline"><?php echo $this->formElementErrors($element) ?></span>
        </div>
    </div>
<?php
endforeach;
echo $this->form ()->closeTag ( $form );
?> 
```

为了清楚起见，排除了例外......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-03T21:13:47.947

我按照@Rufinus 提到的方式做到了。请参阅本教程，了解如何在 ZF2 中创建 View Helpers [http://blog.evan.pro/creating-a-simple-view-helper-in-zend-framework-2](http://blog.evan.pro/creating-a-simple-view-helper-in-zend-framework-2)

在我的例子中，我只是想用列表项包装表单元素，所以我扩展了原始的 ZF2 View Helpers 并让它们渲染元素。我刚刚包装了他们返回的内容：

查看助手 FormCollection.php

```
<?php
// ./src/Application/View/Helper/FormCollection.php
namespace Application\View\Helper;

use Zend\Form\ElementInterface;
use Zend\Form\View\Helper\FormCollection as BaseFormCollection;

class FormCollection extends BaseFormCollection {
    public function render(ElementInterface $element) {
        return '<ul>'.parent::render($element).'</ul>';
    }
} 
```

查看助手 FormElement.php

```
<?php
// ./src/Application/View/Helper/FormElement.php
namespace Application\View\Helper;

use Zend\Form\ElementInterface;
use Zend\Form\View\Helper\FormElement as BaseFormElement;

class FormElement extends BaseFormElement {

    public function render(ElementInterface $element) {
        if ($element->getOption('required')) {
            $req = 'required';
        }
        $type = $element->getAttribute('type');
        $name = $element->getAttribute('name');
        return sprintf('<li class="%s %s %s">%s</li>', $name, $req, $type,  parent::render($element));
    }
} 
```

而我的视图看起来像这样，不需要修改即可使更改生效。

```
<?php 
$form = $this->form;
$form->prepare();
echo $this->form()->openTag($form);
echo $this->formCollection($form);
echo $this->form()->closeTag($form); 
```

像魅力一样工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-25T01:59:25.273

我尝试了 Ron 的 Partial 方法，结果会像 Bootstrap 3 所没有的那样。

```
<form id="tea" name="tea" method="POST" action="/tea/add">
    ...
    <div class="form-group">
        <label class="control-label">Brand</label>
        <div class="form-control">
            <input type="text" value="" name="brand">
        </div>
    ... 
```

我们知道，为了使用 bootstrap 3 预定义的 Form 样式，我们需要为 input 元素定义样式：form-control，而不是它的包装元素。

我的部分方式如下。

```
echo $this->form()->openTag($form);
foreach ($form as $element) :?>
    <div class="form-group">
        <?php 
            if ($element->getOption('required')) { $req = 'required'; }
            $type = $element->getAttribute('type');
            $name = $element->getAttribute('name'); 
            $label = $element->getLabel();
        ?>
        <?php if ($name == 'id') { ?>
            <div class="hidden"><?php echo $this->formElement($element); ?></div>
        <?php } else if ($name == 'submit') { ?>
            <input class='btn' name='submit' type='submit' value='Add'>
        <?php } else if ($label != '') { ?>
            <label class="control-label"><?php echo $label ?></label>
            <input class='form-control' name='<?php echo $name ?>' type='<?php echo $type ?>'>
        <?php } ?> 
    </div>
<?php 
endforeach;
echo $this->form()->closeTag(); 
```

好吧，我们可以得到结果。

```
<form id="tea" name="tea" method="POST" action="/tea/add">
    ...
    <div class="form-group">
        <label class="control-label">Brand</label>
        <input class="form-control" type="text" name="brand">
    </div>
... 
```

[如何将自定义样式附加到 zf2 表单](https://stackoverflow.com/questions/13134802/how-to-attach-custom-styles-into-zf2-forms)中已经提到：将 class 属性添加到 Form 元素。

```
class TeaForm extends Form
{
    public function __construct($name = null)
    {
        // we want to ignore the name passed
        parent::__construct('tea');

        $this->add(array(
            'name' => 'id',
            'type' => 'Hidden',
        ));
        $this->add(array(
            'name' => 'brand',
            'type' => 'Text',
            'options' => array(
                'label' => 'Brand',
            ),
            /** **define class attribute** **/
        'attributes' => array(
            'class' => 'form-control',
        ),
        ));
.... 
```

它看起来很简单，但是问题是输入元素会被包装到标签元素中，这仍然不是 Bootstrap 3 想要的。

```
<form id="tea" role="form" name="tea" method="POST" action="/tea/add">
    <input type="hidden" value="" name="id">
    <label>
        <span>Name</span>
        <input class="form-control" type="text" value="" name="name">
    </label>
... 
```

在我看来，Partial 方法仍然是一种灵活且轻便的选择。[Tea Box 是一种 ZF2 实践，您可以从Gibhub](https://github.com/johnjyin/Zend-2-Tea-Box)找到上述所有代码和描述

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-08-03T23:14:09.697

这将使代码更容易。

[http://php.net/manual/en/function.echo.php](http://php.net/manual/en/function.echo.php)

```
<?php 

$form->prepare();
echo 
$this->form()->openTag($form),
$this->formCollection($form),
$this->form()->closeTag($form); 
```

# css - 如何使 css transform-origin 属性在 IE7 和 IE8 中工作？

> ID：13931835
> 
> 赞同：0
> 
> 时间：2012-12-18T11:19:58.317
> 
> 标签：css, internet-explorer-8, internet-explorer-7

我有以下CSS规则：

```
transform-origin: 100% 50%; 
```

如何让它在 IE7 和 IE8 中运行？我在谷歌上搜索了 4 个小时，但没有运气。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:53:53.387

我通过使图像像以前一样宽并添加`left: -300px`（图像的半宽）来解决这个问题。我知道这不是最好的方法，但无论如何它应该像它应该做的那样工作。希望有人会发现这个答案有帮助:)

# objective-c - 合并具有多个值的数组以形成一个数组/字典

> ID：13931841
> 
> 赞同：0
> 
> 时间：2012-12-18T11:20:31.757
> 
> 标签：objective-c, nsarray

我有一个包含来自服务器的数据的数组。我无法更改服务器的响应。

```
{
    maximum = 30;
    minimum = 1;
    name = "Layer 1";
},
    {
    maximum = 60;
    minimum = 45;
    name = "Layer 1";
},
    {
    maximum = 60;
    minimum = 45;
    name = "Layer 2";
} 
```

我在这个数组中有 3 个对象。其中 2 个名称相同，但最小值和最大值不同。我想创建一个没有重复的数组，例如，我的数组中有 2 个对象，“Layer 1”，“Layer 2”。第 1 层将具有 2 个最小值和最大值。

它应该是什么样子：

```
{

    name = "Layer 1"; value = [{maximum = 30;
    minimum = 1},{ maximum = 60;
    minimum = 45}];
},
    {
    maximum = 60;
    minimum = 45;
    name = "Layer 2";
} 
```

我试图检查索引“i”处对象的“名称”是否等于索引“i + 1”处对象的“名称”，但它崩溃了，它说“超出范围（2）：

```
rows = [mivne_shichva count];

         NSMutableArray *layers = [[NSMutableArray alloc]init];
        NSMutableDictionary *layer = [[NSMutableDictionary alloc]init];

        for (int i = 0; i<rows; i++) {
            if ([[[mivne_shichva objectAtIndex:i]valueForKey:@"name"] isEqualToString:[[mivne_shichva objectAtIndex:i+1]valueForKey:@"name"]]) {
                NSLog(@"name equals to name in i+1");
            }
            [layer setValue:[[mivne_shichva objectAtIndex:i]valueForKey:@"name"] forKey:@"name"];
            [layer setValue:[[mivne_shichva objectAtIndex:i]valueForKey:@"minimum"] forKey:@"minimum"];
            [layer setValue:[[mivne_shichva objectAtIndex:i]valueForKey:@"maximum"] forKey:@"maximum"];

            [layers addObject:layer];

            NSLog(@"layers :::: %@",layers);            
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:55:27.870

检查这个，逻辑是

最终结果将在“字典”中。'dictionary' 键包含名称为 'Layer 1' 'dictionary' 值包含一个 'array'。'array' 包含 'MinMax' 的对象。

MinMax 类：

```
@interface MinMax : NSObject

@property(strong)NSString *minimum;
@property(strong)NSString *maximum;

@end 
```

MyClass 类：

```
@interface MyClass : NSObject

@property(strong) NSString *name;
@property(strong) NSString *minimum;
@property(strong) NSString *maximum;

@end 
```

和演示实现：

```
- (id)init
{
    self = [super init];
    if (self) {
        _finalDict=[NSMutableDictionary new];

        MyClass *obj1=[MyClass new];
        obj1.name=@"Layer 1";
        obj1.minimum=@"1";
        obj1.maximum=@"30";

        MyClass *obj2=[MyClass new];
        obj2.name=@"Layer 1";
        obj2.minimum=@"45";
        obj2.maximum=@"60";

        MyClass *obj3=[MyClass new];
        obj3.name=@"Layer 2";
        obj3.minimum=@"45";
        obj3.maximum=@"60";

        _fromServerArrays=[[NSMutableArray alloc]initWithObjects:obj1, obj2, obj3, nil];

    }
    return self;
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification{

    for (MyClass *obj in _fromServerArrays) {
        NSLog(@"From server  : %@, %@, %@", obj.name, obj.minimum, obj.maximum);
    }

    for (MyClass *myClassObj in _fromServerArrays) {
        MinMax *mmObj=[MinMax new];
        mmObj.minimum=myClassObj.minimum;
        mmObj.maximum=myClassObj.maximum;

        if ([_finalDict objectForKey:myClassObj.name]) {
            NSMutableArray *getArray=[_finalDict objectForKey:myClassObj.name];
            [getArray addObject:mmObj];
        }
        else{
            NSMutableArray *array=[NSMutableArray new];
            [array addObject:mmObj];
            [_finalDict setObject:array forKey:myClassObj.name];
        }
    }

    for (NSDictionary *dict in _finalDict) {
        NSLog(@"%@",dict);
        for (MinMax *mmObj in [_finalDict objectForKey:dict]) {
            NSLog(@"%@, %@", mmObj.minimum, mmObj.maximum);
        }
    }
} 
```

输出：

```
From server  : Layer 1, 1, 30
From server  : Layer 1, 45, 60
From server  : Layer 2, 45, 60
Layer 1
1, 30
45, 60
Layer 2
45, 60 
```

# wpf - 如何用按钮填充 ItemsControl

> ID：13931846
> 
> 赞同：1
> 
> 时间：2012-12-18T11:20:49.770
> 
> 标签：wpf, xaml, user-interface, itemscontrol

我需要用可点击的基于按钮的单元格填充面板，如下所示：

[带长方形](https://dl.dropbox.com/u/43436490/sshot-4.jpg)

这是用矩形完成的：

```
<ItemsControl ItemsSource="{Binding Path=Cells}">
      <ItemsControl.ItemTemplate>
          <DataTemplate>
              <Rectangle>
                  <Rectangle.Fill>
                      <SolidColorBrush Color="Red"></SolidColorBrush>
                  </Rectangle.Fill>
              </Rectangle>
          </DataTemplate>
      </ItemsControl.ItemTemplate>
      <ItemsControl.ItemsPanel>
          <ItemsPanelTemplate>
               <commonControls:UniformGrid ElementsGap="5" HorizontalCount="{Binding Path=CellsInRow}" />
          </ItemsPanelTemplate>
      </ItemsControl.ItemsPanel>
  </ItemsControl> 
```

但我需要用按钮来做。我正在尝试：

```
<ItemsControl ItemsSource="{Binding Path=Cells}">
      <ItemsControl.ItemTemplate>
          <DataTemplate>
              <Button>
                  <Button.Background>
                      <SolidColorBrush Color="Red"></SolidColorBrush>
                  </Button.Background>
              </Button>
          </DataTemplate>
      </ItemsControl.ItemTemplate>
      <ItemsControl.ItemsPanel>
          <ItemsPanelTemplate>
               <commonControls:UniformGrid ElementsGap="5" HorizontalCount="{Binding Path=CellsInRow}" />
          </ItemsPanelTemplate>
      </ItemsControl.ItemsPanel>
  </ItemsControl> 
```

但看起来是这样的：

[带按钮](https://dl.dropbox.com/u/43436490/sshot-3.jpg)

**我如何使用按钮从第一张图像中处理单元格？**

UniformGrid 代码如下：

```
 public class UniformGrid : Panel
{
    public static readonly DependencyProperty HorizontalCountProperty =
        DependencyProperty.Register("HorizontalCount", typeof (int), typeof (UniformGrid),
                                    new PropertyMetadata(default(int)));

    public int HorizontalCount
    {
        get { return (int) GetValue(HorizontalCountProperty); }
        set { SetValue(HorizontalCountProperty, value); }
    }

    public static readonly DependencyProperty ElementsGapProperty =
        DependencyProperty.Register("ElementsGap", typeof (double), typeof (UniformGrid),
                                    new PropertyMetadata(default(double)));

    public double ElementsGap
    {
        get { return (double) GetValue(ElementsGapProperty); }
        set { SetValue(ElementsGapProperty, value); }
    }

    protected override Size MeasureOverride(Size availableSize)
    {
        return new Size();
    }

    protected override Size ArrangeOverride(Size finalSize)
    {
        if (Children != null && Children.Count != 0)
        {
            var squareSideForElement = (finalSize.Width - (HorizontalCount - 1)*ElementsGap)/HorizontalCount;
            var sizeOfElement = new Size(squareSideForElement, squareSideForElement);
            for (var i = 0; i < Children.Count; i++)
            {
                var rowIndex = i%HorizontalCount;
                var columnIndex = i/HorizontalCount;
                var resultPoint = new Point
                    {
                        X = rowIndex*(squareSideForElement + ElementsGap),
                        Y = columnIndex*(squareSideForElement + ElementsGap)
                    };
                Children[i].Arrange(new Rect(resultPoint, sizeOfElement));

            }

        }
        return finalSize;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:37:59.440

您的 MeasureOverride 必须对每个孩子调用[Measure 。](http://msdn.microsoft.com/en-us/library/system.windows.uielement.measure.aspx)请阅读[MeasureOverride](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.measureoverride.aspx)中的备注部分，尤其是以下注释：

> 在此过程中，元素应在每个子元素上调用 Measure，否则子元素将无法正确调整大小或排列

你至少应该这样做：

```
protected override Size MeasureOverride(Size availableSize)
{
    foreach (UIElement element in InternalChildren)
    {
        element.Measure(availableSize);
    }

    return new Size();
} 
```

如果您想确保每个孩子都计算其最大首选尺寸，您可以将无限的宽度和高度传递给 Measure：

```
protected override Size MeasureOverride(Size availableSize)
{
    availableSize = new Size(double.PositiveInfinity, double.PositiveInfinity);

    foreach (UIElement element in InternalChildren)
    {
        element.Measure(availableSize);
    }

    return new Size();
} 
```

# parallel-processing - 在脚本中使用 Resharpers testrunner？

> ID：13931855
> 
> 赞同：1
> 
> 时间：2012-12-18T11:21:15.440
> 
> 标签：parallel-processing, nunit, resharper, command-line-interface

我们想要并行化我们的单元测试，但是 nunit-console.exe 不能开箱即用。codeplex.com 上的 NUnit.MultiCore 项目似乎无法加载我们的自定义 log4net 附加程序——可能是框架中的 AppDomain 错误。

但是，Resharpers 拥有自己的测试运行程序，并行运行 nunit 测试。我的问题是是否可以使用 Resharpers 单元测试运行程序 JetBrains.ReSharper.TaskRunner.exe 作为 CLI 工具并在我们的构建服务器上运行它？

# java - Java发送消息线程

> ID：13931856
> 
> 赞同：0
> 
> 时间：2012-12-18T11:21:16.377
> 
> 标签：java, multithreading, sockets, dataoutputstream

我使用套接字和数据输入/输出流用 Java 编写了一个带有客户端和服务器端的游戏。服务器端有时需要在“for”循环中向所有用户发送消息，但由于写入套接字可能会阻塞我为每个向他发送消息的用户创建了一个线程（以及为每个用户监听的另一个线程）传入消息）。发送线程是建立在这个想法上的：

```
private ArrayList<Object> messages = new ArrayList<Object>(),
                          newMessages = new ArrayList<Object>();

public void run() {
    while (true) {
        for (Object message: messages) {
            try {
                if (message instanceof Byte)
                    out.writeByte((Byte)message);
                else if (message instanceof Boolean)
                    out.writeBoolean((Boolean)message);
                else if (message instanceof String)
                    out.writeUTF((String)message);
                else if (message instanceof Integer)
                    out.writeInt((Integer)message);
                else if (message instanceof Long)
                    out.writeLong((Long)message);
            } catch (IOException e) {}
        }
        synchronized (newMessages) {
            messages.clear();
            messages.addAll(newMessages);
            newMessages.clear();
        }
    }
}

public void write(Object message) {
    synchronized (newMessages) {
        newMessages.add(message);
    }
} 
```

不幸的是，run() 方法一直在运行，所以我想插入一个 sleep 命令，以实现如下效果：

```
private ArrayList<Object> messages = new ArrayList<Object>(),
                          newMessages = new ArrayList<Object>();

public void run() {
    while (true) {
        try {
            if (messages.isEmpty() && newMessages.isEmpty())
                sleep(0);
        } catch (InterruptedException e) {}
        for (Object message: messages) {
            try {
                if (message instanceof Byte)
                    out.writeByte((Byte)message);
                else if (message instanceof Boolean)
                    out.writeBoolean((Boolean)message);
                else if (message instanceof String)
                    out.writeUTF((String)message);
                else if (message instanceof Integer)
                    out.writeInt((Integer)message);
                else if (message instanceof Long)
                    out.writeLong((Long)message);
            } catch (IOException e) {}
        }
        synchronized (newMessages) {
            messages.clear();
            messages.addAll(newMessages);
            newMessages.clear();
        }
    }
}

public void write(Object message) {
    synchronized (newMessages) {
        newMessages.add(message);
        interrupt();
    }
} 
```

但这可能会导致线程在有消息要发送时进入睡眠状态，例如当 write() 方法在 run() 方法进行 isEmpty() 检查后调用时，返回 true，但尚未启动睡觉。我真的想不出一种方法来避免 sleep(0) 的这个问题，有人知道吗？还是我在这件事上走错路了？

谢谢一堆。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T11:25:12.657

看看[LinkedBlockingQueues](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html)。您可以使用其中一个来代替代码中的`messages`and`newMessages`对象。

此类允许您从一个线程 A 添加项目并从另一个线程 B 读取。线程 B 将等待线程 A 添加新消息。应该正是您需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:49:25.823

我会重新考虑您的解决方案，使用[ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html)在后台执行 Runnable。此类还允许以固定速率执行周期性操作：

你的 Runnable 类：

```
public void run() {
    for (Object message: messages) {
        try {
            if (message instanceof Byte)
                out.writeByte((Byte)message);
            else if (message instanceof Boolean)
                out.writeBoolean((Boolean)message);
            else if (message instanceof String)
                out.writeUTF((String)message);
            else if (message instanceof Integer)
                out.writeInt((Integer)message);
            else if (message instanceof Long)
                out.writeLong((Long)message);
        } catch (IOException e) {}
    }
    synchronized (newMessages) {
        messages.clear();
        messages.addAll(newMessages);
        newMessages.clear();
    }

}

public void write(Object message) {
    synchronized (newMessages) {
        newMessages.add(message);
    }
} 
```

然后，调用 Runnable：

```
 Runnable sender=new MyMessageSender(); //or whatever your class is called

  int threadPoolSize=1; //number of Threads you want to launch
  ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(threadPoolSize);

  final ScheduledFuture<?> senderHandle =
       scheduler.scheduleAtFixedRate(sender, 10, 10, SECONDS); //from now in 10 senconds, execute sender every 10 seconds 
```

# xss - LocalStorage 和 Xss

> ID：13931863
> 
> 赞同：6
> 
> 时间：2012-12-18T11:21:55.167
> 
> 标签：xss, security, local-storage

xss（跨站点脚本）可以覆盖站点的本地存储值吗？据我在 chrome 和 firefox 中验证，其他站点无法访问站点的 localstorage 值。谁能告诉我 localstorage 值是否可以通过 xss 从浏览器中的不同域读取/写入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-23T05:48:16.130

现在许多网站，添加第三方 js 库用于分析、A/B 测试、营销工具、热图和......在这种情况下，它可以获取您的 localStorage。不要将本地存储用于会话标识符或敏感令牌。坚持使用 cookie 并使用`HTTPOnly`和 Secure 标志。为了防止对 Cookie 的 CSRF 攻击，几乎所有的请求都包含以下一项或两项：`Origin`Header 和`Referer`Header。通过检查 API 中的 HTTP Referer 和 Origin 标头可以部分防止 CSRF。CSRF 攻击将具有与您的应用程序无关的 Referer 和 Origin 标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:48:22.740

来自反射型 XSS 或类似的 Javascript 可以做任何普通 JS 可以在 XSS 存在的域上做的事情。因此，如果 example.com 已将内容存储在 localStorage 中，并且 example.com 也存在 XSS 漏洞，则该 XSS 漏洞可用于提取或覆盖 localStorage 中的用户数据。您甚至可以使用反射型 XSS，它使用来自 localStorage 的数据来利用基于 DOM 的 XSS，这意味着客户端持久性 XSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T05:46:18.197

Web 存储（本地和会话）遵循[单一来源策略](http://www.w3.org/TR/webstorage/#security-storage)。所以它无法通过 XSS 访问 Web 存储。

# c# - There are software to view a entity framework query result?

> ID：13931867
> 
> 赞同：-5
> 
> 时间：2012-12-18T11:22:17.967
> 
> 标签：c#, entity-framework

I would like to know if there is any software to manage and view result of a entity framework query like a MS SQl Server Management Studio for SQL.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:24:32.793

I think you easily can relay on [LinqPAD](http://www.linqpad.net/EntityFramework.aspx) to execute, control and see results of the query.

There is detailed blog post dfined there: [.NET - New connection providers in LINQPad](http://www.scip.be/index.php?Page=ArticlesNET29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:24:00.533

Your question is ambigous but here goes.

Try Debugging with a breakpoint to see the result of a Query.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:26:22.267

[Linqpad](http://www.linqpad.net/)可以显示实体框架查询的结果。如果我没记错的话，它将显示结果数据集和创建的 SQL。

有关“如何”，请参阅[将 LINQPad 与实体框架一起使用。](http://www.linqpad.net/EntityFramework.aspx)

# oracle - 处理 unix 文件中的 oracle 程序错误

> ID：13931870
> 
> 赞同：1
> 
> 时间：2012-12-18T11:22:48.677
> 
> 标签：oracle, unix, plsql

在我的应用程序中，oracle 程序当前是通过 unix 脚本调用的，当异常块中出现错误时，我们正在处理这样的事情：-

```
PROC_LOGS('<PROC_NAME>', <TABLE_NAME>, 'Exception','Exception occured - '||SQLERRM); 
```

PROC_LOG 除了将条目插入日志表之外什么都不做，但是我们现在还需要在 unix 中捕获该错误（返回除 0 之外的一些值），从哪里调用它，以便可以最好地终止剩余进程，最好的方法是什么？ ?

```
CREATE OR REPLACE....
...
DECLARE
....
BEGIN
..
...
EXCEPTION
WHEN OTHERS THEN
PROC_LOGS('<PROC_NAME>', <TABLE_NAME>, 'EXCEPTION','EXCEPTION OCCURED - '||SQLERRM);
END; 
```

我调用过程的 Unix 脚本部分

```
sqlplus <<-!
$US/$P@$I
set serveroutput on
@$SQL/execute_proc.sql $1 $2 
```

`execue_proc`包含类似这样的内容：-

```
 define IN_1 = '&1';
  define IN_2 = '&2';

spool $SQL/test_&&IN
declare
 P_IN_TABLE_NAME varchar2(250) := '&&IN_TABLE_NAME';
 P_IN_REGION varchar2(250) := '&&IN_REGION';
begin
PROC_UPDATE_CHARGE_FACT(P_IN_TABLE_NAME,P_IN_REGION);
    end;

/
spool off 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:09:25.050

您可能正在调用 SQL*Plus，而 SQL*Plus 有一个配置项应该会有所帮助。

[http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve052.htm#BACHCFEF](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve052.htm#BACHCFEF)

由于您可能从匿名块执行该过程，因此错误应该传播到 SQL*Plus，并且“WHENEVER SQLERROR EXIT SQL.SQLCODE”会将相关的错误代码返回到 unix 环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:14:34.573

您需要[`raise`](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/raise_statement.htm)例外，如下所示：

```
EXCEPTION
  WHEN OTHERS THEN
    PROC_LOGS('<PROC_NAME>', <TABLE_NAME>, 'EXCEPTION','EXCEPTION OCCURED - '||SQLERRM);
    RAISE;
END; 
```

或使用`RAISE_APPLICATION_ERROR`：

```
EXCEPTION
  WHEN OTHERS THEN
    PROC_LOGS('<PROC_NAME>', <TABLE_NAME>, 'EXCEPTION','EXCEPTION OCCURED - '||SQLERRM);
    RAISE_APPLICATION_ERROR (-20002, 'An unexpected exception occurred.');
END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:37:18.613

一种方法是让 proc_log() 也写入日志文件，然后让 unix 脚本检查日志文件。

# constraints - accepting only alphabets in varchar2 using check constraint in sql

> ID：13931880
> 
> 赞同：1
> 
> 时间：2012-12-18T11:23:21.547
> 
> 标签：constraints

I have a table with a column `name` of datatype `varchar2`. How can I use check constraint on `name` such that it will not accept NUMERIC VALUES AS WELL AS SPECIAL CHARACTERS in it?????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:34:41.323

假设您使用的是 ms sql

```
ALTER TABLE table
ADD
CONSTRAINT column_alpha_check
CHECK
(
     field like '%[^abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ]%'
) 
```

还

在 SQL 中，您可以增强功能来做到[这一点](http://msdn.microsoft.com/en-us/magazine/cc163473.aspx)

# c++ - 在 C++ 中定义一个不寻常的二维数组

> ID：13931882
> 
> 赞同：3
> 
> 时间：2012-12-18T11:23:26.103
> 
> 标签：c++, arrays

我想使用枚举来引用二维数组的第一维。但是，每个枚举值表示的配置有时会重叠（不是以任何模式化的方式），这意味着数组中的数据有时会相同。因此，我想让一些元素指向相同的数据数组，如下图所示。

![不寻常的阵列配置](../Images/6fe21fec6412a82a3b445fec8def7304.png)

在 C++ 的声明时有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:29:06.793

是的，您可以使用指针数组构建这样的数组；您将能够像引用常规二维数组一样引用该数组中的元素。这是一个例子：

```
enum MyEnum {
    enumFirst = 0
,   enumSecond = 1
,   enumSecondShared = 2
,   enumThird = 3
};

static int enumFirstData[] = {1, 2, 3};
static int enumSecondData[] = {4, 3, 2};
static int enumThirdData[] = {9, 7, 8};

int *enumData[] = {
    enumFirstData
,   enumSecondData
,   enumSecondData // <== Shared
,   enumSecondData
}; 
```

现在你可以像这样引用这个数组的元素：

```
for (int i = 0 ; i != 3 ; i++) {
    cout << enumData[enumSecondShared][i] << endl;
} 
```

由于您使用的是 C++，因此使用`std::vector`or`std::array`是制作集合的首选方式。您可以使用与上述相同的技巧来建立共享集合元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:38:32.257

您可以定义自己的容器类型并使用 switch/case 从枚举映射到引用。这样，您可以在声明时映射这些枚举，可以使用任意枚举值，并且比索引指针数组更安全。

它看起来像这样（未经测试），它专门用于`std::map`类：

```
template<class V>
class map<myenum,V>{
  V r1,r2,r3;
public:
  inline map(){}
  inline r1& operator[](myenum e){
    switch(e)
    {
    case E1: return r1;
    case E2:
    case E3: return r2;
    case E4:
    case E5: return r3;
    }
  }
}

map<myenum,vector<int>> example; 
```

（很抱歉没有编写高质量的标准模板样式定义，我不再习惯用 C++ 编程了。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:08:56.363

您所需要的只是`std::map<your_enum_t, data_t*>` 您应该根据自己的需要感受映射

# python - How can a Python function be called on script exit reliably?

> ID：13931887
> 
> 赞同：2
> 
> 时间：2012-12-18T11:23:41.077
> 
> 标签：python, python-2.7

How do you register a function with all the correct handlers etc to be called when the Python script is exitted (successfully or not)?

I have tried:

```
@atexit.register
def finalise():
    '''
    Function handles program close
    '''
    print("Tidying up...")
    ...
    print("Closing") 
```

...but this does not get called when the user closes the command prompt window for example (because `@atexit.register` decorated functions do not get called when the exitcode is non zero)

I am looking for a way of guaranteeing `finalise()` is called on program exit, regardless of errors.

For context, my Python program is a continually looping service program that aims to run all the time.

Thanks in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:30:35.640

我不认为它可以在纯 Python 中完成。从[文档](http://docs.python.org/2/library/atexit.html)：

> 注意：当程序被 Python 未处理的信号杀死、检测到 Python 致命内部错误或调用 os._exit() 时，不会调用通过此模块注册的函数。

我认为您可能会发现这很有用：[如何在 python 中捕获命令提示符窗口关闭事件](https://stackoverflow.com/questions/5180440/how-to-capture-a-command-prompt-window-close-event-in-python)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:58:52.680

> 就上下文而言，我的 Python 程序是一个不断循环的服务程序，旨在始终运行。

这很难正确解决（请参阅[如何在 Python 中创建守护程序？](https://stackoverflow.com/questions/473620/how-do-you-create-a-daemon-in-python)）。您应该改用[http://pypi.python.org/pypi/python-daemon/](http://pypi.python.org/pypi/python-daemon/)之类的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:28:14.297

您是否尝试在主函数或代码块中捕获各种异常？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:37:19.300

这个应该工作

在`Ctrl-C`断言失败时和断言失败时都有效。也许您可以使用类似的构造并将其打包为装饰器或其他任何东西。

```
def main():
  print raw_input('> ')
  # do all your stuff here  

if __name__ == '__main__':
  try:
    main()
  finally:
    print 'Bye!' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-18T11:42:39.540

```
atexit.register(func)

func = lambda x: x 
```

使用[http://docs.python.org/2/library/atexit.html](http://docs.python.org/2/library/atexit.html)

# mysql - mysql stored procedure set value from table

> ID：13931888
> 
> 赞同：3
> 
> 时间：2012-12-18T11:23:44.663
> 
> 标签：mysql, stored-procedures

I've got a following, simple table:

```
mysql> select * from version;
+----+---------+
| id | version |
+----+---------+
|  1 | 1       |
+----+---------+
1 row in set (0.00 sec) 
```

I need to create a stored procedure that will do something (or nothing) depending on the value of this table (precisely, the only row of this table).

```
DELIMITER $$
DROP PROCEDURE IF EXISTS upgrade_version $$
CREATE PROCEDURE upgrade_version(current_version INTEGER, script TEXT)
BEGIN
  DECLARE version INT(11);
  SET version = (SELECT `version` FROM `version` WHERE `id` = 1 LIMIT 1);
  SELECT version;
  IF version = current_version + 1 THEN
    PREPARE upgrade_stmt FROM script;
    EXECUTE upgrade_stmt;
    UPDATE `version` SET `version` = `version` + 1 WHERE `id` = 1;
  ENDIF;
END $$
DELIMITER ; 
```

To be called within:

```
CALL upgrade_version(1,'ALTER TABLE ...'); 
```

It is syntactically incorrect, mysql returns:

```
1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'script;
    EXECUTE upgrade_stmt;
    UPDATE `version` SET `version` = `version`' at line 7 
```

What is wrong?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:41:06.240

我不明白您为什么选择“SELECT 版本”，如果您想选择必须将其检索到变量中的数据，那么当您直接在终端上使用它时，该语句可以正常工作。你确定你的脚本中有prepared_stmt ..！？可能的解决方法是：

1.  将变量名 version 更改为 version_v
2.  而不是这个：

    SET 版本 = (SELECT `version`FROM `version`WHERE `id`= 1 LIMIT 1);
    选择版本；

尝试这个：

```
SELECT `version` INTO Version_v FROM `version` WHERE `id` = 1 LIMIT 1); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T11:55:30.937

尝试这个：

```
DELIMITER $$
DROP PROCEDURE IF EXISTS upgrade_version $$
CREATE PROCEDURE upgrade_version(current_version INT, script TEXT)
BEGIN
  SELECT `version` into @ver FROM `version` WHERE `id` = 1 LIMIT 1;  
  SET @s = script;
  IF @ver = current_version + 1 THEN
    PREPARE upgrade_stmt FROM @s;
    EXECUTE upgrade_stmt;
    DEALLOCATE PREPARE upgrade_stmt;
    UPDATE `version` SET `version` = `version` + 1 WHERE `id` = 1;
  END IF;
END $$
DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-30T09:40:58.227

## 设置值以声明变量

```
 DELIMITER $$
       create procedure Testing()
           begin
            declare Regione int;   
            set Regione=(select  id from users
            where id=1) ;
            select Regione ;
           end $$
         DELIMITER; 
```

# jquery - Validating other fields depending on select

> ID：13931889
> 
> 赞同：0
> 
> 时间：2012-12-18T11:23:49.860
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate

I have this in my view:

```
@using(Html.BeginForm())
{
    <label> Condition Target </label>
    <input type="text" name="ConditionTarget1" id="ConditionTarget1"/>
    <input type="text" name="ConditionTarget2" id="ConditionTarget2"/>
    <br/>

    <label> Condition Object </label>
    <select name="ConditionObject" id="ConditionObject">
        <option value="1"> Condition 1 </option>
        <option value="2"> Condition 2 </option>
    </select>
    <br/>

    <input type="submit"/>
} 
```

In my controller (for example):

```
public ActionResult Validate(int value)
{
    return Json(value == 1, JsonRequestBehavior.AllowGet);
} 
```

I want that when conditionobject changes, Validate server method should be called and depending on result conditiontarget text fields must become required (in this case if option 2 is selected). I tried jQuery remote validation but it validates select itself. Can you help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:29:59.270

```
 $('#ConditionObject').change(function(){
       $.ajax({
         type: "GET",
         url: "servercode.asp",
         data:this.val();
        success:function(data)
       {
         if(data==1)
        {
           $('#ConditionTarget1').addClass('required');//add required validation ,sample only
        }
      }
    });
 }); 
```

然后在验证检查 ConditionTarget1 有任何验证

```
$('input:submit').click(function(){

 if($('#ConditionTarget1').hasClass('required'))
  {
     alert('oops validation required');
      return false;
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:39:53.000

你真的需要调用服务器端方法吗？尝试这个：

```
$('#ConditionObject').on("change",function(){
    if($(this).val() == 1)
    {
        $('#ConditionTarget1').addClass("Required");
    }
    else
    {
        $('#ConditionTarget1').removeClass("Required");
    }
}); 
```

提交时：`<input id="submitForm" type="submit"/>`

```
$("#submitForm").on("click", function(event){
  if($('#ConditionTarget1').hasClass("Required"))
    event.preventDefault();
}); 
```

# oracle - 获取有关用户定义对象类型中的属性类型的信息

> ID：13931890
> 
> 赞同：0
> 
> 时间：2012-12-18T11:23:49.443
> 
> 标签：oracle, attributes, oracle10g, user-defined-types, oracle-type

`DBA_TYPE_ATTRS`在 oracle 11 中，我在/ `ALL_TYPE_ATTRS`/中使用列 CHAR_USED `USER_TYPE_ATTRS`。

```
select CHAR_USED from SYS.DBA_TYPE_ATTRS 
```

但是在10这个栏目[中是不存在](http://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_2108.htm)的。

测试类型：

```
create type TEST_TYPE_WITH_CHAR as object (
    A varchar2(10 char)
);

create type TEST_TYPE_WITH_BYTE as object (
    A varchar2(10 byte)
); 
```

如何确定什么类型包含char，以及哪个字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:45:03.893

10g 中的这个信息是存在的，但根本没有暴露给我们。所以你只有几个选择。（在 11g 中，它只在 ALL 视图中，而不是 DBA/USER 视图，除非他们在最近的补丁中添加了它）

1.  dba_source 将拥有它，但这是对 sql 的手动解析以获取它。

2.  您可以创建一个新视图加入到 sys.attribute$ 并提取`decode(bitand(properties, 4096), 4096, 'C', 'B')`

3.  您可以修改现有的 *type_attr 视图（尽管 Oracle 不支持该视图）。只需`decode(bitand(a.properties, 4096), 4096, 'C', 'B')`在视图中添加选择部分（其中“a”是对 sys.attribute$ 的引用）。

新观点的一个例子..

```
SQL> select * from v$version;

BANNER
----------------------------------------------------------------
Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bi
PL/SQL Release 10.2.0.4.0 - Production
CORE    10.2.0.4.0      Production
TNS for Linux: Version 10.2.0.4.0 - Production
NLSRTL Version 10.2.0.4.0 - Production

SQL> create view type_chars
  2  as
  3  select ta.owner, ta.type_name, ta.attr_name, decode(bitand(a.properties, 4096), 4096, 'C', 'B') char_used
  4    from sys.attribute$ a, sys.type$ t, sys.obj$ o, dba_objects ob, dba_type_attrs ta
  5  where ta.owner = ob.owner
  6    and ta.type_name = ob.object_name
  7    and a.toid = t.toid
  8    and a.version# = t.version#
  9    and t.toid = o.oid$
 10    and o.subname is null
 11    and ob.object_id = o.obj#
 12    and a.name = ta.attr_name;

View created.

SQL> create type mytype as object (a varchar2(20), b number, c varchar2(30 char));
  2  /

Type created.

SQL> select * from type_chars where type_name = 'MYTYPE' and owner= user;

OWNER                          TYPE_NAME                      ATTR_NAME                      C
------------------------------ ------------------------------ ------------------------------ -
DTD_TRADE                      MYTYPE                         A                              B
DTD_TRADE                      MYTYPE                         B                              B
DTD_TRADE                      MYTYPE                         C                              C

SQL> 
```

# magento - Magento Shipping method stops working after ALTER tables 'sales_flat_quote_address' and 'sales_flat_order_address'

> ID：13931895
> 
> 赞同：3
> 
> 时间：2012-12-18T11:24:07.243
> 
> 标签：magento

I had ALTER tables 'sales_flat_quote_address' and 'sales_flat_order_address' to add a new column in order to add a custom field in Billing and Shipping process. But after doing that even the default shipping method stops working and it is not still not working after drop of this column. Below is the code I had used in my sql file of my module.

```
 $installer = $this;

    $installer->startSetup();

     /* @var $addressHelper Mage_Customer_Helper_Address */
    $addressHelper = Mage::helper('customer/address');
    $store         = Mage::app()->getStore(Mage_Core_Model_App::ADMIN_STORE_ID);

    /* @var $eavConfig Mage_Eav_Model_Config */
    $eavConfig = Mage::getSingleton('eav/config');

    // update customer address user defined attributes data
    $attributes = array(
        'suburb'           => array(   
            'label'    => 'Suburb',
            'type'     => 'varchar',
            'input'    => 'text',
            'is_user_defined'   => 1,
            'is_system'         => 0,
            'is_visible'        => 1,
            'sort_order'        => 140,
            'is_required'       => 1,
            'multiline_count'   => 0,
            'validate_rules'    => array(
                'max_text_length'   => 255,
                'min_text_length'   => 1
            ),
        ),
    );

    foreach ($attributes as $attributeCode => $data) {
        $attribute = $eavConfig->getAttribute('customer_address', $attributeCode);
        $attribute->setWebsite($store->getWebsite());
        $attribute->addData($data);
            $usedInForms = array(
                'adminhtml_customer_address',
                'customer_address_edit',
                'customer_register_address'
            );
            $attribute->setData('used_in_forms', $usedInForms);
        $attribute->save();
    }

    $installer->run("
        ALTER TABLE {$installer->getTable('sales_flat_quote_address')} ADD COLUMN suburb VARCHAR(255) CHARACTER SET utf8 DEFAULT NULL AFTER fax;
        ALTER TABLE {$installer->getTable('sales_flat_order_address')} ADD COLUMN suburb VARCHAR(255) CHARACTER SET utf8 DEFAULT NULL AFTER fax;

        ");     

    $installer->endSetup(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T12:03:07.807

通过摆弄运输选项，我注意到它可能会停止结帐（不加载运输方式），但它会导致致命错误。在您的后端启用登录，然后导航到您的结帐并尝试选择所有不可用的运输方式。完成后，检查您的异常日志和 var/reports 文件夹。这些可能会为您提供一些信息，在您的特定情况下出了什么问题。

# performance - Opencv级联训练时间

> ID：13931898
> 
> 赞同：5
> 
> 时间：2012-12-18T11:24:19.163
> 
> 标签：performance, opencv, computer-vision, tbb

我使用 opencv_traincascade 使用以下参数进行训练

**opencv_traincascade -data cascade_model -vec ..\create_template\pos_vec_file -bg ..\BG\bg.txt -featureType LBP -w 32 -h 32 -numPos 5000 -numNeg 10000**

我试图给更多的内存 1024 Mb（默认为 256），但在这种情况下我有内存分配错误。所以问题是，在第一个训练阶段还可以，但是在第 12、13 阶段等等，每个阶段需要 8 个小时。在训练过程中，我有 10-15% 的处理器活动。我在 opencv lib 中有 TBB 二进制文件，但我不确定我的 PC 是否使用它。我如何告诉 PC，我想在培训过程中整合所有 PC 资源？谢谢。 ![训练过程中的处理器和内存活动](../Images/0fbb16bf851f0be2a4d4403c06c7f4a2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:07:35.697

您应该安装 TBB 和 IPP。然后您可以在配置 OpenCV 时将 WITH_TBB=ON 传递给 CMake。它帮助了我，我有 100% 的处理器活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T00:54:16.823

你有没有安装IPP。而且我认为并非所有培训过程都是平行的。您需要编写自己的代码使其完全并行。

# maven - surfire plugin maven : 用于特定测试的环境变量

> ID：13931899
> 
> 赞同：2
> 
> 时间：2012-12-18T11:24:19.537
> 
> 标签：maven, junit, maven-surefire-plugin

我面临 Maven 和 Surefire 插件的问题。

我有两个测试：`testDatePos.java`并且`testDateNeg.java`必须为每个测试设置一个环境变量。它是相同的环境变量 ( `DATE_SHIFT`) 但不同的值 ( `-1 and 1`)。

是否可以在 Maven 中配置 surefire-plugin 部分`pom.xml`以运行这些测试？

这是我的 pom.xml 排除了`testDatePos.java`运行`mvn test`正常（我知道这不是解决方案）：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-surefire-plugin</artifactId>
  <configuration>
    <excludes>
      <exclude>**/testDatePos.java</exclude>
      <!-- this test needs the env variable DATE_SHIFT=1 but 
      the test testDateNeg.java needs it at -1 -->
    </excludes>
    <environmentVariables>
      <DATE_SHIFT>-1</DATE_SHIFT>
    </environmentVariables>
  </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:55:53.717

您可以通过在 pom 中指定两个不同的surefire 执行并分叉每个执行来做到这一点。

但是，这意味着这些测试仅在您从 maven 运行它们时才有效，或者至少您必须在运行它们的任何地方更改配置。因此，对于需要环境变量的测试，我会将其添加到这些特定测试的@Before/@After（或@BeforeClass/@AfterClass）中。

```
@Before public void before() {
  System.setProperty("DATE_SHIFT", "-1");
} 
```

这样，您无需在 Maven 中执行测试即可使其工作。您可能希望存储 DATE_SHIFT 的原始值并在测试结束时恢复它。

# java - Generic class with dependent generic types, cannot specialize?

> ID：13931900
> 
> 赞同：3
> 
> 时间：2012-12-18T11:24:22.730
> 
> 标签：java, generics

I'm currently working with the following types:

```
// A Field whose values are of type V.
interface Field<V> {
    public V getValue();
}

// A Field whose values are of type V and that has a LabelProvider for those values.
interface LabelField<V> extends Field<V> {
    public LabelProvider<V> getLabelProvider();
} 
```

These come from a library and I cannot change them. This is probably not relevant, but a LabelProvider is basically a class that converts values of type V to Strings.

Now I want to create a class that provides an interface similar to this:

```
// A Wrapper class for Fields of values V
interface IWrapper<V, F extends Field<V>> {
    public F getField();
    public V getValue();
    public String getLabel();
} 
```

The class will wrap a Field, and let its users retrieve the value from the field, but also provide other functionalities, including retrieving the label. Here's what I have:

```
public class Wrapper<V, F extends Field<V>> {

    private F field;
    private LabelProvider<V> labelProvider; // Converts from V to String

    // Since we have no guarantee that F has a LabelProvider, one is explicitely supplied.
    public Wrapper(F field, LabelProvider<V> labelProvider) {
        this.field = field;
        this.labelProvider = labelProvider;
    }

    private String getLabel() {
        return labelProvider.getLabel(field.getValue());
    }

    public F getField() {
        return field;
    }

    public V getValue() {
        return field.getValue();
    }
} 
```

1.  No problem until this point, although I'm not sure whether I need these two generic types. Ideally I would have prefered to just have Wrapper> and be able to access both F and V. I think that this is not possible, and that the above is the correct way to do this ?

2.  Now here's the real issue.

I want to have a more specific constructor for the LabelField type, which would look like this:

```
public Wrapper(LabelField<V> labelField) {
    // Use the field's own label provider
    this(labelField, labelField.getLabelProvider());
} 
```

In this case the labelprovider can be extracted from the field. But the compiler doesn't like this and I get the following error:

```
The constructor Wrapper<V,F>(LabelField<V>, LabelProvider<V>) is undefined 
```

Even though this method, which uses the same types, compiles :

```
public static <X> void test(LabelField<X> lf) {
    LabelProvider<X> lp = lf.getLabelProvider();
    new Wrapper<X, LabelField<X>>(lf, lp);
} 
```

Why doesn't the second constructor compile ?

Here's a SSCE : [http://pastebin.com/UqLJhJA7](http://pastebin.com/UqLJhJA7)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:44:59.920

`F`可以是任何扩展的类型`Field<V>`，并且该类型不一定是`LabelField`.

例如，如果您创建一个`FooField`实现`Field<Object>`和使用的类`Wrapper<Object, FooField>`，则`LabelField`构造函数将不匹配。

您可以通过这种方式简化包装器（这也回答了您的第一点）：

```
public class Wrapper<V> {

    private Field<V> field;

    private LabelProvider<V> labelProvider; // Converts from V to String

    // Since we have no guarantee that F has a LabelProvider, one is explicitely
    // supplied.
    public Wrapper(Field<V> field, LabelProvider<V> labelProvider) {
        this.field = field;
        this.labelProvider = labelProvider;
    }

    public Wrapper(LabelField<V> labelField) {
        // Use the field's own label provider
        this(labelField, labelField.getLabelProvider());
    }

    private String getLabel() {
        return this.labelProvider.getLabel(this.field.getValue());
    }

    public Field<V> getField() {
        return this.field;
    }

    public V getValue() {
        return this.field.getValue();
    }
} 
```

这使用“常规”多态性而不是`field`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:09:42.873

你混合了泛型和继承。

您应该仅使用以下参数进行参数化`V`：

```
public class Wrapper<V> 
```

并写在下面

```
Field<V> 
```

在所有你会写的地方

```
F 
```

# javascript - Set margins on print - @media print not working

> ID：13931901
> 
> 赞同：0
> 
> 时间：2012-12-18T11:24:24.967
> 
> 标签：javascript, css

When I load my page I set the margin of the container div with Javascript to avoid that the page 'jumps' when the scrollbar shows. Hence, the default value is auto - but the actual value is defined with JS

However, when I then want to print the page, I would like the margins to be set back to auto (or some chosen value)

I have tried with:

```
@media print { .container { margin: 0px; }}
@page { .container { margin: 0mm 0mm 0mm 0mm; }} 
```

And with an independent style sheet for media="print" with:

```
.container { margin: 0px; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:27:51.920

所以你想覆盖 JavaScript 设置的内联样式？

`media="print"`在你的样式表中试试这个：

```
.container { 
    margin: 0px !important; 
} 
```

`!important`除非您指定规则，否则内联样式优先于样式表。

# python - Python类，奇怪的错误

> ID：13931905
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:25:02.923
> 
> 标签：python, class

我有一堂课，没什么特别的，就是一堂普通的课：

```
class WINDOW ():
    def __init__ (self, path):
        ...some unrelated codd...
        self.win = newwin(stdscr.win.getmaxyx() [0]-2, stdscr.win.getmaxyx() [1], 0, 0)
        self.xmax = self.win.getmaxyx() [1]
        self.ymax = self.win.getmaxyx() [0]

    def draw(self,flin,fcol):
        ...code here
        i = 0
        while i < self.ymax -1:
            ...more code here... 
```

当我尝试在 while 循环中访问“self.ymax”时，出现错误，说类 WINDOW 没有 ymax 属性。我做错了什么？？？

编辑： getmaxyx() 返回两个值的元组。这是一个诅咒程序。我正在使用python 3。

编辑 2：更多代码 - 创建 WINDOW 的实例：

```
def main():
    global stdscr
    stdscr = initscr()
    global interface

    interface = INTERFACE(stdscr)
    interface.wins.append(WINDOW(parseArgv()))

    dispatcher() 
```

解析器（）：

```
def parseArgv():
    #arguments are [filename, PathToFileThatThisProgramOpens]
    if len(argv) == 1:
        return None
    else:
        return argv[-1] 
```

调用draw()：

```
def SwitchWindow(self):
    self.wins[self.currentWindow].empty()
    self.currentWindow += 1 #select next window
    line = self.wins[self.currentWindow].flin
    coll = self.wins[self.currentWindow].fcol
    self.wins[self.currentWindow].draw(line,coll) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:38:10.283

如果没有完整的代码和回溯，就无法判断，但我对这个问题有一些猜测：

1.  被替换的位`...some unrelated codd...`实际上包含多个代码路径，并且我们看到的代码仅在某些时候执行，因此`self.ymax`并不总是被初始化。
2.  要么 要么`...code here`重新绑定方法中`...more code here...`的名称。`self``draw()`
3.  majTheHero 重新输入了她/他的代码，而不是使用复制和粘贴，这样做无意中更正了`ymax`其中一个使用位置的拼写错误。

# c# - 通过 LINQ 搜索部分列表

> ID：13931906
> 
> 赞同：1
> 
> 时间：2012-12-18T11:25:05.217
> 
> 标签：c#, linq

我想知道是否有办法从**LINQ中的特定****索引**进行搜索

 **这就是我想要做的，例如：

```
 //search after the 4th element if exist any true
     bool result = myList.Any(a=>a.flagTodo) 
// in my case I want to do like:  myList.where(a=>a.index >4).Any(a=>a.flagTodo) 
```

有什么办法可以在同一个 linq 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:25:57.647

您可以使用[Enumerable.Skip](http://msdn.microsoft.com/en-us/library/bb358985.aspx)按顺序绕过指定数量的元素：

```
bool result = myList.Skip(4).Any(a => a.flagTodo); 
```

**顺便说一句** *，您不需要验证列表长度*- 如果少于 4 个项目，结果将为 false -`Skip(4)`将返回空序列。并`Any`返回`false`，因为序列中的任何元素都不满足条件（序列为空）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T11:26:56.527

您可以跳过前 4 个元素。

```
 bool result = myList.Skip(4).Any(a => a.flagTodo); 
```

但是在调用此语句之前，您需要先检查您的列表长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:30:59.833

像其他人提到的那样使用`Skip`或传递索引，以便您可以在`Any`

```
bool result = myList.Select((obj, index) => new { obj, index })
                    .Any(x => x.index > 4 && x.obj.flagTodo); 
```**

# css - 当文本分成多行时，如何修复有序列表中的行高？

> ID：13931910
> 
> 赞同：4
> 
> 时间：2012-12-18T11:25:14.997
> 
> 标签：css

我有一个有序列表，我使用“行高”来垂直对齐我正在使用的图标/项目符号与右侧的文本。

现在的问题是，当文本很长并且分成多行时，它太靠近了，我找不到修复它的方法。

这是HTML：

```
<ul class="fancy_list">
<li>Value 1</li>
<li>Value 2</li>
<li>Value 3</li>
<li>Value 4</li>
<li>Value 5</li>
</ul> 
```

这是CSS：

```
.fancy_list {
    padding-left: 15px;
    margin-bottom: 15px;
    }

    .fancy_list li {
    list-style: none;
    padding: 0 0 0 22px;
    margin-top: 5px;
    background: url(http://topgreekgyms.fitnessforum.gr/wp-content/themes/gbs-merchant-dashboard/img/red_sprite.png) -462px -164px repeat-y;
    line-height: 15px;
    height: 30px;
    display:block;
    float: left;
    word-spacing: 0.5px;
    letter-spacing: 0.4px;
    } 
```

此外，这里有一个 [链接] 到实际存在问题的页面。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T11:36:06.663

我想出的修复方法如下：

```
.fancy_list li {
     line-height: 1.5em;
     height: auto;
} 
```

实际上，您使用的 line-height 对于您想要的而言太小了。“1.5em”应该更接近您正在寻找的内容。

此外，高度设置为 30 像素，这将迫使列表项在有两行时相互重叠。

希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-22T09:57:24.163

```
.fancy_list li {
 padding-bottom:10px 
```

}

不明白为什么这个答案得到了否定的回应。这样你就可以保持正确的行高，并且能够调整列表项之间的空间。这对我来说非常有效:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-24T14:13:25.940

尝试使用

```
ul {
  white-space: initial;
  margin-bottom: 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-07T07:26:41.987

```
.fancy_list li {
     padding-bottom:10px

} 
```

我想你真的很期待这个

# python - gethostname 和 getfqdn 有什么区别？

> ID：13931924
> 
> 赞同：7
> 
> 时间：2012-12-18T11:26:09.380
> 
> 标签：python, sockets

只是标题，它们之间有什么区别？在 python 中，`socket.gethostbyname(socket.gethostname())`并`socket.gethostbyname(socket.getfqdn())`在我的计算机上返回不同的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T11:33:41.637

从文档中，

`socket.gethostname`返回一个字符串，其中包含 Python 解释器当前正在执行的机器的主机名。

`socket.getfqdn`如果可用或其他情况，则返回完全限定的域名`gethostname`。

完全限定域名是指定其在 DNS 树层次结构中的确切位置的域名。从维基百科的例子：

> 例如，给定具有本地主机名 myhost 和父域名 example.com 的设备，完全限定域名是 myhost.example.com。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-10T18:14:48.933

请注意，上面选择的回复**非常**混乱。

YES`socket.getfqdn`将返回一个完全限定的主机名。但是，如果它将是“localhost.localdomain”，那么您可能实际上想要的是`socket.gethostname`，这样您就可以得到一些有用的东西。

不同之处在于一个读取内核节点名`/etc/hostname`，`/etc/domainname`而另一个读取内核节点名。根据您的发行版、配置、操作系统等，您的里程会**有所**不同。

这意味着您通常要先检查`socket.getfqdn`，并验证它是否返回 'localhost.localdomain'。如果是这样，请`socket.gethostname`改用。

最后，python 也有`platform.node`它与 python 上的基本相同`socket.gethostname`，尽管这可能是多平台代码的更好选择。

这是一个相当重要的细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:28:39.113

主机名不是完全限定的域名，因此它们返回不同的结果。

`getfqdn()`将返回**完全限定的域名**，而`gethostname()`将返回**主机名**。

# linux - 意外的令牌 fi

> ID：13931929
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:26:23.640
> 
> 标签：linux, bash

```
#!/bin/bash
array=($1 $2 $3 $4)
if [ "$#" -ne 4 ]; then 
echo "Please enter Names"
else
for i in 1 2 3 4 5 
do 
echo "Welcome $i times"
done
echo "The Name is: "
fi 
```

我在 shell 脚本中遇到语法错误：`Unexpected token fi`. 请指导我在脚本中做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:34:18.047

你的脚本对我有用，在`GNU bash, version 4.2.39`：

```
$ ./test A B C D
Welcome 1 times
Welcome 2 times
Welcome 3 times
Welcome 4 times
Welcome 5 times
The Name is: 
```

```
$ cat test
#!/bin/bash
array=($1 $2 $3 $4)
if [ "$#" -ne 4 ]; then 
echo "Please enter Names"
else
for i in 1 2 3 4 5 
do 
echo "Welcome $i times"
done
echo "The Name is: "
fi 
```

# php - PHP 类或函数或将北爱尔兰东向和北向转换为纬度和经度

> ID：13931933
> 
> 赞同：2
> 
> 时间：2012-12-18T11:26:39.460
> 
> 标签：php, geocoding

我有一些北爱尔兰邮政编码的数据，每个邮政编码都有东向和北向。有谁知道我可以在 PHP 中使用的类或函数将它们转换为纬度和经度值？或者有谁知道这些数据是否已经存在于具有纬度和经度值的任何地方？

我找到了一个很好的类来将东向和北向转换为纬度和经度，但它只适用于英国。北爱尔兰有一个单独的地图网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:01:43.360

是的，存在很多邮政编码 + 地理位置类。在[phpclasses 网站上查看](http://phpclasses.org)

但直接在这里的项目：

*   [城市查询器](http://www.phpclasses.org/package/2959-PHP-Lookup-for-cities-and-zip-codes-using-AJAX.html)
*   [主要距离](http://www.phpclasses.org/package/522-PHP-Locate-near-zip-codes-and-distance-between-them.html)
*   [地理距离和纬度/经度。](http://www.phpclasses.org/package/4938-PHP-Retrieve-geographical-location-for-given-zip-codes.html)

# java - 从字符串构建 JTree

> ID：13931934
> 
> 赞同：1
> 
> 时间：2012-12-18T11:26:42.000
> 
> 标签：java, string, swing, jtree, treenode

我有两个字符串 node1/node2/node3/node4" 和 "node1/node2/node5/node6"....如何`JTree`从这些字符串中构建一个 ONE？这是我构建一个字符串的代码....

```
import java.awt.*;  
import java.util.ArrayList;

import javax.swing.*;  
import javax.swing.tree.*;  

public class PathTest  
{  
    public PathTest()  
    {  

    DefaultMutableTreeNode   node = buildNodeFromString();   

        DefaultTreeModel model = new DefaultTreeModel(node);  
        JTree tree = new JTree(model);  
        JFrame f = new JFrame();  
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  
        f.add(tree);  
        f.setSize(300,300);  
        f.setLocation(200,200);  
        f.setVisible(true);  
    }  

private DefaultMutableTreeNode buildNodeFromString() {

String qqq= "node1/node2/node3/node4";
DefaultMutableTreeNode node, lastNode = null, root = null;

    String[] s = qqq.split("/");
    for (String str : s) {
    node = new DefaultMutableTreeNode(str);     
    if (root == null)
        root = node;
    if (lastNode != null)
        lastNode.add(node);
    lastNode = node;
    }

return root;
}

    public static void main(String[] args)  
    {  
        new PathTest();  
    }  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:49:33.320

```
for (String str : s) {
    node = new DefaultMutableTreeNode(str);     
    if (root == null)
         root = node;
    if (lastNode != null)
        lastNode.add(node);
    lastNode = node;
} 
```

在代码片段中，不是创建新的 DefaultMutableTreeNode 实例，而是检查 lastNode 是否已经有一个同名的子节点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T07:46:11.537

试试看，这段代码为树创建了一个根，然后开始在它下面添加字符串，如果你不想显示那个根，只需调用`tree.setRootVisible(false);`

```
import java.util.Enumeration;

import javax.swing.JFrame;
import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;

public class PathTest {
    public PathTest() {
        // Create the root node, I'm assuming that the delimited strings will have
        // different string value at index 0
        DefaultMutableTreeNode root = new DefaultMutableTreeNode("ROOT");

        // Create the tree model and add the root node to it
        DefaultTreeModel model = new DefaultTreeModel(root);

        // Create the tree with the new model
        JTree tree = new JTree(model);

        // Build the tree from the various string samples
        buildTreeFromString(model, "Node 1/Node 2/Node 3/Node 4");
        buildTreeFromString(model, "Node 1/Node 2/Node 3/Node 5");
        buildTreeFromString(model, "Node 1/Node 2/Node 3/Node 6");
        buildTreeFromString(model, "Node 1/Node 2/Node 4/Node 5");
        buildTreeFromString(model, "Node 1/Node 1/Node 3/Node 5");

        // UI
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(tree);
        f.setSize(300, 300);
        f.setLocation(200, 200);
        f.setVisible(true);
    }

    /**
     * Builds a tree from a given forward slash delimited string.
     * 
     * @param model The tree model
     * @param str The string to build the tree from
     */
    private void buildTreeFromString(final DefaultTreeModel model, final String str) {
        // Fetch the root node
        DefaultMutableTreeNode root = (DefaultMutableTreeNode) model.getRoot();

        // Split the string around the delimiter
        String [] strings = str.split("/");

        // Create a node object to use for traversing down the tree as it 
        // is being created
        DefaultMutableTreeNode node = root;

        // Iterate of the string array
        for (String s: strings) {
            // Look for the index of a node at the current level that
            // has a value equal to the current string
            int index = childIndex(node, s);

            // Index less than 0, this is a new node not currently present on the tree
            if (index < 0) {
                // Add the new node
                DefaultMutableTreeNode newChild = new DefaultMutableTreeNode(s);
                node.insert(newChild, node.getChildCount());
                node = newChild;
            }
            // Else, existing node, skip to the next string
            else {
                node = (DefaultMutableTreeNode) node.getChildAt(index);
            }
        }
    }

    /**
     * Returns the index of a child of a given node, provided its string value.
     * 
     * @param node The node to search its children
     * @param childValue The value of the child to compare with
     * @return The index
     */
    private int childIndex(final DefaultMutableTreeNode node, final String childValue) {
        Enumeration<DefaultMutableTreeNode> children = node.children();
        DefaultMutableTreeNode child = null;
        int index = -1;

        while (children.hasMoreElements() && index < 0) {
            child = children.nextElement();

            if (child.getUserObject() != null && childValue.equals(child.getUserObject())) {
                index = node.getIndex(child);
            }
        }

        return index;
    }

    public static void main(String[] args) {
        new PathTest();
    }
} 
```

希望这可以帮助。

# objective-c - removeItemAtPath 行为异常

> ID：13931935
> 
> 赞同：0
> 
> 时间：2012-12-18T11:26:42.237
> 
> 标签：objective-c, nsdocumentdirectory

我正在尝试使用以下代码从我的应用程序的文档目录中删除一个文件夹：

```
NSString *documentsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
NSString *downloadFolder = [documentsPath stringByAppendingPathComponent:@"downloads"];
NSFileManager *fileManager = [NSFileManager defaultManager];

if ([eraseDevice isEqualToString:@"true"])
{
    if ([fileManager removeItemAtPath:downloadFolder error:NULL] == YES)
        NSLog(@"downloads folder deleted");
    else
        NSLog(@"erase downloads failed");
} 
```

调用时，控制台会打印`downloads folder deleted`，但目录仍然存在。

有人可以告诉我上面的代码有什么问题或如何删除有问题的文件夹吗？谢谢。

-编辑以添加文档路径和下载文件夹的 NSLogs-

```
/Users/User/Library/Application Support/iPhone Simulator/6.0/Applications/6C785921-89B8-49C9-8BFC-06564B95C72C/Documents
/Users/User/Library/Application Support/iPhone Simulator/6.0/Applications/6C785921-89B8-49C9-8BFC-06564B95C72C/Documents/downloads 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:19:22.633

1）目录是空的吗？不确定这是否有区别，但只是想检查一下。2）当你`removeItemAtPath:error:`在线路上断点时，你看到文件夹被删除，还是你以后才检查？

# junit4 - Spring WS + JAXB 测试

> ID：13931936
> 
> 赞同：3
> 
> 时间：2012-12-18T11:26:45.483
> 
> 标签：junit4, spring-ws

我正在尝试为简单的 Enpoint Web 服务编写 junit 测试：

```
@Endpoint
public class TestWS {

  @PayloadRoot(localPart = "GetAllPlayersRequest", namespace = NAMESPACE_URI)
  public @ResponsePayload GetAllPlayersResponse handleGetAllPlayersRequest() {
        ...
  }
} 
```

我的测试看起来像：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:**/tb-ws-servlet.xml" })
public class TeambridgeWSTest extends AbstractWebServiceServerTest {

  private MockWebServiceClient client;

  @Autowired
  public void setApplicationContex(ApplicationContext applicationContext) {
      client = createClient(applicationContext);
  }

  @Test
  public void shouldReturnAllPlayers() throws Exception {
      ParametrizableRequestCreator message = withMessage("GetAllPlayersRequest.xml");
      client.sendRequest(message).andExpect(message("messages="GetAllPlayersResponse.xml"));
  }

} 
```

和 GetAllPlayersRequest.xml：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://ws.tb.company.com/schemas">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:GetAllPlayersRequest/>
   </soapenv:Body>
</soapenv:Envelope> 
```

我不知道为什么我得到

```
No endpoint mapping found for [SaajSoapMessage  http://ws.tb.company.com/schemas}GetAllPlayersRequest] 
```

我在 Spring 方面经验丰富，但在 Spring WS 中仍然是新手。你对我的问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:33:44.573

NAMESPACE_URI 的值是多少？我想是：

```
private static final String NAMESPACE_URI = "http://ws.tb.company.com/schemas"; 
```

您还使用注释驱动配置了 Spring Web 服务 XML 文件，不是吗？

```
<context:component-scan base-package="your.package.here"/>

<sws:annotation-driven/> 
```

# joomla2.5 - 多张图片没有显示在前端 dermart2 中？

> ID：13931941
> 
> 赞同：0
> 
> 时间：2012-12-18T11:27:09.227
> 
> 标签：joomla2.5, virtuemart

我正在使用 Joomla 2.5.8 和美德集市 2.0.14，我将多张图片上传到美德集市中的一个产品，但它只显示单张图片而不是显示多张图片。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T09:42:19.343

我不太明白你的问题，但是一旦发生类似的事情——我上传了更多产品的照片，但是当我在前端查看它的细节时，只有一张图片。愚蠢的原因是我正在寻找另一种产品，而不是为它添加额外的图像。

但是，我强烈建议您查看 Joomla Extensions 并为它下载一个插件。

[http://extensions.joomla.org/extensions/extension-specific/virtuemart-extensions](http://extensions.joomla.org/extensions/extension-specific/virtuemart-extensions)

# iphone - 从数据库中获取纬度和经度的浮点值

> ID：13931947
> 
> 赞同：-1
> 
> 时间：2012-12-18T11:27:31.640
> 
> 标签：iphone

我正在尝试获取存储在我的数据库中的某些区域的纬度和经度，并将它们存储在一个数组中。我必须将值存储为浮点类型。我通过以下代码获得其他值：

```
NSString *walkQuery = [[NSString alloc] initWithFormat:@"SELECT Wid,WName,SName,Latitude,Longitude from Walks,SubRegions WHERE Walks.Sid=SubRegions.Sid AND Rid = %d",[regionId integerValue] ];

        sqlite3_stmt *walkstatement = nil;

        if (sqlite3_prepare_v2(walkNameDB,[walkQuery UTF8String], -1, &walkstatement, nil) == SQLITE_OK)
        {
            while( sqlite3_step(walkstatement) == SQLITE_ROW )
            {
                NSNumber *WId;
                int temp1 = (int)sqlite3_column_int(walkstatement, 0);
                WId = [[NSNumber alloc] initWithInt:temp1];

                char *WNameCharacter;
                WNameCharacter = (char *) sqlite3_column_text(walkstatement, 1);
                NSString *WNameString = [[NSString alloc] initWithUTF8String:WNameCharacter];

                char *SNameCharacter;
                SNameCharacter = (char *) sqlite3_column_text(walkstatement, 2);
                NSString *SNameString = [[NSString alloc] initWithUTF8String:SNameCharacter];

                NSMutableDictionary *tempWalk = [[NSMutableDictionary alloc] init];
                [tempWalk setObject:WId forKey:@"WalkId"];
                [tempWalk setObject:WNameString forKey:@"WalkName"];
                [tempWalk setObject:SNameString forKey:@"SubRegionName"];
                [regionWalkArray addObject:tempWalk]; 
```

他们有什么方法可以让我获得纬度和经度的两个浮点值，就像我在我的代码中所做的那样？

请建议....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:34:54.583

您可以使用：

```
 float latitude  = (float) sqlite3_column_double(walkstatement, 3);
 float longitude = (float) sqlite3_column_double(walkstatement, 4); 
```

并且可以存储在字典中，例如：

```
[tempWalk setObject:[NSNumber numberWithFloat:latitude] forKey:@"latitude"];
[tempWalk setObject:[NSNumber numberWithFloat:longitude] forKey:@"longitude"]; 
```

您可以像这样检索它：

```
float latitude = [[tempWalk objectForKey:@"latitude"] floatValue];
float longitude = [[tempWalk objectForKey:@"longitude"] floatValue]; 
```

# java - 调整 JPanel 大小以适应新的 JLabel 图标

> ID：13931948
> 
> 赞同：3
> 
> 时间：2012-12-18T11:27:35.997
> 
> 标签：java, swing, jlabel, autoresize

我正在尝试通过反复更改`JLabel`. 问题是图像的大小不同，当它们大于第一张图像的大小时，它们会被剪裁。

解决此问题的一种方法是设置 PreferredSize`JLabel`以便所有图像都适合 - 但我想必须有一种方法可以动态调整`JPanel`包含`JLabel`?

在下面的代码中，我也尝试过删除所有`JLabel`内容，创建一个新的，然后添加新的，但效果相同。

```
public class AnimationPanelv2 extends JPanel{

private JButton start = new JButton("Start Animation");
private JLabel img = new JLabel();
private JTextField animSpeed = new JTextField(10);
private JTextField filePrefix = new JTextField(10);
private JTextField noOfImg = new JTextField(10);
private JTextField audioFile = new JTextField(10);
private Timer timer;
private AudioClip clip;
private ArrayList<ImageIcon> icon = new ArrayList<>();
private int step=0;

public AnimationPanelv2() {

    //button is for starting the animation
    start.addActionListener(new Animatie());

    this.setLayout(new BorderLayout());
    add(start, BorderLayout.NORTH);

    //showing the label with the first frame
    Class metaObj = this.getClass();
    URL url = metaObj.getResource("/image/L1.gif");

    img.setIcon(new ImageIcon(url));
//      img.setPreferredSize(new Dimension(500,550));
    add(img, BorderLayout.CENTER);

    //control panel
    JPanel controls = new JPanel(new GridLayout(4,2));

    controls.setBorder(new TitledBorder("Enter information for animation"));

    controls.add(new JLabel("Animation speed in ms"));
    controls.add(animSpeed);
    controls.add(new JLabel("Image file prefix"));
    controls.add(filePrefix);
    controls.add(new JLabel("Number of images"));
    controls.add(noOfImg);
    controls.add(new JLabel("Audio file"));
    controls.add(audioFile);

    //
    add(controls, BorderLayout.SOUTH);
}
private class TimerAnimation implements ActionListener {

    public void actionPerformed(ActionEvent e) {

        remove(img);

        img = new JLabel(icon.get(step++));
        img.setVisible(true);
        add(img, BorderLayout.CENTER);

//          img.revalidate();
//          img.repaint();

        validate();
        repaint();
        updateUI();
        if (step==Integer.parseInt(noOfImg.getText())) step=0;
    }

}
private class Animatie implements ActionListener {

    public void actionPerformed(ActionEvent e) {

        //getting data from the text fields
        int ms = Integer.parseInt(animSpeed.getText());
        String s = filePrefix.getText();
        int nr = Integer.parseInt(noOfImg.getText());
        String audioFilePath = audioFile.getText();

        // clip
        Class metaObj = this.getClass();
        URL url = metaObj.getResource("/audio/"+audioFilePath);
        clip = Applet.newAudioClip(url);

        //image loading
        for (int i=1; i<=nr; i++){
            url = metaObj.getResource("/image/"+s+i+".gif");
            System.out.println("/image/"+s+i+".gif");
            icon.add(new ImageIcon(url));
        }

        //timer
        timer = new Timer(ms, new TimerAnimation());
        timer.start();
        clip.loop();
    }
}

public static void main(String[] args) {

    JFrame jf = new JFrame("This class test");
    jf.setLocationRelativeTo(null);
    jf.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    jf.add(new AnimationPanelv2());
    jf.pack();
    jf.setVisible(true);
}
} 
```

这整个面板将在一个小程序中使用。

这是截图：[http ://screencast.com/t/UmqQFZHJVy](http://screencast.com/t/UmqQFZHJVy)

应该是帧的图像应该位于 /images/ 子目录中，如果用户输入**n**作为帧数，输入 F 作为图像前缀，则文件为 F1、F2 等, 到 Fn (GIF)。声音文件应该在 /audio/ 子目录中，整个文件名由用户给出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:49:28.153

好吧，a`JLabel`应该自动调整到其给定内容的大小，因此要解决 JPanel 问题，只需根据大小覆盖`getPreferredSize()`包含`JPanel`并`JLabel`返回s 。`Dimension``JLabel`

```
public class MyPanel extends JPanel {
JLabel label=...;

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(label.getWidth(),label.getHeight());
    }

} 
```

`JLabel`当您更改呼叫图标`revalidate()`和实例时，也不要忘记以反映`repaint()`大小`JPanel`更改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T11:37:52.503

您可以尝试`JLabels`为每个图像创建列表，将它们添加到面板中`CardLayout`并交换卡片。

# jquery - 如何将参数从日期选择器显示模式传递到信息显示模式

> ID：13931949
> 
> 赞同：1
> 
> 时间：2012-12-18T11:27:39.143
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker, zurb-foundation

我正在使用 Foundation Reveal 模式首先显示包含突出显示日期的日历的 Reveal，然后显示第二个 Reveal，其中包含有关在所选日期运行的事件的一段信息。在第二次展示中，连同有关事件的信息，我还想显示被选中的日期。

如何将所选日期从日历模式传递到信息模式？

我已经检查了有关 Reveal 的基础文档，但我没有看到这个选项： http: [//foundation.zurb.com/docs/reveal.php](http://foundation.zurb.com/docs/reveal.php)

我也看过 jQuery.data() [http://api.jquery.com/data/](http://api.jquery.com/data/)

我尝试在我的代码中使用 jQuery.data()，但日期参数没有被传递给信息显示 - 我在运行代码时收到错误“$ 未定义”。

html提取：

```
<div id="roseBasicInfoModal" class="reveal-modal"> 
  <h2>Rose Tinted Cupcakes - rose making class</h2>
  <p>
    You've seen those show stopping roses on the TV and in baking books and now you'd like to master them yourself!? In this class you will learn how to make a selection of roses suitable to adorn cupcakes and large cakes, both with and without cutters, from the impressive large bloom to the delicate small detail.
  </p>
  <p>
    During the 3 hour course... etc. etc.
  </p>
  <script>
    document.write("Date: " + $('roseBasicInfoModal').data('selectedDate')); //not working - doesn't display anything - error '$ is undefined' ??
  </script>

  <a class="round button" href="#" data-reveal-id="roseFullDetailsModal" data-animation="fadeAndPop" data-size="xlarge">Full Details</a>
  <a data-reveal-id="calendarModal" class="round button" href="#">Back</a>
  <a class="close-reveal-modal">Ã—&lt;/a>
</div> 
```

和 javascript：

```
<script>

$(function() {

  var class_dates = {'2012/12/4':'1st class' , '2012/12/20':'2nd class'};

  $("#datepicker").datepicker({
    beforeShowDay: function(date) {  // function to highlight dates of classes
      var search = date.getFullYear() + "/" + (date.getMonth() + 1) + "/" + (date.getDate());

      if (class_dates[search]) 
      {
        return [true, 'highlight', class_dates[search] || ''];
      }

      return [false, '', ''];
    },

    onSelect: function(dateText, inst) // function to show basic info when date selected 
    {
      if (dateText == '04-12-2012') //display different class info depending on the date
      {
       $("#roseBasicInfoModal").reveal({ "open": function () {$("#roseBasicInfoModal").data('selectedDate', dateText);  } }); //attempt to make selected date available to roseBasicInfoModal div - not working!!
      } 
      if (dateText == '20-12-2012')
      {
       $("#startfinishBasicInfoModal").reveal({ "open": function () { alert("Date is: " + dateText) } }); //playing with 'open' option
      }
    }

  });
});

$(function() {
  $( "#datepicker" ).datepicker( "option", "dateFormat", "dd-mm-yy" ); //set date format for parsing and displaying dates
});

// Hover states on the static widgets
$( "#dialog-link, #icons li" ).hover(
  function() {
    $( this ).addClass( "ui-state-hover" );
  },
  function() {
    $( this ).removeClass( "ui-state-hover" );
  }
); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:05:34.557

我设法使用 datepicker 的 altField 选项来做到这一点，如 API 文档中所述：http: [//api.jqueryui.com/datepicker/#option-altField](http://api.jqueryui.com/datepicker/#option-altField)

我最初放弃了这个选项，因为我不想显示输入字段。但是，由于我看不到任何其他方法可以将日期从日历获取到信息模式，因此我决定使用此方法并使用 CSS 对其进行样式设置，以便日期看起来不像输入字段，并且还指定只读在 HTML 中，以便用户无法编辑日期。

JavaScript：

```
$(function() {

$( "#datepicker" ).datepicker( "option", "dateFormat", "dd-mm-yy" ); //set date format for parsing and displaying dates
$( "#datepicker" ).datepicker( "option", "altField", ".displayDate" ); //pass date to display in modal for class info
$( "#datepicker" ).datepicker( "option", "altFormat", "DD, dd-mm-yy" ); //display date in long format including day of the week

}); 
```

HTML：

```
<p><b>Date: <input type="text" class="displayDate" readonly /></b></p> 
```

CSS：

```
input.displayDate
{
width: 50%;
display: inline;
border:none;
box-shadow:none;
font-weight:bold;
font-family:inherit;
color: black;
} 
```

# ios - 将图像添加到 UILabel 的左侧

> ID：13931957
> 
> 赞同：4
> 
> 时间：2012-12-18T11:28:03.063
> 
> 标签：ios, cocoa-touch

我想我有这个相对简单的问题。想象一下，我有一个`UILabel`包含一些文字的内容。然后，我希望在文本的左侧或右侧也显示（添加）图像。

像这样的东西：

[http://www.zazzle.com/blue_arrow_button_left_business_card_templates-240863912615266256](http://www.zazzle.com/blue_arrow_button_left_business_card_templates-240863912615266256)

有没有办法做到这一点，使用，说`UILabel`方法？我没有找到这样的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-28T23:49:31.970

以防万一其他人将来查找此内容。我会继承 UIlabel 类并添加一个图像属性。

然后您可以覆盖 text 和 image 属性的设置器。

```
- (void)setImage:(UIImage *)image {
    _image = image;

    [self repositionTextAndImage];
}

- (void)setText:(NSString *)text {
    [super setText:text];

    [self repositionTextAndImage];
} 
```

在 repositionTextAndImage 中，您可以进行定位计算。我粘贴的代码，只是在左边插入一个图像。

```
- (void)repositionTextAndImage {
    if (!self.imageView) {
        self.imageView = [[UIImageView alloc] init];
        [self addSubview:self.imageView];
    }

    self.imageView.image = self.image;
    CGFloat y = (self.frame.size.height - self.image.size.height) / 2;
    self.imageView.frame = CGRectMake(0, y, self.image.size.width, self.image.size.height);
} 
```

最后，覆盖 drawTextInRect: 并确保在标签左侧留出空间，使其不会与图像重叠。

```
- (void)drawTextInRect:(CGRect)rect {
    // Leave some space to draw the image.
    UIEdgeInsets insets = {0, self.image.size.width + kImageTextSpacer, 0, 0};
    [super drawTextInRect:UIEdgeInsetsInsetRect(rect, insets)];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:50:42.187

创建一个包含 UIImageView 和 UILabel 子视图的自定义 UIView。您必须在其中执行一些几何逻辑来调整标签的大小以适合左侧或右侧的图像，但它不应该太多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:50:48.467

使用您的图像创建一个 UIImageView 并在顶部添加 UILabel

```
[imageview addSubView:label]; 
```

根据您需要的位置设置标签的框架。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-04T07:24:44.233

我刚刚在我的 Live Project 中实现了类似的东西，希望它会有所帮助。

```
-(void)setImageIcon:(UIImage*)image WithText:(NSString*)strText{

    NSTextAttachment *attachment = [[NSTextAttachment alloc] init];
    attachment.image = image;
    float offsetY = -4.5; //This can be dynamic with respect to size of image and UILabel
    attachment.bounds = CGRectIntegral( CGRectMake(0, offsetY, attachment.image.size.width, attachment.image.size.height));

    NSMutableAttributedString *attachmentString = [[NSMutableAttributedString alloc] initWithAttributedString:[NSAttributedString attributedStringWithAttachment:attachment]];
    NSMutableAttributedString *myString= [[NSMutableAttributedString alloc] initWithString:strText];

    [attachmentString appendAttributedString:myString];

    _lblMail.attributedText = attachmentString;
} 
```

# java - Integer 对象是如何创建的？

> ID：13931962
> 
> 赞同：1
> 
> 时间：2012-12-18T11:28:23.517
> 
> 标签：java

> **可能重复：**
> [!= 和 == 运算符如何处理 Java 中的整数？](https://stackoverflow.com/questions/9824053/how-and-operators-work-on-integers-in-java)

整数 i1 = 1000；整数 i2 = 1000；

if(i1 == i2) 返回 false。究竟发生了什么，它是如何在这里检查这种情况的？

如果条件为真，如果我在 i1 和 i2 中分配的值都小于 128。对象是如何在这里创建的，它是所有值的共同点还是不同的？有人可以澄清这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:30:27.170

> 如果我在 i1 和 i2 中分配小于 128 如果条件为真

是的，发生这种情况是因为对于该范围，Java 使用享元模式并缓存`Integer`对象，因此您获得缓存版本的支持并且`==`可以工作
这是可能的，因为`Integer`对象是不可变的，并且缓存仅适用于该范围`[-128,127]`

# android - 如何在 Android 4.1 及更高版本中支持德语字符？

> ID：13931966
> 
> 赞同：2
> 
> 时间：2012-12-18T11:28:26.763
> 
> 标签：android

我正在开发一个简单的应用程序，我必须在其中显示一些德语文本；它在 Android 2.3 到 Android 4.0 中运行良好，但是当我在 Android 4.1 (Jelly Bean) 上进行测试时，它不再工作了。

我有一个 WebView，我通过`loadData`方法设置数据。请看下面的代码：

```
WebView mWebView = (WebView)findViewById(R.id.MyWebView);
String chararc = "Ä Ö Ü ä ö ü";
mWebView.getSettings().setDefaultTextEncodingName("UTF-8");
mWebView.loadData(chararc, "text/html", "UTF-8"); 
```

这里我附上了Android 2.3.1和Android 4.1的截图： ![在此处输入图像描述](../Images/d82e6d42dcb9805c6f632cdd30ad16c0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:37:26.313

嗨，我知道了。这是解决方案，我相信它会起作用。

```
 WebView mWebView = (WebView)findViewById(R.id.MyWebView);

   String chararc = "Ä Ö Ü ä ö ü";

   mWebView.getSettings().setDefaultTextEncodingName("UTF-8");

   mWebView.loadData(chararc, "text/html; charset=UTF-8",null); 
```

# java - 如何用 Apache POI 替换 PPT 演示文稿中的图像

> ID：13931967
> 
> 赞同：1
> 
> 时间：2012-12-18T11:28:36.853
> 
> 标签：java, image-processing, powerpoint, apache-poi

我想知道，是否有任何方法可以通过[Apache POI](http://poi.apache.org/)替换 ppt 演示文稿中的图像？

我有一个模板，其中放置了元素（文本字段和图像），我发现了如何替换文本，但没有找到任何图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T00:08:44.903

替换图像可以通过两种方式完成：

只需在路径 (/ppt/media) 下替换 pptx-file 中的图像，这是一个 zip 文件。看看这篇[文章](https://stackoverflow.com/questions/13787318/java-util-zip-replace-a-single-zip-file)怎么做..

或者 POI 方法是删除文件并添加一个新文件......并且可能会更改一些其他图像属性（宽度，高度，......） - 请参阅下面的示例

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.OutputStream;

import javax.xml.namespace.QName;

import org.apache.poi.openxml4j.opc.PackagePart;
import org.apache.poi.openxml4j.opc.PackagePartName;
import org.apache.poi.openxml4j.opc.PackageRelationship;
import org.apache.poi.openxml4j.opc.PackagingURIHelper;
import org.apache.poi.openxml4j.opc.TargetMode;
import org.apache.poi.xslf.usermodel.XMLSlideShow;
import org.apache.poi.xslf.usermodel.XSLFSheet;
import org.apache.xmlbeans.XmlCursor;

public class ReplaceImageInPptx {
    public static void main(String[] args) throws Exception {
        FileInputStream fis = new FileInputStream("test2.pptx");
        XMLSlideShow pptx = new XMLSlideShow(fis);
        fis.close();

        String blipNS[] = {
            "http://schemas.openxmlformats.org/drawingml/2006/main",
            "http://schemas.openxmlformats.org/presentationml/2006/main"
        };

        for (XSLFSheet slide : pptx.getSlides()) {
            PackagePart packPart = slide.getPackagePart();

            for (String ns : blipNS) {
                XmlCursor picCur = slide.getXmlObject().newCursor();
                picCur.selectPath("declare namespace p='"+ns+"' .//p:blip"); // or blipFill

                while (picCur.toNextSelection()) {

                    // ... doesn't work for all namespaces ...
                    // CTBlipFillProperties blipFill = (CTBlipFillProperties)picCur.getObject();
                    // CTBlip blip = blipFill.getBlip();
                    // String relId = blip.getEmbed();
                    QName relName = new QName("http://schemas.openxmlformats.org/officeDocument/2006/relationships", "embed");
                    String relId = picCur.getAttributeText(relName);

                    // remove old media file and reference
                    PackageRelationship packRel = packPart.getRelationship(relId);
                    PackagePartName oldPartName = PackagingURIHelper.createPartName(packRel.getTargetURI());
                    packPart.getPackage().removePart(oldPartName);

                    // add something new
                    PackagePartName partName = PackagingURIHelper.createPartName("/ppt/media/smiley.jpg");
                    PackagePart part = pptx.getPackage().createPart(partName, "image/jpeg");
                    OutputStream partOs = part.getOutputStream();
                    FileInputStream fis2 = new FileInputStream("src/test/resources/smiley.jpg");
                    byte buf[] = new byte[1024];
                    for (int readBytes; (readBytes = fis2.read(buf)) != -1; partOs.write(buf, 0, readBytes));
                    fis2.close();
                    partOs.close();

                    PackageRelationship prs = slide.getPackagePart().addRelationship(partName, TargetMode.INTERNAL, "http://schemas.openxmlformats.org/officeDocument/2006/relationships/image");
                    // blip.setEmbed(prs.getId());
                    picCur.setAttributeText(relName, prs.getId());

                    // maybe change the size a bit
                    // blipFill.getStretch().getFillRect().setL(<left padding in % (+/-)>)
                }

                picCur.dispose();
            }
        }

        FileOutputStream fos = new FileOutputStream("test3.pptx");
        pptx.write(fos);
        fos.close();
    }
} 
```

# ios - AIR for iOS - 在滑动手势期间触发鼠标点击

> ID：13931970
> 
> 赞同：1
> 
> 时间：2012-12-18T11:28:45.843
> 
> 标签：ios, ios5, air, gesture, swipe-gesture

我正在开发一个 AIR for iOS 应用程序。我一直面临滑动手势的问题。我需要将滑动效果应用于包含子显示对象的影片剪辑。（就像带有多个剪辑的电影片段）。

这些子显示对象需要是可点击的，因此我为它们添加了鼠标点击监听器。此外，我需要使用滑动手势滚动父影片剪辑，因此我已将滑动手势侦听器添加到父影片剪辑。但是我面临的问题是每次我试图通过在父影片剪辑上滑动手指来滑动它时，子显示对象（在手指下方）的鼠标点击事件就会被触发。

我需要一种方法来防止在滑动父影片剪辑时发生鼠标点击。

我正在使用以下设置 -

Flash Professional CS6 AIR SDK 3.5

我真的很感激在这方面的任何帮助，因为我似乎无法解决这个问题。

提前致谢。

# c++ - LLVM 引用了一个不存在的标头

> ID：13931976
> 
> 赞同：6
> 
> 时间：2012-12-18T11:29:08.073
> 
> 标签：c++, llvm

我从 SVN 下载了 LLVM 和 Clang，构建了它们，并编写了一个小示例程序。但是，LLVM 标头 ( `llvm/support/type_traits.h`) 似乎包含另一个 LLVM 标头 ，`llvm/support/DataTypes.h`它不存在。我检查了 LLVM 网站上的文档，他们似乎也不认为它应该存在。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:52:21.460

一些文件会自动生成到构建目录中。在编译程序以将 LLVM 用作库时，请始终使用该`llvm-config`工具为您提供正确的头目录和库目录以进行链接。我有这个`Makefile`：

```
LLVM_CONFIG_COMMAND = `$(LLVM_BIN_PATH)/llvm-config --cxxflags --libs` \
                      `$(LLVM_BIN_PATH)/llvm-config --ldflags` 
```

我在编译器命令行上使用它。

```
LLVM_BIN_PATH = $(LLVM_BUILD_PATH)/Debug+Asserts/bin 
```

`LLVM_BUILD_PATH`你运行的路径在哪里，`configure`其余的取决于你构建的版本（我通常使用 Debug+Asserts 来破解 LLVM 内部）。

# build - 如何构建tizen源？

> ID：13931977
> 
> 赞同：4
> 
> 时间：2012-12-18T11:29:13.580
> 
> 标签：build, tizen

我已经从他们的网站下载了所有 tizen OS 的源代码。它由大约 1040 个项目组成。现在我想构建整个项目。在他们的网站上，他们提到我们必须使用 gbs（git build system）来构建源代码。正如他们所说，我已经设置了配置文件并尝试构建。但是我无法构建，并且收到了类似的消息。

`"fatal: ref HEAD is not a symbolic ref"`

当它尝试构建所有 x86 包时，我遇到了错误。我没有修改 tizen 代码，但我仍然收到这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-13T15:49:36.263

这是因为您的工作分支名称是 (nobranch)，请在您的存储库中签出以更正/现有的分支。

使用检查您的分支

```
git branch 
```

它会告诉你**没有分支**

签出要使用的正确分支

```
git checkout branchname 
```

而且您不能使用 gbs 构建**x86** pkgs，但您可以使用 gbs 构建**i586**或**armv7l** pkgs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T23:40:09.663

您需要使用 repo 下载整个软件包集，然后使用 gbs 沿着配置文件 repo 构建正确的分支（即：tizen）...

如果配置文件支持，或者考虑使用 yocto 构建

# html - 悬停的文本字段在 IE 中无法正常工作

> ID：13931981
> 
> 赞同：8
> 
> 时间：2012-12-18T11:29:19.957
> 
> 标签：html, css, internet-explorer

我在 IE 中开发时遇到了问题，我制作了一个很棒的标题，但现在我在 Internet Explorer 中检查了所有内容，发现了一些错误，

一个是下面的，我从来没有过这样的事情，这就是为什么我对这个问题非常着迷。我什至不确定是否有人知道如何解决这个问题，接受挑战！

我知道占位符在 IE 中不起作用，但这显然不是问题。如果您处于悬停状态，并且您正在浏览文本字段，则该框会消失，您需要再次浏览它。

这里有一些代码：

```
<ul>
    <div class="transparant">
        <div class="dropbox">
            <div class="login">
                <div class="textfield">
                     <form method="post">
                       <input id="textfield_post" type="text" name="username" placeholder="Gebruikersnaam" class="matrix"/>    
                </div>
            </div>

            <div class="pass">
                <div class="textfield">
                    <input id="textfield_post" type="password" name="password" placeholder="Wachtwoord" class="matrix"/>   
                </div>
            </div>

            <div class="loginbutton">   
                <input type="submit" class="btn" value= "Login" type="button" id="login_button"></form>
            </div>

            <div class="forgotpass">
                <a href="#" onclick="NewPassword()">Forgot password?</A>
            </div>
        </div>
    </div>
    </div>
</ul> 
```

我认为这是因为 z-index。另外，我不想使用 jquery 或任何东西，我只想使用正确的 HTML 和 CSS 来解决问题。

请问大家有没有熟悉这个问题的

网站：（仅在 IE 7&8）

谢谢阅读;）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T11:48:19.560

当您清空文本框时，问题就解决了。我不知道您是否接受这种解决方法，但是嘿，它有效:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T12:08:46.623

我猜您使用`:hover`CSS 或`mouseover()`JQuery 来显示该框。我建议使用`mouseentered()`检查以下链接：

[http://www.mkyong.com/jquery/differ-between-mouseover-and-mouseenter-in-jquery/](http://www.mkyong.com/jquery/different-between-mouseover-and-mouseenter-in-jquery/)

并确保使 ul`overflow:hidden`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T05:35:15.407

IE currently Does not support `Placeholder`.i recommend you to move with `JQuery`. here is the sample code

```
<p><script type="text/javascript">
    $(function () {
        if (!$.support.placeholder) {
            var active = document.activeElement;
            $(':text').focus(function () {
                if ($(this).attr('placeholder') != '' && $(this).val() == $(this).attr('placeholder')) {
                    $(this).val('').removeClass('hasPlaceholder');
                }
            }).blur(function () {
                if ($(this).attr('placeholder') != '' && ($(this).val() == '' || $(this).val() == $(this).attr('placeholder'))) {
                    $(this).val($(this).attr('placeholder')).addClass('hasPlaceholder');
                }
            });
            $(':text').blur();
            $(active).focus();
        }
    });
</script>
</p> 
```

Hope it helps

# android - 保存的首选项在重新启动时不起作用

> ID：13931984
> 
> 赞同：0
> 
> 时间：2012-12-18T11:29:30.023
> 
> 标签：android, button, onclick, sharedpreferences, save

tabhost 中的共享首选项不适用于按钮按下状态。

我正在按下状态下更改按钮的背景。但是当我重新启动（关闭和打开）手机时，共享首选项不会保存状态。

从这里裁判

[tabhost 中按钮按下状态的共享首选项在重新启动时不起作用](https://stackoverflow.com/questions/13913050/shared-preferences-for-button-pressed-state-inside-tabhost-not-working-on-reboot/13913765#comment19206874_13913765)

在调试时，isclick 在 if-else 条件下显示为 true。我不明白这个问题。

当我第一次运行时，我得到了带有突出显示背景的按钮，即使在重新启动时我也得到了相同的突出显示背景。

任何帮助总是受到赞赏。

```
private boolean isclick ;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    seatdirnbtn = (Button) findViewById(R.id.seatdirnbtn);
    prefs = this.getSharedPreferences(prefName, MODE_PRIVATE);

    isclick = prefs.getBoolean("prefName", false);
    System.out.println("bool? " + isclick);

    if (isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
    } else if (!isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4);
    } 
}

@Override
public void onRestart() {
    super.onRestart();

    if (isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4);
    } else if (!isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
    }
}

@Override
public void onStop() {
    super.onStop();

    prefs = this.getSharedPreferences(prefName, MODE_PRIVATE);
    editor = prefs.edit();

    editor.putBoolean("prefName", true);
    editor.commit();
}

private View.OnClickListener listner1 = new View.OnClickListener() {
    public void onClick(View v) {
        if (isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);

            editor = prefs.edit();
            editor.clear();
            editor.putBoolean("prefName", true);
            editor.commit();
        } else if (!isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4);
            editor = prefs.edit();
            editor.clear();
            editor.putBoolean("prefName", false);
            editor.commit();
        }
        isclick = !isclick;
    }
}; 
```

编辑1：

```
 private boolean isclick  ;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    prefs = this.getSharedPreferences(prefName, MODE_PRIVATE);

    isclick = prefs.getBoolean("prefName", true);

    System.out.println("bool? " + isclick);
    Log.i(TAG, " prefname");

    if (isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
    } else if (!isclick) {
        seatdirnbtn.setBackgroundResource(R.drawable.icon4);
    } 

         public void onPause() {
    super.onPause();
    prefs = this.getSharedPreferences(prefName, MODE_PRIVATE);
    // boolean isclick = false;
    editor = prefs.edit();
    // editor.clear();
    editor.putBoolean("prefName", false);
    Log.i(TAG, " prefname");
    editor.commit();
}

@Override
public void onRestart() {
    super.onRestart();
      prefs = this.getSharedPreferences(prefName, MODE_PRIVATE);
        isclick = prefs.getBoolean("prefName", !isclick);

}

@Override
public void onStop() {
    super.onStop();
    getApplicationContext().unbindService(this);

      prefs = this.getSharedPreferences(prefName, MODE_PRIVATE); // boolean
      isclick = false; editor = prefs.edit(); // editor.clear();
      editor.putBoolean("prefName", !isclick); 
      editor.commit();

      }

         private View.OnClickListener listner1 = new View.OnClickListener() {

    public void onClick(View v) {

        if (isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);

            editor = prefs.edit();
            editor.clear();
            editor.putBoolean("prefName", false);
            editor.commit();
            isclick = false;
        } else if (!isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4);
            editor = prefs.edit();
            editor.clear();
            editor.putBoolean("prefName", true);
            editor.commit();
            isclick = true;
        }

    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:42:13.063

尝试使用此**编辑后的解决方案**：

```
public class SharedprefsActivity extends Activity  {

    protected static final String TAG = "HvacActivity";
    /** Called when the activity is first created. */
    private Button seatdirnbtn;
    private SharedPreferences prefs;
    private String prefName = "MyPref";
    private SharedPreferences.Editor editor;
    private boolean isclick;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        seatdirnbtn = (Button) findViewById(R.id.seatdirnbtn);      
        seatdirnbtn.setOnClickListener(listner1);       
    }

    public void onResume() {
        super.onResume();
        getPrefAndButtonState();        
    }

    public void onPause() {
        super.onPause();
        setPrefAndButtonState();
    }

    @Override
    public void onRestart() {
        super.onRestart();
        getPrefAndButtonState();
    }

    @Override
    public void onStop() {
        super.onStop();
        setPrefAndButtonState();
    }

    public void getPrefAndButtonState(){
        prefs = this.getSharedPreferences(prefName, MODE_PRIVATE);
        isclick = prefs.getBoolean("prefName", false);
        System.out.println("bool? " + isclick);
        if (isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4hlt);
        } else if (!isclick) {
            seatdirnbtn.setBackgroundResource(R.drawable.icon4);
        }
    }

    public void setPrefAndButtonState(){
        editor = prefs.edit();
        editor.putBoolean("prefName", isclick);
        editor.commit();        
        getPrefAndButtonState();
    }

    private View.OnClickListener listner1 = new View.OnClickListener() {    
        public void onClick(View v) {   
            if (isclick) {
                isclick = false;
                setPrefAndButtonState();            
            } else if (!isclick) {
                isclick = true;
                setPrefAndButtonState();
            }   
        }
    };
} 
```

我的测试很好，对我来说效果很好。

希望它可以帮助你。

谢谢。

# css - 提交表单时图像消失

> ID：13931986
> 
> 赞同：1
> 
> 时间：2012-12-18T11:29:46.500
> 
> 标签：css, forms, codeigniter, image

我有一个带有社交媒体链接和电子邮件地址的页面上的表单和图标的联系页面。提交表单后，图标/图像会从页面上消失，但是表单会验证并且很好。我正在使用标准的 img 标签和一类 floatLeft。当某人在他们的 css 上使用相对位置但我仍然没有运气时，我找到了一个适用于某人的解决方案。它必须与css有关（至少我认为是）。我曾尝试使用 codeigniters img 片段（我正在使用 CI 框架）并且图像在表单提交时很好，但不确定如何将 CI 图像标签与 P 标签对齐，因为它们似乎彼此下落。

任何有关可能是问题的帮助或链接将不胜感激。

谢谢。

解决：

```
<img src="<?php echo base_url(); ?>assets/images/phone.png" alt="Phone" class="floatLeft"><p>123 456 789</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:53:35.570

你可以简单地把`img`里面`p`：

```
<p><?php echo img('assets/images/phone.png'); ?>Your paragraph here</p> 
```

然后在图像中添加一些右填充以使其从文本中偏移。还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:45:54.130

更改样式如下：

```
img.floatLeft{
    float:left;
    left:-20px;
    position:relative;
}

.contact-info{
    padding:10px 0px 10px 0px;
    height:38px;
    font-size:14px;
    overflow:hidden;
    clear:both;
} 
```

***请确保图像已下载，因为您在图像源中使用了相对链接。***

# javascript - 是否可以在没有 setTimeout 和 ajax 请求的情况下显示加载器图像？

> ID：13931988
> 
> 赞同：0
> 
> 时间：2012-12-18T11:30:02.553
> 
> 标签：javascript, jquery

只需要知道是否可以在不使用 SetTimeout 和 ajax 请求的情况下加载加载程序？

例如：

```
showLoader() ;

Function_that_process();

hideLoader(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:56:38.443

通过这种方式使用jQuery：

```
$(function(){
    showLoader();
    $(window).load(function(){
        hideLoader(); 
        Function_that_process();     
    });    

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:37:06.683

加载器图像只是隐藏在 jquery 回调事件中的标准图像。

如果没有 ajax，你只需按照你所说的去做。在您的 showLoader() 函数中，您显示您想要的图像，执行您想要的任何逻辑，然后在 hideLoader() 上隐藏图像。

然而，问题在于这是同步的，这会锁定你的 UI，通常是个坏主意，这是人们使用 AJAX 的原因，因为调用是异步进行的。这并不是说这样做是错误的，在某些情况下，您的应用程序需要处理某些内容才能继续。

# postgresql - PostgresQL 自动化 VACUUM FULL 用于臃肿的表

> ID：13931989
> 
> 赞同：7
> 
> 时间：2012-12-18T11:30:03.817
> 
> 标签：postgresql, postgresql-9.1, nagios

我们有一个使用 PostgreSQL 数据库服务器的产品，它部署在几百个客户端上。多年来，其中一些已经收集了**数十 GB**的数据。因此，在下一个版本中，我们将引入自动清理程序，该程序将在夜间批处理作业中逐步归档和**删除旧记录。**

如果我理解正确，**autovacuum**将启动并分析和重组元组，因此性能将与存在较少记录时一样。

如果我理解正确，实际的磁盘空间不会被释放，因为这只发生在**VACUUM FULL**中，并且不是由**autovacuum**触发的。

所以我在考虑一个可以做到这一点的自动化流程。

[我在http://wiki.postgresql.org/wiki/Show_database_bloat](http://wiki.postgresql.org/wiki/Show_database_bloat)找到了 nagios check_postgres 使用的膨胀视图。

这种观点有好处吗？我是否正确理解如果**tbloat** > 2，它可以使用 VACUUM FULL？如果**ibloat**太高，它可以使用 REINDEX 吗？

对以下作为每日批处理作业运行的作业有何评论？

*   `vacuumdb -Z mydatabase`#vacuum 仅分析
*   `select tablename from bloatview order by tbloat desc limit 1`
*   `vacuumdb -f -t tablename mydatabase`
*   `select tablename, iname from bloatview order by ibloat desc limit 1`
*   `reindexdb -t tablename -i iname mydatabase`

当然，我仍然需要将它包装在 crontab 中的一个不错的 perl 脚本中（我们使用的是 ubuntu 12），或者 postgresql 是否有某种调度程序我可以使用它？

或者这完全是矫枉过正，是否有更简单的程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:42:10.200

你可能不需要它。最好这样做一次——在第一次归档工作之后，这样你就可以收回你的磁盘空间，但在那之后，你的日常归档工作和 autovacuum 将防止死元组膨胀。

也`vacuum full`通常比运行更好`cluster table_name using index_name; analyze table_name`。这将根据索引重新排序行。通过这种方式，相关的表行可以物理地保存在磁盘上，这可以限制磁盘查找（在经典磁盘驱动器上很重要，在 SSD 上基本上不相关）和典型查询的读取次数。

请记住，两者`vacuum full`和`cluster`都会使您的表在运行时无法使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T14:27:33.970

好的，我努力通过它。

我简化/修改了视图，将其拆分为以下两个：

```
CREATE OR REPLACE VIEW
    bloat_datawidth AS
SELECT
    ns.nspname AS schemaname,
    tbl.oid   AS relid,
    tbl.relname,
    CASE
        WHEN every(avg_width IS NOT NULL)
        THEN SUM((1-null_frac)*avg_width) + MAX(null_frac) * 24
        ELSE NULL
    END AS datawidth
FROM
    pg_attribute att
JOIN
    pg_class tbl
ON
    att.attrelid = tbl.oid
JOIN
    pg_namespace ns
ON
    ns.oid = tbl.relnamespace
LEFT JOIN
    pg_stats s
ON
    s.schemaname=ns.nspname
AND s.tablename = tbl.relname
AND s.inherited=false
AND s.attname=att.attname
WHERE
    att.attnum > 0
AND tbl.relkind='r'
GROUP BY
    1,2,3; 
```

和

```
CREATE OR REPLACE VIEW
    bloat_tables AS
SELECT
    bdw.schemaname,
    bdw.relname,
    bdw.datawidth,
    cc.reltuples::bigint,
    cc.relpages::bigint,
    ceil(cc.reltuples*bdw.datawidth/current_setting('block_size')::NUMERIC)::bigint AS expectedpages,
    100 - (cc.reltuples*100*bdw.datawidth)/(current_setting('block_size')::NUMERIC*cc.relpages) AS bloatpct
FROM
    bloat_datawidth bdw
JOIN
    pg_class cc
ON
    cc.oid = bdw.relid
AND cc.relpages > 1
AND bdw.datawidth IS NOT NULL; 
```

还有 cron 工作：

```
#!/bin/bash

MIN_BLOAT=65
MIN_WASTED_PAGES=100
LOG_FILE=/var/log/postgresql/bloat.log
DATABASE=unity-stationmaster
SCHEMA=public

if [[ "$(id -un)" != "postgres" ]]
then
echo "You need to be user postgres to run this script."
exit 1
fi

TABLENAME=`psql $DATABASE -t -A -c "select relname from bloat_tables where bloatpct > $MIN_BLOAT and relpages-expectedpages > $MIN_WASTED_PAGES and schemaname ='$SCHEMA' order by wastedpages desc limit 1"`

if [[ -z "$TABLENAME" ]]
then
echo "No bloated tables." >> $LOG_FILE
exit 0
fi

vacuumdb -v -f -t $TABLENAME $DATABASE >> $LOG_FILE 
```

# javascript - javascript中的几个异步数据库调用

> ID：13931992
> 
> 赞同：0
> 
> 时间：2012-12-18T11:30:14.657
> 
> 标签：javascript, asynchronous

我不知道如何进行两个单独的异步调用并使 call1 等待 call2 完成，一直在查找，我想我需要使用回调或承诺，但就是不明白，有没有人有链接到一个简单的解释？或者任何人都可以建议如何调整我的代码？

我已经“简化”了代码。

如何确保仅在constructButton 完成后才读取下一条记录？

```
function justAfunction(){
    var query = "SELECT * FROM trlydp where tdrexr = " + route + " order by tdrseq;";
    try {
        localDB.transaction(function(transaction){

            transaction.executeSql(query, [], function(transaction, results){
                for (var i = 0; i < results.rows.length; i++) {

                    var row = results.rows.item(i);

                    constructButton();
                }

            }, function(transaction, error){
                updateStatus("Error: " + error.code + "<br>Message: " + error.message);
            });
        });
    } 
    catch (e) {
        updateStatus("Error: Unable to select data from the db " + e + ".");
    }
}

function constructButton(){

  disabled = false;

  var query = 'SELECT * FROM trlylp';

  //alert(query);
  try {
    localDB.transaction(function(transaction){

      transaction.executeSql(query, [], function(transaction, results){
        alert(results.rows.length);
        if (results.rows.length != 0) {
          disabled = true;
        }

      }, function(transaction, error){
           updateStatus("Error: " + error.code + "<br>Message: " + error.message);
         });
      });
  } 
  catch (e) {
    updateStatus("Error: Unable to select data from the db " + e + ".");
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:47:57.637

有两种方法可以做到这一点。

1) 一个异步调用应该等待另一个异步调用完成。您可以通过在第一个函数的 onSuccess() 中调用第二个函数来做到这一点。

2）使第一次调用同步。（**根本不推荐**）因为它可能会使您的 GUI 看起来挂起。

```
function f1(){
    $.ajax({
        url: "blah blah",
        dataType: "json",
        complete: function(data){
           // do some action based on result
           f2();
        }
    })
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T11:46:57.153

这是我使用 ajax 的方法，但是这个概念应该适用于所有需要在继续之前完成的任何异步工作集：

```
var model = {};

function checkLoadsComplete(){
    if (model.data0 && model.data1 && model.data2){
        //load Complete
        //do something
        return true;
    } else {
        //not done loading
        return false;
    }

}

function getData0(){
    $.ajax({
        url: "http://www.domain.com/data0.json",
        dataType: "json",
        complete: function(data){
            model.data0 = data;
            checkLoadsComplete();
        }
    })
}

function getData1(){
    $.ajax({
        url: "http://www.domain.com/data1.json",
        dataType: "json",
        complete: function(data){
            model.data1 = data;
            checkLoadsComplete();
        }
    })
}

function getData2(){
    $.ajax({
        url: "http://www.domain.com/data2.json",
        dataType: "json",
        complete: function(data){
            model.data2 = data;
            checkLoadsComplete();
        }
    })
}

$(document).ready(function(){
    if(!checkLoadsComplete()){
        getData0();
        getData1();
        getData2();
    }
}) 
```

# python - 未使用 json.loads() 加载 Json Schema 文件

> ID：13931993
> 
> 赞同：1
> 
> 时间：2012-12-18T11:30:13.993
> 
> 标签：python, json, jsonschema

我有一个有效的 json 模式，如果我创建一个像

```
schema = {

....

} 
```

并使用`validate('some json object' , schema)`.

但是，如果我将相同的模式保存在文本文件中并读取文本文件，则在使用`json.loads('schema text read from file')`时会出现错误：

```
No Json objects could be loaded. 
```

我的问题是，Json Schema 是一个有效的 json 对象，可以使用`json.loads()`. 如果还有其他方法，请帮助我。

# objective-c - 如何将导航控制器添加到 xib

> ID：13931994
> 
> 赞同：8
> 
> 时间：2012-12-18T11:30:20.070
> 
> 标签：objective-c, ios, xcode, cocoa-touch

在我找不到任何关于如何为 xibs 执行此操作的教程之前，仅使用 storyords 子类化导航控制器。

如何将导航控制器添加到某个 xib 以便我可以对其进行子类化？然后我可以覆盖我的视图的旋转。我坚持的部分是视图控制器如何知道导航控制器？在情节提要中，我会手动将其连接到我的视图控制器。我只是不能用 xibs 解决它？

我在我的视图 xib 旁边添加了一个导航控制器……现在我需要从这里得到一些建议。

我还从我原来的 iPhone xibs 创建了 iPad 视图。当我从 IB 拖动导航控制器时，它仍然是 iPhone 屏幕尺寸吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T11:48:23.020

您不需要像`UINavigationController`使用情节提要一样在 xib 文件中设置 a，因为 xib 仅代表一个屏幕。正常的做法是 alloc/init a`UINavigationController`和 a `UIViewController`，并在显示之前将视图控制器设置为导航控制器的根。如果您希望整个应用程序从一开始就包裹在导航控制器中，则可以在 App Delegate 中完成此操作。

在非故事板应用程序的应用程序委托中，您需要这样的东西

```
self.navigation = [[UINavigationController alloc] initWithRootViewController:[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]];

[self.window makeKeyAndVisible];

self.window.rootViewController = self.navigation; 
```

属于 App Delegate`self.navigation`的属性或 iVar在哪里。`UINavigationController`如果您想在 xib 中正确设置视图控制器，请在 xib 中选择根视图并打开属性检查器（RHS，看起来像一个小盾牌的那个）并在“顶部栏”中选择“导航栏”下拉式菜单。这将在 xib 中显示导航控制器顶部栏，以便您可以相应地定位其他视图。

编辑

这并不完全正确，您可以在 xib 文件中创建导航控制器，但我一直认为它比它的价值更麻烦，因为它的视觉元素很少，而且可以很容易地在代码中设置它们。

本教程中的更多信息在这里

[http://www.iosdevnotes.com/2011/03/uinavigationcontroller-tutorial/](http://www.iosdevnotes.com/2011/03/uinavigationcontroller-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:54:53.023

如果你想覆盖导航控制器的旋转，只需创建一个覆盖旋转方法的 UINavigationController 子类，然后使用 P-double 的代码，而不是调用你`[UINavigationController alloc]`应该调用类似`[MyNavigationController alloc]`面向对象编程的奇迹。

# php - 在 Magento 导航菜单中显示带有图像缩略图的子类别描述

> ID：13931997
> 
> 赞同：0
> 
> 时间：2012-12-18T11:30:29.347
> 
> 标签：php, magento

我有一个垂直导航菜单，它在悬停时显示带有图像缩略图和标题的父类别和子类别。我还想在子类别名称下方显示每个子类别的简短描述。目前，导航显示列表中每个子类别的父类别的描述。

我该如何改变？

这是代码：

```
 <?php $_helper = Mage::helper('catalog/category') ?>
<?php $_categories = $_helper->getStoreCategories() ?>
<?php $currentCategory = Mage::registry('current_category') ?>
<?php if (count($_categories) > 0): ?>
<div class="left-nav-vertical visible-desktop visible-tablet hidden-phone" id="nav-vertical">
<ul class="nav nav-tabs-left" id="dcjq-vertical-mega-menu"> 
<li class="dropdown open visible-desktop visible-tablet hidden-phone" id="left"> 
<a class="dropdown-toggle"><?php echo $this->__('Shop by Department') ?><b class="caret"></b></a> 
<ul class="dropdown-menu">                                 
<ul id="mega" class="menu"> 
<!--Top Category--> 
<?php foreach($_categories as $_category): ?> 
<li id="menu-item-1">
<a href="<?php echo $_helper->getCategoryUrl($_category) ?>"> <?php echo $_category->getName() ?></a>
<ul> 
<?php $_category = Mage::getModel('catalog/category')->load($_category->getId()) ?>
<?php $_subcategories = $_category->getChildrenCategories() ?>
<?php if (count($_subcategories) > 0): ?>
<?php foreach($_subcategories as $_subcategory):$products = Mage::getResourceModel('catalog/product_collection')->addCategoryFilter($_subcategory)->addAttributeToSelect('small_image');$products->getSelect()->order(new Zend_Db_Expr('RAND()'))->limit(1);$products->load();?> 
<!-- SubCategory--> 
<ul> 
<li class="media">
<a href="<?php echo $_helper->getCategoryUrl($_subcategory) ?>">
<p class="product-name"><?php echo $_subcategory->getName() ?></p> </a> 
<?php foreach($products as $product) { ?>
<?php $cur_category=Mage::getModel('catalog/category')->load($_category->getId());
$layer = Mage::getSingleton('catalog/layer');
$layer->setCurrentCategory($cur_category); ?>
<!-- Show image -->
<a href="<?php echo $_helper->getCategoryUrl($_subcategory) ?>" class="pull-left">
<img src="<?php echo $this->helper('catalog/image')->init($product, 'small_image')->resize(50, 50); ?>" class="static-thumbs" width="50" height="50" alt="<?php echo $_subcategory->getName() ?>" /></a>

<!-- End Show image-->

<!-- Show sub category Description -->
<li id="menu-item-4" class="pull-right">
<?php break; } ?>
<span><em>
<?php $children = explode( ",", $this->getCurrentCategory()->getChildren()); ?>
        <?php foreach( $children as $child ): ?>
            <?php $_child = Mage::getModel( 'catalog/category' )->load( $child ); ?>
            <li><?php echo $_child->getDescription(); ?></li>
        <?php endforeach; ?>

</em></span>
</li> 
<!-- End show category Description -->
</ul> 
<div class="clearer"></div>
<!-- end of subcats -->
<?php endforeach; ?> 
</li> 
<?php endif; ?>  
</ul> 
<!-- end of parent cats -->
<?php endforeach; ?> 
</li> 
</ul> 
</ul> 
</li> 
</ul>
</div> 
<?php endif; ?>
<!--- Close Navigation Menu -->

<script type="text/javascript">
jQuery.noConflict();
jQuery(document).ready(function(){
  jQuery('#mega').dcVerticalMegaMenu({
    rowItems: '1',
    speed: 'fast',
    effect: 'slide',
    direction: 'right'
  });
});
</script>
<!--- Closed Navigation Menu --> 
```

我试过改变这一行：

```
<em><?php echo
> $this->htmlEscape($_category->getDescription()) ?></em> 
```

对此：

```
<em><?php echo
> $this->htmlEscape($_subcategory->getDescription()) ?></em> 
```

但没有快乐！

欢迎任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:02:08.003

此代码适用于任何希望做同样事情的人。您将需要调整样式并编辑 foreach 循环以满足您的需要。

```
<?php $_helper = Mage::helper('catalog/category') ?>
<?php $_categories = $_helper->getStoreCategories() ?>
<?php $currentCategory = Mage::registry('current_category') ?>
<?php if (count($_categories) > 0): ?>

<!--Top Category--> 
<?php foreach($_categories as $_category): ?> 
<li id="menu-item-1">
<a href="<?php echo $_helper->getCategoryUrl($_category) ?>"> <?php echo $_category->getName() ?></a>
<ul> 
<?php $_category = Mage::getModel('catalog/category')->load($_category->getId()) ?>
<?php $_subcategories = $_category->getChildrenCategories() ?>
<?php if (count($_subcategories) > 0): ?>
<?php foreach($_subcategories as $_subcategory):$products = Mage::getResourceModel('catalog/product_collection')->addCategoryFilter($_subcategory)->addAttributeToSelect('small_image');$products->getSelect()->order(new Zend_Db_Expr('RAND()'))->limit(1);$products->load();?> 
<!-- SubCategory--> 

<a href="<?php echo $_helper->getCategoryUrl($_subcategory) ?>">
<p class="product-name"><?php echo $_subcategory->getName() ?></p> </a> 
<?php foreach($products as $product) { ?>
<?php $cur_category=Mage::getModel('catalog/category')->load($_category->getId());
$layer = Mage::getSingleton('catalog/layer');
$layer->setCurrentCategory($cur_category); ?>
<!-- Show image -->
<a href="<?php echo $_helper->getCategoryUrl($_subcategory) ?>" class="pull-left">
<img src="<?php echo $this->helper('catalog/image')->init($product, 'small_image')->resize(50, 50); ?>" class="static-thumbs" width="50" height="50" alt="<?php echo $_subcategory->getName() ?>" /></a>

<!-- End Show image-->

<!-- Show sub category Description -->

<?php break; } ?>
<span><em>
<?php $children = explode( ",", $this->getCurrentCategory()->getChildren()); ?>
        <?php foreach( $children as $child ): ?>
            <?php $_child = Mage::getModel( 'catalog/category' )->load( $child ); ?>
            <li><?php echo $_child->getDescription(); ?></li>
        <?php endforeach; ?>

</em></span>

<!-- End show category Description -->

<!-- end of subcats -->
<?php endforeach; ?> 

<?php endif; ?>  

<!-- end of parent cats -->
<?php endforeach; ?> 

<?php endif; ?>
<!--- Close Navigation Menu -->

<!--- Closed Navigation Menu --> 
```

# jsf - 通过 JSF 将 PDF 发送到浏览器

> ID：13931999
> 
> 赞同：3
> 
> 时间：2012-12-18T11:30:31.903
> 
> 标签：jsf, jsf-2, primefaces, download, jasper-reports

我正在尝试将 JasperReports 生成的 PDF 文件发送到用户的浏览器，但在我的托管 bean 方法中找不到什么问题，这是一个片段：

```
System.out.println("Making pdf...");

        FacesContext fc = FacesContext.getCurrentInstance();
        ExternalContext ec = fc.getExternalContext();
        String tplPath = ec.getRealPath("testTemplate.jrxml");
        JasperReport jasperReport = JasperCompileManager.compileReport(tplPath);
        JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, new HashMap<String,Object>(), ds );

        String pdfName = "/testReport.pdf";
        String pdfPath = ec.getRealPath(pdfName);
        JasperExportManager.exportReportToPdfFile(jasperPrint, pdfPath);

        System.out.println("PDF ready!");

        ec.responseReset(); 
        ec.setResponseContentType(ec.getMimeType(pdfPath)); 
        //ec.setResponseContentLength(contentLength); 
        ec.setResponseHeader("Content-Disposition", "attachment; filename=\"" + pdfName + "\""); 

        InputStream input = new FileInputStream(pdfPath);
        OutputStream output = ec.getResponseOutputStream();
        IOUtils.copy(input, output);

        System.out.println("Sending to browser...");

        fc.responseComplete(); 
```

它由一个简单的用户点击调用：

```
<p:menuitem value="TestPDF" action="#{menuController.getTestPdf()}" /> 
```

我觉得这很容易找到。为什么我看不到？:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T12:19:03.320

默认使用`<p:menuitem>`ajax。您不能通过 ajax 下载文件。由于安全原因，JavaScript 没有工具可以以编程方式强制与变量中的任意内容进行*另存为对话。*

只需关闭ajax。

```
<p:menuitem ... ajax="false" /> 
```

### 也可以看看：

*   [如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)