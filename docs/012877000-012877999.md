# StackOverflow 问答 12877000-12877999

# scala - 如何获取班级成员的姓名？

> ID：12877001
> 
> 赞同：0
> 
> 时间：2012-10-13T21:08:34.423
> 
> 标签：scala, reflection, javassist

我希望能够做这样的事情：

准备表格：

```
val formDescription = formBuilder(_.textField[User](_.firstName)
             .textField[User](_.lastName)
             ).build

showForm(formDescription) 
```

使用用户从用户填写的表单中提取数据：

```
//contains data of a form submitted by a user:
val formData: Map[String, String] = getFormData 

val newUser  = User(id = randomUuid, firstName = formData.extract[User](_.firstName)) 
```

我看到的一种解决方案是使用动态代理来扩展提供的类并记住对他调用的内容：

```
def getFieldName[T:Manifest](foo: T => Any) = {
  val clazz = implicitly[Manifest[T]].erasure
  val proxy = createDynamicProxy(clazz)
  foo(proxy)
  proxy.lastInvokedMethodName   
} 
```

有更好的方法吗？有没有实现它的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:10:54.753

这种反射方法采用一个案例类并调用其配套应用，如果该字段不在数据中，则调用 getField 并获取默认参数。

```
import scala.reflect.runtime.{currentMirror => cm, universe => uni}
import uni._

def fromXML(xml: Node): Option[PluginDescription] = {
  def extract[A]()(implicit tt: TypeTag[A]): Option[A] = {
    // extract one field
    def getField(field: String): Option[String] = {
      val text = (xml \\ field).text.trim
      if (text == "") None else Some(text)
    }

    val apply = uni.newTermName("apply")
    val module = uni.typeOf[A].typeSymbol.companionSymbol.asModule
    val ts = module.moduleClass.typeSignature
    val m = (ts member apply).asMethod
    val im = cm reflect (cm reflectModule module).instance
    val mm = im reflectMethod m

    def getDefault(i: Int): Option[Any] = {
      val n = uni.newTermName("apply$default$" + (i+1))
      val m = ts member n
      if (m == NoSymbol) None
      else Some((im reflectMethod m.asMethod)())
    }
    def extractArgs(pss: List[List[Symbol]]): List[Option[Any]] =
      pss.flatten.zipWithIndex map (p => getField(p._1.name.encoded) orElse getDefault(p._2))
    val args = extractArgs(m.paramss)
    if (args exists (!_.isDefined)) None
    else Some(mm(args.flatten: _*).asInstanceOf[A])
  }
  // check the top-level tag
  xml match {
    case <plugin>{_*}</plugin>  => extract[PluginDescription]()
    case _                      => None
  }
} 
```

这个想法是做类似的事情：

```
case class User(id: Int = randomUuid, firstName: String, lastName: String)

val user = extract[User]() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T14:04:56.360

这是我自己的解决方案：

```
 package utils

    import javassist.util.proxy.{MethodHandler, MethodFilter, ProxyFactory}
    import org.specs2.mutable._

    import javassist.util.proxy.Proxy

    import java.lang.reflect.{Constructor, Method}

    class DynamicProxyTest extends Specification with MemberNameGetter {

        "Dynamic proxy" should {
            "extract field name" in {
                memberName[TestClass](_.a) must ===("a")
                memberName[TestClass](_.i) must ===("i")
                memberName[TestClass](_.b) must ===("b")
                memberName[TestClass](_.variable) must ===("variable")
                memberName[TestClass](_.value) must ===("value")
                memberName[TestClass](_.method) must ===("method")  
            }

        }
    }

    trait MemberNameGetter {
        def memberName[T: Manifest](foo: T => Any) = {
            val mf = manifest[T]
            val clazz = mf.erasure
            val proxyFactory = new ProxyFactory
            proxyFactory.setSuperclass(clazz)
            proxyFactory.setFilter(new MethodFilter {
                def isHandled(p1: Method) = true
            })
            val newClass = proxyFactory.createClass()
            var lastInvokedMethod: String = null
            val mh = new MethodHandler {
                def invoke(p1: Any, p2: Method, p3: Method, p4: Array[AnyRef]) = {
                    lastInvokedMethod = p2.getName
                    p3.invoke(p1, p4: _*)
                }
            }
            val constructor = defaultConstructor(newClass)
            val parameters = defaultConstructorParameters(constructor)
            // val proxy = constructor.newInstance("dsf", new Integer(0))
            val proxy2 = constructor.newInstance(parameters: _*)
            proxy2.asInstanceOf[Proxy].setHandler(mh)
            foo(proxy2.asInstanceOf[T])
            lastInvokedMethod
        }

        private def defaultConstructor(c: Class[_])  =   c.getConstructors.head
        private def defaultConstructorParameters(constructor: Constructor[_]) = {
            val parameterTypes = constructor.getParameterTypes
            parameterTypes.map{
                case Integer.TYPE => Integer.valueOf(0)                  
                case _ => null
            }

        }
    }

    case class TestClass(a: String, i: Int, b: Boolean) {
        var variable = "asdf"
        val value = "asdfasdfasd"

        def method = "method"
    }

    val mh = new MethodHandler {
        def invoke(p1: Any, p2: Method, p3: Method, p4: Array[AnyRef]) = {
            lastInvokedMethod = p2.getName
            p3.invoke(p1, p4: _*)
        }
    }
    val constructor = defaultConstructor(newClass)
    val parameters = defaultConstructorParameters(constructor)
    // val proxy = constructor.newInstance("dsf", new Integer(0))
    val proxy2 = constructor.newInstance(parameters: _*)
    proxy2.asInstanceOf[Proxy].setHandler(mh)
    foo(proxy2.asInstanceOf[T])
    lastInvokedMethod
}

private def defaultConstructor(c: Class[_])  =   c.getConstructors.head
private def defaultConstructorParameters(constructor: Constructor[_]) = {
    val parameterTypes = constructor.getParameterTypes
    parameterTypes.map{
        case Integer.TYPE => Integer.valueOf(0)
        case java.lang.Double.TYPE => java.lang.Double.valueOf(0)
        case java.lang.Long.TYPE => java.lang.Long.valueOf(0)
        case java.lang.Boolean.TYPE => java.lang.Boolean.FALSE
        case _ => null
    }

}
}

case class TestClass(a: String, i: Int, b: Boolean) {
   var variable = "asdf"
   val value = "asdfasdfasd"

   def method = "method"
} 
```

# ios - UICollectionView 更改布局 - 更改单元格

> ID：12877002
> 
> 赞同：1
> 
> 时间：2012-10-13T21:08:42.277
> 
> 标签：ios, uicollectionview, uicollectionviewcell

我有一个 UICollectionView 使用`UICollectionViewDelegateFlowLayout`. 我添加了一种在点击单元格时更改布局的方法`setCollectionViewLayout`。

所有单元格都有一个带有文本的文本标签，我想在更改布局时清空每个单元格上的所有文本标签。实现这一目标的最佳方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T22:03:59.640

我想最简单的方法就是`reloadData`在您更改布局的同时调用您的集合视图（并在您的`cellForItem`数据源方法中有一个条件，在每次布局更改时清空文本标签）。

或者，您可以`UICollectionViewCells`跟踪它们当前显示的布局，并相应地调整它们的视图。

# ruby-on-rails - 页面内容的 Rails 常量

> ID：12877003
> 
> 赞同：3
> 
> 时间：2012-10-13T21:08:48.040
> 
> 标签：ruby-on-rails, ruby, hash, constants

目前正在构建一个 Rails 3 应用程序，我注意到我在许多不同的视图中多次使用了很多单词和短语。与其每次都在视图中对它们进行硬编码，我认为将内容存储在 CONSTANTS 散列中可能是个好主意。在 config/initializers 中创建一个 constants.rb 文件，然后在其中有一个名为 CONSTANTS 的散列是否有意义，然后每当我需要内容以获取视图时，我只需使用相应的键调用 CONSTANTS 散列吗？这是一个很好的解决方法，还是我应该做其他事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T21:47:34.240

听起来 Rails 语言环境文件可能是您想要的。`config/locales/en.yml`您将在（英语）文件中定义您的字符串。`t (:my_string)`您在 yaml 文件中定义字符串，然后在视图中使用它们。它使维护或扩展到另一种语言变得更容易。

看看[Rails i18n Guide](http://guides.rubyonrails.org/i18n.html)，它详细解释了事情。

# math - 函数的 Big-O 运行时间

> ID：12877004
> 
> 赞同：0
> 
> 时间：2012-10-13T21:08:48.923
> 
> 标签：math, big-o

求每个函数的大 O 运行时间：

1.  `T(n) = T(n - 2) + n²`
    我们的答案：`n²`,`n³`
2.  `T(n) = 3T(n/2) + n`
    我们的答案：`O(n log n)`,`O(n^(log₂3))`
3.  `T(n) = 2T(n/3) + n`
    我们的答案：`O(n log base 3 of n)`,`O(n)`
4.  `T(n) = 2T(n/2) + n^3`
    我们的答案：`O(n³ log₂n)`,`O(n³)`

所以我们很难为每个问题确定正确的答案。

我们都得到了不同的结果，并希望外界对运行时间有什么看法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:16:21.770

**澄清一下**：
问题中的函数似乎是***运行时函数***`T()`，正如它们的名称和`n`参数所暗示的那样。一个更微妙的提示是，它们都是递归的，而递归函数在生成一个描述算法运行时间的函数时很常见（即使算法本身没有正式使用递归）。事实上，递归公式是一种相当不方便的形式，这就是为什么我们使用***大 O 表示法***来更好地总结算法的行为。

运行时间函数是一个参数化的数学表达式，它允许在给定参数的特定值的情况下计算算法运行时间的[有时是近似的]相对值。就像这里的情况一样，运行时间函数通常有一个参数，通常命名为，并且对应于*项目*`n`的总数*该算法预计可以使用/使用（例如，对于搜索算法，它可能是数据库中的记录总数，对于排序算法，它可能是未排序列表中的条目数，对于路径查找算法，图中的节点数......）。在某些情况下，运行时间函数可能有多个参数，例如，在图上执行某些变换的算法的性能可能与节点总数*和*顶点总数或两个节点之间的平均连接数有关节点等* 

 ***因此，手头**的任务（对于似乎是家庭作业，因此我的部分答案）是找到一个[**Big O**](http://en.wikipedia.org/wiki/Big_O_notation)表达式，该表达式限定每个运行时间函数的上限，*无论它们可能对应于什么底层算法*。任务*不是*查找和限定算法以产生函数结果（第二种可能性也是 CS 课程算法类中非常常见的练习类型，但显然不是这里需要的。）

问题是因此更多的是数学而不是计算机科学本身。
基本上，当 n 接近无穷大时，需要找到每个函数的极限（或其近似值）。
这个[](http://www.cs.uiuc.edu/~jeffe/teaching/algorithms/notes/99-recurrences.pdf)**来自伊利诺伊大学厄巴纳香槟分校的[**Jeff Erikson 教授的说明**](http://www.cs.uiuc.edu/~jeffe/teaching/algorithms/notes/99-recurrences.pdf)**为解决重复问题提供了很好的介绍**。
尽管有一些解决递归的捷径，特别是如果一个人对微积分有很好的掌握，一种通用的方法是猜测答案，然后通过归纳来证明它。Excel 等工具、Python 或 MATLAB 或[Sage](http://www.sagenb.org/)等编程语言中的一些片段可用于生成前几百个值（或更多值）以及 n^2、n^3、n 等值的表格！以及函数项的比率；这些表通常可以提供对函数的足够了解，以找到函数的封闭形式。** 

 ****关于问题中列出的答案**的一些提示：
函数 a)
    `O(n^2)`肯定是错误
        的：快速检查序列中的前几个值表明 n^2 越来越小于 T(n)
    `O(n^3)`另一方面似乎系统地大于`T(n)`随着 n 向大数增长。仔细观察表明，这`O(n^3)`实际上是该函数的大 O 表示法的*顺序*`O(n^3 / 6)`，但这是一种更精确的表示法，它系统地超过了 T(n) 的值 [对于较大的 n 值，和/或当 n 趋于无穷大时] 但与较粗略的`n^3`估计相比只有一小部分。
可以通过归纳来确认 `O(n^3 / 6)`是这样的：

```
T(n) = T(n-2) + n^2  // (1) by definition
T(n) = n^3 / 6       // (2) our "guess"
T(n) = ((n - 2)^3 / 6) + n^2   // by substitution of T(n-2) by the (2) expression
     = (n^3 - 2n^2 -4n^2 -8n + 4n - 8) / 6  + 6n^2 / 6
     = (n^3 - 4n -8) / 6
     = n^3/6 - 2n/3 - 4/3
     ~=  n^3/6      // as n grows towards infinity, the 2n/3 and 4/3 factors
                    // become relatively insignificant, leaving us with the
                    // (n^3 / 6) limit expression, QED 
```***

# c - 如何在 UBUNTU 中使用 execl 函数删除文件

> ID：12877006
> 
> 赞同：-2
> 
> 时间：2012-10-13T21:08:54.273
> 
> 标签：c, linux, shell

嗨，我必须在 C 程序结束时删除一个文件，但我无法做到。我试着用

```
execl("/usr/bin/rm","rm","example.txt",NULL); 
```

但它不工作。如果您能提供帮助和感谢，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T22:45:32.617

正如其他人指出的那样，有更有效的方法来删除文件。

如果您想知道程序失败的原因，只需在下面运行*它*`strace`：

```
strace your-binary 
```

您将看到程序执行的所有系统调用以及相应的返回值。在这种情况下，我强烈怀疑`rm`不是 in `/usr/bin`，而是 in `/bin`。您可以通过执行来检查它`which rm`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T21:14:02.807

为什么不试试`remove(const char *filename)`stdio.h 中的函数？

# android - 有没有办法为安卓确定建筑物内的位置？

> ID：12877008
> 
> 赞同：3
> 
> 时间：2012-10-13T21:09:11.033
> 
> 标签：android, gps, location

> **可能重复：**
> [如何跟踪 Android 设备在建筑物中的位置？](https://stackoverflow.com/questions/11279946/how-to-track-position-of-an-android-device-in-a-building)

这些天我在做一个程序来定位建筑物内的用户应用程序，我认为它可以通过 GPS 完成。

但是我在互联网上看到 GPS 在建筑物内不起作用，有没有办法确定建筑物内的用户位置或建筑物内的用户跟踪？

# python - Django 自定义管理视图，如历史

> ID：12877011
> 
> 赞同：1
> 
> 时间：2012-10-13T21:09:36.293
> 
> 标签：python, django, django-admin

我需要向模型管理员添加一个自定义视图，类似于历史视图。例如，如果我有一个名为 Job 的模型，我可以通过转到 /jobs/job//history/ 来访问历史记录。如何添加另一个视图以响应 /jobs/job//workflow/ 之类的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:09:53.467

您可以[`get_urls()`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_urls)在管理员上定义以添加更多管理员视图。

*   不要忘记`admin_view()`包装
*   如果您想为单个对象添加视图（例如更改表单），只需将对象 id 添加到您的 url 模式，然后在您的视图中（尝试）获取相应的对象。

由您来提供链接（例如，通过覆盖基本 ( `/change_form`) 模板并将新项目添加到“对象工具”列表）。

# javascript - 悬停时在菜单项上播放声音

> ID：12877015
> 
> 赞同：0
> 
> 时间：2012-10-13T21:04:02.900
> 
> 标签：javascript, jquery, wordpress

当元素悬停时，如何播放声音剪辑？

我使用的是最新的 Wordpress，并且我使用的父主题为我提供了一个选项来粘贴脚本，它将嵌入到该`<head>`部分中。

是否有一个脚本可以添加到我的脚本中，`<head>`当光标移到我的菜单项类上时会播放声音`.menu li`？

前几天我花了几个小时试图弄清楚这一点，但无济于事。我以前在一个简单的 HTML 网站中做过这个：

```
<head>
<script language="javascript" type="text/javascript">
function playSound(soundfile) {
document.getElementById("dummy").innerHTML=
"<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" loop=\"false\" />";
}
</script>
</head>

<li><a href="index.html" onmouseover="playSound('lib/hover.mp3');" onclick="playSound('lib/click.mp3');"><span>Home</span></a></li> 
```

不确定如何在 Wordpress 上部署它。

# silverlight - 网格不会在 ListPicker 项目内延伸

> ID：12877019
> 
> 赞同：1
> 
> 时间：2012-10-13T21:10:44.823
> 
> 标签：silverlight, windows-phone-7

我在 ListPicker 完整模式项中有 Grid 。网格有两列。第一列应左对齐，第二列右对齐。

不幸的是，这个模板不能按预期工作：

```
<DataTemplate x:Name="ListFullModeItemTemplate">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Column="0" Text="{Binding Name}" />
        <TextBlock Grid.Column="1" Text="{Binding Description}" HorizontalAlignment="Right" />
    </Grid>
</DataTemplate> 
```

第二个 TextBlock 未右对齐。

当我将 Grid Width 属性设置为特定值时，即

```
<Grid Width="700">
    ...
</Grid> 
```

然后它可以工作，但我不能这样做，因为用户可以将手机旋转到纵向/横向。

有任何想法吗？

编辑：我在 ListBox 中也遇到了同样的问题。我通过添加来修复它：

```
<ListBox.ItemContainerStyle>
    <Style TargetType="ListBoxItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <ContentPresenter HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                 </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ListBox.ItemContainerStyle> 
```

我不能在 ListPicker 中使用它，因为它没有 ItemContainerStyle 元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:32:43.167

尝试添加`TextAlignment="Right"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:17:05.180

设置你的 grid 的宽度。

并通过 += 更改它： OrientationChanged += new EventHandler(SecondPage_OrientationChanged);

# java - Yatzy 机器人中的保持功能问题

> ID：12877026
> 
> 赞同：3
> 
> 时间：2012-10-13T21:11:23.380
> 
> 标签：java, algorithm, irc, dice

在开发 Yatzy 机器人时，我遇到了“保持”功能。其他一切正常，但此功能的逻辑在某些情况下似乎失败了。基本上，这个想法是保留所有给定的数字，然后掷骰子与给定的数字不匹配。

```
[00:04] @Dessimat0r: .roll
[00:04] YatzyBot: #1: dice: [2, 5, 3, 4, 1], scores: [ 1 2 3 4 5 6 1P 2P 3K 4K SS LS H Y C ]
[00:04] @Dessimat0r: .hold 2 1
[00:04] YatzyBot: #2: dice: [2, 5, 3, 4, 1], scores: [ 1 2 3 4 5 6 1P 2P 3K 4K SS LS H Y C ]
[00:04] @Dessimat0r: .hold 2 1
[00:04] YatzyBot: #3: dice: [2, 5, 3, 4, 1], scores: [ 1 2 3 4 5 6 1P 2P 3K 4K SS LS H Y C ] 
```

可以看出，所有数字都被保留，而不仅仅是选定的少数数字（这不是掷骰子的巧合）。代码如下：

```
} else if (event.getMessage().startsWith(".hold")) {
    if (y.getTurn() != null && event.getUser().getNick().equals(y.getTurn().getPlayer().getName())) {
        String[] tokens = event.getMessage().split(" ");
        if (tokens[0].equals(".hold")) {
            boolean failed = false;
            try {
                if (tokens.length == 1) {
                    bot.sendMessage(CHANNEL, "Must choose some dice to hold!");
                    return;
                }
                ArrayList<Integer> dice = new ArrayList<Integer>();
                ArrayList<Integer> holdnums = new ArrayList<Integer>();
                ArrayList<Integer> rollnums = new ArrayList<Integer>();

                for (Die d : y.getDice()) {
                    dice.add(d.getFaceValue());
                }

                // parse other numbers
                for (int i = 1; i < tokens.length; i++) {
                    int num = Integer.parseInt(tokens[i]);
                    holdnums.add(num);
                }
                ListIterator<Integer> diter = dice.listIterator();
                dice: while (diter.hasNext()) {
                    Integer d = diter.next();

                    if (holdnums.isEmpty()) {
                        rollnums.add(d);
                        diter.remove();
                        continue;
                    }
                    ListIterator<Integer> iter = holdnums.listIterator();
                    while (iter.hasNext()) {
                        int holdnum = iter.next().intValue();
                        if (holdnum == d) {
                            iter.remove();
                            diter.remove();
                            continue dice;
                        }
                    }

                }

                if (!holdnums.isEmpty()) {
                    bot.sendMessage(CHANNEL, "Hold nums not found: " + holdnums);
                    failed = true;
                }

                if (!failed) {
                    y.getTurn().rollNumbers(convertIntegers(rollnums));

                    Map<Scoring, Integer> scores = y.getRollScores();

                    Map<Scoring, Integer> unchosen = new EnumMap<Scoring, Integer>(Scoring.class);
                    Map<Scoring, Integer> chosen = new EnumMap<Scoring, Integer>(Scoring.class);

                    for (Entry<Scoring, Integer> entry : scores.entrySet()) {
                        if (y.getTurn().getPlayer().getTotals().get(entry.getKey()) == -1) {
                            unchosen.put(entry.getKey(), entry.getValue());
                        } else {
                            chosen.put(entry.getKey(), entry.getValue());
                        }
                    }
                    bot.sendMessage(CHANNEL, "#" + y.getTurn().getRolls() + ": dice: " + y.getDiceStr() + ", scores: " + getDiceStr(y.getTurn().getPlayer().getTotals(), scores));
                }
            } catch (TurnException e1) {
                bot.sendMessage(CHANNEL, e1.getMessage());
            } catch (RollException e2) {
                bot.sendMessage(CHANNEL, e2.getMessage());
            } catch (YahtzyException e3) {
                bot.sendMessage(CHANNEL, e3.getMessage());
            } catch (NumberFormatException e4) {
                bot.sendMessage(CHANNEL, e4.getMessage());
            }
        }
    }
} 
```

* * *

编辑：全部修复。更新代码：

```
} else if (event.getMessage().startsWith(".hold")) {
    if (y.getTurn() != null && event.getUser().getNick().equals(y.getTurn().getPlayer().getName())) {
        String[] tokens = event.getMessage().split(" ");
        if (tokens[0].equals(".hold")) {
            boolean failed = false;
            try {
                if (tokens.length == 1) {
                    bot.sendMessage(channel, "Must choose some dice to hold!");
                    return;
                }
                ArrayList<Integer> holdnums = new ArrayList<Integer>();
                ArrayList<Integer> rollnums = new ArrayList<Integer>();

                // parse other numbers
                for (int i = 1; i < tokens.length; i++) {
                    int num = Integer.parseInt(tokens[i]);
                    holdnums.add(num);
                }
                for (int i = 0; i < y.getDice().length; i++) {
                    int d = y.getDice()[i].getFaceValue();

                    if (holdnums.isEmpty()) {
                        rollnums.add(d);
                        continue;
                    }

                    ListIterator<Integer> iter = holdnums.listIterator();

                    boolean found = false;
                    while (iter.hasNext()) {
                        int holdnum = iter.next().intValue();
                        if (holdnum == d) {
                            iter.remove();
                            found = true;
                            break;
                        }
                    }
                    if (!found) {
                        rollnums.add(d);
                    }
                }

                if (!holdnums.isEmpty()) {
                    bot.sendMessage(channel, "Hold nums not found: " + holdnums);
                    failed = true;
                }

                if (!failed) {
                    boolean[] rolled = y.getTurn().rollNumbers(convertIntegers(rollnums));

                    Map<Scoring, Integer> scores = y.getRollScores();

                    Map<Scoring, Integer> unchosen = new EnumMap<Scoring, Integer>(Scoring.class);
                    Map<Scoring, Integer> chosen = new EnumMap<Scoring, Integer>(Scoring.class);

                    for (Entry<Scoring, Integer> entry : scores.entrySet()) {
                        if (y.getTurn().getPlayer().getTotals().get(entry.getKey()) == -1) {
                            unchosen.put(entry.getKey(), entry.getValue());
                        } else {
                            chosen.put(entry.getKey(), entry.getValue());
                        }
                    }
                    bot.sendMessage(channel, "#" + y.getTurn().getRolls() + ": dice: " + diceToString(rolled) + ", scores: " + getDiceStr(y.getTurn().getPlayer().getTotals(), scores));
                }
            } catch (TurnException e1) {
                bot.sendMessage(channel, e1.getMessage());
            } catch (RollException e2) {
                bot.sendMessage(channel, e2.getMessage());
            } catch (YahtzyException e3) {
                bot.sendMessage(channel, e3.getMessage());
            } catch (NumberFormatException e4) {
                bot.sendMessage(channel, e4.getMessage());
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:37:22.617

一切看起来都很好，但是这个检查`holdnum`不在正确的地方：

```
 if (absent) {
      bot.sendMessage(CHANNEL, "Hold num not found: " + holdnum);
      failed = true;
      break dice;
    } 
```

现在说给定的保持号是对还是错还为时过早，所以最好删除这段代码。要检查您的有效性，`holdnums`您可以在“骰子”循环完成后查看此列表：如果`holdnums`不为空，则它包含一些未找到的项目。

* * *

**对于更新的问题：**

我看到一个问题：`rollnums.add(d)`不应该在嵌套中调用`while`以避免多次添加相同的值。相反，它应该在此循环完成后调用一次。

# unix - Cygwin：对目标文件的更改未反映在硬链接文件中

> ID：12877027
> 
> 赞同：1
> 
> 时间：2012-10-13T21:11:23.690
> 
> 标签：unix, cygwin, wamp, ln

我正在使用 WAMP 开发一个小型 PHP 应用程序。我还使用 Cygwin + Oh-My-Zsh 来管理我的 git 存储库，其中包含应用程序的 .html 和 .php 文件。我的源文件存在于 www 目录之外的目录中，因此我通过 ln 创建了指向源文件的硬链接。起初这似乎可行，但我在工作目录中所做的任何更改都不会反映在链接文件中。我该如何解决？我无法找到有关此特定问题的任何信息，因此将不胜感激。

# spring - ItemProcessor 既需要修改工作实体，又需要创建新的引用实体

> ID：12877029
> 
> 赞同：1
> 
> 时间：2012-10-13T21:11:43.523
> 
> 标签：spring, hibernate, jpa, spring-batch

使用 spring-batch 和 JPA（由 hibernate 提供）。

我有一个步骤可以执行以下操作：

*   从数据库读取所有客户端（客户端实体）
*   使用来自第 3 方的数据增强它们。ItemProcessor 转到第 3 方数据源，获取它存储在 Client 实体本身（其字段）中的一些数据，但也带来更多存储为不同实体 (ClientSale) 的数据，并且 Client 具有 List 的属性，该属性由多对一。
*   修改后的实体 (Client) 和新实体 (ClientSale) 需要存储在 DB 中。

阅读器部分是直截了当的，对于作者，我使用了 JPAItemWriter。在处理阶段，我尝试更新字段，创建新字段并将它们添加到客户端列表并返回客户端，希望编写器将引用的对象和客户端本身写入数据库。

相反，我收到一条错误消息，指出数据库中不存在 ID 为 #123213213 的 ClientSale。

我该如何克服这个？我应该从我的处理器（客户端 + 所有 ClientSale）返回对象列表（不同类型）吗？JPAItemWriter 可以处理对象列表吗？另一个问题是我必须手动更新 ClientSale 实体中的 client_id 而不是将它们添加到列表中并让休眠状态来理解它们之间的关系以及谁指向哪里..

这里的最佳做法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:52:42.803

好的..这是我最后基于所有内容所做的：我创建了一个 MultiEntityItemWriter，它可以作为项目接收列表（在这种情况下，它打开它并将所有元素写入委托的 ItemWriter。

代码：

```
public class MultiEntityItemWriter implements ItemWriter<Object>{

private ItemWriter<Object> delegate;

@Override
public void write(List<? extends Object> items) throws Exception {
    List<Object> toWrite = new ArrayList<>();

    for (Object item : items) {
        if (item instanceof Collection<?>) {
            toWrite.addAll((Collection<?>)item);
        } else {
            toWrite.add(item);
        }
    }
    delegate.write(toWrite);
}

public ItemWriter<Object> getDelegate() {
    return delegate;
}

public void setDelegate(ItemWriter<Object> delegate) {
    this.delegate = delegate;
} 
```

}

现在，我的 ItemProcessor 可以输出一个包含所有要写入的实体的列表，我不需要依赖 JPA 来了解还有更多的实体要提交给数据库。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:30:25.867

我认为您正试图在一个步骤中容纳多个步骤。尝试找到一种方法并将您的工作定义为两步过程而不是一个过程。

```
 <batch:job id="MyJob" incrementer="incrementer" job-repository="jobRepository">
     <batch:step id="step1" next="step2">
       <tasklet >
          <chunk reader="reader1" 
                     writer="writer1" 
                     processor="processor1" 
                     commit-interval="10" />
       </tasklet>
     </batch:step>
     <batch:step id="step2">
       <tasklet >
          <chunk reader="reader2" 
                     writer="writer2" 
                     processor="processor2" 
                     commit-interval="10" />
       </tasklet>
     </batch:step>
    </batch:job> 
```

如果需要，请使用适当的缓存以获得最佳性能。

**编辑：**

在您的项目编写器中，请确保您使用`entityManager/session`的是第一个数据源。也可以`merge`用来持久化你的 eneities 来代替`persist`.

# plasticscm - 外网塑料单片机服务器访问

> ID：12877030
> 
> 赞同：2
> 
> 时间：2012-10-13T21:12:08.110
> 
> 标签：plasticscm

我在家中的一台 PC 上安装了 Plastic SCM 服务器（Windows 7 - Home Prem）。可以从我的家庭网络中的客户端访问服务器。它使用家庭网络 PC 名称作为服务器地址/可见名称来解析。

但是，我希望能够从家庭网络外部访问服务器。理想情况下，我想使用服务器所在的 ISP 分配给 PC 的 IP。我可以处理间歇性 IP 地址更改。PC 只是一台普通的、个人使用的 PC（即未配置为服务器）。

几个问题：这是否可以使用 ISP 分配给 PSCM-Server 所在 PC 的 IP 地址从家庭网络外部访问 Plastic SCM 服务器？

其次，服务器配置工具自动显示为PC的可见名称，在家庭网络中分配的名称。它不允许我输入 IP 地址。如果第一个问题的答案是肯定的，我该如何输入所需的 IP 地址？

也许在 Windows 7（家庭高级版）上必须进行任何配置？

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:48:07.403

Plastic SCM 服务器监听两个端口：一个 SSL 端口和一个普通 TCP 端口。如果您要在 Internet 上打开端口，我强烈建议您设置 SSL 连接。

[http://codicesoftware.blogspot.com/2010/08/ssl-enabled-plastic-connections-reborn.html](http://codicesoftware.blogspot.com/2010/08/ssl-enabled-plastic-connections-reborn.html)

为了配置您的 PC：

*   正如您所指出的，您需要将流量从路由器重定向到您的 PC
*   “重定向”必须从公共端口到 Plastic SCM 端口（TCP 或 SSL 端口）
*   您的 PC 应将防火墙配置为允许传入到塑料 SCM 端口的流量

关于您关于“服务器配置”的问题：不，它只显示名称，您无法设置 IP，因为它只是从您的服务器获取 IP/名称。否则它不会工作，除非你的意思是你有一台多 IP 机器。是这样吗？您的 PC 中是否有多个网卡？如果是这种情况，有一种方法可以指定在哪里收听，但让我们首先确认您的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T20:53:11.843

我假设您使用的是 Plastic 4.x（我不知道 3.x 版本与此有何相似之处）

你的第一个问题的答案是肯定的。我经常从我的工作机器连接到我的家庭塑料服务器以查看或获取我需要的项目/工具。

您的第二个问题在技术上并不准确 - 您需要的是 CLIENT 工具来访问您的服务器 IP 地址 - 这是可能的。

要回答您的最后一个问题 - 怎么做：在这台“外部”PC 上启动客户端配置工具。在客户端配置工具的第三页上，它要求选择 Plasti SCM 服务器 - 它为您提供服务器地址条目和端口条目。

您很可能已经在服务器上设置了用户名/密码访问类型，但您也可以使用本地用户 - 请务必在最后一页上选择您为服务器配置的适当登录类型。

您唯一的其他考虑因素是 Win7 上的防火墙（正如 Pablo 所指出的，您的路由器配置“指向”需要转发所需端口（8087/8088）上的服务器机器）必须允许访问这些端口。（我相信 3.x 使用了不同的端口）

# jquery - 为什么这个 CSS 全高布局不能正确显示？

> ID：12877031
> 
> 赞同：5
> 
> 时间：2012-10-13T21:12:15.587
> 
> 标签：jquery, html, css

**更新**：我奖励 50 赏金给任何可以帮助我实现[**这个设计**](http://sopranowebdesign.com/sfaa/example.jpg)的人。

* * *

所以我在过去的 2-3 个小时里一直在尝试解决这个问题，但似乎无法做到。也许有 CSS 或 jquery 经验的人可以帮助我。我正在努力[**做到这一点**](http://sopranowebdesign.com/sfaa/example.jpg)。这是[**我的结果**](http://sopranowebdesign.com/sfaa/)。问题是，当我调整浏览器窗口的大小时，B 列的内容被截断，并且 A 列左侧有一个额外的空白。[这是我](http://sopranowebdesign.com/sfaa/example2.jpg)**想要节省时间的[**屏幕截图。**](http://sopranowebdesign.com/sfaa/example2.jpg)**

 ****CSS：**

```
#public {
  width:100%;
}
#public #container {
  position:absolute;
  width:100%;
  height:100%;
  left:0;
  top:0;
  min-width:1050px;
}
#public .left {
  float:left;
  width:40%;
  height:100%;
  background-color:#fff;
}
#public .left .content {
  float:right;
  width:365px;
  margin-top:20px;
  text-align:center;
}
#public .left .platforms {
  margin-top:40px;
}
#public .left .aila {
  display:block;
  margin-top:25px;
}
#public .left .copy {
  margin-top:20px;
  color:#171515;
  font:bold 12px Arial, Verdana;
}
#public .right {
  float:right;
  width:60%;
  height:100%;
  overflow:hidden;
}
#public .right .content {
  float:left;
  width:665px;
  min-height:704px;
  margin-top:20px;
  background:url(images/public-right-shadow.png) no-repeat left top;
} 
```

**HTML：**

```
<div id="public">
  <div id="container">
    <div class="left">
      <div class="content">
        <img src="images/logo2.png" alt="" class="logo" />
        <img src="images/supported-platforms.png" class="platforms" />
        <div class="copy">&copy; all right reserved 2012</div>
      </div>
    </div><!--.left-->
    <div class="right">
      <div class="content">
      Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. 
      </div>
    </div><!--.right-->
  </div><!--#container-->
</div><!--#public--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:59:54.270

我似乎没有复制相同的输出，但是，对我来说，您的问题似乎在于您的内容类对象的宽度值。您有两个相对大小的对象，具体值是您的窗口大小的 40% 和 60%。 ，但是在这些里面，你有绝对宽度值（365px 和 665px）。因为你的截图分辨率是 1076px × 784px，这意味着你的右列，#public .right，被切割成大约 600+- px 的宽度，但是您在其中放置了 665px 宽度。这几乎肯定会溢出您的包装对象。因此为失控的文本创建有效空间。对于您溢出的文本问题，我会在那里寻找问题。

现在对于您的 #public .left 左侧的额外空间，这可能是因为您将其内容浮动到右侧。

但正如我所说，我不能复制相同的结果。所以如果修补它并不能解决您的问题，请随时提出更多问题。

编辑：对于您的右侧问题，即使您支持 1030px 宽度 ind

> 最小宽度：1050；

您的

> 公共权利

从中得到最大 630 ，但你正试图适应 665px

此代码应该可以解决您的问题

```
#public .right .content {
  /* change padding value to whatever feels right */
padding-right: 10px;
float:left;
 /* this loses the fixed size though */
width:100%;
min-height:704px;
margin-top:20px;
background:url(images/public-right-shadow.png) no-repeat left top;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:05:10.160

我已经为您做了一些简单的调整，据我所知，它按照您在问题中附加的图像工作。请参阅[http://joshdavenport.co.uk/staging/swd/](http://joshdavenport.co.uk/staging/swd/)。

区别在于：

```
#public #container {
    position:absolute;
    width:100%;
    height:100%;
    left:0;
    top:0;

    min-width: 960px;
} 
```

此`min-width`调整允许您的设计在减小页面大小时更靠近左侧。

```
#public .right .content {
    /* change padding value to whatever feels right */
    padding-right: 10px;
    float:left;
    /* this loses the fixed size though */
    min-height:704px;
    margin-top:20px;
    background:url(images/public-right-shadow.png) no-repeat left top;

    width: 510px;
    padding: 10px 40px; 
```

}

这里`width`确保该元素始终保持相同的宽度，并`padding`确保它远离左侧区域。您可能需要对此进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:51:20.230

这是我可能尝试实现的方法。我正在使用 jQuery 设置左右高度。我还稍微调整了标记以使用 ID 而不是类来表示左右元素，因此 jQuery 选择器会更快。

**CSS：**

```
 /* apply a natural box layout model to all elements */
    * { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

    html,
    body
    {
        width:100%;
        height:100%;
        margin:0;
        padding:0;
    }
    #public
    {
        width:100%;
        height:100%;
    }

    #public #container
    {
        min-width:1050px;
    }

    #public #left
    {
        float:left;
        width:40%;
    }

    #public #left .content
    {
        margin-top:20px;
        width:365px;
        float:right;
    }

    #public #left #logo img
    {
        max-width:100%;
        background-color:#e5e5e5;
    }

    #public #left #platforms
    {
        background-color:#888;
        height:30px;
    }

    #public #right
    {
        float:left;
        width:60%;
        background-image:url(images/bg_public.jpg);
    }

    #public #right .content
    {
        height:100%;
        padding:20px;
        background:url(images/public-right-shadow.png) no-repeat left top;
    } 
```

**HTML：**

```
<div id="public">
  <div id="container">
    <div id="left">
      <div class="content">
        <div id="logo"><img src="images/logo2.png" alt="" /></div>
        <div id="platforms"><img src="images/supported-platforms.png" /></div>
        <div id="copy">&copy; all right reserved 2012</div>
      </div>
    </div><!--.left-->
    <div id="right">
      <div class="content">
      Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. Right column here. 
      </div>
    </div><!--.right-->
  </div><!--#container-->
</div><!--#public--> 
```

**jQuery：**

```
$(document).ready(function(){
    var WindowResize = function(){
        var WindowHeight = $(window).height();
        $('#left, #right').css('height', WindowHeight);

    }

    WindowResize();
    $(window).bind('resize', WindowResize);
}); 
```**

# openoffice.org - 将评论从 OpenOffice 恢复到 docx 的任何方法

> ID：12877034
> 
> 赞同：0
> 
> 时间：2012-10-13T21:12:38.673
> 
> 标签：openoffice.org, docx

我正在与 OpenOffice 3.2 中的某人一起修改论文，并提出了一些在我重新打开 .docx 文件时似乎没有出现的评论。这些评论永远消失了吗？还是我没有正确查看文件？

当我将它保存为 .docx 时，我没有任何警告或消息，所以我不确定这是否是一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:19:15.543

我敢肯定这对你来说为时已晚，但也许这会帮助其他人。

从 3.4.1 开始，OpenOffice 目前存在一个描述此问题的错误。我自己也碰到了。[https://issues.apache.org/ooo/show_bug.cgi?id=113059](https://issues.apache.org/ooo/show_bug.cgi?id=113059)

基本上，如果您在 OpenOffice 中打开一个带有注释的 .docx 文件，每个注释框都会显示整个文档中的所有注释。此问题的解决方法是首先将文件保存为 Word 中的 .doc，然后在 OpenOffice 中打开 .doc 文件，而不是 .docx。

同样重要的是要注意 OpenOffice 不会保存为 .docx，因此在您的情况下，您可能没有丢失任何东西。如果打开带有注释的 .docx 文件，注释将在 OpenOffice 中被搞砸。如果您随后尝试保存该文档，它将在“另存为”对话框中提示您另存为 .doc，因为 OpenOffice 无法保存原始文件。生成的 .doc 文件将被永久地搞砸，所有评论在每个评论字段中组合和重复。但是，这实际上在这里无意中很方便，因为它可以防止上述错误通过强制您另存为新的 .doc 文件而导致您永久丢失原始文件中的所有注释。

这是显示您无法保存为 .docx 的打开错误：[https](https://issues.apache.org/ooo/show_bug.cgi?id=88355) ://issues.apache.org/ooo/show_bug.cgi?id=88355 。您还会注意到它不是“保存”对话框中的选项。

# python - 如何让 Python 播放声音？

> ID：12877037
> 
> 赞同：-1
> 
> 时间：2012-10-13T21:13:11.720
> 
> 标签：python, sockets

我正在编写一个 Python 聊天脚本，客户端如下所示：

```
import sys
import util
import thread
import socket

class ClientSocket():

rbufsize = -1
wbufsize = 0

def __init__(self, address, nickname=''):
    if type(address) == type(()) and type(address[0]) == type('') and 
type(address[1])== type(1):
        pass
    else:
        print ('Address is of incorrect type. \n' +
              'Must be (serverHost (str), serverPort (int)).')
        sys.exit(1)

    if nickname:
        self.changeNick(nickname)
    else:
        self.changeNick(raw_input('Nickname: '))

    self.prompt_on = False
    self.address = address

def connect(self):
    self.connection=socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.connection.connect(self.address)
    self.rfile = self.connection.makefile('rb', self.rbufsize)
    self.wfile = self.connection.makefile('wb', self.wbufsize)

    self.wfile.write('/nick ' + self.nickname + '\n')

def serve_forever(self):
    self.connect()

    thread.start_new_thread(self.acceptinput,())

    line = ""
    while line not in ('/exit','/quit', '/q'):
        self.prompt_on = True
        line = raw_input(self.prompt)
        self.prompt_on = False
        if line[:2] == '/n' or line[:5] == '/nick':
            self.changeNick(line.split(' ', 1)[1].strip())
        self.wfile.write(line + '\n')

    self.close()
    self.connection.shutdown(socket.SHUT_RDWR)
    self.connection.close()

def changeNick(self, newNick):
    self.nickname = newNick
    self.prompt = self.nickname+': '
    self.backspace = '\b' * len(self.prompt)

def acceptinput(self):
    while 1:
        data = self.rfile.readline().strip()
        if data:
            self.writedata(data)
            if 'Nickname successfully changed to' in data:
                self.changeNick(data.split('"')[1])

def writedata(self, data):
    if self.prompt_on:
        output = data if len(data) >= len(self.prompt) else data + ' '
(len(self.prompt) - len(data))
        sys.stdout.write(self.backspace + output + '\n' + self.prompt)
        sys.stdout.flush()
    else:
        print data

def close(self):
    if not self.wfile.closed:
        self.wfile.flush()
    self.wfile.close()
    self.rfile.close()

def main():
serverHost = raw_input('Server IP/Hostname: ')
if not serverHost:
    serverHost = util.getIP()
else:
    serverHost = socket.gethostbyname(serverHost)

serverPort = input('Server Port: ')
address = (serverHost, serverPort)

client = ClientSocket(address)
print 'Connecting to server on %s:%s' % (serverHost, serverPort)
client.serve_forever()

if __name__ == '__main__':
main() 
```

我想知道是否有办法在每次收到新消息时播放声音。可以使用 winsound 吗？（http://stackoverflow.com/questions/307305/play-a-sound-with-python）

谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:17:28.177

[winsound](http://docs.python.org/library/winsound.html)是标准库模块，让我感到*惊喜。*请注意，这仅在 Windows 上可用。

在您的 writa_data 函数中会发生什么，您在刷新之后执行此操作。这能达到你想要的效果吗？

```
import winsound
# Play Windows exit sound.
winsound.PlaySound("SystemExit", winsound.SND_ALIAS) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:55:37.470

好的，想通了！！！谢谢您的帮助！:DDD

您将第`winsound.PlaySound("SystemExit", winsound.SND_ALIAS)`101 行添加到`sys.stdout.write(self.backspace + output + '\n' + self.prompt)`. 现在，每当有新消息通过时，它都会播放“叮！”。如果您想使用运行脚本的同一目录中的自定义 .wav 声音，请`winsound.PlaySound("ding.wav", winsound.SND_FILENAME)`改为添加第 101 行。享受！

# ruby-on-rails - 预编译资产和非编译资产

> ID：12877038
> 
> 赞同：1
> 
> 时间：2012-10-13T21:13:18.297
> 
> 标签：ruby-on-rails, asset-pipeline

我可以将未预编译的资产与 Rails 应用程序内的资产一起使用吗？

我通过 Web 界面上传了单独的 CSS 文件，并且不想在每次添加新的 CSS 文件时预编译我的资产，因为 a）这将是一个过于手动的过程，并且 b）样式都转到一个页面，比如一个主题，所以使用相同的类名。这些 CSS 文件不需要任何处理，因为它们是简单的 CSS 文件。

CSS 文件位于 public 文件夹内 assets 文件夹的子文件夹中：`public/assets/styles/`.

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-11T10:05:16.523

Yes it is possible.

If i'm not wrong this SO link is very close to what you were trying to achieve

[Rails assets:precompile only one asset?](https://stackoverflow.com/questions/9713464/rails-assetsprecompile-only-one-asset)

Hope it helped !

# objective-c - 带有可点击链接的 iOS 文本弹出窗口

> ID：12877040
> 
> 赞同：1
> 
> 时间：2012-10-13T21:13:25.840
> 
> 标签：objective-c, uialertview

我正在寻找一种简单的解决方案来在包含带有超链接的文本的 iOS 应用程序中显示弹出文本。

目前，我的文本作为 UIAlertView 弹出。用户在下方有一个“关闭”按钮，可以关闭该框。但是，此类 (UIAlertView) 不允许在消息文本中使用超链接。我知道创建一个全新的自定义 UIAlertView 是不受欢迎的（更不用说对于我想要实现的目标可能有点矫枉过正）。

也许我使用 UIAlertViews 叫错了树。我是 iOS 新手，不知道可用的范围。本质上，我需要弹出一个对话框（或窗口），其中包含一串文本、一个（关闭/返回/关闭）按钮以及文本中可能的超链接。这些超链接依次启动其他弹出窗口/窗口/对话框。

我在这里工作的是一个简单的字典应用程序。这是一个包含术语的表格视图。术语导致定义，在大多数情况下，定义本身引用其他术语。相当简单，如果可能的话，我想使用标准的 API 类。

任何智慧将不胜感激。如果我真的必须沿着创建我自己的自定义 UIAlertView 类的路线走下去，那么别提了！在这种情况下，一些用于创建轻量级类的指针将不胜感激。我不想添加花哨的颜色或任何东西，只是能够单击文本位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:24:45.613

我认为你需要创建自己的 UIView 子类来完成这个技巧，由 UIViewController 子类控制。我用来使它看起来更像警报视图的一个技巧是将主弹出视图嵌入到具有清晰背景的全屏视图中。

一般来说，Apple SDK 可以很容易地做标准的事情（UIAlertView），但如果你想修改它（嵌入式链接），你需要自己做。

# .net - 如何防止与 Oracle 数据库的重复自动连接？

> ID：12877042
> 
> 赞同：2
> 
> 时间：2012-10-13T21:13:47.643
> 
> 标签：.net, oracle, database-connection, connection-pooling, dataprovider

**背景**

我们有一个 C#/VB.net 客户端应用程序使用连接到 Oracle 数据库的 WCF 服务。Web 服务使用 .NET 框架的 Oracle 数据提供程序连接到数据库（不要与 ODP 混淆）。我们的测试人员经历了偶发的 Oracle 帐户锁定，这似乎是在更改用户的 Oracle 密码后不久发生的。dba_audit_trail 日志显示了在没有任何用户或客户端活动的情况下，似乎以非常固定的时间间隔（即每两分钟一次）自动连接尝试。许多日志（IIS、WCF 跟踪、消息日志等）已确认这些连接尝试不是由客户端应用程序直接发起的；它们必须独立于 Web 服务或 System.Data.OracleClient 库内部。

在某些情况下，这些自动尝试在密码更改之前开始，并且它们成功连接到数据库，但是一旦密码更改，下一次尝试会因用户名/密码无效而失败。尝试三次后，帐户被锁定。我们正试图找到这些周期性连接尝试的来源。

[我在此处](https://forums.oracle.com/forums/thread.jspa?threadID=1114009)的 Oracle 论坛上发现了一个非常相似但未得到解答的问题。

**当前的想法**

我们最近的调查使我们相信这是连接池的意外行为。如果用户在密码更改之前连接到 Web 服务，则会为原始连接字符串创建一个连接池。更改密码并重新登录 Web 服务后，数据提供者将根据新的连接字符串创建一个新的连接池。

数据提供者内部的某些东西是否会试图使旧连接与第一个连接池保持活动状态？也许第一个连接池正在丢弃旧连接并尝试用新连接（现在无效的连接字符串）来补充它。什么可能导致这种情况？注意：我们使用最小/最大池大小 (0/100) 的默认设置。

我们不相信我们的代码直接尝试从第一个连接池访问连接。用户的会话没有任何关于前一个会话密码的记忆，因此不会使用旧的连接字符串来引用第一个连接池。此外，我们的代码中没有任何内容可以解释我们所看到的非常精确的连接间隔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:50:41.033

根本问题最终是未发布的数据库连接。打开连接时，它会从连接池中检出。如果连接从未关闭，则池认为它仍在使用中。这会导致池管理逻辑使用原始连接字符串定期重新验证数据库。当密码更改时，这很快会导致登录尝试失败和帐户锁定。

```
// Problem logic; connection is never closed/returned to the connection pool.
public static void ConnPoolTest1()
{
    OracleConnection conn = new OracleConnection(connectionStringWithPooling);
    conn.Open();

    //...Do some work

    // Sit on this line for 5-10 minutes and examine Oracle's dba_audit_trail.
    Console.ReadKey(); // Since connection was never released back to the connection pool, the
                       // data provider's pool management will regularly re-authenticate with DB.
                       // If user's password changes before this process dies (releasing the
                       // connection pools), you start accumulating failed password attempts.
} 
```

**解决此问题的正确方法是确保在完成连接后始终将连接返回到池中！**

```
// Best practice: ALWAYS CLOSE YOUR CONNECTIONS WHEN YOU ARE DONE!
public static void ConnPoolTest2()
{
    OracleConnection conn = new OracleConnection(connectionStringWithPooling);
    conn.Open();

    //...Do some work

    conn.Close();

    // Sit on this line for 5-10 minutes and examine Oracle's dba_audit_trail.
    Console.ReadKey(); // No problem here! No recurring authentication attempts because the
                       // connection has been returned to the pool.
} 
```

注意：其他答案建议在密码更改时关闭池并清除旧连接池。这些建议在我们搜索未发布资源时作为临时补丁为我们工作，它们极大地帮助我们隔离了问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T13:10:10.107

这可能会有所帮助。

[Oracle ODP.Net 和连接池](https://stackoverflow.com/questions/9131066/oracle-odp-net-and-connection-pooling)

和

[OLE DB、ODBC 和 Oracle 连接池](http://msdn.microsoft.com/en-us/library/ms254502.aspx)

基本上，在那里的第二个网页中，MSDN 声明“一旦创建，连接池在活动进程结束之前不会被破坏。”。看起来您的 Web 服务可能会占用如此多的连接/连接池，以至于它遇到了一些问题。

所以我的建议：除了做更多的故障排除可能会添加一些连接日志（可能只是一个文本文件），或者第一个链接有一个很好的命令来跟踪与数据库的连接，我会尝试关闭连接池目前。您似乎遇到的问题称为“池碎片”。这是您通过连接池传输所有数据库连接的单台计算机的流量很大的地方。最终会出现如此多的池，以至于开始出现内存问题并且连接没有正确关闭。第二个将是您的问题，如果连接未关闭，或者假设您的密码更改命令在使用旧连接池的其他命令列表之前执行，您将会遇到问题。

最终，在您的情况下，您将拥有一个单点（Web 服务），它创建自己的 Web 连接池（不是为用户）并通过自己的连接将数据提供给用户。这意味着必须有不同类型的身份验证，由 Web 服务端处理，以处理连接的用户。我敢肯定，现在您的模型可能会有太多变化，但我强烈建议您最终寻找解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T06:23:17.593

每当发生任何会使连接无效的事件时，您都需要销毁池，以便适当地标记池的任何泄漏连接和/或保持活动状态以防止重复使用。为此，您需要使用数据提供者的`clearpool`or`clearallpools`方法。

[http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracleconnection.clearpool.aspx](http://msdn.microsoft.com/en-us/library/system.data.oracleclient.oracleconnection.clearpool.aspx)

此外，您的全局异常管理器可以侦听为无效用户引发的异常，并通过枚举标识为连接字符串一部分的用户的连接来销毁该池。可能效率不高，但应该完成工作。

# java - 使用响应编写图像精灵

> ID：12877043
> 
> 赞同：2
> 
> 时间：2012-10-13T21:13:49.297
> 
> 标签：java, javascript, css, servlets

我只是图像精灵的新手，因此不知道如何解决我的问题。好吧，我的问题是我必须在服务器上动态生成一个图像精灵，并使用从浏览器发出的 AJAX 调用来接收它。我想使用 servlet 的响应对象将图像写入输出流，并在浏览器中接收它时，我想将图像精灵切成单独的片段。这可以实现吗？如果是，怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:54:33.847

我不确定您是否真的想尝试使用 ajax 检索图像。您可以只告诉服务器如何使用 ajax 生成精灵，然后使用 javascript 设置图像源。

```
 submit_imageStuff = function ( ) {
    var imageStuff = $('#input').val ( ) ;
        type : 'POST' ,
        url : 'createImage.php' ,
        data : { imageStuff:imageStuff } ,
        success : function ( data ) { $('#newImageDiv').html ( data ) ; refresh_email ( ) ; } 
```

至于如何对图像精灵进行切片，请查看 css-tricks.com [http://css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

# jquery - 从 jQuery 脚本中的 TOP 和 LEFT 值中减去像素

> ID：12877044
> 
> 赞同：1
> 
> 时间：2012-10-13T21:13:49.883
> 
> 标签：jquery, css, jquery-masonry, tweak

我想调整这个 Masonry 插件，以始终从每个“砖”上的 TOP 和 LEFT css 值中减去 1 个像素。

```
(function(a, b, c) {
    "use strict";
    var d = b.event,
        e;
    d.special.smartresize = {
        setup: function() {
            b(this).bind("resize", d.special.smartresize.handler)
        },
        teardown: function() {
            b(this).unbind("resize", d.special.smartresize.handler)
        },
        handler: function(a, b) {
            var c = this,
                d = arguments;
            a.type = "smartresize", e && clearTimeout(e), e = setTimeout(function() {
                jQuery.event.handle.apply(c, d)
            }, b === "execAsap" ? 0 : 100)
        }
    }, b.fn.smartresize = function(a) {
        return a ? this.bind("smartresize", a) : this.trigger("smartresize", ["execAsap"])
    }, b.Mason = function(a, c) {
        this.element = b(c), this._create(a), this._init()
    }, b.Mason.settings = {
        isResizable: !0,
        isAnimated: !1,
        animationOptions: {
            queue: !1,
            duration: 500
        },
        gutterWidth: 0,
        isRTL: !1,
        isFitWidth: !1,
        containerStyle: {
            position: "relative"
        }
    }, b.Mason.prototype = {
        _filterFindBricks: function(a) {
            var b = this.options.brickSelector;
            return b ? a.filter(b).add(a.find(b)) : a
        },
        _getBricks: function(a) {
            var b = this._filterFindBricks(a).css({
                position: "absolute"
            });
            return b
        },
        _create: function(c) {
            this.options = b.extend(!0, {}, b.Mason.settings, c), this.styleQueue = [];
            var d = this.element[0].style;
            this.originalStyle = {
                height: d.height || ""
            };
            var e = this.options.containerStyle;
            for (var f in e) this.originalStyle[f] = d[f] || "";
            this.element.css(e), this.horizontalDirection = this.options.isRTL ? "right" : "left", this.offset = {
                x: parseInt(this.element.css("padding-" + this.horizontalDirection), 10),
                y: parseInt(this.element.css("padding-top"), 10)
            }, this.isFluid = this.options.columnWidth && typeof this.options.columnWidth == "function";
            var g = this;
            setTimeout(function() {
                g.element.addClass("masonry")
            }, 0), this.options.isResizable && b(a).bind("smartresize.masonry", function() {
                g.resize()
            }), this.reloadItems()
        },
        _init: function(a) {
            this._getColumns(), this._reLayout(a)
        },
        option: function(a, c) {
            b.isPlainObject(a) && (this.options = b.extend(!0, this.options, a))
        },
        layout: function(a, b) {
            for (var c = 0, d = a.length; c < d; c++) this._placeBrick(a[c]);
            var e = {};
            e.height = Math.max.apply(Math, this.colYs);
            if (this.options.isFitWidth) {
                var f = 0;
                c = this.cols;
                while (--c) {
                    if (this.colYs[c] !== 0) break;
                    f++
                }
                e.width = (this.cols - f) * this.columnWidth - this.options.gutterWidth
            }
            this.styleQueue.push({
                $el: this.element,
                style: e
            });
            var g = this.isLaidOut ? this.options.isAnimated ? "animate" : "css" : "css",
                h = this.options.animationOptions,
                i;
            for (c = 0, d = this.styleQueue.length; c < d; c++) i = this.styleQueue[c], i.$el[g](i.style, h);
            this.styleQueue = [], b && b.call(a), this.isLaidOut = !0
        },
        _getColumns: function() {
            var a = this.options.isFitWidth ? this.element.parent() : this.element,
                b = a.width();
            this.columnWidth = this.isFluid ? this.options.columnWidth(b) : this.options.columnWidth || this.$bricks.outerWidth(!0) || b, this.columnWidth += this.options.gutterWidth, this.cols = Math.floor((b + this.options.gutterWidth) / this.columnWidth), this.cols = Math.max(this.cols, 1)
        },
        _placeBrick: function(a) {
            var c = b(a),
                d, e, f, g, h;
            d = Math.ceil(c.outerWidth(!0) / (this.columnWidth + this.options.gutterWidth)), d = Math.min(d, this.cols);
            if (d === 1) f = this.colYs;
            else {
                e = this.cols + 1 - d, f = [];
                for (h = 0; h < e; h++) g = this.colYs.slice(h, h + d), f[h] = Math.max.apply(Math, g)
            }
            var i = Math.min.apply(Math, f),
                j = 0;
            for (var k = 0, l = f.length; k < l; k++) if (f[k] === i) {
                j = k;
                break
            }
            var m = {
                top: i + this.offset.y
            };
            m[this.horizontalDirection] = this.columnWidth * j + this.offset.x, this.styleQueue.push({
                $el: c,
                style: m
            });
            var n = i + c.outerHeight(!0),
                o = this.cols + 1 - l;
            for (k = 0; k < o; k++) this.colYs[j + k] = n
        },
        resize: function() {
            var a = this.cols;
            this._getColumns(), (this.isFluid || this.cols !== a) && this._reLayout()
        },
        _reLayout: function(a) {
            var b = this.cols;
            this.colYs = [];
            while (b--) this.colYs.push(0);
            this.layout(this.$bricks, a)
        },
        reloadItems: function() {
            this.$bricks = this._getBricks(this.element.children())
        },
        reload: function(a) {
            this.reloadItems(), this._init(a)
        },
        appended: function(a, b, c) {
            if (b) {
                this._filterFindBricks(a).css({
                    top: this.element.height()
                });
                var d = this;
                setTimeout(function() {
                    d._appended(a, c)
                }, 1)
            } else this._appended(a, c)
        },
        _appended: function(a, b) {
            var c = this._getBricks(a);
            this.$bricks = this.$bricks.add(c), this.layout(c, b)
        },
        remove: function(a) {
            this.$bricks = this.$bricks.not(a), a.remove()
        },
        destroy: function() {
            this.$bricks.removeClass("masonry-brick").each(function() {
                this.style.position = "", this.style.top = "", this.style.left = ""
            });
            var c = this.element[0].style;
            for (var d in this.originalStyle) c[d] = this.originalStyle[d];
            this.element.unbind(".masonry").removeClass("masonry").removeData("masonry"), b(a).unbind(".masonry")
        }
    }, b.fn.imagesLoaded = function(a) {
        function i(a) {
            var c = a.target;
            c.src !== f && b.inArray(c, g) === -1 && (g.push(c), --e <= 0 && (setTimeout(h), d.unbind(".imagesLoaded", i)))
        }
        function h() {
            a.call(c, d)
        }
        var c = this,
            d = c.find("img").add(c.filter("img")),
            e = d.length,
            f = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",
            g = [];
        e || h(), d.bind("load.imagesLoaded error.imagesLoaded", i).each(function() {
            var a = this.src;
            this.src = f, this.src = a
        });
        return c
    };
    var f = function(b) {
        a.console && a.console.error(b)
    };
    b.fn.masonry = function(a) {
        if (typeof a == "string") {
            var c = Array.prototype.slice.call(arguments, 1);
            this.each(function() {
                var d = b.data(this, "masonry");
                if (!d) f("cannot call methods on masonry prior to initialization; attempted to call method '" + a + "'");
                else {
                    if (!b.isFunction(d[a]) || a.charAt(0) === "_") {
                        f("no such method '" + a + "' for masonry instance");
                        return
                    }
                    d[a].apply(d, c)
                }
            })
        } else this.each(function() {
            var c = b.data(this, "masonry");
            c ? (c.option(a || {}), c._init()) : b.data(this, "masonry", new b.Mason(a, this))
        });
        return this
    }
})(window, jQuery);​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T17:12:56.707

尝试使用负边距

```
margin: -1px -1px 0 0; 
```

见[http://jsfiddle.net/desandro/nJhVr/3/](http://jsfiddle.net/desandro/nJhVr/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T06:42:17.700

[这里](http://jsfiddle.net/nJhVr/1/)每个砌体元素周围有 1px 线。

**更新**您只能[像这样](http://jsfiddle.net/nJhVr/2/)在顶部和左侧有一条 1px 线，但是右侧和底部的 Masonry 元素根本不会有一条线。您可以改用 Isotope，测试[每个项目的位置](https://stackoverflow.com/a/6255657/963514)，以编程方式打开右侧和底部缺少的 1px 线，以查找#container 右侧和底部的项目。

# regex - 删除一行中的重复字符，包括空格

> ID：12877046
> 
> 赞同：3
> 
> 时间：2012-10-13T21:13:53.893
> 
> 标签：regex, perl

我目前有一个字符串，比如说`$line='55.25040882, 3,,,,,,'`，我想从中删除所有空格以及重复的逗号和句点。目前，我有：

```
 $line =~ s/[.,]{2,}//;
    $line =~ s/\s{1,}//; 
```

正如我所得到的那样有效`'55.25040882,3'`，但是当我尝试时

```
$line =~ s/[.,\s]{2,}//; 
```

它拉出“，”并留下“，，，，，”。我想保留第一个逗号并去掉空格。
有没有办法用一行正则表达式优雅地做到这一点？如果我需要提供其他信息，请告诉我。

编辑：由于有很多解决方案，我决定用以下答案更新我的问题：

```
$line =~ s/([.,])\1{1,}| |\t//g; 
```

这将删除所有重复的句点和逗号，删除所有空格和制表符，同时保留 \r 和 \n 字符。有很多方法可以做到这一点，但这是我解决的方法。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T04:43:27.467

这主要是对[Rohit 的回答](https://stackoverflow.com/a/12877163/20938)的批评，它似乎包含一些关于字符类语法的误解，尤其是否定运算符 ( `^`)。具体来说：

*   `[(^\n^\r)\s]`匹配`(`or `^`or `)`or 任何空白字符，*包括*换行符 ( `\n`) 和回车符 ( `\r`)。事实上，它们每个都被指定了两次（因为`\s`它们也匹配），尽管该类仍然一次只消耗一个字符。

*   `^[\n\r]|\s`匹配字符串开头的换行符或回车符，或任何地方的任何空白字符（这使得第一部分变得多余，因为*任何空白字符都*包括换行符和回车符，并且*任何地方都*包括字符串的开头）。

在字符类中，插入符号 ( `^`) 否定后面所有内容的含义，**如果**它紧接在开头之后出现`[`；在其他任何地方，它只是一个插入符号。所有其他元字符除了`\`完全在字符类中失去其特殊含义。（但通常非特殊字符`-`和`]`，变得特殊。）

在字符类之外，`^`是一个锚。

* * *

这是我编写正则表达式的方式：

```
$line =~ s/([.,])\1+|\h+//g; 
```

解释：

*   由于您最终选择了`([.,])\1{1,}`，我假设您想要匹配*重复的句点*或*重复的逗号*，而不是像`.,`or之类的东西`,.`。正则表达式的成功意味着学习以正则表达式引擎的方式查看文本，而且它并不直观。如果您尝试以正则表达式引擎的方式描述每个问题（如果它会说话的话），您会对自己有很大帮助。

*   `{1,}`不是不正确的，但是为什么在`+`做同样的事情时将所有这些混乱添加到您的正则表达式中呢？

*   `\h`匹配*水平*空格，包括空格和制表符，但不匹配换行符或回车符。（这只适用于 Perl，AFAIK。在 Ruby/Oniguruma 中，`\h`匹配一个十六进制数字；在我所知道的所有其他风格中，这是一个语法错误。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T21:29:17.017

您可以尝试使用：-

```
my $line='55.25040...882, 3,,,,,,';
$line =~ s/[^\S\n\r]|[.,]{2,}//g;  # Negates non-whitespace char, \n and \r
print $line 
```

**输出**： -

```
55.25040882,3 
```

*   `[^\S\n\r]|[.,]{2,}`-> 这意味着`[^\S\n\r]`要么`[.,]{2,}`
*   `[.,]{2,}`-> 这意味着替换`,`或者如果在同一行中`.`有多个。`2`
*   `[^\S\n\r]`-> 表示否定所有`whitespace character`、换行和换行。

# android - 为什么我的 Android 项目无法在 Eclipse 中正确加载？

> ID：12877048
> 
> 赞同：3
> 
> 时间：2012-10-13T21:14:02.217
> 
> 标签：android, eclipse, android-library

由于某种原因，今天我的 Android 项目没有在 Eclipse 中正确加载。我的意思是不正确的是，通常我在顶部有 src 和 gen，现在我在顶部有 Android Dependencies。

我的 src 和 gen 文件夹仍然存在，但没有像应有的那样加载。几乎就像它没有识别项目类型一样。这是一个我已经研究了一段时间的 Android 项目，我只是想不通为什么今天它没有正确加载。

在我的 Android 构建路径中，库下有以下内容。

```
Android 4.0.3
Android Dependencies 
```

编辑 1

另外，在我的控制台中，我抛出了这个错误。

```
/gen already exists but is not a source folder. Convert to a source folder or rename it. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:05:35.893

如果任何人发生这种情况，您需要右键单击 src 文件夹并转到构建路径->用作源文件夹。

然后，如果您的文件夹出现故障，您可以转到项目的构建路径并转到 Order & Export 选项卡，然后上下移动 src 和 gen 文件夹。

# wordpress - Apache 2.2.16：客户端被服务器配置拒绝

> ID：12877050
> 
> 赞同：2
> 
> 时间：2012-10-13T21:14:07.347
> 
> 标签：wordpress, apache

我的服务器配置有问题。我将 Apache 2.216、PHP 5.3.3 和 wordpress 3.4.2 与 Shopperpress 一起使用。有时我在 apache 日志文件中收到错误“服务器配置拒绝客户端：路径/到/文件”。是_tbs.php文件的路径，但文件权限没有问题，因为这个文件在页面上被调用了12次获取照片的拇指，只有几次错误。我认为它与具体照片无关，因为一旦正确显示这张照片，下一次相同的照片就会产生错误。

你知道什么是原因吗？感谢您的所有建议。维克多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T16:50:47.397

转到您的 VHOST 文件并替换：

```
Deny from all
Allow from 127.0.0.0/255.0.0.0 
```

和：

```
Require all granted 
```

这导致旧的配置文件和更新的 Apache 版本。从 Apache 2.4.3 开始，添加了一个新的安全特性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T18:05:09.413

我认为这是**MaxClients**或**MaxRequestsPerChild**配置的问题。

尝试恢复默认配置并重试。如果这不起作用，请重新安装 Apache 并清除旧配置。

你提供的信息很少。目前尚不清楚您在什么条件下工作（操作系统、已安装的模块、日志条目……）。

WordPress 3.4.2 非常古老且与安全相关。请更新 WordPress 和您的 WP 插件。

# ruby-on-rails-3 - 缩小样式表资产时，Rails 资产会保留 CSS 许可证注释

> ID：12877053
> 
> 赞同：0
> 
> 时间：2012-10-13T21:14:20.793
> 
> 标签：ruby-on-rails-3

如何在缩小的 Rails 样式表资产中保留 CSS 注释？

这与[此问题](https://stackoverflow.com/questions/8896969/rails-assets-keep-license-comments)类似，但适用于 CSS 而不是 JavaScript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:14:20.793

Rails 目前使用[YUI Compressor](http://developer.yahoo.com/yui/compressor/)在资产预编译期间缩小 CSS 样式表。请参阅Rails 资产指南的[这一部分](http://guides.rubyonrails.org/asset_pipeline.html#css-compression)。

为了防止某些评论被删除，只需在评论块中添加一个感叹号，如下所示：

```
/*!

License comment here won't be removed

*/ 
```

这[在此处](http://developer.yahoo.com/yui/compressor/css.html#min)记录。

# three.js - 无法获得第一人称控制作品

> ID：12877060
> 
> 赞同：0
> 
> 时间：2012-10-13T21:16:10.593
> 
> 标签：three.js

我从 Three.js 开始，我试图在我的场景中设置一个简单的第一人称控件，其中包含一个球体。我只看到黑屏。没有错误。

如果没有 FirstPersonControls，我可以看到球体。

我究竟做错了什么 ？

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style>
            #container {
                width: 400px;
                height: 300px;
            }
        </style>
        <script type="text/javascript" src="js/Three.js"></script>
        <script type="text/javascript">
            var controls;
            window.onload = function() {
                var RENDER_WIDTH = 400, RENDER_HEIGHT = 300;

                // Creating scene
                var scene = new THREE.Scene();

                // Camera
                var camera = new THREE.PerspectiveCamera(45, RENDER_WIDTH / RENDER_HEIGHT, 0.1, 10000);
                camera.position.z = 300;
                scene.add(camera);
                controls = new THREE.FirstPersonControls(camera);
                controls.movementSpeed = 1000;
                controls.lookSpeed = 0.125;
                controls.lookVertical = true;

                // Sphere
                var sphereMaterial = new THREE.MeshLambertMaterial({
                    color: 0x00ff00
                });
                var radius = 50, segments = 16, rings = 16;
                var sphere = new THREE.Mesh(
                    new THREE.SphereGeometry(radius, segments, rings),
                    sphereMaterial
                );
                scene.add(sphere);

                // Light
                scene.add(new THREE.AmbientLight(0x333333));
                var light = new THREE.PointLight(0xffffff, 0.9);
                light.position.set(50, 200, 50);
                scene.add(light);

                // Render
                var container = document.getElementById('container');
                var renderer = new THREE.WebGLRenderer();
                renderer.setSize(RENDER_WIDTH, RENDER_HEIGHT);
                renderer.setClearColorHex(0x000000, 1);
                container.appendChild(renderer.domElement);

                var clock = new THREE.Clock();
                setInterval(function() {
                    var delta = clock.getDelta();
                    controls.update(delta);
                    renderer.render(scene, camera);
                }, 100);
            };
        </script>
    </head>
    <body>
        <div id="container"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:51:27.743

`FirstPersonControls`设计用于全宽画布，因此您需要设置

```
var RENDER_WIDTH = window.innerWidth, RENDER_HEIGHT = window.innerHeight; 
```

同时删除您`style`的设置。

最后，为了更容易“找到”你的球体，设置`controls.lookVertical = false`——就在现在。

从那时起，您只需要进行实验。

# node.js - 哪个nosql db适合？

> ID：12877066
> 
> 赞同：2
> 
> 时间：2012-10-13T21:16:47.330
> 
> 标签：node.js, nosql, scaling, riak

我正在寻找建立一种社交网络。现在这不会是 Facebook 的规模，但我觉得它可能会有大量的追随者。我想构建具有可扩展性的系统。它还需要能够处理大量数据和关系。我希望有人能给我一些关于使用什么数据库的方向。我读过很多文章，但它们通常至少有一年的历史，而且数据库变化很快，所以我不知道人们所说的是否仍然成立。我真的很喜欢 riak 数据库，因为它真的很容易扩展，而且我喜欢所有节点都可以读写的事实。我担心的一个问题是数据之间的关系。但是，我相信riak中的链接会解决这个问题。但是在使用链接时会降低性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:31:40.560

关于该主题有几条评论：[由thinkworks](http://www.thoughtworks.com/articles/nosql-comparison)（和一些在福勒的书中），还有一些在[Cassandra vs MongoDB vs CouchDB vs Redis vs Riak vs HBase vs Membase vs Neo4j comparison](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)中。根据他们的说法，您需要“图形数据库”或“分布式对等存储”（Riak 在此处列出），或者，这会更好 - 它们的某种组合。如果性能是您主要关心的问题，我还建议开始对高负载场景进行建模，看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T21:20:28.440

这个问题可能会引起太多争论。但都一样；听起来你应该远离简单的键值，比如 redis，而应该使用更多的对象存储来存储你拥有的丰富的甚至是关系的元数据；像 MongoDB。

# php - 使用 javascript (htaccess?) 访问 Web 服务器外部的文件

> ID：12877072
> 
> 赞同：0
> 
> 时间：2012-10-13T21:17:27.693
> 
> 标签：php, javascript, macos, apache

我有一个本地服务器（Mac 10.8），我正在尝试从外部硬盘驱动器（HD：/Volumes/ 来自 Webserver：/Library/Server/Web/Data/Sites/Default）提供文件（视频和图像）。

我可以使用 PHP 读取外部硬盘驱动器上的所有文件，但通过 Web 浏览器（使用 JWPlayer 的 Javascript）访问它们变得更加困难。我猜这可以通过 htaccess 脚本来完成，但我对 htaccess 的了解充其量是有限的。

我尝试了 httpd.conf Alias (/media /Volumes/....) 并重新启动了 apache，但在导航到 /media 页面时只收到 404 错误。

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:56:39.980

事实证明，Mac 有一个内置的 Alias 功能，我可以使用它并且它工作正常。不知道为什么我无法在 httpd.conf 中使用别名，但我注意到 apache 文件都指向旧版本的 Mac OS：WebServer/（升级时来自 Snow Leopard）。

# android - android：线程以未捕获的期望（0xa13300）退出仅android 4.1

> ID：12877077
> 
> 赞同：0
> 
> 时间：2012-10-13T21:18:11.090
> 
> 标签：android, logcat

当我使用 menuItemSelect 时，
我遇到了一个类问题，但这个问题只出现在 android 4.1 上，我尝试使用 2.1 并运行。这是我的课

```
public void postLogout(String url2,String unico_id) {

           System.out.println("postLogout");
        try{
            unico_id = URLEncoder.encode("unique_id", "UTF-8") + "=" + URLEncoder.encode(unico_id, "UTF-8");
            URL url3 =new URL(url2);
              URLConnection con1 = (URLConnection) url3.openConnection();
              con1.setDoOutput(true);
              OutputStreamWriter wr1 = new OutputStreamWriter(con1.getOutputStream());
              wr1.write(unico_id);
              wr1.flush();
              System.out.println("antes buffer");
              BufferedReader recv1 = new BufferedReader(new InputStreamReader(con1.getInputStream()),800000000);
              //Los mostramos por pantalla
               s1 = recv1.readLine();
               System.out.println("el s");
              while(s1!=null){
                      System.out.println(s1);
                      s1=recv1.readLine();
                    }
           }catch (Exception e){
               System.out.println("en el catch");
               System.out.println(e.getMessage());

           }

        } 
```

例外这是我的目录：

```
10-13 21:07:19.915: W/dalvikvm(1433): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-13 21:07:19.977: E/AndroidRuntime(1433): FATAL EXCEPTION: main
10-13 21:07:19.977: E/AndroidRuntime(1433): java.lang.NullPointerException
10-13 21:07:19.977: E/AndroidRuntime(1433):     at com.android.internal.os.LoggingPrintStream.println(LoggingPrintStream.java:298)
10-13 21:07:19.977: E/AndroidRuntime(1433):     at com.example.rubrik.PostData.postLogout(PostData.java:164)
`enter code here`10-13 21:07:19.977: E/AndroidRuntime(1433):    at com.example.rubrik.LogOut.logout(LogOut.java:18)
10-13 21:07:19.977: E/AndroidRuntime(1433):     at com.example.rubrik.rubrik.onOptionsItemSelected(rubrik.java:175)
10-13 21:07:19.977: E/AndroidRuntime(1433):     at android.app.Activity.onMenuItemSelected(Activity.java:2534)
10-13 21:07:19.977: E/AndroidRuntime(1433):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:958)
10-13 21:07:19.977: E/AndroidRuntime(1433):     at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735) 
```

提前致谢

# vb.net - 使用 VBA 或 VB 和 Adob e SDK 提取 PDF 部分的屏幕截图或图片

> ID：12877079
> 
> 赞同：0
> 
> 时间：2012-10-13T21:18:35.773
> 
> 标签：vb.net, excel, acrobat, acrobat-sdk, vba

我目前正在使用 excel 宏（尽管必要时我会切换到 VB.NET）来循环遍历 PDF 中的所有文本并用 PDF 中的某些文本部分填充一个数组（通过 Adob​​e SDK 和 getPageNthWord） . 这部分工作得很好，但现在我想要更进一步。

PDF 的某些部分仅获取文本并不能提供完整的图片，我想看看我还能得到什么。这正是我想要获得的屏幕截图或片段：

![在此处输入图像描述](../Images/c85aa2d0af7da203942ef5ca712c2676.png)

所以，我知道我可以使用 getPageNthWordQuads 来查找“合规警告”一词的坐标，并且我也可以找到一种方法来找到屏幕的右下角，但我的问题从那里开始。获得这些坐标后，我将如何处理它们？我可以放大 PDF 以仅查看该部分然后截取屏幕截图吗？我已经有了活动窗口屏幕截图的代码，但我不知道如何滚动或缩放 PDF。

任何帮助将不胜感激。一种新的方法也将受到欢迎。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:18:33.250

可能有许多可行的方法 - 我对您的环境/限制了解不够，无法确定哪种方法最有效。我假设您在这里通过 OLE 与 Acrobat 交谈。

1）您可以打开一个窗口，获取它的 AVPageView 并要求它缩放并移动到您希望它做您的事情的位置。

2) 您可以使用 OpenInWindowEx 在您自己的一个窗口中打开 PDF 文档，然后获取该窗口的内容（优点是该窗口可以在屏幕外）。

3) 您可以使用 DrawEx 方法（在 AcroExch.PDPage 中）将页面的特定部分呈现到您自己的窗口中，然后对其进行处理。

# c# - DropDownListFor`s Selected 值适用于 ViewModel 但不适用于整数

> ID：12877081
> 
> 赞同：0
> 
> 时间：2012-10-13T21:18:52.093
> 
> 标签：c#, asp.net-mvc, html.dropdownlistfor

当我在下拉列表中选择一个模板并按 OK 按钮发布一个表单时，将创建 DeleteTemplateListViewModel 对象并用当前的 templateId 填充，并且 ModelState 是有效的。

当我在下拉列表中选择默认值“选择模板”并按 OK 按钮以发布表单时，将创建 DeleteTemplateListViewModel 对象并且 ModelState 为 InValid。

到目前为止，一切都很好。

但是，当我将删除操作更改为接受一个作为 selectedTemplateId 的整数时，ModelState 对选定的 templateId 有效。当我选择 DropDownListFor 中定义的默认值“选择模板”时，我在输出窗口中出现此异常：

> System.Web.Mvc.dll 中出现“System.ArgumentException”类型的第一次机会异常

如何使用整数作为操作参数而不是 viewModel ，以便 ModelState 对于默认值是 false/Invalid ？

```
@model ITMS.Web.Models.DeleteTemplateListViewModel

@using (Html.BeginForm("Delete", "Template"))
{ 
    @Html.ValidationSummary(false)      
    @Html.DropDownListFor(x => x.SelectedTemplateId, 
                               new SelectList(Model.DisplayList, "TemplateId", "Name"),
                               "Select a template", 
                               new { @class = "listviewmodel" })
}

public class DeleteTemplateListViewModel
{
    [Required(ErrorMessage = "No template selected.")]
    public int SelectedTemplateId { get; set; }
    public string Name { get; set; }
    public IEnumerable<TemplateViewModel> DisplayList { get; set; }
} 
```

**作品**

```
[HttpPost]
public ActionResult Delete(DeleteTemplateListViewModel viewModel)
{
    if (ModelState.IsValid)
    {
        int templateId = viewModel.SelectedTemplateId;
        _templateDataProvider.DeleteTemplate(templateId);
        return new JsonNetResult(new { success = true, templateId = templateId });
    }
    return LoadDeleteTemplates();
} 
```

**不工作**

```
[HttpPost]
public ActionResult Delete(int selectedTemplateId)
{
    if (ModelState.IsValid)
    {
        _templateDataProvider.DeleteTemplate(selectedTemplateId);
        return new JsonNetResult(new { success = true, templateId = selectedTemplateId});
    }
    return LoadDeleteTemplates();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T22:00:55.760

嗯，一个 int 不能真正得到一个非值。将您的 Delete 方法更改为接受和`int?`.

不知道 MVC 可以做一个 int 什么样的模型验证？没有其他数据，但您应该检查它是否为空。

# asp.net - 在模式弹出窗口中未触发选定的索引更改事件？

> ID：12877085
> 
> 赞同：0
> 
> 时间：2012-10-13T21:19:12.827
> 
> 标签：asp.net, selectedindexchanged

我有以下代码应该在模式弹出窗口中运行：

```
#region events

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        dt = DataObj.GetDataTable("GetScheduleNames");
        foreach (DataRow myrow in dt.Rows)
        {
            SchedNameLst.Add(Convert.ToString(myrow["ScheduleName"]));
        }
        SchedNameListDD.DataSource = SchedNameLst;
        SchedNameListDD.DataBind();

    }
}

 protected void SchedNameListDD_SelectedIndexChanged(object sender, EventArgs e)
{
    // should be in selected index fired event
    SchedName.Text = SchedNameListDD.SelectedItem.Text;
    string name = SchedNameListDD.SelectedItem.Text;
    dt = DataObj.GetDataTable("GetSchedDetails", name);

    foreach (DataRow myrow in dt.Rows)
    {
        StartTime.Text = myrow["StartTime"].ToString();
        EndTime.Text = myrow["EndTime"].ToString();
    }
    dt = DataObj.GetDataTable("GetSchedDetailsSat", name);
    foreach (DataRow myrow in dt.Rows)
    {
        SatSt.Text = myrow["StartTime"].ToString();
        SatEt.Text = myrow["EndTime"].ToString();
    }
 }

#endregion 
```

当我在下拉列表中更改我的项目选择时，我的 selectedIndexChanged 事件不会被触发.. y 是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-25T06:35:56.383

使用 onchange="javascript: __doPostBack(' **Dropdownlist** ',' **Patamers** ')"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:15:02.637

1.  确保您已在控件上启用 AutoPostBack，即`AutoPostBack = "true"`
2.  确保通过`EnableViewState="true"`在 Page 或 UserControl 指令中设置启用视图状态

# php - 管理大型网站的图像和其他媒体

> ID：12877087
> 
> 赞同：0
> 
> 时间：2012-10-13T21:19:27.503
> 
> 标签：php, apache, web-applications

我目前正在开发一个大型 Web 应用程序。用户将能够将图像和音乐文件发布到我的服务器。我正在将 PHP 与 Codeigniter 框架一起使用，并从 A2hosting.com 处理 Apache 服务器。我想知道我将如何管理空间。我知道他们提供无限的存储空间，但我知道如果太多人上传太多，我会遇到问题。

处理这个问题的最佳方法是什么？您是否有自己的单独托管计划来存储所有这些媒体？它可以通过第三方存储吗？我的网站最终会因为我为人们保留的内存太多而变慢吗？

我想我想知道我会遇到什么问题？我的项目几乎完成了，我想避免可能发生的任何大规模错误。我是唯一一个在这个项目上工作的人，所以人力非常宝贵，时间也是如此。

任何帮助和见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:21:57.907

任何以固定费率向您提供“无限存储”的人都会让您继续使用。

我们将媒体文件放在旨在处理[数万亿](http://aws.typepad.com/aws/2012/06/amazon-s3-the-first-trillion-objects.html)文件的 Amazon S3 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:02:20.037

如果您确实在本地托管上传的数据，请不要将您的上传文件夹放在您的 Web 根目录中的任何位置或远程用户可直接访问的位置。扩展您的存储很容易，但从整个网站或服务器受损中恢复并非易事！

# jquery - 使用单个滑块控制多个元素宽度

> ID：12877088
> 
> 赞同：0
> 
> 时间：2012-10-13T21:19:55.377
> 
> 标签：jquery

我正在尝试使用滑块控制多个元素的宽度。最好的方法是什么？

[http://jsfiddle.net/WQbsW/](http://jsfiddle.net/WQbsW/)

```
<ul>

<li id="text-1">1<div id="slider-vertical" style="height: 200px;"></div></li>
<li id="text-2">2<span id="slider-vertical" style="height: 200px;"></span></li>
<li id="text-3">3<span id="slider-vertical" style="height: 200px;"></span></li>
<li id="text-4">4<span id="slider-vertical" style="height: 200px;"></span></li>
<li id="text-5">5<span id="slider-vertical" style="height: 200px;"></span></li>
<li id="text-6">6<span id="slider-vertical" style="height: 200px;"></span></li>

</ul> 

$(document).ready(function() {
    $( "#slider-vertical" ).slider({
        orientation: "vertical",
        range: "min",
        min: 0,
        max: 100,
        value: 0,
        slide: function( event, ui ) {
            $( "#amount" ).val( ui.value );
    $('#text').css('width', ui.value + '%');
          //$("#text").text(ui.value + '%');   
        }
    });
}); 
```

# html - 单页 Web 应用程序：单个 html 文件还是使用 ajax 加载的多个文件？

> ID：12877089
> 
> 赞同：3
> 
> 时间：2012-10-13T21:20:03.960
> 
> 标签：html, ajax, web

我有这个相对较大的网络应用程序，它是一个带有 ajax 业务逻辑调用的单页。

目前我有一个加载所有css和js文件的小html文件，然后使用ajax加载页面的实际内容，所以我有15个html文件来加载单个页面（每个html文件都是一个“div”主html页面。

有几个文件更容易维护，但我的问题是：在性能/用户体验方面哪个更好？

保持原样（几个文件异步加载）或者有一个脚本在“编译”时间（部署时）加入所有文件？

我知道拥有一个 html 文件在网络性能方面更有效，但另一方面，一个小文件会加载得更快，其余内容将在“加载”对话框后加载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:32:06.643

最好减少文件作为脚本阻塞并按顺序加载，或者使用延迟加载。并行下载通常有每个域的限制，尽管我一生都记不住它是什么。

对于生产，如果您将脚本的单个有效负载和所有样式表一起编译，您可能会获得一些性能优势。我也会考虑缩小输出。Yahoo Compressor 和 Google Closure Compiler 是可用于实现此目的的两个工具。

这将告诉您更多关于停止阻塞的技术... [http://www.stevesouders.com/blog/2009/04/27/loading-scripts-without-blocking/](http://www.stevesouders.com/blog/2009/04/27/loading-scripts-without-blocking/)

一些性能提示，不仅限于 JavaScript...
[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

# python - Tornado websocket 日志记录

> ID：12877090
> 
> 赞同：2
> 
> 时间：2012-10-13T21:20:12.060
> 
> 标签：python, logging, tornado

我正在尝试使用 Tornado 网络服务器实现 websockets。

我的设置如下所示：

```
from tornado.options import options, define, parse_command_line
import django.core.handlers.wsgi
import logging
import tornado.httpserver
import tornado.ioloop
import tornado.web
import tornado.wsgi

from pogows.tornado_sockets import GetSocketHandler, UpdateSocketHandler
from mobile.cleaner import start_cleaning

define('port', type=int, default=8080)
tornado.options.options['log_file_prefix'].set('/var/www/pogo_django/logs/tornado_server.log')
tornado.options.parse_command_line()

<snip>

def main():

    logger = logging.getLogger(__name__)
    wsgi_app = tornado.wsgi.WSGIContainer(
        django.core.handlers.wsgi.WSGIHandler())
    tornado_app = tornado.web.Application(
        [
            ('/hello-tornado', HelloHandler),
            ('/socket/get', GetSocketHandler),
            ('/socket/update', UpdateSocketHandler),
            ('.*', tornado.web.FallbackHandler, dict(fallback=wsgi_app)),
        ], debug=True)
    logger.info("Tornado POGO server starting...")
    server = tornado.httpserver.HTTPServer(tornado_app)
    server.listen(options.port)
    start_cleaning()
    tornado.ioloop.IOLoop.instance().start() 
```

到目前为止，一切看起来都很好，龙卷风日志，我看到了信息消息。现在，我正在尝试从 websocket 处理程序类中记录一些内容。

```
class GetSocketHandler(tornado.websocket.WebSocketHandler):

    def open(self):
        print "opening"

    def on_closed(self):
        print "closing"

    def on_message(self, message):
        last_update=datetime.datetime.utcnow().replace(tzinfo=utc)
        try:
            print "getting_user"
    ... 
```

Tornado 由[supervisord 管理](http://supervisord.org/)，具有以下配置：

> [程序：pogo_tornado] 命令=/var/www/pogo_django/tornado_server.py 用户=www-data stdout_logfile=/var/www/pogo_django/logs/pogo_stdout.log stderr_logfile=/var/www/pogo_django/logs/pogo_stderr.log environment=PYTHONPATH="/var/www/pogo_django/",DJANGO_SETTINGS_MODULE="pogo.settings"

我尝试了几件事。

1.  只需使用`print`语句，正如您从上面的代码片段中看到的那样，希望 supervisord 能够捕获它并发送到 stdout/stderr 日志。
2.  在 websocket 类中创建一个单独的`logging.getLogger()`实例并使用它。

它都没有产生预期的结果。

当我从命令行手动运行龙卷风时，我确实看到`print`打印到控制台的版本，但`logging`无论如何都不起作用。

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T21:31:35.103

呸，我明白了。我在使用`getLogger()`时没有设置日志记录级别，只是盲目地登录到`DEBUG`.

明确使用`logger.setLevel(logging.DEBUG)`在日志中显示了我的消息。

显然 Tornado 默认设置了其他级别.. 愚蠢的我。

# function - 这两种方法定义的区别

> ID：12877093
> 
> 赞同：3
> 
> 时间：2012-10-13T21:20:37.597
> 
> 标签：function, scala, definition

这两个定义有什么区别？：

```
def sayTwords(word1: String, word2: String) = println(word1 + " " + word2)
def sayTwords2(word1: String)(word2: String) = println(word1 + " " + word2) 
```

每个的目的是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T21:29:32.413

第二个是咖喱，第一个不是。有关为什么选择 curry 方法的讨论，请参阅[Scala 中的 curried 函数背后的基本原理是什么？](https://stackoverflow.com/questions/12635695/whats-the-rationale-behind-curried-functions-in-scala)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T21:35:01.690

`sayTwords2`允许部分应用该方法。

```
val sayHelloAnd = sayTwords2("Hello")
sayHelloAnd("World!")
sayHaelloAnd("Universe!") 
```

请注意，您也可以以相同的方式使用第一个函数。

```
val sayHelloAnd = sayTwords("Hello", _:String)
sayHelloAnd("World!")
sayHelloAnd("Universe!") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T08:14:57.340

```
def sayTwords(word1: String, word2: String) = println(word1 + " " + word2)
def sayTwords2(word1: String)(word2: String) = println(word1 + " " + word2) 
```

第一个包含一个参数列表。第二个包含多个参数列表。

它们在以下方面有所不同：

1.  部分应用程序语法。观察：

    ```
    scala> val f = sayTwords("hello", _: String)
    f: String => Unit = <function1>

    scala> f("world")
    hello world

    scala> val g = sayTwords2("hello") _
    g: String => Unit = <function1>

    scala> g("world")
    hello world 
    ```

    前者具有位置语法的好处。因此，您可以在任何位置部分应用参数。

2.  类型推断。Scala 中的类型推断是根据参数列表进行的，并且从左到右进行。因此，给定一个案例，一个案例可能比其他案例更容易进行类型推断。观察：

    ```
    scala> def unfold[A, B](seed: B, f: B => Option[(A, B)]): Seq[A] = {
    |   val s = Seq.newBuilder[A]
    |   var x = seed
    |   breakable {
    |     while (true) {
    |       f(x) match {
    |         case None => break
    |         case Some((r, x0)) => s += r; x = x0
    |       }
    |     }
    |   }
    |   s.result
    | }
    unfold: [A, B](seed: B, f: B => Option[(A, B)])Seq[A]

    scala> unfold(11, x => if (x == 0) None else Some((x, x - 1)))
    <console>:18: error: missing parameter type
          unfold(11, x => if (x == 0) None else Some((x, x - 1)))
            ^

    scala> unfold(11, (x: Int) => if (x == 0) None else Some((x, x - 1)))
    res7: Seq[Int] = List(11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1)

    scala> def unfold[A, B](seed: B)(f: B => Option[(A, B)]): Seq[A] = {
    |   val s = Seq.newBuilder[A]
    |   var x = seed
    |   breakable {
    |     while (true) {
    |       f(x) match {
    |         case None => break
    |         case Some((r, x0)) => s += r; x = x0
    |       }
    |     }
    |   }
    |   s.result
    | }
    unfold: [A, B](seed: B)(f: B => Option[(A, B)])Seq[A]

    scala> unfold(11)(x => if (x == 0) None else Some((x, x - 1)))
    res8: Seq[Int] = List(11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1) 
    ```

# activemq - 无法在 Linux 上启动 Active MQ

> ID：12877094
> 
> 赞同：11
> 
> 时间：2012-10-13T21:20:38.037
> 
> 标签：activemq

我正在尝试让 ActiveMQ 服务器在 RaspberryPI Debian Squeeze 盒子上运行，并且所有内容似乎都已正确安装，但是当我尝试启动该服务时，我得到以下信息......

root@raspberrypi:/var/www/activemq/apache-activemq-5.7.0# bin/activemq

信息：正在加载“/etc/default/activemq”

信息：使用 java '/usr/jre1.7.0_07/bin/java'

/usr/jre1.7.0_07/bin/java: 1: /usr/jre1.7.0_07/bin/java:ELF0

```
 4°: not found 
```

/usr/jre1.7.0_07/bin/java：2：/usr/jre1.7.0_07/bin/java：语法错误：“（”意外

sysv init 脚本提供的任务：

```
restart         - stop running instance (if there is one), start new instance

console         - start broker in foreground, useful for debugging purposes

status          - check if activemq process is running

setup           - create the specified configuration file for this init script

                  (see next usage section) 
```

此脚本的配置：

```
The configuration of this script can be placed on /etc/default/activemq or /root/.activemqrc.

To use additional configurations for running multiple instances on the same operating system

rename or symlink script to a name matching to activemq-instance-<INSTANCENAME>.

This changes the configuration location to /etc/default/activemq-instance-<INSTANCENAME> and

$HOME/.activemqrc-instance-<INSTANCENAME>. Configuration files in /etc have higher precedence. 
```

root@raspberrypi:/var/www/activemq/apache-activemq-5.7.0#

看起来某处有错误，但我是一个相当新手，不知道在哪里看。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-04T12:28:22.870

只需添加一个答案，因为根据文档，该命令是错误的

启动activemqm，使用

导航到[安装目录/bin]并运行`./activemq start`或简单`bin/activemq start`

如果您想在窗口中看到它，请使用`bin/activemq console`

要停止，您必须终止该进程

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-24T09:34:49.347

默认的 ActiveMQ“入门”链接发送到这里：[http](http://activemq.apache.org/getting-started.html) ://activemq.apache.org/getting-started.html这是“ActiveMQ 4.x 入门指南”。

如果您向下滚动主文档页面，您会发现此链接带有正确的命令： [http ://activemq.apache.org/version-5-getting-started.html](http://activemq.apache.org/version-5-getting-started.html)

# java - 在java中刷新fileSystemViewer

> ID：12877096
> 
> 赞同：0
> 
> 时间：2012-10-13T21:20:46.950
> 
> 标签：java, filesystems, jtree

我正在尝试开发一个小型应用程序，该应用程序使用 gui 从系统上的任何位置移动文件。我有可以移动文件的代码，并且在选择和按下按钮时确实会移动，但我不知道如何刷新文件系统查看器以反映更改。我必须设置系统查看器的代码如下：

```
public class FileMover  {
//Start of Global Variables
private JTree tree;
private DefaultTreeModel treeModel;
private FileSystemView fileSystemView;
protected File currentFile;
protected LinkedList fileLocations;
protected JTree movedTree;
protected JPanel areaLeft;
protected JPanel areaRight;
protected JPanel areaMiddle;
protected final JFrame openFrame;
//end of global variables.

//Constructor for FileMover
public FileMover()
{
    openFrame = new JFrame("File Mover");
    createFileMover();

}
public void createFileMover(){

    Container contentPane = this.openFrame.getContentPane();
    fileLocations = new LinkedList();

    contentPane.setLayout(new BorderLayout());
    areaLeft = new JPanel();
    areaRight = new JPanel();
    areaMiddle = new JPanel();

    contentPane.add(areaLeft, BorderLayout.WEST);
    contentPane.add(areaRight, BorderLayout.EAST);
    contentPane.add(areaMiddle, BorderLayout.CENTER);

    areaLeft.add(createSystemView());
    movedTree = new JTree(fileLocations.toArray());
    JScrollPane movedPane = new JScrollPane(movedTree);
    JButton moveRightButton = new JButton("->");
    JButton moveLeftButton = new JButton("<-");
    JButton refresh = new JButton("Refresh");

    areaMiddle.setLayout(new GridLayout(1,2));
    areaMiddle.add(moveRightButton);
    areaMiddle.add(refresh);
    areaMiddle.add(moveLeftButton);

    //actualy move the file

    moveRightButton.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){

            System.out.println("Moving file: "+ currentFile.getName());
            fileLocations.add(currentFile);
            try {
                //move the file to the correct location.
                moveFile(currentFile);

            } catch (IOException ex) {
                Logger.getLogger(FileMover.class.getName()).log(Level.SEVERE, null, ex);
            }
            System.out.println(fileLocations.getFirst().toString());
        }
    });

    //refresh the gui
    refresh.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            refresh();
        }
    });

    //finish setting up the frame
    openFrame.setSize(1280, 768);
    openFrame.setLocationRelativeTo(null);
    openFrame.setDefaultCloseOperation(3);
    openFrame.setResizable(false);
    openFrame.pack();
    openFrame.setVisible(true);

}

/** Add the files that are contained within the directory of this node.
*/
private void showChildren(final DefaultMutableTreeNode node) {
    tree.setEnabled(false);

    SwingWorker<Void, File> worker = new SwingWorker<Void, File>() {
        @Override
        public Void doInBackground() {
            File file = (File) node.getUserObject();
            if (file.isDirectory()) {
                File[] files = fileSystemView.getFiles(file, true); //!!
                if (node.isLeaf()) {
                    for (File child : files) {

                            publish(child);

                    }
                }

            }
            return null;
        }

        @Override
        protected void process(List<File> chunks) {
            for (File child : chunks) {
                node.add(new DefaultMutableTreeNode(child));
            }
        }

        @Override
        protected void done() {

            tree.setEnabled(true);
        }
    };
    worker.execute();
}

/** Update the File details view with the details of this File. */
private void setFileDetails(File file) {
    System.out.println("Path: "+ file.getPath());
    System.out.println("Name: "+ fileSystemView.getSystemDisplayName(file));

}
private void refresh(){
    //refresh the tree here

}
private JScrollPane createSystemView(){
    //file syatem hierarchy
    fileSystemView = FileSystemView.getFileSystemView();    

    // the File tree
        DefaultMutableTreeNode root = new DefaultMutableTreeNode();
        treeModel = new DefaultTreeModel(root);

        TreeSelectionListener treeSelectionListener = new TreeSelectionListener() {
            @Override
            public void valueChanged(TreeSelectionEvent tse){
                DefaultMutableTreeNode node =
                    (DefaultMutableTreeNode)tse.getPath().getLastPathComponent();
                showChildren(node);
                setFileDetails((File)node.getUserObject());
                currentFile = (File)node.getUserObject();
            }
        };

        // show the file system roots.
        File[] roots = fileSystemView.getRoots();
        for (File fileSystemRoot : roots) {
            DefaultMutableTreeNode node = new DefaultMutableTreeNode(fileSystemRoot);
            root.add( node );
            File[] files = fileSystemView.getFiles(fileSystemRoot, true);
            for (File file : files) {
                if (file.isDirectory()) {
                    node.add(new DefaultMutableTreeNode(file));
                }
            }

        }

        tree = new JTree(treeModel);
        tree.setRootVisible(false);
        tree.addTreeSelectionListener(treeSelectionListener);
        tree.setCellRenderer(new FileTreeCellRenderer());
        tree.expandRow(0);
        JScrollPane treeScroll = new JScrollPane(tree);
        tree.setVisibleRowCount(15);

        Dimension preferredSize = treeScroll.getPreferredSize();
        Dimension widePreferred = new Dimension(
            200,
            (int)preferredSize.getHeight());
        treeScroll.setPreferredSize( widePreferred );

        return treeScroll;
} 
```

向左移动按钮和向右区域尚未完成，但我需要的是当我在树中选择一个节点并单击向右箭头按钮时，节点反映的文件/文件夹由我的 moveFile 代码在内部移动，并且有效。但是该更改并未反映在树中，因此如何在树中显示此更改，即刷新树以显示文件系统的当前状态？

我试过 treeModel.reload(); 但这似乎不起作用并引发空指针异常。

我试过了 ：

```
areaLeft.removeAll();

areaLeft.add(createSystemView()); 
```

认为它可以通过重新创建系统视图来刷新它，但这似乎没有任何作用。

在这里的帮助将不胜感激！

编辑：以下是文件树渲染器的请求代码：

```
/** A TreeCellRenderer for a File. */
class FileTreeCellRenderer extends DefaultTreeCellRenderer {

private static final long serialVersionUID = -7799441088157759804L;

private FileSystemView fileSystemView;

private JLabel label;

FileTreeCellRenderer() {
    label = new JLabel();
    label.setOpaque(true);
    fileSystemView = FileSystemView.getFileSystemView();
}

@Override
public Component getTreeCellRendererComponent(
    JTree tree,
    Object value,
    boolean selected,
    boolean expanded,
    boolean leaf,
    int row,
    boolean hasFocus) {

    DefaultMutableTreeNode node = (DefaultMutableTreeNode)value;
    File file = (File)node.getUserObject();
    label.setIcon(fileSystemView.getSystemIcon(file));
    label.setText(fileSystemView.getSystemDisplayName(file));
    label.setToolTipText(file.getPath());

    if (selected) {
        label.setBackground(backgroundSelectionColor);
        label.setForeground(textSelectionColor);
    } else {
        label.setBackground(backgroundNonSelectionColor);
        label.setForeground(textNonSelectionColor);
    }

    return label;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:23:32.283

因为从您的代码看起来您​​知道自己在做什么，所以我将仅展示仅在您*第一次*按下刷新按钮时才有效的基本示例：

```
private DefaultMutableTreeNode someNode;
private void refresh(){
    System.out.println(someNode);
    treeModel.removeNodeFromParent(someNode);
} 
```

并像这样重写 createSystemView() 的一部分：

```
 int  cnt = 0;
        for (File file : files) {
            if (file.isDirectory()) {                    
                if ((cnt++) == 5) {                        //1
                    System.out.println(file.getPath());
                    node.add(someNode = new DefaultMutableTreeNode(file));
                }
                else {
                    node.add(new DefaultMutableTreeNode(file));
                }
            }
        } 
```

这仅在您的根目录*下至少有六个*（注释 1）目录时才有效。运行该文件，从根目录计算目录 - 当您按下刷新按钮时，它将删除第六个目录。如果再次按下按钮，它将尝试删除已删除的节点，因此您将收到 IllegalArgumentException。

您需要在[treeModel上调用](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeModel.html)[removeNodeFromParent](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeModel.html#removeNodeFromParent%28javax.swing.tree.MutableTreeNode%29)：

> 消息此以从其父节点中删除节点。这将消息 nodesWereRemoved 以创建适当的事件。这是删除节点的首选方式，因为它会为您处理事件创建。

另请参阅此[示例](http://www.exampledepot.com/egs/javax.swing.tree/RemNode.html)。

如果您想刷新整个视图，您应该像在初始化时那样在 referh 函数中重新创建模型，或者只是迭代模型并根据需要进行更新——但我建议 在这种情况下对模型进行[广度优先遍历](http://en.wikipedia.org/wiki/Breadth-first_search)。

编辑：

“因此，每次移动刷新后，FS 都会再次显示它们现在应该位于的文件”。让我们从重新初始化模型开始，我只指[DefaultTreeModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/DefaultTreeModel.html)类的 treeModel 实例。

因此，在 refresh() 方法中创建一个新的 treeModel 实例，并用 DefaultMutableTreeNode 实例填充它，就像在 createSystemView() 方法中所做的那样：

```
 DefaultMutableTreeNode root = new DefaultMutableTreeNode();
 treeModel = new DefaultTreeModel(root);
 File[] roots = fileSystemView.getRoots();
    for (File fileSystemRoot : roots) {
        DefaultMutableTreeNode node = new DefaultMutableTreeNode(fileSystemRoot);
        root.add( node );
        File[] files = fileSystemView.getFiles(fileSystemRoot, true);
        for (File file : files) {
            if (file.isDirectory()) {
                node.add(new DefaultMutableTreeNode(file));
            }
        }
    } 
```

我们已经准备好了模型，现在我们需要将它设置到树上，我相信仅仅是：

```
tree.setModel(treeModel); 
```

应该足够了，请注意您不需要添加侦听器，因为 setModel 方法将侦听器从旧模型重新附加到新模型，并且还通知 JTree 视图相应地重绘自身 - 我检查了源代码。如果它不会重绘（我对此表示怀疑，但我没有对此进行测试）强制它在下一行中，如下所示：

```
treeModel.reload(); 
```

此处为 reload() 方法的 [APIdoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/DefaultTreeModel.html#reload%28%29)。

但是，如果您想在刷新函数中更新模型，我认为这对于称为“刷新”的操作会更自然，您需要获取新的第一级目录，然后像这样遍历树（因为我们'正在遍历所有根的孩子，这将是提到的广度优先遍历）：

```
int firstLevelCount = treeModel.getChildCount(root);
DefaultMutableTreeNode child;
for (int i=0; i < firstLevelCount; i++) {
   child = treeModel.getChild(root, index); 
   // update logic part 1
}
// update logic part 2
treeModel.reload(); 
```

您将需要[DefaultMutableTreeNode.getUserObject()](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/DefaultMutableTreeNode.html#getUserObject%28%29)方法，该方法将返回该树节点所代表的文件。

显然，您需要从模型中删除不在新文件数组中的所有节点，并且对于模型中没有对应节点的所有文件，您需要将它们添加到模型中.

我建议不要使用 files 数组而是 list （这样你就可以从[List.contains()](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#contains%28java.lang.Object%29)方法中受益），例如

```
List<File> files = new ArrayList<File>(Arrays.asList(FileSystemView.getFileSystemView().getRoots())); 
```

另外，像这样重写渲染器的一部分：

```
if (file != null) {
    label.setIcon(fileSystemView.getSystemIcon(file));
    label.setText(fileSystemView.getSystemDisplayName(file));
    label.setToolTipText(file.getPath());
} 
```

因为您视图中的根节点没有关联文件，所以您很可能会在某个时候更新模型时获得[NPE 。](http://docs.oracle.com/javase/6/docs/api/java/lang/NullPointerException.html)

在我描述的第二个变体中，您可能会想从循环内部（在更新逻辑 1 部分）删除根子节点 - 如果这样做，您很可能会得到一个[ConcurrentModificationException](http://docs.oracle.com/javase/6/docs/api/java/util/ConcurrentModificationException.html)。解决方案是制作另一个

```
List<DefaultMutableTreeNode> toBeRemoved = new ArrayList<DefaultMutableTreeNode>(); 
```

并在 //update logic part 1 位置（在循环中）而不是从模型中删除节点，而是将其放入该列表中。当您完成循环迭代后，您只需迭代该列表并将它们从模型中删除它们 //update logic part 2 地方，例如

```
for (DefaultMutableTreeNode node : toBeRemoved) {
    treeModel.removeNodeFromParent(node);
} 
```

如前所述，这将自动触发视图（JTree）重绘，因此请查看最适合您需要的内容。

编辑^2：

关于刷新方法的第二个变体，您已经有了

```
private DefaultTreeModel treeModel; 
```

作为全局变量，您可以像这样获得树的根（[getRoot()](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/DefaultTreeModel.html#getRoot%28%29)）

```
DefaultMutableTreeNode root = (DefaultMutableTreeNode)treeModel.getRoot(); 
```

正如你已经做的那样，你获得了文件系统的当前状态，如下所示：

```
FileSystemView.getFileSystemView().getRoots(); 
```

这些是您编写所描述的 refresh() 方法所需的所有变量。

关于移动（带箭头的按钮 (<- , ->)）操作，从您的 treeSelectionListener 内部将此变量设为全局：

```
DefaultMutableTreeNode node = (DefaultMutableTreeNode)tse.getPath().getLastPathComponent(); 
```

使用这个变量（我们称之为 selectedNode），您可以使用 DefaultTreeModel 方法：

*   [removeNodeFromParent（MutableTreeNode 节点）](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/DefaultTreeModel.html#removeNodeFromParent%28javax.swing.tree.MutableTreeNode%29)
*   [insertNodeInto(MutableTreeNode newChild,MutableTreeNode parent,int index)](http://docs.oracle.com/javase/6/docs/api/javax/swing/tree/DefaultTreeModel.html#insertNodeInto%28javax.swing.tree.MutableTreeNode, javax.swing.tree.MutableTreeNode, int%29)

请注意，这两种方法都会触发 JTree 重绘。这应该足以实现您描述的操作。此外，您可以像这样重写 moveButton actionListener 方法：

```
moveRightButton.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
        if (selectedNode != null) {
             //all the move-code-refresh-tre-view-here
             selectedNode = null;
        }
    }
}); 
```

selectedNode 将仅由 treeSelectionListener 设置，因此通过这种方式，您可以确保文件移动操作仅在树视图中实际选择文件时才会发生。

# javascript - javascript split() 数组包含

> ID：12877097
> 
> 赞同：2
> 
> 时间：2012-10-13T21:20:57.097
> 
> 标签：javascript, regex, string

在学习 JavaScript 时，我不明白为什么打印 Sting.split() 方法（以正则表达式作为参数）返回的数组时的输出如下所述。

```
var colorString = "red,blue,green,yellow";
var colors = colorString.split(/[^\,]+/);
document.write(colors); //this print 7 times comma: ,,,,,,, 
```

但是，当我打印数组颜色的单个元素时，它会打印一个空字符串、三个逗号和一个空字符串：

```
 document.write(colors[0]);  //empty string
 document.write(colors[1]);  //,
 document.write(colors[2]);  //,
 document.write(colors[3]);  //,
 document.write(colors[4]);  //empty string
 document.write(colors[5]);  //undefined
 document.write(colors[6]);  //undefined 
```

那么，为什么直接打印数组会给出七个逗号。

虽然我认为在第二个输出中使用三个逗号是正确的，但我不明白为什么会有一个开始（在索引 0 处）和结束空字符串（在索引 4 处）。

请解释我在这里搞砸了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T21:24:14.477

`/[^\,]+/`拆分一个或多个**不是**逗号的字符。因此，JavaScript 会将您的字符串拆分为`red`等`blue`。然后，生成的剩余部分是开头的空字符串（从索引 0 到 0 的子字符串）、逗号和结尾的空字符串。如果你超出了你得到的数组的范围`undefined`（就像任何数组一样）。

```
red,blue,green,yellow
xxx xxxx xxxxx xxxxxx   <-- x is what is being eaten during split, because it's the delimiter 
```

您只需要`.split(",")`，它以逗号分隔，以便逗号被吃掉，而您只剩下颜色。

现在，当您这样做时`document.write(someArray)`，数组将转换为字符串以便显示。这实际上意味着`someArray.join()`被调用，默认情况下在两者之间放置逗号。所以你得到逗号连接逗号，从而产生更多的逗号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T21:24:44.883

当你打印出数组时，数组的不同元素也用逗号分隔。所以你的输出是这 5 个数组元素：

```
[empty string],[comma],[comma],[comma],[empty string] 
```

共 7 个逗号。你得到逗号和空字符串而不是颜色的原因是，它`split`会在所有匹配的地方分割（而不是给你所有匹配的东西）。所以根本不使用正则表达式，而只是拆分`,`：

```
var colors = colorString.split(','); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T21:25:25.270

[^\,] <- 这意味着除了**逗号**之外的任何东西。

尝试 `var colors = colorString.split(',');`

# java - 我们可以在 Java 中调用没有对象的非静态类的方法吗？

> ID：12877100
> 
> 赞同：0
> 
> 时间：2012-10-13T21:21:14.180
> 
> 标签：java, static, wrapper

包装类`Integer`具有静态方法`parseInt()`，使用如下：

```
Integer.parseInt(); 
```

我认为只有静态类的方法可以这样调用（即`Class.doMethod()`）。所有非静态类都需要实例化对象才能使用它们的方法。

我检查了 API，显然`Integer`被声明为`public final Integer`- 不是静态的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T21:22:11.853

任何类都可以同时包含`static`非静态方法。当调用`static`任何类的方法时——包括你自己的——你*不需要*实例化类的实例，只需使用类名调用方法：`MyClass.methodName()`.

事实上，即使以下方法也可以：

```
Integer nullInt = null;
nullInt.parseInt("5"); 
```

这是因为在调用方法时只有引用的类*类型很重要。*`static`但是考虑一下这种糟糕的风格：总是使用 eg`Integer.parseInt`代替。

另请注意，无论如何您都不能声明顶级类`static`：只有嵌套/内部类可以声明为静态类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T21:25:07.210

不，你错了。

只有静态方法可以这样调用，但它们可能属于“非静态”类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T21:41:08.430

在 java 中，可以从对象调用静态方法，但这只会产生警告并且仍然可以编译。非静态类可以具有所有实例共享的静态字段和方法（这就是为什么“共享”在 VB.NET 中意味着静态）。因此，从对象访问静态成员可能会使读者感到困惑，因此必须避免。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T21:25:08.330

一种表达方式： An`Integer`是一个具体的对象；你可以有很多`Integer`s。只有一个`Integer.MAX_VALUE`。

也就是说，有些东西带有`Integer`s 是具体的，而有些东西只需要存在一次，任何地方。

# html - 如何从 div 语句中排除标签

> ID：12877102
> 
> 赞同：0
> 
> 时间：2012-10-13T21:21:33.137
> 
> 标签：html, tags

我正在尝试制作一个围绕除标签之外的所有内容的 div`<p>`标签。有没有办法排除某个或某些标签？谢谢您的帮助。

我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<head>
<link rel="stylesheet" type="text/css" href="styles.css" />

<body>

<div id='main'>

<h1>FREE Python programs!</h1>

<h3><p>You're saying to yourself "I could use a handy little program that does this
" or "I need a better calculator than Windows has provided me!" THIS IS THE SITE YOU'VE      BEEN LOOKING FOR! Just email me at:</p></h3> 

<a href="mailto:benevedeselias@gmail.com" target="_blank">Python Program Maker</a>

<h3><p>And I'll respond as fast as I can!</p></h3>
<p>This is my portfolio of very small applications:</p>

<a href="portfolio.zip">Portfolio Download</a>

<p>If you would like to subscribe to my Python Mailing list, click on the link above to    shoot me an email. Please have the subject be "Add to mailing list". All this mailing list    would do is send you updates to my website, python programs, or portfolio. This would mean   a great lot to me if you did.</p>

<p>These links provide more information about each piece in my portfolio:</p>

<a href='CardDrawer.html'>Card Drawer</a>
<a href='BlockGame.html'>Block Game</a>
<a href='Dice.html'>Dice</a>
<a href='SecretNumber.html'>Secret Number</a>

<p>If you would like to learn python yourself, I have started a video tutorial series.     Here is the first one:</p>
<iframe width="560" height="315" src="http://www.youtube.com/embed/STe5x9V8kbk?rel=0"    frameborder="0" allowfullscreen></iframe>

</div>

</body>

</head> 
```

我所要做的就是避免在每个 p 标签处中断多个 div 标签并在它之后重新开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:29:03.330

为什么你不想让 div 围绕 p 标签？

使用一个包含 p 标签的 div 标签，您应该能够在 CSS 中为所有内容设置样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:29:28.983

我真的不明白你的意思，但我可以尝试：

你可以给你的`<p>`标签他们自己的类和/或ID。你可以在你的css中为它创建一个类/id，这样他们就会忽略给你div的css。（我希望这就是你的意思）

所以你得到：

```
<p class="yourclass">text</p> 
```

你甚至可以给他们不同的背景颜色。如果您不想将它们放在您的 div 中，只需将它们放在它之外。虽然没有太大的好处...

如果你的意思是你想用每个 div 结束，这就是你必须做的。没有办法解决它。

# java - 调用活动android的方法

> ID：12877103
> 
> 赞同：2
> 
> 时间：2012-10-13T21:21:49.203
> 
> 标签：java, android, android-activity

我正在寻找可以以编程方式从应用程序中的活动调用另一个活动的所有方法。我目前知道的是创建一个新意图，并使用所需的活动类调用启动意图。还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:32:24.690

这确实是 Activity 控制的标准模型。`startActivity(Intent)`是来自 Activity 子类的 Context 类的方法。

一个重要的区别是`startActivity(Intent)`和`startActivityForResult(Intent, int)`。`startActivityForResult(Intent, int)`如果您希望从新活动中获得一些结果，您将使用。第二个`int`参数允许您区分返回结果的多个活动（即，如果您可能从给定活动启动多个子活动）。这是在一种方法中处理的，您可以[在此处](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)`onActivityResult(Intent, int, options)`阅读所有相关信息。一般来说，如果您进行大量 Android 编程，您应该熟悉[Activity 文档，因为 Activity 生命周期很重要并且可能很棘手。](http://developer.android.com/reference/android/app/Activity.html)

# iphone - 如何设置委托

> ID：12877109
> 
> 赞同：0
> 
> 时间：2012-10-13T21:22:49.000
> 
> 标签：iphone, objective-c, delegates

我有这个简单的课程

**测试视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "ClassB.h"

@protocol TestViewControllerDelegate <NSObject>

-(void)hello;

@end

@interface TestViewController : UIViewController

@property (nonatomic , weak) id<TestViewControllerDelegate> delegate;

@end 
```

**测试视图控制器.m**

```
#import "TestViewController.h"

@interface TestViewController ()

@end

@implementation TestViewController
@synthesize delegate = _delegate;

- (void)viewDidLoad
{
    [super viewDidLoad];

    /******* WHAT SHOULD I WRITE HERE?!?? *****/

    [self.delegate hello];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

@end 
```

另一个类：

**B类.h**

```
#import <Foundation/Foundation.h>
#import "TestViewController.h"

@interface ClassB : NSObject <TestViewControllerDelegate>

@end 
```

**B类.m**

```
#import "ClassB.h"
@implementation ClassB

-(void)hello
{
    NSLog(@"HELLO!");
}

@end 
```

现在我需要创建 ClassB 的实例并将这个实例设置为 TestViewContoller 的委托，但我不知道我需要写什么！你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:28:15.940

你在那里写的是正确的。您唯一需要做的另一件事是将 ClassB 设置为 TestViewController 的委托。一种常用的方法是让 ClassB 实例化 TestViewController，然后将自己设置为委托：

B类：

```
TestViewController *test = [[TestViewController alloc] init];
test.delegate = self; 
```

# java - 图像未正确生成

> ID：12877115
> 
> 赞同：0
> 
> 时间：2012-10-13T21:23:39.093
> 
> 标签：java, file, io, hashmap, bufferedimage

今天早些时候，我问了一个问题，关于如何将图像按顺序放置为整张图片的一部分，这样我就可以生成像你在旧口袋妖怪游戏中看到的 2D 地图。一切都是基于瓷砖的。

我已经到了我自己生成地图的地步，但结果有点好笑。

当我用 Tile Objects 填充 HashMap 时，我已经跟踪到了这个问题。一个 Tile 对象包含一个 Name 和一个 BufferedImage。问题似乎是程序如何从填充有瓷砖（png文件）的文件夹中读取文件并将它们放置在HashMap中。

这是我将 Tile 对象放入 HashMap 时的代码：

```
private static HashMap<Integer, Tile> getTiles(String path) throws IOException {
    HashMap<Integer, Tile> temp = new HashMap<>();
    File folder = new File(path);
    Tile tile;
    int counter = 0;
    for(File file : folder.listFiles()) {
        if(file.isFile()) {
            try {
                if(file.getCanonicalPath().endsWith(".png")) {
                    tile = new Tile(file.getName(),ImageIO.read(file));
                    temp.put(counter, tile);
                    counter++;
                }
            } catch(IOException ioe) {
                System.out.println("Picture number " + counter + " could "
                        + "not be saved in the hashmap: \n"
                        + ioe.getMessage());
                continue;
            }
        }
    }
    return temp;
} 
```

这是我在 HashMap 上执行 toString() 时的输出：

```
Tiles: (0,0.png)(1,1.png)(2,10.png)(3,100.png).... 
```

请注意，在 tile 1.png 之后，它开始计数 10，然后是 100，然后是 101，然后是 102……然后当它达到 112 时，它开始像这样计数：

```
(112,2.png)(113,20.png)(114,200.png)(115,201.png)... 
```

此文件夹中共有 220 个 Tiles，（计算 tile 0.png）。我清楚地看到问题是什么，但不是我如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:27:49.640

您可以将图像文件的名称更改为 001.png、002.png 等（所有名称的长度相同，前导零）。这将使您以正确的顺序读取文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T21:30:00.340

我猜这`folder.listFiles()`不会按顺序返回文件。您可以将它们放入 a`List`然后对其进行排序，但这不是一个好方法。如果图像`50.png`被删除并且有人添加了`100000.png`，那么 49 之后的所有图像都将移动一个。这很容易被发现。

更好的方法是按句点拆分文件名并将其解析为 int。

以下是如何拆分文件名：

```
String filename = file.getName();
String[] parts = filename.split("\\.");
counter = Integer.parseInt(parts[0]); 
```

使用这种方法，您不再需要增加计数器。如果图像丢失，它也不会错误地为图块编号。

# c++ - 如何在调整 C++ 大小时获得一个窗口来保留绘制的对象

> ID：12877116
> 
> 赞同：0
> 
> 时间：2012-10-13T21:23:39.497
> 
> 标签：c++, gdi

我的程序在屏幕上创建随机矩形。每次单击鼠标左键时，窗口中都会添加一个随机大小和颜色的新矩形。但是，当我调整窗口大小时，所有矩形都被删除 - 我不希望这种情况发生。我不明白程序在调整大小时会做什么，是在调用案例`WM_PAINT`吗？如果是这样，我需要包括什么来确保在调整大小时保持当前窗口状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:30:02.943

**每当收到 WM_PAINT 时，您都需要保存状态并重新绘制。**这只是微软决定的协议。因此，请确保将窗口的状态保存在内存中。

在调整大小的情况下，您还会收到几条大小调整消息，首先是在大小发生变化时发生一系列 WM_SIZING 事件，然后是在最终设置大小时发生 WM_SIZE。您将在两者之间收到 WM_PAINT 消息，并且您可以根据任何或所有这些事件自由地重新绘制应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:27:32.277

在此处查看我对使用 GDI 绘画的类似问题的回答。

[https://stackoverflow.com/a/12764607/682404](https://stackoverflow.com/a/12764607/682404)

基本上，当您调整窗口大小时，您应该会收到`WM_PAINT`来自 Windows 的消息。在您的消息处理程序中，您需要重新绘制表单。我链接的答案有一些关于绘画过程的细节。你的绘画代码看起来大概是这样的：

```
PAINTSTRUCT stPaintStruct;
HDC hPaintDC = BeginPaint(hWnd, &stPaintStruct);

if (hPaintDC != HANDLE_NULL)
{
    // establish clipping rect using stPaintStruct.rcPaint

    if (!m_bRendering)
    {
        m_bRendering = TRUE;

        // Render() knows the how to create the output.
        Render ();

        m_bRendering = FALSE;
    }

    EndPaint (hWnd, &stPaintStruct);
    return (TRUE);
} 
```

每次需要绘制窗口时，总是需要从头开始绘制，因此需要将矩形的坐标存储在某处。

# c++ - char 和 char*（指针）

> ID：12877120
> 
> 赞同：12
> 
> 时间：2012-10-13T21:24:02.463
> 
> 标签：c++, pointers, char, dereference, type-mismatch

我想了解指针是如何工作的，所以我创建了这个小程序。首先，我创建了指向 char 的 ap 指针。

第一个问题是在这一点上。如果我创建一个指针，它的值是一个内存地址（如果我将它指向一个非指针对象），但这次在我的示例中是“哈哈”。为什么它在 char* 中以这种方式工作？以及如何使用 cin >> p 为其增加价值？

我的第二个问题是，我创建了 aq char，它在我创建它时具有 *p 指针的值。但是它的值和地址也是“h”，但为什么呢？一定是这个char对象的内存地址！这是毫无意义的：D（mingw - gcc）

```
#include <iostream>

int main() 
{
 /* char *p;
    cin >> p;                      //forexample: haha */

    char * p = "haha";
    char q = *p;
    std::cout << "&q = " << &q << std::endl;   //&q = h
    std::cout << "q  = " <<  q << std::endl;   //q = h

    return 0;
} 
```

更多：如果我先用 char a[100] 分配内存；字符 *p=a; 然后&q = h»ŢĹ，所以“h”有些乱。但它应该是一个内存地址！我的问题是，为什么不解决呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-13T21:31:27.127

想想`char* p;`内存中的地址。你没有初始化这个指针，所以它不指向任何东西，你不能使用它。

为了始终安全：
要么将指针初始化为零：

```
char *p = 0; // nullptr in C++11 
```

或初始化为一些自动

```
void foo() {
  char a[100];
  char *p = a;
} 
```

或全局内存：

```
char a[100];
void foo() {
  char *p = a;
} 
```

或获取动态内存：

```
char* p = new char [100]; 
```

然后您可以使用 p (如果不是 NULL) 来读取数据并从 p 中读取...

* * *

对于你的误解`operator >> (std::istream&, char* p)`。该运算符期望`p`指向一些内存（自动、全局、动态 - 无论如何） - 它不会自行分配内存。它只是从输入流中读取字符直到空白并将其复制到指向的内存中`p`- 但`p`必须已经指向一些内存。

* * *

用于获取地址`char q;`。当然你可以取地址为`q`: `&q`，类型为`char* p`。但`&q`不同的是`p`，这`q=*p`只是复制指向的第一个字符`p`，`q`它不能改变地址`q`——它的地址是不可改变的。For `cout << &q`-`operator << (ostream&, char* p)`期望`p`指向 NULL 终止的字符串 - 并`&q`指向包含`"H"`但没有人知道这个字符之后的内存 - 所以你会在屏幕上看到一些垃圾。用于`cout << q`打印单个字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T21:46:12.727

首先要学习并永远记住指针是确保为它们分配内存，否则您的程序将无法正常运行。

您的代码实际上应该修改如下以分配内存，以便“cin”可以将用户输入写入分配的内存：

```
int main() {
    char *p = new char[1024];      // allocate memory so cin
    cin >> p;                      //forexample: haha
    char q = *p;
    cout << "&q = " << &q << endl; 
    cout << "q = " << q << endl;   
    return 0;
} 
```

现在，字符指针是一个变量，指向内存中保存一组字符的位置（不一定是一个字符，可能不止一个，也可能没有，就像特殊值 null 的情况一样），而字符变量实际上是保存单个字符（不是一组字符）。

处理指针时的基本运算符是 &(address of) 和 *(value at)。& 检索变量的地址，所以如果我们有 [char q;] 那么 [&q] 将是一个字符指针。另一方面， * 检索给定指针的值，所以如果我们有 [char *p;] 那么 [*p] 将是内存中 p 指向的字符。

现在回到您的示例，内联注释以进行说明

```
int main() {
    // allocate a place of 1024 character in memory
    // and let p points to that place
    char *p = new char[1024];      

    // call cin to read input from the user and save
    // it in memory at the location pointed to by p
    // NOTE: cin would put an extra NULL character 
    // at the end to terminate the string
    cin >> p;                      //forexample: haha

    // Now p would be pointing to a piece of memory like this
    // [h] [a] [h] [a] [\0]

    // use the value at operator to de-reference the pointer
    // p, the result would be a single character which 
    // will be the first character in memory p is pointing at
    char q = *p;

    // printing the value of (the address of q)
    // Note you have a problem here as cout will
    // be handling the memory starting at the address 
    // of q as a string while it is not, so you
    // will get a string starting with "h" and followed
    // by whatever is there in memory by the time of execution
    cout << "&q = " << &q << endl;

    // printing the value of the character q
    cout << "q = " << q << endl; 
    return 0;
} 
```

我希望它有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T21:45:32.167

你应该有类似的东西：

```
#include <iostream>
using namespace std; 
```

在程序的顶部。或者可以省略`using`and 引用`std::cin`and `std::cout`。

```
int main() {
    char *p; 
```

`p`是一个指针，但你还没有初始化它，所以它可以指向任何地方，也可以不指向任何地方。您需要初始化它，例如：

```
p = new char[100]; 
```

...

```
 cin >> p;                      //forexample: haha 
```

*如果*您已经初始化指向某个地方，这没关系`p`——除非您输入太多数据时会溢出它指向的缓冲区。对于像这样的简单测试程序来说这没问题，但在实践中，您需要采取措施来避免它。

```
 char q = *p;
    cout << "&q = " << &q << endl; //&q = h 
```

`&q`是 类型`char*`，指向 的指针`char`。发送一个`char*`值`cout`不会打印指针的值（内存地址）；它打印它指向的字符串。（虽然我自己运行它时得到了一些奇怪的结果；我可能会遗漏一些东西。）如果您想查看指针值，请将其转换为`void*`：

```
count << "&q = " << (void*)&q << endl; 
```

（或者您可以使用特定于 C++ 的强制转换之一；我不确定哪个是最好的。）

```
 cout << "q = " << q << endl;   //q = h 
```

这里`q`只是一个`char`，所以这会将它的值打印为一个字符：`h`。

```
 return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-21T08:15:10.070

字符串 literate 将存储在 .rdata 部分中，该部分将是只读的，因此使用 std cin 读取它会使程序崩溃

第二件事，当你写这个时：

```
char *p = "some text"; 
```

然后指针 p 指向已分配和只读的内存，因为 rdata 部分肯定会由 windows 加载程序分配和准备，但正如我所说的 .rdata 不能修改

那么当你写这个时：

```
char q = *p; 
```

您只需将 q 分配给 p 中的第一个字符，因为 * 返回指针当前指向的值，因此如果您尝试这样做：

```
++p;
q = *p; 
```

q 将保存 'a' 而不是 'h' 因为指针是一个地址，它指向从第一个字符开始的一些字符，因此增加一个它将使指针指向第二个字符，并且 q 将保存该值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-09T11:13:17.470

更好的方法是：

```
 int arraySize;
    cin>>arraySize;
    char *a=new char[arraySize];
    cin >> a; 
```

# java - 如何访问仅由反射引用的 OSGi/Bndtools 中的包？

> ID：12877121
> 
> 赞同：0
> 
> 时间：2012-10-13T21:24:06.020
> 
> 标签：java, reflection, osgi, bndtools

我使用 bndtools 从 owlim-lite 制作了一个捆绑包，并添加了所有必要的依赖项，以便 OBR-resoultion 正常工作。Sesame (Semantic Web Repository) 应该使用 owlime-lite，但它只在每次反射时访问 owlime-lite。我怎么能用 OSGi/Bndtools 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:03:38.187

唯一的解决方案是让它成为 Sesame 的一个片段……反射绕过了 Java 类型的安全特性，这使得模块化成为不可能……片段成为 Sesame 包的一部分，使其完全（非模块化）访问猫头鹰包。

# c++ - 为什么我的程序在运行此特定功能后会崩溃？

> ID：12877130
> 
> 赞同：1
> 
> 时间：2012-10-13T21:24:57.240
> 
> 标签：c++, crash, runtime

每当我在我的程序中输入命令来运行这个函数时，它就会运行然后崩溃说：

“应用程序已请求运行时以不寻常的方式终止它。”

为什么这样做？

```
void showInventory(player& obj) {
    std::cout << "\nINVENTORY:\n";
    for(int i = 0; i < 20; i++) {
        std::cout << obj.getItem(i);
        i++;
        std::cout << "\t\t\t" << obj.getItem(i) << "\n";
    }
}

std::string getItem(int i) {
        return inventory[i];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:14:44.990

在这段代码中：

```
std::string toDo(player& obj) //BY KEATON
{
    std::string commands[5] =   // This is the valid list of commands.
    {"help", "inv"};

    std::string ans;
    std::cout << "\nWhat do you wish to do?\n>> ";
    std::cin >> ans;

    if(ans == commands[0]) {
        helpMenu();
        return NULL;
    }
    else if(ans == commands[1]) {
        showInventory(obj);
        return NULL;
    }
} 
```

需要是：

```
std::string toDo(player& obj) //BY KEATON
{
    std::string commands[5] =   // This is the valid list of commands.
    {"help", "inv"};

    std::string ans;
    std::cout << "\nWhat do you wish to do?\n>> ";
    std::cin >> ans;

    if(ans == commands[0]) {
        helpMenu();
        return "";
    }
    else if(ans == commands[1]) {
        showInventory(obj);
        return "";          // Needs to be '""'
    }
} 
```

归功于原型斯塔克！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:35:52.803

写一个函数：

```
class player{
public:
//--whatever it defines 
int ListSize()
{
   return (sizeof(inventory)/sizeof(inventory[0]));
}
}; 
```

然后使用

```
void showInventory(player& obj) {   // By Johnny :D
    int length = obj.ListSize();
    std::cout << "\nINVENTORY:\n";
    for(int i = 0; i < length; i++) {
        std::cout << obj.getItem(i);
        i++;
        std::cout << "\t\t\t" << obj.getItem(i) << "\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T21:30:47.220

```
for(int i = 0; i < 20; i++) {
    std::cout << obj.getItem(i); 
```

这不是很正确。不要使用幻数。而不是 20 使用 int listSize = obj.ListSize() （将由您实现）

```
listSize = obj.ListSize();
    for(int i = 0; i <listSize ; i++) {
        std::cout << obj.getItem(i); 
```

通过这种方式，您将确保您没有超出范围。

此外，如果您想在一个循环中打印 2 个项目（我不明白为什么），您可以这样做：

```
void showInventory(player& obj) {   // By Johnny :D
    std::cout << "\nINVENTORY:\n";
    int listSize = obj.ListSize()/2; //if you are sure that is odd number
    for(int i = 0; i < listSize; ++i) {
        std::cout << obj.getItem(i);
        i++;
        std::cout << "\t\t\t" + obj.getItem(i) + "\n";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T21:27:38.983

当 i = 19 时，您将获得数组中的最后一项，之后 i 变为 20，并且还有另一个 getItem 应该导致越界异常

# ruby - 如何存根这个类

> ID：12877136
> 
> 赞同：1
> 
> 时间：2012-10-13T21:25:15.227
> 
> 标签：ruby, rspec

我有一门课叫板。在其中我初始化了一个网格。

我想为 rspec 规范的板创建一个模拟或存根（不确定哪个）。

我无法弄清楚存根或模拟应该是什么样子......

```
stub_board = stub('board') 
stub_board.stub(:[]).with(:b2).and_return("O") 
```

我不知道......为了我想写的测试，我想在板上有一些 O。

有人可以帮忙吗？

仅供参考，这里是实际的班级委员会....感谢您的帮助，我已经盯着这个看了 3 天。

```
class Board
attr_reader :grid

def initialize(cell_value = " ")
  @grid = {
    a1: cell_value, a2: cell_value, a3: cell_value,
    b1: cell_value, b2: cell_value, b3: cell_value,
    c1: cell_value, c2: cell_value, c3: cell_value
  }
end

def drawgrid
  board = "\n"
  board << "a #{@grid[:a1]}|#{@grid[:a2]}|#{@grid[:a3]} \n"
  board << "----------\n"
  board << "b #{@grid[:b1]}|#{@grid[:b2]}|#{@grid[:b3]} \n"
  board << "----------\n"
  board << "c #{@grid[:c1]}|#{@grid[:c2]}|#{@grid[:c3]} \n"
  board << "----------\n"
  board << "  1 2 3\n"
end

def space_taken?(cell_location)
  @grid[cell_location] != " "
end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:54:35.803

这是我的想法。这不必是 stubing 或 mocking。只需从简单的测试开始，就可以通过 stubing、mocking 或其他方式提供更多功能。

你有一个 Board 类的对象。该对象具有属性`grid`和`initialize`方法之类的输入内容，并且具有和之类的输出`drawgrid`内容`space_taken?`。因此，测试的想法是设置输入内容并明确具体的输出内容。有可能：

```
describe Board do

  describe "drawgrid" do

    it "shuold generate default string" do
      board = Board.new
      board.drawgrid.should == "here's your string"
    end

    it "should generate string with cell_value '*'" do
      board = Board.new('*')
      board.drawgrid.should == "string with '*' cell value"
    end

    # and so on
  end

  describe "space_taken?" do

    it "should set cell value" do
      board = Board.new
      board.space_taken?(:a1).should be_false
      board.grid[:a1] = '!'
      board.space_taken?(:a1).should be_true
    end

    # and so on
  end
end 
```

您可以使用代码覆盖率分析工具来帮助您找到未覆盖的行，例如[SimpleCov](https://github.com/colszowka/simplecov)

# ruby-on-rails - activeadmin 的两个命名空间

> ID：12877139
> 
> 赞同：5
> 
> 时间：2012-10-13T21:25:26.983
> 
> 标签：ruby-on-rails, ruby, namespaces, activeadmin

在过去的 4 小时内，我正在尝试使用两个命名空间安装 activeadmin，但没有运气。

我想要两个命名空间。“管理员”和“管理员单元”。

我会假设我将拥有 app/admin 和 app/admin_unit 目录。

对于 admin 命名空间，我想使用默认的设计身份验证，对于“admin_unit”命名空间，我有一个需要使用的 current_user 方法。

我尝试使用命名空间将所有配置包装在 active_admin 配置中，并且尝试手动创建文件等，但每次遇到问题时。

Activeadmin 在过去一年中发生了很大变化，我担心我看到的一半指令已经过时了。而且没有一个是完整的。该文档仅部分存在于命名空间中。

有没有人从头到尾安装这两个命名空间的一些分步说明？对于这方面的一些帮助，我将不胜感激！

**编辑**

当我去启动服务器（或者在这种情况下我试图耙路由）时，我收到此错误：

```
 Expected /app/active_admin/admin/dashboard.rb to define Admin::Dashboard (LoadError) 
```

dashboard.rb 里面有这个：

```
ActiveAdmin.register_page "My Page", :namespace => :admin do
  content do
    para "Hello World"
  end
end 
```

我也尝试过没有命名空间：

```
ActiveAdmin.register_page "My Page" do
  content do
    para "Hello World"
  end
end 
```

仅供参考，我添加了一个“active_admin”目录，并将两个命名空间目录都放在那里。我将两者都添加到了加载路径中（谢谢）。

此错误是否与新的仪表板页面有关？接下来我将研究它们是如何工作的。

多谢你们！感谢您的工作 Gregg，我现在已经在几十个应用程序上使用了 AA，并且喜欢它！

**编辑修复**

好的，在最后一个问题上，我发现从我创建的“active_admin”目录中取出两个 activeadmin 命名空间目录可以解决问题。不知道那是行不通的……但是哦，好吧，我已经在这个问题上花费了足够多的周期，并且准备继续前进。

希望对其他人有所帮助..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T05:17:48.247

您是否将 app/admin_unit 添加到 active_admin 的加载路径？

```
 config.load_paths = [File.expand_path('app/admin', Rails.root), File.expand_path('app/admin_unit', Rails.root)] 
```

这可以进入 'config/initializers/active_admin.rb' 这是必要的，因为 active_admin 小心不要多次加载资源

至于身份验证方法，应该是这样的：

```
config.namespace :admin_unit do |namespaced|
    namespaced.authentication_method = :current_user
end 
```

但请注意，“authentication_method”和“current_user_method”是两个不同的设计设置（用于在控制器操作之前进行*身份验证，并分别**返回*当前用户）。我只指出这一点是因为，我认为“current_user”是（非活动管理员）Devise 默认调用以返回登录用户的方法

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T15:57:08.317

您放置文件的目录与命名空间的配置不同。如果您想添加 Active Admin 从中加载文件的新目录：

```
 config.load_paths = [File.expand_path('app/admin', Rails.root), File.expand_path('app/admin_unit', Rails.root)] 
```

现在您可以将文件放在 app/admin_unit 中，Active Admin 将加载它们。这对放置这些文件的“命名空间”没有影响。

要为资源设置命名空间，只需将命名空间的名称传递到注册中：

```
ActiveAdmin.register SomeResource, :namespace => :admin_unit do
  # configuration
end 
```

# php - GCM 丢弃消息

> ID：12877140
> 
> 赞同：3
> 
> 时间：2012-10-13T21:25:30.827
> 
> 标签：php, android, curl, google-cloud-messaging

我在这里有一个 gcm 的演示：http: [//leobee.com/android/push/login/gcm/updateusers.php](http://leobee.com/android/push/login/gcm/updateusers.php)

如果刷新页面，您将看到一个新的随机数。4 次页面刷新中只有 1 次向 gcm 发送消息。这是正常的还是我可以使用的代码有几个星期？

该页面没有被缓存。

代码：

```
<?php

require_once '../include/DB_Functions.php';

// get database access
$db = new DB_Functions();

header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

//api key 
$apiKey = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";

$result;

//array for phones connected to this service
$registrationIDs = array();

$randomNum=rand(10,100);

echo "this is updateusers".$randomNum;
$_POST['message']="updateusers".$randomNum;
if (isset($_POST['message']) && $_POST['message'] != ''){   

echo "<br>if (isset) updateusers".$randomNum;
    // Message to be sent
    $id= ''.mysql_real_escape_string(htmlentities($_POST['server_id'])).'';
    $new_message= ''.mysql_real_escape_string(htmlentities($_POST['message'])).'';

    // get client registration IDs
    $query ="SELECT * FROM GoogleCloudMsg";

    $queryresult=mysql_query($query);

    while($row=mysql_fetch_assoc($queryresult)){
    echo "<br>While loop updateusers".$randomNum;
        $regId=$row['GCMPhoneRegisteredId'];

        array_push($registrationIDs,$regId);

}

// Set POST variables
$url = 'https://android.googleapis.com/gcm/send';

$fields;

if(!$id || $id==""){

    $fields = 
array(
'registration_ids' => $registrationIDs, 
'data' => array("message" => $new_message), 
'delay_while_idle'=> false,
'collapse_key'=>"".$randomNum.""
);

    echo "<br> id is blank updateusers".$randomNum;

}else{

$fields = 
array(
'registration_ids' => $registrationIDs, 
'data' => array("message" =>$new_message,"server_id"=>$id), 
 'delay_while_idle' => 'false',
'collapse_key'=>"".$randomNum.""
);

echo "<br>id exists updateusers".$randomNum;

}
$headers = array('Authorization: key=' . $apiKey, 'Content-Type: application/json');

// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
//curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
//     curl_setopt($ch, CURLOPT_POST, true);
//     curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fields));

// Execute post
$result = curl_exec($ch);

// Close connection
curl_close($ch);
echo $result;

}

echo "<br>mysql close updateusers".$randomNum;
 mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:20:28.677

有两种方法可以解决此问题。

1.  生成并安装 CA 证书。

2.  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);

不验证主机。

# ios - 无法从 iOS 模拟器卸载应用程序

> ID：12877157
> 
> 赞同：8
> 
> 时间：2012-10-13T21:28:01.573
> 
> 标签：ios, xcode, ios-simulator

在 Xcode 4.5 之前，我可以像在真实设备上一样卸载我的应用程序，将图标放在跳板内并点击 X，但现在它只是冻结了模拟器，没有任何反应。

我知道我可以进入 iphone 模拟器文件夹并从那里删除应用程序，但我错过了快速快捷方式。

其他人有同样的问题或知道如何解决它？

我使用的是 Mountain Lion 和 Xcode 4.5.1。

# php - PHP-OOP 扩展两个类？

> ID：12877158
> 
> 赞同：5
> 
> 时间：2012-10-13T21:28:06.430
> 
> 标签：php, oop

我是 OOP 的初学者，现在我正在尝试编写一些 PHP 类来连接 FTP 服务器。

```
class ftpConnect {
  private $server;
  private $user;
  private $password;

  private $connection_id;
  private $connection_correct = false;

  public function __construct($server, $user = "anonymous", $password = "anonymous@mail.com") {

    $this->server   = $server;
    $this->user     = $user;
    $this->password = $password;

    $this->connection_id      = ftp_connect($this->server);
    $this->connection_correct = ftp_login($this->connection_id, $this->user, $this->password);

    if ( (!$this->connection_id) || (!$this->connection_correct) ){
        echo "Error! Couldn't connect to $this->server";
        var_dump($this->connection_id);
        var_dump($this->connection_correct);
        return false;
    } else {
        echo "Successfully connected to $this->server, user: $this->user";
        $this->connection_correct = true;
        return true;
    }
  }
} 
```

我认为目前班级的主体是微不足道的。

主要问题是我在理解 OOP 理念方面存在一些问题。

我想在每次运行代码时添加发送电子邮件。我已经下载了[PHPMailer 类](http://code.google.com/a/apache-extras.org/p/phpmailer/)并用它扩展了我的类：

```
class ftpConnect extends PHPMailer {...} 
```

我添加了一些变量和方法，并且一切都按预期工作。

我想：为什么不添加将所有内容存储在数据库中。每次用户运行上述代码时，都应将适当的信息存储在数据库中。

我可以编辑我的`ftpConnect class`并添加连接到构造函数的数据库，以及一些其他更新表的方法。但是数据库连接和所有这些东西将来可以被其他类使用，所以它肯定应该在单独的类中实现。但是我的“主要”`ftpConnect class`已经扩展了一个类，并且不能再扩展一个类。

我不知道如何解决这个问题。也许我`ftpConnect class`的太复杂了，我应该以某种方式将它分成几个较小的类？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T21:50:37.927

对于初学者，我认为您的班级存在设计缺陷。您的构造函数正在工作。这不是构造函数在正确的 OOP 中应该做的事情。你的构造函数应该只设置属性并且你应该有一个单独的方法`connect()`。

第二`ftpConnect`永远不应该延长`PHPMailer`。它们是两种完全不同的东西。阅读[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，它是[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)的一部分。

如果你的班级需要对数据库做一些事情或需要发送邮件，你需要将这些实例注入你的班级而不是扩展它们。这称为[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，这将使以后进行单元测试变得容易，因为您可以轻松地使用模拟邮件程序类或模拟数据库类。

如果你想发送邮件，拥有数据库访问权限并使用 FTP，你至少需要 3 个不同的（分离的）类（可能需要更多的类来为数据库等做一些映射）。基本上每个班级都应该有一个责任，而且只有一个。这称为[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

有关一些一般参考，请参阅：

*   [指南：编写可测试的代码](http://misko.hevery.com/code-reviewers-guide/)
*   [谷歌清洁代码会谈](http://www.g-truc.net/post-0182.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:44:39.000

这可能是组合优于继承的问题 请参阅此 [Prefer composition over inheritance？](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance) 只需在你的类中使用 mailer 对象，DB 也是如此，而不是你的类扩展它们中的任何一个。

```
class my_class
{
    private $mailer;

    public function __constructor()
    {
         $this->mailer = new Mailer();
    }
} 
```

# php - 更改要下载的文件名并在单击或延迟后开始下载

> ID：12877160
> 
> 赞同：3
> 
> 时间：2012-10-13T21:28:24.367
> 
> 标签：php, download, delay, filenames

我正在寻找更改文件名的 php 代码 - 添加当前日期，并开始延迟下载文件。如果无法开始下载，则可以选择通过单击链接下载带有添加日期的文件。

像这样：您的下载将在片刻后开始...如果没有任何反应，请单击`<a href="">here</a>`。

我发现只有这个：

```
// It will be called downloaded.pdf
header('Content-Disposition: attachment; filename="downloaded.pdf"');

// The PDF source is in original.pdf
readfile('plik.pdf'); 
```

[https://stackoverflow.com/a/6694505](https://stackoverflow.com/a/6694505)

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T23:21:00.963

您将需要两个部分来有效地执行此操作...在您显示的 PHP 文件（我们称之为`download.php`）中，您需要启动一个 Javascript 函数，该函数将您的客户倒计时到零。当它达到零时，它只是重定向到真正的下载位置（我们称之为`realdl.php`）。该文件实际上会在重定向或单击时抓取文件内容并将其发送给用户。

以下是您需要的一些元素`download.php`：

```
<? $file_dl_url = "/realdl.php?id=FILEID"; ?>

<script language="javascript">
  var elapsed = 0;
  function countdown {
    // see if 5 seconds have passed
    if (elapsed >= 5) {
      window.location = <?= $file_dl_url ?>;
    } else {
      // update countdown display & wait another second
      elapsed++;
      setTimeout("countdown", 1000);
    }
  }
  setTimeout("countdown", 1000);
</script>

<a href="<?= $file_dl_url ?>">Click Here</a> 
```

然后，您`realdl.php`只需要以下内容：

```
$file_contents = load_file_from_id($_GET['id']);
$file_name = determine_filename();

header("Content-Disposition: attachment; filename=$file_name");

echo $file_contents; 
```

当然，您需要提供获取文件内容（从磁盘或可能是数据库读取）以及确定文件名的方法。要将时间用作文件名格式，请参阅[http://us3.php.net/manual/en/function.strftime.php](http://us3.php.net/manual/en/function.strftime.php)了解该`strftime`函数。

根据文件的存储方式，您可以更有效，`fpassthru`例如使用本地文件。`Content-Length`如果您可以在下载之前确定文件大小（即，它是您发送的静态内容），您可能还想发送标头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T22:50:27.293

我不建议在服务器端 (PHP) 使用睡眠或其他延迟。您可以使用某种 JavaScript 代码向用户显示所需的通知并将页面重定向到文件下载 URL（PHP 脚本）。在那里，您可以使用 Content-Disposition 标头来更改正在下载的文件的名称。

如有必要，可以使用 PHP 部分生成 JavaScript 代码以获取要重定向到的 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T22:10:38.967

您可以尝试添加一些时间日期变量，例如：

```
$delay = 10; #delay of 10 seconds
sleep($delay);

$timedt = time()+$delay;

$filename = 'downloaded-'.$timedt.'.pdf';

header('Content-Disposition: attachment; filename="{$filename}"'); 
```

即兴创作并添加一些功能来检查条件（if/else）时间日期检查，而不是设置睡眠。添加文件名以供下载。

# ruby - 为什么这个 Ruby 的计时器代码让我的电脑工作如此辛苦？

> ID：12877161
> 
> 赞同：0
> 
> 时间：2012-10-13T21:28:53.447
> 
> 标签：ruby, timer

```
time_limit = gets.to_f * 60
start_time = Time.new
end_time = start_time + time_limit
x = 1
until Time.new >= end_time
  time_left = end_time - Time.new
  time_left_in_minutes = time_left / 60
  puts "Minutes Left: #{time_left_in_minutes}"
end
until x == 0
puts "Time Since End of #{time_limit / 60} Minutes: #{Time.new - end_time}"
end 
```

我的电脑风扇全速旋转，我的电脑在运行此代码时变得嘈杂。有没有更好的方法来做到这一点，而不是为处理器做太多的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:35:19.967

您的计算机变热是因为您在等待超时时忙于循环。

最简单的解决方案：在循环中添加一个 sleep(1) 。这将导致它每秒运行一次，而不是尽可能快。

您也可以只睡正确的秒数。

然后，在等待一段时间后，你也忙循环，直到 x 以某种方式变为 0。这也会占用大量 CPU。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T21:35:36.680

发生这种情况是因为您要求您的处理器做很多工作！

看看你的循环：

```
until Time.new >= end_time
  time_left = end_time - Time.new
  time_left_in_minutes = time_left / 60
  puts "Minutes Left: #{time_left_in_minutes}"
end 
```

那只是旋转，旋转和旋转，直到达到时间限制。您的处理器一直在运行。（您还在这里做一些昂贵的事情 - 您`Time.new`在每次迭代中调用两次，并且对象创建可能很昂贵 - 但如果您的循环更快，您只会旋转得更快。）

您可能需要在该循环中添加延迟，以便它每秒或每分钟仅运行一次，或类似的东西。 `sleep 30`例如，将暂停 30 秒。

# python - 如何在 Windows 7 下为 python 安装 libsvm？

> ID：12877167
> 
> 赞同：11
> 
> 时间：2012-10-13T21:29:40.307
> 
> 标签：python, windows, libsvm

想知道如何在 windows 7 下为 python 安装 libsvm？

我下载了 livsvm zip，但我不明白其中的说明。我已将 libsvm.dll 放在我的 c:\windows\system32 目录中，但是当我尝试

```
import svmutil 
```

或者

```
from svm import * 
```

我明白了

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "svmutil.py", line 3, in <module>
    from svm import *
  File "svm.py", line 16, in <module>
    '../windows/libsvm.dll'))
  File "C:\Python27\lib\ctypes\__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 126] The specified module could not be found 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-09-02T16:23:33.177

**已解决：**
1\. 导航到[http://www.lfd.uci.edu/~gohlke/pythonlibs/#libsvm](http://www.lfd.uci.edu/~gohlke/pythonlibs/#libsvm)
2\. 下载与您的操作系统对应的 libsvm 的 .whl 文件。
3\. 打开命令提示符并导航到包含下载的 .whl 文件的文件夹。
4.在命令提示符下键入以下命令

**- pip install libsvm-3.20-cp27-none-win32.whl**

*注意：在 pip install 之后输入 .whl 文件的名称*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T22:13:09.910

我认为没有必要将 dll 放在 C:\windows\system32 目录中，除非您使用的是旧版本的 Windows（XP 和更早版本）。

确保：

*   您启动包含`from svmutil import *`在 libsvm\python 目录中的 python 测试脚本
*   您在 libsvm\windows 目录中仍有一份 libsvm dll 的副本（如果您**将**其移至 C:\windows\system32，请将副本放回 libsvm\windows 目录中）

这适用于我的电脑。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-25T12:26:26.493

我发现在 Windows 上安装 libSVM 以及其他 Python 库的最佳方法是使用非官方的 Windows 二进制文件，这里：

[http://www.lfd.uci.edu/~gohlke/pythonlibs/#libsvm](http://www.lfd.uci.edu/%7Egohlke/pythonlibs/#libsvm)

> 此页面为 Python 编程语言的官方 CPython 发行版提供了许多科学开源扩展包的 32 位和 64 位 Windows 二进制文件。
> 
> 大多数二进制文件都是从 PyPI 或项目公共修订控制系统中的源代码构建的。源代码更改（如果有）已提交给项目维护者或包含在包中。
> 
> 许多二进制文件依赖于 Numpy-MKL 1.8 和/或 Microsoft Visual C++ 2008（64 位或 32 位，用于 CPython 2.6 到 3.2）或 Visual C++ 2010（64 位或 32 位，用于 CPython 3.3 和 3.4）可再发行包。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-23T17:22:56.543

我在 Windows 7 和 libsvm 3.18 上也遇到了很多问题，上面的解决方案都没有奏效。`../windows/libsvm.dll`无论我尝试什么文件路径体操，它都找不到或不喜欢该文件。我也遇到了 32 位和 64 位的不兼容问题（我的 python 是 64 位的）。

我为尝试从 Visual Studio 重新编译的痛苦做好了准备，但这最终是不必要的。最终对我有用的是简单地安装 scikit-learn，它包含 libsvm 并很好地包装在里面（[http://scikit-learn.org/stable/index.html](http://scikit-learn.org/stable/index.html)）。

如果您像我一样使用 Anaconda 发行版，那么这将非常轻松。只需`conda install scikit-learn`在命令行中键入。

如果你想忽略 scikit-learn 的其他方面，你可以`import sklearn.svm.libsvm as svm`像调用 libsvm 一样调用它。它只是工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-06T08:24:16.093

我知道你在一年前问过这个问题，但我仍然想发布我的解决方案，以防其他人受益。

1.  将 libsvm 放在任何地方。我的`C:\Python27\Lib\site-packages\libsvm-3.17`

2.  在 windows 环境下设置 PYTHONPATH。转到系统属性 -> 高级 -> 环境变量。
    添加新变量，命名为`PYTHONPATH`，将值设置为`C:\Python27\Lib\site-packages\libsvm-3.17\python`。

# python - 如何在 Fabric 命令中定位不同的主机

> ID：12877168
> 
> 赞同：4
> 
> 时间：2012-10-13T21:29:45.877
> 
> 标签：python, fabric

除了当前为正在运行的 Fabric 命令设置的目标之外，您如何指定不同的目标来运行命令？

我有一个命令 download_backup() 从远程主机下载数据库备份文件到本地主机。由于它必须在本地运行，因此 host_string 是 localhost。但是，我需要在远程主机上运行一个命令来查找最近的备份是什么。当我尝试这样做时：

```
def download_backup():
    env.host_string = 'remotehost'
    env.user = 'remoteuser'
    backup_fn = run('ls -t /usr/local/lib/backups | head -1') 
```

它仍然尝试`ls`在 localhost 上运行命令。我是否将其更改为在远程主机上运行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T22:27:58.007

您可以使用设置上下文管理器来更改运行特定命令的主机，而与封闭任务的主机设置无关。

```
from fabric.context_managers import settings
with settings(host_string='remote_server'):
    run('ls -lart') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T22:21:34.627

首先，您的命令在 localhost 上运行的原因是因为`env`它是一个全局变量，并且您在本地覆盖它，但是在 fabric 运行命令时看不到这一点。你应该在你的函数之外定义你的 host_string 。

```
env.host_string = 'remotehost'
env.user = 'remoteuser'

def download_backup():
    run('ls -t /usr/local/lib/backups | head -1') 
```

要在运行时更改主机，您有几个选项。首先，您可以利用`roles`and`roledefs`功能。

```
env.roledefs = {
    "ex1": ["host1.example.com"],
    "ex2": ["host2.example.com"],
    }
env.roles = ["ex1"]

def download_backup():
    run("ls -t /usr/local/lib/backups | head -1") 
```

默认情况下，当您运行时，`fab download_backup`您将从中获取备份，`host1.example.com`因为 env.roles 设置为`ex1`. 如果您希望覆盖该设置，您可以通过命令行指定角色：

```
fab -R ex2 download_backup 
```

这将启动具有该角色的结构，`ex2`因此将从中获取它的备份`host2.example.com`。

`env`另一种选择是利用只是一个全局变量的事实。

```
def download_backup():
    run("ls -t /usr/local/lib/backups | head -1")

def download_backup_ex1():
    global env
    env.host_string = "host1.example.com"
    download_backup()

def download_backup_ex2():
    global env
    env.host_string = "host2.example.com"
    download_backup() 
```

我个人更喜欢第一种方法，因为它显然更适合在这种情况下所做的事情，但我可以想象第二种方法可能是更好的选择。

# visual-studio - 每个解决方案/项目的 Visual Studio 设置

> ID：12877169
> 
> 赞同：10
> 
> 时间：2012-10-13T21:29:52.260
> 
> 标签：visual-studio, open-source, automation, settings

**我正在寻找一种为 Visual Studio (2010+) 加载解决方案/项目特定设置的方法。**

*我知道有人问过类似的问题，但我的要求有点不同。*

**以下是要求：**

*   必须按解决方案或项目存储设置
*   我需要能够将设置保留为我的源代码的一部分
*   打开解决方案或项目时应加载设置
*   解决方案/项目关闭时，必须保留和恢复用户的原始设置
*   任何工具/插件的安装都不是一种选择，除非它们与 Visual Studio 一起预装。像[http://editorconfig.org/](http://editorconfig.org/)这样的项目很有前景，但除非有庞大的用户群，否则它们不是一个选择。

只是为了提供更多上下文...我想更改 Visual Studio 的“保留标签”、“标签大小”和“缩进大小”设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-28T07:45:35.177

根据您的要求，您应该使用每个解决方案/项目的工作区

希望这可以帮助

# facebook - 在安装应用程序之前强制用户喜欢 Facebook 页面

> ID：12877173
> 
> 赞同：2
> 
> 时间：2012-10-13T21:30:31.230
> 
> 标签：facebook, installation, facebook-like, inno-setup

我想在安装应用程序之前强制用户喜欢 Facebook 页面，目前我正在为我的应用程序使用免费的[Inno Setup](http://www.jrsoftware.org/isinfo.php)安装程序，但我编写自己的安装程序没有问题，它允许我想做的事情，问题是我没有不知道从哪里开始。

如何防止不喜欢我的 Facebook 页面的用户安装应用程序？ofc 我将为没有 Facebook 帐户的用户提供跳过方法。

**笔记：**

我免费提供这个应用程序，我估计第一个月下载量会达到 1000 次，因为我不需要任何注册，我没有收到用户的任何电子邮件/联系信息，而且我的 FB 页面是唯一的我可以与他们取得联系，通知他们有关更新和错误的方式，这也是鼓励任何可能的捐赠的好方法。

因此，喜欢 FB 页面作为要求只是询问用户电子邮件地址的替代方法。正如我上面提到的，我也会提供一个跳过方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T21:37:32.987

长话短说——你不能。

您必须允许您的用户安装应用程序，然后阻止他们查看内容。您必须允许他们安装您的应用程序，因为只有这样您才能拥有有效的访问令牌以检查他们是否喜欢某个页面。

我还想在这里说，我认为这种类型的要求是一种廉价的伎俩，实际上削弱了like按钮的意义和功能。您正在强迫人们“喜欢”他们可能并不真正想要喜欢的页面。

顺便说一句，您可能想再次查看[政策清单](https://developers.facebook.com/docs/guides/policy/policy_checklist/english/)- 您所做的事情可能会被视为违反平台政策。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T12:52:48.410

我不确定这听起来是否是最好的方法，事实上它是一种非常笨拙的方法，但我相信它对你有用。在您的 Facebook 页面中，在照片/关于部分中提及代码（常量数字/十六进制/任何内容），该代码仅对喜欢该页面的用户可见。

And when the user is installing the setup, ask the users to enter that code in order to complete installing the app. I cannot assure you that it will work flawlessly, but atleast it will work and you are not violating any fb rules.

One drawback could be, that a user might get annoyed and decide not to install the app.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-20T18:10:55.560

It is possible to check from Innosetup, if a user has liked a certain page. You might send a GET request with AccessToken to the Facebook API:

```
https://api.facebook.com/method/pages.isFan?format=json&access_token=" . USER_TOKEN . "&page_id=" . FB_FANPAGE_ID 
```

There is also a token-less approach using the signed_request POST method, see [https://stackoverflow.com/a/5100287/1163786](https://stackoverflow.com/a/5100287/1163786)

For sending the Request you might use an WinHttpRequest Object, like so:

```
WinHttpReq := CreateOleObject('WinHttp.WinHttpRequest.5.1');
WinHttpReq.Open('GET', TARGET-URL, false);
WinHttpReq.Send(); 
```

Please note that the Facebook Policies does not allow this: [https://developers.facebook.com/policy/#integration](https://developers.facebook.com/policy/#integration)

# wcf - web.config 中的 WCF 绑定提供 HTTP-fejl 500.19 - Windows 7 上的内部服务器错误

> ID：12877178
> 
> 赞同：1
> 
> 时间：2012-10-13T21:30:45.643
> 
> 标签：wcf, iis, web-config, wcf-binding

我正在将我的站点本地部署到我的 Windows 7 机器上的 IIS，该机器已经工作了一个月。安装了所有必要的功能，激活了 ASP.NET 等等。我还激活了 WCF 功能。

现在我正在尝试托管 WCF 服务。在 Visual Studio 中运行它时，它运行良好（除了我已经在 SO 上询问过的一些其他问题）。但是，在我的 IIS 上，它给出了以下 IIS 错误：

> HTTP-fejl 500.19 - 内部服务器错误。
> 
> : 无法访问请求的页面，因为该页面的相关配置数据无效。错误代码：0x80070005 通知：BeginRequest 模块：IIS Web 核心请求的 URL：...物理路径：...登录用户：尚未确定登录方法：尚未确定处理程序：尚未确定配置错误：无法读取配置文件配置文件：...配置源：

现在，这是我的 web.config：

```
<system.webServer>
    <behaviors>
      <endpointBehaviors>
        <behavior name="ServiceAspNetAjaxBehavior">
          <enableWebScript />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <services>
      <service name="ForumOperationService">
        <endpoint address="" behaviorConfiguration="ServiceAspNetAjaxBehavior"
            binding="webHttpBinding" contract="IForumOperationService" />
      </service>
    </services>
    <httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
      <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll"/>
      <dynamicTypes>
        <add mimeType="text/*" enabled="true"/>
        <add mimeType="message/*" enabled="true"/>
        <add mimeType="application/javascript" enabled="true"/>
        <add mimeType="*/*" enabled="false"/>
      </dynamicTypes>
      <staticTypes>
        <add mimeType="text/*" enabled="true"/>
        <add mimeType="message/*" enabled="true"/>
        <add mimeType="application/javascript" enabled="true"/>
        <add mimeType="*/*" enabled="false"/>
      </staticTypes>
    </httpCompression>
    <urlCompression doStaticCompression="true" doDynamicCompression="true"/>
    <modules runAllManagedModulesForAllRequests="true"/>
    <validation validateIntegratedModeConfiguration="false"/>
    <handlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" type="System.Web.Script.Services.ScriptHandlerFactory" validate="false"/>
      <add name="AjaxToolkit" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </handlers>
  </system.webServer> 
```

这是我的 WCF 网络服务测试：

```
[ServiceBehavior(IncludeExceptionDetailInFaults = true)]
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class ForumOperationService : IForumOperationService
{

    public string Horse(string prefixText, int count)
    {
        return "hestWCF";
    }

    public List<SystemTagDTO> GetTags(string prefixText, int count)
    {
        var dfasd = new List<SystemTagDTO>();
        dfasd.Add(new SystemTagDTO() { Isvisible = true, Value = "Aktant" });
        dfasd.Add(new SystemTagDTO() { Isvisible = true, Value = "Beretter" });
        return dfasd;
    }
} 
```

当我删除行为/服务+处理程序条目时，我可以看到该错误已被删除。

现在，我的问题是：为什么它可以在 VS 2012 中工作，而不是在我的本地 IIS 上？我应该以某种方式将 WCF 服务设置为直接托管在 IIS 上吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:46:47.727

我可以看到您的配置文件中有错误。WCF 相关的配置元素，如行为、serviceHostingEnvironment 和服务应该在**`<system.ServiceModel>`**标签内而不是在**`<system.webServer>`**. 尝试修复它，看看它是否适合你。

# html - HTML5：如何添加包装 div 以拖放文本

> ID：12877180
> 
> 赞同：0
> 
> 时间：2012-10-13T21:30:57.330
> 
> 标签：html, drag-and-drop

我正在将带有文本/ html 的段落中的文本拖到内容可编辑的 div 中。
我想为删除的选定文本添加一个包装 div。
我尝试操纵所有拖放侦听器但没有成功。
我想过通过 dataTransfer 进行操作 - 但它似乎失败了。

```
e.dataTransfer.setData('Text', '<div>' + e.dataTransfer.getData('Text') +'</div>'); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T06:20:48.810

我最近做了 chrome 的拖放代码（v24）。看来您需要`dragover`为放置目标指定处理程序并对其调用`event.preventDefault();`操作，否则放置将不起作用。

如果您的问题只是被拖动内容的包装，那么您有一个很好的例子在这里[html5rock 演示](http://slides.html5rocks.com/#drag-and-drop)

正如前面的答案所述，您可以在`drop`处理程序上获取已删除的内容。虽然在 chrome 中我使用

```
var text = e.dataTransfer.getData('text/plain');
 var html = e.dataTransfer.getData('text/html');

```

您可以通过检查`e.dataTransfer.types`

似乎您可以将拖动的内容设置为`dragstart`，但不能读取它，因此这仅适用于`drop`事件侦听器。

```
event.dataTransfer.getData('text/plain')

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T05:16:51.447

我有以下代码在 Firefox 16 中工作。

```
<style>
    #drophere {
        box-shadow: 0 0 3px #aaa;
        height: 200px;
        padding: 10px;
        width: 300px;
    }
</style>

<p id="dragthis" draggable="true">Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum </p>

<div id="drophere" contenteditable droppable="true"></div>

<script>
    var p = document.getElementById('dragthis');

    p.addEventListener( 'dragstart',
                        function(event) {
                            event.dataTransfer.setData('Text', event.target.innerHTML)
                        },
                        true
                    );

    var drop = document.getElementById('drophere');

    drop.addEventListener( 'drop',
                           function( event ) {
                               event.target.innerHTML = "&lt;div&gt;" + event.dataTransfer.getData('Text') + "&lt;/div&gt;";
                               event.preventDefault();
                           },
                           true
                       );
</script> 
```

# java - 客户端和服务器之间奇怪的“缓存”效应

> ID：12877184
> 
> 赞同：0
> 
> 时间：2012-10-13T21:31:08.987
> 
> 标签：java, sockets, caching, serialization

我使用 ObjectOutputStream 在客户端和服务器之间使用基于套接字的连接。

序列化和交换的对象具有以下结构：

```
public class RichiestaSalvataggioArticolo implements Serializable {

        private ArticoloDati articolo;

        public RichiestaSalvataggioArticolo(ArticoloDati articolo) {
                this.articolo = articolo;

        }

        @Override
        public void ricevi(GestoreRichieste gestore) throws Exception {
                gestore.interpreta(this);                    
        }

        public ArticoloDati getArticolo() {
                return articolo;
        }

} 
```

问题是，当我尝试在具有非常相似的封装内容的 C/S 之间交换消息时（ArticoloDati 仅在 10 个字段中的 2 个字段不同），客户端发送一个 ArticoloDati，但服务器接收前一个。

**ObjectOutputStream 是否在调用之间实现某种缓存或内存，无法识别我的 2 个对象是不同的，因为它们非常相似？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:33:42.150

您需要在序列化中禁用“反向引用”，因此请使用[`ObjectOutputStream.writeUnshared`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html#writeUnshared%28java.lang.Object%29).

> 将“未共享”对象写入`ObjectOutputStream`. 此方法与 相同`writeObject`，只是它始终将给定对象作为流中的新的唯一对象写入（与指向先前序列化实例的反向引用相反）。

[`ObjectInputStream.readUnshared`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html#readUnshared%28%29)在某些情况下，将其与此结合是一种很好的做法——包括这一点。

# python - 在 Python 中将参数传递给 UDP 处理程序

> ID：12877185
> 
> 赞同：3
> 
> 时间：2012-10-13T21:31:13.177
> 
> 标签：python, sockets, arguments, handler

我第一次在 Python 中使用套接字，我遇到了问题。

我的 UDP 服务器有一个线程化的请求处理程序，但由于它的工作方式（如[这里](http://docs.python.org/release/3.1.3/library/socketserver.html#module-socketserver)所建议的那样），我无法弄清楚如何将参数传递给它。我需要它来访问应用程序中的其他对象，因为它必须通知它们网络中不同客户端执行的操作。然而，代表处理程序的类不能被实例化，所以它不能通过构造函数接受参数。

这是我的代码的简化版本。

```
class ThreadedUDPRequestHandler(socketserver.BaseRequestHandler):          

    def handle(self):
        data = self.request[0].strip()        
        socket = self.request[1]
        print ("{} wrote:".format(self.client_address[0]))
        print (data)
       #Ideally, I'd call a method of an object here

class ThreadedUDPServer(socketserver.ThreadingMixIn, socketserver.UDPServer):
    pass

class ServerManager():

    def __init__(self, player_box):
        self.player_box = player_box
        HOST, PORT = "xxx.xxx.xxx.xxx", 9999
        self.server = ThreadedUDPServer((HOST, PORT), ThreadedUDPRequestHandler)
        ip, port = self.server.server_address

    def start(self):             
        server_thread = threading.Thread(target=self.server.serve_forever)
        server_thread.start()

    def stop(self):
        self.server.shutdown() 
```

在这种情况下，我希望请求处理程序访问的对象是 player_box。目标是在每次发出请求时调用该对象的方法。有没有办法做到这一点，或者我应该使用不同的方法？

[我注意到这里](https://stackoverflow.com/questions/6389892/python-threads-passing-parameters)有一个类似的问题，但建议的解决方案对我根本不起作用。事实上，这对我来说没有多大意义......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:24:54.997

这可能有点难看，但这是我最好的主意：

```
class ThreadedUDPRequestHandler(socketserver.BaseRequestHandler):
    PLAYER_BOX = None
    def handle(self):
       data = self.request[0].strip()        
       # (...)
       self.PLAYER_BOX.foo()

class ServerManager():

    def __init__(self, player_box):
        class ThreadedUDPRequestHandlerWithPlayerBox(ThreadedUDPRequestHandler):
            PLAYER_BOX = player_box
        HOST, PORT = "xxx.xxx.xxx.xxx", 9999
        self.server = ThreadedUDPServer((HOST, PORT), ThreadedUDPRequestHandlerWithPlayerBox) 
```

如您所见，这个想法有两个部分：

1.  让你的处理程序类有一个类属性，可以从它的方法访问。
2.  创建此类的子类，其中上述属性将设置为所需的值（在您的情况下为 player_box 对象）。

我希望这有帮助。

# c# - RedirectStandardOutput 防止引发 Process.Exited 事件？

> ID：12877188
> 
> 赞同：2
> 
> 时间：2012-10-13T21:31:27.177
> 
> 标签：c#, process

我想要的只是将进程的标准输出重定向到文件。听起来很简单，但我尝试的一切都不起作用：

1.  将 DOS 样式的重定向放在参数列表中（例如`param1 param2 > output.txt`）不起作用；

2.  使用`RedirectStandardOutput = true`作品，但是，显然该过程在存在时不会引发事件。所以通过定义的处理程序`process.Exited += ...` 不会执行。需要明确的是，一旦我删除了该`RedirectStandardOutput = true`语句，它确实会引发一个事件。

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T01:52:59.593

方法＃2必须是要走的路。
该问题似乎是由阻止触发`Exited`事件的输出缓冲引起的。

您应该考虑消除`Exited`事件处理程序。相反，订阅`OutputDataReceived`事件并检查`Process.HasExited`处理程序中的属性以执行清理工作：

```
process.OutputDataReceived += new DataReceivedEventHandler(process_OutputDataReceived);

...

void process_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    Process p = (Process) sender;
    if(p.HasExited) ...
} 
```

# python - float64 与熊猫 to_csv

> ID：12877189
> 
> 赞同：118
> 
> 时间：2012-10-13T21:31:34.397
> 
> 标签：python, numpy, pandas

我正在阅读一个带有浮点数的 CSV，如下所示：

```
Bob,0.085
Alice,0.005 
```

并导入一个数据框，并将这个数据框写入一个新的地方

```
df = pd.read_csv(orig)
df.to_csv(pandasfile) 
```

现在`pandasfile`有：

```
Bob,0.085000000000000006
Alice,0.0050000000000000001 
```

发生什么事？也许我必须转换为其他类型，例如 float32 或其他类型？

我正在使用**pandas 0.9.0**和**numpy 1.6.2**。

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-10-14T12:58:04.093

正如评论中提到的，这是一个一般的浮点问题。

但是，您可以使用`float_format`关键字 of`to_csv`来隐藏它：

```
df.to_csv('pandasfile.csv', float_format='%.3f') 
```

或者，如果您不希望 0.0001 舍入为零：

```
df.to_csv('pandasfile.csv', float_format='%g') 
```

会给你：

```
Bob,0.085
Alice,0.005 
```

在您的输出文件中。

有关 的解释`%g`，请参阅[Format Specification Mini-Language](https://docs.python.org/library/string.html#format-specification-mini-language)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-08T14:11:08.017

**更新：**在撰写本文时答案是准确的，并且浮点精度仍然不是您默认使用 to_csv/read_csv 获得的（精度-性能权衡；默认值有利于性能）。

现在有[可用于](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html)[的`float_format``pandas.DataFrame.to_csv`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html)论据和可用于[的`float_precision`论据`pandas.from_csv`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html)。

原著仍然值得阅读，以更好地理解这个问题。

* * *

这是 pandas 中的一个错误，不仅在“to_csv”函数中，而且在“read_csv”中也是如此。这不是一般的浮点问题，尽管*浮点算术*确实是一个需要程序员注意的主题。下面的这篇文章澄清了这个主题：

```
http://docs.python.org/2/tutorial/floatingpoint.html 
```

显示“问题”的经典单线是......

```
>>> 0.1 + 0.1 + 0.1
0.30000000000000004 
```

...它没有像预期的那样显示 0.3。另一方面，如果您使用*定点算术*处理计算，并且仅在最后一步使用*浮点算术*，它将按预期工作。看到这个：

```
>>> (1 + 1 + 1)  * 1.0 / 10
0.3 
```

如果您迫切需要规避这个问题，我建议您创建另一个 CSV 文件，其中包含所有数字为整数，例如乘以 100、1000 或其他方便的因子。在您的应用程序中，像往常一样读取 CSV 文件，您将获得这些整数数字。然后将这些值转换为浮点数，除以您之前乘以的相同因子。

# netty - Netty NioClientSocketChannelFactory - 高效的构造函数参数

> ID：12877191
> 
> 赞同：0
> 
> 时间：2012-10-13T21:31:39.597
> 
> 标签：netty

我正在使用 netty 发送多个客户端请求，并且想知道如何最好地配置 NioClientSocketChannelFactory。IE：

`NioClientSocketChannelFactory.NioClientSocketChannelFactory(Executor bossExecutor, Executor workerExecutor, int workerCount)`

我有一个 ClientBootstrap 和 Channel，并且正在向不同的主机写入多个请求，并且没有设置和引导选项。例如，我可能会使用迭代器推送 100 个请求。

我应该如何配置这个？我已经尝试了单个和缓存池执行器的不同组合，最多有 1 个或 100 个工人。这里有些例子：

1.  当使用单个执行程序和 1 个工作人员时，它似乎提供了多线程请求，但是当将计数设置为 100 时，它似乎是单线程的
2.  使用 Cached Pool Executor 时，将计数设置为 1 似乎也更有效。增加工人数量似乎会使其变慢。

那么......我应该如何根据需要数百或更多并发请求来配置工厂以获得最佳性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:57:21.727

最好的办法是使用缓存线程池，让 Netty 根据可用处理器决定工作人员数量，或者简单地：

```
... = new NioClientSocketChannelFactory(); 
```

# php - 如何添加 Ajax jQuery 代码，从 PHP 文件 [数据库] 返回一行，然后更改输入文本的值？

> ID：12877193
> 
> 赞同：-2
> 
> 时间：2012-10-13T21:31:40.607
> 
> 标签：php, javascript, jquery, mysql

这是从数据库中获取记录的[PHP代码：](http://en.wikipedia.org/wiki/PHP)

```
<?php
    include("dbconn.inc");
    $data = mysql_query(
              "SELECT `subtitle`, `mian-title`, `page_num`, `note_path`, `flash_path`
              FROM `main-page`
              WHERE `page_num` =".$r." LIMIT 1";
    echo $data;
    if (mysql_num_rows($data) == 0) {
        echo "No rows found, nothing to print so am exiting";
        exit;
    }
    while ($row = mysql_fetch_assoc($data)) {
        echo $row['page_num'];
    }
    include("close.php");
?> 
```

这是 HTML：

```
<form method="post" action="data.php">
    <input name="Button1" type="submit" value="&lt;&lt;" />
    <input name="test" style="width: 31px; height: 23px" type="text" /> // this is a value of page_num in DB.
    <input name="Button2" type="submit" value="&gt;&gt;" >
</form> 
```

我想添加 Ajax 代码以从 PHP 代码中检索记录，然后根据返回的数据更改输入值，并且还想防止页面刷新！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:54:38.893

你需要给你的输入一个id。当您尝试在输入中设置值时，您需要使用`.val()`：

```
<script>
    $(function() {
        $.get('yourfile.php', function(data) {
            $('#test').val(data);
        });
    });
</script>
</head>
    <body>

    <form method="post" action="data.php">
        <input name="Button1" type="submit" value="&lt;&lt;" />
        <input id="test" name="test" style="width: 31px; height: 23px" type="text" /> // This is a value of page_num in the database.
        <input name="Button2" type="submit" value="&gt;&gt;" >
</form> 
```

如果您试图阻止表单提交，那么您需要：

1.  给表单一个 id 属性。
2.  捕捉`.submit()`事件
3.  返回假

这会将数组编码为[JSON](http://en.wikipedia.org/wiki/JSON)：

```
<?php
    $arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
    echo json_encode($arr);
?> 
```

在 Firefox 中使用[Firebug](http://en.wikipedia.org/wiki/Firebug_%28software%29)（在控制台选项卡上），您将看到：

```
{"a":1,"b":2,"c":3,"d":4,"e":5} 
```

现在在[jQuery](http://en.wikipedia.org/wiki/JQuery)中`.get()`，使用`.getJSON()`.

然后在函数内部而不是

```
 $('#test').val(data); 
```

采用

```
$('#test').val(data.a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:37:32.430

您必须使用[jQuery](http://en.wikipedia.org/wiki/JQuery)调用该函数，并将信息推送到`div`，将旧信息推送出去。（如果这是您的意思。否则，您只需将其放入另一个`div`）。这将是这样的：

```
<script type="text/javascript">
    // jQuery document

    $(document).ready(function(){
        function getInfo() {
            $.get('yourfile.php', function(data) {
                $('#yourdiv').html(data);
            });

</script> 
```

这应该可以解决问题。如果没有，您可以随时添加 a`$.ajax`而不是`$.get`.

```
$("#inputid).click(function(){
    if ('value' == this button){
        $.get('yourcontentsfile.php', function(data){
            $('#contentthatmustchangediv').html(data);
        }
        if('value' == the other one){
            $.get('yourcontentsfile.php', function(data){
                $('#contentthatmustchangediv').html(data);
            }
        }); 
```

我不完全确定这段代码会 100% 工作。您可能需要更改一两件事。但这个想法应该是对的。

（我不确定你是否注意到，但你输入了“mian-title”。这可能是一个错字。）

# javascript - jquery replaceWith 含义

> ID：12877196
> 
> 赞同：0
> 
> 时间：2012-10-13T21:31:56.470
> 
> 标签：javascript, jquery, html, replacewith

我正在使用 replaceWith`input type=file`来处理用户想要上传的文件的更改。

我有这个代码：

```
$('#add_cv_input').change(function() {
    // here is some code               
    else {
        alert('put one of this: pdf doc docx');
        $("#add_cv_input").replaceWith('<input id="add_cv_input" type="file"/>');
    }
}); 
```

现在的问题是，在用户第一次上传错误的扩展名之后，没有调用这个 jquery changed 事件。

我不知道为什么会这样。如果用户第一次上传有效的扩展名，然后他将其更改为其他有效的扩展名，则一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T21:35:34.333

当您销毁第一个项目时，事件处理程序将随之销毁。如果您希望事件处理程序位于新项目上，您有两种选择：

1.  创建新对象后，您可以在新对象上重新安装事件处理程序。
2.  您可以使用未销毁的父级的委托事件处理。

使用动态形式的委托事件处理可能是最简单的`.on()`：

```
$(some parent selector).on('change', '#add_cv_input', function() {
    // code here
}); 
```

您在哪里选择一些尽可能接近`#add_cv_input`但未被破坏的父选择器。

* * *

如果您想在替换元素后重新附加事件处理程序，您可以这样做（尽管委托事件处理会更简洁）：

```
function processChange() {
    // here is some code               
    else {
        alert('put one of this: pdf doc docx');
        $("#add_cv_input").replaceWith('<input id="add_cv_input" type="file"/>');
        $('#add_cv_input').change(processChange);
    }
});

$('#add_cv_input').change(processChange); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T21:35:53.617

您正在破坏事件处理程序绑定到的原始元素，这就是它没有再次触发的原因。与其更换元素，不如尝试重置它。

编辑：看到重置单个文件输入是不平凡的（因为`this.value = null;`在所有浏览器中都不起作用），替换元素似乎是更好的选择。

您可以将事件处理程序附加到新创建的元素。[ [`.replaceAll()`](http://api.jquery.com/replaceAll/)]

```
function cv_input_file(){
    // here is some code               
    else {
        alert('put one of this: pdf doc docx');
        $('<input id="add_cv_input" type="file"/>')
         .replaceAll("#add_cv_input")
         .change(cv_input_file);
    }
}
$('#add_cv_input').change(cv_input_file); 
```

或使用事件委托，这样您就不必在每次替换元素时都添加处理程序。

```
$(document/*or the closest static ancestor*/).on('change', '#add_cv_input', function() {
    // here is some code               
    else {
        alert('put one of this: pdf doc docx');
        $("#add_cv_input").replaceWith('<input id="add_cv_input" type="file"/>');
    }
}); 
```

# python - Python GUI 生成数学方程

> ID：12877212
> 
> 赞同：3
> 
> 时间：2012-10-13T21:34:18.840
> 
> 标签：python, user-interface, tkinter

我有一个关于 python GUI 的特定项目的作业问题。

我的目标是创建一个 GUI，它询问一个随机数学方程，如果方程被正确评估，那么我将收到一条消息，说明它是正确的。

我的主要问题是找出我的陈述放在哪里，以便它们出现在标签中；我有 1 个生成随机方程的文本框，下一个文本框是空白的，我可以输入解决方案，然后最后有一个“Enter”按钮来评估我的解决方案。

它看起来像这样：

```
[*randomly generated equation*][*Empty space to enter solution*] [ENTER] 
```

我已经设法获得布局和评估参数，但我不知道从哪里开始。

到目前为止，这是我的代码：

```
class Equation(Frame):

    def __init__(self,parent=None):
        Frame.__init__(self, parent)
        self.pack()
        Equation.make_widgets(self)
        Equation.new_problem(self)

    def make_widgets(self):
        Label(self).grid(row=0, column=1)
        ent = Entry(self)
        ent.grid(row=0, column=1)
        Label(self).grid(row=0, column=2)
        ent = Entry(self)
        ent.grid(row=0, column=2)
        Button(self, text='Enter', command=self.evaluate).grid(row=0, column=3)

    def new_problem(self):
        pass

    def evaluate(self):
        result = eval(self.get())
        self.delete(0, END)
        self.insert(END, result)
        print('Correct') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:05:14.880

```
self.labeltext = StringVar() # in __init__

# ...
Label(self, textvariable=self.labeltext) # in make_widgets

# ...
self.labeltext.set("Correct!") # in evaluate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:06:04.413

在`make_widgets()`中，您正在创建一堆小部件，但没有将它们分配给任何变量。这会阻止您在创建它们后访问它们。尝试将它们分配给实例变量，例如：

```
def make_widgets(self):
        self.equation_label = Label(self)
        self.equation_label.grid(row=0, column=1) #notice that grid() is on another line
        self.entry1 = Entry(self)
        ent.grid(row=0, column=1)
        self.solution_label = Label(self)
        self.solution_label.grid(row=0, column=2)
        self.entry2 = Entry(self)
        ent.grid(row=0, column=2)
        self.button = Button(self, text='Enter', command=self.evaluate)
        self.button.grid(row=0, column=3) 
```

这样，您可以从类中的其他函数访问它们，如下所示：

```
self.solution_label.config(text="Hello World") 
```

所以你的回调最终看起来更像这样：

```
def evaluate(self):
        result = eval(self.get())
        self.solution_label.config(text=str(result)) 
```

对于`Entry`小部件，您可以使用 JFSebastian 的答案，也可以使用`insert` and`delete`方法（无论如何您似乎都在尝试这样做）：

```
def evaluate(self):
    #...some code...
    self.solution_entry.delete(0, END)
    self.solution_entry.insert(0, "Some text")
    #...more code... 
```

[Tkinterbook](http://effbot.org/tkinterbook/)是查找小部件配置选项等的绝佳资源。

*编辑*

有关设置小部件值的另一种方法，请参阅[JFSebastian 的回答](https://stackoverflow.com/a/12877426/1142167)。

# c# - 处理多个全局热键的好设计是什么？

> ID：12877213
> 
> 赞同：0
> 
> 时间：2012-10-13T21:34:28.170
> 
> 标签：c#, hotkeys

## 我正在努力想一个好的设计来处理多个全局热键。

假设我有三个不同的功能绑定到三个不同的全局热键......

1.  播放歌曲 | Ctrl + P
2.  跳过歌曲 | Ctrl + N
3.  增加音量 | Ctrl + V

检查按下的热键是否符合特定功能的好方法是什么？我正在使用与此非常相似的类：[http ://www.liensberger.it/web/blog/?p=207](http://www.liensberger.it/web/blog/?p=207)

我应该为每个热键创建一个热键类的新实例吗？

```
Hotkey hotkey = new Hotkey();
hotkey.RegisterHotkey(Shortcut.ModifierKeys.Control, Keys.F10);

hotkey.KeyPressed += ((s, args) =>
{
    //Do Something!
}); 
```

或者我应该有一个具有不同热键功能的枚举并从热键类中管理它以防止多个实例（似乎很浪费但很容易）。感谢您提前提供任何建议/帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:49:34.090

我会选择为每个不同的函数创建一个单独的类实例，因为命令模式在这里看起来很合适。有关更多信息，请参阅[此链接。](http://en.wikipedia.org/wiki/Command_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:51:30.387

为什么不将热键类设为静态？

```
 Hotkey.Register(modifier, key, callback) 
```

并将它们保存在班级内的列表中？

另外，我建议您为热键添加更多修饰符。你所有的人都被分配到一个共同的任务：`Control`+ `P`= 打印，`Control`+ `N`= 新建和`Control`+ `V`= 粘贴

# objective-c - UIImageView 的 UIImage 为 nil

> ID：12877214
> 
> 赞同：1
> 
> 时间：2012-10-13T21:34:35.997
> 
> 标签：objective-c, ios, uiimageview

我在 UIImageView 中显示 UIImage 时遇到问题。我在 stackoverflow 上到处寻找类似的问题，但没有一个修复对我有帮助。

1.  图片确实在我的捆绑包中
2.  文件检查器 -> 目标成员已检查图像
3.  IBOutlet 已连接（我尝试过使用 IBOutlet 并以编程方式进行）
4.  png 和 jpg 都有效

这是使用 Interface Builder 的代码 -

```
//@property and @synthesize set for IBOutlet UIImageView *imageView
    - (void)viewDidLoad
    {
        [super viewDidLoad];
        NSAssert(self.imageView, @"self.imageView is nil. Check your IBOutlet connection");
        UIImage *image = [UIImage imageNamed:@"banner.jpg"];
        NSAssert(image, @"image is nil");
        self.imageView.image = image;      
    } 
```

此代码将以 NSAssert 终止，在控制台中打印“image is nil”。

我还尝试直接从属性检查器中选择图像： ![在此处输入图像描述](../Images/d9bbdc300a9f3d252a89da2ed8902af1.png)

但是它仍然没有显示图像（仍然以 NSAssert 终止 - '图像为零'）。

任何帮助或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:47:03.540

看看你是否可以在你的代码中看到文件 - 使用

```
path = [[NSBundle main bundle] pathForResource:@"banner" ofType:@"jpg"];
assert(path); 
assert([[NSFileManager defaultManager] fileExists:path]) 
```

我刚刚输入了这个，但你明白了 - 使用第一个获取路径，确保你得到它，然后要求文件管理器查看它是否存在。如果是，您可以将文件读入 NSData 对象，然后记录大小，然后查看是否可以使用 imageWithData 创建图像 - 如果失败，则 iOS 可能无法解压缩它。

我经常拍摄在 PhotoShop 或其他地方创建的图像，在预览中加载它们，然后在将它们添加到我的项目之前保存它们。一般来说，如果 Apple 技术将图像保存为您想要的任何格式（png、jpg 等），那么 iOS 很可能也可以打开它。

# joomla - joomla资产表用途

> ID：12877216
> 
> 赞同：10
> 
> 时间：2012-10-13T21:34:43.943
> 
> 标签：joomla, joomla2.5, assets, joomla1.7, joomla1.6

您能否向我解释一下joomla中**资产表的用途是什么？**

我有用于导入文章的脚本，`.csv (from .xls)`它只是在内容表中插入新行，`asset_id`列（外键）设置为`0`.

我没有发现资产 ID 设置为 0 的文章有任何问题。无论如何，我想知道这是否会导致任何问题或禁用某些功能。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-14T01:12:03.213

资产表是 Joomla 的一部分！1.6+ ACL 系统。它旨在保存定义访问规则的每个资产的记录。

您可以在此处阅读有关[Joomla! 的 ACL 的](http://docs.joomla.org/Access_Control_List/2.5/Tutorial)更多信息，并且在 Joomla! 中有一个部分！2.5[添加ACL支持](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_ACL)的组件教程。

如果您要导入文章（资产 id 为 0），那么它们实际上在表中没有条目，`#__assets`它们将继承默认访问权限，直到它们被打开并保存。保存它们后，将创建资产记录。

如果您想正确创建资产记录，只需加载`com_content`模型并使用它为每篇文章进行导入，（没有批量导入方法，我们在 1.6、1.7 和 2.5 出现时寻找了一种）。

# python - 从列表中删除公共元素

> ID：12877220
> 
> 赞同：0
> 
> 时间：2012-10-13T21:35:17.267
> 
> 标签：python, list, python-2.7

使用这些列表：

```
a=[2,6,79,10]
b=[6,7,2,0,8,5] 
```

所需的输出将是：

```
a=[79,10]
b=[7,0,8,5] 
```

为什么这段代码不起作用？

```
def cel(a,b):
    for x in a:
        if x in b:
            b.remove(x)
            a.remove(x) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:43:21.433

@gokcehan 的答案中保留顺序的算法是立方体`O(n**3)`。即使对于中等大小的列表，它也非常低效（Programming Pearls 书中有一个示例，其中 Basic 中的线性算法优于 C 中的三次算法（分钟与天））。

您可以保持顺序并在线性时间内运行它：

```
common = set(a).intersection(b)
a = [x for x in a if x not in common]
b = [x for x in b if x not in common] 
```

你可以就地做：

```
def remove_items(lst, items):
    items = set(items) # unnecessary in your case
    pos = 0
    for x in lst:
        if x not in items:
           lst[pos] = x # save
           pos += 1
    del lst[pos:]

common = set(a).intersection(b)
remove_items(a, common)
remove_items(b, common) 
```

[演示](http://ideone.com/tiwxm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T21:42:11.773

您可以为此目的使用集合操作：

```
i = set(a).intersection(set(b))
a = list(set(a).difference(i))
b = list(set(b).difference(i)) 
```

**编辑**我试图调试您的原始代码，并意识到它在删除一个数字时会跳过一个数字。谷歌搜索后，我发现由于一些内部索引问题，**在迭代时修改列表不是一种定义的行为。**最简单的解决方法是在 for 循环中使用原始数组的副本：

```
for x in a[:]:
    if x in b:
        b.remove(x)
        a.remove(x) 
```

# html - 为什么我的链接不能将用户带到任何地方，但是如果我右键单击并选择“在新选项卡中打开”它会打开正常

> ID：12877222
> 
> 赞同：0
> 
> 时间：2012-10-13T21:35:28.507
> 
> 标签：html, css

我的网站是[http://christianselig.com](http://christianselig.com)，在关于页面的底部页脚，如果你点击“工作”它实际上不会去它，但如果我右键单击并选择“在新标签中打开”它会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:41:37.673

在“联系人”页面上，`Javascript`单击链接时会引发错误。第 6 行中*的“未捕获的类型错误：无法读取未定义的属性‘顶部’”*`script.js`。

似乎您将`Javascript`“联系人”页面上的内容与仅应显示在主页上的脚本混为一谈。将您的脚本分开，以便它们仅出现在相应的页面上（或检查您所在的页面），并且链接将起作用。

# php - 无法加载 Composer 包

> ID：12877228
> 
> 赞同：0
> 
> 时间：2012-10-13T21:35:49.733
> 
> 标签：php, package, composer-php, httpful

我是使用作曲家包的新手。我已经完成了一些工作，但我遇到了一个我想使用的 Google 地图包，但我无法正确加载它。

[php-google-maps 包](https://packagist.org/packages/php-google-maps/php-google-maps)

我尝试使用该软件包：

```
<?php

require './vendor/autoload.php';

use \PHPGoogleMaps\Service\Geocoder;
use \PHPGoogleMaps\Service\GeocodeError;
use \PHPGoogleMaps\Service\GeocodeResult;
use \PHPGoogleMaps\Service\GeocodeException;

$map = new \PHPGoogleMaps\Map;
// Rest of GMap code goes here...
?> 
```

这失败并显示消息`Class 'PHPGoogleMaps\Map' not found`

作曲家.json 文件：

```
{
    "require" : {
        "nategood/httpful":"*",
        "nesbot/carbon": "dev-master",
        "php-google-maps/php-google-maps": "dev-master"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:49:54.807

PHPGoogleMaps 包的 composer.json 中有一个错误。安装后的目录结构不符合 PSR-0 自动加载标准。

我提交了修复问题的[PR](https://github.com/galen/PHPGoogleMaps/pull/16)，但在修复之前，您可以为包定义自己的存储库（更改目标目录）：

```
{
    "require" : {
        "nategood/httpful":"*",
        "nesbot/carbon": "dev-master",
        "jakzal/php-google-maps": "dev-master"
    },
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "jakzal/php-google-maps",
                "version": "dev-master",
                "source": {
                    "url": "https://github.com/galen/PHPGoogleMaps",
                    "type": "git",
                    "reference": "master"
                },
                "autoload": {
                    "psr-0": {"PHPGoogleMaps": ""}
                },
                "target-dir": "PHPGoogleMaps"
            }
        }
    ]
} 
```

# c++ - 使用线程在以元音或辅音开头的单词之间交替

> ID：12877229
> 
> 赞同：2
> 
> 时间：2012-10-13T21:35:49.400
> 
> 标签：c++, multithreading

我正在尝试`main()`创建两个线程，它们将运行两个函数：

*   `vow`- 打印以元音开头的单词
*   `cons`- 打印以辅音开头的单词。

这些词来自文本文件并被读入向量。当前代码以正确的顺序打印出单词，但将每个单词标记为以元音开头的单词。我正在使用测试语句：`"Operating Systems class at college."`

如果我将当前检查所有元音的 if 语句更改为仅检查 O（大写 o），则它将“Operating”标记为元音，这是正确的，其余的则标记为辅音。出了什么问题？

我不允许使用同步技术。

```
#include <iostream>
#include <thread>
#include <fstream>
#include <string>
#include <iterator>
#include <vector>
#include <sstream>

using namespace std;

int cons(string temp){
    cout << "cons:  " << temp << endl;
    //this_thread::yield();
    return 0;
}

int vow(string temp){
    cout << "vow:   " << temp << endl;
    //this_thread::yield();
    return 0;
}

int main(){
    string sentence, temp;
    ifstream ifs;
    ofstream ofs;
    vector <thread> wordThreads;

    ifs.open("phrase.txt");
    getline(ifs, sentence);
    istringstream s(sentence);
    istream_iterator<string> begin(s), end;
    vector<string> words(begin, end); 

    ifs.close();

    for(int i=0; i<(int)words.size(); i++) {
        temp = words[i];
        if(temp[0] == 'A'||'a'||'E'||'e'||'I'||'i'||'O'||'o'||'U'||'u') {
            thread threadOne(vow, temp);
            threadOne.join();
        }
        else {
            thread threadTwo(cons, temp);
            threadTwo.join();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:39:39.407

`temp[0] == 'A'||'a'||'E'||'e'||'I'||'i'||'O'||'o'||'U'||'u'`不评估您认为的结果；这将始终导致分支被采用。`temp[0] == 'A'`首先被评估；如果为 false，则评估每个后续字符文字表达式并将其视为分支的条件。由于`'A'`,`'a'`等均非零，因此将始终采用分支。也许你的意思是这样的？

```
temp[0] == 'A' || temp[0] == 'a' || temp[0] == 'E' || ... 
```

...或者可能是这样的：

```
std::string vowels = "AaEeIiOoUu";
...
if (vowels.find(temp[0]) > 0) {
  ...
} 
```

# linux - 如何确定从客户端（在 linux 上）发送的非阻塞套接字实际上已将数据发送到服务器？

> ID：12877233
> 
> 赞同：1
> 
> 时间：2012-10-13T21:36:11.820
> 
> 标签：linux, sockets, nonblocking

如何确定从客户端（在 linux 上）发送的非阻塞套接字实际上已将数据发送到服务器？

我通过 wifi 网络以非阻塞方式完成了客户端套接字 send()，其中 send() 表示发送已完成且没有任何错误。在查看 wireshark 日志时，我发现在 wifi 网络上发生了很多针对此发送的重新传输。我也意识到套接字不能强制缓冲区中的数据，如链接（http://www.unixguide.net/network/socketfaq/2.11.shtml）中所述，所以在这种情况下，客户端套接字有可能知道实际发送尚未发生？如果有怎么办？检测到这种情况会帮助我，例如，关闭套接字，然后在一段时间后再次尝试发送它。

-vj。

# mysql - 使用动态表名分配将表拆分为新的多个表

> ID：12877234
> 
> 赞同：3
> 
> 时间：2012-10-13T21:36:30.067
> 
> 标签：mysql, variables, split

我有一个“ **TableOriginal** ”，我想将其“拆分”为多个表，每个表的**名称都与“** **tableOriginal ”中的“** *split* ”列中的值不同。因此，名称必须是动态的（可能由先前查询结果的变量形成）。

 ****表原件：**

```
+----+-------+-------+
| id | split | value |
+----+-------+-------+
| 1  |   A   |  v1   |
| 2  |   A   |  v2   |
| 3  |   A   |  v3   |
| 4  |   B   |  v4   |
| 5  |   B   |  v5   |
| 6  |   B   |  v6   |
| 7  |   C   |  v7   |
| 8  |   C   |  v8   |
| 9  |   A   |  v9   |
| 10 |   B   |  v10  |
| 11 |   B   |  v11  |
| 12 |   C   |  v12  |
+----+-------+-------+ 
```

**TableSplit_A**

```
+----+-------------+-------+
| id | original_id | value |
+----+-------------+-------+
| 1  |      1      |  v1   |
| 2  |      2      |  v2   |
| 3  |      3      |  v3   |
| 4  |      9      |  v9   |
+----+-------------+-------+ 
```

**TableSplit_B**

```
+----+-------------+-------+
| id | original_id | value |
+----+-------------+-------+
| 1  |      4      |  v4   |
| 2  |      5      |  v5   |
| 3  |      6      |  v6   |
| 4  |      10     |  v10  |
| 5  |      11     |  v11  |
+----+-------------+-------+ 
```

**TableSplit_C**

```
+----+-------------+-------+
| id | original_id | value |
+----+-------------+-------+
| 1  |      7      |  v7   |
| 2  |      8      |  v8   |
| 3  |      12     |  v12  |
+----+-------------+-------+ 
```

# SQLFiddle：

[**http://sqlfiddle.com/#!2/61266**](http://sqlfiddle.com/#!2/61266)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:55:05.573

您可能可以为此使用[VIEW 。](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)对于动态方法，请参见`TEMPTABLE`VIEW 的论点。

然后，在 VIEW 的创建查询中，您使用别名作为列名。

在我看来，相关的动态应该在代码中而不是在服务器上的过程中处理。无论如何，这是一个例子：

```
CREATE ALGORITHM=UNDEFINED 
DEFINER=`user`@`yourserver` 
SQL SECURITY DEFINER 
VIEW `tableA` AS select `tableoriginal`.`id` AS `id`,
     `tableoriginal`.`split` AS `tableoriginal_A`,
     `tableoriginal`.`value` AS `value` 
from 
     `tableoriginal` 
where
     (`tableoriginal`.`split` = 'A') 
```

现在您可以像任何其他表一样查询（我在此示例中`TableA`跳过了）。`TEMPTABLE`

希望这与您在哪里寻找的东西有关。

添加到提琴手： [http ://sqlfiddle.com/#!2/c4304/1](http://sqlfiddle.com/#!2/c4304/1)

更新：（基于下面的评论）

就我个人而言，我按照 STORE-NOP 原则工作：-P 仅将数据库用于 STORE-REtrieve-NOt-for-Processing (tm)，因此我将分两步进行：

```
select distinct split from TableOriginal; 
```

然后检查每个结果并将结果注入到预定义的查询中（注意字符串中的 {0}，这些将在稍后被替换 - 并且可能在您使用的语言中有所不同）：

```
myView = "CREATE ALGORITHM=UNDEFINED 
SQL SECURITY DEFINER 
VIEW `table{0}` AS select `tableoriginal`.`id` AS `id`,
     `tableoriginal`.`split` AS `tableoriginal_{0}`,
     `tableoriginal`.`value` AS `value` 
from 
     `tableoriginal` 
where
     (`tableoriginal`.`split` = '{0}')
;" 
```

然后对结果中的每一行运行查询（VB 中的伪代码）：

```
For Each line In DBQueryResult
  cmd.ExecuteWrite(String.Format(myView, line.field("split"))
Next 
```

我现在无法检查这些语句是否有效，但它是伪代码，因此您可以了解如何用您使用的语言执行此操作。

您可能还需要考虑在最终查询中使用 IF EXIST/DROP VIEW 或 TEMPTABLE。**

# android - 使用 Tesseract 的 OCR Android 应用程序

> ID：12877235
> 
> 赞同：4
> 
> 时间：2012-10-13T21:36:30.153
> 
> 标签：android, ocr, tesseract

我正在尝试使用 Tesseract 在 Android 上构建 OCR 应用程序，但是当我保存图片时，应用程序崩溃了。

我已经使用教程*[Simple Android Photo Capture](http://labs.makemachine.net/2010/03/simple-android-photo-capture/)* 和 OCR 功能以及*[使用 Tesseract 制作简单的 OCR Android 应用程序](http://gaut.am/making-an-ocr-android-app-using-tesseract/)*指南构建了照片捕获。

这是我正在使用的代码：

```
package com.mmm.pitter;

import java.io.File;
import java.io.IOException;

import com.mmm.pitter.R;
import com.googlecode.tesseract.android.*;
import com.googlecode.leptonica.android.*;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;
import android.media.ExifInterface;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class PitterActivity extends Activity
{
    protected Button _button;
    protected ImageView _image;
    protected TextView _field;
    protected String _path;
    protected boolean _taken;

    protected static final String PHOTO_TAKEN = "photo_taken";

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        _image = ( ImageView ) findViewById( R.id.image );
        _field = ( TextView ) findViewById( R.id.field );
        _button = ( Button ) findViewById( R.id.button );
        _button.setOnClickListener( new ButtonClickHandler() );

        _path = Environment.getExternalStorageDirectory() + "/images/make_machine_example.jpg";
    }

    public class ButtonClickHandler implements View.OnClickListener
    {
        public void onClick( View view ){
            Log.i("MakeMachine", "ButtonClickHandler.onClick()" );
            startCameraActivity();
        }
    }

    protected void startCameraActivity()
    {
        Log.i("MakeMachine", "startCameraActivity()" );
        File file = new File( _path );
        Uri outputFileUri = Uri.fromFile( file );

        Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE );
        intent.putExtra( MediaStore.EXTRA_OUTPUT, outputFileUri );

        startActivityForResult( intent, 0 );
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        Log.i( "MakeMachine", "resultCode: " + resultCode );
        switch( resultCode )
        {
            case 0:
                Log.i( "MakeMachine", "User cancelled" );
                break;

            case -1:
                try {
                    onPhotoTaken();
                }
                catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                break;
        }
    }

    protected void onPhotoTaken() throws IOException
    {
        Log.i( "MakeMachine", "onPhotoTaken" );

        _taken = true;

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 4;

        Bitmap bitmap = BitmapFactory.decodeFile( _path, options );

        _image.setImageBitmap(bitmap);

        _field.setVisibility( View.GONE );

        //_path = path to the image to be OCRed
        ExifInterface exif = new ExifInterface(_path);
        int exifOrientation = exif.getAttributeInt(
                ExifInterface.TAG_ORIENTATION,
                ExifInterface.ORIENTATION_NORMAL);

        int rotate = 0;

        switch (exifOrientation) {
            case ExifInterface.ORIENTATION_ROTATE_90:
                rotate = 90;
                break;
            case ExifInterface.ORIENTATION_ROTATE_180:
                rotate = 180;
                break;
            case ExifInterface.ORIENTATION_ROTATE_270:
                rotate = 270;
                break;
        }

        if (rotate != 0) {
            int w = bitmap.getWidth();
            int h = bitmap.getHeight();

            // Setting pre rotate
            Matrix mtx = new Matrix();
            mtx.preRotate(rotate);

            // Rotating Bitmap & convert to ARGB_8888, required by tess
            bitmap = Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, false);
            bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);
        }

        TessBaseAPI baseApi = new TessBaseAPI();
        // DATA_PATH = Path to the storage
        // lang for which the language data exists, usually "eng"
        baseApi.init(""sdcard/tesseract/tessdata", "eng");
        baseApi.setImage(bitmap);
        String recognizedText = baseApi.getUTF8Text();
        System.out.println(recognizedText);
        baseApi.end();
    }

    @Override
    protected void onRestoreInstanceState( Bundle savedInstanceState){
        Log.i( "MakeMachine", "onRestoreInstanceState()");
        if( savedInstanceState.getBoolean( PitterActivity.PHOTO_TAKEN ) ) {
            try {
                onPhotoTaken();
            }
            catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    @Override
    protected void onSaveInstanceState( Bundle outState ) {
        outState.putBoolean( PitterActivity.PHOTO_TAKEN, _taken );
    }
} 
```

这是日志：

```
10-13 23:13:51.191: I/MakeMachine(29787): ButtonClickHandler.onClick()
10-13 23:13:51.191: I/MakeMachine(29787): startCameraActivity()
10-13 23:13:51.851: D/CLIPBOARD(29787): Hide Clipboard dialog at Starting input: finished by someone else... !
10-13 23:13:51.866: W/IInputConnectionWrapper(29787): showStatusIcon on inactive InputConnection
10-13 23:14:07.431: I/MakeMachine(29787): onRestoreInstanceState()
10-13 23:14:07.431: I/MakeMachine(29787): resultCode: -1
10-13 23:14:07.431: I/MakeMachine(29787): onPhotoTaken
10-13 23:14:07.431: I/System.out(29787): Not a DRM File, opening notmally
10-13 23:14:07.436: E/JHEAD(29787): can't open
10-13 23:14:07.436: D/dalvikvm(29787): Trying to load lib /data/data/com.mmm.pitter/lib/liblept.so 0x4154e9a0
10-13 23:14:07.436: D/dalvikvm(29787): Added shared lib /data/data/com.mmm.pitter/lib/liblept.so 0x4154e9a0
10-13 23:14:07.446: D/dalvikvm(29787): Trying to load lib /data/data/com.mmm.pitter/lib/libtess.so 0x4154e9a0
10-13 23:14:07.456: D/dalvikvm(29787): Added shared lib /data/data/com.mmm.pitter/lib/libtess.so 0x4154e9a0
10-13 23:14:07.471: D/AndroidRuntime(29787): Shutting down VM
10-13 23:14:07.471: W/dalvikvm(29787): threadid=1: thread exiting with uncaught exception (group=0x40c5b1f8)
10-13 23:14:07.476: E/AndroidRuntime(29787): FATAL EXCEPTION: main
10-13 23:14:07.476: E/AndroidRuntime(29787): java.lang.RuntimeException: Unable to resume activity {com.mmm.pitter/com.mmm.pitter.PitterActivity}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=0, result=-1, data=null} to activity {com.mmm.pitter/com.mmm.pitter.PitterActivity}: java.lang.IllegalArgumentException: Data path must contain subfolder tessdata!
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2456)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2484)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1998)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3363)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.app.ActivityThread.access$700(ActivityThread.java:127)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1163)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.os.Looper.loop(Looper.java:137)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.app.ActivityThread.main(ActivityThread.java:4507)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at java.lang.reflect.Method.invokeNative(Native Method)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at java.lang.reflect.Method.invoke(Method.java:511)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at dalvik.system.NativeStart.main(Native Method)
10-13 23:14:07.476: E/AndroidRuntime(29787): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=0, result=-1, data=null} to activity {com.mmm.pitter/com.mmm.pitter.PitterActivity}: java.lang.IllegalArgumentException: Data path must contain subfolder tessdata!
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2992)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2443)
10-13 23:14:07.476: E/AndroidRuntime(29787):     ... 13 more
10-13 23:14:07.476: E/AndroidRuntime(29787): Caused by: java.lang.IllegalArgumentException: Data path must contain subfolder tessdata!
10-13 23:14:07.476: E/AndroidRuntime(29787):     at com.googlecode.tesseract.android.TessBaseAPI.init(TessBaseAPI.java:178)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at com.mmm.pitter.PitterActivity.onPhotoTaken(PitterActivity.java:146)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at com.mmm.pitter.PitterActivity.onActivityResult(PitterActivity.java:88)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.app.Activity.dispatchActivityResult(Activity.java:4649)
10-13 23:14:07.476: E/AndroidRuntime(29787):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2988)
10-13 23:14:07.476: E/AndroidRuntime(29787):     ... 14 more
10-13 23:19:32.376: I/Process(29787): Sending signal. PID: 29787 SIG: 9 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T07:16:50.143

您需要将数据文件放在目录中，并在您的方法中`tessdata`指定*父目录：*`tessdata``init()`

```
baseApi.init("/mnt/sdcard/tesseract", "eng"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-29T09:35:34.157

```
baseApi.init(""sdcard/tesseract/tessdata", "eng"); 
```

被替换为

```
baseApi.init(""sdcard/tesseract/", "eng"); 
```

带有 tessaract 的文件夹必须包含 tessdata 文件夹。因为，当你编译时，路径会加上“tessdat”这一行

```
File tessdata = new File(datapath + "tessdata"); 
```

在 init() 函数中。以及为什么路径末尾有斜杠（“/”），下面的评论会帮助你：

> 数据路径必须是 tessdata 的父目录的名称，并且必须以 / 结尾。最后一个 / 之后的任何名称都将被删除。语言（通常）是 ISO 639-3 字符串或`null`默认为 eng。在同一个实例上多次调用 Init 以更改语言或仅重置分类器是完全安全的（最终也会很有效）。

您可以在[网站](https://github.com/rmtheis/tess-two/blob/master/tess-two/src/com/googlecode/tesseract/android/TessBaseAPI.java)上看到有关 init() 函数的注释。我希望他们会帮助你。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-04-17T02:59:10.687

tesseract 库对于 windows 为 .zip，对于 linux 用户为 .tar.gz。

```
baseApi.init("/mnt/sdcard/tesseract/tessdata/eng.traineddata", "eng"); 
```

请告诉我它是否适合你。

# sql - SQL Query 在修复查询时需要一些帮助，以便每个唯一 ID 返回一行

> ID：12877237
> 
> 赞同：-2
> 
> 时间：2012-10-13T21:37:02.463
> 
> 标签：sql, tsql

我需要帮助修复查询，以便它返回正确的行数。我有下表，其中每个 ProductID 有 12 行。我想要将这 12 行转换为 1 行，每个产品 ID 有 12 个设置列。

生成的动态代码只创建 1 行

```
--Table this belongs to 

   Create table #Attributes
    (
            ProductID uniqueIdentifier,
            PAID Varchar(48), 
            Label nvarchar(50),
            AttrValue nvarchar(3072),
            unit nvarchar(50) 
    )
 . . . . . . .

select *
      from
      (
        select col + cast(rn as varchar(10)) new_col, val
        from 
        (
          select 
          Cast(PAID as NVarchar(3072)) PAID
          ,Cast (ProductID as NVarchar(3072)) ProductID
           ,Cast (Label  as NVarchar(3072)) Label
           ,Cast (Value as NVarchar(3072)) Value
           ,Cast (unit as NVarchar(3072))  unit  
            ,row_number() over(partition by ProductID order by ProductID) rn
          from #Attributes
        ) x
        unpivot
        (
          val
          for col in ([ProductID],[PAID],[Label],[Value],[unit])
        ) u
      ) x1
      pivot
      (
        max(val)
        for new_col in
          ([ProductID1],[PAID1],[Label1],[Value1],[unit1],[ProductID2],[PAID2],[Label2],[Value2],[unit2],[ProductID3],[PAID3],[Label3],[Value3],[unit3],[ProductID4],[PAID4],[Label4],[Value4],[unit4],[ProductID5],[PAID5],[Label5],[Value5],[unit5],[ProductID6],[PAID6],[Label6],[Value6],[unit6],[ProductID7],[PAID7],[Label7],[Value7],[unit7],[ProductID8],[PAID8],[Label8],[Value8],[unit8],[ProductID9],[PAID9],[Label9],[Value9],[unit9],[ProductID10],[PAID10],[Label10],[Value10],[unit10],[ProductID11],[PAID11],[Label11],[Value11],[unit11],[ProductID12],[PAID12],[Label12],[Value12],[unit12],[ProductID13],[PAID13],[Label13],[Value13],[unit13],[ProductID14],[PAID14],[Label14],[Value14],[unit14],[ProductID15],[PAID15],[Label15],[Value15],[unit15],[ProductID16],[PAID16],[Label16],[Value16],[unit16],[ProductID17],[PAID17],[Label17],[Value17],[unit17],[ProductID18],[PAID18],[Label18],[Value18],[unit18],[ProductID19],[PAID19],[Label19],[Value19],[unit19],[ProductID20],[PAID20],[Label20],[Value20],[unit20],[ProductID21],[PAID21],[Label21],[Value21],[unit21])
      ) p 
```

当前代码仅生成 1 行数据并忽略我表中的其他 ProductID。我会很感激一些帮助来解决这个问题。谢谢。

下面是一个表格（想想没有列分隔线的 Excel。产品 ID 字段有值，但 PAID、LABEL、VALUE 和 UNIT 列中没有值。这就是它们在表中显示为空白的原因。

```
PRODUCTID                                  PAID       LABEL         VALUE        UNIT
--------------------------------------------------------------------------------------
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
F4D58DCE-8EED-40E3-BF4C-07349BEC0A3E                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
ACF57CF7-7206-46F5-A341-16E1B9828DBC                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
95CF8634-DF1C-4E12-9584-56D726F9D3FD                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
C4196FB0-AAE1-4BC4-A6E3-630B90D249C1                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
A5A24B87-E4E7-4282-8BB1-7413198A7D1A                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
7EECE72B-26C5-4306-9706-85E344243122                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
60B1AB86-E0EB-41AE-858C-AAD4744FD49C                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
44CDDEC6-4889-491B-A896-B719C5B9F3E4                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
3866BBA2-624A-43B7-A04D-DE8ADF5DF739                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8                          
AA0A3639-2A36-4731-BF3F-F278D54A99C8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:41:27.847

`ProductID`从 UNPIVOT 列列表中排除，并相应`ProductID*`地从 PIVOT 列列表中排除所有列。此外，`ProductID`在子查询的 SELECT 中包含：

```
select *
      from
      (
        select **[ProductID],** col + cast(rn as varchar(10)) new_col, val
        from 
        (
          select 
          Cast(PAID as NVarchar(3072)) PAID
          ,Cast (ProductID as NVarchar(3072)) ProductID
           ,Cast (Label  as NVarchar(3072)) Label
           ,Cast (Value as NVarchar(3072)) Value
           ,Cast (unit as NVarchar(3072))  unit  
            ,row_number() over(partition by ProductID order by ProductID) rn
          from #Attributes
        ) x
        unpivot
        (
          val
          for col in (~~[ProductID],~~[PAID],[Label],[Value],[unit])
        ) u
      ) x1
      pivot
      (
        max(val)
        for new_col in
          (~~[ProductID1],~~[PAID1],[Label1],[Value1],[unit1],
           ~~[ProductID2],~~[PAID2],[Label2],[Value2],[unit2],
           ~~[ProductID3],~~[PAID3],[Label3],[Value3],[unit3],
           ~~[ProductID4],~~[PAID4],[Label4],[Value4],[unit4],
           ~~[ProductID5],~~[PAID5],[Label5],[Value5],[unit5],
           ~~[ProductID6],~~[PAID6],[Label6],[Value6],[unit6],
           ~~[ProductID7],~~[PAID7],[Label7],[Value7],[unit7],
           ~~[ProductID8],~~[PAID8],[Label8],[Value8],[unit8],
           ~~[ProductID9],~~[PAID9],[Label9],[Value9],[unit9],
           ~~[ProductID10],~~[PAID10],[Label10],[Value10],[unit10],
           ~~[ProductID11],~~[PAID11],[Label11],[Value11],[unit11],
           ~~[ProductID12],~~[PAID12],[Label12],[Value12],[unit12],
           ~~[ProductID13],~~[PAID13],[Label13],[Value13],[unit13],
           ~~[ProductID14],~~[PAID14],[Label14],[Value14],[unit14],
           ~~[ProductID15],~~[PAID15],[Label15],[Value15],[unit15],
           ~~[ProductID16],~~[PAID16],[Label16],[Value16],[unit16],
           ~~[ProductID17],~~[PAID17],[Label17],[Value17],[unit17],
           ~~[ProductID18],~~[PAID18],[Label18],[Value18],[unit18],
           ~~[ProductID19],~~[PAID19],[Label19],[Value19],[unit19],
           ~~[ProductID20],~~[PAID20],[Label20],[Value20],[unit20],
           ~~[ProductID21],~~[PAID21],[Label21],[Value21],[unit21])
      ) p 
```

* * *

更新：上述解决方案的解释。

在您的查询中，`x`子查询返回如下数据：

```
ProductID  PAID   Label   Value   unit   rn
---------  -----  ------  ------  -----  ---
A          ...    ...     ...     ...    1
A          ...    ...     ...     ...    2
...        ...    ...     ...     ...    ...
B          ...    ...     ...     ...    1
...        ...    ...     ...     ...    ... 
```

该`UNPIVOT`子句将它们转换为：

```
rn   col        val
---  ---------  -----
1    ProductID  A
1    PAID       ...
1    Label      ...
1    Value      ...
1    unit       ...
2    ProductID  A
2    PAID       ...
2    Label      ...
2    Value      ...
2    unit       ...
...  ...        ...
1    ProductID  B
1    PAID       ...
1    Label      ...
1    Value      ...
1    unit       ... 
```

SELECT 子句连接前两列以返回以下内容：

```
new_col     val
----------  -----
ProductID1  A
PAID1       ...
Label1      ...
Value1      ...
unit1       ...
ProductID2  A
PAID2       ...
Label2      ...
Value2      ...
unit2       ...
...         ...
ProductID1  B
PAID1       ...
Label1      ...
Value1      ...
unit1       ...
...         ... 
```

那是最终被旋转的行集。请注意，此时 SQL Server 无法将产品`A`的属性与产品的属性区分开来`B`。PIVOT 子句的作用类似于 GROUP BY，`new_col`通过应用`MAX()`它们将具有相同值的所有值折叠为一个。如果存在非透视列，则将根据该列中的值将行分成组。但是上面的行集中没有一个，因此，*所有*行都折叠成一个。

相反，您需要的是使您的最终但一个行集看起来像这样：

```
ProductID  new_col  val
---------  -------  -----
A          PAID1    ...
A          Label1   ...
A          Value1   ...
A          unit1    ...
A          PAID2    ...
A          Label2   ...
A          Value2   ...
A          unit2    ...
...        ...      ...
B          PAID1    ...
B          Label1   ...
B          Value1   ...
B          unit1    ...
...        ...      ... 
```

也就是说，该`ProductID`列允许 SQL Server 区分`PAID1`属于 product`A`和属于`B`.

要获得该行集，您只需`ProductID`从`UNPIVOT`子句中排除并将其拉到未透视的列旁边。并且由于`ProductID`从 UNPIVOT 列列表中排除，所有`ProductID1`等`ProductID2`也应该从 PIVOT 中排除，您可以在上面的查询中看到。

# mysql - 遍历结果行并将列数据存储到存储过程变量mysql中

> ID：12877244
> 
> 赞同：3
> 
> 时间：2012-10-13T21:37:48.447
> 
> 标签：mysql, loops, stored-procedures

我正在尝试学习mysql中的存储过程。我知道下面的示例不需要 SP，但这仅用于我的学习目的 - 只是为了了解如何循环遍历行，并选择行内的特定列数据。

假设表上的 SELECT 从我的表中返回 5 条记录，其结构如下 -

表名：t1 列：c1,c2,c3

我想遍历 5 行中的每一行，对于每一行，我想将列单元格数据存储到 SP 变量 varc1、varc2、varc3 中，以便 varc1 = c1、varc2 = c2、varc3 = c3。我将在循环内使用这些 varc1、varc2、varc3 进行进一步计算。

我假设需要一个存储过程，但我没有得到进行行迭代然后从循环中考虑的行中的每一列中选取数据的方法。

对mysql/存储过程来说很新。谢谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-07T22:47:22.967

正如您似乎知道的那样，您的要求是对大多数问题的特别低效的解决方案。但是，由于您特别要求它，并且（非常偶尔）这是解决问题的唯一方法（或者您个人有时间弄清楚如何解决它的唯一方法）。以下是您可以按照您的要求执行的操作：

创建您的 t1 表，例如：

```
CREATE TABLE t1(id INT PRIMARY KEY NOT NULL AUTO_INCREMENT, C1 INT, C2 INT, C3 INT); 
```

执行您描述的 SELECT，例如：

```
INSERT INTO  t1 SELECT NULL,c1,c2,c3 FROM the_table; 
```

现在这是您的 Row-By-Agonising-Row “ReeBAR” 低效率存储过程：

为您的过程准备空间并设置分隔符：

```
DROP PROCEDURE IF EXISTS ReeBAR;
DELIMITER ;; 
```

写下你的程序：

```
CREATE PROCEDURE ReeBAR()
BEGIN
DECLARE n INT DEFAULT 0;
DECLARE i INT DEFAULT 0;
DECLARE varc1 INT DEFAULT 0;
DECLARE varc2 INT DEFAULT 0;
DECLARE varc3 INT DEFAULT 0;
SELECT COUNT(*) into n FROM t1;
set i=1;
WHILE i<=n DO 
  SELECT c1 FROM t1 WHERE id=i INTO varc1; 
  SELECT c2 FROM t1 WHERE id=i INTO varc2;
  SELECT c3 FROM t1 WHERE id=i INTO varc3;
  --queries which couldnt be made into set based queries go here---
  SET i = i + 1;
END WHILE;
End; 
```

或者，如果您的 id 列不连续，您可以使用以下光标形式。

```
CREATE PROCEDURE ReeBAR()
BEGIN
  DECLARE cursor_ID INT;
  DECLARE cursor_VAL VARCHAR;
  DECLARE done INT DEFAULT FALSE;
  DECLARE cursor_i CURSOR FOR SELECT c1,c2,c3 FROM t1;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
  DECLARE varc1 INT DEFAULT 0;
  DECLARE varc2 INT DEFAULT 0;
  DECLARE varc3 INT DEFAULT 0;
  OPEN cursor_i;
  read_loop: LOOP
    FETCH cursor_i INTO varc1, varc2, varc3;
    IF done THEN
      LEAVE read_loop;
    END IF;
    --queries which couldnt be made into set based queries go here---
  END LOOP;
  CLOSE cursor_i;
END; 
```

不要忘记“结束”您使用的过程并重置分隔符

```
;;
DELIMITER ; 
```

最后运行您的 ReBAR 程序

```
CALL ReeBAR(); 
```

（代码未经测试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T21:48:00.260

使用 CURSORS 和循环对其进行迭代。[http://dev.mysql.com/doc/refman/5.0/en/cursors.html](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)。希望这可以帮助！

# javascript - 如何在循环中调用函数

> ID：12877245
> 
> 赞同：0
> 
> 时间：2012-10-13T21:38:07.947
> 
> 标签：javascript, function, loops, function-call, do-loops

我需要在循环中调用一个函数。

我有以下代码....

```
do {
    var name = prompt("Enter name:");

    if (!isNaN(age) && name != null && name != "") {
        names[i] = name;
    }
    loop = confirm("Add new name?");

    i++;
    // at this place I want to call the function
    // addnew(document.getElementById("newtable")"; so when someone clicks cancel in the confirm box the javascript creates a dynamic table from the array names
} while (loop);​ 
```

任何人都知道我如何调用函数addnew？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:45:20.903

我猜您希望在 Confirm 回答是时调用该函数，并在没有时终止循环，这可以像这样实现：

```
while(true) {
    var name = prompt("Enter name:");
    if (!name) {
        break;
    }

    if (!isNaN(age)) {
        names[i] = name;

    }

    if (!confirm("Add new name?")) {
        break;
    }

    i++;
    // at this place I want to call the function
    addnew(document.getElementById("newtable")); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:05:38.293

你是否想做这样的事情：

```
var name,
names = [];

function coolFunc(names) {
    console.log(names);
}

do {
    var name = prompt("Enter name:");

    if (name != null && name != "") {
        names.push(name);
    }
    loop = confirm("Add new name?");

//  if you want to handle the names one-by-one as you get them, then you could call 
//  your function here, otherwise call it when you exit the loop as below

} while (loop);

coolFunc(names); 
```

我删除了测试，`age`因为你发布的内容中没有任何内容表明它来自哪里，所以抛出了一个错误，所以你需要在适当的时候重新处理它，而且`i`看起来并没有必要，但是也抛出错误。

# c# - 释放多个线程？

> ID：12877246
> 
> 赞同：20
> 
> 时间：2012-10-13T21:38:16.977
> 
> 标签：c#, multithreading

所以我有一个足够简单的控制台应用程序：

```
class Program
{
    static void Main(string[] args)
    {
        Console.ReadKey();
    }
} 
```

我已经使用发布配置构建了它。当我运行它并打开任务管理器时，我看到它有 4 个线程。即使我没有创建任何线程，为什么会发生这种情况？

这不可能是每个应用程序。我尝试打开记事本，它只有 1 个线程。虽然它是一个本机应用程序并且我的控制台应用程序是托管的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-13T22:01:09.797

我想你看到的线程是：

1.  主线。
2.  终结器线程
3.  进程内[调试器帮助线程](http://msdn.microsoft.com/en-us/library/bb384548.aspx)
4.  并发 GC 线程。

[这篇文章](http://blogs.msdn.com/b/yunjin/archive/2005/07/05/435726.aspx)详细介绍了一些特殊的 CLR 线程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T21:42:02.337

这些是为应用程序创建的 .NET Framework 线程，您可以使用 Visual Studio 2010 线程调试窗口来查看问题下的应用程序属于哪些线程。

刚刚创建了一个带有空 main 方法的基本控制台应用程序，我们可以看到创建了 8 个线程：

![在此处输入图像描述](../Images/90c9e760aaa16c36288b2752b8ead85a.png)

在此处查看有关 CLR 内部线程的有趣讨论：[CLR 的内部线程](http://social.msdn.microsoft.com/Forums/en/netfxtoolsdev/thread/3a821c91-0d8e-486c-8fd6-1a2a85804920)

顺便说一句，记事本不是 .NET Framework 应用程序

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T21:51:46.700

.NET Framework 总是在程序开始时启动一些线程：

1.  你的主线程（显然）
2.  垃圾回收线程
3.  JIT 线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T21:53:21.393

普通 COM 应用程序和托管应用程序之间存在一个基本区别。这是垃圾收集器。

每个进程都有一个与之关联的终结器线程，因此应用程序中的终结器仅在该线程上运行。

所以线程是： 1\. 主线程（您的应用程序已创建） 2\. 终结器线程（由垃圾收集器使用。3\. JIT 线程（用于即时 JIT 代码）

其他线程可以是 SysEvents 等。

# linux - 以特权运行tomcat6 webapp

> ID：12877249
> 
> 赞同：1
> 
> 时间：2012-10-13T21:38:41.567
> 
> 标签：linux, tomcat, websocket

我在 tomcat6 上运行 jWebSockets，当它出现时，这条线出现在日志中：

`2012-10-13 23:04:52,298 ERROR - FlashBridgePlugIn: FlashBridge could not be started: Permission denied`

一些挖掘，我发现由于这个插件运行一个 FlashPolicyServer 并且它需要使用端口 843，它需要 root 权限。如何为 webapp 授予 root 权限？我可以给 TOMCAT_USER 足够的权限，以便它能够使用低于 1024 的端口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:40:31.670

端口 843 是备用端口，您是否尝试检查端口 8787 是否打开。请[在此处查看文档](http://jwebsocket.org/downloads/dl_latest.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:58:11.610

看看[jsvc](http://commons.apache.org/daemon/jsvc.html)。它可用于启动 Tomcat 以允许它执行一些 root-y 操作，例如绑定到低编号端口。

我不确定 jsvc/Tomcat 在什么时候会合谋删除 root 权限：在删除权限之前，您的 webapp 可能没有机会打开该端口。在这种情况下，我认为您必须编写自己的引导程序（Java）类，类似于库存的 Tomcat 类，并将*其*与 jsvc 一起使用。然后，您可以允许您的 web 应用程序在放弃 root 权限之前打开该端口。

# jquery - jQuery 移动版，可在线工作，但不能在本地工作

> ID：12877255
> 
> 赞同：0
> 
> 时间：2012-10-13T21:40:10.697
> 
> 标签：jquery, jquery-mobile, local

这个问题快把我逼疯了。当我将 jQuery 标签引用到 http 地址时

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

该应用程序运行良好。但是当我使用此代码时（在本地调用 jquery）

```
<link rel="stylesheet" href="css/jquery.mobile-1.1.1.min.css" />
<script src="js/jquery-1.7.1.min.js" ></script>
<script src="js/jquery.mobile-1.1.1.min.js" ></script> 
```

该应用程序不起作用，Chrome 控制台给了我这个错误

> 未捕获的类型错误：无法读取未定义的属性“事件” `jquery.mobile-1.1.1.min.js:7`

我 100% 确定文件是可访问的（Ctrl + U 显示源代码，我从浏览器打开文件，它们在那里并且可以访问）有没有人有同样的问题并且知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:07:15.187

简单的解决方案是调用`jquery mobile`AFTER `jquery`，

使用 CDN 时，我在 jquery mobile 之前调用了 jquery，但在本地我颠倒了顺序。

结果我得到了那个错误，这很清楚，因为 jquery 还没有加载！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:42:27.657

您确定您的 jquery（核心）的本地副本是 v1.6.4 还是 v1.7.1。您专门通过 CDN 引用它，但您对本地`<script>`包含的标记并没有说明这一点。jQuery Mobile 1.1.1 只兼容这两个版本的核心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T03:15:20.397

我有同样的问题，我的代码起初看起来像这样：

```
 <script src="jquery.mobile.js"></script>
      <script src="jquery.min.js"></script>
      <link rel="stylesheet" type="text/css" href="jquery.mobile.css"> 
```

但我把它换成了这个，它起作用了：

```
<script src="jquery.min.js"></script>
      <script src="jquery.mobile.js"></script>
      <link rel="stylesheet" type="text/css" href="jquery.mobile.css"> 
```

谢谢Z！

# android - Android MapActivity & ItemizedOverlay 改变当前位置 onTouchEvent

> ID：12877259
> 
> 赞同：3
> 
> 时间：2012-10-13T21:40:25.427
> 
> 标签：android, itemizedoverlay, mapactivity

我有一个应用程序，其中一个活动显示地图，另一个类用于在地图上放置标记或任何叠加项目。它现在很好用，但是当用户触摸地图时，它会显示一条带有新位置的消息（此代码在 AddItemizedOverlay 的 ontouche 事件中实现）。

相反，我想将地图上的图钉更改为新位置（主要活动中的代码）。如何将 AddItemizedOverlay 类中的新位置数据传递给主要活动？如何绘制新的用户位置？谢谢！！！

myMapactivity.java

```
public class myMapactivity extends MapActivity 
{

private MapView mapView;
private MapController mapCtrl;
List<Overlay> mapOverlays;
GeoPoint mePoint;

AddItemizedOverlay itemizedOverlay;
OverlayItem overlayitem;

    public void onCreate(Bundle savedInstanceState)
    {
        ...

       mapView = (MapView) findViewById(R.id.mapview);
   mapView.setSatellite(false);
   mapView.setBuiltInZoomControls(true);

   mapOverlays = mapView.getOverlays();
   mapOverlays.clear();
   mapCtrl = mapView.getController();

       drawCurrentUserLocation();
     }

     private void drawCurrentUserLocation()
{

   // Drawable marker icon
   Drawable drawable_user = this.getResources()
            .getDrawable(R.drawable.mark_red);

   itemizedOverlay = new AddItemizedOverlay(drawable_user, this);

   overlayitem = new OverlayItem(mePoint, "Your Location","That is you!");

   itemizedOverlay.addOverlay(overlayitem);

   mapOverlays.add(itemizedOverlay);
   itemizedOverlay.populateNow();
   mapCtrl.animateTo(mePoint);
   mapCtrl.setZoom(17);
}
} 
```

AddItemizedOverlay.java

```
 public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

   private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

   private Context context;

   public AddItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
   }

   public AddItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
   }

   @Override
   public boolean onTouchEvent(MotionEvent event, MapView mapView)
   {   

       if (event.getAction() == 1) {
           GeoPoint geopoint = mapView.getProjection().fromPixels(
               (int) event.getX(),
               (int) event.getY());
           // latitude
           double lat = geopoint.getLatitudeE6() / 1E6;
           // longitude
           double lon = geopoint.getLongitudeE6() / 1E6;

           Geocoder geocoder = new Geocoder(context, Locale.getDefault());   
           String result = null;
           try {
               List<Address> list = geocoder.getFromLocation(lat, lon, 1);
               if (list != null && list.size() > 0) {
                   Address address = list.get(0);
                   // sending back first address line and locality
                   result = address.getAddressLine(0) + ", " + address.getLocality();
                   Toast.makeText(context, result, Toast.LENGTH_SHORT).show();
               }
           } catch (IOException e) {
               Log.e("Error", "Impossible to connect to Geocoder", e);
           } 

       }
       return false;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:58:12.837

由于 myMapactivity 是 AddItemizedOverlay 的上下文，您可以使用：

`((myMapactivity)context).setMarker(event)`在 AddItemizedOverlay 中；这将调用应该在 myMapactivity 中实现的公共方法 setMarker(MotionEvent event)。

# unit-testing - 涉及随机数的单元测试算法

> ID：12877260
> 
> 赞同：4
> 
> 时间：2012-10-13T21:40:54.530
> 
> 标签：unit-testing, testing, random, tdd, fractals

我正在编写一些关于分形和随机地形生成的代码。具体来说，我现在使用的是 Diamond-Square 算法。不知道的朋友，基本都是取四个值的平均值，每一步加一个随机数。我将如何测试结果？我应该使用已知种子并手动计算平均值加上随机值，还是什么？相反，我应该使用随机数计算代码中的结果吗？还是有其他方法？此外，非常感谢您对反向过程（又名 TDD，在代码之前编写测试）的一些想法）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T22:56:50.100

您可以使用模拟框架来模拟您的随机数生成。这样您就可以从结果中消除随机性，并且能够使用一组静态的预定义测试用例来测试您的代码。

在所有情况下，您都不是在测试随机数的生成，而是在测试您正在进行的计算。如果你有错误，你真的需要知道用于重现错误的随机数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:09:12.677

只需为某个迭代选择一个种子和一个数字（也就是在实际使用其中的值之前调用该 PRNG 多少次），然后在主代码和单元测试中使用这些相同的数据（种子和迭代）。这些数据可以在一个配置文件中，主代码和单元测试都可以访问该文件。

# c++ - const 引用模板参数中的函数？

> ID：12877267
> 
> 赞同：1
> 
> 时间：2012-10-13T21:41:58.513
> 
> 标签：c++, function, templates, reference, constants

如何声明我想要一个 const 函数引用（在模板参数中）？例如，

```
template< bool (&func)(int arg) >
void foo(int stuff); 
```

但是常量？

更具体地说，如果我尝试编译以下内容`icpc`：

```
template<bool (&func)(int arg)>
bool id(int arg) {
  return func(arg);
}

class Foo {
 public:
  Foo() {};
  virtual ~Foo() {};
  bool bar(int arg) { return true; }
  bool bar2(int arg) {
    return id<bar>(arg);
  };
};

int main() {
  return 0;
} 
```

我明白了

```
$ icpc foo.cpp
foo.cpp(12): error: no instance of function template "id" matches the argument list
            argument types are: (int)
      return id<bar>(arg);
             ^
compilation aborted for foo.cpp (code 2) 
```

或者，`g++`我得到

```
$ g++ foo.cpp
foo.cpp: In member function ‘bool Foo::bar2(int)’:
foo.cpp:13:23: error: no matching function for call to ‘id(int&)’
     return id<bar>(arg);
                       ^
foo.cpp:13:23: note: candidate is:
foo.cpp:2:6: note: template<bool (& func)(int)> bool id(int)
 bool id(int arg) {
      ^
foo.cpp:2:6: note:   template argument deduction/substitution failed:
foo.cpp:13:23: error: could not convert template argument ‘Foo::bar’ to ‘bool (&)(int)’
     return id<bar>(arg);
                       ^ 
```

但是，如果我将 bar 移到顶层，如

```
template<bool (&func)(int arg)>
bool id(int arg) {
  return func(arg);
}

bool bar(int arg) { return true; }

class Foo {
 public:
  Foo() {};
  virtual ~Foo() {};
  bool bar2(int arg) {
    return id<bar>(arg);
  };
};

int main() {
  return 0;
} 
```

它编译得很好。为什么会发生这种情况，如何在不将 bar 设为全局的情况下修复它？

注意：在我的原始代码中，我收到“（非 const-qualified）无法使用类型值初始化”错误：（使用`icpc`）

```
CollisionWorld.cpp(73): error: a reference of type "bool (&)(const Line &, vec_dimension={double}, vec_dimension={double}, vec_dimension={double}, vec_dimension={double})" (not const-qualified) cannot be initialized with a value of type "bool (const Line &, vec_dimension={double}, vec_dimension={double}, vec_dimension={double}, vec_dimension={double})"
    QuadTree<Line, vec_dimension, line_inside_box_with_time> *quad_tree =
                                  ^ 
```

（与`g++`）

```
CollisionWorld.cpp:73:58: error: could not convert template argument ‘CollisionWorld::line_inside_box_with_time’ to ‘bool (&)(const Line&, double, double, double, double)’
   QuadTree<Line, vec_dimension, line_inside_box_with_time> *quad_tree =
                                                          ^ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:44:31.193

问题是模板需要一个自由函数，而不是成员函数。这就是为什么当你把 bar() 放在 Foo 之外时它起作用的原因，

试试这样：

```
template<typename C, bool (C::*func)(int arg)>
bool id(C *mthis, int arg) {
  return (mthis->*func)(arg);
}

class Foo {
 public:
  Foo() {};
  virtual ~Foo() {};
  bool bar(int arg) { return true; }
  bool bar2(int arg) {
    return id<Foo, &Foo::bar>(this, arg);
  };
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:54:48.310

要调用成员函数，您需要两件事：`this`指针和函数。因此，它不可能像你写的那么容易。`id`需要`this`指针！

模板定义如下所示：

```
template<bool (Foo::*func)(int)> 
```

但是，您仍然无法实现`id`既适用于函数又适用于成员函数的真正函数。

# android - 动态壁纸：IllegalArgumenException on unlockCanvasAndPost 在横向打开时

> ID：12877269
> 
> 赞同：0
> 
> 时间：2012-10-13T21:41:59.507
> 
> 标签：android, canvas, live-wallpaper, illegalargumentexception

我正在开发动态壁纸，但我遇到了一个困扰我一段时间的问题。我的动态壁纸在变成横向然后连续几次回到纵向时崩溃。LogCat 显示以下错误：

> 致命异常：在 com.android.internal.view.BaseSurfaceHolder.unlockCanvasAndPost(BaseSurfaceHolder.java:215) 在 livewallpaper.LiveWallpaper$CatWallEngine.draw( LiveWallpaper.java:167)....

这是代码：

```
 public void draw() {
        SurfaceHolder holder = getSurfaceHolder();
        Canvas c = null;
        paint = new Paint();
        try {
            c = holder.lockCanvas();
            if (c != null ) {
                //drawing code goes here
            }

        } finally {
            if (c != null) {
                holder.unlockCanvasAndPost(c);
            }
        }

        mHandler.removeCallbacks(mUpdateDisplay);
        if (mVisible) {
            mHandler.postDelayed(mUpdateDisplay, 50);
        } 
```

第 167 行是 holder.unlockCanvasAndPost(c); 线。我在其他地方读到过，试图解锁未锁定的画布可能会导致此错误，但我已经检查过了，这不是问题：每次尝试解锁之前，画布都会被锁定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:17:05.067

在我的“finally”块中添加 try/catch 块后，动态壁纸停止崩溃。我的'finally'块现在看起来像这样：

```
 try {
                if (c != null) {
                    holder.unlockCanvasAndPost(c);
                }

            } catch (IllegalArgumentException exception) {
                exception.printStackTrace();
            } 
```

# eclipse - 如何从 ant build.xml 引用 Eclipse jar 变量？

> ID：12877274
> 
> 赞同：0
> 
> 时间：2012-10-13T21:42:30.887
> 
> 标签：eclipse, ant, environment-variables

我有一个依赖于外部 jar 的项目的 ant 构建脚本。外部 jar 的位置在 Eclipse 中作为变量可用（例如，`JJ2000_LIB`通过项目属性 > Java 构建路径 > 库中的“添加变量”添加）。 ![我说的是像这样的变量](../Images/113f21951937913e3f703b414cbee614.png) 如何从 ant 访问此类 Eclipse 库变量？

理想情况下，我还希望能够从命令行运行相同的 ant 脚本并能够设置此变量。

我已经尝试过`env.JJ2000_LIB`在命令行中工作（如果我设置了环境变量），但不是在 Eclipse 中工作。我的`build.xml`包含：

```
<property environment="env" />
<property name="jj2000_lib" value="${env.JJ2000_LIB}" />

<target>
    <javac srcdir="${src}" classpath="${jj2000_lib}" destdir="${build}" />
</target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:51:40.120

基本上，如果您想将 jar 添加到您的项目中，您需要：用鼠标右键单击“添加到构建路径”（几乎与您所做的相同）。

然后在构建中你必须放这样的东西：

```
<property name="External" value="youJar.jar" />
<jar destfile="${jar.completePath}" manifest="${basedir}/manifest">
<fileset dir="${path}/classes" excludes="**/*.bak" />
<zipfileset src="${path}/${Eternal}" />
</jar> 
```

显然你需要设置正确的路径。这个对我有用。

编辑：在清单中你应该这样写一行：Class-path: youJar.jar

编辑：

classhpath 变量（您定义的那个）似乎与 ant 不兼容并且可以在 ant 中使用（我在 eclipse 开发者论坛中发现了一些错误帖子，但没有人修复）。所以似乎没有办法使用类路径变量。我尝试了几个小时为您找到解决方案，现在我能为您做的最好的事情就是链接此站点：

[http://www.ant4eclipse.org](http://www.ant4eclipse.org)

也许这就是解决方案。

# ruby-on-rails - 捆绑安装重复错误

> ID：12877276
> 
> 赞同：0
> 
> 时间：2012-10-13T21:42:36.747
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, bundler

我的系统有问题，所以我卸载了旧的 ruby​​ 目录，现在正尝试重新安装。我下载并安装了最新的 ruby​​ 版本。

但是，当我尝试运行 Rails 服务器时，它说我需要安装一些 gem。所以我运行了捆绑安装，结果发现它也被卸载了。

所以我做了 gem install bundler，但是现在，每当我运行 bundle install 时，它都不起作用。我不断收到此错误的某些版本：

```
Gem::RemoteFetcher::FetchError: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed ...
An error occurred while installing ThisGem ('0.3.4'), and Bundler cannot continue. 
Make sure that "gem install ThisGem '0.3.4' " succeeds before bundling. 
```

“gem install”命令每次都有效，但是当我安装一个gem时，它只会在下一个时出错，必须手动安装，这会破坏Bundler的意义。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T09:51:50.283

在您的 Gemfile 中手动包含 gem "ThisGem '0.3.4'" 并尝试运行：

捆绑安装--本地

# mercurial - Pycharm 水银推送

> ID：12877277
> 
> 赞同：0
> 
> 时间：2012-10-13T21:42:52.680
> 
> 标签：mercurial, pycharm

为什么当我选择“Mercurial -> Push Changesets”或提交并推送它时会提交更改但不推送？如果我然后通过命令提示符在项目目录中“hg push”所有更改都会很好地推送。

> Pycharm 中的输出不会包含任何错误和内容：
> 
> hg.exe commit --logfile C:\Users\=====.PyCharm20\system.hg4idea-commit.tmp core\views.py reviewer\settings.py README core\distribute_email.py reviewer\ldap_settings.py reviewer\ settings_ldap.py core\utils.py reviewer\settings_mail.py core\ldap_client.py 没有找到用户名，使用'=====@homey'代替
> 
> hg.exe 分支

就这样。它曾经执行推送并显示它的典型消息 - 并且现在已经相当 - 有没有办法让它恢复工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:56:59.847

我建议您向 PyCharm 公共跟踪器发送一个错误：http: [//youtrack.jetbrains.com/](http://youtrack.jetbrains.com/)

在那里提供所有详细信息，特别是附上日志（帮助 -> 显示登录 ...）。

# ios - 显示/隐藏按钮时应用程序崩溃

> ID：12877281
> 
> 赞同：0
> 
> 时间：2012-10-13T21:44:40.320
> 
> 标签：ios, crash, uigesturerecognizer, show-hide

我实现了一种基本类型的图片库（非常类似于 iPhone 上的照片应用程序），并且我有一个按钮，按下时会返回。好吧，它有效，但仅在少数情况下有效。图片库基本上是一个 UIPageControl，它有一层 UIScrollView，顶部是 UIImageView。它可以在页面之间传递（因此，在图像之间）。但是该按钮仅在第一页上显示和访问。我使用手势（在本例中为点击）来显示按钮。这个按钮只有在我不移出第一页的情况下才能正常工作，如果我转到第二页然后回到第一页，当我点击屏幕显示按钮时应用程序崩溃，这有点复杂解释那。这是我用来显示按钮的代码：

```
//.h

@interface ImatgesNouViewController : UIViewController <UIScrollViewDelegate, UIGestureRecognizerDelegate> {
UIScrollView *bgScorllView;        
UIView *bgView;                           
UIImageView *picImageView;      
UIScrollView *picScrollView;   
UIImageView *preImageView;   
UIImageView *nextImageView;
}

//.m
-(void)viewDidLoad{
[super viewDidLoad];
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didTap:)];
tapGesture.numberOfTapsRequired = 1;
[tapGesture setDelegate:self];
[self.view addGestureRecognizer:tapGesture];
} 
```

然后为图片库加载不同的东西。

```
-(void) didTap:(id) sender{

if (boto.hidden == YES){

    [picImageView addSubview:boto];

    boto.hidden = NO;
    NSLog(@"apareix");
} else {

    [picImageView addSubview:boto];

    boto.hidden = YES;
    NSLog(@"desapareix");
}

} 
```

**我将代码更新为 void 操作，现在我有了更多关于问题的详细信息。使用旧代码，该按钮仅显示在图片库的第一页上。现在它可以显示在图片库的每一页上。现在我知道什么时候崩溃了：如果我点击屏幕以显示按钮并再次点击以隐藏它，它会根据我的需要运行多次。但是，如果这样做之后我想转到其他页面，那么它就会崩溃。我希望有了这些信息，问题会尽快得到解决。**

崩溃日志：终止应用程序由于未捕获的异常'NSInternalInconsistencyException'，原因是： '（空）' ***第一掷调用堆栈：（0x19b6012 0x1448e7e 0x19b5e78 0xedef35 0xff93a2 0x3d5c4f 0x3e7748 0x3e7c9d 0x3ee5ec 0x3f20e7 0x65a89a 0x6599db 0x65b11f 0x65dd6d 0x65dcec 0x655a68 0x3c2fc2 0x3c34a3 0x3a13aa 0x392cf8 0x1800df9 0x1800ad0 0x192bbf5 0x192b962 0x195cbb6 0x195bf44 0x195be1b 0x17ff7e3 0x17ff668 0x39065c 0x1ee8c 0x2395 0x1）libc++abi.dylib：终止调用抛出异常（lldb）

（很抱歉这么晚才发布崩溃日志）

我不知道到底发生了什么以及这次崩溃的原因。可能是在图像之间滑动的手势识别导致了这个崩溃（结合点击手势）。感谢您在高级的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:45:20.557

试试这个...

将 action:@selector(didTap) 更改为 action:@selector(didTap:)

和

将 -(void) didTap{ 更改为 -(void) didTap: (id)sender{

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:12:52.340

我找到了我的问题的答案。稍微想了想，我看到按钮之前的顶部有几个对象。因此，我必须将按钮放在顶部，但是通过向视图添加子视图（与其他对象一样）更容易做到。有了这个，按钮总是停留在顶部，然后，通过点击手势和 void 命令，我将其隐藏从是更改为否。这是代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];    
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(didTap:)];
tapGesture.numberOfTapsRequired = 1;
[tapGesture setDelegate:self];
[self.view addGestureRecognizer:tapGesture];
[self.view addSubview:boto];
[boto setHidden:YES];     }

-(void) didTap:(id) sender
{
if (boto.hidden == YES){
          [self.view addSubview:boto];
    boto.hidden = NO;
    NSLog(@"apareix");

} else {
    [boto removeFromSuperview];
    boto.hidden = YES;
    NSLog(@"desapareix");
    [self.view addSubview:boto];
}
} 
```

感谢每一位帮助我的人，在你们所有人的帮助下，我能够开始做这件看似简单的事情。

# jquery - 当它在 Flash 或 jquery 谷歌地图上滚动时，文本的字体粗细在固定 div 中发生变化，为什么以及如何处理它？

> ID：12877292
> 
> 赞同：5
> 
> 时间：2012-10-13T21:46:54.500
> 
> 标签：jquery, html, css, flash, fonts

前段时间我做了一个固定的 div 作为页面的导航菜单。我注意到当滚动到 vimeo flash 电影时，文本的字体粗细减少了。

现在我在另一个导航菜单中再次看到它，但这次是在滚动 jquery 谷歌地图时：http: [//jorenfrielink.com/beta/](http://jorenfrielink.com/beta/)

如您所见，菜单按钮的字体粗细在覆盖地图时会减小。到目前为止，我已经在 chrome 和 safari 中注意到了这一点。

这是一个常见问题吗？如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T22:33:54.627

某些原因导致您的字体平滑发生变化，诸如 css3 动画或变换之类的事情可能会导致这种情况。尝试将此添加到您的导航文本中：

```
-webkit-font-smoothing: subpixel-antialiased; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T02:59:38.600

正如 Joren 所说：-webkit-font-smoothing: antialiased;

这适用于 Chrome + Safari

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T22:09:48.560

试试这个修复：

`opacity: 99;`

文字上。

如果这解决了它，那么您的问题源于 OSX 呈现字体的方式。它针对浅色背景上的深色文本进行了优化，因此当您反转它时会出现奇怪的粗体效果。这种不透明技巧是一种解决方法，可以使其以标准方式显示，即使它是明暗的。

# .htaccess - mod_rewrite 禁用旧链接

> ID：12877296
> 
> 赞同：1
> 
> 时间：2012-10-13T21:47:49.543
> 
> 标签：.htaccess, mod-rewrite

我的public_html中有一个文件夹“journals”。所以我的链接是这样的：

`site/journals/index.php/journal1`, `site/journals/index.php/journal2`etc.(journal1,journal2 只是插图。可能是技术、艺术等)

我有（在乔恩的帮助下）.htaccess 正在`site/journals/index.php/journal1`显示为.htaccess `site/index.php/journal1`。

但我仍然可以访问/查看- `site/journals/index.php/journal1`。

我想禁用`site/journals/index.php/journal1`并且只`site/index.php/journal1`应该是可见的。请让我知道我该怎么做。

请检查[此](https://stackoverflow.com/questions/12862809/mod-rewrite-remove-folder-name-from-url)以获取更多信息。

这是根（/）文件夹中现有的 .htaccess

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/sunder
RewriteRule ^index\.php(.*)$ /sunder/index.php$1? [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T03:42:43.443

> 我想禁用 site/journals/index.php/journal1 并且只有 site/index.php/journal1 应该是可见的。请让我知道我该怎么做。

由于您想禁用对旧 URL 的访问（同时仍在内部重写它们），您需要匹配实际请求而不仅仅是 URI。如果您匹配 URI 并执行重定向，重定向将在内部被重写，这将匹配另一个规则并再次重定向，导致您的浏览器抱怨页面未正确重定向。

尝试在您已经拥有的规则（在您的问题中）***下添加这些规则：`RewriteEngine On`***

```
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD)\ /sunder/([^\ ]+)
RewriteRule ^ /%2 [L,R=301] 
```

这仅适用于实际请求以开头的`/sunder/`内容并将浏览器重定向到已删除的 URL 的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:05:48.840

约翰给你的规则是不正确的。让我们来看看：

您需要的是一个规则来重写 URL，比如`example.com/index.php/journal1`指向`/journals/index.php/journal1`. 因此，您必须注意不要过度匹配和重写。

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteRule ^journals/(.*)$ http://example.com/$1 [R=301,L]

    RewriteRule ^index\.php/(.*)$ /journals/index.php/$1 [L]
</IfModule> 
```

重写 URL 的示例：

```
example.com/index.php/journal2 => /home/bane/htdocs/journals/index.php/journal2

example.com/index.php/foo/bar  => /home/bane/htdocs/journals/index.php/foo/bar 
```

# sql - SQL Native Client 10 性能惨淡（由于服务器端游标）

> ID：12877300
> 
> 赞同：7
> 
> 时间：2012-10-13T21:48:42.393
> 
> 标签：sql, sql-server, performance, client, native

我们有一个通过 MFC (VS2010) 中的 CDatabase/CRecordset 使用 ODBC 的应用程序。我们实现了两个后端。MSSQL 和 MySQL。

现在，当我们使用 MSSQL（使用 Native Client 10.0）时，通过慢速链接（例如 VPN）使用 SELECT 检索记录非常慢。MySQL ODBC 驱动程序不会表现出这种讨厌的行为。

例如：

```
CRecordset r(&m_db);
r.Open(CRecordset::snapshot, L"SELECT a.something, b.sthelse FROM TableA AS a LEFT JOIN TableB AS b ON a.ID=b.Ref");
r.MoveFirst();
while(!r.IsEOF())
{
    // Retrieve
    CString strData;
    crs.GetFieldValue(L"a.something", strData);
    crs.MoveNext();
} 
```

现在，有了 MySQL 驱动程序，一切都可以正常运行了。查询返回，一切都快如闪电。但是，对于 MSSQL Native Client，事情会变慢，因为在每个 MoveNext() 上，驱动程序都会与服务器通信。

我认为这是由于服务器端游标，但我没有找到禁用它们的方法。我试过使用：

```
::SQLSetConnectAttr(m_db.m_hdbc, SQL_ATTR_ODBC_CURSORS, SQL_CUR_USE_ODBC, SQL_IS_INTEGER); 
```

但这也无济于事。SQL Profiler 中仍然有 sp_cursorfetch() 等的长期运行的 exec。我还尝试了一个带有 SQLAPI 和批量提取的小型参考项目，但它也在 FetchNext() 中挂起很长时间（即使结果集中只有一条记录）。然而，这只发生在使用 LEFT JOINS、表值函数等 的查询上。*请注意，查询不会花费那么长时间*- 通过 SQL Studio 在相同的连接上执行相同的 SQL 会在合理的时间内返回。

**问题1：是否有可能以某种方式让本机客户端访问~~在本地“缓存”所有结果~~以与 MySQL 驱动程序类似的方式使用本地游标？**

也许这完全是错误的方法，但我不知道该怎么做。

我们想要的只是一次从 SELECT 中检索所有数据，然后在下一次查询之前不再与服务器通信。我们不关心记录集更新、删除等或任何废话。我们只想检索数据。我们获取该记录集，获取所有数据，然后将其删除。

**问题 2：有没有更有效的方法来使用 ODBC 在 MFC 中检索数据？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T20:57:11.890

我对这个问题做了更多的修改，发现了这两个链接：

[MSDN 链接](http://msdn.microsoft.com/en-us/library/ms130807%28v=sql.105%29.aspx)

[MSDN 博客](http://blogs.msdn.com/b/mssqlisv/archive/2006/03/24/560386.aspx)

在第一个链接中，它描述了 Native Client 10 仅在更改默认选项时才使用服务器端游标：

> 在执行 SQL 语句时将这些选项设置为默认值时，SQL Server Native Client ODBC 驱动程序不使用服务器游标来实现结果集；相反，它使用默认结果集。

链接 2 是一个博客，它是一个 SQL Dev 博客，上面写着：

> 事实证明，开发人员并没有明确要求服务器光标。但是当他阻止提取时，作为一个副作用，SQL Server ODBC 驱动程序要求一个服务器游标......这是出乎意料的！

是的，这当然是出乎意料的……

> 如何通过默认结果集（消防水带光标）而不是服务器光标进行块提取？

现在，解决方案的实现是这样的：

代替：

```
// crs is a CRecordSet
crs.Open(CRecordset::snapshot, L"SELECT something..."); 
```

做这个：

```
// crs is a CRecordSet
crs.Open(CRecordset::forwardOnly, L"SELECT something..."); 
```

这个简单的更改不会触发服务器端游标的创建，而是模仿 MySQL 驱动程序的行为。

缺点是现在您无法通过（Microsoft 推荐的）方式检索行数：

```
while(crs.MoveNext()) nCount++; 
```

无论如何，这是一个坏主意。此外， ::SQLGetRowCount() 将不再始终有效。

我已经解决了这样的问题（这应该适用于任何 ANSI 兼容的 SQL 源）：

```
//strQuery is the random query passed to CountRows()
std::wstringstream ssQuery;
ssQuery << L"SELECT COUNT(*) AS Count FROM (" << strQuery << L") AS t";
CRecordset crs(&m_Database);
crs.Open(CRecordset::forwardOnly, ssQuery.str().c_str());
// Now retrieve the only "Count" field from the recordset. 
```

我希望这对将来的其他人有所帮助。

# html - iframed 页面不会在 chrome 或 safari 中显示视频

> ID：12877301
> 
> 赞同：0
> 
> 时间：2012-10-13T21:48:44.317
> 
> 标签：html, iframe, browser, cross-domain

我有一个 iframe，其中包含来自不同域的页面。该页面上有一个视频。该视频将在 Firefox 中播放，即和歌剧，但不能在 chrome 或 safari 中播放。

有任何想法吗？

你可以在这里看到我的意思：http: [//myawesomelinks.com/Links](http://myawesomelinks.com/Links?id=2451) ?id=2451 如果你向下滚动大约一半，有一个视频可以在 Firefox 和 IE 中工作，但不能在 chrome 中工作。

Disqus评论也没有加载到chrome的底部，这也适用于firefox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:02:23.500

iframe 上的`sandbox="allow-forms allow-scripts"`参数破坏了框架站点上的功能。

# sql - 优先考虑表中的记录

> ID：12877303
> 
> 赞同：0
> 
> 时间：2012-10-13T21:48:50.427
> 
> 标签：sql, sql-server-2008

我有一个表，其中包含 id 和语句列，语句列包含诸如插入表名、更新表名、删除表名（表名可能是任何 xxx）之类的语句，如果我运行 SP，我有一个需要编写存储过程的场景它应该首先使用父表名获取语句列中的插入记录，然后是子表插入到语句中，插入后更新语句应该以任何方式出现，最后是删除语句，首先是子表语句，然后是父表。

输出应该像

```
statements
INSERT INTO country(parent to state)
INSERT INTO state(parent to city)
INSERT INTO city(parent to zipcode)
INSERT INTO zipcode 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:05:30.750

嗨，要完成您的程序，您必须再保留 1 列，如 seqno int 并使用父子级别更新 seqno。从语句列中读取表名并从 sql server 中找到父子级别将非常困难，所以我假设您在该表中有 seqno 然后您可以编写 proc 如下

```
 DECLARE @table table (statements varchar(200),id int,seqno int)
INSERT INTO @table 
values('INSERT INTO country(parent to state)',1,1),
 ('INSERT INTO state(parent to city)',2,2),
 ('INSERT INTO city(parent to zipcode)' ,3,3),
 ('INSERT INTO zipcode' ,4,4),
 ('update  city(parent to zipcode)' ,4,3),
 ('delete FROM country' ,7,1),
 ('delete FROM zipcode' ,6,4)
--- you can change below code to proc  u can write case statements if u want only inset or delete like that
DECLARE @outtable table(statements varchar(200),seqno int,id int iDENTITY(1,1))
INSERT INTO @outtable
SELECT  statements,seqno FROM @table WHERE statements like '%insert%' ORDER BY seqno   ASC
INSERT INTO @outtable
SELECT  statements,seqno FROM @table WHERE statements like '%update%' ORDER BY seqno ASC
INSERT INTO @outtable
SELECT  statements,seqno FROM @table WHERE statements like '%delete%' ORDER BY seqno     DESC
SELECT   * FROM @outtable order by id asc 
```

# r - R删除pheatmap的边界

> ID：12877306
> 
> 赞同：3
> 
> 时间：2012-10-13T21:48:58.287
> 
> 标签：r, heatmap

我发现[pheatmap (pretty heatmap)](http://cran.r-project.org/web/packages/pheatmap/index.html)包是一种非常好的和简单的生成热图的方法。除了普通`heatmap()`命令外，它还会生成一个颜色条，表示每种颜色后面的数量，并且也没有不需要的细节`heatmap.2`。

行和列之间有一个细边框。行数少时没问题，但行数较多时，这些边框会使热图不太好。有什么解决方案可以删除它们吗？

根据手册，`border_color=NA`应该删除它，但是当我从输出创建 PDF 文件时，行和列之间仍然存在细边框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T22:35:24.267

似乎边框是 Mac Preview 和 Adob​​e Reader 等 PDF 查看器程序的问题。当热图转换为 TIFF 或 PNG 等图片格式时，它们会被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-14T18:27:54.473

我有同样的问题; PDF 中的灰色边框线，但 TIFF 或 PNG 中没有。但我发现您可以在 Adob​​e Illustrator 中轻松移除边框线。

# user-interface - 绘制图像时显示背景色带，因为它未被覆盖

> ID：12877307
> 
> 赞同：1
> 
> 时间：2012-10-13T21:49:00.750
> 
> 标签：user-interface, graphics, wxwidgets

我有一个显示图像的 wxWidgets C++ 应用程序。当图像被另一个窗口遮挡时，我非常缓慢地拖动另一个窗口以打开图像，图像经常显示没有被绘制的背景颜色带。

图像在位图中，并在滚动窗格中呈现。OnPaint 函数尽可能简单。无论我使用 true 还是 false 作为 DrawBitmap 的最后一个参数（“use_mask”），行为都是相同的。

```
void OnPaint(wxPaintEvent &) {
    wxPaintDC dc(this);
    PrepareDC(dc);
    dc.DrawBitmap(bitmap, 0,0, false);
} 
```

我尝试使用 wxBufferedPaintDC。问题依然存在。我能做些什么呢？

在下图中，我刚刚将 Firefox 窗口缓慢拖到右侧，显示了我的应用程序的图片。

![竖条纹是假的](../Images/47eca3f6389786d9f4e4d89821fa1840.png)

我正在 Windows 7 服务包 1 上对此进行测试。AMD A6-3620 APU 与 Radeon(tm) HD Graphics 2.2 GHz。VC++ 2012。wxWidgets 2.9.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T04:39:16.767

这是版本 2.9.4 中的错误。它在之前的稳定版本 2.8.12 中不存在。它似乎只影响滚动的窗口。

目前最好的解决方案可能是使用 build 2.8.12。如果这不切实际，您可以通过使用 wxClientDC 绘制整个图像来解决此问题。最好只是偶尔这样做。我想出了一个启发式方法来确定何时可能错过了一条条纹。它基于保持更新区域的最新历史。它会出现误报，但不会导致闪烁，至少在我的机器上是这样。

当我知道更多时，我会发布更多。

更新 Eric Jensen 报告说另一种解决方法是重写 OnDraw 方法来进行绘画，并且根本不使用 on-paint 处理程序。

更新问题在使用 Windows Aero 主题时不会出现。

已修复 - [http://trac.wxwidgets.org/ticket/14757](http://trac.wxwidgets.org/ticket/14757)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:12:34.420

禁用擦除背景事件。当 wxWidgets 想要更新显示时，它会发出两个事件：一个擦除背景事件和一个绘制事件。您必须为擦除背景事件实现一个空方法（换句话说：拦截 EVT_ERASE_BACKGROUND 事件并且不要调用 event.Skip()）。

由于您的位图覆盖了整个面板，因此您无需擦除背景。

使用 wxClientDC 的原因是因为“在 EVT_PAINT() 处理程序中使用 wxPaintDC 会自动将剪切区域设置为窗口的损坏区域。不会出现在该区域之外绘制的尝试。”

由于剪切区域存在问题，因此忽略剪切区域“解决”了问题。

这在 wxPaintDC 和 wxClientDC 类参考文档的详细描述部分中有介绍。

* * *

这是一个“更好”答案的草图。这比您的计时器和重绘所有解决方案要复杂得多，但从某种意义上说，它更节省系统资源，因此您的应用程序将变得更具响应性。

需要两件事。

1.  显示位图的更快方法

2.  仅重绘位图的损坏区域。

（注意：在 wxPaintDC 上使用 DrawBitmap 实际上是处理整个位图，然后对输出进行裁剪）

为了加快位图部分的显示速度，您需要将位图绘制到内存 DC 中，并将其放在方便的地方（此解决方案不节省内存，但这通常不是现代计算机的问题），以便您可以将所需的部分粘贴到 wxPaintDC 中。

```
wxMemoryDC memdc;
memdc.SelectObject(bitmap);
dc.Blit( ... 
```

这是 Blit 参数的描述[http://docs.wxwidgets.org/2.8/wx_wxdc.html#wxdcblit](http://docs.wxwidgets.org/2.8/wx_wxdc.html#wxdcblit)

要仅处理损坏的区域，您需要调用 GetUpdateRegion 并使用区域迭代器通过 reutun 工作。我看到您正在使用滚动面板，因此您必须允许这样做，因为更新区域是根据窗口中的客户区域，而不是您的 bitmap 中的逻辑区域。

```
 wxRegionIterator upd(GetUpdateRegion());
 while ( upd )
 {  wxRect rect(upd,GetRect());
    // calculate damaged rectangle in terms of your complete bitmap
    ...
    // blit the calculated rectangle from bitmap in memoryDC to damaged recatngle in wxPaintDC
    ...

    upd++;
 { 
```

# xcode - 如何接收 UINavigationBar 取消或完成按钮的消息？

> ID：12877308
> 
> 赞同：0
> 
> 时间：2012-10-13T21:49:08.130
> 
> 标签：xcode, interface-builder, uinavigationbar, uibarbuttonitem, uistoryboard

我可以在 Interface Builder 中向 UINavigationBar 添加一个取消或完成按钮。但是如何将这些连接到操作方法，以便我可以关闭模​​式视图控制器或保存输入然后关闭它？

连接面板不显示 UIBarButtonItem 的任何操作方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:55:32.580

我会在代码中，在 viewDidLoad 或 awakeFromNib 方法中执行此操作。首先，您需要创建按钮，并添加一个在按下按钮时要调用的方法。

```
- (void)viewDidLoad {

    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneButtonPressed:)];

    [self.navigationItem setLeftBarButtonItem:doneButton animated:NO];

    [super viewDidLoad];
}

- (void)doneButtonPressed:(id)sender{
    //TODO
} 
```

*   或者

或者，在 IB 中，创建您的 IBAction 方法，

```
- (IBAction)doneButtonPressed:(id)sender {

} 
```

并在您的 Class.h 中声明它，

```
- (IBAction)doneButtonPressed:(id)sender; 
```

然后在 IB 中，右键单击按钮并从“选择器”拖动到文件的所有者（视图控制器）并选择 doneButtonPressed: 方法。

# java - Java - 当我在输入中不输入任何内容时，我会收到红色错误

> ID：12877310
> 
> 赞同：0
> 
> 时间：2012-10-13T21:49:15.613
> 
> 标签：java, tags

我的程序完全按照我希望的方式运行，但是当我将问题留空或单击确定时，我的输出中所有这些错误都显示为红色。我想知道如何解决这个问题，所以当我什么都不输入时，我应该得到 null 或空字符串。我相信我已经搞砸了以下程序，但我需要这些数据才能使我的程序正常工作。我是否缺少一些东西来确保我可以获得 null 或空字符串。

谢谢！

```
input = JOptionPane.showInputDialog(null, "Ask any question (Remember to type the ?):");
i = input.length() - 1;
lastletter = input.charAt(i); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T21:54:08.887

当没有输入任何内容时，`input.length()`返回`0`。然后您获取`0-1`并获取`i`包含`-1`. 然后你试图`-1`在空输入中获取索引上的字符。在检索最后一个字母之前，您必须检查是否`input.length()`等于。`0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T21:54:44.990

当你什么都不输入时，`input`变成`""`. 结果，`input.length() - 1`计算结果为`-1`，表示您正在调用`input.charAt(-1)`。这会导致 a`StringIndexOutOfBoundsException`被抛出，产生你的“红色错误”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T22:01:55.847

字符串`chatAt(index)`返回指定索引处的任何字符，其中索引的范围可以是 0 到字符串的长度减去 1 即。`string.lenght()-1`并且必须是积极的。超出此范围的任何索引都会给您 `IndexOutOfBoundsException 。

所以在你的特殊情况下，

```
i = input.length() - 1;
lastletter = input.charAt(i); 
```

当您什么都不输入时， input.length() 返回 0 ，因此 i 变为 -1。由于 java 规范说 charAt() 的有效范围是从 0 到 input.length()-1 其中 input.length()-1 必须是正数，因此您的代码会抛出 `IndexOutOfBoundsException`

您可以通过检查索引“i”是否为负数来避免它：

```
i = input.length() - 1;
if (!i<0){
   lastletter = input.charAt(i);
} 
```

有关详细信息，请参阅[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt(int)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt(int))。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T22:03:33.227

线

```
JOptionPane.showInputDialog(null, "Ask any question (Remember to type the ?):"); 
```

如果用户在没有输入任何文本的情况下单击确定，将返回一个空字符串 ("")。此字符串的长度为零，尝试访问索引 -1 处的字符将引发 indexOutOfBoundsException。这可以通过检查输入的长度轻松解决。但在你这样做之前，你需要检查输入是否等于 null，因为如果用户按下取消或右上角的“x”，这将返回。所以你需要的检查是：

```
if (input != null && input.length()  > 0){
   lastletter = input.charAt(input.length - 1);
} 
```

# bash - 浏览许多文件的许多路径

> ID：12877311
> 
> 赞同：2
> 
> 时间：2012-10-13T21:49:17.547
> 
> 标签：bash, mapping

我目前正在编写一个小型 bash 脚本，该脚本读取源 C 文件，然后找到相应的包含文件。

现在我必须在两种查找映射 M 的模型之间进行选择：文件名 -> {包含文件路径}。我有两个数组 - 一个包含找到的包含文件名，另一个包含可能的路径。选项是：

a) 在一个路径中查找每个文件，然后继续到另一个路径；

b) 查看路径列表以找到一个文件，然后继续查找另一个文件。

我的问题是 - 什么会更快？每个选项的迭代次数相同，但也许某些命令更耗时？我个人更喜欢选项a）。

感谢您的帮助，如果这是一个愚蠢的问题，我们深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:02:48.753

你应该做什么取决于你的目标，我不太明白。`make`如果您正在创建文件，您可能应该使用 makedepend，如前面的答案中所述。

相反，如果您想了解系统上是否有多个版本的头文件，请考虑使用该`locate`命令。例如，在我的 ubuntu 12.04 linux 系统上，以下命令大约需要一秒钟才能完成，并产生命令下方所示的输出。

```
 $ locate stdio.h | grep usr/include
  /usr/include/stdio.h
  /usr/include/c++/4.6/tr1/stdio.h
  /usr/include/glib-2.0/glib/gstdio.h
  /usr/include/sharutils/stdio.h
  /usr/include/x86_64-linux-gnu/bits/stdio.h 
```

如果您在文件 pqr 的单独行上有一个库路径列表，并且在文件 xyz 中有一个头文件列表，则可以使用类似的命令

```
 locate / | grep -f xyz | grep -f pqr 
```

（注意，如果您愿意，`-F`可以与`-f``stdio.h``stdlib.h``xyz``/usr/include/``/usr/lib/``pqr`

```
 /usr/include/stdio.h
  /usr/include/stdlib.h
  /usr/include/c++/4.6/tr1/stdio.h
  /usr/include/c++/4.6/tr1/stdlib.h
  /usr/include/freetype2/freetype/config/ftstdlib.h
  /usr/include/glib-2.0/glib/gstdio.h
  /usr/include/sharutils/stdio.h
  /usr/include/sharutils/stdlib.h
  /usr/include/x86_64-linux-gnu/bits/stdio.h
  /usr/include/x86_64-linux-gnu/bits/stdlib.h
  /usr/lib/perl/5.14.2/CORE/nostdio.h
  /usr/lib/syslinux/com32/include/stdio.h
  /usr/lib/syslinux/com32/include/stdlib.h 
```

注意，在典型的 linux 系统上，文件名数据库每天更新一次。在查找系统头文件时，这可能不会成为问题。对于更短暂的文件，您可能需要`sudo updatedb`在使用之前说一下`locate`，这会使总时间增加几秒钟到几分钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:16:28.033

仅当您编码错误时才会有相同数量的迭代，`continue`一旦找到匹配项就不要使用关键字（不要忘记它也可以将数字作为参数来影响外部循环）。

我将遍历所有包含文件并按一些顺序查看路径 -`<system>`包含应该首先搜索系统包含路径以获得更快的结果，而包含也是如此`"local"`。在解析时丢弃这些信息是不明智的。

`find -type f`但是，我认为您可以通过在所有包含路径上运行并将结果存储在临时文件或变量中来做得更好。然后，您只需`grep`（或任何等价物）将其用于包含本身。这样可以节省一些 I/O，因为其中一半是一次性读取的，而且只读取一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T22:27:41.443

要查找您的包含文件，专用的解决方案是[makedepend](http://en.wikipedia.org/wiki/Makedepend)，尤其是在您使用 makefile 的情况下。

# assembly - 为什么二进制值与 NASM x86 中的十六进制表示不匹配？

> ID：12877312
> 
> 赞同：0
> 
> 时间：2012-10-13T21:49:17.547
> 
> 标签：assembly, binary, nasm

我试图在 GDB 中理解这一点，我看到以下内容：

```
(gdb) print/t $eax
$2 = 1000000001001010000000011010
(gdb) x/4xb $eax
0x804a01a <testinput>:  0x41    0x42    0x43    0x44 
```

这本质上是 ascii 值“ABCD”。我想一次获取一个字节的这些值，并尝试从获取 $al 中的第一个字节开始。但是 $al 包含 0x1a。

首先，二进制1000000001001010000000011010如何等于0x41 0x42 0x43 0x44？（我认为 0x41 等于 0100 0001 但我没有看到上面的模式） 其次，为什么 $al 包含 0x1a？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:57:45.313

你在看两个完全不同的东西。您的第一个命令输出`eax`寄存器的值。您的第二个命令输出内存中特定位置的值。没有理由以任何方式将一个等同于另一个。

正如`gdb`帮助所说：

> 检查内存： x/FMT **ADDRESS**。**ADDRESS 是要检查的内存地址**
> 的表达式。

 **至于你的最后一个问题，低字节`eax`是`00011010`. `0001`是`1`十六进制的。`1010`是`a`十六进制的。所以`0x1a`。**

# mysql - 在 MySQL 中使用 Perl 创建带变量的表时遇到问题

> ID：12877313
> 
> 赞同：0
> 
> 时间：2012-10-13T21:49:17.250
> 
> 标签：mysql, perl, ubuntu, syntax-error, create-table

我正在尝试根据用户输入在 MySQL 中创建一个表。理想情况下，Perl 脚本将连接到数据库并使用从用户接收到的变量创建一个表。这是我的脚本：

```
print "Please enter a name for the table: ";
$tableName = <>;
chomp($tableName);
&createTable ($tableName);

sub createTable
{
    use DBI;
    my $platform = "mysql";
    my $database = "example";
    my $host = "localhost";
    my $user = "user";
    my $pw = "pw";
    my $dsn = "dbi:$platform:$database:$host";
    my $dbh = DBI->connect($dsn, $user, $pw) or die "Unable to connect: $DBI::errstr\n";
    $dbh->do("DROP TABLE IF EXISTS $_");
    $dbh->do("CREATE TABLE $table (column VARCHAR(17))");
    $dbh->disconnect;
} 
```

但是当我执行脚本并输入一个值（比如说“测试”）时，它会脱口而出：

```
DBD::mysql::db do failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1 at /path/to/scripts/dbTest.pl line 28, <> line 2.
DBD::mysql::db do failed: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(column VARCHAR(17))' at line 1 at /path/to/scripts/dbTest.pl line 29, <> line 2. 
```

第 28 行是 DROP 命令，第 29 行是 CREATE 命令。我已经检查了很多次我的语法，但我似乎没有得到错误的位置。我是否忽略了如此简单的事情..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:53:30.770

试试看：

```
use warnings; use strict;
use DBI;
print "Please enter a name for the table: ";
$tableName = <>;
chomp($tableName);
createTable($tableName);

sub createTable {
    my $table = shift;

    my $platform = "mysql";
    my $database = "example";
    my $host = "localhost";
    my $user = "user";
    my $pw = "pw";
    my $dsn = "dbi:$platform:$database:$host";
    my $dbh = DBI->connect($dsn, $user, $pw)
        or die "Unable to connect: $DBI::errstr\n";
    $dbh->do("DROP TABLE IF EXISTS $table");
    $dbh->do("CREATE TABLE $table (column VARCHAR(17))"); 
    $dbh->disconnect;
} 
```

你不能`$_`在你的函数中这样使用。您必须改为处理`@_`（或`shift`像我一样使用）。看`perldoc perlsub`

# javascript - 获取自上传帖子以来的时间（小时，分钟）并在我的网页中显示结果

> ID：12877314
> 
> 赞同：-1
> 
> 时间：2012-10-13T21:49:21.837
> 
> 标签：javascript, html, time

我的网页中有一小部分使用定义列表来显示我不定期发布的一些帖子，我认为使用 Javascript 为每个帖子添加时间功能会是一件好事。

**HTML**

```
<dl>    
<dt>Display the time here</dt>
<dd></dd>
<div id="centrated">
<p>Blank Space</p>
</div>
</dl> 
```

时间应该基于“用户”而不是我的系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:56:51.350

我不确定您打算如何使用您在此处描述的内容检索帖子的日期/时间。但是，javascript 知道如何将 UTC 转换为浏览器的本地时间。

因此，如果您从字符串创建新日期：

```
var d = new Date("2012-10-13T09:40:34.764Z");
alert(d); 
```

它应该在当地时间为您显示。`'Z'`日期末尾的 表示它是 UTC 时间。如果您以这种方式定义日期，Javasript 知道如何使用它。只要确保您以 UTC 时间保存日期即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:10:18.747

也许你的意思是

```
var UTCPostedTimeInMs = 1350050604350;
var timeSince = (new Date) - UTCPostedTimeInMs,
    secs = ~~(timeSince / 1000),
    mins = ~~(secs / 60),
    hrs = ~~(mins / 60),
    days = ~~(hrs / 24);

console.log('It has been', days, 'days', hrs % 24, 'hours', mins % 60, 'mins and', secs % 60, 'seconds since', new Date(UTCPostedTimeInMs));
// It has been 1 days 8 hours 6 mins and 12 seconds since Fri Oct 12 2012 15:03:24 GMT+0100 (BST) 
```

* * *

**编辑**
要在 HTML 中显示，请给出要附加到*id*属性的元素

```
<dt id="post001Time">Display the time here</dt> 
```

然后在 JavaScript 中，但是你希望它格式化，例如

```
document.getElementById('post001Time').textContent = (hrs % 24) + ' hours and ' + (mins % 60) + ' ago.'; 
```

看到[**这个小提琴**](http://jsfiddle.net/Qku6c/)。

# r - 向 ggplot 直方图添加任意函数

> ID：12877319
> 
> 赞同：3
> 
> 时间：2012-10-13T21:50:24.597
> 
> 标签：r, ggplot2

背景：我有一些数据，我希望：

1.  绘制它们的直方图
2.  添加核密度
3.  添加“理论密度”
4.  添加图例以区分 2\. 和 3。

考虑：

```
X <- rnorm(1000,0,1)
Y <- (X^2-1)/2
ggplot(as.data.frame(Y), aes(x=Y)) + 
    geom_histogram(aes(y=..density..),      
                   binwidth=.2,
                   colour="black", fill="white") +
    geom_density(alpha=.2, fill="#FF6666") 
```

![在此处输入图像描述](../Images/ba407f20db4305fe0d9c0d5dc8c81cd9.png)

这完成了 1\. 和 2.，但我怎样才能实现 3\. 和 4.？我写了我想绘制的函数：

```
myfunc <- function(x) {
    2*exp(-x-0.5)/(sqrt(2*x+1)*sqrt(2*pi))
} 
```

欢迎任何其他评论/批评（我正在学习）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:58:01.907

您的自定义函数在该域上表现不佳，因此为了说明目的，我替换了另一个简单的函数。

```
#Dummy data set for the legend
dat <- data.frame(x = rep(NA_integer_,2),
                  y = rep(NA_integer_,2),
                  grp = c('Theoretical','Estimated'))
ggplot(as.data.frame(Y), aes(x=Y)) + 
    geom_histogram(aes(y=..density..),      
                   binwidth=.2,
                   colour="black", fill="white") +
    geom_density(alpha=.2, fill="#FF6666",color = '#FF6666') + 
    stat_function(fun = function(x) exp(-x),colour = "blue") + 
    geom_point(data = dat,aes(x = x,y = y,color = grp)) + 
    scale_color_manual(name = "",values = c('#FF6666','blue')) 
```

![在此处输入图像描述](../Images/09f2f9f330f072ddb1f02348dc2e3af7.png)

我对颜色进行了一些调整，但是您可以根据需要对其进行调整。可能有一种更简洁的方式来制作图例，但“带有 NA 和分组变量的数据框”是我处理这类事情的标准方法。

# ruby-on-rails - “nil:NilClass 的未定义方法 `bytesize'”出现在经过清理的表单输入之后

> ID：12877321
> 
> 赞同：0
> 
> 时间：2012-10-13T21:51:13.483
> 
> 标签：ruby-on-rails, sanitization, form-for, strip-tags

我`form_tag`在我的 Rails 3 应用程序中使用了一个未绑定到任何模型的表单。我了解（尽管如果我错了请纠正我）这个助手没有与模型绑定`form_for`助手相同的清理好处，所以我手动清理表单中的所有输入。

这是我的控制器（只是基础知识）：

```
include ActionView::Helpers::TextHelper

class MyController < ApplicationController

   localVariable = params[:my_form_param].to_s

   localVariable = strip_tags(localVariable)

   localVariable = sanitize(localVariable)

end 
```

当诸如西里尔字母、斯堪的纳维亚字符等字符包含在表单域中时，就会出现此问题。返回以下消息：

```
undefined method `bytesize' for nil:NilClass 
```

我已将范围缩小到`strip_tags`and`sanitize`方法，但我确实需要使用它们来删除错误的输入。我已经尝试将 to_s 方法也转移到每个方法（例如`strip_tags (localVariable.to_s)`），但没有运气 - 我确定表单将起作用的唯一方法是完全注释掉这两行（正如我所说，这是我不想做的事情）。

有人对此有任何想法吗？有没有我可以使用的替代方法，记住我在这里没有使用模型，所以使用`form_for`可能有点过火了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T17:39:00.993

这似乎是相同的，但这是在[这里](https://github.com/rails/rails/issues/1739)向 rails 报告的。

应该通过使用`to_str`方法而不是来解决`to_s`，即：

```
localVariable = params[:my_form_param].to_str 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:34:53.760

我想我解决了这个问题，使用了 Tamer Shlash 的建议并稍微修改了代码。

代码的顺序似乎也很重要——先做 a `strip_tags`，然后 a `sanitize`，最后添加`to_str`方法，如下：

```
 include ActionView::Helpers::TextHelper

    class MyController < ApplicationController

       localVariable = params[:my_form_param].to_s

       localVariable = strip_tags(localVariable)

       localVariable = sanitize(localVariable)

       localVariable = localVariable.to_str

    end 
```

错误消息不再出现。

# jquery - jQuery追加不会触发不止一次

> ID：12877326
> 
> 赞同：0
> 
> 时间：2012-10-13T21:51:31.190
> 
> 标签：jquery, select

问题是，如果我更改**选择**项的值，它会将其完美地附加到 texarea。但是，如果我在附加内容旁边写一些东西并尝试再次使用**select**，它不会将其附加到 textarea。

[你可以在这里](http://jsfiddle.net/5NY3T/)查看我的**JSFiddle**代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:54:23.630

不要使用附加，使用`val`，请参阅更新的小提琴：http: [//jsfiddle.net/5NY3T/1/](http://jsfiddle.net/5NY3T/1/)

# iphone - 如何使工具栏按钮大于工具栏？

> ID：12877335
> 
> 赞同：1
> 
> 时间：2012-10-13T21:52:04.867
> 
> 标签：iphone, ios, cocoa-touch, ipad, uitoolbar

我想知道如何制作一个比实际工具栏更高的工具栏项目（带图像）？在此示例中，照片按钮比工具栏大： ![在此处输入图像描述](../Images/d612908e11be02b7025799cdbf3f6c05.png)

每当我尝试将图像添加到工具栏项时，它只会拉伸或缩小它，直到它适合按钮。

有人知道怎么做吗？如果您可以使用标签栏来做到这一点，那也很好。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:18:23.973

根据 OP 在评论中的要求，这里是答案中的链接。:)

*   [链接 1](http://fotovidia.com/2012/02/how-to-add-a-featured-center-button-to-uitoolbar-like-fotovidia/) (fotovidia.com)
*   [链接 2](http://www.cocoacontrols.com/platforms/ios/controls/eetoolbarcenterbutton) (cocoacontrols.com)
*   [链接 3](http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/) (idevrecipes.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T23:16:44.387

这不是内置功能 - 您要么需要破解 a 的视图层次结构，`UITabBar`要么`UIToolBar`获取您想要的内容，或者编写您自己的等效视图。虽然前一种方法可能更快，但后者可能更好，因为如果 Apple 在未来的操作系统版本中改变它们的工作方式，那么弄乱这样的内置视图可能会带来重大问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T04:11:24.947

这是一个自定义工具栏，这就是我认为最好的方式。创建一个工具栏的图像，创建三个按钮并将其中一个放大，这样就可以了。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-13T23:36:15.623

上面看起来就像是叠加在工具栏上的图形。只需将其添加到 中`window`，它就会始终位于所有内容之上。

# html - 将字段集中的复选框拆分为两列

> ID：12877336
> 
> 赞同：3
> 
> 时间：2012-10-13T21:52:12.187
> 
> 标签：html, css

我正在尝试使用 CSS 将同一字段集中的复选框拆分为两列。

例如，我的代码如下：

```
<div id="topicsbox">
    <label class="topicsname">Topics*</label>
    <label class="description">Select topic areas for which you would like to receive future updates from CTU (articles, blog posts, white papers, etc.). Check all that apply:</label>
    <div id="topicsmessage" class="messagebox"></div>

    <fieldset>
        <input type="checkbox" name="topics[]" id="AllTopStories" value="1098375" /><label for="AllTopStories">All Top Stories</label>
        <input type="checkbox" name="topics[]" id="BusinessandManagement" value="1098376" /><label for="BusinessandManagement">Business and Management</label>
        <input type="checkbox" name="topics[]" id="CareerandProfessional" value="1098377" /><label for="CareerandProfessional">Career and Professional</label>
        <input type="checkbox" name="topics[]" id="CriminalJustice" value="1098378" /><label for="CriminalJustice">Criminal Justice</label>
        <input type="checkbox" name="topics[]" id="HealthcareAdministration" value="1098379" /><label for="HealthcareAdministration">Healthcare Administration</label>
        <input type="checkbox" name="topics[]" id="HomelandSecurity" value="1098380" /><label for="HomelandSecurity">Homeland Security</label>
        <input type="checkbox" name="topics[]" id="ITEngineeringComputerScience" value="1098381" /><label for="ITEngineeringComputerScience">IT, Engineering, Computer Science</label>
    </fieldset>
</div> 
```

有谁知道正确的 CSS 来将此列表拆分为左侧的 4 个输入复选框和右侧的 3 个输入复选框？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T22:26:12.987

如何为输入和标签设置 css，如下所示：

*   设置合适的宽度
*   设置显示：inline-block

这样你就不需要一个清晰的 div 了，如果只是浮动它们，你将需要它

您也可以选择 CSS3 解决方案

```
-moz-column-count:2; /* Firefox */
-webkit-column-count:2; /* Safari and Chrome */
column-count:2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-16T01:07:34.487

CSS 中的列计数属性非常有用。如果您在每个表单元素之后放置一个换行符，您可以做出一个非常干净的演示文稿。此外，通过添加 <span style="white-space: nowrap;">，它保持标签附加到复选框元素

```
<!DOCTYPE html>
<html>
<head>
<style>
.newspaper {
    -webkit-column-count: 2; /* Chrome, Safari, Opera */
    -moz-column-count: 2; /* Firefox */
    column-count: 2;
}
</style>
</head>
<body>

<p>Here are a bunch of check boxes and their labels laid out nicely
<p><b>Note:</b> Internet Explorer 9, and earlier versions, does not support the column-count property.</p>

<div class="newspaper">

<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>
<span style="white-space: nowrap;"><input type="checkbox" name="data" value="some topic" id="some id" /><label for="stuff about a topic">something for you to read</label></span><br/>

</div>

</body>
</html> 
```

# mysql - 从datamapper获取mysql错误

> ID：12877338
> 
> 赞同：0
> 
> 时间：2012-10-13T21:52:34.273
> 
> 标签：mysql, ruby, sinatra, datamapper

无论如何要在datamapper中获取mysql错误（我正在使用Sinatra）

```
@params = {"product"=>"client", "os"=>"windows", "architecture"=>"32", "version"=>""}
@a = Package.new(@params)
@a.save 
```

`@a.save`返回错误，因为版本不能为空。但是我怎样才能检索到这个错误信息（那个 mysql 必须返回说版本不能为空）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-14T07:20:03.523

[DataMapper：](http://datamapper.org/docs/validations.html) *如果您的验证器在您的模型中发现错误，他们将填充 Validate::ValidationErrors 对象，该对象可通过调用模型的 errors 方法在您的每个模型中使用。*

```
if @a.save
  #Record saved 
else 
  @a.errors.each do |e|
    puts e
  end
end 
```

# iphone - 如何根据 xCode 中变量的值自定义 segue？

> ID：12877339
> 
> 赞同：0
> 
> 时间：2012-10-13T21:52:48.987
> 
> 标签：iphone, xcode, sdk, segue

我目前正在构建一个 iPhone 应用程序，我想根据变量的值自定义一个 segue。

例如，如果变量值为 3，我想转到某个视图，如果变量值为 5，我想转到另一个视图。

此外，我对所有视图都使用相同的视图控制器文件。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T22:24:53.687

目前尚不清楚您想做什么。

您可能有第一个视图控制器，然后在其上推第二个（它可以属于同一类）。在这种情况下，请确保您的视图控制器包含在导航控制器中，在情节提要中创建一个新的视图控制器并使其成为同一个类并为其绘制一个 segue。命名 segue 并从您的第一个视图控制器中调用它。您可以根据`prepareForSegue`任何变量自定义您的第二个视图控制器。

或者您只想在同一个视图控制器中显示几个视图。在这种情况下，您不需要导航控制器。您可以显示视图，或手动为它们设置动画以滑入或滑出。

通常第一种方法更好，因为它为您提供了一个简单的机制来再次关闭视图控制器（使用不同的视图）。

至于自定义，它将是这样的：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
   MyViewControllerClass *viewController = segue.destinationViewController;
   viewController.someProperty = self.someProperty; 
} 
```

# c++ - 使用 std::, std::cout 的说明

> ID：12877345
> 
> 赞同：1
> 
> 时间：2012-10-13T21:53:35.497
> 
> 标签：c++

有人可以在 C++ 文件的顶部澄清这意味着什么吗？

```
using std::cout; 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T21:55:19.007

这意味着从那时起在代码中，当我们键入时，`cout`我们的意思是`std::cout`

它将`cout`命名空间中定义的`std`注入到当前命名空间中。我们使用它，`using namespace std`因为它更受控制；并非每个`std`名称都会被注入此语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T21:56:54.840

这是一个命名空间声明。允许您输入`cout`而不是`std::cout`并且通常首选而不是`using namespace std;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T21:58:00.403

该`using`声明将名称`cout`作为`std::cout`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T22:00:25.200

它与“命名空间”概念有关。为了避免名称冲突（变量、类等在不同文件中具有相同名称），您可以将代码放入命名空间，如下所示：

```
namespace exampleNS
{
    class A { ... }

    void aFunction (...){ ... }
} 
```

当您在 namespace 内部时`exampleNS`，您可以仅使用名称来引用类`A`，但从外部您需要编写`exampleNS::A`.

如果您想省去在您经常使用的名称之前添加名称空间的冗长（并且您确定不会与当前名称空间中的任何内容发生冲突），您可以编写该`using`语句。

大多数标准库实用程序都在内部`namespace std`，例如变量`cout`和`cin`. 在您的情况下，您的代码不在命名空间内`std`：您可以选择`std::cout`每次要打印内容时编写，或者`using std::cout`在开始时编写，然后像`cout`在代码中一样使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T22:03:23.007

```
using A::B 
```

命名空间在哪里`A`，意味着可访问性`B`不需要为其派生的前缀。请注意，这仅与放置它的范围有关。如果放置在较低级别的范围内，它的功能不会对外部范围产生任何影响。

# java - 从网页开始在 java web 上发送 userId

> ID：12877346
> 
> 赞同：0
> 
> 时间：2012-10-13T21:53:38.477
> 
> 标签：java, authentication, parameters, jnlp, sessionid

我正在开发一个 JSF2 站点，用户可以在其中通过 java web start 启动一个 java 应用程序。该应用程序解析 mp3 元数据并发送回包含解析信息的 xml 文件。

我需要某种方法来识别发送到服务器的每个文件的用户，但我无法弄清楚如何做到这一点。

换句话说，目标是能够在用户将其发送到服务器之前在 xml 文件中设置 userId。为此，我需要以某种方式在 java web start 应用程序中提供该 ID。

我的问题是：我如何获得身份证？鉴于最终目标是解析用户 mp3 文件并将元数据返回服务器；任何关于如何以更好的方式做到这一点的想法都非常受欢迎。也许我描述的方式并不是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:14:58.343

充当客户端的 Web 启动应用程序可以像任何其他客户端一样向服务器标识自己 - 只需让用户在会话开始时登录即可。但是由于桌面客户端可以访问本地文件系统，因此可以将用户信息存储在本地。这意味着用户 ID 和配置首选项等数据可以存储在本地硬盘上。由于我们希望我们的桌面客户端能够跨平台工作，并且由于开发人员无法确切知道该应用程序从哪个目录启动，因此我们有 [首选项 API](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/package-summary.html)来在本地文件系统之上提供一个抽象层。

如果用户每次运行此应用程序时主要使用同一台计算机，这是存储配置信息和用户首选项的最方便的方式。这是一个例子：

```
/**
 *
 * Loads the user preferences from local storage using the Preferences API.
 * The actual location of this file is platform and computer user-login
 * dependant, but from the perspective of the preferences API, it is stored in 
 * a node referenced by the package this class resides in.
 */
private void loadPrefernces() {
    try {
        prefs = Preferences.userNodeForPackage(this.getClass());
    }
    catch(SecurityException stop) {
        JOptionPane.showMessageDialog(null, "The security settings on this computer are preventing the application\n"
                + "from loading and saving certain user preference data that the program needs to function.\n"
                + "Please have your network administrator adjust the security settings to allow a Java desktop\n"
                + "application to save user preferences. The exception the program encountered is below:\n"
                + stop.toString(),
                "Security Error", JOptionPane.ERROR_MESSAGE);
    }
    catch(Exception some) {
        System.out.println("Other Preference Exception:");
        System.out.println(some);
    }
    //extract information from the prefs object:
    String username = prefs.get("user","default-newUser");
    String userID = prefs.get("id", "0"); //a 0 ID means that the information was not found on the local computer.
}

//Use this method to store username and ID on the local computer.
public void saveUserPrefs() {
    prefs.put("user", user.getUsername() );
    prefs.put("id", "" + user.getID());
} 
```

当然，如果这是用户第一次在计算机上运行应用程序，或者没有为用户分配 ID，上述代码对我们没有帮助。因此，我们需要构建一些登录功能。JNLP 应用程序可以像浏览器那样与 Web 服务器通信。我发现[httpClient](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/index.html)库对于实现这一点非常有帮助。如果用户的浏览器在代理后面，这可能需要一些额外的代码来允许您的 java 应用程序与服务器进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:54:25.493

我们想以某种方式将登录身份从 Web 浏览器转移到另一个应用程序（例如您的 JNLP 程序）这有点不合常规，但我认为它应该可以工作：

1.  当用户登录 Web 应用程序时，将用户 ID 和请求 IP 地址存储在一个表中。这可以是数据库表或本地文件。
2.  当 java 应用程序启动时，它会向 Servlet 发送一个 getID 请求。
3.  servlet 查找请求的 IP 地址并以 ID 响应。servlet 可以只将 ID 发回 - 无需将其包装在 XML 或 HTML 中。

我认为只要您没有两个不同的用户几乎同时尝试从同一个 IP 地址登录，这应该可以工作。如果同一网络上的两个人正在使用此服务，他们可能正在使用具有共享相同公共 IP 的私有 IP 的计算机。我们需要存储有关本地计算机的其他内容以区分这两个用户。例如，Java 可以轻松读取计算机名称。如果您可以让您的浏览器也读取类似的内容，那么这可以与 IP 地址一起进入表格以解决重复 IP 问题。[这个堆栈溢出问题](https://stackoverflow.com/questions/922476/how-can-i-read-the-clients-machine-computer-name-from-the-browser)中提到了一些想法

# android - Android onTouchListener

> ID：12877369
> 
> 赞同：0
> 
> 时间：2012-10-13T21:56:16.677
> 
> 标签：android, ontouchlistener

需要帮助，我想为我的学校制作一个安卓游戏作为项目。我尝试使用 ontouchListener 来撞击痣。

主要活动

```
public class First_Stage extends Activity implements OnTouchListener{

private AllViews allViews;
private MoleView moleView;
private PointsView pointsView;
private TimerView timerView;
private StageView stageView;
private Mole mole; 
private MoveMole moleMove;
private int points=0;
private StagePoints stagePoints;
private PointsSingelton poin;
private float x,y;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    mole=new Mole();
    stageView=new StageView(this);
    moleView=new MoleView(this,mole,x,y);
    pointsView=new PointsView(this);
    timerView=new TimerView(this, "3:33");

    allViews=new AllViews(this);
    allViews.setViews(stageView, moleView, pointsView, timerView);

    setContentView(allViews);
    allViews.setOnTouchListener((View.OnTouchListener)this);

}

@Override
public boolean onTouch(View v, MotionEvent event) {
    x=event.getX();
    y=event.getY();

    return true;
} 
```

所有视图类

```
public class AllViews extends SurfaceView implements SurfaceHolder.Callback, Runnable{

private MoleView moleView;
private PointsView pointsView;
private TimerView timerView;
private StageView mainView;
private float x,y;
private Paint test;
private First_Stage first;
Thread drawThread = new Thread(this);
SurfaceHolder holder;

public AllViews(Context context) {
    super(context);
    test=new Paint();
    first=new First_Stage();
    holder= getHolder();
    holder.addCallback(this);
}

public void setViews(StageView mainView, MoleView moleView, PointsView pointsView,TimerView timerView)

{
    this.mainView = mainView;
    this.moleView = moleView;
    this.pointsView = pointsView;
    this.timerView = timerView;

}
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    mainView.onDraw(canvas);    
    moleView.onDraw(canvas);
    pointsView.onDraw(canvas);
    timerView.onDraw(canvas);
    test.setColor(Color.BLUE);
    canvas.drawCircle(first.getX(), first.getY(), 40, test);

}

@Override
public void run() {
     Canvas c;
        while (true) {
            c = null;

            try {
                c = holder.lockCanvas(null);

                synchronized (holder) {
                    onDraw(c);

                }
            } finally {

                if (c != null) {
                    holder.unlockCanvasAndPost(c);
                }

            }
        }                   
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    drawThread.start();     

} 
```

我也上课去痣，积分，时间和舞台屏幕。但我不知道在哪个视图中制作 ontouchlistener。为了尝试，我做了一个蓝色圆圈，并尝试用监听器事件的新位置改变它的位置，但不乏。

任何帮助都会很棒。谢谢，

cfir。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:08:25.563

onTouchListener 应该在 AllViews 类中实现，因为如果您在其他视图中实现它，您将获得相对于特定视图的左侧/顶部的位置。

在 AllViews 的 onDraw 中，您可以绘制其余的对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:09:47.103

您要在哪个视图中创建`onTouchListener`取决于您，但这`onTouchListener`是一个需要实现的接口。实施后，您将需要正确的方法，在这种情况下，我认为是`onTouch()`. 看看[文档](http://developer.android.com/reference/android/view/View.OnTouchListener.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T22:22:12.800

在我看来，您需要`AllViews`告知您从触摸中收到了信息。

您可以在其中创建几个属性`AllViews`

```
private int touchX;
private int touchY;

public void setTouchX(int x) { this.touchX = x; }

public void setTouchY(int y) { this.touchY = y; } 
```

然后在您的方法中在语句`onTouch`之前添加这些行：`return`

```
AllViews.setTouchX(x);
AllViews.setTouchY(y); 
```

最后，在你的`onDraw`方法中，改变

```
canvas.drawCircle(first.getX(), first.getY(), 40, test); 
```

到

```
canvas.drawCircle(this.touchX, this.touchY, 40, test); 
```

# c# - 将 Share Charm 与 Caliburn.Micro 一起用于 WinRT

> ID：12877372
> 
> 赞同：0
> 
> 时间：2012-10-13T21:56:54.030
> 
> 标签：c#, windows-runtime, caliburn.micro

有谁知道 caliburn.micro WinRT 端口是否已经支持共享目标合同以及如何使用它？

编辑：事实证明，到目前为止，他们只支持共享采购。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:07:08.637

[这篇文章](http://www.markermetro.com/2012/08/technical/caliburn-micro-for-winrt-mvvm-magic-pixie-dust-for-everyone/)指出：

> 在过去一周*[8 月 2 日]*，我们有一些时间将这个出色库的最新版本移植到 WinRT，并在 Windows 8 的功能中加入了一些扩展点，例如共享和设置超级按钮。

[这篇文章](http://compiledexperience.com/blog/posts/caliburn-micro-on-winrt)指出：

> *[您可以通过让您的视图模型实现 interface*来实现 Share]*`ISupportSharing`魅力。*

# java - 构建项目错误：找不到符号

> ID：12877375
> 
> 赞同：0
> 
> 时间：2012-10-13T21:56:58.930
> 
> 标签：java

我收到这两个错误。错误：无法找到或加载主类 Dice Build 项目错误：找不到符号

我的文件保存为 Dice.java。我检查了，因为这是我上一个程序的问题之一。至于符号错误，我不确定。

public class Dice{ <---class is Dice

```
public static void main(String[] args) {

// Welcome message.
    System.out.println ("Welcome to The Dice Roller Game!"); 
```

// 掷骰子。

```
 int die1, die2;
        int rollcount;
        rollcount = 0;
    int wins = 0; 
```

扫描仪键盘 = new Scanner(System.in); <----第13行符号错误

这只是源代码的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:00:08.913

`java.lang`必须导入不在包中的类才能使用：

```
package com.foo.bar;

import java.util.Scanner;

public class Dice {
    ... 
```

[在Java 教程](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)中阅读有关包和导入的更多信息。

# delphi - 如何从表单控制快速报表对象

> ID：12877378
> 
> 赞同：0
> 
> 时间：2012-10-13T21:57:21.863
> 
> 标签：delphi

在显示报告之前，我如何控制快速报告中的对象，如文本宽度或 delphi 表单中的标签标题我有 delphi xe2 快速报告 4，这是我第一次体验快速报告

```
in report builder i can do this but now i cant't

dynamc report is vey important it's change all time depending on varibels came   
from delphi form 
```

因为我有动态报告，而且它的所有时间变化都取决于表单中的文本

```
dynamc report is vey important it's change all time depending on varibels came   
from delphi form 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T22:16:34.910

要访问 FastReport 对象的组件，一种选择是使用对象的`FindComponent`方法，该方法按指定名称返回组件（或者`nil`，如果未找到）：

```
varname := *YourFastReportObject*.FindComponent('*ComponentName*'); 
```

将结果转换为适当的类型，然后您可以访问组件的方法和属性，如下例所示：

```
var
  varname: TfrxMemoView;

...

varname := TfrxMemoView(*YourFastReportObject*.FindComponent('*ComponentName*'));
if varname <> nil then
  varname.Width := varname.Width * 1.2; 
```

# c - 为什么 int 的地址可以被视为指向 int 的指针？

> ID：12877380
> 
> 赞同：0
> 
> 时间：2012-10-13T21:57:25.533
> 
> 标签：c, pointers, reference

我很困惑为什么这段代码有效。我被告知指针是一个“胶囊”，其中包含某物的地址。因此，该`swapnum`函数应该期待这些“胶囊”之一，而不是 int 的实际地址。它是否创建了一个临时指针并将其设置为该地址？如果是这种情况，那么如果我通过引用传递一个指针会发生什么`int * c = &a;` `swapnum (&c...`？

```
#include <stdio.h>

void swapnum(int *i, int *j) {
  int temp = *i;
  *i = *j;
  *j = temp;
}

int main(void) {
  int a = 10;
  int b = 20;

  swapnum(&a, &b);
  printf("A is %d and B is %d\n", a, b);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T22:09:42.390

`pointer`只是地址的另一个词。它并没有什么神奇之处，它只是一个包含一个数字的变量，这个数字是它所指向的东西的内存地址。

在您的示例中，内存可能如下所示：

```
0x00001004 - 10         # a
0x00001008 - 20         # b
0x0000100C - 0x0001004  # i
0x00001010 - 0x0001008  # j
0x00001014 - 00         # temp 
```

`i`并且`j`都是，`int*`这意味着它们包含一个包含整数的地址。代码`*i`说“返回地址中的任何值`i`并假设它是一个`int`.

因此，如果您查看您`swapnum`的 ，会发生以下情况：

```
int temp = *i;
# take the value at 0x0001004 (10) and place it in 0x00001014

*i = *j;
# place the value at 0x0001008 (20) and place it in 0x00001004

*j = temp;
# place the value at 0x0001014 (10) and place it in 0x0001008 
```

之后的内存如下所示：

```
0x00001004 - 20         # a
0x00001008 - 10         # b
0x0000100C - 0x0001004  # i
0x00001010 - 0x0001008  # j
0x00001014 - 10         # temp 
```

你当然可以这样做：

```
int* c = &a;
swapnum(c, &b); 
```

您所做的就是获取 的地址`a`，将其放入`c`，然后将其传递给`swapnum`，它需要一个地址。指针只是一个地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T22:02:23.867

对象的地址是指向对象*的*指针！实际上，这就是指针的全部内容：它们现在位于对象所在的地址。使用地址而不是对象的全部意义在于使用地址您拥有相同的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T22:00:30.400

`&item`返回指向 的指针`item`。

此外，在我所知道的所有现代架构中，指针只是项目的地址。

如果您创建一个指向指针的指针并将其传递给 swapnum，则会发生以下两种情况之一：

1.  您的编译器会抱怨，因为指针的类型是 int* *，而不是 int*
2.  您将交换指针的值。至少如果指针与整数大小相同

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T22:07:20.930

在`main`您使用*address-of* `&`运算符传递到and`swapnum`的地址时。`a``b`

指针的值实际上*是*一个地址。根本没有“胶囊”！（也许，更容易将它们视为没有胶囊的普通地址！）。

如果你这样做了`int *c = &a`，你可以将 c 传递给`swapnum()`而不是，`&a`它会工作得很好。你不能通过`&c`，因为你会传递一个`int **`，而函数期待一个`int *`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-13T22:19:57.710

`&a`是一个表达式，它被评估为`a's`内存中的地址。该值必须存储在指针类型的变量中。例如：

```
int* i = &a; 
```

这里，`i`是一个类型的变量，`int pointer`它充当分配给它的值的容器，胶囊。然而，这个胶囊本身并没有保留`a`价值。它保持`&a`价值。此外，作为一个胶囊，通常是作为一个变量的直接结果。不一定是因为是`pointer`类型的变量。

现在，这个声明：

```
swapnum(&a, &b); 
```

将参数处理为一些局部变量是一项非常正常的工作 - 一个正常的按值传递函数调用。在这种情况下，实际发生的事情是将`&a`值（即`a's`地址）复制到一个局部变量`i`中，这当然需要定义为 type `int pointer`。

如果您定义：

```
int * c = &a; 
```

然后调用：

```
swapnum (&c... 
```

那是行不通的，因为`c`它是一个类型的变量`int pointer`；`&c`, 那么, 将是这样一个变量的地址; 因此，应该将包含该地址的局部变量类型`i`定义为此类值的容器；即它应该被定义为指向`int pointer`或的地址的指针类型的变量`int **`

这样的函数调用没有相应地改变函数肯定会导致编译时错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T22:06:29.220

C++ 是一种静态类型语言。这意味着每个表达式都有一种特定类型的已知编译时间。C++ 标准告诉我们，如果表达式 expr 是内置类型 T，那么表达式 &expr 是类型 T*（指向 T 的指针）。就这样...

# php - MySql Subquery IN 返回第一个结果，不是所有结果

> ID：12877387
> 
> 赞同：0
> 
> 时间：2012-10-13T21:58:41.887
> 
> 标签：php, mysql, subquery

我有以下查询：

```
SELECT TrackID, Name, Artist, Album, TotalTime, TrackNumber, TrackCount
FROM tracks
WHERE TrackID IN (SELECT Tracks FROM playlists
                  WHERE ID='f8ad830c-e2d6-11e1-99d7-00132094'
                  LIMIT 1)
ORDER BY Artist, Album, TrackNumber 
```

执行该操作会返回“tracks”表中的第一行，以包含从子查询返回的任何结果。截至目前，子查询返回：

```
41646,41696,41698,41700,41702,41704,41706,41708,41710,41712 
```

当我将从子查询返回的上述值放入原始查询中时，代替子查询，它会返回我期望的所有行。

为什么子查询将返回的结果限制为第一个结果，但是用返回的结果替换子查询（在 PHPMyAdmin 中运行时）会返回所有结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:40:43.943

```
SELECT TrackID, Name, Artist, Album, TotalTime, TrackNumber, TrackCount 
  FROM tracks 
 WHERE FIND_IN_SET(TrackID
                  , (SELECT Tracks
                       FROM playlists 
                      WHERE ID='f8ad830c-e2d6-11e1-99d7-00132094' 
                      LIMIT 1
                    )
                  ) > 0
 ORDER BY Artist, Album, TrackNumber 
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:08:30.540

你`limit 1`在你的子查询中说。因此，您只获得 1 个 trackid，因此只有一首曲目。

您可以将曲目拆分为多行，因此对于一个播放列表，您的行数与曲目数一样多，或者您可以将曲目字符串拆分为临时表。查看[MySQL：例如将逗号分隔的列表拆分为多行](https://stackoverflow.com/questions/3936088/mysql-split-comma-separated-list-into-multiple-rows)或搜索“将字符串拆分为行”

# sql - 将多行转换为多列

> ID：12877389
> 
> 赞同：3
> 
> 时间：2012-10-13T21:58:49.310
> 
> 标签：sql, sql-server, pivot

这是使用 SQL 服务器

```
ID       ID1      Days     Rank
96972    1        2976     1
96972    174      2976     2
96972    173      2966     3
96972    175      2966     4
96972    176      2963     5
96972    177      2961     6
96972    178      2960     7
96972    179      2952     8
96972    180      2945     9
96972    181      135      10 
```

我在结果集中做了 Rank 列，如下所示

```
row_number() OVER(Partition by id ORDER BY somedate)  AS TimeLineOrders 
```

我想在单行中显示这些结果

```
Timeline1     Timeline2     TimeLine3     Timeline4    Timeline 10
96972         ID1+Days      ID1+Days      ID1+Days     ID1+Days     ID1+Days 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T22:20:39.743

由于缺乏表结构和最终结果，很难确切地知道您在寻找什么。看来您需要`PIVOT`数据。您可以`PIVOT`使用静态版本或动态版本。

使用数据样本创建表：

```
create table tableA
(
    id int,
    id1 int,
    days int
);

insert into tableA values
(96972,   1,   2976),
(96972,   174, 2976),
(96972,   173, 2966),
(96972,   175, 2966),
(96972,   176, 2963),
(96972,   177, 2961),
(96972,   178, 2960),
(96972,   179, 2952),
(96972,   180, 2945),
(96972,   181, 135); 
```

静态版本，具有硬编码到枢轴的值：

```
select *
from 
(
    select id, 
        'Timeline_' + cast(ROW_NUMBER() over(PARTITION by id order by days desc) as varchar(10)) col,
        id1 + days value
    from tableA
) x
pivot
(
    max(value)
    for col in ([Timeline_1], [Timeline_2], [Timeline_3], [Timeline_4], 
                [Timeline_5], [Timeline_6], [Timeline_7], [Timeline_8], 
                [Timeline_9], [Timeline_10])
) p 
```

动态版本，列在运行时生成：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME( 'Timeline_' + cast(x.rn as varchar(10))) 
                    from tableA
                    cross apply 
                    (
                        select ROW_NUMBER() over(PARTITION by id order by days desc) rn
                        from tableA
                    ) x
                    group by x.rn
                    order by x.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, ' + @cols + ' from 
             (
                select id, 
                    ''Timeline_'' + cast(ROW_NUMBER() over(PARTITION by id order by days desc) as varchar(10)) col,
                    id1 + days value
                from tableA
            ) x
            pivot 
            (
                max(value)
                for col in (' + @cols + ')
            ) p '

execute(@query) 
```

# .net - 代码合同：模板方法模式超类的不变量不起作用？

> ID：12877394
> 
> 赞同：0
> 
> 时间：2012-10-13T21:59:54.977
> 
> 标签：.net, code-contracts

假设我有以下代码：

```
public abstract class TemplateBase {
    public void TemplateMethod() {
        Operation(); }

    protected abstract void Operation(); }

public sealed class Implementation : TemplateBase {
    bool _alwaysTrue;

    public Implementation(bool alwaysTrue) {
        _alwaysTrue = alwaysTrue; }

    [ContractInvariantMethod] void ObjectInvariant() {
        Contract.Invariant(_alwaysTrue == true); }

    protected override void Operation() {
        _alwaysTrue = false; } }

[TestClass] public sealed class InvariantTest {
    [TestMethod] public void Constructor() {
        new Implementation(false); }

    [TestMethod] public void Method() {
        new Implementation(true).TemplateMethod(); } } 
```

InvariantTest.Constructor 总是因“Invariant failed”异常而失败。

如何根据不变量让 InvariantTest.Method 失败？

我已将运行时检查设置为完全，甚至启用了“调用站点需要检查”，但即使这样也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:20:23.057

如果您使用最新版本 (1.4.50910.0)，您将收到来自静态检查器的警告，即不变量为假。

但对于运行时，这是预期的行为。从[手册](http://research.microsoft.com/en-us/projects/contracts/userdoc.pdf)：

> 在运行时检查期间，在每个公共方法结束时检查不变量。

出于对象不变量的目的，将受保护的覆盖视为“公共”可能是一个很好的案例。您可能想在[Code Contracts 论坛](http://social.msdn.microsoft.com/Forums/en-US/codecontracts/threads)上开始讨论。

# c++ - DXGI_FORMAT_ 代码如何与字节序相关？

> ID：12877399
> 
> 赞同：2
> 
> 时间：2012-10-13T22:00:32.347
> 
> 标签：c++, direct3d, endianness, dxgi

我一直在阅读 Frank D. Luna 的书“DirectX 10 3D 编程简介”，其中一个问题是从使用

D3DXCOLOR 颜色（128 位）
到 UINT 颜色（32 位）

大概要使用的格式代码是：DXGI_FORMAT_R8G8B8A8_UNORM。

在我看来，这意味着您有一个变量，该变量在字节级别以确切顺序包含有关通道的信息：RGBA（这是正确的解释吗？--问是因为我确定当您需要 RGBA 时我已经读过真的需要这样的代码：*A#R#G#B#*首先指定 alpha 通道。

无论如何，我选择（可能有更好的方法）这样做：

```
UINT color = (UINT)WHITE; 
```

其中 WHITE 被定义：`const D3DXCOLOR WHITE(1.0f, 1.0f, 1.0f, 1.0f);` 此转换在 D3DXCOLOR 的扩展中定义。

但是，当 DXGI_FORMAT_R8G8B8A8_UNORM 与 UINT 颜色变量一起使用时，您会得到错误的结果。Luna 将此归因于字节序。

这是因为来自 D3DXCOLOR 的转换产生了 RGBA 形式的 UINT，但是因为 intel x86 使用 little endiann 那么在字节级别你真的得到'ABGR'？那么当这个变量实际被解释时，着色器看到的是 ABGR 而不是 RGBA？它不应该在解释字节时知道高位在较小的地址吗？还有最后一个问题：既然代码被指定为DXGI_FORMAT_R8G8B8A8_UNORM，这是否意味着R应该是最小的地址而A应该是最大的？我确信我有很多误解，所以请随时消除它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-08T19:46:38.020

当您使用语句“UINT color = (UINT)WHITE”时，它正在调用 D3DXCOLOR 运算符 DWORD () 转换。由于旧版 D3DX9Math 是为 Direct3D 9 设计的，因此这是一种 BGRA 颜色（相当于 DXGI 的 DXGI_FORMAT_B8G8R8A8_UNORM）。来自 d3dx9math.inl：

```
D3DXINLINE
D3DXCOLOR::D3DXCOLOR( DWORD dw )

{
    CONST FLOAT f = 1.0f / 255.0f;
    r = f * (FLOAT) (unsigned char) (dw >> 16);
    g = f * (FLOAT) (unsigned char) (dw >>  8);
    b = f * (FLOAT) (unsigned char) (dw >>  0);
    a = f * (FLOAT) (unsigned char) (dw >> 24);
} 
```

由于原始 Direct3D 10 版本的 DXGI (v1.0) 没有定义 DXGI_FORMAT_B8G8R8A8_UNORM（它是随 DXGI 1.1 添加的），用于 Direct3D 10+ 的“默认”颜色是 RGBA。

所有 DXGI 格式都是 Little-Endian，因为所有 Direct3D 10+ Microsoft 平台都是如此。对于 Xbox 360，引入了 Direct3D 9 D3DFORMAT 的一些特殊 Big-Endian 版本，但这并不是真正起作用的。问题更基本：BGRA 和 RGBA 都是有效选项，但 Direct3D 9 首选 BGRA，Direct3D 10+ 首选 RGBA。

为了让事情更混乱，Direct3D 9 D3DFMT 颜色的命名约定在 DXGI 中是相反的。“D3DFMT_A8R8G8B8”与“DXGI_FORMAT_B8G8R8A8_UNORM”相同。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/cc308051%28v=vs.85%29.aspx)上的此主题。从历史上看，Windows 图形将其称为“32 位 ARGB”格式，但更自然的描述方式是“BGRA”。

# javascript - 每次调用“for{}”语句时添加数字

> ID：12877415
> 
> 赞同：-3
> 
> 时间：2012-10-13T22:03:46.103
> 
> 标签：javascript, math

我在这样的函数中有一个 for 语句：

```
for(i=0;i<=nc;i++){
var nd = //how many times this for statement has run+1
//if the for statement runs for the first time nd would be 1, second time nd would be 2, the for statement will run a total of "nc" times
this.id=nd } 
```

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:05:31.313

你是这样的意思吗？

```
for(i=0;i<=nc;i++){
   var nd = i+1;
   this.id=nd;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:09:38.247

我不知道你想要达到什么目的

```
for(i=0;i<=nc;i++)
{
   this.id = i+1; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T22:06:42.887

在函数之外声明 nd

```
var nd = 0;
function...
    nd++;
    this.id = nd; 
```

# google-maps-api-3 - 如何让 Google 地图在 iOS5 和 Opera Mobile 上显示当前位置？

> ID：12877416
> 
> 赞同：5
> 
> 时间：2012-10-13T22:03:51.580
> 
> 标签：google-maps-api-3, cross-browser, mobile-safari, opera-mobile

我花了很多时间阅读有关使用 google maps api 的信息，并将下面的代码放在一起。代码首先以特定位置为中心，然后将地图中心更改为用户当前位置 - 它用第二个标记突出显示。然后它会以 5 秒的间隔刷新第二个标记的位置，而无需重新居中地图。这在不同的设备和浏览器上的工作程度不同，我想知道如何让它更加跨设备兼容。

```
======================================================================================================================
Device      Browser                      Display map                  Display map marker      Display current location
======================================================================================================================
PC          Chrome                           Yes                           Yes                        Yes (if allowed)
----------------------------------------------------------------------------------------------------------------------
iPhone 3    iOS 5                            Yes                           Yes                        No
----------------------------------------------------------------------------------------------------------------------
Nokia n97   Opera Mobile                     Yes                           Yes                        Yes
----------------------------------------------------------------------------------------------------------------------
Nokia n97   Native symbian browser       Yes, though hybrid map is poor      No      It detects the current location and centres the map there, but doesn't display the image.
---------------------------------------------------------------------------------------------------------------------- 
```

我需要在我自己的网站上托管地图，以确保它可以使用我的自定义图标等正确呈现。

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>mysite - Find your way :)</title>
    <style>
        html, body {
          height: 100%;
          margin: 0;
          padding: 0;
        }

        #map_canvas {
          height: 100%;
        }

        @media print {
          html, body {
            height: auto;
          }

          #map_canvas {
            height: 650px;
          }
        }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
    <script>
      var map;
      var current_location;
      var clue_location;
      function initialize()
      {
            var lostLatLong = new google.maps.LatLng(51.1,-0.1);
            var mapOptions = {
              zoom: 19,
              center: lostLatLong,
              mapTypeId: google.maps.MapTypeId.HYBRID,
              streetViewControl: false,
              rotateControl: false,
              zoomControl: true,
              zoomControlOptions: {
                style: google.maps.ZoomControlStyle.LARGE
                }
            }
            map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

            var image = '/static/images/maps_images/mysite-map-icon-48x48.png';
            clue_location = new google.maps.Marker({
                position: lostLatLong,
                map: map,
                icon: image
            });

            if(navigator.geolocation) 
            {
                navigator.geolocation.getCurrentPosition(function(position) 
                {
                    var current_location_image = '/static/images/maps_images/mysite_location-marker-64x64.png';
                    var newPos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                    current_location = new google.maps.Marker({
                        position: newPos,
                        map: map,
                        icon: current_location_image,
                    });
                    map.setCenter(newPos);
                });
                setTimeout(autoUpdateLocation, 5000);
            }
        }

        function autoUpdateLocation() 
        {
            navigator.geolocation.getCurrentPosition(function(position) 
            {
                current_location.setMap(null);
                var current_location_image = '/static/images/maps_images/mysite_location-marker-64x64.png';
                var newPos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                current_location = new google.maps.Marker({
                    position: newPos,
                    map: map,
                    icon: current_location_image,
                });
            });
            setTimeout(autoUpdateLocation, 5000);
        }

        google.maps.event.addDomListener(window, 'load', initialize);

    </script>

  </head>

  <body>
    <div id="map_canvas"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:30:45.540

您的代码似乎适用于 Android 上的 Opera Mobile 12.1。但是，在某些情况下，有几件事可能会导致问题，例如，有两个`setTimeout`同时运行的实例在做本质上相同的事情。这也违背了尽可能多地重用代码的理想，所以我试图在这里简化你的代码：

```
function initialize() {
    var isFirstTime = true;
    var lostLatLong = new google.maps.LatLng(51.1, -0.1);
    var mapOptions = {
        zoom: 19,
        center: lostLatLong,
        mapTypeId: google.maps.MapTypeId.HYBRID,
        streetViewControl: false,
        rotateControl: false,
        zoomControl: true,
        zoomControlOptions: {
            style: google.maps.ZoomControlStyle.LARGE
        }
    };
    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
    var image = '/static/images/maps_images/mysite-map-icon-48x48.png';
    var clue_location = new google.maps.Marker({
        position: lostLatLong,
        map: map,
        icon: image
    });

    function autoUpdateLocation() {
        navigator.geolocation.getCurrentPosition(function(position) {
            // Remove marker if necessary
            if (!isFirstTime && current_location) {
                current_location.setMap(null);
            }

            // Get new location
            var current_location_image = '/static/images/maps_images/mysite_location-marker-64x64.png';
            var newPos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
            var current_location = new google.maps.Marker({
                position: newPos,
                map: map,
                icon: current_location_image
            });

            // Set centre first time only
            if (isFirstTime && map) {
                map.setCenter(newPos);
                isFirstTime = false;
            }
        });
    }

    if (navigator.geolocation) {
        setInterval(autoUpdateLocation, 5000);
    }
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

其他注意事项：

*   我已经替换`setTimeout`为`setInterval`更适合重复任务的。

*   将所有内容放在`initialize()`函数中，以将内容排除在全局命名空间之外。

*   删除了对象中最后一项的结束逗号。

*   `current_location`变量不需要在`autoUpdateLocation()`函数外声明。

它可能可以进一步改进，但这应该更强大一些。如果您仍有问题，请告诉我。

# php - 在评估内容敏感页面上的身份验证时，php 的 exit() 函数有多可靠？

> ID：12877419
> 
> 赞同：0
> 
> 时间：2012-10-13T22:04:15.330
> 
> 标签：php

我正在编写一个使用 php/mysql 的自定义 CMS/登录系统，并且我正在尝试为需要登录的页面开发适当的安全性。这是我目前使用的格式，它似乎工作得很好，但我想实现一个更干净的解决方案：

```
<?php
    $allowed = false;

    // logic here to determine if the user should be able to view this page; set allowed if so

    if ($allowed){

        // show secured data

    } else {
        header( 'Location: login.php');
        exit();
    }
?> 
```

我想将其简化为：

```
<?php
    $allowed = false;

    // logic here to determine if the user should be able to view this page; set allowed if so

    if (!$allowed){
        header( 'Location: login.php');
        exit();
    } 

    // show secured data

?> 
```

**这种方式会同样安全吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T22:06:48.793

是的。绝对没问题！完美的！

只要你不误将它设置`$allowed`为true，它就应该是false。

# c++ - 模板类方法的特化

> ID：12877420
> 
> 赞同：6
> 
> 时间：2012-10-13T22:04:49.763
> 
> 标签：c++, templates

假设我有以下课程：

```
template <typename T>
class MyClass
{
public:
    void SetValue(const T &value) { m_value = value; }

private:
    T m_value;
}; 
```

如何为 T=float （或任何其他类型）编写函数的专用版本？

注意：一个简单的重载是不够的，因为我只希望函数可用于 T=float（即 MyClass::SetValue(float) 在这种情况下没有任何意义）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T08:14:52.550

```
template <typename T>
class MyClass {
private:
    T m_value;

private:
    template<typename U>
    void doSetValue (const U & value) {
        std::cout << "template called" << std::endl;
        m_value = value;
    }

    void doSetValue (float value) {
        std::cout << "float called" << std::endl;
    }

public:
    void SetValue(const T &value) { doSetValue (value); }

}; 
```

或（部分模板专业化）：

```
template <typename T>
class MyClass
{
private:
    T m_value;

public:
    void SetValue(const T &value);

};

template<typename T>
void MyClass<T>::SetValue (const T & value) {
    std::cout << "template called" << std::endl;
    m_value = value;
}

template<>
void MyClass<float>::SetValue (const float & value) {
    std::cout << "float called" << std::endl;
} 
```

或者，如果您希望函数具有不同的签名

```
template<typename T>
class Helper {
protected:
    T m_value;
    ~Helper () { }

public:
    void SetValue(const T &value) {
        std::cout << "template called" << std::endl;
        m_value = value;
    }
};

template<>
class Helper<float> {
protected:
    float m_value;
    ~Helper () { }

public:
    void SetValue(float value) {
        std::cout << "float called" << std::endl;
    }
};

template <typename T>
class MyClass : public Helper<T> {
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T22:11:44.380

你当然可以。只是它应该是一个过载:)

```
template <typename T>
class MyClass
{
public:
    template<class U> 
    void SetValue(const U &value) { m_value = value; }
    void SetValue(float value) {do special stuff} 
private:
    T m_value;
};

int main() 
{
     MyClass<int> mc;
     mc.SetValue(3.4); // the template member with U=double will be called
     mc.SetValue(3.4f); // the special function that takes float will be called

     MyClass<float> mcf; //compiles OK. If the SetValue were not a template, 
     // this would result in redefinition (because the two SetValue functions
     // would be the same   
} 
```

# ruby - 当我的脚本中断时，如何让 shell/ruby 发出声音（让我的计算机发出哔哔声或播放声音/音轨）？

> ID：12877422
> 
> 赞同：5
> 
> 时间：2012-10-13T22:04:58.627
> 
> 标签：ruby, shell, audio, scripting, error-handling

我正在运行一个测试脚本，该脚本一遍又一遍地在一个网站上运行，在几个小时内运行了数百次。例如，我想让 ruby​​ 开始播放响亮的歌曲/mp3，以便在我在我相当小的公寓的不同部分时提醒我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-15T14:10:36.897

我找到了适用于所有 Mac OSX 用户的解决方案。归功于此博客文章： http: [//www.mitchchn.me/2014/os-x-terminal/](http://www.mitchchn.me/2014/os-x-terminal/)向我展示了它：

Mac 终端有一个名为`say`. `say`功能与人们希望的完全一样：

```
say "I'm done master" 
```

只是从终端做到这一点。

在 ruby​​ 脚本中（在我的例子中），这很容易实现。

```
`say "I'm done master"` 
```

奇迹般有效。

好的，我宁愿默认是女声，但这很好。

要切换语音，请转到系统偏好设置 > 听写和语音 > 文本到语音 > 系统语音

Vicki可能是最好听的女声

编辑：哦，是的，我希望计算机在崩溃时发出声音。在红宝石中做到这一点：

```
def go(x)
  begin# starts rescue block
    puts "5/#{x} = #{5/x}"
  rescue
    `say "something is wrong, master."`
  end
end

go(0)
#=> ... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-03T17:52:39.027

在 mac 上也有该`afplay`程序，因此可以执行以下操作：

```
sleep 180 # sleep 3 minutes
`afplay my_song.mp3` 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-13T22:18:02.983

如果您想在异常后播放一些音乐，只需将您的语句包装在一个`begin rescue`块中，当您捕获异常时，运行如下内容（在 *nix 上）：

```
pid = fork{ exec 'mpg123','-q', file } 
```

或者如果您在 Windows 上：

```
require 'win32ole'
player = WIN32OLE.new('WMPlayer.OCX')
player.OpenPlayer(file) 
```

所以它应该看起来像

```
def methodThatFails  
  begin  
    # Your code here 
  rescue  
    pid = fork{ exec 'mpg123','-q', 'nevergonnagiveyouup.mp3' }
  end  
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-23T20:17:07.307

对于 Windows 用户：使用 gem win32-sound，不支持 mp3 但 .wav

```
# gem install win32-sound

require 'win32/sound'
include Win32

Sound.play("SystemAsterisk", Sound::ALIAS) # play system asterisk sound
Sound.beep(600,200) # play a beep 600 hertz for 200 milliseconds
Sound.play("trompet.wav") # play a file from disk 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-02T23:59:11.277

[`exception_alarm`](https://github.com/pioz/exception_alarm)当您的 Ruby 代码引发异常时，您可以使用 gem播放 mp3 警报文件。

```
require 'exception_alarm'

alarm do
  # your code...
  raise 'play alarm sound'
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-22T10:37:45.633

`puts "\a"`

如果您正在开发一个命令行应用程序并且需要一个简单的终端哔声，请使用以下纯 ruby​​，没有库，只使用 ansi 转义码。应该在本机终端上工作（ansi 兼容，例如 mac 终端 gnome/kde 终端、term2、ssh 会话、tmux 等。不确定 windows 终端 - 它应该被支持，因为它是一个众所周知的 ansi 序列。听起来就像当您在输入的开头按 DELETE 或 DOWN 箭头。希望对您有所帮助

# c++ - STL链表::如何访问成员？

> ID：12877423
> 
> 赞同：2
> 
> 时间：2012-10-13T22:05:01.397
> 
> 标签：c++, list, stl, iterator

如果我有一个包含指向类的指针的 STL 列表并想要访问类成员，我将如何处理？具体来说，我需要能够删除列表中的成员，每个成员都有一个具有唯一 ID 的成员。

所以我有类似的东西：

```
class Actor{

    private:
    int id;

    public:
    int getActorID(){ return id;};
};

std::list<Actor *> actorList;

std::list<Actor *>::iterator i; 
```

因此，如果每个演员都有一个唯一的 id，我怎么能删除具有特定 ID 的演员？我一直在使用手动编码的链接列表，但我想将其切换到 STL。唯一的问题是我不知道如何访问方法 getActorID() 来查找要删除的节点。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T22:09:51.227

```
std::list<Actor *>::iterator it;

std::list<Actor *>::iterator iStart = actorList.begin() ;
std::list<Actor *>::iterator iEnd = actorList.end() ;
for (it=iStart ;it!=iEnd;++it)
{
if (*it->getActorId() == searchedId)
  {
   actorList.erase(it);
   break; //you have unique id's so you could delete a maximum 1 item
  }
} 
```

也不要忘记你有其他选择

```
std::list::remove
std::list::remove_if 
```

[http://en.cppreference.com/w/cpp/container/list/remove](http://en.cppreference.com/w/cpp/container/list/remove)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T16:16:31.263

可能多次调用擦除的容器上的迭代器 for 循环是等待发生的灾难，因为擦除通常至少会使传递给它的迭代器（以及指向被擦除元素的任何其他迭代器）失效，并且失效的迭代器不能安全地递增。只调用一次擦除的循环可以使用“break;” 在不使用无效迭代器的情况下退出 for 循环。

[迭代器失效规则](https://stackoverflow.com/questions/6438086/iterator-invalidation-rules)

正如我在此问题导致的多个分段错误一周后告诉我的同事，如果您想循环容器并调用擦除，请使用 while 循环并确保您获得下一项（或结束）的有效迭代器()) 在您调用擦除之前。最简单的方法是在调用站点后递增迭代器。对于 std::list::erase(iterator)，也可以使用它的返回值作为新的迭代器值。

[列表迭代器不可递增](https://stackoverflow.com/questions/196976/list-iterator-not-incrementable)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T22:07:52.240

迭代器的作用类似于指针，因此为了调用存储为 STL 容器中指针的对象的成员函数，您需要取消引用两次：

```
std::list<Actor*>::iterator iter = actorList.begin();
(*iter)->getActorId(); 
```

或者：

```
(**iter).getActorId(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T22:22:30.113

要找到您想要使用的节点，可以使用[`std::find_if()`](http://en.cppreference.com/w/cpp/algorithm/find)：

```
#include <algorithm>
#include <list>
using namespace std;

class Actor{

    private:
    int id;

    public:
    int getActorID() const { return id;};
};

// a functor used for pre-C++11 since lambdas aren't supported
struct isActor
{
private:
     int target;

public:
    isActor( int target) : target(target) {}

    bool operator()( Actor const* pa) const
    {
        return pa->getActorID() == target;
    }
};

std::list<Actor *> actorList;

std::list<Actor *>::iterator i;

int main()
{
    // pre-C++11 technique
    i = std::find_if( actorList.begin(), actorList.end(), isActor(42));

    // C++11 lambda technique
    int id = 42;
    i = std::find_if( begin(actorList), end(actorList), [=](Actor const* pa) {
        return pa->getActorID() == id;
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T22:11:34.513

您必须使用迭代器，因为列表是顺序数据结构。一旦有了迭代器，就可以向前移动并使用间接运算符提取指向对象的指针`*`

```
list<Actor *>::iterator it = actorList.begin();
Actor * innerPtr = *it;
innerPtr->yourMethod(); 
```

一旦你知道一个演员是要被删除的演员，你可以使用`erase(position);`USING THE ITERATOR 方法：

```
if( innerPtr->getActorId() == <your condition> )
{
    actorList.erase(it);
} 
```

但是，如果您需要使用 actor ID 进行搜索，我建议您切换到不同的数据结构，例如关联容器（例如 map）。

# jquery - 使用灯箱包含多个复选框的 Jquery

> ID：12877425
> 
> 赞同：1
> 
> 时间：2012-10-13T22:05:13.117
> 
> 标签：jquery

任何人都可以帮助我创建一个包含多个复选框的弹出窗口，并且在选择值出现在文本框中的选项之后，如果我们想删除特定的选择，那么它允许我们从文本框中。

简而言之，我想这样做：

1.  转到[此页面](http://in.iproperty.com/)。
2.  查看`Please click here to select sub location(s)`

# django - django 待办事项列表示例不应该使用外键自我吗？

> ID：12877431
> 
> 赞同：-1
> 
> 时间：2012-10-13T22:05:39.090
> 
> 标签：django, django-models

在 django todo list 示例中，[可在此处获得](http://lightbird.net/dbe/todo_list.html)，他们创建了第二个 todolist 项目表，以便他们可以使用外键引用它。

他们不只是使用外键来自我介绍有什么好的理由吗？

```
class DateTime(models.Model):
    datetime = models.DateTimeField(auto_now_add=True)
    def __unicode__(self):
        return unicode(self.datetime)

class Item(models.Model):
    name = models.CharField(max_length=60)
    created = models.ForeignKey(DateTime)
    priority = models.IntegerField(default=0)
    difficulty = models.IntegerField(default=0)
    done = models.BooleanField(default=False) 
```

我认为它应该看起来像：

```
class Item(models.Model):
    datetime = models.DateTimeField(auto_now_add=True)
    name = models.CharField(max_length=60)
    created = models.ForeignKey(self)
    priority = models.IntegerField(default=0)
    difficulty = models.IntegerField(default=0)
    done = models.BooleanField(default=False) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T22:11:20.067

教程中对此进行了解释：正如他们承认的那样，通过管理员的内联表单集功能一次添加多个项目是一个“稍微有点 hack-y 的解决方案”（实际上我会说*非常）。*

# actionscript-3 - 防止舞台接收发生在其他对象上的鼠标事件？

> ID：12877435
> 
> 赞同：0
> 
> 时间：2012-10-13T22:06:09.823
> 
> 标签：actionscript-3, apache-flex

尽管阅读了许多关于 AS3 的文章并实际完成了现实世界的项目，但我仍然经常对简单的事件处理任务感到困惑。

在当前的 Flex 项目中，用户能够创建基于 BorderContainer 的自定义类的实例，然后选择并移动它们或调整它们的大小。我想添加一个事件侦听器来检测背景 BorderContainer（或舞台）上发生的鼠标点击，以便取消选择任何当前选择的实例。

有人可以概述完成此操作的步骤吗？我已经尝试了我能想到的一切（启用/禁用`useCapture`，尝试将 event.target 与 event.currentTarget 进行比较，尝试测试 eventPhase）。

我的项目太复杂而无法发布，但是通过下面的简单测试用例，我得到了以下输出，这对我来说毫无意义：结果是一样的。

所以我的问题是：如何检测仅在特定对象上发生的鼠标事件？

单击自定义 BorderContainer 的实例：

```
----------stage click 1
stage is TARGET 1
----------stage click 1
stage is TARGET 1
-----------background click 1
background is currentTarget 1
-----------background click 3
background is currentTarget 3
----------stage click 3
stage is TARGET 3
----------stage click 3
stage is TARGET 3 
```

直接点击`background`：

```
----------stage click 1
stage is TARGET 1
----------stage click 1
stage is TARGET 1
-----------background click 1
background is currentTarget 1
-----------background click 3
background is currentTarget 3
----------stage click 3
stage is TARGET 3
----------stage click 3
stage is TARGET 3 
```

//-------------------

```
background.addEventListener(MouseEvent.CLICK, backgroundClick); 
background.addEventListener(MouseEvent.CLICK, backgroundClick, true); 
stage.addEventListener(MouseEvent.CLICK, stageClick); 
stage.addEventListener(MouseEvent.CLICK, stageClick, true);

protected function backgroundClick(event:MouseEvent):void {
    trace("-----------background click", event.eventPhase);  

    if (event.target == background){
        trace("background is TARGET",event.eventPhase);
    }

    if (event.currentTarget == background){
        trace("background is currentTarget",event.eventPhase);
    }
} 

protected function stageClick(event:MouseEvent):void {
    trace("----------stage click",event.eventPhase); 
    if (event.target == stage){
        trace("stage is currentTarget",event.eventPhase);
    }

    if (event.currentTarget == stage){
        trace("stage is TARGET",event.eventPhase);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T22:15:40.397

点击事件气泡；这意味着除非你停止传播；层次结构中的每个组件，从事件被分派的点一直到舞台，都将在冒泡阶段接收到点击事件。在舞台上添加事件监听器将拾取应用程序中的每个点击事件；因为舞台是层次结构的顶层。

通常，您会将事件侦听器添加到 BorderContainer 的特定实例；不在舞台上。

有关事件如何在[文档](http://livedocs.adobe.com/flex/3/html/help.html?content=events_05.html)中使用的更多信息。

# javascript - JSF页面加载缓慢

> ID：12877436
> 
> 赞同：0
> 
> 时间：2012-10-13T22:06:16.957
> 
> 标签：javascript, jsf, jsf-2

我有一个 JSF 应用程序，它有几个 JSF 页面。当我单击页面加载新页面时，我等待 1-2 秒以加载新页面，然后我看到白屏。我该如何解决这个缓慢的加载？例如，我可以在加载新页面时在屏幕中央显示“正在加载...”并刷新屏幕而不显示白色显示吗？最佳实践是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T00:14:37.453

听起来像是一个性能调试问题。

首先查看慢速位在哪里。在 Chrome、Safari 或 Firefox（可能还有 IE）中，您可以访问调试器控制台。

在 Chrome 中，将其拉起并单击“网络”选项卡。刷新页面。您将看到页面上需要网络连接加载的所有资源的瀑布图。它还将为每个人提供时间。

假设你看到这样的东西：

```
index.html ########
script1.js         ####
script2.js             ##########
img1.png                         #####
img2.png                         #########
img3.png                         ###### 
```

如果您查看 index.html 到 script2.js 的末尾，您可以看到它们是如何一个接一个地线性发生的。这称为阻塞。

对于 index.html，这是您的初始页面加载。根据文档的大小，这可能非常小或非常大。几乎所有后记（script1 & 2 和 imgs）仅在 index.html 加载后才开始加载。这是因为 index.html 必须先由浏览器解析，然后才能开始加载其他所有内容。

如果 index.html 显示大约 2 秒的加载时间，那么这意味着您的问题很可能出在服务器端。可能是页面生成需要很长时间，或者您的 Web 服务器负载过重，或者您的连接速度非常慢。此时，需要做一些服务端测试，看看问题出在哪里。

现在让我们回到示例图。

关于 script1.js 和 script2.js 是如何阻塞的，这意味着它们所有的 javascript 都在被加载、解析和运行。Javascript 是单线程的，在浏览器开始处理下一个脚本或加载下一个资源之前，脚本标签中的代码必须完全由 javascript 解释器解析和加载。

有许多技术可以优化 javascript 以快速加载。这是一个不同的主题，但谷歌搜索“优化 javascript 加载”是开始了解更多信息的好地方。

最后，某些类型的资源（例如图像）本质上是并行加载的。图中显示的是img1-3都是同时加载的。这由每个资源负载的开始都在同一点排队表示。它们可能会也可能不会在同一点结束，就像在 img2 中一样。Img2 是更大的图像，因此加载时间更长。

关于浏览器如何加载资源，还有另一件有用的事情需要了解，即浏览器对它们可以建立的同时连接的数量有限制。在过去，IE6 限制每个域同时连接 2 个。该图可能如下所示：

```
img1.png                         #####
img2.png                         #########
img3.png                         ######
img4.png                              ###### 
```

注意 img4 开始加载的位置。Imgs 1-3 正在加载，但 img4 被延迟到 img1 完成加载。那是因为只有 2 个打开的连接，而 img4 必须等到 img1 完成。同样，img2 的大小无关紧要，这仅基于可用的连接。

幸运的是，现在所有的浏览器都允许更多的同时连接，所以这不是一个问题。尽管如此，它还是需要注意的。

解决此问题的一种方法是从不同的域或子域加载资源。例如，如果您有一个非常多图像的站点，那么设置多个可以从中加载图像的子域可能是个好主意。可能是这样的：

```
sub1.domain.com/img1.png
sub1.domain.com/img2.png
sub3.domain.com/img3.png
sub4.domain.com/img4.png
sub1.domain.com/img5.png
sub2.domain.com/img6.png
sub2.domain.com/img7.png 
```

这使浏览器可以“循环”请求并加载更多资源，而无需等待很长时间。

无论如何，希望这会有所帮助。

# django - Tastypie：我想获得“/places/{PLACE_ID}/comments”之类的项目，但如何获得？

> ID：12877437
> 
> 赞同：4
> 
> 时间：2012-10-13T22:06:19.093
> 
> 标签：django, tastypie

假设我想获得关于某个地方的评论。我想提出这个要求：

**/places/{PLACE_ID}/评论**

我怎么能用 TastyPie 做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T08:03:04.227

按照[Tastypie's docs](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#nested-resources)中的示例，在您的`places`资源中添加如下内容：

```
class PlacesResource(ModelResource):

    # ...

    def prepend_urls(self):
        return [
            url(r"^(?P<resource_name>%s)/(?P<pk>\w[\w/-]*)/comments%s$" % (self._meta.resource_name, trailing_slash()), self.wrap_view('get_comments'), name="api_get_comments"),
    ]

    def get_comments(self, request, **kwargs):
        try:
            obj = self.cached_obj_get(request=request, **self.remove_api_resource_names(kwargs))
        except ObjectDoesNotExist:
            return HttpGone()
        except MultipleObjectsReturned:
            return HttpMultipleChoices("More than one resource is found at this URI.")

        # get comments from the instance of Place 
        comments = obj.comments # the name of the field in "Place" model

        # prepare the HttpResponse based on comments
        return self.create_response(request, comments)           
     # ... 
```

这个想法是您在`/places/{PLACE_ID}/comments`URL 和资源的方法之间定义一个 url 映射（`get_comments()`在此示例中）。该方法应该返回一个实例，`HttpResponse`但您可以使用 Tastypie 提供的方法来完成所有处理（由 包装`create_response()`）。我建议你看一下`tastypie.resources`模块，看看 Tastypie 如何处理请求，特别是列表。

# c++ - C++ 程序在需要 int 时输入 double 后退出。怎么修？

> ID：12877443
> 
> 赞同：1
> 
> 时间：2012-10-13T22:06:46.260
> 
> 标签：c++, validation, input, double, character

我有一个任务，我必须制作一个程序，该程序接受用户输入（需要自然数），然后打印出反向数字。该程序做得很好但是我还必须确保在输入不是自然数的值时程序不会给我任何错误。如果我输入双精度值或输入数字后跟字符，程序将退出。在其余情况下，该程序运行良好。什么可能导致这些问题？

```
int number;
char x = 'c';
while (x == 'c') {
    cout << "Enter a number\n";
    cin >> number;
    while (!(cin.good()) || number < 1 || floor(number) != number) {
        cin.clear();
        cin.ignore(256,'\n');
        cout << "Try again.\n";
        cin >> number;
    }
    string reverse;
    stringstream convert; 
    convert << number;
    reverse = convert.str();
    reverse = string (reverse.rbegin(),reverse.rend());
    cout << "The reverse number for number " << number << " is " << reverse << endl;
    cout << "If you want to continue using the program enter 'c',\nif you want to close the program enter anythin else\n";
    cin >> x;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:18:22.937

这是因为假设**123.456您的程序将****123**读取为`int`. 然后反转它然后期望`char x == 'c'`但得到 dot **。**.

`std::string`从那之后读取`std::cin`，检查它是否是`int`.

```
std::string reverse;
std::cin >> reverse;

std::istringstream test(reverse);
int value; std::string rest;
if (!(test >> value) || (test >> rest)) // must read int but nothing more
{
  prompt for new value
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:22:58.443

恕我直言：为了满足您的任务，您需要先将数字作为字符串读取，然后您可能需要检查该数字是否为自然数，即检查是否有“。” 在字符串中，如果没有，则执行您之前所做的操作，否则会给出错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T22:16:54.970

我实际上`double`会将其作为输入类型，然后将其转换为自然数，因为自然数是实数的子集......至少这是解决用户输入双精度数或任何其他错误所产生的错误的最简单方法浮点型。

# mysql - MySQL 错误 #1133 - 在用户表中找不到任何匹配的行

> ID：12877458
> 
> 赞同：75
> 
> 时间：2012-10-13T22:08:00.667
> 
> 标签：mysql, phpmyadmin, mysql-error-1064

无法为使用**3.5.2.2 - phpMyAdmin** for **5.5.27 - MySQL**的用户设置密码。以用户身份登录时尝试设置密码时`phpMyAdmin`，会弹出以下错误：

```
#1133 - Can't find any matching row in the user table 
```

以 root 身份登录时，会弹出以下密码设置成功消息。

```
SET PASSWORD FOR 'user'@'%' = PASSWORD( '***' ) 
```

在任何一种情况下，密码都不会设置并保持当前状态，为空白。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-07-02T22:23:21.550

我在不同的上下文中（不在 phpMyAdmin 中）使用 MySQL 时遇到了这个错误。GRANT 和 SET PASSWORD 命令在 mysql.user 表中列出的特定现有用户上失败。就我而言，它是通过运行修复的

```
FLUSH PRIVILEGES; 
```

该命令的[文档](http://dev.mysql.com/doc/refman/5.0/en/flush.html)说

> 从 mysql 数据库中的授权表重新加载权限。
> 
> 作为 GRANT 和 CREATE USER 语句的结果，服务器将信息缓存在内存中。该内存不会被相应的 REVOKE 和 DROP USER 语句释放，因此对于执行许多导致缓存的语句实例的服务器，内存使用量会增加。可以使用 FLUSH PRIVILEGES 释放此缓存内存。

显然，用户表缓存已达到不一致的状态，导致出现此奇怪的错误消息。更多信息可[在此处](http://www.question-defense.com/2011/04/12/mysql-error-1133-42000-cant-find-any-matching-row-in-the-user-table)获得。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2017-11-20T11:28:56.407

如果尝试为不存在的用户授予权限，则可能会发生此错误。

我不清楚 MySQL 认为什么是不存在的用户。但是我怀疑如果可以通过表中的名称（列`User`）和主机（列`Host`）找到用户，则 MySQL 认为用户存在`user`。

如果尝试向可以通过他的姓名（列`User`）但不能通过他的姓名和主机（列`User`和`Host`）找到的用户授予权限，并且不提供密码，则会发生错误。

例如，以下语句触发错误：

```
grant all privileges on mydb.* to myuser@'xxx.xxx.xxx.xxx'; 
```

这是因为，在没有指定密码的情况下，MySQL 无法创建新用户，因此会尝试查找现有用户。但是在表中找不到具有名称`myuser`和主机的用户。`xxx.xxx.xxx.xxx``user`

而提供密码，则允许语句成功执行：

```
grant all privileges on mydb.* to myuser@'xxx.xxx.xxx.xxx' identified by 'mypassword'; 
```

如果新的“MySQL 用户”是相同的“应用程序用户”，请确保重用您认为存在的该用户的相同密码。

通过刷新权限完成操作：

```
flush privileges; 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-21T21:14:29.690

我遇到了这个问题，但在我的情况下，“phpmyadmin”用户的密码与`/etc/phpmyadmin/config-db.php`

一旦我更新了“phpmyadmin”用户的密码，错误就消失了。

这些是我采取的步骤：

1.  以 root 身份登录 mysql：`mysql -uroot -pYOUR_ROOT_PASS`
2.  更改为“mysql”数据库：`use mysql;`
3.  更新“phpmyadmin”用户的密码： `UPDATE mysql.user SET Password=PASSWORD('YOUR_PASS_HERE') WHERE User='phpmyadmin' AND Host='localhost';`
4.  刷新权限：`FLUSH PRIVILEGES;`

完毕！！它对我有用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-14T19:18:07.867

事实证明，错误确实非常模糊！

1) 以 root 身份登录时设置密码，因为它正在更新 MySql 下用户表中的用户/密码字段。

2）当以用户身份登录时，密码实际上并没有改变，即使在 MySql 的用户表中指定了一个，config.inc.php 文件也允许在没有密码的情况下进行身份验证。

解决方案：

**将以下值**更改****`false`**为**config.inc.php**中的值。**

 **```
$cfg['Servers'][$i]['AllowNoPassword'] = true; 
```

**所以它读**

```
$cfg['Servers'][$i]['AllowNoPassword'] = false; 
```

**在 MySql 用户表中**更改**用户的主机**或****`Any`**更改**`%`**用户的主机。**`localhost`**这可以通过**phpMyAdmin**控制台轻松实现。**

 **这两项更改允许我使用其密码作为用户进行身份验证，并不允许我在没有密码的情况下进行身份验证。

它还允许用户在以用户身份登录时更改其密码。

似乎所有权限，其余的已通过这两个更改修复。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-10-05T21:23:25.883

阐述[斯蒂芬的回答](https://stackoverflow.com/a/47390980/10907864)。

当我尝试`root`通过运行以下命令将特定数据库的远程连接权限授予 MySQL 服务器上的用户时出现此错误：

```
USE database_name;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%'; 
```

这给出了一个错误：

```
ERROR 1133 (42000): Can't find any matching row in the user table 
```

**这是我修复它的方法**：

首先，确认您的**MySQL**服务器允许远程连接。使用您喜欢的文本编辑器打开 MySQL 服务器配置文件：

```
sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf 
```

向下滚动到**bind-address**行并确保将其**注释掉**或替换为`0.0.0.0`（以允许所有远程连接）或替换为您希望远程连接的**IP 地址。**

进行必要的更改后，保存并退出配置文件。通过重新启动 MySQL 服务来应用对 MySQL 配置文件所做的更改：

```
sudo systemctl restart mysql 
```

接下来，登录到安装它的服务器上的 MySQL 服务器控制台：

```
mysql -u root -p 
```

输入你的**mysql用户密码**

检查您想要的用户已经可以访问的**主机。**在我的情况下，用户是`root`：

```
SELECT host FROM mysql.user WHERE user = "root"; 
```

这给了我这个输出：

```
+-----------+
| host      |
+-----------+
| localhost |
+-----------+ 
```

接下来，我运行下面的命令，这与之前抛出错误的命令类似，但请注意我这次添加了密码：

```
USE database_name;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'my-password'; 
```

**注意**：`%`授予用户从网络上所有主机的远程访问权限。您可以使用以下命令指定要授予用户访问权限的各个主机的 IP 地址 -`GRANT ALL PRIVILEGES ON *.* TO 'root'@'Ip-Address' IDENTIFIED BY 'my-password';`

之后，我检查了用户现在可以访问的**主机。**在我的情况下，用户是`root`：

```
SELECT host FROM mysql.user WHERE user = "root"; 
```

这给了我这个输出：

```
+-----------+
| host      |
+-----------+
| %         |
| localhost |
+-----------+ 
```

最后，您可以尝试使用以下命令从另一台服务器连接到 MySQL 服务器：

```
mysql -u username -h mysql-server-ip-address -p 
```

其中**u**代表**user**，**h**代表**mysql-server-ip-address**，**p**代表**password**。所以在我的情况下是：

```
mysql -u root -h 34.69.261.158 -p 
```

输入你的**mysql用户密码**

您应该根据您的**MySQL**服务器版本获得此输出：

```
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 4
Server version: 5.7.31 MySQL Community Server (GPL)

Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> 
```

**资源**：[如何允许远程连接到 MySQL](https://phoenixnap.com/kb/mysql-remote-connection)

就这样。

**我希望这有帮助**

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-28T04:23:00.850

将 newdb.* 上的所有权限授予由“密码”标识的 newuser@localhost；

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-03-26T19:27:06.007

对于像我这样犯错的人。

我正在使用命令

`SET PASSWORD FOR root = 'elephant7'`

更新root用户的密码，我得到了同样的错误。我在所有答案中都尝试了上面提到的所有事情，但我没有成功，然后在搜索了一下之后我发现了答案，

> MySQL 帐户名由用户名和主机名组成。这可以为可以从不同主机连接的同名用户创建帐户。

在[https://dba.stackexchange.com/](https://dba.stackexchange.com/questions/69921/error-code-1133-cant-find-any-matching-row-in-the-user-table)

然后我使用了命令

`SET PASSWORD FOR 'root'@'localhost'=PASSWORD('mynewpasword');`

这里`'root'@'localhost'`做到了，命令奏效了。

希望这对某人有益。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-15T17:38:14.447

如果您使用的是 PHPMyAdmin，则必须以 root 身份登录才能更改 root 密码。在用户中输入root而不是将密码留空而不是更改密码。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-03-24T09:22:36.440

就我而言，我刚刚重命名了 Mysql 用户，该用户将在基于 gui 的数据库工具 (DbVisualizer) 上更改他的密码。我尝试“设置密码”的终端不起作用（MySQL 错误 #1133）。

然而，[这个答案](https://stackoverflow.com/a/18367819/732328)对我有用，即使在更改密码后，“SET PASSWORD”命令也不起作用。

关闭终端并打开新终端后，该命令运行良好。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-01-31T10:51:08.337

我想现在答案就在这里：[https ://bugs.mysql.com/bug.php?id=83822](https://bugs.mysql.com/bug.php?id=83822)

所以，你应该写：

将 mydb.* 上的所有权限授予 myuser@'xxx.xxx.xxx.xxx' 由 'mypassword' 识别；

我认为这可能可行：

为 myuser@'xxx.xxx.xxx.xxx' 设置密码'old_password' = PASSWORD('new_password');****

# php - `where` 子句中的未知列

> ID：12877465
> 
> 赞同：1
> 
> 时间：2012-10-13T22:09:16.360
> 
> 标签：php, mysql

我收到标题中描述的错误：

```
Unknown column 'FeedbackType' in 'where clause' 
```

但我不明白为什么。这是我的查询：

```
SELECT SQL_CALC_FOUND_ROWS `Appointments`.ID, FeedbackType, FeedbackSubType 
FROM `UserFeedback`
INNER JOIN `Appointments` ON `Appointments`.ID = `UserFeedback`.Appointments_ID 
INNER JOIN `Reasons` ON `UserFeedback`.FeedbackSubType = `Reasons`.ID  
WHERE `FeedbackType` = 1  ORDER BY `Appointments`.ID ASC
LIMIT 0, 10 
```

`FeedbackType`是表中的一列`UserFeedback`，大小写正确，已经检查了几次。

为了完整起见，这是表模式：

```
CREATE TABLE IF NOT EXISTS `UserFeedback` 
(
   ID bigint(20) NOT NULL AUTO_INCREMENT,
   FeedbackType int(4) NOT NULL,
   FeedbackSubType int(4) NOT NULL,
   Notes varchar(170) NULL,
   Appointments_ID bigint(20) NOT NULL,
   IpTracking_ID bigint(20) NOT NULL,
   PRIMARY KEY (ID),
   FOREIGN KEY (Appointments_ID) REFERENCES Appointments(Id), 
   FOREIGN KEY (IpTracking_ID) REFERENCES IpTracking(Id)    
)
ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

可能是什么问题？

**[编辑]**

这些变体也不起作用（因为`FeedbackType`不包含保留字/字符并且只属于`UserFeedback`表格）：

```
... WHERE UserFeedback.FeedbackType = 1
... WHERE `UserFeedback`.`FeedbackType` = 1
... WHERE FeedbackType = '1'
etc. 
```

（实际上我认为他们没有理由这样做）

**[编辑 2]**

我跑`SELECT * FROM UserFeedback`以确保它确实包含该列，并且我得到了几行，所有行都包含该列（嗯，`INSERT`s 工作没有错误）。

对于提到的每个变体，我总是在`WHERE`子句中得到相同的错误。如果我省略该`WHERE`子句，我会得到未经过滤的结果（包括`FeedbackType`这些结果中的列），所以这真的很混乱。

**[解决方案]**

出于某种原因，正如@MarinSagovac[在他的第二个片段中建议的](https://stackoverflow.com/a/12877506/1488067)`WHERE`那样，将查询替换为内部的条件已修复：`INNER JOIN`

```
SELECT SQL_CALC_FOUND_ROWS `Appointments`.ID, FeedbackType, FeedbackSubType 
FROM `Appointments`
INNER JOIN `UserFeedback` ON `Appointments`.ID = `UserFeedback`.Appointments_ID 
   AND `UserFeedback`.FeedbackType = 1
INNER JOIN `Reasons` ON `UserFeedback`.FeedbackSubType = `Reasons`.ID  
ORDER BY `Appointments`.ID ASC
LIMIT 0, 10 
```

请注意，现在没有`WHERE`子句，但语义应该是一样的，对吧？很明显，该列确实存在，因此错误消息有点误导恕我直言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:11:08.310

您是否在 where 子句中尝试过 UserFeedback.FeedbackType ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:14:21.290

尝试添加反引号：

```
SELECT SQL_CALC_FOUND_ROWS `Appointments`.ID, `FeedbackType`, `FeedbackSubType`
FROM `UserFeedback`
INNER JOIN `Appointments` ON `Appointments`.ID = `UserFeedback`.Appointments_ID 
INNER JOIN `Reasons` ON `UserFeedback`.FeedbackSubType = `Reasons`.ID  
WHERE `FeedbackType` = 1  ORDER BY `Appointments`.ID ASC
LIMIT 0, 10 
```

添加尝试：

```
SELECT SQL_CALC_FOUND_ROWS `Appointments`.ID, FeedbackType, FeedbackSubType 
FROM `UserFeedback`
INNER JOIN `Appointments` ON `Appointments`.ID = `UserFeedback`.Appointments_ID 
INNER JOIN `Reasons` ON `UserFeedback`.FeedbackSubType = `Reasons`.ID  
INNER JOIN `UserFeedback`.`FeedbackType` = 1  ORDER BY `Appointments`.ID ASC
LIMIT 0, 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T22:16:02.587

```
SELECT SQL_CALC_FOUND_ROWS `Appointments`.ID, UserFeedback.FeedbackType, `UserFeedback.FeedbackSubType 
FROM `UserFeedback'
INNER JOIN `Appointments` ON `Appointments`.ID = `UserFeedback`.Appointments_ID 
INNER JOIN `Reasons` ON `UserFeedback`.FeedbackSubType = `Reasons`.ID  
WHERE UserFeedback.FeedbackType = 1  ORDER BY `Appointments`.ID ASC
LIMIT 0, 10 
```

现在就试试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T22:18:47.993

使用myisam时的外键？

这可能是问题所在

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-13T22:37:33.920

在 WHERE 子句中试试这个：

WHERE UserFeedback.FeedbackType = '1'

删除字段名称中的所有引号（'）

# sass - 抽象超类

> ID：12877468
> 
> 赞同：1
> 
> 时间：2012-10-13T22:09:32.177
> 
> 标签：sass

我试图让 SASS 在编程中做一些类似于抽象超类的事情。我已经到了超类部分

```
.box {
  @include span-columns(1);
  @include border-radius(5px);
  height: 360px;
  overflow: hidden;
}

article {
  @extend .box;
}

figure {
  @extend .box;
} 
```

这是一种无需在生成的 CSS 中复制框即可定义框的共性的方法，就像使用 mixin 时那样。但是，此解决方案存在为我并不真正需要和想要的（CSS）类“框”定义规则的缺陷。

可以肯定的是，这是一个小问题，但我仍然想知道是否有办法将“.box”制作为仅在 SASS 预处理期间使用且不会出现在 CSS 中的标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T22:22:46.797

`%`您想使用 a而不是 a来定义您的“超类”`.`

```
%box {
  @include span-columns(1);
  @include border-radius(5px);
  height: 360px;
  overflow: hidden;
}

article {
  @extend %box;
}

figure {
  @extend %box;
} 
```

请注意，这需要版本 3.2+

# c++ - 使用带参数的构造函数创建二维对象数组

> ID：12877475
> 
> 赞同：2
> 
> 时间：2012-10-13T22:09:56.140
> 
> 标签：c++

我正在尝试创建一个二维对象数组。我正在尝试将我创建的类的构造函数设置为将接受参数的构造函数。但是，我不断收到错误消息：

main.cpp:18:37：错误：从“test*”到“const test&”的用户定义转换无效

```
int main()
{
  test arr[9][9];
  char s[9][9];
  int integerArray[9][9];
  for(unsigned int i = 0; i < 9; i++)
  {
    for(unsigned int j = 0; j < 9; j++)
    {
      cin >> s[i][j];
      arr[9][9] = new test(s[i][j]);
    }
  }
  return 0;
} 
```

以测试为类。谁能帮我找出这个错误？我知道新函数返回一个 void 指针，但我怎样才能得到它，以便我的 2d 数组接受参数？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:12:39.757

您的二维数组不是指向`test`对象的指针数组。无论如何，内存是为您的二维数组分配的。所以不需要循环。

除非你改变你的声明

```
test arr[9][9]; 
```

类似于：

```
 test*** arr = new (test**)[rows];

  for(unsigned int i = 0; i < 9; i++)
    {
      for(unsigned int j = 0; j < 9; j++)
      {
         cin >> s[i][j];
         arr[i][j] = new test(s[i][j]);
      }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T09:21:08.500

//具有一个 arg 构造函数的类/无默认构造函数，其 2d 数组需要 // 使用 new 在堆上分配

```
class A
{
    public:

        A(int i):m_i(i)
        {
            cout<<"constructor called i="<<i<<endl;
        }
        ~A()
        {
            cout<<"destructor called i="<<m_i<<endl;
        }
        int get()
        {
            return m_i;
        }
        friend ostream& operator<<(ostream& os, const A& obj);
    private:
        int m_i;
};

ostream& operator<<(ostream& os, const A& obj)
{
    os<<obj.m_i;
    return os;
}

typedef unsigned char Byte;
int main()
{
    int m=4;
    int n=3;
    int s[4][3] = { {1,2,3},
                    {4,5,6},
                    {7,8,9},
                    {10,11,12}
                  };

//Allocate a buffer to hold the array, on heap
    Byte* pBuff = new Byte[sizeof(A)*m*n];
    for(int i=0;i<m;++i)
    {
        for(int j=0;j<n;++j)
        {
             A* p = new (pBuff+sizeof(A)*(n*i+j)) A(s[i][j]);
        }
    }

//Accessing array 
    A (*testArr)[3] = (A (*)[3])pBuff;
    for(int i=0;i<4;++i)
    {
        for(int j=0;j<3;++j)
        {
            cout<<"testArr["<<i<<"]["<<j<<"]="<<testArr[i][j]<<endl;
        }
    }
    //after you are done with the array of objects.
    for(int i=0;i<m;++i)
    {
        for(int j=0;j<n;++j)
        {
             A* p=(A*)(pBuff+sizeof(A)*(i*n+j));
             p->~A(); //call destructor for each object.

        }
    }
    delete[] pBuff; //Delete the buffer.
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T07:41:18.620

在您的代码中，您基本上存在类型不匹配，因为您尝试将指向 X 的指针分配给 X。我假设会发生这种情况，因为您尝试分配 a `test`，但`test`没有默认构造函数。

一个更简单的解决方案是使用带有给定构造函数的向量，它避免了默认构造函数，但在复制构造上有一些开销。

```
std::vector<std::vector<test, test(char(0))> > arr;
char a(0);
for (unsigned int i = 0; i < 9; ++i) {
  for (unsigned int j = 0; j < 9; ++j) {
    std::cin >> a;
    arr[i][j] = test(a);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T23:14:38.393

当您声明数组时，`test arr[9][9];` 分配内存并为每个成员调用默认构造函数。所以你不需要调用`new`来分配新的内存。我假设您的目标是`test`使用从`std::cin`.

然后你有几个选择：

*   最简单的解决方案是使用二维指针数组：

它看起来像：

```
test* arr[9][9];
for(unsigned int i = 0; i < 9; i++)
{
  for(unsigned int j = 0; j < 9; j++)
  {
     cin >> s[i][j];
     arr[i][j] = new test(s[i][j]);
  }
} 
```

*   如果要保留普通`test`对象数组（没有指针），则可以使用：

提供一种`test::set(int)`方法来设置构造后的值。

```
test arr[9][9];
for(unsigned int i = 0; i < 9; i++)
{
  for(unsigned int j = 0; j < 9; j++)
  {
     cin >> s[i][j];
     arr[i][j].set(s[i][j]);
  }
} 
```

`operator=(const test&)`临时构造对象，然后使用（或`operator=(test &&)`在 c++11 中）将其分配给数组中已分配的对象。请注意，这里没有`new`：

```
test arr[9][9];
for(unsigned int i = 0; i < 9; i++)
{
  for(unsigned int j = 0; j < 9; j++)
  {
     cin >> s[i][j];
     arr[i][j] = test(s[i][j]);
  }
} 
```

或者使用placement new（这会在预分配的内存块中构造新对象）：

```
test arr[9][9];
for(unsigned int i = 0; i < 9; i++)
{
  for(unsigned int j = 0; j < 9; j++)
  {
     cin >> s[i][j];
     new(&arr[i][j]) test(s[i][j]);
  }
} 
```

*   最后一个：如果您没有特定的理由使用静态二维数组，请使用一些 STL 容器。

# sql - SQL：在不同表之间搜索至少 2 个相似的行

> ID：12877476
> 
> 赞同：0
> 
> 时间：2012-10-13T22:09:59.603
> 
> 标签：sql, search

这是我当前的设置：
我有 2 个表，**RECIPE**和**INGREDIENTS**。
**RECIPE**在其他数据中保存*ID 。*每个配方需要 X 行**成分。**
一个如何匹配至少 2 种匹配成分的 2 种食谱？
我可以指定必须匹配的成分，但我的问题是当食谱有超过 10 种成分并且我需要两个使用相同 2 成分的食谱时，不知道哪些成分。
对不起，我的英语不是我的自然语言。如果需要，或者如果我不够清楚，我会发布更多详细信息。

实际示例：
食谱 1 有：鱼、土豆和盐。
食谱 2 有：火鸡和米饭。
食谱 3 有：鱼、米饭和盐。
食谱 4 有：火鸡、土豆和盐。

基于配方 1 的结果应为：4
基于配方 2 的结果应为：无
基于配方 3 的结果应为：1
基于配方 4 的结果应为：1
（是的，我需要根据过滤器运行每个配方，而不是这里解释）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:19:39.083

尝试这样的事情：

```
WITH REC_ING AS (
SELECT *
FROM RECIPE AS T1
INNER JOIN
INGREDIENTS AS T2
ON T1.ID = T2.ID)

SELECT *
FROM (
SELECT T1.ID AS ID1, T2.ID AS ID2
FROM REC_ING AS T1
INNER JOIN
REC_ING AS T2
ON T1.INGREDIENT_ID = T2.INGREDIENT_ID 
AND T1.ID != T2.ID) AS JOINED_TAB
GROUP BY ID1, ID2
HAVING COUNT(*) >= 2 
```

这是一个粗略的副本。如果这听起来像您正在寻找的东西，我可以制作一个更详细的示例（包括 SQL Fiddle）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:19:53.007

如果您需要将其扩展到 2 个以上的成分，或者要更详细地解释问题空间以及存在哪些替代查询，请查看有关**[RELATIONAL DIVISION](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)**的扩展文章。

* * *

```
select DISTINCT A.recipe_id, C.recipe_id other_recipe_id
from INGREDIENTS A
join INGREDIENTS B on A.recipe_id = B.recipe_id and A.ingredient < B.ingredient
join INGREDIENTS C on A.recipe_id < C.recipe_id and C.ingredient = A.ingredient
join INGREDIENTS D on C.recipe_id = D.recipe_id and D.ingredient < B.ingredient 
```

A 和 B 是属于同一配方的两种不同成分。使用这些，我们连接到 C 和 D，它们是相同的两种成分 (A=C,B=D)，但其中 C 和 D 属于相同的其他配方。

这将返回共享 2 种成分的每对食谱的不同 ID。您可以通过将名称加入两次配方表来获取实际的配方名称。

# php - 我应该将 Unix 时间戳转换为“小时”时间戳吗？

> ID：12877477
> 
> 赞同：0
> 
> 时间：2012-10-13T22:10:08.570
> 
> 标签：php, mysql, datetime

我正在使用 PHP 和 MySQL。

每次我的一个用户完成给定的操作时，我都需要存储一个 unix 时间戳。我只需要每小时的详细信息级别。有什么理由不应该通过存储类似的东西`(integer)(time()/3600)`而不是完整的时间戳来减少存储空间？我需要对每个用户的每个会话的这个时间戳进行多次查询。

如果我按原样保存时间戳，我计划将它作为一个存储`INT`在 MySQL 中。我需要创建一个结合用户 ID 和时间戳的索引。

如果我将时间戳转换为小时数，我可以将它作为 a 存储`MEDIUMINT`在 MySQL 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:12:20.493

出色地。一个原因：除非时间戳保存为字符串，或者我们已经过了 2038 年，否则它实际上不会使用更少的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:18:57.733

通常，如果您在表上插入的时间戳数据少于 5 百万，这将减少数据库中的空间。以其他方式，您不需要将性能保存为数据库中的无符号 (10) 整数，而不是时间戳或日期/时间。这将加快索引和搜索数据的速度。

# c++ - 一个类/文件的未定义引用错误

> ID：12877480
> 
> 赞同：1
> 
> 时间：2012-10-13T22:10:27.497
> 
> 标签：c++, codeblocks

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我有一个游戏程序，我感到非常沮丧。一切运行良好，我决定通过为每组函数创建单独的文件来清理我的程序。代码很长，包含多个文件，但基本思想如下：

我在 Windows XP 上使用 Code::Blocks IDE

在我的 entity.h 中，我声明了该类的所有函数和变量。在我的 entity.cpp 中，我已经将它包含在我的所有其他文件中。但是我仍然收到大量错误，这些错误告诉我，我对 entity.h 中的所有方法以及所有其他头文件都有未定义的引用。例如，我有一个函数调用 print() 可以更轻松地打印出东西，这是我从 entity.h 文件中调用的第一个方法。我收到此错误：

下面是 print() 的代码：

```
void print(string f) {
 cout<<f<<endl;
} 
```

我怎么称呼它：

```
void Player::win(){
entity e;
e.print("You have defeated the orc"); 
```

} 错误：

```
In function 'ZN6Player3winEv': undefined reference to 'entity::print(std::string)' 
```

是的，我确实有一个实体对象。它也发生在实体类和文件中的每个其他函数中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:13:38.163

```
void print(string f) {
 cout<<f<<endl;
} 
```

应该

```
void entity::print(string f) {
 cout<<f<<endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:16:54.827

```
void print(string f) {
 cout<<f<<endl;
} 
```

是一个全局函数

如果你想打电话

```
e.print("You have defeated the orc"); 
```

那么你需要一个实现

```
void entity::print(string f) 
```

# c# - App.config C# 中的自定义配置部分

> ID：12877484
> 
> 赞同：16
> 
> 时间：2012-10-13T22:10:45.297
> 
> 标签：c#, configuration, custom-configuration

我是 C# 中配置部分的初学者，
我想在配置文件中创建一个自定义部分。谷歌搜索后我尝试过的
配置文件如下：

```
 <?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <sectionGroup name="MyCustomSections">
      <section name="CustomSection" type="CustomSectionTest.CustomSection,CustomSection"/>
    </sectionGroup>
  </configSections>

  <MyCustomSections>
    <CustomSection key="Default"/>
  </MyCustomSections>
</configuration> 
```

CustomSection.cs

```
 namespace CustomSectionTest
{
    public class CustomSection : ConfigurationSection
    {
        [ConfigurationProperty("key", DefaultValue="Default", IsRequired = true)]
        [StringValidator(InvalidCharacters = "~!@#$%^&*()[]{}/;'\"|\\", MinLength = 1, MaxLength = 60)]
        public String Key
        {
            get { return this["key"].ToString(); }
            set { this["key"] = value; }
        }
    }
} 
```

当我使用此代码检索部分时，我收到一条错误消息，提示配置错误。

```
var cf = (CustomSection)System.Configuration.ConfigurationManager.GetSection("CustomSection"); 
```

我错过了什么？
谢谢。

**编辑**
我最终需要的是

```
 <CustomConfigSettings>
    <Setting id="1">
        <add key="Name" value="N"/>
        <add key="Type" value="D"/>
    </Setting>
    <Setting id="2">
        <add key="Name" value="O"/>
        <add key="Type" value="E"/>
    </Setting>
    <Setting id="3">
        <add key="Name" value="P"/>
        <add key="Type" value="F"/>
    </Setting>
</CustomConfigSettings> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-13T22:46:12.083

**应用程序配置：**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <sectionGroup name="customAppSettingsGroup">
      <section name="customAppSettings" type="System.Configuration.AppSettingsSection, System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </sectionGroup>
  </configSections>
  <customAppSettingsGroup>
    <customAppSettings>
      <add key="KeyOne" value="ValueOne"/>
      <add key="KeyTwo" value="ValueTwo"/>
    </customAppSettings>
  </customAppSettingsGroup>
</configuration> 
```

**用法：**

```
NameValueCollection settings =  
   ConfigurationManager.GetSection("customAppSettingsGroup/customAppSettings")
   as System.Collections.Specialized.NameValueCollection;

if (settings != null)
{
 foreach (string key in settings.AllKeys)
 {
  Response.Write(key + ": " + settings[key] + "<br />");
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:13:29.980

尝试使用：

```
var cf = (CustomSection)System.Configuration.ConfigurationManager.GetSection("MyCustomSections/CustomSection"); 
```

您需要节组的名称和自定义节的名称。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-10-07T08:32:09.880

Highlight ConfigurationSection press F1, You will see that the implementation on the MSDN website overrides a property called "Properties" which returns a "ConfigurationPropertyCollection", as your properties have a matching attribute of that type you should be able to populate this collection with your properties if not wrap them in the same way the MS guys have.

# django - 如何在 Linode 服务器上查看 Django 教程中的网页

> ID：12877490
> 
> 赞同：0
> 
> 时间：2012-10-13T22:12:09.177
> 
> 标签：django, linode

我知道我对这篇文章有类似的问题：[远程服务器上的 Django 教程：如何在我的浏览器中查看？](https://stackoverflow.com/questions/5097955/django-tutorial-on-remote-server-how-to-view-in-my-browser)但我无法用它的答案来解决它。

我现在正在玩 Django 框架。我正在尝试在我的 Linode 服务器上做 Django 教程。一切正常，但是当我们必须检查我们拥有的网页时，教程说我们必须检查 `http://127.0.0.1:8000/`服务器。我在 Linode 服务器上只有命令行访问权限，所以我不知道如何从桌面上查看 linode 上的那个网页。我尝试使用类似命令`python manage.py runserver 123.123.123.123:8000`并将 ip 设置为我的 Linode 服务器，但我仍然无法从桌面访问该网页（我确实删除了 8000 端口的防火墙）。有谁知道如何检查我在 Linode 服务器上的 Django 框架中创建的远程网页的更改？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:13:03.207

只是为了确保，您是否尝试在浏览器中访问以下 URL（服务器 IP 地址为 123.123.123.123）？

```
http://123.123.123.123:8000 
```

其次，您是否可以远程登录到端口 8000，以确保您已正确打开防火墙上的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T15:37:14.083

我也遇到了这个问题，我想澄清一下我为其他可能被卡住的人做了什么：

首先，删除端口 8000 的防火墙

```
sudo nano /etc/iptables.firewall.rules
-A INPUT -p tcp --dport 8000 -j ACCEPT 
```

二、重启linode

三、重启开发服务器

```
cd /home/mycode/mysite
python manage.py runserver 123.123.123.123:8000 
```

（你在哪里使用你的IP）

# django - django 在模板中检查当前 url 中是否包含特定单词

> ID：12877491
> 
> 赞同：9
> 
> 时间：2012-10-13T22:12:10.150
> 
> 标签：django

类似于这个问题：

[Django 模板，if 标记基于当前 URL 值](https://stackoverflow.com/q/7462398/1061426)

只有我想检查 url 中是否有单词 - 你知道，比如

```
if a.find(b) == -1 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-13T22:23:32.437

[也许是`in`运营商？](https://docs.djangoproject.com/en/2.0/ref/templates/builtins/#in-operator)

```
{% if b in request.path %}
    hello world!
{% endif %} 
```

如果这不能满足您的需要，则将逻辑移动到您的视图或创建[自定义模板标签。](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-29T14:20:59.950

忘记`request`参数并使用：

```
{% if 'search_term' in request.GET %}
  Hello World!
{% endif %} 
```

# ios - 比较两个 CGRect

> ID：12877496
> 
> 赞同：99
> 
> 时间：2012-10-13T22:12:39.910
> 
> 标签：ios, objective-c, cocoa-touch, comparison, cgrect

我需要检查我的视图框架是否等于给定的 CGRect。我试着这样做：

```
CGRect rect = CGRectMake(20, 20, 20, 20);
if (self.view.frame == rect)
{
    // do some stuff
} 
```

但是，我收到一条错误消息`Invalid operands to binary expression('CGRect' (aka 'struct CGRect') and 'CGRect')`。为什么我不能简单地比较两个`CGRect`s？

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2013-09-16T03:44:04.483

用这个：

```
if (CGRectEqualToRect(self.view.frame, rect)) {
     // do some stuff
} 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-10-13T22:41:41.910

请参阅CGRectEqualToRect()[的文档](https://developer.apple.com/reference/coregraphics/1456516-cgrectequaltorect?language=objc)。

```
bool CGRectEqualToRect ( CGRect rect1, CGRect rect2 ); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-19T16:11:37.527

在 Swift 3 中，它将是：

```
frame1.equalTo(frame2) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-22T22:07:11.600

在 Swift 中，简单地使用`==`or`!=`运算符对我有用：

```
 let rect = CGRect(x: 0, y: 0, width: 20, height: 20)

    if rect != CGRect(x: 0, y: 0, width: 20, height: 21) {
        print("not equal")
    }

    if rect == CGRect(x: 0, y: 0, width: 20, height: 20) {
        print("equal")
    } 
```

调试控制台打印：

```
not equal
equal 
```

# javascript - What is the logic from the else block on this code?

> ID：12877504
> 
> 赞同：0
> 
> 时间：2012-10-13T22:14:02.397
> 
> 标签：javascript

I'm having a hard time understanding the else block. I know it's supposed to raise the base parameter to the exponent parameter. But how does it work?

```
var power = function(base, exponent){

    if (exponent === 0){
        return 1;
    }
    else{
        return base * power(base, exponent - 1);
    }

};

power(2, 2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:23:36.223

for an input `power(2/*base*/,2/*exponent*/)`

**ITERATION** 1: Since `2/*exponent*/` is not equal to `0`: on the entry, it executes the `else` part.

hence it should return `2 * power(2,(2-1)/*which is 1*/)`

**ITERATION 2**: again, there is a call to `power()` function with arguments `2/*base*/ and 1/*exponent*/` `power(2,1)` is executed in `else` part : `returns 2 * power(2,0)`

**ITERATION 3**: again there is a call to `power()` function with arguments `2/*base*/ and 0/*exponent*/`

> Since exponent is 0, it executes the if part and returns 1, which completes the second iteration returning 2 to it. that completes the first iteration returning 4 from it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:26:12.147

```
power(base, exponent - 1) 
```

is really just `base * power(base, exponent - 1)`. But if we keep thinking about what is happening in those function calls, we see this:

```
base * ... pow(base, exponent - n) 
```

Let's try `power(2, 4)`:

```
2 * (2 * (2 * (2 * (1))))

2 * power(2, 4 - 1); 
```

`power(2, 4 - 1)` simplifies to

```
2 * power(2, 3 - 1) 
```

which simplifies to

```
2 * power(2, 2 - 1) 
```

which simplifies to

```
2 * power(2, 1 - 1) 
```

and that simplifies to `1` since `exponent` will be `0`. When we put it all together this is what we get:

```
2 * 2 * 2 * 2 * 1 
```

# regex - Acme 中的正则表达式“行号”

> ID：12877517
> 
> 赞同：1
> 
> 时间：2012-10-13T22:16:35.090
> 
> 标签：regex, plan-9

在 Russ Cox 的[Acme 截屏视频中](http://research.swtch.com/acme)，他能够像这样使用正则表达式“行号”：

```
/Users/rsc/demo/hello.go:/^func/,/^}/ 
```

右键单击打开`hello.go`并选择从`func`函数体末尾的所有内容。

这个命令似乎不是开箱即用的。这个设置是在哪里做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:15:46.120

您需要在按下鼠标右键的同时选择整行。右击只会尝试去地址，不做匹配。您可以在视频中看到，这条线以深绿色突出显示。

# java - GCMIntentService onRegistered 方法除了 regId 还需要向我的服务器发送其他信息

> ID：12877520
> 
> 赞同：0
> 
> 时间：2012-10-13T22:16:46.610
> 
> 标签：java, android, google-cloud-messaging

使用 Google 的 GCM 服务构建 Android 应用程序。

我已经在 GCMIntentService 类中实现了 onRegistered 方法。

问题是我想将主要活动中来自 EditText 的电子邮件与 regId 一起发送到我的服务器。我不确定如何从我的主要活动中获取电子邮件并在 onRegistered 方法中使用它。

我知道如何从没有问题的主要活动中的 EditText 框中正确获取字符串。它让我失望，因为它在一个单独的班级。

我的最终结果是我想发送他们在 EditText 中输入的电子邮件，当他们单击注册电子邮件时，他们输入的电子邮件和他们的 regId 将存储在我服务器上的数据库中。

我目前有工作代码，只在 onRegistered 方法中使用硬编码名称存储他们的 regId。只是想看看如何获​​取附加信息，以便我可以将其与 regId 一起发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:25:17.990

当用户按下按钮时，您可以将文本从以下位置`EditText`放入：

*   文件
*   数据库
*   `SharedPreferences`
*   静态数据成员

然后从`onRegistered()`.

# c++ - 人类可读的 type_info.name()

> ID：12877521
> 
> 赞同：9
> 
> 时间：2012-10-13T22:16:48.100
> 
> 标签：c++, typeid

我用 编译了以下代码`g++`，并得到了输出，它写在注释中。

```
template<class T>
void foo(T t) { cout << typeid(t).name() << endl; }

int main() {
    foo("f");       //emits "PKc"
    foo(string());  //emits "Ss"
} 
```

我知道，这`type_info.name()`不是标准化的，但是有没有办法获得人类可读的结果？

像下面这样的东西就足够了

```
const char *
class string 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-13T22:28:04.367

您可以为此使用[abi::__cxa_demangle](http://gcc.gnu.org/onlinedocs/libstdc++/libstdc++-html-USERS-4.3/a01696.html)（demangle 函数取自[此处](https://stackoverflow.com/questions/9640256/define-multiple-methods-with-parameters-from-variadic-templates)），只需记住调用者负责释放返回：

```
#include <cxxabi.h>
#include <typeinfo>
#include <iostream>
#include <string>
#include <memory>
#include <cstdlib>

std::string demangle(const char* mangled)
{
      int status;
      std::unique_ptr<char[], void (*)(void*)> result(
        abi::__cxa_demangle(mangled, 0, 0, &status), std::free);
      return result.get() ? std::string(result.get()) : "error occurred";
}

template<class T>
void foo(T t) { std::cout << demangle(typeid(t).name()) << std::endl; }

int main() {
    foo("f");            //char const*
    foo(std::string());  //std::string
} 
```

[ideone](http://ideone.com/L3T3p)上的示例。

# c# - 不能设置PhoneApplicationPage的模板

> ID：12877524
> 
> 赞同：1
> 
> 时间：2012-10-13T22:16:56.960
> 
> 标签：c#, windows-phone-7, templates, windows-phone

我想设置我的 PhoneApplicationPage 的模板。当我尝试这段代码时：

```
<phone:PhoneApplicationPage.Template>
    <ControlTemplate>
        <Grid>
            <ContentPresenter/>
        </Grid>
    </ControlTemplate>
</phone:PhoneApplicationPage.Template> 
```

我收到此“xaml”错误：

```
4011 An error has occurred. 
```

但是当我尝试这个时：

```
<phone:PhoneApplicationPage.Style>
    <Style TargetType="mpc:PhoneApplicationPage">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <Grid>
                        <TextBlock Text="Test"/>
                        <ContentPresenter/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>                
    </Style>
</phone:PhoneApplicationPage.Style> 
```

我没有收到任何错误，但没有任何反应。

我想知道为什么我不能将自己的模板设置为 PhoneApplicationPage。

谢谢回答。

***注意**：我有BaseFormPage，应该使用这个模板，其他派生的页面内容会有所不同，但是模板是一样的，都是从BaseFormPage派生的。*

# javascript - 使用脚本标签将参数传递给 JavaScript

> ID：12877527
> 
> 赞同：0
> 
> 时间：2012-10-13T22:17:38.403
> 
> 标签：javascript, arguments, client-side, long-polling, script-tag

[我需要使用脚本标签 long polling](http://en.wikipedia.org/wiki/Comet_%28programming%29#Script_tag_long_polling)来实现跨站comet http 服务器推送机制。（呼……）为此，我将脚本标签动态插入到 DOM 中，服务器发回简短的 js 脚本，这些脚本只是调用处理传入消息的本地回调函数。我试图找出一种方法将这些回调调用中的每一个与发送它的脚本标签相关联，以将传入的回复与其相应的请求相匹配。

显然，我可以简单地在 GET url 中包含一个请求 ID，然后将其返回到服务器生成的 js 脚本中，但这会产生一堆不必要的流量，并且不会让我觉得特别优雅或聪明。

我想做的是以某种方式将请求 ID 与我生成的脚本标记相关联，然后从从该脚本标记内部调用的回调函数中读出该请求 ID。这样，所有的请求管理都将保留在客户端上。

这让我想到了以下问题：**有没有办法向浏览器询问当前正在执行的脚本标签的 DOM 元素，所以我可以使用标签元素将参数传递给包含的 javascript？**

我找到了这个线程：

[获取当前执行的、动态附加的脚本标签](https://stackoverflow.com/questions/5261300/getting-the-currently-executing-dynamically-appended-script-tag)

这正是在问这个问题，但是接受的答案对我没有用，因为它仍然需要在服务器返回的 js 脚本中膨胀（在脚本中设置标记变量）并且它依赖于脚本的唯一文件名，我没有。

此外，这个线程是相关的：

[如何引用加载当前执行脚本的脚本标签？](https://stackoverflow.com/questions/403967/how-may-i-reference-the-script-tag-that-loaded-the-currently-executing-script)

并且，除其他外，建议简单地抓取 DOM 中的最后一个脚本，因为它们是按顺序执行的。但这似乎只在页面加载时有效，而不是在动态添加脚本并且可能以独立于其插入的顺序完成加载的情况下。

有什么想法吗？

PS：我正在寻找一个**仅限客户端的**解决方案，即没有请求 ID 或唯一的回调函数名称或其他需要发送到服务器并由服务器处理的非有效负载数据。我希望服务器（理论上）能够返回两个 100% 相同的脚本，并且客户端仍然能够正确关联它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:43:42.293

可能有在脚本上使用 onload/onreadystate 事件的解决方案。我可以将这些事件传递给带有我的请求 ID 的闭包函数。然后，回调函数不会立即处理服务器回复，而是将其存储在全局变量中。然后，onload/onreadystate 处理程序获取最后存储的回复并用它知道的请求 ID 标记它，然后处理回复。

为此，我需要能够依赖事件的顺序。如果 onload 总是在相应的脚本标签完成执行**后**立即执行，这将很好地工作。但是，如果我同时加载了两个标签并且它们同时返回，并且浏览器有可能同时执行这两个标签，然后执行这两个 onload/onreadystate 事件，那么我会以这种方式放弃一个回复。

有人对此有任何见解吗？

.

这里有一些代码来证明这一点：

```
function loadScript(url, requestID) {
  var script = document.createElement('script');
  script.setAttribute("src", url);
  script.setAttribute("type", "text/javascript");
  script.setAttribute("language", "javascript");
  script.onerror = script.onload = function() {
    script.onerror = script.onload = script.onreadystatechange = function () {}
    document.body.removeChild(script);
    completeRequest(requestID);
  }
  script.onreadystatechange = function () {
    if (script.readyState == 'loaded' || script.readyState == 'complete') {
      script.onerror = script.onload = script.onreadystatechange = function () {}
      document.body.removeChild(script);
      completeRequest(requestID);
    }
  }
  document.body.appendChild(script);
}

var lastReply;

function myCallback(reply) {
  lastReply = reply;
}

function completeRequest(requestID) {
  processReply(requestID, lastReply);
}

function processReply(requestID, reply) {
  // Do something
} 
```

现在，服务器只返回表单的脚本

```
myCallback(message); 
```

并且完全不需要担心请求 ID 等，并且始终可以使用相同的回调函数。

问题是：如果我有两个脚本“同时”返回，这是否可能导致以下调用顺序：

```
myCallback(message1);
myCallback(message2);
completeRequest(requestID1);
completeRequest(requestID2); 
```

如果是这样，我会放弃对请求 1 的实际回复，并错误地将对请求 2 的回复与请求 1 关联起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:35:28.580

我知道你想避免讨论改变方法，但这确实是你需要做的。

首先，添加到 DOM 以触发轮询请求的每个脚本标签都是一次性的，即每个脚本标签都需要在达到其目的后立即从 DOM 中删除。否则，您最终会用数百或更多死脚本标签淹没您的客户端 DOM。

一个很好的可比较示例是 jsonp 实现。您创建一个客户端命名函数，创建脚本标记以发出远程请求，并在请求中传递函数名称。响应脚本将 json 对象包装在具有名称的函数调用中，然后在返回时执行该函数并将 json 有效负载传递给您的函数。执行后，客户端函数随即被删除。jQuery 通过创建随机生成的名称来做到这一点（它们存在于全局上下文中，这实际上是该过程工作的唯一方式），然后在完成后删除回调函数。

关于长轮询，它的过程非常相似。本质上，响应函数调用不需要知道也不关心启动它的脚本标签。

让我们看一个示例脚本：

```
window.callback = function(obj){
    console.log(obj);   
}

setInterval(function(){

    var remote = document.createElement('script');
    remote.src = 'http://jsonip.com/callback';
    remote.addEventListener('load', function(){
        remote.parentNode.removeChild(remote);
    },false);

    document.querySelector('head').appendChild(remote);

}, 2000);​ 
```

该脚本不保留对脚本元素的引用，因为它们是一次性的。一旦他们的工作完成，他们就会立即被枪杀。

该示例可以稍微修改为不使用 setInterval，在这种情况下，您可以将 setInterval 替换为命名函数，并将逻辑添加到远程加载事件中，以在加载事件完成时触发该函数。这样，脚本标记事件之间的时间取决于服务器的响应时间，并且更接近实际的长轮询过程。

您可以通过使用排队系统来管理您的回调来进一步扩展它。如果您有不同的函数来响应返回的不同类型的数据，这可能会很有用。

或者，可能更好的是，在您的回调函数中登录，该函数处理从每个轮询返回的数据并在该点执行任何其他特定的客户端逻辑。这也意味着您只需要 1 个回调函数，并且可以避免创建随机生成的回调名称。

如果您需要更多帮助，请对任何具体问题发表评论，我可以更详细地介绍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T23:31:09.563

这绝对是可能的，但你需要一个小技巧。**这是一种称为[JSONP](http://en.wikipedia.org/wiki/JSONP)**的常用技术。

在 JavaScript 中：

```
var get_a_unique_name = (function () {
    var counter = 0;
    return function () {
        counter += 1;
        return "function_" + counter;
    }
}()); // no magic, just a closure

var script = document.createElement("script");
var callback_name = get_a_unique_name();
script.src = "/request.php?id=12345&callback_name=" + callback_name;

// register the callback function globally
window[callback_name] = function (the_data) {
    console.log(the_data);
    handle_data(the_data); // implement this function
};

// add the script
document.head.appendChild(script); 
```

您可以拥有的服务器端：

```
$callback_name = $_GET["callback_name"];
$the_data = handle_request($_GET["id"]); // implement handle_request
echo $callback_name . "(" . json_encode($the_data) . ");";
exit; // done 
```

返回的脚本`/request.php?id=12345&callback_name=XXX`将如下所示：

```
function_0({ "hello": "world", "foo" : "bar" }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T00:08:22.900

这应该很简单。每个服务器“连接”只有一个脚本元素，它可以很容易地存储在一个作用域的静态变量中。

```
function connect(nameOfCallback, eventCallback) {
    var script;
    window[nameOfCallback] = function() { // this is what the response invokes
        reload();
        eventCallback.call(null, arguments);
    };
    reload();

    function reload() {
        if (script && script.parentNode)
            script.parentNode.removeChild(script);
        script = document.createElement(script);
        script.src = "…";
        script.type = "text/javascript";
        document.head.appendChild(script);
        // you might use additional error handling, e.g. something like
        // script.onerror = reload;
        // but I guess you get the concept
    }
} 
```

# wpf - 在分组的网格视图的末尾添加一个按钮

> ID：12877530
> 
> 赞同：0
> 
> 时间：2012-10-13T22:18:17.523
> 
> 标签：wpf, xaml, windows-8, microsoft-metro, windows-store-apps

我正在考虑在网格视图的“末尾”添加一个按钮。

这个想法是我有一个分组视图，显示这些组中的组和项目。我只显示组内的一些项目，并希望在显示的项目末尾显示“加载更多”按钮。

![在此处输入图像描述](../Images/8b8a77e47add3c065898fd8c6adf48df.png)

我在标准分组项目页面中尝试了各种事情，但都没有运气。

有什么好主意吗？

提前致谢

金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T02:42:23.373

最简单的答案是遵循大多数现有应用程序使用的方法：允许用户单击标题以显示所有项目。

您还可以添加“加载更多”按钮，就好像它是一个普通的网格项目一样。然后，使用不同的模板和 ItemTemplateSelector 设置不同的样式。

最后，最复杂（和灵活）的解决方案是将“加载更多”按钮放在 GridView 上方，并在 GridView 滚动时手动同步其位置......

# php - SQL：根据related_id和related_table进行选择。ID 存储在以表命名的数组中

> ID：12877532
> 
> 赞同：2
> 
> 时间：2012-10-13T22:18:24.100
> 
> 标签：php, mysql, sql, select

我有一张名为活动的表格，看起来像这样

* * *

## 编号 | 相关ID | 相关表 | ...

还有 3 个数组，每个数组都以一个表命名，包含 ID：

```
$clubs[1,2,3]; $vendors[4,5,6]; $users[7,8,9]; 
```

如何选择数组中对应的俱乐部、供应商和用户的活动？我只知道非常简单的 SQL，但我确信有办法做到这一点。

如果可能的话，我希望在 1 个选择语句中执行此操作。否则我知道如何在 3 中做“在哪里”。

回答：

以下是我如何在 1 次选择中完成所有活动：

```
'SELECT * from activities where (related_table = \'clubs\' and related_id in ('.$clubs_string.')) or  (related_table = \'vendors\' and related_id in ('.$vendors_string.')) or (related_table = \'users\' and related_id in ('.$users_string.'));'; 
```

请参阅 Morgan Wilde 关于 implode() 将数组转换为字符串的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:40:44.900

好吧，如果我的问题是正确的，那么查找与保存在数组中的俱乐部 ID 相关的所有活动的方法应该是......

```
$clubs_string = implode(",", $clubs); // convert your array into a comma separated string 
```

完成排序后，发送如下查询

```
SELECT `id` FROM `activities` WHERE `related_id` IN ({$clubs_string}) AND `related_table` = 'club_table_name' 
```

您可以对您拥有的所有其他表类型重复相同的逻辑。

在这里您可以找到一些简洁的 MySQL WHERE IN 示例 - [http://www.tutorialspoint.com/mysql/mysql-in-clause.htm](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)

希望有帮助！

# xslt-2.0 - 查找属性代码等于 url 上传递的参数的子项 - XSL

> ID：12877533
> 
> 赞同：1
> 
> 时间：2012-10-13T22:18:42.897
> 
> 标签：xslt-2.0

在这个动态网站上，网址看起来像这样：departments/CHEM.html

CHEM 是一个参数。

```
 <xsl:param name="dep" select="'CHEM'" /> 
```

下面是一段xml

```
<course acad_year="2012" cat_num="5085" offered="Y">
  <term term_pattern_code="1" fall_term="Y" spring_term="N">fall term</term>
  <department code="CHEM">
     <dept_long_name>Department of Chemistry and Chemical Biology</dept_long_name>
     <dept_short_name>Chemistry and Chemical Biology</dept_short_name>
  </department>
</course> .... 
```

我试图让 dept_short_name 在我的 H1 标签上使用，但我没有成功。到目前为止我试过了

```
<h2><xsl:value-of select="course/department/[code={@$dep}]"/></h2> 
```

有什么建议么？？？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:29:50.110

我会试试这个：

```
<xsl:value-of select="course/department[@code=$dep]/dept_short_name/text()"/> 
```

这就是说：找到 code 属性是参数“dep”的值的部门元素（在 course 元素内），然后找到 dept_short_name 子元素，然后获取该元素内的文本。

你必须用`@`来表示“code”是一个属性，但“dep”不应该有它。我认为该`{}`符号用于样式表的非 XSLT 元素的属性内部，因此我不会在`value-of`表达式中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T23:31:54.433

**只需使用**：

```
<xsl:value-of select="course/department[@code eq $dep]/dept_short_name"/> 
```

**记住**：

在 XPath 2.0 (XSLT 2.0) 中，使用`eq`运算符进行值比较——它比一般比较运算符更有效`=`，只有当它的至少一个操作数是一个序列时才需要使用它。

# python - Python Qt QListWidget 项目拖放

> ID：12877534
> 
> 赞同：0
> 
> 时间：2012-10-13T22:18:52.507
> 
> 标签：python, qt, qt4, pyqt, pyqt4

如何将 QListWidgetItem 移动另一行？我可以使用拖放方法吗？
示例：QListWiget 项目：

```
item1
item2
item3
item4 
```

item3 拖放。后：

```
item3
item1
item2
item4 
```

我看了这个 [资源](http://qt-project.org/doc/qt-4.8/qlistwidget.html#dropMimeData)，但我什么都不懂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T07:50:02.803

`dropMimeData`如果您只需要内部拖放，则不需要。这用于从小部件中删除的东西。项目视图（及其小部件伴侣）带有实现的内部拖放移动。您需要[`InternalMove`](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#DragDropMode-enum)使用[`setDragDropMove`](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#dragDropMode-prop).

简单的例子：

```
import sys
from PyQt4 import QtGui

app = QtGui.QApplication(sys.argv)

lw = QtGui.QListWidget()
lw.setDragDropMode(lw.InternalMove)
for i in range(10):
    item = QtGui.QListWidgetItem('item %d' % i, lw)
lw.show()

sys.exit(app.exec_()) 
```

# session - 不保留会话值

> ID：12877535
> 
> 赞同：1
> 
> 时间：2012-10-13T22:18:52.887
> 
> 标签：session, sinatra, jruby, trinidad-gem

我在 Trinidad 服务器上使用 JRuby（最新，1.7 RC2）/Sinatra 混合，以获取背景信息。

```
get "/" do
    @user = session[:user] || [3,2]
    puts session[:user]
    haml :home
end

get "/signed_in" do
    "#{session[:loggedin]}"
end

post "/signup" do
    user = User.create(:username => params[:username], :password => Digest::SHA1.hexdigest(params[:password]))
    session[:user] = user
    session[:loggedin] = true
    puts session[:user]
end' 
```

我期望的输出是（带评论）：

```
# blank line
#<User:0x4049839a>
#<User:0x4049839a> 
```

但我真正得到的是：

```
# blank line
#<User:0x4049839a>
# blank line 
```

并且在发布之后，`/signed_in`仍然没有输出价值，当它真的应该是`true`。

为什么不保留这些值？不，我没有使用shotgun，我确实启用了会话，并且我确实设置了会话密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:38:54.803

您不能将 DataMapper 资源保留在会话变量中。而是将用户对象的密钥放在会话变量中，并使用 before 助手在整个应用程序中设置`@user = User.first(session[:user])`和使用实例变量`@user`

此外，您不需要`session[:loggedin]`输入，只需使用`@user.nil?`

# arrays - Excel for MAC 2011 中的变量数组名称

> ID：12877542
> 
> 赞同：0
> 
> 时间：2012-10-13T22:19:40.760
> 
> 标签：arrays, macos, excel

我有一段代码使用了大约一百个数组名称（我下面的示例只使用了三个），每个包含不同数量的元素。我正在尝试使用变量“i”引用数组名称，其中“i”用于索引数组名称和工作表名称。

以“Selection.Replace”开头的代码行因“应用程序定义或对象定义错误”而失败这在 Excel 2007 for windows 中运行良好，但在 Excel for MAC 2011 中失败。

我应该进行哪些更改才能使其重新工作（除了仅使用 Excel 2007 或 2010）？

干杯!

```
hist1 array("a","b","c","d","x")
hist2 array("a","e","f","g")
hist3 array("a","b","c","d","g","x")

i = 1
Do While i < 4
    j = 0
    Select Case i
        Case 1
            cnt = 4
        Case 2
            cnt = 3
        Case 3
            cnt = 5
    End Select
    Do While j < cnt
        Sheets(i).Select
        Selection.Replace What:="hist" & i & "(" & cnt & ")", Replacement:="", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
        j = j + 1
    Loop
   i = i + 1
Loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:01:43.783

我弄清楚了问题所在。似乎 SearchFormat 和 ReplaceFormat 在此版本的 Excel 中不是有效参数

# c++ - 如何避免对非构造函数进行隐式转换？

> ID：12877546
> 
> 赞同：66
> 
> 时间：2012-10-13T22:19:59.777
> 
> 标签：c++, function, casting, implicit-conversion

如何避免对非构造函数进行隐式强制转换？
我有一个将整数作为参数的函数，
但该函数也将采用字符、布尔值和长整数。
我相信它通过隐式转换它们来做到这一点。
我怎样才能避免这种情况，使函数只接受匹配类型的参数，否则将拒绝编译？
有一个关键字“explicit”，但它不适用于非构造函数。:\
我该怎么办？

以下程序编译，虽然我不希望它：

```
#include <cstdlib>

//the function signature requires an int
void function(int i);

int main(){

    int i{5};
    function(i); //<- this is acceptable

    char c{'a'};
    function(c); //<- I would NOT like this to compile

    return EXIT_SUCCESS;
}

void function(int i){return;} 
```

*请务必指出任何对术语和假设的滥用

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-10-13T22:26:36.383

定义匹配所有其他类型的函数模板：

```
void function(int); // this will be selected for int only

template <class T>
void function(T) = delete; // C++11 
```

这是因为具有直接匹配的非模板函数总是首先被考虑。然后考虑直接匹配的功能模板 - 所以永远`function<int>`不会使用。但是对于其他任何东西，比如 char，`function<char>`将被使用 - 这会给你的编译错误：

```
void function(int) {}

template <class T>
void function(T) = delete; // C++11 

int main() {
   function(1);
   function(char(1)); // line 12
} 
```

错误：

```
prog.cpp: In function 'int main()':
prog.cpp:4:6: error: deleted function 'void function(T) [with T = char]'
prog.cpp:12:20: error: used here 
```

这是 C++03 方式：

```
// because this ugly code will give you compilation error for all other types
class DeleteOverload
{
private:
    DeleteOverload(void*);
};

template <class T>
void function(T a, DeleteOverload = 0);

void function(int a)
{} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-13T22:22:39.633

您不能直接使用，因为 a`char`会自动提升为`int`.

不过，您可以使用一个技巧：创建一个以 a`char`作为参数的函数并且不实现它。它会编译，但你会得到一个链接器错误：

```
void function(int i) 
{
}
void function(char i);
//or, in C++11
void function(char i) = delete; 
```

使用参数调用函数`char`将破坏构建。

见[http://ideone.com/2SRdM](http://ideone.com/2SRdM)

术语：非构造函数？你的意思是一个不是构造函数的函数吗？

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2021-04-08T13:53:01.020

# 8 年后（PRE-C++20，见编辑）：

如果您不介意模板函数（您可能会介意），最现代的解决方案是使用带有`std::enable_if`and的模板函数`std::is_same`。

即：

```
// Where we want to only take int
template <class T, std::enable_if_t<std::is_same_v<T,int>,bool> = false>
void func(T x) {

} 
```

# 编辑 (c++20)

我最近切换到 c++20，我相信有更好的方法。**如果您的团队或您不使用 c++20，或者不熟悉新概念库，请不要使用它。**这要好得多，并且是新 c++20 标准中概述的预期方法，以及新功能的作者（阅读 Bjarne Stroustrup[在这里](https://www.stroustrup.com/good_concepts.pdf)写的论文。

```
template <class T>
    requires std::same_as(T,int)
void func(T x) {
    //...
} 
```

## 小编辑（概念的不同模式）

以下是一个更好的方法，因为它解释了你的理由，有一个明确的 int。如果您经常这样做，并且想要一个好的模式，我会执行以下操作：

```
template <class T>
concept explicit_int = std::same_as<T,int>;

template <explicit_int T>
void func(T x) {

} 
```

## 小编辑2（我保证的最后一个）

也是实现这种可能性的一种方法：

```
template <class T>
concept explicit_int = std::same_as<T,int>;

void func(explicit_int auto x) {

} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-13T22:37:16.867

`function`这是一个通用解决方案，如果使用除 int 之外的任何内容调用，则会在编译时导致错误

```
template <typename T>
struct is_int { static const bool value = false; };

template <>
struct is_int<int> { static const bool value = true; };

template <typename T>
void function(T i) {
  static_assert(is_int<T>::value, "argument is not int");
  return;
}

int main() {
  int i = 5;
  char c = 'a';

  function(i);
  //function(c);

  return 0;
} 
```

它的工作原理是允许参数的任何类型起作用，但`is_int`用作类型级别的谓词。的泛型实现`is_int`具有 false 值，但 int 类型的显式特化具有 true 值，因此静态断言保证参数具有精确的类型，`int`否则会出现编译错误。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-17T19:28:47.237

对于 C++14（我相信 C++11），您也可以通过重载右值引用来禁用复制构造函数：

示例：假设您有一个基`Binding<C>`类，`C`基`Constraint`类或继承类在哪里。假设您`Binding<C>`在向量中按值存储，并且传递对绑定的引用，并且希望确保不会导致隐式复制。

您可以通过删除`func(Binding<C>&& x)`（根据 PiotrNycz 的示例）来执行右值引用特定情况。

片段：

```
template<typename T>
void overload_info(const T& x) {
  cout << "overload: " << "const " << name_trait<T>::name() << "&" << endl;
}

template<typename T>
void overload_info(T&& x) {
  cout << "overload: " << name_trait<T>::name() << "&&" << endl;
}

template<typename T>
void disable_implicit_copy(T&& x) = delete;

template<typename T>
void disable_implicit_copy(const T& x) {
  cout << "[valid] ";
  overload_info<T>(x);
}

...

int main() {
  Constraint c;
  LinearConstraint lc(1);

  Binding<Constraint> bc(&c, {});
  Binding<LinearConstraint> blc(&lc, {});

  CALL(overload_info<Binding<Constraint>>(bc));
  CALL(overload_info<Binding<LinearConstraint>>(blc));

  CALL(overload_info<Binding<Constraint>>(blc));

  CALL(disable_implicit_copy<Binding<Constraint>>(bc));
  // // Causes desired error
  // CALL(disable_implicit_copy<Binding<Constraint>>(blc));
} 
```

输出：

```
>>> overload_info(bc)
overload: T&&

>>> overload_info<Binding<Constraint>>(bc)
overload: const Binding<Constraint>&

>>> overload_info<Binding<LinearConstraint>>(blc)
overload: const Binding<LinearConstraint>&

>>> overload_info<Binding<Constraint>>(blc)
implicit copy: Binding<LinearConstraint>  ->  Binding<Constraint>
overload: Binding<Constraint>&&

>>> disable_implicit_copy<Binding<Constraint>>(bc)
[valid] overload: const Binding<Constraint>& 
```

错误（带有`clang-3.9`in `bazel`，当违规行未注释时）：

```
cpp_quick/prevent_implicit_conversion.cc:116:8: error: call to deleted function 'disable_implicit_copy'
  CALL(disable_implicit_copy<Binding<Constraint>>(blc));
       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

完整源代码：[prevent_implicit_conversion.cc](https://github.com/EricCousineau-TRI/repro/blob/39978e0/cpp_quick/prevent_implicit_conversion.cc#L99)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-13T22:32:07.467

也许您可以使用结构将第二个函数设为私有：

```
#include <cstdlib>

struct NoCast {
    static void function(int i);
  private:
    static void function(char c);
};

int main(){

    int i(5);
    NoCast::function(i); //<- this is acceptable

    char c('a');
    NoCast::function(c); //<- Error

    return EXIT_SUCCESS;
}

void NoCast::function(int i){return;} 
```

这不会编译：

```
prog.cpp: In function ‘int main()’:
prog.cpp:7: error: ‘static void NoCast::function(char)’ is private
prog.cpp:16: error: within this context 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-13T23:09:53.180

好吧，我打算用下面的代码来回答这个问题，但即使它适用于 Visual C++，在产生所需编译错误的意义上，MinGW g++ 4.7.1 接受它，并调用右值引用构造函数！

我认为这一定是一个编译器错误，但我可能是错的，所以——有人吗？

无论如何，这是代码，它*可能*会成为符合标准的解决方案（或者，这可能是我的想法！）：

```
#include <iostream>
#include <utility>      // std::is_same, std::enable_if
using namespace std;

template< class Type >
struct Boxed
{
    Type value;

    template< class Arg >
    Boxed(
        Arg const& v,
        typename enable_if< is_same< Type, Arg >::value, Arg >::type* = 0
        )
        : value( v )
    {
        wcout << "Generic!" << endl;
    }

    Boxed( Type&& v ): value( move( v ) )
    {
        wcout << "Rvalue!" << endl;
    }
};

void function( Boxed< int > v ) {}

int main()
{
    int i = 5;
    function( i );  //<- this is acceptable

    char c = 'a';
    function( c );  //<- I would NOT like this to compile
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-23T10:11:06.233

我首先尝试了 PiotrNycz 的方法（对于 C++03，我被迫将其用于项目），然后我尝试找到一种更通用的方法并提出了这个`ForcedType<T>`模板类。

```
template <typename T>
struct ForcedType {
    ForcedType(T v): m_v(v) {}
    operator T&() { return m_v; }
    operator const T&() const { return m_v; }

private:
    template <typename T2>
    ForcedType(T2);

    T m_v;
};

template <typename T>
struct ForcedType<const T&> {
    ForcedType(const T& v): m_v(v) {}
    operator const T&() const { return m_v; }

private:
    template <typename T2>
    ForcedType(const T2&);

    const T& m_v;
};

template <typename T>
struct ForcedType<T&> {
    ForcedType(T& v): m_v(v) {}
    operator T&() { return m_v; }
    operator const T&() const { return m_v; }

private:
    template <typename T2>
    ForcedType(T2&);

    T& m_v;
}; 
```

如果我没记错的话，这三个专业应该涵盖所有常见的用例。我不确定是否真的需要专门针对右值引用（在 C++11 及更高版本上）或按值的一个就足够了。

如果一个函数有 3 个参数，其第 3 个参数不允许隐式转换，可以这样使用它：

```
function(ParamType1 param1, ParamType2 param2, ForcedType<ParamType3> param3); 
```

# windows - VBScript SendKeys CTRL+LWIN+TAB？

> ID：12877547
> 
> 赞同：6
> 
> 时间：2012-10-13T22:20:33.000
> 
> 标签：windows, vbscript, sendkeys, keystroke

我正在尝试编写一个简单的脚本来发送`CTRL`++的组合`WINDOWS KEY`键`TAB`。下面的代码发送键`CTRL`+ `ALT`+`TAB`

```
Set WshShell = WScript.CreateObject("WScript.Shell")
  WshShell.SendKeys "^%{TAB}" 
```

但是，当我尝试用（又名左 Windows 键）替换“%”（又名`ALT`键）时，它会显示语法错误。`LWIN`

我尝试了以下方法，但没有运气：

```
Set WshShell = WScript.CreateObject("WScript.Shell")
  WshShell.SendKeys "^{LWIN}{TAB}" 
```

```
Set WshShell = WScript.CreateObject("WScript.Shell")
  WshShell.SendKeys "^{LWIN}+{TAB}" 
```

```
Set WshShell = WScript.CreateObject("WScript.Shell")
  WshShell.SendKeys ^{LWIN}+{TAB} 
```

我知道这与在按下其他键时能够按住某些键有关，但我似乎无法正确处理。

可以使用`CTRL`+以编程方式按下 windows 键`ESC`。有没有办法将此组合设置为一个名为的变量`LWIN`，然后使用上述脚本之一？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-23T16:20:46.757

试试这个代码：

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WshShell.SendKeys "+(^{LWIN}{TAB})" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-08T19:23:46.663

以防万一有人在这些年来到这里......
一种解决方法（而不是发送击键）是直接调用应用程序：

```
Set objShell = CreateObject("Shell.Application")
objShell.WindowSwitcher 
```

这将打开`Task Switcher`Windows 应用程序。（与`⊞ windows`+相同`TAB`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T02:36:01.510

我知道您正在寻找 VBscript，但看起来不太可能（纯 VBscript）。这是一篇通过 C# 解决了这个问题的帖子。

[https://stackoverflow.com/a/10367832/1742115](https://stackoverflow.com/a/10367832/1742115)

[如果您想在 vbs 中保留其中的一些内容，此页面](https://stackoverflow.com/questions/769332/how-to-call-c-sharp-dll-function-from-vbscript)将介绍如何从您的 VBscript 调用 C# DLL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-16T08:10:20.033

[我认为您的问题是XY 问题](https://meta.stackexchange.com/q/66377/131247)的一个示例，您真正想要做的是激活 Flip 3D（在窗口之间切换）。您可以通过执行以下`rundll32 DwmApi #105`命令以编程方式执行此操作：

```
CreateObject("WScript.Shell").Run "rundll32 DwmApi #105" 
```

# c# - 委托给泛型类型未知的泛型操作。如何创造这样的东西？

> ID：12877550
> 
> 赞同：0
> 
> 时间：2012-10-13T22:20:53.730
> 
> 标签：c#, generics, delegates

假设我有以下代码。

```
static class Store<T> {
    public static T A;
    public static T B;
    public static T C;
}

public static class Store {
    public static Value A = new Value(<T>(v) => Store<T>.A = v); //just an example of what I want
    public static Value B = new Value(<T>(v) => Store<T>.B = v); //just an example of what I want
    public static Value C = new Value(SetC<T>);  //just an example of what I want

    public static void SetA<T>(T value) { Store<T>.A = value; }
    public static void SetB<T>(T value) { Store<T>.B = value; }
    public static void SetC<T>(T value) { Store<T>.C = value; }
}

public class Value {
    Action<T><T> _valueChanger; //just an example of what I want
    public Value(Action<T><T> valueChanger) { //just an example of what I want
        _valueChanger = valueChanger;
    }

    public void SetValue<T> (T value) {
        _valueChanger<T>(value); //just an example of what I want
    }
} 
```

我想写`Store.A.SetValue(42)`，以便将值保存到`Store<int>.A`. 我可以写什么来代替标有“只是我想要的示例”的行来实现这一目标？（我想探索一个不涉及字典或类似内容的解决方案）

**重新表述问题：** 我想修改类`Value`（定义一些字段，编写构造函数并编写方法 Value.SetValue(T value) ），然后构造三个不同的 Value (A, B, C) 类型的变量，使得当我调用`Store.A.SetValue(42)`该值`Store<int>.A`更改为 42。

**类的另一种变体：**

```
static class Holder<T> {
    T Value { get; set; }
}

static class Store2<T> {
    public static Holder<T> A = new Holder<T>();
    public static Holder<T> B = new Holder<T>();
    public static Holder<T> C = new Holder<T>();
}

public static class Store2 {
    public static Value A = new Value2(Store2<>.A); //just an example of what I want
    public static Value B = new Value2(Store2<>.B); //passing non-specific generic expression
    public static Value C = new Value3({TFree}() => Store2<TFree>.C); //just an example of what I want
}

public class Value2 { //Non-generic class!
    Holder{TFree}<TFree> _holder; //just an example of what I want
    public Value(Holder{TFree}<TFree> holder) { //just an example of what I want
        _holder = holder;
    }

    public void SetValue<T> (T value) {
        _holder{T}.Value = value; //just an example of what I want
    }
}

public class Value3 { //Non-generic class! (Another variation)
    Func{TFree}<Holder<TFree>> _holderFactory; //just an example of what I want

    public Value(Func{TFree}<Holder<TFree>> holderFactory) { //just an example of what I want
        _holderFactory = holderFactory;
    }

    public void SetValue<T> (T value) {
        Holder<T> holder = _holderFactory{T}(); //just an example of what I want
        holder.Value = value; 
    }
} 
```

**解决方案：** 使用另一个问题的答案（[在 C# 中](https://stackoverflow.com/questions/12878864/emulating-delegates-with-free-generic-type-parameters-in-c-sharp/12879105#12879105)[使用免费泛型类型参数模拟委托和](https://stackoverflow.com/questions/12878864/emulating-delegates-with-free-generic-type-parameters-in-c-sharp/12926979#12926979)在C# 中使用免费泛型类型参数模拟委托）找到了一个简单的无反射和无集合解决方案。解决方案是[委托泛型类型未知的泛型操作。如何创造这样的东西？](https://stackoverflow.com/questions/12877550/delegates-to-generic-operations-where-the-generic-type-is-unknown-how-to-create/12967076#12967076).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:08:11.270

使用数组存储值并使用索引通过属性访问它们

```
public static class Store<T>
{
    public static readonly T[] Values = new T[3];
    public static T A { get { return Values[0]; } set { Values[0] = value; } }
    public static T B { get { return Values[1]; } set { Values[1] = value; } }
    public static T C { get { return Values[2]; } set { Values[2] = value; } }
}

public static class Store
{
    public static readonly Value A = new Value(0);
    public static readonly Value B = new Value(1);
    public static readonly Value C = new Value(2);
}

public class Value
{
    private int _index;

    public Value(int index)
    {
        _index = index;
    }

    public void SetValue<T>(T value)
    {
        Store<T>.Values[_index] = value;
    }

    public T GetValue<T>()
    {
        return Store<T>.Values[_index];
    }
} 
```

由于 的构造函数`Value`不知道任何泛型类型参数，因此您不能对特定的`Store<T>`.

* * *

**更新**

请注意，`Store<T>`将为您提供的每个不同类型参数创建一个副本`T`。看这个例子

```
Store.A.SetValue(42);
Store.A.SetValue("Douglas Adams");
Store.A.SetValue(new DirectoryInfo(@"C:\"));
Store.A.SetValue(new List<int>());

var x1 = Store.A.GetValue<int>();           // --> 42
var x2 = Store.A.GetValue<string>();        // --> "Douglas Adams"
var x3 = Store.A.GetValue<DirectoryInfo>(); // --> DirectoryInfo{ C:\ }
var x4 = Store.A.GetValue<List<int>>();     // --> List<int>{ Count = 0 } 
```

通过使用调试器，您将看到同时存储了四个不同的值`A`！当然，这是`A's`存在于四种不同的四种不同`Store<T>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:43:20.783

事实证明这个问题是可以解决的。Mike-z 为我提供了一个几乎正确的解决方案来解决委托到泛型方法的问题（[在 C# 中使用免费的泛型类型参数模拟委托](https://stackoverflow.com/questions/12878864/emulating-delegates-with-free-generic-type-parameters-in-c-sharp/12879105#12879105)），我将其修改为一个完整的解决方案：（[在 C# 中使用免费的泛型类型参数模拟委托](https://stackoverflow.com/questions/12878864/emulating-delegates-with-free-generic-type-parameters-in-c-sharp/12926979#12926979)） .

这个问题的解决方案也变得很容易。接口可以包含泛型方法，我们可以使用接口值变量来存储泛型方法的链接，而无需指定具体的类型参数。下面的代码在`Store<T>`没有修改的情况下使用类，并使用`ISetter`接口和// `ASetter`“闭包”来保存对不同泛型成员的引用。该类将引用存储在-typed 变量中，并在类型参数可用时使用链接到的泛型成员。`BSetter``CSetter``Value``ISetter``_setter``T`

```
public interface ISetter {
    void SetValue<T>(T value);
}

public static class Store {
    public static Value A = new Value(new ASetter());
    public static Value B = new Value(new BSetter());
    public static Value C = new Value(new CSetter());

    class ASetter : ISetter {
        public void SetValue<T>(T value) { Store<T>.A = value; }
    }
    class BSetter : ISetter {
        public void SetValue<T>(T value) { Store<T>.B = value; }
    }
    class CSetter : ISetter {
        public void SetValue<T>(T value) { Store<T>.C = value; }
    }
}

public class Value {
    ISetter _setter;

    public Value(ISetter setter) {
        _setter = setter;
    }

    public void SetValue<T> (T value) {
        _setter.SetValue<T>(value);
    }
} 
```

# jquery - 在 mvc3 视图页面中通过 jquery 单击按钮上的空文本框

> ID：12877553
> 
> 赞同：0
> 
> 时间：2012-10-13T22:21:15.510
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我在 mvc 中有一个页面，其中有 4 个带有 id 的文本框，我想在单击按钮时清除文本框，但我的代码似乎没有做任何事情。这是我的一段代码：

```
<td><%: Html.TextBoxFor(model => model.fdose, new { id = "pls", style = "width:100px;"            })%> </td>
<td><%: Html.TextBoxFor(model => model.fduration, new { id = "plss", style =   "width:100px;" })%></td>     
<td> <button type="submit" class="t-button" name="med" value="med" id="clearmed">+</button></td> 
```

这是我的脚本：

```
$("#clearmed").click(function (event) {
$("#plss").val("");
$("#pls").val("");
$("#abc").val("");
$("#abcd").val("");
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T22:29:05.070

如果您使用其他东西，也许您应该尝试使用 Firebug 或其他浏览器调试器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:30:55.157

如果没有任何错误，很难判断可能出了什么问题。最好提供一个[JSFiddle](http://jsfiddle.net)来提供帮助。如果您确实提供了您遇到的错误，我将更新我的答案以更具体地解决您的问题。

我确实通过 JSFiddle 运行了它（请参见[此处的示例](http://jsfiddle.net/XR9cD/1/)）并扩展了 ASP.NET 助手。您的 HTML 中有一个错误（我相信您是在看到编辑后才修复的），但没有明显的错误。我会查看您的调试器（无论是 Firebug、Chrome 开发人员工具还是其他），*并确保正确包含 jQuery*，您的文本框呈现您期望的方式，并且所有名称都是正确的。

我的最终代码：

```
<td><input id="pls" name="fdose" style="width:100px" type="textbox" /></td>
<td><input id="plss" name="fduration" style="width:100px" type="textbox" /><td>
<td><button type="submit" class="t-button" name="med" value="med" id="clearmed">+</button></td>​ 
```

和

```
$("#clearmed").on("click", function(event) {
    $("#plss").val("");
    $("#pls").val("");
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T22:39:39.727

由于它是一个提交按钮，因此在单击时防止提交按钮的默认行为。你可以使用[`preventDefault`](http://api.jquery.com/event.preventDefault/)方法来做到这一点。还将您的代码包装在 ready 事件中。

```
$(function(){
   $("#clearmed").click(function (event) {
       event.preventDefault();
       $("#plss").val("");
       $("#pls").val("");
   });
}}); 
```

# performance - 编码位向量的有效方法？

> ID：12877557
> 
> 赞同：7
> 
> 时间：2012-10-13T22:21:51.443
> 
> 标签：performance, optimization, encoding, bitmap, bitvector

当前使用运行长度编码对位向量进行编码，当前运行时间为 2log(i)，其中是运行的大小。是否有另一种方法可以将其降低到 log(i)？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T22:31:54.247

编码位向量的最有效方法是隔离位源的任何特定属性。如果它是完全随机的，则没有真正明显的增益（实际上，完全随机的比特流不能以任何方式压缩）。

如果您可以在比特流中找到属性，您可以尝试定义一组向量，这些向量将定义向量空间的基础。在这种情况下，结果将非常有效。

我们需要有关您的比特流的更多详细信息。

* * *

（编辑）

只需再了解一些细节即可理解前面的陈述：“不能以任何方式压缩完全随机的比特流”

**如果“压缩”是指“转换/压缩流”加上**“向量基定义”**加上**解压缩程序，则不可能压缩完全随机的位向量。但在大多数情况下，解压缩程序（通常也是矢量库）嵌入在客户端软件中。因此，只需要“压缩流”。

一个很好的解释（和有趣的故事）是[Patrick Craig 5000$ 压缩挑战](http://www.patrickcraig.co.uk/other/compression.htm)

更科学的[信息论，尤其是熵部分](http://en.wikipedia.org/wiki/Information_theory#Entropy)

而且，最后一个，[完整的故事](http://mattmahoney.net/dc/dce.html?year=2011)。

但无论解决方案是什么，如果您有未知数量的未知流要压缩，您将无能为力。你必须找到一个模式。

# ruby-on-rails - Ruby .to_sentence

> ID：12877558
> 
> 赞同：1
> 
> 时间：2012-10-13T22:21:56.033
> 
> 标签：ruby-on-rails, ruby, methods

在 .to_sentence 方法中，如何让 last_word_connector 输出 HTML 字符串？

例如：

```
locations.to_sentence last_word_connector: '<br />' 
```

我希望`<br />`实际被解释。我尝试`.html_safe`在最后添加但无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T22:47:26.793

您需要告诉视图该字符串是“安全的”插入（即它应该按原样插入 - 不是转义）：

```
<%= locations.to_sentence(last_word_connector: '<br />').html_safe %> 
```

该`html_safe`方法返回一个标记为 html 安全的字符串。所以它不会被逃脱。

谨慎使用。Rails 默认转义字符串的原因是它使 html 和 javascript 注入尝试无害。因此，如果您不能完全确定 的内容`locations`，请小心。

# artificial-intelligence - PACMAN：吃掉所有点的捷径

> ID：12877560
> 
> 赞同：2
> 
> 时间：2012-10-13T22:22:27.900
> 
> 标签：artificial-intelligence, path-finding, traveling-salesman, pacman

我正在尝试为 PACMAN 问题找到一个解决方案，即找到一条可以吃掉大迷宫中所有点的短路径（不是最短的，而是一条好的路径）。我见过很多人在谈论 TSP、Dijsktra、BFS、A*。我不认为这是一个 TSP，因为我不必回到我开始的地方，如果我愿意，我可以重复节点。而且我认为 Dijsktra、BFS 和 A* 不会有帮助，因为我不是在寻找最短路径，即使是这样，它也不会在合理的时间内给出答案。

任何人都可以给我提示吗？这是什么问题？这是一种TSP吗？什么样的算法可以有效地解决这个问题？我将不胜感激有关实施的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:29:59.747

我认为您正在尝试在 30 秒内找到大迷宫中最短路径的竞赛？

实际上我去年这样做是为了好玩（我的大学班级没有参加比赛）。经过数周的研究，我能够在 30 秒内完成迷宫的精确解。

我使用的启发式实际上是一个精确的启发式。我编写了一堆代码，使用基于图分解和动态规划的更有效算法来找到最小路径长度，然后将结果作为“启发式”值反馈给 A*。

要实现的关键是，虽然图非常大（273 个节点），但它的雕刻宽度很低（5），这意味着可以使用固定参数易处理算法有效地解决它。

希望这足以让您走上正轨。

**更新：** [我写了一篇博客文章解释了解决方案](https://medium.com/@robertgrosse/solving-the-traveling-pacman-problem-39c0872428bc)

# javascript - 从 ExtJS 4 中的自定义模型类扩展

> ID：12877565
> 
> 赞同：9
> 
> 时间：2012-10-13T22:22:57.340
> 
> 标签：javascript, extjs, extjs4, extjs4.1

如何从 extjs 中的自定义模型扩展。

当我将在下面的示例中引用 BusinessUser 类的字段时，是否有任何方法可以直接组合 User 和 BusinessUser 字段的字段。

```
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'name',  type: 'string'},
        {name: 'age',   type: 'int'},
        {name: 'phone', type: 'string'},
        {name: 'alive', type: 'boolean', defaultValue: true}
    ],
});

Ext.define('BusinessUser', {
    extend: 'User',
    fields: [
        {name: 'businessType',  type: 'string'},
        {name: 'company', type: 'string'}
    ],
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T21:55:25.417

您无需手动加入字段，因为它是自动完成的。根据您的问题检查以下代码中的输出：

```
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'name',  type: 'string'},
        {name: 'age',   type: 'int'},
        {name: 'phone', type: 'string'},
        {name: 'alive', type: 'boolean', defaultValue: true}
    ],
});

Ext.define('BusinessUser', {
    extend: 'User',
    fields: [
        {name: 'businessType',  type: 'string'},
        {name: 'company', type: 'string'}
    ],
});

// instantiating a User object
var u = Ext.create('BusinessUser', {
    name: 'John Doe', 
    age: 30, 
    phone: '555-5555'
});

// instantiating a BusinessUser object
var bu = Ext.create('BusinessUser', {
    name: 'Jane Doe', 
    age: 40, 
    phone: '555-5556', 
    businessType: 'analyst', 
    company: 'ACME'
});

console.log(Ext.getClassName(bu)); // "BusinessUser"
console.log(Ext.getClassName(u));  // "User"
console.log(u  instanceof User); // true
console.log(bu instanceof User); // true
console.log(u  instanceof BusinessUser); // false
console.log(bu instanceof BusinessUser); // true
console.log(u  instanceof Ext.data.Model); // true
console.log(bu instanceof Ext.data.Model); // true
console.log(u  instanceof Ext.data.Store); // false, just to check if it's not returning true for anything
console.log(bu instanceof Ext.data.Store); // false
console.log("name"    in u.data);  // true
console.log("name"    in bu.data); // true
console.log("company" in u.data);  // false
console.log("company" in bu.data); // true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T05:51:30.550

尽管它应该会自动运行，但如果您由于某种原因遇到问题，请使用以下方法。

使用构造函数加入字段：

```
Ext.define('BusinessUser', {
   extend : 'User',
   constructor : function(){
      this.callParent(arguments);
      this.fields.push([
        {name: 'businessType',  type: 'string'},
        {name: 'company', type: 'string'}
    ]);
   }
}); 
```

# model-view-controller - 在 rail.js 中渲染部分

> ID：12877573
> 
> 赞同：0
> 
> 时间：2012-10-13T22:24:23.940
> 
> 标签：model-view-controller, node.js, partial-views, railway.js

我对 node.js 很陌生，同时我正在使用 rail.js 框架来学习 MVC。我们在工作中使用 C#。我是前端开发人员。我似乎无法弄清楚或查看有关如何正确渲染铁路局部视图的任何文档。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:46:42.317

在您的视图中尝试此代码：

```
<%- partial('viewname') %> 
```

它将使用 express2.0 查找部分过程。提示：这是您使用 railjs 的第一步，从脚手架生成器开始`railway generate crud post title content`

查看 github 上提供的铁路入门指南：[https ://github.com/1602/express-on-railway/wiki/RailwayJS-starter-guide](https://github.com/1602/express-on-railway/wiki/RailwayJS-starter-guide)

# python - Django ManagementForm 数据丢失或被篡改

> ID：12877576
> 
> 赞同：16
> 
> 时间：2012-10-13T22:25:00.550
> 
> 标签：python, django

我不断收到错误：

```
[u'ManagementForm data is missing or has been tampered with'] 
```

我也想不通为什么。这是我的看法：

```
 def CreateWorkout(request):
    WorkoutInlineFormSet = inlineformset_factory(workout,exercise)
    if request.method == "POST" : 
        formset = WorkoutInlineFormSet(request.POST)

        if formset.is_valid(): 
            formset.save(); 
    else: 
        formset = WorkoutInlineFormSet()
    return render_to_response('submit.html',{'formset': formset},context_instance=RequestContext(request)) 
```

这是我的模板：

```
<body>
<form method="POST" action ="">
{{ formset.management_form }}
<table>
 {% for form in formset.forms %}
            {{ form }}
        {% endfor %}

        </table>
</form> 
</body> 
```

我读过你必须包括`formset.management_form`，我有。我认为这将是一个简单的解决方案，但我一直无法找出问题所在。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-11-05T09:21:44.700

我遇到了这个问题。

`form-TOTAL_FORMS, form-INITIAL_FORMS and form-MAX_NUM_FORMS)`原因是您的`POST`数据中没有类似的东西。

您应该使用`{{ formset.as_p }}`，这将呈现表单集中的 management_form 数据。如果要进行自定义表单集渲染，请不要忘记表单集的 management_form 让 POST 数据与 mangement_form 数据。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T22:39:24.510

当您使用内联表单集时，您需要提供对象相关的实例。

```
# First, fetch the instance from the db
workout = code_that_fetches_instance()

if request.method == "POST" : 
    formset = WorkoutInlineFormSet(request.POST, instance=workout)
    ...
else: 
    formset = WorkoutInlineFormSet(instance=workout) 
```

有关更多信息，请参阅文档中关于[在视图中使用内联表单集](https://docs.djangoproject.com/en/1.9/topics/forms/modelforms/#using-an-inline-formset-in-a-view)的示例。

如果`workout`并且`exercise`是您的模型，则应遵循 python 约定并将它们重命名`Workout`为`Exercise`. 小写`workout`应该是您的表单集中的所有练习都链接到的实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-01T01:10:01.000

Change this:

```
 formset = WorkoutInlineFormSet(request.POST) 
```

to this:

```
 formset = WorkoutInlineFormSet(request.POST or None, request.FILES or None) 
```

# sammy.js - 如何从没有斜杠的页面重定向到有斜杠的页面

> ID：12877577
> 
> 赞同：2
> 
> 时间：2012-10-13T22:25:05.627
> 
> 标签：sammy.js

我有 sammy.js 在一个 knockout.js 应用程序中运行。我目前正在尝试重定向缺少斜杠的路由（例如`/#/stop/1/100032`）我想将所有缺少斜杠的此类页面重定向到带有斜杠的页面。

更复杂的是，如果没有这样的路线，我还希望有一个错误页面。

```
function RoutesViewModel () {
    var self = this;

    self.router = Sammy(function () {
        this.get('/#/stop/:agency_id/:stop_id/', function () {
            app.page.state('bus');
            app.stop.setCurrentById(this.params['agency_id'], this.params['stop_id']);
            mixpanel.track('stop page load', {
                'route': '/#/stop/' + this.params['agency_id'] + '/' + this.params['stop_id'] + '/',
            });
        });
        this.get('/(.*[^\/])', function () {
            this.redirect('/',this.params['splat'],'/');
        });
    });

    self.router.error = function (message, error) {
        app.page.header("Unable to find your page");
        app.page.message("The page you've requested could not be found.<br /><a href=\"/\">Click here</a> to return to the main page.");
    }

    self.run = function () {
        self.router.run();
    }
} 
```

以上是我目前所选择的路线。不幸的是，当我转到上面的示例 url 时，页面加载了错误，而不是正确的`/#/stop/1/100032/`.

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T07:24:11.920

我知道这是一个老问题，但我也遇到了这个问题。

根据[http://sammyjs.org/docs/routes](http://sammyjs.org/docs/routes "路线")路由是正则表达式。所以这对我有用：

```
this.get('#/foo/:id/?', function() { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-24T20:20:04.600

我遇到了同样的问题，并决定在我的 Sammy 设置结束时用一个包罗万象的方法来解决它。如果有斜杠，我的解决方案会删除尾部斜杠，但您可以轻松地做相反的事情，而是添加一个斜杠：

```
Sammy(function () {
    this.get('#', function () {
        // ...
    });
    this.notFound = function (method, path) {
        if (path[path.length - 1] === '/') {
            // remove trailing slash
            window.location = path.substring(0, path.length - 1);
        } else {
            // redirect to not found
        }
    }
}); 
```

# matlab - Matlab逆运算及警告

> ID：12877582
> 
> 赞同：1
> 
> 时间：2012-10-13T22:25:44.840
> 
> 标签：matlab, warnings, linear-algebra, matrix-inverse

不太清楚这意味着什么。“警告：矩阵对于工作精度来说是独一无二的。”

我有一个 3x4 矩阵，称为矩阵 bestM 矩阵 Q 是 bestM 的 3x3，矩阵 m 是 bestM 的最后一列

我想做 C = -Q * 矩阵 m 的逆矩阵，我得到那个警告和 C =[Inf Inf Inf] 这是不正确的，因为我正在计算世界上的相机中心

```
bestM = [-0.0031 -0.0002 0.0005 0.9788;
         -0.0003 -0.0006 0.0028 0.2047;
         -0.0000 -0.0000 0.0000 0.0013];   

Q = bestM(1:3,1:3);
m = bestM(:,4);

X = inv(Q);
C = -X*m;
disp(C); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T00:28:26.130

可以将奇异矩阵视为等效于零的矩阵，当您尝试反转 0 时，它会爆炸（变为无穷大），这就是您在这里得到的。用户 1281385 使用 format 命令来提高精度是绝对错误的；format 命令用于更改显示给您的格式。事实上，格式帮助命令的第一行说

> 格式不影响 MATLAB 计算的完成方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T04:46:53.387

[如此处](http://mathworld.wolfram.com/SingularMatrix.html)发现，奇异矩阵是没有逆矩阵的矩阵。正如 dvreed77 已经指出的那样，您可以将其视为矩阵的 1/0。

为什么我要回答，是要告诉你`inv`明确使用几乎从来都不是一个好主意。如果您需要几百次相同的逆，这可能是值得的，但是，在大多数情况下，您对产品感兴趣`C`：

```
C = -inv(Q)*m 
```

在 Matlab 中使用反斜杠运算符可以更准确、更快地计算：

```
C = -Q\m 
```

键入`help slash`以获取更多信息。即使您碰巧发现自己确实需要明确地反转，我仍然建议您避免`inv`：

```
invQ = Q\eye(size(Q)) 
```

下面是一个小性能测试，以演示显式逆可以派上用场的极少数情况之一：

```
% This test will demonstrate the one case I ever encountered where
% an explicit inverse proved useful. Unfortunately, I cannot disclose
% the full details without breaking the law, but roughly, it came down
% to this: The (large) design matrix A, a result of a few hundred 
% co-registrated images, needed to be used to solve several thousands 
% of systems, where the result matrices b came from processing the 
% images one-by-one. 
%
% That means the same design matrix was re-used thousands of times, to 
% solve thousands of systems at a time. To add to the fun, the images
% were also complex-valued, but I'll leave that one out of consideration
% for now :)  

clear; clc

% parameters for this demo
its = 1e2;
sz  = 2e3;
Bsz = 2e2;

% initialize design matrix
A = rand(sz);

% initialize cell-array to prevent allocating memory from consuming 
% unfair amounts of time in the first loop. 
% Also, initialize them, NOT copy them (as in D=C,E=D), because Matlab 
% follows a lazy copy-on-write scheme, which would influence the results
C = {cellfun(@(~) zeros(sz,Bsz), cell(its,1), 'uni', false)   zeros(its,1)};
D = {cellfun(@(~) zeros(sz,Bsz), cell(its,1), 'uni', false)   zeros(its,1)};
E = {cellfun(@(~) zeros(sz,Bsz), cell(its,1), 'uni', false)   zeros(its,1)};

% The impact of rand() is the same in both loops, so it has no 
% effect, it just gives a longer total run time. Still, we do the 
% rand explicitly to *include* the indexing operation in the test. 
% Also, caching will most definitely influence the results, because 
% any compiler (JIT), even without optimizations, might recognize the 
% easy performance gain when the code computes the same array over and 
% over again. It probably will, but we have no control over when and 
% wherethat happens. So, we prevent that from happening at all, by 
% re-initializing b at every iteration. 

% The assignment to cell is a necessary part of the demonstration; 
% it is the desired output of the whole calculation. Assigning to cell 
% instead of overwriting 'ans' takes some time, which is to be included 
% in the demonstration, again for cache reasons: the extra time is now
% guaranteed to be equal in both loops, so it really does not matter -- 
% only the total run time will be affected.

% Direct computation
start = tic;
for ii = 1:its    
    b = rand(sz,Bsz);    
    C{ii,1} = A\b;
    C{ii,2} = max(max(abs( A*C{ii,1}-b )));
end
time0 = toc(start);
[max([C{:,2}])   mean([C{:,2}])   std([C{:,2}])]

% LU factorization (everyone's
start = tic;
[L,U,P] = lu(A, 'vector');
for ii = 1:its    
    b = rand(sz,Bsz);    
    D{ii,1} = U\(L\b(P,:));
    D{ii,2} = max(max(abs( A*D{ii,1}-b )));
end
time1 = toc(start);
[max([D{:,2}])   mean([D{:,2}])   std([D{:,2}])]

% explicit inv
start = tic;
invA = A\eye(size(A)); % NOTE: DON'T EVER USE INV()!
for ii = 1:its
    b = rand(sz,Bsz);
    E{ii,1} = invA*b;
    E{ii,2} = max(max(abs( A*E{ii,1}-b )));
end
time2 = toc(start);
[max([E{:,2}])   mean([E{:,2}])   std([E{:,2}])]

speedup0_1 = (time0/time1-1)*100
speedup1_2 = (time1/time2-1)*100
speedup0_2 = (time0/time2-1)*100 
```

结果：

```
% |Ax-b|
1.0e-12 * % max.   mean     st.dev.
          0.1121   0.0764   0.0159 % A\b   
          0.1167   0.0784   0.0183 % U\(L\b(P,;))
          0.0968   0.0845   0.0078 % invA*b

speedup0_1 = 352.57 % percent
speedup1_2 =  12.86 % percent
speedup0_2 = 410.80 % percent 
```

应该清楚的是，显式逆有它的用途，但就像`goto`任何语言中的构造一样——**谨慎而明智地使用它**。

# python - SUDS 引发 TypeNotFound(query.ref) suds.TypeNotFound: 找不到类型: '(Array, http://www.w3.org/2001/XMLSchema, )'

> ID：12877583
> 
> 赞同：1
> 
> 时间：2012-10-13T22:25:58.833
> 
> 标签：python, soap, suds

我是 SUDS 的新手，不知道为什么在尝试与 WSDL 提供程序执行事务时出现错误。它与 WSDL 文件中列出 Array 的方式有什么关系吗？

```
import suds, sys
import urllib
import logging
from array import *
logging.basicConfig(level=logging.INFO)
logging.getLogger('suds.transport').setLevel(logging.DEBUG)
url3 = "http://api.secretco.co.np/nusoap-transactions.php?wsdl"
client = suds.client.Client(url3)
countryiso2 = 'NP'
apikey = '<API-KEY>'
response = client.service.purchase(countryiso2=countryiso2, apikey=apikey) 
```

我收到错误消息：

```
SUDS raise TypeNotFound(query.ref) suds.TypeNotFound: Type not found: '(Array, http://www.w3.org/2001/XMLSchema, )' 
```

以下是 WSDL 的摘录

```
...
<operation name="purchase">
<documentation>Purchase</documentation>
<input message="tns:purchaseRequest"/>
<output message="tns:purchaseResponse"/>
</operation>
...
<message name="purchaseResponse">
<part name="return" type="xsd:Array"/>
</message>
... 
```

# .htaccess - 我应该将哪个 .htaccess 文件用于 301 重定向？

> ID：12877587
> 
> 赞同：0
> 
> 时间：2012-10-13T22:26:27.880
> 
> 标签：.htaccess, redirect, http-status-code-301

这是我似乎无法在谷歌上找到答案的超级简单问题之一，因此请提前道歉。

当我 ftp 进入我的（共享）服务器时，我的文件结构如下：

*   根 （/）
    *   /public_html

        *   /newdomain.com

我有一个位于 /public_html 的旧网站，它有大量内容和出色的 SEO。我们更改了名称和域（位于 /newdomain.com，/public_html 中的一个文件夹），并设置了从所有旧内容到新网站的 301 重定向。

我自己尝试过这样做，但它根本不起作用，所以我让我的主机的技术支持为我做这件事。虽然我的服务器上有几个 .htaccess 文件，但我不知道哪些是真正有效的，哪些不是。

*   Root 有自己的 .htaccess 文件
*   public_html 有自己的 .htaccess 文件
*   /newdomain.com 没有自己的 .htaccess 文件

**重定向 1**（当前位于 root 和 public_html 的 .htaccess 文件中，并且**有效**）

我想重定向[http://olddomain.com/whatever](http://olddomain.com/whatever) -> [http://newdomain.com/whatever](http://newdomain.com/whatever)（我目前让每个单独的页面都执行自己单独的 301，而不是使用单个规则执行此操作）。实现了`Redirect 301 /article-name-here/ http://www.newsite.com/article-name-here/`

**重定向 2**（当前位于 root 和 public_html 的 .htaccess 文件中，并且**不起作用**）。

我还想做一些[http://newdomain.com/oldpage.html](http://newdomain.com/oldpage.html) -> [http://newdomain.com/newpage.html](http://newdomain.com/newpage.html)的内部重定向。我试过重定向 public_html 的 .htaccess 文件，如下所示：

```
Redirect 301 http://newsite.com/badpage.html http://newsite.com/goodpage.html 
```

但它不起作用。我需要在我的服务器上的 newsite.com 文件夹中设置一个新的 .htaccess 吗？还是我只是完全错过了这里的标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T02:18:04.887

> **重定向 1**

要重定向所有内容，只需删除文章名称：

```
Redirect 301 / http://www.newsite.com/ 
```

或者，如果您*不想*重定向根目录（即请求`/`），那么：

```
RedirectMatch 301 ^/(.+)$ http://www.newsite.com/$1 
```

> **重定向 2**

如果该`/newdomain`目录是 的文档根目录`http://newdomain.com/`，那么您需要在那里创建一个新的 htaccess 文件并包括：

```
Redirect 301 /badpage.html /goodpage.html 
```

# c#-4.0 - C#如何从泛型类继承

> ID：12877588
> 
> 赞同：0
> 
> 时间：2012-10-13T22:26:33.630
> 
> 标签：c#-4.0, generics, inheritance, types, multiple-inheritance

**我有A类：**

```
public class ClassA<T> 
```

**我在 ClassA 中有一个通用方法：**

```
protected TP FunctionA<TP>(Expression<Func<T, TP>> p)
{
    //Code for method here
} 
```

**ClassB 派生自 ClassA：**

```
public class ClassB : ClassA<ClassB> 
```

**ClassC 派生自 ClassB：**

```
public class ClassC : ClassB 
```

当像上面的例子一样创建 ClassC 时，ClassA 仍然会有 ClassB 的类型，因为 ClassC 是从 ClassB 派生的，而 ClassB 将 ClassA 的类型设置为 ClassB。

我想知道的是如何从 ClassB 派生，同时将 ClassA 类型设置为 ClassC 并且 ClassB 仍然需要能够单独使用而无需派生。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T23:10:00.480

ClassB 不再是通用的。C类也不是。如果你想保持通用，那么模式是：

```
class ClassB<T> : ClassA<T> {}
class ClassC<T> : ClassB<T> {} 
```

# python-3.x - 无效的语法; 第n个素数

> ID：12877591
> 
> 赞同：1
> 
> 时间：2012-10-13T22:27:22.530
> 
> 标签：python-3.x

```
def primetest(x):  
    if x < 2:  
        return False  
    if x == 2:  
        return True  
    if x % 2 == 0:  
        return False  
    for i in range(3,(x**0.5)+1):  
        if x % i == 0:  
            return False  
    return True

def nthprime(n):  
    primes = []  
    x = 2  
    while len(primes) < n:  
        if primetest(x) == True:  
            primes.append(x)  
            x = x + 1  
    return list(-1)  

print nthprime(10001) 
```

每当我尝试运行它时，它都会说“print nthprime(10001)”是无效的语法。

-prime 测试是测试一个数字是否为素数，nthprime 创建一个具有一定长度的素数列表，然后返回列表的最后一个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:38:19.287

`print`是 Python 3 中的函数，而不是语句。您应该将最后一行代码更改为：

```
print(nthprime(10001)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:38:56.280

在您的代码中：

```
def nthprime(n):  
    primes = []  
    x = 2  
    while len(primes) < n:  
        if primetest(x) == True:  
            primes.append(x)  
            x = x + 1  
    return list(-1)   // this is the error 
```

我认为您的意思是素数 [-1]，如下所示：

```
def nthprime(n):  
    primes = []  
    x = 2  
    while len(primes) < n:  
        if primetest(x) == True:  
            primes.append(x)  
            x = x + 1  
    return primes[-1]   // this is now correct 
```

您还需要指定整数范围，而不是浮点数。所以这：

```
for i in range(3,(x**0.5)+1): 
```

变成这样：

```
for i in range(3,int((x**0.5)+1)): // note the "int" 
```

# php - PHP按另一个数组中的特定键对数组进行排序

> ID：12877596
> 
> 赞同：3
> 
> 时间：2012-10-13T22:27:59.033
> 
> 标签：php, arrays, sorting, debian

> **可能重复：**
> [按值对多维数组排序 (2)](https://stackoverflow.com/questions/2699086/sort-multidimensional-array-by-value-2)

如何按其中的特定键对数组进行排序：

```
array(
  array(5, 2),
  array(5, 3),
  array(3, 1),
  array(5, 4)
); 
```

这是一个数组，有几个数组，有 2 个值，我如何按每个数组的第二个值排序，所以结果是：

```
array(
  array(5, 1),
  array(5, 2),
  array(3, 3),
  array(5, 4)
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:46:53.283

这是一种方法：

```
<?php

$input = array(
    array(5, 2),
    array(5, 3),
    array(3, 1),
    array(5, 4)
);

/**
 * Funkily sort the input array.
 * 
 * @param array $array
 *
 * @return array
 */
function funky_sort(array $array) {
    //Get the array of the first elements
    $first_elements = array_map(function($el) {
        return $el[0];
    }, $array);

    //Get the array of the second elements
    $second_elements = array_map(function($el) {
        return $el[1];
    }, $array);

    //Sort the second elements only
    sort($second_elements, SORT_NUMERIC);

    //Combine both arrays to the same format as the original
    $result = array();
    for ($i = 0; $i < count($first_elements); $i++) {
        $result[] = array($first_elements[$i], $second_elements[$i]);
    }

    //Fire away
    return $result;

}

var_dump(funky_sort($input)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:33:40.493

这里有一些方向不能解决你的问题（这种类型很奇怪），但可以引导你找到解决方案。您可以使用 usort 函数 ( [http://www.php.net/manual/en/function.usort.php](http://www.php.net/manual/en/function.usort.php) ) 并定义自己的比较器。

如果您知道排序逻辑，请将其添加到 cmp 函数中，如果两个元素相等则返回 0，如果 $a < $b 则返回 -1，否则返回 1。

代码将如下所示：

```
function cmp($a, $b)
{
    if ($a[1] == $b[1]) {
        return 0;
    }
    return ($a[1] < $b[1]) ? -1 : 1;
}

$a = array(
  array(5, 2),
  array(5, 3),
  array(3, 1),
  array(5, 4)
);

usort($a, "cmp"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-13T22:54:04.687

```
<?php

function sort_by_second($randomArray)
{
    $tmparray1=array();
    $tmparray2=array();
    foreach ($randomArray as $key=>&$ra) {
        $tmparray1[$key]=$ra[1];
        $tmparray2[$key]=$ra[0];
    }
    asort($tmparray1);

    $rr=array();
    foreach ($tmparray1 as $key=>&$val) {
        $rr[$key]=array($tmparray2[$key],$val);
    }
    return $rr;}

$myArray = array(
    array(5, 2),
    array(5, 3),
    array(3, 1),
    array(5, 4)
);

$tt=sort_by_second($myArray);
print_r($tt);

?> 
```

# asp.net-mvc-3 - 在 MVC3 中将通用列表绑定到下拉列表

> ID：12877601
> 
> 赞同：2
> 
> 时间：2012-10-13T22:29:16.453
> 
> 标签：asp.net-mvc-3, html.dropdownlistfor

我有一个返回 CategoryID 和 CategoryName 的通用列表方法。我已经花了足够的时间进行研究，但似乎无法将其放在一起。我在 MVC 很新。

**这是我在存储库中的 DropdownList 方法。我取回数据...到目前为止一切顺利。**

```
public List<DropdownList> GetDDl()
{

return catDDL; 
} 
```

**这是我的控制器代码（尝试）**

```
 IEnumerable<SelectListItem> liCat =
 userRepository.Getddl().Select(c => new SelectListItem
{
   Value = c.DropDownID.ToString(),
   Text = c.DropDownText
}
ViewBag.catItems = new SelecList(liCat,"Value","Text"); 
```

**这是我的观点**

```
@Html.Dropdownlist("catItems","Select Category) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T22:56:57.747

尽量避免动态的东西，比如`ViewBag`and `ViewData`。使用强类型视图。

ViewModel 只是一个 POCO 类，我们将使用它在您的视图和操作方法之间传输数据。它将特定于视图。

例如：如果您想创建一个创建产品的视图。所以创建一个像这样的视图模型

```
public class Product
{
  public string Name { set;get;}
  public IEnumerable<SelectListItem> Categories{ get; set; }
  public string SelectedCategoryId { get; set; }
  //Other Properties as needed

} 
```

现在在您的`GET`操作方法中，您创建此视图模型的对象并初始化值并发送到视图。

```
public ActionResult Create()
{
  var vm=new Product();
  vm.Categories=userRepository.Getddl().
               Select(c => new SelectListItem
                                 {
                                    Value = c.DropDownID.ToString(),
                                    Text = c.DropDownText
                                 });                    
  return View(vm);
} 
```

现在让您的视图强类型化到我们的`Product`类并使用`Html.DropDownListFor`辅助方法。

```
@model PersonsProduct 
@using (Html.BeginForm())
{ 
  @Html.DropDownListFor(x => x.SelectedCategoryId, 
                       new SelectList(Model.Categories,"Value","Text"), "Select")
  <input type="submit" value="save" />
} 
```

现在在您的 HttpPost 中，您可以获得这样的表单值

```
[HttpPost]
public ActionResult Create(Product model)
{
  if(ModelState.IsValid)
  {
     //check model.SelectedCategoryId
     //save and redirect
  }
  //to do :reload the dropdown again.
  return view(model);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:44:04.473

应该只是：

控制器：

```
IEnumerable<SelectListItem> liCat = userRepository.Getddl().Select(c => new SelectListItem
{
   Value = c.DropDownID.ToString(),
   Text = c.DropDownText
}

ViewBag.catItems = liCat 
```

看法：

```
@Html.Dropdownlist("catItems", ViewBag.catItems) 
```

# java - Java 中的 SOAP 客户端编程

> ID：12877605
> 
> 赞同：0
> 
> 时间：2012-10-13T22:30:06.943
> 
> 标签：java, xml, http, soap, request

我的 Java 应用程序有一个非常有趣的问题。我正在尝试创建一个 SOAP 客户端，但我不想使用内置或任何其他外部库来使事情正常进行。我想了解它的实际工作原理并设置所有请求和标头信息。

该程序正在运行。我可以发送请求并获得响应。但是，当响应更大时，我在 xml 响应中得到一些“垃圾”，它会创建一个新行并出现字符串，例如：b50、51b、5a8、9ed 或 15b。这些字符串在响应中随机破坏了 xml 结构。

我的代码是：

```
package soapclient.client;

import java.io.*;
import java.net.*;
/**
 *
 * @author stom7
 */
public class Client {

    private BufferedReader _reader;
    private DataOutputStream _writer;
    private Socket _socket;

    public void connect() {

        try 
        {
            _socket = new Socket("**.***.***.***", 80);
        }
        catch (Exception ex) {
            System.out.println(ex.getMessage());
            return;
        }

        System.out.println("Connected successfully!");

        try
        {
            _reader = new BufferedReader(new InputStreamReader(_socket.getInputStream()));
            _writer = new DataOutputStream(_socket.getOutputStream()); 
        }
        catch (IOException ex) {
            System.out.println(ex.getMessage());
            return;
        }

        System.out.println("Streams created successfully!");

        String content = "The soap request in xml format";

        String request = "POST the_path HTTP/1.1\r\n"
                + "Host: the_host\r\n"
                + "Content-Type: application/soap+xml; charset=utf-8\r\n"
                + "Content-Length: " + content.length() + "\r\n"
                + "\r\n"
                + content;
        try {
            _writer.writeBytes(request);
            _writer.flush();

            String line;

            while ((line = _reader.readLine()) != null) {
                System.out.println(line);
            }

        }
        catch(IOException ex) {
            System.out.println(ex.getMessage());
        }

        try
        {
            _reader.close();
            _writer.close();
            _socket.close();
        }
        catch (Exception ex) {
            System.out.println(ex.getMessage());
        }    
    }  
} 
```

即使在第一行也有一个问题：

```
51b
<?xml version="1.0" encoding="UTF-8"?> 
```

或者：

```
<xsd:element maxOccurs="1" minOccurs="1
b50
" name="in6" nillable="true" type="xsd:string"/> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T09:22:43.257

我发现响应是分块格式的，这意味着这些行是十六进制数字，给出了分块部分的长度。所以第一行给出了第一个块的长度，然后新行带有另一个十六进制数字，依此类推。

# multithreading - 编写一个 bash 脚本来重启一个守护进程

> ID：12877607
> 
> 赞同：1
> 
> 时间：2012-10-13T22:30:23.607
> 
> 标签：multithreading, bash, restart, sysadmin

我想我可以使用这个相关的问题：[How Do I write a bash script to restart a process if it dies](https://stackoverflow.com/questions/696839/how-do-i-write-a-bash-script-to-restart-a-process-if-it-dies)。@lhunath 有一个很好的答案，并告诉我我可能做的一切都是错误的，但我正在重新启动一个守护进程，如果我希望我可以在一个有效的脚本中做一些事情。

我的进程以显示启动日志的启动脚本开始，但随后退出并离开 shell 运行进程：

```
>sudo ./start
R CMD Rserve --RS-conf /var/FastRWeb/code/rserve.conf --vanilla --no-save
...
Loading required package: FastRWeb
FastRWeb: TRUE
Loading data...
Rserv started in daemon mode.
> 
```

该过程已启动并运行，

> ps-ale | grep Rserve 1 S 33 16534 1 0 80 0 - 60022 poll_s ？00:00:00 预约

是否有一种简单的方法可以从 bash 包装或调用“启动”脚本并在进程终止时重新启动，或者这是实际调用 PID 文件的情况？

Dang - 即使在指向一个在stackoverflow上没有关闭的非常相似的问题之后，问题也被关闭了。你们真烂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:58:25.553

监视程序的一种非常简单的方法是使用 cron：每分钟（或左右）检查程序是否仍然处于活动状态，`./start`否则检查。

以 root 身份调用`crontab -e`.

像这样附加一行：

```
* * * * * if ! pidof Rserve 2>&1 >/dev/null; then /full/path/to/start; fi 
```

此方法将保持持久性，即它将在重新启动等后执行。如果这不是您想要的，请将其移至 shell 脚本：

```
#! /bin/bash
# monitor.sh
while true; do
  if ! pidof Rserve 2>&1 >/dev/null; then /full/path/to/start; fi
  sleep 10
done 
```

该脚本必须从命令行手动启动，并且可以使用 Ctrl-C 轻松停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:36:15.893

如果您可以在非守护程序模式下运行该进程，最简单的解决方案是将其包装在脚本中。

```
#!/bin/bash
while (true)
do
  xmessage "This is your process.  Click OK to kill and respawn"
done 
```

**编辑**

许多守护进程会留下一个`/var/lock`包含其 PID 的锁定文件，通常位于 . 这使守护进程的多个副本无法运行。

在 Linux 下，`/proc`查看该进程是否仍然存在是相当简单的。

在其他平台下，您可能需要玩游戏`ps`来检查进程是否存在。

# apache - .htaccess 限制除一个特定 url 之外的所有访问

> ID：12877611
> 
> 赞同：1
> 
> 时间：2012-10-13T22:31:05.343
> 
> 标签：apache, .htaccess

我正在使用会员脚本来允许一群人访问私人文件。问题是任何知道文件链接的人都可以轻松绕过成员脚本并直接访问文件。我的目标是防止通过直接 URL 访问，`http://domain.com/folder1/folder2/index.php`并且只接受来自`http://domain.com/folder1/file_with_link_to_index.php`. 会员脚本是无用的，除非我可以阻止人们输入文件位置的 url。

我什至开始理解 Apache 都很难，但我试图做的是使用“全部拒绝”，然后使用“允许来自`http://folder1/file_with_link_to_index.php`.”。因此只能通过“file_with_link~”访问文件。它没有用。我仍然能够将文件的 url 粘贴到浏览器中并访问该目录。

我在 StackO 上发现了类似的问题，但没有足够的经验来理解和实际提取与我的问题相似的小块并实际使用它们。这可能很简单，但我对试图弄清楚这一点感到非常沮丧，以至于我看不到它。

这是我尝试使用的一个简单示例：

# 拒绝除此处指明的以外的所有内容

```
<Limit GET POST PUT>
 order deny,allow
 deny from all
 allow from 12.345.67.890
 allow from http://domain.com/fold1/LINKING_FILE/program_index.php
</Limit> 
```

我很确定我在应该编写域的方式上失败了，也许这就是它不起作用的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:37:46.713

我会使用另一种方法来解决这个问题，而不是通过 htaccess。将文件放在公共网络无法访问的目录中，然后使用您的会员资格 php 脚本检索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T07:16:18.580

jTheMan 是对的。有一种更好的方法可以使用 PHP 来解决这个问题。我对我的问题的修复如下，以防它对其他人有用。唯一很棒的补充是让下面的代码只允许从一个 IP 直接访问 URL，比如我自己的 :0)

我将以下文件添加到“head”或“index”或每个应用程序中首先调用的页面的最顶部：

```
//Begin refuse direct URL Connections
$refering=parse_url($_SERVER['HTTP_REFERER']);
if($refering['host']==$_SERVER['HTTP_HOST']){
   echo "";
} else {
   header("Location: http://www.yourdomain.com");
    exit();
}
//End refuse direct URL Connections 
```

谢谢！

# silverlight - Silverlight Datagrid 与字典项目列表集合绑定 - 需要排序

> ID：12877615
> 
> 赞同：1
> 
> 时间：2012-10-13T22:31:43.277
> 
> 标签：silverlight, list, datagrid, dictionary

团队，

我正在尝试在 silverlight 数据网格中显示字典项目列表。

我做了一个自定义绑定，数据网格已经按预期显示数据。

但我无法对列进行排序。

这是一个例子。

字典Item1 = { [key1,value1] , [key2, value2], [key3, value3] }
字典Item2 = { [key1,valueA] , [key2, valueB], [key3, valueC] }
字典Item3 = { [key1 ,valueX] , [key2, valueY], [key3, valueZ] }

我的最终 Itemsource List = { Dictionary Item1, Dictionary Item2 , Dictionary Item3}

SilverlightDatagrid.ItemsSource = 我的最终项目源列表；

一切正常，数据显示在表格中。但是当我排序时没有任何反应。

我不确定如何为此字典列表实现自定义排序功能。

任何帮助表示赞赏。感谢您的时间。

谢谢阿南德

# arrays - 是否可以在 as3 中重新加载或重置数组？

> ID：12877617
> 
> 赞同：1
> 
> 时间：2012-10-13T22:32:00.060
> 
> 标签：arrays, actionscript-3, reload, reset, restore

我想知道是否可以重置/重新加载/重建数组顺序？

我正在制作这个“太空入侵者”游戏，当游戏重新启动时，敌人需要重新启动到它的位置。当我击落敌人并重置游戏时，我杀死的敌人一直消失。

所以这里有一些负责的代码：

```
var spiderArray:Array = new Array(enemyField.enemy1,enemyField.enemy2,
                             enemyField.enemy3,enemyField.enemy4,
                             enemyField.enemy5,enemyField.enemy6,
                             enemyField.enemy7,enemyField.enemy8,
                             enemyField.enemy9,enemyField.enemy10,
                             enemyField.enemy11,enemyField.enemy12,
                             enemyField.enemy13,enemyField.enemy14,
                             enemyField.enemy15,enemyField.enemy16,
                             enemyField.enemy17,enemyField.enemy18,
                             enemyField.enemy19,enemyField.enemy20,
                             enemyField.enemy21,enemyField.enemy22,
                             enemyField.enemy23,enemyField.enemy24,
                             enemyField.enemy25,enemyField.enemy26,
                             enemyField.enemy27,enemyField.enemy28,
                             enemyField.enemy29,enemyField.enemy30,
                             enemyField.enemy31,enemyField.enemy32,
                             enemyField.enemy33,enemyField.enemy34,
                             enemyField.enemy35,enemyField.enemy36,
                             enemyField.enemy37,enemyField.enemy38,
                             enemyField.enemy39,enemyField.enemy40,
                             enemyField.enemy41,enemyField.enemy42,
                             enemyField.enemy43,enemyField.enemy44,
                             enemyField.enemy45,enemyField.enemy46,
                             enemyField.enemy47,enemyField.enemy48,
                             enemyField.enemy49,enemyField.enemy50,
                             enemyField.enemy51,enemyField.enemy52,
                             enemyField.enemy53,enemyField.enemy54,
                             enemyField.enemy55,enemyField.enemy56,
                             enemyField.enemy57,enemyField.enemy58,
                             enemyField.enemy59,enemyField.enemy60,
                             enemyField.enemy61,enemyField.enemy62,
                             enemyField.enemy63,enemyField.enemy64,
                             enemyField.enemy65,enemyField.enemy66); 
```

现在是杀死敌人的地方：

```
function enemyHitTest():void {
//for each of the three spiders
for(var i:int = 0; i < spiderArray.length; i++) {
    //the each of the six bullets
    for(var j:int = 0; j < 6; j++) {
        //don't consider bullets that aren't in play:
        if(bulletArray[j].y > SpelerMC.y) continue;
        if(spiderArray[i].hitTestObject(bulletArray[j])) {
            score += 10;
            scoreTxt.text = score.toString();
            trace("Invader " + i + " neergeschoten!");
            spiderArray[i].parent.removeChild(spiderArray[i]);
            bulletArray[j].x = j * 70 + 100;
            bulletArray[j].y = 595;
        }
    }
} 
```

现在我想我需要放一些`theArray.pop();`东西，但不知道如何使用它，但我需要把它放在这个函数中：

```
function startGame() {
trace("Start het spel opnieuw...");
gameTimer.addEventListener(TimerEvent.TIMER, onTick);
gameTimer.start();
enemyField.x = 400;
enemyField.y = 160;
SpelerMC.x = 83;
SpelerMC.y = 531;
} 
```

请帮我！已经搜索了5个小时。
提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:44:29.640

删除元素编号`i`使用`array.splice(i, 1);`（[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice().com/en_US/FlashPlatform/reference/actionscript/3/Array.html# splice%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice().com/en_US/FlashPlatform/reference/actionscript/3/Array.html#splice%28%29)）但请记住， 重置数组`array.length`会减少，只需再次调用
`spidersArray = new Array(enemyField.enemy1, etc)`

 **在`enemyHitTest`函数中**更新**`if(enemyArray[i].visible && enemyArray[i].hitTestObject(laserArray[j]))`我将删除条件更改为and `enemyArray[i].parent.removeChild(enemyArray[i]);`to`enemyArray[i].visible = false;`
并添加**

 **```
function respawnEnemies():void{
    for(var i:int = 0; i < enemyArray.length; i++) {
        enemyArray[i].visible = true;
    }
} 
```

调用它`startGame`

完整代码[在这里](http://pastebin.com/YSg81d0F)

*upd 2*
所以问题不在于重置数组，而在于您的enemyField 及其敌人被手动添加到舞台并以编程方式删除，因此没有代码可以调用以将它们带回来

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T20:28:15.233

如果您的所有实例都应该保留 - 例如，您在开始时生成所有演员，然后所有演员都被重用（在新游戏中），您可以设置它们的数组并在每次开始游戏时制作副本并删除“死”敌人从复制的数组

更好的选择是使用向量，例如

```
var enemies:Vector.<Enemy> = Vector.<Enemy>([]);//in brackets references to the instances of Enemy class
var inGame:Vector.<Enemy> = enemies.concat(); 
```

还有5小时的研究？请耐心等待，更加努力，

此致**

# python - __repr__ 与 repr

> ID：12877619
> 
> 赞同：3
> 
> 时间：2012-10-13T22:32:06.580
> 
> 标签：python, repr

这两种方法有区别吗？

例如，

```
from datetime import date
today = date(2012, 10, 13)
repr(today)
'datetime.date(2012, 10, 13);

today.__repr__()
'datetime.date(2012, 10, 13)' 
```

他们似乎做同样的事情，但为什么有人要使用后者而不是常规的 repr？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-13T22:53:55.043

[`__repr__`方法](http://docs.python.org/reference/datamodel.html#object.__repr__)用于*实现*自定义结果`repr()`。它由`repr()`,使用`str()`（如果`__str__`未定义）。你不应该`__repr__`明确地打电话。

不同之处在于 repr() 强制将字符串作为返回类型，而 repr() 查找`__repr__`的是类对象，而不是实例本身：

```
>>>> class C(object):
....   def __repr__(self):
....     return 1 # invalid non-string value
....
>>>> c = C()
>>>> c.__repr__() # works
1
>>>> repr(c) # enforces the rule
Traceback (most recent call last):
  File "<console>", line 1, in <module>
TypeError: __repr__ returned non-repr (type 'int')
>>>> c # calls repr() implicitly
Traceback (most recent call last):
  File "<console>", line 1, in <module>
TypeError: __repr__ returned non-repr (type 'int')
>>>> str(c)  # also uses __repr__
Traceback (most recent call last):
  File "<console>", line 1, in <module>
TypeError: __str__ returned non-str (type 'int')
>>>> c.__repr__ = lambda: "a"
>>>> c.__repr__() # lookup on instance
'a'
>>>> repr(c) # old method from the class
Traceback (most recent call last):
  File "<console>", line 1, in <module>
TypeError: __repr__ returned non-repr (type 'int')
>>>> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T22:34:18.323

这是同一件事

认为`repr()`包含以下代码：

```
def repr(obj):
    return obj.__repr__() 
```

它所做的只是调用对象的`__repr__()`函数。我不确定为什么有人需要`__repr__()`显式调用对象的方法。事实上，这样做通常是一种糟糕的编码风格（这会让人感到困惑，并导致程序员提出像你刚才所做的那样的问题）。

# java - 检测自上次用户与应用程序交互以来的时间

> ID：12877624
> 
> 赞同：1
> 
> 时间：2012-10-13T22:32:33.973
> 
> 标签：java, api, jakarta-ee, user-interaction

我目前正在编写一个应用程序，该应用程序应该**在 x 分钟不活动后注销当前用户**。我确实意识到有几种方法可以实现这一点，例如在用户导航时设置时间戳等，然后不时检查是否经过了太多时间。

但是，在（希望）重新发明轮子并为应用程序增加额外的复杂性之前，**是否有任何本地方法来检索上次用户交互的时间？** *（最好是跨操作系统，但至少支持Windows）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T22:42:20.217

[HttpSession.setMaxInactiveInterval()](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpSession.html#setMaxInactiveInterval%28int%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:38:29.800

没有本地方法可以做到这一点。您将不得不使用时间戳方法。

# html - Css 弹出菜单

> ID：12877625
> 
> 赞同：6
> 
> 时间：2012-10-13T22:32:40.150
> 
> 标签：html, css

我想在某些菜单项悬停时创建弹出菜单，我的菜单是这样的：

项目1 | 项目2 | 第 3 项

当 item2 悬停时，我想在 item2 下方显示弹出框，箭头向上。我确信使用 javascript 很容易做到这一点，尽管我还没有这样做。但这里的要求是仅使用 CSS。

我找到了这个例子：

[http://demo.webinterfacelab.com/13-profile-popover/](http://demo.webinterfacelab.com/13-profile-popover/)

唯一的区别是我需要弹出窗口显示在菜单下方而不是上方，并且箭头指向上方而不是下方。如下图所示：

![在此处输入图像描述](../Images/9ca30c6e2900b4ffdb0c083e52f288ec.png)

有没有人有如何做到这一点的例子？或者可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-13T22:44:47.453

伙计，您必须学习如何使用检查器 :) 技巧在伪类中`:after`。`:before`

所以，这里是那个教程的工作[演示](http://jsfiddle.net/LPbhS/)，我改变了一些 CSS，检查一下。

注意：这是 CSS3 有效的演示。这些伪类在旧版浏览器中不起作用，并且您不会看到箭头。过渡和其他 CSS3 奇特的东西也是如此。如果你不想要 JS，你应该意识到这一点。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-13T22:54:54.850

[http://jsfiddle.net/9yeAJ/](http://jsfiddle.net/9yeAJ/)

上面的小提琴说明了这样做的一种方法。希望它能让你走上正确的轨道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T22:39:11.860

查看 css3 过渡（动画）。您会发现充满悬停过渡和下拉菜单的精彩教程。

# regex - 正则表达式搜索符合“通配符”的文本？

> ID：12877626
> 
> 赞同：0
> 
> 时间：2012-10-13T22:32:59.743
> 
> 标签：regex, windows, string, search, line

我想使用支持正则表达式的程序搜索 250 个文件，但我不知道如何构建查询。

这是一个示例文件：

```
//////////////////////////////Crown Area Effects///////////////////////////////

// Super Spies
DbAreaEffectInfo SuperSpies
{
    name = text_carea_sprspies_name
    desc = text_carea_sprspies_desc
    effects = [
        // scale sabotage super-effect duration

        EffectDuration {
            range = SpaceTime

            player = Self
            // which effect's duration is this scaling
            effect = "SabotageBuilding"
            scale = 1.25
        }

        EffectDuration {
            range = SpaceTime

            player = Self
            // which effect's duration is this scaling
            effect = "ImprovedSabotageBuilding"
            scale = 1.25
        }

        EffectSpeed {
            range = Global
            mask = Spies
            player = Self
            // 25% faster
            scale = 1.25
        }

        EffectMaxHitPoints {
            range = Global
            mask = Spies
            player = Self
            // 25% more hit points
            scale = 1.25
        }

        EffectVisualGlow {
            range = Global
            mask = Spies
            player = Self
            GlowType = Good
            OwnerOnly = true
            Icon = icon_crown_superspies_s
            Tooltip = text_carea_sprspies_name
            VTooltip = vtt_power_unitinfo_SuperSpies
        }

        EffectIsACrown {
            range = Global
            mask = Spies
            player = Self

            crownType = kCrownType_Imperial
        }
    ]
} 
```

我想寻找这样的模式：

```
<ANYTHING, EVEN NULL>//<ANYTHING, EVEN NULL><MyString><AnyThing, EVEN NULL> 
```

例如：

```
<anything>//<anything>super<anything> 
```

这将产生以下结果：

```
 // scale sabotage super-effect duration 
```

什么正则表达式查询会给我想要的结果？

提前感谢您的时间和精力！

编辑：

我正在使用有效文件搜索 - [http://www.sowsoft.com/search.htm](http://www.sowsoft.com/search.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:36:45.467

标准正则表达式通配符是`.`（一个字符）。任意重复由 表示`*`。所以这应该为你解决问题：

```
~//(.*)super(.*)~ 
```

根据您的正则表达式引擎，您可能能够/必须省略 delimiters `~`。此外，由于`.`默认情况下不匹配换行符，因此第二个通配符将始终位于行尾，并且`super`必须与 . 出现在同一行`//`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:41:23.063

```
^\s*//.*?(STRINGYOUWANTTOSEARCHFOR).*$ 
```

假设 pcre/perlre 风格。

在 perlre 中，使用

```
^\s*//.*?(\QSTRINGYOUWANTTOSEARCHFOR\E).*$ 
```

以防止您正在寻找的字符串中出现奇怪的解释

其他正则表达式引擎/风格有不同的语法，请参阅[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)进行比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T22:35:13.033

直接的解决方案是使用

```
grep pattern /path/to/files* 
```

在一个壳里。

你可以下载[unxutils](http://unxutils.sourceforge.net/)`grep` for windows。

# ruby-on-rails - 如何从 MRI ruby rails 应用程序运行 jruby 脚本？

> ID：12877631
> 
> 赞同：2
> 
> 时间：2012-10-13T22:33:50.373
> 
> 标签：ruby-on-rails, ruby, jruby

我有一个用 jRuby 编写的脚本，我需要从 rails 应用程序（在 MRI ruby​​ 上运行）执行这个脚本。我有这样的代码：

```
class User < ActiveRecord::Base
  def run_script!
    system "jruby /path/to/my/script/script.rb #{id}"
  end
end 
```

它在开发中有效！但是在 Ubuntu 生产服务器上它会返回`nil`，我不知道如何让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T22:39:09.603

从`Kernel#system` [文档](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)中：

> 如果命令执行失败，则返回 nil。错误状态在 $? 中可用。

那么`$?`告诉你什么？

# c++ - 数字优化算法

> ID：12877639
> 
> 赞同：1
> 
> 时间：2012-10-13T22:36:07.463
> 
> 标签：c++, algorithm, stdin

给定一个递增顺序的数字列表和一定的总和，我正在尝试实现找到总和的最佳方法。首先使用最大的数字

```
A sample input would be:
3
1
2
5
11 
```

其中第一行是我们正在使用的数字的数量，最后一行是所需的总和

```
the output would be:
1 x 1
2 x 5 
```

等于 11

我正在尝试使用标准输入来解释这个[https://www.classle.net/book/c-program-making-change-using-greedy-method](https://www.classle.net/book/c-program-making-change-using-greedy-method)

这是我到目前为止得到的

```
#include <iostream>
using namespace std;

int main()
{
 int sol = 0; int array[]; int m[10];

 while (!cin.eof())
  {
   cin >> array[i];  // add inputs to an array
   i++;
  }

 x = array[0]; // number of 
 for (int i; i < x ; i++) {
  while(sol<array[x+1]){
     // try to check all multiplications of the largest number until its over the sum
     // save the multiplication number into the m[] before it goes over the sum;
     //then do the same with the second highest number and check if they can add up to sum

     }
  cout << m[//multiplication number] << "x" << array[//correct index]
  return 0;
} 

   if(sol!=array[x+1])
 {
 cout<<endl<<"Not Possible!";
 } 
```

}

很难找到一种有效的方法来尝试从最大数字开始的所有可能组合？任何建议都会很有帮助，因为我知道我很清楚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T22:39:33.720

该问题是[子集和问题](http://en.wikipedia.org/wiki/Subset_sum_problem)的变体，即[NP-Hard](http://en.wikipedia.org/wiki/NP-hard)。

NP-Hard 问题是一个问题（除其他外） - 没有已知的多项式解决方案，因此“首先获得最高”的贪婪方法失败了。

然而，对于这个 NP-Hard 问题，有一个使用动态规划的伪多项式解决方案。您可以多次选择每个数字的问题称为 con change 问题。

[此页面](http://www.algorithmist.com/index.php/Coin_Change)包含问题的解释和可能的解决方案。

# python - 处理多个套接字连接

> ID：12877643
> 
> 赞同：5
> 
> 时间：2012-10-13T22:36:21.113
> 
> 标签：python, sockets, client-server

我正在用 Python 编写一个客户端-服务器应用程序。这个想法是拥有一个主服务器和数千个将与之连接的客户端。服务器将随机发送小文件给客户端进行处理，客户端必须每分钟完成工作并将其状态更新到服务器。我的问题是，目前我只有一个又小又旧的家庭服务器，所以我认为它无法处理这么多的连接。也许你可以帮我解决这个问题：

*   如何增加我的服务器中的连接数？
*   如何平衡客户端的负载？
*   我怎样才能改善沟通？我的意思是，我需要在服务器上有一个客户端列表及其状态（可能在数据库中？），并且会不时收到此更新，因此我不需要永久连接。使用 UDP 发送更新是个好主意吗？如果不是，我是否必须在每次收到更新时创建一个新线程？

**编辑：**我更新了问题以更好地解释问题，但主要是为了让有同样问题的人足够清楚。@TimMcNamara 答案中实际上有一个很好的解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-13T23:32:46.580

## 为成功做好准备：访问模式很重要

哪些设计决策会影响您实施网络解决方案的方式？您立即开始列出一些：

*   可编程性
*   有效内存
*   可用处理器
*   可用带宽

这看起来是一个很棒的清单。我们想要一些易于编程且规格相当高的东西。但是，这个列表失败了。我们在这里所做的只是查看服务器。这可能是我们在 Web 应用程序中可以控制的全部内容，但是我们可以完全控制的分布式系统，比如传感器网络呢？

假设我们有 10,000 台设备想要用它们每分钟更新的最新传感器读数来更新您。现在，我们可以使用与所有设备保持并发连接的高端服务器。

但是，即使您拥有一台非常高端的服务器，您仍然可能会遇到性能问题。如果所有设备都使用相同的时钟，并且都尝试在每分钟的顶部发送数据，那么服务器将在每分钟 1-2 秒内执行大量 CPU 工作，其余时间则不做任何事情。效率极低。

由于我们可以控制传感器，我们可以要求它们自己进行负载平衡。一种方法是给每个设备一个 ID，然后使用模数运算符仅在每分钟正确的时间发送数据：

```
import time        

def main(device_id):
    data = None
    second_to_send = device_id % 60
    while 1:
        time_now = time.localtime().tm_sec
        if time_now == 0:
            data = read_sensors()
        if time_now == second_to_send and data:
            send(data)
        time.sleep(1) 
```

这种类型的负载平衡的一个结果是我们不再需要如此高功率的服务器。我们认为与所有人保持联系所需的内存和 CPU 并不是必需的。

我在这里想说的是，您应该确保您的特定解决方案专注于整个问题。根据您提供的简短描述，我们似乎不需要一直保持大量连接。但是，假设我们确实需要 100% 的连接。我们有什么选择？

## 非阻塞网络

非阻塞 I/O 的影响意味着在没有数据时向文件描述符询问数据的函数会立即返回。对于网络，这可能会很糟糕，因为尝试从套接字读取的函数不会向调用者返回任何数据。因此，有时生成一个线程然后调用`read`. 这样线程内部的阻塞不会影响程序的其余部分。

线程的问题包括内存效率低下、与线程创建相关的延迟以及与上下文切换相关的计算复杂性。

要利用非阻塞 I/O，您可以在`while 1:`循环中潜在地轮询每个相关的文件描述符。那会很棒，除了 CPU 将以 100% 运行。

为了避免这种情况，已经创建了基于事件的库。当没有工作要做时，它们将以 0% 的速度运行 CPU，仅在要读取数据以发送时激活。在 Python 世界中，[Twisted](http://twistedmatrix.com/trac/)、[Tornado](http://www.tornadoweb.org/)或[gevent](http://www.gevent.org/)是大玩家。但是，有[很多选择](http://wiki.python.org/moin/Concurrency/)。特别是[柴油](http://diesel.io)看起来很有吸引力。

以下是 Tornado 网页的相关摘录：

> 因为它是非阻塞的，并且使用 epoll 或 kqueue，所以它可以同时处理数千个站立连接，这意味着它非常适合实时 Web 服务。

这些选项中的每一个都采用略有不同的方法。Twisted 和 Tornado 在方法上非常相似，都依赖于非阻塞操作。Tornado 专注于 Web 应用程序，而 Twisted 社区则对更广泛的网络感兴趣。随后有更多用于非 HTTP 通信的工具。

gevent 不同。该库修改了套接字调用，以便每个连接都在一个非常轻量级的类似线程的上下文中运行，尽管实际上这对您作为程序员是隐藏的。每当出现阻塞调用时，例如数据库查询或其他 I/O，gevent 都会非常快速地切换上下文。

这些选项中的每一个的结果是您能够在单个操作系统线程中为许多客户端提供服务。

## 调整服务器

您的操作系统对它允许的连接数施加了限制。如果您达到您正在谈论的数字，您可能会达到这些限制。特别是，Linux 为`/etc/security/limits.conf`. 您可以通过调用`ulimit`shell 来访问用户的限制：

```
$ ulimit -a
核心文件大小（块，-c）0
数据段大小 (kbytes, -d) 无限制
调度优先级 (-e) 0
文件大小（块，-f）无限制
待处理信号 (-i) 63357
最大锁定内存 (kbytes, -l) 64
最大内存大小 (kbytes, -m) 无限制
打开文件 (-n) 1024
管道大小（512 字节，-p）8
POSIX 消息队列（字节，-q）819200
实时优先级 (-r) 0
堆栈大小（千字节，-s）8192
cpu时间（秒，-t）无限制
最大用户进程 (-u) 63357
虚拟内存 (kbytes, -v) 无限制
文件锁 (-x) 无限制

```

我在这里加粗了最相关的线路，即`open files`. 打开的外部连接被认为是打开的文件。一旦达到 1024 限制，任何应用程序都无法打开另一个文件，任何客户端也无法连接到您的服务器。假设您有一个用户，`httpd`作为您的 Web 服务器。这应该让您了解可以进行哪些修改以提高该限制：

```
httpd soft nofile 20480
httpd hard nofile 20480 
```

对于极高的容量，您可能会达到系统范围的限制。您可以通过以下方式查看它们`cat /proc/sys/fs/file-max`：

```
$ cat /proc/sys/fs/file-max
801108 
```

要修改此限制，请使用`sudo sysctl -w fs.file-max=n`，其中 n 是您希望允许的打开文件数。修改`/etc/sysctl.conf`以使其在重新启动后仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:38:16.853

一般来说，即使在非常普通的家庭服务器上同时拥有数万个套接字也没有问题。

只要确保您没有为每个连接创建新线程或进程即可。

# ruby-on-rails - 在 Backbone 和 Rails 之间更新、保存和删除的问题

> ID：12877646
> 
> 赞同：0
> 
> 时间：2012-10-13T22:36:46.650
> 
> 标签：ruby-on-rails, backbone.js, cors

我正在尝试在客户端创建一个具有骨干网的应用程序，并在服务器端创建一个 Rails 应用程序。它有效，但我在创建、更新和销毁时遇到问题。

我正在这样做：

```
m = new MyFirstProjectServer.Models.Inquiry({id: 1})
m.fetch() #work fine
m.set({title: 'title', description: 'description'}) 
m.save() #don't work 
```

ajax 调用在 save 上完成：

```
Access-Control-Allow-Head...    X-Requested-With, X-Prototype-Version
Access-Control-Allow-Meth...    POST, GET, OPTIONS, PUT
Access-Control-Allow-Orig...    *
Access-Control-Max-Age  1728000
Cache-Control   no-cache
Connection  Keep-Alive
Content-Length  0
Content-Type    text/plain; charset=utf-8
Date    Sat, 13 Oct 2012 22:27:33 GMT
Server  WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20)
X-Request-Id    a5b58b91a95b72f30849d39db0f0358f
X-Runtime   0.002259
x-ua-compatible IE=Edge
Requêtevoir le code source
Accept  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-US,en;q=0.5
Access-Control-Request-He...    content-type
Access-Control-Request-Me...    PUT
Connection  keep-alive
Host    192.168.20.101:3000
Origin  http://localhost:4567
User-Agent  Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0 
```

请求在服务器端处理：

```
Started OPTIONS "/inquiries/2" for 192.168.20.101 at 2012-10-13 18:27:33 -0400
Processing by InquiriesController#options as HTML
  Parameters: {"id"=>"2"}
  Rendered text template (0.0ms)
Completed 200 OK in 0ms (Views: 0.3ms | ActiveRecord: 0.0ms) 
```

最后，它在保存回调中抛出了这个错误：

```
readyState 0
responseText ""
status 0
statusText "error" 
```

这是我的控制器：

```
class InquiriesController < ApplicationController
  ...
  def show
    render json: Inquiry.find(params[:id])
  end

  def create
    @inquiry = Inquiry.new(params[:inquiry])
    if @inquiry.save
      render json: @inquiry, status: :created, location: @inquiry
    else
      render json: @inquiry.errors, status: :unprocessable_entity
    end
  end
  ...

  def options
    headers['Access-Control-Allow-Origin'] = '*'
    headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS, PUT. DELETE'
    headers['Access-Control-Allow-Headers'] = 'X-Requested-With, X-Prototype-Version'
    headers['Access-Control-Max-Age'] = '1728000'
    render :text => '', :content_type => 'text/plain'
  end
end 
```

我在 ApplicationController 上有这个：

```
class ApplicationController < ActionController::Base
  after_filter :cors_set_access_control_headers

  protected
  def cors_set_access_control_headers
    headers['Access-Control-Allow-Origin'] = '*'
    headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS, PUT'
    headers['Access-Control-Max-Age'] = "1728000"
  end
end 
```

这是我的路线：

```
MyFirstProjectServer::Application.routes.draw do
  get "main/index"
  root to: "main#index"

  resources :inquiries
  match '/inquiries', controller: :inquiries, action: :options, constraints: {method: 'OPTIONS'}
  match '/inquiry', controller: :inquiries, action: :options, constraints: {method: 'OPTIONS'}
  match '/inquiry/:id', controller: :inquiries, action: :options, constraints: {method: 'OPTIONS'}
  match '/inquiries/:id', controller: :inquiries, action: :options, constraints: {method: 'OPTIONS'}
end 
```

最后，这是我的模型：

```
class MyFirstProjectServer.Models.Inquiry extends Backbone.Model
  urlRoot:"http://192.168.20.101:3000/inquiries/" 
```

你有解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:37:39.167

解决方案非常简单。

我改变了这个：

```
headers['Access-Control-Allow-Headers'] = 'X-Requested-With, X-Prototype-Version' 
```

为了这 ：

```
headers['Access-Control-Allow-Headers'] = 'X-CSRF-Token, X-Requested-With, Accept, Accept-Version, Content-Length, Content-MD5, Content-Type, Date, X-Api-Version' 
```

# events - Phonegap在线方法和window.location

> ID：12877649
> 
> 赞同：1
> 
> 时间：2012-10-13T22:37:41.783
> 
> 标签：events, cordova

我是 phonegap 的新手，我仍在努力了解基础知识。我想制作一个简单的应用程序，当它启动时它会检查它是否有互联网连接，如果有，我希望它重定向到一个网站或在网络视图中加载该网站。如果它没有互联网连接，那么我希望它留在应用程序上并只显示静态内容。

这是我到目前为止所拥有的。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Online Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    // Cordova is loaded and it is now safe to make calls Cordova methods
    //
    function onDeviceReady() {
        document.addEventListener("online", onOnline, false);
    }

    // Handle the online event example
    //
    function onOnline() {
      window.location.href ="http://google.com";
    }

    </script>
  </head>
  <body onload="onLoad()">
  </body>
</html> 
```

我还将 OpenAllWhitelistURLsInWebView 设置为 true。

在线事件是否仅在应用程序离线时才有效，然后在应用程序重新上线时被调用？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T08:12:10.913

不，如果连接了互联网，应用程序启动时会触发 Online 事件，并且当应用程序从离线模式转到在线模式时也会调用它。

如果你想在 phonegap 中打开一个外部网站，你可以为它添加一个子浏览器插件，或者你可以在嵌入式 webveiw 中打开一个网站。window.location.href 在Phonegap 中不起作用。

我不知道您是在使用 iOS 还是 Android，所以[iOS](https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/ChildBrowser)和[Android的链接](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T01:23:11.177

将您的在线事件处理程序的接线向上移动（即这一行）：

```
document.addEventListener("online", onOnline, false); 
```

进入你的 onLoad() 函数。我发现在线/离线事件需要在加载时注册，而不是出于某种原因稍后注册。

# macos - 启动脚本 osx 启动守护进程

> ID：12877650
> 
> 赞同：1
> 
> 时间：2012-10-13T22:37:44.567
> 
> 标签：macos, osx-lion, launch-daemon

我正在尝试在启动时在我的机器（mbp 视网膜 osx 山狮）上运行可执行文件。

这是脚本的样子：

```
<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"> 
<plist version="1.0"> 
<dict> 
    <key>Label</key> 
    <string>com.netresponsibility.daemon</string> 
    <key>ProgramArguments</key> 
    <array> 
        <string>/usr/bin/net-responsibility</string> 
        <string>--daemon</string> 
    </array> 
    <key>OnDemand</key> 
        <true/> 
</dict> 
</plist> 
```

我把它放在*/System/Library/LaunchDaemons/*目录下。它被命名`com.netresponsibility.daemon.plist`并具有与所有其他人相同的权限。

```
-rw-r--r--  1 root  wheel  420 Oct 11 12:39 com.netresponsibility.daemon.plist 
```

当我重新启动可执行文件时不会调用。关于我缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T22:54:38.677

首先，您不应该在 /System/Library 中放入任何东西。该路径是为 OS X 文件保留的。您应该将文件放在 /Library/LaunchDaemons/ 中。

其次，你需要告诉系统加载你的 plist，仅仅把它放在那里是不够的。为此，您使用`launchctl`：

```
$ sudo launchctl load -w /Library/LaunchDaemons/com.netresponsibility.daemon.plist 
```

有关更多信息，请使用 man launchctl。

# objective-c - 什么时候在objective-c中使用setter属性'copy'？

> ID：12877652
> 
> 赞同：7
> 
> 时间：2012-10-13T22:37:57.600
> 
> 标签：objective-c, ios, ios5, setter

我了解通常您对 NSStrings 使用**副本**，以便您的属性保持与分配时相同的值，即使尝试在其他地方重新设置它也是如此。

但我很难完全理解这个概念。这是否适用于基本上任何类型的对象（不仅仅是 NSStrings）？

所以我的问题是，**“我应该将什么样的属性设置为‘复制’，为什么？”**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-13T22:48:09.220

像字符串这样的简单数据位对象，不会引用应用程序中的大量其他对象，非常适合复制。

当然，现在您可以保留字符串之类的东西。这将正常工作。但是，如果你有一个可变字符串，并且你修改了它会怎样。现在，引用该字符串的所有其他对象都将看到该修改。这可能不是你想要的。这是复制“更简单”的原因之一，因为对该数据的任何更改都本地化为那段代码。

另一方面，假设您有一个为您的应用程序编写的类的实例。它在你的应用程序中引用了其他对象，它有大量自己的字符串或其他值，它是一个复杂的野兽。现在复制这个对象可能不是一个好主意。很有可能，如果您修改此对象，那么您*希望*将更改传播到每个拥有引用的对象。即使你确实复制了它，你需要一个浅拷贝（一个新实例，但它的 ivars 引用相同的对象）还是一个深拷贝（一个包含每个 ivar 的新副本的新实例）？并且有问题的对象甚至可能不支持`<NSCopying>`，这意味着它在技术上根本无法复制。

* * *

所以总结一下：

*   `copy`：对象是小的、原子的数据，没有对其他对象的任何内部引用。
*   `retain`: 几乎所有其他类型的物体。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T22:45:12.003

客户端代码可以将 NSMutableString 对象分配给 NSString 属性。如果该属性被定义为 strong 或其他一些非复制属性，那么如果客户端稍后更改可变字符串，则该属性的值现在将不同。通过将属性设置为“复制”，会生成字符串值的副本，这样可以确保值不会在您背后更改。

因此，基本上，只要属性用于具有可变对应物的类型并且您希望确保该值不会在您身上发生变化，您就应该使用 copy。

# php - wordwrap php+ 无法解决这个问题

> ID：12877654
> 
> 赞同：0
> 
> 时间：2012-10-13T22:38:19.033
> 
> 标签：php, word-wrap, break

我有这个完美地完成这项工作的 php 脚本。

但是，打印出来的结果在一行上，我需要它与 wordwrap 一起使用。将行限制为 X 个字符，然后开始新行。

我不知道在哪里输入 wordwrap 命令...

（这里是主要代码）

```
/* Connecting, selecting database */
$link = mysql_connect("XXXXXX", "XXXXXXX", "XXXXXXXX") or die("Could not connect : " . mysql_error());
echo "";
mysql_select_db("XXXXXXXX") or die("Could not select database");

/* Performing SQL query */
$result = mysql_query("SELECT XXXXXXXFROM XXXXXXXwhere Date = CURDATE()") or die("SELECT Error: " . mysql_error());
/* $num_rows = mysql_num_rows($result); */
print "<table border=0 align=center dir=rtl>\n";
while ( $get_info = mysql_fetch_row($result) ) {
    print "<tr>\n<br /><br /><br /><br />";
    foreach ( $get_info as $field )
        print "\t<td><font face=arial size=4/>$field </font></td>\n";
    print "</tr>\n";
}
print "</table>\n"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:48:47.503

```
print "\t<td><font face=arial size=4/>".wordwrap($field, 20, '<br />')."</font></td>\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:43:41.040

例如，您可以修剪字段中的字符（0 - 开始，6 - 在第一个字符 (0) 之后显示 6 个字符）：

```
print "\t<td><font face=arial size=4/>".substr($field, 0, 6)."</font></td>\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T22:58:52.740

您应该计算每行的 $field 中的字符串，并计算该行的长度字符串在定义下。如果是在定义的有限区域内的长度，这将打印它的长度。

```
$counted_strings = 0;

foreach ($get_info as $field) 

    $counted_strings = strlen($field);
    $counted_strings++;

    if ($counted_strings <= 30)
    {
        print "\t<td><font face=arial size=4/>$field </font></td>\n"; 
        print "</tr>\n";        
    }

} 
```

# c - 简单的程序不会在 C 中编译

> ID：12877658
> 
> 赞同：-1
> 
> 时间：2012-10-13T22:38:58.113
> 
> 标签：c, gcc, compiler-construction

好的，我马上就知道这将是一个愚蠢的问题，但我不明白为什么这个简单的 C 程序没有编译。

```
#include <stdio.h>
#include <stdlib.h>
typdef struct CELL *LIST;
struct CELL {
    int element;
    LIST next;
};
main() {
    struct CELL *value;
    printf("Hello, World!");
} 
```

我是 C 编程的新手，不是一般的编程，而是 C。我熟悉 Objective-C、Java、Matlab 和其他一些，但由于某种原因，我无法弄清楚这一点。我正在尝试在 OS X 中使用 GCC 编译它，如果这会有所不同。谢谢你的帮助！

我收到的错误消息是

```
functionTest.c:5: error: expected specifier-qualifier-list before ‘LIST’
functionTest.c:7: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘struct’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:42:43.523

主要原因是你打错字`typedef`了`typdef`。但是，您还应该做其他几件事：

*   添加`return 0;`到末尾`main()`。
*   将签名更改`main`为`int main(void)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T22:43:15.310

最重要的是：你拼错了 typedef。

然后，至少现在，我们通常会在 main 中添加一个返回类型，如下所示：

```
int main() 
```

此外， main 应该返回退出状态，所以：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct CELL *LIST;

struct CELL {
  int element;
  LIST next;
};

int main() {
  struct CELL *value;
  printf("Hello, World!\n");
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T22:43:37.573

您是否尝试使用 编译它`gcc -Wall -g yourprog.c -o yourbinary`？

我越来越：

```
yourprog.c:3:8: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'struct'
yourprog.c:6:5: error: unknown type name 'LIST'
yourprog.c:8:1: warning: return type defaults to 'int' [-Wreturn-type]
yourprog.c: In function 'main':
yourprog.c:9:18: warning: unused variable 'value' [-Wunused-variable]
yourprog.c:11:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

你拼错了`typedef`，你应该改变签名`main`并添加一个`return 0;`里面。

顺便说一句，我觉得你的`typedef`品味很差。我建议编写（像 Gtk 那样）类似`typedef struct CELL CELL_t`和声明的代码，`CELL_t* value = NULL.`因为你真的想记住它`value`是一个指向`CELL_t`. 特别是，我讨厌 typedef-s 之类的`typedef struct CELL* CELL_ptr;`，因为我发现快速理解什么是指针和什么不是指针非常重要（出于可读性原因）。

其实我更愿意建议

```
 struct cell_st;
 typedef struct cell_st cell_t;
 cell_t *value = NULL; 
```

（我确实喜欢将所有指针初始化为 NULL）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T22:40:43.900

在你的 main 函数中添加一个 return

# android - 用于存储内容类型和子内容的数据库模式（ANDROID _ SQLITE :)

> ID：12877663
> 
> 赞同：2
> 
> 时间：2012-10-13T22:39:26.273
> 
> 标签：android, database, sqlite

**我想要达到的目标**

=> 创建一个显示汽车制造商列表和他们制造的车型类型的 ANDROID 应用程序。因此，当用户打开应用程序时，他们会看到制造商列表。（所有这些数据都将从数据库中加载）

像

1.丰田

2.GMC等。

所以当他们点击丰田时，他们会看到丰田制造的不同汽车（通过从数据库中加载它们）。会有一系列屏幕显示不同的模型。

屏幕 1：Toyota Camry [一张图片、小细节和一个（视频或音频）]

屏幕 2：Toyota Carina II[SAME THING HERE，（视频或音频），有关汽车的图片和详细信息] 等...

所以在每个屏幕中都会有某种与汽车模型相关的媒体，如上图所示。宣传汽车的视频或音频以及与该模型相关的某种文本。

现在我正在下载这些信息，并希望将制造商及其汽车的此类信息保存在数据库中。我只是想不出一个好的数据库模式来保护这种数据并让我加载回屏幕。

--> 如果你能给我一个通用的数据库模式，比如我应该拥有的表数量等。我将不胜感激。

**我想到但看起来不太好的架构**

==>**制造商表**[*MANUFACTURERS _ID , COMPANY_NAME , **型号 ???我错过了什么???* **]

==> **MODELS_TABLE** [*MANUFACTURERS _ID，MODEL_ID，MODEL_NAME*]

==>**相关媒体**[*MODEL_ID，VIDEO_LOCATION，AUDIO_LOCATION，DETAILS_ABOUT_THE_CAR*]

如您所见，设计并不好：/请提供帮助，**在此先感谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:40:13.017

对此的任何答案都可能有点主观，但我个人的方法如下......

两个表称为`MANUFACTURERS`和`MODELS`。

对于`MANUFACTURERS`表格，我将具有以下列...

```
_id, company_name 
```

对于`MODELS`表格，我将具有以下列...

```
_id, manufacturer_id, model_name, description, video_uri, audio_uri 
```

我已经使用`_id`了这两个表，因为 Android`Cursor`需要一个`_id`在与`Adapters`. 创建`_id`为`UNIQUE PRIMARY KEY`.

我也不认为有必要为媒体建立一个单独的表格，因为它与每个车型直接相关，并且数据可以直接包含在`MODELS`表格中。

我将`description`其用作通用术语而不是`DETAILS_OF_CAR`用于`_uri`视频和音频，因为它暗示媒体可能存储在本地或网络服务器上。

其他人可能会采取不同的方法，但根据您的描述，这是我做事的方式。

# lwjgl - 尝试在 Slick2D 中添加 VBO

> ID：12877667
> 
> 赞同：0
> 
> 时间：2012-10-13T22:39:41.780
> 
> 标签：lwjgl, vbo, slick2d

我正在尝试在 slick2D 中添加 VBO。我在网上找到的只是如何在 3D 上下文中初始化 VBO。任何人都知道如何在 2D 中做到这一点？

我的实际测试（在光滑的上下文中制作 4 个正方形）使这个（我添加黑色的 corrds）：（[来源：][[canardpc.com](http://tof.canardpc.com/view/1594ca1b-645c-4736-99e6-0507a0b3777a.jpg)][）] 。[![slick2D 中的 vbo](../Images/a56fe095f997049e0cb230802ddc2362.png)](https://i.stack.imgur.com/zB05q.jpg)

在我的 init 下方（在我的 GameState 的 init 方法中）：

```
// set up OpenGL
GL11.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);

GL11.glEnableClientState(GL11.GL_VERTEX_ARRAY);
GL11.glEnableClientState(GL11.GL_COLOR_ARRAY);

GL11.glMaterial(GL11.GL_FRONT, GL11.GL_SPECULAR, floatBuffer(1.0f, 1.0f, 1.0f, 1.0f));
GL11.glMaterialf(GL11.GL_FRONT, GL11.GL_SHININESS, 25.0f);

// set up the camera
GL11.glMatrixMode(GL11.GL_PROJECTION);
GL11.glLoadIdentity();

GL11.glMatrixMode(GL11.GL_MODELVIEW);
GL11.glLoadIdentity();

// create our vertex buffer objects
IntBuffer buffer = BufferUtils.createIntBuffer(1);
GL15.glGenBuffers(buffer);

int vertex_buffer_id = buffer.get(0);
FloatBuffer vertex_buffer_data = BufferUtils.createFloatBuffer(vertex_data_array.length);
vertex_buffer_data.put(vertex_data_array);
vertex_buffer_data.rewind();

GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, vertex_buffer_id);
GL15.glBufferData(GL15.GL_ARRAY_BUFFER, vertex_buffer_data, GL15.GL_STATIC_DRAW); 
```

以及渲染（在游戏状态的渲染方法中）：

```
g.setDrawMode(Graphics.MODE_ALPHA_BLEND) ;

// perform rotation transformations
GL11.glPushMatrix();

// render the cube
GL11.glVertexPointer(3, GL11.GL_FLOAT, 28, 0);
GL11.glColorPointer(4, GL11.GL_FLOAT, 28, 12);

GL11.glDrawArrays(GL11.GL_QUADS, 0, vertex_data_array.length / 7);

// restore the matrix to pre-transformation values
GL11.glPopMatrix(); 
```

我认为有些不对劲，因为所有其他渲染都消失了（文本和精灵）并且坐标不再是窗口大小。

编辑：我尝试这样`GL11.glOrtho(0,800,600,0,-1,1);`的事情，结果很奇怪

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T14:12:14.677

我通过添加 GL11.glOrtho(0,800,600,0,-1,1); 解决了这个问题。并禁用 glEnableClientState (glDisableClientState)。

但我最终将转向 libgdx 框架，该框架本身就是这样做的。

# c# - 停靠面板布局

> ID：12877668
> 
> 赞同：1
> 
> 时间：2012-10-13T22:39:49.783
> 
> 标签：c#, .net, winforms, panels, dockpanel

在 winforms 中，我试图设置 4 个停靠的面板：顶部、左侧、右侧和中间。但是当我停靠顶部并尝试将另一个面板停靠在左侧时，左侧面板覆盖了顶部面板..我在那里做错了吗？还有另一种对接几个面板的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:47:21.773

在选择它们的停靠属性之前，您可能需要小心不要将面板拖放到任何其他面板中，否则它们会假定它们被拖放到的面板是它们的父级。

我通过简单地使用 4 个面板创建了您在下面看到的设置，每个面板单独放置，然后分配正确的停靠属性。我确保当我将它们放下时，它们会放在任何现有面板当前未使用的空间中。

我想这就是你所追求的，对吗？

![在此处输入图像描述](../Images/3f208b33b1bc56009ce31d739dc86299.png)

# visual-studio-2012 - Visual Studio 模板忽略模板中的一些项目设置

> ID：12877669
> 
> 赞同：1
> 
> 时间：2012-10-13T22:40:03.573
> 
> 标签：visual-studio-2012, visual-studio-templates

我创建了一个可以使用的新模板。但是它只使用**一些**项目设置

我制作了一个项目，其中包含一个工作的`libSDL`hi world 示例。我导出为模板，但模板没有保存我的一些设置：（它“保存”它们，但新项目会忽略它们。）

忽略的设置：

```
include header folders:
    for .h files
    for .lib files
linker args: SDLmain.lib SDL.lib
windows subsystem: /SUBSYSTEM:WINDOWS 
```

这是保存的`/template/sdl/sdl.vcxproj`文件，*设置实际上出现在其中，但它们被忽略了*。

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup Label="ProjectConfigurations">
    <ProjectConfiguration Include="Debug|Win32">
      <Configuration>Debug</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
    <ProjectConfiguration Include="Release|Win32">
      <Configuration>Release</Configuration>
      <Platform>Win32</Platform>
    </ProjectConfiguration>
  </ItemGroup>
  <PropertyGroup Label="Globals">
    <ProjectGuid>{8DDA73A6-86DD-4B03-BA9B-54BE878B648C}</ProjectGuid>
    <RootNamespace>$safeprojectname$</RootNamespace>
  </PropertyGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.Default.props" />
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="Configuration">
    <ConfigurationType>Application</ConfigurationType>
    <UseDebugLibraries>true</UseDebugLibraries>
    <PlatformToolset>v110</PlatformToolset>
    <CharacterSet>MultiByte</CharacterSet>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'" Label="Configuration">
    <ConfigurationType>Application</ConfigurationType>
    <UseDebugLibraries>false</UseDebugLibraries>
    <PlatformToolset>v110</PlatformToolset>
    <WholeProgramOptimization>true</WholeProgramOptimization>
    <CharacterSet>MultiByte</CharacterSet>
  </PropertyGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.props" />
  <ImportGroup Label="ExtensionSettings">
  </ImportGroup>
  <ImportGroup Label="PropertySheets" Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
  </ImportGroup>
  <ImportGroup Label="PropertySheets" Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
    <Import Project="$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props" Condition="exists('$(UserRootDir)\Microsoft.Cpp.$(Platform).user.props')" Label="LocalAppDataPlatform" />
  </ImportGroup>
  <PropertyGroup Label="UserMacros" />
  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
    <IncludePath>C:\cpp_libs\SDL-1.2.15\include;$(IncludePath)</IncludePath>
    <ReferencePath>C:\cpp_libs\SDL-1.2.15\lib\x86;$(ReferencePath)</ReferencePath>
    <LibraryPath>C:\cpp_libs\SDL-1.2.15\lib\x86;$(LibraryPath)</LibraryPath>
    <SourcePath>C:\cpp_libs\SDL-1.2.15\include;$(SourcePath)</SourcePath>
  </PropertyGroup>
  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
    <ClCompile>
      <WarningLevel>Level3</WarningLevel>
      <Optimization>Disabled</Optimization>
    </ClCompile>
    <Link>
      <GenerateDebugInformation>true</GenerateDebugInformation>
    </Link>
  </ItemDefinitionGroup>
  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Release|Win32'">
    <ClCompile>
      <WarningLevel>Level3</WarningLevel>
      <Optimization>MaxSpeed</Optimization>
      <FunctionLevelLinking>true</FunctionLevelLinking>
      <IntrinsicFunctions>true</IntrinsicFunctions>
    </ClCompile>
    <Link>
      <GenerateDebugInformation>true</GenerateDebugInformation>
      <EnableCOMDATFolding>true</EnableCOMDATFolding>
      <OptimizeReferences>true</OptimizeReferences>
      <AdditionalDependencies>SDLmain.lib;SDL.lib;%(AdditionalDependencies)</AdditionalDependencies>
      <SubSystem>Windows</SubSystem>
    </Link>
  </ItemDefinitionGroup>
  <ItemGroup>
    <ClCompile Include="Source.cpp" />
  </ItemGroup>
  <Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
  <ImportGroup Label="ExtensionTargets">
  </ImportGroup>
</Project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T06:46:52.273

项目系统很可能在创建文件时实际删除了这些项目：当您创建新项目时，Visual Studio 会在后台运行一个向导，该向导可能会影响新创建的`.vcxproj`文件中实际结束的内容。

这些向导特定于项目类型，因此您实际上可以通过文件中的元素[提供自己的](http://msdn.microsoft.com/en-us/library/ms185301%28v=vs.80%29.aspx)向导。当然，通过覆盖项目创建逻辑，您可能会失去某些功能/行为（除非有一种方法可以继承原始向导的基本程序集）。`<WizardExtension>``.vstemplate`

或者，我过去使用的一个解决方案是创建一个 VSPackage 来处理该`SolutionEvents_ProjectAdded`方法（在 中`DTE.SolutionEvents`）。每当创建新项目或将新项目添加到解决方案时都会调用此方法，因此您可以根据需要使用它来设置项目。

请注意，您需要一种方法来确保它只影响您特定类型的项目；`.vcxproj`模板文件中的标志会执行此操作。

# python - 使用递归计算字符串中的元音

> ID：12877671
> 
> 赞同：2
> 
> 时间：2012-10-13T22:40:31.787
> 
> 标签：python, string, recursion, count

我知道递归是一个函数调用自身的时候，但是我无法弄清楚如何让我的函数调用它自己来获得所需的结果。我需要简单地计算给函数的字符串中的元音。

```
def recVowelCount(s):
    'return the number of vowels in s using a recursive computation'
    vowelcount = 0
    vowels = "aEiou".lower()
    if s[0] in vowels:
        vowelcount += 1
    else:
        ??? 
```

* * *

多亏了这里的一些见解，我最终想到了这个。

```
def recVowelCount(s):
'return the number of vowels in s using a recursive computation'
vowels = "aeiouAEIOU"
if s == "":
    return 0
elif s[0] in vowels:
    return 1 + recVowelCount(s[1:])
else:
    return 0 + recVowelCount(s[1:]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T23:10:03.090

试试这个，这是一个简单的解决方案：

```
def recVowelCount(s):
    if not s:
        return 0
    return (1 if s[0] in 'aeiouAEIOU' else 0) + recVowelCount(s[1:]) 
```

它考虑了元音为大写或小写的情况。它可能不是递归遍历字符串的最有效方法（因为每个递归调用都会创建一个新的切片字符串），但它很容易理解：

*   基本情况：如果字符串为空，则元音为零。
*   递归步骤：如果第一个字符是元音，则在解中加 1，否则加 0。无论哪种方式，通过删除第一个字符来推进递归并继续遍历字符串的其余部分。

第二步最终将字符串减少到零长度，从而结束递归。或者，可以使用[尾递归](http://en.wikipedia.org/wiki/Tail_call)来实现相同的过程- 并不是说​​它对性能有任何影响，因为 CPython 没有实现[尾递归消除](http://neopythonic.blogspot.com/2009/04/tail-recursion-elimination.html)。

```
def recVowelCount(s):
    def loop(s, acc):
        if not s:
            return acc
        return loop(s[1:], (1 if s[0] in 'aeiouAEIOU' else 0) + acc)
    loop(s, 0) 
```

只是为了好玩，如果我们取消解决方案必须是递归的限制，这就是我解决它的方法：

```
def iterVowelCount(s):
    vowels = frozenset('aeiouAEIOU')
    return sum(1 for c in s if c in vowels) 
```

无论如何，这有效：

```
recVowelCount('murcielago')
> 5

iterVowelCount('murcielago')
> 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T22:47:14.733

您的函数可能需要大致如下所示：

*   如果字符串为空，则返回 0。
*   如果字符串不为空并且第一个字符是元音，则返回 1 + 对字符串其余部分的递归调用的结果
*   如果字符串不为空并且第一个字符不是元音，则返回对字符串其余部分的递归调用的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T22:41:58.933

使用 slice 删除第一个字符并测试其他字符。您不需要 else 块，因为您需要为每种情况调用该函数。如果你把它放在 else 块中，那么当你的最后一个字符是元音时，它不会被调用：-

```
### Improved Code

def recVowelCount(s):
    'return the number of vowels in s using a recursive computation'

    vowel_count = 0 
    # You should also declare your `vowels` string as class variable  
    vowels = "aEiou".lower()

    if not s:
        return 0

    if s[0] in vowels:
        return 1 + recVowelCount(s[1:])

    return recVowelCount(s[1:])

# Invoke the function
print recVowelCount("rohit")   # Prints 2 
```

这将使用切分第一个字符的新字符串调用您的递归函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T23:45:14.120

这是直接的方法：

```
VOWELS = 'aeiouAEIOU'

def count_vowels(s):
    if not s:
        return 0
    elif s[0] in VOWELS:
        return 1 + count_vowels(s[1:])
    else:
        return 0 + count_vowels(s[1:]) 
```

这与更少的代码相同：

```
def count_vowels_short(s):
    if not s:
        return 0
    return int(s[0] in VOWELS) + count_vowels_short(s[1:]) 
```

这是另一个：

```
def count_vowels_tailrecursion(s, count=0):
    return count if not s else count_vowels_tailrecursion(s[1:], count + int(s[0] in VOWELS)) 
```

不幸的是，这对于长字符串**会失败。**

```
>>> medium_sized_string = str(range(1000))
>>> count_vowels(medium_sized_string)
...
RuntimeError: maximum recursion depth exceeded while calling a Python object 
```

如果您对此感兴趣，请查看[此博客文章](http://metapython.blogspot.com/2010/11/recursive-lambda-functions.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T23:42:58.377

这里有一个函数式编程方法供你学习：

```
map_ = lambda func, lst: [func(lst[0])] + map_(func, lst[1:]) if lst else []
reduce_ = lambda func, lst, init: reduce_(func, lst[1:], func(init, lst[0])) if lst else init

add = lambda x, y: int(x) + int(y)
is_vowel = lambda a: a in 'aeiou'

s = 'How razorback-jumping frogs can level six piqued gymnasts!'
num_vowels = reduce_(add, map_(is_vowel, s), 0) 
```

想法是将问题分为两个步骤，第一个（“map”）将数据转换为另一种形式（字母 -> 0/1），第二个（“reduce”）将转换后的项目收集为一个值（ 1 的总和）。

参考：

*   [http://en.wikipedia.org/wiki/Map_(higher-order_function](http://en.wikipedia.org/wiki/Map_(higher-order_function) )
*   [http://en.wikipedia.org/wiki/Reduce_(higher-order_function](http://en.wikipedia.org/wiki/Reduce_(higher-order_function) )
*   [http://en.wikipedia.org/wiki/MapReduce](http://en.wikipedia.org/wiki/MapReduce)

另一种更高级的解决方案是将问题转换为[尾递归](http://en.wikipedia.org/wiki/Tail_call)并使用[蹦床](http://en.wikipedia.org/wiki/Trampoline_%28computing%29#High_Level_Programming)来消除递归调用：

```
def count_vowels(s):
    f = lambda s, n: lambda: f(s[1:], n + (s[0] in 'aeiou')) if s else n
    t = f(s, 0)
    while callable(t): t = t()
    return t 
```

请注意，与简单的解决方案不同，此解决方案可以处理非常长的字符串，而不会导致“超出递归深度”错误。

# performance - 当给定迭代次数和总时间时，如何找到算法的时间复杂度？

> ID：12877674
> 
> 赞同：0
> 
> 时间：2012-10-13T22:41:02.257
> 
> 标签：performance, algorithm, time, complexity-theory

当我看到一个算法时，我了解如何找到算法的时间复杂度，但是当我得到算法的次数时，我似乎无法弄清楚如何计算它执行，以及花费的时间。

我有时可以得到它，当它很明显像 O(n)、O(n) 或 O(n^2) 时，但以这个问题为例：

算法运行大小为 n 的给定输入。如果 n 为 4096，则运行时间为 512 毫秒。如果 n 为 16384，则运行时间为 1024 毫秒。如果 n 为 36864，则运行时间为 1536 毫秒。

时间复杂度是多少？

我认为它是 n * 2, t * 1.5，但我不太确定如何计算出来。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:54:29.947

我会说对于这类问题，您需要的不仅仅是三个数据点，因为系统的复杂性而不仅仅是算法。

我要做的是比较迭代和经过的时间，看看是否能找到与标准时间复杂度之一匹配的模式：

*   常数：O(c)，其中 c 是常数。
*   线性：O(n)
*   多项式：O(n^c) 其中 c 是一个常数（或者甚至像 O(n^2 + n^6) 这样复杂的东西）
*   指数：O(c^n) 其中 c 是一个常数。
*   对数：O(log|n|)
*   不管这叫什么：O(n log|n|)

让我们来看看你的问题：

```
n     | time
4096  | 512 ms
16384 | 1024 ms
36864 | 1536 ms 
```

当 n 增加 4 倍（从 4096 到 16384）时，时间增加 2 倍（从 512 到 1024 毫秒）。

当 n 增加 9 倍（从 4096 到 36864）时，时间增加 3 倍（从 512 到 1536 毫秒）。

与此匹配的函数是 f(n) = n^(1/2)。当 n 上升 4 倍时，f(n) 上升 sqrt(4) 倍，等等......

所以这是 O(n^.5) 阶，它是多项式

TLDR：将其绘制成图表并将其与时间复杂度的常用函数相匹配。在现实世界中，您可能需要三个以上的数据点。

编辑：我想补充一点，这应该更复杂。每种时间复杂度都可能有一个常数项。即 O(n^c) 更可能是 O(n^c + K)，其中 K 是常数。写出来时，为了简单起见，我们忽略了常数，但它会显示在您的图表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T22:46:27.840

如果您不确定实际的算法，那么您将创建一个折线图，`n`位于图的底部，并且`y`将是执行该数字所花费的时间。

如果直线的斜率为 0，那么它是 O(1)，如果它是线性的，那么它是 O(n)，如果它是弯曲的，那么它是 O(n^2)、O(log n) 或其他一些非线性时间复杂度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T22:49:26.620

如果一个算法的时间复杂度是`n^x`，那么`t_2 / t_1`输入`n_1`和的时间的商`n_2`是

```
(t_2 / t_1) = (n_2 / n_1)^x 
```

如果你取对数，你会得到

```
log (t_2 / t_1) = x * log (n_2 / n_1) 
```

并且可以解决`x`：

```
x = log (t_2 / t_1) / log (n_2 / n_1) 
```

在您的示例中，使用`n_1 = 4096`and `t_1 = 512ms`，您可以得到商

```
16384 / 4096 = 4        36864 / 4096 = 9
 1024 / 512  = 2         1536 / 512  = 3 
```

所以`x = 1/2`。

如果复杂性不遵循纯幂律，您可以通过评估足够多的此类商来估计幂。如果复杂度实际上是指数（或超指数），则商将线性或超线性增长。然后可以使用增长率来找到指数情况下指数的基数。

# database - Neo4j：逐步创建自动索引

> ID：12877678
> 
> 赞同：25
> 
> 时间：2012-10-13T22:41:43.790
> 
> 标签：database, indexing, neo4j, cypher, database-indexes

我正在创建一个新的 Neo4j 数据库。我有一种名为 User 的节点，我想要一个关于 user **Identifier**和**EmailAddress**属性的索引。当数据库是新的时，如何设置索引？我注意到在 neo4j.properties 文件中似乎支持创建索引。但是，当我将这些设置为

```
# Autoindexing

# Enable auto-indexing for nodes, default is false
node_auto_indexing=true

# The node property keys to be auto-indexed, if enabled
node_keys_indexable=EmailAddress,Identifier 
```

并添加一个节点并进行查询以查找我知道存在的标识符

```
START n=node:Identifier(Identifier = "USER0")
RETURN n; 
```

然后我得到一个

```
MissingIndexException: Index `Identifier` does not exist 
```

如何创建索引并在开始查询中使用它？我只想使用配置文件和密码来实现这一点。即目前我只玩电动工具控制台。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-14T00:05:49.130

将以下内容添加到 neo4j.properties 文件中

```
# Autoindexing

# Enable auto-indexing for nodes, default is false
node_auto_indexing=true

# The node property keys to be auto-indexed, if enabled
node_keys_indexable=EmailAddress,Identifier 
```

为节点创建自动索引

```
neo4j-sh (0)$ index --create node_auto_index -t Node 
```

检查它们是否存在

```
neo4j-sh (0)$ index --indexes 
```

应该返回

```
Node indexes:
node_auto_index 
```

查询时使用以下语法指定索引

```
start a = node:node_auto_index(Identifier="USER0")
return a; 
```

由于节点是自动索引的，因此索引的名称是`node_auto_index`

此信息来自[本页底部的评论](http://docs.neo4j.org/chunked/milestone/rest-api-configurable-auto-indexes.html)

**更新**

如果您想索引在自动索引打开之前存在的当前数据（其中 Property_Name 是索引的名称）

```
START nd =node(*) 
WHERE has(nd.Property_Name)
WITH nd
SET nd.Property_Name = nd.Property_Name
RETURN count(nd); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-29T11:06:49.440

索引主要针对用于 where 条件的属性。在 Neo4j 2.0 中，索引现在很容易创建。

在标签上创建索引

```
CREATE INDEX ON :Person(name) 
```

在标签上放置索引

```
DROP INDEX ON :Person(name) 
```

创建唯一性约束

```
CREATE CONSTRAINT ON (book:Book) ASSERT book.isbn IS UNIQUE 
```

删除唯一性约束

```
DROP CONSTRAINT ON (book:Book) ASSERT book.isbn IS UNIQUE 
```

要列出 neo4j-browser 中的所有索引和约束，以下命令很有用

```
:schema 
```

列出特定标签的索引和约束：

```
:schema ls -l :YourLabel 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-23T11:59:33.963

在 Neo4j 2.0 中，您应该使用标签和新的约束来代替

```
 CREATE CONSTRAINT ON (n:User) ASSERT n.Identifier IS UNIQUE
    CREATE CONSTRAINT ON (n:User) ASSERT n.EmailAddress IS UNIQUE 
```

如果每个用户的电子邮件不是唯一的，只需创建一个普通索引即可：

```
 CREATE INDEX ON :User(EmailAddress) 
```

# python - 如何在上一个字符串Python的末尾打印字符串

> ID：12877682
> 
> 赞同：3
> 
> 时间：2012-10-13T22:42:11.737
> 
> 标签：python, string

> **可能重复：**
> [如何在没有换行符或空格的情况下在 Python 中打印？](https://stackoverflow.com/questions/493386/how-to-print-in-python-without-newline-or-space)
> [如何在Python中不包含'\ n'打印字符串](https://stackoverflow.com/questions/511204/how-to-print-a-string-without-including-n-in-python)

我有一个看起来像这样的代码：

```
 print 'Going to %s'%href
            try:
                self.opener.open(self.url+href)
                print 'OK' 
```

当我执行它时，我明显得到两行：

```
Going to mysite.php
OK 
```

但想要的是：

```
Going to mysite.php OK 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T22:45:16.730

```
>>> def test():
...    print 'let\'s',
...    pass
...    print 'party'
... 
>>> test()
let's party
>>> 
```

对于您的示例：

```
# note the comma at the end
print 'Going to %s' % href,
try:
   self.opener.open(self.url+href)
   print 'OK'
except:
   print 'ERROR' 
```

[print 语句末尾](http://docs.python.org/reference/simple_stmts.html#the-print-statement)的逗号指示不要添加`'\n'`换行符。

我认为这个问题是针对 python 2.x 的，因为`print`它被用作语句。对于 python 3，您需要指定`end=''`print 函数调用：

```
# note the comma at the end
print('Going to %s' % href, end='')
try:
   self.opener.open(self.url+href)
   print(' OK')
except:
   print(' ERROR') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T23:16:29.187

在 python3 中，您必须将`end`参数（默认为`\n`）设置为空字符串：

```
print('hello', end='') 
```

[http://docs.python.org/py3k/library/functions.html#print](http://docs.python.org/py3k/library/functions.html#print)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T22:44:08.057

在你的第一个结尾使用逗号`print`： -

```
print 'Going to %s'%href, 
```

# php - 如何在无限循环中每 4 分钟回显一次

> ID：12877692
> 
> 赞同：7
> 
> 时间：2012-10-13T22:44:02.707
> 
> 标签：php

我有一个`while(true)`用来运行的脚本，所以它会永远运行直到它死掉。我希望能够让它每 4 分钟回显一次，我该怎么做？该脚本在命令提示符下运行，它使用它，`while(true)`所以它令人困惑，而且我不知道如何让它每 4 分钟执行一次。我怎样才能让它每 4 分钟回声一次，而仍在 a 中`while(true)`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T22:45:40.530

你可以试试

```
while(true)
{
    sleep(240); // sleep for 240 sec
    echo " Hello World" ;
} 
```

或者

```
$time = time();
while ( true ) {
    /*
     * Play Some Ball
     */

    if ((time() - $time) >= 240) {
        echo date("Y:m:d g:i:s"), PHP_EOL;
        $time = time();
    }
    sleep(2);
} 
```

输出测试`Time = 2 sec, Sleep = 1 sec`

```
2012:10:14 12:50:56
2012:10:14 12:50:58
2012:10:14 12:51:00
2012:10:14 12:51:02
2012:10:14 12:51:04
2012:10:14 12:51:06
2012:10:14 12:51:08
2012:10:14 12:51:10
2012:10:14 12:51:12
2012:10:14 12:51:14 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T22:48:12.003

使用[sleep](http://php.net/manual/en/function.sleep.php)方法实际上会使您的脚本停止运行。如果这是你想要发生的，我不是 100%。

解决此问题的另一种方法是比较每次迭代中最后一个“echo”命令的时间戳。

```
$echo_time = time();
$interval = 4*60;
while(true){
  if ($echo_time + $interval >= time()){
    echo "$interval seconds have passed...";
    $echo_time = time(); // set up timestamp for next interval
  }
  // other uninterrupted code goes here.
} 
```

这将允许循环中的代码继续运行，并且仅在每次迭代开始时检查时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T22:47:02.223

`while(true) { ... }`尝试添加一个sleep() 参数函数循环。

```
$sleep = 4*60;
while(true)
{
    # waiting...        
    sleep($sleep);
    # work after 240 mins
} 
```

# java - 如何从 Java 数据库中找到类似的单词匹配项？

> ID：12877702
> 
> 赞同：0
> 
> 时间：2012-10-13T22:45:41.703
> 
> 标签：java, sqlite

我目前的编程项目是一种 Java 中的法语词典（使用 sqlite）。我想知道如果有人想找到“avoir”的现在时但输入“avior”会发生什么，以及我将如何处理它。所以我想我可以实现某种最接近的匹配/你的意思是功能。所以我的问题是：

有没有办法使用数据库来搜索相似的匹配项？

当我不久前在 python 中制作相同的程序（使用 xml 代替）时，我使用了这个系统，但它不是很有效，并且需要很大的误差范围才能有点效果（并且随后建议没有相关性的单词！）......但类似的东西还是有用的

```
def getSimilar(self, word, Return = False):
    matches = list()
    for verb in self.data.getElementsByTagName("Verb"):
        for x in range(16):
            if x % 2 != 0 and x>0:
                if (x == 15 or x == 3 or x == 1): 
                    part = Dict(self.data).removeBrackets(Dict(self.data).getAccents(verb.childNodes[x].childNodes[0].data)) 
                    diff = 0
                    for char in word:
                        if (not char in part):
                            diff += 1
                    if (diff < self.similarityValue) and (-self.errorAllowance <= len(part) - len(word) <= self.errorAllowance):
                        matches.append(part)
                else:
                    for y in range(14): 
                        if (y % 2 != 0 and y>0):
                            part = Dict(self.data).getAccents(verb.childNodes[x].childNodes[y].childNodes[0].data)
                            diff = 0
                            for char in word:
                                if (not char in part):
                                    diff += 1
                            if (diff < self.similarityValue) and (-self.errorAllowance <= len(part) - len(word) <= self.errorAllowance):
                                matches.append(part)
    if not Return:
        for match in matches:
            print "Did you mean '" + match + "'?"
    if Return: return matches 
```

欢迎任何帮助！

杰米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:48:55.040

尝试使用 [https://github.com/mateusza/SQLite-Levenshtein](https://github.com/mateusza/SQLite-Levenshtein)

效果很好

# operating-system - 2 个虚拟地址何时可以映射到同一个物理地址？

> ID：12877705
> 
> 赞同：5
> 
> 时间：2012-10-13T22:46:16.560
> 
> 标签：operating-system, memory-address, cpu-architecture

这里有一个操作系统/计算机体系结构问题。我正在阅读有关缓存的内容，关于如何虚拟索引缓存是减少地址转换时间的一种选择。我遇到了以下情况：

```
"Virtual cache difficulties include:
    Aliasing
        Two different virtual addresses may have the same physical address." 
```

我想不出什么时候会发生这种情况。自从我的 O/S 天以来已经有一段时间了，我正在画一个空白。

有人可以提供一个例子吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T22:47:09.290

两个进程可能有一个共享[映射](https://en.wikipedia.org/wiki/Memory_mapping)。例如，在 Unix 中，可执行代码通常映射到执行同一程序的所有进程之间共享的区域。（事实上​​，一个*进程*可能有多个相同底层内存的映射，例如当它`mmap`两次是同一个文件时。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T22:49:02.640

我相信程序的可执行部分可以在进程之间共享——因此被映射两次。

例如：如果你加载两个实例`vim`，就会有两个进程。这两个进程可能会映射到物理内存中的相同可执行代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T17:32:06.927

**shmat()**是在两个不同进程中将相同物理地址映射为两个不同虚拟地址的典型示例。如果您执行 pmap -x pid_A 。你会看到进程 A 的虚拟内存映射与进程 B 类似。实际的物理内存不会暴露给用户空间程序。

现在 SayProcess A 和 B 共享一个共享内存段，共享内存指针是 sh_mem_ptr_A 和 Sh_mem_ptr_B。如果您打印这些指针，它们的地址（虚拟）将不同。因为sh_mem_ptr_A是进程A的内存映射的一部分，同样sh_mem_ptr_B对于进程B。

内核维护虚拟到物理地址的映射。按页表和偏移量。高位映射到页表，偏移量映射到页表中的偏移量。因此，如果您注意到 sh_mem_ptr_A 和 sh_mem_ptr_B 的低位，它们将是相同的（但可能并非总是如此）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T06:45:05.640

此外，每个进程都分配了 4GB 的虚拟空间（在 32 位系统中），其中 1 GB（取决于 Os 到 Os）映射给 OS。由于 OS 对所有进程都是通用的，因此低 1GB 的虚拟地址对所有进程都是通用的，它们映射到相同的 OS 物理页面。

# php - 按日期对sql输出进行排序是哪一行

> ID：12877709
> 
> 赞同：2
> 
> 时间：2012-10-13T22:46:40.597
> 
> 标签：php, sql, date

在 sql 数据库中存储日期和时间的最佳方法是什么？我应该使用 date() 还是有其他更好的方法呢？如果我应该能够按日期排序，应该将它设置为哪种 sql 行？时间戳或日期时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:49:34.437

两者，`DATETIME`和`TIMESTAMP`都可以按其默认格式排序。使用这两者之一是最好的方法，而不是将它们存储为 VARCHAR 或其他数据类型。

我个人更喜欢使用`DATETIME`over，`TIMESTAMP`因为它有限制。

# jquery - ul li 使用 jQuery 显示/隐藏

> ID：12877711
> 
> 赞同：1
> 
> 时间：2012-10-13T22:46:47.293
> 
> 标签：jquery

我正在尝试创建一个下拉菜单。

但我无法让子菜单项在鼠标悬停时隐藏。

一举一动都隐藏起来

我的 jQuery 代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('ul ul').hide();
        $('ul li.top_menu_first a').removeAttr("href");
        $('ul li.top_menu_first > a').mouseover(function(event) {
            $(this).parent().find('ul').show('slow');
        });

        $('ul li.top_menu_first ul').mouseout(function(event) {
            $('ul ul').hide('slow');
        });
    });
</script> 
```

我的 HTML 代码：

```
<div id="top_menu">
    <ul>
        <li class="top_menu_first"><a href="http://google.com">ABC</a>
            <ul>
                <li><a>1</a></li>
                <li><a>2</a></li>
                <li><a>3</a></li>
            </ul>
        </li>   
        <li class="top_menu_first"><a>DEF</a></li>
        <li class="top_menu_first"><a>GHI</a></li>
        <li class="top_menu_first"><a>JKL</a>
            <ul>
                <li><a>4</a></li>
                <li><a>5</a></li>
                <li><a>6</a></li>
            </ul>
        </li>   
        <li class="top_menu_first"><a>MNO</a>
            <ul>
                <li><a>7</a></li>
                <li><a>8</a></li>
            </ul>
        </li class="top_menu_first">
    </ul>
</div>
<div id="footer"></div> 
```

请如果有人可以帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:53:56.353

您的代码跟踪子菜单 mouseOut 。我假设您希望子菜单从菜单名称中移出时隐藏。

`ul` 从`$('ul li.top_menu_first ul').mouseout(function(event) {`（ [http://jsfiddle.net/qgbtd/](http://jsfiddle.net/qgbtd/) ）删除确保你在你的HTML中加载jquery也像评论说的那样使用`mouseleave()`给它一个更好的行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:20:38.010

我认为您不需要为此使用 jQuery。首先尝试让它与 CSS 一起工作，这是合乎逻辑的步骤。如果您需要动画，请使用 CSS3 过渡，如果您真的需要动画，则 jQuery 就像旧浏览器的后备一样，否则就顺其自然，旧浏览器不会为不透明度设置动画，没什么大不了的。

**演示：http:** [//jsbin.com/uqebor/9/edit](http://jsbin.com/uqebor/9/edit)

```
ul.menu,
ul.menu ul {
  position: relative;
  list-style: none;
  padding: 0;
  -webkit-transition: opacity .3s ease-in-out;
  -moz-transition: opacity .3s ease-in-out;
}
ul.menu li {
  margin: 1px 0;
}
ul.menu > li {
  float: left;
  margin: 0 .5em;
}
ul.menu a {
  text-decoration: none;
  display: block;
  width: 100px;
  height: 30px;
  line-height: 30px;
  text-align: center;
  border: 1px solid black;
  background: white;
}
ul.menu ul {
  visibility: hidden;
  height: 0;
  width: 0;
  opacity: 0;
}
ul.menu li:hover ul {
  width: auto;
  height: auto;
  visibility: visible;
  opacity: 1;
} 
```

# linux - linux下enqueue_wakeup宏的含义

> ID：12877714
> 
> 赞同：1
> 
> 时间：2012-10-13T22:47:05.200
> 
> 标签：linux, linux-kernel, kernel

我不确定`ENQUEUE_WAKEUP`linux中宏的含义是什么意思。我有一种直觉，这意味着在任务醒来后将其排入队列，但仍想确定。

宏定义为：

`#define ENQUEUE_WAKEUP 1`

注意：出于 v3.5.4 中的参考目的，它`/include/linux/sched.h`在许多地方定义和引用，但我遇到问题的一个这样的地方是`enqueue_task_rt`文件中的函数`./kernel/sched/rt.c`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T05:56:37.777

这是它被介绍的。

sched：添加入队/出队标志

为了减少对 TASK_WAKING 的依赖，重新设计 enqueue 接口以支持适当的标志字段。

ENQUEUE_WAKEUP - 入队是睡眠任务的唤醒

[http://lkml.indiana.edu/hypermail/linux/kernel/1004.0/00744.html](http://lkml.indiana.edu/hypermail/linux/kernel/1004.0/00744.html)

# java - 方法应该检查数组本身吗？

> ID：12877721
> 
> 赞同：2
> 
> 时间：2012-10-13T22:47:37.697
> 
> 标签：java, arrays, slick2d

我试图制作一种方法来告诉我我的数组是否包含任何重复的坐标，如果是，则将布尔值设置为 true，否则将其设置为 false。知道为什么它不断返回错误吗？

```
 public void check(){
    if(point[particle].equals(point) == true){
        check = true;
    } else {
        check = false;
    }
} 
```

点 = 点数组

粒子 = 当前粒子

check = 我用来检查的布尔值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T22:52:52.763

查看这部分代码（根据您的`if`-statement 的条件）：

```
point[particle].equals(point) 
```

我认为这里发生了一些[可变的阴影](http://en.wikipedia.org/wiki/Variable_shadowing)（或类似的东西）。`point`似乎是一个数组，但您正在测试该数组的成员与数组本身之间的相等性 - 这就是您不断得到`false`. 检查您的变量名称，看看您是否不小心为两个不同的变量使用了相同的名称。

* * *

作为说明，

```
if (condition == true) {
    check = true;
} else {
    check = false;
} 
```

可以简化为

```
check = condition; 
```

# javascript - 是否可以在没有 ajax 调用的情况下使用 jQuery 的 .when？

> ID：12877722
> 
> 赞同：2
> 
> 时间：2012-10-13T22:48:00.623
> 
> 标签：javascript, jquery, jquery-deferred

[http://jsfiddle.net/f4hmL/235/](http://jsfiddle.net/f4hmL/235/)

```
function showData() {
    alert("boop!");
}

function method1() {
    var dfd = $.Deferred();
    setTimeout(dfd.resolve(), 10000);
    return dfd.promise();
}

function method2() {
    var dfd = $.Deferred();
    setTimeout(dfd.resolve(), 6000);
    return dfd.promise();
}

$.when(method1(), method2()).then(showData);​ 
```

我希望只在两个延迟对象都解决时才看到“boop”，但我立即看到了。有可能实现这一目标吗？jQuery 的“when”方法是正确的函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T22:50:38.177

您没有将正确的东西传递给`setTimeout()`. 这不起作用，因为您正在`dfd.resolve()`立即调用并将结果传递给`setTimeout()`这一行：

```
setTimeout(dfd.resolve(), 10000); 
```

相反，你需要这样的东西：

```
setTimeout(function() {dfd.resolve()}, 10000); 
```

在超时触发之前不会调用解析。

# mysql - MySQL - 插入后更新同一张表的触发器

> ID：12877732
> 
> 赞同：33
> 
> 时间：2012-10-13T22:50:11.440
> 
> 标签：mysql, database-trigger

这是我正在尝试做的事情：

`INSERT`当表格中有新内容时`ACCOUNTS`，我需要通过设置来更新`ACCOUNTS`where `pk`=中的行，以表示特定（旧）帐户已被编辑。`NEW.edit_on``status='E'`

```
DELIMITER $$

DROP TRIGGER IF EXISTS `setEditStatus`$$
CREATE TRIGGER `setEditStatus` AFTER INSERT on ACCOUNTS
FOR EACH ROW BEGIN
    update ACCOUNTS set status='E' where ACCOUNTS.pk = NEW.edit_on ;
END$$

DELIMITER ; 
```

要求**不是**我操纵*新插入*的列，而是一个*已经存在的*列`pk = NEW.edit_on`

但是，我无法更新同一张表：`Can't update table ACCOUNTS ... already used by the statement that invoked this trigger`

请提出解决方法

PS：我已经[在同一张表上更新后在触发器中更新表](https://stackoverflow.com/questions/4547465/updating-table-in-trigger-after-update-on-the-same-table)，[插入到同一张表中触发mysql](https://stackoverflow.com/questions/8504904/insert-into-same-table-trigger-mysql)，[在同一张表上使用插入触发器后更新，在表](https://stackoverflow.com/questions/6925651/update-with-after-insert-trigger-on-same-table)[上插入后使用插入和更新的mysql触发器，](https://stackoverflow.com/questions/12870465/mysql-trigger-with-insert-and-update-after-insert-on-table)但他们似乎没有回答我的问题。

**编辑**

`ACCOUNTS`桌子：

```
CREATE TABLE  `ACCOUNTS` (
  `pk` bigint(10) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` bigint(9) unsigned NOT NULL,
  `edit_on` bigint(10) unsigned DEFAULT NULL,
  `status` varchar(1) NOT NULL DEFAULT 'A',
  PRIMARY KEY (`pk`) USING BTREE) ENGINE=InnoDB AUTO_INCREMENT=2147483726 DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-14T00:04:57.557

似乎您无法在触发器中完成所有这些操作。根据[文档](http://dev.mysql.com/doc/refman/5.0/en/stored-program-restrictions.html)：

> 在存储的函数或触发器中，不允许修改调用函数或触发器的语句已经使用（用于读取或写入）的表。

根据[this answer](https://stackoverflow.com/questions/11247590/mysql-trigger-set-values-for-new-row-and-update-another-in-the-same-table)，您似乎应该：

> 创建一个存储过程，插入/更新目标表，然后更新其他行，所有这些都在一个事务中。

使用存储过程，您将手动提交更改（插入和更新）。我没有在 MySQL 中这样做，但[这篇文章](https://stackoverflow.com/questions/9974325/mysql-transaction-within-a-stored-procedure)看起来是一个很好的例子。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-04-10T10:32:14.050

这就是我如何在插入时更新同一个表中的一行

`activationCode`并且`email`是表中的行`USER`。在插入时，我没有为 指定值`activationCode`，它将由 MySQL 动态创建。

`username`使用您的 MySQL 用户名和您的数据库名称进行更改`db_name`。

```
CREATE DEFINER=`username`@`localhost` 
       TRIGGER `db_name`.`user_BEFORE_INSERT` 
       BEFORE INSERT ON `user` 
       FOR EACH ROW
         BEGIN
            SET new.activationCode = MD5(new.email);
         END 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-18T03:15:17.747

有同样的问题，但必须用即将输入的 id 更新列，所以你可以在没有 id 之前和之后进行更新，所以我做了这个技巧

```
DELIMITER $$
DROP TRIGGER IF EXISTS `codigo_video`$$
CREATE TRIGGER `codigo_video` BEFORE INSERT ON `videos` 
FOR EACH ROW BEGIN
    DECLARE ultimo_id, proximo_id INT(11);
    SELECT id INTO ultimo_id FROM videos ORDER BY id DESC LIMIT 1;
    SET proximo_id = ultimo_id+1;
    SET NEW.cassette = CONCAT(NEW.cassette, LPAD(proximo_id, 5, '0'));
END$$
DELIMITER ; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-28T10:28:29.067

在最后一个条目上；这是另一个技巧：

```
SELECT AUTO_INCREMENT FROM information_schema.tables WHERE table_schema = ... and table_name = ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-01T11:10:39.577

```
DELIMITER $$

DROP TRIGGER IF EXISTS `setEditStatus`$$
CREATE TRIGGER `setEditStatus` **BEFORE** INSERT on ACCOUNTS
FOR EACH ROW BEGIN

    SET NEW.STATUS = 'E';

END$$

DELIMITER ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-13T10:58:08.083

相反，您可以在插入之前使用并获取特定表的最大 pkid，然后更新最大 pkid 表记录。

# c++ - 大气散射OpenGL 3.3

> ID：12877733
> 
> 赞同：4
> 
> 时间：2012-10-13T22:50:25.637
> 
> 标签：c++, opengl, glsl, opengl-3

![在此处输入图像描述](../Images/0d253fa6f1db3dbfaf371d67ab4be7f4.png)

我目前正在尝试将 Sean O'Neil 的着色器转换为 330 版，以便我可以在我正在编写的应用程序中试用它。我对不推荐使用的功能有一些问题，所以我替换了它们，但我对 glsl 几乎是全新的，所以我可能在某个地方犯了错误。

原始着色器可以在这里找到： [http ://www.gamedev.net/topic/592043-solved-trying-to-use-atmospheric-scattering-oneill-2004-but-get-black-sphere/](http://www.gamedev.net/topic/592043-solved-trying-to-use-atmospheric-scattering-oneill-2004-but-get-black-sphere/)

我转换它们的可怕尝试：

顶点着色器：

```
#version 330 core

// Input vertex data, different for all executions of this shader.
layout(location = 0) in vec3 vertexPosition_modelspace;
layout(location = 2) in vec3 vertexNormal_modelspace;

uniform vec3 v3CameraPos;       // The camera's current position
uniform vec3 v3LightPos;        // The direction vector to the light source
uniform vec3 v3InvWavelength;   // 1 / pow(wavelength, 4) for the red, green, and blue channels
uniform float fCameraHeight;    // The camera's current height
uniform float fCameraHeight2;   // fCameraHeight^2
uniform float fOuterRadius;     // The outer (atmosphere) radius
uniform float fOuterRadius2;    // fOuterRadius^2
uniform float fInnerRadius;     // The inner (planetary) radius
uniform float fInnerRadius2;    // fInnerRadius^2
uniform float fKrESun;          // Kr * ESun
uniform float fKmESun;          // Km * ESun
uniform float fKr4PI;           // Kr * 4 * PI
uniform float fKm4PI;           // Km * 4 * PI
uniform float fScale;           // 1 / (fOuterRadius - fInnerRadius)
uniform float fScaleDepth;      // The scale depth (i.e. the altitude at which the atmosphere's average density is found)
uniform float fScaleOverScaleDepth; // fScale / fScaleDepth

const int nSamples = 2;
const float fSamples = 2.0;

invariant out vec3 v3Direction;

// Values that stay constant for the whole mesh.
uniform mat4 MVP;
uniform mat4 V;
uniform mat4 M;
uniform vec3 LightPosition_worldspace;

 out vec4    dgl_SecondaryColor;
 out vec4   dgl_Color;

float scale(float fCos)
{
float x = 1.0 - fCos;
return fScaleDepth * exp(-0.00287 + x*(0.459 + x*(3.83 + x*(-6.80 + x*5.25))));
}

void main(void)
{

    //gg_FrontColor = vec3(1.0, 0.0, 0.0);
        //gg_FrontSecondaryColor = vec3(0.0, 1.0, 0.0);

// Get the ray from the camera to the vertex, and its length (which is the far point of the ray passing through the atmosphere)
vec3 v3Pos = vertexPosition_modelspace;
vec3 v3Ray = v3Pos - v3CameraPos;
float fFar = length(v3Ray);
v3Ray /= fFar;

// Calculate the ray's starting position, then calculate its scattering offset
vec3 v3Start = v3CameraPos;
float fHeight = length(v3Start);
float fDepth = exp(fScaleOverScaleDepth * (fInnerRadius - fCameraHeight));
float fStartAngle = dot(v3Ray, v3Start) / fHeight;
float fStartOffset = fDepth*scale(fStartAngle);

// Initialize the scattering loop variables
gl_FrontColor = vec4(0.0, 0.0, 0.0, 0.0);
gl_FrontSecondaryColor = vec4(0.0, 0.0, 0.0, 0.0);

float fSampleLength = fFar / fSamples;
float fScaledLength = fSampleLength * fScale;
vec3 v3SampleRay = v3Ray * fSampleLength;
vec3 v3SamplePoint = v3Start + v3SampleRay * 0.5;

// Now loop through the sample rays
vec3 v3FrontColor = vec3(0.2, 0.1, 0.0);
for(int i=0; i<nSamples; i++)
{
    float fHeight = length(v3SamplePoint);
    float fDepth = exp(fScaleOverScaleDepth * (fInnerRadius - fHeight));
    float fLightAngle = dot(v3LightPos, v3SamplePoint) / fHeight;
    float fCameraAngle = dot(v3Ray, v3SamplePoint) / fHeight;
    float fScatter = (fStartOffset + fDepth*(scale(fLightAngle) - scale(fCameraAngle)));
    vec3 v3Attenuate = exp(-fScatter * (v3InvWavelength * fKr4PI + fKm4PI));
    v3FrontColor += v3Attenuate * (fDepth * fScaledLength);
    v3SamplePoint += v3SampleRay;
}

// Finally, scale the Mie and Rayleigh colors and set up the varying variables for the pixel shader
gl_FrontSecondaryColor.rgb = v3FrontColor * fKmESun;
gl_FrontColor.rgb = v3FrontColor * (v3InvWavelength * fKrESun);
gl_Position =  MVP * vec4(vertexPosition_modelspace,1);
v3Direction = v3CameraPos - v3Pos;

dgl_SecondaryColor = gl_FrontSecondaryColor;
dgl_Color = gl_FrontColor;

} 
```

片段着色器：

```
#version 330 core

out vec4 dgl_FragColor;

uniform vec3 v3LightPos;
uniform float g;
uniform float g2;

 invariant in vec3 v3Direction;

 in vec4    dgl_SecondaryColor;
 in vec4   dgl_Color;

uniform mat4 MV;

void main (void)
{

float fCos = dot(v3LightPos, v3Direction) / length(v3Direction);
float fMiePhase = 1.5 * ((1.0 - g2) / (2.0 + g2)) * (1.0 + fCos*fCos) / pow(1.0 + g2 - 2.0*g*fCos, 1.5);
dgl_FragColor = dgl_Color + fMiePhase * dgl_SecondaryColor;
dgl_FragColor.a = dgl_FragColor.b;

} 
```

我写了一个函数来渲染一个球体，我试图把这个着色器渲染到它的倒置版本上，球体工作得很好，有法线和所有的。我的问题是球体被渲染成全黑，所以着色器不工作。编辑：画了太阳，但天空还是一片漆黑。

这就是我试图在我的主渲染循环中渲染气氛的方式。

```
 glUseProgram(programAtmosphere);
    glBindTexture(GL_TEXTURE_2D, 0);
    //######################

glUniform3f(v3CameraPos, getPlayerPos().x, getPlayerPos().y, getPlayerPos().z);

glm::vec3 lightDirection = lightPos/length(lightPos);

glUniform3f(v3LightPos, lightDirection.x , lightDirection.y, lightDirection.z);

glUniform3f(v3InvWavelength, 1.0f / pow(0.650f, 4.0f), 1.0f / pow(0.570f, 4.0f), 1.0f / pow(0.475f, 4.0f));

glUniform1fARB(fCameraHeight, 10.0f+length(getPlayerPos()));

glUniform1fARB(fCameraHeight2, (10.0f+length(getPlayerPos()))*(10.0f+length(getPlayerPos())));

glUniform1fARB(fInnerRadius, 10.0f);

glUniform1fARB(fInnerRadius2, 100.0f);

glUniform1fARB(fOuterRadius, 10.25f);

glUniform1fARB(fOuterRadius2, 10.25f*10.25f);

glUniform1fARB(fKrESun, 0.0025f * 20.0f);

glUniform1fARB(fKmESun, 0.0015f * 20.0f);

glUniform1fARB(fKr4PI, 0.0025f * 4.0f * 3.141592653f);

glUniform1fARB(fKm4PI, 0.0015f * 4.0f * 3.141592653f);

glUniform1fARB(fScale, 1.0f / 0.25f);

glUniform1fARB(fScaleDepth, 0.25f);

glUniform1fARB(fScaleOverScaleDepth, 4.0f / 0.25f );

glUniform1fARB(g, -0.990f);

glUniform1f(g2, -0.990f * -0.990f); 
```

有任何想法吗？

编辑：更新了代码，并添加了一张图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:08:40.167

我认为问题在于，您写入“FragColor”，这可能是片段着色器中的“死胡同”输出变量，因为在链接程序之前必须将其显式绑定到颜色编号：

`glBindFragDataLocation(programAtmosphere,0,"FragColor");`

或在着色器中使用它：

`layout(location = 0) out vec4 FragColor`

您可以尝试使用内置的 out vars 代替: `gl_FragColor`，这是一个别名`gl_FragData[0]`，因此与上述绑定相同。

编辑：忘了说，当使用不推荐使用的内置函数时，你必须有一个兼容性声明：

`#version 330 compatibility`

编辑2：为了测试绑定，我会写一个常量颜色来禁用可能的计算错误，因为这些可能不会产生预期的结果，因为错误或零输入。

# lookup - 如何在一个单元格中获得多个 VLOOKUP 结果？

> ID：12877735
> 
> 赞同：1
> 
> 时间：2012-10-13T22:50:36.553
> 
> 标签：lookup, libreoffice-calc

我正在尝试搜索数据以在一个单元格中获取多个 VLOOKUP 结果（逗号分隔）。例如，我有一个电子表格：

```
product_id | product_name
--------------------------
123        | product A
456        | product B
789        | product C 
```

第二个：

```
product_image   |
--------------------------
123_first.jpg   |
123_second.jpg  |
123_third.jpg   |
456_first.jpg   |
456_sec ........ 
```

我正在努力实现：

```
product_id | product_name | product_images
--------------------------------------------
123        | product A    | 123_first.jpg, 123_second.jpg, 123_third.jpg
456        | product B    | 456_first.jpg, 456_second.jpg, 456_third.jpg
789        | product C    | 789_first.jpg, 789_second.jpg, 789_third.jpg 
```

# java - 基本的java数据库组织

> ID：12877738
> 
> 赞同：0
> 
> 时间：2012-10-13T22:50:48.640
> 
> 标签：java, database

我正在为学校开发这个数据库类型的程序。到目前为止，我已经能够使这部分代码完全正常工作：

```
import jpb.*;
//jpb is a package that lets me use SimpleIO as you'll see below

public class PhoneDirectory {
  public static void main(String[] args) {
    PhoneRecord[] records = new PhoneRecord[100];
    int numRecords = 0;

    // Display list of commands
    System.out.println("Phone directory commands:\n" +
                       "  a - Add a new phone number\n" +
                       "  f - Find a phone number\n" +
                       "  q - Quit\n");

    // Read and execute commands
    while (true) {

      // Prompt user to enter a command
      SimpleIO.prompt("Enter command (a, f, or q): ");
      String command = SimpleIO.readLine().trim();

      // Determine whether command is "a", "f", "q", or
      // illegal; execute command if legal.
      if (command.equalsIgnoreCase("a")) {

        // Command is "a". Prompt user for name and number,
        // then create a phone record and store it in the
        // database.
        if (numRecords < records.length) {
          SimpleIO.prompt("Enter new name: ");
          String name = SimpleIO.readLine().trim();
          SimpleIO.prompt("Enter new phone number: ");
          String number = SimpleIO.readLine().trim();
          records[numRecords] = 
            new PhoneRecord(name, number);
          numRecords++;
        } else
          System.out.println("Database is full");

      } else if (command.equalsIgnoreCase("f")) {

        // Command is "f". Prompt user for search key.
        // Search the database for records whose names begin
        // with the search key. Print these names and the
        // corresponding phone numbers.
        SimpleIO.prompt("Enter name to look up: ");
        String key = SimpleIO.readLine().trim().toLowerCase();
        for (int i = 0; i < numRecords; i++) {
          String name = records[i].getName().toLowerCase();
          if (name.startsWith(key))
            System.out.println(records[i].getName() + " " + 
                               records[i].getNumber());
        }

      } else if (command.equalsIgnoreCase("q")) {
        // Command is "q". Terminate program.
        return;

      } else {
        // Command is illegal. Display error message.
        System.out.println("Command was not recognized; " +
                           "please enter only a, f, or q.");
      }

      System.out.println();
    }
  }
}

// Represents a record containing a name and a phone number
class PhoneRecord {
  private String name;
  private String number;

  // Constructor
  public PhoneRecord(String personName, String phoneNumber) {
    name = personName;                       
    number = phoneNumber;
  }

  // Returns the name stored in the record
  public String getName() {
    return name;
  }

  // Returns the phone number stored in the record
  public String getNumber() {
    return number;
  }
} 
```

我正在尝试做一些事情，它们可能是我正在查看的简单解决方案。我需要为删除创建一个命令“d”，它将提示输入名称并删除所有匹配的记录。我尝试使用与允许部分匹配的“f”命令相同的方法，但我再次无法让它工作。

接下来我需要修改*f*命令，使其在列中排列名称和数字。我试图通过使其=数组长度来强制字符串为一定长度，但无济于事，它只是返回看起来空白。本质上它需要看起来像这样：

```
Smith, John    555-5556
Shmoe, Joe     565-5656 
```

而且我需要将记录设置为 1 而不是 100，并且每次满时都会增加一倍的大小。我还没有搞砸这个，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:31:06.630

因为要求能够删除记录，所以我建议使用动态增长的 ArrayList，您可以轻松删除记录。

它是这样的声明者：

```
ArrayList<PhoneRecord> records = new ArrayList<PhoneRecord>(); 
```

你添加这样的：

```
records.add(PhoneRecord(name, number))); 
```

您可以删除这样的记录：

```
records.remove(i); 
```

删除列表的第 i 个记录。

列表的当前大小由 records.size() 函数给出。

至于你的第二个问题，你可以使用字符串格式来告诉它为指定数量的字符格式化名称，例如你可以使用这个：

```
System.out.println(String.format("%s%15s", records[i].getName(), records[i].getNumber()); 
```

在此示例中，将在电话之前添加空格字符，以便总字符数为 15。

因此，如果您的号码是 555-5556，那么将在号码前添加 7 个空格字符。

# php - 将索引的数字数组从由这些索引索引的对象的关联数组转换为有序的元素数组

> ID：12877741
> 
> 赞同：0
> 
> 时间：2012-10-13T22:51:45.750
> 
> 标签：php, arrays

*注意：我应该清楚我的愿望是在一个声明中在功能上做到这一点。我可以通过循环轻松地做到这一点，但这不是我感兴趣的。*

我有两个数组：一个索引数字数组 A 和一个关联数组 B，对象 O 由数组 A 的元素索引。

我想按照 A 的元素顺序生成一个 O 数组——换句话说，根据关联数组 B 将索引映射到真实对象。

例如：

```
A = [ 3, 4, 2, 1 ];
B = [ 1=>"one", 2=>"two", 3=>"three", 4=>"four" ] 
```

我想：

```
[ "three", "four", "two", "one" ] 
```

另外，顺便说一句，我也很想知道这个概念叫什么。它有点像映射，但具体涉及到另一个数组的索引，而不是函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T23:06:56.723

```
$A = array(3, 4, 2, 1);
$B = array(1=>"one", 2=>"two", 3=>"three", 4=>"four");

foreach($A as $i) $R[] = $B[$i]; 

var_dump($R); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T23:20:44.707

如果有人仍然对使用“array_map”感兴趣，我只是添加一点。

```
<?php
    $A = array( 3, 4, 2, 1);
    $B = array( 1=>"one", 2=>"two", 3=>"three", 4=>"four" );
    print_r($A);echo '<br/>';
    print_r($B);echo '<br/>';

    function matchAtoB($sourceA, $sourceB)
    {
        global $B;
        return $B[$sourceA];
    }

    $O = array_map("matchAtoB", $A, $B);
    print_r($O);
?> 
```

因此，该函数一次只能接收每个数组的一个元素（而不是整个数组），并且它会自动循环/重复自身，直到处理完数组中的所有元素。

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T23:50:46.657

```
$order = array(3, 4, 2, 1);
$input = array(1 => 'one', 2 => 'two', 3 => 'three', 4 => 'four'); 
```

使用[array_map()](http://php.net/manual/en/function.array-map.php) (PHP 5.3 >)

```
$output = array_map(function($v) use($input) { 
  return $input[$v]; 
}, $order); 
```

但是，这与执行以下操作基本相同：

```
$output = array();
foreach ($order as $o) {
  $output[] = $input[$o];
} 
```

老实说，我看不到更短的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T00:38:06.250

NullUserException 在评论中发布了答案：

[`array_map(function ($v) use ($b) { return $b[$v]; }, $a);`](http://codepad.viper-7.com/qmv4ay)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T23:09:06.877

您不需要循环，您可以立即访问元素：

```
$three = $b[$a[0]]; // "three"
$four = $b[$a[1]]; // "four"
$two = $b[$a[2]]; // "two"
$one = $b[$a[3]]; // "one" 
```

您可以将其视为实现相同目标的“懒惰”或“及时”方式，但没有索引哈希映射的提前成本。

如果您需要明确的数组，而不需要额外的查找，您将需要一个循环。

我不确定这是否有名称，但“数据存储”或“哈希映射”与有序键数组的组合并不少见。

# java - 表示的属性“元素”

> ID：12877742
> 
> 赞同：1
> 
> 时间：2012-10-13T22:51:57.293
> 
> 标签：java, wadl

根据 WADL 规范（第 2.11.2 节）：

> **元素**
> 
> ```
>  For XML-based representations, specifies the qualified name of the root element as described within the grammars section - see section 2.4 . 
> ```

`complexType`是否可以在元素属性中指定 a ？我有一个仅定义 s.xml 的 XML 模式`complexType`。这些 s 的实例`complexType`可以作为表示包含在 HTTP 请求/响应中。

例如，以下方法声明是否有效？

```
<method id="saveA" name="PUT">
    <request>
        <representation mediaType="application/xml" element="ns1:AType" />
    </request>
    .......
</method> 
```

（在命名空间下的 XML 模式中定义的`AType`位置）`complexType``ns1`

或者，我是否应该在 XML 模式中定义一个类型`AType`为 name的根元素`a`，并将该元素的限定名称设置为表示的属性**元素**？

**PS**：我尝试了第二个选项（在 XML 模式中定义一个根元素），当我从 WADL 生成代码（使用 WADL2Java）时，该`saveA`方法不会将`AType`. 所以，我没有任何方法可以访问方法中添加的元素。

# c++ - 在块执行之前和之后执行一些指令

> ID：12877744
> 
> 赞同：1
> 
> 时间：2012-10-13T22:52:11.860
> 
> 标签：c++, block, c-preprocessor, auto

我需要一种语法，它允许我在之前初始化一些变量的情况下启动一个代码块，并且在执行代码块之后，我需要执行一些代码来释放一些其他变量。
因此，块内编写的代码应该在其他一些操作的中间执行。

这是我得到的：

```
#define application(block) new Application(&argc, argv); auto __code= []() block ; __code(); mainApplication->launch() 
```

您看到的代码只是初始化了一个应用程序（一个 C++ 对象），所以我这样使用它：

```
application({
    < write the code >
}); 
```

这样我可以确定应用程序总是被初始化，并在块之后启动。
但我想知道是否有办法避开圆括号，这样我就可以这样写：

```
application{
    < write the code >
}; 
```

这种方式也有效，但它应该使语法更轻。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T23:03:29.860

反转问题。将带有相关变量的对象传递给代码。让每个变量的析构函数清理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T09:54:52.310

您可以在宏中隐藏 for 循环来实现此目的。

对该宏的调用，后跟一个块（或单个语句），将插入`decl`以该块为范围的声明，并在该块`preexpr`之前和`postexpr`之后评估：

```
#define LET(decl, preexpr, postexpr) \
    for (int _loop = 1; _loop;) \
        for (decl; _loop && (preexpr, 1); postexpr, _loop = 0) 
```

这是 C，但也应该在 C++ 中工作；当然，使用宏通常被认为是糟糕的 C++ 风格。`_loop`变量和循环应该由一个好的编译器优化掉。

# c++ - 使用指针或引用返回 Boost 矩阵是否有优势？

> ID：12877747
> 
> 赞同：0
> 
> 时间：2012-10-13T22:53:11.153
> 
> 标签：c++, boost, ublas

我正在使用 Boost 来做一些矩阵代数。我试图了解这种优化是否有任何作用。原来的：

```
matrix<double> DoSomething(matrix<double> a, matrix<double> b)
{
    return a + b; //for example
} 
```

优化：

```
matrix<double>* DoSomething(matrix<double>* a, matrix<double>* b)
{
    return *a + *b; //for example
} 
```

基本上，我假设使用指针作为参数和返回类型会阻止复制大对象。阅读完源代码后，我想知道 Boost ublas 是否基本上可以解决这个问题。似乎您总是在处理 Boost 代码中的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T22:57:20.477

这不是优化。事实上，这是一场灾难。您的“优化”代码返回一个指向函数返回时不再存在的临时对象的指针。如果您尝试解决此问题：

```
matrix<double>* DoSomething(matrix<double>* a, matrix<double>* b)
{
    return new Matrix<double>(*a + *b); //for example
} 
```

好吧，看看你刚才在那里做了什么。您只是要求创建一个副本，因为您的新矩阵是从求和`a`和`b`. 更糟糕的是，这段代码现在不再是异常安全的，而且很容易在调用者中搞砸而不释放分配的矩阵。

所以别管它。它已经过优化，您可以轻松地破坏它或使其变得更糟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:10:13.240

如果您想要最佳性能传递引用（或指针）并返回 std::move ：

```
matrix<double>&& DoSomething(matrix<double>& a, matrix<double>& b)
{
    return std::move(a + b); 
} 
```

所以你避免复制参数和返回值。但你只能在 C++11 中使用 std::move 。否则返回一个矩阵：

```
matrix<double> DoSomething(matrix<double>& a, matrix<double>& b)
{
    return a+b; 
} 
```

# wpf - 样式作为自定义用户控件的资源

> ID：12877750
> 
> 赞同：0
> 
> 时间：2012-10-13T22:53:53.580
> 
> 标签：wpf, xaml, styles

我正在尝试修改扩展 WPF 工具包向导控件，它是一个自定义控件，它在 generic.xaml 文件中具有默认样式，但现在我想根据向导类型对其进行修改，从而完全改变其样式

```
<Style TargetType="{x:Type local:Wizard}">
    <Style.Triggers>
        <Trigger Property="WizardType" Value="Normal">
            <Setter Property="Style" Value="{StaticResource StandartWizardTemplate}" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

这就是我修改其 generic.xaml 的方式，但在坚持期间未解决 StandardWizardTemplate

```
<Style x:Key="StandartWizardTemplate" TargetType="{x:Type local:Wizard}">
    <Setter Property="Background" Value="#F0F0F0" />
    <Setter Property="BorderBrush" Value="#A0A0A0" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <Grid />
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
    //Content of default template before modification
    </Setter>
</Style> 
```

同一个文件包含另一个样式定义，它根据触发器更改页面控制模板，所以我虽然可以为向导做同样的事情

```
<Style TargetType="{x:Type local:WizardPage}">
    <Style.Triggers>
        <Trigger Property="PageType" Value="Blank">
            <Setter Property="Background" Value="#FFF0F0F0" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Template" Value="{StaticResource BlankWizardPageTemplate}" />
        </Trigger>
        <Trigger Property="PageType" Value="Exterior">
            <Setter Property="Background" Value="#FFFFFF" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="ExteriorPanelBackground" Value="#E3EFFF" />
            <Setter Property="Template" Value="{StaticResource ExteriorWizardPageTemplate}" />
        </Trigger>
        <Trigger Property="PageType" Value="Interior">
            <Setter Property="Background" Value="#FFF0F0F0" />
            <Setter Property="BorderBrush" Value="{x:Static SystemColors.ActiveBorderBrush}" />
            <Setter Property="BorderThickness" Value="0,1,0,0" />
            <Setter Property="HeaderBackground" Value="#FFFFFF" />
            <Setter Property="Template" Value="{StaticResource InteriorWizardPageTemplate}" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

谁能为我提供正确的样式实现，以便我的向导自定义控件可以像 Page 一样设置样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T01:55:57.713

好的，我找到了解决这个问题的方法，我所要做的就是创建新的 ResourceDictionary 并使用键集声明 Wizard ControlTemplate。在 Generic.xaml 之后，我创建了 Marge Resource Dictionary 并在其中包含了所有单独的 Control 模板字典

毕竟我的 generic.xaml 现在看起来是这样的。

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:Converters="clr-namespace:CuratioCMS.Client.UI.Core.Converters"
                xmlns:local="clr-namespace:CuratioCMS.Client.UI.Controls">
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="./NormalWizardStyle.xaml" />
    <ResourceDictionary Source="./StepBased.xaml" />
    <ResourceDictionary Source="./MixedModeWizard.xaml" />
</ResourceDictionary.MergedDictionaries>

<Converters:WizardPageButtonVisibilityConverter x:Key="WizardPageButtonVisibilityConverter" />

<Style TargetType="{x:Type local:Wizard}">
    <Style.Triggers>
        <Trigger Property="WizardType" Value="Normal">
            <Setter Property="Template" Value="{StaticResource NormalModeWizardTemplate}" />
        </Trigger>
        <Trigger Property="WizardType" Value="StepWisivle">
            <Setter Property="Template" Value="{StaticResource StepModeWizardTemplate}" />
        </Trigger>
        <Trigger Property="WizardType" Value="MixedMode">
            <Setter Property="Template" Value="{StaticResource MixedModeWizardTemplate}" />
        </Trigger>
    </Style.Triggers>
    <Setter Property="Background" Value="#F0F0F0" />
    <Setter Property="BorderBrush" Value="#A0A0A0" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <Grid />
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
</Style>
</ResourceDictionary> 
```

# list - Haskell - 操作列表

> ID：12877756
> 
> 赞同：1
> 
> 时间：2012-10-13T22:54:27.503
> 
> 标签：list, haskell, matrix

给定一个矩阵`m`，一个起点`p1`和一个终点`p2`。目标是计算有多少种方法可以到达最终矩阵（p2=1 和其他=0）。为此，每次您跳到某个位置时，您都会减一。您最多只能从一个位置跳到另一个位置，水平或垂直两个位置。例如：

```
 m =             p1=(3,1)  p2=(2,3)
   [0 0 0]
   [1 0 4]
   [2 0 4] 
```

你可以跳到位置`[(3,3),(2,1)]`

当您从一个位置跳过时，您将其减一并再次执行所有操作。让我们跳到列表的第一个元素。像这样：

```
 m=              
    [0 0 0]
    [1 0 4]
    [1 0 4] 
```

现在你就位了`(3,3)`，你可以跳到这些位置`[(3,1),(2,3)]`

并一直这样做直到最终的矩阵：

```
[0 0 0]
[0 0 0]
[1 0 0] 
```

在这种情况下，获得最终矩阵的不同方法的数量是`20`。我创建了以下功能：

```
import Data.List
type Pos = (Int,Int)
type Matrix = [[Int]]    

moviments::Pos->[Pos]
moviments (i,j)= [(i+1,j),(i+2,j),(i-1,j),(i-2,j),(i,j+1),(i,j+2),(i,j-1),(i,j-2)]

decrementsPosition:: Pos->Matrix->Matrix
decrementsPosition(1,c) (m:ms) = (decrements c m):ms
decrementsPosition(l,c) (m:ms) = m:(decrementsPosition (l-1,c) ms)

decrements:: Int->[Int]->[Int]
decrements 1 (m:ms) = (m-1):ms
decrements n (m:ms) = m:(decrements (n-1) ms)

size:: Matrix->Pos
size m = (length m,length.head $ m)

finalMatrix::Pos->Pos->Matrix
finalMatrix (m,n) p = [[if (l,c)==p then 1 else 0 | c<-[1..n]]| l<-[1..m]]

possibleMov:: Pos->Matrix->[Pos]
possibleMov p mat = checks0 ([(a,b)|a<-(dim m),b<-(dim n)]  `intersect` xs) mat
                          where xs = movements p
                               (m,n) = size mat

dim:: Int->[Int]
dim 1 = [1]
dim n = n:dim (n-1)

checks0::[Pos]->Matrix->[Pos]
checks0 [] m =[]
checks0 (p:ps) m = if ((takeValue m p) == 0) then checks0 ps m
                                               else p:checks0 ps m

takeValue:: Matrix->Pos->Int
takeValue x (i,j)= (x!!(i-1))!!(j-1) 
```

**知道如何创建函数方式吗？**

```
 ways:: Pos->Pos->Matrix->Int 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:01:27.120

并行探索可能的路径。从起始位置开始，进行所有可能的动作。每个最终的配置都可以通过一种方式实现。然后，从每个生成的配置中，进行所有可能的移动。添加可以从以前的几个配置中获得的新配置的计数。重复该步骤，直到网格中只有一个非零元素。尽早剔除不可能的路径。

对于从初始配置可以通过多少种方式达到哪个配置的簿记，最简单的方法是使用[`Map`](http://hackage.haskell.org/packages/archive/containers/0.5.1.0/doc/html/Data-Map-Strict.html). 我选择将网格表示为（未装箱的）数组，因为

*   它们比列表更容易处理索引和更新
*   他们使用更少的空间并且索引更快

编码：

```
module Ways where

import qualified Data.Map.Strict as M
import Data.Array.Unboxed
import Data.List
import Data.Maybe

type Grid = UArray (Int,Int) Int
type Position = (Int,Int)
type Configuration = (Position, Grid)
type State = M.Map Configuration Integer

buildGrid :: [[Int]] -> Grid
buildGrid xss
    | null xss || maxcol == 0   = error "Cannot create empty grid"
    | otherwise = listArray ((1,1),(rows,maxcol)) $ pad cols xss
      where
        rows = length xss
        cols = map length xss
        maxcol = maximum cols
        pad (c:cs) (r:rs) = r ++ replicate (maxcol - c) 0 ++ pad cs rs
        pad _ _ = []

targets :: Position -> [Position]
targets (i,j) = [(i+d,j) | d <- [-2 .. 2], d /= 0] ++ [(i,j+d) | d <- [-2 .. 2], d /= 0]

moves :: Configuration -> [Configuration]
moves (p,g) = [(p', g') | p' <- targets p
                        , inRange (bounds g) p'
                        , g!p' > 0, let g' = g // [(p, g!p-1)]]

moveCount :: (Configuration, Integer) -> [(Configuration, Integer)]
moveCount (c,k) = [(c',k) | c' <- moves c]

step :: (Grid -> Bool) -> State -> State
step okay mp = foldl' ins M.empty . filter (okay . snd . fst) $ M.assocs mp >>= moveCount
  where
    ins m (c,k) = M.insertWith (+) c k m

iter :: Int -> (a -> a) -> a -> a
iter 0 _ x = x
iter k f x = let y = f x in y `seq` iter (k-1) f y

ways :: Position -> Position -> [[Int]] -> Integer
ways start end grid
    | any (< 0) (concat grid)   = 0
    | invalid   = 0
    | otherwise = fromMaybe 0 $ M.lookup target finish
      where
        ini = buildGrid grid
        bds = bounds ini
        target = (end, array bds [(p, if p == end then 1 else 0) | p <- range bds])
        invalid = not (inRange bds start && inRange bds end && ini!start > 0 && ini!end > 0)
        okay g = g!end > 0
        rounds = sum (concat grid) - 1
        finish = iter rounds (step okay) (M.singleton (start,ini) 1) 
```

# php - 在循环中“评估”图像 [x]

> ID：12877763
> 
> 赞同：0
> 
> 时间：2012-10-13T22:56:17.220
> 
> 标签：php, javascript, xml, loops, gallery

```
for (m=0;m<z;m++) {
    document.write("<img src=" + image1 + '>' + "<br>");
} 
```

我通过 PHP 从 XML 文件中成功获取了图像 URL 列表。
var 'image1' 返回 'image_1.png'。

在上面的循环中，我想输出这些图像。上面的“image1”显示两次“image_1.png”（在本例中为 z=2），但我想要的是所有图像的列表。我想加入类似'image[m]'的东西，但我知道那是不对的。

如果有人以前没有问过这个问题，我会感到惊讶，我搜索但找不到答案。

这是获取我的 XML 数据的 PHP：

```
<script type="text/javascript">
// code for IE7+, Firefox, Chrome, Opera, Safari
if (window.XMLHttpRequest) {
    xmlhttp=new XMLHttpRequest();
}
// code for IE6, IE5
else {
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.open("GET","../../file.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

var x=xmlDoc.getElementsByTagName("project")
var j=xmlDoc.getElementsByTagName("imagelist");
for (i=0;i<x.length;i++) { 

    for (z=0;z<j.length;z++) {
        this["image" + z] = j[z].getElementsByTagName("image")[z].childNodes[0].nodeValue
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T19:07:07.083

```
<script type="text/javascript">
// code for IE7+, Firefox, Chrome, Opera, Safari
if (window.XMLHttpRequest) {
    xmlhttp=new XMLHttpRequest();
}
// code for IE6, IE5
else {
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.open("GET","../../designportfolio.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

var projectname = "<?= $name ?>";
var x=xmlDoc.getElementsByTagName("project")
var j=xmlDoc.getElementsByTagName("imagelist");
var k=xmlDoc.getElementsByTagName("image");

for (i=0;i<x.length;i++) { 

    //vars from xml used to display data in html
    var folder = x[i].getElementsByTagName("folder")[0].childNodes[0].nodeValue;

    //only defines the data if the projectname and folder name match
    if (folder == projectname) {
        var projecttitle = x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue;
        var projectinfo_l = x[i].getElementsByTagName("projectinfo_l")[0].childNodes[0].nodeValue;
        var skillsused = x[i].getElementsByTagName("skillsused")[0].childNodes[0].nodeValue;
        var date = x[i].getElementsByTagName("date")[0].childNodes[0].nodeValue;
        var videoURL = x[i].getElementsByTagName("videoURL")[0].childNodes[0].nodeValue;

        var images = [];
        for (z=0;z<k.length;z++) {
            images.push(x[i].getElementsByTagName("image")[0].childNodes[0].nodeValue);
            document.write("images " + images + "<br>");

        }
    }   
} 
```

im in a total mess. im using an IF to pick only one project, this works. I want only the images from this project. the above code is getting all the images in the xml file (13 of them), i want ONLY the images from the current project (the project corresponding to 'folder' or 'projectname'). I cant do this :(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:04:17.160

哇。好的。就在这里：

```
this["image" + z] = j[z].getElementsByTagName("image")[z].childNodes[0].nodeValue 
```

不要那样做。

这是在全局范围内动态创建变量。我可以解释为什么会这样（`this`这里是全局对象，全局对象的属性本身就是全局变量），但是对于新手 JS 程序员来说，你不应该这样做可能就足够了，因为一般来说，这是一个非常糟糕的主意。

相反，您真正想要的是一个数组。

```
var images = [];
for (i=0;i<x.length;i++) { 
  for (z=0;z<j.length;z++) {
    images.push(j[z].getElementsByTagName("image")[z].childNodes[0].nodeValue);
  }
} 
```

现在，您以后的循环非常简单。您只需使用循环索引作为数组索引来获取您想要的值。

```
for (m=0;m<z;m++) {
  document.write('<img src="'+ images[m] +'"><br>');
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-13T23:02:09.683

你有一个图像数组，你想用 js 渲染。有几种方法。您在问题中的示例代码可能是最糟糕的方法。

**不要**使用 document.write() 来执行此操作。

所有示例都假定“图像”是一个包含 n 个图像 url 的数组。

示例 1

```
var images = [],
    target = document.getElementById('target_div'); //this is the location in the document where the images are appended to

for(var i=0, len=images.length; i++){
    var img = document.createElement('img');
    img.src = images[i];
    target.appendChild(img);
} 
```

示例 2

```
var images = [],
    target = document.getElementById('target_div'); //this is the location in the document 

var arr = [];
for(var i=0, len=images.length; i++){
    arr.push('<img src="'+ images[i] +'">');
}
target.innerHTML = arr.join(''); 
```

# python - Numpy：按键排序功能

> ID：12877764
> 
> 赞同：10
> 
> 时间：2012-10-13T22:56:20.277
> 
> 标签：python, function, sorting, numpy, key

有没有办法使用键（或比较器）函数对 numpy ndarray 的行进行排序，而无需转换为 python 列表？

特别是我需要根据这个函数进行排序：

```
c1,c2= 4,7
lambda row: c1*(row[1]/c2)+row[0] 
```

我意识到一种可能的解决方案是使用每行的键值生成一个向量，但是如何根据它进行排序呢？是否应该以某种方式将这样的向量转换为索引向量？

```
order= c1*(matrix[:,1]/c2)+matrix[:,0]
indexes= order_to_index( order )
return matrix[ indexes ] 
```

这是现实的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T23:42:49.323

您的方法是正确的，它类似于[Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)或[Decorate-Sort-Undecorate (DSU) 习惯用法](http://wiki.python.org/moin/HowTo/Sorting#The_Old_Way_Using_Decorate-Sort-Undecorate)

正如我所说，您可以使用 numpy 函数[np.argsort](http://docs.scipy.org/doc/numpy/reference/generated/numpy.argsort.html)。它完成你的工作`order_to_index`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-29T17:07:59.147

对于更明确的答案，假设我们有一个数组`x`，并希望根据某个函数对行进行排序，该函数`func`接受一行`x`并输出一个标量。

```
x[np.apply_along_axis(func, axis=1, arr=x).argsort()] 
```

对于这个例子

```
c1, c2 = 4, 7
x = np.array([
    [0, 1],
    [2, 3],
    [4, -5]
])
x[np.apply_along_axis(lambda row: c1 * / c2 * row[1] + row[0], 1, x).argsort()] 
```

出去：

```
array([[ 0,  1],
       [ 4, -5],
       [ 2,  3]]) 
```

在这种情况下，`np.apply_along_axis`甚至没有必要。

```
x[(c1 / c2 * x[:,1] + x[:,0]).argsort()] 
```

出去：

```
array([[ 0,  1],
       [ 4, -5],
       [ 2,  3]]) 
```

# javascript - 在jquery中打印对象的值

> ID：12877766
> 
> 赞同：23
> 
> 时间：2012-10-13T22:56:49.903
> 
> 标签：javascript, jquery

我有下面的代码从网格中获取值。网格不是打印值，而是以以下对象格式打印数据。如何打印值？

```
[object Object], [object Object], [object Object], [object Object], [object Object] 
```

代码：

```
$(document).ready(function () {
    $("#check").click(function(){
        var rows = $('#jqxgrid').jqxGrid('getrows');
        alert(rows);
    });
}); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-13T23:07:30.750

一个简单的方法是使用

```
JSON.stringify(rows) 
```

IE

```
alert(JSON.stringify(rows)) 
```

否则，您将需要手动遍历对象的属性并相应地打印它们。举例说明有关输入和所需输出的更多详细信息。

交互式 Node.js 中的示例：

```
> x = { 1: 2, 3:4 };
{ '1': 2, '3': 4 }

> x.toString();
'[object Object]'

> JSON.stringify(x)
'{"1":2,"3":4}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-15T11:23:47.033

为了在 JQuery 中打印对象的值，您可以使用值创建一个新数组并打印它：

```
var array =  $.map(object, function(value){
    return value;
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-28T11:22:22.030

从 stackoverflow 获得帮助，包括以下 jquery 函数：

```
 The result will be equivalent to the PHP function print_r.
   echo '<pre>' . print_r($data) . '</pre>';

   USAGE: 
   var data = [{'id':1,'name':'hello'},'world'];
   $('#element').print_r(data);

//==========================================
(function($) {

    $.fn.print_r = $.fn.print = function(variable){
        return this.each(function(){
        if(typeof variable == 'object'){
            var string = $.print_r.objectToString(variable,0);
            $(this).html(string);
        } else {
            $(this).html('<pre>'+variable.toString()+'</pre>');
        }
    });

    }

    $.print_r = {
            objectToString : function (variable,i){
              var string = '';
              if(typeof variable == 'object' && i < 3){ // 3 is to prevent endless recursion, set higher for more depth
                  string += 'Object ( <ul style="list-style:none;">';
                  var key;
                  for(key in variable) {
                      if (variable.hasOwnProperty(key)) {
                        string += '<li>['+key+'] => ';
                        string += $.print_r.objectToString(variable[key],i+1);
                        string += '</li>';
                      }
                  }
                  string += '</ul> )';
              } else {
                  string = variable.toString();
              }
              return string;
        }
    }

})(jQuery) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T05:29:09.160

Grid 的 getrows 返回一个行数组。获取第一行：var row = rows[0]。要获得第二行，请使用： var row2 = rows[1] 等等。

要从第一行获取“fname”单元格值，您可以执行以下操作：

```
var rows = $("#grid").jqxGrid('getrows');
var firstRow = rows[0];
var fnameValue = firstRow.fname; 
```

# linux - linux下enqueue_head宏的含义

> ID：12877774
> 
> 赞同：0
> 
> 时间：2012-10-13T22:58:45.133
> 
> 标签：linux, linux-kernel, kernel

我不确定`ENQUEUE_HEAD`linux中宏的含义是什么意思。我有一种直觉，这意味着在任务醒来后将其排入队列，但仍想确定。

注意：出于 v3.5.4 中的参考目的，它`/include/linux/sched.h`在许多地方定义和引用，但我遇到问题的一个这样的地方是`enqueue_task_rt`文件中的函数`./kernel/sched/rt.c`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T05:58:46.760

sched：添加入队/出队标志

ENQUEUE_HEAD - 唤醒任务应该放在优先队列的头部（如果合适）。

[http://lkml.indiana.edu/hypermail/linux/kernel/1004.0/00744.html](http://lkml.indiana.edu/hypermail/linux/kernel/1004.0/00744.html)

# actionscript-3 - 可以使用 Stage3d 进行并行计算吗？

> ID：12877780
> 
> 赞同：4
> 
> 时间：2012-10-13T23:00:27.143
> 
> 标签：actionscript-3, stage3d, pixel-bender

我曾经像你一样在 AS3 中编写地图，但后来我在膝盖上拿了一个 Pixel Bender。从那时起，我一直在使用 Pixel Bender 对数组进行并行计算。可以使用 Stage3D 吗？

使用 Pixel Bender 进行计算的示例：

[http://wonderfl.net/c/eFp0/](http://wonderfl.net/c/eFp0/)

我的目标是获取 的向量`[x1, y1, x2, y,2 , . . ., xn, yn]`并返回 的向量`[f(x1), f(y1), f(x2), f(y2), . . . ,f(xn), f(yn)]`。更像`f(x1, y1).x , f(x1,y1).y`。我相信你明白了一般的想法。

我们通常所说的地图。这是一个彻底的解释。

[http://en.wikipedia.org/wiki/Map_%28higher-order_function%29](http://en.wikipedia.org/wiki/Map_%28higher-order_function%29)

我注意到使用 Pixel Bender 可以将速度提高 10 倍。有没有办法用 Stage3D 做同样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T02:49:31.457

与 c++ 等其他语言不同，我不知道除了[Program3D Shaders 和 Adob​​e Graphics Assembly Language](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display3D/Program3D.html)之外还有一种将汇编指令引导到 GPU 的方法。

> 可以使用 Pixel Bender 3D 离线工具创建程序字节码。它也可以动态创建。AGALMiniAssembler 类是将 AGAL 汇编语言程序编译为 AGAL 字节码的实用程序类。该类不是运行时的一部分。当您上传着色器程序时，字节码会被编译成当前设备的原生着色器语言（例如，OpenGL 或 Direct3D）。运行时在上传时验证字节码。
> 
> 每当调用 Context3D drawTriangles() 方法时，程序就会运行。顶点程序对要绘制的三角形列表中的每个顶点执行一次。片段程序对三角形表面上的每个像素执行一次。

没有接近您使用 Pixel Bender 获得的性能，应该注意的是，您可以利用 ActionScript [Workers](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html)来并行化您的仿函数。

> 一个 Worker 对象代表一个*worker*，它是 Flash 运行时的一个虚拟实例。每个 Worker 实例控制并提供对单个 Worker 的生命周期和共享数据的访问。
> 
> 这种同时执行多组代码指令的能力称为*并发*。

随着 Adob​​e Premium 功能、Alchemy / FlasCC、XC API、Pixel Bender 和 ActionScript Next 的推出，对于快速发展的 Flash 平台来说，这是一个激动人心的时刻。

# network-programming - 如何在 Linux 分布式系统中的任意端口上收听广播

> ID：12877781
> 
> 赞同：0
> 
> 时间：2012-10-13T23:00:26.823
> 
> 标签：network-programming, distributed-computing

我正在开发一个分布式应用程序，其中一组逻辑节点相互通信。

在初始发现阶段，每个逻辑节点启动并向网络发送一个 UDP 广播数据包，以通知其余节点其存在。

对于不同的物理主机，这可以通过同意端口号并跟踪从其他主机接收到的 UDP 广播来轻松处理。

我的问题是 - 我需要能够处理同一台机器上的多个逻辑节点的情况。

所以在这种情况下，我似乎不能两次绑定到同一个端口。如果同一个盒子上有两个逻辑节点，我该如何处理节点发现情况？非常感谢提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:50:01.810

您的选择是：

1.  创建一个 RAW 套接字并监听特定 NIC 上的所有数据包，这样，通过查看每个数据包的内容，该过程将识别数据包是否发往自己。问题在于您必须处理大量数据包。这就是我们操作系统的内核将套接字绑定到进程的原因，因此流量得到最佳分配。

2.  创建一个专门的服务，即一个守护进程，它将处理可用于执行工作的新进程的公告。启动时，该进程必须向服务宣布其端口号。这通常是如何完成的。

3.  为每个要运行的进程使用虚拟 IP 地址，每个进程绑定到不同的 IP 地址。如果您在本地网络上运行，这是最简单的方法。

4.  定义端口范围并在您定义的所有 IP 地址上扫描此范围。

# c - C 的文件 I/O 函数如何处理 NUL 字符？

> ID：12877790
> 
> 赞同：2
> 
> 时间：2012-10-13T23:03:22.250
> 
> 标签：c

标准 C 中的文件输入函数，如 fgetc()、fgets() 或 fscanf()，是否对 NUL ('\0') 字符有任何问题，或者将它们与其他字符区别对待？

我想问我是否可以使用 fgets() 来读取可能包含 NUL 字符的行，但我刚刚意识到，由于该函数 NUL 终止输入并且不以任何其他方式返回长度，因此它毫无价值无论如何使用。

我可以改用 fgetc()/getc()/getchar() 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T23:56:36.397

如果您正在阅读的内容实际上是文本，那么您的处境会有些尴尬。 `fgets`将很好地读取 NUL，将它们存储在缓冲区中，然后继续前进。但问题是，您刚刚读入的内容不再是 C 库通常期望的 NTBS（NUL*终止*的字节字符串），因此大多数期望字符串的函数将忽略第一个 NUL 之后的所有内容。而且您确实没有可靠的方法来获取长度，因为`fgets`不会将其返回给您并且`strlen`需要一个 C 字符串。（您可以想象每次将缓冲区归零并查找最后一个非 NUL 字符以获得长度，但对于大缓冲区中的短字符串，这有点难看。）

如果您正在处理二进制文件，事情会简单得多。你只是`fread`和`fwrite`数据，一切都很好。但是，如果您想要其中包含 NUL 的文本，您可能最终需要自己的 read-a-line 函数来返回长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T23:10:17.603

如果以“TEXT”模式打开文件，则无法读取超出 NULL 字符的文件。但是二进制文件可以是 open()ed、read() 和 close()d。查找这些函数和二进制 i/o。

此外，EOF 字符在 TEXT 文件中设置为 NULL 字符。但是，您可以使用 fstat 查询二进制文件的大小，并读取二进制数据（可能包括 NULL 字符）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T23:38:29.827

不，输入函数对 NUL 的处理方式与其他字符不同。但是，由于返回未知字符数的任何字符都使用 NUL 终止，因此最简单的方法是编写自己的，例如：

```
ssize_t myfgets(char *buffer, size_t buffSize, FILE *file) {
    ssize_t count = 0;
    int character;
    while(count < buffSize && (character = getc(file)) != EOF) {
        buffer[count] = character;
        ++count;
        if(character == '\n') break;
    }
    if(count == 0 && character == EOF) return EOF;
    return count;
} 
```

此函数类似于`fgets`，不同之处在于它返回读取的字符数并且不以 NUL 终止字符串。如果您希望字符串以 NUL 结尾，请将 while 循环中的第一个条件更改为`count < buffSize-1`并在循环之后添加`buffer[count] = '\0';`。

# python - matplotlib.mlab.normpdf() 的正确用法是什么？

> ID：12877794
> 
> 赞同：5
> 
> 时间：2012-10-13T23:03:31.673
> 
> 标签：python, matplotlib, distribution, gaussian

我打算让我正在编写的程序的一部分自动生成多个原始文本源上各种统计数据的高斯分布，但是我在按照以下指南生成图表时遇到了一些问题：

[python pylab绘制正态分布图](https://stackoverflow.com/questions/10138085/python-pylab-plot-normal-distribution)

情节代码的一般要点如下。

```
import numpy as np
import matplotlib.mlab as mlab
import matplotlib.pyplot as pyplot

meanAverage = 222.89219487179491    # typical value calculated beforehand
standardDeviation = 3.8857889432054091    # typical value calculated beforehand

x = np.linspace(-3,3,100)
pyplot.plot(x,mlab.normpdf(x,meanAverage,standardDeviation))
pyplot.show() 
```

它所做的只是产生一个相当扁平且无用的 y = 0 线！谁能看到这里有什么问题？

干杯。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-05-22T12:16:11.470

如果您阅读[matplotlib.mlab.normpdf](https://matplotlib.org/api/mlab_api.html#matplotlib.mlab.normpdf)的文档，则该函数已被废弃，您应该改用[scipy.stats.norm.pdf](https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.norm.html)。

> 2.2 版后已弃用：scipy.stats.norm.pdf

而且由于您的分布平均值约为 222，因此您应该使用`np.linspace(200, 220, 100)`.

所以你的代码看起来像：

```
import numpy as np
from scipy.stats import norm
import matplotlib.pyplot as pyplot

meanAverage = 222.89219487179491    # typical value calculated beforehand
standardDeviation = 3.8857889432054091    # typical value calculated beforehand

x = np.linspace(200, 220, 100)
pyplot.plot(x, norm.pdf(x, meanAverage, standardDeviation))
pyplot.show() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-14T00:19:53.977

看起来你犯了一些小但重大的错误。您要么选择了错误的 x 向量，要么交换了 stddev 和均值。因为你的平均值是 222，你可能希望你的 x 向量在这个区域，可能是 150 到 300。这样你就得到了所有好的东西，现在你看到的是 -3 到 3，它位于分配。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T23:07:55.147

我看到，对于`*args`发送 meanAverage、standardDeviation 的，要发送的正确内容是：

```
mu : a numdims array of means of a

sigma : a numdims array of atandard deviation of a 
```

这有帮助吗？

# algorithm - 基因 DNA 序列优化的算法选项？（与TSP、动态规划有关）

> ID：12877798
> 
> 赞同：1
> 
> 时间：2012-10-13T23:04:23.840
> 
> 标签：algorithm, dynamic-programming, simulated-annealing

以下问题专门用于生物技术应用，但可以说明其他领域类似问题的一般原则。这是一个 NP 难题，可能与旅行商问题有关，我很好奇可以使用哪些算法来得出解决方案。

**简要生物背景**：蛋白质由 20 种氨基酸组成。DNA 由 4 个碱基组成 - A、C、G、T。蛋白质的 DNA 序列决定了氨基酸的序列 - 每个连续的 3 个 DNA 碱基序列（单位称为密码子）编码一个氨基酸。单个氨基酸可以由多个密码子编码，例如缬氨酸有 4 种编码方式。

并非所有密码子都是平等的——其中一些密码子的处理速度比其他密码子快。此外，并非所有密码子 PAIRS 都是相同的 - 有些密码子对比其他密码子慢。

这意味着对于 100 个氨基酸（300 个 DNA 碱基）的特定基因，有多种编码相同氨基酸序列的方法，但具有非常不同的特性，例如处理速度。

给定具有相应速度值的密码子对表，我们想编写一个算法，**可以输出所需速度的序列**，例如可能的最快和最慢序列，以及介于两者之间的梯度。输入是编码基因的 DNA 序列，以及密码子对的字典及其各自的速度得分（-1 到 1）。输出是优化的 DNA 序列及其整个速度得分（可以表示为所有密码子对得分的总和）。氨基酸序列必须保持不变。

**示例**：如果我们有编码 3 个氨基酸的序列 AAATTTGGG，并且我们有带有分数的密码子对：

AAATT = -0.5

TTTGGG = -0.5

那么这个序列的得分可能是-1。

现在，如果我们也有配对选择，我们可以评估不同的可能性：

AAATTG = -0.7 AAATTC = -0.3

TTGGGC = +0.2 TTCGGA = -1.0

人们会发现基于此信息的最佳序列是 AAATTCGGA，因为它给出的总体值为 -1.3。

这个问题的复杂性当然在于密码子对对周围所有密码子对的影响。

完整的密码子对图表将有 61*61 个条目（因为 3 个密码子停止了基因的读取）。

====

**问题**

我相信这是一个 NP-hard 问题，并且与 TSP 有关。我见过一种方法使用模拟退火算法。我很好奇是否还有其他有见地的方法来考虑这个问题以及相应的算法和启发式方法来产生所需的输出。

如果是动态规划，什么方法是合适的？

此外，我们如何使用该算法来创建速度分数的梯度，而不仅仅是最大值和最小值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:27:19.337

使用遗传算法，您应该能够获得达到预期目标的序列。假设您的目标是 x 的速度，您可以创建一组基因——每个基因编码相同的基因，但由不同的密码子编码。然后选择、交配和变异几代，直到达到 x （或足够接近）。突变/重组元素必须在密码子水平（与核苷酸水平相反）。要实现一系列具有不同速度的序列，请使用不同的目标 x 多次运行该算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:51:39.240

为特定序列获得最快（或最慢）的编码应该是一个简单的动态规划问题。将每个 3 个氨基酸组视为 64 个字符字母表中的一个字符。然后在结果字符串中的每个点，您都可以选择产生所需氨基酸的几个字母，并且您希望最大化（最小化）与每对相邻字母相关的总和。

从左到右，在每个点，对于每个可能的字符，计算出以该字符结尾的最大（最小）序列。每个字符最多有 64 种可能性。给定最多 n 个字符的解决方案，您可以在此处使用该答案来计算最多 n+1 个字符的解决方案 - 只需将字符 n 和 n+1 的分数添加到已经计算出的最佳答案中最多 n 个字符 - 在 n+1 处保留您为每个可能的字符找到的最佳答案。

要获得中等分数的答案，一种方法是只生成随机答案，从而产生正确的氨基酸序列。另一种方法是将产生最高分数的答案部分与产生最低分数的答案混合。

# usb - 带有 Xilinx Atlys 板的外部 USB 设备接口

> ID：12877801
> 
> 赞同：3
> 
> 时间：2012-10-13T23:05:21.527
> 
> 标签：usb, hardware, fpga, xilinx

我正在尝试通过 USB UART 端口将 Mindwave (http://store.neurosky.com/products/mindwave-1) 与我的 Altys 板连接。我要连接的加密狗基本上是一个无线接收器，它在 USB 连接上输出串行数据流。我正在尝试在 FPGA 上读取此串行流。

我看到的问题是，当我尝试对 UartRx 引脚 (A16) 进行芯片检查时，即使加密狗应该在待机模式下发送 0xAA，我也没有看到任何活动。

由于 FPGA 不为加密狗供电，我将它连接到外部电源 USB 集线器，然后将集线器连接到 FPGA。但是我没有看到任何活动。

我需要将信号转换为另一个电平，还是将它们反转？我认为 EXAR 芯片会处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:48:31.573

你试过交换RX和TX吗？

您是否有权访问范围？要检查，您可以重复发送'U'（0x55）并用示波器查看哪一行是RX，哪一行是TX。您也可以使用此方法检查接口的速度。

# html - "float" 和 "width:auto" 属性冲突

> ID：12877806
> 
> 赞同：1
> 
> 时间：2012-10-13T23:06:25.990
> 
> 标签：html, css

我有这个例子：http: [//jsfiddle.net/DRW2S/](http://jsfiddle.net/DRW2S/)

```
#con{
    width:auto;
    background-color:red;
}
#inp{
    width:auto;
    max-width:525px;
    height:26px;
    float:right;
}
#btn{
    float:right;
    width:30px;
    background-color:yellow;
} 
```

```
<div id="con">
    <input type="text" id="inp" />
    <div id="btn"> hi </div>
    <div style="clear:both;"></div>
</div>
​ 
```

正如你所看到的，我已经用属性设置了“inp”，`width:auto`但感觉根本不工作。我注意到在这种情况下浮动属性有一些事情要做。为什么它不起作用，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:19:40.067

您应该在浮动元素上设置宽度。看到这个：

> 您应该始终在浮动项目上设置宽度（除非直接应用于具有隐式宽度的图像）。W3C 的层叠样式表，第 2 级，CSS2 规范指出：
> 
> “浮动框必须有明确的宽度......”
> 
> [http://css.maxdesign.com.au/floatutorial/introduction.htm](http://css.maxdesign.com.au/floatutorial/introduction.htm)

尽管遵循该规范的链接，但我看不到那里引用的句子。

尝试在浮动上设置像素或 % 宽度。

# linux - USB 转串口适配器不启动 agetty (Centos/RedHat) Linux

> ID：12877807
> 
> 赞同：1
> 
> 时间：2012-10-13T23:06:26.037
> 
> 标签：linux, serial-port

我正在尝试让终端通过 USB 到串行适配器电缆（PL2303 Prolific）工作。USB 转适配器电缆适用于我的 Windows 机器。我的 Linux 系统有一个终端（IBM 3151），它在串行端口 /dev/ttyS0 上运行良好，在 /etc/init/serial 中使用 'exec /sbin/agetty -L /dev/ttyS0 9600dumb' -ttyS0.conf 文件。

当我将 USB 转串口适配器插入 USB 端口时，它在系统上显示为 /dev/ttyUSB0。但是，我似乎无法让系统注意到并在设备上启动 getty。我创建了一个文件/etc/init/serial-ttyUSB0.conf，它包含...

```
start on stopped rc RUNLEVEL-[2345]
stop on starting runlevel [016]
respawn
pre-start exec /bin/stty -F dev/ttyUSB0 9600
exec /sbin/agetty -L /dev/ttyUSB0 9600 dumb 
```

当我插入 USB 转串口适配器时，系统似乎没有触发此文件。我可以手动启动 getty...

```
$ stty -F /dev/ttyUSB0 9600
$ /sbin/agetty -L /dev/ttyUSB0 9600 dumb 
```

然后，我可以通过 USB 转串口适配器使用我的终端登录。

当我插入 USB 转串行适配器电缆时，我应该怎么做才能开始工作，有什么建议吗？

我正在运行 Centos 6.0 (RedHat 6.0) 内核 2.6.32-71.e16.i686。

# google-apps-script - 谷歌文档脚本从两个日历中插入即将发生的事件列表

> ID：12877810
> 
> 赞同：0
> 
> 时间：2012-10-13T23:06:58.697
> 
> 标签：google-apps-script, google-docs

这是我的目标：在 Google 文档中，我希望能够运行 Google 脚本来填充文档的一部分，其中包含来自几个特定命名的 Google 日历的即将发生的事件。

这可能吗？

1.  我可以在文档中运行脚本吗？从按钮或菜单项？我还没有找到有关如何执行此操作的文档。

2.  在脚本中，我可以将文档的特定部分定位为新内容吗？每个元素都有一个 ID，或者我可以向目标元素添加自定义属性吗？

谢谢。

**编辑：**

我已经解决了 #2 并让一切按照我的意愿运行。通过 Google 脚本编辑器，我可以定位特定文档并将所需内容推送到所需位置。

剩下的就是把它挂到任何文档中，这样我就可以从文档中运行脚本了。

**编辑：**

对于 #1，答案似乎是 Google 文档无法托管脚本。但我可以制作一个通用脚本，然后我可以打开和操作我的任何文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T23:42:15.740

您需要它从文档中运行吗？您正在寻找即将发生的事件的列表？为什么不把它作为一个网络应用程序呢？您可以将它与 HTML 模板文件配对，并在使用事件构建字符串后使用[HTMLService](https://developers.google.com/apps-script/html_service)生成最终结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T04:15:48.347

对于 #2，我搜索文档中的表格，在表格的第一个单元格中查找特定文本。所以这个例程让我得到了我需要更新的表：

```
var targetFirstCellText = 'Date';

function findTableInDoc(docId){
  var doc = DocumentApp.openById(docId);
  var tables = doc.getTables();
  var table = null;
  var found = false;
  for(var t=0;!found && t<tables.length;t++){
    table = tables[t];
    var firstCellText = table.getCell(0,0).getText();
    if(firstCellText==targetFirstCellText){
      found = true;
    }
  }
  return table;
} 
```

然后，在我开始添加新行之前，我运行它。（可以通过其他方式完成……这既快速又简单。）

```
while(table.getNumRows()>1){
  table.getRow(1).removeFromParent();
} 
```

# amazon-s3 - 如何将boto与fakes3连接起来

> ID：12877811
> 
> 赞同：6
> 
> 时间：2012-10-13T23:07:08.157
> 
> 标签：amazon-s3, integration-testing, boto

我想知道如何将 boto 连接到 fakes3 以进行集成测试。

我目前正在像这样运行 fakes3：

```
fakes3 -r fakes3 -p 4567 
```

并尝试连接到 s3 并在 ipython 中创建一个存储桶，如下所示：

```
s3conn = S3Connection(access_key_id, secret_access_key, port=4567, host='localhost')
bucket = s3conn.create_bucket('test') 
```

这只是挂起。有人可以给我一个从boto连接到fakes3的例子吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T14:25:35.067

根据 fakes3 测试中的这个（[https://github.com/jubos/fake-s3/blob/master/test/botocmd.py](https://github.com/jubos/fake-s3/blob/master/test/botocmd.py)），你可能想要这样的东西：

```
from boto.s3.connection import S3Connection, OrdinaryCallingFormat

s3conn = S3Connection(access_key_id, secret_access_key, is_secure=False, port=4567, host='localhost', calling_format=OrdinaryCallingFormat()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T13:53:40.013

这发生在我的 Mac 上，我刚刚意识到 fakes3 没有创建文件的权限。所以我跑了 sudo fakes3 -r /mnt/fakes3_root -p 4567 & 和 create_bucket 和 get_all_buckets 工作正常

# php - 允许 .swf 上传/嵌入时的安全注意事项

> ID：12877812
> 
> 赞同：1
> 
> 时间：2012-10-13T23:07:25.067
> 
> 标签：php, file-upload, flash, xss

在文件上传方面，我已经实现了常见的做法（即检查文件大小，验证扩展名 - 确保它实际上是一个 .swf，当保存文件时将其完全重命名为随机字母数字 id）。

还有什么我可以做的/我错过了什么吗？

虽然我没有看到任何....这对我的访客（他们查看闪光灯）是否有危险 - 如果是这样，有没有办法缓解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T00:18:15.627

如果您允许用户上传 Flash 电影，而您没有彻底检查它是否存在恶意代码，那么您和观看该电影的每个人都注定要失败。

可悲的是，flash 本质上是一种具有长期安全故障历史的编程语言。而被攻击的系统始终是用户的浏览器。这就是为什么广告网络会大力调查他们的客户是否故意向他们发送恶意 Flash 横幅，但过去他们在不可接受的案例中失败了。

如果是我的用户，我不会这样做。

# php - 在 PHP 中关闭选项卡或离开站点调用会话 __destruct 吗？

> ID：12877820
> 
> 赞同：2
> 
> 时间：2012-10-13T23:08:59.903
> 
> 标签：php, session

我有一个 Web 应用程序，它在用户会话中存储一些对象，因此每次 AJAX 命中服务器时它都不必继续调用数据库。

我想编写一些在用户关闭浏览器选项卡或导航离开页面时触发的清理/保存功能。

如果用户导航离开页面，会话是否“被破坏”（即调用 __destruct 它包含的任何对象） - 还是使用在用户导航离开时发送 AJAX 请求的 javascript 处理这个客户端更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T23:12:53.800

PHP 会话是服务器端的东西。如果您没有显式地进行 AJAX 调用或类似调用，则客户端浏览器从页面导航不会触发任何服务器端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T23:17:19.787

简而言之：没有。你必须结束你的会话`session_destroy()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T23:34:38.767

会话在 PHP 中没有定义为一个类。相反，我们有一组[会话函数](http://www.php.net/manual/en/ref.session.php)来操作会话。为确保您已销毁会话，您需要显式调用：

```
 session_destroy(); 
```

如果您没有销毁会话，会话将在会话超时后进行垃圾收集。垃圾收集取决于以下参数 - session.gc_maxlifetime、session.gc_divisor 和 session.gc_probability。为了确保垃圾收集在每个会​​话上运行，您必须将 session.gc_probability 添加到 100%。但这肯定会增加服务器的开销，特别是如果您的服务器是高流量服务器。

如果您没有明确跟踪会话并在使用后将其销毁，那么您会将会话管理的某些部分留给操作系统。请参阅 PHP.net 的注释：

> 注意：如果您使用默认的基于文件的会话处理程序，您的文件系统必须跟踪访问时间 (atime)。Windows FAT 不支持，因此如果您遇到 FAT 文件系统或任何其他时间跟踪不可用的文件系统，您将不得不想出另一种方法来处理垃圾收集会话。从 PHP 4.2.3 开始，它使用 mtime（修改日期）而不是 atime。因此，您不会遇到时间跟踪不可用的文件系统问题。

最好的方法是在浏览器或选项卡关闭时通过 Ajax 调用发送一个标志。***您可以通过 javascript 的window.onunload***事件来检测它 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T00:12:05.127

如果将任何对象放入`$_SESSION`中，则脚本结束时不会调用它们的析构函数，但如果存在，`__sleep()`则在 PHP 序列化 $_SESSION 时调用魔术函数。当下一个脚本再次启动会话时，任何已存储且其源代码已知的对象（例如，在调用 session_start() 之前要求它，或使用自动加载）都将`__wakeup()`调用该方法。

如果 PHP 检测到会话在一段时间内处于非活动状态，它会简单地删除序列化文件。

请参阅文档： http: [//php.net/manual/en/language.oop5.magic.php](http://php.net/manual/en/language.oop5.magic.php)

# java - Android - 我们可以扩展 OnClickListener 另一个类吗？

> ID：12877826
> 
> 赞同：2
> 
> 时间：2012-10-13T23:09:45.403
> 
> 标签：java, android, class, abstract-class

```
public class A extends Activity {
   public void onCreate(Bundle b){
      ~
       Button b1 = (Button) findViewById(R.id.btn);
       b1.setOnClickListener(new B());
      ~
   }
}

public class B extends OnClickListener{
    ~ do something public void onClick() etc..
} 
```

有可能还是有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T23:15:48.723

[`OnClickListener`](http://developer.android.com/reference/android/view/View.OnClickListener.html)是一个接口，所以根据你想用它做什么，你可以使用：

```
public interface MyClickListener extends OnClickListener {}

public class MyClickClass implements OnClickListener {} 
```

查看您的示例，我假设您需要第二个选项：

```
public class MyClickClass implements OnClickListener {
    @Override
    public void onClick(View v) {
        Log.v("MyClickClass", "b1 clicked!");
    }
} 
```

像这样使用它：`b1.setOnClickListener(new MyClickClass());`

# c++ - C++ 模板方法定义在类中不匹配

> ID：12877834
> 
> 赞同：0
> 
> 时间：2012-10-13T23:11:00.617
> 
> 标签：c++, templates, compiler-construction, methods, compiler-errors

我无法将模板方法的定义放在其类之外。考虑以下来自 .h 文件的代码（剥离非必要代码以了解问题）：

```
template <typename T> class CStyleAllocator
{
public:
    // Conversion constructor declaration
    template <typename U> CStyleAllocator(const CStyleAllocator<U>&);
};

// Attempted definition
template <typename T, typename U> CStyleAllocator<T>::CStyleAllocator(
    typename const CStyleAllocator<U>&
)
{
} 
```

Visual C++ 2010 编译器输出此错误：

```
1>c:\dev\devworkspaces\dev.main\platform\cpp\memory\cstyleallocator.h(67): error C2244: 'CStyleAllocator<T>::{ctor}' : unable to match function definition to an existing declaration
1>          definition
1>          'CStyleAllocator<T>::CStyleAllocator(const CStyleAllocator<U> &)'
1>          existing declarations
1>          'CStyleAllocator<T>::CStyleAllocator(const CStyleAllocator<U> &)'
1>          'CStyleAllocator<T>::CStyleAllocator(void)' 
```

我正在尝试定义一个依赖于 2 个泛型类型的转换构造函数。

合并类中的声明和定义是有效的：

```
template <typename T> class CStyleAllocator
{
public:
    template <typename U> CStyleAllocator(const CStyleAllocator<U>&) { }
}; 
```

你看到我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:15:55.010

试试这样：

```
template <typename T>
template<typename U>
CStyleAllocator<T>::CStyleAllocator(
    const CStyleAllocator<U>&
)
{
} 
```

# html - 重叠“缩放”div 阻止文本和选项选择

> ID：12877836
> 
> 赞同：2
> 
> 时间：2012-10-13T23:11:40.230
> 
> 标签：html, text, zooming, blocking, overlapping

此页面上的第一个问题 - 耶！

我目前正在为客户建立一个网站，这给我带来了一些麻烦。

我有一个缩放工具，当光标经过图片时，它允许用户缩放图像。

这会在我的 text-div 顶部创建一个“秘密”div。text-div 包含一个选择选项下拉菜单。“秘密” div 阻止了 text-div 中的任何活动 - 我无法突出显示任何文本或在下拉列表中选择一个选项。当我将 text-div 从“秘密”div 移开时，我可以做到这一点。

请参阅此页面：[http ://shakermedia.dk/2up/2012/10/seville-modulsofa-sort/](http://shakermedia.dk/2up/2012/10/seville-modulsofa-sort/)

我能做些什么？这是两个 div 的 css 代码：

```
 div.zoom-box {
    width:450px;
    line-height: 0;
    height:100%;
    float:right;
    position:relative;
    z-index: 2;
}

div.text-alignment {
    width:450px;
    float:right;
    margin-top:-419px;
    height:100%;
    position: relative;
} 
```

如何使 text-div 可访问，但将“缩放框”保持在同一位置（缩放时重叠文本）？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T12:22:10.420

您需要尝试为**z-index**值较低的元素和高于 z-index 值的元素提供较高的**z-index**值

# haskell - 我的第一个 Haskell 程序，我不明白出了什么问题

> ID：12877837
> 
> 赞同：3
> 
> 时间：2012-10-13T23:12:01.553
> 
> 标签：haskell, functional-programming

我正在尝试`elem`递归地实现该功能。这是我写的：

```
 member :: Eq a => a -> [a] -> Bool
 member _ [] = False

 member n (x:xs)
     | n == x           = True : member (n xs)
     | otherwise        = False

 main = do
 print (member 10 [1,12,11]) 
```

我收到“无法将预期类型 'Bool' 与实际类型 '[a0]' 匹配”错误。

我也尝试使用 if..else..then 进行相同的操作，但徒劳无功。

我想我在这里错过了一个非常基本和基本的 Haskell 概念。

帮助？

[这](https://stackoverflow.com/questions/8110605/couldnt-match-expected-type-bool-with-actual-type-card-bool?answertab=votes#tab-top)和[这](https://stackoverflow.com/questions/6087111/couldnt-match-expected-type-a0-with-actual-type-io?rq=1)对我没有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T23:18:33.073

该子句与声明的返回类型`True : member (n xs)`不匹配。如果您找到in with ，那么您只想简单地 return 。`member``Bool``x``xs``x == n``True`

否则，您应该`member`使用较小的列表进行递归`xs`（即再次检查`n`与下一个元素的相等性）。这是您的代码，已按所述修复了这两个问题：

```
member n (x:xs) | n == x    = True
                | otherwise = member n xs 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T23:15:33.513

*   如果您找到了该元素，则答案是`True`。您似乎正在尝试在那里创建一个列表，不知道为什么......
*   如果还没有找到，递归并检查尾部...

# mysql - MySQL INT(x) 与 INT(x+1)

> ID：12877844
> 
> 赞同：-1
> 
> 时间：2012-10-13T23:13:18.483
> 
> 标签：mysql

`INT(x)`与`INT(x+1)`MySQL相比，声明一个字段有什么影响？如果我尝试进入`12345`某个`INT(4)`领域会发生什么？当我查询它时会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T23:16:02.920

# wpf - 扩展 UserControl.Resources

> ID：12877845
> 
> 赞同：1
> 
> 时间：2012-10-13T23:13:25.607
> 
> 标签：wpf, wpf-controls, resourcedictionary

我想为 a 提供一个简单的默认样式`UserControl`，但在使用控件时仍然能够扩展或覆盖该样式。下面是一个示例场景，其中包含一个简单的控件`UserControl`和一个`Window`包含控件。目的是让 中`Button`提供的样式`Window`覆盖 中定义的默认样式`UserControl`。

**用户控制**

```
<UserControl x:Class="Sample.TestControl" ... >
    <UserControl.Resources>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Margin" Value="2" />
            <Setter Property="Foreground" Value="Orange" />
        </Style>
        <Style TargetType="{x:Type StackPanel}">
            <Setter Property="Background" Value="Black" />
        </Style>
    </UserControl.Resources>
    <StackPanel>
        <Button Content="Press Me" />
        <Button Content="Touch Me" />
        <Button Content="Tap Me" />
    </StackPanel>
</UserControl> 
```

**窗户**

```
<Window x:Class="Sample.MainWindow" ... >
    <Grid>
        <local:TestControl>
            <local:TestControl.Resources>
                <Style TargetType="{x:Type Button}">
                    <Setter Property="Margin" Value="2" />
                    <Setter Property="Foreground" Value="Green" />
                </Style>
            </local:TestControl.Resources>
        </local:TestControl>
    </Grid>
</Window> 
```

**问题**

上面的代码将导致：

*   例外：`Set property 'System.Windows.ResourceDictionary.DeferrableContent' threw an exception.`
*   内部异常：`Item has already been added.`

上面的代码试图将两个具有相同键的样式提交到相同的`ResourceDictionary`，所以显然它不会工作。我猜我将无法为按钮提供默认样式...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:14:29.383

**解决方法不足：**覆盖默认值`ResourceDictionary`

```
<Window x:Class="Sample.MainWindow" ... >
    <Grid>
        <local:TestControl>
            <local:TestControl.Resources>
                <ResourceDictionary>
                    <Style TargetType="{x:Type Button}">
                        <Setter Property="Margin" Value="2" />
                        <Setter Property="Foreground" Value="Green" />
                    </Style>
                </ResourceDictionary>
            </local:TestControl.Resources>
        </local:TestControl>
    </Grid>
</Window> 
```

通过将自定义`Button`样式放在 a 中`ResouceDictionary`，我可以覆盖默认样式。但是，它不仅覆盖了`Button`样式，而且覆盖了所有资源。因此，`StackPanel`将不再有黑色背景。（显然，我也可以将其添加到最重要的样式中，但这在更大范围内不实用。）

# c++ - 构造函数参数中没有名称的变量？

> ID：12877846
> 
> 赞同：4
> 
> 时间：2012-10-13T23:14:26.847
> 
> 标签：c++, variables, constructor, arguments

我想知道，当有人给你一个 C++ 中默认构造函数的模板时，在参数中有一系列未命名的变量，它们以某种方式被赋值。这是什么意思？这合法吗？如何访问这些变量？

我收到的示例：

```
IntSet::IntSet(int = -1, int = -1, int = -1, int = -1); //default constructor 
```

我将不胜感激任何澄清这种用途的答案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T23:55:32.297

在声明或函数定义中不命名参数是完全合法的。在声明和定义中为给定参数使用不同的名称也是完全合法的。

请注意，如果定义中未命名的参数不可访问。为什么要这样做？许多编译器可以抱怨未使用的参数。如果函数定义没有命名那些未使用的参数，大多数编译器都不会抱怨。

关于声明中的未命名参数，这是这个问题的主题：仅仅因为这样做是合法的，并不一定意味着这是一个好习惯。函数声明中的那些未命名参数对于编译器来说可能没问题，但对于人类读者来说就不行了。没有名字=零交流。文档和头文件应包含外部用户需要了解的有关如何使用该类的所有内容。RTFM，也许还有 RTFH（阅读精美的手册/阅读精美的标题）。RTFM 和 RTFH 中的“F”字（“fine”）在 RTFC 中具有不同的含义。

标题中的那些未命名参数几乎不可避免地与糟糕的文档相结合。作为外部用户，这迫使我阅读函数的定义以了解如何使用函数。RTFC。当外部用户必须阅读实现以确定发生了什么时，这是不好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T23:26:14.467

这意味着如果您在不传递参数的情况下调用它，则参数将采用您传递的值。

所以如果你打电话

```
IntSet* i = new Intset(); 
```

相当于打电话

```
Intset* i = new IntSet(-1,-1,-1,-1) 
```

关于未命名的部分。我会假设因为它是使用模板的库的一部分。未使用无名参数，但存在，因此它与可能需要它们的另一个类的签名相匹配。在需要它们的情况下，默认情况下它只会传递-1。您可以查看此链接作为示例：

[http://compgroups.net/comp.lang.c++/unnamed-formal-parameter/1004784](http://compgroups.net/comp.lang.c++/unnamed-formal-parameter/1004784)

我在这里从上面的参考资料中复制了这个例子，以说明以一种有用的方式使用这种结构

例如

```
class A
{
     public:
     A(void* = 0) {}    // unused parameter
};

class B
{
    public:
    B(void* p) : pp(p) {} // used parameter
private:
    void* pp;
};

template <class T>
class C
{
public:
    static T* create(void* p = 0) { return new T(p); }
};

int main()
{
    A* a = C<A>::create();
    B* b = C<B>::create("hello");
} 
```

C::create 不会编译，除非 A::A 有一个参数，即使它没有被使用。

# sql-server-2008 - 使用 ISABOUT 时可以使用变量吗？

> ID：12877852
> 
> 赞同：3
> 
> 时间：2012-10-13T23:15:41.560
> 
> 标签：sql-server-2008, containstable, isabout

我正在尝试使用存储过程来创建一个表，该表通过获取主题名称并使用与该主题名称相关联的关键字和权重来确定它们应该如何排名来对帖子进行排名。我一直在尝试使用 CONTAINSTABLE 和 ISABOUT，但在将关键字和权重放入 ISABOUT 语句时遇到了麻烦。我尝试将关键字和权重从它们所在的表中转换为 varchar 变量，并将该变量放入 ISABOUT 语句中，但是当我运行 SP 时，结果表为空，所以我假设变量不工作，我不知道从这里去哪里。

这是我到目前为止所拥有的：

```
CREATE PROCEDURE rankingSP (@Topic varchar(30))
AS
BEGIN
    --creates table to display when sp is executed  
    CREATE TABLE #rankingTable(
    Post_ID     int,
    Post_cont   varchar(max),
    [Rank]      decimal(18,2))

    --creates string with keywords and weights
    DECLARE @keywordString varchar(max)
    SELECT @keywordString = COALESCE(@keywordString + ',','') 
    + Keyword + ' ' + 'WEIGHT' + '(' + CONVERT(varchar,K_weight) + ')'
    FROM Keyword
    PRINT @keywordString

    --inserts rankings into rankingTable
    INSERT INTO #rankingTable
    SELECT
    p.[Post_ID],
    p.[Post_cont],
    ct.[RANK]
    FROM CONTAINSTABLE
    (
    Post,
    Post_cont,
    N'ISABOUT (@keywordString)'
    ) ct
    INNER JOIN Post p
    ON ct.[KEY] = p.Post_ID
    ORDER BY ct.[RANK] DESC;

    --displays the ranking table
    SELECT * FROM #rankingTable
    ORDER BY [Rank]DESC
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:27:01.387

在我看来，由于您传递搜索条件的方式，sql引擎不会将其识别为变量，而只是一个字符串。我已经有一段时间没有做任何事情了，`CONTAINSTABLE`但我认为如果你像这样尝试它应该可以工作。

```
--- snippet
FROM CONTAINSTABLE
(
 Post,
 Post_cont,
 N'ISABOUT (' + @keywordString + ')'
)
ct
INNER JOIN Post p
  ON ct.[KEY] = p.Post_ID
  ORDER BY ct.[RANK] DESC; 
```

此外，您可能需要传递 "" 引号。这是一个[类似的问题](https://stackoverflow.com/a/8430703/261997)，它演示了相同的概念。

# windows - 如何在我的 Windows 应用程序的“关于”框中放置 PayPal 捐赠按钮？

> ID：12877856
> 
> 赞同：0
> 
> 时间：2012-10-13T23:16:15.557
> 
> 标签：windows, paypal, donations

Paypal 对接受来自网页的捐款有很多支持——我一直在他们的网站上阅读详细信息。

但是，我的老式 Windows 桌面应用程序的“关于”框中的捐赠链接怎么样？

我想在我的关于框里放一张捐赠图片和链接。我宁愿不必嵌入浏览器控件，而只想创建一个指向 PayPal 的简单链接。

他们支持这个吗？这是可行的吗？如果是这样，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:34:49.160

这是你问起来感到尴尬的问题之一。

这是你如何做到的：

1.  为您的网页设置链接。
2.  转到您的网页并单击链接
3.  复制生成的 URL
4.  使用该 URL 作为您的 About Box 链接或其他任何内容的目标。

Windows 中的 ShellExecute 可以很好地转到给定的 URL。

# javascript - ASP.NET MVC Web 应用程序中的后退按钮问题

> ID：12877861
> 
> 赞同：1
> 
> 时间：2012-10-13T23:16:53.243
> 
> 标签：javascript, asp.net-mvc, browser

这是一个很难解释的问题。

让我给你描述一个场景。

1.  我有主页、注册页面、登录页面和仪表板页面
2.  当我从注册页面注册申请并点击提交时。应用程序将处理请求，并在用户登录的情况下将我重定向到 Dashbord。现在，问题来了。当我按下后退按钮时。我得到了注册页面，其中的字段由值填充。这不应该发生。
3.  当我登录系统并从仪表板登录时，我回击浏览器。它会显示我的登录页面。这也不应该发生。

我希望它能清楚地说明我在寻找什么。

我尝试过的几个可能的解决方案：

1.  使用代理页面。类似于许多邮件服务正在做的事情。但在 MVC 3 中，它不会检测页面加载事件，并且对页面的控制非常少。
2.  在代理页面 window.history.forward() 上使用 javascript 函数
3.  代理页面一旦呈现就过期。

我并不完全相信上述解决方案。我希望以系统的方式和优雅的解决问题的方式获得一些最佳实践。

请帮助我就您正在使用的现有解决方案提出建议，以及您是否有一些出色的工作解决方案。请分享。

谢谢大家。

仅供参考。我正在使用 ASP.NET MVC 4 进行开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T07:25:50.690

在注册和登录页面的 Controller/Action 方法中，检查用户是否已经登录并重定向到例如。仪表板。

这样的事情取决于您如何进行身份验证。

```
public ActionResult Register()
{
  //If already logged in no need to show register page again
  if(Request.IsAuthenticated)
    return Redirec("Dashboard");

  return View();
} 
```

编辑：更新了修复评论问题的答案

我创建了一个包含以下内容的部分视图

```
<input type="hidden" id="reloader" value="" />
<script type="text/javascript">
  if (document.getElementById("reloader").value === "reload")
      window.location.reload();
  else
      document.getElementById("reloader").value = "reload"
</script> 
```

然后，您可以将其包含`@Html.Partial('PartailViewName')`在您的注册和登录视图中。

由于当您使用后退按钮时 DOM 被缓存，所以如果用户使用后退按钮，上面的脚本将重新加载页面。

如果与我的第一个答案一起使用，您将获得您想要的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:52:54.920

使用 history.js 来控制 history.back() 事件。您只需替换最后一页的状态以指向仪表板或您想要的页面（在您的 Web 应用程序内；出于安全原因，禁止跨域）。当用户单击后退按钮时，将加载定义的页面而不是登录页面。

[https://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)

代理解决方案对于这种 UI 交互来说太复杂了。客户端控制是您解决方案的最佳方法。HTML5 参考为此定义了 History API ( [http://www.w3.org/TR/html5/history.html](http://www.w3.org/TR/html5/history.html) )。不幸的是，并不是所有的浏览器现在都实现了它。那是因为 history.js 脚本存在。

# java - Java：数组中的索引存在，ArrayIndexOutOfBoundsException：0

> ID：12877866
> 
> 赞同：2
> 
> 时间：2012-10-13T23:17:39.813
> 
> 标签：java, windows, arrays, indexing

抱歉，如果由于我遗漏了一些明显的东西而在某处得到了回答，但我已经在谷歌上搜索了好几天，这似乎没有任何意义。我在 Javascript 方面有 3 年的经验，现在正在进入 Java，所以我不会落后于任何东西等的基本概念。

我为此使用 IntelliJ，但它没有指出问题所在。我的类之间的通信（访问权限和实例化）很好，代码语法和变量类型也很好，等等，所以我真的不知道它是什么。

我有一个 Data 类，它只保存“只读”数据供其他类使用。

```
public class Data {
    // snip
    public static int[][] specs = {
      {6,1,6,40},
      {5,2,5,30},
      {5,3,4,40},
      {4,4,3,60}
   };
} 
```

还有另一个类在初始化时必须读取这些数据。

```
public class Soldier {
    // snip
    public int range;
    public Soldier() {
        int x = ...; // user input
        range = Data.specs[x][1];
    }
} 
```

specs 数组本身包含其定义的数据（即数组不为空），x 作为 specs 数组的索引是有效的（即 0 <= x <= 3），它的类型是 int 并且 Test 可以读取specs 数组（全部通过调试输出语句确认）。然而，当它尝试设置 range 的值时（然后并且只有那时，在那个确切的点），我得到“索引超出范围”错误。

有人可以告诉我尝试读取数组时出了什么问题吗？或者我是否正确地说这真的很奇怪，我需要发布整个代码？

注意：一个小的新测试还表明，如果我将代码更改为首先从数组中输出手动选择的值，然后设置范围的值，控制台会打印错误语句（并退出程序）并通过打印手动选择的值，但分配值然后要求输出范围只会引发错误......这完全没有意义！

编辑：我已经编辑了上面的代码。在我的代码中，名为 Test 的类称为 Soldier（我正在制作基于文本的游戏......）。下面是堆栈跟踪，如果没有完整代码（很长）有什么好处。我的程序的基本结构是这样的：

1）Boot包含main方法并实例化一个新的Game

2) 游戏实例化 x Teams

3) 每个团队实例化一个军队

4) 每支军队实例化 x 个士兵

类的每个实例都设置为实例化类的属性（例如，公共军队军队；以及团队构造函数中的军队实例）。它本质上是一系列构造函数实例化后续类并将它们分配为它们的属性。

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0
at Army.<init>(Army.java:13)
at Team.<init>(Team.java:19)
at Game.<init>(Game.java:22)
at Boot.main(Boot.java:15)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)5 
```

编辑编辑：这是半完整的代码（我忽略了与它完全无关的东西，包括导入）。它没有特定的顺序，并且这些类位于 IntelliJ 项目中单独的 .java 文件中。游戏一直持续到新士兵要求指定其类型（执行用户输入的功能工作正常并验证输入，如游戏中技术上相同的其他部分所证明的那样）。

```
public class Boot {
    public static void main(String[] args) {
        Object[] games = new Object[] {};
        if (Lib.userConfirmPrompt("Start the game?") == true) {
            do {
                games[games.length] = new Game();
            }
            while (Lib.userConfirmPrompt("Do you want to play again?") == true);
        }
        System.exit(0);
    }
}

public class Game {
    public Object[] teams = new Object[] {};
    public Game() {
        for (int i = 0;i < settings.xbots + 1;i++) {
            teams[teams.length] = new Team(this);
        }
    }
}

public class Team {
    public Game game;
    public Army army;

    public Team(Game p) {
        game = p;
        army = new Army(this);
    }
}

public class Army {
    public Team team;
    public static Object[] soldiers = new Object[] {};

    public Army(Team p) {
        team = p;
        for (int i = 0;i < team.game.settings.xsoldiers;i++) {
            soldiers[soldiers.length] = new Soldier(this);
        }
    }
}

public class Soldier {
    private Army army;
    public int sight;
    public int range;
    public int distance;
    public int damage;

    public Soldier(Army p) {
        army = p;
        int type = Lib.userTxtIntOptionsPrompt(Data.isoldiertypes);
        // HERE is where it crashes, type is assigned and valid but the array access fails
        sight = Data.isoldierspecs[type][0];
        range = Data.isoldierspecs[type][1];
        distance = Data.isoldierspecs[type][2];
        damage = Data.isoldierspecs[type][3];
    }
}

public class Data {
    public static List isoldiertypes = Arrays.asList("Scout","Private","Machinegunner","Grenadier");
    public static int[][] isoldierspecs = {
        {6,1,6,40},
        {5,2,5,30},
        {5,3,4,40},
        {4,4,3,60}
    };
}

public class Lib {
    private static Scanner input = new Scanner(System.in);

    // output
    // default: 1 query string to print
    public static void outBase(String query) {
        System.out.print(query);
    }

    public static void outStd(String query) {
        outBase(query + "\n");
    }
    // end of output

    // input
    // default: 1 query string to print,
    //          query and input are in-line (exception: userConfirmPrompt prints query block-wise and default instruction in-line before input),
    //          keeps user hostage until valid input is given (exception: userPrompt returns blindly)
    public static String userPrompt(String query) {
        outBase(query);
        return input.nextLine();
    }

    public static String userTxtPrompt(String query) {
        String menuinput = null;
        do {
            if (menuinput != null) {
                userHostage();
            }
            menuinput = userPrompt(query);
        } while (menuinput.length() == 0);
        return menuinput;
    }

    public static int userIntPrompt(String query) {
        String menuinput = null;
        do {
            if (menuinput != null) {
                userHostage();
            }
            menuinput = userTxtPrompt(query);
        } while(menuinput.matches("^-?\\d+$") == false);
        return new Integer(menuinput);
    }
    // end of input

    // options input
    // default: takes a List of options as argument,
    //          prints an enumerated list of these options string-wise,
    //          prompts for a numeral selection of the desired option and returns the number if valid
    public static int userTxtIntOptionsPrompt(List options) {
        int choice = 0;
        Boolean chosen = false;
        do {
            if (chosen == true) {
                userHostage();
            } else {
                chosen = true;
            }
            chosen = true;
            for (int i = 0;i < options.size() - 2;i++) {
                outStd((i + 1) + ") " + options.get(i) + ",");
            }
            outStd((options.size() - 1) + ") " + options.get(options.size() - 2) + "\nand " + options.size() + ") " + options.get(options.size() - 1) + ".");
            choice = userIntPrompt("Enter the number of the option you'd like to select: ") - 1;
        } while(choice < 0 || choice >= options.size());
        return choice;
    }
    // end of options input

    // miscellaneous
    public static void userHostage() {
        outStd("Invalid operation. Please try again.");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T23:53:36.847

问题出在你的`Army`班级：

```
public static Object[] soldiers = new Object[] {}; 
```

您初始化一个名为 的空（长度 == 0）数组`soldiers`，但稍后您访问：

```
soldiers[soldiers.length] = new Soldier(this); 
```

这会导致失败。

根据定义，`soldiers.length`超出数组的边界（因为边界是 from `0`to `soldiers.length-1`）

* * *

要克服它 - 请确保在数组中分配足够的空间`soldiers`或使用动态数组 ( [`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html))。您可以将元素附加到`ArrayList`using [`ArrayList.add()`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28E%29)，并且在填充之前不需要知道预期的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T23:24:28.050

x 应大于 -1 且小于 4。

堆栈跟踪没有提到 Solder 类，它在 Army 类的构造函数中。

无论如何，只知道索引应该在一个范围内是不够的。作为程序员，您有责任在尝试访问该索引处的元素之前验证该索引。

```
if(index > 0 && index < array.length) {
    //then only acess the element at index 
```

问题是数组士兵的大小为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T23:36:12.130

这一行`int x = ...; // user input`意味着您正在以某种方式从用户那里获取输入并使用它访问数组。您是否正在检查此值以查看其是否在范围内（即介于 0 和 3 之间）？如果没有，这可能就是您的测试有效的原因。

**编辑：**这样的事情可能会为您解决：

```
public class Army { 
    public Team team; 
    public Vector<Soldier> soldiers;

    public Army(Team p) { 
       soldiers = new Vector<Soldier>()
        team = p; 
        for (int i = 0;i < team.game.settings.xsoldiers;i++) { 
            soldiers.add(new Soldier(this));
        } 
    } 
} 
```

从您的其他代码来看，这种模式在您的`Game`对象中也很有用。

# python - python web应用程序如何在客户端机器上打开程序？

> ID：12877870
> 
> 赞同：1
> 
> 时间：2012-10-13T23:18:02.033
> 
> 标签：python, linux, web

我将使用 python 构建一个基于 Web 的资产管理系统来管理 cg 短片的制作。该应用程序将基于 Intranet，在本地网络上的 centos 机器上运行。我希望您能够浏览所有资产和镜头，然后在客户端计算机（也运行 centos）上的适当程序中打开它们中的任何一个。我猜客户端必须进行某种设置以允许应用程序运行命令，这很好，因为我可以访问所有将使用它的客户端（尽管我没有t 具有 root 访问权限）。这种事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:21:11.027

请注意，这不是标准方式。想象一下，当您访问或单击某些内容时，那里的网站能够随意打开记事本或扫雷。

它的完成方式是，您需要有一个在客户端计算机上运行的服务，该服务可以公开某些 API 并信任来自 Web 应用程序调用的请求。这需要始终在客户端计算机上运行，​​并且在您的 Web 应用程序中，您可以向该服务发送请求以启动您想要的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T23:35:09.387

正如您已经猜到的那样，您需要在客户端 PC 上运行一个服务，侦听预定端口。

当客户端请求打开资产时，您的 Web 应用程序会将请求发送到正在运行的服务以下载资产并运行它。只要你的端口号。高于 1024 并且您没有运行任何需要 root 访问权限的应用程序，您可以在没有 root 权限的情况下运行此服务。

但这是一个**非常糟糕的主意**，因为它会使客户端受到恶意攻击。您必须确保对客户端服务的所有请求都已正确签名，并且客户端在执行之前验证每个请求是否有效。根据您对客户端服务的实施，您可能需要考虑许多其他安全因素。但总的来说，拥有可以从远程机器运行任意请求的服务是一件非常危险的事情。

根据贵公司的 IT 政策，您也可能不允许在客户端 PC 上运行此类服务。

您最好让客户端正常下载资源，然后让用户手动执行资源。

[PS：您可以让客户端服务在低于 1024 的端口上运行，但它必须以 root 身份启动，并且在绑定到端口后删除所有 root 权限并使用setuid](http://en.wikipedia.org/wiki/Setuid)（或您的等效项）将运行用户更改为不同的用户选择的语言）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T00:12:57.910

如果您有将在客户端系统上运行的特定应用程序子集（也就是您正在分发作业），那么您可能需要考虑使用 python salt。它是一个分布式 RPC，它使用安全协议和身份验证来分发作业和交付结果：

[http://docs.saltstack.org/en/latest/topics/index.html](http://docs.saltstack.org/en/latest/topics/index.html)

如果您正在考虑基于特定更新自动生成内容，那么您可能需要考虑 Jenkins，它具有用于各种修订控制系统和构建系统的插件：

[https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins)

它可能没有与您正在使用的特定工具集成，但如果集成了，那么它可能比通用盐自动化更快的设置和管理。

- 大卫

# vba - 可以拦截 onchange 事件吗？

> ID：12877872
> 
> 赞同：0
> 
> 时间：2012-10-13T23:18:11.830
> 
> 标签：vba

在 VBA 中是否可以拦截 javascript onchange 事件并在 webbrowser 控件中获取原始 ID#？

```
<select name="status0" id="status0" onchange="javascriptonchangeeventhere"> 
```

上面的代码是一个组合框演示，如果我从组合框中选择一个项目，它会在javascript中处理onchange。它所做的是提取一个包含当前日期和参考号的表单，而不是我想提取我自己的用户表单，然后将该数据吐到相关的（notes0）字段中。当它发生时我将如何拦截它，以便我可以将它分配给正确的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T05:54:28.930

这是一个简短的例子。为“Microsoft HTML 对象库”和“Microsoft Internet 控件”设置的项目引用

在类模块“clsEvents”中：

```
Option Explicit

Public WithEvents slct As MSHTML.HTMLSelectElement
Public WithEvents href As MSHTML.HTMLAnchorElement

'Note that having defined "href" as "WithEvents", if you choose "href"
'  from the left-hand dropdown at the top of the class code module
'  then the right-hand dropdown will populate with events you can select
'  from to create an event-handling procedure in the class

Private Function href_onclick() As Boolean
    Debug.Print "link clicked"
    href_onclick = False 'cancels the navigation
End Function

Private Sub slct_onchange()
    Debug.Print "select onchange - value is " & slct.Value
End Sub

Private Function slct_onclick() As Boolean
    Debug.Print "select onclick - value is " & slct.Value
End Function 
```

在常规模块中：

```
Option Explicit

Dim evt As clsEvents

Sub Setup()

    Dim IE As New InternetExplorer
    Dim el As Object, el2 As Object

    Set evt = New clsEvents

    IE.Visible = True
    IE.navigate "http://www.csee.wvu.edu/~riggs/html/select_example.html"

    Do While IE.Busy
    Loop

    Set el = IE.document.getElementsByTagName("select")(1)
    Set el2 = IE.document.getElementsByTagName("a")(1)

    If Not el Is Nothing Then
        Debug.Print "setting event capture: currentvalue=" & el.Value
        Set evt.slct = el
    End If

    If Not el2 Is Nothing Then
        Debug.Print "setting event capture on link:" & el2.innerText
        Set evt.href = el2
    End If

End Sub 
```

如果您运行`Setup`sub 然后更改第二个选择的值或单击 IE 页面上的“Javascript”链接，您应该会在 VB 编辑器的立即窗口中看到输出。

希望这有助于您入门。

# c# - 将 IntPtr 转换为 CWPSTRUCT

> ID：12877876
> 
> 赞同：3
> 
> 时间：2012-10-13T23:18:56.933
> 
> 标签：c#, intptr, mouse-hook

在我的 c# 项目中，我试图拦截来自另一个程序的鼠标点击，但也只有来自某个 hwnd 的那些……我在[这里](https://stackoverflow.com/questions/7761875/is-there-a-way-to-hook-mouse-events-for-a-specific-button-in-a-windows-form)读过，我可以使用 lParam 过滤我的消息，但我没有成功把它转换成我实际上可以让 Hwnd 回来的东西。

这就是我设置全局鼠标钩子的方式：

```
SetWindowsHookEx(WH_MOUSE_LL, s_MouseDelegate, IntPtr.Zero, 0); 
```

然后我在这个函数中捕获消息：

```
private static int MouseHookProc(int nCode, int wParam, IntPtr lParam)
{
    if (nCode >= 0)
    {
          switch (wParam)
          {
               case WM_LBUTTONDOWN:
                    mouseDown = true;
                    mouseUp = false;
                    break;
               case WM_LBUTTONUP:
                    mouseUp = true;
                    mouseDown = false;
                    break;
          }
     }
     return CallNextHookEx(s_MouseHookHandle, nCode, wParam, lParam);
} 
```

然后我像这样制作了 CWPSTRUCT：

```
[StructLayout(LayoutKind.Sequential)]
public struct CWPSTRUCT
{
    public IntPtr lparam;
    public IntPtr wparam;
    public int message;
    public IntPtr hwnd;
} 
```

这是它可能出错的部分......我尝试了两件事：

```
CWPSTRUCT cwp = (CWPSTRUCT)Marshal.PtrToStructure(lParam, typeof(CWPSTRUCT)); 
```

或者不安全的版本[，这是我从中得到的](http://www.dotnet247.com/247reference/msgs/27/135375.aspx)：

```
CWPSTRUCT* cp = (CWPSTRUCT*)lParam; 
```

使用第一个选项时，hwnd 部分总是得到 0，而使用不安全版本时，我什么也得不到……我真的不知道我在这里做错了什么。任何帮助，将不胜感激 ：）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T01:28:40.927

由于您正在挂钩`WH_MOUSE_LL`，因此`lParam`包含指向[`MSLLHOOKSTRUCT`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644970%28v=vs.85%29.aspx)而不是的指针[`CWPSTRUCT`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644964%28v=vs.85%29.aspx)（实际上是 for `WH_CALLWNDPROC`）。

所以你应该定义以下结构：

```
[StructLayout(LayoutKind.Sequential)]
public struct POINT
{
    public int X;
    public int Y;
}

[StructLayout(LayoutKind.Sequential)]
public struct MSLLHOOKSTRUCT
{
    public POINT pt;
    public int mouseData;
    public int flags;
    public int time;
    public UIntPtr dwExtraInfo;
} 
```

`lParam`并编组`MSLLHOOKSTRUCT`：

```
MSLLHOOKSTRUCT mouseLowLevelHook = (MSLLHOOKSTRUCT)Marshal.PtrToStructure(lParam,
    typeof(MSLLHOOKSTRUCT)); 
```

此外，您应该将`wParam`' 类型从更改`int`为`IntPtr`，这样它才能在 64 位平台上正常工作。

附加链接：

*   [挂钩概述](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959%28v=vs.85%29.aspx "挂钩概述")
*   [SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)
*   [LowLevelMouseProc 回调函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644986%28v=vs.85%29.aspx)

# android - getLastKnownLocation() 总是返回相同的位置，即使在设备移动之后

> ID：12877883
> 
> 赞同：1
> 
> 时间：2012-10-13T23:20:14.483
> 
> 标签：android, google-maps, google-maps-api-3, location

我通过执行设置我的位置管理器

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE); 
```

然后我调用在我的应用程序上有一个更新按钮，以便在按下它时，我将调用执行以下行

```
Location loc = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER) 
```

然而，我得到的位置总是一样的，即使我拿着设备直走 20 米然后等待 10 分钟！

请问我是否遗漏了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T00:41:43.037

该`getLastKnownLocation()`方法返回获取的最后一个 GPS 位置。如果您不启动 GPS 位置获取以使其获取新位置，则此方法返回的值将始终是相同的旧值。

您将需要：

*   注册位置更新`lm.requestLocationUpdates()`
*   定义您`onLocationChange()`的侦听器以接收新位置
*   `android.permission.ACCESS_FINE_LOCATION`在`AndroidManifest.xml`文件中添加权限
*   在电话设置中启用 GPS 使用

问候

# java - JEE6 - CDI - 执行时的 DI

> ID：12877884
> 
> 赞同：1
> 
> 时间：2012-10-13T23:20:19.803
> 
> 标签：java, java-ee-6, cdi

我想知道 Jee6 在执行时是否支持依赖注入...

我可能涉及多个概念，所以我尝试描述我想要的架构

1.  一个包含接口的 jar

> 公共接口你好{公共字符串说（）；}

引用接口的战争（所以接口 Hello jar 被打包在 WEB-INF/lib 中）

```
@WebServlet("/HelloServlet")
public class HelloServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    @Inject @Any 
    Instance<Hello> hello;
    /**
     * @see HttpServlet#HttpServlet()
     */
    public HelloServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
          PrintWriter out = response.getWriter();
            out.println(hello.iterator().next().say());
    } 
```

好的，所以我可以解决任何问题

基本上我希望该接口有多个生产者

```
@Named
public class HelloImpl implements Hello {

    @Override
    public String say() {
        // TODO Auto-generated method stub
        return "TEST";
    }

} 
```

如此简单，但现在我不知道如何使这个可模块化（可以在运行时添加或删除实现）：

1.  如果我将实现放在一个war文件中，它会在另一个上下文中运行吗？

2.  如果我把它放在 jar 文件中，我需要把它放在第一次战争 WEB-INF 中才能使用它吗？我可以在执行过程中动态添加或删除 jar，我猜不是……或者是的，它对类加载器和卸载 jar 文件不太熟悉

最好的问题，如果所有这些都可以完成，是否有任何方法可以将*jar 上的 r* aise 事件添加*到 web-inf/lib 和/或删除？

可以说我还没有准备好去 OSGI，但我的问题可能会被该技术的某些功能所掩盖，如果可以的话，我只想留在 jee6..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T01:01:24.497

您可以查看 @Specializes 或 @Alternative 或简单地对您的生产者和类使用不同的限定符。然后，您需要通过使用 Instance 遍历它们来选择要使用的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T06:11:21.580

如果您使用 Glassfish 作为应用程序容器，您应该看看这个[https://blogs.oracle.com/arungupta/entry/totd_154_dynamic_osgi_services](https://blogs.oracle.com/arungupta/entry/totd_154_dynamic_osgi_services)

几年前我用过它，但我不再 100% 确定它是否也适用于

```
 @Inject
    @Any
    Instance<MyService> myServiceInstances; 
```

或者如果我必须做更多的 OSGI 魔法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T04:19:41.243

查看带有 的生产者`InjectionPoint`，例如`@Produces Hello obtainHelloImpl(InjectionPoint ip)`.

这篇文章可能会对[http://java.dzone.com/articles/cdi-di-p2](http://java.dzone.com/articles/cdi-di-p2)有很大帮助。

# mysql - 在表格中间插入一条新记录

> ID：12877885
> 
> 赞同：0
> 
> 时间：2012-10-13T23:20:20.707
> 
> 标签：mysql, insert

我想在表格中间插入一个新行。我正在使用 MySql。我怎样才能做到这一点？

我的表中有以下记录：

```
ZipCode  CityName 

60101,   Addison
60004,   Arlington Heights
60502,   Aurora
62223,   Belleville 
61008,   Belvidere
60105,   Bensenville
60402,   Berwyn
60108,   Bloomingdal
61701,   Bloomington 
```

我想插入一条新记录，但不是在表的末尾。

例如我想插入：

```
60103, Bartlett 
```

在第三条记录之后，因此最终表应如下所示：

```
60101,   Addison
60004,   Arlington Heights
60502,   Aurora
60103,   Bartlett
62223,   Belleville 
61008,   Belvidere
60105,   Bensenville
60402,   Berwyn
60108,   Bloomingdal
61701,   Bloomington. 
```

任何建议都会帮助我。先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T23:25:34.547

记录的顺序取决于 SELECT 语句中的 ORDER BY 子句。

如果您未指定 ORDER BY，则 RDBMS（MySQL、Oracle、...）可以选择它喜欢的任何顺序。

所以只要插入你的记录，如果你发出

```
SELECT * from MY_TABLE
ORDER BY CityName 
```

你会得到想要的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T23:26:17.027

你不需要`INSERT`在那个特定的点。您需要做的就是`INSERT`记录，然后用于`ORDER BY`对数据进行排序：

```
INSERT INTO yourtable (ZipCode, CityName)
VALUES (60103, 'Bartlett') 
```

然后

```
SELECT ZipCode, CityName
FROM yourtable
ORDER BY CityName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T23:30:03.247

实际上，您不能通过指定记录位置来插入表。但是您可以使用 order 和[其他 select 语句](http://en.wikipedia.org/wiki/Select_%28SQL%29)来显示您的数据。尝试：

```
INSERT INTO Yourtable (ZipCode,CityName) VALUES ('60103', 'Bartlett'); 
```

进而：

```
SELECT ZipCode,CityName FROM yourTable ORDER BY CityName ASC; 
```

# drupal - 如何通过 Drupal 8 中的模块修改节点的主体

> ID：12877888
> 
> 赞同：4
> 
> 时间：2012-10-13T23:20:41.440
> 
> 标签：drupal, drupal-8

我基于 highlight.js 库创建了一个模块来突出显示文章中的代码示例。该库要求将代码示例嵌入到 <pre><code> ... </code></pre> 标记中。我不想在写文章的时候添加 <pre> 标签，因为其他荧光笔库不需要它，我希望能够在不修改文章的情况下切换库。所以我需要用 <pre> 动态包装 <code> 标签。我试图实现 _node_view( 和 _node_view_alter( 没有成功的钩子。

我的代码看起来像

```
function highlight_node_view($node, $view_mode, $langcode) {
    $node->content['body']['und'][0]['safe_value'] = "test";
    $node->body['und'][0]['safe_value'] = "test";
    $node->content['body']['und'][0]['value'] = "test";
    $node->body['und'][0]['value'] = "test";
}

function highlight_node_view_alter($build, $node) {
    $build["body"]["#items"]["0"]["value"] = "TEST";
    $build["body"]["#items"]["0"]["safe_value"] = "TEST";
    $build["body"]["#formater"]["0"]["#markup"] = "TEST";
} 
```

如果我打印模板中的内容

```
<pre>
    <?php    
        ob_start("minimal_htmlspecialchars_callback");
        print_r($content); 
        ob_end_flush();
    ?>
</pre> 
```

我可以确认所有值都正确替换为“测试”，但调用

```
<?php print render($content['body']); ?> 
```

仍然呈现原始内容而不是“测试”

从模块更改文章内容的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-02-28T15:10:25.423

我已经成功更改了正文字段数据，您必须将代码放在模块文件中，如下所示。顺便说一句，我正在使用 drupal 8.2

```
use Drupal\Core\Entity\EntityInterface;
use Drupal\Core\Entity\Display\EntityViewDisplayInterface;
/**
* Implements hook_ENTITY_TYPE_view() for node entities.
*/

function module_name_node_view(array &$build, EntityInterface $node, EntityViewDisplayInterface $display, $view_mode) {
   $build['body'][0]['#text'] = 'test by ajay'; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T22:06:26.853

我终于在之前的stackoverflow问题中找到了解决方案（[修改drupal中的节点在查看时](https://stackoverflow.com/questions/11120739/modify-how-a-node-in-drupal-will-look-when-viewed)的外观）并且以下代码工作正常。

```
function highlight_node_view($node, $view_mode, $langcode) {
    $alteredBody = $node->body['und'][0]['safe_value'];
    $alteredBody = str_replace("<code>", "<pre><code>", $alteredBody);
    $alteredBody = str_replace("</code>", "</code></pre>", $alteredBody);

    $node->content['body'] = array(
        '#markup' => $node->body['und'][0]['safe_value'] = $alteredBody
    );
} 
```

但我仍然不确定是否完全理解渲染系统。因此，如果有人有更好的解决方案或更详细的解释，我将不胜感激。

# haskell - 在运行时选择一个 monad

> ID：12877892
> 
> 赞同：11
> 
> 时间：2012-10-13T23:21:06.647
> 
> 标签：haskell, functional-programming, monads

我正在尝试用 Haskell 编写一个两人游戏，例如跳棋。我设想有 types `GameState`、`Move`和一个`result :: GameState -> Move -> GameState`定义游戏规则的函数。我想拥有人类和自动玩家，我想我会通过一个类型类来做到这一点：

```
class Player p m | p -> m where
  selectMove :: p -> GameState -> m Move 
```

其中的想法是 m 可以是基本 AI 玩家的身份，人类的 IO，保持跨动作状态的 AI 的状态等。问题是如何从这些到整个游戏循环。我想我可以定义如下：

```
Player p1 m1, Player p2 m2 => moveList :: p1 -> p2 -> GameState -> m1 m2 [Move] 
```

一个接受玩家和初始状态的单子函数，并返回惰性移动列表。但除此之外，假设我想要一个基于文本的界面，例如，允许首先从可能性列表中选择每个玩家，然后开始玩游戏。所以我需要：

```
playGame :: IO () 
```

我看不到如何以通用方式定义给定 moveList 的 playGame 。还是我的整体方法不对？

编辑：进一步考虑，我什至看不到如何在上面定义 moveList。例如，如果玩家 1 是人类，所以是 IO，玩家 2 是有状态的 AI，所以 State，玩家 1 的第一步将是 type `IO Move`。那么玩家 2 将不得不采用 type 的结果状态`IO GameState`并产生 type 的移动`State IO Move`，而玩家 1 的下一步将是 type `IO State IO Move`？那看起来不对。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-14T03:03:07.543

这个问题有两个部分：

*   如何将独立于 monad 的国际象棋框架与增量的特定于 monad 的输入混合在一起
*   如何在运行时指定特定于 monad 的部分

您使用生成器解决了前一个问题，这是一个免费的单子变压器的特例：

```
import Control.Monad.Trans.Free -- from the "free" package

type GeneratorT a m r = FreeT ((,) a) m r
-- or: type Generator a = FreeT ((,) a)

yield :: (Monad m) => a -> GeneratorT a m ()
yield a = liftF (a, ()) 
```

`GeneratorT a`是一个单子变压器（因为`FreeT f`是一个单子变压器，免费的，什么时候`f`是 a `Functor`）。这意味着我们可以混合`yield`（在基本 monad 中是多态的），通过使用`lift`来调用基本 monad 与特定于 monad 的调用。

我将为这个例子定义一些虚假的国际象棋动作：

```
data ChessMove = EnPassant | Check | CheckMate deriving (Read, Show) 
```

现在，我将定义一个`IO`基于国际象棋移动的生成器：

```
import Control.Monad
import Control.Monad.Trans.Class

ioPlayer :: GeneratorT ChessMove IO r
ioPlayer = forever $ do
    lift $ putStrLn "Enter a move:"
    move <- lift readLn
    yield move 
```

那很简单！我们可以使用 一次一个动作解开结果`runFreeT`，这将只要求玩家在绑定结果时输入一个动作：

```
runIOPlayer :: GeneratorT ChessMove IO r -> IO r
runIOPlayer p = do
    x <- runFreeT p -- This is when it requests input from the player
    case x of
        Pure r -> return r
        Free (move, p') -> do
            putStrLn "Player entered:"
            print move
            runIOPlayer p' 
```

让我们测试一下：

```
>>> runIOPlayer ioPlayer
Enter a move:
EnPassant
Player entered:
EnPassant
Enter a move:
Check
Player entered:
Check
... 
```

我们可以使用`Identity`monad 作为基础 monad 来做同样的事情：

```
import Data.Functor.Identity

type Free f r = FreeT f Identity r

runFree :: (Functor f) => Free f r -> FreeF f r (Free f r)
runFree = runIdentity . runFreeT 
```

注意`transformers-free`包已经定义了这些（免责声明：我编写了它，Edward 合并了它的功能被合并到`free`包中。我只保留它用于教学目的，如果可能的话你应该使用`free`）。

有了这些，我们可以定义纯国际象棋移动生成器：

```
type Generator a r = Free ((,) a) r
-- or type Generator a = Free ((,) a)

purePlayer :: Generator ChessMove ()
purePlayer = do
    yield Check
    yield CheckMate

purePlayerToList :: Generator ChessMove r -> [ChessMove]
purePlayerToList p = case (runFree p) of
    Pure _ -> []
    Free (move, p') -> move:purePlayerToList p'

purePlayerToIO :: Generator ChessMove r -> IO r
purePlayerToIO p = case (runFree p) of
    Pure r -> return r
    Free (move, p') -> do
        putStrLn "Player entered: "
        print move
        purePlayerToIO p' 
```

让我们测试一下：

```
>>> purePlayerToList purePlayer
[Check, CheckMate] 
```

现在，回答您的下一个问题，即如何在运行时选择基本单子。这很简单：

```
main = do
    putStrLn "Pick a monad!"
    whichMonad <- getLine
    case whichMonad of
        "IO"     -> runIOPlayer ioPlayer
        "Pure"   -> purePlayerToIO purePlayer
        "Purer!" -> print $ purePlayerToList purePlayer 
```

现在，事情变得棘手了。你实际上想要两个玩家，并且你想独立地为他们指定基本单子。为此，您需要一种方法从每个玩家那里检索一个动作作为`IO`monad 中的一个动作，并保存玩家动作列表的其余部分以供以后使用：

```
step
 :: GeneratorT ChessMove m r
 -> IO (Either r (ChessMove, GeneratorT ChessMove m r)) 
```

这`Either r`部分是为了防止玩家用尽所有动作（即到达他们的单子的末尾），在这种情况下，这`r`是块的返回值。

这个函数是特定于每个 monad`m`的，所以我们可以输入 class 它：

```
class Step m where
    step :: GeneratorT ChessMove m r
         -> IO (Either r (ChessMove, GeneratorT ChessMove m r)) 
```

让我们定义一些实例：

```
instance Step IO where
    step p = do
        x <- runFreeT p
        case x of
            Pure r -> return $ Left r
            Free (move, p') -> return $ Right (move, p')

instance Step Identity where
    step p = case (runFree p) of
        Pure r -> return $ Left r
        Free (move, p') -> return $ Right (move, p') 
```

现在，我们可以编写我们的游戏循环，如下所示：

```
gameLoop
 :: (Step m1, Step m2)
 => GeneratorT ChessMove m1 a
 -> GeneratorT ChessMove m2 b
 -> IO ()
gameLoop p1 p2 = do
    e1 <- step p1
    e2 <- step p2
    case (e1, e2) of
        (Left r1, _) -> <handle running out of moves>
        (_, Left r2) -> <handle running out of moves>
        (Right (move1, p2'), Right (move2, p2')) -> do
            <do something with move1 and move2>
            gameLoop p1' p2' 
```

我们的`main`函数只是选择要使用的玩家：

```
main = do
    p1 <- getStrLn
    p2 <- getStrLn
    case (p1, p2) of
        ("IO", "Pure") -> gameLoop ioPlayer purePlayer
        ("IO", "IO"  ) -> gameLoop ioPlayer ioPlayer
        ... 
```

我希望这会有所帮助。这可能有点过头了（你可能可以使用比生成器更简单的东西），但我想对很酷的 Haskell 习语进行总体介绍，你可以在设计游戏时从中取样。我对除了最后几个代码块之外的所有代码块进行了类型检查，因为我无法提出合理的游戏逻辑来进行动态测试。

如果这些示例还不够，您可以了解有关[免费 monad](http://www.haskellforall.com/2012/06/you-could-have-invented-free-monads.html)和[免费 monad 转换器的更多信息。](http://www.haskellforall.com/2012/07/free-monad-transformers.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T00:19:13.723

我的建议有两个主要部分：

1.  跳过定义新类型类。
2.  对现有类型类定义的接口进行编程。

对于第一部分，我的意思是你应该考虑创建一个数据类型，比如

```
data Player m = Player { selectMove :: m Move }
-- or even
type Player m = m Move 
```

第二部分的意思是使用类似的类`MonadIO`并`MonadState`保持你的`Player`值是多态的，并且只有在组合所有玩家之后才在最后选择一个合适的 monad 实例。例如，您可能有

```
computerPlayer :: MonadReader GameState m => Player m
randomPlayer :: MonadRandom m => Player m
humanPlayer :: (MonadIO m, MonadReader GameState m) => Player m 
```

也许你会发现还有其他你想要的球员。无论如何，重点是一旦你创建了所有这些播放器，如果它们是上面的类型类多态，你可以选择一个特定的 monad 来实现所有必需的类，然后你就完成了。例如，对于这三个，您可以选择`ReaderT GameState IO`.

祝你好运！

# javascript - JavaScript - 0 - 580 之间 20 的随机倍数

> ID：12877895
> 
> 赞同：-2
> 
> 时间：2012-10-13T23:21:29.810
> 
> 标签：javascript, random

在 Javascript 中，如何在 0 - 580 之间创建一个随机偶数乘以 20？

例如：220、360、180、0（最小）、400、200、580（最大）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T23:23:50.273

您需要 20 的增量，因此您真正需要的是 0 到 29 范围内的整数，然后乘以 20。示例：

```
var max = (580/20) + 1;
var result = 20 * (Math.floor(Math.random())*max) 
```

我们在 上加一`max`，因为 Math.random() 是（包括 0）和（不包括 1）之间的均匀分布数，所以由于我们使用 Math.floor，所以最大值必须大 1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T23:34:07.733

这种方式创建一个随机数，然后将其向下舍入到最接近的倍数：

当你需要***0 <= randomMultiple <= max***

```
var random = Math.random() * (580 + 20);
randomMultiple = random - (random % 20); 
```

当你需要***0 <= randomMultiple < max***

```
var random = Math.random() * 580;
randomMultiple = random - (random % 20); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T23:39:17.237

尝试使用这个：

```
var result = parseInt(Math.random()*30)*20; 
```

29*20 = 580

Math.random() 返回 [0..1)

结果在 0..580 之间，步长 20

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T23:27:37.313

使用这样的原理： [在 JavaScript 中生成两个数字之间的随机数](https://stackoverflow.com/questions/4959975/random-between-two-numbers-in-javascript)

请记住，如果您希望最大结果为 580，那么您想要乘以 20 的最大整数将为 29（或 580/20）。然后只需添加一些逻辑以确保整数是偶数。

达达！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-26T04:38:26.453

这是一个通用的 javascript one-liner，可用于任何范围和任何倍数。

本质上，我们在这里要做的是找出一个范围，从 0 到*N*，当乘以我们给定的*倍数*时，它会保持在 [0, *max-min* ] 范围内。

在这种情况下， *N*就是*(max - min)/multiple*或*range/multiple*。

一旦我们有了*N*，我们就可以使用 Math.random() 来获得一个介于 0- *N*之间的随机数，并将其与倍数相乘。接下来，我们只需添加*min*。

我们假设*min*和*max*已经是 multiple 的倍数。

注意 Math.random() 输入的额外 +1 是因为 Math.random() 返回一个介于 0（包括）和 1（**不**包括）之间的数字。因此，Math.random() 永远不会返回 1。如果我们不考虑这一点，我们将永远无法在结果中包含最大数。

```
/*
 * Returns a random number within range [min,max]
 *
 * min and max must be multiples of multiple
 * (note that 0 is a multiple of all integers)
 */
function randomMultiple (min, max, multiple) {
    return Math.floor(Math.random() * (((max - min)/multiple)+1)) * multiple + min;
}

console.log(randomMultiple(0, 580, 20));
```

# c++ - 数字序列的 MD5 散列

> ID：12877899
> 
> 赞同：0
> 
> 时间：2012-10-13T23:23:04.633
> 
> 标签：c++, c, md5

我需要实现一个哈希函数，该函数产生一个 32 位（足够唯一）值，以便在发送消息时用作消息标识符。我维护一个序列号，并与其他一些变量一起不断增加它，并将它们相加，并希望得到总数的哈希值（我计划为此使用 MD5，然后选择输出的前 32 位）。但是我看到Linux中的MD5函数只接受字符串输入，

```
MD5((unsigned char*)data, strlen(data), result); 
```

我曾想过冲刺'total'然后计算哈希，但想知道是否有一些函数可以直接计算'total'的数值的MD5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T23:34:52.510

`unsigned char *`不暗示一个字符串，或一个以空字符结尾的字符串。至少在这种情况下不是。它只是一个指向 N 个 8 位字的指针，没有任何值限制。因此，您不必`snprintf`为了将数据转换为 ASCII 字符串而拥有任何类似的东西。如果有帮助，[这里](http://www.netlib.org/crc/md5sum.c)是`md5sum`工具的来源。

# c# - 如何在 C# 中从字符串中读取和使用公式？

> ID：12877903
> 
> 赞同：-5
> 
> 时间：2012-10-13T23:23:35.277
> 
> 标签：c#, string

> **可能重复：**
> [动态计算字符串表达式的结果](https://stackoverflow.com/questions/12431286/calculate-result-from-a-string-expression-dynamically)

我将以下公式保存在 XML 中作为元素值-“d1 * 2”。
在我从 XML 中将其提取为字符串后，如何为“d1”赋值
并计算公式结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:35:35.937

这看起来正是您正在寻找的：

[https://github.com/Giorgi/Math-Expression-Evaluator](https://github.com/Giorgi/Math-Expression-Evaluator)

作者对这里的用法和设计做了非常好的和彻底的记录：

[http://www.aboutmycode.com/net-framework/building-expression-evaluator-with-expression-trees-in-csharp-table-of-contents/](http://www.aboutmycode.com/net-framework/building-expression-evaluator-with-expression-trees-in-csharp-table-of-contents/)

用法如下（从示例中复制）：

```
var a = 6;
var b = 4.32m;
var c = 24.15m;
var result = engine.Evaluate("(((9-a/2)*2-b)/2-a-1)/(2+c/(2+4))", new { a, b, c}); 
```

当然，谷歌是你的朋友……还有很多其他的，但到目前为止，这看起来是最成熟的项目。

编辑：这个其他 SO 答案也提到了 NCalc，这是类似的：[https ://stackoverflow.com/a/10063089/381587](https://stackoverflow.com/a/10063089/381587)

# javascript - 如何将几段代码合并为一个？(JavaScript)

> ID：12877905
> 
> 赞同：1
> 
> 时间：2012-10-13T23:23:51.373
> 
> 标签：javascript, google-apps-script

我的代码有点问题：我有 3 段代码，但我无法将它们组合在一起。

当某些单元格发生变化时，所有三个代码都将时间戳放在不同的单元格中。如果我更改单元格 A1，则在单元格 B1 中插入时间戳。如果单元格 A2 发生变化，则在单元格 B2 中插入时间戳等。

你能帮助我吗？谢谢。

```
1)

function onEdit(event) {

  var tsheet = 'Заявки' ; 

  var lcol = 17; 
  var rcol = 17; 
  var tcol = 18;

  var s = event.source.getActiveSheet();
  var sname = s.getName();
  if (sname == tsheet) {
    var r = event.source.getActiveRange();
    var scol = r.getColumn();
    if (scol >= lcol && scol <= rcol) {
      s.getRange(r.getRow(), tcol).setValue(new Date());
    }
  }

}

2)

function onEdit(event) {

  var tsheet = 'Заявки' ; 

  var lcol = 15; 
  var rcol = 15; 
  var tcol = 16;

  var s = event.source.getActiveSheet();
  var sname = s.getName();
  if (sname == tsheet) {
    var r = event.source.getActiveRange();
    var scol = r.getColumn();
    if (scol >= lcol && scol <= rcol) {
      s.getRange(r.getRow(), tcol).setValue(new Date());
    }
  }

}

3) 

function onEdit(event) {

  var tsheet = 'Заявки' ;

  var lcol = 9; 
  var rcol = 9; 
  var tcol = 8;

  var s = event.source.getActiveSheet();
  var sname = s.getName();
  if (sname == tsheet) {
    var r = event.source.getActiveRange();
    var scol = r.getColumn();
    if (scol >= lcol && scol <= rcol) {
      s.getRange(r.getRow(), tcol).setValue(new Date());
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:49:09.663

将列规范放入数组中：

```
function onEdit(event) {

  var tsheet = 'Заявки' ;
  var colspec=[[17,17,18],[15,15,16],[9,9,8]];

  var s = event.source.getActiveSheet();
  var sname = s.getName();
  if (sname == tsheet) {
    var r = event.source.getActiveRange();
    var scol = r.getColumn();
    var i=colspec.length;
    while (i>0) {
      i--;
      if (scol >= colspec[i][0] && scol <= colspec[i][1]) {
        s.getRange(r.getRow(), colspec[i][2]).setValue(new Date());
      }
    }
  }
} 
```

# c++ - 非易失性变量

> ID：12877907
> 
> 赞同：2
> 
> 时间：2012-10-13T23:24:19.010
> 
> 标签：c++, c, volatile, non-volatile

如果我将变量标记为易失性，我会在代码中的每次访问中获得保证读取。

但是非易失变量呢？

是否保证每个函数/块至少读取一次，或者是否可以跨函数边界优化值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T23:25:53.197

为什么函数边界很重要，如果内联（即使是无缘无故的，即 no `inline`）无论如何都可以根除它们？

IOW：是的，在 as-if 规则下几乎任何事情都是可能的：只要程序表现得好像编译器没有优化任何东西，就可以对其做任何事情。（而且该标准的边界也很模糊。例如，消除副本是允许编译器的核心内容，而缺少的副作用是该死的。）

# java - 我的 XStream 反序列化需要正确的对象声明

> ID：12877912
> 
> 赞同：0
> 
> 时间：2012-10-13T23:24:35.217
> 
> 标签：java, xml, object, xstream

我的 XML：

```
<autocomplete>
  <url_template>http://api-public.netflix.com/catalog/titles/autocomplete?{-join|&amp;|term}</url_template>
  <autocomplete_item>
    <title short="Star Wars: Episode V: The Empire Strikes Back: Original Theatrical Version"></title>
  </autocomplete_item>
</autocomplete> 
```

我的对象：

```
public class AutoCompleteList
{
public String url_template;
public List<AutocompleteItem> autocomplete_item;
}

public class AutocompleteItem
{
public Title title;
}

public class Title
{
@XStreamAlias("short")
public String Short;
} 
```

我的代码：

```
XStream xstream = new XStream();
xstream.alias("autocomplete", AutoCompleteList.class);
xstream.alias("title", Title.class);
AutoCompleteList myObj = (AutoCompleteList)xstream.fromXML(stringFromStream); 
```

我无法从 XML 中检索“title short”值。

此外，如果我的 XML 有一组以上的 autocomplete_item 标记，xstream 会报错并抱怨 autocomplete_item 的实例重复。

有什么建议么？

我已经在这里搜索了许多问题，但似乎没有什么对我有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:37:25.460

对于`short`属性，请尝试添加`@XStreamAsAttribute`注释：

```
public class Title
{
  @XStreamAlias("short")
  @XStreamAsAttribute
  public String Short;
} 
```

打电话`xstream.processAnnotations(Title.class)`之前先打电话`fromXML`。

对于`autocomplete_item`您应该使用的多个问题`@XStreamImplicit`

```
public class AutoCompleteList
{
  public String url_template;

  @XStreamImplicit(itemFieldName="autocomplete_item")
  public List<AutocompleteItem> autocomplete_item;
} 
```

`xstream.processAnnotations(AutoCompleteList.class)`在调用`fromXML`.

# css - 如何重新对齐 a 中的文本？

> ID：12877913
> 
> 赞同：0
> 
> 时间：2012-10-13T23:24:48.307
> 
> 标签：css, html

我有一个图像，然后是水平文本，然后是图像，然后是文本。我希望文本更高，但`margin-top`不适用于跨度。

这是我的代码（忽略 {} 括号中的位，这些是用于 tumblr 自定义主题的东西）：

```
<div class="activities">
    <span class="activity"><img src="{image:First Activity Image}"/>
        <span class="activityname">{text:First Activity Name}</span>
    </span>
    <span class="activity"><img src="{image:Second Activity Image}"/>
        <span class="activityname">{text:Second Activity Name}<span>
    </span>
</div> 
```

我会将其全部更改为，但这会使每个都出现在新行上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:30:21.423

哇那里。你的 CSS 应该遵循 HTML，而不是相反。首先在语义上标记它。看起来你有一个列表，所以让我们使用一个`ul`：

```
<ul class="activities">
    <li>
        <img src="...">
        <p>...</p>
    </li>
    ...
</ul> 
```

然后您可以将列表项浮动到左侧：

```
.activities {
    /* makes sure the container expands to fit the floated material */
    overflow: hidden;
}
.activities > li {
    float: left;
    width: 300px;  /* or something; you might want to change this number */
} 
```

您还可以将图像浮动到左侧：

```
.activities > li {
    overflow: hidden;  /* again, expand the container */
}
.activities > li > img {
    float: left;
} 
```

然后您可以将文本对齐到中心：

```
.activities > li > p {
    text-align: center;
} 
```

**[试试看。](http://jsfiddle.net/ZZbkQ/embedded/result,html,css/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:40:36.400

的使用`ul li`是更好的选择。您可以根据需要轻松放置内容。

请给`float:left`所有内部内容，之后您可以轻松地使用这些`margin`值。

# c# - 为什么我的程序总是以零响应？

> ID：12877918
> 
> 赞同：1
> 
> 时间：2012-10-13T23:25:08.440
> 
> 标签：c#, casting, floating-point

我对编程和测试一些我知道的东西非常陌生，我认为我会尝试制作一个程序。但无论输入如何，它都会以 0 响应。如果它很乱，我很抱歉，但在我的理解框架内，你能给出一个解决办法吗？

感谢您提供的任何帮助。

## 代码

```
class Program
{
    static void Main( string[] args ) {

        // Probability of Hitting

        Console.WriteLine( "Welcome to the Ranged Death Calculator, please enter the Ballistic Skill (BS) " + Environment.NewLine + "of the model firing." );
        float BallisticSkillf = Convert.ToSingle( Console.ReadLine() );
        float WSProbabilityf;
        if( BallisticSkillf <= 5 ) {
            WSProbabilityf = Convert.ToSingle( ( BallisticSkillf / 6 ) );
        }

        else {
            WSProbabilityf = Convert.ToSingle( ( ( 5 / 6 ) ) + ( 1 / 6 * ( ( BallisticSkillf - 6 ) / 6 ) ) );
        }

        // Probability of Wounding

        Console.WriteLine( "Please enter the toughness of your target" );
        float TargetToughnessf = Convert.ToSingle( Console.ReadLine() );

        Console.WriteLine( "Please enter the strength of the Weapon firing" );
        float WeaponStrengthf = Convert.ToSingle( Console.ReadLine() );

        float WoundProbabilityf = 0;

        if( WeaponStrengthf - TargetToughnessf >= 2 )
            WoundProbabilityf = ( (float)( 5 / 6 ) );

        else if( WeaponStrengthf - TargetToughnessf == 1 )
            WoundProbabilityf = ( (float)( 4 / 6 ) );

        else if( WeaponStrengthf - TargetToughnessf == 0 )
            WoundProbabilityf = ( (float)( 3 / 6 ) );

        else if( WeaponStrengthf - TargetToughnessf == -1 )
            WoundProbabilityf = ( (float)( 2 / 6 ) );

        else if( WeaponStrengthf - TargetToughnessf <= -2 )
            WoundProbabilityf = ( (float)( 1 / 6 ) );

        //Probability of failing saving throw

        Console.WriteLine( "Please enter the relevant armour save of the target, (So, 2, would be for 2+, , 3+ etc.) (Also, take into consideration the AP Value of the weapon fired)" );
        float nTargetRelevantSave = Convert.ToSingle( Console.ReadLine() );
        float TRProbabilityf = ( (float)( ( nTargetRelevantSave - 1 ) / 6 ) );

        // Number of shots fired

        Console.WriteLine( "Finally, please enter the number of shots fired with the weapon" );
        float nShotsFromWeapon = Convert.ToSingle( Console.ReadLine() );

        // All previous values to determine likely number of wounds inflicted
        float nWoundsInflictedf = ( (float)WSProbabilityf * (float)WoundProbabilityf * (float)TRProbabilityf * (float)nShotsFromWeapon );
        Console.WriteLine( "The number of wounds you are likely to inflict is " + (float)nWoundsInflictedf );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T23:28:30.287

您的计算是整数，然后您将值转换为浮点数。您应该使用浮点数进行计算。

```
WoundProbabilityf = 5F / 6F; 
```

除此之外，您正在对浮点数和 int 上的相等进行计算：

```
WeaponStrengthf - TargetToughnessf == 1 
```

当您在右侧使用浮点数时，右侧的 int 变化会非常小。您可以更好地使用范围：

```
float fHitForce = WeaponStrengthf - TargetToughnessf;
fHitForce >= 1 && fHitForce < 2 
```

[浮动 MSDN](http://msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:31:49.593

尝试

```
WoundProbabilityf = ( (float)( 5 / 6.0 ) ); 
```

如果分子和分母都是整数，则结果为整数。其中之一必须是浮动的。在变量的情况下，你可以做

```
WoundProbabilityf =  (float)( 5 / (n * 1.0) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T23:28:10.330

```
(float)(2 / 6) 
```

这将转换为浮动两个整数除法 2/6 = 0 的结果

工作尝试

```
 (float)2 / 6 
```

# c - 了解我的结构的大小

> ID：12877920
> 
> 赞同：3
> 
> 时间：2012-10-13T23:25:48.617
> 
> 标签：c, struct, sizeof

我的代码：

```
typedef struct {
    int sizeOfMyIntArray;
    int* myIntArray;
    float someFloat;
} my_struct_foo;

int main() {
    printf("The size of float is: %d\n", sizeof(float));
    printf("The size of int is: %d\n", sizeof(int));
    printf("The size of int* is: %d\n", sizeof(int*));
    printf("The size of my_struct_foo is: %d\n", sizeof(my_struct_foo));
    return 0;
} 
```

我想这很简单。虽然，我对这个程序的输出结果有点惊讶......

```
The size of float is: 4
The size of int is: 4
The size of int* is: 8
The size of my_struct_foo is: 24 
```

我有一个浮点数、一个整数和一个指向整数的指针。在我的脑海中，我在想：4 + 4 + 8 = 16...不是 24。为什么我的结构的大小是 24 而不是 16？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T23:27:47.710

对齐和填充。应该在`int*`8 字节边界上对齐，因此编译器`int`在`float`对齐。

如果您重新排序成员，

```
typedef struct {
    int sizeOfMyIntArray;
    float someFloat;
    int* myIntArray;
} my_struct_foo; 
```

指针将在没有任何填充的情况下正确对齐，因此结构的大小（很可能，即使不需要，编译器也可以添加填充，但我不知道这样做）为 16。

# python - 从 Python 列表中过滤重复项

> ID：12877923
> 
> 赞同：1
> 
> 时间：2012-10-13T23:25:58.920
> 
> 标签：python, filter

我遇到了一个问题，我必须从这样的列表中过滤掉骗子

```
a = [1,1,4,5,6,5] 
```

这是我的代码：

```
def unique(a):
    uni = []
    for value in a:
        if value[0] not in found:
            yield value
            found.add(value[0])
            print list(unique(a)) 
```

但是，当我定义列表、`a`和 try`unique(a)`时，我得到以下输出：

```
<generator object unique at 0x0000000002891750> 
```

有人可以告诉我我做错了什么吗？为什么我拿不到名单？

编辑，新问题..我能够让它打印出过滤后的列表，但我失去了列表的顺序。我怎样才能防止这种情况？

```
def unique(a):
        s = set()
        for i in a:
            if i not in s:
                s.add(i)
        return s 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T23:30:59.943

您必须跟踪已看到的所有元素。最好的方法是使用[`set`](http://docs.python.org/tutorial/datastructures.html#sets)它的查找复杂度为`O(1)`.

```
>>> def unique(it):
        s = set()
        for el in it:
            if el not in s:
                s.add(el)
                yield el

>>> list(unique(a))
[1, 4, 5, 6] 
```

如果您不需要保持元素的顺序，您可以使用`set`构造函数，然后将其转换回列表。这将删除所有重复项，但会破坏元素的顺序：

```
list(set(a)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T23:36:53.633

首先，要删除重复项，请使用一组：

```
>>> a = [1, 1, 4, 5, 6, 5]
>>> set(a)
{1, 4, 5, 6}
>>> list(set(a)) # if you really _need_ a list, you can convert it back
[1, 4, 5, 6] 
```

其次，你得到的输出`generator object unique at 0x...`，意味着你有一个生成器对象，而不是一个简单的列表作为它的返回值。这是你`yield`在函数中使用后应该期待的。`yield`如果您请求它们（或迭代它），将使任何函数成为生成器，并且只会给您所有结果。如果您只想获得完整的结果，您可以调用`list()`该对象以从生成器对象创建一个列表：`list(unique(a))`.

但是，你会注意到你的函数给你的错误：`TypeError: 'int' object is not subscriptable`. 原因是`value[0]`你使用的。`value`是列表中的一个元素（您遍历列表），因此是一个整数。您无法从整数中获取第一个元素，因此您可能意味着就`value`在那里。

接下来，`found`尽管您将列表定义为`uni`第一个，但您仍要向其中添加元素，因此您应该确定其中的一个名称。此外，方法是`append`，不是`add`。

最后，你真的不应该在函数内部多次递归调用具有相同参数的方法，因为这只会填满堆栈而没有任何用处，所以删除它的打印。

然后，你最终得到了这个，它工作得很好：

```
>>> def unique(a):
        found = [] # better: use a set() here
        for value in a:
            if value not in found:
                yield value
                found.append(value)
>>> list(unique(a))
[1, 4, 5, 6] 
```

但是，这仍然不是一个很好的解决方案，您应该直接使用`set`它，因为它还会为您提供更多方法来处理该集合一旦创建（例如快速检查包含性）。

> 我也需要通过输入得到答案`unique(a)`

在这种情况下，只需`yield value`从你的函数中删除，并`found`在它的末尾返回列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T00:31:55.980

这是一个众所周知的经典：

```
>>> def unique(xs):
...     seen = set()
...     seen_add = seen.add
...     return [x for x in xs if x not in seen and not seen_add(x)]
...
>>> unique([1, 2, 3, 3, 4, 1, 3, 5, 5, 4, 6])
[1, 2, 3, 4, 5, 6] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T23:27:25.590

通常的方法是`list(set(a)`

```
def unique(a):
  return list(set(a)) 
```

现在，来回答你的问题。`yield`返回一个生成器，您必须对其进行迭代而不是打印。所以如果你有一个函数，其中有一个`yield`，像这样迭代`for return_value from function_that_yields():`

你的问题还有更多问题。您尚未定义`found`，然后您索引可能不是容器的值。

# nginx - 如何在不使用 if 的情况下做到这一点？

> ID：12877926
> 
> 赞同：2
> 
> 时间：2012-10-13T23:26:25.290
> 
> 标签：nginx

我有一个列入黑名单的 URL 列表，我想检查它们是否是特定请求的 http_referer。如果他们是我正在尝试设置一个cookie。我试过用下面的代码来做：

```
 set $blackListUrls "www.somesite.com,www.anothersite.com,www.yetanother.com";
    location / {
            if($blackListUrls ~* $http_referer){...}

    } 
```

但是在[阅读更多](http://wiki.nginx.org/IfIsEvil)关于`if`nginx 中的声明时，听起来我不应该使用它。`if`我怎样才能在不使用语句的情况下做我上面所说的事情？

另外 - 我没有使用 nginx 的经验，所以如果你看到不同的方式，我应该检查一下，随时指出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:19:18.623

如果你想添加一个基于 的 cookie `Referer`，这样的东西应该可以工作：

```
map $http_referer $setcookie {
    default                "";
    http://some.exact.url  "cookiename=cookievalue";
    ~*example\.com         "cookiename=cookievalue";
    ...
}

server {
    ...
    location / {
        add_header Set-Cookie $setcookie;
        ...
    }
} 
```

它将 $http_referer 变量（即`Referer`header）映射到 $setcookie 变量中，默认为空（如果映射中列出了 referer，则不为空）。该`add_header`指令用于添加`Set-Cookie`带有 $setcookie 值的标题。如果 $addcookie 计算结果为空字符串，则不会添加标头。

在`map`您可以使用精确的字符串或正则表达式（带有“~”或“~*”前缀）。

有关文档，请参见此处：

*   [http://nginx.org/en/docs/http/ngx_http_map_module.html](http://nginx.org/en/docs/http/ngx_http_map_module.html)
*   [http://nginx.org/en/docs/http/ngx_http_headers_module.html#add_header](http://nginx.org/en/docs/http/ngx_http_headers_module.html#add_header)

您可能还想看一下 nginx [referer 模块](http://nginx.org/en/docs/http/ngx_http_referer_module.html)。它旨在将推荐人列入白名单，而不是列入黑名单，并且`map`对于黑名单而言，使用方法会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T09:43:12.860

如果你仔细阅读[http://wiki.nginx.org/IfIsEvil](http://wiki.nginx.org/IfIsEvil)你会注意到：

1.  如果直接在服务器块中就可以了
2.  另一方面，如果在 location 块中，**除非**它们仅包含 return 或 rewrite 指令，否则它们是未保存的

所以跟随实际上将是完美的保存：

```
server {
  location / {
    set blackListUrls "www.somesite.com,www.anothersite.com,www.yetanother.com";
    if($blackListUrls ~* $http_referer){return 403;}
  } 
} 
```

换句话说，您不需要摆脱所有 ifs

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:21:44.477

请注意：`nginx`有[推荐人模块](http://nginx.org/en/docs/http/ngx_http_referer_module.html)。

# python - Python TCP 服务器 JSON 错误请求语法

> ID：12877927
> 
> 赞同：0
> 
> 时间：2012-10-13T23:26:25.073
> 
> 标签：python, python-2.7, client, json-rpc, tcpserver

我在 Python-2.7 中创建的 TCP JSON-RPC 服务器有一个奇怪的问题。我使用以下代码构建服务器：

```
https://github.com/joshmarshall/jsonrpclib 
```

我正在从同一本地网络中将客户端与服务器通信。在控制台窗口中，我可以从 Python 中连接到服务器并针对服务器运行命令。一切都很好。

但是，当我尝试从移动应用程序（在本例中为 iPad）发送 JSON 字符串时，服务器上出现错误。我还下载了此工具以尝试发送 JSON 字符串：[http](http://www.simplecomtools.com/productcart/pc/downloads/tcptesttool.zip) ://www.simplecomtools.com/productcart/pc/downloads/tcptesttool.zip但具有相同的错误结果。服务器正在报告“错误的请求语法”错误。我尝试了几个不同的字符串 - 显示的错误是：

192.168.1.107 - - [13/Oct/2012 09:48:17] 代码 400，消息错误请求语法（“{'jsonrpc':'2.0','method':'add','params':[3, 6],'id':'8'}") 192.168.1.107 - - [13/Oct/2012 09:48:17] "{'jsonrpc':'2.0','method':'add','params ':[3,6],'id':'8'}" 400 -

192.168.1.107 - - [13/Oct/2012 09:49:44] 代码 400，消息错误请求语法 ('{"jsonrpc":"2.0","method":"add","params":[3, 6],"id":"8"}') 192.168.1.107 - - [13/Oct/2012 09:49:44] "{"jsonrpc":"2.0","method":"add","params ":[3,6],"id":"8"}" 400 -

192.168.1.107 - - [13/Oct/2012 09:50:49] 代码 400，消息错误请求语法 ('{"jsonrpc":"2.0","method":"add","params":{"x ":3,"y":6},"id":"8"}') 192.168.1.107 - - [13/Oct/2012 09:50:49] "{"jsonrpc":"2.0","method ":"add","params":{"x":3,"y":6},"id":"8"}" 400 -

192.168.1.107 - - [13/Oct/2012 17:11:59] 代码 400，消息错误请求语法（“{'jsonrpc':'2.0','method':'add','params':{'x ':3,'y':6}, 'id':8}") 192.168.1.107 - - [13/Oct/2012 17:11:59] "{'jsonrpc':'2.0', '方法': 'add', 'params':{'x':3,'y':6}, 'id':8}" 400 -

我真的不知道为什么服务器会认为请求语法不好，即使问这个问题我也觉得有点傻。关于我可以尝试解决语法错误的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T20:21:58.873

在消息 1 和 4 中，您的客户端实际上并未发送 JSON；它`'`用于表示字符串边界，而不是`"`. 虽然一些 JSON 实现支持单引号，但[根据标准它们是无效的](https://www.rfc-editor.org/rfc/rfc4627#section-2.5)。更正您的客户端实现以发送带有`"`-delimited 字符串的实际 JSON。

但主要问题是您没有将消息包装到 HTTP POST 请求中，而是将它们原始发送。正确的 JSONRPC 请求如下所示：

```
POST / HTTP/1.0
Content-Length: 71

{"jsonrpc": "2.0", "params": [3, 6], "id": "er5qtdbz", "method": "pow"} 
```

，但您只发送最后一行。

在 Python 中，您可以使用以下示例程序发送有效请求：

```
import json
try:
    from urllib.request import urlopen
except ImportError: # Python<3
    from urllib2 import urlopen

req = {"jsonrpc":"2.0","method":"add","params":[3,6],"id":0}
req_data = json.dumps(req).encode('utf-8')
u = urlopen('http://localhost:8080/', req_data)
print(u.read()) 
```

# javascript - 无效的日期/时间字符串：Sun Jun 03 2012 00:00:00 GMT+0100（GMT 夏令时）CFML

> ID：12877928
> 
> 赞同：1
> 
> 时间：2012-10-13T23:26:41.603
> 
> 标签：javascript, coldfusion

我正在尝试使用来自 html 输入的信息查询数据库。日期格式为：

```
 Date {Sun Jun 03 2012 00:00:00 GMT+0100 (GMT Daylight Time)} 
```

在我使用的数据库查询中

```
 parseDateTime( arguments.start ) 
```

.. 其中`arguments.start`表示上面显示的日期格式。但是当我尝试运行查询时，我从网页中得到以下响应：

> 无效的日期/时间字符串：Sun Jun 03 2012 00:00:00 GMT+0100（GMT 夏令时间）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:12:45.140

不确定您那里有什么格式，但这不是有效的 ISO 8601 时间格式。所有 ISO 时间格式始终为 GMT 并且是以下格式之一：

*   1994-11-05T13:15:30Z
*   1994-11-05T08:15:30-05:00

我会检查任何给你那个字符串值的东西。

# c++ - 外部模板类和非模板友元函数

> ID：12877931
> 
> 赞同：4
> 
> 时间：2012-10-13T23:27:05.630
> 
> 标签：c++, templates, c++11, extern

我已经开始尝试使用`extern`模板，并且偶然发现了一个我找不到任何相关信息的问题。假设我有一个带有非模板友元函数的类模板（在类模板声明中定义）。我`extern`为该类声明了一些模板实例化，但是如何将友元函数也声明为 extern？

这是一些示例代码：

```
// --- test.h ---

template <typename T>
class Foo {
  private:
    T value;
  public:
    friend void some_friend_function(Foo<T>& obj) {
      obj.value -= T(42);
    };

    void some_member_function(T rhs) { value += rhs; };

};

extern template class Foo<int>;
//extern void some_friend_function(Foo<int>&);  // I tried this also...

// --- test.cpp ---

#include "test.h"

template class Foo<int>;
//void some_friend_function(Foo<int>&);         // ... with this. 
```

当我编译上面的（有或没有注释行）时，我只得到以下导出的符号：

```
0000000000000000 W _ZN3FooIiE20some_member_functionEi 
```

因此，非模板友元函数绝对不会`extern`与类模板的显式实例化一起实例化（和 'd）。这是正常的吗？至少，这就是 GCC 产生的（在 4.6.3 和 4.7.2 上测试）。

有什么方法可以让朋友功能被标记为外部？我知道这不是一个大问题，因为我可以愉快地接受根据需要实例化的朋友函数（即非外部函数），但我很想知道是否有办法做到这一点，如果没有的话，是疏忽还是故意的？

**编辑：明显的解决方法**

我的问题特别是关于非模板友元函数，而不是寻找解决方法来避免这个问题，这是微不足道的。第一个明显的解决方法是：

```
template <typename T>
class Foo {
  private:
    T value;
  public:
    template <typename U>
    friend void some_friend_function(Foo<U>& obj) {
      obj.value -= T(42);
    };
};

extern template class Foo<int>;
extern template void some_friend_function(Foo<int>&);

// --- in cpp file: ---

template class Foo<int>;
template void some_friend_function(Foo<int>&); 
```

而另一个匹配得更紧密但更麻烦的是：

```
template <typename T> class Foo;  // forward-declare.

template <typename T>
void some_friend_function(Foo<T>&);  // declaration.

template <typename T>
class Foo {
  private:
    T value;
  public:
    friend void some_friend_function<>(Foo<T>& obj);  // befriend the T-specialization.
};

template <typename T>
void some_friend_function(Foo<T>& obj) {  // definition.
  obj.value -= T(42);
};

extern template class Foo<int>;
extern template void some_friend_function(Foo<int>&);

// --- in cpp file: ---

template class Foo<int>;
template void some_friend_function(Foo<int>&); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T23:03:27.863

“外部模板类”的作用是声明一个可用的显式实例化。显式实例化声明的效果不适用于内联函数或模板特化（14.7.2 [temp.explicit] 第 10 段）：

> 除了内联函数和类模板特化，显式实例化声明具有抑制它们所引用实体的隐式实例化的效果。

由于`friend`类定义中的函数定义必然是`inline`函数，因此它将保持`inline`独立于模板的显式实例化声明的函数（并且，正如您正确指出的那样，它不是模板，也不遵循模板实例化规则）。

# android - 引导用户点击 ListView 中的项目进行新活动

> ID：12877932
> 
> 赞同：3
> 
> 时间：2012-10-13T23:27:15.370
> 
> 标签：android, listview, android-activity

![在此处输入图像描述](../Images/faac419c7ac137f7798a227ad9516938.png) ListView 是从 Cursor 使用 DB 中的数据创建的。

单击 ListView 中的每个**项目**会导致用户进入新的 Activity/Page/Layout/WHAT？**显示有关该项目**的附加信息 + 图片的位置。

我需要创建动态活动吗？还是有更好的方法，我只是不知道？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:47:22.363

如果每个项目都有一个足够通用的格式来显示你的“附加信息+图片”，那么我建议创建一个单独的 Activity 来代表你的项目，然后通过将项目作为附加项传递给启动你的 Intent 来填写详细信息活动。例如，

在列表活动中：

```
Intent intent = new Intent(ITEM_DETAILS_INTENT);
intent.putExtra(ITEM_NAME, itemName);
startActivity(intent); 
```

并在项目详细信息活动中：

```
Intent intent = getIntent();
String itemName = intent.getStringExtra(ITEM_NAME);
populateDetails(itemName); 
```

另一方面，如果“控件”需要与“焦点”明显不同的格式，您将需要一个 ControlsActivity 和 FocusActivity（例如），其中每个活动处理每个项目，并根据所选项目启动不同的活动。

希望这可以帮助！

# php - php preg_split，从 web api 获取数据到 mysql db

> ID：12877935
> 
> 赞同：1
> 
> 时间：2012-10-13T23:27:32.797
> 
> 标签：php, regex

我有一个这样的输入字符串：

> {"id":1,"name":"John","age":50,"surname":"Smith","category":"something","money":500}

我需要得到一个像这样的数组：

> 大批
> 
> (
> 
> ```
>  [id] => 1
> 
>  [name] => John
> 
>  [age] => 50 
> 
>  [...] 
> ```
> 
> )

或另一种将该记录插入mysql数据库的方法......

但我对正则表达式不是很熟悉......我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T23:29:58.050

那是[json 格式](http://www.json.org/)，您不需要拆分任何可用于`json_decode`将其解码为数组的内容

```
$str = '{"id":1,"name":"John","age":50,"surname":"Smith","category":"something","money":500}';
$str = json_decode($str,true);

echo "<pre>";
print_r($str); 
```

输出

```
Array
(
    [id] => 1
    [name] => John
    [age] => 50
    [surname] => Smith
    [category] => something
    [money] => 500
) 
```

# model-view-controller - 模块按接口、图表、逻辑、一般信息进行合同

> ID：12877938
> 
> 赞同：0
> 
> 时间：2012-10-13T23:27:55.667
> 
> 标签：model-view-controller, interface, module, components, diagram

这是我的问题，我希望我能正确地写出来，因为这是一个精确的问题。

我想知道如何将接口用作两个模块之间的合同。当我绘制模块图时，我永远不知道哪个模块是圆圈，哪个模块是半开的圆圈。关于如何区分的明确方法将不胜感激！

我不想要关于如何使用接口的示例，因为我知道接口的属性（行为等）。

假设我有 2 个模块，一个包含业务逻辑，所以我将其称为“模型”，另一个包含 GUI，因此我将其称为“视图”。

该视图在每个节点上都需要一个 Treeview 和一个 Matrix。所以我们得到了一个模型知道的树状层次结构，并且对于每个节点，我们想要填充一个值矩阵。

```
root
- node1
-- leaf1
-- leaf2
- node2
- node3
-- leaf3
-- leaf4 
```

我的直觉告诉我，我应该做这样的事情：

```
interface IModelHierarchicMatrix {
    void setTreeViewValues(TreeViewModel treeview);
    void getMatrixValues();
    void setMatrixValues(int[] values);
}

class Model implements IModelHierarchicMatrix {
    // the code where I override the interface's function
} 
```

太好了，我们可以在模型中调用 GUI 所需的函数。但是我们如何告诉 GUI 的类我们需要那种行为（类等）......我发现自己经常做这种事情：

```
interface IModelHierarchicMatrixGlue {
    void acceptModel(IModelHierarchicMatrix model);
}

class Gui implements IModelHierarchicMatrixGlue {
    private IModelHierarchicMatrix model;

    ...

    @Override
    public void acceptModel(IModelHierarchicMatrix model) {
        if (this.model == null) {
            this.model = model;
        }
    }
} 
```

但我总是想知道这是否是在模型和视图之间创建契约的好方法。如果我必须在模块之间创建双向合同，我应该怎么做？因为它可能会在接口之间创建循环逻辑......

我希望我的问题足够清楚，在此先感谢。

# jquery - jQuery 验证类

> ID：12877941
> 
> 赞同：0
> 
> 时间：2012-10-13T23:28:19.517
> 
> 标签：jquery, validation, class

我正在寻找一些不错的 jQuery 验证类，我可以在其中添加一些自定义验证函数，并且我不会被迫依赖输入类，我可以在其中使用对象或某个数组定义我的验证规则。

你能推荐我一些你正在使用的验证类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T23:44:55.313

这是我在项目中使用的：

[https://github.com/posabsolute/jQuery-Validation-Engine#readme](https://github.com/posabsolute/jQuery-Validation-Engine#readme)

并对此非常满意，请查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T01:03:41.733

您需要包含语言文件，例如：

[https://github.com/posabsolute/jQuery-Validation-Engine/blob/master/js/languages/jquery.validationEngine-en.js](https://github.com/posabsolute/jQuery-Validation-Engine/blob/master/js/languages/jquery.validationEngine-en.js)

```
<script src="/Scripts/jquery-1.7.2.js"></script>
<script src="/Scripts/jquery-ui-1.8.9.js"></script>
<script src="/Scripts/jquery.validate-1.12.0.js"></script> <!-- from http://jqueryvalidation.org/ -->
<script src="/Scripts/jquery.validationEngine-en.js" type="text/javascript" charset="utf-8"></script>
<script src="/Scripts/jquery.validationEngine.js" type="text/javascript" charset="utf-8" ></script> 
```

# javascript - 具有包含值的属性的 jQuery 最接近元素

> ID：12877943
> 
> 赞同：8
> 
> 时间：2012-10-13T23:28:36.040
> 
> 标签：javascript, jquery

我有一些看起来像这样的 HTML 代码：

```
<tr id="nbContent_GR1">...</tr>
<tr id="nbContent_GR2">...</tr>
<tr id="nbContent_GR3">...</tr>
<tr id="nbContent_GR4">...</tr>
<tr id="nbContent_GR5">...</tr>
<tr id="nbContent_GR6">...</tr> 
```

在其中一行中，我想遍历 DOM 以找到最近的元素，其 ID 属性以“nbContent_GR”开头。所以基本上我希望能够在不知道其确切 ID 的情况下找到父 TR 元素，只是第一个以“nbContent_GR”开头的元素。这可能吗？如果是这样，我会怎么做？

顺便说一句，我知道最接近（）和“包含”选择器，只是不确定 contains 是否可以用于属性值。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-13T23:32:47.517

做就是了：

```
tr = $(this).closest("[id^='nbContent_GR']"); 
```

它将遍历 DOM，直到找到 ID 以“nbContent_GR”开头的父级

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T23:33:50.713

```
.closest('[id^="nbContent_GR"]') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T23:35:33.123

两个有用的页面：

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

[http://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

我认为您可以将这些结合起来作为解决方案。

从 TR 内，找到最近的 TR。然后使用 'starts with' 选择器查找以所需值开头的 ID。

例如：

```
$(this).closest("tr").parent().find("id^='nbContent_GR'"); 
```

# android - Android中Looper、Handler和MessageQueue是什么关系？

> ID：12877944
> 
> 赞同：103
> 
> 时间：2012-10-13T23:29:01.890
> 
> 标签：android, handler, message-queue, looper

我已经检查了官方的 Android 文档/指南中的`Looper`,`Handler`和`MessageQueue`. 但我无法得到它。我是 android 新手，对这些概念非常困惑。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-10-13T23:52:14.960

A[`Looper`](http://developer.android.com/reference/android/os/Looper.html)是一个消息处理循环：它从 a 读取和处理项目[`MessageQueue`](http://developer.android.com/reference/android/os/MessageQueue.html)。该类`Looper`通常与[`HandlerThread`](http://developer.android.com/reference/android/os/HandlerThread.html)（的子类`Thread`）结合使用。

A[`Handler`](http://developer.android.com/reference/android/os/Handler.html)是一个实用程序类，它有助于与 a 进行交互——主要是`Looper`通过将消息和`Runnable`对象发布到线程的`MessageQueue`. 创建a 时`Handler`，它会绑定到特定的`Looper`（以及关联的线程和消息队列）。

在典型用法中，您创建并启动一个`HandlerThread`，然后创建一个`Handler`对象（或多个对象），其他线程可以通过该对象与该`HandlerThread`实例进行交互。`Handler`必须在 上运行时创建，尽管一旦创建，对哪些线程可以使用的调度方法（等）`HandlerThread`没有限制`Handler``post(Runnable)`

Android 应用程序中的主线程（也称为 UI 线程）在创建应用程序实例之前设置为处理程序线程。

除了类文档，这里有一个很好的[讨论](http://mindtherobot.com/blog/159/android-guts-intro-to-loopers-and-handlers/)。

PS 上面提到的所有类都在包中`android.os`。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2012-10-13T23:55:19.283

众所周知，直接从android 中的**主线程**以外的线程**更新 UI 组件是非法的。**这个 android 文档（[在 UI 线程中处理昂贵的操作](http://developer.android.com/guide/faq/commontasks.html#threading)）建议了如果我们需要启动一个单独的线程来执行一些**昂贵的工作**并在完成后更新 UI 时要遵循的步骤。这个想法是创建一个与**主线程关联的**[Handler](http://developer.android.com/reference/android/os/Handler.html)对象，并在适当的时候向它发布一个[Runnable 。](http://developer.android.com/reference/java/lang/Runnable.html)这将在**主线程**上调用。这个机制是用[Looper](http://developer.android.com/reference/android/os/Looper.html)和[Handler](http://developer.android.com/reference/android/os/Handler.html)类实现的。******`Runnable`******

 ******该类`Looper`维护一个[MessageQueue](http://developer.android.com/reference/android/os/MessageQueue.html)，其中包含一个[消息](http://developer.android.com/reference/android/os/Message.html)列表。Looper 的一个重要特性是它与**创建**的**线程****相关联**。这种关联**永远保持**，不能被打破也不能改变。另请注意，一个线程**不能与**多个. 为了保证这种关联，存储在线程本地存储中，不能直接通过其构造函数创建。创建它的唯一方法[是](http://developer.android.com/reference/android/os/Looper.html#prepare%28%29)在. prepare 方法首先检查[ThreadLocal](http://developer.android.com/reference/java/lang/ThreadLocal.html)**`Looper`******`Looper``Looper``Looper`的当前线程，以确保没有与该线程关联的 Looper。检查后，将创建一个新`Looper`的并保存在`ThreadLocal`. 准备好之后`Looper`，我们可以在其上调用[循环](http://developer.android.com/reference/android/os/Looper.html#loop%28%29)方法来检查新消息并`Handler`进行处理。****

 ****顾名思义，`Handler`该类主要负责处理（添加、删除、调度）当前线程的消息`MessageQueue`。`Handler`实例也绑定到线程。**Handler 和 Thread 之间**的绑定是通过`Looper`和实现的`MessageQueue`。A`Handler`始终**绑定到**a `Looper`，然后绑定到与关联的**线程**`Looper`。与 不同`Looper`的是，多个 Handler 实例可以绑定到同一个线程。每当我们在 上调用[post](http://developer.android.com/reference/android/os/Handler.html#post%28java.lang.Runnable%29)或任何类似方法时`Handler`，都会将新消息添加到关联的`MessageQueue`. 消息的目标字段设置为当前`Handler`实例。当。。。的时候`Looper`收到此消息，它在消息的目标字段上调用[​​dispatchMessage](http://developer.android.com/reference/android/os/Handler.html#dispatchMessage%28android.os.Message%29)，以便消息路由回要处理的 Handler 实例，但在正确的线程上。和之间`Looper`的关系如下图所示：`Handler``MessageQueue`

![在此处输入图像描述](../Images/7803aa11311ed2b55827c3b483555378.png)

* * *

## 回答 #3

> 赞同：89
> 
> 时间：2015-12-30T07:02:07.700

让我们从 Looper 开始。了解了 Looper 是什么，就更容易理解 Looper、Handler 和 MessageQueue 的关系了。您还可以更好地理解 Looper 在 GUI 框架的上下文中是什么。Looper 是用来做两件事的。

1） Looper**将一个普通线程转换为**在其`run()`方法返回时终止的正常线程，**直到 Android 应用程序运行之前持续运行**，这在 GUI 框架中是必需的（从技术上讲，它仍然在方法返回时终止`run()`。但让我澄清一下我的意思，以下）。

2) Looper**提供了一个队列**，将要完成的作业排入队列，这在 GUI 框架中也是需要的。

您可能知道，当启动应用程序时，系统会为应用程序创建一个执行线程，称为“主线程”，而 Android 应用程序通常在默认情况下完全运行在单个线程上，即“主线程”。但是**主线程并不是什么秘密的、特殊的线程**。它只是一个普通线程，您也可以使用`new Thread()`代码创建它，这意味着它会在其方法返回时终止`run()`！想想下面的例子。

```
public class HelloRunnable implements Runnable {
    public void run() {
        System.out.println("Hello from a thread!");
    }

    public static void main(String args[]) {
        (new Thread(new HelloRunnable())).start();
    }
} 
```

现在，让我们将这个简单的原理应用到 Android 应用程序中。如果 Android 应用程序在普通线程上运行会发生什么？一个名为“main”或“UI”的线程或任何启动应用程序的线程，并绘制所有 UI。因此，第一个屏幕显示给用户。所以现在怎么办？主线程终止？不，不应该。它应该等到用户做某事，对吧？但是我们怎样才能实现这种行为呢？好吧，我们可以试试`Object.wait()`or`Thread.sleep()`. 例如，主线程完成其初始工作以显示第一个屏幕，然后进入睡眠状态。当一个新的工作被获取时，它会被唤醒，这意味着被中断。到目前为止一切顺利，但此时我们需要一个类似队列的数据结构来保存多个作业。考虑一个用户连续触摸屏幕的情况，一项任务需要更长的时间才能完成。因此，我们需要一个数据结构来保存要以先进先出方式完成的工作。此外，您可能会想象，使用中断实现 ever-running-and-process-job-when-arrived 线程并不容易，并且会导致复杂且通常无法维护的代码。我们宁愿为此目的创建一个新机制，***这就是 Looper 的全部***意义所在。[Looper类](http://developer.android.com/reference/android/os/Looper.html)的官方文档说，“默认情况下，线程没有与之关联的消息循环”，而 Looper 是一个“用于为线程运行消息循环”的类。现在你可以理解它的意思了。

让我们转到 Handler 和 MessageQueue。首先，MessageQueue 就是我上面提到的队列。它位于 Looper 中，仅此而已。您可以使用[Looper 类的源代码](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/os/Looper.java)检查它。Looper 类有一个MessageQueue 的成员变量。

那么，什么是Handler？如果有队列，那么应该有一种方法可以让我们将新任务排入队列，对吗？这就是处理程序所做的。`post(Runnable r)`我们可以使用各种方法将新任务排入队列（MessageQueue） 。而已。这都是关于 Looper、Handler 和 MessageQueue 的。

我的最后一句话是，所以基本上 Looper 是一个用于解决 GUI 框架中出现的问题的类。但这种需求也可能发生在其他情况下。实际上，它是多线程应用程序中非常著名的模式，您可以在 Doug Lea 的“Java 中的并发编程”中了解更多信息（特别是第 4.1.4 章“工作线程”会有所帮助）。另外，你可以想象这种机制在 Android 框架中并不是唯一的，但所有的 GUI 框架都可能需要与此有点类似。您可以在 Java Swing 框架中找到几乎相同的机制。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2016-05-01T13:16:59.693

`MessageQueue`：它是一个低级类，保存要由 发送的消息列表`Looper`。消息不是直接添加到 a`MessageQueue`中，而是通过与.[ [3](http://developer.android.com/reference/android/os/MessageQueue.html) ]`Handler`关联的对象添加`Looper`

`Looper`: 它循环遍历`MessageQueue`包含要发送的消息的 a。管理队列的实际任务由`Handler`负责处理（添加、删除、调度）消息队列中的消息的对象完成。 [ [2](http://riteattitude.blogspot.in/2011/11/android-ui-thread.html) ]

`Handler`：它允许您发送和处理`Message`与`Runnable`线程关联的对象`MessageQueue`。每个 Handler 实例都与单个线程和该线程的消息队列相关联。[ [4](http://developer.android.com/reference/android/os/Handler.html) ]

当您创建一个 new`Handler`时，它会绑定到创建它的线程的线程/消息队列——从那时起，**它会将消息和可运行对象传递到该消息队列**并**在它们从消息队列中出来时执行它们**.

请浏览下图 [ [2](http://riteattitude.blogspot.in/2011/11/android-ui-thread.html) ] 以便更好地理解。

[![在此处输入图像描述](../Images/79e03fde19e91d83145afa2ee938ef43.png)](https://i.stack.imgur.com/nwhYs.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-17T15:31:21.903

用一个例子扩展答案，@K_Anas，正如它所说

> **众所周知，直接从 android 中的主线程以外的线程更新 UI 组件是非法的。**

例如，如果您尝试使用 Thread 更新 UI。

```
 int count = 0;
    new Thread(new Runnable(){
        @Override
        public void run() {
            try {
                while(true) {
                    sleep(1000);
                    count++;
                    textView.setText(String.valueOf(count));
                }
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

   ).start(); 
```

您的应用程序将异常崩溃。

> android.view.ViewRoot$CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能触摸其视图。

换句话说，您需要使用`Handler`which 保持对`MainLooper` ie的引用`Main Thread`或`UI Thread`并将任务传递为`Runnable`.

```
 Handler handler = new Handler(getApplicationContext().getMainLooper);
        int count = 0;
        new Thread(new Runnable(){
            @Override
            public void run() {
                try {
                    while(true) {
                        sleep(1000);
                        count++;
                        handler.post(new Runnable() {
                           @Override
                           public void run() {
                                 textView.setText(String.valueOf(count));
                           }
                         });

                    }
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }

    ).start() ; 
```**********

# ios - 设备旋转后 TableView 内容发生变化

> ID：12877945
> 
> 赞同：0
> 
> 时间：2012-10-13T23:29:21.410
> 
> 标签：ios, uitableview

我有一个包含 3 个部分的表视图的应用程序。显示数据一切正常，但是当我更改设备方向（从纵向到横向，反之亦然）时，我的表格视图中添加了额外数量的行

事实上，在调试我的应用程序时，我发现`cellForRowAtIndexPath:`每次旋转设备时都会执行该操作。

一些好人可以告诉我如何解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:05:17.003

正如怀疑的那样，您的问题是您在 tableView:numberOfRowsInSection: 方法中向数据源数据添加项目。每次表格询问一个部分中有多少行时，您都会向数据结构添加更多数据。请记住，数据源方法将被调用很多次。

您需要在任何数据源方法之外创建一次数据结构。您的数据源方法对于您的数据结构应该是只读的。他们应该简单地返回一个计数。不应在数据源方法中进行其他处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:58:54.073

这是代码！

```
`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (section==0) {
    for (int i=0; i < self.TiersArray.count; i++) {
         if (([[[self.TiersArray objectAtIndex:i]t_client] isEqualToNumber:one])||        ([[[self.TiersArray objectAtIndex:i]t_client] isEqualToNumber:three])) 
   {
            [ClientsArray addObject:[self.TiersArray objectAtIndex:i]];
        }

    }
return self.ClientsArray.count;
}
else if(section==1){
    for (int i=0; i < self.TiersArray.count; i++) {
        if (([[[self.TiersArray objectAtIndex:i]t_client]isEqualToNumber:two])||([[[self.TiersArray objectAtIndex:i]t_client]isEqualToNumber:three])) {
            [ProspectsArray addObject:[self.TiersArray objectAtIndex:i]];
        }

    }
    return self.ProspectsArray.count;
}
else{
    for (int i=0; i < self.TiersArray.count; i++) {
        if ([[[self.TiersArray objectAtIndex:i]t_fournisseur] isEqualToNumber:one ]) {
            [FournisseurArray addObject:[self.TiersArray objectAtIndex:i]];
        }

    }
    return self.FournisseurArray.count;
}
} 
```

`

# android - Android：ListFragment，没有数据和数据正在加载的情况

> ID：12877948
> 
> 赞同：0
> 
> 时间：2012-10-13T23:29:54.010
> 
> 标签：android, android-layout, android-listview, android-listfragment

我的应用程序中有 ListFragment。

*我有两种可能的情况：*

1.  加载数据时（从 Internet 或数据库）
2.  当数据计数为零时

**那么，向用户展示这一点的最佳方式是什么？**

我尝试过使用`@android:id/empty`，但它在两种情况下都显示出来。我无法控制它的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:34:56.820

我的建议是： 1\. 在加载数据时旋转进度条 2\. 简短的祝酒词，说明“无数据”或列表为空时有意义的内容。

# java - TableModel 如何知道该值已更改？

> ID：12877951
> 
> 赞同：1
> 
> 时间：2012-10-13T23:30:17.960
> 
> 标签：java, swing, jtable, updates, abstracttablemodel

在下面的示例中，窗口显示了一个表格，其中包含窗口本身的宽度。当窗口调整大小时，它的宽度值反映了当前的事实。

这怎么可能？Swing 如何通知表，它应该重新请求模型？或者模型可能正在接收值已更改的信息？

```
public class JTableDynamicUpdate extends JFrame {

private AbstractTableModel tableModel = new AbstractTableModel() {

    private String[] columnNames = new String[] {"Parameter", "Value"};

    public String getColumnName(int column) {
        return columnNames[column];
    };

    @Override
    public int getRowCount() {
        return 1;
    }

    @Override
    public int getColumnCount() {
        return 2;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        if( rowIndex == 0 ) {
            if( columnIndex == 0 ) {
                return "Window width:";
            }
            else if( columnIndex==1) {
                return getSize().width;
            }
        }
        throw new IndexOutOfBoundsException();
    }

};

private JTable table = new JTable(tableModel);

private JScrollPane tableScroll = new JScrollPane(table);

private Container contentPane = getContentPane();
{
    contentPane.setLayout(new BorderLayout());
    contentPane.add(tableScroll, BorderLayout.CENTER);

    setDefaultCloseOperation(DISPOSE_ON_CLOSE);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {

            JTableDynamicUpdate frame = new JTableDynamicUpdate();
            frame.pack();
            frame.setVisible(true);

        }
    });
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T00:31:06.290

JTable 只是一个视图，这意味着它不包含任何值。A 将为您生成一个异常，让您查看整个跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.IndexOutOfBoundsException
at TestClass$1.getValueAt(TestClass.java:36)
at javax.swing.JTable.getValueAt(JTable.java:2686)
at javax.swing.JTable.prepareRenderer(JTable.java:5703)
at javax.swing.plaf.basic.BasicTableUI.paintCell(BasicTableUI.java:2072)
at javax.swing.plaf.basic.BasicTableUI.paintCells(BasicTableUI.java:1974)
at javax.swing.plaf.basic.BasicTableUI.paint(BasicTableUI.java:1770)
at javax.swing.plaf.ComponentUI.update(ComponentUI.java:143)
at javax.swing.JComponent.paintComponent(JComponent.java:752)
at javax.swing.JComponent.paint(JComponent.java:1029)
at javax.swing.JComponent.paintChildren(JComponent.java:862)
at javax.swing.JComponent.paint(JComponent.java:1038)
at javax.swing.JViewport.paint(JViewport.java:747)
at javax.swing.JComponent.paintChildren(JComponent.java:862)
at javax.swing.JComponent.paint(JComponent.java:1038)
at javax.swing.JComponent.paintChildren(JComponent.java:862)
at javax.swing.JComponent.paint(JComponent.java:1038)
at javax.swing.JComponent.paintChildren(JComponent.java:862)
at javax.swing.JComponent.paint(JComponent.java:1038)
at javax.swing.JLayeredPane.paint(JLayeredPane.java:567)
at javax.swing.JComponent.paintChildren(JComponent.java:862)
at javax.swing.JComponent.paintToOffscreen(JComponent.java:5131)
at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1491)
at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1422)
at javax.swing.RepaintManager.paint(RepaintManager.java:1225)
at javax.swing.JComponent.paint(JComponent.java:1015)
at java.awt.GraphicsCallback$PaintCallback.run(GraphicsCallback.java:21)
at sun.awt.SunGraphicsCallback.runOneComponent(SunGraphicsCallback.java:60)
at sun.awt.SunGraphicsCallback.runComponents(SunGraphicsCallback.java:97)
at java.awt.Container.paint(Container.java:1778)
at java.awt.Window.paint(Window.java:3379) 
```

框架的重绘最终将触发表格的重绘。表格模型将用于获取重绘某个单元格所需的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T00:42:04.013

只需以这种方式更改`getValueAt()`方法，您就可以轻松地从方法调用链中找到发生了什么：

```
@Override
public Object getValueAt(int rowIndex, int columnIndex) {
        throw new RuntimeException("Trace!");
} 
```

# php - php中的电子邮件验证

> ID：12877959
> 
> 赞同：3
> 
> 时间：2012-10-13T23:31:22.557
> 
> 标签：php, html, sql, email-validation

我正在尝试将我的用户名验证为电子邮件地址，但是 PHP 不允许我这样做！这里有什么问题？

```
//This checks if all the fields are filled or not
if (!empty($_POST['username']) || 
!empty($_POST['password']) ||
!empty($_POST['repassword']) || 
!empty($_POST['user_firstname']) ||
!empty($_POST['user_lastname']) ){
header('Location: register.php?msg=You didn\'t complete all of the required fields');
}

if (filter_var($_POST['username'], FILTER_VALIDATE_EMAIL) === false){
$errors[] = 'The email address you entered is not valid';
} 
```

这是我在 register.php 中使用的表格

```
<form action="createuser.php" method="post" name="registration_form" id="registration_form">
<label>Email</label>
<input name="username" type="text" id="username" size="50" maxlength="50" /><br /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T23:34:05.627

错字？

```
header('Location: register.php?msg=You didn't complete all of the required fields');
                                           ^---unescaped embedded quote 
```

你的空逻辑也是错误的。您正在检查是否有任何字段**不**为空（例如已填写），然后抱怨它们未填写。删除`!`以反转逻辑。

```
if (empty(...) || empty(...) || etc...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T06:47:54.327

而不是使用正则表达式来验证您的电子邮件地址

```
function check_email_address($email) {
  // First, we check that there's one @ symbol, 
  // and that the lengths are right.
  if (!preg_match("^[^@]{1,64}@[^@]{1,255}$", $email)) {
    // Email invalid because wrong number of characters 
    // in one section or wrong number of @ symbols.
    return false;
  }
  // Split it into sections to make life easier
  $email_array = explode("@", $email);
  $local_array = explode(".", $email_array[0]);
  for ($i = 0; $i < sizeof($local_array); $i++) {
    if
(!preg_match("^(([A-Za-z0-9!#$%&'*+/=?^_`{|}~-][A-Za-z0-9!#$%&
↪'*+/=?^_`{|}~\.-]{0,63})|(\"[^(\\|\")]{0,62}\"))$",
    $local_array[$i])) {
      return false;
    }
  }
  // Check if domain is IP. If not, 
  // it should be valid domain name
  if (!preg_match("^\[?[0-9\.]+\]?$", $email_array[1])) {
    $domain_array = explode(".", $email_array[1]);
    if (sizeof($domain_array) < 2) {
        return false; // Not enough parts to domain
    }
    for ($i = 0; $i < sizeof($domain_array); $i++) {
      if
(!preg_match("^(([A-Za-z0-9][A-Za-z0-9-]{0,61}[A-Za-z0-9])|
↪([A-Za-z0-9]+))$",
$domain_array[$i])) {
        return false;
      }
    }
  }
  return true;
} 
```

然后检查它是否返回 true 将其重定向到位置，如果不是，则简单地抛出一个错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T23:40:03.180

您将无法验证电子邮件，因为您的 if 语句是错误的 .. 它正在检查是否有任何帖子不为空。

将其替换为

```
if (empty($_POST['username']) || empty($_POST['password']) || empty($_POST['repassword']) || empty($_POST['user_firstname']) || empty($_POST['user_lastname'])) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T23:33:51.830

对于初学者，请查看语法突出显示为什么会出现解析错误。

```
header('Location: register.php?msg=You didn't complete all of the required fields'); 
```

需要变成：

```
header('Location: register.php?msg=You didn\'t complete all of the required fields'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T01:45:43.067

你如何使用javascript window.location？有时标题功能很敏感。并且还在表单中放置一个提交按钮，因为默认情况下加载时**字段为空。**

```
if(isset($_POST['your_submit_button_name'])){

if (empty($_POST['username']) || 
empty($_POST['password']) ||
empty($_POST['repassword']) || 
empty($_POST['user_firstname']) ||
empty($_POST['user_lastname']) ){
?>
 <script>
 window.location = 'register.php?msg=You didn\'t complete all of the required fields';
 </script>
<?php
}

   if (filter_var($_POST['username'], FILTER_VALIDATE_EMAIL) === false){
   $errors[] = 'The email address you entered is not valid';
   }
} 
```

注意：我删除“！” 在你的空函数之前，因为你捕获了空的字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T06:28:16.340

尝试使用此解决方案：

```
$FormData = $_POST;
if(isset($FormData['button_name'])){
    $Errors = array();
    foreach ($$FormData as $key => $value) {
        if(empty($value)) $Errors[] = 'Some message';
        if($key = 'username'){
            if(filter_var($value, FILTER_VALIDATE_EMAIL){
                $Errors[] = 'The email address you entered is not valid';
            } 
        }
    }
    if(empty($Errors)){
        // @todo Do some action 
    } else {
        header('Location: register.php?msg=You didn\'t complete all of the required fields');
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-14T12:51:20.677

```
function check_email($check) {
$expression = "/^[a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.([a-zA-Z]{2,4})$/";
if (preg_match($expression, $check)) {
    return true;
} else {
    return false;
} 
} 
```

现在将此方法用作：

```
if(!check_email($_REQUEST['ContactEmail'])){
  $register_error .="Enter the correct email address!<br />";
  $reg_error=1; 
} 
```

# c++ - C++ 继承 - 在子类中运行父方法

> ID：12877960
> 
> 赞同：3
> 
> 时间：2012-10-13T23:31:26.990
> 
> 标签：c++, inheritance

我的父类 Course 有方法 addStudent(Student s)。我的子类 BetterCourse 继承自 Course。每次我尝试运行 BetterCourse.addStudent(s) 时，都会收到以下错误：

> 错误：没有调用“BetterCourse::addStudent(Student (&)())”的匹配函数 注意：候选人是：void Course::addStudent(Student)

我知道它告诉我 addStudent() 尚未在 BetterCourse 中定义，它建议我使用父类 Course 中存在的那个。这让我感到困惑，因为围绕继承的整个想法不需要重新定义继承的函数和变量。

课程如下：

```
#include <iostream>
#include <string>
#include "Student.h"

using namespace std;

class Course
{

    protected:
        string id;
        string name;

    public:
        Course();
        Course(string id, string name);     
        void addStudent(Student s);
};

Course::Course()
{
   //code
}

Course::Course(string id, string name)
{
   //code
}

void Course::addStudent(Student s) 
{
   //code
} 
```

更好的课程：

```
#include <iostream>
#include <string>
#include "Course.h"

using namespace std;

class BetterCourse : public Course
{
    public:
        BetterCourse(string id, string name) : Course(id,name){};
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T23:41:00.323

从您的错误看来，您似乎是第一次接触到 C++ 最丑陋的部分。

这个：

```
Student s(); 
```

是函数声明 - 不是对象定义。当你打电话时，`s`类型是这样的：`Student (*)()`

```
BetterCourse bc; 
bc.addStudent(s); 
```

你得到你的错误 - 你没有方法来添加返回学生的函数。

通过以下方式定义学生：

```
Student s;
Student s {}; // new C++11 way
Student s = Student(); // 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:37:31.980

你不能调用 BetterCourse.addStudent(s) 你应该创建一个对象

```
BetterCourse obj;
obj.addStudent(s); 
```

应该管用

如果您想调用 BetterCourse::addStudent(s) 而不是将 addStudent(s) 声明为静态方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T23:35:13.147

听起来您实际上是在使用不适当的参数调用函数“addStudent”。您能否展示在 BetterCourse 对象上实际调用 addStudent 的代码？听起来您正在使用对学生的引用而不是学生对象本身。

# ruby - 每次我尝试为 Jruby 加载 gem 时，它都会给我这个错误。这是在输入“gem install rails”之后。请帮忙？

> ID：12877961
> 
> 赞同：1
> 
> 时间：2012-10-13T23:31:48.627
> 
> 标签：ruby, ruby-on-rails-3.2, jruby

我正在尝试下载 jruby-1.7.0.RC2 的 gem，但每次尝试通过它时都会收到此错误。

```
Error: Your application used more stack memory than the safety cap of 2048K. 
```

指定 -J-Xss####k 以增加它（#### = 以 KB 为单位的大小上限）。为完整 StackOverflowError 堆栈跟踪指定 -w

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:23:37.967

如果您使用 RVM 来管理您的 Ruby 运行时，请务必更新它。请参阅[https://github.com/jruby/jruby/issues/331](https://github.com/jruby/jruby/issues/331)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T06:27:31.717

那是因为每次你跑

> 宝石安装导轨

它检查倾覆 JRUBY_OPTS 只是尝试更改该值

`export JRUBY_OPTS=-J-Xmx2048m`

将 2048 更改为更高的值（这基本上是 Jruby 堆空间设置）

然后运行`gem install rails`

希望这有帮助

顺便说一句，这里是您可以与[http://kenai.com/projects/jruby/pages/PerformanceTuning一起使用的选项列表](http://kenai.com/projects/jruby/pages/PerformanceTuning)

# java - 是否可以在 Java Swing 中一次启用所有文本字段？

> ID：12877964
> 
> 赞同：2
> 
> 时间：2012-10-13T23:31:56.987
> 
> 标签：java, swing, jtextfield, disabled-control

我有多个文本字段，我需要使用 Java Swing 一次启用或禁用它们。那可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T23:51:03.007

如果所有这些`JTextFields`都在一个容器上，你可以这样做：

```
for (Component c : container.getComponents()) {
   if (c instanceof JTextField) {
      c.setEnabled(false);
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T00:03:59.393

很难维护所有组件的全局列表并遍历所有引用。假设您需要在不破坏系统松散耦合特性的情况下通知所有文本字段启用或禁用（我假设您有兴趣保持应用程序可维护）。

我的建议是：

1.  子类 JTextField
2.  开始使用 EventBus 减少耦合（你可以从任何实现开始，[这个](http://eventbus.org/)很简单）
3.  在您的 JTextField 子类中订阅以接收**change_state**事件
4.  当您想要启用/禁用支持时使用您自己的 JTextField
5.  从应用程序的任何部分生成**change_state事件**

请注意，将（应该）只有两个与请求的功能相关的地方：

*   事件触发（可以是按钮动作监听器）
*   事件处理（JTextField 子类）

不要在您的应用程序上传播事件处理逻辑。快乐编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T23:35:07.457

如果你把它们都放在一个链表/数组列表中，你可以有一个方法来循环它并启用/禁用。这可能是最简单的方法

# microsoft-metro - WACK 中的 Direct3D 测试失败

> ID：12877973
> 
> 赞同：1
> 
> 时间：2012-10-13T23:34:00.483
> 
> 标签：microsoft-metro, mvvm-light, direct3d

我正在构建一个 Windows 应用商店应用程序，但我没有通过 Direct3D 功能的应用程序认证工具测试。这是一个通用应用程序，没有对任何图形功能的特定调用。

我试过在两台不同的机器上运行测试，所以我不认为我的问题是特定于硬件的。此外，我尝试测试一个非常基本的应用程序，该应用程序除了文本块外，去掉了所有 UI 控件，但我收到了同样的错误。这些机器正在运行 Windows 8 和 VS2012 的 RTM 版本。

本质上，我在问，接下来我应该看什么来解决这个问题？

谢谢 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T06:39:49.357

安装所有可用的 Windows 更新并尝试再次运行 WACK。

我在不止一台机器上使用这种方法很幸运。显然，挂起的更新会导致问题。安装更新，让机器重新启动并完成更新过程。在那之后问题应该消失了。

# java - 通过 POST 将 XML 文件发送到 Java 中的 RESTful 服务

> ID：12877978
> 
> 赞同：3
> 
> 时间：2012-10-13T23:34:40.030
> 
> 标签：java, xml, rest

我需要使用 POST 将 XML 文件发送到 Web 服务。我有一个客户端应用程序，它创建一个 XML 文件，该文件存储发送到 Web 应用程序所需的所有信息，但我不确定如何发送它。

我的 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Comment>
  <Poll_ID>2</Poll_ID>
  <Name>wpoon</Name>
  <Text>asdasdas</Text>
  <Timestamp>2012-10-14T10:30:25</Timestamp>
</Comment> 
```

我将发送到的 RESTful 服务具有以下 URL：

```
http://localhost:8080/TESTINGrestful/rest/polls/comment 
```

谁能告诉我如何做到这一点，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-13T23:38:43.170

Apache [HttpClient](http://hc.apache.org/httpclient-3.x/)[这里](http://svn.apache.org/viewvc/httpcomponents/oac.hc3x/trunk/src/examples/PostXML.java?view=markup)有一个很好的例子：

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost postRequest = new HttpPost("http://localhost:8080/TESTINGrestful/rest/polls/comment");
StringEntity input = new StringEntity("<Comment>...</Comment>");
input.setContentType("text/xml");
postRequest.setEntity(input);
HttpResponse response = httpClient.execute(postRequest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-25T17:12:06.513

类似于以前的方法，但使用**HttpClientBuilder**而不是已弃用的 DefaultHttpClient。此示例还使用 contentType **Json**。

```
HttpPost postRequest = new HttpPost( "http://localhost:8080/service_url" );

StringEntity input = new StringEntity("{\"jsonExample\": \"12345\"}");
input.setContentType("application/json");
postRequest.setEntity(input);

HttpResponse response = HttpClientBuilder.create().build().execute(postRequest);

String json = EntityUtils.toString(response.getEntity()); 
```

# java - 在java中获取分隔字符串的长度？

> ID：12877979
> 
> 赞同：0
> 
> 时间：2012-10-13T23:34:43.740
> 
> 标签：java, string, delimiter

谁能告诉我可以使用什么函数来获取分隔字符串中分隔字符串的数量？例如，如果我有

```
String time = "hh:mm:ss"; 
```

该函数将返回`3`，因为存在三个分隔的字符串：`hh`, `mm`,`ss` 谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T23:36:23.477

尝试这样的事情：

```
"hh:mm:ss".split(":").length 
```

[您可以在此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)阅读有关该`split`方法的更多信息。

# search-engine - 页面排名算法

> ID：12877980
> 
> 赞同：0
> 
> 时间：2012-10-13T23:34:47.850
> 
> 标签：search-engine, pagerank, google-ranking

我真的有兴趣根据开发这样的页面排名算法来制作我的 GP，而不是构建我自己的搜索引擎。

有没有办法在没有搜索引擎的情况下测试我的算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:56:15.743

假设您有兴趣在网络上进行测试，因为从 PageRank 的角度来看，大多数非网络数据集并不那么有趣：

commoncrawl.org 有一个网络爬虫，您可以在 AWS 中相对便宜地处理它；这可能会在此过程中摆脱很多工作。

# ruby-on-rails-3 - 不同的控制器和方法

> ID：12877983
> 
> 赞同：1
> 
> 时间：2012-10-13T23:34:55.070
> 
> 标签：ruby-on-rails-3

我是初学者，有些事情我有点困惑。

我有一个类似于 Metacritic for TV Shows 的网站，我的两个表格是节目和评论。

有我的节目（如电视节目）控制器

```
 def show
    @show = Show.find(params[:id])
    @reviews = @show.reviews.paginate(page: params[:page])
    @ratings = @show.reviews.average("rating")

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @show }

    end
  end 
```

和我的秀场

```
<p id="notice"><%= notice %></p>

<div class="row">
  <aside class="span4">
    <section>
      <h1>
<p>
  <%= @show.name %> (  <%= @show.year %>
)
</p>

<p>
  <b>Synopsys:</b>
  <%= @show.synopsys %>
</p>
<p>
  <b>Note:</b>
  <%= @ratings %>
</p>
<%= image_tag @show.avatar.url %>

      </h1>

    </section>
    <section>
    </section>
  </aside>

<div class="span8">
<% if @show.reviews.any? %>
<h3>Reviews (<%= @show.reviews.count %>)</h3>

<ol class="reviews">
<% @reviews.each do |review| %>

   <%= review.content %> <br> <%= review.source %> | <b><%= review.rating %> </b><br><br>
<br><br>
<% end %>
</ol>

<%= will_paginate @reviews %> 
```

现在，我正在尝试在我的主页视图（控制器主页）上做类似的事情。我想将所有节目及其整体收视率添加到数据库中。如果当我将我的显示控制器的内容复制到我的家庭控制器时，这个问题是未定义的，我不明白为什么。任何人都可以帮忙吗？

```
class HomeController < ApplicationController
  def index
    @shows = Show.all
    @ratings = @show.reviews.average("rating")

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @show }

    end

      def about
    end

      def contact
    end
  end
  end 
```

# c++ - 具有混合符号的 % (mod)

> ID：12877988
> 
> 赞同：1
> 
> 时间：2012-10-13T23:35:21.763
> 
> 标签：c++, operators, modulo

我正在使用 c++ 中的环形 2D 网格（即它在两侧环绕），并编写了一个明显的邻居/相对点函数：

```
point neighbor(point p0, int dx, int dy)
{
    point p=p0;
    p.x += dx;
    p.y += dy;
    p.x %= width; if(p.x<0) p.x += width;
    p.y %= height; if(p.y<0) p.y += height;
    return p;
} 
```

我完全不知道为什么我的程序不工作，因为这个功能的实现似乎微不足道。

我以为我理解 % 运算符，我什至记得检查是否有负面结果。尽管如此，我还是开始尝试它。'width' 是一个无符号值，值为 160，所以我尝试了：

```
cout << (-1) % 160u; 
```

...我很震惊地看到 95 的结果。

到底他妈发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:35:21.763

事实证明，我的程序没有将未签名的 160u 转换为 int。
相反，-1 被转换为无符号数，变成 4294967295，实际上当被 160 修改后得到 95。

为什么 c++ 这样做超出了我的理解，但我发布这个是为了让其他人可以从我的经验中学习。底线：**使用时不要混合有符号和无符号整数`%`！**

# macos - 如何使用 Gatekeeper ID 签署仪表板小部件（Dashcode）

> ID：12877995
> 
> 赞同：1
> 
> 时间：2012-10-13T23:35:47.377
> 
> 标签：macos, osx-mountain-lion, dashboard, dashcode, osx-gatekeeper

有谁知道如何签署由 Dashcode 制作的带有 Gatekeeper ID 的仪表板小部件（OS-X Mountain Lion）？所有教程都只涉及 XCode-Apps 或包安装程序。仪表板小部件是否像安装程序一样处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-01T22:01:43.283

这个问题有点老了，但这个问题似乎仍然相关。我弄清楚了它是如何工作的，请参阅我在[https://maba.wordpress.com/widgets/](https://maba.wordpress.com/widgets/)上的小部件，在 Mac OS X El Capitan (10.11.4) 上进行了测试。

以下是步骤：

首先，您需要一个“开发者 ID 应用程序”类型的生产开发者 ID。确保它已导入您的钥匙串。还要注意它的名字。通常它类似于*"Developer ID Application: Your Name"*。

现在，使用 codesign 工具在命令行上为您的小部件签名，如下所示：

```
codesign -f -s "Developer ID Application: Your Name" /Path/to/YourWidget.wdgt 
```

您可能需要使用 spctl 工具进行验证：

```
spctl -a -vvvv /Path/to/YourWidget.wdgt 
```

输出应如下所示：

```
/Path/to/YourWidget.wdgt: accepted
source=Developer ID
origin=Developer ID Application: Your Name (XXXXXXXXX) 
```

（答案是我原来的答案的副本：[https](https://forums.developer.apple.com/message/140973) ://forums.developer.apple.com/message/140973 ）