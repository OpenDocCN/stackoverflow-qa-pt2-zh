# StackOverflow 问答 14110000-14110999

# java - 将特定函数调用记录到特定日志

> ID：14110000
> 
> 赞同：0
> 
> 时间：2013-01-01T11:24:32.827
> 
> 标签：java, logging, log4j

我有一个 Java 服务器（基于 Java 的 Socket.IO，但这不是问题的一部分），它接受来自 Web 客户端的请求，进行一些计算，然后将结果发回。

服务器使用一些库，这些库使用 log4j 进行日志记录。

由于计算很长，我想发送给客户，不仅是最终结果，还有日志。

当然，我想发送每个客户端，只发送与其请求相关的日志行。

所以，我的问题是：如何配置 log4j，以便在特定函数调用期间生成的所有日志都转到特定记录器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T11:46:45.193

是的，有可能。首先，您需要熟悉 MDC（映射诊断上下文）的概念 - 基本上它是一个用于存储内容的每个线程的日志记录上下文（读取 - 哈希图）。log4j 可以配置为根据 MDC 值将日志输出发送到不同的目的地 - 因此您可以将每个用户的日志输出发送到以用户命名的文件。因此，您要做的是在开始长操作时在 MDC 中设置用户名（或某些标识符），所有操作的日志记录都将进入特定位置（文件，取决于配置的记录器），然后清除 MDC当操作完成时。

[这里](http://veerasundar.com/blog/2009/10/log4j-mdc-mapped-diagnostic-context-what-and-why/)和[这里](http://veerasundar.com/blog/2009/11/log4j-mdc-mapped-diagnostic-context-example-code/)有一个两部分的使用 MDC 的教程。
理想情况下，我也会为此目的编写自己的 log4j 记录器，如此处所建议的：[在 log4j 中使用 MDC 动态命名日志文件](https://stackoverflow.com/questions/7992473/using-mdc-in-log4j-to-dynamically-name-the-log-file)

# php - XMPP for PHP（怎么做）

> ID：14110001
> 
> 赞同：0
> 
> 时间：2013-01-01T11:24:33.920
> 
> 标签：php, xmpp

**首先，我将概述我的问题。**

我想做的是创建一个网站。当客户端连接时，每隔一秒左右，他就会广播一个数字。

这是由网站上的每个人完成的。

所以每一秒每个客户都会收到其他客户的号码。

**我的解决方案（目前没有意义）**

我曾想过使用 XMPP 和 OpenFire 服务器来执行此操作，但我似乎无法使其与 PHP 一起使用。

**最后的问题**

1.  有没有比我概述的更好的方法来解决我的问题？另一个potocol或什么？

2.  有什么东西可以很好地与 OpenFire 配合使用吗

我已经看过这些

[http://code.google.com/p/xmpphp/](http://code.google.com/p/xmpphp/)

[https://github.com/tong/hxmpp/](https://github.com/tong/hxmpp/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:25:45.910

新年快乐，

XMPP 是处理通知问题的最常用方法，但是您可以使用一种不太繁重的方法（技术）来处理您的问题，即[Pushlets](http://xanjax.org/#servpush.xml)，并且可以肯定的是前面的链接不是唯一的。Pushlets 区域基于 servlet 的机制，其中数据直接从服务器端推送到客户端浏览器内的（动态）HTML 页面。这允许服务器定期更新网页。并确保它比 XMPP 轻得多。

您也可以将它与 Java 服务器端一起使用，例如[Here](http://www.pushlets.com/)，这会给您一些新的想法。

无论如何，如果您有一个拥有大量用户的 Web 应用程序，那么您必须三思而后行。并确保 XMPP 为您提供了对许多请求的大量控制功能。当 pushlet 足以进行广播时。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T19:24:13.363

阅读此[http://belski.net/archives/37-Phurple-for-PHP-5.3-and-up.html](http://belski.net/archives/37-Phurple-for-PHP-5.3-and-up.html)

您可以使用 phurple 扩展使其与 PHP+XMPP 一起使用。它适用于作为 Pidgin 基础的 libpurple。这将使您也能够使用许多其他协议，XMPP 已经支持 Facebook、Google 和任何其他基于 XMPP 的协议。

# c++ - 在 vc++ 中构建 mpir-2.6.0 库后找不到 mpirxx.h

> ID：14110004
> 
> 赞同：0
> 
> 时间：2013-01-01T11:24:37.693
> 
> 标签：c++, visual-c++, visual-studio-2012, gmp

我需要将`mpir-2.6.0`库与`visual c++ 2010`. 我的代码将使用 c++。

我提取了两个文件夹（`mpir-2.6.0`和`vsyasm-1.2.0-win32`）。然后，我复制了文件夹的内容`vsyasm-1.2.0-win32`（包括`vsyasm.exe`将其重命名为`yasm.exe`并放入：`C:\Program Files\Microsoft Visual Studio 11.0\VC\bin\`。然后，我打开了项目：`mpir.sln`放置在：`\mpir-2.6.0\build.vc10`。然后，我将项目配置更改为：`Release`。

当我尝试构建整个解决方案时，会遇到很多错误，例如：

```
error C1020: unexpected #endif  c:\proj\mpir-2.6.0\mpir-2.6.0\mpir.h    4   1   lib_mpir_gc
error C1020: unexpected #endif  c:\proj\mpir-2.6.0\mpir-2.6.0\mpir.h    4   1   lib_mpir_gc
error C1020: unexpected #endif  c:\proj\mpir-2.6.0\mpir-2.6.0\mpir.h    4   1   lib_mpir_gc 
```

但是当我单独构建每个库时，它是成功的。

构建后，我去了：`\mpir-2.6.0\build.vc10\Win32\Release` 并找到文件：

```
mpir.lib
mpirxx.lib
mpir.pdb
mpirxx.pdb 
```

但我找不到文件：

```
mpir.h
mpirxx.h 
```

我需要将它们复制到 Visual Studio 包含文件中。

我对这些配置的主要来源是：[http](http://www.exploringbinary.com/how-to-install-and-run-gmp-on-windows-using-mpir/) ://www.exploringbinary.com/how-to-install-and-run-gmp-on-windows-using-mpir/ （但这是针对旧版本的库和伊萨姆）。我不明白这些错误的原因。我能够使用旧版本配置库。但我需要升级，因为图书馆有改进，而我的图书馆很旧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:10:08.107

输出文件现在位于 mpir\lib\Win32\Release 或 mpir\dll\Win32\Release 中。

为您的 CPU 专门构建 MPIR 的推荐方法是首先运行位于 build.vc10 目录中的 mpir_config.py。mpir_config.py 将提示您提供 CPU 选项列表。那么当你打开 mpir.sln 时，你应该只为特定的 CPU 编译代码。然后编译 C++ 包装器（即先编译 lib_mpir_p3，然后编译 lib_mpir_cxx）。

编辑：我刚刚注意到您原始帖子中的另一个错误。您需要将目录“mpir-2.6.0”重命名为“mpir”。目录布局需要是“<>\mpir\build.vc10”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T04:49:19.587

我在使用 MPIR 2.6.0 和 VS 2012 时遇到了同样的问题。我为使 MPIR 工作所做的工作是构建 lib_gc 和 lib_cxx，两者都使用 win32 和发布模式。因为我的 c++ 应用程序是 win32 控制台，所以它工作得很好。

因为我的 windows 是 64，我以为我必须构建 64 版本，但结果我错了。

# c# - 字节数组的 Base-N 编码

> ID：14110010
> 
> 赞同：4
> 
> 时间：2013-01-01T11:25:42.970
> 
> 标签：c#, algorithm, encoding, bit-manipulation, radix

几天前，我遇到了[这个 CodeReview](https://codereview.stackexchange.com/questions/14084/base-36-encoding-of-a-byte-array/) for Base-36 encoding a byte array。但是，随后的答案没有涉及解码回字节数组，或者可能重用答案来执行不同基数（基数）的编码。

链接问题的答案使用 BigInteger。因此，就实现而言，可以对基数及其数字进行参数化。

不过，BigInteger 的问题在于我们将输入视为假定的整数。然而，我们的输入，一个字节数组，只是一系列不透明的值。

*   如果字节数组以一系列零字节结尾，例如 {0xFF,0x7F,0x00,0x00}，则在答案中使用算法时这些字节将丢失（仅编码 {0xFF,0x7F}。
*   如果最后一个非零字节设置了符号位，则使用前面的零字节，因为它被视为 BigInt 的符号分隔符。所以 {0xFF,0xFF,0x00,0x00} 只会编码为 {0xFF,0xFF,0x00}。

*.NET 程序员如何使用 BigInteger 创建一个相当高效且与基数无关的编码器，具有解码支持，以及处理字节序的能力，以及“解决”丢失的结尾零字节的能力？*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T11:35:24.230

**编辑**[2020/01/26]：FWIW，[下面的代码](https://github.com/KornnerStudios/KSoft/blob/master/KSoft/Text/RadixEncoding.cs)及其[单元测试](https://github.com/KornnerStudios/KSoft/blob/master/Test.KSoft.BCL/Text/RadixEncodingTest.cs)与我[在 Github 上的开源库一起](https://github.com/KornnerStudios/Vita)存在。

**编辑**[2016/04/19]：如果您喜欢异常，您可能希望将一些 Decode 实现代码更改为 throw`InvalidDataException`而不是仅返回 null。

**编辑**[2014/09/14]：我在 Encode() 中添加了一个“HACK”来处理输入中最后一个字节被签名的情况（如果你要转换为 sbyte）。我现在能想到的唯一明智的解决方案就是将数组大小调整为一个。此案例的其他单元测试通过了，但我没有重新运行 perf 代码来解决这种情况。如果您能提供帮助，请始终让您对 Encode() 的输入在末尾包含一个虚拟 0 字节，以避免额外的分配。

## 用法

我创建了一个 RadixEncoding 类（在“代码”部分中找到），它使用三个参数进行初始化：

1.  作为字符串的基数（长度当然决定了实际的基数），
2.  输入字节数组的假定字节顺序（endian），
3.  以及用户是否希望编码/解码逻辑确认结束零字节。

要创建一个 Base-36 编码，使用 little-endian 输入，并考虑到结束零字节：

```
const string k_base36_digits = "0123456789abcdefghijklmnopqrstuvwxyz";
var base36_no_zeros = new RadixEncoding(k_base36_digits, EndianFormat.Little, false); 
```

然后实际执行编码/解码：

```
const string k_input = "A test 1234";
byte[] input_bytes = System.Text.Encoding.UTF8.GetBytes(k_input);
string encoded_string = base36_no_zeros.Encode(input_bytes);
byte[] decoded_bytes = base36_no_zeros.Decode(encoded_string); 
```

## 表现

使用 Diagnostics.Stopwatch 计时，在 i7 860 @2.80GHz 上运行。Timing EXE 自己运行，而不是在调试器下运行。

使用上面相同的**k_base36_digits**字符串 EndianFormat.Little 初始化编码，并**确认结束零字节**（即使 UTF8 字节没有任何额外的结束零字节）

将“A test 1234”的 UTF8 字节编码 1,000,000 次需要 2.6567905 秒
解码相同的字符串相同的次数需要 3.3916248 秒

对“A test 1234\. Made稍大！”的UTF8字节进行编码。100,000 次需要 1.1577325 秒
要解码相同的字符串，相同的次数需要 1.244326 秒

## 代码

如果您没有[CodeContracts 生成器](http://research.microsoft.com/en-us/projects/contracts/)，则必须使用 if/throw 代码重新实现合同。

```
using System;
using System.Collections.Generic;
using System.Numerics;
using Contract = System.Diagnostics.Contracts.Contract;

public enum EndianFormat
{
    /// <summary>Least Significant Bit order (lsb)</summary>
    /// <remarks>Right-to-Left</remarks>
    /// <see cref="BitConverter.IsLittleEndian"/>
    Little,
    /// <summary>Most Significant Bit order (msb)</summary>
    /// <remarks>Left-to-Right</remarks>
    Big,
};

/// <summary>Encodes/decodes bytes to/from a string</summary>
/// <remarks>
/// Encoded string is always in big-endian ordering
/// 
/// <p>Encode and Decode take a <b>includeProceedingZeros</b> parameter which acts as a work-around
/// for an edge case with our BigInteger implementation.
/// MSDN says BigInteger byte arrays are in LSB->MSB ordering. So a byte buffer with zeros at the 
/// end will have those zeros ignored in the resulting encoded radix string.
/// If such a loss in precision absolutely cannot occur pass true to <b>includeProceedingZeros</b>
/// and for a tiny bit of extra processing it will handle the padding of zero digits (encoding)
/// or bytes (decoding).</p>
/// <p>Note: doing this for decoding <b>may</b> add an extra byte more than what was originally 
/// given to Encode.</p>
/// </remarks>
// Based on the answers from http://codereview.stackexchange.com/questions/14084/base-36-encoding-of-a-byte-array/
public class RadixEncoding
{
    const int kByteBitCount = 8;

    readonly string kDigits;
    readonly double kBitsPerDigit;
    readonly BigInteger kRadixBig;
    readonly EndianFormat kEndian;
    readonly bool kIncludeProceedingZeros;

    /// <summary>Numerial base of this encoding</summary>
    public int Radix { get { return kDigits.Length; } }
    /// <summary>Endian ordering of bytes input to Encode and output by Decode</summary>
    public EndianFormat Endian { get { return kEndian; } }
    /// <summary>True if we want ending zero bytes to be encoded</summary>
    public bool IncludeProceedingZeros { get { return kIncludeProceedingZeros; } }

    public override string ToString()
    {
        return string.Format("Base-{0} {1}", Radix.ToString(), kDigits);
    }

    /// <summary>Create a radix encoder using the given characters as the digits in the radix</summary>
    /// <param name="digits">Digits to use for the radix-encoded string</param>
    /// <param name="bytesEndian">Endian ordering of bytes input to Encode and output by Decode</param>
    /// <param name="includeProceedingZeros">True if we want ending zero bytes to be encoded</param>
    public RadixEncoding(string digits,
        EndianFormat bytesEndian = EndianFormat.Little, bool includeProceedingZeros = false)
    {
        Contract.Requires<ArgumentNullException>(digits != null);
        int radix = digits.Length;

        kDigits = digits;
        kBitsPerDigit = System.Math.Log(radix, 2);
        kRadixBig = new BigInteger(radix);
        kEndian = bytesEndian;
        kIncludeProceedingZeros = includeProceedingZeros;
    }

    // Number of characters needed for encoding the specified number of bytes
    int EncodingCharsCount(int bytesLength)
    {
        return (int)Math.Ceiling((bytesLength * kByteBitCount) / kBitsPerDigit);
    }
    // Number of bytes needed to decoding the specified number of characters
    int DecodingBytesCount(int charsCount)
    {
        return (int)Math.Ceiling((charsCount * kBitsPerDigit) / kByteBitCount);
    }

    /// <summary>Encode a byte array into a radix-encoded string</summary>
    /// <param name="bytes">byte array to encode</param>
    /// <returns>The bytes in encoded into a radix-encoded string</returns>
    /// <remarks>If <paramref name="bytes"/> is zero length, returns an empty string</remarks>
    public string Encode(byte[] bytes)
    {
        Contract.Requires<ArgumentNullException>(bytes != null);
        Contract.Ensures(Contract.Result<string>() != null);

        // Don't really have to do this, our code will build this result (empty string),
        // but why not catch the condition before doing work?
        if (bytes.Length == 0) return string.Empty;

        // if the array ends with zeros, having the capacity set to this will help us know how much
        // 'padding' we will need to add
        int result_length = EncodingCharsCount(bytes.Length);
        // List<> has a(n in-place) Reverse method. StringBuilder doesn't. That's why.
        var result = new List<char>(result_length);

        // HACK: BigInteger uses the last byte as the 'sign' byte. If that byte's MSB is set, 
        // we need to pad the input with an extra 0 (ie, make it positive)
        if ( (bytes[bytes.Length-1] & 0x80) == 0x80 )
            Array.Resize(ref bytes, bytes.Length+1);

        var dividend = new BigInteger(bytes);
        // IsZero's computation is less complex than evaluating "dividend > 0"
        // which invokes BigInteger.CompareTo(BigInteger)
        while (!dividend.IsZero)
        {
            BigInteger remainder;
            dividend = BigInteger.DivRem(dividend, kRadixBig, out remainder);
            int digit_index = System.Math.Abs((int)remainder);
            result.Add(kDigits[digit_index]);
        }

        if (kIncludeProceedingZeros)
            for (int x = result.Count; x < result.Capacity; x++)
                result.Add(kDigits[0]); // pad with the character that represents 'zero'

        // orientate the characters in big-endian ordering
        if (kEndian == EndianFormat.Little)
            result.Reverse();
        // If we didn't end up adding padding, ToArray will end up returning a TrimExcess'd array, 
        // so nothing wasted
        return new string(result.ToArray());
    }

    void DecodeImplPadResult(ref byte[] result, int padCount)
    {
        if (padCount > 0)
        {
            int new_length = result.Length + DecodingBytesCount(padCount);
            Array.Resize(ref result, new_length); // new bytes will be zero, just the way we want it
        }
    }
    #region Decode (Little Endian)
    byte[] DecodeImpl(string chars, int startIndex = 0)
    {
        var bi = new BigInteger();
        for (int x = startIndex; x < chars.Length; x++)
        {
            int i = kDigits.IndexOf(chars[x]);
            if (i < 0) return null; // invalid character
            bi *= kRadixBig;
            bi += i;
        }

        return bi.ToByteArray();
    }
    byte[] DecodeImplWithPadding(string chars)
    {
        int pad_count = 0;
        for (int x = 0; x < chars.Length; x++, pad_count++)
            if (chars[x] != kDigits[0]) break;

        var result = DecodeImpl(chars, pad_count);
        DecodeImplPadResult(ref result, pad_count);

        return result;
    }
    #endregion
    #region Decode (Big Endian)
    byte[] DecodeImplReversed(string chars, int startIndex = 0)
    {
        var bi = new BigInteger();
        for (int x = (chars.Length-1)-startIndex; x >= 0; x--)
        {
            int i = kDigits.IndexOf(chars[x]);
            if (i < 0) return null; // invalid character
            bi *= kRadixBig;
            bi += i;
        }

        return bi.ToByteArray();
    }
    byte[] DecodeImplReversedWithPadding(string chars)
    {
        int pad_count = 0;
        for (int x = chars.Length - 1; x >= 0; x--, pad_count++)
            if (chars[x] != kDigits[0]) break;

        var result = DecodeImplReversed(chars, pad_count);
        DecodeImplPadResult(ref result, pad_count);

        return result;
    }
    #endregion
    /// <summary>Decode a radix-encoded string into a byte array</summary>
    /// <param name="radixChars">radix string</param>
    /// <returns>The decoded bytes, or null if an invalid character is encountered</returns>
    /// <remarks>
    /// If <paramref name="radixChars"/> is an empty string, returns a zero length array
    /// 
    /// Using <paramref name="IncludeProceedingZeros"/> has the potential to return a buffer with an
    /// additional zero byte that wasn't in the input. So a 4 byte buffer was encoded, this could end up
    /// returning a 5 byte buffer, with the extra byte being null.
    /// </remarks>
    public byte[] Decode(string radixChars)
    {
        Contract.Requires<ArgumentNullException>(radixChars != null);

        if (kEndian == EndianFormat.Big)
            return kIncludeProceedingZeros ? DecodeImplReversedWithPadding(radixChars) : DecodeImplReversed(radixChars);
        else
            return kIncludeProceedingZeros ? DecodeImplWithPadding(radixChars) : DecodeImpl(radixChars);
    }
}; 
```

## 基本单元测试

```
using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;

static bool ArraysCompareN<T>(T[] input, T[] output)
    where T : IEquatable<T>
{
    if (output.Length < input.Length) return false;
    for (int x = 0; x < input.Length; x++)
        if(!output[x].Equals(input[x])) return false;

    return true;
}
static bool RadixEncodingTest(RadixEncoding encoding, byte[] bytes)
{
    string encoded = encoding.Encode(bytes);
    byte[] decoded = encoding.Decode(encoded);

    return ArraysCompareN(bytes, decoded);
}
[TestMethod]
public void TestRadixEncoding()
{
    const string k_base36_digits = "0123456789abcdefghijklmnopqrstuvwxyz";
    var base36 = new RadixEncoding(k_base36_digits, EndianFormat.Little, true);
    var base36_no_zeros = new RadixEncoding(k_base36_digits, EndianFormat.Little, true);

    byte[] ends_with_zero_neg = { 0xFF, 0xFF, 0x00, 0x00 };
    byte[] ends_with_zero_pos = { 0xFF, 0x7F, 0x00, 0x00 };
    byte[] text = System.Text.Encoding.ASCII.GetBytes("A test 1234");

    Assert.IsTrue(RadixEncodingTest(base36, ends_with_zero_neg));
    Assert.IsTrue(RadixEncodingTest(base36, ends_with_zero_pos));
    Assert.IsTrue(RadixEncodingTest(base36_no_zeros, text));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-04T11:54:19.450

有趣的是，我能够将 Kornman 的技术移植到 Java 中，并获得了包括 base36 在内的预期输出。而在运行他的时候？使用 C:\Windows\Microsoft.NET\Framework\v4.0.30319 csc 来自 c# 的代码，输出不符合预期。

例如，尝试使用 Kornman 的 RadixEncoding 编码为下面的字符串“hello world”对获得的 MD5 hashBytes 进行 base16 编码，我可以看到每个字符的两个字节组的字节顺序错误。

而不是 5eb63bbbe01eeed093cb22bb8f5acdc3

我看到了类似 e56bb3bb0ee1....

这是在 Windows 7 上。

```
const string input = "hello world";

public static void Main(string[] args)
{

  using (System.Security.Cryptography.MD5 md5 = System.Security.Cryptography.MD5.Create())
  {
    byte[] inputBytes = System.Text.Encoding.ASCII.GetBytes(input);

    byte[] hashBytes = md5.ComputeHash(inputBytes);

    // Convert the byte array to hexadecimal string
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < hashBytes.Length; i++)
    {
      sb.Append(hashBytes[i].ToString("X2"));
    }
    Console.WriteLine(sb.ToString());
  }
} 
```

Java 代码如下，感兴趣的人可以参考。如上所述，它仅适用于基数 36。

```
private static final char[] BASE16_CHARS = "0123456789abcdef".toCharArray();
private static final BigInteger BIGINT_16 = BigInteger.valueOf(16);

private static final char[] BASE36_CHARS = "0123456789abcdefghijklmnopqrstuvwxyz".toCharArray();
private static final BigInteger BIGINT_36 = BigInteger.valueOf(36);

public static String toBaseX(byte[] bytes, BigInteger base, char[] chars)
{
    if (bytes == null) {
        return null;
    }

    final int bitsPerByte = 8;
    double bitsPerDigit = Math.log(chars.length) / Math.log(2);

    // Number of chars to encode specified bytes
    int size = (int) Math.ceil((bytes.length * bitsPerByte) / bitsPerDigit);

    StringBuilder sb = new StringBuilder(size);

    for (BigInteger value = new BigInteger(bytes); !value.equals(BigInteger.ZERO);) {
        BigInteger[] quotientAndRemainder = value.divideAndRemainder(base);
        sb.insert(0, chars[Math.abs(quotientAndRemainder[1].intValue())]);
        value = quotientAndRemainder[0];
    }

    return sb.toString();
} 
```

# linux - 字符串选择并附加到另一个字符串

> ID：14110014
> 
> 赞同：1
> 
> 时间：2013-01-01T11:26:08.760
> 
> 标签：linux, bash

我有一个文件（FreshPIN.txt），每行包含很多密码；我需要一个 bash 脚本来选择一个引脚，将其打印出来，然后将其从源文件中删除，将其添加到另一个文件的末尾（usedPIN.txt）。

FreshpPIN.txt 就像：

```
========
1111111111111111
2222222222222222
3333333333333333
....
nnnnnnnnnnnnnnnn
======== 
```

在它打印之前，我应该被要求输入一个从 0 到 31 的数字并将该数字放在下面的命令中：

```
at&g**00**=xtd*788*1111111111111111# 
```

在上面的示例中`at&g` ，并且`=xtd*788*`在所有输出命令中都应该是稳定的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:09:30.493

这个怎么样？

```
#!/bin/bash

fresh=FreshpPIN.txt
used=usedPIN.txt
max=31

die() {
    echo >&2 "$@"
    exit 1
}

# Get a random pin
pin=$(sed -n '/[[:digit:]]\+/p' -- "$fresh" | shuf -n1)
[[ "$pin" ]] || die "No more pins in file \`$fresh'"

echo "Pin chosen: $pin"

# Prompt user:
while read -e -r -p "Enter a number between 0 and $max (q to quit): " n; do
   if [[ "$n" = q ]]; then
       echo "Aborting. Pin $pin remains in file \`$fresh'."
       exit 0
   elif [[ "$n" != +([[:digit:]]) ]]; then
      echo "Not a valid number. Try again."
   elif ((10#$n>max)); then
      echo "Number must be between 0 and $max. Try again."
   else
      break
   fi
done

# Guard if read fails (e.g., if user presses Ctrl-D)
[[ "$n" ]] || die "Something went wrong."

# Delete this pin from file
ed -s -- "$fresh" <<EOF
/^$pin\$/d
wq
EOF

# Save pin in file
printf >> "$used" "%s\n" "$pin"

# Output:
printf "at&g**%02d**=xtd*788*%s\n" "$((10#$n))" "$pin" 
```

它非常健壮（用户必须真正输入一个介于 0 和 31 之间的数字，如果用户输入，它不会被弄乱，例如，`09`）。用于`ed`从文件中删除旧引脚`FreshpPIN.txt`：非常有效（没有使用辅助文件或丑陋的东西`sed -i`）。总体上使用良好的 bash 实践。用于`shuf`获取随机引脚（不需要计算行数和破解丑陋的东西来获得随机引脚）。`sed`用于从文件中仅选择引脚`FreshpPIN.txt`，因此您可以将标题、评论等留在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T11:37:26.883

```
fresh=FreshPIN.txt
used=usedPin.txt
echo "Please key in"
read key
pin=`head -1 "$fresh"`
printf '%s\n' "$pin" >>"$used"
sed -i~ 1d "$fresh"
printf 'at&g%s=xtd*788*%s\n' "$key" "$pin" 
```

# ruby - 使用非单词字符正则表达式拆分字符串时的奇怪行为

> ID：14110023
> 
> 赞同：3
> 
> 时间：2013-01-01T11:27:34.637
> 
> 标签：ruby, regex, ruby-on-rails-3

**案例一（尾随空间）**

```
> "on behalf of all of us  ".split(/\W+/)
 => ["on", "behalf", "of", "all", "of", "us"] 
```

但是如果有前导空格，那么它会给出以下内容

**案例2（领先空间）**

```
> "  on behalf of all of us".split(/\W+/)
 => ["", "on", "behalf", "of", "all", "of", "us"] 
```

我也期待案例 2 的案例 1 的结果。

**添加**

```
> "@dhh congratulations!!".split(/\W+/)
 => ["", "dhh", "congratulations"] 
```

有人可以帮我理解这种行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T11:39:32.597

**[更新]**

跳过正则表达式，只需在空间上拆分！

```
> "@dhh congratulations!!".split
 => ["@dhh", "congratulations"] 
```

* * *

`\W`匹配**任何**非单词字符，包括空格。所以解析器在开始时看到一个空格，在空格之后看到一些字符；它分裂。但是，如果它最后的空格，则没有其他冗长的字符`[a-zA-Z0-9]`可供分割。

`#strip`要获得一致的行为，您应该使用方法删除空格。

**案例一（尾随空间）**

```
1.9.3p327 :007 > " on behalf of all of us ".strip.split(/\W+/) 
 => ["on", "behalf", "of", "all", "of", "us"] 
```

**案例2（领先空间）**

```
1.9.3p327 :008 > "on behalf of all of us ".strip.split(/\W+/) 
 => ["on", "behalf", "of", "all", "of", "us"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:14:27.107

从[文档](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-split)：

> **split(pattern=$;, [limit]) → anArray**
> 
> [...] 如果省略了 limit 参数，则会抑制尾随的空字段。如果 limit 是一个正数，最多将返回该数量的字段（如果 limit 为 1，则整个字符串作为数组中的唯一条目返回）。如果为负数，则返回的字段数没有限制，并且不抑制尾随的空字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T06:11:04.813

仅用于文档，以下对我有用

```
 " @dhh congratulations!!".gsub(/^\W+/,'').split /\W+/ 
```

另一个

```
 " @dhh congratulations!!".scan /\w+/ 
```

两者都给出了预期的结果。但是，对于简短的形式有一个警告，例如

```
 > " Don't be shy.".scan /\w+/
 => ["Don", "t", "be", "shy"] 
```

我实际上正在收集不是冠词、连词、介词等的单词。所以无论如何我都忽略了这些简短的形式，因此我使用了这个解决方案。

我正在准备推文中的词云。如果您知道任何经过验证的算法，请分享。

# python - 在 Python 中导入 nltk 包时出现问题

> ID：14110030
> 
> 赞同：2
> 
> 时间：2013-01-01T11:28:39.753
> 
> 标签：python, python-2.7, syntax-error, nltk, python-import

当我输入

```
import nltk 
```

在 Python 解释器中，它给了我这个——

```
>>> import nltk
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/nltk/__init__.py", line 105, in <module>
    from collocations import *
  File "/usr/local/lib/python2.7/dist-packages/nltk/collocations.py", line 38, in <module>
    from nltk.metrics import ContingencyMeasures, BigramAssocMeasures, TrigramAssocMeasures
  File "/usr/local/lib/python2.7/dist-packages/nltk/metrics/__init__.py", line 16, in <module>
    from nltk.metrics.scores import          (accuracy, precision, recall, f_measure,
  File "/usr/local/lib/python2.7/dist-packages/nltk/metrics/scores.py", line 16, in <module>
    from scipy.stats.stats import betai
  File "/usr/lib/python2.7/dist-packages/scipy/stats/__init__.py", line 7, in <module>
    from stats import *
  File "/usr/lib/python2.7/dist-packages/scipy/stats/stats.py", line 198, in <module>
    import distributions
  File "/usr/lib/python2.7/dist-packages/scipy/stats/distributions.py", line 87, in <module>
    from new import instancemethod
  File "new.py", line 3

        ^
IndentationError: expected an indented block 
```

我查看了在 /usr/lib/python2.7/ 中找到的 new.py，发现一切正常。

```
"""Create new objects of various types. 
 Deprecated.This module is no longer required except for backward compatibility.
 Objects of most types can now be created by calling the type object.
"""
from warnings import warnpy3k
warnpy3k("The 'new' module has been removed in Python 3.0; use the 'types' "
            "module instead.", stacklevel=2)
del warnpy3k

from types import ClassType as classobj
from types import FunctionType as function
from types import InstanceType as instance
from types import MethodType as instancemethod
from types import ModuleType as module

from types import CodeType as code 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T11:32:08.817

您有一个*名为*`new.py`. 检查您的当前目录并重命名或删除它。

您可以在回溯中看到这一点：

```
 File "/usr/lib/python2.7/dist-packages/scipy/stats/distributions.py", line 87, in <module>
    from new import instancemethod
  File "new.py", line 3 
```

前面的模块有一个完整的文件路径，但该`new.py`文件没有，使其成为一个本地文件，在`scipy.stats.distributions`.

# regex - 匹配前 n 个单词出现的正则表达式

> ID：14110034
> 
> 赞同：0
> 
> 时间：2013-01-01T11:28:57.703
> 
> 标签：regex

我有一个格式的字符串：

```
word<class> word<class>...
For example:
I<Noun> like<verb> to<Function> eat<verb>... 
```

是否可以使用正则表达式查找每个类出现的前 n 个单词，例如使用正则表达式的前 4 个名词单词。它将输出单词列表。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T11:31:23.177

正则表达式不能用于计数。

所以不 - 您无法使用正则表达式找到前 n 个单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T11:36:23.687

为了完成你正在做的事情，你需要使用词性标注器来对句子中使用的单词进行分类。您可以使用任何一种自然语言处理库来做到这一点。例如。在python中你有pynltk。 [http://answers.oreilly.com/topic/1091-how-to-use-an-nltk-part-of-speech-tagger/](http://answers.oreilly.com/topic/1091-how-to-use-an-nltk-part-of-speech-tagger/)

之后，您需要根据词性对单词进行分组并计算它们。所以完全超出了正则表达式的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T11:47:22.620

您的正则表达式模式是`(\\s|^)([a-zA-Z]+?)<Noun>(\\s|$)`，在每个找到的匹配项中，您应该使用它`$2`来获取结果

在 c# 中，您可以使用以下代码实现此目的：

```
 string type = "Noun";
     int top = 5;

     MatchCollection mc = Regex.Matches("I<Noun> like<verb> to<Function> eat<verb> an apple<Noun>", String.Format("(\\s|^)([a-zA-Z]+?)<{0}>(\\s|$)", type));

     List<string> res = new List<string>();

     for (int i = 0; i < mc.Count && i < top; i++)
     {
        res.Add(mc[i].Result("$2"));
     } 
```

# java - 是否可以在 Joomla 3 CMS 中集成现有的 JSP 页面？

> ID：14110041
> 
> 赞同：2
> 
> 时间：2013-01-01T11:29:54.397
> 
> 标签：java, php, javascript, joomla

> **可能重复：**
> [如何在 PHP 页面中包含 JSP](https://stackoverflow.com/questions/3110312/how-to-include-a-jsp-in-a-php-page)

我有预先开发的`JSP`页面`CSS`和`Javascript`代码。
我想知道：我可以使用这些`Joomla`正在使用`WAMP`服务器的页面吗？
我没有任何选项可以在`Joomla`其中添加任何页面。

# redirect - 301 将脏 URL 重定向到干净 URL

> ID：14110043
> 
> 赞同：2
> 
> 时间：2013-01-01T11:30:02.277
> 
> 标签：redirect, clean-urls

我真的需要一些帮助将脏 URL 重定向到干净的 URL。

肮脏的 URL：生物.php?beast=

清洁网址：/mythical-creature/

目前我的 .htaccess 看起来像这样：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^mythicalcreatureslist.com [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{HTTP_HOST} ^www.mythbeasts.com [NC]
RewriteRule ^(.*)$ http://www.mythicalcreatureslist.com/$1 [L,R=301]

RewriteRule ^menu/([A-Za-z0-9-+]+)/?$  menu.php?menu=$1  [NC,L]
RewriteRule ^menu_two/([A-Za-z0-9-+]+)/?$  menu_two.php?menu=$1 [NC,L]

RewriteRule ^mythical-creature/([A-Za-z0-9-+\'%]+)/?$  creature.php?beast=$1  [NC,L] 
```

这样做的目的是使网站在浏览时显示干净的 URL，这很棒。但是，在 URL 栏中键入时，旧的脏 URL 不会重定向。

示例：蒙古死亡蠕虫 [http://www.mythicalcreatureslist.com/creature.php?beast=Mongolian+Death+Worm](http://www.mythicalcreatureslist.com/creature.php?beast=Mongolian+Death+Worm)

我希望它重定向到： [http ://www.mythicalcreatureslist.com/mythical-creature/Mongolian+Death+Worm](http://www.mythicalcreatureslist.com/mythical-creature/Mongolian+Death+Worm)

这会导致重复的内容。我努力了：

```
RewriteRule ^/mythical-creature/([A-Za-z0-9-+\'%]+)/?$  http://www.mythicalcreatureslist.com/creature.php?beast=$1 [R=301,NC,L] 
```

但这样做是导致肮脏的一直被使用。

然后我把它翻过来：

```
RewriteRule  ^creature.php?beast=([A-Za-z0-9-+\'%]+)/?$ http://www.mythicalcreatureslist.com/mythical-creature/$1  [R=301,NC,L] 
```

但这只是在浏览时导致 404，并且在地址栏中键入时仍然没有重定向旧的脏 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:35:09.470

正则表达式与空查询参数值不匹配。将 + 翻转为 *

```
RewriteRule ^/creature.php?beast=([A-Za-z0-9-+\'%]*)/?$ http:// www.mythicalcreatureslist.com/mythical-creature/$1 [R=301,NC,L] 
```

请注意还添加了前导斜杠

# android - 调用 web 服务时如何使用土耳其字符？

> ID：14110059
> 
> 赞同：0
> 
> 时间：2013-01-01T11:32:41.103
> 
> 标签：android, web-services, utf-8

我在android上开发了我自己的soap web服务方法。但是当我使用土耳其字符时，会导致一些问题。Web 服务返回空响应。我该怎么办？你可以在这里查看我的功能[为什么 webservice 不能手动工作？](https://stackoverflow.com/questions/14080334/why-doesnt-webservice-work-manually)

我也用

```
charEncoding = "utf-8";
version = "1.0";
contentType = "text/xml; charset=utf-8"; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-01T11:42:01.817

我已经解决了我的问题。我使用“iso-8859-9”字符编码而不是“utf-8”，现在它可以完美运行了。

# python - 我可以在 Tkinter 中为更改事件注册回调吗？

> ID：14110060
> 
> 赞同：1
> 
> 时间：2013-01-01T11:32:44.330
> 
> 标签：python, tkinter

编码，

```
from Tkinter import *

master = Tk()
Label(master, text="Current Age: ").grid(row=0, column=0)
current = StringVar(master)
current.set("0")

coption = OptionMenu(master, current, *[str(i) for i in range(95)])
coption.grid(row=0,column=1)

Label(master, text="Target Age: ").grid(row=1, column=0)

target = StringVar(master)
target.set("0") # default deger

toption = OptionMenu(master, target, *[str(i) for i in range(95)])
toption.grid(row=1,column=1)

mainloop() 
```

我有 2 个组合框，一个用于当前年龄，一个用于目标年龄。我希望目标年龄仅包含高于当前年龄的值。因此，我认为我需要以某种方式注册更改回调。我搜索了谷歌，但它没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T13:49:20.227

在这里，您具有修改目标菜单选项和触发它的事件的功能：

```
def changed(*args):
    start = current.get()
    print(start)
    menu = toption["menu"]
    menu.delete(0, END)
    for age in range(int(start), 95):
        menu.add_command(label=age,
                         command=lambda v=target, l=age: v.set(l))                
    target.set(start)

current.trace('w', changed) 
```

这部分来自[这里](https://stackoverflow.com/questions/7393430/how-can-i-dynamic-populate-an-option-widget-in-tkinter-depending-on-a-choice-fro)、[这里](http://mail.python.org/pipermail/tutor/2005-July/040018.html)和[这里](http://mail.python.org/pipermail/tkinter-discuss/2006-October/000928.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:57:47.173

应该清楚的`OptionMenu`是，对于这种情况，这是一个糟糕的选择，没有人喜欢在 95 个条目的菜单中选择一个选项。无论如何，您不需要依赖 Tcl 变量跟踪来进行更新，只需记住接受的`command`参数即可`OptionMenu`。使用它，您的问题解决如下：

```
import Tkinter

AGELIMIT = 95
AGEOPT = [str(i) for i in range(AGELIMIT)]

def update_agelist(currage):
    # Rewrite the Menubutton associated with the Optionmenu.
    menu = toption['menu']
    menu.delete(0, 'end')
    for age in range(int(currage), AGELIMIT):
        menu.add_command(label=age, command=Tkinter._setit(target, age))

    target.set(currage)

master = Tkinter.Tk()
Tkinter.Label(text=u"Current Age: ").grid(row=0, column=0)

current = Tkinter.StringVar(value='0')
coption = Tkinter.OptionMenu(master, current, *AGEOPT, command=update_agelist)
coption.grid(row=0,column=1)

Tkinter.Label(text=u"Target Age: ").grid(row=1, column=0)

target = Tkinter.StringVar(value='0')
toption = Tkinter.OptionMenu(master, target, *AGEOPT)
toption.grid(row=1, column=1)

master.mainloop() 
```

# mysql - codeigniter 中的活动记录

> ID：14110064
> 
> 赞同：2
> 
> 时间：2013-01-01T11:34:01.690
> 
> 标签：mysql, codeigniter, activerecord, php

任何人都可以将此查询转换为活动记录codeigniter？？？

```
 SELECT  b.name,
    SUM(CASE WHEN c.size = 'S' THEN 1 ELSE 0 END) S,
    SUM(CASE WHEN c.size = 'M' THEN 1 ELSE 0 END) M,
    SUM(CASE WHEN c.size = 'L' THEN 1 ELSE 0 END) L,
    SUM(CASE WHEN c.size = 'XL' THEN 1 ELSE 0 END) XL
   FROM    orderTB a
    INNER JOIN productTB b
        ON a.id_product = b.id_shirt
    INNER JOIN sizeTB c
        ON a.id_size = c.id_size
GROUP BY b.name 
```

我试过这样

```
 function get()
 {
  $this->db->select("b.name,SUM(CASE WHEN c.size ='S' THEN 1 ELSE 0 END) as S,SUM(CASE    WHEN c.size = 'M' THEN 1 ELSE 0 END) as M,SUM(CASE WHEN c.size = 'L' THEN 1 ELSE 0 END) as   L,SUM(CASE WHEN c.size = 'XL' THEN 1 ELSE 0 END) as XL");

 $this->db->from('order');
 $this->db->join('ukuran','order.id_size=ukuran.id_size');
 $this->db->where('date',$date);
 return $this->db->get();
 } 
```

但它错了

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T11:50:39.697

试试这个，然后告诉我，

```
$this->db->select("b.name,SUM(CASE WHEN c.size = 'S' THEN 1 ELSE 0 END) S,SUM(CASE WHEN c.size = 'M' THEN 1 ELSE 0 END) M,SUM(CASE WHEN c.size = 'L' THEN 1 ELSE 0 END) L,SUM(CASE WHEN c.size = 'XL' THEN 1 ELSE 0 END) XL", FALSE );
$this->db->from('orderTB a');
$this->db->join('productTB b','a.id_product = b.id_shirt','inner');
$this->db->join('sizeTB c','a.id_size = c.id_size','inner');
$this->db->group_by('b.name'); 
```

从[这里的文件](http://ellislab.com/codeigniter/user-guide/database/active_record.html#select)

> $this->db->select() 接受可选的第二个参数。如果您将其设置为 FALSE，CodeIgniter 将不会尝试使用反引号保护您的字段或表名。如果您需要复合选择语句，这很有用。

**编辑**

只需添加`FALSE`您的选择语句

```
function get() {
    $this->db->select("b.name,SUM(CASE WHEN c.size ='S' THEN 1 ELSE 0 END) as S,SUM(CASE    WHEN c.size = 'M' THEN 1 ELSE 0 END) as M,SUM(CASE WHEN c.size = 'L' THEN 1 ELSE 0 END) as   L,SUM(CASE WHEN c.size = 'XL' THEN 1 ELSE 0 END) as XL",FALSE);

    $this->db->from('order');
    $this->db->join('ukuran','order.id_size=ukuran.id_size');
    $this->db->where('date',$date);
    return $this->db->get();
} 
```

# android - 在 Android 中存储和检索 SQLite 数据库值

> ID：14110067
> 
> 赞同：0
> 
> 时间：2013-01-01T11:34:55.733
> 
> 标签：android, database, insert, android-sqlite

我正在尝试将值保存在 Android 中的 SQLite DB 中，但出现错误...下面的链接上附有快照

[https://www.dropbox.com/s/bb71am98riscutn/aa.png](https://www.dropbox.com/s/bb71am98riscutn/aa.png)

这是我尝试保存在数据库中的方法

```
long chk = 0;
SQLiteDatabase db1 = userInstance.getWritableDatabase();
ContentValues values = new ContentValues();

for (int i = 0; i < p; i++) // p is the max limit  
{ 
    values.put(manageAppDBHelper.DBAppName[i], AppName[i]); // manageAppDBHelper
                                                            // is a
                                                            // class
}

chk = db1.insert(manageAppDBHelper.TABLE2, null, values);
Log.v("check", chk + "");
if (chk != -1) {
    Toast.makeText(getBaseContext(), "DATABASE updated ... ",
            Toast.LENGTH_LONG).show();
}
db1.close(); // Closing database connection

/** Helper to the database, manages versions and creation */
public class manageAppDBHelper extends SQLiteOpenHelper {
private static final int DATABASE_VERSION = 1;
// Table name
public static final String TABLE2 = "appliances";
private static final String DATABASE_NAME = "mbpto_user8.db";

public static final String[] DBAppName = { "Appliance1", "Appliance2",
        "Appliance3", "Appliance4", "Appliance5", "Appliance6",
        "Appliance7", "Appliance8", "Appliance9", "Appliance10",
        "Appliance11", "Appliance12", "Appliance13", "Appliance14",
        "Appliance15", "Appliance16", "Appliance17", "Appliance18",
        "Appliance19", "Appliance20", "Appliance21", "Appliance22",
        "Appliance23", "Appliance24", "Appliance25", "Appliance26",
        "Appliance27", "Appliance28", "Appliance29", "Appliance30" }; // 30nullvalues

public manageAppDBHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {

    String sql = "create table " + TABLE2 + "( " + BaseColumns._ID
            + " integer primary key autoincrement, " + DBAppName[0]
            + " text not null," + DBAppName[1] + " text not null, "
            + DBAppName[2] + " text not null," + DBAppName[3]
            + " text not null," + DBAppName[4] + " text not null, "
            + DBAppName[5] + " text not null," + DBAppName[6]
            + " text not null," + DBAppName[7] + " text not null, "
            + DBAppName[8] + " text not null," + DBAppName[9]
            + " text not null," + DBAppName[10] + " text not null, "
            + DBAppName[11] + " text not null," + DBAppName[12]
            + " text not null," + DBAppName[13] + " text not null, "
            + DBAppName[14] + " text not null," + DBAppName[15]
            + " text not null," + DBAppName[16] + " text not null, "
            + DBAppName[17] + " text not null," + DBAppName[18]
            + " text not null," + DBAppName[19] + " text not null, "
            + DBAppName[20] + " text not null," + DBAppName[21]
            + " text not null," + DBAppName[22] + " text not null, "
            + DBAppName[23] + " text not null," + DBAppName[24]
            + " text not null," + DBAppName[25] + " text not null, "
            + DBAppName[26] + " text not null," + DBAppName[27]
            + " text not null," + DBAppName[28] + " text not null, "
            + DBAppName[29] + " text not null," + DBAppName[30]
            + " text not null); ";

    Log.d("Updating Appliance Database", "onCreate: " + sql);
    db.execSQL(sql);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    if (oldVersion >= newVersion)
        return;

    String sql = null;
    if (oldVersion == 1)
        sql = "alter table " + TABLE2 + " add note text;";
    if (oldVersion == 2)
        sql = "";

    Log.d("Adding Appliance Database", "onUpgrade   : " + sql);
    if (sql != null)
        db.execSQL(sql);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:15:24.640

当行中的数据发生冲突时，您会遇到插入错误。试试这些并用这些替换你的插入代码::

```
 chk = db1.insertWithOnConflict(manageAppDBHelper.TABLE2, null, values, CONFLICT_IGNORE); 
```

希望这些可能会有所帮助！

# c# - 在 WPF 中，我可以在 2 个按钮之间共享相同的图像资源吗

> ID：14110068
> 
> 赞同：11
> 
> 时间：2013-01-01T11:34:58.927
> 
> 标签：c#, wpf, xaml, resourcedictionary, bitmapsource

我想在 WPF 中创建一个开/关按钮，并且我希望它在用户单击它时更改其外观（如果它是打开的，则切换为关闭，如果它是关闭的，则切换为打开）使用图像。我将要使用的图像添加到资源中：

```
 <Window.Resources>
    <Image x:Key="Off1" Source="/WPFApplication;component/Images/off_button.png" Height="30" Width="70" />
    <Image x:Key="On1" Source="/WPFApplication;component/Images/on_button.png" Height="30" Width="70"/>
 </Window.Resources> 
```

事件代码是，“flag”是一个布尔局部变量，初始化为真：

```
 private void OnOff1Btn_Click(object sender, RoutedEventArgs e)
    {
        if (flag)
        {
            OnOff1Btn.Content = FindResource("Off1");
            flag = false;     
        }
        else
        {
            OnOff1Btn.Content = FindResource("On1");
            flag  = true;
        }
    } 
```

现在我需要创建 2 个开/关按钮，它们的行为相同。当我尝试对第二个按钮使用相同的资源时，我遇到了一个异常：

```
 Specified element is already the logical child of another element. Disconnect it first. 
```

我可以在第二个按钮中使用相同的图像资源，还是必须再次将图像添加为具有不同键的资源？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-11T06:37:56.840

以您的风格将 Shared 设置为 false

```
<StackPanel >
   <StackPanel.Resources>
      <Image x:Key="flag" Source="flag-italy-icon.png" Width="10" x:Shared="false"/>
   </StackPanel.Resources>

   <ContentControl Content="{DynamicResource flag}" />
   <ContentControl Content="{DynamicResource flag}" /> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-01T11:40:23.647

您应该使用[BitmapImage](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.aspx)进行图像共享。

```
<BitmapImage x:Key="Off1" UriSource="/WPFApplication;component/Images/off_button.png" Height="30" Width="70" />
<BitmapImage x:Key="On1" UriSource="/WPFApplication;component/Images/on_button.png" Height="30" Width="70"/> 
```

之后，您可以使用 BitmapImage创建多个[图像](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)

在 XAML 中

```
 <Button ..>
  <Button.Content>
   <Image Source="{StaticResource Off1}" />
  </Button.Content>
 </Button> 
```

在代码中

```
 Image image = new Image();
  image.Source = FindResource("Off1");
  OnOff1Btn.Content = image; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T08:24:00.877

虽然@Tilak 的解决方案绝对是一种方法，但您也可以通过`Style.Triggers`

这是一个例子（假设`Flag`是一个公共财产暴露标志）：

```
<Button Content="{StaticResource On1}">
    <Button.Style>
        <Style>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Flag}" Value="false">
                    <Setter Property="Content" Value="{StaticResource Off1}" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

# c# - 在 Windows 商店应用程序中使用 System.Diagnostics

> ID：14110070
> 
> 赞同：1
> 
> 时间：2013-01-01T11:35:02.177
> 
> 标签：c#, namespaces, windows-store-apps

> **可能重复：**
> [WinRT (C#) 上的 System.Diagnostic.Process 的等价物是什么？](https://stackoverflow.com/questions/12765699/whats-the-equivalent-of-the-system-diagnostic-process-on-winrt-c)

我使用`System.Diagnostics`命名空间来处理 Windows 窗体应用程序中的进程函数。

现在我想知道是否有任何可能的方法可以在 Windows 商店应用程序中使用此功能？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T11:49:10.053

我认为他们不会工作。查看[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/hh441592.aspx)`System.Diagnostics` ，它包含命名空间中可供 Windows 应用商店应用程序使用的所有实体。如果方法/类未在此列出，则您不能使用它。我希望代码甚至不会出现在这些应用程序使用的框架中，以防止通过内省使用它们。

即使您可以调用这些方法，您也很可能会发现它们会由于已设置的安全块而失败，以防止 Windows 应用商店应用程序与桌面交互。

# android - 标题栏不显示图像

> ID：14110076
> 
> 赞同：0
> 
> 时间：2013-01-01T11:36:13.970
> 
> 标签：android, android-layout

我已经编写了一个在标题栏中显示图像和文本的代码。文本显示，但不显示图像。

这是 layout_my_title.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myTitle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:drawableLeft="@drawable/ic_launcher"
    android:padding="5dp"
    android:text="@string/bv_title_string"
    android:textColor="@color/White"
    android:textSize="20sp" /> 
```

这是styles.xml

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="customTitleBackground">
            <item name="android:background">@color/titlebackgroundcolor</item>
    </style>
</resources> 
```

这是themes.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<style name="customTheme" parent="android:Theme">
        <item name="android:windowTitleSize">45dp</item>
        <item name="android:windowTitleBackgroundStyle">@style/customTitleBackground</item>
    </style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:09:20.130

*   在“layout”文件夹中为窗口标题创建自定义布局。

`window_title.xml`

> ```
> <?xml version="1.0" encoding="utf-8"?>
> <LinearLayout
>      xmlns:android="http://schemas.android.com/apk/res/android"
>      android:orientation="horizontal"
>      android:layout_width="fill_parent"
>     android:layout_height="35dip"
>     android:gravity="center_vertical"
>     android:paddingLeft="5dip"
>      android:background="#323331"> 
> <ImageView
>     android:id="@+id/header"
>     android:src="@drawable/header"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"/>
> </LinearLayout> 
> ```

*   在“values”文件夹中创建自定义样式。

`custom_style.xml`

> ```
>  <resources>        
>   <style name="CustomWindowTitleBackground">
>     <item name="android:background">#323331</item>
>   </style>
>   <style name="CustomTheme" parent="android:Theme">
>     <item name="android:windowTitleSize">35dip</item>
>     <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>
> </style> 
> ```

*   在清单文件中应用自定义样式作为主题。 `AndroidManifest.xml`

> ```
> <application android:icon="@drawable/icon" android:label="@string/app_name" android:theme="@style/CustomTheme"> 
> ```

*   在主活动类中应用自定义窗口标题 `CustomWindowTitle.xml`

> ```
> public class CustomWindowTitle extends Activity {
> /** Called when the activity is first created. */
> @Override
> public void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState); 
>     requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
>     setContentView(R.layout.main); 
>     getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);
> }   } 
> ```

我希望这会帮助你。

# file-upload - 为什么extjs表单提交中不调用成功回调？

> ID：14110084
> 
> 赞同：10
> 
> 时间：2013-01-01T11:37:58.037
> 
> 标签：file-upload, extjs, extjs4

我正在尝试使用 Ext JS 表单上传文件，如果成功或失败，请显示适当的消息。但我无法得到想要的结果。我无法使`success`或`failure`回调起作用`form.submit`。

我到目前为止所做的是：

使用此脚本创建表单：

```
new Ext.FormPanel({
    fileUpload: true,
    frame: true,
    url: '/profiler/certificate/update',
    success: function() {
        console.log(arguments);
    },
    failure: function() {
        console.log(arguments);
    }
}).getForm().submit()

​/*
    The response Content-Type is text/html (with charcode=utf8);
    The response JSON is: { "success": true }
*/​​ 
```

`Content-Type`根据[这个 answer](https://stackoverflow.com/a/6227369/811785)设置响应`text/html`。 根据[Ext JS 文档发](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.action.Submit)回适当的 JSON 结果。通过 Fiddler 捕获的响应是：

```
{"success":false} 
```

或者

```
{"success":true} 
```

我什至将响应 Content-Type 设置为`application/json`. 但仍然没有成功。

我已经阅读过类似[this](http://www.sencha.com/forum/showthread.php?111794-Success-handler-not-getting-called-in-file-upload-using-extjs)和[this](https://stackoverflow.com/questions/8053690/extjsdjango-form-submit-success-failure-issue)的链接，但没有一个有帮助。请注意，我还尝试了另一个创建表单的脚本，其中包含一个上传字段和一个保存按钮，并且我在保存按钮的处理程序中提交了表单。但仍然没有触发回调。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-01T13:52:43.997

这是一个工作示例 - Javascript 代码：

```
Ext.onReady(function () {

    Ext.define('ImagePanel', {
        extend: 'Ext.form.Panel',
        fileUpload: true,
        title: 'Upload Panel',
        width: 300,
        height: 100,

        onUpload: function () {
            this.getForm().submit({
                url: 'upload.php',
                scope: this,
                success: function (formPanel, action) {
                    var data = Ext.decode(action.response.responseText);
                    alert("Success: " + data.msg);
                },
                failure: function (formPanel, action) {
                    var data = Ext.decode(action.response.responseText);
                    alert("Failure: " + data.msg);
                }
            });
        },

        initComponent: function () {
            var config = {
                items: [
                    {
                        xtype: 'fileuploadfield',
                        buttonText: 'Upload',
                        name: 'uploadedFile',
                        listeners: {
                            'change': {
                                scope: this,
                                fn: function (field, e) {
                                    this.onUpload();
                                }
                            }
                        }
                    }
                ]
            };

            Ext.apply(this, Ext.apply(this.initialConfig, config));
            this.callParent(arguments);
        }
    });

    var panel = Ext.create('ImagePanel', {
        renderTo: Ext.getBody()
    });
}); 
```

和PHP代码：

```
<?php
if (isset($_FILES)) {
    $temp_file_name = $_FILES['uploadedFile']['tmp_name'];
    $original_file_name = $_FILES['uploadedFile']['name'];

    echo '{"success": true, "msg": "'.$original_file_name.'"}';

} else {
    echo '{"success": false, "msg": "No Files"}';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T15:55:02.757

我也为此苦苦挣扎了一段时间。这是我的代码：

```
Ext.getCmp('media-upload-form').getForm().doAction('submit', {
    url: './services/recordmedia/upload',
    method: 'post',
    waitMsg: 'Please wait...',
    params: {
        entityId: this.entityId,
    },
    failure: function(form, action){
        alert(_('Error uploading file'));
        this.fireEvent('file-upload');
        this.close();
    },
    success: function(form, action){
        this.fireEvent('file-upload');
        this.close();
    },
    scope: this
}) 
```

响应总是被浏览器包裹在 <pre> 标记中，这导致 Extj 库不调用回调。要解决这个问题：

*   确保您的服务器返回正确的 json: {"success":true}
*   确保内容类型设置为 text/html

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-17T15:03:13.980

实际上，Ext.form.Panel 和 Ext.form.Basic 的文档很好地涵盖了这一点。您的代码不起作用的问题是表单面板没有配置选项“成功”、“失败”。您应该将它们放在传递给提交操作的配置对象中。所以你的代码应该是这样的：

```
new Ext.FormPanel({
    fileUpload: true,
    frame: true

}).getForm().submit({
    url: '/profiler/certificate/update',
    success: function() {
        console.log(arguments);
    },
    failure: function() {
        console.log(arguments);
    }
}); 
```

注意区别：在 Ext 4 中，有一个表单组件（Ext.form.Panel），它基本上是一个关注表单外观的视图组件，然后是底层表单类（例如 Ext.form.Basic）与功能。表单提交由 Ext.form.Basic （或您返回的任何内容`form.getForm()`）处理。

# c# - 将 Gridview 的选定行下载到 Excel

> ID：14110085
> 
> 赞同：1
> 
> 时间：2013-01-01T11:38:13.347
> 
> 标签：c#, asp.net, excel

我需要将选定的 asp.net gridview 行下载到 Excel 表中。我正在做的是一次尝试检查全部或仅选择几个，然后在按下下面的下载按钮后，所有选定的行都被下载为 excel。当我按下下载按钮时，一切都在这里正常工作，但是所有行都被下载而忽略了选择。![网格视图示例](../Images/2bc1da03faf45d93d557d2c19852e457.png) 以下是我的代码

```
public void ExportGridToExcel(GridView grdGridView, string fileName)
{
    Response.Clear();

    Response.AddHeader("content-disposition", string.Format("attachment;filename={0}.xls", fileName));
    Response.Charset = "";

    Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);

    Response.ContentType = "application/vnd.xls";

    StringWriter stringWriter = new StringWriter();
    HtmlTextWriter htmlWriter = new HtmlTextWriter(stringWriter);

// I Tried using following (but with no success)
//-----Trial Starts----------------
//foreach (GridViewRow gvr in gvProgramList.Rows)
//    {
//        CheckBox cbox = (CheckBox)gvr.FindControl("cboxSelect");
//        if(cbox.Checked)
//            gvr.Visible = true;
//        else
//            gvr.Visible = false;
//    }
//--------Trial ends---------------
    grdGridView.DataBind();
    ClearControls(grdGridView);

    // Throws exception: Control 'ComputerGrid' of type 'GridView'
    // must be placed inside a form tag with runat=server.
    // ComputerGrid.RenderControl(htmlWrite);

    // Alternate to ComputerGrid.RenderControl above
    System.Web.UI.HtmlControls.HtmlForm form = new System.Web.UI.HtmlControls.HtmlForm();
    Controls.Add(form);

    form.Controls.Add(grdGridView);
    form.RenderControl(htmlWriter);
    Response.Write(stringWriter.ToString());
    Response.End();
    foreach (GridViewRow gvr in gvProgramList.Rows)
    {
        CheckBox cbox = (CheckBox)gvr.FindControl("cboxSelect");
            gvr.Visible = true;
    }
    grdGridView.DataBind();
}

private void ClearControls(Control control)
{
    for (int i = control.Controls.Count - 1; i >= 0; i--)
    {
        ClearControls(control.Controls[i]);
    }

    if (!(control is TableCell))
    {
        if (control.GetType().GetProperty("SelectedItem") != null)
        {
            LiteralControl literal = new LiteralControl();
            control.Parent.Controls.Add(literal);
            try
            {
                literal.Text =
                    (string)control.GetType().GetProperty("SelectedItem").
                        GetValue(control, null);
            }
            catch
            { }
            control.Parent.Controls.Remove(control);
        }
        else if (control.GetType().GetProperty("Text") != null)
        {
            LiteralControl literal = new LiteralControl();
            control.Parent.Controls.Add(literal);
            literal.Text =
                (string)control.GetType().GetProperty("Text").
                    GetValue(control, null);
            control.Parent.Controls.Remove(control);
        }
    }
    return;
}

protected void btnDownload_Click(object sender, EventArgs e)
{
    if (gvProgramList.Rows.Count > 0)
    {
        ExportGridToExcel(gvProgramList, "ProgramList");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:55:11.360

我可以建议你这样做的逻辑：

1.使用您的gridview的选定行创建一个动态数据表。它只是遍历gridview行并将选定的行获取并附加到新的数据表中。

2.然后编写将这个新数据表转换为excel表的代码（谷歌“将数据表转换为excel”的结果很多）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:11:21.007

```
Try like the below code,hope it helps you.. 
```

在下载按钮点击事件上，调用这个 fn

```
private void ExportToExcell()
{       
        DataTable dt = new DataTable();
        dt.Columns.Add("Plan ID");
        dt.Columns.Add("Plan Name");
        dt.Columns.Add("Balance");
        foreach (GridViewRow row in gdvBal.Rows)
        {
            CheckBox chkCalls = (CheckBox)row.FindControl("chkCalls");
            if (chkCalls.Checked == true)
            {
                int i = row.RowIndex;
                Label lblPlanId = (Label)gdvBal.Rows[i].FindControl("lblPlanId");
                Label lblPlanName = (Label)gdvBal.Rows[i].FindControl("lblPlanName");
                Label lblBalance = (Label)gdvBal.Rows[i].FindControl("lblBalance");

                DataRow dr = dt.NewRow();
                dr["Plan ID"] = Convert.ToString(lblPlanId.Text);
                dr["Plan Name"] = Convert.ToString(lblPlanName.Text);
                dr["Balance"] = Convert.ToString(lblBalance.Text);
                dt.Rows.Add(dr);
            }
        }
        GridView gdvExportxls = new GridView();
        gdvExportxls.DataSource = dt;
        gdvExportxls.DataBind();
        Response.Clear();
        Response.Buffer = true;
        Response.ContentType = "application/ms-excel";
        Response.AddHeader("content-disposition", string.Format("attachment;filename=BillingForfBalances.xls", "selectedrows"));
        Response.Charset = "";
        StringWriter stringwriter = new StringWriter();
        HtmlTextWriter htmlwriter = new HtmlTextWriter(stringwriter);
        gdvExportxls.RenderControl(htmlwriter);
        Response.Write(stringwriter.ToString().Replace("<div>", " ").Replace("</div>", " "));
        Response.End();

} 
```

# c++ - 如何使用 Autohotkey 获取监视器信息？

> ID：14110086
> 
> 赞同：0
> 
> 时间：2013-01-01T11:38:11.813
> 
> 标签：c++, autohotkey, c++, windows, windows-8, desktop-application, autohotkey

我尝试获取当前监视器状态并在[http://msdn.microsoft.com/en-us/library/windows/desktop/dd144901(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144901(v=vs.85).aspx)找到 GetMonitorInfo 函数，但我不知道[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")以及如何在[autohotkey](/questions/tagged/autohotkey "显示标记为“自动热键”的问题")中使用它。DllCall 行只是一个猜测，所以这就是我现在写的。

```
MonitorStatus := 1 > 2  ; Creates a boolean variable so size of it is determined.
Sleep 1000
DllCall("GetMonitorInfo","HMONITOR",1,"LPMONITORINFO",MonitorStatus,"int")
Sleep 1000
MsgBox Monitor status is %MonitorStatus%.   ; Status should be turned to 1.
Return 
```

很快如何在假设它有电的情况下检测显示器是打开还是关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T02:09:42.357

DllCall 返回一个指向该结构的指针。我认为在 Autohotkey 中使用指针是有可能的，但我认为这并不容易。如果您不知道这意味着什么，请不要打扰。

嗯..看起来自动热键确实拥有一切；尝试这个：

[http://www.autohotkey.com/docs/commands/SysGet.htm](http://www.autohotkey.com/docs/commands/SysGet.htm)

不要忘记查看页面底部的示例！

# php - MySQL删除具有重复内容的行

> ID：14110088
> 
> 赞同：-2
> 
> 时间：2013-01-01T11:38:32.357
> 
> 标签：php, mysql

> **可能重复：**
> [删除 MySQL 中的重复行](https://stackoverflow.com/questions/3311903/remove-duplicate-rows-in-mysql)
> [删除 MySQL 中除一个之外的所有重复行？](https://stackoverflow.com/questions/4685173/delete-all-duplicate-rows-except-for-one-in-mysql)

这就是我的桌子的样子

```
1 | 1 | Hello
1 | 2 | Hello
1 | 3 | Hello
1 | 4 | some text
1 | 5 | text
1 | 6 | text 
```

我怎样才能删除所有重复的行，只留下最后一个；例如：

```
1 | 3 | Hello
1 | 4 | some text
1 | 6 | text 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T11:41:09.040

```
DELETE  a
FROM    tableName a
        LEFT JOIN
        (
            SELECT col3, col1, MAX(col2) maxCol
            FROM tableName
            GROUP BY col3, col1
        ) b ON a.col1 = b.col1 AND
                a.col2 = b.maxCol AND
                a.col3 = b.col3
WHERE   b.col1 IS NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/d3728/1)

# iphone - 什么是 PassBook 的 URLScheme（适用于 ios6）

> ID：14110090
> 
> 赞同：8
> 
> 时间：2013-01-01T11:39:15.167
> 
> 标签：iphone, ios, ios6, passbook

> **可能重复：**
> [iOS 6 Passbook：从我的应用程序打开 Passbook 应用程序](https://stackoverflow.com/questions/12136914/ios-6-passbook-open-passbook-app-from-my-app)

嗨，IOS6 中新存折应用程序的 URLScheme 是什么，因为我在网络上的任何地方都找不到它。提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-01T11:55:35.150

嗨，我刚刚找到了答案

它是“鞋盒”，所以在 XCode 中你可以实现：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"shoebox://"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T11:46:51.513

到目前为止（2013 年 1 月 1 日），没有为 Passbook 应用程序提供 URL 方案。

[我在Stack Overflow](https://stackoverflow.com/questions/12136914/ios-6-passbook-open-passbook-app-from-my-app)上看到了类似的帖子，请也检查一下。

# ruby-on-rails - 首次部署后资产无法预编译

> ID：14110091
> 
> 赞同：1
> 
> 时间：2013-01-01T11:39:18.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, ruby-on-rails-3.2, capistrano

运行后，我正在使用 capistrano 进行部署

> 帽部署：冷

工作得很好。但如果我跑

> 帽部署

运行冷部署后

它抛出一个错误说

```
 triggering after callbacks for `deploy:update_code'
  * 2013-01-01 11:55:29 executing `deploy:assets:precompile'
  * executing "cd /home/deployer/apps/poploda/releases/20130101105518 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["192.34.56.129"]
    [192.34.56.129] executing command
 ** [out :: 192.34.56.129] rake aborted!
 ** [out :: 192.34.56.129] Killed
 ** [out :: 192.34.56.129] 
 ** [out :: 192.34.56.129] (in /home/deployer/apps/poploda/releases/20130101105518/app/assets/javascripts/application.js)
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:142:in `exec_runtime'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:28:in `block in exec'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:27:in `exec'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/uglifier-1.3.0/lib/uglifier.rb:100:in `compile'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/sprockets/compressors.rb:74:in `compress'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/processing.rb:265:in `block in js_compressor='
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/processor.rb:29:in `call'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/processor.rb:29:in `evaluate'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/context.rb:193:in `block in evaluate'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `each'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/context.rb:190:in `evaluate'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/bundled_asset.rb:26:in `initialize'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `new'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:252:in `build_asset'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/sprockets/static_compiler.rb:19:in `block in compile'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:219:in `block in each_logical_path'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:206:in `block (2 levels) in each_file'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:196:in `each_entry'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:204:in `block in each_file'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:203:in `each_file'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/sprockets-2.2.2/lib/sprockets/base.rb:217:in `each_logical_path'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/sprockets/static_compiler.rb:18:in `compile'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/sprockets/assets.rake:56:in `internal_precompile'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.
 ** [out :: 192.34.56.129] 9/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/sprockets/assets.rake:23:in `invoke_or_reboot_rake_task'
 ** [out :: 192.34.56.129] /home/deployer/apps/poploda/shared/bundle/ruby/1.9.1/gems/actionpack-3.2.9/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
 ** [out :: 192.34.56.129] Tasks: TOP => assets:precompile:primary
 ** [out :: 192.34.56.129] (See full trace by running task with --trace)
    command finished in 82944ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/deployer/apps/poploda/releases/20130101105518; true"
    servers: ["192.34.56.129"]
    [192.34.56.129] executing command
    command finished in 2658ms
failed: "sh -c 'cd /home/deployer/apps/poploda/releases/20130101105518 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'" on 192.34.56.129 
```

我的上限部署脚本是

```
set :whenever_command, "bundle exec whenever"
require "bundler/capistrano"
require "whenever/capistrano"

server "192.34.56.129", :web, :app, :db, primary: true

set :application, "poploda"
set :user, "deployer"
set :deploy_to, "/home/#{user}/apps/#{application}"
set :deploy_via, :remote_cache
set :use_sudo, false

set :scm, "git"
set :repository, "git@github.com:ramza1/#{application}.git"
set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    run "mkdir -p #{shared_path}/config/environments"
    put File.read("config/database.example.yml"), "#{shared_path}/config/database.yml"
    put File.read("config/environments/production.example.rb"), "#{shared_path}/config/environments/production.rb"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
    run "ln -nfs #{shared_path}/config/environments/production.rb #{release_path}/config/environments/production.rb"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

任何帮助谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:08:57.067

你的服务器有`ExecJS`运行时吗？如果没有，请安装兼容的运行时之一

# debugging - 在调试模式下运行时如何在 Web 优化中处理更少的文件？

> ID：14110095
> 
> 赞同：4
> 
> 时间：2013-01-01T11:39:34.653
> 
> 标签：debugging, optimization, web, dotless

我正在使用 Web 优化和 dotLess 将较少的文件捆绑并转换为 css。

在调试模式下运行时，Web 优化不使用捆绑文件，而是引用原始文件，这很好，除了我现在在我的 html 文档中链接到原始未转换的 less 文件。

有没有办法总是为我有较少文件的包运行较少的转换？

我知道我可以将 BundleTable.EnableOptimizations 设置为 true，但这将打开我所有捆绑包的捆绑，包括。javascript 包，我不想要。

从这个问题[为什么 MVC4 @Styles.Render() 在调试模式下没有按预期运行](https://stackoverflow.com/questions/11190339/why-is-mvc4-styles-render-not-behaving-as-expected-in-debug-mode)我可以看到，如果在调试模式下，我可以手动引用捆绑的 less 文件，但这不是我认为的最优雅的解决方案。

# android - 需要清楚了解 Home vs Back 事件

> ID：14110099
> 
> 赞同：3
> 
> 时间：2013-01-01T11:40:11.607
> 
> 标签：android

我想知道主页与后退按钮的“想法/用途”。我的意思是显然主页按钮将您带到主屏幕，而后退按钮将您带到上一个屏幕。我想了解的是用户/开发社区的期望。

换句话说，当用户在我的应用程序中点击主页时，我应该处理该事件并终止应用程序吗？这是用户所期待的还是恰恰相反？

后退按钮也是如此。用户是否希望离开的屏幕会像网页一样丢失？

我正在努力确保我的应用程序的行为与用户社区的预期一致。

TIA JB

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T11:49:06.703

**Home Button**会将应用程序置于 onPause() -> onStop() ，当您再次启动应用程序时，活动将执行方法：onRestart() -> onStart() -> onResume() -> 即[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)

和

**后退按钮**在单击后退按钮时完成或终止当前 Activity 并跳回堆栈中的上一个 Activity。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:45:02.623

> 我想知道主页与后退按钮的“想法/用途”

让我先讨论**后退**按钮。

> **后退按钮行为不一致。**

对于用户来说，它非常易于使用。

对于开发人员而言，要了解实际按下后退按钮的作用并不容易。

> 正如Android网站官方所说，后退按钮可以执行以下任何操作：
> 
> 1.  返回上一个屏幕（活动）
> 2.  关闭弹出窗口
> 3.  终止长时间运行的进程
> 4.  关闭屏幕键盘
> 5.  在浏览器上转到上一页
> 6.  在最后一个活动时退出正在运行的应用程序
> 7.  在最后一个活动上返回上一个应用程序并且该应用程序是通过另一个应用程序的意图启动的

**BACK 按钮何时出现问题？**

> 当试图了解后退按钮何时取消正在运行的操作以及何时取消时，会出现一个额外的问题。例如，当从 Android 市场安装应用程序时，点击返回会将用户带到上一个屏幕，并使安装过程在后台运行。我知道有一条规则可以取消作为弹出进度指示器呈现给用户的操作以及它用于导航的任何其他情况。但这是用户所期望的吗？用户是否必须在回击以了解将要发生的事情之前进行思考？

**主页按钮**

> 主页按钮会将用户带到主屏幕，如果需要，在多任务菜单中滑动会杀死应用程序。与新手机上的 ICS 一样，所有按钮都在屏幕上，如果应用程序是从启动器图标启动的，则当用户到达最后一个活动时，后退按钮可能会被禁用。这会消除一些混乱，但仍然不能解决所有问题。

最后，**不要让用户认为**导航更重要。`Users should always know where they will endup without thinking.`

我认为这个问题没有简单的答案，但我认为它可以帮助您根据您的应用找到解决问题的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T12:18:40.950

按下主页按钮会导致启动器应用程序使用的意图显示自己。

后退按钮是可以在当前应用程序中捕获的真实事件。

通常，主页按钮应隐藏所有应用程序并转到启动器，而后退按钮应返回用户看到的上一个屏幕（完成活动或关闭对话框），并转到上一个应用程序（任务）以防万一当前一个没有更多的屏幕可以显示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T12:33:17.323

社区期望如果您按下主页按钮，您的应用程序将进入后台并可以从那里恢复。多任务处理是 Android 操作系统的核心。在按下主页按钮时完成您的活动或应用程序对于 Android 用户来说是不寻常的。

后退按钮是您想要后退一步的时候，就像您说的在浏览器中一样。如果您知道 IOS，它的行为就像您按下左上角的后退按钮一样。

希望这可以帮助

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-01T12:15:46.843

一般来说，我会说按下主页就像在桌面上最小化。所以我希望该应用程序能够回到原来的位置。如果它是这样的，那么如果我需要从应用程序中获取信息，我可以轻松地在应用程序之间切换。按下后退应该让我回到我在应用程序中所做的事情，当我到达堆栈的末尾时，它应该关闭。

# linux - 在linux中获取屏幕截图并在其中找到多个较小图像的位置

> ID：14110102
> 
> 赞同：0
> 
> 时间：2013-01-01T11:40:32.300
> 
> 标签：linux, image, x11

我想获取 x11 窗口的屏幕截图并在其中找到较小图像的位置。我没有处理图像的经验，我搜索了很多，但没有得到太多有用的结果。

图像来自文件，可以以任何更易于使用的格式加载。使用[XGetImage](http://tronche.com/gui/x/xlib/graphics/XGetImage.html)获取屏幕截图很容易。但接下来的问题是使用 XYPixmap 或 ZPixmap 的格式是什么？有什么不同？每个像素是如何表示的？

然后图像呢？哪种文件格式更容易使用？然后每个像素如何以这种格式表示？

我应该使用哪种算法来查找屏幕截图中图像的位置？

我真的迷路了。我需要朝着正确的方向前进，并查看一些示例代码，这些代码可以帮助我理解我正在处理的内容。找不到类似的作品。

只要我让它在我的 ubuntu 机器上运行，语言、框架或工具对我来说并不重要。我可以使用 C、C++、haskell、python 或 javascript 工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:43:29.373

使用 XYPixmap，每个图像平面都是一个单独的位图（每个像素一个位，每个扫描线的末尾都有填充）。如果你有 24 位颜色，你会得到 24 个单独的位图。要检索某些 (x,y) 坐标处的像素值，您需要从这些坐标处的每个位图中获取一个位，并将这些位打包成一个像素。

使用 ZPixmap，像素被表示为*位*序列，在每条扫描线的末尾都有填充。如果您有 24 位颜色，则每 3 个字节是一个像素。

在这两种情况下，最后都可能有填充，有时在每条扫描线的开头。这一切都[在这里](http://www.x.org/docs/X11/xlib.pdf)描述。

我不会直接使用任何一种格式。将您的像素图转换为简单的 1、2 或 4 字节/像素 2D 数组，并对要搜索的模式执行相同操作。如果要查找完全匹配，可以使用稍作修改的字符串搜索算法，例如[KMP](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)。模糊匹配很棘手，我不知道有什么方法可以很好地工作。

# sql - 查找年龄最大的城市中的人的姓名

> ID：14110103
> 
> 赞同：0
> 
> 时间：2013-01-01T11:40:45.450
> 
> 标签：sql

下面的查询将给出一个城市的平均年龄和居民人数的结果。Group BY 应用于城市和居民的聚合函数作为计数和年龄作为 AVG。

```
select city, count(*) as residents, avg(age) as AverageAge
from people
group by city 
```

同样，我想要一个年龄最大的城市的居民姓名

```
select city, name, max(age) as AverageAge
from people
group by city 
```

但是此查询不起作用，因为Group By 子句中没有**名称**，也没有用作聚合函数

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T11:57:43.627

不是最干净的方式，但你可以这样做：

```
SELECT P1.*
FROM People P1
JOIN
(
  SELECT City, MAX(Age) AS Age
  FROM People
  GROUP BY City
) P2 ON P1.Age = P2.Age AND P1.City = P2.City 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T11:51:48.093

更新：考虑执行计划时，我能想到的性能最高的查询似乎是下面的查询；它似乎也给出了最有意义的结果，如果有多个相同（最高）年龄的人，他们都会被选中；

```
SELECT P1.* 
FROM people p1
LEFT JOIN people p2
  ON p1.city=p2.city AND p1.age < p2.age
WHERE p2.age IS NULL 
```

基本上它会使用一个简单的左连接来让所有在同一个城镇中没有任何人的人。

否则，最容易阅读的“一般”解决方案是使用简单的子查询来查找城镇中任何人的最大年龄并列出该年龄城市中的人。如果几个人的年龄相同（最高），它会返回其中一个随机的人；

```
SELECT city, name, age
FROM people
WHERE age = (SELECT MAX(age) FROM people p WHERE p.city=people.city)
GROUP BY city; 
```

[我在这里](http://sqlfiddle.com/#!2/8f2d9/1)将第一个查询添加到 Aaron 的 SQLfiddle中，您可以看到这篇文章中的第一个查询是三个查询中唯一一个没有临时或文件排序的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T11:45:38.690

尝试

```
select city, name, max(age) as AverageAge
from people
group by city, name 
```

sql group by 查询需要选择中存在的所有列名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T12:00:28.817

您需要一个子查询，它是一种非常有用的技术，适用于各种解决方案。当需要它们时，它们是唯一有效的解决方案。当我忘记了我需要的确切语法时，我总是会去这个页面[http://allenbrowne.com/subquery-01.html](http://allenbrowne.com/subquery-01.html) （值得收藏，因为它不是谷歌上的第 1 页用于子查询，它在过去）你想要“每组前 n 条记录”部分。希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T12:36:06.317

“最大年龄”的定义：没有个人（在同一个城市）的年龄更高

```
SELECT pp.*
FROM people pp
WHERE NOT EXISTS (
  SELECT *
  FROM people px
  WHERE px.city = pp.city
  AND px.age > pp.age
  )
  ; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-21T17:09:13.933

这是我认为最简单的方法：

```
SELECT P.city, P.name, P.age as AverageAge
FROM people P
WHERE P.age = (SELECT MAX(age)
               FROM people.P2)); 
```

# macports - 安装前编辑端口源

> ID：14110108
> 
> 赞同：5
> 
> 时间：2013-01-01T11:41:42.270
> 
> 标签：macports

我的某个端口有问题。编译安装正常`port install webkit-gtk`（

为了调试和修复这个问题，我想在安装之前对 webkit-gtk 源代码进行一些更改。使用 apt-get，我可以做类似`apt-get source packagename`.

我发现我可以打电话

```
sudo port fetch webkit-gtk
sudo port extract webkit-gtk
sudo port patch webkit-gtk
sudo port configure webkit-gtk 
```

执行安装的各个步骤。但是，在对源进行更改后，我无法继续，因为我收到错误消息。我认为权限存在问题，因为我只能以 root 身份编辑文件（对自己大喊大叫会破坏构建过程，`su macports`由于某种原因我不能）。

我想做的是在配置步骤之前进行一些更改，然后像往常一样安装带有更改的端口。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-18T22:29:53.610

您快到了... `sudo port uninstall webkit-gtk sudo port clean webkit-gtk sudo port fetch webkit-gtk sudo port extract webkit-gtk sudo port patch webkit-gtk`

在配置步骤之前，进行更改： `sudo su - cd $(port work webkit-gtk) cd $(ls -1) #usually a work directory in here ...change stuff... exit sudo port configure webkit-gtk sudo port build webkit-gtk sudo port destroot webkit-gtk sudo port activate webkit-gtk`

IDK 你在这个过程中遇到了什么错误，但它们可能与你所做的更改有关，而不是与程序有关。你通常是在正确的轨道上。

# android - AlertDialog.Builder.setSingleChoiceItems 导致多选列表

> ID：14110109
> 
> 赞同：1
> 
> 时间：2013-01-01T11:41:50.807
> 
> 标签：android, android-alertdialog

我创建了一个`AlertDialog`使用`AlertDialog.Builder`来`setSingleChoiceItems`将其设置为`ListAdapter`派生自的自定义类`CursorAdapter`：

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
builder.setTitle("Title")
       .setSingleChoiceItems(mAdapter, -1, new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog, int which)
         {
           // Do nothing.
         }})
       .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
         @Override
         public void onClick(DialogInterface dialog, int which)
         {
           Log.d(TAG, "Ok clicked.");
         }})
       .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
         @Override
         public void onClick(DialogInterface dialog, int which)
         {
           Log.d(TAG, "Cancel clicked.");
         }}); 
```

尽管使用`setSingleChoiceItems()`，我的结果对话框包含一个带有复选框的列表，并且可以检查多个项目。我希望看到一个带有单选按钮的列表。

如何让对话框只允许选择一个项目，并使用单选按钮显示该选择？

**更新**

如果我调用`setSingleChoiceItems`传递 a`String[]`作为列表项源而不是适配器，我会得到所需的结果：

```
AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
builder.setTitle("Title")
       .setSingleChoiceItems(new String[] {"one","two","three"}, -1, new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int which)
           {
             // Do nothing.
           }}); 
```

所以看起来适配器会导致问题。我仍然不确定为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:01:44.507

正如 K-ballo 所暗示的，问题出在自定义适配器上。它使用带有复选框的自定义布局。我用 替换了自定义适配器`SimpleCursorAdapter`，它按预期工作：

```
mAdapter = new SimpleCursorAdapter(getActivity(),
                                   android.R.layout.simple_list_item_single_choice,
                                   null,
                                   new String[] { "title" },
                                   new int[] { android.R.id.text1 },
                                   0); 
```

# jquery - css悬停背景加载div

> ID：14110110
> 
> 赞同：1
> 
> 时间：2013-01-01T11:41:51.817
> 
> 标签：jquery, html, css

我有一个主 div，它的位置是相对的，在里面我加载了另外 2 个 div，它的位置是绝对的，z 索引相应地在每个里面我加载了一些图像并给这些图像一个悬停效果。

但是悬停只在最高 z-index 的 div 上工作，即使它的父母背景也是透明的。我的CSS看起来像

```
#main {
width:1000px;
height:500px;
position:relative;
} 

.gal_one {
width:800px;
height:400px;
position:absolute;
left:0;
top:0;
z-index:100;
}
.gal_one img {
margin-right:10px;
margin-bottom:10px;
float:left;
}
.gal_one img:hover {
border:1px solid #fff;      /* Working */
}

.gal_two {
width:800px;
height:400px;
position:absolute;
left:100px;
top:100px;
z-index:10;
}

.gal_two img {
margin-right:10px;
margin-bottom:10px;
float:left;
}
.gal_two img:hover {
border:1px solid #fff;      /* Not Working */
}

and the HTML part

<div id="main">
<div class="gal_one"> -- Loaded Images Here ---   </div>
<div class="gal_two"> -- Loaded Images Here ---   </div>
</div> 
```

任何想法 ？请俱乐部

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T11:59:37.607

这可能是因为您设置的宽度和高度属性不正确。也许这里的 Div 块之一超过了第二个块并且没有让它正确显示悬停效果。我实际上尝试了这里发布的代码，发现问题是覆盖匹配。首先在 CSS 中删除每个 div 的宽度和高度，然后尝试重新加载页面。

```
.gal_one {
position:absolute;
left:0;
top:0;
z-index:100;
}

.gal_two {
position:absolute;
left:100px;
top:100px;
z-index:10;
} 
```

如果问题解决了，那就更正宽度和高度，因为你使用绝对定位，以后可能会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:16:03.320

你有几个问题：

1.  您`#main`的`500px`div高度为`gal_one`_`gal_two``400px``800px`
2.  作为您的和`.gal_one`定位的元素，因此您必须从顶部定位到不定位，因为它被覆盖`.gal_two``absolute``.gal_two``400px``100px``.gal_two``.gal_one`

然后像这样设计它：

```
#main {
width:1000px;
height:500px; // <---- this is less than the total of the .gal_one + .gal_two = 800px;
position:relative;
} 

.gal_one {
width:800px;
height:400px;
position:absolute;
left:0;
top:0;
z-index:100;
}
.gal_one img {
margin-right:10px;
margin-bottom:10px;
float:left;
}
.gal_one img:hover {
border:1px solid #fff;      /* Working */
}

.gal_two {
width:800px;
height:400px;
position:absolute;
left:100px;
top:400px; // <----issue is here make 100px to 400px from top
z-index:10;
}

.gal_two img {
margin-right:10px;
margin-bottom:10px;
float:left;
}
.gal_two img:hover {
border:1px solid #fff;      /* Now this is working */
} 
```

在小提琴中试试这个：http: **[//jsfiddle.net/YSr94/](http://jsfiddle.net/YSr94/)**

# c# - 检查素数

> ID：14110114
> 
> 赞同：0
> 
> 时间：2013-01-01T11:42:19.260
> 
> 标签：c#, numbers, primes

我的任务有问题。如果数字是素数，我需要找到并提醒用户。

这是我的代码：

```
int a = Convert.ToInt32(number);

if (a % 2 !=0 )
{
    for (int i = 2; i <= a; i++)
    {
        if (a % i == 0)
        {
            Console.WriteLine("not prime");
        }
        else
        {
            Console.WriteLine("prime");
        }
        Console.WriteLine();
    }
}
else
{
    Console.WriteLine("not prime");
}
Console.ReadLine(); 
```

我哪里出错了，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T11:48:30.090

素数可以被 1 整除，您需要检查数字是否正好有两个除数，从 1 到数字，然后它是素数。

```
 int devisors = 0;
 for (int i = 1; i <= a; i++)
     if (a % i == 0)                        
          devisors++;

 if (devisors == 2)                 
     Console.WriteLine("prime");
 else
     Console.WriteLine("not prime"); 
```

您可以跳过一次迭代，因为我们知道所有整数都可以被 1 整除，那么您将完全得到素数的除数。由于 1 只有一个除数，我们需要跳过它，因为它不是素数。所以条件是数字只有一个除数而不是 1，并且数字不应该是一，因为一不是素数。

```
 int devisors = 0;
 for (int i = 2; i <= a; i++)
     if (a % i == 0)                        
          devisors++;

 if (a != 1 && devisors == 1)                 
     Console.WriteLine("prime");
 else
     Console.WriteLine("not prime"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:05:04.187

您只是打印素数或非素数，然后继续循环，而不是停止。`%2`检查并不是真正需要的。适当修改：

```
int a = Convert.ToInt32(number);

bool prime = true;
if (i == 1) prime = false;
for (int i = 2; prime && i < a; i++)
    if (a % i == 0) prime = false;
if (prime) Console.WriteLine("prime");
else Console.WriteLine("not prime");
Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T12:27:16.717

```
 private static void checkpirme(int x)
    {
        for (int i = 1; i <= x; i++)
        {
            if (i == 1 || x == i)
            {
                continue;
            }
            else
            {
                if (x % i == 0)
                {
                    Console.WriteLine(x + " is not prime number");
                    return;
                }

            }
        }
        Console.WriteLine(x + " is  prime number");
    } 
```

where x is number to check it if prime or not

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T15:38:59.970

我做了太多的素数检查。

我这样做了：

```
bool isPrime = true;
        List<ulong> primes = new List<ulong>();
        ulong nCheck, nCounted;
        nCounted = 0;
        nCheck = 3;
        primes.Add(2);
        for (; ; )
        {
            isPrime = true;
            foreach (ulong nModulo in primes)
            {
                if (((nCheck / 2) + 1) <= nModulo)
                { break; }
                if (nCheck % nModulo == 0)
                { isPrime = false; }
            }
            if (isPrime == true)
            {
                Console.WriteLine("New prime found: " + (nCheck) + ", prime number " + (++nCounted) + ".");
                primes.Add(nCheck);
            }
            nCheck++;
            nCheck++;
        } 
```

不过，这并不是您正在寻找的东西，所以我要做的是将它放在后台工作人员中，但将 ulongs 列表作为并发列表，或者您可以在 2 个线程中访问的东西。或者只是在访问列表时锁定列表。如果素数尚未解决，请等到它解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T12:00:27.880

大概您的代码正在输出大量消息，这些消息看起来很混乱且毫无意义？有3个关键问题：

*   当你决定它不能是素数时，你并没有打破你的 for 循环

*   您假设它可能不是主要的，请参阅下面代码中的注释。

*   您正在与 a 本身进行比较，并且它总是可以被 a 整除，for 条件中的 <= 需要是 <

代码：

```
int a = Convert.ToInt32(number);

if (a % 2 != 0)
{
    for (int i = 3 i < a; i += 2) // we can skip all the even numbers (minor optimization)
    {
        if (a % i == 0)
        {
            Console.WriteLine("not prime");
            goto escape; // we want to break out of this loop
        }
        // we know it isn't divisible by i or any primes smaller than i, but that doesn't mean it isn't divisible by something else bigger than i, so keep looping 
    }
    // checked ALL numbers, must be Prime
    Console.WriteLine("prime");
}
else
{
    Console.WriteLine("not prime");
}
escape:
Console.ReadLine(); 
```

正如其他人所提到的，您只能通过每次评估平方根并替换此行来循环到 a 的平方根：

```
for (int i = 3 i < a; i += 2) 
```

有了这个：

```
float sqrRoot = (Int)Math.Sqrt((float)a);
for (int i = 3 i <= sqrRoot; i += 2) 
```

对其进行评估很重要，否则您的程序将运行得更慢，而不是更快，因为每次迭代都将涉及平方根运算。

如果您不喜欢[goto](http://msdn.microsoft.com/en-us/library/13940fs2%28v=vs.71%29.aspx)语句（我喜欢 goto 语句），请发表评论，我会将其替换为突破布尔值（或参见 Dukeling 的最新答案）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T12:00:38.880

```
public bool isPrime(int num)
{
    for (int i = 2; i < num; i++)
        if (num % i == 0) 
            return false;                       
    return num == 1 ? false : true;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-01T12:00:58.117

另一种优化方法是使用[埃拉托色尼筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。

来自[维基百科](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

> 要通过 Eratosthenes 的方法找到小于或等于给定整数 n 的所有素数：
> 1\. 创建一个从 2 到 n 的连续整数列表：(2, 3, 4, ..., n)。
> 2\. 最初，让 p 等于 2，即第一个素数。
> 3\. 从 p 开始，以 p 为增量向上计数，并在列表中标记每个大于 p 本身的数字。这些将是 p 的倍数：2p、3p、4p 等；请注意，其中一些可能已经被标记。
> 4\. 找出列表中第一个大于 p 且未标记的数。如果没有这样的号码，请停止。否则，现在让 p 等于这个数（即下一个素数），然后从步骤 3 开始重复。

```
When the algorithm terminates, all the numbers in the list that are not marked are prime. 
```

C# 代码

```
 int[] GetPrimes(int number) // input should be greater than 1
    {
        bool[] arr = new bool[number + 1];
        var listPrimes = new List<int>();

        for (int i = 2; i <= Math.Sqrt(number); i++)
        {
            if (!arr[i])
            {
                int squareI = i * i;
                for (int j = squareI; j <= number; j = j + i)
                {
                    arr[j] = true;
                }
            }

            for (int c = 1; c < number + 1; c++)
            {
                if (arr[c] == false)
                {
                    listPrimes.Add(c);
                }
            }

        }
        return listPrimes.ToArray();
    } 
```

# android - 使用signpost android进行推特身份验证

> ID：14110116
> 
> 赞同：1
> 
> 时间：2013-01-01T11:42:56.733
> 
> 标签：android, api, twitter

```
httpOauthConsumer = new CommonsHttpOAuthConsumer(consumerKey, consumerSecret);
httpOauthprovider = new DefaultOAuthProvider("http://twitter.com/oauth/request_token",
                                                "http://twitter.com/oauth/access_token",
                                                "http://twitter.com/oauth/authorize");

String authUrl = httpOauthprovider.retrieveRequestToken(httpOauthConsumer, CALLBACKURL);            
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl))); 
```

使用此代码通过 twitter 验证应用程序。

我成功地从我的应用程序中通过 twitter 进行了身份验证。但是，我的疑问是一旦我卸载应用程序并再次安装它转发到 auth url。单击授权应用程序后，它将转发回我的应用程序。我只能第一次输入用户名，密码。从下次开始输入用户名的推特网页，密码本身就不来了。

为什么呢 ？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T11:58:43.817

只需从 Twitter 注销即可显示登录页面。

```
private Boolean clearCredentials() {
        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this.context);
        Editor edit = prefs.edit();
        edit.remove(OAuth.OAUTH_TOKEN);
        edit.remove(OAuth.OAUTH_TOKEN_SECRET);
        edit.remove(Constants.TWITTER_FLAG);
        edit.commit();

        return true;
    } 
```

# android - 使用安卓账户管理器登录谷歌阅读器

> ID：14110117
> 
> 赞同：1
> 
> 时间：2013-01-01T11:43:03.210
> 
> 标签：android, oauth-2.0, accountmanager, google-reader

我在一个创建 Google Reader 客户端的 Android 项目中。我使用内置的帐户凭据，并在这一点上与官方的谷歌阅读器应用程序一样接近。

一个星期以来，我一直在为一个问题苦苦挣扎，却不知道如何解决它。我设法使用 authtokentype "reader" 从 AccountManager 获取 Auth Token。令牌的形式是

```
DQAAAOcAAACJAmAkHEpPnaP-v7HxPYyz3XtCNwTiFLUsqYXfLQvCko4AqUyY213U81fXeNZC3VVArBaEsJJFcRXDmczrEhDquxiJiWSp7eM9T8Bs2VV3uqFwE7irrfarKyBH-oVn2nZxKc3wcugqa7k3p4KCotz48cQRslDQhSZj1AK4hxqO2eu5X8lutffRCPjA6kmgmXhkYA4RuTCxVXbZr0E_ytQteX2VzOlPbqrZ7QD7NiqbeJYODE3pk4BNjHTWtgXAr3J0U7LMdtRh9aC9AJoBp1SNl3jptyzqFfeEjWtVTBQlKtn40vyzMDt0sZoSIaSPquc 
```

现在我有了令牌，如何使用非官方的 Google Reader api 登录？我知道[这个](http://code.google.com/p/greader-unofficial/)java api，并在[这里](http://undoc.in/googlereader.html)、[这里](http://code.google.com/p/pyrfeed/wiki/GoogleReaderAPI)和[这里](http://code.google.com/p/google-reader-api/wiki/Authentication)找到了各种文档。所有这些都只强调客户使用电子邮件和密码登录。每次我找到一个代码示例时，它的形式都是

```
token = someFunctionIAlreadyUse();
someUndocumentedUnknowPersonalFunction(token); 
```

我错过了一个简单的方法吗？如果没有，我在哪里可以找到访问 api（在 java 中）的详细方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:26:47.617

只是想知道怎么做。android给出的token与常规google reader认证中使用的token相同。以下是 Christian Dadswell 使用 Jsoup 编写的一些代码，并经过修改以与 Android authtoken 一起使用：

```
public static String getGoogleToken(String authKey) throws UnsupportedEncodingException, IOException
{
    Document doc = Jsoup.connect(_TOKEN_URL).header("Authorization", _AUTHPARAMS + authKey).userAgent(_USER_AGENT).timeout(4000).get();

    // RETRIEVES THE RESPONSE TOKEN
    String _TOKEN = doc.body().text();
    return _TOKEN;
} 
```

和

```
public static String getUserInfo(String authKey) throws UnsupportedEncodingException, IOException
{
    Document doc = Jsoup.connect(_USER_INFO_URL).header("Authorization", _AUTHPARAMS + authKey).userAgent(_USER_AGENT).timeout(4000).get();

    // RETRIEVES THE RESPONSE USERINFO
    String _USERINFO = doc.body().text();
    return _USERINFO;
} 
```

和常数：

```
private static String _USER_AGENT = "YourAppNameHere";

private static final String _AUTHPARAMS = "GoogleLogin auth=";
private static final String _GOOGLE_LOGIN_URL = "https://www.google.com/accounts/ClientLogin";
private static final String _READER_BASE_URL = "http://www.google.com/reader/";
private static final String _API_URL = _READER_BASE_URL + "api/0/";
private static final String _TOKEN_URL = _API_URL + "token";
private static final String _USER_INFO_URL = _API_URL + "user-info";
private static final String _USER_LABEL = "user/-/label/";
private static final String _TAG_LIST_URL = _API_URL + "tag/list";
private static final String _EDIT_TAG_URL = _API_URL + "tag/edit";
private static final String _RENAME_TAG_URL = _API_URL + "rename-tag";
private static final String _DISABLE_TAG_URL = _API_URL + "disable-tag";
private static final String _SUBSCRIPTION_URL = _API_URL + "subscription/edit";
private static final String _SUBSCRIPTION_LIST_URL = _API_URL + "subscription/list"; 
```

# python - 如何使用 python 创建 tcsh 别名？

> ID：14110121
> 
> 赞同：0
> 
> 时间：2013-01-01T11:43:47.877
> 
> 标签：python, linux, tcsh

我正在尝试从 python 脚本（运行 Python 2.7.1）为 tcsh 创建别名。创建别名后，我想在运行 python 脚本的同一个 shell 中使用它们。

我试过了：

```
os.system('alias test "echo test"') 
```

但我收到以下错误：

```
sh: line 0: alias: test: not found
sh: line 0: alias: echo test: not found 
```

然后我尝试了：

```
os.system(r"""/bin/csh -i -c 'alias test "echo test"'""") 
```

然后没有发生错误，但别名没有注册，因此我无法使用它。

我正在寻找的结果是这样的：

```
tcsh>python my_script.py
tcsh>test
test 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T11:55:34.297

`os.system`在子shell（看起来就是bourne shell）中执行该命令，因此即使您的语法正确`alias test="echo test"`，它也不会在调用后持续存在（因为子shell关闭）。

但这似乎是一个 XY 问题。你问的是 Y - 你想到的解决方案，而不是 X - 你的问题。

如果您只是想一次创建一堆别名，为什么不使用 c-shell 脚本！？（为什么你用 c-shell 折磨自己完全是另一回事）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T11:53:49.940

你的 python 脚本不能在你的 shell 上下文中执行任何东西。虽然您*可以*使用`subprocess.call(..., shell=True)`它，但它会使用*新*的外壳，因此不会更新您现有的外壳。

做你想做的唯一方法是让你的 python 脚本将有效的 shell 命令写入标准输出，然后，而不是仅仅执行它，你需要让你的 shell 评估你的 python 脚本的输出。

# javascript - 未定义内联函数

> ID：14110122
> 
> 赞同：1
> 
> 时间：2013-01-01T11:44:02.093
> 
> 标签：javascript, jquery, function

> **可能重复：**
> [内联事件处理程序中未调用 JavaScript](https://stackoverflow.com/questions/14035463/javascript-not-being-called-in-inline-event-handler)

尝试使用 AJAX 构建基于 javascript 的喜欢/不喜欢系统来执行操作。喜欢和不喜欢的函数被命名为“likeit”和“dislikeit”。

HTML：

```
<a class="btn" data-toggle="tooltip" title="I like this." id="like" onclick="likeit('abc123');"><i class="icon-thumbs-up"></i></a>
<a class="btn" data-toggle="tooltip" title="I didn't like this." id="dislike" onclick="dislikeit('abc123');"><i class="icon-thumbs-down"></i></a> 
```

JS：

```
$(document).ready(function() {
    "use strict";
    (function likeit(id) {
        $.post("likeDislike.php", {likeID:id}, function(data) {
            alert(data);
            // Nothing to be displayed.
        });
    });
    (function dislikeit(id) {
    });
}); 
```

我在 Google Chrome 的检查元素中遇到的错误是：

```
Uncaught ReferenceError: likeit is not defined
Uncaught ReferenceError: dislikeit is not defined 
```

然而，它们是在那里定义的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T11:47:10.237

您的`onclick=".."`东西（无论如何都不应该使用）只能访问全局范围。您的函数在 document.ready 回调函数的范围内定义。

正确的解决方案是使用 JavaScript 而不是内联事件来注册您的处理程序。

```
$(document).ready(function() {
    "use strict";

    function likeit(id) { ... }
    function dislikeit(id) { ... }

    var funcMap = {
        'like': likeit,
        'dislike': dislikeit
    };

    $('.btn').on('click', function(e) {
        e.preventDefault();
        var action = $(this).data('action');
        var id = $(this).data('id');
        var func = funcMap[action];
        if(func) {
            func.call(this, id);
        }
    })
}); 
```

您的 HTML 还需要一些修改：

```
<a class="btn" data-toggle="tooltip" title="I like this." id="like" data-id="abc123" data-action="like"><i class="icon-thumbs-up"></i></a>
<a class="btn" data-toggle="tooltip" title="I didn't like this." id="dislike" data-id="abc123" data-action="dislike"><i class="icon-thumbs-down"></i></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T11:47:34.223

尝试这个

```
//make sure jquery library loaded here

<a class="btn" data-toggle="tooltip" title="I like this." id="like" onclick="likeit('abc123');"><i class="icon-thumbs-up"></i></a>
<a class="btn" data-toggle="tooltip" title="I didn't like this." id="dislike" onclick="dislikeit('abc123');"><i class="icon-thumbs-down"></i></a>

<script type="text/javascript">
function likeit(id){
$.post("likeDislike.php", {likeID:id}, function(data) {
            alert(data);
            // Nothing to be displayed.
        });

}
function dislikeit(id) {
    }
</script> 
```

# c# - SignalR 基本示例问题

> ID：14110124
> 
> 赞同：0
> 
> 时间：2013-01-01T11:44:19.000
> 
> 标签：c#, asp.net-mvc-4, signalr

我正在尝试遵循 SignalR[快速入门](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)示例，但无法使其正常工作。

首先，我不太确定在 MVC 项目中将 chat.cs 集线器文件放在哪里——我尝试了几个地方，但怀疑这是我出错的地方。它目前位于项目根目录中名为 signalr 的文件夹中。

我得到的javascript错误如下：

```
GET http://localhost:50109/signalr/hubs 404 (Not Found) 
```

我添加了 signalr nuget 包，所以我想我应该拥有我需要的一切！

谢谢阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T11:50:26.970

啊，在[FAQ里找到了以下](https://github.com/SignalR/SignalR/wiki/Faq)

> 为什么信号器/集线器返回 404 或为什么我得到 'myhub' 未定义？
> 
> 首先，确保您在 Global.asax 中调用了 MapHubs()
> 
> RouteTable.Routes.MapHubs();

我还必须从我的 global.asax 中删除以下内容：

```
BundleConfig.RegisterBundles(BundleTable.Bundles); 
```

可以这么说，我想我需要花一些时间重新调整我的捆绑包。

# asp.net - asp.net中字符串变量中整数值的减法

> ID：14110125
> 
> 赞同：4
> 
> 时间：2013-01-01T11:44:36.943
> 
> 标签：asp.net

我在 asp.net 中开发一个网站并且遇到了这个问题：

```
 string price = row["Price"].ToString();
 string discount = row["Discount"].ToString(); 
```

此代码用于从 a 获取数据，`DataTable`并且工作正常。两者都是浮点值（12,50.75 ...）。在我的程序中，我想从“价格”中减去“折扣”并将结果分配给一个新字符串。假设字符串 price contains`50`和 string discount contains `23.5`，那么我想`26.5`在新字符串中。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T11:51:57.777

您可以使用以下代码：

```
 string strPrice =  row["Price"].ToString();
    string strDiscount =row["Discount"].ToString();
    string strFinal = (Convert.ToDouble(strPrice) - Convert.ToDouble(strDiscount)).ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T11:50:13.740

您需要 double.Parse 使它们编号并对它们执行算术运算。

```
double price = double.Parse(row["Price"].ToString());
double discount = double.Parse(row["Discount"].ToString());

double amount = price - discount; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T11:52:00.873

```
string newPrice = (double.Parse(price)-double.Parse(discount)).ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T11:52:07.277

```
string strDiff = (Convert.ToDouble(row["Price"].ToString()) - Convert.ToDouble(row["Discount"].ToString())).ToString(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T12:03:40.193

是的，你可以这样做

```
double amount=(convert.toDouble(row["price"].tostring()))-(convert.toDouble(row["Discount"].tostring()));

string Totalamount=amount.tostring(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-01T12:09:17.973

您可以使用 Convert.ToDouble 或使用 double.Parse() 函数将双字符串变量转换为双精度。[这两个检查](http://www.codeproject.com/Articles/32885/Difference-Between-Int32-Parse-Convert-ToInt32-and)之间的区别

```
double price ,discount,amount;
string result = null;
price = double.Parse(row["Price"].ToString());
discount = double.Parserow["Discount"].ToString());
amount = price - discount;
string result = Convert.ToString(amount); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-01T13:14:53.453

试试这个..

```
 double amount=(convert.todouble(row["price"].tostring()))-(convert.todouble(row["Discount"].tostring())); 
```

# jquery - 如何将 iphone 设置类型菜单放入 twitter bootstrap 以进行移动视图

> ID：14110126
> 
> 赞同：1
> 
> 时间：2013-01-01T11:44:40.527
> 
> 标签：jquery, twitter-bootstrap, responsive-design

我想将 iphone 设置样式菜单制作成 twitter 引导程序。我在左侧有垂直菜单，可以正常工作。现在我想在通过移动设备打开网站时应用 iphone 设置样式菜单（类似于[http://filamentgroup.com/examples/menus/ipod.php ）。](http://filamentgroup.com/examples/menus/ipod.php)由于我不想使用 bootstrap（用于移动设备）给出的默认菜单样式，所以想尝试一些新的东西。

我刚刚使用了 html、jquery 和 css，没有脚本语言。

# android - 如何知道触摸了哪个画布ondraw位图。？

> ID：14110127
> 
> 赞同：0
> 
> 时间：2013-01-01T11:44:42.027
> 
> 标签：android, canvas

我在视图扩展类的 ondraw 中绘制了两个位图。如果我触摸任何位图，我想启动两个不同的活动。就像我触摸 bitmap1 时它会启动 activity1，而在触摸 bitmap2 时它会启动 activity2。简而言之，这就是我所做的，Bitmap bimap1,bitmap2;

```
protected void onDraw(Canvas canvas) 
    {

        Paint paint = new Paint(); 
        paint.setStyle(Paint.Style.FILL); 
        paint.setColor(Color.YELLOW);

            canvas.drawBitmap(bitmap2, 100, 100, paint);
                        canvas.drawBitmap(bitmap2, 200, 200, paint);

        super.onDraw(canvas);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:17:03.327

您不能`onTouch`在位图上设置事件。你现在有两个选择。

1）在两个单独的视图中使用两个单独的画布并`onTouch`在它们上绑定事件。

**或者**

2）获取位图的坐标，并从该坐标中决定选择哪个位图。

例如：（只是一个粗略的代码有一些提示）

```
if (x >= xOfYourBitmap && x < (xOfYourBitmap + yourBitmap.getWidth())
                && y >= yOfYourBitmap && y < (yOfYourBitmap + yourBitmap.getHeight())) {
        //you are inside your bitmap
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:12:26.120

您不能`onClick`为此使用事件，因为它是更高的抽象。你要么被点击，要么没有，你没有太多信息。所以你将不得不去`onTouchEvent`处理触摸事件，看看是否发生了点击/点击，以及它发生在哪里。触摸事件指定其在客户端坐标中的位置，因此它们将相对于`(100,100)`您`(200,200)`用于在`Canvas`. 所以基本上你可以将触摸事件位置与`Canvas`.

或者，如果您的实际用例与您的示例一样简单，您可以使用两个不同`View`的 s，每个都持有一个`Bitmap`，并且每个都简单`setOnClickListener()`。您可以使用两个`ImageView`s 并直接从*XML中引用**位图可绘制对象*，而不是自己创建它们。*`Draw`*

# java - 手动停止货柜Tomcat 6.X

> ID：14110128
> 
> 赞同：0
> 
> 时间：2013-01-01T11:44:51.950
> 
> 标签：java, maven, maven-2

我正在使用 Maven 2.2.0。我正在使用 Maven Cargo 插件进行部署。服务器是Tomcat 6.X

我们一般使用`mvn cargo:stop`停止容器。

有什么手动方法可以做到吗？

请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T11:59:56.227

我不知道你在什么情况下需要它，但是当我的 tomcat 服务器挂起（从 cargo 开始）时，我主要通过查找并终止`java`进程来终止它：

```
ps -ef | grep tomcat
kill -9 <pid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:43:14.107

如果我没记错的话， Cargo 使用 Tomcat[管理器的文本 API 。](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#Stop_an_Existing_Application)当然，您可以手动发出相同的请求或登录到管理器应用程序（HTML UI）并单击停止按钮，但您会看到相同的结果。Tomcat，整个服务器，无法远程停止。但是，您可以尝试`telnet server 8005`发送`SHUTDOWN`并查看是否允许。

# mysql - 在我的 C 项目中配置 MySql 服务器

> ID：14110130
> 
> 赞同：0
> 
> 时间：2013-01-01T11:45:08.903
> 
> 标签：mysql, visual-studio-2008, embedded-sql

我有一个问题，我需要在我的 C 项目（VS 2008）中包含一个 MYSQL 服务器。
该程序使用来自其他软件的内置库，该库试图收集和存储部分数据。

我在互联网上搜索过，`Embedded SQL`最后只找到如何用 C 语言编写 SQL。
任何人都可以回答我的问题：如何将我的 MySQL 服务器连接到我的代码（Visual Studio 2008）。服务器和代码在同一个系统上。没有互联网连接或服务器类型连接。

# regex - 从 shell 脚本调用正则表达式时获取匹配的字符串

> ID：14110133
> 
> 赞同：1
> 
> 时间：2013-01-01T11:45:27.943
> 
> 标签：regex, bash, shell

在 bash 脚本中，我有：

```
mkv="xxxx E05 xxxx"

if [[ $mkv =~ E[0-9]{2} ]] ; then echo FOUND; fi 
```

好的。这告诉我 $mkv 是否与 E[0-9]{2} 匹配，但这不是我想要的。

我想得到匹配的字符串（即我的例子中的 05 ）

我在我的正则表达式中放了一个引用 ()，希望以后能得到它，但我做不到。

我试过 ：

```
if [[ $mkv =~ E([0-9]{2}) ]] ; then echo FOUND $1; fi

if [[ $mkv =~ E([0-9]{2}) ]] ; then echo FOUND \1; fi 
```

等等......但他们都失败了

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T11:51:18.437

您可以使用`BASH_REMATCH`数组来获取匹配的部分：

```
if [[ $mkv =~ E([0-9]{2}) ]] ; then echo FOUND ${BASH_REMATCH[1]} ; fi 
```

`${BASH_REMATCH[0]}`将包含整个/完整匹配 ( `Exx`)，`${BASH_REMATCH[1]}`第一个捕获的组（这里只有数字）。

# c - 2d矩阵上的c程序每次都会崩溃

> ID：14110134
> 
> 赞同：0
> 
> 时间：2013-01-01T11:45:29.660
> 
> 标签：c, multidimensional-array

```
 int main(){
    int m1[3][3],m2[3][3],m3[3][3],m4[3][3],m5[3][3];
    create(m1);
    create(m2);
    matadd(m3,m1,m2);
    matmul(m4,m1,m2);
    transpose(m5,m4);
    getch();
    return 0;
  }

  void create(int a[3][3]){
    int i,k;
    for(i=0;i<3;i++){
        for(k=0;k<3;k++)
           scanf("%d",a[i][k]);
        }
    } 
```

我是编码新手，在 2D 矩阵上做了一个简单的程序，编译成功，但每次运行它都会在我输入第一个 2 个整数调用第一个 create() 后崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T11:47:17.280

```
scanf("%d",a[i][k]); 
```

`d`转换说明符需要一个指针，`int`但您传递的是`int`.

要将指针传递给对象，请使用`&`运算符：

```
scanf("%d", &a[i][k]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T11:49:27.173

用这种方式

```
scanf("%d", &a[i][k]); 
```

每次你输入/`scanf`你需要把`&`. 这是C语言的基本内容，你怎么能错过呢？

# android - 在android中使用另一个类的sqlitedatabase变量

> ID：14110137
> 
> 赞同：0
> 
> 时间：2013-01-01T11:45:45.843
> 
> 标签：android, sqlite

我有一个 MunchaDbAdapter，它打开连接并将 SQLiteDatabase 初始化为 getWritableDatabase，如下所示：

```
public MunchaDbAdapter open() throws SQLException {
    mDbHelper = new MunchDbHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();
    return this;
} 
```

现在在另一个班级我像这样打开了 MunchaDbAdapter

```
private MunchaDbAdapter mDbHelper;
private SQLiteDatabase mDb;

public long insert(Recipient recipient, String[] images){
        ContentValues initialValues = new ContentValues();
        initialValues.put(FLD_RECIPIENT_ID, Recipient.getFldRecipientId());
        initialValues.put(FLD_INFO, Recipient.getFldInfo());
        initialValues.put(FLD_LATITUDE, Recipient.getFldLatitude());
        initialValues.put(FLD_LONGITUDE, Recipient.getFldLongitude());
        for(int i=0;i<images.length;i++){
            if(images[i]!=null){
                initialValues.put("FLD_IMAGE_URL"+(i+1), images[i]);
            }
        }

        mDbHelper.open();
        return mDb.insert(DATABASE_TABLE, null, initialValues);
    } 
```

这是我的错误，mDb 为空，那么任何机构都可以提到它有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:03:13.397

我能从代码中得到的只是你正在尝试这样做：

第一类：

```
public SQLiteDatabase open() throws SQLException {
    MunchDbHelper mDbHelper = new MunchDbHelper(mCtx);
    SQLiteDatabase mDb = mDbHelper.getWritableDatabase();
    return mDb;
} 
```

第 2 类：

```
private MunchaDbAdapter mDbHelper;
private SQLiteDatabase mDb;

public long insert(Recipient recipient, String[] images){
        ContentValues initialValues = new ContentValues();
        initialValues.put(FLD_RECIPIENT_ID, Recipient.getFldRecipientId());
        initialValues.put(FLD_INFO, Recipient.getFldInfo());
        initialValues.put(FLD_LATITUDE, Recipient.getFldLatitude());
        initialValues.put(FLD_LONGITUDE, Recipient.getFldLongitude());
        for(int i=0;i<images.length;i++){
            if(images[i]!=null){
                initialValues.put("FLD_IMAGE_URL"+(i+1), images[i]);
            }
        }
        mDbHelper = new MunchDbHelper(getApplicationCOntext());
        mDb = mDbHelper.open();
        return mDb.insert(DATABASE_TABLE, null, initialValues);
    } 
```

当然，如果您详细说明您拥有的代码，我可以为您提供更好的帮助。

# java - 如果我已经使用记录器，使用跟踪的原因

> ID：14110138
> 
> 赞同：-1
> 
> 时间：2013-01-01T11:45:48.157
> 
> 标签：java, debugging, trace

使用跟踪的原因是什么，我已经在使用日志记录但我不确定是否应该使用跟踪。

我在论坛中找到了使用它的方法，但不是真正的原因......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:05:20.130

是的，您可以选择使用或不使用`TRACE`级别日志。但是您不知道您的项目所依赖的这些库的日志级别。

所以不管你用不用都不是问题......你只需要知道有一个日志级别低于`DEBUG`调用`TRACE`

# mysql - 哪些已经存在的drop程序？

> ID：14110147
> 
> 赞同：26
> 
> 时间：2013-01-01T11:48:03.913
> 
> 标签：mysql, stored-procedures

> **可能重复：**
> [mysql 程序错误 ERROR 1304 & ERROR 1305](https://stackoverflow.com/questions/3401982/error-with-mysql-procedures-error-1304-error-1305)

我尝试运行一个命令来删除一个过程：

```
DROP PROCEDURE create_datetable 
```

通过这样做，我得到一个警告：

```
1304 PROCEDURE create_datetable already exists 
```

之后，当我尝试创建具有相同名称的新过程时，我会收到相同的警告。

这是什么意思？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-01T11:54:09.130

参考：[丢弃程序](http://dev.mysql.com/doc/refman/5.0/en/drop-procedure.html)。

编码：

```
DROP PROCEDURE IF EXISTS procedureName;
... 
```

编辑：

您可以尝试重命名该过程，然后尝试按照这篇文章删除它：[重命名 mysql 过程](https://stackoverflow.com/questions/13644684/rename-a-mysql-procedure)？

尝试这个：

```
UPDATE `mysql`.`create_DataTable`
SET name = '<new_proc_name>',
specific_name = '<new_proc_name>'
WHERE db = '<database>' AND
name = '<old_proc_name>'; 
```

**另请注意：如果已为此过程授予用户权限，您还需要在 newProcedure 中更新过程名称。**

```
UPDATE `mysql`.`create_DataTable`
SET Routine_name = '<new_proc_name>'
WHERE Db = '<database>' AND
  Routine_name = '<old_proc_name>';
 FLUSH PRIVILEGES; 
```

你有删除所有程序的自由吗？如果是这样，请尝试这篇文章：[Drop all stored procedures in MySQL or using temporary stored procedures](https://stackoverflow.com/questions/3027832/drop-all-stored-procedures-in-mysql-or-using-temporary-stored-procedures)和 post2：[Drop all stored procedures in MySQL or using temporary stored procedures](https://stackoverflow.com/questions/3027832/drop-all-stored-procedures-in-mysql-or-using-temporary-stored-procedures)。

# c++ - 如何使用 libavcodec 高效地查找和解码第 N 帧？

> ID：14110149
> 
> 赞同：3
> 
> 时间：2013-01-01T11:48:23.523
> 
> 标签：c++, ffmpeg, video-processing, libavcodec

请，这不是类似帖子的重复！

我想找到并解码第 N 帧，例如第 7 帧。

据我了解，使用`time_base`我可以计算每帧有多少滴答声，然后将其乘以 7，我们将得到第 7 帧的位置。计算我所做的刻度

```
AVStream inStream = getStreamFromAVFormatContext();

int fps = inStream->r_frame_rate.num;
AVRational timeBase = inStream->time_base;

int ticks_per_frame = (1/fps) / timeBase;
int _7thFramePos = ticks_per_frame * 7; 
```

1.  我是否正确计算了第 7 帧的位置？如果我这样做了，那么我就去那个框架`av_seek_frame(pFormatCtx, -1, _7thFramePos, AVSEEK_FLAG_ANY)`，对吧？如果第 7 帧是 P-Frame 或 B-Frame 会发生什么，我如何解码它？
2.  我注意到计算的值与 不同`inStream->codec->ticks_per_frame`，为什么？他们不应该是一样的吗？有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:21:30.120

这篇文章很好地解释了这个问题。 [http://www.hackerfactor.com/blog/index.php?/archives/307-Picture-Go-Back.html](http://www.hackerfactor.com/blog/index.php?/archives/307-Picture-Go-Back.html)

[1] 对 AVStream 结构的评论清楚地提到“r_frame_rate”是一个猜测，可能不准确，因为即使我的帧速率为（比如说）25fps，就 base_time 而言，我每秒可能有 24 或 26 帧.

[2] 要找到您需要从一开始就解码帧并保留一个计数器的确切帧号，但这非常低效，这可以针对某些文件格式（如 MP4）进行优化，其中有关每个帧的信息都存在于文件中-标题。

# javascript - 使用 AddThis 小部件显示更大的图像

> ID：14110153
> 
> 赞同：1
> 
> 时间：2013-01-01T11:49:06.923
> 
> 标签：javascript, social-networking, addthis

我正在使用 AddThis 小部件，我复制了他们拥有的第一个选项的默认代码，这是带有 facebook、tweet 等的那个......该代码是：

```
<!-- AddThis Button BEGIN -->
<div class="addthis_toolbox addthis_default_style ">
    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    <a class="addthis_button_tweet"></a>
    <a class="addthis_button_pinterest_pinit"></a>
    <a class="addthis_counter addthis_pill_style"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-xxxxxxxxxxxxxxxxx"></script>
<!-- AddThis Button END --> 
```

但是我也想添加一个 Google Plus 按钮，所以我将它添加到代码中：

```
<a class="addthis_button_google_plusone"></a> 
```

但是，与其他图像相比，这输出的图像要小得多。有没有办法获得更合适尺寸的图像？

这是它目前的样子：

![在此处输入图像描述](../Images/3998562e800813f0a397ab5370425461.png)

如您所见，Google Plus 图标太小，但这是我想要的正确图标，只是更大；不想要“徽章”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:42:57.880

**更新**：

用于`size`调整按钮的大小：

```
<a class="addthis_button_google_plusone" g:plusone:size="medium"></a> 
```

[链接到指南](http://support.addthis.com/customer/portal/articles/381237-third-party-buttons#google-plus1) *- 更大的标准*

* * *

**[添加此第三方按钮 - 链接](http://support.addthis.com/customer/portal/articles/381237-third-party-buttons#google-plus-badge)**（如 Google +1）

另外，代码（也许这就是你想要的）：

```
<div class="addthis_toolbox addthis_default_style">
     <a class="addthis_button_google_plusone_badge" g:plusone:href="...your-link..."></a>
</div> 
```

**或者**，在您的代码本身中，只需向 div 添加另一个锚标记：

```
<a class="addthis_button_google_plusone_badge" ></a> 
```

# java - Android - Box-API 只是挂起？

> ID：14110158
> 
> 赞同：1
> 
> 时间：2013-01-01T11:49:34.880
> 
> 标签：java, android, token, box-api

我编写了一个应用程序来使用 box-api 从手机上传文件。我通过以下方式对用户进行身份验证：

```
Intent intent = new Intent(this, BoxAuthentication.class);
intent.putExtra("API_KEY", Version.BOX_API_KEY);
startActivityForResult(intent, BOX_RESULT); 
```

我通过以下方式获得了返回的令牌：

```
if (resultCode == BoxAuthentication.AUTH_RESULT_SUCCESS)
{
   if(data.getStringExtra("AUTH_TOKEN") != null) {
      writeStringPref(Global.boxToken, data.getStringExtra("AUTH_TOKEN"), getApplicationContext());
   } else { 
      toast("An error occured authenticating, please try again"); finish();
   }
} else if (resultCode == BoxAuthentication.AUTH_RESULT_FAIL) {
   toast("Unable to log into Box"); finish();
} 
```

在我的上传方法中，我通过以下方式调用框：

```
final Box box = Box.getInstance(Version.BOX_API_KEY); 
```

然后我创建一个文件夹以将文件上传到：

```
box.createFolder(token, 0l, Global.folderName, true, new CreateFolderListener(){
            @Override
            public void onIOException(IOException e) {
                        //HANDLE
            }

            @Override
            public void onComplete(BoxFolder boxFolder, String status) {
               //DO STUFF
                    }
        ); 
```

我遇到的问题是用户第一次进行身份验证时，我可以使用保存的令牌上传文件没问题。但是，例如，一个小时后，当我调用创建文件夹时，它似乎只是挂起。没有返回任何内容，也没有调用侦听器中的任何方法。

当我将代码更新推送到设备时，这似乎也会发生，它停止工作，唯一的解决方案是重新验证用户身份。阅读文档，令牌似乎不会过期，并且由于没有返回任何内容，因此它似乎不是无效的。

如果这有所不同，我将通过 Intent Service 调用此代码。

任何人都有任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T22:04:27.827

我自己解决了这个问题。我从不在主线程上的 Intent 服务调用 box，因此在调用 box api 时，我实际上是从后台线程调用后台线程。我不知道为什么会这样有时工作而不是其他工作，但使用处理程序（主线程）并通过调用 box-api 似乎已经解决了这个问题。

# maven - 使用包含其他项目的 maven 构建项目

> ID：14110161
> 
> 赞同：0
> 
> 时间：2013-01-01T11:49:49.997
> 
> 标签：maven, maven-2, maven-plugin

我有一个依赖于项目 B 的网络项目 A，

项目 B 依赖于 JAR C

问题：

当我打包 web 项目 A 时，b 有一个 jar（预期），但它们没有引用 jar c

所以，当我运行我的网络项目 A 并访问项目 B 的功能时，我得到了类`NotFoundException`，因为 jar C 不包括在内

任何帮助我如何在父项目A中包含jar C而不自己在项目A中编写它`pom.xml`

网络项目`pom.xml`

```
<project ....>
    ..........
    <dependencies>
        <!--Local Projects -->
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>project B</artifactId>
            <version>1.0.0</version>
       </dependency>
    </dependencies>

</project> 
```

项目B`pom.xml`

```
<project ....>
<dependencies>
    <dependency>
        <groupId>jar_C</groupId>
        <artifactId>jar_C</artifactId>
        <version>1.0.0</version>

    </dependency>

</dependencies> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:24:22.357

作为您的配置，Maven 只负责编译，也就是说，一个 jar 不会将其任何依赖项带入自身。如果您需要将依赖项打包在一起，您应该使用 Assembly 插件，请参阅：[here](http://maven.apache.org/plugins/maven-assembly-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:16:29.617

阅读[Maven 依赖机制](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)

***导入***（仅在 Maven 2.0.9 或更高版本中可用）

此范围仅用于该部分中 pom 类型的依赖项`<dependencyManagement>`。它指示应将指定的 POM 替换为该 POM`<dependencyManagement>`部分中的依赖项。由于它们被替换，具有导入范围的依赖项实际上并不参与限制依赖项的传递性。

所以基本上，试试这个

网络项目`pom.xml`

```
<project ....>
    ..........
    <dependencies>
        <!--Local Projects -->
        <dependency>
            <groupId>${project.groupId}</groupId>
            <artifactId>project B</artifactId>
            <version>1.0.0</version>
            <scope>import</scope>
       </dependency>
    </dependencies>

</project> 
```

# android - 在 Android 中获取 Image ThumbNail

> ID：14110163
> 
> 赞同：18
> 
> 时间：2013-01-01T11:50:10.687
> 
> 标签：android, image, thumbnails

我需要图像的缩略图。我只知道存储在 SD 卡中的图像名称。谁能帮我。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-01T11:57:19.033

试试这个。

```
final int THUMBSIZE = 64;

Bitmap ThumbImage = ThumbnailUtils.extractThumbnail(BitmapFactory.decodeFile(imagePath), 
                    THUMBSIZE, THUMBSIZE); 
```

[有关更多详细信息，请参阅此](http://developer.android.com/reference/android/media/ThumbnailUtils.html)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-01T13:41:23.627

使用[`MediaStore.Images.Thumbnails`](http://developer.android.com/reference/android/provider/MediaStore.Images.Thumbnails.html)您可以查询和获取两种缩略图：MINI_KIND：512 x 384 缩略图MICRO_KIND：96 x 96 缩略图。

使用此调用的优点是缩略图由 MediaStore 缓存。因此，如果先前创建了缩略图，则检索会更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T12:02:50.863

```
byte[] imageData = null;

try
{

final int THUMBNAIL_SIZE = 64;

FileInputStream fis = new FileInputStream(fileName);
Bitmap imageBitmap = BitmapFactory.decodeStream(fis);

Float width = new Float(imageBitmap.getWidth());
Float height = new Float(imageBitmap.getHeight());
Float ratio = width/height;
imageBitmap = Bitmap.createScaledBitmap(imageBitmap, (int)(THUMBNAIL_SIZE * ratio), THUMBNAIL_SIZE, false);

ByteArrayOutputStream baos = new ByteArrayOutputStream();
imageBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
imageData = baos.toByteArray();

}
catch(Exception ex) {

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-25T11:39:24.203

如果您喜欢总部缩略图，请使用 [RapidDecoder][1] 库。简单如下：

```
import rapid.decoder.BitmapDecoder;
...
Bitmap bitmap = BitmapDecoder.from(getResources(), R.drawable.image)
                             .scale(width, height)
                             .useBuiltInDecoder(true)
                             .decode(); 
```

如果您想缩小不到 50% 并获得 HQ 结果，请不要忘记使用内置解码器。

# iphone - 具有特定扩展目标 c 的文件搜索

> ID：14110165
> 
> 赞同：4
> 
> 时间：2013-01-01T11:50:23.257
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

我正在 iPhone 项目中进行一些文件操作。我需要在哪里搜索特定扩展名的文件。一种选择是手动处理要查找的每个文件和目录。我的问题是，有没有简单的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T12:13:32.777

看到使用`NSFileManager`你可以获取文件并在下面的条件下你可以获取具有特定扩展名的文件，它在文档目录中工作..

```
-(NSArray *)findFiles:(NSString *)extension
{
    NSMutableArray *matches = [[NSMutableArray alloc]init];
    NSFileManager *manager = [NSFileManager defaultManager];

    NSString *item;
    NSArray *contents = [manager contentsOfDirectoryAtPath:[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] error:nil];
    for (item in contents)
    {
        if ([[item pathExtension]isEqualToString:extension])
        {
            [matches addObject:item];
        }
    }

    return matches;
} 
```

将此数组与您搜索的文件一起使用..获取`NSArray`类型的返回，因此使用`NSArray`对象来存储此数据...

我希望这对你有帮助......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T06:12:00.017

我还没有发现任何我可以说很简单的事情，最后我必须编写自己的代码来做到这一点。我在这里发布这个是因为也许有人觉得这个帮助很完整。

```
-(void)search{
@autoreleasepool {
    NSString *baseDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSFileManager *defFM = [NSFileManager defaultManager];
    BOOL isDir = YES;

        NSArray *fileTypes = [[NSArray alloc] initWithObjects:@"mp3",@"mp4",@"avi",nil];
        NSMutableArray *mediaFiles = [self searchfiles:baseDir ofTypes:fileTypes];
        NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
        NSString *filePath = [docDir stringByAppendingPathComponent:@"playlist.plist"];
        if(![defFM fileExistsAtPath:filePath isDirectory:&isDir]){
            [defFM createFileAtPath:filePath contents:nil attributes:nil];
        }

        NSMutableDictionary *playlistDict = [[NSMutableDictionary alloc]init];
        for(NSString *path in mediaFiles){
            NSLog(@"%@",path);
            [playlistDict setValue:[NSNumber numberWithBool:YES] forKey:path];
        }

        [playlistDict writeToFile:filePath atomically:YES];

        [[NSNotificationCenter defaultCenter] postNotificationName:@"refreshplaylist" object:nil];
    }

} 
```

现在递归方法

```
-(NSMutableArray*)searchfiles:(NSString*)basePath ofTypes:(NSArray*)fileTypes{
    NSMutableArray *files = [[[NSMutableArray alloc]init] autorelease];
    NSFileManager *defFM = [NSFileManager defaultManager];
    NSError *error = nil;
    NSArray *dirPath = [defFM contentsOfDirectoryAtPath:basePath error:&error];
    for(NSString *path in dirPath){
       BOOL isDir;
       path = [basePath stringByAppendingPathComponent:path];
       if([defFM fileExistsAtPath:path isDirectory:&isDir] && isDir){
          [files addObjectsFromArray:[self searchfiles:path ofType:fileTypes]];
       }
    }

   NSArray *mediaFiles = [dirPath pathsMatchingExtensions:fileTypes];
   for(NSString *fileName in mediaFiles){
      fileName = [basePath stringByAppendingPathComponent:fileName];
      [files addObject:fileName];
   }

   return files;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T13:13:13.490

您需要的是一种递归方法，以便您可以处理子目录。以下方法中的第一个是公共的；另一个私人。想象一下，它们被实现为一个名为的类的静态方法`CocoaUtil`：

CocoaUtil.h：

```
@interface CocoaUtil : NSObject

+ (NSArray *)findFilesWithExtension:(NSString *)extension
                           inFolder:(NSString *)folder;

@end 
```

CocoaUtil.m:

```
// Private Methods
@interface CocoaUtil ()

+ (NSArray *)_findFilesWithExtension:(NSString *)extension
                            inFolder:(NSString *)folder
                        andSubFolder:(NSString *)subFolder;

@end

@implementation CocoaUtil

+ (NSArray *)findFilesWithExtension:(NSString *)extension
                           inFolder:(NSString *)folder
{
    return [CocoaUtil _findFilesWithExtension:extension
                                     inFolder:folder
                                 andSubFolder:nil];
}

+ (NSArray *)_findFilesWithExtension:(NSString *)extension
                            inFolder:(NSString *)folder
                        andSubFolder:(NSString *)subFolder
{
    NSMutableArray *found = [NSMutableArray array];
    NSString *fullPath = (subFolder != nil) ? [folder stringByAppendingPathComponent:subFolder] : folder;

    NSFileManager *fileman = [NSFileManager defaultManager];
    NSError *error;
    NSArray *contents = [fileman contentsOfDirectoryAtPath:fullPath error:&error];
    if (contents == nil)
    {
        NSLog(@"Failed to find files in folder '%@': %@", fullPath, [error localizedDescription]);
        return nil;
    }

    for (NSString *file in contents)
    {
        NSString *subSubFolder = subFolder != nil ? [subFolder stringByAppendingPathComponent:file] : file;
        fullPath = [folder stringByAppendingPathComponent:subSubFolder];

        NSError *error = nil;
        NSDictionary *attributes = [fileman attributesOfItemAtPath:fullPath error:&error];
        if (attributes == nil)
        {
            NSLog(@"Failed to get attributes of file '%@': %@", fullPath, [error localizedDescription]);
            continue;
        }

        NSString *type = [attributes objectForKey:NSFileType];

        if (type == NSFileTypeDirectory)
        {
            NSArray *subContents = [CocoaUtil _findFilesWithExtension:extension inFolder:folder andSubFolder:subSubFolder];
            if (subContents == nil)
                return nil;
            [found addObjectsFromArray:subContents];
        }
        else if (type == NSFileTypeRegular)
        {
            // Note: case sensitive comparison!
            if ([[fullPath pathExtension] isEqualToString:extension])
            {
                [found addObject:fullPath];
            }
        }
    }

    return found;
}

@end 
```

这将返回一个数组，其中包含具有指定文件扩展名的每个文件的完整路径。请注意，`[NSString pathExtension]`不返回`.`文件扩展名的，因此请确保不要在`extension`参数中传递它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-25T10:27:48.010

使用下面的代码

```
NSArray *myFiles = [myBundle pathsForResourcesOfType:@"Your File extension"
                                    inDirectory:nil]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-01T12:51:50.887

是的，我们有下面的 NSArray 直接方法可以帮助您

```
 NSMutableArray *arrayFiles = [[NSMutableArray alloc] initWithObjects:@"a.png", @"a.jpg",  @"a.pdf", @"h.png", @"f.png", nil];
    NSLog(@"pathsMatchingExtensions----%@",[arrayFiles pathsMatchingExtensions:[NSArray arrayWithObjects:@"png", nil]]);

//my output is
"a.png",
"h.png",
"f.png" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T12:59:47.670

像这样你可以找到你的特定文件扩展名

```
 NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
    NSFileManager *manager = [NSFileManager defaultManager];
    NSDirectoryEnumerator *direnum = [manager enumeratorAtPath:bundleRoot];

    NSString *filename;

    while ((filename = [direnum nextObject] )) {

        if ([filename hasSuffix:@".doc"]) {   //change the suffix to what you are looking for

            [arrayListofFileName addObject:[filename stringByDeletingPathExtension]];

        }

    } 
```

# jquery - 选中/取消选中复选框数组

> ID：14110169
> 
> 赞同：1
> 
> 时间：2013-01-01T11:50:46.103
> 
> 标签：jquery, jquery-1.7

这就是我所拥有的（此处使用 Twitter 引导程序）

```
#html
 <ul id="my-categories">
    <li>
      <label class="checkbox">
        <input checked="checked" name="supername[]" type="checkbox" value="43243">fdsfdsfds
      </label>
    </li>

    <li>
      <label class="checkbox">
        <input checked="checked" name="supername[]" type="checkbox" value="21343">sadsadsadsadsd
      </label>
    </li>
    <li class="fdsfds"></li>
    <li>
      <a href="#" id="my-categories-btn">Check/Uncheck all</a>
    </li>
  </ul>

 # js file
 $("#my-categories-btn").click(function(){
    $("my-categories input[type=checkbox]").each(function(){
        isChecked = $(this).attr('checked');
    $(this).attr('checked', !isChecked);
    });
  }) 
```

它只是由于某种原因不起作用。

我如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T11:52:33.113

您错过了`#`with my-categories 也需要更改`this`为`$(this)`调用`attr()`jQuery 函数，因为`this`给您**DOM**对象并`$(this)`给**jQuery**对象和属性可以用 jQuery 对象调用。

**[现场演示](http://jsfiddle.net/rajaadil/XRWG4/1/)**

```
$("#my-categories-btn").click(function(){
    $("#my-categories input[type=checkbox]").each(function(){
        $(this).attr('checked', false);
    });
}) 
```

您**不需要每个**在这里您可以直接将值分配给选中的属性

**[现场演示](http://jsfiddle.net/rajaadil/XRWG4/2/)**

```
$("#my-categories-btn").click(function() {
    $("#my-categories input[type=checkbox]").attr('checked', false);
});​ 
```

对于**选中和取消选中**，您可以使用复选框集合的选中状态。

**[现场演示](http://jsfiddle.net/rajaadil/XRWG4/4/)**

```
$("#my-categories-btn").click(function() {
    lst = $("#my-categories input[type=checkbox]");
    $(lst).attr('checked', !lst[0].checked);
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T12:16:27.903

I suggest you use a checkbox instead of the link you are using for checking/unchecking all checkboxes.

This way it´s possible to determine wether or not to check or uncheck all the checkboxes rather than just toggling their current state.

```
$('#my-categories-btn').change(function() {
    $('#my-categories input[type="checkbox"]').prop('checked', this.checked);
});​ 
```

See **[demo](http://jsfiddle.net/fgBMx/)** using an extra checkbox.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T11:53:53.363

您需要`my-categories`通过前缀指定为 id 选择器`#`

```
 $("#my-categories-btn").click(function(){
    $("#my-categories input[type=checkbox]").each(function(){
        isChecked = $(this).attr('checked');
    $(this).attr('checked', !isChecked);
    });
  }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T11:54:07.627

相应地更新您的脚本代码。

```
$("#my-categories-btn").click(function(){
    $("#my-categories input[type=checkbox]").each(function(){
        isChecked = $(this).attr('checked');
    $(this).attr('checked', !isChecked);
    });
  }) 
```

# java - 错误：预期为“.class”

> ID：14110171
> 
> 赞同：1
> 
> 时间：2013-01-01T11:51:04.683
> 
> 标签：java, class

嗨朋友们在编译下面的错误来了

错误：预期为“.class”

我无法找到错误所在。我检查了许多网站，但无法找到此错误出现的原因。请帮助

提前致谢。

```
import java.io.*;

class Test
{
    boolean isGoodEmployee(boolean ismarried,int noofchild,String middlename,String childnames[])
    {
        boolean child,letter,last,child;

        if (noofchild <= 2)
            child=true;
        boolean firstletter = middlename.startsWith("k");
        boolean lastletter = middlename.endssWith("e");

        if (firstletter && (!lastletter))
            letter = true;

        int lastnameletterscount = lastname.length();

        if (lastnameletterscount > 4)
            last = true;

        String name = raju;

        for (int i=0; i < noofchild; i++)
            if(name.equalsIgnoreCase(childnames[i]))
            {
                child = true;
                break;
            }
    }
}

class GoodEmployee
{
    public static void main(String args[]) throws IOException
    {
        String firstname, middlename, lastname;
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        System.out.println("enter the first name of employee");
        firstname = br.readLine();
        System.out.println("enter the middle name of employee");
        middlename = br.readLine();
        System.out.println("enter the last name of employee");
        lastname = br.readLine();
        //System.out.println("full name of employee is:"+first+middle+last);
        System.out.println("enter employee is married or not");
        boolean ismarried = Boolean.parseBoolean(br.readLine());

        if (ismarried)
            System.out.println("enter number of childrens");

        int noofchild = Integer.parseInt(br.readLine());
        String childnames[] = new String[noofchild];
        System.out.println("enter children names");

        for (int i=0; i < noofchild; i++)
            childnames[i] = br.readLine();
        Test t = new Test();
        t.isGoodEmployee(ismarried,noofchild,middlename,childnames[]);
    }
} 
```

我正在使用“javac GoodEmployee.java”来编译程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T11:58:14.900

你有一个不匹配的方法调用`isGoodEmployee`。

参数被`childnames`定义为一个数组，所以你可以简单地传入参数，替换：

```
t.isGoodEmployee(ismarried,noofchild,middlename,childnames[]); 
```

和

```
t.isGoodEmployee(ismarried,noofchild,middlename,childnames); 
```

除此之外，不要忽略其他编译器错误，例如

```
middlename.endssWith("e");
               ^---------extra 's' 
```

熟悉[javadocs](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T11:57:59.967

这段代码有很多问题：
您在 isGoodEmployee() （第一行）中声明了两次 boolean child，
endsWith 应该是 endsWith()
等等，但这些都不是您所说的问题。你用什么命令行来编译这个类？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T12:50:40.157

@Reimeus 已经搞定了。

奇怪的编译错误可以解释如下。在这一行：

```
 t.isGoodEmployee(ismarried,noofchild,middlename,childnames[]); 
```

该`childnames[]`短语应该是Java表达式。但事实上，语法最接近于一个类型......实际上是一些（不存在的）类的数组，称为`childnames`. Java 编译器的语法错误恢复代码已经决定，如果它插入`.class`到类型名 (ie `childnames[].class`) 之后，它将给出一个语法上有效的表达式。

当然，编译器建议的更正是荒谬的......尤其是因为您的应用程序中不会有一个类或接口`childnames`。

* * *

这个故事的寓意是，不寻常的语法错误有时会导致编译器产生特殊的错误消息，只有当你能弄清楚解析器如何解析错误输入时，这些错误消息才有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T12:54:00.743

如果您使用的是 IDE，请将带有 main 方法的类公开。如果您尝试使用命令窗口运行它，我认为编译不需要“.class”文件，而是需要执行。因此，通过输入 javac GoodEmployee 获得 .class 文件并且没有错误后，输入 java GoodEmployee 它将执行您拥有的 .class 文件。

# php - 在 PHP 中通过 SOAP 返回多个值

> ID：14110176
> 
> 赞同：1
> 
> 时间：2013-01-01T11:51:45.157
> 
> 标签：php, xml, web-services, soap, nusoap

**tl;dr：发送多个字符串作为对 SOAP 请求的响应。**

我是 SOAP 新手。我编写了一个简单的 Web 服务，它通过 SOAP 提供请求。因为我想在 PHP 中实现它，所以我使用了[NuSOAP](http://sourceforge.net/projects/nusoap/)库。给我的 SOAP API 设计规范如下。

请求格式：

```
<?xml version="1.0" encoding="utf-8"?> 
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:q0="http://www.sandeepraju.in/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
<soapenv:Body> 
<q0:getData> 
<token>String</token> 
</q0:getData> 
</soapenv:Body> 
</soapenv:Envelope> 
```

示例/示例响应：

```
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
<ns2:getDataResponse xmlns:ns2="http://www.sandeepraju.in/">
<return>
<Data>
   <animal>cat</animal>
   <phone>225</phone>
   <code>FYI</code>
</Data> 
```

我为上述规范编写的 PHP 代码如下。

```
require_once("../nusoap_old/lib/nusoap.php");

// Definition of getData operation
function getData($token) {
    if($token == "somestring") {
        return array("animal" => "cat", "phone" => "225", "code" => "FYI");
    }
    else {
        return array("animal" => "null", "phone" => "null", "code" => "null");
    }  
}

// Creating SOAP server Object
$server = new soap_server();

// Setup WSDL
$server->configureWSDL('catnews', 'urn:catinfo');

$server->wsdl->addComplexType('return_array_php',
    'complexType',
    'struct',
    'all',
    '',
    array(
    'animal' => array('animal' => 'animal', 'type' => 'xsd:string'),
    'phone' => array('phone' => 'phone', 'type' => 'xsd:string'),
    'code' => array('code' => 'code', 'type' => 'xsd:string')
   )
);

// Register the getData operation
$server->register("getData",
    array('token' => 'xsd:string'),
    array('return' => 'tns:return_array_php'),
    'urn:catinfo',
    'urn:catinfo#getData');

// Checking POST request headers
$HTTP_RAW_POST_DATA = isset($HTTP_RAW_POST_DATA)? $HTTP_RAW_POST_DATA : "";
$server->service($HTTP_RAW_POST_DATA); 
```

在这里，我认为我不应该**返回**PHP 数组。但我不确定我应该根据规范返回什么。谁能帮我这个。或者返回一个数组是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T09:53:09.507

您需要为包含数据的数组添加另一种复杂类型。像这样：

```
$server->wsdl->addComplexType(
    'dataArray',    // MySoapObjectArray
    'complexType', 'array', '', 'SOAP-ENC:Array',
    array(),
    array(array('ref'=>'SOAP-ENC:arrayType','wsdl:arrayType'=>'tns:return_array_php[]')), 'tns:return_array_php'
); 
```

将新数据类型注册为函数的返回值。

```
$server->register(
    'getData',     
    array('Datum'=>'xsd:token'), 
    array('return'=>'tns:dataArray'),
    $namespace,
    false,
    'rpc',
    'encoded',
    'description'
); 
```

然后你的函数需要设置数组的单个部分。

```
function GetData($token)
{
    if($token == "somestring") {
        $result[0] = array(
            "animal"  => "cat",
            "phone"   => "225",
            "code"    => "FYI"
        );

        $result[1] = array(
            "animal"  => "dog",
            "phone"   => "552",
            "code"    => "IFY"
        );
    } else {
        $result = null;
    }
    return $result;
} 
```

使用字符串“somestring”调用的此服务的响应将是：

```
<ns1:getDataResponse xmlns:ns1="http://localhost/status/status.php">
    <return xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType="tns:return_array_php[2]">
        <item xsi:type="tns:return_array_php">
           <animal xsi:type="xsd:string">cat</animal>
           <phone xsi:type="xsd:string">225</phone>
           <code xsi:type="xsd:string">FYI</code>
        </item>
        <item xsi:type="tns:return_array_php">
           <animal xsi:type="xsd:string">dog</animal>
           <phone xsi:type="xsd:string">552</phone>
           <code xsi:type="xsd:string">IFY</code>
        </item>
    </return>
</ns1:getDataResponse> 
```

这符合您的规格。

# objective-c - 使用 EK 事件，EventKit 未显示事件标题

> ID：14110179
> 
> 赞同：0
> 
> 时间：2013-01-01T11:51:53.713
> 
> 标签：objective-c, ios, cocoa-touch, eventkit

使用`EventKit`我的标题字符串呈现事件视图时，标题建议未显示在呈现的视图中，它只是空白

```
 EKEventStore *es = [[EKEventStore alloc] init];
                EKEventEditViewController *controller = [[EKEventEditViewController alloc] init];
                controller.eventStore = es;
                controller.editViewDelegate = self;

                EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
                event.title = @"This is an event"; //does not appear in presented view

               [self.editController presentModalViewController:controller animated:YES];

               [event setCalendar:[eventStore defaultCalendarForNewEvents]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:31:19.587

您应该将事件对象分配给控制器。

```
controller.event = event; 
```

# vb.net - 如何在组合框中显示一个表的列名？

> ID：14110190
> 
> 赞同：0
> 
> 时间：2013-01-01T11:52:54.233
> 
> 标签：vb.net, combobox

在 vb.net 2008 中，如何在组合框中显示表列名称？

在 SQL 中，我有一个 Document 表，该表中有列，如 Doc_id、Size、Path。

组合框必须显示列名称，如

**第一行是**doc_id ，第二行是****大小**，最后一行是**路径****

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-16T23:39:42.050

Probably a little too late since I see this thing is about eight years old, but I just ran into this issue where I had to do exactly what the initial questioner was asking for. Since I resolved it, I will leave it here just incase another poor sap like us comes along looking for answers 'VB.net

```
 Dim ds As DataSet =   <define your dataset here>
    Dim dt As DataTable = ds.Tables(<Your tablename here>)
    For Each column As DataColumn In dt.Columns
        combobox1.Items.Add(column.ColumnName)
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:39:02.903

根据我们的讨论，我建议您不要将组合框直接与`DataTalble`. 你可以通过循环所有的行来绑定它`DataTable`。您使用以下片段作为参考：

```
 Dim objDataTable As DataTable = ds.Tables("Document")
 IF objDataTable <> NULL Then
 For j As Integer = 0 To objDataTable.Rows.Count
    Dim str As String = objDataTable.Rows(j)("Doc_id").ToString()
    comboBox1.Items.Add(str)

    str = objDataTable.Rows(j)("Size").ToString()
    comboBox1.Items.Add(str)

    str = objDataTable.Rows(j)("Path").ToString()
    comboBox1.Items.Add(str)
Next
END IF 
```

希望这对你有用；）**

# c# - 将模型从 post 方法传递到 MVC 中的新 get 方法

> ID：14110192
> 
> 赞同：0
> 
> 时间：2013-01-01T11:53:15.753
> 
> 标签：c#, asp.net-mvc-3

我有一个应用程序。

我被困在我想将模型从 Post 方法传递到 Get 方法的地方。

```
// Code in get method
FoundAccounts fa=new FoundAccounts();
fa.register = model;

return RedirectToAction("FoundAccounts", fa);

//Post Method
public ActionResult FoundAccounts(FoundAccounts fa)
{
//Use that values here
} 
```

我可以这样做吗？我找不到办法。

请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T11:54:40.033

> 我可以这样做吗？

不，你不能。您只能将简单的标量属性传递给`RedirectToAction`调用的路由值。传递复杂对象是没有意义的，因为当您执行重定向时，只有简单的属性会作为查询字符串参数包含在 GET 请求中。

所以你有不同的可能性：

1.  将实体保留在后端，然后仅将 id 传递给 GET 操作（这是我推荐的解决方案）：

    ```
    int id = repository.Save(fa);
    return RedirectToAction("FoundAccounts", new { id = id }); 
    ```

    然后您的 GET 操作将 id 作为操作参数，并使用它`id`从您最初保存实体的任何位置检索实体：

    ```
    public ActionResult FoundAccounts(int id)
    {
        FoundAccounts model = repository.Get(id);
        ...
    } 
    ```

2.  传递所有属性并让模型绑定器在 GET 操作中脱水实体：

    ```
    return RedirectToAction("FoundAccounts", new 
    {
        prop1 = fa.prop1,
        prop2 = fa.prop2,
        ...
    }); 
    ```

    显然，如果你有一些复杂的属性，你也需要传递它们。请记住，您包含的属性将是您能够在 GET 操作中检索的属性。其他一切都将丢失：

    ```
    return RedirectToAction("FoundAccounts", new RouteValueDictionary
    {
        { "prop1.SubComplexProp1", fa.prop1.SubComplexProp1 },
        { "prop1.SubComplexProp2", fa.prop1.SubComplexProp2 },
        { "prop2", fa.prop2 },
    }); 
    ```

    这个解决方案的缺点是，如果你有很多属性，这很快就会变得很麻烦。而且您甚至可能遇到障碍，因为 GET 请求的大小有限制。此限制因浏览器而异，但我不会在 GET 请求中传递超过 2048 个字符的内容。

3.  使用 Session 或 TempData（不推荐，因为它会将状态引入您的应用程序）；

    ```
    TempData["fa"] = fa;
    return RedirectToAction("FoundAccounts"); 
    ```

    然后在 GET 操作中从 Session 或 TempData 中检索模型：

    ```
    public ActionResult FoundAccounts()
    {
        FoundAccounts model = TempData["fa"] as FoundAccounts;
        ...
    } 
    ```

    Session 和 TempData 之间的区别在于 TempData 只会在一次重定向中存活，然后会被框架自动驱逐。在它使用 Session 的掩护下，它只是在您读取 GET 操作中的值后自动清除。这个问题当然是如果用户点击`F5`要在他的浏览器中刷新页面，您将不再在 TempData 中找到该值，因为它已被驱逐。更糟糕的是，如果用户决定为 GET 操作添加书签，如果稍后他决定返回并导航到此书签，他将遇到同样的问题。所以人们倾向于将 Sessions 用于此类事情。会话当然不能解决书签的问题（因为用户可能在中间关闭了他的浏览器，会话将丢失）。会话还引入了网络农场场景中的其他问题。例如，如果会话存储在内存中（这是默认设置），这意味着您可以将值存储在场的一个节点上，但是当您执行重定向时，您可能会命中场的另一个节点，然后这个节点没有对会话有任何了解。因此人们开始使用进程外会话——存储在状态服务机器或 SQL 服务中。但有什么意义呢？我的意思是看看我的第一个和推荐的解决方案。如果您想在网络农场环境中使用可扩展的解决方案，这正是您最终会遇到的事情。

# url - 将 %2B 重定向到 +

> ID：14110200
> 
> 赞同：1
> 
> 时间：2013-01-01T11:54:11.070
> 
> 标签：url, redirect

我想对 URL 中的所有 %2B 执行 301 重定向到 +。URL 中的 + 是 urlencoded 空格。链接到我的其他站点在 URL 中创建了 %2B，并且正在创建一个有效的动态页面，导致内容重复。

例如：

[http://www.mythicalcreatureslist.com/mythical-creature/Feng%2BHwang](http://www.mythicalcreatureslist.com/mythical-creature/Feng%2BHwang)

应该重定向到：

[http://www.mythicalcreatureslist.com/mythical-creature/Feng+Hwang](http://www.mythicalcreatureslist.com/mythical-creature/Feng+Hwang)

我通过使用以下代码设法用 %20 做到了这一点：

```
Options +FollowSymlinks -MultiViews
RewriteRule ^(.+)(\s|%20)(.+)$ /$1+$3 [R=301,QSA,L,NE] 
```

所以尝试了这个：

```
RewriteRule ^(.+)(\s|%2B)(.+)$ /$1+$3 [R=301,QSA,L,NE] 
```

但这无济于事。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:28:46.630

以下代码可能对您有所帮助：

```
RewriteEngine On
RewriteCond %{THE_REQUEST}  %2B 
RewriteRule ^(.+)$ %{REQUEST_URI} [R=301,L,QSA,NE] 
```

# php - 撇号错误

> ID：14110202
> 
> 赞同：-1
> 
> 时间：2013-01-01T11:54:28.850
> 
> 标签：php, mysql

我使用 PHP 和 MySQL 作为主要语言，而 TinyMCE 用于 WYSIWYG 功能。问题是每次我尝试在文本编辑器上放置一个撇号时都会出现 MySQL 错误。错误似乎是这样的：

> 执行查询时发生错误。请将此错误通知网络开发人员。
> 
> 注意：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以使用 near 绝对是适合您的程序。
> 
> 马尼拉国际语言学院（'在第 1 行

该声明将我引向这组代码：

```
function ExecuteQuery($strquery){
  $rs = mysql_query("$strquery") or 
        die('<br><br>An error occured upon executing query.<br>Please notify the web developer about this error.<br><br>NOTE: '.mysql_error());
  return $rs;
} 
```

但我似乎无法理解这个问题。在这里需要一些帮助。太感谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T12:04:59.833

您看到错误是因为撇号在 Mysql 中具有特殊含义。正如伊恩所说，你必须`mysql_real_escape_string`使用`$strquery`

不使用转义会导致严重的 SQL 注入安全问题。[http://www.unixwiz.net/techtips/sql-injection.html](http://www.unixwiz.net/techtips/sql-injection.html)

```
function ExecuteQuery( $strquery ) {
  $rs = mysql_query(mysql_real_escape_string($strquery)) or 
        die('<br><br>An error occured upon executing query.<br>Please notify the web developer about this error.<br><br>NOTE: '.mysql_error());
  return $rs;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T11:59:04.743

我想你的查询是这样的......

```
INSERT INTO table VALUES ('blah blah blah'); 
```

现在，想象一下当您尝试插入的文本包含单引号/撇号时会发生什么......

```
INSERT INTO table VALUES ('This won't work.'); 
```

查询参数内容中的任何单引号都会破坏您的代码。您需要`mysql_real_escape_string`在查询参数上使用。

更好的是，将 PDO 或 MySQLi 与准备好的语句一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T12:04:42.253

您的查询如下所示：

```
INSERT INTO table (textfield) VALUES ( 'your editor value' ); 
```

现在，您可能不会转义输入值，因此文本中的撇号会破坏查询

```
INSERT INTO table (textfield) VALUES ( 'your ' editor value with apostrophe' ); 
```

[阅读本文](http://php.net/manual/en/function.mysql-real-escape-string.php)了解转义，还请仔细查看红色框

# css - 布局照片空间大的div的位置

> ID：14110204
> 
> 赞同：0
> 
> 时间：2013-01-01T11:54:41.163
> 
> 标签：css, html, css-float

我的布局有问题，用 CSS 制作。没有使用 Javascript，因为我不知道如何动态定位 div（帖子）。div 有空格和线条，因为 div 的大小不同，我不想要这些线条。

请看这些照片；

*   [http://postimage.org/image/hibb48iq3/](http://postimage.org/image/hibb48iq3/)
*   [http://postimage.org/image/6h9b8mpt9/](http://postimage.org/image/6h9b8mpt9/)

我不想要那个指定的大空间。我正在尝试在 CSS 中使用显示的各种属性，但没有改变这个大空间。我的 CSS 代码是这样的：

```
#post {
    box-shadow: 0px 1px 3px rgba(34, 25, 25, 0.4);
    background: #fbffff;
    color: #6d6d6d;
    margin: 10px 0;
    padding: 15px;
    box-sizing: border-box;
    font-family: tahoma;
    line-height: 20px;
    width: 30%;
    float: right;
} 
```

如果有人通过使用 CSS 或 Javascript 有一些解决方案，那将很有帮助。我的代码在 Ruby on Rails 中。

我在 JS fiddle 中制作了一个示例来解决：http: [//jsfiddle.net/DLKP6/](http://jsfiddle.net/DLKP6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:30:22.823

您正在寻找**动态网格布局**-[在这里您可以找到解决方案的存储库](http://www.queness.com/post/11133/the-famous-pinterest-dynamic-grid-layout-and-design-inspirations)。

如前所述，我建议您检查[Masonry](http://masonry.desandro.com/)和[Wookmark 插件](http://www.wookmark.com/jquery-plugin)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:19:32.340

您需要使用 Javascript 来实现这一点，有很多[Pinterest 之类的 Dynamic Grid Layouts](http://www.wtfdiary.com/2012/08/6-amazing-jquery-plugins-to-design.html)可以帮助您，下面是著名的。

[http://masonry.desandro.com/](http://masonry.desandro.com/)

这是这篇很棒的文章，可以帮助您进行设置。

[响应式 jQuery 砌体](http://osvaldas.info/responsive-jquery-masonry-or-pinterest-style-layout)

# javascript - 动态加载脚本会改变其行为

> ID：14110205
> 
> 赞同：1
> 
> 时间：2013-01-01T11:54:47.733
> 
> 标签：javascript, javascript-framework, jquery-events, paperjs

我想`paperjs`在按下按钮打开动画后加载，但如果在页面加载后加载纸张，paperscript 似乎不起作用。

如果您注释掉`setTimeout`并取消注释，direct `$.getScript`-paperjs 将触发`alert('hi')`. 我不明白。

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script>
            $(document).ready(function () {
                var paperUrl = 'http://cdnjs.cloudflare.com/ajax/libs/paper.js/0.22/paper.js';
                $("#jq").text("jQuery is now loaded.")
                var lateLoad = function() {
                    $.getScript(paperUrl, function() {
                        $("#pp").text("Paperjs is now loaded.");
                    });
                };
                //setTimeout(lateLoad, 100);
                $.getScript(paperUrl, function() {
                    $("#pp").text("Paperjs is now loaded.");
                });
            });
        </script>
    </head>
    <body>
        <script type="text/paperscript" canvas="myCanvas">
            $('body').css({"background-color": "#999"});
            alert('hi!');
        </script>
        <p id="jq">jQuery NOT loaded yet.</p>
        <p id="pp">Paperjs NOT loaded yet.</p>
    </body>
</html> 
```

我在 Windows 7 x64 上使用 Chrome 23.0.1271.97 m。有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T21:20:45.900

我想我也想出了一个解决方法 -`paper.PaperScript.load()`或者详细说明：

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script>
            $(document).ready(function () {
                $("#jq").text("jQuery is now loaded.")
                var paperUrl = 'http://cdnjs.cloudflare.com/ajax/libs/paper.js/0.22/paper.js';
                var lateLoad = function() {
                    $.getScript(paper_url, function() { 
                        $("#pp").text("Paperjs is now loaded.");
                        paper.PaperScript.load(); // <-- The fix!
                    });
                };
                setTimeout(lateLoad, 1000);
                //$.getScript(paperUrl, function() {
                //    $("#pp").text("Paperjs is now loaded.");
                //});
            });
        </script>
    </head>
    <body>
        <script type="text/paperscript" canvas="myCanvas">
            $('body').css({"background-color": "#999"});
            alert('hi!');
        </script>
        <p id="jq">jQuery NOT loaded yet.</p>
        <p id="pp">Paperjs NOT loaded yet.</p>
    </body>
</html> 
```

这会导致 paperscript 扫描所有的 paperscript。我在[https://github.com/paperjs/paper.js/blob/master/src/core/PaperScript.js#L270](https://github.com/paperjs/paper.js/blob/master/src/core/PaperScript.js#L270)在 github 存储库中搜索“paperscript”时找到了它。虽然它仍然没有解释为什么动态加载时纸张不会自己执行 load() 。

**编辑**- 我明白出了什么问题。它与[https://github.com/jquery/jquery/blob/master/src/core.js#L768](https://github.com/jquery/jquery/blob/master/src/core.js#L768)有关，因为 paperjs 不检查窗口加载事件是否已经触发 ie `document.readyState === "complete"`。我向 paperjs 提交了一个拉取请求[https://github.com/paperjs/paper.js/pull/156](https://github.com/paperjs/paper.js/pull/156)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T19:59:42.700

将您的 paperscript 代码移动到外部文件（即 pstest.js）中并将您的 lateLoad 修改为：

```
var lateLoad = function() {
    $.getScript('http://cdnjs.cloudflare.com/ajax/libs/paper.js/0.22/paper.js',
    function() {
      $("#pp").text("Paperjs is now loaded.");
      $.getScript("pstest.js");
    } )
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T12:37:11.980

[我认为通过require.js](http://requirejs.org/)加载它更容易。您所需要的只是一个`require.config`对象，例如在 main.js 中定义：

```
requirejs.config({
    paths : {   
        'jquery' : "path/to/jquery"
        'paper' : "path/to/paper"
    },
    shim: {
        'jquery' : {
            exports: 'jQuery'
        },
        'paper' : {
            exports: 'paper'
        }
    }
}); 
```

您将需要通过`data-main`属性加载带有上述配置的 require.js：

```
<script data-main="scripts/main.js" src="scripts/require.js"></script> 
```

然后你定义一个模块（例如'paperStuff'），你的论文逻辑将是：

```
define(['jquery', 'paper'], function($, paper) {
   // do some cool stuff
}); 
```

当您想加载 paperStuff 时，您只需执行

```
var paperStuff = require('paperStuff');
... 
```

# sql-server-2008 - 是否可以使用 SQL Server 备份并将其链接到 Visual Studio 2012 或者您需要 .mdf 文件？

> ID：14110207
> 
> 赞同：0
> 
> 时间：2013-01-01T11:55:08.707
> 
> 标签：sql-server-2008, visual-studio-2012, mdf

我有一个来自我的服务器的 SQL Server 备份，并且我可以轻松地访问日常 SQL Server 备份。

我想使用 Visual Studio 2012 进行一些 asp.net 编码，并且我不想在我的机器上安装 SQL Server，因为它太重并且会降低系统速度。

我看到您可以将`.mdf`文件添加到项目并将其用作标准数据库：

*   是否可以对 SQL Server 备份做同样的事情？
*   是否可以在`.mdf`没有 SQL Server 的情况下从 SQL Server 备份中提取文件？

提前谢谢你，M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:09:44.050

SQL Server 是一个只在服务模式下运行的程序，所以你需要让它的服务器运行才能获得它的服务。答案是否定的，但您可以使用 SQL Server Express 或其他东西。

运行服务器后，您可以使用 SQL 程序集`.mdf`直接访问文件，而不是寻址服务器。您将需要创建一个连接字符串，如：

```
Server=.\SQLExpress;AttachDbFilename=|DataDirectory|mydbfile.mdf;Database=dbname; Trusted_Connection=Yes; 
```

并放入`mydbfile.mdf`目录`Data`。

# c# - 从 XML 文件中读取特定的 XML 元素

> ID：14110212
> 
> 赞同：29
> 
> 时间：2013-01-01T11:56:19.270
> 
> 标签：c#, xml

我有以下 XML 文件

```
<lexicon>
<word>
  <base>a</base>
  <category>determiner</category>
  <id>E0006419</id>
</word>
<word>
  <base>abandon</base>
  <category>verb</category>
  <id>E0006429</id>
  <ditransitive/>
  <transitive/>
</word>
<word>
  <base>abbey</base>
  <category>noun</category>
  <id>E0203496</id>
</word>
<word>
  <base>ability</base>
  <category>noun</category>
  <id>E0006490</id>
</word>
<word>
  <base>able</base>
  <category>adjective</category>
  <id>E0006510</id>
  <predicative/>
  <qualitative/>
</word>
<word>
  <base>abnormal</base>
  <category>adjective</category>
  <id>E0006517</id>
  <predicative/>
  <qualitative/>
</word>
<word>
  <base>abolish</base>
  <category>verb</category>
  <id>E0006524</id>
  <transitive/>
</word>
</lexicon> 
```

我需要用 C# 应用程序读取这个文件，如果只是`category`我`verb`想打印它的整个元素`word`。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-01T12:00:59.340

您可以使用 linq to xml。

```
 var xmlStr = File.ReadAllText("fileName.xml");

    var str = XElement.Parse(xmlStr);

    var result = str.Elements("word").
Where(x => x.Element("category").Value.Equals("verb")).ToList();

    Console.WriteLine(result); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-01T12:09:30.897

您也可以使用[XPath](http://www.w3schools.com/xpath/xpath_syntax.asp)。有点老式但仍然有效：

```
using System.Xml;

...

XmlDocument xmlDocument;

xmlDocument = new XmlDocument();
xmlDocument.LoadXml(xml);

foreach (XmlElement xmlElement in 
    xmlDocument.DocumentElement.SelectNodes("word[category='verb']"))
{
    Console.Out.WriteLine(xmlElement.OuterXml);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-01T13:01:11.470

我就是这样做的（下面的代码已经过测试，下面提供了完整的源代码），首先创建一个具有公共属性的类

```
 class Word
    {
        public string Base { get; set; }
        public string Category { get; set; }
        public string Id { get; set; }
    } 
```

出于演示目的，使用带有 INPUT_DATA 的 XDocument 加载，并使用**lexicon**查找元素名称。. .

```
 XDocument doc = XDocument.Parse(INPUT_DATA);
    XElement lex = doc.Element("lexicon"); 
```

确保有一个值并使用 linq 从中提取单词元素。. .

```
 Word[] catWords = null;
    if (lex != null)
    {
        IEnumerable<XElement> words = lex.Elements("word");
        catWords = (from itm in words
                    where itm.Element("category") != null
                        && itm.Element("category").Value == "verb"
                        && itm.Element("id") != null
                        && itm.Element("base") != null
                    select new Word() 
                    {
                        Base = itm.Element("base").Value,
                        Category = itm.Element("category").Value,
                        Id = itm.Element("id").Value,
                    }).ToArray<Word>();
    } 
```

该`where`语句检查类别元素是否存在并且类别值不为空，然后再次检查它是否是动词。然后检查其他节点是否也存在。. .

linq 查询将返回一个 IEnumerable<Typename> 对象，因此我们可以调用 ToArray<Typename>() 将整个集合强制转换为我们想要的类型。

然后打印得到 . . .

```
[Found]
 Id: E0006429
 Base: abandon
 Category: verb

[Found]
 Id: E0006524
 Base: abolish
 Category: verb 
```

**完整来源**：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml.Linq;

namespace test
{
    class Program
    {

        class Word
        {
            public string Base { get; set; }
            public string Category { get; set; }
            public string Id { get; set; }
        }

        static void Main(string[] args)
        {
            XDocument doc = XDocument.Parse(INPUT_DATA);
            XElement lex = doc.Element("lexicon");
            Word[] catWords = null;
            if (lex != null)
            {
                IEnumerable<XElement> words = lex.Elements("word");
                catWords = (from itm in words
                            where itm.Element("category") != null
                                && itm.Element("category").Value == "verb"
                                && itm.Element("id") != null
                                && itm.Element("base") != null
                            select new Word() 
                            {
                                Base = itm.Element("base").Value,
                                Category = itm.Element("category").Value,
                                Id = itm.Element("id").Value,
                            }).ToArray<Word>();
            }

            //print it
            if (catWords != null)
            {
                Console.WriteLine("Words with <category> and value verb:\n");
                foreach (Word itm in catWords)
                    Console.WriteLine("[Found]\n Id: {0}\n Base: {1}\n Category: {2}\n", 
                        itm.Id, itm.Base, itm.Category);
            }
        }

        const string INPUT_DATA =
        @"<?xml version=""1.0""?>
        <lexicon>
        <word>
          <base>a</base>
          <category>determiner</category>
          <id>E0006419</id>
        </word>
        <word>
          <base>abandon</base>
          <category>verb</category>
          <id>E0006429</id>
          <ditransitive/>
          <transitive/>
        </word>
        <word>
          <base>abbey</base>
          <category>noun</category>
          <id>E0203496</id>
        </word>
        <word>
          <base>ability</base>
          <category>noun</category>
          <id>E0006490</id>
        </word>
        <word>
          <base>able</base>
          <category>adjective</category>
          <id>E0006510</id>
          <predicative/>
          <qualitative/>
        </word>
        <word>
          <base>abnormal</base>
          <category>adjective</category>
          <id>E0006517</id>
          <predicative/>
          <qualitative/>
        </word>
        <word>
          <base>abolish</base>
          <category>verb</category>
          <id>E0006524</id>
          <transitive/>
        </word>
        </lexicon>";

    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-01T12:08:50.357

```
XDocument xdoc = XDocument.Load(path_to_xml);
var word = xdoc.Elements("word")
               .SingleOrDefault(w => (string)w.Element("category") == "verb"); 
```

[此查询](http://msdn.microsoft.com/en-us/library/bb549274.aspx)将返回整个单词`XElement`。如果有多个 word 元素与 category`verb`相比，你会得到一个`InvalidOperationException`. 如果没有具有类别的元素`verb`，则结果将为`null`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-01T12:09:02.727

或者，您可以通过以下方法使用[XPath](http://en.wikipedia.org/wiki/XPath)查询[`XPathSelectElements`](http://msdn.microsoft.com/en-us/library/bb342176.aspx)：

```
var document = XDocument.Parse(yourXmlAsString);
var words = document.XPathSelectElements("//word[./category[text() = 'verb']]"); 
```

# ruby-on-rails-3 - Rails 3 - 设计 request.referer 总是有 sign_in url

> ID：14110213
> 
> 赞同：2
> 
> 时间：2013-01-01T11:56:40.777
> 
> 标签：ruby-on-rails-3, redirect, devise

我正在使用[设计](http://blog.plataformatec.com.br/tag/devise/)。我想在登录过程成功后重定向到上一页。我遇到的问题是 request.referer 中始终包含 sign_in URL。如果没有一些明确的钩子，我如何获得上一页的 URL。

```
def after_sign_in_path_for(resource)
   stored_location_for(resource) || request.referer || search_index_path
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T10:42:39.617

我不在我的开发机器上，所以无法验证它。但它应该是。

```
#application controller

def store_return_to
      session[:return_to] = request.uri
end

def redirect_back_or_default
    redirect_to(session[:return_to] || root_url)
    session[:return_to] = nil
end

#home_controller | or any other controller we want to use it.
before_filter :store_return_to

# Session/login_controlelr
Call this function after successful sign_in or sign_up
redirect_back_or_default 
```

有点偏离轨道（设计），但会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-12T18:24:31.050

内部动作控制器放

```
before_action :store_return_to, unless: :devise_controller?
def store_return_to
 store_location_for(resource, request.url)
end 
```

例如`resource`，您的设计模型在哪里`:user`

# asp.net-mvc - 在控制器中消费服务层

> ID：14110215
> 
> 赞同：0
> 
> 时间：2013-01-01T11:57:33.620
> 
> 标签：asp.net-mvc, rest, asp.net-mvc-4

我正在创建一个 mvc 应用程序，其服务层通过 rest api 公开。我习惯于在我的控制器中使用依赖注入来使用服务，但这些服务并不是 Web 服务。

对于作为 Web 服务公开的服务层，我将如何执行此操作？控制器是否会注入 Web 服务，或者我是否需要围绕可以注入控制器的 Web 服务创建一个轻量级包装器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:09:37.063

如果我是你，我会围绕 web 服务创建包装器并注入这个包装器。它会给予更多的控制。

但在您讨论此 Web 服务的必要性之前。

# php - Twig 包含扩展父块一次的模板

> ID：14110216
> 
> 赞同：14
> 
> 时间：2013-01-01T11:57:40.190
> 
> 标签：php, symfony, twig

有没有办法做到这一点？我有一个输出一篇博客文章的模板。

现在，在**索引页面上，我通过在****for**循环中包含该模板来显示 10 篇文章，而在**显示**页面上，我只显示一篇。

指数：

```
{% block stylesheets %}
    {# some stylesheets here #}
{% endblock %}

{% for article in articles %}
        {% include VendorBundle:article.html.twig with { 'article': article } %}
{% endfor %} 
```

节目：

```
{% block stylesheets %}
      {# some stylesheets here #}
{% endblock %}

{% include VendorBundle:article.html.twig with { 'article': article } %} 
```

现在有没有办法让**article.html.twig**添加一些`{% block stylesheets %}`自动包含它的模板？如果可能的话，如何防止它在使用`for`循环时添加 10 次？

我正在尝试让我的“片段”模板（用于包含的模板）定义他们使用的样式表并使它们“注入”到页面中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-05-04T19:38:05.087

您是否尝试使用[**use**](http://twig.sensiolabs.org/doc/tags/use.html)？不幸的是，我不完全确定我的问题是否正确，但`{% use %}`这里没有提到。

据我了解，您提出的问题`article.html.twig`并将其包含在 eg 中`index.html.twig`。现在你想从`article.html.twig`into中添加一些东西`index.html.twig`？即到`{% stylesheets %}`块。

如果我知道如何使用`{% use %}`你可以试试这样。

**文章.html.twig**

```
{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('bundles/mybundle/css/article.css') }}" type="text/css" />
{% endblock %}
{% block article %}
    {# whatever you do here #}
{% endblock %} 
```

**index.html.twig**

```
{% use "VendorBundle:article.html.twig" with stylesheets as article_styles %}
{% block stylesheets %}
    {{ block('article_styles') }}
    {# other styles here #}
{% endblock %}
{% for article in articles %}
        {% include VendorBundle:article.html.twig with { 'article': article } %}
{% endfor %} 
```

我没有机会测试它，但文档说明了一些非常有趣的事情，看起来这可能是做到这一点的方法。

> 水平重用是常规模板中几乎不需要的高级 Twig 功能。它主要用于需要使模板块可重用而不使用继承的项目。

我对stackoverflow相当陌生。所以，如果我的回答完全没用，你可以在投票前发表评论然后我删除它吗？但是，如果它确实有帮助并且我的示例中只有一些错误，请通知我，我会修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:38:40.523

您可以使用新块（未测试）：

```
{# index.html.twig #}
{% block stylesheets -%}
    {% block article_styles '' %}
{%- endblock %}

{% for ... -%}
    {% include VendorBundle:template.html.twig with {'article': article} %}
{%- endfor %} 
```

```
{# template.html.twig #}
{% block article_styles -%}
    {{ parent() }}
    <link rel=stylesheet href=...>
{%- endblock %}

{# ... #} 
```

编辑：已添加`{{ parent() }}`，这将打印块已有的所有内容。

# bash - 如何在bash中从第x行读取文件到文件末尾

> ID：14110223
> 
> 赞同：57
> 
> 时间：2013-01-01T11:58:38.910
> 
> 标签：bash

我想知道如何`csv`在 bash 脚本中从第二行到文件末尾读取文件的每一行。

我知道如何在 bash 中读取文件：

```
while read line
 do   
   echo -e "$line\n"
done < file.csv 
```

但是，我想从第二行到文件末尾读取文件。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-01-01T12:09:43.827

```
tail -n +2 file.csv 
```

从[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?tail)：

```
-n, --lines=N
     output the last N lines, instead of the last 10
...

If the first character of N (the number of bytes or lines)  is  a  '+',
print  beginning with the Nth item from the start of each file, other-
wise, print the last N items in the file. 
```

在英语中，这意味着：

`tail -n 100`打印最后 100 行

`tail -n +100`打印从第 100 行开始的所有行

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-01T12:00:54.637

简单的解决方案`sed`：

```
sed -n '2,$p' <thefile 
```

`2`您希望从中读取的行数在哪里。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-01T12:37:48.987

否则（**纯 bash**）...

```
{ for ((i=1;i--;));do read;done;while read line;do echo $line;done } < file.csv 
```

写得更好：

```
linesToSkip=1
{
    for ((i=$linesToSkip;i--;)) ;do
        read
        done
    while read line ;do
        echo $line
        done
} < file.csv 
```

即使linesToSkip == 0 或linesToSkip > file.csv 的行数，这项工作也有效

**编辑**：

更改`()`为`{}`gniourf_gniourf 要求我考虑：第一个语法生成一个*sub-shell*，而`{}`不会。

当然，对于只跳过一行（作为原始问题的标题），循环`for (i=1;i--;));do read;done`可以简单地替换为`read`：

```
{ read;while read line;do echo $line;done } < file.csv 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-01T12:07:21.937

有很多解决方案。我最喜欢的一个是：

```
(head -2 > /dev/null; whatever_you_want_to_do) < file.txt 
```

您还可以使用`tail`跳过所需的行：

```
tail -n +2 file.txt | whatever_you_want_to_do 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-01T12:43:21.730

取决于你想对你的行做什么：如果你想将每个选定的行存储在一个数组中，最好的选择肯定是内置的`mapfile`：

```
numberoflinestoskip=1
mapfile -s $numberoflinestoskip -t linesarray < file 
```

将从第 2 行开始的文件的每一行存储`file`在数组中`linesarray`。

`help mapfile`了解更多信息。

如果您不想将每一行存储在一个数组中，那么还有其他非常好的答案。

正如 F. Hauri 在评论中所建议的那样，这仅适用于您需要将整个文件存储在内存中的情况。

否则，你最好的选择是：

```
{
    read; # Just a scratch read to get rid (pun!) of the first line
    while read line; do
        echo "$line"
    done
} < file.csv 
```

注意：不涉及/不需要子shell。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-03-07T00:50:33.540

这将起作用

```
i=1
while read line
 do   
   test $i -eq 1 && ((i=i+1)) && continue
   echo -e "$line\n"
done < file.csv 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-01T12:17:47.787

我只会得到一个变量。

```
#!/bin/bash

i=0
while read line
do
    if [ $i != 0 ]; then
      echo -e $line
    fi
    i=$i+1
done < "file.csv" 
```

**上面的更新**将检查`$i`csv 每一行上的变量。因此，如果您有数百万行的非常大的 csv 文件，它将占用大量 CPU 周期，**这对大自然没有好处**。

可以使用以下一行来删除 CSV 文件的第一行，`sed`然后将剩余的文件输出到`while`循环。

```
sed 1d file.csv | while read d; do echo $d; done 
```

# forms - 制作一个用户填写后可以打印的表格

> ID：14110225
> 
> 赞同：0
> 
> 时间：2013-01-01T11:58:45.087
> 
> 标签：forms, infopath, usability, look-and-feel

我有以下要求。我需要创建报价单，例如填写客户姓名、产品详细信息及其价格和数量。最后是一个确定按钮，可以在 A4 纸上打印完整的报价单。实现这一目标的最简单方法是什么？有人告诉我 Infopath 可以提供帮助...请建议如何以最小的努力实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:17:25.363

也许最简单的方法是使用 PDF 表单创建器，制作您的表单，添加功能并将其保存为您想要的任何大小的 PDF。Adobe Acrobat 能够做到这一点，但由于成本昂贵，可以通过此处获得一些免费的替代方案，如*PDF Forms Designer ：*

[http://pdfformsdesigne.sourceforge.net/index.html](http://pdfformsdesigne.sourceforge.net/index.html)

# html - CSS：在悬停时更改div的位置

> ID：14110226
> 
> 赞同：0
> 
> 时间：2013-01-01T11:58:58.053
> 
> 标签：html, css

在以下 HTML 中， 的初始位置`.layer`设置为`top: -100%`，我想在将鼠标悬停在`.image`div 上时更改它。我正在尝试以下代码，但它似乎在悬停时没有做任何事情。

**HTML：**

```
<div class="box">
    <div class="image">
        <a href="#"><img src="http://farm9.staticflickr.com/8356/8332233161_18e3a75de0_m.jpg" ></a>
    </div>
    <div class="layer">Hide it first, show on hover over image</div>
     <div class="other">other</div>
</div> 
```

**CSS：**

```
.box{
    border: 1px solid red;
    width: 240px;
}

.box .image{
    position: relative;
    overflow: hidden;    
}

.box .layer{
    width: 240px;
    height: 146px;
    background: green;
    position: absolute;
    top: -100%;
}

.box .image:hover .layer{
    top: 0  
} 
```

**JSFiddle：http:** [//jsfiddle.net/pY9jx/](http://jsfiddle.net/pY9jx/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T12:02:18.740

问题是您使用的选择器，元素之间的空格意味着第二个元素是前者的后代，而在这种情况下，元素是相邻的兄弟姐妹，使用`+`组合器描述的关系；所以：

```
.image:hover + .layer,
.layer:hover {
    top: 0  
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pY9jx/1/)。

我还定义了适用于 的规则的原因`.layer:hover`是为了避免将放在光标下时会导致[的闪烁](http://jsfiddle.net/davidThomas/pY9jx/2/)，这会停止选择器的应用（实际上，“在路上”）。`.layer``.layer:hover``.layer`

参考：

*   [相邻兄弟组合子](http://www.w3.org/TR/selectors/#adjacent-sibling-combinators)。
*   [CSS 选择器 3 级](http://www.w3.org/TR/selectors/#selectors)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:07:16.273

悬停状态的样式规则适用于`.box .image:hover .layer`. 这意味着它将应用于`layer`嵌套在 class 元素中的 class 元素`image`。但是，在您当前的代码中，`layer`元素没有嵌套在`image`元素内。

要解决这个问题，只需将`layer`元素移动到`image`元素中，如下所示：

```
<div class="box">
<div class="image">
    <a href="#"><img src="http://farm9.staticflickr.com/8356/8332233161_18e3a75de0_m.jpg" ></a>
    <div class="layer">Hide it first, show on hover over image</div>
</div>
<div class="other">other</div> 
```

在这里测试它：http: [//jsfiddle.net/pY9jx/3/](http://jsfiddle.net/pY9jx/3/)

# c# - 在控制台应用程序中获取用户访问令牌

> ID：14110229
> 
> 赞同：0
> 
> 时间：2013-01-01T11:59:17.040
> 
> 标签：c#, asp.net, facebook, facebook-c#-sdk

我正在编写两个与 facebook 服务器通信的应用程序。第一个是 ASP .NET 应用程序，它为用户获取访问令牌，另一个控制台应用程序按计划运行并从服务器获取一些数据。我的问题是如何将访问令牌发送到控制台应用程序，因为我无法从纯 C# 应用程序获取用户访问令牌，对吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-01T12:29:28.753

有很多方法可以在应用程序之间传递数据。如果您的应用程序在一台服务器上运行，您可以使用数据库、文件系统。你也可以尝试分布式系统中的web service、wcf service或者web api。

# iphone - 缓存以将图像保存在动态内存中 iphone

> ID：14110231
> 
> 赞同：-1
> 
> 时间：2013-01-01T11:59:40.330
> 
> 标签：iphone, objective-c, ios

我正在我的 iOS 应用程序中实现一个缓存，它将图像下载到 RAM 中。

我做了一些研究并找到了一些代码，但其中大部分是用于将图像缓存到永久存储。

我尝试过`NSCache`，但无法满足我的需要。

要求是：

*   限制保存图像。例如 100。
*   当达到缓存限制时，它应该在添加新图像之前删除大多数插入的旧图像。

我不确定确切的词，但我认为它应该被称为 FIFO 缓存（先进先出）。

经过一番研究，我做了以下实现。

```
static NSMutableDictionary *thumbnailImagesCache = nil;

+ (UIImage *)imageWithURL:(NSString *)_imageURL
{
    if (thumbnailImagesCache == nil) {
        thumbnailImagesCache = [NSMutableDictionary dictionary];
    }

    UIImage *image = nil;

    if ((image = [thumbnailImagesCache objectForKey:_imageURL])) {
        DLog(@"image found in Cache")
        return image;
    }

    /*  the image was not found in cache - object sending request for image is responsible to download image and save it to cache */
    DLog(@"image not found in cache")
    return nil;
}

+ (void)saveImageForURL:(UIImage *)_image URLString:(NSString *)_urlString
{
    if (thumbnailImagesCache == nil) {
        thumbnailImagesCache = [NSMutableDictionary dictionary];
    }

    if (_image && _urlString) {
        DLog(@"adding image to cache")

        if (thumbnailImagesCache.count > 100) {
            NSArray *keys = [thumbnailImagesCache allKeys];
            NSString *key0 = [keys objectAtIndex:0];
            [thumbnailImagesCache removeObjectForKey:key0];
        }

        [thumbnailImagesCache setObject:_image forKey:_urlString];
        DLog(@"images count in cache = %d", thumbnailImagesCache.count)
    }
} 
```

现在的问题是我不确定这是正确/有效的解决方案。有人有更好的想法/解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:06:58.797

您对键顺序的假设肯定是不正确的。an 中键的顺序`NSDictionary`未指定，索引 0 处的键和值不必是最旧的。您应将每个图像的创建日期存储在将它们放入缓存字典的方法中。

除此之外，其余代码似乎是有效的。

# c - 你能帮我找出这个 C 递归函数的逻辑错误吗？

> ID：14110235
> 
> 赞同：-7
> 
> 时间：2013-01-01T12:00:13.760
> 
> 标签：c

我有这个 C 递归函数

```
#include<stdio.h> 
int main(){ 
    int entier; 
    int rlt; 
    printf("\nSaisir un entier : ");  
    scanf("%d",&entier); 
    rlt=loga(5); 
    printf("Le logarithme base 2 de %d est %d:",entier,rlt); 
} 

int loga(int x){ 
    if(x==1){
        return 0;
    } 
    else {
        return (loga(x)=1+loga(x/2));
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:02:33.463

您需要在使用之前声明您的函数。

```
#include<stdio.h> 

int loga(int x); //declaration

int main(){ 
    //... 
} 

int loga(int x){ 
    if(x==1){return 0;} else {return (loga(x)=1+loga(x/2));} 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:05:12.327

您正在分配到`non-lvalue`in `loga(x)=1+loga(x/2)`。这是没有意义和无效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T12:05:02.420

递归部分似乎很奇怪。

```
int loga(int x){ 
    if(x==1){
        return 0;
    } else {
        return (1+loga(x/2));
//             ^^^^^^^^^^^^^ Changed here
    } 
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-01T12:17:50.640

我认为，以下代码将解决您的问题。

```
#include<stdio.h> 
int loga(int);

int main()
{ 
    int var; 
    int result; 
    printf("\nPlease enter a value : ");  
    scanf("%d",&var); 
    result=loga(5); 
    printf("The logarithm to the base 2 for %d is %d:",var,result); 
} 

int loga(int x)
    { 
    if(x==1)
        {
        return 0;
        } 
    else
        {
        return (1+loga(x/2));
        } 
      } 
```

此代码应正确执行。

# c++ - 如何使用 Visual Studio 的安装项目强制 Windows 覆盖文件类型关联？

> ID：14110236
> 
> 赞同：3
> 
> 时间：2013-01-01T12:00:13.447
> 
> 标签：c++, windows, visual-studio-2010, visual-studio, visual-c++

我可以使用 Visual Studio 2010 中的 Setup Deployment => View => File Types => 轻松地将文件类型关联到我的应用程序 exe。我在谷歌搜索后设置了名称、命令、扩展名、图标等。

我已经对其进行了测试，并且效果很好，但是我想要一件事。

例如，有文件名 filename.ext ，此文件扩展名尚未与任何应用程序相关联，如果我想将此扩展名与我的应用程序相关联，它可以完美运行，但如果我想将已经关联到任何其他文件的文件相关联应用程序然后该扩展文件不会将其图标更改为我的应用程序，并且它们不会自动关联到我的应用程序。问题是如何使用 Visual Studio 覆盖 Windows 中的文件关联？

当我按下应用程序设置的完成按钮时，如何完成这项任务，然后所有文件都应该自动关联到我的应用程序？

谢谢。

# php - 不同/连接两个表

> ID：14110251
> 
> 赞同：1
> 
> 时间：2013-01-01T12:02:19.313
> 
> 标签：php, mysql, codeigniter, activerecord

店铺表：

```
 +--+-------+--------+
    |id|name   |date    |
    +--+-------+--------+
    |1 |x      |March 10|
    +--+-------+--------+
    |2 |y      |March 10|
    +--+-------+--------+ 
```

类别表：

```
+--+-------+
|id|title  |
+--+-------+
|1 |tools  |
+--+-------+
|2 |foods  |
+--+-------+ 
```

店铺类别表（shop_cats）：

```
+--+-------+--------+
|id|shop_id|cat_id  |
+--+-------+--------+
|1 |1      |1       |
+--+-------+--------+
|2 |1      |2       |
+--+-------+--------+ 
```

我想按类别获取商店（类别存储在 $cat 数组中）

```
 $this->db->select('shops.*');
     $this->db->from('shops');
     if(!empty($cat))
     {
         $this->db->join('shop_cats' , 'shop_cats.shop_id = shops.id' );
         $this->db->where_in('shop_cats.cat_id' , $cat);
     }

    $this->db->limit($limit , $offset);
    $res = $this->db->get(); 
```

我的问题是它返回重复的结果，例如在这个表中

```
+--+-------+--------+
|id|shop_id|cat_id  |
+--+-------+--------+
|1 |1      |1       |
+--+-------+--------+
|2 |1      |2       |
+--+-------+--------+ 
```

如果我想要 (1,2) 类别的商店，我会得到 id = 1 的商店，两次。我希望它只返回每家商店一次，没有任何重复。

我尝试使用 group by

```
 if(!empty($cat))
         {
             $this->db->join('shop_cats' , 'shop_cats.shop_id = shops.id' );
             $this->db->group_by('shop_cats.shop_id');
             $this->db->where_in('shop_cats.cat_id' , $cat);
         } 
```

没用，我也试过

```
 if(!empty($cat))
       {         $this->db->select('DISTINCT shop_cats.shop_id');
             $this->db->join('shop_cats' , 'shop_cats.shop_id = shops.id' );
             $this->db->where_in('shop_cats.cat_id' , $cat);
         } 
```

但我得到语法错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:17:21.387

尝试

```
$this->db->distinct('shops.*');
$this->db->from('shops');
$this->db->join('shop_cats', 'shop_cats.shop_id = shops.id', 'left');
$this->db->where('shop_cats.cat_id', $cat);
$this->db->limit($limit , $offset);
$res = $this->db->get(); 
```

# java - 数组数据文件操作

> ID：14110255
> 
> 赞同：0
> 
> 时间：2013-01-01T12:02:38.460
> 
> 标签：java

我需要打印出用户使用 datainputstream
和 dataoutputstream 输入的数据，但这甚至没有正确输入。谁能告诉我
我的代码有什么问题？

```
import java.io.*;

class Employee
 {
int id;
String name;
double salary;
 }

public class Ch8Ex2 
 {
   public static void main (String[] args) 
   {
      Employee emp = new Employee();
      try
       {
         File f1 = new File("emp1.dat");
         f1.createNewFile();

         BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
         DataInputStream da = new DataInputStream(new FileInputStream(f1));
         DataOutputStream ad = new DataOutputStream(new FileOutputStream(f1));

         System.out.println("Enter your ID:");
         emp.id = br.read();
         System.out.println("Enter your name:");
         emp.name = br.readLine();
         System.out.println("Enter your salary:");
         String str = br.readLine();
         emp.salary = Double.parseDouble(str);

         ad.write(emp.id);
         ad.writeUTF(emp.name);
         ad.writeDouble(emp.salary);

         ad.flush();
         ad.close();

         System.out.println("ID:"+da.readInt());

         System.out.println("Name:"+da.readUTF());

         System.out.println("Salary:"+da.readDouble());

         da.close();
       }
        catch(IOException e)
        {

        }
        catch(NumberFormatException e)
        {

        }
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:26:36.270

假设这是唯一的事情

```
emp.id = br.read(); 
```

应该

```
emp.id = Integer.parseInt(br.readLine()); 
```

`BufferedReader.read()` [读取单个字符](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#read%28%29)

除非当然`id`只是一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T12:35:02.167

您需要使用`ad.writeInt(emp.id)`，因为`ad.write(int)`只写入一个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T12:11:57.667

类`Employee`必须是可序列化的

```
 class Employee implements Serializable
 {
   int id;
   String name;
   double salary;
 } 
```

还在 catch 块中打印异常，然后你可以得到什么是错误的。

# jquery - jQuery为div添加属性

> ID：14110256
> 
> 赞同：-4
> 
> 时间：2013-01-01T12:02:38.460
> 
> 标签：jquery

我不相信我在这里搜索过的任何问题都能为我回答这个问题。

单击链接时，我试图在 div 上设置属性。无论我做什么，我都无法为 div 设置 attr()。我相信 attr() 是正确的方法，如果没有朝着正确的方向前进，可以寻求帮助。

我正在做相当直接的用例：

```
<a href="#">Click here to set</a>
<div id="subs">This will have title added to the div</div>

$(function() {
  $('a').on('click', function() {
   $('#subs').attr('title','Test Title');
  });
}); 
```

这是小提琴：http: [//jsfiddle.net/pertrai1/L55Rc/](http://jsfiddle.net/pertrai1/L55Rc/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-01T12:08:44.570

```
$( function() {
  $('a').on('click', function() {
  $('#subs').prop('title', function() {
       return "I am a title";
  });
  });
});​ 
```

如果 attr() 不起作用，请改用 prop() ！

[链接到小提琴](http://jsfiddle.net/KBk9L/)

# android - 如何修复多行编辑文本的大小

> ID：14110257
> 
> 赞同：19
> 
> 时间：2013-01-01T12:02:43.653
> 
> 标签：android

我想制作一个多行编辑文本，但问题是每当我输入新的行高时，编辑文本的高度就会增加。如何固定它的高度。我的代码是

```
<EditText
    android:id="@+id/editAdditionalInfo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/editPhoneCutomerDetails"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="60dp"
    android:layout_below="@+id/editPhoneCutomerDetails"
    android:layout_marginTop="10dp"
    android:background="@drawable/message_additional_box1x"
    android:ems="10"  
    android:padding="10dp"
    android:gravity="top">
    <requestFocus />
</EditText> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-01T12:04:02.217

要修复 editText 的大小，您可以使用

```
android:singleLine="true" 
```

但它可以将您的 editText 行限制为 1 。

如果您想在 editText 中添加更多行，请使用以下属性。

使用`android:lines="3"`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-01T12:05:07.147

用于`android:lines="2"`固定**多**线和**固定单线**使用`android:singleLine="true"`

例如使用这样的**多行显示**

```
<EditText
    android:id="@+id/.."
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@android:drawable/editbox_background_normal"
    android:ems="10"
    android:hint="Name"
    android:maxLength="20"
    android:lines="2"// fix the multiline limit 
    android:textColor="#000000" /> 
```

例如像这样使用，如**单行所示**

```
<EditText
    android:id="@+id/.."
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@android:drawable/editbox_background_normal"
    android:ems="10"
    android:hint="Name"
    android:maxLength="20"
    android:singleLine="true"// fix the single line limit 
    android:textColor="#000000" /> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-18T11:30:06.720

试试这个;

> android:inputType="textMultiLine"

```
 <EditText
        android:inputType="textMultiLine"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-05-02T16:19:07.073

由于现在不推荐使用单行，因此使用 inputType:multiline 并使用行标签设置所需的行数

```
<EditText
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="textMultiLine"
    android:lines="4"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-04T17:27:38.100

我有类似的要求，但最终没有改变盒子的大小。即它会随着文本的输入而增长，但不会阻止视图中的其他小部件。我在寻求过程中阅读了这篇文章并找到了解决方案。决定发回这里。将大小限制为一个值可能对不同的屏幕产生不同的影响。所以我觉得还是顺其自然比较好。

问题是将编辑文本与其余小部件放在一个线性布局中。代码和快照在这里 [带有确定取消按钮的多行编辑框](http://harisankar-krishnaswamy.blogspot.in/2013/07/android-ui-scrollable-edit-text-with-ok.html)

# delphi - Delphi 无法使用输出目录构建包

> ID：14110264
> 
> 赞同：1
> 
> 时间：2013-01-01T12:04:39.053
> 
> 标签：delphi, delphi-2010, packages, delphi-2007

我有 Delphi 2010，但由于某些原因我不得不卸载它，然后安装 Delphi 2007。

之后我必须构建一些包，最终会出现这些错误，因为我知道在我工作的电脑上它们构建时没有错误。

仅当我为要内置的项目提供输出目录时才会发生此错误。

这些是错误： ![在此处输入图像描述](../Images/9a3b274c3c5f55d85566af3700325c7f.png)

问题会是因为德尔福的版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T07:46:00.143

问题解决了。这是由于一个名为 PLATFORM 的环境变量造成的。

您可以看到这是以 PLATFORM 设置为 AnyCPU 为条件的。如果您将 PLATFORM 设置为 AnyCPU 以外的任何内容，则不会满足条件并且不会设置输出路径。

您可以通过以下步骤覆盖 IDE 中的环境变量：

选择工具 | 选项。在出现的对话框中，选择树中的环境变量节点。找到平台。单击添加覆盖...按钮。在变量值字段中，键入 AnyCPU。在两个对话框中单击确定并重新启动 IDE。现在将尊重输出路径。

# django - admin 和 cms 之间的区别 - django

> ID：14110276
> 
> 赞同：1
> 
> 时间：2013-01-01T12:05:30.597
> 
> 标签：django, content-management-system, admin

如果我的问题太简单和愚蠢，请不要投票。

我想知道 django 管理页面和 django cms 之间的区别。据我了解，两者几乎都做同样的事情，不是吗？有人可以告诉我两者之间的区别以及我为什么需要它们。我现在正在失去概述，不知道该怎么做，因为我现在正在创建一个更大的项目，我的理解是：

在管理员中：我可以添加新页面或删除它们，

在 CMS 中：我可以编辑这些页面的内容。

我对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T12:33:10.430

Django admin 本身并不是一个成熟的内容管理系统。是的，它将允许您对模型执行 CRUD 操作等。如果您有一个“页面”模型，您可以像 DjangoCMS 一样对页面进行 CRUD - 排序。

Django-CMS 建立在 Django admin 之上，为您提供专为内容管理设计的功能：构建导航层次结构、crud 内容、管理内容类型（Django-CMS 将这些称为“插件”）、提供编辑工作流程、管理权限页等

【无耻插头】

我为自由客户构建的大多数项目都有内容管理方面，而 Django-CMS 提供了一个出色的“基础”应用程序，您可以在此基础上构建自定义功能。它很容易扩展，我还没有遇到过 Django-CMS 无法处理的情况。

# android - 暂停和恢复计时器？

> ID：14110277
> 
> 赞同：2
> 
> 时间：2013-01-01T12:05:50.947
> 
> 标签：android, timer, handler, timertask

在我正在开发的游戏中，我想创建一个延迟。我所做的延迟是使用带有此代码的处理程序：

```
handler.postDelayed(new Runnable() {
        public void run() {
               animationDrawable.start();

                }
        },theDelay); 
```

问题是我有一个暂停按钮，它将使一切停止，并且在您再次恢复之前不做任何事情。现在，即使游戏暂停，它仍在运行。当我想暂停活动时，我得到了一个更改的布尔值。

我已经使用 Thread、TimerTask 和 Handler 搜索了解决方案，但是对于其中的每个人，我都看到了关于这些都不能安全使用的警告。

如何以安全的方式暂停和恢复此“倒计时”，而无需在恢复时重新开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T12:15:16.853

> 如何以安全的方式暂停和恢复此“倒计时”，而无需在恢复时重新开始？

1.  像这样启动处理程序时保存开始时间 - `startTime = System.currentTimeMillis();`
2.  在`onPause`保存那个时间`pauseTime = System.currentTimeMillis();`并取消亨德勒
3.  在里面`onResume`重新创建事件`pauseTime - startTime`

# google-app-engine - 建立 java.net 连接时在 GAE 上获取 IOException

> ID：14110278
> 
> 赞同：1
> 
> 时间：2013-01-01T12:06:13.887
> 
> 标签：google-app-engine, post, login

我创建了在 GAE 上运行并连接到特定页面的应用程序，自动登录到该页面，登录后我想接收 html 并处理它。

这是代码中有问题的（writer.write 部分和 connection.connect()）部分：

```
 this.username = URLEncoder.encode(username, "UTF-8");
        this.password = URLEncoder.encode(password, "UTF-8");
        this.login = "login";

        connection = (HttpURLConnection) url.openConnection();
        connection.setDoOutput(true);
        connection.setRequestMethod("POST");

        OutputStreamWriter writer = new OutputStreamWriter(
                connection.getOutputStream());
        writer.write("str_login=" + login + "&str_user=" + username
                + "&str_pass=" + password);
        writer.close();

        connection.connect(); 
```

我在建立连接时收到 IOException (connection.connect())。问题是“application/x-www-form-urlencoded”数据。当我向页面传递错误的参数（例如 str_passSSs、str_usernaAAme 或根本没有参数）时，我无法登录，但我确实得到了登录页面的 html 响应。因此，Google App Engine 似乎不支持这种通信。是否可以通过 GAE 支持的其他方式登录此页面？

在 Wireshark 中，我看到用户名和密码作为基于行的文本数据（application/x-www-form-urlencoded）以纯文本形式发送。我知道这不安全，但就是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:28:07.267

当您调用 getOutputStream() 时，连接已经隐式建立。无需再次调用 connection.connect() 。

此外，不要关闭输出编写器，而是尝试使用 flush()。

作为最佳实践，您应该在 finally 块中关闭、关闭和连接：

```
InputStream in = null;
OutputStream out = null;
HttpUrlConnection conn = null;

try {
  ...
} catch (IOException ioe) {
  ...
} finally {
  if (in!=null) {try {in.close()} catch (IOException e) {}}
  if (out!=null) {try {out.close()} catch (IOException e) {}}
  if (conn!=null) {try {conn.close()} catch (IOException e) {}} 
} 
```

# xquery - XQuery 错误：属性必须跟在根元素之后

> ID：14110279
> 
> 赞同：2
> 
> 时间：2013-01-01T12:06:15.803
> 
> 标签：xquery, basex

祝大家新年快乐！

我正在使用[BaseX](http://basex.org)学习 XQuery，现在面临以下问题。

我正在解析作为分发部分的[factbook.xml](http://files.basex.org/xml/factbook.xml)文件。

以下查询运行正常：

```
 for $country in db:open('factbook')//country
 where $country/@population < 1000000 and $country/@population > 500000
 return <country name="{$country/name}" population="{$country/@population}">
 {
   for $city in $country/city
   let $pop := number($city/population)
   order by $pop descending
    return <city  population="{$city/population/text()}"> {$city/name/text()}
    </city>
 }
 </country> 
```

但是在尝试生成运行第二个查询的 html 时 - 如果我尝试将其放入`"{$country/@population}"`标记中，`<h2>Country population: </h2>`我会看到一条错误消息“属性必须跟随根元素”。

```
 <html><head><title>Some Countries</title></head><body>
 {
  for $country in db:open('factbook')//country
 let $pop_c := $country/@population
 where $pop_c < 1000000 and $pop_c > 500000
 return
 <p>
 <h1>Country: {$country/name/text()}</h1>
 <h2>Country population: #error comes if I put it here!#</h2>
 {
 for $city in $country/city
 let $pop := number($city/population)
 order by $pop descending
 return ( <h3>City: {$city/name/text()}</h3>,
 <p>City population: {$city/population/text()}</p>
 )
 }
 </p>
 }
 </body></html> 
```

我的错误在哪里？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T18:48:27.217

只需使用：

```
{$country/@population} 
```

复制结果中的*属性*总体。一个属性应该紧跟在一个元素（或其他跟在该元素后面的属性）之后——但是这个属性跟在一个文本节点之后，这会导致引发错误。

**使用**：

```
<h2>Country population: {string($country/@population)} </h2> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:44:15.583

编写 {$country/@population} 时，插入的不是人口属性的文本，而是属性本身。如果您之前没有“国家人口文本”，则使用 {$country/@population} 会创建类似`

如果您想要它的值，请使用：

```
{data($country/@population)} 
```

或者

```
{data($pop_c)} 
```

因为您已经将它放在变量中。（也可以用数字或者字符串函数代替data，不过我觉得data是最快的）

# xml - 如何在 Phpstorm 中重新格式化 XML 文件？

> ID：14110280
> 
> 赞同：14
> 
> 时间：2013-01-01T12:06:17.537
> 
> 标签：xml, phpstorm

我正在使用 Phpstorm，我有一些 XML 文件，它只有一行，但包含很多（嵌套）元素。只是一个普通的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<response><status><version>4.2</version><code>0</code><message>Success</message></status><songs><song>... 
```

（[完整 XML 的要点](https://gist.github.com/4426953)）。

打开该文件后，我想用缩进重新格式化它。

我曾尝试使用*重新格式化代码...*（`Ctrl`+ `Alt`+ `L`），但它没有改变任何东西。我还查看了 XML 代码样式设置，但我没有看到任何阻碍。

Phpstorm 是否可以重新格式化 XML 文件以缩进嵌套的 XML 元素？

像这样的方向的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
  <status>
    <version>4.2</version>
    <code>0</code>
    <message>Success</message>
  </status>
  <songs>
    <song>
      ... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-01T20:50:07.477

对我有用（尝试使用完整的 XML，而不是片段）——大约需要 5-7 秒才能完成......但做得很好（PhpStorm v6 EAP build 124.373）。

很可能是您的设置（**代码样式 | XML | 其他**）：也许您选中*了“保持换行符”*选项或类似选项？

# android - Android 4.1+：在写入通话记录之前更改号码？

> ID：14110282
> 
> 赞同：5
> 
> 时间：2013-01-01T12:06:47.640
> 
> 标签：android, android-intent

我有一个小应用程序可以拦截拨出电话并在拨打之前更改号码。自然地，然后将修改后的号码写入通话记录。我想添加一个选项以将原始号码放入通话记录。我已经发现可以读取和写入通话记录。

在写入日志条目之前是否还有一个意图，我可以在将其存储到日志之前轻松更改数字，而不是在写入后进行编辑，类似于 `<action android:name="android.intent.action.NEW_OUTGOING_CALL" />`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:59:30.950

这里[[1]](https://stackoverflow.com/questions/2477889/intent-to-be-fired-when-a-call-ends)我读到你可以拦截“结束通话”的动作，然后我想你可以尝试从日志中删除修改后的数字（你已经意识到），然后写原来的

# arrays - 均衡数组所需的最少变换次数

> ID：14110283
> 
> 赞同：3
> 
> 时间：2013-01-01T12:06:47.790
> 
> 标签：arrays, algorithm

给定一个包含 n 个正元素（包括 0）的数组。我们只允许执行一种转换，即增加列表中除一个之外的每个元素。均衡此列表所需的最少转换次数是多少？

例如`n = 3`， 和数组是`1,2,3`。我们需要 3 个这样的转换：

`2,3,3 --> 3,3,4 --> 4,4,4`.

`n = 4`并且列表是所需的`1,3,2,4`最小转换次数是 6

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-01T12:24:52.063

您实际上不需要显示转​​换，但可以找到所需的此类转换的总数。

增加一个元素以外的所有元素本质上与减少一个元素相同（为了均衡所有元素）。

**策略**：减少所有非最小元素，直到它们等于最小元素。

例如。如果元素是 {x1, x2, x3, x4...... xn}，则转换次数将为

```
let min = min{x1 .. xn}
for(int x : arr){
    // decrement x until x == m
} 
```

转换总数

```
sum(k = 1 to n)x(k)−n*min{x1,…,xn} 
```

样品运行：

```
For array = {1,2,3}
sum(k=1 to n) x(k) = (1 + 2 + 3) = 6
n = 3
min = 1
num_transformations = 6 - 3*1 = 3 transformations 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T12:22:16.270

如果您意识到您的转换与从一个元素中减去 1 相同，并且作为最后一步将 n 添加到每个元素，其中 n 是转换的数量，那么争论这一点会容易得多。例如 1,2,3->1,2,2->1,1,2->1,1,1 最后是 4,4,4

这当然意味着您需要（使用 a 数组，a_i 第 i 个元素，m 数组中的最小元素） sum_i(a_i - m) 转换。

所以你的方法是

```
m=min(a)
for each (e in a) {
   while (e>m) {
      //transform so that e is reduced by 1
   }
} 
```

# php - 按数组计算数组

> ID：14110285
> 
> 赞同：1
> 
> 时间：2013-01-01T12:06:53.163
> 
> 标签：php, arrays, sum, grouping

是否可以按数组计算数组？

例如，计算 和`[num]`每个`[price]`的总和`[group]`。

```
Array
(
    [0] => Array
        (
            [group] => Apple
            [num] => 5
            [price] => 10
        )

    [1] => Array
        (
            [group] => Apple
            [num] => 2
            [price] => 8
        )

    [2] => Array
        (
            [group] => Orange
            [num] => 4
            [price] => 6
        )

    [3] => Array
        (
            [group] => Orange
            [num] => 12
            [price] => 24
        )

) 
```

结果将是：

```
Array
(
    [0] => Array
        (
            [group] => Apple
            [num] => 7
            [price] => 18
        )

    [1] => Array
        (
            [group] => Orange
            [num] => 16
            [price] => 30
        )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:10:18.673

简单的循环和关联数组将完成这项工作：

```
$result = Array();
foreach($array as $row) {
   if(!isset($result[ $row['group'] ])) {
       $result[ $row['group'] ] = $row;
       continue ;
   }
   $result[ $row['group'] ]['num'] += $row['num'];
   $result[ $row['group'] ]['price'] += $row['price'];
}
$result = array_values($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:23:42.947

使用`array_reduce()`：

```
$reduced = array_reduce($array, function(&$result, $item){
    $result[$item['group']]['num'] += $item['num'];
    $result[$item['group']]['price'] += $item['price'];
    return $result;
}); 
```

# api - 一个很好的名言API

> ID：14110288
> 
> 赞同：47
> 
> 时间：2013-01-01T12:07:21.713
> 
> 标签：api, rest, quotes

我正在寻找用于检索名言的 API。我一直在简短地查看 Quotes Daddy、STANDS4 和 I heart 语录。

有没有人尝试过一个好的，最好是 REST API 来检索报价？它必须能够获得作者等的报价。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-01T12:13:18.620

维基百科确实有一个 API。维基语录也是如此：[http ://en.wikiquote.org/w/api.php](http://en.wikiquote.org/w/api.php)

也许试一试...

# mysql - 如何从表中选择相关表中没有对应行的行？

> ID：14110290
> 
> 赞同：1
> 
> 时间：2013-01-01T12:07:23.043
> 
> 标签：mysql, sql, join

我有两个 MySQL 表：

*   `alerts`
*   `alerts_viewed`

Alerts 是一个表，其中包含有关警报的基本信息，该`alerts_viewed`表包含有关已查看警报的信息（按用户 ID 和警报 ID）：

上的字段`alerts_viewed`是：

*   ID
*   alert_id（FK 到警报表）
*   user_id（FK 到用户表）
*   is_hidden

基本上，我知道如果我只想从警报中选择具有相应行的行`alerts_viewed`，我可以执行 INNER JOIN。我只是不知道如何去做另一个方向。

如何从`alerts`表中选择表中没有相应行的所有行`alerts_viewed`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T12:09:18.200

采用`LEFT JOIN`

```
SELECT  a.*
FROM    alerts a
        LEFT JOIN alerts_viewed b
            ON a.alert_id = b.alert_id
WHERE   b.alert_id IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:08:59.160

```
select * from alerts
where id not in (select alert_id from alert_viewed) 
```

或者

```
select a.* from alerts a
left outer join alert_viewed av on a.id = av.alert_id 
where av.alert_id is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T14:03:30.313

除了 JW 和 Juergen 的回答之外，我还想提出另一种方法

**不存在**，

```
select * from alerts aa
where not exists
   (select alert_id 
   from alert_viewed av
   where av.alert_id=aa.id
   ) 
```

# c# - HMC SHA1 哈希 - C# 产生与 PHP 不同的哈希输出

> ID：14110291
> 
> 赞同：1
> 
> 时间：2013-01-01T12:08:13.963
> 
> 标签：c#, php, hmacsha1

我在 PHP 中有一个代码，当我执行下面的 PHP 代码时，当我运行 PHP 代码下面的 C# 代码时，我得到了不同的结果，我不知道我错在哪里。

```
$accessID = "member-1681fca809";
$secretKey = "63f22236ab43b69462b3272b110e3c78";

$expires = 1357039353;
$stringToSign = $accessID."\n".$expires;

$binarySignature = hash_hmac('sha1', $stringToSign, $secretKey, true);
$urlSafeSignature = urlencode(base64_encode($binarySignature));
print_r($expires);
print_r($urlSafeSignature);

I got Output
1357039353
M1PZW2DYVzdRV1l4ZHBPAmiv9iM%3D 
```

当我在 c# 中运行相同的代码时，我得到了不同的输出

```
string accessid = "member-1681fca809";
string secretekey = "63f22236ab43b69462b3272b110e3c78";
int Expire = 1357039353;

string stringTosign = accessid + Environment.NewLine + Expire;
byte[] secret = UTF8Encoding.UTF8.GetBytes(secretekey);

HMACSHA1 myhmacsha1 = new HMACSHA1(secret);
byte[] byteArray = Encoding.ASCII.GetBytes(stringTosign);
MemoryStream stream = new MemoryStream(byteArray);
byte[] hashValue = myhmacsha1.ComputeHash(stream);
string k = Convert.ToBase64String(Encoding.ASCII.GetBytes(hashValue.ToString()));

console.WriteLine(Expire);
console.WriteLine(k);

I Got OutPut
1357039353
U3lzdGVtLkJ5dGVbXQ== 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:16:50.317

稍微修改了你的代码。

```
string accessid = "member-1681fca809";
string secretekey = "63f22236ab43b69462b3272b110e3c78";
int Expire = 1357039353;

string stringTosign = accessid + "\n" + Expire;
byte[] secret = UTF8Encoding.UTF8.GetBytes(secretekey);

HMACSHA1 myhmacsha1 = new HMACSHA1(secret);
byte[] byteArray = Encoding.ASCII.GetBytes(stringTosign);
MemoryStream stream = new MemoryStream(byteArray);
byte[] hashValue = myhmacsha1.ComputeHash(stream);
string k = Convert.ToBase64String(hashValue);

Console.WriteLine(Expire);
Console.WriteLine(k); 
```

唯一的区别是最后一个字符，因为您使用 url_encode 将转换“=”字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T09:33:59.917

谢谢！问题解决了，还是想分享一下我的经验。

我犯的错误是我使用了字符串生成器 sbr.Append 而不是 sbr.AppendLine() 或直接字符串连接，就像你在 \n 被读取为新行时所做的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T21:42:47.293

当您获得 HMACSHA1/hash_hmac('sha1', ...) 的不同结果时，开始使用非常简单的输入（如 input = "a"、key = "b"）对 PHP 和 C# 版本进行拆分测试。如果您在将密钥传递给 HMACSHA1 之前对其进行编码，请检查您的编码是否正确。我花了几个小时认为问题是 HMACSHA1 散列，而实际上它是一个糟糕的 pack('H*'...) 实现。

```
public static string Encode(string input, byte[] key)
{
    HMACSHA1 myhmacsha1 = new HMACSHA1(key);
    byte[] byteArray = Encoding.ASCII.GetBytes(input);
    MemoryStream stream = new MemoryStream(byteArray);
    return myhmacsha1.ComputeHash(stream).Aggregate("", (s, e) => s + String.Format("{0:x2}", e), s => s);
} 
```

和 pack('H*'...) C# 实现：

```
public static byte[] PackH(string hex)
{
    if ((hex.Length % 2) == 1) hex += '0';
    byte[] bytes = new byte[hex.Length / 2];
    for (int i = 0; i < hex.Length; i += 2)
    {
        bytes[i / 2] = Convert.ToByte(hex.Substring(i, 2), 16);
    }
    return bytes;
} 
```

当您将内容传递给 Encode 函数时，请勿将内容从字节数组转换为字符串然后再转换回字节数组，只需传递一个 byte[] 并保持简单。

# custom-fields - 自定义 WP_Query - meta_query 被忽略

> ID：14110311
> 
> 赞同：1
> 
> 时间：2013-01-01T12:10:10.003
> 
> 标签：custom-fields, wordpress

我想展示一些带有特定元键值的“艺术品”。每件艺术品都有一个自定义字段：“votes_average”和另一个“votes_count”。这是我的自定义查询：

```
$args = array(
    'post_type' => 'artworks',
    'post_status' => 'publish',
    'orderby' => 'meta_value_num',
    'order' => 'DESC',
    'meta_query' => array(
        'relation' => 'AND',
        array(
           'key' => 'votes_average',
           'value' => '6',
           'compare' => '>=',
           'type'    => 'DECIMAL',
        ),
        array(
           'key' => 'votes_count',
           'value' => '1',
           'compare' => '>',
           'type'    => 'NUMERIC',
        ),
    ),
    'tax_query' => array(
        array(
            'taxonomy' => 'type',
            'field' => 'slug',
            'terms' => $term
        )
    )
); 
```

我不明白为什么这个查询显示平均为 5,8 的艺术品。我犯错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:30:09.853

问题是 MySQL 将 5.8 舍入到 6 并在查询中使用。适当的查询部分看起来像

```
(wp_postmeta.meta_key = 'votes_average' AND CAST(wp_postmeta.meta_value AS DECIMAL) >= '6') 
```

所以你可以用 NUMERIC 替换 DECIMAL 来解决这个问题。

```
 array(
       'key' => 'votes_average',
       'value' => '6',
       'compare' => '>=',
       'type'    => 'NUMERIC',
    ), 
```

# webdriver - 使用 Internet Explorer 驱动程序进行网站身份验证

> ID：14110315
> 
> 赞同：1
> 
> 时间：2013-01-01T12:10:28.393
> 
> 标签：webdriver

我的网站要求用户登录系统。当用户在输入用户名和密码后单击登录按钮时，主登录窗口会打开一个新的浏览器窗口并在其中显示主页。这在手动执行时工作得非常好，但是当我尝试使用 Webdriver/Java 运行类似的脚本时，不仅身份验证失败，而且 webdriver 打开 2 个浏览器弹出窗口而不是一个。我在这里做错了什么？我在下面分享了我的代码。

我在带有 Eclipse IDE 的 Windows 8 和 IE 10 上使用 internetexplorerdriver。

公共类应用程序{

```
public static void main(String[] args) {

    WebDriver driver = new InternetExplorerDriver();

    driver.get("http://cmdlhrstg04/QAWorkSpace/datlogin.asp");
    driver.findElement(By.id("vchLogin_Name")).sendKeys("xyz");
    driver.findElement(By.id("vchPassword")).sendKeys("xx");
    driver.findElement(By.id("LoginImg")).click();

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:41:12.090

由于还有另一个窗口打开，您需要在新的驱动程序窗口中处理事件

```
//Store the current window handle
        String winHandleBefore = driver.getWindowHandle();

        //Perform the click operation that opens new window
             driver.findElement(By.id("LoginImg")).click();

        //Switch to new window opened
        for(String winHandle : driver.getWindowHandles()){
            driver.switchTo().window(winHandle);
        }

        // Perform the actions on new window
      Do your homepage actions 
            //Close the new window, if that window no more required
    driver.close();

        //Switch back to original browser (first window)

        driver.switchTo().window(winHandleBefore);

        //continue with original browser (first window) 
        } 
```

# asp.net - 跟着剃须刀有什么问题

> ID：14110316
> 
> 赞同：-1
> 
> 时间：2013-01-01T12:10:39.490
> 
> 标签：asp.net, razor

```
@for (int counterA = 0; counterA < TotalIterations; counterA++)
{
    <tr>
    @for (int DayCounter = (counterA * 10); DayCounter <= ((counterA + 1) * 10) - 1; DayCounter++)
    {
        <td>a

        @{
            string @isCurrent = "0";
            if (1 == 1)
            {
            }
        }
        </td>
    }
    </tr>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:14:28.847

以下行可能是问题所在：

```
string @isCurrent = "0"; 
```

没有必要在`@`这里放一个。写吧：

```
string isCurrent = "0"; 
```

# mysql - 使用查询结果获取列中重复值的计数

> ID：14110318
> 
> 赞同：3
> 
> 时间：2013-01-01T12:10:41.453
> 
> 标签：mysql

我想在查询结果的列中计算结果中有多少值重复。

我从复杂查询中得到的结果集是 -

```
svn rvn eng     count(*)
1   1   Boy            1
2   1   Teacher        1
3   1   Chair          1
3   2   Chairwoman      1
3   3   Chairperson     1
4   1   Without         1
4   2   Without fail    1
5   1   Anyone          1
5   2   Anyone else     1
6   1   Permission      1 
```

我只想`SVN`在第四列中获取列中重复值的数量。

IE

```
svn rvn eng     count(*)
1   1   Boy            1
2   1   Teacher        1

3   1   Chair          3
3   2   Chairwoman      3
3   3   Chairperson     3

4   1   Without         2
4   2   Without fail    2

5   1   Anyone          2
5   2   Anyone else     2
6   1   Permission      1 
```

请帮我解决这个问题，还请告诉我这会对查询效率造成什么影响？

**注意 - **我想要在结果集中提取的值的计数。表中有更多的条目`svn`1,2,4,6。但只计算选择了多少。

提前致谢 ：）

**编辑1**

这是我当前的查询：-

```
SELECT `svn` , `rvn` ,`eng` , count(*) FROM 
        (SELECT `svn`, `rvn`, `eng`, `hin` 
              FROM `table1` 
              WHERE `SN` = @sn
            UNION DISTINCT
            SELECT `table1_refer`.`sn_svn` AS 'svn',  
                           `table1`.`rvn`, `table1`.`eng` ,  
                          `vocab_rel`.`hin`
            FROM  `table1` 
            JOIN  `table1_refer` 
            WHERE  `table1_refer`.`rSN` =  `table1`.`SN` 
            AND  `table1_refer`.`svn` =  `table1`.`svn` 
            AND `table1_refer`.`SN` = @sn
        ) AS SUBQUERY
        GROUP BY `svn`,`rvn`
        ORDER BY `svn`, `rvn` 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T12:12:58.120

您可以在当前复杂查询中使用相关子查询来执行此操作：

```
SELECT
  svn, 
  rvn,
  eng,
  (SELECT count(t2.svn)
   FROM Tablename t2
   WHERE t2.svn = t1.svn
  ) AS Count
FROM Tablename t1
.... 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/2542c/1)

这会给你：

```
| SVN | RVN |         ENG | COUNT |
-----------------------------------
|   1 |   1 |         Boy |     1 |
|   2 |   1 |     Teacher |     1 |
|   3 |   1 |       Chair |     3 |
|   3 |   2 |  Chairwoman |     3 |
|   3 |   3 | Chairperson |     3 |
|   4 |   1 |     Without |     2 |
|   4 |   2 | Withoutfail |     2 |
|   5 |   1 |      Anyone |     2 |
|   5 |   2 |  Anyoneelse |     2 |
|   6 |   1 |  Permission |     1 | 
```

# python - 使用ajax从服务器获取数据并将其放入数据表中

> ID：14110319
> 
> 赞同：-1
> 
> 时间：2013-01-01T12:10:41.817
> 
> 标签：python, ajax, django, json, datatable

我有一个数据数组，其中每个元素都是一个字典。像这样：

```
list = [{'id': '1', 'name':'first', 'type': 'item', 'status': 'ok'},
        {'id': '2', 'name':'second', 'type': 'item', 'status': 'ok'},
        {'id': '3', 'name':'third', 'type': 'kit', 'status': 'ok'}] 
```

我的网页中有一个数据表，对于每一行，都有一个删除选项，当用户删除某些行时，也会对服务器进行 ajax 调用以从列表中删除该项目。但是在表格中显示新数据时存在问题。表不承认它应该再次初始化。例如我用

```
{{ forloop.counter }} 
```

用于显示行号，如果我删除某些行，数字列不会刷新并且仍然有旧数字。所以我不能再使用行号来删除行，因为它们不在范围内。我想知道我是否将新数据提供给 dataTable。但我不知道如何响应 ajax 调用。我也一直在尝试重绘数据表，但没有奏效。

顺便说一句，我使用 django 和 python，我不想使用 asp 或 php 代码行

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:44:40.630

我已经解决了我没有从服务器取回数据的问题我只是删除了一些行并使用新节点作为 aaData 和 aoColumns 重绘表顺便说一句我实际上将 bDestroy 设置为 true 以重绘服务器端进程，我使用了一些隐藏的输入并发送已删除元素的 id 代码行，这是 ajax 代码：

```
var required_data = {deleted_nodes:tr_id};
$.ajax({
    type:"POST",
    cache:false,
    url:$('#items_form').attr('action'),
    data:required_data,
    success:function () {
    }
}); 
```

这是重绘表格的代码：

```
var table = $('#itemsTable').dataTable({"bRetrieve":true});
var nodes = table.fnGetNodes();
table.fnDeleteRow(nodes[parseInt(tr_number) - 1], null, true);
nodes = table.fnGetNodes();
var data = [];
for (var i = 0; i < nodes.length; i++) {
    data.push(
            {
                count:(i + 1).toString(),
                name:nodes[i].cells[1].innerHTML,
                type:nodes[i].cells[2].innerHTML,
                specialName:nodes[i].cells[3].innerHTML,
                status:nodes[i].cells[4].innerHTML,
                manage:nodes[i].cells[5].attributes['id']
            }
    );
}
var oSettings = {
    "aaData":data,
    "aoColumns":[
        {"sTitle":"number", "mDataProp":"count", "style":"width:10px;"},
        {"sTitle":"name", "mDataProp":"name", "style":"width:50px;"},
        {"sTitle":"type", "mDataProp":"type", "style":"width:50px;"},
        {"sTitle":"special name", "mDataProp":"specialName", "style":"width:50px;"},
        {"sTitle":"status", "mDataProp":"status", "style":"width:50px;"},
        {"sTitle":"management", "mDataProp":"manage", "style":"width:25px; text-align: center;"}
    ],
    "sScrollY":"500px",
    "bPaginate":false,
    "bScrollCollapse":true,
    "bFilter":false,
    "bDestroy":true,
    "fnRowCallback":function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        var str = '<span><img src="' + 'error.png' +
                '" name="delete"' + ' style="width:20px;height:20px;cursor:pointer" ' +
                'onclick="' + "delete_item('" + aData.count + "', '" + aData.manage.value + "');" +
                '" class="small-icon"' + ' title="delete this" /></span>' +
                '<span><img src="' + 'warning.png' +
                '" name="edit"' + ' style="width:20px;height:20px;cursor:pointer" ' +
                'onclick="' + "report_problem('" + aData.count + "', '" + aData.manage.value + "', '" + aData.type + "');" +
                '" class="small-icon"' + ' title="edit this" /></span>';
        $('td:eq(5)', nRow).html(str);
        $('td:eq(5)', nRow)[0].setAttribute('id', aData.manage.value);
    }
};
table.dataTable('#itemsTable', oSettings); 
```

我使用元素的 ID 作为每行中第五个 TD 的 ID，所以我通过以下方式检索：

```
manage:nodes[i].cells[5].attributes['id'] 
```

之后我使用 fnRowCallback 实际做了两个任务： 1- 使用一些图片元素来创建一个好的用户界面。它是通过使用完成的

```
$('td:eq(5)', nRow).html(str); 
```

2- 再次设置第五个 TD 的 ID 以供进一步使用。它是通过使用完成的

```
$('td:eq(5)', nRow)[0].setAttribute('id', aData.manage.value); 
```

;-)

# css - CSS3 Flip 动画在 Firefox 中不保留 3D 旋转

> ID：14110323
> 
> 赞同：1
> 
> 时间：2013-01-01T12:11:17.713
> 
> 标签：css, webkit, transform, transition

我已经设置了一个 FLIP 动画，它使用 CSS3 变换属性使用转换来创建一个面板，该面板在 Y 访问上翻转作为显示和隐藏效果。

示例 [http://jsfiddle.net/L9wDd/84/](http://jsfiddle.net/L9wDd/84/)

过渡在 Chrome 和 Safari 中看起来很漂亮（即使用 -webkit-），但是在 -moz 上，动画不是 3 维的。它仍然有效，但缺少可以在 -webkit- 上看到的 3 维翻转。少了什么东西：

```
.container {
    position:relative; display:block;
    -webkit-perspective:1000; -moz-perspective:1000; perspective:1000;
}
.panel {
    margin:50px 100px 50px 100px; position:absolute; top:0; left:0; width:300px; height:300px; background:blue; border:5px solid rgba(0,0,0,0.3); border-radius:20px; padding:20px; color:#FFF; box-shadow:0 0 20px rgba(0,0,0,0.3); display:block; z-index:1; opacity:0;
  -webkit-transition:all 1.2s; -moz-transition:all 1.2s;
  -webkit-backface-visibility:hidden; -moz-backface-visibility:hidden; 
  -webkit-transform: rotateY(180deg); -moz-transform: rotateY(180deg);
}
.panel.shown {
    opacity:1; z-index:2;
   -webkit-transform:rotateY(0deg); -moz-transform:rotateY(0deg);
}
.panel.seen {
    opacity:0; z-index:1;
   -webkit-transform:rotateY(-180deg); -moz-transform:rotateY(-180deg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:49:30.953

过渡的 3D 国家依赖于 CSS3 属性透视图。此属性目前仅在 -webkit- 中受支持。

[http://www.w3schools.com/cssref/css3_pr_perspective.asp](http://www.w3schools.com/cssref/css3_pr_perspective.asp)

# ruby-on-rails - Ruby 解释器 (CUI) 1.9.2p180 [i386-mingw32] 已停止工作 - 正在安装

> ID：14110325
> 
> 赞同：-2
> 
> 时间：2013-01-01T12:12:05.247
> 
> 标签：ruby-on-rails, installation, devkit

我开始根据本教程[安装ruby​​ 和 devkit。](http://www.youtube.com/watch?v=WUdDdiu8kBs)

但是当我尝试从 ruby​​ 打开 cmd 或在该文件夹上运行命令时，我不断收到相同的错误：Ruby 解释器 (CUI) 1.9.2p180 [i386-mingw32] 已停止工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T11:51:27.327

下载 ANSICON v1.53。它在 Window 8 X64 位环境中对我来说工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:43:01.727

Did you installed rvm.? May be there are some missing dependencies. There isn't much info in question, but you can do following:

1) if on ubuntu - update / install build-essential

2) Install RVM

3) type rvm requirements and look for dependencies under Ruby / Ruby Head and install them all.

4) rvm install 1.9.2-p180

Read this great article by Ryan Bigg: [http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-20T09:38:07.130

问题是我试图安装的 ansicon 来支持黄瓜

# codeigniter - CodeIgniter 中的输出压缩

> ID：14110328
> 
> 赞同：4
> 
> 时间：2013-01-01T12:12:10.837
> 
> 标签：codeigniter, codeigniter-2

现在是在[CodeIgniter](http://codeigniter.com)`common practice`上启用输出压缩吗？

# android - 谷歌播放apk上传错误

> ID：14110329
> 
> 赞同：0
> 
> 时间：2013-01-01T12:12:11.193
> 
> 标签：android, google-play

谷歌播放一直说您需要为您的 apk 上传图标但我的可绘制文件夹中有图标并签署了 apk。即使在 apk 中我也有 512x512 大小的图标，但谷歌仍然给我这个错误 ![在此处输入图像描述](../Images/fe79b9f0257dc107e8f2d246a0da5855.png)

![在此处输入图像描述](../Images/c23913e57a392678c1214cdf325429ca.png)

下面是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.laysapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="13" />

<uses-permission android:name="android.permission.INTERNET" />
<!-- Permission to write to external storage -->
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<application
    android:name="com.example.laysapp.MyGobalApp"
    android:allowBackup="true"
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/AppBaseTheme" >
    <activity
        android:name="com.example.laysapp.SplashAtivity"
        android:label="@string/app_name"
        android:theme="@style/AppBaseTheme" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.HomeActivity"
        android:label="@string/app_name"
        android:launchMode="standard"
        android:theme="@style/AppBaseTheme" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.FornoMenu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.SignInActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.RegisterActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.FornoMenuActivity.Watch_Story"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.FornoMenuActivity.What_we_about"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.FornoMenuActivity.YouShare"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.FornoMenuActivity.Flavor"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.FornoMenuActivity.TermsandCondition"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.FornoMenuActivityp.Privacy"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.FornoMenuActivity.Language"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.AdminPage.Topic_of_the_week"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.AdminPage.Hilariouscope"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.RegisteredUser.RegisteredMain"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.RegisteredUser.LighterSide_Home"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="com.example.laysapp.RegisteredUser.Laughs_Compose"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.RegisteredUser.LightStories_Compose"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.RegisteredUser.Funtography_Compose"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.ReportingPages.Report_SinglePage_Laugh"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.ReportingPages.Report_SinglePage_LightStories"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.ReportingPages.Report_SinglePage_Funtography"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.ReportingPages.Report_Main_Type"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.UserOwnPage.Ownpost_Laugh"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.UserOwnPage.Ownpost_funto"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.UserOwnPage.Ownpost_Light"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.laysapp.ContentList"
        android:label="@string/app_name" >
    </activity>
</application>
<application>
</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:14:16.323

上传 512*512 的图标必须在 google play 上上传 apk 文件，否则 google play 将不允许上传您的应用程序。

有关在 Google Play/Android Market 上上传 APK 文件的完整信息，请参阅下面的链接。

[上传应用程序 - Google Play](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113469)

# c++ - glScalef 用于光栅字体，OpenGL

> ID：14110332
> 
> 赞同：2
> 
> 时间：2013-01-01T12:12:31.437
> 
> 标签：c++, opengl, fonts, ftgl

我有一个简单的问题。我正在使用 FTGL 库`PixmapFont`在我的游戏应用程序中绘制我的。我的问题是 - 是否可以使用`glScalef()`缩放光栅字体？据我了解，如果我必须使用`glRasterPos()`而不是`glTranslatef()`它也可能考虑`glScalef()`功能？但如果是这样，是否有任何方法可以缩放这种字体？

这是我需要缩放的：

我可以改变它的大小，只需把这个：

```
font->FaceSize(12); 
```

但是对于这么小的字体，它给了我模糊的效果。从我在某处读到的内容来看，最好渲染更大尺寸的字体 - 例如 72 - 然后将其缩小，因为它可以提供更好的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:33:39.980

OpenGL 位图绘制函数 (glBitmap) 不受转换管道的影响，因为它们直接进入帧缓冲区。然而，位图绘制函数过去总是很慢，支持很差，并且已从更高版本的 OpenGL 中完全删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:31:07.570

您需要使用[纹理字体，而不是像素图（光栅）字体](http://ftgl.sourceforge.net/docs/html/ftgl-tutorial.html)。这会将字体绘制为映射到三角形基元的纹理，这比直接绘制到帧缓冲区更加灵活和广泛支持。另请参阅[`FTTextureFont`文档](http://ftgl.sourceforge.net/docs/html/classFTTextureFont.html)。

因为它只是渲染 OpenGL 基元，所以这种方法会考虑您使用 设置的所有常用转换`glTranslatef`，`glScalef`依此类推。为了获得最清晰的结果，请使用`glOrtho`设置像素完美的投影矩阵。

# wpf - 所有 DataGrid 的 DataGridTextColumn.EditingElementStyle

> ID：14110333
> 
> 赞同：5
> 
> 时间：2013-01-01T12:12:36.023
> 
> 标签：wpf, validation

[虽然 MSDN 说“您不能像使用简单控件那样使用 Validation.ErrorTemplate 附加属性”](http://msdn.microsoft.com/en-us/library/ee622975(v=vs.100).aspx)似乎令人困惑，但我发现可以在我的每个窗口 xaml 中设置验证错误模板，如下所示：

```
<DataGridTextColumn ...>
    ...
    <DataGridTextColumn.EditingElementStyle>
        <Style>
            <Setter Property="Validation.ErrorTemplate" 
                    Value="{StaticResource MyValidationErrorTemplate}"/>
        </Style>
    </DataGridTextColumn.EditingElementStyle>
</DataGridTextColumn> 
```

我现在想要的是为共享主题资源字典中的所有数据网格设置错误模板。但我不能执行以下操作：

```
<Style TargetType="{x:Type DataGridTextColumn}">
    <Setter Property="Validation.ErrorTemplate" 
            Value="{StaticResource MyValidationErrorTemplate}"/>
</Style> 
```

因为`DataGridTextColumn`不是继承自`FrameworkElement`; 因此不能具有样式属性（请参阅[为什么我不能设置 DataGridTextColumn 的样式？](https://stackoverflow.com/questions/2630292/why-i-cant-style-the-datagridtextcolumn)）。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-04T15:19:34.133

我正在寻找同一个问题的答案。您可以使用以下样式使分配稍微不那么冗长。

```
<Style x:Key="TextColumnErrorStyle" TargetType="{x:Type TextBox}">
    <Setter Property="Validation.ErrorTemplate" Value="{StaticResource ErrorTemplateStyle}"></Setter>
</Style> 
```

用法：

```
<DataGridTextColumn Width="2*"  Header="IP Address" 
    Binding="{Binding IpDestination,    
    UpdateSourceTrigger=PropertyChanged, 
    ValidatesOnExceptions=True}"
    EditingElementStyle="{StaticResource TextColumnErrorStyle}"/> 
```

啊。

# c# - 创建通用 IValueConverter 以将数据类型转换为字符串

> ID：14110335
> 
> 赞同：2
> 
> 时间：2013-01-01T12:12:44.407
> 
> 标签：c#, wpf, xaml, generics, binding

我想像这个类模板一样在我的 WPF 应用程序中创建一个通用数据类型转换器：

```
[ValueConversion(typeof(T), typeof(string))]
class DataTypeConverter<T> : IValueConverter 
```

将 int、double、byte、ushort 等数据类型转换为字符串，反之亦然，并以我的类的不同属性类型的两种方式绑定使用它，然后通过这一行代码简单地创建任何类型：

```
class ushortTypeConverter : DataTypeConverter<ushort>{} 
```

如果可能的话，在输入错误的情况下在绑定的文本框中显示验证消息。

是否可以编写这样的类模板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T12:30:40.740

不幸的是，您不能使用泛型属性（`typeof(T)`在 中。有关更多信息，`[ValueConversion(typeof(T), typeof(string))]`请参阅[为什么 C# 禁止泛型属性类型？](https://stackoverflow.com/questions/294216/why-does-c-sharp-forbid-generic-attribute-types)

除此之外，我想不出这种方法行不通的原因。但是，有像[System.ComponentModel.TypeConverter](http://msdn.microsoft.com/en-us/library/system.componentmodel.typeconverter.aspx)这样的类可以在没有泛型的情况下为您完成大部分转换。将其包装在一个简单的转换器中可能会更容易。

否则，有很多 IValueConverters 可以完成您需要的全部或部分工作。看：

*   [http://compiledexperience.com/blog/posts/useful-calue-converters](http://compiledexperience.com/blog/posts/useful-calue-converters)
*   [如何在 WPF 中将字符串绑定为双精度值？](https://stackoverflow.com/questions/845281/how-can-i-bind-a-string-to-double-in-wpf)
*   [http://wpftutorial.net/ValueConverters.html](http://wpftutorial.net/ValueConverters.html)

# html - 水平对齐图像

> ID：14110337
> 
> 赞同：-1
> 
> 时间：2013-01-01T12:13:08.893
> 
> 标签：html, css, alignment

如何水平对齐 div 中包含的图像？那是固定宽度。

示例代码：

**HTML**

```
<div id="random">
<a href=""><img src=".jpg" /><span></span></a>
<a href=".html"><h2>Title</h2></a><p>Info</p><p>Dd/Mm/Yyyy</p>
</div> 
```

**CSS**

```
#random{ 
max-width: 650px
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:50:22.420

通常浮动可以很好地水平对齐元素。在包含（父）元素上使用与 clearfix 类的结合，这样浮动不会破坏您的其他页面布局。

# HTML

```
<div class="horiz clearfix">
    <div><a href="www.google.com"><img src="https://www.pathe.nl/themes/main_theme/gfx/icons/placeholder-large.png"/>
        </a></div>
    <div><a href="www.stackoverflow.com"><h2>Title</h2></a><p>Info</p><p>Dd/Mm/Yyyy</p></div>
</div>
<div class="horiz clearfix">
    <div><a href="www.google.com"><img src="https://www.pathe.nl/themes/main_theme/gfx/icons/placeholder-large.png"/>
        </a></div>
    <div><a href="www.stackoverflow.com"><h2>Title</h2></a><p>Info</p><p>Dd/Mm/Yyyy</p></div>
</div>​ 
```

# CSS

```
/*
 * Clearfix: contain floats
 *
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    `contenteditable` attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that receive the `clearfix` class.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */

.clearfix:before,
.clearfix:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.clearfix:after {
    clear: both;
}

/*
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */

.clearfix {
    *zoom: 1;
}

.horiz > * {
  float: left;
  margin-right: 5px;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T13:06:50.360

```
.container{
  background:#d5d5d5;
  }
.container img{
  width:200px;
  margin:0 auto;
  display:block;
  }
```

```
<div class="container">
  <img src="https://dummyimage.com/200X200/000/fff"/>  
</div>
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-01T12:16:26.883

使用这样的东西：

**HTML**

```
<div id="random">
    <img src="1.jpg" />
    <img src="2.jpg" />
    <img src="3.jpg" />
</div> 
```

**CSS**

```
#random{ 
    max-width: 650px
}

#random img{
    display:inline-block;
    width:80px;
} 
```

# eclipse - Eclipse C++ 仅在调试时查看输出

> ID：14110347
> 
> 赞同：3
> 
> 时间：2013-01-01T12:14:58.733
> 
> 标签：eclipse, console, eclipse-cdt, output

我使用“cygwin GCC”工具链在 Eclipse 中创建了 c++“Hello World”示例项目。

项目编译并运行。问题是我在下面的控制台中看不到我的“Hello World”输出。

有趣的事实是当我在“调试”模式下运行我的项目时，我在执行后确实看到了一个输出：

```
 cout << "!!!Hello World!!!" << endl; 
```

如何以简单的“运行模式”查看控制台输出？我正在使用 Eclipse Juno...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T07:22:17.907

谢谢**@einpoklum**，按照您的链接，我找到了解决方案！

确保以管理员身份运行 Eclipse！就是这样 ：）

当然如果还是不行，请参考**@einpoklum 的**回答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:52:45.777

这是一个被广泛报道的问题，有多种可能的解决方案。

*   它可能是您的 PATH 环境变量。确保它包含`C:\Cygwin\bin`或安装 Cygwin 的位置。如果缺少这些，您可能无法加载 Eclipse，`cygwin1.dll`而且 Eclipse 的报告也不够好。
*   也许是由于输出缓冲。尝试添加

    ```
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stderr, NULL, _IONBF, 0);` 
    ```

    在您的主要功能开始时。

*   有些人[建议](http://www.eclipse.org/forums/index.php/mv/msg/197552/630039/)尝试 32 位版本的 Eclipse（和 JRE）。我会尽量避免走那条路……

# ios - Quincy Kit 远程符号

> ID：14110348
> 
> 赞同：-1
> 
> 时间：2013-01-01T12:14:58.900
> 
> 标签：ios

[我已经根据http://quincykit.net/](http://quincykit.net/)提供的文档实现了服务器设置（远程符号化）。我下载了一个示例崩溃报告（实际崩溃报告）并尝试执行 symbolicatecrash crashfilename.crash 但我得到的结果是相同的崩溃报告，它没有符号化。

我已将所需的 .app.dSYM 和 .app 文件粘贴到包含脚本的本地文件夹中，也已运行 chmod +x symbolicatecrash.pl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:40:13.533

你确定你有正确的.dSYM吗？你会尝试 ***dwarfdump -u YOURAPP.dSYM***，然后将 uuid 与你的崩溃日志进行比较。

# libreoffice-calc - 如何在 LibreOffice Calc 中获取字符的最后位置

> ID：14110349
> 
> 赞同：4
> 
> 时间：2013-01-01T12:14:59.747
> 
> 标签：libreoffice-calc, lastindexof

我想从 LibreOffice Calc 中多次出现的字符中获取最后一次出现。

例如，我有一个字符串`abc1ba2ac2adeaa43add`。现在，如果我正在搜索`a`它应该返回 18。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T12:22:20.270

使用正则表达式：

```
=SEARCH("a[^a]*$"; CELL) 
```

要搜索 a 以外的其他字符，只需将两个 a 替换为您要搜索的字符即可。

*   [http://forum.openoffice.org/en/forum/viewtopic.php?f=9&t=20344](http://forum.openoffice.org/en/forum/viewtopic.php?f=9&t=20344)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-13T05:10:42.650

这是我最近制作的一个 - 它在不使用正则表达式的情况下回答了这个问题（由于某种原因，我无法使用 libreoffice 4.3.1.2）

```
=FIND("+|",SUBSTITUTE(A1,"a","+|",(LEN(A1)-LEN(SUBSTITUTE(A1,"a",""))))) 
```

基本上，它执行以下操作：

1.  用标记替换特定搜索字符串的最后一个实例

    替换（A1，“a”，“+|”，（LEN（A1）-LEN（SUBSTITUTE（A1，“a”，“”）））））

2.  找到标记的索引

    查找（“+|”，...）

*- 或者返回'a'右边的字符串 -*

```
=MID(A1, FIND("+|",SUBSTITUTE(A1,"a","+|", (LEN(A1)-LEN(SUBSTITUTE(A1,"a","")))))+1, LEN(A1)) 
```

在此示例中，“a”是您要查找的字符串的最后一个实例，“+|” 是您正在搜索的字符串中不存在的占位符

对 mid 的调用将返回指定字符串后面的所有内容

# objective-c - “转发”来自 MKMapView 的路线请求

> ID：14110350
> 
> 赞同：0
> 
> 时间：2013-01-01T12:15:13.460
> 
> 标签：objective-c, ios6, mkmapview, mkannotationview, ios6-maps

我有一个带有一些注释的 MKMapView。我想添加选项以将用户“转发”到本机地图（iOS6）应用程序，以获取从标注“弹出窗口”中指向所选注释的方向......

这可能吗？也许使用伪链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:03:12.223

我想可以根据这篇文章来实现：http: [//developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)

# mysql - SQL Join 在两个表上的 Codeigniter 中？

> ID：14110352
> 
> 赞同：4
> 
> 时间：2013-01-01T12:15:41.073
> 
> 标签：mysql, sql, codeigniter, join

我正在构建一个 url 缩短/重定向服务，我对如何最好地从两个表中获取数据有点困惑。

我有两个这样的表：

**重定向**

```
id
datetime
ip_address
browser_agent
url_string 
```

**链接**

```
id
alias
url
created
user_id 
```

***Links***存储链接详细信息，每次重定向时，它都会在***重定向***表中记录为每个重定向的单行。

`alias`在***链接***和***重定向***`url_string`中是相同的。例如，域将被重定向到***链接***中的字段。*`Dw4``example.com/Dw4``url`*

 **我想要实现的是从***重定向***表中选择（并计算）所有重定向，其中与登录用户`url_string`相同`alias`，然后`user_id`与登录用户相同。

我正在使用 Codeigniter。

到目前为止，我正在尝试这样的事情：

```
$query=$this->db->query("SELECT * " . "FROM links, redirects " . "WHERE links.alias = redirects.url_string"); 
```

但我没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:27:16.477

您可以将`join`其用作：

```
$this->db->select('*');
    $this->db->from('links');
    $this->db->join('redirects', 'redirects.url_string = links.alias');
    $query = $this->db->get();

    return $query->result; 
```

并在**视图**中使用`foreach`语法根据您的要求显示 db-contents。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:20:14.523

`JOIN`这两个表是这样的：

```
SELECT 
  r.*
FROM redirects r
INNER JOIN links l ON r.url_string = l.alias; 
```

* * *

**更新：**试试这个：

```
SELECT 
  l.*,
  r.browser_agent,
  rCounts.redirectsCount
FROM links l
INNER JOIN redirects r ON r.url_string = l.alias
INNER JOIN
(
   SELECT url_string, COUNT(*) redirectsCount
   FROM redirects 
   GROUP BY url_string
) rCounts ON rrCounts.url_string = l.alias; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T13:52:22.903

正如你所说，登录用户的 user_id 应该是相同的，你应该使用 join with user_id 来获取特定的 user_id 详细信息，所以你的查询应该是这样的：

```
SELECT redirects.id,count(*) FROM redirects inner join links 
on redirects.url_string=links.alias
and redirects.id=links.user_id
group by redirects.id 
```**

# wcf - Not receiving response from WCF service in BizTalk

> ID：14110358
> 
> 赞同：0
> 
> 时间：2013-01-01T12:16:06.637
> 
> 标签：wcf, dataset, biztalk, biztalk-orchestrations

I am consuming a WCF service in BizTalk orchestration which returns a DataSet. I have tried to consume the service in ordinary way but couldn't succeeded. Please let me know is there any special way to handle a DataSet as response from WCF in BizTalk?

What I should do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:50:15.847

You need to serialize the DataSet to xmlObject before consuming it on BizTalk

Check this tutorial for example

[WCF-to-BizTalk-Passing-Typed-DataSet](http://www.codeproject.com/Articles/47334/WCF-to-BizTalk-Passing-Typed-DataSet)

# javascript - 如何禁用点击表格的 td？

> ID：14110365
> 
> 赞同：1
> 
> 时间：2013-01-01T12:16:57.983
> 
> 标签：javascript, jquery, html

我有这样的html表

```
<table width="100%">
    <tr>
        <td align="right">
             Email Address
        </td>
        <td  align="left">
            <div>
                <input type="email" data-theme="b" id="EmailAddress" />
            </div>
        </td>
    </tr>
</table> 
```

现在我在 td 内的 div 内有一个输入，当我在输入内单击时，光标设置在文本框上，但是如果我单击输入的边框有时光标设置在 td 的开头但不在输入处 ![在此处输入图像描述](../Images/28d0ea1ce334a9797dd16e33b5413f5a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:19:18.797

嘿，伙计们，我终于找到了一个解决方案，我已将名称设置为表单中的第一个输入，然后在单击任何 td“仅在 td 边框上”时，我已将焦点放在第一个输入上

```
 $('td:has("input")').live('click', function () {
        try {
            var res = $(event.srcElement).attr('type');
            if (res == null) {
                var _input = document.getElementsByName("ToFocus")[0];
                _input.focus();
            }

        } catch (e) {
        }
    }); 
```

因此，在此代码之后，当问题发生时，它会让您专注于第一个输入:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:26:39.983

我不确定*为什么*会发生这种情况，因为这是我以前从未遇到过的行为（并且没有提供用于测试的演示），但是一个快速的解决方法，因为无论如何您都在使用 jQuery：

```
$('td:has("input")').on('focus', function(){
     $(this).find('input').focus();
}); 
```

实际上，当`focus`事件发生在`td`包含`input`元素的元素上时，该`input`元素被聚焦，因此光标*应该*出现在 .`input`而不是`td`. 可能值得用 替换`focus`，`click`具体取决于正在发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T14:00:16.823

问题在于您使用了*border-radius*，或者更确切地说，是您分配给它的值。

你可以在这里自己弄乱它：http: [//jsfiddle.net/UN44W/1/](http://jsfiddle.net/UN44W/1/)

长话短说，即使您的边框曲线使用 CSS3，浏览器仍然将输入字段的**实际**空间视为正方形（更具体地说，是正方形角）。边界曲线越窄，左侧的光标就越明显，看起来像是溢出到实际输入之外（即使不是）。

结论：您对此无能为力（我知道），因为 CSS 只是设计的面具，而不是功能。半径的值可能为 10px；5px 稍微好一点，看起来不那么明显。

```
input {
        -moz-border-radius: 5px;
        -webkit-border-radius: 5px;
        border-radius: 5px; 
        border:1px solid black;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T15:04:12.817

问题不在于 td，而在于输入方式！您的输入似乎是 moz-bordered... 因此，例如，如果边框半径为 5px，请在输入字段中添加 5px 填充，如下所示：

通过 CSS

```
input {
        -moz-border-radius: 5px;
        -webkit-border-radius: 5px;
        border-radius: 5px; 
/*add this*/
       padding-left:5px;
       padding-right:5px;
    } 
```

通过jQuery

```
$(document).ready(function(){
      $('div input').css('padding','0 5px');
 }); 
```

# android - Android中缩放前和缩放后的图像

> ID：14110372
> 
> 赞同：0
> 
> 时间：2013-01-01T12:17:55.973
> 
> 标签：android, android-layout

我正在尝试将 1280x800 图像的图像缩放到 1024x600 以使其适合 Galaxy 7 英寸选项卡。我正在使用本[教程中的函数 draw()。](http://realmike.org/blog/2010/12/23/tutorial-scaling-processing-for-android-apps-to-different-screens/)

在我的 XML 文件中，我声明了一个 imageView：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true" 
        />

</RelativeLayout> 
```

在我的 java 文件中：

```
public class MainActivity extends Activity {

    TextView text;
    Button mybutton;
    Bitmap bitmap2;
    ImageView iview;
    int maxWidth ;
    int maxHeight ;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.test);

        Display display = getWindowManager().getDefaultDisplay();
        Point size= new Point();
        (display).getSize(size);
        maxWidth = size.x;
        maxHeight = size.y;

        Bitmap bitmap= BitmapFactory.decodeResource(getResources(), R.drawable.main);
        mybutton=(Button) findViewById(R.id.Send);

        iview=(ImageView)findViewById(R.id.imageView1);

        resizeImage1(bitmap);// set the image
    }

     public void resizeImage1(final Bitmap image)
        {
         float scaleFactor;
         Bitmap resizedImage = null;
            float screenAspect = (float)maxWidth / (float)maxHeight;
            if (screenAspect <= 2)
            {
                scaleFactor = (float)(maxWidth )/ (float)(image.getWidth());

                Toast.makeText(this, "i am here", Toast.LENGTH_LONG).show();
            }
            else
            {
                final int PLAYFIELD_HEIGHT = 10000;
                scaleFactor = (float)maxHeight / (float)PLAYFIELD_HEIGHT;
            }

            int newWidth = (int)(image.getWidth() * scaleFactor);
            int newHeight = (int)(image.getHeight() * scaleFactor);
            int destX = (image.getWidth() - newWidth) / 2;
            int destY = (image.getHeight() - newHeight) / 2;           

            resizedImage = Bitmap.createScaledBitmap( image, newWidth, newHeight, true);
            iview.setMaxHeight(newHeight);
            iview.setMaxWidth(newWidth);

            iview.setImageBitmap(resizedImage);

            iview.setVisibility(1);
        }    
} 
```

现在在调整大小之前，当我尝试获取图像高度和宽度时，它给了我 640x400，但实际上图像的大小为 1280x800。调整大小后，它会给出模糊图像，因为图像的大小从 640x400 调整到 1024x600。我不明白为什么会这样。

任何帮助将不胜感激

**用新代码更新后：**

```
public class MainActivity extends Activity {

    ImageView iview;
    int maxWidth ;
    int maxHeight ;

    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.test);

        Display display = getWindowManager().getDefaultDisplay();
        Point size= new Point();
        (display).getSize(size);
        maxWidth = size.x;
        maxHeight = size.y;
        File photos= new File("C:/Users/drive3/workspace/images");

        Bitmap bitmap = decodeFile(photos);
        bitmap = Bitmap.createScaledBitmap(bitmap,150, 150, true);
    }

    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);              
            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=40;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale++;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {

        }
        return super.onOptionsItemSelected(item);
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:37:51.463

如果我没记错的话，`BitmapFactory`自动将图像缩放到目标密度。这就是为什么您会得到 640 x 400 而不是预期的 1280 x 800 的图像。

您最好利用`BitmapFactory`您的优势，即您指示它直接创建具有所需大小的图像。这将更有效率，您的应用程序将不太可能遇到内存不足问题。

看看[这个答案](https://stackoverflow.com/a/6410472/413337)。它显示了如何使用 BitmapFactory 选项。

**更新：**

为了防止默认缩放`BitmapFactory`，您可以像这样更改原始代码。代替：

```
Bitmap bitmap= BitmapFactory.decodeResource(getResources(), R.drawable.main); 
```

采用：

```
BitmapFactory.Options o = new BitmapFactory.Options();
o.inScaled= 0;
Bitmap bitmap= BitmapFactory.decodeResource(getResources(), R.drawable.main, o); 
```

# kendo-ui - kendo grid ajax 在 ajax 的数据属性初始化之前触发。这导致将空数据提交到服务器

> ID：14110376
> 
> 赞同：-1
> 
> 时间：2013-01-01T12:18:21.017
> 
> 标签：kendo-ui

当我在 kendo ui 网格中进行 crud 操作时，网格的 ajax 在 ajax 的数据属性被初始化之前被触发。这导致将空数据提交到服务器。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:23:44.897

您可以禁用**[autobind](http://docs.kendoui.com/api/web/grid#autobind-booleandefault)**选项设置为 false 的自动请求并手动调用读取 ajax 请求。

```
$('#GridName').data('kendoGrid').dataSource.read() 
```

# java - 如何从可绘制文件夹Android中获取xml文件

> ID：14110378
> 
> 赞同：1
> 
> 时间：2013-01-01T12:18:28.797
> 
> 标签：java, android, xml, android-layout

我在我使用的应用程序 的网页[http://api.androidhive.info/music/music.xml上有一个 xml 文件](http://api.androidhive.info/music/music.xml)

```
static final String URL = "http://api.androidhive.info/music/music.xml";
String xml = parser.getXmlFromUrl(URL); 
```

工作正常，但知道我已将此文件放在我的 Android 资源文件夹中。`R.drawble.music.xml`那么如何从像这样的 android drawable 文件夹而不是网页中 获取我的文件。[http://api.androidhive.info/music/music.xml](http://api.androidhive.info/music/music.xml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:30:08.580

将xml放入`/res/raw`文件夹。

然后使用：

```
InputStream is=getResources().openRawResource(R.raw.my_xml); 
```

然后使用这个解析器[XML PULL PARSER](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)

```
XmlPullParser xpp=XmlPullParserFactory.newInstance().newPullParser();
xpp.setInput(is,"your-encoding"); 
```

谢谢。

# android - 活动堆栈状态

> ID：14110381
> 
> 赞同：0
> 
> 时间：2013-01-01T12:18:43.683
> 
> 标签：android, android-activity, stack, state

我目前正在添加从另一个应用程序启动我的应用程序的选项。从另一个应用程序启动时，该应用程序的外观和行为会有所不同。入口点活动被传递一个不同的意图动作和一些额外的东西。我需要为其他活动保存这些额外内容，但我无法将它们保存在应用程序中，因为这会在从启动器启动时影响应用程序。我能想到的唯一解决方案是为每个新活动传递额外内容：intent.putExtras(getIntent()); 因此维护当前堆栈的状态。有没有更好的办法？谢谢，莎伦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:21:13.503

```
Because that will affect the app when launched from the launcher. 
```

我不这么认为，当应用程序从启动器启动时，您通过的意图`getIntent()`包含`"android.intent.action.MAIN"`. 因此，您可以运行检查以查看它是从启动器还是其他应用程序启动的。然后，您可以在单个 sharedpreference xml 文件中恢复 extras 中包含的值（如果其他应用程序启动了它），以便所有其他活动可以方便地访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:38:01.307

我以不同的方式解决了这个问题。每当启动应用程序时，都会向先前启动的活动发送一个事件。然后堆栈被重定向到一个特殊的活动，通知用户该应用程序已在其他地方启动。此活动有一个重新启动应用程序的按钮。这样应用程序就不能并行运行。不确定这是不是最好的解决方案，但它可以工作并且可以防止不良的应用程序状态。沙龙。

# android - 在android中不知道符号“+=”

> ID：14110382
> 
> 赞同：-10
> 
> 时间：2013-01-01T12:18:57.927
> 
> 标签：android, json

我的代码有点问题

这是我的代码

```
public class LihatInfo extends Activity {

   TextView error,br1;
   String i,id_kepadatan,returnString;

    /** Called when the activity is first created. */

   @Override

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.lihat_info);

        br1=(TextView)findViewById(R.id.berita1);

   }

   public void clickHandler(View view){
    Intent a = null;
    id_kepadatan = "1";
    switch (view.getId()){
    case R.id.lihatInfo:

ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();

        postParameters.add(new BasicNameValuePair("id_kepadatan", id_kepadatan));

/*            String valid = "1";*/      

        String response = null;

        try {

           response = CustomHttpClient.executeHttpPost("http://10.0.2.2/android/lihatInfo.php", postParameters);

           String result = response.toString();  
           //parse json data

              try{
                      returnString = "";

                JSONArray jArray = new JSONArray(result);
                      for(int i=0;i<jArray.length();i++){

                              JSONObject json_data = jArray.getJSONObject(i);
                              Log.i("log_tag","id_kepadatan: "+json_data.getInt("id_kepadatan")+
                                      ", username: "+json_data.getString("username")+
                                      ", nama_jalan: "+json_data.getString("nama_jalan")+
                                      ", status: "+json_data.getString("status")+
                                      ", tanggal: "+json_data.getString("tanggal")+
                                      ", waktu: "+json_data.getString("waktu")+
                                      ", keterangan: "+json_data.getString("keterangan")
                              );

                              //Get an output to the screen
                              returnString += "\n" + json_data.getString("nama_jalan") + " mengalami "+ json_data.getString("status")+ " pada "+ json_data.getString("tanggal")+ " waktu "+ json_data.getString("waktu")+ " karena "+ json_data.getString("keterangan");
                      }
              }

              catch(JSONException e){
                      Log.e("log_tag", "Error parsing data "+e.toString());
              }

              try{

               br1.setText(returnString);

              }

              catch(Exception e){

               Log.e("log_tag","Error in Display!" + e.toString());;          

              }   

         }

               catch (Exception e) {

          Log.e("log_tag","Error in http connection!!" + e.toString());     

         }
        break;

    case R.id.cariPeta2:
        a = new Intent(this,MainActivity2.class);
        startActivity(a);
        break;
   case R.id.kembali2:
        a = new Intent(this, Menu.class);
        startActivity(a);
        break;
}
   }

} 
```

我想问的是

1.  `+=`行中的符号是什么意思

    `returnString += "\n" + json_data.getString("nama_jalan") + " mengalami "+ json_data.getString("status")+ " pada "+ json_data.getString("tanggal")+ " waktu "+ json_data.getString("waktu")+ " karena "+ json_data.getString("keterangan");`

2.  `String returnString` 我可以用这个 代替`String[] returnString` 吗？因为我想使用ListView，而不是像我上面的代码那样使用TextView.....

这就是我想问的......对于每一个帮助，我将不胜感激

谢谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:21:18.330

**+=**符号用于附加文本。

> ADD - AND 赋值运算符，它将右操作数添加到左操作数并将结果分配给左操作数

# c# - 简单的通用误解

> ID：14110386
> 
> 赞同：2
> 
> 时间：2013-01-01T12:19:36.223
> 
> 标签：c#, .net, generics, casting, generic-constraints

你能帮我理解这种情况下的错误吗？

```
public interface IGeneralInterface
{
}

public class A : IGeneralInterface
{
}

public class B : IGeneralInterface
{
}

public class SomeClass<TGenericType> where TGenericType : IGeneralInterface
{
    private TGenericType internalValue;

    public SomeClass(TGenericType InitValue)
    {
        internalValue = InitValue;
    }

    public TGenericType CreateAnother()
    {
       TGenericType val1 = new B();   //Error here: class B() could not be converted to TGenericType
       return val1;
    }
} 
```

即使我建立`SomeClass<T>`as

```
SomeClass<IGeneralInterface> someClass = new SomeClass<IGeneralInterface>(); 
```

我明确传递基本接口以包含所有（？）案例，​​但它仍然抛出错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T12:22:26.037

改变

```
 TGenericType val1 = new B();   //Error here: class B() could not be converted to TGenericType 
```

到

```
 IGeneralInterface val1 = new B(); 
```

您正在尝试 TypeCast `IGeneralInterface`，`TGenericType`这是导致错误的原因。

`TGenericType`可能有其他约束，比如它继承自`ISpecificInterface`不`B`继承。在这种情况下，分配变得无效。

例子：

```
public class SomeClass< TGenericType> where TGenericType : IGeneralInterface, ISpecificInterface
TGenericType val1 = new B(); // TGenericType should be ISpecificInterface also, B is not. 
```

上面运行。`IGenericInterface`应该总是比`TGenericType`.

```
 public class SomeClass <IGenericInterface> 
```

或者，您可以使用`is`关键字来确定对象是否可分配`TGenericType`，然后使用强制转换。

```
TGenericType val1 = default(TGenericType);
var val = new B();
if ( val is TGenericType)
{
  val1 = (TGenericType)val;
} 
```

**编辑**对于以下评论

> 它如何在运行时有额外的要求？我在此处列出的编译器中的所有内容

`CreateAnother()``B`创建非通用类型的实例。以下面的例子

```
SomeClass<C> c = new SomeClass<C();
C another = c.CreateAnother(); // C is not assignable from B. (C is below). But It would be valid, if compiler did not flag the error

public class C : IGeneralInterface, IDisposable
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:33:51.803

为什么您认为 a`new B()`应该可转换为`TGenericType`？唯一知道的`TGenericType`是它实现了接口。

例如，`new B()`不能转换为 type `A`。

我不知道您要获得什么，但您可以将通用约束更改为：

```
public class SomeClass<TGenericType>
    where TGenericType : class, IGeneralInterface, new() 
```

然后可以`new TGenericType()`在您的 create 方法中说。

但是不再可能使用该类型`SomeClass<IGeneralInterface>`，因为该接口没有可访问的无参数实例构造函数（当然，没有接口可以具有构造函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T12:29:48.260

您的代码中的问题是您正在声明变量

```
val1 
```

类型的

```
TGenericType 
```

然后你尝试用不同类型的对象实例化它。

即使您已经声明了类的泛型类型必须在继承层次结构中的条件，`IGeneralInterface`它们对于编译器也是不同的。我假设在此设置中您必须使用显式强制转换。

# java - 修改 SOAP 标头前缀 (Axis 1.4)

> ID：14110387
> 
> 赞同：-4
> 
> 时间：2013-01-01T12:19:36.520
> 
> 标签：java, web-services, jakarta-ee, soap, axis2

我正在尝试配置 SOAP 请求以使用 Web 服务

这是预期的 SOAP 请求

```
 <env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://xmlns.oracle.com/ABCS/Industry/Telco/ChannelLayer/ProcessPaymentChannelLayerReqABCSImpl" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<env:Header>
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" env:mustUnderstand="1">
<wsse:UsernameToken xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<wsse:Username>test</wsse:Username>
<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">test123</wsse:Password>
</wsse:UsernameToken>
</wsse:Security>
</env:Header> 
```

我设法带来了这样的 SOAP 请求。

```
 <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Header>
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" env:mustUnderstand="1" soapenv:actor="http://schemas.xmlsoap.org/soap/actor/next" soapenv:must
Understand="0">
<wsse:UsernameToken xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<wsse:Username>test</wsse:Username>
<wsse:password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">test123</wsse:password>
</wsse:UsernameToken>
</wsse:Security>
</soapenv:Header> 
```

它们都是一样的，唯一的区别是来自**soapenv**的Envelop标签的前缀，需要将其更改为**env**

在我尝试配置 SOAPRequest 的方法中，我可以访问**org.apache.axis.client.Stub**。

**注意：我尝试访问 SOAPEnvelop 来设置前缀，它返回为 null :(**

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:26:14.617

上述两个 XML 片段不相同，请检查以下差异：

env:mustUnderstand="1" 发送soapenv:mustUnderstand="0"

实际上，您的第二个 XML 两次覆盖了 mustUnserstand 标头？

同样正如@kdgregory 提到的，前缀实际上并不重要，只需确保名称空间和标头值正确即可。

# android - 如何在android中的特定时间启动计时器

> ID：14110389
> 
> 赞同：0
> 
> 时间：2013-01-01T12:20:07.493
> 
> 标签：android, timer, handler

我有个问题。我想在特定时间启动计时器。即，我有时间说，05:10:02。那么计时器将从 05:10:02 开始。例如，05:10:02、05:10:03、05:10:04 等等。

当我打开活动时，它应该获取当前时间，并且计时器将启动上述问题中的描述。

我有以下代码。

```
 SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
    sdf.setTimeZone(TimeZone.getTimeZone("GMT"));

    inputString = str;  //05:10:02

    try {
        date = sdf.parse(inputString);

        Log.i("Test", "in milliseconds: " + date.getTime());  
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    if(mStartTimeGlobal== 0L) {
        mStartTimeGlobal = date.getTime();
        mHandlerGlobal.removeCallbacks(mUpdateTimeTaskGlobal); 
        mHandlerGlobal.postDelayed(mUpdateTimeTaskGlobal, 100);
    }

     private Runnable mUpdateTimeTaskGlobal = new Runnable(){

    public void run() {

        //DecimalFormat df = new DecimalFormat("##.####");

        final long start = mStartTimeGlobal;
        long millis = date.getTime();

        int seconds = (int) (millis / 1000);
           int minutes = seconds / 60;
           seconds = seconds % 60;
           int hours = seconds/3600;

           String timer = String.format("%02d", hours) + ":" + String.format("%02d", minutes) + ":" + String.format("%02d", seconds);

           ///mTotalTimeTakenGlobal = timer;

           txt_start_timer.setText(timer);                                                                         
           mHandlerGlobal.postDelayed(this, 200);               

     }    
 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:24:34.200

使用[定时器](http://developer.android.com/reference/java/util/Timer.html)：

```
Date date = new Date("...")
Timer t = new Timer(); 
t.schedule(new TimerTask() {
   public void run() {
     // do your actions
   }
}, date); 
```

您的任务将在非 GUI 线程中启动，因此在时间事件发生后使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)更新您的界面。这种方法的限制是您的程序必须运行才能获得通知，它不会在给定时间自动启动。您可以在同一个计时器上安排多个任务，以便它们可以在不同的日期开始。

# objective-c - +initialize 多次调用

> ID：14110396
> 
> 赞同：10
> 
> 时间：2013-01-01T12:21:41.417
> 
> 标签：objective-c, cocoa

我有一个`+initialize`被多次调用的方法，我不明白为什么。

根据文档，它将为每个类（以及子类）调用一次，

这是我正在使用的代码：

```
@interface MyClass : NSObject

@end

static NSArray *myStaticArray;

@implementation MyClass

+ (void)initialize
{
  myStaticArray = [NSArray array];
}

@end 
```

（显然还有其他代码，但这是相关部分）。

没有 的子类`MyClass`。它没有做任何花哨的事情。+initialize 在我的应用程序启动时被调用一次（NSApplication 的委托告诉它用磁盘中的数据填充 myStaticArray）。然后第二次调用 +initialize，这是用户第一次选择与此类相关的菜单项。

我只是简单地添加`dispatch_once()`了我的`initialize`代码，这显然解决了我的问题。但我不明白这是怎么回事？为什么在没有子类的情况下会多次调用它？

这是第一次调用 +initialize 时的堆栈跟踪：

```
+[MyClass initialize]
_class_initialize
objc_msgSend
-[MyAppDelegate applicationDidBecomeActive:]
_CFXNotificationPost
NSApplicationMain
main
start 
```

这是第二个电话：

```
+[MyClass initialize]
_class_initialize
NSApplicationMain
main
start 
```

如您所见，我的代码似乎没有触发对 +initialize 的第二次调用（堆栈跟踪中没有任何内容）。它*在*我显示一个显示被清除的静态数组内容的窗口后立即发生`+initialize`（窗口显示数组内容，但紧接着数组为空）。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-02T16:46:36.723

`+initialize`将在第一次引用（通过消息）时发送到每个类，包括动态创建的类。运行时中没有针对多次触发执行的保护。如果一个子类被初始化，但没有实现`+initialize`，那么无论`super`链上的什么都将再次调用它们。

正交地，自动 KVO 是通过创建观察实例的类的动态派生子类来实现的。该子类`+initialize`与任何其他类一样是 d ，因此会触发父类的`+initialize`.

运行时可以采取措施防止这种情况发生。然而，由于`+initialize`一直被记录为可能被多次执行，因此增加的复杂性（考虑到 KVO 类可能频繁地来来去去，这令人惊讶地复杂）被认为不值得付出努力。

当前推荐的模式是：

```
+ (void) initialize
{
      static dispatch_once_t once;
      dispatch_once(&once, ^{
        ... one time initialization here ...
      });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T12:30:14.423

`+initialize`为继承链上的每个类调用，因此如果您初始化两个共享相同超类（或超类及其子类之一）的类，则超类的`+initialize`方法将被调用两次。

这可能是原因吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T12:48:48.427

1.Runtime在子类之前在超类中调用+initialize方法

2.如果子类没有方法，则调用父类的初始化方法。

3.使用初始化方法+(void)initialize{

```
if(self==[Car Class]){

//initialize here your static var
}  
} 
```

为了清楚地理解，请阅读这篇文章[+(void)initialize](http://techdefinite.com/objective-c-initialize-method/)

# java - 带有 ActionbarSherlock SearchView 的 ClassNotFoundException

> ID：14110399
> 
> 赞同：0
> 
> 时间：2013-01-01T12:21:53.810
> 
> 标签：java, android, actionbarsherlock, classnotfoundexception

我目前在 Android 应用程序中实现了 4.2.0 版的 ActionbarSherlock。我遇到了 SearchView 小部件的问题。

我目前有这样实现的小部件：

```
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.actionbarsherlock.widget.SearchView;
import com.actionbarsherlock.widget.SearchView.OnQueryTextListener;

public class MainActivity extends SherlockFragmentActivity
{

    /*...*/

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        SearchView searchView = new SearchView(getSupportActionBar().getThemedContext()); 
        searchView.setQueryHint(getResources().getString(R.string.searchHint_Label));
        searchView.setIconifiedByDefault(true);
        searchView.setOnQueryTextListener(new OnQueryTextListener(){

            @Override
            public boolean onQueryTextSubmit(String query) {
                // Do stuff
            }

            @Override
            public boolean onQueryTextChange(String newText) {
                // TODO Auto-generated method stub
                return false;
            }

        });

        menu.add("Search")
            .setIcon(R.drawable.abs__ic_search)
            .setActionView(searchView)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

        return true;
    }
} 
```

现在，每当我开始调试应用程序时，我都会在 SearchView 的构造函数中收到以下错误：

```
01-01 11:46:40.365: E/dalvikvm(1385): Could not find class 'com.actionbarsherlock.widget.SearchView$11', referenced from method com.actionbarsherlock.widget.SearchView.<init>
Call Stack:
Thread [<1> main] (Suspended (exception ClassNotFoundException))    
    <VM does not provide monitor information>   
    PathClassLoader.findClass(String) line: 240 
    PathClassLoader(ClassLoader).loadClass(String, boolean) line: 551   
    PathClassLoader(ClassLoader).loadClass(String) line: 511    
    DexFile.defineClass(String, ClassLoader, int, ProtectionDomain) line: not available [native method] 
    DexFile.loadClassBinaryName(String, ClassLoader) line: 207  
    PathClassLoader.findClass(String) line: 200 
    PathClassLoader(ClassLoader).loadClass(String, boolean) line: 551   
    PathClassLoader(ClassLoader).loadClass(String) line: 511    
    MainActivity.onCreateOptionsMenu(Menu) line: 124    
    MainActivity(Watson).onCreatePanelMenu(int, Menu) line: 45  
    ActionBarSherlockCompat(ActionBarSherlock).callbackCreateOptionsMenu(Menu) line: 559    
    ActionBarSherlockCompat.preparePanel() line: 479    
    ActionBarSherlockCompat.dispatchInvalidateOptionsMenu() line: 272   
    ActionBarSherlockCompat$1.run() line: 984   
    ViewRoot(Handler).handleCallback(Message) line: 587 
    ViewRoot(Handler).dispatchMessage(Message) line: 92 
    Looper.loop() line: 130 
    ActivityThread.main(String[]) line: 3683    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 507  
    ZygoteInit$MethodAndArgsCaller.run() line: 839  
    ZygoteInit.main(String[]) line: 597 
    NativeStart.main(String[]) line: not available [native method] 
```

此错误发生在我支持的应用程序的所有 Android 版本中（2.2 - 4.2）当我在此异常发生后恢复调试时，应用程序运行正常并且 SearchView 也工作正常，但我仍然想知道为什么会发生此异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:37:49.580

请通过在 XML 中创建菜单来使用此方法：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >    
<item
    android:id="@+id/search"    
    android:icon="@drawable/abs__ic_search"    
    android:showAsAction="add here your action"
    android:title="@string/search">
</item>
</menu> 
```

在您的活动中添加此代码

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.search:
        add code here
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

# c++ - 我可以在同一个文件夹中有两个 .pro 文件吗？

> ID：14110419
> 
> 赞同：2
> 
> 时间：2013-01-01T12:24:03.980
> 
> 标签：c++, qt

***简洁版本***

同一文件夹下是否可以有两个 .pro 文件？

***详细版本***

我正在尝试使用 QtTest 为我的一个项目编写单元测试。该项目是插件加载器，它只加载插件。所以我的项目文件夹看起来像：

```
- PluginLoader
 | PluginLoader.pro
 |+bin     // where I have my binary
 |+build   // where I have moc and .o
 |+src     // the actual src for the PluginLoader
 |+test    // some test while I'm developing
 |-unitTest
   | unitTest.pro
   | UnitTest.cpp
   | UnitTest.h
   |-SamplePlugins
     | SamplePluginONE.cpp
     | SamplePluginONE.h
     | SamplePluginTWO.cpp
     .
     .
     . 
```

我知道首先想到的就是将文件放入`.pro`文件`SamplePlugins`夹中，但我不能这样做。原因是，我应该使用`.pro`3 种不同类型的模板文件：

1.  子目录模板，只包含`PluginLoader.pro`. 基本上它告诉 Qt 查看那里为某些 .pro 文件提供的子目录。
2.  应用程序模板，生成二进制文件并放入`bin`文件夹。我的`test`文件夹里有。
3.  库模板，生成 .so 并将其放在其他路径中。`src`我在我的文件夹中使用这个

现在，如果我想测试只加载一些插件的应用程序，我需要一些插件。这就是为什么我在`SamplePlugins`文件夹下有文件`unitTest`夹的原因。

`UnitTest.pro`必须来自“应用程序”.pro 模板，以便生成 unittest 二进制文件。并且插件示例应该有“库”.pro，以便它们生成“.so”。这就是我的困境。如果我将“库”.pro 文件放入，`SapmlePlugins`那么它将不会被解析，因为它的父文件夹没有“子目录”.pro。

我想到克服这个问题的唯一方法是在 .pro 文件中有一个“子目录”.pro 文件`unitTest`。然后在下面创建另一个文件夹`unitTest`并调用它`theActualUnitTest`并将带有“应用程序”.pro 文件的实际单元移动到其中。`SamplePlugins`并在文件夹中创建一个“库”.pro 。但是，我不能这样做，因为我不能更改文件夹，因为我们在同一个文件夹结构中有许多其他项目，并且一些脚本可以做一些事情......所以改变文件夹结构不是一种选择。所以我想知道是否可以在同一个文件夹下有两个 .pro 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:08:36.757

简短的回答：是的，你试过吗？

.pro 文件的名称无关紧要，您可以随意命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:18:32.403

好吧，这就是我为克服我的问题所做的事情：

将“库”模板 .pro 文件放在`SamplePlugins`文件夹中，在`PluginLoader.pro`“子目录”模板 .pro 文件中，我要求 Qt 查找`unitTest/SamplePlugins`另一个 .pro 文件：

```
SUBDIRS  = src \
           test \
           unitTest \
           unitTest/SamplePlugins \ 
```

# javascript - 将值从自动搜索框中复制到可选列表

> ID：14110420
> 
> 赞同：0
> 
> 时间：2013-01-01T12:24:15.220
> 
> 标签：javascript, jquery, jsp

我有一个自动搜索框，我想从该搜索框中一一选择值复制到一个列表以查看该搜索值的详细信息我正在使用 jquery 进行自动搜索

# objective-c - 如何获取要插入 Facebook 的 Bundle ID

> ID：14110427
> 
> 赞同：1
> 
> 时间：2013-01-01T12:25:12.027
> 
> 标签：objective-c, bundle, xcode4.5

捆绑包 ID

如果我转到 xcode 项目并单击目标，我会看到：Z24R84Q3QP.com.something.something.${PRODUCT_NAME:rfc1034identifier}

我不知道 ${PRODUCT_NAME:rfc1034identifier} 会变成什么，也不知道它的指定位置。

在facebook有一个问号。如果我们悬停在那里，我们会被告知：出于安全原因，Facebook 需要知道我们的 APP ID。

本教程没有说明任何内容。

[https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/authenticate/)

我的一个朋友似乎也在使用旧的 API，我们在其中导入 Facebook.h 或其他东西而不是框架。

我被困住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T16:36:23.050

您可以通过调用在运行时找到应用程序的包标识符：

```
NSString* bundleID = [[NSBundle mainBundle] bundleIdentifier]; 
```

如果您只想手动查找，可以在“摘要”下的目标设置中找到它。这是第一项。

# hadoop - AM Container 的运行超出了虚拟内存限制

> ID：14110428
> 
> 赞同：9
> 
> 时间：2013-01-01T12:25:15.463
> 
> 标签：hadoop, cloudera, hadoop-yarn

我在玩分布式 shell 应用程序（hadoop-2.0.0-cdh4.1.2）。这是我目前收到的错误。

```
13/01/01 17:09:09 INFO distributedshell.Client: Got application report from ASM for, appId=5, clientToken=null, appDiagnostics=Application application_1357039792045_0005 failed 1 times due to AM Container for appattempt_1357039792045_0005_000001 exited with  exitCode: 143 due to: Container [pid=24845,containerID=container_1357039792045_0005_01_000001] is running beyond virtual memory limits. Current usage: 77.8mb of 512.0mb physical memory used; 1.1gb of 1.0gb virtual memory used. Killing container.
Dump of the process-tree for container_1357039792045_0005_01_000001 :
|- PID PPID PGRPID SESSID CMD_NAME USER_MODE_TIME(MILLIS) SYSTEM_TIME(MILLIS) VMEM_USAGE(BYTES) RSSMEM_USAGE(PAGES) FULL_CMD_LINE
|- 24849 24845 24845 24845 (java) 165 12 1048494080 19590 /usr/java/bin/java -Xmx512m org.apache.hadoop.yarn.applications.distributedshell.ApplicationMaster --container_memory 128 --num_containers 1 --priority 0 --shell_command ping --shell_args localhost --debug
|- 24845 23394 24845 24845 (bash) 0 0 108654592 315 /bin/bash -c /usr/java/bin/java -Xmx512m org.apache.hadoop.yarn.applications.distributedshell.ApplicationMaster --container_memory 128 --num_containers 1 --priority 0 --shell_command ping --shell_args localhost --debug 1>/tmp/logs/application_1357039792045_0005/container_1357039792045_0005_01_000001/AppMaster.stdout 2>/tmp/logs/application_1357039792045_0005/container_1357039792045_0005_01_000001/AppMaster.stderr 
```

有趣的是，设置似乎没有问题，因为一个简单的`ls`or`uname`命令成功完成，并且输出在 container2 标准输出中可用。

关于设置，`yarn.nodenamager.vmem-pmem-ratio`可用`3`的总物理内存为 2GB，我认为这对于运行来说已经绰绰有余了。

对于有问题的命令，“ping localhost”生成了两个回复，从`containerlogs/container_1357039792045_0005_01_000002/721917/stdout/?start=-4096.`

那么，可能是什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-28T14:39:31.700

从错误消息中，您可以看到您使用的虚拟内存超过了当前的 1.0gb 限制。这可以通过两种方式解决：

**禁用虚拟内存限制检查**

YARN 将简单地忽略限制；为此，请将其添加到您的`yarn-site.xml`：

```
<property>
  <name>yarn.nodemanager.vmem-check-enabled</name>
  <value>false</value>
  <description>Whether virtual memory limits will be enforced for containers.</description>
</property> 
```

此设置的默认值为`true`。

**增加虚拟内存与物理内存的比率**

在您`yarn-site.xml`将其更改为高于当前设置的值

```
<property>
  <name>yarn.nodemanager.vmem-pmem-ratio</name>
  <value>5</value>
  <description>Ratio between virtual memory to physical memory when setting memory limits for containers. Container allocations are expressed in terms of physical memory, and virtual memory usage is allowed to exceed this allocation by this ratio.</description>
</property> 
```

默认是`2.1`

您还可以增加分配给容器的物理内存量。

确保在更改配置后不要忘记重新启动 yarn。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-01-28T22:51:57.417

无需更改集群配置。我发现只提供额外的参数

```
-Dmapreduce.map.memory.mb=4096 
```

distcp 对我有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-28T13:35:53.003

如果你正在运行 Tez 框架，必须在 Tez-site.xml 中设置以下参数

```
tez.am.resource.memory.mb
tez.task.resource.memory.mb
tez.am.java.opts 
```

在 Yarn-site.xml 中

```
yarn.nodemanager.resource.memory-mb
yarn.scheduler.minimum-allocation-mb
yarn.scheduler.maximum-allocation-mb
yarn.nodemanager.vmem-check-enabled
yarn.nodemanager.vmem-pmem-ratio 
```

所有这些参数都是必须设置的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-20T09:54:05.280

您可以在 yarn-site.xml 中将其更改为高于默认 1 GB 的值

yarn.app.mapreduce.am.resource.mb

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-18T22:03:08.177

在实践中，当对包含大量文件/小文件或未分桶的表或查询大量分区的大型表或表运行查询时，我已经看到此问题。

当 Tez 尝试计算它需要生成多少个映射器时，就会出现问题，并且在进行此计算时，由于默认值 (1gb) 太少，它往往会出现 OOM。

解决此问题的方法是不要设置`tez.am.resource.memory.mb`为 2gb 或 4gb。此外，另一件非常重要的事情是，不能从 hive 查询中设置此设置，因为到那时为时已晚。AM 是第一个由 yarn 生成的容器，因此在 hive 查询中设置它是没有用的。

该设置需要在 *-site.xml 中设置，或者在生成 hive shell 时设置，如下所示：

`hive --hiveconf tez.am.resource.memory.mb=2048 my-large-query.hql`

在上面的示例中，am 发出信号以生成 2gb 的 AM，而不是默认值。

参考： http: [//moi.vonos.net/bigdata/hive-cli-memory/](http://moi.vonos.net/bigdata/hive-cli-memory/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-28T14:02:32.303

好的，发现了。将 master memry 参数增加到 750MB 以上，您将成功运行 YARN 应用程序。

# ruby - 问题编译 sass 文件

> ID：14110429
> 
> 赞同：0
> 
> 时间：2013-01-01T12:25:18.863
> 
> 标签：ruby, extjs, themes, sass

我正在使用 senhca touch 进​​行开发。我知道 sass 用于自定义 sencha touch 中的主题。我安装了所需的材料，但是当我编译 scss 文件时，它给出了错误：

```
You must compile individual stylesheets from the project directory. 
```

我很困惑。谁能帮我？我尝试通过提供完整路径进行编译，但它仍然无法正常工作。配置=.rb如下..

```
 # Get the directory that this configuration file exists in
 dir = File.dirname(__FILE__)
 # Load the sencha-touch framework automatically.
 load File.join(dir, '..', 'themes')
 # Compass configurations
 sass_path    = dir
 css_path     = File.join(dir, "..", "css")
 environment  = :production
 output_style = :compressed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:35:17.467

在`config.rb`，文件路径`css_dir`等`sass_dir` 需要相对于所在文件夹`config.rb`。看看你是否有这个问题

# python - 如何使用 flexmock 调用不存在的方法

> ID：14110430
> 
> 赞同：0
> 
> 时间：2013-01-01T12:25:23.367
> 
> 标签：python, mocking

让我们假设类：

```
class Something():
    def first(self):
        return None 
```

我需要用 Mock 对象替换这个类，但我需要调用或添加不存在的属性。当我尝试

```
fake = flexmock(Something, new_method=lambda:None) 
```

我收到`AttributeError`。

是否可以添加不存在的属性或方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:30:50.690

向对象或类添加不存在的属性与 或 一样`something.new_attr = some_value`简单`setattr(something, 'new_attr', some_value)`。要将不存在的方法添加到对象或类，只需调用以下函数之一：

```
def add_method(target, method_name): 
    """add class method to a target class or attach a function to a target object"""
    setattr(target, method_name, types.MethodType(lambda x:x, target))
def add_instance_method(target, method_name):
    """add instance method to a target class"""
    setattr(target, method_name, types.MethodType(lambda x:x, None, target)) 
```

现在，将向`add_method(Something, 'new_method')`class 添加一个（虚拟）类级别的“new_method”，向类型的对象添加一个“new_method” （但不适用于 的其他实例），向类添加一个实例级别的“new_method” （即可用对于) 的所有实例。`Something``add_method(something, 'new_method')``something``Something``Something``add_instance_method(Something, 'new_method')``Something``Something`

注意：以上不适用于没有`__dict__`属性的实例（例如内置类的实例`object`）。

请检查stackoverflow上的另一个问题： [向现有对象实例添加方法](https://stackoverflow.com/questions/972/adding-a-method-to-an-existing-object)

# sql - 基于 sysdate 触发

> ID：14110433
> 
> 赞同：1
> 
> 时间：2013-01-01T12:25:35.150
> 
> 标签：sql, database, oracle, plsql, triggers

我有一张桌子

表架构：

```
CREATE TABLE CHARGES 
(
    total NUMBER(30),
    admitdate TIMESTAMP(6),
    dischargedate TIMESTAMP(30)
) 
```

触发算法：

```
if 
{
   dischargedate="null" 
   then total=admitdate-sysdate=difference in days * Total
   Do this every day at 12:00(24 Hr. Format)
}
else
{
    Do Nothing;
} 
```

我的问题是如果系统在上午 12:00 离线怎么办。此问题将不允许触发器运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:28:05.213

要在特定时间运行一段代码，您可以使用*jobs*。触发器仅用于响应表更改。如果服务器关闭（它几乎不应该），该作业可以在以后运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:58:21.660

如果您可以更改方法并仅存储静态值，则维护和推理会更容易。并且仅在需要时才使用 sysdate 进行计算，例如在需要时在 sql 输出中进行计算。

# android - 为片段膨胀 xml 中的数字格式异常

> ID：14110435
> 
> 赞同：4
> 
> 时间：2013-01-01T12:25:56.883
> 
> 标签：android, exception, android-fragments, android-xml

早上好，我有以下片段：

```
public class NewIntervPhotoFragment extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
    Bundle savedInstanceState) {
    if(container == null) {
        return null;
    }
    // Inflate the layout for this fragment
    return inflater.inflate(R.layout.newintervphoto, container, false);
}
//rest of code goes here 
```

xml的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<EditText 
    android:id="@+id/newintervPhotoDescription"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/newintervPhotoDescription"
    android:inputType="textCapSentences|textMultiLine"
    android:lines="10"
    android:gravity="left|top"/>

 <Button 
   android:id="@+id/newintervPhotoItem"
   android:layout_width="match_parent"
   android:layout_height="wrap_content" 
   android:background="@android:color/transparent"
   android:text="@string/TakePhoto"
   android:textStyle="@style/TextStyle"
   android:layout_below="@id/newintervPhotoDescription"
   android:layout_centerHorizontal="true"/>

</RelativeLayout> 
```

在styles.xml 中：

```
<style 
name="TextStyle">
  <item name="android:textSize">20sp</item> 
  <item name="android:textColor">#FFFFFF</item>
</style> 
```

上面的样式在同一个项目的其他xml文件中使用没有问题。在这种形式中，我得到了致命的异常（logcat 的一部分）：

```
01-01 11:49:32.635: E/AndroidRuntime(780): FATAL EXCEPTION: main
01-01 11:49:32.635: E/AndroidRuntime(780): java.lang.RuntimeException: Unable to start   activity ComponentInfo{cz.triinfo.terminal/cz.triinfo.terminal.ui.NewIntervPhotoActivity}: android.view.InflateException: Binary XML file line #28: Error inflating class <unknown>
01-01 11:49:32.635: E/AndroidRuntime(780): Caused by: android.view.InflateException: Binary XML file line #28: Error inflating class <unknown>
01-01 11:49:32.635: E/AndroidRuntime(780): Caused by: java.lang.reflect.InvocationTargetException
01-01 11:49:32.635: E/AndroidRuntime(780): Caused by: java.lang.NumberFormatException: unable to parse '@2131165192' as integer 
```

现在，当我用异常替换时`android:textStyle="@style/TextStyle"`消失`android:textSize=20sp android:textColor=FFFFFF`了。我的问题是：在第一种情况下我做错了什么，即 xml`android:textStyle`和更一般地说，是否可以在 Fragments 中使用样式？

提前致谢！styles.xml 放在 res/values 中，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style 
    name="TextStyle">
    <item name="android:textSize">20sp</item> 
    <item name="android:textColor">#FFFFFF</item>
  </style>
</resources> 
```

所以问题**确实**在其他地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T18:56:50.690

您需要使用 android:textAppearance 而不是 android:textStyle 来应用样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:32:29.733

检查您的 styles.XML 如何与 android 开发网站上的格式匹配：[这里](http://developer.android.com/guide/topics/resources/style-resource.html)。你可能错过了`resources`标签。

**[编辑]**：刚刚阅读了您的第一条评论，并认为这里值得一提（如果您没有查看我之前提到的链接）：

```
<resources>
    Required
This must be the root node. No attributes. 
```

添加这个会让你的styles.xml看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="TextStyle">
    <item name="android:textSize">20sp</item> 
    <item name="android:textColor">#FFFFFF</item>
  </style>
</resources> 
```

试一试然后说这不是一个真正的解决方案怎么样？

# javascript - 在这种情况下，“对象”是什么意思？

> ID：14110436
> 
> 赞同：0
> 
> 时间：2013-01-01T12:25:59.297
> 
> 标签：javascript

这是先前关于单步执行 json 数组的问题的结果。大卫，回答者给出了一个很好的答案，但我不明白下面的“if”语句中的“对象”这个词是什么或做什么。它似乎是一个字符串，但它似乎像某种关键字一样. 任何人都可以帮忙吗？非常感谢提前。

```
function json2txt(obj) {
var txt = '';
    for (var key in obj) {
       if (obj.hasOwnProperty(key)) {
          if ("object" == typeof(obj[key])) {
             json2txt(obj[key]);
          } else txt += obj + '\t' + obj[key] + '\r';
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T12:27:28.080

JavaScript 中的[`typeof`运算符](http://www.ecma-international.org/ecma-262/5.1/#sec-11.4.3)为您提供一个字符串，告诉您操作数是否是对象引用、数字、原始字符串等。因此，该行正在检查`obj[key]`是否为对象引用。

这是`typeof`给你的（来自上面的链接），操作数的类型在左边：

*   `Undefined`：`"undefined"`
*   `Null`：`"object"`
*   `Boolean`：`"boolean"`
*   `Number`：`"number"`
*   `String`：`"string"`
*   `Object`: (原生且未实现 [[Call]]):`"object"`
*   `Object`: (本机或主机并实现 [[Call]]):`"function"`
*   `Object`: (host and does not implement [[Call]]): implementation-defined except 可能不是`"undefined"`, `"boolean"`, `"number"`, or `"string"`.

可能值得一提的是，虽然`typeof`它经常被写成一个函数，但它**不是**一个函数，括号是不必要的。那条线也可以是：

```
if ("object" == typeof obj[key]) { 
```

您可能还会发现我关于确定事物类型的博客文章很有用：[*说什么？*](http://blog.niftysnippets.org/2010/09/say-what.html)

# jquery - 如何使用jquery实现图像幻灯片

> ID：14110440
> 
> 赞同：0
> 
> 时间：2013-01-01T12:26:38.163
> 
> 标签：jquery

实际上我想开发有两个按钮的幻灯片，说下一个和上一个。所以基于点击事件我想将图像交换到下一个或上一个位置。为此我写了下面的代码。

```
<script>
$("#nxt").live("click", function () {
  $("#img2").replaceWith("<img src='2.jpg'>");
  $("#img3").replaceWith("<img src='3.jpg'>");
  $("#img4").replaceWith("<img src='5.jpg'>");
  $("#img1").replaceWith("<img src='4.jpg'>");
});
</script>
<td>
  <input type="button" id="nxt" value="nxt" onclick="next()">
</td>
<td>
  <div id="img1">
    <img src="2.jpg">
  </div>
</td>
<td>
  <div id="img2">
    <img src="3.jpg">
  </div>
</td>
<td>
  <div id="img3">
    <img src="5.jpg">
  </div>
</td>
<td>
  <div id="img4">
    <img src="4.jpg">
  </div>
</td> 
```

此代码将一键交换所有图像，但我只想一键交换一个图像。下次点击时的下一张图片。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:42:00.667

用于旋转 4 张图像的工作代码，下一个和上一个实现...

**jQuery**

```
<script>
    $(document).ready(function() {
        images = []

        $("#nxt").live("click", function () {
            for (i = 1; i <=4; i++) {
                images[i] = $("#img" + i + " img").attr('src');
            }

            for (i = 1; i <=4; i++) {
                if(i == 1) {
                    from = 4;
                } else {
                    from = i - 1;
                }

                $("#img" + i + " img").attr('src', images[from]);
            }
        });

        $("#prev").live("click", function () {
            for (i = 1; i <=4; i++) {
                images[i] = $("#img" + i + " img").attr('src');
            }

            for (i = 1; i <=4; i++) {
                if(i == 4) {
                    from = 1;
                } else {
                    from = i + 1;
                }

                $("#img" + i + " img").attr('src', images[from]);
            }
        });
    });
</script> 
```

**HTML**

```
<td>
  <input type="button" id="nxt" value="nxt">
</td>
<td>
  <div id="img1">
    <img src="2.jpg">
  </div>
</td>
<td>
  <div id="img2">
    <img src="3.jpg">
  </div>
</td>
<td>
  <div id="img3">
    <img src="5.jpg">
  </div>
</td>
<td>
  <div id="img4">
    <img src="4.jpg">
  </div>
</td> 
```

# qt - 预期的属性类型大小

> ID：14110442
> 
> 赞同：1
> 
> 时间：2013-01-01T12:26:41.893
> 
> 标签：qt, qml

我开始学习 QML。

我在[这里](http://doc.qt.digia.com/qt/qml-size.html)发现QML 中有“大小”类型。但是当我尝试使用它时：

```
property size buttonSize: "75x30" 
```

我得到错误：

```
Button.qml:13:14: Expected property type 
         property size buttonSize: "75x30" 
                  ^ 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T16:07:24.780

`size`不直接支持作为属性类型。

[此处](http://doc.qt.digia.com/qt/qml-extending-types.html#supported-property-types)列出了支持的类型。
您还可以使用 a`variant`来存储大小：

```
property variant buttonSize: Qt.size(75,30) 
```

# android - AlarmManager 自动启动

> ID：14110445
> 
> 赞同：1
> 
> 时间：2013-01-01T12:27:23.243
> 
> 标签：android

我有这些课，开始时设置一个闹钟，10秒后，闹钟开始。还有一个来自 sharedpreferences 的读数，以检查用户是否启用或禁用了警报。现在，当应用程序未处于活动状态（例如重新启动后）或应用程序被杀死时，我也需要星星警报。AlarmReceiver: MainActiAlarmRAlarmReceiver:eceiver:vity

```
public class MainActivity extends Activity {
AlarmReceiver:AlarmReceiver:
    Boolean set;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Intent intent = new Intent(this, AlarmReceiver.class);

        PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0,
        intent, PendingIntent.FLAG_ONE_SHOT);

        // read from sharepreferences
//      [...]
        //

        if (set){

        AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
        alarmManager.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + (10 * 1000), pendingIntent);
        Toast.makeText(this, "Alarm set", Toast.LENGTH_LONG).show();
        }

    } 
```

报警接收器：

```
public final class AlarmReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "Alarm worked.", Toast.LENGTH_LONG).show();

    }
} 
```

显现：

```
<receiver android:name="AlarmReceiver"></receiver> 
```

# jquery - 如何在某些情况下自动关闭 jQuery 中的对话框

> ID：14110447
> 
> 赞同：0
> 
> 时间：2013-01-01T12:27:27.813
> 
> 标签：jquery

我有一组复选框，用户必须选择至少一个并继续进行进一步的活动。当用户单击一个按钮时，如果用户选择了一个按钮，我会检查上述功能，而不是允许打开一个对话框，否则会提醒用户选择最小的一个并且不要打开对话框。

以下是打开对话框的功能。

```
function openLoadInfo(){
    global.getElementById("diaLoad").value="";
    global.getElementById("diaReadydate").value="";
    global.getElementById("diaCanceldate").value="";

      $("#loadinfo")
        .dialog(
                {
                    modal: true,
                    draggable: false,
                    closeOnEscape: true,
                    title: "Load # info",
                    resizable: false,
                    width: 300,
                    // open: function() {
                    //            
                    // },
                    buttons: {
                        Ok: function () {
                           $(this).dialog('close');
                        }
                    }
                }); 
```

如果选中复选框，我可以通过以下脚本获得价值。

```
$('input:checked').each(function() {
          alert("Value : "+$(this).val());
        }); 
```

如果上述代码失败，我必须关闭对话框并提示用户至少选择一个复选框。

请帮我得到这个。

问候

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:42:46.380

```
((yourCondition) ? $(this).dialog( "close" );  $(this).dialog("destroy"); : ''); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T12:48:18.973

现在在你的情况下，你可以用 jQuery 编写

```
$('input checked').live('click',function(){
if ($(this).is(':checked')) {
                diolag.open();
            }
            else if ($(this).not(':checked')) {
                alert("please select mimimum one")
            }

}); 
```

# android - 如何从微调器中删除第一项

> ID：14110450
> 
> 赞同：2
> 
> 时间：2013-01-01T12:28:02.063
> 
> 标签：android

每当我默认创建微调器时，它都会显示微调器中的第一个元素。我想在那个微调器上显示我自己的提示。

**注意：- 我正在从 Web 服务接收数据。**

xml

```
 <Spinner
            android:id="@+id/spinnerAtlasContactSignup"
            android:layout_width="200dip"
            android:layout_height="46dp"
            android:layout_below="@+id/editCompanySignup"
            android:layout_marginBottom="60dp"
            android:layout_marginTop="10dp"
            android:background="@drawable/slect_box1x"
            android:ems="10"
            android:padding="10dp"
            android:prompt="@string/atlas_contact" /> 
```

代码 -

```
private void initializeSpinner(ArrayList<AtlasContact> atlastContacts) {

ArrayAdapter<AtlasContact> adapter = new ArrayAdapter<AtlasContact>(this,android.R.layout.simple_spinner_item, atlastContacts);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
// Apply the adapter to the spinner
spinnerAtlasContact.setAdapter(adapter); 
```

这`AtlasContact`是一个接受来自网络服务的数据的类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:48:03.623

使用 for 循环获取所有数据，并在此 for 循环中创建新的数组列表，当 i=0 时，不要添加数组列表数据并在微调器中设置新的数组列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:13:54.440

你可以试试下面一个

```
 private void initializeSpinner(ArrayList<AtlasContact> atlastContacts) {

    ArrayList<AtlasContact> atlastContactsDuplicate ; 
    For (int i= 0 ; i < atlastContacts+1 ; i++){
     if (i==0){
           atlastContactsDuplicate.add("") ; //this is null object which can be 
                                             //adjust           weight space     
        }
    else
    atlastContactsDuplicate.add(atlastContacts.get(i)) ; 
    }
        ArrayAdapter<AtlasContact> adapter = new ArrayAdapter<AtlasContact>(this,android.R.layout.simple_spinner_item, atlastContactsDuplicate);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        // Apply the adapter to the spinner
        spinnerAtlasContact.setAdapter(adapter); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T23:22:17.260

更改您`initializeSpinner()`以在第 '0' 索引处添加对象 -

```
 private void initializeSpinner(ArrayList<AtlasContact> atlastContacts) {

atlastContacts.add(0, new AtlasContact()); //Set the properties of the anonymous object to what you want.

    ArrayAdapter<AtlasContact> adapter = new ArrayAdapter<AtlasContact>(this,android.R.layout.simple_spinner_item, atlastContacts);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Apply the adapter to the spinner
    spinnerAtlasContact.setAdapter(adapter); 
    } 
```

# java - 如何检查位集中的位是零还是一？

> ID：14110456
> 
> 赞同：-3
> 
> 时间：2013-01-01T12:28:30.407
> 
> 标签：java, indexing, bit, bitset

我有一个位集，我想检查特定索引处的位是零还是一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T12:30:19.680

只需使用`.get()`：

```
return theSet.get(index); 
```

`true`如果设置了该位，则返回，`false`否则返回。

[Javadoc在这里](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html#get%28int%29)

# python - 使用 argparse 和相同的 dest 属性设置默认值

> ID：14110458
> 
> 赞同：2
> 
> 时间：2013-01-01T12:28:32.447
> 
> 标签：python, argparse

这是一个简单的例子。

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('-a', action = 'append_const', dest = 'letter', const = 'a')
parser.add_argument('-b', action = 'append_const', dest = 'letter', const = 'b')
parser.set_defaults(letter = ['a', 'b'])
print(parser.parse_args('-a'.split()))
print(parser.parse_args('-b'.split()))
print(parser.parse_args(''.split())) 
```

结果 ：

```
Namespace(letter=['a', 'b', 'a'])
Namespace(letter=['a', 'b', 'b'])
Namespace(letter=['a', 'b']) 
```

如果没有 set_defaults 行，结果是：

```
Namespace(letter=['a'])
Namespace(letter=['b'])
Namespace(letter=None) 
```

如何为这样的结果配置 argparse ？

```
Namespace(letter=['a'])
Namespace(letter=['b'])
Namespace(letter=['a', 'b']) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:16:17.573

正如其他人所提到的，`store_const` *几乎*可以满足您的需求，只是（正如@Theodros Zelleke 指出的那样）`-ab`不会被正确解析。我认为解决该问题的最简单方法是在调用后简单地处理没有参数的情况`parse_args`：

```
import argparse
import sys

def parse_args(argv = sys.argv[1:]):
    parser = argparse.ArgumentParser()
    parser.add_argument('-a', action = 'append_const', dest = 'letter', const = 'a')
    parser.add_argument('-b', action = 'append_const', dest = 'letter', const = 'b')
    args = parser.parse_args(argv)
    if args.letter is None:
        args.letter = ['a','b']
    return args

print(parse_args('-a'.split()))
print(parse_args('-b'.split()))
print(parse_args('-ab'.split()))
print(parse_args(''.split())) 
```

产量

```
Namespace(letter=['a'])
Namespace(letter=['b'])
Namespace(letter=['a', 'b'])
Namespace(letter=['a', 'b']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:43:32.757

您应该存储`const`而不是附加它，使用`action` `'store_const'`（[doc](http://docs.python.org/dev/library/argparse.html#action)）：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('-a', action = 'store_const', dest = 'letter', const = 'a')
parser.add_argument('-b', action = 'store_const', dest = 'letter', const = 'b')
parser.set_defaults(letter = ['a', 'b'])
print(parser.parse_args('-a'.split()))
print(parser.parse_args('-b'.split()))
print(parser.parse_args(''.split())) 
```

这将导致：

```
Namespace(letter='a')
Namespace(letter='b')
Namespace(letter=['a', 'b']) 
```

# powershell - 为列表中的每个项目创建下拉菜单

> ID：14110459
> 
> 赞同：0
> 
> 时间：2013-01-01T12:28:33.470
> 
> 标签：powershell, powershell-2.0, powershell-3.0

好的，所以我正在尝试为“$Cots”中的每个项目创建一个下拉菜单并将其稍微向下移动。我有它的基础知识，以及它的基本创建，但不知道我会如何使用“controls.add(whatever)”来调用它以及信息如何链接。

我的代码：

```
$Script = @{}; $COTS = @{}
Function CheckProgram {
    Param ($Program)

    # Create Object
    $OutputObj = New-Object -TypeName PSobject

    $OutputObj | Add-Member -MemberType NoteProperty -Name Name -Value $Program.Product
    $OutputObj | Add-Member -MemberType NoteProperty -Name LatestVersion -Value $Program.("Latest Version")
    $OutputObj | Add-Member -MemberType NoteProperty -Name SilentInstallSwitches -Value $Program.("Silent Install Switches")
    $OutputObj | Add-Member -MemberType NoteProperty -Name InstallerPath -Value $Program.("Installer Path")
    $OutputObj | Add-Member -MemberType NoteProperty -Name RegistryIdentifier -Value ($Program.Product -replace "[0-9]" -replace "  ","*")

    IF (Test-Path $Program.("Installer Path")) {
        $OutputObj | Add-Member -MemberType NoteProperty -Name InstallerPathValid -Value "Yes"
    } ELSE {
        $OutputObj | Add-Member -MemberType NoteProperty -Name InstallerPathValid -Value "No"
    }
    $OutputObj | Add-Member -MemberType NoteProperty -Name ProductArchitectures -Value $Program.Architecture

    # Populate temporary variable with infomation from registry
    $InstalledProgram = ($COTS.Programs | Where {$_.DisplayName -like $OutputObj.RegistryIdentifier})
    IF ($InstalledProgram) {
        IF ($InstalledProgram.PSPath -like "*Wow6432Node*"){
            $OutputObj | Add-Member -MemberType NoteProperty -Name InstalledArchitecture -Value "x64"
        } ELSE {
            $OutputObj | Add-Member -MemberType NoteProperty -Name InstalledArchitecture -Value "x32"
        }
        $OutputObj | Add-Member -MemberType NoteProperty -Name Installed -Value "Yes"
        $OutputObj | Add-Member -MemberType NoteProperty -Name CurrentVersion -Value $InstalledProgram.DisplayVersion
        $OutputObj | Add-Member -MemberType NoteProperty -Name UninstallString -Value $InstalledProgram.UninstallString
    } ELSE {
        $OutputObj | Add-Member -MemberType NoteProperty -Name Installed -Value "No"
    }

    # Determine what action should be taken
    IF ($OutputObj.installed -eq "Yes") {
        IF ($OutPutObj.CurrentVersion -le $OutPutObj.LatestVersion) {
            $OutputObj | Add-Member -MemberType NoteProperty -Name InstallAction -Value "Update"
            $OutPutObj.InstallOptions = @("Install","Update","Uninstall","Resinstall","None")
        } ELSEIF ($OutputObj.CurrentVersion -ge $OutputObj.LastestVersion) {
            Write-warning "Installed version of {f} greater than expected."
            $OutputObj | Add-Member -MemberType NoteProperty -Name InstallAction -Value "Error"
            $OutPutObj.InstallOptions = @("None")
        } ELSEIF ($OutputObj.CurrentVersion -eq $OutputObj.Product) {
            $OutputObj | Add-Member -MemberType NoteProperty -Name InstallAction -Value "None"
        }
    } ELSE {
        $OutputObj | Add-Member -MemberType NoteProperty -Name InstallAction -Value "Install"
        $OutPutObj.InstallOptions = @("Install")
    }

# <Example code that doesn't work>
    $OutputObj.ComboBox = New-object System.Windows.Forms.ComboBox
    $OutputObj.ComboBox.Name = ""
    $OutputObj.ComboBox.Items.AddRange($OutPutObj.InstallAction)
    $OutputObj.ComboBox.DataBindings.DefaultDataSourceUpdateMode = 0
    $OutputObj.ComboBox.Location = New-Object System.Drawing.Point(200,200)
    $OutputObj.ComboBox.Controls.Add($ComboBox)
# </Example code that doesn't work>
    ## Add to list or update ##
    [Array]$Cots.Software += $OutputObj

}
$COTS.Load = Import-csv "$PSScriptRoot\3rdPartyCots.csv"
$COTS.AllInstalled = Get-ChildItem HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\ | Get-ItemProperty
$COTS.AllInstalled += Get-ChildItem HKCU:\Software\Microsoft\Windows\CurrentVersion\Uninstall\ | Get-ItemProperty
IF (Test-path HKLM:\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\) { $COTS.AllInstalled += Get-ChildItem HKLM:\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\ | Get-ItemProperty}
$COTS.Programs = ($Cots.AllInstalled | Where {$_.DisplayName -ne $Null -AND $_.SystemComponent -ne "1" -AND $_.ParentKeyName -eq $Null} |Select *).GetEnumerator() | Sort-Object {"$_"}
ForEach ($Cot in $Cots.load) {CheckProgram $Cot}

function MainMenuForm {

#region Import the Assemblies
[reflection.assembly]::loadwithpartialname("System.Drawing") | Out-Null
[reflection.assembly]::loadwithpartialname("System.Windows.Forms") | Out-Null

# Create Forms and Items {
$MainMenu = New-Object System.Windows.Forms.Form
$InitialFormWindowState = New-Object System.Windows.Forms.FormWindowState

#Buttons
$HomeButton = New-Object System.Windows.Forms.Button
$ScriptSettingsButton = New-Object System.Windows.Forms.Button
$COTSButton = New-Object System.Windows.Forms.Button
$MicrosoftButton = New-Object System.Windows.Forms.Button
$ConfigureButton = New-Object System.Windows.Forms.Button
$MiscToolsButton = New-Object System.Windows.Forms.Button

#Misc Items
$ProgressBar = New-Object System.Windows.Forms.ProgressBar
$StatusBar = New-Object System.Windows.Forms.StatusBar

#Tab Control
$TabControl = New-object System.Windows.Forms.TabControl

#Tabs
$HomeTab = New-Object System.Windows.Forms.TabPage
$ScriptSettingsTab = New-Object System.Windows.Forms.TabPage
$COTSTab = New-Object System.Windows.Forms.TabPage
$MicrosoftTab = New-Object System.Windows.Forms.TabPage
$ConfigureTab = New-Object System.Windows.Forms.TabPage
$MiscToolsTab = New-Object System.Windows.Forms.TabPage

$MicrosoftDataGrid = New-Object System.Windows.Forms.DataGridView
#----------------------------------------------
#Generated Event Script Blocks
#----------------------------------------------
#Unknown
$OnLoad_StateCorrection = { $MainMenu.WindowState = $InitialFormWindowState }
$OnLoad_MicrosoftDataGrid = { LoadMicrosoft }

#Buttons
$HomeButton_OnClick = { $TabControl.SelectTab($HomeTab) }
$ScriptSettingsButton_OnClick = { $TabControl.SelectTab($ScriptSettingsTab) }
$COTSButton_OnClick = {$TabControl.SelectTab($COTSTab)}
$MicrosoftButton_OnClick = {$TabControl.SelectTab($MicrosoftTab)}
$ConfigureButton_OnClick = {$TabControl.SelectTab($ConfigureTab)}
$MiscToolsButton_OnClick = {$TabControl.SelectTab($MiscToolsTab)}

#Load Main Menu
$MainMenu.ClientSize = New-Object System.Drawing.Size(665,474)
$MainMenu.DataBindings.DefaultDataSourceUpdateMode = 0
$MainMenu.Name = "MainMenu"
$MainMenu.Text = "Patching Script"
$MainMenu.TopMost = $True

# == Home Button == #
$HomeButton.Name = "HomeButton"
$HomeButton.Text = "Home"
$HomeButton.TabIndex = 2
$HomeButton.UseVisualStyleBackColor = $True
$HomeButton.add_Click($HomeButton_OnClick)
$HomeButton.DataBindings.DefaultDataSourceUpdateMode = 0
$HomeButton.Location = New-Object System.Drawing.Point(12,69)
$HomeButton.Size = New-Object System.Drawing.Size(100,35)

$MainMenu.Controls.Add($HomeButton)

# == Script Settings Button == #
$ScriptSettingsButton.Name = "ScriptSettingsButton"
$ScriptSettingsButton.Text = "Script Settings"
$ScriptSettingsButton.TabIndex = 3
$ScriptSettingsButton.UseVisualStyleBackColor = $True
$ScriptSettingsButton.add_Click($ScriptSettingsButton_OnClick)
$ScriptSettingsButton.DataBindings.DefaultDataSourceUpdateMode = 0
$ScriptSettingsButton.Size = New-Object System.Drawing.Size(100,35)
$ScriptSettingsButton.Location = New-Object System.Drawing.Point(12,110)

$MainMenu.Controls.Add($ScriptSettingsButton)

# == COTS Button == #
$COTSButton.Name = "COTSButton"
$COTSButton.Text = "C.O.T.S."
$COTSButton.TabIndex = 4
$COTSButton.UseVisualStyleBackColor = $True
$COTSButton.add_Click($COTSButton_OnClick)
$COTSButton.DataBindings.DefaultDataSourceUpdateMode = 0
$COTSButton.Size = New-Object System.Drawing.Size(100,35)
$COTSButton.Location = New-Object System.Drawing.Point(12,151)

$MainMenu.Controls.Add($COTSButton)

# == Microsoft Button == #
$MicrosoftButton.Name = "MicrosoftButton"
$MicrosoftButton.Text = "Microsoft Patches"
$MicrosoftButton.TabIndex = 5
$MicrosoftButton.UseVisualStyleBackColor = $True
$MicrosoftButton.add_Click($MicrosoftButton_OnClick)
$MicrosoftButton.DataBindings.DefaultDataSourceUpdateMode = 0
$MicrosoftButton.Size = New-Object System.Drawing.Size(100,35)
$MicrosoftButton.Location = New-Object System.Drawing.Point(12,192)

$MainMenu.Controls.Add($MicrosoftButton)

# == Configure Button == #
$ConfigureButton.Name = "ConfigureButton"
$ConfigureButton.Text = "Configure Script"
$ConfigureButton.TabIndex = 6
$ConfigureButton.UseVisualStyleBackColor = $True
$ConfigureButton.add_Click($ConfigureButton_OnClick)
$ConfigureButton.DataBindings.DefaultDataSourceUpdateMode = 0
$ConfigureButton.Location = New-Object System.Drawing.Point(12,233)
$ConfigureButton.Size = New-Object System.Drawing.Size(100,35)

$MainMenu.Controls.Add($ConfigureButton)

# == Misc Tools Button == #
$MiscToolsButton.Name = "MiscToolsButton"
$MiscToolsButton.Text = "Misc Tools"
$MiscToolsButton.TabIndex = 7
$MiscToolsButton.UseVisualStyleBackColor = $True
$MiscToolsButton.add_Click($MiscToolsButton_OnClick)
$MiscToolsButton.DataBindings.DefaultDataSourceUpdateMode = 0
$MiscToolsButton.Location = New-Object System.Drawing.Point(12,274)
$MiscToolsButton.Size = New-Object System.Drawing.Size(100,35)

$MainMenu.Controls.Add($MiscToolsButton)

# == Tab Control == #
$TabControl.Name = "TabControl"
$TabControl.TabIndex = 4
$TabControl.SelectedIndex = 0
$TabControl.DataBindings.DefaultDataSourceUpdateMode = 0
$TabControl.Location = New-Object System.Drawing.Point(124,65)
$TabControl.Size = New-Object System.Drawing.Size(525,375)
$TabControl.visible = $True
$MainMenu.Controls.Add($TabControl)

$TabControl.SizeMode = "Fixed"
$TabControl.ItemSize = New-Object System.Drawing.Size(0, 1)
$TabControl.Appearance = "Buttons"

## Possibly Unneeded Info
#$ScriptSettingsTab.Location = New-Object System.Drawing.Point(4,22)
#$ScriptSettingsTab.Size = New-Object System.Drawing.Size(535,374)

# == Home Tab == #
$HomeTab.Name = "HomeTab"
$HomeTab.Text = "Home"
$HomeTab.TabIndex = 1
$HomeTab.UseVisualStyleBackColor = $True
$HomeTab.DataBindings.DefaultDataSourceUpdateMode = 0

$TabControl.Controls.Add($HomeTab)

# == Script Settings Tab == #
$ScriptSettingsTab.Name = "ScriptSettingsTab"
$ScriptSettingsTab.Text = "Home"
$ScriptSettingsTab.TabIndex = 2
$ScriptSettingsTab.UseVisualStyleBackColor = $True
$ScriptSettingsTab.DataBindings.DefaultDataSourceUpdateMode = 0
$ScriptSettingsTab.BackColor = [System.Drawing.Color]::CornflowerBlue

$TabControl.Controls.Add($ScriptSettingsTab)

# == C.O.T.S. Tab == #
$COTSTab.Name = "COTSTab"
$COTSTab.Text = "Home"
$COTSTab.TabIndex = 2
$COTSTab.UseVisualStyleBackColor = $True
$COTSTab.DataBindings.DefaultDataSourceUpdateMode = 0
$COTSTab.BackColor = [System.Drawing.Color]::Blue

$TabControl.Controls.Add($COTSTab)

# == Microsoft Patches Tab == #
$MicrosoftTab.Name = "MicrosoftTab"
$MicrosoftTab.Text = "Home"
$MicrosoftTab.TabIndex = 2
$MicrosoftTab.UseVisualStyleBackColor = $True
$MicrosoftTab.DataBindings.DefaultDataSourceUpdateMode = 0
$MicrosoftTab.BackColor = [System.Drawing.Color]::Green

$TabControl.Controls.Add($MicrosoftTab)
# == Microsoft Data Grid == #
$MicrosoftDataGrid.Name
$MicrosoftDataGrid.Size = New-Object System.Drawing.Size(492,308)
$MicrosoftDataGrid.DataBindings.DefaultDataSourceUpdateMode = 0 
$MicrosoftDataGrid.HeaderForeColor = [System.Drawing.Color]::FromArgb(255,0,0,0) 
$MicrosoftDataGrid.Name = "MicrosoftDataGrid" 
$MicrosoftDataGrid.DataMember = "" 
$MicrosoftDataGrid.TabIndex = 0 
$MicrosoftDataGrid.Location = New-Object System.Drawing.Point(13,48)

$MicrosoftDataGrid.autosize = $true
$MicrosoftTab.Controls.Add($MicrosoftDataGrid)

# == Configure Script Tab == #
$ConfigureTab.Name = "ConfigureTab"
$ConfigureTab.Text = "Home"
$ConfigureTab.TabIndex = 2
$ConfigureTab.UseVisualStyleBackColor = $True
$ConfigureTab.DataBindings.DefaultDataSourceUpdateMode = 0
$ConfigureTab.BackColor = [System.Drawing.Color]::Red

$TabControl.Controls.Add($ConfigureTab)

# == Misc Tools Tab == #
$MiscToolsTab.Name = "ConfigureTab"
$MiscToolsTab.Text = "Home"
$MiscToolsTab.TabIndex = 2
$MiscToolsTab.UseVisualStyleBackColor = $True
$MiscToolsTab.DataBindings.DefaultDataSourceUpdateMode = 0
$MiscToolsTab.BackColor = [System.Drawing.Color]::blue

$TabControl.Controls.Add($MiscToolsTab)

# == Progress Bar == #
$progressBar.Name = "progressBar"
$progressBar.DataBindings.DefaultDataSourceUpdateMode = 0
$progressBar.Location = New-Object System.Drawing.Point(589,458)
$progressBar.Size = New-Object System.Drawing.Size(75,15)
$progressBar.TabIndex = 0

$MainMenu.Controls.Add($progressBar)

# == Status bar == #
$StatusBar.Name = "StatusBar"
$StatusBar.Text = "statusBar1"
$StatusBar.TabIndex = 1
$StatusBar.Size = New-Object System.Drawing.Size(665,18)
$StatusBar.Location = New-Object System.Drawing.Point(0,456)
$StatusBar.DataBindings.DefaultDataSourceUpdateMode = 0
$StatusBar.add_PanelClick($statusBar_PanelClick)

$MainMenu.Controls.Add($StatusBar)

# == Save and Open Form == #
$InitialFormWindowState = $MainMenu.WindowState

$MainMenu.add_Load($OnLoad_StateCorrection)
$MainMenu.add_Load($OnLoad_MicrosoftDataGrid)

$MainMenu.ShowDialog()| Out-Null

} #End Function

MainMenuForm 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:40:47.517

首先，您正在做一些不可能的事情：在第 6 行，您声明

```
$OutputObj = New-Object -TypeName PSobject 
```

在第 54 行

```
$OutputObj.ComboBox = New-object System.Windows.Forms.ComboBox 
```

您不能将此新对象分配给对象 $OutputObj 的不存在属性“组合框”。相反，你应该这样做：

```
# <Example code that does work>
    $ComboBox = New-object System.Windows.Forms.ComboBox
    $ComboBox.Name = ""
    $ComboBox.Items.AddRange($OutPutObj.InstallAction)
    $ComboBox.DataBindings.DefaultDataSourceUpdateMode = 0
    $ComboBox.Location = New-Object System.Drawing.Point(200,200)
    $OutputObj | Add-Member noteproperty "Combobox" $ComboBox
# </Example code that does work> 
```

与 InstallOptions 类似——请参阅您收到的错误消息： `Property 'InstallOptions' cannot be found on this object; make sure it exists and is settable. At line:50 char:20`

`$null`实际上，如果您的对象无论如何都必须包含这些属性，为了您的利益，您可以在脚本开头定义所有属性：

```
# Create Object
$OutputObj = New-Object -TypeName PSobject
$OutputObj | Add-Member -MemberType NoteProperty -Name Name -Value $Program.Product
...
$OutputObj | Add-Member -MemberType NoteProperty -Name RegistryIdentifier -Value ($Program.Product -replace "[0-9]" -replace "  ","*")
$OutputObj | Add-Member NoteProperty "InstallAction" $null
$OutputObj | Add-Member NoteProperty "InstallOptions" $null
$OutputObj | Add-Member NoteProperty "ComboBox" $null
... 
```

然后，如果它们是您的对象的一部分，您可以使用

```
$OutputObj.ComboBox = $ComboBox
$OutputObj.InstallAction = "Install"
... 
```

这将使您的代码更具可读性，正如您在此改编代码中所见：

```
# Determine what action should be taken
IF ($OutputObj.installed -eq "Yes") {
    IF ($OutPutObj.CurrentVersion -le $OutPutObj.LatestVersion) {
        $OutputObj.InstallAction = "Update"
        $OutPutObj.InstallOptions = @("Install","Update","Uninstall","Resinstall","None")
    } ELSEIF ($OutputObj.CurrentVersion -ge $OutputObj.LastestVersion) {
        Write-warning "Installed version of {f} greater than expected."
        $OutputObj.InstallAction = "Error"
        $OutPutObj.InstallOptions = @("None")
    } ELSEIF ($OutputObj.CurrentVersion -eq $OutputObj.Product) {
        $OutputObj.InstallAction = "None"
    }
} ELSE {
    $OutputObj.InstallAction = "Install"
    $OutPutObj.InstallOptions = @("Install")
} 
```

一旦你的代码被清理并且不会产生错误，你的问题的答案就很简单了。您可以将组合框添加到任何其他表单控件中，就像您为其余部分所做的那样，样式为

```
$COTSTab.Controls.Add($YourCustomObject.ComboBox) 
```

# javascript - 在函数中使用数据属性

> ID：14110467
> 
> 赞同：0
> 
> 时间：2013-01-01T12:29:54.443
> 
> 标签：javascript

我有以下 HTML：

```
<select class="select optional" data-minimumresultsforsearch="10" 
  data-query="function (query) {var data = {results: []}, i, j, s; for (i = 1; i &lt; 5; i++) {s = &quot;&quot;; for (j = 0; j &lt; i; j++) {s = s + query.term;} data.results.push({id: query.term + i, text: s});} query.callback(data);}" 
  id="user_default_locale" name="user[default_locale]"></select> 
```

我需要找到一个循环遍历所有元素（如 select）的 javascript 函数。这就是我发现自己的部分:-)

```
document.getElementsByTagName('select') 
```

但现在我需要这样称呼它们：

```
$("user_default_locale").select2({
            minimumresultsforsearch: 10,
            query: function (query) {
                var data = {results: []}, i, j, s;
                for (i = 1; i < 5; i++) {
                    s = "";
                    for (j = 0; j < i; j++) {s = s + query.term;}
                    data.results.push({id: query.term + i, text: s});
                }
                query.callback(data);
            }
        }); 
```

有人知道怎么做吗？

编辑：

好的，我现在有这个：

```
 $('select').each(function(idx, elem) {
  var $elem = $(elem);
  var VarMinimumResultsForSearch = $elem.data('minimumResultsForSearch');
  var VarPlaceholder = $elem.data('placeholder');

  $elem.select2({minimumResultsForSearch: VarMinimumResultsForSearch || undefined, placeholder: VarPlaceholder || undefined});
  }); 
```

有了这个，它确实执行了 select2 但不使用参数...

```
<select class="select optional" data-minimumresultsforsearch="1" data-placeholder="JOS" 
  id="user_default_locale" name="user[default_locale]"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:45:07.337

如果您要循环选择，您可能想尝试以下方法：

```
var funcs = {
    'func1': function() { .... },
    'func2': function() { .... }
}

$('select').each(function(idx, elem) {
    var $elem = $(elem);
    var foo = $elem.data('foo');
    var bar = $elem.data('bar');
    var funcKey = $elem.data('func-key');
    var callback = funcs[funcKey];

    $elem.select2(blah blah);
}); 
```

# jquery - 在服务器端发出运行滑块

> ID：14110474
> 
> 赞同：-1
> 
> 时间：2013-01-01T12:30:31.630
> 
> 标签：jquery, slider, client

我正在使用 jQuery 滑块。我在客户端有效地使用了它，但是在服务器端运行时遇到了问题。

我在客户端运行的代码是：

```
 var a = jQuery.noConflict();
  j(document).ready(function () {
       a('#sliderFrame').nivoSlider();
  }); 
```

它昨天工作得很好，但今天它不工作了。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:38:28.370

```
jQuery(document).ready(function($) {
    // Stuff to do as soon as the DOM is ready. 
    //Use $() w/o colliding with other libs;
    $('#sliderFrame').nivoSlider();
}); 
```

您不需要创建另一个对象`a`或`j`使用 jquery。即使您有多个 javascript 库，上述方法也可以安全使用。

注意：在使用`nivoSlider()`方法之前，请确保您已包含必要的**nivoSlider 插件 js 文件**，如下所示...

```
<script src="path/to/jquery.nivo.slider.pack.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:25:39.820

请尝试以下代码

```
var a = jQuery.noConflict();
a(document).ready(function () {
   a('#sliderFrame').nivoSlider();
}); 
```

# batch-file - 在批处理编程中更改文件的修改日期

> ID：14110477
> 
> 赞同：0
> 
> 时间：2013-01-01T12:30:48.377
> 
> 标签：batch-file

我已将文件 ABC.txt（修改日期：22/12/2012 15:26）从一个目录复制到另一个目录，修改日期与源文件相同。但想将其更改为当前日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:25:01.050

windows 中的内部命令（假设您在 windows 上）**Copy**、**Move**、**Xcopy**和**RoboCopy**将修改日期保留在文件中。为此，您可能必须下载实用程序。新年快乐！

# ios - 如何检测以 UIScrollView 作为子视图的父视图中的滑动？

> ID：14110478
> 
> 赞同：1
> 
> 时间：2013-01-01T12:30:51.637
> 
> 标签：ios, uiscrollview, gesture

我有 3 个嵌套视图，主视图（父）-> UIScrollView-> ImageView。我正在构建一个内容查看器，用户可以在其中滑动以从列表中获取下一个/上一个图像。但是我希望仅在用户到达最右侧/底部（图像的末尾）或最左侧/顶角后才加载下一张图像。有一个过渡动画，其中下一个/上一个图像在加载下一个项目时跟随滑动。我应该如何实现这一目标？

PS：我已经尝试在父视图中添加手势识别器，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:50:19.253

您应该使用滑动手势

```
UISwipeGestureRecognizer *swipe_left = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipe_left)];
    swipe_left.direction = UISwipeGestureRecognizerDirectionLeft;
    [yourView addGestureRecognizer:swipe_left];
 UISwipeGestureRecognizer *swipe_right = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(swipe_right)];
    swipe_right.direction = UISwipeGestureRecognizerDirectionRight;
    [yourView addGestureRecognizer:swipe_right];

-(void)swipe_left
{
    //Write your content offset if required
}

-(void)swipe_right
{

   someView.contentOffset = CGPointMake(470, 0);      //Example
} 
```

问候

迪帕克

新年快乐！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:22:24.910

似乎您正在使用滚动视图来移动当前图像，然后当用户遇到两个触发点（左上/右下）中的任何一个时，您想要触发动画并加载下一个图像。如果是这样的话，你为什么不直接使用 scrollView 委托方法`-scrollViewDidScroll:(UIScrollView *)scroller`呢？在该方法中，您可以检查 scrollView 的`contentOffset`属性并将其与当前图像的尺寸进行比较。当`contentOffset`触发动画和加载的参数落在您的参数范围内时，请执行此操作。

# css - 如果 GET var 不为空，TYPO3 添加 css

> ID：14110479
> 
> 赞同：0
> 
> 时间：2013-01-01T12:30:56.363
> 
> 标签：css, typo3

我的目标很简单。如果当前页面的 URL 中的某个 GET 参数不为空，我想向它注入一些 css。

`tx_multishop_pi1[page_section]`在下面的示例中，如果URL 中存在，我想隐藏所有内容（例如建议） 。

```
page{
  headerData.960= TEXT
  headerData.960.data = GP:tx_multishop_pi1|page_section
  headerData.960.required = 1
  headerData.960.value(
  <style type="text/css">
  body{
    display:none !important;
  }
  </style>
  )       
} 
```

但这行不通。我可以尝试`[globalString = GP:tx_multishop_pi1|page_section = somehting]`，但我不想那样。`tx_multishop_pi1[page_section]`如果var存在，我想注入css （没有计量它的值）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-29T22:32:34.707

这可以通过使用`globalString`条件和`if.isTrue.data`

```
[globalString = GP:tx_multishop_pi1|page_section > 0]
    page.headerData.960 = TEXT
    page.headerData.960 {
        value (
            <style>
                body{
                   display:none !important;
                }
            </style>
        )
       if.isTrue.data = GP:tx_multishop_pi1|page_section
    }
[end] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T18:53:54.090

您可以使用`userFunc`条件（在[TSref 条件](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.7.0/view/1/4/)的底部）来执行（几乎）任何比较。

最重要的是要记住这个函数必须以`user_`前缀开头，有一些旧文档没有提及或给出错误的示例。这是给您的示例（将其添加到`localconf.php`）

```
function user_multishopSectionExists() {
    $gp = t3lib_div::_GP('tx_multishop_pi1');
    return (is_array($gp) && array_key_exists('page_section', $gp)) ? true : false;
} 
```

因此您可以在 TS 设置字段中使用它：

```
[userFunc = user_multishopSectionExists()]
  page.headerData.960= TEXT
  page.headerData.960.value(
    // etc...
  )
[end] 
```

*当然，编写通用匹配器是更好的主意，即。就像是：*

```
[userFunc = user_paramExists("tx_multishop_pi1|page_section")] 
```

# c++ - 将我的服务器响应 char 数组转换为 wchar_t 数组是处理客户端收到的服务器消息的正确方法吗？

> ID：14110480
> 
> 赞同：1
> 
> 时间：2013-01-01T12:30:56.207
> 
> 标签：c++, sockets, visual-c++

我是 c++、windows 编程和这些论坛的新手（对于任何违反程序的行为感到抱歉），一段时间后我无法找到答案，所以这里......

我正在编写一个小聊天程序，它目前包括一个等待客户端连接的服务器，当客户端连接时，它会发送消息“您已连接！”。客户端是一个 Win32 应用程序，它自动连接到服务器，接收连接消息，并将其填充到多行文本框中。

我让它工作了，但我不得不使用一些代码将服务器响应转换为 wchar_t，而我这样做的方式对我来说并不合适。有没有更好的方法来设置客户端或服务器，或者我这样做的方式是否正确？

这是相关的服务器代码...

```
 ...
    //JMP_:sListen and sConnect are both = socket(AF_INET, SOCK_STREAM,NULL);

    if(sConnect = accept(sListen, (SOCKADDR*)&addr, &addrlen)){
        cout << "A connection was found" << endl;
        send(sConnect,"You have connected!", 20, NULL);
    }
    ... 
```

这是我为服务器响应声明 char 数组的一段代码......

```
 ...
    // includes up here

    char serverresponse[255];

    // WinMain down here
    ... 
```

以及从服务器接收消息的代码......

```
 ...
    //JMP_: this is in the WinMain function.

    connect(sConnect, (SOCKADDR*)&addr, sizeof(addr));
recv(sConnect, serverresponse, sizeof(serverresponse), NULL);
getchar();
    ... 
```

最后一段代码是我将服务器响应放入文本框中的地方......

```
 ...
    // JMP_: this is in WndProc

    case WM_CREATE:
        {
         // Create an edit box
        hwndEdit = CreateWindowEx(0, _T("EDIT"),
            NULL,
            WS_CHILD|WS_VISIBLE|WS_VSCROLL |
            ES_LEFT | ES_MULTILINE|ES_AUTOVSCROLL,
            50, 100, 200, 100,
            hWnd,
            (HMENU) ID_EDITCHILD,
            (HINSTANCE) GetWindowLong(hWnd, GWL_HINSTANCE),NULL);

        //JMP_: I just pulled this indented bit from MSDN
            // Convert to a wchar_t*  
            size_t origsize = strlen(serverresponse) + 1;
            const size_t newsize = 100;
            size_t convertedChars = 0;
            wchar_t wcstring[newsize];
            mbstowcs_s(&convertedChars, wcstring, origsize, serverresponse, _TRUNCATE);
        //

        // Add text to the window. 
        SendMessage(hwndEdit, WM_SETTEXT, 0,  (LPARAM) wcstring);

        return 0;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T21:41:49.490

您必须将服务器响应转换为 wchar_t 的原因是因为您将客户端代码构建为 Unicode 构建，并且随后对预期任何来自 car* 或 wchar* 的窗口进行的所有 api 调用都是 #ifdef'd在 unicode 上，常规名称被预处理器替换，名称以 W（对于 unicode）或 A（对于非 Unicode）结尾。正如 Mats Peterson 指出的那样。因此，当您将数据从对 recv 的调用中填充到 char* 数组中时，您必须将其转换为 wchar_t 以将其显示在文本框或任何其他 Windows UI 控件中。在 unicode 项目中使用窄字符 api 是“可以的”（因为 windows 只会在幕后为您将其转换为 Unicode），但如果连续快速完成可能会导致一些潜在的性能问题。

# javascript - 子元素的边距

> ID：14110488
> 
> 赞同：0
> 
> 时间：2013-01-01T12:32:24.520
> 
> 标签：javascript, css

> **可能重复：**
> [子元素的边距移动父元素](https://stackoverflow.com/questions/1762539/margin-on-child-element-moves-parent-element)

我有一个包含子 div 的父 div。`Parent`是正文中的第一个元素，没有特定的 CSS 样式。当我设置

```
.child {
   margin-top: 10px;
} 
```

最终结果是 top of`child`仍然与`parent`. 我的父母没有向下移动 10 像素，而是`child`向下移动了 10 像素。

我发现添加填充`parent`可以工作，但我读过这不是解决问题的方法。为什么？如果我愿意，`margin-right`我可以做`padding-right`on `parent`，同样，如果我愿意，`margin-top`我也可以做`padding-top`并得到正确的结果。

在[子元素的边距移动父元素](https://stackoverflow.com/questions/1762539/margin-on-child-element-moves-parent-element#comment7469551_1762575)有人说：

> 如果您想要最高利润怎么办...？不是真正的解决方案。如果需要上边距，这并不是真正的解决方案。

他想说什么？请解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:40:17.983

来自Mozilla 开发者网络上的[CSS Margin Collapsing ：](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing)

> **父母和第一个/最后一个孩子**
> 
> 如果没有边框、内边距、内联内容或间隙来将块的 margin-top 与其第一个子块的 margin-top [...] 分开，那么这些边距就会崩溃。折叠的边距最终在父级之外。

# ios - 使用*标准*定位服务的后台 iOS 应用程序是否会在设备重新启动时重新启动？

> ID：14110500
> 
> 赞同：2
> 
> 时间：2013-01-01T12:33:28.260
> 
> 标签：ios, background, geolocation, launch

我有一个使用标准位置（而不是重大变化）服务的 iPhone 应用程序。我知道电池等问题，但我们需要持续的准确性。

它通常工作正常。我们在 plist 文件等中设置了位置背景模式。

但是，当设备重新启动时，该应用程序似乎没有重新启动。

环顾四周，我看到奇怪的评论表明，虽然注册*重要更新*的应用程序将在重新启动时重新启动（当收到更新时），但使用*标准*位置服务的应用程序可能不会。

但是，我找不到任何明确说明这一点的 Apple 文档（甚至找不到明确的、当前的第三方声明）。有人对此有明确的答案吗？

如果*标准*位置更新在重新启动后没有重新启动应用程序，是否有解决方法 - 例如使用符号更新来引导标准更新？有人有例子吗？

我看到有人建议您可以注册 VoIP，但我不想这样做，因为它不使用这些服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:53:20.220

注册重要位置更新的应用程序*不会*在系统重新启动时重新启动。*但是*，如果新的位置更新通过并且系统之前已终止它们，它们会重新启动。这实际上意味着如果您的应用程序在后台运行并被系统终止（以节省内存等），它将在后台重新启动。

引用 Apple 的文档：

这与VOIP 密钥*不同，后者**确实*会导致应用程序在系统重新启动后重新启动。`UIBackgroundMode`

 *这记录在 Apple 的 App Programming Guide 中的“Background Execution”部分（[此处链接](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)）。这是一个相当冗长的文档，所以这里有两个你想要的：

> 在 UIBackgroundModes 键中包含 voip 值可以让系统知道它应该允许应用程序根据需要在后台运行以管理其网络套接字。具有此密钥的应用程序也会在系统启动后立即在后台重新启动，以确保 VoIP 服务始终可用。

对于位置：

> [UIBackgroundMode 位置键] 不会阻止系统挂起应用程序，但它确实告诉系统它应该在有新的位置数据交付时唤醒应用程序*

# java - 我的文本阅读器程序不打印任何内容

> ID：14110504
> 
> 赞同：0
> 
> 时间：2013-01-01T12:33:45.797
> 
> 标签：java, text, io

我做了一个非常简单的文本阅读器只是为了测试机制，但它什么也没返回，我一无所知！我在 Java 方面不是很有经验，所以这可能是一个非常简单和愚蠢的错误！这是代码：

第一类

```
import java.io.IOException;

public class display {

public static void main(String[] args)throws IOException {

    String path = "C:/Test.txt";
    try{
    read ro = new read(path);
    String[] fileData = ro.reader();
    for(int i = 0; i<fileData.length;i++){
        System.out.println(fileData[i]);
    }
    }catch(IOException e){
        System.out.println("The file specified could not be found!");
    }
        System.exit(0);
}

} 
```

2 级

```
import java.io.IOException;
import java.io.FileReader;
import java.io.BufferedReader;

public class read {

private String path;

public read(String file_path){
    path = file_path;
}

public String[] reader() throws IOException{
    FileReader fR = new FileReader(path);
    BufferedReader bR = new BufferedReader(fR);

    int nOL = nOLReader();
    String[] textData = new String[nOL];
    for(int i = 0; i < nOL; i++){
        textData[i] = bR.readLine();
    }
    bR.close();
    return textData;

}

int nOLReader()throws IOException{
    FileReader fR = new FileReader(path);
    BufferedReader bR = new BufferedReader(fR);
    String cLine = bR.readLine();
    int nOL = 0;
    while(cLine != null){
        nOL++;
    }
    bR.close();

    return nOL;

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:42:43.700

哇。只是为了读取文件，您确实需要做**很多工作。**假设 yourelaly 想坚持你的代码，我会指出：

在第 2 课中，

```
String cLine = bR.readLine();
int nOL = 0;
while(cLine != null) {
    nOL++;
} 
```

会陷入无限循环，因为您永远不会阅读另一行，只是第一次。所以让它像这样：

```
String cLine = bR.readLine();
int nOL = 0;
while(cLine != null) {
    nOL++;
    cLine = bR.readLine();
} 
```

PS 阅读一些简单的教程来了解 Java 中的 I/O。[这是您工作](http://www.roseindia.net/java/beginners/FileRead.java)的一些代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:41:59.403

您只从文件中读取一行，然后在永远循环中检查读取值（永远不会读取下一行，因此您永远不会在 cLine 中获得 null，因此循环永远不会结束）。将您的方法 nOLReader 更改为此（我在循环中添加了 cLine = bR.readLine(); ），它将起作用：

```
int nOLReader() throws IOException {
    FileReader fR = new FileReader(path);
    BufferedReader bR = new BufferedReader(fR);
    String cLine = bR.readLine();
    int nOL = 0;
    while (cLine != null) {
        nOL++;
        cLine = bR.readLine();
    }
    bR.close();
    return nOL; 
```

}

# javascript - 为什么 HTML 5 Audio 会忽略移动设备的音频设置，例如静音或音量？

> ID：14110508
> 
> 赞同：10
> 
> 时间：2013-01-01T12:34:20.303
> 
> 标签：javascript, mobile, html5-audio

我有一个针对移动 android 用户的网站。我正在使用 HTML5 音频播放背景音乐。

即使设备处于静音状态，也会播放音频；无论设备音量设置如何，音频都会以最高音量播放。

有谁知道为什么会发生这些事情或如何获取设备当前的音频设置？我更喜欢客户端（javascript）解决方案，但我对所有解决方案持开放态度。

感谢您的帮助 Moshe S。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T12:57:16.370

在 Android 中，即使手机处于静音状态，媒体音量也不会改变。

我不确定android是否允许通过浏览器修改系统声音设置，因为默认的没有更改/读取音量状态的权限。

# c# - 缺少 winmd 的实现

> ID：14110511
> 
> 赞同：0
> 
> 时间：2013-01-01T12:34:43.597
> 
> 标签：c#, windows-phone-8

试图将 BouncyCastle c# dll 添加到我的 WP8 本机应用程序中。

*   我为 Windows Phone 8 创建了一个 Windows 运行时组件
*   我扭曲组件中现有的 C# dll 并创建 MyBouncyCastleComponent.winmd
*   我打开我的 WP8 本机项目，并将 winmd 添加为参考

结果： *在编译时* **“警告：没有为 .winmd 文件提供实现文件”**

*在运行时*它崩溃，当我停止模拟器时，我得到**“WinRT 信息：未注册的类”**（它比这长得多，抱怨 Windows.winmd 和 System.Windows.RuntimeHost.ni.dll 等窗口文件中缺少 PDB 文件）

我用ILDASM打开了winmd。解密和加密的实现有吗？我究竟做错了什么？

![MyBouncyCastleComponent.winmd 用 ildasm 打开](../Images/0a5a9aa61b82834b84223742befa89c2.png)

我知道它被问过[没有为 .winmd 文件提供实现文件，](https://stackoverflow.com/questions/13895517/no-implementation-file-was-provicded-for-the-winmd-file)但还没有答案。我再次尝试...（无法弄清楚如何将其添加为问题）

**编辑：**

只是一个澄清。当我说：“*我在组件中扭曲现有的 C# dll 并创建 MyBouncyCastleComponent.winmd* ”
时，我所做的是将 BouncyCastle**源**代码放入运行时组件中，并带有一个包装器类，以公开我需要的 BouncyCastle 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:54:19.767

看起来您非常想尝试获得一个为完整的 .NET 框架编译的 C# DLL，以便在 Windows Phone 上工作。Windows Phone 使用不同的 .NET 配置文件，并且与完整的 .NET 框架不二进制兼容，因此这不起作用。

对于 BouncyCastle，您将需要引用专门为 Windows Phone 构建的二进制 DLL - 例如通过自己从 BouncyCastle 源代码构建一个。

更新：当您使用 BouncyCastle 的子集时，您可以将所需的源代码放入可移植类库项目中，以便可以直接在 Windows Phone 和 Windows Store 应用程序中使用。

# android - 带有反弹插值器的 Android 缩放动画

> ID：14110512
> 
> 赞同：42
> 
> 时间：2013-01-01T12:34:57.900
> 
> 标签：android, android-animation

我正在做一个比例动画，`anim xml`如下所示。动画插值器不工作。我正在尝试使用反弹插值器但不工作。

```
 <?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android" >

    <scale
        android:duration="900"
        android:fromXScale="1"
        android:fromYScale="0.5"
        android:interpolator="@android:anim/bounce_interpolator"
        android:pivotX="50%"
        android:pivotY="0%"
        android:toXScale="1.0"
        android:toYScale="1.0" />
     </set> 
```

编辑：实际上我的整个 xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

<scale
    android:duration="600"
    android:fromXScale="1"
    android:fromYScale="0.5"
    android:interpolator="@android:anim/bounce_interpolator"
    android:pivotX="50%"
    android:pivotY="0%"
    android:toXScale="1.0"
    android:toYScale="1.0" />

<alpha
    android:duration="@android:integer/config_longAnimTime"
    android:fromAlpha="0.0"
    android:interpolator="@android:anim/decelerate_interpolator"
    android:toAlpha="1.0" />

</set> 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-01-02T05:15:43.930

终于得到了解决方案。它对我有用，可能对其他人有帮助。关键是将 android:interpolator 标签放入动画集中。

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/bounce_interpolator" >

<scale
    android:duration="600"
    android:fromXScale="1"
    android:fromYScale="0.5"
    android:pivotX="50%"
    android:pivotY="0%"
    android:toXScale="1.0"
    android:toYScale="1.0" />

<alpha
    android:duration="600"
    android:fromAlpha="0.0"
    android:toAlpha="1.0" />

</set> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-01-28T08:44:09.133

如果您想在动画集中为动画使用不同的插值器，请将`shareInterpolator`属性设置为 false，如下所示：

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:shareInterpolator="false"> 
```

然后在每个动画元素中设置一个插值器。显然，`shareInterpolator`默认情况下设置为true。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T12:55:09.857

尝试添加持续时间：

```
<set xmlns:android="http://schemas.android.com/apk/res/android" >

<scale 
  android:fromXScale="1"
  android:fromYScale="0.5"
  android:interpolator="@android:anim/bounce_interpolator"
  android:pivotX="50%"
  android:pivotY="0%"
  android:toXScale="1.0"
  android:toYScale="1.0"
  android:duration="1000" />
</set> 
```

请注意，如果动画集仅包含一个动画，则它是无用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-29T05:58:11.443

Bounce is just an animation effect where animation ends in bouncing fashion. For this set android:interpolator value to @android:anim/bounce_interpolator. This bounce can be used with any kind animation. Following slide down example uses bounce effect.

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
android:fillAfter="true"
android:interpolator="@android:anim/bounce_interpolator">

<scale
    android:duration="500"
    android:fromXScale="1.0"
    android:fromYScale="0.0"
    android:toXScale="1.0"
    android:toYScale="1.0" /> 
```

# asynchronous - 从 F# 异步工作流中删除命令式代码

> ID：14110518
> 
> 赞同：6
> 
> 时间：2013-01-01T12:35:57.720
> 
> 标签：asynchronous, f#

我正在为 Logitech Media Server（以前称为 Squeezebox Server）编写一个控制应用程序。

其中一小部分是发现哪些服务器正在本地网络上运行。这是通过向端口 3483 广播一个特殊的 UDP 包并等待回复来完成的。如果在给定时间后没有服务器回复（或首选服务器回复），则应用程序应停止侦听。

我让它在 C# 中工作，使用 C# 5 的 async/await 功能，但我很想知道它在 F# 中的样子。我有以下功能（或多或少直接从 C# 翻译）：

```
let broadCast (timeout:TimeSpan) onServerDiscovered = async {
  use udp = new UdpClient ( EnableBroadcast = true )
  let endPoint = new IPEndPoint(IPAddress.Broadcast, 3483)
  let! _ = udp.SendAsync(discoveryPacket, discoveryPacket.Length, endPoint) 
           |> Async.AwaitTask

  let timeoutTask = Task.Delay(timeout)
  let finished = ref false
  while not !finished do
    let recvTask = udp.ReceiveAsync()
    let! _ = Task.WhenAny(timeoutTask, recvTask) |> Async.AwaitTask
    finished := if not recvTask.IsCompleted then true
                else let udpResult = recvTask.Result
                     let hostName = udpResult.RemoteEndPoint.Address.ToString()
                     let serverName = udpResult.Buffer |> getServerName 
                     onServerDiscovered serverName hostName 9090
  } 
```

这`discoveryPacket`是一个包含要广播的数据的字节数组。`getServerName`是在别处定义的函数，它从服务器回复数据中提取人类可读的服务器名称。

因此，应用程序`broadCast`使用两个参数调用，一个超时和一个回调函数，当服务器回复时将调用该函数。然后，此回调函数可以通过返回 true 或 false 来决定是否结束侦听。如果没有服务器回复，或者没有回调返回 true，则函数在超时到期后返回。

这段代码工作得很好，但我对使用命令式 ref cell 隐约感到困扰`finished`。

那么问题来了：有没有一种惯用的 F#-y 方式来做这种事情而不转向必要的黑暗面？

**更新**

根据下面接受的答案（几乎是正确的），这是我最终得到的完整测试程序：

```
open System
open System.Linq
open System.Text
open System.Net
open System.Net.Sockets
open System.Threading.Tasks

let discoveryPacket = 
    [| byte 'd'; 0uy; 2uy; 23uy; 0uy; 0uy; 0uy; 0uy; 
       0uy; 0uy; 0uy; 0uy; 0uy; 1uy; 2uy; 3uy; 4uy; 5uy |]

let getUTF8String data start length =
    Encoding.UTF8.GetString(data, start, length)

let getServerName data =
    data |> Seq.skip 1 
         |> Seq.takeWhile ((<) 0uy)
         |> Seq.length
         |> getUTF8String data 1

let broadCast (timeout : TimeSpan) onServerDiscovered = async {
    use udp = new UdpClient (EnableBroadcast = true)
    let endPoint = IPEndPoint (IPAddress.Broadcast, 3483)
    do! udp.SendAsync (discoveryPacket, Array.length discoveryPacket, endPoint) 
        |> Async.AwaitTask
        |> Async.Ignore

    let timeoutTask = Task.Delay timeout

    let rec loop () = async {
        let recvTask = udp.ReceiveAsync()

        do! Task.WhenAny(timeoutTask, recvTask)
            |> Async.AwaitTask
            |> Async.Ignore

        if recvTask.IsCompleted then
            let udpResult = recvTask.Result
            let hostName = udpResult.RemoteEndPoint.Address.ToString()
            let serverName = getServerName udpResult.Buffer
            if onServerDiscovered serverName hostName 9090 then
                return ()      // bailout signalled from callback
            else
                return! loop() // we should keep listening
    }

    return! loop()
    }

[<EntryPoint>]
let main argv = 
    let serverDiscovered serverName hostName hostPort  = 
        printfn "%s @ %s : %d" serverName hostName hostPort
        false

    let timeout = TimeSpan.FromSeconds(5.0)
    broadCast timeout serverDiscovered |> Async.RunSynchronously
    printfn "Done listening"
    0 // return an integer exit code 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T15:20:48.637

您可以使用递归函数实现此“功能性”，该函数还产生 Async<'T> 值（在本例中为 Async）。这段代码应该可以工作——它基于你提供的代码——尽管我无法测试它，因为它取决于你代码的其他部分。

```
open System
open System.Net
open System.Net.Sockets
open System.Threading.Tasks
open Microsoft.FSharp.Control

let broadCast (timeout : TimeSpan) onServerDiscovered = async {
    use udp = new UdpClient (EnableBroadcast = true)
    let endPoint = IPEndPoint (IPAddress.Broadcast, 3483)
    do! udp.SendAsync (discoveryPacket, Array.length discoveryPacket, endPoint) 
        |> Async.AwaitTask
        |> Async.Ignore

    let rec loop () =
      async {
      let timeoutTask = Task.Delay timeout
      let recvTask = udp.ReceiveAsync ()

      do! Task.WhenAny (timeoutTask, recvTask)
            |> Async.AwaitTask
            |> Async.Ignore

      if recvTask.IsCompleted then
          let udpResult = recvTask.Result
          let hostName = udpResult.RemoteEndPoint.Address.ToString()
          let serverName = getServerName udpResult.Buffer
          onServerDiscovered serverName hostName 9090
          return! loop ()
      }

    return! loop ()
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T01:54:35.863

我会清理异步调用并使用异步超时，更像这样：

```
open System.Net

let discoveryPacket = 
  [|'d'B; 0uy; 2uy; 23uy; 0uy; 0uy; 0uy; 0uy; 
     0uy; 0uy; 0uy; 0uy; 0uy; 1uy; 2uy; 3uy; 4uy; 5uy|]

let getUTF8String data start length =
  System.Text.Encoding.UTF8.GetString(data, start, length)

let getServerName data =
  data
  |> Seq.skip 1 
  |> Seq.takeWhile ((<) 0uy)
  |> Seq.length
  |> getUTF8String data 1

type Sockets.UdpClient with
  member client.AsyncSend(bytes, length, ep) =
    let beginSend(f, o) = client.BeginSend(bytes, length, ep, f, o)
    Async.FromBeginEnd(beginSend, client.EndSend)

  member client.AsyncReceive() =
    async { let ep = ref null
            let endRecv res =
              client.EndReceive(res, ep)
            let! bytes = Async.FromBeginEnd(client.BeginReceive, endRecv)
            return bytes, !ep }

let broadCast onServerDiscovered =
  async { use udp = new Sockets.UdpClient (EnableBroadcast = true)
          let endPoint = IPEndPoint (IPAddress.Broadcast, 3483)
          let! _ = udp.AsyncSend(discoveryPacket, discoveryPacket.Length, endPoint)
          while true do
            let! bytes, ep = udp.AsyncReceive()
            let hostName = ep.Address.ToString()
            let serverName = getServerName bytes
            onServerDiscovered serverName hostName 9090 }

do
  let serverDiscovered serverName hostName hostPort  =
    printfn "%s @ %s : %d" serverName hostName hostPort

  let timeout = 5000
  try
    Async.RunSynchronously(broadCast serverDiscovered, timeout)
  with _ -> ()
  printfn "Done listening" 
```

我还将用`serverDiscovered`不同的架构替换您基于副作用的功能，例如收集 5 秒回复的异步代理。

# sql-server-2008 - 如何使用 ROW_NUMBER() 在视图上设置主键？

> ID：14110527
> 
> 赞同：5
> 
> 时间：2013-01-01T12:37:12.727
> 
> 标签：sql-server-2008, entity-framework, primary-key

我将 SQL Server 2008 和实体框架用于我正在开发的应用程序。

我已经在 SQL Server 中的所有表上设置了主键，因为 EF 需要它，但是我对一个视图有问题。由于它没有主键，我使用 ROW_NUMBER() 函数来获取唯一的行标识符。我希望该列被定义为 NOT NULL，因此我可以将其用作 EF 中的主键，但相反，该列可以为空。

这是我的看法：

```
CREATE VIEW [dbo].[vw_Action]
AS

SELECT *, ROW_NUMBER() OVER(ORDER BY ActionDate DESC) AS RowID 
FROM
(
   SELECT User1ID AS UserID, NULL AS FriendID, Object1ID, Object2ID, ActionType,    ActionDate
   FROM vw_ActionBase
   WHERE ActionType = 1
   GROUP BY User1ID, Object1ID, Object2ID, ActionType, ActionDate 

   UNION

   SELECT User1ID AS UserID, NULL AS FriendID, Object1ID, Object2ID, ActionType,   ActionDate
   FROM vw_ActionBase
   WHERE ActionType = 2
   GROUP BY User1ID, Object1ID, Object2ID, ActionType, ActionDate 

   UNION

   SELECT User1ID AS UserID, NULL AS FriendID, Object1ID, Object2ID, ActionType, ActionDate
   FROM vw_ActionBase
   WHERE ActionType = 3 
   GROUP BY User1ID, Object1ID, Object2ID, ActionType, Object1ID, ActionDate 

   )x 
```

所以，我的问题是如何将 ROWID 列设置为 NOT NULL，所以我可以将它用作 EF 中的主键。

提前致谢！

# f# - 没有 for..in..do 的扩展计算表达式

> ID：14110532
> 
> 赞同：24
> 
> 时间：2013-01-01T12:37:52.577
> 
> 标签：f#, dsl, computation-expression, query-expressions

*我所说的扩展计算表达式是指具有通过[CustomOperation](http://msdn.microsoft.com/en-us/library/hh289709.aspx)属性定义的自定义关键字的计算表达式。*

在阅读[扩展计算表达式](http://files.meetup.com/2922732/Computation%20Expressions%20%28April%29.pdf)时，我遇到了@kvb 的非常酷的 IL DSL：

```
let il = ILBuilder()

// will return 42 when called
// val fortyTwoFn : (unit -> int)
let fortyTwoFn = 
    il {
        ldc_i4 6
        ldc_i4_0
        ldc_i4 7
        add
        mul
        ret
    } 
```

我想知道在不使用`for..in..do`构造的情况下如何组成操作。我的直觉是它从`x.Zero`成员开始，但我没有找到任何参考来验证这一点。

如果上面的例子技术性太强，这里有一个类似的 DSL，其中幻灯片的组件没有列出`for..in..do`：

```
page {
      title "Happy New Year F# community"
      item "May F# continue to shine as it did in 2012"
      code @"…"
      button (…)
} |> SlideShow.show 
```

我有几个密切相关的问题：

*   *如何定义或使用没有`For`成员的扩展计算表达式（即提供一个小的完整示例）？*如果它们不再是 monad，我不会太担心，我对它们开发 DSL 很感兴趣。
*   *我们可以使用`let!`和的扩展计算表达式`return!`吗？如果是，有什么理由不这样做吗？*我问这些问题是因为我没有遇到任何使用`let!`and的例子`return!`。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T22:13:38.567

很高兴您喜欢 IL 示例。了解表达式如何脱糖的最佳方法可能是查看[规范](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc335818835)（尽管它有点密集......）。

在那里我们可以看到类似的东西

```
C {
    op1
    op2
} 
```

脱糖如下：

```
T([<CustomOperator>]op1; [<CustomOperator>]op2, [], fun v -> v, true) ⇒
CL([<CustomOperator>]op1; [<CustomOperator>]op2, [], C.Yield(), false) ⇒
CL([<CustomOperator>]op2, [], 〚 [<CustomOperator>]op1, C.Yield() |][], false) ⇒
CL([<CustomOperator>]op2, [], C.Op1(C.Yield()), false) ⇒
〚 [<CustomOperator>]op2, C.Op1(C.Yield()) 〛[] ⇒
C.Op2(C.Op1(C.Yield())) 
```

至于为什么`Yield()`使用而不是`Zero`，这是因为如果范围内有变量（例如，因为您使用了 some `lets`，或者在 for 循环中等），那么您会得到`Yield (v1,v2,...)`但`Zero`显然不能这样使用。请注意，这意味着`let x = 1`在 Tomas 的`lr`示例中添加多余的内容将无法编译，因为`Yield`将使用类型参数`int`而不是`unit`.

还有另一个技巧可以帮助理解计算表达式的编译形式，即 (ab) 使用 F# 3 中计算表达式的自动引用支持。只需定义一个无操作`Quote`成员并`Run`返回其参数：

```
member __.Quote() = ()
member __.Run(q) = q 
```

现在您的计算表达式将评估为其脱糖形式的报价。这在调试时非常方便。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-01T15:53:37.830

*我不得不承认，当您使用属性等查询表达式*功能时，我并不完全理解计算表达式的工作原理`CustomOperation`。但这里有一些来自我的一些实验的评论，可能会有所帮助......

首先，我认为不可能将标准计算表达式功能（`return!`等）与自定义操作自由组合。某些组合显然是允许的，但不是全部。例如，如果我定义了自定义操作`left`，`return!`然后我只能使用*之前* `return!`的自定义操作：

```
// Does not compile              // Compiles and works
moves { return! lr               moves { left 
        left }                           return! lr } 
```

至于只使用自定义操作的计算，最常见的自定义操作（`orderBy`和`reverse`这种）都有一个类型`M<'T> -> M<'T>`，其中`M<'T>`一些（可能是通用的）类型代表我们正在构建的东西（例如列表）。

例如，如果我们想构建一个表示左/右移动序列的值，我们可以使用以下`Commands`类型：

```
type Command = Left | Right 
type Commands = Commands of Command list 
```

自定义操作`left`和`right`然后可以转换`Commands`为`Commands`新步骤并将其附加到列表的末尾。就像是：

```
type MovesBuilder() =
  [<CustomOperation("left")>]
  member x.Left(Commands c) = Commands(c @ [Left])
  [<CustomOperation("right")>]
  member x.Right(Commands c) = Commands(c @ [Right]) 
```

请注意，这与`yield`仅返回单个操作（或命令）不同，因此如果您使用自定义操作，则`yield`需要组合多个单独的步骤，然后您永远不需要组合任何内容，因为自定义操作会逐渐将值构建为一个整体。它只需要一些在开始时使用的初始*空*值......`Combine``Commands` *`Commands`*

 *现在，我希望看到`Zero`那里，但它实际上`Yield`以 unit 作为参数调用，所以你需要：

```
member x.Yield( () ) = 
  Commands[] 
```

我不确定为什么会这样，但`Zero`经常被定义为`Yield ()`，所以也许目标是使用默认定义（但正如我所说，我也希望在`Zero`这里使用......）

我认为将自定义操作与计算表达式相结合是有意义的。虽然我对如何使用标准*计算表达式*有强烈的看法，但我对自定义操作的计算并没有任何好的直觉——我认为社区仍然需要弄清楚这一点:-)。但例如，您可以像这样扩展上述计算：

```
member x.Bind(Commands c1, f) = 
  let (Commands c2) = f () in Commands(c1 @ c2)
member x.For(c, f) = x.Bind(c, f)
member x.Return(a) = x.Yield(a) 
```

（在某些时候，翻译将开始需要`For`and `Return`，但在这里它们可以像`Bind`and一样定义`Yield`- 我不完全理解什么时候使用了哪个替代项）。

然后你可以写这样的东西：

```
let moves = MovesBuilder()

let lr = 
  moves { left
          right }    
let res =
  moves { left
          do! lr
          left 
          do! lr } 
```*

# java - Struts2 全局结果在结果类型链/图块上抛出 StackOverflowError

> ID：14110536
> 
> 赞同：-1
> 
> 时间：2013-01-01T12:38:54.773
> 
> 标签：java, jakarta-ee, struts2, java-ee-6, java-ee-5

下面是我在 struts.xml 中定义的拦截器和全局结果

```
 <package name="auth_basic" extends="struts-default,tiles-default">
<interceptors>
        <interceptor name="nlogin" class="interceptors.LoginInterceptor"/>
        <interceptor-stack name="loginStack">
            <interceptor-ref name="nlogin"/>
            <interceptor-ref name="defaultStack"/>
        </interceptor-stack>
    </interceptors>
    <default-interceptor-ref name="loginStack"/>
    <global-results>
        <result name="login" type="redirectAction">gotostart</result>
        <result name="input" type="redirectAction">gotostart</result>
    </global-results>
.
.
.
</package> 
```

上面的配置工作正常，但是当我使用结果`chain`而不是`redirectAction`它时，它会给出 java.lang.StackOverflowError

此外，当我使用`tiles`而不是链时，它也会抛出 java.lang.StackOverflowError

我不能在 global-results 中使用 action-chaining 吗？

下面是我的拦截器代码。另外，我想强调结果类型 redirectAction 工作正常，只有瓷砖和链会产生问题。

```
public String intercept(ActionInvocation ai) throws Exception {
    try {
        if (ai.getInvocationContext().getSession().get("user") == null) {
            System.out.println("Session Expired/Invalid");
            Object action = ai.getAction();
            if (action instanceof ValidationAware) {
                ((ValidationAware) action).addActionError("Unauthorized access. Please Login first");
            }
            return "login";
        }
        return ai.invoke();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return ai.invoke();
} 
```

`edited to include more code from struts.xml`

```
 <package name="default" extends="struts-default,tiles-default,json-default">
    <default-action-ref name="gotostart"/>
    <global-results>
        <result name="input" type="tiles">tiles-home</result>
    </global-results>
<action name="gotostart" class="actions.IndexAction" method="start">
        <result name="success" type="tiles">tiles-home</result>
        <result name="input" type="tiles">tiles-home</result>
    </action>
</package> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:44:34.387

好的，我知道了。

如果未登录，您将返回一个全局结果，`login`即`chain`结果类型，然后是对另一个操作的调用。

结果`login`类型位于包含`nLogin Interceptor`.

这意味着当您尝试链接`login`结果时，您会在 AGAIN 内部传递 AGAIN `nLogin Interceptor`，再次检查是否`user`为空，并`login`在无限循环中返回结果。

你可以：

返回一个 JSP 而不是链接到另一个 Action，如下所示：

```
<result name="login">myLogin.jsp</result> 
```

或将全局结果移到`login`自定义拦截器堆栈范围之外（例如，将其放在父包中的默认堆栈下），如下所示：

```
<struts>
   <package name="defaultPackage" extends="struts-default" >

      <default-interceptor-ref name="defaultStack"/>

      <global-results>
         <result name="login" type="chain">
            <param name="actionName">myLoginAction</param>
         </result>
      </global-results>

   </package>

   <package name="myLoginProtectedPackage" extends="defaultPackage">

      <interceptors>
         <interceptor name="nlogin" class="interceptors.LoginInterceptor"/>
         <interceptor-stack name="loginStack">
            <interceptor-ref name="nlogin"/>
            <interceptor-ref name="defaultStack"/>
         </interceptor-stack>
      </interceptors>

      <default-interceptor-ref name="loginStack"/>

      <global-results>
        <result name="input" type="chain">
            <param name="actionName">myLoginAction</param>
        </result>
      </global-results>    

      <action name="myLoginAction" class="...">
         <result>myLogin.jsp</result>             
      </action>

   </package>
</struts> 
```

不要问我为什么使用 redirectAction 有效......它应该是相同的，但可能是由于它们的不同行为。

请注意，[根据指南](http://struts.apache.org/2.3.4/docs/action-chaining.html)，

> 通常，不建议使用动作链。首先探索其他选项，例如 Redirect After Post 技术。

# php - PHP foreach 循环中的 Ajax POST

> ID：14110537
> 
> 赞同：1
> 
> 时间：2013-01-01T12:38:56.130
> 
> 标签：php, ajax, loops, foreach, .post

我正在使用 $.post 在 php foreach 循环内发布一些数据，例如变量、公司名称到控制器方法。在控制器中，我回显了一个使用传递的数据绘制的条形图。现在在 foreach 循环中，我动态生成了一个 id，该 id 将传递给某个 '' 元素，我需要绘制这个在该 div 内传回的条形图。我现在使用的代码发布在下面：

```
 <?php
        $id=0;
        foreach($customer_companies as $data) {
            $company_name=$data->CompanyName;
            echo '<tr>
                  <script>function show_graph()
            {
                $.post("'.$base.'reports/single_bargraph/'.$company_name.'",      {},function(result){
                       $("#'.$id.'").html(result);
                });
             }                                  
        </script> 
        <td class="tablecntntgry" id="'.$id.'" height="45"> 
            <script type="text/javascript"> show_graph();   </script>                            
        </td>
      </tr>';
?> 
```

假设，我已经实现了获取数据 $customer_companies 的分页，并且一次在页面中显示 3 个。现在我面临的问题是图表没有绘制在指定的 id 中。:( 有时，它会绘制在正确的 3 个 td 生成但有时 2/3 会绘制在同一个 td 重叠另一个:( 有人可以帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:43:41.883

1.  `$id`在您的样本中始终为零。
2.  你需要制作单独的功能`show_graph'.$i.'()`（老实说你根本不需要功能，把你放在`$.post`桌子后面）

* * *

**编辑：**您的脚本应如下所示：

```
<?php

echo "<table>";
foreach ($customer_companies as $id => $data) {    
    echo '<tr><td class="tablecntntgry" id="row' . $id . '" height="45"></td></tr>';
}
echo "</table>";

// NOTE i open <script> tag after </table> closing tag

echo '<script>';
foreach ($customer_companies as $id => $data) {
    $company_name = $data->CompanyName;
    echo '
    $.post("' . $base . 'reports/single_bargraph/' . $company_name . '", {},function(result){
        $("#row' . $id . '").html(result);
    });                                  
    ';
}
echo '</script>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:56:53.023

通常 AJAX 请求需要时间才能得到响应。但是当响应到达客户端机器时，您已经覆盖了该功能！

我建议您将脚本标记放在 PHP foreach 循环之前的某个位置，并更改函数以接受两个参数。

1.  公司名称
2.  结果 div ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T13:06:05.623

您真的需要在这里重新考虑您的方法，您正在滥用 javascript 的灵活性。您正在`showGraph()`多次定义该函数，那么您希望 javascript 触发哪个版本的方法？应该是第一个吧。将您的 js 与您的 php.ini 分开。

```
<?php
        $id=0;
        foreach($customer_companies as $data) {
            $company_name=$data->CompanyName;
            echo '<tr id="'.$data['CompanyName'].'" class="companies"></tr>';
?>

$(function(){
   $('.companies').each(function(){
      $.post("'.$base.'reports/single_bargraph/'.$company_name.'",      {},function(result){
                       $(this).append('<td class="tablecntntgry">'+result+'</td>');
                });
   });
}); 
```

# css - Internet Explorer 9 输入填充问题

> ID：14110540
> 
> 赞同：1
> 
> 时间：2013-01-01T12:39:38.023
> 
> 标签：css, internet-explorer-9

这是[我的网站](http://virtualmix.it/)；正如我所看到的，有一个`input[type=password]`with`width: 100%;`和`padding: 0 5px;`。它在所有主要浏览器中都能完美运行，但如果您尝试在 Internet Explorer 9 上打开该站点，输入填充会以一种奇怪的方式出现......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:50:43.227

通过使用[box-sizing](http://www.w3schools.com/cssref/css3_pr_box-sizing.asp) css 属性解决

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:44:40.057

您需要在页面顶部包含*文档类型声明（dtd）语句。*如果排除，IE 将默认为*quirks mode*。

```
 <!DOCTYPE html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T11:59:26.477

只需包含`box-sizing: border-box;`在样式中

# c# - 如何通过代码在 WinRT 中隐藏键盘

> ID：14110541
> 
> 赞同：1
> 
> 时间：2013-01-01T12:39:38.210
> 
> 标签：c#, xaml, windows-runtime, keyboard

在我的 winRT C# 应用程序中，我有一个文本框，当文本框被禁用时，可视键盘必须隐藏。但它没有按预期工作。

```
<Page
x:Class="App2.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:App2"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <TextBox HorizontalAlignment="Left" Margin="458,60,0,0" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Height="98" Width="389" KeyUp="TextBox_KeyUp_1"/>
</Grid> 
```

C＃

```
private void TextBox_KeyUp_1(object sender, KeyRoutedEventArgs e)
        {
            if (e.Key == Windows.System.VirtualKey.Enter)
                (sender as TextBox).IsEnabled = false;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:42:25.173

[这是一个示例代码，您可以对照您的代码进行检查](http://code.msdn.microsoft.com/windowsapps/Keyboard-Events-Sample-866ba41c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T10:53:03.207

尝试通过这个来关注另一个 UIElement：

```
 Descendents(MainFrame).OfType<Button>().FirstOrDefault().Focus(FocusState.Pointer);

    public static IEnumerable<DependencyObject> Descendents(DependencyObject root)
    {
        int count = VisualTreeHelper.GetChildrenCount(root);
        for (int i = 0; i < count; i++)
        {
            DependencyObject child = VisualTreeHelper.GetChild(root, i);
            yield return child;
            foreach (DependencyObject descendent in Descendents(child))
                yield return descendent;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T08:30:35.080

就我而言，我有一个带有几个 TextBox 字段的表单。在其中之一中，我不希望应用程序显示数字键盘。

为了防止这种情况，我指定了属性 IsReadOnly="True"。

我使用了 IsReadOnly 属性而不是 IsEnabled="False"，因为 IsEnabled 禁用了 Tapped 事件，并且当我们在控件之间切换时它不会停止。

```
<TextBox Name="tbx" Style="{StaticResource TextBoxDefaultStyle}" TabIndex="13" IsReadOnly="True" /> 
```

# excel - 是否可以找到每个 excel 行的最后一个元素距离？

> ID：14110544
> 
> 赞同：2
> 
> 时间：2013-01-01T12:40:27.447
> 
> 标签：excel, vbscript, ado, dao, adodb

考虑以下矩阵：

```
 Col1    Col2    Col3    Col4    Col5    Col6    Col7
R1   x       x                        x
R2           x                x              x
R3                                                    x
R4           x        x       x
R5                                    x 
```

现在使用 VBScript 或 ADO 是否可以找到每行最后一个元素的距离？***距离***距离的定义只不过是最后一个元素放置在给定矩阵中的单元格数。例如说 -

*   距离(R1)=5

*   Dist(R4)=4 同理

我尝试了以下方法：

```
Option Explicit

Dim ArrayListTaskDetails : Set ArrayListTaskDetails = CreateObject("System.Collections.ArrayList")
Dim i,colcount

i=2
Do while i < = objExcel1.Application.WorksheetFunction.CountA(ob.Rows(1))

colcount=objExcel1.Application.WorksheetFunction.CountA(ob.Rows(i))
ArrayListTaskDetails.Add(colcount)

i=i+1
Loop

ArrayListTaskDetails.Sort()
i=ArrayListTaskDetails.Count
MsgBox("HighestColumnNumner:" & ArrayListTaskDetails(i-1)) 
```

但它不起作用，因为无法处理空白之间的问题。

纳克斯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T13:07:12.470

给定一个到 .xls 的 ADODB 连接，一个

```
"SELECT * FROM [Sheet2$]" 
```

这表明

```
PID     T1      T2      T3      T4      T5
11      1       <Null>  1       1       <Null>
14      1       1       1       <Null>  1
21      <Null>  <Null>  1       <Null>  <Null>
88      1       1       1       <Null>  <Null>
99      1       <Null>  <Null>  <Null>  <Null>
100     <Null>  <Null>  <Null>  <Null>  <Null>
101     1       1       1       1       1 
```

嵌套的 IIF(IsNull(Col), [...], ColNum) 如

```
"SELECT PID, IIF(IsNull(T5),IIF(IsNull(T4),IIF(IsNull(T3),IIF(IsNull(T2),IIF(IsNull(T1),0,1),2),3),4),5) As RMCol FROM [Sheet2$]" 
```

将导致

```
PID     RMCol
11      4
14      5
21      3
88      3
99      1
100     0
101     5 
```

**试图解释：**

该`IIF(BoolExpression, TrueValue, FalseValue)`表达式的计算结果为`TrueValue`如果`BoolExpression`为真，`FalseValue`否则为；所以将另一个`IIF`放在 True 槽中`IsNull(Colx)`将连续测试列，直到非空列将触发`FalseValue`（列号）的返回。

是的：SQL 是一种工具来处理任意数量的行（一组固定/精心设计的列）；因此，如果您犯了将逻辑上不受限制的信息集放入列而不是（另一个）表的设计错误，那就是您付出的代价。

**更新：**

我犹豫要不要提出这个问题，因为从长远来看，所有的黑客和捷径都会失败——而且无论如何你都必须从一开始就有一个体面的设计，但是：

递归*函数*：

```
Function genIFF(n)
  If 1 = n Then
     genIFF = "IIF(IsNull(T1),0,1)"
  Else
     genIFF = "IIF(IsNull(T" & n & ")," & genIFF(n - 1) & "," & n & ")"
  End If
End Function 
```

将愉快地创造：

```
 Dim n
  For n = 1 To 5
      WScript.Echo n, genIFF(n)
  Next

1 IIF(IsNull(T1),0,1)
2 IIF(IsNull(T2),IIF(IsNull(T1),0,1),2)
3 IIF(IsNull(T3),IIF(IsNull(T2),IIF(IsNull(T1),0,1),2),3)
4 IIF(IsNull(T4),IIF(IsNull(T3),IIF(IsNull(T2),IIF(IsNull(T1),0,1),2),3),4)
5 IIF(IsNull(T5),IIF(IsNull(T4),IIF(IsNull(T3),IIF(IsNull(T2),IIF(IsNull(T1),0,1),2),3),4),5) 
```

甚至：

```
50 IIF(IsNull(T50),IIF(IsNull(T49),IIF(IsNull(T48),IIF(IsNull(T47),IIF(IsNull(T46),IIF(IsNull(T45),IIF(IsNull(
T44),IIF(IsNull(T43),IIF(IsNull(T42),IIF(IsNull(T41),IIF(IsNull(T40),IIF(IsNull(T39),IIF(IsNull(T38),IIF(IsNul
l(T37),IIF(IsNull(T36),IIF(IsNull(T35),IIF(IsNull(T34),IIF(IsNull(T33),IIF(IsNull(T32),IIF(IsNull(T31),IIF(IsN
ull(T30),IIF(IsNull(T29),IIF(IsNull(T28),IIF(IsNull(T27),IIF(IsNull(T26),IIF(IsNull(T25),IIF(IsNull(T24),IIF(I
sNull(T23),IIF(IsNull(T22),IIF(IsNull(T21),IIF(IsNull(T20),IIF(IsNull(T19),IIF(IsNull(T18),IIF(IsNull(T17),IIF
(IsNull(T16),IIF(IsNull(T15),IIF(IsNull(T14),IIF(IsNull(T13),IIF(IsNull(T12),IIF(IsNull(T11),IIF(IsNull(T10),I
IF(IsNull(T9),IIF(IsNull(T8),IIF(IsNull(T7),IIF(IsNull(T6),IIF(IsNull(T5),IIF(IsNull(T4),IIF(IsNull(T3),IIF(Is
Null(T2),IIF(IsNull(T1),0,1),2),3),4),5),6),7),8),9),10),11),12),13),14),15),16),17),18),19),20),21),22),23),2
4),25),26),27),28),29),30),31),32),33),34),35),36),37),38),39),40),41),42),43),44),45),46),47),48),49),50) 
```

对 n Excel 将在嵌套 IIF 上窒息的内容进行视觉校对和测试留作自虐狂的练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T14:24:26.303

另一种方式...在 VBSCRIPT 中使用公式

```
Dim oXLApp, oXLWb, oXLWs

Set oXLApp = CreateObject("Excel.Application")

'~~> Show Excel
oXLApp.Visible = True

'~~> Open files (Change as applicable)
Set oXLWb = oXLApp.Workbooks.Open("C:\MyFile.xlsx")
Set oXLWs = oXLWb.Sheets(1)

Dim lRow, i, tmp

With oXLWs
    lRow = .Range("A" & .Rows.Count).End(-4162).Row

    For i = 2 To lRow
        tmp = oXLApp.Evaluate("=ADDRESS(ROW(A" & i & "),MATCH(INDEX($" & i _
        & ":$" & i & ",MAX(IF($A" & i & ":$K" & i & "<>"""",COLUMN($A" & i _
        & ":$K" & i & ")))),A" & i & ":K" & i & "),1)")

        MsgBox .Range("A" & i).Value & " :- " & .Range(tmp).Column - 1
    Next
End With 
```

**截屏**

![在此处输入图像描述](../Images/4666f871a29bdf34f145a7b4b248ada4.png)

**跟进**

根据要求

```
Dim oXLApp, oXLWb, oXLWs

Set oXLApp = CreateObject("Excel.Application")

'~~> Hide Excel
oXLApp.Visible = True

'~~> Open files
Set oXLWb = oXLApp.Workbooks.Open("C:\MyFile.xlsx")
Set oXLWs = oXLWb.Sheets(1)

Dim lRow, i, tmp, MyArray, ColNo, ReturnName

With oXLWs
    lRow = .Range("A" & .Rows.Count).End(-4162).Row

    ColNo = .Columns.Count

    ReturnName = Split(.Cells(, ColNo).Address, "$", -1,1)(1)

    For i = 2 To lRow
        tmp = oXLApp.Evaluate("=ADDRESS(ROW(A" & i & "),MATCH(INDEX($" & i _
        & ":$" & i & ",MAX(IF($A" & i & ":$" & ReturnName & i & _
        "<>"""",COLUMN($A" & i & ":$" & ReturnName & i & ")))),A" & _
        i & ":" & ReturnName & i & "),1)")

        msgbox .Range("A" & i).Value & " :- " & .Range(tmp).Column - 1
    Next
End With 
```

**更多跟进**

```
Option Explicit

Dim oXLApp, oXLWb, oXLWs
Dim lRow, i, tmp, MyArray, ColNo, ReturnName

Set oXLApp = CreateObject("Excel.Application")

'~~> Hide Excel
oXLApp.Visible = True

'~~> Open files
Set oXLWb = oXLApp.Workbooks.Open("C:\MyFile.xlsx")

'~~> Set the Sheet 1 as sheet1
Set oXLWs = oXLWb.Sheets(1)

With oXLWs
    '~~> Get the last row in the worksheet
    lRow = .Cells.Find("*", .Range("A1"), -4123, 2, 1, 2).Row

    '~~> Get the total col count
    ColNo = .Columns.Count

    '~~> This will return the column name from column number
    ReturnName = Split(.Cells(, ColNo).Address, "$", -1, 1)(1)

    For i = 1 To lRow
        '~~> We are using the Evaluate to calculate the formula
        '~~> which will find our result
        tmp = oXLApp.Evaluate("=ADDRESS(ROW(A" & i & "),MATCH(INDEX($" & i _
        & ":$" & i & ",MAX(IF($A" & i & ":$" & ReturnName & i & _
        "<>"""",COLUMN($A" & i & ":$" & ReturnName & i & ")))),A" & _
        i & ":" & ReturnName & i & "),1)")

        '~~> This will return the column number
        MsgBox "Last Col in Row " & i & " is " & .Range(tmp).Column
    Next
End With 
```

# c++ - 乘以 2 个相同/不同矩阵的性能

> ID：14110545
> 
> 赞同：1
> 
> 时间：2013-01-01T12:40:44.457
> 
> 标签：c++, optimization, compiler-construction, hardware, compiler-optimization

我正在对科学应用程序进行一些性能测试，并尝试考虑所有可能影响应用程序性能的元素（如缓存大小层次结构 cpu 速度......缓存线以及任何可能与性能相关的因素）。这个问题出现在我的脑海中，虽然它可能很愚蠢，但我想让它对我很明显。

****问题：* ***

如果我不对，请纠正我。处理 int 和 float 或 double 值的成本在处理器上是不同的，这是因为使用 CPU 浮点单元（计算浮点值）。现在我想知道用相同的浮点数或双精度值填充两个二维矩阵并将它们相乘或用随机浮点数或双精度值填充它们然后相乘之间是否有区别。剂量编译器对所有元素都具有相同值的矩阵使用缓存？

总共处理处理浮点值，例如（**AB**），如果 A 和 B 的大小对处理时间（例如乘法）有影响，则 A 和 B 可以是数字大小不同的数字？如果有不同的剂量，重要的是要考虑还是不考虑？. 我可以使用性能计数器库来测量我的应用程序的性能，但是由于使用库的开销，您不能确定指令/触发器变化是针对随机值或其他参数，如 I/Dcache 未命中、缓存大小、问题大小或其他参数。

二手机器intel E4500。编译器 g++ 4.7。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T16:06:39.043

你是对的，整数和浮点算术成本是不同的，但并不像人们想象的那么大。这在很大程度上取决于用于计算的处理器单元。特别是对于 Intel 处理器，您可以在[http://www.intel.com/products/processor/manuals/](http://www.intel.com/products/processor/manuals/)上的“优化参考手册”中找到有用的信息。附录 C 列出了所有指令的指令延迟。

对于您的具体问题，如果矩阵乘法的计算时间取决于两个矩阵的条目是否包含相同或随机值，则答案为“否”。如果您在计算运行时查看指令的数量和顺序以及内存访问模式，在这两种情况下都是一样的。编译器通常也不能利用矩阵都由相同条目组成的事实，因为矩阵乘法需要涵盖所有可能的情况。（好吧，除非你把所有东西都打包——填充矩阵条目和乘法本身——在一个函数中并排除所有副作用，比如别名，那么一个非常非常聪明的编译器可能会从中做出一些事情，但我们不是在谈论那个， 对？）

此外，数字大小（我假设您指的是十进制数字）并不重要。在单精度浮点数的情况下（或在双精度情况下的 64 位），每个矩阵条目都由其**所有32 位表示。**

# c++ - 浮点/双精度的小范围随机数，适用于整数类型（C++，VS2010）

> ID：14110546
> 
> 赞同：1
> 
> 时间：2013-01-01T12:40:46.500
> 
> 标签：c++, visual-studio-2010, templates, random, numeric-limits

我正在尝试使用 VS2010 中的模板来创建基于类型的随机数。我正在使用下面的代码：

```
template<class BaseT>
struct distribution
{ // general case, assuming T is of integral type
    typedef std::tr1::uniform_int<BaseT> dist_type;
};

template<>
struct distribution<float>
{ // float case
    typedef std::tr1::uniform_real<float> dist_type;
};

template<>
struct distribution<double>
{ // double case
    typedef std::tr1::uniform_real_distribution<double> dist_type;
};

template<class BaseT>
class BaseTypeRandomizer
{
public:
    BaseTypeRandomizer() : mEngine(std::time(0))
    {
    }
    void CreateValues(std::vector<BaseT>& Values, size_t nValues)
    {
        typedef typename distribution<BaseT>::dist_type distro_type;
        std::random_device Engine;
        distro_type dist(std::numeric_limits<BaseT>::min(), std::numeric_limits<BaseT>::max());

        for (size_t iVal = 0; iVal < nValues; ++iVal)
        {
            Values[iVal] = dist(Engine);
        }
    }
}; 
```

`char`不幸的是，为/ `int`/等（整数类型）创建 BaseTypeRandomizer 的对象会`long`返回覆盖整个范围的数字，但对于浮点数和双精度数则不会。浮点数都在`1e+37`to之间`9e+38`，双打在`1e+307`to之间`2e+308`（或者至少都在那个附近）。检查`dist`VS 调试器中的对象显示限制是正确的，但`Values`向量填充的数字范围要小得多。

有谁知道为什么限制不能正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:40:20.373

您正在生成 和 之间的`numeric_limits<T>::min()`值`numeric_limits<T>::max()`。但`numeric_limits<T>::min()`可能不是您期望的那样：对于浮点类型，它是最小**正**归一化值，非常接近于零。所以你的代码只能得到正浮点数。对于`float`，这将是大约 3.4e38 的数字。这些数字中的绝大多数都超过 1e37，因此这些是您获得的大部分结果是有道理的。

要获得可能的有限值，您需要使用范围 from`numeric_limits<T>::lowest()`到`numeric_limits<T>::max()`。但这会导致未定义的行为，因为传递给的范围的大小`uniform_real_distribution`必须达到`numeric_limits<RealType>::max()`.

所以你需要以不同的方式生成数字。例如，您可以生成一个介于 0 和 之间的非负数`numeric_limits<T>::max()`，并分别生成其符号。

# batch-file - 批处理文件 - 使用多个 IF 来分隔

> ID：14110547
> 
> 赞同：0
> 
> 时间：2013-01-01T12:40:49.850
> 
> 标签：batch-file, batch-processing, cmd

我正在编写一个批处理脚本我正在寻找的是可以将多个铰链相互比较的东西

例如，如果有以下文件，我必须查看文件夹以检查所有文件

```
 abc.wxs
  verify.wxs
  start.wxs
  myname.wxs 
```

我想去

```
 makeadmin 
```

否则，如果有

```
 abc.wxs
  verify.wxs
  start.wxs
  myname.wxs
  verifyme.wxs
  abc.dll 
```

我写了一些类似的东西

```
IF EXIST "abc.wxs" (
IF EXIST "verify.wxs" (
IF EXIST "start.wxs" (
IF EXIST "myname.wxs" (
goto makeadmin
) else (
echo 1
 )
 ) else (
 echo 2
)
) else (
echo 3
)    
) else (
echo 4
) 
```

现在我如何整合第二部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:06:08.420

您可以使用“检查缓冲区”来执行此操作。我的意思是每个文件都会对 check 变量计数 +1。现在，如果总和与检查文件的数量匹配，它将执行特定的操作。看看下面：

```
@echo off
set sum=0

IF EXIST "abc.wxs" (
set /a sum=%sum%+1
)
IF EXIST "verify.wxs" (
set /a sum=%sum%+1
)
IF EXIST "start.wxs" (
set /a sum=%sum%+1
)
IF EXIST "myname.wxs" (
set /a sum=%sum%+1
)
IF EXIST "verifyme.wxs" (
set /a sum=%sum%+1
)
IF EXIST "abc.dll" (
set /a sum=%sum%+1
)

if sum==4 (
set sum=0
goto makeadmin
)
if sum==6 (
set sum=0
<insert whatever you want here>
)

pause 
```

一般来说，我发现使用带有数字的计数器非常有用。对我来说方便多了。我希望它有所帮助。

**PS**我在2个“if”的每种情况下都设置了sum = 0，因为我没有测试过这个（因为我现在在linux上）我担心如果你回到程序的开头，你'总和将超过数字 6。

**编辑**
通过使用 FOR 循环，可以缩短上述内容并使其更易于维护。此外，`set sum=0`在 IF 中也不需要。最后，变量不需要在 SET /A 中扩展。`set /a sum=sum+1`工作，一样`set /a sum+=1`

```
@echo off
set sum=0
for %%F in (
  abc.wxs
  verify.wxs
  start.wxs
  myname.wxs
  verifyme.wxs
  abc.dll
) do if exist %%F set /a sum+=1
if sum==4 goto makeadmin
if sum==6 REM do something else 
```

# python - 返回内容后处理数据 - GAE Python

> ID：14110550
> 
> 赞同：0
> 
> 时间：2013-01-01T12:41:52.853
> 
> 标签：python, google-app-engine, python-2.7

我想收集一些需要一些时间来处理的统计数据，但它不会影响正在返回的用户内容。我目前正在通过首先缓存，然后使用 cron 作业来处理它。

返回用户内容后，有什么方法可以立即完成这项工作？

它应该是这样的：

```
def post(self):
    self.response.out.write("some output")
    # here user should not wait any more output
    # loading should be end in user browser.

    collectSomeStatistics(self) 
```

（我使用的是 Python 2.7）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:53:23.023

您可以使用[延迟库](https://developers.google.com/appengine/articles/deferred)

```
from google.appengine.ext import deferred

def do_something_expensive(a, b, c=None):
  logging.info("Doing something expensive!")
  # Do your work here

# Somewhere else
deferred.defer(do_something_expensive, "Hello, world!", 42, c=True) 
```

所以你的代码变成：

```
def post(self):
  deferred.defer(collectSomeStatistics,args)
  self.response.out.write("some output") 
```

然后，这会将您的函数作为单独的任务执行，并且对 deferred 的调用立即返回。当然，您将无法在返回给用户的内容中包含该延迟函数的任何结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:01:16.250

Google App Engine 的 API 提供了一个[任务队列](https://developers.google.com/appengine/docs/python/taskqueue/)来处理这种情况。

```
from google.appengine.api import taskqueue

def post(self):
    taskqueue.add(queue_name='expensive_query', url="/path/to/_an_internal_method/")
    self.response.out.write("some output") 
```

# c++ - 使用 Qt 播放特定的系统声音

> ID：14110563
> 
> 赞同：3
> 
> 时间：2013-01-01T12:43:10.527
> 
> 标签：c++, windows, qt, audio, qt5

我希望我的应用程序发出标准的通知声音，在 Windows 上称为“默认哔声”。我没有看到用 QSound 引用系统声音的方法。没有分配声音的 QSound 实例用于播放此声音，但在 Qt 5 中已修复。有什么办法吗？

如果该解决方案仅适用于 Windows 也没关系（但我希望它在任何受支持的操作系统上编译并且不想使用`#ifdef`和 Win API）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:04:16.683

使用 Phonon ( [http://qt-project.org/doc/qt-4.8/phonon-overview.html](http://qt-project.org/doc/qt-4.8/phonon-overview.html) )，一个能够播放声音/视频的 Qt 库，...

对于文件的路径，你应该使用WINDOWS目录的环境变量，然后硬编码声音文件的路径末尾

**但是：**我认为这可能**不是**一个好主意，因为系统声音可以个性化......要获得个性化声音的PATH，您需要阅读Windows注册表......

**编辑：**您可以使用`QSettings`该类来读取 Windows 注册表例如：

```
QSettings settings("HKEY_CURRENT_USER\\AppEvents\\Schemes\Apps\\.Defaults\\..TODO..", QSettings::NativeFormat); 
```

# .net - 当前线程必须在 VB.NET 中设置为单线程单元

> ID：14110565
> 
> 赞同：5
> 
> 时间：2013-01-01T12:43:30.813
> 
> 标签：.net, vb.net

这是`new`我表单中的方法：

```
Public Sub New(ByVal ConnectionString As String, ByVal ConSql As SqlClient.SqlConnection, ByVal Daman As Array, ByVal SDate As Integer, ByVal FDate As Integer)

    Threading.Thread.CurrentThread.TrySetApartmentState(Threading.ApartmentState.STA)
    ' This call is required by the Windows Form Designer.
    'Error Appear in this line
    InitializeComponent()

    ' Add any initialization after the InitializeComponent() call.
    Me.Sto_TypeFormFrameTableAdapter.Connection.ConnectionString = ConnectionString
    Me.Sto_typeformTableAdapter.Connection.ConnectionString = ConnectionString
    con = ConSql
    com.Connection = con
    ConNew = ConnectionString
    DamaneCod = Daman
    Start = SDate
    Final = FDate
    Fill()
End Sub 
```

当我创建表单的新对象时，该`InitializeComponent`命令出错。

错误信息是：

> 在进行 OLE 调用之前，必须将当前线程设置为单线程单元 (STA) 模式。确保您的 Main 函数上标记了 STAThreadAttribute。

此表单在一个项目中，其输出是另一个项目的 DLL 文件，并且在使用此 DLL 文件的另一个项目中不会出现错误。我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T06:53:40.923

我已经使用了[这个站点](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/2411f889-8e30-4a6d-9e28-8a46e66c0fdb/)的以下代码并且它可以工作：

```
 using System.Threading;

    protected void Button1_Click(object sender, EventArgs e)
    {

       Thread newThread = new Thread(new ThreadStart(ThreadMethod));
       newThread.SetApartmentState(ApartmentState.STA);
       newThread.Start();     

    }

    static void ThreadMethod()
    {
       Write your code here;
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-01T15:01:17.007

不要忽略 TrySetApartmentState() 的返回值。如果您得到 False 则没有理由尝试继续，您的代码将无法正常工作。你不妨抛出一个异常。

```
If Not Threading.Thread.CurrentThread.TrySetApartmentState(Threading.ApartmentState.STA) Then
    Throw New InvalidOperationException("This form is only usable from the UI thread")
End If 
```

当您尝试从控制台模式应用程序或不是 Winforms 或 WPF 应用程序的主线程的线程中使用代码时，您将收到此异常。对于用户界面组件来说，这些环境并不好客。

需要一个线程在启动*之前*进入 STA单元，通过应用程序的 Main 方法上的 [STAThread] 属性或在启动线程之前调用 Thread.SetApartmentState()。并且必须调用 Application.Run() 或 Form.ShowDialog() 以获取保持表单功能所需的消息循环。通过查看调用堆栈来调试它，看看你的构造函数是如何被调用的。使用 Debug + Windows + Threads 有助于查看这是否发生在工作线程而不是应用程序的主线程上。

# iphone - 当前位置更新在 iphone 设备中不起作用

> ID：14110568
> 
> 赞同：2
> 
> 时间：2013-01-01T12:43:35.033
> 
> 标签：iphone, ios, currentlocation

处理需要每秒更新当前位置的应用程序。

为此，我正在使用`CoreLocation`框架。

我的代码就像

**AppDelegate.h**

```
@interface AppDelegate : UIResponder <UIApplicationDelegate, CLLocationManagerDelegate>
{

}
@property (nonatomic, retain) CLLocationManager *locationManager; 
```

**AppDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    self.locationManager.distanceFilter = kCLDistanceFilterNone;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [locationManager startUpdatingLocation];
    [locationManager startMonitoringSignificantLocationChanges];
    [locationManager retain];
} 
```

并实现它的委托方法

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
   CLLocation *locB = [[CLLocation alloc] initWithLatitude:newLocation.coordinate.latitude longitude:newLocation.coordinate.longitude];

    NSLog(@"New location is >>>>>> %@",locB);

}

-(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    NSLog(@">>>>>>>>>> error :%@", [error description]);

} 
```

我的问题是，当我将此代码运行到模拟器中时，它工作正常并且每秒更新一次位置，但是当我将它运行到设备中时，它只显示位置更新 3 或 4 次。

我需要这段代码在 iphone 4 和 iphone 5 中都可以使用。

我还没有找到任何解决方案。

实际上我需要计算距离或计算步数..为此我也可以加速度计，但它并没有给出完美的解决方案。

请帮忙...

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:36:43.220

我的印象是它不会一直更新位置，只会更新 3-5 次，以便提供一些替代方案，您可以使用这些替代方案来找到最好的。尝试使用 [locationManager startUpdatingLocation] 重新开始位置生成和 [locationManager stopUpdatingLocation]；在您的拆解代码中停下来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:18:54.453

您不能在后台运行应用程序。您必须将其注册为在后台运行的应用程序。请参阅此链接中的实现长时间运行的后台任务部分

[管理您的应用程序流程](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW3)

**更新：**

看到这个答案

[iPhone SDK：使用 GPS 跟踪用户位置](https://stackoverflow.com/questions/2866292/iphone-sdk-track-users-location-using-gps)

# c# - 确定另一个进程中的 UI 线程

> ID：14110569
> 
> 赞同：4
> 
> 时间：2013-01-01T12:43:35.247
> 
> 标签：c#, user-interface

是否可以在 C# 中确定由我的进程打开的另一个应用程序中的哪个线程是 UI 线程？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T13:21:00.193

@HansPassant 已经[在 MSDN 论坛上回答了这个问题](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/42de8f6a-61f4-495e-a69d-bd018e07c6f7)：

```
using System.Diagnostics;
...
public static ProcessThread GetUIThread(Process proc) {
  if (proc.MainWindowHandle == null) return null;
  int id = GetWindowThreadProcessId(proc.MainWindowHandle, IntPtr.Zero);
  foreach (ProcessThread pt in proc.Threads)
    if (pt.Id == id) return pt;
  return null;
}

[System.Runtime.InteropServices.DllImport("user32.dll")]
private static extern int GetWindowThreadProcessId(IntPtr hWnd, IntPtr procid); 
```

# android - 从模拟器命令中清除 myAndridApp 数据

> ID：14110571
> 
> 赞同：2
> 
> 时间：2013-01-01T12:43:57.857
> 
> 标签：android

是否有命令从模拟器中清除 myAndridApp 数据

我正在开发一个应用程序，我不想每次都去 mange-app -> myapp -> 清除数据

应用程序 API 10，模拟器 API：17

我不想卸载应用程序或停止它我需要清除其存储的数据

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T09:12:05.223

我找到了我的问题的答案

```
adb shell pm clear [packgeName] 
```

此命令将清除应用程序中的所有数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:46:49.333

您可以使用他的 pid 关闭一个

```
adb shell kill <PID> 
```

但我不确定是否使用包名。

但是要终止进程，您应该使用**am**：

```
am force-stop: force stop everything associated with <PACKAGE>.

am kill: Kill all processes associated with <PACKAGE>.  Only kills.
  processes that are safe to kill -- that is, will not impact the user
  experience. 
```

例如：

```
adb shell am force-stop <YOUR.PACKAGE.NAME> 
```

**或者**

```
am force-stop YOUR.PACKAGE.NAME 
```

**或者**

```
adb killall YOUR.PACKAGE.NAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T12:46:58.390

如果您只想清除应用程序数据，则使用 adb shell 进入应用程序数据文件夹并在每次要清除数据时执行 rm 命令：

例如，执行一次：

```
adb shell
cd /data/data/<package name>
rm -r * 
```

然后在同一命令行窗口中，每次您希望清除数据时触发此命令：

```
rm -r * 
```

# javascript - 使用 JavaScript 在 Windows 8 Metro 中读取 QR 码

> ID：14110578
> 
> 赞同：0
> 
> 时间：2013-01-01T12:45:27.043
> 
> 标签：javascript, windows-8, microsoft-metro, qr-code

我一直在尝试通过将图像本地存储在我的文件系统上来解码二维码。我正在尝试使用 HTML5/Javascript 创建一个 Windows 8 Metro 应用程序来执行此操作。我可以生成代码，但我在解码时遇到问题。

我确实参考了这些以前的线程

[有人知道 Windows 8 Metro 应用程序的 QR 码阅读器库吗？](https://stackoverflow.com/questions/11854270/does-anyone-know-of-a-qr-code-reader-library-for-a-windows-8-metro-app)

[Windows Store 应用中的二维码](https://stackoverflow.com/questions/13706385/qr-code-in-metro-app)

此后使用 esponce Web 服务并向[http://www.esponce.com/api/v3/decode?format=png](http://www.esponce.com/api/v3/decode?format=png)发出简单的 HTTP-POST 请求，正文中包含图像数据，但由于 404 响应为空错误，因此没有返回任何内容。这是我尝试相同的片段：

```
var picDiv = document.getElementById("picDiv");
var picturesLibrary = Windows.Storage.KnownFolders.picturesLibrary;

picturesLibrary.getFileAsync("code.bmp").then(
    function completeFile(file) {
    return file.openAsync(Windows.Storage.FileAccessMode.readWrite);
    xhrDiv.innerText = "File Opened";
}).then(
    function completeStream(stream) {
        // Do processing. 
            var blob = MSApp.createBlobFromRandomAccessStream("image/bmp", stream);
            xhrDiv1.innerText = stream;
     return WinJS.xhr({ type: "POST", url:"http://www.esponce.com/api/v3/decode>", data: blob });
}).then(
    function (request) {
        picDiv.textContent = "uploaded file";
        picDiv.innerText = request.statusText;
        picDiv.innerText = request.status;

      }, 
    function (request) {
        picDiv.textContent = "error uploading file";
        picDiv.innerText = request.statusText;
    //    picDiv.innerText = request.statusText;
      //  picDiv.innerText = request.status;

    }); 
```

请帮助我弄清楚上述方法有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:48:29.520

仅当 URL 不存在时才会出现错误 404，否则应该有不同的错误代码。可以通过查看响应 HTTP 标头**X-Api-Error**来诊断问题。

首先，从 URL 字符串中删除 ' **>** ' 字符并添加**格式**参数以防万一

```
return WinJS.xhr({ type: "POST", url:"http://www.esponce.com/api/v3/decode?format=png", data: blob }); 
```

然后，如果 BMP 不起作用，请尝试上传**PNG 图像**。Mime 类型应设置为**image/png**。

[或者，您可以尝试NuGet](https://www.nuget.org/packages/Esponce.QRCode)的 Esponce API 库

# .htaccess - htaccess | 将所有重定向到模板减去主目录

> ID：14110580
> 
> 赞同：1
> 
> 时间：2013-01-01T12:45:40.520
> 
> 标签：.htaccess, templates, mod-rewrite

我需要访问的所有地址都被重定向到模板文件中的目录（或包含）。例如：

```
/sports/basketball/ ==> /template_sport.php?idsport=$1
/sports/soccer/ ==> /template_sport.php?idsport=$1
/sports/tennis/ ==> /template_sport.php?idsport=$1 
```

但是，如果我们访问 /sports/（没有子目录）来加载该目录中的页面。

我已经完成了这个 ... 子目录并且运行良好，但是当我访问 /sports/ 时，我也尝试访问 /plantilla_deporte.php ....

```
RewriteCond %{REQUEST_URI} sports/(.*)
RewriteRule (.*) /template_sport.php?idsport=$1 
```

如果您直接到 /sports/ 找不到模板，我该如何添加例外？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:58:14.060

你可以试试这个：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/sports/([^/]+)
RewriteRule .* http://example.com/sports/template_sport.php?idsport=%1 [L] 
```

它将静默映射所有像这样的 URL：

`http://example.com/sports/basketball`

到：

`http://example.com/sports/template_sport.php?idsport=basketball`

当传入的 URL 只是：

`http://example.com/sports/`

# c++ - C++：一个宏似乎有点奇怪

> ID：14110582
> 
> 赞同：-3
> 
> 时间：2013-01-01T12:45:52.420
> 
> 标签：c++

我刚开始学习c++。原谅这样的问题。我的任务是编写一个宏来计算周长并测试它。

```
#define _USE_MATH_DEFINES
#include <cmath>

#define LENGTH(radius) (2 * M_PI * radius)

float l1 = LENGTH(1 + 2); // The result should be 18.8495... I have 8.28\. Incorrect result.
float l2 = 1 / LENGTH(2); // The result should be  0.07957... Working correctly. 
```

我添加了额外的括号：

```
float l1 = LENGTH((1 + 2)); // Correct result. 
```

如何在不添加额外括号的情况下编写这样的宏来获得正确的结果？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T12:46:49.700

利用：

```
#define LENGTH(radius) (2 * M_PI * (radius)) 
```

当你写

```
float l1 = LENGTH(1 + 2); 
```

使用您定义的预处理器将其转换为

```
float l1 = 2 * M_PI * 1 + 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T13:01:00.050

总是，总是，将宏参数包裹起来`()`——不管它看起来多么微不足道，你迟早会需要它。

当然，编写一个做同样事情的函数有几个好处： 1\. 你可以在调试器中单步执行它，这样你就可以真正弄清楚发生了什么。2\. 宏参数表达式没有奇怪之处。

为了解释第二点，假设我们有这个代码使用你的宏：

```
 // Print 10 lengths, 3, 5, 7, ... 
 int x = 3;
 for(i = 0; i < 10; i++)
 {
      printf("Length of radius %d is %5.2f\n", x, LENGTH(x += 2));
 } 
```

现在，有人参加了优化课程，并意识到 2* 某事比某事 + 某事更快，因此将您的宏重写为更快：

```
 #define LENGTH(radius) (((radius) + (radius)) * M_PI) 
```

现在，由于我们`x+=2`在`LENGTH`宏中，发生了奇怪的事情（它变成了未定义的行为，因为同一个变量在同一个语句中更新了两次[是的，我的意思是在两个序列点之间]。如果有一个`length`函数，它会完美地工作你会期待的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T17:07:45.360

**不要为此使用宏**——[内联函数](http://gcc.gnu.org/onlinedocs/gcc/Inline.html)*在各方面*都更好

 *但是发生的事情很容易理解，理解为什么最好避免使用宏很有用。

```
#define LENGTH(radius) (2 * M_PI * radius)

float l1 = LENGTH(1 + 2); 
```

宏只是简单的文本替换，因此上面的代码被替换为：

```
float l1 = (2 * M_PI * 1 + 2); 
```

这显然具有错误的运算符优先级。*

# jquery-ui - JQuery 修复菜单 div 显示和隐藏

> ID：14110583
> 
> 赞同：0
> 
> 时间：2013-01-01T12:46:02.603
> 
> 标签：jquery-ui, javascript-events, jquery

我在显示菜单的 div 容器时遇到了一些问题，当我查看激活 div 以进行显示的链接时，div 显示正常，但同时隐藏而不停留，它的想法是显示 div 并保持当我走出 div 这必须隐藏

基本问题是

1.  当我将鼠标放在显示菜单的链接上时，菜单会在第一时间完美显示，

2.  但是，如果我将鼠标放在菜单显示的 div -show until - 上，此菜单将一直隐藏并且不会保留

使用此脚本，我尝试显示`div`，当鼠标离开此脚本时`div`，将其隐藏

我的脚本是这样的：

```
function menu(id,width,color)
{

$(".men"+id).mouseover(function() {

$(".m"+id).css("width",""+width);
$(".m"+id).show("slide", { direction: "up" }, 500);
$(".m"+id).css("background-color",""+color);

});

$(".m"+id).mouseout(function() {

$(this).hide(500);

});

} 
```

CSS 样式：

```
#content_menu
{
margin-top:7px;
position:absolute;
min-height:50px;
height:auto;
border:1px solid;
text-align:left;
font-family:Arial;
font-size:12px;
z-index:2;
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
filter: alpha(opacity=80);
-moz-opacity:0.8;
-khtml-opacity: 0.8;
opacity: 0.8;
}

#content_menu_into
{
position:relative;
width:98%;
min-height:28px;
height:auto;
line-height:28px;
font-family:Arial;
font-size:14px;
color:#000000;
padding-left:2%;
text-align:left;
} 
```

对于调用脚本：

```
 <a href="#" onmouseover="javascript:menu('1','200','#000000');" class="men1">
   Home Web Menu
   </a>

    <div id="content_menu" class="m1" style="display:none;">
    <div id="content_menu_into">
    Home
    News
    Articles
    Users
    Vote
    </div>
    </div> 
```

谢谢帮忙，新年快乐！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:36:25.213

删除 min-height 样式，并尝试使用 javascript 来实现它的效果。

```
#content_menu
{
//min-height:50px;
} 
```

并用以下代码替换javascript

```
function menu(id,width,color)
{
$(".m"+id).css("width",width);
$(".m"+id).css("background-color",color);
$(".men"+id).mouseover(function() {

$(".m"+id).slideDown(500);
});
$(".m"+id).mouseout(function() {

$(this).slideUp(500);

});
} 
```

* * *

```
$(".m"+id).css("width",width);
$(".m"+id).css("background-color",color); 
```

我认为上面的代码可以删除或在菜单功能中首先调用。因为您只需更改元素样式的值而不需要将其更改回来。所以我删除了它们。

不知道是不是你预期的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:40:18.820

对您的代码进行了一些更改。希望这可以帮助您：-

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="jquery.js"></Script>
<script language="javascript">
$(document).ready(function(){
$("#content_menu").hide();
$(".men1").hover(
function(){$("#content_menu").show()},
function(){$("#content_menu").hide()}
)

})

</script>
<style>

#content_menu
{
    margin-top:7px;
    min-height:50px;
    height:auto;
    border:1px solid;
    text-align:left;
    font-family:Arial;
    font-size:12px;
    z-index:2;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    filter: alpha(opacity=80);
    -moz-opacity:0.8;
    -khtml-opacity: 0.8;
    opacity: 0.8;
    width: 20%;
}

#content_menu_into
{
    position:relative;
    min-height:28px;
    height:auto;
    line-height:28px;
    font-family:Arial;
    font-size:14px;
    color:#000000;
    padding-left:2%;
    text-align:left;
}

</style>
</head>

<body>
<div class="men1">
   Home Web Menu

  <div id="content_menu" class="m1" >
    <div id="content_menu_into">
    Home
    News
    Articles
    Users
    Vote    </div>
    </div>
</div>

</body>
</html> 
```

# java - .raw 文件以及如何打开它？（不是 GIMP/PICASA）

> ID：14110586
> 
> 赞同：-6
> 
> 时间：2013-01-01T12:46:31.567
> 
> 标签：java, image, image-processing, file-extension, picasa

编辑：如果有帮助，我认为这个应用程序以某种方式基于 html。

我有一堆 Java 应用程序（不是我的）使用的 .raw 文件，但我只是想看看它们（atm）。我尝试了 GIMP、PICASA、IrFanView 但没有成功

我知道 .raw 是一个图像或声音文件（在这种情况下 90% 肯定是图像），但是任何人都可以打开这个文件并让我知道你使用了什么吗？

[http://speedy.sh/hyyh6/carpet-royal-black.raw](http://speedy.sh/hyyh6/carpet-royal-black.raw)

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T13:26:10.913

您可以使用此在线 TrID 文件标识符，它会分析您的文件并让您知道是哪个程序创建了它并因此可以打开它

[http://mark0.net/onlinetrid.aspx](http://mark0.net/onlinetrid.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:09:20.200

如果你是 Linux 用户，你可以玩 mplayer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T13:18:56.343

看起来您的文件是相机 RAW 图像 - 由 DSLR 制作的照片。这些文件包含直接从相机图像传感器读取的原始数据。这些文件不易阅读，因为每个数码单反相机型号创建 RAW 文件的方式都略有不同。在 Photoshop 等图形程序中，必须使用 DSLR 制造商提供的特殊驱动程序（如 Adob​​e Camera Raw 插件）。但我认为 Picasa 应该打开这些图像。您可以尝试 Photoshop、Photoshop Elements 或开源应用程序[RawTherapee](http://rawtherapee.com/)。

# c++ - 为什么当时无法引用智能指针auto_ptr？

> ID：14110587
> 
> 赞同：1
> 
> 时间：2013-01-01T12:46:44.660
> 
> 标签：c++, pointers

```
#include <memory>
#include <iostream>

using namespace std;
class MyClass
{
public:
    int i;
    MyClass(int s) {
        i=s;
    }
    ~MyClass() {
        cout<<"This class has been destroied.  "<<i<<endl;
    }
    void myFunc() {
        cout<<"myFunc() done.  "<<i<<endl;
    }
};

int main()
{
    auto_ptr<MyClass> ptr1(new MyClass(1));
    auto_ptr<MyClass>ptr2(new MyClass(2));
    ptr1->myFunc();
    ptr2->myFunc();
    cout<<"test 1 done\n"<<endl;

    ptr2 = ptr1;
    ptr2->myFunc();
    //ptr1->myFunc();
    cout<<"test 2 done\n"<<endl;
}
/*
$ ./a.out 
myFunc() done.  1
myFunc() done.  2
test 1 done

This class has been destroied.  2
myFunc() done.  1
test 2 done
 * */ 
```

如果上面`ptr1->myFunc();`没有注释掉，那么结果如下。但我无法理解。我认为当时ptr1并没有被破坏......谁能帮助进一步解释一下？

```
$ ./a.out 
myFunc() done.  1
myFunc() done.  2
test 1 done

This class has been destroied.  2
myFunc() done.  1
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T12:50:33.323

旧的`auto_ptr`在复制或分配时具有非常奇怪的行为。它具有*转移*语义而不是复制语义。这意味着比你说`ptr2 = ptr1;`的 ,`ptr1`实际上已经改变了：它不再指向任何东西。（而且`ptr2`原来指向的东西当然已经被删除了。）

*因此，您从*`ptr1`它分配后不得使用（直到您再次分配或*重置*它）。

 *** * *

尽管这种智能指针是非常可取的东西，但这种行为是如此尴尬，这表明该语言中缺少某些东西。正确的解决方案需要右值引用，而 new`unique_ptr`试图解决与 相同的问题`auto_ptr`，表现得更明智：你根本不能复制或复制分配它，但你可以*移动*它——这是语言的一个新部分：

```
unique_ptr<MyClass> ptr1(new MyClass), ptr2(new MyClass);

ptr2 = std::move(ptr1);  // now it's clear that ptr1 is no longer usable

assert(!ptr1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:50:03.107

当您这样做时，`ptr2 = ptr1;`您正在删除当前指向的对象`ptr2`，该对象现在指向先前指向的对象`ptr1`。`ptr1`已将自身设置为指向*null*，因为这是`auto_ptr`on 副本的语义。然后，您尝试取消对 null 的引用，并且很幸运地发生了崩溃并发现您的代码是错误的。**

# linux - gvim AnsiEsc 插件

> ID：14110588
> 
> 赞同：0
> 
> 时间：2013-01-01T12:46:44.927
> 
> 标签：linux, vim, plugins

当我尝试从 gvim 获取 AnsiEsc.vba 时，我得到：

> 处理函数 vimball#Vimball 时检测到错误

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T13:00:55.090

# dynamics-crm-2011 - 在实体中设置查找属性

> ID：14110591
> 
> 赞同：1
> 
> 时间：2013-01-01T12:46:56.863
> 
> 标签：dynamics-crm-2011

我有一个名为*Samples*的实体。在里面我有很多字段，其中一个是*ProjectLocation*下拉列表。

现在我使用这段代码通过 WCF 在 CRM中插入一个*Sample*类型的新实例。

```
Entity sample = new Entity("new_sample");
sample.Attributes["name"]= "Ahmed"; 
```

这可行，但是当我想进入*ProjectLocation*时，我不知道应该如何完成。

这行不通。

```
Entity projectLoc = service.Retrieve("projectlocation", (new guid here), columnset)
sample.Attributes["new_projectlocation1"] = projectLoc 
```

可以做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:16:09.063

查找是`EntityReference`not的实例`Entity`。我一直将查找想象为指向实体的指针（通过 GUID），而不是实体本身。但是话又说回来，我的文凭工作是用 C++ 完成的，所以我应该对指针进行洗脑。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T04:31:21.410

您需要更改代码以返回[EntityReference](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.entity.toentityreference.aspx)，这是更新后的代码：

```
Entity projectLoc=service.Retrieve("projectlocation",(new guid here),columnset) //retrieves a correct projectloc. 
sample.Attributes["new_projectlocation1"]=projectLoc.ToEntityReference(); //Now it'll work 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T22:33:13.747

您需要设置一个`EntityReference`.

```
sample.Attributes["new_projectlocation1"] 
  = new EntityReference("projectlocation", new guid here); 
```

# php - 独特的分拣场景

> ID：14110594
> 
> 赞同：0
> 
> 时间：2013-01-01T12:47:38.050
> 
> 标签：php, mysql, sorting

我有一个带有玩家统计数据的 mysql 数据库。

玩家ID | 播放器 | 积分 | 联盟

我想对积分 DESC 的查询进行排序，但有些球员曾在其他联赛打过球，所以他们在 DB 中有多个记录。

理想情况下，我想对“大联盟”中的积分进行排序，当一名球员参加过其他联赛时，请在下面列出。它应该看起来像这样：

```
John Smith | 27 | Major League
Gary White | 24 | Major League
           | 32 | Minors
Joe Flatts | 15 | Major League 
```

ETC...

我不确定在我的 PHP 的 MySQL 视图或服务器端创建它是否更容易。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T12:57:35.573

您可以在 SQL 中通过加入最多第二个玩家表副本（仅过滤大联盟）来执行此操作，但它不适用于较大尺寸的表：

```
SELECT l.*, (l.league = 'Major League') AS major
FROM league_points AS l 
    LEFT JOIN league_points AS major 
        ON l.player = major.player AND major.league = 'Major League'
ORDER BY major.points DESC, major DESC, league DESC 
```

您可能想从输出中删除主要列，它只是为了确保主要联盟在 ORDER BY 操作中排在第一位。如果您根本不希望没有参加过大联盟的球员出现，请将 LEFT JOIN 更改为 INNER JOIN。

# android - 在此行找到多个注释：

> ID：14110596
> 
> 赞同：6
> 
> 时间：2013-01-01T12:47:47.077
> 
> 标签：android, xml, string

面对这个错误

```
Multiple annotations found at this line:
- error: Multiple substitutions specified in non-positional format; did you mean to add the formatted="false" 
 attribute?
- error: Unexpected end tag string 
```

这是我的代码

```
<resources>
   <string name="app_name">SpeedTest</string>
   <string name="network_edge">Network : EDGE</string>
   <string name="network_3g">Network : 3G</string>
   <string name="network_detecting">Network : Detecting </string>

   <string name="update_speed">%s kbit/sec</string>
   <string name="update_downloaded">Downloaded %s of %s</string>
   <string name="update_connectionspeed">Connection time %s ms</string>

   <string name="update_downloaded_complete">Downloaded %s @ %s kbit/sec</string>

</resources> 
```

面临来自这一行的错误

```
<string name="update_downloaded">Downloaded %s of %s</string> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-01T12:53:13.497

如果要替换两个字符串，这应该是正确的：

```
<string name="update_downloaded">Downloaded %1$s of %2$s</string> 
```

看这里：http: [//mobile.tutsplus.com/tutorials/android/android-sdk-format-strings/](http://mobile.tutsplus.com/tutorials/android/android-sdk-format-strings/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-01T12:51:00.710

添加这个：

```
 <string name="update_downloaded" formatted="false">Downloaded %s of %s</string> 
```

因为你在这个字符串中有特殊字符。

# android - 打开 AVD 管理器时出错

> ID：14110597
> 
> 赞同：7
> 
> 时间：2013-01-01T12:47:55.833
> 
> 标签：android, emulation, avd

将代码运行到 emulator 时，我遇到了常见问题。控制台消息是

```
[2013-01-05 19:39:15 - Doodlz] Android Launch!
[2013-01-05 19:39:15 - Doodlz] adb is running normally.
[2013-01-05 19:39:15 - Doodlz] Performing com.deitel.doodlz.Doodlz activity launch
[2013-01-05 19:39:15 - Doodlz] Automatic Target Mode: launching new emulator with compatible AVD 'Nex'
[2013-01-05 19:39:15 - Doodlz] Launching a new emulator with Virtual Device 'Nex' 
```

但是模拟器根本没有启动，甚至已经等待了更长的时间。

之后，我尝试从 AVD 管理器启动模拟器，但控制台消息告诉

```
[2013-01-05 19:39:25 - SDK Manager] Error parsing C:\Users\Dedy\.android\devices.xml, backing up to C:\Users\Dedy\.android\devices.xml.old
[2013-01-05 19:39:28 - SDK Manager] Error parsing C:\Users\Dedy\.android\devices.xml, backing up to C:\Users\Dedy\.android\devices.xml.old 
```

我无法弄清楚这些问题。有人可以告诉我应该怎么做才能解决这些问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:53:39.980

执行此步骤：

1.  删除旧的 AVD 并创建新的 AVD。可能您的 AVD 已损坏。
2.  如果不起作用，请重新启动 Eclipse 并重试。
3.  如果不起作用转到 `C:\Users\(username)\.android`文件夹并删除了`avd`和`cache`文件夹。（可能没有必要同时删除两者，我没有进一步检查）。这可能会帮助你！
4.  [转到此链接并从命令提示符启动模拟器。检查eclipse和模拟器之间是否有ADB连接启动或停止。](https://stackoverflow.com/questions/4974568/how-do-i-launch-the-android-emulator-from-the-command-line)
5.  如果它们都没有帮助重新安装 sdk 和 eclipse。

# c# - 在 Windows 应用商店应用中发送电子邮件

> ID：14110602
> 
> 赞同：0
> 
> 时间：2013-01-01T12:48:52.253
> 
> 标签：c#, email, windows-store-apps

我尝试使用以下代码在 Windows Store App 中发送电子邮件：

```
 var mailto = new Uri("mailto:?to=recipient@example.com&subject=The subject of an email&body=Hello from a Windows 8 Metro app.");
await Windows.System.Launcher.LaunchUriAsync(mailto); 
```

它没有显示任何错误，但我没有收到任何电子邮件。上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:54:33.820

正确的方法是使用共享。您的应用程序应该创建一个 HTML 文档或文本并共享它。用户将从 Share 魅力中选择 Mail，HTML/Text 将成为电子邮件的正文。

请参阅此处了解更多信息...

[这里](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh973055.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:44:54.960

您的代码应该使用链接中的所有信息打开默认邮件客户端（即处理`mailto:`协议的默认应用程序）。如果没有，您可能没有正确设置默认应用程序。这首先发生在我身上，在我选择`Mail`应用程序来处理这个协议之前。

尽管如此，您可能不希望您的用户获得这样的体验，至少有两个原因：

*   您的代码取决于用户机器的配置方式。你不能确定当它被执行时会发生什么。
*   即使`Mail`是默认应用程序，您的代码也只会创建一个新草稿，用户必须自己发送。

根据您想要实现的目标，我会考虑以下方法之一：

*   正如 Azzy 已经建议的那样，对于交互式发送电子邮件，共享是 Windows 应用商店应用程序中的正确方法。
*   如果您希望以非交互方式发送电子邮件，您应该创建一个 Web 服务并在应用调用它时从那里发送电子邮件。

# excel - Excel：如果其中一个为零，如何隐藏小时或分钟？

> ID：14110604
> 
> 赞同：8
> 
> 时间：2013-01-01T12:49:09.603
> 
> 标签：excel

现在我已经格式化了我的单元格：

```
h "hours" m "minutes" 
```

因此，如果我的单元格有`7:00`，它将显示为`7 hours 0 minutes`。如果小时或分钟为零，有没有办法删除它们？像`7 hours`_ `0:30`_`30 minutes`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T13:57:44.097

如果您有 Excel 2007 或更高版本（但显然不是 Excel for Mac 2011），您可以结合使用常规格式和条件格式来实现此目的。

假设 A1 中的数据使用像这样的常规自定义格式

`[<0.0415][m]" minutes";h "hours" m "minutes"`

这将为您提供与之前的格式相同的格式，除了任何 < 01:00 的值将显示为

`30 minutes`

现在您可以添加条件格式条件。选择 A 列后，执行此操作

条件格式 > 新规则 > 使用公式确定要格式化的单元格 > 在框中键入此公式

`=MINUTE(A1)=0`

点击“格式”按钮，设置如下数字格式

`h" hours"`

现在，如果您在 A1 中有 16:00，它将显示为`16 hours`

[条件格式规则将始终取代常规格式]

如果您正在处理“经过”时间而不是时钟时间，那么您可能希望在所有小时格式中使用 [h] 而不是 h 来显示小时 24+

# c - 流程创建和控制 - 同步

> ID：14110605
> 
> 赞同：-3
> 
> 时间：2013-01-01T12:49:14.173
> 
> 标签：c

我在这个问题中有一个问题你要实现一个密码破解系统。系统将部署四个进程（p1、p2、p3 和 p4）来尝试猜测加密代码的密码。对于加密，我们认为公式为：C = P XOR K，其中

```
C = encrypted code
P = plain text
K = key 
```

对于解密，公式为：P = C XOR K。因此，您的程序将尝试使用此公式找到 K。XOR 运算符是 ^。给定加密代码 C 和明码 P，您的程序应该部署三个进程来尝试找到用于加密明码的密钥。这三个进程将在进程 P1 的控制之下。一旦三个进程中的任何一个找到密钥，所有进程都会将它们的结果发送给进程 P1，并且进程 P1 将终止这三个进程并显示加密密钥和解密的文本。为简单起见，我们将考虑将原始数字 P 存储在名为 plain.txt 的文件中，并将加密代码存储在名为 cipher.txt 的文件中。考虑到只有数字存储在这些文件中，它们的范围在 0 到 100000000 之间。所以我们有 P 和 C，你的程序应该找到密钥 K。

我的问题是我可以使用多少个信号量？每一个的价值是什么？我不需要帮助我编写代码只是信号量的数量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:03:17.753

如果这是对问题的准确减少：

> 一旦 3 个工作进程中的任何一个完成其工作，主进程就会终止所有 3 个工作进程

那么你应该只需要 1 个信号量，master 将等待它，每个 worker 完成后都会发出信号，第一个信号量将解除 master 的阻塞，以便它可以终止 worker。实际上，您只需要一个互斥量，而不需要一个完整的信号量。

# c# - 无法使用反射获取 SAP di api 对象的所有方法

> ID：14110606
> 
> 赞同：-1
> 
> 时间：2013-01-01T12:49:21.110
> 
> 标签：c#, visual-studio-2010, reflection, sap

我试图显示`SAPbobsCOM.Items`使用以下代码的所有方法：

```
 SAPbobsCOM.Items item = (SAPbobsCOM.Items)oCompany.GetBusinessObject(SAPbobsCOM.BoObjectTypes.oItems);
        Type t = item.GetType();
        MethodInfo[] mi = t.GetMethods();
        Console.WriteLine("Number of methods={0}", mi.Length);
        foreach (MethodInfo m in mi)
            Console.WriteLine(m); 
```

输出仅提供 7 种方法，并排除了包括`Add()`,方法在内的其他几种可用方法`Update()`，尽管它在编写代码时由智能感知显示。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:33:50.947

您不能通过这种方式简单地反映 COM 对象。你可以这样做：

1) 使用 TLI.DLL（类型库信息）或 2) 反映 interop.SAPbobsCOM.dll，这是一个 .net dll。

李

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:04:01.067

我对 SAP 界面不熟悉，但这里有几个可能的原因：

1.  [`Type.GetMethods()`](http://msdn.microsoft.com/en-us/library/td205ybf.aspx)仅返回公共方法。看起来您正在评估 COM 对象，因此不太可能使用其他类型的方法。
2.  对于 COM 对象，方法可以从元数据中省略或包含在不同的 COM 接口中。
3.  其他方法可能是其他类添加的[扩展方法。](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)再一次，如果这是一个 COM 对象，则不太可能。

# c++ - C++ - 使程序自行打开

> ID：14110609
> 
> 赞同：0
> 
> 时间：2013-01-01T12:49:46.007
> 
> 标签：c++

我有一个程序可以打开 WAV 文件，然后绘制波形。如果 WAV 文件有 2 个通道，则会显示两个图形，每个通道一个。它工作正常，但我想在我创建的文件菜单中添加内容。到目前为止，我有三个按钮：`New`、`Open File`和`Close`。到目前为止，`Open File`和`Close`按钮工作正常。

我想让程序能够让用户同时查看多个 WAV 文件的多个波形。一种选择是创建更多图表，该过程将非常乏味。另一种选择是打开另一个窗口，这就是我想要做的。

然而，这是我的问题。我快速搜索了如何在 C++ 中打开现有程序，到目前为止，我遇到的解决方案涉及打开 exe 文件并且项目文件夹不包含 exe 文件。

我也尝试快速浏览一下功能，我找不到似乎打开窗口的功能，我似乎找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:01:59.120

你最好的选择是使用[fork](http://linux.die.net/man/2/fork)。或者，您可以使用[线程](http://www.kernel.org/doc/man-pages/online/pages/man7/pthreads.7.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T12:53:13.053

使用`GetModuleFileName`API 获取可执行文件的路径+名称。然后使用`ShellExecute`运行这个APP。

# azure - 是否在 Windows azure 上禁用了 asp.net 详细错误消息？

> ID：14110610
> 
> 赞同：3
> 
> 时间：2013-01-01T12:49:46.083
> 
> 标签：azure

我有 web.config 文件的简化列表，它在本地运行良好，但在 Windows Azure 网络上它没有显示详细的错误？他们是否让他们在他们的服务上被禁用。

你不能比这更简单

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
    <compilation debug="false" targetFramework="4.0"/>
    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
    <authentication mode="Windows"/>
    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.
        -->
    <customErrors mode="Off"/>
  </system.web> 
</configuration> 
```

但是我还是得到了黄屏死机

```
Server Error in '/' Application.

Runtime Error

Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine. 

Details: To enable the details of this specific error message to be viewable on remote machines, please create a <customErrors> tag within a "web.config" configuration file located in the root directory of the current web application. This <customErrors> tag should then have its "mode" attribute set to "Off".

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration>

Notes: The current error page you are seeing can be replaced by a custom error page by modifying the "defaultRedirect" attribute of the application's <customErrors> configuration tag to point to a custom error page URL.

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
    </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:22:08.423

这很可能是由于在 Azure 上创建和部署包时发生的[配置文件转换。](http://msdn.microsoft.com/en-us/library/dd465326.aspx)检查与您的 Web 项目中用于 Azure 部署的构建配置相关的 web.config 文件（主要是“web.release.config”）。可能存在设置`customErrors`为值以外的配置转换`Off`

# php - Magento - 在目录上方显示特定制造商信息

> ID：14110611
> 
> 赞同：1
> 
> 时间：2013-01-01T12:49:50.580
> 
> 标签：php, magento

我正在为网上商店使用 Magento 1.7，我想在目录上方显示一些特定的静态块。因此，当客户进入菜单并单击例如类别 A，然后单击制造商 B 时，目录产品列表上方应该有一个带有制造商特定信息的文本块。此外，当他们点击制造商 C 时，应该有其他文本，然后是制造商 B。

我认为最简单的方法是为所有制造商制作静态块，并制作一个 PHP 脚本。那可能吗？或者我可以用另一种方式做到这一点吗？

先感谢您！

亲切的问候，

让-保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:04:12.963

如果你想自己做，你可以实现一个观察者，检查在分层导航中应用了哪些过滤器，然后将你的块添加到`content`块中。

然后，您的块实现您想要为制造商显示不同信息的任何逻辑。

我会尝试`controller_action_layout_generate_blocks_after`，`controller_action_layout_render_before`或者`controller_action_layout_render_before_'.$this->getFullActionName()`分层类别的 FullActionName 是什么:-)

关于观察者，您可以在 inchoos 找到相关内容：http: [//inchoo.net/category/ecommerce/magento/events-observers/](http://inchoo.net/category/ecommerce/magento/events-observers/)

要获得选择制造商的信息，我认为有两种方法：

1.  从 get 获取信息`Mage::app()->getRequest()->getParam()`应该可以工作
2.  获取布局，然后`$layout->getBlock('catalog.leftnav')`以某种方式将信息拉出块

之后你可以添加你的块。

读完后：[Magento：在结构块“内容”的末尾添加内容块](https://stackoverflow.com/questions/11577155/magento-add-content-block-at-the-end-of-the-structual-block-content)

我建议引入您自己的更新句柄（因为我不知道如何将块添加到开头`content`）。用你自己的手柄，你可以使用`before="-"`

并如此处所述：http: [//www.classyllama.com/magento/add-custom-layout-handles-eg-parent-categories](http://www.classyllama.com/magento/add-custom-layout-handles-e-g-parent-categories)

您可以通过添加您的句柄`$layout->getUpdate()->addHandle('manufacturer_informations');`

我会在观察者中尝试这样的事情：

```
if($category = Mage::registry('current_category')) {
    if($category->getName() == 'MyBrand') { // ot maybe $category->getId() == ...
        //instantiate some $block
    }

    $layout->getBlock('content')->insert($block, 'brand-information');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T12:18:57.980

这是免费扩展的列表。只需下载它们，您就可以根据需要更改/升级编辑它。

1.  [按品牌/制造商购物](http://www.magentocommerce.com/magento-connect/shop-by-brand-manufacturer-free-extension.html)
2.  [品牌厂商管理](http://www.magentocommerce.com/magento-connect/displaze-brand-manufacturer-management-7000.html)
3.  [制造商品牌标志](http://www.magentocommerce.com/magento-connect/manufacturer-brand-logo-7813.html)

我希望你明白这个想法，我认为当你有东西开始时很容易理解。

# java - 在Android中计算两次之间的差异

> ID：14110621
> 
> 赞同：14
> 
> 时间：2013-01-01T12:50:57.177
> 
> 标签：java, android, date, time

我有两个字符串变量，例如 StartTime 和 EndTime。我需要通过用 StartTime 减去 EndTime 来计算 TotalTime。

StartTime 和 EndTime 的格式如下：

```
StartTime = "08:00 AM";
EndTime = "04:00 PM"; 
```

TotalTime（小时和分钟格式）。如何在Android中计算这个？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-01T12:54:58.070

试试下面的代码。

// 假设时间格式为**("hh:mm a")** 格式

```
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("hh:mm a");

date1 = simpleDateFormat.parse("08:00 AM");
date2 = simpleDateFormat.parse("04:00 PM");

long difference = date2.getTime() - date1.getTime(); 
days = (int) (difference / (1000*60*60*24));  
hours = (int) ((difference - (1000*60*60*24*days)) / (1000*60*60)); 
min = (int) (difference - (1000*60*60*24*days) - (1000*60*60*hours)) / (1000*60);
hours = (hours < 0 ? -hours : hours);
Log.i("======= Hours"," :: "+hours); 
```

**输出**- 小时 :: 8

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-30T13:28:56.870

注意：更正了 Chirag Raval 提供的代码如下，因为当我们尝试从 22:00 到 07:00 查找时间时，Chirag 提供的代码存在一些问题。

```
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("HH:mm");
Date startDate = simpleDateFormat.parse("22:00");
Date endDate = simpleDateFormat.parse("07:00");

long difference = endDate.getTime() - startDate.getTime(); 
if(difference<0)
{
    Date dateMax = simpleDateFormat.parse("24:00");
    Date dateMin = simpleDateFormat.parse("00:00");
    difference=(dateMax.getTime() -startDate.getTime() )+(endDate.getTime()-dateMin.getTime());
}
int days = (int) (difference / (1000*60*60*24));  
int hours = (int) ((difference - (1000*60*60*24*days)) / (1000*60*60)); 
int min = (int) (difference - (1000*60*60*24*days) - (1000*60*60*hours)) / (1000*60);
Log.i("log_tag","Hours: "+hours+", Mins: "+min); 
```

结果将是：小时：9，分钟：0

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-01T13:02:49.370

看看[DateFormat](http://download.oracle.com/javase/1.5.0/docs/api/java/text/DateFormat.html)，你可以用它来解析你的字符串和 parse(String source) 方法，你可以很容易地操纵两个 Dates 对象来获得你想要的。

```
DateFormat df = DateFormat.getInstance();
Date date1 = df.parse(string1);
Date date2 = df.parse(string2);
long difference = date1.getTime() - date2.getTime();

days = (int) (difference / (1000*60*60*24));  
hours = (int) ((difference - (1000*60*60*24*days)) / (1000*60*60)); 
min = (int) (difference - (1000*60*60*24*days) - (1000*60*60*hours)) / (1000*60);

String diffHours = df.format(hours); 
```

对于日期差异

```
Date myDate = new Date(difference); 
```

显示日期：

```
String diff = df.format(myDate); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-29T10:30:02.013

请试试这个......

```
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("HH:mm");

    try {
        date1 = simpleDateFormat.parse("08:00 AM");
    } catch (ParseException e) {
        e.printStackTrace();
    }

    try {
        date2 = simpleDateFormat.parse("04:00 PM");
    } catch (ParseException e) {
        e.printStackTrace();
    }

    long difference = date2.getTime() - date1.getTime();
    int days = (int) (difference / (1000 * 60 * 60 * 24));
    int hours = (int) ((difference - (1000 * 60 * 60 * 24 * days)) / (1000 * 60 * 60));
    int min = (int) (difference - (1000 * 60 * 60 * 24 * days) - (1000 * 60 * 60 * hours))
            / (1000 * 60);
    hours = (hours < 0 ? -hours : hours);
    Log.i("======= Hours", " :: " + hours); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-02T08:57:52.513

我想贡献现代答案。

## java.time 和 ThreeTenABP

```
 DateTimeFormatter timeFormatter = DateTimeFormatter.ofPattern("hh:mm a", Locale.ENGLISH);

    String startTime = "08:00 AM";
    String endTime = "04:00 PM";

    LocalTime start = LocalTime.parse(startTime, timeFormatter);
    LocalTime end = LocalTime.parse(endTime, timeFormatter);

    Duration diff = Duration.between(start, end);

    long hours = diff.toHours();
    long minutes = diff.minusHours(hours).toMinutes();
    String totalTimeString = String.format("%02d:%02d", hours, minutes);
    System.out.println("TotalTime in Hours and Mins Format is " + totalTimeString); 
```

此代码段的输出是：

> TotalTime（小时和分钟）格式为 08:00

（使用 ThreeTen Backport 在 Java 1.7.0_67 上测试。）

其他答案中使用的日期时间类 - `SimpleDateFormat`、`Date`和- 都早已过时且设计不佳`DateFormat`。`Calendar`可能更糟糕的是，一个答案是“手动”解析和计算，而无需任何库类的帮助。这是复杂且容易出错的，从不推荐。相反，我使用的是现代 Java 日期和时间 API java.time。与它一起工作要好得多。

## 问题：我可以在 Android 上使用 java.time 吗？

是的，java.time 在较旧和较新的 Android 设备上运行良好。它只需要至少**Java 6**。

*   在 Java 8 及更高版本以及更新的 Android 设备（从 API 级别 26 开始）中，现代 API 是内置的。
*   在 Java 6 和 7 中获得 ThreeTen Backport，现代类的后向端口（ThreeTen 用于 JSR 310；请参阅底部的链接）。
*   在（较旧的）Android 上使用 ThreeTen Backport 的 Android 版本。它被称为 ThreeTenABP。并确保从子包中导入日期和时间类`org.threeten.bp`：`org.threeten.bp.Duration`和.`org.threeten.bp.LocalTime``org.threeten.bp.format.DateTimeFormatter`

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [Java 规范请求 (JSR) 310](https://jcp.org/en/jsr/detail?id=310)，`java.time`第一次描述的地方。
*   [ThreeTen Backport 项目](http://www.threeten.org/threetenbp/)，`java.time`Java 6 和 7 的反向移植（ThreeTen for JSR-310）。
*   [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) , ThreeTen Backport 的 Android 版
*   [问题：如何在Android项目中使用ThreeTenABP](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)，有非常详尽的解释。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-29T05:42:22.377

```
String mStrDifferenceTime =compareTwoTimeAMPM("11:06 PM","05:07 AM");
Log.e("App---Time ", mStrDifferenceTime+" Minutes");

public static String getCurrentDateUsingCalendar() {
    Date mDate = new Date();  // to get the date
    @SuppressLint("SimpleDateFormat") SimpleDateFormat mSimpleDateFormat = new SimpleDateFormat("dd-MM-yyyy"); // getting date in this format
    return mSimpleDateFormat.format(mDate.getTime());
}

public static String getNextDateUsingCalendar() {
    Calendar mCalendar = Calendar.getInstance();
    mCalendar.add(Calendar.DAY_OF_YEAR, 1);
    Date mStrTomorrow = mCalendar.getTime();
    @SuppressLint("SimpleDateFormat") DateFormat mDateFormat = new SimpleDateFormat("dd-MM-yyyy");
    return mDateFormat.format(mStrTomorrow);

}

public static String compareTwoTimeAMPM(String mStrStartTime, String mStrEndTime) {
    String mStrCompareStartTime[] = mStrStartTime.split(" ");
    String mStrCompareEndTime[] = mStrEndTime.split(" ");
    int mIStartTime = Integer.parseInt(mStrCompareStartTime[0].replace(":", ""));
    int mIEndTime = Integer.parseInt(mStrCompareEndTime[0].replace(":", ""));
    String mStrToday = "";
    String mStrTomorrow = "";
    if (mIStartTime < mIEndTime && mStrCompareStartTime[1].equals("PM") && mStrCompareEndTime[1].equals("PM")) {
        mStrToday = getCurrentDateUsingCalendar();
        mStrTomorrow = getCurrentDateUsingCalendar();
    } else if (mIStartTime < mIEndTime && mStrCompareStartTime[1].equals("AM") && mStrCompareEndTime[1].equals("AM")) {
        mStrToday = getCurrentDateUsingCalendar();
        mStrTomorrow = getCurrentDateUsingCalendar();
    } else if (mIStartTime > mIEndTime && mStrCompareStartTime[1].equals("PM") && mStrCompareEndTime[1].equals("PM")) {
        String mStrTime12[] = mStrCompareStartTime[0].split(":");
        if (mStrTime12[0].equals("12")) {
            mStrToday = getNextDateUsingCalendar();
            mStrTomorrow = getNextDateUsingCalendar();
        } else {
            mStrToday = getCurrentDateUsingCalendar();
            mStrTomorrow = getNextDateUsingCalendar();
        }
    } else if (mIStartTime > mIEndTime && mStrCompareStartTime[1].equals("AM") && mStrCompareEndTime[1].equals("AM")) {
        String mStrTime12[] = mStrCompareStartTime[0].split(":");
        if (mStrTime12[0].equals("12")) {
            mStrToday = getNextDateUsingCalendar();
            mStrTomorrow = getNextDateUsingCalendar();
        } else {
            mStrToday = getCurrentDateUsingCalendar();
            mStrTomorrow = getNextDateUsingCalendar();
        }
    } else if (mStrCompareStartTime[1].equals("PM") && mStrCompareEndTime[1].equals("AM")) {
        mStrToday = getCurrentDateUsingCalendar();
        mStrTomorrow = getNextDateUsingCalendar();
    } else if (mStrCompareStartTime[1].equals("AM") && mStrCompareEndTime[1].equals("PM")) {
        mStrToday = getCurrentDateUsingCalendar();
        mStrTomorrow = getCurrentDateUsingCalendar();
    }
    @SuppressLint("SimpleDateFormat") SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd-MM-yyyy hh:mm aa");
    String mStrDifference = "";
    try {
        Date date1 = simpleDateFormat.parse(mStrToday + " " + mStrStartTime);
        Date date2 = simpleDateFormat.parse(mStrTomorrow + " " + mStrEndTime);
        mStrDifference = differenceDatesAndTime(date1, date2);
    } catch (ParseException e) {
        e.printStackTrace();
    }

    return mStrDifference;

}

public static String differenceDatesAndTime(Date mDateStart, Date mDateEnd) {

    long different = mDateEnd.getTime() - mDateStart.getTime();
    long secondsInMilli = 1000;
    long minutesInMilli = secondsInMilli * 60;
    long hoursInMilli = minutesInMilli * 60;
    long daysInMilli = hoursInMilli * 24;

    long elapsedDays = different / daysInMilli;
    different = different % daysInMilli;

    long elapsedHours = different / hoursInMilli;
    different = different % hoursInMilli;

    long elapsedMinutes = different / minutesInMilli;

    long minutes = elapsedHours * 60 + elapsedMinutes;
    long result = elapsedDays * 24 * 60 + minutes;
    if (0 > result) {
        result = result + 720;  //result is minus then add 12*60 minutes
    }

    return result + "";
} 
```

我的输出是 E/App---时间：361 分钟

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2017-07-14T06:03:39.543

```
Try simple piece of code using For 24 hour time
StartTime = "10:00";
EndTime = "13:00";
here starthour=10 and end hour=13 
if(TextUtils.isEmpty(txtDate.getText().toString())||TextUtils.isEmpty(txtDate1.getText().toString())||TextUtils.isEmpty(txtTime.getText().toString())||TextUtils.isEmpty(txtTime1.getText().toString()))
    {
        Toast.makeText(getApplicationContext(), "Date/Time fields cannot be blank", Toast.LENGTH_SHORT).show();
    }
    else {
        if (starthour > endhour) {
            Toast.makeText(getApplicationContext(), "Start Time Should Be Less Than End Time", Toast.LENGTH_SHORT).show();
        } else if (starthour == endhour) {
            if (startmin > endmin) {
                Toast.makeText(getApplicationContext(), "Start Time Should Be Less Than End Time", Toast.LENGTH_SHORT).show();
            }
            else{
                tvalid = "True";
            }
        } else {
            // Toast.makeText(getApplicationContext(),"Sucess"+(endhour-starthour)+(endmin-startmin),Toast.LENGTH_SHORT).show();
            tvalid = "True";
        }
    }
same for date also 
```

# apache-camel - OUT 消息未在内部收到

> ID：14110624
> 
> 赞同：0
> 
> 时间：2013-01-01T12:51:06.493
> 
> 标签：apache-camel

我正在尝试与 Apache Camel 捆绑的 JMS 示例

```
ApplicationContext context = new ClassPathXmlApplicationContext("camel-config.xml");

producer)
ProducerTemplate camelTemplate = context.getBean("camelTemplate", ProducerTemplate.class);

System.out.println("Invoking the multiply with 22");
int responseData = (Integer)camelTemplate.sendBody("jms:queue:numbers", ExchangePattern.InOut, 22);
System.out.println("... the result is: " + responseData); 
```

这是代码。当我作为独立应用程序运行时，这非常有效。

我刚刚放入一个 servlet 并尝试运行它。我收到此错误 **OUT 消息未在内部收到**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:17:22.620

这真是我犯的一个错误。

想删除问题。但许多人可能会犯同样的错误

```
camelTemplate.sendBody("jms:queue:numbers", ExchangePattern.InOut, 22); 
```

问题出在上面的行上。我将 22 作为参数传递，它是一个整数，但 JSM 中的真正方法是接收 InputStream 作为参数。

当我改变它时，问题得到了解决。

# python - Scons 没有将 CCFLAGS 传递给 gcc

> ID：14110627
> 
> 赞同：1
> 
> 时间：2013-01-01T12:51:56.533
> 
> 标签：python, gcc, scons

我正在尝试使用 Scons 构建一个简单的 GTK C 应用程序（特别是一个 MATE 小程序），因为我无法使用自动工具。

在我的 SConstruct 文件中，我有这个：

```
env = Environment(tools=['default', 'scanreplace'], toolpath=['tools'])

env.ParseConfig('pkg-config --cflags --libs gtk+-2.0')
env.ParseConfig('pkg-config --cflags --libs glib-2.0')
env.ParseConfig('pkg-config --cflags --libs libmatepanelapplet-3.0') 
```

应该找到正确的目录等。在终端中运行 pkg-config 可以正常工作，例如：

```
$ pkg-config --cflags --libs gtk+-2.0
-pthread -I/usr/include/gtk-2.0 -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/pango-1.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng12  -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgio-2.0 -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 -lfreetype -lfontconfig -lgobject-2.0 -lglib-2.0 
```

但是，当我运行 scons 时，这是输出的一部分：

```
gcc -o .build/resource-applet -pthread src/resource-applet.h .build/src/resource-applet.o -lmate-panel-applet-3 -lmateconf-2 -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgio-2.0 -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 -lfreetype -lfontconfig -lgobject-2.0 -lglib-2.0
src/resource-applet.h:22:21: fatal error: gtk/gtk.h: No such file or directory 
```

任何地方都没有 -I 标志，所以据我了解，gcc 找不到头文件。

那么为什么 scons 不给 gcc -I 标志，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:52:55.163

尝试将[ParseFlags()](http://www.scons.org/doc/production/HTML/scons-user/x1861.html)函数用于“-I”路径，因为从 SCons 文档中可以[看出 ParseConfig()](http://www.scons.org/doc/production/HTML/scons-user/x1898.html)函数主要用于库检测。

要调试 SConscript 中的内容，您可以执行以下操作：

```
def populateEnv(env, packageName, debug=False):
    d = env.ParseFlags('!pkg-config --cflags --libs %s' % packageName)
    if debug:
        # print the dictionary

    if debug:
        # print the CCFLAGS, LIBPATH, and CPPPATH before calling MergeFlags()

    env.MergeFlags(d)

    if debug:
        # print the CCFLAGS, LIBPATH, and CPPPATH after calling MergeFlags()

    env.ParseConfig('pkg-config --cflags --libs %s' % packageName)

    if debug:
        # print the CCFLAGS, LIBPATH, and CPPPATH after calling ParseConfig()

...    
populateEnv(env, 'glib-2.0', True)
populateEnv(env, 'libmatepanelapplet-3.0', True)
populateEnv(env, 'gtk+-2.0', True)
... 
```

# php - Zend - 可捕获的致命错误

> ID：14110630
> 
> 赞同：0
> 
> 时间：2013-01-01T12:52:07.737
> 
> 标签：php, zend-framework

运行以下代码时出现错误

```
$value_sql = "SELECT test_fielf FROM `tbl_test` where `site_id`='".$sid."'";
$register_value = $db->fetchRow($value_sql);
echo $register_value;die(); 
```

错误 ：`Catchable fatal error: Object of class stdClass could not be converted to string`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T13:03:31.990

您不能`echo`用于打印对象

```
$value_sql = "SELECT test_fielf FROM `tbl_test` where `site_id`='".$sid."'";
$register_value = $db->fetchRow($value_sql);
print_r( $register_value);
die(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T12:58:22.217

假设您发布的代码是原样的，那么您在第一行缺少一个结束双引号。

```
$value_sql = "SELECT test_fielf FROM `tbl_test` where `site_id`='".$sid."'";
$register_value = $db->fetchRow($get_register_value_sql);
echo $register_value;die(); 
```

您遇到的错误是由于`$register_value = $db->fetchRow($get_register_value_sql);`返回一个对象，而不是一个字符串。如果您希望将 is 视为字符串，则可以使用以下命令将 is 视为字符串：

```
$register_value = (string) $db->fetchRow($get_register_value_sql); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T00:51:51.357

尝试这个：

```
$value_sql = "SELECT test_fielf FROM `tbl_test` where `site_id`='" . $sid . "'";
$register_value = $value_sql -> fetchRow(DB_FETCHMODE_ASSOC);
print_r($register_value);
die(); 
```

# python - Amazon EMR 作业失败：因步骤失败而关闭

> ID：14110635
> 
> 赞同：4
> 
> 时间：2013-01-01T12:52:38.420
> 
> 标签：python, amazon-web-services, mapreduce, amazon-emr

我正在使用 Python 编写一个简单的流式映射减少作业以在 Amazon EMR 上运行。它基本上是用户记录的聚合器，它将每个用户 ID 的条目分组在一起。

映射器

```
#!/usr/bin/env python
import sys

def main(argv):
line = sys.stdin.readline()
try:
    while line:
        line = line.rstrip()
        elements = line.split()
        print '%s\t%s' % (elements[0] , (elements[1],elements[2]) )
        line = sys.stdin.readline()
except "end of file":
    return None

if __name__ == '__main__':
    main(sys.argv) 
```

减速器：

```
#!/usr/bin/env python
import sys

def main(argv):
users=dict()
for line in sys.stdin:
    elements=line.split('\t',1)
    if elements[0] in users:
        users[elements[0]].append(elements[1])
    else:
        users[elements[0]]=elements[1]

for user in users:
    print '%s\t%s'% ( user, users[user] )

if __name__ == '__main__':
    main(sys.argv) 
```

该作业应在包含五个文本文件的目录上运行。EMR 作业的参数为：

输入：[桶名]/[输入文件夹名]

输出：[桶名]/输出

映射器：[桶名]/mapper.py

减速器：[桶名]/reducer.py

作业不断失败，原因是：步骤失败时关闭。这是日志的副本

```
2013-01-01 12:06:16,270 INFO org.apache.hadoop.mapred.JobClient (main): Default number      of map tasks: null

2013-01-01 12:06:16,271 INFO org.apache.hadoop.mapred.JobClient (main): Setting default number of map tasks based on cluster size to : 8

2013-01-01 12:06:16,271 INFO org.apache.hadoop.mapred.JobClient (main): Default number of reduce tasks: 3

2013-01-01 12:06:18,392 INFO org.apache.hadoop.security.ShellBasedUnixGroupsMapping (main): add hadoop to shell userGroupsCache

2013-01-01 12:06:18,393 INFO org.apache.hadoop.mapred.JobClient (main): Setting group to hadoop

2013-01-01 12:06:18,647 INFO com.hadoop.compression.lzo.GPLNativeCodeLoader (main): Loaded native gpl library

2013-01-01 12:06:18,670 WARN com.hadoop.compression.lzo.LzoCodec (main): Could not find build properties file with revision hash

2013-01-01 12:06:18,670 INFO com.hadoop.compression.lzo.LzoCodec (main): Successfully loaded & initialized native-lzo library [hadoop-lzo rev UNKNOWN]

2013-01-01 12:06:18,695 WARN org.apache.hadoop.io.compress.snappy.LoadSnappy (main): Snappy native library is available

2013-01-01 12:06:18,695 INFO org.apache.hadoop.io.compress.snappy.LoadSnappy (main): Snappy native library loaded

2013-01-01 12:06:19,050 INFO org.apache.hadoop.mapred.FileInputFormat (main): Total input paths to process : 5

2013-01-01 12:06:20,688 INFO org.apache.hadoop.streaming.StreamJob (main): getLocalDirs(): [/mnt/var/lib/hadoop/mapred]

2013-01-01 12:06:20,688 INFO org.apache.hadoop.streaming.StreamJob (main): Running job: job_201301011204_0001

2013-01-01 12:06:20,688 INFO org.apache.hadoop.streaming.StreamJob (main): To kill this job, run:

2013-01-01 12:06:20,688 INFO org.apache.hadoop.streaming.StreamJob (main): /home/hadoop/bin/hadoop job  -Dmapred.job.tracker=10.255.131.225:9001 -kill job_201301011204_0001

2013-01-01 12:06:20,689 INFO org.apache.hadoop.streaming.StreamJob (main): Tracking URL: http://domU-12-31-39-01-7C-13.compute-1.internal:9100/jobdetails.jsp?jobid=job_201301011204_0001

2013-01-01 12:06:21,696 INFO org.apache.hadoop.streaming.StreamJob (main):  map 0%  reduce 0%

2013-01-01 12:08:02,238 INFO org.apache.hadoop.streaming.StreamJob (main):  map 100%  reduce 100%

2013-01-01 12:08:02,239 INFO org.apache.hadoop.streaming.StreamJob (main): To kill this job, run:

2013-01-01 12:08:02,240 INFO org.apache.hadoop.streaming.StreamJob (main): /home/hadoop/bin/hadoop job  -Dmapred.job.tracker=10.255.131.225:9001 -kill job_201301011204_0001

2013-01-01 12:08:02,240 INFO org.apache.hadoop.streaming.StreamJob (main): Tracking URL: http://domU-12-31-39-01-7C-13.compute-1.internal:9100/jobdetails.jsp?jobid=job_201301011204_0001

 2013-01-01 12:08:02,240 ERROR org.apache.hadoop.streaming.StreamJob (main): Job not successful. Error: # of failed Map Tasks exceeded allowed limit. FailedCount: 1\. LastFailedTask: task_201301011204_0001_m_000002

 2013-01-01 12:08:02,240 INFO org.apache.hadoop.streaming.StreamJob (main): killJob... 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T15:06:22.033

解决了。确保您在 Python 脚本的开头没有任何注释，并且脚本中的第一行就是该`#!/usr/bin/env python`行

# javascript - 调用 JQuery 插件

> ID：14110636
> 
> 赞同：0
> 
> 时间：2013-01-01T12:52:40.597
> 
> 标签：javascript, jquery, jquery-plugins, plugins

我是 Jquery 的新手，并且一直在学习一些教程，但这让我陷入了困境。我找到了一个教程来制作一个很好的 Jquery 时钟，但我正在尝试将它转换为插件。我遇到的问题是我已经看到如何基于单个 div 调用插件，但这让我很难过。你能帮我看看代码并告诉我如何调用插件吗？谢谢

HTML：

```
 <head>
    <script src="jquery.min.js"></script>
    <script src="clock.js"></script>
    <script>
        // Need to call

    </script>

    <style> 
            #clock {
              position: relative;
              width:280px;
              height: 285px;
              margin: 20px auto 0 auto;
              background: url(images/clockface.png);
              list-style: none;
            }

            #sec, #min, #hour {
              position: absolute;
              width: 7px;
              height: 70px;
              top: 125px;
              left: 140px;
            }

            #sec {
              background: url(images/second.png);
              z-index: 3;
            }

            #min {
              background: url(images/min.png);
              z-index: 2;
            }

            #hour {
              background: url(images/hour.png);
              z-index: 1;
            }
    </style>
</head>
<body>
    <ul id="clock"> 
      <li id="sec"></li>
      <li id="hour"></li>
      <li id="min"></li>
    </ul>
</body> 
```

JS...

```
 (function($){
$.fn.mclock = function(){
    var defaults = {
        var seconds = new Date().getSeconds();
        var sdegree = seconds * 6;
        var hdegree = hours * 30 + (mins / 2);
        },
        options = $.extend(defaults, args);
        console.log(options);

    this.each(function(){
      setInterval( function() {
  var seconds = new Date().getSeconds();
  var sdegree = seconds * 6;
  var srotate = "rotate(" + sdegree + "deg)";

  $("#sec").css({ "transform": srotate });

  }, 1000 );

  setInterval( function() {
  var hours = new Date().getHours();
  var mins = new Date().getMinutes();
  var hdegree = hours * 30 + (mins / 2);
  var hrotate = "rotate(" + hdegree + "deg)";

  $("#hour").css({ "transform": hrotate});

  }, 1000 );

  setInterval( function() {
  var mins = new Date().getMinutes();
  var mdegree = mins * 6;
  var mrotate = "rotate(" + mdegree + "deg)";

  $("#min").css({ "transform" : mrotate });

  }, 1000 );    })(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:21:51.730

更新：剥离回 hello world 发现缺少大括号}

注意：您不会返回（ing）this.each，这可能会破坏您的插件

骨架插件

```
/*
 * PLUGIN-NAME
 * PLUGIN-DESCRIPTION
 *
 * Copyright 2011 YOUR-NAME YOUR-WEBSITE-URL
 * Released under the MIT License
 */

(function($){

$.fn.PLUGIN_NAME = function(options) {

    var opts = $.extend({}, $.fn.PLUGIN_NAME.defaults, options);

    return this.each(function() {

    });

};

$.fn.PLUGIN_NAME.defaults = {
};

})(jQuery); 
```

# ruby - 分叉和使用 rails gem 的指南

> ID：14110639
> 
> 赞同：2
> 
> 时间：2013-01-01T12:52:56.410
> 
> 标签：ruby, ruby-on-rails-3, github, gem, pull-request

我正在寻找某种指南来帮助我开始分叉 gem，在我需要的地方更改它们并编写补充代码（测试等）并解释 github 中的拉取请求过程

假设我知道 rails ruby​​ 和 rspec，我缺少关于 gem 的工作原理、每个文件的含义以及我应该如何更改其中的任何内容以及我应该以什么方式工作的知识 - 我应该创建一个新的 rails项目特别为此？或者在我原来的项目中工作？

例如，我想向 gem 使用生成器创建的迁移添加一个简单的属性，但我不确定从哪里开始添加它，以及下一步要做什么来处理 gem 文件。

一个可以解释它的地方的链接会很棒..谷歌不是很有帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T13:04:50.883

我建议您先搜索如何创建宝石。“[制作你自己的宝石](http://guides.rubygems.org/make-your-own-gem/)”将帮助你开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T16:03:02.160

我不认为您描述的指导存在或可以编写。原因很简单：Gems 的实现方式非常不同。我所能推荐的就是尝试在 github.com 上找到一些具有非常基本实现的 gem，例如那些为自学目的而编写的 gem，然后阅读并尝试它们。

我自己最近以类似的意图进行了搜索，我发现 [acts_as_commentable](https://github.com/jackdempsey/acts_as_commentable)非常有帮助。

更新：

关于 GitHub 上的“拉取请求”程序：此视频[对 GitHub 拉取请求介绍](http://vimeo.com/41045197) 以及 GitHub [Fork A Repo](https://help.github.com/articles/fork-a-repo)和[使用拉取请求](https://help.github.com/articles/using-pull-requests)文档很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T16:19:14.447

您可以在下面找到与您的问题相近的答案：

*   “[为 Rails 项目分叉 gem](https://stackoverflow.com/questions/1582728/forking-a-gem-for-a-rails-project) ”
*   GitHub 上的“ [Fork Support ”也可能会有所帮助。](https://github.com/rubygems/rubygems.org/wiki/Fork-Support)

# session - Appfog Cakephp 会话对象在刷新或重定向时丢失

> ID：14110644
> 
> 赞同：3
> 
> 时间：2013-01-01T12:53:29.090
> 
> 标签：session, cakephp, cakephp-2.0, session-variables, appfog

我刚刚将我的应用程序迁移到 appfog。我将会话信息存储在数据库中。但是在页面刷新或重定向后会话丢失。我正在使用 cakephp 2.2.3，该应用程序在本地机器和 namecheap 服务器上运行良好。在 Appfog 上，我删除了数据库会话表中所有存储的会话。因此，当我登录时会创建新记录。当会话信息在登录时可用，但在刷新或重定向时丢失。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-31T08:57:09.360

在您的 core.php 中，您必须将 session.start 设置为 true

```
Configure::write('Session.start', true); 
```

# c# - 无法分配给 因为它是一个方法组：错误（使用 Moles 框架）

> ID：14110648
> 
> 赞同：1
> 
> 时间：2013-01-01T12:54:01.943
> 
> 标签：c#, moles

这两行代码给了我标题中提到的错误。我正在尝试为`TestClass`

```
var stubTestClass = new StubsTutorial.Moles.STestClass();
stubTestClass.WriteStuff = () => "Moled in static class!"; 
```

这就是函数 WriteStuff() 的定义方式

```
public class TestClass {
  public string WriteStuff() {
    return "Stuff written in main class.";
  }
} 
```

我不确定我哪里出错了。方向会帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:59:01.277

我不是 Moles 用户，但...

“默认情况下，为所有接口和抽象类生成存根，尽管您也可以配置 Moles 为暴露虚拟方法的非抽象类生成存根”

所以

a）您是否正确配置 b）我注意到如果 a）正确，该方法未标记为虚拟

IE

```
public virtual string WriteStuff() { ... } 
```

因为封闭类是具体的（未标记为抽象或接口）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:38:52.410

从我发现[的教程中：](http://research.microsoft.com/en-us/projects/pex/molestutorial.pdf)

> 每种鼹鼠类型的命名方式是在其名称前加上“M”并将其放入 .Moles 命名空间中。

所以也许你的线

```
var stubTestClass = new StubsTutorial.Moles.STestClass(); 
```

应该改为

```
var moleTestClass = new StubsTutorial.Moles.MTestClass(); 
```

虽然我没有使用 Microsoft Moles 的经验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-09T20:50:24.200

存根通过覆盖它们来为公共抽象和虚拟方法创建它们的假委托。如果该方法未标记为虚拟或抽象，则任何为存根委托分配值的尝试都将被编译器否决，因为该方法未被覆盖以返回分配的委托。尝试使用两种方法对测试类进行存根，一种是简单的公共方法，另一种是公共的虚拟方法。为了测试没有接口契约或抽象或虚拟方法的公共类，必须使用填充程序，而不是存根。

# javascript - Flexslider 无法识别动态加载的内容？

> ID：14110649
> 
> 赞同：1
> 
> 时间：2013-01-01T12:54:15.897
> 
> 标签：javascript, jquery, css, plugins, flexslider

我正在使用 SoundCloud API使用[我在此处找到的说明](http://soundcloud-sm2.heroku.com/docs/application.html)`ul`将艺术品作为通过 Javascript加载到 HTML 文档中，然后使用[Flexslider 滑过](http://www.woothemes.com/flexslider/)封面的轮播（包装在标签中）。当列表项被硬编码到 HTML 文档中时，这可以正常工作，但是，当我使用加载脚本从 API 动态检索艺术品并将它们注入 DOM 时，Flexslider 不会注册它们是尽管在 SoundCloud 脚本之后加载了 Flexslider 脚本，但在那里并为 s 添加了必要的样式。谁能告诉我如何让 Flexslider 拾取动态内容？这是我的文件：`li``img``li`

### HTML（片段）

```
<div class="page-container">
    <section id="work">
        <h3>Work</h3>
        <p>Check out my latest mixes below.</p>
        <div class="sc-stream">
            <ul class="cover-flow clearfix">
                <!-- Covers inject here -->
            </ul>
        </div>
    </section>
    <hr>
</div><!-- End page-container -->

<!-- Scripts -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script src="js/vendor/soundmanager2.js"></script>
<script src="js/sc-custom-player.js"></script>

<script src="js/flexslider.min.js"></script>
<script src="js/main.js"></script> 
```

### sc-custom-player.js

[与此处找到的文件](http://soundcloud-sm2.heroku.com/js/application.js)相同

### main.js

```
$(document).ready(function() {

    $('.sc-stream').flexslider({
        namespace:  "sc-",
        animation:  "slide",
        selector:   ".cover-flow > li",
        slideshow:  false,
        controlNav: false,
        minItems:   1,
        itemWidth:  224,
        itemMargin: 8
    });

}); 
```

需要帮助请叫我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:49:37.403

可能是您需要稍微延迟才能让数据首先完全加载？使用 setTimeout 对我当前的项目有效：

HTML

```
<div class="flexslider">
    <ul class="slides"></ul>
</div> 
```

JS

```
$(function () {

function initGame() {
    // load xml data file (from same domain)
    // iterate xml elements and load <li>s into HTML variable

    $(HTML).appendTo('.slides');

    setTimeout(function () {
        startGame();
    }, 500);
}

function startGame() {
    $('.flexslider').flexslider({
        animation: "slide",
        animationLoop: false,
        randomize: true,
        directionNav: false,
        touch: true,
        after: function (slider) {
            $(".flex-control-nav li").removeClass("active");
            $(".flex-active").parent().addClass("active");
        },
        itemMargin: 5
    });
}

initGame();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:17:35.757

目前你已经在函数中编写了`flexslider`代码`$(document).ready`

您必须在动态加载内容后编写以下代码

```
$('.sc-stream').flexslider({
    namespace:  "sc-",
    animation:  "slide",
    selector:   ".cover-flow > li",
    slideshow:  false,
    controlNav: false,
    minItems:   1,
    itemWidth:  224,
    itemMargin: 8
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T21:28:31.020

这是一个可能的解决方案。

```
function CreateBrandsGallery() {
  $.getJSON("services/products/read.php?req=brands", function(data) {
    $.each(data.product_brand, function(i,data) {
      var box = "<li class='add-bord-left'>";
      box += "<div class='brand_carousel_box_img remove-over add-bord-radius fl_left'><a class='item_detail_box' href='products.php?req=allproducts&art="+data.brand_id+"'>";
      box += "<img src='"+data.brand_preview+"' />";
      box += "</a></div>";
      box += "</li>"
      $(box).appendTo('div.brands_gallery ul');
      setTimeout(function () { ProductSBrandsGallerySlider(); }, 500);
    });
  });   
} 
```

还有另一个功能：

```
function ProductSBrandsGallerySlider() {
  $('.brands_gallery,.products_new_gallery').flexslider({
    animation: "slide",
    animationLoop: true,
    reverse: false,
    slideshowSpeed: 7000,
    animationSpeed: 500, 
    itemWidth: 233,
    itemMargin: 0,
    minItems: 4,
    maxItems: 4,
    randomize: true,
    pauseOnHover: true,
    initDelay: 300
  });
} 
```

# java - java在maven和eclipse中与clojure混合

> ID：14110657
> 
> 赞同：3
> 
> 时间：2013-01-01T12:55:13.413
> 
> 标签：java, eclipse, maven, clojure, interop

我创建了一个示例多语言程序。我有一个用 java 实现的传感器和一个机器人，以及用 clojure 实现的 AI。我无法正确连接 Maven

```
--src/main/java/clojuretest
                          |
                           DistanceSensor.java
                           AI.clj       (uses DistanceSensor)
                           Robot.java   (uses AI) 
```

距离传感器.java：

```
package clojuretest;

public class DistanceSensor {

    public int getValue() {return 5;}
} 
```

AI.clj：

```
(ns clojuretest.AI
  (:gen-class :methods [[isObstacleAhead [] boolean]]))

(defn -isObstacleAhead [this] (< (.getValue (clojuretest.DistanceSensor.)) 10)) 
```

机器人.java：

```
package clojuretest;

public class Robot {

    public boolean shouldStop() {
        return new AI().isObstacleAhead();
    }
} 
```

我什至可以手动强制 maven 编译它： `mvn clean clojure:compile`产生错误 - 没有 DistanceSensor 类（但由于某种原因创建了 AI.class）。所以然后 `mvn compile`看到 AI.class 并正确编译所有内容并通过测试。但是我该怎么做才能`mvn clean compile`通过？我的 pom.xml 应该是什么样子？我还能做些什么来让 eclipse 停止抱怨不存在的 AI.class？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T13:51:01.223

您需要更改项目中源代码的布局。Clojure maven 插件要求，该 clojure 代码位于单独的目录中，因此您应该具有以下布局：

```
 src/
    main/
      java/
        java-code
      clojure/
        clojure code
    test/
      java/
        java tests code
      clojure/
        clojure tests code 
```

您可以在[以下文章中找到更多详细信息](http://clojure-doc.org/articles/ecosystem/maven.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:25:29.433

Java 代码和 Clojure 代码之间存在相互依赖关系。无论您首先编译哪种类型的类，都会出现错误。

由于它不是实际的循环依赖，您仍然可以通过将 Java 编译部分一分为二来解决此问题。

首先， compile `DistanceSensor`，它不依赖于其他任何东西。

其次，编译`AI`，这取决于`DistanceSensor`.

最后，编译`Robot`依赖于`AI`.

要将java编译拆分为两步，需要配置默认执行`maven-compiler-plugin`，使其[excludes](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#excludes) ，并在exclude 目标`Robot`之后添加另一个执行。您可能不得不滥用这些[阶段](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Build_Lifecycle_Basics)来正确排序三个执行。`clujure:compile``DistanceSensor`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T00:17:24.130

我认为`:gen-class`通常是代码异味，就像尝试使用`new AI()`.

这是一种可以解决循环依赖问题的替代方法：

1.  在 Java 代码中定义`AI`为 Java 接口
2.  编写一个 Clojure 函数来创建一个符合接口的实例，使用`reify`
3.  [从 Java 动态调用 Clojure 函数（例如，使用本博](http://clojurefun.wordpress.com/2012/12/24/invoking-clojure-code-from-java/)文中概述的技术）
4.  你现在有了一个 AI 接口的实例，你可以在 Java 中随意使用它

这种方法的优点是一切都会顺利进行，特别是：

*   Java 代码库可以独立于 Clojure 代码进行编译
*   Clojure 代码库可以访问所有已定义的 Java 类和接口
*   您不需要任何特殊的 IDE / Maven 配置。实际上，您可以将 is 视为恰好包含`clojure.jar`为依赖项的常规 Java 应用程序。

# c# - PerformanceCounterType.NumberOfItems32 最后一分钟计数

> ID：14110658
> 
> 赞同：0
> 
> 时间：2013-01-01T12:55:27.390
> 
> 标签：c#, .net, wmi, system.diagnostics

如何计算最后一分钟的总增量？

```
 //Create Counter
        CounterCreationDataCollection counter = new CounterCreationDataCollection();

        CounterCreationData total = new CounterCreationData();
        total.CounterName = "totalOps";
        total.CounterType = PerformanceCounterType.NumberOfItems32;
        counter.Add(total); 
```

# sharepoint - 共享点服务器名称更改 - 所有站点都已关闭

> ID：14110662
> 
> 赞同：0
> 
> 时间：2013-01-01T12:56:32.060
> 
> 标签：sharepoint, windows-server-2008

我在sharepoint stackexchange中问过同样的问题，但我没有得到任何回复，所以也在这里问。请帮忙。

我们在 2008 服务器机器上安装了 sharepoint server 2013 并配置了几个站点。几天后，服务器名称已更改。（例如：servername1 到 servername2）。

因此，当我转到数据库时，实例名称也更改为 servername2 和 IIS。

但是当我使用最新的服务器名运行共享点站点 url 时，它在数据库中显示错误。请从 sharepoint 产品配置。然后我尝试使用最新的 sql server 实例和数据库作为 server_config db 启动配置现有服务器场，但它说无法继续。

你能帮我解决这个问题吗，因为我们不想丢失我们之前配置的站点。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:03:09.303

尝试这个：

```
stsadm -o renameserver -oldservername oldservername -newservername newservername 
```

# ios - 我可以将我的应用程序的 SQLite 数据库备份到 iCloud 吗？

> ID：14110663
> 
> 赞同：2
> 
> 时间：2013-01-01T12:56:36.387
> 
> 标签：ios, icloud

我想在我的应用程序中有一个“备份”和“恢复”按钮，它只是将整个 SQLite 数据库作为 blob 复制到 iCloud。数据库总是很小，因为它只包含手工输入的信息。

这可以使用 iCloud 还是我需要创建一个外部服务来管理它？

（如果重要的话：我的应用程序是使用 NimbleKit 框架和 jQuery Mobile UI 创建的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:06:29.130

答：有可能。

[iCloud + iPhone Documents 文件夹中的媒体存储](https://stackoverflow.com/questions/7762743/icloud-storage-of-media-in-iphone-documents-folder)& [iCloud 是否会同步所有应用程序的 Document 文件夹中的文件？](https://stackoverflow.com/questions/8752513/will-icloud-sync-the-files-in-document-folder-of-all-apps)

# haskell - Traversables 真的需要“从左到右”遍历吗？

> ID：14110671
> 
> 赞同：8
> 
> 时间：2013-01-01T12:58:06.663
> 
> 标签：haskell

我有一个像下面这样的无限结构（使用[流包中的](http://hackage.haskell.org/package/streams)[Stream](http://hackage.haskell.org/packages/archive/streams/3.0/doc/html/Data-Stream-Infinite.html)类型）：

```
data U x = U (Stream x) x (Stream x) deriving (Functor,Foldable) 
```

我想为它提供一个 Traversable 实例，如下所示：

```
instance Traversable U where
    traverse f (U lstream focus rstream) = 
        let pairs =  liftA unzip 
                   . sequenceA . fmap (traversepair f) 
                   $ zip lstream rstream 
            traversepair f (a,b) = (,) <$> f a <*> f b
            rebuild c (u,v) = U u c v
        in rebuild <$> f focus <*> pairs 
```

[Data.Traversable](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Traversable.html)的文档说它们代表“可以从左到右遍历的数据结构类”。但是我的定义不是从左到右遍历，而是*向外*遍历。我必须以这种方式定义它，以便在涉及[Rand](http://hackage.haskell.org/packages/archive/MonadRandom/0.1.8/doc/html/Control-Monad-Random.html#t%3aRand) monad的[序列](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-Traversable.html#v%3asequence)操作之后能够在两侧延迟提取值。

它仍然是一个有效的定义吗？我注意到[Traversable 的 Typeclassopedia 条目](http://www.haskell.org/haskellwiki/Typeclassopedia#Traversable)没有说任何关于“从左到右”的内容，它只讨论了“交换两个函子”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T14:01:09.233

根据[这个线程](http://comments.gmane.org/gmane.comp.lang.haskell.libraries/17778)，法律应该是：

1.  `traverse Identity == Identity`
2.  `traverse (Compose . fmap g . f) == Compose . fmap (traverse g) . traverse f`

这两条定律确保遍历结构中的每个元素都被遍历一次。以哪个顺序无关紧要。您甚至可以说一个`Traversable`实例*定义*了从左到右对于该特定数据类型的含义。

文档中还有另外两个要求：

*   在这种`Functor`情况下，`fmap`应该等价于使用身份应用函子 ( `fmapDefault`) 进行遍历。
*   在该`Foldable`实例中，`foldMap`应该等效于使用常量应用函子 ( `foldMapDefault`) 进行遍历。

在上面的代码中，您打破了第二个要求，因为您正在派生`Foldable`，它将以与您的`Traversable`实例不同的顺序访问元素。`Foldable`为`foldMapDefault`修复该问题创建您自己的实例。

顺便说一句，`sequenceA . fmap (traversepair f)`是`traverse (traversepair f)`。

# django - 覆盖 ForeignKey 字段

> ID：14110673
> 
> 赞同：1
> 
> 时间：2013-01-01T12:58:14.313
> 
> 标签：django, django-models

使用下面的 django 文档示例，如果我有类似的模型设置，它将看起来像这样。但是查看专辑应用程序，它可以用于我的其他事情，如果我创建了一个新的应用程序摄影师，对我来说问题将是 ForeignKey添加专辑我将如何实现这一点，专辑对不同的人或背景意味着不同的事物

```
class Musician(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    instrument = models.CharField(max_length=100)

class Album(models.Model):
    artist = models.ForeignKey(Musician)
    name = models.CharField(max_length=100)
    release_date = models.DateField()
    num_stars = models.IntegerField()

class Photographer(models.Model):
    # some stuff here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:05:31.567

将对象与任何其他对象相关联的一种方法是使用通用关系。

有关如何完成此操作的示例，请参见：[https ://docs.djangoproject.com/en/1.4/ref/contrib/contenttypes/#generic-relations。](https://docs.djangoproject.com/en/1.4/ref/contrib/contenttypes/#generic-relations)

泛型很好，因为你可以避免具体的继承，除非你需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:05:31.953

您可以使用简单的模型继承来执行此操作，如下所示：

```
class Musician(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    instrument = models.CharField(max_length=100)

class Photographer(models.Model):
    # some stuff here    

class Album(models.Model):
    name = models.CharField(max_length=100)
    release_date = models.DateField()
    num_stars = models.IntegerField()

class PhotoAlbum(Album):
    artist = models.ForeignKey(Photographer)

class MusicAlbum(Album):
    artist = models.ForeignKey(Musician) 
```

# java - 要文件传输的对象数组

> ID：14110676
> 
> 赞同：0
> 
> 时间：2013-01-01T12:58:54.890
> 
> 标签：java

我需要将存储在数组中的数据传输到一个文件中，在这种情况下我创建为 emplo.dat。我找不到正确的方法来做到这一点。使用 readObject 传输对象不起作用，因为它是一个对象数组。

```
import java.io.*;
import employee.*;

public class ClearTechSolutions {
    public static void main(String[] args) {
        ContractEmployee[] con = new ContractEmployee[3];
        PermanentEmployee[] per = new PermanentEmployee[3];

        for(int i=0;i<3;i++) {
            con[i] = new ContractEmployee();
            per[i] = new PermanentEmployee();
        }

        con[0].setData( "C001", "Mohan", "E-32 M.G Marg", "30/Jun/1974", 0.0f, 1000.0f, 0.0f,     5000.0f, 20, 7);
        con[1].setData( "C002", "Steve", "A-32 M.G. Marg", "15/Oct/1981", 0.0f, 1500.0f, 0.0f,     7500.0f, 22, 3);
        con[2].setData( "C003", "Mary", "A-31 Rohini", "15/Dec/1979", 0.0f, 2500.0f, 0.0f, 10000.0f,     18, 5);
        per[0].setData( "E001", "Bob", "E-12 Lajpat Nagar", "01/Feb/1974", 0.0f, 20000.0f, 0.0f,     800000.0f, 7, 28);
        per[1].setData( "E002", "Kevin", "E-15 Mandir Marg", "01/Apr/1990", 0.0f, 25000.0f, 0.0f,     1000000.0f, 6, 26);
        per[2].setData( "E003", "Mohan", "E-15 Mandir marg", "31/July/1984",0.0f, 10000.0f, 0.0f,     400000.0f,9,30);
        con[0].calc(1000.0f);
        con[1].calc(1500.0f);
        con[2].calc(2500.0f);
        per[0].calc(20000.0f);
        per[1].calc(25000.0f);
        per[2].calc(10000.0f);

        try {
            File file = new File("emplo.dat");
            file.createNewFile();
            FileOutputStream fi = new FileOutputStream(file);
            ObjectOutputStream obj = new ObjectOutputStream(fi);

            for(int i=0;i<3;i++) {
                System.out.println("\n");
                System.out.println("The details for Contract Employee "+(i+1)+" are:");
                con[i].print();
            }
            for(int i=0;i<3;i++) {
                System.out.println("\n");
                System.out.println("The details for Permanent Employee "+(i+1)+" are:");
                per[i].print();
            }
        }
        catch(IOException e) {}
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:44:58.257

正如 ethrbunny 所建议的，您可能应该了解更多关于序列化的信息。

对于有问题的问题，您应该

1.  确保类 ContractEmployee 和 PermanentEmployee 都实现了 Serializable 接口。
2.  使用您创建的 ObjectOutputStream "obj" 实例，调用`obj.writeObject(con)`或 `obj.writeObject(per)`将数组中保存的所需数据写入文件。

请注意，您将一组对象写入文件，而不是一个一个地写入单个对象。所以期望在反序列化时也能取回一组对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:48:34.417

```
 import java.io.*;
    import employee.*;

    public class ClearTechSolutions {
        public static void main(String[] args) {
            ContractEmployee[] con = new ContractEmployee[3];
            PermanentEmployee[] per = new PermanentEmployee[3];

            for(int i=0;i<3;i++) {
                con[i] = new ContractEmployee();
                per[i] = new PermanentEmployee();
            }

            con[0].setData( "C001", "Mohan", "E-32 M.G Marg", "30/Jun/1974", 0.0f, 1000.0f, 0.0f,     5000.0f, 20, 7);
            con[1].setData( "C002", "Steve", "A-32 M.G. Marg", "15/Oct/1981", 0.0f, 1500.0f, 0.0f,     7500.0f, 22, 3);
            con[2].setData( "C003", "Mary", "A-31 Rohini", "15/Dec/1979", 0.0f, 2500.0f, 0.0f, 10000.0f,     18, 5);
            per[0].setData( "E001", "Bob", "E-12 Lajpat Nagar", "01/Feb/1974", 0.0f, 20000.0f, 0.0f,     800000.0f, 7, 28);
            per[1].setData( "E002", "Kevin", "E-15 Mandir Marg", "01/Apr/1990", 0.0f, 25000.0f, 0.0f,     1000000.0f, 6, 26);
            per[2].setData( "E003", "Mohan", "E-15 Mandir marg", "31/July/1984",0.0f, 10000.0f, 0.0f,     400000.0f,9,30);
            con[0].calc(1000.0f);
            con[1].calc(1500.0f);
            con[2].calc(2500.0f);
            per[0].calc(20000.0f);
            per[1].calc(25000.0f);
            per[2].calc(10000.0f);

            try {
                File file = new File("emplo.dat");
                file.createNewFile();
                FileOutputStream fi = new FileOutputStream(file);
                ObjectOutputStream obj = new ObjectOutputStream(fi);

                for(int i=0;i<3;i++) {
                    System.out.println("\n");
                    System.out.println("The details for Contract Employee "+(i+1)+" are:");
                    con[i].print();
obj.writeObject(con[i]);                <-- this will write your object to file connected to file output stream.
                }
                for(int i=0;i<3;i++) {
                    System.out.println("\n");
                    System.out.println("The details for Permanent Employee "+(i+1)+" are:");
                    per[i].print();
obj.writeObj(per[i]);
                }
            }
            catch(IOException e) {}
        }
    } 
```

从文件中读取

```
ObjectInputStream ois=new ObjectInputStream(fin);
 abc temp; 
  while((temp=(abc)ois.readObject()))
{
  System.out.println(temp);
  } 
```

这里 abc 是您要检索其对象的类名。fin 在文件输入流对象中。

# regex - 限制 TextBoxField 在 BlackBerry 中仅接受数值

> ID：14110681
> 
> 赞同：0
> 
> 时间：2013-01-01T13:00:00.660
> 
> 标签：regex, blackberry, java-me

如何限制 BlackBerry 中的 TextBoxField 只接受数值。我是 BB 世界的新手，想知道在 asp.net 中是否有任何可以与 BB 一起使用的控件，例如 NumericTextbox？同样从我通过一些博客和文档阅读的内容来看，BB 不支持正则表达式。那么，如果没有 Regex，我该如何实现呢？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:44:02.107

使用[BasicEditField](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/component/BasicEditField.html)或其任何子类，在构造函数的样式参数中包含[FILTER_NUMERIC ：](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/component/BasicEditField.html#FILTER_NUMERIC)

```
BasicEditField numericField = new BasicEditField(FILTER_NUMERIC); 
```

有关使用文本过滤器的更多信息，请参阅[这篇文章](http://www.hrbuckley.net/2010/12/fun-with-text-filters.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T14:40:36.873

你可以在javascript中检查这个

```
<script language=Javascript>
      function isNumberKey(evt)
      {
         var charCode = (evt.which) ? evt.which : event.keyCode
         if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;

         return true;
      }
</script>

<html> 
    <body>
        <form action="url" method="get/post">
            <input id="txtChar" onkeypress="return isNumberKey(event)" type="text" name="txtChar" />
            <input type="submit" name="submit" value="Submit" />
        </form>
    </body>
</html> 
```

# javascript - 如何在使用 setInterval 循环的同时使用 HTML 画布和 javascript 定义局部变量？

> ID：14110682
> 
> 赞同：0
> 
> 时间：2013-01-01T13:00:20.490
> 
> 标签：javascript, canvas, html5-canvas, setinterval

我正在使用 HTML 画布编写一个简单的游戏并使用 JavaScript 对其进行编辑。我有几个在画布上绘制东西的函数，所有这些函数都使用单个 setInterval 循环。然而，其中一些函数需要有一个局部变量，该变量包含该函数的某个属性（准确地说，一个切换，一个函数是否为“xx”），并且由于这些函数中有很多，存储这个全局窗口中的变量是非常不实用的。

有没有一种方法可以在此函数中定义变量（或属性），而无需在每个循环中都重置此变量？

所以在代码中我有：

```
var DoSomething = function(){
var xx = new Boolean
[...]
if (condition) { xx = false}
if (condition) { xx = true}
} 
```

并且全部在主循环中执行：

```
var gameLoop = function(){
DoSomething()
OtherFunctions()
}

var startGame = function(){
setInterval(gameLoop,10)
}

startGame() 
```

就像我说的，在全局窗口中定义是非常不切实际的，因为这个属性/变量`xx`有很多函数。`xx`但是现在，循环`xx`在循环开始时不断重置。有没有办法在这里定义局部变量，而不用 setInterval 的每个循环来重置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:17:51.273

通过将代码包装在一个函数中，该函数中的所有内容都会对世界其他地方隐藏起来。所以现在你可以在你的函数之外声明变量，它们将保持私有并且只能由你的程序访问。

```
(function() {
    var xx = new Boolean,
        loop;

    var DoSomething = function() {
      // xx will now keep it's state
        if (condition) { xx = false; }
    }

    var gameLoop = function() {
        DoSomething();
        OtherFunctions();
    }

    var startGame = function() {
        loop = setInterval(gameLoop, 10);
    }
}()); 
```

最后的额外括号使函数立即调用自身，因此一旦加载脚本，函数就会运行

```
e.g function() {<code>}() 
```

我建议阅读原型继承并使用它来创建类来表示游戏中的对象。这是在 javascript 中开始使用 OOP 的好方法。

[https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)

还要阅读闭包以更好地理解上述示例的工作原理。[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

# javascript - 如何停止“SetInterval”

> ID：14110683
> 
> 赞同：-1
> 
> 时间：2013-01-01T13:00:31.947
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T13:01:55.667

```
var interval = setInterval(function() {
    if($('#iframe1').is(':visible')) {

    } else {
        clearInterval(interval);
    }
}, 200); 
```

参考：[https ://developer.mozilla.org/en-US/docs/DOM/window.clearInterval](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T13:03:52.453

[`setInterval`](https://developer.mozilla.org/en/DOM/window.setInterval)返回一个句柄，您可以在其中使用[`clearInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)：

```
var timerHandle = setInterval(function () {
    if ($('#iframe1').is(':visible')) {

    } else {
        clearInterval(timerHandle);
    }
}, 200); 
```

这也适用于[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout).

# python - Django sweetpie 嵌套到多字段分页

> ID：14110694
> 
> 赞同：1
> 
> 时间：2013-01-01T13:02:32.040
> 
> 标签：python, django, tastypie

我有这个美味的资源：

```
class BlogPostResource(ModelResource):
    comments = fields.ToManyField('comments.api.CommentResource', 'comments', full=True) 
```

博客端点`/api/v1/blog/13`返回以下响应：

```
{
  id: 13,
  text: 'blog example',
  comments: [{id: 1, comment: "1"},{id: 2, comment: "2"}, ...]
} 
```

我期待评论会像这样分页：

```
{
  id: 13,
  text: 'blog example',
  comments:{
    meta: {
      limit: 20,
      next: "/api/v1/comment/?offset=20&limit=20&format=json", 
      offset: 0,
      previous: null,
      total_count: 36
    },
    objects: [{id: 1, comment: "1"},{id: 2, comment: "2"}, ...]
  }
} 
```

如何使评论分页以获得我所期望的响应？

# ruby - 可枚举改变了我的 `to_json` 行为

> ID：14110698
> 
> 赞同：1
> 
> 时间：2013-01-01T13:03:01.917
> 
> 标签：ruby, json, ruby-on-rails-3.2, ruby-1.9.3, enumerable

我有一个 Rails 应用程序和一个我作为其中一部分编写的类（不是 ActiveRecord 或任何东西..）。数据存储在简单的实例变量中（字符串、整数、数组...）

当我调用`to_json`它的一个实例时，我得到了我期望的结果。一个 JSON 对象，也包含所有实例变量作为 JSON 对象。

但是，当我添加`include Enumerable`到类定义中时，行为发生了`to_json`变化，我得到了一个空对象：`"[]"`

知道为什么吗？是否`Enumerable`以某种方式定义或取消定义影响的东西`to_json`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:45:49.300

所以，会发生什么：

Rails 在 ActiveSupport 中加载。ActiveSupport 将这些`as_json`方法注入（猴子补丁）到几个类和模块中，包括`Enumerable`：

```
module Enumerable
  def as_json(options = nil) #:nodoc:
    to_a.as_json(options)
  end
end 
```

`each`对于Enumerable 要求您拥有的方法，您可能没有返回任何内容，因此`to_a`返回`[]`，并且一个空数组被转换为 String `"[]"`。

你可以在这里做的，是将你的对象绑定到一个不可枚举的继承类中，并使用它的`.as_json`方法。

像这样：

```
class A
  def as_json(*)
    Object.instance_method(:as_json).bind(self).call
  end  
end 
```

演示：

```
➜ pry
require 'active_support/all'
=> true

class A
  def initialize
    @a = 1
  end  
end  
=> nil

A.new.to_json
=> "{\"a\":1}"

class A
  include Enumerable
  def each
  end
end
=> nil

A.new.to_json
=> "[]"

class A
  def as_json(*)
    Object.instance_method(:as_json).bind(self).call
  end  
end  
=> nil

A.new.to_json
=> "{\"a\":1}" 
```

# javascript - 在线可读性服务？

> ID：14110699
> 
> 赞同：1
> 
> 时间：2013-01-01T13:03:05.333
> 
> 标签：javascript, api, readability

是否有任何 Web API 接受 URL 并返回该页面的可读内容？或者是否有任何 javascript 库可以做到这一点？

无法安装 node.js 或任何服务器端应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:08:28.937

这实际上是一个非常困难的问题。此类问题通常意味着您希望排除侧边栏和类似的“噪音”元素。这通常通过机器学习计算机领域内的不同训练集来解决，而且开发起来并不容易。

话虽如此 - 看看：

*   [http://www.alchemyapi.com/api/scrape/](http://www.alchemyapi.com/api/scrape/)
*   [http://www.readability.com/developers/api](http://www.readability.com/developers/api)
*   [http://www.diffbot.com/](http://www.diffbot.com/)

这应该可以帮助您充分了解空间，以便更好地搜索您的问题域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:15:12.550

我想你可以在 Mashape (http://www.mashape.com/) 上找到一些相关的服务。

搜索“文本”。像这样：[https ://www.mashape.com/search?query=text](https://www.mashape.com/search?query=text)

那里有几个 NLP / 分析提供商，其中大多数是免费增值的。

OTOH，还有一个名为boilerpipe的项目。您可以在以下 URL 测试其质量：

[http://boilerpipe-web.appspot.com/](http://boilerpipe-web.appspot.com/)

# python - 使用 matplotlib 从 TeX 创建数学表达式的图像

> ID：14110709
> 
> 赞同：2
> 
> 时间：2013-01-01T13:04:31.140
> 
> 标签：python, image, matplotlib, equation, tex

使用 python 库 matplotlib，我找到了建议解决这个问题的方法：
[Displaying (nicely) an algebraic expression in PyQt](https://stackoverflow.com/questions/14097463/displaying-nicely-an-algebraic-expression-in-pyqt) by using matplotlibs [TeX markup](http://matplotlib.org/users/mathtext.html)。

我想做的是从我的 python 程序中获取表示数学表达式的 TeX 代码，并将其保存到可以在我的 PyQt GUI 中显示的图像中，而不是用丑陋的纯文本显示方程。

本质上是这样的......

```
import matplotlib.pyplot as plt
formula = '$x=3^2$'

fig = plt.figure()
fig.text(0,0,formula)
fig.savefig('formula.png') 
```

但是，pyplot 模块主要用于显示图形和绘图，而不是像我需要的文本样本。该代码的结果通常是一个巨大的白色空白图像左下角的一小段文本。
如果我的公式涉及分数，因此需要向下空间，它会被截断，如下图所示。

**请注意，这显示为空白图像；查看显示的左侧**
[坐标 (0,0) 处的分数被截断并被空格包围](https://i.stack.imgur.com/gbxek.png)

我相信我可以创建一个非常大（空间明智）的图形，在空白图的中间写下公式，保存它，然后使用像素分析将其修剪为尽可能小的图像，但这似乎相当粗糙。

绘图是 matplotlib 的唯一预期输出吗？
有没有专门用于输出方程的东西，不需要我担心文本的所有额外空间或位置？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T18:54:26.057

诀窍是渲染文本，然后获取它的边界框，最后调整图形大小和文本在新图形中的垂直位置。这将图形保存了两次，但在任何文本引擎中都很常见，只有在文本渲染后才能正确获得正确的边界框和其他参数。

```
import pylab

formula = r'$x=3^2, y = \frac{1}{\frac{2}{3}}, %s$' % ('test' * 20)

fig = pylab.figure()
text = fig.text(0, 0, formula)

# Saving the figure will render the text.
dpi = 300
fig.savefig('formula.png', dpi=dpi)

# Now we can work with text's bounding box.
bbox = text.get_window_extent()
width, height = bbox.size / float(dpi) + 0.005
# Adjust the figure size so it can hold the entire text.
fig.set_size_inches((width, height))

# Adjust text's vertical position.
dy = (bbox.ymin/float(dpi))/height
text.set_position((0, -dy))

# Save the adjusted text.
fig.savefig('formula.png', dpi=dpi) 
```

`0.005`常数被添加到`width`并且因为，显然，对于某些文本，`height`Matplotlib 返回一个略微低估的边界框，即小于所需的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T04:18:31.237

可以使用和指定合理的对齐方式正确放置图中`figure.suptitle`的文本，以便文本位于左上角并向下和向右延伸（相对于指定的 x 和 y 坐标）。

```
fig = plt.Figure()
fig.suptitle('TeX', 
             horizontalalignment = 'left',
             verticalalignment='top', 
             x=0.01, y = 0.99) 
```

它可以包装在一个 Qt Widget 中，`FigureCanvasQTAgg`以在程序中显示。

```
canvas = FigureCanvasQTAgg(fig) #Treated as QWidget
canvas.draw() 
```

但是，画布和图形仍然不知道文本的大小，因此仍然可能太大而导致空白，或者太小而导致截断。这对我的程序来说很好，但不像 mmgp 那样满足问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T17:13:50.417

关于什么

```
import matplotlib.pyplot as plt

params = {
      'figure.figsize': [2,2],
     }
plt.rcParams.update(params)

formula = r'$x=\frac{3}{100}$'

fig = plt.figure()
fig.text(0.5,0.5,formula)

plt.savefig('formula.png') 
```

matplotlib text() 函数的前两个参数设置文本的位置（介于 0 和 1 之间，因此两者的 0.5 使您的文本位于中间。）

您可以通过设置 rc 参数来更改字体和文本大小等各种内容。请参阅[http://matplotlib.org/users/customizing.html](http://matplotlib.org/users/customizing.html)。我已经编辑了图形大小的 rc 参数，但是您可以更改默认值，因此您不必每次都这样做。

# android - Android：将图像保存到 Sqlite 数据库

> ID：14110710
> 
> 赞同：5
> 
> 时间：2013-01-01T13:04:35.310
> 
> 标签：android, image, sqlite, caching

我想知道在 sqlite 数据库中将图像存储为 BLOB 是否是个好主意？有没有人有性能 - 存储图像（blob）的经验。

我的 android 应用程序很小，需要处理 20 到 100 张图像（每张图像 100 kb 到 1MB）。最坏的情况：我会说，我的数据库可能达到 100 MB 的大小。这对数据库性能有显着影响吗？平均情况：我猜我的应用程序的平均用户有 40 张图片，每张图片 200 kb，因此数据库的大小约为 8 MB。顺便提一句。当然，数据库还存储其他“正常”数据，因此它不仅仅是图像数据库:)

存储存储在存储（内部或 SD 卡）上的图像的路径是更好的方法吗？我想从数据库中检索图像文件路径并从文件中打开和加载图像会有点慢（但不是很重要，因为我一次只需要加载两个图像）。

第二个问题：如果我使用第二种方法（将图像文件的路径存储在数据库中并加载图像文件）：磁盘缓存（DiskLruCache）在这种情况下有用吗？它会带来显着的性能提升吗？我的理解是磁盘缓存将存储位图（而不是编码的 jpg 或 png），因此磁盘缓存将直接从存储加载位图，我的应用程序将节省解码图像（jpg 或 png）的时间。那是对的吗？顺便提一句。在“数据库方法”中，我会将已经解码的图像存储为位图。所以在我看来，它与磁盘缓存类似，不是吗？

编辑：我忘了告诉你，我需要将图像持久存储在设备上。我不是在谈论缓存图像，例如我从 Web 服务中检索到的图像......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T13:14:38.243

我的猜测是，如果你在其中存储这么多信息，数据库会变得非常慢，尤其是当你自己检索图像时。

另一方面，据我所知，每个用户在安装应用程序后都会下载与他相关的图像。这是使用另一个 SO 用户在我几天前提出的问题中向我推荐的库的理想场所：[Universal Image Downloader](https://github.com/nostra13/Android-Universal-Image-Loader)。这是我所说[的线程的链接。](https://stackoverflow.com/questions/13933529/design-of-list-view-lazy-loading-images-component)

该库用于磁盘缓存，但为您抽象了所有复杂性（希望我还没有尝试过，但它看起来很有希望）。

# regex - 匹配“”之间的空格

> ID：14110713
> 
> 赞同：1
> 
> 时间：2013-01-01T13:05:14.653
> 
> 标签：regex

我想匹配包含以下内容的文本：
`MyValue="{NON_SPACEs}{SPACE_ONE_OE_MORE}{NON_SPACEs}"`

图案：

> MyValue="(\S*)(\s+)(\S*)"

文本示例：

`sometext` `MyValue="val1 val2"` `sometext="xyz"`

我的模式也匹配的问题：

`sometext` `MyValue="val1val2"` `sometext="xyz"` （val1 和 val2 之间没有空格）

我用它来测试：[http ://regexpal.com/](http://regexpal.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:11:12.613

将您的非空格字符限制为非引号：

```
MyValue="([^\s"]*)(\s+)([^\s"]*)" 
```

此正则表达式不会尝试跨越多个引用值。

考虑删除部分或全部这些括号，尤其是在空格周围，除非您*需要*捕获一个组。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-01T13:17:13.847

这就是您要查找的内容：

```
using System;
using System.Text.RegularExpressions;

namespace ConsoleApplication1
{
  class Program
  {
    static void Main(string[] args)
    {
      string txt="abc xyz";

      string re1=".*?"; // Non-greedy match on filler
      string re2="(\\s+)";  // White Space 1

      Regex r = new Regex(re1+re2,RegexOptions.IgnoreCase|RegexOptions.Singleline);
      Match m = r.Match(txt);
      if (m.Success)
      {
            String ws1=m.Groups[1].ToString();
            Console.Write("("+ws1.ToString()+")"+"\n");
      }
      Console.ReadKey();
    }
  }
} 
```

希望能帮助到你 ：）

# php - 如何检测 ajax 请求的 php 服务器超时？

> ID：14110718
> 
> 赞同：3
> 
> 时间：2013-01-01T13:05:36.823
> 
> 标签：php, javascript, ajax

我想知道假设您对运行 PHP 代码的页面执行了 ajax 请求。该页面输出了一些数据（使用 flush() 方法或其他方法），但由于 30 秒超时或其他错误，php 请求结束。

现在，当请求结束时，我想在客户端了解它并重新启动请求。

即假设我有这样的东西

```
xmlhttp.onreadystatechange=function(){
    if(xmlhttp.readyState==3 && xmlhttp.status==200){
    document.getElementById("A").innerHTML=xmlhttp.responseText;
    }
    else if(xmlhttp.readyState==4 && xmlhttp.status==200){
    document.getElementById("A").innerHTML=xmlhttp.responseText;
    //plus some additional code to end the process
    }
    else if(xmlhttp.status== SOMETHING /*WHAT DO I ADD HERE TO KNOW THAT THE SERVER HAS TIMED OUT OR SOMETHING SO I CAN RESTART THE XMLHTTP CYCLE */){
    //code to resend xmlhttp request.
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:17:29.080

我使用的一种策略是在 JS 中设置一个计时器，如果调用成功则将其清除。

```
var myTimer = setTimeout(stuffToDoOnFailure, 6000); // 6 secs

ajaxCall(function callBack() {
    clearTimeout(myTimer);
}); 
```

编辑：

当然，如果 ajax 调用在 6 秒后成功，您可能最终会同时`stuffToDoOnFailure`执行这两个`callBack`操作，因此您想以某种方式处理这种情况。不过，这取决于您的应用程序。

# php - 获取用户在排行榜中的位置？

> ID：14110719
> 
> 赞同：1
> 
> 时间：2013-01-01T13:05:38.093
> 
> 标签：php, mysql, sql

我正在制作这个游戏排行榜，并试图在这个排行榜中获得特定用户的位置。我试过这个但没有运气：

```
SELECT SUM(points) as points 
FROM publicpoints 
GROUP BY fk_player_id 
WHERE points > (SELECT SUM(points) as points 
                FROM publicpoints 
                WHERE fk_player_id = $playerid) 
```

我该怎么办？

- - - - - - - - 编辑 - - - - - - - - -

我也试过这样，但仍然没有运气，但也许这澄清了我试图完成的事情：

```
$sql = mysql_query("SELECT SUM(points) mypoints FROM ".$prefix."_publicpoints WHERE fk_player_id=$playerid");
$row = mysql_fetch_assoc($sql);

$mypoints = $row['mypoints'];

$sql = mysql_query("SELECT SUM(points) as points FROM ".$prefix."_publicpoints 
                        WHERE points < $mypoints
                    GROUP BY fk_player_id");
$row = mysql_fetch_assoc($sql);

$rank = mysql_num_rows($sql);

if(!empty($mypoints)){
    $rank = $row['rank']+1;
} else {
    $rank = 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T13:06:48.787

`WHERE`子句必须在`GROUP BY`子句之前，如下所示：

```
SELECT 
  SUM(points) as points 
FROM publicpoints 
WHERE fk_player_id = $playerid
GROUP BY fk_player_id; 
```

然后你可以使用`ORDER BY`with`LIMIT`来获得一个特定的`Points`位置：

```
SELECT 
  SUM(points) as points 
FROM publicpoints 
WHERE fk_player_id = $playerid
GROUP BY fk_player_id
ORDER BY points
LIMIT 1 -- for top 1; 
```

* * *

**更新：**要获得比当前用户得分更高的用户数，您可以这样做：

```
SELECT COUNT(*) AS NumberOfPlayers
FROM
(
    SELECT 
       fk_player_id
    FROM points 
    GROUP BY fk_player_id
    HAVING SUM(points) > (SELECT SUM(points)
                          FROM points 
                          WHERE fk_player_id = 5)
) t; 
```

如果你想获得那些比当前用户得分更高的玩家，你可以这样做：

```
SELECT 
   fk_player_id
FROM points 
GROUP BY fk_player_id
HAVING SUM(points) > (SELECT SUM(points)
                      FROM points 
                      WHERE fk_player_id = 5); 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/09050/15)

# c - SetWindowLongPtr 似乎不起作用

> ID：14110720
> 
> 赞同：0
> 
> 时间：2013-01-01T13:05:40.147
> 
> 标签：c, winapi, subclass, setwindowlong

*我试图子类化另一个窗口（在另一个进程中），所以我注入了一个调用 SetWindowLongPtr 的 dll，但它失败了，GetLastError 返回 5。*

```
BOOL APIENTRY DllMain (HANDLE hDll, DWORD dwReason, LPVOID lpReserved)
{
    switch (dwReason)
    {
        case DLL_PROCESS_ATTACH:
        {
            HWND hwnd = GetHwndProc();

            if (!(orgWndProc = (WNDPROC)SetWindowLongPtr(hwnd, GWLP_WNDPROC, (LONG_PTR)SubclassProc)))
            {
                char buf[40];
                sprintf(buf, "Error code: %d", GetLastError());
                MessageBox(hwnd, buf, "Error", MB_OK);
            }   
            break;
        }
    }
    return TRUE;
} 
```

编辑：它绝对是正确的 PID。

编辑 2：**我得到了错误的 HWND**，但现在已修复（也编辑了代码） **我不再收到错误 5（来自 GetLastError）**

```
 HWND GetHwndProc()
{
    HWND hwnd = GetTopWindow(NULL);
    DWORD currentPID = GetCurrentProcessId();
    do
    {
        char title[256];
        if ((GetWindowText(hwnd, title, 256) > 0) && (IsWindowVisible(hwnd)))
        {
            DWORD procId;
            GetWindowThreadProcessId(hwnd, &procId);

            if (procId == currentPID)   
            {
                MessageBox(hwnd, title, "", MB_OK);
                return hwnd;
            }
        }

        hwnd = GetNextWindow(hwnd, GW_HWNDNEXT);
    } while (hwnd);
}

WNDPROC orgWndProc;
LRESULT APIENTRY SubclassProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch (msg)
    {
        case WM_LBUTTONDOWN:
            MessageBox(0, "Subclass", "", 0);
            return TRUE;

        default:
            return CallWindowProc(orgWndProc, hwnd, msg, wParam, lParam);
    }
} 
```

感谢您的阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T13:08:37.970

您需要`SetWindowSubclass`从创建窗口的线程调用，与之关联的消息队列在该线程中运行。从`SetWindowSubclass` [参考](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762102%28v=vs.85%29.aspx)：

> **警告** 您不能使用子类化辅助函数跨线程对窗口进行子类化。

反过来`SetWindowLongPtr`，必须从创建窗口的进程中调用。从`SetWindowLongPtr` [参考](http://msdn.microsoft.com/en-us/library/ms644898%28VS.85%29.aspx)：

> **Windows XP/2000** :`SetWindowLongPtr`如果 hWnd 参数指定的窗口与调用线程不属于同一进程，则函数失败。

还有*用户界面特权隔离*，它进一步限制了访问。

# python - 如何更改 Pandas 数据框索引值？

> ID：14110721
> 
> 赞同：17
> 
> 时间：2013-01-01T13:05:42.883
> 
> 标签：python, pandas

我有一个`df`：

```
>>> df
                   sales     cash
STK_ID RPT_Date                  
000568 20120930   80.093   57.488
000596 20120930   32.585   26.177
000799 20120930   14.784    8.157 
```

并希望将第一行的索引值从 更改`('000568','20120930')`为`('000999','20121231')`。最终结果将是：

```
>>> df
                   sales     cash
STK_ID RPT_Date                  
000999 20121231   80.093   57.488
000596 20120930   32.585   26.177
000799 20120930   14.784    8.157 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-01T13:40:39.977

使用此设置：

```
import pandas as pd
import io

text = '''\
STK_ID RPT_Date sales cash
000568 20120930 80.093 57.488
000596 20120930 32.585 26.177
000799 20120930 14.784 8.157
'''

df = pd.read_csv(io.BytesIO(text), delimiter = ' ', 
                 converters = {0:str})
df.set_index(['STK_ID','RPT_Date'], inplace = True) 
```

索引，`df.index`可以`MultiIndex`像这样重新分配给一个新的：

```
index = df.index
names = index.names
index = [('000999','20121231')] + df.index.tolist()[1:]
df.index = pd.MultiIndex.from_tuples(index, names = names)
print(df)
#                   sales    cash
# STK_ID RPT_Date                
# 000999 20121231  80.093  57.488
# 000596 20120930  32.585  26.177
# 000799 20120930  14.784   8.157 
```

或者，可以将索引设置为列，然后可以重新分配列中的值，然后将列返回到索引：

```
df.reset_index(inplace = True)
df.ix[0, ['STK_ID', 'RPT_Date']] = ('000999','20121231')
df = df.set_index(['STK_ID','RPT_Date'])
print(df)

#                   sales    cash
# STK_ID RPT_Date                
# 000999 20121231  80.093  57.488
# 000596 20120930  32.585  26.177
# 000799 20120930  14.784   8.157 
```

* * *

使用 IPython 进行基准测试`%timeit`表明重新分配索引（上面的第一种方法）比重新设置索引、修改列值然后再次设置索引（上面的第二种方法）要快得多：

```
In [2]: %timeit reassign_index(df)
10000 loops, best of 3: 158 us per loop

In [3]: %timeit reassign_columns(df)
1000 loops, best of 3: 843 us per loop 
```

# .net - 在 Windows Phone 8 中读取 Windows-1252 编码

> ID：14110730
> 
> 赞同：3
> 
> 时间：2013-01-01T13:07:13.693
> 
> 标签：.net, encoding, windows-phone-8, windows-1252

在 Windows 中，我可以通过 .NET 使用 Encoding.GetEncoding（“Windows-1252”）来检索“Windows-1252”代码页编码。不幸的是，此调用在 Windows Phone 8 模拟器中引发 ArgumentExtception，指定编码名称无效。我环顾了 MSDN，但没有发现任何有用的东西。有谁知道 Windows Phone 8 中可用的编码以及“Windows-1252”编码的新名称是什么？

是的，我知道使用“iso-8859-1”编码并手动替换 129-159 范围内的字符的替代选项。但如果可能的话，我会尽量避免这种情况。

非常感谢，迈克尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T13:33:41.900

我不确定这是否仍然有效，但请记住它很有用。此工具生成单字节代码页的源代码

[http://www.hardcodet.net/2010/03/silverlight-text-encoding-class-generator](http://www.hardcodet.net/2010/03/silverlight-text-encoding-class-generator)

我希望生成的源代码可以在基类库的 windows phone 子集中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T13:26:20.873

正如异常消息清楚地告诉您的那样，Windows Phone 上的框架子集不支持 Windows-1252。正如您所说，使用 Latin-1 (ISO-8859-1) 是一种方法。

或者，您可以手动实现编码，我不建议这样做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T01:47:05.083

试试 MultiByteToWideChar(Win32 API) 怎么样？

示例代码在这里。

[http://bluewatersoft.cocolog-nifty.com/blog/2012/12/windows-phone-8.html](http://bluewatersoft.cocolog-nifty.com/blog/2012/12/windows-phone-8.html)

[http://code.msdn.microsoft.com/wpapps/Windows-Phone-8-Shift-JIS-7ecd59fe/sourcecode?fileId=72228&pathId=1378915520](http://code.msdn.microsoft.com/wpapps/Windows-Phone-8-Shift-JIS-7ecd59fe/sourcecode?fileId=72228&pathId=1378915520)

这是 CP-932（Shift JIS）的样品。创建一个新的“Windows Phone 运行时组件”(C++) 项目，然后复制代码。请为您更改常量“CP_SJIS”。

另外，不知道CP-1252(Windows-1252)对WP8是否有效。

# r - 不同列表R中的行减去行

> ID：14110731
> 
> 赞同：2
> 
> 时间：2013-01-01T13:07:31.033
> 
> 标签：r

如何计算不同列表中不同行之间的差异？不同的列表有不同的维度。我使用代码如下

```
names(ri1)
[1] "Sedol" "code"  "ri"    "date"
ri1<-ri1[order(ri1$Sedol,ri1$date),]
sri<-split(ri1,ri1$Sedol)
ri1$r<-as.vector(sapply(seq_along(sri), function(x) diff(c(0, sri[[x]][,3])))) 
```

但是它显示了结果

```
"Error in `$<-.data.frame`(`*tmp*`, "r", value = list(c(100, 0.00790000000000646,  : 
replacement has 1485 rows, data has 4687655" 
```

例如

我有三个清单

1.  ```
    date  ri
    1990  1
    1991  2
    1992  3 
    ```

2.  ```
    date  ri
    1990  1
    1991  2
    1992  3
    1993  4 
    ```

3.  ```
    date  ri
    1990  1
    1991  2 
    ```

我想要这样的结果

1.  ```
    date  ri  r
    1990  1   0%
    1991  2   100%
    1992  3   100% 
    ```

2.  ```
    date  ri  r
    1990  1   0%
    1991  2   100%
    1992  3   100%
    1993  4   100% 
    ```

3.  ```
    date  ri   r
    1990  1    0%
    1991  2    100% 
    ```

注意：`r= r(t+1)/r(t)-1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:46:37.897

您应该使用 和 的组合，`head`如下`tail`所示：

```
r.fun <- function(ri) c(0, tail(ri, -1) / head(ri, -1) - 1)
lapply(sri1, transform, r = r.fun(ri)) 
```

如果您的目标是`rbind`之后重新组合 ( ) 您的数据，那么请知道您可以在一次调用中拆分/应用/组合所有内容，以从`ave`基本包或包中调用：`ddply``plyr`

```
transform(ri1, r = ave(ri, Sedol, FUN = r.fun)) 
```

或者

```
library(plyr)
ddply(ri1, "Sedol", transform, r = r.fun(ri)) 
```

*编辑：*如果您希望输出为示例中的 XX%，请替换`r.fun`为：

```
r.fun <- function(ri) paste0(round(100 * c(0, tail(ri, -1) / head(ri, -1) - 1)), "%") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:52:13.530

使用 diff 和 lapply 你可以得到类似的东西

```
# I generate some data
  dat1 <- data.frame(date = seq(1990,1999,length.out=5),ri = seq(1,10,length.out=5))
  dat2 <- data.frame(date = seq(1990,1999,length.out=5),ri=seq(1,5,length.out=5))
# I put the data.frame in a list 
  ll <- list(dat1,dat2)
 # I use lapply:
  ll <- lapply(ll,function(dat){
    # I apply the formula you give in a vector version
    # maybe you need only diff in percent?
    dat$r <- round(c(0,diff(dat$ri))/dat$ri*100)
    dat
  })
ll
[[1]]
     date    ri  r
1 1990.00  1.00  0
2 1992.25  3.25 69
3 1994.50  5.50 41
4 1996.75  7.75 29
5 1999.00 10.00 22

[[2]]
     date ri  r
1 1990.00  1  0
2 1992.25  2 50
3 1994.50  3 33
4 1996.75  4 25
5 1999.00  5 20 
```

# web-services - .NET 4.5 中的 HttpResponseMessage 发生了什么，有替代方案吗？

> ID：14110732
> 
> 赞同：4
> 
> 时间：2013-01-01T13:07:42.377
> 
> 标签：web-services, asp.net-mvc-4, asp.net-4.5

我的项目是为 .NET 4 构建的，`System.Net.Http`它引用的版本是第 2 版。我刚刚升级到 .NET 4.5，因为我想做一些[这样的路由](http://www.west-wind.com/weblog/posts/2012/Aug/21/An-Introduction-to-ASPNET-Web-API)工作，它要求我引用`System.Net.Http`我所做的程序集的第 4 版.

但是，我的 web 服务都返回一个`HttpResponseMessage`在程序集版本 4 中不存在的。

我应该如何进行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T13:14:50.240

根据 MSDN，它仍在 System.Net.Http 程序集中。确保您引用了新的 System.Net 和 System.Net.Http 程序集。

[http://msdn.microsoft.com/en-us/library/system.net.http.httpresponsemessage.aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httpresponsemessage.aspx)

我创建了一个新项目并添加了 System.Net 和 System.Net.Http 程序集，并且 HttpResponseMessage 显示得很好。

# javascript - 如果使用 iPad，请删除指向 javascript 的链接

> ID：14110733
> 
> 赞同：0
> 
> 时间：2013-01-01T13:08:06.623
> 
> 标签：javascript, html, css, ipad

如果有人从 iPad 查看网站，我将如何删除所有指向 javascript 的链接。

例如，Web 版本的头部会包含指向站点上各种内容的 js 文件的链接。

但我希望 iPad 版本删除或忽略这些链接，因此没有 js 被链接到。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:11:52.517

您可以在页面加载后在客户端加载它们，检查浏览器功能。

它们也可以通过检查用户代理来动态编写服务器端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:14:40.897

[使用它](https://stackoverflow.com/questions/4617638/detect-ipad-users-using-jquery)检测浏览器并编写代码以使用该`isiPad`变量。*这比从 html 中删除代码标签（至少没有 jQuery）*更容易。

# c - 如何通过执行 exec 终止正在运行另一个程序的子进程

> ID：14110738
> 
> 赞同：5
> 
> 时间：2013-01-01T13:08:59.540
> 
> 标签：c

我在我的主程序中执行 fork，并在子进程中执行 exec，这将运行另一个程序。现在我想终止子程序（即由 exec 调用的程序）并返回到主程序（或父程序）。我怎么能做到这一点..我尝试使用 ctrl+c 但它也杀死了父进程和子进程。请帮助我。

```
/*This is main.c*/

#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <signal.h>
#include <sys/wait.h>

void sig_int(void);
void sig_term(void);

pid_t pid,ppid;

int main(char argc,char **argv){

int n;
char ch;

printf("***********Application to start or stop services**********\n");

do
{
    printf("Enter 1 to start service no.1\n");
    printf("Enter 2 to start service no.2\n");
    printf("Enter 3 to start service no.3\n");

    scanf("%d",&n);
    if(fork() == 0)
    {
        switch(n)
        {
            case 1: printf("starting service no. 1..\n");
                printf("checking whether the given service is     already running...\n");
            //  system("./det.sh ./test")   
                pid = getpid();
                printf("child process pid = %d\n",pid);
//                  signal(SIGINT,(void *)sig_int);
//                  signal(SIGTERM,(void *)sig_term);
                  //execl("/var/vR_main","vR_main",argv[1],argv[2],argv[3],argv[4],NULL);
                execl("./test","test",0,0);//will run test.c
                break;

            case 2: printf("starting service no. 2..\n");
                break;

            case 3: printf("starting service no. 3..\n");
                break; 

        }

    }
    else
    {   
        int status;
        wait(&status);  
            if (WIFEXITED(status))
                printf("CHILD exited with %d\n", WEXITSTATUS(status));

            if (WIFSIGNALED(status))
                printf("signaled by %d\n", WTERMSIG(status));

            if (WIFSTOPPED(status))      
                printf("stopped by %d\n", WSTOPSIG(status));
//          sleep(2);
        ppid = getpid();
        printf("%d\n",ppid);
//          wait();
        printf("\nDo you want to continue...y/n:");
        scanf(" %c",&ch);
    }
}while(ch == 'y');

return 0;   

}

void sig_int(void)
{
printf("caught signal\n");
kill(pid,SIGKILL);
//  signal(SIGINT,SIG_DFL);
//  exit(0);
}

void sig_term(void)
{
printf("killing the process\n");
signal(SIGINT,SIG_DFL);
//  exit(0);
}

/*This is test.c*/

#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>
#include <signal.h>

void sig_int(void);
void sig_term(void);

pid_t pid;
int main()
{
//  int a=10,b=40,c=50,max;

    pid = getpid();
printf("exec pid = %d\n",pid);

while (1)
{

    signal(SIGINT,(void *)sig_int);
    signal(SIGTERM,(void *)sig_term);
}
//  max=a>b?a>c?a:c:b>c?b:c;
//  printf("%d\n",max);
}
void sig_int(void)
{
printf("caught signal\n");
//  signal(SIGINT,SIG_DFL);
kill(pid,SIGKILL);
//  exit(0);

}

void sig_term(void)
{
printf("killing the process\n");
signal(SIGINT,SIG_DFL);
//  exit(0);
} 
```

现在我想杀死“测试应用程序”（由 exec 调用），并返回父进程或“else 块”继续程序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-01T13:29:53.233

您需要执行以下操作：

1.  首先做 a `kill(pid, SIGTERM`) - 这让子进程有机会优雅地终止
2.  等待一段时间（使用`sleep`）。时间段取决于子进程正常关闭所需的时间。
3.  使用`waitpid(pid, &status, WNOHANG)`检查返回值。如果该过程尚未中止，请执行第 4 步
4.  做 a `kill(pid, SIGKILL`) 然后通过做来收获僵尸`waitpid(pid, &status, 0)`。

这些步骤确保您让子进程有一个信号处理程序来关闭，并确保您没有僵尸进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:11:59.197

POSIX 为此定义了[kill(2)](http://linux.die.net/man/2/kill "向进程发送信号")系统调用：

```
kill(pid, SIGKILL); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T13:12:14.200

无论是在程序内部还是外部，都可以使用`kill`. 通过包含`<signal.h>`，您可以终止具有给定 PID 的进程（使用`fork`返回值来执行此操作）。

```
#include <signal.h>

int pid;

switch (pid = fork())
{
case -1:
  /* some stuff */
  break;
case 0: 
  /* some stuff */
  break;
default:
  /* some stuff */
  kill(pid, SIGTERM);
} 
```

也可以`kill`在 shell 中使用命令。要查找子进程的 PID，可以运行`ps`命令。

> **man kill**
> 该`kill()`函数应向pid指定的一个进程或一组进程发送信号。要发送的信号由 sig 指定，可以是 in 给定列表中的一个，也可以是`<signal.h>`0。如果 sig 为 0（空信号），则执行错误检查，但实际上不发送任何信号。null 信号可用于检查 pid 的有效性。

# ruby - 使用 rspec 测试 after_create

> ID：14110746
> 
> 赞同：3
> 
> 时间：2013-01-01T13:10:13.123
> 
> 标签：ruby, ruby-on-rails-3, rspec, rspec2, rspec-rails

我的模型中有代码。

```
class Foo < ActiveRecord::Base
 after_create :create_node_for_foo

   def create_node_for_user
     FooBar.create(id: self.id)
   end
end 
```

并在 Foo 模型的 rspec 中有代码

```
describe Foo do

  let (:foo) {FactoryGirl.create(:foo)}

  subject { foo }
  it { should respond_to(:email) }
  it { should respond_to(:fullname) }

 it "have mass assignable attributes" do
  foo.should allow_mass_assignment_of :email
  foo.should allow_mass_assignment_of :fullname
 end

 it "create node in graph database" do
   foo1 = FactoryGirl.create(:foo)
   FooBar.should_receive(:create).with(id: foo1.id)
 end
end 
```

但我的测试失败并显示消息

```
Failures:

   1) Foo create node in graph database on
      Failure/Error: FooBar.should_receive(:create).with(id: foo1.id)
      (<FooBar (class)>).create({:id=>18})
       expected: 1 time
       received: 0 times 
```

可能有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T13:14:52.553

好的解决了问题

改变了这个

```
 it "create node in graph database" do
  foo1 = FactoryGirl.create(:foo)
  FooBar.should_receive(:create).with(id: foo1.id)
end 
```

到

```
 it "create node in graph database" do
  foo1 = FactoryGirl.build(:foo)
  FooBar.should_receive(:create).with(id: foo1.id)
  foo1.save
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T03:17:13.363

聚会有点晚了，但实际上上述方法行不通。您可以创建一个自定义匹配器来做到这一点：

```
class EventualValueMatcher
  def initialize(&block)
    @block = block
  end

  def ==(value)
    @block.call == value
  end
end

def eventual_value(&block)
  EventualValueMatcher.new(&block)
end 
```

然后在你的规范中做：

```
it "create node in graph database" do
  foo1 = FactoryGirl.build(:foo)
  FooBar.should_receive(:create).with(eventual_value { { id: foo1.id } })
  foo1.save
end 
```

这意味着在事实发生并且实际设置之后，模拟才会评估该块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-30T15:59:53.940

如果它对某人有帮助，Dan Draper 解决方案的更新版本使用带有块的自定义匹配器，将是这样的：

```
# spec/support/eventual_value_matcher.rb

RSpec::Matchers.define :eventual_value do |expected|
  match do |actual|
    actual == expected.call
  end
end 
```

和用法：

```
require "support/eventual_value_matcher" # or you can do a global require on the rails_helper.rb file

it "xxx" do
  foo1 = FactoryGirl.build(:foo)
  expect(FooBar).to receive(:create).with(eventual_value(proc { foo1.id }))
  foo.save!
end 
```

# android - Android：显示消息不到 2 秒

> ID：14110752
> 
> 赞同：1
> 
> 时间：2013-01-01T13:11:22.413
> 
> 标签：android, notifications, toast, duration

我想在自定义的时间内显示一条消息或通知，在这种情况下不到 2 秒。

我尝试了两种方法，但都没有真正的帮助： 1\. 通过 Toast 显示消息并通过设置持续时间`LENGTH_SHORT`，这显然定义了 2 秒的硬编码持续时间。-> 失败 2\. 创建一个`NotificationCompat.Builder`例程`SetTicker`并在一定时间后取消通知。-> 通知（我并不真正需要）在给定时间后消失，但不幸的是，自动收报机会停留更长的时间。:(

```
private void SetNotification(CharSequence aCharSeq)
{
  Intent notificationIntent = new Intent(getApplicationContext(), MainActivity.class);
  PendingIntent contentIntent = PendingIntent.getActivity(getApplicationContext(),
    m_RandNotificationID, notificationIntent, PendingIntent.FLAG_CANCEL_CURRENT);

  NotificationCompat.Builder builder = new    NotificationCompat.Builder(this).setTicker(aCharSeq)
    .setContentTitle(aCharSeq).setContentText(aCharSeq).setSmallIcon(R.drawable.sound)
    .setContentIntent(contentIntent);

  Notification noti = builder.build();

  m_NotMan.notify(m_RandNotificationID, noti);

  new Timer().schedule(CancelAction, 1000L);
}

TimerTask CancelAction = new TimerTask()
{
   public void run()
   {
     m_NotMan.cancel(m_RandNotificationID);
   }
}; 
```

您的任何想法都会有所帮助。:)

新年快乐

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:14:40.983

正如您已经提到的， a 的持续时间`Toast`只能设置为`Toast.LENGTH_SHORT`and `Toast.LENGTH_LONG`。但是，可以`Toast`通过提前取消它来显示短于 2 秒的时间，例如在 1 秒后，使用`Handler`.

```
final Toast toast = Toast.makeText(this, "Example Toast",
        Toast.LENGTH_SHORT);
toast.show();

new Handler().postDelayed(new Runnable() {

    @Override
    public void run() {
        toast.cancel();
    }
}, 1000); 
```

# javascript - getImageData 丢失透明度 - HTML5 2d 上下文

> ID：14110754
> 
> 赞同：6
> 
> 时间：2013-01-01T13:11:42.250
> 
> 标签：javascript, html, canvas, getimagedata

我注意到一个奇怪的问题`getImageData`；获取图像数据时，图像的透明度似乎被忽略了。

`canvas`由于在获得图像数据之前需要将任何图像绘制到 a 上，我认为这是一个问题，因为`canvas`问题是不透明的。但我错了，因为使用 the`canvas`作为参数来`drawImage`保持透明度。

这是我加载图像的方式；

```
var load_image = function(name, url, holder, callback) {
    var img = new Image();
    img.src = url;

    img.addEventListener('load', function(e) {
        var canvas = make_canvas(e.target.width, e.target.height);
        var ctx = canvas.getContext('2d');

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(e.target, 0, 0);

        holder[name] = {canvas: canvas, ctx: ctx};

        delete e.target;

        callback.call();
    }, false);
}; 
```

就是简单的`callback`绘制函数，它调用`draw_image`来绘制图像。

通常的版本；

```
var draw_image = function(ctx, img, sx, sy, w, h, dx, dy) {
    ctx.drawImage(img.canvas, sx, sy, w, h, dx, dy, w, h);
}; 
```

它只是将画布作为 的参数`drawImage`，结果与预期的一样，并保持了透明度。**[例子](http://jsfiddle.net/MnG7a/3/)**。

图像数据版本；

```
var draw_image = function(ctx, img, sx, sy, w, h, dx, dy) {
    var imagedata = img.ctx.getImageData(sx, sy, w, h);
    ctx.putImageData(imagedata, dx, dy);
}; 
```

这个从与通常版本中使用的同一画布中获取所需矩形的图像数据，并将图像数据放在我要绘制的画布上。我认为应该保持透明度，但事实并非如此。**[例子](http://dl.dropbox.com/u/80133449/imagedataTest/index.html)**。（这是一个 Dropbox 链接，因为该`origin-clean`标志。）

我认为应该保持透明度是错误的`getImageData`吗？还是我只是以错误的方式使用它？

无论哪种方式，我们都会非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T13:43:09.713

我相信您的问题是 putImageData 不使用[复合操作](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Canvas_tutorial/Compositing)来混合源图像数据和目标图像数据。相反，它直接将红色、绿色、蓝色*和 Alpha*通道写入画布。对于完全透明的像素，这意味着它们可能会或可能不会以您期望的颜色出现。

相反，您可以创建一个中间画布元素，绘制到该元素，然后使用 drawImage() 将其渲染到目标画布，并应用适当的 globalCompositeOperation。 [带有 HTML5 画布的 putImageData 掩码？](https://stackoverflow.com/questions/5942141/mask-for-putimagedata-with-html5-canvas)更详细地讨论了这个问题。

更新：您可以通过执行`ctx.getImageData(230,50,1,1).data`. 结果是 [0,0,0,0] - 即完全透明的像素。

# jsf-2 - p:selectOneMenu 在 noSelectionOption 项目存在时预选前一个项目

> ID：14110755
> 
> 赞同：5
> 
> 时间：2013-01-01T13:11:42.550
> 
> 标签：jsf-2, primefaces, facelets, selected, selectonemenu

`p:selectOneMenu`添加`f:selectItem`. _

看法：

```
<p:selectOneMenu value="#{selectionTest.selectedName}">
    <f:selectItem itemLabel="Select" noSelectionOption="true" />
    <f:selectItems value="#{selectionTest.allNames}" var="varName" itemLabel="#{varName}" itemValue="#{varName}" />
</p:selectOneMenu> 
```

模型：

```
private List<String> allNames;
private String selectedName;

public MenuSelectionTestBean(){
    allNames = new ArrayList<String>();
    allNames.add("Ahmed");
    allNames.add("Mohamed");
    allNames.add("Ibrahim");
    allNames.add("Walid");

    selectedName ="Walid";
} 
```

结果：

![在此处输入图像描述](../Images/a21190cfe145883913caab465b2946aa.png)

应选择项目“Walid”，但选择了“Ibrahim”。我认为 PrimeFaces 根据其在列表中的索引而不是项目的值来选择项目。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T00:32:40.310

我可以重现你的问题。我查看了 PrimeFaces 源代码。这是 PrimeFaces`SelectOneMenuRenderer`中的一个错误，仅在使用带有的项目时才会暴露`noSelectionOption="true"`。渲染器不会为此生成`<option>`支持`<select>`元素的 HTML 元素，但会为此生成`<li>`视觉`<ul>`列表的 。换句话说，`<select>`在您的案例中包含 4 个项目和`<ul>`5 个项目。`<li>`由 JavaScript 根据 的索引选择，`<option selected>`正如您所怀疑的那样。这解释了你的问题。

最好的办法是将[其作为错误报告](http://code.google.com/p/primefaces/issues)给 PrimeFaces 人员。渲染器还应该`<option>`为此生成，或者 JavaScript 应该根据值而不是索引来选择选项。

同时，替换`noSelectionOption="true"`by `itemValue="#{null}"`，或者`itemValue=""`当 JSF 配置为将提交的空字符串值解释为`null`时，应该可以解决您的问题。

# javascript - 获取动态加载的跨域 JavaScript 文件当前正在执行的 JavaScript 代码的文件路径

> ID：14110756
> 
> 赞同：5
> 
> 时间：2013-01-01T13:11:41.667
> 
> 标签：javascript, jquery, cross-domain, bookmarklet

[我需要为我的站点http://jsbookmarklets.com/](http://jsbookmarklets.com/)
中的书签动态加载跨域 JavaScript 文件

解决方案应满足：

*   获取当前文件的路径
*   当前网页和执行的JS文件的域不同
*   解决方案应该是跨浏览器
*   多个脚本可能会一次异步加载（这就是为什么下面提到的相关问题不适合的原因）

**我想获取当前执行 JavaScript 代码的文件路径，以动态加载更多资源**（更多 CSS 文件和 JS 文件，如自定义代码和 jQuery、jQuery UI 和 Ext JS 库），它们存储在与 JavaScript 相同/相对的文件夹中书签。

以下方法不适合我的问题：

```
var scripts = document.getElementsByTagName("script");
var src = scripts[scripts.length-1].src;
alert("THIS IS: "+src); 
```

不适合我的问题的相关问题：

*   [动态加载时获取当前正在执行的js文件的url](https://stackoverflow.com/questions/2277978/)
*   [获取脚本路径](https://stackoverflow.com/questions/2161159/get-script-path)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T21:19:42.973

我正在使用的当前解决方案有效，但非常冗长：

```
var fnFullFilePathToFileParentPath = function(JSFullFilePath){
    var JSFileParentPath = '';
    if(JSFullFilePath) {
        JSFileParentPath = JSFullFilePath.substring(0,JSFullFilePath.lastIndexOf('/')+1);
    } else {
        JSFileParentPath = null;
    }
    return JSFileParentPath;
};

var fnExceptionToFullFilePath = function(e){
    var JSFullFilePath = '';

    if(e.fileName) {    // firefox
        JSFullFilePath = e.fileName;
    } else if (e.stacktrace) {  // opera
        var tempStackTrace = e.stacktrace;
        tempStackTrace = tempStackTrace.substr(tempStackTrace.indexOf('http'));
        tempStackTrace = tempStackTrace.substr(0,tempStackTrace.indexOf('Dummy Exception'));
        tempStackTrace = tempStackTrace.substr(0,tempStackTrace.lastIndexOf(':'));
        JSFullFilePath = tempStackTrace;
    } else if (e.stack) {   // firefox, opera, chrome
        (function(){
            var str = e.stack;
            var tempStr = str;

            var strProtocolSeparator = '://';
            var idxProtocolSeparator = tempStr.indexOf(strProtocolSeparator)+strProtocolSeparator.length;

            var tempStr = tempStr.substr(idxProtocolSeparator);
            if(tempStr.charAt(0)=='/') {
                tempStr = tempStr.substr(1);
                idxProtocolSeparator++;
            }

            var idxHostSeparator = tempStr.indexOf('/');
            tempStr = tempStr.substr(tempStr.indexOf('/'));

            var idxFileNameEndSeparator = tempStr.indexOf(':');
            var finalStr = (str.substr(0,idxProtocolSeparator + idxHostSeparator + idxFileNameEndSeparator));
            finalStr = finalStr.substr(finalStr.indexOf('http'));
            JSFullFilePath = finalStr;
        }());
    } else {    // internet explorer
        JSFullFilePath = null;
    }

    return JSFullFilePath;
};

var fnExceptionToFileParentPath = function(e){
    return fnFullFilePathToFileParentPath(fnExceptionToFullFilePath(e));
};

var fnGetJSFileParentPath = function() {
    try {
        throw new Error('Dummy Exception');
    } catch (e) {
        return fnExceptionToFileParentPath(e);
    }
};

var JSFileParentPath = fnGetJSFileParentPath();
alert('File parent path: ' + JSFileParentPath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:38:07.097

```
var s = document.createElement('script'); 
s.setAttribute('src', 'code.js'); 
document.body.appendChild(s); 
```

你不能简单地这样做吗？

```
var myScriptDir = 'http://somesite.tld/path-to-stuff/';
var s = document.createElement('script'); 
s.setAttribute('src', myScriptDir + 'code.js'); 
document.body.appendChild(s); 
// code inside http://somesite.tld/path-to-stuff/code.js will use myScriptDir to load futher resources from the same directory. 
```

If you don't want to have code inside the script to be responsible for loading further resources you can use the onload attribute of the script tag, like `s.onload=function(){...}`. For cross browser compatibility you might first load jQuery and then use the getScript function. Relevant links are [http://www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet](http://www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet) and [http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T08:27:56.867

Some of the comments have already mentioned this, but I'll try to elaborate a bit more.

The simplest, most cross-browser, cross-domain way of figuring out the path of the current script is to **hard-code the script's path into the script itself**.

In general, you may be loading third-party script files, so this would not be possible. But in your case, all the script files are under your control. You're already adding code to load resources (CSS, JS, etc.), you might as well include the script path as well.

# android - 从android中的sdcard解析plist

> ID：14110760
> 
> 赞同：0
> 
> 时间：2013-01-01T13:12:02.457
> 
> 标签：android, xml, plist, inputstream

在我的项目**中从 sdcard 解析 plist**。

我已经做了一个示例，它从资源 belove 代码中获取一个 xml 文件。

```
 Resources res = activity.getResources();
 XmlResourceParser xpp = res.getXml(R.xml.myplist); 
```

*但是我要*

```
 XmlResourceParser xpp = (SDCARD xml file) 
```

1.  如何解决我的问题，尝试了很多但我无法解决我的问题，

**请帮帮我**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:24:44.203

您应该将 替换`XmlResourceParser`为[`XmlPullParser`](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)。第一个用于解析资源文件夹中的 xml，后者用于解析 .xml 中的 xml `InputStream`。从那时起，您需要`InputStream`从 sdcard 构造一个：

```
File file = new File (path-to-your-file);
fileInputStream fis = new FileInputStream(file);
XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
factory.setNamespaceAware(true);
XmlPullParser xpp = factory.newPullParser();

xpp.setInput(fis, "UTF-8");// or whatever encoding suites you 
```

**编辑**：顺便说一句，我对您在 android 中解析 plist 的方式很感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:16:21.643

只需对 sdcard 上的 xml 文件使用 java file 命令即可。

```
File file=new File("/mnt/sdcard/example.xml"); 
```

并使用 DOM 或 SAX 解析器，您可以为您的应用程序解析其中的数据（信息）。

谢谢。

**编辑：**在 android 中使用 Sax 解析本地 xml 文件，在 Android 中读取 XML 资源，使用 XmlResourceParser：XML 解析接口或 Here 或 Here 看这些教程。

# java - 在 struts2 应用程序中，s:action 或在 JSP 页面上使用静态方法哪个性能更好

> ID：14110761
> 
> 赞同：1
> 
> 时间：2013-01-01T13:12:08.820
> 
> 标签：java, jakarta-ee, struts2, struts, java-ee-6

我一直想知道哪个性能更好，调用 s:action 或在 struts2 web 应用程序中使用 JSP 中的 OGNL 调用静态方法。

我知道它们都有自己的用法，但我想知道哪一个性能更好（更快），是否可以缓存 s:action 结果，以便在参数相同时不会总是调用它，而是结果直接从某个缓存中提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:25:36.660

`<s:action>`通过 S2 请求，调用静态方法是直接的 OGNL/Java：对于几乎所有我无法想象的请求，甚至是内部请求，都比调用方法更快。

# c - 我无法打印按位运算符的结果

> ID：14110764
> 
> 赞同：3
> 
> 时间：2013-01-01T13:13:02.440
> 
> 标签：c, bitwise-operators

> **可能重复：**
> [我可以在 C 或 C++ 中使用二进制文字吗？](https://stackoverflow.com/questions/2611764/can-i-use-a-binary-literal-in-c-or-c)

我无法在 C 中显示按位运算符的结果。在下面的代码中，a&b 应该是 100001 和 a|b 111111。但是，打印的结果是不同的。我试图在有和没有 itoa 的情况下做到这一点，但无济于事。为什么程序不能正确打印答案？

```
#include<stdio.h>
#include<stdlib.h>

int main (int argc, char* argv[]) {

  unsigned a = 101101;
  unsigned b = 110011;

  unsigned c = a&b;
  unsigned d = a|b;

  char s[100];
  char t[100];

  itoa(c,s,2);
  itoa(d,t,2);

  printf("%s\n",s); /* Shouldn't it produce 100001? 
                       Instead I get 11000100010101001*/
  printf("%s\n",t); /* Ought to print 111111.
                       Instead it prints 11010111111111111 */

  return 0;
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T13:15:54.437

您提供的数字是十进制的，而您打算使用二进制。尝试以下操作：

```
unsigned a = 0x2d; // 101101 b
unsigned b = 0x33; // 110011 b 
```

或者对于 GCC 编译器使用：

```
unsigned a = 0b101101;
unsigned b = 0b110011; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:23:28.757

您需要将数字表示为十进制（例如，101101 变为 45，110011 变为 51）、八进制（101101 变为 055，110011 为 063）或十六进制（如 Eli 所示，分别为 0x2d 和 0x33）。

一些编译器可能支持二进制，但大多数不支持。一旦数字长度超过 8-12 位，直接用二进制工作是很痛苦的，所以学习如何使用十六进制（现在最常见）或八进制（过去在 1970 年代流行，特别是在 DEC 设备上）的二进制使用了很多 3 位组合，所以这是有道理的）。

您当然可以使用`strtol(str, NULL, 2)`将二进制字符串转换为长值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T13:25:36.287

您定义的整数（a 和 b）不是使用位定义的。您已经定义了 101101 和 110011 的整数。所以即使显示正确，这也行不通。

我建议你或多或少得到你想要的是：

首先正确定义您的号码。一些 C 编译器（据我所知，这不是标准的）定义了位符号，所以 a 将是：0b101101，b 将是 b：0b110011。那样：

`unsigned a = 0b101101;`

`unsigned b = 0b110011;`

否则，您必须使用十六进制表示法 (0x....) 或直接以 10 进制定义它们。在第一种情况下，a 将是：0x2d 或 45。

此外，对于显示，您无法显示位。因此，您应该使用十六进制表示法（更适合这种情况）显示：`printf("c: %#x", c);`

它将输出：`c: 0x21`。

# java - 当向 GCM 服务器发送消息（使用 Java）时出现异常 [errorCode=MismatchSenderId]

> ID：14110765
> 
> 赞同：1
> 
> 时间：2013-01-01T13:13:07.420
> 
> 标签：java, android, push-notification, google-cloud-messaging

向 GCM 服务器发送消息（使用 Java）时出现异常：

```
[ errorCode=MismatchSenderId ] 
```

在这里，我检查了我的 apikey 和 senderid。两者都在同一个项目中。请帮助解决此问题。

我正在使用 Windows 系统和 Java 编程来向 GoogleCloudMessaging 发送消息。根据 GCM 的文档，我正在发送 regid（将由 andridd 设备发送）和 apikey 以及一些文本消息。这里 regid 和 apikey 使用相同的谷歌帐户。使用此详细信息，我将消息发送到 GCM 服务器。它说：mismatchsenderid ...请指导我..

```
public static void main(String[] args) {
    Sender sender = new Sender("AIzaSyBXXXXXX");
    Message message = new Message.Builder()
        .collapseKey("1")
        .timeToLive(3)
        .delayWhileIdle(true)
        .addData("message", "this").build();
    Result result;
    try {
        result = sender.send(message,"APA91bFYa3SNWhUOywguYHN1XXXXXXX", 1);
        System.out.println(result.toString();
        /* Message message1 = new Message.Builder() .build();*/
    } catch (Exception e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:15:54.873

如果您的发件人 ID 和 API 密钥匹配（并且您使用的是正确的发件人 ID 值，即 Google API 项目 ID），则对您的问题最可能的解释是您使用的是为不同的发件人ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-22T14:10:22.630

请在您的终端中运行以下脚本

curl -X POST \
-H "Authorization: key= write here api_key" \
-H "Content-Type: application/json" \
-d '{
"registration_ids": [ "write here reg_id generated by gcm"
], "data ": { "message": "来自 Rajkumar 的手动推送通知" },
"priority": "high"
}' \
[https://android.googleapis.com/gcm/send](https://android.googleapis.com/gcm/send)

MismatchSenderId 因为在同一设备上您使用不同的密钥登录。要解决此问题，请卸载应用程序并再次运行它并更新注册密钥。然后在您的终端中运行我在上面发布的 CURL 脚本，它将提供成功消息，您将收到通知到您的设备

# linux - FreeType 2 的未定义引用

> ID：14110769
> 
> 赞同：3
> 
> 时间：2013-01-01T13:13:15.767
> 
> 标签：linux, compilation, linker, freetype2

[使用FreeType](https://en.wikipedia.org/wiki/FreeType) 2构建一个简单示例时出现未定义的引用错误。

```
gcc `/usr/bin/freetype-config --cflags`  `/usr/bin/freetype-config --libs` a.c 
/tmp/ccuSpdkr.o: In function `main':
a.c:(.text+0x10): undefined reference to `FT_Init_FreeType'
collect2: error: ld returned 1 exit status 
```

我在 Ubuntu 12.10 x64 上。安装包 libfreetype6 和 libfreetype6-dev。

文件`a.c`是：

```
#include <stdio.h>
#include <ft2build.h> 
#include FT_FREETYPE_H

int main() {
  FT_Library library;
  FT_Init_FreeType( &library );
  return 0;
} 
```

我尝试了两步编译，以确保一切都在 64 位：

```
> gcc -c `/usr/bin/freetype-config --cflags` a.c
> file a.o
a.o: ELF 64-bit LSB relocatable, x86-64, version 1 (SYSV), not stripped
> /usr/bin/freetype-config --cflags
-I/usr/include/freetype2
> /usr/bin/freetype-config --libs
-L/usr/lib/x86_64-linux-gnu -lfreetype -lz
> file /usr/lib/x86_64-linux-gnu/libfreetype.so.6.9.0
/usr/lib/x86_64-linux-gnu/libfreetype.so.6.9.0: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=0x8ed223c2650372fc88b41fd348a72f03329adefa, stripped 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T13:35:55.160

您应该将链接器标志放在**对象**和/或源文件之后；代替

```
gcc `freetype-config --libs` a.c 
```

写

```
gcc a.c `freetype-config --libs` 
```

# php - 在没有循环的情况下使用存储在数组中的值在字符串中搜索和替换

> ID：14110772
> 
> 赞同：-1
> 
> 时间：2013-01-01T13:14:34.297
> 
> 标签：php, string

当我的搜索值存储在字符串数组中时，如何在字符串中进行搜索和替换？

```
$strFromSearchBox = 'Why you foo, bar, I ought to tar you';

$theseWords       = array('foo', 'bar', 'tar'); 
```

所以，我想`foo` `bar` `tar`用空格替换字符串。是否可以不使用`while`or`for`循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:19:00.270

[`str_replace`](http://php.net/manual/en/function.str-replace.php)接受数组作为参数。

```
$output = str_replace($theseWords, ' ', $strFromSearchBox); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:19:00.930

[`str_replace`](http://php.net/manual/en/function.str-replace.php)接受数组！

```
str_replace(array(
    'foo',
    'bar',
    'tar'
), '', 'Why you foo, bar, I ought to tar you'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T13:21:58.413

你正在寻找`str_replace`

```
$string = 'Why you foo, bar, I ought to tar you';
$result = str_replace(
   array( 'foo', 'bar', 'tar'), 
   '', 
   $string
); 
```

# android - onRmsChanged(float rmsdB) 到 0-100 刻度

> ID：14110780
> 
> 赞同：0
> 
> 时间：2013-01-01T13:15:00.963
> 
> 标签：android

当我使用 RecognitionListener 的 onRmsChanged(float rmsdB) 时，我以 root min squere dB 得到它。我想将其转换为 0 到 100 的比例。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T23:15:28.327

恕我直言，音量的线性刻度非常没用。

由于 rms 值从 -120 到 60 不等，将其标准化为 0-100 范围的最佳方法是：

`float volumeNo = (volumeDB+120​)/1.8`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:22:36.960

我在[Wikipedia](http://en.wikipedia.org/wiki/Decibel)中进行了一些调查，并使用了这个：

```
10*Math.pow(10, ((double)volume/(double)10)) 
```

# pandoc - 不要将 HTML 处理为 Markdown，但保留定义列表

> ID：14110782
> 
> 赞同：4
> 
> 时间：2013-01-01T13:15:15.093
> 
> 标签：pandoc

我喜欢 Pandoc 中的定义列表语法。我也有一些原始 HTML 被放入我的文档中。

我不希望 HTML 被解析为 Markdown。我试图`--strict`强迫 Pandoc 忽略 HTML。这可行，但不幸的是，这会关闭定义列表功能。我可以使用 HTML 来编写我的 DL，但这很乏味。（HTML 来自另一个来源，应该保持不变。）

有没有任何配置选项可以让我对此有更多的粒度？

（请参阅手册中的[原始 html](http://johnmacfarlane.net/pandoc/README.html#raw-html "原始 html")部分和[定义列表](http://johnmacfarlane.net/pandoc/README.html#definition-lists "定义列表")部分。他们都讨论了如何`--strict`禁用它们。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T17:29:32.547

在 pandoc 的开发版本中，您可以逐个启用和禁用 pandoc 扩展，例如，您可以指定`-t markdown-markdown_in_html_blocks`禁用用于解析 HTML 块内的 markdown 的扩展。

您需要从源代码安装，这需要 Haskell 平台。说明在[这里](https://github.com/jgm/pandoc/wiki/Installing-the-development-version-of-pandoc-1.10)，或者您可以等待下一个版本。

# c# - 如何以 webmatrix 形式编写更新存储过程？

> ID：14110786
> 
> 赞同：1
> 
> 时间：2013-01-01T13:16:17.340
> 
> 标签：c#, asp.net, webmatrix

在这里，我在我的 webmatrix 表单中编写更新查询，该表单运行正确，但我想使用存储过程代替查询，那么我该如何编写呢？

```
var UpdateQuery = "UPDATE Reg_tb SET FirstName = @0, LastName = @1, UserName = @2, Password  = @3 WHERE UID = @4";
db.Execute(UpdateQuery, FirstName, LastName, UserName, Password, Userid); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:20:50.713

也许这个？

```
var execProc="EXEC ProcName FirstName=@0,LastName=@1,UserName=@2,Password=@3, UID=@4";
  db.Execute(execProc,FirstName,LastName,UserName,Password,Userid); 
```

# mysql - CakePHP 发票应用程序和从另一个控制器/模型中删除数据

> ID：14110789
> 
> 赞同：0
> 
> 时间：2013-01-01T13:16:26.567
> 
> 标签：mysql, database, cakephp, cakephp-2.0

我是 CakePHP 的新手，请给我一些新手建议。

我正在创建一个发票应用程序，我设置它的方式是为发票和项目使用单独的表（以及模型和控制器）。Invoice 表包含诸如“Invoice Number”、“Date”和“Client ID”之类的数据，Items 表存储构成每个发票的单独记录/项目，其中包含“Quantity”、“Unit Price”等。两个正确关联。

当我调用 Invoices 的“编辑”视图时，显然传递了一个 ID，我检索记录，然后还循环遍历从 Items 表返回的所有关联记录 - 所有工作都按计划进行，并正确检索和显示。

不过，我希望能够从这个视图中做的是能够通过单击每个项目旁边的删除按钮从发票中删除单个项目 - 理想情况下带有一个确认框。这将如何实现？最好的方法是什么？我会在不离开页面的情况下使用 Items 控制器中的函数来执行此操作吗？我将如何从发票控制器/视图调用该控制器中的函数？或者是否会为此使用另一种方法，例如 CakePHP 的 query() 函数？

我希望我已经足够清楚地解释了此设置，以便有人提供任何帮助和/或建议，对此我将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:35:09.410

简单的方法：

在您的 Invoice/view.ctp 在您的 foreach 循环中，您将执行以下操作：

```
//this is loose code since you have not pasted any in your question

    <?php echo $this->Html->link('Delete', array('controller'=>'Item', 'action'=>'delete', $item['Item']['id'])); ?> 
```

然后在您的 ItemController.php 中创建函数

```
function delete($id=NULL){
if($id){
   $this->Item->delete($id);
   $this->Session->setFlash(__('Invoice item deleted', true));
   $this->redirect($this->referer());
}
} 
```

# python-sphinx - 编号：数学：reStructuredText 中的方程

> ID：14110790
> 
> 赞同：4
> 
> 时间：2013-01-01T13:16:30.833
> 
> 标签：python-sphinx, restructuredtext

如何在重组文本中制作方程式，后跟方程式编号：

```
p = f(x)                (1) 
```

```
.. math::
   p = f(x) 
```

只会导致：

```
p = f(x) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-09-26T03:08:30.770

几年后看这个，似乎这个数字仍然没有自动放在方程的右边。因此，我想补充一下已接受的答案。

首先，在 rst 文件中为方程添加标签：

```
.. math::
   :label: pfx

   p = f(x) 
```

这将生成一个包含数字和等式链接`<span>`的类。`eqno`要使其显示为您期望的方程式编号，您需要添加一个样式来覆盖该类的默认行为。

我通常通过添加`custom.css`到`_static/css`我的文档根目录下的文件夹来做到这一点：

```
.math {
    text-align: left;
}
.eqno {
    float: right;
} 
```

该类`math`标记`<div>`包含整个方程。如果没有这种`text-align: left;`风格，你所有的方程都会居中，所以把它们编号在左边是完全合理的。

现在您需要将 CSS 文件注册到`conf.py`. 我添加了以下基本钩子：

```
def setup(app):
    app.add_stylesheet('css/custom.css') 
```

相对路径从`_static`文件夹中解析。您可以添加 globbing 以一次获取文件夹中的所有文件，但这应该足够了。

[@EngineeredBrain 的评论](https://stackoverflow.com/questions/14110790/numbered-math-equations-in-restructuredtext#comment81155357_19223615)在上一行报告了一个数字的原因是他们的方程太长并且不适合同一行。我确信有一种方法可以让它们无论如何都适合，但我什至不会尝试在这里讨论。

据我所知，这仅适用于 sphinx（而非 rST），并且仅适用于 HTML 输出。有一天我会尝试使用 latexpdf 并更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-07T11:25:32.330

```
.. math:: p=f(x)
  :label: eq:pfx 
```

# jquery - 在 jQuery Tools Scrollable 中使用 AJAX 加载图像

> ID：14110791
> 
> 赞同：0
> 
> 时间：2013-01-01T13:16:30.920
> 
> 标签：jquery, ajax, scrollable, lazy-loading

我正在使用 jQuery 工具创建一个运行良好的可滚动产品框。

但是，我想通过 AJAX 加载图像......我已经查看了延迟加载，但无法让它适用于水平 div - 它加载了 div 中的所有图像，而不仅仅是可见的图像。

我正在使用这个：http: [//jquerytools.org/demos/scrollable/index.html](http://jquerytools.org/demos/scrollable/index.html)

我发现了一些名为揭开的代码 - [http://luis-almeida.github.com/unveil/](http://luis-almeida.github.com/unveil/)这是很好的轻量级代码，但我不知道如何更改代码以适应可滚动。

基本上我只想在请求时加载隐藏的div...

有人对我有任何指示吗？

**编辑：**

[JSFiddle 示例](http://jsfiddle.net/CjgMh/)- 需要加载标记的 div

```
 <!-- 5-10 --> &  <!-- 10-15 --> 
```

单击右箭头而不是预加载所有内容时。在我的商店中，滚动条中可能有数百张图像，因此出现了问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:40:12.767

您可以根据需要将图像从 JSON 加载到`items`div（即基于下一个/上一个单击）。

代码如下

```
<div id='items'>
</div>

var imagesJSON = ["http://farm1.static.flickr.com/143/321464099_a7cfcb95cf_t.jpg",
                  "http://farm4.static.flickr.com/3089/2796719087_c3ee89a730_t.jpg",
                  "http://farm1.static.flickr.com/79/244441862_08ec9b6b49_t.jpg",
                  "http://farm1.static.flickr.com/28/66523124_b468cf4978_t.jpg",
                  "http://farm1.static.flickr.com/163/399223609_db47d35b7c_t.jpg",
                  "http://farm1.static.flickr.com/135/321464104_c010dbf34c_t.jpg",
                  "http://farm1.static.flickr.com/40/117346184_9760f3aabc_t.jpg",
                  "http://farm1.static.flickr.com/153/399232237_6928a527c1_t.jpg",
                  "http://farm4.static.flickr.com/3629/3323896446_3b87a8bf75_t.jpg",
                  "http://farm4.static.flickr.com/3023/3323897466_e61624f6de_t.jpg",
                  "http://farm4.static.flickr.com/3650/3323058611_d35c894fab_t.jpg",
                  "http://farm4.static.flickr.com/3635/3323893254_3183671257_t.jpg"];

var currImages = 0;

$(function() {
    currImages = 0;
    LoopThroughImages();

    // initialize scrollable
    $(".scrollable").scrollable();
    $('.next').click(function() {
        // Load next 4 images using ajax.
        //i am loading images from the array
        LoadNextImagesAjax();
    });
});

function LoopThroughImages() {
    var i = 0;
    var currDiv = null;

    for (var i = 0; i < 8; i++) {
        if(imagesJSON.length < currImages + i)
        {
            currImages+=i;
            return;
        }
        if (i % 4 == 0) {
            currDiv = $('<div></div>');
            $(".items").append(currDiv);
        }
        currDiv.append('<img src="' + imagesJSON[i] + '" />');
    }

    currImages+=8;
}

function LoadNextImagesAjax() {
    for (var i = 0; i < 4; i++) {
        if(imagesJSON.length <= currImages + i)
        {
            currImages+=i;
            return;
        }
        if (i % 4 == 0) {
            currDiv = $('<div></div>');
            $(".items").append(currDiv);
        }
        currDiv.append('<img src="' + imagesJSON[currImages + i] + '" />');
    }

    currImages+=4;
} 
```

您可以使用[http://jquerytools.org/demos/scrollable/index.html](http://jquerytools.org/demos/scrollable/index.html)来创建可滚动的产品框。

您可以在此处找到[JSFiddle 演示](http://jsfiddle.net/CjgMh/5/)。您必须提供有效的图像路径来测试此代码。

# matlab - Matlab中的傅里叶变换（DTFT，CTFT）

> ID：14110793
> 
> 赞同：0
> 
> 时间：2013-01-01T13:17:20.130
> 
> 标签：matlab, signal-processing, fft

我必须计算信号的傅里叶变换和傅里叶逆变换并绘制其图形（幅度和相位）。

![在此处输入图像描述](../Images/a4f4a6b62ca54f75617406a5a95f4ca6.png)

如何在 Matlab 中做到这一点？据我所知，Matlab 提供了计算 DFT 的内置函数`fft`，并且可能可以将结果从 DFT 转换为 DTFT。我找到了`fft`在内部使用 DTFT 的函数。

```
function [H, W] = dtft(h, N)
%DTFT   calculate DTFT at N equally spaced frequencies
%----
%   Usage:   [H, W] = dtft(h, N)
%
%      h : finite-length input vector, whose length is L
%      N : number of frequencies for evaluation over [-pi,pi)
%              ==> constraint: N >= L 
%      H : DTFT values (complex)
%      W : (2nd output) vector of freqs where DTFT is computed

%---------------------------------------------------------------
% copyright 1994, by C.S. Burrus, J.H. McClellan, A.V. Oppenheim,
% T.W. Parks, R.W. Schafer, & H.W. Schussler.  For use with the book
% "Computer-Based Exercises for Signal Processing Using MATLAB"
% (Prentice-Hall, 1994).
%---------------------------------------------------------------

N = fix(N);
L = length(h);  h = h(:);  %<-- for vectors ONLY !!!
if( N < L )
   error('DTFT: # data samples cannot exceed # freq samples')
end;
W = (2 * pi / N) * (0:(N-1))';
mid = ceil(N/2) + 1;
W(mid:N) = W(mid:N) - 2 * pi;   % <--- move [pi,2pi) to [-pi,0)
W = fftshift(W);
H = fftshift(fft(h,N));  %<--- move negative freq components
end 
```

您能帮我更改此功能以获取 IDTFT 吗？或者也许有人有其他类似的功能来完成这项任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-01T14:26:30.377

IDTFT 应该是一个简单的积分，因此您可以这样做：

```
X_r = ifft(ifftshift(X_w)) 
```

### 例子

让我们用一个简单的正弦波来检查一下：

```
%// Generate input signal
t = linspace(0, 10, 1000);
x = sin(2 * pi * t);

%// Compute DTFT and IDTFT
[X_w, F] = dtft(x, 1000);   %// DTFT
X_r = ifft(ifftshift(X_w)); %// IDTFT

%// Plot the result
figure
subplot(2, 1, 1), plot(t, x)
subplot(2, 1, 2), plot(t, X_r) 
```

这应该产生以下情节：

![在此处输入图像描述](../Images/a1bdaa7e90b2f64cb3a92e893f8732a9.png)

# matlab - 停止函数，当 odeset 中的事件没有发生时

> ID：14110796
> 
> 赞同：2
> 
> 时间：2013-01-01T13:17:49.893
> 
> 标签：matlab

我写了一个解决颂歌的代码（细胞随着时间的推移而生长，直到达到一定的产品浓度）。因为当 y(3) 的值大于常数 (Pmx) 时我的模型会发生变化，所以我实现了 odeset 事件函数。如果事件发生取决于函数中给出的值。

对于调试，我想设置一个 if 语句来停止函数，并且只使用第一个 ode23 函数结果来绘制（尚未实现）（见代码）

我认为这也是最终排名的问题，不是吗？提前谢谢

```
function [T,Y,TE,YE,IE, Y1, T1] = SimplePerfusionMode(tf,F)

%% DESCRIPTION
% INPUT:
%   tf: final time [h]
%    F: Feed stream [Lh^-1]
% OUTPUT
%   T:  processing time [h]
%   Y:  states functions (X, S, P)
%   TE: time at which event occurs [h]
%   YE: Solution values corresponding to TE (g/l)
%   IE: Indices into the vector returned by the events function. The values
%   indicate which event the solver detected.
%
% SAMPLE CALL: 
  % [T,Y,TE,YE,IE, Y1, T1] = SimplePerfusionMode(30,15)
% 

%

% Initial values
X0 = 0.06; %kgm-3 
S0 = 110; %kgm-3
P0=0 ;

%%%%%%%%%%%%
%% Solve ODEs until the terminal event P=Pmx
%%%%%%%%%%%%

tspan = [0 tf]; y0 = [X0 S0 P0];

options = odeset('Events',@(t,y) MyEvent(t,y,F,V,Rp,Pmx));
[T,Y,TE,YE,IE] = ode23(@(t,y) process(t,y,mumax,Ksx,Kix,Pix,Pmx,Kis,Pis,Pms,qsmax,Kss,alp,qpmax,Ksp,Kip,Pip,Pmp,F,S,Rx,Rs,Rp,V),tspan,y0,options);

%%%%%%%%%%%%%
% Solving ODE for dx/dt=0
%%%%%%%%%%%%% IMportanT HERE

tspan1=[TE tf]
  y01=[Y(end,1) Y(end,2) Y(end,3)]

if (TE==tf)
    disp('use lower stream feed to guarantee massive growth');
    return
else
  [T1,Y1] = ode23(@(t,y) process2(t,y,mumax,Ksx,Kix,Pix,Pmx,Kis,Pis,Pms,qsmax,Kss,alp,qpmax,Ksp,Kip,Pip,Pmp,F,S,V,Rx,Rp,Rs),tspan1,y01);
end

% --------------------------------------------------------------
% Plotting AREA
not displayed

%% Process Model equations - see 
% --------------------------------------------------------------
function dydt = process(t,y,mumax,Ksx,Kix,Pix,Pmx,Kis,Pis,Pms,qsmax,Kss,alp,qpmax,Ksp,Kip,Pip,Pmp,F,S,Rx,Rp,Rs,V)
    mu = (mumax*y(2)) / (Ksx+y(2));
dydt = [-F/V*(1-Rx)*y(1)+y(1)*mu*(1-(y(3)-Pix)/(Pmx-Pix))*(Kix/(Kix+y(2))); %X
F/V*(S-(1-Rs)*y(2))-(qsmax*(y(2)/(Kss+y(2)))*(1-((y(3)-Pis)/(Pms-Pis)))*(Kis/(Kis+y(2))))*y(1);
     -F/V*(1-Rp)*y(3)+F/V*(1-Rx)*y(1)+y(1)*mu*(1-(y(3)-Pix)/(Pmx-Pix))*(Kix/(Kix+y(2)))*alp+qpmax*(y(2)/(Ksp+y(2)))*(1-(y(3)-Pip)/(Pmp-Pip))*y(1)*(Kip/(Kip+y(2)));
     ];  
end   
% --------------------------------------------------------------
function [value,isterminal,direction] = MyEvent(t,y,F,V,Rp,Pmx)

value = y(3)-Pmx;     % Detect height = 0 STOP the Product inhibitory effect
  isterminal = 1;   % Stop(!!!!) the integration
direction =  1;   % Positive direction only
end
% --------------------------------------------------------------

function dydt = process2(t,y,mumax,Ksx,Kix,Pix,Pmx,Kis,Pis,Pms,qsmax,Kss,alp,qpmax,Ksp,Kip,Pip,Pmp,F,S,V,Rx,Rp,Rs)
    mu = (mumax*y(2)) / (Ksx+y(2));
dydt = [ 0; %X
      F/V*(S-(1-Rs)*y(2))-(qsmax*(y(2)/(Kss+y(2)))*(1-((y(3)-Pis)/(Pms-Pis)))*(Kis/(Kis+y(2))))*y(1);
     -F/V*(1-Rp)*y(3)+qpmax*(y(2)/(Ksp+y(2)))*(1-(y(3)-Pip)/(Pmp-Pip))*y(1)*(Kip/(Kip+y(2)));
    ]; 
    end
% --------------------------------------------------------------

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T12:11:03.520

我不确定您对其中的哪一个感兴趣，但这里有一些可能的解决方案：

如果你的目标是...

*   在调试时停止程序而不编辑代码：使用断点
*   通过编辑代码来停止程序：使用`keyboard`命令
*   运行代码的不同部分，具体取决于您是自己运行还是在其他地方使用：使用[`isdeployed`](http://blogs.mathworks.com/loren/2008/06/19/writing-deployable-code/)命令
*   根据您是在调试还是运行它来运行不同的代码段：为程序提供一个布尔输入变量，比如说`nowDebugging`并使用依赖于它的 if 语句。

# vb.net - 使用 HttpWebRequest 发送 POST 值并获取响应

> ID：14110797
> 
> 赞同：3
> 
> 时间：2013-01-01T13:17:52.747
> 
> 标签：vb.net

我有这个 php 文件：

```
<?php

if (isset($_POST['message']))
{
    $msg = $_POST['message'];

    if($msg == "age")
        echo "I am 18";
    else if($msg == "name")
        echo "my name is Jonathan";
    else
        echo "I do not know";

}

?> 
```

我想在 VB.NET 中创建一个 HttpWebRequest，这样如果我从 TextBox 发送值“age”： ![在此处输入图像描述](../Images/1887b9373c905d8846fb626e3dd32ea5.png)
要获得以下 msgbox：
![在此处输入图像描述](../Images/732463f7f79f917804b6a55ce2f07d07.png)

我尝试了类似这样的操作：

```
Public Sub SendPostData(ByVal site As String, ByVal message As String)

    Dim request As WebRequest
    request = WebRequest.Create(site)
    Dim response As WebResponse
    Dim postData As String = "message=" + message
    Dim data As Byte() = Encoding.UTF8.GetBytes(postData)

    request.Method = "POST"
    request.ContentType = "application/x-www-form-urlencoded"
    request.ContentLength = data.Length

    Dim stream As Stream = request.GetRequestStream()
    stream.Write(data, 0, data.Length)
    stream.Close()

    response = request.GetResponse()
    Dim sr As New StreamReader(response.GetResponseStream())

    MsgBox(sr.ReadToEnd)

End Sub 
```

 **我得到了这个：**
![在此处输入图像描述](../Images/29cb78f83d9085129e674f76b5f953a4.png)

知道为什么我得到它而不是 php 文件中的 3 条可能消息之一吗？（“我 18 岁”、“我叫乔纳森”或“我不知道”）？请注意，我通常从 html 表单测试 php 并且它工作，所以我想知道为什么它不能从程序工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T02:36:40.963

你得到你得到的原因是因为你已经声明 FORM 内容是“x-www-form-urlencoded”格式，并且你使用了 POST 方法，并且假设 cookie 中的任何内容（ cookie 数据）是您传递的信息，但在发送之前已由服务器编码。

我不知道怎么做，但你也应该能够取消编码。或者，您可以使用 GET 而不是 POST，并且如果只有 TEXT 而没有实际需要编码的特殊符号或字符，那么也许您可以使用不同的 CONTENT-TYPE 来正确识别您的内容类型发送...

W3.org 上的以下页面是很好的阅读材料，它解释了各种零碎之间的差异以及它们如何相互交互以及与服务器交互。

表格（ [http://www.w3.org/TR/html401/interact/forms.html](http://www.w3.org/TR/html401/interact/forms.html)）

如何处理表单（ [http://www.w3.org/TR/html401/interact/forms.html#h-17.13.3](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.3)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-12T18:22:26.130

我使用 WebClient 解决了一个类似的问题，我需要在 HTTP POST 中使用参数。对于您的情况，如果您很好地使用代码，这样的简化解决方案可能会有所帮助；假设您有一个文本框来捕获年龄，您可以使用此代码将其作为变量传递给 url；

```
Using client As New WebClient
        Dim postdata = client.UploadString(url, "age")
        MsgBox(postdata) 
End Using 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-19T09:00:49.593

我是 .net 软件的经验者，也知道 php

永远不要使用 httpwebrequest 和 httpwebresponse，因为两者都过时了

这是正确检查链接 [http://msdn.microsoft.com/en-us/library/debx8sh9%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9%28v=vs.110%29.aspx)

它使用`WebRequest`and ，在您的代码中`WebResponse`添加引用`System.Net`和`System.Web`

并且目标框架必须是 4.0、4.5 或更高版本，但不能选择包含 Client Profile 的名称

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T02:16:47.113

你有没有考虑过做这样的事情？

```
Option Strict On
Public Class Form1
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Dim Action As String = "http://www.mywebsite.com/myaction.php"
        PostMessage("submit", "Paul", Action)
    End Sub
    Sub PostMessage(ByVal Type As String, ByVal Value As String, ByVal Action As String)
        Dim TmpFile As String = My.Computer.FileSystem.SpecialDirectories.Temp & "\post.html"
        Using WB As New WebBrowser
            Dim HTML As String = _
                "<html><body>" &
                "<form method=""post"" action=""" & Action & """>" &
                "<input type=""" & Type & """ value=""" & Value & """ />" &
                "</form>" &
                "</body></html>"
            My.Computer.FileSystem.WriteAllText(TmpFile, HTML, False)
            WB.Navigate(TmpFile)
            Do : Application.DoEvents()
            Loop Until WB.ReadyState = WebBrowserReadyState.Complete
            WB.Document.GetElementById(Type).InvokeMember(Type)
            Do : Application.DoEvents()
            Loop Until WB.ReadyState = WebBrowserReadyState.Complete
        End Using
        My.Computer.FileSystem.DeleteFile(TmpFile)
    End Sub
End Class 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-14T04:50:08.530

你将不得不改变这一行：

```
Dim postData As String = "message=" + message 
```

至：

```
Dim postData As String = "message=" & message 
```

使用`"&"`而不是`"+"`

问候...

# javascript - 将 redis 与 node.js 一起使用时无法获取有效列表

> ID：14110798
> 
> 赞同：0
> 
> 时间：2013-01-01T13:18:02.017
> 
> 标签：javascript, node.js, redis

我正在使用**node.js**并使用**redis**来缓存服务器上的一些数据。

**我的代码：**

```
var client = redis.createClient();
client.on("error", function (err) {
    console.log("Error " + err);
});

client.flushall();

function redis_get(key){
    client.get(key, function(err, value) {
        if (err) {
        console.error("error");
        } else {
            return value;
        }
    });
}

function redis_set(key, value){
    client.set(key, JSON.stringify(value), function(err) {
        if (err) {
            console.error("error");
        }
    return true
    });
}

function main(){

    var new_items = [{"id": 1, "name": "abc"}, {"id": 2, "name": "xyz"}, {"id": 3, "name": "bbc"}];

    //set data in redis
    redis_set("key", new_items);

    //get data from redis
    var redis_items = redis_get("key");
} 
```

**代码摘要：**

调用 main 函数，它进一步调用 2 个其他函数（redis_set 或 redis_get）。Redis_set 采用键和值对，而 redis_get 采用指向数据的键。

**问题：**

这套作品完美无缺，但问题出在**GET**上。我没有按照我在 redis 中设置的方式获取数据。我在 get 中使用了 JASON.parse()，因为我在设置数据时已经对数据进行了字符串化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:23:59.880

从 redis 读取数据是一个异步操作。您不能从回调中返回值。您需要将回调传递给`redis_get`接收获取值的函数。

```
function redis_get(key, callback) {
    client.get(key, function(err, value) {
        if(err) {
            console.error("error");
        } else {
            callback(value); // or maybe callback(JSON.parse(value));
        }
    });
} 
```

并获得一个值：

```
redis_get("key", function(redis_items) {

}); 
```

# magento - 相关产品的放置 - Magento

> ID：14110799
> 
> 赞同：2
> 
> 时间：2013-01-01T13:18:03.970
> 
> 标签：magento

我有一个 magento 安装，我需要将相关产品放置在中心栏中。这是简单的部分。我搬家了

```
<block type="catalog/product_list_related" name="catalog.product.related" after="container1" template="catalog/product/list/related.phtml"/> 
```

从右侧参考块到中心参考块的底部。

有了这个，我实现了将相关产品放在中心栏中，但一直放在底部。

我需要将相关产品放置在 div 中的价格块上方（类：产品商店）

我尝试使用 XML 中的 After/before 参数定位它，但这似乎不起作用。

如果我将块代码放在 XML 中更高的位置，它根本不会显示。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-01T13:46:32.433

移动块很容易*正确*完成（即使用最佳实践）。最佳实践包括尽可能*不*自定义任何核心布局文件，以及使用原始块实例而不是重新实例化它们。所有这些都可以使用最终实施者可用的自定义布局文件来实现。

在自定义主题的布局文件夹中创建一个*local.xml文件，例如**app/design/frontend/[package]/[theme]/layout/local.xml*，并在其中添加以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>
    <!--
        In Magento v1 a move is accomplished by unsetting in one place
        and inserting in another. This is possible using just layout xml
        when the "new" parent block is a "Mage_Core_Block_Text_List"
        instance. Otherwise a template needs editing.

        In Magento v2 there will be actual "move" functionality.
    -->
    <catalog_product_view>
        <reference name="right">
            <!-- remove the block name from a parent -->
            <action method="unsetChild">
                <block>catalog.product.related</block>
            </action>
        </reference>
        <reference name="content">
            <!-- add the block name to a parent -->
            <action method="insert">
                <block>catalog.product.related</block>
            </action>
            <!--
                Mage_Core_Block_Abstract::insert() accepts multiple arguments,
                but by default it will insert the added block at the beginning
                of the list of child blocks.
            -->
        </reference>
    </catalog_product_view>
</layout> 
```

此时您可以将更改还原为原始布局 xml 文件。

# iphone - 我怎样才能像这样为我的表格单元格创建一个附件视图？

> ID：14110801
> 
> 赞同：3
> 
> 时间：2013-01-01T13:18:09.720
> 
> 标签：iphone, ios, uitableview, accessoryview

基本上我需要两个标签。一个带有数字，另一个带有下一行的常量字符串。另外，我需要一个气泡作为辅助视图的背景。我知道如何创建一个标签，但不知道将两个标签设置为辅助视图。请帮忙

![在此处输入图像描述](../Images/38f588d08de703bb9d593cd05e40f193.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T13:33:03.143

您可以创建一个 UIView 并将所有必要的视图添加到它的子视图中，然后使该单个视图成为表格视图单元格的附属视图：

```
UIView *container = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 44)];
[container addSubview:backgroundImage];
[container addSubview:firstLabel];
[container addSubview:secondLabel];
cell.accessoryView = container; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T05:30:30.550

为此，您需要创建一个 ImageView 或 UIView 并相应地设置图像。

然后您设置了单元格的附件视图，如下所示：

```
cell.accessoryView = <your view>; 
```

希望，你有一个想法。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T06:28:36.163

它对我来说很好......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        //cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        UILabel  *label1 = [[UILabel alloc]initWithFrame:CGRectMake(25, 25, 100, 21)];
         UILabel  *label2 = [[UILabel alloc]initWithFrame:CGRectMake(25,42, 100, 21)];
        label1.backgroundColor = [UIColor clearColor];
        label2.backgroundColor = [UIColor clearColor];
        UIView *container = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 110)];
        [container setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"Bukkl.png"]]];
        [container addSubview:label1];
        [container addSubview:label2];
        label1.text = @"HIIIIIIII";
        label2.text = @"@@@BBBBBB";
        cell.accessoryView = container;
    }

         return cell;
} 
```

如果效果好的话别忘了点赞哦。。

# c - 拟合未知曲线

> ID：14110802
> 
> 赞同：10
> 
> 时间：2013-01-01T13:18:11.053
> 
> 标签：c, algorithm, statistics, curve-fitting

我遇到了一些相关的问题（例如[this](https://stackoverflow.com/questions/1358238/finding-a-curve-to-match-data)、[this](https://stackoverflow.com/questions/11350821/automatic-curve-fitting-in-r)、[this](https://stackoverflow.com/questions/2243046/curve-fitting-in-r-using-nls)和[this](https://stackoverflow.com/questions/3480388/how-to-fit-a-smooth-curve-to-my-data-in-r)），但它们都涉及将数据拟合到*已知*曲线。有没有办法将给定的数据拟合到未知曲线？我的意思是，给定一些数据，算法会给我一个拟合，它是一个函数或函数的总和。我正在用 C 编程，但我完全不知道如何使用[gsl](http://www.gnu.org/software/gsl/)包来做到这一点。我愿意使用任何可以（理想情况下）通过 C 管道传输的东西。但是对于我应该寻找的方向的任何帮助将不胜感激。

**编辑：**这基本上是我收集的实验（物理）数据，所以数据会有一些被加性高斯分布噪声修改的趋势。一般来说，趋势是非线性的，所以我猜线性回归拟合方法是不合适的。至于排序，数据是按时间排序的，因此曲线必须按该顺序拟合。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T14:03:59.220

您可能正在寻找数值分析领域的**[多项式插值。](http://en.wikipedia.org/wiki/Polynomial_interpolation)**

在多项式插值中 - 给定一组点 (x,y) - 您试图找到适合这些点的最佳多项式。一种方法是使用[牛顿插值法](http://en.wikipedia.org/wiki/Newton_polynomial)，这很容易编程。

数值分析和具体插值领域得到了广泛的研究，您可能可以获得多项式误差的一些不错的上限。

但是请注意，因为您正在寻找最适合您的数据的多项式，并且该函数并不是真正的多项式 - 当远离您的初始训练集时，错误的规模会爆炸。

* * *

另请注意，您的数据集是有限的，并且有无限数量（实际上是不可枚举的无穷大）可以拟合数据（精确或近似）的函数 - 所以其中哪一个是最好的可能特定于您实际上是在努力实现。

如果您正在寻找一个模型来拟合您的数据，请注意线性回归和多项式插值处于尺度的相反两端：多项式插值可能对模型过度拟合，而线性回归可能对其拟合不足，究竟应该怎么做be used 是针对具体情况的，并且因应用程序而异。

* * *

简单的多项式插值**示例**：

假设我们有`(0,1),(1,2),(3,10)`我们的数据。

我们使用牛顿法得到的表^(1是：)

```
0  | 1 |                 |
1  | 2 | (2-1)/(1-0)=1   |
3  | 9 | (10-2)/(3-1)=4  | (4-1)/(3-0)=1 
```

现在，我们得到的多项式是以最后一个元素结尾的“对角线”：

```
1 + 1*(x-0) + 1*(x-0)(x-1) = 1 + x + x^2 - x = x^2 +1 
```

（这确实与我们使用的数据完美契合）

* * *

(1) 表是递归创建的：前 2 列是 x,y 值 - 下一列基于前一列。一旦你得到它就很容易实现，完整的解释在牛顿插值的维基百科页面中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T14:19:05.207

您可能希望使用（[快速](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/fft.html)）[傅立叶变换](http://mathworld.wolfram.com/FourierSeries.html)将数据转换为频域。

通过变换的结果（一组幅度、相位和频率），即使是最扭曲的数据集也可以用以下形式的几个函数（[谐波](http://mathworld.wolfram.com/Harmonic.html)）表示：

```
r * cos(f * t - p) 
```

其中 r 是谐波幅度，f 是频率和 p 相位。

最后，未知数据曲线是所有谐波的总和。

我在[R](http://www.r-project.org/)中做过这个（你有一些例子），但我相信 C 有足够的工具来管理它。也可以对 C 和 R 进行管道传输，但对其了解不多。[这](https://stackoverflow.com/questions/2463437/r-from-c-simplest-possible-helloworld)可能会有所帮助。

这种方法对于大块数据非常有用，因为它具有以下复杂性：

1) 使用快速傅里叶变换 (FTT) = O(n log n) 分解数据

2) 使用结果组件 = O(n) 构建函数

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-01T15:24:24.447

另一种选择是使用**[线性回归](http://en.wikipedia.org/wiki/Linear_regression)**，但是**是多维的**。

这里的技巧是**人为地生成额外的维度**。您可以通过简单地在原始数据集上隐含一些函数来做到这一点。一个常见的用法是生成多项式以匹配数据，因此在这里您暗示的功能`f(x) = x^i`适用于所有人`i < k`（`k`您想要获得的多项式的度数在哪里）。

例如，`(0,2),(2,3)`与`k = 3`你的数据集将获得额外的 2 个维度，你的数据集将是：`(0,2,4,8),(2,3,9,27)`.

与预测模型（p(x) 的值）相比，线性回归算法将找到使数据中每个点的误差最小化`a_0,a_1,...,a_k`的多项式值。`p(x) = a_0 + a_1*x + ... + a_k * x^k`

现在，问题是——当你开始增加维度时——你正在从欠拟合（一维线性回归）转向过拟合（当`k==n`你有效地得到多项式插值时）。

要“选择”什么是最佳`k`值 - 您可以使用**[cross-validation](http://en.wikipedia.org/wiki/Cross-validation_%28statistics%29)**，并`k`根据您的交叉验证选择最小化错误的值。

请注意，**此过程可以完全自动化**，您只需要迭代检查`k`所需范围¹中的所有值，并`k`根据交叉验证选择误差最小的模型。

* * *

(1) 范围可能是 `[1,n]`——虽然它可能会太费时，但我会去`[1,sqrt(n)]`甚至`[1,log(n)]`——但这只是一种预感。

# devexpress - 将新行添加到 xtragrid 视图

> ID：14110804
> 
> 赞同：1
> 
> 时间：2013-01-01T13:18:43.657
> 
> 标签：devexpress

我创建了 Xtragrid，其中我在运行时添加了 RepositoryItemLookUpEdit 但问题是当我使用 View.AddNewRow() 添加新行时；添加一个新行，其中包含空单元格。所以我需要在新创建的行中添加 RepositoryItemLookUpEdit。有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:35:51.630

我遇到过同样的问题。您需要使用实现 IBindingList 的数据源，例如 BindingList**并**设置 AllowNew = true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:41:05.463

你在哪里绑定数据？

我可以建议您实施以下 ex 并查看问题的根源吗？ *从表单上的网格和按钮开始。我在设计器中创建了存储库项*

```
private void Form1_Load(object sender, EventArgs e)
{
    DataTable dt = new DataTable("newTable");
    dt.Columns.Add("1", typeof(Int32));
    dt.Columns.Add("2", typeof(bool));
    dt.Columns.Add("3", typeof(Int32));

    dt.Rows.Add(1, true, 12);
    dt.Rows.Add(2, false, 32);
    dt.Rows.Add(3, true, 42);

    gridControl1.DataSource = dt;

    gridView1.Columns[0].ColumnEdit = repositoryItemCheckEdit1;
}

private void button1_Click(object sender, EventArgs e)
{
    gridView1.AddNewRow();
} 
```

它在第一列中添加了一个带有存储库项目的新行:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T21:10:31.510

Private Sub grdInvoice_EditorKeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) 处理 grdInvoice.EditorKeyDown

```
 Dim dt As New DataTable
    Dim dr As DataRow
    Dim i As Integer

    With GridView1
        .OptionsNavigation.EnterMoveNextColumn = True
        If e.KeyData = "13" Or e.KeyData = "9" Then
            If .FocusedRowHandle.ToString = .RowCount - 1 Then
                If .FocusedColumn Is .Columns("Rate") Then
                    If .GetRowCellValue(.RowCount - 1, "Qty") <> "0" And .GetRowCellValue(.RowCount - 1, "Rate") <> "0" And .GetRowCellValue(.RowCount - 1, "ItemCode") <> "" Then
                        dt.Columns.Add("No")
                        dt.Columns.Add("ItemCode")
                        dt.Columns.Add("ItemName")
                        dt.Columns.Add("Qty")
                        dt.Columns.Add("Rate")
                        dt.Columns.Add("Amount")
                        dt.Columns.Add("Unit")
                        For i = 0 To .RowCount - 1
                            dr = dt.NewRow
                            dr("No") = .GetRowCellValue(i, "No")
                            dr("ItemCode") = .GetRowCellValue(i, "ItemCode")
                            dr("ItemName") = .GetRowCellValue(i, "ItemName")
                            dr("Rate") = .GetRowCellValue(i, "Rate")
                            dr("Qty") = .GetRowCellValue(i, "Qty")
                            dr("Amount") = .GetRowCellValue(i, "Amount")
                            dr("Unit") = .GetRowCellValue(i, "Unit")
                            dt.Rows.Add(dr)
                        Next
                        dr = dt.NewRow
                        dr("No") = .GetRowCellValue(i - 1, "No") + 1
                        dr("ItemCode") = ""
                        dr("ItemName") = ""
                        dr("Rate") = "0"
                        dr("Qty") = "0"
                        dr("Amount") = "0"
                        dr("Unit") = ""
                        dt.Rows.Add(dr)
                        grdInvoice.DataSource = dt
                        .FocusedRowHandle = i
                        .FocusedColumn = .Columns("ItemCode")
                    End If
                End If

            End If
        End If
    End With 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-01T23:35:20.543

我总是在数据源中添加一项，例如：

```
 private void AgregarDetalle_Click(object sender, EventArgs e) {
            var list = GridOpcionDetalle.DataSource as List<DetalleOpcion>;
            list.Add(new DetalleOpcion());

            GridOpcionDetalle.DataSource = list;
            GridOpcionDetalle.RefreshDataSource();
        } 
```

# c# - 在不使用正则表达式的情况下将地址字符串拆分为数字和文本部分

> ID：14110810
> 
> 赞同：2
> 
> 时间：2013-01-01T13:19:04.270
> 
> 标签：c#

我在 C# 中工作，我有很多包含地址的字符串，例如：

> ```
> 10 Downing Street
> Birch Lane 7 
> Palm Creek 8 Street
> 84 Chancellor Place
> Battle on the Somme 56 
> ```

等等。

我需要将这些字符串拆分为数字部分（例如“10”或“7”）和文本部分（例如“唐宁街”或“Birch Lane”）。

哦，我被要求不要使用 RegEx。

我已经尝试将它们拆分为这样的空间：

```
string s ="84 Chancellor place";
string [] words = s.Split(' '); 
```

问题是（当然）它不会以相同的方式拆分所有字符串，所以我不能总是从文本的其余部分中排除数字（我并不总是知道数字是以 words[0] 表示的例如，文本部分在不同的单元格中并且没有融合在一起）。

非常感谢您帮助找到提取数字的方法。

**编辑**：每个示例中的所需输出：

```
string1=10  string2=Downing Street
string1=7   string2=Birch Lane 
string1=8   string2=Palm Creek Street
string1=84  string2=Chancellor Place
string1=56  string2=Battle on the Somme 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:46:19.167

您可以使用此循环在and`List<Address>`的帮助下初始化 a ：`string.Split``int.TryParse`

```
List<Address> addresses = new List<Address>();
foreach (string str in strings)
{
    Address addr = new Address();
    addresses.Add(addr);
    int num, numIndex = int.MinValue;
    string[] tokens = str.Split(new[]{' '}, StringSplitOptions.RemoveEmptyEntries);
    for (int i = 0; i < tokens.Length; i++)
    {
        if (int.TryParse(tokens[i], out num))
        {
            addr.Number = num;
            numIndex = i;
            break;
        }
    }
    if (addr.Number.HasValue)
    {
        // join the rest with white-spaces to the street name skipping the number
        addr.Street = string.Join(" ", tokens.Where((s, i) => i != numIndex));
    }
    else
    {
        addr.Street = str;
    }
} 
```

使用了这个小班：

```
class Address
{
    public int Number { get; set; }
    public string Street { get; set; }
} 
```

[**演示**](http://ideone.com/I1RFqq)

**免责声明**：请注意，如果输入是任意的，这根本不是故障安全的。世界上有很多街道也包含数字，也有`chars`像“17a”这样的数字。

# asp.net - 如何找到单击了哪个图像按钮？

> ID：14110811
> 
> 赞同：2
> 
> 时间：2013-01-01T13:19:09.723
> 
> 标签：asp.net

我创建了一个动态显示公共汽车座位布局的函数。现在，在将所有这些动态创建的表格和单元格添加到标签中之后，我想知道单击了哪个图像按钮。我还提到了单元格中每个图像按钮的正确 ID。

```
public void DisplaySeatLayout(ListBus _listBus) {
        //fetching data from database     
        SeatBUS _seatBUS = new SeatBUS();
        DataTable dt = _seatBUS.GetAllSeatByBusRouter(_listBus);

        //Layout generation code    
        ImageButton img ;
        HtmlTable table = new HtmlTable();
        table.Attributes.Add("runat", "server");
        table.Attributes.Add("id", "LayoutTable");

        HtmlTableRow [] tr = new HtmlTableRow[] { new HtmlTableRow(), new HtmlTableRow(), new HtmlTableRow(),new HtmlTableRow(),new HtmlTableRow()};
        HtmlTableCell tc = null;
        int SeatNo=0;
        //Getting Total no of seats.
        int MaxSeatNo = dt.Rows.Count;
        //Iterating datatable

            //Displaying labels for displaying column names in the table
            for (int columnCounter = 0; columnCounter < 8; columnCounter++){

                for (int rowCounter = 0; rowCounter < 5; rowCounter++){

                    if (SeatNo < MaxSeatNo){
                            if (rowCounter == 2 && columnCounter < 7){
                                tc = new HtmlTableCell();
                                Label lbl = new Label();
                                lbl.Text = "";
                                lbl.ID = "lbl " + rowCounter.ToString() + columnCounter.ToString();

                                tc.Controls.Add(lbl);
                                tr[rowCounter].Controls.Add(tc);
                                //reducing seat number for sake of sequence.

                            }
                            else{
                                //adding label in each cell.
                                tc = new HtmlTableCell();
                                Label lbl = new Label();
                                lbl.Text = dt.Rows[SeatNo]["NumberSeat"].ToString();
                                lbl.ID = "lbl " + rowCounter.ToString() + columnCounter.ToString();

                                tc.Controls.Add(lbl);
                                //adding imagebutton in each cell . 
                                img = new ImageButton();
                                img.Attributes.Add("type", "image");
                                img.Attributes.Add("id", rowCounter.ToString());
                                img.CssClass = "seatRightMostRow1";
                                img.ImageUrl = "../Images/available_seat_img.png";
                                img.ID = dt.Rows[SeatNo]["NumberSeat"].ToString();
                                img.Click += new ImageClickEventHandler(Imagebutton_Click);
                                tc.Controls.Add(img);
                                tr[rowCounter].Controls.Add(tc);
                                SeatNo++;
                            }
                    }//SeatNo < MaxSeatNo
                  table.Controls.Add(tr[rowCounter]);
                }
                seatArranngement.Controls.Add(table);
            }

} 
```

这是建议后的完整代码。显示动态表的函数在 Page_load 内

```
 protected void Page_Load(object sender, EventArgs e)
     {
      _listBusBUS = new ListBusBUS();
       _routerBUS = new RouterBUS();
      _listBus = new ListBus();
      _promoteBUS = new PromoteBUS(); 

       if (!Page.IsPostBack)
      {
          LoadData();

      }
      DisplaySeatLayout();
    } 
```

另外在这里我已经在预渲染中复制了代码

```
 protected override void OnPreRender(EventArgs e)
     {
    if (MultiView1.ActiveViewIndex == 1)
    {
        int listBusID = int.Parse(hdlListBusID.Value.ToString());
        _listBus = _listBusBUS.GetAllListBusById(listBusID);

        litListBusID.Text = _listBus.ListBusID.ToString();
        litRouterID.Text = _listBus.RouterID.ToString();
        litArrival.Text = _listBus.Arrival.ToString();
        litDeparture.Text = _listBus.Departure.ToString();
        litPrice.Text = _listBus.Price.ToString();
    }
    else if (MultiView1.ActiveViewIndex == 2)
    {

        //original code starts from here
        litListBusIDS.Text = litListBusIDS.Text;
        litRouterIDS.Text = litRouterID.Text;
        litArrivalS.Text = litArrival.Text;
        litDepartureS.Text = litDeparture.Text;
        litSeat.Text = hdlSeat.Value;// chkSeat.SelectedItem.Text;

        litPrices.Text = litPrice.Text;
        //hdlSeat.Value = chkSeat.SelectedItem.Text.ToString();
    }
    else if (MultiView1.ActiveViewIndex == 3)
    {
        litCustomerNameStep4.Text = txtcustomername.Text;
        litSeatStep4.Text = litSeat.Text;
        litPriceStep4.Text = litPrices.Text;
    }
    base.PreRender(e);
} 
```

此外，如果我单击任何图像按钮，则会创建两次布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:01:16.083

您所要做的就是获取您已经放置在“ `id`”属性中的值。

`Imagebutton_Click`您甚至可以在您创建的内部执行此操作：

```
 protected void Imagebutton_Click(object sender, EventArgs e)
 {
        ImageButton b = sender as ImageButton;
        string id = b.Attributes["id"]; // Returns the id
 } 
```

# asp.net - 在运行时在 asp.net 中添加控件

> ID：14110812
> 
> 赞同：-2
> 
> 时间：2013-01-01T13:19:23.503
> 
> 标签：asp.net, web-applications, c#-3.0

我想通过以下形式的代码动态添加控件

```
lblName   txtName       lblSubject    txtSubject         btnAddNewRow/linkAddNewRow 
```

这样 btAddNewRow/linkAddNewRow 在运行时在当前行下方生成新行。有人可以以最好的方式提供帮助。另外是否可以仅使用标签而不使用表格，即 td th 进行格式化。我使用行只是为了显着。我不打算使用表格行。请考虑前缀作为控件的类型。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:11:33.870

基本上，如果您的意图与数据处理有关，DataGrid 和 GridView 将是不错的选择。

动态添加 ROW 而不是 table 实际上并没有太大区别，我可以告诉您，与 DataGrid 和 GridView 相比，您会发现它并不完全合适。

如果您真的想动态添加行，则每次单击任何按钮（添加行按钮或其他）页面都会回发，并且您刚刚添加的行将消失。

人们通常会在创建表和添加行时使用会话来存储整个表。

在 Page_Load 中以及在他们添加行之前，他们将从会话中检索整个表。这有助于将数据保留在原始行中。

* * *

但这对于您处理几乎每一行控件的 ID、格式、样式等可能会很麻烦，并且考虑一下您何时想要处理验证，这可能是地狱。

我并不是说这是不可行的，因为我经历过这个。

另一种更简单的方法是创建一个自定义控件，方法是将一整行包括验证、样式和其他您需要的东西放在自定义控件中，然后将其动态添加到页面中（还需要 Session 或 ViewState 来存储它，同样的事情会发生） .

希望这可以帮助您重新考虑您的设计

# java - 是一种使用批处理编译 .java 文件的方法，但是可以重用批处理文件吗？

> ID：14110813
> 
> 赞同：-2
> 
> 时间：2013-01-01T13:19:28.473
> 
> 标签：java, compiler-construction, batch-file

有没有办法制作一个批处理文件： 1\. 打开 cmd 2\. 要求文件路径 3\. 符合目标文件 4\. 运行我知道如何这样做的产品：

```
@echo off
javac Filename.java
java  Filename 
```

唯一的问题是： 1\. 我想让它可重用（以便它要求文件路径） 2\. 窗口简要显示 javac 不是 regonized 命令的错误，然后关闭。有没有做我想做的事？我知道您可以使用一些设置路径命令的 srt 来解决此问题，但没有任何效果。如果有帮助，我的 jdk 位于 C:/program Files/java/jdk1.7.0_10/bin

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T13:30:31.890

看看这些问题：

[如何在批处理文件中从控制台读取输入？](https://stackoverflow.com/questions/7879791/how-to-read-input-from-console-in-a-batch-file)

[我的批处理文件中的用户输入问题](https://stackoverflow.com/questions/916413/problem-with-user-input-in-my-batch-file)

[如何让批处理文件接受来自 txt 文件的输入？](https://stackoverflow.com/questions/10653371/how-do-i-get-a-batch-file-to-accept-input-from-a-txt-file)

[用户输入 - DOS 批处理文件](https://stackoverflow.com/questions/1876987/user-input-dos-batch-file)

还有更多[...](http://www.robvanderwoude.com/userinput.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:28:00.280

我建议改为查看现有的构建工具。为什么？您要求一个可重复使用的解决方案。根据我的经验，在构建项目时，一旦它们变得更大，每个都有自己的方式。因此，构建工具必须足够通用才能满足所有需求。您在问题中提供的解决方案不适用于更复杂的示例。

那里有更复杂的构建工具，但您可以先看看 Ant。

# matlab - 为什么用零结构元素腐蚀/膨胀图像会导致 (-)Inf 值？

> ID：14110820
> 
> 赞同：6
> 
> 时间：2013-01-01T13:20:52.083
> 
> 标签：matlab, image-processing

我在带有图像 m 的 matlab 中使用 imerode 和 imdilate

```
0 0 0 
0 1 0
0 0 0 
```

和结构元素 f

```
0 
```

使用 imerode 的结果是

```
inf inf inf
inf inf inf
inf inf inf 
```

因为 imdilate 是

```
-inf -inf -inf
-inf -inf -inf
-inf -inf -inf 
```

有人可以向我解释吗？
非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:58:05.660

当将结构元素应用于不存在的值时会发生此工件（例如，它可能发生在边界处，或者在您的情况下使用排除中心的 1x1 结构元素）。
在这种情况下，MATLAB's`imerode`和`imdilate`yield`-Inf`和`Inf`分别。

[您可以在此处](http://blogs.mathworks.com/steve/2007/03/23/pad-values-in-dilation-and-erosion/)阅读更多内容以了解此现象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-09T14:05:04.547

要理解这个问题，需要先了解腐蚀和膨胀运算符。这些操作的典型概括是作为局部最小和最大过滤器（其中结构元素（SE）或内核选择要过滤的元素）。

# 用真实例子解释膨胀和腐蚀

对于一个由真实元素组成的 3x3 平方的 SE，侵蚀通过找到该元素与其所有 8 个相邻元素之间的最小值来计算每个图像元素的最小值：

```
octave> im
im =

   5   9   2   6
   8   5   8   1
   7   8   6   9
   8   4   8   1

octave> imerode (im, [1 1 1; 1 1 1; 1 1 1])
ans =

   5   2   1   1
   5   2   1   1
   4   4   1   1
   4   4   1   1 
```

如果将 SE 的中心元素设置为 false，那么它会计算其所有 8 个相邻元素中的最小值（请注意，它不包括自身）。

```
octave> imerode (im, [1 1 1; 1 0 1; 1 1 1])
ans =

   5   2   1   1
   5   2   1   2
   4   4   1   1
   4   6   1   6 
```

但是当你的 SE 是“空的”并且没有真正的元素时会发生什么？如果图像中没有元素从哪里计算最小值怎么办？您的用例，即 just 的 SE `0`，非常具体，因为它根本没有任何真正的元素。侵蚀操作需要计算一个空集的最小值。空集的最小值是多少？

```
octave> imerode (im, [0])
ans =

   Inf   Inf   Inf   Inf
   Inf   Inf   Inf   Inf
   Inf   Inf   Inf   Inf
   Inf   Inf   Inf   Inf 
```

答案没有多大意义。但也没有操作，即空集的最小值。但是，Matlab 究竟是如何得到这个奇怪的答案的`Inf`呢？

# 你如何得到可能错误的答案？

`Inf`and的结果`-Inf`（也发生在 Octave 中）是一个实现细节。由于 Matlab 是封闭源代码，我们无法确定它们是如何到达那里的，但这里有一个可能情况的伪代码（它基本上类似于 Octave 中发生的情况）：

```
## pseudo-code for imerode (local-minimum) that may causes this issue
set eroded to image
for each element in image
    set MIN_VAL to +Inf
    for each value in element neighbourhood
        if value < MIN_VAL
            set MIN_VAL to value
    set eroded[element index] to MIN_VAL 
```

# 这真的是全部吗？我们真的不能用这样的 SE 计算腐蚀和膨胀吗？

如果您查看定义此操作的理论论文，通常在连续区间（而不是离散区间）中，您会发现它指的是上[确界和](https://en.wikipedia.org/wiki/Infimum_and_supremum)下确界，其结果是[`-Inf`和`+Inf`对于空集](https://en.wikipedia.org/wiki/Empty_set#Extended_real_numbers)，而不是最大值和最小值。因此，这取决于您在定义膨胀和腐蚀时是否使用上确界和下确界，而不是最大值和最小值。这也取决于你是否接受空集的上确界和下确界是`-Inf`和`+Inf`。

Matlab 是否因此`Inf`而`-Inf`故意返回？我不知道，但我不会。他们的 imerode 和 imdilate 文档仅参考了 max 和 min 操作，最明显的实现（参见上面的伪代码）导致了这个结果。

我知道几年前我在实施 Octave时`imdilate`并没有意识到这一点。`imerode`

# 关于填充值的其他答案和评论呢？

如果您的图像没有 的值`Inf`，则它们有两种方式显示为`imdilate`和的结果`imerode`。最终结果，`Inf`价值观，可能看起来一样，但你获得它们的原因却完全不同。

这个问题所涉及的一种情况是，当您有一个“空白” SE 时，即没有真正元素的 SE。在这种情况下，您可以在图像的每个点计算空集的最小值。这与填充无关。没有填充，也没有任何缺失值。你得到 an 的原因`Inf`是你并没有*真正*生成整组值然后找到它的最小值。您从一个值（`Inf`可能的最大值）开始，然后与该集合中的下一个值进行比较。因为该集合本来是空的，所以永远不会进行比较，并最终得到初始值`Inf`. 它解释了这一点：

```
octave> imerode (5, 0)
ans = Inf 
```

另一种导致相同结果但与问题无关的情况是SE仅“挑选”图像之外的元素。这在 Mathworks 博客中解释了[膨胀和腐蚀中的 Pad 值](http://blogs.mathworks.com/steve/2007/03/23/pad-values-in-dilation-and-erosion/)。理论上，腐蚀和膨胀操作忽略了边界外的元素（它们甚至不应该存在）。实际上，您确实会计算它们，因为忽略它们在计算上是昂贵的（从那时起，您需要知道您在图像中的位置并相应地调整 SE）。例如，如果您的 SE 是一个 3x3 正方形，并且您正在评估图像的左上角，则很难避免顶部和左侧超出边界的图像元素。所以 Matlab 用`Inf`因为这些值不会影响 min 的结果。但只有当集合中有其他值可供选择时，这才是正确的。如果在图像中的任何点，所有 SE 都是边界外元素，那么您将计算`Inf`仅来自填充的一组 s 的最小值。它解释了这一点：

```
octave> imerode (5, [1 1 1; 1 0 1; 1 1 1])
ans = Inf

octave> imerode (zeros (3), [0 0 0; 1 0 0; 1 1 0])
ans =

     0     0     0
     0     0     0
   Inf     0     0

octave> imerode (zeros (3), [0 0 0; 0 0 0; 1 1 1])
ans =

     0     0     0
     0     0     0
   Inf   Inf   Inf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:13:27.840

`0`实际上，如果这是您获得的输出，您实际上没有等效的结构元素 (SE) 。根据您的另一个问题[Erose/Dilate image with zeros structuring element](https://stackoverflow.com/questions/14111491/erose-dilate-image-with-zeros-structuring-element/14114379#14114379)，这仅仅是对`strel`Matlab 函数的滥用。

首先，让我们假设您实际上有一个 SE，它是一个独特的点`0`。对于腐蚀，这意味着您将取当前检查位置的强度与仅其自身之间的最小值，因此除了当前位置的强度之外没有其他输出。这与膨胀相同。要检查这一点，请验证描述腐蚀和膨胀公式的任何正确文本。并且，在 Matlab 中：

```
f = [0 0 0; 0 1 0; 0 0 0]
se = strel('arbitrary', 1, 0)
imerode(f, se)

ans =

     0     0     0
     0     1     0
     0     0     0

imdilate(f, se)

ans =

     0     0     0
     0     1     0
     0     0     0 
```

现在，如果您创建一个无效的 SE`se = strel('arbitrary', 0)`并尝试使用形态运算符，我只能期待未定义的结果。Matlab 很好，给你一些东西看。

# jax-ws - 如何仅使用派生密钥检查 UsernameToken？

> ID：14110821
> 
> 赞同：1
> 
> 时间：2013-01-01T13:20:55.193
> 
> 标签：jax-ws, ws-security, wss4j

对于服务器，我如何检查客户端是否使用派生密钥？

我正在使用 WSS4J 开发一个 JAX-WS 项目。

我设法使用密码派生密钥（盐+迭代）使一些代码在 UsernameToken 中工作。

1.  服务器生成用户名/密码并将它们提供给客户端
2.  客户端使用这些信息访问端点。

我想强制客户只使用密码派生的方式

**不允许**

```
<wsse:UsernameToken wsu:Id="Example-1">
  <wsse:Username> ... </wsse:Username>
  <wsse:Password Type="..."> ... </wsse:Password>
  <wsse:Nonce EncodingType="..."> ... </wsse:Nonce>
  <wsu:Created> ... </wsu:Created>
</wsse:UsernameToken> 
```

**一定是**

```
<wsse:UsernameToken wsse:Id="…">
  <wsse:Username>…&lt;/wsse:Username>
  <wsse11:Salt>…&lt;/wsse11:Salt>
  <wsse11:Iteration>…&lt;/wsse11:Iteration>
</wsse:UsernameToken> 
```

我真的可以强迫他们吗？

如何在我的处理程序中检查它？

有人可以告诉我如何使用 WSS4J 吗？

# objective-c - 混合 NSXPCConnection 和 xpc C API

> ID：14110823
> 
> 赞同：3
> 
> 时间：2013-01-01T13:21:09.330
> 
> 标签：objective-c, xpc, nsxpcconnection

我正在使用`NSXPCConnection`包装器处理 XPC 服务，并且由于 Objective-C 包装器无法处理`IOSurfaceRef`对象，我想对 xpc.h 中定义的 C API 进行一些直接函数调用。但是我找不到检索底层`xpc_connection_t`引用的方法（正如我在 NSXPCConnection.h 中看到的，有一个名为的私有 ivar`_xconnection`可能是我需要的引用）。我是否遗漏了一些愚蠢的东西，或者不能简单地将 Objective-C 包装器和 C API 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:48:19.963

不，但`XPCKit`提供了这样的转换机制，并且它与 10.7 兼容。

# delphi - TWebbrowser 导致 AV - 寻找什么

> ID：14110834
> 
> 赞同：0
> 
> 时间：2013-01-01T13:22:57.253
> 
> 标签：delphi, access-violation, twebbrowser

我想隐藏滚动条的表单上有一个 TWebbroser

在 WebBrowser1DownloadComplete 我把 WebBrowser1.OleObject.document.body.scroll:='no'; 但这会导致 AV。如果单击继续，我可以看到滚动条实际上​​已被删除，因此代码必须是正确的。

我想要做的是从谷歌地图中显示一个页面，其中包含我添加的许多标记。此页面需要打印在 A4 页面上，但直接从 TWebbrowser 打印太大（或者至少我无法让它工作）。所以我将它保存为 JPG 图像并将其加载到另一个表单上，使用 DevExpress 打印系统在 A4 页面上使用我想要的页眉和页脚打印它。除了删除滚动条外，一切都像我想要的那样工作。

为了访问谷歌地图，我使用来自[http://www.cadetill.com/gmlib/](http://www.cadetill.com/gmlib/)的 gmLibrary - 非常好的库，它有一个我喜欢的价格标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:41:00.260

只需将您的代码放在 DocumentComplete 事件中即可删除 AV。

如果控件是嵌入的，则删除滚动条的 IE HTML/CSS 技巧将无法可靠地工作。要真正删除滚动条，您必须使用 IDocHostUIHandler 接口继承 TWebBrowser。在 GetHostInfo 中，您必须至少设置 DOCHOSTUIFLAG_SCROLL_NO 标志。

您可以考虑使用现有的后代之一，例如“嵌入式 Web 浏览器组件包”（http://www.bsalsa.com/）。

# vb.net - 使用组合框选择显示 MS ACCESS 表

> ID：14110836
> 
> 赞同：0
> 
> 时间：2013-01-01T13:23:05.863
> 
> 标签：vb.net, ms-access

需要你的帮助。我是一名学生，我正在`VB.Net`为我的会计课程项目做一个程序。现在，我对使用知之甚少，`OleDB`所以我需要你的帮助。

以下是详细信息：

1.  数据库为`MS ACCESS 2007`( `OleDB`)
2.  数据库表是`tbl_login`, `tbl_product`,`tbl_transaction`
3.  形式是`Form1`,`Form2`和 1`Module`
4.  `ComboBox`值为`Users`, `Product`,`Transaction`
5.  语言是`VB`

当我运行程序时，`Form 1`会出现一个登录表单 ( )，需要用户名和密码。当用户提交他的用户名和密码时，程序将检查它是否在名为的数据库表中匹配`tbl_login`。如果匹配，则继续下一个表格 ( `Form 2`)。在这里，存在 a`ListView`和 a `ComboBox`。加载时，列表视图的默认内容是 的内容，`tbl_login`组合框的值为`Users`.

现在，我希望我的程序做的是，当我将组合框值更改为 时`Products`，列表视图项将是 的内容，`tbl_products`当组合框值为 时`transaction`，`tbl_transaction`内容将出现在`listview`.

我将如何编码这个？

我真的很感谢你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:35:59.910

您尚未指定 VB.NET 版本，因此我假设为 .NET 4.0 运行时。我建议您阅读有关组合框事件、控件的 DataSource 属性的信息。您需要在组合框的 SelectionChanged 事件中放入代码以获取 SelectedValue，查询 tbl_transaction 表并分配 ListView 的 DatSource 属性。我不认为我应该添加更多，因为你应该为你的家庭作业工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T04:02:43.713

解决了！我只是在某些领域进行了实验，我不知道究竟是什么解决了这个问题。:) 首先，我将表格字段的所有数据类型从数字更改为文本。其次，我修改了form2_load和combobox_selectedindexchanged中的一些代码。

前：

```
Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    con.ConnectionString = "provider=microsoft.ace.oledb.12.0;data source = ..\Accounting2.accdb"
    con.Open()
    ComboBox1.SelectedIndex = 0
    sSqlUser = "SELECT df, sdf, asdf FROM tbl_login ORDER BY df"
    sSqlProduct = "SELECT cv, xcv, zxcv FROM tbl_product ORDER BY cv"
    sSqlTransaction = "SELECT rt, ert, wert, qwert FROM tbl_transaction ORDER BY rt"
    sSql = sSqlUser
    Call FillList()
    Dim dt As New DataTable
End Sub 
```

* * *

```
Private Sub ComboBox1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
    If ComboBox1.SelectedIndex = 0 Then
        sSql = sSqlUser

    ElseIf ComboBox1.SelectedIndex = 1 Then
        sSql = sSqlProduct

    ElseIf ComboBox1.SelectedIndex = 2 Then
        sSql = sSqlTransaction

    End If
End Sub 
```

* * *

然后：

```
Private Sub Form2_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    con.ConnectionString = "provider=microsoft.ace.oledb.12.0;data source = ..\Accounting2.accdb"
    con.Open()

    sSqlUser = "SELECT df, sdf, asdf FROM tbl_login ORDER BY df"
    sSqlProduct = "SELECT cv, xcv, zxcv FROM tbl_product ORDER BY cv"
    sSqlTransaction = "SELECT rt, ert, wert, qwert FROM tbl_transaction ORDER BY rt"
    ComboBox1.SelectedIndex = 0
End Sub 
```

* * *

```
Private Sub ComboBox1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedIndexChanged
    If ComboBox1.SelectedIndex = 0 Then
        sSql = sSqlUser

    ElseIf ComboBox1.SelectedIndex = 1 Then
        sSql = sSqlProduct

    ElseIf ComboBox1.SelectedIndex = 2 Then
        sSql = sSqlTransaction

    End If
    Call FillList()
    Dim dt As New DataTable
End Sub 
```

# python - 如何使用 python 测试端口上是否打开了服务器？

> ID：14110841
> 
> 赞同：4
> 
> 时间：2013-01-01T13:23:37.203
> 
> 标签：python, sockets, windows-xp, connect, python-2.5

好的，所以我做了以下操作，认为如果无法连接它会引发异常：

```
>>> s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
>>> s.settimeout(0.2)
>>> s.connect(("thisdomaiyndontexistduhh.com", 80)) 
```

但没有提出任何例外。如何使用 Python 的 socket 模块测试端口上是否打开了服务器？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-02T07:19:52.233

这就是为什么上面的代码永远不会失败的原因。

我的 ISP (Frontier) 配置 DNS，以便对于任何不存在的域，它将返回“198.105.251.114”。因此，他们实际上有一个 Web 服务器在该地址的 80 端口上侦听以显示一些垃圾/垃圾邮件搜索结果。将您的主机更改为使用 8.8.8.8（Google 服务器）作为 DNS，您的上述代码可能会起作用。

鉴于这些类型的“强制网络”很常见，您的代码应该做的第一件事就是确定它是否在这样的网络上。因此，正确的做法是调用 socket.gethostbyname("thisdomaiyndontexistduhh.com")。如果它实际上返回一个值，那么您就知道您在这样的 DNS 服务器后面。因此，然后在要探测的服务器上执行 gethostbyname 调用。如果它返回相同的 DNS 地址，您就知道该服务器不存在。否则，继续进行连接调用以完成测试。

更新：假期我一直在学习Python，所以我以这个问题为借口练习。这是我的代码：

```
import socket

def DoesServiceExist(host, port):
    captive_dns_addr = ""
    host_addr = ""

    try:
        captive_dns_addr = socket.gethostbyname("BlahThisDomaynDontExist22.com")
    except:
        pass

    try:
        host_addr = socket.gethostbyname(host)

        if (captive_dns_addr == host_addr):
            return False

        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        s.settimeout(1)
        s.connect((host, port))
        s.close()
    except:
        return False

    return True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-15T13:46:44.363

我发现这个解决方案使用`telnetlib`和`urllib`测试像“https://example.com:6789/test”这样的url中的服务器之间的连接，在这种特殊情况下，我首先寻找端口，然后是模式。我只考虑“http”和“https”，但添加或更改架构（sftp、ssh 等）很容易。

```
import telnetlib
import time
from urllib.parse import urlsplit

def verify_service(endpoint):

    netloc = "{0.netloc}".format(urlsplit(endpoint))
    scheme = "{0.scheme}".format(urlsplit(endpoint))

    if netloc == '':
        return False

    p = netloc.split(":")

    if len(p) == 2:
        host = p[0]
        port = p[1]
    else:
        host = p[0]
        port = 80 if scheme == "http" else "443"

    try:
        tn = telnetlib.Telnet(host,port)
        time.sleep(1)
    except:
        return False

    return True 
```

# php - 使用 PDO 和 FIND_IN_SET 进行动态查询

> ID：14110842
> 
> 赞同：1
> 
> 时间：2013-01-01T13:23:42.610
> 
> 标签：php, mysql, select

我正在使用 PDO 来构建我的查询，这些查询依赖 FIND_IN_SET 来选择某些行。集合的元素通过 POST 传递到服务器，查询构造如下：

```
SELECT * FROM table WHERE
(FIND_IN_SET('param1', column) > 0 OR FIND_IN_SET('param2', column) > 0) 
```

这就是查询的基本构造方式。因为要在集合中查找的参数数量是动态的，所以查询的 FIND_IN_SET 部分是动态进行的：

```
$q = implode("', column)>0 OR FIND_IN_SET('", $array); 
```

然后应用于查询，如下所示：

```
SELECT * FROM table WHERE
AND (FIND_IN_SET(:q, e.event_type)>0); 
```

查询最终执行为：

```
$countResult->execute(array(':q' => $q); 
```

请注意，$q 可能采用以下形式：

```
"param1', column)>0 OR FIND_IN_SET('param2', column)>0 OR FIND_IN_SET('param3" 
```

如果我不使用 PDO，查询会正确执行，但是使用 PDO 时，查询在数组中只有一个元素时有效，但在数组包含多个元素时不返回任何结果。

执行方法是否可能对参数做一些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T13:44:52.960

您可以使用从每个数组元素[`array_map()`](http://php.net/manual/en/function.array-map.php)创建表达式，然后将结果用作胶水：`FIND_IN_SET()`[`implode()`](http://php.net/manual/en/function.implode.php)`' OR '`

```
function fis($c) {
  return function($k) {return "FIND_IN_SET(:$k, $c)";}
}

$arr = array(
  'p1' => 'param1',
  'p2' => 'param2'
);
$qry = $dbh->prepare('
  SELECT *
  FROM   table
  WHERE  ('.implode(' OR ', array_map(fis('column'), array_keys($arr))).')
');
$qry->execute($arr); 
```

# ruby-on-rails-3 - nginx（+ 乘客）似乎没有在端口 80 上运行

> ID：14110843
> 
> 赞同：1
> 
> 时间：2013-01-01T13:23:56.463
> 
> 标签：ruby-on-rails-3, macos, nginx, passenger, homebrew

我在我的用户帐户（*通过****自制软件****）上安装了 nginx（带* ***乘客***）。几个小时以来，我认为这件事只是拒绝工作，因为我无法让任何 Rails3 应用程序响应一个简单的 nginx 声明的位置。经过深思熟虑（*又名反复试验*），我得出结论，它确实有效，但拒绝使用端口 80。

 ***我知道，**自制软件**安装是按用户安装的，因此它不应该能够在仅限 root 的端口（*即端口 1024 及以下*）上运行，但**自制软件本身**（*以及网络上的各种来源*）建议简单地运行服务器通过`sudo nginx`足以允许它使用端口 80。

**这些是**有效的配置的重要文件：

### /etc/主机：

```
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1       doomhub.local localhost
255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0     localhost 
```

### /usr/local/etc/nginx/nginx.conf：

```
#user  nobody;
worker_processes  1;

events {
    worker_connections  1024;
}

http {
    passenger_root /Users/ellmo/.rvm/gems/ruby-1.9.3-p125/gems/passenger-3.0.18/;
    passenger_ruby /Users/ellmo/.rvm/rubies/ruby-1.9.3-p125/bin/ruby;

    include       mime.types;
    default_type  application/octet-stream;

    access_log  logs/access.log;  #main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

        server {
            server_name doomhub.local;
            listen 8080;
            root /Users/ellmo/rails/doomhub/public;
            passenger_enabled on;
            passenger_use_global_queue on;
            rails_env development;
        }
} 
```

当我将应用程序的服务器端口更改为 时`80`，我自然会 - 在重新启动时 - 收到：

`nginx: [emerg] bind() to 0.0.0.0:80 failed (13: Permission denied)`

...但是当我`sudo`这样做时，错误不会显示，该过程将`root`以其所有者身份开始。但是`http://doomhub.local`在浏览器中打开什么都没有返回（*好吧，从技术上讲，这是一个“浏览器无法解析地址”错误，但我没有收到其他错误，没有 nginx 错误*）。我没有日志，什么也没有。

当我将侦听端口更改回 8080 （或其他任何东西）时，当我以普通用户身份运行它时，它就像一个魅力......但是我真的想`http://doomhub.local`在我的浏览器中使用而不是`http://doomhub.local:8080`.

有什么东西会阻止 OSX 应用程序监听端口 80，我错过了吗？如您所见，我可以**使用**它，因此没有其他过程。它只是不听任何东西。

有没有办法`8080`在浏览器中将其视为“正常” **http**端口？

# 编辑：

[正如Jan Schejbal 所](https://stackoverflow.com/users/1939031/jan-schejbal)建议的那样指定乘客用户并没有解决我的问题，过了一段时间我最终为乘客创建了**rvm包装器（***而不是允许它使用清晰的 ruby​​ 二进制文件*），如这篇精彩的帖子中所述：

[http://everydayrails.com/2010/09/13/rvm-project-gemsets.html](http://everydayrails.com/2010/09/13/rvm-project-gemsets.html)

由于创建了一个**仅限乘客/捆绑程序的 rvm 包装器，当我以****root**身份启动 nginx 时，我设法让应用程序运行。我可以指定仅 root 和用户允许的侦听端口（*即我测试了 8080 和 81* ）并且即使使用与包装二进制文件无关的**所有**gem，应用程序也可以正常服务。然而...

...我仍然在 80 端口上一无所获。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T20:26:59.793

## 正确诊断

哈！我完全忘记了我的系统上安装了**pow 。****我知道在开始玩nginx**之前我已经完全禁用了它，但这还不够。您可能知道**pow**是一个零配置服务器工具，它会自动创建 localhost 域 - 这也意味着它...“占用”端口 80，如果您键入以下内容，您可以看到：

`sudo ipfw list`

这应该返回类似：

```
00100 fwd 127.0.0.1,20559 tcp from any to me dst-port 80 in
65535 allow ip from any to any 
```

...这清楚地表明端口 80 上的任何 ip 连接都被转发到 20559（***pow 的*** *端口*）

## 解决方案

我们现在要做的是删除此端口 80 转发信息并使用其他端口代替它。这将使我们能够轻松地为多个 Rails 应用程序托管开发服务器（**每个应用程序都有自己的 gemset 和配置），并通过****乘客的**上游代理它们。

[关于如何完成此任务的第一部分有一篇很棒的文章](http://leonid.shevtsov.me/en/how-to-install-nginx-over-pow-in-os-x)。对我来说，似乎只需手动更改**ipfw**条目就足够了，但我选择了博客条目。如果您这样做 - 请确保您使用[pow 手册中正确的](http://pow.cx/manual.html#section_1)**pow**安装/卸载脚本；例如，在安装脚本成功编译**之前，我必须完全****卸载**pow 。

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:29:17.380

我假设以 root 身份运行会导致权限问题，导致应用程序无法运行。您是否尝试过与and `PassengerUserSwitching`一起使用该选项？`PassengerUser``PassengerGroup`

编辑：错过了“无法解析地址”错误。仍然尝试上述方法（Passenger 有时很奇怪），但也尝试运行 netstat 以查看端口是否正确绑定。*******

# asp.net - 如何获取值（draft.DraftId = new int();)并在变量中使用

> ID：14110852
> 
> 赞同：0
> 
> 时间：2013-01-01T13:25:14.817
> 
> 标签：asp.net, linq

在我的 aspx 页面中，当我选择值“草稿文档”时，我有一个下拉列表，它会变成新的`DraftID`（身份）。在此下拉列表下方，我有上传控件，并且在我附加时显示文件的 gridview。我已使用以下查询来查询 gridview 的数据源，但值有问题（_DraftId）

```
var query = from at in _DataContext.tblAttachments
                where at.DraftID == _DraftId
                select at; 
```

它是空的，而我在顶部使用过`_DraftId = (int)draft.DraftId;`。实际上我不知道如何获取值`draft.DraftId = new int();`并在变量中使用它并在其他代码位置使用。

```
Tbldraft
DraftID BIGINT IDENTITY(1,1) PRIMARY KEY
FromEmailID 

Tblattachement:
 AttachmentID BIGINT  IDENTITY(1,1) PRIMARY KEY,
Draftid BIGINT NOT NULL REFERENCES tblDraft(DraftID),
FileName varchar(40)  NOT NULL, 
```

ASP.cs

```
 public partial class Draft : System.Web.UI.Page
  {
  private EDMSDataContext _DataContext;
  private int _DraftId;
  private string _filePath;
  private string _filename;
  private string _filename_Ext;

protected void Page_Load(object sender, EventArgs e)
{
}

protected void ddlDraft_SelectedIndexChanged(object sender, EventArgs e)
{
    _DataContext = new EDMSDataContext();
    if (ddlDraft.SelectedValue == "Draft Document")
    {

        tblDraft draft = new tblDraft();
        draft.DraftId = new int();
        _DraftId = (int)draft.DraftId;
        draft.FromEmailId = (Guid)Membership.GetUser().ProviderUserKey;

        _DataContext.tblDrafts.InsertOnSubmit(draft);
        _DataContext.SubmitChanges();
    }
}

protected void btnUpload_Click(object sender, EventArgs e)
{
    string filePath = FileUpload1.PostedFile.FileName;
    string fullAddress = Path.GetFullPath(filePath);
    _filePath = fullAddress;

    string filename = Path.GetFileName(filePath);

    _filename = filename.Split('.')[0];
    _filename_Ext = filename;

    string ext = Path.GetExtension(filename);

    string contenttype = String.Empty;

    //Set the contenttype based on File Extension

    switch (ext)
    {

        case ".doc":

            contenttype = "application/vnd.ms-word";

            break;

        case ".docx":

            contenttype = "application/vnd.ms-word";

            break;

        case ".xls":

            contenttype = "application/vnd.ms-excel";

            break;

        case ".xlsx":

            contenttype = "application/vnd.ms-excel";

            break;

        case ".jpg":

            contenttype = "image/jpg";

            break;

        case ".png":

            contenttype = "image/png";

            break;

        case ".gif":

            contenttype = "image/gif";

            break;

        case ".pdf":

            contenttype = "application/pdf";

            break;

    }

   // if (contenttype != String.Empty)
  //  {

        Stream fs = FileUpload1.PostedFile.InputStream;

        BinaryReader br = new BinaryReader(fs);

        Byte[] bytes = br.ReadBytes((Int32)fs.Length);
        //insert the file into database
 //   }

    tblAttachment attach = new tblAttachment();
    attach.DraftID = _DraftId;
    attach.FileName = filename;
    attach.ContentType = contenttype;
    attach.Data = bytes;
    attach.Exten = ext;
    _DataContext.tblAttachments.InsertOnSubmit(attach);
    _DataContext.SubmitChanges();
    //doctranscon.TransmitToConid = Convert.ToInt32(ddlTransmittaltoCon.SelectedValue);
    var query = from at in _DataContext.tblAttachments
                where at.DraftID == _DraftId
                select at;
    GridViewEfile.DataSource = query;
    GridViewEfile.DataBind();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T19:45:09.847

快速查看源代码，我建议重新`SelectedIndexChanged`安排*在*. `SubmitChanges`只有在保存之后，id 才会可用；在此之前，它不存在。

```
protected void ddlDraft_SelectedIndexChanged(object sender, EventArgs e)
{
    _DataContext = new EDMSDataContext();
    if (ddlDraft.SelectedValue == "Draft Document")
    {

        tblDraft draft = new tblDraft();
        draft.FromEmailId = (Guid)Membership.GetUser().ProviderUserKey;
        _DataContext.tblDrafts.InsertOnSubmit(draft);
        _DataContext.SubmitChanges();
        _DraftId = (int)draft.DraftId;
    }
} 
```

Also, as a side-note, I'd consider whether a) some error handling might be useful in the above snippet, and b) whether a better solution might not be found to replace the global variable for storing `_DraftId`.

HTH.

# ios - 在方向更改时自动缩放 UIView 以按比例缩放以适合父视图

> ID：14110854
> 
> 赞同：2
> 
> 时间：2013-01-01T13:25:27.653
> 
> 标签：ios, uiview, autoresizingmask

设置为“Aspect Fit”的`UIImage`视图将自动动态缩放其图像以适应当前边界`UIUmageView`，同时保持图像的比例。设置为“ `UIView`Aspect Fit”似乎对其子视图没有同样的效果。

我尝试使用下面的代码通过代码设置父视图，并尝试了自动调整大小掩码的几种变体（我没有使用自动布局）。我是否遗漏了一些明显的东西，或者我是否需要编写一些代码来根据父视图的当前大小为我的子视图计算正确的比例？

```
[self.view setContentMode:UIViewContentModeScaleAspectFit]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T15:01:17.223

从文档中：

> 内容模式指定当视图的边界发生变化时如何调整视图层的缓存位图。

对于图像视图，这是在谈论图像。对于绘制其内容的视图，这是在谈论绘制的内容。它不*影响*子视图的布局。

您需要查看 subviews 上的自动调整大小*掩码*。内容模式在这里是一个红鲱鱼。如果您无法使用自动调整大小的蒙版实现所需的布局，则需要`layoutSubviews`手动实现和计算子视图位置和框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T06:33:36.613

*   内容模式不影响视图的子视图。
*   您将使用自动调整大小的掩码来确定子视图的布局方式。
*   如果这还不够，您可能需要实施 `layoutSubviews`

引用自：[https ://stackoverflow.com/a/14111480/1374512](https://stackoverflow.com/a/14111480/1374512)

其他有用信息`layoutSubviews`：[https ://stackoverflow.com/a/5330162/1374512](https://stackoverflow.com/a/5330162/1374512)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T13:44:14.753

这个怎么样 ：

```
 self.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth; 
```

或者你可以试试这个：

```
// horizontal 
   childView.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin |  UIViewAutoresizingFlexibleRightMargin;

// vertical 
   childView.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin;

// both 
   childView.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin; 
```

如果您需要任何进一步的参考，我认为这是两个漂亮的问题：

1)[以编程方式自动调整蒙版大小](https://stackoverflow.com/questions/7754851/autoresizing-masks-programmatically-vs-interfact-builder-xib-nib?lq=1)

2) [UIView 和 AutoresizingMask 被忽略](https://stackoverflow.com/questions/3741566/uiview-and-autoresizingmask-ignored?rq=1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T16:40:31.317

我一直在玩它。这是不完整的，只是处理纵向子视图缩放，但到目前为止工作正常。

```
if (self.view.bounds.size.width < self.view.bounds.size.height) {
    NSLog(@"view is portrait");
    if (_sview.frame.size.width < _sview.frame.size.height) {
        NSLog(@"subview is portrait");
        [UIView animateWithDuration:0.1
                         animations:^{
                             _sview.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.0, 1.0);
                         }];
    } else {
        NSLog(@"subview is landscape");
    }
} else {
    NSLog(@"landscape");
    if (_sview.frame.size.width < _sview.frame.size.height) {
        [UIView animateWithDuration:0.1
                         animations:^{
                             _sview.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.65, 0.65);
                         }];
    } else {
        NSLog(@"subview is landscape");
    }

} 
```

# android - 如何在 Linux/Android 2.6.29 中找到系统调用实现？

> ID：14110856
> 
> 赞同：4
> 
> 时间：2013-01-01T13:25:35.187
> 
> 标签：android, linux, linux-kernel

我想修改一些系统调用以进行跟踪。具体来说，每当进行系统调用时`open`，我都想打印一些消息。

我一直在寻找互联网和代码，我`open.c`在`kernel/goldfish/fs/`目录中找到了。而且这个文件里有很多功能。我怎么知道确切地调用了哪个函数。我本可以`printk`在所有这些函数中编写一些调用来找到它，但我也必须为其他系统调用这样做。

所以，我有几个问题，

1）找到系统调用的实现细节的最佳方法是什么？

2) 我使用的是内核 2.6.29 (goldfish-Android)。不同内核版本中的系统调用实现是否不同？

3)`strace`告诉我`msgget`,`msgrecv`和 'SYS_24' 系统调用正在进行。我查看了`Android/bionic/libc/SYSCALLS.txt`文件，但 msgget 不存在。

但是当我查看`android/bionic/libc/kernel/arch-arm/asm/unistd.h`文件时，我可以找到`msgget`那里。我不明白发生了什么，然后我该如何找到实现`msgget`？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T06:10:00.707

[这个链接](http://syscalls.kernelgrok.com/)提到了几乎所有的系统调用，它们的参数和各自文件中的位置。它帮助我找到了系统调用的详细信息。

克里斯在上面的评论中给出了 strace 的答案，再次感谢他。

# android - 在editText上绘制多行

> ID：14110860
> 
> 赞同：1
> 
> 时间：2013-01-01T13:25:48.230
> 
> 标签：android

我想创建一个记事本。我指的是 android sdk 提供的示例记事本。我的问题是我未能在 editText 上绘制多行。我已成功运行该程序，但 editText 上没有显示任何内容，更糟糕的是我无法在其上输入单词。这是我的代码。谢谢你的帮忙。

就观点而言，我对我的课程路径进行了双重确认。所以，我认为我的课程路径没有任何问题。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView 
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:id="@+id/layouteditbottom"
        android:layout_alignParentBottom="true"
        android:paddingBottom="18dp"
        />  

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:paddingBottom="5dp"
        android:paddingTop="5dp"
        android:layout_above="@+id/layouteditbottom">
        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="18sp" 
            android:text="@string/title"
            android:id="@+id/title_text1" />

        <EditText android:id="@+id/title"
            android:layout_toRightOf="@+id/title_text1"             
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:imeOptions="actionNext"
            android:textSize="18sp"/>

        <View xmlns:android="http://schemas.android.com/apk/res/android"
            class="com.example.apps2.MainActivity$LineEditText"
            android:id="@+id/body"
            android:layout_below="@+id/title"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:background="@android:color/transparent"
            android:padding="5dp"
            android:scrollbars="vertical"
            android:fadingEdge="vertical"
            android:gravity="top"
            android:textSize="22sp"
            android:capitalize="sentences"/> 
    </RelativeLayout>
</RelativeLayout> 
```

下面的代码是java。

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);     

    }

     public static class LineEditText extends EditText{
            // we need this constructor for LayoutInflater
            public LineEditText(Context context, AttributeSet attrs) {
                super(context, attrs);
                    mRect = new Rect();
                    mPaint = new Paint();
                    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
                    mPaint.setColor(Color.BLUE);
            }

            private Rect mRect;
            private Paint mPaint;       

            @Override
            protected void onDraw(Canvas canvas) {
                //int count = getLineCount();

                int height = getHeight();
                int line_height = getLineHeight();

                int count = height / line_height;

                if (getLineCount() > count)
                    count = getLineCount();//for long text with scrolling

                Rect r = mRect;
                Paint paint = mPaint;
                int baseline = getLineBounds(0, r);//first line

                for (int i = 0; i < count; i++) {

                    canvas.drawLine(r.left, baseline + 1, r.right, baseline + 1, paint);
                    baseline += getLineHeight();//next line
                }

                super.onDraw(canvas);
           }

    }   

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T13:59:00.273

只需将背景图像添加到带有线条的 editText 即可。

**编辑**

为自己创建一个可绘制的位图，并将 tileMode 设置为重复，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@[package:]drawable/drawable_resource"
    android:tileMode="repeat" /> 
```

用于`android:src`指定具有与一行文本的高度匹配的行和一些空间的图像（取决于您的字体大小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:28:32.360

用于`android:lines="2"`修复**多行**和**修复单行**使用`android:singleLine="true"`在您的 XML 中，您使用单行删除它并使用如示例所示。

更改您的edittext，如下所示

```
 <EditText android:id="@+id/title"
        android:layout_toRightOf="@+id/title_text1"             
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        //android:singleLine="true"
        android:lines="2"// fix the multiline limit 2,3,4,5,6,7.....
        android:imeOptions="actionNext"
        android:textSize="18sp"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T15:30:15.080

感谢所有回答的人。我通过将视图从最外面的 relativeLayout 替换为内部的 relativeLayout 来解决它。下面的代码就是答案。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView 
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:id="@+id/layouteditbottom"
        android:layout_alignParentBottom="true"
        android:paddingBottom="18dp"
        />  

    <RelativeLayout
        android:id="@+id/toplayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="5dp"
        android:paddingTop="5dp"        
        android:layout_alignParentTop="true">       
        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="18sp" 
            android:text="@string/title"
            android:id="@+id/title_text1" />                    
        <EditText android:id="@+id/title"
            android:layout_toRightOf="@+id/title_text1"             
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:imeOptions="actionNext"
            android:textSize="18sp"/>
        <TextView
            android:id="@+id/notelist_date"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"              
            android:paddingRight="10sp"             
            android:textSize="18sp" />      
    </RelativeLayout>

    <view
        xmlns:android="http://schemas.android.com/apk/res/android"
        class="com.example.note1.NoteEdit$LineEditText"
        android:id="@+id/body"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/layouteditbottom"
        android:layout_below="@+id/toplayout"      
        android:background="@android:color/transparent"
        android:capitalize="sentences"
        android:fadingEdge="vertical"
        android:gravity="top"
        android:padding="5dp"
        android:scrollbars="vertical"
        android:textSize="22sp" />
</RelativeLayout> 
```

# objective-c - 第三方代码和 Git

> ID：14110862
> 
> 赞同：6
> 
> 时间：2013-01-01T13:25:52.033
> 
> 标签：objective-c, git, cocoa

在开发 iOS 应用程序时，我经常使用来自 GitHub 的第三方代码和我自己创建的可重用类。我一直在做的是将源代码克隆到某个特定文件夹中`~/Documents`，其中保存了所有库代码。然后我会将源文件拖到 Xcode 项目和代码中，并使用本地 Git 存储库跟踪我自己的源代码中的更改。目前为止还不错，但是最近发现了一个严重的问题：想切换回老版本的Xcode项目，发现编译不了了，因为使用的是老版本的第三方代码，而且哪里都没有我存储了它使用的版本！

这个问题一般是怎么解决的？我已经简要地研究了 Git 子模块，但我不确定它是否正确。我还简要了解了 CocoaPods，但我也可以将其用于我自己创建的库吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T13:36:28.303

它实际上是用[git submodule](http://git-scm.com/book/en/Git-Tools-Submodules)解决的：这个想法是为您需要的每个子模块引用一个*确切的*提交，让您回到历史，然后找到您需要的项目编译的*连贯*提交*集*。 （更多在[这个答案](https://stackoverflow.com/questions/1979167/git-submodule-update/1979194#1979194)）

 *但是，这确实需要对您的工作树结构进行轻微更改，因为每个子模块都将成为代表您的项目的父 repo 的子目录。

另请注意，它（git 子模块）对于*源*依赖项很有用。
CocoaPods 更适合构建您依赖的二进制文件（*二进制*依赖项）。*

# winforms - 使用 ProgressBar 和 ComboBox

> ID：14110863
> 
> 赞同：3
> 
> 时间：2013-01-01T13:25:52.657
> 
> 标签：winforms, c#-4.0, combobox, backgroundworker

我遇到了麻烦`Marquee` `ProgressBar`。我需要执行一个方法 ( `refreshList()`) 来获得一个`List<string>`. 然后我将它分配`List`给 a `ComboBox`，所以`ComboBox`用新的`Items`. 由于`refreshList()`需要 3 或 4 秒，我想运行一个`Marquee` `ProgressBar`. 但我做不到。`ProgressBar`没问题，但`ComboBox`不加载新的`Items`.

我的`refreshList()`方法：

```
private void refreshList(List<string> list)
{
    albumList.DataSource = null;
    albumList.DataSource = list;
} 
```

我有以下代码，它工作正常：

```
private void changeDirectoryToolStripMenuItem_Click(object sender, EventArgs e)
{
    fbd.RootFolder     = Environment.SpecialFolder.MyComputer;
    folderPath = "";
    if (fbd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
        folderPath     =  fbd.SelectedPath;
        refreshList(N.getList(folderPath));

    }
} 
```

但我添加了一个`ProgressBar`并编写了这段代码：

```
private void changeDirectoryToolStripMenuItem_Click(object sender, EventArgs e)
{
    fbd.RootFolder     = Environment.SpecialFolder.MyComputer;
    folderPath = "";
    if (fbd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
        folderPath     =  fbd.SelectedPath;
        bgWorker.WorkerReportsProgress = true;
        bgWorker.RunWorkerAsync();

    }
} 
```

我放置`refreshList()`在`doWork()`方法中：

```
private void bgWorker_DoWork(object sender, DoWorkEventArgs e)
{
    refreshList(N.getList(folderPath));
} 
```

但不幸的是，这不起作用。有人可以帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T13:53:58.287

您可以使用 ProgressBar 控件的[MarqueeAnimationSpeed](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.marqueeanimationspeed.aspx)和[Value](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.value.aspx)属性来停止和启动 Marquee。没有必要使用[WorkerReportsProgress](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.workerreportsprogress.aspx) * 因为你没有增加一个正常的进度条——你只是想“旋转”选框。

您可以执行以下操作：

```
 public Form1()
    {
        InitializeComponent();
        //Stop the progress bar to begin with
        progressBar1.MarqueeAnimationSpeed = 0;             
        //If you wire up the event handler in the Designer, then you don't need 
        //the following line of code (the designer adds it to InitializeComponent)
        //backgroundWorker1.RunWorkerCompleted += backgroundWorker1_RunWorkerCompleted;
    }

    private void changeDirectoryToolStripMenuItem_Click(object sender, EventArgs e)
    {
        fbd.RootFolder = Environment.SpecialFolder.MyComputer;
        folderPath = "";
        if (fbd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            folderPath = fbd.SelectedPath;
            //This line effectively starts the progress bar
            progressBar1.MarqueeAnimationSpeed = 10;                 
            bgWorker.RunWorkerAsync(); //Calls the DoWork event

        }
    }

    private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        e.Result = N.getList(folderPath); //Technically this is the only work you need to do in the background
    }

    private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        //these two lines effectively stop the progress bar
        progressBar1.Value = 0;
        progressBar1.MarqueeAnimationSpeed = 0;
        //Now update the list with the result from the work done on the background thread 
        RefreshList(e.Result as List<String>);
    }

    private void RefreshList(List<String> results)
    {
        albumList.DataSource = null; //You don't need this line but there is no real harm.
        albumList.DataSource = list;
    } 
```

请记住`RunWorkerCompleted`通过设计器中的“事件”部分的“属性”栏将事件连接到 backgroundWorker1_RunWorkerCompleted。

首先，我们通过将 MarqueeAnimationSpeed 属性设置为非零正数来启动 ProgressBar 的动画，作为您成功选择文件夹的一部分。

然后，在调用 RunWorkerAsync 之后，代码会在 DoWork 方法中构建您的列表，然后将结果分配给 DoWorkEventArgs，然后将其传递给 RunWorkerCompleted 事件（在 DoWork 完成时触发）。

在该`backgroundWorker1_RunWorkerCompleted`方法中，我们停止进度条（并将其值设置为零以有效地将其返回到原始状态），然后我们将列表传递给 refreshList 方法以对其进行数据绑定并填充 ComboBox。

使用 VS2012、Windows Forms、.Net 4.0 进行测试（使用 Thread.Sleep 模拟 N.getList 所用的时间）

*WorkerReportsProgress 和相关的 ReportProgress 方法/事件在您想要增加进度条时使用 - 您可以告诉 GUI 您完成了 10%、完成了 20%、完成了 50% 等等。

# cakephp - 从 cakephp 1.2 更新到 cakephp 2.2.4

> ID：14110865
> 
> 赞同：-1
> 
> 时间：2013-01-01T13:25:57.667
> 
> 标签：cakephp

到目前为止，我使用的是 cakephp 1.2。最近我决定将我所有的应用程序从 1.2 升级到 2.2.4（最新的稳定版本）。有谁知道我该怎么做以及要改变什么？此外，我正在使用一个共享所有网站的蛋糕文件夹（高级安装）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T13:30:18.087

您应该查看迁移指南以获取有关如何升级、更改内容等的信息：

*   [http://book.cakephp.org/2.0/en/appendices.html](http://book.cakephp.org/2.0/en/appendices.html)

# php - 不支持 imap_fetchmime 时如何通过 php imap 获取字符集

> ID：14110868
> 
> 赞同：1
> 
> 时间：2013-01-01T13:26:48.913
> 
> 标签：php, imap

我想知道当不支持[imap_fetchmime()时如何通过 PHP IMAP 获取字符集。](http://php.net/manual/en/function.imap-fetchmime.php)我要么有一个不支持它的较低版本的 PHP，要么它可能已被弃用，但它对我不起作用。

我基本上需要的是通过 IMAP 找出电子邮件的字符集，所以输出将是：

```
ISO-8859-1 
```

或者不管结果如何。我不想阅读整封电子邮件来找出答案，我想找出字符集是什么，以便我可以使用正确的编码。

这是我为这封电子邮件而使用的简化代码：

```
$mailbox = "xxx@gmail.com";
$mailboxPassword = "xxx";

$mailbox = imap_open("{imap.gmail.com:993/imap/ssl}INBOX",
mailbox, $mailboxPassword);

mb_internal_encoding("UTF-8");
$subject = mb_decode_mimeheader(str_replace('_', ' ', $subject));

$body = imap_fetchbody($mailbox, $val, 1);
$body = base64_decode($body);

echo $body; 
```

# python - Django显示属性错误

> ID：14110871
> 
> 赞同：0
> 
> 时间：2013-01-01T13:27:37.517
> 
> 标签：python, django

我想向在我的 django 网站上填写表格的每个用户发送邮件。为它编写代码后，我收到以下错误。我一直试图找出错误的原因，但没有成功。以下是我的代码：

```
AttributeError at /meek/
'NoneType' object has no attribute 'e_mail' 
```

意见

```
Subject='Welcome'
message=loader.get_template('letter.txt') 
from_email='men@men.com'

def gent_me(request):
    if request.method=='POST':
       form=GentForm(request.POST)
       if form.is_valid():
          data=form.cleaned_data
          newgent=Gent(
            pub_date=datetime.datetime.now(),
            full_name=data['full_name'],
            company_name=data['company_name'],
            services=data['services'],
            e_mail=data['e_mail'],
            address=data['address'],
            city=data['city'],
            state=data['state'],
            phone_no=data['phone_no'])
         invite=newgent.save()
         send_mail(Subject, message.render(Context()),from_email,[invite.e_mail])
         return HttpResponse('Thanks. Kindly check your mail.')
      else:
          return HttpResponse('Kindly fill form.')
   else:
       return render_to_response('ment.html',{'GentForm':GentForm},context_instance=RequestContext(request)) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:34:26.530

Model.save 方法的返回值为“None”。所以在invite=newgent.save() 之后的'invite' 是None。代替

```
invite=newgent.save() 
```

你应该做

```
newgent.save() 
```

接着

```
send_mail(Subject, message.render(Context()),from_email,[newgent.e_mail]) 
```

# ruby-on-rails - Ruby on Rails 3：使用 devise 和 cancan 登录

> ID：14110876
> 
> 赞同：3
> 
> 时间：2013-01-01T13:28:33.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个使用 Device 和 Cancan 进行身份验证的 rails 应用程序。当我尝试通过我的 Rails Web 视图登录时，它工作正常，但是当我尝试在 Rest 客户端中时，我收到了一个错误。登录时我需要传递任何令牌吗？

登录详情..

```
http://localhost:3001/users/sign_in

{

  "username"      : "abcd",
  "password"      : "abcd"

} 
```

在 Rails 网页视图中

```
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"V", "authenticity_token"=>"A6GbMQxnQO6ELz/QM3yRIDYM5xfFi
Whn6nTLodfghYtU=", "user"=>{"username"=>"admin", "password"=>"[FILTERED]"}, "comm
it"=>"Sign in"} 
```

除了用户凭据之外，没有其他参数通过 Web 视图发布。

如何通过 REST CLIENT 解决这个问题？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T05:54:08.490

请点击链接[https://github.com/applicake/doorkeeper/wiki/Using-Resource-Owner-Password-Credentials-flow](https://github.com/applicake/doorkeeper/wiki/Using-Resource-Owner-Password-Credentials-flow)

在此之前，您需要注册您的应用程序以获取 Client_id 和 secret_id

在设备注册路径是：`http://localhost:3000/oauth/applications/new`

获得访问令牌后，您可以通过将访问令牌作为查询字符串与资源 URL 一起传递来访问资源

例如：`http://localhost:3000/users?access_token=<!----access_token----!>`

# types - 由类型文字定义的类型的结构字段上的方法

> ID：14110881
> 
> 赞同：5
> 
> 时间：2013-01-01T13:29:42.187
> 
> 标签：types, struct, nested, go, anonymous

在解码 JSON 时，我总是为每个对象显式编写一个结构，以便我可以为父结构中的各个对象实现 Stringer 接口，如下所示：

```
type Data struct {
    Records []Record
}

type Record struct {
    ID int
    Value string
}

func (r Record) String() string {
    return fmt.Sprintf("{ID:%d Value:%s}", r.ID, r.Value)
} 
```

我最近了解到可以使用匿名结构进行嵌套。这种方法对于定义要解码的数据的结构要简洁得多：

```
type Data struct {
    Records []struct {
        ID int
        Value string
    }
} 
```

但是，是否可以在结构的成员上定义方法，特别是匿名结构的成员？就像第一个代码块中的 Stringer 接口实现一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T13:40:07.587

不，方法只能附加到同一包中定义的命名类型。从[规格](http://golang.org/ref/spec#Method_declarations)：

> 方法是带有接收器的函数。方法声明将标识符（方法名称）绑定到方法。它还将方法与接收者的基本类型相关联。

```
MethodDecl   = "func" Receiver MethodName Signature [ Body ] .
Receiver     = "(" [ identifier ] [ "*" ] BaseTypeName ")" .
BaseTypeName = identifier . 
```

> 接收器类型必须是 T 或 *T 形式，其中 T 是类型名称。T 表示的类型称为接收者基类型；它不能是指针或接口类型，并且必须在与方法相同的包中声明。该方法被称为绑定到基本类型，并且方法名称仅在该类型的选择器中可见。

第二个 OP 示例中的`Records`字段类型是使用类型文字定义的，即。不满足上面的“类型名称”条件。

# jquery-ui - 如何配置 jQuery UI Datepicker 以使用本地化日历？

> ID：14110885
> 
> 赞同：7
> 
> 时间：2013-01-01T13:30:29.767
> 
> 标签：jquery-ui, datepicker

我想知道这是否可能，如果可以，我将如何去做？我正在尝试使小部件使用 Jalali(Persian) 日历。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T15:14:47.810

**jQuery UI Datepicker 本地化**

通常，要将本地化添加到 jQuery UI Datepicker，您需要在包含 Datepicker 的脚本之后立即包含特定的本地化文件。例如，要设置法语本地化，您可以这样做：

```
[...include jQuery and jQuery UI...]
<script type="text/javascript" src="jquery.ui.datepicker-fr.js"></script> 
```

本地化文件作为标准[jQuery UI 下载](http://jqueryui.com/download/)的一部分包含在单独的目录 ( `development-bundle/ui/i18n`) 中。有关这方面的更多信息，请参阅[Datepicker API 文档](http://api.jqueryui.com/datepicker/)（在“本地化”下）。

**当前状态：波斯语输入，贾拉利语输出**

目前，jQuery UI 下载包似乎不包含 Jalali 本地化文件。目前，似乎只有一个常规（格鲁吉亚）日历被翻译成波斯语（`jquery.ui.datepicker-fr.js`）。

**解决方案 1 - 自定义本地化文件**

如果您更喜欢使用 jQuery UI 的 datepicker，您可以根据现有本地化文件的格式创建自定义本地化文件。如果您熟悉相关日历，则应该不难。

**解决方案 2 - 使用不同的插件**

考虑改用[jQuery 日历插件](http://keith-wood.name/calendars.html)。[它已经包含多种语言和格式](http://keith-wood.name/calendars.html#l10n)的最常见的世界日历，因此只需轻按设置即可生成 Jalali 或任何其他外国日历。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T08:38:35.913

可能为时已晚，但自从我偶然发现它之后，这里有一个演示，有人很友好地提出来。所有归功于未知作者 [http://jquery-ui.googlecode.com/svn/tags/1.6rc5/demos/datepicker/localization.html](http://jquery-ui.googlecode.com/svn/tags/1.6rc5/demos/datepicker/localization.html)

# php - 从 php memcached setMulti 函数获取失败的键或它们的计数

> ID：14110887
> 
> 赞同：1
> 
> 时间：2013-01-01T13:30:31.453
> 
> 标签：php, memcached

`setMulti`我尝试使用PHP memcached lib 的功能在 memcached 中设置大约一千个键。现在，如果一个或多个键设置失败，那么我想知道它们中的哪一个失败或至少获取失败键的计数。

然而，在文档中，setMulti 只返回 true 或 false。有什么方法可以让我知道失败键的数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T07:51:54.250

似乎没有办法做到这一点。[`setMulti`如果手册页](http://php.net/manual/en/memcached.setmulti.php)上的注释正确，则内部实现只是`set`重复调用。如果是这种情况，您也可以手动完成。

# c# - 动作、函数和谓词委托 - C#

> ID：14110889
> 
> 赞同：5
> 
> 时间：2013-01-01T13:31:02.903
> 
> 标签：c#, .net, wpf, mvvm, delegates

`Action<T>, Func<T> and Predicate<T>`作为我的 WPF/MVVM 学习的一部分，我试图了解代表之间的差异。

我知道`Action<T> and Func<T>`两者都采用零到一个+参数，只`Func<T>`返回一个值而`Action<T>`不是。

至于`Predicate<T>`——我不知道。

因此，我提出了以下问题：

1.  做什么`Predicate<T>`？（欢迎举例！）
2.  如果**没有**`Action<T>`返回，那么使用它不是更简单吗？（或者任何其他类型，如果它是我们正在谈论的。）**`void``Func<T>`**

 **我希望您在问题中避免使用 LINQ/List 示例。
我已经看过这些了，但它们只是让我更加困惑，因为让我对这些代表“感兴趣”的代码与它无关（我认为！）。
因此，我想使用我熟悉的代码来获得答案。

这里是：

```
public class RelayCommand : ICommand
{
    readonly Action<object> _execute;
    readonly Predicate<object> _canExecute;

public RelayCommand(Action<object> execute)
    : this(execute, null)
{
}

public RelayCommand(Action<object> execute, Predicate<object> canExecute)
{
    if (execute == null)
        throw new ArgumentNullException("execute");

    _execute = execute;
    _canExecute = canExecute;
}

[DebuggerStepThrough]
public bool CanExecute(object parameters)
{
    return _canExecute == null ? true : _canExecute(parameters);
}

public event EventHandler CanExecuteChanged
{
    add { CommandManager.RequerySuggested += value; }
    remove { CommandManager.RequerySuggested -= value; }
}

public void Execute(object parameters)
{
    _execute(parameters);
}
} 
```

**注意：**
我去掉了注释以避免超长的代码块。
完整的代码可以在[这里](http://rachel53461.wordpress.com/2011/05/08/simplemvvmexample/)找到。

任何帮助表示赞赏！谢谢！:)

PS：请不要指点我其他问题。我确实尝试过搜索，但找不到足够简单的东西让我理解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-01T13:33:37.897

`Predicate<T>`是一个接受 a`T`并返回 a的委托`bool`。
它完全等同于`Func<T, bool>`.

不同之处在于`Predicate<T>`在 .Net 2.0 中添加了，而所有`Func<*>`代表都是在 .Net 3.5 中添加的。（除了那些在.Net 4.0中添加的> 8个参数）

`List<T>`( `FindAll()`, `TrueForAll()`, 等)中的类 LINQ 方法采用`Predicate<T>`s。

要回答您的第二个问题，`void`不能用作通用参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:34:20.600

> 谓词做什么？（欢迎举例！）

它必须返回`boolean`, 并在条件构造中使用。它等效于（[但不可分配](https://stackoverflow.com/a/665572/649524)）`Func<T, bool>`。[谓词主要用于 List 中的 FindAll 和 RemoveAll 等方法。](https://stackoverflow.com/a/4317512/649524)

`Action<T>`对比`Func<T,bool>`

您不能将返回 void 的函数表示为`Func<void, T>`. 所以`Action<T>`是必需的。`Void`类型不能在[泛型](http://lostechies.com/jimmybogard/2008/06/06/forbidden-void-type-in-c/)中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T13:40:00.830

> 谓词做什么？（欢迎举例！）

Predicate 是一个接受参数并返回 bool 的函数，例如`x > 20`

> 如果 Action 什么都不返回，那么使用 void 代替会更简单吗？（或者任何其他类型，如果它是我们正在谈论的 Func。）

Action 被定义为返回 void 的委托。在这里，人们可能会争论为什么会有两种代表，但这只是设计的结果。另一种方法是让`Func`返回`Unit`什么都不做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T13:49:53.363

```
Func<T,bool> and Predicate<T> 
```

倾向于同一个代表。但是 Predicate 是 Kindof 传统的，因为 Predicate 是一个委托类型，因为从一开始就没有 Func 或 Action。如果您会看到 Array ,List 等类的 FindAll/Find 方法，它们使用 Predicate.Predicates 仅返回 bool 但 Func 可以返回您指定的任何类型，因此 bool 也包含在内。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T13:35:27.763

Predicate 是一个接受 T 并返回布尔值的委托，本质上它是一个过滤函数。或者这就是您将主要使用它的目的。

如果您使用 Linq 的 Where() 扩展方法，您将看到它接收一个 Predicate 委托作为参数，您也可以使用 Predicates 创建更复杂的过滤方法作为表达式，并动态组合多个 Predicate 委托与它们之间的 AND 或 OR 条件等等.

例如，我需要在 WPF 中构建一个报告页面，用户可以在其中动态选择多个参数来自定义报告页面的内容，在这种情况下，我为选定的过滤选项（日期时间间隔、布尔值、某些必须为包含在选定的字段等中），然后组合谓词并将它们编译成一个表达式，我后来用它来过滤我向用户展示的数据集合。

* * *

编辑：检查这个 -[为什么 Func<T,bool> 而不是 Predicate<T>？](https://stackoverflow.com/questions/665494/why-funct-bool-instead-of-predicatet)

简而言之：编码指南声明不再使用谓词，而是使用 Func

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-01T13:39:05.937

Func 和 Action 之间的区别只是您希望委托返回值（使用 Func）还是不返回值（使用 Action）。

Func 可能是 LINQ 中最常用的——例如在投影中：

```
list.Select(x => x.SomeProperty) 
```

或过滤：

```
list.Where(x => x.SomeValue == someOtherValue) 
```

或键选择：

```
list.Join(otherList, x => x.FirstKey, y => y.SecondKey, ...) 
```

`Action`更常用于`List<T>`.

`ForEach`：对列表中的每个项目执行给定的操作。

我使用它的频率低于`Func`，尽管我有时会使用无参数版本来处理`Control.BeginInvoke`和`Dispatcher.BeginInvoke`。

`Predicate`真的只是一个特例`Func<T, bool>`，在所有`Func`和大多数`Action`代表都来之前介绍过。我怀疑如果我们已经拥有`Func`并`Action`以各种形式出现，`Predicate`就不会被引入......尽管它确实赋予了 , 的使用某种含义`delegate`，而`Func`和`Action`用于广泛不同的目的。

`Predicate`主要用于和`List<T>`之类的方法。`FindAll``RemoveAll`**

# entity-framework - 不使用存储库模式，按原样使用 ORM (EF)

> ID：14110890
> 
> 赞同：101
> 
> 时间：2013-01-01T13:31:03.747
> 
> 标签：entity-framework, design-patterns, architecture, aop, repository-pattern

我一直使用存储库模式，但对于我的最新项目，我想看看我是否可以完善它的使用以及我对“工作单元”的实现。我开始挖掘的越多，我开始问自己这个问题：**“我真的需要它吗？”**

现在这一切都始于对 Stackoverflow 的几条评论，以及 Ayende Rahien 在他的博客上的帖子，其中有 2 个具体的，

*   [存储库是新的单例](http://ayende.com/blog/3955/repository-is-the-new-singleton)
*   [问-ayende-life-without-repositories-are-they-worth-living](http://ayende.com/blog/153701/ask-ayende-life-without-repositories-are-they-worth-living)

这可能会永远被谈论，它取决于不同的应用程序。我想知道的，

1.  这种方法是否适合实体框架项目？
2.  使用这种方法是业务逻辑仍在服务层中，还是扩展方法（如下所述，我知道，扩展方法是使用 NHib 会话）？

**使用扩展方法很容易做到这一点。干净、简单且可重复使用。**

```
public static IEnumerable GetAll(
    this ISession instance, Expression<Func<T, bool>> where) where T : class
{
    return instance.QueryOver().Where(where).List();
} 
```

使用这种方法并`Ninject`作为 DI，我是否需要制作`Context`接口并将其注入我的控制器中？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-11-23T07:31:36.887

我已经走了很多路，并在不同的项目上创建了许多存储库实现......我已经放弃并放弃了它，这就是原因。

**异常编码**

您是否为您的数据库从一种技术更改为另一种技术的 1% 机会编写代码？如果您正在考虑您的业务的未来状态并说是的，那么a）他们必须有很多钱来负担迁移到另一种数据库技术或b）您选择数据库技术是为了好玩或c ) 您决定使用的第一种技术出现了严重错误。

**为什么要抛弃丰富的 LINQ 语法？**

开发了 LINQ 和 EF，因此您可以用它做一些简洁的事情来读取和遍历对象图。创建和维护一个可以为您提供同样灵活性的存储库是一项艰巨的任务。根据我的经验，每当我创建存储库时，我**总是**将业务逻辑泄漏到存储库层中，以提高查询的性能和/或减少对数据库的访问次数。

我不想为我必须编写的查询的每一个排列创建一个方法。我还不如写存储过程。我不想要`GetOrder`, `GetOrderWithOrderItem`, `GetOrderWithOrderItemWithOrderActivity`, `GetOrderByUserId`, 等等...我只想获取主要实体并随意遍历并包含对象图。

**大多数存储库的例子都是胡说八道**

除非您正在开发像博客这样的非常简单的东西，否则您的查询永远不会像您在 Internet 上找到的围绕存储库模式的示例中的 90% 那样简单。我不能强调这一点！这是一个人必须在泥泞中爬行才能弄清楚的事情。总会有一个查询会破坏您创建的经过深思熟虑的存储库/解决方案，直到您再次猜测自己并开始技术债务/侵蚀的那一刻。

**不要对我进行单元测试兄弟**

但是如果我没有存储库，那么单元测试呢？我将如何嘲笑？很简单，你不会。让我们从两个角度来看它：

`DbContext`没有存储库-您可以使用 an或其他一些技巧来模拟，`IDbContext`但是您实际上是在对*LINQ to Objects*而不是*LINQ to Entities*进行单元测试，因为查询是在运行时确定的……好吧，那不好！所以现在由集成测试来解决这个问题。

使用存储库 - 您现在可以模拟您的存储库并对中间的层进行单元测试。很棒吧？不是真的...在上述情况下，您必须将逻辑泄漏到存储库层以提高查询的性能和/或减少对数据库的访问，您的单元测试如何涵盖这一点？它现在在 repo 层，你不想测试`IQueryable<T>`吗？老实说，您的单元测试不会涵盖具有 20 行`.Where()`子句的查询和`.Include()`'一堆关系并再次访问数据库以执行所有其他操作，等等，等等，因为查询是在运行时生成的。此外，由于您创建了一个存储库以保持对上层持久性的无知，如果您现在想要更改数据库技术，很抱歉您的单元测试绝对不能保证在运行时获得相同的结果，回到集成测试。所以存储库的整个点似乎很奇怪..

**2 美分**

在普通存储过程（批量插入、批量删除、CTE 等）上使用 EF 时，我们已经失去了很多功能和语法，但我也在 C# 中编写代码，因此我不必键入二进制文件。我们使用 EF，因此我们可以使用不同的提供者，并以一种很好的相关方式处理对象图。某些抽象是有用的，而有些则不是。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-07-03T13:23:37.843

存储库模式是一种***抽象***。它的目的是降低复杂性并使其余代码持久无知。作为奖励，它允许您编写*单元*测试而不是*集成*测试。

问题是许多开发人员无法理解模式的目的并创建将持久性特定信息泄漏给调用者的存储库（通常通过公开`IQueryable<T>`）。通过这样做，他们没有直接使用 OR/M 的好处。

## 更新以解决另一个答案

**异常编码**

使用存储库并不是为了能够切换持久性技术（即更改数据库或使用 Web 服务等）。它是关于将业务逻辑与持久性分离以降低复杂性和耦合性。

**单元测试与集成测试**

您不会为存储库编写单元测试。时期。

但是通过引入存储库（或持久性和业务之间的任何其他抽象层），您可以为业务逻辑编写单元测试。也就是说，您不必担心由于数据库配置不正确而导致测试失败。

至于查询。如果您使用 LINQ，您还必须确保您的查询可以正常工作，就像您必须使用存储库一样。这是使用集成测试完成的。

不同之处在于，如果您没有将业务与 LINQ 语句混合在一起，您可以 100% 确定失败的是您的持久性代码而不是其他原因。

如果您分析您的测试，您还会发现如果您没有混合关注点（即 LINQ + 业务逻辑），它们会更干净

**存储库示例**

大多数例子都是胡说八道。这是非常正确的。然而，如果你用谷歌搜索任何设计模式，你会发现很多蹩脚的例子。这不是避免使用模式的理由。

构建正确的存储库实现非常容易。事实上，您只需要遵循一条规则：

***在您需要之前不要将任何东西添加到存储库类中***

很多程序员都很懒惰，他们试图创建一个通用存储库并使用一个带有许多他们***可能***需要的方法的基类。雅尼。您编写存储库类一次，并在应用程序存在期间（可以是数年）保留它。何必因为懒惰而搞砸。在没有任何基类继承的情况下保持干净。它将使其更易于阅读和维护。

*（上面的陈述是一个指导方针而不是法律。一个基类可以很好地被激励。在你添加它之前请三思而后行，这样你就可以有正确的理由添加它）*

## 老东西

**结论：**

如果您不介意在业务代码中使用 LINQ 语句，也不关心单元测试，我认为没有理由不直接使用实体框架。

**更新**

我写过关于存储库模式和“抽象”真正含义的博客：http: [//blog.gauffin.org/2013/01/repository-pattern-done-right/](http://blog.gauffin.org/2013/01/repository-pattern-done-right/)

**更新 2**

> 对于具有 20 多个字段的单一实体类型，您将如何设计查询方法以支持任何排列组合？您不想仅按名称限制搜索，如何使用导航属性搜索，列出所有带有特定价格代码的项目的订单，3 级导航属性搜索。发明的全部原因`IQueryable`是能够对数据库进行任何搜索组合。理论上一切看起来都很棒，但用户的需求胜过理论。

同样：具有 20 多个字段的实体被错误地建模。这是一个上帝实体。把它分解。

我并不是说那`IQueryable`不是为了查询而制作的。***我是说它不适合像 Repository 模式这样的抽象层，***因为它是泄漏的。没有 100% 完整的 LINQ To Sql 提供程序（如 EF）。

它们都有实现特定的东西，比如如何使用急切/延迟加载或如何执行 SQL“IN”语句。在存储库中公开`IQueryable`会迫使用户知道所有这些事情。因此，将数据源抽象出来的整个尝试是完全失败的。您只是增加了复杂性，而没有直接使用 OR/M 的任何好处。

要么正确实现存储库模式，要么根本不使用它。

*（如果你真的想处理大实体，你可以将 Repository 模式与[Specification 模式](http://en.wikipedia.org/wiki/Specification_pattern)结合起来。这给了你一个完整的抽象，也是可测试的。）*

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-07-04T15:04:02.107

IMO`Repository`抽象和`UnitOfWork`抽象在任何有意义的开发中都具有非常有价值的位置。人们会争论实现细节，但正如给猫剥皮的方法有很多一样，实现抽象的方法也有很多。

您的问题是具体使用或不使用以及为什么。

毫无疑问，您已经意识到您已经将这两种模式都内置到了实体框架中，`DbContext`即是`UnitOfWork`和`DbSet`是`Repository`. 您通常不需要对它们`UnitOfWork`或`Repository`它们本身进行单元测试，因为它们只是在您的类和底层数据访问实现之间提供便利。在对服务逻辑进行单元测试时，您会发现自己需要一次又一次地模拟这两个抽象。

您可以使用外部库在执行测试的逻辑和正在测试的逻辑之间添加代码依赖层**（您无法控制）来模拟、伪造或任何其他方式。**

所以一个次要的一点是，在模拟单元测试时，**拥有自己的抽象`UnitOfWork`并`Repository`为您提供最大的控制和灵活性。**

一切都很好，但对我来说，这些抽象的真正力量在于它们提供了一种简单的方法来应用**面向方面的编程技术并遵守 SOLID 原则**。

所以你有你的`IRepository`：

```
public interface IRepository<T>
    where T : class
{
    T Add(T entity);
    void Delete(T entity);
    IQueryable<T> AsQueryable();
} 
```

及其实现：

```
public class Repository<T> : IRepository<T>
    where T : class
{
    private readonly IDbSet<T> _dbSet;
    public Repository(PPContext context) 
    {
        _dbSet = context.Set<T>();
    }

    public T Add(T entity)
    { 
        return _dbSet.Add(entity); 
    }

    public void Delete(T entity)
    {
        _dbSet.Remove(entity); 
    }

    public IQueryable<T> AsQueryable() 
    {
        return _dbSet.AsQueryable();
    }
} 
```

到目前为止没有什么不寻常的，但现在我们想添加一些日志记录——使用日志*装饰器*很容易。

```
public class RepositoryLoggerDecorator<T> : IRepository<T>
    where T : class
{
    Logger logger = LogManager.GetCurrentClassLogger();
    private readonly IRepository<T> _decorated;
    public RepositoryLoggerDecorator(IRepository<T> decorated)
    {
        _decorated = decorated;
    }

    public T Add(T entity)
    {
        logger.Log(LogLevel.Debug, () => DateTime.Now.ToLongTimeString() );
        T added = _decorated.Add(entity);
        logger.Log(LogLevel.Debug, () => DateTime.Now.ToLongTimeString());
        return added;
    }

    public void Delete(T entity)
    {
        logger.Log(LogLevel.Debug, () => DateTime.Now.ToLongTimeString());
        _decorated.Delete(entity);
        logger.Log(LogLevel.Debug, () => DateTime.Now.ToLongTimeString());
    }

    public IQueryable<T> AsQueryable()
    {
        return _decorated.AsQueryable();
    }
} 
```

全部完成**，无需更改我们现有的代码**。我们可以添加许多其他横切关注点，例如异常处理、数据缓存、数据验证或其他任何东西，在我们的设计和构建过程中**，我们拥有的最有价值的东西使我们能够在不更改任何现有代码的情况下添加简单的功能是我们的`IRepository`抽象**。

现在，我多次在 StackOverflow 上看到这个问题——“如何让实体框架在多租户环境中工作？”。

[https://stackoverflow.com/search?q=%5Bentity-framework%5D+multi+tenant](https://stackoverflow.com/search?q=%5Bentity-framework%5D+multi+tenant)

如果您有`Repository`抽象，那么答案是“添加装饰器很容易”</p>

```
public class RepositoryTennantFilterDecorator<T> : IRepository<T>
    where T : class
{
    //public for Unit Test example
    public readonly IRepository<T> _decorated;
    public RepositoryTennantFilterDecorator(IRepository<T> decorated)
    {
        _decorated = decorated;
    }

    public T Add(T entity)
    {
        return _decorated.Add(entity);
    }

    public void Delete(T entity)
    {
        _decorated.Delete(entity);
    }

    public IQueryable<T> AsQueryable()
    {
        return _decorated.AsQueryable().Where(o => true);
    }
} 
```

IMO 您应该始终对将在多个地方引用的任何第 3 方组件进行简单的抽象。从这个角度来看，ORM 是完美的候选者，因为它在我们的很多代码中都被引用。

当有人说“我为什么要对这个或那个 3rd 方库进行抽象（例如）”时，通常会想到的答案`Repository`是“你为什么不呢？”</p>

使用 IoC 容器（例如[SimpleInjector](http://simpleinjector.codeplex.com/) ）应用 PS 装饰器非常简单。

```
[TestFixture]
public class IRepositoryTesting
{
    [Test]
    public void IRepository_ContainerRegisteredWithTwoDecorators_ReturnsDecoratedRepository()
    {
        Container container = new Container();
        container.RegisterLifetimeScope<PPContext>();
        container.RegisterOpenGeneric(
            typeof(IRepository<>), 
            typeof(Repository<>));
        container.RegisterDecorator(
            typeof(IRepository<>), 
            typeof(RepositoryLoggerDecorator<>));
        container.RegisterDecorator(
            typeof(IRepository<>), 
            typeof(RepositoryTennantFilterDecorator<>));
        container.Verify();

        using (container.BeginLifetimeScope())
        {
            var result = container.GetInstance<IRepository<Image>>();

            Assert.That(
                result, 
                Is.InstanceOf(typeof(RepositoryTennantFilterDecorator<Image>)));
            Assert.That(
                (result as RepositoryTennantFilterDecorator<Image>)._decorated,
                Is.InstanceOf(typeof(RepositoryLoggerDecorator<Image>)));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-07-08T08:46:24.713

首先，正如一些答案所建议的那样，EF 本身是一个存储库模式，不需要创建进一步的抽象来将其命名为存储库。

**用于单元测试的 Mockable Repository，我们真的需要它吗？**

我们让 EF 在单元测试中与测试数据库通信，以直接针对 SQL 测试数据库测试我们的业务逻辑。我根本看不到模拟任何存储库模式的任何好处。对测试数据库进行单元测试到底有什么问题？由于无法进行批量操作，因此我们最终编写了原始 SQL。内存中的 SQLite 非常适合对真实数据库进行单元测试。

**不必要的抽象**

您是否想创建存储库以便将来您可以轻松地将 EF 替换为 NHbibernate 等或其他任何东西？听起来不错的计划，但它真的具有成本效益吗？

**Linq杀死单元测试？**

我希望看到任何关于它如何杀死的例子。

**依赖注入，IOC**

哇，这些都是很棒的词，当然它们在理论上看起来很棒，但有时你必须在伟大的设计和伟大的解决方案之间做出权衡。我们确实使用了所有这些，最终我们把所有东西都扔进了垃圾箱并选择了不同的方法。大小与速度（代码大小和开发速度）在现实生活中非常重要。用户需要灵活性，他们不在乎您的代码在 DI 或 IoC 方面的设计是否出色。

**除非您正在构建 Visual Studio**

如果您正在构建像 Visual Studio 或 Eclipse 这样将由许多人开发并且需要高度可定制的复杂程序，则需要所有这些出色的设计。在这些 IDE 经历了多年的发展之后，所有伟大的开发模式都出现了，并且它们已经在所有这些伟大的设计模式如此重要的地方发展起来。但是，如果您正在做简单的基于 Web 的工资单或简单的商业应用程序，那么您最好随着时间的推移在开发中不断发展，而不是花时间为百万用户构建它，而它只会为 100 多个用户部署。

**存储库作为过滤视图 - ISecureRepository**

另一方面，存储库应该是 EF 的过滤视图，它通过基于当前用户/角色应用必要的填充物来保护对数据的访问。

但是这样做会使存储库变得更加复杂，因为它最终需要维护庞大的代码库。人们最终会为不同的用户类型或实体类型的组合创建不同的存储库。不仅如此，我们还得到了很多 DTO。

以下答案是过滤存储库的示例实现，无需创建整套类和方法。它可能无法直接回答问题，但在推导问题时可能很有用。

免责声明：我是 Entity REST SDK 的作者。

[http://entityrestsdk.codeplex.com](http://entityrestsdk.codeplex.com)

请记住，我们开发了一个 SDK，它基于 SecurityContext 创建过滤视图的存储库，其中包含用于 CRUD 操作的过滤器。并且只有两种规则可以简化任何复杂的操作。首先是对实体的访问，另一个是属性的读/写规则。

优点是，您无需为不同的用户类型重写业务逻辑或存储库，您只需阻止或授予他们访问权限。

```
public class DefaultSecurityContext : BaseSecurityContext {

  public static DefaultSecurityContext Instance = new DefaultSecurityContext();

  // UserID for currently logged in User
  public static long UserID{
       get{
             return long.Parse( HttpContext.Current.User.Identity.Name );
       }
  }

  public DefaultSecurityContext(){
  }

  protected override void OnCreate(){

        // User can access his own Account only
        var acc = CreateRules<Account>();

        acc.SetRead( y => x=> x.AccountID == UserID ) ;
        acc.SetWrite( y => x=> x.AccountID == UserID );

        // User can only modify AccountName and EmailAddress fields
        acc.SetProperties( SecurityRules.ReadWrite, 
              x => x.AccountName,
              x => x.EmailAddress);

        // User can read AccountType field
        acc.SetProperties<Account>( SecurityRules.Read, 
              x => x.AccountType);

        // User can access his own Orders only
        var order = CreateRules<Order>();
        order.SetRead( y => x => x.CustomerID == UserID );

        // User can modify Order only if OrderStatus is not complete
        order.SetWrite( y => x => x.CustomerID == UserID 
            && x.OrderStatus != "Complete" );

        // User can only modify OrderNotes and OrderStatus
        order.SetProperties( SecurityRules.ReadWrite, 
              x => x.OrderNotes,
              x => x.OrderStatus );

        // User can not delete orders
        order.SetDelete(order.NotSupportedRule);
  }
} 
```

这些 LINQ 规则在 SaveChanges 方法中针对每个操作的数据库进行评估，这些规则充当数据库前面的防火墙。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-01T13:50:22.517

关于哪种方法是正确的存在很多争论，所以我认为这两种方法都是可以接受的，所以我使用我最喜欢的方法（UoW 没有存储库）。

在 EF 中，UoW 是通过 DbContext 实现的，而 DbSet 是存储库。

至于如何使用数据层，我只是直接在 DbContext 对象上工作，对于复杂的查询，我将为可以重用的查询创建扩展方法。

我相信 Ayende 也有一些关于抽象 CUD 操作是多么糟糕的帖子。

我总是创建一个接口并让我的上下文从它继承，这样我就可以为 DI 使用 IoC 容器。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-05T07:09:06.353

最适用于 EF 的不是存储库模式。它是一种外观模式（将对 EF 方法的调用抽象为更简单、更易于使用的版本）。

EF 是应用存储库模式（以及工作单元模式）的一种。也就是说，EF 是数据访问层的抽象层，因此用户不知道他们正在与 SQLServer 打交道。

至此，EF 上的大多数“存储库”甚至都不是好的 Facade，因为它们只是非常直接地映射到 EF 中的单个方法，甚至具有相同的签名。

那么，在 EF 上应用这种所谓的“存储库”模式的两个原因是允许更轻松的测试并建立一个“罐头”调用的子集。本身还不错，但显然不是存储库。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-03T13:16:09.503

对我来说，*存储库*（或者任何人选择调用它）目前主要是关于抽象出持久层。

我将它与查询对象结合使用，因此我的应用程序中没有与任何特定技术的耦合。而且它还大大简化了测试。

所以，我倾向于

```
public interface IRepository : IDisposable
{
    void Save<TEntity>(TEntity entity);
    void SaveList<TEntity>(IEnumerable<TEntity> entities);

    void Delete<TEntity>(TEntity entity);
    void DeleteList<TEntity>(IEnumerable<TEntity> entities);

    IList<TEntity> GetAll<TEntity>() where TEntity : class;
    int GetCount<TEntity>() where TEntity : class;

    void StartConversation();
    void EndConversation();

    //if query objects can be self sustaining (i.e. not need additional configuration - think session), there is no need to include this method in the repository.
    TResult ExecuteQuery<TResult>(IQueryObject<TResult> query);
} 
```

可能添加带有回调的异步方法作为委托。回购很容易实现**一般**，所以我不能触及从应用程序到应用程序的实现线。好吧，至少在使用 NH 时是这样，我也用 EF 做到了，但让我讨厌 EF。4\. 对话是交易的开始。如果几个类共享存储库实例，那就太酷了。此外，对于 NH，我的实现中的一个 repo 等于一个在第一次请求时打开的会话。

然后是查询对象

```
public interface IQueryObject<TResult>
{
    /// <summary>Provides configuration options.</summary>
    /// <remarks>
    /// If the query object is used through a repository this method might or might not be called depending on the particular implementation of a repository.
    /// If not used through a repository, it can be useful as a configuration option.
    /// </remarks>
    void Configure(object parameter);

    /// <summary>Implementation of the query.</summary>
    TResult GetResult();
} 
```

对于我在 NH 中使用的配置，仅用于传递 ISession。在EF中或多或少没有意义。

一个示例查询是.. (NH)

```
public class GetAll<TEntity> : AbstractQueryObject<IList<TEntity>>
    where TEntity : class
{
    public override IList<TEntity> GetResult()
    {
        return this.Session.CreateCriteria<TEntity>().List<TEntity>();
    }
} 
```

要进行 EF 查询，您必须在抽象库中拥有上下文，而不是会话。但当然 ifc 也是一样的。

通过这种方式，查询本身被封装，并且易于测试。最重要的是，我的代码只依赖于接口。一切都很干净。领域（业务）对象就是这样，例如，没有混合职责，例如使用几乎不可测试的活动记录模式并在域对象中混合数据访问（查询）代码，这样做是混合关注点（获取的对象本身？？）。每个人仍然可以自由地创建用于数据传输的 POCO。

总而言之，这种方法提供了很多代码重用和简单性，但我无法想象。有任何想法吗？

非常感谢 Ayende 的出色职位和持续的奉献精神。这是他的想法（查询对象），而不是我的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-02T10:15:24.240

Linq 是当今的“存储库”。

ISession+Linq 已经是存储库，您不需要`GetXByY`方法也不需要`QueryData(Query q)`泛化。由于对 DAL 的使用有点偏执，我仍然更喜欢存储库接口。（从可维护性的角度来看，我们还必须对特定的数据访问接口有一些外观）。

这是我们使用的存储库 - 它使我们与直接使用 nhibernate 分离，但提供了 linq 接口（在特殊情况下作为 ISession 访问，最终会受到重构）。

```
class Repo
{
    ISession _session; //via ioc
    IQueryable<T> Query()
    {
        return _session.Query<T>();
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-09-04T09:59:56.700

对我来说，这是一个简单的决定，因素相对较少。这些因素是：

1.  存储库用于域类。
2.  在我的一些应用程序中，域类与我的持久性 (DAL) 类相同，而在其他应用程序中则不然。
3.  当它们相同时，EF 已经为我提供了存储库。
4.  EF 提供延迟加载和 IQueryable。我喜欢这些。
5.  通过 EF 抽象/“立面”/重新实现存储库通常意味着丢失惰性和 IQueryable

所以，如果我的应用程序不能证明#2 的合理性，分离域和数据模型，那么我通常不会为#5 烦恼。

# css - 通过 CSS 在 JQuery Mobile 中居中文本

> ID：14110892
> 
> 赞同：0
> 
> 时间：2013-01-01T13:31:11.627
> 
> 标签：css, jquery-mobile

我正在使用 JQuery Mobile 构建应用程序。我的应用程序将在页面顶部标题下方显示一条消息。我想使用内置的样式机制。目前，我有以下内容：

```
<div data-role="content">   
  <ul data-role="listview"> 
    <li data-role="list-divider"><span id="dynamicLabel">Loading</span></li>
  </ul><br />
</div> 
```

如何水平居中显示的内容`dynamicLabel`？无论我做什么，文本“加载”总是左对齐。我试过 text-align:center 和 margin-left:auto 和 margin-right:auto。虽然没有运气。

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:39:49.103

添加`text-align:center;`到父级`<li>`，而不是`<span>`.

[jsFiddle](http://jsfiddle.net/DJDavid98/UmJ49/1/)

# ruby - 从 ruby 调用 mongodb cloneCollection 的正确方法

> ID：14110895
> 
> 赞同：1
> 
> 时间：2013-01-01T13:32:12.337
> 
> 标签：ruby, mongodb

我正在尝试从 ruby​​ 调用 mongodb cloneCollection 命令。基于[https://github.com/mongodb/mongo-ruby-driver/wiki/FAQ](https://github.com/mongodb/mongo-ruby-driver/wiki/FAQ)的第一个问题，我制作了这个测试脚本：

```
require "mongo"
include Mongo

db = MongoClient.new("localhost", 27017).db("test")

coll = "users2"
cmd = {}
cmd['cloneCollection'] = coll
cmd['from'] = "test.example.com:27017"
db.command(cmd) 
```

但是，它不是克隆 users2 集合，而是创建一个同名的空数据库。无法弄清楚我做错了什么。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T17:40:54.997

以下 Ruby 程序是一个独立的工作示例，应该可以回答您的问题，并启动源和目标 mongod 服务器。

看来 cloneCollection 的 arg 必须是完全限定名称，例如，“test”数据库中“users”集合的“test.users”。

```
require "mongo"

# startup source and destination mongod servers
source = { 'port' => 27018, 'dbpath' => 'data27018' }
dest = { 'port' => 27019, 'dbpath' => 'data27019' }
[ source, dest ].each do |server|
  dbpath = server['dbpath']
  system("rm -fr #{dbpath} && mkdir #{dbpath} && mongod --port #{server['port']} --dbpath #{dbpath} &")
end

sleep 10 # delay for mongod startup

db_name = 'test'
coll_name = 'users'
db_coll_name = "#{db_name}.#{coll_name}"

# create source collection
db = Mongo::MongoClient.new("localhost", source['port']).db(db_name)
coll = db[coll_name]
coll.insert({'name' => 'Gary'})

# cloneCollection from source to dest
db = Mongo::MongoClient.new("localhost", dest['port']).db(db_name)
cmd = BSON::OrderedHash.new
cmd['cloneCollection'] = db_coll_name
cmd['from'] = "localhost:#{source['port']}"
db.command(cmd)
# verify cloneCollection
p db[coll_name].find.to_a

# kill mongod servers
pids = `pgrep mongod`.split(/\n/).sort.slice(-2,2)
system("kill #{pids.join(' ')}") 
```

如果您有任何其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T17:52:37.493

`Mongo::DB`在对没有方法感到惊讶`cloneCollection`并阅读了@Gary Murakami 上面的出色答案之后，我写了这个可能对其他人有用的猴子补丁：

```
class Mongo::DB
  def cloneCollection(remote_host, collection_name)
    cmd = BSON::OrderedHash.new
    cmd['cloneCollection'] = name + "." + collection_name
    cmd['from'] = remote_host
    self.command(cmd)
  end
end 
```

只需将其放在源文件中的任何位置即可获得`Mongo::DB.cloneCollection`实现。

# php - FOSUserBundle：配置错误（处理程序）

> ID：14110897
> 
> 赞同：3
> 
> 时间：2013-01-01T13:32:45.793
> 
> 标签：php, symfony-2.1, fosuserbundle

我正在使用`Symfony 2.1`一个项目并尝试使用它`FOSUserBundle`来管理用户。我也在关注文档，但出现错误：

```
 Unrecognized options "handler" under "fos_user.change_password.form" 
```

任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:45:54.107

FOSUserBundle 最近在`2.0.x`. 截至目前，[FOSUserBundle 文档](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md)不是最新的，目前适用于`1.3.x`以下版本。

`1.3.x`如果您仍想使用处理程序，可以通过 composer恢复。看看[packagist](https://packagist.org/packages/friendsofsymfony/user-bundle)上的不同版本。

最新版本的 FOSUserBundle 摆脱了处理程序，现在使用 EventListeners。您可以查看[FOSUserEvents](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/FOSUserEvents.php)列表并决定要挂钩的事件。[您可以在文档](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/controller_events.md)的“连接到控制器”部分中查看从控制器订阅 FOSUserEvent 的示例。

另外，请注意，如果您要覆盖 FOSUserBundle 的控制器，它现在需要 Symfony2 [Request](http://api.symfony.com/master/Symfony/Component/HttpFoundation/Request.html)组件类作为其参数。

# maven - 当添加到其他项目作为依赖项时，生产jar如何指定自己的依赖项？

> ID：14110898
> 
> 赞同：2
> 
> 时间：2013-01-01T13:32:46.463
> 
> 标签：maven, netbeans, maven-2, maven-3

如果问题标题不能说清楚，请带我在这里更详细地解释。假设我的一个 Maven 应用程序的生产 jar 需要用于我的另一个 Maven Web 应用程序。将该 jar 添加到我的第二个应用程序 Maven 依赖项中不会添加其传递依赖项。此外，jar 本身就是一个应用程序。

一种方法是查看第一个应用程序的 POM 并将它们添加到另一个应用程序的 POM 中。但是，当添加到某个项目时，中央 Maven jar 如何添加自己的传递依赖项。

换句话说，如果我将`commons-io.jar`Maven 依赖项添加到我的项目中，它会自动添加其传递依赖项。但是当我添加`myjar.jar`为 Maven 依赖项（范围-> 系统）时，它不会自动添加其传递依赖项。

我认为我应该将我的第一个应用程序开发为可以在这种情况下使用的其他原型。请告诉我如何进一步进行。

对不起这个新手问题。实际上，我是 Maven 新手，我已经开始使用 Netbeans-embedded-maven 来创建应用程序。我真的很喜欢 Maven 简化工作的方式。

`edited`

看来我应该更详细地解释一下。所以这就是它。

假设我编写了一个使用 A.jar、B.jar、C.jar 的程序/应用程序，而我的生产输出是 X.jar（根据 maven 默认构建，它显然不包含其他 jar）。上面的 A、B、C jar 存在于 maven 中央存储库中，并作为依赖项添加到我的项目中。项目构建 jar 是 X.jar

现在我编写了另一个应用程序，在其中添加了 X.jar 作为系统依赖项，现在我想要的是 A.jar、B.jar、C.jar 自动添加到项目中，因为它们是 X.jar 的传递依赖项

希望这次我已经解释清楚了。如果您之前没有理解，请原谅我的写作风格。

一种解决方案是使用类似这样的东西构建包含所有依赖项的 X.jar

```
 <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <mainClass>com.nitinsurana.mlmmaven.Start</mainClass>
                    </manifest>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
            <executions>
                <execution>
                    <id>make-my-jar-with-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

但我正在寻找能够自动添加系统依赖项的传递依赖项的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T17:43:44.797

该[`system`范围](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)不应该用于将与另一个应用程序打包的实际 jar 依赖项。引用官方文档：

> 范围系统的依赖关系始终可用，并且不在存储库中查找。它们通常用于告诉 Maven JDK 或 VM 提供的依赖项。因此，系统依赖关系对于解决对工件的依赖关系特别有用，这些工​​件现在由 JDK 提供，但之前可以单独下载。典型的例子是 JDBC 标准扩展或 Java Authentication and Authorization Service (JAAS)。

您应该使用默认`compile`范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:52:18.847

我已经浏览了@Sean 提供的链接，看来我想要的似乎是不可能的。

我应该投票删除这个问题吗？

虽然答案是它不能完成，这就是为什么：

`Project-A -> Project-B`

上图表示 Project-A 依赖于 Project-B。当 A 在其 POM 中将 B 声明为可选依赖项时，这种关系保持不变。它就像在其类路径中添加 Project-B 的普通构建一样。

`Project-X -> Project-A`

但是当另一个项目（Project-X）在其 POM 中将 Project-A 声明为依赖项时，可选依赖项就会生效。您会注意到 Project-B 不包含在 Project-X 的类路径中；`you will need to declare it directly in your POM in order for B to be included in X's classpath.`

取自 [官方文档](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T18:09:54.637

正如其他人所建议的那样，使用（默认）编译范围并添加`<exclusions>`您不想要/不需要的传递依赖项。

请参阅： [Maven > 可选依赖项和依赖项排除](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T13:05:23.557

那么，您的`X`模块是 mavenized 吗？然后您可以在本地安装它`mvn clean install`，然后在具有所有传递依赖项和`compile`范围的另一个项目中使用它。这种情况很好，直到您在自己的机器上完成所有操作。只要您想与他人共享代码或配置您需要`X`的 CI 构建，其 pom 可供他人使用。最好的方法是拥有自己的工件，可以从所有其他机器访问。您`X`在那里安装并像往常一样使用它`compile`，只需要向 pom.xml 添加新的 repo。

# python - numpy二进制光栅图像到多边形的转换

> ID：14110904
> 
> 赞同：6
> 
> 时间：2013-01-01T13:33:41.940
> 
> 标签：python, numpy

我想将 2d numpy 数组转换为多边形。性能对我来说非常重要，但我想避免进行 C 扩展。可以使用腐蚀来制作二进制轮廓图像。然后我发现[了这个](https://stackoverflow.com/questions/6282462/converting-an-open-curve-to-a-list-of-ordered-pixels-a-python-test-code-with-nu)。它太慢了，有时无法应对侵蚀造成的尖峰。一个尖峰：

```
000100
000100
000100
111011 
```

我的第一次尝试：

```
mat = mat.copy() != 0
mat = mat - scipy.ndimage.binary_erosion(mat)

vertices = np.argwhere(mat)
minx = vertices.min(axis=0)[0]
maxx = vertices.max(axis=0)[0]

vertices_sorted = {}
for x in xrange(minx - 1, maxx + 2):
    vertices_sorted[x] = []

for vertex in vertices:
    vertices_sorted[vertex[0]].append(vertex[1])

vertex_loop = [(minx, vertices_sorted[minx][0])]
while True:
    x, y = vertex_loop[-1]
    for column, row in ((x, y + 1), (x, y - 1), 
    (x + 1, y), (x + 1, y + 1), (x + 1, y - 1),
    (x - 1, y), (x - 1, y + 1), (x - 1, y - 1)):
        if row in vertices_sorted[column]:
            vertices_sorted[column].remove(row)
            vertex_loop.append((column, row))
            break
    else:
        vertex_loop.pop()

    if vertex_loop[-1] == vertex_loop[0]:
        break
return vertex_loop[:-1] 
```

它大部分时间都有效，但速度不够快。我的第二个代码很少工作，但我没有修复它，因为它比第一个慢很多倍：

```
mat = mat.copy() != 0
mat = mat - scipy.ndimage.binary_erosion(mat)

xs, ys = np.nonzero(mat)
ys = np.ma.array(ys)

vertex_loop = [(xs[0], ys[0])]
ys[0] = np.ma.masked
while True:
    x, y = vertex_loop[-1]
    start = np.searchsorted(xs, x-1, side="left")
    end = np.searchsorted(xs, x+1, side="right")

    for i in xrange(start, end):
        if ys[i] == y or ys[i] == y + 1 or ys[i] == y - 1:
            vertex_loop.append((xs[i], ys[i]))
            ys[i] = np.ma.masked
            break
    else:
        if np.all(ys.mask):
            break
        else:
            vertex_loop.pop()
return vertex_loop 
```

如何进一步提高速度？

编辑：似乎 numpy 掩码数组非常慢。这个实现几乎和第一个一样快：

```
#import time
#t1 = time.time()
mat = mat.copy() != 0
mat = mat - scipy.ndimage.binary_erosion(mat)

xs, ys = np.nonzero(mat)
#t2 = time.time()
minx = xs[0]
maxx = xs[-1]

# Ketju pakosti käy läpi kaikki rivit minx:n ja maxx:n välissä, sillä se ON KETJU
xlist = range(minx - 1, maxx + 2)
# starts ja ends ovat dictit jotka kertovat missä slicessä x == key
tmp = np.searchsorted(xs, xlist, side="left")
starts = dict(zip(xlist, tmp))
tmp = np.searchsorted(xs, xlist, side="right")
ends = dict(zip(xlist, tmp))

unused = np.ones(len(xs), dtype=np.bool)
#t3 = time.time()
vertex_loop = [(xs[0], ys[0])]
unused[0] = 0
count = 0
while True:
    count += 1
    x, y = vertex_loop[-1]
    for i in xrange(starts[x - 1], ends[x + 1]):
        row = ys[i]
        if unused[i] and (row == y or row == y + 1 or row == y - 1):
            vertex_loop.append((xs[i], row))
            unused[i] = 0
            break
    else:
        if abs(x - xs[0]) <= 1 and abs(y - ys[0]) <= 1:
            break
        else:
            vertex_loop.pop()
#t4 = time.time()
#print abs(t1-t2)*1000, abs(t2-t3)*1000, abs(t3-t4)*1000
return vertex_loop 
```

我想知道是否有一种简单的方法可以用我没有偶然发现的 scipy 来做到这一点。

EDIT2：在 pygame 中，有一个遮罩对象可以在 0.025 毫秒内完成我所需要的工作，而我的解决方案需要 35 毫秒，而我在互联网上某处找到的 find_contours 可以在 4-5 毫秒内完成。我将修改 pygame.mask.outline 的源代码以使用 numpy 数组并将其发布在这里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-08T20:03:42.770

这是：获取二进制 numpy 数组轮廓的极快方法。

大纲.py：

```
from scipy.weave import inline, converters

_code = open("outline.c", "r").read()

def outline(data, every):
    width, height = data.shape
    return inline(_code, ['data', 'width', 'height', 'every'], type_converters=converters.blitz) 
```

大纲.c：

```
/*
Modifioitu pygame.mask.Mask.outline
Input: data, width, height, every
*/

PyObject *plist, *value;
int x, y, e, firstx, firsty, secx, secy, currx, curry, nextx, nexty, n;
int a[14], b[14];
a[0] = a[1] = a[7] = a[8] = a[9] = b[1] = b[2] = b[3] = b[9] = b[10] = b[11]= 1;
a[2] = a[6] = a[10] = b[4] = b[0] = b[12] = b[8] = 0;
a[3] = a[4] = a[5] = a[11] = a[12] = a[13] = b[5] = b[6] = b[7] = b[13] = -1;

plist = NULL;
plist = PyList_New (0);
/*if (!plist) En ymmärrä mihin tätä tarvii
    return NULL;*/

every = 1;
n = firstx = firsty = secx = x = 0;

/*if(!PyArg_ParseTuple(args, "|i", &every)) {
    return NULL;
}

 by copying to a new, larger mask, we avoid having to check if we are at
   a border pixel every time.  
bitmask_draw(m, c, 1, 1); */

e = every;

/* find the first set pixel in the mask */
for (y = 1; y < height-1; y++) {
    for (x = 1; x < width-1; x++) {
        if (data(x, y)) {
             firstx = x;
             firsty = y;
             value = Py_BuildValue("(ii)", x-1, y-1);
             PyList_Append(plist, value);
             Py_DECREF(value);
             break;
        }
    }
    if (data(x, y))
        break;
}

/* covers the mask having zero pixels or only the final pixel
Pikseleitä on ainakin kymmenen
if ((x == width-1) && (y == height-1)) {
    return plist;
}        */

/* check just the first pixel for neighbors */
for (n = 0;n < 8;n++) {
    if (data(x+a[n], y+b[n])) {
        currx = secx = x+a[n];
        curry = secy = y+b[n];
        e--;
        if (!e) {
            e = every;
            value = Py_BuildValue("(ii)", secx-1, secy-1);
            PyList_Append(plist, value);
            Py_DECREF(value);
        }
        break;
    }
}       

/* if there are no neighbors, return
Pikseleitä on ainakin kymmenen
if (!secx) {
    return plist;
}*/

/* the outline tracing loop */
for (;;) {
    /* look around the pixel, it has to have a neighbor */
    for (n = (n + 6) & 7;;n++) {
        if (data(currx+a[n], curry+b[n])) {
            nextx = currx+a[n];
            nexty = curry+b[n];
            e--;
            if (!e) {
                e = every;
                if ((curry == firsty && currx == firstx) && (secx == nextx && secy == nexty)) {
                    break;
                }
                value = Py_BuildValue("(ii)", nextx-1, nexty-1);
                PyList_Append(plist, value);
                Py_DECREF(value);
            }
            break;
        }
    }
    /* if we are back at the first pixel, and the next one will be the
       second one we visited, we are done */
    if ((curry == firsty && currx == firstx) && (secx == nextx && secy == nexty)) {
        break;
    }

    curry = nexty;
    currx = nextx;
}

return_val = plist; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T06:39:29.593

“我想将 2d numpy 数组转换为多边形” - 你能澄清一下吗？你的意思是你想要一个只有边缘元素的标记数组（在原始网格上），还是一个多边形顶点坐标的有序列表？

例如：这样做

```
[ [ 0, 0, 0, 0, 0 ], 
  [ 0, 1, 1, 1, 0 ], 
  [ 0, 1, 1, 1, 0 ], 
  [ 0, 1, 1, 1, 0 ], 
  [ 0, 0, 0, 0, 0 ] ] 
```

变成这样：

```
[ [ 0, 0, 0, 0, 0 ], 
  [ 0, 1, 1, 1, 0 ], 
  [ 0, 1, 0, 1, 0 ], 
  [ 0, 1, 1, 1, 0 ], 
  [ 0, 0, 0, 0, 0 ] ] 
```

或进入顶点列表`( (1, 1), (3,1), (3,3), (1,3) )`？

或者你想先找到边然后找到顶点？

我将基于您想要的只是边缘的假设简要回答（因为您正在谈论侵蚀等）。听起来您正在尝试使用形态学操作（侵蚀等）进行边缘检测。边缘检测也可以直接进行。使用`ndimage.sobel`or `scikits.filter.canny`，或者这个：

```
import numpy as np
import scipy.ndimage as ndimage
import matplotlib.pyplot as pyplot
im = np.zeros((32, 32))
im[8:-8, 8:-8] = 1
im = ndimage.rotate(im, 15)
im = numpy.where(im > 0.5, 1, 0)
edges = (ndimage.filters.maximum_filter(im, size=2) == ndimage.filters.minimum_filter(im, size=2))
pyplot.imshow(edges, interpolation='nearest')
pyplot.show() 
```

如果您的数据已经被阈值化（0 和 1）并且边缘没有过度嘈杂，那么任何边缘检测器都可以很好地工作。

# javascript - 文档对象写入方法

> ID：14110907
> 
> 赞同：0
> 
> 时间：2013-01-01T13:34:33.343
> 
> 标签：javascript

文档对象写入方法在函数内部和外部使用时的工作方式不同。在函数内部时，它将文档中的整个元素替换为其中指定的字符串，但在函数外部时，将在元素下方写入内容。为什么会这样？

```
function foo(){document.write("Maizere")}
element.onclick=foo 
```

当事件发生时，文档上的所有内容都将替换为 write 方法中指定的字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-01T13:39:19.823

当页面（准确地说是文档）已经加载时，在它写入之前[`document.write`调用`document.open`](https://developer.mozilla.org/en-US/docs/DOM/document.write#Notes)它会在写入之前首先[清除当前文档](https://developer.mozilla.org/en-US/docs/DOM/document.open#Notes)。因此，当放置`document.write`在页面加载后被调用的函数时，当前页面被清除并且文本`document.write`取而代之。

但是，当页面仍在加载时，`document.write` *不会*调用`document.open`因此不会清除页面。相反，它会立即执行并附加分配给页面上的任何内容。

# ios - coreplot 中的 x 轴标签未显示

> ID：14110913
> 
> 赞同：2
> 
> 时间：2013-01-01T13:35:24.903
> 
> 标签：ios, ios5, ios6, core-plot, bar-chart

我已经附上了我正在使用的整个代码，但没有生成 x 轴标签。我不知道哪里出错了。我是核心情节中的菜鸟。请帮助我。提前致谢，新的快乐年。

```
#import "BarPlotViewController.h"

@interface BarPlotViewController ()

@end

@implementation BarPlotViewController

#define BAR_POSITION @"POSITION"
#define BAR_HEIGHT @"HEIGHT"
#define COLOR @"COLOR"
#define CATEGORY @"CATEGORY"

#define AXIS_START 0
#define AXIS_END 50

//
@synthesize data;
@synthesize graph;
@synthesize hostingView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        self.data = [NSMutableArray array];

        int bar_heights[] = {20,30,10,40};
        UIColor *colors[] = {
            [UIColor redColor],
            [UIColor blueColor],
            [UIColor orangeColor],
            [UIColor purpleColor]};
        NSString *categories[] = {@"Plain Milk", @"Milk + Caramel", @"White", @"Dark"};

        for (int i = 0; i < 4 ; i++){
            double position = i*10; //Bars will be 10 pts away from each other
            double height = bar_heights[i];

            NSDictionary *bar = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithDouble:position],BAR_POSITION,
                                 [NSNumber numberWithDouble:height],BAR_HEIGHT,
                                 colors[i],COLOR,
                                 categories[i],CATEGORY,
                                 nil];
            [self.data addObject:bar];

        }
        [self generateBarPlot];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)generateBarPlot
{
    //Create host view
    self.hostingView = [[CPTGraphHostingView alloc]
                        initWithFrame:[[UIScreen mainScreen]bounds]];
    [self.view addSubview:self.hostingView];

    //Create graph and set it as host view's graph
    self.graph = [[CPTXYGraph alloc] initWithFrame:self.hostingView.bounds];
    [self.hostingView setHostedGraph:self.graph];

    //set graph padding and theme
    self.graph.plotAreaFrame.paddingTop = 20.0f;
    self.graph.plotAreaFrame.paddingRight = 20.0f;
    self.graph.plotAreaFrame.paddingBottom = 70.0f;
    self.graph.plotAreaFrame.paddingLeft = 70.0f;
    [self.graph applyTheme:[CPTTheme themeNamed:kCPTDarkGradientTheme]];

    //set axes ranges
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)self.graph.defaultPlotSpace;
  //  plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(AXIS_START)                                            length:CPTDecimalFromFloat((AXIS_END - AXIS_START)+5)];

 //   plotSpace.xRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(-1)                                                                   length:CPTDecimalFromInt(8)];

        CPTXYAxisSet *axisSet = (CPTXYAxisSet *)self.graph.axisSet;

    //X labels
    int labelLocations = 0;
    NSMutableArray *customXLabels = [NSMutableArray array];
   NSArray *dates = [NSArray arrayWithObjects:@"2012-05-01", @"2012-05-02", @"2012-05-03",
             @"2012-05-04", @"2012-05-05", @"2012-05-06", @"2012-05-07", nil];
    for (NSString *day in dates) {
        CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:day textStyle:axisSet.xAxis.labelTextStyle];
        newLabel.tickLocation   = [[NSNumber numberWithInt:labelLocations] decimalValue];
        newLabel.offset         = axisSet.xAxis.labelOffset + axisSet.xAxis.majorTickLength;
     //   newLabel.rotation       = M_PI / 4;
        [customXLabels addObject:newLabel];
        labelLocations++;

    }
    axisSet.xAxis.axisLabels   = [NSSet setWithArray:customXLabels];

    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:
                        CPTDecimalFromFloat(AXIS_START)
                                                    length:CPTDecimalFromFloat((AXIS_END - AXIS_START)+5)];

    //set axes' title, labels and their text styles
    CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
    textStyle.fontName = @"Helvetica";
    textStyle.fontSize = 14;
    textStyle.color = [CPTColor whiteColor];
    axisSet.xAxis.title = @"Years";
    axisSet.yAxis.title = @"Expenses";
    axisSet.xAxis.titleTextStyle = textStyle;
    axisSet.yAxis.titleTextStyle = textStyle;
    axisSet.xAxis.titleOffset = 30.0f;
    axisSet.yAxis.titleOffset = 40.0f;
    axisSet.xAxis.labelTextStyle = textStyle;
    axisSet.xAxis.labelOffset = 3.0f;
    axisSet.yAxis.labelTextStyle = textStyle;
    axisSet.yAxis.labelOffset = 3.0f;

    //set axes' line styles and interval ticks
    CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];
    lineStyle.lineColor = [CPTColor whiteColor];
    lineStyle.lineWidth = 3.0f;
    axisSet.xAxis.axisLineStyle = lineStyle;
    axisSet.yAxis.axisLineStyle = lineStyle;
    axisSet.xAxis.majorTickLineStyle = lineStyle;
    axisSet.yAxis.majorTickLineStyle = lineStyle;
    axisSet.xAxis.majorIntervalLength = CPTDecimalFromFloat(5.0f);
    axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(5.0f);
    axisSet.xAxis.majorTickLength = 7.0f;
    axisSet.yAxis.majorTickLength = 7.0f;
    axisSet.xAxis.minorTickLineStyle = lineStyle;
    axisSet.yAxis.minorTickLineStyle = lineStyle;
    axisSet.xAxis.minorTicksPerInterval = 1;
    axisSet.yAxis.minorTicksPerInterval = 1;
    axisSet.xAxis.minorTickLength = 5.0f;
    axisSet.yAxis.minorTickLength = 5.0f;

    // Create bar plot and add it to the graph
    CPTBarPlot *plot = [[CPTBarPlot alloc] init] ;
    plot.dataSource = self;
    plot.delegate = self;
    plot.barWidth = [[NSDecimalNumber decimalNumberWithString:@"5.0"]
                     decimalValue];
    plot.barOffset = [[NSDecimalNumber decimalNumberWithString:@"10.0"]
                      decimalValue];
    plot.barCornerRadius = 5.0;
    // Remove bar outlines
    CPTMutableLineStyle *borderLineStyle = [CPTMutableLineStyle lineStyle];
    borderLineStyle.lineColor = [CPTColor clearColor];
    plot.lineStyle = borderLineStyle;
    // Identifiers are handy if you want multiple plots in one graph
    plot.identifier = @"chocoplot";
    [self.graph addPlot:plot];

    }

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
    if ( [plot.identifier isEqual:@"chocoplot"] )
        return [self.data count];

    return 0;
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    if ( [plot.identifier isEqual:@"chocoplot"] )
    {
        NSDictionary *bar = [self.data objectAtIndex:index];

        if(fieldEnum == CPTBarPlotFieldBarLocation)
            return [bar valueForKey:BAR_POSITION];
        else if(fieldEnum ==CPTBarPlotFieldBarTip)
            return [bar valueForKey:BAR_HEIGHT];
    }
    return [NSNumber numberWithFloat:0];
}

-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index
{
    if ( [plot.identifier isEqual: @"chocoplot"] )
    {
        CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
        textStyle.fontName = @"Helvetica";
        textStyle.fontSize = 14;
        textStyle.color = [CPTColor whiteColor];

        NSDictionary *bar = [self.data objectAtIndex:index];
//        CPTTextLayer *label = [[CPTTextLayer alloc] initWithText:[NSString stringWithFormat:@"%@", [bar valueForKey:@"CATEGORY"]]];

        CPTTextLayer *label = [[CPTTextLayer alloc] initWithText:[NSString stringWithFormat:@"%@", [bar valueForKey:@"HEIGHT"]]];

        label.textStyle =textStyle;

        return label;
    }

    CPTTextLayer *defaultLabel = [[CPTTextLayer alloc] initWithText:@"Label"];
    return defaultLabel;

}

-(void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)index
{
    NSLog(@"barWasSelectedAtRecordIndex %d", index);
}

-(CPTFill *)barFillForBarPlot:(CPTBarPlot *)barPlot
                  recordIndex:(NSUInteger)index
{
    if ( [barPlot.identifier isEqual:@"chocoplot"] )
    {
        NSDictionary *bar = [self.data objectAtIndex:index];
        CPTGradient *gradient = [CPTGradient gradientWithBeginningColor:[CPTColor whiteColor]
                                                            endingColor:[bar valueForKey:@"COLOR"]
                                                      beginningPosition:0.0 endingPosition:0.3 ];
        [gradient setGradientType:CPTGradientTypeAxial];
        [gradient setAngle:320.0];

        CPTFill *fill = [CPTFill fillWithGradient:gradient];

        return fill;

    }
    return [CPTFill fillWithColor:[CPTColor colorWithComponentRed:1.0 green:1.0 blue:1.0 alpha:1.0]];

}

@end 
```

绘制 x 轴标签的主要代码：这是 x 轴标签的代码：

```
 CPTXYAxisSet *axisSet = (CPTXYAxisSet *)self.graph.axisSet;

    //X labels
    int labelLocations = 0;
    NSMutableArray *customXLabels = [NSMutableArray array];
   NSArray *dates = [NSArray arrayWithObjects:@"2012-05-01", @"2012-05-02", @"2012-05-03",
             @"2012-05-04", @"2012-05-05", @"2012-05-06", @"2012-05-07", nil];
    for (NSString *day in dates) {
        CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:day textStyle:axisSet.xAxis.labelTextStyle];
        newLabel.tickLocation   = [[NSNumber numberWithInt:labelLocations] decimalValue];
        newLabel.offset         = axisSet.xAxis.labelOffset + axisSet.xAxis.majorTickLength;
     //   newLabel.rotation       = M_PI / 4;
        [customXLabels addObject:newLabel];
        labelLocations++;

    }
    axisSet.xAxis.axisLabels   = [NSSet setWithArray:customXLabels]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T14:43:42.120

你试过[这个](https://stackoverflow.com/questions/5577651/coreplot-xaxis-labels-not-displaying?rq=1)吗？您必须正确处理填充。

```
graph.plotAreaFrame.paddingBottom=40; 
```

# php - 为什么要传递一个 Config 对象？设置不能是常数吗？

> ID：14110915
> 
> 赞同：1
> 
> 时间：2013-01-01T13:35:31.060
> 
> 标签：php, instantiation

在我的应用程序中，我有我的常量：

```
define('APP_PATH', WEB_ROOT . APP_DIR);
define('LIBS_PATH', APP_PATH . LIBS_DIR);
define('MODELS_PATH', APP_PATH . MODELS_DIR);
define('VIEWS_PATH', APP_PATH . VIEWS_DIR);
define('CONTROLLERS_PATH', APP_PATH . CONTROLLERS_DIR);
etc... 
```

因为一旦我的应用程序启动它们就永远不会改变，并且它们很容易从任何类/方法中访问。

我也有一个配置文件，其中包含其他设置，这些设置被导入到`$config`我在应用程序中传递并检索它们的对象中，例如：

```
$this->config->setting('some.setting'); 
```

我从来不需要在应用程序的末尾或中间更改配置值，所以将它们定义为常量不是更容易，这样我就可以在我的代码中轻松访问它们了吗？

我也不想静态检索设置，即

```
Config::setting('some.setting'); 
```

我查看了一些 PHP 框架的代码，它们都将路径定义为常量，但是在某种类中还有其他配置设置，`Config`尽管据我所知，它们从未在整个代码中更改这些配置设置（尽管它们可能因为我没有通读数万行中的每一行）并且许多框架似乎喜欢从不同类的方法中对各种方法进行静态调用，人们说它们是很好的框架，但我已经阅读并体验过当涉及到类/方法中的静态调用时，弊大于利。

您认为最好用配置设置做什么？你做什么工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:40:19.287

在对象中包装常量使您的代码更具可移植性。

例如，通过这种方式，您可以在应用程序引导时从文件加载常量，这样您就可以在任意数量的应用程序中重用您的代码，每个应用程序都有不同的配置文件。

在另一个程度上，从一个类中加载东西就像一个门面：你可以将设置从一个文件移动到一个数据库，甚至硬编码它们，而整个应用程序都不会注意到。

当然，您可以参加`define`很少的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T15:19:37.767

在配置对象中包装设置提供了封装，从而允许更好的共存。

例如，假设您有一个数据库访问框架。如果为此使用全局设置，则无法在单个程序中轻松访问多个数据库。将设置放入对象允许您为相应的数据库使用特定的配置对象。

# knockout.js - 使用我自己的自定义绑定包装淘汰赛“模板”绑定时出现异常

> ID：14110916
> 
> 赞同：1
> 
> 时间：2013-01-01T13:35:38.517
> 
> 标签：knockout.js, templatebinding, custom-binding

我正在尝试基于模板绑定编写自定义绑定。想法是拥有自己的视图模型类的模板，但我不想将该类的实例添加到父视图模型（至少不在代码中。在执行时添加实例对我来说是可以的）。

要了解我在这里要实现的目标是示例：我想构建高级滑块，我不希望滑块的 html 在模板中，滑块也需要它自己的类，但我不想添加滑块的视图模型实例到父视图模型。这是我的代码，它起初可以工作，并且似乎首先呈现模板，但随后抛出异常，我不明白为什么。[在此处查看工作代码](http://jsbin.com/irevic/9/edit)

html:

```
 <script type="text/html" id="my-template">  
    <div data-bind="text: internalValue"></div>
  </script>

  <div data-bind="templateWithModel: {name: 'my-template', dataPropName: 'price', modelConstructor: Slider}">
  </div> 
```

js：

```
ko.bindingHandlers.templateWithModel = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext){
        var options = ko.utils.unwrapObservable(valueAccessor());
        var modelName = options.name + "_" + options.dataPropName;
        viewModel[modelName] = new options.modelConstructor(viewModel[options.dataPropName]);

        ko.bindingHandlers.template.init(element, valueAccessor);
    },
    'update': function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var options = ko.utils.unwrapObservable(valueAccessor());
        var modelName = options.name + "_" + options.dataPropName;
        options.data = viewModel[modelName];

        ko.bindingHandlers.template.update(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext);
    }
}

var Slider = function(obsVal){
  var self = this;

  self.internalValue = ko.observable(obsVal());
}     

var vm = {price: ko.observable(5)};

ko.applyBindings(vm); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:28:10.173

在您的`init`函数中，您将希望返回`ko.bindingHandlers.template.init`或 return的值`{ controlsDescendantBindings: true }`。

这告诉 Knockout 绑定将负责将绑定应用于子元素。否则，Knockout 将继续对子元素应用与整个视图模型的绑定，这会导致您的异常，因为`internalValue`它不是顶级视图模型上的属性。

这部分文档： http: [//knockoutjs.com/documentation/custom-bindings-controlling-descendant-bindings.html](http://knockoutjs.com/documentation/custom-bindings-controlling-descendant-bindings.html)这篇博文有助于`controlsDescendantBindings`进一步解释：[http ://www.knockmeout.net/2012/05/quick -tip-skip-binding.html](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:47:12.377

我做了一个框架，用于将视图模型与模板绑定。看这里，

[https://github.com/AndersMalmgren/Knockout.BindingConventions/wiki/Template-convention](https://github.com/AndersMalmgren/Knockout.BindingConventions/wiki/Template-convention)

它按约定工作，因此如果您有一个成员，那就是一个具有名称的模型，`MyViewModel`那么它将寻找一个名为 MyView 的模板

```
<div data-name="myMember"></div> 
```

[http://jsfiddle.net/xJL7u/](http://jsfiddle.net/xJL7u/)

# php - 如何停止在此 PHP 文件中缓存 .js 文件

> ID：14110918
> 
> 赞同：2
> 
> 时间：2013-01-01T13:35:56.697
> 
> 标签：php, caching, http-headers

我试图阻止`chatrooms.js`文件被缓存，聊天的开发人员告诉我我需要通过`js.php`

这是代码`js.php`：

```
include_once (dirname(__FILE__).DIRECTORY_SEPARATOR.'config.php');

if (phpversion() >= '5') {
    include_once (dirname(__FILE__).DIRECTORY_SEPARATOR.'jsmin.php');
}

if (BAR_DISABLED == 1) { exit; }

if(get_magic_quotes_runtime()) { 
    set_magic_quotes_runtime(false); 
}

$mtime = microtime();
$mtime = explode(" ",$mtime);
$mtime = $mtime[1] + $mtime[0];
$starttime = $mtime; 

$HTTP_USER_AGENT = '';
$useragent = (isset($_SERVER["HTTP_USER_AGENT"]) ) ? $_SERVER["HTTP_USER_AGENT"] : $HTTP_USER_AGENT;

ob_start();

if (!empty($_REQUEST['type']) && !empty($_REQUEST['name'])) {
    $type = cleanInput($_REQUEST['type']);
    $name = cleanInput($_REQUEST['name']);
} else {
    $type = 'core';
    $name = 'default';
}

$cbfn = '';

if (!empty($_REQUEST['callbackfn'])) {
    $cbfn = $_REQUEST['callbackfn'];
} 

if (file_exists(dirname(__FILE__).DIRECTORY_SEPARATOR.'cache'.DIRECTORY_SEPARATOR.$cbfn.$theme.$lang.$type.$name.'.js') && DEV_MODE != 1) {

    if (!empty($_SERVER['HTTP_IF_MODIFIED_SINCE']) && strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) == filemtime(dirname(__FILE__).DIRECTORY_SEPARATOR.'cache'.DIRECTORY_SEPARATOR.$cbfn.$theme.$lang.$type.$name.'.js')) {
        header("HTTP/1.1 304 Not Modified");
        exit;
    }

    readfile(dirname(__FILE__).DIRECTORY_SEPARATOR.'cache'.DIRECTORY_SEPARATOR.$cbfn.$theme.$lang.$type.$name.'.js');
    $js = ob_get_clean();

} else {

    if (($type != 'core' || $name != 'default') && $type != 'external') {

        if ($type == 'core') {
            include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."js".DIRECTORY_SEPARATOR.$name.".js");
        } else {
            include_once (dirname(__FILE__).DIRECTORY_SEPARATOR.$type."s".DIRECTORY_SEPARATOR.$name.DIRECTORY_SEPARATOR.$name.".js");
        }

    } else {

        if (USE_COMET == 1) {
            $minHeartbeat = REFRESH_BUDDYLIST.'000';
            $maxHeartbeat = REFRESH_BUDDYLIST.'000';
        }

        if ((defined('INCLUDE_JQUERY') && INCLUDE_JQUERY == 1) || !empty($_GET['callbackfn'])) {
            include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."js".DIRECTORY_SEPARATOR."jquery.js");
        }

        $settings = '';

        if ((defined('DISPLAY_ALL_USERS') && DISPLAY_ALL_USERS == 1) || (defined('FORCE_ALL_USERS') && FORCE_ALL_USERS == 1)) {
            $language[14] = $language[28];
        } else if ($hideOffline == 1) {
            $language[14] = $language[29];
        }
        for ($i=0;$i<count($language);$i++) {
        $settings .= "_2[".$i."] = '".str_replace("'", "\'", $language[$i])."';\n";
        }

        for ($i=0;$i<count($trayicon);$i++) {
            $id = $trayicon[$i];
            if (!empty($trayicon[$i][7]) && $trayicon[$i][7] == 1) {
                $trayicon[$i][2] = BASE_URL.$trayicon[$i][2];
            }

            if (file_exists(dirname(__FILE__).DIRECTORY_SEPARATOR."modules".DIRECTORY_SEPARATOR.$trayicon[$i][0].DIRECTORY_SEPARATOR."lang".DIRECTORY_SEPARATOR.$lang.".php")) {
                include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."modules".DIRECTORY_SEPARATOR.$trayicon[$i][0].DIRECTORY_SEPARATOR."lang".DIRECTORY_SEPARATOR.$lang.".php");
                    $traylanguage = $trayicon[$i][0].'_language';

                if (!empty(${$traylanguage}[100])) {
                    $trayicon[$i][1] = ${$traylanguage}[100];
                }
            }

            $settings .= "_3['".$id[0]."'] = ['".implode("','",$trayicon[$i])."'];\n";
        }

        if (!empty($_GET['callbackfn'])) {
            $hideBar = 0;
        }

        $settings .= "var _4 = ['".implode("','",$plugins)."'];\n";
        $settings .= "var _5 = ".$autoPopupChatbox.";";
        $settings .= "var _6 = ".$messageBeep.";";
        $settings .= "var _7 = '".$theme."';";
        $settings .= "var _8 = ".$minHeartbeat.";";
        $settings .= "var _9 = ".$maxHeartbeat.";";
        $settings .= "var _a = '".$cookiePrefix."';";
        $settings .= "var _b = '".$barType."';";
        $settings .= "var _c = ".$barWidth.";";
        $settings .= "var _d = '".$barAlign."';";
        $settings .= "var _e = ".$barPadding.";";
        $settings .= "var _f = ".$beepOnAllMessages.";";
        $settings .= "var _10 = ".$fullName.";";
        $settings .= "var _11 = ".$autoLoadModules.";";
    $settings .= "var _12 = ".$longNameLength.";";
    $settings .= "var _13 = ".$shortNameLength.";";
    $settings .= "var _14 = ".$searchDisplayNumber.";";
    $settings .= "var _15 = ".$thumbnailDisplayNumber.";";
    $settings .= "var _16 = ".$typingTimeout.";";
    $settings .= "var _17 = ".$idleTimeout.";";
    $settings .= "var _18 = ".$displayOfflineNotification.";";
    $settings .= "var _19 = ".$displayOnlineNotification.";";
    $settings .= "var _1a = ".$displayBusyNotification.";";
    $settings .= "var _1b = ".$notificationTime.";";
    $settings .= "var _1c = ".$announcementTime.";";
    $settings .= "var _1d = ".$armyTime.";";
    $settings .= "var _1e = ".$scrollTime.";";
    $settings .= "var _1f = ".$disableForIE6.";";
    $settings .= "var _20 = ".$disableForMobileDevices.";";
    $settings .= "var _21 = ".$iPhoneView.";";
    $settings .= "var _22 = ".$hideBar.";";
    $settings .= "var _23 = ".$fixFlash.";";
    $settings .= "var _24 = ['".implode("','",$extensions)."'];\n";

include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."js".DIRECTORY_SEPARATOR."libraries.js");

        if ($sleekScroller == 1) {
            include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."js".DIRECTORY_SEPARATOR."scroll.js");
        }

        if (USE_COMET == 1) {
            include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."transports".DIRECTORY_SEPARATOR.TRANSPORT.DIRECTORY_SEPARATOR.'config.php');
            include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."transports".DIRECTORY_SEPARATOR.TRANSPORT.DIRECTORY_SEPARATOR.'includes.php');
        }

        // Modifying this will void license
        if ($p_<2) { $jsfn = 'c5'; } else { $jsfn = 'c6'; }

        if ($lightWeight == 1 && empty($_GET['callbackfn'])) {
            include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."js".DIRECTORY_SEPARATOR."cometchat_lite.js");     
        } else {
            include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."js".DIRECTORY_SEPARATOR."cometchat.js");                                                                                                                     
        }

        if ($type =='external') {
            include_once (dirname(__FILE__).DIRECTORY_SEPARATOR.$name.DIRECTORY_SEPARATOR.$name.".js");
        }

        $include = 'init';

        if (!empty($_GET['callbackfn']) && $_GET['callbackfn'] != 'desktop') {
            $include = $_GET['callbackfn'];
        }

        foreach ($plugins as $plugin) {
            if (file_exists(dirname(__FILE__).DIRECTORY_SEPARATOR."plugins".DIRECTORY_SEPARATOR.$plugin.DIRECTORY_SEPARATOR.$include.".js")) {
                include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."plugins".DIRECTORY_SEPARATOR.$plugin.DIRECTORY_SEPARATOR.$include.".js");
            }
        }

        foreach ($extensions as $extension) {
            if (file_exists(dirname(__FILE__).DIRECTORY_SEPARATOR."extensions".DIRECTORY_SEPARATOR.$extension.DIRECTORY_SEPARATOR.$include.".js")) {
                include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."extensions".DIRECTORY_SEPARATOR.$extension.DIRECTORY_SEPARATOR.$include.".js");
            }
        }

        for ($i=0;$i<count($trayicon);$i++) {
            $id = $trayicon[$i];
            if (file_exists(dirname(__FILE__).DIRECTORY_SEPARATOR."modules".DIRECTORY_SEPARATOR.$id[0].DIRECTORY_SEPARATOR."extra.js") && empty($_GET['callbackfn'])) {
                include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."modules".DIRECTORY_SEPARATOR.$id[0].DIRECTORY_SEPARATOR."extra.js");
            }
        }

        if (file_exists(dirname(__FILE__).DIRECTORY_SEPARATOR."js".DIRECTORY_SEPARATOR."extra.js")  && empty($_GET['callbackfn'])) {
            include_once (dirname(__FILE__).DIRECTORY_SEPARATOR."js".DIRECTORY_SEPARATOR."extra.js");
        }
    }

    if (phpversion() >= '5') {
        $js = JSMin::minify(ob_get_clean());
    } else {
        $js = ob_get_clean();
    }

    $fp = @fopen(dirname(__FILE__).DIRECTORY_SEPARATOR.'cache'.DIRECTORY_SEPARATOR.$cbfn.$theme.$lang.$type.$name.'.js', 'w'); 
    @fwrite($fp, $js);
    @fclose($fp);

}

if (phpversion() >= '4.0.4pl1' && (strstr($useragent,'compatible') || strstr($useragent,'Gecko'))) {
    if (extension_loaded('zlib') && GZIP_ENABLED == 1) {
        ob_start('ob_gzhandler');
    } else { ob_start(); }
} else { ob_start(); }

$lastModified = filemtime(dirname(__FILE__).DIRECTORY_SEPARATOR.'cache'.DIRECTORY_SEPARATOR.$cbfn.$theme.$lang.$type.$name.'.js');

header('Content-type: text/javascript;charset=utf-8');
header("Last-Modified: ".gmdate("D, d M Y H:i:s", $lastModified)." GMT");
header('Expires: '.gmdate("D, d M Y H:i:s", time() + 3600*24*365).' GMT');

echo $js;

$mtime = microtime();
$mtime = explode(" ",$mtime);
$mtime = $mtime[1] + $mtime[0];
$endtime = $mtime;
$totaltime = ($endtime - $starttime);
echo "\n\n/* Execution time: ".$totaltime." seconds */";

function cleanInput($input) {
    $input = trim($input);
    $input = preg_replace("/[^+A-Za-z0-9\_]/", "", $input); 
    return strtolower($input);
} 
```

我需要在这里的某个地方指示禁用缓存`/modules/chatrooms/chatrooms.js`

但看不到确切的位置或放置什么......有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-01T13:40:21.830

改变：

```
header('Expires: '.gmdate("D, d M Y H:i:s", time() + 3600*24*365).' GMT'); 
```

至：

```
header('Expires: '.gmdate("D, d M Y H:i:s", time() - 3600*24*365).' GMT'); 
```

这样，文件将在过去而不是将来过期。

**更新：** @Salman A，指出了`IF-MODIFIED-SINCE`检查。你需要这样做：

改变

```
if (!empty($_SERVER['HTTP_IF_MODIFIED_SINCE']) && strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) == filemtime(dirname(__FILE__).DIRECTORY_SEPARATOR.'cache'.DIRECTORY_SEPARATOR.$cbfn.$theme.$lang.$type.$name.'.js')) { 
```

至：

```
if (0){//!empty($_SERVER['HTTP_IF_MODIFIED_SINCE']) && strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) == filemtime(dirname(__FILE__).DIRECTORY_SEPARATOR.'cache'.DIRECTORY_SEPARATOR.$cbfn.$theme.$lang.$type.$name.'.js')) { 
```

这将通过将表达式转换为 来禁用该代码块`FALSE`，如果您需要再次启用它，请删除`0){//`.

# java - 如何获取 hashmap 对象值

> ID：14110924
> 
> 赞同：3
> 
> 时间：2013-01-01T13:36:48.413
> 
> 标签：java, iterator, hashmap

我有一个将对象作为哈希图值的代码。我想使用迭代器类从哈希图中读取 lat 和 lng。但我不知道该怎么做。这是我的代码。

```
Location locobj = new Location();
HashMap loc = new HashMap();

while(rs.next()){
      locobj.setLat(lat);
      locobj.setLng(lon);
      loc.put(location, locobj);

}

      Set set = loc.entrySet();
      Iterator i = set.iterator();
      while(i.hasNext()) {
      Map.Entry me = (Map.Entry)i.next();
      System.out.println(me.getKey()+"value>>"+me.getValue()); 
      } 
```

上课地点是这样的

```
public class Location {

    private String lat;
    private String lng;
    private String name;

    public String getLat() {
        return lat;
    }
    public void setLat(String lat) {
        this.lat = lat;
    }
    public String getLng() {
        return lng;
    }
    public void setLng(String lng) {
        this.lng = lng;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

} 
```

我如何从 getValue() 方法读取 locobj lat 和 lng 值。请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T13:53:55.633

你应该在这里使用泛型。将地图声明为

```
Map<String, Location> locationMap = new HashMap<>() // assuming your key is of string type 
```

这样，您可以避免类型转换（应该避免使用 RTTI - 设计原则之一）

```
Location locobj = me.getValue()
locobj.getLat() // will give you latitude
locobj.getLng() // will give you longitude 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-01T13:40:28.907

为什么不直接铸造价值？

```
Location locobj = (Location)me.getValue();
locobj.getLat();
locobj.getLng(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T13:58:07.553

更改您的代码以使用泛型。

代替

```
Location locobj = new Location();
Map<Location> loc = new HashMap<Location>(); // code to interfaces, and use Generics 
```

做

```
Location locobj = new Location();
HashMap<String,Location> loc = new HashMap<String,Location>(); 
```

并且您的条目为

```
Map.Entry<String,Location> me = (Map.Entry)i.next(); 
```

然后你就不必施放任何东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T13:50:19.590

[getValue()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Map.Entry.html#getValue%28%29)返回您对 Object 的引用，但实际上 object 是 Location。因此，您需要执行强制转换，请参阅@DataNucleus 的答案，但您甚至可以这样做：

```
System.out.println(me.getKey()+"value>>"+((Location)me.getValue()).getLng()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-01T13:51:53.187

您正在使用 getKey() 或 getValue() 检索对象。您现在需要调用 getter 方法来打印适当的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-01T07:39:11.267

可以使用以下内容：

```
for (Entry entry : map.entrySet()) {
    String key = entry.getKey();
    Object values = (Object) entry.getValue();
    System.out.println("Key = " + key);
    System.out.println("Values = " + values + "n");
} 
```

# python - Python datetime.time 和算术运算

> ID：14110927
> 
> 赞同：5
> 
> 时间：2013-01-01T13:37:37.450
> 
> 标签：python, datetime

如何`datetime.time`在Python中获得两个变量的和和差？例如：

```
import datetime
now = datetime.datetime.now()
act_time = datetime.time(now.hour, now.minute, now.second)
diff = act_time - finish_time 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-01T13:46:23.367

试试这个区别：

```
#----------------------------- 
# Dates produce timedeltas when subtracted.

diff = date2 - date1
diff = datetime.date(year1, month1, day1) - datetime.date(year2, month2, day2)
#----------------------------- 

bree = datetime.datetime(1981, 6, 16, 4, 35, 25)
nat  = datetime.datetime(1973, 1, 18, 3, 45, 50)

difference = bree - nat
print "There were", difference, "minutes between Nat and Bree"
#=> There were 3071 days, 0:49:35 between Nat and Bree

weeks, days = divmod(difference.days, 7)

minutes, seconds = divmod(difference.seconds, 60)
hours, minutes = divmod(minutes, 60)

print "%d weeks, %d days, %d:%d:%d" % (weeks, days, hours, minutes, seconds)
#=> 438 weeks, 5 days, 0:49:35

#----------------------------- 
print "There were", difference.days, "days between Bree and Nat." 
#=> There were 3071 days between bree and nat 
```

操作：

```
#----------------------------- 
# Adding to or Subtracting from a Date
# Use the rather nice datetime.timedelta objects

now = datetime.date(2003, 8, 6)
difference1 = datetime.timedelta(days=1)
difference2 = datetime.timedelta(weeks=-2)

print "One day in the future is:", now + difference1
#=> One day in the future is: 2003-08-07

print "Two weeks in the past is:", now + difference2
#=> Two weeks in the past is: 2003-07-23

print datetime.date(2003, 8, 6) - datetime.date(2000, 8, 6)
#=> 1095 days, 0:00:00

#----------------------------- 
birthtime = datetime.datetime(1973, 01, 18, 3, 45, 50)   # 1973-01-18 03:45:50

interval = datetime.timedelta(seconds=5, minutes=17, hours=2, days=55) 
then = birthtime + interval

print "Then is", then.ctime()
#=> Then is Wed Mar 14 06:02:55 1973

print "Then is", then.strftime("%A %B %d %I:%M:%S %p %Y")
#=> Then is Wednesday March 14 06:02:55 AM 1973

#-----------------------------
when = datetime.datetime(1973, 1, 18) + datetime.timedelta(days=55) 
print "Nat was 55 days old on:", when.strftime("%m/%d/%Y").lstrip("0")
#=> Nat was 55 days old on: 3/14/1973

#----------------------------- 
# Adding to or Subtracting from a Date
# Use the rather nice datetime.timedelta objects

now = datetime.date(2003, 8, 6)
difference1 = datetime.timedelta(days=1)
difference2 = datetime.timedelta(weeks=-2)

print "One day in the future is:", now + difference1
#=> One day in the future is: 2003-08-07

print "Two weeks in the past is:", now + difference2
#=> Two weeks in the past is: 2003-07-23

print datetime.date(2003, 8, 6) - datetime.date(2000, 8, 6)
#=> 1095 days, 0:00:00

#----------------------------- 
birthtime = datetime.datetime(1973, 01, 18, 3, 45, 50)   # 1973-01-18 03:45:50

interval = datetime.timedelta(seconds=5, minutes=17, hours=2, days=55) 
then = birthtime + interval

print "Then is", then.ctime()
#=> Then is Wed Mar 14 06:02:55 1973

print "Then is", then.strftime("%A %B %d %I:%M:%S %p %Y")
#=> Then is Wednesday March 14 06:02:55 AM 1973

#-----------------------------
when = datetime.datetime(1973, 1, 18) + datetime.timedelta(days=55) 
print "Nat was 55 days old on:", when.strftime("%m/%d/%Y").lstrip("0")
#=> Nat was 55 days old on: 3/14/1973 
```

来源： http: [//pleac.sourceforge.net/pleac_python/datesandtimes.html](http://pleac.sourceforge.net/pleac_python/datesandtimes.html)

# java - Java中的字符串

> ID：14110930
> 
> 赞同：-2
> 
> 时间：2013-01-01T13:38:03.013
> 
> 标签：java

我有一个代码：

```
for(int i=0;i<fList.size();i++){
    String targets="";
    String values="";
    String sql="INSERT INTO "+tableName+"("+targets+") VALUES("+values+")";
    Map<Column, String> attrs=fList.get(i).getAttributes();
    for(int j=0;j<columns.size();j++){
        if(columns.get(j).getName().equalsIgnoreCase("kadnum")){
            targets=targets+"kadnum,";
            System.out.println("targets:"+targets);
            values=values+attrs.get(columns.get(j))+",";
            System.out.println("values:"+values);
        }
        if(columns.get(j).getName().equalsIgnoreCase("support_num")){
            targets=targets+"support_num";
            values=values+attrs.get(columns.get(j))+",";
        }
    }
    System.out.println("sql="+sql);
} 
```

然后出去：

```
INSERT INTO parcels () VALUES() 
```

但是如果你改变`System.out.println("sql="+sql);`我 `System.out.println("targets="+targets);`得到：`targets=kadnum,` 为什么字符串sql不改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T13:42:13.207

您在向`sql`字符串添加任何内容之前创建`targets`字符串。所以在`sql`创建字符串时，`targets`字符串仍然是空的。`sql`稍后在最后创建字符串以解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T13:40:31.660

将 sql 的声明移到`println`.

```
 String sql="INSERT INTO "+tableName+"("+targets+") VALUES("+values+")";
 System.out.println("sql="+sql); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T13:41:56.463

```
String sql="INSERT INTO "+tableName+"("+targets+") VALUES("+values+")"; 
```

应该在上面

```
System.out.println("sql="+sql); 
```

# netbeans - 如何在 NetBeans 完成弹出窗口中更改背景颜色？

> ID：14110939
> 
> 赞同：0
> 
> 时间：2013-01-01T13:39:25.763
> 
> 标签：netbeans, netbeans-7

我有代码编辑器的黑色背景，但带有代码完成的弹出窗口具有白色并突出显示文本。 ![在此处输入图像描述](../Images/6ef4bdc3754301e8a0cc15022b68b738.png)

如何更改背景颜色或禁用突出显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T14:58:44.800

似乎无法从 Netbeans 中直接配置弹出代码完成和 Javadoc 窗口的颜色。

看来，实现此目的的唯一方法是将操作系统桌面的配色方案更改为具有黑色背景的窗口。（当然，这意味着您的所有应用程序都将具有黑色背景。）这已在 Netbeans 7.3 开发版本 201212140001 中进行了测试和确认。使用 Netbeans 7.2.1 时存在一些问题。值得注意的是黑色背景是存在的，但是代码完成和 Javadoc 窗口的文本太暗了。这被报告为 7.3的[错误 134281](http://netbeans.org/bugzilla/show_bug.cgi?id=134281)的一部分并已修复。

我建议如果您希望代码完成和 Javadoc 弹出窗口与编辑器颜色主题匹配，而无需更改操作系统颜色主题，您可以查看是否有人已经在 Netbeans 的“[问题 = 错误”上提交了类似的请求，功能请求和增强](http://netbeans.org/community/issues.html)”页面。如果是这样，请投票。如果没有，请自己提交一份。请务必将其与处理可访问性和操作系统颜色主题的 #134281 区分开来。

# android - 使用 Android Facebook SDK 3.0 在墙上发布带有消息的图片

> ID：14110942
> 
> 赞同：4
> 
> 时间：2013-01-01T13:39:54.127
> 
> 标签：android, facebook

我如何在 Android 上使用 Facebook SDK 3.0 与图片一起发布消息，

链接 -> 可以发布带有链接和所有其他信息的小图片。

[http://developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/)

我想要的只是在墙上发布带有消息的图片，而不是带有描述的链接？我想要抓取我当前的 Android 屏幕的屏幕截图并将其保存到 SD 卡中，我需要在自定义按钮单击时将其与消息一起发布。

我如何使用适用于 android 的 Facebook SDK 3.0 做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-02T17:32:21.557

您可以使用 Graph API 将照片发布到用户的墙上。

有关更多详细信息，请参阅[参考页面](https://developers.facebook.com/docs/reference/api/user/#photos)。

在 Facebook SDK 中，您将使用[Request 类](https://developers.facebook.com/docs/reference/android/3.0/Request)进行 Graph API 调用。

您可以使用 newUploadPhotoRequest 方法添加照片。

如果您还想添加描述，请尝试设置“消息”参数：

```
Request photoRequest = Request.newUploadPhotoRequest(...);
Bundle params = photoRequest.getParameters();
params.putString("message", "description  goes here");
photoRequest.executeAsync(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T11:34:10.320

Facebook 为第 2 版 Graph API 请求更改了此实现，他们建议使用自定义故事而不是发布（如果您有自己的内容要放在他的评论旁边的 facebook 用户的墙上，或者甚至没有他的评论）

文档在这里：

[https://developers.facebook.com/docs/android/open-graph?locale=en_GB](https://developers.facebook.com/docs/android/open-graph?locale=en_GB)

只是文档中的一个错误，例如，facebook Open Graph 对象由冒号而不是点引用

他们以这种方式在名为“books”的工作空间中提到了一个名为“book”的开放图形对象

```
"books.book" 
```

正确的方法是

```
"books:book" 
```

完成实施后，您将需要在 facebook 上查看您的应用程序，它的文档也在这里

[https://developers.facebook.com/docs/apps/review?locale=en_GB](https://developers.facebook.com/docs/apps/review?locale=en_GB)

我真的很讨厌 facebook 文档，它很烂

# java - 如何使用引导主题生成 JavaDoc？

> ID：14110951
> 
> 赞同：8
> 
> 时间：2013-01-01T13:40:27.793
> 
> 标签：java, twitter-bootstrap, javadoc, doclet

我想用[Bootstrap 主题](http://twitter.github.com/bootstrap/)生成 api doc，但是如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:04:43.073

为此，您必须编写自己的 Doclet，没有一个实际的 doclet 能够做到这一点。

# php - 优化一张小表和一张大表的select查询

> ID：14110954
> 
> 赞同：0
> 
> 时间：2013-01-01T13:40:36.613
> 
> 标签：php, mysql, sql

我正在使用 PHP ， MySQL 以下
我有两个表

1.  用户
2.  users_messages

“users”表存储所有用户的记录。

```
身份证名称密码
1 XYZ XYZ

```

[这里的id其实就是user_id]

“messages”表包含用户发布的消息

```
id user_id 消息
1 1 XYZ

```

“users”表包含数千条记录（>5000）
“users_messages”包含大约 100 条记录（将不断变化）

我正在尝试获取所有用户的消息数量并将它们显示在表格中。目前我正在尝试对它们进行分页，因此一页加载时我只需要 20 个用户。

我的查询如下

```
SELECT u.username as username,u.id as id, COUNT( f.user_id ) AS no_of_messages 
FROM users AS u
LEFT JOIN users_messages AS f ON f.user_id = u.id
GROUP BY u.id LIMIT 20 
```

这行得通，但需要很长时间......可能是它扫描完整的表只是为了得到只有 20 个用户的消息。

表“users”的 id 列不是从 1 开始的，开始是随机的，而是从下一条记录开始自动递增。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:46:04.600

> 表“users”的id列不是从1开始的，开始是随机的

试试这个：

```
SELECT 
  u.username as username, 
  u.id as id, 
  f.no_of_messages 
FROM users AS u
LEFT JOIN
(
   SELECT user_id, COUNT(*) no_of_messages 
   FROM users_messages
   GROUP BY user_id
) AS f ON f.user_id = u.id
ORDER BY u.id
LIMIT 20; 
```

# javascript - Jasmine - 我如何模拟 history.pushState 和假事件发射？

> ID：14110957
> 
> 赞同：7
> 
> 时间：2013-01-01T13:41:17.590
> 
> 标签：javascript, jquery, testing, mocking, jasmine

我正在编写一个库，它在[history.pushState](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method)的帮助下支持浏览器导航，并且还捕获了在浏览器中发生导航时进行通信的[popstate 事件。](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history#The_popstate_event)当我试图为这个库编写[Jasmine](http://pivotal.github.com/jasmine/)测试时，我想知道如何模拟`history.pushState`和伪造来自 的`popstate`信号发射`window`？以下代码片段应阐明问题：

库代码：

```
var lib = (function() {
    function navigate(path) {
        history.pushState(null, null, path);
    }

    function onPopState(event) {
        if (lib.callback) {
            lib.callback(document.location);
        }
    }

    $(window).bind('popstate', onPopState);

    return {
        navigate: navigate
    };
})(); 
```

测试代码（茉莉花）：

```
describe("Test navigate", function() {
    it("Should invoke callback upon state change", function() {
        var invokedWith;
        function callback(url) {
            invokedWith = url;
        }
        lib.callback = callback;
        lib.navigate('/path');
        // Doesn't work, callback invoked asynchronously
        expect(invokedWith).toEqual('/path');
    });
}); 
```

基本上，我想模拟该`history.pushState`函数并从中发出一个假`popstate`事件`window`，以便`popstate`测试`lib`.

另请参阅我的[小提琴](http://jsfiddle.net/aknuds1/fQXkr/)“工作”代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T22:43:41.067

你可以这样监视`history.pushState`：

```
spyOn(history, 'pushState'); 
```

当您使用 jquery 绑定事件时，您可以简单地`popstate`自己触发。

```
$(window).trigger('popstate') 
```

# radio-button - 单击链接后，在下一页上选中了一些单选按钮

> ID：14110960
> 
> 赞同：1
> 
> 时间：2013-01-01T13:41:29.767
> 
> 标签：radio-button

我正在为我的问题寻找解决方案，一个页面上有 3 个链接，当单击其中一个链接时会加载一个新页面。在那个新页面上有 3 个复选框。

单击第一页的链接 1 时，需要选中新页面上的单选按钮 1、链接 2 -> 复选框 2 等。

我认为有 3 个选项可以做到这一点，使用 sessionStorage、cookie 或使用一些 URL ?var。似乎我无法在表单中使用 php。

我怎样才能让它工作，不在乎它是如何完成的。任何帮助真的很感激！

### 编辑这已解决

```
<input type="radio" name="amount" value="1" /> 1 <br>
<input type="radio" name="amount" value="2" /> 2 <br>
<input type="radio" name="amount" value="3" /> 3 <br>

<script>
function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split('&');
    for (var i = 0; i < vars.length; i++) {
        var pair = vars[i].split('=');
        if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
        }
    }
    }

var am=getQueryVariable("amount");
var allElems = document.getElementsByName('amount');
for (i = 0; i < allElems.length; i++) {
    if (allElems[i].type == 'radio' && allElems[i].value ==am ) {
        allElems[i].checked = true;
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:52:37.600

将第 1 页上的每个链接设置为转到 page2.html?link={insert_number_here}。然后在新页面上检查 $_GET['link'] 并进一步处理。

```
<a href="page2.html?link=1">Link 1</a>
<a href="page2.html?link=2">Link 2</a>
<a href="page2.html?link=3">Link 3</a> 
```

在第 2 页的第一个单选按钮旁边写：

```
<input type="radio" <?php if($_GET['link']==1){echo 'checked="checked"';} ?>/>
<input type="radio" <?php if($_GET['link']==2){echo 'checked="checked"';} ?>/>
<input type="radio" <?php if($_GET['link']==3){echo 'checked="checked"';} ?>/> 
```

# java - 运行 JAR 时 Java 停止工作

> ID：14110964
> 
> 赞同：1
> 
> 时间：2013-01-01T13:42:05.683
> 
> 标签：java, netbeans, jar

我正在做一个项目，在该项目中我使用`civil`库从网络摄像头捕获图像。我将一些 JAR 和 DLL 文件放在名为`lib`.

当我从 NetBeans 运行项目时，它从那里运行良好，但是当我通过双击它创建并运行 jar 文件时，它会`Java(TM) Platform SE binary has stopped working`出错。但是当我删除用于`civil`库的 DLL 文件时，JAR 文件运行良好，没有错误。

任何人都可以告诉这个问题的原因和解决方案是什么。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:13:22.440

我不确定是否有办法在 JAR 文件中指定应该使用哪个 JRE。但是，如果您不使用 64 位 JRE，那么卸载它将解决您的问题。

在任何给定时间，都只能使用其中一个 JRE 版本，具体取决于您的系统上与哪些 *.jar 文件相关联。所以也许不可能在同一台机器上可靠地使用 32 位和 64 位 JRE。

> **编辑1：**
> 
> 查看这些资源以了解您的选择：
> 
> *   [http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)
> *   [http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/java.html](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/java.html)
> 
> 您可以创建一个快捷方式来启动运行目标的应用程序，类似于以下内容：`"java -jar file.jar -d32"`强制使用 32 位 JRE（如果系统上可用）。

# java - Spring MVC 3 REST PUT 和 POST 用于更新和保存

> ID：14110967
> 
> 赞同：2
> 
> 时间：2013-01-01T13:42:18.020
> 
> 标签：java, rest, spring-mvc

我的 AccountController 中有一个方法，例如

```
 @RequestMapping(method = { RequestMethod.POST, RequestMethod.PUT })
    public String update(@ModelAttribute Account account) {
this.getAccountDao().save(account);
return "redirect:/users/account/";
} 
```

我正在使用 org.springframework.web.filter.HiddenHttpMethodFilter ，所以我的视图有一个隐藏的表单字段 -

```
<form:form method="POST" modelAttribute="account">
      <input type="hidden" name="_method" value="PUT" />
.... 
```

现在我的问题是控制器如何知道何时创建新帐户或更新它，或者它如何知道请求是 POST 还是 PUT？对我来说，它看起来总是会被放置。

我只是不喜欢使用除 GET 和 POST 之外的任何东西。控制器不需要关心它是否需要创建一个新的或更新它。如果表单具有隐藏的帐户 ID 字段，则服务可以确定要调用的 DAO 方法。

**编辑** 如果这只是一个 PUT 请求，那么我需要为 POST 创建一个新的 jsp。不幸的是，这两个请求非常相似，因为它们需要提交几乎准确的数据，除了帐户 ID。我希望能够从控制器使用相同的方法，并为 POST 和 PUT 使用相同的 jsp，并且取决于模型 - 帐户被保存或更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T13:54:16.683

控制器不知道您是否创建或更新实体，它只知道`RequestMethod`方法响应的 s。

您指定的隐藏字段和`HiddenHttpMethodFilter`您正在使用的隐藏字段导致`PUT`成为 HTTP 方法，对您的控制器可见，因为过滤器会更改请求中的方法。（根据[javadocs](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/filter/HiddenHttpMethodFilter.html)）。

结果，浏览器使用`POST`将其数据传输到服务器，然后`Filter`运行并将请求中的方法更改为`PUT`，因此对于后面的应用程序，`Filter`它看起来像请求已发送`PUT`。

我认为代码非常相似没有问题，只需将相似的行为考虑到另一种方法中。例如：

```
@RequestMapping(method = { RequestMethod.POST})
public String update(@ModelAttribute Account account) {
     // do POST specific things..

      // and common operations
      commonOperation();
}

@RequestMapping(method = { RequestMethod.PUT })
public String updateWithPut(@ModelAttribute Account account) {
      // do PUT specific things...

      // and common operations
      commonOperation();
}

// code that put and post methods have in common
private void commonOperation() {
 // a lot of common code
 // that needs to be done
} 
```

# windows-phone-7 - 在 WP 中隐藏/显示栏

> ID：14110968
> 
> 赞同：0
> 
> 时间：2013-01-01T13:43:02.283
> 
> 标签：windows-phone-7

如何添加一个出现并重新出现在页面顶部的栏，类似于 adobe 阅读器应用程序的栏？
我检查了其他人的帖子，但我看到的只是关于应用程序栏的帖子，我认为这不能放在页面顶部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T14:47:07.003

WP7 SDK 中没有内置控件。您可以尝试在其他库中搜索它，但我认为您应该自己创建它（使用标准网格/面板项目）。

如果您想在标准`ApplicationBar`扩展时显示它，您应该订阅[`StateChanged`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.applicationbar.statechanged%28v=vs.105%29.aspx)事件`ApplicationBar`并在顶部显示/隐藏您自己的栏。

# html - 跨度不响应引导响应属性

> ID：14110978
> 
> 赞同：1
> 
> 时间：2013-01-01T13:44:32.580
> 
> 标签：html, css, twitter-bootstrap

我正在建立这个小网站：[网站](http://rolandgroza.me/)；我打算让它在某种程度上具有响应性，我正在使用 Twitter 的 Bootstrap 响应式网格来实现这一点。

尽管跨度存在一些问题，但由于某种原因，我无法识别，没有响应响应属性。这就是为什么我想要一双新的眼睛来看看并告诉我我在那里做错了什么，因为我看不到它:)

**编辑：**这就是 HTML 的样子：

```
<article class="container">

    <section class="content-view-container">
        <div class="content-view-inner">
            <div class="row">
                <div class="span8 clearfix description-details-container">
                    <div class="thumb-container pull-left">
                        <div class="thumb-inner">
                            <img src="http://www.gravatar.com/avatar/1d7a80504fccf379e4299d7face1bfc3.png">
                        </div>
                    </div>
                    <div class="headline-container pull-left">
                        <div class="headline-inner">
                            <h1>Roland Groza</h1>
                            <h4>Frontend Developer</h4>
                        </div>
                    </div>
                </div>
                <div class="span4 contact-details-container">
                    <a href="tel:0045 29 84 11 04" class="clearfix contact-phone">
                        <span class="pull-left">0045 29 84 11 04</span>
                        <span class="pull-right"><i class="icon-phone"></i></span>
                    </a>
                    <a href="mailto:info@rolandgroza.me" class="clearfix contact-email">
                        <span class="pull-left">info@rolandgroza.me</span>
                        <span class="pull-right"><i class="icon-airplane"></i></span>
                    </a>
                </div>
            </div>
            <div class="row">
                <div class="span1">
                    <div class="info-button-container">
                        <div class="info-button-inner"><i class="icon-info"></i></div>
                    </div>
                </div>
                <div class="span11">
                    <div class="info-description-container">
                        <div class="info-description-inner">
                            <p>Barging in from Romania as a young and truly devoted creator I've landed on the platform of web designing and web development with the purpose to present you my own creation. And I am one hundred percent positive that I can recreate from ashes with just a couple of coding something outstanding. I do possess a multi-facetted-easy-to-dislike personality but my demeanour regarding my work is truly professional and as long as I embark my "merry go round", ideas will always start bursting from nowhere. But here I am trying to improve something, to make your life even more complicated and to reinforce some boundary-pushing style of my own. Complicated means Rebellious, Rebellious means Revolutionary Art. Art means Design.</p>
                            <p>P.S. : Do please take a glimpse of my best work and do not hesitate to contact me for any comments. Believe it or not you might like it. I’ll be honoured to untangle your thoughts :)</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</article> 
```

**编辑：**至于 CSS，我为它做了一个小提琴：[小提琴](http://jsfiddle.net/MWAyk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T17:10:45.610

这接近你在[http://jsfiddle.net/panchroma/53U9N/](http://jsfiddle.net/panchroma/53U9N/)之后的样子吗？

我拿走了你的 CSS，删除了

```
@import "libraries/bootstrap/bootstrap.less"; 
```

而是从 CDN 导入引导 css（请参阅小提琴中的资源列表）

我还删除了 clearfix 类

```
<div class="span8 clearfix description-details-container"> 
```

因为我不确定你是否想要这个。

祝你好运

# objective-c - 如何使用 EventKit 框架提前一年设置提醒

> ID：14110979
> 
> 赞同：1
> 
> 时间：2013-01-01T13:44:43.663
> 
> 标签：objective-c, ios, cocoa-touch, eventkit

我试图在使用 Eventkit 框架添加事件时提前 1 年设置开始日期。

到目前为止，我已经看过了，做了谷歌搜索并尝试了

```
controller.event.startDate = [[[NSDate alloc] initWithTimeInterval: 525960];
controller.event.endDate= [[NSDate alloc] init]; 
```

我收到一条错误消息`NSDate declares the selector initWithTimeInterval`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T13:55:01.077

不要将其作为间隔 = 525960。

而是使用 NSCalender，然后通过将 1 添加到当前年份来进行操作。

```
NSCalendar *calendar=[[NSCalendar alloc] initWithCalendarIdentifier: NSGregorianCalendar] ;
NSDateComponents *components=[[NSDateComponents alloc] init] ;
components.year=1;
NSDate *newDate=[calendar dateByAddingComponents: components toDate:[NSDate date] options: 0];
NSLog(@"Next year : %@", newDate); 
```

# c - 使用 wget 编程并将文件保存到内存中

> ID：14110980
> 
> 赞同：1
> 
> 时间：2013-01-01T13:44:48.510
> 
> 标签：c, http, pointers, wget

我正在用 C 编程并要求我下载了一个网页。我目前正在使用 wget 下载，尽管我希望将文件保存在内存中并分配一个指向它的指针以读取下载的文件。

在当前状态下，我的应用程序 `uses popen(/usr/bin/wget http://www.website.com, "w");`
然后分配一个`FILE *file = fopen("index.html", "rt");`

这可能`wget`吗？如果不是，它们是替代品吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T13:46:28.577

[作为一个 API， libcurl](http://curl.haxx.se/libcurl/ "libcurl - 多协议文件传输库")将为您提供更好的服务。从[简单的界面](http://curl.haxx.se/libcurl/c/libcurl-easy.html)开始。

# java - 新的 ObjectInputStream() 块

> ID：14110986
> 
> 赞同：11
> 
> 时间：2013-01-01T13:45:29.977
> 
> 标签：java, sockets, objectinputstream

```
public class SerProg {

    static ServerSocket ser=null;
    static Socket cli=null;
    static ObjectInputStream ins=null;
    static ObjectOutputStream outs=null;

    public static void main(String[] args) {

        try {

            ser=new ServerSocket(9000,10);
            cli=ser.accept();

            System.out.println("Connected to :"+cli.getInetAddress().getHostAddress()+" At Port :"+cli.getLocalPort());

            ins=new ObjectInputStream(cli.getInputStream());
            outs=new ObjectOutputStream(cli.getOutputStream());

            String str=(String)ins.readObject();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

和客户端

```
public class SerProg {

    /**
     * @param args
     */
    static ServerSocket ser=null;
    static Socket cli=null;
    static ObjectInputStream ins=null;
    static ObjectOutputStream outs=null;

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        try {

            ser=new ServerSocket(9000,10);
            cli=ser.accept();

            System.out.println("Connected to :"+cli.getInetAddress().getHostAddress()+" At Port :"+cli.getLocalPort());

            ins=new ObjectInputStream(cli.getInputStream());
            outs=new ObjectOutputStream(cli.getOutputStream());

            String str=(String)ins.readObject();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

连接已成功建立，但在服务器代码行中

```
ins=new ObjectInputStream(cli.getInputStream()); 
```

代码停止并且不继续，可能是什么问题？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-01T13:53:42.187

您需要在连接的两侧（！）`ObjectOutputStream`之前创建。`ObjectInputStream`创建`ObjectInputStream`时，它会尝试从`InputStream`. 因此，如果`ObjectOutputStream`另一端尚未创建，则没有要读取的对象流标头，它将无限期地阻塞。

或者换一种说法：如果双方首先构造，双方都将阻止尝试读取对象流标头，直到创建 （在行的另一侧）`ObjectInputStream`才会写入；`ObjectOutputStream`这永远不会发生，因为双方都被`ObjectInputStream`.

这可以从以下的 Javadoc 中推断出来[`ObjectInputStream(InputStream in)`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html#ObjectInputStream%28java.io.InputStream%29)：

> 从流中读取序列化流标头并进行验证。此构造函数将阻塞，直到相应的 ObjectOutputStream 已写入并刷新标头。

这也在Esmond Pitt*的 Java 基础网络的*第 3.6.2 节中进行了描述。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-02-23T10:59:06.343

您必须为流进行握手。我的意思是在客户端，当你创建一个对象输入流时，你必须在服务器端创建一个对象输出流。

```
//SERVER SIDE
Socket clientSocket = TcpServer.socket.accept();
// 1\. input stream;
ObjectInputStream sInput = new ObjectInputStream(clientSocket.getInputStream());
// 2\. output stream
ObjectOutputStream sOutput = new ObjectOutputStream(clientSocket.getOutputStream());

//CLIENT SIDE
Socket socket = new Socket(ip, port);
// 2\. output stream
ObjectOutputStream sOutput = new (socket.getOutputStream());
// 1\. input stream
ObjectInputStream sInput = new ObjectInputStream(socket.getInputStream()); 
```

我试图展示如何为流进行握手。

# wordpress - Wordpress - 显示最新的 10 个画廊

> ID：14110988
> 
> 赞同：0
> 
> 时间：2013-01-01T13:45:50.263
> 
> 标签：wordpress, gallery, image-gallery

我想创建一个自定义页面，该页面将显示 20 个最新的画廊/页面 - 但只有画廊中的第一张图片，而不是全部。像这样的东西：[http ://www.autoblog.it/gallerie/](http://www.autoblog.it/gallerie/)

我已经这样做了：

```
<?php
 $args = array(
'post_type' => 'attachment',
'posts_per_page' => 10,
'post_parent' => $postid,
'numberposts' => 1,
'paged' => $paged,
);
 $attachments = get_posts($args);
if ($attachments) {
foreach ($attachments as $attachment) {
echo the_attachment_link($attachment->ID, false, false, true )
echo get_the_title();   }
}?> 
```

它有效，但它的作用是显示最新的 10 个图像，而不是最新的 10 个画廊，所以每个画廊的第一张图像。

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T16:17:07.253

1.  创建画廊页面
2.  检索所有附加了画廊的帖子（例如将它们添加到画廊类别）
3.  在页面中，只需检索图库类别中的所有帖子：

    ```
    $args = array(
    'category_name' => 'gallery'
    );

    $q = new WP_Query($args);
    while ($q->have_posts()) : $q->the_post();
      $iPostID = $post->ID;
      $arrImages =& get_children('post_type=attachment&post_mime_type=image&post_parent=' . $iPostID );
      if($arrImages) {
        $arrKeys = array_keys($arrImages);
        $iNum = $arrKeys[0];
        $sThumbUrl = wp_get_attachment_thumb_url($iNum);
        $sImgString = '<a href="' . get_permalink() . '">' .
                        '<img src="' . $sThumbUrl . '" width="150" height="150" alt="Thumbnail Image" title="Thumbnail Image" />' .
                    '</a>';
        echo $sImgString;
      }

    endwhile; 
    ```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:08:29.100

您必须尝试使用​​ nextgen 画廊：[http ://wordpress.org/extend/plugins/nextgen-gallery/](http://wordpress.org/extend/plugins/nextgen-gallery/)

# android - 在android中多次调用同步任务中的HTTP

> ID：14110990
> 
> 赞同：1
> 
> 时间：2013-01-01T13:46:15.863
> 
> 标签：android, http, android-asynctask, queue

我想在单击按钮时通过http发送一些数据，每次用户单击按钮时，应该将一些数据添加到队列中，然后它将通过http发送，在得到响应后我想将其从队列中删除然后对队列中的下一个项目执行相同的操作。

我知道如何将项目添加到队列中，并且我尝试了异步任务来调用 http. 如果用户多次单击按钮的问题，我如何确保在第一个 http 完成之前不会调用队列中的下一个项目。如果应用程序也在后台，我希望操作完成。

这是 doInBackground 方法中的异步代码：

```
@Override
protected Boolean doInBackground(Void... params) {
 try {
 msgResponseIS = getInputStream(generatedLink);
 } catch (IOException e) {
  // TODO Auto-generated catch block
 e.printStackTrace();
 }
 if (msgResponseIS != null){

      BufferedReader r = new BufferedReader(new InputStreamReader(
       msgResponseIS));
      StringBuilder total = new StringBuilder();
      String line;
      try {
          while ((line = r.readLine()) != null) {
       total.append(line);
          }

          setResponseValue(total.toString());

      } catch (IOException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
      }

     return true;}
     else
     return false;
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T13:53:11.640

当请求被调用时`myButton.setEnabled(false);`，当 http 请求完成时你可以做

> `myButton.setEnabled(true);`

`myButton`调用异步任务的按钮在哪里。这样，您可以确保只要异步任务运行，用户就不能使用此按钮。

**编辑：**另一种方法是制作`boolean free = ture;`标志。单击按钮时，只需将标志设置为`free = false;`并进行检查。如果标志为真，则可以进行 http 调用，否则不能进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T13:55:49.947

1.在 preExecute 功能上，您可以像这样设置可点击属性。
Button.setClickable(false)
2\. 调用doInBackground 后调用post execute 方法并将clickable 设置为true。
Button.setClickable(true);

# actionscript-3 - 在 Flex 移动视图中显示 3 个饼图 - 附上测试用例和屏幕截图

> ID：14110996
> 
> 赞同：0
> 
> 时间：2013-01-01T13:46:44.113
> 
> 标签：actionscript-3, apache-flex, pie-chart, flex4.6, flex-mobile

我在一个非常简单的视图中为每个游戏用户显示了 3 个饼图（源代码粘贴在下面）。

图表代表其他玩家的意见 - 如果显示的用户玩得**好**、**公平**、**好**。

因此，我使用 3 个 URLLoaders 从 PHP 脚本中获取 JSON 数据并将其放入 3 个 ArrayCollections `_acGood`:`_acFair`和`_acNice`

**我的问题是布局**- 在纵向模式下，饼图有不同的大小（可能取决于加载数据的时间）：

![肖像](../Images/16323520245213923e1a1f03117249a2.png)

在横向模式下，它们不可读（太小）：

![景观](../Images/d502de4fc5c64803c83ca7948e6c3c80.png)

我的意图实际上是在滚动器中显示所有“全尺寸”饼图 - 可垂直滚动（在纵向模式下）和水平滚动（在横向模式下）。

这是我当前的测试代码 - 如果您将这 2 个文件放入 Flash Builder 项目中，它将立即运行 -

**主要.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    firstView="views.Home" /> 
```

**主页.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        xmlns:mx="library://ns.adobe.com/flex/mx"
        viewActivate="startLoading(event)"
        title="Display 3 pie charts">

    <fx:Declarations>
        <s:ArrayCollection id="_acGood" />
        <s:ArrayCollection id="_acFair" />
        <s:ArrayCollection id="_acNice" />
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import spark.events.ViewNavigatorEvent;

            private static const PLAYER_ID:String = 'DE11198';

            private static const STATS_GOOD:String = 'http://preferans.de/rep-json.php?title=good&id=';
            private static const STATS_FAIR:String = 'http://preferans.de/rep-json.php?title=fair&id=';
            private static const STATS_NICE:String = 'http://preferans.de/rep-json.php?title=nice&id=';

            private var _urlLoaderGood:URLLoader = new URLLoader();
            private var _urlLoaderFair:URLLoader = new URLLoader();
            private var _urlLoaderNice:URLLoader = new URLLoader();

            private function startLoading(event:ViewNavigatorEvent):void {
                _urlLoaderGood.addEventListener(Event.COMPLETE, handleCompleteGood);
                _urlLoaderFair.addEventListener(Event.COMPLETE, handleCompleteFair);
                _urlLoaderNice.addEventListener(Event.COMPLETE, handleCompleteNice);

                _urlLoaderGood.load(new URLRequest(STATS_GOOD + PLAYER_ID));
                _urlLoaderFair.load(new URLRequest(STATS_FAIR + PLAYER_ID));
                _urlLoaderNice.load(new URLRequest(STATS_NICE + PLAYER_ID));
            }

            private function handleCompleteGood(event:Event):void {
                var loader:URLLoader = URLLoader(event.target);
                var obj:Object = JSON.parse(loader.data);

                _acGood.removeAll();
                for each (var row:Object in obj.rows) {
                    _acGood.addItem({ label: 'Играет ' + row.c[0].v, data: row.c[1].v });
                }
            }

            private function handleCompleteFair(event:Event):void {
                var loader:URLLoader = URLLoader(event.target);
                var obj:Object = JSON.parse(loader.data);
                _acFair.removeAll();
                for each (var row:Object in obj.rows) {
                    _acFair.addItem({ label: 'Играет ' + row.c[0].v, data: row.c[1].v });
                }
            }

            private function handleCompleteNice(event:Event):void {
                var loader:URLLoader = URLLoader(event.target);
                var obj:Object = JSON.parse(loader.data);
                _acNice.removeAll();
                for each (var row:Object in obj.rows) {
                    _acNice.addItem({ label: 'Общаться ' + row.c[0].v, data: row.c[1].v });
                }
            }
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="portrait"/>
        <s:State name="landscape"/>
    </s:states> 

    <s:layout.portrait>
        <s:VerticalLayout horizontalAlign="center" />
    </s:layout.portrait>
    <s:layout.landscape>
        <s:HorizontalLayout verticalAlign="middle" />
    </s:layout.landscape>

    <mx:PieChart id="_good" 
                 height="100%" 
                 width="100%"
                 dataProvider="{_acGood}" >

        <mx:series>
            <mx:PieSeries labelPosition="callout" labelField="label" field="data">
                <mx:fills>
                    <mx:SolidColor color="0x66CC66" />
                    <mx:SolidColor color="0xCC0000" />
                </mx:fills>             
            </mx:PieSeries>
        </mx:series>
    </mx:PieChart>

    <mx:PieChart id="_fair" 
                 height="100%" 
                 width="100%"
                 dataProvider="{_acFair}" >

        <mx:series>
            <mx:PieSeries labelPosition="callout" labelField="label" field="data">
                <mx:fills>
                    <mx:SolidColor color="0x66CC66" />
                    <mx:SolidColor color="0xCC0000" />
                </mx:fills>             
            </mx:PieSeries>
        </mx:series>
    </mx:PieChart>  

    <mx:PieChart id="_nice" 
                 height="100%" 
                 width="100%"
                 dataProvider="{_acNice}" >

        <mx:series>
            <mx:PieSeries labelPosition="callout" labelField="label" field="data">
                <mx:fills>
                    <mx:SolidColor color="0x66CC66" />
                    <mx:SolidColor color="0xCC0000" />
                </mx:fills>             
            </mx:PieSeries>
        </mx:series>
    </mx:PieChart>  

</s:View> 
```

**更新：**

[我使用Scroller](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Scroller.html)的新代码仍然存在同样的可用性问题（标签不可读，大小不均）：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        xmlns:mx="library://ns.adobe.com/flex/mx"
        viewActivate="startLoading(event)"
        title="Display 3 pie charts">

    <fx:Declarations>
        <s:ArrayCollection id="_acGood" />
        <s:ArrayCollection id="_acFair" />
        <s:ArrayCollection id="_acNice" />
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import spark.events.ViewNavigatorEvent;

            private static const PLAYER_ID:String = 'DE11198';

            private static const STATS_GOOD:String = 'http://preferans.de/rep-json.php?title=good&id=';
            private static const STATS_FAIR:String = 'http://preferans.de/rep-json.php?title=fair&id=';
            private static const STATS_NICE:String = 'http://preferans.de/rep-json.php?title=nice&id=';

            private var _urlLoaderGood:URLLoader = new URLLoader();
            private var _urlLoaderFair:URLLoader = new URLLoader();
            private var _urlLoaderNice:URLLoader = new URLLoader();

            private function startLoading(event:ViewNavigatorEvent):void {
                _urlLoaderGood.addEventListener(Event.COMPLETE, handleCompleteGood);
                _urlLoaderFair.addEventListener(Event.COMPLETE, handleCompleteFair);
                _urlLoaderNice.addEventListener(Event.COMPLETE, handleCompleteNice);

                _urlLoaderGood.load(new URLRequest(STATS_GOOD + PLAYER_ID));
                _urlLoaderFair.load(new URLRequest(STATS_FAIR + PLAYER_ID));
                _urlLoaderNice.load(new URLRequest(STATS_NICE + PLAYER_ID));
            }

            private function handleCompleteGood(event:Event):void {
                var loader:URLLoader = URLLoader(event.target);
                var obj:Object = JSON.parse(loader.data);

                _acGood.removeAll();
                for each (var row:Object in obj.rows) {
                    _acGood.addItem({ label: 'Играет ' + row.c[0].v, data: row.c[1].v });
                }
            }

            private function handleCompleteFair(event:Event):void {
                var loader:URLLoader = URLLoader(event.target);
                var obj:Object = JSON.parse(loader.data);
                _acFair.removeAll();
                for each (var row:Object in obj.rows) {
                    _acFair.addItem({ label: 'Играет ' + row.c[0].v, data: row.c[1].v });
                }
            }

            private function handleCompleteNice(event:Event):void {
                var loader:URLLoader = URLLoader(event.target);
                var obj:Object = JSON.parse(loader.data);
                _acNice.removeAll();
                for each (var row:Object in obj.rows) {
                    _acNice.addItem({ label: 'Общаться ' + row.c[0].v, data: row.c[1].v });
                }
            }
        ]]>
    </fx:Script>

    <s:states>
        <s:State name="portrait"/>
        <s:State name="landscape"/>
    </s:states> 

    <s:Scroller 
        width="100%" 
        height="100%"
        verticalScrollPolicy.portrait="on"
        horizontalScrollPolicy.landscape="on">

        <s:Group width="100%" height="100%">

            <s:layout.portrait>
                <s:VerticalLayout />
            </s:layout.portrait>
            <s:layout.landscape>
                <s:HorizontalLayout />
            </s:layout.landscape>

            <mx:PieChart id="_good" 
                         width.portrait="100%"
                         height.landscape="100%"
                         paddingRight="8" 
                         paddingLeft="8" 
                         dataProvider="{_acGood}" >

                <mx:series>
                    <mx:PieSeries labelPosition="callout" labelField="label" field="data">
                        <mx:fills>
                            <mx:SolidColor color="0x66CC66" />
                            <mx:SolidColor color="0xCC0000" />
                        </mx:fills>             
                    </mx:PieSeries>
                </mx:series>
            </mx:PieChart>

            <mx:PieChart id="_fair" 
                         width.portrait="100%"
                         height.landscape="100%"
                         paddingRight="8" 
                         paddingLeft="8" 
                         dataProvider="{_acFair}" >

                <mx:series>
                    <mx:PieSeries labelPosition="callout" labelField="label" field="data">
                        <mx:fills>
                            <mx:SolidColor color="0x66CC66" />
                            <mx:SolidColor color="0xCC0000" />
                        </mx:fills>             
                    </mx:PieSeries>
                </mx:series>
            </mx:PieChart>  

            <mx:PieChart id="_nice" 
                         width.portrait="100%"
                         height.landscape="100%"
                         paddingRight="8" 
                         paddingLeft="8" 
                         dataProvider="{_acNice}" >

                <mx:series>
                    <mx:PieSeries labelPosition="callout" labelField="label" field="data">
                        <mx:fills>
                            <mx:SolidColor color="0x66CC66" />
                            <mx:SolidColor color="0xCC0000" />
                        </mx:fills>             
                    </mx:PieSeries>
                </mx:series>
            </mx:PieChart>

        </s:Group>
    </s:Scroller>
</s:View> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:45:40.710

如果将每个饼图放置在具有设定宽度的容器内，则滚动条将变为活动状态。如果设置为 100%，我的饼图将始终调整大小以适应屏幕。

乙

PS上面关于饼图标签的评论也是正确的。有一个选项可以将标签放在饼图中 - PieSeries.labelPosition = inside

# c# - 根据搜索文本找到所有推文的解决方案

> ID：14110999
> 
> 赞同：0
> 
> 时间：2013-01-01T13:47:07.303
> 
> 标签：c#, twitter

我有一个应用程序，它根据 C# 中的搜索文本显示所有推文。但是在使用搜索 API 时，它只显示有限数量的推文。我使用这个“http://search.twitter.com/search.atom?q=Query&rpp=100” 根据搜索文本找到所有推文的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T14:01:16.317

Twitter 搜索只能追溯到 5 到 7 天，或 1,500 条推文，以先到者为准。搜索 API 是相同的。除此之外的任何推文都无法通过任何已知方法获得。Twitter有它们，但没有办法得到它们。如果您事先知道您将需要某些关键字或来自某些用户的所有推文，则需要使用流式 API 提前收集它们并将它们保存在数据库中。然后，您可以在以后的任何时间搜索您的数据库，以获取您已经保存的所有推文。

要获取所有 1500 条推文，您可能需要`page`在 API 请求上设置参数。例如，现在，您的请求仅显示前 100 条（最近的）推文，因此要显示从 100 到 200 的推文，您可以这样做：

```
http://search.twitter.com/search.atom?q=Query&rpp=100&page=2 
```

要获得 200-300 条推文，您只需增加页码，最多可达 15 页。