# StackOverflow 问答 16039000-16039999

# c# - 使用 Telerik ORM 在连接来自不同上下文的 2 个表时会引发错误

> ID：16039001
> 
> 赞同：0
> 
> 时间：2013-04-16T13:53:40.263
> 
> 标签：c#, .net, linq, orm, telerik

我正在尝试使用 LINQ 中的连接来连接到不同上下文中的表。当我在同一个上下文中加入两个表时，它可以工作，所以我相信我的加入是好的，但是当我加入两个不同上下文中的表时，我得到一个错误。是否可以加入来自不同上下文的两个表？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using RmmDal.Contexts.RmmCrm;
using RmmDal.Contexts.LMS;
using Telerik.OpenAccess;

namespace ConsoleApplication_Test_ORM
{
    class Program
    {
        static void Main(string[] args)
        {
            RmmDal.Contexts.RmmCrm.RmmCrmContext dbContextRmmCrm = new RmmDal.Contexts.RmmCrm.RmmCrmContext();
            RmmDal.Contexts.LMS.LMS_000Context dbContextLMS = new RmmDal.Contexts.LMS.LMS_000Context();

            try
            {
                Guid LeadId = new Guid("9EF2874C-D37F-4503-A3D8-1A73774BFBBC");

                //This doesn't work, I think because it is using 2 seperate Contexts
                //I need this to work
                var Leads1 = from lo in dbContextLMS.Tbl_Loan_Appls
                             join la in dbContextRmmCrm.LeadApplications
                             on lo.Appl_No equals la.Appl_No
                             select new
                             {
                                 SSN = lo.Cust_SSN,
                                 TDCCustID = lo.Cust_ID
                             };

                //This works, I think because they are the same context
                var Leads2 = from lo in dbContextLMS.Tbl_Loan_Appls
                             join la in dbContextLMS.Tbl_Customers
                             on lo.Cust_ID equals la.Cust_ID
                             select new
                             {
                                 SSN = lo.Cust_SSN,
                                 TDCCustID = lo.Cust_ID
                             };

                var something = Leads1.FirstOrDefault();

                var something2 = Leads1.FirstOrDefault();
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }
    }
} 
```

这是引发的错误：

```
An exception occured during the execution of 'Extent<RmmDal.Tbl_Loan_Appl>().Join(Extent<RmmDal.Contexts.RmmCrm.LeadApplication>(), lo => lo.Appl_No, la => la.Appl_No, (lo, la) => new <>f__AnonymousType0`2(SSN = lo.Cust_SSN, TDCCustID = lo.Cust_ID))'. Failure: Object reference not set to an instance of an object.

See InnerException for more details.

Complete Expression:

.Call System.Linq.Queryable.Join(
    .Constant<Telerik.OpenAccess.Query.ExtentQueryImpl`1[RmmDal.Tbl_Loan_Appl]>(Extent<RmmDal.Tbl_Loan_Appl>()),
    .Constant<Telerik.OpenAccess.Query.ExtentQueryImpl`1[RmmDal.Contexts.RmmCrm.LeadApplication]>(Extent<RmmDal.Contexts.RmmCrm.LeadApplication>()),

    '(.Lambda #Lambda1<System.Func`2[RmmDal.Tbl_Loan_Appl,System.Int64]>),

    '(.Lambda #Lambda2<System.Func`2[RmmDal.Contexts.RmmCrm.LeadApplication,System.Int64]>),

    '(.Lambda #Lambda3<System.Func`3[RmmDal.Tbl_Loan_Appl,RmmDal.Contexts.RmmCrm.LeadApplication,<>f__AnonymousType0`2[System.String,System.Int64]]>))

.Lambda #Lambda1<System.Func`2[RmmDal.Tbl_Loan_Appl,System.Int64]>(RmmDal.Tbl_Loan_Appl $lo) {
    $lo.Appl_No
}

.Lambda #Lambda2<System.Func`2[RmmDal.Contexts.RmmCrm.LeadApplication,System.Int64]>(RmmDal.Contexts.RmmCrm.LeadApplication $la)
{
    $la.Appl_No
}

.Lambda #Lambda3<System.Func`3[RmmDal.Tbl_Loan_Appl,RmmDal.Contexts.RmmCrm.LeadApplication,<>f__AnonymousType0`2[System.String,System.Int64]]>(
    RmmDal.Tbl_Loan_Appl $lo,
    RmmDal.Contexts.RmmCrm.LeadApplication $la) {
    .New <>f__AnonymousType0`2[System.String,System.Int64](
        $lo.Cust_SSN,
        $lo.Cust_ID)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:58:24.673

设计不支持连接来自两个不同上下文的实体。
加入这些数据集的唯一方法是使用内存中的加入，比如[相信我——我是医生](https://stackoverflow.com/users/1180426/trust-me-im-a-doctor)建议的。

蛮力方法可以只是调用`.ToList()`两个上下文端点，然后在连接查询中使用内存中的数据。这将是低效且有问题的，因为大量数据将被放入内存中，并且在执行连接后可能会被丢弃，因此预计性能会非常差。

一种更有效的方法是从左侧对结果进行分页，并使用一种`.Contains()`方法从右侧过滤掉“加入”的记录。

```
// Load a small fragment of leads in memory
var Leads1 = dbContextLMS.Tbl_Loan_Appls.Skip(0).Take(10).ToList();
// find the IDs
var leadIds = Leads1.Select(l= > l.Appl_No);
// filter out only the matching applications
var applications = dbContextRmmCrm.LeadApplications
                                  .Where(a=> leadIds.Contains(a.Appli_No))
                                  .Select(a=> new { SSN = a.Cust_SSN, TDCCustID = а.Cust_ID }); 
```

为了处理一小部分数据，需要分页，以便`.Contains()`可以安全地将子句转换为 SQL `IN clause`。您必须将代码片段包装在一个循环中并相应地增加`Skip()`and`Take()`参数。

# java - 如何在不出现 OutofMemoryError 的情况下处理读取和处理巨大的文本文件

> ID：16039003
> 
> 赞同：0
> 
> 时间：2013-04-16T13:53:47.757
> 
> 标签：java

我写了一些简单的代码来读取文本文件（>1g）并对字符串进行一些处理。

但是，我必须处理 Java 堆空间问题，因为我尝试附加在某些时候会占用大量内存的字符串（使用 StringBuilder）。我知道我可以使用“-Xmx1024”来增加我的堆空间，但我想在这里只使用很少的内存。如何更改下面的代码来管理我的操作？

我仍然是 Java 新手，也许我在代码中犯了一些对您来说似乎很明显的错误。

这是代码片段：

```
 private void setInputData() {

    Pattern pat = Pattern.compile("regex");
    BufferedReader br = null;
    Matcher mat = null;

    try {
        File myFile = new File("myFile");
        FileReader fr = new FileReader(myFile);

        br = new BufferedReader(fr);
        String line = null;
        String appendThisString = null;
        String processThisString = null;
        StringBuilder stringBuilder = new StringBuilder();

        while ((line = br.readLine()) != null) {

            mat = pat.matcher(line);

            if (mat.find()) {
                appendThisString = mat.group(1);
            }

            if (line.contains("|")) {
                processThisString = line.replace(" ", "").replace("|", "\t");
                stringBuilder.append(processThisString).append("\t").append(appendThisString);
                stringBuilder.append("\n");
            }
        }
//      doSomethingWithTheString(stringBuilder.toString());
    } catch (Exception ex) {
        ex.printStackTrace();
    } finally {
        try {
            if (br != null)br.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
} 
```

这是错误消息：

```
线程“主”java.lang.OutOfMemoryError 中的异常：Java 堆空间
    在 java.util.Arrays.copyOf(Arrays.java:2367)
    在 java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:130)
    在 java.lang.AbstractStringBuilder.ensureCapacityInternal(AbstractStringBuilder.java:114)
    在 java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:415)
    在 java.lang.StringBuilder.append(StringBuilder.java:132)
    在 Test.setInputData(Test.java:47)
    在 Test.go(Test.java:18)
    在 Test.main(Test.java:13)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:07:01.693

您可以进行试运行，无需附加，而是计算总字符串长度。

如果 doSomethingWithTheString 是顺序的，那么会有其他解决方案。

您可以标记字符串，减小大小。例如，霍夫曼压缩查找已经存在的读取字符的序列，可能扩展表，然后产生表索引。*（开源 OmegaT 翻译工具在一个地方使用了这种策略来处理令牌。）*所以这取决于你想要做的处理。看到一种 CSV 字典的阅读似乎是可行的。

一般来说，我会使用数据库。

PS你可以节省一半的内存，全部写入一个文件，然后在一个字符串中重新读取文件。或者在文件上使用 java.nio ByteBuffer，一个内存映射文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:02:24.510

一般的策略是设计您的应用程序，使其不需要在内存中保存整个文件（或其中很大一部分）。

根据您的应用程序的作用：

*   您可以将中间数据写入文件，然后一次再读回一行来处理它。
*   您可以将读取的每一行传递给处理算法；例如，通过`doSomethingWithTheString(...)`单独调用每一行而不是全部调用。

但是，如果您需要将整个文件保存在内存中，那么您将处于困境和艰难的境地。

* * *

需要注意的另一件事是，使用`StringBuilder`类似文件可能需要多达文件大小 6 倍的内存。它是这样的。

*   当`StringBuilder`需要扩展其内部缓冲区时，它通过创建一个两倍于当前缓冲区大小的 char 数组，并从旧缓冲区复制到新缓冲区。此时，您分配的缓冲区空间是缓冲区扩展开始前的 3 倍。现在假设只有一个字符要附加到缓冲区。

*   如果文件是 ASCII（或另一个 8 位字符集），则`StringBuilder`' 的缓冲区需要两倍的内存量......因为它`char`不是由`byte`值组成。

如果您对最终字符串中的字符数有很好的估计（例如根据文件大小），您可以通过在创建`StringBuilder`. 但是，你也不能小看，因为如果你稍微小看...

您还可以使用面向字节的缓冲区（例如 a `ByteArrayOutputStream`）而不是 StringBuilder ...然后使用`ByteArrayInputStream`/ `StreamReader`/`BufferedReader`管道读取它。

但最终，在内存中保存一个大文件不会随着文件大小的增加而扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:04:36.653

从您的示例中，不清楚一旦修改了巨大的字符串，您将如何处理它。但是，由于您的修改似乎没有跨越多行，我只是将修改后的数据写入一个新文件。

为了做到这一点，`FileWriter`在您的循环之前创建并打开一个新对象`while`，请将您的`stringBuffer`声明移动到循环的开头并在循环`stringBuffer`结束时写入您的新文件。

另一方面，如果您确实需要组合来自不同行的数据，请考虑使用数据库。哪种取决于您的数据的性质。如果它有类似记录的组织，您可能会采用关系数据库，例如[Apache Derby](http://db.apache.org/derby/)或[MySQL](http://www.mysql.com/)，否则您可能会查看所谓的 No SQL 数据库，例如[Cassandra](http://cassandra.apache.org/)或[MongoDB](http://www.mongodb.org/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T14:02:00.420

在这种情况下，您不能使用 StringBuilder。它将数据保存在内存中。我认为您应该考虑将结果保存到每一行的文件中。

即使用 FileWriter 而不是 StringBuilder。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T14:54:36.700

方法 doSomethingWithTheString() 可能需要更改，以便它也接受 InputStream。在读取原始文件内容并逐行转换时，您应该将转换后的内容逐行写入临时文件。然后该临时文件的输入流可以发送到 doSomethingWithTheString() 方法。可能该方法需要重命名为 doSomethingWithInputStream()。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T14:50:02.013

我建议使用 Guavas FileBackedOutputStream。您获得了拥有一个会消耗磁盘 io 而不是主内存的 OutputStream 的优势。当然，由于磁盘 io，访问会变慢，但是，如果您正在处理如此大的流，并且您无法将其分块为更易于管理的大小，那么这是一个不错的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T14:12:32.190

您确定文件中有行终止符吗？如果没有，您的 while 循环将继续循环并导致您的错误。如果是这样，可能值得尝试一次读取固定数量的字节，这样阅读器就不会无限增长。

# c - C中全局变量的可见性/范围是什么？

> ID：16039004
> 
> 赞同：5
> 
> 时间：2013-04-16T13:53:55.297
> 
> 标签：c, linker, global-variables

我有两个 .c 文件：A1.c 和 A2.c

A1.c 如下：

```
int i=0;
void main()
{} 
```

A2.c 如下：

```
int i=0;
void func()
{} 
```

它编译得很好，但是当我尝试链接这两个 .o 文件时，出现“i 的多重定义”错误。我知道`i`这里是一个全局变量，但它不需要`extern`在其他文件中使用的关键字。在我的项目中，我没有使用`extern`. 那我怎么会出错呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-05T22:50:27.173

在编译时，编译器将每个全局符号作为强符号或弱符号导出到汇编器，汇编器将此信息隐式编码到可重定位目标文件的符号表中。函数和初始化的全局变量得到强符号。未初始化的全局变量获得弱符号。

鉴于这种强符号和弱符号的概念，Unix 链接器使用以下规则来处理多重定义的符号：

**规则 1：**不允许使用多个强符号。
**规则 2：**给定一个强符号和多个弱符号，选择强符号。
**规则 3：**给定多个弱符号，选择任何一个弱符号。

您的代码 A1.c 如下：

```
int i=0; // Strong Symbol
void main() {} 
```

A2.c 如下：

```
int i=0; // Strong symbol
void func() {} 
```

根据**规则 1**，这是不允许的。

更多详细信息：[http ://www.geeksforgeeks.org/how-linkers-resolve-multiply-defined-global-symbols/](http://www.geeksforgeeks.org/how-linkers-resolve-multiply-defined-global-symbols/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T14:16:08.313

Long story short, a statement like

```
extern int i; 
```

is a *declaration*, while the statement

```
int i=0; 
```

is a *definition*.

In C you can declare a variable many times in a program, but you can define it only once.The first statement signifies to A2 that the definition of the variable i is in another file.For one I can't understand why you are so apprehensive about using "extern".

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T13:56:58.953

在 C 中，可以从另一个编译单元访问全局变量，只要另一个编译单元通过声明它看到它存在`extern`。链接器使工作具有链接外部声明和另一个.c 中的定义。

如果您希望它仅对您正在编译的 .c 可见，则必须将其指定为`static`

```
static int i = 0; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T13:57:18.577

当然，它在链接上失败了：它试图组合两个引用两个不同内存位置的对象的对象文件。

在这种情况下，变量的真正定义在所有源代码中必须是唯一的，并且对这个变量的所有其他引用必须通过使用`external`关键字来完成（as you sat）。

编译不会抱怨，因为它不知道您的两个文件的关系，只有链接器必须弄清楚这一点。

# c# - 通过 Web 服务执行长时间运行的 SP 的替代解决方案

> ID：16039009
> 
> 赞同：0
> 
> 时间：2013-04-16T13:54:08.403
> 
> 标签：c#, asp.net, sql-server

我需要告诉数据库处理程序它应该运行一个生成 300-500MB 数据的脚本，然后通知我的 C# 应用程序该脚本已完成。

之后，我需要将新创建的数据获取到我的 C# 应用程序，对其进行操作，然后将其发送到 FTP 服务器。

一种方法是通过 Web 服务调用 SQL 服务器，让数据库处理程序运行脚本，然后返回数据。然后，C# 应用程序将处理数据并最终通过 FTP 发送数据。然而，由于数据的大小和脚本的运行时间约为 1 小时，这种方法远非最佳。

关于更好的解决方案的任何建议？

编辑：我忘了提到一些重要的部分。SSIS也是我想到的。问题是数据库位于不同的服务器上，该服务器没有打开端口以通过 FTP 发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:17:35.917

我会把它作为一项服务来实现。使用 Web 服务允许用户请求执行脚本（将请求排队），但实际上是从服务中执行脚本（读取队列并执行操作）。您可以从服务中更好地控制整个数据收集和交付过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:17:36.497

我自己的策略是开发一个独立的应用程序（安装在服务器上）来执行数据检索、操作和 FTP 传输。由于某些用户交互，此应用程序可能由您的 ASP.NET 应用程序中的代码执行，并且可以更新数据库的进度，以便您的用户可以通过 ASP.NET Web 界面（ajax 轮询或加载状态页面）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:34:06.037

您是否考虑过使用 SSIS？它真正有用的一件事是控制以数据为中心的多步骤工作流。

# html - CSS 将表格列转换为全宽堆叠元素

> ID：16039010
> 
> 赞同：3
> 
> 时间：2013-04-16T13:54:10.467
> 
> 标签：html, css, html-table

我发现了很多方法来创建一个只使用 DIV 的“无表”表格布局，但相反的却很少。

我有多个带有表格结构的 html 页面，它们都引用了一个通用的 CSS 文件。这些表有一个简单的 2 列布局，如下所示：

```
<table>
  <tbody>
    <tr>
      <th>category</th>
      <td>description</td>
    </tr>
    <tr>
      <th>category</th>
      <td>description</td>
    </tr>
  </tbody>
</table> 
```

我希望能够**仅通过 CSS**转换表格的布局，以使其看起来像一个“单列表”，如果你愿意的话，类别和描述都堆叠在另一个之上桌子。我试过 display:block 和 width:100% 但它不能**跨浏览器**工作。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:31:23.907

如果你`float`每个单元格都可以达到你想要的结果。看这个演示：http: [//jsfiddle.net/t3ZaM/](http://jsfiddle.net/t3ZaM/)

适用于 FF、Chrome、Opera、Safari、IE9 和 10，但我无法检查旧版本的 IE，因为我没有它们。

# java - 替换所有边界和异常

> ID：16039011
> 
> 赞同：3
> 
> 时间：2013-04-16T13:54:12.157
> 
> 标签：java, regex

我试图用来`replaceAll`消除字符串中的所有空格，但两个区域除外。

如果我的字符串是

```
AB CD #E     F# #GH   I# JK L   M 
```

然后我希望它输出为

```
ABCD#E     F##GH   I#IJKLM 
```

目前，它是在`ABCD#EF##GH#IJKLM`不区分`#`字符的情况下输出。有没有办法用replaceAll上的正则表达式来做到这一点？

```
String s1 = "AB CD #E     F# #GH   I# JK L   M";
s1 = s1.replaceAll("\\s+", "");
System.out.println(s1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:06:01.823

我不擅长正则表达式。我将为此使用一个循环。

```
String s1 = "AB CD #E     F# #GH   I# JK L   M";
StringBuilder sb = new StringBuilder();
boolean keepSpace = false;
for(int i = 0; i < s1.length; i++){
    char c = s1.charAt(i);
    if(keepSpace || c != ' ')
        sb.append(c);
    if(c == '#')
        keepSpace = !keepSpace;
}
s1 = sb.toString();
System.out.println(s1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T14:12:33.687

您正在寻找这种基于正则表达式的正则表达式`replaceAll`：

```
String repl = str.replaceAll("\\s+(?=(?:(?:[^#]*#){2})*[^#]*$)", ""); 
```

### 现场演示：http: [//ideone.com/nFQhVt](http://ideone.com/nFQhVt)

**说明：**此正则表达式使用正向前瞻，基本上匹配出现 0 次或多次出现的一对文本，直到找到哈希 (#)，即`([^#]*"){2}`在每个空格匹配的右侧 (RHS)。

`[^#]*#`简而言之，这意味着仅当它位于哈希符号对之外时才替换空格，因为哈希内的所有匹配项在 RHS 上都将具有奇数个匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:03:39.053

尝试

```
s1 = s1.replaceAll("\\s+(?=(?:[^#]*#[^#]*#)*[^#]*$)", ""); 
```

`#`只有当字符串中有偶数个前面时，它才会替换空格。
因此，它远非万无一失，但它可能已经足够好了。
您总是可以先测试字符串以确保它包含偶数个`#`.

# java - 将正则表达式从 Java 转移到 PostgreSQL

> ID：16039014
> 
> 赞同：0
> 
> 时间：2013-04-16T13:54:27.453
> 
> 标签：java, regex, postgresql, postgresql-9.1

如何将以下正则表达式从 Java 转移到 PostgreSQL 语法：

```
Pattern.compile("(?imu)(P\\W*Ř\\W*E\\W*D\\W*V\\W*O\\W*L\\W*Á\\W*N\\W*Í)")); 
```

我努力了：

```
select regexp_matches('P Ř E D V O L Á N Í','(?imu)(P\\W*Ř\\W*E\\W*D\\W*V\\W*O\\W*L\\W*Á\\W*N\\W*Í)') 
```

但是得到了`ERROR: invalid regular expression: invalid embedded option`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:15:30.660

Postgres 使用不支持`u`(Enable Unicode-aware case fold) 标志的POSIX RE`(?imu)`

# php - 提交按钮不出现

> ID：16039016
> 
> 赞同：-2
> 
> 时间：2013-04-16T13:54:30.797
> 
> 标签：php, wordpress, header, submit

我试图用注册表单制作一个弹出窗口。

如果用单页测试，我有这个脚本可以正常工作。但是如果我将它与我的 wordpress 主题一起使用，我将它放在 header.php 中，提交按钮不会出现并且电子邮件文本框更短。

图1：没关系。[http://sdrv.ms/Ysgfmw](http://sdrv.ms/Ysgfmw) 图 2：wordpress 模板中的脚本。[http://sdrv.ms/10a3PpU](http://sdrv.ms/10a3PpU)

有谁知道为什么会这样？谢谢您的帮助。

注意：我省略了完整的网址。

```
<html>
<head>
    <!--*************** INICIO JAVASCRIPT/CSS EVILPOPUP     ************-->
    <script type="text/javascript" src="......../evilpopup.js"></script>
    <link href="........./classic-081711.css" rel="stylesheet" type="text/css">
    <style type="text/css">
        #mc_embed_signup
        {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,.8);
            display: none;
            z-index: 10000;
        }

        #mc_embed_signup form
        {
            position: fixed;
            top: 10%;
            left: 50%;
            width: 50%;
            margin-left: -25%;
            font: normal 100% Helvetica,Arial,sans-serif;
            font-size: 14px;
            border-radius: 4px;
            border: none;
            padding: 10px 20px;
            background-color: #fff;
            color: #000;
            text-align: left;
            max-height: 400px;
            overflow-y: auto;
            overflow-x: hidden;
        }

        #mc_embed_signup a.mc_embed_close
        {
            background: transparent url(http://downloads.mailchimp.com/img/closebox.png) no-repeat;
            display: block;
            height: 30px;
            width: 30px;
            text-indent: -999em;
            position: absolute;
            top: 0px;
            right: 0px;
            display: none;
        }
    </style>
    <!--*************** FIN JAVASCRIPT/CSS EVILPOPUP     ************-->
</head>
<body>
    <h1>Hola</h1>
    <!-- Begin EVILPOPUP MailChimp Signup Form -->
    <div id="mc_embed_signup">
        <form action=".................us5.list-manage2.com/subscribe/post?u=3e03d112fc6fe9e6e2d643fa4&amp;id=28e366ba2d" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
            <h2>Gratis $3.000 en tu primera compra</h2>
            <div class="indicates-required"><span class="asterisk">*</span> indica requerido</div>
            <div class="mc-field-group">
                <label for="mce-EMAIL">
                    Email  <span class="asterisk">*</span>
                </label>
                <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
            </div>
            <div class="mc-field-group">
                <label for="mce-FNAME">Nombre </label>
                <input type="text" value="" name="FNAME" class="" id="mce-FNAME">
            </div>
            <a href="#" id="mc_embed_close" class="mc_embed_close">Cerrar</a>
            <div id="mce-responses" class="clear">
                <div class="response" id="mce-error-response" style="display: none"></div>
                <div class="response" id="mce-success-response" style="display: none"></div>
            </div>
            <div class="clear">
                <input type="submit" value="Suscribeme" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
        </form>
    </div>
    <!--End EVILPOPUP mc_embed_signup-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:57:17.347

更改最大高度

```
#mc_embed_signup form{
   position:fixed; 
   top:10%; 
   left:50%; 
   width:50%; 
   margin-left:-25%; 
   font:normal 100% Helvetica,Arial,sans-serif; 
   font-size:14px; 
   border-radius:4px; 
   border:none; padding:10px 20px; 
   background-color:#fff; 
   color:#000; 
   text-align:left;
   max-height:500px;
   overflow-y:auto;
   overflow-x:hidden;
 } 
```

# php - 我无法将 0777 设置为文件权限，因为所有者/组是 48 48

> ID：16039019
> 
> 赞同：0
> 
> 时间：2013-04-16T13:54:35.237
> 
> 标签：php, permissions, directory, laravel

我正在尝试创建一个文件夹 chmod 它到 777 但我无法做到。它总是将更改还原为：

```
File Permissions: 341 Owner/Group: 48 48 
```

仅当我尝试使用 PHP 创建文件夹时才会发生这种情况。我使用 Laravel 的 mkdir 函数。（参考： http: [//laravel.com/api/class-Laravel.File.html](http://laravel.com/api/class-Laravel.File.html)）如果我使用 FTP 创建文件夹，它可以正常工作。

正如在其他（可能是重复的）主题上询问的那样；

该脚本输出：

```
<?php echo "UID = " . getmyuid() . ", User = " . get_current_user(); ?>
//Output: UID = 502, User = TestUser 
```

我使用 directadmin 作为面板和`safe_mode is off.`

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:40:54.597

在您的 httpd.conf 文件中，将这两行更改为您想要的任何用户和组。

```
# If you wish httpd to run as a different user or group, you must run
# httpd as root initially and it will switch...
#
# User/Group: The name (or #number) of the user/group to run httpd as.
# It is usually good practice to create a dedicated user and group for
# running httpd, as with most system services.
#
User _www
Group _www 
```

然后通过键入在 linux 系统上重新启动您的 apache；

**sudo /usr/sbin/apachectl 重启**

在我不知道的窗户上。

# c++ - QGraphicsView Qt 的点击事件

> ID：16039020
> 
> 赞同：3
> 
> 时间：2013-04-16T13:54:37.470
> 
> 标签：c++, qt, mouseevent, qgraphicsview

我在 Qt 中制作了一个 GUI，它基本上是一个带有 QGraphicsView 的小部件，我有一个功能：

```
void GUI::mousePressEvent(QMouseEvent *event)
{
    if(event->button() == Qt::LeftButton)
    {
        QPointF mousePoint = ui->graphicsView->mapToScene(event->pos());
        qDebug() << mousePoint;
    }
} 
```

链接到公共插槽：

```
 void mousePressEvent(QMouseEvent *event); 
```

这在控制台上向我显示了我单击的位置的 x,y 坐标，但是目前这适用于整个小部件，我理想情况下希望 x,y(0,0) 位于 QGraphicsView 的左上角，而不是整个小部件的左上角。有谁知道如何使这项工作，我从我的代码中认为这就是它正在做的事情，但事实证明并非如此，我四处看了一会儿，但我什么也没想到

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:10:37.063

重新实现`mousePressEvent(QMouseEvent *event)`不是`QGraphicsView`您的小部件将是“正确”的做法。否则，您可以使用以下方法破解它：

```
// Detect if the click is in the view.
QPoint remapped = ui->graphicsView->mapFromParent( event->pos() );
if ( ui->graphicsView->rect().contains( remapped ) )
{
     QPointF mousePoint = ui->graphicsView->mapToScene( remapped );
} 
```

这假定小部件是`QGraphicsView`.

# http - web.xml 中的错误页面配置转换了 404 情况下返回的 HTTP 代码

> ID：16039021
> 
> 赞同：2
> 
> 时间：2013-04-16T13:54:43.383
> 
> 标签：http, jsf, tomcat7, servlet-3.0, prettyfaces

我在一个由 Tomcat 7.0.35 提供支持的 JSF 应用程序上工作。我想创建一个自定义错误页面，因此使用了配置文件中的`<error-page>`标签。`web.xml`

```
<error-page>
    <error-code>404</error-code>
    <location>/error</location>
</error-page> 
```

从某种意义上说，在 404 的情况下，返回的页面具有正确的 HTTP 正文似乎有效。但是 HTTP 返回代码是 200。预期的 404 在`<error-page>`未配置时被正确接收。

如果未指定，则会发生相同的*soft-404问题。*`<error-code>`

```
<error-page>
    <location>/error</location>
</error-page> 
```

我正在寻找一种方法来配置此错误页面而不会丢失错误代码。

还有两条可能有用的信息：

*   JSF 项目阶段是生产
*   Pretty Faces 3.3.3 正在处理漂亮的 URL，其内容如下

    ```
    @Named(value = "error")
    @RequestScoped
    @URLMappings(mappings = {
        @URLMapping(id = "error", pattern = "/error", viewId = "/faces/error.xhtml")})
    public class ErrorController implements Serializable { 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:39:26.740

有时，当您有一个由 servlet 过滤器处理的错误页面时，容器的行为似乎不太好。在这种情况下，您可能已经将“/error”映射到 PrettyFaces，并且正在内部将其转发到另一个资源。（PrettyFaces 与 Servlet 转发一起使用）

我相信这里发生的情况是，容器看到了新的转发，忘记了它实际上是在显示错误页面，并发送 200 状态，因为转发请求成功。

要解决此问题，您需要做的是`<action>#{bean.send404}</action>`在错误页面漂亮面孔映射中添加一个设置 404 状态的选项。

```
<url-mapping>
   <pattern value="/error" />
   <view-id="/faces/error.xhtml" />
   <action>#{bean.send404}</action>
</url-mapping> 
```

然后您的 bean 方法将需要获取 HttpServletResponse，通常可以从 FacesContext 中获取：

```
HttpServletResponse response = (HttpServletResponse)FacesContext.getCurrentInstance()
         .getExternalContext().getResponse();
response.sendError(HttpServletResponse.SC_NOT_FOUND); 
```

那应该对你有用。

# sql - 选择变量作为字符串

> ID：16039023
> 
> 赞同：0
> 
> 时间：2013-04-16T13:54:47.593
> 
> 标签：sql, sql-server

谁能告诉我为什么这不起作用？

```
DECLARE
  @ItemList         VARCHAR(max);

IF EXISTS
    (SELECT IM_Data INTO ItemList
      FROM IM_DataTable
      WHERE xRowNum<=1) 
```

错误：

> 查找错误 - SQL Server 数据库错误：关键字“INTO”附近的语法不正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:01:21.970

好的，首先，您需要确保查询的结果只有一行，所以我认为不需要`WHERE xRowNum<=1`，您应该使用`xRowNum=1`：

```
DECLARE @ItemList VARCHAR(max);

SELECT @ItemList = IM_Data
FROM IM_DataTable
WHERE xRowNum = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:58:49.730

我认为它期望 ItemList 是一个表——你 SELECT INTO 一个表，而不是一个变量。

SQL Server 中的语法是：

```
SELECT 
   ItemList = IM_Data
FROM 
   IM_DataTable
WHERE
   xRowNum<=1 
```

我不确定 IF EXISTS 如何适应这一点。您只想在数据存在时设置变量吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:23:05.950

您已经省略了需要位于变量名称开头的 @ 符号。此外，您似乎正在将检查存在的语法和将数据检索到变量中的语法混合在一起。您是否只想检查 IN_DataTable 中是否存在某行或某行？如果是这样，请省略“INTO @ItemList”，以便您拥有以下内容：

```
IF EXISTS 
    (SELECT IM_Data
     FROM IN_DataTable
     WHERE xRowNum <= 1)
... 
```

如果您需要检索 IM_Data 并稍后使用它，您应该执行以下操作：

```
DECLARE @ItemList VARCHAR(max);
SELECT @ItemList = IM_Data 
FROM IM_DataTable
WHERE xRowNum<=1;
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:24:46.457

为什么这不起作用？

好吧，您拥有的子查询是：

```
SELECT IM_Data
INTO ItemList
FROM IM_DataTable
WHERE xRowNum<=1 
```

`ItemList`这是在当前数据库中创建名为 的表的完全有效的语法。但是，语句中不允许使用此语法`if`。

因此，您可以将其表述为：

```
SELECT IM_Data
INTO ItemList
FROM IM_DataTable
WHERE xRowNum<=1

if exists (select * from itemlist) 
```

或者您可以完全省去额外的表格：

```
if exists (select * from IM_DataTable WHERE xRowNum<=1) 
```

或者，您可能完全有其他意图。

# spring - @Autowired 不适用于球衣资源

> ID：16039024
> 
> 赞同：1
> 
> 时间：2013-04-16T13:54:48.537
> 
> 标签：spring, jersey

`workflowService`一片空白。bean 配置是正确的，因为手动注入在应用程序的其他部分工作正常。

这是我的资源：

```
@Path("/workflowProcess")
@Consumes({MediaType.APPLICATION_JSON})
@Produces({MediaType.APPLICATION_JSON})
public class WorkflowProcessResource {

    @Autowired
    WorkflowService workflowService;

    @Autowired
    WorkflowProcessService workflowProcessService;

    @GET
    @Path ("/getWorkflowProcesses/{uuid}")
    public Collection<WorkflowProcessEntity> getWorkflows (@PathParam("uuid") String uuid) {
        WorkflowEntity workflowEntity = workflowService.findByUUID(uuid);

        return workflowEntity.getWorkflowProcesses();
    }
} 
```

根据我在[http://www.mkyong.com/webservices/jax-rs/jersey-spring-integration-example/](http://www.mkyong.com/webservices/jax-rs/jersey-spring-integration-example/)等网站上不断在 Google 上找到的信息，这似乎`ContextLoaderListener`是关键。但我已经将它添加到应用程序上下文中。

```
import com.sun.jersey.spi.container.servlet.ServletContainer;
import com.sun.jersey.spi.spring.container.servlet.SpringServlet;
import org.atmosphere.cpr.AtmosphereFramework;
import org.atmosphere.cpr.AtmosphereServlet;
import org.atmosphere.handler.ReflectorServletProcessor;
import org.glassfish.grizzly.servlet.ServletRegistration;
import org.glassfish.grizzly.servlet.WebappContext;
import org.glassfish.grizzly.websockets.WebSocketAddOn;
import org.glassfish.grizzly.http.server.HttpServer;
import org.glassfish.grizzly.http.server.NetworkListener;

import java.io.IOException;
import java.util.logging.Logger;

public class Main {

    protected static final Logger logger = Logger.getLogger(Main.class.getName());

    public static void main(String[] args) throws IOException {
        logger.info("Starting server...");
        final HttpServer server = HttpServer.createSimpleServer(".", 8181);

        WebappContext ctx = new WebappContext("Socket", "/");

        //enable annotation configuration
        ctx.addContextInitParameter("contextClass", "org.springframework.web.context.support.AnnotationConfigWebApplicationContext");
        ctx.addContextInitParameter("contextConfigLocation", "com.production");

        //allow spring to do all of it's stuff
        ctx.addListener("org.springframework.web.context.ContextLoaderListener");

        //add jersey servlet support
        ServletRegistration jerseyServletRegistration = ctx.addServlet("JerseyServlet", new SpringServlet());
        jerseyServletRegistration.setInitParameter("com.sun.jersey.config.property.packages", "com.production.resource");
        jerseyServletRegistration.setInitParameter("com.sun.jersey.spi.container.ContainerResponseFilters", "com.production.resource.ResponseCorsFilter");
        jerseyServletRegistration.setInitParameter("com.sun.jersey.api.json.POJOMappingFeature", "true");
        jerseyServletRegistration.setLoadOnStartup(1);
        jerseyServletRegistration.addMapping("/api/*"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T20:35:41.797

我认为你在这里需要的是[@InjectParam](http://jersey.java.net/nonav/apidocs/latest/jersey/index.html)而不是`@Autowired`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T05:46:38.990

@InjectParam 工作正常，而不是 @Autowired，略有变化

@InjectParam 不能应用于构造函数本身，因此必须应用于构造函数的参数。

`public OrderService(@InjectParam OrderValidationService service, @InjectParam OrderCampaignService campaignService) { this.service = service; this.submissionErrorHandler = submissionErrorHandler; this.campaignService = campaignService; }`

# c - 如何在这个 C 函数中为数组分配任何东西？

> ID：16039026
> 
> 赞同：0
> 
> 时间：2013-04-16T13:55:06.077
> 
> 标签：c, function, pointers, malloc

我有这个 C 函数：

```
fill_array(&data, &size);

void fill_array(int **data, int *size){
   printf("Size is:");
   scanf("%d", size);
   *data = malloc(*size * sizeof(int *));
   int i = 0;
   for (i = 0; i < size; i++){
      (*data)[i] = rand() % 11;
   }
} 
```

例如，我想将 data[i] 分配给随机数。怎么做这样的事情？我尝试了很多变化，但我的程序总是崩溃。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:57:58.787

```
*data = malloc(*size * sizeof(**data));
(*data)[5] = 15; 
```

请参阅[cdecl](http://www.cdecl.org/)网站。

[不要投射 malloc](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

**根据问题**编辑****

 **for 循环包含错字

```
for (i = 0; i < size; i++) 
```

它应该是

```
for (i = 0; i < *size; i++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:59:15.420

您可以使用`(*data)[5] = 15;`而不是 this`*data[5] = 15;`因为优先级`[]`大于`*`..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:10:39.747

正如其他人所说，您需要加上括号才能使运算符优先级正确。如果您想大量使用“数组”，创建一个易于使用的临时变量可能是有意义的：

```
int *p;
...
*data = malloc(*size * sizeof **data);
p = *data; 
```

然后你可以使用`p[5]`等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:18:37.723

良好的程序设计要求我们应该将内存分配和实际算法分开。拥有一个接受用户输入*并*分配内存*并*执行某些算法的功能可能不是最佳的程序设计。

因此，正确的解决方案不是修补该功能以使其工作，而是制作一些新功能：

```
int get_size_from_user (void)
{
  int size;
  printf("Size is:");
  scanf("%d", &size);
  return size;
}

bool alloc_array (int** array, int size)
{
  *array = malloc(size * sizeof(int));
  return *array != NULL;
}

void fill_array (int* array, int size)
{
  // ...whatever you want to do here
  data[5] = 15;
} 
```

瞧瞧，当我们改进程序设计后，对晦涩语法的需求就消失了！巧合？**

# c++ - 检查 QBool 在 Qt 中是否可用

> ID：16039030
> 
> 赞同：0
> 
> 时间：2013-04-16T13:55:16.167
> 
> 标签：c++, qt4, qt5

Qt4 具有 Qt5 中不可用的 QBool ( [http://qt-project.org/doc/qt-5.0/qtdoc/sourcebreaks.html](http://qt-project.org/doc/qt-5.0/qtdoc/sourcebreaks.html) )。有谁知道如何检查 QBool 在当前编译中是否可用？

检查 Qt 版本应该足够了。是否有可能/方法来检查 Qt 的版本，如 VC++ `_MSC_VER`，我们可以检查 VC++ 版本并选择预处理器编译的内容

Qt4 和 Qt5 都定义了 QT_CORE_LIB（`QT += core`在项目文件中设置时）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:05:28.813

您可以使用[QT_VERSION](http://qt-project.org/doc/qt-5.0/qtcore/qtglobal.html#QT_VERSION)宏。

# php - Redbean：addDatabase 是否立即连接到所述数据库？

> ID：16039035
> 
> 赞同：1
> 
> 时间：2013-04-16T13:55:32.490
> 
> 标签：php, orm, redbean

简单的问题，以下命令是否会自动连接到给定的数据库？

R::addDatabase('DB1','sqlite:/tmp/d1.sqlite','user','password',$frozen);

还是等到您真正尝试执行查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T21:28:12.897

据我所知，如果您添加数据库，则不会自动建立连接。当您`R::selectDatabase('DB1');`尝试使用连接时，如果无法建立连接，则会引发错误。不过，您可能已经想通了这一切……

# .net - 获取枚举值的名称

> ID：16039037
> 
> 赞同：25
> 
> 时间：2013-04-16T13:55:38.303
> 
> 标签：.net, vb.net, visual-studio, enums

我正在尝试创建一个函数，我们可以在其中获取 EnumValue 的 Namevalue

例如：

```
Get_Enum_ValueName(DayOfWeek, 0) 
```

...这将返回“**星期日**”。

但是我的代码不起作用，它说没有定义类型：

```
Private Function Get_Enum_ValueName(Of T)(ByVal EnumName As T, ByVal EnumValue As Integer) As String
    Return DirectCast([Enum].Parse(GetType(EnumName), EnumValue ), EnumName).ToString
End Function 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-16T14:09:02.183

给定一个`enum`

```
public enum Week
{
    Monday,
    Tuesday,
    Wednesday,
    Thursday,
    Friday,
    Saturday,
    Sunday
} 
```

以下是您可以做的事情：

```
static void Main(string[] args)
{

    // enum to int
    int i=(int)Week.Thursday;

    // int to enum;
    Week day=(Week)3;

    // enum to string
    string name=Week.Thursday.ToString();
    string fun=Enum.GetName(typeof(Week), 6);
    string agh=Enum.GetName(typeof(Week), Week.Monday);
    string wed=EnumName(Week.Wednesday);

    // string to enum
    Week apt=(Week)Enum.Parse(typeof(Week), "Thursday");

    // all values of an enum type
    Week[] days=(Week[])Enum.GetValues(typeof(Week));

    // all names of an enum type
    string[] names=Enum.GetNames(typeof(Week));

}

static string EnumName<T>(T value)
{
    return Enum.GetName(typeof(T), value);
} 
```

* * *

## 编辑 1

如果要根据基础数值从一种转换`enum`为另一种不同类型（转换为整数和从整数），请使用以下命令：`enum`

```
/// <summary>
/// Casts one enum type to another based on the underlying value
/// </summary>
/// <typeparam name="TEnum">The type of the enum.</typeparam>
/// <param name="otherEnum">The other enum.</param>
public static TEnum CastTo<TEnum>(this Enum otherEnum)
{
    return (TEnum)Enum.ToObject(typeof(TEnum), Convert.ToInt32(otherEnum));
} 
```

用作

```
public enum WeekEnd
{
    Saturday = Week.Saturday,
    Sunday = Week.Sunday
}

static void Main(string[] args)
{
    var day = WeekEnd.Saturday.CastTo<Week>();
    // Week.Sunday
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-16T14:00:28.940

在 C# 中，这将是：

```
return Enum.ToObject(typeof(T), EnumValue).ToString(); 
```

或（同样）：

```
return ((T)(object)(EnumValue)).ToString(); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-16T14:23:54.500

```
public enum WeekDay
{
    Monday = 1,
    Tuesday = 2,
    Wednesday = 3,
    Thursday = 4,
    Friday = 5,
    Saturday = 6,
    Sunday = 7
}

string s = WeekDay.Friday.ToString(); 
```

就这么简单......除非我误解了什么？

如果你只有号码：

```
string s = ((WeekDay)4).ToString(); 
```

**更新**

好的，下次你应该提到你想要一些通用的东西......用于所有枚举，而不仅仅是那个特定的例子。你可以试试这个：

```
public static class EnumExtensions
{
    public static T ToEnum<T>(this int value) where T : struct
    {
        return (T)(object)value;
    }

    public static string ToEnumName<T>(this int value) where T : struct
    {
        return ((T)(object)value).ToString();
    }
} 
```

像这样使用：

```
int someEnumValue = 4;
string name = someEnumValue.ToEnumName<WeekDay>(); 
```

或者：

```
WeekDay weekDay = someEnumValue.ToEnum<WeekDay>(); 
```

我仍然认为这不是真的有必要，因为无论如何你仍然需要知道枚举的类型......因此：

这个：`string name = ((WeekDay)someEnumValue).ToString();`

和这个`string name = someEnumValue.ToEnumName<WeekDay>();`

是等价的......但是......任何适合你的东西。

# c# - 如何全局访问变量？

> ID：16039038
> 
> 赞同：0
> 
> 时间：2013-04-16T13:55:39.037
> 
> 标签：c#, .net

我正在用一个`AccountManager`（我称之为）扩展我的应用程序。该应用程序有一个登录表单（它与主表单不同），此处输入的信息将`set`发送给`AccountManager`班级：

```
AccountManager AM = new AccountManager();
AM.username = "Username";
AM.password = "myPassword"; 
```

但是，现在（可能很明显）问题是，我无法在主窗体上获取此信息（因为我调用`new AccountManager();`了所以它将启动`AccountManager`.

如何在`AccountManager`全局范围内使用类 ( )？还是我只是将它们设为具有`static`属性的公共变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:07:27.790

创建客户经理的内部静态单例实例：

```
public class AccountManager
{
    private static Lazy<AccountManager> _am = new Lazy<AccountManager>();
    internal static AccountManager Current { get { return _am.Value; } }
} 
```

这样，您可以从同一程序集中的任何位置访问当前应用程序域中 AccountManager 的（保证）单例实例：AccountManager.Current

查找 Lazy 的构造方法 - 如果需要，您可以提供工厂方法（从而允许您正确封装密码），并且您可以保证工厂方法的线程安全。

此外，Lazy 意味着在构建 AccountManager 对象中发生的任何昂贵操作都将延迟到绝对必要时，这意味着您的应用程序在绝对必要之前不会使用资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:01:52.510

您可以将 AccountManager AM 作为参数传递给您的登录表单，例如

```
loginForm.Show(AM); 
```

在 loginForm 中应该有类似的内容：

```
AccountManager accountManager = null;
public DialogResult ShowDialog(AccountManager am)
{
accountManager = am;
return this.ShowDialog();    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T11:56:23.013

我已经使用以下方法解决了它：

在我的 上`mainForm`，我启动了`AccountManager`：

```
public static AccountManager AM = new AccountManager(); 
```

然后，在我需要访问的每个表单上`AccountManager`，我使用以下代码：

```
AccountManager AM = mainForm.AM;
MessageBox.Show(AM.username); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:13:55.227

检查下面。帐户类包含用户名和密码。使用 AccountManager 初始化 Account 对象一次。使用 AccountManager.GetAccountInfo() 方法全局获取 Account obj。

```
class Account
{
    public string username { get; set; }
    public string password { get; set; }

    public Account(string username, string password)
    {
        this.username = username;
        this.password = password;
    }
}

class AccountManager
{
    Account acc = null;

    public AccountManager(string username, string password)
    {
        if(acc == null)
        {
            acc = new Account(username, password);
        }
    }

    public Account GetAccountInfo()
    {
        return acc;
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-16T13:58:31.283

您可以将变量发送到`constructor`如下`AccountManager`：

开`Main`：

```
AccountManager AM = new AccountManager(Username, Password); 
```

开`AccountManager`：

```
public AccountManager(string username, string password)
{

} 
```

或者你可以做`AccountManager`一个静态的`class`：

[静态类 MSDN](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)

# file-io - 避免意外删除外部硬盘上的文件

> ID：16039045
> 
> 赞同：-4
> 
> 时间：2013-04-16T13:56:02.320
> 
> 标签：file-io

最近，我意外删除了存储在硬盘中的大量数据。我使用一些恢复软件恢复了它。

但是我想将我的硬盘设置为，任何人都不能删除文件，即使是我的系统或其他系统的管理员，直到权限被更改。

我不喜欢使用任何外部软件来满足我的需要。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:09:03.553

至少在 Linux 和 OS X 上，最接近这一点的方法是在包含文件的目录上设置[粘性位](http://en.wikipedia.org/wiki/Sticky_bit)，并将目录和这些文件的所有者更改为虚拟用户。

```
chmod +t /path/to/dir
chown -R someone /path/to/dir 
```

粘性位使得只有文件所有者或根（或者，在 OS X 上，对目录具有写入权限的人）才能删除或重命名目录中的文件。

# c# - C# MVC4 Jquery Ajax 发布部分视图更新

> ID：16039046
> 
> 赞同：1
> 
> 时间：2013-04-16T13:56:03.727
> 
> 标签：c#, jquery, ajax, post, asp.net-mvc-4

我有以下部分观点。

```
@using System.Data;
@using System.Dynamic;
@using System.Collections.Generic;
@using System.Linq;
@model TheMProject.Models.MyViewModel  

 <div id="Item_Buttons">
      <h2 class="alignleft">Table 1</h2>
      <p class="alignright">Item Name<input type="text" name="item_name" value="@Html.ValueFor(x => x.itemname)" class="search-query" placeholder="Search" style ="width:100px"/>
            <button class="btn btn-success" id="Change_Item_Name" value="Change_Item_Name" name="action:Change_Item_Name" type="button"> Change Item Name</button>
                            Grade<input type="text" name="item_grade" value="@Html.ValueFor(x => x.grade)" class="search-query" placeholder="Search" style="width:100px"/>
            <button class="btn btn-success" id="ChangeItemGrade" value="ChangeItemGrade" name="action:Change_Grade" type="button">Change Grade</button>
                            Delete Record<input type="text" name="delete_item" value="@Html.ValueFor(x => x.itemname)" class="search-query" placeholder="Search" style ="width:100px"/>
            <button class="btn btn-success" id="DeleteItem" value="DeleteItem" name="action:Delete_Item" type="button">Delete Record</button>
  </p>
    <div style="clear: both;"></div>
    </div>
<section>
    <div id ="firstgrid">
        <table id="TTable" class="gridTable">
            <thead class="gridHead">
                <tr>
                    @Html.DisplayFor(x => x.TColumns)
                </tr>
            </thead>
            <tbody>
                @Html.DisplayFor(x => x.TRows)
            </tbody>
        </table>
        </div>
</section>
    <section>
            <form id="form1">
        <div id="grid">
            <table id="CTable" class="gridTable">
                <thead class="gridHead">
                    <tr>
                        @Html.DisplayFor(x => x.Columns)
                    </tr>
                </thead>
                <tbody>
                    @Html.DisplayFor(x => x.Rows)
                </tbody>
            </table>
                </div>
            </form>
        </section>
<section>
    <div id ="Display_Average">
        <table id="AvgDisplayTable" class="gridTable">
            <thead class="gridHead">
                <tr>
                    @Html.DisplayFor(x => x.AvgColumns)
                </tr>
            </thead>
            <tbody>
                @Html.DisplayFor(x => x.AvgRows)
            </tbody>
        </table>
        </div>
</section>
<button class="btn" id="SubmitAverage" value ="SubmitAverage" name="action:SubmitAverage" type="button">Submit Averages</button>

<div id="ItemNameDiv" title="Change Item Name">
    @using (Html.BeginForm("ChangeItemName", "Home", "POST"))
    {
        <section>
            Heat Name:<input type="text" name="itemName" value="@Html.ValueFor(x => x.heatname)" style ="width:100px"/>
            Change to:<input type="text" name="updatedName" value="" style="width: 100px" />
            <input type="button" id="ChangeItemName" name="ChangeItemName" value="Change" />
        </section>
    }
</div>

<div id="ItemGradeDiv" title="Change Item Grade">
    @using (Html.BeginForm("ChangeGrade", "Home", "POST"))
    {
        <section>
            Item Grade:<input type="text" name="grade" value="@Html.ValueFor(x => x.grade)" style ="width:100px"/>
            Change to:<input type="text" name="updatedName" value="" style="width: 100px" />
            <input type ="hidden" name="hiddenItem" value ="@Html.ValueFor(x => x.itemname)" />
            <input type="submit" name="ChangeGrade" value="Change" />
        </section>
    }
</div>

<div id="DeleteItemDiv" title="Delete Item">
@using (Html.BeginForm("DeleteItem", "Home", "POST"))
{
    <section>
        Heat Name:<input type="text" name="itemName" value="@Html.ValueFor(x => x.itemname)" style ="width:100px"/>
        <input type="submit" name="DeleteItem" value="Delete" />
    </section>
}
    </div> 
```

单击更改项目名称按钮时，将使用 jquery 调用 ajax 帖子，如下所示：

```
 $(document).ready(function () {
        $('#ChangeItemName').click(function (e) {
            var tdata = $('#form1').serialize();
            var origname = $('#ItemNameDiv').find('input[name="itemName"]').first().val();
            var newname = $('#ItemNameDiv').find('input[name="updatedName"]').first().val();
            $.ajax({
                type: "POST",
                data: {
                    mCollection: tdata,
                    itemName: origname,
                    updatedName: newname
                },

                url: "Home/ChangeItemName",
                success: function (result) { success(result); }
            });
        });

        function success(result) {

            $('#ItemNameDiv').dialog('close');
            $("#My_Partial_V").html(result);
        }
    }); 
```

. 完成后，部分视图将使用帖子中的更新数据进行刷新。包括这篇文章所需的 jquery，还有其他脚本需要在视图中执行其他操作，例如隐藏显示在提交平均按钮下方的 div，直到单击其他按钮。在第一次执行前面提到的 ajax 帖子后，如果单击相同的按钮，帖子会被调用两次而不是一次，第三次点击它会运行 4 次，依此类推。

我试过移动脚本参考

```
<script src="@Url.Content("~/Scripts/partialitemscripts.js")" 
type="text/javascript"></script> 
```

在局部视图之外并进入包含局部视图的视图以及布局文件。当我尝试这两种方法时，一切都正确加载，直到刷新部分视图，此时所有脚本都无法被调用/引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:48:20.327

您可以尝试将脚本移到 Partialview 之外并进入主视图（如您所说），但对其进行一些更改：而不是在加载文档时触发该函数，而是将其全部放在一个函数中：

```
function ajaxCallback(result){
    $('#ChangeItemName').click(function (e) {
        var tdata = $('#form1').serialize();
        var origname = $('#ItemNameDiv').find('input[name="itemName"]').first().val();
        var newname = $('#ItemNameDiv').find('input[name="updatedName"]').first().val();
        $.ajax({
            type: "POST",
            data: {
                mCollection: tdata,
                itemName: origname,
                updatedName: newname
            },

            url: "Home/ChangeItemName",
            success: function (result) { success(result); }
        });
    });
} 
```

然后你从你的主视图（包含部分视图的那个）的就绪事件中调用这个函数。

要在完成 ajax 请求后修复按钮不再工作，您必须更新成功函数以调用 ajaxCallback（这将`partialitemscripts.js`与 ajaxCallback 函数一起使用）：

```
function success(result) {
        $('#ItemNameDiv').dialog('close');
        $("#My_Partial_V").html(result);
        ajaxCallback();
    } 
```

我不确定这是不是理想的解决方案，但我设法以这种方式获得了类似的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:47:05.533

虽然很难从发布的代码中确定。似乎脚本在第一次之后失败的原因是因为您使用了`.html()`将元素添加到 DOM 并且 click() 事件尚未绑定到这些新元素。

在这种情况下，您应该使用`on()`or `delegate()`。请参阅 jquery 文档以了解如何使用它们。很简单。

# visual-studio - 是否有任何 .runsettings 文档？

> ID：16039048
> 
> 赞同：36
> 
> 时间：2013-04-16T13:56:05.797
> 
> 标签：visual-studio, unit-testing, continuous-integration, mstest

我正在寻找与 vstest 一起使用的 .runsettings 文件的文档。有xsd吗？

除了 msdn 文档中的一些示例文件外，我似乎找不到太多内容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T11:36:42.480

Runsettings (VS2012) 类似于 testsettings (VS2010)，其中 testsettings 特定于为 MSTest 编写的测试。VS2012 支持不同适配器的设置。因此，模式不是一个封闭的系统，因此 XSD 不会是全面的。

此 MSDN 文章列出了 runsettings 文件中元素的一些高级详细信息 ( [https://msdn.microsoft.com/en-us/library/jj635153.aspx](https://msdn.microsoft.com/en-us/library/jj635153.aspx) )。

这是那篇文章的一个片段。

```
<?xml version="1.0" encoding="utf-8"?>
<RunSettings>
   <!-- Configurations that affect the Test Framework -->
   <RunConfiguration>
     <MaxCpuCount>1</MaxCpuCount>
     <!-- Path relative to solution directory -->
     <ResultsDirectory>.\TestResults</ResultsDirectory>

     <!-- [x86] | x64  
       - You can also change it from menu Test, Test Settings, Default
         Processor Architecture -->
     <TargetPlatform>x86</TargetPlatform>

     <!-- Framework35 | [Framework40] | Framework45 -->
     <TargetFrameworkVersion>Framework40</TargetFrameworkVersion>

     <!-- Path to Test Adapters -->
     <TestAdaptersPaths>%SystemDrive%\Temp\foo;%SystemDrive%\Temp\bar</TestAdaptersPaths>
   </RunConfiguration>

   <!-- Configurations for data collectors -->
   <DataCollectionRunSettings>
     <DataCollectors>
        <DataCollector friendlyName="Code Coverage" uri="datacollector://Microsoft/CodeCoverage/2.0" assemblyQualifiedName="Microsoft.VisualStudio.Coverage.DynamicCoverageDataCollector, Microsoft.VisualStudio.TraceCollector, Version=11.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
           <Configuration>
             <CodeCoverage>
               <ModulePaths>
                 <Exclude>
                    <ModulePath>.*CPPUnitTestFramework.*</ModulePath>
                 </Exclude>
               </ModulePaths>
             </CodeCoverage>
           </Configuration>
        </DataCollector>
     </DataCollectors>
  </DataCollectionRunSettings>

  <!-- Parameters used by tests at runtime -->
  <TestRunParameters>
    <Parameter name="webAppUrl" value="http://localhost" />
    <Parameter name="webAppUserName" value="Admin" />
    <Parameter name="webAppPassword" value="Password" />
  </TestRunParameters>

  <!-- Adapter Specific sections -->
  <!-- MSTest adapter -->
  <MSTest>
     <MapInconclusiveToFailed>True</MapInconclusiveToFailed>
     <CaptureTraceOutput>false</CaptureTraceOutput>
     <DeleteDeploymentDirectoryAfterTestRunIsComplete>False</DeleteDeploymentDirectoryAfterTestRunIsComplete>
     <DeploymentEnabled>False</DeploymentEnabled>
     <AssemblyResolution>
        <Directory Path>"D:\myfolder\bin\" includeSubDirectories="false"/>
     </AssemblyResolution>
  </MSTest>

</RunSettings> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-28T15:52:14.223

我在这里找到了有关运行设置（特定于代码覆盖率）的更多信息：

[http://msdn.microsoft.com/en-us/library/jj159530%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/jj159530%28v=vs.110%29.aspx)

# objective-c - 如何让 XCode 的分析器相信这不是泄漏？

> ID：16039055
> 
> 赞同：1
> 
> 时间：2013-04-16T13:56:20.160
> 
> 标签：objective-c, xcode, static-analysis

静态分析器通知我以下代码可能存在泄漏。我不明白怎么会有泄漏的空间。此外，我不明白分析器如何在整个项目中如此有用，但却错过了这么简单的东西。

我的假设是分析器是正确的，我正在泄漏。但是怎么做？

```
+ (McFieldDefinition *) freeformFieldDefinition {
    return [[[McFieldDefinition alloc] initWithText:@"0201FFM100"] autorelease];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:11:58.923

很抱歉发布这个问题。我终于在这里找到了答案： [https](https://stackoverflow.com/a/15668026/300986) ://stackoverflow.com/a/15668026/300986 。

问题出在我的 init 方法中：

```
- (id) initWithText:(NSString *)text {
    if (!text) return nil;
    if ([text length] < 7) return nil;
    self = [self init];
    if (self) {
        // do stuff
    }
    return self;
} 
```

如果我不喜欢 text 变量，那两个保护子句将返回 nil。到那时，self 已经被分配了，所以它是 Analyzer 1，bmauter 0。

这是我的新版本：

```
- (id) initWithText:(NSString *)text {
    self = [self init];
    if (!self) return nil;

    if (!text || [text length] < 7) {
        [self release];
        return nil;
    }

    // do stuff

    return self;
} 
```

# android - 更改 Facebook SDK 3.0 登录按钮图像

> ID：16039057
> 
> 赞同：1
> 
> 时间：2013-04-16T13:56:26.943
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

我正在将 facebook SDK 3.0 集成到我的应用程序中，我已将 facebook 登录按钮添加到可能的布局中，有人可以帮助我如何使用我的自定义图像更改 facebook 登录按钮

```
<LinearLayout android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:background="#FFF"
              android:id="@+id/main_ui_container">
    <com.facebook.widget.LoginButton
            android:id="@+id/login_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dp"
            facebook:confirm_logout="false"
            facebook:fetch_user_info="true"
            />
<LinearLayout/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:18:30.077

我是否正确理解您添加了 Facebook 自己的自定义 FacebookLoginButton 视图？

如果是这种情况，那么构造函数`FacebookLoginButton(final Context context, final AttributeSet attrs)`将被布局充气器调用，它引用了 facebook 库的 R 文件——不好。

因此，如果您想自定义该按钮超出 facebook sdk 中公开的按钮，我已经成功地将视图类 - FacebookLoginButton.java - 复制到我自己的项目中（您可能需要修改 FacebookLoginButton.java 以确保一切正确引用回 facebook 库）。连同它，将该构造函数引用的*所有资源复制到您**自己的*项目中。不用说，您现在需要确保复制的类中的所有内容现在都引用您的项目资源。

最后，您当然需要将布局文件中的按钮类更改为您自己项目中复制的 FacebookLoginButton 的完全限定类名。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T17:45:35.590

您可以自定义按钮的这些元素：

```
<declare-styleable name="com_facebook_login_view">
    <attr name="confirm_logout" format="boolean"/>
    <attr name="fetch_user_info" format="boolean"/>
    <attr name="login_text" format="string"/>
    <attr name="logout_text" format="string"/>
</declare-styleable> 
```

在 xml 中使用这些属性。您还可以定义样式并更改与按钮相关的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T17:12:22.817

您应该能够在布局中为 LoginButton 指定 android:background。

请参阅 Friend Smash 示例，该示例为 LoginButton 使用自定义背景。

[https://github.com/fbsamples/android-friend-smash](https://github.com/fbsamples/android-friend-smash)

# extjs - 表单提交不回调

> ID：16039058
> 
> 赞同：2
> 
> 时间：2013-04-16T13:56:28.317
> 
> 标签：extjs, extjs4, extjs4.2

我有一个标准提交的表格。

```
var formDettaglio = new Ext.form.FormPanel({

    title: 'Dettaglio richiesta',
    renderTo: 'divDettaglio',
    url: '/supporto/gestioneDettaglio',
    standardSubmit: true,
    width: '100%',
    forceFit: true,
    layout: {
        type: 'vbox',
        align: 'stretch'
    },
    defaults: {
        border: false
    },
    margin: '0 0 15 0',
    items: [{
            layout: {
                type: 'hbox',
                align: 'stretch'
            },
            margin: '0 10 5 10',
            items: [{
                    xtype: 'combo',
                    fieldLabel: 'Prodotto/Servizio',
                    labelWidth: 100,
                    width: 450,
                    queryMode: 'local',
                    name: 'cbAssets',
                    store: storeAssets,
                    displayField: 'valore',
                    valueField: 'codice'
                }, {
                    flex: 1,
                    xtype: 'label',
                    text: ' '
                }, {
                    xtype: 'textfield',
                    fieldLabel: 'Data chiusura prev.',
                    labelAlign: 'right',
                    labelWidth: 120,
                    width: 250,
                    name: 'textDataPrevista',
                    readOnly: true
                }, {
                    xtype: 'textfield',
                    fieldLabel: 'Stato',
                    labelAlign: 'right',
                    labelWidth: 50,
                    width: 150,
                    name: 'textStato'
                }
            ]
        }, {
            xtype: 'textarea',
            fieldLabel: 'Motivo richiesta',
            labelWidth: 100,
            height: 150,
            margin: '0 10 5 10',
            name: 'textMotivo'
        }
    ],
    dockedItems: [{
            xtype: 'toolbar',
            padding: '2 0 2 0',
            dock: 'bottom',
            ui: 'footer',
            items: [{
                    xtype: 'tbfill'
                }, {
                    xtype: 'button',
                    text: 'Salva',
                    style: "width:100px; height:25px;",
                    handler: function () {
                        if (formDettaglio.getForm().isValid()) {
                            formDettaglio.getForm().submit({
                                params: {
                                    azione: 'SALVA'
                                },
                                success: function (form, action) {
                                    alert('ok');
                                },
                                failure: function (form, action) {
                                    alert('ko');
                                }
                            });
                        } else {
                            alert('Errore!');
                        }
                    }]
            }]
    }); 
```

我调用的函数，`/supporto/gestioneDettaglio`发送一个 json 响应 `{"success":true}`

但是我的成功功能没有启动。我也尝试在萤火虫上使用断点：没办法。我回到一个空白页面，上面写着这句话......`{"success":true}`

我究竟做错了什么？我像在我的应用程序中发送任何其他响应一样发送 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:52:14.593

您已`standardSubmit`设置为 true。如果您想使用回调功能进行 ajax 提交，您需要将该`standardSubmit`属性设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:06:25.013

解决了“standardSubmit：false”在提交点击时，我打电话

```
Ext.Ajax.request({ url: '/supporto/gestioneDettaglio', 
    params: {azione: 'SALVA'},
    jsonData: { }, 
    form: 'formDettaglio', 
    method:'POST', 
    success: function(response, opts) { alert("successfull"); }, 
    failure:function(res,opt) { alert("request failed"); }
}); 
```

我不明白为什么没有“jsonData：{}”的Ajax请求没有传递参数......但没关系。谢谢！

# java - 如何在同一个 jframe 中管理多个面板？

> ID：16039061
> 
> 赞同：1
> 
> 时间：2013-04-16T13:56:36.023
> 
> 标签：java, swing, user-interface, jframe, jpanel

我正在开发一款游戏作为大学工作，我有一个完全自主的面板来处理游戏的所有过程，但我想添加一个菜单，允许选择不同的级别和难度，这就是问题所在。我只有一个框架，所以我必须在其中管理两个面板。如何更换面板？我读过一些关于 CardLayout 的东西，但我不知道它是否是我真正需要的。我正在测试添加和删除面板，但它不能正常工作。我该怎么做？

**编辑**我认为问题是没有删除以前的面板，所以添加/删除方式不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:10:03.807

> `CardLayout`，但我不知道它是否是我真正需要的。..

是的。

> 我正在测试添加和删除面板，但它不能正常工作。

[请问有没有](https://stackoverflow.com/a/6989230/714968)，为什么[要模拟 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

# android - onKeyDown 在 View 上的按键上没有被调用

> ID：16039065
> 
> 赞同：2
> 
> 时间：2013-04-16T13:56:47.383
> 
> 标签：android, view

我有一个包含两个视图的活动。一个视图覆盖 onDraw，并正确处理 onTouchEvent。但是当我试图为第二个视图检索 onKeyDown 时，它什么也没给我。相反，当我按下后退按钮或任何其他键盘按钮时会调用 onKeyDown。这是在模拟器中测试的。

我想为我的第二个视图检索 onKeyDown，这是一个扩展 LinearLayout 的自定义键盘视图类，我该怎么做呢？我已经尝试过 setFocusable(true) 和 setFocusableInTouchMode(true)，但这不起作用。我也试过 mySecondView.bringToFront()，也没有成功。

任何帮助，将不胜感激。

编辑 - 尝试将 onClickListener 添加到主要活动中的第二个视图。没有被叫到。

```
public class TrialActivity extends Activity{
 @Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    Log.d(TRIALTAG,"Inside on create");
    setContentView(R.layout.trial_activity);
    keypadView = findViewById(R.id.keypad); 
    selNumber = 0;
    keypadView.bringToFront();
    keypadView.setFocusable(true);    //NOT WORKING
    keypadView.setFocusableInTouchMode(true);    //NOT WORKING
    keypadView.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // NOT WORKING
            Log.d(TRIALTAG,"Inside on click on the keypad");
        }
    });
}

public class TrialView extends View{
@Override
public boolean onTouchEvent(MotionEvent event){  //IS GETTING CALLED
    if(event.getAction() == MotionEvent.ACTION_DOWN)
    {
        selX = (int)event.getX();
        selY = (int)event.getY();
        Log.d(TTAG,"Touch X : " + selX + " Touch Y : " + selY);
        getRect(selX, selY);
    }
    return true;
}
....
}

public class CustomKeyPad extends LinearLayout{
@Override
public boolean onKeyDown(int keyCode, KeyEvent event){
    Log.d(KTAG, "Inside keypad on key down");  //NOT GETTING CALLED
    switch(keyCode){
    case KeyEvent.KEYCODE_1:selectedNumber = 1;
                            isNumberSelected = true;
                            break;
    default:selectedNumber = 0;
            isNumberSelected = false;
            break;
    }
    if(isNumberSelected == true){
        Log.d(KTAG, "Is selected is true calling update puzzle");
        trialActivity.updatePuzzle(selectedNumber);
    }
    return true;
} 
```

编辑 2 - 在我的 CustomKeypad 视图类上放置 setOnTouchListener 后，我发现单击此视图中的任何按钮都会导致调用 TrialBoard 视图类的 onTouchEvent()，但单击键周围的任何位置，但在 CustomKeypad 视图中实际上在我的主要活动中触发了 onTouchListener...我不知道为什么会这样...:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:53:24.737

尝试在扩展 LinearLayout 的自定义键盘类中覆盖 OnKeyDown 方法

```
public class YourCustomKeypadLinearLayout extends LinearLayout {

public YourCustomKeypadLinearLayout(Context context) {
    super(context);

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if( keyCode == YourKeyCode ){
        //do sth 
    }
    else{           
        return super.onKeyDown(keyCode, event);
    }

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:57:39.313

触摸事件可能被消耗，你应该尝试返回false，或者调用超类方法，当触摸事件没有被处理时。

```
public boolean onTouchEvent(MotionEvent event){  //IS GETTING CALLED
  if(event.getAction() == MotionEvent.ACTION_DOWN){
    selX = (int)event.getX();
    selY = (int)event.getY();
    Log.d(TTAG,"Touch X : " + selX + " Touch Y : " + selY);
    getRect(selX, selY);
    return true;
  } else {
    return super.onTouchEvent(event);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:27:48.827

如果您实现 onTouchEvent，它会覆盖其他用户交互界面。所以如果你实现它，你需要编写自己的事件。

# html - 为什么我在 HTML 中的“hr”显示有一个额外的半像素？

> ID：16039067
> 
> 赞同：3
> 
> 时间：2013-04-16T13:56:50.997
> 
> 标签：html, css

它只是一个标准的 HTML 'hr' 标签，但该行显示有一个奇怪的额外像素。我唯一的 CSS 是：

```
hr {margin:0%;line-height: 100%;} 
```

显然我没有足够的代表来包含问题的图像，所以你必须离开我的描述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:00:21.900

使用 height 属性而不是 line-height 属性，这应该可以解决您的问题。以下是有关样式化 hr 标签的一些附加信息。[跨浏览器小时样式](http://css-tricks.com/snippets/css/cross-browser-hr-styling/)

它现在在评论中，但这是对他有用的修复程序。hr {边界：无；边框顶部：1px #CCCCCC 实心；高度：1px；}

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T14:01:09.353

HR 在大多数浏览器中使用阴影。您应该使用 css 或类似的东西覆盖样式：

`<hr noshade size="1" />`

更新：noshade 已弃用...见[http://www.electrictoolbox.com/style-html-hr-tag-css/](http://www.electrictoolbox.com/style-html-hr-tag-css/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T14:10:30.907

**解决方案：**

```
hr {
    border: none;
    background-color: #000;
    color: #000;
    height: 1px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-02T15:48:47.457

一个 hr 标签只是呈现为一个 1px 高的空元素，边框样式为 inset（将 hr 的高度更改几个像素以了解我的意思）。由于嵌入边框的渲染方式，额外的像素位于左侧。如果添加：

```
hr { border-left: none; } 
```

...然后您可以在没有额外像素的情况下保持默认 hr 的插图外观。将边框样式设为纯色，或将其设为黑色背景色可能会使您的 hr 太暗。我更喜欢上述方法的微妙之处。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T14:10:41.827

使用 CSS 的跨浏览器解决方案：

```
hr { height: 1px; background-color: #000; border: 0 none; } 
```

[如何更改 <hr> 标签的厚度](https://stackoverflow.com/questions/4151743/how-i-change-the-thickness-of-my-hr-tag)

jsFiddle：

[http://jsfiddle.net/6nXaN/](http://jsfiddle.net/6nXaN/)

# android - 我的操作栏标题从主题中采用了错误的颜色

> ID：16039071
> 
> 赞同：1
> 
> 时间：2013-04-16T13:57:13.470
> 
> 标签：android, android-actionbar, android-theme

我正在尝试为我的应用程序修改主题。我已经能够成功地为我的应用程序设置背景颜色，以及我的操作栏的背景颜色。

不幸的是，操作栏中项目的背景颜色采用了应用程序的背景颜色，而不是操作栏的背景颜色。

这是我的来自 styles.xml 的代码

```
<!--
    Base application theme for API 11+. This theme completely replaces
    AppBaseTheme from res/values/styles.xml on API 11+ devices.
-->
<style name="AppBaseTheme" parent="android:Theme.Holo.Light">
</style>

<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="android:background">#ff0000</item>
</style>

<style name="MyActionBar" parent="@android:style/Widget.Holo.Light.ActionBar">
    <item name="android:background">#fefefe</item>
</style> 
```

这是正在发生的事情的屏幕截图。

![奇怪的bg颜色截图](https://i.stack.imgur.com/KQFWl.png)

希望我在这里错过了一些愚蠢的东西......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:00:32.023

我很确定您的主题背景已应用于*所有内容*。相反，您只希望活动的背景是那种颜色。因此，您应该为活动设置它，而不是在主题中设置背景颜色。如果您有许多将使用此背景颜色的活动，则为您的活动创建一种样式并将其应用于每个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T15:44:55.517

尝试使用：

```
<item name="android:windowBackground">@color/your_color</item>
<item name="android:colorBackground">@color/your_color</item> 
```

为我工作。

# android - 虽然 Make sign APK of Google map (Failed to load map could not contact Google servers) 这个错误发生了

> ID：16039072
> 
> 赞同：2
> 
> 时间：2013-04-16T13:57:15.207
> 
> 标签：android, google-maps, google-maps-api-2

在我的应用程序中，我将实现 Google Maps 示例

然而：

1.  当我直接运行应用程序时，地图将完美运行
2.  虽然我可以制作签名 apk（制作密钥存储文件并与密钥存储 Apk 相关），但地图将不起作用

对于这个问题，我尝试了很多想法，比如

1.  创建与包相关的我的应用程序的另一个和另一个 API KEY
2.  在 Android Manifest File 中添加额外的权限（最新的 Manifest 权限如下）

有人可以帮忙吗？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".CountryRequirement" >

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.MapFragment" />

</RelativeLayout> 
```

我的 XML 布局包含这个
我给予谷歌地图示例中需要的所有权限

我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.Infoware.GuideBook3"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="14" />

    <permission
        android:name="org.Infoware.GuideBook3.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="org.Infoware.GuideBook3.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/icon_72"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name="org.Infoware.GuideBook3.GuideBook3"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
              <activity android:name=".CountryRequirement" >
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyCRZ_GAcbSqWDgghfSJ26HcPmS0kXB6a5s" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T10:14:14.777

**制作 Google Map API 版本 2 的步骤**

1）为您的签名密钥创建 SHA-1。

用于签署应用程序的 Eclipse 调试密钥可以在 userhome/.android/debug.keystore 文件中找到。例如）C:\Users\nil pc43.android\debug.keystore

```
 ----->  C:\Program Files\Java\jdk1.7.0_01\bin\keytool.exe -v -list -alias androiddebugkey -keystore "C:\Users\Info 1234\.android\debug.keystore" -storepass     
android -keypass android

    Example)
        C:\Program Files\Java\jdk1.7.0_01\bin>keytool.exe -v -list -alias androiddebugkey -keystore "c:\Users\nil pc43\.android\deb
        ug.keystore" -storepass android -keypass android
        Alias name: androiddebugkey
        Creation date: Apr 4, 2013
        Entry type: PrivateKeyEntry
        Certificate chain length: 1
        Certificate[1]:
        Owner: CN=Android Debug, O=Android, C=US
        Issuer: CN=Android Debug, O=Android, C=US
        Serial number: 4a5b5c6d
                Valid from: Thu Apr 04 18:33:13 IST 2013 until: Sat Mar 28 18:33:13 IST 2043
        Certificate fingerprints:
                 MD5:  51:CE:5C:07:05:31:98:6A:D5:7C:24:B1:B3:EC:22:A3
                 SHA1: B2:68:A7:D6:3A:FC:8F:15:8D:3E:1F:4A:E8:99:CE:8D:F5:28:07:4D
                 SHA256: 5B:5B:FE:7B:92:7F:06:53:1E:28:BB:D0:E5:CB:05:46:B0:81:76:CC:61:87:97:FA:19:68:B6:C1:08:E8:D6:D9
                 Signature algorithm name: SHA256withRSA
                 Version: 3 
```

**2)在 Google APIs 控制台注册**

```
-----> https://code.google.com/apis/console/
     ----> Go to Services 
Then Activate(ON) the Google Maps Android API v2\. 
```

**3）为您的应用程序创建密钥**

```
-----> sELECT  API ACCESS
    **You need later to register your application via its package in this console together
    with the SHA-1 fingerprint of your signature key. For this you  select the entry and
    click on the API Access entry. Afterwards click on the Create new Android key...entry.**

-----> Click on "Create New Android KEY"
-----> Enter your SHA-1 fingerprint and the package of your application separated by a semicolon. 

       For example you can use the com.example.mymaps package. (your SHA-1 key;package Name) 
```

**4）根据以下链接更改您的 Manifist.xml 和 JAVA 文件**

```
-----> please Reffer this Link
http://www.vogella.com/articles/AndroidGoogleMaps/article.html 
```

**5) 现在为您的项目创建新的 KeyStore 文件和 APK 文件。**

```
----->C:\Program Files\Java\jdk1.7.0_01\bin>keytool -list -alias "your alias name" -keystore  "path that have keystor file of yor application"
    Enter keystore password: <pasword of your keystore>
    mapExample, Apr 18, 2013, PrivateKeyEntry,
    Certificate fingerprint (SHA1): 71:EF:B0:6A:A8:BG:E5:61:E9:23:D0:F2:1E:9D:D0:6F:A4:70:0F:A9

-----> Now you have new SHA-1 KEY 
-----> With this SHA-1 KEY, Follow the Step no 4 
```

**6）现在您将获得新的谷歌地图 API KEY**

```
Now use this key in to Manifeast.xml file (AS SHOWN IN STEM NO 4)

<meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="NEW GOOGLE MAP API KEY" /> 
```

**7）现在使用现有的密钥库创建您应用程序的新 APK 文件。**

# javascript - 更新嵌套的 $scope 数组时，Angular.js 视图不会更新

> ID：16039076
> 
> 赞同：12
> 
> 时间：2013-04-16T13:57:23.250
> 
> 标签：javascript, angularjs, angularjs-scope, angularjs-ng-repeat

添加评论时，我正在尝试使 angular.js 视图自行更新。我的代码如下：

```
<div class="comment clearfix" data-ng-repeat="comment in currentItem.comments" data-ng-class="{bubble: $first}" data-ng-instant>
    <div>
        <p>
            <span class="username">{{comment.user}}</span> {{comment.message}}
        </p>
        <p class="time">
            10 minutes ago
        </p>
    </div>
</div>
<div class="comment reply">
    <div class="row-fluid">
        <div class="span1">
            <img src="assets/img/samples/user2.jpg" alt="user2" />
        </div>
        <div class="span11">
            <textarea class="input-block-level addComment" type="text" placeholder="Reply…"></textarea>
        </div>
    </div>
</div> 
```

范围在输入时更新：

```
$('.addComment').keypress(function(e) {
    if(e.which == 10 || e.which == 13) {
        $scope.currentItem.comments.push({
            "user": "user3",
            "message": $(this).val()
        });
        console.debug("currentItem", $scope.currentItem);
    }
}); 
```

调试 $scope.currentItem 显示注释已添加到其中，但是视图不显示新注释。我怀疑 $scope 仅在其第一级被监视，这就是视图不更新的原因。是这样吗？如果是这样，我该如何解决？

解决方案：正如 Ajay 在下面的回答中建议的那样，我将数组 push 包装到 apply 函数中，如下所示：

```
var el=$(this);
$scope.$apply(function () {
     $scope.currentChallenge.comments.push({
         "user": $scope.currentUser,
         "message": el.val()
     });
}); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-16T14:12:13.127

修改代码以包裹在 scope.$apply 内，因为您正在修改角度范围之外的属性，您必须使用[scope.$apply()](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)来观察值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-25T13:40:47.103

使用 $scope.$parent.arrayObjet 来修改父变量而不是 $scope.arryaObject。它在我的情况下有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T03:11:54.827

我必须将表单放在与 ng-repeat 相同的 div 控制器中。我有两个独立的 div 控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-05T00:09:50.910

```
<div class="col-sm-12 col-lg-12">
            <div class="outer-container">
                <div class="inner-container">
                    <div class="table-header">
                        <form id="teamForm" name="teamForm">
                            <table class="table table-bordered">
                                <thead>

                                <!-- Grid header -->
                                <tbody data-ng-if="(allTeamMembers.length==0)">
                                    <tr>
                                        <td class="text-center height_33_p" colspan="15"> {{noResultFound}} </td>
                                    </tr>
                                </tbody>
                                <!-- Existing team member -->

                                <tbody data-ng-repeat="tm in teammemberDetailsArryobject|orderBy:orderByField:reverseSort" data-ng-form="innerForm_$index" data-ng-class="{'ng-submitted':innerForm_$index.$submitted}">
                                    <tr></tr>
                                    </tbody> 
```

在代码中，我正在删除一条记录并以编程方式添加新行，但所有行都显示在 ng-repeat 行中（包括已删除）

# java - 设计问题 Web 服务与 JMS

> ID：16039078
> 
> 赞同：0
> 
> 时间：2013-04-16T13:57:26.533
> 
> 标签：java, jsf-2, jms

我正在处理的项目（jsf Web 应用程序）使用 2 个 Web 服务来从网络中检索一些数据。

到目前为止，请求很小，因此等待 ws 响应的超时时间很短，但现在客户希望向请求中添加更多数据，这基本上会将每个 ws 的工作时间增加 30 分钟。

我在想在这种情况下使用 jms 而不是 ws

我想听听一些意见

是否有意义 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:33:23.707

转向异步处理看起来适合您的情况。如果以前调用的性质是事务性的，您还应该注意事务语义。

我强烈建议您在 Apache ActiveMQ 之上使用 Apache Camel。虽然后者是可更换的，但前者的功能是独一无二的。

进一步阅读：

[http://en.wikipedia.org/wiki/Apache_Camel](http://en.wikipedia.org/wiki/Apache_Camel)

[Apache Camel 到底是什么？](https://stackoverflow.com/questions/8845186/what-exactly-is-apache-camel)

[何时使用 Spring Integration 与 Camel？](https://stackoverflow.com/questions/3034054/when-to-use-spring-integration-vs-camel)

Apache Camel > 文档 > 组件 > Spring Web 服务：

[http://camel.apache.org/spring-web-services.html](http://camel.apache.org/spring-web-services.html)

# c# - c# mysql select with where条件

> ID：16039080
> 
> 赞同：0
> 
> 时间：2013-04-16T13:57:41.113
> 
> 标签：c#, mysql

WHERE status= 'โกดัง' “我试试这个它不起作用（它是 utf8（泰语）我需要在 C# 中设置一些东西以使其知道是 utf8 还是因为我不能使用 'โกดัง'

我使用 c# 和 mysql 代码一直有效，直到我在 String cmdText = "SELECT * FROM trackingbymail" 之前填写 WHERE status= 'โกดัง' ; 这行得通

```
String str = @"server=localhost;database=asianimport;userid=tga;password=se57ui849;";

String cmdText = "SELECT * FROM trackingbymail WHERE  status=  'โกดัง' ";
                MySqlCommand cmd = new MySqlCommand(cmdText, con);
                MySqlDataReader reader = cmd.ExecuteReader(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:21:14.270

1.  确保您的表数据库的排序规则是 UTF-8 排序规则（即`utf8_general_ci`或其关系之一）

2.  添加`Charset=utf8;`到您的连接字符串。

“服务器=本地主机；数据库=测试；Uid=测试；密码=测试；字符集=utf8；”

资料来源：[MySQL C# 文本编码问题](https://stackoverflow.com/questions/942277/mysql-c-sharp-text-encoding-problems)

无论如何，如果它无法解决，您可以存储字节而不是字符串。但可能这不是解决这个问题的最佳方法......

```
UTF8Encoding utf8 = new UTF8Encoding();
string unicodeString = "โกดัง";
byte[] encodedBytes = utf8.GetBytes(unicodeString); 
```

然后当你需要时，你可以回到字符串：

```
Encoding.UTF8.GetString(encodedBytes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:24:31.040

您应该将源代码文件保存为 UTF-8。

你试过这个吗？

# c# - 如何获取域控制器的时间？

> ID：16039087
> 
> 赞同：2
> 
> 时间：2013-04-16T13:57:57.740
> 
> 标签：c#, active-directory

我正在使用此代码，但我收到错误

> system.directoryservices.activedirectory.directorycontext 不包含目标的定义

```
using System.DirectoryServices.ActiveDirectory;

static void FindAnyTimeServer(DirectoryContext context)
{
    try
    {
        DomainController dc = DomainController.FindOne(context, LocatorOptions.TimeServerRequired);
        Console.WriteLine("A time server for {0} is {1}.", context.Target, dc.Name);
    }
    catch (ActiveDirectoryObjectNotFoundException)
    {
        Console.WriteLine("No time server was found in {0}.", context.Target);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:26:06.627

尝试这个 ：

```
 DirectoryContext context = new
    DirectoryContext(DirectoryContextType.DirectoryServer, "insert_domain_controller_name_here");
    DomainController dc =
    DomainController.GetDomainController(context);
    DateTime dt = dc.CurrentTime;
    MessageBox.Show("Domain Time is " +dt.ToLongTimeString()); 
```

根据您的要求：

```
static void FindAnyTimeServer(DirectoryContext context)
    {
        try
        {
            DomainController dc = DomainController.GetDomainController(context);
            DateTime dt = dc.CurrentTime;
            Console.WriteLine("A time server for {0} is {1}.", context.Name, dt);           
        }
        catch (ActiveDirectoryObjectNotFoundException)
        {
            Console.WriteLine("No time server was found in {0}.", context.Name);
        }

    } 
```

# xml - 用属性值填充列表并使用 xpath 比较来自 xsl 的另一个属性值

> ID：16039089
> 
> 赞同：0
> 
> 时间：2013-04-16T13:58:00.953
> 
> 标签：xml, xslt, xpath

我的 XML 是：

```
<root>
<emps>
<emp id="1" name="alpha" city="tt" />
<emp id="2" name="beta" city="pp" />
<emp id="3" name="gamma" city="tt" />
</emps>
</root> 
```

我想用 city='tt' 的所有员工填写组合列表

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:33:03.930

```
 <select>
 <xsl:for-each select="root/emps/emp[@city='tt']">                                                                                                                                      

        <option >                                                                                                                                                                                                                       

   <xsl:value-of select="@name"/>                                                                                                                                        

       </option> 
        </xsl:for-each>
        </select> 
```

这是关于属性选择的查询的答案。

# c# - 我如何从字符串创建 Lambda 表达式

> ID：16039090
> 
> 赞同：2
> 
> 时间：2013-04-16T13:58:02.653
> 
> 标签：c#, string

我有一个字符串表达式喜欢（这将是一个字符串）

```
"Func<int, string> myfunc = (var1 => (var1 == 0 ? 'ok' : var1 == 1 ? 'Running' : 'Fals'));" 
```

我想将此表达式转换为有效的 lambda 表达式

```
Func<int, string> myfunc = (var1 => (var1 == 0 ? "ok" : var1 == 1 ? "Running" : "Fals")); 
```

我如何将我的字符串表达式解析为 lambda

**更新**

我想我只想通过 . 而且我认为这`string.Romove()`很好（任何其他方式都会欣赏）。但我不知道如何删除它？任何人帮助我

**新更新：**

我的实际工作是将 c# 语言代码转换为 vb.net 语言代码等。用户输入了类似字符串格式的代码。所以我想将字符串更改为 c# 代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T14:31:04.290

[您应该能够使用Roslyn](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)来回将 C# 代码转换为 VB.NET 。它附带了一个示例项目，展示了如何在这两种语言之间进行转换。

该示例称为“粘贴为 C#/VB”。它的代码将使您了解解决任务所需的交互。更准确地说，您要查找的代码位于项目`Converting`目录`CSharpToVisualBasicConverter`和`VisualBasicToCSharpConverter`项目目录中。如果您有足够的时间深入研究，那么该代码是一本不错的读物。

作为注释，Roslyn 项目目前仅实现 C# 和 VB.NET 编译器，因此不会有“等语言”，因此您需要编写另一个语法树访问器和一个手写转换器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T15:34:53.557

我不确定我是否理解这个问题，但我会试一试。

使用您的示例字符串，假设您只想删除前导和尾随双引号：

```
var vbString = "\"Func<int, string> myfunc = (var1 => (var1 == 0 ? 'ok' : var1 == 1 ? 'Running' : 'Fals'));\"";
var csString = vbString.Substring(1, vbString.Length - 2); 
```

如果您还想用双引号替换单引号：

```
var vbString = "\"Func<int, string> myfunc = (var1 => (var1 == 0 ? 'ok' : var1 == 1 ? 'Running' : 'Fals'));\"";
var csString = vbString.Substring(1, vbString.Length - 2).Replace("'", "\""); 
```

您还可以在剥离字符串之前确保将字符串括在双引号中：

```
var vbString = "\"Func<int, string> myfunc = (var1 => (var1 == 0 ? 'ok' : var1 == 1 ? 'Running' : 'Fals'));\"";
var csString = vbString.StartsWith("\"") && vbString.EndsWith("\"") ? vbString.Substring(1, vbString.Length - 2).Replace("'", "\"") : vbString.Replace("'", "\""); 
```

# python - 系统地遍历 numpy 数组中的每个数字

> ID：16039092
> 
> 赞同：0
> 
> 时间：2013-04-16T13:58:08.810
> 
> 标签：python, arrays, numpy, python-imaging-library

我有一个 500x500 数组，我正在尝试编写一个名为“坐标”的变量，它将挑选出每个值，然后将其应用于函数，但我不断得到输出，

```
AttributeError                            Traceback (most recent call last)
/home/graham/<ipython-input-17-cc6ce0649eda> in <module>()
     31                         pass
     32 
---> 33 finished_array = rand_array_color(rand_array)
     34 
     35 finished_image = Image.fromarray(finished_array)

/home/graham/<ipython-input-17-cc6ce0649eda> in rand_array_color(rand_array)
     23         from PIL import Image
     24         for ii in numpy.nditer(rand_array):
---> 25                 coordinate = tuple(map(int, rand_image[ii,:]))
     26                 if ii < 128:
     27                         print "false"

/usr/lib/python2.7/dist-packages/PIL/Image.pyc in __getattr__(self, name)
    510             new['data'] = self.tostring()
    511             return new
--> 512         raise AttributeError(name)
    513 
    514     ##

AttributeError: __getitem__ 
```

这是我的代码

```
from PIL import Image
from numpy import random

im = Image.open('/home/graham/Desktop/Experiment/gwarner/labeled_photos/photos/003030.png')

rand_array = numpy.random.randint(255, size=(500,500)).astype('uint8')

rand_image = Image.fromarray(rand_array)

def rand_array_color(rand_array):
    from PIL import Image
    for ii in numpy.nditer(rand_array):
        coordinate = tuple(map(int, rand_image[ii,:]))
        if ii < 128:
            newvalue = rand_image.putpixel(coordinate(a,ii), im.getpixel(coordinate(a,ii)))
            return newvalue
        else:
            pass

finished_array = rand_array_color(rand_array) 
```

我也一直在摆弄另一个版本的坐标，

```
coordinate = tuple(int(rand_array[ii,0]),int(rand_array[ii,1]) 
```

但它只是返回，

```
NameError: name 'ii' is not defined 
```

谁能告诉我如何解决其中一个问题或推荐另一种可行的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:05:43.977

您无法使用`ii`第 th 行的原因是因为它是一个 PIL Image 对象，并且没有数组所具有的相同索引访问。如果你想得到第 th 行，你必须使用（我已经省略了尾随冒号不是必需的）`rand_image``rand_image[ii,:]``rand_image``ii``rand_array[ii]``,:`

这似乎与您的类似

> 另一个版本的`coordinate`

这应该可以工作，因为您使用的是数组而不是图像。我的猜测是，您没有在与第一个版本*完全相同*`for ii in ...`的位置替换它，可能在循环之外的某个地方，因为`ii`仅在该循环中正确定义。

* * *

正如您所定义的，它`coordinate`不是一个函数，它是一个长度为 2 的元组。但是当您编写`coordinate(a, ii)`. 相反，您可能只想在`coordinate`那里使用（我不确定`a`应该是什么。

* * *

该函数`.putpixel`不返回任何内容，因此当您说：

```
newvalue = rand_image.putpixel(...) 
```

`newvalue`将是`None`（python中的“空”对象）。也许你想这样做：

```
rand_image.putpixel(...)
return rand_image 
```

不设置`newvalue`并尝试返回它，而是更改像素中的像素`rand_image`并返回新的`rand_image`.

* * *

作为旁注，您不应该调用`int()`numpy 数组，相反，如果您希望数组中每个元素的类型为`int`，您应该`.astype`像上面那样使用，或者`int`首先将其作为 an 启动。一旦它作为`int`.

* * *

*最后一点，使用numpy* （不使用纯 python 循环）可能会更快地完成此过程，但我不确定您到底要做什么。如果您编辑您的问题以解释您正在尝试做什么，以便我可以在某些上下文中阅读代码，我可以提供帮助。例如，`a`该行应该是什么`newvalue = ...`？

# sql - 在条件和显示数据中使用 MAX() 函数的 SQL 查询

> ID：16039100
> 
> 赞同：1
> 
> 时间：2013-04-16T13:58:29.623
> 
> 标签：sql, select, max

我有一个数据表，其中有`LCNo (string)`, `AmmendmentNo (string)`。我想检索`AmmendmentNo`相应的最高行`LCNo`

例如：

> LCNO (123,123,123,123) AmendmentNo (0,1,2,3)

我想要具有 LCNo: 123 和 AmendmentNo: 3 的行

```
select * from LCTable where LCNo= '12147001' AND MAX(AmendmentNo); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:01:10.640

为此，请使用`limit`或`top`类似的东西：

```
select *
from LCTable
where  LCNo= '12147001'
order by AmendmentNo desc
limit 1 
```

在 SQL Server 中，这将使用`top`：

```
select top 1 *
from LCTable
where  LCNo= '12147001'
order by AmendmentNo desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:59:49.610

使用`GROUP BY`条款。这将给你所有`LCNo`最高的`AmendmentNo`。

```
SELECT LCNo, MAX(AmendmentNo) AmendmentNo
FROM   LCTable
GROUP  BY LCNo 
```

但如果你想要一个特定的 t `LCNo`，你可以简单地在下面使用。请记住，使用下面的查询只能得到一个`LCNo`。

```
SELECT LCNo, MAX(AmendmentNo) AmendmentNo
FROM   LCTable
WHERE  LCNo = '12147001' 
```

# android - 我怎样才能让我的后退按钮工作类似于设备后退按钮 android

> ID：16039106
> 
> 赞同：1
> 
> 时间：2013-04-16T13:58:51.930
> 
> 标签：android

我目前已经实现了如下所示的后退按钮

```
<Button
                android:id="@+id/back"
                style="@style/NavButtons"
                android:layout_width="wrap_content"
                android:layout_height="30dp"
                android:layout_alignParentLeft="true"
                android:layout_centerHorizontal="true"
                android:layout_centerVertical="true"
                android:layout_marginLeft="5dp"
                android:background="@drawable/back"
                android:onClick="finishActivity"
                android:paddingLeft="5dp" /> 
```

在我正在做的代码中

```
public void finishActivity(View v) {
        finish();
    } 
```

但是我实现的后退按钮与设备后退按钮不起作用。我应该让我的后退按钮实现类似于设备后退按钮的工作？

谢谢：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:00:17.360

你可以使用这个：

```
super.onbackpressed(); 
```

如果您想以编程方式执行与设备后退按钮相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:00:50.360

```
public void finishActivity(View v) {
        onBackPressed();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:05:12.967

请参阅 android 开发者网站以获取活动堆栈

[http://developer.android.com/design/patterns/app-structure.html](http://developer.android.com/design/patterns/app-structure.html) [http://developer.android.com/design/patterns/navigation.html](http://developer.android.com/design/patterns/navigation.html)

# nhibernate - Fluent Nhibernate Cascade.None() 导致 HasOne 外键关系不被持久化

> ID：16039108
> 
> 赞同：0
> 
> 时间：2013-04-16T13:58:53.260
> 
> 标签：nhibernate, cascade

我在使用 Cascade.None() 为我的一个实体保持 HasOne 关系时遇到问题。我的域模型涉及下面列出的 4 个类。

```
public class Project 
{
   public virtual int Id {get;set;}
   public virtual IList<ProjectRole> Team { get; protected set; }
}

public class ProjectRole
{
    public virtual int Id { get; set; }
    public virtual User User { get; set; }
    public virtual Role Role { get; set; }
}

public class Role
{
    public virtual int Id { get; set; }
    public virtual string Value { get; set; }
}

public class User
{
    public virtual int Id { get; protected set; }
    public virtual string LoginName { get; set; }
} 
```

所以基本上我们有项目，其中有一个来自 Team 属性的 ProjectRoles 列表。每个 ProjectRole 将用户链接到他们在该项目中扮演的特定角色。

我正在尝试为这些实体设置以下级联关系。

```
project.HasMany<ProjectRoles>(p=> p.Team).Cascade.All()
projectRole.HasOne<Role>(r => r.Role).Cascade.None()
projectRole.HasOne<User>(r => r.User).Cascade.SaveUpdate() 
```

我已经使用流利的 nhibernate 覆盖来设置上述级联，但我发现这条线

```
projectRole.HasOne<Role>(r => r.Role).Cascade.None() 
```

导致 ProjectRole.Role 属性未保存到数据库中。我已经诊断出这是查看 Nhibernate 生成的 SQL，我可以看到 ProjectRoles 表中的“Role_id”列从未在更新或插入时设置。

我也尝试过使用

```
projectRole.HasOne<Role>(r => r.Role).Cascade.SaveUpdate() 
```

但这也失败了。不幸的是，离开它 Cascade.All() 不是一个选项，因为当我尝试删除项目角色时，这会导致系统删除角色对象。

知道如何为 ProjectRole-> Role 关系设置 Cascade.None() 而不会破坏持久性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:07:14.113

`HasOne`是一种罕见的一对一关系。您想使用`References`来声明一对多关系的一侧。对您的域模型进行一些假设，映射应如下所示：

```
project.HasMany<ProjectRoles>(p=> p.Team).Inverse().Cascade.AllDeleteOrphan()
projectRole.References<Role>(r => r.Role);
projectRole.References<User>(r => r.User); 
```

另请参阅有关和之间的区别的[问题](https://stackoverflow.com/questions/1622007/what-are-the-differences-between-hasone-and-references-in-nhibernate)。`HasOne``References`

# c# - 将文件加载/流式传输到缓冲区/缓冲区中

> ID：16039110
> 
> 赞同：0
> 
> 时间：2013-04-16T13:59:05.127
> 
> 标签：c#, buffer, filestream, streamreader, seek

几天来，我一直在尝试分块加载文件，以允许用户使用非常大 (GB) 的文件并仍然保持程序的速度。目前我有以下代码：

```
using (FileStream filereader = new FileStream(filename, FileMode.Open, FileAccess.Read))
  {
    using (StreamReader reader = new StreamReader(filereader))
    {
      while (toRead > 0 && (bytesread = reader.Read(buffer, offset, toRead)) > 0)
      {
        toRead -= bytesread;
        offset += bytesread;
      }

      if (toRead > 0) throw new EndOfStreamException();

      foreach (var item in buffer)
      {
        temporary = temporary += item.ToString();
      }
      temporary.Replace("\n", "\n" + System.Environment.NewLine); 
```

以下是避免任何混淆的声明（希望如此）：

```
 const int Max_Buffer = 5000;
  char[] buffer = new char[Max_Buffer];
  int bytesread;
  int toRead = 5000;
  int offset = 0; 
```

目前程序读取文本文件的 5000 个字节，然后将这些字节处理成一个字符串，然后我将其传递给 stringreader，这样我就可以获取我想要的信息。

我目前的问题是缓冲区可以在一行中途停止，所以当我在 stringreader 类中获取数据时，它会引发索引/长度错误。

我需要知道如何在数组中回溯以找到表示行开头的特定字符集，然后仅返回该点之前的数据以处理字符串。

对回溯问题进行排序后的另一个问题是我将如何保留我不想处理的数据并引入更多数据来填充缓冲区。

我希望这能得到很好的解释，我知道我有时会感到困惑，希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:21:37.547

我建议在你的循环中使用**reader.ReadLine()**而不是**reader.Read()**

```
buffer=reader.ReadLine();
bytesread = buffer.Length*2;//Each charcter is unicode and equal to 2 bytes 
```

然后您可以检查（toRead - bytesread）是否<0。

# silverlight - Silverlight 5 DataGrid 合并单元格

> ID：16039113
> 
> 赞同：1
> 
> 时间：2013-04-16T13:59:07.567
> 
> 标签：silverlight, silverlight-5.0

我需要跨多行合并单元格。类似于单元格上的 RowSpan 的东西。这是因为我在网格中有两列。第 1 列可以具有与第 1 列中的值相关的重复值。我想将第 1 列中的值合并为第 2 列中的所有行只出现一次。

有没有办法在 Silverlight 5 中的 DataGrid 上实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T17:29:00.987

我很抱歉这么说，但大多数 Silverlight 网格不支持单元格合并。至少不是开箱即用。为了实现这一点，我已经求助于使用 Component One studio for Silverlight 来实现这一点，即便如此，它也不是在公园里散步。

考虑 C1 数据网格控件。这是一个[将网格行和列标题](http://our.componentone.com/2012/01/27/styling-merged-column-row-header-cells-in-sl-datagrid/)与示例代码和一个小文章合并的示例。这种解决方案的缺点是 C1 的控件非常昂贵 :( 我希望微软在 SL5 中提出一些增强功能来解决这些问题。

# .net - Ironpython 子类化 .NET 类

> ID：16039118
> 
> 赞同：4
> 
> 时间：2013-04-16T13:59:16.023
> 
> 标签：.net, ironpython, subclassing

我正在尝试将 IronPython 中的 .NET RoutedUICommand 子类化。只要我不将任何参数传递给**init**函数，我就可以做到这一点。一旦我这样做，我就会得到一个 ArgumentTypeException Instance() 最多需要 5 个参数（给定 2 个）。我读过有一个 .overloads 字典，但我如何在**init**函数上使用它？这是我的代码：

```
class R(RoutedUICommand):
def __init__(self, win,*args, **kwargs):
    super(R, self).__init__(*args, **kwargs)
    self.win = win

    self.keyGesture = KeyGesture(Key.X,ModifierKeys.Control)
    self.Exit = RoutedUICommand('E_xit','Exit',clr.GetClrType(RoutedUICommand),InputGestureCollection([self.keyGesture]))
    self.ebinding = CommandBinding(self.Exit,self.ExitExecute,self.ExitCanExecute)
    self.win.CommandBindings.Add(self.ebinding)

r = R(win) 
```

RoutedUICommand 具有三个重载。如何使用 .overloads 将我自己的参数添加到我的类中？

如果我尝试实现**新**功能：

```
def __new__(self,win):
    return super(R,self).__new__(self) 
```

我收到 MissingMemberException：对象没有属性“ExitExecute”

有没有人可以遵循一些想法？

编辑：

我发现了如何做到这一点：

```
def __new__(self,win,*args,**kwargs):
    return super(R,self).__new__(self,*args,**kwargs) 
```

成功了。

# java - 阅读 Ms Word 中的单词并将其替换为新单词（使用 JAVA）

> ID：16039120
> 
> 赞同：0
> 
> 时间：2013-04-16T13:59:22.090
> 
> 标签：java, jakarta-ee, ms-word, ms-office, jacob

我正在编写一个程序来从 Microsoft Office Word 文档中读取一些文本或文本字段，并使用 Jacob 将其替换为新词。我从这个链接[http://tech-junki.blogspot.de/2009/06/java-jacob-edit-ms-word.html](http://tech-junki.blogspot.de/2009/06/java-jacob-edit-ms-word.html)得到了帮助，但它没有用。你能告诉我如何阅读一些文本并用新文本替换它吗？如果你有更好的主意，请告诉我。

笔记：

1-这种方法没有给我任何错误，但找不到具体的词！

2- 我怎样才能写一个 If() 来知道我们请求的搜索文本（在这个方法 arrayKeyString 中）是否存在或者是用 ms 字写的？

谢谢。

```
 import com.jacob.activeX.ActiveXComponent;
    import com.jacob.com.Dispatch;

    //class
    ActiveXComponent oWord = null;
    Dispatch documents = null;
    Dispatch document = null;
    Dispatch selection = null;

    //method
    oWord = new ActiveXComponent("Word.Application");
    documents = oWord.getProperty("Documents").toDispatch();
    document = Dispatch.call(documents, "Open",   finalName).toDispatch();
    Dispatch selections = oWord.getProperty("Selection").toDispatch();
    Dispatch findT = Dispatch.call(selections, "Find").toDispatch();

    //hm is a Hashmap 
    for (int i=0; i<hm.size();i++){
       hm.get(array[i].toString());
       String arrayValString = (arrayVal[i].toString());
       String arrayKeyString = array[i].toString();
       // Here we should write an if() to check for our key word:
       Dispatch.put(findT, "Text", arrayKeyString); 
       Dispatch.call(findT, "Execute"); 
       Dispatch.put(selections, "Text", arrayValString);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-16T16:34:17.863

I know it is probably a little bit too late for my answer, but i'll leave this here, for all the others who will find this page.

This is how i've done this:

```
private static final Variant MATCH_CASE = new Variant(true);
private static final Variant MATCH_WILDCARDS = new Variant(false);
private static final Variant FORWARD = new Variant(true);
private static final Variant MATCH_WHOLE_WORD = new Variant(false);
private static final Variant MATCH_SOUNDS_LIKE = new Variant(false);
private static final Variant MATCH_ALL_WORD_FORMS = new Variant(false);
private static final Variant FORMAT = new Variant(false);

private static final Variant WRAP = new Variant(1);
private static final Variant REPLACE = new Variant(2);    

//...........

Dispatch selection = Dispatch.get(oleComponent,"Selection").toDispatch();
Dispatch oFind = Dispatch.call(selection, "Find").toDispatch();

for (Entry<String, String> entry : replacements.entrySet()) {

 while (replaced) {
     Variant variant = Dispatch.invoke(oFind,"Execute",Dispatch.Method, new Object[] {entry.getKey(),MATCH_CASE, MATCH_WHOLE_WORD,MATCH_WILDCARDS, MATCH_SOUNDS_LIKE, MATCH_ALL_WORD_FORMS,FORWARD, WRAP, FORMAT, entry.getValue(), new Variant(true), REPLACE }, new int[1]);

   replaced = variant.getBoolean();
 }
} 
```

This code goes throug the whole map and replaces for each element ALL of the occurrences in the word Document.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:26:31.433

好的，我还修改了您的 for 循环，它有逻辑错误，据我所知，如果您尝试替换文档中哈希图中的所有单词，则不需要 if 语句：

```
//hm is a Hashmap 
for (int i=0; i<hm.size();i++){
   //you were getting the value to be replaced but not storing that in arrayValString object
   String arrayValString = hm.get(array[i].toString());
   String arrayKeyString = array[i].toString();
   // Here we should write an if() to check for our key word:
   //if you want to replace all the text in your hash map in the word document then you don't need a if condition ...so if the text is not present in the document nothing will be replaced.

   Dispatch.put(findT, "Text", arrayKeyString); 
   Dispatch.call(findT, "Execute"); 
   Dispatch.put(selections, "Text", arrayValString);
} 
```

# r - 从 R 中的并行 sapply 中设置矩阵行中的值

> ID：16039138
> 
> 赞同：3
> 
> 时间：2013-04-16T13:59:54.770
> 
> 标签：r, global-variables, apply

我有一个矩阵（origmatrix），我想在其上每列执行一个函数。我想把这个函数的结果放到另一个矩阵（newmatrix）中，这一行的行号对应于原始矩阵中的列号。在真实数据集中有 20000 行具有复杂功能，所以我想使用一种类型的 apply 以便能够并行化项目。有没有办法让我从应用程序中获取数据到 newmatrix 中？任何帮助将不胜感激！

```
origmatrix = matrix(1:50, 10, 5)
colnames(origmatrix) = letters[1:5]
newmatrix = matrix(0, 5,2)
colnames(newmatrix) = c("Identifier","mean")

boertje = function (x){
  newlist[which(colnames(origmatrix)==x),2]= mean(origmatrix[,x])
}
sapply(colnames(origmatrix), boertje) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:27:44.577

使用多核版本怎么样`lapply`，`parallel:::mclapply`取决于`multicore:::mclapply`你的平台，然后从结果中制作一个数据框？当您返回多个值时，您可以创建一个数据框，如下所示：

```
require(parallel)
res <- mclapply( 1:ncol(origmatrix) , mc.cores = 1 , function(x){ c( mean( origmatrix[,x] ) , sd( origmatrix[,x] ) , var( origmatrix[,x] ) ) } )

# So the first element of the resulting list looks like
 res[[1]]
  # [1] 5.500000 3.027650 9.166667

df <- as.data.frame( res )
rownames(df) <- c("mean","sd","var")
colnames(df) <- colnames(origmatrix)
#               a         b         c         d         e
#   mean 5.500000 15.500000 25.500000 35.500000 45.500000
#   sd   3.027650  3.027650  3.027650  3.027650  3.027650
#   var  9.166667  9.166667  9.166667  9.166667  9.166667 
```

`mclapply`虽然在帮助页面中确实带有此警告...

> **警告**
> 强烈建议不要在 GUI 或嵌入式环境中使用这些功能，因为它会导致多个进程共享同一个 GUI，这可能会导致混乱（并可能导致崩溃）。子进程不应该使用屏幕上的图形设备。

# regex - 从字符串中提取分辨率

> ID：16039144
> 
> 赞同：0
> 
> 时间：2013-04-16T14:00:05.423
> 
> 标签：regex, linux, sed, awk

我有以下字符串

```
流 #0:0(eng)：视频：h264（约束基线）（avc1 / 0x31637661）、yuv420p、1280x720 [SAR 1:1 DAR 16:9]、5238 kb/s、29.97 fps、29.97 tbr、30k tbn、 58 待定

```

我尝试提取`1280x720`，

我用了

```
sed -r 's/.+([0-9]{3,5})x([0-9]{3,5}).+/\1x\2/' 
```

但它只会返回`280x720`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:03:09.110

grep 可能会有所帮助：

```
grep -Po '\d{3,5}x\d{3,5}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:29:55.537

这不是那么简洁，但它的作用 [远](http://ffmpeg.org/ffprobe.html) 不止维度。

```
$ eval $(ffprobe -v 0 -show_streams -print_format flat=h=0:s=_ foo.mp4)

$ echo $stream_0_width
1280

$ echo $stream_0_height
720 
```

# java - 如何确保新学生的 id 是唯一的

> ID：16039146
> 
> 赞同：-1
> 
> 时间：2013-04-16T14:00:13.893
> 
> 标签：java, io, hashmap, hashset, bluej

我已经阅读了一个将 id 设置为未知的文件，并且我为每个学生创建了一个 uniqe id，然后我将其写入文件，例如，如果创建 Student 并将其添加到列表（HashMap）中。我如何确定为新学生分配的 id 尚未分配给文件 Student_data.txt 中的学生之一？我如何确保新学生的 id 不在包含旧添加到 hashMap 的学生的 txt 文件中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:07:41.297

为什么不从学生姓名或其他字段中创建一个 SHA-1 并将其用作键？

```
static HashFunction hashFunction = Hashing.sha1();
public static byte[] getHash(final String name) {
  HashCode hashCode = hashFunction.newHasher().putBytes(name.getBytes).hash();
  return hashCode.asBytes();
} 
```

我使用谷歌库来做到这一点，你也可以使用`MessageDigest`，但它不是线程安全的。

读取哈希

```
System.out.println("Hash is: " + new String(Hex.encodeHex(hashInByte))); 
```

输出将是这样的：

```
Hash is: ff56b9948d201ee37605e101e01f63aab97b5e4a 
```

# android - 可以感知 Android 上的强制关闭错误吗？

> ID：16039148
> 
> 赞同：1
> 
> 时间：2013-04-16T14:00:19.613
> 
> 标签：android, forceclose

应用程序或服务是否可以感知手机上的任何应用程序是否已强制关闭？如果是这样，这将如何实施？如果不是，为什么？有没有可能的解决方法？

# c# - C# 获取/设置解决方案

> ID：16039150
> 
> 赞同：-1
> 
> 时间：2013-04-16T14:00:25.817
> 
> 标签：c#, class, get, set

为了提供一些背景知识，我正在尝试解决涉及扑克手的 Project Euler[问题 54 。](https://projecteuler.net/problem=54)尽管有无限的方法。我想做的是枚举字符串列表，例如：{“8C”、“TS”、“KC”、“9H”、“4S”};

我想为每个相应的字符串“获取”一个具有属性值和套装的类卡实例。我还没有使用get/set，所以也许有一个我缺少的明显方法。

最终我想要一个卡片类型的对象列表，我不介意提前构建所有卡片，例如“2H”返回一个卡片类型的实例，其中套装 = 红心，值 = 2。

我知道这段代码是错误的，但它应该让我知道我正在尝试做什么。任何建议，将不胜感激。

```
class Card
{
    public string suit;
    public int value;
    public string cardname
    {
        get 
        { 
            if (cardname == "2H") Card TwoH = new Card();
                TwoH.suit = "Hearts"
                TwoH.value = 2;
                return TwoH; 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:07:24.447

为什么不创建一个基于字符串参数填充西装和值的构造函数

```
public Card(string name)
{
    switch(name)
    {
        case "2H":
            this.suit = "Hearts";
            this.value = 2;
            break;
        //...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:22:47.740

这可能不是您似乎要求的确切解决方案，但如果您将获得的值（例如 2H、3C 等）都是 2 个字符长，那么您可以试试这个：

```
public class Card
{
    public string suit { get; set; }
    public int value { get; set; }

    public static Card GetCard(string cardName)
    {
        string tmpSuit;
        int tmpValue;
        char[] cardNameParts = cardName.ToCharArray();
        switch(charNameParts[0])
        {
            case "A":
                tmpValue = 1;
                break;
            case "2":
                tmpValue = 2;
                break;
            ...
        }

        switch(charNameParts[1])
        {
            case "H":
                tmpSuit= "Hearts";
                break;
            case "C":
                tmpSuit= "Clubs";
                break;
            ...
        }
        return new Card() { suit = tmpSuit, value = tmpValue };
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:07:34.423

我会这样做：

```
public class Card
{
    public string Suit { get; set; }
    public int Value { get; set; }

    public static Card FromString(string s)
    {
        if (s == "2H") return new Card() { Suit = "Hearts", Value = 2 };
        else if (s == "....")
        ...
        else return null;
    }
} 
```

我已经将你的`suit`and`value`字段转换为属性，而不是一些在你的情况下不起作用的 getter 方法，我添加了一个静态方法。

你可以像这样使用它`Card card2H = Card.FromString("2H");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:20:46.917

也许使用两个`switch`语句，首先

```
switch (cardname[0])
{
    ...
} 
```

然后

```
switch (cardname[1])
{
    ...
} 
```

在此之前，请检查`cardname.Length == 2`. 在 each`switch`中，有一个`default`部分可以抛出异常，以防该`char`值没有意义。

# node.js - Google Translate API 总是返回“必需参数：q”作为错误

> ID：16039166
> 
> 赞同：2
> 
> 时间：2013-04-16T14:00:55.817
> 
> 标签：node.js, google-api, google-translate

我已经使用 Google Translate API 一段时间了，没有任何问题。我最近将我的应用程序推送到我的新服务器上，即使它在我的本地服务器上运行良好，相同的源代码总是给我“必需参数：q”作为错误消息。

我正在使用 NodeJS + ExpressJS + Request 来发送这个请求。这是我的测试用例：

```
 var request = require('request');
  request.post({
    url: "https://www.googleapis.com/language/translate/v2",
    headers: {"X-HTTP-Method-Override": "GET"},
    form: {
      key: /* My Google API server key */,
      target: "en",
      q: ["Mon premier essai", "Mon second essai"]
    }
  }, function(error, response, data) {
    if (!error && response.statusCode == 200) {
      console.log("everything works fine");
    } else {
      console.log("something went wrong")
    }
  }); 
```

在我的本地机器上运行让我“一切正常”，在我的服务器上运行它让我“出了点问题”。深入研究它，我收到上面提到的错误消息。如您所见，我试图在一个请求中翻译两句话。这只是一个测试用例，但我确实需要通过 POST 请求来使用它，而不是执行两个 GET 请求。

我不知道这是怎么回事，我仔细检查了我的谷歌设置，我找不到那里有什么问题。此外，在我的服务器上使用具有相同 api 密钥的 Google Places APi 也没有问题。

**我被困住了。有人知道这里有什么问题吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T14:49:30.270

好吧，我终于发现了问题所在：新版本的**RequestJS**不能像旧版本那样工作，而我的服务器运行的是 2.16，而我的本地机器运行的是 2.14。

不同之处在于数组的发送方式。我调试了旧版本正在发送

> key=my_api_key&target=en&q=Mon%20premier%20essai&q=Mon%20second%20essai

新版本发送时

> key=my_api_key&target=en&q[0]=Mon%20premier%20essai&q[1]=Mon%20second%20essai

所以我现在只是在我的 package.json 文件中添加了 2.14.x 而不是 2.x，希望它会很快得到修复——或者它可能不是一个错误？我不知道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-24T18:49:52.623

这个答案有点晚了，但可以帮助人们解决这个问题。问题来自于查询字符串模块转换数组参数的方式：

[https://github.com/visionmedia/node-querystring](https://github.com/visionmedia/node-querystring)

其函数 qs.stringify 将具有数组值的字段名（在给定示例中为 q）转换为以下格式：

q[0]=..q[1]=...

这不是错误，而是预期的功能。要在不恢复到旧版本的请求模块的情况下克服此问题，您需要使用 body 选项而不是 form 选项手动创建帖子。您还需要使用此方法手动添加内容类型标头：

```
var request = require('request');
request.request({
    url: "https://www.googleapis.com/language/translate/v2",
    headers: {
        "X-HTTP-Method-Override": "GET",
        'content-type':'application/x-www-form-urlencoded; charset=utf-8'
    },
    body:'key=xxxx&target=en&q=q=Mon%20premier%20essai&q=Mon%20second%20essai'
}, function(error, response, data) {
    if (!error && response.statusCode == 200) {
        console.log("everything works fine");
    } else {
        console.log("something went wrong")
    }
}); 
```

显然这不是很干净，但是您可以轻松地创建一个实用函数，以您希望的方式从对象创建正文字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T00:35:08.723

突然出现在我脑海中的事情：

*   服务器和本地PC上的jquery文件版本不一样
*   文件编码问题（服务器上 PC ascii 上的 UTF8？）
*   您是否尝试在打开开发者工具的情况下使用 chrome 对其进行测试，然后检查“网络选项卡”并准确验证发送给 Google 的内容。

至少对我来说，当它在一台机器上而不是另一台机器上工作时，通常是由于前两个选项。

祝你好运！

# java - 使用 Joda Time 模拟 PHP 日期计算

> ID：16039169
> 
> 赞同：2
> 
> 时间：2013-04-16T14:00:59.360
> 
> 标签：java, php, jodatime

我正在使用[Joda Time 库](http://joda-time.sourceforge.net)从 LocalDate 中减去一个月：

```
LocalDate date = new LocalDate(2013, 3, 31);
System.out.println(date.minusMonths(1)); 
```

结果是 2013 年 2 月 28 日，这是我直观地期望的结果，也记录在[API](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalDate.html#minusMonths%28int%29)中：

> 如果减去月份使月份中的某日无效，则将其调整为该月的最后一个有效日期。

但是，在我当前的项目中，我需要与一些现有的 PHP 代码兼容，如下所示：

```
$date = new \DateTime('2013-03-31');
echo $date->sub(new \DateInterval('P1M'))->format('Y-m-d'); 
```

这里的结果是 2013-03-03，即“滚动”到下个月。

如何使用 Joda Time 实现相同的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:14:54.283

PHP seems to subtract the number of days it finds in the previous month. This should do it with Joda:

```
LocalDate date = new LocalDate(2013, 3, 31);
int numberOfDays = date.minusMonths(1).dayOfMonth().getMaximumValue();
System.out.println(date.minusDays(numberOfDays)); 
```

# javascript - 使用此代码可以实现什么？

> ID：16039171
> 
> 赞同：2
> 
> 时间：2013-04-16T14:01:01.260
> 
> 标签：javascript, map, html-table, easeljs, createjs

我目前正在开发一款塔防游戏，目前正在实施不同的塔。而且我正在寻找一种设置预定义值的方法，例如配置文件，我可以在构建时为不同的塔提取不同的值。

我一直在搜索，发现了一些看起来像这样的代码：

```
var  building_attributes  =  {
        "Wall" :  {
            Damage :  0 ,
            RANGe :  0
            speed :  0
            bullet_speed :  0
            life :  100 ,
            Shield :  500 ,
            cost :  5
        }
 }; 
```

如果我实现了这一点，我该如何访问不同的值？或者也许有人可以很好地解决我的问题。

所有答案都非常受欢迎。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:03:12.717

例如，访问`life`：

```
var life = building_attributes.Wall.life;
//live === 100 
```

`building_attributes`是一个包含一个对象的变量，具有一个`Wall`属性。`Wall`属性是另一个具有属性的对象。对象的属性可以通过[点符号、括号符号或两者的组合来](https://stackoverflow.com/q/4968406/575527)访问。

如果你学过数据结构课程，这种组织数据的结构称为*树*。当一条数据有子节点时，它可以是数据或子树。这些子树还可以包含数据，或子树等。

# ios - 用于内部分发的自过期企业应用程序？

> ID：16039172
> 
> 赞同：0
> 
> 时间：2013-04-16T14:01:04.223
> 
> 标签：ios, ios6

我一直在四处寻找，无法确定这是否可能。有人请求创建一个具有“30 天后到期的自到期配置文件”的 IPA。这还有可能吗？

当我尝试在会员中心创建配置文件时，它没有给我设置到期时间的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:36:18.363

If you want the device to stop working after a certain amount of time:

```
#define BEGIN_DATE @"BEGIN_DATE"

    if(![[NSUserDefaults standardUserDefaults] objectForKey:BEGIN_DATE])
    {
        [[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:BEGIN_DATE];
    };

    if ([[NSDate date] timeIntervalSinceDate:[[NSUserDefaults standardUserDefaults] objectForKey:BEGIN_DATE]] > 2592000)
    {
        *(long*)0 = 0xDEADBEEF;
    } 
```

2592000 is one month in seconds.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:13:51.063

> 具有“在 30 天内到期的自到期配置文件”的 IPA。

显而易见的解决方案是保存应用程序首次启动的日期，每次应用程序启动（或进入前台等）时检查该日期，如果启动日期超过 30 天，则拒绝执行任何操作当前时间。

这种方法的问题是用户总是可以删除并重新安装应用程序，从而重置时钟。为了解决这个问题，您需要将该设备的首次启动日期保存在用户删除应用程序时不会被删除的地方。这可能意味着将首次发布日期和一些设备标识符发送到您的服务器。它不是万无一失的——用户总是可以关闭你的网络访问，这样你就不能用你的服务器签入——但这可能就足够了。

下一个问题是选择一种识别设备（或用户）的方法。UDID 似乎是一个显而易见的选择，但它已被弃用，并且可能在未来的某个时候消失。UDID 有许多替代品，但大多数仍然违反了禁止使用 UDID 的精神。由于无论如何您都需要使用服务器，您可能需要考虑让用户在服务器上创建一个帐户（当然是通过应用程序），以便开始时间与用户帐户而不是设备相关联。

最后，您应该知道，这类事情会阻止您的应用在 App Store 中获得批准。应用程序不应在演示期到期后停止工作。我知道你说这是一个企业应用程序，但如果是这样的话，你很难理解为什么你仍然需要这种功能。同样，您可以通过使功能依赖于服务器上的用户帐户来解决此问题——在这种情况下，您可以暂停或终止用户帐户以切断访问权限，而不是让应用程序拒绝工作。

如果您希望应用程序在构建应用程序后的一段时间后过期，这是一个更简单的问题。只需将构建日期（或到期日期）存储在应用程序的某些资源中，并定期检查当前日期。

# parameters - 使用相对路径通过vbs脚本参数将参数从bat发送到bat

> ID：16039179
> 
> 赞同：1
> 
> 时间：2013-04-16T14:01:21.413
> 
> 标签：parameters, vbscript, batch-file

运行时`lookatbat.bat`，我收到一个错误，表示`file1WithSpaces.txt`未找到文件 ()。我曾尝试在此论坛中使用此修复程序，但即使使用此代码，我也会收到相同的错误。

这是一段`lookatbat.bat`，它使用相对路径调用 VBScript。

```
cscript process.vbs /x:"Temp\file1WithSpaces.txt" /y:"Temp\file2WithSpaces.txt" 
```

`process.vbs`调用 bat 文件 ( `InprocessVbs.bat`)，该文件使用`process.vbs`.

`process.vbs`有很多说明，这里有一个有用的部分：

```
dim param1: param1=Wscript.Arguments.Named("x")
dim param2: param2=Wscript.Arguments.Named("y")
msgbox param1 
shell.run "InprocessVbs.bat """ & param1 & """ ""file.txt""" 
```

`msgbox param1`弹出**Temp\file1WithSpaces.txt**，但我认为`param1`没有正确检索到`InprocessVbs.bat`.

谢谢你的帮助！

`InprocessVbs.bat`：

```
echo %2
echo %3
echo %4
Set arg1=%1
echo %arg1%
cscript anomyze.vbs %1>spec%1
more +2 %1|findstr /n /I /r /b /C:""^R.*=001>result.out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:04:53.377

试试下面的代码

```
strCMD = "InprocessVbs.bat "&chr(34) & param1 & chr(34)&" file.txt"
shell.run strCMD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T17:59:35.017

该路径被认为是相对于当前工作目录的，因此请检查工作目录是什么（在 VBScript 和从中调用的批处理脚本中），并验证给定的相对路径是否存在于该工作目录下方。

检查 VBScript 中的工作目录：

```
WScript.Echo CreateObject("WScript.Shell").CurrentDirectory 
```

批量检查工作目录：

```
echo %CD% 
```

* * *

**编辑：**通常最好从参数中删除双引号并根据需要将它们添加到脚本中。试试这个：

```
cscript anomyze.vbs "%~f1">"spec%~1" 
```

您可以通过以下方式验证文件是否存在：

```
if exist "%~f1" (
  cscript anomyze.vbs "%~f1">"spec%~1"
) else (
  echo "%~f1" doesn't exist!
) 
```

`findstr`还要检查正则表达式周围的双引号。在您的评论中，该部分如下所示：

```
/C:""^R.*=001 
```

什么时候应该是这样的：

```
/C:"^R.*=001" 
```

# django - 在管理面板中使单实例项目可编辑

> ID：16039183
> 
> 赞同：0
> 
> 时间：2013-04-16T14:01:27.623
> 
> 标签：django, django-admin

我有一些项目列表和一般描述的页面；所有这些都应该可以通过管理面板访问。

也许我可以创建这样的模型：

```
class MyPage(models.Model):  
    general_desc = models.TextField()  

class Items(models.Model):
    Page = models.ForeignKey(MyPage)
    description = models.TextField()
    image = ImageField() 
```

创建一个 MyPage 记录，然后以某种方式使 MyPage 的添加/删除操作在管理面板中无法访问？

或者他是一个更聪明的方式？

# jscript - 禁用/启用输入字段

> ID：16039187
> 
> 赞同：0
> 
> 时间：2013-04-16T14:01:36.590
> 
> 标签：jscript

使用此示例代码，我正在尝试启用/禁用“arrdatfrom”字段。但是，一旦禁用此文本字段，我就无法重新启用它。当用户单击“刷新”按钮时，将执行以下功能。我建立了这个小演示只是为了证明我已经尝试了很多方法来做到这一点。有任何想法吗？

```
function showBooking() {
    var d = new Date()
    formvals.arrdatefrom    = document.getElementById("arrdatfrom").value
    formvals.arrdatethru    = document.getElementById("arrdatthru").value
    formvals.depdatefrom    = document.getElementById("depdatfrom").value
    formvals.depdatethru    = document.getElementById("depdatthru").value
    formvals.bookname       = document.getElementById("bookname").value
    formvals.peakroomfrom   = document.getElementById("peakroomfrom").value
    formvals.peakroomthru   = document.getElementById("peakroomthru").value
    formvals.peakattendfrom = document.getElementById("peakattendfrom").value
    formvals.peakattendthru = document.getElementById("peakattendthru").value

    alert (' ngs.hta  ready to enable')
    document.getElementById("arrdatfrom").enabled = 'true'

    alert ('ngs.hta in showBooking!!  disable.  ')
    document.getElementById("arrdatfrom").disabled = 'true'
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:08:08.420

没有财产`.enabled`。要重新启用禁用的元素，请设置`.disabled = false`.

# javascript - 使用 jQuery 仅将表 ID 添加到父表

> ID：16039199
> 
> 赞同：0
> 
> 时间：2013-04-16T14:02:34.893
> 
> 标签：javascript, jquery

我有这个页面：

```
<html>
<head>
<body text="#000000" marginwidth="0" marginheight="0" bgcolor="#FFFFFF" onload="" topmargin="0" leftmargin="0">
<style type="text/css">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center" style="page-break-after:always;">
<table width="100%" cellspacing="0" cellpadding="0" align="center">
</body>
</html> 
```

我需要为每个父表添加唯一的 ID。问题是，这些表中的每一个都有许多嵌套表。我只需要为显示的每个添加 ID。我该怎么做？我试过了：

```
jQuery("table").each(function(count){
    var count = count + 1;
    jQuery(this).attr("id","table"+count+"");
}); 
```

但这会为所有表添加唯一 ID，甚至是嵌套表。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:06:25.733

如果我理解得很好，您可以简单地定位父`table`元素（即那些是 的直接后代`body`），如下所示：

```
$('body > table').each(function(i) {
    $(this).prop('id', 'table'+(i + 1));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:05:57.120

```
jQuery("body > table").each(function(count){
var count = count + 1;
jQuery(this).attr("id","table"+count+"");
}); 
```

这将选择身体的直接子（表），我相信它应该对你有用

# android - 带有背景颜色的自定义按钮

> ID：16039202
> 
> 赞同：2
> 
> 时间：2013-04-16T14:02:39.827
> 
> 标签：android, button, custom-component

我想在屏幕顶部创建四个自定义按钮（在 iOS 中作为 Roundedrects）。

使用带有形状标签的自定义 xml，我可以得到它。

自定义.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
android:shape="rectangle">
<solid android:color="#F9FAFC" />
<corners android:radius = "20dp"/>
</shape> 
```

我将其用作：

```
android:background = "@drawable/custom" 
```

但是我只得到了所有按钮的自定义 xml 中设置的颜色（灰色），这不应该。

我想为该自定义按钮设置不同的 Hexa(#FF0000 ... ) 颜色。在对该站点进行大量研究之后，我认为提出一个问题会更好。

你们中的任何一个极客都可以指向链接或者请帮助我一些代码，如何实现上述要求。

**请注意：我不需要按钮的三种状态，即按下、聚焦、禁用。我已经有四个方形按钮。现在我想将它们创建为圆角矩形以使其看起来很有吸引力。至于这种情况，我无法在可绘制文件夹中为 4 个按钮创建 4 个自定义文件。因为将来我的要求可能会扩展到大约 8-10 个按钮甚至更多。***

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:11:40.720

您需要使用项目标签。这是一个包含按钮状态、纯色和渐变色、笔触、填充和角半径的示例。您需要将其放入选择器标签中。

```
<item android:state_enabled="false" >
    <shape>
        <solid
            android:color="#474141" />
        <stroke
            android:width="1dp"
            android:color="#474141" />
        <corners
            android:radius="3dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
</item>
<item android:state_pressed="true" >
    <shape>
        <solid
            android:color="#f3ae1b" />
        <stroke
            android:width="1dp"
            android:color="#f3ae1b" />
        <corners
            android:radius="3dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
</item>
<item>
    <shape>
        <gradient
            android:startColor="#990000"
            android:endColor="#990000"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#990000" />
        <corners
            android:radius="4dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
</item> 
```

# jquery - JQuery 中的 parsererror：如何获取无法解析的字符串？

> ID：16039205
> 
> 赞同：-1
> 
> 时间：2013-04-16T14:02:46.253
> 
> 标签：jquery, ajax, error-handling

当它不可解析时，我想从 http 正文中记录不可解析的字符串。我怎样才能得到它？

```
$.ajax({type: "POST", url: url})
          .done(function (data)
          {
              // Do stuff
          })
          .fail(function (jqXHR, textStatus, errorThrown)
          {
              if (textStatus === "parsererror")
              {
                  var rawBodyData = ?
                  console.log("Parsing failed: " + rawBodyData);
              }
          }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T07:25:52.883

原始响应字符串可以在这里找到：`jqXHR.responseText`

# android - 使用 Eclipse 在 Android 中动态地在另一个 XML 文档中添加 XML 文件内容

> ID：16039213
> 
> 赞同：1
> 
> 时间：2013-04-16T14:03:02.473
> 
> 标签：android, android-layout

我对 Android 开发非常陌生，我想动态地将一个页面添加到另一个页面。我是一名 C# Web 开发人员，并且想做与使用母版页并在此页面中插入其他页面相同的操作。

我目前拥有的代码如下：（请记住，我从来没有这样做过，任何建议都将不胜感激。）

我目前正在处理 3 个主要文档：Pharma Manifest.xml MainActivity.java fragment_main_dummy.xml（我正在使用虚拟对象，因为它已经在做我想要的。）

这是 MainActivity.xml 上的内容

```
package com.pharma.pharma;

import org.w3c.dom.Text;

import android.annotation.TargetApi;
import android.app.ActionBar;
import android.location.Address;
import android.os.Bundle;
import android.content.Context;
import android.os.Build;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.NavUtils;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class MainActivity extends FragmentActivity implements
        ActionBar.OnNavigationListener {

    /**
     * The serialization (saved instance state) Bundle key representing the
     * current dropdown position.
     */
    private static final String STATE_SELECTED_NAVIGATION_ITEM = "selected_navigation_item";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Set up the action bar to show a dropdown list.
        final ActionBar actionBar = getActionBar();
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);

        // Set up the dropdown list navigation in the action bar.
        actionBar.setListNavigationCallbacks(
        // Specify a SpinnerAdapter to populate the dropdown list.
                new ArrayAdapter<String>(getActionBarThemedContextCompat(),
                        android.R.layout.simple_list_item_1,
                        android.R.id.text1, new String[] {
                                getString(R.string.title_Dashboard),
                                getString(R.string.title_Customers),
                                getString(R.string.title_Products),
                                getString(R.string.title_Detailing),
                                getString(R.string.title_Appointments),
                                getString(R.string.title_Events), }), this);
    }

    /**
     * Backward-compatible version of {@link ActionBar#getThemedContext()} that
     * simply returns the {@link android.app.Activity} if
     * <code>getThemedContext</code> is unavailable.
     */
    @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
    private Context getActionBarThemedContextCompat() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            return getActionBar().getThemedContext();
        } else {
            return this;
        }
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        // Restore the previously serialized current dropdown position.
        if (savedInstanceState.containsKey(STATE_SELECTED_NAVIGATION_ITEM)) {
            getActionBar().setSelectedNavigationItem(
                    savedInstanceState.getInt(STATE_SELECTED_NAVIGATION_ITEM));
        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        // Serialize the current dropdown position.
        outState.putInt(STATE_SELECTED_NAVIGATION_ITEM, getActionBar()
                .getSelectedNavigationIndex());
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onNavigationItemSelected(int position, long id) {
        // When the given dropdown item is selected, show its contents in the
        // container view.
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
        fragment.setArguments(args);
        getSupportFragmentManager().beginTransaction()
                .replace(R.id.container, fragment).commit();
        return true;
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View rootView = inflater.inflate(R.layout.fragment_main_dummy, container, false);

            TextView dummyTextView = (TextView) rootView.findViewById(R.id.section_label);
            dummyTextView.setText(Integer.toString(getArguments().getInt(ARG_SECTION_NUMBER)));

            switch(getArguments().getInt(ARG_SECTION_NUMBER)){
            case 1:
                dummyTextView.setText("blah Blah Dashboard");
                break;
            case 2:
                dummyTextView.setText("blah Blah Customers");
                break;
            case 3:
                dummyTextView.setText("blah Blah Products");
                break;
            case 4:
                dummyTextView.setText("blah Blah Detailing");
                break;
            case 5:
                dummyTextView.setText("blah Blah Appointments");
                break;
            case 6:
                //Insert XML to fragment dummy here as a test
                break;
                default:
                    //throw error
            }
            return rootView;
        }
    }
} 
```

这是清单中的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.pharma.pharma"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.pharma.pharma.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

最后是 fragment_main_dummy.xml 的代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity$DummySectionFragment" >

    <TextView
        android:id="@+id/section_label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textIsSelectable="true" />

    <include
        android:id="@+id/section_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        layout="@layout/dashboard" />

</RelativeLayout> 
```

我已经坐了好几天了。

我还是新手，无法弄清楚。我也有压力在大约一个月的时间内完成整个项目。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:10:26.327

您可以使用 LayoutInflater 来做到这一点。

例如。

```
RelativeLayout relativeLayout= (RelativeLayout) findViewById(R.id.relativeLayout);

LayoutInflater layoutInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

relativeLayout.addView(childIndex, layoutInflater.inflate(R.layout.newLayoutToAdd, this, false) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:22:08.290

你的标题在概念上是错误的，你没有一个 XML 到另一个。这些 XML 在编译期间经过大量处理和预编译，并且在最终应用程序中不存在。

此外，这些 XML 只是系统要构建的表示，`Views`并且在`ViewGroups`其中是`extends View`您可以调用的类`.addView(view);`

您使用的`include`xml 代码是重用静态生成的 XML 的好方法，但对于动态生成的东西，您需要通过代码来完成。

我注意到你正在使用碎片的东西。所以可能你最好使用动态添加/删除东西的片段路由

您在其中创建的代码`onNavigationItemSelected`几乎是您动态更改内容所需要做的一切。

您正在创建/实例化的片段将覆盖`onCreateView`以膨胀新视图并返回它。该新视图将插入`android.R.id.content`（即整个内容的视图 ID）或您在 XML 中指定的任何 ID。

希望能帮助到你。

# mongodb - benchRun 带有投影的查询

> ID：16039217
> 
> 赞同：0
> 
> 时间：2013-04-16T14:03:10.083
> 
> 标签：mongodb, benchmarking

我想使用[benchRun](http://www.mongodb.org/about/contributors/js-benchmarking-harness/)对一些查询进行基准测试。但我没有看到[projection](http://docs.mongodb.org/manual/reference/method/db.collection.find/)的选项。

假设我想做以下查询`find({_id:1},{children:0})`，我该如何构建操作文档来反映这一点？或者在基准场景中投影没有意义吗？

文档说：

> **update**
> 更新对象（与 update() 函数的第二个参数相同）。

所以我想我可以做类似的事情：

```
ops = [
    {op: "find", ns: t.getFullName(), query: {_id:1}, update: {children:0}}
] 
```

它不会失败，但不确定它是否真的做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:22:31.623

有一个未记录的选项（实际上还有更多）称为`filter`. 有关更多信息，请参阅[GitHub src](https://github.com/mongodb/mongo/blob/master/src/mongo/scripting/bench.cpp#L436)。

解决方案：

```
ops = [
    {op: "find", ns: t.getFullName(), query: {_id:1}, filter: {children:0}}
] 
```

# javascript - 在 iOS Safari 中禁用选择上下文菜单

> ID：16039219
> 
> 赞同：5
> 
> 时间：2013-04-16T14:03:11.430
> 
> 标签：javascript, ios, safari, webkit

我想禁用在 iOS Safari（网络浏览器）中选择特定文本后出现的默认上下文菜单。那可能吗？

![上下文菜单销毁](https://i.stack.imgur.com/YjJJb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:57:25.697

有可能，请参阅[此示例](http://jsfiddle.net/z9ZNU/)。基本上，重要的部分是设置正确的 css 属性：

```
body { -webkit-touch-callout: none !important; }
a { -webkit-user-select: none !important; } 
```

另外，这是一个解决类似问题的[问题](https://stackoverflow.com/questions/12304012/preventing-default-context-menu-on-longpress-longclick-in-mobile-safari-ipad)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-05T07:42:10.827

我发现的唯一方法是删除选择并使用 javascript 再次选择。看看我的代码：

```
/* prevent ios edit-menu */
if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent)) {
    !function(){
        var target = document.body; // the element where the edit menue should be disabled

        var preventSelRecursion;
        document.addEventListener('selectionchange', function(e){
            var S = getSelection();
            if (!S.rangeCount) return;
            if (S.isCollapsed) return;
            var r = S.getRangeAt(0);
            if (!target.contains(r.commonAncestorContainer)) return;
            if (preventSelRecursion) return;
            iosSelMenuPrevent();
        }, false);

        var iosSelMenuPrevent = debounce(function(){
            var S = getSelection();
            var r = S.getRangeAt(0);
            preventSelRecursion = true;
            S = getSelection();
            S.removeAllRanges();
            setTimeout(function(){ // make remove-add-selection removes the menu
                S.addRange(r);
                setTimeout(function(){
                    preventSelRecursion = false;
                });
            },4);
        },800); // if no selectionchange during 800ms : remove the menu

        /* helper-function */
        function debounce(fn, delay) {
            var timer = null;
            return function () {
                var context = this, args = arguments;
                clearTimeout(timer);
                timer = setTimeout(function () {
                    fn.apply(context, args);
                }, delay);
            };
        }
    }();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T21:54:09.940

根据[移动Safari上的onclick块复制+粘贴？](https://stackoverflow.com/questions/7032710/onclick-blocks-copypaste-on-mobile-safari)，如果文本位于具有 onclick 事件的元素中，则不会显示上下文菜单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-08T12:43:43.093

受 Hans Gustavson 的回答启发，我在 TypeScript 中提出了一个更简单的解决方案：

```
function disableIosSafariCallout(this: Window, event: any) {
  const s = this.getSelection();
  if ((s?.rangeCount || 0) > 0) {
    const r = s?.getRangeAt(0);
    s?.removeAllRanges();
    setTimeout(() => {
      s?.addRange(r!);
    }, 50);
  }
}
document.ontouchend = disableIosSafariCallout.bind(window); 
```

此解决方案实际上是一种解决方法。当您选择文本时，您可能仍会看到文本选择标注显示，然后立即消失。我不确定汉斯·古斯塔夫森的回答是否有同样的缺陷......

# javascript - 循环遍历表格并根据选中的复选框更改背景

> ID：16039220
> 
> 赞同：1
> 
> 时间：2013-04-16T14:03:12.757
> 
> 标签：javascript, jquery, twitter-bootstrap, coffeescript

我有一个带有表格行的表格，其中包含 2 个复选框，一个在 类下`student_late`，另一个在`student_present`.

我希望它执行以下操作：

如果`student_present`仅选中该复选框，则通过添加“成功”类使表格行变为绿色。

如果`student_present`复选框和复选框都被选中`student_late`，则通过添加类“info”使表格行变黄。

如果未选中任何复选框，则通过添加“危险”类使表格变为红色。

这是我目前的 CoffeScript：

```
$(document).ready ->
  return $("tr .student_present").each(->
    if @checked
      $(this).closest("tr").addClass "success"
    else
      $(this).closest("tr").addClass "danger"
  )
  $("tr .student_late").each ->
    $(this).closest("tr").addClass "info"  if @checked 
```

或者对于那些更喜欢 JS 的人：

```
$(document).ready(function() {
  return $("tr .student_present").each(function() {
    if (this.checked) {
      return $(this).closest("tr").addClass("success");
    } else {
      return $(this).closest("tr").addClass("danger");
    }
  });
      return $("tr .student_late").each(function() {
        if (this.checked) {
      return $(this).closest("tr").addClass("info");
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:25:21.670

您不需要使用 return 来准备文件。这是您可以使用的代码。

```
$(function() {
    $('table tbody tr').each(function() {
       var $row = $(this);
       var late = $row.find('.student_late')[0].checked;
       var present = $row.find('.student_present')[0].checked;
        if(present && !late) {
            $row.addClass('success');
        } else if(present && late) {
            $row.addClass('info');    
        } else if(!present && !late) {
            $row.addClass('danger');    
        }
    });
}); 
```

$(function() 只是 $(document).ready(function() 的简写。这是代码工作的 JSfiddle。http: [//jsfiddle.net/5DUwr/](http://jsfiddle.net/5DUwr/)

如果您希望在单击复选框时更新它。使用此代码

```
$(function() {
    $('table tbody tr').each(function() {
       var $row = $(this);
       updateRow($row);
    });

    $('table tbody tr input[type="checkbox"]').click(function() {
       var $row = $(this).parents('tr');
       updateRow($row);
    });
});

function updateRow($row) {
       $row.removeClass('success danger info');
       var late = $row.find('.student_late')[0].checked;
       var present = $row.find('.student_present')[0].checked;
        if(present && !late) {
            $row.addClass('success');
        } else if(present && late) {
            $row.addClass('info');    
        } else if(!present && !late) {
            $row.addClass('danger');    
        }   
} 
```

这是小提琴[http://jsfiddle.net/5DUwr/4/](http://jsfiddle.net/5DUwr/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:16:28.053

you can add unique ids for your checkboxes i.e. 'chk_001' and eqivalent numbers in the ids of the tr/td tags. Then looping through the checkboxes your can grab the rows you want to change. When you use the same numbers in the tr/td ids (like tr_001 or td_001) you can set the desired classes/styles using getElementById wherever you find the checkbox checked.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:11:21.050

不是 100% 确定问题出在哪里，我刚刚复制了您的代码，它似乎工作正常（但显然我没有您的 HTML）... [http://jsfiddle.net/VWcXW/](http://jsfiddle.net/VWcXW/)

```
<table>
    <tr>
        <td><input type="checkbox" class="student_present"></input></td>
    </tr>
    <tr>
        <td><input type="checkbox" class="student_present" checked="checked"></input></td>
    </tr>
</table>

$(document).ready(function() {
  return $("tr .student_present").each(function() {
    if (this.checked) {
      return $(this).closest("tr").addClass("success");
    } else {
      return $(this).closest("tr").addClass("error");
    }
  });
      return $("tr .student_late").each(function() {
        if (this.checked) {
               return $(this).closest("tr").addClass("info");
        }
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:12:58.337

它对我来说很好：http: [//jsfiddle.net/Ba5qg/](http://jsfiddle.net/Ba5qg/)

我的意思是，它执行一次！更改背景颜色不是绑定单击事件...您可以更改为：

```
$("tr .student_present").on('click', function () {
    if ($(this).is(':checked')) {
        $(this).closest('tr').addClass('success');
        [...]
    }
}); 
```

小提琴代码：HTML

```
<table>
    <tr>
        <td>Paul</td>
        <td><input type='checkbox' name='student_present' class='student_present' checked /></td>
        <td><input type='checkbox' name='student_late' class='student_late' /></td>
    </tr>
    <tr>
        <td>John</td>
        <td><input type='checkbox' name='student_present' class='student_present' /></td>
        <td><input type='checkbox' name='student_late' class='student_late' checked /></td>
    </tr>
</table> 
```

CSS

```
.success {
    background: green;
}

.error {
    background: red;
}

.info {
    background: yellow;
} 
```

JS 你可以在这里删除你的退货声明！

```
$(document).ready(function() {
    $("tr .student_present").each(function() {
        if (this.checked) {
            return $(this).closest("tr").addClass("success");
        } else {
            return $(this).closest("tr").addClass("error");
        }
    });
    $("tr .student_late").each(function() {
        if (this.checked) {
            return $(this).closest("tr").addClass("info");
        }
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T14:24:38.400

我认为这可以更容易实现（[工作小提琴](http://jsfiddle.net/ZtbnZ/9/)）：

HTML

```
<table>
    <tr>
        <td><input class="student_present" type="checkbox" checked="checked">Present</td>
        <td><input class="student_late" type="checkbox">Late</td>
   </tr>
   <tr>
        <td><input class="student_present" type="checkbox">Present</td>
        <td><input class="student_late" type="checkbox" checked="checked">Late</td>
   </tr>
</table> 
```

CSS

```
.success {
    background: green;
}

.error {
    background: red;
}

.info{
    background: yellow;
} 
```

JS

```
$(document).ready(function() {
    $(".student_present").closest('tr').addClass('error');
    $(".student_present:checked").closest('tr').toggleClass('success error');
    $(".student_late:checked").closest('tr').addClass(function() {
        if($('.student_present', $(this).closest('tr')).is(':checked')) return 'info';
        else return '';
    });
}); 
```

# xcode - 使用 NSUserDefaults 时出现未定义符号错误

> ID：16039226
> 
> 赞同：1
> 
> 时间：2013-04-16T14:03:30.390
> 
> 标签：xcode, armv7

我在我的项目中使用了 NSUserDefaults。但是当我尝试运行我的代码时，我收到了这个错误消息。它是一个没有正确链接的框架吗？

```
 Undefined symbols for architecture armv7:
  "_userDefaults", referenced from:
      -[PlanItDelegate application:didFinishLaunchingWithOptions:] in PlanItDelegate.o
      -[PlanningViewController numberOfSectionsInTableView:] in PlanningViewController.o
      -[PlanningViewController tableView:cellForRowAtIndexPath:] in PlanningViewController.o
      -[PlanningViewController prepareForSegue:sender:] in PlanningViewController.o
      -[PlanningViewController tableView:titleForHeaderInSection:] in PlanningViewController.o
      -[InstellingenViewController tableView:cellForRowAtIndexPath:] in InstellingenViewController.o
      -[InstellingenViewController txtUserChanged:] in InstellingenViewController.o
      ...
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

# delphi - 德尔福：RIO OnBeforeExecute

> ID：16039230
> 
> 赞同：0
> 
> 时间：2013-04-16T14:03:41.503
> 
> 标签：delphi, soap, delphi-2005

我有一个从外部源生成的 SOAP 服务，它给了我一些错误。我想在实际发送之前捕获发送到 SOAP 服务的 XML，并且发现有几个提到在 RIO 上执行 OnBeforeExecute 但不知道如何实现这一点。我通常不使用 Delphi，只是维护这个遗留程序，所以越详细越好！

这是生成的 API/SOAP 代码（我试图放入 RIO_OnBeforeExecute，但它抱怨类型不兼容：方法指针和常规过程）：

```
 ExpressSoap = interface(IInvokable)
  ['{83D77575-DBDE-3A05-D048-60B2F6BCDFE6}']
    function  HealthCheck(const credentials: Credentials; const application: Application): Response; stdcall;
  end;

function GetExpressSoap(UseWSDL: Boolean=System.False; Addr: string=''; HTTPRIO: THTTPRIO = nil): ExpressSoap;
procedure RIO_BeforeExecute(const MethodName: string; var SOAPRequest: WideString);

implementation

function GetExpressSoap(UseWSDL: Boolean; Addr: string; HTTPRIO: THTTPRIO): ExpressSoap;
const
  defWSDL = 'https://certtransaction.elementexpress.com/express.asmx?wsdl';
  defURL  = 'https://certtransaction.elementexpress.com/express.asmx';
  defSvc  = 'Express';
  defPrt  = 'ExpressSoap';
var
  RIO: THTTPRIO;
begin

  RIO.OnBeforeExecute := RIO_BeforeExecute;

  Result := nil;
  if (Addr = '') then
  begin
    if UseWSDL then
      Addr := defWSDL
    else
      Addr := defURL;
  end;
  if HTTPRIO = nil then
    RIO := THTTPRIO.Create(nil)
  else
    RIO := HTTPRIO;
  try
    Result := (RIO as ExpressSoap);
    if UseWSDL then
    begin
      RIO.WSDLLocation := Addr;
      RIO.Service := defSvc;
      RIO.Port := defPrt;
    end else
      RIO.URL := Addr;
  finally
    if (Result = nil) and (HTTPRIO = nil) then
      RIO.Free;
  end;
end;

procedure RIO_BeforeExecute(const MethodName: string; var SOAPRequest: WideString);
begin
  MessageDlg('Hello', mtConfirmation, [mbOK] ,0);
end; 
```

下面是调用 HealthCheck 方法的代码（cEPS_* 项是前面代码中定义的常量）：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Headers : ISOAPHeaders;
  aResult: c_ExpressPSAPI.Response;
begin
  try
    FEPS_SoapService := c_ExpressPSAPI.GetExpressSoap();
    FEPS_Headers := (FEPS_SoapService as ISOAPHeaders);

    FEPS_Application := c_ExpressPSAPI.Application.Create();
    FEPS_Application.ApplicationID := cEPS_ApplicationID;
    FEPS_Application.ApplicationName := cEPS_ApplicationName;
    FEPS_Credentials := c_ExpressPSAPI.Credentials.Create();
    FEPS_Credentials.AccountID := cEPS_AccountID;
    FEPS_Credentials.AccountToken := cEPS_AccountToken;
    FEPS_Credentials.AcceptorID := cEPS_AcceptorID;
    FEPS_Credentials.NewAccountToken := '';

    aResult := c_ExpressPSAPI.Response.Create;
    aResult := FEPS_SoapService.HealthCheck(FEPS_Credentials, FEPS_Application);

  except
    on E : ERemotableException do
      ShowMessage(E.ClassName + ' error raised, with message : ' + E.FaultDetail + ' :: '
                    + E.Message);

  end;

end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T17:58:22.993

我能够得到这个工作并发布答案以防其他人发现这个问题。

首先，我必须在表单中添加一个 THTTPRIO（名为 HTTPRIO1）组件，然后在该组件（名为 HTTPRIO1BeforeExecute）上设置 OnBeforeExecute 事件。完成后，我将 HTTPRIO1 对象传递给与 OnBeforeExecute 方法绑定的 GetExpressSOAP 方法：

```
 FEPS_SoapService := c_ExpressPSAPI.GetExpressSoap(System.False, '', HTTPRIO1); 
```

然后我可以像这样使用 OnBeforeExecute：

```
procedure TForm1.HTTPRIO1BeforeExecute(const MethodName: string;
  var SOAPRequest: WideString);
var
  tmpString: TStringList;
begin
  try
    Memo1.Lines.Append(SOAPRequest);
  except
    on ER : ERemotableException do
      ShowMessage(ER.ClassName + ' error raised, with message : ' + ER.FaultDetail);

    on E : Exception do
      ShowMessage(E.ClassName + ' error raised, with message : ' + E.Message);
  end;
end; 
```

# jquery-ui - jquery ui 1.10.2 选项卡 - 链接到另一个页面或网站的选项卡

> ID：16039232
> 
> 赞同：1
> 
> 时间：2013-04-16T14:03:48.050
> 
> 标签：jquery-ui, jquery-ui-tabs

我正在使用最新的 JQuery UI 选项卡 (1.10.2)。[http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

我需要能够从外部页面链接到各个选项卡。也许更正确的说法是说我需要能够通过书签链接更改最初活动的选项卡。

我知道如何设置活动索引，以便 #tabs-3 是活动选项卡

```
$( "#tabs" ).tabs({ active: 5 }); 
```

但我需要知道如何使用 url 哈希更改 .tabs({ active }) 的值，以便“tabs-page.html#tabs-3”的链接将加载“tabs-page.html”的第三个选项卡" 通过将 .tabs({ active }) 更改为 "2" （因为它是从零开始的整数）。

我真的更像是一个 html/css 设计师和 JQuery/JQuery UI 的新手，请感谢您的帮助。我已经搜索并找到了早期版本和替代库（如 JQuery 工具）的修复程序，但对于 JQuery 1.10.2 没有。我找到了链接到该部分的方法，然后重置窗口位置，但是当浏览器在窗口位置之间切换时，这会导致很多“跳跃”。如果有此修复的另一个页面，请在评论中链接。非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:10:34.720

您将需要在 jQuery 中读取哈希值。可以在这里找到一些好的信息[获取 URL 哈希位置，并在 jQuery 中使用它](https://stackoverflow.com/questions/1822598/getting-url-hash-location-and-using-it-in-jquery)

```
var url = "http://site.com/file.htm#3";
var hashValue = url.substring(url.indexOf('#')).replace('#',''); // '3' 
```

一旦你有了这个，你将能够在 jqueryUI 选项卡上设置活动选项卡

```
$('#tabs').tabs( "option", "active", hashValue ); 
```

您需要在页面最初加载时执行所有这些操作，因此在`$(function(){ ... });`

**更新**

这是完整的代码；

```
<script>

    $(function () {

        // run the jquery ui plugin
        $('#tabs').tabs();

        // grab the url
        var url = document.URL;
        // grab the value of the hash
        var hashValue = url.substring(url.indexOf('#')).replace('#', '');

        // check to make sure it is a number
        if (!isNaN(hashValue)) {
            // set the active tab
            $('#tabs').tabs("option", "active", hashValue);
        }            

    });

</script> 
```

# calendar - Outlook 日历中的约会

> ID：16039242
> 
> 赞同：1
> 
> 时间：2013-04-16T14:04:23.147
> 
> 标签：calendar, outlook, exchangewebservices, managed, appointment

我正在使用 VB.Net 和 EWS 托管 API 在 Exchange 2010 中创建约会。当我调用“保存”方法时，不会在第一台机器上创建约会，但是当我在第二台机器上使用相同的代码时它可以工作！

谢谢。

我使用以下代码在 Outlook 日历中保存约会：

```
appointment.RequiredAttendees.Add(myKalender)
    appointment.IsReminderSet = False

    Try
        System.Net.ServicePointManager.ServerCertificateValidationCallback = _
          Function(se As Object, _
          cert As System.Security.Cryptography.X509Certificates.X509Certificate, _
          chain As System.Security.Cryptography.X509Certificates.X509Chain, _
          sslerror As System.Net.Security.SslPolicyErrors) True

        appointment.Save(SendInvitationsMode.SendToNone)

        Console.Write("erfolgreich Eingetragen " & Now)
    Catch
        Console.Write("Fehler beim Erstellen des Termins " & Now & " " & Err.Description)
    End Try 
```

# asp.net-mvc - Kendo Grid Column bound Dropdown Row wise binding

> ID：16039244
> 
> 赞同：1
> 
> 时间：2013-04-16T14:04:34.077
> 
> 标签：asp.net-mvc, drop-down-menu, grid, kendo-ui

我在剑道网格上面临一个问题。

我有剑道网格，因为我有一个下拉菜单，它是基于`ViewData["abc"]`使用编辑器模板加载的，并且还有 2 个字段，例如到达日期和出发日期。

我的问题是我想根据到达日期和出发日期加载下拉列表，所以在这种情况下，每个下拉列表都有不同的值。那么我怎样才能做到这一点呢？

以下是示例代码：

控制器：

```
public ActionResult ManageRequests()
{
    try
    {
        var result = _partialControlService.PopulateDropdowns();
        PopulateDropdowns(result);
    }
    return View();
}

public void PopulateDropdowns(Model.ManageRequestDropdowns model)
{
    if (ViewData["hotels"] != null)
    {
        List<ClientHotelViewModel> objhotel = new List<ClientHotelViewModel>();
        objhotel = model.Hotels
               .Select(e => new ClientHotelViewModel
               {
                   HotelIDPK = e.HotelIDPK,
                   HotelName = e.HotelName
               }).OrderBy(e => e.HotelName).ToList<ClientHotelViewModel>();

        if (objhotel != null && objhotel.Count() > 0)
            objClientHotelViewModel.AddRange(objhotel);

        ViewData["hotels"] = objClientHotelViewModel.OrderBy(x => x.HotelIDPK);
    }
} 
```

编辑器模板：

```
@(Html.Kendo().DropDownList()
            .Name("Hotel")
            .DataValueField("HotelIDPK")
            .DataTextField("HotelName")
        .BindTo((System.Collections.IEnumerable)ViewData["hotels"])
) 
```

ManageHotel.cshtml：

```
 @(Html.Kendo().Grid<HotelRooming.ViewModels.ManageRequestViewModel>()
    .Name("grid")
    .Columns(columns =>
    {
        columns.Bound(p => p.ArrivalDate).HtmlAttributes(new { @class = "Arrivaldate" }).Format("{0:MM/dd/yyyy}").Width(100);
        columns.Bound(p => p.DepartureDate).Format("{0:MM/dd/yyyy}").Width(100);
        columns.Bound(p => p.Hotel).Width(150).ClientTemplate("#=Hotel.HotelName#").HtmlAttributes(new { @class = "HotelNames" }).Filterable(false);
    })
) 
```

模型：

```
public class ManageRequestViewModel
{
    [DisplayName("Check-in Date")]
    public DateTime ArrivalDate { get; set; }

    [DisplayName("Check-out Date")]
    public DateTime DepartureDate { get; set; }

    [UIHint("ClientHotel")]
    [DisplayName("Hotel")]
    public ClientHotelViewModel Hotel { get; set; }    
} 
```

任何帮助将不胜感激。

# android - Android AsyncTask doInBackground 函数 nullException 错误

> ID：16039247
> 
> 赞同：0
> 
> 时间：2013-04-16T14:04:42.613
> 
> 标签：android, json, android-asynctask, argumentnullexception

大家好，我的代码需要一些帮助。我想从 Web 服务器获取 JSON 数据，但是当我尝试调用 doInBackground 函数时出现 nullException 错误。

这是我的代码：

```
public class viewPOI extends ListActivity {
//private ProgressDialog progress;
JSONParser jParser = new JSONParser();
ArrayList<HashMap<String, String>> POIList;
private static String url_webservice = 
    "http://127.0.0.1/locaRemService/db_function.php";
private static final String TAG_SUCCESS = "success";
private static final String TAG_POIN = "point";
private static final String TAG_ALAMAT = "alamat_lokasi";
private static final String TAG_KONTEKS = "konteks_lokasi";
JSONArray POI = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.view_poi);

    POIList = new ArrayList<HashMap<String, String>>();
    new LoadAllPOI().execute();
    ListView Lpoi = getListView();
}

class LoadAllPOI extends AsyncTask<String, String, String> {

    @Override
    protected String doInBackground(String... args) {
        // TODO Auto-generated method stub
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        JSONObject json = jParser.getJSONFromURL(url_webservice, "GET", params);
        Log.d("All Products: ", json.toString());

        try {
            int sukses = json.getInt(TAG_SUCCESS);
            if(sukses == 1) {
                POI = json.getJSONArray(TAG_POIN);
                for(int i = 0; i < POI.length(); i++) {
                    JSONObject c = POI.getJSONObject(i);
                    String alamat = c.getString(TAG_ALAMAT);
                    String konteks = c.getString(TAG_KONTEKS);
                    HashMap<String, String> map = new HashMap<String, String>();
                    map.put(TAG_ALAMAT, alamat);
                    map.put(TAG_KONTEKS, konteks);
                    POIList.add(map);
                }
            } else {
                Toast.makeText(getApplicationContext(), "Tidak ada lokasi", Toast.LENGTH_SHORT).show();
            }
        } catch(JSONException ex) {
            ex.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(String file_url) {
        //progress.dismiss();
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                // TODO Auto-generated method stub
                ListAdapter adapter = new SimpleAdapter(viewPOI.this, POIList, 
                        R.layout.list_item, new String[]{TAG_ALAMAT, TAG_KONTEKS}, 
                        new int[]{R.id.alamatPOI, R.id.konteksPOI});
                setListAdapter(adapter);
            }

        });
    }
} 
```

}

原木猫

```
04-16 20:06:59.389: ERROR/AndroidRuntime(503): FATAL EXCEPTION: AsyncTask #1
04-16 20:06:59.389: ERROR/AndroidRuntime(503): java.lang.RuntimeException: An error occured while executing doInBackground()
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at java.lang.Thread.run(Thread.java:1019)
04-16 20:06:59.389: ERROR/AndroidRuntime(503): Caused by: java.lang.NullPointerException
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at com.locationReminder.viewPOI$LoadAllPOI.doInBackground(viewPOI.java:61)
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at com.locationReminder.viewPOI$LoadAllPOI.doInBackground(viewPOI.java:1)
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
04-16 20:06:59.389: ERROR/AndroidRuntime(503):     ... 4 more 
```

谢谢你的帮助...

[已解决] 感谢我解决这个问题的每个人。我把url改成10.0.2.2，问题就解决了。谢谢大家...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:20:28.760

首先，您将 String、String、String 通用参数用于异步任务，因此您需要在执行时传递 String 参数（此处为 String 参数）。您还需要在 doInBackground(String... args) 的末尾为 onPostExecute(String file_url) 返回一个字符串参数。在您的代码中，您只返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:58:29.670

如果您使用[此代码](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)，您的对象可能会因为多种原因之一（没有网络连接、错误的站点、格式错误的 JSON 对象）之一而获得空值。

代替

```
Log.d("All Products: ", json.toString()); 
```

尝试

```
if (json!=null)
    Log.d("All Products: ", json.toString()); 
```

进一步审查：您的

```
try{...}  catch(JSONException ex) {...} 
```

也会抛出异常，因为您没有`json`在那里测试空值。所以

```
 if (json!=null){
    Log.d("All Products: ", json.toString());
     try{...}  catch(JSONException ex) {...}
 } 
```

将是您的实际解决方案。

# sql - Oracle 双重计数案例

> ID：16039248
> 
> 赞同：1
> 
> 时间：2013-04-16T14:04:43.033
> 
> 标签：sql, oracle, count, case

我有以下 sql 语句：

```
 COUNT(CASE 
          WHEN CALCULATE_CALLBACK_DURATION(CREATED, LAST_UPD) IS NULL THEN CALCULATE_CALLBACK_DURATION(AA.THIS_DATE_OPENING, LAST_UPD) /60 /60 < 2 THEN 1
          ELSE CALCULATE_CALLBACK_DURATION(CREATED, LAST_UPD) /60 /60 < 2 THEN 1 
     END) AS Calculatedsum 
```

`CALCULATE_CALLBACK_DURATION(CREATED, LAST_UPD)`返回总和的函数在哪里（以秒为单位）

但是我收到了错误

> 缺少关键字

我究竟做错了什么 ？甚至可以这样计算吗？

**更新**

我还尝试了以下方法：

```
 CASE WHEN CALCULATE_CALLBACK_DURATION(AA.THIS_DATE_OPENING, LAST_UPD) /60 /60 < 2
 THEN 1 END 
ELSIF CALCULATE_CALLBACK_DURATION(CREATED, LAST_UPD) /60 / 60 <2 THEN 1 END IF) AS Calculatedsum 
```

问题是如果计算结果为空，那么它应该以另一种方式计算总和并检查是否小于 2，然后将其计为 +1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:07:21.327

你错过了另一个`WHEN`（你有两个`THEN`s 连续）。这个

```
WHEN CALCULATE_CALLBACK_DURATION(CREATED, LAST_UPD) IS NULL -- MISSING VALUE
THEN CALCULATE_CALLBACK_DURATION(AA.THIS_DATE_OPENING, LAST_UPD) /60 /60 < 2 THEN 1
-- ^-- Wrong keyword 
```

应该

```
COUNT(CASE
  WHEN CALCULATE_CALLBACK_DURATION(CREATED, LAST_UPD) IS NULL THEN
    CASE
    WHEN (CALCULATE_CALLBACK_DURATION(AA.THIS_DATE_OPENING, LAST_UPD) /60 /60 < 2)
      OR (CALCULATE_CALLBACK_DURATION(CREATED, LAST_UPD) /60 /60 < 2) THEN 1
    ELSE 0 END
  ELSE 0
END) AS Calculatedsum 
```

# backbone.js - Backbone Stickit 输入值从外部改变

> ID：16039252
> 
> 赞同：3
> 
> 时间：2013-04-16T14:05:00.367
> 
> 标签：backbone.js, input, backbone-stickit

我有一个在输入上设置日期的日期选择器。我用stickit绑定它。问题在于，由于日期选择器（而不是击键）更改了输入的值，因此stickit 绑定不会观察到更改。如果我手动输入日期，没有问题。

```
bindings: {
                        'input[name=RecordDate]': {
                            observe: 'recdate',
                            onSet: 'dosome'
                        }
                    }, 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T14:50:21.120

我建议添加一个全局处理程序来处理您项目中的所有日期选择器。以下处理程序将匹配任何具有类的绑定元素：'jquery-datepicker'：

```
Backbone.Stickit.addHandler({
    selector: '.jquery-datepicker',
    initialize: function($el, model, options) {
        $el.datepicker({
            onChangeMonthYear: function() {
                model.set(options.observe, $el.val());
            }
        });
    }
}); 
```

这是一个示例小提琴：

[http://jsfiddle.net/px6UP/29/](http://jsfiddle.net/px6UP/29/)

[更多关于处理程序。](http://nytimes.github.io/backbone.stickit/#custom-handlers)

让我知道这是否适合你。我计划在不久的将来使用食谱或示例更好地记录处理程序...

# java - 使用 Javamail 从 Gmail 中检索上次发送的邮件

> ID：16039253
> 
> 赞同：1
> 
> 时间：2013-04-16T14:05:03.577
> 
> 标签：java, imap, jakarta-mail

我正在尝试使用 Javamail api 在 Gmail 中获取最后发送的邮件。这是代码 -

```
Properties props = System.getProperties();
props.setProperty("mail.store.protocol", "imap");

try{
    Session session = Session.getDefaultInstance(props, null);
    Store store = session.getStore("imap");
    store.connect(mailbox, mailId, passwod);

    sent  = store.getFolder("[Gmail]/Sent Mail");
    int totalSentMails = sent.getMessageCount();

    sent.open(Folder.READ_ONLY);

    Message sentmesage = sent.getMessage(totalSentMails);
}
catch (NoSuchProviderException e){
      e.printStackTrace();
      System.exit(1);
} 
```

由于 getMessage 计数返回的数字远大于实际邮件，因此我得到了 IndexOutOfBoundsException。

如何使用 javamail api 从 Gmail 中获取确切数量的已发送邮件？我得到的错误是 -

```
java.lang.IndexOutOfBoundsException: 1986 > 1970 
```

1986 是上面获取的 totalSentMails 的值，1970 是实际发送的邮件数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T13:12:27.190

**

## 使用此代码阅读 gmail 已发送邮件文件夹、草稿、重要、已加星标、垃圾邮件、垃圾箱、收件箱、所有邮件

**

```
 Properties props = new Properties();

    props.setProperty("mail.store.protocol", "imaps");

    try {
        Session session = Session.getInstance(props, null);
        Store store = session.getStore();
        store.connect("imap.gmail.com", "xxxxxxx@gmail.com", "gmailpassword");
        Folder[] folderList = store.getFolder("[Gmail]").list();
        for (int i = 0; i < folderList.length; i++) {
            System.out.println(folderList[i].getFullName());
        }
        Folder inbox = store.getFolder("[Gmail]/Sent Mail");
        inbox.open(Folder.READ_ONLY);
        Message msg = inbox.getMessage(inbox.getMessageCount());
        Address[] in = msg.getFrom();
        for (Address address : in) {
            System.out.println("FROM:" + address.toString());
        }
        Multipart mp = (Multipart) msg.getContent();
        BodyPart bp = mp.getBodyPart(0);
        System.out.println("Bcc User NAme :"+InternetAddress.toString(msg.getRecipients(Message.RecipientType.BCC)));
        System.out.println("SENT DATE:" + msg.getSentDate());
        System.out.println("SUBJECT:" + msg.getSubject());
        System.out.println("CONTENT:" + bp.getContent());
    } catch (Exception mex) {
        mex.printStackTrace();
    } 
```

这段代码工作得很好，伙计们..享受:)

# nhibernate - 来自父级的 QueryOver 子集合

> ID：16039255
> 
> 赞同：1
> 
> 时间：2013-04-16T14:05:08.643
> 
> 标签：nhibernate, queryover

我有这两个对象：

```
public class Parent
{
    public virtual int Poid { get; set; }
    public virtual IEnumerable<Child> Child { get; set; }
}

public class Child
{
    public virtual int Poid { get; set; }
    public virtual string Name {get; set;}    
} 
```

我想使用 NHibernet QueryOver API 根据父 ID 和子 ID 获取一个孩子，这意味着给我一个 Id = x 的孩子属于 Id = y 的父级。

我试过这样的事情：

```
return Session.QueryOver<Parent>().Where(p => p.Poid == y)
                .JoinQueryOver(p => p.WishesLists)
                .Where(c => c.Poid == x)
                .SingleOrDefault<Child>(); 
```

但是我遇到了一个异常，无法将 Child 类型的对象转换为 Parent。

QueryOver 从父实体开始但返回子实体的正确形式如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:36:22.043

我不知道 QueryOver 是否可以做到这一点，我在它上面工作了一段时间却没有得到任何结果。使用 LINQ 是可能的：

```
var child = session.Query<Parent>()
                   .Where(p => p.Poid == y)
                   .SelectMany(p => p.WishesLists)
                   .SingleOrDefault(c => c.Poid == x); 
```

我非常喜欢 LINQ 语法而不是 QueryOver。

另见[NH-3176](https://nhibernate.jira.com/browse/NH-3176)

# android - 使用 FileInputStream 和 File 对象代替命名管道时出现问题

> ID：16039260
> 
> 赞同：0
> 
> 时间：2013-04-16T14:05:23.440
> 
> 标签：android, fileinputstream, datainputstream

我正在使用包装 FileStream 的 DataStream 在两个不同的应用程序之间发送大位图（意图有 1mb 限制，我不想将文件保存到文件系统），

我的问题是当流仍然打开但没有数据时[DataInputStream](http://developer.android.com/reference/java/io/DataInputStream.html#readInt%28%29)抛出一个。`EOFException`我希望这会简单地阻止（尽管文档在此问题上非常含糊）。

数据输出流：

```
public void onEvent() {
    fos.writeInt(width);
    fos.writeInt(height);
    fos.writeInt(newBuffer.length);
    fos.write(newBuffer);
} 
```

数据输入流：

```
while(true) {
    int width = fis.readInt();
    int height = fis.readInt();
    int length = fis.readInt();
    byte[] bytes = new byte[length];
    fis.read(bytes);
} 
```

谁能建议一组更好的类来将数据从一个线程流式传输到另一个线程（其中，read() / readInt() 成功阻塞）。

**编辑**

我试图通过简单地使用and从等式中删除`DataInputStream`and来解决这个问题：`DataOutputStream``FileInputStream``FileOutputStream`

```
 fos.write(intToByteArray(width));
    fos.write(intToByteArray(height));
    fos.write(intToByteArray(newBuffer.length));
    Log.e(this.class.getName(), "Writing width: " + Arrays.toString(intToByteArray(width)) + 
                                                      ", height: " + Arrays.toString(intToByteArray(height)) + 
                                                      ", length: " + Arrays.toString(intToByteArray(newBuffer.length)));
    fos.write(newBuffer);
    if(repeat == -1) {
        Log.e(this.class.getName(), "Closing ramFile");
        fos.flush();
        fos.close();
    } 
```

这使：

`Writing width: [0, 0, 2, -48], height: [0, 0, 5, 0], length: [0, 56, 64, 0]`

另一方面，我使用这个：

```
while(true) {
    byte[] intByteArray = new byte[] { -1,-1,-1,-1 };
    fis.read(intByteArray);
    Log.e(this.class.getName(), Arrays.toString(intByteArray));
    int width = toInt(intByteArray, 0);
    fis.read(intByteArray);
    int height = toInt(intByteArray, 0);
    fis.read(intByteArray);
    int length = toInt(intByteArray, 0);
    Log.e(this.class.getName(), "Reading width: " + width + ", height: " + height + ", length: " + length);
} 
```

这使：

```
[0, 0, 2, -48] 
Reading width: 720, height: 1280, length: 3686400 
```

然后奇怪的是，`read()`它没有阻塞，它只是愉快地进行，没有阻塞但没有填充数组中的任何值（将数组初始化为 { 9, 9, 9, 9 } 之后仍然是 9, 9, 9, 9读）。

```
[-1, -1, -1, -1] 
Reading width: -1, height: -1, length: -1 
java.lang.NegativeArraySizeException: -1 
```

这就是疯狂的感觉吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:29:15.770

这里的答案相当简单（没有很好的记录）。

FileInputStream 的请求没有超时`read`- 这意味着如果您从一个空但未关闭的流中读取，它将返回而不填充字节（保持“原样”给出的字节）。

您可以使用`LocalSocket`和`LocalServerSocket`通过相同的机制流式传输数据并使用

```
LocalServerSocket server = new LocalServerSocket(SOCKET_NAME);
LocalSocket socket = server.accept();
socket.setSoTimeout(60); 
```

这将强制您的读取操作超时 60 秒（阻塞直到数据可用）。

# cakephp - CakePHP 2.3.2 BasicAuthentication 不起作用

> ID：16039263
> 
> 赞同：5
> 
> 时间：2013-04-16T14:05:25.007
> 
> 标签：cakephp, basic-authentication, cakephp-2.3

我试用了位于[http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application 的“简单 Acl 控制的应用程序 1&2”教程。 .html](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html) _

完成此操作后，我尝试激活 BasicAuth 而不是 FormAuth。

我在我的 UsersController 中重新实现了 login() 函数，如下所示：

```
public function login() {
if ($this->Auth->login()) {
        return $this->redirect($this->Auth->redirect());
    } else {
        $this->Session->setFlash('Not able to login');
    }
} 
```

并将我的 AppController 中的 $components 变量更改为以下内容：

```
public $components = array(
    'Acl',
    'Auth' => array(
        'authorize' => array(
            'Actions' => array('actionPath' => 'controllers')
        ),
        'authenticate' => array('Basic')
    ),
    'DebugKit.Toolbar',
    'Session'
); 
```

BasicAuth“弹出窗口”按预期显示，但是当我尝试登录时，它会在无限循环中重新出现。完成本教程后，除了包含 DebugKit 外，我没有进行任何更改。

我错过了什么？我希望有人可以帮助我，因为我想用 CakePHP 编码我的下一个项目！

**更新**

应用控制器

```
public function beforeFilter() {
    //Configure AuthComponent
    $this->Auth->allow('display');
    $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
    $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login');
    $this->Auth->loginRedirect = array('controller' => 'posts', 'action' => 'add');
} 
```

用户控制器

```
public function beforeFilter() {
    parent::beforeFilter();
} 
```

我正在尝试`/users/`使用本教程中描述的 FormAuth 访问 eg ，它就像一个魅力，所以不会有权限问题。登录数据对于测试（管理员：管理员）非常简单，因此也应该没有问题。

**更新 2**

在我的 Apache 日志中，我得到以下信息，所以它说我没有被授权：

> IP - - [16/Apr/2013:18:08:37 +0200] "GET /users/login HTTP/1.0" 401 5179 "-" "Mozilla/5.0 (Windows NT 6.2; Win64; x64; rv:23.0)壁虎/20130414 火狐/23.0"

**更新 3**

出于某种原因，用户和密码似乎要么未发送，要么未保存在 PHP 中。如果我重写`/lif/Cake/Controller/Auth/BasicAuthenticate`以下内容，它可以工作！

```
public function authenticate(CakeRequest $request, CakeResponse $response) {
    $_SERVER['PHP_AUTH_USER'] = $_SERVER['PHP_AUTH_PW'] = "admin";
    $result = $this->getUser($request);

    if (empty($result)) {
        $response->header($this->loginHeaders());
        $response->statusCode(401);
        $response->send();
        return false;
    }
    return $result;
} 
```

**更新 4**

不知道这是否有帮助，但服务器正在运行 Plesk 11，最新更新，没有特殊修改。

**更新 5**

好的，“thaJeztah”的答案很有用，但现在我遇到了更多可以细分的问题。

1.  将模式从 fcgid 更改为 apache 模块

    1.1。结果可以登录，但注销不起作用！重定向后，会话似乎被清除，但我仍然可以访问每个受限制的页面，直到我清除浏览器中的“活动登录”，因为它在 Firefox 中被调用。

> ```
> var_dump($this->Session->read('Auth.User'));
> 
> NULL 
> ```

当我访问 /users/login 时，我会自动登录并重定向，而无需输入登录凭据。

> ```
> print "<pre>";
> print_r($this->Session->read('Auth.User'));
> print "</pre>";
> 
> Array
> (
>     [id] => 1
>     [username] => admin
>     [group_id] => 1
>     [created] => 2013-04-12 12:54:26
>     [modified] => 2013-04-16 14:27:24
>     [is_active] => 1
>     [Group] => Array
>         (
>             [id] => 1
>             [name] => Admin
>             [created] => 2013-04-12 12:46:42
>             [modified] => 2013-04-12 12:46:42
>         )
> 
> ) 
> ```

1.  使用基于 .htaccess 的解决方案也可以，它甚至看起来好像这是唯一需要的更改（我删除了 list() 代码，因为我从未进入它并且它也可以正常工作）。

    2.1。与上述相同的问题，无法真正注销。

**更新 6**

可能是我最后一次或最后一次更新。:-) 现在我正在尝试通过将用户作为我创建的访客用户登录来进行“假注销”，该用户只能访问`/users/login`和`/pages/home`：`http://guest:guest@my.domain/users/login`

访问`/users/logout`也可能有效，因为我在那里使用这段代码：

```
public function logout() {
    $user = $this->User->find('first', array('conditions' => array('username' => 'guest')));
    $this->Auth->login($user['User']['id']);
} 
```

我简直不相信，这将是一致的，因为我相信会话数据将在一段时间内被删除，并且浏览器仍然获得活动的管理员登录并使用这些进行身份验证 - 我是对的吗？

之后，我可以再次使用`http://admin:admin@my.domain/users/login`. 不完美，但至少适用于 Firefox。

所以基本上最后一个问题：关于如何在访问时强制使用 BasicAuth 的任何建议`/users/login`？这样我就可以随时使用任何客户端轻松切换用户。

**更新 7**

我找到了一种方法来完全按照我接受的答案中的想法做到这一点。我希望我抓住了所有边缘情况，如果没有，请随时纠正我！

（Ps：当使用 ACL 和/或基本身份验证时，至少 AppController 中的 isAuthorized() 似乎被忽略了（它已被识别，但没有效果 - 当我在不更改 $components 的情况下删除该方法时，出现错误）导致对我来说，在不使用 isAuthorized() 的情况下实现这一点。）

应用控制器.php

```
public function beforeFilter($redirectlogin = true) {
    //Configure AuthComponent
    $this->Auth->allow('display', '/users/login');
    $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login');
    $this->Auth->logoutRedirect = array('controller' => 'pages', 'action' => 'home');
    $this->Auth->loginRedirect = array('controller' => 'pages', 'action' => 'home');
    $this->Auth->unauthorizedRedirect = array('controller' => 'HTTPCODE', 'action' => 'c403');

    if($redirectlogin && $this->Session->read('Auth.needs_reauthenticate')) {
        if(!($this->request->params['controller'] == $this->Auth->loginRedirect['controller'] && $this->request->params['pass'][0] == $this->Auth->loginRedirect['action'])) {
            $this->redirect('/users/login');
        }
    }
 } 
```

用户控制器.php

```
public function beforeFilter() {
    parent::beforeFilter(false);
}

    public function login() {
        $this->autoRender = false;
        $this->Session->write('Auth.needs_reauthenticate', true);
        if(!$this->Session->check('Auth.count')) {
            $count = 1;
        } else {
            $count = $this->Session->read('Auth.count') + 1;
        }
        $this->Session->write('Auth.count', $count);

        if($this->Session->read('Auth.needs_reauthenticate')) {
            if((isset($_SERVER['HTTP_AUTHORIZATION']) && $this->Session->read('Auth.count') == 1) || (!isset($_SERVER['HTTP_AUTHORIZATION']) || empty($_SERVER['HTTP_AUTHORIZATION']) || !$this->Session->check('Auth.sent_header_step') || $this->Session->read('Auth.sent_header_step') < 1)) {
                unset($_SERVER['HTTP_AUTHORIZATION']);
                $this->Session->write('Auth.redirectTo', $this->Auth->redirect());

                $this->response->header(sprintf('WWW-Authenticate: Basic realm="%s"', env('SERVER_NAME')));
                $this->response->statusCode(401);
                $this->response->send();

                $this->Session->write('Auth.sent_header_step', 1);
            }       

            if(isset($_SERVER['HTTP_AUTHORIZATION'])) {
                $this->Session->write('Auth.sent_header_step', 0);
                $base64string = base64_decode(substr($_SERVER['HTTP_AUTHORIZATION'], 6));
                if(!(strlen($base64string) > 1 && substr($base64string, -1, 1) != ":")) {
                    $_SERVER['PHP_AUTH_USER'] = "";
                    $_SERVER['PHP_AUTH_PW'] = "";
                }

                $data = true;
            }

            $this->Auth->logout();

            if(isset($data) && $this->Session->read('Auth.count') > 1) {
                if($this->Auth->login()) {
                    $this->Session->write('Auth.needs_reauthenticate', false);
                    if($this->Session->check('Auth.redirectTo')) {
                        $redirectTo = $this->Session->read('Auth.redirectTo');
                        $this->Session->delete('Auth.redirectTo');
                        $this->Session->delete('Auth.count');

                        return $this->redirect($redirectTo);
                    } else {
                        return $this->redirect($this->Auth->redirect());
                    }
                } else {
                    $this->response->statusCode(403);
                    // my 403 message
                }
            } else {

                if(!isset($_SERVER['HTTP_AUTHORIZATION']) && $this->Session->read('Auth.count') > 1 && isset($_SERVER['PHP_AUTH_USER']) && isset($_SERVER['PHP_AUTH_PW']) && trim($_SERVER['PHP_AUTH_USER']) != "" && trim($_SERVER['PHP_AUTH_PW']) != "") {
                    if($this->Auth->login()) {
                        $this->Session->write('Auth.needs_reauthenticate', false);
                        if($this->Session->check('Auth.redirectTo')) {
                            $redirectTo = $this->Session->read('Auth.redirectTo');
                            $this->Session->delete('Auth.redirectTo');
                            $this->Session->delete('Auth.count');

                            unset($_SERVER['HTTP_AUTHORIZATION']);
                            unset($_SERVER['PHP_AUTH_USER']);
                            unset($_SERVER['PHP_AUTH_PW']);
                            return $this->redirect($redirectTo);
                        } else {
                            return $this->redirect($this->Auth->redirect());
                        }
                    } else {
                        $this->response->statusCode(403);
                        // my 403 message
                    }
                }

                $this->response->statusCode(403);
                // my 403 message
            }
        }
    } 
```

提前致谢

阿德里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T19:56:28.927

## 将 PHP 作为（快速）CGI 运行时使用基本身份验证

您的网站可能配置为将 PHP 作为（快速）CGI 运行，在这种情况下，变量中不存在`PHP_AUTH_USER`和键。BasicAuthenticate AuthComponent 依赖于这些键。`PHP_AUTH_PWD``$_SERVER`

更改 Plesk 中的域/webhosting 设置以将 php 作为此网站/域的“apache 模块”运行，或者扩展 BasicAuthenticate 组件以通过其他方式获取这些变量。

关于这个主题的更多信息可以在这个问题中找到：

[PHP_AUTH_USER 未设置？](https://stackoverflow.com/questions/3663520/php-auth-user-not-set)

对于 Symfony 框架，似乎有人编写了一个解决方法，在这种情况下也可能有用；

[https://github.com/symfony/symfony/issues/1813](https://github.com/symfony/symfony/issues/1813)

## 更新：使用基本身份验证时注销

使用时注销`basic authentication`是不可能的。基本身份验证是一种“无状态”身份验证机制，这基本上意味着浏览器会*随每个请求*发送用户凭据。换句话说; *服务器*不会保持“状态”，浏览**器**会。使用基本身份验证，您需要浏览器发送用户凭据，并且只要浏览器发送有效凭据，您就允许浏览器访问受保护的页面。

注销的唯一方法是*关闭浏览器*，或告诉浏览器*关闭活动会话/登录*。

在此处阅读更多信息：

[http://en.wikipedia.org/wiki/Basic_access_authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)

[http基本身份验证“注销”](https://stackoverflow.com/questions/4163122/http-basic-authentication-log-out)

### 笔记

Base Authentication 不是一种安全的身份验证机制；用户名**和密码随***每个请求*发送到服务器。密码**未加密**发送（仅 base64 编码以防止特殊字符出现问题）。

虽然表单身份验证也发送未加密的密码，但它（更安全一点）因为它只会在登录时发送用户名/密码。后续请求只会发送 Session-id，它可以设置为过期并限制为特定的 IP 和/或浏览器类型。

在所有情况下，通过 SSL 保护连接显然很重要。

### 在登录页面强制重新认证

这只是“大声思考”，未经测试且高度实验性:)

尝试这个;

1.  如果没有会话处于活动状态，请按正常方式进行。在基本身份验证中，无法区分“已登录”用户和“新用户”——它是无状态的

2.  如果会话处于活动状态，*则*用户显然正在进行活动会话。*不要*破坏会话，而是改变规则；

    *   如果发送的凭据与会话中的用户名是*同一*用户（或者，更好的是：`$this->Auth->user('username');`？，则*使*会话无效（而不是*破坏*）并通过发送登录标头强制用户重新进行身份验证；
    *   您可以从 BasicAuthenticate 行为中复制标头；在此处查看源代码[BasicAuthenticate::authenticate()](https://github.com/cakephp/cakephp/blob/2.2.7/lib/Cake/Controller/Component/Auth/BasicAuthenticate.php#L91)
    *   关于“复制标题”；也许扩展 BasicAuthenticate 是一种更清洁的方法；处理自定义版本中的所有自定义代码。

此外，检查会话内部是否仍然“有效” `AppController::isAuthorized()`（请参阅[​​使用 ControllerAuthorize](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#using-controllerauthorize)）

像这样的东西（样机代码）：

登录页面/操作：

```
if ("usercredentials sent by browser" === "current logged in user in session") {
    // Mark session as 'needs-to-reauthenticate'
    $this->Session->write('Auth.needs_reauthenticate', true);

    // Need to find a clean approach to get the BasicAuth loginHeaders()
    // *including* the right settings (realm)
    $this->response->header(/*BasicAuth::loginHeaders()*/);

    // Access denied status
    $this->response->statusCode(401);
    return $this->response->send();
} 
```

AppController::isAuthorized()

```
if ($this->Session->read('Auth.needs_reauthenticate')) {
    return false;
} else {
    // Normal 'isAuthorized()' checks here
} 
```

注意：一旦浏览器*在活动会话期间*访问了“登录”页面，用户要么必须使用*不同*的凭据登录，要么关闭浏览器以再次登录。

如果在关闭并重新打开浏览器后会话 cookie 仍然存在，这*可能会出现问题。*尝试强制会话 cookie 成为*“真正的”*会话 cookie，并通过设置`Session.cookieTimeout`为`0`（参见[`Session Configuration`](http://book.cakephp.org/2.0/en/development/sessions.html#session-configuration)

# actionscript-3 - NetStream.seek 错误 求视频

> ID：16039264
> 
> 赞同：0
> 
> 时间：2013-04-16T14:05:25.677
> 
> 标签：actionscript-3, flex4, flash-builder, netstream

我尝试`NetStream`使用动作脚本语言在课堂上执行搜索功能，搜索无法正常工作。我在 NetStream 中阅读了 KeyFrames，KeyFrames 和 seek 之间有什么关系？NetStream 使用 seek 功能还有其他问题吗？onClick() 函数寻找；

```
 private function onClick(event:MouseEvent):void
    {
         if (event.currentTarget is Group)
         {
             var myGroup:Group = event.currentTarget as Group;
             if ( myGroup.mouseX >= 100)
              {
                 mouseClickedXPos = myGroup.mouseX;
                 ns.inBufferSeek = true;
                 var seekTime:Number = (mouseClickedXPos-100) * (totalTime/(controlBarControls.width-100));
                 ns.seek(seekTime);     
             }  
         }
    } 
```

有网络流的 netStatus 事件

`ns.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);`

```
private function onNetStatus(event:NetStatusEvent):void
    {
        if ( event.info == "NetStream.Play.StreamNotFound" )
            legend.text = "Video file passed, not available!";
        else if(event.info.code == "NetStream.Play.FileStructureInvalid")
            legend.text = "Video file passed, FileStructureInvalid";
    } 
```

`event.info.code`是 NetStream.Seek.InvalidTime ，视频将停止播放，有时会寻找视频结尾，但我跟踪它，`ns.time()`不会更新为新值（seekTime）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:06:32.903

我不完全确定，但我认为你弄错了这一行：

```
var seekTime:Number = (mouseClickedXPos-100) * (totalTime/(controlBarControls.width-100)); 
```

试试这个：

```
var seekTime:Number = ( ( mouseClickedXPos - 100 ) / ( controlBarControls.width - 100 ) ) * totalTime; 
```

基本上，您是在比较两个完全不同的数量以形成一个比率并将其乘以鼠标单击位置。相反，将 mouseX 除以总宽度（将点击的位置作为总宽度的百分比）并将其乘以时间（给出总时间的百分比）。

我对 NetStream 的工作方式并不太熟悉（我已经使用过它，只是不够广泛地知道这一点），但是如果您传递的时间大于总时间，则必须有一个错误或者它必须通过不完成命令或将值设置为 0 来处理它（我个人认为会发生这种情况。无论如何我都会这样做）

# php - 数据未插入 Mysql/Php 中的表

> ID：16039267
> 
> 赞同：-1
> 
> 时间：2013-04-16T14:05:43.667
> 
> 标签：php, mysql, sql-insert

不知道问题出在哪里..但是数据没有出现在数据库中..

```
if(isset($_POST['sign up']))
{
$name=$_REQUEST['username'];
$password=$_REQUEST['password'];
$fname=$_REQUEST['fname'];
$lname=$_REQUEST['lname'];
$email=$_REQUEST['email'];
mysql_query("insert into sign_up ('username','password','fname','lname','email')         VALUES('$name' , md5('$password') , '$fname' , '$lname','$email'");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:06:56.987

问题在于`INSERT`子句中的列，它们**不**应该用单引号引起来，因为它们是**标识符**而不是字符串文字。

```
insert into sign_up (username,password,fname,lname,email) VALUES(...) 
```

由于它们都不是[**保留关键字**](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，因此它们周围的反引号是可选的。

*   [MySQL - 何时使用单引号、双引号和反引号？](https://stackoverflow.com/questions/11321491/mysql-when-to-use-single-quotes-double-quotes-and-backticks)

* * *

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:08:32.983

使用 mysql_error() 获取正在发生的错误。如果这是您的全部代码，那么您看起来不像是先建立数据库连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:12:27.343

只需删除数据库列名周围的单引号，它应该可以工作：

```
mysql_query("insert into sign_up (username, password, fname , lname , email) VALUES('$name' , md5('$password') , '$fname' , '$lname','$email'"); 
```

`MD5()`您还需要在插入之前至少对数据进行转义，并且使用散列密码是不安全的。

这里有一个非常好的阅读内容：它只用很少（足够）的文本覆盖了很多内容 - 不仅是散列：

[http://www.phptherightway.com/#password_hashing](http://www.phptherightway.com/#password_hashing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:13:47.763

我知道答案部分是错误的，但我似乎无法评论你的帖子，我想这可能是因为我是一个新用户......

在将其发布到 Internet 之前，请阅读 SQL 注入。您需要在输入中加入保护。

# android - Android - 与其他活动交互

> ID：16039271
> 
> 赞同：2
> 
> 时间：2013-04-16T14:05:45.140
> 
> 标签：android, events

所以，我有一个问题！

我有一个名为 X 的活动。当用户单击按钮时，将显示活动 Y。我希望在收到活动 X 发送的事件后可以关闭此活动。

你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:08:42.990

`BroadcastMessage`从 X发送 a 。在 y`BroadcastReceiver`中用相同的 注册 a `IntentFilter`。因此，您可以从 x 发送预定义的退出消息，该消息将被 y 活动的`onReceive`方法捕获。在那里你可以结束活动 Y。

**例如：**

**在 Y 活动中**

```
private BroadcastReceiver mMessageReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle extras = intent.getExtras();
        if (extras != null) {
            if (extras.containsKey("exit")) {
                finish();

            }
        }
    } 
```

不要忘记注册接收器

```
 registerReceiver(
            mMessageReceiver,
            new IntentFilter(Constants.YOUR_INTENT_FILTER)); 
```

并注销

```
unregisterReceiver( mMessageReceiver); 
```

**IN X 活动：**

```
send the broadcastmessage using `sendBroadcast(Intent i)` 
```

对于这种内部消息，我更喜欢[LocalBoradcastManager](https://www.google.com.bd/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CCwQFjAA&url=http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html&ei=sFxtUdyILIfKrAeCz4CYBg&usg=AFQjCNFu8jEI2XY2MXPdmzmaudH4M_XsBg&bvm=bv.45175338,d.bmk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:12:12.763

不幸的是，您不能同时“运行”两个活动。当您启动 Activity Y 时，Activity X 将结束其生命周期。

请参阅：http: [//developer.android.com/guide/components/activities.html](http://developer.android.com/guide/components/activities.html)

> 每次新活动开始时，前一个活动都会停止，但系统会将活动保存在堆栈（“后堆栈”）中。当一个新的活动开始时，它被推到后台堆栈并获得用户关注。后退堆栈遵循基本的“后进先出”堆栈机制，因此，当用户完成当前活动并按下后退按钮时，它会从堆栈中弹出（并销毁）并恢复之前的活动。（Back stack 在 Tasks and Back Stack 文档中有更多讨论。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:24:00.800

*   `BroadcastMessage`从那时起，您可以`ActivityX`设置一个 Global 的值`boolean`
*   `Activity Y`您应该在使用（可能在`onCreate`）时检查该布尔值`Activity Y`

*   如果你得到这个布尔值`true`（或者你在调用时设置的任何值`BroadcastMessage`），那么只需调用`finish()`

> 问题是android没有同时运行两个活动，所以没有活动你不能远程完成它

# ios - MBProgressHUD 和 Storyboard 实例化新的视图控制器

> ID：16039272
> 
> 赞同：0
> 
> 时间：2013-04-16T14:05:46.097
> 
> 标签：ios, uiview, uistoryboard, uistoryboardsegue, mbprogresshud

我正在使用带有情节提要设置的[MBRProgressHUD](https://github.com/jdg/MBProgressHUD)。

我提出了一个处理登录的登录视图控制器。收到用户后，我会呈现另一个视图控制器，如下所示：

```
self.slidingViewController.topViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"HomeVC"]; 
```

在我的登录方法中，我使用以下内容创建了我的 HUD：

```
// Start the HUD outside the user login block
self.HUD = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
self.HUD.dimBackground = NO;
self.HUD.labelText = NSLocalizedString(@"HUDLoggingInText", @"Login HUD Logging in text"); 
```

这一切都很好，我遇到的问题是关闭视图控制器。在使用故事板之前，我可以添加以下内容：

```
// Bring down the HUD with a success message
self.HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"37x-Checkmark.png"]];
self.HUD.mode = MBProgressHUDModeCustomView;
self.HUD.labelText = NSLocalizedString(@"HUDLoggedInText", @"HUD Logged in text");
[self.HUD hide:YES afterDelay:2]; 
```

这将关闭带有成功复选标记和不同文本的 HUD。我现在遇到的问题是，当使用登录视图控制器（以及它所在的导航控制器）上方的第一行代码加载 HomeVC 时，我认为这意味着 HUD 也丢失了。

我怎样才能让HUD显示之前的成功`instantiateViewControllerWithIdentifier`？我已经尝试在加载 HomeVC 之前明显移动 HUD 部分，但这没有区别，也没有将延迟更改为 0。

**编辑** 视图已加载。故事板加载的第一个视图是类 InitialViewController。然后，这会根据用户是否登录来实例化另一个控制器：

```
 self.topViewController = [storyboard instantiateViewControllerWithIdentifier:@"WelcomeVC"];
} else {
    NSLog(@"logged in");
    self.topViewController = [storyboard instantiateViewControllerWithIdentifier:@"HomeVC"]; 
```

初始视图控制器始终保留在堆栈上，并且是一个 ECSlidingViewController，因此它具有 topViewController 的属性。

理想情况下，我需要知道如何将 HUD 添加到堆栈上的这个 initialViewController，而不是当前显示的视图（登录视图控制器），因为当登录完成并且新的视图控制器`instantiateViewControllerWithIdentifier`再次加载了“”时，它会被释放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:16:52.910

HUD 不应丢失。如果持有引用的控制器被释放，您只会丢失对它的引用。

解决方案：只需将 HUD 的引用传递给您的主视图控制器。或者之前创建主视图控制器（不显示它）并在那里执行所有 HUD 逻辑。

要传递参考：

```
self.topViewController.hud = hud; 
```

# c - C socket recv() 错误处理

> ID：16039275
> 
> 赞同：0
> 
> 时间：2013-04-16T14:06:08.003
> 
> 标签：c

我对套接字中的 recv() 函数有疑问（在 linux Raspberri Pi 上）

为什么我的程序停在：

```
if ((numbytes = recv(fd, odp, 100, 0)) == -1) {
    printf("\n error while test recv 1");
    perror("recv");
    reconnect = 1;
} 
```

是的，有一个错误：“资源暂时不可用”

当我看见： `printf("\n error while test recv 1");`

我想处理重新连接稍后制作的内容。但是我在终端窗口上看到我的程序停止：

`error while test recv 1`

我试过：

`signal(SIGPIPE, SIG_IGN);`

比：

`signal(SIGPIPE, my_function);`

但它停在任何一个。

一些代码：

```
int main(int argc, char *argv[])
{

while(1) {          

    if(reconnect){
        close(fd);
        fd = createSocket(argv[1]);
        reconnect=0;
    }

reconnect = connectionTest(fd);

}

int connectionTest(int *fd) {

  numbytes=send(fd, buf, 100,0);

  if ((numbytes = recv(fd, reply, 100, 0)) == -1) {
/* HERE IT STOPS */
    perror("recv");
    printf("\n error while test recv 1");

    reconnect = 1;

  }

    return reconnect;
}

int createSocket(char *server_addr){

 int sockfd;
 struct addrinfo hints, *servinfo, *p;
 int rv;
 char s[INET6_ADDRSTRLEN];
 int set = 1;

signal(SIGPIPE, SIG_IGN);

printf("connect to: %s", server_addr); 

    memset(&hints, 0, sizeof hints);
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;

    if ((rv = getaddrinfo(server_addr, PORT, &hints, &servinfo)) != 0) {
        fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(rv));
        return 1;
    }

    // loop through all the results and connect to the first we can
    for(p = servinfo; p != NULL; p = p->ai_next) {
        if ((sockfd = socket(p->ai_family, p->ai_socktype,
                p->ai_protocol)) == -1) {
            perror("client: socket");
            continue;
        }
        else printf("socketd created! \n");

    int set = 1;
setsockopt(sockfd, SOL_SOCKET, MSG_NOSIGNAL, (void *)&set, sizeof(int));

      if (setsockopt( sockfd, SOL_SOCKET, SO_KEEPALIVE, (void *)&set, sizeof(int)) < 0 )
      perror("setsockopt failed \n");

struct timeval timeout;
  timeout.tv_sec = 4;
  timeout.tv_usec = 0;

      if (setsockopt(sockfd, SOL_SOCKET, SO_RCVTIMEO, (char *)&timeout, sizeof(timeout)) < 0 ) 
      perror("setsockopt failed \n");

      if (setsockopt(sockfd, SOL_SOCKET, SO_SNDTIMEO, (char *)&timeout, sizeof(timeout)) < 0 ) 
      perror("setsockopt failed \n");

      printf("Try to connect \n");
      if (connect(sockfd, p->ai_addr, p->ai_addrlen) == -1) {
        close(sockfd);
        perror("client: connect");
      }
      else {
        printf("i have connection");
        break;
     }
   }

printf("next1");  

    if (p == NULL) {
        fprintf(stderr, "client: failed to connect\n");
        return 2;
    }

    inet_ntop(p->ai_family, get_in_addr((struct sockaddr *)p->ai_addr),
            s, sizeof s);
    printf("client: connecting to %s\n", s);
    freeaddrinfo(servinfo); // all done with this structure

return  sockfd;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:21:36.617

`read()`不得退回 EPIPE **。**

如果 a是针对已经由另一方甚至是d`write()`的连接发出的，那么在任何情况下，发出过程都会出错。`shutdown()``close()`

A`SIGPIPE`被提出，如果没有处理也没有被阻止，该过程将终止。如果`SIGPIPE`被处理或阻塞`write()`应返回`-1`并设置`errno`为`EPIPE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:10:37.273

您的程序可能会停止，`recv`因为它接收到`SIGPIPE`信号。

如果您已经尝试忽略此信号，`signal(SIGPIPE, SIG_IGN)`请注意您应该在启动任何线程之前执行此操作，否则可能会在您忽略它之前捕获该信号。

* * *

另请注意，您可以使用`setsockopt`配置您的套接字不生成 SIGPIPE 信号：

```
int optval = 1;
setsockopt(cs, SOL_SOCK, SO_NOSIGPIPE, (void *)&optval, sizeof(int)) 
```

这在您的系统中可能不可用。

* * *

您的系统还可能允许您在 recv 中使用 MSG_NOSIGNAL 选项以避免引发 SIGPIPE 信号：

```
recv(fd, odp, 100, MSG_NOSIGNAL )) 
```

我认为它适用于 Linux 2.2+

* * *

一旦信号被正确忽略，您`recv`应该返回并且您应该能够处理错误。

编辑

此外，您可能在这里遇到 XY 问题，**如果您想检测管道是否损坏，您实际上不必读取或写入它**，您可以使用[poll](http://linux.die.net/man/2/poll)，另请参阅：[Linux：检查套接字/管道是否不做 read()/write() 就坏了](https://stackoverflow.com/questions/9212243/linux-checking-if-a-socket-pipe-is-broken-without-doing-a-read-write)。

# python - Python 中 **kwargs 参数的可变性

> ID：16039280
> 
> 赞同：10
> 
> 时间：2013-04-16T14:06:27.527
> 
> 标签：python, dictionary, immutability

考虑我`kwargs`在方法中更改 dict 的情况：

```
def print_arg(**kwargs):
    print kwargs.pop('key') 
```

`pop_arg`如果我用这样的字典调用该方法：

```
mydict = {'key':'value'}
print_arg(**mydict) 
```

会`mydict`被这个电话改变吗？

我也对允许`mydict`更改或不更改的底层方法调用机制的更详细解释感兴趣。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-16T14:07:07.640

不，`mydict`不会改变。kwargs 被解压成一本新字典。

考虑以下情况：

```
def print_arg(key=1, **kwargs):
    print(key)
    print(kwargs)

print_arg(**{'key':2,'foo':3,'bar':4}) 
```

在这种情况下，很明显 kwargs 与您传入的字典不同，因为当它被解包时，它丢失了`'key'`密钥。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T14:13:19.350

@mgilson 的回答是正确的。但是你也应该注意浅拷贝。

```
def print_arg(**kwargs):
    print kwargs.pop('key')
    kwargs['list'].pop()  # will affect the original
    kwargs['dict'].pop('a') #will affect the original

mydict = {'key':'value', 'list':[2,3,4,5] ,'dict': { 'a':1,'b':2 }}
print_arg(**mydict)
print (mydict)  # Output : {'dict': {'b': 2}, 'list': [2, 3, 4], 'key': 'value'} 
```

# [http://codepad.org/diz38tWF](http://codepad.org/diz38tWF)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-16T14:16:36.633

Let's see:

```
import dis
dis.dis(lambda: print_arg(**{'key': 'value'})) 
```

```
 6           0 LOAD_GLOBAL              0 (print_arg)
              3 BUILD_MAP                1
              6 LOAD_CONST               1 ('value')
              9 LOAD_CONST               2 ('key')
             12 STORE_MAP           
             13 CALL_FUNCTION_KW         0
             16 RETURN_VALUE 
```

Let's find what `CALL_FUNCTION_KW` does (`ceval.c`):

```
 case CALL_FUNCTION_VAR:
    case CALL_FUNCTION_KW:
    case CALL_FUNCTION_VAR_KW:
    {

        // ... 

        x = ext_do_call(func, &sp, flags, na, nk);

        // ... 
```

```
static PyObject *
ext_do_call(PyObject *func, PyObject ***pp_stack, int flags, int na, int nk)
{
    int nstar = 0;
    PyObject *callargs = NULL;
    PyObject *stararg = NULL;
    PyObject *kwdict = NULL;
    PyObject *result = NULL;

    if (flags & CALL_FLAG_KW) {                     // if ** is involved
        kwdict = EXT_POP(*pp_stack);        // get the dict passed with **      
        if (!PyDict_Check(kwdict)) {
            PyObject *d; 
            d = PyDict_New();                       // make a NEW dict
            if (d == NULL)
                goto ext_call_fail;
            if (PyDict_Update(d, kwdict) != 0) {    // update it with old
                // .. fail ..
                goto ext_call_fail;
            }
            Py_DECREF(kwdict);   
            kwdict = d;              // kwdict is now the new dict
        }
    }

    ....  
    result = PyObject_Call(func, callargs, kwdict);  // call with new dict 
```

# ldap - 未解决的错误 javax.security.jacc ldap + glassfishserver

> ID：16039287
> 
> 赞同：1
> 
> 时间：2013-04-16T14:06:50.153
> 
> 标签：ldap, glassfish-3

我收到以下错误，在我看来，即使在使用 LDAPRealm 成功登录后，它也会导致 glassfish 服务器的“请求未授予”响应。

我该如何解决这个问题？

```
(unresolved javax.security.jacc.WebUserDataPermission /* null)
 (unresolved com.sun.corba.ee.impl.presentation.rmi.DynamicAccessPermission access null)
 (unresolved javax.security.jacc.WebResourcePermission/*!DELETE,GET,HEAD,OPTIONS,POST,PUT,TRACE)
 (unresolved com.sun.enterprise.security.CORBAObjectPermission * *) 
```

我的 web.xml 看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>org.richfaces.push.jms.enabled</param-name>
        <param-value>false</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            180
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>/faces/welcome.xhtml</welcome-file>
    </welcome-file-list>
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>Restricted Access</web-resource-name>
            <url-pattern>/*</url-pattern>
            <http-method>GET</http-method>
            <http-method>POST</http-method>
            <http-method>HEAD</http-method>
            <http-method>PUT</http-method>
            <http-method>OPTIONS</http-method>
            <http-method>TRACE</http-method>
            <http-method>DELETE</http-method>
            </web-resource-collection>
        <auth-constraint>
            <role-name>USERS</role-name>
        </auth-constraint>
    </security-constraint>
    <login-config>
        <auth-method>FORM</auth-method>
        <realm-name>LDAPRealm</realm-name>
        <form-login-config>
            <form-login-page>/login.xhtml</form-login-page>
            <form-error-page>/login.xhtml</form-error-page>
        </form-login-config>
    </login-config>    
    <security-role>
        <role-name>USERS</role-name>
    </security-role>
</web-app> 
```

# ruby-on-rails-3.2 - 是否可以有条件地在管道中加载某些 JS 资产？

> ID：16039290
> 
> 赞同：2
> 
> 时间：2013-04-16T14:06:55.480
> 
> 标签：ruby-on-rails-3.2, asset-pipeline

我正在使用 Stripe 让用户订阅我的 Rails 3.2 应用程序。我有一个订阅模型，在 JS 资产中我调用了该`Stripe`对象。但我只在订阅过程的特殊布局文件中包含 Stripe javascript 文件。它不包含在我的主要应用程序布局中。

因此，如果我没有在主应用程序布局模板中包含 Stripe JS 文件，我当然会收到错误，因为 subscription.js.coffee 正在引用 Stripe。

除了我设置的特殊订阅模板之外，有没有办法不加载订阅资产？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:39:26.087

是的，您`require_tree`的 application.js 清单文件中可能有。

这意味着您的所有coffeescript 文件，包括subscriptions.js.coffee 都包含在您的application.js 中。

接下来，您的布局中可能有与此类似的一行：

```
<%= javascript_include_tag 'application' %> 
```

这意味着您的应用程序清单文件（包括 subscription.js.coffee 代码）包含在您的布局中。

解决方案是不在应用程序清单文件中包含这段代码。

因此，在您的 application.js 清单文件中而不是 using 中`require_tree`，您可以执行以下操作：

```
//= require jquery
//= require jquery_ujs
//= require posts
//= require comments 
```

在清单文件中，我假设您有其他布局，您可以包含这样的订阅。

```
//= require_jquery
//= require jquery_ujs
//= require subscriptions 
```

请注意`posts`和`comments`是示例。

# zip - 中央文件头中存储的文件的压缩和未压缩大小是否应该相等？

> ID：16039298
> 
> 赞同：0
> 
> 时间：2013-04-16T14:07:06.460
> 
> 标签：zip

如果文件未压缩（即存储）在 ZIP 文件中，其对应的中央文件头条目是否具有相同的压缩和未压缩大小？或者是否有可能缺少其中之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:49:22.837

是的，它应该具有两种大小，其中压缩大小大于或等于未压缩。使用加密时它可能更大。

# vim - Netrw 和其他窗口同时打开：无窗口切换

> ID：16039309
> 
> 赞同：2
> 
> 时间：2013-04-16T14:07:30.843
> 
> 标签：vim, netrw

当我同时打开一个 netrw 窗口和任何其他窗口（`:new`或帮助窗口，例如）时，我无法使用`<c-w><c-w>`或任何其他键在这两个窗口之间切换。我什至可以打开一个新窗口`:new`，但仍然只能在除 netrw 窗口之外的所有窗口之间切换。但是，如果所有其他窗口都关闭，我可以专注于 netrw 窗口。为什么会这样，这是一种正确的行为，有没有办法在这种情况下正常切换窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:20:35.177

我认为这不是正确的行为。

检查您是否有任何可能导致干扰的映射`:map <c-w>`。

[检查最新版本的netrw (v147)](http://www.vim.org/scripts/script.php?script_id=1075)是否发生这种情况。如果仍然发生，您可以尝试逐步评论`.vimrc`并删除您的插件，看看此问题是否停止。

# spring - GWT - RemoteService 接口和 Spring - 如何获取 HttpSession？

> ID：16039310
> 
> 赞同：2
> 
> 时间：2013-04-16T14:07:32.193
> 
> 标签：spring, gwt, httpsession

我将 GWT (2.5) 与 RPC、Spring 和 Postgresql 一起用于我的项目。我的问题是关于 HttpSession 处理。所有对服务器的查询都由 Spring (DispatchServlet) 分派到我的 GwtController (extends RemoteServiceServlet) 。特定的 RemoteService 被注入到 GwtController 中。在 GwtContorller 中获取 HttpSession 很容易。例如通过 getThreadLocalRequest().getSession() 或仅来自 request.getSession()。我的问题是如何在 RemoteService 中获取 HttpSession 对象？

```
public class GwtRpcController extends RemoteServiceServlet {
……………
private RemoteService remoteService;
private Class remoteServiceClass;
………………

public ModelAndView handleRequest(HttpServletRequest arg0, HttpServletResponse arg1) throws Exception {
    …………
} 

public String processCall(String payload) throws SerializationException {
    …………
}

public void setRemoteService(RemoteService remoteService) {
    …………….
}

} 
```

我的接口 - 实现 RemoteService 的 DataService

```
public class DataServiceImpl implements DataService {

public Data getData(){

    !!!!! Here I want to get HttpSession !!!!!
    …………………………

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:41:58.337

您可以在其中维护 a并将`ThreadLocal`您`Servlet`的 current 存储在那里`Request`，然后`Request`使用静态方法公开您的。

```
public class GwtRpcController extends RemoteServiceServlet {

  static ThreadLocal<HttpServletRequest> perThreadRequest = 
         new ThreadLocal<HttpServletRequest>();

  @Override
  public String processCall(String payload) throws SerializationException {
    try {
      perThreadRequest.set(getThreadLocalRequest());
      return super.processCall(payload);
    } finally {
      perThreadRequest.set(null);
    }
  }

  public static HttpServletRequest getRequest() {
    return perThreadRequest.get();
  }
}

 public class DataServiceImpl implements DataService {
    public Data getData(){
       HttpServletRequest request = GwtRpcController.getRequest();
       HttpSession session = request.getSession();
    }
 } 
```

# c# - Html.Raw() 输出是 & 而不是 &

> ID：16039314
> 
> 赞同：4
> 
> 时间：2013-04-16T14:07:41.877
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4

我想在我的控制器中创建一个规范的 url 并将其传递给我的 ViewModel 以在标题中显示它。

我的 ViewModel 中的 url 字符串是：

```
/books?page=4&pagesize=25 
```

我有以下代码：

```
@if (!string.IsNullOrEmpty(Model.LinkCanonical))
{
    <link rel="canonical" href="@Html.Raw(Model.LinkCanonical)" />
} 
```

输出是：

```
<link rel="canonical" href="/books?page=4&amp;pagesize=25" /> 
```

Afaik`Html.Raw()`助手应该输出`&`而不是`&amp;`.

这怎么可能发生？

**编辑：**

此解决方案有效，并且已在此处提及：[Why is Html.Raw escaping & and in anchor tag in ASP.NET MVC 4?](https://stackoverflow.com/questions/11963453/why-is-html-raw-escaping-ampersand-in-anchor-tag-in-asp-net-mvc-4/11973960#11973960) ：

```
 @Html.Raw("<link rel=\"canonical\" href=" + Model.LinkCanonical + "\" />") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:18:33.547

这是正确的输出 - 浏览器将处理 html 编码的 & 符号，并且 URL 将确实指向`/books?page=4&pagesize=25`（试试看！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:10:26.337

尝试：

```
<link rel="canonical" href="@Html.Raw(HttpUtility.HtmlDecode(Model.LinkCanonical))" /> 
```

# eclipse - 未链接到最终 APK 的资源

> ID：16039315
> 
> 赞同：0
> 
> 时间：2013-04-16T14:07:46.667
> 
> 标签：eclipse, proguard, android-resources, apk

我可以在模拟器中正常运行我的应用程序，并*使用相同的源*编译最终的 APK，但在另一台具有完全相同环境（Android-SDK、Eclipse 和源代码！）复制到那里的计算机上，项目的资源不会编译到最终版本中创建分发包时的 APK。因此，分发的 APK 只有 122k 大小，而正确的大小应该是 290k 左右。尝试在设备上安装时显示为“无效”。

知道为什么吗？我使用的是原始的 proguard 文件还是一个空的文件都没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:24:31.007

我的意思是文件`.project`以点开头。它应该看起来像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>MiniCallWidget</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
            <buildCommand>
                    <name>com.android.ide.eclipse.adt.ResourceManagerBuilder</name>
                    <arguments>
                    </arguments>
            </buildCommand>
            <buildCommand>
                    <name>com.android.ide.eclipse.adt.PreCompilerBuilder</name>
                    <arguments>
                    </arguments>
            </buildCommand>
            <buildCommand>
                    <name>org.eclipse.jdt.core.javabuilder</name>
                    <arguments>
                    </arguments>
            </buildCommand>
            <buildCommand>
                    <name>com.android.ide.eclipse.adt.ApkBuilder</name>
                    <arguments>
                    </arguments>
            </buildCommand>
    </buildSpec>
    <natures>
            <nature>com.android.ide.eclipse.adt.AndroidNature</nature>
            <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
</projectDescription> 
```

# javascript - TypeError: CKEDITOR.instance 未定义——测试对象实例给出错误

> ID：16039319
> 
> 赞同：1
> 
> 时间：2013-04-16T14:08:00.297
> 
> 标签：javascript, jquery, ckeditor, typeof

情况：在 jQuery 对话框中调用 CKEDITOR（这里有很多挑战）。我的具体问题是，当我测试是否存在 CKEDITOR 实例时，总是会抛出错误。

浏览器测试：Firefox 21、IE 9、Safari 5.1.7

错误：错误：TypeError：CKEDITOR.instance 未定义

所有这些测试 CKEDITOR 实例的方法总是抛出一个 javascript 错误：

if(!CKEDITOR.instance['editor']){

如果（CKEDITOR.instance['editor']）{

if(!typeof CKEDITOR.instance['editor'] == "undefined"){

if(!typeof(CKEDITOR.instance['editor']) == "undefined"){

if(typeof CKEDITOR.instance['editor'] != "undefined"){

if(typeof CKEDITOR.instance['editor'] !== "undefined"){

if(typeof CKEDITOR.instance['editor'] === "undefined"){

当然，在发表这篇文章之前，我浏览了 StackOverflow。我已经尝试过 StackOverflow 上建议的“typeof”和“undefined”的所有组合。

如果在测试实例是否存在时出错，如何测试对象实例的存在？一个难题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:32:15.653

**不是**：

```
CKEDITOR.instance 
```

**但：**

```
CKEDITOR.instances 
```

它总是存在的——没有必要对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:13:32.263

您正在测试错误的对象（或本例中的对象属性）。是未定义的，因此在测试它的一个属性之前`instance`，您必须首先检查是否已定义。`instance`

```
if ( CKEDITOR.instance && CKEDITOR.instance['editor'] ) { 
```

或者如果您想知道何时未定义，

```
if ( !CKEDITOR.instance || !CKEDITOR.instance['editor'] ) { 
```

# git - 我同事的更改删除了我在 git 中的提交

> ID：16039320
> 
> 赞同：2
> 
> 时间：2013-04-16T14:08:02.823
> 
> 标签：git

偶尔，我会遇到一个非常奇怪和令人沮丧的 git 问题。我提交并推送一些包含新文件和修改文件的更改，而我的同事将一些其他不相关的内容提交到不同的文件。

现在，当他拉出我的更改时，我新添加的文件在他这边显示为未跟踪，并且我的更改被还原。没有意识到这一点，他提交并推送到存储库，而我的更改完全被 git 忘记了。

例如，如果我更改了 file `A`，那么如果我这样做`git log -p A`了，我根本看不到他对我的更改的还原，我也看不到我更改它的提交。但是如果我查看 git 历史并找到那个提交，我的更改就在那个提交中。我的提交仍然存在于 git 历史记录中，但没有 git commit 可以恢复我的东西，但不知何故，它在最新的 master 中被恢复了，因为我的提交中的更改已以某种方式从 master 分支中删除。

有没有人遇到过类似的事情？我的第一个想法是他在提交自己的更改之前正在拉取，但他声称他在拉取之前就提交了。另一种可能性是他有一个 IDE（PyCharm），里面有一个 git 客户端（但他使用命令行 git），它以某种方式破坏了他机器中的 git。另一件需要注意的是，他运行 Windows 而我运行 OS X，所以可能是 git 版本冲突。

另一件可能很重要的事情：Doing`git log -p myfile`不会显示我更改它的提交，显示我的更改，但*没有*`git log --follow -p myfile`显示恢复它的其他更改。

当我发布时`git log`，我可以看到我做出更改的提交以及与之相关的更改`fileA`。只有当我发布时，`git log -p fileA`我才能看到对`fileA`. 所以，提交在那里，合并到主控，但它的影响已经消失了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:20:55.450

看起来推动更改的人（或他正在使用的 IDE）正在执行强制推送（即`git push -f`git 覆盖历史记录）。

为了证实这个理论，你可以这样做：

创建一个全新的 repo 克隆（因为在您当前的 repo 中，提交可能仍然可以通过某些本地分支或标签访问）：

```
mkdir -p ~/temp-git-dir
cd ~/temp-git-dir
git clone <REPO-URL>
git fsck --unreachable --no-reflogs 2>/dev/null | grep 'unreachable commit' | awk '{print $3;}' | xargs -r -n 1 git show --oneline --name-status 
```

如果您的提交是列出的提交之一，那么它证实了这一理论。

**解决方案**：

允许强制推送 repo 总是一个坏主意，尤其是当工作流涉及多个开发人员时。您可以与您的 SCM 管理员交谈，看看他们是否可以禁止强制推送或仅在真正需要时才允许。

工作流程应该涉及每个开发人员尝试从远程获取更改，并将本地提交与来自远程的新提交合并或重新设置，然后将更新的 refspec 推送回远程。

# ffmpeg - ffmpeg复制rtmp流，但没有音频

> ID：16039322
> 
> 赞同：1
> 
> 时间：2013-04-16T14:08:06.300
> 
> 标签：ffmpeg, rtmp, flash-media-server, flashmedialiveencoder

我正在从 Adob​​e Flash Media Live Encoder 向 Flash 媒体服务器发送流，我正在尝试使用 FFmpeg 将此流复制到另一个 FMS

```
ffmpeg -analyzeduration 0 -i "rtmp://x.x.x.x/live/stream1 live=1" \
  -vcodec copy -acodec copy -f flv rtmp://y.y.y.y/live/stream1 
```

但没有音频。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T20:07:01.637

试试这样：ffmpeg -i "rtmp://xxxx/live/stream1 live=1" \ -vcodec copy -acodec copy -f flv rtmp://yyyy/live/stream1

# asp.net - IIS 似乎没有验证我的请求

> ID：16039324
> 
> 赞同：1
> 
> 时间：2013-04-16T14:08:12.650
> 
> 标签：asp.net, sql, wcf, iis

好的，完全披露我是 IIS 和 WCF 的新手，所以我买了一本书并被卡住了。我可以在工作时在我的开发盒上开发，因为它是带有 IIS 7 的 Windows 7，但在家里使用 Windows 8 和 IIS 8 我相信有两个问题，我只是不知道哪个步骤可能导致问题。我正在使用 Visual Studio 2012 Professional 在 .NET 4.5 环境中开发这两种环境。

基本上我认为 IIS 设置错误，因为我正在关注一本名为“Windows Communication Foundation 4，Step be Step”的书 [http://www.amazon.com/Windows-Communication-Foundation-Step-Microsoft/dp/0735645566](https://rads.stackoverflow.com/amzn/click/com/0735645566)

我按照设置说明进行操作，但它们在家里有点不同，我很好奇如何纠正这个错误：

"响应消息的内容类型 text/html; charset=utf-8 与绑定的内容类型 (text/xml; charset=utf-8) 不匹配。如果使用自定义编码器，请确保 IsContentTypeSupported 方法正确实施。响应的前 1024 个字节是：'"

此代码在我创建 WCF 服务库 Web 项目后发生，它引用实体框架模型。您创建了一个引用 Web 服务的控制台应用程序，它运行良好。您将该 Web 服务部署到 IIS 并更改配置文件以引用该位置，它仅在 Windows 8 机器上出现上述错误，Windows 7 运行良好。

我注意到我在设置中无法执行的两个步骤，并认为它们是罪魁祸首，但还不知道如何针对 Windows 8 进行调整。

1.  从 VS 命令提示符：'aspnet_regiis -iru'，这对于 IIS 8 根本不起作用。不知道打开 IIS 时设置哪些选项以设置 asp.net 操作的通用正常。- 我确实尝试进入 IIS 并在“身份验证”下打开匿名身份验证和 ASP.NET。仍然没有解决任何问题。

2.  这本书附带了一个 sql 对象，该对象随后将两个用户注册到“Adventureworks”的数据库中。显然我在猜测，因为第 1 部分不起作用或由于 Windows 8 设置，这些用户不存在，因此无法注册。注册用户的代码是：

'CREATE USER [IIS APPPOOL\DefaultAppPool] FOR LOGIN [IIS APPPOOL\DefaultAppPool] GO EXEC sp_addrolemember N'db_owner', [IIS APPPOOL\DefaultAppPool] GO GO CREATE USER [IIS APPPOOL\ASP.NET v4.0] FOR LOGIN [IIS APPPOOL\ASP.NET v4.0] GO EXEC sp_addrolemember N'db_owner', [IIS APPPOOL\ASP.NET v4.0] GO'

*   我知道 SQL 代码，但我知道他们试图引用的用户不存在，所以我可以通过 IIS 或通过控制面板添加它们吗？我不确定，所以我不知道 IIS，所以我想我应该先问一下。

非常感谢任何帮助，因为我知道这可能只是一个简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:43:09.353

好吧，我想我明白了，但不是我希望的那样。看来我需要在 IIS 8 中使用匿名访问运行该服务。转到默认站点“禁用”ASP.NET 模拟下的“身份验证”。但是....由于某种原因，.NET 4.5 的 IIS8 和 WCF 选项在 Windows 8 中默认没有启用。所以我发现了这个：[http://proq.blogspot.com/2012/09/wcf-on-iis- and-windows-8.html](http://proq.blogspot.com/2012/09/wcf-on-iis-and-windows-8.html)并启用它们。

奇怪的是，无论如何我知道在某些时候我将不得不在我的本地机器上注册 ASP.NET 用户来模仿服务器环境。但暂时匿名访问似乎有效。我很好奇如果 IIS 知道它有两个选择，而匿名是它失败的第一个原因？是否始终将最严格的策略作为接入点绑定的默认设置？我对 IIS 完全陌生，看来我将不得不学习它以及 WCF。

编辑：使用某些设置运行 VS 2012 时，请务必以管理员身份运行 VS，否则您可能也会遇到问题。

# python - 附加到文件时的问题

> ID：16039325
> 
> 赞同：0
> 
> 时间：2013-04-16T14:08:13.997
> 
> 标签：python

我有以下代码，我想将一些文本添加到已经存在的文件中。

```
with open("travellerList.txt", "a") as myfile:
    myfile.write(ReplyTraveller)
myfile.close() 
```

但我得到：

SyntaxError：无效的语法

错误指向打开命令中的 n。有人可以帮助我了解我在上面的代码片段中犯错的地方吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:10:32.383

该`with`语法仅在 Python 2.6 中完全启用。

您必须使用 Python 2.5 或更早版本：

```
Python 2.5.5 (r255:77872, Nov 28 2010, 19:00:19) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> with open("travellerList.txt", "a") as myfile:
<stdin>:1: Warning: 'with' will become a reserved keyword in Python 2.6
  File "<stdin>", line 1
    with open("travellerList.txt", "a") as myfile:
            ^
SyntaxError: invalid syntax 
```

`from __future__ import with_statement`在 Python 2.5 中使用以启用那里的语法：

```
>>> from __future__ import with_statement
>>> with open("travellerList.txt", "a") as myfile:
...     pass
... 
```

从[`with`声明规范](http://docs.python.org/2/reference/compound_stmts.html#the-with-statement)：

> *2.5 版中的新功能。*
> 
> [...]
> 
> **注意**：在 Python 2.5 中，仅在启用该功能`with`时才允许使用该语句。`with_statement`它始终在 Python 2.6 中启用。

使用文件作为上下文管理器的意义在于它会自动关闭，因此您的`myfile.close()`调用是多余的。

对于 Python 2.4 或更早版本，恐怕你不走运。您必须改用`try`-`finally`语句：

```
myfile = None
try:
    myfile = open("travellerList.txt", "a")
    # Work with `myfile`
finally:
    if myfile is not None:
        myfile.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:10:29.107

你需要摆脱`myfile.close()`. 这工作正常：

```
with open("travellerList.txt", "a") as myfile:
    myfile.write(ReplyTraveller) 
```

该块将在块的末尾`with`自动关闭。`myfile`当您尝试自己关闭它时，它实际上已经超出了范围。

但是，您似乎使用的是早于 2.6 的 python，其中`with`添加了该语句。尝试升级 python，或者`from __future__ import with_statement`如果无法升级，请在文件顶部使用。

最后一件事，我知道ReplyTraveller 是什么，但是您将它命名为一个类，它需要是一个字符串才能将其写入文件。

# c# - 如何根据 IP 将传入请求路由到特定应用程序？

> ID：16039326
> 
> 赞同：1
> 
> 时间：2013-04-16T14:08:15.900
> 
> 标签：c#, asp.net, asp.net-mvc, iis, iis-7

如何根据用户的 IP 地址将请求路由到不同的 IIS 应用程序？

我希望将生产站点的测试版本试用到特定的 IP 地址。我宁愿不必强迫这些用户访问单独的 URL。所以，我问在 IIS 中是否有办法强制服务器根据请求用户的 IP 地址通过辅助应用程序处理请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:13:18.760

这在 IIS 7+ 上使用应用程序请求路由是可能的：

[http://www.iis.net/downloads/microsoft/application-request-routing](http://www.iis.net/downloads/microsoft/application-request-routing)

# rspec - 通过 Spork 运行时如何在 ApplicationHelper Spec 中包含路由？

> ID：16039331
> 
> 赞同：7
> 
> 时间：2013-04-16T14:08:40.863
> 
> 标签：rspec, helper, rails-routing, spork

我有一个 rspec 规范：

```
require "spec_helper"

describe ApplicationHelper do
  describe "#link_to_cart" do
    it 'should be a link to the cart' do
      helper.link_to_cart.should match /.*href="\/cart".*/
    end
  end
end 
```

和 ApplicationHelper：

```
module ApplicationHelper
  def link_to_cart
    link_to "Cart", cart_path
  end
end 
```

这在访问该站点时有效，但规范失败，出现关于路由不可用的 RuntimeError：

```
RuntimeError:
   In order to use #url_for, you must include routing helpers explicitly. For instance, `include Rails.application.routes.url_helpers 
```

所以，我`Rails.application.routes.url`在我的规范中包含了`spec_helper`-file 甚至它`ApplicationHelper`本身，但无济于事。

编辑：我正在通过 spork 运行测试，~~也许这与它~~有关并导致了问题。

使用 Spork 运行时，我必须如何包含这些路线助手？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T07:50:46.357

您需要`include`在 的模块级别添加`ApplicationHelper`，因为 ApplicationHelper 默认情况下不包含 url 帮助程序。像这样的代码

```
module AppplicationHelper
  include Rails.application.routes.url_helpers

  # ...
  def link_to_cart
    link_to "Cart", cart_path
  end

 end 
```

然后代码将起作用，您的测试将通过。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-06T22:16:10.683

如果您将[spork](https://github.com/sporkrb)与[rspec](http://rspec.info/)一起使用，则应将 url_helper 方法添加到您的 rspec 配置中 -

'/spec/spec_helper' 文件中的任何位置：

```
# spec/spec_helper.rb

RSpec.configure do |config|
  ...
  config.include Rails.application.routes.url_helpers
  ...
end 
```

这会加载一个名为“Routes”的内置 ApplicationHelper，并将“#url_helpers”方法调用到 RSpec 中。无需将其添加到 '/app/helpers/application_helper.rb' 中的 ApplicationHelper 中，原因有两个：

1.  您只是将“路由”功能复制到不需要它的地方，本质上是控制器，它已经从 ActionController::Base 继承了它（我认为。也许 ::Metal。现在不重要）。所以你不会干燥 - 不要重复自己

2.  这个错误是特定于 RSpec 配置的，在它坏的地方修复它（我自己的小格言）

接下来，我建议稍微修正一下你的测试。尝试这个：

```
require "spec_helper"

describe ApplicationHelper do
  describe "#link_to_cart" do
    it 'should be a link to the cart' do
     visit cart_path 
     expect(page).to match(/.*href="\/cart".*/)
    end
  end
end 
```

我希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T19:19:00.563

我在使用`guard`with 时`spring`发现，就我而言，问题是由 spring 引起的。运行`spring stop`后就解决了。但有时当我更改`ApplicationController`.

# smarty - 使用 smarty 进行 URL 编码

> ID：16039340
> 
> 赞同：5
> 
> 时间：2013-04-16T14:08:59.617
> 
> 标签：smarty

我想用 smarty 编码一个 url。

```
 <a href="https://www.facebook.com/sharer/sharer.php?u={$var} " target="_blank"></a> 
```

$var 包含我的数据 url

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T14:18:11.577

使用[转义修饰符](http://www.smarty.net/docsv2/en/language.modifier.escape.tpl)，您可以设置可选的 escape_type 'url' 以返回 rawurlencode()。

```
{$var|escape:'url'} 
```

默认情况下 {$var|escape} 使用 escape_type 'html' 并返回 htmlspecialchars() 其中 '&' （与号）变为`&amp;`。所以'url'可能有用。rawurlencode() 保护文字字符不被解释为特殊的 URL 分隔符：

```
<a href="https://www.facebook.com/sharer/sharer.php?u={$var|escape:'url'} " target="_blank"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T07:35:26.087

您还可以使用 PHP 函数 urlencode 作为修饰符。

PHP 函数可以用作修饰符，如果[$security](http://www.smarty.net/docsv2/en/variable.security.tpl)允许的话。

```
//the "rewind" paramater registers the current location
<a href="{$SCRIPT_NAME}?page=foo&rewind={$smarty.server.REQUEST_URI|urlencode}">click here</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:12:02.140

您可以使用转义修饰符

```
{$var|escape} 
```

更多信息请访问： [http ://www.smarty.net/docsv2/en/language.modifier.escape.tpl](http://www.smarty.net/docsv2/en/language.modifier.escape.tpl)

# java - JTable 功能

> ID：16039341
> 
> 赞同：0
> 
> 时间：2013-04-16T14:09:00.597
> 
> 标签：java, mysql, swing, jtable

我正在创建一个基本发票页面，我想在其中输入产品详细信息我将有一个包含四列的 JTable，数量、描述、单位成本和总计

![表](https://i.stack.imgur.com/SUDci.jpg)

当我在我想要的表单中完成输入详细信息时，然后单击保存，详细信息将自动更新到数据库。

有人可以告诉我进行此过程的最佳方法。普通的`JTable`会这样做还是有其他类型的桌子更合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:19:17.000

我会使用自定义`TableModel`和 JPA/Hibernate。

您将在下面找到一个非常基本的示例（当然，代码需要拆分）。

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.ExecutionException;

import javax.persistence.Entity;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Persistence;
import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;
import javax.swing.table.AbstractTableModel;

public class TestSwingTableJPA {

    private JPATableModel tableModel;
    private JFrame frame;

    private class JPATableModel extends AbstractTableModel {

        private List<Item> items = new ArrayList<TestSwingTableJPA.Item>();

        private EntityManager entityManager;

        @Override
        public int getRowCount() {
            return items.size();
        }

        @Override
        public int getColumnCount() {
            return 4;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            Item item = getValueAt(rowIndex);
            switch (columnIndex) {
            case 0:
                return item.getQuantity();
            case 1:
                return item.getDescription();
            case 2:
                return item.getCostPerUnit();
            case 3:
                if (item.getQuantity() != null && item.getCostPerUnit() != null) {
                    return item.getCostPerUnit().multiply(item.getQuantity());
                } else {
                    return null;
                }
            default:
                break;
            }
            return null;
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            Item item = getValueAt(rowIndex);
            switch (columnIndex) {
            case 0:
                item.setQuantity((BigDecimal) aValue);
                fireTableCellUpdated(rowIndex, 3); // Total may also have changed
                break;
            case 1:
                item.setDescription((String) aValue);
                break;
            case 2:
                item.setCostPerUnit((BigDecimal) aValue);
                fireTableCellUpdated(rowIndex, 3); // Total may also have changed
                break;
            }
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            switch (columnIndex) {
            case 0:
            case 2:
            case 3:
                return BigDecimal.class;
            case 1:
                return String.class;
            }
            return Object.class;
        }

        @Override
        public String getColumnName(int column) {
            switch (column) {
            case 0:
                return "Quantity";
            case 1:
                return "Description";
            case 2:
                return "Cost Per Unit";
            case 3:
                return "Total";
            default:
                break;
            }
            return null;
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return columnIndex == 0 || columnIndex == 1 || columnIndex == 2;
        }

        private Item getValueAt(int row) {
            return items.get(row);
        }

        public void setItems(List<Item> items) {
            this.items = items;
            fireTableDataChanged();
        }

        public void addItem(Item item) {
            getEntityManager().persist(item);
            this.items.add(item);
            fireTableRowsInserted(this.items.size() - 1, this.items.size() - 1);
        }

        public List<Item> reload() {
            return getEntityManager().createNamedQuery("selectAllItems", Item.class).getResultList();
        }

        public void save() {
            getEntityManager().getTransaction().begin();
            getEntityManager().getTransaction().commit();
        }

        public EntityManager getEntityManager() {
            if (entityManager == null) {
                // You need to configure your persistence unit in META-INF/persistence.xml
                EntityManagerFactory factory = Persistence.createEntityManagerFactory("MyPersistenceUnit");
                entityManager = factory.createEntityManager();
            }
            return entityManager;
        }

    }

    public TestSwingTableJPA() {
    }

    @Entity(name = "Item")
    @NamedQueries({ @NamedQuery(name = "selectAllItems", query = "select item from Item as item") })
    public static class Item {

        private Long id;

        private BigDecimal quantity;
        private String description;
        private BigDecimal costPerUnit;

        public BigDecimal getQuantity() {
            return quantity;
        }

        public void setQuantity(BigDecimal quantity) {
            this.quantity = quantity;
        }

        public String getDescription() {
            return description;
        }

        public void setDescription(String description) {
            this.description = description;
        }

        public BigDecimal getCostPerUnit() {
            return costPerUnit;
        }

        public void setCostPerUnit(BigDecimal costPerUnit) {
            this.costPerUnit = costPerUnit;
        }

        @Id
        @GeneratedValue(strategy = GenerationType.AUTO)
        public Long getId() {
            return id;
        }

        public void setId(Long id) {
            this.id = id;
        }
    }

    protected void initUI() {
        frame = new JFrame(TestSwingTableJPA.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JTable table = new JTable(tableModel = new JPATableModel());
        table.setFillsViewportHeight(true);
        table.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if (e.getClickCount() == 2 && table.rowAtPoint(e.getPoint()) == -1) {
                    tableModel.addItem(new Item());
                }
            }
        });
        frame.add(new JScrollPane(table));
        JPanel panel = new JPanel();
        JPanel buttonPanel = new JPanel(new GridLayout(1, 0, 5, 5));
        JButton save = new JButton("Save");
        save.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                save();
            }
        });
        JButton reload = new JButton("Reload");
        reload.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                reload();
            }
        });
        buttonPanel.add(save);
        buttonPanel.add(reload);
        panel.add(buttonPanel);
        frame.add(panel, BorderLayout.SOUTH);
        frame.pack();
        frame.setVisible(true);
        reload();
    }

    protected void save() {
        final JDialog dialog = new JDialog(frame);
        JProgressBar progress = new JProgressBar();
        progress.setIndeterminate(true);
        dialog.add(progress);
        dialog.pack();
        dialog.setLocationRelativeTo(frame);
        SwingWorker<Void, Void> worker = new SwingWorker<Void, Void>() {

            @Override
            protected Void doInBackground() throws Exception {
                tableModel.save();
                return null;
            }

            @Override
            protected void done() {
                dialog.dispose();
            }

        };
        worker.execute();
        dialog.setVisible(true);
    }

    protected void reload() {
        final JDialog dialog = new JDialog(frame);
        JProgressBar progress = new JProgressBar();
        progress.setIndeterminate(true);
        dialog.add(progress);
        dialog.pack();
        dialog.setLocationRelativeTo(frame);
        SwingWorker<List<Item>, Void> worker = new SwingWorker<List<Item>, Void>() {

            @Override
            protected List<Item> doInBackground() throws Exception {
                return tableModel.reload();
            }

            @Override
            protected void done() {
                try {
                    tableModel.setItems(get());
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } catch (ExecutionException e) {
                    e.printStackTrace();
                    JOptionPane.showMessageDialog(frame, "Could not fetch items from database", "Error while loading items",
                            JOptionPane.ERROR_MESSAGE);
                } finally {
                    dialog.dispose();
                }
            }

        };
        worker.execute();
        dialog.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                final TestSwingTableJPA testSwingTableJPA = new TestSwingTableJPA();
                testSwingTableJPA.initUI();
            }
        });
    }

} 
```

和persistence.xml

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">

    <persistence-unit name="MyPersistenceUnit">

        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
            <property name="javax.persistence.jdbc.driver" value="org.postgresql.Driver"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:postgresql://localhost:5432/test"/>
            <property name="javax.persistence.jdbc.user" value="test"/>
            <property name="javax.persistence.jdbc.password" value="test"/>

            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.hbm2ddl.auto" value="update" />
        </properties>

    </persistence-unit>

</persistence> 
```

您只需在端口 5432 上使用用户测试（pwd 测试）设置本地 postgresql 数据库“测试”。

这样做的不利方面之一是如果您失去了与数据库的连接。我不确定它的行为方式，但您可能需要重新创建一个新的 EntityManager 并因此丢失所有未保存的更改。我不是 JPA/Hibernate 专家。

如果您使用 Maven，以下是我使用的依赖项：

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.2.0.Final</version>
    </dependency>
    <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>9.1-901-1.jdbc4</version>
    </dependency> 
```

# c++ - 如何通过迭代使迭代器表现得像一个类型？

> ID：16039346
> 
> 赞同：1
> 
> 时间：2013-04-16T14:09:08.210
> 
> 标签：c++, vector, iterator

我想遍历一个搅拌向量并将所有输入与一个值进行比较。所以我创建了这个结构：

```
for (vector<string>::const_iterator i = needle.begin(); i != needle.end(); ++i) {         
            cout << *i << " ";

        } 
```

打印工作正常，但我希望能够访问`std::string`函数，即`find` ，当我能够编写时，`needle[index].find("sampleString");`我希望能够使迭代器的行为与此类似。那么如何制作类似的东西`*i.find("sampleString");`呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-16T14:10:40.460

你快到了，但运算符优先级意味着这`*i.find()`不起作用。它尝试取消引用`i.find()`，而不是取消引用`i`然后调用`find`结果。使用其中最适合您的：

```
(*i).find("sampleString");
i->find("sampleString"); 
```

# javascript - Angular 路由和 ng-view

> ID：16039348
> 
> 赞同：3
> 
> 时间：2013-04-16T14:09:10.407
> 
> 标签：javascript, asp.net-mvc, angularjs, ngroute

**角度如何知道对包含“ng-view”元素的模板视图提出请求？**

如果我在我的应用程序中导航直接说

```
http://localhost/Categories/List/accessories 
```

. 仍然向“/或索引模板”发出请求，因为它包含渲染所有视图所需的“ng-view”元素。

当我从索引导航到 /Categories/List/accessories 时，不再请求索引。

下面是我的基本路由，部分复制自 GitHub 上的 Angular MVC “CookBook”示例

```
angular.module('myApp', ['myApp.ctrl.list'])
    .config(['$routeProvider', '$locationProvider', function ($routeProvider) {
        $routeProvider.when('/', {
            templateUrl: '/Home/Splash',
        });
        $routeProvider.when('/Categories/List/:slug', {
            templateUrl: '/Categories/List',
            controller: 'listCtrl',
        });
        $routeProvider.otherwise({
            redirectTo: '/'
        });
    }]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:42:53.137

通过您的路由配置，我相信您的示例 url 缺少井号 (#)，因此它应该如下所示：

```
http://localhost/#/Categories/List/accessories 
```

# 号后面的部分是 AngularJS 打算解析的路径（即你定义的路由配置）

当您在浏览器的地址栏输入上述网址时，浏览器会自动查找`index.html`. `localhost`当 URL 中仅存在域名时，大多数浏览器（如果不是全部）都设置为查找 index.html。

# 号后面的部分呢？你可能会问。根据定义，# 符号之后的路径不会发送到服务器，因此浏览器可能不太关心该部分是由什么组成的。

在您提到的第二种情况中，AngularJS 不会请求，`index.html`因为它在第一次加载时已被缓存并且使用了缓存的副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T19:06:16.200

您的 locationProvider 是否为 HTML5 配置？

```
$locationProvider.html5Mode(true); 
```

请参阅[在 angular.js 上使用 HTML5 pushstate](https://stackoverflow.com/questions/11095179/using-html5-pushstate-on-angular-js)

# javascript - Google Gauge 图表未在 ASP 中生成

> ID：16039350
> 
> 赞同：0
> 
> 时间：2013-04-16T14:09:16.523
> 
> 标签：javascript, asp.net, google-visualization

我正在尝试根据更改的 MTBF 值生成仪表图表，但是当我运行 web 应用程序时，我看不到任何图表，只有按钮。我的方法是否朝着正确的方向发展。感谢你的帮助，

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public partial class WebForm3 : System.Web.UI.Page
    {

        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {

            using (Test_Manager_DatabaseEntities entities = new Test_Manager_DatabaseEntities())
            {

                int TestExecID = Convert.ToInt32(Request.QueryString["ExecutionID"]);
                var execution = entities.TestExecutionDetails.Where(p => p.TestExecutionID == TestExecID).Select(p => p).OrderBy(p => p.StartTime).ToArray();
                var failures = entities.TestExecutionDetails.Select(p => p.Result != "Pass      ").Count();
                var count = entities.TestExecutionDetails.Count();
                var uptime = entities.TestExecutionDetails.Where(p => p.Result == "Pass          ").Select(p => p);
                TimeSpan elapsedDuration = new TimeSpan(0);
                foreach (var p in uptime)
                {

                    elapsedDuration += (p.EndTime.Value - p.StartTime.Value);

                }
                var mtbfdisplay = elapsedDuration.TotalSeconds / failures;

                string str1 = @"

        data = google.visualization.arrayToDataTable([";

                string str2 = @"['Label', 'Value'],['MTBF'," + mtbfdisplay + @"],]);";

                string str3 = @"var options = {
                width: 400, height: 120, redFrom: 90, redTo: 100, yellowFrom: 75, yellowTo: 90, minorTicks: 5
            };

                var chart = new google.visualization.gauge(document.getelementbyid('chart-success'));
                drawchart(data, options);";

                string postData = str1 + str2 + str3;

                Console.WriteLine(postData);

                ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "test", postData, true);

            }

        }
    }
} 
```

.aspx

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm3.aspx.cs" Inherits="WebApplication1.WebForm3" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:Label ID="Label2" runat="server" Text="1"></asp:Label>
                <br />
    <div>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>

                <asp:HiddenField ID="HiddenField1" runat="server" Value="1" />
                <br />

                <asp:Label ID="Label1" runat="server" Text="1"></asp:Label>
                <br />

                <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />

                <div id="chart-success"></div>

            </ContentTemplate>

        </asp:UpdatePanel>
    </div>

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:47:18.257

与文档中的[此示例](https://developers.google.com/chart/interactive/docs/gallery/gauge)相比，您的脚本存在几个问题：

1.  跳过加载必要的包
2.  拼写错误的`google.visualization.Gauge`构造函数
3.  没有功能`drawchart`- 大概应该有`chart.draw`

我试图更正你的脚本，结果如​​下（不确定这是否是你正在实施的）：

```
string postData = @"
    google.load('visualization', '1', {packages:['gauge']});
    google.setOnLoadCallback(drawGaugeChart );

    function drawGaugeChart() {
        data = google.visualization.arrayToDataTable([['Label', 'Value'],['MTBF'," + mtbfdisplay + @"]]);
        var options = {
            width: 400, height: 120, redFrom: 90, redTo: 100, yellowFrom: 75, yellowTo: 90, minorTicks: 5
        };
        var chart = new google.visualization.Gauge(document.getElementById('chart-success'));
        chart.draw(data, options);
    }"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:45:35.687

```
 String posttData = @"            
                        data = google.visualization.arrayToDataTable([
                                ['Label', 'Value'],
                                ['Result', {0}]                           
                            ]);
                            var options = {
                                width: 1200, height: 500, redFrom: 90, redTo: 100, yellowFrom: 75, yellowTo: 90, minorTicks: 5
                            };

                    draw(options,data);";

 <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
         <script type="text/javascript">
             google.load('visualization', '1', { packages: ['gauge'] });

             function draw(options, data) {
                 var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
                 chart.draw(data, options);
             }
        </script> 
```

# php - 我需要多次实例化这个类吗？

> ID：16039351
> 
> 赞同：2
> 
> 时间：2013-04-16T14:09:16.903
> 
> 标签：php, mysql, pdo

当用户单击按钮时，我的脚本会实例化此类。因此，如果我的网站上有 50 个用户单击此按钮，那么将有 50 个这些类已被实例化。这是正确的做法吗？或者我是否需要检查这个类之前是否已经实例化，如果已经实例化则不做任何事情。

我在这里连接到我的数据库。这门课还有更多内容，这只是一个片段。

```
class Database{
    private $host      = "localhost";
    private $user      = "rt";
    private $pass      = "";
    private $dbname    = "db";

    public function __construct(){
        // Set DSN
        $dsn = 'mysql:host=' . $this->host . ';dbname=' . $this->dbname;
        // Set options
        $options = array(
                PDO::ATTR_PERSISTENT    => true,
                PDO::ATTR_ERRMODE       => PDO::ERRMODE_EXCEPTION
        );
        // Create a new PDO instanace
        try{
            $this->dbh = new PDO($dsn, $this->user, $this->pass, $options);
        }
        // Catch any errors
        catch(PDOException $e){
            $this->error = $e->getMessage();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:17:32.603

> 这是正确的做法吗？

是的。
这就是 PHP 的工作原理。50 个 PHP 实例运行，50 个连接到数据库，等等。

> 我需要检查这个类之前是否已经实例化

你可以，但这没什么用，因为其他用户的点击将由一个完全独立的 PHP 进程处理，你无论如何都无法访问它。

这是构造函数的略微改进版本

```
public function __construct(){
    // Set DSN
    $dsn = 'mysql:host=' . $this->host . ';dbname=' . $this->dbname;
    // Set options
    $options = array(
            PDO::ATTR_PERSISTENT    => true,
            PDO::ATTR_ERRMODE       => PDO::ERRMODE_EXCEPTION
    );
    // Create a new PDO instanace
    $this->dbh = new PDO($dsn, $this->user, $this->pass, $options);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:18:01.903

每次用户加载页面时都需要运行您的 PHP 脚本，每次有人加载页面时都无法实例化一个类。

这是基于 HTTP 的通信的固有属性：无状态；而 PHP 是在 HTTP 协议上运行的，所以它受到它的限制。

您可以通过使用数据库和会话（它们基本上只是使用唯一键作为文件名存储信息的文件）来模拟状态，但是 PHP 脚本本身必须受到 HTTP 没有状态的限制。

因此，无法通过多个不同的连接将您的课程保存在内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:13:11.103

每次使用不同的凭据（参数）时，都需要实例化该类。因此，如果每个用户都使用不同的凭据创建新连接，那么您需要每次都实例化。否则，您必须进行适当的检查并继续使用相同的连接

# ruby-on-rails - 服务器之间的安全数据传输

> ID：16039352
> 
> 赞同：0
> 
> 时间：2013-04-16T14:09:17.430
> 
> 标签：ruby-on-rails, model-view-controller, security, data-exchange

我有一些奇怪的情况要发展。

我的团队必须开发的 MVC Web 系统（或项目是用 Rails 制作的）将依赖来自另一个站点的登录名/密码。

这个想法是，用户将在第三方网站上登录，并且在相关的地方，将存在指向我们网站的链接。当用户点击该链接时，我们需要从站点接收用户的一些数据。

我们无法控制第三方服务器，也无法直接访问他们的数据库。另外，对他们的应用程序/基础设施进行任何更改是一件大事，所以我正在寻找一个影响较小的解决方案。（当然他们会改变一些东西，但会是一个政治问题，所以越少越好）

从我们的观点来看，我们需要确保用户确实来自第三方站点（并且仅来自那里），并且我们没有收到来自攻击者的虚假消息。

他们的网站有一个有效的 SSL 证书。（不知道我的系统是否会有（它应该））不确定它是否相关，但我们*认为*他们的服务器是一个 oracle 应用服务器，它连接到内部网络中的一个 oracle 服务器。

我首先想到只使用 SSL，但我不知道该怎么做（我必须检查什么，我必须改变什么？）以及是否足够安全。

我的第二个想法是使用 PGP 密钥，然后在发送给我们之前对数据进行唱歌和加密，并且，我们网站的链接将发布到我们服务器上的控件，该控件将验证和解密数据。

有人有任何可以帮助我的提示/指针/想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:46:11.040

如果两台服务器都使用 SSL，并且假设服务器至少为您提供 json 或 xml 接口，那么只需发出安全请求（例如，使用[rest-client](https://github.com/rest-client/rest-client)）并评估服务器中的响应就可以了。

您很可能希望在登录服务器时缓存用户数据，如果未找到用户/密码，请查看另一台服务器 - 这将减少负载。

# php - 一段时间内奇怪的递增查询结果

> ID：16039358
> 
> 赞同：1
> 
> 时间：2013-04-16T14:09:25.377
> 
> 标签：php, sql, while-loop, increment

我不明白为什么 '$taille' 数组的结果从键 [1] 而不是键 [0] 开始？
所以它显示 3 个结果而不是 4 个（隐藏第一个结果）...

```
<?php 
$req = $bdd->prepare('SELECT size FROM tailles_produits WHERE id_produit = ?');
$req->execute(array($_GET['id']));
$donnees = $req->fetch();

$numb_taille = array();
$taille = array();
$i = 0;
while($donnees = $req->fetch())
{
    $i++;
    $taille[$i] = $donnees['size'];
    $numb_taille['total'] = $i;
}
$total = $numb_taille['total'];

echo '<pre>';
print_r ($taille);
echo '</pre>';

$req->closeCursor();
?> 
```

这使

```
ARRAY
(
    [1] => S
    [2] => M
    [3] => L
) 
```

代替

```
ARRAY
(
    [1] => XS
    [2] => S
    [3] => M
    [4] => L
) 
```

任何人都可以帮我解决这个请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:11:55.333

PHP 数组从 0 开始，因此您需要做的就是`i++`向下移动，直到使用完该索引中的数据

```
<?php 
$req = $bdd->prepare('SELECT size FROM tailles_produits WHERE id_produit = ?');
$req->execute(array($_GET['id']));
$donnees = $req->fetch();

$numb_taille = array();
$taille = array();
$i = 0;
while($donnees = $req->fetch())
{
    $taille[$i] = $donnees['size'];
    $numb_taille['total'] = $i;
    $i++; //iterate after your calculations are done
}
$total = $numb_taille['total'];

echo '<pre>';
print_r ($taille);
echo '</pre>';

$req->closeCursor();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:33:47.403

问题是你有一个额外的

```
$donnees = $req->fetch(); 
```

填充循环之前的语句`$taille`。因此，第一行的数据被提取但不存储在数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:12:37.893

这是因为您在将 $i 用作新数组项的键之前增加了它。

在 while 循环结束时进行增量。

# django - Django ManyToMany 关系包含值

> ID：16039359
> 
> 赞同：0
> 
> 时间：2013-04-16T14:09:25.193
> 
> 标签：django, django-models, many-to-many, relationship, django-orm

我正在尝试搜索 ManyToMany 关系，但我做错了什么，我不确定它是什么

```
t = Teacher.objects.get(username=u.username)
var = list(Allowed.objects.filter(allowed=t)) 
```

这是我正在使用的课程：

```
class Allowed(models.Model):
  owner = models.ForeignKey(Teacher, related_name='allowed_teacher')
  reason = models.CharField(max_length=200, blank=True, null=True)
  allowed = models.ManyToManyField(Teacher, related_name='who_is_allowed', blank=True, null=True) 
```

我该怎么做？

**编辑：** `Teacher`没有任何参考 Allowed

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:52:14.267

你可以尝试这样做：

```
t = Teacher.objects.get(username=u.username)
var = t.allowed_set.all() 
```

# javascript - jQuery 部分无法在 Firefox 和 Opera 中运行

> ID：16039361
> 
> 赞同：0
> 
> 时间：2013-04-16T14:09:39.587
> 
> 标签：javascript, jquery, firefox, opera, mozilla

我正在浏览器中测试我的网页，似乎有些位在 Firefox 和 Opera 中不起作用。我认为这是由我的页面上使用的 jQuery 引起的。

这是我的网站： http: [//freshbeer.lv/ht/index.html](http://freshbeer.lv/ht/index.html)

在源代码的底部，您可以找到所有使用的 jQuery 代码（主要用于调用和应用插件）。我无法确定出了什么问题，因为控制台（firefox 20.0）中没有显示错误主要功能障碍是

1.  播放器，只需比较它在chrome中的工作方式，而不是在firefox或opera中检查它，首先它不显示“...”表示正在加载，其次，一旦您在另一个播放器上单击播放，两首歌曲都会继续播放，在其他浏览器中，第一首歌曲会暂停，所以只会播放一首歌曲。

2.  广告应该有顶部和底部的边距，由jQuery计算，在opera和firefox中没有。所以我错过了什么吗？也许我需要应用某些代码标准？

这似乎是全部，但我不能确定。

我将把我写的代码放在这里（很可能是其中的问题），注意，上面包含了几个 jQuery 插件。

```
<script type="text/javascript">

//Audio Player
audiojs.events.ready(function () {
    var as = audiojs.createAll();

        $('audio').each(function () {
            var myAudio = this;
            this.addEventListener('play', function () {
                $('audio').each(function () {
                    if (!(this === myAudio)) {
                        this.pause();
                    }
            });
        });
    });
});

$(document).ready(function() {

    //Responsive add margins
    function addMargin () {
        var add = $(".advert");
        var addMargin = add.css("margin-left");
        add.css({
            "margin-top": addMargin,
            "margin-bottom": addMargin
        });
    }
    addMargin();
    $(window).resize(addMargin);

    //Responsive Grid
    var MusicGrid = (function() {
        var $musicGridContainer = $('.grid'),
            init = function() {
                changeMusicGrid();
                initEvents();
                initPlugins();
            },
        changeMusicGrid = function() {
            var w_w = $(window).width();
            if (w_w <= 765) n = 1;
            else if (w_w <= 1180) n = 2;
            else n = 3;
        },
        initEvents = function() {
            $(window).on('smartresize.MusicGrid', function(event) {
                changeMusicGrid();
            });
        },
        initPlugins = function() {
            $musicGridContainer.imagesLoaded(function() {
                setTimeout(function() {
                    $musicGridContainer.masonry({
                        itemSelector: '.article',
                        columnWidth: function(containerWidth) {
                            return containerWidth / n;
                        },
                        isAnimated: true,
                        animationOptions: {
                            duration: 150
                        }
                    });
                }, 500);
            });
        };
        return {
            init: init
        };
    })();
    MusicGrid.init();
});

//Preload Content
function preloadCode() {
    if (preloadCode.done) return;
    preloadCode.done = true;
    clearTimeout(t);

    $(".preloader").css("display", "none");
    $(".grid").css({ opacity: 0, visibility: 'visible', marginTop: 20 }).animate({ marginTop: 0, opacity: 1 }, 550);

    $('.article[id^="article-"]').each(function () {
        if (parseInt(this.id.replace('article-', '')) % 3 === 0) {
            $('#' + this.id).css({ marginTop: 50 }).animate({ marginTop: 0 }, 350);
        } else if (parseInt(this.id.replace('article-', '')) % 2 === 0) {
            $('#' + this.id).css({ marginTop: 100 }).animate({ marginTop: 0 }, 400);
        } else {
            $('#' + this.id).css({ marginTop: 150 }).animate({ marginTop: 0 }, 450);
        }
    });

    $(".footer").css("display", "block");

}

var t = setTimeout(preloadCode, 6000);
$(window).load(preloadCode);

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:56:51.283

**1\. 广告的上下边距由jQuery计算，opera和firefox没有。所以我错过了什么吗？也许我需要应用某些代码标准？**

您的元素具有自动边距，因此，根据浏览器的不同，`.css('margin-left')`可能会返回不同的值，包括`0`.

我建议使用[JsSizes 库](http://bramstein.com/projects/jsizes)，它是一个轻量级插件，可让您获得以像素为单位的实际边距。

**2.播放器，只需比较它在chrome中的工作方式，而不是在firefox或opera中检查它，首先它不显示“...”表示正在加载，其次一旦您在另一个播放器上单击播放，两首歌曲都会保留播放，与其他浏览器一样，第一首歌曲会暂停，因此只会播放一首歌曲。**

Firefox 和 Opera 在其音频元素中不支持 mp3，因此它被 Flash 对象所取代。因此你不能再听那些 DOM 事件了。

虽然，根据他们的[注释源代码](http://kolber.github.io/audiojs/docs/)，flash 对象有公共方法`play()`、、`pause()`和`isPlaying`。

我建议在“播放暂停”按钮上收听点击事件并使用这些功能。像这样 ：

```
var as = ''; // You're going to have to make your as variable global to access it outside of your function.
audiojs.events.ready(function () {
    as = audiojs.createAll();
    $('.audiojs .play-pause').click(function(){ //Listening to the click event
        var thisIndex = $(this).parents('.audiojs').index('.audiojs'); // When you create several players, as is an array of instances of players. Here we're finding the DOM index of the player so it reflects its position in the as array.
        $.each(as, function(index,val){ //then, for each instance of players in the as array
            if ( index != thisIndex && as[index].playing ) as[index].pause(); //If the player is already playing, and its index is different than the one we just clicked on, pause it !
        });
    });
}); 
```

# php - 如何使用注释抑制 PHPCS 警告？

> ID：16039362
> 
> 赞同：79
> 
> 时间：2013-04-16T14:09:40.117
> 
> 标签：php, phpunit, phpcs

我`TestMyClass.php`在同一个文件（单元测​​试类）中有两个类定义，PHP Code Sniffer 抱怨*每个类都必须单独在一个文件中*。我怎样才能抑制这个警告？

```
class MyClassImpl implements MyInterface
{
    // ...
}

class MyClassTest extends \PHPUnit_Framework_TestCase
{
    // ...
} 
```

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-04-17T23:09:13.833

您可以使用注释让 PHP_CodeSniffer 忽略文件中的特定文件或行：[https ://github.com/squizlabs/PHP_CodeSniffer/wiki/Advanced-Usage#ignoring-files-and-folders](https://github.com/squizlabs/PHP_CodeSniffer/wiki/Advanced-Usage#ignoring-files-and-folders)

在这种情况下，错误将在您的第二个类定义中生成，因此您必须像这样编写第二个定义：

```
// @codingStandardsIgnoreStart
class MyClassTest extends \PHPUnit_Framework_TestCase
{
    // @codingStandardsIgnoreEnd
    // ...
} 
```

但是，如果不应该检查整个文件，您也可以选择忽略整个文件，使用 @codingStandardsIgnoreFile 注释或在命令行上指定排除项（有关信息，请参阅上一个链接）。

如果您发现自己经常这样做并且不想在代码中添加注释，您还可以创建自己的自定义编码标准。假设您现在正在使用 PSR2 标准，您将创建一个 XML 文件（例如 mystandard.xml）并包含以下内容：

```
<?xml version="1.0"?>
<ruleset name="MyStandard">
 <description>My custom coding standard.</description>
 <rule ref="PSR2" />
 <rule ref="PSR1.Classes.ClassDeclaration.MultipleClasses">
   <severity>0</severity>
 </rule>
</ruleset> 
```

然后像这样运行 PHP_CodeSniffer：`phpcs --standard=/path/to/mystandard.xml /path/to/code`

拥有自己的规则集可以让您做很多事情，包括更改错误消息、更改消息的严重性或类型，包括来自其他标准的检查以及设置全局忽略规则。更多信息在这里：[https ://github.com/squizlabs/PHP_CodeSniffer/wiki/Annotated-ruleset.xml](https://github.com/squizlabs/PHP_CodeSniffer/wiki/Annotated-ruleset.xml)

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2019-11-27T15:03:50.557

使用以下注释，您可以忽略您想要的文件的任何部分。

**忽略文件的所有嗅探：**

```
<?php
// phpcs:ignoreFile 
```

**仅忽略当前行和下一行：**

```
// phpcs:ignore
public function store($myArray) 
```

**忽略当前行：**

```
public function store($myArray) // phpcs:ignore 
```

**忽略文件中的一定数量的行：**

```
// phpcs:disable
public function store($myArray): void
{
    if (count($myArray) > 3) {
        // Humongous amount of legacy code you don't want to look at
    }

    return;
}
// phpcs:enable 
```

使用`// phpcs:ignore`和 `// phpcs:disable`您还可以指定要禁用的消息、嗅探、类别或标准，例如：

```
// phpcs:ignore Squiz.Arrays.ArrayDeclaration.SingleLineNotAllowed
$foo = [1,2,3]; 
```

如果您想了解更多关于此主题的信息，可以访问[wiki](https://github.com/squizlabs/PHP_CodeSniffer/wiki/Advanced-Usage)。一些例子取自那里。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2018-04-23T13:25:39.943

该`@codingStandards`语法自版本起已弃用`3.2.0`，请`phpcs`改用。

一些例子：

```
// phpcs:disable
// phpcs:ignore
// phpcs:enable 
```

有关更多信息，请参阅此页面：[https ://github.com/squizlabs/PHP_CodeSniffer/wiki/Advanced-Usage#ignoring-parts-of-a-file](https://github.com/squizlabs/PHP_CodeSniffer/wiki/Advanced-Usage#ignoring-parts-of-a-file)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-12-17T13:07:00.163

尽管我喜欢最佳答案，但如果您不关心特定文件，我也会建议您使用此答案。

运行此命令：

`phpcs --config-set show_warnings 0`

如此处所示： [https ://github.com/squizlabs/PHP_CodeSniffer/wiki/Configuration-Options#hiding-warnings-by-default](https://github.com/squizlabs/PHP_CodeSniffer/wiki/Configuration-Options#hiding-warnings-by-default)

关于以这种方式设置配置的注意事项是，如果您删除供应商文件夹或更新库，它们将被清除，您将不得不再次设置它们。

# c++ - boost 序列化：反序列化时更新成员

> ID：16039365
> 
> 赞同：1
> 
> 时间：2013-04-16T14:10:06.207
> 
> 标签：c++, serialization, boost, boost-serialization

我有一个对象，我正在使用 boost 存档进行序列化。该对象有一个 type 的成员`boost::math::normal_distribution<double> distribution`，但是 boost 没有为这种类型提供序列化方法，所以我序列化了均值和标准差。我的序列化函数如下所示：

```
template<class Archive>
    void serialize(Archive& ar, const unsigned int version){
        ar & BOOST_SERIALIZATION_NVP(mean);
        ar & BOOST_SERIALIZATION_NVP(std);
    } 
```

当对象被反序列化时，我想用这些参数重新创建分布（因为默认是用均值 0 和标准 1 构造的）。我把这段代码放在哪里？在构造函数中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:44:22.187

我不认为 normal_distribution 的当前实现是可序列化的，因为它在构建后没有任何方法来设置它的值。

一种解决方法可能是在堆上分配 normal_distribution 并使用 saver/loader-pattern 而不是一个序列化函数，就像这里记录的那样：http: [//www.boost.org/doc/libs/1_53_0/libs/serialization/doc /tutorial.html#splitting](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/tutorial.html#splitting)

在加载器中，您可以使用新的和加载的参数构造 normal_distribution。

# iphone - KYCircleMenu 中的 6 个按钮后不再连接操作

> ID：16039368
> 
> 赞同：1
> 
> 时间：2013-04-16T14:10:19.620
> 
> 标签：iphone, ios, objective-c, ipad

我正在研究一个`KYCircleMenu`. 该库仅包含 6 个按钮，但我想要 7 个按钮。我设法在屏幕上再添加一个。唯一的问题是它没有采取行动。

这里是[图书馆](https://github.com/Kjuly/KYCircleMenu)

这是我制作按钮的方法。

```
 for (int i = 1; i <= buttonCount_; ++i) {
    UIButton * button = [[UIButton alloc] initWithFrame:buttonOriginFrame_];
    [button setOpaque:NO];
    [button setTag:i];
    imageName = [NSString stringWithFormat:self.buttonImageNameFormat, button.tag];
    [button setImage:[UIImage imageNamed:imageName]
            forState:UIControlStateNormal];
    [button addTarget:self action:@selector(runButtonActions:) forControlEvents:UIControlEventTouchUpInside];
    [self.menu addSubview:button];
  } 
```

`runButtonActions`仅添加到前 6 个按钮。我的 buttonCount_ 是 7。只有第 7 个按钮什么都不做。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:21:14.790

我猜你的按钮在可触摸区域之外。

我试图重现您的代码（是的，我很无聊），当我在演示项目中设置第 7 个按钮时，如下所示：

```
[self _setButtonWithTag:7 origin:CGPointMake(centerBallMenuHalfSize + triangleB - buttonRadius + 20, centerBallMenuHalfSize + triangleA - buttonRadius+20)]; 
```

它工作正常，但是当我设置它时，它只是像这样的其他按钮：

```
[self _setButtonWithTag:7 origin:CGPointMake(centerBallMenuHalfSize - buttonRadius, centerBallMenuHalfSize + triangleHypotenuse + buttonRadius + 10)]; 
```

该操作不起作用。

但是，当我将 200 像素添加到帧高度时（大约第 153 行）

```
CGRect centerMenuFrame = CGRectMake((viewWidth - menuSize_) / 2, (viewHeight - menuSize_) / 2, menuSize_, menuSize_+200); 
```

它也适用于这种情况。只需为您的按钮位置找出正确的框架，设置它，一切都会按预期工作。

PS：一旦你考虑完成对 KYCircleMenu 的扩展或创建一个分支，这是一个非常好的控件，你的代码可能有助于使它变得更好。

# c#-4.0 - 从 C# 组合框的 Access 表中返回 ID 值的有效方法

> ID：16039369
> 
> 赞同：2
> 
> 时间：2013-04-16T14:10:22.083
> 
> 标签：c#-4.0, ms-access-2007

我正在使用以下代码来填充我的组合框以获取更多功能。有没有更好的方法在课堂上下文中填充我的组合框？我意识到，如果记录数以千计，那么这可能不是最佳实践。

```
private void Form1_Load(object sender, EventArgs e)
{
    Book myBook = new Book;
    myBook.Connect();
    comboBox1.DataSource=myBook.IDs();
}

class Book
{
    OleDbCommand Comm;
    OleDbConnection Conn;
    OleDbDataReader Reader;
    string queryString;

    public void Connect()
    {
        Conn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\Book.accdb");
    }

    public List<string> IDs()
    {
        string singleID = null;
        List<string> IDs = new List<string>();
        queryString = "Select bID from Books";
        Comm = new OleDbCommand(queryString, Conn);
        Reader = Comm.ExecuteReader();
        while (Reader.Read())
        {
            singleID = Reader[0].ToString();
            IDs.Add(singleID);
        }
        Conn.Close();
        Reader.Close();
        return IDs;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T17:32:13.013

您用来填充组合框的方法在技术上似乎是正确的。你可能是对的，如果它会导致一个包含**大量**项目的组合框，那么它在实践中可能效果不佳，但这更多是一个“UI设计”的问题（即，*“正在使用单个组合框让用户做出选择的正确选择？”*）而不是“代码设计”（即，*“我正在使用组合框，那么将项目放入其中的最佳方法是什么？”*）。

# qt - 关于 QTextEdit 的时隙/信号动态

> ID：16039386
> 
> 赞同：0
> 
> 时间：2013-04-16T14:10:44.140
> 
> 标签：qt, signals-slots, qtextedit, textchanged

我是 C++/Qt 的新手，而且我只有一些 Web 开发经验。

为了学习目的，我正在用 Qt 测试一些东西，但我失败了。我很确定这是因为整个插槽/信号的事情还没有解决，所以我希望有人能让我更清楚。

所以，我有这个主程序 UI，我在其中放置了一个 QTextEdit 小部件。现在我正在尝试复制其中一个“文档有更改，最好保存它！” - 警告，并且每次有人尝试创建新文档时都会显示它。

当触发“新文档”选项时，我正在尝试测试 textEdit 小部件中的更改。我不断收到这些编译错误，我什至不知道它们是什么意思！什么是正确的测试条件？我如何引用 textEdit，因为它在其他地方被调用？

我正在尝试这样的事情：

```
无效记事本::on_actionNew_triggered()
{
    //没有得到正确的测试条件！

    如果（................................） {

    QMessageBox 消息框；
    msgBox.setText("警告！");
    msgBox.setInformativeText("更改已应用于此文档。");
    msgBox.setStandardButtons(QMessageBox::Discard | QMessageBox::Cancel);
    msgBox.setDefaultButton(QMessageBox::Cancel);
    int ret = msgBox.exec();

        开关（ret）{
            案例 QMessageBox::Discard:
                // 不保存被点击
                ui->textEdit->clear();
                休息;
            案例 QMessageBox::取消：
                msgBox.close();
                休息;
            默认：
                // 永远不应该到达
                休息;
        }
    }else{ui->textEdit->clear();}
}

```

我已经尝试搜索有关此的一些信息，并且我敢打赌，你们中的大多数人实际上可能认为这很明显，但是我在理解如何解决这个问题时遇到了真正的麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:39:19.717

所以，你在这里有一些事情要做。一种是当您单击时，`New`您需要执行检查以查看是否存在尚未保存的文档，您只需考虑信号和插槽即可。

因此，当您按下时，`New`您需要向文档发送信号，如果您创建了一个自定义类，这很容易，因为您可以添加一个新插槽`dirtyDocument`（例如！），它可以将文档状态传递回来，例如通过发出另一个包含`bool`标志的信号并在另一个插槽内处理它。或者，在您的`on_actionNew_triggered`插槽中，您可以通过传递对对象的引用或维护对它的类引用来询问当前打开的文档对象是否有未保存的更改（这就是您`Document *doc;`在 notepad.h 文件中有类似内容的地方）。

如果您遇到编译问题，请复制任何与您的代码无关的信息并将其粘贴到 Google。很可能有人会问同样的问题，很可能是关于 SO 本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:01:28.190

所以，我试图解决这个问题，我决定在 textEdit 发生变化时创建一个返回布尔值的插槽。正如我所知道的，每当触发“新操作”时，我都想将其用作测试。因此，在测试之后，我将 bool 值设置回 false 并且它工作正常：

```
无效记事本::on_actionNew_triggered()
{    
    如果（记事本：：on_textEdit_textChanged（））{
    ~记事本::on_textEdit_textChanged();
    QMessageBox 消息框；
    msgBox.setText("警告！");
    msgBox.setInformativeText("更改已应用于此文档。");
    msgBox.setStandardButtons(QMessageBox::Discard | QMessageBox::Cancel);
    msgBox.setDefaultButton(QMessageBox::Cancel);
    int ret = msgBox.exec();

        开关（ret）{
            案例 QMessageBox::Discard:
                // 不保存被点击
                ui->textEdit->clear();
                休息;
            案例 QMessageBox::取消：
                msgBox.close();
                休息;
            默认：
                // 永远不应该到达
                休息;
        }
    }else{ui->textEdit->clear();}
}

布尔记事本::on_textEdit_textChanged()
{
    返回真；
}
```

# c++ - 在 C++11 中声明多参数构造函数的最佳方法是什么

> ID：16039388
> 
> 赞同：2
> 
> 时间：2013-04-16T14:10:52.580
> 
> 标签：c++, c++11, constructor, move-semantics, rvalue-reference

创建这样的类时：

```
class Test {
 public:
   ...

private:
   string s1_;
   string s2_;
   vector<int> v_;
}; 
```

声明一个接受两个字符串和一个向量的构造函数的最佳方法是什么？而且，更具体地说，您如何处理左值和右值引用？

我看到以下三个选项：

1.  创建 lvref 和 rvref 的每个组合：

    ```
     Test(const string& s1, const string& s2, const vector<int>& v) :
          s1_{s1}, s2_{s2}, v_{v}
       {
          ...
       }

       Test(const string& s1, const string& s2, vector<int>&& v) :
          s1_{s1}, s2_{s2}, v_{move(v)}
       {
          ...
       }

       Test(const string& s1, string&& s2, const vector<int>& v) :
          s1_{s1}, s2_{move(s2)}, v_{v}
       {
          ...
       }

       Test(const string& s1, string&& s2, vector<int>&& v) :
          s1_{s1}, s2_{move(s2)}, v_{move(v)}
       {
          ...
       }

       Test(string&& s1, const string& s2, const vector<int>& v) :
          s1_{move(s1)}, s2_{s2}, v_{v}
       {
          ...
       }

       Test(string&& s1, const string& s2, vector<int>&& v) :
          s1_{move(s1)}, s2_{s2}, v_{move(v)}
       {
          ...
       }

       Test(string&& s1, string&& s2, const vector<int>& v) :
          s1_{move(s1)}, s2_{move(s2)}, v_{v}
       {
          ...
       }

       Test(string&& s1, string&& s2, vector<int>&& v) :
          s1_{move(s1)}, s2_{move(s2)}, v_{move(v)}
       {
          ...
       } 
    ```

    优点：每一种可能性都得到了有效处理。

    缺点：需要大量代码来处理每种组合，并且可能容易出错。

2.  始终复制和移动参数：

    ```
     Test(string s1, string s2, vector<int> v) :
          s1_{move(s1)}, s2_{move(s2)}, v_{move(v)}
       {
          ...
       } 
    ```

    优点：只有一个演员。

    缺点：效率不高，因为移动并不意味着免费。

3.  使用“通用参考”：

    ```
     template <typename S1, typename S2, typename V>
       Test(S1&& s1, S2&& s2, V&& v) :
          s1_{forward<S1>(s1)}, s2_{forward<S2>(s2)}, v_{forward<V>(v)}
       {
          ...
       } 
    ```

    优点：一个能有效处理所有事情的演员。

    缺点：没有真正的意义。什么是 s1、s2 和 v？可能更容易出错（例如`Test error{1,2,3}`编译）。

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:48:23.837

关于什么：

```
template <typename String, typename VectorInt>
Test(String &&s1, String &&s2, VectorInt &&v,
  typename std::enable_if<std::is_same<typename std::decay<String>::type,std::string>::value &&
  std::is_same<typename std::decay<VectorInt>::type,std::vector<int>>::value>::type * = nullptr) :
  s1_(std::forward<String>(s1)), s2_(std::forward<String>(s2)),
  v_(std::forward<VectorInt>(v))
{} 
```

# c# - 如何返回具有通用属性的 C# Web 服务？

> ID：16039391
> 
> 赞同：3
> 
> 时间：2013-04-16T13:12:51.100
> 
> 标签：c#, web-services, generics

我正在创建一个 Web 服务，并且希望对返回数据更加优雅，而不是拥有许多消费者需要检查的属性。

根据幕后生成的数据，我需要能够返回错误数据或消费者期望的数据。

我不想拥有一个大的平面对象，并在需要时填充属性，并让用户检查“成功”标志，而是希望单个属性 Data 成为错误类的实例或成功课。

这就是我想做的事情：

```
class ItemResponse
{
    public bool Success { get; set; }
    public T Data{ get; set; }
}

if( /*acceptance criteria*/ )
{
    ItemResponse<SuccessData> resp = new ItemResponse<SuccessData>();
    resp.Data = new SuccessData();
}
else
{
    ItemResponse<ErrorData> resp = new ItemResponse<ErrorData>();
    resp.Data = new ErrorData();
}

return resp;

public class SuccessData
{

}

public class ErrorData
{

} 
```

然后让 web 方法返回具有通用属性的对象。

这是否可能，如果是这样，鉴于必须正确输入 webmethod 返回类型，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:59:41.083

*泛型是在编译时*添加类型安全的工具。因此，类的使用者使用的具体类型必须在编译时知道。如果你创建一个函数

```
List<T> myFunction<T>() {...} 
```

...然后你需要`T`在调用它时指定，例如

```
var myResult = myFunction<int>(); 
```

...这使得在编译时知道具体类型。（即使你`T`因为可以推断而没有指定，具体类型在编译时*也是已知的。）*

但是，您希望在`Data`处确定的泛型类型`run-time`：如果发生错误，则返回一个`ItemResponse<SuccessData>`，否则返回一个`ItemResponse<ErrorData>`。这不是泛型的工作方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:40:22.717

*短版*，你不能按照你的建议去做。

*长（er）版本* **A 部分**：

可以将 Web 服务视为类的方法，实际上*是*Web 服务类的方法。我建议阅读一些 Web 服务教程，以便更好地掌握设置 Web 服务背后的机制。MSDN 有许多 Microsoft 堆栈特定的教程，可通过您最喜欢的搜索引擎轻松找到。

方法的返回对象不允许具有多态行为，这本质上是您所要求的。

此伪代码等同于您尝试创建的代码，这就是编译器不允许它的原因。它不知道您要呼叫*哪个。* `DoSomething()`

```
class myFoo
{
     public SuccessResponse DoSomething() {....}  
     public ErrorResponse DoSomething() {....}
} 
```

或者，您可以设想这样
`public [SuccessResponse | ErrorResponse] DoSomething()`
的事情：但这也应该是明显的原因而失败。C# 根本不支持多态返回。

**B 部分** 即使我们只关注 just `resp.Data`，该对象仍然必须声明为某种类型。

```
class Response
{
     public Collection<someType> Data;
} 
```

如果您`SuccessData`和`ErrorData`实现相同的接口，那么`someType`可能只是这样`IyourInterface`，但这会引发另一个问题。也就是说，最终用户将如何*知道*他们是否获得了良好的数据，`Data`或者那里是否存在错误响应。

`IyourInterface`我相信，只要您将 WCF 声明为 WCF 服务对象的公共部分，WCF 就足以为您序列化。但这仍然不能解决您的最终用户如何知道该做什么。

* * *

如果您愿意在响应中不那么优雅，经典模式是将成功数据和错误对象简单地捆绑到另一个响应类中，如下所示：

```
class myResponse
{
    public SuccessResponse myRespData;
    public ErrorResponse myError
} 
```

现在，最终用户检查他们是否关心是否有错误。假设没有错误，然后他们去查看响应数据。

* * *

根据您的评论，是的，您也可以执行以下操作：

```
class Response
{
    public List<IYourData> Data;
    public YourEnum ReturnType;
}

public class ResponseData : IYourData { ... }  
public class ErrorData : IYourData { ... } 
```

然后在客户端上，您可以执行如下简单的检查：

```
if( ReturnType == YourEnum.Success ) { ... }  
else if( ReturnType == YourEnum.Error ) { ... }  
else ... 
```

WCF 将为`List`您处理序列化。它将转换为数组或直接传递集合，具体取决于您的设置。有一些 SO Q&A 可以处理该特定方面。

# jsf-2 - EL 和协变返回类型

> ID：16039396
> 
> 赞同：3
> 
> 时间：2013-04-16T14:11:18.520
> 
> 标签：jsf-2, el, covariance

我有这些课

```
public abstract class Unit
{
    public abstract UnitType getType();

    ...
}

public class Item extends Unit
{
    protected ItemType type;

    @Override
    public ItemType getType()
    {
        return type;
    }

    public void setType(ItemType type)
    {
        this.type = type;
    }

    ...
} 
```

并且显然`ItemType`扩展了`UnitType`。

我得到：

```
javax.el.PropertyNotWritableException: /WEB-INF/facelets/general.xhtml @23,165 value="#{bean.item.type}": The class 'com.example.Item' does not have a writable property 'type'. 
```

我可以理解协变返回类型会混淆 EL (2.2)，所以这是一个错误吗？

我可以使用

1.  仿制药
2.  将 setType 签名更改为`public void setType(UnitType type)`并检查 instanceof 内部
3.  更改方法名称以避免覆盖

有没有真正的解决方案而不是解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-28T12:00:59.510

好像`java.beans.Introspector`是有责任的。[Java](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6788525)[中](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6528714)有 很多相关的[错误](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6794807)：[7092744、7122138、6528714、6794807、6788525](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7092744)。[_](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7122138) 由于合成桥接方法，协变返回类型和泛型会出现问题。随着一些 Java 7 更新（45、51、67、71）问题的表现不是正确的，但在运行服务器一段时间后 - 这可能与 Introspector 和相关类中的软/弱引用缓存有关。

所有这些问题似乎都在 Java 1.7.0_80 中得到了修复（使用 Mojarra 2.2.8 和 Wildfly 8.2.0.Final 进行了测试）。

# django - 如何在不注销的情况下清除所有会话变量

> ID：16039399
> 
> 赞同：18
> 
> 时间：2013-04-16T14:11:23.140
> 
> 标签：django, python-2.7, django-sessions

我正在尝试清除所有会话变量，但不注销当前用户。

```
user = request.session.get('member_id', None)
request.session.flush()
request.session.modified = True
request.session['member_id'] = user
request.session.modified = True 
```

这也会影响网站的其他用户吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-04-17T00:25:29.707

从 Django 1.8 开始，任何调用`flush()`都会注销用户。从[文档](https://docs.djangoproject.com/en/1.8/topics/http/sessions/#django.contrib.sessions.backends.base.SessionBase.flush)：

> 在 Django 1.8 中更改：删除会话 cookie 是 Django 1.8 中的新行为。以前，行为是重新生成在 cookie 中发送回用户的会话密钥值。

如果您希望能够删除密钥但让用户保持登录状态，则需要手动处理：

```
for key in request.session.keys():
    del request.session[key] 
```

或者只是删除关注的特定键：

```
del request.session['mykey'] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-16T15:04:13.900

在 django < 1.8[`session.flush`](https://docs.djangoproject.com/en/2.2/topics/http/sessions/#django.contrib.sessions.backends.base.SessionBase.flush)的版本中，删除会话数据并重新生成会话密钥。它不会影响其他用户，因为会话密钥是唯一的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-13T20:45:29.183

作为对Python 2.x中 shacker [1](https://stackoverflow.com/a/29688199/4756514)`dict.keys()`的改进，它返回字典键的列表副本，在 Python 3.x 中，它改为返回一个迭代器。改变迭代器的大小是不明智的。对于版本安全的实现，强制列表将防止任何大小问题

```
for key in list(request.session.keys()):
    del request.session[key] 
```

我之前的回答建议使用，`dict.viewkeys()`但它也会在 python 3.x 中返回一个迭代器。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-02-08T12:04:05.457

您可以清除在 django 会话中设置的键，但要在不注销用户的情况下这样做需要一点技巧；`request.session.flush()`注销用户。并且`request.session = {}` 在删除会话字典中的所有键时也会将用户注销。

因此，要在不注销用户的情况下清除键，您必须避免以下划线字符开头的键。以下代码可以解决问题：

```
for key in list(request.session.keys()):
  if not key.startswith("_"): # skip keys set by the django system
    del request.session[key] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T15:03:57.287

`request.session`内部使用cookies。当用户请求网站的某个 url 时，只有该用户机器上的 cookie 才会发送到服务器。因此，`request.session`始终与当前用户相关联。

因此，这绝不会影响网站的其他用户。

这也不会注销当前用户，因为您正在使用`flush()`它将删除旧会话并创建一个新会话，并且这个新会话将与当前用户相关联。

`flush()`内部使用`clear()`,`delete()`和`create()`.

在响应中，这个新会话的密钥将作为 cookie 发送，在后续请求中，这个新会话将继续正常工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-03-31T02:06:49.290

```
session_keys = list(request.session.keys())
    for key in session_keys:
        del request.session[key] 
```

# jsf-2 - 嵌套数据表中的rich:clientId 返回错误的clientId

> ID：16039406
> 
> 赞同：1
> 
> 时间：2013-04-16T14:11:35.377
> 
> 标签：jsf-2, richfaces

我使用 RF 4.2.0，我有以下情况：

```
 <rich:dataTable id="table1" var="..">
    ....
     <rich:column>
       <rich:dataTable id="table2" var="..">
       ...
        <rich:column>
         <h:outputLabel id="myLabel"/>
         <h:outputText value="#{rich:clientId('myLabel')}" />
        </rich:column>
      </rich:dataTable>
    </rich:column>
</rich:dataTable> 
```

clientId 始终显示相同的 id table1:XX:table2:YY:myLabel，其中 XX=table1 的最新行索引，YY=table2 的最新行索引。你知道这是一个错误还是我所做的事情有问题？

谢谢！

# jquery - jQuery滚动没有被触发

> ID：16039422
> 
> 赞同：0
> 
> 时间：2013-04-16T14:12:20.477
> 
> 标签：jquery, events, scroll, jquery-events

我正在尝试做一个视差滚动教程（[http://net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique/](http://net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique/)）。我无法通过 jQuery 更改背景位置 CSS。我已经能够推断出滚动处理程序没有被调用。我滚动时不会触发此警报：

```
$(window).scroll(function(){
    alert('Handler for scroll called');
}); 
```

当我在此函数之外发出警报时，它会被调用。所以我知道 jQuery 被正确调用（这都在 .ready() 函数中）。有任何想法吗？

编辑

我什至不能手动调用滚动处理程序。例如，这有效：

```
$('*').click(function(){
    alert('handler called');
}); 
```

但这不会：

```
$('*').click(function(){
    $(window).scroll();
}); // Remember I set an alert up above for when the scroll handler was called 
```

第二次编辑，整个 JS 文件：

```
$(document).ready(function(){
    $('section[data-type="background"]').each(function(){
        var $bgobj = $(this); // assigning the object

        $(window).scroll(function() {
            var yPos = -($window.scrollTop() / $bgobj.data('speed')); 

            // Put together our final background position
            var coords = '50% '+ yPos + 'px';

            // Move the background
            $bgobj.css({ backgroundPosition: 50% 10 });
        }); 
    });
    $(window).on('scroll',function(){
        alert('Handler for scroll called');
    });
    $('*').click(function(){
        $(window).scroll();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:33:53.950

$window.scrollTop 需要更改为 $(window).scrollTop。

# executorservice - ExecutorService：调用 future.get(long, TimeUnit) 不会导致排队的 Callable 运行

> ID：16039423
> 
> 赞同：0
> 
> 时间：2013-04-16T14:12:26.407
> 
> 标签：executorservice

我尝试通过使用 ThreadPoolExecutor 在单独的线程中调用执行 DNS 查询的所有例程来实现异步 DNS 解析器。

我这样定义 Callable 对象：

```
public class SocketAddressCreator extends DnsCallable<String, InetSocketAddress> {
    private static final Logger log = Logger.getLogger(SocketAddressCreator.class);

    private int port;
    public SocketAddressCreator(String host, int port) {
        super(host);
        this.port = port;
    }
    public InetSocketAddress call() throws Exception {
        log.info("Starting to resolve. Host is: " + target + " .Port is: " + port);
        long start = System.currentTimeMillis();

        **InetSocketAddress addr = new InetSocketAddress(target, port);**

        log.info("Time waiting: " + (System.currentTimeMillis() - start));

        return addr;
    }
} 
```

基本上，可调用对象将尝试将主机名解析为 InetAddress。

然后我定义一个ExecutorService：

```
executor = new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS,
                new LinkedBlockingQueue<Runnable>(), new ThreadFactory() {
                    public Thread newThread(Runnable r) {
                        Thread t = Executors.defaultThreadFactory()
                                .newThread(r);
                        t.setName("DnsResolver");
                        t.setDaemon(true);
                        return t;
                    }
                }); 
```

我提交了 Callable 任务：

```
 ..............
    **Future<V> f = executor.submit(task);**

    try {
        log.info("Query will be made");
        log.info("Queue size: " + executor.getQueue().size());
        **result = f.get(timeout, TimeUnit.MILLISECONDS);**
        log.info("Queue size: " + executor.getQueue().size());
        log.info("Query is finished");
    } catch (TimeoutException e) {
        boolean isCancelled = f.cancel(true);
        log.info("Task was cancelled: " + isCancelled);
        log.info("Queue size: " + executor.getQueue().size());
        ..........
    }
    .............. 
```

然后我看我的程序抛出的日志，它们很奇怪。这是我在解析 DNS 时超时的地方：

```
DnsResolver : Queue size: 1
DnsResolver : Task was cancelled: true
DnsResolver : Queue size: 1 
```

因此，在提交我的 Callable 对象之后但在调用 future.get(long, TimeUnit) 之前，队列大小为 1。但这对我来说没问题。但是，在我捕获 TimeoutException 并取消 Future 之后，队列大小是相同的（一个）。在我的程序中，只有一个线程将 Callable 任务提交给 ExecutorService，并且同一个线程也将检索结果。不仅如此，这里还有一个更奇怪的问题：Callable.call() 方法没有被调用，因为如果它被调用，我会收到一条日志消息：

```
log.info("Starting to resolve. Host is: " + target + " .Port is: " + port); 
```

那么，当未调用 Callable 时，future.get(long, TimeUnit) 方法如何抛出 TimeoutException 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:47:26.613

以下调用进行 DNS 查询： 1/ new InetSocketAddress(String, int) - 名称查找 2/ InetAddress.getByName(String) - 名称查找 3/ InetAddress.getHostName() - 反向名称查找

是不可中断的阻塞调用！

正如我之前所说，我使用由单个线程组成的线程池。我没有意识到有必要有多个线程

因此，如果我从*future.get(long, TimeUnit)调用中捕获 TimeoutException，然后我尝试通过调用**future.cancel(boolean)*来取消正在进行的任务......我不会停止单个正在运行的线程是在做。

我尝试模拟一个长时间运行的 DNS 查询，并像这样修改了 resolv.conf：nameserver XXXX //此地址没有有效的 DNS 服务器！options timeout:30 我希望 DNS 客户端在返回否定/肯定响应之前阻止一段时间。

我已经对我的应用程序进行了负载测试......这完全是一场灾难！那是因为我有一个单独的线程来解析这些 DNS 查询并且调用*future.get(long, TimeUnit)*并没有让它停止！

当然，我可以增加线程池的大小。我已经这样做了，它解决了我的问题。但是......在我的池大小中有多个线程来解析这些 DNS 查询似乎很愚蠢，因为只有一个线程提交应该解决 DNS 查询的 Callables，并且同一个线程也会得到结果.

# episerver - EPiServer 7 (MVC) LinkItemCollection：将图像添加到 LinkItem 集合？

> ID：16039429
> 
> 赞同：2
> 
> 时间：2013-04-16T14:12:40.460
> 
> 标签：episerver

我有一个要显示`LinkItemCollection`. 每个链接都有一个属于它的图像。由于不支持可点击的图像，我想知道是否有人有如何将图像和链接耦合在一起的解决方案。

也许您可以扩展`LinkItem`并向图像添加`Url`属性，有什么想法吗？

这是 EPiServer CMS 7 (MVC)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:32:24.680

我将使用**ContentArea**属性而不是 LinkItemCollection，并创建一个具有用于指定链接、图像等属性的块类型。然后将每个链接添加一个块到内容区域。

这也使得通过拖放添加/删除/重新排列链接变得更加容易。

# r - 修改未绘制的 gList 列表

> ID：16039437
> 
> 赞同：2
> 
> 时间：2013-04-16T14:13:03.933
> 
> 标签：r

如果我有一个尚未绘制的 gList，我可以修改其中的文本吗？

例子：

```
library('VennDiagram')
temp <- venn.diagram(list(A=0,B=0),euler.d=FALSE, scale=FALSE, filename=NULL) 
```

这里 temp 是一个未绘制的 gList，我可以通过

```
grid.draw(temp) 
```

但是，如果我想在绘制之前但在创建 gList 对象之后修改文本对象（包括 nubers）怎么办。例如，我可以在创建 gList 后更改维恩图中的值吗？

我知道如果我先绘制维恩图，我可以使用 grid.edit() 来完成，但这不是一个选项。

在

```
str(temp) 
```

这是我要更改的 ..$ 标签。

提前 - 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:31:40.227

你可以做到，但这有点麻烦。另外我不知道您是否可以一次将一个列表子集化为多个元素，因此您可能必须单独手动更改每个标签。基本上我检查了绘图，然后查看了`temp`对象的结构，并找到了标签存储在对象中的位置。然后，我得到了实际上是文本对象的列表元素的索引，并使用子集将它们编辑为其他内容。唯一的事情是我发现我必须一次做每一个，如果你有很多，这会很痛苦。你可以试试这个，我希望它有帮助：

```
unlist( sapply(temp,'[[',"label") )
[1] "0" "0" "1" "A" "B"

# Make index of which top-level elements of list are text elements
x <- !sapply( sapply(temp,'[[',"label") , is.null )
ind <- seq.int(length(x))
ind <- ind[x]

# Subset and change each one in place
`[[`(`[[`( temp , ind[1] ), "label") <- "WAS"
`[[`(`[[`( temp , ind[2] ), "label") <- "BY"
`[[`(`[[`( temp , ind[3] ), "label") <- "CHANGED"
`[[`(`[[`( temp , ind[4] ), "label") <- "THIS"
`[[`(`[[`( temp , ind[5] ), "label") <- "ME"

# Plot with new labels
grid.draw(temp) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Q78Rh.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:01:48.680

不幸的是，该软件包没有遵循网格建议以使通过名称等轻松访问 grobs。

在交互式会话中，您可以使用 找到显示列表中的名称`grid.ls()`，您可以执行以下操作：

```
venn <- gTree(children=temp, name="venn")
grid.edit("venn::GRID.text.17", label="this is a new label") 
```

（显然 17 在给定状态下对我的会话是唯一的；未命名的 grobs 由网格自动索引）

如果有一个一致的（可重现的）命名方案，您可以定义自己的包装`gTree`方法来递归地编辑子标签。`gList``editDetails`

# excel-interop - 当我不希望 Excel 格式化我的日期时？

> ID：16039441
> 
> 赞同：1
> 
> 时间：2013-04-16T14:13:16.020
> 
> 标签：excel-interop

我正在使用 excel 互操作来构建报告。我将字符串“2013 年 4 月 8 日”作为字符串，并将其分配给这样的单元格（其中 oSheet 是 an `Excel._Worksheet`，它是 VB.Net）：

```
oSheet.Cells(5, 2) = dateStr; 
```

没有修改该`NumberFormat`特定单元格的或任何其他属性，但是当我打开输出 xlsx 文件时显示的是“8-Apr-13”。

如何强制 excel 只显示字符串而没有任何可能更改文本的其他格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:32:49.703

要强制 Excel 将日期或任何非文本数据视为文本，从而不自动更改其格式，您可以使用以下两种方法之一：

*   在日期前加上单引号，例如`'08/01/2013`
*   将范围的 NumberFormat 设置为 Text with`range.NumberFormat = "@";`

# java - 如何在静态方法中调用实例方法

> ID：16039444
> 
> 赞同：0
> 
> 时间：2013-04-16T14:13:19.497
> 
> 标签：java, file-io, filereader

所以我想要做的是读取一个`.txt`文件并使用 eclipse 在上面添加一些记录。我将我命名为“ `fileName`”的资源设置为私有，当我尝试在 main 方法中调用它时，出现了一些错误。这是我的代码：

```
public class FileController {
    private String fileName;

    public FileController() {
    }

    public FileController(String fileName) {
        fileName = "student.txt";
    }

    public void readLine() {

        try {
            FileReader fr = new FileReader(fileName);
            Scanner sc = new Scanner(fr);

            // read in the file line by line
            while (sc.hasNextLine()) {
                System.out.println(sc.nextLine());
            }

            fr.close();
        } catch (FileNotFoundException exception) {
            System.out.println("The file " + fileName + " was not found.");
        } catch (IOException exception) {
            System.out.println(exception);
        }

    }

    public void writeLine() {

        try {
            // create the PrintWriter
            FileWriter fw = new FileWriter(fileName, true);
            BufferedWriter bw = new BufferedWriter(fw);
            PrintWriter outFile = new PrintWriter(bw);

            // write value out to the file
            outFile.println("Coke is nice");
            outFile.println("Diet Coke is even better cos won't put on weight =)");

            // close the file
            outFile.close();

            System.out.println("File created: " + fileName);
        } catch (IOException exception) {
            System.out.println(exception);
        }
    }

    public static void main(String[] args) {
        FileController fs = new FileController();
        fs.readLine();
        fs.writeLine();
    }

} 
```

任何人都可以给我一些线索？这些代码不断给我**NullPointerException 错误**。我知道它来自`FileController fs = new FileController()`那一行，但我不知道如何在静态方法中调用实例方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:14:56.487

```
FileController fs = new FileController(); 
```

应该

```
FileController fs = new FileController("fileName"); 
```

您还应该像这样编辑您的构造函数。由于构造函数中的类变量文件名和参数名称具有相同的名称，您必须使用“this”关键字进行赋值。

```
public FileController(String fileName) {
    this.fileName = fileName;
} 
```

如果参数名称和类变量名称不同，您可以这样做。

```
public FileController(String name) {
    fileName = name;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:16:31.863

尝试：

```
public FileController() {
    fileName = "student.txt";
}

public FileController(String fileName) {
    this.fileName = filename;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T14:16:56.133

我认为你的构造函数应该是这样的：

```
public FileController(String fileName) {
    this.fileName = fileName;
} 
```

像这样的无参数构造函数：

```
public FileController() {
    this("student.txt");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:16:54.430

您没有在构造函数中传递文件的名称。您应该在其中传递一个有效的文件名，以便您的逻辑正常工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T14:17:25.133

您需要使用参数调用构造函数，或者默认构造函数应提供默认文件名，例如，在您的 main 中：

```
FileController fs = new FileController("somefile.txt") 
```

并且您的构造函数需要更改为：

```
public FileController(String filename) {
     this.fileName = filename;
} 
```

你可以改变你的默认构造函数：

```
public FileController() {
     this("someDefaultFile.txt");
} 
```

请记住，只有在要查找默认文件时，后一个选项才有意义，否则您应该明确传递文件的名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T14:18:27.560

可以使用您尝试调用其方法的类的对象引用在静态方法中访问实例方法。

因此，正如您正确指出的那样，使用 new 关键字将解决您的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T14:22:48.520

问题是通过调用 new FileController(); 您没有初始化 fileName 字段。您可能希望您的构造函数如下所示：

```
 public FileController() {
        this.fileName = "student.txt";
    }

    public FileController(String fileName) {
        this.fileName = fileName;
    } 
```

然后将调用 new FileController(); 合法的。

# ruby-on-rails - 在 Rails 上使用 API 直播的缓存（优化）策略

> ID：16039449
> 
> 赞同：1
> 
> 时间：2013-04-16T14:13:43.367
> 
> 标签：ruby-on-rails, api, caching

所以我建立了一个使用 Twitch.tv API 的网站，这是一个游戏直播网站。请求又长又慢，我想以某种方式缓存它。问题是有很多动态属性，如果他们还在线，或者有多少观众。由于目前我网站的流量很低，因此提前过期缓存不会有太大帮助。另外，我有一个页面，其中列出了所有直播流，并请求查看流是否在线。因此，即使没有人在线，加载仍然需要一段时间。无论如何在没有缓存的情况下更快地检索api吗？

这是[twitch.tv api 文档](https://github.com/justintv/Twitch-API)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T17:35:39.393

由于您不拥有 Twitch.tv API，不幸的是，我想说您真的无法做任何事情来加快他们的调用速度。

好消息是你可以缓存你对他们的调用，这会让你的用户看起来更快。

缓存调用的方法是创建一个密钥，然后缓存来自 API 的返回 JSON。要创建密钥，我只需使用您为 API 调用的 URL。然后只需给缓存值几分钟的到期时间，当它到期时，您再进行一次 API 调用以重新填充缓存。

另外我会看看 Varnish ( [https://www.varnish-cache.org/](https://www.varnish-cache.org/) )，它非常好地做了很多 HTTP 缓存。可以很好地为您工作，它具有宽限期的概念，试图隐藏缓存到期时进行的昂贵调用。

# spring - 未找到使用 @Component 定义的 Spring Batch Listener

> ID：16039456
> 
> 赞同：0
> 
> 时间：2013-04-16T14:14:03.467
> 
> 标签：spring, spring-batch

我们有多个工作都使用类似的模式。

类文件`MyJobListener`是用`@Component`注释定义的。

XML 中的监听器定义：

```
<batch:listeners>
   <batch:listener ref="myJobListener" />
</batch:listeners> 
```

在某些情况下似乎工作得很好，但在其他情况下却不行。在某些情况下，我们会收到错误消息：

```
ERROR (CommandLineJobRunner.java:355) - Job Terminated in error: Failed to load bean class: mypackage.myJobListener; nested exception is java.io.FileNotFoundException: class path resource [mypackage/myJobListener.class] cannot be opened because it does not exist 
```

不确定它为什么这样做（所有工作都以相同的方式编码）。

**更新**

这似乎是一个环境问题。Spring Batch 作业在一个环境中运行良好，但我们正在更新到新服务器。在新服务器上，我们所有的作业都收到错误 (FileNotFoundException)。

*请让我知道可能需要哪些其他信息。*

***旧服务器***

* * *

java版本“1.6.0_43”

Java(TM) SE 运行时环境 (build 1.6.0_43-b01)

Java HotSpot(TM) 服务器虚拟机（build 20.14-b01，混合模式）

机器硬件：sun4u

SunOS 版本：5.10

处理器类型：sparc

硬件：SUNW,Sun-Fire-480R

***新服务器***

* * *

java版本“1.6.0_43”

Java(TM) SE 运行时环境 (build 1.6.0_43-b01)

Java HotSpot(TM) 服务器虚拟机（build 20.14-b01，混合模式）

机器硬件：sun4v

SunOS 版本：5.10

处理器类型：sparc

硬件：sparc SUNW,T5240

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:58:37.507

由于您没有发布配置...

确保你像这样定义你的类：

```
@Component("myJobListener")
public class MyJobListener implements JobExecutionListener{ 
```

并确保在 ApplicationContext.xml 中的某处有类似的东西

```
<context:component-scan base-package="mypackage" /> 
```

加载带注释的 bean（您的侦听器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T14:47:52.597

我没有出来告诉大家这个决议。

看起来问题与损坏的 jar 文件有关。

我们运行`jar -tf`了所有项目的 jar 文件。对于其中一个 jar 文件，它收到一个错误：

```
java.util.zip.ZipException: invalid END header (bad central directory offset) 
```

重新部署 jar 文件似乎解决了这个问题。

不确定为什么 jar 文件有问题。我们使用 ANT 构建 jar 文件，然后将它们组合成一个 tar 文件进行部署。我们将 tar 文件 SFTP 到 unix 服务器，然后解压缩它。出于某种原因，jar 文件有时会出现问题，但重新部署似乎可以解决问题。

# python - 调用外部函数而不发送“自我”参数

> ID：16039459
> 
> 赞同：5
> 
> 时间：2013-04-16T14:14:15.713
> 
> 标签：python

我正在为 Django 应用程序编写测试，并在我的测试类上使用一个属性来存储它应该测试的视图，如下所示：

```
# IN TESTS.PY
class OrderTests(TestCase, ShopTest):
    _VIEW = views.order

    def test_gateway_answer(self):
        url = 'whatever url'
        request = self.request_factory(url, 'GET')
        self._VIEW(request, **{'sku': order.sku})

# IN VIEWS.PY
def order(request, sku)
    ... 
```

我的猜测是我遇到的问题是因为我调用了`OrderTests`类的属性，python 假设我想发送`self`然后`order`得到错误的参数。很容易解决......只是不要将它用作类属性，但我想知道在这种情况下是否有办法告诉python不要发送自我。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T14:16:06.480

This happens because in Python functions are [*descriptors*](http://docs.python.org/dev/reference/datamodel.html#invoking-descriptors), so when they are accessed on class instances they bind their first (assumed `self`) parameter to the instance.

You could access `_VIEW` on the class, not on the instance:

```
class OrderTests(TestCase, ShopTest):
    _VIEW = views.order

    def test_gateway_answer(self):
        url = 'whatever url'
        request = self.request_factory(url, 'GET')
        OrderTests._VIEW(request, **{'sku': order.sku}) 
```

Alternatively, you can wrap it in [`staticmethod`](http://docs.python.org/dev/library/functions.html#staticmethod) to prevent it being bound to the instance:

```
class OrderTests(TestCase, ShopTest):
    _VIEW = staticmethod(views.order)

    def test_gateway_answer(self):
        url = 'whatever url'
        request = self.request_factory(url, 'GET')
        self._VIEW(request, **{'sku': order.sku}) 
```

# objective-c - Objective-C 中 Torrent 文件的 SHA1 哈希问题

> ID：16039460
> 
> 赞同：1
> 
> 时间：2013-04-16T14:14:16.273
> 
> 标签：objective-c, hash, sha1, bittorrent, utorrent

由于 µTorrent 的响应系统在通过磁力链接或 torrent 文件发送时的不足，即完全没有重复 torrent 添加的消息，我试图在发送之前从 torrent 文件中获取哈希值并进行比较与当前工作的列表。我目前拥有的代码返回了一个不正确的哈希值，我不知道为什么。这是我正在使用的代码。

我正在尝试通过散列为“dc9202f98aea7420a2872655c8f7184401e2a9c8”的文件发送文件，该代码每次运行时都会返回大约三十个散列中的一个。

```
+ (NSString *) torrentHashFromFile:(NSData *)file
{
    NSString * retVal = @"";

    NSData * data = [BEncoding encodedDataFromObject:
                     [[BEncoding objectFromEncodedData:file] 
                      objectForKey:@"info"]];

    unsigned char hashBytes[CC_SHA1_DIGEST_LENGTH];

    if (CC_SHA1([data bytes], (unsigned)[data length], hashBytes))
    {
        NSMutableString* output = [NSMutableString stringWithCapacity:CC_SHA1_DIGEST_LENGTH * 2];

        for(int i = 0; i < CC_SHA1_DIGEST_LENGTH; i++)
        {
            [output appendFormat:@"%02x", hashBytes[i]];
        }

        retVal = output;
    }

    return retVal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:59:40.733

是什么让您认为 BT*信息*散列是 SHA1，而不是*片段*散列？

引用[BEP-0003](http://www.bittorrent.org/beps/bep_0003.html)：

```
info_hash
    The 20 byte sha1 hash of the bencoded form of the info value from the metainfo file. 
    Note that this is a substring of the metainfo file. 
```

# jquery - 如何在 javascript 中构建哈希并将其发布到服务器

> ID：16039461
> 
> 赞同：2
> 
> 时间：2013-04-16T14:14:16.370
> 
> 标签：jquery, ruby, post, hashmap, sinatra

我正在用 ruby​​ + sinatra 构建一个 RESTful Web 应用程序。数据存储在 MongoDB 数据库中，我使用 MongoMapper 来执行此操作。

我的一个模型有一个嵌套的哈希键：

```
{'Key' => {'ObjectA_id' => ['ObjectB1_id', 'ObjectB2_id', ... , 'ObjectBn_id']}} 
```

如您所见，它是一个散列，其键是字符串，值是另一个散列，它将对象 ID 数组^*（我们称之为模型`Model B`）映射到 id 的`Model A`.

* [（实际上这些在技术上也是字符串，因为您不能将真正的 BSON ObjectID 存储在哈希中）]

问题是我不知道如何开始**将**这些数据发送到服务器。通常我使用这样的表格：

```
<form action="/create" method="post">
    <input type="text" name="myField"/>
    <input type="submit"/>
</form> 
```

在服务器端，我可以访问用户`myField`使用此代码填写的任何内容：

```
post '/create' do
    myField = params[:myField]
end 
```

问题显然是我永远无法纯粹使用 HTML 表单来做到这一点，所以我想知道：我该如何解决这个问题？我在想javascript/jquery，但后来我想知道：

1.  如何在 javascript/jquery 中模拟哈希？
2.  如何将其与其他表单数据一起发送？
3.  我如何在服务器上访问它，它会是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:32:01.940

看看使用[JSON](http://www.json.org)。它旨在将基本 JavaScript 对象序列化为字符串，使您可以轻松地将它们从一个应用程序发送到另一个应用程序，通常通过 HTTP。所有主要语言都有 JSON 解析器，所以它是一个很好的数据传输工具，无论应用程序是用什么编写的。Ruby 有一个很好的实现，还有一个非常有用的“ [Ruby 的 JSON 实现](http://flori.github.io/json/)”页面展示了如何使用它：

```
require 'json'

hash = {'foo' => 'bar'}
serialized_hash = hash.to_json # => "{\"foo\":\"bar\"}"
JSON.parse(serialized_hash) # => { "foo" => "bar" } 
```

JSON 还允许您向其抛出一个对象，并获取一个序列化字符串，或者一个序列化字符串并获取一个对象，因此您可以将上述所有内容缩小到如下所示，显示一个完整的序列化/解析：

```
JSON[JSON[hash]] # => { "foo" => "bar" } 
```

除了数组、哈希、字符串和整数之外，您还可以序列化 Ruby 对象：

```
require 'json/add/core'
JSON[/foo/] # => "{\"json_class\":\"Regexp\",\"o\":0,\"s\":\"foo\"}" 
```

要发送数据，请查看使用 Open::URI、RestClient、Typhoeus、Curb 或许多 Ruby HTTP 客户端中的任何一个。

# php - 如何在没有 mysql_num_rows 的情况下计算数据库中的帖子数？

> ID：16039462
> 
> 赞同：-4
> 
> 时间：2013-04-16T14:14:16.417
> 
> 标签：php, sql

如何在没有 mysql_num_rows 的情况下计算数据库中的帖子数？

我正在使用这个：

```
$post_query = mysql_query("SELECT * FROM posts WHERE user='$user'");

$number = mysql_num_rows($post_query); 
```

但是即使有 0 个帖子，mysql_num_rows 也总是返回 1？我需要在有 0 个帖子时返回 0 的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:15:11.543

```
SELECT count (*) FROM posts WHERE user='$user' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:15:37.503

```
SELECT count(*) FROM posts WHERE user='$user' 
```

Read up on your sql first 2 seconds searching on google would have given you the answer

# python - 如何从测试内部访问 py.test capsys？

> ID：16039463
> 
> 赞同：8
> 
> 时间：2013-04-16T14:14:17.340
> 
> 标签：python, unit-testing, pytest, python-unittest

py.test 文档说我应该将 capsys 参数添加到我的测试方法中，但在我的情况下这似乎是不可能的。

```
class testAll(unittest.TestCase):

    def setUp(self):
        self.cwd = os.path.abspath(os.path.split(inspect.getfile(inspect.currentframe()))[0])
        os.chdir(self.cwd)

    def execute(self, cmd, result=0):
        """
        Helper method used by many other tests, that would prevent replicating too much code.
        """
        # cmd = "%s > /dev/null 2>&1" % cmd
        ret = os.system(cmd) >> 8
        self.assertEqual(ret, result, "`%s` returned %s instead of %s (cws=%s)\n\t%s" % (cmd, ret, result, os.getcwd(), OUTPUT)) ### << how to access the output from here

    def test_1(self):
        self.execute("do someting", 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-11-16T17:40:16.607

`capsys`您可以在继承夹具的类中定义一个辅助函数：

```
@pytest.fixture(autouse=True)
def capsys(self, capsys):
    self.capsys = capsys 
```

然后在测试中调用这个函数：

```
out,err = self.capsys.readouterr()

assert out == 'foobar' 
```

感谢 Michał Krassowski 的解决方法，它帮助我解决了类似的问题。

[https://github.com/pytest-dev/pytest/issues/2504#issuecomment-309475790](https://github.com/pytest-dev/pytest/issues/2504#issuecomment-309475790)

# objective-c - 将结构数组复制到另一个结构数组（GLKVector）

> ID：16039464
> 
> 赞同：0
> 
> 时间：2013-04-16T14:14:18.030
> 
> 标签：objective-c, arrays, struct, opengl-es-2.0, glkit

我尝试将 vertexDataTextured ArmandDeBrignac [] 数组的内容复制到 vertexDataTextured MeshVertexData[] 数组中。但它不起作用....我认为问题出在 struct 方法中，有 GLKvector 元素.....？

这是我的头文件：

```
struct vertexDataTextured
{
    GLKVector3      vertex;
    GLKVector3      normal;
    GLKVector2      texCoord;
};
typedef struct vertexDataTextured vertexDataTextured;
typedef vertexDataTextured* vertexDataTexturedPtr;

vertexDataTextured MeshVertexData[] = {}; 

vertexDataTextured ArmandDeBrignac[] = {
    {/*v:*/{-0.979979, -2.383373, -1.142941}, /*n:*/{0.000000, -0.725242, -0.688467}, /*t:*/{0.794971, 0.247112}},
    {/*v:*/{-0.859054, -2.367034, -0.829303}, /*n:*/{0.023591, -0.999512, 0.019593}, /*t:*/{0.786435, 0.224949}},
    {/*v:*/{-1.056731, -2.383373, -1.142941}, /*n:*/{-0.337657, -0.631642, -0.697836}, /*t:*/{0.800393, 0.247114}},
    {/*v:*/{-0.979979, -2.117816, -1.142941}, /*n:*/{0.000000, 0.500198, -0.865902}, /*t:*/{0.645127, 0.391262}},
    {/*v:*/{-0.979979, -2.383373, -1.142941}, /*n:*/{0.000000, -0.725242, -0.688467}, /*t:*/{0.663889, 0.391205}},
    {/*v:*/{-1.056731, -2.383373, -1.142941}, /*n:*/{-0.337657, -0.631642, -0.697836}, /*t:*/{0.663906, 0.396627}},
    {/*v:*/{-0.993670, -2.036772, 0.915066}, /*n:*/{-0.771722, 0.588244, 0.241585}, /*t:*/{0.293949, 0.430232}},
};

@interface FlaschenManager : NSObject

-(void) getFlaschenID: (NSString* ) Name andTexture: (NSString*) path;

@end 
```

和我的 .m 文件

```
@implementation FlaschenManager

-(void) getFlaschenID: (NSString* ) Name andTexture: (NSString*) path
{

    if ([Name isEqualToString:@"ArmandDeBrignac"])
    {
        NSLog(@"%@",Name);

        MeshVertexData[0].vertex.v[0]=ArmandDeBrignac[0].vertex.v[0];
      //  MeshVertexData[] = ArmandDeBrignac[];

    } else if ([Name isEqualToString:@"Hennessy"])
    {
        NSLog(@"%@ ", Name);
        FlaschenName = Name;
    }
} 
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:23:37.270

也许尝试这样的事情

```
vertexDataTextured ArmandDeBrignac[] = {
    {/*v:*/GLKVertex3Make(-0.979979, -2.383373, -1.142941), /*n:*/GLKVertex3Make(-0.979979, -2.383373, -1.142941), /*t:*/GLKVertex2Make(-0.979979, -2.383373)
} 
```

你也可能想去

```
MeshVertexData[0].vertex = ArmandDeBrignac[0].vertex; 
```

如果您尝试访问顶点的索引 0，请改用其 xyz 组件

```
MeshVertexData[0].vertex.x = ArmandDeBrignac[0].vertex.x; 
```

根本没有测试过，但这是一个建议

# java - 如何在一个字节[]中制作一个csv？

> ID：16039468
> 
> 赞同：5
> 
> 时间：2013-04-16T14:14:31.510
> 
> 标签：java, csv

我想知道我应该如何制作一个在字节 [] 中制作 csv 文件的方法。

目前我正在使用这样的东西：

```
 public byte[] makeCsv(){
      StringBuffer csv= new StringBuffer();
      csv.append("columnheader1;columnheader2\r\n");
      csv.append("cell1;cell2\r\n");
      //...
      return csv.toString().getBytes();
 } 
```

我知道我应该使用流，但我现在不知道是哪个。**最好的方法是什么**（没有 IO 访问）**？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T14:19:06.733

没有 IO，你的方式就好了。下面是一个小小的改进。

```
 StringBuilder csv= new StringBuilder(); // Faster
  csv.append("columnheader1;columnheader2\r\n");
  csv.append("cell1;cell2\r\n");
  //...
  return csv.toString().getBytes("windows-1252"); // Windows Latin-1 
```

你也可以使用 StringWriter 。

或者使用 PrintWriter 写入 ByteArrayOutputStream（内存中 IO）。

# java - 点击链接时如何计算？

> ID：16039469
> 
> 赞同：0
> 
> 时间：2013-04-16T14:14:34.260
> 
> 标签：java, jsp, web

我的网页有许多指向其他网站的链接。每次点击链接时，我都必须计算这个特定链接是从我的网站上点击的。

我怎样才能做到这一点？我使用 JSP 作为视图技术，tomcat 作为 web 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:57:54.553

谷歌分析有一个叫做事件跟踪的东西

[https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:45:20.303

如果您使用谷歌分析，很容易设置 javascript 来记录点击。这比设置自己的重定向要容易得多，因为您仍然可以使用实际的 url 锚点而不是通过服务器的 url。

# javascript - 通过 javascript 模板化信息窗口

> ID：16039471
> 
> 赞同：0
> 
> 时间：2013-04-16T14:14:38.367
> 
> 标签：javascript, google-maps, symfony, twig

谷歌地图中的信息窗口是否有模板最佳实践？

我的问题是：我有超过 100 个标记。它们都具有完全相同的结构。我不想在 javascript 中拥有这样的 infowindow 结构：

```
function showInfowindow(marker, object) {
  var html = "<table><tr><td>" + object.name + "</td><td>" + obj.id </td></tr></table>";
  infoWindow.setContent(html);
  infoWindow.open(map, marker); // map is global defined
} 
```

我知道有一些辅助框架（我认为 jquery 也有一些东西）可以轻松地创建带有附加和前置功能的 html。但我的目的是类似于具有占位符的 HTML 文件。

我在 Symfony2 Bundle VichGeographicalBundle 中发现了类似的东西： [https ://github.com/dustin10/VichGeographicalBundle/blob/master/Resources/doc/index.md#popup-info-windows](https://github.com/dustin10/VichGeographicalBundle/blob/master/Resources/doc/index.md#popup-info-windows)

但是集成到这里不是一个选项（我查看了输出，它生成 javascript 变量，类似于`html`上面的变量）

`twig`如果有的话，我也对一些解决方案感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:19:32.750

也许这个来源有一些帮助：[http ://hpneo.github.io/gmaps/](http://hpneo.github.io/gmaps/)

# ios - NSRangeException - NSArrayM objectAtIndex

> ID：16039473
> 
> 赞同：0
> 
> 时间：2013-04-16T14:14:46.157
> 
> 标签：ios, objective-c, nsarray, tableview

**编辑 - 已解决：**问题是当我创建包含所有对象的字符串以放入 tableview 时。我用了“？” 分离每个对象和其中一个包含该字符的对象，因此数组中断。 `[myString appendFormat:@"%@$%@$%@$%@?",
[currentCampeggioDict valueForKey:@"id"],
[currentCampeggioDict valueForKey:@"nome"],
[...]`

`NS Array *elencoCampeggi=[myString componentsSeparatedByString:@"?"];`

 `That's it.

* * *

I have this problem: my app receives from an URL a XML file with a list of objects. The `tableview` is populated by those objects. There are so many items, so I have to call several times the url, changing a parameter in it for example :

`[http://www.myurl.com?method=xxx&PAGE=1](http://www.myurl.com?method=xxx&PAGE=1)`

`[http://www.myurl.com?method=xxx&PAGE=2](http://www.myurl.com?method=xxx&PAGE=2)`

etc..

The last cell of the `tableview` contains the sentence "Click to load next 25 objects" and it changes the page number for the URL, delete itself and reload the url, adding the new objects to the tableview.

After 4 times everything works great, but when I press the cell for the fifth, an exception appears with the following text:

`Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 17 beyond bounds [0 .. 16]'`

Any help? Thanks.

EDIT: some code: this is the part where I delete the last cell

`-(void) loadTestData { // fill moviesArray with test data`

```
NSInteger lastRow = [CampeggiArray count]-1;
if (lastLoadedPage > 1){
    [CampeggiArray removeObjectAtIndex:lastRow];
    [self.tableView reloadData];
} 
```` 

`[...]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:27:24.910

问题是因为您在 tableview 委托方法中返回了错误的行数。您需要确定要在 tableview 中列出的对象的总数，并在 tableview 委托方法中返回计数。这不是您的页面大小。

对于每次命中，您需要继续将新对象附加到已经存在的数据源（NSArray）并重新加载表。在初始命中期间数据源中将没有对象。

我猜，你在委托方法中返回 16 而不是 15，所以你会遇到异常崩溃。不要在您的委托方法中硬编码值，只需获取对象的总数（整个集合）并返回它的计数。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section                {
   return [totalObjects count]; 
```

}

# app-store-connect - iTunesConnect - 下载数量超过 10 个应用程序？

> ID：16039479
> 
> 赞同：1
> 
> 时间：2013-04-16T14:15:05.250
> 
> 标签：app-store-connect

Apple 的 iTunesConnect 中有没有办法找出所有应用程序的下载量？我在“销售与趋势”中获得了我们排名前十的应用程序的数字，但我找不到其他应用程序的数字。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T10:58:09.750

这可能是您正在寻找的：[https ://appfigures.com](https://appfigures.com)

这是一款非常棒、非常有用的应用程序，用于跟踪您的整体应用程序下载和销售情况！

# .htaccess - 301 使用获取变量重定向分页

> ID：16039486
> 
> 赞同：3
> 
> 时间：2013-04-16T14:15:21.083
> 
> 标签：.htaccess, mod-rewrite, rewrite, http-status-code-301

我正在尝试在 URL 中包含“page=1”的页面上设置 301 重定向，以阻止重复内容问题。

例如

[http://www.domain.com/reviews/?page=1](http://www.domain.com/reviews/?page=1) 到 [http://www.domain.com/reviews/](http://www.domain.com/reviews/)

我已经尝试了所有我能找到的变体，但似乎没有任何效果。

```
RewriteRule ^reviews(/)?page=1$ http://www.domain.com/reviews/ [L,R=301]

RewriteRule ^(.*)/?page=1 http://www.domain.com/reviews/ [R=301,L]

RewriteCond %{QUERY_STRING} page=1
RewriteRule ^reviews$ http://www.domain.com/reviews/ [R=301,L,NE] 
```

这些都没有奏效。我不确定还有什么可以尝试的。

我需要为网站的多个不同部分执行此操作：

```
reviews
news
videos
accessories
hardware 
```

将所有 ?page=1 URL 重定向到其相关部分的整体解决方案是最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:29:17.777

使用此代码将每个 URI 重定向`?page=1`到不带查询参数的一个：

```
RewriteCond %{QUERY_STRING} ^page=1(&|$) [NC]
RewriteRule ^ %{REQUEST_URI}? [R=301,L] 
```

否则，如果您只想重定向`/reviews`URI，那么

```
RewriteCond %{QUERY_STRING} ^page=1(&|$) [NC]
RewriteRule ^(reviews)/?$ /$1? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:36:20.397

the question is already answered, i just would like to mention that your rules are not working because you didn't append a trailing `?` to the new url in the rewrite rule

# html - Jquery 事件监听器——HTML 操作函数

> ID：16039495
> 
> 赞同：0
> 
> 时间：2013-04-16T14:15:49.750
> 
> 标签：html, jquery

我有一个包含选项卡的页面，这些选项卡的内容通过 ajax 点击加载。现在每次加载页面时，我都必须激活常见的某些功能。

例子

```
$('#form-modal').submit(function(e){//somecode//}); 
```

如果我不这样做，某些元素将无法按要求工作。

目前正在做的是将这些功能包含在通过 ajax 发送的所有选项卡内容中。该页面没有刷新，它只是加载了新内容，为此我一次又一次地在新内容中包含常用功能。

如果我不再包含这些功能。这些功能不适用于新内容。

我在这里指的是用于操作 html 事件的 jquery 函数

我不想在任何地方都包含脚本。我应该怎么做才能使这些功能在选项卡中发挥作用，而不是在每个地方都包括它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:30:08.483

您应该将事件处理程序绑定到加载页面中的父元素。

例如：

```
<div class="tabscontainer">
    <div class="tabs">
        <ul>
            <li>Tab 1</li>
            <li>Tab 2</li>
            <li>Tab 3</li>
            <li>Tab 3</li>
        </ul>
    </div>
    <div class="cont tab1">
        Tab 1 Contents
    </div>
</div> 
```

如果它们已经存在，您可以显示/隐藏每个 .cont.tabX - 如果它们不存在，则通过 ajax 加载新的。

然后：

假设您在 tab2 中加载了一个 id 为 #form-modal 的表单，如下所示

```
<div class="tabscontainer">
    <div class="tabs">
        <ul>
            <li>Tab 1</li>
            <li>Tab 2</li>
            <li>Tab 3</li>
            <li>Tab 3</li>
        </ul>
    </div>
    <div class="cont tab1">
        Tab 1 Contents
    </div>
    <div class="cont tab2">
        <form id="form-modal" />
    </div>
</div> 
```

使用这个 jQuery：

```
$('.tabscontainer').on('submit','#form-modal', function(e){//somecode//}); 
```

如果您添加了另一个表单#form2：

```
$('.tabscontainer').on('submit','#form2', function(e){//form 2 code//}); 
```

thsi 允许您在页面上加载您需要的所有 js - 即使对于尚不存在的元素 - 以捕获相关事件，因为它使 dom 冒泡并应用于正确的元素

# php - 无法打印_r 数组

> ID：16039496
> 
> 赞同：-1
> 
> 时间：2013-04-16T14:15:50.287
> 
> 标签：php, mysql

```
$page = $_GET['page'];
$p_id = project_id_from_project_name($page);
$project_tasks = tasks_list($p_id);
function PrintR($project_tasks) {
    echo '<pre>';
    print_r($project_tasks);
    echo '</pre>';
} 
```

$page 显示正确的东西，$p_id 显示项目的 id，在如下所示的函数 tasks_list 中使用：

```
function tasks_list($p_id) {
    $project_tasks = array();
    $p_id = (int)$p_id;

    $func_num_args = func_num_args();
    $func_get_args = func_get_args();

    $project_tasks = mysql_fetch_assoc(mysql_query("SELECT `task_name` FROM `tasks` WHERE `project_id` = $p_id"));

    return $project_tasks;
} 
```

该查询正在我的数据库上运行和测试，但是 print_r 没有显示数据？

看不出来为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:28:10.377

你真的在任何地方调用 PrintR() 吗？

请注意以下示例如何不显示任何内容：

```
<?php
    $data = array('hello', 'this', 'is', 'an', 'array');
    function PrintR($data) {
        echo '<pre>' . print_r($data, true) . '</pre>';
    } 
```

[http://codepad.viper-7.com/L1wvfb](http://codepad.viper-7.com/L1wvfb)

但这确实：

```
<?php
    $data = array('hello', 'this', 'is', 'an', 'array');
    PrintR($data);

    function PrintR($data) {
        echo '<pre>' . print_r($data, true) . '</pre>';
    } 
```

[http://codepad.viper-7.com/liJmZx](http://codepad.viper-7.com/liJmZx)

注意添加的`PrintR($data);`. 就在一开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:28:51.577

在调用 task_list() 之后，您正在定义 PrintR() 函数。但是您实际上并没有调用 PrintR()。您收到“无法重新声明 print_r()”的错误似乎表明您正在尝试将行从 'function PrintR($project_tasks) {' 更改为 'function Print_r($project_tasks) {'...

```
$project_tasks = task_list($p_id);
PrintR($project_tasks);
function PrintR($project_tasks) { ... } 
```

# java - 字符串到字符串 [] 的单词

> ID：16039503
> 
> 赞同：0
> 
> 时间：2013-04-16T14:16:02.650
> 
> 标签：java, arrays, string

我需要拆分 a`String`并获取`String[]`单词。我试过这个：

```
String[] plain = plainText.split(" ,;<>/[(!)*=]"); 
```

但就我而言，这是行不通的。拆分后，数组`plain`仍然只有一个值，它是字符串中的整个字符串`plainText`。我的字符串如下所示：

```
<table class="content" border="0" cellpadding="0" cellspacing="0" style="width:540px;" bgcolor="#ffffff">
            <tr>
                <td align="left" valign="top">
                    <font color="#666666" face="Arial, Verdana" size="1">
                    eBay Inc.<br />
                    2145 Hamilton Avenue<br />
                    San Jose, California 95125<br /><br />

                    Designated trademarks and brands are the property of their respective owners. eBay and the eBay logo are trademarks of eBay Inc.
                    <br /><br />

                    <strong>&copy; 2013 eBay Inc. All Rights Reserved</strong><br /><br />

                    eBay Inc. sent this e-mail to you at maximkr@gmail.com because you opted in to the eBay Deals Daily Alert campaign by signing up at ebay.com/deals.<br /><br />

                    Pricing: We compared the selling price for the featured Deals items on eBay to the List Price for the item. The List price is the price (excluding shipping and handling fees) the seller of the item has provided at which the same item, or one that is nearly identical to it, is being offered for sale or has been offered for sale in the recent past. The price may be the seller's own price elsewhere or another seller's price. The "% off" simply signifies the calculated percentage difference between seller-provided List Price and the seller's price for the eBay Deals item. If you have any questions related to the pricing and/or discount offered in eBay Deals, please contact the seller. All items subject to availability.<br /><br />

                    If you wish to unsubscribe from eBay Deals email alerts, please <a href="http://dailydeal.ebay.com/unsubscribe.jsp?s=4IwA&i=883690252203">click here</a>.
                    Please note that you are only opting out of the eBay Deals email alerts. If you are an eBay customer and wish to change your other eBay Notification Preferences, please log in to My eBay by <a href="http://l.deals.ebay.com/u.d?R4GrxGghJ4SpZccF_r3SS=21801">clicking here</a>. Please note that it may take up to 10 days to process changes to your eBay Notification Preferences. <br /><br />

                    Visit our <a href="http://l.deals.ebay.com/u.d?f4GrxGghJ4SpZccF_r3Sf=21811">Privacy Policy</a> and <a href="http://l.deals.ebay.com/u.d?KYGrxGghJ4SpZccF_r3SY=21821">User Agreement</a> if you have any questions.<br /><br />

                    </font>
                </td> 
```

这是已解析的电子邮件消息的一部分。那么如何将这个文本转换成一个单词数组呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:30:09.090

这个正则表达式是错误的，因为它的一些字符是正则表达式控制字符（例如`[`，`(`等`*`）并且必须转义才能用作拆分分隔符，而且整个字符组必须包含在 [] 内：

```
String[] plain = plainText.split("[ ,;<>/\\[\\(!\\)\\*=\\]]"); 
```

在此处阅读有关[Java 正则表达式的](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)更多信息。

**编辑**：要跟进 CPerkins 的评论，您还可以使用此正则表达式：

```
String[] plain = plainText.split("[\\s^\\W]+"); 
```

它的作用是分割所有空白字符和所有非单词字符，我认为这有点像你想要的。

**注意**：以上只是对您问题的直接回答，还有更好的方法来读取/解析 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:33:23.313

您可以使用 Scanner 类。您可以使用

```
while(scanner.hasNext()){} 
```

型构造。

链接：[扫描仪](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:59:59.013

[Apache StringUtils.split](http://commons.apache.org/proper/commons-lang//apidocs/org/apache/commons/lang3/StringUtils.html#split%28java.lang.String%29)的一些变体怎么样？

# wpf - When setting a field to None in the Data Source, do you have to drag it onto a control with a data context?

> ID：16039504
> 
> 赞同：0
> 
> 时间：2013-04-16T14:16:05.163
> 
> 标签：wpf, entity-framework, data-binding

Something we're trying to figure out is how to specify the type of control we want to drag fields from databases, or entity framework objects, onto the WPF window, user control, page. In particular, we're thinking of using Telerik controls, and they don't seem to be assignable to the Data Source view in Visual Studio. But if we set the field to None, do we then drag it onto some control that can be data bound?

# ios - iOS 下带有 2 个不同库的损坏 JPEG

> ID：16039509
> 
> 赞同：1
> 
> 时间：2013-04-16T14:16:20.447
> 
> 标签：ios, objective-c, corruption, mjpeg, gcdasyncsocket

我的代码已经运行了很长时间，但我最近有 2 台新的网络摄像机通过 HTTP 运行高分辨率 MJPEG 图像流，并且我看到两台摄像机的损坏 JPEG 如下所示。所以很确定它与硬件无关。较旧的低分辨率相机仍然可以正常工作。

到目前为止我一直在使用的方法：

```
UIImage *image = [UIImage imageWithData:data] 
```

这一直工作正常，我一直在确保我的 JPEG 以 0xff 0xd8 开头并以 0xff 0xd9 结尾。

有了更大的图像，我现在得到：

```
<Error>: ImageIO: JPEG Corrupt JPEG data: bad Huffman code
<Error>: ImageIO: JPEG Corrupt JPEG data: premature end of data segment 
```

所以我决定试试 libturbojpeg，它显示了类似的解码视觉伪影，但没有错误消息。

流似乎可以通过浏览器正常工作......但是如果我从模拟器中保存一个帧，然后加载到浏览器中，工件就在那里。

我正在使用 GCDAsyncSocket 进行网络连接，它也可以正常工作很长时间了。

所以我想知道是否有人可以阐明事情可能在哪里被破坏了。如果网络数据丢失了，我怀疑我会得到完整的帧，或者预期的 15fps，（虽然我不知道 JPEG 对丢失有多敏感......）但我想不出还有什么可能导致这种问题。

```
1001 0x0D 0x0A--ThisString 0x0AContent-type:image/jpeg 0x0AContent-Length:17137 0x0A 0x0A 0xFF 0xD8 ...

... 0xFF 0xD9 0x0D 0x0A103f 0x0D 0x0A--ThisString 0x0AContent-type:image/jpeg 0x0AContent-Length:17894 0x0A 0x0A 0xFF 0xD8 ... 
```

更新：我已经尝试更换网络层，并看到相同的图像损坏，用完了可以尝试的东西。我还尝试将图像保存到磁盘，它从磁盘加载到已经损坏的浏览器中。如果我将浏览器指向源流，图像到达没有问题。

![示例 jpeg](https://i.stack.imgur.com/0Xl0B.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T14:25:46.443

原来传输编码是问题所在。

# opengl - GLSL for-loop array index

> ID：16039515
> 
> 赞同：9
> 
> 时间：2013-04-16T14:16:37.480
> 
> 标签：opengl, glsl, intel

I'm having some trouble using variable indices in GLSL. The folowing GLSL code is working fine on NVidia cards. But its not working on my Intel HD 4000:

```
for(int i=0;i<int(uLightCount);++i)
{
    vec3 lightPos = uLightsPos[i];
    ....
} 
```

There is no Shader-Compiler Error. The program simply crashes on `glUseProgram`

How can I fix this?

**Edit:**

`uLightCount` and `uLightsPos` are uniforms:

```
#define MAX_LIGHTS 10
uniform float uLightCount;
uniform vec3 uLightsPos[MAX_LIGHTS]; 
```

**Edit 2:**

I have found a strange workaround:

```
#define i0  0
#define i1  1
#define i2  2
...

for(int i=0;i<int(uLightCount);++i)
{
    vec3 lightPos;

    if (i==i0) 
        lightPos = uLightsPos[i0];
    if (i==i1) 
        lightPos = uLightsPos[i1];
    ....
} 
```

Any idea why this is working?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-21T07:15:25.283

索引必须是常数。这就是您的解决方法有效的原因。

所以不可能这么写

```
for(int i=0;i<10;++i)
{
  result += uLightsPos[i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-17T21:30:57.160

在循环内部，我这样做了：

```
for(int i=0;i<n;i++) {
    int j = i;
    and use myArray[j];
} 
```

它编译...所以你可以在你的代码中尝试。

# javascript - 如何复制foundset？

> ID：16039516
> 
> 赞同：1
> 
> 时间：2013-04-16T14:16:42.557
> 
> 标签：javascript, appconkit

所以我有以下问题：我有一个带有一堆记录的 Foundset，我想（深度）将它们复制到一个新位置，包括所有值但没有 ID。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:20:27.233

如果您想对 foundset 进行深层复制，您需要执行以下步骤：

1.  创建一个空的foundset`retrieveOrCreateFoundset()`
2.  遍历foundset的所有记录，应该复制到一个新的
3.  使用类似的东西获取 dataProviders`rec.dataprovider()`
4.  获取记录上每个数据提供者的值 `rec.value()`
5.  确保 uuid 数据提供程序未复制到新记录
6.  通过数据提供者将值设置为新记录
7.  坚持更改

完整的代码示例是：

```
var vMobileController = plugins.iBizClientWebService.mobileController();
var vFoundset = vMobileController.currentFoundset();
var vDatabaseManager = vMobileController.dataManager();
var copyFoundSet = vDatabaseManager.retrieveOrCreateFoundset("<datasource>:<label>");
 for (var index = 0; index < vFoundset.size(); index++) {
     var rec = vFoundset.record(index);
     var loc = copyFoundSet.newRecord();
        var newRecord = copyFoundSet.record(loc);            
        var allDataproviders = rec.dataprovider();
        for(var i=0;i<allDataproviders.length;i++)
        {
            var dataProvider = allDataproviders[i];
            var dataValue = rec.value(dataProvider);
            if(dataProvider != "attribute_id")
            {    
                newRecord.setValue(dataProvider, dataValue);

            }
        }
}

 copyFoundSet.saveData(); 
```

# c# - Window dot open method is getting page can't be displayed issue on download csv file

> ID：16039518
> 
> 赞同：0
> 
> 时间：2013-04-16T14:16:44.003
> 
> 标签：c#, javascript, asp.net, iis-7, https

we are using `window.open('https://cerrtificate-name/csv/394099.aspx?mode=-1')` to download a `csv` file from server. It was working good when I use `http` but failed to work on in the `https` certificate enabled server.

It was given "page can't be displayed issue".

In the below lines are used in 394099.aspx to transmit the csv content

```
String contenttype  = "application/octet-stream";
string strSourceFilepath = "d:\\myfile.csv";
Response.AppendHeader("content-disposition", strContentDisposition+"; filename=myfile.csv");                        
Response.ContentType = contenttype
Response.TransmitFile(strSourceFilepath);
Response.Flush(); 
```

Why this strange behaviour for SSL certificate enabled version? Please help me or advise something to sort it out.

```
WebServer          : IIS 7.0
Server Language    : ASP.NET
SSL                : Enabled 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:23:50.563

您的内容类型不应该是： Content-type: text/csv

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:07:50.620

请参阅以下内容

如果你使用IE，你可能会解决这个问题。

[C# BinaryWrite over SSL](https://stackoverflow.com/questions/356548/c-sharp-binarywrite-over-ssl)

或者

[使用 ASP.NET 在 IE8 中通过 https 下载文件](https://stackoverflow.com/questions/1682123/downloading-a-file-over-https-in-ie8-using-asp-net)

# c# - 在统一 c# 中沿着对象绘制一条线

> ID：16039520
> 
> 赞同：0
> 
> 时间：2013-04-16T14:16:50.213
> 
> 标签：c#, unity3d

您好我正在使用此代码绘制一条跟随对象的线

```
Debug.DrawLine(new Vector3(gameObject.transform.position.x,     gameObject.transform.position.y, gameObject.transform.position.z),
        new Vector3(prevPosition_x, prevPosition_y, prevPosition_z), Color.red,1.0f);

    prevPosition_x = gameObject.transform.position.x;
    prevPosition_y = gameObject.transform.position.y;
    prevPosition_z = gameObject.transform.position.z; 
```

然而，这并没有在构建中绘制。有谁知道如何在不使用内置线或轨迹渲染器的情况下做到这一点。我知道它可以用 gl 完成，但不知道如何做到这一点。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:46:43.093

我相信 Debug.DrawLine 只适用于场景编辑器。

有几种方法可以画线，GL绝对是其中之一。还有[Vectrosity](http://starscenesoftware.com/vectrosity.html)。

唉，您可以通过生成自己的线网格并移动顶点来自己完成。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:32:33.710

As Xerosigma said, Debug.DrawLine only works in Editor, because it's purpose is to debug scripts, not provide visualization for users. Another problem is that this way, you'll only create lines that will render one frame, and previous to current position will only differ by one frame. You, on the other hand, probably want the trail not to be dependent on framerate.

I think that you'll find [TrailRenderer](http://docs.unity3d.com/Documentation/ScriptReference/TrailRenderer.html) component in Unity fitting for your situation. I've used it in [one of my hobbie projects](https://github.com/golergka/Orbit), and it works just fine.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T18:38:24.477

我认为这不是最好的方法，但应该可以

[http://rockonflash.wordpress.com/2010/04/17/how-to-do-lasers-in-unity3d/](http://rockonflash.wordpress.com/2010/04/17/how-to-do-lasers-in-unity3d/)

Debug.DrawLine 仅适用于场景窗口

# google-app-engine - GWT + Appengine + JPA + Eclipse + Maven：如何让它们一起工作

> ID：16039522
> 
> 赞同：3
> 
> 时间：2013-04-16T14:16:52.200
> 
> 标签：google-app-engine, maven, gwt, jpa, google-plugin-eclipse

我有一个项目，我想使用 eclipse GWT 工具（开发模式和调试器）与我正在编写的 GWT/Appengine/Maven 应用程序进行交互。我有一些工作秩序，但仍有一些事情在我不正确的边缘。如果有人可以帮助我解决这几个问题，我将发布 POM 文件。

*   当我执行 Maven->Update Project 时，我在 eclipse 项目属性中失去了 appengine 的性质，必须转到 Properties、Google、AppEngine 并重新检查 Use Google App Engine。我可以在 POM 中做些什么而不失去 appengine 的性质吗？我正在使用 Google appengine-maven-plugin 插件。这似乎是官方使用的。
*   在构建 maven 之后，我必须先清理项目以增强 jpa 类，然后才能使用 Run As - Web Application 启动器运行它们。maven 构建具有在构建中工作的域对象的测试用例 - 我看到在构建 'maven-datanucleus-plugin:3.1.3:enhance (default)' 中针对此目标增强的类。但是作为一个 Web 应用程序运行它会抛出错误，告诉我类没有得到增强，除非我做了一个项目清理，这会导致 eclipse 做它的增强。有没有办法避免这个额外的步骤？
*   我无法运行 JUnit View 测试运行程序或使用使用该视图的启动器。JUnit 视图抱怨：“引起：org.datanucleus.exceptions.NucleusException：插件（捆绑）“org.datanucleus”已注册。确保类路径中没有同一插件的多个 JAR 版本。URL“文件:/C:/Users/bondsd/.m2/repository/org/datanucleus/datanucleus-core/3.1.3/datanucleus-core-3.1.3.jar" 已经注册，并且您正在尝试注册一个相同的插件位于在 URL “file:/C:/Program%20Files/eclipse/plugins/com.google.appengine.eclipse.sdkbundle_1.7.5/appengine-java-sdk-1.7.5/lib/opt/user/datanucleus/v2/datanucleus -core-3.1.3.jar.""。我尝试了各种方法，例如删除 datanucleus 插件和/或依赖项，各种配置选项，并取消选中应用引擎属性面板中的“使用 Datnucleus JDO/JPA 访问数据存储区”。有没有办法让它工作？

下面是我使用的 POM，其中公司和项目名称已删掉。如果您需要启动器，我也很乐意发布它们。在此先感谢您提供任何建议或帮助。我已经搜索了互联网，但还没有找到合适的解决方案。

```
<modelVersion>4.0.0</modelVersion>

<groupId>com.xxx.xxxx</groupId>
<artifactId>shell</artifactId>
<packaging>war</packaging>
<version>0.1.0-proto</version>

<name>XXXXXX</name>
<description>A XXXXXXXX</description>

<properties>
    <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <!-- GWT version -->
    <gwt.version>2.5.1</gwt.version>
    <gwt.style>PRETTY</gwt.style>

    <!-- GAE version -->
    <appengine.version>1.7.6</appengine.version>
    <appengine.sdk.version>1.7.6</appengine.sdk.version>
    <appengine.orm.version>2.1.2</appengine.orm.version>
    <appengine.port>8888</appengine.port>
    <datanucleus.core.version>3.1.3</datanucleus.core.version>
    <datanucleus.api.version>3.1.3</datanucleus.api.version>
    <datanucleus.enhancer.version>3.1.1</datanucleus.enhancer.version>
    <datanucleus.plugin.version>3.1.3</datanucleus.plugin.version>

    <slf4jVersion>1.6.6</slf4jVersion>
    <log4j.version>1.3</log4j.version>
    <junit.version>4.11</junit.version>
</properties>

<dependencies>
    <dependency>
        <groupId>com.google.gwt.inject</groupId>
        <artifactId>gin</artifactId>
        <version>2.0.0</version>
    </dependency>
    <dependency>
        <groupId>com.google.inject.extensions</groupId>
        <artifactId>guice-servlet</artifactId>
        <version>3.0</version>
    </dependency>

    <!-- GWT dependencies -->
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-servlet</artifactId>
        <version>${gwt.version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-user</artifactId>
        <version>${gwt.version}</version>
        <scope>provided</scope>
    </dependency>

    <!-- GAE SDK -->
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-1.0-sdk</artifactId>
        <version>${appengine.version}</version>
    </dependency>

    <!-- For the servlet filter -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <!-- <dependency> <groupId>jstl</groupId> <artifactId>jstl</artifactId> 
        <version>1.2</version> </dependency> -->

    <!-- RequestFactory server -->
    <dependency>
        <groupId>com.trycatchsoft.gwt.requestfactory</groupId>
        <artifactId>injected-requestfactory</artifactId>
        <version>1.2.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>com.google.web.bindery</groupId>
        <artifactId>requestfactory-server</artifactId>
        <version>${gwt.version}</version>
    </dependency>
    <dependency>
        <groupId>com.google.web.bindery</groupId>
        <artifactId>requestfactory-apt</artifactId>
        <version>${gwt.version}</version>
    </dependency>

    <!-- RequestFactory will use JSR 303 javax.validation -->

    <!-- Validation API -->
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>

    <!-- Validation Implementation -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.0.Final</version>
    </dependency>

    <!--Test Dependencies -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>${junit.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.9.0</version>
        <scope>test</scope>
    </dependency>
    <!-- GAE libraries for local testing as described here: http://code.google.com/appengine/docs/java/howto/unittesting.html -->
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-labs</artifactId>
        <version>${appengine.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-stubs</artifactId>
        <version>${appengine.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-testing</artifactId>
        <version>${appengine.version}</version>
        <scope>test</scope>
    </dependency>

    <!-- End of Test Dependencies -->

    <!-- JPA 2.0 for GAE -->
    <dependency>
        <groupId>com.google.appengine.orm</groupId>
        <artifactId>datanucleus-appengine</artifactId>
        <version>${appengine.orm.version}</version>
    </dependency>
    <!-- Datanucleus -->
    <!-- datanucleus-core is not needed for compilation. in fact, it cannot 
        have compile scope because the datanucleus plugin automatically adds it during 
        enhancement and complains if there are two copies. app should not depend 
        on any classes in this lib anyways. -->
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>${datanucleus.core.version}</version>
        <scope>runtime</scope>
        <exclusions>
            <exclusion>
                <groupId>javax.transaction</groupId>
                <artifactId>transaction-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

    <!-- datanucleus-jpa is needed during compilation for its @Extension annotation 
        which is used throughout entity classes -->
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jpa</artifactId>
        <version>${datanucleus.api.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.geronimo.specs</groupId>
        <artifactId>geronimo-jpa_2.0_spec</artifactId>
        <version>1.0</version>
    </dependency>

    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>javax.persistence</artifactId>
        <version>2.0.0</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-jdk14</artifactId>
        <version>1.7.2</version>
    </dependency>
    <!-- SLF4J logging libraries -->
    <!-- <dependency> <groupId>org.slf4j</groupId> <artifactId>slf4j-api</artifactId> 
        <version>${slf4jVersion}</version> </dependency> <dependency> <groupId>org.slf4j</groupId> 
        <artifactId>slf4j-log4j12</artifactId> <version>1.7.2</version> </dependency> 
        <dependency> <groupId>log4j</groupId> <artifactId>log4j</artifactId> <version>1.2.16</version> 
        </dependency> -->

    <!-- End SLF4J logging libraries -->
</dependencies>

<build>
    <!-- Generate compiled stuff in the folder used for developing mode -->
    <outputDirectory>${webappDirectory}/WEB-INF/classes</outputDirectory>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
        </resource>
    </resources>

    <plugins>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
            <dependencies>
                <!-- Need to run the RF Validation tool. This works on both the command-line 
                    and in Eclipse, provided that m2e-apt is installed. -->
                <dependency>
                    <groupId>com.google.web.bindery</groupId>
                    <artifactId>requestfactory-apt</artifactId>
                    <version>${gwt.version}</version>
                </dependency>
            </dependencies>
        </plugin>

        <!-- GWT Maven Plugin -->
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <version>2.5.1-rc1</version>
            <dependencies>
                <!-- Force plugin to use same gwt version -->
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-user</artifactId>
                    <version>${gwt.version}</version>
                </dependency>
                <dependency>
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-dev</artifactId>
                    <version>${gwt.version}</version>
                </dependency>
            </dependencies>
            <configuration>
                <strict>true</strict>
                <extraJvmArgs>-Xss1024K -Xmx1024M -XX:MaxPermSize=256M</extraJvmArgs>
                <logLevel>INFO</logLevel>
                <style>${gwt.style}</style>
                <copyWebapp>true</copyWebapp>
                <hostedWebapp>${webappDirectory}</hostedWebapp>
                <runTarget>Shell.html</runTarget>
                <webappDirectory>${webappDirectory}</webappDirectory>
                <module>com.ihg.dashboard.Shell</module>
                <server>com.google.appengine.tools.development.gwt.AppEngineLauncher</server>
                <i18nMessagesBundle>com.ihg.dashboard.client.Messages</i18nMessagesBundle>
                <appEngineVersion>${appengine.version}</appEngineVersion>
                <!-- Should GWT create the Story of Your Compile Report -->
                <compileReport>false</compileReport>
            </configuration>                
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                        <goal>test</goal>
                        <goal>i18n</goal>
                    </goals>
                </execution>
            </executions>

        </plugin>

        <plugin>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-maven-plugin</artifactId>
            <version>${appengine.version}</version>
            <configuration>
                <jvmFlags>
                    <jvmFlag>-Ddatastore.backing_store=${project.basedir}\local_db.bin</jvmFlag>
                </jvmFlags>
                <enhancerApi>JPA</enhancerApi>
            </configuration>
        </plugin>

        <!-- This plug-in "enhances" your domain model objects (i.e. makes them 
            persistent for datanucleus) -->
            <!--  Might not need this, appengine is supposed to do this appengine:enhance -->
        <plugin>
            <groupId>org.datanucleus</groupId>
            <artifactId>maven-datanucleus-plugin</artifactId>
            <version>${datanucleus.plugin.version}</version>
            <configuration>
                <mappingIncludes>**/domain/*.class</mappingIncludes>
                <metadataIncludes>**/domain/*.class</metadataIncludes>
                <verbose>false</verbose>
                <enhancerName>ASM</enhancerName>
                <api>JPA</api>
            </configuration>
            <executions>
                <execution>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>
            <dependencies>
                <dependency>
                    <!-- enhancement requires the gwt-user jar because many of the entity 
                        classes implement IsSerializable and the enhancer needs it on the classpath 
                        to function. because the gwt-user library has a scope of provided, it is 
                        only available on the compilation and test classpath, and is not transitive 
                        to the enhancement classpath. -->
                    <groupId>com.google.gwt</groupId>
                    <artifactId>gwt-user</artifactId>
                    <version>${gwt.version}</version>
                </dependency>
                <dependency>
                    <!-- force maven-datanucleus-plugin to use the same version of datanucleus-core -->
                    <groupId>org.datanucleus</groupId>
                    <artifactId>datanucleus-core</artifactId>
                    <version>${datanucleus.core.version}</version>
                </dependency>
            </dependencies>
        </plugin>

        <!-- Copy static web files before executing gwt:run -->
        <!--  May not need this now -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <executions>
                <execution>
                    <phase>compile</phase>
                    <goals>
                        <goal>exploded</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <webXml>${webappDirectory}/WEB-INF/web.xml</webXml>
                <webappDirectory>${webappDirectory}</webappDirectory>
            </configuration>
        </plugin>

    </plugins>

    <pluginManagement>
        <plugins>
            <!--This plugin's configuration is used to store Eclipse m2e settings 
                only. It has no influence on the Maven build itself. -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>org.codehaus.mojo</groupId>
                                    <artifactId>
                                        gwt-maven-plugin
                                    </artifactId>
                                    <versionRange>
                                        [2.5.1-rc1,)
                                    </versionRange>
                                    <goals>
                                        <goal>i18n</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <ignore></ignore>
                                </action>
                            </pluginExecution>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>
                                        org.datanucleus
                                    </groupId>
                                    <artifactId>
                                        maven-datanucleus-plugin
                                    </artifactId>
                                    <versionRange>
                                        ${datanucleusVersion}
                                    </versionRange>
                                    <goals>
                                        <goal>enhance</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute />
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

**========================================**

**编辑时：**这是要点 3 的解决方案。在项目属性 - Google - App Engine 页面中禁用 JPA/JDO。转到构建路径并删除所有列为顶级库的 datanucleus 库（这些库是通过在项目属性中启用 appengine 来放置的）。确保 Maven 依赖项位于 Order 选项卡上列表的底部。

**在编辑 2 上：** 当我执行 Maven->Update Project 时，我找到了一种保持 GAE 项目性质的方法。我将此添加到 POM 中（即使我使用的是安装了 m2e 的 eclipse 构建）

```
 <plugin>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.7</version>
            <configuration>
                <downloadSources>true</downloadSources>
                <downloadJavadocs>false</downloadJavadocs>
                <wtpversion>2.0</wtpversion>
                <additionalBuildcommands>
                    <buildCommand>
                        <name>com.google.gwt.eclipse.core.gwtProjectValidator</name>
                    </buildCommand>
                </additionalBuildcommands>
                <additionalProjectnatures>
                    <projectnature>com.google.gwt.eclipse.core.gwtNature</projectnature>
                    <projectnature>com.google.appengine.eclipse.core.gaeNature</projectnature>
                </additionalProjectnatures>
            </configuration>
        </plugin> 
```

这解决了要点 1。所以现在我已经解决了第 1 点和第 3 点（有点）。我仍然需要一种方法来解决要点 2，尽管如果我记得这样做的话，解决方法很容易。我更担心那些在我记得做之后得到代码的人。

我也在寻找一种根本不使用 Eclipse 启动器的方法。我知道可以通过添加各种配置文件和配置来完成。我只需要找到正确的配置来做到这一点。我的意思是一个配置文件将在开发模式（或超级开发模式）下运行 gwt 代码，以及一个配置文件将在开发模式下运行带有 gwt 代码的调试器。

* * *

**在编辑 3 上**：我解决了要点 2。就像关闭 Project->Build Automatically 一样简单。我不确定那是什么。

这就是解决了所有 3 个要点。在这一点上，我可能应该为这个问题创建一个答案，并将它标记为那些对此感兴趣并且没有读到这里的人。我会在一两天内完成（当我有时间撰写一个很好的答案时）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:10:57.193

看起来你的 maven 设置很好，但让我做一些可能有帮助的观察。

1）我会从appengine-maven-plugin中删除enhancerApi，因为我们只是在执行与maven-datanucleus-plugin相同的事情。因此，不要将 appengine:enhance 目标与 datanucleus 插件的目标一起运行。

2) datanucleus 插件的设置只是为了增强域类，这对我来说听起来不错，但我猜只是验证一下。

3）我不再是 eclipse 最好的了，但我很好奇你使用的是哪个 maven 插件，m2eclipse 插件是由 sonatype 开发的，在我看来是最准确的插件。

4) 在我看来，war 插件在编译时的执行似乎是错误的，因为无论如何这都应该默认为 package 阶段，这可以确保其他阶段事先已正确执行。

5) 您可能需要为插件设置更多执行指令，或者依赖默认值（如果存在）。maven 生命周期可能有点棘手，我建议阅读[http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)并确保 eclipse 在启动之前运行正确的阶段你的申请。

# javascript - CSS div 使用坐标定位

> ID：16039526
> 
> 赞同：1
> 
> 时间：2013-04-16T14:16:57.720
> 
> 标签：javascript, css, random

我目前正在用 javascript 编写一个简单的游戏。游戏发生在一个`div`名为*#box*的地方。敌人是一个`div`叫做*#enemy*。

```
 <div id="box">
                <div id="prepend">
                    <div id="hero"></div>
                </div>
                <div id="enemy"></div>
       </div> 
```

在这个#box 内，#enemy 将使用`setInterval()`生成随机数的函数（动画到 x，y）四处移动。但是，当我这样做时，不知何故，坐标开始的原点位于窗口的左上角，而它应该位于*#box*的左上角。这就是我一直在尝试生成随机数以将*#enemy保持在**#box*内的方式

 *```
var test = Math.floor(Math.random() * (1500 - $("#box").offset().left) + 0),
    test2 = Math.floor(Math.random() * (750 - $("#box").offset().top) + 0); 
```

但我显然遇到的问题是它一直在*#box*之外设置动画。

CSS：

```
 #box{
    width:640px;
    height:400px;
    float: left;
    background:url(../png/space.jpg);
    margin: 0 0 0 100px;
    }   
    #enemy {
    width: 69px;
    height: 50px;
    position: absolute;
    margin: 100px 0 0 100px;
    background:url(../png/target2.png);
    z-index:2;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:19:53.977

容器 div 需要有`position: relative`. 否则窗口的位置，或最近的具有`relative`位置的父元素将用于确定内部`div`的位置。通过使父级具有*相对*位置，子级将*相*对于其父级而不是相对于窗口`div`定位自身。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:20:28.417

添加`position: relative;`到#box 以使#enemy 位置相对于#box。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:22:09.233

要使`#box`es 子级相对于它定位，您可以根据您的要求使用以下任何一种：

```
#box { position: absolute; }
#box { position: relative; }
#box { position: fixed; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:19:00.600

你需要：

```
position: relative; 
```

在你的`#box`CSS中，你的绝对位置`#enemy`是相对于盒子的。**

# android - 和引擎精灵移动 PathModifier 和 body

> ID：16039528
> 
> 赞同：0
> 
> 时间：2013-04-16T14:17:04.733
> 
> 标签：android, andengine, move, sprite

我用这个代码

```
 this.mPhysicsWorld = new FixedStepPhysicsWorld(30, new Vector2(0, 0), false, 8, 1);
    this.mScene.registerUpdateHandler(this.mPhysicsWorld);      

     final AnimatedSprite chat_sale_1 = new AnimatedSprite(2157, 638, this.mchatSaleTextureRegion);     

 //final PhysicsHandler physicsHandler2 = new PhysicsHandler(chat_sale_1);
//chat_sale_1.registerUpdateHandler(physicsHandler2);

            final FixtureDef chat_sale_1FixtureDef = PhysicsFactory.createFixtureDef(0, 0, 0f);
            mCatBody = PhysicsFactory.createBoxBody(this.mPhysicsWorld, chat_sale_1, BodyType.DynamicBody, chat_sale_1FixtureDef);
            //mCatBody.setColor(1, 0, 0, 0.25f);                

            final Path path = new Path(5).to(2157, 638).to( 2775, 638).to( 2775, 610).to( 2157, 610).to( 2157, 638);
            //207

            chat_sale_1.registerEntityModifier(
                new LoopEntityModifier(
 new PathModifier(35, path, null, new IPathModifierListener() {

                @Override
                public void onPathStarted(final PathModifier pPathModifier, final IEntity pEntity) {
                    //Debug.d("onPathStarted");
                }

                @Override
                public void onPathWaypointStarted(final PathModifier pPathModifier, final IEntity pEntity, final int pWaypointIndex) {
                    switch(pWaypointIndex) {
                    case 0:         
                        chat_sale_1.animate(new long[]{200, 200, 200}, 9, 11, true);                            
                        break;
                    case 1:
                        chat_sale_1.animate(new long[]{200, 200, 200}, 13, 15, true);
                        break;
                    case 2:
                        chat_sale_1.animate(new long[]{200, 200, 200}, 5, 7, true);
                        break;
                    case 3:
                        chat_sale_1.animate(new long[]{200, 200, 200},1, 3, true);
                        break;
                }
                    //Debug.d("onPathWaypointStarted:  " + pWaypointIndex);
                }

                @Override
                public void onPathWaypointFinished(final PathModifier pPathModifier, final IEntity pEntity, final int pWaypointIndex) {
                    //Debug.d("onPathWaypointFinished: " + pWaypointIndex);
                    //player.stopAnimation();
                }

                @Override
                public void onPathFinished(final PathModifier pPathModifier, final IEntity pEntity) {
                    //Debug.d("onPathFinished");
                    chat_sale_1.stopAnimation();                        
                }
            },EaseLinear.getInstance()))
            );

            this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(chat_sale_1, mCatBody, true, true){
                @Override
                public void onUpdate(float pSecondsElapsed){
                    super.onUpdate(pSecondsElapsed);
                    //Log.d(tag, "onUpdate");
                    //chat_sale_1.setPosition(mCamera.getMinX()+chat_sale_1.getX(), mCamera.getMinY()+chat_sale_1.getY());
            //mCatBody.setLinearVelocity(chat_sale_1.getX(),chat_sale_1.getY());
                    //mCatBody.setLinearVelocity(new Vector2(0,0));
                    //mCatBody.setTransform(new Vector2(mCamera.getMinX()+chat_sale_1.getX()/32,mCamera.getMinY()+chat_sale_1.getY()/32), 0);

                    //mCatBody.setLinearVelocity(new Vector2(mCamera.getMinX()+chat_sale_1.getX(),mCamera.getMinY()+chat_sale_1.getY()));
      //final Vector2 velocity2 = Vector2Pool.obtain(chat_sale_1.getX(), chat_sale_1.getY());
    //mCatBody.setLinearVelocity(velocity2);
     //Vector2Pool.recycle(velocity2);  
      mCatBody.setTransform(chat_sale_1.getX()/32,chat_sale_1.getY()/32, 0);
    //mCatBody.setTransform(new Vector2(chat_sale_1.getX()/mPixelToMeterRatio,chat_sale_1.getY()/mPixelToMeterRatio), 0); 
//final Vector2 velocity2 = Vector2Pool.obtain(mCamera.getMinX()+chat_sale_1.getX(), mCamera.getMinY()+chat_sale_1.getY());

     //final Vector2 velocity2 = Vector2Pool.obtain(chat_sale_1.getX(), chat_sale_1.getY());
     //mCatBody.setLinearVelocity(velocity2);
     //Vector2Pool.recycle(velocity2);  
//mCatBody.setTransform(new Vector2(chat_sale_1.getX()/32,chat_sale_1.getY()/32), 0); 
                }
            });

            mScene.attachChild(chat_sale_1); 
```

代码播放器

```
mplayer = new Saiyan(playerX, playerY, this.textureRegionHashMap.get("hero5")); 
    //this.mCamera.setChaseEntity(mplayer); 

    physicsHandler = new PhysicsHandler(mplayer);
    mplayer.registerUpdateHandler(physicsHandler);

    final FixtureDef playerFixtureDef = PhysicsFactory.createFixtureDef(0, 0, 0f);
    mPlayerBody = PhysicsFactory.createBoxBody(this.mPhysicsWorld, mplayer, BodyType.DynamicBody, playerFixtureDef);

    this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(mplayer, mPlayerBody, true, false){
        @Override
        public void onUpdate(float pSecondsElapsed){
            super.onUpdate(pSecondsElapsed);
            mCamera.updateChaseEntity();
        }
    });

    mCamera.setChaseEntity(mplayer);

    mScene.attachChild(mplayer); 
```

不可能跟随chat_sale_1 的主体然后mplayer 和chat_sale_1 没有任何反应，我不明白。请问如何为 mCatBody 制作正确的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:51:18.270

解决者

```
 final FixtureDef chat_sale_1FixtureDef = PhysicsFactory.createFixtureDef(0, 0, 0f);
            mCatBody = PhysicsFactory.createBoxBody(this.mPhysicsWorld, 8,1, 16,1, 0, BodyType.KinematicBody, chat_sale_1FixtureDef); 
```

在 mScene.registerUpdateHandler(new IUpdateHandler() {

```
 Vector2 localPoint = Vector2Pool.obtain(((chat_sale_1.getX()+(chat_sale_1.getWidth()/2))/PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT), ((chat_sale_1.getY()+chat_sale_1.getHeight()-8)/PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT));
                    mCatBody.setTransform(localPoint, 0);
                    Vector2Pool.recycle(localPoint); 
```

享受 ！！！

# jquery - 嵌套html触发中的jQuery手风琴不起作用

> ID：16039530
> 
> 赞同：0
> 
> 时间：2013-04-16T14:17:07.757
> 
> 标签：jquery, accordion

基本上我试图找到下一个'sacc-trigger'，但'next（）'不起作用，因为它嵌套在一个列表中；我尝试了许多变体，例如 parent().next() 但我无法让它工作。

也许如果有人能给我指个方向；会好的。

我有以下 HTML 代码：

```
<ul class="taxo2">
    <li class="">
        <div class="sacc-trigger active" style="width: 0px;">
            Photos
        </div>
        <div class="sacc-container" style="display: block; width: 0px;">
        </div>
    </li>
    <li class="">
        <div class="sacc-trigger" style="width: 0px;">
            Statements
        </div>
        <div class="sacc-container" style="display: none; width: 0px;">
        </div>
    </li>
    <li class="">
        <div class="sacc-trigger" style="width: 0px;">
            Powerpoint Presentations
        </div>
        <div class="sacc-container" style="display: none; width: 0px;">
        </div>
    </li>
    <li class="">
        <div class="sacc-trigger" style="width: 0px;">
            Videos/Interviews
        </div>
        <div class="sacc-container" style="display: none; width: 0px;">
        </div>
    </li>
</ul> 
```

并尝试使其与 jQuery Accordion 一起使用；有以下我正在尝试调整的来源：

```
(function() {

            var $container = $('.sacc-container'), $trigger = $('.sacc-trigger');

            $container.hide();
            $trigger.first().addClass('active').next().show();

            var fullWidth = $container.outerWidth(true);
            $trigger.css('width', fullWidth);
            $container.css('width', fullWidth);

            $trigger.on('click', function(e) {

                if ($(this).next().is(':hidden')) {
                    alert('here2');
                    $trigger.removeClass('active').next().slideUp(300);
                    $(this).toggleClass('active').next().slideDown(300);
                }
                e.preventDefault();
            });

            // Resize
            $(window).on('resize', function() {
                fullWidth = $container.outerWidth(true)
                $trigger.css('width', $trigger.parent().width());
                $container.css('width', $container.parent().width());
            });

        })(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:25:13.157

你想用jQuery的`parent()`来获取父级`li`，然后用`.next`找到下面的`li`。从这里您可以使用`.find()`获取触发器：

```
if ($(this).parent("li").next().find(".sacc-trigger").is(':hidden')) {
    $trigger.removeClass('active').next().slideUp(300);
    $(this).toggleClass('active').next().slideDown(300);
} 
```

The reason behind this is because `.sacc-trigger` has no *direct* siblings, so you need to first find the closest parent, and then go down one level using `next()` as explained above.

# html - 没有预嵌入标签的 HTML 页面文本搜索和导航

> ID：16039547
> 
> 赞同：0
> 
> 时间：2013-04-16T14:18:00.750
> 
> 标签：html, search, tags, navigation

我正在寻找以下场景的想法/解决方案：

我是一名网站开发人员，从不时更新和重新发布 html 页面的第 3 方获得了 150 多个 HTML 页面。

我正在寻找一种方法来实现这些页面的搜索功能，然后导航到页面中的那个位置。

我不想将导航标签添加到 html 页面，因为当第 3 方重新发布 html 页面时，这些标签会丢失。

理想情况下，我想要一个搜索字符串，搜索 html 文件，然后返回结果列表（有点像 Google 结果），然后当用户单击特定结果的链接时，页面打开并导航到结果位置页面内。

我熟悉 c#/javascript/jquery

任何实现这一目标的想法/建议都将受到欢迎......或确认这不能完成:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:22:42.537

难道 Google、Bing 和其他搜索引擎不提供 API，让您使用它们来索引站点，然后使用它们的搜索功能仅在您的站点上显示结果吗？

# php - 如何通过 XML-RPC 和 PHP 填充 OpenERP 订单

> ID：16039549
> 
> 赞同：1
> 
> 时间：2013-04-16T14:18:08.327
> 
> 标签：php, xml-rpc, openerp

我的 PHP 脚本可能如下所示：

```
function neworder($uid,$pwd,$objname,$methname,$params){
    $client = new xmlrpc_client("/xmlrpc/object", "localhost", 8069);

    $message = new xmlrpcmsg('execute');
    $message->addparam(xmlrpc_encode($uid));
    $message->addparam(xmlrpc_encode($pwd));
    $message->addparam(xmlrpc_encode($objname));
    $message->addparam(xmlrpc_encode($methname));
    $message->addparam(xmlrpc_encode($params));

    $resp = $client->send($message);

    if ($resp->errno!=0)  trigger_error ("sock_execute error ".$resp->errstr);
            return xmlrpc_decode($resp->value());
}

$uid = 1;
$pwd = 'password';

$order = array(
    'name'=> 'order22',
    'shop_id'=> 1,
    'state'=> 'draft',
    'user_id'=> 4,
    'partner_id'=> 7,
    'partner_invoice_id'=> 1,
    'partner_order_id'=> 1
);

$order_id = neworder($uid, $pwd, 'sale.order', 'create', $order);
echo("a new order ".$order_id." is added"); 
```

我正在使用 Ubuntu 和 OpenERP 7。当我运行脚本时出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-21T13:20:22.260

这是一个填充销售订单的工作脚本。

```
function createNewOrder($params,$model_name)
    {
        $client = new xmlrpc_client($this->server . "object");
        $client->return_type = 'phpvals';

        $msg = new xmlrpcmsg('execute');

        $nval = array();
        foreach($params as $k=>$v){
            $nval[$k] = new xmlrpcval( $v, xmlrpc_get_type($v) );
        }

        $msg->addParam(new xmlrpcval($this->database, "string"));  //* database name */
        $msg->addParam(new xmlrpcval($this->uid, "int")); /* useid */
        $msg->addParam(new xmlrpcval($this->password, "string"));
        /** password */
        $msg->addParam(new xmlrpcval($model_name, "string"));
        /** model name where operation will held * */
        $msg->addParam(new xmlrpcval("create", "string"));
        /** method which u like to execute */

        $msg->addParam(new xmlrpcval($nval, "struct"));/** parameters of the methods with values....  */

        /** parameters of the methods with values....  */

        $resp = $client->send($msg);

        if ($resp->errno != 0)
            trigger_error("sock_execute error " . $resp->errstr);

        return xmlrpc_decode($resp->value());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T10:51:38.910

您请求缺少数据库名称，您想在其中创建销售订单。

# validation - mvc 验证消息 - 在 localhost 上正确本地化，在服务器上为英语

> ID：16039550
> 
> 赞同：3
> 
> 时间：2013-04-16T14:18:09.700
> 
> 标签：validation, model-view-controller, asp.net-mvc-4, data-annotations

在我的开发电脑上，该消息以荷兰语正确显示。但是在服务器上，所有验证消息都是英文的？？？

为了确保当前的文化被正确地“强制”，我把它放在我的控制器中：

```
Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("nl-BE") 
```

为了检查哪种文化是活跃的，我把它放在我的视图中：

```
<div>Culture: @Threading.Thread.CurrentThread.CurrentCulture</div> 
```

我的模型有以下字段：

```
<Required(ErrorMessage:="BlaBla {0}")>
<StringLength(1)>
Public Property Verkoper As String

<Required()>
<StringLength(1)>
Public Property Herkomst As String 
```

以下显示在浏览器中（在提交空表单后，因此出现“必需”属性的验证错误。）

**在本地主机上：**

```
Culture: nl-BE
BlaBla Verkoper
Het veld Herkomst is vereist. 
```

这是正确的行为。文化是 nl-BE，验证消息是荷兰语。一个特殊的错误消息用于“Verkoper”字段，如通过数据注释定义的那样。根据需要，“herkomst”字段的错误消息以荷兰语显示。

**在服务器上：**

```
Culture: nl-BE
BlaBla Verkoper
The Herkomst field is required. 
```

这是不正确的。带有数据注释的“Verkoper”字段显示正确，但“herkomst”字段的错误消息以英文显示？

怎么了？我也可以在服务器上获得正确的验证消息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T12:25:28.367

您可以直接在服务器上设置线程文化，如下所示：

```
CultureInfo cultureInfo = CultureInfo.CreateSpecificCulture("nl-BE");
Thread.CurrentThread.CurrentUICulture = cultureInfo;
Thread.CurrentThread.CurrentCulture = cultureInfo; 
```

# java - 数组，为 count++ 创建第三个数组

> ID：16039552
> 
> 赞同：-2
> 
> 时间：2013-04-16T14:18:18.330
> 
> 标签：java, arrays, counter

我有 2 个已给出值的并行数组。一个是short[marks]，另一个是String[names]。我想比较两者的值，这样我就可以打印出学生多年来获得特定成绩的次数。值已经定义和给出。所以如果： Sophie 收到了 85/100，一年内收到了 5 次。我希望它打印：

```
 Sophie : ***** 
```

我知道这是我必须做的：

```
Use an array, such that the 100th index corresponds to the grade 100, the 99th
index corresponds to the grade 99, etc. This way if somebody gets a grade g you 
can just increment the gth element of the array. 
```

我不能为这项作业使用课程。

谁能帮我开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:37:31.690

One suggestion is to build from both arrays, marks and names, generic pairs `<name, mark>`. Then you just have to count the number of identical pairs you have per `name` to obtain the number of `*`

Hope it helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:25:33.513

好的...为了这个奇怪的任务，让我们做一些奇怪的事情（我不知道这是否可行）......实际上可能还有糟糕的编码和性能......无论如何......

现在我们有 2 个数组：名称和标记。例如，我们有 ["A", "B", "A", "A"] 用于名称和 [80,100,80,70] 用于标记。

```
1) Loop through names and if you do not find, say "-1", set a temp var called, say, candidate to store the person i.e. "A" at first.
2) Get the corresponding mark from marks[]
3) Replace name with the cast-ed mark => names["80", "B", "A", "A"]
4) Keep looping names and repeat the above if the name = candidate 
5) At the end, you have names["80", "B", "80", "70"]
6)Loop through it and Make two temp var, say, count and target to record the first mark not equals "-1" and not containing any character i.e A-Z
7) count is used to keep the count of the target. So, target="80" and count = 2 in the 1st loop.
8) Set the element to "-1" when you have accessed it.
9) Print candidate, target and count <-- do the * thing
10) names become ["-1", "B", "-1", "70"]
11) repeat everything
12) The idea is like names[] will go like:  ["A", "B", "A", "A"] => ["80", "B", "80", "70"] => ["-1", "B", "-1", "70"] => ["-1", "B", "-1", "-1"] => ["-1", "100", "-1", "-1"] => ["-1", "-1", "-1", "-1"] 
```

我可能错过了几个步骤，但这是一个粗略的想法，我希望你能理解。最好有一个第三个数组而不是替换 names[]，好吧，自己决定。总的来说，它可能需要 3-4 个嵌套循环（我无法想象这...=.=）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:01:40.180

好的，因为你不能使用类......不确定你是指你自己的类还是任何java类（除了像String这样的极端基础......）所以我假设最坏的情况。

您的输入是：

*   `String[] names`包含一堆名字
*   `int[] marks`包含一堆标记（对应于相应索引的名称
*   `int markToFind`您要查找其出现的标记

你的输出是：

*   `String[] uniqueNames`再次包含名称，但唯一
*   `int[] markOccurences`包含每个名称的出现次数（与前一个数组的相应索引）

**算法**（伪java，可以自己修）

```
{

  String[] uniqueNames = new String[names.length]; // this is oversized, which we can live with.  Counting uniques without a Set is annoying
  int[] markOccurences = new int[uniqueNames.length]; // will default to 0 everywhere

  for (int i=0; i<names.length; i++){
    int nameIdx = addUnique(uniqueNames, names[i]);
    if (marks[i] == markToFind) markOccurences[nameIdx]++;
  }

  // print asterisks per name (insert your code here)
}

int addUnique(String[] array, String element){
  int idx = indexOf(array, element);
  if (idx<0){
    idx = indexOf(array, null);
    array[idx] = element;
  }
  return id;
}

int indexOf(String[] haystack, String needle){
 // implement naively
}

} 
```

并不是说上课会容易得多。多么奇怪的任务

# android - 为什么我会收到有关 API 版本的错误消息？

> ID：16039554
> 
> 赞同：0
> 
> 时间：2013-04-16T14:18:20.213
> 
> 标签：android

我将清单中的 API 版本更改为：

```
<uses-sdk android:minSdkVersion="14" 
          android:targetSdkVersion="14" /> 
```

但是在我的代码中出现错误：

```
Call requires API level 14 (current min is 11):         
     android.hardware.Camera.Parameters#getMaxNumFocusAreas 
```

我需要改变什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:21:10.103

您可能需要更新项目的 Eclipse 设置。右键单击该项目，然后查找“Properties -> Android”。

# java - 无法使用 docsplit 转换 openoffice 文档，导致 java.lang.NoClassDefFoundError

> ID：16039555
> 
> 赞同：1
> 
> 时间：2013-04-16T14:18:24.420
> 
> 标签：java, linux, openoffice.org, docsplit

我已经安装了 docsplit gem 并且能够转换 PDF 文档。但是，在拆分 openoffice 文档（例如 powerpoint 和 word 文件）时，出现以下错误：

```
Exception: Command
/usr/local/bin/docsplit pdf /tmp/tmpzuk5gf/dump.ppt --output /tmp/tmpzuk5gf
finished with return code
1
and output:
Exception in thread "main" java.lang.NoClassDefFoundError: /usr/lib/openoffice
Caused by: java.lang.ClassNotFoundException: .usr.lib.openoffice
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
Could not find the main class: /usr/lib/openoffice. Program will exit. 
```

我已经检查过该`/usr/lib/openoffice`文件夹是否可用。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:20:29.400

我正在`docsplit 0.7.2`使用`OpenOffice`和`Ubuntu 10.04`。但是，0.7.0 及以后的版本似乎更喜欢`LibreOffice`over `OpenOffice`。所以我将我的 docsplit 降级到 0.6.4 版，它在 OpenOffice 上运行良好。我现在可以成功运行命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T21:00:21.793

我已经使用`docsplit 0.7.2`openoffice 了，`ubuntu 12.04`一切正常。

以前我使用过`ubuntu 10.04`，有时转换会出现类似的错误，但我再次尝试过，在大多数情况下转换成功完成。

# ruby-on-rails - 应该和 RSpec 之前

> ID：16039559
> 
> 赞同：1
> 
> 时间：2013-04-16T14:18:34.463
> 
> 标签：ruby-on-rails, testing, rspec, shoulda, matcher

在测试模型字段的有效性之前，我尝试在主题中设置一个实例变量。我需要设置这个变量，因为验证是有条件的（它只用于某些类型的用户）。所以我有这样的事情：

```
 context "as a user" do

    before(:each) do
      subject = Organization.new
      subject.editor = "user"
    end

    it { subject.should validate_presence_of :name }

  end 
```

但它没有按预期工作：

```
 Failure/Error: it { subject.should validate_presence_of :description }
 RuntimeError:
   Organization#editor attr is not set 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:26:50.620

`subject`在你的前块是一个局部变量。看起来您打算使用[明确的主题](https://www.relishapp.com/rspec/rspec-core/v/2-13/docs/subject/explicit-subject#subject-in-a-nested-group)：

```
context "as a user" do
  subject { Organization.new }

  before(:each) do
    subject.editor = "user"
  end

  # usually, you don't explicitly name the subject in an `it` like this
  it { should validate_presence_of :name }

end 
```

# redis - Redis 多客户端服务器架构

> ID：16039560
> 
> 赞同：1
> 
> 时间：2013-04-16T14:18:36.287
> 
> 标签：redis, hiredis

我有一个使用 redis 的应用程序。它是一个两盒系统，意味着应用程序处于 HA（高可用性架构）中。当一个盒子出现故障时，我想恢复该盒子上的所有数据以与第一个盒子同步，反之亦然。用redis可以吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:40:44.783

您可以配置 redis 以将所有数据持久保存到磁盘，并在主从复制中配置您的机器。

Redis sentinel（redis 2.7+内置）也可以用来做故障自动恢复（master宕机时提升一个slave为master）

您可以在 redis 文档网站[http://redis.io/documentation上找到您需要的所有文档](http://redis.io/documentation)

# perl - ONE::Timer 不调用子程序

> ID：16039565
> 
> 赞同：2
> 
> 时间：2013-04-16T14:18:48.770
> 
> 标签：perl

我在工作中开发的项目有问题。它是一个多线程应用程序。我将 Moose 用于面向对象编程，将 ONE::Timer 用于计时器。我认为我没有很好地使用它，因为我的子程序从未被调用过。基本上，这是我的代码：

```
sub add {
    my ($self, $bot) = @_;
    my $provision_object = $bot->provision->new;
    $provision_object->compute;
} 
```

我的计算方法如下所示：

```
sub compute {
    <A couple of line code...>
    ONE::Timer->at($time1, sub { <computations1> });
    ONE::Timer->at($time2, sub { <computations2> });
} 
```

`time1`并`time2`包含一个时间戳。由于我的脚本是一个服务器（所以它永远不会完成），我确信这些时间是在脚本结束之前达到的。`time1`after和`time2`seconds调用的两个子程序永远不会被调用。在该方法的[文档](https://metacpan.org/module/ONE%3a%3aTimer#our-method-at-Rat-epochtime-CodeRef-on_timeout-returns-ONE%3a%3aTimer)中`ONE::Timer->at`，它说：

> 如果你存储返回值，它就充当一个守卫——如果它被破坏，那么计时器就会被取消。

这就是为什么我不存储对方法的调用的返回值。我在这里错过了什么吗？

非常感谢任何答案;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:44:17.720

所以，ONE 是一个事件循环*，所以你必须在某个时候进入循环。通常你会通过调用进入你的事件循环`ONE->loop()`。

在您的事件侦听器之一调用 之前，调用`ONE->loop()`不会返回`ONE->stop()`。

一种选择是将您的代码包装在一个收集块中，例如：

```
use ONE qw( Collect );
collect {
    # The main body of your program
}; 
```

Collect 只会在您的所有事件都触发一次后返回。

如果你想要绿色线程，也就是说，如果你想让你的事件监听器在没有进一步干预的情况下有效地异步运行，那么编写你的程序：

```
use EV; # Optional, but everything is better with it
use Coro;
use ONE;

async {
    # Put the body of your program here
    # In order for Coro to trigger and execute your 
    # event handlers, you'd need to be blocking on 
    # IO somewhere in here.

    ONE->stop(); # Call when you want your program to exit
};

ONE->loop(); 
```

然而，Coro 有自己的警告，你应该在开始之前阅读它。

使用 Github 上的版本，这将是等价的

```
use EV;
use Coro;
use ONE;

ONE->loop(sub {
    # Your main body
    ONE->stop;
}); 
```

* ONE 是 AnyEvent 的包装器，它本身不实现事件循环，而是提供了一个平台，用于在 AnyEvent 周围添加一个非常薄的抽象。

# c++ - 如何使用 OpenAL 播放 FFMPEG 声音样本？

> ID：16039566
> 
> 赞同：2
> 
> 时间：2013-04-16T14:18:55.110
> 
> 标签：c++, audio, ffmpeg, openal

我正在使用 FFMPEG 从文件加载音频视频。它适用于视频，但我不知道如何播放音频样本。

这是我获取音频样本的代码：

```
m_AdotimeBase = (int64_t(m_Adocdec_ctx->time_base.num) * AV_TIME_BASE) / int64_t(m_Adocdec_ctx->time_base.den);   
if(!m_Adofmt_ctx)
{
    //AfxMessageBox(L"m_timeBase");
    return FALSE ;
}
int64_t seekAdoTarget = int64_t(m_currFrame) * m_AdotimeBase;   

if(av_seek_frame(m_Adofmt_ctx, -1, seekAdoTarget, AVSEEK_FLAG_ANY) < 0)
{
    /*CString st;
    st.Format(L"%d",m_currFrame);
    AfxMessageBox(L"av_seek_frame "+st);*/
    m_currFrame = m_totalFrames-1;
    return FALSE ;
}

if ((ret = av_read_frame(m_Adofmt_ctx, &packet)) < 0)
        return FALSE;
if (packet.stream_index == 0)       
{
    ret = avcodec_decode_audio4(m_Adocdec_ctx, &in_AdeoFrame, &got_frame, &packet);
    if (ret < 0) 
    {
        av_free_packet(&packet);
        return FALSE;
    }
} 
```

我的问题是我想用 OPENAL 来听那个样本。

我将不胜感激有关该主题的任何教程或参考资料。

# asp.net - 强制客户端忽略 PDF.js 的服务器端解决方法（Firefox 的内置查看器以 .aspx 扩展名保存）

> ID：16039569
> 
> 赞同：3
> 
> 时间：2013-04-16T14:19:01.250
> 
> 标签：asp.net, firefox, pdf, save, pdf.js

Firefox 的内置 PDF 查看器 (PDF.js) 在使用 URL 作为指南保存 PDF 文件时存在问题（因此使用 .aspx 扩展名而不是 .pdf 扩展名保存它们）。有没有人在服务器端找到临时解决方法来阻止用户使用 PDF.js 或强制下载（另存为）按钮使用 .pdf 扩展名保存？我希望用户能够在浏览器中查看，并保存为 pdf。我知道客户端的解决方法（例如切换到 adobe 插件），但我对这样的解决方案不感兴趣。

[有关更多信息，请参阅https://github.com/mozilla/pdf.js/pull/2635](https://github.com/mozilla/pdf.js/pull/2635)底部的参考问题。似乎已创建了一个修复程序，但它尚未包含在 Firefox 20.0.1 版中。PDF.js 是在 Firefox v19 中引入的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T17:18:54.320

您需要设置正确的标题：

自动打开 PDF

内容类型：应用程序/pdf

询问用户操作

内容类型：应用程序/八位字节流；内容处置：附件

# xslt - 使用传入 xslt 样式表的参数

> ID：16039573
> 
> 赞同：1
> 
> 时间：2013-04-16T14:19:16.453
> 
> 标签：xslt, parameters, saxon, xsl-stylesheet

我正在使用`Saxon`在我的 .NET 应用程序中执行 XML 文档的转换。我正在将一个参数传递给我的`xslt`文档，但我不知道如何在我的模板中使用它。

这是我到目前为止所做的：

```
var zipcode = _db.AXCustomers.FirstOrDefault(x => x.ACCOUNTNUM == accNo).ZIPCODE;
transformer.SetParameter(new QName("CustomerZipCode"), new XdmAtomicValue(zipcode)); 
```

然后在我的`xslt`文档中，我像这样指定参数：

```
<xsl:template match="/">
    <xsl:param name="CustomerZipCode" /> 
```

但是当我尝试使用该参数时，什么也没有出现。我这样使用它：

```
<xsl:value-of select="substring-before($CustomerZipCode, ' ')"/> 
```

但是即使 my`zipcode`确实包含一个值，也没有任何输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:29:33.007

您在元素`xsl:param`内部使用`xsl:template`，这意味着参数用于模板。您从 .net 代码传递的参数是一个转换器参数，相关`xsl:param`的必须放在样式表的顶层，放入`xsl:stylesheet`元素中。

# asp.net-mvc-3 - 在文件结构中组织局部视图的最佳方式是什么？

> ID：16039576
> 
> 赞同：7
> 
> 时间：2013-04-16T14:19:22.613
> 
> 标签：asp.net-mvc-3, razor

我的应用程序可能会有很多局部视图，它们可以分组在一个文件夹结构中。看来我应该这样做，否则我将创建一个包含大量文件的查看文件夹。所以我想我应该有类似的东西：

```
Views -> 
  Group1 -> 
    PartialView1
    PartialView2 
```

HTML.Partial 调用会是什么样子？

```
 HTML.Partial("~/Views/Group1/MyPartialView.cshtml",Model) 
```

我的另一个想法是拥有一个带有条件代码块的 Partial View 文件，但我怀疑这与 PartialViews 的所有内容背道而驰。

最后，如果一个有许多小的局部视图与一个具有多个条件组件的大局部视图相比，性能有什么不同吗？我想我正在考虑将一个文件加载到内存中并编译为代码，而不是加载多个小文件。

谢谢。

编辑：更多信息。

我有一个通用控制器，用于呈现报告的不同部分，因此“介绍”章节的所有部分都将使用“介绍”部分呈现，即“Introduction.Section1”、“Introduction.Section2”。在我的场景中，我不相信我有跨章节的共同部分，所以我可以使用“文件”。想法，但 Views 文件夹会很大，因此我正在考虑使用子文件夹。

编辑：谢谢大家。这里有一些很棒的想法。由于我在其他地方使用了这种方法，因此我最终采用了文件夹的想法。但是我确实意识到我需要使用绝对路径，但这不是问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T14:49:15.970

只要它们在`Views`某个目录中，就没有关系。如果您将其放在`Views/{controller}`or以外的位置`Views/Shared`，那么您将需要完全限定的位置，包括`Views`扩展名，所以`@Html.Partial("~/Views/Group1/PartialView1.cshtml")`.

就个人而言，如果您在单个控制器中使用了很多部分，我会将它们留在 {controller-name} 目录中（如@IyaTaisho 建议的那样，使用前导下划线）。但是如果它们被多个控制器使用，并且您需要将它们分组，我会将它们分组在`Views/Shared/{groupName}`.

关于一个大的部分和许多小的部分，我会说有很多小的部分。可能有理由不时地做一个大的，但总的来说，我相信部分应该尽可能简单。请记住，您始终可以有嵌套的部分，因此如果您在许多部分之间共享功能或布局，您可以将其分解为父部分和下面的许多子部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T14:21:42.577

您可以使用父子文件命名约定，例如：

```
header.html
header.login.html
header.searchbar.html 
```

你甚至可以更进一步：

```
contact.helpdesk.html
contact.office.html 
```

重用部分比唯一部分少得多，因此您可以对可重用部分使用约定，例如：

```
global.partial1.html
global.partial2.html 
```

*   限制是大文件目录。

*   优点易于浏览，易于分类。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-16T14:29:54.440

我通常在部分前面添加一个 _。例如有一个名为 Home.cshtml 的主视图。页面上的部分（部分）将具有以下内容：_header.cshtml、_footer.cshtml 等。

# android - Andengine：FontException Not enough space for letter

> ID：16039580
> 
> 赞同：0
> 
> 时间：2013-04-16T14:19:34.397
> 
> 标签：android, andengine

我正在用andengine 开发一个游戏。我正在玩字体。我正在应用具有不同字体大小的不同字体，我遇到了这个问题。

它的字体异常并说“：

**BitmapTextureAtlas 上的“FontException Not enough space for letter 'ủ'”。**

我是 AndEngine 的新手。任何人都可以帮我解决它。谢谢！

这是异常的 LogCat 快照：

![字体异常](https://i.stack.imgur.com/xfTkH.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T16:26:30.437

这可能看起来很荒谬，但你需要让你的纹理更大，或者让你的字体更小。

请记住，在创建字体时，您必须指定纹理。如果您使用 andengine 的示例代码，您的纹理可能是 256x256 像素。如果您的字体很大，它将填满该纹理并且没有足够的空间来绘制剩余的字符。尝试使该纹理更大，例如 256x512。

这样就可以了。

见下文：

```
this.mFontTexture = new BitmapTextureAtlas(256, 256, TextureOptions.BILINEAR_PREMULTIPLYALPHA);

this.mFont = new Font(this.mFontTexture, Typeface.create(Typeface.DEFAULT, Typeface.BOLD), 32, true, Color.BLACK); 
```

在创建 BitmapTextureAtlas 的行上，第一个参数是绘制字体的纹理的宽度和高度。尝试更大的数字。我敢打赌，只增加一个维度就可以了。

# xml - 用于验证的 XML 没有

> ID：16039585
> 
> 赞同：1
> 
> 时间：2013-04-16T14:19:52.470
> 
> 标签：xml, validation, schema

大约 3 年前，我在一个程序上使用了 XML，简单的东西。我现在需要执行另一项任务，我只是提取了旧文件并进行了一些无关紧要的更改，现在我的文档无法验证。我很困惑，看起来很简单。这是我的架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">

   <xs:complexType name="Task_t">
       <xs:sequence>
           <xs:element name="ShortTitle" type="xs:string"/>
           <xs:element name="Title" type="xs:string"/>
           <xs:element name="Content" type="xs:string"/> 
       </xs:sequence>
   </xs:complexType>

   <xs:element name="History" type="History_t"/>

   <xs:complexType name="History_t">
       <xs:sequence>
           <xs:element name="Task" type="Task_t"></xs:element>
       </xs:sequence>
   </xs:complexType>

</xs:schema> 
```

这是我的文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<History xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:noNamespaceSchemaLocation="file:/Users/pcezanne/Documents/work/stackoverflow/TestSchema.xsd">
   <Task>
       <ShortTitle>Market Needs</ShortTitle>
       <Title>Market Needs Sample Content</Title>
       <Content>MarketNeeds.html</Content>
   </Task>
   <Task>
       <ShortTitle>The Big Concept Answers Market Needs</ShortTitle>
       <Title>Market Needs Sample Content</Title>
       <Content>BigConcept.html</Content>
   </Task>
   <Task>
       <ShortTitle>Solutions</ShortTitle>
       <Title>Market Needs Sample Content</Title>
       <Content>Solutions.html</Content>
   </Task>
   <Task>
       <ShortTitle>Why Us?</ShortTitle>
       <Title>Market Needs Sample Content</Title>
       <Content>WhyUs.html</Content>
   </Task>
   <Task>
       <ShortTitle>Next Steps</ShortTitle>
       <Title>Market Needs Sample Content</Title>
       <Content>Next Steps.html</Content>
   </Task>
</History> 
```

氧气无法验证这一点，抱怨第二个“此时预计没有子元素”。我以为那是为了什么！

我确实知道，当我 3 年前写这篇文章时，这是我的第一个模式，所以也许我在做一些愚蠢的事情。我不介意被告知。：- ） 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:32:48.910

我应该问的第一件事是原始文件是否可以在没有修改的情况下工作？通常，*我认为*微不足道的变化会给我带来最意想不到的问题！

我无法回答您为破坏验证所做的更改，但我可以看到[`<xs:sequence>`](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html#element-sequence)缺少`maxOccurs="unbounded"`. 默认`maxOccurs`值为 1，因此架构只需要 1 个任务。

以下类型允许`Task`我在本地快速测试中的多个元素。

```
<xs:complexType name="History_t">
    <xs:sequence maxOccurs="unbounded">
        <xs:element name="Task" type="Task_t"></xs:element>
    </xs:sequence>
</xs:complexType> 
```

# asp.net - System.Web.Providers 在中等信任下不起作用

> ID：16039587
> 
> 赞同：8
> 
> 时间：2013-04-16T14:19:53.697
> 
> 标签：asp.net, asp.net-membership, medium-trust

我有一个 ASP.NET WebForms 应用程序，它使用 Microsoft ASP.NET 通用提供程序 (NuGet) 作为成员资格和角色。在完全信任下一切正常，但是当我编辑 web.config 以指定中等信任时，在加载访问成员资格的页面时出现此错误：

*无法在部分受信任的安全策略下实例化类型“System.Web.Providers.DefaultMembershipProvider”（目标程序集上不存在 AllowPartiallyTrustedCallersAttribute）。*

我在网上搜索过，但没有找到太多关于这是否是已知限制或是否有解决方法的信息。我正在开发开源应用程序 Gallery Server Pro，它分布在 MS Web Gallery 中，必须支持中等信任环境。

有什么见解吗？

[编辑] 根据请求，这里是 web.config 的东西（我没有使用配置文件或会话状态提供程序）：

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <clear />
    <add name="DefaultMembershipProvider" applicationName="Gallery Server Pro" connectionStringName="GalleryDb" passwordFormat="Clear" enablePasswordRetrieval="true" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="50" minRequiredPasswordLength="2" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</membership>
<roleManager enabled="true" cacheRolesInCookie="true" cookieProtection="Validation" defaultProvider="DefaultRoleProvider">
  <providers>
    <clear />
    <add name="DefaultRoleProvider" applicationName="Gallery Server Pro" connectionStringName="GalleryDb" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </providers>
</roleManager> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T12:36:49.483

我想这可能是因为在 cookie 中扮演的角色，

`<roleManager enabled="true" cacheRolesInCookie="true" cookieProtection="Validation" ...`

删除该部分，或将其设为假，然后检查其是否工作..

由于中等安全性将阻止 cookie 和更多的东西，因为 cookie 不被认为是安全的。它用于清道夫的基本材料（从剩余/临时文件中窃取数据）。

我希望这会做..

# html - 多用户图像编辑

> ID：16039600
> 
> 赞同：0
> 
> 时间：2013-04-16T14:20:32.600
> 
> 标签：html, image, canvas, multi-user

我对 HTML5 很陌生，想知道这是否可能。

我希望能够创建一个画布，我可以在其中加载图像，然后在其上绘制以供其他人查看，并允许他们也对其进行更改。

它不必非常复杂，有很多不同的工具，只是基本的东西。我只是希望能够时不时地更改图像。

这可能吗，如果是这样，有人可以向我指出某种教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:34:35.860

您是否已经知道如何进行非图像协作？

您对任何媒体进行协作编辑的方式几乎相同。

一种媒体和另一种媒体的主要区别在于更新的内容（DOM 元素与绘制事件）。您将遇到的另一件大事与媒介无关，但是您是否想使用 AJAX 或 WebSockets 或您有什么 - 这是一个更多关于您完成协作的方法的问题。

基本概念是（从用户的角度来看）：

*   提交我自己的更改
*   通过 AJAX 定期检查是否有其他人进行了更改，或者使用 WebSockets/长轮询来立即通知其他人的更改
*   使用其他用户的更改更新每个人的视图
*   如果两个更改不兼容，如果这适用于您的问题，请找出解决冲突的方法
*   为用户提供一些“撤消”事物的方法

不要吹我自己的号角，但去年我写了一个名为[cortex](http://cortex.karmanebula.com)的协作草稿纸/头脑风暴应用程序，我[在博客上写了每个提交以及我如何弄清楚如何进行实时协作](http://karmanebula.com/cortex-commit-by-commit/?page=3)。我在 Rails 中使用 AJAX 方法完成了它，但我用于实时协作的概念适用于大多数想要采用类似方法的应用程序。[这篇文章](http://karmanebula.com/cortex-commit-by-commit/2012/7/1/added-sliding-animation-for-new-thought-boxes.html)包括一个模拟两个用户在同一页面上协作的视频，以及来自一个客户端的更新多久/多久显示在另一个客户端浏览器上。

cortex 不是世界上最漂亮或最先进的东西，但我认为它是一个很好的入门应用程序，可以让你了解这些概念。它甚至可能不是最好的设计（这是我的第一个协作应用程序），但我几乎每天都在使用它，而且它似乎运行得很好。

# perl - 使用简单的 Perl 程序获取分段错误

> ID：16039621
> 
> 赞同：2
> 
> 时间：2013-04-16T14:21:43.063
> 
> 标签：perl, segmentation-fault

直到上周，我一直在营销计划中使用 Cory Watson 的 Chart::Clicker Perl 模块 3 年以上，没有任何问题。

我包含了一个非常简单的代码示例。该程序在执行 write_output 命令时失败。我在实际程序中遇到了同样的问题。

*实际程序根本没有修改。这个问题突然出现了*。

```
#!/usr/local/bin/perl

use Chart::Clicker;

my $cc = Chart::Clicker->new;

my @values = (42, 25, 86, 23, 2, 19, 103, 12, 54, 9);
$cc->add_data('Sales', \@values);

$cc->write_output('/home/test/public_html/tmp/foo.png'); 
```

当我在我的服务器上运行该程序时，它会报告“分段错误”错误。如果我注释掉这行代码：

```
$cc->write_output('/home/test/public_html/tmp/foo.png'); 
```

没有错误报告。

关于什么可能是错的任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:32:15.263

感谢所有提供帮助的人。

我们最终在服务器上重新安装了 Perl（它是一个专用的、完全托管的服务器 - 主机选择这样做是因为 CPanel 上的 Perl 模块安装程序没有正确响应）。完成此操作后，test.cgi 报告了各种与 Chart::Clicker 相关的新编译错误。

我们重新安装了几个 Chart::Clicker 依赖项，这解决了问题。

# gruntjs - PHP 中断 grunt 构建 (htmlmin)

> ID：16039624
> 
> 赞同：3
> 
> 时间：2013-04-16T14:21:55.517
> 
> 标签：gruntjs, yeoman

使用 php 代码会破坏 yeoman 生成的项目的 grunt 构建脚本。特别是 htmlmin 任务中断。有没有办法让它工作？我最近使用的一种解决方法是注释掉，然后取消注释 php 块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:42:56.873

grunt-contrib-html 任务只能在原生 HTML 上运行。

* * *

*尽管您可以随意在[html-minifier](https://github.com/kangax/html-minifier/issues)上开一张票以支持 PHP 标签。*

# ember.js - 使用计算属性时，延迟子视图渲染直到获取关联模型？

> ID：16039629
> 
> 赞同：0
> 
> 时间：2013-04-16T14:22:09.110
> 
> 标签：ember.js

我正在尝试制作这个 ember 应用程序，其中一个控制器依赖于另一个控制器，如下所示：

```
App.BooksController = Ember.ArrayController.extend({
itemController: 'book'
});

App.BookController = Ember.ObjectController.extend({
needs: 'books',
formattedPrice: function(){
    return "$"+this.get('price').toFixed(2);
}.property('price'),

imageUrl: function(){
    var img = this.get('image');
    return "http://localhost/book-store-restful-api/images/book_covers/"+img;
}.property('image')
}); 
```

并且有 2 条路线：`#/books`和`#/books/book_id`

当我导航到时，`#/books`我会得到一个包含所有书籍的列表，以及指向每个单独书籍控制器的链接。当我单击它时，它会按预期工作，显示一些单独的书籍信息。但是，如果我浏览到 1 `#/books/book_id`（它在`books`模板内呈现），那么书籍列表就会被呈现，但看起来子模板在关联模型被获取之前被呈现，因此当直接导航时，所有单独的书籍属性都是`undefined`. 如果我在加载后单击相应的链接，则数据可用。

所以简而言之，有没有办法告诉`BookController`它只在获取模型数据后呈现关联的单书子视图？

# .net - CIL中非虚方法的继承行为

> ID：16039630
> 
> 赞同：1
> 
> 时间：2013-04-16T14:22:10.873
> 
> 标签：.net, cil

`virtual`在 CIL 中，在继承（隐藏和覆盖）方面缺少标志的虚拟方法的行为是什么？我搜索了[ECMA335](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)，但找不到预期行为的确切描述。

例如，让我们有基类`A`和子类`B`。

1.  如果`A`包含`M`带有标志的方法`virtual`，并且`B`包含`M`不带标志的方法`virtual`，将`B.M`隐藏`A.M`还是覆盖它？
2.  如果`A`包含一个`M`带有标志的方法`virtual`，并且`B`包含一个`M`带有`.override A.M`标志但没有标志的方法`virtual`，那么是`virtual`隐含的，`B.M`仅在此处是“虚拟的”（但是，`B.M`不能在 的子类中被覆盖`B`）或者这种构造只是非法的（即`.override` *必须*有`virtual`标志的方法）？

我想知道规范的哪些部分回答了这些问题，所以我将来可以自己回答类似的问题（在问这里之前我确实搜索了很多）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T15:31:34.817

该表示在方法 [MethodAttributes] 的 §23.1.10 标志中进行了描述，如`VtableLayoutMask`. 将掩码应用于属性时，结果将为`ReuseSlot`或`NewSlot`。`ReuseSlot`对应`override`C#中的关键字，`NewSlot`对应缺少`override`关键字或显式标记的方法`new`。

隐藏和覆盖是不同的概念。例如，如果`Foo`类中`X`的方法覆盖 中的同名方法`BaseX`，则`X.Foo` *也*隐藏`BaseX`。

现在对于原始帖子中的具体2个问题：

1.  如果 CIL 定义没有被标记`newslot`，那么如果一个方法`B.M`隐藏`A.M`then`B.M`也将被覆盖`A.M`。（第二部分，§10.3.1）

2.  第二部分，§10.3.2 陈述如下（强调我的）：

    > 其余信息指定提供实现的**虚拟方法**。

    结合§15.4.2.2，很明显该`.override`指令只能引用显式标记的方法`virtual`。

# javascript - Firefox 中的 Ajax 问题

> ID：16039632
> 
> 赞同：0
> 
> 时间：2013-04-16T14:22:12.607
> 
> 标签：javascript, ajax, firefox

我通过使用 AJAX 但在 Firefox 中调用页面来计算链接的点击次数，显然是因为调用的页面从未实际加载，出于某种原因 Firefox 从未调用它。似乎点击了链接，然后 Firefox 进行了 AJAX 调用，但不知何故，因为页面更改为 href 中的实际链接，然后 AJAX 调用从未真正发送（在 firebug 中显示为红色，在 Fiddler 中没有任何迹象）。它在 IE 和 Chrome 中运行良好，如果我将链接更改为 target="_new"，那么它将在 Firefox 中运行。我犯了某种愚蠢的错误吗？

```
<HTML>
<HEAD>
<script type="text/javascript">
function adtrk(cde){
var ajaxRequest;  // The variable that makes Ajax possible!
    var r=Math.random();
    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }

    // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            var ajaresp = ajaxRequest.responseText;
        }
    }

    ajaxRequest.open("GET", "/atr.php?cde=" + cde + "&r=" + r, true);
    ajaxRequest.send(null);
}

</script>
</HEAD>
<BODY>
<a onclick="adtrk('zip1'); return true;" href="http://www.google.com"><img src="/images/img.jpg"></a>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:23:09.880

当您加载新页面时，任何打开的 AJAX 请求都将被取消（由浏览器）。您的服务器可能永远不会看到点击计数请求。

要么总是在新窗口中打开链接，要么使用其他一些机制来计算点击次数，比如代理/重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:32:39.493

在 ajax 请求完成之前页面会发生变化。您应该通过同步运行它来等待您的ajax请求结束，然后再更改页面：

```
ajaxRequest.open("GET", "/atr.php?cde=" + cde + "&r=" + r, false); 
```

# cuda - OptiX 中的多个 GPU（可以异步启动？）

> ID：16039633
> 
> 赞同：1
> 
> 时间：2013-04-16T14:22:13.283
> 
> 标签：cuda, multi-gpu, optix

我的硕士论文遇到了一些挑战，希望您能帮助我，或者为我指明正确的方向。

我正在使用 Knaus 和 Zwicker ( [http://www.cs.jhu.edu/~misha/ReadingSeminar/Papers/Knaus11.pdf](http://www.cs.jhu.edu/~misha/ReadingSeminar/Papers/Knaus11.pdf) ) 使用 OptiX 的新方法实现渐进式光子映射。这种方法使得 PPM 的每个迭代/帧独立，更适合多 GPU。

我所做的（使用单个 GPU）是使用 OptiX 跟踪许多光子，然后将它们存储在缓冲区中。然后，使用 CUDA 和推力将光子分类为空间哈希图，永远不会离开 GPU。我想在 GPU 上创建空间哈希图，因为它是我的渲染器的瓶颈。最后，在间接辐射估计期间使用此缓冲区。所以这是一个多通道算法，包括光线追踪、光子追踪、光子图生成和最后创建图像。

我了解 OptiX 可以支持多个 GPU。每个上下文启动都在 GPU 上进行划分。对缓冲区的任何写入似乎都被序列化并广播到每个设备，以便它们的缓冲区内容相同。

我想做的是让一个 GPU 做一帧，而第二个 GPU 做下一帧。然后我可以组合结果，例如在 CPU 或 GPU 中的一个组合通道上。如果我可以在每个设备上并行执行每个通道（在每个通道之间同步），这也是可以接受的。这有可能吗？

例如，我是否可以在两个不同的主机线程上创建两个 OptiX 上下文映射到每个设备。这将允许我像以前一样生成 CUDA/推力空间散列图，假设光子在一个设备上，并在管道末端合并两个生成的图像。但是，编程指南声明它不支持多线程上下文处理。我可以使用多个进程，但是进程间通信有很多混乱。这种方法还需要在创建场景几何体、编译 PTX 文件等方面进行重复工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T19:47:37.743

OptiX 已经根据您的 GPU 功率相应地拆分工作负载，因此您的方法可能不会比 OptiX 处理所有 GPU 更快。

如果您想强制您的数据保留在设备上（请注意，在这种情况下，来自不同设备的写入将**不一致**）您可以使用编程指南中指示的**RT_BUFFER_GPU_LOCAL标志**

[https://developer.nvidia.com/optix-documentation](https://developer.nvidia.com/optix-documentation)

# asp.net - 哪些浏览器符合 rfc 6265

> ID：16039634
> 
> 赞同：4
> 
> 时间：2013-04-16T14:22:19.230
> 
> 标签：asp.net, browser, rfc6265

我正在寻找符合 rfc 6265 的浏览器列表。我问谷歌先生，显然这不是一个简单的答案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-26T14:11:20.187

我能找到的最接近的是这个网站：[https](https://inikulin.github.io/cookie-compat/) ://inikulin.github.io/cookie-compat/ ，它列出了每个功能的浏览器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T14:31:06.433

据我了解，我可能错了，但 RFC 6265 不需要由任何特定的浏览器实现。定义了 RFC 6265 cookie 值，以便它们可以与实现任何 Cookie RFC 的任何浏览器一起使用。

如果您尝试使用不符合 RFC 6265 的 cookie 值，您可能会发现 cookie 行为因浏览器而异。

我认为如果您只符合 RFC 6265 就可以了。

# css - Twitter Boostrap 控制 div 未对齐

> ID：16039635
> 
> 赞同：0
> 
> 时间：2013-04-16T14:22:19.330
> 
> 标签：css, twitter-bootstrap

我有一个快速的 Bootstrap 问题。我正在设置一个表单，表单标签似乎没有与输入字段对齐。我之前遇到过这样的问题，通过在类中添加 clearfix 解决了这个问题。这并没有解决问题。

小提琴示例：

[http://jsfiddle.net/mwoods98/P6ux2/1/](http://jsfiddle.net/mwoods98/P6ux2/1/)

```
<div id="pane2" class="tab-pane">
    <div class="well">
        <label class="control-label" for="interview">Label 1</label>
        <div class="controls">
            <div>
                <input type="text" id="interview" name="FDFINTERVIEW" class="" />
            </div>
        </div>
        <label class="control-label" for="resume">Label 2</label>
        <div class="controls">
            <div>
                <input type="text" id="resume" name="FDFMEMOSENT" class="" />
            </div>
        </div>
        <label class="control-label" for="memoreceived">Label 3</label>
        <div class="controls">
            <div>
                <input type="text" id="memoreceived" name="FDFMEMORECV" class="" />
            </div>
        </div>
        <label class="control-label" for="selectionemail">Label 4</label>
        <div class="controls">
            <div>
                <input type="text" id="selectionemail" name="fdfEmailSent" class="" />
            </div>
        </div>
        <label class="control-label" for="fdfSECSbmt">Label 5</label>
        <div class="controls">
            <div>
                <input type="text" id="fdfSECSbmt" name="fdfSECSbmt" class="" />
            </div>
        </div>
        <label class="control-label" for="fdfInSECGrnt">Label 6</label>
        <div class="controls">
            <div>
                <input type="text" id="fdfInSECGrnt" name="fdfInSECGrnt" class="" />
            </div>
        </div>
        <label class="control-label" for="fdfInSECDeny">Label 1=7</label>
        <div class="controls">
            <div>
                <input type="text" id="fdfInSECDeny" name="fdfInSECDeny" class="" />
            </div>
        </div>
        <label class="control-label" for="fdfFullSECGrnt">Label 8</label>
        <div class="controls">
            <div>
                <input type="text" id="fdfFullSECGrnt" name="fdfFullSECGrnt" class="" />
            </div>
        </div>
        <label class="control-label" for="fdfMEDGrnt">Label 9</label>
        <div class="controls">
            <div>
                <input type="text" id="fdfMEDGrnt" name="fdfMEDGrnt" class="" />
            </div>
        </div>
        <label class="control-label" for="fdfEOD">Label 10</label>
        <div class="controls">
            <div>
                <input type="text" id="fdfEOD" name="fdfEOD" class="" />
            </div>
        </div>
        <div class="control-group">
            <label class="control-label" for="textarea">Label 11</label>
            <div class="controls">
                <textarea class="input-xlarge" id="textarea" rows="3"></textarea>
            </div>
        </div>
    </div>
    <!-- end of well -->
</div> 
```

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:30:45.913

您必须将元素放在一个`control-group`类中并将该类添加到您的表单中`form-horizontal`，您也不需要额外的 div 来输入。

```
<div class="form-horizontal">
    <div class="control-group">
        <label class="control-label" for="interview">Label 1</label>
        <div class="controls">
            <input type="text" id="interview" name="FDFINTERVIEW" class="" /></div>
        </div>
    </div>
</div> 
```

* * *

> *   添加`.form-horizontal`到表格中。
> *   包装标签和控件`.control-group`
> *   添加`.control-label`到标签
> *   包装任何相关的控件`.controls`以正确对齐
> 
> [Twitter Bootstrap 文档](http://twitter.github.io/bootstrap/base-css.html#forms)- 水平表单

# jquery - 使用 ImageMapster 全选

> ID：16039638
> 
> 赞同：0
> 
> 时间：2013-04-16T14:22:47.183
> 
> 标签：jquery, html, css, imagemapster

我已经创建了一个饼图，现在使用 ImageMapster 来设置它的样式。当我单击一块馅饼时，我希望所有其他部分都被选中（不透明度），但不是我单击的那个。

有谁知道如何做到这一点？

到目前为止我的代码：

```
 $('.pie').mapster({
            stroke: true,
            strokeOpacity: 1.0,
            strokeColor: '000000',
            strokeWidth: 1,
            singleSelect: true,
            fill: true,
            fillColor: '0000ff',
            fillOpacity: 0.25,

            render_select: 
            {
                fillOpacity: 0.75,
                fillColor: '000000'
            },
            render_highlight: 
            {
                fillOpacity: 0.5,
                fillColor: '00ff00'
            },
            onClick: function(e) { 

                // Select all pies but not this one.
                $('.pie area').mapster('select');
            }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:41:42.063

这应该有效：

```
onClick: function(e) { 
    // unselect the clicked one
    $(this).mapster('deselect');

    // Select all pies but not this one.
     $('.pie area').not(this).mapster('select');

    // prevent default click handling
    return false;
} 
```

# datamapper - Mule DataMapper 字符串列表

> ID：16039645
> 
> 赞同：0
> 
> 时间：2013-04-16T14:23:13.137
> 
> 标签：datamapper, mule

我试图用以下场景制作一个复杂的映射（对我来说很复杂）：

在：

```
<root>
    <bigrow>
        <row>1</row>
        <row>second</row>
        <row>third</row>
    </bigrow>
    <bigrow>
        <row>4</row>
        <row>rowvalue</row>
        <row>anotherrowvalue</row>
    </bigrow>
</root> 
```

出去：

```
<entities>
    <entity>
        <atributeA>1</atributeA>
        <atributeB>some</atributeB>
        <atributeC>value</atributeC>
    </entity>
    <entity>
        <atributeA>2</atributeA>
        <atributeB>another</atributeB>
        <atributeC>valuee</atributeC>
    </entity>
    <entity>
        <atributeA>3</atributeA>
        <atributeB>ooother</atributeB>
        <atributeC>valueee</atributeC>
    </entity>
</entities> 
```

我想按顺序映射条目中的行元素，因此所需的结果需要是这样的：

```
<entities>
    <entity>
        <atributeA>1</atributeA>
        <atributeB>second</atributeB>
        <atributeC>third</atributeC>
    </entity>
    <entity>
        <atributeA>4</atributeA>
        <atributeB>rowvalue</atributeB>
        <atributeC>anotherrowvalue</atributeC>
    </entity>
</entities> 
```

我创建了将条目和输出作为 XML 的地图，并从这两个 xml 生成模式，dataMapper 窗口如下所示：

[http://i.stack.imgur.com/6CYrR.png](http://i.stack.imgur.com/6CYrR.png)

我找不到如何让它工作......如果有人可以帮助我，你会让我开心=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:55:52.587

Mule 带有一个 XSL-T 转换器，因此，如果您有兴趣，这里是无需使用 DataMapper 的重型火炮即可实现您的目标的转换。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="/">
    <entities>
      <xsl:apply-templates />
    </entities>
  </xsl:template>

  <xsl:template match="bigrow">
    <entity>
      <atributeA>
        <xsl:value-of select="child::row[position()=1]/text()" />
      </atributeA>
      <atributeB>
        <xsl:value-of select="child::row[position()=2]/text()" />
      </atributeB>
      <atributeC>
        <xsl:value-of select="child::row[position()=3]/text()" />
      </atributeC>
    </entity>
  </xsl:template>
</xsl:stylesheet> 
```

# sql - Optimize BETWEEN date statement

> ID：16039649
> 
> 赞同：3
> 
> 时间：2013-04-16T14:23:35.997
> 
> 标签：sql, postgresql, indexing, between, postgresql-performance

I need help in optimize a PostgreSQL query which uses the `BETWEEN` clause with a `timestamp` field.

I have 2 tables:

```
ONE(int id_one(PK), datetime cut_time, int f1 . . .) 
```

containing about 3394 rows

```
TWO(int id_two(PK), int id_one(FK), int f2 . . .) 
```

containing about 4000000 rows

There are btree indexes on both PKs `id_one` and `id_two`, on the FK `id_one` and `cut_time`.

I want to perform a query like:

```
select o.id_one, Date(o.cut_time), o.f1, t.f2 
from one o
inner join two t ON (o.id_one = t.id_one)
where o.cut_time between '2013-01-01' and '2013-01-31'; 
```

This query retrieves about 1.700.000 rows in about 7 seconds.

Below the explain analyze report is reported:

```
"Merge Join  (cost=20000000003.53..20000197562.38 rows=1680916 width=24) (actual time=0.017..741.718 rows=1692345 loops=1)"
"  Merge Cond: (c.coilid = hf.coilid)"
"  ->  Index Scan using pk_coils on coils c  (cost=10000000000.00..10000000382.13 rows=1420 width=16) (actual time=0.008..4.539 rows=1404 loops=1)"
"        Filter: ((cut_time >= '2013-01-01 00:00:00'::timestamp without time zone) AND (cut_time <= '2013-01-31 00:00:00'::timestamp without time zone))"
"        Rows Removed by Filter: 1990"
"  ->  Index Scan using idx_fk_lf_data on hf_data hf  (cost=10000000000.00..10000166145.90 rows=4017625 width=16) (actual time=0.003..392.535 rows=1963386 loops=1)"
"Total runtime: 768.473 ms" 
```

The index on the timestamp column isn't used. How to optimize this query?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T22:23:11.727

### Proper DDL script

Not sure what kind of notation you are using in your question. It's not Postgres syntax. A proper setup could look like this:
[**SQL Fiddle.**](http://sqlfiddle.com/#!12/39f06/1)

More about this fiddle further down.
Assuming data type [`timestamp`](http://www.postgresql.org/docs/current/interactive/datatype-datetime.html) for the column `datetime`.

### Incorrect query

`BETWEEN` is almost always **wrong** on principal with `timestamp` columns. More details in this related answer:

*   [Find overlapping date ranges in PostgreSQL](https://stackoverflow.com/questions/4480715/find-overlapping-date-ranges-in-postgresql/15305292#15305292)

In *your query*:

```
SELECT o.one_id, date(o.cut_time), o.f1, t.f2 
FROM   one o
JOIN   two t USING (one_id)
WHERE  o.cut_time BETWEEN '2013-01-01' AND '2013-01-31'; 
```

... the string constants '2013-01-01' and '2013-01-31' are coerced to the timestamps '2013-01-01 00:00' and '2013-01-31 00:00'. This excludes most of Jan. 31\. The timestamp '2013-01-31 12:00' would not qualify, which is most certainly **wrong**.
If you'd use '2013-02-01' as upper border instead, it'd include '2013-02-01 00:00'. Still wrong.

To get *all timestamps of "January 2013"* it **needs to be**:

```
SELECT o.one_id, date(o.cut_time), o.f1, t.f2 
FROM   one o
JOIN   two t USING (one_id)
WHERE  o.cut_time **>=** '2013-01-01'
AND    o.cut_time **<**  '2013-02-01';
```

**Exclude the upper border.**

### Optimize query

[@Clodoaldo](https://stackoverflow.com/a/16039791/939860) already mentioned the major drag on performance: it's probably pointless to retrieve 1.7 mio rows. Aggregate *before* you retrieve the result.

Since table `two` is so much bigger, the crucial are the rows, you have to retrieve from there. As long as you retrieve a large part of the table, more than ~ 5% , a plain **index on `two.one_id` will not be used**, because it is faster to scan the table sequentially right away.

Your table statistics are outdated, or you have messed with cost constants and other parameters (which you obviously have, see below) to force Postgres into using the index anyway.

The only chance I would see for an index on `two` is a **covering index** with PostgreSQL **9.2**. But you neglected to disclose your version number.

```
CREATE INDEX two_one_id_f2 on two(one_id, f2); 
```

This way, Postgres could read from the index directly, if some preconditions are met. Might be a bit faster, not much. Didn't test.

### Strange numbers in `EXPLAIN` output

As to your strange numbers in your `EXPLAIN ANALYZE`. This [**SQL Fiddle**](http://sqlfiddle.com/#!12/39f06/1) should explain it.

Seems like you had these debug settings:

```
SET enable_seqscan = off;
SET enable_indexscan = off;
SET enable_bitmapscan = off; 
```

**All of them should be `on`**, except for debugging. Would cripple performance! Check with:

```
SELECT * FROM pg_settings WHERE name ~~ 'enable%' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T14:30:38.483

The query executes in less than one second. The other 6+ seconds are spent on traffic between server and client.

# javascript - 根据先前的输入过滤 html 表单选项

> ID：16039651
> 
> 赞同：0
> 
> 时间：2013-04-16T14:23:37.287
> 
> 标签：javascript, django, forms, django-crispy-forms

我将在这个问题的开头说我不是在这里寻找代码，只是在我付出大量努力之前表明我的方法是否正确。这就是为什么我还没有尝试自己编写代码的原因。

我正在开发一个包含先例数据库的 django 站点。我想让某些用户使用通用的 CreateView 和使用crispy-forms 构建的 ModelForm 上传新的决策。`<option>`我想通过从 html字段中删除不相关的选项来使用户尽可能容易地做到这一点。我关心的表格部分看起来有点像：

```
<select class="input-xlarge select" id="id_decisions" name="clauses">
    <option value="" selected="selected">---------</option>
    <option value="1">2012 Decisions</option>
    <option value="2">2011 Decisions</option>
    ...
</select>
<select class="input-xlarge select" id="id_clauses" name="clauses">
    <option value="" selected="selected">---------</option>
    <option value="1">2012 clause 1</option>
    <option value="2">2012 clause 2</option>
    <option value="3">2011 clause 1</option>
    ...
</select> 
```

当有人`2012 decisions`从下拉列表中选择时，我想过滤掉“子句”选项字段中没有说“2012”的所有选项。我怀疑这意味着编写一个类似于[这个问题](https://stackoverflow.com/questions/12605601/dynamically-change-selectbox-options-based-on-previous-option-selection)的答案的 javascript 过滤器，但我不知道任何 javascript，因此并不真正理解该代码在做什么。在我承诺学习足够多的 javascript 以确保我产生了一个好的解决方案之前，我只想确定我对如何完成的怀疑是正确的。是吗？我是否错过了使用 Django 或crispy-forms 在 Python 中执行此操作的明显方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:14:11.030

如果您希望在不提交表单和刷新页面的情况下过滤下拉列表，那么*唯一*的方法就是使用 Javascript。这不是 Django 的限制：这正是 Web 应用程序的工作方式。

# backup - Team Foundation Server 2012 更新 2 - 计划备份向导

> ID：16039655
> 
> 赞同：3
> 
> 时间：2013-04-16T14:23:48.790
> 
> 标签：backup

应用更新 2 后 -*计划备份*现在是一个内置功能（不需要 Power Tool）。我很难理解在文件共享上转储备份所需的权限。即使尝试将备份转储到本地共享 - \mytfs2012server\c$\Backup - 向导也会以：

```
TF401002: The SQL Server Database Engine failed to save the database backup to path... Please grant SQL service account read/write access to that folder. 
```

消息非常简单。我尝试了不同的事情 - 没有成功。使用 Update 1 + Power Tools 经过一些调整后，我成功使用了该向导。任何人都可以列出更新 2的*计划备份*所需的权限吗？

**编辑：**

更新 3 对我没有任何改变。但是看起来更新 4 会。从[这个页面](http://support.microsoft.com/kb/2872520)看来，更新 4 将包含有关备份的更改：

*   如果 TFS 2012 的 SQL Server 服务作为虚拟帐户运行（例如：NT Service\MSSQLSERVER），则计划备份配置不再被阻止。在 TFS 2012 Update 2 和 Update 3 中，事务备份在完整备份或差异备份正在运行时尝试运行时会记录失败。
*   如果正在运行完整备份或差异备份，则计划备份不再运行事务备份。相反，该作业将暂停，直到另一个备份完成运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T08:44:36.947

我有同样的问题。

基础设施：TFS 2012 更新 2、SQL Server 2012

解决方案：我在数据库备份服务器上创建了一个简单的共享文件夹，如 \BACKUPSERVER\TFS_Backup$。我在**Security** and **Share Permissions中为****TFS 管理员**和**SQL 管理员**配置了完全控制。现在备份作业正在运行。

 ****但现在我有另一个问题：运行完整备份后，事务日志没有被截断，是否有人有相同的问题或解决方案？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T13:59:09.270

您是否为服务器使用虚拟帐户？像“NT Service\MSSQLSERVER”这样的东西？如果是这样，请注意它们在 TFS 2012.2 和 2012.3 的计划备份向导中不受支持。

您要么必须手动创建备份计划，要么将 SQL 服务帐户切换到域帐户或网络服务。

编辑：

根据评论，TFS 2012.4 RC2 及更高版本已删除此限制****

# wix - Wix DTF 自定义操作等效于 WcaAddTempRecord

> ID：16039657
> 
> 赞同：1
> 
> 时间：2013-04-16T14:23:49.850
> 
> 标签：wix, dtf

我正在尝试使用 Wix DTF 自定义操作将 MSI 运行时会话值写入注册表。我想通过将临时记录添加到数据库中的“注册表”表来实现。由于c ++有一种`WcaAddTempRecord`方法可以实现这一点，所以真的很想知道DTF中是否有任何等效的方法。

注意：我尝试使用`Session.Database.OpenView`插入记录，但由于会话数据库只读属性，我一直收到更新失败错误。

有人可以建议这种情况的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:07:41.993

这是我的“转到”辅助方法：

```
private static void InsertTempRecord(Session session, string tableName, Object[] objects)
{
  Database db = session.Database; 
  string sqlInsertSring = db.Tables[tableName].SqlInsertString + " TEMPORARY";
  session.Log("SqlInsertString is {0}", sqlInsertSring);
  View view = db.OpenView(sqlInsertSring); 
  view.Execute(new Record(objects)); 
  view.Close(); 
} 
```

有关更多信息，请参阅：

[动态 Windows 安装程序 UI](http://blog.deploymentengineering.com/2008/07/dynamic-windows-installer-ui.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:11:59.560

MSI 数据库在安装期间是只读的。所以你不能添加永久行。但是，您可以插入临时行。一旦你从`View`后面得到，`Session.Database.OpenView()`然后使用对象`InsertTemporary()`上的方法`View`来添加临时行。

这就是**Temp**`WcaAddTempRecord()`名字的由来。:)

# oracle - 有没有一种快速的方法可以从 Oracle AQ 中清除异常队列？

> ID：16039658
> 
> 赞同：2
> 
> 时间：2013-04-16T14:23:50.493
> 
> 标签：oracle, jms, oracle-aq

AQ$_MESSAGES_EXCEPTION首先我知道有这个问题：[How to clear a queue in Oracle AQ](https://stackoverflow.com/questions/4261891/how-to-clear-a-queue-in-oracle-aq)但它没有答案。

我在 Oracle AQ 的异常队列中有很多消息（500k）（我不知道过期消息被移动到另一个队列，所以我没有为这些消息创建消费者）。我现在需要的是能够快速删除这些消息。我读过通过删除清除队列表不是一个好主意，因为它可能导致不一致的状态。所以我整理了以下程序，但它**每秒只能清除大约 50 条消息**

```
EXECUTE dbms_aqadm.start_queue(queue_name => 'AQ$_MESSAGES_EXCEPTION', 
                               enqueue => FALSE, dequeue => TRUE);

DECLARE
   dequeue_options     DBMS_AQ.dequeue_options_t;
   message_properties  DBMS_AQ.message_properties_t;
   message_handle      RAW(16);
   message             SYS.AQ$_JMS_MESSAGE;
   no_messages         EXCEPTION;
   pragma exception_init (no_messages, -25228);
BEGIN
   dequeue_options.wait := DBMS_AQ.NO_WAIT;
   dequeue_options.navigation := DBMS_AQ.FIRST_MESSAGE;
   LOOP
   DBMS_AQ.DEQUEUE(
      queue_name          =>     'AQ$_MESSAGES_EXCEPTION',
      dequeue_options     =>     dequeue_options,
      message_properties  =>     message_properties,
      payload             =>     message,
      msgid               =>     message_handle);
  DBMS_OUTPUT.put_line ('Message: ' || message_handle || ' dequeued');
  END LOOP;
  EXCEPTION
    WHEN no_messages THEN
      DBMS_OUTPUT.put_line (' ---- NO MORE MESSAGES  ---- ');
    WHEN others then
      DBMS_OUTPUT.put_line ('Exception queue not started for dequeue.');
END; 
```

/

考虑到它在数据库机器上运行，它似乎真的很慢。对于 500k 条消息，此过程大约需要三个小时。**我可以用更有效的方式来做吗？**

**编辑：**

我从这里的链接尝试了 dequeue_array：[http](http://www.oracle-developer.net/display.php?id=319) ://www.oracle-developer.net/display.php?id=319 但我无法创建表，所以我试图创建一个数组来“存储”结果。这是我所拥有的：

```
DECLARE
    type messages_type  is varray(500) of SYS.AQ$_JMS_MESSAGE;
    messages            messages_type;
    dequeue_options     DBMS_AQ.dequeue_options_t;
    msg_properties      DBMS_AQ.message_properties_array_t;
    msg_ids             DBMS_AQ.MSGID_ARRAY_T;
    x_timeout           EXCEPTION;
    no_messages         EXCEPTION;
    dequeue_batch       PLS_INTEGER := 500;
    pragma exception_init (no_messages, -25228);
BEGIN        
    messages := messages_type();
    msg_properties := DBMS_AQ.MESSAGE_PROPERTIES_ARRAY_T();
    msg_properties.EXTEND(dequeue_batch);      
    msg_ids := DBMS_AQ.MSGID_ARRAY_T();   
    dequeue_options.wait := 5;   
LOOP
    DBMS_AQ.DEQUEUE_ARRAY(
    queue_name          =>     'AQ$_MESSAGES_EXCEPTION',
    dequeue_options     =>     dequeue_options,
    array_size          =>     dequeue_batch,
    message_properties_array  =>     msg_properties,
    payload_array             =>     messages,
    msgid_array               =>     msg_ids); 
... 
```

我收到此错误：

```
wrong number or types of arguments in call to 'DEQUEUE_ARRAY' 
```

我认为问题出在消息数组中，但我不知道该怎么做才能使其工作。另外，根据 oracle 文档（[http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_aq.htm#i1000850](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_aq.htm#i1000850)），应该还有另一个参数：

```
error_array               OUT  error_array_t 
```

但是这个参数的解释是“目前没有实现”。这是什么意思？可以不放吗？它应该设置为null吗？这真的很令人困惑，谷歌在这里没有帮助:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T07:19:20.047

如果你真的想出队，你可以使用 dequeue_array(n) 函数。那应该快得多。

但是您提供的链接确实有解决方案：

```
-- purge queue
DECLARE
 po_t dbms_aqadm.aq$_purge_options_t;
BEGIN
  dbms_aqadm.purge_queue_table('MY_QUEUE_TABLE', NULL, po_t);
END; 
```

否则，由于此异常队列是自动创建的，我想您可以将其删除，但我不确定这是否安全

```
BEGIN
  DBMS_AQADM.STOP_QUEUE(
     queue_name => 'demo_queue'
     );
  DBMS_AQADM.DROP_QUEUE(
     queue_name => 'demo_queue'
     );
  DBMS_AQADM.DROP_QUEUE_TABLE(
     queue_table => 'demo_queue_table'
     );
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-10T11:32:14.073

您可以使用 dbms_aqadm 包中的过程“purge_queue_table”（如@Stephane 所说），**但指定了“purge_condition”参数**，**使用此参数可以选择要删除的消息**：

例子 ：

```
declare

    purge_options dbms_aqadm.aq$_purge_options_t;

begin

      purge_options.block := false;

      purge_options.delivery_mode := dbms_aqadm.persistent;

      dbms_aqadm.purge_queue_table
         (queue_table     => 'vista.svig_std_tab',
          purge_condition => 'qtview.queue = ''AQ$_SVIG_STD_TAB_E'' and qtview.enq_time < to_date(''01.06.2014 00:00:00'',''dd.mm.yyyy hh24:mi:ss'') ',
          purge_options   => purge_options
         );

end;
/ 
```

此示例删除来自指定异常队列且早于指定日期的消息。它也以比使用“dbms_aq.dequeue”过程更快的方式执行此操作。

# java - 逻辑错误，没有给出想要的答案

> ID：16039660
> 
> 赞同：-2
> 
> 时间：2013-04-16T14:23:50.570
> 
> 标签：java

我不明白我做错了什么，没有语法错误，但它没有给出我想要的答案。该算法应该找到 1 到 10000 之间的整数以具有最大的除数，并说明它包含多少个除数。

```
public class pract3ex11 {

public static void main (String [] args) {
    int n;
    int i;
    int c=0;
    int max=0;
    int result;
    int d;
    for (n=2; n<10000; n++){
        d=c;
        c=0;
        int x=n;
        result = x;
        for (i=1; i<x; i++){

            result= result%i;
            if (result==0){
                c++;
            }

            if (c>d){
                max=n;

            }
        }
    }
    System.out.println(max+" "+c);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:27:09.670

当你设置 时`max`，你也应该设置`d`。否则，两者会不同步：

```
if (c>d){
    d = c;
    max=n;
} 
```

您还需要在循环*之前*`0`分配给，并删除`d`

 *```
d=c; 
```

在循环的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:38:43.553

可能的解决方案：

```
public static void main(String[] args) {

      int count; 
      int maxDivisors;  
      int number;  
      maxDivisors = 1;  
      number = 1;
  for ( count = 2;  count  <= 10000;  count ++ ) {
         int x;  
         int divisors = 0;
      for ( x = 1;  x <= count;  x++ ) { 
        if ( count % x == 0 )
            divisors++;
          }

          if (divisors > maxDivisors) {
              maxDivisors = divisors;
              number = count;
          }

      }

      System.out.println("The maximum number of divisors are " + maxDivisors);
      System.out.println("Number is : " + number);
   } 
```*

# android - Android 相机预览代码不适用于 Nexus7 -surfaceView 错误

> ID：16039670
> 
> 赞同：0
> 
> 时间：2013-04-16T14:24:05.370
> 
> 标签：android, camera, surfaceview, preview, nexus-7

我使用 android 相机代码教程[http://developer.android.com/guide/topics/media/camera.html#custom-camera](http://developer.android.com/guide/topics/media/camera.html#custom-camera)创建了一个适用于 android 的相机应用程序。它适用于 XperiaZ - LgoptimusBlack- GalaxyNexus4 和其他一些设备。但是使用 Nexus-7 android 4.2.2 它给了我一个表面视图错误，它无法在表面上创建相机预览。我尝试了其他一些样品，但没有结果。这是日志猫：

```
 FATAL EXCEPTION: main
      java.lang.NullPointerException
    at com.test.mycamera.CameraPreview.surfaceCreated(CameraPreview.java:33)
at android.view.SurfaceView.updateWindow(SurfaceView.java:569)
at android.view.SurfaceView.access$000(SurfaceView.java:86)
at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:174)
at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:680)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1842)
at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
at android.view.Choreographer.doCallbacks(Choreographer.java:562)
at android.view.Choreographer.doFrame(Choreographer.java:532)
at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
at android.os.Handler.handleCallback(Handler.java:725)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5041)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:34:10.933

Nexus 7 只有一个前置摄像头。

谷歌代码无法处理这个事实。它用：

```
public static Camera getCameraInstance(){
    Camera c = null;
    try {
        c = Camera.open(); // attempt to get a Camera instance
    }
    catch (Exception e){
        // Camera is not available (in use or does not exist)
    }
    return c; // returns null if camera is unavailable
} 
```

但是之后：

```
mCamera = getCameraInstance(); 
```

并且不检查这是否有效。

问题是如果没有后置摄像头`Camera.open()`会返回：`null`

> 创建一个新的 Camera 对象以访问设备上的第一个后置摄像头。如果设备没有后置摄像头，则返回 null。

具有讽刺意味的是，`Camera.open(0);`应该可以，但盲目选择 ID 为 0 的相机绝对不是您想要的真实产品。另外，请注意以下针对`open(int cameraId)`但未针对说明的内容`open()`：

> 注意：在某些设备上，此方法可能需要很长时间才能完成。最好从工作线程（可能使用 AsyncTask）调用此方法，以避免阻塞主应用程序 UI 线程。

再说一次，您不一定要在实际产品中使用 Google 代码片段，因为它们，嗯，成熟度级别。正如我们刚刚看到的。

祝你好运。

# gcc - GCC 4.6.2 错误：“psignal”的类型冲突

> ID：16039671
> 
> 赞同：0
> 
> 时间：2013-04-16T14:24:09.653
> 
> 标签：gcc, gcc-warning

我正在尝试在集群的一个节点上安装 gcc-4.6.2。不幸的是，这个节点没有互联网连接，所以我正在尝试手动完成所有操作。我已经安装了所有必需的软件包，并使用以下参数运行了配置文件：

```
./configure --with-newlib --prefix=/usr/lib64/gcc-4.6.2 --disable-libssp 
--enable-shared --enable-threads=posix --enable-__cxa_atexit 
--enable-clocale=gnu --enable-languages=c,c++,java 
--with-cpu=generic --build=x86_64-redhat-linux               
--host=x86_64-redhat-linux --target=x86_64-redhat-linux 
--with-target-subdir=x86_64-redhat-linux --with-mpfr=/usr/local/lib 
--with-gmp=/usr/local/lib --with-mpc=/usr/local/lib 
```

但是，当我成功时，出现以下错误：

```
../.././libiberty/strsignal.c:555: error: conflicting types for ‘psignal’
/usr/include/signal.h:141: error: previous declaration of ‘psignal’ was here 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:30:46.953

我发现您的配置调用存在三个潜在问题：

*   您已指定`--build`、`--host`和`--target`，但它们都是相同的。尽管您实际上并没有从中获得交叉编译器，但这会将构建置于“让我成为交叉编译器”模式。这是不正常的事情，可能无法正常工作。尝试删除所有这三个选项。如果您正在构建的节点*不是* `x86_64-redhat-linux`，并且您确实需要针对该目标的交叉编译器，请`--target` *仅*指定.

*   您已指定`--with-newlib`，但您的`--target`选择是`x86_64-redhat-linux`。最后我听说，newlib 不支持这个操作系统——它是一个用于嵌入式工作的最小 C 库。试着把它也拿出来。

*   没有`--with-target-subdir`选择。这本身是无害的——配置忽略了无法识别的选项`--with`和`--enable`选项——但我想知道它是*做*什么的。您是否从某处复制了此配置调用？

有关进一步的建议，请参阅[http://gcc.gnu.org/install/configure.html](http://gcc.gnu.org/install/configure.html)。

（你真的有使用 Java 编译器吗？如果没有，禁用它，你的构建速度会快四倍。）

# ms-access - 访问关系

> ID：16039679
> 
> 赞同：1
> 
> 时间：2013-04-16T14:24:22.733
> 
> 标签：ms-access, foreign-keys, relational-database, primary-key

我有很多表的数据库。数据库中的几个与另一个相关。

餐桌布置：

```
ID (automatic number with primary key), ID_sup (number), supplier (text), ... 
```

相关表格：

```
ID (number with primary key), supplier (text), address (text), ... 
```

所以在表中`ID_sup`与`ID`，`supplier`与相同`supplier`。Tables 仅包含来自该表的少数供应商`Related table`。

我试图将它与 Enforce Referential Integrity + Cascade Updated 相关字段连接起来，但它不起作用。

我也尝试过更改数据类型和主键，但我总是收到以下错误消息：

1.  未找到链接主表字段的任何唯一索引。
2.  关系必须位于具有相同数据类型的相同数量的字段上。（错误 3368）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:12:54.110

在我看来，您希望供应商的名称在多个表中重复（或“非规范化”），并且如果在另一个表中更改名称，则关系会自动更新一个表中的名称。然而，关系并不（通常）那样工作。

相反，您将供应商的名称（和其他供应商特定的详细信息）*仅保留在 [Suppliers] 表中，然后**仅*通过 SupplierID 在其他表中引用供应商。这称为“规范化数据”。

现在，如果您想让供应商的名称出现在关于 [Orders] 的查询（或报告等）中，那么您可以在查询中将 [Orders] 表与 [Suppliers] 表连接起来，如下所示：

```
SELECT Orders.OrderID, Orders.OrderDate, Suppliers.SupplierName
FROM Orders INNER JOIN Suppliers ON Orders.SupplierID = Suppliers.SupplierID 
```

您仍然可以使用关系来强制执行参照完整性（即，确保每个订单都引用一个有效的供应商），但您*只*使用 SupplierID 而不是其他任何东西来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:12:18.933

您想要创建从 Table2.ID 到 Table1.ID_sup 的一对多关系。在 MS Access“编辑关系”窗口中，Table2.ID 位于左侧，Table1.ID_sup 位于右侧。MS Access 使用无穷大符号来表示关系的“多”方。

# php - PHP购物车问题

> ID：16039689
> 
> 赞同：0
> 
> 时间：2013-04-16T14:24:50.820
> 
> 标签：php

我正在尝试修复 wordpress 的 awm 商店插件中的 php 问题，这可能非常简单，但我的 php 技能不是最好的，我的解决尝试没有成功。

我设置了一个购物车，以便：

澳大利亚居民免运费

使用以下代码：

```
foreach( $cart_items as $items ) {
        if( $items['type'] == "purchase" ) {
            $amount = $amount + ( $items['price'] * $items['quantity'] );
        }else{
            $amount = $amount + ( $items['price'] * $items['quantity'] );
        }
    }

    $country = "";

    if( $order_details['billing_not_shipping'] ){
        $country = $order_details['shipping_country'];
    }else{
        $country = $order_details['billing_country'];
    }

    if( strtolower($country) == "australia" )
    {
        $this_quote = $simple_shipping_options[1]['order_fee'];
        foreach($cart_items as $cart_item){
            $this_quote += $cart_item['quantity'] * $simple_shipping_option['product_fee'];
        }
        $return_quotes[] = array(
            'name' => $simple_shipping_options[1]['name'],
            'total' => $this_quote,
        );
    }
    else
    {
        if( $amount > 500 ) {
            $this_quote = $simple_shipping_options[0]['order_fee'];
            foreach($cart_items as $cart_item){
                $this_quote += $cart_item['quantity'] * $simple_shipping_option['product_fee'];
            }
            $return_quotes[] = array(
                'name' => "Free Shipping for any order over $500",
                'total' => $this_quote,
            );
        }else{
            $this_quote = $simple_shipping_options[1]['order_fee'];
            foreach($cart_items as $cart_item){
                $this_quote += $cart_item['quantity'] * $simple_shipping_option['product_fee'];
            }
            $return_quotes[] = array(
                'name' => $simple_shipping_options[1]['name'],
                'total' => $this_quote,
            );
        }
    }

    return $return_quotes;
} 
```

和

```
<table class="form-table awms_settings_shipping_simple">
<tr>
    <td scope="row"><label for="aus_residents">Free Shipping within Australia</label></td>
    <td><input name="shipping_custom_order_fee[]" type="text" id="aus_residents" value="<?php echo $shipping_custom[1]["order_fee"] ?>" />$ AUD</td>
    <input type="hidden" name="shipping_custom_name[]" value="Free shipping within Australia" />
</tr>
<tr>
    <td scope="row"><label for="aus_not_residents">Outside Australia</label></td>
    <td><input name="shipping_custom_order_fee[]" type="text" id="aus_not_residents" value="<?php echo $shipping_custom[1]["order_fee"]; ?>" /> $ AUD</td>
    <input type="hidden" name="shipping_custom_name[]" value="Outside Australia" />
</tr> 
```

有谁知道如何设置它以使两种情况都相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:36:37.703

hmm i think you just need to take the if Australia statement out?

change

`if( strtolower($country) == "australia" )`

to

`if( strtolower($country) == "australiaX" )`

To ignore the statement.. or

```
/*    if( strtolower($country) == "australia" )
    {
        $this_quote = $simple_shipping_options[1]['order_fee'];
        foreach($cart_items as $cart_item){
            $this_quote += $cart_item['quantity'] * $simple_shipping_option['product_fee'];
        }
        $return_quotes[] = array(
            'name' => $simple_shipping_options[1]['name'],
            'total' => $this_quote,
        );
    }
    else
    {
*/ 
       if( $amount > 500 ) {
            $this_quote = $simple_shipping_options[0]['order_fee'];
            foreach($cart_items as $cart_item){
                $this_quote += $cart_item['quantity'] * $simple_shipping_option['product_fee'];
            }
            $return_quotes[] = array(
                'name' => "Free Shipping for any order over $500",
                'total' => $this_quote,
            );
        }else{
            $this_quote = $simple_shipping_options[1]['order_fee'];
            foreach($cart_items as $cart_item){
                $this_quote += $cart_item['quantity'] * $simple_shipping_option['product_fee'];
            }
            $return_quotes[] = array(
                'name' => $simple_shipping_options[1]['name'],
                'total' => $this_quote,
            );
        }
/*    }*/

    return $return_quotes; 
```

# php - Poedit 在进行目录更新后崩溃

> ID：16039691
> 
> 赞同：0
> 
> 时间：2013-04-16T14:24:59.843
> 
> 标签：php, linux, ubuntu, poedit

我试图从源头更新目录。完成更新后 poedit 崩溃。在命令行工具中，我收到以下消息：

```
b/x86_64-linux-gnu/libdbusmenu-glib.so.4.0.13Aborted (core dumped) 
```

我可以看到 poedit 如何在源代码中搜索文本片段。进度条一直工作到 100%。然后 poedit 崩溃而没有错误消息。我正在使用linux ubuntu。源代码是用php编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T15:04:00.300

对我来说，本指南帮助了我：[http](http://www.cssigniter.com/ignite/wordpress-poedit-translation-secrets/) ://www.cssigniter.com/ignite/wordpress-poedit-translation-secrets/其中提到了用于配置 po 文件的以下标头：

```
"X-Poedit-Basepath: .\n"
"X-Poedit-SearchPath-0: .\n"
"X-Poedit-SearchPath-1: ..\n" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:44:02.103

[请在http://www.poedit.net/trac/newticket](http://www.poedit.net/trac/newticket)创建一张票（最好在阅读[http://www.poedit.net/trac/wiki/HowtoReportBugs](http://www.poedit.net/trac/wiki/HowtoReportBugs)之后- 这里缺少很多基本信息，例如数据重现它所需的文件...）。

# d3.js - 如何使用 d3.js 对图表标签进行自动换行

> ID：16039693
> 
> 赞同：13
> 
> 时间：2013-04-16T14:25:09.167
> 
> 标签：d3.js, nvd3.js

我正在尝试使用 d3.js 实现水平条形图。某些图表标签太长。如何为 y aixs 上的图表标签进行自动换行？

源代码：

```
var data = [{"Name": "Label 1", "Count": "428275" }, { "Name": "Label 2", "Count": "365005" }, { "Name": "Label 3", "Count": "327619" }];

var m = [30, 10, 10, 310],
w = 1000 - m[1] - m[3],
h = 550 - m[0] - m[2];

var format = d3.format(",.0f");

var x = d3.scale.linear().range([0, w + 10]),
    y = d3.scale.ordinal().rangeRoundBands([0, h], .4);

var xAxis = d3.svg.axis().scale(x).orient("bottom").tickSize(h),
    yAxis = d3.svg.axis().scale(y).orient("left").tickSize(0);

$("#chartrendering").empty();
var svg = d3.select("#chartrendering").append("svg")
    .attr("width", w + m[1] + m[3])
    .attr("height", h + m[0] + m[2])
  .append("g")
    .attr("transform", "translate(" + m[3] + "," + m[0] + ")");

// Set the scale domain.

x.domain([0, d3.max(data, function (d) { return d.Count; })]);
y.domain(data.map(function (d) { return d.Name; }));

var bar = svg.selectAll("g.bar")
    .data(data)
  .enter().append("g")
    .attr("class", "bar")
    .attr("transform", function (d) { return "translate(0," + y(d.Name) + ")"; });

bar.append("rect")
    .attr("width", function (d) { return x(d.Count); })
    .attr("height", y.rangeBand());

bar.append("text")
    .attr("class", "value")
    .attr("x", function (d) { return x(d.Count); })
    .attr("y", y.rangeBand() / 2)
    .attr("dx", +55)
    .attr("dy", ".35em")
    .attr("text-anchor", "end")
    .text(function (d) { return format(d.Count); });

svg.append("g")
    .attr("class", "x axis")
    .call(xAxis);

svg.append("g")
    .attr("class", "y axis")
    .call(yAxis); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-27T21:20:05.980

这是我通过将各种位组合在一起编写的工作实现。正如另一个答案所暗示的，foreignObject 仍然是要走的路。首先是功能：

```
var insertLinebreaks = function (t, d, width) {
    var el = d3.select(t);
    var p = d3.select(t.parentNode);
    p.append("foreignObject")
        .attr('x', -width/2)
        .attr("width", width)
        .attr("height", 200)
      .append("xhtml:p")
        .attr('style','word-wrap: break-word; text-align:center;')
        .html(d);    

    el.remove();

}; 
```

这需要一个文本元素 (t)、文本内容 (d) 和要换行的宽度。然后它获取`text`对象的 parentNode，并将一个添加到其中的节点附加`foreignObject`到它`xhtml:p`。`foreignObject`设置为所需的偏移`width`量`-width/2`到中心。最后，删除原始文本元素。

然后可以将其应用于您的轴元素，如下所示：

```
d3.select('#xaxis')
    .selectAll('text')
        .each(function(d,i){ insertLinebreaks(this, d, x1.rangeBand()*2 ); }); 
```

在这里，我使用 rangeBand 来获取宽度（*2 表示图表上的 2 个条形）。

![带有包裹标签的结果图像](https://i.stack.imgur.com/34n3q.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-12T14:39:07.110

我一直在寻找这个问题的解决方案，并发现 Mike Bostock 发布了一个使用 D3的[工作示例。](http://bl.ocks.org/mbostock/7555321)该示例显示为适用于 x 轴，但可以很容易地适用于 y 轴。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-21T06:59:28.160

这是我写的一个函数，不仅可以解决 y 轴自动换行问题，还可以换行超过 1 行长度的单词，并将对应的“刻度”对齐在标签的中心：

结果是这样的： [![在此处输入图像描述](https://i.stack.imgur.com/gMs41.png)](https://i.stack.imgur.com/gMs41.png)

看到这个片段：

```
var tempArray2 = [{date: "2017/3/11", ratio: 1}, {date: "2017/3/12", ratio: 0.5}, {date: "2017/3/13", ratio: 0.3}, {date: "2017/3/14", ratio: 0}, {date: "2017/3/15", ratio: 0.8}];

var margin = {
    top: 20,
    right: 20,
    bottom: 40,
    left: 80
  },
  width = 500 - margin.left - margin.right,
  height = 300 - margin.top - margin.bottom;
barHeight = 40;
labelWidth = 0;

tempArray2.sort(function(a, b) {
  return new Date(a.date) - new Date(b.date);
})

dateRange = Math.round((new Date(tempArray2[tempArray2.length - 1].date) - new Date(tempArray2[0].date)) / 1000 / 3600 / 24);

svg = d3.select('body')
  .append("svg")
  .attr("style", "width: 500px\; height: 300px\;");

var x = d3.scaleUtc().range([0, width])
  .domain([toUTCDate(tempArray2[0].date), calculateDays(toUTCDate(tempArray2[tempArray2.length - 1].date), 1)]);

var y = d3.scaleBand()
  .range([height, 0])
  .padding(0.1)
  .domain(["Domain for testinginginging", "Another domain used for testing", "Horizontal bar"]);

passBar = svg.selectAll(".passBar")
  .data(tempArray2)
  .enter();

passBar.append("rect")
  .attr("class", "passBar")
  .attr("height", barHeight)
  .attr("width", function(d) {
    return x(calculateDays(toUTCDate(d.date), d.ratio)) - x(toUTCDate(d.date));
  })
  .attr("y", y("Horizontal bar") + (y.bandwidth() - barHeight) / 2)
  .attr("transform", function(d) {
    return "translate(" + (margin.left + x(toUTCDate(d.date))) + ", 0)";
  });

failBar = svg.selectAll(".failBar")
  .data(tempArray2)
  .enter();

failBar.append("rect")
  .attr("class", "failBar")
  .attr("height", barHeight)
  .attr("width", function(d) {
    return x(calculateDays(toUTCDate(d.date), 1 - d.ratio)) - x(toUTCDate(d.date));
  })
  .attr("y", y("Horizontal bar") + (y.bandwidth() - barHeight) / 2)
  .attr("transform", function(d) {
    return "translate(" + (margin.left + x(toUTCDate(d.date)) + x(calculateDays(toUTCDate(d.date), d.ratio)) - x(toUTCDate(d.date))) + ", 0)";
  });

//add grid lines
svg.append("g")
  .attr("class", "grid")
  .attr("transform", "translate(" + margin.left + "," + height + ")")
  .call(make_x_gridlines(dateRange)
    .tickSize(-height)
    .tickFormat("")
  )

// always draw axis at last
svg.append("g")
  .attr("transform", "translate(" + margin.left + "," + height + ")")
  .attr("class", "xAxis")
  .call(d3.axisBottom(x).ticks(dateRange).tickFormat(d3.utcFormat("%m-%d")))
  .selectAll("text")
  .style("text-anchor", "middle");
svg.append("g")
  .attr("transform", "translate(" + margin.left + ", 0)")
  .attr("class", "yAxis")
  .call(d3.axisLeft(y))
  .selectAll("text")
  .attr("class", "cateName")
  .style("text-anchor", "start")
  .call(wrapText, margin.left - 13);

function calculateDays(date, number) {
  date.setUTCDate(date.getUTCDate() + number);
  return date;
}

function make_x_gridlines(tickTime) {
  return d3.axisBottom(x).ticks(tickTime);
}

function toUTCDate(input) {
  var tempDate = new Date(input);
  return new Date(Date.UTC(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate()));
}

function wrapText(text, width) {
  text.each(function() {
    var text = d3.select(this),
      textContent = text.text(),
      tempWord = addBreakSpace(textContent).split(/\s+/),
      x = text.attr('x'),
      y = text.attr('y'),
      dy = parseFloat(text.attr('dy') || 0),
      tspan = text.text(null).append('tspan').attr('x', x).attr('y', y).attr('dy', dy + 'em');
    for (var i = 0; i < tempWord.length; i++) {
      tempWord[i] = calHyphen(tempWord[i]);
    }
    textContent = tempWord.join(" ");
    var words = textContent.split(/\s+/).reverse(),
      word,
      line = [],
      lineNumber = 0,
      lineHeight = 1.1, // ems
      spanContent,
      breakChars = ['/', '&', '-'];
    while (word = words.pop()) {
      line.push(word);
      tspan.text(line.join(' '));
      if (tspan.node().getComputedTextLength() > width) {
        line.pop();
        spanContent = line.join(' ');
        breakChars.forEach(char => {
          // Remove spaces trailing breakChars that were added above
          spanContent = spanContent.replace(char + ' ', char);
        });
        tspan.text(spanContent);
        line = [word];
        tspan = text.append('tspan').attr('x', x).attr('y', y).attr('dy', lineHeight+'em').text(word);
      }
    }
    var emToPxRatio = parseInt(window.getComputedStyle(text._groups[0][0]).fontSize.slice(0, -2));
    text.attr("transform", "translate(-" + (margin.left - 13) + ", -" + lineHeight + ")");

    function calHyphen(word) {
      tspan.text(word);
      if (tspan.node().getComputedTextLength() > width) {
        var chars = word.split('');
        var asword = "";
        for (var i = 0; i < chars.length; i++) {
          asword += chars[i];
          tspan.text(asword);
          if (tspan.node().getComputedTextLength() > width) {
            if (chars[i - 1] !== "-") {
              word = word.slice(0, i - 1) + "- " + calHyphen(word.slice(i - 1));
            }
            i = chars.length;
          }
        }
      }
      return word;
    }
  });

  function addBreakSpace(inputString) {
    var breakChars = ['/', '&', '-']
    breakChars.forEach(char => {
      // Add a space after each break char for the function to use to determine line breaks
      inputString = inputString.replace(char, char + ' ');
    });
    return inputString;
  }
}
```

```
svg {
    width: 100%;
    height: 100%;
    position: center;
}
.passBar {
    fill: #a6f3a6;
}
.failBar {
    fill: #f8cbcb;
}
.grid line {
    stroke: white;
    stroke-width: 2px;
}
.grid path {
    stroke-width: 0;
}
.xAxis {
    font-size: 15px;
    shape-rendering: crispEdges;
}
.yAxis {
    font-size: 15px;
    shape-rendering: crispEdges;
}
```

```
<script src="https://d3js.org/d3.v4.min.js"></script>
<body></body>
```

关于自动换行的主要功能是：`wrapText`. 修改自 [https://bl.ocks.org/ericsoco/647db6ebadd4f4756cae](https://bl.ocks.org/ericsoco/647db6ebadd4f4756cae) 和 [https://bl.ocks.org/mbostock/7555321](https://bl.ocks.org/mbostock/7555321)

希望它可以提供帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T14:29:37.603

您不能在 SVG 中进行自动换行。您可以为此目的使用`foreignObject`和 HTML `div`，但这需要修改创建轴标签的代码。或者，您可以旋转轴标签，以便它们有更多空间。例如，请参阅[此处](http://www.d3noob.org/2013/01/how-to-rotate-text-labels-for-x-axis-of.html)了解如何执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-24T12:26:35.730

这是一些将 Mike Bostock 的`chart()`函数插入[angular-nvd3 的代码](http://krispo.github.io/angular-nvd3/#/)。有关背景，请参阅[https://github.com/krispo/angular-nvd3/issues/36](https://github.com/krispo/angular-nvd3/issues/36)。

```
 discretebar: {
            dispatch: {
                renderEnd: function(e){
                    d3.selectAll(".tick text").call(wrap,_chart.xAxis.rangeBand());
                }
            }
        },
        callback: function(chart){
            _chart = chart; //global var
        }
    } 
```

# jquery - Jquery Flot - 为单个数据系列设置可悬停

> ID：16039699
> 
> 赞同：2
> 
> 时间：2013-04-16T14:25:22.267
> 
> 标签：jquery, flot

我昨天才开始使用一个名为 Flot 的 JQuery 绘图插件。我正在尝试绘制多个系列，同时只允许某些系列可以悬停。[API](https://github.com/flot/flot/blob/master/API.md)规定数据级别选项允许设置可悬停的真/假。然而，这似乎被忽略了，只有图形级别的选项被采用。

这是我的数据级别选项：

```
var datasets = [
    { color: "green", data: data1, label: "Speed", lines: { show: true} },
    { color: "red", data: data2, label: "N01"} 
]; 
```

这是我的图形级别选项：

```
var options = { series: { bubbles: { active: true, show: true, fill: true, lineWidth: 2} }, grid: { show: true, hoverable: true, clickable: true} }; 
```

[但是，从这个小提琴](http://jsfiddle.net/devin85/ztqaX/)中可以看出，上述设置导致两个数据系列都可以悬停。根据我对 API 的理解，我应该能够将上述设置修改为以下内容：

```
var datasets = [
    { color: "green", data: data1, label: "Speed", lines: { show: true}, hoverable: false, clickable: false},
    { color: "red", data: data2, label: "N01", hoverable: true, clickable: true} 
]; 
```

然而这不起作用。请有人告诉我如何设置哪些系列是可悬停和可点击的，哪些不是。

感谢来自南非开普敦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:36:52.747

它似乎是气泡插件中的一个错误。如果您删除`series: {bubbles: ...}}`，您会看到每个系列的可悬停/可点击选项确实有效。

# elasticsearch - Elasticsearch ActiveMQ River 配置

> ID：16039700
> 
> 赞同：0
> 
> 时间：2013-04-16T14:25:24.727
> 
> 标签：elasticsearch, activemq

我开始配置 ActiveMQ 河流，我已经安装了（[ActiveMQ 插件](https://github.com/domdorn/elasticsearch-river-activemq)），但我对如何使它工作感到困惑，文档是如此简短，实际上，我完全按照创建新河流的步骤，但我没有不知道接下来的步骤是什么？

**笔记：**

1.  我已经启动并运行了一个 ActiveMQ 服务器，我使用一个简单的 JMS 应用程序对其进行了测试，以将消息推送到队列中。

2.  我使用以下方法创建了一条新河流：

    ```
    curl -XPUT 'localhost:9200/_river/myindex_river/_meta' -d '{
      "type" : "activemq",
      "activemq" : {
          "user" : "guest",
          "pass" : "guest",
          "brokerUrl" : "failover://tcp://localhost:61616",
          "sourceType" : "queue",
          "sourceName" : "elasticsearch",
          "consumerName" : "activemq_elasticsearch_river_myindex_river",
          "durable" : false,
          "filter" : ""
      },
      "index" : {
           "bulk_size" : 100,
           "bulk_timeout" : "10ms"
      }
    }' 
    ```

3.  创建上一条河流后，我可以使用 获取它的状态 `curl -XGET 'localhost:9200/my_index/_status'`，它给我索引状态，而不是创建的河流。

请帮助我使用弹性搜索的 ActiveMQ 河流配置找到正确的道路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:24:00.303

我在邮件列表上告诉过你。定义`index.index`值或将河流的名称设置为索引名称（更简单）：

```
curl -XPUT 'localhost:9200/_river/my_index/_meta' -d '
{
  "type":"activemq",
  "activemq":{
    "user":"guest",
    "pass":"guest",
    "brokerUrl":"failover://tcp://localhost:61616",
    "sourceType":"queue",
    "sourceName":"elasticsearch",
    "consumerName":"activemq_elasticsearch_river_myindex_river",
    "durable":false,
    "filter":""
  },
  "index":{
    "bulk_size":100,
    "bulk_timeout":"10ms"
  }
}' 
```

或者

```
curl -XPUT 'localhost:9200/_river/myindex_river/_meta' -d '
{
  "type":"activemq",
  "activemq":{
    "user":"guest",
    "pass":"guest",
    "brokerUrl":"failover://tcp://localhost:61616",
    "sourceType":"queue",
    "sourceName":"elasticsearch",
    "consumerName":"activemq_elasticsearch_river_myindex_river",
    "durable":false,
    "filter":""
  },
  "index":{
    "index":"my_index",
    "bulk_size":100,
    "bulk_timeout":"10ms"
  }
}' 
```

它应该有帮助。

如果没有，请使用您在日志中看到的内容更新您的问题。

# debugging - SlimDX 调试帮助 - 第一次机会异常“slimdx.direct3d11.direct3d11 异常”

> ID：16039701
> 
> 赞同：0
> 
> 时间：2013-04-16T14:25:29.410
> 
> 标签：debugging, exception, directx, slimdx

C# 我从 SlimDX 收到此错误：第一次机会异常 'slimdx.direct3d11.direct3d11 异常'

但我似乎无法弄清楚为什么/在哪里/何时。我已经打开了所有可能的调试，我的 D3D 设备处于调试模式，我启用了非托管调试，我在 DirectX 控制面板等中打开了各种形式的消息传递/中断等。

奇怪的是，当出现这个错误信息时，我的程序一直在完美运行并且没有中断。如果不是输出窗口中的消息，它甚至都不会引人注意。我已经尝试将内容记录到控制台，但很难知道一件事从哪里开始，另一件事在哪里结束，因为我使用了多个线程等。我尝试使用参考设备，但是当我这样做时我的应用程序有点挂起，我已经在 PIX 中运行了它，但是当我这样做时我没有看到任何错误

有点奇怪。如果它能够正常中断，这样我就可以调试它，那就太好了。

有什么想法吗？...

```
`D3D11: INFO: Create InputLayout: Name="unnamed", Addr=0x06C91304, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097264: CREATE_INPUTLAYOUT ]
D3D11: INFO: Create BlendState: Name="unnamed", Addr=0x06C917BC, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097270: CREATE_BLENDSTATE ]
D3D11: INFO: Create DepthStencilState: Name="unnamed", Addr=0x06C919AC, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097273: CREATE_DEPTHSTENCILSTATE ]
D3D11: INFO: Create Texture2D: Name="unnamed", Addr=0x06C03B64, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097234: CREATE_TEXTURE2D ]
D3D11: INFO: Create ShaderResourceView: Name="unnamed", Addr=0x06C91DE4, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097240: CREATE_SHADERRESOURCEVIEW ]
D3D11: INFO: Create Texture2D: Name="unnamed", Addr=0x06C0401C, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097234: CREATE_TEXTURE2D ]
D3D11: INFO: Create ShaderResourceView: Name="unnamed", Addr=0x06C038EC, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097240: CREATE_SHADERRESOURCEVIEW ]
D3D11: INFO: Create Texture2D: Name="unnamed", Addr=0x06C04A34, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097234: CREATE_TEXTURE2D ]
D3D11: INFO: Create ShaderResourceView: Name="unnamed", Addr=0x06C041F4, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097240: CREATE_SHADERRESOURCEVIEW ]
D3D11: INFO: Create Texture2D: Name="unnamed", Addr=0x06C05024, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097234: CREATE_TEXTURE2D ]
D3D11: INFO: Create ShaderResourceView: Name="unnamed", Addr=0x06C04594, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097240: CREATE_SHADERRESOURCEVIEW ]
D3D11: INFO: Create Texture2D: Name="unnamed", Addr=0x06C04C0C, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097234: CREATE_TEXTURE2D ]
D3D11: INFO: Create ShaderResourceView: Name="unnamed", Addr=0x06C043B4, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097240: CREATE_SHADERRESOURCEVIEW ]
D3D11: INFO: Create Buffer: Name="unnamed", Addr=0x06C00264, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097228: CREATE_BUFFER ]
D3D11: INFO: Create VertexShader: Name="unnamed", Addr=0x06C004F4, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097249: CREATE_VERTEXSHADER ]
D3D11: INFO: Create PixelShader: Name="unnamed", Addr=0x06C008AC, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097261: CREATE_PIXELSHADER ]
D3D11: INFO: Create InputLayout: Name="unnamed", Addr=0x06C00C74, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097264: CREATE_INPUTLAYOUT ]
D3D11: INFO: Create RasterizerState: Name="unnamed", Addr=0x06C054C4, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097276: CREATE_RASTERIZERSTATE ]
D3D11: INFO: Create Sampler: Name="unnamed", Addr=0x06C05684, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097267: CREATE_SAMPLER ]
D3D11: INFO: Create Texture2D: Name="unnamed", Addr=0x06C05CDC, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097234: CREATE_TEXTURE2D ]
A first chance exception of type 'SlimDX.Direct3D11.Direct3D11Exception' occurred in SlimDX.dll
D3D11: INFO: Destroy RenderTargetView: Name="new_ToScreenView", Addr=0x06BEEE44 [ STATE_CREATION INFO #2097245: DESTROY_RENDERTARGETVIEW ]
D3D11: INFO: Destroy Texture2D: Name="new_Swapchain_Texture", Addr=0x06BE9C04 [ STATE_CREATION INFO #2097236: DESTROY_TEXTURE2D ]
D3D11: INFO: Create Texture2D: Name="unnamed", Addr=0x06C05AFC, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097234: CREATE_TEXTURE2D ]
D3D11: INFO: Create RenderTargetView: Name="unnamed", Addr=0x06BEEE44, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097243: CREATE_RENDERTARGETVIEW ]
D3D11: INFO: Destroy DepthStencilView: Name="unnamed", Addr=0x06BF20D4 [ STATE_CREATION INFO #2097248: DESTROY_DEPTHSTENCILVIEW ]
D3D11: INFO: Destroy Texture2D: Name="D3D_depthStencil", Addr=0x06BEF1B4 [ STATE_CREATION INFO #2097236: DESTROY_TEXTURE2D ]
D3D11: INFO: Create Texture2D: Name="unnamed", Addr=0x06BEF1B4, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097234: CREATE_TEXTURE2D ]
D3D11: INFO: Create DepthStencilView: Name="unnamed", Addr=0x06C060AC, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097246: CREATE_DEPTHSTENCILVIEW ]
D3D11: INFO: Create Buffer: Name="unnamed", Addr=0x0AC90614, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097228: CREATE_BUFFER ]
D3D11: INFO: Create VertexShader: Name="unnamed", Addr=0x0AC9086C, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097249: CREATE_VERTEXSHADER ]
D3D11: INFO: Create PixelShader: Name="unnamed", Addr=0x0AC90C04, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097261: CREATE_PIXELSHADER ]
D3D11: INFO: Create InputLayout: Name="unnamed", Addr=0x06C0639C, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097264: CREATE_INPUTLAYOUT ]
D3D11: INFO: Create Buffer: Name="unnamed", Addr=0x06C067CC, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097228: CREATE_BUFFER ]
D3D11: INFO: Create Buffer: Name="unnamed", Addr=0x06C06B54, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097228: CREATE_BUFFER ]
D3D11: INFO: Create Buffer: Name="unnamed", Addr=0x06C06F2C, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097228: CREATE_BUFFER ]
D3D11: INFO: Create Buffer: Name="unnamed", Addr=0x06C07304, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097228: CREATE_BUFFER ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
A first chance exception of type 'SlimDX.Direct3D11.Direct3D11Exception' occurred in SlimDX.dll
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: Create Buffer: Name="unnamed", Addr=0x06C07C04, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097228: CREATE_BUFFER ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: Create Buffer: Name="unnamed", Addr=0x0AC9187C, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097228: CREATE_BUFFER ]
D3D11: INFO: Create VertexShader: Name="unnamed", Addr=0x0AC91B0C, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097249: CREATE_VERTEXSHADER ]
D3D11: INFO: Create PixelShader: Name="unnamed", Addr=0x0AC91EC4, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097261: CREATE_PIXELSHADER ]
D3D11: INFO: Create InputLayout: Name="unnamed", Addr=0x06BF393C, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097264: CREATE_INPUTLAYOUT ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
A first chance exception of type 'SlimDX.Direct3D11.Direct3D11Exception' occurred in SlimDX.dll
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: Create Buffer: Name="unnamed", Addr=0x06BF43EC, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097228: CREATE_BUFFER ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: Create Buffer: Name="unnamed", Addr=0x0AC93CB4, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097228: CREATE_BUFFER ]
D3D11: INFO: Create VertexShader: Name="unnamed", Addr=0x0AC93F44, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097249: CREATE_VERTEXSHADER ]
D3D11: INFO: Create PixelShader: Name="unnamed", Addr=0x06BF4CAC, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097261: CREATE_PIXELSHADER ]
D3D11: INFO: Create InputLayout: Name="unnamed", Addr=0x06BF5074, ExtRef=1, IntRef=0 [ STATE_CREATION INFO #2097264: CREATE_INPUTLAYOUT ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
D3D11: INFO: ID3D11DeviceContext::Draw: The Pixel Shader unit expects a Shader Resource View at Slot 0, but none is bound. This is OK, as reads of an unbound Shader Resource View are defined to return 0\. It is also possible the developer knows the data will not be used anyway. This is only a problem if the developer actually intended to bind a Shader Resource View here.  [ EXECUTION INFO #353: DEVICE_DRAW_SHADERRESOURCEVIEW_NOT_SET ]
A first chance exception of type 'SlimDX.Direct3D11.Direct3D11Exception' occurred in SlimDX.dll`
```

`谢谢`

 `编辑：

添加此代码后，我可以看到更多内容：

```
AppDomain.CurrentDomain.FirstChanceException += 
    (object source, FirstChanceExceptionEventArgs e) =>
    {
        Console.WriteLine("FirstChanceException event raised in {0}: {1}",
            AppDomain.CurrentDomain.FriendlyName, e.Exception.Message);
    }; 
```

现在我看到了：nART.exe 中引发的 FirstChanceException 事件：D3D11_ERROR_FILE_NOT_FOUND：找不到文件（-2005139454）

这可能会让我走上正确的轨道。我现在可以使用断点，我想我已经接近找到罪魁祸首了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:04:10.137

您应该能够打开 Debug > Exceptions 并检查“Common Language Runtime Exceptions”“Thrown”，这将中断所有托管库异常的执行，即使它们已被处理。`

# sql - 更新我网站上的表格

> ID：16039703
> 
> 赞同：-3
> 
> 时间：2013-04-16T14:25:34.443
> 
> 标签：sql, phpmyadmin

大家好，提前感谢您的帮助，我有我的网站，我正在建立一个业余爱好现在我使用 phpmyadmin 手动更新表。

问题是如何设置连接以将表导入我的网站数据库？

我问之前google了一下，没有找到相关的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:46:07.467

有很多方法可以做你想做的事（实际上有几十种）。`PHP`我个人使用的一种方法是通过`$mysqli`课程。

[在此处阅读有关 mysqli 的更多信息](http://php.net/manual/en/book.mysqli.php)

您将需要设置一个数据库连接，从这里您将使用此连接通过构建`SQL`查询并使用`$mysqli`该类将它们发送到数据库来查询您的数据库。

# facebook - Facebook fql 无法通过评论表中的 post_id 获取评论

> ID：16039704
> 
> 赞同：2
> 
> 时间：2013-04-16T14:25:34.983
> 
> 标签：facebook, comments, facebook-fql

谁能告诉我为什么我不能通过 post_id 从评论表中获得评论。

访问令牌是 [已编辑]

post_id 是 100002553491860_419288394832940

该帖子有一条评论，我可以通过 fql 从流表中获取它：从 post_id = '100002553491860_419288394832940' 的流中选择评论，您可以在图形 api 资源管理器中运行它：http: [//developers.facebook.com/tools/explorer](http://developers.facebook.com/tools/explorer)。

然后我试图从评论表中获取这篇文章的评论，fql: select text,time,fromid,comment_count,likes,can_like,user_likes,id from comment where post_id='100002553491860_419288394832940'，但它返回空。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T09:10:05.647

好的，有人可能会遇到同样的问题，最后我使用流表而不是评论表来获取评论，fql: select comments from stream where post_id='%@'。

# list - 检查列表在 Haskell 中是否平坦

> ID：16039707
> 
> 赞同：8
> 
> 时间：2013-04-16T14:25:42.367
> 
> 标签：list, haskell, recursion, pattern-matching, the-little-schemer

在*[The Little Schemer](https://rads.stackoverflow.com/amzn/click/com/0262560992)*中有一个函数可以检查列表是否平坦：

```
(define lat?
  (lambda (l)
    (cond
     ((null? l) #t)
     ((atom? (car l)) (lat? (cdr l)))
     (else #f)))) 
```

我正在尝试在 Haskell 中编写相同的递归函数，但没有成功：

```
is_lat :: [a] -> Bool
is_lat [] = True
is_lat ??? 
```

如何检查参数是否不在表单中`[[a]]`？换句话说，`[1,2,3]`是一个有效的输入，但`[[1,3], [2,4]]`不是`[[[1,2,3]]]`。

我想在接受列表的递归函数中进一步使用它，以确保我只处理平面列表。

**编辑：**我看到人们因为`is_lat :: [a] -> Bool`类型签名而感到困惑。我现在同意，我不应该在运行时检查类型。但是，是否可以在编译时检查类型？如何使该功能仅适用于*平面*列表？还是我应该彻底改变我的思维方式？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-16T15:20:46.670

在 Haskell 中，您不能真正以与在 Scheme 中相同的方式来考虑嵌套列表，因为它们不是相同的数据结构。Haskell 列表是同质的，而 Lisp“列表”实际上更接近于玫瑰树（如下面的 CAMcCann 所指出的）。作为一个说明性示例，看一下[WYAS48 解析部分](http://en.wikibooks.org/wiki/Write_Yourself_a_Scheme_in_48_Hours/Parsing)如何定义`LispVal`.

如果你真的，*真的*，**真的**想进行运行时类型检查，即使这通常是一个坏主意并且在 Haskell 中非常不合常规，请查看[Data.Typeable](https://hackage.haskell.org/package/base-4.14.1.0/docs/Data-Typeable.html)。[此响应](https://stackoverflow.com/a/4131682/190887)也可能有用。

这个问题的真正答案是“你需要在 Haskell 和 Lisp 中以不同的方式思考你的论点，这导致永远不需要在运行时自己执行这个检查”（我说这是一个 Common Lisper，所以我理解这是多么令人沮丧那就是开始）。

**附录**：响应您的编辑，Haskell 的类型系统自动确保这一点。例如，如果你有一个 type 的函数`foo :: [Int] -> Int`，并且你传递它`["One", "Two", "Three"]`or `[[1, 2, 3]]`，你会得到一个编译时错误，告诉你刚刚发生了什么以及为什么发生了爆炸。如果你想专门化一个函数，只需声明一个更具体的类型。

例如（不要写这样的代码，它只是为了说明目的），假设你有一个简单的函数，比如

```
myLookup index map = lookup index map 
```

如果你将它加载到 GHCi 并运行`:t myLookup`，它会告诉你函数的类型是`myLookup :: Eq a => a -> [(a, b)] -> Maybe b`，这意味着它可以采用任何派生类型的键`Eq`（任何你可以运行`==`的东西）。现在，无论出于何种原因，您都想确保**只**使用数字作为键。您可以通过添加更具体的类型声明来确保

```
myLookup :: Int -> [(Int, a)] -> Maybe a
myLookup index map = lookup index map 
```

现在，即使函数体中没有任何内容阻止它处理其他键类型，但如果您尝试将`Int`索引或`[(Int, a)]`映射以外的其他内容传递给它，您将在编译时收到类型错误。结果，这

```
myLookup :: Int -> [(Int, a)] -> Maybe a
myLookup ix lst = lookup ix lst

main :: IO ()
main = putStrLn . show $ myLookup 1 [(1, "Foo")] 
```

将编译并运行良好，但这

```
myLookup :: Int -> [(Int, a)] -> Maybe a
myLookup ix lst = lookup ix lst

main :: IO ()
main = putStrLn . show $ myLookup "Nope.jpg" [("Foo", 1)] 
```

两者都不会。在我的机器上，它在编译时出错

```
/home/inaimathi/test.hs:5:35:
    Couldn't match expected type `Int' with actual type `[Char]'
    In the first argument of `myLookup', namely `"Nope.jpg"'
    In the second argument of `($)', namely
      `myLookup "Nope.jpg" [("Foo", 1)]'
    In the expression:
      putStrLn . show $ myLookup "Nope.jpg" [("Foo", 1)]
Failed, modules loaded: none. 
```

我真的希望这不会让你更困惑。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-16T14:31:00.727

这对于标准的 Haskell 列表来说既不可能也不必要，因为 Haskell 是强类型的。列表的所有元素本身都是列表（在这种情况下，类型是`[a] = [[b]]`some `b`），或者不是。

例如，如果你尝试构造一个混合列表，你会从编译器中得到一个错误：

```
Prelude> ["hello", ["world!"]]

<interactive>:3:12:
    Couldn't match expected type `Char' with actual type `[Char]'
    In the expression: "world!"
    In the expression: ["world!"]
    In the expression: ["hello", ["world!"]] 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-16T14:57:50.307

函数类型`[a] -> Bool`隐含的意思是`forall a. [a] -> Bool`，换句话说，它为所有可能的元素类型的列表定义相同。这确实包括类型`[[Int]]`或`[[[String]]]`任何您能想到的嵌套深度。但是元素类型是什么对你的函数没有影响。

就这个函数而言，输入总是一个列表，其元素是一些不透明的、未知的类型。它永远不会接收包含相同不透明类型的嵌套列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-05T07:31:16.990

好吧，我想，在 Haskell 中，您仅限于[http://ideone.com/sPhRCP](http://ideone.com/sPhRCP)：

```
main = do   -- your code goes here
    print $isFlat [Node 1, Node 2, Node 3]
    print $isFlat [Node 1, Node 2, Branch [Node 3, Node 4, Node 5], Node 6]

data Tree a = Node a | Branch [Tree a]

isFlat :: [Tree a] -> Bool
isFlat = all isNode where
                      isNode (Node _) = True
                      isNode _ = False 
```

在非严格类型语言中，每个对象都有运行时类型信息，因此可以是多态的。这可能是一个复杂的强制网络，例如在 Scala 中（如果您使用 C++ 则不太复杂），或者只是“一切都是对象，对象就是一切”，就像在纯动态语言（Lisp、JS、...） .
Haskell 是严格类型的。

# jquery - jQuery：removeClass 中的通配符类选择器

> ID：16039708
> 
> 赞同：3
> 
> 时间：2013-04-16T14:25:47.113
> 
> 标签：jquery, selector, wildcard, removeclass

当我直接指定它时（即'ratingBlock'、'ratingBlock1'、'ratingBlock2'等），此代码片段可在添加新类之前删除现有类。但是当我在 removeClass ('[class^="ratingBlock"]') 中使用通配符选择器时，它不起作用。难道我做错了什么？谢谢。

```
<style type="text/css">
.ratingBlock {background:gold !important;}
.ratingBlock1, .ratingBlock2, .ratingBlock3, .ratingBlock4, .ratingBlock5 {background:LightGreen;}
</style>

<div class="test block ratingBlock">
Broken
<div><a href="#" class="ratingLink ratingNo-1">1+</a></div>
<div><a href="#" class="ratingLink ratingNo-2">2+</a></div>
<div><a href="#" class="ratingLink ratingNo-3">3+</a></div>
</div>

<script type="text/javascript">
// <![CDATA[
jQuery(document).ready(function(){
    initRatingWorks();
});

function initRatingWorks() {
    jQuery("a.ratingLink").bind('click', function() {
      var star = jQuery(this);
      var ratingBlock = star.parents('div.test.block');
      var rating = star.attr('class').match(/\d+/);

      if (ratingBlock.attr('class').indexOf('ratingBlock') !== -1) {
          ratingBlock.removeClass('[class^="ratingBlock"]').addClass('ratingBlock' + rating);
      }
      else {
          ratingBlock.addClass('ratingBlock' + rating);
      }

      return false;
    });
}
// ]]>
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:34:30.117

`$.removeClass()`不将选择器作为参数，只有类名（或类名）。

请参阅：[删除多个类 (jQuery)](https://stackoverflow.com/a/1485656/2107024)

所以你基本上需要打电话：

```
$.removeClass('ratingBlock1 ratingBlock2 ratingBlock3 ratingBlock4 ratingBlock5'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:31:12.707

`removeClass`接受一个函数或一个类名。您正在尝试提供一个 CSS 选择器。看起来您只需要：

```
ratingBlock.removeClass('ratingBlock').addClass('ratingBlock' + rating) 
```

此外，您可以像这样删除通配符：

```
ratingBlock.removeClass (function (index, css) {
    return (css.match (/ratingBlock/g) || []).join(' ');
}); 
```

参考：[JQuery removeClass 通配符](https://stackoverflow.com/questions/2644299/jquery-removeclass-wildcard)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T20:38:41.817

如果它更容易，我[为另一个答案编写了一个插件](https://stackoverflow.com/a/19059585/1037948)，它将以匹配开始（或结束）剥离类，所以

```
ratingBlock.stripClass('ratingBlock-').addClass('ratingBlock-' + rating); 
```

将删除`ratingBlock-1`，`ratingBlock-2`但不会`ratingBlock`（只要您包含破折号）。

代码：[https ://gist.github.com/zaus/6734731](https://gist.github.com/zaus/6734731)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T14:27:55.500

我认为您的问题是引号：我认为您不需要它们，请尝试省略它们。

```
'[class^=ratingBlock]' 
```

**编辑：**

`.removeClass()`接受类名，而不是选择器。

但是，您可以指定多个空格分隔的类名，因此可以试试这个：

```
.removeClass('ratingBlock ratingBlock1 ratingBlock2'); 
```

[http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

# google-maps - 在 Google Map V3 中获取 2 个端点之间的所有地理点

> ID：16039709
> 
> 赞同：0
> 
> 时间：2013-04-16T14:25:50.727
> 
> 标签：google-maps, google-maps-api-3

我需要与 Google Map V3 相关的帮助。是否可以在 V3.2 中获取 2 个端点之间的所有地理点。

在 V2 中，我有一些代码，如下所述

```
var poly = directions.getPolyline()
// loop through all the points
var p = poly.getVertex(x);
// get lat lang
p.lat(); p.lng(); 
```

但是 V3 中没有等效的代码来获取两个位置之间的所有 lat、lang。你能帮我得到两个端点之间的所有纬度，语言吗？

我不确定我是否在这里提供了所有信息，如果您有任何意见，请告诉我。

谢谢，-Sharath

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:40:49.513

您可以解析路线的`overview_path`-property（其中包含简化版本的路线的 LatLng）或迭代`route->legs->steps->path`以检索 LatLng 的完整列表

# database - 使用openCV从图像创建人脸数据库？

> ID：16039710
> 
> 赞同：4
> 
> 时间：2013-04-16T14:25:50.743
> 
> 标签：database, opencv

我正在编写一个从图像中检测人脸的程序；并使用 OpenCV 库从输入图像中识别人脸。我完成了检测部分，但在识别部分，我不知道如何从检测到的人脸创建人脸数据库。我阅读了几个关于使用 Eigenfaces 进行人脸识别的示例，并且它需要来自可用数据库的每人至少 2 张脸——我没有。

我的问题是如何创建数据库，它不仅仅是裁剪每个人脸并存储在一个命名文件夹中，因为不同图像中可能有相同的人脸。有没有办法比较这些面孔并将它们分组到一个文件夹中？

非常感谢，并为我糟糕的英语感到抱歉（：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:12:43.770

如果您查看此链接，您可以使用一些人脸数据集，它还解释了如何进行人脸识别

[http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html](http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html)

# android - 在片段更改时抛出 NPE（无法解决 fragment.getView()）

> ID：16039715
> 
> 赞同：0
> 
> 时间：2013-04-16T14:26:39.193
> 
> 标签：android, nullpointerexception, fragment

所以这是我的 fPretraga 课程：

```
public class FragmentPretraga extends android.app.Fragment
{
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        return inflater.inflate(R.layout.izgled_pretraga, container, false);
    }
} 
```

这就是功能

```
try
        {
            Spinner oblasti = (Spinner) fPretraga.getView().findViewById(R.id.spinnerOblasti);
            ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,R.array.oblasti, android.R.layout.simple_spinner_item);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            oblasti.setAdapter(adapter);
            EditText sranje = (EditText) fPretraga.getView().findViewById(R.id.editBrojDjaka);
            sranje.setText("0");
        }
        catch(NullPointerException e)
        {
            Log.e("LOAD_TAG","Šta se desilo?",e);
        } 
```

该函数应该加载变量（在这种情况下，使用预设的字符串值数组对 Spinner 进行膨胀，并将一个文本框的文本设置为其默认的“0”值）。我的假设是抛出 NPE 是因为 getView() 没有返回我期望的视图，即我写的 onCreateView 是错误的。因为 id "spinnerOblasti" 存在于 "izgled_pretraga.xml" 文件中。有什么想法吗？提前致谢。

LogCat 日志：

> 04-16 14:17:19.866：D/gralloc_goldfish(541)：没有检测到 GPU 仿真的仿真器。
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): Šta se desilo？
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): java.lang.NullPointerException
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): at com.markosoft.maturko.Maturko.UcitajPromenljive(Maturko.java:214)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): at com.markosoft.maturko.Maturko$MyTabListener.onTabSelected(Maturko.java:181)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 com.android.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:512)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 com.android.internal.app.ActionBarImpl$TabImpl.select(ActionBarImpl.java:893)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 com.android.internal.widget.ScrollingTabContainerView$TabClickListener.onClick(ScrollingTabContainerView.java:488)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 android.view.View.performClick(View.java:3480)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 android.view.View$PerformClick.run(View.java:13983)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 android.os.Handler.handleCallback(Handler.java:605)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 android.os.Handler.dispatchMessage(Handler.java:92)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 android.os.Looper.loop(Looper.java:137)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 android.app.ActivityThread.main(ActivityThread.java:4340)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 java.lang.reflect.Method.invokeNative(Native Method)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 java.lang.reflect.Method.invoke(Method.java:511)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
> 
> 04-16 14:18:50.356: E/LOAD_TAG(541): at dalvik.system.NativeStart.main(Native Method)
> 
> 04-16 14:18:50.746: D/dalvikvm(541): GC_CONCURRENT 释放 214K，4% 释放 10102K/10439K，暂停 3ms+4ms

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:40:25.423

在 onCreateView 你必须这样做：

```
View view = inflater.inflate(R.layout.izgled_pretraga, null);
oblasti =(Spinner)  view.findViewById(R.id.spinnerOblasti);
return view; 
```

然后你可以在任何地方调用 spinner ......

# php - php/curl/xml解析器

> ID：16039719
> 
> 赞同：0
> 
> 时间：2013-04-16T14:26:43.183
> 
> 标签：php, xml, curl

不久前，我为一个朋友做了一个快速新闻解析器。

这是代码：

```
$ch = curl_init("http://feeds.energydigger.com/headlines.xml");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, 0);
$data = curl_exec($ch);
curl_close($ch);
$doc = new SimpleXmlElement($data, LIBXML_NOCDATA);

if(isset($doc->channel))
{
    parseRSS($doc);
}
function parseRSS($xml)
{
    $cnt = 3;
    for($i=0; $i<$cnt; $i++)
    {
    $url    = $xml->channel->item[$i]->link;
    $title  = $xml->channel->item[$i]->title;
    $desc = $xml->channel->item[$i]->description;
    $date = $xml->channel->item[$i]->pubDate;

    echo '<p><a href="'.$url.'">'.$title.'</a><br />'.$date.'</p>';
    }
} 
```

到目前为止，这一直很完美，现在我在试图显示列表的页面上收到 500 个服务器错误。

我是否错过了一些明显的东西，或者任何人都可以轻松发现

提前致谢

PS我修改了某人的代码我找到了一个教程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:40:12.663

我只是将您的代码复制并粘贴到我服务器上的 php 页面中，它可以正常工作。

我怀疑你的问题是 curl 安装。您可能会收到此错误：致命错误：在第 2 行调用未定义函数 curl_init() 这是因为您需要初始化 curl 扩展。

这是如何做到的：http: [//nz.php.net/manual/en/curl.installation.php](http://nz.php.net/manual/en/curl.installation.php)

这也可能有帮助：

[调用未定义函数 curl_init()](https://stackoverflow.com/questions/10226983/call-to-undefined-function-curl-init)

[curl_init（）函数不起作用](https://stackoverflow.com/questions/4477535/curl-init-function-not-working)

# c++ - WinRT API 无法获取 IDeviceIoControl

> ID：16039720
> 
> 赞同：1
> 
> 时间：2013-04-16T14:26:46.770
> 
> 标签：c++, windows-runtime, winrt-async

我已经获取了通过 osrfx2 示例中的 guid 访问自定义驱动程序的基本代码。 [http://code.msdn.microsoft.com/windowsapps/Custom-device-access-sample-43bde679](http://code.msdn.microsoft.com/windowsapps/Custom-device-access-sample-43bde679)

我试图在 WinRT 中实现应用程序，它访问 ndislwf 过滤器驱动程序

```
ComPtr<ICreateDeviceAccessAsync> access;    
ComPtr<IDeviceIoControl> deviceControl;

HRESULT hr = CreateDeviceAccessInstance(
    (PCWSTR)L"\\Device\\{5cbf81bd-5055-47cd-9055-a76b2b4e3697}",
    GENERIC_READ | GENERIC_WRITE,
    &access); // Returns S_OK.

hr = access->Wait(INFINITE);    // Returns S_OK.

hr = access->GetResult(IID_IDeviceIoControl,(void **)&deviceControl); // Returns E_INVALIDARGS. 
```

我无法让 devicecontrol 发送 ioctl。

我在元数据文件中也提到了 guid。

任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:56:19.827

FWIW，您可能需要查看“[访问自定义驱动程序](http://code.msdn.microsoft.com/windowsapps/Custom-device-access-sample-43bde679)”示例应用程序。

# javascript - 在 Marionette 布局中使用 jQuery 选项卡

> ID：16039722
> 
> 赞同：3
> 
> 时间：2013-04-16T14:26:48.660
> 
> 标签：javascript, jquery, model-view-controller, backbone.js, marionette

我正在尝试在Marionette 区域内使用[jquery 选项卡。](http://jqueryui.com/tabs/)

两个选项卡区域的 HTML 如下所示：

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
    </ul>
    <div id="tabs-1">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
    </div>
    <div id="tabs-2">
        <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
    </div>
</div> 
```

我想要做的是有一个像这样的区域，在“选项卡”中有多个“事物”——所以在其中添加一个`< li >`和一个 div。

我在主干中所做的是抓取这些“东西”的集合，并在每个“东西”上运行它：

```
if (thing_type === "content_pane") {
    thing_view = new APP.Views.ThingView({ model : thing_model});
}

//Paint the region
overall_layout.some_region.show(thing_view); 
```

事物视图如下所示：

```
<div class="thing_view ui-state-active">
    <div class="tabs">
        <ul>
            <li><a href="#tabs-1">{{mustache_variable}}</a></li>
        </ul>
        <span class="thing_panes">
            <div id="tabs-1">
                <p>1roin <a href="http://www.google.com/">Google</a>elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
            </div>
        </span>
    </div>
</div> 
```

显然，现在每次运行此循环时，它都会复制前一个实例。

我的问题是——为每个视图附加 li 和 div 的最佳方法是什么？是复合视图吗？它是嵌入一个区域吗？收藏视图？我对此有点迷茫，非常感谢一些意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T17:58:51.090

您可以将同一个集合绑定到多个视图。这是一个使用两个集合视图的示例。我确信还有其他方法，但这很简单。

[http://jsfiddle.net/puleos/k3Nzz/](http://jsfiddle.net/puleos/k3Nzz/)

**标记：**

```
<div id="tab-container">
    <section id="tabs"></section>
    <section id="tab-content"></section>
</div>
<a id="add-tab" href="#addTab/2">Add a Tab!</a>

<script type="text/html" id="tab-template">
  <a href="#tabs-<%=id%>"><%=tabName%></a>
</script>

<script type="text/html" id="tab-content-template">
    <div id="tabs-<%=id%>">
      <p><%=content%></p>
    </div>
</script> 
```

**JS**

```
var App = new Marionette.Application();

App.addRegions({
    "tabs": "#tabs",
    "tabContent": "#tab-content"
});

App.on("initialize:after", function() {
    Backbone.history.start();
});

App.module("TabModule", function(Mod, App, Backbone, Marionette, $, _){
    var tabsCollection = new Backbone.Collection([
          { id: 1,
            tabName: "tab1",
            content: "tab1 content elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem" 
            },
        { id: 2,
            tabName: "tab2",
            content: "tab2 content elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem" 
            },
    ]);

    var TabItem = Marionette.ItemView.extend({
        tagName: "li",
        template: "#tab-template"
    });

    var TabView = Marionette.CollectionView.extend({
        itemView: TabItem,
        itemViewContainer: "ul",
        tagName: "ul"
    });

    var TabContentItem = Marionette.ItemView.extend({
        tagName: "div",
        template: "#tab-content-template"
    });

    var TabContentView = Marionette.CollectionView.extend({
        itemView: TabContentItem,
        itemViewContainer: "div"
    });

    // Define a controller to run this module
    // --------------------------------------
    var Router = Marionette.AppRouter.extend({
        appRoutes: {
        "addTab/:tab": "addTab"
        },
    });

    var Controller = Marionette.Controller.extend({

        initialize: function(options){
            this.region = options.region
        },
        addTab: function(tab){
            var tabCount = tabsCollection.length + 1;
            tabsCollection.add({
                id: tabCount, 
                tabName: "tab" + tabCount,
                content: "tab" + tabCount + "elit arcu..." 
            });

            $("#tab-container").tabs("refresh");
            $("#add-tab").attr("href", "#addTab/"+ tabCount);
        },
        start: function(){
            var tabView = new TabView({
                collection: tabsCollection    
            });
            var tabContentView = new TabContentView({
                collection: tabsCollection    
            });

            App.tabs.show(tabView);
            App.tabContent.show(tabContentView);
            $("#tab-container").tabs();
        }

    });

    Mod.addInitializer(function(){
        Mod.controller = new Controller();
        Mod.router = new Router({
            controller: Mod.controller
        });
        Mod.controller.start();
    });
});

// Start the app
// -------------
App.start(); 
```

# c++ - 块作用域外部声明

> ID：16039723
> 
> 赞同：1
> 
> 时间：2013-04-16T14:26:50.250
> 
> 标签：c++, c++11

C++11 标准给出了下面的代码片段（我删除了不相关的代码）并说名称`i`具有外部链接。（第 3.5.6 条）

```
static int i = 0; // #1
void g() {
    extern int i; // #3 external linkage
} 
```

他们为什么这样做呢？我是不是误会了什么？两者`i`在vs2012中指的是同一个对象。当我在`i`其他地方使用时，我得到了一个未解决的外部错误。我不知道 vs2012 是否支持这个功能。

编辑：我认为 VS2012 正在做正确的事情。＃3中的`i`只需要引用`i`具有链接的an。如果编译器找不到，则`i`应该在其他翻译单元中定义。所以这两者`i`应该在上面的代码片段中引用同一个对象。

来自标准的报价：

> 如果存在具有相同名称和类型的链接的实体的可见声明，忽略在最内层封闭命名空间范围之外声明的实体，块范围声明声明相同的实体并接收前一个声明的链接。如果没有找到匹配的实体，则块范围实体接收外部链接。

但是为什么人们需要这个功能呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T14:31:11.470

`#3`只是一个声明；它声明一个名为的变量`i`存在于程序中的某处，具有外部链接，但没有定义该变量。该声明允许您`#1`在`g`.

您还需要在包含`g`. 在这种情况下，它必须在不同的翻译单元中，这样它就不会与同名的静态变量冲突。

需要明确的是，这里调用了两个不同的变量`i`，如示例后面的段落中所述。`#1`在这里定义；`#3`仅声明，需要单独定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:34:39.237

```
static int i = 0; // #1
void g() {
    extern int i; // #3 external linkage
} 
```

第一个`static` `i`是声明，仅在当前源文件中可见。

```
extern int i; 
```

告诉编译器我不是这个意思，`static i`而是另一个`i`在其他地方定义的意思。如果您没有在其他地方（在另一个翻译单元中）定义它，您将获得未定义的参考。

这不会破坏 ODR，因为它 (the `static`)`i`是静态的（仅在本单元中可见）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:53:14.130

```
extern int i; 
```

Promises 编译器我会给你一个`int i`.

这`static int i=0;`不是承诺的变量，您必须在该变量声明的`int i`其他地方声明一个可见的`extern`变量。

换句话说`extern int i;`，和`static int i=0;`是两个不相关的变量。

# c# - 用户定义的绘画不可见

> ID：16039732
> 
> 赞同：0
> 
> 时间：2013-04-16T14:27:19.143
> 
> 标签：c#, winforms, gdi+

我有一个带有 GroupBox 的 Windows 窗体应用程序，以及作为背景图像的 PictureBox，以及 PowerPack 中的几个可点击的 OvalShapes。

现在我需要一些 OvalShapes 的标签，所以我在我的 GroupBox 上放了一个 EventHandler，在每次重绘时，应该绘制以下内容

```
this.groupBoxTest.Paint += new System.Windows.Forms.PaintEventHandler(this.groupBoxVirtualView_Paint);

private void groupBoxVirtualView_Paint(object sender, PaintEventArgs e)
{
    Graphics g = groupBoxVirtualView.CreateGraphics();//e.Graphics;
    g.DrawString("01", new Font("Arial", 12), new SolidBrush(Color.Black), 240, 115);
} 
```

但是绳子`01`永远不会被拉出来；我所看到的只是处于相同位置的椭圆形 - 出于测试目的禁用它们也不会这样做。

我的弦怎么了？

任何其他方式来标记我的 PoweredOval？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:30:52.523

你必须使用

> groupBoxVirtualView.Invalidate();

重绘groupBox！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:32:36.757

绘制事件应该使用来自发送者的图形对象：

```
private void groupBoxVirtualView_Paint(object sender, PaintEventArgs e)
{
  Graphics g = e.Graphics;
  g.DrawString("01", new Font("Arial", 12), new SolidBrush(Color.Black), 240, 115);
} 
```

此外，如果 GroupBox 中有一个 PictureBox，该控件将不会显示任何通过该控件的 GroupBox 绘画。它会隐藏它。

# highcharts - Highcharts：通过字幕构建图例

> ID：16039738
> 
> 赞同：2
> 
> 时间：2013-04-16T14:27:37.917
> 
> 标签：highcharts, legend

最近几天我在玩 Highcharts。

我不知道的一件事是，是否可以在图例中包含字幕来构建结果。

在我的例子中：http: [//jsfiddle.net/gWEtB/](http://jsfiddle.net/gWEtB/)

```
var allData={
        products: ["Product1", "Product2", "Product3", "Product4"]
    }

var colors={
        'own': ['#3B14AF', '#422C83', '#210672', '#886ED7'],
        'comp': ['#E7003E', '#AD2B4E',  '#960028',  '#F33D6E',  '#F36D91'],
        'new':  '#00CC00'}

`$(function () {
    $('#container').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: 'Product Switching'
        },
        xAxis: {
            categories: allData.products
        },
        yAxis: {
            min: 0,
            title: {
                text: ''
            },
            labels:{ 
                format:'{value} %'
            }
        },
        tooltip: {
            pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.percentage:.0f}%</b><br/>',
            shared: false
        },
        plotOptions: {
            column: {
                stacking: 'percent',
                dataLabels: {
                    enabled: true,
                    formatter: function(){
                        return this.percentage.toFixed(2)+' %';
                    },
                    color:'#FBF5EF'
                }
            }
        },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            y: 30,
        },
            series: [{
            name: 'Own product1',
            data: [5, 3, 4, 7],
            color: colors.own[0]
        },
        {
            name: 'Own product2',
            data: [5, 3, 4, 7],
            color: colors.own[1]
        }, 
        {
            name: 'Own product3',
            data: [5, 3, 4, 7],
            color: colors.own[2]
        }, 
        {
            name: 'Own product4',
            data: [5, 3, 4, 7],
            color: colors.own[3]
        }, 
        {
            name: 'Competitor 1',
            data: [2, 2, 3, 2],
            color: colors.comp[0]
        },
        {   
            name: 'Competitor 2',
            data: [2, 2, 3, 2],
            color: colors.comp[1]
        },
        {
            name: 'Competitor 3',
            data: [2, 2, 3, 2],
            color: colors.comp[2]
        },
        {
            name: 'Competitor 4',
            data: [2, 2, 3, 2],
            color: colors.comp[3]
        },
        {
            name: 'Competitor 5',
            data: [2, 2, 3, 2],
            color: colors.comp[4]
        },          {
            name: 'Market Potential',
            data: [3, 4, 4, 2],
            color: colors.new
        }]
    });
}); 
```

我寻找一种以这种方式为图例添加字幕的方法：

自相残杀：
o 自有产品 1
o 自有产品 2
o 自有产品 3
o 自有产品 4

比赛：
o 竞争对手 1
o 竞争对手 2
o ...

我感谢所有帮助和信息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:13:36.553

您可以使用 labelFormatter [http://api.highcharts.com/highcharts#legend.labelFormatter](http://api.highcharts.com/highcharts#legend.labelFormatter)

简单示例：http: [//jsfiddle.net/gWEtB/1/](http://jsfiddle.net/gWEtB/1/)

```
labelFormatter: function() {
                switch(this.name)
                {
                    case 'Own product1':
                        return 'Cannibalization<br/>'+ this.name;
                        break;
                    case 'Competitor 1':
                        return this.name + '<br/>Competition';
                        break;
                     case 'Market Potential':
                        return this.name + '<br/>Market title';
                        break;
                    default:
                        return this.name;
                        break;
                }

            } 
```

# sql - 如何构建合并两个表的 SQL 查询？

> ID：16039739
> 
> 赞同：0
> 
> 时间：2013-04-16T14:27:39.340
> 
> 标签：sql

全部

有两张桌子，新的和旧的。

```
[New] 
Machine Date 
A       Apr 16 
B       Apr 16 
A       Apr 15
C       Apr 15  
A       Apr 14 

[Old] 
Machine Date 
A       Apr 12 
B       Apr 10 
A       Apr 09 
C       Apr 08  
A       Apr 07 
```

我想带上 2 台机器，日期 > 4 月 9 日

我可以为一个表构建查询，但不知道如何合并两个表。

```
select top 2 machine, count(machine)
from new
where date > "Apr 09"
group by machine 
```

它会在一个语句中使用两个选择查询，但不知道该怎么做。

任何人都可以为此提供建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:40:53.337

如果您经常这样做，我建议您创建一个显示两个表的视图：

```
CREATE VIEW AllData AS
SELECT * FROM [New]
UNION ALL
SELECT * FROM [Old] 
```

然后您可以从视图中选择并执行您想要的任何过滤：

```
select top 2 machine, count(machine)
from AllData
where date > "Apr 09"
group by machine 
```

另外，我不确定您在此处显示的数据是否只是一个示例，但我会注意您使用的日期格式 - 因为您是基于字符串过滤的，几乎每个日期该年将满足该条件，包括“Jan 01”。要更新它，您可能需要考虑使用实际的日期类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:29:10.550

您似乎想要的查询是：

```
select top 2 machine, count(machine)
from ((select * from [New]
      ) union all
      (select * from [Old]
      )
     ) t
where date > "Apr 09"
group by machine
order by count(machine) desc 
```

使用时`top`，您应该始终拥有一个`order by`. 否则，结果是不确定的。我猜你想要数量最多的两个。

# java - 序列化 DataTable (WCF) 到 Android 项目

> ID：16039740
> 
> 赞同：1
> 
> 时间：2013-04-16T14:27:41.353
> 
> 标签：java, android, serialization

我将 Android java 与 WCF 服务连接起来。现在我正在尝试从 WCF 服务获取数据到我的项目中。

我对来自 C# 的 DataTable 类型有疑问，我必须将其解析到名为 Groups 的类中

现在我有序列化错误：

> java.lang.ClassCastException: org.ksoap2.serialization.SoapObject 不能转换为 org.ksoap2.serialization.SoapPrimitive

# 网络服务 (WCF)

```
var sp = new StoreProcEgzequtor("[dbo].GetAddonsTypes");
string a = sp.SqlCommand.Connection.Database;
DataTable dt = sp.ExecuteDataTable("Tabela");
return dt; 
```

# 班级组

```
public class Groups {
    private long id;
    private long ID2;
    private int flgW;
    private int flgO;
    private String Name; 
```

# 活动

```
public class AndroidWSClientActivity extends Activity {

    private static final String METHOD_NAME = "GetAddonsTypes";
    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://10.0.2.2:53432/Service1.svc?wsdl";
    final String SOAP_ACTION = "http://tempuri.org/IService1/GetAddonsTypes";

    TextView textView;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_wsclient_page);

    textView = (TextView) findViewById(R.id.textView2);

    Thread networkThread = new Thread() {
        @Override
        public void run() {
          try {
             SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);         
             SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
             envelope.setOutputSoapObject(request);

             HttpTransportSE ht = new HttpTransportSE(URL);
             ht.call(SOAP_ACTION, envelope);
             final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
             final String str = response.toString();

             runOnUiThread (new Runnable(){ 
         public void run() {
             Log.e("OK",str.toString());
               }
           });
          }
         catch (Exception e) {
            Log.e("WS", e.toString());
         }
        }
      };
      networkThread.start();
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:31:10.657

您的错误与以下行有关。它在异常中很清楚。请检查一下

```
final  SoapPrimitive response = (SoapPrimitive)envelope.getResponse(); 
```

`envelope.getResponse()`返回 the`SoapObject`并且您将其转换为`SoapPrimitive`.

# php - 将 KML 转换为 GeoJson

> ID：16039745
> 
> 赞同：4
> 
> 时间：2013-04-16T14:28:08.037
> 
> 标签：php, xml, xml-parsing, kml, geojson

我在这样做时遇到了很大的问题，所以我再次来寻求帮助。

我有这个庞大的文件，其中包含尼尔森的所有 DMA，我需要用 php 以某种方式解析每个文件并从中获取数据和坐标，但它们必须以这种格式输出

```
{"type": "FeatureCollection", "features": [
{
    "type": "Feature",
    "id": "",
    "properties": {
        "dma": "514",
        "name": "Buffalo, NY"
    },
    "geometry": {
        "type": "Polygon",
        "coordinates": [
            [
                [-79.761951, 42.269861],
                [-79.14959, 42.553193],
                [-79.048361, 42.691959],
                [-78.853455, 42.783961],
                [-78.943961, 42.978357],
                [-78.881611, 43.02363],
                [-78.880756, 43.02955],
                [-78.890068, 43.045268],
                [-78.946342, 43.072051],
                [-79.06977, 43.085841],
                [-79.06467, 43.262754],
                [-78.520257, 43.372277],
                [-77.994839, 43.36526],
                [-77.997291, 43.132981],
                [-77.905934, 43.133562],
                [-77.951044, 43.039544],
                [-77.904562, 43.023492],
                [-77.95633, 42.667882],
                [-78.060469, 42.532888],
                [-77.722965, 42.471217],
                [-77.749931, 41.998782],
                [-77.609815, 41.999367],
                [-77.59813, 41.478577],
                [-78.050728, 41.475103],
                [-78.203422, 41.618157],
                [-78.956057, 41.623863],
                [-78.918856, 41.998119],
                [-79.761374, 41.999068],
                [-79.761951, 42.269861]
            ],

            [
                [-78.933161, 42.963457],
                [-78.934961, 42.965657],
                [-78.934461, 42.964257],
                [-78.933161, 42.963457]
            ],
            [
                [-78.92426, 42.952357],
                [-78.92036, 42.954557],
                [-78.92886, 42.956457],
                [-78.92816, 42.955457],
                [-78.92426, 42.952357]
            ],
            [

                [-78.902609, 42.911768],
                [-78.901122, 42.929442],
                [-78.906739, 42.933805],
                [-78.906259, 42.929557],
                [-78.902609, 42.911768]
            ],
            [

                [-79.064667, 43.078556],
                [-79.071667, 43.078856],
                [-79.073267, 43.080156],
                [-79.071267, 43.083356],
                [-79.064667, 43.078556]

            ],
            [

                [-78.946165, 42.956954],
                [-79.015493, 42.990871],
                [-78.999465, 43.064756],
                [-78.89966, 43.041057],
                [-78.943945, 42.995081],
                [-78.946165, 42.956954]

            ],
            [

                [-78.88566, 43.023557],
                [-78.88836, 43.031957],
                [-78.88826, 43.034457],
                [-78.882868, 43.030771],
                [-78.88566, 43.023557]

            ],
            [

                [-78.956761, 42.958757],
                [-78.961462, 42.959357],
                [-78.963462, 42.961057],
                [-78.958362, 42.961457],
                [-78.956761, 42.958757]

            ]
        ]

    }
  }
]} 
```

任何人都知道如何正确有效地做到这一点我已经坚持了大约 2 天没有成功

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T08:29:56.393

有一个工具可以将（标准）KML 转换为 geoJSON（见下面的链接）。不过，它是用 nodejs 编写的。

[https://github.com/tmcw/togeojson#readme](https://github.com/tmcw/togeojson#readme)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-14T13:19:49.910

## KMZ 为 KML

KMZ 本质上是一个 ZIP 存档。只需使用任何 zip 工具解压缩包含的 KML。Windows 用户可能需要将文件扩展名更改为`.zip`.

## KML 转 GeoJSON

使用 Python 实用程序`kml2geojson`：

```
$ pip install kml2geojson --user
$ k2g input.kml output_directory 
```

## 什么不工作

*   ogr2ogr：无法处理 KML 中的多层

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-17T04:30:23.740

为了回应最近的回答——迭代每个 KML 层是一种很好的解决方法，在用 Python 和 R 清理数据时出现了很多，我想它可以适用于任何语言。

例如，在 R 和使用 GDAL 中，它看起来像：

```
library(rgdal)
library(sf)
library(plyr)
library(dplyr) 
```

```
data <- "INPUT KML"
kml_Layers <- ogrListLayers(data)
iterate <- length(kml_Layers) 

iterate_layers <- function(i){
      layer_i <- st_read(data, kml_Layers[i])
      return(layer_i)
    }

loops <- 1:iterate
Result_data <- lapply(iterate_layers, loops)
results <- ldply(Result_data)

writeOGR(results, "Data_geojson", layer="Data_geojson", driver="GeoJSON") 
```

我知道这不是 PHP，但是一旦我开始以这种方式接近 KML，它就开始为我节省大量时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-20T05:34:18.073

**KMZ 到 GeoJson**

```
 kmz = ZipFile("demo.kmz", 'r')
            kmz.extractall()
            os.rename('doc.kml','demo.kml')
            kml2geojson.main.convert('demo.kml', '') 
```

**KML 到 GeoJson**

```
kml2geojson.main.convert('demo.kml', '') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-18T02:39:40.823

这可能会在 node.js 中停止

```
const tj = require('@mapbox/togeojson');
const JSZip = require('jszip');
const parser = new DOMParser();

          fetch(url)
          .then( response => response.blob() )
          .then( blob =>{
              var reader = new FileReader() ;
              reader.onload = function(){ 
                console.log(this.result) ;
                var zip = new JSZip();
                JSZip.loadAsync(this.result.split(',')[1], {base64: true}).then(zip=>{
                  console.log(zip.files);
                  zip.file("doc.kml").async("text").then(function (text) {
                    var kml = parser.parseFromString(text, "application/xml");
                    var converted = tj.kml(kml);

                });
              } ;
              reader.readAsDataURL(blob) ;
          }) ; 
```

# python - 行尾的点和字边界

> ID：16039746
> 
> 赞同：1
> 
> 时间：2013-04-16T14:28:09.037
> 
> 标签：python, regex, word-boundary, end-of-line

我有这个正则表达式：

```
\ba\.?b\.?c\.?\b( something)? 
```

匹配的

*   美国广播公司
*   美国广播公司
*   abc 的东西
*   ...

我按重要性顺序使用了 2 次：首先我尝试`^`在行首和`$`行尾添加，因为我想找到一个与上述情况完全相同的字符串。如果什么也没找到，约束被删除，我接受了类似的字符串

*   富 abc 富
*   废话 abc 废话

问题是在第一种情况`a.b.c.`下`\b`与`$`. 所以如果我使用

```
^\ba\.?b\.?c\.?\b( something)?$ 
```

简单`a.b.c.`的不匹配，因为圆括号中的部分被“忽略”并且`\b`靠近的部分`$`具有我无法理解的行为。另一方面`a.b.c`（没有最后一个点）将匹配

如果我在一切正常的情况下更改第二个`\b`，`\W`但我不确定我是否会匹配其他不需要的字符串。关于如何仅使用一个正则表达式解决此问题的任何想法？

如果这可能相关，我正在使用 Python

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:40:10.433

问题只是来自`\b`（参见[源代码](http://www.regular-expressions.info/wordboundaries.html)）的含义。这部分`\.\b$`永远不会匹配任何内容，因为没有要匹配的单词边界位置（点和字符串末尾之间的位置不是单词边界位置）。
你应该试试：

```
^\ba\.?b\.?c\.?(?:\b|$) 
```

反而。

对于“某事”部分，它会给出：

```
^\ba\.?b\.?c\.?(?:\b|$)( something)?$ 
```

（这里可能有一些改进，但它应该工作）

# php - 带符号的 32 int 的 PHP pack() 格式 - 大端

> ID：16039751
> 
> 赞同：3
> 
> 时间：2013-04-16T14:28:20.350
> 
> 标签：php, pack

我正在使用 PHP、fopen、fseek、pack 等创建并将数据写入文件（新的“ESRI 形状文件”）。文件规范在这里[http://www.esri.com/library/whitepapers/pdfs/形状文件.pdf](http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf)。

文件规范指出，写入的数据需要结合以下内容：

*   整数：有符号 32 位整数（4 个字节）- 大端
*   整数：有符号的 32 位整数（4 个字节） - Little Endian
*   Double：有符号 64 位 IEEE 双精度浮点数（8 字节） - Little Endian

我似乎找不到允许这些格式的 pack() 格式。我不想使用机器相关格式，因为此代码可能在各种平台上运行。

谁能建议我需要为这 3 种格式使用什么格式（或格式组合）？

非常感谢，史蒂夫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T15:20:00.200

您可以检查运行代码的机器的字节顺序，并根据需要手动反转字节。下面的代码应该可以工作，但您一次只能转换一个 int 或 float。

```
define('BIG_ENDIAN', pack('L', 1) === pack('N', 1));

function pack_int32s_be($n) {
    if (BIG_ENDIAN) {
        return pack('l', $n); // that's a lower case L
    }
    return strrev(pack('l', $n));
}
function pack_int32s_le($n) {
    if (BIG_ENDIAN) {
        return strrev(pack('l', $n));
    }
    return pack('l', $n); // that's a lower case L
}
function pack_double_be($n) {
    if (BIG_ENDIAN) {
        return pack('d', $n);
    }
    return strrev(pack('d', $n));
}
function pack_double_le($n) {
    if (BIG_ENDIAN) {
        return strrev(pack('d', $n));
    }
    return pack('d', $n);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T15:40:07.180

如果 PHP 不支持它，您可以实现自己的。

```
function pack_int32be($i) {
   if ($i < -2147483648 || $i > 2147483647) {
      die("Out of bounds");
   }
   return pack('C4',
      ($i >> 24) & 0xFF,
      ($i >> 16) & 0xFF,
      ($i >>  8) & 0xFF,
      ($i >>  0) & 0xFF
   );
}

function pack_int32le($i) {
   if ($i < -2147483648 || $i > 2147483647) {
      die("Out of bounds");
   }
   return pack('C4',
      ($i >>  0) & 0xFF,
      ($i >>  8) & 0xFF,
      ($i >> 16) & 0xFF,
      ($i >> 24) & 0xFF
   );
} 
```

双精度 LE 要困难得多。支持四精度系统将涉及使用 打包数字`d`，将其转换为二进制字符串，将二进制拆分为字段，如果字段太大，则将字段截断为正确的大小，连接字段，然后从二进制转换为字节。

# gwt - GXT UiBinder 字段标签

> ID：16039753
> 
> 赞同：1
> 
> 时间：2013-04-16T14:28:25.650
> 
> 标签：gwt, gxt, uibinder

我是 UiBinder 的新手，我尝试使用 FieldLabel。

我发现了这篇文章：[GXT: UiBinder new instance of a Widget](https://stackoverflow.com/questions/11020042/gxt-uibinder-new-instance-of-a-widget)

开发人员在哪里使用这些标记

```
<form:FieldLabel text="Text">
  <form:Widget>
    <form:TextField ui:field="text"/>
  </form:Widget>
</form:FieldLabel> 
```

当我做同样的事情时，我收到以下错误：

```
ERROR: Illegal child <form:Widget> in a text-only context. Perhaps you are trying to use unescaped HTML where text is required, as in a HasText widget?: <form:FieldLabel text='Text'> (:7) 
```

看来我的 GXT (3.0.1) 版本不允许 FieldLabel 标记有非纯文本子项。

到目前为止，我发现包含 FieldLabel 的唯一解决方案是使用

```
@UiField(provided = true) 
```

有没有更好的方法将 FieldLabel 与 UiBinder 一起使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T16:23:35.173

问题是你不应该大写`form:widget`：

```
<form:FieldLabel text="Text">
  <form:widget>
    <form:TextField ui:field="text"/>
  </form:widget>
</form:FieldLabel> 
```

在 UiBinder 中，大写字母的元素代表一个真正的 Widget 子类，而小写的元素要么是常规的 html dom 元素，要么是父小部件标签的一些修饰符。我们可以看到这*不是*dom 元素，因为`form:`命名空间，与父部件标签（即`<form:FieldLabel>`）相同。

这是如何工作的：`FieldLabel`该类有一个 Java 方法来为其提供要显示的小部件 - `setWidget`。此方法用`@UiChild`注释装饰（在其超类中）：

```
@Override
@UiChild(limit = 1, tagname = "widget")
public void setWidget(Widget w) {
  //... 
```

这使您（UiBinder 用户）能够将标记引用为`widget`，并使用您输入的任何内容调用该方法。

# perl - 在 perl 中捕获 shell 退出代码

> ID：16039754
> 
> 赞同：0
> 
> 时间：2013-04-16T14:28:42.207
> 
> 标签：perl

我正在使用 open 3 使用 perl 执行 shell 命令

```
 local ( *HANDLE_IN, *HANDLE_OUT, *HANDLE_ERR );

    my $pid = open3( *HANDLE_IN, *HANDLE_OUT, *HANDLE_ERR, @cmd_args ); 
```

其中@cmd_args = 我的 shell 命令

我的外壳返回以下退出代码

```
0: command executed successfully

>0: error in executing the command 
```

如何在我的 perl 中捕获 shell 的退出代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:33:53.770

这很简单，只需看看[旧的 perldoc](http://perldoc.perl.org/IPC/Open3.html)：

```
$pid = open3(\*CHLD_IN, \*CHLD_OUT, \*CHLD_ERR,
    'some cmd and args', 'optarg', ...);

my($wtr, $rdr, $err);
use Symbol 'gensym'; $err = gensym;
$pid = open3($wtr, $rdr, $err,
    'some cmd and args', 'optarg', ...);

waitpid( $pid, 0 );
my $child_exit_status = $? >> 8; 
```

`$child_exit_status`然后包含执行的程序的状态。

另一种使用方法是`${^CHILD_ERROR_NATIVE}`我正在使用的方法，尤其是在通过反引号执行外部命令时：

```
my $fancyresult = `ls -lsahR /`;

if (${^CHILD_ERROR_NATIVE} != 0) {
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:52:40.687

您最终需要使用`wait`or来收割孩子`waitpid`。当你这样做时，[`$?`](http://perldoc.perl.org/perlvar.html#%24?)将设置如下。

```
waitpid($pid, 0);
die "Can't waitpid: $!" if $? < 0;
die "Child killed by signal ".( $? & 0x7F ) if $? & 0x7F;
die "Child returned error ".( $? >> 8 ) if $? >> 8;
print "Child ran successfully!\n";  # if $? == 0 
```

# transactions - 存储过程给出错误：BEGIN 和 COMMIT 语句的数量不匹配。先前计数 = 0，当前计数 = 1

> ID：16039756
> 
> 赞同：0
> 
> 时间：2013-04-16T14:29:10.050
> 
> 标签：transactions

```
ALTER PROCEDURE [dbo].[InsertAgent]
    (
        @State nvarchar(50),
        @StateCode int,
        @City nvarchar(50),
        @CityCode int,
        @FirstName nvarchar(100),
        @LastName nvarchar(100),
        @ParentName nvarchar(100),
        @Relationship nvarchar(100),
        @RelationshipCode int,
        @DOB date,
        @Age int,
        @Address nvarchar(250),
        @District nvarchar(50),
        @PIN int,
        @PANCardNo nvarchar(12),
        @Mobile1 nvarchar(14),
        @Mobile2 nvarchar(14),
        @OtherDetail nvarchar(250),
        @AgentCode nvarchar(20),
        @LevelRank int,
        @Agency Bit,
        @SeniorAgentID int,
        @Count int OUTPUT
    )
AS
    BEGIN
    /* SET NOCOUNT ON */
    SET TRANSACTION ISOLATION LEVEL SERIALIZABLE; 
    DECLARE @AGENT_CODE nvarchar(15)
    BEGIN TRY

    BEGIN TRANSACTION 
        DECLARE @NewAgentCount INT = (SELECT MAX(AgentCount) FROM dbo.tbl_Agent WITH (TABLOCKX))+1;

        select @AGENT_CODE = @CityCode + 'A' + (SELECT RIGHT('000000'+ CONVERT(VARCHAR,AgentCount),7) AS AgtCode FROM dbo.tbl_Agent);

            BEGIN
                    INSERT INTO tbl_Agent(State, StateCode, City, CityCode, FirstName,LastName,ParentName, Relationship, RelationshipCode, DOB,Age,Address ,District,PIN ,PANCardNo,Mobile1 ,Mobile2,OtherDetail,AgentCount, AgentCode,LevelRank,DateAdded ,Agency,SeniorAgentID )
                    VALUES(@State, @StateCode, @City, @CityCode, @FirstName,@LastName,@ParentName, @Relationship, @RelationshipCode, @DOB,@Age,@Address ,@District,@PIN ,@PANCardNo,@Mobile1 ,@Mobile2,@OtherDetail,@NewAgentCount,  @AGENT_CODE,@LevelRank, GETDATE() ,@Agency,@SeniorAgentID )
            END
        SELECT @Count = SCOPE_IDENTITY();

     COMMIT TRANSACTION
     END TRY
     BEGIN CATCH
        IF (@Count = 0)
         BEGIN
            ROLLBACK TRANSACTION
         END
    END CATCH
    END 
```

我正在尝试创建@NewAgentCount，它是最大AgentCount 的+1 和@AGENT_CODE，它是12 个字符的格式。但这给了我在主题中提到的错误。请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:45:12.663

尝试交换你的`BEGIN TRY`and`BEGIN TRANSACTION`语句：

[http://msdn.microsoft.com/en-us/library/ms175976.aspx](http://msdn.microsoft.com/en-us/library/ms175976.aspx)（示例 B）

# java - android中的记忆游戏从表面视图扩展

> ID：16039758
> 
> 赞同：0
> 
> 时间：2013-04-16T14:29:14.500
> 
> 标签：java, android, surfaceview

尝试在不使用 xml 布局的情况下在 android 中创建记忆游戏，基本上我现在要做的是在网格的不同位置创建两张相同的卡片。所以我在这里要问的是如何将这些卡片随机放置在网格上。我首先创建了随机整数数组并且没有重复，但是除非我有一个 if 语句检查是否已经放置了某些东西，否则它将证明是无用的。在键入此内容的过程中，我试图查看是否可以以某种方式放入数组列表并随机排列坐标：S，因此我没有得到任何重复。

```
public int randomGen(int[]num){

    int size =num.length;
    for(int j=0;j<size;j++){
        num[j]=j;

    }

    for(int i =0;i<size;i++){
        int indexToSwap = random.nextInt(size);

        int oldValue = num[i];
        num[i] = num[indexToSwap];
        num[indexToSwap] = oldValue;

    }return num[];

} 
```

cardNumber 将是我分配图片的方式。我正在从表面视图扩展我的屏幕并实现可运行。place card 方法是 Word 类的一部分

```
public class World {
//show them icons first then take away

static final int WORLD_WIDTH =4;
static final int WORLD_HEIGHT=3;
static final int HIGH_SCORE_INC=5;
static final int SCORE_INCREMENT=1;

boolean grid[][] = new boolean[WORLD_WIDTH][WORLD_HEIGHT];
public CardButton c;
public CardButton cd;
Random random = new Random();
public World(){

    placeCards();//place cards will only be called once
}
private void placeCards() {
    int world = WORLD_WIDTH * WORLD_HEIGHT;
    for(int x=0;x<WORLD_WIDTH;x++)
    {
        for(int y=0;y< WORLD_HEIGHT;y++){
            grid[x][y]= false;
        }
    }
    //this will need to be in for loop
    int []rand = new int[WORLD_WIDTH];//this could be one
    rand =randomGen(rand);

    int cardx = random.nextInt(WORLD_WIDTH);   

    int cardY = random.nextInt(WORLD_HEIGHT);//this could be one

    for(int i = 0;i<world/2;i++){

        c= new CardButton(cardX,cardY,i);
grid[cardX][cardy]= true;

//cd=new CardButton(cardX,cardY,i); two cards need to be added with different co ordinates

    }

}
} 
```

这是我的 cardButton 类

```
public class CardButton {
public int cardNum;
private boolean isFacedup;
public int x,y;

public static final int CIRCLE=0;
public static final int SQUARE=1;
public static final int STAR=3;
public static final int HEXAGONNC=4;
public static final int OVAL=5;
public static final int DIAMOND=6;
public static final int REGULAR_DECAGON=7;
public static final int TRIANGLE=8;
public static final int CLOVER = 9;
public static final int DECAGON = 10;
public static final int DECAGONNC = 11;

public CardButton(int x,int y, int cardNumIn){
    //passes a string called code base which
    cardNum = cardNumIn;
    isFacedup = false;

}
public void setFaceUp(){

}
public void setFaceDown(){

}
public boolean isFaceUp(){
    return isFacedup;

}
public boolean equals(CardButton card){
    return cardNum ==card.cardNum? true:false;

}

} 
```

这将在我的游戏屏幕类中显示方块

```
private void drawWorld(World world) {
    //the integer size will be based on the difficulty perhaps create a constants class
    Graphics g = game.getGraphics();
    CardButton c = world.c;
    CardButton cd = world.cd;
    int width = g.getWidth();
    int height = g.getHeight();
    xpos=width/5;
    ypos=height/5;
    Pixmap cards = null;
    //something to thing about is that although they are two card objects to be created, they will share the same asset
    if(c.cardNum==CardButton.CIRCLE)
        cards=Assets.circle;
    if(c.cardNum==CardButton.CLOVER)
        cards=Assets.clover;
    if(c.cardNum==CardButton.DECAGON)
        cards=Assets.decagon;
    if(c.cardNum==CardButton.DECAGONNC)
        cards=Assets.decagonnc;
    if(c.cardNum==CardButton.SQUARE)
        cards=Assets.square;
    if(c.cardNum==CardButton.STAR)
        cards=Assets.star;
    if(c.cardNum==CardButton.HEXAGONNC)
        cards=Assets.hexagennc;
    if(c.cardNum==CardButton.OVAL)
        cards=Assets.oval;
    if(c.cardNum==CardButton.OVAL)
        cards=Assets.oval;
    //this is how many times u wish to see the object
    int length;
    //this varible will be based on the difficulty
    int x = c.x;
    int y = c.y;

    int sx=cd.x;
    int sy=cd.y;
    //

    for(int i=0;i<2;i++)
    {
        g.drawPixmap(cards, x, y);
        g.drawPixmap(cards, sx, sy);
    }

    //g.drawRect(10, 10, g.getWidth(), height, Color.WHITE);
    /*
     * Asset simply holds a constant of pixmaps that later get intialised by loading screen with a string
     */

    //g.drawPixmap(Assets.tiles,xpos,ypos);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:53:15.740

我真的建议使用 xml 来做这个记忆游戏，但如果你不想以下应该工作，请注意我无法测试它，因为我没有任何所需的图像或任何东西

```
class MainActivity extends Activity implements OnItemSelectedListener {

    GridView cardsGridView;
    private ArrayAdapter<CardButton> cardsAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        cardsGridView = new GridView(getBaseContext());
        setContentView(cardsGridView);

        CardButton[] cards = getListOfRandomCards();

        cardsAdapter = new ArrayAdapter<CardButton>(this, android.R.layout.simple_spinner_item, cards) {
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                if (convertView == null)
                    convertView = new ImageView(getBaseContext());
                ImageView view = (ImageView) convertView;
                CardButton card = getItem(position);
                int ImageResource;
                if (card.IsSelected()) {
                    ImageResource = card.getCardImage();
                } else {
                    ImageResource = R.drawable.default_card_image;
                }
                view.setImageResource(ImageResource);
                return view;
            }
        };

        cardsAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        cardsGridView.setAdapter(cardsAdapter);

        cardsGridView.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                // To change body of implemented methods use File | Settings | File Templates.
                CardButton card = (CardButton) parent.getItemAtPosition(position);
                card.SetSelected(true);
                ImageView imageView = (ImageView) view;
                imageView.setImageResource(card.getCardImage());
            }

            @Override
            public void onNothingSelected(AdapterView<?> parent) {
                // To change body of implemented methods use File | Settings | File Templates.
            }

        });

    }

} 
```

# iphone - 使用 SQLite 更新表格内容？

> ID：16039761
> 
> 赞同：0
> 
> 时间：2013-04-16T14:29:26.067
> 
> 标签：iphone, database, xcode, sqlite, tableview

朋友们，这是我的问题：我使用 SQLite 数据库在 Xcode 中填充了一个表。这就是我想要的 - 如果我的表有 20 行并且全部填充，如果新数据保存在我的 SQLite 数据库中，如何更新表？我希望新信息覆盖旧信息。如何在 Xcode 中做到这一点，有什么想法吗？提前致谢！我不确定我提供的信息是否足够，所以如果你想要一些代码或其他东西，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:10:19.347

您正在做的事情的关键在于为您的表格提供的例程：cellForRowAtIndexPath。基本上，您可以编写该例程来提供您希望它提供的任何数据。一旦您知道您的数据已更新，您可以通过调用 reloadData 来刷新整个表。

# jquery - 使用ajax动态附加多个tr元素

> ID：16039765
> 
> 赞同：0
> 
> 时间：2013-04-16T14:29:34.217
> 
> 标签：jquery, html, ajax

我有服务器生成的 html：

```
<div id="invContent">
    <tbody>
        <tr>
            <td>A</td>
            <td>B</td>
            <td>C</td>
        </tr>
        <tr>
            <td>D</td>
            <td>E</td>
            <td>F</td>
        </tr>
        <tr>
            <td>G</td>
            <td>H</td>
            <td>X</td>
        </tr>
    </tbody>
</div> 
```

这个ajax调用：

```
& .ajax({
    url: path,
    datatype: "html",
    success: function (result) {
        $("#tableID>tbody").append($(result).find("#invContent").html());
    }
}); 
```

问题是没有附加 tr 和 td 标签，只有 td 的内容。

如何附加这些多个 tr？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:37:18.453

Your selector is selecting and then appending the `tbody` element, which is probably generating content that is confusing to the browser (multiple `tbody` elements inside one `table`).

Try changing your `success` callback to:

`$("#tableID>tbody").append($(result).find("#invContent>tbody").html());`

An even better solution would be to update your server-side code to just return the `tr` elements so that you don't have to do any selecting/navigating in the response.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:15:10.927

我终于解决了这个问题！

我只是将 tr 包装在 table 标记中：

```
<div id="invContent">

<table>
    <tbody>
        <tr>
            <td>A</td>
            <td>B</td>
            <td>C</td>
        </tr>
        <tr>
            <td>D</td>
            <td>E</td>
            <td>F</td>
        </tr>
        <tr>
            <td>G</td>
            <td>H</td>
            <td>X</td>
        </tr>
    </tbody>
<table
</div> 
```

和`success`回调是：

```
$("#tableID>tbody").append($(result).find("#invContent>table>tbody").html()); 
```

# visual-studio - 无法连接到 Visual Studio 中的 AWS EC2 实例

> ID：16039766
> 
> 赞同：0
> 
> 时间：2013-04-16T14:29:36.643
> 
> 标签：visual-studio, sql-server-2008, amazon-web-services, amazon-ec2

我有一个 AWS 服务器（带有 IIS 的 MS SQL SERVER EXPRESS 2008 R2），弹性 IP 为 54.214.8.111，安全组配置了 HTTP、MS SQL 和 FTP，我可以使用 rdp 文件连接到远程虚拟机amazon 在控制台中为您提供。

但是，当我尝试通过 Visual Studio 连接以测试数据库是否正常工作时，它给了我一个“用户 'dbuser' 登录失败错误。我的 SQL Server 上有一个名为 dbuser 的用户（当然在服务器端）完全访问权限等。尽管有所有指南和帮助文档，我也无法连接到服务器上的 ftp。似乎有些东西只是阻止了我的连接。我在多台计算机上尝试过同样的事情。

除了我怀疑服务器实例之外，一切似乎都配置正确。

任何人都可以帮忙吗？PS 我对 Web 开发相当陌生，这是我的第一台 AWS EC2 服务器。

[更新] 我只是尝试在不同的位置创建一个新实例，同样的事情，也许我不知道如何在 EC2 上配置 SQL Server？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-28T01:36:18.740

默认情况下，EC2 SQL 实例似乎禁用了 SQL 身份验证。

在 SQL Management Studio 中，以内置管理员帐户连接，然后转到

服务器属性>安全>

在服务器身份验证下，更改为“SQL Server 和 Windows 身份验证模式”

重启 SQL

您的本地帐户现在应该可以使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T18:43:35.907

尝试在提升模式下运行（右键单击 Visual Studio 并以管理员身份运行），解决了我最近遇到的一些问题。

# java - java swing中的图像动画点击

> ID：16039768
> 
> 赞同：4
> 
> 时间：2013-04-16T14:29:38.230
> 
> 标签：java, image, swing, jbutton, animated-gif

假设我有一个`JFrame`和一个`JButton`。`.gif`单击按钮后，我想显示动画 ( ) 图像。而另一个事件（比如`ActionEvent e`）停止在`JFrame`. 我的方法应该是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T14:56:10.480

显示第一张图片（动画帧）`JLabel`。当用户单击按钮时，启动一个 Swing`Timer`将标签的图标更改为下一帧，一旦显示所有帧就循环。当用户再次单击按钮时，停止动画。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.*;

class Chomper {

    public static void main(String[] args) throws Exception {
        final Image[] frames = {
            ImageIO.read(new URL("http://i.stack.imgur.com/XUmOD.png")),
            ImageIO.read(new URL("http://i.stack.imgur.com/zKyiD.png")),
            ImageIO.read(new URL("http://i.stack.imgur.com/4maMm.png")),
            ImageIO.read(new URL("http://i.stack.imgur.com/wn9V5.png"))
        };
        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new BorderLayout());

                final JLabel animation = new JLabel(new ImageIcon(frames[0]));
                gui.add(animation, BorderLayout.CENTER);

                ActionListener animate = new ActionListener() {

                    private int index = 0;

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        if (index<frames.length-1) {
                            index++;
                        } else {
                            index = 0;
                        }
                        animation.setIcon(new ImageIcon(frames[index]));
                    }
                };
                final Timer timer = new Timer(200,animate);

                final JToggleButton b = new JToggleButton("Start/Stop");
                ActionListener startStop = new ActionListener() {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        if (b.isSelected()) {
                            timer.start();
                        } else {
                            timer.stop();
                        }
                    }
                };
                b.addActionListener(startStop);
                gui.add(b, BorderLayout.PAGE_END);

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T15:14:17.910

我不知道如何从 gif 中获取帧/图像，但如果您可以访问它们，那么您可以使用[Animated Icon](http://tips4java.wordpress.com/2009/06/21/animated-icon/)类为您制作动画。它在幕后使用计时器来制作动画，因此您可以根据需要简单地启动/停止/暂停计时器。

# php - 在我的简单 php 登录脚本中添加一个额外的用户

> ID：16039770
> 
> 赞同：0
> 
> 时间：2013-04-16T14:29:42.353
> 
> 标签：php, login, passwords

这是我的 php 登录脚本。我在网上找到了它，它工作正常，但是......

有没有添加一个用户的解决方案？

```
<?

if ($_SERVER["PHP_AUTH_USER"] != "user1" || $_SERVER["PHP_AUTH_PW"] != "pass1")
{

    header("WWW-Authenticate: Basic realm=\"Enter username and password to proceed\"");  
    header("HTTP/1.0 401 Unauthorized");

    echo "<body>";
    echo "<div style='position:relative; margin:100px auto auto; width: 400px; height:auto; padding:20px; border:1px #ddd solid; color:#ff9900;'>Authentication failed.";
    echo "</div>";
    echo "</body>";

    die();
}    
else
{
    echo "<div style='position:fixed; left:0px; top:90px; background-color:#000;    color:#ff9900; padding:4px; z-index: 999;'>Logged in.</div>";
}
?> 
```

提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:32:26.830

（在顶部：）

```
$users = array('User1' => 'Pass1', 'User2' => 'Pass2', );

if (!isset($users[$_SERVER["PHP_AUTH_USER"]]) || $users[$_SERVER["PHP_AUTH_USER"]] != $_SERVER["PHP_AUTH_PW"])
/* ... */ 
```

它将用户数据保存在一个数组中，然后检查数据是否与条目匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:33:41.177

最好的方法是将用户添加到数组中，以保持整洁！

```
$users = array(
   'user1' => 'pass1',
   'user2' => 'pass2'
);
$user = $_SERVER["PHP_AUTH_USER"];
$pass = $_SERVER["PHP_AUTH_PW"];

if (array_key_exists($user, $users) && $users[$user] === $pass) {
    // Do your thang
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:31:58.250

```
if (($_SERVER["PHP_AUTH_USER"] == "user1" && $_SERVER["PHP_AUTH_PW"] == "pass1") ||      ($_SERVER["PHP_AUTH_USER"] == "user2" && $_SERVER["PHP_AUTH_PW"] == "pass2"))
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:34:51.737

尝试这样的事情：

```
$users = array('user1' => 'passw1',
               'user2' => 'passw2');

if (!array_key_exists($_SERVER["PHP_AUTH_USER"],$users) || $users[$_SERVER["PHP_AUTH_USER"]] != $_SERVER["PHP_AUTH_PW"])
{

    header("WWW-Authenticate: Basic realm=\"Enter username and password to proceed\"");  
    header("HTTP/1.0 401 Unauthorized");

    echo "<body>";
    echo "<div style='position:relative; margin:100px auto auto; width: 400px; height:auto; padding:20px; border:1px #ddd solid; color:#ff9900;'>Authentication failed.";
    echo "</div>";
    echo "</body>";

    die();
} 
```

基本上，您将想要拥有的用户存储在一个数组中；用户名作为数组键，用户密码作为数组值。然后检查以确保提供的用户在定义的列表中，然后检查以确保密码正确。

话虽如此; 这不是一个非常强大的登录解决方案，因此请确保您没有使用它来保护任何敏感信息。

# ios - 在 iphone 主页跳板上创建文件夹

> ID：16039772
> 
> 赞同：-9
> 
> 时间：2013-04-16T14:29:46.767
> 
> 标签：ios

我想从我的应用程序在 iPhone 弹簧板上创建文件夹。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:32:27.680

没有公共 API 可以做到这一点。

# vba - Excel VBA - 仅复制和粘贴可见表行

> ID：16039774
> 
> 赞同：7
> 
> 时间：2013-04-16T14:29:52.513
> 
> 标签：vba, excel

我试图仅将表中的可见行复制到同一工作簿中的单独工作表中。我对使用“ListObject”处理表的方法有点陌生（出于一些原因，就我的模块的其余部分而言，直接引用表是一种更好的方法）

下面是我最好的尝试，当我运行它时，我得到'运行时错误'438'' `'Sheets("Sheet8").Range("A1").Paste'`，我已经在互联网上搜索了一个小时试图找出我做错了什么，我该怎么做需要重新措辞，以便将复制的数据粘贴到另一个工作表/表格中？任何援助将不胜感激！

谢谢，

亚当

```
Private Sub CopyVisibleAreaOfTable(ByVal TableName As String)

Const FN_NAME As String = "CopyVisibleAreaOfTable"
On Error GoTo catch

    Dim TargetTable As ListObject
    Dim NumberOfAreas As Long

    Set TargetTable = Sheets("Adj1").ListObjects(TableName)

    ' Check that there are fewer than 8192 seperate areas
    With TargetTable.ListColumns(1).Range
        NumberOfAreas = .SpecialCells(xlCellTypeVisible).Areas(1).Cells.Count
        Debug.Print NumberOfAreas
    End With

    If NumberOfAreas = 0 Then
        'Do something to trigger an error message
    Else

        TargetTable.Range.SpecialCells(xlCellTypeVisible).Copy
        Sheets("Sheet8").Range("A1").Paste
        Application.CutCopyMode = False

    End If

finally:
    Exit Sub

catch:
    Call ErrorReport(FN_NAME, True, Err.Number, Err.Description, "Table Name: " & TableName)
    Resume finally

End Sub 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T14:43:54.697

将目标指定为`.Copy`方法的一部分：

```
TargetTable.Range.SpecialCells(xlCellTypeVisible).Copy _
    Destination:=Sheets("Sheet8").Range("A1") 
```

# forms - 在 ColdFusion 中填充和更新表单数据

> ID：16039776
> 
> 赞同：0
> 
> 时间：2013-04-16T14:29:54.543
> 
> 标签：forms, coldfusion

我有一个需要填充和更新的表格。表单上有几个下拉字段和输入字段需要填充，然后允许用户在必要时进行更改。我创建了查询来选择数据，然后我想用所选数据填充表单，但允许用户更改表单字段。我已经尝试使用第一个字段，它是一个下拉字段，但是我收到一个错误，说我不能嵌套两个查询。

这是我收到的错误：查询驱动的 cfoutput 标记嵌套在也具有查询属性的 cfoutput 标记内。这是不允许的。嵌套这些标签意味着您要使用分组处理。但是，只有顶级标签可以指定驱动处理的查询。

这是我的代码：

```
<cfoutput query="getinfo">
  <select name="ProgramName" id="ProgramName" style= "font-size:24px">
    <option style="font-size:24px" value = "0">--Program Name--</option>
    <cfloop query="PName">
      <option value="#ProgramName#">#ProgramName#</option>
    </cfloop>   
  </select>
</cfoutput> 
```

这是我的 getinfo 查询：

```
<cfquery name="getinfo" datasource="dbotest">
    SELECT  ProgramName, TestName
      FROM  Programs
     WHERE  ProgramID = "D219"      
</cfquery> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:25:05.940

What you've posted is valid syntax for outputting a query.

```
<cfoutput query="getinfo">
  <select name="ProgramName" id="ProgramName" style= "font-size:24px">
    <option style="font-size:24px" value = "0">--Program Name--</option>
    <cfloop query="PName">
      <option value="#ProgramName#">#ProgramName#</option>
    </cfloop>   
  </select>
</cfoutput> 
```

If your page is set up like this, then that is invalid. You can simply change `<cfoutput query="getinfo">` to be `<cfloop query="getinfo">`

```
<cfoutput>
<!--- other code --->
<cfloop query="getinfo">
  <select name="ProgramName" id="ProgramName" style= "font-size:24px">
    <option style="font-size:24px" value = "0">--Program Name--</option>
    <cfloop query="PName">
      <option value="#ProgramName#">#ProgramName#</option>
    </cfloop>   
  </select>
</cfloop>
<!--- more code --->
</cfoutput> 
```

(I know this isn't really an *answer* but should hopefully help clear things up.)

# java - 从扩展活动的 onClick 后关闭警报对话框

> ID：16039777
> 
> 赞同：0
> 
> 时间：2013-04-16T14:29:55.037
> 
> 标签：java, android, dialog, onclick, android-alertdialog

在我的主要活动中，我有一个警报对话框，单击该对话框会创建一个新意图。单击警报对话框并打开新活动时，即使我已包含 dialog.cancel(); 也无法关闭警报对话框；在我的主要活动代码中。

对话框构建器（主要活动）

```
final Builder alertDialogBuilder = new Builder(this);
      alertDialogBuilder.setTitle("Navigation");
      alertDialogBuilder.setMessage("Go to the new activity.");
      alertDialogBuilder.setNeutralButton("Okay", new OnClickListener() {
          @Override
          public void onClick(DialogInterface dialog, int which) {
           Log.d(TAG, "$$ onClick");
              dialog.cancel();
              Intent newactivity = new Intent(MAINACTIVITY.this,NEWACTIVITY.class);
              startActivity(newactivity);
          }
      });
      alertDialogBuilder.show(); 
```

单击“确定”按钮后，对话框关闭，但是当加载新活动时，对话框重新出现。新活动扩展了在其中创建对话框的活动（主活动）。

有没有办法可以从新的扩展活动中关闭警报对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:39:59.747

试试这种方式：

```
alertDialogBuilder.setPositiveButton("Okay", new OnClickListener() {
      @Override
      public void onClick(DialogInterface dialog, int which) {
       Log.d(TAG, "$$ onClick");

          Intent newactivity = new Intent(MAINACTIVITY.this,NEWACTIVITY.class);
          startActivity(newactivity);
          dialog.cancel();
      }
  });
  alertDialogBuilder.show(); 
```

祝你好运。

# php - Symfony 2：GregWare:ImageBundle 和 MAMP 出错

> ID：16039780
> 
> 赞同：0
> 
> 时间：2013-04-16T14:29:59.117
> 
> 标签：php, symfony

我尝试将 GregWare:ImageBundle 与 MAMP 一起使用。当我尝试

```
Image::open($this->file); 
```

Symfony 给了我一个

```
Warning: imagejpeg(): Invalid 2nd parameter, it must a filename or a stream in /XXX/vendor /gregwar/image-bundle/Gregwar/ImageBundle/Image.php line 979 
```

GD 和 EXIF 已正确安装。

在我的 debian 服务器中，我可以毫无问题地使用这个包。

如果我 print `$this->file`，我无法在我的查找器中找到相应的文件。我尝试了`chmod`该文件夹但没有成功。

编辑：

在我的控制器中，当我提交表单时，我会这样做。文件是文件类型的“文件”。if ($request->getMethod() == 'POST') { $form->bind($request);

```
 if ($form->isValid()) {
                            $annonce->uploadMainFile();
            $annonce->setEnable(true);
            $em = $this->get('doctrine')->getManager();
            $em->persist($annonce);
            $em->flush();
            //TODO redirect
            return $this->redirect(
                    $this->generateUrl('xxx_core_moncompte')); 
```

这是我在包含文件的主要实体中的上传功能

```
public function uploadMainFile(){

        $hCible = 205;
        $lCible = 277;
        $ratioCible = $lCible/$hCible;

        if($this->file!=null){
            $size = getimagesize($this->file);
            $haut=$size[1];
            $larg=$size[0];
            $ratio = $larg/$haut;

            if($ratio>$ratioCible){

                //Resize by height
                Image::open($this->file)
                    ->resize(null, $hCible)
                    ->save($this->file);
     (...) 
```

# android - 谷歌播放服务修订版 6 的最新 com.google.android.gms

> ID：16039788
> 
> 赞同：4
> 
> 时间：2013-04-16T14:30:24.973
> 
> 标签：android, google-maps, android-emulator, google-play-services

我正在使用 Google Play 服务修订版 5 运行我的 Android 谷歌地图应用程序，它运行良好......

我将我的 Google Play 服务从修订版 5 更新到修订版 6，现在它无法运行并产生以下警告：

```
Google Play services out of date.  Requires 3027100 but found 3025110 
```

知道在哪里可以找到满足要求的最新 com.google.android.gms.apk 文件吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T05:11:07.377

我做了同样的事情 ：（

以下是如何通过回滚来解决它：卸载 Google Play Services 6 然后在此处下载 Google Play Services 5 [http://venomvendor.blogspot.com/2012/03/android-sdk-extras-by-google-inc.html](http://venomvendor.blogspot.com/2012/03/android-sdk-extras-by-google-inc.html)和把它放在 /extras/google/google-play-services 下

仅供参考，我还需要安装

> adb install -r com.android.vending-1.apk
> 
> adb install -r com.google.android.gms-3025110-v3.0.25\ (583950-10).apk

让我的谷歌地图应用程序在我的模拟器上运行......

使用 Google Play Services 5 重建您的 apk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:39:36.473

如果您在真实设备上运行它，则需要`Google play services`通过`Google play store`. 这实际上应该自动完成，但您可以通过商店手动完成此过程来加快该过程。

如果您在“修改过的”AVD 上运行它（您是否`Google play services`手动安装）。那么您将需要安装一组新文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-22T19:58:05.413

您可以使用 adb pull，也可以使用任何类型的“终端”和“cat”命令，以及 sd 内存。

```
cd /data/app #or wherever..
cat com.google.android.gms-1.apk > /mnt/sdcard/GoogleSpywareBackupFile.apk 
```

但是，您不能只使用“cat”来安装它。但是你可能已经知道了，考虑到这个问题是如何被问到的。

# xaml - WPF - 在 XAML 中引用 XAML 元素

> ID：16039790
> 
> 赞同：2
> 
> 时间：2013-04-16T14:30:37.027
> 
> 标签：xaml, reference

我浏览了整个互联网，每个论坛，每个博客，曾经，任何地方。我现在确实包含互联网......除了最后一件事;-)。这是问题所在：我有一个 WPF DataGrid，其中定义了一个列：

```
 <tk:DataGridTemplateColumn Header="First name" Width="100" x:Name="colFirstName">
                        <tk:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox x:Name="tbFirstName" Validation.ErrorTemplate="{DynamicResource errorTemplateYourDetailsGrid}">
                                    <TextBox.Text>
                                        <Binding Path="Firstname" UpdateSourceTrigger="PropertyChanged" NotifyOnValidationError="True">
                                            <Binding.ValidationRules>
                                                <val:RequiredValidationRule ErrorMessage="Invalid or missing first name" ValidatesOnTargetUpdated="True"></val:RequiredValidationRule>
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox.Text>
                                </TextBox>
                            </DataTemplate>
                        </tk:DataGridTemplateColumn.CellTemplate>
                    </tk:DataGridTemplateColumn> 
```

如您所见，我定义了一个名为 errorTemplateYourDetailsGrid 的验证模板。

该页面有一个继续按钮，我想禁用该按钮，直到此网格中的所有字段都有效：

```
 <Button x:Name="btnNext"  HorizontalAlignment="Right" DockPanel.Dock="Right" Content="Continue" Command="{Binding YourDetailsNextCommand}" >
                    <Button.Style>
                        <Style TargetType="Button"  BasedOn="{StaticResource BtnContinue}">
                            <Setter Property="IsEnabled" Value="false" />
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding ElementName=tbFirstName, Path=(Validation.HasError)}" Value="false" />
                                        <Condition Binding="{Binding ElementName=tbSurname, Path=(Validation.HasError)}"    Value="false" />
                                      ...etc 
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="IsEnabled" Value="true" />
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button> 
```

一位同事使用基于表单的直接布局（不使用数据网格）使这种事情正常工作。所以我猜我需要一些语法来引用 DataGrid 列中单元格中的 TextBox，以便触发触发器。简单地使用 ElementName 是行不通的。当您在这些字段中输入文本时，即使验证模板按预期消失，该按钮仍处于禁用状态。

我正在使用 MVVM，因此任何基于代码的解决方案都不是一种选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T07:24:04.673

查看这些文章，看看它们是否可以帮助您找到数据模板元素：

[如何：查找 DataTemplate 生成的元素](http://msdn.microsoft.com/en-IN/library/bb613579.aspx)

[C#/WPF：获取 DataTemplate 中元素的绑定路径](https://stackoverflow.com/questions/1298274/c-wpf-get-binding-path-of-an-element-in-a-datatemplate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T07:15:05.500

执行验证的 MVVM 方法是使用`INotifyDataErrorInfo`（或者`IDataErrorInfo`如果您使用的是 .NET 4.0 或更低版本），因此您不会在 XAML 中定义验证逻辑，而是在模型和视图模型类中定义。

一旦实现它，您将有一个中心位置来查询错误，并且您可以将按钮的触发器绑定到视图模型的`INotifyDataErrorInfo.HasErrors`属性。

# java - 您可以在不使应用全屏显示的情况下删除系统栏（返回、主页、最近使用的应用），以便仍然可以访问通知栏吗？(4.x)

> ID：16039799
> 
> 赞同：2
> 
> 时间：2013-04-16T14:30:53.500
> 
> 标签：java, android, android-notifications, android-notification-bar

创建将运行*自定义版本的 Android (4.x)的**硬件设备*。将包含额外的功能，但我们希望尽可能多地使用现有的 Android。

 *设备一开始只会运行一个特定的应用程序，然后计划在屏幕底部创建我们自己的自定义系统栏/操作栏和片段。但是，理想情况下，我们希望通知栏保持在屏幕顶部，并具有所有下拉功能。

我知道目前有两种机制可以解决这个问题：

*   临时绝对全屏隐藏系统栏，直到屏幕被触摸。
*   系统栏变暗，系统栏图标淡化为黑色，但仍占据相同空间并在按下时返回。

任何帮助将非常感激，

干杯

编辑：我知道可以通过更改源代码来完成，但不幸的是，这在时间范围内是不可能的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T14:09:56.500

> 我知道您可以通过将应用程序设置为全屏来摆脱系统栏和通知栏，如果我们可以拥有它加上通知栏，那就太好了。

你实际上不能。您有一个`SYSTEM_UI_FLAG_HIDE_NAVIGATION`隐藏它，但只要屏幕上有任何交互，该栏就会重新出现（通知栏也会随之重新出现）。

看到您希望完全替换系统栏，您将不得不在源代码级别执行此操作。您只能在使用 SDK 的交互不活动期间隐藏它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T15:14:16.717

您必须创建自己的 SystemUI 应用程序版本，并使用该版本代替默认版本构建 Android： [https ://github.com/android/platform_frameworks_base/tree/master/packages/SystemUI](https://github.com/android/platform_frameworks_base/tree/master/packages/SystemUI)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T15:36:56.780

如果我理解正确，您可以在清单 xml 中添加它：

```
<activity
        ...
        android:theme="@android:style/Theme.NoTitleBar" > 
        ...
</activity> 
```

这将保留通知栏而不会全屏显示。*

# emacs - emacs 不会重新绘制缓冲区（Windows 7）

> ID：16039813
> 
> 赞同：6
> 
> 时间：2013-04-16T14:31:37.813
> 
> 标签：emacs, emacsw32

我在 64 位 Windows 7 上使用 GNU Emacs 24.2.1。有时 emacs 窗口变为空白。这通常发生在将焦点从另一个窗口切换回 emacs 时。获取内容的唯一方法是切换到另一个缓冲区然后返回。没有其他程序会这样。我在具有类似硬件和操作系统的家用 PC 上没有这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-26T14:38:56.890

我将以下代码添加到我的代码中，`init.el`这样当它发生在我身上时（在 24.4 中），我只需要按`F5`：

```
(global-set-key (kbd "<f5>") #'redraw-display) 
```

# java - Andengine，平铺纹理大小需要是2的幂？

> ID：16039814
> 
> 赞同：0
> 
> 时间：2013-04-16T14:31:46.287
> 
> 标签：java, android, opengl-es, opengl-es-2.0, andengine

OpenGL 中的普通纹理大小应该是 2 的幂。好吧。但是如何使用平铺纹理。

我们需要将 2 的幂应用于整个纹理还是此图像内的单个图块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:05:56.843

简短而直接的答案：不，如果您使用 opengl >= 2.0，引擎平铺纹理不需要是 2 的幂。

# sharepoint-2007 - 如何使列可编辑或只读？

> ID：16039821
> 
> 赞同：0
> 
> 时间：2013-04-16T14:31:59.203
> 
> 标签：sharepoint-2007

sharepoint 2007 中是否有办法根据访问它的用户角色将列设为只读或可编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:19:06.677

我找到了这个链接，您可以在其中获取此人的用户组 [http://morshemesh.blogspot.ru/2012/07/getting-all-groups-of-user-with.html](http://morshemesh.blogspot.ru/2012/07/getting-all-groups-of-user-with.html)

那么您只需根据您希望禁用它们的用户组禁用其他字段。

这将利用 SPServices 和 JQuery。

# php - 我们如何更新学生选择？

> ID：16039824
> 
> 赞同：1
> 
> 时间：2013-04-16T14:32:06.700
> 
> 标签：php, mongodb

我有一个带有两个集合的数据库。学生收藏有一个名为“student_bookselections”的字段，用于保存书籍的 ID。此字段的内容经常会更改或更新。

1.  我们如何向 student_bookselections 添加或删除 id？
2.  这是关联收藏的一种不错的方式吗？

学生收藏

```
 array(
                "student_id" => 4,
                "student_fullname" => $studentfullname,
                "student_bookselections" => 'id1,  id34, id788 ... ... id4'

                ) 
```

书籍收藏

```
 array(
                "book_id" => 4354,
                "book_title" => $title,
                "book_author" => $author,

                ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:39:01.307

您最好使用第三张表将学生与书籍联系起来，您当前的实现未标准化。

```
Users(
    "student_id" => 4,
    "student_fullname" => $studentfullname
 )

Books(
    "book_id" => 4,
    "book_title" => $title,
    "book_author" => $author
 )

Selections(
    "selection_id" => 4,
    "student_id" => $studentid,
    "book_id" => $bookid
 ) 
```

然后，您可以使用外键定义关系以链接表，更重要的是，每一行都与一条信息相关。如果您想知道某个学生的所有书籍选择

```
mysql_query("SELECT * FROM Selections WHERE student_id = $student_id"); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:41:54.173

**更新**

```
<?php

  $mongo = new Mongo();
  $db = $mongo->selectDB("Your_Database");

  $student = $db->students;

  $update = array("$set" => array("student_bookselections" => "your ids"));
  $where = array("student_id" => 4);
  $student->update($where,$update);

?> 
```

**插入**

```
<?php

  $mongo = new Mongo();
  $db = $mongo->selectDB("Your_Database");

  $student = $db->students;

  $insert = array("student_fullname" => "Stefan", "student_bookselections" => "your ids" );
  $student->insert($insert);

?> 
```

**去除**

```
<?php

  $mongo = new Mongo();
  $db = $mongo->selectDB("Your_Database");

  $student = $db->students;

  $student->remove(array("ID" => 4));

?> 
```

**关系** （见 Crhis 的帖子）

```
Users(
    "student_id" => 4,
    "student_fullname" => $studentfullname
 )

Books(
    "book_id" => 4,
    "book_title" => $title,
    "book_author" => $author
 )

Selections(
    "selection_id" => 4,
    "student_id" => $studentid,
    "book_id" => $bookid
 ) 
```

**选择这个关系**

```
<?php

  $mongo = new Mongo();
  $db = $mongo->selectDB("Your_Database");

  $selection = $db->selections;

  $res = $student->find(array("student_id" => $student_id));

?> 
```

# javascript - 如何检测单击喜欢按钮时出现的facebook关闭按钮的onclick

> ID：16039836
> 
> 赞同：1
> 
> 时间：2013-04-16T14:32:38.193
> 
> 标签：javascript, jquery, facebook, api, facebook-graph-api

在 XFBML 版本的点赞按钮中，当您单击点赞按钮时，会出现一个评论框，您可以在其中发布评论以及点赞的故事。这是一个带有“发布到 facebook”和“关闭”按钮的对话框。我想检测是否单击了关闭按钮。

我检查了出现的对话框上的按钮，发现了“匹配的 CSS 规则”并找到了这些类： `.uiButtonText, .uiButton input`

我检查时的按钮 html 是：

```
<label class="_5v7 uiButton" for="u_0_6">
<input value="Close" type="submit" id="u_0_6">
</label> 
```

现在尝试以这种方式检测任何这些类和 id 上的 onclick：

```
<script type="text/javascript">
$(document).ready(function(){
   $(document).on('click', '._5v7 uiButton', function(){
   alert('test');                                       
}); 
});
</script> 
```

或者

```
<script type="text/javascript">
$(document).ready(function(){
   $(document).on('click', '.uiButton input', function(){
   alert('test');                                       
}); 
});
</script> 
```

或者

```
<script type="text/javascript">
$(document).ready(function(){
   $(document).on('click', '#u_0_6', function(){
   alert('test');                                       
}); 
});
</script> 
```

都什么都不做。还尝试检测这样的输入的 onlclick，但它也什么都不做：

```
<script type="text/javascript">
$(document).ready(function(){
   $(document).on('click', 'input', function(){
   alert('test');                                       
}); 
});
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:38:15.400

您可以尝试使用 Facebook Javascript SDK 和事件订阅。 [https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

我不知道您是否可以订阅其他未记录的事件。Facebook 确实以不记录某些内容而闻名。

# bash - 有没有办法将大文件分成随机大小的块？

> ID：16039844
> 
> 赞同：1
> 
> 时间：2013-04-16T14:33:08.790
> 
> 标签：bash, shell

我知道您可以使用 拆分文件`split`，但出于测试目的，我想将一个大文件拆分为大小不同的块。这可能吗？

或者，如果上述文件是 zip，有没有办法将其拆分为大小不等的卷？

欢迎任何建议！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T17:01:38.500

因此，您要问的一般问题是：如何计算`N`总和为 的随机整数`S`？具体来说，`S`是您的文件的大小，以及`N`您想要将其分成多少个较小的文件。

例如，假设您要将文件拆分为 4 个部分。如果`a`, `b`, `c`, 和`d`是四个随机数，则：

```
a + b + c + d = X
a/X + b/X + c/X + d/X = 1
S*a/X + S*b/X + S*c/X + S*d/X = S 
```

给我们四个随机数，总和为`S`，文件的大小。

这意味着您要编写一个脚本：

1.  计算`N`随机数（任何随机数）。
2.  计算`X`为这些随机数的总和。
3.  将每个随机数乘以`S/X`（并确保留下大于 0 且总和为 S 的整数）
4.  使用您想要的任何工具，使用生成的随机数作为大小将原始文件拆分为多个部分。

这对于 shell 脚本来说有点多，但在 Perl 之类的东西中会非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T16:28:10.327

因为你只用 shell 标记了这个问题。所以我想你只想用 shell 脚本和那些常见的 linux 命令/工具来处理它。

据我所知，没有现有的工具/cmd可以随机分割文件。要拆分文件，我们可以考虑使用`split, dd`

这两种工具都支持诸如拆分文件应该有多大（大小）或您要拆分多少文件之类的选项。比方说，我们首先使用 dd/split 将您的文件分成 500 个部分，每个文件具有相同的大小。所以我们有：

```
foo.zip.001
foo.zip.002
foo.zip.003
...
foo.zip.500 
```

然后我们将此文件列表作为输入，进行合并（cat）。这一步可以通过 awk 或 shell 脚本来完成。

例如，我们可以构建一组`cat`语句，例如：

```
cat foo.zip.001, foo.zip.002 > part1
cat foo.zip.003, foo.zip.004, foo.zip.005 > part2
cat foo.zip.006, foo.zip.007, foo.zip.008, foo.zip.009 > part3
.... 
```

运行生成的 cat 语句，你得到了 final `part1-n`，每个部分都有不同的大小。

例如像：

```
kent$  seq  -f'foo.zip.%g' 20|awk 'BEGIN{i=k=2}NR<i{s=s sprintf ("%s,",$0);next}{k++;i=(NR+k);print "cat "s$0" >part"k-2;s="" }'                                            
cat foo.zip.1,foo.zip.2 >part1
cat foo.zip.3,foo.zip.4,foo.zip.5 >part2
cat foo.zip.6,foo.zip.7,foo.zip.8,foo.zip.9 >part3
cat foo.zip.10,foo.zip.11,foo.zip.12,foo.zip.13,foo.zip.14 >part4
cat foo.zip.15,foo.zip.16,foo.zip.17,foo.zip.18,foo.zip.19,foo.zip.20 >part5 
```

但是您必须自己测试的性能如何……至少这应该满足您的要求。

# ios - UITableViewCellContentView 高度怎么可能与 heightForRowAtIndexPath 不同：

> ID：16039845
> 
> 赞同：21
> 
> 时间：2013-04-16T14:33:11.313
> 
> 标签：ios, uitableview, autolayout, nslayoutconstraint

我的 UITableView 遇到了一个非常奇怪的问题。我有一些不同的单元格要显示在类似新闻源的表格视图上。

重用后我的单元格有问题。该单元格包含两个图像、两个标签和一个带有分享/喜欢/评论按钮的视图。我会试着画它，但我不确定它会不会漂亮：

```
-------------------------------------------------
|       |   __    ____________________________  |
|       |  |_2|  |                            | |
|       |        |              3             | |
|       |        |                            | |
|   1   |        |____________________________| |
|       |                                       |
|       |_______________________________________|
|       |                                       |
|       |                  4                    |
|_______|_______________________________________|
|                                               |
|                       5                       |
|_______________________________________________|

1 : objectImage
2 : subjectImage
3 : titleLabel
4 : commentLabel
5 : actionsView 
```

我的限制是：

```
"H:|-0-[objectImage(60)]-7-[subjectImage(30)]-7-[titleLabel]-7-|"
"H:|-0-[objectImage(60)]-0-[commentLabel]-0-|"
"H:|-0-[actionsView]-0-|"
"V:|-0-[objectImage(>=35)]-0-[actionsView(44)]-0-|"
"V:|-7-[subjectImage(30)]"
"V:|-7-[titleLabel(>=46)]-7-[commentLabel(>=35)]-0-[actionsView(44)]-0-|" 
```

每次绘制单元格时，我都会更改此约束：

```
"V:[commentLabel(%0.2f)]" 
```

细胞第一次完美显示。

但是，我遇到的问题是，在某个时间点，经过一些重用（我不能每次都重现它），应用程序由于约束问题而崩溃。这是一个例外：

```
"<NSLayoutConstraint:0x205a75b0 V:[UILabel:0x1ef31430(105)]>",
"<NSLayoutConstraint:0x1ef34440 V:[UILabel:0x1ef31430]-(0)-[UIView:0x1ef2fe50]>",
"<NSLayoutConstraint:0x1ef34380 V:[UILabel:0x1ef31250]-(7)-[UILabel:0x1ef31430]>",
"<NSLayoutConstraint:0x1ef33900 V:|-(7)-[UILabel:0x1ef31250]   (Names: '|':UITableViewCellContentView:0x1ef2bf50 )>",
"<NSLayoutConstraint:0x1ef34340 V:[UILabel:0x1ef31250(>=46)]>",
"<NSLayoutConstraint:0x1ef33210 V:[UIView:0x1ef2fe50]-(0)-|   (Names: '|':UITableViewCellContentView:0x1ef2bf50 )>",
"<NSLayoutConstraint:0x1ef331d0 V:[UIView:0x1ef2fe50(44)]>",
"<NSAutoresizingMaskLayoutConstraint:0x1ef36f90 h=--& v=--& V:[UITableViewCellContentView:0x1ef2bf50(147)]>"

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1ef34380 V:[UILabel:0x1ef31250]-(7)-[UILabel:0x1ef31430]> 
```

问题是约束 [UITableViewCellContentView:0x1ef2bf50(147)] 不正确。

奇怪的是 heightForRowAtIndexPath: 返回正确的值，即 217。

而我不明白的是 UITableViewCell 的高度是正确的！

```
(lldb) po 0x1ef2bf50
$0 = 519225168 <UITableViewCellContentView: 0x1ef2bf50; frame = (0 0; 320 147); gestureRecognizers = <NSArray: 0x1ef30a20>; layer = <CALayer: 0x1ef2a3d0>>
(lldb) po [0x1ef2bf50 superview]
$1 = 0x1ef30e40 <NewsSubjectCommentCell: 0x1ef30e40; baseClass = UITableViewCell; frame = (0 1055; 320 217); hidden = YES; autoresize = W; layer = <CALayer: 0x1ef25e10>> 
```

所以我不明白 UITableViewCellContentView 的高度约束怎么可能是 147，是另一个同类型单元格的高度，但是应该改成 209 吧？

因此，如果您对如何发生这种情况有任何见解（也许我做错了什么），我会很高兴。

谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-13T16:31:13.067

我在这里找到了答案：[UITableViewCell 中 iOS7 上的自动布局约束问题](https://stackoverflow.com/questions/19132908/auto-layout-constraints-issue-on-ios7-in-uitableviewcell)

我们只需要将 contentView 的 AutoresizingMask 设置为 UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth 并...问题解决了！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-23T08:59:56.080

您可以尝试将（/某些）高度设置为较低的优先级（例如@900）。我有一个类似的问题（我的 UITableViewCellContentView 太小，无法满足约束）。在我降低了“错误”高度的优先级后，它在预期的高度上很好地布置了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T17:17:01.663

You have to turn off autoresizing conversion for the view that contains your constraints if you add your constraints with code or visual language:

```
 [self.someView setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

This prevents the `[UITableViewCellContentView:0x1ef2bf50(147)]` constraint from being created.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-10T09:42:23.083

在 cellForRowAtIndexPath 中，您从 tableview 请求一个单元格。您获得的单元格将是一个新创建的单元格（大小为 320,44）或已出列并发送 prepareForReuse 消息的单元格（无论它*以前*的大小）。当您将代码 NSLayoutConstraints 应用于 contentView 时，它们会在单元格自身适合所提供的 tableview 空间*之前被解析。*这毫无意义，但绝对是我观察的结论。

所以，在我的例子中，我得到了高度为 44 的新单元格，但我的一个限制是固定高度为 48。这会不断抛出异常并使调试变得痛苦。当我在 cellForRowAtIndexPath 中准备单元格时，我所做的只是将单元格的框架设置为正确的高度（如果您在水平维度上遇到问题，我想是宽度）。

```
UITableViewCell *cell = [tableview dequeueReusableCellWithIdentifier:CellIdentifier];
if(cell==nil)
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
// If the cell is new its frame will be (0,0,320,44)
cell.frame = CGRectMake(0,0,tableview.frame.size.width,calculatedHeightRequiredForLayout);
[cell.contentView addConstraints:constraints]; 
```

单元格会在它显示在表格视图中之前自动将其自身调整为正确的尺寸，因此您不会引起任何问题，但是您的布局约束将被应用而不会被 iOS '需要破坏'......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-21T06:33:53.040

我曾经为类似的事情而苦苦挣扎。尝试了无数的解决方案。没有任何效果。然后我注意到我不小心在设计器中创建了一个单元格`UICollectionViewCell`而不是`UITableViewCell`.
以防万一有人会经历同样的痛苦，也要检查一下

# android - 根据先前的微调器自动填充微调器 - android

> ID：16039847
> 
> 赞同：2
> 
> 时间：2013-04-16T14:33:14.570
> 
> 标签：android, arrays, spinner

到目前为止我有这个代码。模型微调器会根据用户为制造商选择的内容自动填充。（对于下面的代码，我只为 BMW 设置了它）。有没有办法根据制造商和型号填充第三个微调器（颜色）。

因此，如果您在第一个微调器上选择 BMW，然后为第二个微调器选择 M3 coupe，则第三个微调器将显示 M3_Color Array 中的所有选项。

```
 import android.app.Activity;
  import android.os.Bundle;
  import android.view.View;
  import android.widget.AdapterView;
  import android.widget.AdapterView.OnItemSelectedListener;
  import android.widget.ArrayAdapter;
  import android.widget.Spinner;

  public class MainActivity extends Activity implements OnItemSelectedListener  {

  private String[] Manufacture  {    "Ford", 
                                    "BMW", 
                                    "Nissan", 
                                    "Toyota", 
                                    "Chevy", 
                              };

  private String[] BMW_Model = { "128i Coupe",
                             "M3 Coupe", 
                             "M5 Sedan",
                             "640i Gran Coupe",
                             "335i Coupe",
                              };

  private String[] M3_Color = { "Jerez Black Metallic",
                             "Melbourne Red Metallic", 
                             "Mineral White Metallic",
                             "Le Mans Blue Metallic",
                             };

        Spinner spinnerManufacture, spinnerModel, spinnerColor;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

    spinnerManufacture = (Spinner) findViewById(R.id.manufacture_spinner);

     ArrayAdapter<String> MaufactureAdapter = new ArrayAdapter<String> (this,    android.R.layout.simple_spinner_item,Manufacture);

       MaufactureAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerManufacture.setAdapter(MaufactureAdapter);

    spinnerManufacture.setOnItemSelectedListener(this);

    }
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position,long id) {
        // TODO Auto-generated method stub
        {
            if(parent.getId() == R.id.maufacture_spinner && position == 1)
            {
                spinnerModel = (Spinner) findViewById(R.id.model_spinner);
                ArrayAdapter<String> ModelAdapter = new ArrayAdapter<String> (this, android.R.layout.simple_spinner_item, BMW_Model);
                ModelAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                spinnerModel.setAdapter(ModelAdapter);

                 if(parent.getId() == R.id.model_spinner)
                 {
                 String[] Color;
                 if(spinnerMaufacture.getSelectedItem().toString.equals("BMW"))
                 {
                      if(spinnerModel.getSelectedItem().toString.equals("M3 Coupe))
                    {
                    Color = M3_Color
                    }
                }

                    spinnerColor = (Spinner) findViewById(R.id.color_spinner);
                    ArrayAdapter<String> ColorAdapter = new ArrayAdapter<String> (this, android.R.layout.simple_spinner_item, M3_Color);
                    ColorAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                    spinnerColor.setAdapter(ColorAdapter);
                }
            }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:00:59.160

您需要移到`if(parent.getId() == R.id.model_spinner)`外面`if(parent.getId() == R.id.maufacture_spinner`然后确保并调用`spinnerModel.setOnItemSelectedListener(this)`onCreate，为此您需要`spinnerModel = (Spinner) findViewById(R.id.model_spinner)`进入您的 on Create，我建议您对所有视图执行相同的操作，这样您就不会在`findViewById`每次选择微调器项目时调用。

编辑：

```
Spinner spinnerManufacture, spinnerModel, spinnerColor;
private ArrayAdapter<String> modelAdapter;
private ArrayAdapter<String> maufactureAdapter;
private ArrayAdapter<String> colorAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    spinnerManufacture = (Spinner) findViewById(R.id.manufacture_spinner);
    spinnerModel = (Spinner) findViewById(R.id.model_spinner);
    spinnerColor = (Spinner) findViewById(R.id.color_spinner);

    maufactureAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, Manufacture);
    modelAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item);
    colorAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item);

    maufactureAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    modelAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    colorAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    spinnerColor.setAdapter(colorAdapter);
    spinnerManufacture.setAdapter(maufactureAdapter);
    spinnerModel.setAdapter(modelAdapter);

    spinnerManufacture.setOnItemSelectedListener(this);
    spinnerModel.setOnItemSelectedListener(this);
    spinnerColor.setOnItemSelectedListener(this);

}

@Override
public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    if (parent.getId() == R.id.maufacture_spinner) {
        String[] model;
        if (spinnerManufacture.getSelectedItem().toString().equals("BMW")){
            model = BMW_Model;
        } else {
            model = new String[] {"not sure what model list to use"};
        }
        modelAdapter.clear();
        modelAdapter.addAll(model);
    }
    if (parent.getId() == R.id.model_spinner) {
        String[] Color;
        if (spinnerModel.getSelectedItem().toString().equals("M3 Coupe")) {
            Color = M3_Color;
        } else if (spinnerModel.getSelectedItem().toString().equals("M5 Sedan")) {
            Color = M5_Color;
        } else {
            Color = new String[] { "not sure what color list to use" };
        }
        colorAdapter.clear();
        colorAdapter.addAll(Color);
    }
} 
```

这是我建议你尝试的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:55:39.057

只需根据选择的内容构建字符串，如下所示。这会将颜色列表设置为选择 BMW 和 M3 Coupe 的 M3_Color，以及选择 BMW 和 M5 Sedan 时的 M5_Color。这需要对所有可能的组合进行。

```
 if(parent.getId() == R.id.model_spinner)
        {
                String[] Color = new String[];
                if(spinnerManufacture.getSelectedItem().toString().equals("BMW"))
                {

                     if(spinnerModel.getSelectedItem().toString().equals("M3 Coupe"))
                     {
                        Color = M3_Color;
                     }
                     else if(spinnerModel.getSelectedItem().toString().equals("M5 Sedan"))
                     {
                        Color = M5_Color;
                     }
                }
                spinnerColor = (Spinner) findViewById(R.id.color_spinner);
                ArrayAdapter<String> ColorAdapter = new ArrayAdapter<String> (this, android.R.layout.simple_spinner_item, Color);
                ColorAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                spinnerColor.setAdapter(ColorAdapter);
        } 
```

# list - grails 列表和 createCriteria()

> ID：16039849
> 
> 赞同：0
> 
> 时间：2013-04-16T14:33:17.193
> 
> 标签：list, search, grails, createcriteria

我有一个 grails web 应用程序的列表功能。此列表将根据某些搜索条件填充表格。我使用 hibernate createCriteria 来尝试实现这一点。

在这种情况下，他们可以通过 2 个不同的关键特征进行搜索。用户名和用户编号。

我唯一的问题是尝试定制函数，以便如果它找到一个空值，它将提示用户其中一个值为空。用户名必须有一个用户编号。如果由于某种原因 userNumber 出现 null 那么它需要提示用户。或者如果没有找到用户名和userNumber的组合，也会提示用户。

这是我的带有搜索条件的列表功能。底部的 println 用于调试，并显示了我想要做什么。

```
def list(params) {
//TODO STILL NOT WORKING RIGHT  
def userSearchCri = User.createCriteria()

    def userNumber = params.searchUserNumber
    def username = params.searchUsername
    uerSearchCri = User.createCriteria()

    def userList = userSearchCri.list() {

        eq('username', username)
        eq('userNumber', userNumber)
    }

    System.out.println("Search: " + userList.userNumber)
    if(userList.userNumber == "null"){
        System.out.println("OH NO! The Users Number is = " + userList.userNumber + " DO SOMETHING!")
    }

    [userInstanceList: userList]
    } 
```

Iv 尝试了 createCriteria 函数的不同组合。像 isNotNull、ilike 等等……我开始认为我不能用 createCritera 做到这一点。这是我用于 createCriteria [http://grails.org/doc/2.2.1/ref/Domain%20Classes/createCriteria.html](http://grails.org/doc/2.2.1/ref/Domain%20Classes/createCriteria.html)的源代码。

如果有人知道我如何能够使用搜索条件或其他方法来实现我的目标。我将不胜感激一些建议。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T14:54:59.250

需要查看的各种关键点：

1.  首先，验证ans/or `params`是否通过，ans 向用户发送回消息以提供有效信息。通过这种方式，您正在消除用户输入错误的选项。`userName``userNumber`
2.  使用 Criteria 返回域对象列表。您必须遍历列表才能获得`userName/userNumber`.
3.  一旦你有一个有效的用户列表，你应该能够`userName/userNumber`相应地验证每个用户对象。

这是一个示例：

```
def list(params) {
    def userNumber = params.searchUserNumber
    def username = params.searchUsername

    //Validate whether params are NULL or valid. Send back error message to user if validation fails
    validateParams()
    uerSearchCri = User.createCriteria()

    def userList = userSearchCri.list() {
        or{
            eq('username', username)
            eq('userNumber', userNumber)
        }
    }

    if(userList){
        userList.each{user->
            if(!user.userName || !user.userNumber){
                //Send error back if needed 
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:51:27.363

数据库通常将空值作为不匹配算术运算（例如'='/eq）的特殊情况处理。因此，在您的情况下，我将做出一些假设，如果我错了，您可以纠正：

1.  用户名是一个可为空的字段
2.  userNumber 是一个可为空的字段
3.  用户必须至少有一个用户名或 userNumber（有点奇怪的数据模型，但让我们继续吧）

在这种情况下，您可以做的是`or`在您的标准中使用一个条件，然后在获得结果后测试空值：

```
def userList = userSearchCri.list() {
    or{
      eq('username', username)
      eq('userNumber', userNumber)
    }
} 
```

*   如果您没有得到任何结果，则找不到该用户。
*   否则测试 null 用户名或 userNumber 并相应地提示用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:53:48.407

您可以在条件中包含条件。另外我认为您只需要一个结果（用户名和用户编号是唯一的？），因此您可以使用`get()`而不是`list()`

```
def user = userSearch.get {
  if(params.username) {
    eq('username',params.username)
  }

  if(params.userNumber) {
    eq('userNumber',params.userNumber)
  }
} 
```

# autohotkey - 脚本打开文档但不使用热键

> ID：16039850
> 
> 赞同：0
> 
> 时间：2013-04-16T14:33:18.250
> 
> 标签：autohotkey

我正在创建一个脚本来打开和运行一个没有帮助文件但带有一个巨大的 PDF 手册的程​​序。没有办法从程序中打开它，所以我设置了一个命令来打开它。该命令在自行运行时会打开 PDF，但是当我分配热键时，它不起作用。我错过了哪些非常基本的信息？

谢谢，艾伦

```
SetTitleMatchMode, 2
runwait C:\Program Files\FontLab\TypeTool3\TTool3.exe, , max
IfWinExist TypeTool 3
    Return
ExitApp

Return

#ifWinActive, TypeTool 3

  $wheeldown::wheelup

  $wheelup::wheeldown

  F1::
    Run, C:\Documents and Settings\Ellen\My Documents\TypeTool3WinMan.pdf
  Return

#ifWinActive 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:43:00.027

您的#IfWinActive 语句之前有返回吗？如果不是，那么在启动期间脚本将运行每一行，直到它到达第一个 Return，这对你来说似乎一直到最后。所以也在你的 Run, C:..... 命令之后放置一个 return

哦.. 你确定那个奇怪的长 ahk_class 吗？这可能是正确的，但看起来很奇怪，如果这只是一点点关闭，您的热键将永远无法工作，因此请先尝试将 #IfWinActive 行注释掉。

```
SetTitleMatchMode, 2
;All the stuff you want to run at startup....
Return
#ifWinActive, (part of) the window name here e.g. Excel

  $wheeldown::wheelup

  $wheelup::wheeldown

  F1::
    Run, C:\Documents and Settings\Ellen\My Documents\TypeTool3WinMan.pdf
  Return
#ifWinActive 
```

# cython - Bakeoff 第 1 部分 Python vs Cython vs Cython 类型化内存视图：Gibbs Sampling 的 LDA

> ID：16039851
> 
> 赞同：3
> 
> 时间：2013-04-16T14:33:19.697
> 
> 标签：cython, montecarlo, lda

**更新：内存视图获胜。** Cython 使用类型化的内存视图：0.0253449

特别感谢 lothario 指出了几个关键的变化。

荒谬的。当然**现在的问题是**，似乎不能对它们做很多算术（求和和乘法）。 [受Python (numpy) 实现主题模型](https://stackoverflow.com/questions/10519690/implementing-topic-model-with-python-numpy) 启发的**原始帖子**，速度非常慢。我认为对它进行cythonize是个好主意。但是我只能弄清楚如何将 cython 的时间减半。这里有明显的数组操作没有被优化 - 一些想法和建议将是最受欢迎的。我一直想和 cython 一起玩，这似乎是一个好机会！

对于 15 个文档，每个文档大约 300 个单词，python：39.6903322834 cython：19.2733114806 Cython using typed memoryviews：0.547822975

我特别想使用 nogil，因此可以进一步加快速度：1）使用内存视图，将 nogil 添加到循环中是否有帮助？2）我有一个文档列表，每个文档都由一个数字数组表示。什么是最适合我使用的 C 对象？nogil 不适用于 python 对象。目前我将此作为数组列表。

我不是 C 爱好者，但欢迎任何进一步的优化建议。

来自朋友的 Java 实现，1000 个文档，每个文档 300 字，3 秒。

**lda_pyx Cython 代码**

```
import numpy as np
cimport numpy as np
cimport cython
DTYPE = np.int
ctypedef np.int_t DTYPE_t

cdef class LDA:
    cdef int iteration, M
    cdef int[:] docSizes
    cdef double[:, ::1] n_k_w ,n_m_k
    #cdef
    cdef double[:] n_k
    cdef list k_m_n
    cdef list numbered_docs

    #def __init__(self,int iteration,int M,  np.ndarray[np.double_t, ndim=2] n_k_w ,np.ndarray[np.double_t, ndim=2]  n_m_k, np.ndarray[np.double_t, ndim=1] n_k,np.ndarray[np.int_t, ndim=1] docSizes, list numbered_docs, list k_m_n):
    def __init__(self,int iteration,int M,  double[:, ::1] n_k_w ,double[:, ::1] n_m_k, double[:] n_k, int[:] docSizes, list numbered_docs, list k_m_n):
        self.iteration = iteration
        self.M = M
        self.n_k_w = n_k_w
        self.n_m_k = n_m_k
        self.n_k = n_k
        self.k_m_n = k_m_n
        self.numbered_docs = numbered_docs
        self.docSizes = docSizes

    @cython.boundscheck(False)
    @cython.wraparound(False)
    cdef int _sample(self) :
        #cdef np.ndarray[np.double_t, ndim=2, mode="c"] n_k_w = self.n_k_w
        #cdef np.ndarray[np.double_t, ndim=2, mode="c"]  n_m_k = self.n_m_k
        #cdef np.ndarray[np.double_t, ndim=1, mode="c"] n_k = self.n_k
        cdef double[:, ::1] n_k_w = self.n_k_w
        cdef double[:] n_k = self.n_k
        cdef double[:, ::1]  n_m_k = self.n_m_k
        #cdef np.ndarray[np.int_t, ndim=1, mode="c"] docSizes = self.docSizes
        cdef int[:] docSizes = self.docSizes
        cdef  int m , n, t , k ,new_k
        #cdef np.ndarray[np.int_t, ndim=1, mode="c"] doc
        cdef int[:] doc

        for m in xrange(self.M):
            doc = self.numbered_docs[m]
            for n in xrange(docSizes[m]):

                t = doc[n]

                # discount for n-th word t with topic z
                k = self.k_m_n[m][n]
                #print k

                n_m_k[m,k] -= 1
                n_k_w[k,t] -= 1
                n_k[k] -= 1
                #print "ok"
                # sampling topic new_z for t
                #p_k = n_k_w[:, t] * n_m_k[m][k] / n_k
                new_k = 1
                #np.random.multinomial(1, p_z / p_z.sum()).argmax()

                # set z the new topic and increment counters
                self.k_m_n[m][n] = new_k
                #print n_m_k[m, new_k] ,"after"
                n_m_k[m, new_k] += 1
                #print n_m_k[m, new_k] ,"after"
                n_k_w[new_k][t] += 1
                n_k[new_k] += 1
        #print self.n_k_w ,"before"
        self.n_k_w = n_k_w
        #print self.n_k_w ,"after"
        self.n_m_k = n_m_k
        self.n_k = n_k
        #self.k_m_n = k_m_n

        return 1

    @cython.boundscheck(False)
    @cython.wraparound(False)
    cdef int _iterate(self) :

        while self.iteration >0 :
            self._sample()
            self.iteration -= 1
        return 1

def iterate(iteration, M,  n_k_w , n_m_k, n_k, docSizes, numbered_docs, k_m_n ):
    cdef LDA lda
    lda= LDA(iteration, M,  n_k_w , n_m_k, n_k, docSizes, numbered_docs, k_m_n)
    lda._iterate()
    return lda.n_k_w , lda.n_m_k, lda.n_k , lda.k_m_n 
```

**纯python版本**

```
def gibbs_sample():
    for i in xrange(iteration):
    #print i
        for m in xrange(M):
            doc = numbered_docs[m]
            for n in xrange(docSizes[m]):
                #print t
                t = doc[n]

                # discount for n-th word t with topic z
                k = k_m_n[m][n]
                n_m_k[m][k] -= 1
                n_k_w[k][t] -= 1
                n_k[k] -= 1

                # sampling topic new_z for t
                #p_k = n_k_w[:, t] * n_m_k[m][k] / n_k
                new_k = 1
                #np.random.multinomial(1, p_z / p_z.sum()).argmax()

                # set z the new topic and increment counters
                k_m_n[m][n] = new_k
                n_m_k[m][new_k] += 1
                n_k_w[new_k][t] += 1
                n_k[new_k] += 1 
```

**cProfile**

```
 Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.419    0.419 <string>:1(<module>)
        1    0.419    0.419    0.419    0.419 {lda_pyx.iterate}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:53:51.347

**关于诺吉尔：**

使用`with nogil`简单地*允许*其他线程在没有全局锁的情况下运行该代码块——仍然取决于您在该块中运行多线程代码，并确保您在这样做时不会触及任何 Python 对象. 类型化的内存视图不是 Python 对象，因此您可以在具有多个线程的 nogil 块中使用/操作它们。 [Cython 具有在`prange()`](http://docs.cython.org/src/userguide/parallelism.html)`with nogil`块内自动生成 OpenMP 指令的[功能。](http://docs.cython.org/src/userguide/parallelism.html)`prange`如果您的循环迭代彼此独立，您可以轻松获得良好的加速。这里有很多细节——请参阅链接文档。

**关于您的代码：**

专注于优化内部循环中的代码。

在您的代码上使用`cython -a`显示几行可能会降低您的性能。

*   你可以直接索引`n_k_w[new_k,t]`而不是你所拥有的。

*   您将通过将`k_m_n`列表转换为 2D numpy 数组并在内部使用类型化的 memoryview 来获得改进。

*   同上`numbered_docs`。

*   当你知道你有连续的数据时，你还需要使用`arr[::1]`类型化的 memoryview 声明，否则 Cython 将 memview 视为跨步，这将减慢访问速度。

请参阅下面的 cython 代码以获取一些建议——您可能需要对其进行修改以使其适用于您的东西。

**lda.pyx**

```
import numpy as np
cimport numpy as np
cimport cython
DTYPE = np.int
ctypedef np.int_t DTYPE_t

cdef class LDA:

    cdef:
        int iteration, M
        int[::1] docSizes
        double[:, ::1] n_k_w ,n_m_k
        double[::1] n_k
        list k_m_n, numbered_docs

    def __init__(self, iteration, M, n_k_w , n_m_k, n_k, docSizes, numbered_docs, k_m_n):
        self.iteration = iteration
        self.M = M
        self.n_k_w = n_k_w
        self.n_m_k = n_m_k
        self.n_k = n_k
        self.k_m_n = k_m_n
        self.numbered_docs = numbered_docs
        self.docSizes = docSizes

    @cython.boundscheck(False)
    @cython.wraparound(False)
    cdef int _sample(self) :

        cdef:
            int[::1] docSizes = self.docSizes
            double[:, ::1] n_k_w = self.n_k_w, n_m_k = self.n_m_k
            double[::1] n_k = self.n_k
            int[::1] k_n, doc
            int m, n, t, k, new_k

        for m in range(self.M):
            k_n = self.k_m_n[m]
            doc = self.numbered_docs[m]
            for n in range(docSizes[m]):

                t = doc[n]
                k = k_n[n]

                n_m_k[m,k] -= 1
                n_k_w[k,t] -= 1
                n_k[k] -= 1
                new_k = 1

                # set z the new topic and increment counters
                k_n[n] = new_k
                n_m_k[m, new_k] += 1
                n_k_w[new_k, t] += 1
                n_k[new_k] += 1

        return 1

    @cython.boundscheck(False)
    @cython.wraparound(False)
    cdef int _iterate(self) :

        while self.iteration >0 :
            self._sample()
            self.iteration -= 1
        return 1

def iterate(iteration, M,  n_k_w , n_m_k, n_k, docSizes, numbered_docs, k_m_n ):

    # pass array / list arguments through np.ascontiguousarray(), will make
    # copy only if not contiguous buffer already.
    ascontig = np.ascontiguousarray
    n_k_w = ascontig(n_k_w, dtype=np.double)
    n_m_k = ascontig(n_m_k, dtype=np.double)
    n_k = ascontig(n_k, dtype=np.double)
    docSizes = ascontig(docSizes, dtype=np.int32)
    k_m_n = [ascontig(k_n, dtype=np.int32) for k_n in k_m_n]
    numbered_docs = [ascontig(n_d, dtype=np.int32) for n_d in numbered_docs]

    cdef LDA lda
    lda= LDA(iteration, M,  n_k_w , n_m_k, n_k, docSizes, numbered_docs, k_m_n)
    lda._iterate()
    # since the lda object just grabs views of the n_k_w, n_m_k etc. arrays,
    # these will be modified, so return them directly.
    return n_k_w, n_m_k, n_k, k_m_n 
```

**安装程序.py**

```
import numpy as np
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

exts = [Extension("lda", ["lda.pyx"],
                  include_dirs=[np.get_include()])
        ]

setup(
    cmdclass = {'build_ext': build_ext},
    ext_modules = exts,
) 
```

**测试.py：**

```
import numpy as np
from speedup import iterate

iteration = 10
M = 10
n_k_w = np.random.rand(10, 10)
n_m_k = np.random.rand(10, 10)
n_k = np.random.rand(10)
docSizes = np.zeros((10,), dtype=np.int32) + 10
numbered_docs = np.zeros((10, 10), dtype=np.int32) + 3
k_m_n = np.zeros((10, 10), dtype=np.int32) + 7
k_m_n_orig = k_m_n.copy()

iterate(iteration, M,  n_k_w, n_m_k, n_k, docSizes, numbered_docs, k_m_n)

print k_m_n_orig[1]
print k_m_n[1] 
```

# python - 存储和检索大型稀疏矩阵

> ID：16039852
> 
> 赞同：5
> 
> 时间：2013-04-16T14:33:20.293
> 
> 标签：python, memory, matrix, numpy, sparse-matrix

我有一个相当大的稀疏矩阵，我估计它在加载到内存时会占用 1Gb。

我不需要随时访问整个矩阵，所以某种内存映射会起作用；但是，似乎不可能使用 numpy 或辣（我熟悉的工具）来内存映射稀疏矩阵。

它可以很容易地放入内存中，但是如果我每次运行程序时都必须加载它会很痛苦。也许某种方式可以在运行之间将其保存在内存中？

那么，您有什么建议： 1\. 找到一种方法来记忆映射稀疏矩阵；2\. 每次只需将整个想法加载到内存中 3\. ?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T16:12:43.680

以下可能是一个一般概念，但您将不得不弄清楚很多细节......您应该首先熟悉[CSR 格式](http://en.wikipedia.org/wiki/Sparse_matrix#Compressed_sparse_row_.28CSR_or_CRS.29)，其中一个数组的所有信息都存储在 3 个数组中，两个长度为非零条目的数量，长度之一是行数加一：

```
>>> import scipy.sparse as sps
>>> a = sps.rand(10, 10, density=0.05, format='csr')
>>> a.toarray()
array([[ 0\.        ,  0.46531486,  0.03849468,  0.51743202,  0\.        ],
       [ 0\.        ,  0.67028033,  0\.        ,  0\.        ,  0\.        ],
       [ 0\.        ,  0\.        ,  0\.        ,  0\.        ,  0\.        ],
       [ 0\.        ,  0\.        ,  0\.        ,  0\.        ,  0.9967058 ],
       [ 0\.        ,  0\.        ,  0\.        ,  0\.        ,  0\.        ]])
>>> a.data
array([ 0.46531486,  0.03849468,  0.51743202,  0.67028033,  0.9967058 ])
>>> a.indices
array([1, 2, 3, 1, 4])
>>> a.indptr
array([0, 3, 4, 4, 5, 5]) 
```

非零条目也是如此`a.data`，按行主要顺序，`a.indices`具有非零条目的相应列索引，并且`a.indptr`具有其他两个数组的起始索引，其中每行的数据开始，例如`a.indptr[3] = 4`和`a.indptr[3+1] = 5`，所以非零条目第四行是`a.data[4:5]`，以及它们的列索引`a.indices[4:5]`。

因此，您可以将这三个数组存储在磁盘中，并将它们作为 memmap 访问，然后您可以按如下方式检索 m 到 n 行：

```
ip = indptr[m:n+1].copy()
d = data[ip[0]:ip[-1]]
i = indices[ip[0]:ip[-1]]
ip -= ip[0]
rows = sps.csr_matrix((d, i, ip)) 
```

作为概念的一般证明：

```
>>> c = sps.rand(1000, 10, density=0.5, format='csr')
>>> ip = c.indptr[20:25+1].copy()
>>> d = c.data[ip[0]:ip[-1]]
>>> i = c.indices[ip[0]:ip[-1]]
>>> ip -= ip[0]
>>> rows = sps.csr_matrix((d, i, ip))
>>> rows.toarray()
array([[ 0\.        ,  0\.        ,  0\.        ,  0\.        ,  0.55683501,
         0.61426248,  0\.        ,  0\.        ,  0\.        ,  0\.        ],
       [ 0\.        ,  0\.        ,  0.67789204,  0\.        ,  0.71821363,
         0.01409666,  0\.        ,  0\.        ,  0.58965142,  0\.        ],
       [ 0\.        ,  0\.        ,  0\.        ,  0.1575835 ,  0.08172986,
         0.41741147,  0.72044269,  0\.        ,  0.72148343,  0\.        ],
       [ 0\.        ,  0.73040998,  0.81507086,  0.13405909,  0\.        ,
         0\.        ,  0.82930945,  0.71799358,  0.8813616 ,  0.51874795],
       [ 0.43353831,  0.00658204,  0\.        ,  0\.        ,  0\.        ,
         0.10863725,  0\.        ,  0\.        ,  0\.        ,  0.57231074]])
>>> c[20:25].toarray()
array([[ 0\.        ,  0\.        ,  0\.        ,  0\.        ,  0.55683501,
         0.61426248,  0\.        ,  0\.        ,  0\.        ,  0\.        ],
       [ 0\.        ,  0\.        ,  0.67789204,  0\.        ,  0.71821363,
         0.01409666,  0\.        ,  0\.        ,  0.58965142,  0\.        ],
       [ 0\.        ,  0\.        ,  0\.        ,  0.1575835 ,  0.08172986,
         0.41741147,  0.72044269,  0\.        ,  0.72148343,  0\.        ],
       [ 0\.        ,  0.73040998,  0.81507086,  0.13405909,  0\.        ,
         0\.        ,  0.82930945,  0.71799358,  0.8813616 ,  0.51874795],
       [ 0.43353831,  0.00658204,  0\.        ,  0\.        ,  0\.        ,
         0.10863725,  0\.        ,  0\.        ,  0\.        ,  0.57231074]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:48:36.083

Scipy 支持[不同种类的稀疏矩阵](http://docs.scipy.org/doc/scipy/reference/sparse.html)。但是您必须编写一个例程才能将其读入内存。你应该使用哪种类型取决于你想用它做什么。

如果您的矩阵非常稀疏，您可以使用[struct](http://docs.python.org/2/library/struct.html)模块将`(row, column, value)`元组作为二进制数据保存到磁盘。假设可移植性不是问题，这将使磁盘上的数据更小并且更容易加载。

然后，您可以像这样读取数据：

```
import struct
from functools import partial

fmt = 'IId'
size = struct.calcsize(fmt)

with open('sparse.dat', 'rb') as infile:
    f = partial(infile.read, size)
    for chunk in iter(f, ''):
        row, col, value = struct.unpack(fmt, chunk)
        # put it in your matrix here 
```

# c++ - 为什么通过指针静态访问类数据成员返回1？

> ID：16039854
> 
> 赞同：20
> 
> 时间：2013-04-16T14:33:23.573
> 
> 标签：c++

给定以下代码：

```
#include <iostream>

using std::cout;

class A {
    public:
        virtual ~A() {}
        int x,y,z;
};

int main (void)
{
    std::cout<<&A::x;
    std::cout<<&A::y;
    std::cout<<&A::z;
} 
```

输出是：

> 111

输出的含义是什么？为什么是1？是否有充分的理由通过指针（没有创建的对象）访问类成员？

编辑 - 使用：

```
printf("%p",&A::x);
printf("%p",&A::y);
printf("%p",&A::z); 
```

打印：4、8 和 C。

我猜现在它更有意义了..（字节）但是，这有什么用吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-16T14:39:10.837

没有`operator<<(std::ostream&, T)`为`T = &C::m`. 通常你会得到一个错误。

但相反，有一个 for`T = bool`和一个从成员指针到 的隐式转换`bool`。所以你看到的输出只是那些指针不为空（被转换为`true`）的结果。

试试这个，例如：

```
#include <iomanip>
#include <iostream>

struct A
{
    int x, y, z;
};

int main()
{
    std::cout << std::boolalpha; // print boolean values as text

    std::cout << &A::x << std::endl;
    std::cout << &A::y << std::endl;
    std::cout << &A::z << std::endl;
} 
```

输出：

> 真的
> 真的
> 真的

* * *

请注意，在代码`printf("%p", &A::X)`中，您有未定义的行为。

说明符的值`%p`必须是 a `void*`，并且没有从成员指针到 a 的转换`void*`。相反，你有别名（类型双关语） to `void*`，这是未定义的行为。（想象一下`sizeof(&A::x)`4 岁，而`sizeof(void*)`64 岁；没有人说这不可能。）

您只需要接受并非所有指针都可以视为整数偏移量的想法。我们甚至可以打印一个指针是实现定义的：它可以为 null 打印“apple”，为一个值打印“pear”，如果（哑）实现想要打印另一个值，则为另一个“milk”。[我之前已经谈到了值和它们的表示之间的这种差异](https://stackoverflow.com/questions/14167455/is-it-possible-to-hash-pointers-in-portable-c03-code/14169897#14169897)。

*在这种情况下，该值根本*没有输出。没关系，并非所有值都有有意义的打印输出。您最多可以打印出各个位：

```
#include <climits>
#include <iostream>
#include <type_traits>

template <typename T>
auto print_bits(const T& value)
    -> typename std::enable_if<std::is_standard_layout<T>::value>::type
{
    // it's okay to alias a standard-layout type as a sequence of bytes:
    const auto valueAsBytes = reinterpret_cast<const unsigned char*>(&value);

    for (std::size_t byte = 0; byte < sizeof(T); ++byte)
    {
        // print in reverse order
        const std::size_t byteIndex = sizeof(T) - byte - 1;

        const unsigned char byteValue = valueAsBytes[byteIndex];

        for (std::size_t bit = 0; bit < CHAR_BIT; ++bit)
        {
            // print in reverse order
            const std::size_t bitIndex = CHAR_BIT - bit - 1;

            const bool bitValue = (byteValue & (1U << bitIndex)) != 0;

            std::cout << (bitValue ? 1 : 0);
        }

        std::cout << ' ';
    }

    std::cout << std::endl;
} 
```

（我以相反的顺序打印字节和位，因为在我的架构中，这会将最低有效位放在右侧。我更喜欢以这种方式查看二进制值。）

这给出了：

```
struct A
{
    int x, y, z;
};

int main()
{
    // example:
    for (unsigned i = 0; i < 64; ++i)
        print_bits(i);

    std::cout << std::endl;

    // member-pointers:
    print_bits(&A::x);
    print_bits(&A::y);
    print_bits(&A::z);
} 
```

输出：

> 00000000000000000000000000000000000000000000000000 来 症
> 0000000000000000000000 来 州
> _
> 
> 00000000 00000000 00000000 00000000
> 00000000 00000000 00000000 00000100
> 00000000 00000000 00000000 00001000

无法保证您看到的成员指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:38:01.150

`&A::x`创建一个*指向*类成员的指针`A`。在某种程度上，指向成员的指针是该成员在类中的“位置”的表示。~~这些数字的确切含义取决于特定的实现。我猜想在您的特定实现中，这意味着`x`在类中的索引 1 上（虚函数表指针在索引 0 上）。~~ **编辑**实际上，GManNickG 的回答表明我对这个假设有误，它只是打印指向成员的指针隐式转换为`bool`.

请注意，*指向成员*的指针**不是**经典意义上的指针。您不能直接取消引用指向成员的指针。你总是需要一个指向对象的指针/引用来配合它。示例（使用您的课程）：

```
int main()
{
  int A::*pm;  // pm is a pointer to member of A of type int
  A a;
  pm = &A::x;
  std::cout << a.*pm; //will output a.x
  pm = &A::y;
  std::cout << a.*pm; //will output a.y
  A *pa = &a;
  std::cout << pa->*pm;  //will output pa->y
} 
```

# java - Java 和命令行参数

> ID：16039855
> 
> 赞同：-3
> 
> 时间：2013-04-16T14:33:25.643
> 
> 标签：java, command-line-arguments

因此，我对 java 还是很陌生，并且在过去几个月左右的时间里一直在学习，而且我真的在为命令行参数苦苦挣扎。与其说是概念，不如说是如何在[IntelliJ IDEA](http://en.wikipedia.org/wiki/IntelliJ_IDEA)中实现它们（对不起，如果这是错误的术语用法） ？和命令行真的。在我的课堂实验室中（没有评分，只是不是强制性帮助），它说我可以传递任意数量的字符串值（有道理..）

然后有：

```
demo$ java MyProgram str1 str2 str3 
```

当我尝试使用从实验室作业中复制的代码在终端中运行它时，我不断得到：

> 演示 $ 无法识别

这是怎么回事？

我们应该使用的代码是：

```
public class TestCLArgs {
    public static void main(String [] args) {
        System.out.println("Received command line args: ");
        for(String arg : args) {
            System.out.println(arg);
        }
    }
} 
```

然后我们应该通过键入在终端中运行它

```
demo $ javac TestCLArgs.java
demo $ java TestCLArgs hello world 1 2 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:35:49.430

尝试运行这个：

```
 java MyProgram str1 str2 str3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:36:08.623

`demo $`是提示，可能在您正在关注的某些书中给出。你不必输入那个。

您只需输入`java MyProgram str1 str2 str3`

# android - 如何以编程方式从手机中读取“contacts2.db”文件的内容？

> ID：16039857
> 
> 赞同：1
> 
> 时间：2013-04-16T14:33:40.397
> 
> 标签：android, android-contacts

是否可以在 Android 2.1 中读取数据库文件？例如，/data/data/com.android.providers.contacts/databases/contacts2.db 中的文件。如果是，如何？是否可以以编程方式替换此文件以导入/导出联系人或任何其他数据库文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:46:07.070

你永远不会访问

```
/data/data/com.android.providers.contacts/databases/contacts2.db 
```

曾经。无论如何，如果没有 root 访问权限，您将无法从应用程序中读取该文件。您正在寻找的是内容提供商。正如 URI 指定的那样，它是联系人数据库的提供者。您想更多地研究内容提供者，特别是在您的情况下是联系提供者。您可以在此处查看文档：http: [//developer.android.com/guide/topics/providers/contacts-provider.html](http://developer.android.com/guide/topics/providers/contacts-provider.html)

希望这能回答你的问题。

# c++ - Qt QFile/QTextStream，无法解析/proc/stat

> ID：16039866
> 
> 赞同：1
> 
> 时间：2013-04-16T14:33:58.843
> 
> 标签：c++, linux, qt

我在解析`/proc/stat`Qt 时遇到问题。

我遇到的问题是`QFile`状态`/proc/stat`既开放*又*可读。

尝试单独读取行时，`QTextStream`显然指示流已完成，但我知道通过运行`cat /proc/stat`.

没有`while`执行循环中的代码。有什么意见或建议吗？

```
 int UsageStatistics::handle_timeout(const ACE_Time_Value& currentTime, const void* param) {

        INFO("Handling timeout\n");

        QFile file(QString("/proc/stat"));
        if (!file.open(QIODevice::ReadOnly)) {
            ERROR("Unable to open file %s, aborting\n", file.fileName().toStdString().c_str());
            return false;
        }                 

        if (!file.isReadable()) {
            ERROR("Unable to read file %s, aborting\n", file.fileName().toStdString().c_str());
            return false;
        }

        QTextStream in(&file);            
        while (!in.atEnd()) {
            QString line = in.readLine();        

            INFO("%s\n", line.toStdString().c_str());

             /// processing
        }

        file.close();

        return true;          
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T16:45:23.990

/proc/stat 是一个很小的文件，没有变大的风险。只需在 QByteArray 中执行 readAll()（没有 atEnd() 检查，您已经完成了 isReadable()），然后如果您想以相同的方式解析它，则将 QTextStream 指向字节数组。

```
QFile file(QString("/proc/stat"));
if (!file.open(QIODevice::ReadOnly)) {
    qDebug("Unable to open file %s, aborting\n", 
        qPrintable(file.fileName()));
    ui->plainTextEdit->appendPlainText("Error can't open");
    return;
}

if (!file.isReadable()) {
    qDebug("Unable to read file %s, aborting\n", 
        qPrintable(file.fileName()));
    ui->plainTextEdit->appendPlainText("Error can't read");
    return;
}

QByteArray contents = file.readAll();

QTextStream in(&contents);
while (!in.atEnd()) {
    QString line = in.readLine();

    qDebug("Read: %s\n", qPrintable(line));

    ui->plainTextEdit->appendPlainText(line);
}

ui->plainTextEdit->appendPlainText("Done reading.");

file.close(); 
```

我刚刚验证了我的系统和你的系统一样，然后尝试了这个基于 readAll() 的方法并且它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:40:09.967

您正在使用`cpuRegex.exactMatch`，它希望与整行完全匹配。您要查找的线路也有其他信息。尝试`cpuRegex.indexIn(line) == 0`改用。

# python - 介于两者之间的 Python 游戏 - 无法让 if-elif 工作

> ID：16039870
> 
> 赞同：0
> 
> 时间：2013-04-16T14:34:10.547
> 
> 标签：python, if-statement

试图用 Python 制作游戏.. 虽然我似乎无法让某些代码工作？！快把我逼疯了！

任何帮助是极大的赞赏！

```
import random

die1 = random.randint(1,10)
die2 = random.randint(1,10)
die3 = random.randint(1,10)

if die1 > die2:
    print ('Die 1:', die2,'  Die 2:', die1,)
else:
    print ('Die 1:', die1,'  Die 2:', die2,)

    if die1 == die2 or die2 == die1:
        print('\nEven-steven!')
    else:
        print('\nNot the same, let\'s play!')

print ('\nDie 3:', die3,)

if die3 > die1 and die3 < die2 or die3 < die1 and die3 > die2: 
    print ('\n*** You win! ***')
elif die1 > die2:
    if die3 < die2 or die3 > die1:
        print('\n*** Sorry - You lose! ***')
elif die2 > die1:
    if die3 < die1 or die3 > die2:
        print('\n*** Sorry - You lose! ***')
**elif die3 == die1 or die3 == die2:
    print ('\n*** You hit the post - You lose double your bet! ***')**

print ('\nThanks for playing!') 
```

它在第二个 if 语句结构中，无论出于何种原因，如果 die1 或 die2 与 die3 相同，它就不会打印 'You hit the post...' 它就结束了！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:37:04.083

Your diagnosis is incorrect. The last statement *will* match if `die3` is equal to either `die1` or `die2`:

```
>>> die1, die2 = 1, 2
>>> die3 = die1
>>> die3 == die1 or die3 == die2
True
>>> die3 = die2
>>> die3 == die1 or die3 == die2
True 
```

However, if `die1` is greater than `die2` your *first* `elif` matches, but your comparison to `die3` is flawed:

```
>>> die1, die2 = 2, 1
>>> die3 = die1
>>> die3 < die2 or die3 > die1
False 
```

and *nothing* is ever printed. You need to clean up the logic for that case.

Since you only have 3 different outcomes; winning, losing and hitting the post, you can really simplify the whole thing down to:

```
if die1 < die3 < die2:
    print('\n*** You win! ***')
elif die3 == die1 or die3 == die2:
    print('\n*** You hit the post - You lose double your bet! ***')
else:
    print('\n*** Sorry - You lose! ***') 
```

Note that I used [chained comparisons](http://docs.python.org/2/reference/expressions.html#not-in) to simplify the first `if` expression some more. You also made sure that `die1` is lower than `die2`, so testing for `die2 < die3 < die1` is *always* going to be `False`.

Another note: `==` should be transitive, so `die1 == die2 or die2 == die1` is redundant. You can simplify that to just `die1 == die2`.

Simplifying your whole program:

```
import random

die1 = random.randint(1,10)
die2 = random.randint(1,10)

if die1 > die2:
    die1, die2 = die2, die1

print ('Die 1:', die1,'  Die 2:', die2,)

if die1 == die2:
    print('Even-steven!')
else:
    print("Not the same, let's play!")
    die3 = random.randint(1,10)

    print ('Die 3:', die3)

    if die1 < die3 < die2:
        print('\n*** You win! ***')
    elif die3 == die1 or die3 == die2:
        print('\n*** You hit the post - You lose double your bet! ***')
    else:
        print('\n*** Sorry - You lose! ***')

print ('Thanks for playing!') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:41:23.180

不要让它让你发疯，保持冷静，并使用[`pdb`](http://docs.python.org/2/library/pdb.html#debugger-commands).

```
if die3 in (die1, die2):
    import pdb; pdb.set_trace()

if die3 > die1 and die3 < die2 or die3 < die1 and die3 > die2: 
    print ('\n*** You win! ***')
elif die1 > die2:
    if die3 < die2 or die3 > die1:
        print('\n*** Sorry - You lose! ***')
elif die2 > die1:
    if die3 < die1 or die3 > die2:
        print('\n*** Sorry - You lose! ***')
**elif die3 == die1 or die3 == die2:
    print ('\n*** You hit the post - You lose double your bet! ***')**

print ('\nThanks for playing!') 
```

现在运行它，当它中断时，开始调试（使用`n`for next，检查每个条件的值等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:42:44.270

通过简化代码，调试起来会容易得多。只有 3 个条件 `win`，`lose`或者`lose (double)`不需要 6 个*（嵌套）*条件。也可以通过切换`die1`以及`die2`您`die1 > die2`的程序输出和变量是否保持有意义。这是更理智的：

```
import random

die1 = random.randint(1,10)
die2 = random.randint(1,10)

if die1 > die2:
    die1, die2 = die2, die1

print('Die 1:',die1,'Die 2:',die2)

if die1 == die2:
    print('Even-steven!')
else:
    print("Not the same, let's play!")  

    die3 = random.randint(1,10) 
    print('Die 3:',die3)

    if die3 > die1 and die3 < die2 or die3 < die1 and die3 > die2: 
        print ('You win!')
    elif die3 == die1 or die3 == die2:
        print ('You hit the post - You lose double your bet!')
    else:
        print('Sorry - You lose!')

print('Thanks for playing!') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T17:26:55.243

这个怎么样？

```
if die3 == die1 or die3 == die2:
    print ('\n*** You hit the post - You lose double your bet! ***')
else:
    if die3 > die1 and die3 < die2 or die3 < die1 and die3 > die2: 
        print ('\n*** You win! ***')
    elif die1 > die2:
        if die3 < die2 or die3 > die1:
            print('\n*** Sorry - You lose! ***')
    elif die2 > die1:
        if die3 < die1 or die3 > die2:
            print('\n*** Sorry - You lose! ***') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T14:45:44.727

最后的 if 语句仅作为第三个条件的内部语句`elif`的替代解决方案的一部分一起处理。`if`

以下应该可以解决您的问题。注意变化

```
if die3 > die1 and die3 < die2 or die3 < die1 and die3 > die2: 
    print ('\n*** You win! ***')
elif die1 > die2 and (die3 < die2 or die3 > die1):
    print('\n*** Sorry - You lose! ***')
elif die2 > die1 and (die3 < die1 or die3 > die2):
    print('\n*** Sorry - You lose! ***')
elif (die3 == die1) or (die3 == die2):
    print ('\n*** You hit the post - You lose double your bet! ***') 
```

享受。:)

# backbone.js - jqplotbonejs - 没有指定的绘图目标问题

> ID：16039872
> 
> 赞同：0
> 
> 时间：2013-04-16T14:34:16.683
> 
> 标签：backbone.js, jqplot

我正在将 jqplot 与骨干 js 一起使用。该视图包含一个名为“dchart”的元素。

要在渲染视图中找到一个元素，我可以执行以下操作并且它可以工作：

```
chartElem = $(@el).find('#dchart') 
```

但是，以下内容不在 render 方法中：

```
chartElem = $('#dchart') 
```

到目前为止，这还不是问题。但是当 jqplot 试图找到一个元素时，它使用了第二种方法。因此，当尝试在主干视图中渲染 jqplot 时，我遇到了“未指定绘图目标”问题。

我该如何解决这个问题？

为了提供更多上下文，我的代码动态呈现了一些元素（下面的咖啡脚本）

```
 render: () =>
    result = @getdynamicdata()
    $(@el).html(@template(result))
    chartElem = $(@el).find('#dchart')

    data = [["a", result.v1], ["b", result.v2]]
    jQuery.jqplot('dchart',...
    ) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:06:38.100

看起来这种渲染需要在 pageinit 事件处理程序中发生。

# c# - FormCollection 检查是否为空

> ID：16039874
> 
> 赞同：0
> 
> 时间：2013-04-16T14:34:31.577
> 
> 标签：c#, asp.net-mvc-4, formcollection

在这个条件语句中，我尝试了最后一部分，以便在我的表单集合为空时尝试执行一段代码。

```
if ((myDT == null) || (myCollection.GetKey(0).ToString() == "heatSearch") || (myCollection == null))
{
    //some code here
} 
```

每次我运行代码并且表单集合为空时，此时此条件应该为真，我的应用程序崩溃并且我收到此错误：索引超出范围。必须是非负数且小于集合的大小。

更多信息...此检查在 AJAX 帖子调用的 ActionResult 中执行。该帖子失败并在此处显示的此行返回错误： `<b> Source File: </b> c:\Users\D\Documents\Visual Studio 2012\Projects\TheMProject(1)\TheMProject\Models\HomeModel.cs<b> &nbsp;&nbsp; Line: </b> 936`

第 936 行是带有 if 的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:45:04.210

修理它：

```
if ((myDT == null) || (myCollection == null) || (myCollection.GetKey(0).ToString() == "heatSearch"))
{
    //some code here
} 
```

您`myCollection.GetKey(0)`在测试之前调用是否`myCollection`为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:42:15.903

你有没有尝试过...

```
public ActionResult MyAction(FormCollection f)
{
    if (f.Count == 0)
        {
            Debug.WriteLine("Hello");
        }

        return View();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-03T20:12:16.170

```
if ((myDT == null) || (myCollection == null) || (myCollection.Count > 0) )
{
    //some code here
} 
```

是我会做的

# c# - 有没有办法在调试期间从对象中获取类型元数据

> ID：16039876
> 
> 赞同：2
> 
> 时间：2013-04-16T14:34:37.420
> 
> 标签：c#, debugging

我现在正在处理的代码库有很多 ye olde`ArrayLists`和`Hashtables`. 是否可以从调试器中找出其中一个成员项的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:58:08.800

使用即时窗口或添加手表。例如：

`list[0].GetType()`

# html - 冻结右侧的表格列并按其他单元格的中心对齐单元格内容

> ID：16039887
> 
> 赞同：0
> 
> 时间：2013-04-16T14:35:18.337
> 
> 标签：html, css, css-tables

这是示例[http://jsfiddle.net/DvxPc/1/](http://jsfiddle.net/DvxPc/1/)

```
body { font:16px Calibri;}
table { border-collapse:separate; border-top: 3px solid grey; }
td {
    margin:0;
    border:3px solid grey; 
    border-top-width:0px; 
    white-space:nowrap;
}
div { 
    width: auto; 
    overflow-x:scroll;  
    margin-right:5em; 
    overflow-y:visible;
    padding-bottom:1px; 
}
.headcol {
    position:absolute; 
    width:5em; 
    right:0;
    top:auto;
    border-right: 0px none black; 
    border-top-width:3px; /*only relevant for first row*/
    margin-top:-3px; /*compensate for top border*/
}
.long { background:yellow; letter-spacing:1em; }

<div><table>
    <tr><td class="headcol">X</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td> <td>llaldlfasd<br/>fasdf</td> </tr>
</table></div> 
```

问题是右列不位于行的中心。我将能够在右侧放置删除按钮，如果它没有在中心对齐，那么 UI 会看起来很邋遢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:37:09.937

这不是一个很好的解决方案，但它可能与您将获得的一样接近。如果您的行内容只占一行，它将偏离几个 px。它看起来足够接近 2 或 3 行。如果您的 line-height 与其他地方定义的不同，则需要调整绝对定位元素上的 margin-top。

[http://jsfiddle.net/DvxPc/5/](http://jsfiddle.net/DvxPc/5/)

```
 body { font:16px Calibri;}
    table { border-collapse:separate; border-top: 3px solid grey; }
    td {
        margin:0;
        border:3px solid grey; 
        border-top-width:0px; 
        white-space:nowrap;
    }
    div { 
        width: auto; 
        overflow-x:scroll;  
        margin-right:5em; 
        overflow-y:visible;
        padding-bottom:1px; 
    }
    span {
        border: 1px solid;
        position:absolute; 
        width:5em; 
        right:0;
        margin-top: -.7em;
        box-sizing: border-box;
    }
    .long { background:yellow; letter-spacing:1em; } 
```

请注意，我在这里添加了一个额外的元素。这是正在定位的内容，而不是包含它的 td 。

```
<div><table>
    <tr><td><span>X</span></td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td> <td>llaldlfasd</td></tr>
    <tr><td><span>X</span></td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td> <td>llaldlfasd<br/>fasdf</td> </tr>
    <tr><td><span>X</span></td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td> <td>llaldlfasd<br/>fasdf</td> </tr>
    <tr><td><span>X</span></td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td> <td>llaldlfasd<br/>fasdf</td> </tr>
    <tr><td><span>X</span></td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td><td class="long">QWERTYUIOPASDFGHJKLZXCVBNM</td> <td>llaldlfasd<br/>fasdf<br/>fasdf</td> </tr>
</table></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:10:41.547

如果我理解得很好，你想要这样的东西吗？

[http://jsfiddle.net/DvxPc/2/](http://jsfiddle.net/DvxPc/2/)

我变了`top`

# sas - SAS - 如何共享企业矿工项目

> ID：16039896
> 
> 赞同：2
> 
> 时间：2013-04-16T14:35:47.763
> 
> 标签：sas

用户看不到不是他们在 Enterprise Miner 中创建的项目。我们已经在 Unix 服务器上为所有项目打开了文件权限，但它们没有出现在“打开项目”对话框中。我们做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:10:51.660

除了设置 UNIX 服务器目录权限外，您可能还需要更改`workspace server`Enterprise Miner 正在执行的 umask。请参阅[此 SAS 使用说明](http://support.sas.com/kb/30/756.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:28:49.687

用户可以访问工作区服务器上但未在元数据中为他们注册的项目。为此，他们需要打开项目文件夹的权限。然后按照“在 SAS Enterprise Miner 中定义迁移的项目”的说明进行操作。

信息在这里：http: [//support.sas.com/documentation/cdl/en/emag/65360/PDF/default/emag.pdf](http://support.sas.com/documentation/cdl/en/emag/65360/PDF/default/emag.pdf) 第67页

这是在 SAS EM 12.1 的上下文中

# cocoa - 保存/恢复 NSWindow 位置

> ID：16039898
> 
> 赞同：4
> 
> 时间：2013-04-16T14:35:50.627
> 
> 标签：cocoa, osx-mountain-lion

我有一个基于文档的 Mac 应用程序，我正在尝试为每个文档窗口保存/恢复窗口位置。

当文档加载（将其设置为文件名）时，我在 NSWindowController 上调用 setWindowFrameAutosaveName 并且一切正常。

我遇到的问题是如何处理创建新文档并且用户关闭窗口然后选择保存新文档的位置的场景 - 我无法弄清楚在哪里调用 setWindowFrameAutosaveName 这样它就在文档之后路径，但在窗口控制器保持位置之前。

任何指针都将受到欢迎！

谢谢

# android - rajawali 和 md2 动画文件

> ID：16039899
> 
> 赞同：1
> 
> 时间：2013-04-16T14:35:51.070
> 
> 标签：android, 3d, opengl-es-2.0, rajawali

我的第一个问题在这里。

我尝试使用 rajawali 引擎来渲染一些 md2 动画文件。我对此真的很陌生，并且真的不知道如何创建自己的 md2 文件。所以我在网上找到了一些 md2 文件，但现在我有一个问题：

在 ragawali 示例中有 2 个相关文件： 1.ogro.md2（在 res/raw 路径中） 2.ogrobase.jpg（在 res/drawable-nodpi 路径中）

但是，在其他 md2 文件中——例如来自本网站的：（ [http://www.md2.sitters-electronics.nl/models.html](http://www.md2.sitters-electronics.nl/models.html)-i) ）——我得到带有 PCX 和 BMP 或 PNG 文件的 md2 文件。

所以 md2 文件按我的意愿加载，但它可以读取“皮肤”或附加的纹理。

我怎样才能修改这个文件，我可以用 ragewali 使用它，这是最好的方法？md2 文件是否定义了哪个文件是从中读取纹理的文件？因为我不知道如何修改它..

非常感谢！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:06:02.830

MD2 文件格式是一种相当古老的格式。它用于 1997 年发布的 Quake 2。当时首选的纹理格式是 .pcx 或 .tga。1997 年是很久以前的事了，现在 .jpg 和 .png 文件被用作纹理。Android平台完全支持这些。

我建议使用 Photoshop、The Gimp 或 XNView 将您的 .pcx 图像转换为 jpeg。您可以使用相同的文件名并将它们放入“drawable-nodpi”文件夹中。Rajawali 会自动从它在 .md2 文件中找到的所有纹理中去除路径和文件扩展名。因此，您不必担心手动编辑 .md2 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T12:17:25.630

使用 Blender 2.57 创建您的 MD2 文件，我也在这样做。在 ogrobase.png 中是我执行本教程的纹理的 UV 图像。此 UV 图像详细信息（名称）存储在 MD2 文件中，因此您需要与导出时相同的所有内容。我的建议是使用 blender 2.57，有一个可用的导出器 MD2 脚本，您可以创建自己的文件。

# ruby-on-rails - Rails 3.2 - Query to extract records not working properly - Is this syntax correct?

> ID：16039901
> 
> 赞同：2
> 
> 时间：2013-04-16T14:36:00.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite, postgresql

I got 2 models. One called `Header` and another one called `Alarm`

Alarm has a column called `keyword`. Header have 4 columns called `title_en, title_es, title_eu, title_fr`

I would like to compare these `4 columns` of a given `Header` against the `keyword` field for every single `Alarm`. This should extract the `Alarms` which match somehow any of the titles.

The query I have built(see below) works in a weird way. I have tried with some fake data:

```
Alarm1.keyword = 'foo'
Header1.title_es = 'foo'
Header2.title_en = 'foo'
Header3.title_en = 'foo' 
```

This query returns Alarm1 only with Header2 and Header3\. Why does not work for Header1? Anything to do with `title_es`.

```
@header = Header.find(somegivenheader)
@alarms =  Alarm.where((["CAST(alarms.keyword as varchar(255)) LIKE ?", @header.title_en] || ["CAST(alarms.keyword as varchar(255)) LIKE ?", @header.title_es] || ["CAST(alarms.keyword as varchar(255)) LIKE ?", @header.title_fr] || ["CAST(alarms.keyword as varchar(255)) LIKE ?", @header.title_eu])) 
```

Any help much appreciated. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:41:00.480

I don't think those where clauses are being ORed together as you expect. Take a look at the resulting SQL in the console by appending `.to_sql` to `Alarm.where(...)`.

Or, try something like:

```
Alarm.where("keyword in (?)", [@header.title_es, @header.title_fr, @header.title_eu]) 
```

# php - 编辑 Magento 顶部链接的最佳实践方法

> ID：16039902
> 
> 赞同：1
> 
> 时间：2013-04-16T14:36:06.800
> 
> 标签：php, xml, magento

假设我们想在 Magento 顶部链接的“我的购物车”链接之前添加一个购物车图标（请参阅下面的顶部链接）。

做这个的最好方式是什么？

选项 1\. 对 toplinks.php 做些什么？

选项 2\. 对 links.phtml 做些什么？

选项 3\. xml 文件？

选项 4\. 还有其他选项吗？

我知道这可以通过 CSS 完成，但是随着我对自定义的需求增长，我想知道如何在没有 CSS 的情况下完成，以便我能够自定义更困难的事情。

![在此处输入图像描述](https://i.stack.imgur.com/r84Ov.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:33:24.450

我知道您在 [Magento.StackExchange] 上的问题有一个很好的答案，说明您应该为此目的使用 XML [1](https://magento.stackexchange.com/questions/3032/best-practices-way-to-edit-magento-top-links)

这是一篇来自 Classy Lama 的非常好的文章，关于如何实际做到这一点 -[编辑 Magento 的热门链接（更好的方式）](http://www.classyllama.com/development/magento-development/editing-magentos-top-links-the-better-way)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:47:36.427

在 page.xml 中

```
 <block type="page/template_links" name="top.links" as="topLinks"/> 
```

这是一个 template_links 类型的块，它会渲染你要扔给它的任何东西。

在带有默认节点的自定义 xml 中，将您的块引用到该 top.links ，它将显示在标题中。

# asp.net - SimpleMembership 混淆：InitializeDatabaseFile 不是 WebMatrix.WebData.WebSecurity 的成员

> ID：16039903
> 
> 赞同：1
> 
> 时间：2013-04-16T14:36:07.870
> 
> 标签：asp.net, simplemembership

这种方法是否已被弃用？在任何文档中都找不到任何信息。

这是我最初找到代码的地方：

[http://blog.osbornm.com/2010/07/21/using-simplemembership-with-asp.net-webpages/](http://blog.osbornm.com/2010/07/21/using-simplemembership-with-asp.net-webpages/)

[http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and- asp-net-mvc-4-templates.aspx](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)

```
//Set up Simple Membership
WebSecurity.InitializeDatabaseFile(“SecurityDemo.sdf”, “Users”, “UserID”, “Username”, true); 
```

在我看来它已被这种方法取代？

[http://msdn.microsoft.com/en-us/library/gg569134(v=vs.111).aspx](http://msdn.microsoft.com/en-us/library/gg569134(v=vs.111).aspx)

这些只是名称更改的完全相同的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:02:15.503

是的，InitializeDatabaseFile 已为 InitializeDatabaseConnection 折旧。主要区别在于 depreciated 方法采用数据库名称（在此示例中为 MS SQL Server Compact Edition 数据库），而新方法采用在 web.config 中定义的数据库连接字符串的名称。它不仅限于精简版。[您可以在这篇关于自定义和播种 SimpleMembership](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html)的文章中了解有关初始化 SimpleMembership 的更多信息。

# sql - Microsoft Access: Basing one combo box on another from the same row

> ID：16039905
> 
> 赞同：0
> 
> 时间：2013-04-16T14:36:10.327
> 
> 标签：sql, ms-access

I have 2 tables:

Table1 tblStaff contains 2 fields:

1.  StaffID (Numbers)
2.  StaffName (Text)

Table2 tblTraining contains 3 fields:

1.  TrainingID (Numbers)
2.  Trainee (Combo Box)
3.  Passed (Combo Box)

I would like the available options in [Passed] be those selected in [Trainee]. Say there are 4 staff Tony, Amy, Bay and Linda on tblStaff. If Tony, Bay and Linda are selected in [Trainee] then [Passed] on the same row will only display Tony, Bay and Linda for selection. Say on another row Amy and Bay have been selected in [Trainee], Amy and Bay shall be the only options available for [Passed] on the same row.

So basically I want [Passed] of different row of the same table to display different options subject to the user selection on Trainee. I wonder if this can be achieved by purely sql. I don't wanna get into VBA. Thanks.

# symfony - 对 Symfony 的文件上传文档感到困惑

> ID：16039906
> 
> 赞同：1
> 
> 时间：2013-04-16T14:36:10.467
> 
> 标签：symfony, doctrine-orm

Symfony 2.1 文件上传文档的[最后一部分](http://symfony.com/doc/2.1/cookbook/doctrine/file_uploads.html#using-the-id-as-the-filename)，提供了如何使用文档的数据库`id`作为文件名的说明，重写了`getAbsolutePath()`函数：

```
public function getAbsolutePath()
{
    return null === $this->path
        ? null
        : $this->getUploadRootDir().'/'.$this->id.'.'.$this->path;
} 
```

我很困惑。似乎该`path`属性不再存储路径，而是存储扩展名。这里发生了什么？

我正在尝试更改课程以将上传内容放在`uploads/YYYY/MM`文件夹中，但不确定应该将其放在哪里。我的倾向是将`/YYYY/MM`部件存储在`path`属性中，但它似乎又在存储扩展名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:05:32.853

代码块顶部解释了为什么路径属性中的扩展：

> 如果要使用 id 作为文件名，实现方式略有不同，因为您需要将**扩展​​名保存在 path 属性下**，而不是实际的文件名

至于放在哪里`uploads/YYYY/MM`- 纯粹通过查看文档示例，我假设它应该进入`Document::getUploadRootDir()`方法。

假设您正在存储一个`createdAt`字段来跟踪 Document 的创建时间，该方法可能如下所示：

```
public function getUploadRootDir()
{
    return sprintf('uploads/%s/%s', $this->createdAt->format('y'), $this->createdAt->format('m'));
} 
```

# perl - 本地化“$|”

> ID：16039907
> 
> 赞同：2
> 
> 时间：2013-04-16T14:36:14.507
> 
> 标签：perl

我可以同时使用两种方法进行本地化`$|`，还是应该使用其中一种来支持另一种？

方式一：备份“_init_scr”中的旧值，`$|`并在调用“_end_win”时设置回`$|`旧值。方式2：调用`local $| = 1`“_init_scr”后调用。

```
package Package_name

# ...

sub _init_scr {
    my ( $arg ) = @_;
    $arg->{old_handle} = select( $arg->{handle_out} );
    #$arg->{backup_flush} = $|; # way 1
    $| = 1;
    # ...
}

sub _end_win {
    my ( $arg ) = @_;
    # ...
    #$| = $arg->{backup_flush}; # way 1
    select( $arg->{old_handle} );
}

sub choose {
    my $arg = ...;
    # ...
    _init_scr( $arg );
    # way 2 - instead of setting `$|` in "_init_scr" set it here:
    #local $| = 1;
    # ...
    while ( 1 ) {
        my $c = _getch( $arg );
        # ...;
        given ( $c ) {
            # ...
            when ( $c == CONTROL_C ) {
                _end_win( $arg );
                print "^C";
                kill( 'INT', $$ );
                return;
            }
            when ( $c == KEY_ENTER ) {
                # ...
                _end_win( $arg );
                return $result;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:44:11.540

使用`local`. 这样，`$|`无论子如何退出（异常，早期`return`等），都会恢复。

顺便说一句，您可以使用`select()->flush;`而不是来回切换`$|`。

```
use IO::Handle qw( );  # Required in older versions of Perl.
print "^C";
select()->flush(); 
```

* * *

也就是说，`local $|`由于您无论如何都需要打电话`_end_win`进行清理，因此优势已经消失。所以让我们摆脱对`_end_win`.

```
use Sub::ScopeFinalizer qw( scope_finalizer );

sub _local_scr {
    my ( $arg ) = @_;
    my $old_autoflush = $|;
    my $old_handle = select( $arg->{handle_out} );
    $| = 1;

    return scope_finalizer {
       $| = $old_autoflush;
       select($old_handle);
    };
}

sub choose {
    my $arg = ...;

    my $guard = _local_scr( $arg );

    while ( 1 ) {
        ...
                print "^C";
                kill( 'INT', $$ );
                return;
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:48:35.333

第三种方式：

```
use IO::Handle;
# ...
$arg->{handle_out}->autoflush(1);
# ...
$arg->{handle_out}->autoflush(0); 
```

IO::Handle 中还有其他各种方便的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T14:43:14.017

如果要本地化该值，只需使用`local`. 当您退出本地化范围时，它将处理恢复原始值，而无需您进行任何额外的努力（或出错的机会）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T14:42:37.370

您应该使用`local $| = 1;`, 因为这是惯用的 Perl 方式。它比跟踪另一个变量中的值更简单。

使用一组额外的大括号（如果需要）来创建一个范围，以便它只适用于应该设置它的程序部分。

```
{
   #Buffering is turned off only in here.
   local $| = 1;
   unbuffered_commands();
}

buffered_commands(); 
```

# java - 我在这个程序中遇到异常？

> ID：16039911
> 
> 赞同：0
> 
> 时间：2013-04-16T14:36:22.180
> 
> 标签：java

我在这个程序中遇到了一个例外。我试图做一些改变，但它仍然无法正常工作。我正在尝试将数据从 demo.txt 写入 demo1.txt，但它给出了`NullPointerException`. 我在这里做错了什么？

```
import java.io.*;

class CopyFile{

    public static void main(String[] args){

        String str = null ;

        try {
        File f = new File("/home/newlabuser/workspace/CopyFileDemo/src/demo.txt");
        if(f.exists())
        {
            if(f.canRead())
            {
                FileInputStream fin = new FileInputStream(f);
                BufferedInputStream bin = new BufferedInputStream(fin);
                DataInputStream din = new DataInputStream(bin);

                while((str=din.readLine())!=null)
                    System.out.println(str);
                    writeTextFile("/home/newlabuser/workspace/CopyFileDemo/src/demo1.txt",str);
                    din.close();
            }
        }
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    }

    public static void writeTextFile(String fileName, String s) {
        FileWriter output;
        try {
            output = new FileWriter("/home/newlabuser/workspace/CopyFileDemo/src/demo1.txt");
            BufferedWriter writer = new BufferedWriter(output);
            writer.write(s);
            writer.close();
        } 
        catch (IOException e) {
        e.printStackTrace();
        }
    }
} 
```

> java.lang.NullPointerException
> 
> 在 java.io.Writer.write(Writer.java:140)
> 
> 在 CopyFile.writeTextFile(CopyFile.java:37)
> 
> 在 CopyFile.main(CopyFile.java:21)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T14:41:15.570

不要低估使用带有循环的花括号。这是你的代码：

```
while((str=din.readLine())!=null)
    System.out.println(str);
    writeTextFile("/home/newlabuser/workspace/CopyFileDemo/src/demo1.txt",str);
    din.close(); 
```

这里， only`System.out.println(str)`会循环运行，循环退出后会执行下一行，显然这里的 str 就是`null`. 因此，当您传递`null`给该`BufferedWriter's` `write()`方法时 - 您会得到一个`NullPointerException`. 将您的代码修复为：

```
while((str=din.readLine())!=null) {
        System.out.println(str);
        writeTextFile("/home/newlabuser/workspace/CopyFileDemo/src/demo1.txt",str);
}
din.close(); 
```

你应该没事。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T14:40:07.633

你的`while`循环体周围缺少大括号。

因此，Java 像这样解析它：

```
while((str=din.readLine())!=null) {
    System.out.println(str);
}

writeTextFile("/home/newlabuser/workspace/CopyFileDemo/src/demo1.txt",str);
din.close(); 
```

因此，该`writeTextFile()`行仅在`while`循环*完成*后运行- when `str`is `null`。

* * *

道德是**始终正确缩进您的代码**。
使用你的IDE来自动格式化你的代码，这样的问题会更加明显。

或者，切换到对空格敏感的语言，例如 Python。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:46:13.233

尝试这个：

```
File fdir = new File("/home/newlabuser/workspace/CopyFileDemo/src");
FileWriter file = new FileWriter(new File(fdir,"demo1.txt"));
file.write(new Scanner(new File(fdir,"demo.txt")).useDelimiter("\\Z").next());
file.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:50:25.427

另外，为避免以后出现更多麻烦：

您将传递`fileName`给 thr`writeTextFile`方法，但从不使用它。所以不要这样做：

`new FileWrite("/home/newlabuser/workspace/CopyFileDemo/src/demo1.txt");`

你应该这样做：

`new FileWriter(fileName);`

叶戈尔已经回答了最初的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T14:50:43.533

这里可能会出错：

```
while((str=din.readLine())!=null) {
    System.out.println(str);
    writeTextFile("/home/newlabuser/workspace/CopyFileDemo/src/demo1.txt",str);
    din.close();
} 
```

你`din`在每个循环中关闭。也许它应该在循环之外。

这里可能会出错：

```
while((str=din.readLine())!=null) {
    System.out.println(str);
    writeTextFile("/home/newlabuser/workspace/CopyFileDemo/src/demo1.txt",str);
}
din.close(); 
```

# android - Android grainy background full size image by pressing and holding screen device

> ID：16039912
> 
> 赞同：1
> 
> 时间：2013-04-16T14:36:25.417
> 
> 标签：android, cordova, background-image, antialiasing

I'm developing an application with phonegap(css3 + html5 + javascript) for iOS and Android 4.x. On Android 4.0.3 device, I use with css a background image as button with this code:

```
.mycssClass
{
   background-image:url(../images/myImage.png);
   background-repeat:no-repeat;
   background-size:100%;
   background-color:transparent;
   border:none;
   font-weight:300;
   ....
 } 
```

Now, the image is displayed correctly, but if I hold down on the screen, it becomes grainy. If I remove background-size:100%; solved the problem, but the image is not displayed in the correct size. I add some code lines for managing anti-aliasing, based on the proposal of this aid

[https://developer.mozilla.org/en-US/docs/CSS/image-rendering](https://developer.mozilla.org/en-US/docs/CSS/image-rendering)

without good result.

Any suggestions?

Thanks in advance, Cristian

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T21:11:12.683

你的问题有解决方案。

问题是由于 CSS 引擎和 Android WebView 组件中的抗锯齿机制之间的差异而发生的。CSS 抗锯齿图像在缩放之前和浏览器抗锯齿在缩放后应用。

为了避免这种影响，您必须以某种方式禁用缩放。

有一种很好的方法可以保持响应式图像并避免缩放。用 img 标签替换你的背景，并在页面加载后将[CanvasImage应用到它们。](https://github.com/PixelsCommander/CanvasImage)

[CanvasImage](https://github.com/PixelsCommander/CanvasImage)将 img 元素替换为与元素在执行时相同大小的画布，因此不会有缩放。

如果您对此有任何问题，请随时联系我。

# java - the page 1 was request but the document has only 0 pages

> ID：16039919
> 
> 赞同：1
> 
> 时间：2013-04-16T14:37:01.313
> 
> 标签：java, android, document, runtimeexception

So I am trying to generate a report that may contain many pages depending upon the user input and data.

Similar error was summarized [here](http://itext-general.2136553.n4.nabble.com/RuntimeExcpetion-Size-of-pageReferences-and-currentPageNumber-1-Are-Not-Equal-td3445663.html) but its not seen to be the actual solution of the problem.

**My function:**

```
public void generateReport()
{
  final String path = "/sdcard/testreport.pdf";
  try
  {
  Document document = new Document();
  writer = PdfWriter.getInstance(document, new FileOutputStream(FILE));
  document.open();
  // many lines code related to report generation
  writer.setOpenAction(action);
  status = GetReport(document);
  document.close(); //RunTimeException here.
  }
  catch (Exception e)
  {
    e.printStackTrace();
  } 
```

But I am getting RunTimeException as-

**Log**

```
04-16 19:34:01.928: W/System.err(14248): java.lang.RuntimeException: The page 1 was requested but the document has only 0 pages.
04-16 19:34:01.929: W/System.err(14248):    at com.itextpdf.text.pdf.PdfWriter.close(PdfWriter.java:1208)
04-16 19:34:01.929: W/System.err(14248):    at com.itextpdf.text.pdf.PdfDocument.close(PdfDocument.java:776)
04-16 19:34:01.929: W/System.err(14248):    at com.itextpdf.text.Document.close(Document.java:420)
04-16 19:34:01.929: W/System.err(14248):    at com.wassap.main.ReportsActivity.generateReport(ReportsActivity.java:541) 
```

I am not getting the clue as of how to close the document only if to know in advance if the page is there.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T21:31:12.040

这个问题很老，但答案可能会帮助其他人以后遇到它。

我有同样的错误。就我而言，我创建的 PDF 只有 1 页，但我创建的 PdfAction 调用的是`PdfAction.GotoLocalPage(2, pdfDest, writer)`. 由于没有第 2 页，因此引发了“请求的页面”错误。

如果您的错误是有 0 个页面，我想知道您是否遇到了一些错误，导致您的 PDF 代码无法运行，因此没有在生成的 PDF 中创建任何页面。

另一种想法是我在您包含的示例代码中没有看到`document.NewPage()`调用。也许有多种方法可以创建新页面，但这就是我手动添加新页面的调用。如果您没有任何这些电话，也许这就是 PDF 中没有页面的原因？

# html - Select options appear outside the window

> ID：16039921
> 
> 赞同：4
> 
> 时间：2013-04-16T14:37:05.970
> 
> 标签：html, css

![options are outside the window](https://i.stack.imgur.com/KH9XI.png)

Is it possible to hide select options inside the window? IE, FF, Chrome behave the same way

overflow:hidden doesn't work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:05:53.583

我认为您对此无能为力。

或者，您可以根据最长的选项增加下拉菜单的宽度

或者您可以剪切最长选项的文本，使其变小。

就像是

```
$('select option').each(function(a,b){
    if(b.value.length > 10){
      b.text= b.text.substring(0, 10)+ a+ '..';
    }
}); 
```

或者您可以创建自己的选择，使用`divs`:)

可能使用第三方[时尚下拉菜单](http://www.jankoatwarpspeed.com/wp-content/uploads/examples/reinventing-drop-down/#)。

看看这个[小提琴](http://jsfiddle.net/nqY7e/)，我用了一个丑陋的 5 分钟实现了这样的下拉菜单，即

创建这样的标记：

```
<ul class="parent">
    <li>---Select---</li>
</ul>
<ul class="option" >
    <li>this is a long option</li>
    <li>this is a even long option</li>
    <li>this is a very long option</li>
    <li>this is a very long option</li>
    <li>this is a very long option</li>
    <li>this is a very long option</li>
</ul> 
```

并通过 css 和 jquery 美化它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:01:17.483

我认为您不能使用 css 来防止它像那样超出浏览器窗口。（我不积极）。

但是，您可以使用[jquery ui 自动完成](http://jqueryui.com/resources/demos/autocomplete/combobox.html)或类似的东西，将选择选项设置为 div，然后它将保留在窗口内。

# visual-studio-2012 - How do I deploy different files for running Integration Tests on different architectures?

> ID：16039925
> 
> 赞同：4
> 
> 时间：2013-04-16T14:37:24.573
> 
> 标签：visual-studio-2012, integration-testing, mstest, xslt, buildconfiguration

We have multiple test projects that access databases directly. Those tests basically validate our sql queries written in C# code. Unfortunately, they are not separated at the moment and are in the same assemblies that also house true, non-dependent Unit tests (I think those database tests are considered Integration test, correct me if I'm wrong).

Currently, we use 2 testsettings files (sqlserver.testsettings and oracle.testsettings) to deploy a different 'ConnectionStrings.config' file before running the tests. Each of them have connection strings specific to their test databases, that should be created before any tests are run. We do this because we want to test these database methods with both SqlServer and Oracle databases, since some of our clients use SqlServer while others use Oracle.

With this in mind, we have an 'app.config' file on the test projects that contains something along these lines:

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings configSource="ConnectionStrings.config"/>
</configuration> 
```

I would like to know if there would be another way to do this without using the testsettings file, which is in this case already deprecated in favor of the new format used by 'runsettings' files. I can't find the equivalent custom-file-deployment feature on runsettings specifications though, and considered creating multiple build configurations using XML transformations over the ConnectionStrings.config or app.config files.

The problem with XML transforms is that it is currently not supported for these types of projects, and I had a very hard time with SlowCheetah when going to the build server, and ultimately decided against using it (I had this same configSource scenario on one of our Web Application projects and tried transforming the external config file. I ended up merging the file with the web.config and using the standard msdeploy transformation).

What would you recommend in this case? This must also be runnable on our build server. At the moment, we can specify the same tests to be run with both testsettings files there.

Ideally we would also like that SqlServer tests be the standard for all developers, and Oracle tests would only be selected to run on our build server. This does not work right now, since every developer needs to specifically select the sqlserver.testsettings file prior to running the tests the first time. With the build configuration idea this could be achieved, so I'm leaning towards that at the moment, but I would like to hear a potentially better approach to the problem.

I have a feeling we are doing something very wrong in this whole process (and this includes the ideas presented in this post) and that there should be a much easier and straightforward way of doing it.

# python - Custom management command console output to log file in Django

> ID：16039934
> 
> 赞同：3
> 
> 时间：2013-04-16T14:37:41.597
> 
> 标签：python, django, logging, command, tornado

I have a custom management command which starts a Tornado loop in order to listen to websocket events. That loops writes its output to the console, which i want to redirect to a log file. I read the Django Docs about [Custom Management Commands](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/), but still have no clue how to do it.

The relevent bits of code of my command which is based on [sockjs-tornado](https://github.com/MrJoes/sockjs-tornado):

```
from tornado import web, ioloop
ioloop.IOLoop.instance().start() 
```

# oauth-2.0 - Google OAuth 2.0 inconsistent token type?

> ID：16039936
> 
> 赞同：1
> 
> 时间：2013-04-16T14:37:47.933
> 
> 标签：oauth-2.0, google-oauth, access-token

Google says in its own [OAuth 2.0 specs](https://developers.google.com/accounts/docs/OAuth2WebServer#callinganapi) in accordance with the [OAuth 2.0 draft](http://self-issued.info/docs/draft-ietf-oauth-v2-bearer.html#authz-header) that the **authorization header** should be:

```
Authorization: Bearer {access_token} 
```

And indeed it works with the **G+ API**.

But with the **Google Calendar API** you need to change the `Bearer` to `OAuth`!

```
Authorization: OAuth {access_token} 
```

You can try it yourself in the [Google OAuth 2.0 Playground](https://developers.google.com/oauthplayground/).

I have discovered this after I hit my head several times against the keyboard.

I couldn't find anything about `OAuth` token type anywhere. Is this an example of Google's ignorance of its own guidelines and standards, or am I missing something?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:46:49.907

The "Authorization: OAuth" format is supported for legacy reasons, earlier drafts of OAuth 2 used this schema.

In your code you should use "Authorization: Bearer". If this is not working then let me know exactly what API (exact URL and parameters) you are trying to use.

As an example, the following works with both Bearer and OAuth: curl --header "Authorization: Bearer XXX" "[https://www.googleapis.com/calendar/v3/users/me/calendarList](https://www.googleapis.com/calendar/v3/users/me/calendarList)"

# html - 链接到外部样式表时页面不会加载

> ID：16039937
> 
> 赞同：0
> 
> 时间：2013-04-16T14:37:48.630
> 
> 标签：html, css, wamp

我正在使用 WAMP 在本地查看我的网站。 在我的页面中使用嵌入样式表
( 我的路径都是正确的，我什至尝试将我的样式表与我的页面放在同一个文件夹中，看看是否有效，但没有成功。需要一些帮助`<style type="text/css"> CSS </style>`

我的 css 保存为：style.css

```
*{
  margin:0;
}

@font-face {
    font-family: 'Aguafina Script';
    font-style: normal;
    font-weight: 400;
    src: local('Aguafina Script Regular'), local('AguafinaScript-Regular'), url(http://themes.googleusercontent.com/static/fonts/aguafinascript/v2/65g7cgMtMGnNlNyq_Z6CvDVi_4UGEKHjyEZCTqR5Ysg.woff) format('woff'); }

#wrapper{
    height:100%;
    margin-left:0px;
    margin-bottom:0px;
}
#sidebar{
    position: absolute;
    left:0;
    top:0;
    width:350px;
    background:rgba(222,222,222,0.9);
    text-align: center;
    animation:mymove 1s;
    -webkit-animation:mymove 1.35s;
    -moz-animation:mymove 1s;
}

#nav{
    margin-top: 20px;
}
#nav ul{
    text-align: center;
    padding: 0;
}
#nav li {
    list-style-type: none;
    margin: auto;
    font-size: 19px;
    text-transform: uppercase;
    margin-top: 15px;
    letter-spacing: 6px;

}
#nav li a{
    text-decoration: none;
    color:#666;
}
#nav li a:hover{
    color:#0bf;
}
#sidebar img{
    margin-top: 15px;
}
h1{
    font-family: 'Aguafina Script';
    font-size: 3em;
    padding-bottom: 15px;
    border-bottom: 2px dotted #aaa;
    text-decoration: none;
    width:80%;
    color:#0bf;
    margin: auto;
}

#contact{
    margin-top:20%;
    bottom:0;
    color:#666;
    font-size: 12px;
}

@-webkit-keyframes mymove{
    0%{
        margin-left: -350px;
    }
    100%{
        margin-left: 0px;       }
    }
} 
```

我的 html 保存为 index.php

```
<!DOCTYPE html>
<html>
<head>
<title>My Test Site</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="style.css">

</head>
<body>
<div id="sidebar">
    <img src="logo.png" width="200" height="200">
    <h1>Example</h1>
    <div id="nav">
        <ul>
            <li><a href="">Home</a></li>
            <li><a href="">About</a>
            <li><a href="">Gallery</a></li>
            <li><a href="">Contact</a></li>
        </ul>
    </div>
    <div id="contact">
        <p>+44 784 737 9557</p>
        <p>MATTY@EXAMPLE.COM</p>
        <p>YORKSHIRE, UK</p>
        <p>&copy;<?php echo date('Y'); ?> Peelblue Design</p>
    </div>
</div>

<script type="text/javascript">

//set div height 100%

$(function(){
$('#sidebar, #cvbar').css({'height':($(document).height())+'px'});
$(window).resize(function(){
    $('#sidebar').css({'height':($(document).height())+'px'});
});
});

//sidebar slide in on page load

$("div#sidebar")
.css("margin-left",-$(this).width())
.animate({
    marginLeft:0
}, 1200);

</script>

</body>
</html> 
```

都在同一个文件夹中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:43:39.193

正如@Michael 所说，请向我们提供有关如何调用外部样式表的更多信息。通常，您在 HTML-head 中调用样式表，如下所示：

```
<link rel="stylesheet" href="css/styles.css"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:46:39.090

您可以简单地导入您的外部 CSS：

```
<style type="text/css">
    @import url("external.css");
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T16:00:50.003

css 与`<link />`文档头部中的标签链接，如下所示

`<link href="cssfolder/yourcss.css" media="all" rel="stylesheet" type="text/css"/>`

那应该这样做。

# javascript - 在 EXT.NET 中执行 PartialViewResult 脚本之前注入 javascript？

> ID：16039938
> 
> 赞同：1
> 
> 时间：2013-04-16T14:37:49.590
> 
> 标签：javascript, code-injection, ext.net

我有一个部分视图，它被请求并加载到模式窗口中。

以下是生成局部视图的操作方法：

```
public Ext.Net.MVC.PartialViewResult GetPartialView()
{
    var p = new Ext.Net.MVC.PartialViewResult { Model = ...., ViewName = "MyPartialView" };
    //!!need to manipulate p here to run my custom javascript on client!!
    return p;
} 
```

通过 ajax 请求调用 GetPartialView() 后，会生成必要的脚本并将其发送回客户端。

执行脚本如下所示：

```
{script:"Ext.net.ResourceMgr.registerIcon([\"TextListBullets\",\"Add\"]);Ext.onReady(function(){Ext.create(\"Ext.window.Window\",{height:400,hidden..... bla bla} 
```

**问题：**

我如何在这个生成的 javascript 块中注入我自己的自定义代码？

**我的目的**是动态加载部分视图中需要的一些外部 javascript 文件。

我不想在我使用这个局部视图的每个主视图中静态地包含脚本引用。我想通过在需要时加载 js 文件来获得某种自动化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:57:12.027

我正在分享 Ext.NET 论坛的答案：

请参阅以下示例 [http://mvc.ext.net/#/Dynamic_Partial_Rendering/Add_Tab/](http://mvc.ext.net/#/Dynamic_Partial_Rendering/Add_Tab/)

```
@{    MvcResourceManager.RegisterGlobalStyle(Url.Content("~/Areas/Dynamic_Partial_Rendering/Content/Tab.css"));} 
```

# python - 用空格（\s）Python lxml搜索类名

> ID：16039940
> 
> 赞同：0
> 
> 时间：2013-04-16T14:38:00.603
> 
> 标签：python, lxml

我想知道是否有人可以提供帮助:)

我正在使用 python lxml 和 cssselector 从 HTML 页面中抓取数据。

我可以使用此方法轻松选择大多数类，并且发现它非常方便，但我在选择带空格的类名时遇到问题

例如，我想从以下类中提取 Blah：

```
<li class="feature height">Blah blah</li> 
```

我尝试使用以下 css 选择器但没有成功 - 不包括整个路径，因为这不是问题

```
li.feature.height
li.feature height
li.feature:height 
```

有人知道怎么做吗？我找不到答案，并且确信这一定是人们需要做的相当普遍的事情......

我不能只选择父元素

```
li.feature 
```

由于数据在不同页面上的顺序不同，因此同样适用于第 n 个元素选择...

现在在这个问题上挠头并搜索了很多，希望有人知道！

我可以通过使用 re's 获取数据来解决这个问题，但我想知道是否有一个简单的解决方案......

提前感谢您的帮助！

马特

根据要求提供额外信息 - 它不起作用，因为它返回一个空列表或布尔值的否定结果

所以如果使用

```
css_9_seed_height = 'html body div.seedicons ul li.feature.height'

# 9\. Get seed_height
seed_height_obj = root.cssselect(css_9_seed_height)
print seed_height_obj 
```

这将返回一个空列表 - 即找不到该类，但它在那里

您可以假设 root.cssselect() 正常工作，因为我正在以相同的方式检索许多其他信息

# mysql - MYSQL 关系查询问题

> ID：16039941
> 
> 赞同：3
> 
> 时间：2013-04-16T14:38:00.603
> 
> 标签：mysql, sql

我正在使用以下数据库模型

![在此处输入图像描述](https://i.stack.imgur.com/d2PCW.jpg)

一位客户要求我对他们的数据库进行一些更改，我已经有几年没有玩过关系数据库了，通常使用平面数据库

有人可以帮我举个例子，说明以下查询是如何工作的。

说如果我想

选择某个流派ID下标题为“%Matrix%”的所有电影

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T14:40:24.437

使用 an`inner join`连接三个表

```
SELECT F.title 
FROM   film F 
       INNER JOIN filmgenres FG 
               ON F.filmid = FG.film_filmid 
       INNER JOIN genres G 
               ON FG.genres_genreid = G.genreid 
WHERE  F.title LIKE '%Matrix%' AND G.genre = "Some Genre" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T14:40:52.207

你需要先加入表格，

```
SELECT  a.*, c.Genre
FROM    Film a
        INNER JOIN FilmGenres b
            ON a.FilmID = b.Film_FilmID
        INNER JOIN Genres c
            ON b.Genre_GenreID
WHERE   a.Title LIKE '%matrix%' 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

但是如果你想搜索特定的流派，那么你也可以添加一个条件，

```
SELECT  a.*, c.Genre
FROM    Film a
        INNER JOIN FilmGenres b
            ON a.FilmID = b.Film_FilmID
        INNER JOIN Genres c
            ON b.Genre_GenreID
WHERE   a.Title LIKE '%matrix%' AND c.GenreID = 10 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T14:41:22.113

```
SELECT Film.*
FROM Film f
JOIN FilmGenres fg ON g.Film_FilmID = f.FilmID
WHERE fg.Genres_GenreID = 3
AND Title LIKE '%Matrix%' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T14:42:13.410

这是一个非常简单的连接：

```
select
    Film.*
from
    Film
inner join FilmGenres on
    Film.FilmID = FilmGenres.Film_FilmID
where
    Film.Title like "%Matrix%" and
    FilmGenres.Genres_GenreID = ? 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T14:45:02.557

```
SELECT * FROM Film INNER JOIN FilmGenres ON Film.FilmID = FilmGenres.Film_FilmID
    WHERE FilmGenres.Genres_GenreID = 1 
          AND
          Film.Title like '%Matrix%' 
```

# verilog - Verilog：大型总线或合成

> ID：16039943
> 
> 赞同：0
> 
> 时间：2013-04-16T14:38:01.817
> 
> 标签：verilog

我正在寻找对总线进行逻辑或运算。

工作代码：

```
parameter Width = 8;
wire my_bus [Width-1:0];
wire bus_or = (my_bus[0] || my_bus[1] || ... || my_bus[Width-1]) 
```

这工作正常，但完全不适合大型总线（即 64 位）

我见过：（从[这里](http://www.fpga4fun.com/VerilogTips.html)）

```
wire bus_or = |my_bus; 
```

然而，这只是抱怨错误：一元运算符'|'的非法操作数 和连续分配的非法右手边。

有趣的是语法：

```
wire bus_or = |{my_bus[0], my_bus[1], ..., my_bus[Width-1]} 
```

工作正常，尽管连接创建了一个总线，原始的未拆分对象是一个总线开始......

我们正在使用生成块来创建各种信号、线路、寄存器等，目的是实现可扩展的参数化代码。如果总线 OR 的语法如此容易出错，这似乎是一种耻辱。

我想要的是像wire bus_or = |my_bus; 这样简单的东西。

对不起。很简单的回答！！！

`wire bus_or = |my_bus;`当总线被声明为向量但不是数组时，该符号工作正常：请参见[此处](http://www.verilogtutorial.info/chapter_3.htm)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T15:24:32.260

您不是在定义 N 位总线，而是定义 1 位总线的集合。

你真的想要：

```
parameter Width = 8;
wire [Width-1:0] my_bus ; 
```

这应该允许以下工作。

```
wire bus_or = |my_bus; 
```

注意：将常量设为大写是一种很好的做法。宽度而不是宽度。也可以为其添加一些语义，W_DATA 或 W_CONTROL 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T16:07:30.917

摩根已正确回答，您必须以打包数组格式定义您的总线才能在整个总线上执行操作。

data_type [width-1:0] 总线。在内存中，它将被存储为
|x|bus_width-1|.....|bus_1|bus_0|

解压后的数组用于执行按位运算 data_type bus [width-1:0] 在内存中将被存储为
|x|x|bus_0|
|x|x|bus_1|
|x|x|bus_1|
.
.
.
|x|x|bus_width-1|

# sql - 使用唯一的 Sql Azure 连接字符串打包和发布 Azure 云服务

> ID：16039944
> 
> 赞同：2
> 
> 时间：2013-04-16T14:38:02.367
> 
> 标签：sql, azure, connection-string

我有一个带有 Azure 云服务项目和一个 webrole 的 .NET Web 解决方案。我将它部署到东海岸西海岸数据/计算中心以进行故障转移，并被要求使用 Powershell MSBuild 和 Jenkins 自动执行部署。

问题是我需要在打包和发布到每个部署之前更改 Web.config 中的 Sql Azure 数据库连接字符串。看起来很简单。

我了解 webrole 属性设置选项卡允许您使用“字符串”或“连接字符串”类型向每个部署添加自定义配置属性，但看起来“连接字符串”选项仅适用于 Blob、表或队列存储. 如果我使用“字符串”并给它一个 Sql Azure 连接字符串类型，它会将其写为键/值对，而实体框架和成员资格提供程序找不到它。

有没有办法添加指向 Sql Azure 的每个部署的连接字符串设置？

谢谢，

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T13:16:28.883

埃里克的解决方案是完全有效的，我找到了另一种解决问题的方法，所以我想我会回来把它放在这里，因为我很难找到答案。

诀窍是让实体框架和任何提供程序（如 asp.net Membership/profile/session 等）直接从 Azure 服务配置而不是站点 web.config 文件中读取连接字符串。

对于提供程序，我能够创建继承 System.Web.Providers.DefaultMembershipProvider 类的类并覆盖 Initialize() 方法，然后我使用我编写的帮助程序类来使用 RoleEnvironment.GetConfigurationSettingValue(settingName); 检索连接字符串；调用，它从 Azure 服务配置中读取。

然后我告诉 Membership 提供者使用我的类而不是 DefaultMembershipProvider。这是代码：

**网络配置：**

```
<membership defaultProvider="AzureMembershipProvider">
  <providers>
    <add name="AzureMembershipProvider" type="clientspace.ServiceConfig.AzureMembershipProvider" connectionStringName="ClientspaceDbContext" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers> 
```

注意自定义提供程序“AzuremembershipProvider”

**AzuremembershipProvider 类：**

```
public class AzureMembershipProvider : System.Web.Providers.DefaultMembershipProvider
{
    public override void Initialize(string name, System.Collections.Specialized.NameValueCollection config)
    {         
        string connectionStringName = config["connectionStringName"];

        AzureProvidersHelper.UpdateConnectionString(connectionStringName, AzureProvidersHelper.GetRoleEnvironmentSetting(connectionStringName), 
            AzureProvidersHelper.GetRoleEnvironmentSetting(connectionStringName + "ProviderName"));

        base.Initialize(name, config);
    }
} 
```

**这是帮助类 AzureProvidersHelper.cs：**

```
public static class AzureProvidersHelper
{
    internal static string GetRoleEnvironmentSetting(string settingName)
    {
        try
        {
            return RoleEnvironment.GetConfigurationSettingValue(settingName);
        }
        catch
        {
            throw new ConfigurationErrorsException(String.Format("Unable to find setting in ServiceConfiguration.cscfg: {0}", settingName));
        }
    }

    private static void SetConnectionStringsReadOnly(bool isReadOnly)
    {
        var fieldInfo = typeof (ConfigurationElementCollection).GetField("bReadOnly", BindingFlags.Instance | BindingFlags.NonPublic);
        if (
            fieldInfo != null)
            fieldInfo.SetValue(ConfigurationManager.ConnectionStrings, isReadOnly);
    }

    private static readonly object ConnectionStringLock = new object();

    internal static void UpdateConnectionString(string name, string connectionString, string providerName)
    {
        SetConnectionStringsReadOnly(false);

        lock (ConnectionStringLock)
        {
            ConnectionStringSettings connectionStringSettings = ConfigurationManager.ConnectionStrings["name"];
            if (connectionStringSettings != null)
            {
                connectionStringSettings.ConnectionString = connectionString;
                connectionStringSettings.ProviderName = providerName;
            }
            else
            {
                ConfigurationManager.ConnectionStrings.Add(new ConnectionStringSettings(name, connectionString, providerName));
            }
        }

        SetConnectionStringsReadOnly(true);
    }
} 
```

这里的关键是 RoleEnvironment.GetConfigurationSettingValue 从 Azure 服务配置而不是 web.config 读取。

对于未指定提供程序的实体框架，我必须使用帮助程序类中的 GetRoleEnvironmentSetting() 方法再次将此调用添加到 Global.asax：

```
var connString = AzureProvidersHelper.GetRoleEnvironmentSetting("ClientspaceDbContext");

        Database.DefaultConnectionFactory = new SqlConnectionFactory(connString); 
```

这个解决方案的好处是您最终不必处理 Azure 角色 onstart 事件。

享受

冲刺

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:57:42.400

大卫，

一个不错的选择是使用 Azure 配置。如果右键单击 Azure 项目，可以添加额外的配置。将您的连接字符串放入正确的配置中（例如，ServiceConfiguration.WestCoast.cscfg、ServiceConfiguration.EastCoast.cscfg 等）。

在您的构建脚本中，使用配置名称将 TargetProfile 属性传递给 MSBuild，这些设置将构建到最终的 cscfg 中。

如果您遇到任何问题，请告诉我。我采用了这种方法，并且尝试了几次才能使其正常工作。[一些可能有帮助的细节](http://msdn.microsoft.com/en-us/library/windowsazure/hh535755.aspx)。

埃里克

# azure - Azure COM 对象

> ID：16039950
> 
> 赞同：8
> 
> 时间：2013-04-16T14:38:36.093
> 
> 标签：azure, com, web

我正在尝试将我在具有 IIS 的服务器上托管的网站移动到 Azure 网站。我正在使用 COM 对象，但我不确定是否可以注册它？我发现一些帖子谈论上传 dll 并在启动时注册它，但该文章似乎丢失了。这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T15:16:01.627

我在 Azure 上注册旧 COM 组件时遇到了这个确切的问题。我在这里记录了我的方法：

[Windows Azure 上的 AspPDF 和 AspJPEG](https://stackoverflow.com/questions/14981830/asppdf-and-aspjpeg-on-windows-azure)

Igorek 是正确的，您需要使用 Web 角色来实现这一点。上面的解决方案基于带有启动脚本的单个 Web 角色，以将 regsvr32 作为启动任务运行。

总而言之，实现这一目标基本上有两个部分。首先创建一个批处理文件来运行 regsvr32 命令：

```
chcp 1252>NUL
regsvr32 /s .\library\my-com-class.dll
exit /b 0 
```

然后在你的 ServiceDefinition.csdef 文件中定义一个启动任务：

```
<Startup>
<Task commandLine="mybatchfile.cmd" executionContext="elevated" taskType="simple" />
</Startup> 
```

这将触发命令文件在部署时运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T14:43:43.087

不能在 Azure 网站中注册 COM 对象。您需要升级到 Web 角色才能执行此操作。com 对象的注册可以在启动脚本期间发生。

# terminate - NSApplication.SharedApplication.Terminate 在未处理的异常后实际上并没有终止我的应用程序

> ID：16039954
> 
> 赞同：0
> 
> 时间：2013-04-16T14:38:43.917
> 
> 标签：terminate, monomac, nsapplication

我正在使用 MonoMac 为 OSX 开发一个简单的应用程序。当我的应用程序遇到未处理的异常时，我会通过以下方式捕获它们：

> AppDomain.CurrentDomain.UnhandledException += (sender, e) => Unhandled(e.ExceptionObject as Exception);

在函数 Unhandled() 中，我记录异常并运行模式窗口以通知用户出现问题。

然后我通过在应用程序的某个地方抛出一个常规异常来继续测试它。崩溃报告窗口按原样出现，并记录错误。

但是在关闭此窗口后，我希望应用程序退出，如果我没有发现错误，它会这样做。它不是; 应用程序的主窗口和停靠图标仍然存在，但窗口完全冻结。

如果我删除上面的代码行，应用程序在崩溃时会完全关闭。

我尝试通过调用强制应用程序退出：

```
NSApplication.SharedApplication.Terminate(myAppDelegate); 
```

但这似乎根本没有任何作用。我在应用程序的退出按钮中使用了完全相同的代码行，并且它按预期工作，因此在捕获未处理的异常后，应用程序状态必须有一些特别之处。但是什么？

为了以防万一，我在 AppDelegate 中覆盖了以下内容，但这似乎没有任何区别：

```
public override NSApplicationTerminateReply ApplicationShouldTerminate (NSApplication sender)
{
    return NSApplicationTerminateReply.Now;
} 
```

我认为显示模态表单可能会对应用程序状态产生影响，但经过测试，我发现是否显示模态表单没有任何区别。仍然是冻结的主窗口而不是关闭。

*编辑：测试时我一定做错了什么。如果我不显示错误表单，它实际上可以正常工作。*

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:46:41.817

我没有确切的答案，并且评论不会​​包含我的代码示例；但我可以告诉你，我在概念上在我的应用程序中做几乎完全相同的事情，它工作得很好。我的代码：

```
private static void OnException(Exception ex)
{
    new NSObject().InvokeOnMainThread(() => {
        try 
        {
            using (ErrorWindowController frmErrorMessage = new ErrorWindowController(ex)) 
            {
                Console.WriteLine(ex);
                    NSApplication.SharedApplication.RunModalForWindow(frmErrorMessage.Window);
            }
        } 
        finally 
        {
                NSApplication.SharedApplication.Terminate(NSApplication.SharedApplication);
        }
    });
} 
```

* * *

编辑：

确保在关闭窗口时停止模式会话，否则调用`RunModalForWindow`将永远不会返回。

我使用一个按钮关闭我的模态窗口，如下所示：

```
partial void butClose_Click(NSObject sender)
{
    this.Window.OrderOut(sender);
    this.Window.Close();

    NSApplication.SharedApplication.StopModal();
} 
```

# javascript - 检查数组长度javascript

> ID：16039958
> 
> 赞同：0
> 
> 时间：2013-04-16T14:39:03.900
> 
> 标签：javascript, jquery, validation

这是我第一次尝试使用 Javascript 和 jQuery 进行数据验证。

我的错误数组填充得很好，但我的问题是检查这个数组是否为空。在我的情况下，它总是正确的。它总是会提醒我“错误 leeg”，即使数组是空的，检查`console.log(error)`：

```
<script type="text/javascript">
$(document).ready(function () 
{
    var error = [];
    $('#contactformulier').submit(function() {

      if($('input#namet').val().length == 0) {
          error['naam'] = 'Geen geldige naam ingevuld';
      } else{
          delete error['naam'];
      }

      if($('input#mailt').val().length == 0){
          error['mail'] = 'Geen geldig e-mailadres ingevuld';
      } else{
          delete error['mail'];
      }

      if($('textarea#message').val().length == 0){
          error['bericht'] = 'Geen geldig bericht ingevuld';
      } else{
          delete error['bericht'];
      }

      console.log(error);
      if (error.length < 1) {
        alert('errors leeg');
      }

      return false;
    });
});
</script> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:42:16.497

您只能对数组使用数字索引 - 至少在您想使用数组功能（例如 Array#length）时。

IE

```
var error = [];
error.push({ naam: "geen geldige naam" });
error.push({ mail: "geen geldige email" });
error.length == 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:41:33.223

那是因为您将属性添加到数组而不是索引项。

您可以使用以下方法将项目添加到数组中[`push()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)：

```
error.push('Geen geldig bericht ingevuld'); 
```

在开始验证之前，清除数组：

```
error.length = 0;
// start validation logic 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:43:06.403

问题是您混淆了 JavaScript 类型。您认为是关联数组，在 JavaScript 中是具有属性和方法的*对象。*

所以你需要定义它：

```
var error = {}; 
```

如果可以使用 来检查简单的数组空`arr.length > 0`性，则可以使用 jQuery 方法检查对象“空性”（即缺少属性/方法）[`$.isEmptyObject()`](http://api.jquery.com/jQuery.isEmptyObject/)：

```
if ( $.isEmptyObject(error) ) { ... } 
```

**参考：** [https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T14:57:25.367

```
<script type="text/javascript">
$(document).ready(function () 
{
    var error;
    var inError;
    $('#contactformulier').submit(function() {

      error = {};
      inError = false;

      if($('input#namet').val().length == 0) {
          error['naam'] = 'Geen geldige naam ingevuld';
          inError = true;
      }

      if($('input#mailt').val().length == 0){
          error['mail'] = 'Geen geldig e-mailadres ingevuld';
          inError = true;
      }

      if($('textarea#message').val().length == 0){
          error['bericht'] = 'Geen geldig bericht ingevuld';
          inError = true;
      }

      console.log(error);
      if (inError) {
        alert('errors leeg');
      }

      return false;
    });
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T15:01:10.103

正如其他人所说，您不能将`Object`被用作关联数组的长度，该`.length`属性适用于*真实*数组。

但是，您可以做的是询问有多少键：

```
var n = Object.keys(error).length; 
```

# c# - ClickOnce 应用程序安装 - 安全警告

> ID：16039960
> 
> 赞同：5
> 
> 时间：2013-04-16T14:39:05.277
> 
> 标签：c#, deployment, warnings, clickonce, code-signing-certificate

我在网站上部署了一个 clickonce 应用程序（例如[http://example.com](http://example.com)），用户将从该网站下载我发布的应用程序的 setup.exe 文件，并将该应用程序安装在他们的计算机上。

**我已使用 GoDaddy 为我的公司颁发的证书签署了我的应用程序的 ClickOnce 清单。**

但是，用户在尝试安装我的应用程序时仍然会收到以下应用程序安全警告。有没有办法让这个安全警告根本不显示？

任何帮助将不胜感激。

![单击应用程序安装后 - 安全警告](https://i.stack.imgur.com/GW5Ib.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T15:17:08.343

好吧，您必须按照 MSDN 库（[源](http://msdn.microsoft.com/en-us/library/ms996418.aspx)）中的步骤操作：

> 第一次在用户桌面上启动 ClickOnce 应用程序时，.NET Framework 运行时将首先检查以确保应用程序清单没有被篡改，因为它们是使用用于签名的任何发布者证书进行签名的。如果他们通过了该检查，则运行时将查看受信任的根证书颁发机构存储，并查看发布者证书颁发者的证书是否安装在该存储中。然后它将查看证书上的发布者是谁，并查看他们的证书是否在受信任的发布者存储中。**如果这两件事都是真的，那么*默认情况下*不会提示用户**，并且应用程序将被授予应用程序清单文件中指定的任何权限。

只要最终用户没有修改他的通知设置，提示就不会出现。

# matlab - 在matlab的最后一列具有最大元素的唯一行

> ID：16039961
> 
> 赞同：2
> 
> 时间：2013-04-16T14:39:06.350
> 
> 标签：matlab

我有一个具有相同行的矩阵，这些行仅在两列中有所不同，如下所示：

```
A = [2 3 3 3 1 0.7;
     2 3 3 3 2 0.4;
     3 2 2 2 1 0.8;
     3 2 2 2 3 0.3] 
```

现在我需要选择具有相同元素 column1,2,3,4 并且在 column6 中具有最大元素的唯一行，例如：

```
Response: [2 3 3 3 1 0.7;
           3 2 2 2 1 0.8] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:49:32.430

按照前4列排序，按照第6列降序排列。然后，在由前 4 列决定的组中选择第一个出现。

```
out     = sortrows(A,[1:4,-6]);
[~,idx] = unique(out(:,1:4),'rows');
out(idx,1:5) 
```

# android - ListView 中的 ImageViews 不显示

> ID：16039964
> 
> 赞同：1
> 
> 时间：2013-04-16T14:39:10.673
> 
> 标签：android, listview, caching, android-asynctask, android-imageview

我有带有 EventAdapter 的 ListView。

```
public class EventAdapter extends BaseAdapter {
...
public View getView(int position, View view, ViewGroup parent) {
     ...
     cache.imgIcon.setImageDrawable(ImgCache.setImg(url, progressBar));
     ...
} 
```

ImgCache 它的类用于缓存图像。

```
public class ImgCache {
    public static HashMap<String, Drawable> imgCache;

    // get img from cache if exist, or download and put in cache
    public static Drawable setImg(final String link, final ProgressBar progressBar) {
        final Drawable[] image = {null};
        if (imgCache.containsKey(link)) {
            image[0] = imgCache.get(link);
            progressBar.setVisibility(View.INVISIBLE);
        } else {
            new AsyncTask<Void, Void, Drawable>() {
                @Override
                protected Drawable doInBackground(Void... params) {
                    URL url = null;
                    try {
                        url = new URL(link);
                        URLConnection connection = url.openConnection();
                        image[0] = Drawable.createFromStream(connection.getInputStream(), "src");
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    imgCache.put(link, image[0]);
                    return image[0];
                }

                @Override
                protected void onPostExecute(Drawable result) {
                    progressBar.setVisibility(View.INVISIBLE);
                }
            }.execute();
        }
        return image[0];
    }
} 
```

问题是什么？

在我打开`Activity`所有`ListView`图像后开始加载。但是加载完成后它们不会显示。它看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/MGUI2.png)

然后我尝试向下滚动 2 个项目，然后返回到之前的位置。完成此操作后，我可以看到 2 个带有图像的上部项目。当我滚动到它们时，也可以看到所有向下的图像。

![在此处输入图像描述](https://i.stack.imgur.com/S8DDD.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:43:05.613

根据您的问题，您似乎需要`ListView`在下载图像后刷新您的图像（因为当您滚动时它们确实会出现）：

```
adapter.notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T14:52:52.290

[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)是异步的，因此您的应用程序的流程是：

ListView Item 需要显示 -> 为 List item 调用 Adapter.getView(...) -> 如果图像不在缓存中，则执行 AsyncTask 并返回（不等待结果）所以，当您向下滚动和返回时，再次调用 Adapter.get(...) 方法，但是这次图像在缓存中，因此它返回显示的 Drawable 对象

解决此问题的一种方法是从 AsyncTask 对 Adapter 进行回调，该回调将在调用`notifyDataSetChanged`Adapter 检索图像后更新图像，直接设置特定的 Drawable 或类似的东西（同时显示图像的加载 gif？ )

或者

调用 AsyncTask`get(long timeout, TimeUnit unit)`方法，该方法将阻塞人线程并等待 AsyncTask 完成。完成后，它将返回结果（在这种情况下是您的 Drawable）。这将导致主 UI 线程在获取图像时挂起，因此不是解决此问题的最佳方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T14:44:26.163

问题是您的视图加载并填充了您的列表 OnCreate，但当时您的异步任务尚未返回您的列表，因此当 getView 调用您的缓存时它是空的，由于 android View Recycling 当您滚动它时再次调用 getView，这填充缓存的时间。

我建议您`NotifyDataSetChanged`在 ListView 适配器上调用 onPostExecute，这将在您拥有图像后强制重绘。

# javascript - 从 Backbone 迁移到 AngularJS - 有多难？

> ID：16039966
> 
> 赞同：12
> 
> 时间：2013-04-16T14:39:12.633
> 
> 标签：javascript, backbone.js, angularjs, refactoring

我正在 Backbone 开发一个大项目（大约 8000 行 javascript，不包括外部库），我正在考虑迁移到 AngularJS。

目前我有很多处理 DOM 更改、绑定和解除绑定事件的代码。我正在使用 Mustache 进行模板渲染。大多数数据使用 AJAX 加载，并存储在 Backbone 模型中，其中一些使用 BackboneRelational。我正在使用大约 10 个小的 jQuery 插件来做精美的 UI 内容。

我决心进行此迁移，但是我担心我的最后期限。所以问题是：

1.  使用 AngularJS 重写它需要多长时间？也许有人可以分享他的经验。
2.  是否可以立即开始使用 Angular，并使用它实现新功能，而不会在我们需要与 Backbone 部分交互时引起头痛？
3.  如果我决定在截止日期后进行重构，您会推荐哪些实践来使代码更容易迁移？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T15:59:58.380

我将 5k 多行 BB 代码移植到 Angular。当我第一次开始使用 Angular 时，我做了这个移植，如果我没记错的话，我是在一个周末完成的，然后是 3 天。所以大约在5天内完成。您必须注意，我编写了整个 BB 应用程序（所有 5k 行也是如此..），因此我更容易移植。

您可能最初可以混合使用 BB 和 Angular（在 Angular 中开发新部件并慢慢移植 BB 部件……），但我建议如果可以的话，请先移植整个应用程序。

作为一般规则，您的所有主干模型和集合都应该进入服务（也许同名？）。移植 html 和 Mustache 模板应该是小菜一碟。稍微棘手的部分是您的 jquery 插件。但如果它们很简单，那么您将能够使用 angular-ui jquery passthrough ( [http://angular-ui.github.io/](http://angular-ui.github.io/) )。

# quickbooks - QuickBook Enterprise 12 API 与 IPP DevKit 版本 2.0

> ID：16039976
> 
> 赞同：0
> 
> 时间：2013-04-16T14:39:43.523
> 
> 标签：quickbooks

摘要：- IPP DevKit 版本 2.0 将与 QuickBook Enterprise 12 Windows 桌面应用程序一起使用。

我认为它只适用于在线版的 quickbook。请确认。

* * *

我是 Quickbook 开发的新手，想开发从 QuickBook Enterprise 12 Windows 桌面应用程序中获取数据的应用程序。我创建了 QBXML 和 QBFC 两个 SDK，其中 QBFC 是一个 com 组件，通过它我可以获取各种表格数据。

但是 com 这个 COM 组件有一些限制，我们不能以块和其他的形式获取记录。

所以我搜索并找到了提供缺失功能的 IPP DevKit 版本 2.0。但我不确定这是否适用于 QuickBook Enterprise 12 Windows 桌面应用程序。

我认为它只适用于在线版的 quickbook。请确认。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:31:20.270

IPP DevKit 2.0 与 QuickBooks V2 REST API 一起用于 QuickBooks Online 和 QuickBooks Desktop。

REST API：[http ://docs.developer.intuit.com/0025_Intuit_Anywhere](http://docs.developer.intuit.com/0025_Intuit_Anywhere)

DevKit 文档：[http ://docs.developer.intuit.com/0025_Intuit_Anywhere/0055_DevKits/0100_IPP_.NET_DevKit](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0055_DevKits/0100_IPP_.NET_DevKit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:38:18.983

所以在我的场景中，QBFC 是唯一的选择。因为同步管理器将首先将数据上传到直觉服务器，然后将数据提供给我以及最终用户选择是否使用同步管理器。

# linux - 如何以编程方式检测 Ubuntu 上的软件包和操作系统版本

> ID：16039979
> 
> 赞同：1
> 
> 时间：2013-04-16T14:39:57.220
> 
> 标签：linux, bash, ubuntu, apt-get

从 bash 中，我将运行哪些命令来获取一个布尔值，该值指示 Ubuntu 中是否有可用的软件包更新或操作系统升级？

我知道如何运行`apt-get upgrade`和实际执行升级，但是如果不使用参数并尝试解析标准输出`apt-get dist-upgrade`，我找不到任何简单的方法来检测这些选项何时可用。`--simulate`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:36:33.777

在 Google 中重新表述我的问题导致我得到[这个答案](https://askubuntu.com/questions/49958/how-to-find-the-number-of-packages-needing-update-from-the-command-line)，该答案将命令简单地列出为：

```
/usr/lib/update-notifier/apt-check 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:51:41.990

命令：

```
aptitude search '~U' 
```

将列出所有可用的软件包更新。您可以使用选项自定义输出格式`-F`；[有关如何操作的详细信息，请参阅手册](http://algebraicthunk.net/~dburrows/projects/aptitude/doc/en/ch02s04s01.html#secDisplayFormat)。

我不知道 Ubuntu 版本更新的任何直接等效项。

（但相关的是，`apt-get dist-upgrade`它不会升级到较新的版本。它与 的概念相同`upgrade`，只是在处理不断变化的依赖关系方面更加激进。）

# jquery - 如何在 jQuery 中获取具有特定类名的元素？

> ID：16039988
> 
> 赞同：4
> 
> 时间：2013-04-16T14:40:18.033
> 
> 标签：jquery, html, class

使用 jQuery 1.9.1 和 HTML5，我想捕获只有特定类名的元素。

假设我有以下 HTML 代码：

```
<div>
     <span class="req">A</span>
     <span class="req notreq">B</span>
     <span class="req notreq">C</span>
     <span class="req">D</span>
</div> 
```

我只想捕获`<span>`具有类的元素，`req`即值 A 和 D。

使用 jQuery，我可以捕获所有使用的值和使用`console.log($('.req'));`的所有`notreq`值`console.log($('span.req.notreq'))`

我只需要`req`价值观。有什么帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T14:42:34.407

只需像这样将类名添加到选择器中...

```
$("span[class='req']"); 
```

这将只返回`req`作为一个类的 span 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:42:25.273

```
$('span.req').not('.notreq').each(function() {
   console.log($(this).text());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:43:10.450

使用 :not 伪元素：

```
$('span.req:not(.notreq)'); 
```

# javascript - 用 DateJS 比较 2 次

> ID：16039989
> 
> 赞同：0
> 
> 时间：2013-04-16T14:40:20.090
> 
> 标签：javascript, date, datejs

我在这里看到了一些关于查找使用两个不同日期之间差异的不同问题。

我的问题类似于[Parse ONLY a time string with DateJS](https://stackoverflow.com/questions/4012702/parse-only-a-time-string-with-datejs)。

我基本上有2个时间输入：

`<input id="start_time" type="text">` `<input id="end_time" type="text">`

这些格式将始终为：`07:15 AM`或`08:30 AM`

本质上，我要做的是确保`start_time`不大于`end_time`.

我曾尝试使用 DateJS 来解析日期，但它返回`null`：

```
Date.parseExact("03:15 PM", "HH:mm");    <--- returns null 
```

我应该如何比较两个输入字段（使用 DateJS 或其他）以确保 start_time 不大于 end_time？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:44:00.203

您需要将 AM/PM 字段添加到您用于解析的格式中。尝试使用

```
HH:mm tt 
```

代替

```
HH:mm 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:52:17.207

没有完全回答这个问题，但 DateJS 看起来有点过时了。我建议您查看[Moment.js](http://momentjs.com/docs/)，您可以在其中执行此操作：

```
moment("03:15 PM", "hh:mm A").isAfter(moment("03:05 PM", "hh:mm A"));
// false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:04:38.673

您可以使用`Date.parseExact`@matthewtole 提供的格式修订，或者您也应该能够使用“Date.parse”。

`Date.parseExact`将提供更好的性能，但如果你只是解析两个值，性能改进`Date.parseExact`可能不会有太大的不同。

您还可以使用该`.isBefore()`功能检查一个日期是否在另一个日期之前出现。

**例子**

```
var d1 = Date.parse("07:15 AM");
var d2 = Date.parse("08:30 AM");

d1.isBefore(d2); // true 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T15:04:06.543

为什么不使用 toString？

```
var g = new Date("2012-01-11 03:15 PM");
console.log(g.toString('HH:mm')); 
```

只需添加一个虚构的日期以获得有效的日期字符串格式。因为我猜你只需要时间而不是日期

它对我很好。

# .net - .NET 4.5 构建的运行时异常（无法从程序集“mscorlib”加载类型“System.Runtime.CompilerServices.ExtensionAttribute”）

> ID：16039990
> 
> 赞同：1
> 
> 时间：2013-04-16T14:40:21.567
> 
> 标签：.net, .net-4.5, tfsbuild

自从将我们的解决方案升级到 .NET 4.5 后，我一直无法使用我们的 TFS 2012 构建服务器生成 .NET 4.5 构建。我无法确定为什么 TFS 构建会引发运行时异常。

*   解决方案中的所有项目都将 .NET 4.5 声明为目标框架。
*   解决方案在运行 VS2012 Pro 的本地开发人员机器上正确构建和运行。
*   解决方案在 Team Foundation Build Server 2012 上正确构建。
*   基于构建服务器构建的解决方案会引发以下运行时异常。
*   从 VS2012 构建和构建服务器都在运行时引用 C:\Windows\Microsoft.NET\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll（通过应用程序日志记录和使用 procmon.exe 进行跟踪确认）
*   C:\Windows\Microsoft.NET\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll 的版本是 4.0.30319.18034
*   使用 ildasm.exe 浏览显示 C:\Windows\Microsoft.NET\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll 确实包含类型“System.Runtime.CompilerServices.ExtensionAttribute”。
*   该应用程序是 32 位的。
*   我不相信我们的构建过程使用 ILMerge.exe（我们有单独的 dll 或每个项目）。

来自构建服务器的构建遇到的运行时异常显示无法找到在 4.5 版中移入 mscorlib.dll 的预期类型“ExtensionAttribute”：

```
System.ServiceModel.FaultException`1[System.ServiceModel.ExceptionDetail]: Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'. (Fault Detail is equal to An ExceptionDetail, likely created by IncludeExceptionDetailInFaults=true, whose value is:
System.TypeLoadException: Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
   at System.ModuleHandle.ResolveType(RuntimeModule module, Int32 typeToken, IntPtr* typeInstArgs, Int32 typeInstCount, IntPtr* methodInstArgs, Int32 methodInstCount, ObjectHandleOnStack type)
   at System.ModuleHandle.ResolveTypeHandleInternal(RuntimeModule module, Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext)
   at System.Reflection.RuntimeModule.ResolveType(Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments)
   at System.Reflection.CustomAttribute.FilterCustomAttributeRecord(CustomAttributeRecord caRecord, MetadataImport scope, Assembly& lastAptcaOkAssembly, RuntimeModule decoratedModule, MetadataToken decoratedToken, RuntimeType ...). System.ServiceModel.FaultException`1[System.ServiceModel.ExceptionDetail]: Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'. (Fault Detail is equal to An ExceptionDetail, likely created by IncludeExceptionDetailInFaults=true, whose value is:
System.TypeLoadException: Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
   at System.ModuleHandle.ResolveType(RuntimeModule module, Int32 typeToken, IntPtr* typeInstArgs, Int32 typeInstCount, IntPtr* methodInstArgs, Int32 methodInstCount, ObjectHandleOnStack type)
   at System.ModuleHandle.ResolveTypeHandleInternal(RuntimeModule module, Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext)
   at System.Reflection.RuntimeModule.ResolveType(Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments)
   at System.Reflection.CustomAttribute.FilterCustomAttributeRecord(CustomAttributeRecord caRecord, MetadataImport scope, Assembly& lastAptcaOkAssembly, RuntimeModule decoratedModule, MetadataToken decoratedToken, RuntimeType ...). 
```

**为什么 TFS 构建在表面上动态链接到 .NET 4.5 版本的 mscorlib.dll 时会抛出此运行时异常？**

一些相关的 SA 问题：

*   [无法从程序集“mscorlib”加载类型“System.Runtime.CompilerServices.ExtensionAttribute”](https://stackoverflow.com/questions/13748055/could-not-load-type-system-runtime-compilerservices-extensionattribute-from-as)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T01:44:54.760

您是否在构建机器上安装了 Windows 8 SDK？Windows 8 SDK 将安装 .NET 4.5 参考程序集。您应该确保您的构建脚本引用 .NET 4.5 引用程序集，而不是直接引用 .NET4.5 二进制文件。您可能直接引用了不正确的 .NET 4.5 二进制文件。

# visual-studio-2010 - vs2010如何更改默认评论颜色

> ID：16039994
> 
> 赞同：11
> 
> 时间：2013-04-16T14:40:26.610
> 
> 标签：visual-studio-2010

```
Tool/Options/Environment/Fonts and Colors 
```

为了更改三斜杠注释的默认颜色，我很难找到应该更改的颜色显示项：

```
/// code here 
```

现在，我可以更改标准单行注释的颜色显示项，例如

```
// code here. 
```

有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-24T13:55:02.200

最后，我找到了如下解决方案：

选项/环境/字体和颜色/XML 文档注释

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T15:33:00.620

在`Fonts and Colors`您提到的菜单中，您要更改`XML Doc Tag`显示项目。您可以在此处更改其他 XML 属性，以进一步自定义三斜杠注释中的属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-16T15:36:23.180

您可以更改几种评论类型，我只是浏览了所有设置并输出了与我的样式相匹配的内容，因此可能有点矫枉过正，但这是详尽的列表。我喜欢我所有的评论看起来都一样，所以我一次就把它们都改了。

*   评论
*   CSS 注释
*   HTML 注释
*   VB Xml 注释
*   VB XML 文档注释
*   VB Xml 文档标签
*   VB 脚本注释
*   XAML 注释
*   XML 注释
*   XML 文档注释
*   XML 文档标签

# emacs - 为什么不在 let 形式的词汇上下文中评估此形式

> ID：16039998
> 
> 赞同：1
> 
> 时间：2013-04-16T14:40:33.157
> 
> 标签：emacs, elisp, lexical-scope

我正在尝试创建一个宏来创建一个函数，该函数采用 S 表达式并在夹具的词汇上下文中评估它们。这是我写的宏：

```
(defmacro def-fixture (name bindings)
  "Return a function that takes the form to execute but is wrapped between a let of the bindings"
  `(defun ,(intern (symbol-name name)) (body)
     (let (,bindings)
       (unwind-protect
           (progn
             body))))) 
```

但是当我运行它时，它似乎在我提供的词汇上下文之外执行

```
(def-fixture test-fixture '(zxvf 1))

(test-fixture '(= zxvf 1))
let: Symbol's value as variable is void: zxvf 
```

顺便说一句，我启用了变量词法绑定。关于我的错误有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T00:23:40.973

这与词法作用域无关。您的宏调用扩展为：

```
(defun test-fixture (body)
  (let ((quote (zxvf 1)))
    (unwind-protect (progn body)))) 
```

这当然不是你想要的。我不相信这`(test-fixture '(= zxvf 1))`表明您引用的错误（即`variable is void`）。相反，调用发出信号`(void-function zxvf)`，因为它试图评估`(zxvf 1)`. `(= zxvf 1)`表达式永远不会被评估，因为它被引用了。

您可能想尝试更多类似的东西：

```
(defmacro def-fixture (name bindings)
  "Return a macro that takes the form to execute but is wrapped between a let of the bindings"
  `(defmacro ,name (body)
     `(let (,',bindings)
        (unwind-protect
          (progn
            ,body))))) 
```

然后像这样使用它：

```
(def-fixture test-fixture (zxvf 1))
(test-fixture (= zxvf 1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T15:02:46.103

以下注释在[emacs 手册](http://www.gnu.org/software/emacs/manual/html_node/elisp/Lexical-Binding.html)中：

> 此外，defun 或 defmacro 主体中的代码不能引用周围的词法变量。

这可能是你的问题。

另外我不知道您是否需要引用`def-fixture`. 我使用`macrostep`包来检查生成的宏，如果没有引号，结果似乎更好。