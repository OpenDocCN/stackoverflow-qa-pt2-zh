# StackOverflow 问答 12712000-12712999

# android-layout - 带有 CSS3 列的 WebView 和 HTML（多列布局）

> ID：12712000
> 
> 赞同：2
> 
> 时间：2012-10-03T15:41:58.617
> 
> 标签：android-layout, css, android-webview

我正在尝试在 WebView 控件中使用 HTML 内容。此 HTML 内容具有 CSS3 列。

我的目标是让 WebView 仅水平滚动并使用列。但即使我设置了固定高度（fill_parent），我也可以垂直滚动。

我试图禁用滚动条，使用 setLoadWithOverviewMode 但没有效果。

所以，问题是 - 如何让 WebView 只水平滚动，以便在列中显示 HTML 内容？（我在 Windows 8 应用程序中看到了类似的效果）。

# php - 未定义变量：session_priv

> ID：12712005
> 
> 赞同：-2
> 
> 时间：2012-10-03T15:42:05.077
> 
> 标签：php, content-management-system

问候我的 php 代码仍然有问题，错误消息是

> 未定义的变量：session_priv 真的

验证登录的代码在这里[http://pastebin.com/crxvzTBr](http://pastebin.com/crxvzTBr)

内容代码是[http://pastebin.com/xr2PxbNG](http://pastebin.com/xr2PxbNG)

提前谢谢你兄弟:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:47:05.417

采用`$session_priv = $_SESSION["session_priv"];`

或者

在您使用`$_SESSION["session_priv"]`的任何地方使用`$session_priv`

# gwt - 在 GWT 的 VerticalSplitPanel 中设置最小高度

> ID：12712009
> 
> 赞同：0
> 
> 时间：2012-10-03T15:42:14.213
> 
> 标签：gwt, resize, scroll, vertical-scrolling, splitter

我正在使用 VerticalSplitPanel 拆分两个面板。我想为给定的小部件设置最小允许大小。

不能将其关联的拆分器拖到使其小于此大小的位置。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:44:52.233

此面板已弃用。请改用 SplitLayoutPanel。

使用 .setWidgetMinSize() 设置子小部件的最小宽度。

# javascript - 使用经度/纬度作为航点

> ID：12712013
> 
> 赞同：11
> 
> 时间：2012-10-03T15:42:21.207
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试在我的谷歌地图中使用经度纬度作为航点，但似乎无法正常工作。

这是我推动价值观的方式

```
waypts_mtlsheloc.push({
    location: (45.658197,-73.636333), //I don't think I'm supposed to write this like that. But can't find the right way.
    stopover: true
}) 
```

然后尝试像这样修改我的行

```
service.route({
    origin: latlng_mtlsheloc[0],
    destination: latlng_mtlsheloc[latlng_mtlsheloc.length - 1],
    waypoints:waypts_mtlsheloc,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
}, function(result, status) {
        console.log(status)
        if (status == google.maps.DirectionsStatus.OK) {
        path = path.concat(result.routes[0].overview_path);
        line_mtlsheloc.setPath(result.routes[0].overview_path);
    }
}); 
```

但它给了我一个错误“属性[航点]错误”，我尝试了不同的方法来记下位置，但似乎找不到正确的方法。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-03T16:01:47.557

要将纬度和经度用作航路点，它必须是 google.maps.LatLng 对象（[文档](https://developers.google.com/maps/documentation/javascript/reference#DirectionsWaypoint)说是字符串或 LatLng；字符串是地址，LatLng 是地理坐标）

```
waypts_mtlsheloc.push({
    location: new google.maps.LatLng(45.658197,-73.636333),
    stopover: true
}) 
```

[工作示例](http://www.geocodezip.com/v3_GoogleEx_directions-waypointsC.html)

[jsfiddle](http://jsfiddle.net/geocodezip/npvsfz0d/497/)

**代码片段：**

```
var directionDisplay;
var directionsService = new google.maps.DirectionsService();
var map;

function initialize() {
  directionsDisplay = new google.maps.DirectionsRenderer();
  var chicago = new google.maps.LatLng(41.850033, -87.6500523);
  var myOptions = {
    zoom: 6,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: chicago
  }
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  directionsDisplay.setMap(map);
  calcRoute();
}

function calcRoute() {

  var request = {
    origin: "1521 NW 54th St, Seattle, WA 98107 ",
    destination: "San Diego, CA",
    waypoints: [{
      location: new google.maps.LatLng(42.496403, -124.413128),
      stopover: false
    }],
    optimizeWaypoints: true,
    travelMode: google.maps.DirectionsTravelMode.WALKING
  };
  directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      directionsDisplay.setDirections(response);
      var route = response.routes[0];
      var summaryPanel = document.getElementById("directions_panel");
      summaryPanel.innerHTML = "";
      // For each route, display summary information.
      for (var i = 0; i < route.legs.length; i++) {
        var routeSegment = i + 1;
        summaryPanel.innerHTML += "<b>Route Segment: " + routeSegment + "</b><br />";
        summaryPanel.innerHTML += route.legs[i].start_address + " to ";
        summaryPanel.innerHTML += route.legs[i].end_address + "<br />";
        summaryPanel.innerHTML += route.legs[i].distance.text + "<br /><br />";
      }
    } else {
      alert("directions response " + status);
    }
  });
}

google.maps.event.addDomListener(window, "load", initialize);
```

```
html {
  height: 100%
}

body {
  height: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas" style="float:left;width:70%;height:100%;"></div>
<div id="control_panel" style="float:right;width:30%;text-align:left;padding-top:20px">
  <div id="directions_panel" style="margin:20px;background-color:#FFEE77;"></div>
</div>
```

# logging - Rabbitmq 消息未传递/用于低级 rabbitmq 调试的工具？

> ID：12712016
> 
> 赞同：1
> 
> 时间：2012-10-03T15:42:23.130
> 
> 标签：logging, rabbitmq

在我的系统的一部分正在发布消息的那一刻，我正在解决一个与rabbitmq相关的讨厌问题，但是我希望有时会使用该消息的过程（比如100条消息中的1条消息，当整个系统时更频繁负载过重）无法接收到消息。据我所知，消息正在进入交易所，但没有出来。我的直觉是，这与我的主题绑定或其他东西的竞争条件有关，但我基本上没有工具来检查 rabbitmq 的内部状态。

我梦寐以求的工具是我基本上可以`tail -f`记录一个交换的日志并查看该交换上的所有操作（创建、绑定、取消绑定、发布）。这可能会帮助我准确了解兔子正在看到什么，以及为什么我的消息有时无法传递到我期待的队列中。

这样的事情存在吗？我玩过 rabbitmqadmin 插件，但它似乎比这更高级。我看过 rabbit 的内置日志记录，但它似乎只是跟踪客户端连接。是否有配置文件选项来提高该日志的详细程度？或者其他一些有我正在寻找的日志文件？显然，这种冗长程度会破坏生产集群，但我真的可以在开发过程中使用它。我还考虑编写一个单独的日志记录过程来订阅`#`主题交换，但由于我担心的部分内容是绑定/解除绑定的时间，这将是一个非常粗略的解决方案。

# xdebug - 无法使用 Homebrew 在 Mac 上安装 xdebug

> ID：12712017
> 
> 赞同：55
> 
> 时间：2012-10-03T15:42:29.100
> 
> 标签：xdebug, homebrew

我对使用 Homebrew 有点陌生，但我喜欢它。它是如此容易。我正在尝试安装 Xdebug。网络上的一些帖子说要这样做：

```
brew install xdebug 
```

但它不起作用。我得到：`Error, no available formula.`

我做到了`brew search xdebug`，它返回了：

```
josegonzalez/php/php53-xdebug    josegonzalez/php/php54-xdebug 
```

我尝试了几种不同的迭代，`brew install`包括`brew install php53-xdebug`，但仍然没有运气。有人能帮我吗？我在 Xdebug 的网站上找不到任何关于使用 Homebrew 的信息，但网络上的帖子似乎表明这是可能的。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2018-05-04T18:32:43.353

# // 从 2021 年开始工作

由于自制软件删除了包含已安装 xdebug 版本的额外 php 存储库，因此您必须手动安装它。

概括：

1.  `brew install <php version>`为 php
2.  更新你的路径
3.  `pecl install xdebug`对于 xdebug

完整示例：

```
# update homebrew
brew update

# install a version of php, e.g. 7.0
brew install php@7.0

# now they tell you how to link it, in my case
echo 'export PATH="/usr/local/opt/php@7.0/bin:$PATH"' >> ~/.bash_profile
echo 'export PATH="/usr/local/opt/php@7.0/sbin:$PATH"' >> ~/.bash_profile

# reload the file with the updated path, so we can use pecl
source ~/.bash_profile

# check that the path is to the correct php executable,
# and pecl is available
which pecl
# returns: /usr/local/opt/php@7.0/bin/pecl

# install xdebug, see https://xdebug.org/docs/install#pecl
pecl install xdebug

# check that everything worked
php --version
# should show a xdebug version
# like:  with Xdebug v2.6.0, Copyright (c) 2002-2018, by Derick Rethans 
```

上述`pecl install xdebug`步骤以

```
Build process completed successfully
Installing '/usr/local/Cellar/php@7.0/7.0.30/pecl/20151012/xdebug.so'
install ok: channel://pecl.php.net/xdebug-2.6.0
Extension xdebug enabled in php.ini 
```

所以我什至不需要启用`xdebug.so`in `php.ini`。

如果您需要特殊版本`xdebug`（例如您的 IDE 不喜欢这些`3.x.x`版本），您可以安装特定版本`xdebug-$VERSION`，例如`pecl install xdebug-2.9.8`. 您可以在[可用版本列表中](https://pecl.php.net/package/xdebug)找到它们（感谢[Bower](https://stackoverflow.com/questions/12712017/cant-install-xdebug-on-mac-with-homebrew/50181214?noredirect=1#comment116334180_50181214)）

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-06-18T21:55:52.460

添加此存储库：[https ://github.com/josegonzalez/homebrew-php#readme](https://github.com/josegonzalez/homebrew-php#readme)

然后`brew install php54-xdebug`用于 PHP 5.4

或者`brew install php53-xdebug`对于 PHP 5.3

或者`brew install php55-xdebug`对于 PHP 5.5

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-08-28T17:27:06.107

暂时忘掉**自制软件吧。**我已经尝试过使用它，但在稳定性方面并不是一个好主意。而是坚持使用默认安装指南：

## 在 Mac OSX 上安装 XDebug

1.  转到[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)并将您的 phpinfo() 内容粘贴到那里。
2.  下载 xdebug-2.2.5.tgz ( [http://xdebug.org/files/xdebug-2.2.5.tgz](http://xdebug.org/files/xdebug-2.2.5.tgz) )
3.  解压下载的文件：

    **`tar -xvzf xdebug-2.2.5.tgz`**

4.  跑：

    **`cd xdebug-2.2.5`**

5.  运行**phpize** (如果你还没有的话，可以通过 homebrew 安装)

    **`phpize`**

6.  作为其输出的一部分，它应该显示（如果没有，您使用了错误的 phpize）：

    > 配置： ...
    > Zend 模块 Api 编号：20100525
    > Zend 扩展 Api 编号：220100525

7.  跑：

    **`./configure`**

8.  跑：

    **`make`**

9.  跑：

    **`cp modules/xdebug.so /usr/lib/php/extensions/no-debug-non-zts-20100525`**

10.  编辑 /etc/php.ini 并添加以下行：

    > zend_extension = /usr/lib/php/extensions/no-debug-non-zts-20100525/xdebug.so

11.  通过在终端中键入重新启动 Web 服务器：

    **`sudo apachectl restart`**

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2018-09-20T19:53:32.293

更新时间：2019 年 9 月 10 日

对于 PHP 5.6 和 7.0（不再在 brew 核心中）

```
brew tap exolnet/homebrew-deprecated 
```

使用 brew 捆绑的 pecl (当 php 与 brew 一起安装时)

PHP 5.6 示例

```
brew install php@5.6
$(brew --prefix php@5.6)/bin/pecl install --force xdebug-2.5.5 
```

PHP 7.0 示例

```
brew install php@7.0
$(brew --prefix php@7.0)/bin/pecl install --force xdebug 
```

PHP 7.1 示例

```
brew install php@7.1
$(brew --prefix php@7.1)/bin/pecl install --force xdebug 
```

PHP 7.2 示例

```
brew install php@7.2
$(brew --prefix php@7.2)/bin/pecl install --force xdebug 
```

PHP 7.3 示例

```
brew install php@7.3
$(brew --prefix php@7.3)/bin/pecl install --force xdebug 
```

或先与 brew 链接

PHP 5.6 示例

```
brew install php@5.6
brew link --force php@5.6
pecl install --force xdebug-2.5.5
brew unlink php@5.6 
```

PHP 7.0 示例

```
brew link --force php@7.0
pecl install --force xdebug
brew unlink php@7.0 
```

PHP 7.1 示例

```
brew link --force php@7.1
pecl install --force xdebug
brew unlink php@7.1 
```

PHP 7.2 示例

```
brew link --force php@7.2
pecl install --force xdebug
brew unlink php@7.2 
```

PHP 7.3 示例

```
brew link --force php@7.3
pecl install --force xdebug
brew unlink php@7.3 
```

如果 php -v 给您一个错误，说明找不到 xdebug.so（假设 pecl 安装顺利），那么您可能有“旧”设置，例如 php.ini 使用 brew 卸载/重新安装 php 不会删除 ini 文件。将 php 升级到新格式不会更新 ini 文件。删除文件夹 /usr/local/etc/php/5.6/ 后，只需使用 brew 重新安装 php，xdebug 应该可以工作。

新的 brew php 安装没有链接。如果您愿意，您可以自己执行此操作（brew link --force php@5.6）您也可以安装 brew-php-switcher 在版本之间切换。

```
brew install brew-php-switcher
brew-php-switcher 5.6 -s
php -v
brew-php-switcher 7.0 -s
php -v 
```

请记住，如果您将 php 作为服务加载，则必须重新启动该服务。

```
brew services restart php@7.0 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-12-28T07:11:23.027

我在谷歌搜索如何在[osx](/questions/tagged/osx "show questions tagged 'osx'")上安装[xdebug](/questions/tagged/xdebug "显示标记为“xdebug”的问题")时发现了这个页面，我决定在这里留下我的解决方案：`php 7.1`

```
brew install homebrew/php/php71-xdebug 
```

也许它会在未来对其他人有所帮助......

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-02-13T14:34:02.033

## Big Sur 上的 Xdebug for php8

php8 以前随 brew 一起安装。

```
~ % pecl install xdebug
ERROR: `phpize' failed 
```

哎哟! 检查 xcrun。谢谢路易斯·查雷特：

```
~ % xcrun --show-sdk-path
xcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun 
```

错误。更新 Xcode。我刚刚安装并重新测试：

```
~ % xcode-select --install
xcode-select: note: install requested for command line developer tools

~ % xcrun --show-sdk-path 
/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk 
```

这样更好！现在返回并再次尝试 pecl：

```
~ % pecl install xdebug
...
Build process completed successfully
Installing '/usr/local/Cellar/php/8.0.0_1/pecl/20200930/xdebug.so'
install ok: channel://pecl.php.net/xdebug-3.0.2
Extension xdebug enabled in php.ini 
```

并检查它是否有效：

```
~ % php -v
PHP 8.0.0 (cli) (built: Nov 30 2020 13:51:52) ( NTS )
Copyright (c) The PHP Group
Zend Engine v4.0.0-dev, Copyright (c) Zend Technologies
    with Xdebug v3.0.2, Copyright (c) 2002-2021, by Derick Rethans
    with Zend OPcache v8.0.0, Copyright (c), by Zend Technologies 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-08-09T08:57:40.710

这是我的解决方案！尝试一下！;)

1 安装开发者工具：

```
xcode-select --install 
```

2 安装自动配置。这是一个用于生成自动配置软件的 shell 脚本的工具

```
brew install autoconf 
```

3 如果你使用 PHP >5.6

```
sudo pecl install xdebug 
```

玩得开心 ;）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-21T08:19:04.813

# 卡塔利娜

从 Catalina (Mac OS 10.15) 开始 PHP 似乎已预先安装（检查`php -v`）它可以与 xcode 或其他软件一起安装（我不确定）但我昨天刚安装了 Catalina，还没有安装 Homebrew xdebug 也可用。我只需要重命名`/etc/php.ini.default`并添加这一行

```
zend_extension = /usr/lib/php/extensions/no-debug-non-zts-20180731/xdebug.so 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-02T23:58:49.410

# macOS 10.14 Mojave，自制软件，PHP 7.3，2020 年 4 月

[以下文章](https://sys.cuquejo.org/install-php-7-3-xdebug-on-macos-mojave-with-homebrew/)中给出的描述是我唯一可以在 macOS 10.14 Mojave 上使用 Homebrew 安装 PHP 7.3 和工作 xdebug：

```
brew list | grep php | awk '{ print "brew uninstall --force "$1}' | bash        # Remove any old version of php.
rm -rf /usr/local/Cellar/php                                                    # To be sure, manually remove the php cellar folder.
brew untap homebrew/php                                                         # Then clean any php tap (extra repo).
brew cleanup                                                                    # Cleanup and Update your brew.
brew update
brew install php                                                                # Install the latest version of php.
pecl uninstall xdebug                                                           # Clean up old xdebug.
pecl install xdebug-beta                                                        # Install the latest version of xdebug-beta (The xdebug is not compatible with 7.3 so you need to use the xdebug-beta).
php -v                                                                          # Should now say "with Xdebug v2.9.4, Copyright (c) 2002-2020, by Derick Rethans" 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-03T15:48:33.867

看起来 repo 已移动，但可[在此处](https://github.com/josegonzalez/homebrew-php)获得，并附有有关如何从 Homebrew 访问它的[说明。](https://github.com/josegonzalez/homebrew-php#readme)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-30T13:38:24.973

如果在添加水龙头并安装后出现此错误：

```
$ brew install "josegonzalez/php/php55"
==> Installing php55 from josegonzalez/php
Error: Formulae found in multiple taps: 
 * homebrew/php/php53
 * josegonzalez/php/php53

Please use the fully-qualified name e.g. homebrew/php/php53 to refer the formula. 
```

这是因为 **josegonzalez/php**最近被移到了**homebrew-php/php**，所以你会遇到之前的错误。

这个想法很简单，删除旧的弃用 repo **josegonzalez/php**

```
brew untap josegonzalez/php
brew tap --repair
brew update 
```

请参阅此解决方案的[来源](https://medium.com/@petehouston/fix-homebrew-php-error-formulae-found-in-multiple-taps-7ce5ed2f6706#.g7fayecyl)以修复任何其他相关错误。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-12T09:57:45.107

它帮助我解决了 zend 版本和 xdebug Xdebug 需要 Zend Engine API 版本 320160303。安装的 Zend Engine API 版本 320180731 更新。

[https://xdebug.org/wizard.php](https://xdebug.org/wizard.php)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-08T05:58:15.623

截至 2021 年 5 月，通过 Homebrew 安装 PHP 后，只需运行以下命令：

```
pecl install xdebug 
```

您需要安装 XCode，如上面的答案所示。

涉及其他 brew 存储库或`php74-*`包名称空间的其他答案基于 Homebrew 使用 PHP 的旧方式。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-12-27T06:03:57.067

**改进的 MacOS 答案**

如果您已按照官方文档中的说明进行操作，并且无法使用 php -v 命令查看 XDebug 信息而出现错误，那么您应该执行的最后一步如下：

1.  转到您在所述路径中创建的 99-xdebug.ini 文件并添加以下行：

zend_extension="/usr/lib/php/extensions/no-debug-non-zts-20180731/xdebug.so"

（仍然错误？检查您的 xdebug.so 路径是否有效）

2.  保存更改后，使用以下命令重新启动 php：

brew services restart php@7.3 （用你的 php 版本更改 7.3）

3.  然后检查您现在是否可以使用 php -v 命令查看 XDebug 信息。

注意：99-xdebug.ini 的“描述路径”类似于：

/usr/local/etc/php/7.3/conf.d（用你的php版本更改7.3）

可以肯定的是，输入 php --ini 命令。

# php - 如何将内存中的用户提供程序注入服务？

> ID：12712024
> 
> 赞同：7
> 
> 时间：2012-10-03T15:42:47.213
> 
> 标签：php, service, symfony, dependency-injection, authentication

我正在关注[http://symfony.com/doc/current/cookbook/security/voters.html](http://symfony.com/doc/current/cookbook/security/voters.html)并尝试创建一个自定义投票者，该投票者拒绝访问标题中不包含有效 API 密钥和摘要的请求（受[http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)的影响- 我没有构建身份验证提供程序，因为我需要为相同的请求使用 FOSUserBundle 提供程序）。

我想将我的 api 密钥/秘密存储在内存用户提供程序中，并可能在以后将其迁移到自定义 mongodb 提供程序。所以我需要一种将用户提供者注入我的选民的方法。我已经注入了服务容器，但是可以从中访问用户提供者吗？

我的服务定义：

```
services:
    security.access.api_client_voter:
        class:     Acme\RestBundle\Security\Authorization\Voter\ApiClientVoter
        arguments: [@service_container, %kernel.cache_dir%/security/nonces]
        public:    false
        tags:
            - { name: monolog.logger, channel: authentication }
            - { name: security.voter } 
```

所以我的问题是，如何注入内存提供程序？食谱中的 WSSE 示例似乎使用身份验证提供程序工厂来替换字符串“security.providers.in_memory”，但由于我只是使用选民，这是必要的吗？如果有必要，我的工厂会是什么样子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T19:08:36.500

[内存中的用户提供者首先在 SecurityBundle 的security.xml](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/SecurityBundle/Resources/config/security.xml#L124)中定义为一个抽象服务。根据您的用户提供者在 中的配置`security.yml`，SecurityBundle 的[SecurityExtension](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/SecurityBundle/DependencyInjection/SecurityExtension.php#L526)然后创建具体的内存中用户提供者服务，每个用户都作为服务添加到该服务中。如您所见，此服务的名称将是`security.user.provider.concrete.[name-of-your-firewall]`. 因此，应该可以在您的选民中使用此服务或将此服务注入您的选民。您可以随时查看`/app/cache`目录中转储的服务容器，以找出服务的名称以及它们是否已定义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T06:42:04.367

内存中用户提供程序服务的名称是`security.user.provider.concrete.in_memory`，但该服务是私有的，因此您需要为它定义一个别名`config.yml`：

```
services:
    in_memory_user_provider:
        alias: security.user.provider.concrete.in_memory 
```

现在，您可以以`in_memory_user_provider`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-27T07:32:32.773

该服务已声明

```
<service id="security.user.provider.in_memory" class="Symfony\Component\Security\Core\User\InMemoryUserProvider" abstract="true" /> 
```

# javascript - 要存储到数组中的 JSON 对象

> ID：12712025
> 
> 赞同：2
> 
> 时间：2012-10-03T15:42:54.503
> 
> 标签：javascript, json

我目前正在尝试将 JSON 字符串化对象存储到一个数组中，这样我就可以在进行过程中添加新元素：

```
function GetAllPatients(){
var patient = null;
var patients = [];

patient = { "FirstName": "Stephanie", "Gender": "Female", "Id": "P8401", "LastName": "BARRON", "Title": "Ms", "ConsultantId": "d10", "CurrentWardAdmissionName": "Non Admitted", "DOB": "/Date(1187650800000+0100)/", "HospitalAdmissionDate": "/Date(1294848066000+0000)/", "NHSNumber": "4646399561" };

patient = { "FirstName": "Joan", "Gender": "Female", "Id": "50434619", "LastName": "SMITH", "Title": "Mrs", "ConsultantId": "d1", "CurrentWardAdmissionName": "Non Admitted", "DOB": "/Date(513039600000+0100)/", "HospitalAdmissionDate": "/Date(1332242252817+0000)/", "NHSNumber": "9999999999" };

} 
```

还有一个 switch case getPatientFromStore(pid) 函数，它将通过 pid 检索记录

我将如何实现这一目标？我需要更多信息来帮助我更接近解决方案吗？

基本上，我正在创建一个 Web 应用程序，它允许在断开连接状态下进行离线本地存储，并与服务器上的数据库同步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:48:55.333

您可以使用以下方法将元素插入数组`push`：

例如：

```
patients.push({
    "FirstName": "Stephanie",
    "Gender": "Female",
    "Id": "P8401",
    "LastName": "BARRON",
    "Title": "Ms",
    "ConsultantId": "d10",
    "CurrentWardAdmissionName": "Non Admitted",
    "DOB": "/Date(1187650800000+0100)/",
    "HospitalAdmissionDate": "/Date(1294848066000+0000)/",
    "NHSNumber": "4646399561"
}); 
```

至于通过 id 而不是数组查找，最好使用关联数组，如下所示：

```
var patients = {};
function addPatient(patient) {
    patients[patient.id] = patient;
} 
```

然后在给定患者 ID 的返回患者的方法中，您可以执行以下操作：

```
function getPatient(id) {
    return patients[id];
} 
```

如果您要一直通过他们的 id 查找患者，这将非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:38:47.670

您还可以使用多个索引来访问同一患者。

例如，如果您想使用 NHSNumber 和 id，您可以在 addPatients() 函数中执行以下操作：

```
var patients = { };
var nhsNumberMap = { };
function addPatient(patient) {
    patients[patient.id] = patient;
    nhsNumberMap[patient.NHSNumber] = patient;
} 
```

所以你也可以有另一个功能：

```
getPatientByNHSNumber(nhsNumber) {
    return nhsNumberMap[nhsNumber];
} 
```

# javascript - 浏览器中的当前位置标记（蓝色圆圈）

> ID：12712027
> 
> 赞同：8
> 
> 时间：2012-10-03T15:42:57.323
> 
> 标签：javascript, google-maps-api-3

> **可能重复：**
> [如何在谷歌地图中突出显示用户的当前位置？](https://stackoverflow.com/questions/12175931/how-to-highlight-a-users-current-location-in-google-maps)

有没有使用javascript google maps api在当前位置获取蓝色圆圈标记的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-03T16:02:06.020

您可以使用[GeolocationMarker 库](https://chadkillingsworth.github.io/geolocation-marker/)。它是[Google Maps API 实用程序库](http://googlemaps.github.io/libraries)的一部分。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-03T15:48:02.890

使用该`navigator.geolocation`方法，并为您的蓝色圆圈使用自定义图标

[https://developer.mozilla.org/en-US/docs/Using_geolocation](https://developer.mozilla.org/en-US/docs/Using_geolocation)

[https://developers.google.com/maps/documentation/javascript/overlays#Icons](https://developers.google.com/maps/documentation/javascript/overlays#Icons)

编辑：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps User Location</title>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <style>
    html, body, #map_canvas{width:100%;height:100%;}
    </style>
  </head>
  <body onload="locate()">
    <div id="map_canvas"></div>
  </body>
  <script>
    var im = 'http://www.robotwoods.com/dev/misc/bluecircle.png';
    function locate(){
        navigator.geolocation.getCurrentPosition(initialize,fail);
    }

    function initialize(position) {
        var myLatLng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        var mapOptions = {
          zoom: 4,
          center: myLatLng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        var map = new google.maps.Map(document.getElementById('map_canvas'),
                                      mapOptions);
        var userMarker = new google.maps.Marker({
            position: myLatLng,
            map: map,
            icon: im
        });
      }

     function fail(){
         alert('navigator.geolocation failed, may not be supported');
     }
    </script>
</html> 
```

# jakarta-ee - Struts2 - 需要改变样式元素的值 我需要使用局部变量vTopPosition更改样式元素“top”的值。下面是不工作的代码。 <%! int vTopPosition = 255; %> <s:iterator var="cha
问问题
问问题 2012-10-03T15:43:04.830
1898 次
This question shows research effort; it is useful and clear
1
This question does not show any research effort; it is unclear or not useful
Bookmark this question.
Show activity on this post.
我需要使用局部变量vTopPosition更改样式元素“top”的值。下面是不工作的代码。
<%! int vTopPosition = 255; %> <s:iterator var=" characteristicvalues"="" value="MaterialDTO.characteristicValue"><s:textfield id="attribute" name="abc" value="%{characteristicValues}" type="text" cssclass="input" readonly="true" style="position: absolute; width: 200px; left: 227px; top: <%=vTopPosition>px; z-index: 31"><% vTopPosition=vTopPosition+25;%></s:textfield></s:iterator> 请建议我需要进行哪些更改才能使顶部元素动态化。 无法将文件上传到 s3 SDK PHP 中的现有存储桶 尝试使用 s3 的 PHP SDK 上传文件。将文件上传到现有的Bucket，弹出错误。 path_style = true; $bucket = 'photossss1.abc.com'; $name = "picture.jpg" ; $response = $s3->create_object($bucket, 'picture2.jpg', array( 'fileUpload' => 'picture.jpg' )); if($response->isOk()){ echo " Done" ; } else { //var_dump($response); echo "error: create_object error."; } 上面的代码有什么错误..？ 调试： print_r($response->body); => CFSimpleXML Object ( [Code] => PermanentRedirect [Message] => The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint. [RequestId] => DACD5C54BC4BD82 [Bucket] => photossss1.abc.com [HostId] => QUBlZEZKh0Ujzk6UyGG7LjC0vMCWDlOPszTZru/+OpWidBH84VXor1 [Endpoint] => photossss1.abc.com.s3.amazonaws.com ) jakarta-eestruts2jsp-tags 4 2 回答 2 This answer is useful 1 您可以在操作类中定义属性 vTopPosition 以使其动态化。 在 set name 属性中不推荐使用 var 代替。 <s:set var="styleString" value="'position: absolute; width: 200px; left: 227px; top:' + vTopPosition + 'px; z-index: 31'">然后在文本字段中： <s:textfield id="attribute" name="abc" value="%{characteristicValues}" type="text" cssclass="input" readonly="true" style="%{styleString}">于 2012-10-03T17:21:27.987 回答 This answer is useful 0 不确定这是否是最好的方法，但您可以尝试： <s:set var="vTopPosition" value="%{255}"><s:iterator var="characteristicValues" value="MaterialDTO.characteristicValue"></s:iterator>于 2012-10-03T17:13:42.673 回答 Related 2 javascript - 当按下 wil ++ 或 -- 一个值，数字键盘 2 java - SWT 画布在重绘时不显示图像，除非其 5x5 像素 0 php - Symfony2 在编辑表单上为空 BBDD 1 html - TD 高度未在 Firefox 中应用 3 javascript - 响应式 js 库 1 java - Magnolia project archetype can not resolve vaadin dependencies 2 linux - 获取文件夹名和重命名文件名 tr Linux bash 5 java - 使用分隔值对数组进行排序 0 java - Jboss 配置文件未设置设置 JAVA_OPTS=%JAVA_OPTS% -Xms128m -Xmx512m -XX:PermSize=1024m -XX:MaxPermSize=2048m？ 2 html - 使用 CSS 包含自定义字体以使其与最大浏览器兼容的最佳方法是什么？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</s:set></s:textfield></s:set>

> ID：12712029
> 
> 赞同：1
> 
> 时间：
> 
> 标签：jakarta-ee, struts2, jsp-tags

我需要使用局部变量**vTopPosition更改****样式**元素**“top”**的值。下面是不工作的代码。

 **```
<%! int vTopPosition = 255; %>

<s:iterator var="characteristicValues" value="MaterialDTO.characteristicValue">

    <s:textfield id="attribute" name="abc" value="%{characteristicValues}" type="text" cssClass="input" readonly="true"
style="position: absolute; width: 200px; left: 227px; top: <%=vTopPosition>px;  z-index: 31" />

    <% vTopPosition=vTopPosition+25;%>
</s:iterator> 
```

请建议我需要进行哪些更改才能使顶部元素动态化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:21:27.987

您可以在操作类中定义属性 vTopPosition 以使其动态化。

> 在 set name 属性中不推荐使用 var 代替。

```
<s:set var="styleString" value="'position: absolute; width: 200px; left: 227px; top:' + vTopPosition + 'px;  z-index: 31'"/> 
```

然后在文本字段中：

```
<s:textfield id="attribute" name="abc" value="%{characteristicValues}" type="text" cssClass="input" readonly="true"
style="%{styleString}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:13:42.673

不确定这是否是最好的方法，但您可以尝试：

```
<s:set var="vTopPosition" value="%{255}"/>
<s:iterator var="characteristicValues" value="MaterialDTO.characteristicValue">
    <s:textfield id="attribute" name="abc" value="%{characteristicValues}" type="text" cssClass="input" readonly="true" style="position: absolute; width: 200px; left: 227px; top: %{#vTopPosition}px;  z-index: 31" />
    <s:set var="vTopPosition" value="%{#vTopPosition+25}"/>
</s:iterator> 
```**

# jquery - jQuery 中的 $(this) 与 $('this')

> ID：12712030
> 
> 赞同：-3
> 
> 时间：2012-10-03T15:43:07.743
> 
> 标签：jquery

jquery 中的 $(this) 与 $('this') 有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T15:43:55.877

`$('this')`并不意味着任何有用的东西。

`$('somestring')`返回基于选择器“somestring”的元素。

这[是 jQuery 选择器的语法](http://api.jquery.com/category/selectors/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:44:30.693

**$(这个)**

这是包含在 jQuery Object 中的当前上下文。

**$('this')** -- 这只是一个字符串..

```
$('#btn').on('click', function() {

     $(this).attr('id');

     // Here $(this) is the current current button context that was clicked with i**d btn**
}); 
```

所以 $(this) 总是得到有问题的当前上下文对象..

默认情况下，上下文中的**this**是本机 DOM 元素...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:45:29.900

$('this') 没有被使用......唯一可行的是 $("#this") 用于**id**或 $(".this") 用于**类**

编辑：或 $('this') 但仅在您有标签时使用（如下所述）

# php - 无法将文件上传到 s3 SDK PHP 中的现有存储桶

> ID：12712031
> 
> 赞同：1
> 
> 时间：2012-10-03T15:43:07.810
> 
> 标签：php, amazon-s3, amazon-web-services

尝试使用 s3 的 PHP SDK 上传文件。将文件上传到现有的Bucket，弹出错误。

```
<?php
error_reporting(-1);
// Set plain text headers
header("Content-type: text/plain; charset=utf-8");
// Include the SDK
require_once '../sdk.class.php'; 
```

// *%******* *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** ** *** *** %*/ // 上传文件到 S3**

 **```
// Instantiate the AmazonS3 class
$s3 = new AmazonS3();
$s3->path_style = true;

$bucket = 'photossss1.abc.com';

$name = "picture.jpg" ;
$response = $s3->create_object($bucket, 'picture2.jpg', array(
    'fileUpload' => 'picture.jpg'
));

if($response->isOk()){
    echo " Done" ;
} else {
    //var_dump($response);
    echo "error: create_object error.";
} 
```

上面的代码有什么错误..？

调试： print_r($response->body); =>

```
CFSimpleXML Object
(
    [Code] => PermanentRedirect
    [Message] => The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint.
    [RequestId] => DACD5C54BC4BD82
    [Bucket] => photossss1.abc.com
    [HostId] => QUBlZEZKh0Ujzk6UyGG7LjC0vMCWDlOPszTZru/+OpWidBH84VXor1 
    [Endpoint] => photossss1.abc.com.s3.amazonaws.com
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T17:21:10.020

您需要在类初始化后设置区域

```
// Initialize the class
$s3 = new AmazonS3();
$s3->set_region( AmazonS3::REGION_EU_W1 );
... 
```

[SDK 文档的相关页面](http://docs.aws.amazon.com/AWSSDKforPHP/latest/#m=AmazonS3/set_region)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T05:53:17.010

结果是什么：

```
<?php
print_r($response->body); 
```

这应该会为您提供来自 S3 的正确错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T12:50:31.597

在`services/s3.class.php`; 替换这部分：

```
const REGION_US_E1 = 's3.amazonaws.com'; 
```

至：

```
const REGION_US_E1 = 's3-eu-west-1.amazonaws.com'; 
```**

# c# - 同一时间来自同一 IP 的不同会话 ID

> ID：12712033
> 
> 赞同：2
> 
> 时间：2012-10-03T15:43:10.943
> 
> 标签：c#, session

在我的应用程序中，每次用户登陆我的网站时，我都会使用其会话 ID 检查该用户，并在数据库中插入（包含所有详细信息 ip、浏览器等），**如果其会话 ID 不同**。

```
string sessionId = HttpContext.Current.Session.SessionID;
if (objDB.checkDuplicate("session", "sessionId", sessionId))
{
    // code to make insert in database
} 
```

但是在检查数据库时，我**同时从同一个 IP 获得多个插入。**

谁能解释为什么会这样？

**注意：**用户的 SESSION 不同，所以`checkDuplicate()`可以正常工作，但用户如何同时拥有不同的会话 ID？（或这样的时间跨度）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:44:49.710

很可能是多人通过路由器或代理服务器共享同一连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:03:20.090

更多原因（很可能是在路由器/代理后面）对相同 IP 有不同的会话 ID

*   重新启动浏览器将为同一用户创建新的会话 ID（只要它在会话 cookie 中设置）
*   打开单独的浏览会话（即 IE 的普通与私有，取决于配置和浏览器选项卡可能被视为单独的会话）
*   同一台计算机上的不同用户

不同会话 ID 的另一组原因是基于未能在请求之间设置持久会话 cookie：

*   我认为如果没有写入 ASP.Net 会话状态 cookie 可以在每个请求上重新生成（需要验证）
*   cookie 可以被禁用（很少见，但可能）
*   cookie 可以被阻止（即 IFrame 中的页面/图像缺少 P3P 策略）或浏览器中的某些其他策略

有正当理由为同一用户获取同一 sessionId 的多个浏览器窗口（同一“浏览器会话”中的选项卡，使用 Ctrl+单击“在新窗口/选项卡中打开”）。作为站点创建者，您必须决定是要尝试执行“单个会话 = 单个窗口”策略还是处理在同一会话中可能打开的多个窗口。我知道没有合理的方法来检测在不同选项卡中使用相同会话 ID 的情况，特别是如果您必须支持 GET 请求（否则您可以将一些附加 ID 转储到隐藏字段中）。

# javascript - 将 Parse.com 对象保存到 Trigger.io 首选项存储中是从对象中剥离数据吗？

> ID：12712034
> 
> 赞同：0
> 
> 时间：2012-10-03T15:43:14.030
> 
> 标签：javascript, trigger.io, parse-platform

我使用 Parse.com 作为基于 Trigger.io 的 Android 应用程序的后端。我的问题是非常基本的，我相信这只是我没有掌握的对 javascript 的一些基本理解——我仍在学习很多关于该语言的知识。

当我在 Parse 中查询对象数组并记录响应时，我得到了我需要的一切：每个对象的属性、唯一对象 ID、createdAt、updatedAt 等。以下是 Parse 中单个对象的示例：

## 来自 Parse 的对象：

```
    [信息] 10-03 10:34:21.992 18060 18072 我锻造：[锻造]
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：[{ 属性：
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：{ first_name: 'John',
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：姓氏：“史密斯”，
    [信息] 10-03 10:34:21.992 18060 18072 I Forge : 电子邮件: 'john.smith@aol.com',
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：电话：'5551112234'，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：地址：''，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：城市：''，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：状态：''，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：zip：''，
    [信息] 10-03 10:34:21.992 18060 18072 我锻造：种族：'7'，
    [信息] 10-03 10:34:21.992 18060 18072 I Forge : theDate: '10/02/2012',
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：formName：'DriverWaiver'，
    [信息] 10-03 10:34:21.992 18060 18072 I Forge : 进口: true },
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：_操作：{}，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：_dirty：{}，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：_hashedJSON：{}，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：_escapedAttributes：{}，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：cid：'c38'，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造 : id: 'beLlUqrUBl',
    [信息] 10-03 10:34:21.992 18060 18072 I Forge : createdAt: '2012-10-02T17:51:38.267Z',
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：更新在：'2012-10-02T17:51:38.267Z'，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：_setting：假，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：_previousAttributes：
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：{ first_name: 'John',
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：姓氏：“史密斯”，
    [信息] 10-03 10:34:21.992 18060 18072 I Forge : 电子邮件: 'john.smith@aol.com',
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：电话：'5551112234'，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：地址：''，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：城市：''，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：状态：''，
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：zip：''，
    [信息] 10-03 10:34:21.992 18060 18072 我锻造：种族：'7'，
    [信息] 10-03 10:34:21.992 18060 18072 I Forge : theDate: '10/02/2012',
    [信息] 10-03 10:34:21.992 18060 18072 我伪造：formName：'DriverWaiver'，
    [信息] 10-03 10:34:21.992 18060 18072 I Forge : 进口: true } },

```

然而，在保存结果后，没有变量操作，使用 Trigger.io 的 forge.prefs.set()，我只能读取属性。这是使用 forge.prefs.get() 读取后的相同对象：

## 使用 forge.prefs.set() 保存并使用 forge.prefs.get() 检索后：

```
    [信息] 10-03 11:05:44.594 19055 19068 我锻造：[锻造]
    [信息] 10-03 11:05:44.594 19055 19068 I Forge : [ { first_name: 'John',
    [信息] 10-03 11:05:44.594 19055 19068 我伪造：姓氏：'史密斯'，
    [信息] 10-03 11:05:44.594 19055 19068 I Forge : 电子邮件: 'john.smith@aol.com',
    [信息] 10-03 11:05:44.594 19055 19068 我伪造：电话：'5551112233'，
    [信息] 10-03 11:05:44.594 19055 19068 我伪造：地址：''，
    [信息] 10-03 11:05:44.594 19055 19068 我伪造：城市：''，
    [信息] 10-03 11:05:44.594 19055 19068 我伪造：状态：''，
    [信息] 10-03 11:05:44.594 19055 19068 I Forge : zip: '',
    [信息] 10-03 11:05:44.594 19055 19068 我锻造：种族：'7'，
    [信息] 10-03 11:05:44.594 19055 19068 I Forge : theDate: '10/02/2012',
    [信息] 10-03 11:05:44.594 19055 19068 我伪造：formName：'DriverWaiver'，
    [信息] 10-03 11:05:44.594 19055 19068 I Forge : 进口: true },

```

## 产生上述结果的简化代码

```
    var FormData = Parse.Object.extend(formName);
    var query = new Parse.Query(FormData);
    var currentYear = new Date().getFullYear();

    query.endsWith("theDate", currentYear.toString());
    查询.limit(1000);
    query.descending('imported');

    // 从解析中获取
    查询.find({
      成功：函数（结果）{

        // 从 Parse 得到
        if (formName == "DriverWaiver") forgeLog(results);

        // 保存到本地
        forge.prefs.set(formName, results, function(){

            // 保存到本地
            forgeLog("保存到本地");

                // 从本地获取
                forge.prefs.get(formName, function(results){

                    // 从本地获取
                    forgeLog("从本地获取");
                    if (formName == "DriverWaiver") forgeLog(results);      

                }， 功能（）{

                    // 从本地获取错误
                    forgeLog("从本地获取错误");

                });         

        }， 功能 （）{
            // 错误保存到本地
            forgeLog("保存到本地出错");
        });
      },
      错误：函数（错误）{
          // 从解析中获取错误
          forgeLog("从 Parse 获取数据时出错");

      }
    });

```

所以我想我的问题是：**我怎样才能保存整个对象？**我真的需要为我的应用程序正常运行保存的唯一 ID。

我将完整的日志输出发送给 Trigger 支持，他们认为这是 Parse API 问题并将我推迟到他们那里。我不相信这是 Parse 问题，但我希望这里的社区可以提供一些见解，而不是四处寻找支持渠道。提前致谢！

# c - pthread_mutex_lock() 可以在 pthread_cond_wait() 解除阻塞之前解除阻塞吗？

> ID：12712036
> 
> 赞同：2
> 
> 时间：2012-10-03T15:43:33.657
> 
> 标签：c, multithreading, mutex, condition-variable

想象一个线程阻塞在条件变量上：

```
pthread_mutex_lock (mutex);
do_something ();
pthread_cond_wait(cond, mutex); // [1]
do_something_else ();
pthread_mutex_unlock (mutex); 
```

互斥锁被解锁，另一个试图锁定互斥锁的线程被解锁：

```
pthread_mutex_lock (mutex);
do_some_work ();
pthread_cond_signal (cond);
pthread_mutex_unlock (mutex); 
```

同时还有另一个线程等待获取临界区的所有权：

```
pthread_mutex_lock (mutex); // [2]
do_some_random_work ();
pthread_mutex_unlock (mutex); 
```

现在，问题是：当调用 pthread_cond_signal() 时，是否保证 pthread_cond_wait() [1] 会在 pthread_mutex_lock() [2] 之前解除阻塞？

POSIX 规范似乎对此案只字未提。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T15:55:22.090

不，这不对。

pthread_cond_signal() 的描述有时被表述为

> 当由于 pthread_cond_signal() 或 pthread_cond_broadcast() 的调用而解除阻塞的每个线程从其对 pthread_cond_wait() 或 pthread_cond_timedwait() 的调用返回时，该线程拥有它调用 pthread_cond_wait() 或 pthread_cond_timedwait() 的互斥锁。未阻塞的线程根据调度策略（如果适用）竞争互斥锁，就好像每个线程都调用了 pthread_mutex_lock()。

（取自[此链接](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_cond_signal.html)）

如您所见，它的措辞是“好像每个人都调用了 pthread_mutex_lock()”。因此，与来自另一个线程的实际 pthread_mutex_lock 调用相比，这个隐含的 pthread_mutex_lock 调用没有优先级。

# python - Django 管理员提出 CSRF 验证失败

> ID：12712042
> 
> 赞同：8
> 
> 时间：2012-10-03T15:43:44.997
> 
> 标签：python, django, csrf, django-csrf

我已经开始了新的 django 项目并启用了管理应用程序。我可以登录到管理站点，但是当我尝试添加/更改站点或用户时，我得到了

```
CSRF verification failed. Request aborted.
Reason given for failure:
CSRF token missing or incorrect. 
```

这就是我在 settings.py 中的内容：

```
TEMPLATE_LOADERS = (
'django.template.loaders.filesystem.Loader',
'django.template.loaders.app_directories.Loader',
)

MIDDLEWARE_CLASSES = (
'django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
# Uncomment the next line for simple clickjacking protection:
# 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)
INSTALLED_APPS = (
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
'django.contrib.admin',
# Uncomment the next line to enable admin documentation:
# 'django.contrib.admindocs',
) 
```

当我查看管理页面源时，我看到

```
<input type='hidden' name='csrfmiddlewaretoken' value='T9Mfk1LRXi5jPE2dh5jcvdKwzYM6Iy5I' /> 
```

那里

我有 Django 版本 1.4.1

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T16:11:07.393

您是否覆盖了 CSRF_COOKIE_DOMAIN 设置？如果表单中存在 CSRF 令牌，并且您没有修改管理应用程序的源，那么最有可能的情况是 cookie 设置不正确。

检查登录页面的响应标头以确保 cookie 设置正确，并检查您的登录尝试的请求标头以确保它也被发送（并且与表单中的值匹配）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-11T01:31:15.740

在本地，我有一个项目，CRSF 在浏览时工作正常， `http://localhost:8040/my-admin/`但在`http://127.0.0.1:8040/my-admin/`.

我不知道为什么，但这可能有助于节省一些时间。

注意：我没有设置`CSRF_COOKIE_DOMAIN`.

# php - 在字符串的每个数字之后插入一个斜杠，除了结尾（PHP）

> ID：12712044
> 
> 赞同：0
> 
> 时间：2012-10-03T15:43:51.963
> 
> 标签：php, string, insert, slash

我有一个字符串

```
$string; 
```

在这个字符串中我有一个数字，比如`3743687`

我希望在每个数字之后添加一个斜杠，除了最后，所以结果将是

`3/7/4/3/6/8/7`

有没有一个php函数可以做到这一点，对吗？有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:49:33.747

```
$string = '3743687';

$newString = implode('/',str_split($string));

var_dump($newString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:50:28.197

```
$string = "3743687";

$string = implode("/", str_split($string));

echo $string; 
```

# xpath - Solr Tika XPath 异常

> ID：12712046
> 
> 赞同：0
> 
> 时间：2012-10-03T15:43:57.400
> 
> 标签：xpath, solr, nullpointerexception, apache-tika

我正在尝试使用 Apache Solr 和 TikaEntityProcessor 索引 HTML 文档，其想法是我可以使用 XPath 从 HTML 中选择特定元素。

我遵循了[TikaEntityProcessor Solr Wiki 页面](http://wiki.apache.org/solr/TikaEntityProcessor)底部显示的高级示例。

当我尝试完成数据导入命令时，我收到以下错误消息：

```
03-Oct-2012 16:39:48 org.apache.solr.handler.dataimport.DataImporter doFullImport
INFO: Starting Full Import
03-Oct-2012 16:39:48 org.apache.solr.core.SolrCore execute
INFO: [htmlTest] webapp=/apache-solr-3.6.1 path=/dataimport params={command=full-import} status=0 QTime=31 
03-Oct-2012 16:39:48 org.apache.solr.handler.dataimport.SimplePropertiesWriter readIndexerProperties
INFO: Read dataimport.properties
03-Oct-2012 16:39:48 org.apache.solr.update.DirectUpdateHandler2 deleteAll
INFO: [htmlTest] REMOVING ALL DOCUMENTS FROM INDEX
03-Oct-2012 16:39:48 org.apache.solr.core.SolrDeletionPolicy onInit
INFO: SolrDeletionPolicy.onInit: commits:num=1
    commit{dir=C:\Program Files\Apache Tomcat\conf\apache-solr-3.5.0\htmlTest\data\index,segFN=segments_1e,version=1349187077567,generation=50,filenames=[_u.fnm, _u.nrm, _u.tis, _u.prx, _u.frq, _u.fdx, _u.fdt, _u.tii, segments_1e]
03-Oct-2012 16:39:48 org.apache.solr.core.SolrDeletionPolicy updateCommits
INFO: newest commit = 1349187077567
03-Oct-2012 16:39:48 org.apache.solr.handler.dataimport.SqlEntityProcessor initQuery
SEVERE: The query failed 'null'
java.lang.NullPointerException
    at java.io.File.<init>(File.java:222)
    at org.apache.solr.handler.dataimport.FileDataSource.getFile(FileDataSource.java:96)
    at org.apache.solr.handler.dataimport.BinFileDataSource.getData(BinFileDataSource.java:53)
    at org.apache.solr.handler.dataimport.BinFileDataSource.getData(BinFileDataSource.java:44)
    at org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:59)
    at org.apache.solr.handler.dataimport.SqlEntityProcessor.nextRow(SqlEntityProcessor.java:73)
    at org.apache.solr.handler.dataimport.EntityProcessorWrapper.pullRow(EntityProcessorWrapper.java:330)
    at org.apache.solr.handler.dataimport.EntityProcessorWrapper.nextRow(EntityProcessorWrapper.java:296)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:683)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:709)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:619)
    at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:327)
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:225)
    at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:375)
    at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:445)
    at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:426)
03-Oct-2012 16:39:48 org.apache.solr.common.SolrException log
SEVERE: Exception while processing: tika-test document : SolrInputDocument[{text=text(1.0)={<html>

<meta name="Content-Encoding" content="ISO-8859-1">
<meta name="Content-Type" content="text/html">
<title></title>

<body>
    <h1>This is my first heading</h1>

        This is some content

    <h1>This is my second heading</h1>

        This is some more content

</body></html>}}]:org.apache.solr.handler.dataimport.DataImportHandlerException: java.lang.NullPointerException
    at org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:65)
    at org.apache.solr.handler.dataimport.SqlEntityProcessor.nextRow(SqlEntityProcessor.java:73)
    at org.apache.solr.handler.dataimport.EntityProcessorWrapper.pullRow(EntityProcessorWrapper.java:330)
    at org.apache.solr.handler.dataimport.EntityProcessorWrapper.nextRow(EntityProcessorWrapper.java:296)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:683)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:709)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:619)
    at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:327)
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:225)
    at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:375)
    at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:445)
    at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:426)
Caused by: java.lang.NullPointerException
    at java.io.File.<init>(File.java:222)
    at org.apache.solr.handler.dataimport.FileDataSource.getFile(FileDataSource.java:96)
    at org.apache.solr.handler.dataimport.BinFileDataSource.getData(BinFileDataSource.java:53)
    at org.apache.solr.handler.dataimport.BinFileDataSource.getData(BinFileDataSource.java:44)
    at org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:59)
    ... 11 more

03-Oct-2012 16:39:48 org.apache.solr.update.processor.LogUpdateProcessor finish
INFO: {deleteByQuery=*:*} 0 31
03-Oct-2012 16:39:48 org.apache.solr.common.SolrException log
SEVERE: Full Import failed:java.lang.RuntimeException: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: java.lang.NullPointerException
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:264)
    at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:375)
    at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:445)
    at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:426)
Caused by: java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: java.lang.NullPointerException
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:621)
    at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.java:327)
    at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:225)
    ... 3 more
Caused by: org.apache.solr.handler.dataimport.DataImportHandlerException: java.lang.NullPointerException
    at org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:65)
    at org.apache.solr.handler.dataimport.SqlEntityProcessor.nextRow(SqlEntityProcessor.java:73)
    at org.apache.solr.handler.dataimport.EntityProcessorWrapper.pullRow(EntityProcessorWrapper.java:330)
    at org.apache.solr.handler.dataimport.EntityProcessorWrapper.nextRow(EntityProcessorWrapper.java:296)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:683)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:709)
    at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilder.java:619)
    ... 5 more
Caused by: java.lang.NullPointerException
    at java.io.File.<init>(File.java:222)
    at org.apache.solr.handler.dataimport.FileDataSource.getFile(FileDataSource.java:96)
    at org.apache.solr.handler.dataimport.BinFileDataSource.getData(BinFileDataSource.java:53)
    at org.apache.solr.handler.dataimport.BinFileDataSource.getData(BinFileDataSource.java:44)
    at org.apache.solr.handler.dataimport.SqlEntityProcessor.initQuery(SqlEntityProcessor.java:59)
    ... 11 more

03-Oct-2012 16:39:48 org.apache.solr.update.DirectUpdateHandler2 rollback
INFO: start rollback
03-Oct-2012 16:39:48 org.apache.solr.update.DirectUpdateHandler2 rollback
INFO: end_rollback 
```

我的数据导入配置是：

```
<dataConfig>
    <dataSource type="BinFileDataSource"/>
    <dataSource type="FieldReaderDataSource" name="fld"/> 
    <document>
        <entity name="tika-test" processor="TikaEntityProcessor"
                url="C:/Program Files/Apache Tomcat/conf/apache-solr-3.5.0/htmlTest/data/html_basic.html" format="html">
                <field column="text"/>
                <entity type="XPathEntityProcessor" forEach="/html" dataField="text">
                    <field xpath="//h1"  column="date" />
                </entity>
        </entity>
    </document>
</dataConfig> 
```

Solr 正在索引的 HTML 文档是：

```
<html>
<head>
</head>
<body>
    <h1>This is my first heading</h1>
    <div>
        This is some content
    </div>
    <h1>This is my second heading</h1>
    <div>
        This is some more content
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T04:37:35.057

您似乎缺少对正确数据源的引用。它需要是名为**dateSource**的实体上的一个属性，它与数据源定义本身的属性**名称相匹配。**您似乎已经定义了名称**fld**但没有引用它。

我建议对数据源和相应的实体都明确地这样做以避免混淆。

# php - MAGENTO - 类别空白页

> ID：12712048
> 
> 赞同：1
> 
> 时间：2012-10-03T15:44:06.937
> 
> 标签：php, magento, wsod

我正在研究我的第一个 magento 主题，但遇到了困难。

我的类别页面 ( [http://namespace.com/category-name/](http://namespace.com/category-name/) ) 是空白的。如果我在后台打开默认主题，我得到了正确的显示，但是当我激活我的包/主题时，我得到的只是空白页。

激活模板路径提示后，我可以看到空白页面正在尝试加载我的默认布局，但正文仍然为空。

可能是我忘记的布局文件，我尝试使用我主题的布局文件夹中的catalog.xml来配置显示，但没有结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:56:45.640

我通过进入 admin > catalog > manage categories > mycategory > Custom Design 并在每个类别的下拉列表中手动选择我的布局来解决它。这不是最灵活的解决方案，但它比空白页要好，所以我将其标记为答案。随意回答，因为我很确定有更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-25T10:45:47.430

我有同样的问题。我检查了var */log中的***system.log**。

 *```
Not valid template file:frontend/base/default/template/page/1columns.phtml 
```

它找不到模板，在我的布局 local.xml 文件中我声明了错误的模板

```
 <action method="setTemplate"><template>page/1columns.phtml</template></action> 
```

有一个拼写错误（1列），应该是：

```
 <action method="setTemplate"><template>page/1column.phtml</template></action> 
```

同样从*Admin -> Catalog -> Category -> Custom Design*我应该将*Use Use Parent Category Settings 设置*为**Yes**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T04:36:51.653

您应该寻找magento编译器，您解决问题的方法是通过为类别选择其他模板的临时解决方案。转到管理->系统->编译->，您可以查看magento编译器是否已启用。如果已启用，您应该禁用它，这将为您做。吨*

# java - 在gridview中设置第一个可见项目

> ID：12712050
> 
> 赞同：1
> 
> 时间：2012-10-03T15:44:10.830
> 
> 标签：java, android, gridview

我需要让 gridview 滚动到我活动的第一项 onResume 。它只有垂直滚动。

我尝试了以下方法，但没有奏效......

```
gridView.setSelection(0);
gridView.scrollY(0); 
```

有人可以帮忙吗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:50:47.797

我会根据您的喜好尝试 gridView.scrollTo(0,0) 或 gridVIew.smoothScrollTo(0,0)。

编辑：用固定代码更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T03:03:54.117

**我已经解决了我的问题！**. 我已经实现了 onActivityResult 并使用已知的请求代码调用了添加新项目的活动。然后返回，结果OK；我使用了 gridView.smoothScrollTo(0)，它就像魅力一样！请参阅下面的代码...

```
Intent intent = new Intent(this, AddNewActivity.class);
startActivityForResult(intent, REQUEST_ADD_NEW);

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode == RESULT_OK)
    {
        if (requestCode == REQUEST_ADD_NEW_CLOTHING_ITEM)
        {
            gridView.smoothScrollToPosition(0);
        }
    }
} 
```

# c++ - 隔离堆栈粉碎错误的工具

> ID：12712053
> 
> 赞同：14
> 
> 时间：2012-10-03T15:44:14.727
> 
> 标签：c++, c, debugging, memory-leaks

委婉地说，我有一个小的内存问题，并且正在用完工具和想法来隔离原因。

我有一个高度多线程（pthreads）的 C/C++ 程序，它在 4.4.4 之后和 4.7.1 之前的 GCC 优化编译下开发了堆栈粉碎问题。

症状是在创建其中一个线程期间，我得到了一个完整的堆栈粉碎，不仅仅是 %RIP，而且所有父帧和大多数寄存器都是 0x00 或其他无意义的地址。哪个线程导致问题似乎是随机的，但是从日志消息来看，它似乎与同一块代码隔离，并且似乎在创建新线程时出现了半可重复的点。

这使得捕获和隔离有问题的代码变得非常困难，而不是一个可能数千行的编译单元，因为到目前为止，在有问题的文件中的 print() 在试图缩小活动部分时被证明是不可靠的.

导致最终破坏堆栈的线程的线程创建是：

```
 extern "C"
{
static ThreadReturnVal ThreadAPI WriterThread(void *act)
{
   Recorder       *rec = reinterpret_cast  (act);
   xuint64        writebytes;
   LoggerHandle m_logger = XXGetLogger("WriterThread");

   if (SetThreadAffinity(rec->m_cpu_mask))
   { ... }
   SetThreadPrio((xint32)rec->m_thread_priority);

   while (true)
   {
     ... poll a ring buffer ... Hard Spin 100% use on a single core, this is that sort of crazy code. 
   }
} 
```

我尝试了调试版本，但症状仅存在于优化版本中，-O2 或更好。我已经尝试过 Valgrind/memcheck 和 DRD，但在堆栈被吹走之前都没有发现任何问题（大约需要 12 小时才能达到故障）

使用 -O2 -Wstack-protector 进行编译没有任何问题，但是使用 -fstack-protector-all 进行编译确实可以保护我免受错误的影响，但不会发出任何错误。

Electric-Fence 也有陷阱，但只有在堆栈消失之后。

**问题：**还有哪些其他工具或技术可用于缩小违规部分的范围？

非常感谢，--比尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T22:59:10.573

解决此类问题的几个选项：

您可以尝试在损坏发生之前在堆栈地址上设置硬件断点，并希望调试器在损坏时足够早地中断以提供模糊有用的调试状态。这里棘手的部分是选择*正确的*堆栈地址；根据违规线程的“选择”的随机性，这可能不切实际。但是从您的一条评论看来，通常是新创建的线程被破坏了，所以这可能是可行的。尝试在线程创建过程中中断，获取线程的堆栈位置，通过一些疯狂的猜测来抵消，设置硬件 BP，然后继续。根据您是否过早、过晚或根本不休息，调整您的偏移量，冲洗并重复。这基本上是高级猜测和检查，如果损坏模式过于随机，可能会受到严重阻碍或完全不切实际，但令人惊讶的是，这经常会导致半清晰的堆栈和成功的调试工作。

另一种选择是开始收集故障转储。尝试在故障转储之间寻找可能有助于您更接近损坏源的模式。也许您会很幸运，其中一个故障转储会“更快”/“更接近源”崩溃。

不幸的是，这两种技术更像是艺术而不是科学。它们是非确定性的，依赖于健康的运气等（至少根据我的经验.. 话虽如此，有些人可以通过崩溃转储做出惊人的事情，但这需要很多时间达到那个水平的技能）。

另一个旁注：正如其他人指出的那样，未初始化的内存是调试与发布差异的一个非常典型的来源，在这里很容易成为您的问题。但是，另一个需要记住的可能性是时间差异。线程被调度的顺序和时间，在调试和发布中通常有很大的不同，并且很容易导致同步错误被掩盖在一个而不是另一个中。这些差异可能只是由于执行速度差异造成的，但我认为某些运行时故意在调试环境中混淆线程调度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:33:46.840

您可以使用静态分析工具来检查一些细微的错误，也许发现的错误之一将是您的错误的原因。[您可以在此处](https://stackoverflow.com/questions/97454/c-static-code-analysis-tool-on-windows)找到有关这些工具的一些信息。

# php - 动态生成标题以显示请求的文件

> ID：12712055
> 
> 赞同：0
> 
> 时间：2012-10-03T15:44:24.513
> 
> 标签：php

我有一个包含许多不同类型文件的文件夹。我需要显示任何请求的文件，因此必须相应地调整标题。我尝试的是：

```
header( 'Content-Type: ' . filetype( 'files/' . $file ) );

readfile( 'files/' . $file ); 
```

它适用于 JPG、PNG 和 GIF 文件，但由于某种原因 MP3 文件已经使浏览器崩溃，所以我想它不适用于每种文件类型。方法或代码有问题吗？你会怎么做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:54:04.037

通过[PHP 文档](http://us2.php.net/filetype1)，`filetype()` *返回文件的类型。可能的值是 fifo、char、dir、block、link、file、socket 和 unknown。*

您想要的是文件的 MIME 类型。你想要的是[Fileinfo](http://us2.php.net/manual/en/ref.fileinfo.php)。例如：

```
$finfo = finfo_open(FILEINFO_MIME_TYPE);
header("Content-Type: ".finfo_file($finfo, 'files/'.$file));
finfo_close($finfo);
readfile('files/'.$file); 
```

您也可以快速尝试[mime_content_type](http://us2.php.net/manual/en/function.mime-content-type.php)（如果可用），以确保系统没有其他问题。但不推荐这样做，因为**它已被贬低**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:53:53.087

您必须发送正确的 mime 类型，这可能很棘手。

您可以使用[mime-content-type](http://www.php.net/manual/en/function.mime-content-type.php)函数，但这是一个**已弃用**的函数。

```
$mimetype = mime_content_type ( $file );
header( 'Content-type: '. $mimetype ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:52:58.753

将此用于 mp3 文件

```
header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file); 
```

# javascript - 计算 JSON 中每个项目的出现次数

> ID：12712056
> 
> 赞同：4
> 
> 时间：2012-10-03T15:44:28.777
> 
> 标签：javascript, jquery, json

我想返回每个属性的计数。例如，我想返回每个组中有多少人。因此，对于以下 JSON，它将返回第 1 组中的 3 人、第 3 组中的 3 人、第 16 组中的 2 人等。

我正在寻找 Javascript 或 jQuery 解决方案。

注意：我不需要帮助解析 JSON。我只需要帮助来查找每次出现的次数。

```
{
"people":[
    {"id":"0","name":"Mike Johnson","group":1},
    {"id":"1","name":"Bob Smith","group":2},
    {"id":"2","name":"Richard Thomas","group":3},
    {"id":"3","name":"Betty White","group":16},
    {"id":"4","name":"Tim Thompson","group":3},
    {"id":"5","name":"Carl Lewis","group":16},
    {"id":"6","name":"Kathy Towers","group":3},
    {"id":"7","name":"Billy Bob","group":1},
    {"id":"8","name":"Sally Bailey","group":1}
    ]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:48:50.283

就像一些评论说的那样，你必须遍历“人”数组。很容易将这个“功能”变成像我这样的功能，这样您就可以指定您正在搜索的组，并返回人数。

[http://jsfiddle.net/UdhRW/](http://jsfiddle.net/UdhRW/)

```
var obj = {
  "people": [
    {"id":"0","name":"Mike Johnson","group":1},
    {"id":"1","name":"Bob Smith","group":2},
    {"id":"2","name":"Richard Thomas","group":3},
    {"id":"3","name":"Betty White","group":16},
    {"id":"4","name":"Tim Thompson","group":3},
    {"id":"5","name":"Carl Lewis","group":16},
    {"id":"6","name":"Kathy Towers","group":3},
    {"id":"7","name":"Billy Bob","group":1},
    {"id":"8","name":"Sally Bailey","group":1}
    ]
};

function getCount(group) {
    var count = 0;
    for (var i = 0; i < obj.people.length; i++) {
        if (obj.people[i].group == group) {
            count++;
        }
    }
    return count;
}

getCount(1);   // should return 3 
```

如果`obj`不是全局的，你可以将它传递给函数，它会是这样的：

```
function getCount(arr, group) {
    var count = 0;
    for (var i = 0; i < arr.length; i++) {
        if (arr[i].group == group) {
            count++;
        }
    }
    return count;
}

getCount(obj.people, 1);   // should return 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T15:51:35.043

您可以使用以下方法提取组：

```
> var groups = foo['people'].map(function(value, index) {return value['group']});
[1, 2, 3, 16, 3, 16, 3, 1, 1] 
```

从那里，只需使用以下键创建一个对象：

```
var group_count = {};

groups.forEach(function(value, index) {
    if (value in group_count) {
        group_count[value] += 1;
    } else {
        group_count[value] = 1;
    }
}); 
```

这将为您提供一个包含每个组出现次数的对象。

此外，此代码不适用于 IE8 及更低版本，因此您必须在网络上的某处找到 a`forEach`和`map`polyfill。

# linq - LINQ to CRM 或只是 LINQ to SQL/Entity

> ID：12712060
> 
> 赞同：1
> 
> 时间：2012-10-03T15:44:37.503
> 
> 标签：linq, dynamics-crm

我已经在从 CRM Dynamics 获取的实体上使用了 LINQ，但是尽管数据的原始来源，它仍然只能通过 LINQ 操作到数据结构。现在，我得到了一个提示，即存在使用 LINQ 直接在 Dynamics 中查询数据库的可能性，这令人惊讶，但（假设它成功了）太棒了。

因此，我检查了 SDK 和示例，据我所知，那里有某种 LINQ to CRM 的东西。因为我很难相信微软在这样一个专门的产品上花费了这么多的开发时间，我怀疑它实际上是在 CRM 下运行的 LINQ to SQL/Entity（Dynamics 是由 MS SQL Server 提供支持的，不是吗？ ?) 我希望有人否认或确认。

例如，我看过这两篇文章：[document #1](http://msdn.microsoft.com/en-us/library/gg509017.aspx)和[document #2](http://msdn.microsoft.com/en-us/library/gg334504.aspx)。

编辑：

因此，我的问题是，是否存在真正的 LINQ-to-CRM，或者我们是否正在处理在真正的 CRM Dynamics 下运行的 LINQ-to-SQL（或类似的东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:14:59.163

您引用的示例似乎正在使用 LINQ-to-Objects。

从[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/gg328028.aspx)，微软似乎*为*CRM 创建了一个专门的 API，格式为`OrganizationServiceContext`.

此类用于访问 SOAP 端点，因此它**不**利用 L2S 或 LINQ-to-EF。

> 在 Microsoft Dynamics CRM 2011 和 Microsoft Dynamics CRM Online 中，您可以使用 .NET 语言集成查询 (LINQ) 来编写查询。您可以*使用 OrganizationServiceContext 类或由 CrmSvcUtil 工具创建的派生类来编写访问 SOAP 端点*(Organization.svc) 的 LINQ 查询。OrganizationServiceContext 类包含一个基础 LINQ 查询提供程序，它将 LINQ 查询从 Microsoft Visual C# 或 Microsoft Visual Basic .NET 语法转换为 Microsoft Dynamics CRM 使用的查询 API。

CRM Web 服务是否针对 SQL Server 使用 LINQ-to-SQL 或 LINQ-to-EF 是另一个问题。

# jquery - 尝试将 jquery 添加到 Tapestry 5

> ID：12712064
> 
> 赞同：1
> 
> 时间：2012-10-03T15:44:42.707
> 
> 标签：jquery, tapestry

我在我的项目中使用 Tapestry 5.2.6。但现在我正在尝试向其中添加 jquery 代码。

为此，我添加了依赖项

```
<dependency>
        <groupId>org.got5</groupId>
        <artifactId>tapestry5-jquery</artifactId>
        <version>3.0.0</version>
    </dependency> 
```

一旦我这样做了，我的应用程序工作正常，开始失败并且不运行，显示之前没有失败的类中的错误

严重：上下文初始化失败 org.springframework.beans.factory.BeanCreationException：创建名为“convocatoriaDao”的 bean 时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配方法：public void es.udc.pojo.modelutil.dao.GenericDaoHibernate.setSessionFactory(org.hibernate.SessionFactory); 嵌套异常是 org.springframework.beans.factory.BeanCreationException：在类路径资源 [pojo-horarios-spring-config.xml] 中定义名称为“sessionFactory”的 bean 创建错误：调用 init 方法失败；嵌套异常是 java.lang.NoSuchMethodError: org.slf4j.helpers.MessageFormatter.format(Ljava/lang/String;Ljava/lang/Object;)Lorg/slf4j/helpers/FormattingTuple;

是否有任何其他方法可以使用 jquery 和挂毯（我从未使用过 jquery ......）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:01:41.660

我不确定，但在项目 github 的变更日志中，我看到：

> 3.0.0：切换到 Tapestry 5.3（新的 JavaScript 层）添加组件：图库

所以也许你需要更新到 Tapestry 5.3 或者使用旧版本的 Tapestry5-jquery (2.6.6)

# php - 编写汇总的验证 javascript 代码

> ID：12712068
> 
> 赞同：0
> 
> 时间：2012-10-03T15:44:52.027
> 
> 标签：php, javascript, html, validation, css

我在管理站点上有一个 HTML 页面，用于管理在浏览器上运行的 HTML/Javascript/PHP 系统上的用户。我有近 20 个输入框，因为在一页上我结合了几种形式的 new_user、forgot_password、Change_password 和 Edit_user_details。

这段代码是我用来检查用户名的空字段的，这意味着我必须写 20 行；
我关心的是`-->`如何写一个简短的、总结的但有效`javascript code`的检查空字段。（我还需要验证数字、数字、长度、电子邮件等字段）

```
function RequiredFields(){
 var username=document.forms["login"]["username"].value;
  if (username==""||username==null){
     alert("empty username")
     document.login.username.focus();
     if(document.all||document.getElementById){
         document.login.username.style.background="pink";
    }
     return false;
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:55:21.497

您可以使用 jQuery 来检查空字段，看看这段代码：

```
function Validate() {
    $('form input[type="text"]').each(function(){
    if (this.value=="")
        alert('Value Required');
        });
    } 
```

要验证电子邮件、数字等内容，您需要为这些特定文本框编写单独的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:29:44.383

见这里：http: [//jsfiddle.net/TgCbB/1/](http://jsfiddle.net/TgCbB/1/)

HTML

```
<input type="text" id="username" class="required" data-default="User Name"/>
<input type="text" id="email" class="required email" data-default="Email"/>
<input type="text" id="digits" class="required digits" data-default="Integer"/> 
```

这里要注意的重要一点是`class`属性，它指示应该如何验证它。（您可以使用 data- 属性来做到这一点，这会更好，但我使用 class 是为了向后兼容）。

您现在可以使用普通的 javascript 进行验证，如下所示：

```
function validate(e){
    var invalid = [];

    var required = document.getElementsByClassName("required");
    for (var i = 0; i < required.length; i++){
        var req = required[i];
        var val = req.value || "";
        var def = req.hasAttribute("data-default") ? req.getAttribute("data-default") : "";

        if (val == "" || val == def)
            invalid.push(req);

        req.className = req.className.replace(" invalid","");
    }

    var digits = document.getElementsByClassName("digits");
    for (var i = 0; i < digits.length; i++){
        var dig = digits[i];
        var val = Number(dig.value || "");
        var rem = val - Math.floor(val);

        if (rem != 0)
            invalid.push(dig);

        dig.className = dig.className.replace(" invalid","");
    }

    var emails = document.getElementsByClassName("email"),
        reg = /^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;
    for (var i = 0; i < emails.length; i++){
        var em = emails[i];
        var val = em.value || "";

        if (!reg.test(val))
            invalid.push(em);

        em.className = em.className.replace(" invalid", "");
    }

    for (var i = 0; i < invalid.length; i++){
        var inp = invalid[i];
        var cls = inp.className.replace(" invalid", "");

        inp.className = cls + " invalid";
    }
} 
```

请注意，可以不那么冗长，但我选择了可​​读性。这个概念是，使用我们正在验证的类名获取每个项目，迭代它们，然后如果它没有通过验证，则将其标记为无效。

# visual-studio-2010 - SAP Crystal Reports，VS 2010 安装程序版本问题

> ID：12712070
> 
> 赞同：-1
> 
> 时间：2012-10-03T15:44:58.870
> 
> 标签：visual-studio-2010, crystal-reports, installation, sap

我最近下载了 VS 2010 的 Crystal Reports 版本的安装程序。我可以在我的 PC 上安装它，没问题。但是我需要帮助的领域是将它安装在不是 C 驱动器的驱动器上。我正在尝试将它安装在 PC 的 D 盘上，以便可以从其他计算机访问它。但是当我运行灌输时，它只允许它安装在C盘上。有一个浏览按钮可以选择不同的路径。但是该按钮未启用，因此我别无选择。有谁知道我如何启用浏览按钮，或者是否有更好的下载可以让我选择路径。[我从http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp](http://www.businessobjects.com/jump/xi/crvs2010/us2_default.asp)下载了安装程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:18:22.797

无论如何，Crystal Reports 都需要安装在每台 PC 上（我相信它会注册一些 COM 组件、注册表等），因此即使您可以更改安装路径，它也不会为您节省任何时间/磁盘空间/等。

# javascript - marionetteJS 应用程序对象中有聚合发泄事件的方法吗？

> ID：12712072
> 
> 赞同：1
> 
> 时间：2012-10-03T15:44:59.490
> 
> 标签：javascript, backbone.js, marionette

木偶中有没有办法聚合事件？

我的意思是改变它会容易得多：

```
 MyApp.vent.on("taskMoved", function(moveData){
              // taskId, fromBucketId, toBucketId, order, $li
              moveTask(moveData.taskId,moveData.fromBucketId, moveData.toBucketId, moveData.order, moveData.li);
            });

            MyApp.vent.on("taskMovedLast", function(moveData){
              // taskId, fromBucketId, toBucketId, order, $li
              moveTaskLast(moveData.taskId, moveData.fromBucketId, 99);
            });

            MyApp.vent.on("taskMovedFirst", function(moveData){
              // taskId, fromBucketId, toBucketId, order, $li
              moveTaskFirst(moveData.taskId, moveData.fromBucketId, 99);
            }); 
```

进入这个：

```
 {
"taskMoved":"moveTask",
"taskMovedLast":"taskMovedLast",
"taskMovedFirst":"taskMovedFirst"
} 
```

类似于 BackboneView 事件对象。

可以这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:17:03.867

你可以编写一个方法来做到这一点，但据我与 Marionette 的合作，你不能。

但是，您可以执行以下操作：

```
bind_events: function(events_hash){
    var that = this;
    _.each(events_hash, function(func, evt){
        MyApp.vent.on(evt, that[func]);
    }
}; 
```

传入那个哈希，它会为你打开它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T00:02:22.857

如果您想绑定到所有发泄事件，请尝试：

```
vent.on('all',this.trigger.bind(this)) 
```

这是个好主意，如果您想将发泄用作“代理/中介”

# javascript - 可折叠组件、目标和父级

> ID：12712076
> 
> 赞同：1
> 
> 时间：2012-10-03T15:45:10.877
> 
> 标签：javascript, jquery, jquery-selectors, twitter-bootstrap

我将[bootstrap-collapse.js](http://twitter.github.com/bootstrap/javascript.html#collapse)用于可折叠组件。

我正在尝试做的是通过测试元素本身并遍历其在 DOM 树中的祖先来匹配选择器。

下面是一个html代码示例：

```
<button type="button" class="btn btn-danger" 
    data-toggle="collapse" 
    data-target="#child">Collapse</button>

<div id="parent" class="parent">
    <textarea id="child">
        asdads
        asdasdas
    </textarea>
</div>​ 
```

如您所见，我想折叠`.parent`的不仅仅是`#child`.
我该怎么做？
这是 jsfiddle 演示：http: [//jsfiddle.net/Re8Av/10/](http://jsfiddle.net/Re8Av/10/)

PS：

data-target=".parent" 不起作用，因为我有很多这些组件。

# android - 显示按钮 seeMore 当文本视图中的文本消失时

> ID：12712081
> 
> 赞同：4
> 
> 时间：2012-10-03T15:45:25.707
> 
> 标签：android, android-layout

当文本视图中的文本大于一行或文本视图中的文本超出视图时，我想显示一个按钮 seeMore。我使用字符长度和子字符串方法完成了它。但问题是当它具有不同的屏幕尺寸时，我无法确定字符串长度。现在我为四种不同的屏幕尺寸使用固定长度，主要是中、普通、大 Xlarge。谁能帮我克服这个问题

提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:19:06.390

我最近实现了一个类似的功能，我需要显示用户评论列表。每个项目最多显示两行和“更多”链接。单击该链接时，将显示全文并隐藏“更多”链接。

首先，我有一个`Comment`对象数组：

```
public class Comment {
    private boolean showFull;
    private String name;
    private String date,
    private String description;

    //standard constructor and a set of setters and getters, including
    public String getFullDescription();
    public String getShortDescription();
} 
```

现在，在这个特定的实现中，简短描述只是长描述的前 100 个字符，并附加了“...”（如果总长度超过 100 个字符）。

我使用这些`Comment`对象的数组作为自定义的数据源`Adaper`：

```
public class CommentRowAdapter extends BaseAdapter {
    private List<Comment> data = null;
    ...
    //all standard method implementations, including get, count, etc., etc. and then

    public View getView(int position, View convertView, ViewGroup parent) {
        LinearLayout row = (LinearLayout) (convertView == null ? LayoutInflater
                .from(context).inflate(R.layout.listcomm, parent, false)
                : convertView);
        row.setClickable(false);
        final Comment comment = data.get(position);

        //populate all other elements of the row
                ...

                //and now the description
        if (comment.isShowFull()) {
            TextView tv = (TextView) row.findViewById(R.id.CommentDesc);
            tv.setText(comment.getDescriptionFull());
            tv.setTextColor(context.getResources().getColor(R.color.black));
            tv = (TextView) row.findViewById(R.id.CommentMore);
            tv.setVisibility(View.GONE);            
        } else {
            final TextView tvDesc = (TextView) row.findViewById(R.id.CommentDesc);
            tvDesc.setText(comment.getDescriptionShort());
            tvDesc.setTextColor(context.getResources().getColor(R.color.black));
            final TextView tvMore = (TextView) row.findViewById(R.id.CommentMore);
            tvMore.setVisibility(View.VISIBLE);
            tvMore.setTextColor(context.getResources().getColor(R.color.venue_blue));
            tvMore.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View arg0) {                    
                    comment.setShowFull(false); 
                    tvDesc.setText(comment.getDescriptionFull());
                    tvMore.setVisibility(View.GONE);
                    tvDesc.invalidate();
                }
            });

        }

        return row;
    }
} 
```

该行的 XML 是

```
<LinearLayout android:id="@+id/ListPoi"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:orientation="vertical" android:padding="5dp"
    android:background="@drawable/listpoi_color" xmlns:android="http://schemas.android.com/apk/res/android">
    />
    <LinearLayout android:id="@+id/LinearLayout01"
        android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:orientation="horizontal"
        xmlns:android="http://schemas.android.com/apk/res/android">
        <TextView android:id="@+id/CommentName" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="12sp"
            android:gravity="left" android:textStyle="bold" android:text="Name"
            android:singleLine="true" />
        <TextView android:id="@+id/CommentDate" android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textSize="12sp"
            android:paddingLeft="5dp" android:textStyle="bold"  android:text="Date" android:singleLine="true" />
    </LinearLayout>

    <TextView android:id="@+id/CommentDesc" android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:gravity="bottom"
        android:textSize="12sp" android:text="Description" />

    <TextView android:id="@+id/CommentMore" android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:gravity="right"
        android:textSize="12sp" android:text="more" />
</LinearLayout> 
```

不同屏幕尺寸的布局由列表本身处理。

您可以通过不通过字符数限制文本大小而是通过文本字段的高度来扩展此实现。 [这个问题](https://stackoverflow.com/questions/4794484/calculate-text-size-according-to-width-of-text-area)对如何计算文本视图中文本的大小有一个很好的答案。使用该技术，您可以确定需要用于截断的字符数。除此之外，它`ListView`本身负责不同屏幕尺寸的布局。

# android - encodeToString base64 android问题

> ID：12712082
> 
> 赞同：2
> 
> 时间：2012-10-03T15:45:26.477
> 
> 标签：android, string, base64

我想将字符串编码为 binary64 但是我发现了一个错误，我不知道如何解决这个问题。这是我正在使用的代码。

```
String text = name1.getText().toString();
    // Sending side
    byte[] data = null;
    try {
        data = text.getBytes("UTF-8");
    } catch (UnsupportedEncodingException e1) {
    e1.printStackTrace();
    }
    String base64 = Base64.encodeToString(data, Base64.DEFAULT); 
```

但是，`Base64.encodeToString`显示错误说需要 API 级别 8（当前最小 sdk 为 1）。但我使用的是 android 2.2，我相信它的 min sdk 是 8。我说得对吗？

比我试图审查这个问题，它似乎是这样的：

![在此处输入图像描述](../Images/fd3f3b5a4d259a2b80eac26aca01aa10.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:54:32.870

尝试更改您的 AndroidManifest.xml：

```
<uses-sdk android:minSdkVersion="8"
          android:targetSdkVersion="8"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:54:22.540

看看你的清单文件，里面会有一个条目，比如

```
 android:minSdkVersion="8" 
```

确保它至少为 8 听起来好像设置为 1

# ruby-on-rails-3 - 在 Rails 3.2.8 中未通过 MassAssignmentSecurity 的私有方法

> ID：12712084
> 
> 赞同：0
> 
> 时间：2012-10-03T15:45:29.630
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, mass-assignment

升级到 rails 3.2.8 后，我在 rails 3.2.6 中通过质量分配的私有方法不再通过，我不断收到质量分配错误。

我的控制器是

```
class AddressesController < BaseController
  # GET /addresses
  # GET /addresses.json
  def index
    @address = Address.new

    form_info
    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @addresses }
    end
  end

  # GET /addresses/1
  # GET /addresses/1.json
  def show
    @address = Address.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @address }
    end
  end

  # GET /addresses/new
  # GET /addresses/new.json
  def new
    @address = Address.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @address }
    end
  end

  # GET /addresses/1/edit
  def edit
    @address = Address.find(params[:id])
  end

  # POST /addresses
  # POST /addresses.json
  def create
    if params[:address].present?
      @address = current_user.addresses.new(params[:address])
      @address.default = true          if current_user.default_shipping_address.nil?
      @address.save_default_address(current_user, params[:address])
    elsif params[:address_id].present?
      @address = current_user.addresses.find(params[:address_id])
    end
    respond_to do |format|

      if @address.id
        update_order_address_id(@address.id)
        format.html { redirect_to(orders_url, :notice => 'Address was successfully created.') }
      else
        form_info
        format.html { render :action => "index" }
      end
    end
  end

  # PUT /addresses/1
  # PUT /addresses/1.json
  def update
    @address = Address.find(params[:id])

    respond_to do |format|
      if @address.update_attributes(params[:address])
        format.html { redirect_to @address, notice: 'Address was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @address.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /addresses/1
  # DELETE /addresses/1.json
  def destroy
    @address = Address.find(params[:id])
    @address.destroy

    respond_to do |format|
      format.html { redirect_to addresses_url }
      format.json { head :no_content }
    end
  end

  private

  def update_order_address_id(id)
    session_order.update_attributes(
        :address_id => id
    )
  end

  def form_info
    @addresses = current_user.addresses
  end

end 
```

创建地址后，我希望它执行`update_order_address_id(id)`方法，但它一直告诉我

```
Can't mass-assign protected attributes: address_id 
```

这一切都是在升级到 rails 3.2.8 之后开始的。有没有人知道我该如何解决这个问题或对此有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:50:48.410

尝试将此行添加到模型中

```
attr_accessible :address_id 
```

[https://stackoverflow.com/a/4538861/643500](https://stackoverflow.com/a/4538861/643500)

编辑：

不确定你是否读过这个

```
class AccountsController < ApplicationController
  include ActiveModel::MassAssignmentSecurity

  attr_accessible :first_name, :last_name
  attr_accessible :first_name, :last_name, :plan_id, :as => :admin

  def update
    ...
    @account.update_attributes(account_params)
    ...
  end

  protected

  def account_params
    role = admin ? :admin : :default
    sanitize_for_mass_assignment(params[:account], role)
  end

end 
```

[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html)

# java - 在运行时访问对象的泛型类型

> ID：12712085
> 
> 赞同：2
> 
> 时间：2012-10-03T15:45:35.147
> 
> 标签：java, generics, reflection

我知道如何使用反射访问通用类型的字段：只需检查 if `field.getGenericType() instanceof ParameterizedType`.

但是，如何在不知道它在哪里声明的情况下检查任意对象的相同内容呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:01:56.710

泛型适用于变量声明、方法返回类型等，而不是对象本身。您可以通过来确定`Class`特定对象的 是否使用泛型，`myObj.getClass().getTypeParameters()`但无法确定创建特定对象实例时使用的这些类型参数的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:14:12.693

*对象本身*不存储通用信息，因此生成的字节码与 for`new ArrayList<Integer>()`完全相同`new ArrayList<String>()`。我的意思是*准确*的。这就是所谓的 Java 泛型*类型擦除*。他们只是去糖了`new ArrayList()`。

但是，在几乎所有其他情况下，都会保留类型参数，例如字段/参数/返回类型声明。保留*而不*删除的情况之一是类的超类。因此，如果您创建一个扩展类，`ArrayList<String>`您可以在运行时访问该信息。

但这似乎有点矫枉过正，不是吗？一个扩展的新类`ArrayList<String>`和另一个扩展的类`ArrayList<String>`等似乎不切实际。匿名内部类可以使这更容易。所以，如果你想保留通用信息，你只需要做，`new ArrayList<String>() {}`而不是`new ArrayList<String>()`. 您可以调用`getClass().getGenericSuperclass()`创建的对象来获取通用信息。

# android - 比较 TEXT 变量不起作用

> ID：12712086
> 
> 赞同：1
> 
> 时间：2012-10-03T15:45:37.323
> 
> 标签：android, sqlite

当我尝试在我的 Android SQLite DB 上比较 TEXT 时，我遇到了问题。

我有一个这样的查询：

```
select * from myTable where _id='some.text.dots.are.really.there!' 
```

我的表是`TEXT PRIMARY KEY`. 我正在尝试选择和更新表中的一些数据。当我执行 SELECT *.

Android 代码（带有 where 子句）如下所示：

```
mDb.query(TABLE_TRANSACTIONS, TABLE_TRANSACTIONS_COLUMNS, COLUMN__ID + " = ?", 
            new String[] {id }, null, null, null); 
```

但

```
mDb.query(TABLE_TRANSACTIONS, TABLE_TRANSACTIONS_COLUMNS, COLUMN__ID + " = '" + id + "'", 
            null, null, null, null); 
```

既不工作。如何在 Android 上比较 SQLite 中的 TEXT 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:24:30.733

SQLite 在比较字符串时还会考虑`TEXT CASE`(UPER CASE/LOWER CASE)，因此您可以使用`COLLATE NOCASE`，这会强制 SQLite 忽略`TEXT CASE`。

试试这个：

```
SELECT * 
FROM   myTable 
WHERE  _id='some.text.dots.are.really.there!' 
COLLATE NOCASE; 
```

您可以将 rawQuery 用于 SELECT：

```
mDb.rawQuery('Query Here',null); 
```

并为 INSERT/UPDATE/DELET 执行查询：

```
mDb.executeQuery('Query Here',null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:14:56.513

我发现了问题：例程对 ID 进行了加盐处理，因此它们与纯文本字符串不同。

愚蠢的错误......无论如何，谢谢你们。

# java - Sencha GXT 或 SmartGWT for WebApp 支持浏览器和平板电脑

> ID：12712088
> 
> 赞同：1
> 
> 时间：2012-10-03T15:45:43.423
> 
> 标签：java, ipad, smartgwt, gxt

我目前正在查看 2 GWT 小部件库。SmartGWT 和 Sencha GXT。

不幸的是，StackOverflow 上的很多问题都可以追溯到很久以前。所以事情可能已经改变了。

您对 SmartGWT 和 GXT 有何经验。尤其是对 iPad 或 GalaxyPads 等移动设备的支持，以及在 rendom 情况下的智能手机。

SmartGWT 提供 SmartGwt.Mobile，GXT 提供 Sencha Touch。到目前为止有人用过吗？还没有在 Internet 上找到很多信息 :( 对我们来说重要的是我们可以用 Java 开发，因为我们有些人不想做很多 JavaScript...

希望你们能帮助我:)

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-01T10:03:44.947

Smartgwt 对我来说效果很好，因为它有很多在 SmartGWT LGPL（免费/开源）下更易于编写的小部件。然而，小部件的对齐和大小需要修改，它与 css 的关系比普通的 java 大。一段时间以来，ypu 仍然需要深入研究 css。Smartgwt.Mobile 非常好。对我来说，GXT 得分有两点，蓝色主题看起来比 smartgwt 的好，数据的统计/图形表示很棒！（[http://www.sencha.com/examples/#ExamplePlace:linegapchart](http://www.sencha.com/examples/#ExamplePlace:linegapchart)）请关注两个 UI 供应商的展示[http://www.smartclient.com/smartgwt/showcase/#portlet_events_portal_layout](http://www.smartclient.com/smartgwt/showcase/#portlet_events_portal_layout)

# email - grails邮件不工作

> ID：12712092
> 
> 赞同：1
> 
> 时间：2012-10-03T15:45:49.880
> 
> 标签：email, grails

圣杯项目。我使用电子邮件插件并在尝试调用方法“sendMail”时出现异常

错误：

```
Caused by: org.springframework.mail.MailSendException: Mail server connection failed; nested exception is javax.mail.NoSuchProviderException: Unable to locate provider for protocol: smtp. Failed messages: javax.mail.NoSuchProviderException: Unable to locate provider for protocol: smtp; message exceptions (1) are:
Failed message 1: javax.mail.NoSuchProviderException: Unable to locate provider for protocol: smtp 
```

配置.groovy

```
grails {
    mail {
        host = "smtp.gmail.com"
        port = 465
        username = "mymail@gmail.com"
        password = "mypass"
        props = ["mail.smtp.auth":"true",
                //"mail.smtp.port":"465",
                //"mail.debug":"true",
                "mail.smtp.socketFactory.port":"465",
                "mail.smtp.socketFactory.class":"javax.net.ssl.SSLSocketFactory",
                "mail.smtp.socketFactory.fallback":"false"]
    }
} 
```

发送示例

```
sendMail {
                    to "fred@gmail.com"
                    subject "Hello Fred"
                    body 'How are you?'
                } 
```

我究竟做错了什么？

[解决方案](https://stackoverflow.com/questions/7406564/using-java-to-send-emails-on-gmail-account)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:42:12.507

错误说`Unable to locate provider for protocol: smtp`。似乎您缺少 smtp 协议的一些依赖项，这看起来很奇怪，显然您缺少 javamail (?)。因为代码对我来说似乎很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-29T16:01:00.687

添加到 config.groovy

```
grails {
    mail {
      host = "smtp.gmail.com"
      port = 465
      username = "email"
      password = "pwd"
      props = ["mail.smtp.auth":"true",
               "mail.smtp.socketFactory.port":"465",
               "mail.smtp.socketFactory.class":"javax.net.ssl.SSLSocketFactory",
               "mail.smtp.socketFactory.fallback":"false"]
    }
 } 
```

使用此代码发送邮件

```
def sendEmail(){

    mailService.sendMail {
        to "email","**email**"
        from "email"
        subject "Hi"
        body 'Hi'
    }
} 
```

也不要忘记在你的班级中注入邮件服务

```
def mailService 
```

这会将服务注入您的班级

这个配置足以发送邮件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:45:44.920

您是否尝试过删除

```
 "mail.smtp.port":"465",
            "mail.debug":"true", 
```

从你的配置？这是我在您的代码和官方示例之间看到的唯一区别。

更新：正如 GalmWing 已经说过的，您的 java.mail jar 文件似乎有问题。请检查此解决方案：[Using Java to send emails on gmail account](https://stackoverflow.com/questions/7406564/using-java-to-send-emails-on-gmail-account)。在我看来，你也有同样的问题。您使用哪个 java 版本？

# objective-c - 当今的客观 C 点运算符

> ID：12712095
> 
> 赞同：0
> 
> 时间：2012-10-03T15:45:57.610
> 
> 标签：objective-c, ios

我正在从一本“新”书中学习这一点，但我想知道目前的标准是关于将点运算符用于设置属性值之外的事情。

就像方法调用之类的一样。显然`myClass.myMethod:value`在语法上是正确的，但它现在是公认的规范吗？

点运算符比`[myClass myMethod:myValue]`我认为的更“人性化”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T15:53:17.013

你试过编译这个吗？据我了解，您的 myClass.myMethod:value 示例无效。

点运算符由编译器转换为`-(void)setMyValue:(ValueType*)`或者 `-(ValueType*)myValue`取决于您是获取还是设置它。

阅读苹果文档以获取更多信息：http: [//developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW17](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW17)

# java - spring JMX可以在两个不同的bean名称下导出同一个bean实例吗？

> ID：12712096
> 
> 赞同：1
> 
> 时间：2012-10-03T15:45:58.973
> 
> 标签：java, spring, jmx

在 Spring 3.1 中，我试图通过 JMX 以两个不同的 bean 名称和两个不同的接口导出同一个 bean。

下面是一些示例 spring xml 配置，显示了我正在尝试做的事情：

```
<bean id="exporter" class="org.springframework.jmx.export.MBeanExporter">
<property name="beans">
  <map>
    <entry key="internal:name=internalName" value-ref="myBean"/>
    <entry key="external:name=externalName" value-ref="myBean"/>
  </map>
</property>
<property name="assembler">
  <bean class="org.springframework.jmx.export.assembler.InterfaceBasedMBeanInfoAssembler">
    <property name="interfaceMappings">
      <props>
        <prop key="internal:name=internalName">InternalMXBean</prop>
        <prop key="external:name=externalName">ExternalMXBean</prop>
      </props>
    </property>
  </bean>
</property> 
```

myBean 实现了我试图通过 JMX 公开的两个接口。

但是，当我启动我的应用程序时，我得到了异常

```
javax.management.InstanceAlreadyExistsException: MXBean already registered with name internal:name=internalName 
```

有没有办法在两个不同的 mbean 名称下注册同一个 bean 实例，暴露不同的接口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:42:26.800

[您可以使用多个名称注册同一个 MBean 吗？](https://community.oracle.com/blogs/emcmanus/2005/07/16/can-you-register-same-mbean-more-one-name)表示您可以使用不同的名称注册相同的 MBean，但提供了一些理由来说明为什么这可能是一个坏主意。

在我的具体情况下，我使用的是 MXBeans。不能在不同的对象名称下注册相同的 MXBean，因为这会与对 MXBean 间引用的支持发生冲突。

# asp.net-mvc - 中间层/后端服务的洋葱架构

> ID：12712097
> 
> 赞同：0
> 
> 时间：2012-10-03T15:46:00.183
> 
> 标签：asp.net-mvc, domain-driven-design, soa, onion-architecture

我目前正在研究J.Palermo 的[Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)。在我的情况下，我在实施它时遇到了一些麻烦。这种架构是否适合“业务较少”的网站，也就是服务的混搭？

**这是我的情况：**

我们有许多后端服务（在 WCF 中），每一个都暴露独立的业务数据（营销、帐户、报价、CMS ......）。我们的许多 MVC 网站“只是”使用这些服务来呈现页面。所有业务逻辑都在服务中，网站仅限于呈现逻辑。网站中没有数据库访问权限。然而，一些业务数据可以合并到一个复合实体中进行展示（例如将内容页面链接到报价）。我想把这个逻辑放在服务层下。

**编辑：** 我应该为映射后端/中间层服务结果/操作创建域模型吗？也许这里的业务逻辑只是合并来自不同来源的数据？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:53:44.443

如果所有业务逻辑都在 WCF 服务中，我将很难看到具有域模型的核心项目的意义（它会做什么？）。我假设您没有在这些服务之上添加一层业务逻辑来组合多个操作？如果不是，我会说洋葱架构在这种情况下不合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T18:17:32.097

我会说 WCF 实际上是其他应用程序的域服务。实际上，您只是在多个应用程序中拆分洋葱。

# list - Flex 3：列表项选择颜色 alpha

> ID：12712099
> 
> 赞同：1
> 
> 时间：2012-10-03T15:46:05.317
> 
> 标签：list, apache-flex, flex3, selection, alpha

是否可以为列表项选择颜色设置 alpha（基于 Flex 3）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T16:02:10.107

开箱即用的 AFAIK 不可能做到这一点，但这是一个易于实施的出色解决方案：

[http://natescodevault.com/2009/08/01/add-alpha-transparency-to-your-datagrid-using-styleabledatagrid/](http://natescodevault.com/2009/08/01/add-alpha-transparency-to-your-datagrid-using-styleabledatagrid/)

# google-apps-script - 获取由 HtmlService 创建的表单提交的信息

> ID：12712100
> 
> 赞同：1
> 
> 时间：2012-10-03T15:46:05.823
> 
> 标签：google-apps-script

我查看了有关此主题的类似问题，但仍然无法完全理解如何获取以 HTML 创建的表单输入的数据。

这是我想做的事情：

*   创建表单（通过 HTML）
*   在提交表单时，输入的数据用于替换现有 Google 文档模板中的适当占位符键。
*   通过电子邮件将替换文本的新文档发送给用户。

我按照本[教程](http://tjhouston.com/2012/03/merge-info-from-google-forms-to-pdf-document-and-send-via-email/)进行操作，并且能够使其正常工作。问题是 UI（电子表格）不是我想要的。我想要一个 HTML 格式的表单，但无法从中正确提取数据。

这是我使用电子表格创建的示例脚本。

```
var docTemplate = "1234567890";  // Template ID
var docName     = "FinalDocument";   // Name of the document to be created

// When form gets submitted
function onFormSubmit(e) { 
// Get information from form and set as variables
  var email_address = e.values[1]; 
  var full_name = e.values[2];

// Get document template, copy it and save the new document's id
  var copyId = DocsList.getFileById(docTemplate)
               .makeCopy(docName+' for '+full_name)
               .getId();
// Open the temporary document
  var copyDoc = DocumentApp.openById(copyId);
// Get the document's body section
  var copyBody = copyDoc.getActiveSection();

// Replace place holder keys,in our google doc template
  copyBody.replaceText('keyEmailAddress', email_address);
  copyBody.replaceText('keyFullName', full_name);

// Save and close the temporary document
   copyDoc.saveAndClose();

// Convert temporary document to PDF by using the getAs blob conversion
   var pdf = DocsList.getFileById(copyId).getAs("application/pdf"); 

// Attach PDF and send the email
   var subject = "Final Document";
   var body    = "Here is the form for " + full_name + "";
   MailApp.sendEmail(email_address, subject, body, {htmlBody: body, attachments: pdf}); 

// Delete temporary file
   DocsList.getFileById(copyId).setTrashed(true);
} 
```

这是我刚刚创建的使用 HTML 的新表单。

```
<html>
  <form id="myForm">
   <input name="fullName" id="_fullName">
   <input name="emailAddress" id="emailAddress">
   <input type="button" id="submit" value="submit" onclick = "sendData()">
  </form>

  <script>
    function sendData() {
     google.script.run.processForm(document.getElementById("myForm"));
    }
  </script>
</html> 
```

有人可以帮助我开始如何从使用电子表格表单过渡到 HTML 表单吗？如何从 HTML 表单中提取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:38:41.447

您可能想参考我之前在[Accessing object is Google App Script中提出的这个问题](https://stackoverflow.com/questions/11425473/accessing-object-is-google-app-script)

因此，对于您的情况，它应该是：

```
 // Get information from form and set as variables
  var email_address = e.emailAddress; 
  var full_name = e.fullName; 
```

至于你的 HTML 代码

```
<html>
  <form id="myForm">
   <input name="fullName" id="_fullName">
   <input name="emailAddress" id="emailAddress">
   <input type="button" id="submit" value="submit" onclick = "google.script.run.processForm(this.parentNode)">
  </form>
</html> 
```

请试一试，我没有时间测试代码。非常抱歉。

# javascript - 在 HTML 中嵌入 XML

> ID：12712101
> 
> 赞同：25
> 
> 时间：2012-10-03T15:46:12.010
> 
> 标签：javascript, html, xml

如何将 XML 嵌入 HTML 页面？

我在想使用 CDDATA 将是最好的方法，但是当页面加载时我在 HTML 文档中遇到错误。

```
<script><![CDATA[ ... ]]></script> 
```

我需要嵌入一个 XML 文档，以便稍后使用 JavaScript 获取。我需要这样做，因为当用户打开它时，他们可能无法访问互联网。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-03T15:53:55.583

只要 XML 不包含`</script>`任何内容，您就可以将其放在带有自定义`type`属性（并且没有 CDATA 部分）的脚本标记中。给脚本标签一个`id`属性，以便您可以获取内容。

```
<script id="myxml" type="text/xmldata">
    <x>
        <y z="foo">

        </y>
    </x>
</script>​

... 

<script> alert(document.getElementById('myxml').innerHTML);​ </script> 
```

[http://jsfiddle.net/hJuPs/](http://jsfiddle.net/hJuPs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:52:30.903

怎么样：

```
<script>
    var xml = '<element> \
                 <childElement attr="value" /> \
               </element>';
</script> 
```

这将使您能够轻松地嵌入 XML 以便以后在 javascript 中检索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T05:41:41.847

根据此处的教程，您可以使用“xml”标签在 HTML 文档中嵌入 XML 数据。但是，这会在浏览器中隐式显示 XML 数据。

[http://www.expertrating.com/courseware/XMLCourse/XML-Embedding-HTML-8.asp](http://www.expertrating.com/courseware/XMLCourse/XML-Embedding-HTML-8.asp)

# php - 当用户接受应用程序并登录（又名无限循环）时，getUser 甚至返回 0

> ID：12712102
> 
> 赞同：0
> 
> 时间：2012-10-03T15:46:12.657
> 
> 标签：php, facebook, facebook-php-sdk

这是一个简单的代码，它在单个站点上运行，并且尽可能简单：

```
@ini_set('display_errors','On'); // enable or disable public display of errors (use 'On' or 'Off')
include_once('lib/facebook.php');

// Create our application instance
$config = array(
  'appId' => 'xx',
  'secret' => 'yyy'
);
$link = 'http://someurl.com';
$facebook = new Facebook($config);

// Get User ID
$user = $facebook->getUser();

if($user){ ?>
    <p>logged in</p>
<?php } else {
    $loginUrl = $facebook->getLoginUrl(array(
    'scope'         => 'manage_pages,email',
    'redirect_uri'  => $link,
    ));
    echo '<a href="'.$loginUrl.'">Login with FB</a>'; 
} 
```

那么 id 做了什么，它在用户未登录时显示登录链接（或者具体而言 - 如果 getUser() 没有收到任何内容），如果 getUser 给出它应该给出的内容，则显示带有文本的段落（通常用户更喜欢将重定向放在那里, 如果 getUser 返回 0, 则进入无限循环描述 belove)

简单的测试会显示一个问题。通过站点 url 访问它，即使给予用户许可，也会显示登录 url 而不是段落。

问题出在哪里？在试图弄清楚时，我已将网站的 url 添加为“Facebook 上的应用程序”，因此可以从 facebook 内部访问它。而尤里卡，如果以这种方式访问​​（通过 Canvas Page url）， getUser() 可以正常工作。更重要的是，一旦您通过 Canvas Page url 链接访问，然后直接访问站点时 - getUser() 也可以正常工作。

那么问题在哪里呢？尝试使用浏览器的隐身功能，我发现 otu，用户浏览器上存储了一些东西。直接从浏览器访问站点，用户已经在 Canvas 页面 url 上显示正确的响应，而在用户尚未访问 Canvas 页面 url 的浏览器上时，显示登录 url。

所以它接缝，这个问题与浏览器缓存有某种联系，并且当访问通过页面而不是画布页面本身时，facebook没有设置正确的方式。

此外，当给予应用程序的访问权限时，当用户单击登录链接时，他会自动重定向回原始页面，状态和代码作为 _GET 参数，因此当在代码中放置自动重定向时 - 具有不同状态和代码值的无限循环每次重定向触发时链接。

任何人都知道如何解决仅使用 php sdk 的问题？

# java - jpa 标准似乎工作（或不工作）取决于 db 是 mysql 还是 objectdb

> ID：12712104
> 
> 赞同：0
> 
> 时间：2012-10-03T15:46:18.140
> 
> 标签：java, jpa, criteria-api, objectdb

当我将 JPA 与 MySQL 一起使用时，以下查询可以正常工作。但是当我将它与 ObjectDB 一起使用时，它会抛出下面的异常。

```
public Friendship getFriendship(String username) {
    CriteriaBuilder criteriaBuilder = em.getCriteriaBuilder();
    CriteriaQuery<Friendship> query = criteriaBuilder.createQuery(Friendship.class);
    Root<Friendship> root = query.from(Friendship.class); 
    Path<String> path = root.<String>get("username");
    query.where(criteriaBuilder.equal(path, username));
    return em.createQuery(query).getSingleResult();
} 
```

来自浏览器的错误

```
 type Exception report

message

descriptionThe server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.servlet.ServletException: com.objectdb.o._PersistenceException: Unexpected query token 'FROM' (SELECT is expected)
root cause

com.objectdb.o._PersistenceException: Unexpected query token 'FROM' (SELECT is expected)
root cause

com.objectdb.o.UserException: Unexpected query token 'FROM' (SELECT is expected) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:36:18.247

如上所述正确（并且如错误消息所示） - 缺少选择。

有效的 JPQL 查询必须包含 SELECT，否则查询不完整。

一些 JPA 实现通过支持不带 SELECT 的查询来扩展标准 JPQL。

# php - 如何解决 stream_select 在“过滤”的 http 流上失败的问题？

> ID：12712107
> 
> 赞同：2
> 
> 时间：2012-10-03T15:46:26.663
> 
> 标签：php, http, stream

我正在尝试`stream_select`在`fopen()`'d http 流上做一个。但是，`stream_select`不断给我这些错误并且选择失败。

```
Warning: stream_select(): cannot cast a filtered stream on this system
Warning: stream_select(): cannot cast a filtered stream on this system
Warning: stream_select(): cannot cast a filtered stream on this system
Warning: stream_select(): No stream arrays were passed 
```

流是这样创建的：

```
$ctx = array(..) // valid context, data is returned ok.
$fh = fopen($url,'r',NULL,$ctx);
// Result: resource(70) of type (stream) 
```

那么，究竟什么是过滤流，为什么认为 http 流是这样的，有什么办法可以绕过它？的文档`stream_select`说“无法选择某些流，例如zlib”，但没有提及http。

**编辑**：在与 Google 和 PHP 文档交谈后，我尝试从流中查询元数据以查看是否指定了任何过滤器，答案是否定`filters`的：元数据中没有索引表明该流是无过滤的。

```
array(10) {
  ["wrapper_data"]=>
  array(10) {
    [0]=>
    string(28) "HTTP/1.1 200 Content Follows"
    [1]=>
    string(35) "Date: Wed, 03 Oct 2012 16:14:01 GMT"
    ...
    [9]=>
    string(38) "Content-Type: text/html; charset=utf-8"
  }
  ["wrapper_type"]=>
  string(4) "http"
  ["stream_type"]=>
  string(14) "tcp_socket/ssl"
  ["mode"]=>
  string(1) "r"
  ["unread_bytes"]=>
  int(2447)
  ["seekable"]=>
  bool(false)
  ["uri"]=>
  string(17) "http://domain.tld/"
  ["timed_out"]=>
  bool(false)
  ["blocked"]=>
  bool(true)
  ["eof"]=>
  bool(false)
} 
```

# plc - 转到显示按钮 Factorytalk 查看 ME？

> ID：12712108
> 
> 赞同：2
> 
> 时间：2012-10-03T15:46:40.927
> 
> 标签：plc, scada

我正在使用 Factor Talk View ME 对 AB PanelView 1000 HMI 进行编程，但我不知道如何对按钮进行编程以激活“手动”模式，然后在按下按钮后直接进入显示。我可以用两个单独的按钮单独设置它们，但不确定这是否可以在一个按钮中完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T15:10:48.977

您有两种类型的按钮：

*   用于导航
*   用于设置值（在 plc 或 HMI 标签中）。我猜为您激活的“手动”模式？

我不认为你可以在 ME 中使用一个按钮（在 FT View SE 中你可以），但是解决方案可以是使用宏：

1 创建一个新的“逻辑和控制”=> 宏
2 设置您的值以激活您的“手动”模式
4 创建您的按钮以显示您的屏幕
5 在您显示的屏幕上，转到显示设置 => 行为
6 添加您在宏 > 启动字段中新创建的宏。

这是你所期望的吗？

# c# - 如何在 .net 4.5 中读取连接字符串

> ID：12712110
> 
> 赞同：10
> 
> 时间：2012-10-03T15:46:51.917
> 
> 标签：c#, .net, vb.net, web-config, connection-string

如何从 web.config 文件中读取 4.5 .net 框架中连接字符串的值？

我正在使用 system.configuration，我有一个引用和一个 using 语句，但之后唯一要使用的是`.ConfigurationSettings.Appsettings`.

没有连接字符串设置。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-03T15:48:46.213

```
using System.Configuration;

string connectionString = ConfigurationManager.ConnectionStrings["StringName"].ConnectionString; 
```

**编辑（添加对`System.Configuration`：**

右键单击您的项目 -> 添加引用 -> 选择`.NET`选项卡 -> 选择 System.Configuration -> 确定

[http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)

# parsing - Scala 解析器和隐式有序转换

> ID：12712116
> 
> 赞同：4
> 
> 时间：2012-10-03T15:47:19.380
> 
> 标签：parsing, scala, implicit-conversion

以下解析器组合器片段演示了泛化二进制比较操作的目标，例如`>`使用`Ordered[T]`. `Gt`似乎在 AST 级别实现了这一点，但我在扩展这个概念时遇到了麻烦。

解析器可以工作，`intGt`但是否可以概括这一点，`Ordered[T]`这样我们就不需要为`floatGt`（因此为所有支持的可订购类型 * 所有支持的操作 - 不，谢谢）编写第二个解析器。

```
object DSL extends JavaTokenParsers {
  // AST
  abstract class Expr[+T] { def eval: T }
  case class Literal[T](t: T) extends Expr[T] { def eval = t }
  case class Gt[T <% Ordered[T]](l: Expr[T], r: Expr[T]) extends Expr[Boolean] {
    def eval = l.eval > r.eval // view-bound implicitly wraps eval result as Ordered[T]
  }

  // Parsers
  lazy val intExpr: Parser[Expr[Int]] = wholeNumber ^^ { case x => Literal(x.toInt) }
  lazy val floatExpr: Parser[Expr[Float]] = decimalNumber ^^ { case x => Literal(x.toFloat) }
  lazy val intGt: Parser[Expr[Boolean]] = intExpr ~ (">" ~> intExpr) ^^ { case l ~ r => Gt(l, r) }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:48:08.717

我试着到处玩，这是我能想到的最好的：

```
import scala.util.parsing.combinator.JavaTokenParsers

object DSL extends JavaTokenParsers {
  // AST
  abstract class Expr[+T] { def eval: T }
  case class Literal[T](t: T) extends Expr[T] { def eval = t }
  case class BinOp[T,U](
    val l : Expr[T],
    val r : Expr[T],
    val evalOp : (T, T) => U) extends Expr[U] {

    def eval = evalOp(l.eval, r.eval)
  }

  case class OrderOp[O <% Ordered[O]](symbol : String, op : (O, O) => Boolean)

  def gtOp[O <% Ordered[O]] = OrderOp[O](">", _ > _)
  def gteOp[O <% Ordered[O]] = OrderOp[O](">=", _ >= _)
  def ltOp[O <% Ordered[O]] = OrderOp[O]("<", _ < _)
  def lteOp[O <% Ordered[O]] = OrderOp[O]("<=", _ <= _)
  def eqOp[O <% Ordered[O]] = OrderOp[O]("==", _.compareTo(_) == 0)

  def ops[O <% Ordered[O]] = 
    Seq(gtOp[O], gteOp[O], ltOp[O], lteOp[O], eqOp[O])

  def orderExpr[O <% Ordered[O]](
    subExpr : Parser[Expr[O]], 
    orderOp : OrderOp[O]) 
    : Parser[Expr[Boolean]] =
      subExpr ~ (orderOp.symbol ~> subExpr) ^^ 
        { case l ~ r => BinOp(l, r, orderOp.op) }

  // Parsers
  lazy val intExpr: Parser[Expr[Int]] = 
    wholeNumber ^^ { case x => Literal(x.toInt) }

  lazy val floatExpr: Parser[Expr[Float]] =
    decimalNumber ^^ { case x => Literal(x.toFloat) }

  lazy val intOrderOps : Parser[Expr[Boolean]] = 
    ops[Int].map(orderExpr(intExpr, _)).reduce(_ | _)

  lazy val floatOrderOps : Parser[Expr[Boolean]] =
    ops[Float].map(orderExpr(floatExpr, _)).reduce(_ | _)
} 
```

本质上，我定义了一个小型案例类`OrderOp`，它将表示排序操作的字符串与将评估该操作的函数相关联。然后，我定义了一个能够为给定类型`ops`创建`Seq[OrderOp]`所有此类排序操作的函数。`Orderable`然后可以使用 将这些操作转换为解析器`orderExpr`，它采用子表达式解析器和操作。这映射到 int 和 float 类型的所有排序操作。

这种方法的一些问题：

*   对于所有二元操作，AST 类型层次结构中只有一种节点类型。如果您所做的只是评估，这不是问题，但是如果您想要进行重写操作（例如，消除明显的重言式或矛盾），那么使用 BinOp 的当前定义没有足够的信息来执行此操作。
*   我仍然需要`orderExpr`为每种不同的类型进行映射。可能有办法解决这个问题，但我没时间了。
*   `orderExpr`期望使用相同的解析器解析左右子表达式。

# c# - 如何将 Parallel.ForEach 的结果发布到 C# 中不断读取的队列中

> ID：12712117
> 
> 赞同：4
> 
> 时间：2012-10-03T15:47:22.657
> 
> 标签：c#, parallel-processing, task-parallel-library

在我的应用程序中，我有三个类，`Extractor`和`Transformer`，`Loader`它们由第四个类协调，`Coordinator`。`Extractor`，`Transformer`并且`Loader`非常简单，请执行以下操作：

**`Extractor`**

公开一个名为`Results`type的成员`IEnumerable<string>`，例如通过从文本文件中读取。提取应该是同步的。

**`Transformer`**

公开一个名为的成员，该成员`Transform`接受一个字符串，并通过一些预计耗时的过程将其转换为另一个字符串（在此处使用并行处理）。

**`Loader`**

公开一个被调用的成员，该成员`Load`接受一个字符串并将其加载到某种最终形式（例如另一个文本文件）中。加载应该是同步的。

这些`Coordinator`类协调这三个操作。转换过程应该并行完成，然后将结果推送到加载器读取的队列中。`Coordinator`的`Run()`方法如下所示：

```
Extractor extractor = new Extractor();
Transformer transformer = new Transformer();
Loader loader = new Loader();

ConcurrentQueue<string> outputs = new ConcurrentQueue<string>();

Parallel.ForEach(extractor.Results, x => outputs.Enqueue(transformer.Transform(x)));

foreach(string output in outputs)
{
  loader.Load(output);
} 
```

这工作得很好，除了所有转换必须在任何加载之前完成 - 即`Parallel.ForEach()`在以下`foreach`开始之前完成。我希望每个输出在准备好后立即传递给加载器。

我也试过这个：

```
Extractor extractor = new Extractor();
Transformer transformer = new Transformer();
Loader loader = new Loader();

ConcurrentQueue<string> outputs = new ConcurrentQueue<string>();

foreach (string input in extractor.Results)
{
  string input1 = input;
  Task task = Task.Factory.StartNew(
                    () => outputs.Enqueue(transformer.Transform(input1)));
}

foreach(string output in outputs)
{
  loader.Load(output);
} 
```

但是`foreach`在任何输出被添加到队列之前，底部的循环就被击中了，所以它只是退出了。

调用结果后如何立即加载`transformer.Transform()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T15:56:44.860

尝试[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)使用[`Parallel.Invoke`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.invoke.aspx). 在下面的示例中，[`GetConsumingEnumerable`](http://msdn.microsoft.com/en-us/library/dd287186.aspx)（生产者-消费者模式的*消费者*[`CompleteAdding`](http://msdn.microsoft.com/en-us/library/dd287086.aspx)部分）在被调用之前不会完成，因此`load`将运行直到`fill`完成。

```
var outputs = new BlockingCollection<string>();

// aka Producer
Action fill = () => {
    Parallel.ForEach(extractor.Results, x => outputs.Add(transformer.Transform(x)));        
    outputs.CompleteAdding();
};

// aka Consumer
Action load = () => {
   foreach(var o in outputs.GetConsumingEnumerable()) 
       loader.Load(o);
}

Parallel.Invoke(fill, load); 
```

# ember.js - 我是否必须为每个 Ember.js 应用程序显式创建一个“ApplicationView”和一个“ApplicationController”？

> ID：12712122
> 
> 赞同：1
> 
> 时间：2012-10-03T15:47:44.917
> 
> 标签：ember.js

来自[Trek 的教程：](http://trek.github.com/)

> 您的应用程序必须具有 ApplicationView 属性。将为您创建此类的一个实例，并将其作为根视图插入到应用程序的视图层次结构中。

本教程给出了这个示例代码：

```
App.ApplicationView = Ember.View.extend({
  templateName: 'application'
});

App.ApplicationController = Ember.Controller.extend(); 
```

`ApplicationView`和有什么特别之处`ApplicationController`？是否保留了它们的特定名称并且必须通过转换使用，或者路由器引用它们的方式有什么特别之处？

据我了解，Ember 的一项原则是消除样板代码。所以我猜想还有更多的东西可以明确地为每个应用程序创建这两个视图作为起点——否则 Ember 只会在幕后为我制作它们。

`ApplicationView`重新表述我的问题， Ember 应用程序有什么`ApplicationController`特别之处。我是否需要为每个应用显式创建它们，如果需要，我是否需要按照约定命名它们？

注意：我使用的是 ember-latest

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T16:59:23.603

Ember.js 试图坚持约定优于配置的编程理念。因此，有些东西需要特别命名并遵循正确的大小写规则。在调用`App.initialize()`您的应用程序时，它会自行查找该属性`App.ApplicationView`。然后，您的应用程序会渲染此视图，将其插入 dom 并自动创建 的实例`App.ApplicationController`，将其设置为您的`ApplicationView`. 这意味着您中的任何属性都可以通过在视图中引用它们`ApplictationController`来绑定到您的中。`ApplicationView`

如果您`App.initialize()`在没有使用`App.ApplicationView`或`App.ApplicationController`ember 的情况下调用，则会引发错误，让您知道必须创建它们。

`ApplicationView`并且`ApplicationController`是您的 ember 应用程序的组成部分，并且必须存在。Ember 是一个 MVC 框架，`ApplicationView`是你的根 V，`ApplicationController`是你的根 C。尝试使用像 ember 这样的框架来处理你想要的部分是很诱人的，但只要多做一点工作，你就会拥有一个更健壮的框架，并且易于使用的应用程序试图挑选功能。

# ruby-on-rails - `gem_original_require': 没有要加载的文件 -- rvm/capistrano (LoadError)

> ID：12712124
> 
> 赞同：2
> 
> 时间：2012-10-03T15:47:54.450
> 
> 标签：ruby-on-rails, ruby, gem, rvm, capistrano

我在**Ubuntu 12.04**，**Ruby 1.9.3**，**Rails 3.2.8**使用**RVM**。

昨天我很好地使用了 Capistrano，我重新启动了我的 ubuntu，现在当我尝试使用 capistrano 进行部署时，我得到了这个：

```
$ cap deploy
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- rvm/capistrano (LoadError)
    from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:152:in `require'
    from ./config/deploy.rb:4:in `load'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:172:in `load_from_file'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:89:in `load'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `load'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `each'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `load'
    from Capfile:5:in `load'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:172:in `load_from_file'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:89:in `load'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `load'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `each'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/configuration/loading.rb:86:in `load'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:65:in `load_recipes'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:65:in `each'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:65:in `load_recipes'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:31:in `execute!'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/lib/capistrano/cli/execute.rb:14:in `execute'
    from /var/lib/gems/1.8/gems/capistrano-2.13.4/bin/cap:4
    from /usr/local/bin/cap:19:in `load'
    from /usr/local/bin/cap:19 
```

这是我的 PATH 变量：

```
$ echo $PATH
/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/danpe/.rvm/bin 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T18:59:00.197

当您重新启动时，您使用 rvm 丢失了 ruby​​ 1.9.3 设置。要取回它并将其设置为默认值（重启证明），请执行以下操作：

```
rvm --default 1.9.3 
```

# cognos - 如何在 Cognos 查询表达式中获取当前日期？

> ID：12712125
> 
> 赞同：3
> 
> 时间：2012-10-03T15:47:55.123
> 
> 标签：cognos

我在 Cognos 中有一个查询表达式，我需要将过去的日期与当前日期进行比较。我在函数列表中看不到一个，否则我不确定如何将查询日期放在查询对象中。

如何在查询中使用当前日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:47:55.123

根据您的数据库软件，该对象将是`current_date`(SQL Server) 或`SYSDATE{}`(Oracle)。如果你不知道你有哪个，只需对函数进行表达式并按下验证按钮即可；如果你得到一个错误，你为你的数据库使用了错误的函数。

然后，您可以像使用任何其他日期查询对象一样使用此对象，因此您可以将其添加/比较到查询中的日期或将其显示在页面上的某个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-07T20:48:40.883

最好的方法是使用`current_date`. 此方法与数据源无关，将在运行时转换为相应的等效数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T16:43:51.260

您可以在查询中使用类似的内容：

从表中选择 FIELD1，其中 FIELD2 = current_date

假设 FIELD2 具有日期格式

# sql - 女士 Access 2007 组合框

> ID：12712130
> 
> 赞同：1
> 
> 时间：2012-10-03T15:48:13.840
> 
> 标签：sql, database, ms-access

我正在使用 Access 作为 SQL (Express 2012) 数据库的快速而肮脏的 (ADP) 界面，因此可以在 MVC Web 应用程序界面完成之前开始数据输入。

有一个字段我想成为 varchar，我希望该字段允许用户输入一个值或从该字段中先前使用的不同值列表中进行选择。

我有那部分，但问题是当它发生时，我必须刷新记录集才能看到列表中的新项目，所以如果他们选择添加新记录，那么最后添加的项目在列表中不可见。

所以我可以获得不同的列表，填充框，允许新条目，并将其保存到数据库中，我是否必须在后面编写代码来重新填充记录集，我是否需要在后面编写代码来维护列表并行到记录集，或者只是我缺少一个属性？

谢谢

（添加屏幕显示事件）![在此处输入图像描述](../Images/3a9f1977d34f6b7af584fefbab64f82f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:10:13.940

如建议的那样，使用表单上的当前事件和更新后解决了问题。

单击表单部分详细信息选择了详细信息部分属性页而不是表单。从属性页的下拉列表中选择表单会显示我建议使用的事件。

非常感谢那些做出贡献的人。

由于第一个建议来自 Remau，在 hansup 协助定位该事件的情况下，我将 remau 的帖子标记为答案。谢谢你们俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:06:42.640

不要重新查询表单，只需重新查询组合。最好的选择可能是当前事件，如果有多个人在进行数据输入，则该事件将起作用。如果人们正在编辑表格以及输入数据，它也将起作用。仅在添加记录时触发的事件不会获取对组合内容的更改。

```
Private Sub Form_Current()
   Me.MyCombo.Requery
End Sub 
```

# java - 阵列访问被拒绝

> ID：12712133
> 
> 赞同：0
> 
> 时间：2012-10-03T15:48:22.873
> 
> 标签：java, arrays, jpanel

好的。所以我在顶部声明一个二维数组，如下所示：

```
private JPanel[][] panels = new JPanel[10][8]; 
```

然后我像这样填充它：

```
GridBagConstraints c = new GridBagConstraints();
for(int i = 0; i < 8; i++){
        for(int j = 0; j < 10; j++){
            JPanel temp = new JPanel();
            if(rand.nextInt(10)+1 > 8 && (j != 0 && i != 0)){
                temp.setBackground(Color.BLACK);
                temp.setName("wall");                   
            }else{
                temp.setBackground(Color.WHITE);
                temp.setName("space");
            }
            c.gridx = j;
            c.gridy = i;
            boardCotent.add(temp,c);
            panels[j][i] = temp;
        }
    }
} 
```

好的，那么，我输出它以确保它填充正确？

```
for(int i = 0; i < 8; i++){
    for(int j = 0; j < 10; j++){
        System.out.println(j + ":" + i + " -> " + panels[j][i].getName());
    }
} 
```

以下是上述 for 循环的输出示例：

```
2:2 -> wall
3:2 -> null
4:2 -> null
5:2 -> wall 
```

很明显，它奏效了……

然后在一个开关中，我试图访问它以查看它是“墙”还是“空间”，我得到一个空指针异常......有没有人看到我错过的缺陷？

```
if(y > 0 && !panels[x][y-1].getName().matches("wall")){
    y--;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:02:23.023

```
2:2 -> wall
3:2 -> null
4:2 -> null
5:2 -> wall 
```

首先这部分有问题。而不是`null`你应该拥有的价值`space`。

```
if(y > 0 && !panels[x][y-1].getName().matches("wall"))
{
    y--;
} 
```

其次，检查`0 <= x < 10`和`0 <= y < 8`何时执行此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:02:48.177

你确定你没有混合两个数组维度的索引吗？
只需尝试以下检查：

```
int maxY = 10, maxX = 8;
private JPanel [][] panels = new JPanel[maxY][maxX];

for(int y = 0; y < maxY; y++)
  for(int x = 0; x < maxX; x++)
  {
     panels[y][x] = new JPanel();
     System.out.println("array[y=" + y + "][x=" + x + "] = " + panels[y][x]);
  } 
```

那样有用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:03:58.403

您正在获得 NPE

```
if(y > 0 && !panels[x][y-1].getName().matches("wall")){ 
    y--; 
} 
```

意味着你需要做一些空检查

```
if(y > 0 && panels[x][y-1] != null && !panels[x][y-1].getName().matches("wall")){ 
```

# google-apps-script - 谷歌应用脚 本通过电子邮件发送谷歌电子表格 Excel 版本

> ID：12712137
> 
> 赞同：2
> 
> 时间：2012-10-03T15:48:41.953
> 
> 标签：google-apps-script, google-sheets, export-to-excel

我想编写一个应用程序脚本来通过电子邮件发送我的 Google 电子表格的 excel 版本。我知道我可以将电子表格保存为 Excel 文件。我不确定是否可以使用脚本将 excel 版本作为附件通过电子邮件发送出去。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T22:25:47.667

在[对最近的另一篇文章](https://stackoverflow.com/questions/12854490/convert-google-spreadsheet-to-xls-in-google-script)（[Thomas van Latum](https://stackoverflow.com/users/1390235/thomas-van-latum)）进行回答之后，我尝试了建议的 doc api 并得到了一个有趣的结果......这是我使用的测试代码，除了文件是 xlsx 格式而不是 xls 之外，它运行良好但是现在这不一定是一个问题：

```
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey('anonymous');
  oAuthConfig.setConsumerSecret('anonymous');
  return {oAuthServiceName:name, oAuthUseToken:"always"};
}

function test(){
var id = 'spreadsheet_ID'
var url = 'https://docs.google.com/feeds/';
var doc = UrlFetchApp.fetch(url+'download/spreadsheets/Export?key='+id+'&exportFormat=xls',
googleOAuth_('docs',url)).getBlob()
DocsList.createFile(doc).rename('newfile.xls')
} 
```

注意：如果你不重命名它，它的默认名称是`Export.xlsx`，获取它的 ID 以便以后使用它可能更有用......所以最后一行可能是这样的：

```
var xlsfileID = DocsList.createFile(doc).getId() 
```

* * *

编辑：触发授权过程，尝试这样的小功能，从脚本编辑器运行它

```
function autorise(){
  // function to call to authorize googleOauth
  var id=SpreadsheetApp.getActiveSpreadsheet().getId();
  var url = 'https://docs.google.com/feeds/';
  var doc = UrlFetchApp.fetch(url+'download/documents/Export?exportFormat=html&format=html&id='+id,
                              googleOAuth_('docs',url)).getContentText();  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-01T08:12:18.923

因为我花了大约四个小时玩 Rumpelstiltskin，因为在谷歌搜索“谷歌文档脚本发送 excel 附件”或类似内容时，你可以找到旧电子表格版本和旧 OAUTH 的典型非常旧的代码片段（即你想要一个电子表格，将其转换为 Excel 格式并作为电子邮件附件发送）确实有效，我终于找到了解决方案。

要创建实际的附件内容，假定的 res.getContent() 或 res.getBlob() 或 res.getBytes 都不起作用。这些提示具有误导性！

唯一对我有用的是 response.getBlob().getContent()！

整个代码：

```
function sendCurrentDocAsEmail() {
  var driveService = getDriveService();
  var ssID = SpreadsheetApp.getActiveSpreadsheet().getId(); 

  var sheetName = SpreadsheetApp.getActiveSpreadsheet().getName();
  var email = "recipient@demo.com"
  var subject = "Here be Subjects";
  var body = "Don't even think about learning how to code. It's wasted time.";
  var file = Drive.Files.get(ssID );
  var url = file.exportLinks[MimeType.MICROSOFT_EXCEL];

  var response = UrlFetchApp.fetch(url, {
    headers: {
      Authorization: 'Bearer ' + driveService.getAccessToken()
    }
  });

  var attachments = [{
    fileName:sheetName+".xlsx",
    content: response.getBlob().getBytes(), // this single line has cost me hours!
    mimeType:"application//xls",
    headers: {
      Authorization: 'Bearer ' + driveService.getAccessToken()
    }
  }];

  MailApp.sendEmail(email,subject ,body, {attachments:attachments}); 

} 
```

其中 getDriveService() 是[https://github.com/googlesamples/apps-script-oauth2上 Google 的“OAuth2 for Apps Script”自述文件中的一个函数](https://github.com/googlesamples/apps-script-oauth2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-15T00:55:13.167

最新的工作版本如下。基于[此](https://github.com/googlesamples/apps-script-oauth2/blob/master/samples/GoogleServiceAccount.gs)示例，即与之前的答案类似，但使用 Google 服务帐户，该帐户不需要人工通过链接来接收令牌。您必须从 Google 安装 Oath 库，[说明](https://github.com/googlesamples/apps-script-oauth2)非常清楚。

```
var PRIVATE_KEY = 'xxx'
var CLIENT_EMAIL = 'xxx';
var USER_EMAIL=Session.getActiveUser().getEmail()

function getOathService() {
  return OAuth2.createService('GoogleDrive:' + USER_EMAIL)
      // Set the endpoint URL.
      .setTokenUrl('https://accounts.google.com/o/oauth2/token')

      // Set the private key and issuer.
      .setPrivateKey(PRIVATE_KEY)
      .setIssuer(CLIENT_EMAIL)

      // Set the name of the user to impersonate. This will only work for
      // Google Apps for Work/EDU accounts whose admin has setup domain-wide
      // delegation:
      // https://developers.google.com/identity/protocols/OAuth2ServiceAccount#delegatingauthority
      .setSubject(USER_EMAIL)

      // Set the property store where authorized tokens should be persisted.
      .setPropertyStore(PropertiesService.getScriptProperties())

      // Set the scope. This must match one of the scopes configured during the
      // setup of domain-wide delegation.
      .setScope('https://www.googleapis.com/auth/drive');
}

function sendEmail() { 
  var oathService = getOathService();
  var ssID = SpreadsheetApp.getActiveSpreadsheet().getId(); 
  var file = Drive.Files.get(ssID );
  var url = file.exportLinks[MimeType.MICROSOFT_EXCEL];

  var file = UrlFetchApp.fetch(url, {
    headers: {
      Authorization: 'Bearer ' + oathService.getAccessToken()
    }
  });
   var attachments = [{
    fileName:'xxx.xls',//TODO DATE
    content: file.getBlob().getBytes(), 
    mimeType:"application//xls",
    headers: {
      Authorization: 'Bearer ' + oathService.getAccessToken()
    }
  }];

  MailApp.sendEmail('email@domain.com', 'xxx', 'Hi,\n\nPlease see the last data in attachment',{attachments:attachments});
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-14T15:06:54.870

对我有用的那个：

```
var AUTH_TOKEN = "Enter your OAuth_Token"; 

ssID = SpreadsheetApp.getActiveSpreadsheet().getId();
var url = "http://spreadsheets.google.com/feeds/download/spreadsheets/Export?key="+ ssID + "&exportFormat=xls"; 

//Add &gid=x at the end of above url if you only want a particular sheet

var auth = "AuthSub token=\"" + AUTH_TOKEN + "\"";
var res = UrlFetchApp.fetch(url, {headers: {Authorization: auth}});
var attachments = [{fileName:"<Filename>.xls", content: res.getContent(),mimeType:"application/vnd.ms-excel"}];

MailApp.sendEmail("<recipient's email id>", "<email subject>", "<email body>", {attachments: attachments}); 
```

从这里获取 OAuth 文档和令牌[https://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-10-03T16:39:46.593

修改后使用以下代码片段以满足您的需要

```
var file = DocsList.getFileById(FILE_ID);
var attachment = file.getAs('application/vnd.ms-excel'); 
MailApp.sendEmail("abcd@example.com", "Subject", " Body" , {"fileName": "Your_file_name" , "mimeType" : "application/vnd.ms-excel" , "content":attachment.getBytes() } ); 
```

请注意，此代码未经测试，因此请随时修复可能弹出的一两个错误

# objective-c - isMemberOfClass 不能按预期与 ocunit 一起工作

> ID：12712144
> 
> 赞同：1
> 
> 时间：2012-10-03T15:49:05.550
> 
> 标签：objective-c, ios, ocunit

> **可能重复：**
> [“isMemberOfClass”在自定义初始化时返回“NO”](https://stackoverflow.com/questions/12692854/ismemberofclass-returning-no-when-custom-init)

我对“isMemberOfClass”方法有些麻烦。

我有一个类，它生成并返回对象（“ `MyObject`”）

```
// ObjectFactory.h
...
-(MyObject*)generateMyObject;
...

// ObjectFactory.m
...
-(MyObject*)generateMyObject
{
    MyObject *obj = [[MyObject alloc]init];
    obj.name = @"Whatever";      // set properties of object
    return obj;
}
... 
```

还有一个 unittest-class，它调用`generateMyObject`-selector 并检查返回对象的类：

```
...
ObjectFactory *factory = [[ObjectFactory alloc]init];
MyObject *obj = [factory generateMyObject];
if (![obj isMemeberOfclass:[MyObject class]])
    STFail(@"Upps, object of wrong class returned...");
else
... 
```

我希望，`else`-part 被处理......但 STFail(...) 被调用，但为什么呢？

感谢您的帮助！问候，马特劳

好的，这是原始复制和粘贴的代码：

```
//testcase
- (void)test001_setCostumeFirstCostume
{
    NSString *xmlString = @"<Bricks.SetCostumeBrick><costumeData reference=\"../../../../../costumeDataList/Common.CostumeData\"/><sprite reference=\"../../../../..\"/></Bricks.SetCostumeBrick>";
    NSError *error;
    NSData *xmlData = [xmlString dataUsingEncoding:NSASCIIStringEncoding];
    GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:xmlData
                                                           options:0 error:&error];
    SetCostumeBrick *newBrick = [self.parser loadSetCostumeBrick:doc.rootElement];
    if (![newBrick isMemberOfClass:[SetCostumeBrick class]])
        STFail(@"Wrong class-member");
}

// "MyObject"
@implementation SetCostumeBrick
@synthesize indexOfCostumeInArray = _indexOfCostumeInArray;

- (void)performOnSprite:(Sprite *)sprite fromScript:(Script*)script
{
    NSLog(@"Performing: %@", self.description);

    [sprite performSelectorOnMainThread:@selector(changeCostume:) withObject:self.indexOfCostumeInArray waitUntilDone:true];
}

- (NSString*)description
{
    return [NSString stringWithFormat:@"SetCostumeBrick (CostumeIndex: %d)", self.indexOfCostumeInArray.intValue];
}

@end

// superclass of SetCostumeBrick
@implementation Brick
- (NSString*)description
{
    return @"Brick (NO SPECIFIC DESCRIPTION GIVEN! OVERRIDE THE DESCRIPTION METHOD!";
}

//abstract method (!!!)
- (void)performOnSprite:(Sprite *)sprite fromScript:(Script*)script
{
    @throw [NSException exceptionWithName:NSInternalInconsistencyException
                                   reason:[NSString stringWithFormat:@"You must override %@ in a subclass", NSStringFromSelector(_cmd)]
                                 userInfo:nil];
}
@end

// the "factory" (a xml-parser)
- (SetCostumeBrick*)loadSetCostumeBrick:(GDataXMLElement*)gDataSetCostumeBrick
{
    SetCostumeBrick *ret = [[SetCostumeBrick alloc] init];

    NSArray *references = [gDataSetCostumeBrick elementsForName:@"costumeData"];
    GDataXMLNode *temp = [(GDataXMLElement*)[references objectAtIndex:0]attributeForName:@"reference"];
    NSString *referencePath = temp.stringValue;

    if ([referencePath length] > 2)
    {
        if([referencePath hasSuffix:@"]"]) //index found
        {
            NSString *indexString = [referencePath substringWithRange:NSMakeRange([referencePath length]-2, 1)];
            ret.indexOfCostumeInArray = [NSNumber numberWithInt:indexString.intValue-1];
        }
        else 
        {
            ret.indexOfCostumeInArray = [NSNumber numberWithInt:0];
        }
    }
    else 
    {
        ret.indexOfCostumeInArray = nil;
        @throw [NSException exceptionWithName:NSInternalInconsistencyException
                                       reason:[NSString stringWithFormat:@"Parser error! (#1)"]
                                     userInfo:nil];
    }

    NSLog(@"Index: %@, Reference: %@", ret.indexOfCostumeInArray, [references objectAtIndex:0]);

    return ret;
} 
```

解决方案：

Eiko/jrturton 给了我一个解决方案的链接 - thx: [isMemberOfClass 在从 UIStoryboard 实例化 ViewController 时返回 no](https://stackoverflow.com/questions/11675256/ismemberofclass-returns-no-when-viewcontroller-is-instantiated-from-uistoryboard)

问题是，这些类都包含在两个目标（应用程序和测试包）中

谢谢你们的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:51:30.657

您通常需要 isKindOfClass:，而不是 isMemberOfClass。如果接收者是相关类的子类的成员，isKindOfClass: 将返回 YES，而 isMemberOfClass: 在相同情况下将返回 NO。

```
if ([obj isKindOfClass:[MyObject class]]) 
```

例如，

```
NSArray *array = [NSArray array]; 
```

这里`[array isMemberOfClass:[NSArray class]]`将返回 NO 但`[array isKindOfClass:[NSArray class]]`将返回 YES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:00:16.870

好的，根据您的评论使用不同的课程地址，我想我可以将其追踪为与此重复：

[当从 UIStoryboard 实例化 ViewController 时，isMemberOfClass 返回 no](https://stackoverflow.com/questions/11675256/ismemberofclass-returns-no-when-viewcontroller-is-instantiated-from-uistoryboard)

基本上，您的课程包含两次。

# asp.net-mvc-3 - 加载到 Visual Studio 2012 后，Asp.net MVC3 应用程序出错

> ID：12712147
> 
> 赞同：1
> 
> 时间：2012-10-03T15:49:15.957
> 
> 标签：asp.net-mvc-3, visual-studio-2010, visual-studio-2012

我打开了一个现有的 ASP.NET MVC3 项目，该项目以前在安装了 Visual Studio 2012 的新建机器上运行良好。

我现在在以下代码中得到空异常。用户登录后，执行以下代码进行页面片段级访问。

在 WebViewPage.User 对象上引发 null 异常。但是，在调试模式下，我实际上可以检查对象的真实实例（见下图）

```
 public static class WebViewPageExtensions
 {
      public static bool HasAccess(this WebViewPage pg)
        {
            if (pg == null) throw new ArgumentNullException("WebViewPage is null");
            if (pg.User == null) throw new ArgumentNullException("WebViewPage User is null");              
            return pg.User.IsInRole(User.ACCESS_LEVEL_A) || pg.User.IsInRole(User.ACCESS_LEVEL_B);
        }
 } 
```

注意：这可能与我的环境配置方式有关（可能是 web.config？），但不确定从哪里开始。事实上，发生这种情况的代码与在生产环境和以前的开发环境中运行的代码相同。

所有的引用仍然是指在 .NET 4.0 平台上运行的 ASP.NET MVC3 版本的框架。

![检查](../Images/b3dacb4846a9121c6e5be4ef9ddfb888.png)

编辑：这是来自 Razer 视图的调用代码：

```
 @if (this.HasAccess()) {                 
        <div>
                HTML here
        </div>  
    } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T21:46:11.170

[请阅读链接http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815)中的“安装 ASP.NET MVC 4 破坏 ASP.NET MVC 3 RTM 应用程序”部分。按照 setps“必需更新”更新您的 MVC 3 应用程序。
如果您没有注意到，MVC4 会随 VS2012 一起安装，这是记录在案的行为。

# parsing - Haskell 解析器到 AST 数据类型，赋值

> ID：12712149
> 
> 赞同：8
> 
> 时间：2012-10-03T15:49:25.680
> 
> 标签：parsing, haskell, abstract-syntax-tree

我已经在互联网上搜索了几天，试图回答我的问题，我终于承认失败了。
我得到了一个语法：

`Dig ::= 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
Int ::= Dig | Dig Int
Var ::= a | b | ... z | A | B | C | ... | Z
Expr ::= Int | - Expr | + Expr Expr | * Expr Expr | Var | let Var = Expr in Expr`

我被告知使用这种语法来解析、评估和打印表达式
，其中运算符`* + -`具有正常含义
。具体任务是编写一个函数`parse :: String -> AST`

它将一个字符串作为输入，并在输入格式正确时返回一个抽象语法树（我可以假设它是）。

有人告诉我，我可能需要一个合适的数据类型，并且该数据类型可能需要从其他一些类派生。

按照示例输出
`data AST = Leaf Int | Sum AST AST | Min AST | ...`

此外，我应该考虑编写一个函数
`tokens::String -> [String]`
来将输入字符串拆分为令牌列表
解析应该
`ast::[String] -> (AST,[String])`
在输入是令牌列表并输出AST的情况下完成，并且解析子表达式我应该简单地使用ast递归函数。

我还应该创建一个 printExpr 方法来打印结果，以便
`printE: AST -> String`
`printE(parse "* 5 5")`产生一个`"5*5"`或`"(5*5)"`
一个函数来评估表达式
`evali :: AST -> Int`

我只想指出我可能开始的正确方向。一般来说，我对 Haskell 和 FP 知之甚少，为了解决这个任务，我用 Java 制作了一些字符串处理函数，这让我意识到我偏离了轨道。
所以一个指向正确方向的小指针，也许是对“如何”AST应该看起来像
连续第三天并且仍然没有运行代码的解释，我非常感谢任何帮助我找到解决方案的尝试！提前致谢！
**编辑**

我可能不清楚：我想知道我应该如何从读取和标记输入字符串到制作 AST。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-04T02:27:34.430

# 将标记解析为抽象语法树

好吧，让我们来看看你的语法

```
Dig ::= 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
Int ::= Dig | Dig Int
Var ::= a | b | ... z | A | B | C | ... | Z
Expr ::= Int | - Expr | + Expr Expr | * Expr Expr | Var | let Var = Expr in Expr 
```

这是一个很好的简单语法，因为你可以从第一个标记中看出它将是什么类型的 epression。（如果有一些更复杂的东西，比如`+`出现在数字之间，或者`-`用于减法和求反，您需要成功列表技巧，在 [功能解析器](http://roman-dushkin.narod.ru/files/fp__jeroen_fokker_001.pdf)中进行了解释。）

让我们有一些示例原始输入：

```
rawinput = "- 6 + 45 let x = - 5 in * x x" 
```

我从语法中理解的代表`"(- 6 (+ 45 (let x=-5 in (* x x))))"`，我假设您将其标记为

```
tokenised_input' = ["-","6","+","4","5","let","x","=","-","5","in","*","x","x"] 
```

这符合语法，但你很可能已经得到

```
tokenised_input = ["-","6","+","45","let","x","=","-","5","in","*","x","x"] 
```

更适合您的样品`AST`。我认为用你的语法来命名你的 AST 是个好习惯，所以我要继续替换

```
data AST = Leaf Int | Sum AST AST | Min AST | ... 
```

和

```
data Expr = E_Int Int | E_Neg Expr | E_Sum Expr Expr | E_Prod Expr Expr | E_Var Char 
                      | E_Let {letvar::Char,letequal:: Expr,letin::Expr}
 deriving Show 
```

我已经命名了 an 的各个部分`E_Let`，以便更清楚地了解它们所代表的含义。

## 编写解析函数

您可以`isDigit`通过添加`import Data.Char (isDigit)`帮助来使用：

```
expr :: [String] -> (Expr,[String])
expr [] = error "unexpected end of input"
expr (s:ss) | all isDigit s = (E_Int (read s),ss)
             | s == "-" = let (e,ss') = expr ss in (E_Neg e,ss') 
             | s == "+" = (E_Sum e e',ss'') where
                          (e,ss') = expr ss
                          (e',ss'') = expr ss'
            -- more cases 
```

哎呀！太多的 let 子句模糊了意思，我们会`E_Prod`为`E_Let`. 让我们解决这个问题！

处理这个问题的标准方法是编写一些组合器；与其在我们的定义中烦人地处理输入`[String]`s，不如定义一些方法来混淆解析器的输出（map）并将多个解析器组合成一个（lift）。

## 清理代码1：map

首先我们应该定义`pmap`我们自己的等价`map`函数，这样我们就可以`pmap E_Neg (expr1 ss)` 代替`let (e,ss') = expr1 ss in (E_Neg e,ss')`

```
pmap :: (a -> b) -> ([String] -> (a,[String])) -> ([String] -> (b,[String])) 
```

nonono，我什至看不懂！我们需要一个类型同义词：

```
type Parser a = [String] -> (a,[String])

pmap :: (a -> b) -> Parser a -> Parser b
pmap f p = \ss -> let (a,ss') = p ss 
                  in (f a,ss') 
```

但如果我这样做真的会更好

```
data Parser a = Par [String] -> (a,[String]) 
```

所以我可以做

```
instance Functor Parser where
  fmap f (Par p) = Par (pmap f p) 
```

我会把它留给你看你是否喜欢。

## 清理代码2：组合两个解析器

当我们有两个解析器要运行时，我们还需要处理这种情况，并且我们想使用一个函数来组合它们的结果。这称为将函数提升到解析器。

```
liftP2 :: (a -> b -> c) -> Parser a -> Parser b -> Parser c
liftP2 f p1 p2 = \ss0 -> let
              (a,ss1) = p1 ss0
              (b,ss2) = p2 ss1
              in (f a b,ss2) 
```

甚至可能是三个解析器：

```
liftP3 :: (a -> b -> c -> d) -> Parser a -> Parser b -> Parser c -> Parser d 
```

我会让你想想怎么做。在 let 语句中，您需要`liftP5`解析 let 语句的各个部分，提升忽略`"="`and的函数`"in"`。你可以做

```
equals_ :: Parser ()
equals_ [] = error "equals_: expected = but got end of input"
equals_ ("=":ss) = ((),ss)
equals_ (s:ss) = error $ "equals_: expected = but got "++s 
```

还有几个可以帮助解决这个问题。

实际上，`pmap`也可以称为`liftP1`，但 map 是这类东西的传统名称。

## 用漂亮的组合器重写

现在我们准备清理`expr`：

```
expr :: [String] -> (Expr,[String])
expr [] = error "unexpected end of input"
expr (s:ss) | all isDigit s = (E_Int (read s),ss)
            | s == "-" = pmap   E_Neg expr ss
            | s == "+" = liftP2 E_Sum expr expr ss
            -- more cases 
```

那一切都很好。真的，没关系。但是`liftP5`会有点长，感觉很乱。

## 进一步清理 - 超好的应用方式

应用函子是要走的路。记得我建议重构为

```
data Parser a = Par [String] -> (a,[String]) 
```

所以你可以让它成为一个实例`Functor`？也许您不想这样做，因为您所获得的只是`fmap`完美工作的新名称，`pmap`并且您必须处理所有那些`Par`使您的代码混乱的构造函数。不过，也许这会让您重新考虑；我们可以`import Control.Applicative`，然后使用`data`声明，我们可以定义`<*>`, 哪种方式表示`then`并使用`<$>`而不是`pmap`,`*>`有意义 `<*>-but-forget-the-result-of-the-left-hand-side`所以你会写

```
expr (s:ss) | s == "let" = E_Let <$> var *> equals_ <*> expr <*> in_ *> expr 
```

这看起来很像您的语法定义，因此很容易编写第一次工作的代码。这就是我喜欢编写解析器的方式。事实上，这就是我喜欢写很多东西的方式。您只需要定义`fmap`,`<*>`和`pure`，所有简单的，并且不再重复`liftP3`等`liftP4`。

阅读有关应用函子的信息。他们真棒。

*   [适用于Learn You a Haskell for Great Good！](http://learnyouahaskell.com/functors-applicative-functors-and-monoids)
*   [适用于 Haskell wikibook](http://en.wikibooks.org/wiki/Haskell/Applicative_Functors)

使 Parser 适用`pure`的提示：不更改列表。 `<*>`就像`liftP2`，但函数不是来自外部，它来自`p1`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T16:23:04.527

要开始使用 Haskell 本身，我建议向[您学习 Haskell for Great Good！](http://learnyouahaskell.com/)，一个写得很好的和有趣的指南。[Real World Haskell](http://book.realworldhaskell.org/)是另一个经常被推荐的起点。

编辑：解析的更基本介绍是[功能解析器](http://roman-dushkin.narod.ru/files/fp__jeroen_fokker_001.pdf)。我想要*如何*用 Philip Wadler 的成功列表替换失败。可悲的是，它似乎无法在线获得。

要开始在 Haskell 中进行解析，我认为您应该首先阅读[Haskell 中的 monadic parsing](http://eprints.nottingham.ac.uk/223/1/pearl.pdf)，然后可能是[这个 wikibook 示例](http://en.wikibooks.org/wiki/Haskell/Practical_monads#Parsing_monads)，然后是[parsec 指南](http://legacy.cs.uu.nl/daan/download/parsec/parsec.html)。

你的语法

```
Dig ::= 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
Int ::= Dig | Dig Int
Var ::= a | b | ... z | A | B | C | ... | Z
Expr ::= Int | - Expr | + Expr Expr | * Expr Expr | Var | let Var = Expr in Expr 
```

建议一些抽象数据类型：

```
data Dig = Dig_0 | Dig_1 | Dig_2 | Dig_3 | Dig_4 | Dig_5 | Dig_6 | Dig_7 | Dig_8 | Dig_9
data Integ = I_Dig Dig | I_DigInt Dig Integ
data Var = Var_a | Var_b | ... Var_z | Var_A | Var_B | Var_C | ... | Var_Z
data Expr = Expr_I Integ 
          | Expr_Neg Expr
          | Expr_Plus Expr Expr
          | Expr_Times Expr Expr Var
          | Expr_Var Var
          | Expr_let Var Expr Expr 
```

这本质上是一个递归定义的语法树，不需要再做一个。`Dig_`对笨重的东西感到抱歉`Integ_`-它们必须以大写字母开头。

（就我个人而言，我想立即将 s 转换为`Integ`s `Int`，所以会这样做`newtype Integ = Integ Int`，并且可能会这样做，`newtype Var = Var Char`但这可能不适合你。）

一旦你完成了基本的 - `dig`and `var`, and `neg_`,`plus_`等`in_`我会使用 Applicative 接口来构建它们，所以例如你的`expr`解析器`Expr`就像

```
expr =        Expr_I <$> integ 
          <|> Expr_Neg <$> neg_ *> expr
          <|> Expr_Plus <$> plus_ *> expr <*> expr
          <|> Expr_Times <$> times_ *> expr <*> expr
          <|> Expr_Var <$> var
          <|> Expr_let <$> let_ *> var <*> equals_ *> expr <*> in_ *> expr 
```

所以几乎在所有时间里，你的 Haskell 代码都是干净的，并且与你得到的语法非常相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:28:22.957

好的，看来您正在尝试构建很多很多东西，而您并不确定它们的确切发展方向。我建议获得`AST`正确的定义，然后尝试实施`evali`将是一个好的开始。

您列出的语法很有趣...您似乎想输入`* 5 5`，但输出`5*5`，这是一个奇怪的选择。那真的应该是一元减号，而不是二元吗？同样，`* Expr Expr Var`看起来您可能打算输入`* Expr Expr | Var`...

无论如何，对你的意思做一些假设，你的 AST 看起来像这样：

```
data AST = Leaf Int | Sum AST AST | Minus AST | Var String | Let String AST AST 
```

现在，让我们尝试做`printE`. 它需要一个 AST 并给我们一个字符串。根据上面的定义，AST 必须是五种可能的事物之一。您只需要弄清楚要为每个打印什么！

```
 printE :: AST -> String
 printE (Leaf  x  ) = show x
 printE (Sum   x y) = printE x ++ " + " ++ printE y
 printE (Minus x  ) = "-" ++ printE x
 ... 
```

`show`把 a`Int`变成 a `String`。`++`将两个字符串连接在一起。我会让你解决剩下的功能。（棘手的是，如果您希望它打印括号以正确显示子表达式的顺序......因为您的语法没有提到括号，我想没有。）

现在，怎么样`evali`？好吧，这将是一个类似的交易。如果 AST 是 a `Leaf x`，那么`x`是 a `Int`，你只需返回它。如果你有，比如说，`Minus x`那么`x`不是一个整数，它是一个AST，所以你需要把它变成一个整数`evali`。该功能看起来像

```
evali :: AST -> Int
evali (Leaf  x  ) = x
evali (Sum   x y) = (evali x) + (evali y)
evali (Minus x  ) = 0 - (evali x)
... 
```

到目前为止效果很好。可是等等！看起来您应该能够用来`Let`定义新变量，并在以后使用`Var`. 那么，在这种情况下，您需要*将*这些变量存储在某个地方。这将使函数更加复杂。

我的建议是使用`Data.Map`存储变量名称及其对应值的列表。您需要将变量映射添加到类型签名中。你可以这样做：

```
evali :: AST -> Int
evali ast = evaluate Data.Map.empty ast

evaluate :: Map String Int -> AST -> Int
evaluate m ast =
  case ast of
    ...same as before...
    Let var ast1 ast2 -> evaluate (Data.Map.insert var (evaluate m ast1)) ast2
    Var var           -> m ! var 
```

所以`evali`现在只需`evaluate`使用空变量映射调用。当`evaluate`sees时`Let`，它将变量添加到地图中。当它看到 时`Var`，它会在地图中查找名称。

至于首先将字符串*解析*为 AST，这又是一个完全*不同*的答案......

# html - 悬停CSS滑出多个对象/项目

> ID：12712150
> 
> 赞同：0
> 
> 时间：2012-10-03T15:49:26.073
> 
> 标签：html, css

我正在做一个网站项目，我想要这个很酷的悬停效果，但我似乎无法让它正常工作？

我有一个黑胶唱片盒图像，该图像向左滑动，带有标题（溢出：隐藏）以显示其后面的唱片图像。同时从左边我想要一个记录的描述从向左移动的vinly记录盒后面滑出，并在记录图像的顶部，有点不透明，所以你仍然可以看到记录（这部分简单）

这是html代码：

```
<div id="stations">
<div class="grid_3">
<div class="records"><!-- sleeve -->
<h3>Groove Salad</h3>
<div class="recordsinfo">Station description.</div>
</div>
</div>
</div> 
```

这是CSS代码：

```
#stations>div {
background-image: url(http://benlevywebdesign.com/somafm/images/SomaFMrecord.png);
background-repeat:no-repeat;
height: 220px;
margin-bottom: 20px;
position: relative;
overflow:hidden;
}

#stations>div>.records{
background-image: url(http://benlevywebdesign.com/somafm/images/SomaFM.png);
background-repeat:no-repeat;
height: 220px;
margin-bottom: 20px;
overflow:hidden;
position:relative;
}

#stations>div>.records>h3 {
color: #FFF;
background-color: rgba(255,255,255, 0.45);
width:200px;
margin-top:0px;
margin-bottom:-5px;
padding: 10px 10px 3px;
}

#stations>div>.records>.recordsinfo{
position: absolute;
left:-150px;
bottom: 0;
margin: 5px 10px;
}

@-moz-keyframes slideout {
    0% { left:0; }
    100% { left:-100px; }
}
@-webkit-keyframes slideout {
    0% { left:0; }
    100% { left:-100px; }
}
@keyframes slideout {
    0% { left:0; }
    100% { left:-100px; }
}

#stations>div>.records:hover{
height: 220px;
width:220%;
margin-bottom: 20px;
left:-100px;
overflow:hidden;
position: relative;
-moz-animation: slideout 0.75s 1;
-webkit-animation: slideout 0.75s 1;
animation: slideout 0.75s 1;
}

#stations>div>.records>.recordsinfo:hover{
height: 220px;
width:220%;
left:150px;
overflow:hidden;
position: relative;
-moz-animation: slidein 0.75s 1;
-webkit-animation: slidein 0.75s 1;
animation: slidein 0.75s 1;
} 
```

这是它的一个小提琴，直到最后一部分是描述不起作用并滑出左边！

*更新了小提琴* [http://jsfiddle.net/Xc9U6/11/](http://jsfiddle.net/Xc9U6/11/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:21:20.973

试试这个 -[**演示**](http://jsfiddle.net/uK3mr/)

***HTML***

```
<div id="stations">
    <div class="grid_3">
        <div class="records"><!-- sleeve -->
            <h3>Groove Salad</h3>
        </div>
        <div class="recordsinfo">Station description.</div>
    </div>
</div> 
```

***CSS***

```
#stations > div {
    background-image: url(http://benlevywebdesign.com/somafm/images/SomaFMrecord.png);
    background-repeat:no-repeat;
    height: 220px;
    margin-bottom: 20px;
    position: relative;
    overflow:hidden;
}

#stations > div:hover .records {
    margin-left: -110px;
}

#stations .records{
    background-image: url(http://benlevywebdesign.com/somafm/images/SomaFM.png);
    background-repeat:no-repeat;
    height: 220px;
    margin: 0 0 20px 0;
    overflow:hidden;
    position:relative;

    -webkit-transition: all .75s;
       -moz-transition: all .75s;
            transition: all .75s;
}

#stations h3 {
    color: #FFF;
    background-color: rgba(255,255,255, 0.45);
    width:200px;
    margin-top:0px;
    margin-bottom:-5px;
    padding: 10px 10px 3px;
}

#stations > div:hover .recordsinfo {
    margin-left: 0;
}

#stations .recordsinfo {
    background: rgba(0, 0, 0, .8);
    color: #fff;
    position: absolute;
    width: 150px;
    bottom: 0;
    margin: 5px 10px 5px -150px;

    -webkit-transition: all .75s;
       -moz-transition: all .75s;
            transition: all .75s;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:57:49.890

如果我理解得很好，您希望标题保留在原处吗？如果是这样，你去：

```
#stations > div > .records:hover h3 {
    margin-left: 100px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:21:19.337

最后！您在这里遇到了很多不同的问题，从将宽度设置为 220%，而不是 px，到尝试为动画的子项设置动画（因此它的位置已关闭），到未定义您想要使用的幻灯片动画。

试试这个：[jsFiddle](http://jsfiddle.net/Xc9U6/12/)

# php - 抓取用户的电子邮件并向他的朋友发送邀请请求，它是如何工作的？

> ID：12712152
> 
> 赞同：0
> 
> 时间：2012-10-03T15:49:26.913
> 
> 标签：php, invite, yahoo-messenger

我有一个因为当用户注册时，我需要让他们从雅虎通邀请他们的联系人。但遗憾的是，我什至不知道如何开始。任何答案或链接都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:54:53.557

您必须根据您需要的联系字段咨询 yahoo api doc。

这会有所帮助

[http://developer.yahoo.com/social/rest_api_guide/contacts_table.html](http://developer.yahoo.com/social/rest_api_guide/contacts_table.html)

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:56:20.990

看看我们的 Stackover 流程​​成员之一。 [如何邀请来自 MSN、Yahoo 的人加入我的应用程序？](https://stackoverflow.com/questions/915311/how-do-i-invite-people-from-msn-yahoo-into-my-application?answertab=votes#tab-top)

或者这可能也没什么帮助。[http://phplegend.wordpress.com/2008/09/20/importing-yahoo-contacts-using-curl-and-php/](http://phplegend.wordpress.com/2008/09/20/importing-yahoo-contacts-using-curl-and-php/)

# c# - 将 UTF-8 转换为 UTF-16BE

> ID：12712158
> 
> 赞同：0
> 
> 时间：2012-10-03T15:49:59.663
> 
> 标签：c#, .net, encoding

我正在努力解决以下问题。我正在使用 VS10 并使用 .NET 框架 2.0。用 C# 编码。

我正在制作一个简单的编辑器，将其文本交给**webservice**。我知道 .NET 使用 UTF-16（我相信默认是 LE？我想要 Big Endian）。我想让它能够在任何编辑器中工作，因此附加一个 BOM。问题是通过html它会改变我相信UTF-8？或者至少从以下错误中可以看出：

```
Client found response content type of 'text/html; 
charset=UTF-8', but expected 'text/xml'. 
The request failed with an empty response. 
```

编辑：文档警告所有属性的编码都是 UTF-8，没有 BOM 标记。editorTextString 是属性之一。但是要上传的文件内容必须是带有 BOM 的 UTF-16BE。我检查了 .net 是否自动翻译编码，但它没有。或者至少中文字母变成了？所以我需要重新编码或转换更好的说法，将文本转换为 UTF-16BE WITH BOM 而不是现在的不带 BOM 的 UTF-8。

我已经浏览了大量示例，但看不到我在这里做错了什么。有人可以提供建议或更正代码吗？（是的，我还阅读了 Jon 关于 unicode 的非常酷的文章 :)) 理论很清楚，但缺乏实际实践。

```
 // Convert to UTF-16 Big Endian

        Encoding leUnicode = Encoding.Unicode; 
        Encoding beUnicode = Encoding.BigEndianUnicode;

        byte[] editorTextBytesLE = leUnicode.GetBytes(editorTextString);
        Console.WriteLine("Little Endian - Encoded bytes:");
        foreach (Byte b in editorTextBytesLE)
        {
             Console.Write("[{0}]", b);
        }
        Console.WriteLine();

        byte[] editorTextBytesBE = Encoding.Convert(leUnicode, beUnicode, editorTextBytesLE);
        Console.WriteLine("BIG ENDIAN - Encoded bytes:");
        foreach (Byte b in editorTextBytesBE)
        {
             Console.Write("[{0}]", b);
         }
             Console.WriteLine();

        String decodedString = UnicodeEncoding.BigEndianUnicode.GetString(editorTextBytesBE);

        Console.WriteLine();
        Console.WriteLine("Decoded bytes:");
        Console.WriteLine(decodedString);

        // inserting UTF-16BE BOM marker, which eases recognition for any editor
        byte[] editorTextBytesToSend = { 0xfe, 0xff };
        editorTextBytesToSend.CopyTo(editorTextBytesBE, 2);

        File.WriteAllText(fileName, decodedString);

        Console.WriteLine("Uploading {0} to {1} ...", fileName, myURL);
        // Upload the file to the URL
        editorTextBytesBE =  myWebClient.UploadFile(myURL, "PUT", fileName); 
```

我找不到任何可以切换到大端序的东西，但是我已经看到了一些切换到 UTF-8 的示例（我无法正常工作）。非常感谢任何帮助、示例或链接以获取 UTF-16BE 的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:56:54.250

部分答案：

下面的代码看起来不像是在*插入*任何东西。相反，它会用您的 BOM 覆盖位置 2 和 3 的 2 个字节。它跳过前 2 个。

```
 // inserting UTF-16BE BOM marker, which eases recognition for any editor
    byte[] editorTextBytesToSend = { 0xfe, 0xff };
    editorTextBytesToSend.CopyTo(editorTextBytesBE, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:29:32.307

要使用任何一种 UTF-X 编码的 BOM 文件，只需使用正确的编码创建 TextWriter：

```
using(var writer = 
    new StreamWriter(fileName, new Encoding.UnicodeEncoding(true,true,true))
{
   writer.Write(editorTextString);
} 
```

使用提供 BOM 的[UnicodeEncoding构造函数。](http://msdn.microsoft.com/en-us/library/98ffd8aa%28v=vs.100%29.aspx)

旁注：您的问题很可能与使用这种罕见的编码无关，但它应该解决您的代码现在尝试执行的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:10:26.287

我设法使用以下代码：

字节[] BOMTextBytesToSend = {0xfe, 0xff };

byte[] editorTextBytesToSend = System.Text.Encoding.BigEndianUnicode.GetBytes(editorTextString);

BOMTextBytesToSend.CopyTo(editorTextBytesToSend, 0);

# jquery - 未使用 Jquery 提交隐藏的输入

> ID：12712161
> 
> 赞同：0
> 
> 时间：2012-10-03T15:50:13.637
> 
> 标签：jquery, html

我正在尝试提交输入字段并使用 ajax 请求上传文件。每件事都运作良好。除了不发送隐藏的输入值 $(#job)。

```
 $.ajaxFileUpload({
                     url         :'careers-training/apply-job/',
                     secureuri      :false,
                     fileElementId  :'cv',
                     dataType    : 'script',
                     data  :{'job' : $('#job').val(),'name' : $('#name').val(),'email' : $('#email').val(),'mobile' : $('#mobile').val(),'cv' : $('#cv').val()},
                     success  : function (Response, status)
                     {

                        var jsonObject = $.parseJSON(Response);
                        if(jsonObject.length == 0)
                        {
                            $(this).HideLoadingPanel();
                            $(this).ShowSuccessPanel();
                            $("#job-application-box").hide();
                            $("#body").attr('style','min-height:400px;')

                        }else{

                            $(this).HideLoadingPanel();
                            $(this).ShowErrorsBox(jsonObject);

                        }

                     }
                  }); 
```

这是HTML：

```
 <form name="apply-job-form" method="post" enctype="multipart/form-data">
                <input name="job" id="job" type="hidden" value="dd" />
                <label class="form-label">Name: </label>
                <input class="form-input" type="text" id="name" name="name" /><br />
                <label class="form-label">Mobile: </label>
                <input class="form-input" type="text" id="mobile" name="mobile" /><br />
                <label class="form-label">Email: </label>
                <input class="form-input" type="text" id="email" name="email" /><br />
                <label class="form-label">CV: </label>
                <input class="file-input" type="file" id="cv" name="cv" />
                <button type="button" id="apply-job-button" name="apply-job-button" class="form-button">Apply now !</button>
            </form> 
```

那么你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:18:46.167

我已经解决了这个问题。它与选择器有关，所以我要更改它们。谢谢大家

# extjs - 找不到功能

> ID：12712162
> 
> 赞同：0
> 
> 时间：2012-10-03T15:50:16.110
> 
> 标签：extjs, sencha-touch-2, sencha-architect

我正在使用煎茶建筑师。我在 app.js 中添加了一个函数来在视图的事件侦听器中调用它。**通过编辑app.js**文件手动添加它，例如：

```
function a(){

} 
```

按预期工作。

问题是，如果我使用架构师添加它会导致：

```
a:function{

} 
```

在**app.js**中，在事件监听器中调用函数会导致`can't find variable`错误。你知道为什么会这样吗？我想由架构师添加它，因为每当我添加新视图时，**app.js**都会被覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:26:57.037

找到了解决方案，为了正确调用它应该是：NameOftheApp.app.a()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:54:30.490

我用这种方式：

应用程序.js：

`setUrl: function(newUrl)`

称呼：

`this.getApplication().setUrl("Menu");`

# java - JComboBox 显示不可见的下拉菜单

> ID：12712164
> 
> 赞同：2
> 
> 时间：2012-10-03T15:50:31.410
> 
> 标签：java, swing, printing, jcombobox, jpopup

这是我关于 stackoverflow 的第一个问题，我需要一些帮助。

作为更宏大的 java 应用程序的一部分，我想调出一个带有几个 JComboBoxes 的 JDialog，询问用户选择要使用的打印机，然后选择要打印的关联分辨率。

但是，如果我选择一台打印机并且我选择的分辨率在几台打印机之间共享，那么当我选择一台包含相同分辨率的打印机时，为分辨率组合框显示的下拉菜单是不可见的。下拉菜单的大小是正确的，只是没有填充。试试我的代码，你就会明白我的意思。例如，我的两个打印选项是 Win32 打印机：Kyocera FS-1035MFP KX 和 Win32 打印机：Adobe PDF（打印到 pdf）。它们都共享 300x300 的分辨率，因此如果我为京瓷选择此分辨率，然后选择 Adob​​e PDF 打印机，下拉菜单将是正确的大小，但将为空。

我不确定发生了什么。希望有人可以帮助我。感谢您的时间。

```
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.util.Vector;
import javax.print.DocFlavor;
import javax.print.PrintService;
import javax.print.PrintServiceLookup;
import javax.print.attribute.HashPrintRequestAttributeSet;
import javax.print.attribute.PrintRequestAttributeSet;
import javax.print.attribute.standard.PrinterResolution;
import javax.swing.*;

public final class ComboDemo extends JDialog {

    private JComboBox selectPrinterBox;
    private JLabel selectPrinterLabel;
    private JComboBox selectResolutionBox;
    private JLabel selectResolutionLabel;
    private PrintService printService;
    private Resolution resolution;
    private DocFlavor flavor;
    private PrintRequestAttributeSet aset;
    private Vector<Resolution> resolutionVector;
    private double xDPI = 300.0;
    private double yDPI = 300.0;

    public PrintService[] getPrintServices() {
        this.flavor = DocFlavor.SERVICE_FORMATTED.PRINTABLE;
        this.aset = new HashPrintRequestAttributeSet();

        return PrintServiceLookup.lookupPrintServices(flavor, aset);
    }

    public Vector<Resolution> getVectorOfResolutions(PrintService service) {
        PrinterResolution[] supportedResolutions =
                (PrinterResolution[]) service.getSupportedAttributeValues(
                javax.print.attribute.standard.PrinterResolution.class,
                flavor, aset);
        Vector<Resolution> resolutions = new Vector<Resolution>();
        for (PrinterResolution supportedResolution : supportedResolutions) {
            Resolution res = new Resolution();
            res.setxDPI(supportedResolution.getResolution(PrinterResolution.DPI)[0]);
            res.setyDPI(supportedResolution.getResolution(PrinterResolution.DPI)[1]);
            resolutions.add(res);
        }

        return resolutions;
    }

    public ComboDemo() {

        super();
        initComponents();
        setContent();
        setItemListeners();

    }

    public void initComponents() {

        this.selectPrinterLabel = new JLabel("Select Printer: ");

        PrintService[] services = this.getPrintServices();
        this.selectPrinterBox = new JComboBox(services);

        this.printService = (PrintService) this.selectPrinterBox.getSelectedItem();
        this.resolutionVector = this.getVectorOfResolutions(printService);

        this.resolution = new Resolution();
        this.selectResolutionLabel = new JLabel("Select Resolution: ");
        this.selectResolutionBox = new JComboBox(this.resolutionVector);
    }

    public void setContent() {

        JPanel selectPrinterPanel = new JPanel();
        selectPrinterPanel.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));
        selectPrinterPanel.add(selectPrinterLabel);
        selectPrinterPanel.add(selectPrinterBox);

        JPanel selectResolutionPanel = new JPanel();
        selectResolutionPanel.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));
        selectResolutionPanel.add(selectResolutionLabel);
        selectResolutionPanel.add(selectResolutionBox);

        JPanel mainPanel = new JPanel();
        BoxLayout fP = new BoxLayout(mainPanel, BoxLayout.Y_AXIS);
        mainPanel.setLayout(fP);
        mainPanel.setBorder(BorderFactory.createEmptyBorder(20, 20, 20, 20));
        mainPanel.add(selectPrinterPanel);
        mainPanel.add(selectResolutionPanel);

        this.setContentPane(mainPanel);
        this.setTitle("ComboDemo");
        this.setLocation(85, 79);
        this.pack();

    }

    public void setItemListeners() {

        selectPrinterBox.addItemListener(
                new ItemListener() {

                    @Override
                    public void itemStateChanged(ItemEvent evt) {
                        if (evt.getSource().equals(selectPrinterBox)) {
                            if (evt.getStateChange() == ItemEvent.SELECTED) {
                                System.out.println("in printerBox itemListener");
                                printService = (PrintService) selectPrinterBox.getSelectedItem();
                                resolution = (Resolution) selectResolutionBox.getSelectedItem();
                                System.out.println("resolution (PrinterBox) : " + resolution.toString());
                                resolutionVector.clear();
                                resolutionVector.addAll(getVectorOfResolutions(printService));
                                if (resolutionVector == null) {
                                    System.out.println("resVec is null");
                                }
                                if (resolutionVector.contains(resolution)) {
                                    selectResolutionBox.setSelectedIndex(resolutionVector.lastIndexOf(resolution));

                                } else {
                                    selectResolutionBox.setSelectedIndex(0);
                                }
                            }
                        }

                    }
                });

        selectResolutionBox.addItemListener(
                new ItemListener() {

                    @Override
                    public void itemStateChanged(ItemEvent evt) {
                        if (evt.getSource().equals(selectResolutionBox)) {
                            if (evt.getStateChange() == ItemEvent.SELECTED) {
                                System.out.println("in resolutionBox itemListener");
                                resolution = (Resolution) selectResolutionBox.getSelectedItem();
                                System.out.println("resolution (ResolutionBox) : " + resolution.toString());
                                xDPI = (double) resolution.getxDPI();
                                yDPI = (double) resolution.getyDPI();
                            }
                        }
                    }
                });

    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ComboDemo cd = new ComboDemo();
                cd.setVisible(true);

            }
        });
    }
}

class Resolution {

    private int xDPI;
    private int yDPI;

    public int getxDPI() {
        return xDPI;
    }

    public void setxDPI(int xDPI) {
        this.xDPI = xDPI;
    }

    public int getyDPI() {
        return yDPI;
    }

    public void setyDPI(int yDPI) {
        this.yDPI = yDPI;
    }

    @Override
    public String toString() {
        return (this.getxDPI() + "x" + this.getyDPI());
    }

    @Override
    public boolean equals(Object obj) {
        if ( obj instanceof Resolution ) {
            Resolution r = (Resolution) obj;
            return (this.xDPI == r.xDPI) && (this.yDPI == r.yDPI);
        }
        return false;
    }

    @Override
    public int hashCode() {
      return (this.getxDPI()*1000)+ this.getyDPI();  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:11:12.123

问题是您正在操纵`Vector`支持`ComboBoxModel`您正在使用的隐式的`ComboBoxModel`. 如果不包含分辨率，则调用`setSelectedIndex(0)`最终触发组合框项目的刷新（因为`JComboBox`/的一些扭曲的内部结构`DefaultComboBoxModel`。

所以：

1.  使用 a`ComboBoxModel`和当您想要修改 JComboBox 的内容时，使用`ComboBoxModel`( 看看`DefaultComboBoxModel`)
2.  或使用`JComboBox`API ( `removeAllItems`, `addItem`)
3.  在组合框上使用 an `ActionListener`。而不是`ItemListener`您只会收到“选择更改”事件的通知

# uac - 创建 FileAdmin 组以允许域管理员在服务器 2008 r2 上完全访问文件

> ID：12712165
> 
> 赞同：0
> 
> 时间：2012-10-03T15:50:31.697
> 
> 标签：uac, windows-server-2008-r2

因此，这里曾经有一篇非常有用的文章解释了 windows 2008 r2 uac 和权限 [http://blog.akinstech.com/understanding-windows-7-and-2008-r2-uac-and-permissions/](http://blog.akinstech.com/understanding-windows-7-and-2008-r2-uac-and-permissions/)

这解释了为什么即使您以域管理员身份登录，由于两个令牌 yada yada，您仍然无法执行任何操作。

我踢自己，因为我没有复制这篇文章

但是他允许域管理员使用具有完全权限的文件的方法是创建一个名为 F_FileAdmin 的本地组，然后使用 icacls 授予该组对 C:\ 的完全权限，然后将域管理员添加到该组。我认为这是一种非常优雅的方法。

那么，任何人都知道 icacls 语法来完成这个吗？或者可以从某处的某个缓存中提取文章，或者联系 akinstech 先生并要求他将这篇非常有用的文章重新放到网上 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T13:35:21.707

啊哈！我确实保存了它。我意识到我在这里迟到了一年，但也许其他人可以使用它。

创建一个名为 F_FileAdmin 的组并将您想要的用户添加到其中。

```
icacls D:\ /grant "F_FileAdmin":(OI)(CI)F /T 
```

这会将“F_FileAdmin”组添加到整个 D: 驱动器并将权限向下传播到所有子文件夹和文件，确保您具有访问权限。

将此批处理文件粘贴到您的脚本目录中，使其位于您的路径中。现在在任何服务器上，从提升的命令提示符下，您只需键入以下内容即可配置文件夹：

```
setfileadmin d:\SharedData
setfileadmin e:\
setfileadmin "f:\Accounting Files" 
```

或者甚至像这样远程使用它……</p>

```
setfileadmin \\MyServer\d$\GroupData 
```

# c# - 停止长时间运行的事件

> ID：12712166
> 
> 赞同：2
> 
> 时间：2012-10-03T15:50:33.497
> 
> 标签：c#, events

我有一个以下表单 Form3，它由另一个表单 Form1 打开，关闭时 Form1 会重新打开。

问题是当我关闭 Form3 DoSomething 在表单关闭后继续运行时。

我知道我可以将 DoSomething 变成一个线程并设置 IsBackground = true 但是还有另一种方法可以在表单关闭时停止所有进程。

此代码只是示例，用于说明。

```
 public partial class Form3 : Form
    {

    public Form3()
    {
        InitializeComponent();
    }
    private void DoSomething()
    {
        int i = 0;
        while(true)
        {
            if (!this.IsDisposed)
            {
                Application.DoEvents();
                i++;
                Thread.Sleep(10);
                label1.Text = i.ToString();
                dataGridView1.Rows.Add();
            }
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        DoSomething();
    }

    private void Form3_FormClosed(object sender, FormClosedEventArgs e)
    {
        this.Dispose();
        Form1.Default.Show();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:57:04.147

你永远不会摆脱这段时间（真的）。您应该在 IsDisposed 为真时中断循环，将您的 while 循环更改为 while(!IsDisposed)，或者存储使用确定何时中断循环的类级别变量。

我可能会选择后者，因为它可以为您提供更多控制权。

```
public partial class Form3 : Form
{
    volatile bool clDoSomething;

    public Form3()
    {
        InitializeComponent();
    }
    private void DoSomething()
    {
        int i = 0;
        clDoSomething = true;
        while(clDoSomething)
        {
            Application.DoEvents();
            ++i;
            Thread.Sleep(10);
            label1.Text = i.ToString();
            dataGridView1.Rows.Add();
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        DoSomething();
    }

    private void Form3_FormClosed(object sender, FormClosedEventArgs e)
    {
        clDoSomething = false;
        Form1.Default.Show();
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:28:30.307

你的基本方法是有缺陷的。

首先，应避免[Application.DoEvents](https://stackoverflow.com/questions/5181777/use-of-application-doevents)，除非您确定确实需要它，并且您正在正确使用它。您在这里不需要它，并且您没有正确使用它。

你在这里真正需要的是一个`Timer`.

```
private Timer timer = new Timer();
private int count = 0;
public Form3()
{
    InitializeComponent();

    timer.Tick += timer_Tick;
    timer.Interval = 10;

    //when the form is closed stop the timer.
    FormClosed += (_, args) => timer.Stop();
}

private void button1_Click(object sender, EventArgs e)
{
    count = 0;
    timer.Start();
}

private void timer_Tick(object sender, EventArgs e)
{
    count++;
    label1.Text = count.ToString();
    dataGridView1.Rows.Add();
} 
```

`Form`创建时已`Timer`配置。设置刻度事件以及间隔。滴答事件看起来与您的`DoSomething`方法相似；它将涉及每 10 秒从 UI 线程运行一些代码，同时保持 UI 响应。当表单关闭时，只需停止计时器，它将停止触发这些事件。

另请注意，在此示例中，多次按下按钮只会重置计时器和计数，它最终不会创建两个循环，每个循环每 10 毫秒触发一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:54:36.657

覆盖`this.Dispose()`或`this.Close()`酌情手动终止 DoSomething() 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T19:45:45.940

感谢 cdhowie 的建议和所有其他人的意见。将 DoEvents 修剪到最后并添加 IsDipsose 解决了我的问题。

```
public partial class Form3 : Form
{
    public Form3()
    {
        InitializeComponent();
    }
    private void DoSomething()
    {
        int i = 0;
        while ((true) && !this.IsDisposed)
        {
                i++;
                Thread.Sleep(10);
                label1.Text = i.ToString();
                dataGridView1.Rows.Add();
                Application.DoEvents();
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        DoSomething();
    }

    private void Form3_FormClosed(object sender, FormClosedEventArgs e)
    {
        Form1.Default.Show();
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-28T16:50:31.610

尝试在 FormClosing 事件中添加此指令： `System.Diagnostics.Process.GetCurrentProcess().Kill();`

有点像这样：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    System.Diagnostics.Process.GetCurrentProcess().Kill();
} 
```

# python - 为 css 文件设置 django

> ID：12712177
> 
> 赞同：2
> 
> 时间：2012-10-03T15:51:19.863
> 
> 标签：python, css, django, webfaction

我是 django 的新手，正在尝试创建个人技术博客。我在 webfaction 上托管。我已经使用[这个视频](http://www.youtube.com/watch?v=srHZoj3ASmk)设置了博客。但是样式表不起作用。我按照[分步过程](http://docs.webfaction.com/software/django/getting-started.html#create-the-django-application)创建了 webfaction 提到的静态文件，但 stlyesheet 仍然无法正常工作。

我创建了一个静态应用程序：`staticapp`并将其添加到网站中，`/static` 如 webfaction 文档中所述。

在`settings.py`：

```
 STATIC_ROOT = 'home/myaccount/webapps/staticapp'
  STATIC_URL = 'http://myblogtest.myaccount.webfactional.com/static'
  STATICFILES_DIRS = ( 'junk','static',)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
     'django.contrib.admin',
     'django.contrib.admindocs',
     'blog',
     ) 
```

我从我的 html 页面引用如下：

```
 <link rel="stylesheet" type="text/css" href="static/style/style.css" /> 
```

我错过了任何步骤吗？我可以看到很多答案说要在其中添加代码片段，`urls.py`但 Webfaction 的文档中没有提到它。所以我没有这样做。

我可以看到很多人都面临同样的问题，但答案对我没有帮助，因为我是新手。请帮我设置这个。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T17:27:32.353

`STATIC_ROOT`需要有一个前置斜杠`/`，即`/home...` *不是* `home...`

*不要*将`static`目录添加到`STATICFILES_DIRS`. 我允许你用最近的钝物打任何建议你这样做的人。该`static`目录在开发中*根本不*应该存在，而在生产中它只能通过`python manage.py collectstatic`.

*务必*将您的静态资源存储在每个应用程序的单独`static`目录或完全不同的项目级目录中，即该目录不应与`MEDIA_ROOT`or的目录相同`STATIC_ROOT`。然后，*将此*目录添加到`STATICFILES_DIRS`.

在 Django 1.4+ 中，您应该在模板中使用`{% static %}`模板标签：

```
{% load static from staticfiles %}
<img src="{% static "images/hi.jpg" %}" alt="Hi!" /> 
```

这将自动为您附加`STATIC_URL`URL 的一部分，因此您提供的路径参数应该是相对的。

在 Django 1.3 中，您将`{{ STATIC_URL }}`在确保它`'django.core.context_processors.static'`出现在您的`TEMPLATE_CONTEXT_PROCESSORS`设置中的某处之后使用。您的视图还需要使用`RequestContext`，这意味着使用基于类的视图、`render`方法或传递`context_instance=RequestContext(request)`给`render_to_response`.

如果您希望 Django 在开发中轻松提供静态文件，您可以将以下内容添加到您的末尾`urls.py`：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns += staticfiles_urlpatterns() 
```

这在生产环境中不起作用 ( *)*`DEBUG=False`。对于生产，您需要运行`python manage.py collectstatic`，然后让您的前端网络服务器（nginx、Apache 等）为`STATIC_URL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:03:13.330

您已`STATIC_URL`在设置中定义；你应该在你的 html 模板中使用它

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}/style/style.css"> 
```

只要您没有从设置中的 TEMPLATE_CONTEXT_PROCESSORS 中删除任何内容，这应该可以工作。

您还可以考虑使用资产管理器为您生成模板中的所有 JS 和 CSS 链接，而不是自己编写它们。[django-pipeline](http://django-pipeline.readthedocs.org/en/latest/index.html)非常好，它还可以为你处理 JS 和 CSS 连接和压缩之类的事情。

# javascript - HTML5 音频是否缓冲？

> ID：12712178
> 
> 赞同：3
> 
> 时间：2012-10-03T15:51:21.167
> 
> 标签：javascript, html, audio

有没有办法告诉一首歌正在缓冲？

当我点击播放并且歌曲开始播放时，事件第一次触发，我得到了事件，但是一旦歌曲播放，如果数据没有足够快地进入，那么它“暂停”但没有事件触发。

我试过了：

```
audioElement.addEventListener('suspend',function (){
    console.log('suspended'); //Fires the first time song is being "buffered"
});

audioElement.addEventListener('playing',function (){
    console.log('playing'); //Fires the first time the song is played.
}); 
```

如何检查数据是否正在缓冲，以便我可以向用户指示等待的指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T11:54:23.040

这取决于您的目标浏览器及其当前 W3C 工作草案 HTML5 规范“媒体元素”部分的实现。

您可以随时在此处检查您所针对的浏览器是否支持某些事件：http: [//www.w3.org/2010/05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html)

否则，如果数据没有通过，那么我相信音频不会被缓冲并且`stalled`事件会触发。

如果数据正在通过，那么您应该能够检查`suspend`or`progress`事件，这两个事件都应该在数据被缓冲时触发（但不一定是暂停/播放）。

如果这些事件没有触发是因为浏览器不支持它们，您总是可以`networkState`使用计时器检查音频元素的属性，这实际上会告诉您音频是否正在缓冲：

**HTML：**

```
<!DOCTYPE html>
<html>
    <body>
        <audio controls="controls" id="myAudio">
            <source src="http://www.w3schools.com/html5/horse.ogg" type="audio/ogg">
            Your browser does not support the audio element.
        </audio>
    </body>
</html> 
```

**Javascript：**

```
var audioElement = document.getElementById('myAudio');

var checkNetworkStateTimer = setInterval(function () {
    console.log(audioElement.networkState); //2 indicates NETWORK_LOADING state
}, 250); 
```

同样在 jsFiddle：http: [//jsfiddle.net/3sdhj/2/](http://jsfiddle.net/3sdhj/2/)

由于 jsFiddle 上的示例音频太短，您可能无法重现 a `networkState`of ，但您明白了。`2`

如果仍然失败，我会使用流行的 HTML5 音频库，例如`SoundJS`,`Buzz`或`soundmanager2`（我绝不隶属于这些库）。

# asynchronous - Seam Classes 和 @Asynchronous 处理相关问题

> ID：12712180
> 
> 赞同：0
> 
> 时间：2012-10-03T15:51:28.247
> 
> 标签：asynchronous, seam

我有一个接口定义为：

```
public interface DocExporter{
      public void exportDoc();
} 
```

两个实现类定义为：

```
@Service(value="docExporter")   
@Scope(value="BeanDefinition.SCOPE_PROTOTYPE)
public class PdfDocExporter implements DocExporter{
   public void exportDoc(){
    // do Pdf Export stuff
   }
} 
```

和

```
@Service(value="docExporter")
@Scope(value="BeanDefinition.SCOPE_PROTOTYPE)
public class ExcelDocExporter implements DocExporter{
   public void exportDoc(){
    // do Excel Export stuff
   }
 } 
```

所以我可以这样说：

```
@Name("docExportReporter")
@Scope(ScopeType.EVENT)
public class DocExportReporter {
@In("#{docExporter}")
private DocExporter pdfDocExporter;

@In("#{docExporter}")
private DocExporter excelDocExporter;

   @Asynchronous
   public void reportGen(){
             **excelDocExporter.exportDoc()**  // THIS THROWS Seam Exception @In attribute requires a not null value

   }
  } 
```

我是 Spring 的 Seam 新手，想知道在两个 impl 类中，@Service 的值是否为“docExporter”（接口名称）还是类似于“pdfDocExporter”“excelDocExporter”？

有了上述内容，当在 reportGen 异步方法中使用 pdfDocExporter 或 excelDocExporter 对象时，我得到 @In 属性需要非空值异常。接口的两个实现是否可以在第三个类中声明并与 Seam @Asynchronous 注释一起正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:12:22.813

你不能有两个同名的组件，否则Seam 将不知道要注入哪一个。使用两个不同的名称。

# restlet - nexus restlet 没有下载索引

> ID：12712182
> 
> 赞同：1
> 
> 时间：2012-10-03T15:51:30.697
> 
> 标签：restlet, nexus

当我将[http://maven.restlet.org](http://maven.restlet.org)作为代理存储库添加到我的 nexus 存储库（版本 1.9.2.4）时，nexus 无法下载远程索引。
我在关系日志中看到以下错误：

> org.sonatype.nexus.proxy.ItemNotFoundException：我们请求的remoteURL在远程服务器上不存在（remoteUrl="http://maven.restlet.org/.index/nexus-maven-repository-index.gz

这是restlet还是nexus问题？如何将 Restlet 与 Nexus 一起使用？

整个堆栈跟踪是：

> 无法在 org.sonatype.nexus.index.DefaultIndexerManager$2.retrieve(DefaultIndexerManager. java:1114) 在 org.apache.maven.index.updater.DefaultIndexUpdater.loadIndexDirectory(DefaultIndexUpdater.java:191) 在 org.apache.maven.index.updater.DefaultIndexUpdater.access$300(DefaultIndexUpdater.java:76) 在 org. apache.maven.index.updater.DefaultIndexUpdater$LuceneIndexAdaptor.setIndexFile(DefaultIndexUpdater.java:642) 在 org.apache.maven.index.updater.DefaultIndexUpdater.fetchAndUpdateIndex(DefaultIndexUpdater.java:861) 在 org.apache.maven.index。 updater.DefaultIndexUpdater.fetchAndUpdateIndex(DefaultIndexUpdater.java:157) 在 org.sonatype.nexus.index。DefaultIndexerManager.updateRemoteIndex(DefaultIndexerManager.java:1132) 在 org.sonatype.nexus.index.DefaultIndexerManager.downloadRepositoryIndex(DefaultIndexerManager.java:1017) 在 org.sonatype.nexus.index.DefaultIndexerManager.reindexRepository(DefaultIndexerManager.java:892) 在 org .sonatype.nexus.index.DefaultIndexerManager.reindexRepository(DefaultIndexerManager.java:841) 在 org.sonatype.nexus.index.DefaultIndexerManager.reindexRepository(DefaultIndexerManager.java:815) 在 org.sonatype.nexus.tasks.ReindexTaskHandlerLegacy.reindexRepository(ReindexTaskHandlerLegacy .java:60) 在 org.sonatype.nexus.scheduling.AbstractNexusTask.call(AbstractNexusTask.java:159) 在 org.sonatype.nexus.tasks.AbstractIndexerTask.doRun(AbstractIndexerTask.java:72) 在 org.sonatype.scheduling。默认调度任务。在 java.util.concurrent.FutureTask.run(Unknown Source) 在 java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access 的 java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) 调用(DefaultScheduledTask.java:437) $301(Unknown Source) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run( Unknown Source) at java.lang.Thread.run(Unknown Source) 原因：org.sonatype.nexus.proxy.ItemNotFoundException：我们请求的remoteURL在远程服务器上不存在(remoteUrl="http://maven.restlet. org/.index/nexus-maven-repository-index.gz") 在 org.sonatype.nexus.proxy.storage.remote.commonshttpclient。CommonsHttpClientRemoteStorage.retrieveItem(CommonsHttpClientRemoteStorage.java:240) 在 org.sonatype.nexus.index.DefaultIndexerManager$2.retrieve(DefaultIndexerManager.java:1097) ... 21 更多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:29:50.947

您不需要远程索引来使用该存储库。您将无法使用 UI 搜索包含在该存储库中的工件，但 Nexus 将能够在直接要求时访问那里的工件（如“定义为 POM 中的依赖项”）。

编辑：这个问题是[Nexus - 没有索引的代理存储库的副本？](https://stackoverflow.com/questions/6037941/nexus-proxy-repositories-with-no-indexes).

# matlab - 如何在matlab中将一维向量转换为二维向量和用户定义的行和列？

> ID：12712186
> 
> 赞同：1
> 
> 时间：2012-10-03T15:51:38.857
> 
> 标签：matlab, vector

我有一个`1x10`1D 向量`A=1:10;`，我想将它转换为`5x2`2D 向量，有没有我可以使用的函数，例如：

```
2dA = 1Dto2D(A,5,2); 
```

我得到

```
2dA = [ 1 2 3 4 5
        6 7 8 9 10] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:00:20.847

是的，您正在寻找该[`reshape`](http://www.mathworks.com/help/matlab/ref/reshape.html?nocookie=true)功能。它的工作原理与您所描述的完全一样。

# visual-studio-2010 - VS2012 中的 VS2010 项目 - .net 4 的不同版本？

> ID：12712189
> 
> 赞同：0
> 
> 时间：2012-10-03T15:51:44.633
> 
> 标签：visual-studio-2010, visual-studio-2012

我已经读过在 vs2012 中打开 vs2010 项目很好（只要您使用的是 VS2010 SP1）它不会更新项目文件，并且 VS2010 SP1 上的项目文件使用它不会有问题：http: [//visualstudiomagazine.com/articles /2012/03/01/more-power.aspx](http://visualstudiomagazine.com/articles/2012/03/01/more-power.aspx)

但是我听说使用 vs 2012 时 .net 4 的版本比使用 vs2010 时更高（顺便说一下，我不是指 .net 4.5）。这是否正确，是否会导致针对不同版本的 .net 4 框架进行测试的开发机器上的发布出现问题？对我来说这听起来有点不太可能。

谢谢

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:53:55.560

答案并不简单。所有细节都可以在[这里找到](http://msdn.microsoft.com/en-us/library/hh266747.aspx)

VS中有很多不同类型的项目，有的不需要升级，有的兼容但需要升级，有的根本不兼容。这取决于项目类型。

此外，为了回答您关于 .net 版本的问题，4.5 被认为是“就地”升级。这意味着一旦您安装了 4.5，它将完全取代 4。所以，一旦你安装了 4.5，你可以在任何时候使用它来定位 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T17:59:34.770

.NET 4.5 修复了几个错误，所以突然之间，您无法重现人们在实际环境（WinXP/Win2k3 - .NET 4.0）中遇到的错误，因为您自己的机器安装了 VS2012（.NET 4.5）。

更多信息[如果我以 .net 4.0 为目标，但在具有 .net 4.5 的机器上运行，.net 4.0 WPF 错误仍然存​​在吗？](http://social.msdn.microsoft.com/Forums/en/wpf/thread/c05a8c02-de67-47a9-b4ed-fd8b622a7e4a)

更多信息[使 VS2012 在针对 .NET 4.0 时不隐藏 .NET 4.0 错误](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3095632-make-vs2012-not-hide-net-4-0-bugs-when-targeting-)

更多信息[在 Windows XP 上支持 .NET 4.0 Service Pack 支持 .NET 4.5 中修复的那些 .NET 4.0 错误](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3127346-support-a-net-4-0-service-pack-on-windows-xp-supp)

# php - 空的 $_POST 变量 web 服务响应

> ID：12712190
> 
> 赞同：0
> 
> 时间：2012-10-03T15:51:49.250
> 
> 标签：php, html, web-services, post, get

我正在与 Web 服务服务器通信，在付款完成后，服务器将响应作为`$_POST`变量发送给我。如果我尝试`print_r($_POST)`它似乎是空的，但是当我将变量写入文本文件时，文件会显示值。我的目标是建立一个执行链接来完成用户的订单。由于 $_POST 值仅在文本文件中可见，因此我正在从文本文件中读取链接并尝试执行重定向，但是当到达其他页面时，$_GET 变量为空。我之前曾尝试恢复原始 $_POST 变量`file_get_contents("php://input")`但没有成功。这是我的实际代码：

```
<?php   
ob_start();
// let's get the online response parameters...  
$_VTransactionID = $_POST["VTransactionID"];
$_VAccountId = $_POST["VAccountId"];
$_VTotalAmount = $_POST["VTotalAmount"];
$_VPaymentMethod = $_POST["VPaymentMethod"];
$_VPaymentDescription = $_POST["VPaymentDescription"];
$_VAuthorizationNum = $_POST["VAuthorizationNum"];
$_VConfirmationNum = $_POST["VConfirmationNum"];
$_VMerchantTransId = $_POST["VMerchantTransId"];

////////Write LInk to file////////////////////////////////////
$fp = fopen("debug/OnlineResponseLog.log","w");

$link = "testvar.php?order_id=".$_VAccountId."&code=000&error=false&TxnGUID=".$_VConfirmationNum."\n\r";

if($fp){
    fwrite($fp,$link);
    fclose($fp);
}else{
    printf("error while trying to write on online response Log");
}
////////////////////////////////////////////////////////////////////////////
/////REad LINK////////////////////////////////////////////////////
$fp = fopen("debug/OnlineResponseLog.log","r");
if($fp){
    $cad = fread($fp,filesize("debug/OnlineResponseLog.log"));
    fclose($fp);
}else{
    printf("error while trying to read online response Log");
}
////////////////////////////////////////////////////
$url = $cad;
//To check if values where stored. Last char is used because last characters are supposed to be digits and not an equal sign.
$lastchar = substr($url, -1);
if($lastchar == "=")  
         $url ="testvar.php?order_id=&code=999&error=true&TxnGUID="; 

header("Location: $url");
//////////////////  
?> 
```

任何帮助将不胜感激。`$_POST`如果值在以下位置可见，则可以避免所有文件写入`print_r($_POST);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:02:38.027

我猜你的帖子变量不是空的..因为这个你什么都看不到

```
ob_start(); 
```

在测试时删除该功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:44:50.043

我通过将任务分隔在两个单独的 php 文件中解决了这个问题。一个文件将带有 $_POST 变量的构造链接写入文件并重定向到第二个文件，该文件从文件中读取链接并重定向到相应的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T15:57:21.807

使用`$_REQUEST`全局变量。该`$_POST`变量仅在数据已“发布”`$_GET`时才会填充，并且仅在发送 HTTP 查询字符串时才会填充。 `$_REQUEST`由两种方法填充。但是，您应该在`FORM`发布期间更加警惕插入攻击，因此在使用`$_REQUEST`.

# c# - 使用 LINQ 在组内排序

> ID：12712192
> 
> 赞同：4
> 
> 时间：2012-10-03T15:52:09.023
> 
> 标签：c#, linq

给定以下数据：

```
List<Country> countries = new List<Country>();

countries.Add(new Country{ Name = "USA",     population=500000,  Year=2012 });
countries.Add(new Country{ Name = "USA",     population=300000,  Year=2002 });
countries.Add(new Country{ Name = "USA",     population=250000,  Year=1992 });
countries.Add(new Country{ Name = "USA",     population=20000,   Year=1982 });

countries.Add(new Country{ Name = "India",   population=1500000, Year=2012 });
countries.Add(new Country{ Name = "India",   population=1000000, Year=2002 });
countries.Add(new Country{ Name = "India",   population=50000,   Year=1982 });
countries.Add(new Country{ Name = "India",   population=80000,   Year=1992 });

countries.Add(new Country{ Name = "Germany", population=100000,  Year=2012 });
countries.Add(new Country{ Name = "Germany", population=400000,  Year=2002 });
countries.Add(new Country{ Name = "Germany", population=60000,   Year=1992 });
countries.Add(new Country{ Name = "Germany", population=4000,    Year=1982 });

countries.Add(new Country{ Name = "UK",      population=450000,  Year=2002 });
countries.Add(new Country{ Name = "UK",      population=50000,   Year=1992 });
countries.Add(new Country{ Name = "UK",      population=3000,    Year=1982 }); 
```

我想按给定年份的最大人口对国家进行排序，然后显示该国家/地区的所有年份，然后再转到下一个国家/地区。

例如

1.  2012 - 人口顺序将是印度、美国、英国、德国。所以我希望数据按所有印度数据、所有美国数据、所有英国数据和德国数据排序。

2.  2002 - 人口顺序是印度、美国、德国，然后是英国。英国是最后一个，因为它没有 2002 年的数据。

我想使用 LINQ 来实现这一点，尽管我过去使用过 LINQ，但我一直在努力解决这个问题。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:54:37.960

您需要按国家/地区对数据进行分组，然后按特定年份的人口排序；

```
var year = 2002;    

var orderedCountries = countries
                        .GroupBy(c => c.Name)
                            .OrderByDescending(c => c.Where(y => y.Year == year).Select(p => p.population).FirstOrDefault())
                                .SelectMany(c=>c)  
                                .ToList(); 
```

即使**给定年份没有数据，上述代码也将起作用**

这可能有点难以阅读，因此您可以将 orderby 中的逻辑分离到委托中，例如；

```
var orderedCountries = countries
                            .GroupBy(c => c.Name)
                                .OrderByDescending(c => GetPop(c, year))
                                    .SelectMany(c=>c)  
                                        .ToList();

Func<IGrouping<string, Country>, int, long> GetPop = 
                                    ((cntry, yr) => (from c in cntry
                                                     where c.Year == yr
                                                     select c.population).First()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T20:36:24.733

这与 saj 的答案相当，但使用查询语法：

```
var y = 2002;

var ordered = 
    from c in countries
    group c by c.Name into g
    select new
    {
        Name = g.Key,
        Population = (
            from x in g
            where x.Year == y
            select x.population).FirstOrDefault()
    } into s
    orderby s.Population descending
    join f in countries
    on s.Name equals f.Name
    select f; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T16:02:23.273

这里有一个类似的问题： [Multiple "order by" in LINQ](https://stackoverflow.com/questions/298725/multiple-order-by-in-linq)

像这样的东西可以解决你的问题。我在 VS 中对其进行了测试，它按预期工作：

```
var countries order= countries.OrderBy(c => c.Year).ThenBy(n => n.population); 
```

# android - 如何使用动画将图像显示到图像视图中

> ID：12712194
> 
> 赞同：1
> 
> 时间：2012-10-03T15:52:12.173
> 
> 标签：android, android-layout, animation, imageview

我有这样的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/white"
    android:gravity="center"
    android:orientation="vertical" >

    <LinearLayout android:id="@+id/linearLayout1"
        android:layout_width="fill_parent" android:orientation="vertical"
        android:layout_height="fill_parent" android:weightSum="1">

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/who" 
            android:layout_gravity="center"
            android:layout_weight="0.3"/>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Presents"
        android:textColor="@color/color1"
        android:textAppearance="?android:attr/textAppearanceLarge" 
        android:layout_gravity="center"
        android:layout_marginTop="20dp"
        android:layout_weight="0.1"
        />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/logo"
        android:layout_gravity="center"
        android:layout_weight="0.6" 
        />
</LinearLayout>
</LinearLayout> 
```

和活动：

```
package com.n;

import android.app.Activity;
import android.os.Bundle;

public class MyMainActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
    }
} 
```

我想要的是，在 X 秒后，在最后一个图像视图上显示另一个图像，并带有缩放过渡动画。有可能吗？天呐！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:27:57.850

是的，你可以用缩放动画做到这一点

它应该是这样的（我不是 100% 确定比例动画的值，但你可以玩它）

```
private static final int DURATION = "put here duration...";
private static final int OFFSET = "put here offset...";

ScaleAnimation zoomAnimation = new ScaleAnimation(0.1f, 1.0f, 0.1f, 1.0f, 0.5f,0.5f);
zoomAnimation.setDuration(DURATION);
zoomAnimation.setStartOffset(OFFSET); 
newImageView.startAnimation(zoomAnimation); 
```

# c# - 在 C# 代码中运行 PSCmdLets (Citrix XenDesktop)

> ID：12712196
> 
> 赞同：2
> 
> 时间：2012-10-03T15:52:16.677
> 
> 标签：c#, powershell, citrix

我是 PowerShell 新手，在 C# 中运行 PowerShell cmd-let。具体来说，我正在尝试使用 Citrix 的 XenDesktop SDK 编写一个 Web 应用程序来管理我们的 XenDesktop 环境。

作为一个快速测试，我参考了 Citrix BrokerSnapIn.dll，它看起来给了我很好的 C# 类。但是，当我点击 .Invoke 并显示以下错误消息时：“不能直接调用从 PSCmdlet 派生的 Cmdlet。”

我已经搜索并尝试了很多东西，但不知道如何调用 PSCmdlet。我有点想我必须使用字符串和运行空间/管道等来做到这一点。

感谢先进，NB

```
using System;
using System.Management.Automation;
using System.Management.Automation.Runspaces;
using Citrix.Broker.Admin.SDK;

namespace CitrixPowerShellSpike
{
    class Program
    {
        static void Main(string[] args)
        {
            var c = new GetBrokerCatalogCommand {AdminAddress = "xendesktop.domain.com"};
            var results = c.Invoke();
            Console.WriteLine("all done");
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T16:27:01.683

您需要托管 PowerShell 引擎才能执行 PSCmdlet，例如（来自[MSDN 文档](http://technet.microsoft.com/en-us/library/system.management.automation.powershell%28v=vs.85%29.aspx)）：

```
 // Call the PowerShell.Create() method to create an 
  // empty pipeline.
  PowerShell ps = PowerShell.Create();

  // Call the PowerShell.AddCommand(string) method to add 
  // the Get-Process cmdlet to the pipeline. Do 
  // not include spaces before or after the cmdlet name 
  // because that will cause the command to fail.
  ps.AddCommand("Get-Process");

  Console.WriteLine("Process                 Id");
  Console.WriteLine("----------------------------");

  // Call the PowerShell.Invoke() method to run the 
  // commands of the pipeline.
  foreach (PSObject result in ps.Invoke())
  {
    Console.WriteLine(
            "{0,-24}{1}",
            result.Members["ProcessName"].Value,
            result.Members["Id"].Value);
  } 
} 
```

# sql-server - join 产生 2 行而不是 1 行

> ID：12712197
> 
> 赞同：1
> 
> 时间：2012-10-03T15:52:27.383
> 
> 标签：sql-server

我有两个具有完全相同字段的表，我想根据我添加到它们的虚拟字段加入它们，这两个表都称为 join2 = 1。

但是，当我使用以下语法时，它会将它们全部放在一行上，而我希望它们根据名称字段放在单独的行上

我使用的语法是：

```
select a.NAME, a.COUNT1, a.MIN1,a.MAX1,a.SUM1,a.AVG1,
b.NAME, b.COUNT1, b.MIN1,b.MAX1,b.SUM1,b.AVG1
from #AMT_PAYMENTS a 
INNER join #cur_bal b on (a.join2 = b.join2) 
```

所以桌子看起来像

```
name count1 min1 max1 sum1 avg1 name count1 min1 max1 sum1 avg1 
```

而不仅仅是

```
name count1 min1 max1 sum1 avg1 
```

垂直单独列出的名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:56:17.103

您想使用 UNION 语句：

```
select a.NAME, a.COUNT1, a.MIN1,a.MAX1,a.SUM1,a.AVG1
FROM #AMT_PAYMENTS a
UNION
select b.NAME, b.COUNT1, b.MIN1,b.MAX1,b.SUM1,b.AVG1
FROM #cur_bal b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:56:53.847

尝试这个：

```
select a.NAME, a.COUNT1, a.MIN1,a.MAX1,a.SUM1,a.AVG1
from #AMT_PAYMENTS a
union all
select b.NAME, b.COUNT1, b.MIN1,b.MAX1,b.SUM1,b.AVG1
from #cur_bal b 
```

# c# - 将发布参数传递给asp.net mvc中的操作方法？

> ID：12712199
> 
> 赞同：1
> 
> 时间：2012-10-03T15:52:36.753
> 
> 标签：c#, asp.net-mvc, http

我是 asp.net mvc 的新手。我在获取 Action 方法中的参数值时遇到了一些麻烦。

我有以下代码：

```
[HttpPost]
public ActionResult ToggleRecommend(string mode)
{
    byte[] requestContent = new byte[Request.ContentLength];
    Request.InputStream.Read(requestContent, 0, Request.ContentLength);
    string content = Encoding.ASCII.GetString(requestContent);

    return EmptyResult();
} 
```

我使用 Ajax 请求访问此方法。该请求具有以下标头：

```
Accept  application/json
Accept-Encoding gzip, deflate
Accept-Language en-gb,en;q=0.5
Connection  keep-alive
Content-Length  8
Content-Type    text/plain; charset=UTF-8
Host    localhost:62718
Referer http://localhost:62718/microsite
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1
X-Request   JSON
X-Requested-With    XMLHttpRequest 
```

这个身体：

```
mode=off 
```

我的问题是`mode`参数 of`ToggleRecommend`没有填充来自请求的值 - 相反，它是空的。

请求正确到达我的服务器：`content`方法中的变量具有值`mode=off`，并且`Request.ContentLength`是 8，如预期的那样。此外，`Request.RequestType`正如预期的那样，是“POST”。但是，`Request.Form`是空的：它没有键或值。（我不知道这是否相关）。

这里出了什么问题？如何让我的`mode`参数值进入我的操作方法？

问题一定与post有关：如果我删除`HttpPost`属性并向Url发出请求，`localhost:62718/microsite/toggleRecommend/?mode=off`则`mode`参数会`off`按预期获取值。

编辑：

该请求是使用 Mootools 库使用 javascript 发出的。我在下面包含了这部分代码：

```
var req = new Request.JSON({ method: "post",
        url: "/microsite/toggleRecommend/" ,
        autoCancel: true, urlEncoded: false, secure: false,
        onFailure: recommendFail, onException: recommendFail,
        onSuccess: recommendSuccess
    });

    req.send({ data: { mode: 'on'} }); 
```

使用萤火虫，我可以看到请求的确切格式（看起来很好），所以希望 javascript 代码的细节无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T06:27:51.267

您的 ajax 调用内容/类型是 text/html，您需要向控制器指定您正在发送应用程序/json 信息，否则他会收到信息，但不知道如何将其分发给它的参数

# javascript - Chrome 和 Safari 的地图区域坐标动态问题

> ID：12712200
> 
> 赞同：0
> 
> 时间：2012-10-03T15:52:38.373
> 
> 标签：javascript, html, webkit, imagemap

我真的需要通过javascript生成图像地图区域的坐标。由于某种原因，Chrome 和 Safari 无法正确映射它。这是我的代码以一种简单的方式：

```
dynamicMapping('#targetMap', [360,288,470,180,880,180,980,288]);

function dynamicMapping(targetMap, coordinates){

    var coords = '';

    for(i=0; i<coordinates.length; i++){
    coords += (coordinates[i]+',');     
    }

    $(targetMap).attr("coords", coords);
} 
```

坐标应该绘制一个梯形，这在 Firefox 上效果很好，但在 Chrome 和 Safari 上无法绘制第一个点。如果我在 HTML 中输入坐标，一切正常，但通过 javascript 形成原因会使 Webkit 错过坐标的第一个点，从而导致三角形而不是梯形。有谁知道如何处理这个？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:30:53.880

Chrome 可能无法正确解析您的`coords`字符串。您的代码返回`1, 2, 3,`，但 Chrome 期望`1, 2, 3`。

尝试使用`Array.join()`构造属性的值：

```
$('#targetMap').attr('coords', [360,288,470,180,880,180,980,288].join(', ')); 
```

# javascript - 如何使用由 javascript 添加的 div 使 div 完全可滚动

> ID：12712201
> 
> 赞同：0
> 
> 时间：2012-10-03T15:52:42.370
> 
> 标签：javascript, html, css, yui

我有一个 div`report_container`用于显示动态生成的图表的集合。图表是使用 javascript（Yahoo UI 库）绘制的，并且它们绘制在使用 javascript 动态创建的 div 上（因为图表的数量不同）当我将`report_container`样式溢出设置为滚动时，div 滚动但绘制的图表根本不滚动。知道如何使图表与其余内容一起滚动吗？

编辑：来自控制台的屏幕截图..突出显示的 div 是其中一个图表开始的地方，由 YUI 创建

![在此处输入图像描述](../Images/aae902223925e6c8fe33fb69976ea67d.png)

# c++ - 链接错误：未定义对“avahi_alternative_service_name”的引用

> ID：12712203
> 
> 赞同：0
> 
> 时间：2012-10-03T15:52:50.327
> 
> 标签：c++, ubuntu-12.04, avahi

知道我需要在库中找到这个符号。我正在尝试编译基于 avahi 的测试代码来查看服务。但我得到`undefined reference to`avahi_alternative_service_name'`.. 我不知道哪个库包含这个，我正在运行 UBUNTU 12.04。我尝试安装几个软件包但没有成功..任何想法谢谢..

我安装了以下软件包

```
dpkg --get-selections | grep avahi
avahi-autoipd                   install
avahi-daemon                    install
avahi-utils                     install
libavahi-cil-dev                install
libavahi-client-dev             install
libavahi-client3                install
libavahi-client3:i386           install
libavahi-common-data            install
libavahi-common-data:i386       install
libavahi-common-dev             install
libavahi-common3                install
libavahi-common3:i386           install
libavahi-core7                  install
libavahi-glib-dev               install
libavahi-glib1                  install
libavahi-gobject0               install
libavahi-ui-dev                 install
libavahi-ui-gtk3-0              install
libavahi-ui0                    install
libavahi1.0-cil                 install 
```

命令
`gcc -fpermissive testAvahi.c -o testAvahi`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T10:39:34.247

实际上需要找到库，然后需要将它们传递给链接器，所以下面的命令确实对我有用

`gcc -fpermissive testAvahi.c -o testAvahi -L/usr/lib/x86_64-linux-gnu/ -lavahi-client -lavahi-common`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:18:12.963

如果您有一个放置 c++ 库的公共文件夹，您可以使用 nm 命令检查搜索功能，例如

```
cd /usr/lib 
```

`nm -AC * | grep avahi_alternative_service_name`

binutils 中提供了 nm 实用程序（sudo apt-get install binutils）

# ios6 - SDK 3.1：如何判断SDK是否使用iOS6账号？

> ID：12712204
> 
> 赞同：8
> 
> 时间：2012-10-03T15:52:57.050
> 
> 标签：ios6, facebook-ios-sdk

如果我在 iOS6 中设置了 Facebook 帐户但用户已将其关闭，则 SDK 只会给我一个 FBSessionStateClosedLoginFailed 状态。由此，我无法判断用户是否在 iOS 中关闭了我们（案例 1），或者没有在 iOS 中设置帐户并拒绝来自 FB 应用程序或 Web 应用程序的许可（案例 2）。

在这两种情况下，我需要呈现的错误消息是完全不同的。在第一种情况下，我们需要告诉用户如何重新打开我们，但在情况 2 中，这些说明会让某些人感到困惑。

我尝试使用 iOS 帐户框架，但如果我被关闭，我会被告知即使有 Facebook 帐户也没有。如果我成功通过身份验证，我也尝试写下帐户标识符，但如果我们关闭，accountWithIdentifier 也会失败。

有人知道我们的拒绝是来自 iOS 还是来自 FB 本身的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T17:48:24.193

SDK 的一般策略是，如果某些操作正在失败，则来自操作系统的底层错误信息会冒泡到应用程序。（当然，并非所有失败案例都以 OS API 失败开始。）此策略的原因是支持更精确的错误处理和日志记录场景，例如您描述的场景。顺便说一句，如果您在 SDK 中发现不遵循此模式的地方，这是一个错误，请报告。

在这种情况下，FBSession 将一个 NSError 对象传递给您的处理程序，并将 userInfo 中的 FBErrorInnerErrorKey 值设置为操作系统返回的错误对象。为了向您的用户提供准确的错误消息，您可以在 FBSessionStateClosedLoginFailed 案例中使用如下代码片段：

```
if (error) {
    NSError *innerError = error.userInfo[FBErrorInnerErrorKey];
    if ([innerError.domain isEqualToString:ACErrorDomain] &&
        innerError.code == ACErrorPermissionDenied) {
        NSLog(@"User dissallowed permissions via iOS 6.0 integration");
    }
} 
```

希望这可以帮助！

*** 更新 *** 刚刚在设备上尝试过，发现了两个错误；一个在 iOS 6.0 中，另一个在 SDK 中。iOS 6.0 的 bug 是当开关关闭时，操作系统没有传递 NSError 对象，因此没有内部错误。因此，使上面的一般解决方案不适用于所讨论的特定情况。第二个错误确实为您提供了使用 SDK 3.1.1 解决此问题的*临时解决方案。*

SDK 3.1.1 中的 bug 是我们将 error.userInfo[FBErrorLoginFailedReason] 设置为 FBErrorLoginFailedReason 的值。在内部错误为 NIL 的情况下，您可以检查此原因值以确定应用程序的滑块设置为关闭。在 SDK 中修复此错误后，对此的代码测试将中断，但是，因为我们会将原因设置为与 iOS 6 相关的更合乎逻辑的原因。这是在未来构建中需要注意的问题您的应用程序，如果您决定依赖此值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-21T10:19:05.207

对于 iOS 6.0 及更高版本，当您访问设置设备并关闭应用程序中的 facebook 集成时。您可以通过代码检查它

```
//Callback method for facebook authorization
- (void)sessionStateChanged:(FBSession *)session
                  state:(FBSessionState) state
                  error:(NSError *)error
{
    .....
    if (error) {        
        NSString *valueError = [error.userInfo objectForKey:FBErrorLoginFailedReason];
        if ([valueError compare:FBErrorLoginFailedReasonSystemDisallowedWithoutErrorValue] == NSOrderedSame)
            NSLog(@"To use your Facebook account with this app, open Settings > Facebook and make sure this app is turned on.");
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T22:45:25.927

如果登录失败，您可以尝试打开 iOS 无法拒绝的旧 webview facebook 登录对话框。如果成功，那么他们没有 iOS 6，或者他们在 iOS 6 中关闭了你，我不知道这是可能的。

# java - Java：多字节字符串长度

> ID：12712207
> 
> 赞同：6
> 
> 时间：2012-10-03T15:53:06.837
> 
> 标签：java

我有一个为命令行程序打印“标题文本”的方法，很像 Markdown 的语法：

```
1\. =======================
2\. This is a header string
3\. ======================= 
```

`c`此方法为第 1 行和第 3 行获取一个字符，并`n`根据`s`.

`String.length()`可以很好地使用英文字母，但是如何找到包含“Å”和“Ç”等外来多字节字符的字符串的长度（即视觉长度）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T15:56:51.867

`String.length`对这类字符没问题，因为 Java 字符串在 UTF-16 中工作，这足以表示绝大多数常用字符（拉丁语、希腊语、阿拉伯语、希伯来语、中文、泰语、梵文……） .

如果您可能需要处理 U+FFFF 以上的字符，那么您需要使用`codePointCount`而不是`length`处理代理对。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T15:55:35.957

`String.length()`适用于大多数[Unicode](http://en.wikipedia.org/wiki/Unicode)字符，包括`Å`和`Ç`。

[Java 字符串](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)[`utf-16`](http://en.wikipedia.org/wiki/UTF-16)在每个 `Character`占用`2`或`4`字节的位置进行编码。

[*补充字符*](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html)表示占`4`字节两个字符*进行配对*`codePointCount`来实现，这种情况下必须使用运算来代替`length`.

字符虽然大多数肯定存在于标准 unicode 规范中。

# git - 试图在 mac/linux 之间共享 git 文件夹，子模块无法识别

> ID：12712210
> 
> 赞同：2
> 
> 时间：2012-10-03T15:53:14.373
> 
> 标签：git

我有一个巨大的 git 存储库，我想在我的本地 Mac OS 客户端和在虚拟机中运行的“来宾”Linux 客户端之间共享它。我在两者（1.7.12.2）上都构建了最新版本的 git，并且我从 Mac OS 克隆了存储库。问题是在 Linux 中，子模块无法识别：

```
$ git status
fatal: Not a git repository: /blah/android-wmon/.git/modules/core/modules/galaxynexus-cm10-kernel
fatal: 'git status --porcelain' failed in submodule core 
```

在这两个操作系统之间共享一个 git 存储库是不可能的吗？我不会想到这是一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:39:36.733

> 如果我在mac端做“ `git submodule init`”和“ `git submodule update`”，为什么我还需要在linux端做呢？

这两[个子模块](http://git-scm.com/book/en/Git-Tools-Submodules)命令用于本地存储库（您刚刚克隆的一个）。

*   `git submodule init`初始化您的本地配置文件，并且
*   `git submodule update`从该项目中获取所有数据并检查您的父 repo 中列出的适当提交。

在一个本地存储库中执行此操作对任何其他克隆的存储库（例如 Linux 上的那个，从 Mac 上的存储库克隆）都没有副作用。
您需要为您的第二个本地存储库（Linux 服务器本地）再次执行这些命令以获取所有数据。

注意：确保你做了一个简单的`git clone`，[而不是一个`git clone --reference`](http://randyfay.com/content/git-clone-reference-considered-harmful).

另外：确保您的子模块没有被完整路径引用（取决于您的 git 版本）：请参阅[此线程](http://comments.gmane.org/gmane.comp.version-control.git/193492)：

> 您所说的“最后一次更新”是什么？v1.7.8 为子模块引入了单独的 git dir，并使用了绝对路径。
> 
> 此绝对路径已更改为此补丁集中的相对路径，[该补丁](http://thread.gmane.org/gmane.comp.version-control.git/192173)集中存在于 v1.7.10-rc1 中。
> 
> 从最近开始，一个名为的子模块`<name>`的 git 目录位于超级项目的`.git/modules/<name>`目录中，而工作树包含一个指向那里的 gitfile。
> 当子模块的 git 目录因为在 clone 命令中找不到而需要克隆时，`.git/modules/<name>`会在 gitfile 中写入一个绝对路径。当不需要克隆时，`git-submodule.sh`脚本将通过将相对路径写入`gitfile`.
> 
> 这是不一致的，因为行为取决于之前已克隆到`.git/modules of the superproject`.
> 这里最好使用相对路径，因为它允许在不使 gitfile 无效的情况下移动超级项目。
> 我们通过始终将相对路径写入 来做到这一点`gitfile`，这会覆盖克隆命令可能已经写入那里的绝对路径。

# c++ - c ++：将任意数量的参数传递给另一个函数

> ID：12712212
> 
> 赞同：1
> 
> 时间：2012-10-03T15:53:17.127
> 
> 标签：c++, function, variadic-functions

我有一个需要 3 个参数的函数。其他函数的向量、void* 和任意参数列表。该函数旨在将其 void* 和任意参数列表传递给列表中的每个函数，这些函数将自行处理。这是我想要的一个例子：

```
typedef void (*fptr)(const void* userdata, ...);

void execute_all(vector<fptr> funcs, void* userdata, ...){
    for (int i = 0;i<funcs.size();i++){
        fptr func = funcs[i];
        //execute func with userdata and ... from above.
        //like (*func)(userdata, ...); which obviously doesnt work
    }
} 
```

我需要知道如何将所有参数转发到每个函数中。不要担心确保兼容性。我在其他地方处理。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:58:23.313

您不能直接将可变参数从可变参数函数传递给另一个可变参数函数。但是，您可以让被调用的（内部）函数接受 a `va_list`，然后传递该列表：

```
#include <cstdarg>

void callee(void *first, va_list args);

void caller(void *first, ...)
{
    va_list args;
    va_start(args, first);
    callee(first, args);
    va_end(args);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:01:34.013

您无法有效地将可变参数函数的参数移动到另一个函数，但是您可以将堆栈移动到另一个函数，因此它可以从堆栈本身中窥视参数。Ansi C 的介绍`va_list`就是为了这个目的。你可以有以下代码：

```
void fwd_function( int argCount, ... ) {
    va_list vargs;
    va_start( vargs, argCount );
    impl_function( argCount, vargs );
    va_end( vargs );
}
void impl_function( int argCount, va_list args ) {
    int i;
    for( i = 0; i < argCount; i++ ) {
        int arg = va_arg( args, int );
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:56:31.620

您应该在 C++11 中使用可变参数模板和完美转发。

如果您没有，AFAIK 有一个 Boost 库可以为您模仿这些库。

# javascript - nodejs http服务器上的请求加倍

> ID：12712213
> 
> 赞同：0
> 
> 时间：2012-10-03T15:53:21.713
> 
> 标签：javascript, node.js

**设想**

我在 nodejs 上运行一个非常简单的服务器：

```
var http = require("http");
var ConnectionsNumber = 0;

function onRequest(request, response)
{
    console.log((new Date).toUTCString() + " - Request received");
    console.log(request.headers);
    response.writeHead(200, {"Content-Type": "text/plain"});
    response.write("Listening\n");
    response.end();
    ConnectionsNumber++;
    console.log('Requests so far: ' + ConnectionsNumber);
}

http.createServer(onRequest).listen(8888);
console.log((new Date).toUTCString() + " - Server started"); 
```

但是当我启动服务器并发出请求（通过 Chrome）时，服务器一次收到两个请求。这是日志：

```
Wed, 03 Oct 2012 16:03:27 GMT - Server started
Wed, 03 Oct 2012 16:03:34 GMT - Request received
{ host: 'localhost:8888',
  connection: 'keep-alive',
  'cache-control': 'max-age=0',
  'user-agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4',
  accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
  'accept-encoding': 'gzip,deflate,sdch',
  'accept-language': 'it-IT,it;q=0.8,en-US;q=0.6,en;q=0.4',
  'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3' }
Requests so far: 1
Wed, 03 Oct 2012 16:03:34 GMT - Request received
{ host: 'localhost:8888',
  connection: 'keep-alive',
  accept: '*/*',
  'user-agent': 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4',
  'accept-encoding': 'gzip,deflate,sdch',
  'accept-language': 'it-IT,it;q=0.8,en-US;q=0.6,en;q=0.4',
  'accept-charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3' }
Requests so far: 2 
```

**问题**

怎么了？

**编辑**

这是获胜者：

```
var http = require("http");
var ConnectionsNumber = 0;

function onRequest(request, response)
{
    console.log((new Date).toUTCString() + " - Request received");
    console.log(request.url);

    response.writeHead(200, {"Content-Type": "text/plain"});
    response.write("Listening\n");
    response.end();

    ConnectionsNumber++;
    console.log('Requests so far: ' + ConnectionsNumber);
}

http.createServer(onRequest).listen(8888);
console.log((new Date).toUTCString() + " - Server started"); 
```

以及相应的日志：

```
Wed, 03 Oct 2012 20:00:04 GMT - Server started
Wed, 03 Oct 2012 20:00:14 GMT - Request received
/
Requests so far: 1
Wed, 03 Oct 2012 20:00:14 GMT - Request received
/favicon.ico
Requests so far: 2 
```

这就是所有人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:55:51.930

默认情况下，Chrome 会请求一个网站图标。这可能就是您看到第二个请求的原因。

# java - glassfish 上的 objectdb vs hibernate 和 mysql

> ID：12712215
> 
> 赞同：1
> 
> 时间：2012-10-03T15:53:27.297
> 
> 标签：java, jpa, criteria-api, objectdb

我能找到的每个网站似乎都偏向于`objectdb`赞美`hibernate and mysql`。例如，[http://www.jpab.org/ObjectDB/ObjectDB/server/Hibernate/MySQL/server.html](http://www.jpab.org/ObjectDB/ObjectDB/server/Hibernate/MySQL/server.html)。

使用`objectdb`而不是`hibernate and mysql`用于 java web 服务有什么缺点吗？我当然在使用 JPA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:23:33.770

您的意思是对 RDBMS 使用 ODBM 有优点和缺点吗？网上有大量的参考资料可以解决这个问题。

特别是对于 JPA，它是围绕 RDBMS 语法设计的，因此对象数据存储（无论是 ObjectDB 还是任何其他）可能不完全支持某些查询 sintaxis。这可能意味着某些查询要么抛出异常，要么在内存中求值（这可能意味着速度）。另一方面，在某些持久性操作中它可能会更快。显然，如果您遇到问题，您将无法获得像知道该数据存储的可用人数那样的信息，而 MySQL 则有数千人。

还有许多 JPA 实现可用于持久化到 MySQL，它们都有自己的优点和缺点。因此，这个问题太开放了，只是要寻找个人意见，而不是基于任何具体事实

# java - sbt测试编码hickup

> ID：12712216
> 
> 赞同：3
> 
> 时间：2012-10-03T15:53:40.170
> 
> 标签：java, sbt, specs2

我正在为地理坐标工作编写一个 Java 库，并且测试是用 Scala 中的 specs2 实现的。我有许多测试对包含度数符号`°`（非 ASCII 字符）的字符串进行字符串比较。

如果我在 IntelliJ 中运行这些测试，它们都会通过。他们还传递了 Travis CI。但是，如果我`sbt test`从我的 Power Shell (Windows x64) 运行 (sbt 11.3)，所有这些测试都会失败，并且控制台会显示格式错误的字符串，如屏幕截图所示：

![编码问题](../Images/a8bc4940fb5b0597bb1d177ea906b74d.png)

可能是什么问题，我该如何解决？我检查了这些文件是 UTF8 编码的。另请注意，更改我的 Java 配置不会有太大帮助，因为如果其他人克隆存储库，则只需运行测试（因此任何仅在我的系统上解决问题的解决方案都无济于事）。但我完全不知道这里出了什么问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T20:46:52.640

您的学位符号是否直接编码在源文件中？

如果是这样，我怀疑您可能有一些编码问题（在 SBT 编译时，源文件可能在 IntelliJ 和 CP1252 中被解释为 UTF-8）。

您可以尝试将度数符号更改为`'\u00B0'`并重新编译，或者您可以尝试将 SBT 中的源文件编码设置为`javacOptions ++= Seq("-encoding", "UTF-8")`.

FWIW，除非另有说明，否则编译器（和运行时）对源（和其他）文件 I/O 使用默认编码。Windows 的默认编码是 CP1252。

您可以告诉`javac`编译器使用带有`-encoding UTF-8`选项的替代编码，并使用`-Dfile.encoding=UTF-8`.

通过谷歌，我还在这里找到了一些关于如何在系统范围内执行此操作的信息[（](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding/623036#623036)未经我测试）。

# javascript - 一个基本的 JavaScript 问题

> ID：12712217
> 
> 赞同：-6
> 
> 时间：2012-10-03T15:53:42.743
> 
> 标签：javascript, html, scripting

您好，我需要有关此基本 JavaScript 的帮助。它对我不起作用；在过去的几个小时里，我一直在把头发拉出来。

**Javascript：**

```
window.onload = function(){
  if (!document.getElementById) return false;
  var popupLink = document.getElementById("popup");
  popupLink.onclick = function() 
  {
    winOpen(this.getAttribute("href"));
    return false;
  }
} 
```

**HTML：**

```
<a href="popup.html" id="popup" title="select this link to open a popup in a new window">Open Popup Window</a> 
```

我知道这可能是我错过的一些非常愚蠢的事情，你们的任何帮助都将非常受欢迎。这个想法是在 HTML 代码中除了脚本链接之外没有 JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:04:14.707

## Javascript：

```
window.onload = function(){
  var popupLink = document.getElementById("popup");
  popupLink.onclick = function() 
  {
    winOpen(this.getAttribute("href"));
    return false;
  }
}

function winOpen(url)
{
  window.open(url);
} 
```

## HTML：

```
<a href="popup.html" id="popup" title="select this link to open a popup in a new window">Open Popup Window</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T15:58:17.727

html 为您的代码：

```
<a id="popup" href="http://jsfiddle.net/">click me</a>​ 
```

测试示例，是否有效？ [http://jsfiddle.net/F2YCD/2/](http://jsfiddle.net/F2YCD/2/)

# java - Eclipse + tomcat - 部署时出现 ClassNotFound 异常

> ID：12712224
> 
> 赞同：2
> 
> 时间：2012-10-03T15:54:05.053
> 
> 标签：java, tomcat, tomcat7

我面临着一个奇怪的日食问题。

我有一个带有 CXF、hibernate 和 spring 的多模块 maven 项目。如果我采用 maven 包后产生的战争，并在 tomcat 7 上手动部署它 - 一切正常。但是，如果我尝试使用 eclipse (Servers -> tomcat)，我会收到以下错误：

```
 SEVERE: Exception starting filter datasourceFilter
java.lang.ClassNotFoundException: com.X.X.X.X.filter.DataSourceFilter
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:532)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:514)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:133)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:256)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

值得一提的是，我试图与eclipse集成的tomcat是同一个独立的tomcat，我手动部署了war。我使用eclipse Juno ..如果重要的话..

在我的 web.xml 上：

```
<filter>
        <filter-name>datasourceFilter</filter-name>
        <filter-class>com.X.X.X.X.filter.DataSourceFilter</filter-class>
    </filter>
        <filter-mapping>
        <filter-name>datasourceFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

谁能帮我？

伊多布

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:10:32.140

如果您同时安装了[Maven Eclipse 插件](http://marketplace.eclipse.org/content/maven-integration-eclipse)和[Maven WTP 插件](http://marketplace.eclipse.org/node/441371)，这是自动的。如果您没有安装这些，请继续安装它们，然后在 Eclipse 重新启动后右键单击项目并执行**Maven > Update project** ...。这将在内部更改项目配置，以便将 Maven 依赖项复制到`/WEB-INF/lib`部署目标上的文件夹中。

如果您不想使用这些插件中的任何一个，那么您必须转到**项目属性 > 部署程序集**配置并手动添加您的依赖项，但同样，这是由这些插件自动完成的。

# python - 如何在python中每个帐户名的csv文件中查找最高值？

> ID：12712225
> 
> 赞同：0
> 
> 时间：2012-10-03T15:54:03.863
> 
> 标签：python, sorting, csv

无论如何我可以找到每个帐户名称和类型的 x1 或 x2 的前 2 个值吗？

我的文件如下所示：

```
 AccntName,Type,Value,x1,x2
   Accnt-01,A,0.001,85,1168
   Accnt-01,A,0.1814,65,664
   Accnt-01,A,11.1399,312,1861
   Accnt-01,A,12.228,55,305
   Accnt-01,A,13.3161,205,1095
   Accnt-01,B,15.0259,298,2139
   Accnt-01,B,17.9793,112,324
   Accnt-01,B,19.1451,2180,15194
   Accnt-02,A,20.3109,423,2947
   Accnt-02,A,13.3161,205,1095
   Accnt-02,A,15.0259,298,2139
   Accnt-02,A,19.0321,120,1323
   Accnt-02,B,20.3109,423,2947
   Accnt-02,B,13.3161,205,1095
   Accnt-02,B,15.0259,298,2139
   Accnt-02,B,19.0321,120,1323 
```

输出如下内容：

```
Accnt-01,A,11.1399,312,1861 #top 2 values
Accnt-01,A,13.3161,205,1095 #for Accnt-01,A

Accnt-01,B,19.1451,2180,15194 #top 2 values
Accnt-01,B,15.0259,298,2139   #for Accnt-01,B

and so on.. for Accnt-02,A or B 
```

任何建议都会非常有帮助。太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:40:31.540

我不确定最后两个值是什么意思，所以我猜你的意思是两者的总和。使用[csv](http://docs.python.org/library/csv.html)库将数据拉入行。现在，假设您有每个帐户的列表，请使用此函数拉出前两个：

```
process_list(l):
    p_l = sorted(l, key=lambda l: l[-1] + l[-2])
    return p_l.pop(), p_l.pop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:53:24.480

怎么回事，今天好无聊。。。

这确实复制了您请求的输出。使用 csv 模块会更“强大”，但亲爱的读者，我会把它留给你。

```
csv=[line.strip() for line in """\
  AccntName,Type,Value,x1,x2
   Accnt-01,A,0.001,85,1168
   Accnt-01,A,0.1814,65,664
   Accnt-01,A,11.1399,312,1861
   Accnt-01,A,12.228,55,305
   Accnt-01,A,13.3161,205,1095
   Accnt-01,B,15.0259,298,2139
   Accnt-01,B,17.9793,112,324
   Accnt-01,B,19.1451,2180,15194
   Accnt-02,A,20.3109,423,2947
   Accnt-02,A,13.3161,205,1095
   Accnt-02,A,15.0259,298,2139
   Accnt-02,A,19.0321,120,1323
   Accnt-02,B,20.3109,423,2947
   Accnt-02,B,13.3161,205,1095
   Accnt-02,B,15.0259,298,2139
   Accnt-02,B,19.0321,120,1323
""".splitlines()]

maxes={}
header=csv[0].split(',')
for line in csv[1:]:
    eles=line.split(',')
    maxes.setdefault(eles[0]+', '+eles[1]+',',[]).append(
            tuple([float(eles[2]),int(eles[3]),int(eles[4])]))

for key in maxes.keys():
    # Since you have a list of tuples, sort them to your choosing here
    maxes[key]=sorted(maxes[key],key=lambda t: t[2]+t[1], reverse=True)

for key in sorted(maxes.keys()):
    print key,'{:8}, {:6}, {:6}'.format(*maxes[key][0])
    print key,'{:8}, {:6}, {:6}'.format(*maxes[key][1]) 
```

输出：

```
Accnt-01, A,  11.1399,    312,   1861
Accnt-01, A,  13.3161,    205,   1095
Accnt-01, B,  19.1451,   2180,  15194
Accnt-01, B,  15.0259,    298,   2139
Accnt-02, A,  20.3109,    423,   2947
Accnt-02, A,  15.0259,    298,   2139
Accnt-02, B,  20.3109,    423,   2947
Accnt-02, B,  15.0259,    298,   2139 
```

# entity-framework - 从数据库更新后清空的 edmx 文件的 SSDL 内容

> ID：12712226
> 
> 赞同：0
> 
> 时间：2012-10-03T15:54:07.707
> 
> 标签：entity-framework

我正在使用带有 EF 的 Visual Studio 2010 (SP1)。当我尝试更新应用程序的 edmx 文件时，文件的 SSDL 内容部分被清空。结果是每个实体的映射细节都被清空，这意味着已经存在的表不会刷新。

例如，SSDL 内容部分以前看起来像这样：

```
<!-- SSDL content -->
<edmx:StorageModels>
<Schema Namespace="DataAccess.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2005" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">
    <EntityContainer Name="DataAccessStoreContainer">
      <EntitySet Name="Amdec" EntityType="DataAccess.Store.Amdec" store:Type="Tables" Schema="dbo" />
... 
```

之后，我得到了：

```
<!-- SSDL content -->
<edmx:StorageModels>
<Schema Namespace="DataAccess.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2005" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/02/edm/ssdl">
    **<EntityContainer Name="DataAccessStoreContainer"/>** 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:33:27.060

谢谢 Pawel，我在 edmx 连接字符串上使用了集成安全性，因为我可以访问服务器，但我对数据库本身没有权限。我用 SQL 连接凭据替换了它，现在它工作正常。

# spring-mvc - 各种 Spring MVC RequestMapping 配置问题

> ID：12712232
> 
> 赞同：0
> 
> 时间：2012-10-03T15:54:14.803
> 
> 标签：spring-mvc, mapping, request

我对 Spring MVC RequestMapping 配置有几个（尽管相关）问题：

1.  假设我有一个类型级别的 RequestMapping 注释，如下所示`@RequestMapping("/root/")`：`@RequestMapping(value="leaf")`添加这个方法级别的 RequestMapping:和那个: 有什么区别`@RequestMapping(value="/leaf")`？注意第二个方法级映射中的前导斜杠。
2.  `@RequestMapping("/root/")`拥有这种类型级别的 RequestMapping:和那个有什么区别`@RequestMapping("/root/*")`？注意第二个映射中的星星。
3.  假设我已经有一个类型级别的 RequestMapping 注释。如何在方法级别覆盖类型级别映射，以便忽略类型级别映射（对于给定的控制器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:20:23.683

*   在两种情况下都应该是相同的映射 -`/root/leaf`对于两种方法级别的映射

*   两者都是一样的，在这两种情况下，类型级映射都会结合方法级映射生成完整的请求路径，所以类型级`/root/*`和方法映射会变成`/root/leaf`——更多规则在这里[——http://static.springsource。 org/spring/docs/3.1.x/javadoc-api/org/springframework/util/AntPathMatcher.html#combine(java.lang.String](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/util/AntPathMatcher.html#combine(java.lang.String) , java.lang.String)

*   我怀疑是否可以，类型级别映射与方法级别映射相结合以创建完整路径。

# java - 得到“无法对非静态方法进行静态引用”错误，但我没有将我正在调用的方法声明为静态

> ID：12712234
> 
> 赞同：0
> 
> 时间：2012-10-03T15:54:22.527
> 
> 标签：java

当我尝试编译时，出现错误：

> 无法从 Doctor 类型对非静态方法 getId() 进行静态引用。

`Doctor`是 的子类`Staff`。当我在代码中`Doctor`替换为时，我得到了同样的错误。`Staff`我知道我不能用超类代替子类，所以这就是为什么`Staff`不起作用，但是在我的`Database`类中，我没有将任何东西声明为静态，所以我不明白它为什么或如何是静态的以及为什么我收到了那个错误。

这是我的数据库类

```
import java.util.ArrayList;

public class Database
{
String id;

private ArrayList<Staff> staff;

/**
 * Construct an empty Database.
 */
public Database()
{
    staff = new ArrayList<Staff>();
}

/**
 * Add an item to the database.
 * @param theItem The item to be added.
 */
public void addStaff(Staff staffMember)
{
    staff.add(staffMember);
}

/**
 * Print a list of all currently stored items to the
 * text terminal.
 */
public void list()
{
    for(Staff s : staff) {
        s.print();
        System.out.println();   // empty line between items
    }
}

public void printStaff()
{
    for(Staff s : staff){

        id = Doctor.getId();//This is where I'm getting the error.

        if(true)
        {
            s.print();
        }
    }
} 
```

这是我的员工课。

```
public class Staff
{
    private String name;
    private int staffNumber;
    private String office;
    private String id;

/**
 * Initialise the fields of the item.
 * @param theName The name of this member of staff.
 * @param theStaffNumber The number of this member of staff.
 * @param theOffice The office of this member of staff.
 */
public Staff(String staffId, String theName, int theStaffNumber, String theOffice)
{
    id = staffId;
    name = theName;
    staffNumber = theStaffNumber;
    office = theOffice;
}

public String getId()
{
   return this.id;
}

/**
 * Print details about this member of staff to the text terminal.
 */
public void print()
{
    System.out.println("ID: " + id);
    System.out.println("Name: " + name);
    System.out.println("Staff Number: " + staffNumber);
    System.out.println("Office: " + office);

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:55:59.763

您正在调用该方法，就好像它是静态的一样，因为您使用类名来调用它：`Doctor.getId()`。

You'll need an instance of the class `Doctor` to call the instance methods.

Perhaps you intend to call `getId` on the `s` (instance of Staff) in the loop?

# postgresql - 使用登录（用户）创建 PostgreSQL 9 角色只是为了执行功能

> ID：12712235
> 
> 赞同：6
> 
> 时间：2012-10-03T15:54:29.073
> 
> 标签：postgresql

我多年来一直在寻找这个，我在网上尝试了一切，但没有成功。

我可以在 MSSQL 中做到这一点，但我没有找到在 PostgreSQL 中做到这一点的方法。

我想要实现的只是创建一个不能创建、删除或更改数据库、函数、表或其他任何内容的登录角色。只需选择特定的功能。

例如，如果我有一个名为 customerer 的表和两个名为的函数`return_customers()`，而`return_time()`我只想要一个能够选择`return_customers()`和登录的角色`select return_time()`。仅此而已。

非常感谢您支持这个有用的网站！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T16:06:10.893

执行此连接到您要配置的数据库。

```
-- Create the user.
CREATE ROLE somebody WITH LOGIN PASSWORD '...';

-- Prevent all authenticated users from being able to use the database,
-- unless they have been explicitly granted permission.
REVOKE ALL PRIVILEGES ON DATABASE foo FROM PUBLIC;
REVOKE ALL PRIVILEGES ON ALL TABLES IN SCHEMA public FROM PUBLIC;
REVOKE ALL PRIVILEGES ON ALL FUNCTIONS IN SCHEMA public FROM PUBLIC;
REVOKE ALL PRIVILEGES ON ALL SEQUENCES IN SCHEMA public FROM PUBLIC;

-- Allow the user to only use the specified functions.
GRANT CONNECT ON DATABASE foo TO somebody;
GRANT EXECUTE ON FUNCTION return_customers(), return_time() TO somebody; 
```

如果您有比“公共”更多的模式，那么您需要将它们添加到两个`REVOKE ALL PRIVILEGES ON ALL ...`语句中。

不要忘记函数必须是用这个用户[创建的，`SECURITY DEFINER`](http://www.postgresql.org/docs/current/static/sql-createfunction.html)否则这个用户仍然无法执行它们，因为函数的内容将以这个用户的权限执行，而不是创建函数的用户。

看：

*   [`CREATE FUNCTION`](http://www.postgresql.org/docs/current/static/sql-createfunction.html)特别`SECURITY DEFINER`
*   [`GRANT`](http://www.postgresql.org/docs/current/static/sql-grant.html)既用于将用户添加到角色，也用于分配对表、序列等的访问权限
*   [`REVOKE`](http://www.postgresql.org/docs/current/static/sql-revoke.html)
*   [`CREATE ROLE`](http://www.postgresql.org/docs/current/static/sql-createrole.html)

# c++ - Eclipse CDT 语法着色问题

> ID：12712236
> 
> 赞同：1
> 
> 时间：2012-10-03T15:54:29.260
> 
> 标签：c++, syntax-highlighting, eclipse-cdt, ubuntu-12.04

首先，我在 Ubuntu 12.04 上运行 Eclipse 3.7.2 Build: M20120208-0800（使用 eclipse-* 包安装）。我已经应用了所有可用的更新，但仍然看到下面描述的问题......

当我打开一个 C++ 文件（*.h 或 *.cpp）时，它会正确突出显示文件中的所有对象名称，但如果我向文件中添加新代码，Eclipse 将不会对新代码行应用着色。但是，如果我重新启动 Eclipse，新代码将正确着色。

索引器似乎也正常工作，因为代码完成似乎工作正常。日志看起来也很干净。有没有人见过这种行为？是否有重置 Eclipse 以纠正此问题的好方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:53:53.973

我对这个问题的解决方案是为 Ubuntu 12.04 重新安装 eclipse 包。我的语法高亮回来了！

# java - 什么原因导致：javax.xml.ws.soap.SOAPFaultException：签名未成功验证？

> ID：12712247
> 
> 赞同：0
> 
> 时间：2012-10-03T15:55:04.490
> 
> 标签：java, jax-ws

我正在使用带有由 JAXWS 生成的客户端的 Web 服务，现在出现此错误：

```
Caused by: javax.xml.ws.soap.SOAPFaultException: Signature was not validated successfully
    at com.sun.xml.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:193)
    at com.sun.xml.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:126)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:123)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:93)
    at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:144) 
```

我在这个问题上找不到任何有用的东西。这是工作，然后停止工作。我需要知道的是什么条件会导致这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:23:26.447

原来这是 SAML 令牌的问题。我们有多个服务器，我们需要使用不同的服务器。

# c# - 在 C# 中的配置文件之间切换

> ID：12712249
> 
> 赞同：1
> 
> 时间：2012-10-03T15:55:11.257
> 
> 标签：c#, app-config, configuration-files

这里我有两个`config`文件，我需要在这些`config`文件之间切换`C#`

例子：

1.  `app.config`
2.  `address.config`

我需要在运行时从更改`app.config`为`address.config`获取数据。

我尝试了以下代码：

```
System.Configuration.Configuration config
    = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
        config.AppSettings.File = runtimeconfigfile;
        config.Save(ConfigurationSaveMode.Modified);
        ConfigurationManager.RefreshSection("appSettings"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:21:14.123

这应该有效：

```
ExeConfigurationFileMap fileMap = new ExeConfigurationFileMap() { ExeConfigFilename = strConfigPath };
Configuration configuration = ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None); 
```

当您想切换文件时，您可以更改 ExeConfigFileName，并再次打开映射配置。

# java - 是否可以将对象作为参数从一个 Java 程序传递给另一个程序？

> ID：12712252
> 
> 赞同：-5
> 
> 时间：2012-10-03T15:55:20.637
> 
> 标签：java

我有搜索对象并将其发送到另一个程序的程序。

我需要传递整个对象。

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T15:57:38.993

如果你真的是指“另一个程序”（相对于另一个类），你需要

*   要么显式[序列化](http://en.wikipedia.org/wiki/Serialization#Java)它并通过文件传递它（效率不高，但程序链接在 *nix 上很常见）
*   或通过[Remote Procedure Call](http://en.wikipedia.org/wiki/Remote_procedure_call)传递它。有很多解决方案，比如旧的 RMI。我个人喜欢[protobuf](http://code.google.com/p/protobuf/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T15:57:57.003

是的，这是可能的，通过支持远程过程调用的机制，例如[RMI](http://en.wikipedia.org/wiki/Java_remote_method_invocation)和[JINI](http://en.wikipedia.org/wiki/Jini)（现在称为[Apache River](http://river.apache.org/)）。

您还可以通过类服务器将传递的对象的类定义提供给其他程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:02:36.627

如果您真的想将对象从一个 java 进程传递到另一个进程，则必须序列化对象，然后通过网络发送它。

有很多方法可以序列化 java 对象。第一个也是最简单的一个是将class标记为`implements Serializable`并使用java内置的序列化机制。您还可以使用 XML、JSON 或其他格式序列化对象。您的选择可能取决于系统的其他要求，包括您要发送的类型的复杂性。

还有很多方法可以通过网络发送对象。例如，您可以使用套接字实现您自己的客户端-服务器对。您也可以使用网络服务。

我希望这些技巧能让您第一次阅读更多内容。那么欢迎您提出更具体的问题。

# scala - 定义类时，scala REPL 是如何工作的？

> ID：12712254
> 
> 赞同：1
> 
> 时间：2012-10-03T15:55:26.677
> 
> 标签：scala, read-eval-print-loop

如果我打开 Scala REPL，我注意到我可以创建类。

我的问题是：

*   当有类定义时，REPL 会做什么？
*   它编译类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:00:46.527

REPL 不是通常意义上的解释器，因为它从不直接执行代码。你在 REPL 中输入的代码总是被编译的，类定义也是如此。

# azure - Azure 中的 ArgumentOutOfRangeException 来自 System.Web.HttpCachePolicy.UtcSetLastModified (DateTime utcDate)

> ID：12712256
> 
> 赞同：8
> 
> 时间：2012-10-03T15:55:38.450
> 
> 标签：azure, utc

最近在 Azure 中部署的一个项目开始每天抛出两三个这样的异常。我的调查表明，这通常是由具有未来时间戳的程序集引起的，通常是由部署到其他时区的机器引起的（[这是一个很好的资源](http://blog.brianhartsock.com/2009/02/21/systemargumentoutofrangeexception-at-systemwebhttpcachepolicyutcsetlastmodifieddatetime-utcdate/)）。在该应用程序上线的一年+之前，我们还没有遇到过这个问题，它收到的流量比少数例外情况所暗示的要多得多。

我在启用远程桌面的情况下重新部署并检查了我们的 dll 的时间戳以及 \Windows\Microsoft.NET 和 \Windows\assembly 目录的内容，但没有找到任何“未来”时间戳。在这一点上，我被困住了，我会很感激你的想法。

堆栈跟踪：

> System.ArgumentOutOfRangeException：指定的参数超出了有效值的范围。参数名称： utcDate at System.Web.HttpCachePolicy.UtcSetLastModified(DateTime utcDate) at System.Web.HttpCachePolicy.SetLastModified(DateTime date) at System.Web.UI.Page.InitOutputCache(OutputCacheParameters cacheSettings) at System.Web.UI.Page .ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 在 System.Web.UI.Page.ProcessRequest() 在 System.Web.UI.Page.ProcessRequest(HttpContext context) 在 System.Web.Mvc.OutputCacheAttribute.OnResultExecuting(ResultExecutingContext filterContext) 在System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter（IResultFilter 过滤器，ResultExecutingContext preContext，Func`1 continuation) at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 续）在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 个过滤器，ActionResult actionResult) 在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass27.b__24(IAsyncResult asyncResult) 在 System.Web.Mvc.AsyncController.<>c__DisplayClass19.b__14(IAsyncResult asyncResult) 在 System.Web.Mvc .Async.AsyncResultWrapper.<>c__DisplayClass4.b__3(IAsyncResult ar) at System.Web.Mvc.AsyncController.EndExecuteCore(IAsyncResult asyncResult) at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass4.b__3(IAsyncResult ar) at System .Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.b__4(IAsyncResult asyncResult) at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass4.b__3(IAsyncResult ar) at System.Web.HttpApplication.CallHandlerExecutionStep.System .Web.HttpApplication.IExecutionStep.Execute() 在 System.Web。HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T07:25:21.130

时区问题在 Azure 环境中确实很头疼，所以我建议你添加一个启动任务并更改 Azure 环境的时区。我并不是说这会解决您的问题，但尝试一下不会有什么坏处吗？更改 Azure 环境的时区：

1) 另存`tzutil /s "Pacific Standard Time"`为 .cmd 并将文件包含到您的项目中。

2) 在文件的属性屏幕中，选择“始终复制”作为“复制到输出”选项，选择“无”作为构建操作。

3) 将以下内容添加到您的 ServiceDefinition 文件中：

```
<Startup>
    <Task commandLine="nameOfFileYouCreated.cmd" executionContext="elevated" />
</Startup> 
```

4）当然，在您的项目中调整您的 DateTime 引用，您不必处理转换等。

# web-services - WebLogic 不验证 web 服务中的 minOccurs="1"

> ID：12712257
> 
> 赞同：1
> 
> 时间：2012-10-03T15:55:44.177
> 
> 标签：web-services, weblogic, xml-validation

我的 WebService 部署在 WebLogic 10.3.3 上。

WSDL/XSD 将输入参数描述`number`为强制：

`<xs:element minOccurs="1" maxOccurs="1" name="number" type="xs:int"/>`

`MinOccurs="1"`意味着 XML 消息必须包含`<number>`标签，不是吗？

我希望 WebLogic 必须验证所有请求，并且当请求无效时应该抛出服务器错误响应。

不幸的是，我的 SOAP 客户端能够发送没有`<number>`标签的 SOAP 请求，而我的 web 服务实现接收到这样一个无效请求。

请告诉我，这是正确的行为还是 WebLogic 中的缺陷？

我的网络服务应该执行它自己的 XML 验证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:58:13.567

默认情况下，WebLogic 没有启用 XSD 架构验证。您可以通过向 Web 服务 @SchemaValidation 添加注释来启用它（确保它是 com.sun.xml.ws.developer 版本，而不是 com.sun.xml.ws.internal.developer）。但是，如果您有一个复杂的 XSD 模式（例如，GS-1 XSD 模式有问题），这种验证就不能很好地工作。我认为这与 weblogic 使用的 xml 文件的 xercex 解析器有关，因为它不能总是找到所有元素，但是到目前为止我无法深入了解它。它适用于简单的模式。

如果您需要验证复杂的模式，最好编写自己的验证器并将其添加到 WS 消息处理程序。这是一项相当多的工作，但是您可以完全控制它，到目前为止我还没有找到其他解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T00:23:52.937

看看我的回答[这里](https://stackoverflow.com/a/28070130/3231778)有一个类似的情况。

正如已经指出的，您可以使用提供的`@SchemaValidation`注释告诉 WebLogic 为您验证消息。

# php - 如何使用 appfog 服务配置 cakephp 2.2 数据库连接

> ID：12712258
> 
> 赞同：0
> 
> 时间：2012-10-03T15:55:47.297
> 
> 标签：php, cakephp, cakephp-2.0, appfog

我在使用 appfog 服务配置 cakephp 数据库连接时遇到了一些问题。

AppFog 像这样通过 VCAP_SERVICES 变量提供 JSON 数据库配置

```
 {
    "mysql-5.1" =     (
                {
            credentials =             {
                host = "ap01-user01.c0ye1hvnkw6z.ap-southeast-1.rds.amazonaws.com";
                hostname = "ap01-user01.c0ye1hvnkw6z.ap-southeast-1.rds.amazonaws.com";
                name = ?????????????;
                password = ????;
                port = 3306;
                user = ?????;
                username = ???????????;
            };
            label = "mysql-5.1";
            name = "???????-mysql-56200";
            plan = free;
            tags =             (
                mysql,
                "mysql-5.1",
                relational
            );
        }
    ); } 
```

在像这样的 cakephp 数据库配置文件中

```
public $default = array(
        'datasource' => 'Database/Mysql',
        'persistent' => false,
        'host' => $mysql_config["hostname"],
        'login' => $mysql_config["username"],
        'password' => $mysql_config["password"],
        'database' => $mysql_config["name"],
        'prefix' => '',
        //'encoding' => 'utf8',
    ); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:44:44.127

您需要将 json 解析为一个数组（如果您只有一个 mysql db 绑定到应用程序，如果您有更多，则需要将“0”更改为另一个数字以反映第二个绑定的 mysql 服务）：

```
$services = getenv("VCAP_SERVICES");
$services_json = json_decode($services,true);
$mysql_config = $services_json["mysql-5.1"][0]["credentials"];

public $default = array(
    'datasource' => 'Database/Mysql',
    'persistent' => false,
    'host' => $mysql_config["hostname"],
    'login' => $mysql_config["user"],
    'password' => $mysql_config["password"],
    'database' => $mysql_config["name"],
    'port' => $mysql_config["port"],
    'prefix' => '',
    //'encoding' => 'utf8',
); 
```

以上将“用户名”更改为“用户”，基本上遵循appfog对Wordpress所做的前提：[https ://github.com/appfog/af-php-wordpress/blob/master/wp-config.php](https://github.com/appfog/af-php-wordpress/blob/master/wp-config.php)

# iphone - 在 iOS 上存储身份验证令牌

> ID：12712260
> 
> 赞同：23
> 
> 时间：2012-10-03T15:55:55.177
> 
> 标签：iphone, ios, xcode, security, authentication

我正在构建一个 iOS 应用程序，并且用户使用我的 Web 服务进行身份验证。我不希望他们每次启动应用程序时都登录（令牌持续一个月）。所以我想把它缓存在设备上的某个地方。

安全地执行此操作的最佳方法是什么？

我可以仅仅依靠应用程序保持暂停状态并将令牌保存在“内存”中吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-03T19:20:39.287

2 个选项

*   利用[NSUserdefault](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)（存储为访问令牌或文本字段输入[记住我选项]）
*   完成这项工作的钥匙串访问（推荐）。

NSUserdefaults 对于存储此类用于身份验证的可信值是不安全的。另一方面，钥匙串是为了做到这一点，安全可靠的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-03T15:59:26.743

您不能相信 iOS 会将您的应用程序永远保存在内存中。因此，您必须在某个时候将令牌保存到持久存储中。

查看[适用于 iOS 的钥匙串服务](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)。这是存储密码、令牌和其他密钥等内容的最佳位置。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-17T21:39:23.900

你不能“安全”地做到这一点。令牌是公共知识，一旦它在您的设备上，无论您尝试采取什么措施来保护它，黑客都可以访问它。把它放在钥匙串里不会改变这个事实。即使您将它存储在那里，这样可以确保它在其中时安全，他们也可以简单地等到它过期，然后在下次通过电线进入时阻止下一个。您的访问令牌不是您需要担心的安全问题，因为实际上您无法在移动环境中这样做。

这意味着您可以将其存储在您想要的任何地方。NSUserDefaults 很好，钥匙串很好，数据库很好，文档目录中的文本文件很好。所有这些都同样安全，因为坚定的黑客可以简单地等待合适的机会来访问他们想要的数据。相反，您应该担心保护用户的身份验证凭据。确保将它们存储在钥匙串中，并且只通过 HTTPS 与您的 API 与具有有效 SSL 证书的服务器通信。

# javascript - 使用 easyxdm 的主干模型覆盖获取

> ID：12712262
> 
> 赞同：0
> 
> 时间：2012-10-03T15:55:59.567
> 
> 标签：javascript, backbone.js

我正在尝试使用easyXDM覆盖主干模型获取功能，使用easyXDM的原因是因为服务器位于不同的域中。

这是获取代码：

```
 fetch: function(options)
     {
        model = this;
        a = true;
        this.xhr.request({
           url: "http://server.dev:9000/users/" + this.id,
           method: "GET"
        }, function(response){
           console.log(response.data);

           var jsonResponse = JSON.parse(response.data);

           if (jsonResponse.status == 'success'){
             model.set({
                firstName : jsonResponse.data.first_name,
                lastName :   jsonResponse.data.last_name,
                email : jsonResponse.data.email,
                companyName : jsonResponse.data.company.name,
                companyId : jsonResponse.data.company.id
             }) 
           }
        });

     } 
```

这是控制器上获取模型的代码

```
 var user = new UserModel({id : id});
    user.fetch();
    alert(user.get('firstName')); // display undefined 
```

所以问题是每当我调用 fetch 时，模型仍然没有被填充。我在想，因为 easyXDM 请求是异步的，所以它还没有填充。无论如何要确保模型已填充并可以使用？也许使用回调，关于如何创建回调的任何方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:57:34.537

对不起，我最初误解了你的问题。无论是否使用 easyXDM，Fetch 都是异步的，因此您必须实现 fetch 的 onsuccess 回调，或者在对其进行任何操作之前检查模型是否已设置（使用长度或其他方法）。这篇文章也可能有所帮助：

[Backbone.js：检查数据是否准备好以及数据集是否为空的优雅方法](https://stackoverflow.com/questions/10016562/backbone-js-elegant-way-to-check-if-data-ready-and-if-the-dataset-is-empty)

# jquery - jquery的可关闭列表项

> ID：12712263
> 
> 赞同：0
> 
> 时间：2012-10-03T15:56:06.903
> 
> 标签：jquery, css

我是 jQuery 的新手..我希望创建一个 ul 列表（内联），除了每个列表项之外，它还有一个关闭标记 X，单击时应该删除该列表项（或关闭/隐藏它）...

例如：我想要在 stackoverflow 上向问题添加标签时出现的相同效果。我们可以通过单击除每个标签之外的 X 来删除选定的标签

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:08:02.943

像这样？：http: [//jsfiddle.net/s8rzu/1/](http://jsfiddle.net/s8rzu/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:11:52.497

看看我刚刚制作的这个例子：http: [//jsfiddle.net/ZDgSX/1/](http://jsfiddle.net/ZDgSX/1/)。

有很多方法可以给这只猫剥皮，但我可能会这样做，创建一个基本列表：

```
<ul>
    <li>Apple</li>
    <li>Banana</li>
    <li>Pear</li>
    <li>Orange</li>
</ul> 
```

然后，使用 jquery .append() 函数，在每个列表项的末尾添加一个链接，如下所示：

```
$('ul li').append(' <span>[<a href="#">X</a>]</span>'); 
```

这样一来，没有 javascript 的人将无法点击对他们没有任何帮助的链接。

然后，您基本上需要做的就是为“X”链接创建一个点击事件，然后从 DOM 中删除 li 元素。

```
$('ul span a').on('click', function(){
    $(this).closest('li').remove();
}); 
```

[一开始有很多事情要弄清楚，但是阅读jquery](http://jquery.com)文档是更详细地了解这些函数（以及更多）功能的好方法。

# mockito - 部分模拟被认为是不好的做法？（模仿）

> ID：12712266
> 
> 赞同：2
> 
> 时间：2012-10-03T15:56:09.497
> 
> 标签：mockito, partial-mocks

我正在使用 Mockito 对业务对象进行单元测试。业务对象使用通常从数据库获取数据的 DAO。为了测试业务对象，我意识到使用单独的内存 DAO（将数据保存在 HashMap 中）比编写所有

```
when(...).thenReturn(...) 
```

陈述。为了创建这样的 DAO，我首先部分模拟了我的 DAO 接口，如下所示：

```
when(daoMock.getById(anyInt())).then(new Answer() {
    @Override
    public Object answer(InvocationOnMock invocation) throws Throwable {
        int id = (Integer) invocation.getArguments()[0];
        return map.get(id);
    }
}); 
```

但我突然想到，自己实现一个全新的 DAO 实现（使用内存中的 HashMap）甚至不使用 Mockito（无需从 InvocationOnMock 对象中获取参数）并让测试的业务对象使用这个新的更容易道。

此外，我读过部分模拟被认为是不好的做法。我的问题是：就我的情况而言，我正在做的事情是不好的做法吗？有什么缺点？对我来说这似乎没问题，我想知道潜在的问题可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T19:07:11.157

我想知道为什么你需要你的假 DAO 由`HashMap`. 我想知道您的测试是否太复杂。我非常喜欢使用非常简单的测试方法，每种方法都可以测试 SUT 行为的一个方面。原则上，这是“每个测试一个断言”，尽管有时我会得到少量的实际`assert`或`verify`行，例如，如果我断言一个复杂对象的正确性。请阅读[http://blog.atrumfutura.com/2009/02/unit-testing-one-test-one-assertion-why-it-works/](http://blog.astrumfutura.com/2009/02/unit-testing-one-test-one-assertion-why-it-works/)或[http://blog.jayfields.com/2007/06/testing -one-assertion-per-test.html](http://blog.jayfields.com/2007/06/testing-one-assertion-per-test.html)以了解有关此原理的更多信息。

所以对于每种测试方法，你不应该一遍又一遍地使用你的假 DAO。可能只有一次，最多两次。因此，在`HashMap`我看来，拥有大量数据似乎是多余的，或者表明您的测试做得比它应该做的要多。对于每种测试方法，您实际上应该只需要一两项数据。如果您使用 DAO 接口的 Mockito 模拟设置这些，并将您`when ... thenReturn`的测试方法本身放入，每个测试都将简单易读，因为特定测试使用的数据将立即可见。

您可能还想阅读“安排、行动、断言”模式（[http://www.arrangeactassert.com/why-and-what-is-arrange-act-assert/](http://www.arrangeactassert.com/why-and-what-is-arrange-act-assert/)和 http://www.arrangeactassert.com/why-and-what-is-arrange-act-assert/和[http://www. telerik.com/help/justmock/basic-usage-arrange-act-assert.html](http://www.telerik.com/help/justmock/basic-usage-arrange-act-assert.html)）并注意在每个测试方法中实现此模式，而不是将其不同部分分散在您的测试类中。

如果没有看到更多的实际测试代码，很难知道给你什么其他建议。Mockito 应该让嘲笑更容易，而不是更难；所以如果你有一个测试没有发生在你身上，那么肯定值得问问你是否在做一些非标准的事情。您所做的不是“部分嘲弄”，但对我来说，这确实像是一种测试气味。尤其是因为它将您的许多测试方法结合在一起 - 问问自己，如果您必须更改`HashMap`.

您可能会发现[https://softwareengineering.stackexchange.com/questions/158397/do-large-test-methods-indicate-a-code-smell](https://softwareengineering.stackexchange.com/questions/158397/do-large-test-methods-indicate-a-code-smell)也很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:52:38.873

在测试我的课程时，我经常使用 Mockito 制作的模拟和假货的组合，这正是你所描述的。在您的情况下，我同意虚假的实现听起来更好。

部分模拟并没有什么特别的问题，但是它使确定何时调用真实对象以及何时调用模拟方法变得更加困难——尤其是因为 Mockito 默默地无法模拟最终方法。对原始类的看似无辜的更改可能会更改部分模拟的实现，从而导致您的测试停止工作。

如果你有灵活性，我建议提取一个暴露你需要调用的方法的接口，这样无论你选择mock还是fake都会更容易。

要编写一个假的，使用一个简单的类（如果你愿意，可以嵌套在你的测试中）实现那个没有 Mockito 的小接口。这将很容易看到正在发生的事情；缺点是如果你写了一个非常复杂的 Fake，你可能会发现你也需要测试 Fake。如果你有很多测试可以使用一个好的 Fake 实现，那么这可能值得额外的代码。

我强烈推荐Martin Fowler 的一篇文章[“Mocks are not Stubs” （以他的书](http://martinfowler.com/articles/mocksArentStubs.html)*Refactoring*闻名）。他回顾了不同类型的测试替身的名称，以及它们之间的区别。

# php - 为什么我应该对通过 GET 传递的 URL 进行 urlencode

> ID：12712267
> 
> 赞同：2
> 
> 时间：2012-10-03T15:56:10.473
> 
> 标签：php, html, url, get, urlencode

假设我这样做

```
http://site.com/something?url=http://lol.com/lol 
```

这样做有什么好处（例如安全性等）

```
'http://site.com/something?url=' . urlencode('http://lol.com/lol'); 
```

而不是仅仅传入一个未编码版本的url？为什么我应该对通过 GET 传递的东西进行 urlencode 编码，而不是只传递未编码的版本（当然，如果 url 参数中有 & 或 ? 或 = ，那么我肯定应该对其进行编码......但假设他们没有，为什么应该我对它们进行编码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:57:54.180

URL 中有一些具有特殊含义的字符。如果您在未编码的情况下传递这些字符，则这些字符在外部 URL（而不是它们所属的内部 URL）中将具有特殊含义。

例如，如果你想通过

```
http://example.com/foo?1=2&3=4 
```

而且您不对其进行编码，那么您将得到：

```
http://example.com/?url=http://example.com/foo?1=2&3=4 
```

和

```
url is http://example.com/foo?1=2
3 is 4 
```

> 假设他们没有，我为什么要对它们进行编码

因为那时您必须查看您传递的每个 URL 以决定它是否需要编码。

总是编码更简单，更不容易出错，然后根据具体情况进行决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:02:27.300

只要我知道如果您有可能在您的 url 中使用 unicode 字符，第二个示例就很好。

# riak - 如何在 riak map/reduce 中格式化返回的数据

> ID：12712268
> 
> 赞同：0
> 
> 时间：2012-10-03T15:56:14.783
> 
> 标签：riak

我试图让 riak 返回特定数据而不是密钥。

我从快速通道介绍开始。我找不到检索正确数据的方法。

我正在尝试这个查询（[从这里](http://wiki.basho.com/Loading-Data-and-Running-MapReduce-Queries.html)）：

```
{"inputs":"goog",
 "query":[{"map":{"language":"javascript",
                  "source":"function(value, keyData, arg) { var data = Riak.mapValuesJson(value)[0]; if(data.High && parseFloat(data.High) > 600.00) return [value.key]; else return [];}",
                  "keep":true}}]
} 
```

我正在尝试检索一系列对象，例如`{"Date":"YYYY-MM-DD","Open":123,"Close":123,"Volume":12345}`.

怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:53:14.750

在传递给映射阶段的函数中，如果不满足条件，则返回键 ([value.key]) 或不返回任何内容 ([])。这就是为什么您只看到键的原因。

如果您改为将 [value.key] 更改为 [data]，您应该会看到返回的记录的实际数据。

如果该函数改为返回 [value]，则将返回记录的完整标识符（存储桶和键），并且可以在此之后链接其他映射阶段函数。这将允许进一​​步处理，并可能更容易重用过滤。如果您在处理结束时仍想获取返回记录的数据，则有一个现有函数可以做到这一点。规格如下：

{"map":{"language":"erlang","module":"riak_kv_mapreduce","function":"map_object_value"}}

# drupal-7 - drupal 7 使用钩子禁用 nolink 菜单项

> ID：12712272
> 
> 赞同：0
> 
> 时间：2012-10-03T15:56:26.767
> 
> 标签：drupal-7, drupal-modules

我使用带有超级鱼的 Drupal 7。

我为登录用户和匿名用户使用一个菜单。

如果页面具有登录角色，Superfish 不会显示指向匿名用户的链接。

但是父菜单项有。

因此，drupal 为匿名用户显示 4 个 nolink 菜单项并且没有子项。

当用户未登录时，如何以编程方式禁用 4 菜单项？

我想到了 hook_menu_alter，但我不知道 nolink 菜单项的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:07:34.377

使用每个角色模块的菜单，我可以显示/隐藏菜单项/角色，

[http://drupal.org/project/menu_per_role](http://drupal.org/project/menu_per_role)

它有效，但他们说这不是最终版本。

# c# - 创建一个动态更改其内容的 WPF 按钮

> ID：12712275
> 
> 赞同：0
> 
> 时间：2012-10-03T15:56:39.267
> 
> 标签：c#, wpf, xaml, wpf-controls

我创建了一个具有 3 种状态（正常、单击、禁用）的自定义 WPF 按钮。对于每个州，我都有不同的形象。我在项目的不同位置使用这个通用按钮，每次我使用 .CS 文件中的属性加载不同的图像时。

```
<Button.Resources>
    <ImageSource x:Key="Normal">..\Resources\DefaultNormal.png</ImageSource>
    <ImageSource x:Key="Disabled">..\Resources\DefaultDisabled.png</ImageSource>
    <ImageSource x:Key="Pressed">..\Resources\DefaultPressed.png</ImageSource>
</Button.Resources>
<Button.Template>
    <ControlTemplate TargetType="{x:Type Button}">
        <Grid>
            <Image Name="normal" Source="{DynamicResource Normal}" Stretch="Fill"/>
            <Image Name="pressed" Source="{DynamicResource Pressed}" Stretch="Fill" Visibility="Hidden"/>
            <Image Name="disabled" Source="{DynamicResource Disabled}" Stretch="Fill" Visibility="Hidden"/>
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="IsPressed" Value="True">
                <Setter TargetName="normal" Property="Visibility" Value="Hidden"/>
                <Setter TargetName="pressed" Property="Visibility" Value="Visible"/>
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter TargetName="normal" Property="Visibility" Value="Hidden"/>
                <Setter TargetName="disabled" Property="Visibility" Value="Visible"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</Button.Template> 
```

现在我想对按钮的文本/内容做同样的事情，但我找不到类似于`ImageSource`文本的东西。有类似的东西吗？还是有不同的方法来动态更改文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:05:05.760

看起来您只需要在控件模板中添加一个新元素；然后您可以在触发器中访问它。

```
<ControlTemplate TargetType="{x:Type Button}">
    <Grid>
        <Image Name="normal" Source="{DynamicResource Normal}" Stretch="Fill"/>
        <Image Name="pressed" Source="{DynamicResource Pressed}" Stretch="Fill" Visibility="Hidden"/>
        <Image Name="disabled" Source="{DynamicResource Disabled}" Stretch="Fill" Visibility="Hidden"/>
        <TextBlock Name="text" Text="{TemplateBinding Content}" VerticalAlignment="Center" HorizontalAlignment="Center" />
    </Grid>
    <ControlTemplate.Triggers>
        <Trigger Property="IsPressed" Value="True">
            <Setter TargetName="normal" Property="Visibility" Value="Hidden"/>
            <Setter TargetName="pressed" Property="Visibility" Value="Visible"/>
            <Setter TargetName="text" Property="Text" Value="Pressed :)"/>
        </Trigger>
        <Trigger Property="IsEnabled" Value="False">
            <Setter TargetName="normal" Property="Visibility" Value="Hidden"/>
            <Setter TargetName="disabled" Property="Visibility" Value="Visible"/>
            <Setter TargetName="text" Property="Text" Value="Disabled :("/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

在这里，我`TextBlock`在图像上添加了一个，并更改了按下/禁用状态的文本。

* * *

如果您想将文本字符串作为资源添加到控件中，请使用`System`命名空间来引用该`String`类型。 `xmlns:clr="clr-namespace:System;assembly=mscorlib`

```
<Button.Resources>
    <clr:String x:Key="NormalText">Normal</clr:String>
    <clr:String x:Key="DisabledText">Disabled</clr:String>
    <clr:String x:Key="PressedText">Pressed</clr:String>
</Button.Resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:07:47.937

尝试这个：

1）添加到命名空间：

```
xmlns:system="clr-namespace:System;assembly=mscorlib" 
```

2）添加到资源这个条目：

```
<system:String x:Key="myMessage">Button state: clicked!</system:String> 
```

现在您可以在`TextBlock`Text 属性中使用“myMessage”或作为`Button`内容：

```
<Button Content="{StaticResource myMessage}" /> 
```

# mysql - 子查询匹配时更新表

> ID：12712276
> 
> 赞同：0
> 
> 时间：2012-10-03T15:56:42.167
> 
> 标签：mysql

我正在尝试此查询，但它在子查询中输出语法错误。

问题是什么，如何解决？谢谢

```
 UPDATE CompradorCategorias_new as A
    SET A.idParent=(
        SELECT idcategoria 
        FROM categoriasi18n_new
        WHERE 
        (
            SELECT SUBSTRING_INDEX(NomeComPath, '>', 2) 
            FROM CompradorCategorias_new
            = 
            SELECT translationWithPath 
            FROM categoriasi18n_new
        )
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:01:56.790

在子句*之前*，您的查询中的一切看起来都很好`WHERE`- 在这一点上，它是各种错误的。您实际上可以删除该块并使用常规`WHERE`子句比较（而不是第二个子查询）：

```
UPDATE
    CompradorCategorias_new AS A
SET
    A.idParent = (
        SELECT
            idcategoria
        FROM
            categoriasi18n_new AS B
        WHERE
            B.translationWithPath = SUBSTRING_INDEX(A.NomeComPath, '>', 2)
    ) 
```

# jquery - JQuery 可排序使表行固定

> ID：12712278
> 
> 赞同：1
> 
> 时间：2012-10-03T15:56:50.730
> 
> 标签：jquery, html, jquery-ui-sortable

我有一个可通过 jquery.sortable() 函数排序的表。目前，表中的所有行都是可排序的，行号存储在该行的隐藏元素中，并在行移动时更新。

问题是我现在有几个表需要前半部分行是可排序的，但后半部分是固定的。除了将它们分成两个单独的表之外，还有其他解决方案吗？

我有以下 HTML：

```
<table cellspacing="0" cellpadding="5px" class="content" id="sort">
  <thead>   
    <tr>
        <td>ID</td>
        <td>Title</td>
        <td>Created By</td>
        <td>Last Modified By</td>
        <td>Visiblity</td>
        <td>Edit</td>
        <td>Copy</td>
        <td>Delete</td>
        <td>Display Order</td>
    </tr>
  </thead>
  <tbody class="ui-sortable">
   <tr class="contentbody">
    <td>1</td>
    <td>content</td>
    <td>content</td>
    <td>content</td>
    <td>content</td>
    <td>content</td>
    <td>content</td>
    <td>content</td>
    <td>content</td>
    <input type="hidden" class="order" id="order_1" name="order_1" value="1">
   </tr>
   <tr>
     More Content
   </tr>
 </tbody>
</table> 
```

我在文档就绪函数中有以下 JQuery：

```
/* table sorting */
    var fixHelper = function(e, ui) {
        ui.children().each(function() {
            $(this).width($(this).width());                  
        });
        return ui;
    };
    var sortable = $("#sort tbody").sortable({
        helper: fixHelper,
        stop: function(event, ui) {
         //create an array with the new order
        order = {}
        $(this).find('input.order').map(function(index, obj)
          { 
            return order[this.id] = index;
          }
        );
        $.ajax({
            type: 'POST',
            url: location.href,
            data: order,
            error: function() {
                console.log("Theres an error with AJAX sorting");
            },
            success: function() {
                /* reload table after sort*/ 
            $.get("indexpage_table.php", function(data) { 
                    $("#sort tbody").html(data); 
            }); 
                console.log("Saved.");      
            }
        });
        return true;
    }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:54:45.000

我在想要移动的行中添加了一个类，如下所示： `var sortable = $("#sort tbody .moveable").sortable({ ...`

而且我只添加了隐藏的输入字段并将光标移动到具有该类的行。

到目前为止它似乎有效！

# c# - 将对象隐式转换为具有一个元素的数组。是否可以？

> ID：12712285
> 
> 赞同：1
> 
> 时间：2012-10-03T15:57:03.860
> 
> 标签：c#, c#-4.0

我可以从 C# 中的一个元素隐式创建一个数组吗？

例如，我有这个方法

```
public void MyMethod(string[] arrayString) 
```

在我的代码中的某个时刻，我有

```
string str = "myStr";
MyMethod(str) 
```

当然，第二个 linhe 是一个错误，因为我正在传递一个字符串，而 MyMethod 需要一个字符串 []。是否有任何干净的方法来调用 MyMethod 而不使用

```
MyMethod(new string[] {str}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T15:58:51.480

如果您使用[`params`](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)数组，这会很好：

```
public void MyMethod(params string[] arrayString)

string str = "myStr";
MyMethod(str) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:01:04.303

我知道的唯一方法是重载方法，这样你也有

```
MyMethod(string)
{
    return MyMethod(new string[] {str});
} 
```

你也许可以用一个`params`数组来做，但我不完全确定如果你尝试传入一个字符串数组而不是多个字符串会如何工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:10:30.110

我只想添加第二个重载`MyMethod`

```
public void MyMethod(string str)
{
    MyMethod(new[]{str});
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T17:07:56.930

为了完整起见，这里有另外几个选项，虽然肯定不推荐 - 我会`params`在接受的答案中使用。

```
MyMethod(Enumerable.Repeat(str, 1).ToArray()); 
```

我有时也看到过这种情况，尽管除非您不知道数组初始值设定项，否则很难证明这一点：

```
T[] MakeArray<T>(params T[] elements)
{
    return elements;
} 
```

如此使用：

```
string[] grades = MakeArray("A", "B", "C", "D", "F", "Incomplete"); 
```

或者，在这种情况下：

```
MyMethod(MakeArray(str)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T16:00:04.610

扩展方法怎么样？

```
public static T[] WrapInArray<T>(this T t)
{
    return new T[]{ t };
} 
```

# iphone - 使用 Facebook iOS SDK 3.0 安排帖子

> ID：12712287
> 
> 赞同：1
> 
> 时间：2012-10-03T15:57:10.537
> 
> 标签：iphone, ios, ipad, facebook-graph-api

我在 iOS 上使用 Facebook SDK 3.0 来尝试将帖子安排到个人资料或页面。当我尝试不安排时，一切正常。但是，当我把以下

```
//scheduleDate is a NSDate between the range 10 minutes - 6 months from now
NSString *timestamp = [NSString stringWithFormat:@"%.0f", [scheduleDate timeIntervalSince1970]];
[requestToPost.parameters setObject:timestamp forKey:@"scheduled_publish_time"]; 
```

我收到**错误 400**和**com.facebook.sdk 错误 5**。

任何人都知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:26:55.930

Facebook 正在[逐步淘汰](https://developers.facebook.com/docs/reference/api/page/#offers)页面的预定帖子。

> 2012 年 9 月：要发布优惠，还必须创建相应的广告并上线。参数`scheduled_publish_time`和`published` 参数已弃用，并将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T10:42:08.437

正如*Alex L*所回答的，来自2012 年 9 月 27 日的[这篇文章的](http://developers.facebook.com/blog/post/2012/09/26/platform-updates--operation-developer-love/)引用`scheduled_publish_time and published parameters will now be silently ignored.`

但是，当您收到错误响应代码`400`时，这意味着

> 400 错误请求。由于语法错误，无法满足请求。[参考这里](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

另一个结果是[here。](http://developers.facebook.com/bugs/409541469083388?browse=search_500884fd030c70b76655054) `published parameter set to false`应该像帖子中所说的那样工作。

就像是 ：

```
[requestToPost.parameters setValue:[NSNumber numberWithBool:FALSE] forKey:@"published"]; 
```

[此处](http://developers.facebook.com/bugs/304012889695797)提供了详细的回复似乎很有帮助。

还发现`scheduled_publish_time`应该是`NSTimeInterval`格式。因此，只有介于两者之间的数字才`0-9`允许 ie`1000.0`并`1000`有所作为。您应该指定`1000`.

**更新：** 有一个应用程序[Facebook Pages Manager](https://itunes.apple.com/us/app/facebook-pages-manager/id514643583?mt=8)具有`scheduled_post`. 所以这个功能仍然有可能由`Facebook`. [这是一个显示相同功能的 YouTube 视频](http://www.youtube.com/watch?v=2r-bPde8Gh0)。我希望您一定会得到解决方案，并且也会提供给我们。还有一些参考。[参考 1](http://www.ilovefreesoftware.com/27/featured/schedule-facebook-status-updates.html) [参考 2](http://www.insidefacebook.com/2012/05/31/facebook-allows-post-scheduling-directly-from-pages-without-third-party-tools/)计划发布允许应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:09:26.593

所以，事实证明我需要在这里注意两件事：

1 - 正如Hemang指出的，**发布**的参数必须定义为NO。所以，设置类似`[requestToPost.parameters setObject:@"0" forKey:@"published"];`

或者

`[requestToPost.parameters setObject:[NSNumber numberWithBool:NO] forKey:@"published"];`在这种情况下是强制性的。

2 - 根据我的测试和文档，安排帖子仅适用于 Facebook 页面，不适用于人员（个人资料）。

此外，值得再次指出的是，日期应该在“现在”之后的 10 分钟到 6 个月之间。

# objective-c - 使不可见字符在 NSTextField 中可见

> ID：12712288
> 
> 赞同：2
> 
> 时间：2012-10-03T15:57:14.720
> 
> 标签：objective-c, cocoa, nstextfield

我有一个 NSTextField，我想让用户有机会使不可见的字符，如空格、回车和制表符可见。不幸的是，我在 Apple 的文档中没有找到关于此的信息。我假设我在寻找它时没有使用正确的术语。

任何线索如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:07:58.113

首先，我会选择一个 NStextView，其中已经为您设置了相关的 NSLayoutManager 和 NSTextStorage 组件。然后，您可以通过执行以下步骤来实现您想要做的事情：

*   子类 NSATSTypesetter 通过覆盖为您想要的任何字符绘制自定义字形：

    ```
    - (void)drawGlyphsForGlyphRange:(NSRange)glyphsToShow atPoint:(NSPoint)origin - (NSRect)boundingBoxForControlGlyphAtIndex:(NSUInteger)glyphIndex forTextContainer:(NSTextContainer *)textContainer    proposedLineFragment:(NSRect)proposedRect    glyphPosition:(NSPoint)glyphPosition    characterIndex:(NSUInteger)charIndex 
    ```

`*   Subclass NSLayoutManager and set its type setter with the above one. Then override:` 

 `-(void)drawGlyphsForGlyphRange:(NSRange)glyphsToShow atPoint:(NSPoint)origin { [self.typesetter drawGlyphsForGlyphRange:glyphsToShow atPoint:origin];

[super drawGlyphsForGlyphRange:glyphsToShow atPoint:origin];`

}

*   用上面的替换NSTextView的布局管理器：

    [[textView textContainer] replaceLayoutManager:[[[MyLayoutManager alloc] init] autorelease]];

基本上，您必须检查 NSLayoutManager 和 NSATSTypesetter 类以获取与文本自定义绘图相关的任何内容。[这里](https://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/TextLayout/TextLayout.html)还有关于这一切的详细指南。

# javascript - javascript parseInt

> ID：12712289
> 
> 赞同：-3
> 
> 时间：2012-10-03T15:57:16.893
> 
> 标签：javascript, int, var, parseint

> **可能重复：**
> [如何解析带有前导 0 的字符串](https://stackoverflow.com/questions/1545164/how-to-parseint-a-string-with-leading-0)

如果我在 javascript 中 parseInt("01") 它与 parseInt("1") 不一样？？？

```
start = getStartEugene("MN01");
start2 = getStartEugene("MN1");

getStartEugene: function(spot)  //ex: GT01 GT1
{
    var yard = spot.match(/[0-9]+/);
    var yardCheck = parseInt(yard);
    if (yardCheck < 10)
       return "this"+yard;
    else
      return "this0"+yard
} 
```

我希望将某些内容作为 this+2 数字返回，例如 this25、this55、this01、this02、this09

但我不明白。有谁知道为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:59:23.867

您需要添加基数（第二个）参数以指定您使用的是基数为 10 的数字系统...

```
parseInt("01", 10); // 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:35:13.223

发生这种情况是因为 Javascript 将从零开始的数字解释为八进制（以 8 为基数）数字。您可以通过提供将在其中评估字符串的基础来覆盖此默认行为（正如@jondavidjohn 正确指出的那样）。

```
parseInt("10");  // returns 10
parseInt("010"); // returns 8 
```

# c# - 无法加载文件或程序集 ServiceStack.Text 系统找不到指定的文件

> ID：12712293
> 
> 赞同：2
> 
> 时间：2012-10-03T15:57:36.953
> 
> 标签：c#, json, servicestack

我正在尝试在我的 VS2008 C# Windows 服务程序中使用 json 反序列化程序，一旦客户端通过 TCP 向服务发送数据，就会出现上述错误。错误总是发生在：

```
protected virtual void OnDataReceived(DataEventArgs e)
{
EventHandler<DataEventArgs> handler = DataReceived;
  if (handler != null)
  {
    handler(this, e);   <-- error happens here
  }
} 
```

我`ServiceStack.Text`在我的解决方案中包含作为参考并使用了语句`using ServiceStack.Text;` 我使用的唯一代码是：

```
o = JsonSerializer.DeserializeFromString <Dictionary<string, string>>(sAry[2]); 
```

任何建议或方向将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:17:32.860

请搜索“fusion log viewer”并使用它来调查程序集加载失败。

很可能您在构建期间没有将 DLL 复制到 bin 文件夹（属性中应为“复制本地 = true”）或者该程序集依赖于您未正确复制/安装的其他文件。

# css - 在悬停时使用 CSS 从图像中滑出文本

> ID：12712295
> 
> 赞同：1
> 
> 时间：2012-10-03T15:57:39.077
> 
> 标签：css

我试图得到“我有空！”这句话。当我将鼠标悬停在小“+”图像上时，从左侧滑出。我在谷歌上找到的东西没有帮助。

前 -![在此处输入图像描述](../Images/513d4ab6bcf4601804b0c1a2c6d6ba31.png)

我希望它在悬停时做什么![在此处输入图像描述](../Images/92d45d367d4aaea5d2ef94d8ad2dfefb.png)

我也想让那个小“+”号在悬停时侧向转动，但我想我自己有一个想法。不介意帮助:)

如果我可以只用 CSS/HTML 完成所有这些事情，那就太好了。我知道一些 jQuery，但我尽量避免使用它，因为 CSS 更简洁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:44:23.063

如果您希望它在不使用 jquery 的情况下旋转，只需使用 css3 动画属性：

这将使您的加号图标在悬停时旋转 360 度

```
@-webkit-keyframes rotate {
  from {
    -webkit-transform: rotate(360deg);
  }
  to { 
    -webkit-transform: rotate(0deg);
  }
}

@-moz-keyframes rotate {
  from 
  {
      -moz-transform: rotate(360deg);
  }
  to { 
    -moz-transform: rotate(0deg);
  }
}

.plusicon:hover
{
    -webkit-animation-name:             rotate; 
    -webkit-animation-duration:         0.5s; 
    -webkit-animation-iteration-count:  infinite;
    -webkit-animation-timing-function: linear;

    -moz-animation-name:             rotate; 
    -moz-animation-duration:         0.5s; 
    -moz-animation-iteration-count:  infinite;
    -moz-animation-timing-function: linear;
} 
```

您还应该能够使用`-webkit-transition-duration: 1s;`将您的文本移出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:03:01.040

所以你想要某种工具提示。

的HTML：

```
<a href="#">
    <span>I'm available!</span>
</a> 
```

的CSS：

```
a {
    background: url(../path_to_image.png) 0 0 no-repeat; /*you allready have that part */
    position: relative;
}
a span {
    display: none;
    position: absolute;
    left: -10px;
    top: 3px;
}
a:hover span {
    display: block;
} 
```

`<a>`你可以用你有的任何东西替换标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:04:46.763

HTML：

```
<div class="slidebtn">
    <div class="icon">
       <div class="text"><p>I'm Aviable</p></div>
    </div>

</div>​ 
```

CSS：

```
.slidebtn{
    width:140px;
    margin:auto;
    overflow:hidden;
    height:auto;
    position:relative;
}
.text{
   position:absolute;
    width:100px;
    float:Left;
    margin-left:150px;
}
.icon{
    background-image:url('http://cdn1.iconfinder.com/data/icons/icojoy/noshadow/standart/png/24x24/001_01.png');
    width:24px;
    height:24px;
    float:right;
    background-repeat: no-repeat;
    background-position: right;

}
.icon:hover{
    width:130px;
}
.icon:hover .text{
    margin-left:0px;
}
    ​ 
```

[演示](http://jsfiddle.net/afshinprofe/dGFVG/2/)

```
​ 
```

如果你想使用这样的 CSS3 过渡更改样式

```
.text{
   position:absolute;
    width:100px;
    float:Left;
    margin-left:150px;
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    transition: all 1s ease-in-out;
   z-index:-1;
}
.icon{
    background-image:url('http://cdn1.iconfinder.com/data/icons/icojoy/noshadow/standart/png/24x24/001_01.png');
    width:24px;
    height:24px;
    float:right;
    background-repeat: no-repeat;
    background-position: right;
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    transition: all 1s ease-in-out;

} 
```

[演示 2](http://jsfiddle.net/afshinprofe/dGFVG/4/)

# vb.net - 从VB中的给定日期开始计算一年中的第几周

> ID：12712300
> 
> 赞同：10
> 
> 时间：2012-10-03T15:58:05.573
> 
> 标签：vb.net, datetime

在 vb 中，我们可以得到从一月开始计算的周数。ex 1 月 1 日是第 1 周，2 月 1 日是第 5 周，依此类推 .DatePart(DateInterval.WeekOfYear, Now)

我需要从给定日期计算周数。例如：如果将基数设置为 7 月 1 日，那么 7 月 1 日是第 1 周，基于此，10 月 3 日的周数是多少？我怎样才能在VB中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T16:08:17.007

您可以使用[`Calendar.GetWeekOfYear`](http://msdn.microsoft.com/en-us/library/system.globalization.calendar.getweekofyear.aspx#Y0).

这是一个例子

```
Dim dateNow = DateTime.Now
Dim dfi = DateTimeFormatInfo.CurrentInfo
Dim calendar = dfi.Calendar

' using Thursday because I can.
Dim weekOfyear = calendar.GetWeekOfYear(
    dateNow, _
    dfi.CalendarWeekRule, _
    DayOfWeek.Thursday) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:07:06.213

这样的事情应该可以解决问题：

```
Private Function GetWeekNumber(ByVal startMonth As Integer, ByVal startDay As Integer, ByVal endDate As Date) As Integer
    Dim span As TimeSpan = endDate - New Date(endDate.Year, startMonth, startDay)
    Return (CInt(span.TotalDays) \ 7) + 1
End Function 
```

# c++ - C++ 虚拟 boost::any 继承

> ID：12712304
> 
> 赞同：0
> 
> 时间：2012-10-03T15:58:27.340
> 
> 标签：c++, templates, inheritance, boost, virtual

基本上，我正在尝试编写一个包含通用迭代器的基类。

所以显然模板虚函数不起作用，这就是我尝试 boost::any 的原因，但它仍然没有重载 Iterator 的 get() 方法（它不断抛出下面定义的异常）。我似乎也无法将其设为纯虚拟，因为编译器抱怨“虚拟迭代器开始（） = 0；” （它说'无法创建抽象类迭代器的实例'）。

我有非常具体的限制，我必须/想要遵守，因此可能会考虑问题的替代解决方案，但可能无法使用。

这是代码的一部分：

```
 template <class T, class C>
  class Iterator
  {
    public:
      virtual T& operator*() { T *t = boost::any_cast<T>(&get()); return *t; };
      virtual boost::any& get() { throw new Exception("get not overridden!!"); };
      //virtual boost::any& get() = 0;
    protected:
      C::iterator iter;
  };

  template <class T>
  class VectorIterator: public Iterator<T, std::vector<T> >
  {
    public:
      VectorIterator(std::vector<T>::iterator iterator): Iterator<T, std::vector<T> >(iterator) { };
      virtual boost::any& get() { return *iter; };
  };

  template <class Value, class Container>
  class Repository
  {
    public:
      typedef Iterator<Value, Container> iterator;

      virtual iterator begin() = 0;
      virtual iterator end() = 0;
  };

  class SomeRepository : public Repository<RandomClass, std::vector<RandomClass> >
  {
    public:
      iterator begin() { return VectorIterator<RandomClass>(items.begin()); };

      iterator end() { return VectorIterator<RandomClass>(items.end()); };
  } 
```

那么，为什么它不起作用以及（如何）我可以修复它？

PS：我知道这与另一个问题非常相似，但我无法将其完全放入评论中，并且真的不知道我还能把它放在哪里。

**更新：**

所以我设法通过让 get() 返回一个 void (eww) 指针并忘记 boost::any 来解决问题。但它仍然调用 Iterator::get 而不是 VectorIterator::get （这是我最初的问题）（当我尝试使用 *someRepository.begin() 之类的东西时），有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:21:49.810

您无法初始化`boost::any&`from `*iter`，就像您无法`float&`从 type 的值初始化一样`int`。在这两种情况下，都没有要引用的所需类型的实际对象。

您可以更改`get`为 return `boost::any`（在这种情况下，`*iter`将发生转换），但是您`operator*`有一个问题，即`T`它想要引用的（再次，引用类型）需要比函数调用更有效。一种解决方案是将调用的结果存储在`get`某处，或者通过同样返回值 () 而不是引用 () 来执行`get`相同`operator*`的`T`更改`T&`。这些将是价值语义，而不是对底层容器的“浅层”视图。分配给 的结果`operator*`，假设它是正确的，不会影响容器的元素。

另一种可能性是让`get`return a`boost::any`保证将浅视图存储到元素中，例如

```
virtual boost::any get() { return &*iter; } 
```

（`return boost::ref(*iter);`是另一种可能）

然后必须注意内部`operator*`以正确恢复预期值，例如`return *boost::any_cast<T*>(get());`(resp. `return boot::any_cast<boost::reference_wrapper<T> >(get()).get();`)。这具有参考语义，返回`T&`就可以了。对结果的操作`operator*`可能会影响容器的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:12:33.900

如果你在'iterator begin()'中返回Iterator（所以按值返回），它会将返回值转换为Iterator，因此它将不再是VectorIterator类型，显然它不会调用VectorIterator的get方法（至少我是这样的）思考）。通过引用或指针返回应该可以正常工作。

现在我只需要想出一个解决方法。通过引用返回将不起作用，因为我在 VectorIterator::begin() 中返回了一个局部变量。我想除非其他人有更好的建议，否则我将不得不按指针返回。

# matlab - 自动更新的 Matlab 属性

> ID：12712306
> 
> 赞同：1
> 
> 时间：2012-10-03T15:58:41.527
> 
> 标签：matlab, matlab-class

作为 MATLAB 的新手，我正在尝试编写一个类，如果两个属性之一更改值，则会自动重新计算第三个属性。

似乎事件和侦听器是为此而生的，但我就是无法掌握它们的基本实现。

我最近的尝试是这个

```
% when property a or b is altered, c will automatically be recalculated

classdef myclass < handle
    properties
        a = 1;
        b = 2;
        c
    end

    events
        valuechange
    end

    methods

        function obj = myclass()
            addlistener(obj,'valuechange', obj.calc_c(obj))
        end

        function set_a(obj, input)
            obj.a = input;
            notify(obj, valuechange)
        end

        function set_b(obj, input)
            obj.b = input;
            notify(obj, valuechange)

        end

        function calc_c(obj)
            obj.c = obj.a + obj.b
        end
    end
end 
```

返回以下错误

```
Error using myclass/calc_c
Too many output arguments.
Error in myclass (line 18)
            addlistener(obj,'valuechange', obj.calc_c(obj)) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:32:07.933

您不想将 c 定义为 Dependent，以便每次使用它时都确定它已更新吗？

像这样的东西

```
classdef myclass < handle
    properties
        a
        b
    end
    properties (Dependent) 
        c
    end

    methods
    function x = get.x(obj)
        %Do something to get sure x is consistent
        x = a + b;
    end
end 
```

# sql - PostgreSQL中的因子（字符串）到数字

> ID：12712309
> 
> 赞同：1
> 
> 时间：2012-10-03T15:58:46.857
> 
> 标签：sql, postgresql, types

与[此](https://stackoverflow.com/questions/3418128/how-to-convert-a-factor-to-an-integer-numeric-without-a-loss-of-information)类似，是否可以在 PostgreSQL 中将字符串字段转换为数字。例如，

```
create table test (name text);

insert into test (name) values ('amy');
insert into test (name) values ('bob');
insert into test (name) values ('bob');
insert into test (name) values ('celia'); 
```

并添加一个字段

```
 name  | num
-------+-----
 amy   | 1
 bob   | 2
 bob   | 2
 celia | 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:48:32.753

最有效的“散列”功能是[**`serial`**](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-SERIAL)主键 - 为您提供您在问题中希望的唯一编号。

我还在这个演示中处理**重复项：**

```
CREATE TEMP TABLE string (
  string_id serial PRIMARY KEY
 ,string    text NOT NULL UNIQUE    -- no dupes
 ,ct        int NOT NULL DEFAULT 1  -- count instead of dupe rows
); 
```

然后你会像这样输入新的字符串：（
数据[修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)需要 PostgreSQL 9.1 或更高版本。）

```
WITH x AS (SELECT 'abc'::text AS nu)
   , y AS (
   UPDATE string s
   SET    ct = ct + 1
   FROM   x
   WHERE  s.string = x.nu
   RETURNING TRUE
   )
INSERT INTO string (string)
SELECT nu
FROM   x
WHERE NOT EXISTS (SELECT 1 FROM y); 
```

如果字符串`nu`已经存在，则计数 ( `ct`) 增加 1。如果不存在，则插入新行，从计数 1 开始。

`UNIQUE`还会自动在列上添加索引，`string.string`从而为该查询带来最佳性能。

`UPDATE`为/添加额外的逻辑（触发器？）`DELETE`以使其防弹 - 如果需要。

请注意，如果两个并发事务试图在同一时间添加相同的字符串，这里有一个非常小的竞争条件。可以肯定的是，您可以使用`SERIALIZABLE`事务。[此相关问题](https://stackoverflow.com/q/11532550/939860)下的更多信息和链接。

### [在 sqlfiddle 进行现场演示](http://www.sqlfiddle.com/#!12/e5e6d/2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:15:37.317

如果它们都是单个字符，您可以这样做：

```
ALTER TABLE test ADD COLUMN num int;
UPDATE test SET num = ascii(name); 
```

尽管如果字符串不止一个字符，那只会返回第一个字母的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:16:23.837

一个哈希值，比如[md5](http://www.postgresql.org/docs/9.1/static/functions-string.html)`name`怎么样？

```
create table test (name text, hash text);

-- later

update test set hash = md5(name); 
```

如果您需要将该 md5 文本转换为数字：[Hashing a String to a Numeric Value in PostgresSQL](https://stackoverflow.com/questions/9809381/hashing-a-string-to-a-numeric-value-in-postgressql)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T03:21:21.387

您的请求中显示的确切情况可以使用[`dense_rank`窗口函数](http://www.postgresql.org/docs/current/static/functions-window.html)生成：

```
regress=# SELECT name, dense_rank() OVER (ORDER BY name) FROM test;
 name  | dense_rank 
-------+------------
 amy   |          1
 bob   |          2
 bob   |          2
 celia |          3
(4 rows) 
```

因此，如果您为每一行添加一个数字，您将能够执行以下操作：

```
ALTER TABLE test ADD COLUMN some_num integer;

WITH gen(gen_name, gen_num) AS 
   (SELECT name, dense_rank() OVER (ORDER BY name) FROM test GROUP BY name)
UPDATE test SET some_num = gen_num FROM gen WHERE name = gen_name;

ALTER TABLE test ALTER COLUMN some_num SET NOT NULL; 
```

*但是*我认为使用散列或分配生成的密钥更为明智。我只是表明你的例子可以实现。

这种方法的最大问题是插入新数据很痛苦。这是一个排名（就像你的例子所示），所以如果你`INSERT INTO test (name) VALUES ('billy');`那么排名就会改变。

# javascript - jquery切换和平滑滚动在同一页面上发生冲突

> ID：12712314
> 
> 赞同：1
> 
> 时间：2012-10-03T15:59:16.637
> 
> 标签：javascript, jquery, jquery-ui

我在单页网站上使用 jquery 切换插件和 Smoothscroll 插件。现在，问题是切换功能中的隐藏文本不允许平滑滚动 jquery 正常运行。假设我们在导航选项中单击“项目 a”，它应该以平滑的方式滚动到“项目 a”部分 div，它这样做是随意的，并且还考虑了切换功能中隐藏文本的高度，即大约 100 像素。因此，既没有平滑的滚动，也没有期望结果的 100px 差异。

作为参考，我使用的是 html5，页面上有 4 个部分，如下面的代码所示。

这是切换功能的代码：

```
`$(document).ready(function(){
//Hide the tooglebox when page load
$(".togglebox").hide();
//slide up and down when click over heading 2
$("h2").click(function(){
// slide toggle effect set to slow you can set it to fast too.
$(this).toggleClass("active").next(".togglebox").slideToggle("slow");
return true;
});
});` 
```

这是导航菜单的代码（应该在同一页面上滚动）：

```
<nav>
      <ul>
                <li><a href="#main">Home</a></li>

                <li><a href="#work">Our Works</a></li>
                <li><a href="#about-us">About Us</a></li>
                <li><a href="#contact">Contact Us</a></li>
            </ul>
        </nav>
```

我正在使用位于以下位置的 Smoothscroll 插件：[http ://css-tricks.com/snippets/jquery/smooth-scrolling/](http://css-tricks.com/snippets/jquery/smooth-scrolling/)

有人可以指导我为什么这两个 jquery 发生冲突。

PS：我也在使用 jquery 幻灯片，但据我所知，这没有任何效果，因为我删除了它，没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:35:01.937

根据您发布的内容很难判断，但使用该`.hide()`方法类似于将 CSS 属性设置为`display: none`，可能会导致浏览器错误地计算高度。我会尝试设置`visibility: hidden`，然后在活动时`visibility: visible`。

# javascript - 用画布元素替换带有背景图像的 div

> ID：12712319
> 
> 赞同：3
> 
> 时间：2012-10-03T15:59:29.010
> 
> 标签：javascript, jquery, canvas, html5-canvas

我正在尝试用画布元素替换任何具有背景图像的 div，并将这些背景图像绘制到它们上。

`background-image`我已经掌握了基础知识，但我对 div 上的图像质量与画在画布上的相同图像之间的图像质量差异感到有些困惑。

这是我用来执行此操作的代码：

```
$('#container div').each(function(){
    if($(this).css('background-image') != 'none'){
        var bgImage = $(this).css('background-image').replace(/^url|[\(\)]/g, '');
        var image = new Image();
        var attrs = $(this)[0].attributes;
        var dimensions = new Array();
        var canvas = document.createElement('canvas');

        dimensions.push($(this).height())
        dimensions.push($(this).width());

        $(canvas).attr('width',dimensions[0]);
        $(canvas).attr('height',dimensions[1]);
        $(canvas).css('background-image', 'none');

        for(var i = 0; i < attrs.length; i++){
            $(canvas).attr(attrs[i].nodeName,attrs[i].nodeValue);
        }

        var ctx = canvas.getContext('2d');

        image.onload = function () {
            ctx.drawImage(image, 0, 0, image.height, image.width);
        }
        image.src = bgImage;

        $(this).replaceWith(canvas);
    }
}); 
```

结果如下：

![在此处输入图像描述](../Images/065569d725c280c049e3597e2d37d46a.png)

看起来图像由于某种原因被拉伸，但我尝试`console.log`了我正在使用的图像的宽度/高度，`drawImage`并且值与图像尺寸相匹配。结果只显示了图像的一部分——真正的图像是 900x4000ish 像素。

这是一个显示问题的 jsfiddle 链接：

**[http://jsfiddle.net/xRKJt/](http://jsfiddle.net/xRKJt/)**

是什么导致了这种奇怪的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T20:10:38.513

哈！（花了几秒钟才弄清楚）

图像具有反映其像素尺寸的 naturalWidth 和 naturalHeight 属性。更改您的代码

```
 image.onload = function () {
            ctx.drawImage(image, 0, 0, image.naturalWidth, image.naturalHeight);
        } 
```

由于图片太大，如果您在浏览器中打开图片，默认情况下会缩小图片。如果您尝试访问 image.width 和 image.height，我认为您将获得那些缩小的宽度和高度属性。或者类似的东西。

# android - android中列表的listview

> ID：12712324
> 
> 赞同：1
> 
> 时间：2012-10-03T15:59:50.293
> 
> 标签：android, android-layout, listview, android-listview

我想在我的活动中列出清单。让我们说一个月份列表，当我选择其中一个月份时，我将获得一个包含该月数据条目的新列表。

我添加了一些图片以帮助理解。

你们能告诉我\指点我怎么做吗？（PS，我正在寻找其他类似问题的答案）

![在此处输入图像描述](../Images/de36e1b1f9ad59c15eb6b738ae142557.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:09:53.573

您可以创建一个包含月份列表的列表活动，并使用

```
lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) { 
```

您可以将意图用于另一个列表活动以选择不同的视图。我在博客上的帖子中创建了一个示例项目（[Android 列表视图](http://collegewires.com/android/2012/06/android-list-view/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:10:32.893

根据您的评论，最好的解决方案是在每个列表项上单击您应该`Adapter`根据选择创建一个新项，然后将其设置在`ListView`自身上。

如果您想在项目内进行导航，那么您可能希望通过代码创建一些树结构，以确定哪个列表是前一个列表。

如果您需要一些示例代码，请告诉我。

尽管您可能应该`ExpandableListView`将其作为可能的替代方案之一进行检查。

# java - 将某些 org.apache.log4j 日志消息分流到特定日志文件

> ID：12712329
> 
> 赞同：1
> 
> 时间：2012-10-03T16:00:11.690
> 
> 标签：java, log4j

我们已经使用 org.apache.log4j 在我们的应用程序中进行了大量日志记录。我们现在想要将其中一些消息分流到一个新的 XML 日志文件（同时继续转到原始日志文件）。

这可能吗？除了常规日志文件之外，我们有没有办法识别这些消息并将它们发送到特殊的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:25:44.900

我认为您可以定义两个文件附加程序。一个在根级别，另一个在包级别（根据需要选择包级别），如下所示：

```
# Root logger option
log4j.rootLogger=DEBUG, RootFileAppender

#Shunted Logger option
log4j.logger.com.shunted=ERROR,ShuntedFileAppender

# RootFileAppender - used to log messages in the root.log file.
log4j.appender.RootFileAppender=org.apache.log4j.FileAppender
log4j.appender.RootFileAppender.File=root.log
log4j.appender.RootFileAppender.MaxFileSize=100MB
log4j.appender.RootFileAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.RootFileAppender.layout.ConversionPattern= %5p [%t] (%F:%L) - %m%n

# ShuntedFileAppender - used to log messages in the shunted.log file.
log4j.appender.ShuntedFileAppender=org.apache.log4j.FileAppender
log4j.appender.ShuntedFileAppender.File=shunted.log
log4j.appender.ShuntedFileAppender.MaxFileSize=10MB
log4j.appender.ShuntedFileAppender.layout=org.apache.log4j.PatternLayout
log4j.appender.ShuntedFileAppender.layout.ConversionPattern= %5p [%t] (%F:%L) - %m%n 
```

请注意：您也可以将两个记录器选项定义为不同的级别。在上面的示例中，ROOT 定义为，`DEBUG`而分流定义为`ERROR`级别。

# .net - 是否可以使用 .NET 和 Windows 证书存储中的证书连接到 Websphere MQ？

> ID：12712335
> 
> 赞同：4
> 
> 时间：2012-10-03T16:00:52.010
> 
> 标签：.net, ssl, certificate, ibm-mq

红皮书文档详细说明了使用 .NET MQ 客户端创建`.sto`文件`amqmcert`时是否可以只使用 Windows 证书存储（系统存储，即 MMC->Add/Remove Snap-In->Certificates- >计算机帐户）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T00:50:15.133

不适用于当前版本的 WebSphere MQ。从 V6.0 开始，WMQ 开始将 KDB 文件用于证书而不是 Windows 证书存储。这在 WebSphere MQ 支持的所有分布式平台上提供了一组通用工具，并减少了特定于平台的代码量。如果您想请求 WMQ 再次支持 Windows 证书存储，请在[RFE 社区](http://ibm.co/P5TVP3)创建一个增强请求（或者如果它已经存在，请投赞成票） 。

**更新**
信息中心目前提到了一些使用带有 XMS 类的 Windows 证书存储，用于 .Net 连接到 SIBus。这是不正确的，将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T14:27:22.860

IBM MQv8 .NET Client 现在支持 Windows 密钥库。您可以将 Windows 密钥库用于客户端应用程序，以实现与队列管理器的安全连接。更多细节[在这里](http://www-01.ibm.com/support/knowledgecenter/SSFKSJ_8.0.0/com.ibm.mq.pro.doc/q120370_.htm)。

# jquery - Jquery访问和循环关联对象

> ID：12712342
> 
> 赞同：0
> 
> 时间：2012-10-03T16:01:16.817
> 
> 标签：jquery, arrays, json, object

我在访问 JSON 编码的 PHP 关联数组时遇到了一些问题。我得到 JSON 编码的数组`$.get();`并将其分配给`data`变量。

```
$.get("includes/ajax/public.php", { do: "get-data", id: value },function(data) {
// NO DATA
if (!data || data == 'false') $('#noData').slideDown('slow');
// THERE IS DATA
else {
if ($('#noData').is(':visible')) $('#noData').hide();
$('#records').html(data.totalRecords);
console.log(data["totalRecords"]);
console.log(data);
}
}); 
```

这就是我在控制台中得到的。

```
{"totalRecords":1,"data":[{"id":"1","country_id":"224", "name":"data name","address":"data address"}]} 
```

我必须访问 totalRecords 并循环数据数组。但是我无法访问它。

```
console.log(data.totalRecords); //outputs undefined. 
```

或者

```
console.log(data['totalRecords']); //outputs undefined. 
```

如果我可以计算`data`. `data.length`不起作用。它应该给我，`1`但它给了我超过 100 个，这是不正确的。

我只需要访问 totalRecords 值（或者只计算其中有多少个数组），然后循环数据以操作 DOM。

如果你能帮我解决这个小问题，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:05:29.447

您正在访问 totalRecords 值，如下所示：

```
data.totalRecords 
```

它返回 1 是有道理的，因为在 json 中该字段的值确实是 1：

```
"totalRecords":1 
```

您必须使用数据字段才能访问元素数组：

```
data.data 
```

**编辑：**您必须使用 $.getJSON() 方法，以便 jQuery 将其解释为 JSON 而不仅仅是原始数据。

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# objective-c - 类和块的生命周期

> ID：12712343
> 
> 赞同：2
> 
> 时间：2012-10-03T16:01:17.620
> 
> 标签：objective-c, ios, memory-management, objective-c-blocks

当一个由 UIViewController 创建的类作为另一个类的完成块时，当 UIViewController 得到一个 dealloc 调用时，内存管理生命周期如何工作？

假设 UIViewController 继承类实例化了一个类，ControllerMediatorClass。

ControllerMediatorClass 反过来调用另一个类 ClassThatDealsWithNetworking，它的工作需要一些时间才能完成。

如果 UIViewController 在 ClassThatDealsWithNetworking 完成之前获得它的 dealloc，那么它所拥有的类什么时候会被清理？

当 MyUIViewController 将其设置为 nil 时，'ControllerMediatorClass' 的实例是否不会立即被释放，因为 ControllerMediatorClass 仍充当 ClassThatDealsWithNetworking 实例的完成块？

我的UIViewController：

```
@property (nonatomic, strong) ControllerMediatorClass *mediatorClass;

- (IBAction)userTappedSomething
{
    [mediatorClass makeANetworkCall];
}

- (void)dealloc
{
   self.mediatorClass = nil;
} 
```

控制器中介类：

```
- (void)makeANetworkCall
{
    ClassThatDealsWithNetworking *networkCommand;

    [networkCommand execute:^(NSDictionary *data) 
        {          
            // handling completion that 
        } error:^(MyError *error) 
        {        
            // handling completion
        }
    ];
} 
```

（使用 ARC）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:30:01.610

> 当 MyUIViewController 将其设置为 nil 时，'ControllerMediatorClass' 的实例是否不会立即被释放，因为 ControllerMediatorClass 仍充当 ClassThatDealsWithNetworking 实例的完成块？

是的。因为块会自动捕获它使用的对象，并在保留块时保留它们。

因此，由于该`[ClassThatDealsWithNetworking execute:]`方法可能会保留传递给它的完成块，然后在后台执行网络调用，然后在完成后调用该块并释放该块，当该块被保留时，该块中使用的每个变量也被保留了。并且会在块被释放时被释放。

* * *

所以想象一下你的类的这个伪代码`ClassThatDealsWithNetworking`：

```
typedef void(^NetworkingCompletionBlock)(NSDictionary* data)
@interface ClassThatDealsWithNetworking
@property(nonatomic, copy) NetworkingCompletionBlock completionBlock;
-(void)execute:(NetworkingCompletionBlock)block;
@end

@implementation ClassThatDealsWithNetworking
-(void)execute:(NetworkingCompletionBlock)block {
  // make a copy of the block passed as a parameter
  // so that we keep the completionBlock around inside
  // the ClassThatDealsWithNetworking instance
  // until the network request has finished
  // ==> THIS WILL implicitly RETAIN every object used in the completionBlock
  self.completionBlock = block; 
  ...
  // Then perform the network request
  [NSURLConnection connectionWithRequest:... delegate:self];
  ...
}

-(void)connection:(NSURLConnection*)cxn didFailWithError:(NSError*)error
{
  // call the completion block here
  self.completionBlock(nil,error);
  // then release the completionBlock
  // ==> THIS WILL RELEASE every object previously implicitly retained by the completionBlock
  self.completionBlock = nil;
}
-(void)connectionDidFinishLoading:(NSURLConnection*)cxn
{
  NSDictionary* data = ...
  // call the completion block here
  self.completionBlock(data,nil);
  // then release the completionBlock
  // ==> THIS WILL RELEASE every object previously implicitly retained by the completionBlock
  self.completionBlock = nil;
}
@end 
```

然后，如果你这样做：

```
[networkCommand execute:^(NSDictionary *data) 
{
    self.someProperty = data;
} error:^(MyError *error) 
{
    NSLog(@"%@", error);
    self.someProperty : nil;
}]; 
```

然后`self`（您`ControllerMediatorClass`在您的示例中）**将被块本身隐式保留**，只要该块存在，因为您`self`在某处的块主体中引用。所以编译器知道在执行块时它会需要它并保留它。当块被释放时它**会被隐式释放**。

这确保了您在块体中使用的所有对象在块执行时仍然存在，避免崩溃。

请注意，如果您不小心，这可能会导致保留周期。例如，如果您忘记`self.completionBlock = nil`在`ClassThatDealsWithNetworking`类中（在委托方法或`dealloc`方法中）进行 self ，则该块将永远不会被`ClassThatDealsWithNetworking`实例释放，并且会继续保留`self`。

* * *

For more information, read the [Blocks Programming Guide](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxVariables.html#//apple_ref/doc/uid/TP40007502-CH6-SW1) in the Apple documentation.

# r - 如何将均值、标准差等函数应用于整个矩阵

> ID：12712346
> 
> 赞同：1
> 
> 时间：2012-10-03T16:01:28.737
> 
> 标签：r

我有以下`matrix`

```
Rho <- structure(c(1, 0.466666666666667, -0.866666666666667, -0.466666666666667, 
-0.333333333333333, 0.466666666666667, 1, -0.6, -0.466666666666667, 
-0.333333333333333, -0.866666666666667, -0.6, 1, 0.333333333333333, 
0.466666666666667, -0.466666666666667, -0.466666666666667, 0.333333333333333, 
1, -0.2, -0.333333333333333, -0.333333333333333, 0.466666666666667, 
-0.2, 1), .Dim = c(5L, 5L), .Dimnames = list(c("SPX Index", "MXE2 Index", 
"USG4TR Index", "FNAR Index", "DBLCMAVL Index"), c("SPX Index", 
"MXE2 Index", "USG4TR Index", "FNAR Index", "DBLCMAVL Index"))) 
```

我认为，为了将函数应用于单个矩阵参数（如行和/或列），我必须以多种方式使用`mapply()`or `apply()`。

但是，如果我输入

```
mean(Rho)  
sd(Rho) 
```

这使我返回了单独的函数应用程序：

```
> mean(Rho)
     SPX Index     MXE2 Index   USG4TR Index     FNAR Index DBLCMAVL Index 
   -0.04000000     0.01333333     0.06666667     0.04000000     0.12000000 
> sd(Rho)
     SPX Index     MXE2 Index   USG4TR Index     FNAR Index DBLCMAVL Index 
     0.7566006      0.6902496      0.7774603      0.6282250      0.5932959 
```

这不是我想要的：我想要平均值和标准。开发。我的矩阵的**所有**元素，比如

```
> mean(mean(Rho))
[1] 0.04 
```

只需一个命令。

有没有办法在不将**我**的矩阵强制为向量/数字/其他的情况下做到这一点？

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_Australia.1252  LC_CTYPE=English_Australia.1252   
[3] LC_MONETARY=English_Australia.1252 LC_NUMERIC=C                      
[5] LC_TIME=English_Australia.1252    

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
 [1] PerformanceAnalytics_1.0.4.4 xts_0.8-6                   
 [3] zoo_1.7-7                    gogarch_0.7-2               
 [5] fastICA_1.1-16               fGarch_2150.81              
 [7] fBasics_2160.81              rmgarch_0.97                
 [9] Matrix_1.0-9                 lattice_0.20-10             
[11] Kendall_2.2                  spd_1.7                     
[13] KernSmooth_2.23-8            rugarch_1.0-11              
[15] Rsolnp_1.12                  truncnorm_1.0-6             
[17] chron_2.3-42                 numDeriv_2012.3-1           
[19] MASS_7.3-18                  RcppArmadillo_0.3.4.2       
[21] Rcpp_0.9.13                  timeSeries_2160.94          
[23] timeDate_2160.95             rcom_2.2-5                  
[25] rscproxy_2.0-5              

loaded via a namespace (and not attached):
[1] boot_1.3-5       grid_2.15.1      stabledist_0.6-4 tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T17:51:01.950

虽然我不能肯定地说这是你看到你所看到的而不看到你的原因`sessionInfo()`，但我的猜测是你已经`PerformanceAnalytics`加载了包。

在该`zzz.R`包的文件中，他们有以下代码：

```
mean.xts <- function(x,...) {
if(is.vector(x) ||is.null(ncol(x))  || ncol(x)==1){
        x<-as.numeric(x)
        mean(x,...)
    } else apply(x,2,mean.xts,...)
} 
mean.matrix <- function(x,...) {apply(x,2,mean,...)} 

sd.xts <- function(x,na.rm=FALSE) {
    if(is.vector(x) || is.null(ncol(x)) || ncol(x)==1){
        x<-as.numeric(x)
        sd(x,na.rm=na.rm)
    } else apply(x,2,sd,na.rm=na.rm)
}
sd.matrix <- function(x,na.rm=FALSE) {apply(x,2,sd,na.rm=na.rm)} 
```

我认为他们这样做很糟糕，我反复尝试让他们改变它，但无济于事。因此，我抵制了这个包裹。

无论如何，在不加载该包的情况下开始一个新的 R 会话，然后重试。

# java - 如何为 java ee 开发人员将 c/c++ 包“添加”到 eclipse 中？

> ID：12712354
> 
> 赞同：2
> 
> 时间：2012-10-03T16:01:53.187
> 
> 标签：java, c++, c, eclipse, jakarta-ee

好的，这是问题。我不想有两个日食，我只想有一个用于 c/c++ 和 Java EE。在 eclipse.org 的包比较链接中，列出了每个包的功能。从那里可以看出，我认为如果我有“JAVA EE”，我只需要添加“EGit”、“Linux 工具”和“CDT”就可以拥有两个完整的包。

但我问，这是透明的吗？只需添加这些就可以了？

如果这是真的，我该怎么做？只需将这三个添加到我已经拥有的 Java EE 中？我的意思是实现这种集成的程序是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T16:07:12.390

对，就是那样。顺便说一句，您不需要EGit正确地说。EGit 用于 Eclipse 与 Git 存储库的集成，与 Java 和/或 C++ 无关。

恕我直言，我强烈建议您拥有一个用于 Java 的 Eclipse 和另一个用于 C++ 的 Eclipse。这样，您可以为每个插件安装相关插件，而不会使 Eclipse 的插件过度饱和，这会消耗大量内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-16T06:34:14.307

我在 Ubuntu 上使用面向 Web 开发人员的 Eclipse Java EE IDE，版本：Neon.3 Release (4.6.3RC2)。以下是我安装 C++ 插件的步骤：

```
    帮助 > Eclipse 市场..
    查找：C++，回车
    向下滚动以找到 Eclipse C/C++ IDE CDT 9.2 (Neon.2)
    点击安装

```

注意：如果您有不同版本的 Eclipse Java EE IDE，您可能会看到不同的 C/C++ IDE CDT 版本

[![在此处输入图像描述](../Images/695a3b36a7001ebd5c5664550025700b.png)](https://i.stack.imgur.com/646t2.png)

# c# - 如何将表值参数从 C# 传递到 Oracle 存储过程

> ID：12712355
> 
> 赞同：6
> 
> 时间：2012-10-03T16:01:54.130
> 
> 标签：c#, oracle, parameter-passing, odp.net

我有一个名为的 Oracle 存储过程`CREATE_CASE_EXL`：

```
PROCEDURE  CREATE_CASE_EXL(P_RICdata RICTab,
                       P_sACTION_TYPE IN VARCHAR2); 
```

`RICTab`自定义类型在哪里：

```
TYPE RICTab IS TABLE OF MMSRRicRec  INDEX BY BINARY_INTEGER;

TYPE MMSRRicRec IS RECORD
 ( RIC        VARCHAR2(32),
   FID_NO     NUMBER(8),
   REC_ID     NUMBER(8),
   MMS_ACTION VARCHAR2(1)
 ); 
```

我在 PL/SQL 中运行此代码以执行`CREATE_CASE_EXL`：

```
DECLARE
pTE_RICS     RICTab 

BEGIN
    pTE_RICS(1).RIC  := 'RIC1';
    pTE_RICS(1).FID_NO := NULL;
    pTE_RICS(1).REC_ID := 3;
    pTE_RICS(1).MMS_ACTION := 'A';

    pTE_RICS(1).RIC  := 'RIC2';
    pTE_RICS(1).FID_NO := NULL;
    pTE_RICS(1).REC_ID := 4;
    pTE_RICS(1).MMS_ACTION := 'A';

    CREATE_CASE_EXL( pTE_RICS , 'A');

END; 
```

我需要在 .NET 中执行类似的操作。您能否告知我如何将参数作为数据表传递给 Oracle 存储过程？我应该为这项任务使用 UDT 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T14:39:48.327

实际上我发现它是受支持的，但你必须为此目的使用 Oracle UDT。

这是我用来解决问题的资源的链接：http: [//appsjack.blogspot.co.uk/2010/09/pass-custom-udt-types-to-oracle-stored.html](http://appsjack.blogspot.co.uk/2010/09/pass-custom-udt-types-to-oracle-stored.html)

非常感谢大家的建议！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:56:35.107

我认为目前不支持此功能。我认为您将不得不使用一些解决方法。

1) XML

2) 智能关联数组

```
pTE_RICS(1).RIC  := 'RIC1'; -> pTE_RICS("item[0].RIC")  := 'RIC1'; 
```

一年前我们在它们之间进行了选择，我们选择了 XML。（也试图让你的案子工作但没有成功）

# zend-framework - Zend SOAP with Doctrine 2.1 Problems FLush , Soap__ 未知错误

> ID：12712359
> 
> 赞同：0
> 
> 时间：2012-10-03T16:02:03.313
> 
> 标签：zend-framework, soap, doctrine, zend-soap

我制作了一个肥皂客户端和服务器，并添加了一个示例类，该类返回通过方法找到的教义的结果。但是，当我将其更改为持久化或刷新对象时，错误：

我的肥皂服务器：（肥皂控制器）

```
public function server()
{
    if (is_null($this->getRequest()->getParam('wsdl'))) {
         $server = new Zend_Soap_Server('http://localhost/soap?wsdl');
         $server->setClass('Private\Library\Repo\Users');
         $server->handle();
    } else {
         $wsdl = new Zend_Soap_AutoDiscover();
         $wsdl->setClass('Private\Library\Repo\Users');
         $wsdl->handle();
    }
}

public function client()
{
    $client = new Zend_Soap_Client('http://localhost/soap?wsdl');
    $result = $client->updateUser();
} 
```

当我打电话时，我得到：

> 消息：未知错误
> 
> 堆栈跟踪：
> 
> ```
> #0 /library/Zend/Soap/Client.php(1121): SoapClient->__soapCall('updateUser', Array, NULL, NULL, Array) 
> ```

在我的 updateDoc 课程中，我有一个标准的学说更新：

```
public function updateUser(){   $userEntity = 
```

$this->em->getRepository("Application\Entities\Members")->findOneById(23); $userEntity->first_name = "更新的名字";
$this->em->persist($userEntity); $this->em->flush(); }

但是，如果我打电话给我的`getUser()`：

```
public function getUser()
{
    $userEntity = $this->em->getRepository("Application\Entities\Members")->findOneById(23);
    return $userEntity;
} 
```

它没有肥皂未知错误。

随着更新，如果删除 $userEntity->first_name = "updated firstname";

它可以正常工作，没有任何错误，但显然，它不会更新实体……该实体也具有私有属性。不确定它是否有所作为

更新：另外，我刚刚注意到，如果我使用与其当前值相同的值更新实体，它会起作用...例如 lastname = 'alison' ，我更新 $entity->lastname = 'alison'...它可以工作，但是如果我将其更改为不同的姓氏，则不会..没有教义错误....另外，我可以在应用程序的任何控制器或模型中使用相同的功能更改此实体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:08:00.013

固定...如果使用soap，没有会话，我的用户实体需要一个有效的会话，因为它记录所有更新..

# python - PySide 或 PyQt 的 QtSingleApplication

> ID：12712360
> 
> 赞同：5
> 
> 时间：2012-10-03T16:02:03.327
> 
> 标签：python, qt, pyqt, pyside

[Qt Solutions](http://qt.digia.com/Product/Qt-Add-Ons/Qt-Solutions-Archive/)是否有 Python 版本的 C++[`QtSingleApplication`](http://doc.qt.digia.com/solutions/4/qtsingleapplication/qtsingleapplication.html)类？

[`QtSingleApplication`](http://doc.qt.digia.com/solutions/4/qtsingleapplication/qtsingleapplication.html)用于确保永远不会有多个应用程序实例同时运行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T16:02:03.327

这是我自己的实现。它已经使用 Python 2.7 和 PySide 1.1 进行了测试。

它与[C++ 版本的`QtSingleApplication`](http://doc.qt.digia.com/solutions/4/qtsingleapplication/qtsingleapplication.html). 主要区别在于您必须向构造函数提供应用程序唯一 ID。（默认情况下，C++ 版本使用可执行文件的路径作为唯一 ID；这在此处不起作用，因为可执行文件很可能是`python.exe`.）

```
from PySide.QtCore import *
from PySide.QtGui import *
from PySide.QtNetwork import *

class QtSingleApplication(QApplication):

    messageReceived = Signal(unicode)

    def __init__(self, id, *argv):

        super(QtSingleApplication, self).__init__(*argv)
        self._id = id
        self._activationWindow = None
        self._activateOnMessage = False

        # Is there another instance running?
        self._outSocket = QLocalSocket()
        self._outSocket.connectToServer(self._id)
        self._isRunning = self._outSocket.waitForConnected()

        if self._isRunning:
            # Yes, there is.
            self._outStream = QTextStream(self._outSocket)
            self._outStream.setCodec('UTF-8')
        else:
            # No, there isn't.
            self._outSocket = None
            self._outStream = None
            self._inSocket = None
            self._inStream = None
            self._server = QLocalServer()
            self._server.listen(self._id)
            self._server.newConnection.connect(self._onNewConnection)

    def isRunning(self):
        return self._isRunning

    def id(self):
        return self._id

    def activationWindow(self):
        return self._activationWindow

    def setActivationWindow(self, activationWindow, activateOnMessage = True):
        self._activationWindow = activationWindow
        self._activateOnMessage = activateOnMessage

    def activateWindow(self):
        if not self._activationWindow:
            return
        self._activationWindow.setWindowState(
            self._activationWindow.windowState() & ~Qt.WindowMinimized)
        self._activationWindow.raise_()
        self._activationWindow.activateWindow()

    def sendMessage(self, msg):
        if not self._outStream:
            return False
        self._outStream << msg << '\n'
        self._outStream.flush()
        return self._outSocket.waitForBytesWritten()

    def _onNewConnection(self):
        if self._inSocket:
            self._inSocket.readyRead.disconnect(self._onReadyRead)
        self._inSocket = self._server.nextPendingConnection()
        if not self._inSocket:
            return
        self._inStream = QTextStream(self._inSocket)
        self._inStream.setCodec('UTF-8')
        self._inSocket.readyRead.connect(self._onReadyRead)
        if self._activateOnMessage:
            self.activateWindow()

    def _onReadyRead(self):
        while True:
            msg = self._inStream.readLine()
            if not msg: break
            self.messageReceived.emit(msg) 
```

这是一个简单的测试程序：

```
import sys
from PySide.QtGui import *
from QtSingleApplication import QtSingleApplication

appGuid = 'F3FF80BA-BA05-4277-8063-82A6DB9245A2'
app = QtSingleApplication(appGuid, sys.argv)
if app.isRunning(): sys.exit(0)

w = QWidget()
w.show()
app.setActivationWindow(w)
sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T17:04:57.647

你可以看看这个[博客条目](http://www.dallagnese.fr/en/computers-it/recette-python-qt4-qsingleapplication-pyside/)。它适用于 Pyside，但我想它也适用于 PyQt4。

# jquery - 从另一个页面获取特定的 href 属性

> ID：12712363
> 
> 赞同：1
> 
> 时间：2012-10-03T16:02:07.287
> 
> 标签：jquery, attributes, href

我正在使用 jQuery .get 从另一个页面抓取元素；我想获得“第 n 个”href 属性，我正在尝试使用下面的代码。如您所见，我正在尝试将 ID 的值更改为特定的 URL。我认为我使用 .find 存在问题，但无法弄清楚。非常感谢您的帮助。

**JS**

```
$.get('/file.xml', function(data)
{
    var $links = $(data).find('a').attr('href'),
    selectedlink = $links.eq(selectedValue);
    var link = selectedlink.text();
    $("#fvlink").val(link);

}); 
```

**带有 URL 的 HTML 页面**

```
<body>
  <li><h2><a href="http://www.whatever1.coy">2060</a></h2><span class="desctext">This is the second slide</span></li>
  <li><h2><a href="http://www.whatever2.com">2057</a></h2><span class="desctext">This is the third slide</span></li>
  <li><h2><a href="http://www.whatever3.com">2056</a></h2><span class="desctext">This is the fourth slide</span></li>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:53:43.850

因为`$(..).attr()`返回一个字符串，`$links`所以不会是一个 jQuery 对象。您需要挂断电话`attr()`：

```
var $links = $(data).find('a'); 
```

# visual-studio - Microsoft.Reporting - 如何获得它？

> ID：12712364
> 
> 赞同：0
> 
> 时间：2012-10-03T16:02:08.210
> 
> 标签：visual-studio, reporting

我有 Visual Studio 2008 标准版。

在那个版本中，我可以访问 Microsoft.Reporting，此外，我还有一些与 VS IDE 集成的报表设计工具。

如果我现在使用 Visual Studio 2012 Express，如何获得该工具和课程？

我需要这个用于 Windows 窗体应用程序，而不是 Web。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:05:53.137

它带有 Sql Server Reporting Services

# javascript - 如何访问具有跨度的某个类的所有实例中的文本？

> ID：12712367
> 
> 赞同：0
> 
> 时间：2012-10-03T16:02:22.627
> 
> 标签：javascript, jquery

我的网站上有一个评分框，它出现在一篇文章的下方，然后同样的评分框再次出现在人们对该文章发表的评论中。因此，费率框会在页面上多次出现。我正在尝试更改显示在该费率框中的文本，但不幸的是，我没有对我拥有的网站类型的服务器访问权限。所以我需要用脚本来做。

我现在使用的小脚本有效，但它只适用于一流的盒子。但是，我需要更改每个文本中的文本。我正在尝试将现有的“评价”文本更改为“喜欢”。

`.SUI-RateBox`是 div 类，我需要更改的文本位于该类中的一个跨度中。

我拥有的仅适用于第一个实例的代码是这样的：

```
<script>
  $(".SUI-RateBox span:contains('Rate')").html("Like");
</script> 
```

我怎样才能做到这一点，但对所有的费率框。dom结构在下面的链接中。

[http://www.spruzstuff.spruz.com/pt/Element-Background-Image/wiki.htm](http://www.spruzstuff.spruz.com/pt/Element-Background-Image/wiki.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:04:16.037

我不确定您为什么要使用`#`（没关系，您更改了问题的详细信息），但试试这个：

```
<script>
   $(".SUI-RateBox").find("span:contains('Rate')").html("Like");
</script> 
```

[http://jsfiddle.net/EhPP7/](http://jsfiddle.net/EhPP7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:36:29.120

或者，我想您也可以尝试`.each()`遍历其中的每个跨度标签`div.SUI-RateBox`并一个接一个地检查文本值。

```
$(document).ready(function () {
    $("*.SUI-RateBox").each(function(){
        var sp = $(this).children("span");
        if(sp.text() == 'Rate')
            sp.text('like');            
    });
});
​ 
```

[http://jsfiddle.net/cZMFC/1/](http://jsfiddle.net/cZMFC/1/)

另请查看[jQuery .each() API](http://api.jquery.com/each/)

# git - 无法删除或修剪没有提交的远程分支

> ID：12712369
> 
> 赞同：0
> 
> 时间：2012-10-03T16:02:31.550
> 
> 标签：git

我不小心创建了一个分支并将其推送到原点。我从另一个分支创建它，但没有提交任何更改，因此它应该与原始分支“相同”。

我想删除分支，所以我首先在本地删除它：

```
git branch -d <branch_name> 
```

然后我想从远程位置删除：

```
git push origin :<branch_name> 
```

但这给了我错误：

> 错误：无法推送到不合格的目标：目标 refspec 既不匹配远程上的现有 ref，也不以 refs/ 开头，我们无法根据源 ref 猜测前缀。致命：远端意外挂断

[我在 StackOverflow 的另一个线程（无法删除无意中创建的远程分支](https://stackoverflow.com/questions/2895906/cannot-delete-a-remote-branch-created-unintentionally)）和其他站点（[git: prune to remove old remote tracking branches](http://stay-calm.blogspot.com/2009/02/git-prune-to-remove-old-remote-tracking.html) ）上找到了有关此错误的信息，但他们提出的解决方案是：

```
git remote prune origin 
```

对我不起作用。修剪命令正确退出，但当**我**`git branch -r`或`git branch -a`.

我也尝试过`git remote update`，`git fetch`但这并没有改变任何东西。

如何从分支列表中删除此分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:07:15.313

试试`git fetch --prune origin`。

否则，您可以手动从本地存储库中删除分支并查看它是否重新打开`git fetch`（在这种情况下，它没有在远程上删除）：

```
git branch -d -r origin/branch 
```

# css - div宽度自动调整为其内容在具有设定宽度的div中的宽度？

> ID：12712370
> 
> 赞同：0
> 
> 时间：2012-10-03T16:02:34.920
> 
> 标签：css, html, css-float

可以说我有这个

```
<div class="sectionContainer">
    <div class="itemsContainer">
        <div class="items"></div>
        <div class="items"></div>
        <div class="items"></div>
    </div>
</div> 
```

的CSS：

```
.itemsContainer 
{
 /* width:3000px works, however this is what I want to avoid saying explicitly.*/
}

.sectionContainer
{
width: 1000px;
overflow: auto; 
}

.items
{
width: 1000px;     
float: left;     
} 
```

sectionContainer 有一些固定的宽度。

这些项目有一些固定的宽度。

items 容器没有设置宽度；它将缩放到其内容的大小。项目容器的溢出设置为隐藏，以便可以滚动浏览 div 中的项目。**div 中的项目是水平显示的**IE 它们是并排的，我目前正在使用浮动来执行此操作。

我怎样才能只用 CSS 做到这一点？可能吗？我不是马上寻找 JavaScript 解决方案，但如果需要可以求助。

更具体地说，如果我将 itemsContainer 的宽度指定为 3000，这将起作用。但我猜测，由于它是其父 div 的子项，因此其宽度的大小为 1000。我不想显式设置itemsContainer 的大小，因为这应该基于项目的数量。如果我添加更多项目，我希望 itemsContainer 更改其宽度以包含所有这些项目，而无需更改 CSS。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:29:08.440

CSS 不可能猜测你想要发生的事情——这意味着它想要向下级联元素而不是水平级联，这就是你想要的。

[http://jsfiddle.net/9NHFa/](http://jsfiddle.net/9NHFa/)

将 itemsContainer 宽度设置为元素数量的 100% X。

```
.itemsContainer 
{
width:300%; /* since you have 3 elements
} 
```

# excel - 自动宏：删除整个列中的特殊字符（VBA）

> ID：12712372
> 
> 赞同：0
> 
> 时间：2012-10-03T16:02:37.383
> 
> 标签：excel, vba

我们要寻找的东西表面上很简单：

我们希望保持工作表的第 (1) 列不包含所有特殊（IE 非字母数字字符），但下划线：“_”字符除外。

我找到了一个宏格式的解决方案，可以清除所有特殊字符，为了自动化这个宏，我使用了 Worksheet_Change。

但是，我更喜欢从工作表对象中解决所有问题的解决方案（与我们在下面看到的两步解决方案相反）。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target, Range.c) Is Nothing Then Remove_Characters
End Sub 
```

然后调用宏：

```
Sub Remove_Characters()
Dim c As Range
With CreateObject("vbscript.regexp")
.Global = True
.Pattern = "\W"
For Each c In Cells.Range("A1:A1000")
c.Value = Replace(.Replace(c.Value, ""), "_", "")
Next c
End With
    Range("A1").Select
End Sub 
```

有一个更好的方法吗？

非常感谢，

最大限度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:18:44.380

我能想到的最快方法是使用`Find`and `Replace`。看这个例子

```
Option Explicit

'~~> Add/Remove as per your requirements
Const splChars As String = "!@#$%^&()"

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim i As Long

    On Error GoTo Whoa

    Application.EnableEvents = False

    If Not Intersect(Target, Range("A1:A1000")) Is Nothing Then
        For i = 1 To Len(splChars)
            Range("A1:A1000").Replace What:=Mid(splChars, i, 1), _
            Replacement:="", LookAt:=xlPart, SearchOrder:=xlByRows, _
            MatchCase:=False, SearchFormat:=False, ReplaceFormat:=False
        Next i
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

**跟进**

根据我的评论，如果您有特殊字符，例如`*`or`~`那么您将不得不使用此代码

```
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'    NOTE: Whenever you are working with Worksheet_Change event. Always switch   '
'    Off events if you are writing data to the cell. This is required so that    '
'    the code doesn't go into a possible endless loop                            '
'                                                                                '
'    Whenever you are switching off events, use error handling else if you get   '
'    an error, the code will not run the next time.                              '
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''

Option Explicit

'~~> Add/Remove as per your requirements
Const splChars As String = "~!@#$%^&*()"

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim i As Long
    Dim SearchString As String

    '~~> Incorporate Error Handling
    On Error GoTo Whoa

    '~~> Switch Off Events
    Application.EnableEvents = False

    '~~> Check if there is any change in A1:A1000
    If Not Intersect(Target, Range("A1:A1000")) Is Nothing Then
        '~~> Loop throught the special characters one by one
        For i = 1 To Len(splChars)
            SearchString = Mid(splChars, i, 1)

            '~~> Check if the character is ~ or *. If it is then append "~" to it
            Select Case SearchString
                Case "~", "*": SearchString = "~" & SearchString
            End Select

            '~~> Do a simple Find And Replace in all cells in one go
            '~~> without looping
            Range("A1:A1000").Replace What:=SearchString, _
            Replacement:="", LookAt:=xlPart, SearchOrder:=xlByRows, _
            MatchCase:=False, SearchFormat:=False, ReplaceFormat:=False
        Next i
    End If
'~~> Exit gracefully
LetsContinue:
    Application.EnableEvents = True
    Exit Sub
'~~> Trap the error
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T12:13:43.063

这是我为做类似工作而编写的代码，希望有人可以使用它。为其他目的调整它很容易。就我而言，我想要一个函数来返回有效的路径和/或文件名和/或 VBAProject 名称。它适用于 URL 和 UNC 路径（并尝试使用混合斜杠清理任何路径）。您可以轻松地指定其他“禁止”字符，并根据自己的特定需求添加任何额外的布尔开关，或者您可以拆分为单独的函数。

该函数还检查最大字符串长度，如果文件名（不是路径）超过 128 个字符（对 SharePoint 上传非常有用）或 VBA 对象名称超过 35 个字符，则裁剪或弹出消息框。

在这里交叉发布：http: [//baldywritten.blogspot.com/2013/01/vba-macro-to-remove-special-characters.html](http://baldywritten.blogspot.com/2013/01/vba-macro-to-remove-special-characters.html)

```
Function fn_Clean_Special(str As String, CropLength As Boolean _
    , Optional VBObjectName As Boolean) As String
'v1.03 2013-01-04 15:54
'removes invalid special characters from path/file string
', True stops message box warnings and autocrops string
'     [, True] also removes spaces and hyphens and periods (VBA object)
'~ " # % & * : < > ? { | } ..   / \   -

Dim b As Integer, c As Integer, pp As String
Const tt As String = "fn_Clean_Special"
Dim sc(0 To 18) As String
sc(0) = "~"
sc(1) = Chr(34)  ' Chr(34) = " quotemark
sc(2) = "#"
sc(3) = "%"
sc(4) = "&"
sc(5) = "*"
sc(6) = ":"
sc(7) = "<"
sc(8) = ">"
sc(9) = "?"
sc(10) = "{"
sc(11) = "|"
sc(12) = "}"
sc(13) = ".."
'slashes for filenames and VB Object names
sc(14) = "/"
sc(15) = "\"
'hyphen & space & period for VB Object names
sc(16) = "-"
sc(17) = " "
sc(18) = "."

'remove special characters from all
For b = 0 To 13
    str = Replace(str, sc(b), vbNullString)
Next b

'check filename length (length AFTER the LAST slash max 128 chars)
b = InStr(1, str, sc(14))  'look for fwd slash
If b > 0 Then
    str = Replace(str, sc(15), sc(14))  'remove all back slashes
    Do Until b = 0  'until last slash found
        c = b       'c is position of last slash
        b = b + 1                   'next position
        b = InStr(b, str, sc(14))   'next position
    Loop
Else  'no fwd slashes
    b = InStr(1, str, sc(15))  'look for back slash
    If b > 0 Then
        str = Replace(str, sc(14), sc(15))  'remove all fwd slashes
        Do Until b = 0  'until last slash found
            c = b       'c is position of last slash
            b = b + 1                   'next position
            b = InStr(b, str, sc(15))   'next position
        Loop
    End If
End If
'c is position of last slash, or 0 if no slashes
If Len(str) - c > 128 Then
    If CropLength = True Then
        str = Left(str, 35)
    Else
        pp = "WARNING: filename > 128 chars"
        MsgBox pp, vbCritical, tt
    End If
End If

'remove slashes from filenames only
If c > 0 Then
    For b = 14 To 15
        str = Left(str, c) & Replace(Right(str, Len(str) - c), sc(b), vbNullString)
    Next b
End If

If VBObjectName = True Then
'remove slashes and swap hyphens & spaces & periods for underscore in VB object name
    Const scUS As String = "_"
    For b = 14 To 18
        str = Replace(str, sc(b), scUS)
    Next b
'then remove invalid characters from start of string
    Dim c1 As String
    c1 = Left(str, 1)
    Do While c1 = scUS Or c1 = sc(18) Or IsNumeric(c1)
        str = Right(str, Len(str) - 1)
        c1 = Left(str, 1)
    Loop
'remove double underscore
    Do While InStr(str, scUS & scUS) > 0
        str = Replace(str, scUS & scUS, scUS)
    Loop
    'check object name length (max 35 chars)
    If Len(str) > 35 Then
        If CropLength = True Then
            str = Left(str, 35)
        Else
            pp = "WARNING: object name > 35 chars"
            MsgBox pp, vbCritical, tt
        End If
    End If
End If

fn_Clean_Special = str

End Function 
```

调试窗口结果：

```
?fn_clean_special("\\server\path\filename.xls", True)
\\server\path\filename.xls

?fn_clean_special("\\server\path\filename.xls", True, True)
server_path_filename_xls

?fn_Clean_Special("\\special character\testing   for \VBproject.xls", True, True)
special_character_testing_for_VBpro 
```

# java - 如何以编程方式连接到嵌入式 HornetQ 服务器

> ID：12712378
> 
> 赞同：3
> 
> 时间：2012-10-03T16:03:17.777
> 
> 标签：java, osgi, hornetq

我按照嵌入式 HornetQ Core 的示例在 OSGI 容器上运行嵌入式 HornetQ 服务器。

我有三个 OSGI 容器：一个用于服务器，一个用于生产者，最后一个用于消费者。一切都在本地工作。

我在生产者和消费者中用于连接服务器的代码如下：

```
// Step 4\. As we are not using a JNDI environment we instantiate the objects directly
ServerLocator serverLocator = HornetQClient.createServerLocatorWithoutHA(new TransportConfiguration(NettyConnectorFactory.class.getName()));
ClientSessionFactory sf = serverLocator.createSessionFactory(); 
```

我试过查看`TransportConfiguration`方法，但没有找到二传手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:13:48.087

您需要将参数传递给传输配置：

```
Map<String, Object> parameters = new HashMap<String, Object>();
parameters.put("port", org.hornetq.core.remoting.impl.netty.TransportConstants
                      .DEFAULT_PORT);
parameters.put(TransportConstants.HOST_PROP_NAME, "127.0.0.1");

TransportConfiguration configuration = new TransportConfiguration(
        NettyConnectorFactory.class.getName(), parameters); 
```

请注意，您已经 / 可以对`NettyAcceptor`. 我不确定你是如何在测试中配置接受器的。但我希望你明白这一点。

# haskell - Attoparsec：跳过括号中的术语？

> ID：12712382
> 
> 赞同：3
> 
> 时间：2012-10-03T16:03:33.383
> 
> 标签：haskell, conduit, attoparsec

我正在尝试在第 5 列中使用 JSON 制作适合导入到 mongoDB 的大型 TSV 文件。特别是我想将顶级且仅顶级关键字段更改为_id。这是我到目前为止所拥有的，它似乎工作但很慢：

```
{-# LANGUAGE OverloadedStrings #-}

import System.Environment (getArgs)
import Data.Conduit.Binary (sourceFile, sinkFile)
import Data.Conduit
import qualified Data.Conduit.Text as CT
import qualified Data.Conduit.List as CL
import qualified Data.Text as T
import Data.Monoid ((<>))
import Data.Attoparsec.Text as APT
import Control.Applicative

main = do 
        (inputFile : outputFile : _) <- getArgs
        runResourceT $ sourceFile inputFile  
                $= CT.decode CT.utf8 $= CT.lines $= CL.map jsonify 
                $= CT.encode CT.utf8 $$ sinkFile outputFile

jsonify :: T.Text -> T.Text
jsonify = go . T.splitOn "\t"
        where 
        go (_ : _ : _ : _ : content : _) = case parseOnly keyTo_id content of
                Right res -> res <> "\n"
                _ -> ""
        go _ = ""

keyTo_id :: Parser T.Text 
keyTo_id = skipWhile(/='{') >> T.snoc <$>
        (T.cons <$> (char '{') 
                <*> (T.concat <$> many1 ( bracket 
                    <|> (string "\"key\":" >> return "\"_id\":") 
                    <|> APT.takeWhile1(\x -> x /= '{' && x /= '}' && x/= '"') 
                    <|> T.singleton <$> satisfy (/= '}')
                    )))  
        <*> char '}'        

bracket :: Parser T.Text        
bracket = T.cons <$> char '{' 
        <*> scan 1 test
     where
        test :: Int -> Char -> Maybe Int
        test 0 _ = Nothing        
        test i  '}'= Just (i-1)
        test i '{' = Just (i+1)
        test i _ = Just i 
```

根据分析器，58.7% 的时间花在括号中，19.6% 用于 keyTo_id，17.1% 用于 main。

如果括号匹配，肯定有更好的方法来返回括号中的术语吗？

我简要地查看了 attoparsec-conduit，但我不知道如何使用该库，甚至不知道这是否是它可以用来做的事情。

编辑：更新了代码。数据来自openlibrary.org，例如[http://openlibrary.org/data/ol_dump_authors_latest.txt.gz](http://openlibrary.org/data/ol_dump_authors_latest.txt.gz)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T20:11:56.303

使用该`scan`功能。它允许您扫描维护状态的字符串。在您的情况下，状态将是一个数字——到目前为止您遇到的左大括号和右大括号的区别。当您的状态为 0 时，这意味着大括号在当前子字符串内匹配。

诀窍是您不会以这种方式解构和重建字符串，因此它应该更快。

此外，即使使用当前算法，您也可以通过使用惰性文本获得一些性能——该`concat`函数将更有效地工作。

# ios - 什么可能导致 UIImageView 中部分加载的 JPEG？

> ID：12712383
> 
> 赞同：1
> 
> 时间：2012-10-03T16:03:39.380
> 
> 标签：ios, uiimageview, imageview, rendering, jpeg

我们在 iOS 和 Android 上都收到了关于我们的移动应用程序中部分加载的个人资料图像的现场报告。

这是它的样子（请注意，我对图像的一部分进行了高斯模糊处理以保护我们成员的隐私，但实际呈现的是灰色）：

![部分渲染的图像](../Images/f49abef8367e9a2acff9463aa53e61a4.png)

AFAIK 没有在 UIImageView 中加载“Progressive JPEGS”的概念，所以我不知道如何渲染这个图像。此代码至少有一年未修改。所有图像都托管在 S3 上，并且已经存在 2 年。

如果设备达到一定的带宽限制，运营商现在是否有可能截断图像？

- 编辑 -

我可以确认我们能够在 AT&T 网络上重现这种行为。当用户超过他的数据上限时，AT&T 是否有可能以这种方式处理图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T02:46:34.693

当我从 https 切换到 http 图像时，我遇到了同样的问题。不用说...我切换回基于 https 的图像。

# cakephp - 在我的模型中创建任意属性

> ID：12712386
> 
> 赞同：0
> 
> 时间：2012-10-03T16:04:00.410
> 
> 标签：cakephp, model

这是我的模型：

```
class Persona extends AppModel {

    // This is just some arbitrary property I need to populate in the controller.
    public $TipoPersona = ''; 
} 
```

这是我的控制器中的动作功能：

```
public function details($id = null) {

    // Just a typical load by id.
    $this->Persona->id = $id;
    $this->set('persona', $this->Persona->read()); 

    // Can I do something like?
    $this->Persona->TipoPersona = "Mafa Woogly";
} 
```

如何`$TipoPersona`在此处的“模型”中设置属性？我的意图是然后在视图中使用该属性，例如：

```
<tr>
    <th>Tipo de Persona:</th>
    <td><?php echo h($persona->TipoPersona); ?></td> // Or similar?
</tr> 
```

有什么建议么？

这行得通，但感觉很不稳定并且不是强类型的。

```
public function details($id = null) {
    $this->Persona->id = $id;
    $this->set('persona', $this->Persona->read());
    $this->set('tipoPersona', "Mafa woogly");
}

<tr>
    <th>Tipo de Persona:</th>
    <td><?php echo h($tipoPersona); ?></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:19:06.690

该方法`read()`返回一个数组，无法获取`TipoPersona`该对象的属性。

我建议您在此表中添加一个字段来指定人员类型，然后使用 的结果`read()`，例如：

```
<?php echo $persona['Persona']['tipo_persona']; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:27:04.920

您可以使用 Model::afterFind() 回调将其添加到结果数组中。

您确定这不应该是模型中的常规字段吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T22:13:49.993

尝试直接用set添加：

```
$this->set('tipoPersona', $this->Persona->TipoPersona); 
```

它是模型中其他所有人的属性。与您在上面设置 $this->Persona->id 几行的方式相同:)

# iphone - iphone 可以创建图像合成的最大尺寸是多少？

> ID：12712389
> 
> 赞同：1
> 
> 时间：2012-10-03T16:04:11.533
> 
> 标签：iphone, ios5, core-image

我已经看到其他问题询问可以加载到视图中的最大图像大小，但我问的是 iphone 可以合成多大的图像并保存到照片库？我尝试了几个相框应用程序，我在 iphone 4 上制作的最大的是 2400x2400。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:24:18.800

从 iOS 4.0 开始，您可以使用 ALAssetsLibrary 类将图像写入标准 iOS 图像库。根据文档，没有任何关于图像大小限制的消息。可能它取决于处理尽可能大的图像所需的 RAM 内存使用情况。这篇文章对[iOS 内存分配也很有用——一个应用程序可以使用多少内存？](https://stackoverflow.com/questions/6044147/memory-limit-and-ios-memory-allocation-in-iphone-sdk)

# centos - 网络接口需要手动启动

> ID：12712392
> 
> 赞同：2
> 
> 时间：2012-10-03T16:04:17.197
> 
> 标签：centos

我有一台 CentOS 6.3 机器，在重新启动时不会显示其网络接口。

我必须每次都通过 GUI 手动连接它，方法是选择“System eth0”：

![截屏](../Images/10dd3ca29961dc6852c1746c3f3849bb.png)

请让我知道如何解决这个问题！

太感谢了，

担

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T23:07:55.407

换线

```
/etc/sysconfig/network-scripts/ifcfg-eth0 
```

从

```
ONBOOT=no 
```

至

```
ONBOOT=yes 
```

修复了这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T07:30:08.357

在我重新启动 CentOS 6.4 后，网络接口没有获得 IP，当我尝试启动或重新启动网络服务时也没有任何反应。我使用了system-config-network工具，比较了配置文件，它在最后添加了下面的行，重启后就可以了。

```
IPV6INIT=no
USERCTL=no 
```

在我有以下配置之前，但它不起作用。

```
ONBOOT=yes
NM_CONTROLLED=no
BOOTPROTO=none 
```

我希望这有帮助。

# ruby-on-rails - ruby 1.9.2 上的 Rails 3 App 神秘地缺少 Base64 方法

> ID：12712393
> 
> 赞同：2
> 
> 时间：2012-10-03T16:04:26.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionpack

尝试在 Rails ApplicationController 中实现 HTTP 摘要身份验证，但在调用以下命令时出现预期异常`authenticate_or_request_with_http_digest(REALM)`：

```
undefined method `unpack' for nil:NilClass 
```

堆栈跟踪的顶部：

```
/Users/chadmiko/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/base64.rb:58:in
`decode64' actionpack (3.2.8)
lib/action_controller/metal/http_authentication.rb:301:in
`validate_nonce' actionpack (3.2.8)
lib/action_controller/metal/http_authentication.rb:188:in
`validate_digest_response' actionpack (3.2.8)
lib/action_controller/metal/http_authentication.rb:179:in
`authenticate' actionpack (3.2.8)
lib/action_controller/metal/http_authentication.rb:168:in
`authenticate_with_http_digest' actionpack (3.2.8)
lib/action_controller/metal/http_authentication.rb:163:in
`authenticate_or_request_with_http_digest' 
```

其他输出（注意：我正在使用 rvm 并创建了一个项目 gemset）：

```
chadmiko [ ~/Documents/Projects/msa-web ]$ ruby -v
ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin10.8.0]
chadmiko [ ~/Documents/Projects/msa-web ]$ rails --version
Rails 3.2.8 
```

另外，如果我启动 irb：

```
chadmiko [ ~/Documents/Projects/msa-web ]$ irb
1.9.2-p290 :001 > require 'base64'
 => true 
```

感觉这里有一个简单的解决方案，但我只是想念它。任何提示将不胜感激。谢谢。

# ruby - 这个 Rails 代码在做什么？同步且安全地调用方法

> ID：12712394
> 
> 赞同：0
> 
> 时间：2012-10-03T16:04:28.257
> 
> 标签：ruby, ruby-on-rails-3

有人可以帮我分解这段代码吗？我不确定这里到底发生了什么......

```
 @user.synchronously.delete

   def self.synchronously
     return self.safely
   end

   def synchronously
     return self.safely
   end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:06:19.613

您可能需要查看`lib`文件夹以查看是否有一个名为已`safely`实现的插件。如果没有，请搜索代码库`safely`并查看出现了什么。

# ruby-on-rails - 如何将数据库列名的翻译显示为视图中的表标题，Rails 3

> ID：12712397
> 
> 赞同：6
> 
> 时间：2012-10-03T16:04:33.817
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, internationalization, rails-i18n

我有一个名为的模型`User`，其属性名为`current_sign_in_at`. 在我的**en.yml**文件中，我有这样的显示名称......</p>

```
en-GB:
  activerecord:
    attributes:
      user:
        current_sign_in_at: "Last sign-in" 
```

…这使我可以使用`= f.label :current_sign_in_at`.

但是我怎样才能对表格标题使用相同的翻译，即不在表格中？

```
%th= :current_sign_in_at 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T16:11:24.937

您可以使用静态方法“human_attribute_name”，[请参阅 API Dock 上的文档](http://apidock.com/rails/ActiveRecord/Base/human_attribute_name/class)

在你的情况下：

```
%th= User.human_attribute_name :current_sign_in_at 
```

（用于`User.human_name`显示用 I18n 翻译的型号名称`en.activerecord.models.user`）

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T12:35:42.897

国际化表格标题的另一个选项是[table_for gem](https://github.com/hunterae/table-for)。

这将让您编写 erb 代码，例如：

```
<%= table_for @user do |table| %>
  <% table.column :current_sign_in_at %>
<% end %> 
```

# html - Apple 是否从 iOS 设备中删除了 HTML5 缓存离线查看？

> ID：12712399
> 
> 赞同：5
> 
> 时间：2012-10-03T16:04:38.670
> 
> 标签：html, caching, offline, cache-manifest, html5-appcache

我在四月份为我的公司制作了一个 HTML5 “webapp”，那时，我能够将其放置在 iPhone 和 iPad 的主屏幕上，并将其保存为离线查看的书签（Android 和 BB 也是如此，但是那些没有出现问题）。

现在，6 个月后，我尝试加载页面，对于我的 iPhone 和 iPad，主屏幕按钮不会加载，但书签仍然有效。

没有信号时是否存在阻止主屏幕按钮加载的故障？

（是的，我知道几年前有问题/答案，但我正在寻找更新的答案）

这是我的清单：

```
CACHE MANIFEST

    #v1.3

    CACHE:
    nyipad.css
    nymobile.css
    expoLogo.png
    schedule.jpg
    contact.jpg
    fav.png 
```

就像我说的，这确实适用于 Android、BB 和 iOS 书签，并且只会在 iOS 主屏幕上失败。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T09:01:39.740

iOS6 采取[了几项措施](http://taitems.tumblr.com/post/24936855546/what-ios-6-mobile-safari-offers-front-end-devs)来加快浏览速度，并在此过程中[引入了一些错误](http://www.devthought.com/2012/09/22/understanding-the-ios6-ajax-bugs/)，并且[一些不涉及您的情况](http://blog.nsbasic.com/?p=928)。

在 iOS6 上，主屏幕管理数据的方式完全不同。它不与 Web App 数据共享数据，而是使用单独的存储来存储主屏幕数据以及本机应用程序。

简而言之，这意味着：

*   升级到 iOS6 时主屏幕应用程序中的数据丢失
*   使用 Web 应用和主屏幕应用时的不同用户数据（appcache、本地存储、SQLite 等）
*   主屏幕应用数据被视为原生应用数据，不受浏览器“清除数据”功能的影响

来源： http: [//blog.nsbasic.com/ ?p=928](http://blog.nsbasic.com/?p=928)

# ipad - 不能在 ipad 上工作

> ID：12712400
> 
> 赞同：0
> 
> 时间：2012-10-03T16:04:42.990
> 
> 标签：ipad, jsf, file-upload

我使用 JSF`<t:inputFileUpload>`标签将文件上传到我的网站。它在具有所有浏览器的 PC 上都能正常工作，但是当我在我的电脑上测试它时`iPad`它不起作用。它在 中显示为禁用`iOS 5`。它上传图像，但不上传文本文件或 pdf 或 word 或 excel 文件`iOS 6`。

你有没有遇到过类似的情况？如何将文档和电子表格从 iPad 上传到我的网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:26:37.413

此问题并非特定于 JSF。它基本上只是一个 HTML 代码生成器。它在网络服务器上运行并生成一堆 HTML，这些 HTML 被发送到客户端（在您的情况下是 iPad），然后在那里进行解释。`<t:inputFileUpload>`只是生成一个`<input type="file">`HTML 。

反过来，该 HTML 元素在基于 Safari Mobile 的浏览器中确实被禁用。JSF 看起来像个魔术师，但它确实无法控制客户端决定对检索到的 HTML 做什么。您需要寻找在 Safari Mobile 端启用此功能的第 3 方客户端库。

### 也可以看看：

*   [一个用于移动 safari 的 html5 网络应用程序，用于从 Photos.app 上传图像？](https://stackoverflow.com/questions/3891831/a-html5-web-app-for-mobile-safari-to-upload-images-from-the-photos-app)
*   [通过 iPad 上传文件](https://stackoverflow.com/questions/4081997/upload-files-via-ipad)
*   [HTML 文件浏览在 iPad 中不起作用](https://stackoverflow.com/questions/6463818/html-file-browse-not-working-in-ipad)

# visual-studio-2010 - Visual Studio 2010 中的 Opencv

> ID：12712401
> 
> 赞同：0
> 
> 时间：2012-10-03T16:04:50.940
> 
> 标签：visual-studio-2010, debugging, opencv

> **可能重复：**
> [OpenCV 2.3 C++ Visual Studio 2010](https://stackoverflow.com/questions/7011238/opencv-2-3-c-visual-studio-2010)

我正在运行一个简单的 opencv 程序来显示运行 Visual Studio 的图像。我在柳树车库遵循了这个过程。在调试模式下，我收到错误代码 (0xc0150002)。Dependency walker 说缺少 msvcp90d.dll、msvcr90d.dll、ieshims.dll。我已经安装了 Visual Studio 的所有库，并且系统上没有这样的 dll。不过也有msvcp100.dll、msvcr100.dll。

但是，如果我打算编写一个简单的代码来打印“！”，那么代码就可以工作。

请帮忙。

# jquery - css3 转换的问题

> ID：12712407
> 
> 赞同：0
> 
> 时间：2012-10-03T16:05:19.963
> 
> 标签：jquery, html, jquery-ui, css, jquery-plugins

我目前正在开发这个网站：

[http://remedia-solutions.com/clientes/0066_burrosconalas/demo/](http://remedia-solutions.com/clientes/0066_burrosconalas/demo/)

目前是一个演示，这就是我用于过渡的内容：

[http://visionmedia.github.com/move.js/](http://visionmedia.github.com/move.js/)

它是用于 css3 转换的 js 框架。

如果您按照 uno,dos,tres 之类的顺序进行操作，它可以完美运行并且没有任何问题，但是如果您执行类似 (tres,dos) 或 (tres,uno,dos) 之类的操作，则动画会一直出错我真的不知道为什么会发生这种情况，我使用了超时功能，但是当您按该顺序对其进行动画处理时仍然无法正常工作，动画延迟了 500 毫秒，然后开始进行动画处理，这很奇怪，因为我的代码中没有该选项。

这是我的js代码：

```
function movimiento(){
    move("#capa3").set('opacity','0').translate(220,0).scale('0').ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
}

$(document).ready(function() {
    var lugar = 1;
    var proviene = 0;

    $("#header span").click(function() {
        var id = this.id;
        if(id == 'uno'){
            if(lugar == 2){

                move("#segunda").set('opacity','0').translate(0,-200).scale(0).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){
                    move("#capa1").delay('0.1s').set('opacity','1').translate(250,250).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
                    move("#capa2").set('opacity','0').translate(220,0).scale('0').ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
                });
                lugar = 1;
            }
            if(lugar == 3){

                move("#cuarta").set('opacity','0').translate(0,-200).scale(0).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){
                    move("#quinta").set('opacity','0').translate(0,-200).scale(0).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){
                    move("#capa3").set('opacity','0').translate(220,0).scale('0').ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
                    move("#capa2").delay('0.8s').set('opacity','0.5').translate(220,0).scale('0').ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){
                            $("#capa2").animate({opacity: 0})
                    });
                    move("#capa1").delay('1s').set('opacity','1').translate(250,250).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
                    })
                    })

                lugar = 1;
            }

            console.log(lugar)
        }
        if(id == 'dos'){
            if(lugar == 1){

                move("#capa1").set('opacity','0').translate(500,1200).scale(5).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
                move("#capa2").delay('0.1s').set('opacity','1').translate(250,250).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){
                    move("#segunda").set('opacity','1').translate(430,-200).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
                });
                lugar = 2;
            }
            if(lugar == 3){

                move("#cuarta").set('opacity','0').translate(0,-200).scale(0).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){
                    move("#quinta").set('opacity','0').translate(0,-200).scale(0).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){
                        setTimeout(movimiento,10)
                        move("#capa2").delay('0.3s').set('opacity','1').translate(250,250).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){
                            move("#segunda").set('opacity','1').translate(430,-200).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();

                        });

                    })
                })

                lugar = 2;
            }

            console.log(lugar)

        }
        if(id == 'tres'){
            if(lugar == 1){

                move("#capa1").set('opacity','0').translate(500,1200).scale(5).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
                move("#capa2").delay('0.5s').set('opacity','0.5').translate(500,1200).scale(5).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){

                });
                move("#capa3").delay('0.8s').set('opacity','1').translate(250,250).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){
                    move("#cuarta").set('opacity','1').translate(430,-200).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
                    move("#quinta").delay('0.1s').set('opacity','1').translate(-430,-200).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
                });
                lugar = 3;
                proviene = 1;
            }
            if(lugar == 2){

                move("#segunda").set('opacity','0').translate(0,-200).scale(0).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){
                    move("#capa2").set('opacity','0').translate(500,1200).scale(5).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
                    move("#capa3").delay('0.1s').set('opacity','1').translate(250,250).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end(function(){

                    move("#cuarta").set('opacity','1').translate(430,-200).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();
                    move("#quinta").delay('0.1s').set('opacity','1').translate(-430,-200).scale(1).ease('cubic-bezier(0.770, 0.000, 0.175, 1.000)').duration('1.5s').end();

                    });
                });
                lugar = 3;
            }

            console.log(lugar)
        }
    });

}); 
```

生病继续寻找解决方案，任何帮助将不胜感激tnx！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:48:42.793

我只是决定使用另一个插件，它没有问题：

[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

是jquery 中转插件。以防万一您想在此处查看代码：

```
$(document).ready(function() {
    var lugar = 1;

    $("#header span").click(function() {
        var id = this.id;

        if(id == 'uno'){
            if(lugar == 2){

                $("#segunda").transition({x:'0px', y: '-200px',scale: 0, opacity: 0},1000, 'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){
                    $("#capa2").transition({x: '220px', y: '0px',scale: 0,opacity : 0},1500,'cubic-bezier(0.770, 0.000, 0.175, 1.000)');
                    $("#capa1").delay(200).transition({x: '250px', y: '250px',scale: 1,opacity : 1},1500,'cubic-bezier(0.770, 0.000, 0.175, 1.000)')
                });

                lugar = 1;
            }
            if(lugar == 3){

                $("#cuarta").transition({x: '0px', y: '-200px',scale: 0,opacity : 0},1000,'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){

                    $("#quinta").transition({x:'0px', y: '-200px',scale: 0, opacity: 0},1000, 'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){
                        $("#capa3").transition({x:'220px', y: '0px',scale: 0, opacity: 0},1500, 'cubic-bezier(0.770, 0.000, 0.175, 1.000)');
                        $("#capa2").delay(200).transition({x:'220px', y: '0px',scale: 0, opacity: '0.5'},1500, 'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){
                            $("#capa2").transition({opacity: 0},100);
                        });
                        $("#capa1").delay(500).transition({x: '250px', y: '250px',scale: 1,opacity : 1},1500,'cubic-bezier(0.770, 0.000, 0.175, 1.000)')
                    })

                })

                lugar = 1;
            }

            console.log(lugar)
        }
        if(id == 'dos'){
            if(lugar == 1){

                $("#capa1").transition({x: '500px', y: '1200px',scale: 5,opacity : 0},1500,'cubic-bezier(0.770, 0.000, 0.175, 1.000)');
                $("#capa2").delay(200).transition({x: '250px', y: '250px',scale: 1,opacity : 1},1500,'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){
                    $("#segunda").transition({x: '430px',y: '-200px', scale: 1,opacity:1},1000,'cubic-bezier(0.770, 0.000, 0.175, 1.000)')
                });

                lugar = 2;
            }
            if(lugar == 3){

                $("#cuarta").transition({x: '0px', y: '-200px',scale: 0,opacity : 0},1000,'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){

                    $("#quinta").transition({x:'0px', y: '-200px',scale: 0, opacity: 0},1000, 'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){
                        $("#capa3").transition({x:'220px', y: '0px',scale: 0, opacity: 0},1500, 'cubic-bezier(0.770, 0.000, 0.175, 1.000)');
                        $("#capa2").delay(200).transition({x:'250px', y: '250px',scale: 1, opacity: 1},1500, 'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){
                            $("#segunda").transition({x: '430px',y: '-200px', scale: 1,opacity:1},1000,'cubic-bezier(0.770, 0.000, 0.175, 1.000)')
                        })

                    })

                })

                lugar = 2;
            }

            console.log(lugar)

        }
        if(id == 'tres'){
            if(lugar == 1){

                $("#capa1").transition({x: '500px', y: '1200px',scale: 5,opacity : 0},1500,'cubic-bezier(0.770, 0.000, 0.175, 1.000)');
                $("#capa2").delay(200).transition({x: '500px', y: '1200px',scale: 5,opacity : '0.5'},1500,'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){
                    $("#capa2").transition({opacity: 0},100);
                });
                $("#capa3").delay(500).transition({x: '250px', y: '250px',scale: 1,opacity : 1},1500,'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){
                        $("#cuarta").transition({x: '430px',y: '-200px', scale: 1,opacity:1},1000,'cubic-bezier(0.770, 0.000, 0.175, 1.000)')
                        $("#quinta").delay(200).transition({x: '-430px',y: '-200px', scale: 1,opacity:1},1000,'cubic-bezier(0.770, 0.000, 0.175, 1.000)')
                    });
                lugar = 3;

            }
            if(lugar == 2){

                $("#segunda").transition({x:'0px', y: '-200px',scale: 0, opacity: 0},1000, 'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){
                    $("#capa2").transition({x: '500px', y: '1200px',scale: 5,opacity : 0},1500,'cubic-bezier(0.770, 0.000, 0.175, 1.000)');
                    $("#capa3").delay(200).transition({x: '250px', y: '250px',scale: 1,opacity : 1},1500,'cubic-bezier(0.770, 0.000, 0.175, 1.000)',function(){
                        $("#cuarta").transition({x: '430px',y: '-200px', scale: 1,opacity:1},1000,'cubic-bezier(0.770, 0.000, 0.175, 1.000)')
                        $("#quinta").delay(200).transition({x: '-430px',y: '-200px', scale: 1,opacity:1},1000,'cubic-bezier(0.770, 0.000, 0.175, 1.000)')
                    });
                })

                lugar = 3;
            }

            console.log(lugar)
        }

    });

}); 
```

# asp-classic - 在 ASP/SQL 中创建多级组合框

> ID：12712413
> 
> 赞同：0
> 
> 时间：2012-10-03T16:05:34.903
> 
> 标签：asp-classic

```
Table categories:
   id  
   name 
   parent_id 
```

价值观

```
 1 - Main Category  - 0,
       2 - Main Category1 - 1,
       3 - Main category2 - 1,
       4 - Subcategory 1  - 2,
       5 - Subcategory 2  - 2
       6 - Main category3 - 1 
```

像这样的组合框

```
Main Category 
     --> Main Category 1
     -------->SubCategory 1
     -------->SubCategory 2
     --> Main Category 2
     --> Main Category 3 
```

如何 ？？？感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:49:02.290

除非您提交表单，否则您需要使用 javascript。下面给出了一个示例代码

```
cat1:<input type="checkbox" id="cat1"><br>

cat2:<input type="checkbox" id="cat2"  onChange="fnc('subcat1','subcat2')"><br>
subcat1:<input type="checkbox" id="subcat1" style="visibility:hidden"><br>
subcat2:<input type="checkbox" id="subcat2" style="visibility:hidden"><br>
cat3:<input type="checkbox" id="cat3">

<script type="text/javascript">
function fnc(id1,id2)
{

if(document.getElementById("cat2").checked==true)
{
document.getElementById(id1).style.visibility='visible';
document.getElementById(id2).style.visibility='visible';
}
else
{
document.getElementById(id1).style.visibility='hidden';
document.getElementById(id2).style.visibility='hidden';
}
}
</script> 
```

# javascript - GMT-0400 (EDT) 在我用 javascript 打印日期后显示

> ID：12712415
> 
> 赞同：0
> 
> 时间：2012-10-03T16:05:40.767
> 
> 标签：javascript

当我在 javascript 中打印出一个日期时，它会将 GMT-0400 (EDT) 添加到它的末尾，有没有办法可以切断它？我在用着

```
date=Date()
document.write(date) 
```

获取日期和时间，但我不想要尾随的 GMT-0400 (EDT)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:14:21.610

您应该能够从`date`对象中获取适当的部分：

```
var date = new Date();

[date.toDateString(), date.toLocaleTimeString()].join(' ');
// "Wed Oct 03 2012 12:13:56" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:11:02.590

1.  Use`var date = new Date();` `Date`是一个构造函数，应该与`new`关键字一起使用。
2.  你需要格式化它。默认情况下，显示的是完整的字符串。

您可以使用[Date API](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)来构建字符串，或[各种](https://github.com/timrwood/moment) [日期](http://www.datejs.com/) [格式](http://sugarjs.com/features#date)库之一，甚至只是像字符串一样操作它（因为它是）：

```
var date = new Date();
document.write(date.split('-')[0]); 
```

另外，出于很多原因，您确实不应该使用`document.write`，但我离题了，因为您的问题与此无关。

# iphone - 设备上ios应用的路径

> ID：12712416
> 
> 赞同：1
> 
> 时间：2012-10-03T16:05:41.000
> 
> 标签：iphone, filepath

好吧，我只想知道是否有可能知道应用程序的路径？我使用了以下代码

```
[NSBundle mainBundle] executablePath]; 
```

它检索到以下值。那是对的。

```
/var/mobile/Applications/FBE187F1-256D-495D-852B-53AECD4F4C23/Test_Data_Fetch.app 
```

我想知道，是否可以检查其他应用程序的存在？问题是`FBE187F1-256D-495D-852B-53AECD4F4C23`每个应用程序的这个特定目录值都会发生变化。我真的很想知道有没有可能！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:09:58.833

您的应用程序无法访问沙盒之外的任何内容，因此您无法直接在文件系统中搜索给定的应用程序。

一种可能的解决方案是，如果您感兴趣的应用程序处理自定义 url 方案，那么您可以检查是否可以打开该 url 方案：

```
NSURL *url = [NSURL URLWithString:customScheme];
BOOL appProbablyExists = [[UIApplication sharedApplication] canOpenURL:url]; 
```

**更新：** [本文](http://danielamitay.com/blog/2012/8/6/how-to-detect-installed-ios-apps)描述了几种可能的方法，但似乎没有明确的方法可以使用公共 API 获取已安装应用程序的列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:05:34.017

*最后，使用**Mac 程序 iExplorer**，我们可以查看任何 App 的数据。这与我的问题无关，尽管它很有用！能达到我的目的！！:]*

# java - 是否可以使用 Hibernate 处理巨大的连接图？

> ID：12712420
> 
> 赞同：0
> 
> 时间：2012-10-03T16:05:46.163
> 
> 标签：java, hibernate, graph, persistence

假设我已经用多对多关系连接了数据库中描述的图。每个数据库行都反映到`Node`具有属性的类上`Linked`，该属性指向所有其他链接节点。

如果我`load()`来自数据库的任何节点，Hibernate 会将所有其他节点级联加载到内存中吗？如果不是，那么它将如何填充`Linked`指向未加载节点的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:13:37.153

[负载 javadoc](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#load%28java.lang.Class,%20java.io.Serializable%29)说：

> 返回具有给定标识符的给定实体类的持久实例，假设该实例存在。当访问非标识符方法时，此方法可能会返回按需初始化的代理实例。

Hibernate（如果未另行指定）将延迟加载实例并代理它们，因此当您尝试访问字段时，代理将从您的数据库中获取值。

在您的特定情况下， Linked 属性将主要指向具有延迟加载属性的代理。Hibernate 使这不会在一个查询中加载整个数据库（或者在这种情况下，您的加载方法）。

# mysql - 如何使用 DQL 执行关系除法？

> ID：12712430
> 
> 赞同：1
> 
> 时间：2012-10-03T16:06:26.323
> 
> 标签：mysql, symfony-1.4, doctrine-1.2, doctrine-query

当尝试使用 Doctrine 1.2 执行关系除法时，我收到一个“重复别名”错误，看起来像是在下面的查询中找到的 DISTINCT：

```
SELECT 
    Data.ID  
FROM 
    Data 
INNER JOIN 
    TaggedData ON (Data.id = TaggedData.data_id) 
INNER JOIN 
    Tag ON (Tag.id = TaggedData.tag_id) 
WHERE 
    Tag.id IN ('1' , '2') 
HAVING COUNT(DISTINCT tag.iD)=2 
```

如果我从查询中删除*DISTINCT*，它会运行但不会得到我想要的。有没有合适的方法让 Doctrine 解决这个问题？

## 具体代码：

```
 $query = $this->createQuery("p")
        ->select("p.*")
        ->innerJoin("p.Data s")
        ->innerJoin("s.Tags c")
    ;
    $query
        ->andWhereIn("c.id", $tags)
        ->addHaving("COUNT(DISTINCT c.id) = ?", count($tags))
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:29:53.603

由于您只返回一个值，因此只需执行原始 SQL：

```
 $sql = <<<SQL

SELECT 
    Data.ID  
FROM 
    Data 
INNER JOIN 
    TaggedData ON (Data.id = TaggedData.data_id) 
INNER JOIN 
    Tag ON (Tag.id = TaggedData.tag_id) 
WHERE 
    Tag.id IN ('1' , '2') 
HAVING COUNT(DISTINCT tag.iD)=2

SQL;

    $conn = Doctrine_Manager::getInstance()->getConnection('connection_name');
    $id = $conn->fetchOne($sql); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T18:16:43.550

您需要一个`GROUP BY`子句来使用没有 distinct 的情况。所以我想如果你在一切`GROUP BY Data.ID`之前添加`HAVING`应该没问题。

# json - Multipart/form-data Flex HTTPService 上传文件

> ID：12712433
> 
> 赞同：3
> 
> 时间：2012-10-03T16:06:44.377
> 
> 标签：json, apache-flex, file-upload, multipartform-data, httpservice

我是 Flex 的新手，也是为 Web 服务编写客户端的新手。我的问题更多关于 Flex (Flash Builder 4.5) API，使用什么 API。

我想访问一个 Web 服务，并为它创建一个任何人都可以使用的 Flex / AIRwrapper。

[这是 webservice 的规范](https://build.phonegap.com/docs/write_api)。

1.  我必须在 POST [https://build.phonegap.com/api/v1/apps上发帖](https://build.phonegap.com/api/v1/apps)
2.  内容类型必须是“multipart/form-data”
3.  请求的 JSON 正文应具有名称“数据”，并且将是这样的：

    ```
    data={"title":"API V1 App","package":"com.alunny.apiv1","version":"0.1.0","create_method":"file"} 
    ```

4.  在帖子的多部分正文中包含一个 zip 文件，参数名称为“file”。

我想制作一个“multipart/form-data”帖子并发送一个字符串和一个 zip 文件。

我对自己的第一个问题是，如果我在正文中同时发送字符串 + 二进制数据，服务器将如何理解字符串的结束位置和 zip 文件的开始位置？

然后我阅读了如何[通过“multipart/form-data”发布请求发送文本+二进制数据](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)。必须有一些界限。

在此之后，我阅读了 flex 中的示例并尝试遵循它。 [http://codeio.wordpress.com/2010/04/03/5-minutes-on-adobe-flex-mimic-file-upload-for-in-memory-contents/](http://codeio.wordpress.com/2010/04/03/5-minutes-on-adobe-flex-mimic-file-upload-for-in-memory-contents/) 但它似乎并不适用我。

```
 public function createNewApp(cb:Function , appFile : File):void 
    {
        var service:HTTPService = new HTTPService();
        service.url = ROOT+"apps";
        service.showBusyCursor = true;
        service.addEventListener(ResultEvent.RESULT, function(e:ResultEvent):void {
            //translate JSON
            trace(e.result);
            var result:String = e.result.toString();
            var data:Object = JSON.parse(result);               
            cb(data.link);
        });
        service.addEventListener(FaultEvent.FAULT, defaultFaultHandler); //todo : allow user to add his own as well
        authAndUploadNewApp(service,appFile);
    }

    private function authAndUploadNewApp(service:HTTPService,appFile : File):void {

        var encoder:Base64Encoder = new Base64Encoder();
        encoder.encode(username + ":"+password);
        service.headers = {Accept:"application/json", Authorization:"Basic " + encoder.toString()};
        service.method ="POST";
        var boundary:String = UIDUtil.createUID();
        service.contentType = "multipart/form-data; boundary=—————————" + boundary;
        var stream:FileStream = new FileStream();
        stream.open(appFile, FileMode.READ);
        var binaryData:ByteArray = new ByteArray();             
        var fileData : String = new String();
        stream.readBytes(binaryData);
        stream.close();         
        fileData = binaryData.readUTFBytes(binaryData.bytesAvailable); // I think this is where I have problem.... how do 
                   //how do i converrt this bytearray/stream of data to string and send it in my post request's body - i guess if this step work rest should work..   
        var params: String = new String();
        var content:String = "—————————" + boundary + "nr";
        content += 'Content-Disposition: form-data; name="data";' + '{"title":"ELS test app 2","package":"com.elsapp.captivate","version":"12.3.09","create_method":"file"}' + "nr";
        content += "—————————" + boundary + "nr";
        content += 'Content-Disposition: form-data; name="file";' + fileData  + "nr";
        content += "—————————–" + boundary + "–nr";
        service.request = content;
        service.send();
    } 
```

# php - HTML表单提交给php用户收到电子邮件但我的电子邮件是空白的

> ID：12712437
> 
> 赞同：0
> 
> 时间：2012-10-03T16:06:49.810
> 
> 标签：php, forms, email

我有一个提交并发送两封电子邮件的表格：一封电子邮件给客户确认，另一封电子邮件给我的销售人员。

给客户的电子邮件工作正常，并在电子邮件正文中显示在表单中输入的姓名和电子邮件

发给我的销售人员的电子邮件列出了表格中输入的信息。但是，当电子邮件发送到我的销售电子邮件地址时，电子邮件的正文显示为空白。

HTML：

```
<form id="RFQ" method="post" action="RFQ-result.php">
        <h1 align="center">Request a Quote</h1>
         <table width="640" border="0" cellpadding="2" align="center">
           <tr>
             <td height="32" colspan="6"><strong>PROJECT INFORMATION</strong></td>
             </tr>
           <tr>
             <td width="14">&nbsp;</td>
             <td width="120" align="right">Project Name:</td>
             <td colspan="4"><span id="spryProjectName">
               <input name="ProjectName" type="text" id="ProjectName" size="50" />
               <span class="textfieldRequiredMsg">*</span></span></td>
        </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="right"><label for="Company2">Company:</label></td>
             <td colspan="4"><span id="spryCompany">
               <input name="Company" type="text" id="Company" size="40" />
               <span class="textfieldRequiredMsg">*</span></span></td>
        </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="right">Address:</td>
             <td colspan="4"><span id="spryAddress">
               <input name="Address" type="text" id="Address" size="50" />
               <span class="textfieldRequiredMsg">*</span></span></td>
        </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="right">City: </td>
             <td><span id="spryCity">
               <input type="text" name="City" id="City" />
               <span class="textfieldRequiredMsg">*</span></span></td>
             <td width="1">&nbsp;</td>
             <td width="135" align="right">State / Province:</td>
             <td width="154"><span id="spryState">
               <input type="text" name="State" id="State" />
               <span class="textfieldRequiredMsg">*</span></span></td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="right">Postal Code:</td>
             <td width="178"><span id="spryZip">
               <input name="Zip" type="text" id="Zip" size="10" maxlength="6" />
               <span class="textfieldRequiredMsg">*</span></span></td>
             <td>&nbsp;</td>
             <td align="right">Country: </td>
             <td><input type="text" name="Country" id="Country" /></td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="right">&nbsp;</td>
             <td>&nbsp;</td>
             <td>&nbsp;</td>
             <td align="right">&nbsp;</td>
             <td>&nbsp;</td>
           </tr>
         </table>
         <table width="640" border="0" cellpadding="2" align="center">
           <tr>
             <td height="32" colspan="6"><strong>CONTACT INFORMATION</strong></td>
           </tr>
           <tr>
             <td width="15">&nbsp;</td>
             <td width="121" align="right">First Name:</td>
             <td width="173"><span id="spryFirstName">
               <input name="FirstName" type="text" id="FirstName" size="20" />
               <span class="textfieldRequiredMsg">*</span></span></td>
             <td width="1">&nbsp;</td>
             <td width="89" align="right">Last Name:</td>
             <td width="203"><span id="spryLastName">
               <input type="text" name="LastName" id="LastName" />
               <span class="textfieldRequiredMsg">*</span></span></td>
        </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="right">Phone:</td>
             <td><span id="spryPhone">
               <input name="Phone" type="text" id="Phone" size="20" />
               <span class="textfieldRequiredMsg">*</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span></td>
             <td>&nbsp;</td>
             <td align="right"><label for="Mobile2">Mobile:</label></td>
             <td><span id="spryMobile">
               <input name="Mobile" type="text" id="Mobile" size="20" />
               <span class="textfieldRequiredMsg">*</span><span class="textfieldInvalidFormatMsg">*Invalid format</span></span></td>
        </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="right">E-mail: </td>
             <td colspan="4"><span id="spryEmail">
             <input name="Email" type="text" id="Email" size="40" />
             <span class="textfieldRequiredMsg">*</span><span class="textfieldInvalidFormatMsg">*</span></span></td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="right">&nbsp;</td>
             <td colspan="4">&nbsp;</td>
        </tr>
        </table>
         <table width="640" border="0" cellpadding="2" align="center">
           <tr> </tr>
         </table>
         <table width="640" border="0" cellpadding="2" align="center">
           <tr>
             <td height="33" colspan="5"><strong>STANDARD CONFIGURATION</strong></td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td width="156" colspan="2" align="right">Location of Drive:</td>
             <td width="437" colspan="2"><span id="spryDriveCity">
               <label for="DriveCity"></label>
               <input type="text" name="DriveCity" id="DriveCity" />
               <span class="textfieldRequiredMsg">*</span></span>, <span id="spryDriveState">
                 <label for="DriveState"></label>
                 <input type="text" name="DriveState" id="DriveState" />
                 <span class="textfieldRequiredMsg">*</span></span></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">Temperature Range:</td>
             <td colspan="2"><span id="spryMinTemp">
               <label for="MinTemp"></label>
               <input name="MinTemp" type="text" id="MinTemp" size="5" />
               -       <span class="textfieldRequiredMsg">*</span></span><span id="spryMaxTemp">
                 <label for="MaxTemp"></label>
                 <input name="MaxTemp" type="text" id="MaxTemp" size="5" />
                 <span class="textfieldRequiredMsg">*</span></span> °C</td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">Altitude:</td>
             <td colspan="2"><span id="spryAltitude">
               <label for="Altitude"></label>
               <input name="Altitude" type="text" id="Altitude" size="5" />
               <span class="textfieldRequiredMsg">*</span><span class="textfieldInvalidFormatMsg">Invalid format</span></span> ft</td>
             </tr>
           <tr>
             <td width="15">&nbsp;</td>
             <td colspan="2" align="right"><label for="PumpType">Type of Application:</label></td>
             <td colspan="2"><span id="spryPumpType">
               <select name="PumpType" id="PumpType">
                 <option> </option>
                 <option value="Beam Pump">Beam Pump</option>
                 <option value="Progressive Cavity Pump">Progressive Cavity Pump</option>
                 <option value="Rotaflex Pump">Rotaflex Pump</option>
                 <option value="Submersible Pump">Submersible Pump</option>
                 <option value="Surface Centrifugal Compressor">Surface Centrifugal Compressor</option>
                 <option value="Surface Centrifugal Pump">Surface Centrifugal Pump</option>
                 <option value="Surface Reciprocating Compressor">Surface Reciprocating Compressor</option>
                 <option value="Surface Reciprocating Pump">Surface Reciprocating Pump</option>
                 </select>
               <span class="selectRequiredMsg">*</span></span></td>
        </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">Drive Manufacturer:</td>
             <td colspan="2"><span id="spryManufacturer">
               <label for="Manufacturer"></label>
               <input name="Manufacturer" type="text" id="Manufacturer" size="25" />
               <span class="textfieldRequiredMsg">*</span></span></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">Model No:</td>
             <td colspan="2"><span id="spryModel">
               <label for="Model3"></label>
               <input name="Model" type="text" id="Model3" size="20" />
               <span class="textfieldRequiredMsg">*</span></span></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">Speed Range:</td>
             <td colspan="2"><span id="sprytextfield18">
               <label for="MinSpeed"></label>
               <input name="MinSpeed" type="text" id="MinSpeed" size="10" />
               <span class="textfieldRequiredMsg">*</span></span> - <span id="spryMaxSpeed">
                 <label for="MaxSpeed"></label>
                 <input name="MaxSpeed" type="text" id="MaxSpeed" size="10" />
                 <span class="textfieldRequiredMsg">*</span></span> ft/sec</td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">Input Voltage:</td>
             <td colspan="2"><span id="spryInputVoltage">
               <label for="InputVoltage"></label>
               <select name="InputVoltage" id="InputVoltage">
                 <option> </option>
                 <option value="200-240 VAC Input">200-240 VAC Input</option>
                 <option value="380-500 VAC Input">380-500 VAC Input</option>
                 <option value="525-690 VAC Input">525-690 VAC Input</option>
                 </select>
               <span class="selectRequiredMsg">*</span></span></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">Input Phase:</td>
             <td colspan="2"><span id="spryInputPhase">
               <select name="InputPhase" id="InputPhase">
                 <option> </option>
                 <option value="Single Phase">Single Phase</option>
                 <option value="Three Phase">Three Phase</option>
                 </select>
               <span class="selectRequiredMsg">*</span></span></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">Frequency:</td>
             <td colspan="2"><span id="spryFrequency">
               <label for="Frequency"></label>
               <input name="Frequency" type="text" id="Frequency" size="10" />
               <span class="textfieldRequiredMsg">*</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span> Hz</td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">kW:</td>
             <td colspan="2"><span id="sprykW">
               <label for="kW"></label>
               <input name="kW" type="text" id="kW" size="10" />
               <span class="textfieldRequiredMsg">*</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">HP:</td>
             <td colspan="2"><span id="spryHP">
               <label for="HP"></label>
               <input name="HP" type="text" id="HP" size="5"/>
               <span class="textfieldRequiredMsg">*</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">kVA:</td>
             <td colspan="2"><span id="sprykVA">
               <label for="kVA"></label>
               <input name="kVA" type="text" id="kVA" size="5" width="75"/>
               <span class="textfieldRequiredMsg">*</span><span class="textfieldInvalidFormatMsg">Invalid format.</span></span></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">Amps:</td>
             <td colspan="2"><span id="spryAmps">
               <label for="Amps3"></label>
               <input name="Amps" type="text" id="Amps3" size="5" width="75"/>
               <span class="textfieldRequiredMsg">*</span><span class="textfieldInvalidFormatMsg">Invalid format.</span> </span></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="right">&nbsp;</td>
             <td colspan="2">&nbsp;</td>
             </tr>
           </table>
         <table width="640" border="0" cellpadding="2" align="center">
           <tr>
             <td height="32" colspan="5" align="left"><strong>OPTIONS</strong></td>
           </tr>
           <tr>
             <td width="14">&nbsp;</td>
             <td colspan="4" align="left">Enclosure &amp; Environment Options:</td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td width="237"><input type="checkbox" name="Shield" id="Shield" />
               <label for="Shield">Sun/Snow Sheild</label></td>
             <td width="15">&nbsp;</td>
             <td width="327"><input type="checkbox" name="ColdKit" id="ColdKit" />
               <label for="ColdKit">Cold Weather Kit (-40 to -50 °C)</label></td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td><input type="checkbox" name="WallStand" id="WallStand" />
               <label for="WallStand">Wall Mounting Stand</label></td>
             <td>&nbsp;</td>
             <td><input type="checkbox" name="HeatKit" id="HeatKit" />
               <label for="HeatKit">Heat Trace Kit</label></td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td><input type="checkbox" name="FloorBase" id="FloorBase" />
               <label for="FloorBase">Floor Mounting Base</label></td>
             <td colspan="2">&nbsp;</td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td width="15" align="left">&nbsp;</td>
             <td>&nbsp;</td>
             <td colspan="2">&nbsp;</td>
        </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="left">Input:</td>
             <td colspan="2">Output:</td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td><input type="checkbox" name="PowerKit" id="PowerKit" />
               <label for="PowerKit">Power Terminal Kit.</label></td>
             <td>&nbsp;</td>
             <td><input type="checkbox" name="MotorKit" id="MotorKit" />
               <label for="MotorKit">Motor Terminal Kit</label></td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td><input type="checkbox" name="Harmonic" id="Harmonic" />
               <label for="Harmonic">Harmonic Filter Enclosure</label></td>
             <td>&nbsp;</td>
             <td><input type="checkbox" name="SineFilter" id="SineFilter" />
               <label for="SineFilter">Sine Filter Enclosure</label></td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="left">&nbsp;</td>
             <td>&nbsp;</td>
             <td>&nbsp;</td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="left">VFD:</td>
             <td>&nbsp;</td>
             <td>&nbsp;</td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td colspan="3"><input type="checkbox" name="Fieldbus" id="Fieldbus" />
               <label for="Fieldbus">Fieldbus Networks</label></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td colspan="3"><input type="checkbox" name="ControlKit" id="ControlKit" />
               <label for="ControlKit">Control Terminal Kit</label></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td colspan="3"><input type="checkbox" name="General" id="General" />
               <label for="General">General Purpose I/O, 3DI, 2DO, 2AI, 1AO</label></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td colspan="3"><input type="checkbox" name="Relay" id="Relay" />
               <label for="Relay">Relay Option, 3RO, 240Vac, 2A</label></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td colspan="3"><input type="checkbox" name="DCSupply" id="DCSupply" />
               <label for="DCSupply">24 V Ext. DC Supply Connector</label></td>
             </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td>&nbsp;</td>
             <td colspan="2">&nbsp;</td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td colspan="2" align="left">Operation &amp; Support:</td>
             <td colspan="2">&nbsp;</td>
           </tr>
           <tr>
             <td>&nbsp;</td>
             <td align="left">&nbsp;</td>
             <td colspan="3"><input type="checkbox" name="iCM" id="iCM" />
               <label for="iCM">SALT iCM (remote access internect control module)</label></td>
             </tr>
         </table>
         <blockquote>
           <p align="right">
             <input name="Submit" type="submit" id="Submit" value="Submit"/>
           </p>
         </blockquote>

</form> 
```

PHP：

```
 <?php
$ProjectName = $_POST['ProjectName'];
$Company = $_POST['Company'];
$Address = $_POST['Address'];
$City = $_POST['City'];
$State = $_POST['State'];
$Zip = $_POST['Zip'];
$Country = $_POST['Country'];
$FirstName = $_POST['FirstName'];
$LastName = $_POST['LastName'];
$Phone = $_POST['Phone'];
$Mobile = $_POST['Mobile'];
$Email = $_POST['Email'];

$DriveCity = $_POST['DriveCity'];
$DriveState = $_POST['DriveState'];
$MinTemp = $_POST['MinTemp'];
$MaxTemp = $_POST['MaxTemp'];
$Altitude = $_POST['Altitude'];
$PumpType = $_POST['PumpType'];
$Manufacturer = $_POST['Manufacturer'];
$Model = $_POST['Model'];
$MinSpeed = $_POST['MinSpeed'];
$MaxSpeed = $_POST['MaxSpeed'];
$InputVoltage = $_POST['InputVoltage'];
$InputPhase = $_POST['InputPhase'];
$Frequency = $_POST['Frequency'];
$kW = $_POST['kW'];
$HP = $_POST['HP'];
$kVA = $_POST['kVA'];
$Amps = $_POST['Amps'];

$Shield = $_POST['Shield'];
$WallStand = $_POST['WallStand'];
$FloorBase = $_POST['FloorBase'];
$ColdKit = $_POST['ColdKit'];
$HeatKit = $_POST['HeatKit'];

$PowerKit = $_POST['PowerKit'];
$Harmonic = $_POST['Harmonic'];
$MotorKit = $_POST['MotorKit'];
$SineFilter = $_POST['SineFilter'];

$Fieldbus = $_POST['Fieldbus'];
$ControlKit = $_POST['ControlKit'];
$General = $_POST['General'];
$Relay = $_POST['Relay'];
$DCSupply = $_POST['DCSupply'];

$iCM = $_POST['iCM'];

//Sending Email to form owner
$header = "From: $Email\n"
. "Reply-To: $Email\n";
$subject = "SALT RFQ";
$email_to = "sales@pmcsalt.com";
$message = "Project Name: $ProjectName\n" . "Company: $Company\n" . "Address: $Address\n" . "City: $City\n" . "State: $State\n" . "Zip: $Zip\n" . "Country: $Country\n" . "First Name: $FirstName\n" . "Last Name: $LastName\n" . "Phone: $Phone\n" . "Mobile: $Mobile\n" . "Email: $Email\n" . 

"Drive City: $DriveCity\n" . 
"Drive State: $DriveState\n" . 
"Min Temp: $MinTemp\n" . 
"Max Temp: $MaxTemp\n" . 
"Altitude: $Altitude\n" . 
"Application Type: $PumpType\n" . 
"Manufacturer: $Manufacturer\n" . 
"Model: $Model\n" . 
"MinSpeed: $MinSpeed\n" . 
"MaxSpeed: $MaxSpeed\n" . 
"InputVoltage: $InputVoltage\n" . 
"InputPhase: $InputPhase\n" . 
"kW: $kW\n" . 
"HP: $HP\n" . 
"kVA: $kVA\n" . 
"Amps: $Amps\n" . 

"Sun/Snow Shield: $Shield\n" . 
"Wall Mounting Stand: $WallStand\n" . 
"Floor Mounting Base: $FloorBase\n" . 
"Cold Weather Kit: $ColdKit\n" . 
"Heat Trace Kit: $HeatKit\n" . 

"Power Terminal Kit: $PowerKit\n" . 
"Harmonic Filter Enclosure: $Harmonic\n" . 
"Motor Terminal Kit: $MotorKit\n" . 
"Sine Filter Enclosure: $SineFilter\n" . 

"Fieldbus Networks: $Fieldbus\n" . 
"Control Terminal Kit: $ControlKit\n" . 
"General Purpose I/O, 3DI, 2DO, 2AI, 1AO: $General\n" . 
"Relay Option, 3RO, 240Vac, 2A: $Relay\n" . 
"24 V Ext. DC Supply Connector: $DCSupply\n" . 

"SALT iCM: $iCM\n" . 

mail($email_to, $subject ,$message ,$header ) ;

//Sending Confirmation Email to Client
$header = "From: sales@pmcsalt.com\n"
. "Reply-To: sales@pmcsalt.com\n";
$subject = "SALT RFQ";
$email_to = "$Email";
$message = "Dear $FirstName $LastName,\n \n We have received your pricing request for $ProjectName. One of our sales representatives will be with you within 48 hours to discuss pricing for your custom application.\n \n Thank you for chosing Power Management Controls!! \n \n \n";
mail($email_to, $subject ,$message ,$header ) ;

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:09:22.623

您没有正确终止您的连接：

```
"24 V Ext. DC Supply Connector: $DCSupply\n" . 

"SALT iCM: $iCM\n" . 

mail($email_to, $subject ,$message ,$header ) ; 
```

这应该是：

```
24 V Ext. DC Supply Connector: $DCSupply\n" . 

"SALT iCM: $iCM\n";

mail($email_to, $subject ,$message ,$header ) ; 
```

目前，您`$message`在拨打电话时没有收到任何信息`mail()`。

# iphone - 输入文本时在 UIAlertView 中启用按钮 - 多个警报视图

> ID：12712438
> 
> 赞同：2
> 
> 时间：2012-10-03T16:06:59.323
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，当用户单击工具栏中的保存按钮时，然后通过 UIAlertView 提示用户通过选择另存为图像或另存为播放来保存当前工作的方式。当用户选择另存为播放时，他们会收到第二个 UIAlertView 提示，该视图也有一个文本字段供他们插入播放的名称。我想要实现的是，当没有输入文本时，“确定”按钮被禁用，当输入的文本长度为 1 或更多时，文件就可以被保存（使用归档器，这可以正常工作，所以这不是问题），然后启用“确定”按钮。下面列出的是显示两个警报视图的代码，以及选择视图的不同项目时会发生什么。

```
- (IBAction)selectSaveType {
UIAlertView *message = [[UIAlertView alloc] initWithTitle:@""
                                                  message:@"Please Select an Option."
                                                 delegate:self
                                        cancelButtonTitle:@"Save Play"
                                        otherButtonTitles:@"Save to Photos", nil];
[message show];

}
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
if([title isEqualToString:@"Save Play"])
{
    NSLog(@"Save Play was selected.");
    [self GetFileName];
}
else if([title isEqualToString:@"Save to Photos"])
{
    NSLog(@"Save To Photos was selected.");
    //here is where we need to find how to call saveDrawing.
    [self saveDrawing];

}
else if([title isEqualToString:@"Ok"])
{
    NSLog(@"OK selected");
    UITextField *fName= [alertView textFieldAtIndex:0];
    NSString *NameFile = fName.text;
    [self savePlay:NameFile];

}

}

-(void)savePlay:(NSMutableString *)fileName{
//code here to save via archive.
   NSArray *pathforsave = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
   NSString *documentDirectory = [pathforsave objectAtIndex:0];
    //here we need to add the file extension onto the file name before we add the name to the path
   [fileName appendString:@".hmat"];
   NSString *strFile = [documentDirectory stringByAppendingPathComponent:fileName];
[NSKeyedArchiver archiveRootObject:matView.drawables toFile:strFile];

} 
```

我一直在尝试使用下面的代码来处理这个问题，但是当第一个 UIAlertView 触发时（这是要求选择一个播放 - 不存在文本字段） - 下面的函数运行并崩溃应用程序，因为没有第一个警报视图中的文本字段。

```
- (BOOL)alertViewShouldEnableFirstOtherButton:(UIAlertView *)alertView
{
NSString *inputText = [[alertView textFieldAtIndex:0] text];
if( [inputText length] >= 1 )
{
    return YES;
}
else
{
    return NO;
}
} 
```

当第一个警报触发时，alertViewShouldEnableFirstOtherButton 被击中，然后我的应用程序在模拟器中崩溃。有谁知道为什么会发生这种情况？有两件事我不太确定

一 - 为什么在第二个警报视图上命名播放的 Ok 按钮的句柄在处理其他按钮的同一块中处理。由于它是一个单独的警报视图，它不应该在它自己的块中吗？

二 - 为什么 alertViewShouldEnableFirstOtherButton 在尚未到达第二个警报视图时被点击，它被调用并与第一个警报视图一起运行，这会使应用程序崩溃。

感谢您的帮助，我是目标 C 的新手。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-03T16:21:24.093

将为您呈现的任何警报视图调用警报视图的委托方法。话虽如此，此代码将崩溃，因为`textFieldAtIndex:0`在普通警报视图中不存在。要解决这个问题，您需要做的就是在委托方法中添加一个 if 语句来标识哪个警报调用了该操作。

编辑：不再按名称识别警报。代码现在检查代表发件人的样式。

```
 - (BOOL)alertViewShouldEnableFirstOtherButton:(UIAlertView *)alertView
{
    if (alertView.alertViewStyle == UIAlertViewStylePlainTextInput) {
        if([[[alertView textFieldAtIndex:0] text] length] >= 1 )
        {
            return YES;
        }
        else
        {
            return NO;
        }
    }else{
        return YES;
    }
} 
```

# php - “不喜欢的地方更新？”

> ID：12712440
> 
> 赞同：2
> 
> 时间：2012-10-03T16:07:05.900
> 
> 标签：php, sql, where

如果字符串尚不存在，我正在尝试将字符串附加到字段：

```
mysql_query("UPDATE gals4 SET tags = CONCAT(tags, '$instag') WHERE id = '$instagnum' AND tags NOT LIKE '$instag'"); 
```

这只是附加到“标签”，无论它是否存在于现场。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:09:47.073

要回答您的直接问题，您必须将字符 % 放在匹配字符串的开头和结尾：

```
 "AND tags NOT LIKE '%$instag%'" 
```

但是，您应该知道这是在 SQL 数据库中存储数据的一种*糟糕*的方式。至少存在三个问题：

1.  如果您的标签嵌入了其他标签（例如“cat”和“scat”），除非您编写非常复杂的基于逗号的搜索，否则您会找到错误的记录。
2.  这些搜索永远不会被索引，因此随着记录数量的增长将变得非常缓慢。
3.  您无法根据允许的标签列表验证使用的标签，无法保证数据库中只有允许的标签，或者轻松呈现现有或允许的标签列表。

正确的解决方案是在数据库中添加至少一个表，称为 gals_tags，包含 galid 和 tag 列。每个标签插入*一条记录到该表中。*如果 gal 有多个标签，则为每个标签添加一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:19:07.727

您需要另一个变量 $instagwildcard ，它是 $instag 但在 $instag 之后（可能之前）有一个 %

如所写，您的选择正在寻找与 $instag 不完全匹配的字符串 - 我假设您还希望排除在字符串中某处包含 $instag 而不是完全匹配的字符串...。

```
$instagwildcard = "%" . $instag . "%";
mysql_query("UPDATE gals4 SET tags = CONCAT(tags, '$instag') WHERE id = '$instagnum' AND tags NOT LIKE '$instagwildcard'"); 
```

但我也同意拉里的评论。

# c# - 比较对象和返回列表

> ID：12712445
> 
> 赞同：2
> 
> 时间：2012-10-03T16:07:13.240
> 
> 标签：c#, c#-4.0

我有一个如下所示的类定义：

```
public class MyObjectModel
{
   public int ObjectID { get; set; }

   //for when the user's data is split in 2 fields
   public string FirstName { get; set; }
   public string LastName { get; set; }

   //for when the user's data is all in one field
   public string FirstLastName { get; set; }
} 
```

我有一个列表，`MyObjectModel`我想使用自定义排序过程按名称对它们进行排序，因为这涉及检查数据是否包含 a `LastName`（在本例中使用 排序`LastName`）或仅`FirstLastName`（在本例中我将破坏字符串并在第二个词上排序，如果有的话，或者如果只有一个词，就对整个字符串进行排序。）

我不确定两件事：

1.  我应该使用`IComparer`or`IComparable`吗？
2.  一旦它确定了排序的顺序（我可以这样做），我该如何做到这一点，以便该方法的输出是一个表示`ObjectID`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:11:07.460

使用 Linq：

```
 List<MyObjectModel> objects = new List<MyObjectModel>();
  List<int> ids = objects.OrderBy(o => FunctionWhichReturnsNameForSort(o)).Select(o => o.ObjectID).ToList(); 
```

`FunctionWhichReturnsNameForSort`可以在另一个类、扩展或成员中实现。

```
// should be in a static helper class
public static string NameForSort(this MyObjectModel obj)
{
  if (!string.IsNullOrEmpty(obj.LastName)) return obj.LastName;

  return obj.FirstLastName.Split(... // your splitting logic goes here
}

var ids = objects.OrderBy(o => o.NameForSort()).Select(o => o.ObjectID).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:11:59.160

当你真的需要这个奇怪的双重解决方案时，你会更频繁地遇到这个和类似的问题。作为更通用的解决方案，考虑将名称的业务逻辑放在一些只读属性中：

```
//for when the user's data is split in 2 fields
public string FirstName { get; set; }
public string LastName { get; set; }

//for when the user's data is all in one field
public string FirstLastName { get; set; }

public string FullName
{
   get { ... }  // pick from LastName, FirstName, FirstLastName 
}

public string SortName
{
   get { ... }  // pick from LastName, FirstLastName 
} 
```

> 一旦它确定了排序的顺序（我可以这样做），我该如何做到这一点，以便该方法的输出是一个表示 ObjectID 的整数列表

```
result = MyObjectList
          .OrderBy(m => m.SortName)   // sort on SortName
          .Select(m => m.ObjectID)    // select the Id
          .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:11:29.003

如果这种排序特定于一个用例，则可以使用 LINQ 来实现：

```
var sortedIds = models.OrderBy(SecondName).Select(m => m.ObjectId).ToList();

private static string SecondName(MyObjectModel model)
{
  if (!string.IsNullOrWhitespace(model.LastName)) return model.LastName;
  return model.FirstLastName.Split(' ').Last();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T16:15:54.413

虽然您可以使用 LINQ，但正如其他人所建议的那样，这将涉及创建一个全新的列表，而不是改变现有列表。这可能会或可能不会更可取。如果您想对列表本身进行排序，这也很容易：

```
List<string> list = new List<string>(){"a","b","c"};

list.Sort((a,b)=> a.CompareTo(b)); 
```

只需获取您的列表，调用`Sort`并传入一个 lambda，该 lambda 接受两个项目并返回一个整数，指示哪个更大。在您的情况下，只需调用一些方法`a`并`b`获取一个字符串，然后在这两个字符串上使用`CompareTo`或。`string.Compare`

# parsing - 用空格分隔的单词列表的 EBNF 语法

> ID：12712446
> 
> 赞同：0
> 
> 时间：2012-10-03T16:07:13.340
> 
> 标签：parsing, grammar, lexer, ebnf

我试图了解如何使用 EBNF 来定义形式语法，特别是由空格分隔的单词序列，例如

```
<non-terminal> [<word>[ <word>[ <word>[ ...]]] <non-terminal> 
```

1.  定义单词终端的正确方法是什么？
2.  表示所需空格的正确方法是什么？
3.  可选的重复列表如何表示？
4.  是否有任何关于 EBNF 的示例教程？

提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T19:15:01.420

你必须决定你的词法分析器是否要为空格返回一个标记（终端）。您还必须决定它（词法分析器）将如何定义单词，或者您的语法是否会这样做（在这种情况下，词法分析器将作为终端返回什么？）。

剩下的，主要是理解 EBNF 表示法的精妙之处，这是一个 ISO 标准（ISO 14977:1996——它可以从免费[提供的标准](http://standards.iso.org/ittf/PubliclyAvailableStandards/index.html)免费下载，你也可以从[ISO](http://www.iso.ch/)获得） ，但这是一个在实践中很大程度上被忽略的标准。（我处理的语言——C、C++、SQL——在定义文档中使用 BNF 表示法，但在它们中的任何一种都不是 EBNF。）

1.  无论你想对一个词做出正确的定义。例如，您需要考虑如何对待 name `P. J. O'Neill`。词法分析器会为此返回什么标记？
2.  这与上一期密切相关；词法分析器要返回的终端是什么。
3.  可选的重复列表用大括号括起来`{`，`}`或者您可以使用 Kleene Star 表示法。
4.  有一篇论文[Extended BNF — RS Scowen 的通用基础标准](http://www.cl.cam.ac.uk/~mgk25/iso-14977-paper.pdf)解释了 EBNF。还有关于[EBNF](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)的维基百科条目。

我认为可以使用以下方法定义一个非空的、以空格分隔的单词列表：

```
non_empty_word_list = word { space word } 
```

其中所有名称都是非终结符。您需要根据系统的相关终端来定义这些。

# java - Java 嵌套 Map 到 Scala 嵌套序列

> ID：12712450
> 
> 赞同：1
> 
> 时间：2012-10-03T16:07:25.690
> 
> 标签：java, scala, playframework-2.0

我是 Scala 的新手，我们的项目将 Java 和 Scala 代码混合在一起（使用 Play 框架）。我正在尝试编写一个可以采用嵌套 Java Map 的 Scala 方法，例如：

```
LinkedHashMap<String, LinkedHashMap<String, String>> groupingA = new LinkedHashMap<String, LinkedHashMap<String,String>>(); 
```

并将该 java 对象传递给可以循环遍历它的 Scala 函数。我有以下 scala 对象定义来尝试支持上述 Java 嵌套映射：

```
Seq[(String, Seq[(String,String)])] 
```

Java 文件和 Scala 文件都可以单独编译，但是当我的 java 对象尝试创建我的 scala 类的新实例并传入嵌套映射时，我得到一个编译器错误，其中包含以下详细信息：

```
[error]  ..... overloaded method value apply with alternatives:
[error]   (options: java.util.List[String])scala.collection.mutable.Buffer[(String, String)] <and>
[error]   (options: scala.collection.immutable.List[String])List[(String, String)] <and>
[error]   (options: java.util.Map[String,String])Seq[(String, String)] <and>
[error]   (options: scala.collection.immutable.Map[String,String])Seq[(String, String)] <and>
[error]   (options: (String, String)*)Seq[(String, String)]
[error]  cannot be applied to (java.util.LinkedHashMap[java.lang.String,java.util.LinkedHashMap[java.lang.String,java.lang.String]]) 
```

关于如何将嵌套的 Java LinkedHashMap （如上面）传递到 Scala 文件中的任何想法，我可以在其中一般地迭代嵌套集合？我正在尝试编写足够通用的代码，以便它也适用于嵌套的 Scala 集合，以防我们改用 Scala 而不是 Java 编写我们的游戏框架控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:19:22.080

试试这个：

```
import scala.collections.JavaConversions.mapAsScalaMap

val lhm: LinkedHashMap[String, LinkedHashMap[String, String]] = getLHM()
val scalaMap = mapAsScalaMap(lhm).mapValues(mapAsScalaMap(_).toSeq).toSeq 
```

我对此进行了测试，并得到了类型的结果`Seq[String, Seq[(String, String)]]`

（转换将包装原始 Java 对象，而不是实际创建具有值的副本的 Scala 对象。因此不需要对 Seq 的转换，您可以将其保留为 Map，迭代顺序将相同） .

让我猜猜，你在处理查询参数吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:42:39.937

`Seq`是在 Scala 集合层次结构中定义的基本特征。虽然 java 和 scala 提供字节码兼容性，但 scala 定义了许多自己的类型，包括自己的集合库。这里的问题是，如果你想编写惯用的 scala，你需要将你的 java 数据转换为 scala 数据。在我看来，你有几个选择。

*   您可以使用 Richard 的解决方案并在您的 scala 代码中将 java 类型转换为 scala 类型。我认为这很难看，因为它假设您的输入将始终来自 java 领域。

*   您可以编写漂亮、完美的 scala 处理程序，并提供一个提供丑陋 java 转换行为的伴生对象。这将您的 scala 实现与 java 细节分开。

*   或者您可以编写一个隐式定义，如下面的定义，将其泛化到您的内心。

.

```
import java.util.LinkedHashMap
import scala.collection.JavaConversions.mapAsScalaMap

object App{
  implicit def wrapLhm[K,V,G](i:LinkedHashMap[K,LinkedHashMap[G,V]]):LHMWrapper[K,V,G] = new LHMWrapper[K,V,G](i)

  def main(args: Array[String]){
    println("Hello World!")
    val lhm = new LinkedHashMap[String, LinkedHashMap[String,String]]()
    val inner = new LinkedHashMap[String,String]()
    inner.put("one", "one")
    lhm.put("outer",inner);
    val s = lhm.getSeq()
    println(s.toString())
  }
  class LHMWrapper[K,V,G](value: LinkedHashMap[K,LinkedHashMap[G,V]]){
    def getSeq():Seq[ (K, Seq[(G,V)])] = mapAsScalaMap(value).mapValues(mapAsScalaMap(_).toSeq).toSeq
  }
} 
```

# java - Java - 游戏：多个实例

> ID：12712452
> 
> 赞同：2
> 
> 时间：2012-10-03T16:07:27.310
> 
> 标签：java, arrays, object

我正在尝试用 Java 制作游戏，而且我已经有了一些东西。但我想让玩家射击子弹。我想出了创建一个对象数组的想法，并将所有 Bullet 实例放入数组中。然后在一个线程中，我想让它们全部移动（数组中的所有对象）。

这是我放在主课上的内容：

```
Bullet[] BulletArray;

public int Bullets = 0;

public void run() {

    for(int i = 0; i < Bullets; i++){
        BulletArray[i].Step();
    }

    if(Key.FireKey){
        BulletArray[Bullets + 1] = new Bullet();
        Bullets += 1;
    }
} 
```

我刚刚在原始代码中包含了基本的东西，即运行函数运行良好。该代码不起作用，当我按下 Fire 时它给了我一个错误。错误在某处

```
BulletArray[Bullets + 1] = new Bullet(); 
```

我希望你明白我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:18:42.323

好吧，对于初学者来说，你`BulletArray`的从未初始化过。

当您输入 时`run()`，您的`for()`循环似乎工作正常，因为它实际上并没有进入该块。您`int i = 0`已声明并且已经大于或等于您的限制，即`int Bullet = 0`. 这意味着循环体永远不会执行。

然后，当您按下 时`Key.FireKey`，它会尝试引用一个不存在的数组索引。它不能存在，因为数组从未被初始化过。

要初始化你的数组，你需要做更多这样的事情：

```
private int maxBullets = 10;
Bullet[] bulletArray = new Bullet[maxBullets]; 
```

然后你的`for()`循环将真正进入。但是请注意，在您的`Key.FireKey`块中，您将必须执行一些检查以确保您不会`IndexOutOfBoundsException`因为尝试发射比您创建的更多的子弹而得到一个。IE，

```
if(Key.FireKey) {
    if(bullets < maxBullets) {
        bulletArray[++bullets] = new Bullet();
    }
} 
```

# couchdb - couchDB 更新附件

> ID：12712459
> 
> 赞同：1
> 
> 时间：2012-10-03T16:07:43.537
> 
> 标签：couchdb

我可以在不重新上传现有文档的情况下更新它们的附件吗？

我试过：

```
<?php
    $json = '
    {
        "_id":"attachment_doc",
        "_rev":'.$rev.',
        "_attachments":
        {
            "free-wallpaper-31.jpg":
            {
                "revpos":3,
                "content_type":"image\/jpeg",
                "data": "'.base64_encode(file_get_contents('free-wallpaper-31.jpg')).'"
            }
        }
    }
';

$doc = $couchdb->doc_upload_attachments('16beb67b990604791b3ffde7dd000576', $json);
var_dump($doc);
?> 
```

但这会覆盖现有附件并使用新修订存储文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T19:16:50.667

我不熟悉 PHP 的 API，但通常在 CouchDB REST API 中，您可以上传附件，而无需上传文档和其他以前上传的附件。查看The Definite Guide[中 API 章节的附件部分。](http://guide.couchdb.org/draft/api.html#attachments)在命令行中：

```
curl -vX PUT http://localhost:5984/YOUR_DB/YOUR_DOCUMENT/YOUR_ATTACHMENT.jpg?rev=REVISION_OF_THE_DOCUMENT_BEFORE_UPLOADING_AN_ATTACHMENT --data-binary @FILE_ON_THE_DISK.JPG -H "Content-Type: image/jpg" 
```

它对我有用 :) 是的，上传成功时必须更改文档的修订版。如果您在使用您的语言的绑定上传时遇到问题，只需使用标准 HTTP API 上传即可。

# jquery - 如何使用 jQuery 选项卡“Easy Tabs”实现“下一步”按钮

> ID：12712463
> 
> 赞同：0
> 
> 时间：2012-10-03T16:07:49.347
> 
> 标签：jquery, jquery-ui, button, tabs, next

该插件在文档中具有下一个和上一个按钮，但没有提到实现它们的方法... [http://os.alfajango.com/easytabs/#previous-and-next-buttons](http://os.alfajango.com/easytabs/#previous-and-next-buttons)

任何人都可以向我发送正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:01:45.983

驱动下一个和上一个按钮的代码，从选项卡面板下方：

```
$('.next-tab, .prev-tab').click(function() {
  var i = parseInt($(this).attr('rel'));
  var tabSelector = $tabs.children('a:eq(' + i + ')').attr('href');
  $tabContainer.easytabs('select', tabSelector);
  return false;
}); 
```

确保记下对功能至关重要的按钮元素的 class 和 rel

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-13T20:18:27.113

我喜欢[user1026361](https://stackoverflow.com/users/1026361/user1026361)的回答。但是显示的站点上的默认实现还有一点不足之处。例如，我只想在选项卡的任一侧使用一对前一个和下一个符号，而不是每个选项卡的内容中的单个集合。这是我想出的：

**JS：（** *请注意，prev 和 next 函数可能可以合并为一个函数。它们几乎相同：D）*

```
$( document ).ready(function() {
  $("#tab-full-container").easytabs({
    animate: true,
    animationSpeed: 1000,
    defaultTab: "span#tab-1",
    panelActiveClass: "active-content-div",
    tabActiveClass: "selected-tab",
    tabs: ".tab-wrap > div.etabs > span",
    updateHash: false,
    cycle: 5000
  });

  var $tabs = $('.tab');
  var $tabContainer = $('.etab');

  $('.prev-tab').click( function() {
    var currTab, i;
    currTab = $('a.selected-tab').attr('href');
    var i = ( parseInt(currTab.match(/\d+/)) - 2 );
    $tabs.children('a:eq(' + i + ')').click();
  });

  $('.next-tab').click( function() {
    var currTab, i;
    currTab = $('a.selected-tab').attr('href');
    var i = ( parseInt(currTab.match(/\d+/)) );
    $tabs.children('a:eq(' + i + ')').click();
  });

}); 
```

**HTML：**

```
<div id="tab-full-container" class='tab-container'>
  <div class="tab-wrap">
    <span class="prev-tab ctl">«</span>
    <div class='etabs'>
      <span class='tab' id="tab-1"><a href="#tabs1">&nbsp;</a></span>
      <span class='tab'><a href="#tabs2">&nbsp;</a></span>
      <span class='tab'><a href="#tabs3">&nbsp;</a></span>
      <span class='tab'><a href="#tabs4">&nbsp;</a></span>
      <span class='tab'><a href="#tabs5">&nbsp;</a></span>
      <span class='tab'><a href="#tabs6">&nbsp;</a></span>
      <span class='tab'><a href="#tabs7">&nbsp;</a></span>
      <span class='tab'><a href="#tabs8">&nbsp;</a></span>
    </div>
    <span class="next-tab ctl">»</span>
  </div>
  <div class='panel-container'>

    <div id="tabs1">
    </div>
    <div id="tabs2">
    </div>
    <div id="tabs3">
    </div>

    ...ETC.

  </div>
</div> 
```

如果您愿意，我也可以发布**CSS 。**

# php - 更新数据库 - php

> ID：12712466
> 
> 赞同：0
> 
> 时间：2012-10-03T16:08:13.463
> 
> 标签：php, mysql

当用户点击 ID 为“保存”的提交按钮但它不起作用时尝试更新数据库记录，这是我对 MYSQL 更新查询的内容：

```
 if ($_POST['SaveCall'] ) {

// set database server access variables:
$host = "localhost";
$user = "root";
$pass = "";
$db = "TILRenewals";

// open connection
$connection = mysql_connect($host, $user, $pass) or die ("Unable to connect!");

// select database
mysql_select_db($db) or die ("Unable to Choose database!");

$SPKCustNo = mysql_real_escape_string($_POST['SPKSelect']);

$FName = mysql_real_escape_string($_POST['FName']);
$SName = mysql_real_escape_string($_POST['SName']);
$PostCode = mysql_real_escape_string($_POST['PostCode']);
$Product = mysql_real_escape_string($_POST['Product']);
$PaymentMethod = mysql_real_escape_string($_POST['PaaymentMethod']);
$RenewalDate = mysql_real_escape_string($_POST['Renewa;Date']);
$HomeTel = mysql_real_escape_string($_POST['HomeTel']);
$WorkTel = mysql_real_escape_string($_POST['WorkTel']);
$Priority = mysql_real_escape_string($_POST['PriorityCheckBox']);
$Call1 = mysql_real_escape_string($_POST['Call1']);
$Call1Notes = mysql_real_escape_string($_POST['Call1Notes']);

$Call2 = mysql_real_escape_string($_POST['Call2']);
$Call2Notes = mysql_real_escape_string($_POST['Call2Notes']);

$Call3 = mysql_real_escape_string($_POST['Call3']);
$Call3Notes = mysql_real_escape_string($_POST['Call3Notes']);

$Call4 = mysql_real_escape_string($_POST['Call4']);
$Call4Notes = mysql_real_escape_string($_POST['Call4Notes']);

$Call5 = mysql_real_escape_string($_POST['Call5']);
$Call5Notes = mysql_real_escape_string($_POST['Call5Notes']);

$Outcome = mysql_real_escape_string($_POST['Outcome']);

$sql="UPDATE Data
SET ForeName = '$FName', Surname='$SName', PostCode='$PostCode', Product='$Product', PaymentMethod='$PaymentMethod',RenewalDate='$RenewalDate',HomeTel='$HomeTel,WorkTel='$WorkTel',Priority='$Priority',Call1='$Call1',Call1Notes='$Call1Notes',Call2='$Call2',Call2Notes='$Call2Notes',Call3='$Call3',Call3Notes='$Call3Notes',Call4='$Call4',Call4Notes='$Call4Notes',Call5='$Call5',Call5Notes='$Call5Notes',Outcome='$Outcome'
WHERE SPKCustNo='$SPKCustNo' ";

mysql_query($sql) or die(mysql_error()); ;

}

?> 
```

任何人都可以帮忙吗？谢谢！

*******已编辑上述内容以包括与数据库的连接并发送查询，现在我得到：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 '01268510268',Priority='1',Call1='03/10/12',Call1Notes='Test Call 1 Notes',Call2=' 附近使用正确的语法2号线**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:13:52.150

好吧，假设这是所有的代码，你有。假设您确实连接到数据库，我看不到您连接到数据库的位置。您没有执行查询。

在 $sql 中获得 sql 查询后，执行此操作。 `mysql_query($sql);`

**编辑**

您没有在之后关闭报价`$Hometel`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:21:28.083

试试这个：

```
mysql_query($sql) or die(mysql_error()); 
```

它会给你错误

如果您无法修复它，请在此处发布。你会得到帮助。**

# solr - Apache solr 中同义词的加权强度

> ID：12712468
> 
> 赞同：0
> 
> 时间：2012-10-03T16:08:22.373
> 
> 标签：solr, lucene, nlp

我一直在查看 Apache solr java 文档，似乎默认情况下它仍然使用 Lucene 的加权系统来确定匹配的强度。它还允许明确定义同义词，但据我所知，这是一个严格的二元定义，不存在同义词的定量推论。这是否可以在 solr 中实现而无需大量重写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T08:23:12.633

您可以使用同义词创建一个字段，并在 dismax 中赋予它较低的权重。检查[此](https://stackoverflow.com/questions/10660632/is-there-way-to-boost-original-term-more-while-using-solr-synonyms)以获取更多信息。

# ios - MonoTouch 中的应用程序状态保存和恢复

> ID：12712469
> 
> 赞同：2
> 
> 时间：2012-10-03T16:08:29.167
> 
> 标签：ios, xamarin.ios

我需要在我的 monotouch 应用程序中实现状态保存协议，如 Apple Docs 中所述：

[应用状态保存和恢复](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/StatePreservation/StatePreservation.html#//apple_ref/doc/uid/TP40007072-CH11-SW13)

但是我在 Xamarin 网站上找不到有关 UIViewControllerRestoration 协议的任何文档或项目示例。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:41:14.983

此协议当前未绑定在 MonoTouch 中。这里有一个错误：

[https://bugzilla.xamarin.com/show_bug.cgi?id=8778](https://bugzilla.xamarin.com/show_bug.cgi?id=8778)

也就是说，AppDelegate 中有一个类似的回调，application:viewControllerWithRestorationIdentifierPath:coder: 在 MonoTouch 中绑定到方法：

UIViewController GetViewController（UIApplication 应用程序，string[] restoreIdentifierComponents，NSCoder 编码器）。

对于每个未设置恢复类的已保存控制器，将调用一次。因此，您可以在 App Delegate 中覆盖此方法来代替恢复类。

# flash - Flash CS5.5 指定设备字体

> ID：12712472
> 
> 赞同：1
> 
> 时间：2012-10-03T16:08:39.033
> 
> 标签：flash, fonts, device

我正在使用 Flash CS5.5 并希望指定设备字体，而不是嵌入。

问题是，虽然我知道设备上字体的准确名称，但我无法将字体名称输入到 Flash 创作环境中。我所拥有的只是创作机器中安装的字体的下拉列表。从选定的下拉列表中选择具有相似字体名称的“使用设备字体”会导致影片在设备上默认为 _sans。

我不希望开始使用 AS3 指定文本框和分配字体。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:40:32.817

据我所知，没有任何方法可以做到这一点——我看到很多人都在哀叹没有这个功能！

您能做的最好/唯一的事情是使用嵌入设置来仅嵌入您需要的字符（如果弄清楚这一点不切实际，“基本拉丁语”在 99% 的情况下都很好 - 如果我教你在这里吸蛋），并限制您使用的字体数量，从设计角度来看，这也可能是一个好主意。

关于您的最后一句话，您只需嵌入一次字体 - 每个具有该字体的文本框都可以引用它。

抱歉，我无法提供更多帮助，但我认为您想要做的事情无法完成。

PS 作为替代方案，您可以将字体嵌入到单独的 swf 文件中并从中动态加载它们，因此您无需使用不需要的字体来膨胀主文件：

[http://www.mokisystems.com/blog/flash-as3-loading-fonts/](http://www.mokisystems.com/blog/flash-as3-loading-fonts/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:02:15.757

AFAIK 这只能用 AS3 完成。我知道你说过你不想使用 AS3，但这很简单。这是代码：

要知道字体的确切名称，请使用此

```
var f:Font;
var fonts:Array = Font.enumerateFonts(true);
for(var i:int = 0; i < fonts.length; i++) {
    f = fonts[i];
    trace(f.fontName + "," + f.fontStyle + "," + f.fontType);
} 
```

要首先使用字体，您可以通过这种方式创建一个 TextFormat 对象

```
var myFormat:TextFormat = new TextFormat();
myFormat.font = "Helvetica"; //use your own font here 
```

然后，您可以将此格式应用于任何文本字段，由 AS3 创建或在 Flash IDE 中手动创建。

```
myTextfield.setTextFormat(myFormat); 
```

如果您的 TextFormat 可以全局访问，例如使用单例模式，那么您将能够在代码中的任何位置使用它。但那是另一个故事了……

# iphone - 是否可以以编程方式加载 MainWindow

> ID：12712473
> 
> 赞同：0
> 
> 时间：2012-10-03T16:08:44.940
> 
> 标签：iphone

> **可能重复：**
> [在没有 xib 的情况下在 Cocoa Touch 中以编程方式加载视图控制器和视图层次结构](https://stackoverflow.com/questions/809898/loading-a-view-controller-view-hierarchy-programmatically-in-cocoa-touch-witho)

我知道它可以通过目标摘要中的 set MainWindow 加载。它显示为

![在此处输入图像描述](../Images/1c0690a62aec830232e4c72e1ae8acd6.png)

是否可以以编程方式加载 MainWindow？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:06:47.783

是的，您可以.. 以下是实用的创建方法，

```
 self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
 [self.window makeKeyAndVisible]; 
```

# javascript - javascript中的动态事件构建

> ID：12712477
> 
> 赞同：2
> 
> 时间：2012-10-03T16:08:56.470
> 
> 标签：javascript, jquery, javascript-events

我想为脚本中的每个函数创建一个事件，然后将事件触发器注入函数的末尾。

这样我就可以准确地看到每个功能何时完成，并将诸如钩子之类的事件用于其他功能

如果我可以动态地执行此操作，我可以添加任意数量的新函数，而无需创建和附加这些事件。

这是我正在尝试做的一个基本示例，这实际上不起作用，但它给了你一个想法。我一直在使用 jQuery，但我会接受任何 javascript 框架和任何方法。

```
var obj = {};

(function()
{
    this.init = function()
    {
        // loop through every function
        $.each(this, function(k, v)
        {
            // create an event for every function
            $('body').bind(v, function()
            {
                 console.log('Event: ' + v + ' Finished');
            });

            // Add a event trigger into each specific function in the loop
            this[v].call($('body').trigger(v));
        });
    }

    this.another_function = function()
    {
        // do something
    }

    this.some_function = function()
    {
         /do something
    }

}).apply(obj);

obj.init(); 
```

谢谢

（编辑）脚本本身基本上呈现一个日历，但有很多回调，ajax 请求，按钮。等等...如果我可以将每个功能与一个事件联系起来，那么在扩展它、添加新功能等时我的生活会更轻松...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:16:48.470

循环遍历每个函数，用新函数替换它，它在同一对象上调用原始函数并在主体上触发事件。

```
var obj = { };

(function()
{
    this.init = function()
    {
        var self = this;
        foreach(var name in this) {
            if (typeof k !== 'Function') continue;
            if (name ==='init') continue;

            var original = this[name];

            var newFunc = function() {
                original.apply(self, arguments);
                $('body').trigger(name);
            }

            this[name] = newFunc;
        } 
    }

this.another_function = function()
    {
        // do something
    }

this.some_function = function()
    {
         /do something
    }

}).apply(obj);

obj.init(); 
```

# sql - 用于测试字符串值是否包含回车的 SQL 查询

> ID：12712480
> 
> 赞同：9
> 
> 时间：2012-10-03T16:09:07.227
> 
> 标签：sql, oracle, comparison, sql-like

试图找出测试 VARCHAR 列值是否以回车符结尾的正确方法。试过这个，但它不起作用，数据库是`Oracle 11g`......

```
select name from myTable where name LIKE '%\r' OR name like '%\n' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T16:12:41.550

尝试

```
SELECT name from myTable where name like '%'||chr(10) or name like '%'||chr(13) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T16:27:12.047

要查找包含不可打印字符（例如回车或垂直制表符或行尾）的值，您可以使用[regexp_like](http://docs.oracle.com/cd/E11882_01/server.112/e26088/conditions007.htm#SQLRF00501)函数。在您的情况下，要显示特定列的字符串值在末尾包含回车的行，可以使用类似的查询。

```
select *
  from your_table_name
 where regexp_like(trim(string_column), '[[:space:]]$') 
```

[**演示**](http://www.sqlfiddle.com/#!4/c5f4a/1)

* * *

**回复评论**

`Trim`默认情况下，函数会删除前导和尾随空格，并且不会删除**回车符**或**行尾**字符。让我们进行一个简单的测试：

```
SQL> create table Test_Table(
  2    id number,
  3    col1 varchar2(101)
  4  );

Table created

SQL> insert into Test_Table (id, col1)
  2    values(1, 'Simple string');

1 row inserted

SQL> commit;

Commit complete

SQL> insert into Test_Table (id, col1)
  2    values(1, 'Simple string with carriage return at the end' || chr(13));

1 row inserted

SQL> commit;

Commit complete

SQL> insert into Test_Table (id, col1)
  2    values(1, '   Simple string with carriage return at the end leading and trailing spaces' || chr(13)||'   ');

1 row inserted

SQL> commit;

Commit complete

SQL> insert into Test_Table (id, col1)
  2    values(1, '  Simple string leading and trailing spaces  ');

1 row inserted

SQL> commit;

Commit complete

SQL> select *
  2    from test_table;

        ID COL1
--------------------------------------------------------------------------------
         1 Simple string
         1 Simple string with carriage return at the end
         1    Simple string with carriage return at the end leading and trailing spaces
         1   Simple string leading and trailing spaces

SQL> 
SQL> select *
  2    from test_table
  3   where regexp_like(trim(col1), '[[:space:]]$')
  4  ;

        ID COL1
----------------------------------------------------------------------------------
         1 Simple string with carriage return at the end
         1    Simple string with carriage return at the end leading and trailing spaces

SQL> 
```

# video-streaming - 新手的 jwplayer 流媒体

> ID：12712486
> 
> 赞同：0
> 
> 时间：2012-10-03T16:09:57.403
> 
> 标签：video-streaming, jwplayer

嗨，我想使用 jwplayer 在我的网站上放几个视频。我已经使用我的 mp4 视频设置了 jwplayer，但是当点击开始时，播放器似乎下载了整部电影，而不是立即开始播放。我发现我需要设置一个流媒体服务器 - 我想知道：什么是流媒体视频（如 youtube）的最佳流媒体方法（我想为默认播放器使用 640x360 像素，为全屏使用 720p）？我可以在我自己的服务器上做吗（win 2008 server running php）提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:47:34.207

使用 jwplayer 可以轻松做到这一点。您需要确保您的视频是

1.  flv 文件 - 只需将它们重新组合到 flv 即可让它们立即启动
2.  带有提示音轨的 mp4

提示音轨可以使用 MP4Box 工具 MP4Box -hint input.mp4 获得

执行 MP4Box -h 提示以查看更多详细信息。

要了解什么提示只是谷歌一点。基本上 mp4 文件的标题必须放在文件的开头才能立即开始播放。

# .net - 如何从 ArrayList 转换为 cli::array？

> ID：12712487
> 
> 赞同：2
> 
> 时间：2012-10-03T16:09:56.763
> 
> 标签：.net, arraylist, c++-cli

如何从`System::Collections::ArrayList`（包含`System::String^`例如）转换为数组`cli::array<String^>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:24:10.447

如果 ArrayList 在您的代码中并且您可以更改它，请考虑将其更改为`List<String^>`. 您将在使用该类时获得类型安全、更简洁的代码、更多可用的 Linq 方法，并且该类上的普通内置方法将返回 an`array<String^>`而无需跳过任何环节。

* * *

ArrayList 上有一个内置方法可以为您执行此操作。调用 ToArray，并指定要返回的数组的类型。

```
ArrayList^ list = ...;
array<String^>^ ar = reinterpret_cast<array<String^>^>(list->ToArray(String::typeid)); 
```

如果您对其他集合类型（不使用泛型）执行此操作，则必须做更多手动操作。您可以手动完成：

```
ArrayList^ list = ...;
array<String^>^ ar = gcnew array<String^>(list.Count);
for(int i = 0; i < list.Count; i++)
    ar[i] = dynamic_cast<String^>(list[i]); 
```

或者您可以使用 Linq 将 ArrayList 转换为`IEnumerable<String^>`，然后将其转换为字符串数组。

```
ArrayList^ list = ...;
array<String^> ar = Enumerable::ToArray(Enumerable::OfType<String^>(list)); 
```

# genetic-algorithm - 有 GA 经验的人可以检查我的健身功能吗？

> ID：12712489
> 
> 赞同：0
> 
> 时间：2012-10-03T16:09:59.347
> 
> 标签：genetic-algorithm, mathematical-optimization, genetic-programming, genetic

这是我的问题，我正在修改为遗传算法找到的代码，以对函数进行数值优化。本质上，给定函数 F 和我们的期望值，程序使用 GA 搜索提供适当期望值的 x 和 y 值。我一直在修改我的健身功能，我觉得这是问题的根源。

基本代码分解是：

生成随机染色体群体

使用基于每个染色体适应度的冒泡排序

检查其中是否有任何一个碰巧解决了该功能

如果一个人解决了它，然后停止并打印它

否则，根据父母生成孩子排序，检查最佳答案，循环

我希望有人能指出我正确的方向，今晚我将再次剖析它，但我似乎在这方面遇到了障碍。对于比我硬编码的更复杂的函数，它似乎收敛于一个随机百分比（通常小于 20）......但它应该更接近于 0。简单编码的函数不断返回大约 99% 的差异......所以我不是 100% 的。

```
import java.util.*;
import java.util.Comparator;
import java.util.TreeMap; 
/**
 * Modified from a file created Jul 9, 2003
 * Original @author Fabian Jones
 * Modified @author Cutright
 * @version 2
 */
public class ScratchGA
{
private static int NUM_CHROMOSOMES = 100;   //num of chromosomes in population
private static double MUTATE =  .01;  //chance of a mutation i.e. 88.8%
private static int desiredValue = 60466176; //desired value of function 
private static int cutoff = 1000; // number of iterations before cut off
private static int longPrint = 0;  //1 means print out each iteration of the population
private boolean done = false;
private Chromosome[] population;
int iteration = 0;

/**
 * Constructor for objects of class ScratchGA
 */
public ScratchGA()
{
    generateRandomPopulation(NUM_CHROMOSOMES);
    printPopulation();
}

/**
 * Generate a random population of chromosomes  - WORKS
 * 
 */
private void generateRandomPopulation(int pop)
{
    System.out.println("Generating random population of " + pop + ", now." +"\n");

    population = new Chromosome[pop];

    for(int i=0; i<pop; i++)
    {
        int rand = (int)(Math.random()*4095);  // Range 0 to 4095
        population[i] = (new Chromosome(rand, 12));
    }
}

/**
 * Codesaver for generating a new line in the output
 */
private void newLine()
{
    System.out.println("\n");
}

/**
 * Prints the population (the chromosomes)
 */
private void printPopulation()
{
    int x=1; // variable to print 10 chromosomes on a line
    if (iteration==0)
    {
    System.out.println("Initial population: " + "\n" );
    }
    else
    {
        if (longPrint ==1)
        {
    System.out.println("Population " + iteration + " :" + "\n");
    for(int i=0; i<=(NUM_CHROMOSOMES-1); i++)
    {
        System.out.print(population[i] + " ");
        if(x == 10)
        {
            newLine();
            x=1;
        }
        else
        {
            x++;
        }
    }

    newLine();
      }
      else
      {
      System.out.println("Best answer for iteration " + iteration + " is: " + population[0] + " with a % difference of " +population[0].getFitness());
      newLine();
    }
}
}
 /** 
 * Start
 * Bubblesort initial population by their fitness, see if the first chromosome
 * in the sorted array satisfies our constraint.
 * IF done ==true or max num of iterations
 *        Print best solution and its fitness
 * ELSE
 *    generate new population based on old one, and continue on
 */
public void start()
{
   // System.out.println("Starting bubblesort... Please Wait.");
    bubbleSort();
    //System.out.println("After Bubblesort: " );
    //printPopulation();
    topFitness();

    if(done || iteration==cutoff){
        System.out.println("DONE!!");   
        System.out.println("Best solution: " + population[0] + " % Difference: " + population[0].getFitness());
    }
    else{
        iteration++;
        generateNewPopulation();
        printPopulation();
        start();
    }
}
 /**
 * If the top chromosomes fitness (after being sorted by bubblesort) is 100%
 * done == true
 */
private void topFitness()
{
    if (population[0].getFitness() == 0)
    {
        done = true;
    }
}

/**
 * Called from chromosome,
 * Tests the x and y values in the function and returns their output
 */
public static double functionTest(int x, int y)
{
    return (3*x)^(2*y); // From our desired value we're looking for x=2, y=5 
}

/**
 * Returns the desired outcome of the function, with ideal x and y
 * Stored above in a private static
 */
public static int getDesired()
{
    return desiredValue;
}

/**
 * Sort Chromosome array, based on fitness
 * utilizes a bubblesort
 */
 private void bubbleSort()
 {
     Chromosome temp;

     for(int i=0; i<NUM_CHROMOSOMES; i++){
         for(int j=1; j<(NUM_CHROMOSOMES-i); j++){
             if(population[j-1].getFitness() > population[j].getFitness())
             {
                 //swap elements
                 temp = population[j-1];
                 population[j-1] = population[j];
                 population[j] = temp;
                }
            }
        }
    }
/**
* Top 30: Elitism
* Next 60: Offspring of Elitists
* Next 10: Random
*/
  private void generateNewPopulation(){

    System.out.println("***Generating New Population");
    Chromosome[] temp = new Chromosome[100];
    for (int i = 0; i < 30; i++)
    {
     Chromosome x = population[i];
     if (shouldMutate())
     mutate(x);
     temp[i]=x;
    } 
   for (int i = 0; i < 30; i++)
   {
    temp[i+30] =cross1(population[i], population[i+1]);
    temp[i+60] = cross2(population[i], population[i+1]);
   } 
   for (int i = 90; i<100; i++)
   {
        int rand = (int)(Math.random()*4095);  // Range 0 to 4095
        Chromosome x = new Chromosome(rand, 12);
        temp[i] = x;
    }
    population = temp;
}
/**
 * First cross type, with two parents
 */
private Chromosome cross1(Chromosome parent1, Chromosome parent2){
    String bitS1 = parent1.getBitString();
    String bitS2 = parent2.getBitString();
    int length = bitS1.length();
    int num = (int)(Math.random()*length); // number from 0 to length-1
    String newBitString = bitS2.substring(0, num) + bitS1.substring(num, length);
    Chromosome offspring = new Chromosome();
    offspring.setBitString(newBitString);

    if(shouldMutate()){
        mutate(offspring);
    }

    return offspring;
}

/**
 * Second cross type, parents given in same order as first, but reverses internal workings
 */
private Chromosome cross2(Chromosome parent1, Chromosome parent2){
    String bitS1 = parent1.getBitString();
    String bitS2 = parent2.getBitString();
    int length = bitS1.length();
    int num = (int)(Math.random()*length); // number from 0 to length-1
    String newBitString = bitS2.substring(0, num) + bitS1.substring(num, length);
    Chromosome offspring = new Chromosome();
    offspring.setBitString(newBitString);

    if(shouldMutate()){
        mutate(offspring);
    }

    return offspring;
}

/**
 * Returns a boolean of whether a character should mutate based on the mutation value at top
 */
private boolean shouldMutate(){
    double num = Math.random()*100;
    return (num <= MUTATE);
}

/**
 * Returns a boolean of whether a character should mutate based on the mutation value at top
 */
private void mutate(Chromosome offspring){
    String s = offspring.getBitString();
    int num = s.length();
    int index = (int) (Math.random()*num);
    String newBit = flip(s.substring(index, index+1));
    String newBitString = s.substring(0, index) + newBit + s.substring(index+1, s.length());
    offspring.setBitString(newBitString);
}
/**
 * Flips bits in a string 1 to 0, 0 to 1
 */
private String flip(String s){
    return s.equals("0")? "1":"0";
} 
```

}

```
import java.lang.Comparable;
import java.math.*;
/**
* Modified from a file created on Jul 9, 2003
* Unsure of original author
* 
*/
public class Chromosome implements Comparable
{
protected String bitString;

/**
 * Constructor for objects of class Chromosome
 */
public Chromosome()
{
}

public Chromosome(int value, int length)
{
    bitString = convertIntToBitString(value, length);
}

public void setBitString(String s)
{
    bitString = s;
}

public String getBitString()
{
    return bitString;
}

public int compareTo(Object o)
{
    Chromosome c = (Chromosome) o;
    int num = countOnes(this.bitString) - countOnes(c.getBitString());
    return num;
}

public double getFitness()
{
    String working = bitString;
    int x1 = Integer.parseInt(working.substring(0,6),2);
    int x2 = Integer.parseInt(working.substring(6),2);
    double result = ScratchGA.functionTest(x1,x2);
    double percentDiff =  ((ScratchGA.getDesired() - result)/ScratchGA.getDesired())*100;
    if (percentDiff >= 0)
    {
    return percentDiff;
}
    else
    {
    return -percentDiff;
}
}

public boolean equals(Object o)
{
    if(o instanceof Chromosome)
    {
        Chromosome c = (Chromosome) o;
        return c.getBitString().equals(bitString);
    }
    return false;
}

public int hashCode()
{
    return bitString.hashCode();
}

public String toString()
{
    return bitString;
}

public static int countOnes(String bits)
{
    int sum = 0;
    for(int i = 0; i < bits.length(); ++ i){
        String test = bits.substring(i, i+1);
        if(test.equals("1")){
            sum = sum + 1;
        }
    }
    return sum;
}

public static String convertIntToBitString(int val, int length)
{
    int reval = val;

    StringBuffer bitString = new StringBuffer(length);
    for(int i = length-1; i >=0; --i ){
        if( reval - (Math.pow(2, i)) >= 0 ){
            bitString.append("1");
            reval = (int) (reval - Math.pow(2, i));
        }
        else{
            bitString.append("0");
        }
    }
    return bitString.toString();
}

public static void main(String[] args
){
    //System.out.println(convertIntToBitString(2046, 10));
    Chromosome c = new Chromosome(1234, 10);
    //System.out.println(c.fitness());
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T05:43:25.580

实际上，这是一个简单的错误，我应该抓住它。主要问题是使用 return (3*x)^(2*y); ^ 是 java 中的按位异或，但是是指数。（哎呀）使用 Math.pow(3*x,2*y); 解决了这个问题；...并且对适应度函数进行了一点仔细检查，使其启动并运行，并进行了一些其他小的更改:)

# forms - Magento：为什么在一个页面上组合时登录和注册表单验证不起作用

> ID：12712492
> 
> 赞同：1
> 
> 时间：2012-10-03T16:10:07.943
> 
> 标签：forms, validation, magento

**编辑 051012**：事实证明，问题与表单在一个页面上的关系不大，而与原型和 jQuery 之间的冲突有关；在页脚底部包含 jQuery，但未设置为无冲突。我只是在包含那个特定的 jQuery 之后添加了这个：

```
<script type="text/javascript">
//<![CDATA[
$.noConflict();
//]]>
</script> 
```

我在下面接受 Pavel Novitsky 的回答，因为他提到，*“如果假设您没有表单嵌入或 JavaScript 错误，那么您的代码应该可以工作......”*这让我意识到它可能与 Javascript 有关。

我目前正在使用 Magento 构建一个电子商务网站，该网站要求注册和登录表单都位于一个页面上。

我已在一个页面上成功集成了这两个表单，但无法登录或注册。

以下是表单结构的简要概述

```
<!--registration-->
<form action="<?php echo $this->getPostActionUrl() ?>" method="post" id="form-validate">
     <!--// form input fields go here-->
</form>
<script type="text/javascript">
//<![CDATA[
     var dataForm = new VarienForm('form-validate', true);
//]]>
</script>

<!--login-->
<form action="<?php echo $this->getPostActionUrl() ?>" method="post" id="login-form">
     <!--// form input fields go here-->
</form>

<script type="text/javascript">
//<![CDATA[
     var dataForm = new VarienForm('form-validate', true);
//]]>
</script> 
```

我注意到该变量`dataForm`被定义了两次，所以我将其中一个切换`dataForm02`为查看提交是否会通过 - 也没有。因此，经过将近 6 个小时的催促，我决定删除 javascript 验证，令我惊讶的是，两种表单上的提交都有效。

有谁知道为什么会这样？很高兴我通过这两种形式提交了意见，但这绝对不是理想的，因为这两种形式都没有采用任何形式的验证。我差点把我的电脑扔出我 20 层的公寓。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:15:26.593

确保在注册和登录表单中使用不同的 id 并确保在脚本中使用相同的 id。好像您的登录表单 ID 有问题。将此用于您的登录脚本。

```
 <!--login-->
    <form action="<?php echo $this->getPostActionUrl() ?>" method="post" id="login-form">
         <!--// form input fields go here-->
    </form>

    <script type="text/javascript">
    //<![CDATA[
         var dataForm = new VarienForm('login-form', true);
    //]]>
    </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:35:41.573

对于登录和注册表单，您有一个相同的表单操作：

```
<?php echo $this->getPostActionUrl() ?> 
```

此方法在模板的不同块中定义。

如果假设您没有表单嵌入或 JavaScript 错误，您的代码应该可以工作。如果没有真正的代码，很难说些什么。

一个猜测：你有吗

```
//<![CDATA[
var dataForm = new VarienForm('login-form', true);
//]]> 
```

或者

```
<script type="text/javascript">
//<![CDATA[
    var dataForm = new VarienForm('login-form', true);
//]]>
</script> 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T12:57:26.607

您也可以使用 xml 来实现此功能。只是您需要编辑 customer.xml 文件。换成这个。

```
<customer_account_login translate="label">
        <label>Customer Account Login Form</label>
        <!-- Mage_Customer -->
        <remove name="right"/>
        <remove name="left"/>

        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="customer/form_login" name="customer_form_login" template="customer/form/login.phtml" />
            <block type="customer/form_register" name="customer_form_register" template="customer/form/register.phtml">
                <block type="page/html_wrapper" name="customer.form.register.fields.before" as="form_fields_before" translate="label">
                    <label>Form Fields Before</label>
                </block>
            </block>
        </reference>
    </customer_account_login> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T10:20:56.903

用此代码替换您的主题/模板/presistent/customer/form/register.phtml 并让我知道结果。

```
<?php $login = new Mage_Customer_Block_Form_Login(); ?>
<div class="account-login">
    <div class="page-title">
        <h1><?php echo $login->__('Login or Create an Account') ?></h1>
    </div>
    <?php //echo $login->getMessagesBlock()->getGroupedHtml() ?>
    <form action="<?php echo $login->getPostActionUrl() ?>" method="post" id="login-form">
        <div class="col2-set">
            <div class="col-1 new-users">
                <div class="content">
                    <h2><?php echo $login->__('New Customers') ?></h2>
                    <p><?php echo $login->__('By creating an account with our store, you will be able to move through the checkout process faster, store multiple shipping addresses, view and track your orders in your account and more.') ?></p>
                </div>
            </div>
            <div class="col-2 registered-users">
                <div class="content">
                    <h2><?php echo $login->__('Registered Customers') ?></h2>
                    <p><?php echo $login->__('If you have an account with us, please log in.') ?></p>
                    <ul class="form-list">
                        <li>
                            <label for="email" class="required"><em>*</em><?php echo $login->__('Email Address') ?></label>
                            <div class="input-box">
                                <input type="text" name="login[username]" value="<?php echo $login->htmlEscape($login->getUsername()) ?>" id="email" class="input-text required-entry validate-email" title="<?php echo $login->__('Email Address') ?>" />
                            </div>
                        </li>
                        <li>
                            <label for="pass" class="required"><em>*</em><?php echo $login->__('Password') ?></label>
                            <div class="input-box">
                                <input type="password" name="login[password]" class="input-text required-entry validate-password" id="pass" title="<?php echo $login->__('Password') ?>" />
                            </div>
                        </li>
                        <?php echo $login->getChildHtml('form.additional.info'); ?>
                        <?php echo $login->getChildHtml('persistent.remember.me'); ?>
                    </ul>
                    <?php echo $login->getChildHtml('persistent.remember.me.tooltip'); ?>
                    <p class="required"><?php echo $login->__('* Required Fields') ?></p>
                </div>
            </div>
        </div>
        <div class="col2-set">
            <div class="col-1 new-users">
                <div class="buttons-set">
                    <button type="button" title="<?php echo $login->__('Create an Account') ?>" class="button" onclick="window.location='<?php echo Mage::helper('persistent')->getCreateAccountUrl($login->getCreateAccountUrl()) ?>';"><span><span><?php echo $login->__('Create an Account') ?></span></span></button>
                </div>
            </div>
            <div class="col-2 registered-users">
                <div class="buttons-set">
                    <a href="<?php echo $login->getForgotPasswordUrl() ?>" class="f-left"><?php echo $login->__('Forgot Your Password?') ?></a>
                    <button type="submit" class="button" title="<?php echo $login->__('Login') ?>" name="send" id="send2"><span><span><?php echo $login->__('Login') ?></span></span></button>
                </div>
            </div>
        </div>
        <?php if (Mage::helper('checkout')->isContextCheckout()): ?>
            <input name="context" type="hidden" value="checkout" />
        <?php endif; ?>
    </form>
    <script type="text/javascript">
    //<![CDATA[
        var dataForm = new VarienForm('login-form', true);
    //]]>
    </script>
</div>

<div class="account-create">
    <div class="page-title">
        <h1><?php echo $this->__('Create an Account') ?></h1>
    </div>
    <?php echo $this->getChildHtml('form_fields_before')?>
    <?php echo $this->getMessagesBlock()->getGroupedHtml() ?>
    <form action="<?php echo $this->getPostActionUrl() ?>" method="post" id="form-validate">
        <div class="fieldset">
            <input type="hidden" name="success_url" value="<?php echo $this->getSuccessUrl() ?>" />
            <input type="hidden" name="error_url" value="<?php echo $this->getErrorUrl() ?>" />
            <h2 class="legend"><?php echo $this->__('Personal Information') ?></h2>
            <ul class="form-list">
                <li class="fields">
                    <?php echo $this->getLayout()->createBlock('customer/widget_name')->setObject($this->getFormData())->setForceUseCustomerAttributes(true)->toHtml() ?>
                </li>
                <li>
                    <label for="email_address" class="required"><em>*</em><?php echo $this->__('Email Address') ?></label>
                    <div class="input-box">
                        <input type="text" name="email" id="email_address" value="<?php echo $this->escapeHtml($this->getFormData()->getEmail()) ?>" title="<?php echo $this->__('Email Address') ?>" class="input-text validate-email required-entry" />
                    </div>
                </li>
                <?php if ($this->isNewsletterEnabled()): ?>
                <li class="control">
                    <div class="input-box">
                        <input type="checkbox" name="is_subscribed" title="<?php echo $this->__('Sign Up for Newsletter') ?>" value="1" id="is_subscribed"<?php if($this->getFormData()->getIsSubscribed()): ?> checked="checked"<?php endif; ?> class="checkbox" />
                    </div>
                    <label for="is_subscribed"><?php echo $this->__('Sign Up for Newsletter') ?></label>
                </li>
                <?php endif ?>
            <?php $_dob = $this->getLayout()->createBlock('customer/widget_dob') ?>
            <?php if ($_dob->isEnabled()): ?>
                <li><?php echo $_dob->setDate($this->getFormData()->getDob())->toHtml() ?></li>
            <?php endif ?>
            <?php $_taxvat = $this->getLayout()->createBlock('customer/widget_taxvat') ?>
            <?php if ($_taxvat->isEnabled()): ?>
                <li><?php echo $_taxvat->setTaxvat($this->getFormData()->getTaxvat())->toHtml() ?></li>
            <?php endif ?>
            <?php $_gender = $this->getLayout()->createBlock('customer/widget_gender') ?>
            <?php if ($_gender->isEnabled()): ?>
                <li><?php echo $_gender->setGender($this->getFormData()->getGender())->toHtml() ?></li>
            <?php endif ?>
            </ul>
        </div>
    <?php if($this->getShowAddressFields()): ?>
        <div class="fieldset">
            <input type="hidden" name="create_address" value="1" />
            <h2 class="legend"><?php echo $this->__('Address Information') ?></h2>
            <ul class="form-list">
                <li class="fields">
                    <div class="field">
                        <label for="company"><?php echo $this->__('Company') ?></label>
                        <div class="input-box">
                            <input type="text" name="company" id="company" value="<?php echo $this->escapeHtml($this->getFormData()->getCompany()) ?>" title="<?php echo $this->__('Company') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('company') ?>" />
                        </div>
                    </div>
                    <div class="field">
                        <label for="telephone" class="required"><em>*</em><?php echo $this->__('Telephone') ?></label>
                        <div class="input-box">
                            <input type="text" name="telephone" id="telephone" value="<?php echo $this->escapeHtml($this->getFormData()->getTelephone()) ?>" title="<?php echo $this->__('Telephone') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('telephone') ?>" />
                        </div>
                    </div>
                </li>
            <?php $_streetValidationClass = $this->helper('customer/address')->getAttributeValidationClass('street'); ?>
                <li class="wide">
                    <label for="street_1" class="required"><em>*</em><?php echo $this->__('Street Address') ?></label>
                    <div class="input-box">
                        <input type="text" name="street[]" value="<?php echo $this->escapeHtml($this->getFormData()->getStreet(1)) ?>" title="<?php echo $this->__('Street Address') ?>" id="street_1" class="input-text <?php echo $_streetValidationClass ?>" />
                    </div>
                </li>
            <?php $_streetValidationClass = trim(str_replace('required-entry', '', $_streetValidationClass)); ?>
            <?php for ($_i = 2, $_n = $this->helper('customer/address')->getStreetLines(); $_i <= $_n; $_i++): ?>
                <li class="wide">
                    <div class="input-box">
                        <input type="text" name="street[]" value="<?php echo $this->escapeHtml($this->getFormData()->getStreet($_i)) ?>" title="<?php echo $this->__('Street Address %s', $_i) ?>" id="street_<?php echo $_i ?>" class="input-text <?php echo $_streetValidationClass ?>" />
                    </div>
                </li>
            <?php endfor; ?>
                <li class="fields">
                    <div class="field">
                        <label for="city" class="required"><em>*</em><?php echo $this->__('City') ?></label>
                        <div class="input-box">
                            <input type="text" name="city" value="<?php echo $this->escapeHtml($this->getFormData()->getCity()) ?>" title="<?php echo $this->__('City') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('city') ?>" id="city" />
                        </div>
                    </div>
                    <div class="field">
                        <label for="region_id" class="required"><em>*</em><?php echo $this->__('State/Province') ?></label>
                        <div class="input-box">
                            <select id="region_id" name="region_id" title="<?php echo $this->__('State/Province') ?>" class="validate-select" style="display:none;">
                                <option value=""><?php echo $this->__('Please select region, state or province') ?></option>
                            </select>
                            <script type="text/javascript">
                            //<![CDATA[
                                $('region_id').setAttribute('defaultValue', "<?php echo $this->getFormData()->getRegionId() ?>");
                            //]]>
                            </script>
                            <input type="text" id="region" name="region" value="<?php echo $this->escapeHtml($this->getRegion()) ?>" title="<?php echo $this->__('State/Province') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('region') ?>" style="display:none;" />
                        </div>
                    </div>
                </li>
                <li class="fields">
                    <div class="field">
                        <label for="zip" class="required"><em>*</em><?php echo $this->__('Zip/Postal Code') ?></label>
                        <div class="input-box">
                            <input type="text" name="postcode" value="<?php echo $this->escapeHtml($this->getFormData()->getPostcode()) ?>" title="<?php echo $this->__('Zip/Postal Code') ?>" id="zip" class="input-text validate-zip-international <?php echo $this->helper('customer/address')->getAttributeValidationClass('postcode') ?>" />
                        </div>
                    </div>
                    <div class="field">
                        <label for="country" class="required"><em>*</em><?php echo $this->__('Country') ?></label>
                        <div class="input-box">
                            <?php echo $this->getCountryHtmlSelect() ?>
                        </div>
                    </div>
                </li>
            </ul>
            <input type="hidden" name="default_billing" value="1" />
            <input type="hidden" name="default_shipping" value="1" />
        </div>
    <?php endif; ?>
        <div class="fieldset">
            <h2 class="legend"><?php echo $this->__('Login Information') ?></h2>
            <ul class="form-list">
                <li class="fields">
                    <div class="field">
                        <label for="password" class="required"><em>*</em><?php echo $this->__('Password') ?></label>
                        <div class="input-box">
                            <input type="password" name="password" id="password" title="<?php echo $this->__('Password') ?>" class="input-text required-entry validate-password" />
                        </div>
                    </div>
                    <div class="field">
                        <label for="confirmation" class="required"><em>*</em><?php echo $this->__('Confirm Password') ?></label>
                        <div class="input-box">
                            <input type="password" name="confirmation" title="<?php echo $this->__('Confirm Password') ?>" id="confirmation" class="input-text required-entry validate-cpassword" />
                        </div>
                    </div>
                </li>
                <?php echo $this->getChildHtml('form.additional.info'); ?>
                <?php echo $this->getChildHtml('persistent.remember.me'); ?>
            </ul>
            <?php echo $this->getChildHtml('persistent.remember.me.tooltip'); ?>
        </div>
        <div class="buttons-set">
            <p class="required"><?php echo $this->__('* Required Fields') ?></p>
            <p class="back-link"><a href="<?php echo $this->escapeUrl($this->getBackUrl()) ?>" class="back-link"><small>&laquo; </small><?php echo $this->__('Back') ?></a></p>
            <button type="submit" title="<?php echo $this->__('Submit') ?>" class="button"><span><span><?php echo $this->__('Submit') ?></span></span></button>
        </div>
        <?php if (Mage::helper('checkout')->isContextCheckout()): ?>
            <input name="context" type="hidden" value="checkout" />
        <?php endif; ?>
    </form>
    <script type="text/javascript">
    //<![CDATA[
        var dataForm = new VarienForm('form-validate', true);
        <?php if($this->getShowAddressFields()): ?>
        new RegionUpdater('country', 'region', 'region_id', <?php echo $this->helper('directory')->getRegionJson() ?>, undefined, 'zip');
        <?php endif; ?>
    //]]>
    </script>
</div> 
```

# ruby-on-rails-3 - Rails 3 - i18n 型号名称

> ID：12712493
> 
> 赞同：1
> 
> 时间：2012-10-03T16:10:08.740
> 
> 标签：ruby-on-rails-3, internationalization

你如何`config/locales/en.yml`为脚手架设置模型名称`<%= f.submit %>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T16:10:41.173

```
en:
  hello: "Hello world"
  activerecord:
    models:
      blog_post: "Post" 
```

# sql - 如何计算 SQL Server 2008 中记录之间的时间

> ID：12712494
> 
> 赞同：3
> 
> 时间：2012-10-03T16:10:15.833
> 
> 标签：sql, sql-server-2008

对于 sql 2008 中的审计表，我需要计算每个订单在给定步骤中的时间（表示为新列）。

```
 Old      New           Time Entered        Order Number
 NULL     Step 1        4/30/12 10:43       1C2014A
 Step 1   Step 2        5/2/12 10:17        1C2014A
 Step 2   Step 3        5/2/12 10:28        1C2014A
 Step 3   Step 4        5/2/12 11:14        1C2014A
 Step 4   Step 5        5/2/12 11:19        1C2014A
 Step 5   Step 9        5/3/12 11:23        1C2014A
 NULL     Step 1        5/18/12 15:49       1C2014B
 Step 1   Step 2        5/21/12 9:21        1C2014B
 Step 2   Step 3        5/21/12 9:34        1C2014B
 Step 3   Step 4        5/21/12 10:08       1C2014B
 Step 4   Step 5        5/21/12 10:09       1C2014B
 Step 5   Step 6        5/21/12 16:27       1C2014B
 Step 6   Step 9        5/21/12 18:07       1C2014B
 NULL     Step 1        6/12/12 10:28       1C2014C
 Step 1   Step 2        6/13/12 8:36        1C2014C
 Step 2   Step 3        6/13/12 9:05        1C2014C
 Step 3   Step 4        6/13/12 10:28       1C2014C
 Step 4   Step 6        6/13/12 10:50       1C2014C
 Step 6   Step 8        6/13/12 12:14       1C2014C
 Step 8   Step 4        6/13/12 15:13       1C2014C
 Step 4   Step 5        6/13/12 15:23       1C2014C
 Step 5   Step 8        6/13/12 15:30       1C2014C
 Step 8   Step 9        6/18/12 14:04       1C2014C 
```

*   这些步骤不需要是连续的，因此步骤 1 可以在步骤 5 之后发生。
*   订单的记录不是按步骤或订单顺序存储的，而是根据输入的时间与其他订单混合。按订单号排序的样本数据然后是新的是不正常的，不能依赖。
*   对于任何给定的顺序，每个步骤都可以重复，如果为一个顺序重复，则逐步求和。
*   Old 列中的起始步记录始终为空
*   对于给定订单，起始步长计算为新列中的值与旧列中的值之间的时间差。

输出可以很简单：

```
Order Number   Step      Time in Step
1C2014A        Step 1    6:09 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:31:29.887

这就是我想出的：

```
select 
  a1.OrderNumber,
  a1.New as Step, 
  datediff(second, a1.TimeEntered, isnull(a2.timeEntered,getdate()))
    as [Time in Step (seconds)]
from AuditTrail a1
left join AuditTrail a2
  on a1.New = a2.Old 
  and a1.OrderNumber = a2.OrderNumber 
```

对于订单从未出过的步骤，时间计算到当前时刻 ( `getdate()`)

### 在线工作示例：[http ://www.sqlfiddle.com/#!3/fbaff/11](http://www.sqlfiddle.com/#!3/fbaff/11)

## 更新：

上述查询可以多次显示一个步骤（例如：订单多次`1C2014C`通过步骤 4）。

要按顺序/步骤分组并显示每对这样的总时间，请改用以下 SQL 语句：

```
select
  a1.OrderNumber,
  a1.New as Step, 
  sum(datediff(second, a1.TimeEntered, isnull(a2.timeEntered,getdate())))
    as [Total Time in Step (seconds)]
from AuditTrail a1
left join AuditTrail a2
  on a1.New = a2.Old 
  and a1.OrderNumber = a2.OrderNumber
group by a1.OrderNumber, a1.New
order by a1.OrderNumber 
```

### 在线工作示例：[http ://www.sqlfiddle.com/#!3/fbaff/14](http://www.sqlfiddle.com/#!3/fbaff/14)

# wpf - 包含静态和动态数据的组合框

> ID：12712500
> 
> 赞同：9
> 
> 时间：2012-10-03T16:10:33.230
> 
> 标签：wpf, binding, combobox

我想创建一个绑定到动态资源的组合框，并有一个自定义的 xaml 预先指定的列表保持在顶部。我知道如何将组合框绑定到动态资源，

```
<ComboBox Name="comboBox1" Width="Auto" ItemsSource="{Binding}" /> 
```

而且我知道如何插入静态项（请参阅[WPF - add static items to a combo box](https://stackoverflow.com/questions/1791784/wpf-add-static-items-to-a-combo-box)）。

```
<ComboBox Text="Is not open"> 
  <ComboBoxItem Name="cbi1">Item1</ComboBoxItem>
  <ComboBoxItem Name="cbi2">Item2</ComboBoxItem>     
  <ComboBoxItem Name="cbi3">Item3</ComboBoxItem> 
</ComboBox> 
```

但我不知道如何同时做这两个？

注意：显然，使用自定义小部件等有很多不同的方法可以做到这一点，我只是觉得这应该很容易。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T17:18:05.523

[CompositeCollection](http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx)对此非常酷。像这样：

```
<ComboBox>
    <ComboBox.ItemsSource>
        <CompositeCollection>
            <CollectionContainer Collection="{Binding Source={...whatever...}" />
            <ComboBoxItem Name="cbi1">Item1</ComboBoxItem>
            <ComboBoxItem Name="cbi2">Item2</ComboBoxItem>
            <ComboBoxItem Name="cbi3">Item3</ComboBoxItem>
        </CompositeCollection>
    </ComboBox.ItemsSource>
</ComboBox> 
```

# javascript - 鼠标悬停在 Oracle Apex 中引入图像

> ID：12712504
> 
> 赞同：1
> 
> 时间：2012-10-03T16:10:50.613
> 
> 标签：javascript, oracle, oracle-apex

我目前正在 Apex 中开发应用程序，但我迷路了。我的要求是，在将鼠标悬停在员工表中的姓名/姓氏列上时，它应该带来员工的形象。图像不应存储在数据库中，而应通过指向...的指针存储在 FTP 中？为数据库存储图像而不是在数据库中存储图像的最佳做法是什么？我知道这是一个复杂的问题，有很多步骤，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:46:16.177

正如 Jeffrey 所说（我会在评论中做出反应，但后来我开始打字......），您将必须决定如何以及在何处存储图像。Blob 列已经不存在了，因此必须将它们放在某个文件系统上。例如，这可以是您的 apex_images 文件夹，也可以是服务器上其他任何位置的文件夹。您始终可以通过`img`在应用程序的页面上设置标签、将`src`属性设置为图像位置来进行检查。
另一个考虑因素是您将如何将图像链接到员工，以及如何维护图像。
他们的文件名是什么？凭身份证？按员工姓名？
我也遇到过这种情况，这也是一个巨大的麻烦。我收到了一个文件夹，里面有图片，都编号了。当然，直到出现一些异常情况：有些人的号码相同，因为他们只使用了唯一密钥的一部分。还有许多错误命名的图片：`z.jpg, x.jpg, zzz.jpg, bob.jpg, mary.jpg`.

如果要取名字，怎么取？以及如何处理名称中的特殊符号，例如重音符号： 如果人力资源部会这样做，您必须仔细解释这些步骤：创建员工，复制 ID 字段（老实说，这对他们 - 理所当然地如此），并准确命名**jpg**`é,à,ç,...` . 当然很重要，因为您可能无法将图像链接到员工，因为他们的名称包含特殊字符，但图像文件没有。那么长名或中间名呢？`Maria De La Santagosa-Gurça`完全随机的名字，但你明白我的意思。这可能是某人的真实姓名，尽管通常使用的名字是`Maria Santagosa`，这真的并不太牵强。
假设您将给图像一个唯一的键值，例如`ID`您的员工记录的生成字段。
也许可以制作图像，可以将名称复制并粘贴到员工记录的列中。我想最重要的问题是：谁来维护这些照片？
**这种方式 .
另一个考虑因素是文件类型，以及它们是否会混淆（再次：谁来维护？）。
那么尺寸呢？是缩略图还是大尺寸？浏览器会调整它们的大小吗？可能需要考虑数据库的大小和图像数量，以及系统的负载。如果不需要大图片，那么每次都将这些大图片拖到线条上是不合格的。**

 **当我说这些图片时请相信我**与员工不**匹配的图像很常见时，请相信我，您应该意识到这一点。在我看来，这只是文件系统更容易被篡改的情况，它会在数据库记录上。

或许考虑一下不再选择数据库存储的原因。同样，在我看来，个人资料图片与员工姓名一样多是结构化数据，并且在数据库中的位置比在文件系统中的位置更多。维护员工的形象甚至并不难。HR 可能会有一个维护应用程序，他们可以在其中查看和编辑员工的所有详细信息。显示图像将是微不足道的，并且提供更新和删除方法同样重要。

我不会详细介绍提供浮动图像的细节。首先决定存储位置和细节，然后进行下一步设置 img 标签，看看它是如何工作的。然后设置单个`img`标签，并使用 javascript 动态更改`src`标签的。接下来是浮动选择。**

# python - Python OOO 设计多类

> ID：12712515
> 
> 赞同：2
> 
> 时间：2012-10-03T16:11:27.800
> 
> 标签：python

我有父类和子类，并试图实例化子类以继承父类的属性。

这段代码运行得很好，但想知道是否有办法让 self.list1 保持私有，即；如果我声明 self.__list1 则子类无法访问它。

我可以重写 childclass 方法以将 self.__list1 保持为私有吗？

```
class parent(object):
    def __init__(self,x,y):
        self.x = x
        self.y = y
        self.list1 = ['a','b','c']
        print('self.x',self.x)
        print('self.y',self.y)

class child(parent):
    def test(self):
        print('In child self.x',self.x)
        print('In child self.list1',self.list1)

class test(object):
    def __init__(self,x1,y1):
        self.x1 = x1
        self.y1 = y1

    def process(self):
        childobj = child(self.x1,self.y1)
        childobj.test()

        pass

def main():            
    testx = test(2,3)
    testx.process() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T16:14:55.150

从[文档](http://docs.python.org/tutorial/classes.html#private-variables-and-class-local-references)：

> 在 Python 中不存在只能从对象内部访问的“私有”实例变量。但是，大多数 Python 代码都遵循一个约定：前缀为下划线的名称（例如 _spam）应被视为 API 的非公共部分（无论是函数、方法还是数据成员） . 它应被视为实施细节，如有更改，恕不另行通知。

以两个下划线为前缀会调用[名称修饰](http://docs.python.org/reference/expressions.html#atom-identifiers)，这取决于您的客户尊重这些变量/方法的“隐私性”

# magento - Magento 对客人隐藏导航菜单项

> ID：12712517
> 
> 赞同：1
> 
> 时间：2012-10-03T16:11:30.723
> 
> 标签：magento, navigation, hide

我在 magento 社区版 1.7 上运行一个 magento 自定义模板。如何对客人隐藏 $custom_tab3？我希望该选项卡仅对登录用户显示。请看下面的代码。任何帮助都非常感谢！

```
 <ul id="nav">
    <?php if (Mage::getStoreConfig('celebritysettings/celebritysettings_header/navigation_home')): ?>
     <li class="level0 level-top">
        <a href="<?php echo $this->getBaseUrl(); ?>how-it-works"><span><?php echo $this->__('How It Works'); ?></span></a>
     </li>
 <?php endif; ?>
    <?php
    echo $_menu;
    $custom_tab = Mage::getModel('cms/block')->load('celebrity_navigation_block');
    if($custom_tab->getIsActive()) {
        echo '
        <li class="level0 level-top parent custom-block">
            <a href="'.$this->getBaseUrl().'gift" class="level-top">
                <span>'.$custom_tab->getTitle().'</span>
            </a>
            <div class="sub-wrapper">'.$this->getLayout()->createBlock('cms/block')->setBlockId('celebrity_navigation_block')->toHtml().'</div>
        </li>';
    }

    $custom_tab2 = Mage::getModel('cms/block')->load('celebrity_navigation_block2');
    if($custom_tab2->getIsActive()) {
        echo '
        <li class="level0 level-top parent custom-block" >
            <a href="'.$this->getBaseUrl().'plans" class="level-top">
                <span>'.$custom_tab2->getTitle().'</span>
            </a>
            <div class="sub-wrapper">'.$this->getLayout()->createBlock('cms/block')->setBlockId('celebrity_navigation_block2')->toHtml().'</div>
        </li>';
    }

    $custom_tab3 = Mage::getModel('cms/block')->load('celebrity_navigation_block3');
    if($custom_tab3->getIsActive()) {
        echo '
        <li class="level0 level-top parent custom-block">
            <a href="'.$this->getBaseUrl().'showroom" class="level-top">
                <span>'.$custom_tab3->getTitle().'</span>
            </a>
            <div class="sub-wrapper">'.$this->getLayout()->createBlock('cms/block')->setBlockId('celebrity_navigation_block3')->toHtml().'</div>
        </li>';
    }

    $custom_tab4 = Mage::getModel('cms/block')->load('celebrity_navigation_block4');
    if($custom_tab4->getIsActive()) {
        echo '
        <li class="level0 level-top parent custom-block">
            <a href="'.$this->getBaseUrl().'magazine" class="level-top">
                <span>'.$custom_tab4->getTitle().'</span>
            </a>
            <div class="sub-wrapper">'.$this->getLayout()->createBlock('cms/block')->setBlockId('celebrity_navigation_block4')->toHtml().'</div>
        </li>';
    }

    ?>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:19:55.483

您可以使用它`Mage::getSingleton('customer/session')->isLoggedIn()`来检查当前用户是否已登录。在您的代码中，您可以像这样使用它：

```
$custom_tab3 = Mage::getModel('cms/block')->load('celebrity_navigation_block3');
if($custom_tab3->getIsActive() && Mage::getSingleton('customer/session')->isLoggedIn()) {
    echo '
    <li class="level0 level-top parent custom-block">
        <a href="'.$this->getBaseUrl().'showroom" class="level-top">
            <span>'.$custom_tab3->getTitle().'</span>
        </a>
        <div class="sub-wrapper">'.$this->getLayout()->createBlock('cms/block')->setBlockId('celebrity_navigation_block3')->toHtml().'</div>
    </li>';
} 
```

甚至

```
if(Mage::getSingleton('customer/session')->isLoggedIn()) {
    $custom_tab3 = Mage::getModel('cms/block')->load('celebrity_navigation_block3');
    if($custom_tab3->getIsActive()) {
        echo '
        <li class="level0 level-top parent custom-block">
            <a href="'.$this->getBaseUrl().'showroom" class="level-top">
                <span>'.$custom_tab3->getTitle().'</span>
            </a>
            <div class="sub-wrapper">'.$this->getLayout()->createBlock('cms/block')->setBlockId('celebrity_navigation_block3')->toHtml().'</div>
        </li>';
    }
} 
```

以防止不必要的`cms/block`模型检索。

# c# - 使用 C# 的 HTTP MAC 身份验证

> ID：12712519
> 
> 赞同：6
> 
> 时间：2012-10-03T16:11:39.273
> 
> 标签：c#, .net, oauth-2.0, hmac

我正在尝试为正在开发的新 tent.io 协议创建一个客户端，他们正在使用[https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2描述的 HTTP MAC Oauth2 方案-http-mac-01](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac-01)。

我在 C# 中编写了一个创建授权标头的简单方法，但是当我提交请求时，我收到一个简单的“无效 MAC 签名”错误。

由于我没有参考实现，我很难弄清楚我的代码有什么问题。我把它贴在这里，希望有人能发现我的错误。

```
public string GetAuthorizationHeader(string macKeyIdentifier, string macKey, string macAlgorithm, string method, Uri uri)
{
    TimeSpan t = (DateTime.UtcNow - new DateTime(1970, 1, 1));
    string timestamp = ((int)t.TotalSeconds).ToString();

    string nonce = new Random().Next().ToString();

    string normalizedString = string.Format("{0}\n{1}\n{2}\n{3}\n{4}\n{5}\n\n", 
                                            timestamp, 
                                            nonce, 
                                            method,
                                            uri.PathAndQuery, 
                                            uri.Host, 
                                            uri.Port);

    HashAlgorithm hashGenerator = null;
    if (macAlgorithm == "hmac-sha-256")
    {
        hashGenerator = new HMACSHA256(Encoding.ASCII.GetBytes(macKey));
    }
    else if (macAlgorithm == "hmac-sha-1")
    {
        hashGenerator = new HMACSHA1(Encoding.ASCII.GetBytes(macKey));
    }
    else
    {
        throw new InvalidOperationException("Unsupported MAC algorithm");
    }

    string hash = System.Convert.ToBase64String(hashGenerator.ComputeHash(Encoding.ASCII.GetBytes(normalizedString)));

    StringBuilder authorizationHeader = new StringBuilder();
    authorizationHeader.AppendFormat(@"id=""{0}"",ts=""{1}"",nonce=""{2}"",mac=""{3}""",
                                     macKeyIdentifier, timestamp, nonce, hash);

    return authorizationHeader.ToString();
} 
```

我使用返回的值创建了完整的标题，它看起来像这样

授权：MAC id="a:dfsdfa2",ts="1349277638",nonce="1469030797",mac="ibZ/HXaoz2VgBer3CK7K9vu0po3K+E36K+TQ9Sgcw6o="

我确定我错过了一些小东西，但我看不到它。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T08:14:50.900

事实证明上面的代码是完美的，但是我传递了错误的 HTTP 方法值！

我收到错误的地方是 POST'ing JSON，但实际上我已将“GET”放入 GetAuthorizationMethod！

更正后，我从 Tent.is 获得了 access_token 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:07:03.697

[http://buchananweb.co.uk/security01.aspx](http://buchananweb.co.uk/security01.aspx)上执行良好的工具，显示了使用 MD5 和 SHA1、SHA256、SHA384、SHA512 的 HMAC

# asp.net - 在 IE 中打开 Excel .xlsx 文件并按照其嵌入的超链接返回文件服务器

> ID：12712523
> 
> 赞同：4
> 
> 时间：2012-10-03T16:11:49.790
> 
> 标签：asp.net, excel, internet-explorer, intranet

我有一个 Intranet 站点，允许用户在浏览器中打开文件（通过提示下载）。其中一个文件是 .xlsx 工作簿，其中包含指向 .xlsx 工作簿所在的文件服务器上文件*（.pdf、.docs*）的不同位置的超链接。

似乎工作簿的文件服务器路径被“Temporary Internet Files/Content.IE5/”路径替换，导致 Excel 中出现“无法打开指定文件”的警告。

我尝试先下载 Excel 文档，然后点击链接，但它们仍在临时 Internet 位置打开

**编辑：**

例如，将鼠标悬停在 excel 中的超链接上时，它们会显示：“file:///C:\Documents And Settings\%username%\Local Settings\Temporary Internet files\Content.IE5\40WSS3CB\”+ 文件名

当他们应该阅读：“file:///\servername\Departments\Read\”+文件名

如何仍然在浏览器中打开 excel 文件并保留其中的超链接，并且它们不会被临时 Internet 文件路径替换？

有人能指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T23:59:50.593

我做了一些测试，它几乎来自您存储链接的方式。如果您浏览 的对话框`Insert hyperlink`，那么您将以相对 url 结尾。也就是说，公共基础存储为对当前 xlsx 文件路径的引用，其余部分存储并显示为链接。

您完全处于 Richard Hare 提到的问题中，因此遵循[microsoft 支持站点上](http://support.microsoft.com/kb/928737)的程序应该会有所帮助。它至少在我的测试中起到了作用。

**更新**总结 down.with.the.bass 评论：
如果可行的话，解决此问题的一种选择是从其网络共享位置而不是通过网站打开 xlsx 文件。如果由于某种原因被禁止，您*可以*使用宏来更新链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T15:30:02.943

您是否启用了“保存时更新链接”之类的选项？

在早期版本的 Excel 中，它是在工具、选项、常规选项卡、Web 选项按钮、文件选项卡中设置的。

尝试取消选中它并重新保存文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T17:30:11.107

我刚刚在我的服务器上做了同样的任务（我理解的那个）：

将超链接上传到某个 asp.net 网页。

```
<p>
        <a href="Book1.xlsx">test</a><br />
</p> 
```

“book1.xlsx”文件在一个单元格内有一个引用（超链接）到某个共享目录（即`\\NHSTXX1\TEST\MS OFFICE EXCEL - \\SERVERNAME\FOLDER\OTHER FOLDER`）的单元格

当单击超链接单元格时，它打开了我正在寻找的共享目录。

我试过火狐。

希望这有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T18:21:31.637

超链接不应该只是神秘地改变。我保存了一个带有超链接的 excel 文件 - 用 html 打开它 - 保存它 - 再次在 excel 中打开它 - 链接保持不变。所以我不确定这怎么会发生在你身上（如果我正确理解你的情况）。

# foreign-keys - 将主键值作为外键复制到另一个表中？

> ID：12712527
> 
> 赞同：1
> 
> 时间：2012-10-03T16:12:08.173
> 
> 标签：foreign-keys

```
CREATE TRIGGER copy_pk_into_fk_trigger
    AFTER insert ON tableA
    FOR EACH ROW
    BEGIN
      insert into tableB (tblA_ID) values (new.tblA_ID);
END$$ 
```

我正在使用上面的触发器从 tableA 复制主键值并作为外键插入到 tableB 中。但在那之后，每当我使用 ASP.net 中的 detailsView 编辑 tableB 中的记录时，外键值变为“NULL”。这导致没有更多的黑白父母和孩子的联系。请帮助我。

[tableA 具有 col: tblA_ID、tblA_val 和
TableB 包含 tblB_ID、tblA_ID、tblB_str
等]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:15:56.800

我认为这与您的触发器无关。因为触发器只会在插入被触发后运行。你能告诉我在 detailsView 中更新的查询吗？你确定你也没有提到更新声明吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T16:28:19.147

下面是 SqlDATASource 和 DetailsView 的完整源代码：

```
<asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:HADIConnectionString %>" 
            DeleteCommand="DELETE FROM &quot;INDENT_FILE_NO&quot; WHERE &quot;FILE_NO_ID&quot; = :original_FILE_NO_ID AND ((&quot;INDENT_ID&quot; = :original_INDENT_ID) OR (&quot;INDENT_ID&quot; IS NULL AND :original_INDENT_ID IS NULL)) AND ((&quot;FILE_NO&quot; = :original_FILE_NO) OR (&quot;FILE_NO&quot; IS NULL AND :original_FILE_NO IS NULL)) AND ((&quot;FILE_DESCRIPTION&quot; = :original_FILE_DESCRIPTION) OR (&quot;FILE_DESCRIPTION&quot; IS NULL AND :original_FILE_DESCRIPTION IS NULL)) AND ((&quot;INDENTER&quot; = :original_INDENTER) OR (&quot;INDENTER&quot; IS NULL AND :original_INDENTER IS NULL))" InsertCommand="INSERT INTO &quot;INDENT_FILE_NO&quot; (&quot;FILE_NO_ID&quot;, &quot;INDENT_ID&quot;, &quot;FILE_NO&quot;, &quot;FILE_DESCRIPTION&quot;, &quot;INDENTER&quot;) VALUES (:FILE_NO_ID, :INDENT_ID, :FILE_NO, :FILE_DESCRIPTION, :INDENTER)" OldValuesParameterFormatString="original_{0}" ProviderName="<%$ ConnectionStrings:HADIConnectionString.ProviderName %>" 
            SelectCommand="SELECT * FROM &quot;INDENT_FILE_NO&quot; WHERE (&quot;INDENT_ID&quot; = :INDENT_ID)" 
            UpdateCommand="UPDATE &quot;INDENT_FILE_NO&quot; SET &quot;INDENT_ID&quot; = :INDENT_ID, &quot;FILE_NO&quot; = :FILE_NO, &quot;FILE_DESCRIPTION&quot; = :FILE_DESCRIPTION, &quot;INDENTER&quot; = :INDENTER WHERE &quot;FILE_NO_ID&quot; = :original_FILE_NO_ID AND ((&quot;INDENT_ID&quot; = :original_INDENT_ID) OR (&quot;INDENT_ID&quot; IS NULL AND :original_INDENT_ID IS NULL)) AND ((&quot;FILE_NO&quot; = :original_FILE_NO) OR (&quot;FILE_NO&quot; IS NULL AND :original_FILE_NO IS NULL)) AND ((&quot;FILE_DESCRIPTION&quot; = :original_FILE_DESCRIPTION) OR (&quot;FILE_DESCRIPTION&quot; IS NULL AND :original_FILE_DESCRIPTION IS NULL)) AND ((&quot;INDENTER&quot; = :original_INDENTER) OR (&quot;INDENTER&quot; IS NULL AND :original_INDENTER IS NULL))" ConflictDetection="CompareAllValues">

        <UpdateParameters>
            <asp:Parameter Name="INDENT_ID" Type="Decimal" />
            <asp:Parameter Name="FILE_NO" Type="String" />
            <asp:Parameter Name="FILE_DESCRIPTION" Type="String" />
            <asp:Parameter Name="INDENTER" Type="String" />
            <asp:Parameter Name="original_FILE_NO_ID" Type="Decimal" />
            <asp:Parameter Name="original_INDENT_ID" Type="Decimal" />
            <asp:Parameter Name="original_FILE_NO" Type="String" />
            <asp:Parameter Name="original_FILE_DESCRIPTION" Type="String" />
            <asp:Parameter Name="original_INDENTER" Type="String" />
        </UpdateParameters> 
```

详情查看：

```
<asp:DetailsView ID="DetailsView2" runat="server" AutoGenerateRows="False" DataKeyNames="FILE_NO_ID" DataSourceID="SqlDataSource2" Height="50px" Width="287px" >
                        <Fields>
                            <asp:BoundField DataField="FILE_NO_ID" HeaderText="FILE_NO_ID" ReadOnly="True"  SortExpression="FILE_NO_ID" Visible="False" />
                            <asp:BoundField DataField="INDENT_ID" HeaderText="INDENT_ID" SortExpression="INDENT_ID" Visible="False" />
                            <asp:BoundField DataField="FILE_NO" HeaderText="FILE_NO" SortExpression="FILE_NO" />
                            <asp:BoundField DataField="FILE_DESCRIPTION" HeaderText="FILE_DESCRIPTION" SortExpression="FILE_DESCRIPTION" />
                            <asp:BoundField DataField="INDENTER" HeaderText="INDENTER" SortExpression="INDENTER" />
                            <asp:CommandField ShowEditButton="True" ButtonType="Button" />
                        </Fields>
                    </asp:DetailsView> 
```

但是现在，当我按下编辑按钮并编辑字段然后更新它们时，这些字段的数据保持不变。表示不采取任何行动。

# apache-flex - ActionScript 创建自定义组件以容纳另外两个 spark 组件

> ID：12712528
> 
> 赞同：1
> 
> 时间：2012-10-03T16:12:17.760
> 
> 标签：apache-flex, actionscript, custom-component, flex-spark

我对 ActionScript/Flex 还很陌生，所以我不完全确定这是否可能。

基本上，我的代码中有以下块重复多次：

```
<s:TextInput .. \>
<s:BitmapImage .. \> 
```

我要做的是创建一个 ActionScript 自定义组件，这样我就可以在代码中的任何地方替换上面的块：

```
<MyBlock\> 
```

我最好的猜测是我必须通过扩展 spark.application 来做到这一点？

到目前为止我所拥有的：

```
package MyPackage
{
   import spark.components.Application;

   public class MyBlock extends Application
   {
     ..
   }
..
} 
```

如果可能的话，我完全不知道如何将两个现有组件组合成一个新的自定义组件。

接下来我应该如何进行？任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:25:59.490

它比这容易得多：对于这个用例，您应该简单地扩展`Group`. 为了使事情更容易，用 MXML 编写您的组合组件。

创建一个新文件`MyBlock.mxml`（例如 in `com/mydomain/components`）并添加以下代码：

```
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark">

    <s:TextInput .. />
    <s:BitmapImage .. />
</s:Group> 
```

现在只需使用这个组件：

```
<c:MyBlock /> 
```

其中`c`命名空间被定义为`xmlns:c="com.mydomain.components.*"`使用此类的文档的根节点。例如：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:c="com.mydomain.components.*">
    <c:MyBlock />
</s:Application> 
```

* * *

现在假设您想在每个块中使用不同的文本，您必须公开一个属性。为此，让我们添加一个`label`属性到`MyBlock`：

```
<fx:Declarations>
    <fx:String id="label" />
</fx:Declarations> 
```

为了`TextInput`在该变量更改时显示该变量中的内容，我们使用如下绑定：

```
<s:TextInput text="{label}" /> 
```

最终组件看起来像这样：

```
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark">

    <fx:Declarations>
        <fx:String id="label" />
    </fx:Declarations>

    <s:TextInput text="{label}" .. />
    <s:BitmapImage .. />
</s:Group> 
```

现在您可以使用不同的文本创建多个`MyBlock`实例：

```
<c:MyBlock label="hello" />
<c:MyBlock label="world" /> 
```

* * *

请注意，如果您经常以类似列表的方式使用 MyBlock，您可能需要考虑使用`List`带有自定义 ItemRenderer 的组件，而不是`MyBlock`一遍又一遍地使用。

# azure - 无法为 Sql Azure 数据库生成脚本：“获取对象列表来自：失败”

> ID：12712531
> 
> 赞同：2
> 
> 时间：2012-10-03T16:12:28.990
> 
> 标签：azure, azure-sql-database

我按照[http://msdn.microsoft.com/en-us/library/ee621790.aspx](http://msdn.microsoft.com/en-us/library/ee621790.aspx)说明操作并收到以下错误：

> 从“MYDBNAME”获取对象列表。失败的
> 
> Microsoft.SqlServer.Management.Sdk.Sfc.EnumeratorException：未能为此请求检索数据。---> Microsoft.SqlServer.Management.Sdk.Sfc.InvalidVersionEnumeratorException：11.0 版 SqlAzureDatabase 不支持操作。在 Microsoft.SqlServer.Management.Smo.XmlReadDoc.LoadFile(Assembly a, String strFile) 在 Microsoft.SqlServer.Management.Sdk 的 Microsoft.SqlServer.Management.Smo.SqlObject.LoadInitData(String file, ServerVersion ver, DatabaseEngineType databaseEngineType)。 Sfc.ObjectCache.LoadElement(ObjectLoadInfo oli, ServerVersion ver, DatabaseEngineType databaseEngineType) 在 Microsoft.SqlServer.Management.Sdk.Sfc.ObjectCache.GetElement(ObjectLoadInfo oli, ServerVersion ver, DatabaseEngineType databaseEngineType) 在 Microsoft.SqlServer.Management.Sdk.Sfc。 ObjectCache.GetAllElements(Urn urn, ServerVersion ver,

如何获取 azure 数据库备份或 sql 脚本？

更新：Azure 数据库：SQL Server 11.0.2065；Sql管理工作室：11.0.2100.60

更新 2：

SQL Azure 迁移向导报告：

> Microsoft.SqlServer.Management.Sdk.Sfc
> 
> 未能为此请求检索数据。
> 
> 附加信息：
> 
> 版本 11.0 SqlAzureDatabase 不支持操作。(Microsoft.SqlServer.SqlEnum)

[这里](http://social.msdn.microsoft.com/Forums/en-US/ssdsgetstarted/thread/906b4e3e-3db4-460c-bb6a-bf57e5f01e3c/)也一样。

排序规则是 Cyrillic_General_CI_AS。如何更改数据库的排序规则以制作脚本？

更新 3：

[使用本指南](http://msdn.microsoft.com/en-us/library/jj650016.aspx)导出数据层应用程序时出现相同的错误：

> ..版本 11.0 SqlAzureDatabase 不支持操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-24T07:06:33.493

在 SqlServer Management Studio 2012 中；

右键单击数据库和任务 > 将数据库部署到 Sql Azure，但选择本地服务器作为目标。它将获得 azure 的副本到您的本地。然后您可以从本地服务器生成脚本。我刚刚找到了这种方法，对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:35:56.087

好的，我使用[cloudservices.red-gate.com](http://cloudservices.red-gate.com)导出了我的 azure db 。我在存储上创建了 BACPAC 文件。然后我将 BACPAC 导入我当地的 Sql express。奇怪的是，该服务没有抛出我在使用 SQL Management Studio 时遇到的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T18:45:17.380

我建议使用[SQL Azure 迁移向导](http://sqlazuremw.codeplex.com/)，因为它比 SSMS 中的生成脚本任务要先进得多。附带说明一下，此工具由 SQL Azure 团队的人员编写和维护！

# python - 来自 mysql db 的 Python 结果与实际值不匹配：值比较

> ID：12712532
> 
> 赞同：0
> 
> 时间：2012-10-03T16:12:30.623
> 
> 标签：python, mysql

我有一个程序，我将在其中将我的代码生成的哈希值与我的 mysql 数据库中的哈希值进行比较。

因此，在生成检查值后，我有：

> ```
> hash to be compared: 78ff0103440dcea01f36438a71bdf28f 
> hash value from db: (('78ff0103440dcea01f36438a71bdf28f',),) 
> ```

来自 DB 的哈希值是通过使用以下内容输出的：

> `db_hash.fetchone()`

这就是为什么它包含 (('',),) 符号的原因。

但是我尝试在要比较的散列中附加相同的符号，但它仍然不能正确等同。

我很困惑，因为它应该只是一个简单的比较

```
if hash == result:
 do some code
else:
 do some code 
```

如果您知道这是什么，请回答:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:15:12.180

Python 的 MySQL 适配器将行作为值的*元组*返回- 在这种情况下，您将收到一行一列的完整结果集。要获得它的*价值*，只需执行以下操作：

```
dbResult # this is (('78ff0103440dcea01f36438a71bdf28f',),)
dbResult[0][0] # this is '78ff0103440dcea01f36438a71bdf28f' 
```

当然，如果您的查询不同（或未返回任何行），这将引发错误。理想情况下，您应该首先检查返回的行数 ( `len(dbResult)`)。每行中的列数将是一致的。

# objective-c - 如何让 Objective-C 编译器假定未声明的属性是动态的？

> ID：12712535
> 
> 赞同：1
> 
> 时间：2012-10-03T16:12:38.177
> 
> 标签：objective-c, properties, compiler-errors, compiler-warnings

我希望能够写作

```
id foo = [MyObject new];
foo.bar = [NSObject new]; 
```

但我收到以下错误：

```
/blah/blah/blah/Blah.m:32:9: error: property 'bar' not found on object of type '__strong id'
foo.bar = [NSObject new];
    ^
1 error generated. 
```

由于 clang 没有报告我可以压制的警告，我认为这种行为是永久性的，但我希望有人能告诉我其他情况。

显然，我知道这会默认中断，但我计划使用[动态方法解析](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ObjCRuntimeGuide/Articles/ocrtDynamicResolution.html#//apple_ref/doc/uid/TP40008048-CH102-SW1)来使其工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:38:52.173

您不能像这样在通用对象指针上使用点语法。

原因是编译器重写`foo.bar = baz;`为`[foo setBar:baz]`，但由于可以更改设置器的名称，`@property (strong, nonatomic, setter=setListOfApples:) NSArray * listOfOranges;`，它*必须*能够看到属性声明。

如果您使用标准的消息发送语法，这将起作用。换句话说，您必须告诉编译器对象的确切类型以便它可以查找属性的设置器，或者告诉它您希望它使用的确切设置器名称。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-03T16:18:58.557

@dynamic 会处理它吗？

@动态富；@动态条；

# c# - HtmlWeb 用户代理

> ID：12712537
> 
> 赞同：1
> 
> 时间：2012-10-03T16:12:45.713
> 
> 标签：c#, visual-studio-2012, html-agility-pack, user-agent

我正在使用 HtmlAgilityPack 从网页中获取表格。

```
HtmlWeb web = new HtmlWeb();
HtmlDocument doc = web.Load("http://test.com"); 
```

我知道 HtmlWeb 有一个 UserAgent 属性，但是我不知道应该如何将用户代理附加到 httprequest 的标头。

```
HtmlWeb web = new HtmlWeb().UserAgent("asdf"); 
```

返回错误

```
Error   1   Non-invocable member 'HtmlAgilityPack.HtmlWeb.UserAgent' cannot be used like a method. 
```

[http://htmlagilitypack.codeplex.com/discussions](http://htmlagilitypack.codeplex.com/discussions) HtmlAgilityPack 支持讨论显示为简单的问题，但另一端没有人回应。

[http://htmlagilitypack.codeplex.com/documentation](http://htmlagilitypack.codeplex.com/documentation)这里还没有文档。

[http://htmlagilitypack.codeplex.com/downloads/get/437942](http://htmlagilitypack.codeplex.com/downloads/get/437942)尝试下载文档，发现 chm 文件似乎已损坏...当我尝试打开其中的任何内容时，出现“导航到网页被取消”错误chm 文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T16:24:14.623

实例化后只需设置对象的`UserAgent`属性。`HtmlWeb`

```
HtmlWeb web = new HtmlWeb();
web.UserAgent = "your useragent string here"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T16:25:05.823

*HtmlWeb.UserAgent*是一个属性，而不是一个方法。它的 Intellisense 总结是：

> 获取或设置在任何 webrequest 上发送的用户代理 HTTP 1.1 标头

尝试类似：

```
HtmlWeb web = new HtmlWeb();
web.UserAgent = "asdf"; // Replace this with your actual user agent :) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:24:45.123

UserAgent 是 HtmlWeb 的属性。你可以这样使用它：

```
HtmlWeb web = new HtmlWeb();
web.UserAgent = "[user agent string here]"; 
```

# xml - 使用 maven exec:java 时将 src/test/resources 添加到类路径

> ID：12712540
> 
> 赞同：0
> 
> 时间：2012-10-03T16:12:53.903
> 
> 标签：xml, maven, classpath, exec

我正在尝试执行一些代码，它将生成一个需要访问 src/test/resources 文件夹的测试类（并放置在 src/test/java 中）。我也在使用 maven exec:java (试过 exec:exec) 但没有运气。

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>Generate Derivation Test Cases Test</id>
                    <phase>generate-test-sources</phase>
                    <goals>
                        <goal>java</goal>
                    </goals>
                    <configuration>
                        <classpathScope>test</classpathScope>
                        <mainClass>com.etse.persistence.derivationtestcase.TestGenerator</mainClass>
                        <arguments>
                            <argument>derivationTestCases</argument>
                            <argument>/common-application-context.xml</argument>
                            <argument>/persistence-application-context.xml</argument>
                            <argument>/math-application-context.xml</argument>
                            <argument>/persistence-derivationtestcase-context.xml</argument>
                        </arguments>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

我的问题是如何/在哪里放置 {basedir}/src/test/resources 以便在类路径中使用它来调用 TestGenerator

谢谢

胡安

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-03T16:15:54.893

您很早就与 . 绑定`generate-test-sources`，可能在资源插件可以将`src/test/resources`文件夹复制到`target`. 我会尝试指向`TestGenerator`而`src/test/resources`不是尝试使用类路径。

# .net - 静态方法是否急切地编译（JIT'ed）？

> ID：12712541
> 
> 赞同：11
> 
> 时间：2012-10-03T16:12:58.533
> 
> 标签：.net, memory-management, clr, jit

据我了解，CLR 编译器对实例方法和静态方法的处理方式相同，并且每当第一次调用该方法时，IL 代码都会被 JIT 处理。今天我和我的同事进行了一次讨论，他告诉我静态方法与实例方法的处理方式不同。即，只要将程序集加载到应用程序域中，就会对静态方法进行 JIT 处理，而在第一次调用实例方法时会对其进行 JIT 处理。

我实际上很困惑，看不出为什么 CLR 应该急切地编译静态方法？我了解关键终结器对象的静态构造函数或终结器方法，或者何时使用受约束的执行区域。但是，如果某个类具有静态方法和实例方法的组合，我真的不确定为什么一旦将包含该类的程序集加载到内存中，所有静态方法都会被 JITted？

请帮助我理解这种行为。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T16:22:06.840

查看方法何时使用 WinDbg/SOS 编译 JIT 表明静态方法在调用它们之前没有编译。

考虑以下类：

```
class SomeType
{
    [MethodImpl(MethodImplOptions.NoInlining)]
    public void InstanceMethod()
    {
        Console.WriteLine("instance");
    }

    [MethodImpl(MethodImplOptions.NoInlining)]
    public static void TypeMethod()
    {
        Console.WriteLine("type");
    }
} 
```

我使用 NoInlining 选项来防止编译器在发布版本中内联这些方法。

如果我运行一个像下面这样的小应用程序并附加 WinDbg，我可以观察到方法何时被 JIT 编译。

```
var st = new SomeType();

Console.WriteLine("attach");
Console.ReadLine();

Console.WriteLine("calling methods");
st.InstanceMethod();
SomeType.TypeMethod();

Console.ReadLine(); 
```

在附加方法表时，`SomeType`如下所示：

```
0:004> !dumpmt -md 0041387c
EEClass:         004114d4
Module:          00412e94
Name:            ConsoleApplication2.SomeType
mdToken:         02000007
File:                c:\temp\ConsoleApplication1\ConsoleApplication1\bin\Release\ConsoleApplication1.exe
BaseSize:        0xc
ComponentSize:   0x0
Slots in VTable: 7
Number of IFaces in IFaceMap: 0
--------------------------------------
MethodDesc Table
   Entry MethodDe    JIT Name
6d374960 6d076728 PreJIT System.Object.ToString()
6d368790 6d076730 PreJIT System.Object.Equals(System.Object)
6d368360 6d076750 PreJIT System.Object.GetHashCode()
6d3616f0 6d076764 PreJIT System.Object.Finalize()
0041c035 00413874   NONE ConsoleApplication2.SomeType..ctor()
0041c02d 0041385c   NONE ConsoleApplication2.SomeType.InstanceMethod()
0041c031 00413868   NONE ConsoleApplication2.SomeType.TypeMethod() 
```

在显式调用方法后，它看起来像这样：

```
0:007> !dumpmt -md 0041387c
EEClass:         004114d4
Module:          00412e94
Name:            ConsoleApplication2.SomeType
mdToken:         02000007
File:            c:\temp\ConsoleApplication1\ConsoleApplication1\bin\Release\ConsoleApplication1.exe
BaseSize:        0xc
ComponentSize:   0x0
Slots in VTable: 7
Number of IFaces in IFaceMap: 0
--------------------------------------
MethodDesc Table
   Entry MethodDe    JIT Name
6d374960 6d076728 PreJIT System.Object.ToString()
6d368790 6d076730 PreJIT System.Object.Equals(System.Object)
6d368360 6d076750 PreJIT System.Object.GetHashCode()
6d3616f0 6d076764 PreJIT System.Object.Finalize()
0041c035 00413874   NONE ConsoleApplication2.SomeType..ctor()
004700e0 0041385c    JIT ConsoleApplication2.SomeType.InstanceMethod()
00470110 00413868    JIT ConsoleApplication2.SomeType.TypeMethod() 
```

即，在实际调用方法之前，它们不会被 JIT 编译。

（作为记录，这是在 .NET 4.5 上完成的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:17:40.127

据我所知，静态方法与实例方法的威胁没有什么不同，也许您的同事正在谈论*静态构造函数*，这些构造函数实际上是在调用程序集中引用类型时立即调用的。并因此而激动。

**更新 4.0**（感谢@JulienLebosquain 的指点）

.NET 4.0 使用所谓的延迟类型初始化，它基本上改变了行为，并且在第一次加入**静态字段时调用静态构造函数。**

# java - 使用 DOM 选择节点的所有子节点

> ID：12712547
> 
> 赞同：0
> 
> 时间：2012-10-03T16:13:35.573
> 
> 标签：java, xml, dom

我有这个 XML 代码：

```
<root>
  <node>
    </first_child>
    </second_child>
    </third_child>
  </node>
</root> 
```

我需要一个接一个地获取所有子节点并使用 DOM 保存三个 Node 变量。

如果我使用

```
doc.getElementsByTagName("node"); 
```

我与所有孩子一起使用这个“节点”，而我只需要“first_child、second_child 和 third_child”

如何获得这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:15:57.120

```
Element el = (Element)(doc.getElementsByTagName("node").item(0));
NodeList children = el.getChildNodes();

for (int i=0; i<children.getLength(); i++) {
  System.out.println(children.item(0).getNodeValue());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:23:45.480

```
Element el;
el = (Element) doc.getElementsByTagName("node").item(0);
el.getChildNodes(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:18:00.650

你可以通过这种方式得到孩子。

```
var children = document.getElementById('node').getElementsByTagName('*'); 
```

# django - 具有多个相同的 Django OneToOneField --related_name

> ID：12712550
> 
> 赞同：6
> 
> 时间：2012-10-03T16:13:47.877
> 
> 标签：django

对不起，没有描述性的标题，但我真的不知道如何措辞。

假设我有两个模型：

```
class Person(...):
  name = ... #have an attribute

class Family(...):
  mum = models.OneToOneField(Person)
  dad = models.OneToOneField(Person) 
```

当我有一个包含`mum`and的家庭时`dad`，我认为调用`dad.family`会产生家庭`dad`所在的家庭。但是，我收到一条错误消息，指出这与`mum`属性冲突。这里的解决方案是使用`relative_name`s. `mum`但是从s 那边给家人打电话`dad`给我感觉很奇怪。为什么我不能打电话`dad.family`？有人可以向我解释这里到底发生了什么冲突吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T16:18:28.073

问题是，给定您的模型， a`Person`可能是`mum`一个家庭，而 a`dad`是另一个家庭。

在这种情况下，这样的查询将是模棱两可的：

```
pat = Person.objects.get(name='Pat')
family1.mum = pat
family1.save()

family2.dad = pat
family2.save()

pat.family # Which family do we want? 
```

因此，您需要为每个人定义一个反向关系名称（例如，family_as_mum 和 family_as_dad）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-24T17:58:54.907

我知道上面的答案确实回答了“为什么会发生冲突”的问题，而且我知道这是一个老问题。但是，我遇到它试图想出一种方法让代码根据另一列中的条目限制一列中的条目。我没有找到足够的答案，但自己设法弄明白了。以下是对未直接提出但可能对其他人有帮助的问题的答案。

```
from django.db import models

class Person(models.Model):
  name = models.CharField(max_length=255)

class Family(models.Model):
  mum = models.OneToOneField(Person, on_delete=models.SET_NULL, related_name='family_as_mum', null=True)
  dad = models.OneToOneField(Person, on_delete=models.SET_NULL, related_name='family_as_dad', null=True)

  def save(self, *args, **kwargs):
    if Family.objects.filter(mum=self.dad).exists() or Family.objects.filter(dad=self.mum).exists() or self.mum == self.dad:
      return #any person can only be a mum or a dad, not both
    else:
      super(Family, self).save(*args, **kwargs)

  def update(self, *args, **kwargs):
    if Family.objects.filter(mum=self.dad).exists() or Family.objects.filter(dad=self.mum).exists() or self.mum == self.dad:
      return #same as save, don't want them to update a family member in an invalid way
    else:
      super(Family, self).update(*args, **kwargs)

  @staticmethod
  def get_family(person):
    if Family.objects.get(mum=person).exists():
      return Family.objects.get(mum=person)
    elif Family.objects.get(dad=person).exists():
      return Family.objects.get(dad=person)
    else:
      return None 
```

[*注意，在这里](https://stackoverflow.com/questions/13317197/django-model-method-with-self-instance)找到了@staticmethod ，认为拥有一个查找与父母相关的家庭的功能可能很有用，因为我们可能不知道一个人是妈妈还是爸爸

# java - android中优化更新ListView

> ID：12712554
> 
> 赞同：0
> 
> 时间：2012-10-03T16:14:06.987
> 
> 标签：java, android, android-listview

到目前为止，我已经编写了完全从 web（解析等）或完全从本地数据库加载列表视图的应用程序。我打算开发的是一个列表视图，它将从现有的本地数据库加载，并检查 Web 数据库并仅获取本地缓存中不存在的那些条目，然后用这些新条目更新本地缓存。

我有一个实现它的天真想法。本地数据中将有一个关于本地数据库中条目数的值。类似地，Web 数据库上的条目数也会有一个值。然后我们可以准确地从网络上获取所需数量的条目，而不是再次获取整个列表。

有没有更好/更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:38:08.817

我找到了解决方案。更好的做法是在中间层服务器上进行检查。这就像一个 3 层应用程序。会有一个中间层来存储当前用户看到的所有帖子。所以下次用户想要更新自己时，中间层可以查看上次发回给他的结果

# javascript - 传单清除 geojson 层（折线）

> ID：12712557
> 
> 赞同：2
> 
> 时间：2012-10-03T16:14:16.833
> 
> 标签：javascript, jquery, leaflet

我正在使用 geojson 创建折线。我的geojson格式如下：

```
var myLines = [{
    "type": "LineString",
    "coordinates": [[-75, 21.9], [-75.4, 22.7], [-76.5, 23.4]]
    }, {
    "type": "LineString",
     "coordinates": [[-105, 40], [-110, 45], [-115, 55]]
}];

        L.geoJson(myLines).addTo(map); 
```

我有一个清晰的折线函数如下：

```
function clear_polyline(){
$.each(myLines, function(ind,poly){
map.removeLayer(poly);
});
} 
```

此函数不会清除图层，也不会引发任何错误。如何清除传单中的折线？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T19:05:37.333

您需要从地图中删除 Leaflet 图层，而不是创建图层的 GeoJSON 对象。L.GeoJSON 是一个 FeatureLayer，它将包含“myLines”中的所有项目，因此您应该执行以下操作来删除它：

```
var linesFeatureLayer = L.geoJson(myLines);
linesFeatureLayer.addTo(map);

function clear_polyline() {
  map.removeLayer( linesFeatureLayer );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-10T09:44:21.510

```
var linesFeatureLayer = L.geoJson(myLines);
linesFeatureLayer.clearlayer() 
```

# mysql - MySQL 和系统“root”帐户

> ID：12712560
> 
> 赞同：0
> 
> 时间：2012-10-03T16:14:21.177
> 
> 标签：mysql, ubuntu, root

我将 RootPermitLogin 设置为“否”并使用 passwd -l 锁定了系统“root”帐户。无论如何，我认为 MySQL 'root' 帐户与系统帐户“不同”！问题是，现在如果我尝试像（例如）这样的命令：

```
zcat db.sql.gz | mysql -u root -p db_name 
```

我得到：错误 1045（28000）：

> 用户'root'@'localhost'的访问被拒绝（使用密码：YES）

好的，我锁定了我的系统“root”帐户，但我之前为我的 MySQL“root”帐户设置了不同的密码！这里发生了什么事？奇怪的是，当我尝试执行这些命令时出现此错误，但 WordPress 或 SMF 等应用程序设法使用相同的 MySQL 'root' 帐户密码连接到他们的数据库。

我在 Ubuntu 12.04 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:25:34.237

MySQL root 帐户是内部 MySQL 管理帐户。

Linux root 用户帐户是完全不同的东西，它与 MySQL 无关。

# c# - WinRT - 如何从导航历史记录中忽略或删除页面

> ID：12712562
> 
> 赞同：9
> 
> 时间：2012-10-03T16:14:26.663
> 
> 标签：c#, xaml, navigation, microsoft-metro, windows-runtime

我的 WinRT Metro (c# - xaml) 应用程序中有以下情况：

用户启动应用程序并且他或她没有登录。在菜单栏中，我有将他们导航到购物车的按钮。值得一提的是，无论登录/注销状态如何，他们都可以单击它。

所以我有这个：

```
Home Page - > Login Page - > Shopping Cart 
```

一切都很好，但是当我尝试按**购物车**页面上的“返回”按钮时，我被导航回**登录**页面，这很有意义，因为页面在我的导航历史记录中。但我不希望这样，我想将用户返回**主页**并跳过登录页面。

我的问题是如何做到这一点，以及如何在 WinRT 上操作框架导航堆栈。我试过回去两次，但没有运气。

顺便说一句，我的页面是“LayoutAwarePage”页面，我正在使用类似于 [http://dotnetbyexample.blogspot.com/2012/06/navigationservice-for-winrt.html](http://dotnetbyexample.blogspot.com/2012/06/navigationservice-for-winrt.html)的 NavigationService 。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T20:08:29.270

你可以用不同的方式来处理它。您可以使后退按钮多次导航，直到它到达主页或跳过登录页面。您还可以使登录页面显示在导航之外`Frame`- 无论是在弹出窗口中还是在应用程序的不同层中。

*更新

在 8.1 中，平台引入了[`BackStack`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.frame.backstack.aspx)和`ForwardStack`属性`Frame`，您可以在其上进行操作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-21T01:45:37.150

我知道它很旧，但由于谷歌为我找到了这个页面，也许其他人也会找到这个页面。

答案虽然是一种有效的解决方法，但不能回答问题。

您可以在登录页面上使用它，将其从后台堆栈中删除。

```
if(login_was_successful == true)
{
    this.Frame.Navigate(typeof(ShoppingCard));

    if(this.Frame.CanGoBack)
    {
        this.Frame.BackStack.RemoveAt(0);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T09:08:38.377

在项目的 Common 文件夹中有一个 LayoutAwarePage.cs 文件。您可以从此文件更改后退按钮的行为。

```
 protected virtual void GoBack(object sender, RoutedEventArgs e)
        {

            while (this.Frame.CanGoBack) this.Frame.GoBack();

            // Use the navigation frame to return to the previous page
            //if (this.Frame != null && this.Frame.CanGoBack) this.Frame.GoBack();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-06T03:57:07.727

我编写了自己的历史跟踪导航服务。你可以在[这里](https://github.com/Sparkiy/sparkiy-client/blob/edge/SparkiyClient/SparkiyClient/SparkiyClient.Shared/Services/NavigationService.cs)找到它。

如果我移动文件或删除它，这是当前版本：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Media.Animation;
using Windows.UI.Xaml.Navigation;
using MetroLog;
using SparkiyClient.UILogic.Services;

namespace SparkiyClient.Services
{
    public class NavigationService : INavigationService
    {
        private static readonly ILogger Log = LogManagerFactory.DefaultLogManager.GetLogger<NavigationService>();
        private readonly Dictionary<string, Type> pagesByKey = new Dictionary<string, Type>();
        private readonly Stack<PageStackEntry> historyStack = new Stack<PageStackEntry>();
        private PageStackEntry currentPage;

        public string CurrentPageKey { get; private set; }

        public bool CanGoBack => this.historyStack.Any();

        private static Frame GetFrame()
        {
            return (Frame)Window.Current.Content;
        }

        public void GoBack()
        {
            if (!this.CanGoBack)
                return;

            var item = this.historyStack.Pop();
            this.NavigateTo(item.SourcePageType.Name, item.Parameter, false);
        }

        public void GoHome()
        {
            if (!this.CanGoBack)
                return;

            var item = this.historyStack.Last();
            this.NavigateTo(item.SourcePageType.Name, item.Parameter, false);
            this.historyStack.Clear();
        }

        public void NavigateTo(string pageKey, bool addSelfToStack = true)
        {
            this.NavigateTo(pageKey, null, addSelfToStack);
        }

        public void NavigateTo<T>(bool addToStack = true)
        {
            this.NavigateTo<T>(null, addToStack);
        }

        public void NavigateTo<T>(object parameter, bool addSelfToStack = true)
        {
            this.NavigateTo(typeof(T).Name, parameter, addSelfToStack);
        }

        public void NavigateTo(string pageKey, object parameter, bool addToStack = true)
        {
            var lockTaken = false;
            Dictionary<string, Type> dictionary = null;
            try
            {
                Monitor.Enter(dictionary = this.pagesByKey, ref lockTaken);
                if (!this.pagesByKey.ContainsKey(pageKey))
                    throw new ArgumentException(string.Format("No such page: {0}. Did you forget to call NavigationService.Configure?", pageKey), "pageKey");

                if (addToStack && this.currentPage != null)
                    this.historyStack.Push(this.currentPage);

                GetFrame().Navigate(this.pagesByKey[pageKey], parameter);

                this.CurrentPageKey = pageKey;
                this.currentPage = new PageStackEntry(this.pagesByKey[pageKey], parameter, null);

                Log.Debug(this.historyStack.Reverse().Aggregate("null", (s, entry) => s + " > " + entry.SourcePageType.Name));
            }
            finally
            {
                if (lockTaken && dictionary != null)
                    Monitor.Exit(dictionary);
            }
        }

        public void Configure(string key, Type pageType)
        {
            var lockTaken = false;
            Dictionary<string, Type> dictionary = null;
            try
            {
                Monitor.Enter(dictionary = this.pagesByKey, ref lockTaken);
                if (this.pagesByKey.ContainsKey(key))
                    this.pagesByKey[key] = pageType;
                else this.pagesByKey.Add(key, pageType);
            }
            finally
            {
                if (lockTaken && dictionary != null)
                    Monitor.Exit(dictionary);
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-28T09:11:40.947

您可以调用`GoHome()`按钮`Back`事件，这将带您进入`HomePage`应用程序的第一页。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-05-03T17:51:43.283

从堆栈中弹出：

```
NavigationService.RemoveBackEntry(); 
```

触摸返回按钮导航到主菜单：

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    NavigationService. Navigate (new Uri ("/Main Page. xaml", UriKind.Relative));
} 
```

即使用户触摸后退按钮，也要让用户保持在主菜单中：

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
    // cancel the navigation
    e.Cancel = true;
} 
```

# sqlite - Sqlite fmdb lib为armv7复制符号

> ID：12712566
> 
> 赞同：0
> 
> 时间：2012-10-03T16:14:52.310
> 
> 标签：sqlite, ios6, fmdb, armv7

尝试在基于 iOS 6 SDK 的 Xcode 4.5 上构建时出现此错误

重复符号 _main 在：/Users/nsm/Library/Developer/Xcode/DerivedData/Newsapp-btwcniahgzgkgrbtyloduniznsay/Build/Intermediates/Newsapp.build/Debug-iphonesimulator/Newsapp.build/Objects-normal/i386/main.o /Users/ nsm/Library/Developer/Xcode/DerivedData/Newsapp-btwcniahgzgkgrbtyloduniznsay/Build/Intermediates/Newsapp.build/Debug-iphonesimulator/Newsapp.build/Objects-normal/i386/fmdb.o ld：架构i386 clang的1个重复符号：错误: 链接器命令失败，退出代码为 1（使用 -v 查看调用）

问题是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T05:57:29.450

You must remove the file `fmdb.m` which got imported along with the FMDB classes.

# opencart - 如何在opencart中按价格显示购物车降序

> ID：12712571
> 
> 赞同：0
> 
> 时间：2012-10-03T16:15:06.103
> 
> 标签：opencart

我只想问一下目录文件夹中的代码是什么，如果我想降低我在opencart的购物车中添加的产品列表，我需要打开什么。例如，我有三 (3) 种产品，产品 A = 3.00 美元，产品 B = 2.75 美元，产品 c = 1.50 美元，

我试图在 cart.php **(\system\library\cart.php)**的 $product_query 中查看并添加**ORDER BY price DESC** ，但我未能按购物车中存在的产品列表进行订购。

 **有没有一种解决方案可以降低购物车中的产品列表？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:03:59.320

这些是您需要为 OpenCart 关注的 PHP 命令，位于**/catalog/controller/checkout/cart.php**

```
if ($this->cart->hasProducts() || (isset($this->session->data['vouchers']) && $this->session->data['vouchers'])) { // look for hasProducts

$products = $this->cart->getProducts(); // look for this 
```

文件也在

```
system/library/cart.php
system/library/product.php 
```

你需要编辑`public function getProducts() {`

```
$sql = "SELECT * FROM " . DB_PREFIX . "product p LEFT JOIN " . DB_PREFIX . "product_description pd ON (p.product_id = pd.product_id)"; 
```

还有一些编辑，只需在 OpenCart zip 中的这些功能的文件夹中查找即可。您可以`ORDER BY`在这些 SQL 命令中添加您的函数和其他函数。我建议下载与您匹配的 OpenCart 版本并保留 zip 提取 - 切勿触摸源代码，以便您可以参考它，如果使用 WordCompress，请始终将原始作品保存为 .bk 或 .php.backup 或 .compress

# 更新

并非所有文件都以 MVC 格式构建。有些文件在系统文件夹中，有些文件和功能已经合并。**

# java - 在 JAX-WS 中禁用 SSL 套接字连接池？

> ID：12712574
> 
> 赞同：2
> 
> 时间：2012-10-03T16:15:19.427
> 
> 标签：java, sockets, connection, jax-ws, pooling

我想知道是否可以在 JAX-WS 中禁用套接字连接池？

我正在从 Jetty 中调用网络服务。Web 服务设计为在任何给定时间最多有两个到服务器的连接。其中一个连接是用于与服务器进行发布/订阅轮询的阻塞连接。另一个连接用于发出标准 SOAP 请求。一旦连接轮询，就不能使用其他连接进行轮询，否则服务器会返回错误。

为此，我创建了两个 SOAP 端口，其中一个用于轮询，另一个用于发出请求。在轮询器返回一些数据并且 SOAP 请求连接处于空闲状态之前，这非常有效。发生这种情况时，下次我尝试使用相同的 SOAP 端口进行轮询时，它会从连接池中选择一个连接并重用它。如果碰巧获得了 SOAP 请求连接，服务器将返回错误。从那时起，轮询器就死定了，因为我创建的任何新 SOAP 端口最终都会重用这两个连接中的一个，这两个连接都被认为对轮询无效。

一个可能的解决方案是禁用连接池，这意味着每次我创建一个新的 SOAP 端口时，它都会建立一个新的连接。要么就是这样，要么是一种获取套接字本身的方法，我可以强行关闭它。

值得一提的是，与服务器的连接是相互验证的 SSL 连接。

仅供参考，这是我尝试连接的服务器的规格：

[http://www.trustedcomputinggroup.org/files/resource_files/93C23F2A-1A4B-B294-D0A36CCD8A9E7BD3/TNC_IFMAP_v2_0R0_47.pdf](http://www.trustedcomputinggroup.org/files/resource_files/93C23F2A-1A4B-B294-D0A36CCD8A9E7BD3/TNC_IFMAP_v2_0R0_47.pdf)

任何帮助，将不胜感激！谢谢，马歇尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:41:01.693

在尝试了很多不同的事情后，我发现了一个解决问题的方法。不幸的是，我无法弄清楚如何禁用连接池。如果有人知道该怎么做，我想听听解决方案。

我最终创建了自己的自定义 SSL 套接字工厂，它充当默认 SSL 套接字工厂的传递，我在 HttpsURLConnection 类上设置了该工厂：

```
SSLContext context = SSLContext.getInstance("TLS");
context.init(new KeyManager[] { new ClientKeyManager() }, 
    new TrustManager[] { new ClientTrustManager() }, 
    new SecureRandom());
HttpsURLConnection.setDefaultSSLSocketFactory(new ManagedSSLSocketFactory(context.getSocketFactory())); 
```

请注意，我从 SSLContext 类传入了默认套接字工厂。ManagedSSLSocketFactory 的代码如下所示：

```
private class ManagedSSLSocketFactory extends SSLSocketFactory
{
    private SSLSocketFactory m_socketFactory;

    public ManagedSSLSocketFactory(SSLSocketFactory socketFactory)
    {
        m_socketFactory = socketFactory;
    }

    @Override
    public Socket createSocket(Socket s, String host, int port, boolean autoClose) throws IOException
    {
        Socket socket = m_socketFactory.createSocket(s, host, port, autoClose);

        //Note that m_arcThread, m_arcSocket, etc are defined in the containing class
        if(Thread.currentThread() == m_arcThread)
        {
            if(m_arcSocketInvalid || (socket == m_ssrcSocket))
            {
                closeSocketQuietly(socket);
                return createSocket(s, host, port, autoClose);
            }
            m_arcSocketInvalid = false;
        }

        ... omitted some convoluted code that deals with edge cases

        return socket;
    }

    ... rest of implementation

} 
```

# qt - Qt 国际化：您在 Qt 应用程序中使用什么作为源文本？

> ID：12712577
> 
> 赞同：3
> 
> 时间：2012-10-03T16:15:24.460
> 
> 标签：qt, localization, internationalization

这个问题是关于最佳实践的。我目前正在研究 Qt 国际化系统。

您在 Qt 应用程序中使用什么作为源文本？

1.  您是否在应用程序代码中编写**英文文本**并将其用作**最终语言？**
2.  还是您编写英文文本，但仍为**英文版本设置专用翻译文件**，以便您的代码中的文本永远不会显示给客户？
3.  或者您是否**在代码中使用 ID**（例如“ID_ABOUT_US”），以便在更改英文文本时语言文件永远不会“丢失”翻译？

背景：假设我使用英语作为源语言，并且我的应用程序还有 5 个翻译文件。现在事实证明，英文文本没有很好地表达，需要更改。由于 lupdate 使用的启发式方法，我会在更改之后遇到其他 5 个翻译“丢失”这个翻译的问题吗？还是您通常认为这是一种好处，因为翻译也应该被审查？

对你的经历很感兴趣！

问候，

费边

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T21:17:58.380

1.  是的，即使它不是你的母语也是英语。它是世界上唯一一种仅用 7 位 ASCII 即可完全表达的语言，因此不需要您处理源代码编码。它也是人类翻译人员普遍理解的语言。然而，在源代码中“编写”意味着将所有内容都包含在 tr("") 中，因此可以进行预期翻译。如果没有翻译（没有`installTranslator()`调用），`tr()`则为无操作，因此将显示文本。这同样适用于已安装翻译器的缺失翻译。所以你的翻译不需要完成，未翻译的文本将显示在你的“源代码”英文中。

2.  “英文翻译”适用于一个很少使用的功能：代替愚蠢*的“收到 1 条消息*”，您可以为任何复数提供正确的文本，Qt 无需任何编码即可为您完成。只需使用[tr() 重载并使用最后一个数字参数](http://doc.qt.digia.com/4.7.1/qobject.html#tr)，并在 TS 文件中按参数提供所有复数变体`n`。不再有无穷无尽的 if-else 意大利面条和三元运算符。

    如果您的目标是多种语言（即不仅是英语和其他语言），那么设置“英语翻译”也有利于代码的一致性。英语被视为另一种语言，您切换到它的方式与任何其他语言相同。如果您没有英文翻译，则需要卸载翻译器以回退到它，然后再次安装任何其他语言。并不是说这对 Qt 来说是一个大问题，它只是关于代码一致性。你可以做一个[语言，翻译]的地图，不需要特别对待英语。

3.  没有身份证。您会发现自己开发命名约定只是为了不与代码不同部分的翻译重叠。无论如何，您都需要向您的人工翻译人员提供 id 到可读字符串的映射。关于害怕“失去翻译”。如果原文变化很大，那么强制重新翻译是好事。如果它没有太大变化，那么 Linguist 很可能会保留它，因为 TS 文件也保留了一个源文件行。

如有疑问，请阅读[Qt 的国际化指南](http://doc.qt.digia.com/4.7.1/internationalization.html#step-by-step)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:11:11.853

Qt 方法是将您的母语消息包含在用 tr(" ") 标志而不是单独的字符串表包装的代码中

有一个工具可以提取所有这些并为您的（人工）翻译创建一个文件，然后替换应用程序代码中的字符串。见[http://qt-project.org/doc/qt-4.8/linguist-manual.html](http://qt-project.org/doc/qt-4.8/linguist-manual.html)

它还具有 printf() 类型格式，带有位置相关标志，因此在不同的语言中，您可以使用 tr("The %1 is before the %2") 和 tr("zer %2 ist bevor %1")

# ios - 智能应用横幅可以启动从 Xcode 安装的应用吗？

> ID：12712580
> 
> 赞同：6
> 
> 时间：2012-10-03T16:15:32.653
> 
> 标签：ios, xcode

我正在尝试对智能应用横幅和 iOS 应用之间的集成进行原型设计。Smart App Banner 是否可以启动从 Xcode 而不是 App Store（在设备或模拟器中）安装的 iOS 应用程序？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:55:12.810

这是不可能的。Smart App Banner 只能启动 App Store 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T23:21:33.217

以下对我有用：

1.  我使用运行 iOS 6 的设备从 AppStore 安装了该应用程序。
2.  然后我用 Xcode 6 的开发版本覆盖了它。

唯一困难的部分是获得 iOS 6 设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T17:27:18.613

据我所知，不适用于在 App Store 上没有列表的应用。

智能应用横幅“代码”需要来自 App Store 的应用 ID，而刚从 Xcode 安装的应用不提供该 ID。

如果该应用程序是对您通过 Xcode 安装的现有应用程序的更新，那么只要它在 iTunes 商店中可用，据我所知，它就会启动该应用程序。

# java - JAXB 库：没有与此类关联的 XML 类型的文本内容

> ID：12712583
> 
> 赞同：2
> 
> 时间：2012-10-03T16:15:41.017
> 
> 标签：java, xml, jaxb

我在从 XSD 自动生成的类中收到此错误“没有与此类关联的 XML 类型的文本内容。JAXB 问题”。你知道发生了什么吗？

*源代码*

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "linkType", propOrder = {
    "content"
})
public class LinkType {
    @XmlValue **THIS LINE HAS THE ERROR**
    protected String content; 
```

*XSD*

```
<xs:complexType name="linkType" mixed="true">
    <xs:annotation>
        <xs:documentation>
            The Atom link construct is defined in section 3.4 of the format spec.
        </xs:documentation>
    </xs:annotation>
    <xs:attribute name="href" use="required" type="xs:anyURI"/>
    <xs:attribute name="rel" type="xs:string" use="optional"/>
    <xs:attribute name="type" use="optional" type="xs:string"/>
    <xs:attribute name="hreflang" use="optional" type="xs:NMTOKEN"/>
    <xs:attribute name="title" use="optional" type="xs:string"/>
    <xs:attribute name="length" use="optional" type="xs:positiveInteger"/>
    <xs:attributeGroup ref="atom:commonAttributes"/>
</xs:complexType> 
```

BR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:34:28.370

您看到的错误消息是 Eclipse 验证异常：

> 没有与此类关联的 XML 类型的文本内容。

您可以忽略此异常，因为它是编辑器异常而不是编译器异常：

# python - 带 ctypes 的 ReadProcessMemory

> ID：12712585
> 
> 赞同：8
> 
> 时间：2012-10-03T16:15:48.340
> 
> 标签：python, winapi, ctypes, readprocessmemory

我正在做一个小单人教练。我不知道为什么函数 ReadProcessMemory 不起作用。通常它返回 False 或 True 但在这种情况下什么也没有。GetlastError() 给了我错误代码 6。

```
#-*- coding: cp1252 -*-

import ctypes, win32ui, win32process ,win32api

PROCESS_ALL_ACCESS = 0x1F0FFF
HWND = win32ui.FindWindow(None,"Solitär").GetSafeHwnd()
print(HWND)
PID = win32process.GetWindowThreadProcessId(HWND)[1]
print(PID)
PROCESS = win32api.OpenProcess(PROCESS_ALL_ACCESS,0,PID).handle

rPM = ctypes.windll.kernel32.ReadProcessMemory
wPM = ctypes.windll.kernel32.WriteProcessMemory

ADDRESS1 = 0x00E97074
ADDRESS2 = ctypes.create_string_buffer(64)
pi = ctypes.pointer(ADDRESS2)
rPM(PROCESS,ADDRESS1,ADDRESS2,64,0)
print(ADDRESS2)
x=ctypes.windll.kernel32.GetLastError()
print(x) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T04:14:41.340

查看社区对 MSDN [ReadProcessMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553%28v=vs.85%29.aspx)页面的评论，引用（原文如此）：

> ### W7不会运行读取进程内存
> 
> 您可能需要检查当前进程令牌的“SE_DEBUG_NAME”访问权限。如果未启用。启用它。当然，这必须以管理员身份完成。

还完全声明返回类型并使用`use_last_error`参数，其中`ctypes`将在调用后直接在内部缓存`GetLastError()`值。否则，它可能是不正确的。如果您在 64 位系统上，SIZE_T 和指针是 64 位值，因此 ctypes 需要知道类型才能正确设置调用堆栈。

```
...
from ctypes import wintypes
...
rPM = ctypes.WinDLL('kernel32',use_last_error=True).ReadProcessMemory
rPM.argtypes = [wintypes.HANDLE,wintypes.LPCVOID,wintypes.LPVOID,ctypes.c_size_t,ctypes.POINTER(ctypes.c_size_t)]
rPM.restype = wintypes.BOOL
wPM = ctypes.WinDLL('kernel32',use_last_error=True).WriteProcessMemory
wPM.argtypes = [wintypes.HANDLE,wintypes.LPVOID,wintypes.LPCVOID,ctypes.c_size_t,ctypes.POINTER(ctypes.c_size_t)]
wPM.restype = wintypes.BOOL

ADDRESS1 = 0x00E97074
ADDRESS2 = ctypes.create_string_buffer(64)
bytes_read = ctypes.c_size_t()
print(rPM(PROCESS,ADDRESS1,ADDRESS2,64,ctypes.byref(bytes_read)))
print(ctypes.get_last_error()) 
```

另外，仅供参考，即使进行了所有修复，我也会得到相同的错误值，但我没有遇到启用`SE_DEBUG_NAME`.

**解决了**

以下行是问题：

```
PROCESS = win32api.OpenProcess(PROCESS_ALL_ACCESS,0,PID).handle 
```

`win32api.OpenProcess`返回一个临时的，在检索到句柄后被`PyHANDLE`销毁*并关闭句柄。*

解决方案是使用：

```
PROCESS = win32api.OpenProcess(PROCESS_ALL_ACCESS,0,PID)
...
rPM(PROCESS.handle,ADDRESS1,ADDRESS2,64,0) 
```

`PROCESS`然后持有`PyHANDLE`对象并且句柄保持有效。

# javascript - 如何使用 js 或 jquery 使小图像从屏幕的一侧移动到另一侧？

> ID：12712592
> 
> 赞同：3
> 
> 时间：2012-10-03T16:16:04.020
> 
> 标签：javascript

我有一个小型动画飞机，上面写着“欢迎来到该网站”，我希望它从左侧屏幕循环移动到右侧。出来，然后消失。现在，我知道这可以用 JS 完成，但我不知道。在 JS 中移动一张图像很难吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T16:33:08.073

在您的帮助下，[`.animate()`](https://api.jquery.com/animate/)几乎可以制作任何动画

> **[.animate（属性[，持续时间] [，缓动] [，完成]）](https://api.jquery.com/animate/#animate-properties-duration-easing-complete)**
> 
> *   **properties**
>     类型： [PlainObject](http://api.jquery.com/Types/#PlainObject)
>     动画将向其移动的 CSS 属性和值的对象。
>     
>     
> *   **持续时间** （默认值 `400`：）
>     类型： [数字](http://api.jquery.com/Types/#Number) 或 [字符串](http://api.jquery.com/Types/#String)
>     确定动画将运行多长时间的字符串或数字。
>     
>     
> *   **easing** （默认值 `swing`：）
>     类型： [String](http://api.jquery.com/Types/#String)
>     一个字符串，指示用于过渡的缓动函数。
>     
>     
> *   **complete**
>     类型： [Function](http://api.jquery.com/Types/#Function) ()
>     动画完成后调用的函数，每个匹配元素调用一次。

对于*循环*，我们将实际动画部分包装到一个命名函数中，并将其作为`complete`回调传递。这样，动画将在完成后重新启动。

```
$(function() {
    var img = $("#plane"),
        width = img.get(0).width,
        screenWidth = $(window).width(),
        duration = 5000;

    function animatePlane() {
        img.css("left", -width).animate({
            "left": screenWidth
        }, duration, animatePlane);
    }

    animatePlane();
});
```

```
body { overflow: hidden }
#plane { position: absolute; left: -1000px; width: 50% /* <- not relevant for the animation */ }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<img id="plane" src="https://cdn.pixabay.com/photo/2018/09/13/10/18/aircraft-3674305_640.png" />
<!-- source: https://pixabay.com/de/flugzeuge-propeller-aircraft-alt-3674305/ -->
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T16:37:30.140

你可以为任何东西制作动画。我的代码将在屏幕上为 div（带有图像或您喜欢的任何内容）设置动画：

HTML：

```
<div id="animate">Sample</div> 
```

CSS：

```
#animate {
    position: relative;
    border; 1px solid green;
    background: yellow;
    width: 100px;
    height: 100px;
} 
```

JavaScript/jQuery 代码：

```
$(document).ready(function(e) {
    var width = "+=" + $(document).width();
    $("#animate").animate({
    left: width
  }, 5000, function() {
    // Animation complete.
  });
}); 
```

[在这里](http://jsfiddle.net/J2RPq/)工作 JSFiddle 。

你可以在 div 中放任何你想要的东西。CSS 中唯一重要的部分是“位置：相对；” 属性。您可以将“#animate”从一个 id 更改为一个类，并使多个对象在屏幕上显示动画。jQuery 用途广泛。

如果您希望动画再次从右向左回滚，请将代码更改为：

```
$(document).ready(function(e) {
    var width = $(document).width();

    function goRight() {
        $("#animate").animate({
        left: width
      }, 5000, function() {
         setTimeout(goLeft, 50);
      });
    }
    function goLeft() {
        $("#animate").animate({
        left: 0
      }, 5000, function() {
         setTimeout(goRight, 50);
      });
    }

    setTimeout(goRight, 50);
}); 
```

[在这里](http://jsfiddle.net/J2RPq/1/)工作 jsFiddle

要使图像正确滚动并永远消失，请执行以下操作：

```
$(document).ready(function(e) {
    var width = "+=" + $(document).width();
    $("#animate").animate({
    left: width
  }, 5000, function() {
    $("#animate").css("display", "none");
  });
}); 
```

[在这里](http://jsfiddle.net/J2RPq/2/)工作 jsFiddle

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-11-11T18:34:17.287

# 使用选框：

```
<marquee 
`scrollamount="10"`
 direction="left"
 behavior="scroll">
 Welcome to the site 
 <img src="images/plane.jpg" />
 </marquee> 
```

# javascript - Google App 脚本是否应该存储在 GitHub 等版本控制中

> ID：12712593
> 
> 赞同：70
> 
> 时间：2012-10-03T16:16:06.803
> 
> 标签：javascript, google-apps-script

我对管理 Google App Scripts 共享开发的最佳方式感到困惑。问题是编辑谷歌应用程序脚本是通过具有自己的版本控制的在线编辑器完成的，但据我所知，这并没有与其他开发人员共享。

那么我们建议的做法是从编辑空间复制并粘贴到本地硬文件中，然后推送到我们选择的版本控制系统中，然后当我们想要测试内容时，我们将内容复制并粘贴回在线编辑器中？看起来凌乱且容易出错。

我看到有些人将他们的 Google App Scripts 放在 Github 之类的地方：

[https://github.com/peterneubauer/neo4j-google-apps-script](https://github.com/peterneubauer/neo4j-google-apps-script)

如果我们可以像使用 Heroku 一样直接从 git 推送到 Google App Scripts 上进行部署，那就太好了。真的希望能够针对我的应用脚本运行一系列单元测试......

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-17T02:30:09.783

如果这对您很重要，您可以为第[217](http://code.google.com/p/google-apps-script-issues/issues/detail?id=217&q=version%20control&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)期和第[1959](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1959&q=version%20control&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner)期加注星标。

更新：使用 Apps 脚本查看[高级开发流程](http://googledevelopers.blogspot.com.br/2015/12/advanced-development-process-with-apps.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-19T02:56:31.583

这就是我的做法。我使用命令行工具[gdcmdtools](http://github.com/timchen86/gdcmdtools)来导入和导出我的 GAS 项目。
并将导出的项目存储在github中。
例子：

*   gdget.py FILE_ID -f json # 下载与GAS项目相关的ID为FIELD_ID的文件，你将得到PROJECT_NAME.json和源文件。

*   将文件存储到版本控制中，例如：github。

*   gdput.py -t gas PROJECT_NAME.json # 使用项目文件“PROJECT_NAME.json”更新 GAS 项目

有关更多信息，请查看[Manage-Google-Apps-Script(GAS)-with-gdcmdtools](https://github.com/timchen86/gdcmdtools/wiki/Manage-Google-Apps-Script(GAS)-with-gdcmdtools)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-31T17:15:38.213

我刚刚发布了一个用于导入/导出的 npm 模块。这是上面链接的 gdcmdtools 的更简单版本。示例用法：

*   `gaps init`
*   `gaps download <fileId>`在当前工作目录中克隆完整的项目
*   cd 进入项目文件夹并运行`gaps upload`以将其推送回 Google

在此处运行`npm install -g node-google-apps-script`或查看：[https](https://github.com/danthareja/node-google-apps-script) ://github.com/danthareja/node-google-apps-script 。在下一个版本中，我计划添加“与 github 同步”功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-24T13:31:51.290

我没有使用过这个，但是在阅读这个请求的当前状态时，有一个对 Eclipse 插件的引用。

[https://developers.google.com/eclipse/docs/apps_script](https://developers.google.com/eclipse/docs/apps_script)

我不确定我对此有何感想。我有点迷恋整个开发环境都是在线的。将我的构建过程的一部分移到我的桌面会破坏它。话虽如此......这可能允许一些 git/gas 集成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-21T07:17:25.107

你可以使用 Gulp 来简化它。

我的源包含几个文件和文件夹，然后在每次保存时组合成一个文件。

然后我将构建复制并粘贴到脚本编辑器进行测试。

轻松一点。**我认为向 Gulp 监视任务添加一个功能会非常简单，该功能也会自动更新 Google App 脚本编辑器**

# regex - 当搜索令牌是包含保留字符的 var 时，Perl 正则表达式 S&R

> ID：12712595
> 
> 赞同：-1
> 
> 时间：2012-10-03T16:16:21.533
> 
> 标签：regex, perl

考虑一下：

```
my $var = "${SOME_VAR}"

my $string "In this text ${SOME_VAR} will be replaced with X"

$string =~ s/$var/X/g;

print "\nprocessed string = <".$string.">"; 
```

返回

```
processed string = <In this text ${SOME_VAR} will be replaced with X> 
```

即不发生替换。

但是，如果 $var 不包含保留字符 ($)，则会发生替换：

```
my $var = "SOME_VAR"
/* everything else the same */ 
```

返回

```
processed string = <In this text ${X} will be replaced with X> 
```

但是我不知道当保留字符包含在变量中时如何转义它们，即当搜索标记不是显式但参数化时。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:17:53.933

您的字符串包含`$`具有特殊含义的字符串..您可以使用`\Q`and`\E`让它工作..

```
$string =~ s/\Q$var\E/X/g; 
```

**\Q 禁用模式元字符，直到 \E**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:30:02.883

`${foo}`语法是软引用，即使在字符串内部也是如此。您正在间接分配`$SOME_VAR`to的值`$var`。如果`$SOME_VAR`是 undef，你会得到一个空字符串，在正则表达式*中总是匹配*。

`$`除了使用`\Q`Rohit Jain 指出的那样，单引号或转义解决了问题。

# php - 从目录中快速检索特定文件

> ID：12712598
> 
> 赞同：0
> 
> 时间：2012-10-03T16:16:26.213
> 
> 标签：php, mysql

我正在一个网站上工作，我的客户希望将他的客户的发票 (PDF) 上传到网络服务器上的目录。然后，当客户登录时，他们可以查看所有发票并按日期排序。

由于他每个月必须上传大约 1000 张发票，我正在努力思考实现此目的的最佳方法。他不想一张一张上传发票。他宁愿一次只上传100个左右。我认为每张发票都需要在文件名中包含客户的帐号和日期，以帮助完成此过程。然而，即使这样，如果有数千张发票，一旦上传所有这些发票，就可能必须将文件路径自动链接到数据库。

任何人都有一个好主意让这个项目运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:47:07.393

将所有“尚未加载”的 PDF 放在一个目录中。从 PDF（OCR 或如果它们仍然包含文本）中获取帐号、发票编号和日期，并使用这些将条目添加到您的数据库中。

假设您没有将 PDF 加载到数据库中，请在数据库插入工作后将它们移动到它们的永久位置。

更好的是 - 您不是首先从数据库中生成 PDF 吗？将此归档步骤添加为 PDF 生成过程的一部分。

# asp.net-mvc-3 - MVC如何忽略嵌套视图模型的验证

> ID：12712601
> 
> 赞同：6
> 
> 时间：2012-10-03T16:16:29.893
> 
> 标签：asp.net-mvc-3

我有一个页面，我通过该页面将两个视图模型发布到控制器，查询和约会。预约嵌套在查询中。用户可以选择在不创建约会的情况下向我们提交查询。

我在视图模型属性上使用内置的 MVC 必需属性。

我的问题是，当用户选择在没有预约的情况下创建查询时，我怎样才能优雅地忽略嵌套预约视图模型上的验证器并让 ModelState.IsValid 返回 true？

```
if(!viewModel.CreateAppointment)
            {
                //ignore the nested view models validation                            
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-19T09:59:03.050

您可以制作一个自定义的 IgnoreModelError 属性，如下所示，并在您的视图中使用 2 个单独的按钮，一个用于查询，一个用于预约。

```
// C#
public class IgnoreModelErrorAttribute : ActionFilterAttribute
{
    private string keysString;

    public IgnoreModelErrorsAttribute(string keys)
        : base()
    {
        this.keysString = keys;
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        ModelStateDictionary modelState = filterContext.Controller.ViewData.ModelState;
        string[] keyPatterns = keysString.Split(new char[] { ',' }, 
                 StringSplitOptions.RemoveEmptyEntries);
        for (int i = 0; i < keyPatterns.Length; i++)
        {
            string keyPattern = keyPatterns[i]
                .Trim()
                .Replace(@".", @"\.")
                .Replace(@"[", @"\[")
                .Replace(@"]", @"\]")
                .Replace(@"\[\]", @"\[[0-9]+\]")
                .Replace(@"*", @"[A-Za-z0-9]+");
            IEnumerable<string> matchingKeys = _
               modelState.Keys.Where(x => Regex.IsMatch(x, keyPattern));
            foreach (string matchingKey in matchingKeys)
                modelState[matchingKey].Errors.Clear();
        }
    }
}

[HttpPost]
[IgnoreModelErrors("Enquiry.Appointment")]
public ActionResult CreateEnquiryOnly(Enquiry enquiry)
{
    // Code for enquiry only.
}

[HttpPost]
public ActionResult CreateAppointment(Enquiry enquiry)
{
    // Code for appointment.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T17:14:48.917

好吧，在使用标准数据属性时，没有办法“优雅地”忽略错误。

不过，您有几个选择。快速而肮脏（即不优雅）的方法是从控制器中的 ModelState 中清除相关错误。

```
if (some condition) {
    ModelState["controlName"].Errors.Clear();
} 
```

您还可以编写自己的使用条件测试的自定义数据属性。像这里描述的东西：

[http://blogs.msdn.com/b/simonince/archive/2011/02/04/conditional-validation-in-asp-net-mvc-3.aspx](http://blogs.msdn.com/b/simonince/archive/2011/02/04/conditional-validation-in-asp-net-mvc-3.aspx)

第三种方法是避开属性并使用验证框架，例如[FluentValidation](http://fluentvalidation.codeplex.com/)

最后一个选择是使用 JavaScript 来确定数据的正确状态，然后修改表单操作 url 以发布到不同的操作方法。然后，您可以使用 Bind 属性装饰操作方法参数，以排除您不想要的数据项。但是，我不会推荐这个，因为它要求客户端参与服务器端验证过程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T09:49:07.590

这就是我最终做的事情。

这使我能够清除嵌套约会 ViewModel 上的所有错误。

```
if (!viewModel.CreateAppointment)
            {
                foreach (var modelError in ModelState)
                {
                    string propertyName = modelError.Key;

                    if (propertyName.Contains("AppointmentsViewModel"))
                    {
                        ModelState[propertyName].Errors.Clear();
                    }
                }
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-19T21:11:14.250

另一个选项不是在 Inquiry 中嵌套 Appointment，而是为您的页面分别创建一个包含 Appointment 和 Inquiry 模型的 ViewModel，然后您可以使用 Bind 属性和 Property Include 或 Exclude 来选择性地选择要绑定或排除的模型，如下所示.

```
 Public Class EnquiryViewModel
    {
        public Appointment App {get; set;}
        public Enquiry Enq {get; set; }
    } 

    [HttpPost]
    //Only bind Enquiry model and it's errors.
    public ActionResult CreateEnquiryOnly([Bind(Include = "Enq")]EnquiryViewModel enquiry)
    {
        if(ModelState.IsValid)
        {
        // Code for enquiry only.
        }
    } 
```

# javascript - 使用 javascript 或 jquery 更改 div 元素的高度，但必须缓慢更改

> ID：12712602
> 
> 赞同：4
> 
> 时间：2012-10-03T16:16:30.923
> 
> 标签：javascript, jquery

嗨，我在 div 元素中设置了背景，我想在单击锚标记时增加该 div 标记的高度。但我希望高度慢慢增加。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T16:18:29.910

您可以更改`duration`动画的：

```
$('#element').animate({
    height: '200px'
}, {
    duration: 2000  // 2 seconds
}); 
```

**演示：http: [//jsfiddle.net/t5VYa/](http://jsfiddle.net/t5VYa/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:18:35.557

使用 jquery 的[动画](http://api.jquery.com/animate/)功能。

```
$('#selector').animate({
    height: '500px'
  }, 5000, function() {
    // Animation complete.
}); 
```

其中 5000 是以毫秒为单位的持续时间

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:19:07.923

你觉得动画？JQuery 的[动画](http://api.jquery.com/animate/)方法会很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T16:19:40.027

尝试查看 jQuery 动画。[http://api.jquery.com/animate/](http://api.jquery.com/animate/)我认为它可能会做你想做的事。它有一组样本来操作元素的各个方面

# file - Extjs 文件路径选择器

> ID：12712606
> 
> 赞同：0
> 
> 时间：2012-10-03T16:16:51.117
> 
> 标签：file, extjs, extjs4

我有 extjs 的休息客户端，我想让用户选择保存文件的位置。该文件通过 java 和 itextpdf 库在客户端计算机上保存为 pdf。我必须只将文件路径发送到客户端后端。如何创建“另存为”对话框以仅获取文件路径？extjs 中有 xtype: filefield 但它用于选择现有文件。我需要选择新文件的路径。

# web-services - 转移对象类型（类）

> ID：12712607
> 
> 赞同：1
> 
> 时间：2012-10-03T16:16:51.923
> 
> 标签：web-services, soap, cxf

SOAP 可以用对象传输类型信息吗？如果是：我使用 Apache CXF 生成客户端代码。有没有办法让它暗示课程？

背景：我想`List<SomeInterface>`在我的 Web 服务中使用更通用的容器，例如（服务器端是 Java 和 NetBeans），但是如果没有类型信息，则无法在服务器端恢复对象（或者至少我认为这是不可能的）。

# csv - 如何让 Beyond Compare 按名称而不是按顺序比较与列匹配的数据文件

> ID：12712610
> 
> 赞同：6
> 
> 时间：2012-10-03T16:17:10.753
> 
> 标签：csv, comparison, beyondcompare, beyondcompare3

## 我有两种情况：

1.  列数相同但列顺序不同的两个 csv 文件。csv 的第一行是标题行，并正确指示列名
2.  具有一些不同列的两个 csv 文件，但实际上大多数列都存在于两个文件中。同样，csv 标题行表示可以比较的列名

在上述两种情况下，BC3 都无法自动匹配/更改列顺序。这可以通过`Session Settings`菜单手动完成，但相当耗时。

## 上面#2的一个例子

请注意，在以下屏幕截图中，左侧文件有一个名为的列`priority`，而右侧文件没有。

### 之前（默认与按顺序匹配的列）：

请注意，在下图中，左侧文件的列 5`priority`正在与右侧文件的列 5 进行比较`companyjob`。以下所有列比较同样不匹配。

![前](../Images/f5cce19d815e10b19b4a09b9315a1734.png)

### 之后（使用名称手动匹配的列）：

![后](../Images/da5855dced9fcf714c4410d1be1130bb.png)

是否有一种简单的方法可以轻松/自动配置此比较，就像我在第二张图片中手动完成的那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-17T01:27:36.807

在我看来，您可以在 Beyond Compare 中保存比较会话（简称为会话），这是两个文件系统对象之间的实际差异。您在上面更改的那些设置特定于该会话，但您希望它们适用于任何其他类似的会话。我想知道是否可以使用手动输入的数据比较列设置保存会话并更改类似格式文件的路径以使它们采用相同的列设置。让我看看...

考虑三个文件

文件 1.csv

```
Column1,Column2,Column3
A,B,C
A,B,C
A,B,C1 
```

文件2.csv

```
Column1,Column3,Column2
A,C,B
A,C,B
A,C1,B 
```

文件 3.csv

```
Column1,Column3,Column2
A,C0,B
A,C,B
A,C,B 
```

这是文件 1 和 2 之间的默认差异![file1.csv 和 file2.csv 之间的默认数据会话](../Images/23a686640618bc667364bf5c203c2afa.png)

在这里，我更改了数据比较列设置，![在右文件中将第 3 列上移一级](../Images/7d1e113d618c4aaa82866a2148f97ef6.png) 现在显示这两个文件之间没有更改列。![在此处输入图像描述](../Images/91d8eb9f8da9f50594ddaec08d132c4e.png)

保存该会话后，我编辑地址栏以将 file2.csv 替换为格式相似的 file3.csv 并等待查看列设置是否保持不变，在我看来它们是![在此处输入图像描述](../Images/e5de99a4507ec259a822907f959a3c3d.png)

因此，我想您可以在任意示例会话中保留这些列设置，稍后您必须在该时间点更改您希望区分的实际文件的路径。当然有点尴尬，将这些设置应用为预配置设置会更好，就像在文件夹比较会话中您可以保存过滤器设置以应用于新会话一样。

但是，我很好奇为什么您的对话框看起来与我导航以编辑设置的位置不同；特别是您的显示一个下拉菜单，上面写着“仅用于此视图”。下拉列表中还列出了什么？我正在使用 3.3.8 版（内部版本 16340）

# xml - XML标签与标签var速度？

> ID：12712612
> 
> 赞同：0
> 
> 时间：2012-10-03T16:17:27.710
> 
> 标签：xml, json, performance, variables

有人想知道在解析的意义上什么会执行得更快（只读）。一个人没有知识来做这样的测试，你能告诉我那个轻的先生吗？

决定不使用 JSON。

1.

```
<tag>variable</tag> 
```

2.

```
<tag var="variable"></tag> 
```

# regex - 正则表达式检查最后一个字符

> ID：12712613
> 
> 赞同：1
> 
> 时间：2012-10-03T16:17:28.180
> 
> 标签：regex, double

这是我的问题：我需要在开头（检查）、结尾和空格后面防止空格（检查）。阅读有关负前瞻和与逻辑运算符链接的内容，但我没有得到它的工作 - 这是我到目前为止的代码（有效但不能满足我的所有需求）：

```
if (!/^[^ ](?!.*[ ]{2})([a-zA-Z0-9 ]{3,20})/.test(name.val())) { 
```

有人可以帮我完成这条线吗？

提前致谢！法比奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:25:45.133

您可以使用`\s`and`\S`来匹配空白和非空白。

尝试这样的事情：

```
if (!/^\S+(?!\s{2})([\w\s]{3,20})\S+$/.test(name.val())) { 
```

`\w\s`匹配`[a-zA-Z0-9_]`和所有空格，因此如果您不希望匹配下划线，请使用`[a-z\d\s]`并使您的正则表达式不区分大小写 ( `/asd/i.test()`)

# regex - 删除用于创建上下文链接的 HTML 标记

> ID：12712622
> 
> 赞同：-1
> 
> 时间：2012-10-03T16:18:14.347
> 
> 标签：regex, tridion, tridion-2011

我在 ASP.NET 中编写了一个函数来创建上下文链接。它从 Tridion 中组件的描述字段中获取数据。我正在使用“RenderComponentField”从描述字段中挑选数据，该字段使用所有 HTML 标记挑选完整的数据源。

代码工作正常。但是，它有时会在获取我们想要在某些 HTML 标记（如锚标记等）中创建上下文链接的“文本”时失败。它从 HTML 标记中选择文本并在那里创建链接本身，这会破坏 HTML。

就像，我们想为文本“dummy”创建上下文链接，我们在 HTML 中有一个锚链接

```
<a href="http://www.dummy.com">Dummy</a> 
```

一旦它在“href”中找到文本虚拟，它就会立即创建链接，从而破坏 HTML。

请为此提供解决方案。可能是绕过 HTML 标记或任何类似内容的正则表达式。

干杯，阿努巴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:28:44.683

我不太明白这个问题，“上下文链接”是什么意思。您说您从“描述”字段中选择数据，它是什么类型的字段？（我假设它是一个 RTF，因为您说“它使用所有 HTML 标签获取完整的数据源”）

您能否发布您期望获得的 html 示例以及实际获得的内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:40:41.807

如果你想使用正则表达式，你可以像这样使用它

```
 search = "(dummy)";
    replace = "<a href=\"$1\" target=\"_blank\">$1</a>"; 
     Regex.Replace(stringToSearch, search, replace); 
```

但不确定您的要求，因此无法建议在何处使用上述代码。

# php - 将txt文件的内容分解成数组

> ID：12712629
> 
> 赞同：5
> 
> 时间：2012-10-03T16:18:29.113
> 
> 标签：php, arrays, text-files, explode

我在爆炸 .txt 文件的内容时遇到问题（结构如下）：

```
 01Name 1 
    02whatever contents
    03whatever contents
    -------------------
    01Name 2
    02whatever contents
    03whatever contents 
```

如您所见，“分隔符”是“------”。现在，问题是：如何将这个文件分解成一个数组，这样我就可以搜索一个特定的名称并显示该块的内容？我试着像这样爆炸：

```
 header("Content-type:text/plain");
  $file = fopen("cc/cc.txt", "r");

  while (!feof($file)) {
    $lot = fgets($file);
    $chunk = explode("-------------------",$lot);

    print_r($chunk);

  }

  fclose($file); 
```

结果得到了这个：

```
 Array
    (
        [0] => 01Name 1 

    )
    Array
    (
        [0] => 02whatever contents

    )
    Array
    (
        [0] => 03whatever contents

    )
    Array
    (
        [0] => -------------------

    )
    Array
    (
        [0] => 01Name 2

    )
    Array
    (
        [0] => 02whatever contents

    )
    Array
    (
        [0] => 03whatever contents
    ) 
```

当我想得到这个结果时：

```
 Array
    (
        [0] => 01Name 1
        [1] => 02whatever contents
        [2] => 03whatever contents

    )
    Array
    (
        [0] => 01Name 2
        [1] => 02whatever contents
        [2] => 03whatever contents
    ) 
```

我搜索过[PHP；将 fgets() 输出分配给数组](https://stackoverflow.com/questions/8479672/php-assigning-fgets-output-to-an-array)并将[txt 文件的每一行读取到新的数组元素](https://stackoverflow.com/questions/6159683/read-each-line-of-txt-file-to-new-array-element)，但没有运气。

有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T16:27:36.973

您可以使用以下

```
$result = array();
$file = explode("-------------------", file_get_contents("cc/cc.txt"));
foreach ( $file as $content ) {
    $result[] = array_filter(array_map("trim", explode("\n", $content)));
}
var_dump($result); 
```

输出

```
array
  0 => 
    array
      0 => string '01Name 1' (length=8)
      1 => string '02whatever contents' (length=19)
      2 => string '03whatever contents' (length=19)
  1 => 
    array
      1 => string '01Name 2' (length=8)
      2 => string '02whatever contents' (length=19)
      3 => string '03whatever contents' (length=19) 
```

你可以更进一步

```
$result = array();
$file = explode("-------------------", file_get_contents("cc/cc.txt"));
foreach ( $file as $content ) 
{
    foreach(array_filter(array_map("trim",explode("\n", $content))) as $line)
    {
        list($key,$value) = explode(" ", $line);
        $result[$key] = $value ;
    }
}
var_dump($result); 
```

输出

```
array
  '01Name' => string '2' (length=1)
  '02whatever' => string 'contents' (length=8)
  '03whatever' => string 'contents' (length=8) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:22:55.247

首先，您应该使用[`file()`](http://php.net/file)逐行读取和拆分文件。这是专门为此目的而内置的。

您的检查`"-------------------"`失败，因为您没有考虑尾随换行符（`\r\n`等）。（用作一种解决方案`FILE_IGNORE_NEW_LINES`的`file()`功能）。虽然在这里使用正则表达式可能会更好：

```
$lines = file($filename);
foreach ($lines as $line) {
    if (preg_match('/^\s*---------+\R*$/', $line)) { ... }
} 
```

这种方式有点多余，但更有弹性。

您不妨阅读整个文件[`file_get_contents`](http://php.net/file_get_contents)并使用拆分文本块[`preg_split`](http://php.net/preg_split)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:27:06.850

如果你的文件格式一致，每个数据块有三行，你可以简单地解析它。在这里，我正在创建整个文件的二维数组：

```
<?php

header("Content-type:text/plain");
$file = fopen("cc.txt", "r");

$alldata = array();
$index = 0;
while (!feof($file))
{
    $alldata[$index]['name'] = fgets($file);
    $alldata[$index]['c1'] = fgets($file);
    $alldata[$index]['c2'] = fgets($file);
    fgets($file); // throw away delimiter line
    $index++;
}
fclose($file);  

print_r($alldata);
?> 
```

这输出：

```
Array
(
    [0] => Array
        (
            [name] => 01Name 1 
            [c1] => 02whatever contents
            [c2] => 03whatever contents
        )
    [1] => Array
        (
            [name] => 01Name 2
            [c1] => 02whatever contents
            [c2] => 03whatever contents
        )
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T16:29:32.293

```
$c      = file_get_contents($file);
$lines  = explode("-------------------", $c);
foreach ($lines as $l) {
    if (strpos($l, 'keyword') !== false) {
        echo $l;
        die();
    }
} 
```

# android - 在 Androids 清单文件中添加 uses-sdk 字段会导致崩溃

> ID：12712630
> 
> 赞同：1
> 
> 时间：2012-10-03T16:18:29.190
> 
> 标签：android, android-manifest

由于某种原因，在 Android 的清单文件中添加 uses-sdk 字段时会导致崩溃。我以前没有发生过这种情况，但我现在无法摆脱它。

清单文件的相关部分如下：

```
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET"/>

<application 
```

在 uses-sdk 子句上方或下方移动权限行没有区别，更改最低版本或目标版本也没有区别。无论选择什么（在合理范围内，因为我无法返回 API 8、10 或任何真正早期的级别），如果文件中包含 uses-sdk 子句，应用程序就会崩溃。

删除它允许它运行。

我得到的错误是“不幸的是 [app] 已停止”默认值，并且 logcat 列表中存在相关的“FATAL EXCEPTION：main”错误。

任何帮助或建议表示赞赏。

谢谢！

这是我正在阅读的一本书的一个例子（或者我应该说）。:)

我在下面添加了完整的 logcat 列表。

```
10-03 13:29:18.270: E/Trace(860): error opening trace file: No such file or directory (2)
10-03 13:29:18.950: D/AndroidRuntime(860): Shutting down VM
10-03 13:29:18.950: W/dalvikvm(860): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-03 13:29:18.960: E/AndroidRuntime(860): FATAL EXCEPTION: main
10-03 13:29:18.960: E/AndroidRuntime(860): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.paad.earthquake/com.paad.earthquake.Earthquake}: android.os.NetworkOnMainThreadException
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.os.Looper.loop(Looper.java:137)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-03 13:29:18.960: E/AndroidRuntime(860):  at java.lang.reflect.Method.invokeNative(Native Method)
10-03 13:29:18.960: E/AndroidRuntime(860):  at java.lang.reflect.Method.invoke(Method.java:511)
10-03 13:29:18.960: E/AndroidRuntime(860):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-03 13:29:18.960: E/AndroidRuntime(860):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-03 13:29:18.960: E/AndroidRuntime(860):  at dalvik.system.NativeStart.main(Native Method)
10-03 13:29:18.960: E/AndroidRuntime(860): Caused by: android.os.NetworkOnMainThreadException
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
10-03 13:29:18.960: E/AndroidRuntime(860):  at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
10-03 13:29:18.960: E/AndroidRuntime(860):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
10-03 13:29:18.960: E/AndroidRuntime(860):  at java.net.InetAddress.getAllByName(InetAddress.java:214)
10-03 13:29:18.960: E/AndroidRuntime(860):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
10-03 13:29:18.960: E/AndroidRuntime(860):  at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
10-03 13:29:18.960: E/AndroidRuntime(860):  at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
10-03 13:29:18.960: E/AndroidRuntime(860):  at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
10-03 13:29:18.960: E/AndroidRuntime(860):  at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
10-03 13:29:18.960: E/AndroidRuntime(860):  at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
10-03 13:29:18.960: E/AndroidRuntime(860):  at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
10-03 13:29:18.960: E/AndroidRuntime(860):  at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
10-03 13:29:18.960: E/AndroidRuntime(860):  at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
10-03 13:29:18.960: E/AndroidRuntime(860):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
10-03 13:29:18.960: E/AndroidRuntime(860):  at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:486)
10-03 13:29:18.960: E/AndroidRuntime(860):  at com.paad.earthquake.EarthquakeListFragment.refreshEarthquakes(EarthquakeListFragment.java:77)
10-03 13:29:18.960: E/AndroidRuntime(860):  at com.paad.earthquake.EarthquakeListFragment.onActivityCreated(EarthquakeListFragment.java:55)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:848)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1035)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1017)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1802)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.Activity.performCreate(Activity.java:5011)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-03 13:29:18.960: E/AndroidRuntime(860):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-03 13:29:18.960: E/AndroidRuntime(860):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:39:56.857

错误是`NetworkOnMainThreadException` 从 ICS 开始，您不能在主线程上进行任何网络访问。您可能应该使用 `AsyncTask`您进行网络访问的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:03:59.603

正如@Sameer 所说，您正在 Activity 的核心中进行网络调用。你永远不应该那样做。您活动的所有代码都在主线程上运行：用于 UI 的代码。您不应该对该线程进行任何繁重的计算：它会从 UI 中占用资源，使其滞后。http 调用更糟糕：只要您没有响应，UI 就会被阻止。

在 AsyncTask 中实现您的网络调用。

# ssis - 使用 ssis 导出 Varbinary(max) 列

> ID：12712632
> 
> 赞同：0
> 
> 时间：2012-10-03T16:18:31.630
> 
> 标签：ssis

我们有一个带有 varbinary(max) 列的表，该列用于应用程序中的富文本字段（**不用于附加文档**）。我正在尝试通过一个非常简单的 ssis 包将列导出到平面文件中。我的包包含 oledb 课程和平面文件目标。

当我打开平面文件输出时，我惊讶地发现数据被截断为 255 个字符，你知道如何完全导出所有数据吗？

谢谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T17:39:06.123

在等待澄清您打算如何使用它的同时，我建议您查看[Export Column Transformation](http://msdn.microsoft.com/en-us/library/ms139818.aspx)。在这个问题上也需要类似的需求 [Using SSIS to extract a XML representation of table data to a file](https://stackoverflow.com/questions/9104123/using-ssis-to-extract-a-xml-representation-of-table-data-to-a-file/9105756#9105756)

我敲了一个简单的例子来说明如何导出 varbinary 数据。以下查询将一些字符串连接在一起，然后将它们转换为 varbinary(max)。它还会生成第二列，它将作为使用的输出文件。

```
WITH STARTER(starter) AS
(
    -- some simple data
    SELECT 'a'
    UNION ALL SELECT 'b'
    UNION ALL SELECT 'c'
)
,  VCM(longenough) AS
(
    SELECT
        CAST(REPLICATE(T.starter, 8000) AS varchar(max))
    FROM
        STARTER T
)
SELECT
    CAST(V0.longenough + V1.longenough AS varbinary(max)) AS BlobData
,   'C:\ssisdata\filename.' + CAST(row_number() OVER (ORDER BY (SELECT NULL)) AS varchar(10)) + '.txt' AS FileName
FROM
    VCM V0
    CROSS APPLY
    VCM V1; 
```

配置 SSIS 非常简单。我使用上述查询作为我的来源。 ![简单的数据流](../Images/9878c3efdb82bb488291e5b6cb4a879b.png)

我确保元数据看起来像预期的那样 - 是的，BLobData 列是一个图像

![元数据](../Images/78fc5bacb85fdafc60ddb3373f55afbd.png)

配置导出列转换。如果文件已存在，则任务将失败，如图所示。您需要检查 Allow Append 或 Force Truncate 选项。

![导出列转换编辑器](../Images/75648f8bf48352ec411b9542c484b233.png)

# android - Android - 使用背景图像缩放按钮

> ID：12712642
> 
> 赞同：2
> 
> 时间：2012-10-03T16:19:06.030
> 
> 标签：android, image, button, background, scaling

我有一个屏幕布局，其中包括线性布局（水平）中包含的 3 个 Button 控件。每个按钮都有一个背景图像。请参阅下面的 XML：

```
<LinearLayout
    android:id="@+id/notificationform_llt_ApprovalBtns"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="8dp"
    android:orientation="horizontal"
    android:paddingLeft="8dp"
    android:paddingRight="8dp" >

    <Button
        android:id="@+id/notificationform_btn_Approve"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:background="@drawable/btn_approve"
        android:onClick="btnApprove_Click" />
    <Button
        android:id="@+id/notificationform_btn_Reject"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:background="@drawable/btn_reject"
        android:onClick="btnReject_Click" />
    <Button
        android:id="@+id/notificationform_btn_Delegate"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:background="@drawable/btn_delegate"
        android:onClick="btnDelegate_Click" />
</LinearLayout> 
```

屏幕在我的 Galaxy W 手机（3.7 英寸）上看起来很棒，但在我的 Nexus 7 上运行时，按钮水平拉伸但不是垂直拉伸，因此看起来被压扁了。如果我理解正确，这两款设备都具有相似的分辨率并且都在寻找图像在存储我的图像的drawable-hdpi文件夹中。我尝试将图像制作为9补丁，但这没有任何区别。如何使图像在高度和宽度上按比例缩放？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T16:46:28.713

按钮被水平拉伸，因为`LinearLayout`设置为`fill parent`，并且每个按钮`button`都有使它们拉伸的权重。高度设置为`wrap_content`，并且没有任何内容。图像设置为背景，不会影响图像的`button`大小。

最好将 Buttons 更改为 ImageButtons 并使用`android:src`而不是`android:background`. 例如 ：

```
<ImageButton
    android:id="@+id/notificationform_btn_Approve"
    android:layout_width="0dp"
    android:layout_weight="1"
    android:layout_height="wrap_content"
    android:src="@drawable/btn_approve"
    android:onClick="btnApprove_Click" /> 
```

# mysql - 编译要排除的 MySQL 行列表时：预编译还是不预编译？

> ID：12712647
> 
> 赞同：0
> 
> 时间：2012-10-03T16:19:09.893
> 
> 标签：mysql, query-optimization

在我的一个 PHP 站点上，我需要让我的用户能够选择某些行以从站点上的所有搜索结果（查询）中排除。

我应该以哪种方式处理排除项，我应该：

1) 每当用户通过查询登录（或更新）时预编译排除行列表，将列表保存在 Session 变量中，然后简单地添加`$query .= " AND userid NOT IN ({$_SESSION['ExclusionList']})"`到站点上的每个搜索查询中，

或者

`$query .= " AND userid NOT IN (SELECT userid FROM Excluded WHERE excludedBy = '$currentUserID')"`2）通过简单地添加到网站上的每个搜索查询，直接在每个查询中直接编译它 ？

方法 1) 似乎更有效，因为我只在用户登录时（或每当他们更新它时）编译列表一次，而不是每次用户在网站上运行搜索查询时都必须编译列表。

你有什么建议，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:35:29.510

从技术上讲，这将被称为“缓存”这些值，这不是一个坏主意，前提是列表不会变得太大，或者您`$_SESSION`最终可能会变得有点重量级。

进行子选择可能非常昂贵，尤其是在大量记录上，因此通常最好缓存它。

# javascript - NodeJS NPM 不再工作

> ID：12712649
> 
> 赞同：1
> 
> 时间：2012-10-03T16:19:16.493
> 
> 标签：javascript, package, npm

嗨，当我尝试使用 npm 安装新软件包时，出现了一个非常严重的错误：

```
PS C:\dev\js\test1> npm install mysql
npm.cmd : npm http GET https://registry.npmjs.org/mysql
Bei Zeile:1 Zeichen:4
+ npm <<<<  install mysql
    + CategoryInfo          : NotSpecified: (npm http GET ht...npmjs.org/mysql:String)     [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError

npm

http

304
 ..

npm

http

GET
 ..

npm

http

304
 ...

npm

http

GET
 ..

npm

http

304
...
mysql@0.9.6 node_modules\mysql
ÔööÔöÇÔöÇ hashish@0.0.4 (traverse@0.6.3) 
```

我怎样才能摆脱它。我想像往常一样使用它。我想过卸载并重新安装，但我不知道如何摆脱*** *..

请帮助我修复我的 npm 或告诉我如何卸载它，或者有没有办法手动安装软件包，这可能是最好的方法。

# android - Android 在 ExpandableListView 中的 notifyDataSetChanged() 上变黑

> ID：12712651
> 
> 赞同：2
> 
> 时间：2012-10-03T16:19:21.230
> 
> 标签：android, listview, user-interface, expandablelistview, expandablelistadapter

如果问题有点模糊，我想提前道歉，但我很难提供代码的特定部分来负责正在发生的事情。

我扩展了 BaseExpandableListAdapter 以在我的一个活动 (StreamActivity) 中使用以填充 ExpandableListView。此活动是活动组的一部分。然后，事实证明我需要一个非常相似的适配器来用于不属于组的不同 Activity (StreamUserActivity)。我决定进一步扩展我的自定义适配器，并且只覆盖某些不同的方法。两个适配器的行结构背后的逻辑是相同的。

但是，当我使用第二个适配器（用于独立 Activity 的适配器）时，当我调用 notifyDataSetChanged() 时，在列表更新之前屏幕变黑。在某些情况下，它只是暂时的眨眼，有时会保持这种状态。然后，如果我滚动列表，它会再次出现，但 ExpandableListView 上方的元素不会再次出现。尽管如此，我仍然可以触摸该元素中的活动元素，它会按计划将我转移到另一个活动。

StreamUserActivity 通过以下方式从 StreamActivity 中启动：

```
Intent streamUserProfiletIntent = new Intent(this, StreamUserProfileActivity.class);
streamUserProfiletIntent.putExtra(StreamUserProfileActivity.USER_JID,
OpenfireRosterProvider.getInstance(getApplicationContext()).getCurrentUser().getJabberId());
startActivity(streamUserProfiletIntent); 
```

这会导致屏幕变黑。但是，如果我这样开始：

```
Intent streamUserProfiletIntent = new Intent(this, StreamUserProfileActivity.class);
streamUserProfiletIntent.putExtra(StreamUserProfileActivity.USER_JID,
OpenfireRosterProvider.getInstance(getApplicationContext()).getCurrentUser().getJabberId());
startChildActivity("StreamUserProfiletIntent", streamUserProfiletIntent); 
```

...没有闪烁，但新的 Activity 是 ActivityGroup 的一部分，这不是我需要的。

关于是什么导致这个问题的任何想法？代码的哪一部分可能对此负责，以便我可以分享它。

# c# - 如何在 ListBox Windows 窗体中创建自定义项？

> ID：12712654
> 
> 赞同：3
> 
> 时间：2012-10-03T16:19:38.223
> 
> 标签：c#, winforms, listbox

我需要在 ListBox 中创建自己的项目样式。我需要创建所有自定义 ListBox 还是可以只做自定义项目？为什么我需要示例，请我使用 Windows 窗体。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:22:14.043

[扩展 ListBox 以显示更复杂的项目](http://www.codeproject.com/Articles/15464/Extending-the-ListBox-to-show-more-complex-items)

这是一个 vb.net 示例：

[http://www.vbforums.com/showthread.php?599375-ListBox-with-custom-items-(colors-images-text-alignment)](http://www.vbforums.com/showthread.php?599375-ListBox-with-custom-items-%28colors-images-text-alignment%29)

# c - 如何在两个进程之间进行简单的同步

> ID：12712657
> 
> 赞同：1
> 
> 时间：2012-10-03T16:19:40.113
> 
> 标签：c, process, synchronization, multiprocessing, parent-child

嗨，我有一个关于程序的工作，就像一个孩子应该将一个数字打印到一个文本文件中，而第二个孩子应该将该数字同时打印到屏幕上。但我的代码就像第一个孩子完成打印数字`0`然后`9`第二个孩子开始将它们读到屏幕上一样工作。所以我想这是一个同步问题。这是我的简单代码；

```
#include <stdio.h>     /* basic I/O routines.   */
#include <unistd.h>    /* define fork(), etc.   */
#include <sys/types.h> /* define pid_t, etc.    */
#include <sys/wait.h>  /* define wait(), etc.   */
#include <signal.h>    /* define signal(), etc. */
#include <pthread.h>

void write_num(void);
void print_screen(void);
//void catch_child(int);

int main(int argc, char* argv[]) {

        int i, result, pid;

        pid = fork(); /* creates a new process, you only want the parent to spawn children? */

        switch (pid) {

             case -1:
                /* fork error */
                printf("Error occured with fork()\n");
                exit(1);
             case 0:
                /* child process */
                write_num(); 
                exit(0);
             default:
                 /* parent process*/
                {
                //wait(&pid);
                pid = fork(); /* fork new children here */

                switch(pid) {

                    case -1:
                        printf("Error occured with fork()\n");
                        exit(1);

                    case 0: 

                        print_screen();
                        exit(0);

                    default:
                        break;

                         }
                }
     }
    wait(&pid);
    execl("/usr/bin/killall","killall","tail",(char *) 0);
    return 0;
}

void write_num(void){

 FILE* fptr;
 int i;

 fptr=fopen("textfile.txt","w");

    for(i=0; i<10; i++){

        fprintf(fptr,"%d\n",i);
        fflush(stdout);
        sleep(1);

        }
}

void print_screen(void){

        execl("/usr/bin/tail","tail","-f","./textfile.txt",(char *) 0);
        sleep(1);

}

/* first, here is the code for the signal handler
void catch_child(int sig_num)
{
     when we get here, we know there's a zombie child waiting
    int child_status;

    wait(&child_status);
    printf("child exited.\n");
}*/ 
```

顺便说一句，在 Ubuntu 中，我曾经使用`gcc -o process process.c -lpthread`.

如果您能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:05:49.470

您需要更改为

```
flush(fptr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:02:27.687

您可能要考虑让主进程创建两个子线程而不是进程。子线程 A 可以写入文件，子线程 B 将显示该数字。当有新号码可用时，主线程可以调度这两个子线程。

不需要根据您的问题陈述进行任何同步，只需将数字同时输出到屏幕和文件。

# django - django-mailer 得到 [Errno 61] 连接被拒绝

> ID：12712658
> 
> 赞同：1
> 
> 时间：2012-10-03T16:19:42.250
> 
> 标签：django, amazon-ses, django-mailer

在我的项目中，我通过 Amazon Services 发送邮件。问题是我必须将每日摘要发送给我系统中的所有用户。这就是为什么我认为如果我使用 django-mailer 来处理这样的过程是个好主意。

我可以通过 django.core.send_mail 成功发送邮件。当我尝试使用 mailer 的 send_mail 功能时，正如预期的那样，mailer 将邮件放入队列，但是当我运行 python manage.py send_mail 时，系统无法发送邮件。我检查了日志，它说 [Errno 61] 连接被拒绝。

我在网上搜索，有些帖子说我应该设置一个 smtp 服务器，但这没有意义，因为我可以使用 django 的 send_mail 功能发送邮件。所以我认为这可能与亚马逊配置有关，但我不确定。

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:48:46.857

尝试将此添加到您的设置中：

> MAILER_EMAIL_BACKEND = 'django_ses.SESBackend'

# html - iframe 内容未加载

> ID：12712659
> 
> 赞同：1
> 
> 时间：2012-10-03T16:19:48.063
> 
> 标签：html, iframe

我目前正在尝试让 iframe 在单击时显示文档。目前有四个用于工作的链接，我试图让四个中的两个在损坏的地方工作。我正在使用的 iframe 代码是：

```
<iframe frameborder="0" height="800" scrolling="Yes" src="file://\\xxx-xxx\xxxxxx xxxxxx\xxx xxxxxxx" width="100%"></iframe> 
```

(x) 是源位置的占位符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:28:09.377

`src=`为您的声明使用格式更正确的 URI 。它不适用于空格，并且`file://`可能不适用于大多数浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:36:10.983

将 src 的内容复制并粘贴到浏览器的导航栏中。你得到了什么？如果该 url 不起作用（我猜它不会），那么您需要找到这些文件的正确 url 路径。您也许可以通过简单地在您的机器上使用搜索来搜索文件来做到这一点。这可能有效，但我不确定其他用户是否能够导航到这些文件，因为（如果我错了，任何人都可以随时纠正我）file:// url 路径只会指向您的文件机器。您可能已将这些文件上传到服务器...

# javascript - jQuery将项目从一个选择框移动到另一个选择框，同时保留列表顺序

> ID：12712660
> 
> 赞同：1
> 
> 时间：2012-10-03T16:19:53.367
> 
> 标签：javascript, jquery

我有这段代码可以工作，但是当项目被移动时，它会显示在列表的底部。我宁愿保持字母顺序，不知道从哪里开始。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>demo</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>

<style type='text/css'>
.whatever {
    width:200px;
    height:50px;
    overflow:auto
}
</style>
<script type='text/javascript'>//<![CDATA[ 
    $(window).load(function(){
    $('#select1').click(function(){
    $('#select1 option:selected').appendTo('#select2');
});

$('#select2').click(function(){
    $('#select2 option:selected').appendTo('#select1');
});

$('#select3').click(function(){
    $('#select3 option:selected').appendTo('#select4');
});

$('#select4').click(function(){
    $('#select4 option:selected').appendTo('#select3');
});
});//]]>  
</script>
</head>
<body>
<div>
<select multiple id="select1" class="whatever">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
</select>
<img src="../Common/MultiSelect/img/switch.png">
<select multiple id="select2" class="whatever"></select>
</div>

<div>
<select multiple id="select3" class="whatever">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
</select>
<img src="../Common/MultiSelect/img/switch.png">
<select multiple id="select4" class="whatever"></select>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:40:29.227

你可以使用 sort 方法来保持你想要的顺序

示例按您的选项值排序

```
 youroptions.sort(function(a,b){
       return a.value - b.value;
 }); 
```

如果您通过使用兄弟姐妹在父 div 中将相对选择元素作为兄弟姐妹，则可以大大缩短您的代码

```
$(document).ready(function() {
    $('select').change(function() {
        var $this = $(this);
        $this.siblings('select').append($this.find('option:selected')); // append selected option to sibling
        $('select', $this.parent()).each(function(i,v){ // loop through relative selects
            var $options = $(v).find('option'); // get all options
            $options = $options.sort(function(a,b){ // sort by value of options
                return a.value - b.value;
            });
            $(this).html($options); // add new sorted options to select
        });
    });   
});​ 
```

[http://jsfiddle.net/e6Y7J/](http://jsfiddle.net/e6Y7J/)

# mongodb - 如何在 mongodb 中持久化 Clojure 集/关键字？

> ID：12712662
> 
> 赞同：1
> 
> 时间：2012-10-03T16:19:57.127
> 
> 标签：mongodb, clojure

在我继续编写数据库包装器来读取和写入 Clojure 集和关键字到 mongo 之前，我想知道人们是否已经在使用任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:30:24.787

您是否正在寻找适用于 Mongodb 的 Clojure 驱动程序？可能值得一看[http://clojuremongodb.info/](http://clojuremongodb.info/)。

# android - 什么是模态选择选择模式？

> ID：12712663
> 
> 赞同：13
> 
> 时间：2012-10-03T16:19:58.790
> 
> 标签：android, listview, modal-dialog, selection

在将 my 的选择模式设置`ListView`为 multiple 时，我遇到了 Android API 级别 11 中引入的这个常量：[CHOICE_MODE_MULTIPLE_MODAL](http://developer.android.com/reference/android/widget/AbsListView.html#CHOICE_MODE_MULTIPLE_MODAL)。JavaDoc 对我帮助不大：

> 公共静态最终 int CHOICE_MODE_MULTIPLE_MODAL
> 
> 该列表允许在模态选择模式下进行多项选择。

什么是模态选择模式？无处可寻。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-03T16:56:45.333

这用于在使用操作栏时调出操作模式（也称为上下文操作栏）。您将在 Gmail 等应用程序中看到它：当您开始检查列表中的项目时，操作栏会从通用活动级别操作更改为要在列表上执行的操作（例如，更改标签、垃圾箱）。

像`CHOICE_MODE_MULTIPLE`，你需要你`ListView`的项目来填充`Checkable`。但是，一旦选中一项或多项，Android 将自动弹出您选择的操作模式，您可以使用自己的操作进行配置。

这是一个示例项目，演示了这一点：[https ://github.com/commonsguy/cw-omnibus/tree/master/ActionMode/ActionModeMC](https://github.com/commonsguy/cw-omnibus/tree/master/ActionMode/ActionModeMC)

# php - GET 表单中的 PHP POST 表单

> ID：12712665
> 
> 赞同：0
> 
> 时间：2012-10-03T16:20:06.190
> 
> 标签：php, html, forms, post, get

我怎样才能做到这一点？

GET 表单中的 POST 表单

首先，我在 3 文本框上输入数据并按下 GET 提交按钮，然后当我按下 POST 提交按钮时，它就像 GET 一样，不显示我的 if 语句所述的数据：

`if(isset($_POST['post'])){ echo $_POST['data1']."<br/>".$_POST['data2']."<br/>".$_POST['data3']; }`

请帮帮我..我真的需要这个

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">
</head>
<body>
<?php
if(isset($_POST['post'])){
    echo $_POST['data1']."<br/>".$_POST['data2']."<br/>".$_POST['data3'];
}
?>
<form action="" method="get">
    <form action="" method="post">
        <input type="text" name="data1" value="<?php if(isset($_GET['data1'])) echo $_GET['data1']; ?>"/>
        <input type="text" name="data2" value="<?php if(isset($_GET['data2'])) echo $_GET['data2']; ?>"/>
        <input type="text" name="data3" value="<?php if(isset($_GET['data3'])) echo $_GET['data3']; ?>"/>
        <input type="submit" name="get" value="GET"/>
        <input type="submit" name="post" value="POST"/>
    </form>
</form>
</body>
</html> 
```

提前谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:27:44.183

好吧，这是概念证明：

```
<form>
    <input name="t" />
    <input type="submit" value="with GET" />
    <input type="submit" value="with POST"
           onclick="this.parentNode.method='POST';"/>
</form> 
```

当然，将 JS 从 HTML 中移出要好得多，但是，正如我所说，这只是为了说明如何在原则上做到这一点。

正如@cdhowie 正确注意到的那样，您不能`form`在另一个元素中包含`form`元素；浏览器将如何解释这个结构，这取决于它们（也许内部`form`会被视为无效元素而被忽略），但它绝对不允许您同时使输入属于两种形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:21:59.467

根据 HTML 规范，一个`<form>`元素可能没有其他元素作为后代。`<form>`（请参阅[此相关问题](https://stackoverflow.com/q/379610/501250)。）

因此，您在这里拥有的是无效的 HTML。在这种情况下，浏览器可能会做任何它认为合理的事情，包括完全拒绝渲染页面。浏览器之间的行为可能不一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:36:25.377

您不能在另一个表单中拥有一个表单。Facebook like 按钮就是一个很好的例子，你不能把它放在一个表单中，否则你可能会破坏一些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T16:23:50.963

这不是正常程序。这是不可能的。我认为，您希望同时获得 GET 和 POST 的效果。也许你可以用一些讨厌的技巧来做到这一点，用 Javascript 将它们添加到 URL 的末尾。

# php - 使用 PHP 在 SQLite 中实现 SQL AES ENCRYPTION

> ID：12712667
> 
> 赞同：1
> 
> 时间：2012-10-03T16:20:14.443
> 
> 标签：php, sql, sqlite, aes

是否可以使用 PHP 将 SQL AES_ENCRYPT/AES_DECRYPT 实现到 SQLite 中？例如我有一个 PHP 代码：

```
$SQL = "INSERT INTO parent (Request, Column1, Column2) VALUES ('$Request',AES_ENCRYPT('$Col1','$key'),AES_ENCRYPT('$Col2','$key'))"; 
```

这个查询可以在 SQL 中使用，但是是否可以在 SQLite 中使用相同的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-07T21:43:49.303

好吧，大约 10 分钟前`PHP 7.2.2`，我用`Ubuntu 16.04 LTS 64bit`. 您无需获得`SQLite`加密扩展 (SEE) 的许可证。在现有`PHP`扩展的基础上，我添加了一些`C`文件`AES`和`SQLite`功能用于加密/解密寻呼机。它运行良好，现在我将尝试使用 Intel i5 内置 AES 功能使其运行 - 充分利用硬件本身。现在，要打开一个 sqlite 数据库，我可以使用以下命令：

```
class MyDB extends SQLite3 {
      function __construct(){
        $this->open('sqlite3.db',SQLITE3_OPEN_READWRITE | SQLITE3_OPEN_CREATE, 'your_password_here');
      }
} 
```

加密整个数据库绝对是最好的解决方案。给我留言了解详情。我可能会很快发布这个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T12:50:21.977

我会说你有两个选择：

*   在 PHP 级别加密您的值并将它们存储为 BLOB 或 base64 字符串

*   加密整个数据库执行以下命令（就像任何其他常规 SQL 命令一样）：**PRAGMA hexkey='0x_your_key_in_hex_format'**。当您打开数据库以运行 SELECT 查询时，不要忘记做同样的事情。[这](http://www.sqlite.org/see/doc/trunk/www/readme.wiki)是官方文档。

# jquery - 如何选择屏幕上的可见元素？

> ID：12712668
> 
> 赞同：1
> 
> 时间：2012-10-03T16:20:17.017
> 
> 标签：jquery, jquery-selectors

如何使用对用户实际可见的 CSS 元素进行选择？

真的在荧幕上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:53:42.737

有一个 jQuery 插件，它添加了选择器来帮助您完成查看用户是否可以看到某些内容的任务（ViewPort）。

您可以[从这里查看和下载它](https://github.com/tuupola/jquery_viewport)。

它基本上添加了以下选择器：

```
 $(":in-viewport")
 $(":below-the-fold")
 $(":above-the-top")
 $(":left-of-screen")
 $(":right-of-screen") 
```

**在你的情况下，我认为第一个是你需要的。** 其他的更详细，以确定视觉隐藏对象的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:21:29.040

如果您使用 jQuery，请使用 :visible 选择器。`$("body").find(":visible")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:25:21.780

最好的方法是使用 jQuery：

$('.testClass:visible')

返回在 DOM 中可见的所有具有类“testClass”的元素的数组。

[http://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T16:25:23.560

从屏幕到 css 没有连接（仅从 css 到屏幕）。css 无法选择实际的可见元素。

您可以使用 jQuery 来匹配那些（正如 McNaney 提到的）并将它们添加一些现有的 css 类。

# java - 跟随番石榴开发新功能

> ID：12712669
> 
> 赞同：3
> 
> 时间：2012-10-03T16:20:20.317
> 
> 标签：java, guava

有没有办法遵循早期的 API 草案（例如，一旦在问题跟踪器、草案、迭代和内部讨论中被接受，为什么不以这种方式完成某些事情，而是以那种方式......）？我想从这些讨论中可以学到很多东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:24:10.097

从[项目页面](https://code.google.com/p/guava-libraries/)：

> # 如何与我们（以及彼此）沟通
> 
> 要随时了解情况并获得“本周提示”式的帖子，请在 Google+ 上关注[+Google Guava 。](https://plus.google.com/118010414872916542489)
> 
> 为了及时了解每个 Guava 用户需要知道的重要新闻，请订阅[guava-announce](http://groups.google.com/group/guava-announce)。这是非常低的流量。
> 
> 要报告缺陷或请求功能，请单击上面的问题选项卡并输入新问题。
> 
> 要获得有关特定问题或问题的帮助，请使用标签“guava”将问题发布到[Stack Overflow 。](https://stackoverflow.com/questions/ask?tags=java+guava)[我们使用此 RSS 提要](https://stackoverflow.com/feeds/tag?tagnames=guava&sort=newest)监控这些问题。）
> 
> [使用这些项目源](http://code.google.com/p/guava-libraries/feeds)中的任何一个来关注项目更新。（“更新”提要是所有其他提要的聚合。）您可以查看我们的代码更改，并使用代码审查工具对其进行评论。
> 
> 我们有一个只读[邮件列表](http://groups.google.com/group/guava-issues)，其中包含问题跟踪器活动的电子邮件通知，它比项目提要更容易以线程方式进行跟踪。
> 
> 对于不完全适合任何这些类别的一般性讨论，请加入我们的讨论组[guava-discuss](http://groups.google.com/group/guava-discuss)。

最有可能的是，您需要[邮件列表](http://groups.google.com/group/guava-issues)、[问题更新](https://code.google.com/feeds/p/guava-libraries/issueupdates/basic)的 ATOM 提要或[guava-discuss](http://groups.google.com/group/guava-discuss)组。

# ember.js - Ember.js 在任何路由加载之前连接插座

> ID：12712670
> 
> 赞同：1
> 
> 时间：2012-10-03T16:20:21.127
> 
> 标签：ember.js

我有一个包含 3 条路线的应用程序：

```
"/"
"/one"
"/two" 
```

我想在它们中的任何一个加载之前连接类似`header`和`footer`的插座。`applicationView`

由于 ember 只能导航到叶节点，因此我不能嵌套`/one`和`two`下`/`，仍然能够导航到`/`

这意味着我必须分别`connectOutlets`为所有 3 条路由重复代码以连接`header`和`footer`。

我不能在路由器`connectOutlets`的属性上使用，因为它还没有准备好。`root``applicationController`

`applicationView`在执行任何路由之前，我的应用程序首次加载时如何连接插座？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:06:33.480

您可以在非叶子路由中使用 connectOutlets，当路由器将这些路由遍历到叶子路由时，它将运行这些 connectOutlets。要解决您的其他问题（路由到“/”），最好在任何非叶路由中都有一个索引路由（“/”）。

**编辑：**由于我们已经确认 applicationController 在根路由中未定义，简单地将所有内容放在根路由的子路由中似乎可以解决该问题，并且不会改变路由器的功能。

```
App.Router = Ember.Router.extend({
  root: Ember.Route.extend({
    route: '/',
    app: Ember.Route.extend({
      route: '/',
      connectOutlets: function(router) {
        router.get("applicationController").connectOutlet({
          viewClass: App.HeaderView,
          outletName: 'header'
        });
      },
      index: Ember.Route.extend({
        route: '/',
        connectOutlets: function(router) {
          router.get("applicationController").connectOutlet(...);
        }
      }),
      one: Ember.Route.extend({
        route: '/one',
        connectOutlets: function(router) {
          // if you have a OneController and OneView:
          router.get("applicationController").connectOutlet('one');
        }
      }),
      ...
    })
  })
}); 
```

# web-services - 关于spring的webservice

> ID：12712674
> 
> 赞同：0
> 
> 时间：2012-10-03T16:20:34.750
> 
> 标签：web-services, spring, cxf

我正在寻找一个 Web 服务示例，以在我想通过 spring 制作的 CXF 中添加两个数字，请告知在 SOAP 上通过 CXF 显示 webservice 示例的 url，以便我可以转换并使用 spring 本身进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:06:08.767

这是一个很好的示例，如何使用以下代码编写`CXF`Web 服务`Spring`：

[http://cxf.apache.org/docs/writing-a-service-with-spring.html](http://cxf.apache.org/docs/writing-a-service-with-spring.html)

这一个也提到了很好的例子：

[http://www.ibm.com/developerworks/library/ws-pojo-springcxf/](http://www.ibm.com/developerworks/library/ws-pojo-springcxf/)

这也非常清楚地解释了您的需求：

[http://springinpractice.com/2008/02/29/web-services-with-spring-2-5-and-apache-cxf-2-0/](http://springinpractice.com/2008/02/29/web-services-with-spring-2-5-and-apache-cxf-2-0/)

# java - XMLGregorianCalendar 到 java.sql.Timestamp

> ID：12712676
> 
> 赞同：0
> 
> 时间：2012-10-03T16:20:54.417
> 
> 标签：java, spring, timestamp, gregorian-calendar

我正在使用 web 服务，插入记录，返回 XMLGregorianCalendar 类型的时间戳值。我需要将它转换为 java.sql.Timestamp 值，所以我使用这样的函数。

```
public static java.sql.Timestamp getSqlTimeStamp(XMLGregorianCalendar xgc) {
    if (xgc == null) {
        return null;
    } else {
        return new Timestamp(xgc.toGregorianCalendar().getTime().getTime());
    }
}
Timestamp timestamp=getSqlTimeStamp(ExitInXMLGregor.getTimestamp()); 
```

我的问题是在服务器中，插入记录时的时间戳值如下所示：2012-10-03T19:23:22.342+02:00

但是当我进行类型转换时，我会获得这样的时间戳值：2012-10-03T17:23:22.342

服务器中的时间（webservice 所在的位置）比我的语言环境多 2 小时，由于某种原因，我在转换后获得了插入语言环境时间。问题是我确实需要获取服务器时间，因为在数据库中，时间戳值与服务器一匹配，并且由于时间戳值不同，我在更新操作中遇到问题。

请，我将不胜感激任何帮助。谢谢！

编辑：我有点找到解决方案，但不完全是我需要的。当我将 java.sql.Timestamp 格式的时间戳转换为 XMLGregorian 时，我设置了服务器的时区 (setTimeZone(TimeZone.getTimeZone("GMT+02:00")))。这实际上可行，但与理想的解决方案相去甚远（时区甚至服务器可能会发生变化）在这一点上知道服务器的时区会很棒，但我不知道如何...... .

```
public static XMLGregorianCalendar getXMLGregorianCalendar(Timestamp timestamp)
        throws BaseException {
    try {
        GregorianCalendar gc = new GregorianCalendar();
        gc.setTimeZone(TimeZone.getTimeZone("GMT+02:00"));
        gc.setTimeInMillis(timestamp.getTime());
        return DatatypeFactory.newInstance().newXMLGregorianCalendar(gc);
    } catch (DatatypeConfigurationException ex) {
        throw new BaseException(ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T19:41:44.577

我怀疑时间戳确实指定了正确的时间，只是没有显示正确的时区。2012-10-03T17:23:22.342 与 2012-10-03T19:23:22.342+02:00 相同，假设前者的（隐藏）时区为 +00:00。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-07T23:02:02.220

# image - 在画布中重置图像模式

> ID：12712677
> 
> 赞同：0
> 
> 时间：2012-10-03T16:20:58.957
> 
> 标签：image, html, canvas, fill

我正在使用图像填充自定义形状的路径，并启用了重复选项。我画了一幅画，非常好，然后通过用户的点击，我想要改变我的形状的位置。我清除上下文，然后在其他地方画出我的路径，一切都正确；但图像的重复模式保持不变。当用户单击时，我再次调用 createPattern()，如下面的代码所示，但该调用不会创建新模式，而是使用旧模式。因为我改变了形状的位置，所以当我进行初始绘图时，它的内部被填充了图像的任何部分。

那么如何重置图像的图案，以便它可以在其他地方正确开始填充图像？是否可以？context.translate 会起作用吗？我认为翻译行不通，因为我在填写之前已经翻译了上下文。

这是代码的一部分。我认为坐标变量并不重要：

```
 updatePicture(){ // called each time the user clicks, and should draw in different positions

...
    context.save();
    context.translate(x, y);
    context.rotate(270 * TO_RADIANS);
    context.scale(scale_cerceve, scale_cerceve);

    context.beginPath();
    context.moveTo(0 - (tablo.height / scale_cerceve) - paspartu_height, 0 - paspartu_height);
    context.lineTo(0 - (tablo.height / scale_cerceve) - cerceve.height - paspartu_height, 0 - cerceve.height - paspartu_height);
    context.lineTo(0 + cerceve.height + paspartu_height, 0 - cerceve.height - paspartu_height);
    context.lineTo(0 + paspartu_height, 0 - paspartu_height);
    context.closePath();
    var cercevePattern = context.createPattern(cerceve, "repeat");
    context.fillStyle = cercevePattern;
    context.fill();
    context.restore();

    // 
    context.save();
    context.translate(x, y + tablo.height);
    context.rotate(180 * TO_RADIANS);
    context.scale(scale_cerceve, scale_cerceve);
    context.beginPath();
    context.moveTo(0 + paspartu_height, 0 - paspartu_height);
    context.lineTo(0 + cerceve.height + paspartu_height, 0 - cerceve.height - paspartu_height);
    context.lineTo(0 - (tablo.width / scale_cerceve) - cerceve.height - paspartu_height, 0 - cerceve.height - paspartu_height);
    context.lineTo(0 - (tablo.width / scale_cerceve) - paspartu_height, 0 - paspartu_height);
    context.closePath();
    context.fillStyle = cercevePattern;
    context.fill();
    context.restore();

    // 
    context.save();
    context.translate(x, y);
    context.scale(scale_cerceve, scale_cerceve);
    context.beginPath();
    context.moveTo(0 - paspartu_height, 0 - paspartu_height);
    context.lineTo(0 - cerceve.height - paspartu_height, 0 - cerceve.height - paspartu_height);
    context.lineTo(0 + (tablo.width / scale_cerceve) + cerceve.height + paspartu_height, 0 - cerceve.height - paspartu_height);
    context.lineTo((tablo.width / scale_cerceve) + paspartu_height, 0 - paspartu_height);
    context.closePath();
    context.fillStyle = cercevePattern;
    context.fill();
    context.restore();

    // t
    context.save();
    context.translate(x + tablo.width, y);
    context.rotate(90 * TO_RADIANS);
    context.scale(scale_cerceve, scale_cerceve);
    context.beginPath();
    context.moveTo(0 - paspartu_height, 0 - paspartu_height);
    context.lineTo(0 - cerceve.height - paspartu_height, 0 - cerceve.height - paspartu_height);
context.lineTo(0 + (tablo.height / scale_cerceve) + cerceve.height + paspartu_height, 0 - cerceve.height - paspartu_height);
context.lineTo(0 + (tablo.height / scale_cerceve) + paspartu_height, 0 - paspartu_height);
context.closePath();
context.fillStyle = cercevePattern;
context.fill();
context.restore();

...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T11:57:19.587

是的，就是这样完成的。你可以看到我的评论

# android - Android SurfaceView 与保存的图像不同

> ID：12712687
> 
> 赞同：1
> 
> 时间：2012-10-03T16:21:23.527
> 
> 标签：android, android-camera, surfaceview

我正在创建一个自定义相机，在完成之前我还有 2 个错误需要修复。我在这里寻求其中 1 人的帮助。

我正在尝试创建一个正方形预览（SurfaceView）并将该正方形保存到文件中。我能够做到这一点的唯一方法是使用自定义视图，如下所示：

```
public class SquareSurfaceView extends SurfaceView {

    private int width;
    private int height;

    public SquareSurfaceView(Context context) {
        super(context);
    }

    public SquareSurfaceView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public SquareSurfaceView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        width = MeasureSpec.getSize(widthMeasureSpec);
        setMeasuredDimension(width, width);
    }

    public int getViewWidth() {
        return width;
    }

    public int getViewHeight() {
        return height;
    }
} 
```

我遇到的问题是预览中的图像和保存的图像有点偏离。保存的图像从图像顶部显示更多。所以，假设我拍了一张门的照片，我将预览的顶部与门的顶部对齐，拍摄照片，保存的图像，显示我认为是 30dp 更多的图像，在门上方显示预览未显示的内容。

我用来裁剪图像的代码如下：

```
SimpleDateFormat sdf = new SimpleDateFormat(
        "yyyyMMdd_HHmmss", Locale.US);
mLastPhotoFilename = "IMG_" + sdf.format(new Date())
        + ".jpg";

// cropped file
File photoFile = new File(photoStoragePath,
        mLastPhotoFilename);

// gallery file
File galleryFile = new File(galleryStoragePath,
        mLastPhotoFilename);

// write the cropped file
mLastPhoto
        .compress(
                CompressFormat.JPEG,
                95,
                new FileOutputStream(galleryFile
                        .getAbsolutePath()));

// resize the bitmap
Bitmap scaledPhoto = Bitmap.createBitmap(mLastPhoto, 0, 0,
        mLastPhoto.getWidth(), mLastPhoto.getWidth());

// write the cropped file
scaledPhoto.compress(CompressFormat.JPEG, 95,
        new FileOutputStream(photoFile.getAbsolutePath())); 
```

我将完整图像保存到手机图库，调整图像大小，并将调整大小的图像存储到我的应用程序目录中。

那么，为什么我的预览没有显示相机看到的内容，并且正在保存？我怎样才能获得我的预览顶部，成为相机顶部所看到的？

# php - TWIG，Symfony2：根据另一个数组的值访问一个数组中的值

> ID：12712693
> 
> 赞同：0
> 
> 时间：2012-10-03T16:21:50.377
> 
> 标签：php, arrays, symfony, twig

我在充满其他数组的单独会话变量中有 2 个单独的数组。我正在尝试根据另一个属性输出的值提取数组的一个属性。它本质上是一个状态代码（具有其他属性）和另一个字典。

它们看起来像这样：

字典数组

```
%array% [ { Id: '22', Name: 'Foo', Type: 'FooFoo', Description: 'More Foo', Enabled: 'true', Priority: 'number here' },
{ Id: '23', Name: 'Bar', Type: BarBar, Description: 'oh look more bars', Enabled: 'true', Priority: 'number here' },{...}] 
```

和

状态数组：

```
%array% [{ Id: '54', Name: 'Name goes here', Status: '23', BrandName: 'Brand'}],{...} }] 
```

我想要做的是

```
{%for Id in app.session.get('statusArray')%}
   {% if Id.Status in app.session.get('dictionaryArray')%}
      {{app.session.get('dictionaryArray').Name}}
   {% endif %}
{%endfor%} 
```

我也试过

```
{{attribute(app.session.get('dictionaryArray').Name, Id.Status)}} 
```

或者类似的东西。

TL;博士

我需要根据状态数组给出的“状态：”从字典数组中提取名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:59:22.937

好的，所以你在这段代码中有很多问题。让我们从数据开始。

您提供的数据似乎是 JSON 数组的形式，而不是 PHP 数组。因此，您必须先使用`json_decode`.

但这些数组不是[有效的 JSON](http://jsonlint.com/)。为了使它们成为有效的 JSON，每个键和值都需要在它们周围加上双引号，即，`"Id": "54"`而不是`Id: '54'`.

然后，您必须使用 将这些变量设置到会话中`$this->getRequest()->getSession()->set('statusArray', $statusArray);`，我假设您做得很好。

接下来，您的树枝模板的逻辑不正确。由于您在外部数组中有多个关联数组，因此 for 循环中的每个项目都是与大括号 {} 中包含的 JSON 对象相对应的关联数组之一。

将完成您想要的代码如下：

```
{% for status in app.session.get('statusArray') %}
    {% for dict in app.session.get('dictionaryArray') %}
        {% if status.Status == dict.Id %}
            {{ dict.Name }}
        {% endif %}
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-30T15:35:43.887

我发现这个工作...

在 php 文件中：

```
$session = $this->get('session');
$session->set('user',array(
    'nickname' => 'Joe'
)); 
```

在树枝模板中：

```
<p>{{ app.session.get('user')['nickname'] }}</p> 
```

**但是**，如果密钥不存在，则会引发异常。

# ruby-on-rails - 来自具有永久 access_token 的 rails 应用程序的 GET 请求

> ID：12712694
> 
> 赞同：0
> 
> 时间：2012-10-03T16:21:54.733
> 
> 标签：ruby-on-rails, ruby, api, oauth

我希望从 Rails 应用程序中访问 Web 服务 api 并显示来自 api 的数据。该 api 使用永久 access_token 和参数 full_access=true。所以我希望访问的网址类似于

```
http://.......com/lists.json?access_token=d10884g521fc4dc964fd9v06a9121f63&full_access=true 
```

我无法创建一个包含 access_token 的简单获取请求，因此任何建议都会有所帮助。我可以使用简单的获取请求还是需要实现 oauth2？

如果是这样，一个非常简单的客户的样本会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:46:09.617

您可以使用[Net::HTTP](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/index.html)类：

```
require 'net/http'

url = URI.parse('http://www.example.com/index.html')
req = Net::HTTP::Get.new(url.path)
res = Net::HTTP.start(url.host, url.port) {|http|
  http.request(req)
}
puts res.body 
```

希望这可以帮助！

# android - android - 带有选定列表项指示器的双窗格视图

> ID：12712698
> 
> 赞同：4
> 
> 时间：2012-10-03T16:22:11.580
> 
> 标签：android, android-layout, android-ui

在我的应用程序中，我有一个双窗格布局，左侧有一个列表。我想在所选列表行的右侧添加一个指示器，如下例所示：

![Gmail 示例](../Images/2905afcdbe9ff3f18d70a5df27e77532.png) ![阅读器示例](../Images/a11138fecdd71104718b72999e59d845.png)

我认为它是一个内置函数，但我找不到任何文档。有谁知道我们如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:42:43.997

如果不看代码，我不能肯定地说，但我很确定该指标*不是*内置功能。它可能是一个自定义视图，但很可能他们只是设置了一个复合可绘制对象，如此处所述： [BitmapDrawable](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html)和此处：[TextView](http://developer.android.com/reference/android/widget/TextView.html)

您正在寻找的方法是 setCompoundDrawables()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:23:47.293

在我的脑海中，我只需添加与右侧背景颜色匹配的指示器，使其看起来无缝。简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T10:25:06.437

一个简单的方法是使用[9-patch 图像](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)。例如，如果您想使用 Theme.DeviceDefault.Light (API > 14) 重现双窗格的效果，请使用[Selector](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)在您的 LinearLayout 项目的 Selected 状态下应用您的 9-patch 背景图像。

可选项目布局示例：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:minHeight="48dp"
android:background="@drawable/activable_indicator_background"
android:gravity="center_vertical"
android:paddingRight="20dp">
    //eventually other items...
</LinearLayout> 
```

`Drawable/activable_indicator_background.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:state_activated="true" android:drawable="@drawable/indicator" /> 
   <item android:drawable="@android:color/transparent" />
</selector> 
```

`Drawable/indicator.9.png`：

![指标 9 补丁图像](../Images/10476c349f1e3a11f15689fc77249ef1.png)

# asp.net - WCF Windows 身份验证如何在不显式设置凭据的情况下工作

> ID：12712704
> 
> 赞同：5
> 
> 时间：2012-10-03T16:22:28.180
> 
> 标签：asp.net, wcf, windows-authentication

我有一个调用多个 WCF 服务的 asp.net Web 应用程序。Web 应用程序位于 www.mydomain.com，服务位于 services.mydomain.com。它们托管在同一台服务器上。

我刚刚向使用传输安全 (https) 和 Windows 身份验证的服务添加了安全端点 (bassicHttpBindings)：

```
<binding name="WindowsSecuredBinding">
  <security mode="Transport">
    <transport clientCredentialType="Windows" />
  </security>
</binding> 
```

并将客户端 Web 应用程序配置为使用这些新的安全端点。我期待下一步是在 Web 应用程序中编写一些代码来设置客户端凭据，以便通过 Windows 身份验证。令我惊讶的是，服务调用在没有设置客户端凭据的情况下成功。我假设它必须发送运行 Web 应用程序的帐户，但不知道如何验证。在其他情况下，我认为我已经看到客户端凭据没有隐式默认值。

所以我有两个问题：

1.  身份验证如何成功？它是否向用户发送应用程序运行的用户，浏览器用户的凭据，没有凭据？
2.  如何调试/记录/跟踪身份验证过程？我想至少看到正在被验证的用户名，这样我就可以验证安全性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T17:20:50.287

1.  使用您在服务器和客户端上的当前配置，客户端正在发送它正在运行的信用。因为凭据类型设置为 Windows，如果您在域中，则会导致安全协商在 Kerberos 中检查，如果在工作组环境中，则在 NTLM 中检查。（[更多信息可以在这里找到。](http://msdn.microsoft.com/en-us/library/ff650862.aspx)）
2.  要调试身份验证过程，WCF 具有可以启用的审核功能。[添加审核的说明在此处](http://msdn.microsoft.com/en-us/library/ms734737.aspx)。

以下是审核 MSDN 页面中的重要部分：

```
<behaviors>
 <behavior name="myAuditBehavior">
  <serviceSecurityAudit auditLogLocation="Application"
    suppressAuditFailure="false" 
    serviceAuthorizationAuditLevel="None" 
    messageAuthenticationAuditLevel="SuccessOrFailure" />
 </behavior>
</behaviors> 
```

并将行为添加到服务中：

```
<service type="[Your service type here]" behaviorConfiguration="myAuditBehavior"> 
```

启用审核后，您可以查看所有授权活动（如果以这种方式配置，则成功和失败）。这应该允许您验证您的安全设置是否按照您希望的方式设置。

如果您碰巧需要传递正在使用 ASP.NET Web 应用程序的用户的凭据的功能（这称为模拟），则可以在此页面“[使用 WCF 的延迟和模拟](http://msdn.microsoft.com/en-us/library/ms730088.aspx)”上找到有关该文件的 msdn 文档。

# c# - 如何使按钮在 Windows 应用商店应用程序中接受 Enter 作为提交按钮

> ID：12712708
> 
> 赞同：1
> 
> 时间：2012-10-03T16:23:04.560
> 
> 标签：c#, windows-store-apps, keyboard-shortcuts

我有一个页面，里面有一些文本框和一个按钮

当我按下时，`Enter`我希望按下此按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:24:18.233

您想将`AcceptButton`表单上的属性设置为要在输入时按下的按钮。

同样，如果您想要逃脱的东西，那就是`CancelButton`财产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T06:04:34.483

XAML

```
<StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
    <TextBox Height="30" Width="200" KeyDown="TextBox_KeyDown" />
    <Button Content="Login" Click="btnLogin_Click" HorizontalAlignment="Center"/>
    <TextBlock x:Name="tbStatus" HorizontalAlignment="Center"/>
</StackPanel> 
```

C＃

```
private void TextBox_KeyDown(object sender, Windows.UI.Xaml.Input.KeyRoutedEventArgs e)
{
    if (e.Key == Windows.System.VirtualKey.Enter)
    {
        DoLogin();
    }
}

private void btnLogin_Click(object sender, RoutedEventArgs e)
{
    DoLogin();
}

private void DoLogin()
{
    tbStatus.Text = "Login Done";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T06:59:42.353

我找到了答案，你必须在最后一个文本框/或所有文本框上使用事件“Keypress”，在里面写：

```
if (e.key == virtualkey.enter)
{
    // do submit functions
} 
```

# ajax - ExpressionEngine AJAX 调用 - 模板或操作 ID

> ID：12712712
> 
> 赞同：1
> 
> 时间：2012-10-03T16:23:29.627
> 
> 标签：ajax, expressionengine

我是 ExpressionEngine 的新手。我正在做一个仅返回 JSON 的 AJAX 调用，并试图通过将方法插入操作表或调用精简模板来确定我是否应该这样做。

模板看起来像这样......一行......（在 ajax.group/call.html 中）：

```
{exp:ajaxclass:ajaxmethod} 
```

这样，它只是一个调用`http://localhost/ajaxclass/ajaxmethod/`

动作表：

```
http://localhost?ACT=1 
```

我真的不喜欢将行为 ID 放在 URI 中，但有人告诉我，这样做比模板方式有好处，比如它更快。与调用精简模板相比，使用 ACT= 是否有好处？我觉得我更喜欢模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:31:43.127

使用操作 URL 的优点是 EE 模板引擎在调用时不会运行，因此它*应该*更快（开销更少）。

仅此而已。

# matlab - matlab：帮助排序单元格内容

> ID：12712713
> 
> 赞同：0
> 
> 时间：2012-10-03T16:23:33.763
> 
> 标签：matlab, sorting, split, cell-array

这是我需要从输入中选择一个元素的代码的一部分。最终结果以一种奇怪的方式排序，它将创建 1X2 单元格，而不是将它们彼此相邻！

```
 struKm(i).seqNam = cellstr(regexp(data(i).Header, '\s\||\:|\|','split')); % determen the seqance name heads 
  struKm(i).seqNam(cellfun(@(x) isempty(x),struKm(i).seqNam))=[]; 
```

此代码位于 FOR LOOP 中。

此代码的结果是：

答案=

```
'AF051909'    '392-397'    'CAGCTG'    '413-418'    'CAGGTG' 
```

一些 seqNams 仅包含一个结合位点 (CAGCTG)。例如：

答案=

```
'M13483'    '445-450'    'CAACTG' 
```

现在我只想选择（CAGCTG，CAGGTG，CAACTG，...等）的绑定站点

我有另一个 for 循环可以做到这一点。编码：

struSize = 长度（struKm）；tempcell = 细胞（1,1）；

对于 m=1:struSize

```
if (length(struKm(m).seqNam) == 3)
  resultsk.BS{m} = struKm(m).seqNam(3); 
          disp(m);

end
if (length(struKm(m).seqNam) == 5)
 resultsk.BS{m} = cellstr(struKm(m).seqNam([3,5]));
  %tempcell = struKm(m).seqNam([3,5]); resultsk.BS{m} = cellstr(tempcell);
    disp(m);
end 
```

结尾

以及此代码的结果：

> > 结果k.BS{:}

答案=

```
'CAGCTG'    'CAGGTG' 
```

答案=

```
'CAACTG' 
```

答案=

```
'CAACTG' 
```

一些具有两个结合位点的细胞的问题，使 <1x2 细胞> 紧挨着 <1x1 细胞>。

我需要它们都排成一排。仍在为此苦苦挣扎。你能帮忙吗？

谢谢你，A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:04:23.420

这是一个很长的解释，但如果我理解正确，只有结尾才是真正重要的

```
resultsk.BS{1} = {'CAGCTG'    'CAGGTG'};
resultsk.BS{2} = {'CAACTG'};
resultsk.BS{3} = {'CAACTG'};
resultsk.BS{:}  % this gives 'your' answer 
```

现在您可以连接单元格输出

```
A = [resultsk.BS{:}]
A = 

'CAGCTG'    'CAGGTG'    'CAACTG'    'CAACTG'

whos A
 A         1x4               496  cell 
```

所以这现在是一个 1x4 单元格。这是你需要的吗？

# c# - 是否可以创建包含数组的枚举？

> ID：12712714
> 
> 赞同：5
> 
> 时间：2012-10-03T16:23:36.590
> 
> 标签：c#, enums

我想声明几个常量对象，每个对象都有两个子对象，我想将它们存储在一个`enum`用于组织目的。

有可能在 C# 中做这样的事情吗？

```
enum Car
{
  carA = { 'ford', 'red' }
  carB = { 'bmw', 'black' }
  carC = { 'toyota', 'white' }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:24:53.997

不，C# 语言不允许这样做。

您可以创建一个

```
Dictionary<Car, List<string>> cars; 
```

你会像添加条目一样

```
cars = new Dictionary<Car, List<String>>();
cars.Add(Car.carA, new List<String>() { "ford", "red" }); 
```

请注意，如果您混合了“福特”和“红色”的概念，您可能需要考虑创建一个对象来表示该事物，例如

```
public class CarDetails
{
    public string Maker { get; set; }
    public string Color { get; set; }
} 
```

然后，您的`Dictionary`对象看起来像

```
Dictionary<Car, CarDetails> cars;
cars = new Dictionary<Car.carA, CarDetails>();

cars.Add(Car.carA, new CarDetails() { Maker = "ford", Color = "red" }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T16:25:03.780

不，这是不可能的。您可以定义一个静态类

```
public static class Car
{
    public static readonly ReadOnlyCollection<string> carA = Array.AsReadOnly(new[]{"ford","red"});
    public static readonly ReadOnlyCollection<string> carB = Array.AsReadOnly(new[]{"bmw","black"});
    public static readonly ReadOnlyCollection<string> carC = Array.AsReadOnly(new[]{"toyota","white"});
} 
```

我使用`ReadOnlyCollection<string>`而不是 a`string[]`以保留枚举的不变性。

这不满足每个`Car`的属性都是 的实例的条件`Car`。您可以使用带有私有构造函数和静态实例的自定义枚举类进一步获得所需的内容。[Jimmy Bogard 在http://lostechies.com/jimmybogard/2008/08/12/enumeration-classes/](http://lostechies.com/jimmybogard/2008/08/12/enumeration-classes/)上有一个示例实现和基类。他提供了一个可扩展的基类，如果你经常这样做，你应该研究一下。但是，只要您明白这一点，使用这种方法处理您的数据的简单实现如下所示：

```
 public sealed class Car  : IEquatable<Car> { 

 // declare and define each of your constants

    public static readonly Car carA = new Car("ford", "red");

    public static readonly Car carB = new Car("bmw", "black");

    public static readonly Car carC = new Car("toyota", "white");

 //  define an instance-scoped value object to hold your subObjects
     private readonly Tuple<string,string> subObjects;

 // a private constructor ensures that all your instances will be constant 
 // and will be defined from within Car
     private Car(string make, string color){
     // require valid sub objects
     if(string.IsNullOrEmpty(make))throw new ArgumentException("Invalid Make","make");
     if(string.IsNullOrEmpty(color))throw new ArgumentException("Invalid Color","color");

     // create a subObjects tuple to hold your values to simplify value comparison
     this.subObjects = Tuple.Create(make,color);
     }

 //  declare public accessors for your 
     public string Make { get { return this.subObjects.Item1; } }
     public string Color { get { return this.subObjects.Item2; } }

 // override Equality for value equality, and resulting consistency across AppDomains
         public override bool Equals(object obj){ return obj is Car && this.Equals((Car)obj); }
     public bool Equals(Car otherCar){ return otherCar != null && this.subObjects.Equals(otherCar.subObjects); }
     public override int GetHashCode(){ return this.subObjects.GetHashCode(); }
         public static bool operator ==(Car left, Car right){ return left == null ? right == null : left.Equals(right); }
         public static bool operator !=(Car left, Car right){ return !(left == right); }

 // override ToString() to provide view of values 
     public override string ToString(){ return string.Format("Car({0},{1})",Make,Color); }
} 
```

现在，您可以像使用`enum`. 例如，

```
 void Main(){
     var blackBeamer = Car.carC;
     Console.WriteLine("carC is a " + blackBeamer.Color +" " + blackBeamer.Make);
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T16:24:59.987

不。

首先，C# 中的枚举实际上是整数值，而不是字符串。

其次，枚举中的每个值只能有一个值。

您可以为每个枚举值指定整数值，这将允许枚举中的多个元素具有相同的整数值：

```
public enum Car
{
    Ford = 1,
    Red = 1,
    Bmw = 2,
    Black = 2
    // etc.
} 
```

但听起来你真正要找的是字典。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T16:25:37.920

枚举的值始终由整数表示。您不能使用其他类型（如字符串数组）。

您可以执行以下操作以获得类似的结果：

```
Dictionary<Car, string[]> cars;
cars = new Dictionary<Car, string[]>();
cars.Add(Car.carA, new string[]{"ford", "red"});
cars.Add(Car.carB, new string[]{"bmw", "black"});
cars.Add(Car.carC, new string[]{"toyota", "white"}); 
```

但是，只有当您需要将枚举映射到这样的字符串时，才应该这样做。你似乎在混合各种“东西”，即汽车的品牌和颜色。你应该考虑更多类似的东西：

```
enum Make {
    Ford,
    BMW,
    Toyota
}

enum Color {
    Red,
    Black,
    White
} 
```

并将汽车表示为：

```
struct Car {
    Make make;
    Color color;
    public Car(Make m, Color c) { make = m; color = c; }
} 
```

列表如下：

```
Car[] cars = new Car[]{new Car(Make.Ford, Color.Red), new Car(Make.BMW, Make.Black), new Car(Make.Toyota, Make.White)}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T17:09:45.550

您可以使用静态类来容纳显示额外数据的扩展方法。例如：

```
enum Car
{
    CarA, CarB, CarC
}

public static class Cars 
{
    public static string[] GetDetails(this Car car) 
    {
        switch (car) 
        {
            case CarA: return new[] { "ford", "red" };
            case CarB: return new[] { "bmw", "black" };
            case CarC: return new[] { "toyota", "white" };
        }
    }
} 
```

话虽如此，为此返回一个字符串数组对我来说没有多大意义。相反，我会声明两种扩展方法，一种用于制作，一种用于颜色：

```
public static class Cars 
{
    public static string GetMake(this Car car) 
    {
        switch (car) 
        {
            case CarA: return "ford";
            case CarB: return "bmw";
            case CarC: return "toyota";
        }
    }

    public static string GetColor(this Car car) 
    {
        switch (car) 
        {
            case CarA: return "red";
            case CarB: return "black";
            case CarC: return "white";
        }
    }
} 
```

然后你可以像这样使用它：

```
Car car = Car.CarA;
string make = car.GetMake();
string color = car.GetColor(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-03T16:59:48.463

`Car`制作作品的一个小技巧`enum`，定义：

```
internal enum Maker
{
    Ford, Bmw, Toyota,
}

internal enum Color
{
    Red, Black, White
} 
```

然后构建结构`Car`：

```
public struct Car
{
    private readonly Maker _maker;
    private readonly Color _color;

    public static Car CarA = new Car(Maker.Ford, Color.Red);
    public static Car CarB = new Car(Maker.Bmw, Color.Black);
    public static Car CarC = new Car(Maker.Toyota, Color.White);

    private Car(Maker maker, Color color)
    {
        _maker = maker;
        _color = color;
    }

    public static bool operator ==(Car car1, Car car2)
    {
        return car1._maker == car2._maker && car1._color == car2._color;
    }

    public static bool operator !=(Car car1, Car car2)
    {
        return !(car1 == car2);
    }
} 
```

因此，您可以使用：

```
 Car a = Car.CarA;
 bool flag = a == Car.CarB; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-03T17:16:47.173

属性的使用呢？

```
enum Cars{
  [Make("A Make"), Color("A Color")]
  CarA,

  [Make("B Make"), Color("B Color")]
  CarB
} 
```

然后像这样定义属性。

```
public class MakeAttribute : Attribute
    {
        public readonly Make make;
        public MakeAttribute (Make make)
        {
          this.make = make;
        }
    } 
```

为 Car 类型添加扩展以获取 make 属性

```
public static string GetMake(this Car car)
        {
            var makeAttr = (MakeAttribute[])car.GetType().GetField(car.ToString()).GetCustomAttributes(typeof(MakeAttribute), false))[0];
            return makeAttr.make;
        } 
```

并调用这个吸气剂，

```
Cars.CarA.GetMake() 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-03T16:46:16.933

另一种方法是[Flags enum](http://msdn.microsoft.com/en-us/library/cc138362.aspx)：

```
[Flags]
enum Car
{
  None = 0, 
  ModelFord = 1,
  ModelBmw = 2,
  ModelToyota = 4,
  ColorRed = 8,
  ColorBlack = 16,
  carA = ModelFord | ColorRed,
  carB = ModelBmw | ColorBlack,
  carC = ModelToyota  | ColorBlack
} 
```

请注意，这只是示例 - 您应该避免在单个枚举中混合类型的属性（在这种情况下为汽车型号和颜色）。

# android - Android INSERT 语句问题

> ID：12712719
> 
> 赞同：1
> 
> 时间：2012-10-03T16:23:54.933
> 
> 标签：android, database, insert

在创建数据库时尝试将数据插入数据库时​​出现语法错误。

我正在使用以下代码：

```
//DatabaseHelper class
private static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_INSPECTION_TABLE);
        db.execSQL(CREATE_AREA_TABLE);
        db.execSQL(CREATE_RUN_TABLE);
        db.execSQL(CREATE_LOCATION_TABLE);
        db.execSQL(CREATE_INSPECTORS_TABLE);
        db.execSQL(CREATE_ISSUE_LOCATION_TABLE);
        db.execSQL(CREATE_ISSUE_TYPE_TABLE);
        db.execSQL(CREATE_RACKING_SYSTEM_TABLE);
        db.execSQL(CREATE_COMPONENT_TABLE);
        db.execSQL(CREATE_RISK_TABLE);
        db.execSQL(CREATE_ACTION_TABLE);
        db.execSQL(CREATE_MANUFACTURER_TABLE);

        db.rawQuery("INSERT INTO " + INSPECTORS_TABLE + "(" + INSPECTOR_NAME + ") " + 
                "SELECT 'Joe Bloggs' AS " + INSPECTOR_NAME +
                " UNION SELECT 'John Major' " +
                " UNION SELECT 'Dan the man'"
                , null);

        db.rawQuery("INSERT INTO " + ACTION_TABLE + "(" + ACTION_REQUIRED + ") " + 
                "SELECT 'Red Risk' AS " + ACTION_REQUIRED +
                " UNION SELECT 'Amber Risk' " +
                " UNION SELECT 'Green Risk'"
                , null); 
```

根据 RedFliter 的建议再次编辑。我确定查询现在是正确的，但是虽然我没有收到任何错误，但没有记录输入到表中（每次使用 DDMS 都删除了数据库）。

我是否将此代码放在正确的位置（即 onCreate）？

不知道我要去哪里错了..

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:24:55.597

您需要在字符串周围添加单引号：

```
db.rawQuery("INSERT INTO " + INSPECTIONS_TABLE + " (" + INSPECTOR_NAME + ")          VALUES " + "('Joe Blogs', 'John Smith', 'Franky Hollywood')", null); 
```

这种方法会受到 SQL 注入的影响。你需要提防这种情况。

**更新：**

对于多行插入，您需要执行以下操作：

```
db.rawQuery("INSERT INTO " + INSPECTIONS_TABLE + "(" + INSPECTOR_NAME + ") " + "select 'Joe Bloggs' as " + INSPECTOR_NAME + " UNION ALL select 'John Major' UNION ALL select 'Dan the man'", null); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T16:27:30.673

像下面这样使用你可以将日期插入数据库......

```
 SQLiteDatabase db = this.getWritableDatabase();
 ContentValues values = new ContentValues();
 values.put(POST_ID,"Your ID here");
 values.put(POSTER_ID,"Poster id " );
 values.put(POSTER_NAME, msg.poster_name);
 values.put(POSTER_IMAGE_PATH,msg.poster_image_path==null ||msg.poster_image_path.length()==0?"":msg.poster_image_path);
 values.put(PLAYER_TYPE, msg.player_type);
 values.put(POST_TEXT, msg.post_text);
 db.insert(TABLE_NAME, null, values);
 db.close(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T16:28:14.667

只需将字符串值放入引号中

```
db.rawQuery("INSERT INTO " + 
        INSPECTIONS_TABLE + "(" + INSPECTOR_NAME + ") 
        VALUES " + "('Joe Blogs', 'John Smith', 'Franky Hollywood')", null); 
```

# wpf - 如何更改默认 TabItem 的触发模板中的单个属性？

> ID：12712720
> 
> 赞同：2
> 
> 时间：2012-10-03T16:24:03.270
> 
> 标签：wpf, controltemplate, inheritance

我想要实现的目标很容易解释：更改 wpf-tabitem 的背景颜色以防它被选中（它应该适合窗口背景）。默认控件的所有其他属性应保持不变。

我想出的转储解决方案是将整个默认样式复制到我的并替换以下部分中`ResourceDictionary`的颜色：`#FFF9F9F9`

```
 <Trigger Property="Selector.IsSelected">
  /* ..... cutting some lines here ....*>
  <Setter Property="Panel.Background" TargetName="Bd">
   <Setter.Value>
    <SolidColorBrush>
    #FFF9F9F9</SolidColorBrush>
   </Setter.Value>
  </Setter> 
```

显然，我不喜欢这样并尝试应用继承（`BasedOn="{StaticResource {x:Type TabItem}}"`）。这没有效果。然后我尝试了模板设置。但是，我未能处理默认模板中的边框，由“Bd”引用 avobe。将边框添加到我的 ContentTemplated 工作，但默认 TabItem 的所有其他功能都消失了（鼠标悬停等）。

有人可以提示我如何在不复制整个默认模板的情况下更改此颜色属性吗？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:28:34.757

如果颜色未链接到`Background`默认模板中的属性（如 ），则必须用编辑后的副本替换模板，没有其他（可接受的）方法可以更改它。

# javascript - 是否有等效于 JavaScript '||' 在红宝石？

> ID：12712730
> 
> 赞同：-3
> 
> 时间：2012-10-03T16:24:34.277
> 
> 标签：javascript, ruby

在 JavaScript 中，我可以写出极富表现力的：

```
console.log(foo.name || 'No Name'); 
```

是否有任何与该简短表达式等效的 Ruby？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T16:28:38.563

我很少使用 ruby​​，但它应该几乎相同。

```
>> name = false
=> false
>> puts name || "no name"
no name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:30:48.407

这与 Ruby 完全相同：

```
def test(x)
  puts x
end

var = nil
test( var || 'No Name') #=> No Name

var = 'something'
test( var || 'No Name') #=> something 
```

您也可以使用相同的技术在未初始化变量时对其进行初始化：

```
var ||= 'data' 
```

# spring - 为什么 Spring 不回滚 RuntimeException？

> ID：12712742
> 
> 赞同：2
> 
> 时间：2012-10-03T16:25:12.933
> 
> 标签：spring, transactions

我正在尝试编写一段代码，在其中我可以看到 @Transaction 方法在 RuntimeException 上回滚。这应该是预期的默认行为，但这不是我所看到的。任何想法为什么？

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:mrpomario/springcore/jdbc/jdbc-testenv-config.xml")
@Transactional // Will rollback test transactions at the end
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = true)
public class TransactionalTest
{
    @Autowired
    FeedManagerOne feedManagerOne;

    @Test
    public void test_RuntimeExceptions_Rollback_Behaviour(){
         Feed bogus = new Feed("B", "B", false);

         assertFalse(feedManagerOne.exists(bogus));

         try {
              feedManagerOne.createFeedAndThrowRuntimeException(bogus);
         }  catch (RuntimeException e) { }

         // WRONG! feedManagerOne.exists(bogus) SHOULD return false, but returns true.
         assertFalse(feedManagerOne.exists(bogus));
    }

} 
```

我的服务：

```
@Service
public class FeedManagerOne {
    @Autowired
    JdbcTemplate jdbcTemplate;

    @Transactional(readOnly = true)
    public boolean exists(Feed feed) {
        String query = "SELECT COUNT(*) FROM feed WHERE name = ? AND url = ? AND is_active = ?";
        int total = jdbcTemplate.queryForInt(query, feed.getName(), feed.getUrl(), feed.isActive());
        boolean found = (total == 1);

        return found;
    }

    @Transactional
    public boolean createFeedAndThrowRuntimeException(Feed feed) {
        String query = "INSERT INTO feed (name, url, is_active) values (?, ?, ?)";
        int rowsChanged = jdbcTemplate.update(query, feed.getName(), feed.getUrl(), feed.isActive());
        boolean created = (rowsChanged == 1);

        if (true)
        {
            throw new RuntimeException();
        }

        return created;
    }
} 
```

这就是我定义我的 TransactionManager 的方式：

```
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean>
    <jdbc:embedded-database id="dataSource" type="H2">
    <jdbc:script location="mrpomario/springcore/jdbc/testdb/schema.sql"/>
    <jdbc:script location="classpath:mrpomario/springcore/jdbc/testdb/test-data.sql"/>
</jdbc:embedded-database> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T16:38:12.017

这是预期的行为。

当您从方法中抛出异常（应该导致回滚）时`@Transactional`，Spring 会将事务标记为在其结束时回滚。因此，如果您从调用堆栈中最顶层的方法抛出异常`@Transactional`，事务将立即回滚。

但是在您的情况下，您的测试方法也是`@Transactional`如此，因此您有一个跨越整个测试方法的事务。这意味着尽管事务在调用之后被标记为回滚`createFeedAndThrowRuntimeException()`，但直到测试方法结束才回滚，因此第二次调用`exists()`可以观察到变化。

因此，如果您想查看回滚，则需要使您的测试方法成为非事务性的。

我也没有`<tx:annotation-driven/>`在您的配置中看到。

# kentico - Kentico 交付给多个浏览器

> ID：12712748
> 
> 赞同：0
> 
> 时间：2012-10-03T16:25:29.097
> 
> 标签：kentico

如何让 Kentico 使用基于不同浏览器的不同模板，但使用相同的内容？

我需要在 HTML5 中向 IE9+ 提供相同的内容，但也需要在不使用 HTML5 的 IE8 上运行的版本。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:24:59.647

请看这个[线程](http://devnet.kentico.com/Forums.aspx?forumid=47&threadid=19174)它仍然适用。

但是，您是否考虑过使用[条件布局](http://devnet.kentico.com/docs/devguide/page_layouts.htm#conditional_layouts)？

# regex - 正则表达式删除最后一次分号后的所有内容

> ID：12712749
> 
> 赞同：-1
> 
> 时间：2012-10-03T16:25:32.903
> 
> 标签：regex

我有例如这个字符串：

> 你好; 如何; 是; 你; ?

我需要在最后一次分号之后删除所有内容。我知道这很容易，但我没有太多时间学习正则表达式。我使用支持正则表达式功能的文本编辑器 PSPad，文本位于简单的 txt 文件中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:35:30.323

不确定您想要使用哪种语言，但在 PHP 中，它可以工作：

PHP

```
$string = 'hello; how; are; you; ?';
$string = preg_replace('#[^;]*$#', '', $string); 
```

Perl

```
my $string = 'hello; how; are; you; ?';
$string =~ s/[^;]*$//; 
```

# regex - 正则表达式匹配以特殊字符开头的单词边界

> ID：12712754
> 
> 赞同：7
> 
> 时间：2012-10-03T16:25:50.677
> 
> 标签：regex, perl

我的正则表达式可以很好地匹配单词，除非它们包含特殊字符，例如 ~Query，它是 C++ 类成员的名称。对于单个字符的成员名称，需要使用如下所示的单词边界。 `$key =~ /\b$match\b/`

我尝试了许多我认为会起作用的表达方式，例如`/[~]*\b$match\b/`或`/\b[~]*$match\b/`

是否可以在可能包含特殊字符的单词上设置单词边界？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T16:31:23.133

```
\b 
```

简称

```
(?:(?<!\w)(?=\w)|(?<=\w)(?!\w)) 
```

如果要`~`作为单词字符处理，请更改`\w`为`[\w~]`.

```
(?:(?<![\w~])(?=[\w~])|(?<=[\w~])(?![\w~])) 
```

示例用法：

```
my $word_char = qr/[\w~]/;
my $boundary  = qr/(?<!$word_char)(?=$word_char)
                  |(?<=$word_char)(?!$word_char)/x;

$key =~ /$boundary$match$boundary/ 
```

如果我们知道`$match`只能匹配以 a 开头和结尾的东西`$word_char`，我们可以简化如下：

```
my $word_char   = qr/[\w~]/;
my $start_bound = qr/(?<!$word_char)/;
my $end_bound   = qr/(?!$word_char)/;

$key =~ /$start_bound$match$end_bound/ 
```

这很简单，我们可以内联。

```
$key =~ /(?<![\w~])$match(?![\w~])/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T17:14:10.977

假设您不需要检查的内容`$match`（即它总是包含一个有效的标识符），您可以这样写

```
$key =~ /(?<![~\w])$match(?![~\w])/ 
```

它只是检查字符串 in`$match`前面或后面没有字母数字、下划线或波浪号

# c# - Rally API - 创建 TestCaseResult - 日期时间问题

> ID：12712755
> 
> 赞同：1
> 
> 时间：2012-10-03T16:25:51.003
> 
> 标签：c#, .net, api, rally

我正在使用 Rally soap API 针对之前创建的测试用例创建一个新的 TestCaseResult。但是当我创建结果时出现错误 - “验证错误：TestCaseResult.Date 不应为空”

不知道为什么会这样——你能帮忙吗？

```
 private Boolean createTestResultForTest(String aResult, String aTestCase)
    {
        TestCaseResult myTestCaseResult = new TestCaseResult();
        myTestCaseResult.Build = "1";
        DateTime myDate = DateTime.Now;
        myTestCaseResult.Date = myDate;
        String myQuery = "(FormattedID = " + aTestCase + ")";
        QueryResult myTestCaseReturn = m_rallyService.query(m_workspace, "TestCase", myQuery, "", true, 0, 100);
        long mycount = myTestCaseReturn.TotalResultCount;
        if (mycount > 0)
        {
            TestCase myTestCase = (TestCase)myTestCaseReturn.Results[0];
            myTestCaseResult.TestCase = myTestCase;
        }
        else
        {
            return false;
        }
        myTestCaseResult.Verdict = aResult;

        CreateResult myCreateTestResultResult = m_rallyService.create(myTestCaseResult);
        if (hasErrors(myCreateTestResultResult))
        {
            updateStatus("Could not create test result for test case:" + myTestCaseResult.TestCase.Name);
            printWarningsErrors(myCreateTestResultResult);
            return false;
        }
        else
        {
            myTestCaseResult = (TestCaseResult)myCreateTestResultResult.Object;
            myTestCaseResult = (TestCaseResult)m_rallyService.read(myTestCaseResult);
            updateStatus("Created TestCaseResult: " + myTestCaseResult.TestCase.Name + ", ref = " + myTestCaseResult.@ref);
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:15:01.007

我相信您已经遇到了 Rally 的 SOAP API 的一个已知错误，我直到现在才忘记。基本上，错误是即使您在 TestCaseResult 上指定了有效的日期/时间对象，除非您还将特定标志设置为 true，否则 SOAP 序列化程序也无法识别这一点，即：

myTestCaseResult.DateSpecified = true;

请设置此标志，然后重新运行您的代码 - 它现在应该可以工作了 :)

# c++ - 在 C++ 或 Scilab 或 Octave 或 R 中使用大量数据进行统计

> ID：12712756
> 
> 赞同：0
> 
> 时间：2012-10-03T16:25:52.357
> 
> 标签：c++, r, statistics, octave, scilab

我最近需要计算大量（约 800,000,000）双打的均值和标准差。考虑到一个 double 需要 8 个字节，如果所有的 double 都读入 ram，大约需要 6 GB。我想我可以对 C++ 或其他高级语言使用分而治之的方法，但这似乎很乏味。有没有一种方法可以让我使用 R、Scilab 或 Octave 等高级语言一次性完成所有这些操作？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:31:22.487

听起来您可以充分利用 R-Grid 或 Hadoop。

当然，您意识到计算平均值和标准差很容易，而无需将所有值读入内存。只需保持一个运行总数，就像这个 Java 类一样。您所需要的只是总和、平方和和点数。我免费保留最小值和最大值。

这也清楚地说明了 map-reduce 是如何工作的。您将实例化几个统计实例，让它们中的每一个保持总和、平方和以及它们在 800M 点中的部分的点数。然后让reduce步骤将它们组合起来，使用相同的公式得到最终结果。

```
import org.apache.commons.lang3.StringUtils;

import java.util.Collection;

/**
 * Statistics accumulates simple statistics for a given quantity "on the fly" - no array needed.
 * Resets back to zero when adding a value will overflow the sum of squares.
 * @author mduffy
 * @since 9/19/12 8:16 AM
 */
public class Statistics {
    private String quantityName;
    private int numValues;
    private double x;
    private double xsq;
    private double xmin;
    private double xmax;

    /**
     * Constructor
     */
    public Statistics() {
        this(null);
    }

    /**
     * Constructor
     * @param quantityName to describe the quantity (e.g. "heap size")
     */
    public Statistics(String quantityName) {
        this.quantityName = (StringUtils.isBlank(quantityName) ? "x" : quantityName);
        this.reset();
    }

    /**
     * Reset the object in the event of overflow by the sum of squares
     */
    public synchronized void reset() {
        this.numValues = 0;
        this.x = 0.0;
        this.xsq = 0.0;
        this.xmin = Double.MAX_VALUE;
        this.xmax = -Double.MAX_VALUE;
    }

    /**
     * Add a List of values
     * @param values to add to the statistics
     */
    public synchronized void addAll(Collection<Double> values) {
        for (Double value : values) {
            add(value);
        }
    }

    /**
     * Add an array of values
     * @param values to add to the statistics
     */
    public synchronized void allAll(double [] values) {
        for (double value : values) {
            add(value);
        }
    }

    /**
     * Add a value to current statistics
     * @param value to add for this quantity
     */
    public synchronized void add(double value) {
        double vsq = value*value;
        ++this.numValues;
        this.x += value;
        this.xsq += vsq; // TODO: how to detect overflow in Java?
        if (value < this.xmin) {
            this.xmin = value;
        }
        if (value > this.xmax) {
            this.xmax = value;
        }
    }

    /**
     * Get the current value of the mean or average
     * @return mean or average if one or more values have been added or zero for no values added
     */
    public synchronized double getMean() {
        double mean = 0.0;
        if (this.numValues > 0) {
            mean = this.x/this.numValues;
        }
        return mean;
    }

    /**
     * Get the current min value
     * @return current min value or Double.MAX_VALUE if no values added
     */
    public synchronized double getMin() {
        return this.xmin;
    }

    /**
     * Get the current max value
     * @return current max value or Double.MIN_VALUE if no values added
     */
    public synchronized double getMax() {
        return this.xmax;
    }

    /**
     * Get the current standard deviation
     * @return standard deviation for (N-1) dof or zero if one or fewer values added
     */
    public synchronized double getStdDev() {
        double stdDev = 0.0;
        if (this.numValues > 1) {
            stdDev = Math.sqrt((this.xsq-this.x*this.x/this.numValues)/(this.numValues-1));
        }
        return stdDev;
    }

    /**
     * Get the current number of values added
     * @return current number of values added or zero if overflow condition is encountered
     */
    public synchronized int getNumValues() {
        return this.numValues;
    }

    @Override
    public String toString() {
        final StringBuilder sb = new StringBuilder();
        sb.append("Statistics");
        sb.append("{quantityName='").append(quantityName).append('\'');
        sb.append(", numValues=").append(numValues);
        sb.append(", xmin=").append(xmin);
        sb.append(", mean=").append(this.getMean());
        sb.append(", std dev=").append(this.getStdDev());
        sb.append(", xmax=").append(xmax);
        sb.append('}');
        return sb.toString();
    }
} 
```

这是证明它有效的 JUnit 测试：

```
import org.junit.Assert;
import org.junit.Test;

import java.util.Arrays;
import java.util.List;

/**
 * StatisticsTest
 * @author mduffy
 * @since 9/19/12 11:21 AM
 */
public class StatisticsTest {
    public static final double TOLERANCE = 1.0e-4;

    @Test
    public void testAddAll() {
        // The test uses a full array, but it's obvious that you could read them from a file one at a time and process until you're done.
        List<Double> values = Arrays.asList( 2.0, 4.0, 4.0, 4.0, 5.0, 5.0, 7.0, 9.0 );
        Statistics stats = new Statistics();
        stats.addAll(values);
        Assert.assertEquals(8, stats.getNumValues());
        Assert.assertEquals(2.0, stats.getMin(), TOLERANCE);
        Assert.assertEquals(9.0, stats.getMax(), TOLERANCE);
        Assert.assertEquals(5.0, stats.getMean(), TOLERANCE);
        Assert.assertEquals(2.138089935299395, stats.getStdDev(), TOLERANCE);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:23:03.257

没有声称这是最佳的，但在 python（带有 numpy 和 numexpr 模块）中，以下很容易（在 8G RAM 机器上）：

```
import numpy, numpy as np, numexpr
x = np.random.uniform(0, 1, size=8e8)

print x.mean(), (numexpr.evaluate('sum(x*x)')/len(x)-
                (numexpr.evaluate('sum(x)')/len(x))**2)**.5
>>> 0.499991593345 0.288682001731 
```

这不会比原始数组消耗更多的内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:30:41.630

这看起来是个不错的挑战，难道你不能用经过调整的合并排序来创建类似的东西吗？只是一个想法。然而，这看起来像动态编程，您可以使用多台 PC 来加快速度。

# eclipse - 在 Eclipse/Mylyn 中下载现有的 Github 问题

> ID：12712757
> 
> 赞同：3
> 
> 时间：2012-10-03T16:25:54.120
> 
> 标签：eclipse, github, mylyn

我已经通过[http://eclipse.github.com/](http://eclipse.github.com/)将我的 Eclipse 连接到我的 Github 存储库。我正在尝试使问题跟踪集成正常工作。看来我能够在 Eclipse 中创建新问题；我看到他们发布到 Github。但我似乎不知道如何下载我之前在 Github 上直接创建的所有问题，也找不到任何关于此的文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:09:30.247

您需要创建“查询”。在您的*任务列表*视图（Mylyn 任务列表）中，使用菜单创建查询。选择您的存储库和选择标准（即显示具有特定里程碑或标签的任务）。[实际上，我在这里](http://eclipsesource.com/blogs/2012/08/28/tips-and-tricks-using-eclipse-with-github/)写了一个关于整个主题的简短教程。

# ios - iOS EKEventStore 不保存日历

> ID：12712759
> 
> 赞同：1
> 
> 时间：2012-10-03T16:26:02.203
> 
> 标签：ios, xcode, ekeventkit

我似乎无法弄清楚为什么以下代码不起作用。我获得了“日历已创建”和“日历已存在”的 NSlogs 我也毫无问题地获得了日历 ID。我有一堆（比如 10 个）创建的日历只是“出现”一次，但我一直在尝试删除它们，但它们没有出现。我真的很困惑为什么它不起作用。

```
-(void)saveEventWithDate:(NSDate *)startDate endDate:(NSDate *)endDate {
    AppData *theData = [self theAppData];

    EKEventStore *eventStore = [[EKEventStore alloc] init];

    if([self checkIsDeviceVersionHigherThanRequiredVersion:@"6.0"]) {
        [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {

            if (granted){

                EKEvent *event  = [EKEvent eventWithEventStore:eventStore];

                NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

                if ([defaults objectForKey:@"Calendar"] == nil) // Create Calendar if Needed
                {
                    EKSource *theSource = nil;

                    for (EKSource *source in eventStore.sources) {
                        if (source.sourceType == EKSourceTypeCalDAV && [source.title isEqualToString:@"iCloud"]) {
                            theSource = source;
                            NSLog(@"iCloud Store Source");
                            break;
                        } else {
                            for (EKSource *source in eventStore.sources) {
                                if (source.sourceType == EKSourceTypeLocal) {
                                    theSource = source;
                                    NSLog(@"iPhone Local Store Source");
                                    break;
                                }
                            }
                        }
                    }

                    EKCalendar *cal;
                    cal = [EKCalendar calendarWithEventStore:eventStore];
                    cal.title = @"hello";
                    cal.source = theSource;
                    [eventStore saveCalendar:cal commit:YES error:nil];
                    NSLog(@"cal id = %@", cal.calendarIdentifier);
                    NSString *calendar_id = cal.calendarIdentifier;
                    [defaults setObject:calendar_id forKey:@"Calendar"];
                    event.calendar  = cal;

                } else {
                    event.calendar  = [eventStore calendarWithIdentifier:[defaults objectForKey:@"Calendar"]];
                    NSLog(@"Calendar Existed");
                }

                event.title     = [NSString stringWithFormat:@"%@ iPhone",[theData.repair_info objectForKey:@"name"]];
                event.location  = @"Location of";
                event.notes     = @"Notes";
                event.startDate = startDate;
                event.endDate   = endDate;
                event.allDay    = NO;
                EKAlarm *alarm = [EKAlarm alarmWithRelativeOffset:-1800]; // Half Hour Before
                event.alarms = [NSArray arrayWithObject:alarm];

                [eventStore saveEvent:event span:EKSpanThisEvent error:nil];

            } else {
                NSLog(@"Not Granted");
            }

        }];
    } } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:19:43.490

如果用户删除了日历，我认为您不需要在设置下有“重置日历”按钮。只需从以下位置更改代码行：

```
if ([defaults objectForKey:@"Calendar"] == nil) // Create Calendar if Needed 
```

至

```
if ([defaults objectForKey:@"Calendar"] == nil || ![eventStore calendarWithIdentifier:[defaults objectForKey:@"Calendar"]]) // Create Calendar if Needed 
```

您将创建一个新日历并向其中添加新事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:43:42.023

问题出在代码的第一行。

```
//Wrong Way..
EKEventStore *eventStore = [[EKEventStore alloc] init]; 
```

您已经创建了另一个 EKEventStore 实例，并且希望在现有实例中进行事务处理。

而不是在这里“分配初始化”它，而是从管理日历数据源的类中获取您的 EKEventStore 实例。这可能看起来像。

```
EKEventStore *eventStore = [dataSource getEventSore]; 
```

也不是跟踪日历的 ID。我建议您跟踪 EKEvent 的标识符。

```
EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
NSLog(@"eventIdentifier = %@",event.eventIdentifier); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T17:13:48.370

问题是用户默认设置为创建（然后删除）的第一个日历，因此它不会创建另一个日历。我必须清除我的 NSUserDefaults 并创建日历。因此，如果用户删除了日历，我将不得不在设置下有一个“重置日历”按钮。

# facebook - 以编程方式将事件发布到 Facebook 页面

> ID：12712760
> 
> 赞同：0
> 
> 时间：2012-10-03T16:26:13.547
> 
> 标签：facebook

好的，我真的试图在这里自己解决我的问题，但我只是不了解 Facebook 和那里的所有协议。

我有以下设置： 像 www.xyz.com 这样的主页 像[https://www.facebook.com/xyz这样的 Facebook 页面](https://www.facebook.com/xyz)

我们正在为一家非营利性电影院开发主页。每周有三场放映。在某些时候，放映会发布。

当放映发布时，我希望主页（使用 SilverStripe 3 编程）将这些作为事件发布到 Facebook 页面。

我的问题：我不希望用户登录 facebook 来发布事件，因为不是每个人都有管理员权限。此外，放映应由主页自行发布，无需监督。

所以我想，我需要一个 Facebook 应用程序，但我也不确定。因为该应用程序应仅限于我自己的页面使用。

有什么办法可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T18:07:09.447

是的，您想[作为页面进行身份验证](https://developers.facebook.com/docs/authentication/pages/)

最简单的方法是：

*   让页面管理员访问[图形 API 资源管理器](https://developers.facebook.com/tools/explorer)，
*   获取具有权限的访问`manage_pages`令牌
*   `me/accounts`在单词“GET”右侧的框中键入

这将为您提供页面列表和他们管理的每个页面的访问令牌。此令牌将一直有效，直到管理员从页面管理界面手动重置它。

您可以将其存储在一个变量中，并使用这些调用添加事件。如果将来更改令牌，请确保您正常失败。

# c# - 在 C# 中从 Xml 反序列化

> ID：12712761
> 
> 赞同：0
> 
> 时间：2012-10-03T16:26:13.513
> 
> 标签：c#, xml

我的错误是：无法将“System.Xml.Linq.XDocument”类型的对象转换为类型

我正在尝试执行此代码：

```
XmlSerializer s1 = new XmlSerializer(typeof(xdoc.toString())); 
```

其中 xdoc 具有此值：

```
<root>
  <row1>
    <ing>john</ing>
  </row1>
  <row1>
    <ing>some name</ing>
  </row1>
  <row>
    <name>salad</name>
    <ID>8</ID>
  </row>
</root> 
```

我创建了一个像这样的类：

```
class Print {
    List<row1> row1 = new List<row1>();
    List<row> row = new List<row>();
}

public class row1
{
    public string ing { get; set; }
}

public class row
{
    public string name { get; set; }       
    public string ID { get; set; }
} 
```

但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:35:43.473

在`XmlSerializer`构造函数中，您需要传入要序列化或反序列化到的类型，而不是值。如果您尝试反序列化为`Print`对象，则需要传入`typeof(Print)`.

此外，就目前的代码而言，反序列化将不起作用，因为`XmlSerializer`该类期望根节点为`Print`. 要解决此问题，您可以使用属性装饰您的`Print`类`XmlRoot`并传入`root`. 然后你的代码可能会工作。

**编辑：** 您的代码将不起作用，您的 XML 将需要一个附加元素来表示列表：

```
<root>
  <ListOfrow1>
    <row1>...</row1>
  </ListOfrow1>
  ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:38:27.980

我同意 Furqan 的观点，即问题不完整，但 XmlSerializer 的参数应该是 CLR 对象的类型，而不是 XDocument。我认为应该是这样的

```
XmlSerializer s1 = new XmlSerializer(typeof(Print));
Print = (Print)s1.Deserialize(xdoc); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T17:02:23.300

当您拥有 XDocument 时，您不需要 XmlSerializer。linq就够了

```
List<row1> row1 = xDoc.Descendants("row1")
                .Select(x => new row1() { ing = x.Element("ing").Value })
                .ToList();

List<row> row = xDoc.Descendants("row")
                    .Select(x => new row() { 
                        name = x.Element("name").Value,
                        ID = x.Element("ID").Value 
                    })
                    .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T16:33:41.667

看起来像是在`new XmlSerializer(typeof(xdoc.toString()));`尝试写`new XmlSerializer(typeof(string));`这不太可能是您想要的。您可能想要类似`XmlSerializer(typeof(Print))`. 示例可以在[MSDN-XmlSerializer 文章](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)中找到。

# xcode - NSTextField 验证和 NSSearchField 将其值保存到 NSButton 单击时的最近历史记录

> ID：12712762
> 
> 赞同：0
> 
> 时间：2012-10-03T16:26:15.807
> 
> 标签：xcode, cocoa, nstextfield, nsbutton, nssearchfield

我有这个设置，我`NSWinow`有两个`NSSearchFiled`带有相对自动保存搜索历史的 s，一个`NSTextField`和一个`NSButton`.

`NSSearchFiled`必须自动保存搜索（当用户按下“Enter”键时才能正常工作） `NSTextField`需要验证并保存到用户首选项（通过它`action`）。

问题是，如果我专注于`NSSearchFiled`并单击`NSButton`该字符串不会自动保存到最近，如果我专注于`NSTextField`并单击`NSButton`该值未验证并保存到用户首选项...

我在 NSButton 操作中试过这个：

```
// SearchF_Name is of NSSearchFiled
[SearchF_Name sendAction:SearchF_Name.action to:SearchF_Name.target]; 
```

没有运气，谷歌搜索也无济于事......你帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:47:59.767

问完这个问题后，我尝试了“最后一个选项”……它奏效了！

这是代码`- (IBAction)Btn_SearchAction:(id)sender`

```
NSResponder *firstResponder = [[NSApp keyWindow] firstResponder];
if ([firstResponder isKindOfClass:[NSText class]] && [(NSText *)firstResponder delegate] == TextF_ResultLimit) {
    NSLog(@"SearchDelegate::Btn_SearchAction TextF_ResultLimit has focus, let's save it's value");
    [TextF_ResultLimit performClick:self];
}

NSLog(@"SearchDelegate::Btn_SearchAction SearchF_Name saving search value to recent history");
[SearchF_Name performClick:self]; 
```

# c++ - 提升异常的错误信息

> ID：12712764
> 
> 赞同：7
> 
> 时间：2012-10-03T16:26:29.677
> 
> 标签：c++, exception, boost

使用时[`boost::exception`](http://www.boost.org/doc/libs/1_51_0/libs/exception/doc/boost-exception.html)，知道异常携带什么数据的首选方法是什么？在[boost 文档](http://www.boost.org/doc/libs/1_51_0/libs/exception/doc/motivation.html)中，给出了以下示例：

```
catch( io_error & e )
    {
    std::cerr << "I/O Error!\n";

    if( std::string const * fn=get_error_info<file_name>(e) )
        std::cerr << "File name: " << *fn << "\n";

    if( int const * c=get_error_info<errno_code>(e) )
        std::cerr << "OS says: " << strerror(*c) << "\n";
    } 
```

这似乎有点尴尬，特别是如果异常通过很多层冒泡并且理论上有大量可用的元数据。所以我想记录每个异常类的可能错误信息是有意义的。然后我可能还需要一些函数的文档，关于异常中可能包含哪些信息。最后，我觉得我在文档中具有完全相同的结构，如果我只是使用类似以下结构的东西，我会在代码中拥有：

```
struct FileException {
  string* filename; // NULL or string
} 
```

然后我可以在 catch 块中更改此信息：

```
catch (FileException& e) {
  e.filename = filename;
  throw;
} 
```

这种简单的方法可以让我绕过大部分文档，并从所有安全性中获益（例如，不尝试从 获取文件名`MathException`）。然而人们使用boost。我缺少的动态方法有很大的优势吗？您如何在代码中记录错误信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T20:10:01.720

从非常高的层面，您可以参考该异常的诊断信息：http: [//www.boost.org/doc/libs/1_51_0/libs/exception/doc/diagnostic_information.html](http://www.boost.org/doc/libs/1_51_0/libs/exception/doc/diagnostic_information.html)

这将打印异常携带的所有内容（以及更多内容）。我不确定是否有办法单独获取所有内部内容......

从例子：

```
example_io.cpp(70): Throw in function class boost::shared_ptr<struct _iobuf> __cdecl my_fopen(const char *,const char *)
Dynamic exception type: class boost::exception_detail::clone_impl<struct fopen_error>
std::exception::what: example_io error
[struct boost::errinfo_api_function_ *] = fopen
[struct boost::errinfo_errno_ *] = 2, "No such file or directory"
[struct boost::errinfo_file_name_ *] = tmp1.txt
[struct boost::errinfo_file_open_mode_ *] = rb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:34:24.273

如果您可以更改或设计您的异常以包含描述错误所需的内容，请按照您的意愿进行操作。但是如果您的代码没有生成异常，或者您在生成错误时无权访问错误信息，那么您需要`error_info`. 例如，假设我们有一个`read`自由函数，它从一个不包含文件名的 C++ 文件对象中读取数据，如下所示：

```
void read( file& fp, std::vector<unsigned char>& buf ) {
    if( fread(&buf[0], 1, buf.size(), fp.getFile()) == -1 ) {
        // I don't know the file name, what should I do here??
        boost::throw_exception( io_error() );
    }
}

try {
    file fp( "/path/to/file" );
    // do some thing with fp
    read( fp, buffer );
} catch( io_error& e ) {
    e << file_name( "/path/to/file" ); // here I can provide file name
    throw;
} 
```

正如您所看到`error_info`的那样，我必须以增量方式将数据添加到错误中，但是如果在抛出站点上我有所有必需的信息，那么我可以将这些信息嵌入到异常类中并避免使用`error_info`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T20:15:18.770

“动态方法”的优点是文件名不仅与 FileException 对象相关。例如，如果您打开一个包含数学表达式的脚本文件，该表达式在解析时会引发 MathException，您仍然希望该异常带有文件名。一般来说，throw 站点和 catch 站点之间的调用堆栈无法知道可能通过它的所有可能类型的异常对象，但它通常具有应该存储在其中的相关信息。

# javascript - 等待加载多个 ExtJS 存储

> ID：12712765
> 
> 赞同：0
> 
> 时间：2012-10-03T16:26:37.073
> 
> 标签：javascript, extjs, store, extjs3

我在代码中的不同位置使用了多个商店 (JSON)。一种用途是根据某些条件将这些聚合到一个新商店中（其中已经有自己的数据）。

例如，我有两个商店：一个包含 position_id、position_name，另一个包含 role_id、role_name。现在有另一个商店部分初始化，我想使用两个先例商店来完成它。

例如：StoreRoles：role_id、role_value StorePositions：position_id、position_value StoreLineup：lineup_id、参与者、role_id、role_value、position_id、position_value

在创建 StoreLineup 时，我希望 role_value 和 position_value 根据他们的 id 取值。

这有效，但并非总是如此。事实上，当 ExtJS 传递给 StoreLineup 初始化时，StoreRoles 和 StorePositions 并不总是准备好。最后，数据并不总是设置好，我在这一点上遇到了一些 JavaScript 错误（因为我在现有元素上使用了 get()）。

所以我想延迟 StoreLineup 的初始化。虽然没有加载其他两个商店，但 StoreLineup 一定也没有加载。它必须在其他商店创建完成后创建。

但是怎么做呢？我没有找到任何可行的解决方案（使用加载事件等）。目标是在 GridPanel 中呈现完整的 StoreLineup。

我使用 ExtJS 3.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:47:27.973

这在 4.x 中使用这样的商店[方法](https://stackoverflow.com/a/11006576/1062992)`isLoading`要容易得多。

但是对于 3.4，您可以使用负载侦听器来完成它。

在创建网格面板之前，在要加载的所有商店上附加一个负载侦听器。

在侦听器中执行以下操作：

1.  将加载的存储放入数组中，您可以将数组附加到网格的父容器，使其不具有全局范围。比如`myGridPanelsContainer.loadedStoresArray`什么的。

2.  检查是否所有需要的商店现在都在里面`myGridPanelsContainer.loadedStoresArray`

3.  如果他们是然后创建网格。

4.  如果没有，那么什么也不做。

当最后一个存储加载时，负载侦听器将创建网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T23:21:54.493

只是一个提示，使用 Ext.util.MixedCollection 代替数组会更方便。

```
Ext.define('My.app.StoreLoader', {
    extend: 'Ext.util.MixedCollection',
    singleton: true,
    register: function (item) {
        this.add(item);
    },
    unregister: function (item) {
        this.remove(item);
    },
    getKey: function (o) {
        return o.instanceId;
    },
    storeloadCallback: function (id, data) {
        var item = this.get(id);
        if (item) {
           this.unregister(item);

            //do more stuff if needed, like fire custom events, etc
       }
    }
}); 
```

[这个例子基于来自Ext4All](http://ext4all.com/post/extjs-4-multiple-file-upload)的惊人的“多文件上传器”

这里使用相同的原理，但不是存储加载，而是文件上传，尽管我们的行为非常相似。

# php - 从 Magento 的子类别列表中获取名称和图像

> ID：12712768
> 
> 赞同：0
> 
> 时间：2012-10-03T16:26:49.440
> 
> 标签：php, magento, magento-1.7

我正在尝试获取 Magento 类别的所有子类别并显示它们的名称和图像。

到目前为止，我有：

```
$children = Mage::getModel('catalog/category')->getCategories(28);

foreach ($children as $category) {
    echo "name: " . $category->getName() . "<br>"; 
    echo "image: " . $category->getImageUrl() . "<br>"; 
} 
```

`$category->getName()`有效，但`$category->getImageUrl()`似乎没有。

我正在关注目录/类别模型的[Magento 文档](http://docs.magentocommerce.com/)参考（请参阅顶部的 Mage:Catalog 和侧面的 Mage_Catalog_Model_Category）。

它清楚地表明这`string getImageUrl ()`是该类的可用方法，但是我显然不能调用它。

我想知道为什么在上面这个方法不可用，更一般地说，为什么很多方法似乎不能从一个类中使用，所以我可以理解如何在未来解决这些重复出现的问题.

所以，我的问题是，上面需要什么才能使该`getImageUrl`方法可用，并且通常我如何确定需要添加什么才能使文档中的其他方法在 Magento 框架中“默认”不可用？

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:34:43.627

试试看：-

```
<?php
    //gets all sub categories of parent category
    $cats = Mage::getModel('catalog/category')->load(6)->getChildren();
    $catIds = explode(',',$cats);

    $categories = array();
    foreach($catIds as $catId) {
        $category = Mage::getModel('catalog/category')->load($catId); 
        $categories[$category->getName()] = array(
            'url' => $category->getUrl(),
            'img' => $category->getImageUrl()
        );
    }

    ksort($categories, SORT_STRING);
?>
    <ul>
        <?php foreach($categories as $name => $data): ?>
            <li>
                <a href="<?php echo $data['url']; ?>" title="<?php echo $name; ?>">
                    <img class="cat-image" src="<?php echo $data['img']; ?>" />
                </a>
            </li>   
        <?php endforeach; ?>
    </ul> 
```

# bazaar - bzr 日志：仅获取提交消息

> ID：12712770
> 
> 赞同：2
> 
> 时间：2012-10-03T16:27:02.147
> 
> 标签：bazaar

有没有办法从集市存储库中获取日志（如使用`bzr logs -v`），但只有提交消息。

默认情况下，对于每个提交，您都有：
修订号
提交者名称
分支 昵称
时间戳
消息
文件已修改。

我只想要消息。

* * *

在某些情况下，如果有其他方法可以做我想做的事：
当我编写发行说明时，我会将提交消息获取到最后一个发布版本。在用用户友好的英语重写提交消息之前，我需要过滤所有其他元素。这很无聊，我更喜欢电脑为我做这件事:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T08:15:26.977

`bzr log --short`, `bzr log --line`,`bzr log --gnu-changelog`或只是`bzr log --gnu`.

参见`bzr log --usage`和`bzr help log-formats`。

可以通过插件添加自定义日志格式化程序。

# git - git 获取 --source 中的 --format 信息

> ID：12712775
> 
> 赞同：5
> 
> 时间：2012-10-03T16:27:15.953
> 
> 标签：git, git-log

我正在尝试以非常特定的格式格式化我的 git 日志。

我最初使用`git log --format="%H,%an,%ae,%ad,%p"`它会产生以下输出（对于每个提交）：

```
b05f827b41856e6f4bcfba20c32f58434ce3a5a6,Kevin Jalbert,kevin.j.jalbert@gmail.com,Fri Sep 7 14:43:16 2012 -0400,206f23d 
```

现在我正在尝试获取每个提交的参考（即标签/分支）信息。我可以使用该`git log --source`命令查看此信息，这正是我想要的（即，位于提交 SHA 之后的 ref）：

```
commit 84deec66f94085ee3a0e6f6204f06296d7a1a903 refs/remotes/origin/HEAD
Author: Kevin Jalbert <kevin.j.jalbert@gmail.com>
Date:   Fri Sep 21 17:02:33 2012 -0400

    commit message

commit f1e1b8d11defc48839557db5e54a5a6f7ffe6cad refs/heads/issue_5
Author: Kevin Jalbert <kevin.j.jalbert@gmail.com>
Date:   Thu Sep 13 15:34:36 2012 -0400

    commit message

commit d7acdbd957d9b477f8849fd5a37882cdd78d8e1f refs/tags/v0.3.0
Author: Kevin Jalbert <kevin.j.jalbert@gmail.com>
Date:   Wed Sep 12 16:48:46 2012 -0400

    commit message 
```

我想要做的是在我的原始`--format="..."`命令末尾包含这些信息，这样我就会得到如下所示的输出：

```
 b05f827b41856e6f4bcfba20c32f58434ce3a5a6,Kevin Jalbert,kevin.j.jalbert@gmail.com,Fri Sep 7 14:43:16 2012 -0400,206f23d,refs/remotes/origin/HEAD 
```

我似乎找不到任何基于标志引用提交的分支/标签/引用的*格式*`--source`占位符。我只是错过了正确的占位符吗？或者是否有另一种方法来格式化/显示参考以及我想要的自定义信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T23:41:40.383

我也在找这个。我无法找到标志作为其中的一部分，`git-log`但以下将起作用，在 CSV 行的末尾添加一列：

```
$ git log --no-color --source --oneline --all | while read sha1 srcref subject
> do echo "$(git log -1 --format="%H,%an,%ae,%ad,%p" $sha1),$source"
> done 
```

的格式`--oneline`是`%h %<our missing format character> %s`什么时候`--source`提供的，这样我们就可以部分地到达那里。然后将 SHA1`git log -1`与其他格式说明符一起反馈给我们，让我们完成剩下的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-30T21:19:22.887

使用 Git 2.21（2019 年第一季度），自定义用户格式 " `log --format`" 学习`%S`原子代表遍历到达提交的尖端，即`--source`.
我当时在“ [Git log placeholder for branch](https://stackoverflow.com/a/54846615/6309) ”中提到了它。

请参阅[Issac Trotts ( ) 的](https://github.com/ijt)[提交 ad6f028](https://github.com/git/git/commit/ad6f028f067673cadadbc2219fcb0bb864300a6c)（2019 年 1 月 11 日[）](https://github.com/ijt)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 a562a11](https://github.com/git/git/commit/a562a119833b7202d5c9b9069d1abb40c1f9b59a))^(中，2019 年 1 月 29 日）)[`ijt`](https://github.com/ijt)
^([`gitster`](https://github.com/gitster))

> ## [`log`](https://github.com/git/git/commit/ad6f028f067673cadadbc2219fcb0bb864300a6c): 添加 %S 选项（如`--source`）到`log --format`
> 
> ^(签字人：Issac Trotts)
> 
> 让写作成为可能
> 
> ```
> git log --format="%H,%S" 
> ```
> 
> 最后是`%S`一个新的占位符，它**打印出**每个提交的参考（标签/分支）。
> 
> 使用`%d`似乎是一种替代方法，但它只显示分支中最后一次提交的引用。

例子：

```
C:\Users\VonC\git\git>git log --format="%H,%S" origin/maint
53a06cf39b756eddfe4a2a34da93e3d04eb7b728,origin/maint
67af91c47a6672b99e1f742123415f96cbafd19a,origin/maint
a7312d1a28ff3ab0a5a5427b35f01d943103cba8,origin/maint 
```

并且，使用您的格式（带有附加`%S`）`--format="%H,%an,%ae,%ad,%p,%S"`：

```
C:\Users\VonC\git\git>git log --format="%H,%an,%ae,%ad,%p,%S" origin/maint
53a06cf39b756eddfe4a2a34da93e3d04eb7b728,Johannes Schindelin,johannes.schindelin@gmx.de,Wed Dec 4 23:10:12 2019 +0100,67af91c47a,origin/maint
67af91c47a6672b99e1f742123415f96cbafd19a,Johannes Schindelin,johannes.schindelin@gmx.de,Wed Dec 4 23:09:11 2019 +0100,da72936f54 a7312d1a28,origin/maint
a7312d1a28ff3ab0a5a5427b35f01d943103cba8,Johannes Schindelin,johannes.schindelin@gmx.de,Wed Dec 4 23:07:46 2019 +0100,7fd9fd94fb,origin/maint 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T20:30:38.883

`%d`可能是您正在寻找的 - 它会显示每个提交引用的分支/标签。

# javascript - jQuery 工具可滚动宽度 100%

> ID：12712781
> 
> 赞同：0
> 
> 时间：2012-10-03T16:27:37.043
> 
> 标签：javascript, jquery, css, jquery-tools, fluid

我正在开发一个可滚动的（jQuery 工具）滑块，其中每张幻灯片都有一个宽背景图像（以便覆盖大多数屏幕宽度），但现在我坚持让可滚动滑块 100% 宽。

如何使用最小宽度 960px 使其流畅到 100%？

我使用了这个[例子中的代码](http://jquerytools.org/demos/scrollable/one-sized.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T16:05:02.893

I just found this: [http://cooshtee.com/blog/2013/04/making-jquery-tools-scrollable-responsive/](http://cooshtee.com/blog/2013/04/making-jquery-tools-scrollable-responsive/) Hope this will help!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:55:49.127

你有没有尝试过：

```
.css-panes {
  min-width: 960px;
  width: 100%;
} 
```

如果是这样，您面临的问题是什么？

# sql-server - FROM 子句中的 SQL 子查询

> ID：12712782
> 
> 赞同：5
> 
> 时间：2012-10-03T16:27:39.447
> 
> 标签：sql-server, subquery, dynamic-sql

我知道子查询在使用不正确时对性能非常不利。我有一个非常具体的场景，用户需要从表中检索一组过滤的记录。将有各种各样的过滤器可用，它们必须支持组合。此外，一组开发人员将定期创建新的过滤器。

我不喜欢一个不断增长的、具有大量参数的单一 SQL 查询的想法。我不喜欢一堆具有相同 SELECT 语句和不同 WHERE 子句的自主 SQL 查询的想法。我确实喜欢动态 SQL 查询的想法，但我不确定应该使用哪种结构。我可以想到 4 个基本选项：（如果我还缺少更多，请不要犹豫，提出建议）

1.  “INNER JOIN”：通过 INNER JOINS 连接过滤器以过滤结果。
2.  “FROM 子查询”：通过 FROM 语句中的子查询堆栈过滤器。
3.  “WHERE 子查询”：通过 WHERE 子句中的子查询连接过滤器。
4.  “INNER JOIN 子查询”：一个奇怪的混合体。

我创建了一个 SQL 小提琴来演示（和描述）它们：

> [http://sqlfiddle.com/#!3/4e17b/9](http://sqlfiddle.com/#!3/4e17b/9)

以下是小提琴的摘录，以提供我在说什么的想法：

```
------------------------------------------------------------------------
--THIS IS AN EXCERPT FROM THE SQL FIDDLE -- IT IS NOT MEANT TO COMPILE--
------------------------------------------------------------------------

--
--"INNER JOIN" test
      SELECT COUNT(*) 
      FROM 
            @TestTable Test0
            INNER JOIN @TestTable Test1 ON Test1.ID=Test0.ID AND Test1.ID % @i = 0
            INNER JOIN @TestTable Test2 ON Test2.ID=Test0.ID AND Test2.ID % @j = 0
            INNER JOIN @TestTable Test3 ON Test3.ID=Test0.ID AND Test3.ID % @k = 0

--
--"FROM subqueries" test   
      SELECT COUNT(*) FROM (
            SELECT * FROM (
                  SELECT * FROM (
                        SELECT * FROM @TestTable Test3 WHERE Test3.ID % @k = 0
                  ) Test2 WHERE Test2.ID % @j = 0
            ) Test1 WHERE Test1.ID % @i = 0
      ) Test0

--
--"WHERE subqueries" test
      SELECT COUNT(*) 
      FROM @TestTable Test0
      WHERE 
            Test0.ID IN (SELECT ID FROM @TestTable Test1 WHERE Test1.ID % @i = 0)
            AND Test0.ID IN (SELECT ID FROM @TestTable Test2 WHERE Test2.ID % @j = 0)
            AND Test0.ID IN (SELECT ID FROM @TestTable Test3 WHERE Test3.ID % @k = 0)

--
--"INNER JOIN subqueries" test
    SELECT COUNT(*) 
    FROM 
        TestTable Test0
        INNER JOIN (SELECT ID FROM TestTable WHERE ID % @i = 0) Test1 ON Test1.ID=Test0.ID
        INNER JOIN (SELECT ID FROM TestTable WHERE ID % @j = 0) Test2 ON Test2.ID=Test0.ID
        INNER JOIN (SELECT ID FROM TestTable WHERE ID % @k = 0) Test3 ON Test3.ID=Test0.ID

--
--"EXISTS subqueries" test
    SELECT COUNT(*) 
    FROM TestTable Test0
    WHERE 
        EXISTS (SELECT 1 FROM TestTable Test1 WHERE Test1.ID = Test0.ID AND Test1.ID % @i = 0)
        AND EXISTS (SELECT 1 FROM TestTable Test2 WHERE Test2.ID = Test0.ID AND Test2.ID % @j = 0)
        AND EXISTS (SELECT 1 FROM TestTable Test3 WHERE Test3.ID = Test0.ID AND Test3.ID % @k = 0) 
```

排名（执行测试的时间）

SQL小提琴：

```
|INNER JOIN|FROM SUBQUERIES|WHERE SUBQUERIES|INNER JOIN SUBQUERIES|EXISTS SUBQUERIES|
-------------------------------------------------------------------------------------
|     5174 |           777 |           7240 |                5478 |            7359 | 
```

本地环境：（没有缓存：每次测试前清除缓冲区）

```
|INNER JOIN|FROM SUBQUERIES|WHERE SUBQUERIES|INNER JOIN SUBQUERIES|EXISTS SUBQUERIES|
-------------------------------------------------------------------------------------
|     3281 |          2851 |           2964 |                3148 |            3071 | 
```

本地环境：（带缓存：连续运行两次查询并记录第2次运行的时间）

```
|INNER JOIN|FROM SUBQUERIES|WHERE SUBQUERIES|INNER JOIN SUBQUERIES|EXISTS SUBQUERIES|
-------------------------------------------------------------------------------------
|      284 |            50 |           3334 |                 278 |             408 | 
```

每种解决方案都有优点/缺点。WHERE 子句中的子查询性能非常糟糕。FROM 子句中的子查询具有相当不错的性能（实际上它们通常性能最好）（注意：我相信这种方法会否定索引的好处？）。INNER JOIN 具有相当不错的性能，尽管它引入了一些有趣的范围问题，因为与子查询不同，INNER JOIN 将在相同的上下文中运行（必须有一个中间系统来避免表别名的冲突）。

总的来说，我认为最干净的解决方案是 FROM 子句中的子查询。过滤器很容易编写和测试（因为与 INNER JOIN 不同，它们不需要提供上下文/基本查询）。

想法？这是子查询的有效用法还是等待发生的灾难？

更新（2012/10/04）：

*   更新了 SQL Fiddle 以包含对“EXISTS”方法的测试
*   从 SQL Fiddle 和本地环境添加了性能测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:28:11.007

如果您总是要应用“和”逻辑，则内部联接可能是一种好方法（我是在概括，但它会因很多因素而异，包括您的表大小和索引等）。如果您希望能够应用“和”或“或”过滤，则需要使用其他解决方案之一。

此外，您应该使用存在子句测试性能：

```
SELECT COUNT(*) 
      FROM @TestTable Test0
      WHERE 
            EXISTS (SELECT 1 FROM @TestTable Test1 WHERE Test0.ID = Test1.ID AND Test1.ID % @i = 0)
            EXISTS (SELECT 1 FROM @TestTable Test2 WHERE Test0.ID = Test2.ID AND Test2.ID % @j = 0)
            EXISTS (SELECT 1 FROM @TestTable Test3 WHERE Test0.ID = Test3.ID AND Test3.ID % @k = 0) 
```

# php - 生成 128 位十六进制数

> ID：12712783
> 
> 赞同：3
> 
> 时间：2012-10-03T16:27:40.923
> 
> 标签：php

我想在 PHP 中生成一个随机的 128 位十六进制数。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T18:20:45.090

我知道的最简单的：

```
$str = openssl_random_pseudo_bytes(16); 
```

您还可以通过在每个循环中附加字符来构建 16 个字符的字符串：

```
for ($i = 0; $i != 16; ++$i) {
    $str .= chr(mt_rand(0, 255));
} 
```

要将其转换为十六进制，请使用`bin2hex($str)`. [或者，按照我之前写的答案](https://stackoverflow.com/a/15875555/1338292)中的描述生成一个 UUID v4 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-28T01:38:42.903

从 PHP 7 开始，`random_bytes`这是生成随机数据的最佳方法，但您可以使用[random_compat](https://github.com/paragonie/random_compat)`random_bytes()`库为旧版本的语言添加向前兼容的支持。该库基于*最佳*回退方法定义函数，包括另外提到的`openssl_random_pseudo_bytes()`.

```
// generates 64-character (256-bit) key
function generate_256bit() {
    return bin2hex(random_bytes(32));
}

// generates 32-character (128-bit) key
function generate_128bit() {
    return bin2hex(random_bytes(16));
}

// 256-bit: f3af82d0bedc3a91b3b5a51beefe553e33a17912de45d3302ed0216ad867cd55
// 128-bit: 4d7245e2d61cfcce2feafd7e687cdb0e 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-28T19:29:17.083

自 PHP 5.3 起：

```
$rand128_hex = bin2hex(openssl_random_pseudo_bytes(16)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T19:07:49.440

```
<?php
function string_random($characters, $length)
    {
    $string = '';
    for ($max = mb_strlen($characters) - 1, $i = 0; $i < $length; ++ $i)
        {
        $string .= mb_substr($characters, mt_rand(0, $max), 1);
        }
    return $string;
    }

// 128 bits is 16 bytes; 2 hex digits to represent each byte
$random_128_bit_hex = string_random('0123456789abcdef', 32);
// $random_128_bit_hex might be: '4374e7bb02ae5d5bc6d0d85af78aa2ce' 
```

# objective-c - UIWebView 缓存页面的问题

> ID：12712785
> 
> 赞同：0
> 
> 时间：2012-10-03T16:27:47.483
> 
> 标签：objective-c, ios, uiwebview

我正在将远程 html 页面加载到 UIWebView 中，该页面保存在我的 mac book pro 上，并通过 OS X 的内置 Apache 服务器提供。

我注意到，如果我在 UIWebView 中加载页面，然后对页面进行更改并重新加载，则不会反映更改，因此它可能被缓存在某处。即使我退出包含 UIWebView 的应用程序并重新启动它，我也会得到这种行为。

缓存的网页在哪里？是否可以强制 UIWebView 获取最新更新的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:31:38.077

试试这个 -

`[[NSURLCache sharedURLCache] removeCachedResponseForRequest:NSURLRequest];`

这将删除特定请求的缓存响应。还有一个调用将删除 UIWebView 上运行的所有请求的所有缓存响应：

`[[NSURLCache sharedURLCache] removeAllCachedResponses];`

# c# - ListView 排序未设置 SortExpression 和 SortDirection

> ID：12712787
> 
> 赞同：4
> 
> 时间：2012-10-03T16:27:55.813
> 
> 标签：c#, asp.net, listview, sorting

我正在研究 a`ListView`并且感觉在实现排序时我在做一些根本错误的事情。我无法依赖 and 的值`List1.SortExpression`，`List1.SortDirection`而是求助于隐藏字段，因为`List1.SortExpression`它始终为空白且`List1.SortDirection`始终为`SortDirection.Ascending`。

在我的 .aspx 页面上：（编辑掉不相关的代码）

```
<asp:HiddenField runat="server" ID="hdnSortExpression" />
<asp:HiddenField runat="server" ID="hdnSortDirection" />

<asp:ListView runat="server" ID="List1"  
    OnItemCommand="List1_ItemCommand"
    OnSorting="List1_Sorting">
<LayoutTemplate>
    <table border="0" cellpadding="1">
    <thead>
    <tr>
        <th><asp:LinkButton runat="server" ID="BtnCompanyCode" CommandName="Sort" CommandArgument="CompanyCode" Text="Company Code" /></th>
        ... more columns ...
    </tr>
    </thead>

    <tbody>
        <tr runat="server" id="itemPlaceholder"></tr>
    </tbody>
    </table>
</LayoutTemplate> 
```

在我的代码后面：

```
protected void List1_ItemCommand(object sender, ListViewCommandEventArgs e)
{
    // empty for now
}

protected void List1_Sorting(object sender, ListViewSortEventArgs e)
{
    SortDirection sortDirection;
    String sortExpression = e.SortExpression;   // how we need to do it in Sorting

    if (hdnSortExpression.Value.ToLower() == sortExpression.ToLower())
        sortDirection = hdnSortDirection.Value == SortDirection.Ascending.ToString() ? SortDirection.Descending : SortDirection.Ascending;
    else
        sortDirection = SortDirection.Ascending;

    DoSortList(sortExpression, sortDirection);  // this sets column headings' sort indicator arrows
    List1_BindData(sortExpression, sortDirection);  // sets DataSource and calls DataBind()

    // the hacky part: setting hidden fields to store sortExpression and sortDirection
    hdnEligibilitySortExpression.Value = sortExpression;
    hdnEligibilitySortDirection.Value = sortDirection.ToString();
}

private void List1_BindData(String sortExpression, SortDirection sortDirection)
{
    List<SomeEntity> list = null;

    list = SomeEntity.GetBySsn(_ssn).ToList();  // methods generated by an ORM pointing to an Oracle database

    switch (sortExpression.ToLower())
    {
        case "CompanyCode":
        if (sortDirection == SortDirection.Ascending)
            List1.DataSource = list.OrderBy(o => o.CompanyCode);
        else
            List1.DataSource = list.OrderByDescending(o => o.CompanyCode);
        break;

        ... other cases ...
    }

    List1.DataBind();
} 
```

它可以正常工作——每一列都被正确排序，单击同一列会反转排序方向，但我必须得出结论，因为我不能依赖`SortDirection`and`SortExpression`属性，所以我的连接不正确。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:55:30.543

看看这个[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.sortdirection.aspx)。您会注意到 DataSource 是一个 SqlDataSource。这是 .Net 了解如何排序的 DataSource 类型之一。其他的，没有那么多。

这是另一篇指定 DataSource 类型的[MSDN 文章：](http://msdn.microsoft.com/en-us/library/sa88ktts%28v=vs.100%29.aspx)

> 为排序提供内置支持的数据源控件是 LinqDataSource、ObjectDataSource、SqlDataSource 和 AccessDataSource 控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:42:59.643

除了使用 e.SortDirection 之外，您可以像 List1.SortDirection 和 List1.SortExpression 那样将其从 ListView 中拉出来吗？

# django - 谁能更好地解释 Django 美味派的授权和身份验证？

> ID：12712792
> 
> 赞同：2
> 
> 时间：2012-10-03T16:28:07.270
> 
> 标签：django, tastypie

我在创建一些非常简单的东西时有点卡住了 - 一个新用户。

我脑海中的工作流程是这样的：用户使用 api 密钥发送查询。检查用户是否存在。如果没有，请创建用户。

这是我的 UserSignUpResource：

```
 class UserSignUpResource(ModelResource):

        class Meta:
            object_class = User
            queryset = User.objects.all()
            allowed_methods = ['post']
            include_resource_uri = False
            resource_name = 'newuser'
            excludes = ['is_active','is_staff','is_superuser']
            authentication = ApiKeyAuthentication()
            authorization = DjangoAuthorization()
            models.signals.post_save.connect(create_api_key, sender=User)

        def obj_create(self,bundle,request=None,**kwargs):
            try:
                bundle = super(UserSignUpResource, self).obj_create(bundle,request,**kwargs)
                bundle.obj.set_password(bundle.data.get('password'))
                bundle.obj.save()
            except IntegrityError:
                raise BadRequest('The username already exists')
            return bundle
    def apply_authorization_limits(self,request,object_list):
        return object_list.filter(id=request.user.id,is_superuser=True) 
```

我的 API 调用：

```
curl -v -X POST -d '{"username" : "puck", "password" : "123456"}' -H "Authorization: ApiKey puck:link" -H "Content-Type: application/json" http://127.0.0.1:8000/api/v1/newuser/ 
```

我收到 401 错误。那正是因为我不知道如何创建 API 密钥以便我可以使用它来创建新用户。

我可以在 django admin 中看到一个 api 列，但它只允许我为每个用户创建一个 api 密钥。因此，这是如何工作的？我如何使它工作？

关于教程的信息很少。几乎没有任何关于它的博客。你能帮忙的话，我会很高兴。我挣扎得很厉害。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T21:00:40.390

您可以使用以下方法创建 ApiKey：

```
ApiKey.objects.create(user=user) 
```

（您也可以通过管理界面执行此操作，但请注意保存空内联实际上不会保存它，即：更改 api 键内联的日期/时间字段）。

拥有 api_key 后，这应该可以工作：

```
curl -v -X POST -d '{"username" : "puck", "password" : "123456"}' -H "Content-Type: application/json" http://127.0.0.1:8000/api/v1/newuser/?username=user&api_key=API_KEY 
```

# java - 文件安装程序包所需的方法/类

> ID：12712794
> 
> 赞同：1
> 
> 时间：2012-10-03T16:28:09.140
> 
> 标签：java, file, copy, paste, delete-file

我正在寻找可以帮助我做几件事的代码片段/方法/类（需要几个不同的类和方法）

这是在java中，我想把它保存在java中

需要做什么：

1.  创建外部文件夹（可能在另一个驱动器上，在 %appdata% 文件夹中的目录下）
2.  复制文件，将不同的文件类型和名称发送到不同的文件夹
3.  检测某些文件夹是否存在
4.  创建新文件夹
5.  删除 .jar/delete 文件中的文件（都可以）
6.  删除文件夹的内容

我正在寻找实现这些目标所需的类和方法。有一些示例方法调用也将有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:29:43.213

我认为[java.io.File](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)将满足大多数要求。另请参阅[Apache Commons FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)以获得更高级别的文件系统接口。

[java.util.jar](http://docs.oracle.com/javase/6/docs/api/java/util/jar/package-summary.html)将满足您的 Jar 文件要求。

# flash - 从 Flash 中的 .3gp 获取定时嵌入文本

> ID：12712803
> 
> 赞同：1
> 
> 时间：2012-10-03T16:28:43.523
> 
> 标签：flash, flash-cs5, closed-captions

是否可以从 .3GPP 视频文件中获取隐藏式字幕`Flash CS5`？

我正在与`closed captioning`in合作`Flash`，只是想知道是否有更简单的做事方式。我认为将定时文本嵌入视频文件本身要容易得多，但我不知道如何`Flash`从文件中检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:00:28.070

我认为您正在搜索[NetStream.onTextData](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html#event%3aonTextData) “事件”，这应该可以让您访问嵌入式定时文本数据。

# asp.net - asp.net 下拉列表代码跨多个页面重用

> ID：12712807
> 
> 赞同：1
> 
> 时间：2012-10-03T16:28:59.617
> 
> 标签：asp.net

我已经完成了一些经典的 ASP，但对 ASP.NET 来说真的很新，所以如果可以的话，请给我一些步骤。

我尝试做的是在不同页面上的多个表单中重复使用相同的下拉列表代码。

我有 Form1.aspx 页面，它有：

```
<asp:DropDownList ID="Vendor" runat="server" 
AutoPostBack="True" 
onselectedindexchanged="ddlVendor_SelectedIndexChanged">
</asp:DropDownList> 
```

然后文件 Form1.aspx.cs 页面后面的代码有这个来构建供应商下拉框的列表。

```
private void FillVendor()
{
    string strConn = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
    SqlConnection con = new SqlConnection(strConn);
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = con;
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "SELECT VendorID, VendoName FROM Vendor";
    DataSet objDs = new DataSet();
    SqlDataAdapter dAdapter = new SqlDataAdapter();
    dAdapter.SelectCommand = cmd;
    con.Open();
    dAdapter.Fill(objDs);
    con.Close();
    if (objDs.Tables[0].Rows.Count > 0)
    {
        Vendor.DataSource = objDs.Tables[0];
        Vendor.DataTextField = "VendorName";
        Vendor.DataValueField = "VendorID";
        Vendor.DataBind();
        Vendor.Items.Insert(0, "--Select--");
    }
    else
    {
        lblMsg.Text = "No Vendor found";
    }

} 
```

假设我有另一个 form2.aspx 页面和 form2.aspx.cs 页面。此页面将使用与 form1.aspx 页面相同的下拉列表。我不想在 form2.aspx 和 form2.aspx.cs 中再次重写相同的代码。有没有更好的方法来跨多个页面重复使用这些代码？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:31:48.003

1.  您可以为自定义下拉列表创建用户控件
2.  您可以编写接受 DropdownList 的方法，将标签作为参数，然后设置属性。

# jquery - HTML iFrame 隐藏/显示

> ID：12712814
> 
> 赞同：0
> 
> 时间：2012-10-03T16:29:15.127
> 
> 标签：jquery, html, iframe, file-upload, upload

我的网站上有一个带有 iframe 的上传选项。所以这是我的html：

```
<iframe name="message" src="upload.php"></iframe>
<form action="upload.php" method="post" enctype="multipart/form-data" target="message">
    <input type="file" name="file">
    <input type="submit">
</form> 
```

现在的问题是当他们转到网站的上传部分时 iframe 是可见的。我希望它是不可见的，直到它收到来自 upload.php 的响应，我希望它显示消息，就像你可以阅读然后关闭的警报框一样。我该怎么做呢？我猜这涉及到一些jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:37:50.353

要隐藏 iframe（或其他 HTML 元素），只需`style="display:none;"`在该 HTML 标记中添加：。

然后，您可以在 PHP 响应中添加一个 javascript 代码以从父页面调用函数。像这样的东西：

```
// ..
echo '<script>
parent.functionName();
</script>'; 
```

在该函数中添加您想要在 php 响应之后执行的 JavaScript 指令。

# audio - 如何进行单声道到立体声的转换？

> ID：12712815
> 
> 赞同：2
> 
> 时间：2012-10-03T16:29:16.343
> 
> 标签：audio, pcm, resampling

我正在使用 libswresample 将任何 PCM 格式重新采样为 44.1kHz、16bit int、立体声。

我正在对生成的音频流进行一些音频音量分析，我发现如果我有 44.1kHz、16 位 int 单声道作为源，我有大致的公式：

```
leftSample = sourceSample / sqrt(2);
rightSample = sourceSample / sqrt(2); 
```

但我期待：

```
leftSample = sourceSample;
rightSample = sourceSample; 
```

（如果源是立体声，我只是有`leftSample = leftSourceSample; rightSample = rightSourceSample;`。）

我的期望来自几个方面：

1.  我自己的直接解决方案可能就是这样。
2.  我四处搜索了一下，其他人似乎也在做同样的事情，例如[这里](https://stackoverflow.com/questions/6292905/mono-to-stereo-conversion)。
3.  在一个非常常见的 ReplayGain 实现中（实际上我知道的唯一一个，基本上到处都在使用，我认为最初来自 mp3gain；一个副本可以在[这里](https://github.com/avuserow/ffmpeg-replaygain/blob/master/gain_analysis.c)看到），它也这样做：

    ```
    switch ( num_channels) {
    case  1: right_samples = left_samples;
    case  2: break;
    default: return GAIN_ANALYSIS_ERROR;
    } 
    ```

    这是特别的。相关，因为 ReplayGain 是由这个实现使用单声道的参考声音（粉红噪声，可以在[这里](https://github.com/avuserow/ffmpeg-replaygain/raw/master/ref_pink.wav)下载）校准的。

    在 ReplayGain 规范中，它也是这样计算的（参见[此处](http://replaygain.hydrogenaudio.org/proposal/rms_energy.html)）。

在我尝试自己实现 ReplayGain 之后，我的困惑就出现了，我偶然发现了这一点。

所以，一些问题：

1.  为什么 libswresample 会这样做？
2.  这是 libswresample 中的预期还是错误？（我试图从源头（例如[这里](https://github.com/FFmpeg/FFmpeg/blob/master/libswresample/swresample.c)）理解，但我还没有完全理解它。）我[在这里](https://ffmpeg.org/trac/ffmpeg/ticket/1792)添加了一个错误报告。
3.  什么是“正确”的解决方案？
4.  其他玩家在做什么？
5.  如果您向其提供单声道样本，常见的声卡会做什么？

（我现在也在[avp.stackexchange](https://video.stackexchange.com/questions/4910/how-to-do-mono-to-stereo-conversion)上发布了这个问题；也许这是一个更好的地方来询问这个问题，不确定。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T02:09:20.167

该实现是将单声道信号“平移”到立体声场的一种正确实现。如果您平移，而不是一直向左或一直向右，您希望信号强度与在中间平移一样，因此向左平移将是：

```
//left panning
leftSample = sourceSample;
rightSample = 0;
//right panning
leftSample = 0;
rightSample = sourceSample;
//center panning (same power as hard left/right conversion/)
leftSample = sourceSample * sqrt(2)/2;
rightSample = sourceSample * sqrt(2)/2; 
```

但是，如果您是从单声道转换为立体声，那么您的直觉是正确的。没有理由降低电平，因为您不会将居中信号与平移信号进行比较。最好的方法是让信号保持最大强度：

```
//mono to stereo conversion
leftSample = sourceSample;
rightSample = sourceSample; 
```

他们也可能会留下一些 s/r 转换后的增益变化，但水平似乎是任意的。

# c++ - libjpeg：解压缩和裁剪

> ID：12712819
> 
> 赞同：3
> 
> 时间：2012-10-03T16:29:35.693
> 
> 标签：c++, crop, libjpeg

我有下一个用于 JPEG 图像解压缩的标准代码，它基于`libjpeg`.

```
jpeg_decompress_struct cinfo;
// ...Set error manager and data source...
jpeg_read_header(&cinfo, TRUE);
jpeg_start_decompress(&cinfo);
while (cinfo.output_scanline < cinfo.output_height) {
    JSAMPLE* scanlines[1];
    // ...Set target pointer for scanline...
    jpeg_read_scanlines(&cinfo, scanlines, 1);
}
jpeg_destroy_decompress(&cinfo); 
```

我想读取图像的一部分，用矩形裁剪：

```
// struct RECT {
//     int left;
//     int top;
//     int right;
//     int bottom;
// };
RECT cropRect; // Coordinates of the crop rectangle relative to the output image size 
```

我应该在下面的代码中修改什么来告诉`libjpeg`立即裁剪图像？

这就是我可以实现它的方式：

1.  忽略第一`top - 1`行；
2.  对于接下来的每一`bottom - top`行：1）将扫描线读取到临时缓冲区；2) 将列范围内的像素从`[left, right)`临时缓冲区复制到目标缓冲区。
3.  中止减压。

但是这段代码是多余的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:10:20.260

性能方面，特别是如果原始图像是高分辨率并且您需要相对较小的一部分，您可能应该首先[无损裁剪/修剪图像而不解压缩它](http://www.ben.com/jpeg/)，这可以在 16x16 像素（8x8？）粒度和快速，然后解压缩跳过边缘的几行和像素。您可能还喜欢这种方法，以减少用于操作的内存量。

如果你只是剪裁一点，那么开始完全减压的最初计划可能是最好的。这里几乎没有冗余。

# sql-server - 奇怪的 SQL Server 行为

> ID：12712822
> 
> 赞同：0
> 
> 时间：2012-10-03T16:29:47.077
> 
> 标签：sql-server, stored-procedures, maintenance-plan

我想要做的是使用执行 T-SQL 语句任务通过维护计划自动执行下面的存储过程。我看到的是，当此过程作为维护计划的一部分运行时，由于某种原因，添加的记录加倍，就好像 INSERT 语句运行了两次一样。这是踢球者，当它通过 Management Studio 手动执行时，它按预期运行，并且我将一组记录添加到表中。使用 TRUNCATE TABLE 作为解决方法似乎可以解决问题，但是当需要为 SQL 镜像准备数据库时，我会回到原点。

有没有人见过这种行为？此外，出于好奇，重建索引上的 100% 填充因子是有意的，因为此表上发生的唯一 I/O 是以下过程。

```
ALTER PROCEDURE [dbo].[usp_Populate_SearchTable]
AS
BEGIN
    UPDATE ut_Update_Status SET [status] = 1, lastUpdate = getdate();

    DELETE FROM ut_Permit_Lookup;
    DBCC CHECKIDENT ('dbo.ut_Permit_Lookup', RESEED, 0);
    -- OR
    --TRUNCATE TABLE ut_Permit_Lookup;

    INSERT INTO ut_Permit_Lookup (
        NUMBER_KEY,
        ADDR_FRACTION,
        PARCEL_NO,
        TYPE_TITLE,
        TypDesc,
        SUB_TYPE,
        Location,
        [DESCRIPTION],
        DATE_A,
        DATA_STATUS
    )
    SELECT a.NUMBER_KEY,
        a.ADDR_FRACTION,
        a.PARCEL_NO,
        a.TYPE_TITLE,
        a.TypDesc,
        a.SUB_TYPE,
        a.Location,
        SUBSTRING(a.[DESCRIPTION], 1, 275),
        a.DATE_A,
        a.DATA_STATUS
    FROM PERMPLUS.dbo.vw_Permit_WebLookup as a
    WHERE a.TYPE_CAT = 'BLDG'
        AND a.DATA_LEVEL = 'A'
        AND (a.CLASS <> 'NA' OR a.CLASS IS NULL);

    DBCC DBREINDEX ('dbo.ut_Permit_Lookup', idx_SearchIndex, 100);
    UPDATE ut_Update_Status SET [status] = 0;
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T19:18:24.663

好吧，我想提出一个我建议的正式答案......

我从来没有听说过这个问题。我遇到的维护计划虽然与您遇到的问题不同，但由于 SSMS 内部版本号低于我正在处理的实例。您没有说明您正在使用什么版本的 SQL，但如果它是 SQL 2008 或更高版本，您可以在[http://connect.microsoft.com/sqlserver](http://connect.microsoft.com/sqlserver)上提交一个连接项。

我可能会使用的唯一替代方法是仅使用 SQL 代理作业安排过程调用，看看是否得到相同的结果。我希望 SQL 代理作业会给出与您在查询窗口中从 SSMS 调用它相同的结果。

# facebook - Facebook 登录对话框在 iOS6 模拟器上不起作用

> ID：12712824
> 
> 赞同：6
> 
> 时间：2012-10-03T16:30:00.233
> 
> 标签：facebook, ios6, facebook-ios-sdk

我一直在将我的应用程序从旧的 Facebook SDK 转换为新的 Facebook SDK 3.1，以便使用 iOS6 原生功能以及其他 Facebook 功能，但我遇到了一个在模拟器上始终如一且很少在设备上发生的问题。

当我登录 Facebook 时，不是通过 Safari 或 Facebook 应用程序进行后台和身份验证，而是在我的应用程序顶部获得一个用于登录的模式窗口（我相信这始于 iOS6，甚至在切换到 Facebook SDK 3.0 之前/3.1)。这个窗口允许我输入用户名和密码，但是当我点击右上角的“确定”进行身份验证时，什么也没有发生。AppDelegate 中的 application:openURL:sourceApplication:annotation: 不会发生回调。

![Facebook登入](../Images/442634034ff9809f9c73e3e147da6ddd.png)

在我共享的 FacebookController 代码（我用于多个项目）中，我在尝试根据 Facebook 的示例代码进行授权时初始化 FBSession：

```
FBSession *session = [[FBSession alloc] initWithAppID:nil permissions:readPermissions defaultAudience:FBSessionDefaultAudienceNone urlSchemeSuffix:self.fbUrlSchemeSuffix tokenCacheStrategy:nil];

if(session.state == FBSessionStateCreated || session.state == FBSessionStateCreatedTokenLoaded)
{
  [FBSession setActiveSession:session];

  // we open after the fact, in order to avoid overlapping close
  // and open handler calls for blocks
  [session openWithBehavior:FBSessionLoginBehaviorUseSystemAccountIfPresent completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
... 
```

除非我单击对话框上的 x 取消按钮，否则永远不会执行完成处理程序的代码（在这种情况下，我会收到预期的错误）。

我在我的 iOS 目标属性 (info.plist) 中设置 FacebookAppID，并且我还使用 fb###[url_scheme_suffix] 设置了 URL 方案。

我的代码和 Facebook 示例代码之间的唯一区别是我使用的是 url 方案后缀，因为我有我们的应用程序的免费和付费版本。

如果应用程序使用 Safari 登录，它将使用给定的代码。如果它快速切换到 Facebook 应用程序，它也可以工作。此外，共享的 facebook ios6 帐户设置工作。该应用仅在使用应用内模式时才会失败。

有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:27:52.353

同样的事情也发生在我身上。它只发生在模拟器上（iphone5 4英寸，ios6），所以我不知道这个问题是否会出现在实际设备中。

经过几次调试会话后，我发现 FBDialog 的 webView:shouldStartLoadWithRequest:navigationType: 方法没有处理带有 access_token 的 url。当 facebook 通过 access_token 时，这意味着您已通过身份验证。所以，我想，那里缺少一些东西。

这是未处理的 url 的形状：

**fb122222222222222** ://authorize/# **access_token** =...& **expires_in** =5102464& **code** =...

**请注意，url 方案与您在应用程序的 Info.plist 文件中配置的 fb+API 密钥相同。**

**这是我**为解决此问题所做的。请注意，我添加了一个新的 else-if 分支，如果我们有访问令牌，我会在其中调用对话成功：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request
 navigationType:(UIWebViewNavigationType)navigationType {
    NSURL* url = request.URL;

    if ([url.scheme isEqualToString:@"fbconnect"]) {
        if ([[url.resourceSpecifier substringToIndex:8] isEqualToString:@"//cancel"]) {
            NSString * errorCode = [self getStringFromUrl:[url absoluteString] needle:@"error_code="];
            NSString * errorStr = [self getStringFromUrl:[url absoluteString] needle:@"error_msg="];
            if (errorCode) {
                NSDictionary * errorData = [NSDictionary dictionaryWithObject:errorStr forKey:@"error_msg"];
                NSError * error = [NSError errorWithDomain:@"facebookErrDomain"
                                                      code:[errorCode intValue]
                                                  userInfo:errorData];
                [self dismissWithError:error animated:YES];
            } else {
                [self dialogDidCancel:url];
            }
        } else {
            if (_frictionlessSettings.enabled) {
                [self dialogSuccessHandleFrictionlessResponses:url];
            }
            [self dialogDidSucceed:url];
        }
        return NO;
    }
//THIS IS WHAT I'VE ADDED>>>>
        else if ([[[[[[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleURLTypes"] firstObject] objectForKey:@"CFBundleURLSchemes"] firstObject] isEqual:url.scheme])
        {
            [self dialogDidSucceed:url];
            return NO;
        }
//<<<<<
    else if ([_loadingURL isEqual:url]) {
        return YES;
    } else if (navigationType == UIWebViewNavigationTypeLinkClicked) {
        if ([_delegate respondsToSelector:@selector(dialog:shouldOpenURLInExternalBrowser:)]) {
            if (![_delegate dialog:self shouldOpenURLInExternalBrowser:url]) {
                return NO;
            }
        }

        [[UIApplication sharedApplication] openURL:request.URL];
        return NO;
    } else {
        return YES;
    }
} 
```

值得一提的是，我正在遵循所有 fb sdk 指南（3.1），并且我没有对 src 代码进行任何进一步的更改。

通过这些更改，fb 登录过程按预期工作。

我希望这有帮助！

# protocol-buffers - 使用 Protobuf 和 Hive

> ID：12712825
> 
> 赞同：0
> 
> 时间：2012-10-03T16:30:01.770
> 
> 标签：protocol-buffers, hive

我是 Protobuf 和 Hive 的新手。我正在尝试将 protobuf 存储在 Hive 中，并且似乎在我的 protobuf 中遇到了新行的问题。我看到用户 Griffin 在这方面取得了成功。

[在 hadoop 0.20 中处理 protobufs 的自定义 inputformat](https://stackoverflow.com/questions/5254281/custom-inputformat-to-process-protobufs-in-hadoop-0-20)

你能给我更多关于这样做的细节吗？我已经尝试过 ElephantBird 和 Hive-protobuf 两者都适用于序列文件，但我没有序列文件格式的 protobuf。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:04:26.607

`Hive-protobuf`确实为我处理了这种情况。没有其他选择，我不得不将我的转换`protobufs`为`Sequencefiles`，现在我可以使用`Hive SerDe`.

# android - 膨胀的 AlertDialogs 在 Android 4.X 上无法读取，而在 Android 2.X 上看起来很完美

> ID：12712827
> 
> 赞同：2
> 
> 时间：2012-10-03T16:30:12.963
> 
> 标签：android, android-layout, android-theme, android-inflate, android-version

为了显示具有丰富内容和输入元素的对话框，我使用 Android`AlertDialog.Builder`创建了一个对象，`AlertDialog`然后使用系统`LayoutInflater`将内容（`setView(...)`）设置为一些 XML 布局文件。

这在 Android 2.X 上看起来很完美（深色背景，白色文本）：

![在此处输入图像描述](../Images/05799160c8ba8d354678495dbb27ed52.png)

但在 Android 4.X 上它根本不可读：

![在此处输入图像描述](../Images/bc5f294a402ac31dd06a9f246c68595b.png)

注意：当然，这些对话框并不相同，但是两个对话框都会出现问题。

那么我做错了什么？我`Theme.Light`在 API 级别 < 11 和`Theme.Holo.Light`>= 11 上使用。

**编辑1：**这是我用来膨胀的代码：

```
private LayoutInflater mGlobalInflater; // in Activity class
mGlobalInflater = (LayoutInflater) getApplicationContext().getSystemService(LAYOUT_INFLATER_SERVICE); // in Activity's onCreate()
mGlobalInflater.inflate(R.layout.input_dialog, null); // when needed 
```

**编辑 2：**这是“选择日期”视图的膨胀 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:padding="15dp">
    <DatePicker
        android:id="@+id/input_date"
        android:startYear="1900"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent" />
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="2dp"
        android:text="@string/hint" />
</LinearLayout> 
```

**编辑 3：**正如我现在发现的那样，膨胀的对话框内容在使用时在 Android <= 2.3.3 上`mGlobalInflater = (LayoutInflater) getApplicationContext().getSystemService(LAYOUT_INFLATER_SERVICE);`正确呈现，在使用时在 Android >= 3.0 上正确呈现`mInflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);`。所以这`Context`有所不同。为什么？

**编辑4：**

`onContextItemSelected()`对话框在of内部创建和膨胀`Activity`：

```
AlertDialog.Builder dialogPoup = new AlertDialog.Builder(MainActivity.this);
dialogPoup.setTitle("abc123");
final View inputDialog = mGlobalInflater.inflate(R.layout.input_dialog, null);
// setting some properties of the view and its child views
dialogPoup.setView(inputDialog); 
```

这个对吗？还是我必须用' 的上下文分配给 in`MainActivity.this`的变量`mContext`（例如）替换？`Activity``onCreate()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:05:35.007

不要像在上面的代码中那样使用 LayoutInflater，而是使用`getApplicationContext()`Activity 中的那个，而不是像这样：

```
 mGlobalInflater = LayoutInflater.from(this); // in Activity's onCreate() 
```

这应该有望使用对话框的匹配主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:15:36.453

我发现的唯一可行的解​​决方案如下：

```
 LayoutInflater mInflater, mGlobalInflater;
    mInflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
    if (android.os.Build.VERSION.SDK_INT >= 11) {
        mGlobalInflater = mInflater;
    }
    else {
        mGlobalInflater = (LayoutInflater) getApplicationContext().getSystemService(LAYOUT_INFLATER_SERVICE);
    } 
```

现在您可以`mInflater`用于正常膨胀（例如：a 内的行`ListView`）和（使用）`mGlobalInflater`内的膨胀视图。这将适用于所有 API 级别。`AlertDialog``setView()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T19:43:44.407

当你说你正在使用`Theme.Light`and`Theme.Holo.Light`时，重要的是你应用这个主题。

它是你的`Application`还是你的`Activity`。如果你在`Application`关卡上应用它，那么如果你`Context`从应用程序中获得它，你就会用那个主题膨胀（类似地`Activity`）。如果应用程序与活动的两个主题不同，您会注意到差异。

当您在上面查看@Joe 的答案时，请记住这一点。您提到@Joe 的回答解决了 api11+ 的问题，但之前的问题已经解决了。

因此，只需查看您的 AndroidManifest 并查看您对主题的了解以及您正在从中膨胀 Dialog 的`<application>`特定内容。`<activity>`

希望有帮助

# android - 到服务器的辅助连接给了我一个错误

> ID：12712828
> 
> 赞同：1
> 
> 时间：2012-10-03T16:30:14.773
> 
> 标签：android, connection, android-asynctask

在最近的一篇[stackoverflow 帖子](https://stackoverflow.com/questions/12710531/how-to-access-sqlite-database-from-ui-thread-if-im-inserting-data-in-asynctask)中，我评论说我有一个名为`HttpPostAux.java`.

当我从 Main.java （主要活动）调用它来验证用户登录时它可以工作（这里我使用一个`AsyncTask`线程连接到服务器）。但是当我用它来替换旧密码以防用户忘记它时（这里我使用另一个`AsyncTask`线程连接到服务器），它给了我一个错误：

执行时出错`doInBackground()`...原因：`java.lang.NullPointerException`

但是当我寻找那个空值时，惊讶：我没有找到它！而且以我的拙见，这个错误不应该存在，因为`HttpPostAux`它不依赖于任何特定的活动。

有人可以在这里帮助我吗？`AsyncTask`在不同的活动中使用不同线程的正确方法是什么？我会发布一些代码，但我现在没时间了......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:59:47.780

如果您使用的是 httpurlconnection，这在较低的 api 中不好，请参阅此链接[http://android-developers.blogspot.com/2011_09_01_archive.html](http://android-developers.blogspot.com/2011_09_01_archive.html)

# javascript - 带进度条的 XHR 多文件上传

> ID：12712830
> 
> 赞同：3
> 
> 时间：2012-10-03T16:30:21.370
> 
> 标签：javascript, jquery, file-upload, xmlhttprequest, progress-bar

我正在通过输入 type="file" 和 XHR 请求上传文件。上传进行得非常顺利。问题是，我无法使用 onprogress 更新我的进度条。如果我只上传一个文件，它工作得很好，但由于不止一个，只有一个进度条被更新，其他的根本不起作用。它可能来自 for 循环，但我不明白如何我可以解决这个问题如果有人有想法，那就太好了！

这是代码：

```
$('input').change(function() {

var allowedTypes = ['png', 'jpg', 'jpeg', 'gif'];   
var filesLen = this.files.length;
var fileInput = document.querySelector('#file');

for (i = 0; i < filesLen; i++)
{
    var vidType = this.files[i].name.split('.');

    if (allowedTypes.indexOf(vidType[vidType.length -1].toLowerCase()) != -1)
    {
        var progress = 'progress' + i;

        $('input').before('<p>' + this.files[i].name + ' <progress id="' + progress + '"></progress></p>');

        var xhr = new XMLHttpRequest();

        xhr.open('POST', '/upload/');

        xhr.upload.onprogress = function(e) 
        {
            $('#' + progress).attr('value', e.loaded);
        $('#' + progress).attr('max', e.total);
        };

        xhr.onload = function()
        {
            console.log('upload complete');
        };

        var form = new FormData();
        form.append('title', this.files[i].name);
        form.append('pict', fileInput.files[i]);

        xhr.send(form);

    }

    else
    {
        alert('Your file "' + this.files[i].name + '" \'s format isn\'t supported');    
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T16:47:24.220

这就是“臭名昭著的循环问题”。

问题在这里：

```
xhr.upload.onprogress = function(e) 
{
    $('#' + progress).attr('value', e.loaded);
    $('#' + progress).attr('max', e.total);
}; 
```

当这个函数运行时，`progress`将是循环退出时的状态，而不是循环中定义函数的点的状态。尝试用以下代码替换该代码：

```
(function(progress) { 
    xhr.upload.onprogress = function(e) 
    {
        $('#' + progress).attr('value', e.loaded);
        $('#' + progress).attr('max', e.total);
    };
}(progress)); 
```

更多：[Javascript臭名昭著的循环问题？](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)

# c++ - 简单字符串输出不符合预期（出现新行）

> ID：12712832
> 
> 赞同：1
> 
> 时间：2012-10-03T16:30:31.073
> 
> 标签：c++, trigraphs

我有与以下代码等效的代码来打印出一个短字符串：

```
#include <iostream>
#include <string>

int main(int argc, const char* argv[])
{
  std::string s = "finished??/not finished??";
  std::cout << s << std::endl;
  return 0;
} 
```

但是输出出现在两行并丢失了一些字符：

```
finished  
ot finished?? 
```

但`/n`不是换行符吗！发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:30:31.073

在翻译的第一阶段（*ISO/IEC 14882:2011(E)*的第 2.2/1 节），称为三字符序列的字符*序列*被替换为单个字符。

> 三字母序列 (2.4) 被相应的单字符内部表示代替。

三元组之一映射`??/`到`\`。第一阶段之后，代码等价于：

```
#include <iostream>
#include <string>

int main(int argc, const char* argv[])
{
  std::string s = "finished\not finished??";
  std::cout << s << std::endl;
  return 0;
} 
```

作为预处理阶段的结果，`"finished\not finished??"`被解析为包含转义序列的*字符串文字*`\n`，该转义序列表示换行符。因此，输出的字符串是：`finished<NL>ot finished??`。

为避免这种情况，您需要将其中一个问号转义为`\?`. 这给了你：

```
#include <iostream>
#include <string>

int main(int argc, const char* argv[])
{
  std::string s = "finished?\?/not finished??";
  std::cout << s << std::endl;
  return 0;
} 
```

这避免`??/`了作为三合符被拾取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:48:15.203

在 gcc 4.1.2 中，我收到以下警告：

cd /devserv-home/rspikol/ g++ -g -o tz tz.C tz.C:6:28: 警告：trigraph ??/ 已忽略，使用 -trigraphs 启用

编译于 10 月 3 日星期三 12:43:16 完成

因此，默认情况下，此版本的 gcc 不符合 C++ 标准。

@sftrabbit：在我的 C++ 标准副本中，该段落是 2.3/1

# .net - 设置窗口顶部、左侧、宽度和高度，并且只重绘一次

> ID：12712836
> 
> 赞同：2
> 
> 时间：2012-10-03T16:30:54.390
> 
> 标签：.net, wpf, c#-4.0

我在渲染窗口时遇到了一些问题，我想知道是否有一种方法可以设置这些属性的全部或一部分，并且只重绘/渲染一次窗口。

我的问题是我正在渲染 2 个窗口并使它们“附加”，以便它们一致地移动和调整大小。这意味着当我调整/移动一个窗口的大小时，我最终需要进行 4 次渲染调用，而我最多只需要 2 次。

例如，“Move_Click”方法附加到我窗口上的按钮。单击时，这最终会调用“OnRender”两次。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }
    protected override void OnRender(DrawingContext drawingContext)
    {
        Console.Error.WriteLine("On rendering...");
        base.OnRender(drawingContext);
    }

    private void Move_Click(object sender, RoutedEventArgs e)
    {
        this.Left--;
        this.Top--;
        this.Width--;
        this.Height--;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:49:06.643

您可以只存储一个指示是否渲染的标志：

```
public partial class MainWindow : Window
{
    private bool suspended;

    public MainWindow()
    {
        this.InitializeComponent();
    }

    protected override void OnRender(DrawingContext drawingContext)
    {
        if (suspended)
            return;

        base.OnRender(drawingContext);
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        suspended = true;

        Left = 0;
        Top = 0;
        Width = 100;
        Height = 100;

        suspended = false;

        this.InvalidateVisual();
    }
} 
```

您可以使用诸如 SuspendRender() 和 ResumeRender() 之类的公共方法来包装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:10:03.983

您可以使用 this.SetBounds(this.Left-1, this.Top-1, this.Width-1, this.Height-1) 只调用一次绘制逻辑。

# php - 我的关联数组是多维的，我不知道为什么。PHP

> ID：12712837
> 
> 赞同：0
> 
> 时间：2012-10-03T16:31:04.330
> 
> 标签：php, arrays, associative

大家好。我目前正在开发一个处理用户登录的登录类。通过使用以下代码将其创建为对象，我从数据库中获取了我的数组列表：

```
 $dBquery = new Selection();
 $dBquery->setUpSelection($sqlConstructor);
 $sqllogin = $dBquery->sQLResults();
 print_r($sqllogin); 
```

从`print_r`，这是返回的内容：

```
Array (
    [0] => Array (
        [0] => 1
        [uSID] => 1
        [1] => 0
        [level] => 0
        [2] => a
        [Username] => > a
        [3] => a
        [password] => a
        [4] => a
        [email] => a
        [5] => 0
        [lockedID] => 0
    )
) 
```

现在，从它的外观来看，它是一个包含在数组中的数组，这有点令人困惑，因为创建这个数组的代码并没有引发这种情况（我可能是错的，不幸的是，这是我需要指针的地方）。设置数组的代码是：

```
private function selectAndQuery() {
        //Select query with AND
        $sql2 ="SELECT * FROM ".$this->table." WHERE ".$this->column."='".$this->where."' AND ".$this->andColumn."='".$this->sqlAnd."'  ";
        $a = mysql_query($sql2) or die(mysql_error());      
        //get number of rows to determine if there are any results
        if (mysql_num_rows($a) < 1) {
                    //TO DO no results returned.
            $this->sQLResults();
        } else {
            //if there's a result store it into an array.
            while ($row = mysql_fetch_array($a)) {
            $this->sqlResultsArray[] = $row; 
            }           
            $this->sQLResults();
        }
    } 
```

所以我对你们的问题是，是什么导致数组变维，我能做些什么来阻止它？我知道我可以从多维数组中提取信息，但我试图让事情尽可能简单。

任何帮助将非常感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:33:28.633

```
$this->sqlResultsArray[] = $row; //This is causing you to get multidimensional array
since  mysql_fetch_array returns an array.So if you are sure that you will get only one
row.you can use below given mehod instead
if(mysql_num_rows() = 1){$this->sqlResultsArray  = mysql_fetch_array($a);} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:33:44.110

您正在使用 mysql_fetch function_array() 函数，它将数据行作为数组返回。然后，您将此数组插入到结果数组中，所以...是的...多维，因为您正在以这种方式获取/构建它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:33:51.287

```
 while ($row = mysql_fetch_array($a)) {
    $this->sqlResultsArray[] = $row; 
```

$row 是一个数组。您正在将此添加到 sqlResultsArray。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T16:35:11.097

您的选择只是返回与查询参数匹配的所有行的数组，因此在索引 0 处您将拥有第一行，在索引 1 处拥有第二行，依此类推。

如果你知道最多会有一个结果，你可以这样做：

```
$sqllogin = $dBquery->sQLResults();
$sqllogin = $sqllogin[0]; 
```

# java - 如何在 Java 中使用迭代器/枚举接口

> ID：12712841
> 
> 赞同：0
> 
> 时间：2012-10-03T16:31:24.283
> 
> 标签：java, iterator, enumeration

> **可能重复：**
> [Java 枚举和迭代器之间的区别](https://stackoverflow.com/questions/948194/difference-between-java-enumeration-and-iterator)

我正在阅读这篇文章“[迭代器与枚举之间的区别](https://stackoverflow.com/questions/948194/difference-between-java-enumeration-and-iterator)”

如果可以使用迭代器方法或枚举方法来执行相同的操作，那么有什么区别？

我应该在哪里使用这些接口中的任何一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:37:32.560

枚举器是旧版 Java 1.0 的一部分。迭代器只出现在 Java 1.2 中。据我所知，枚举器只是为了向后兼容而保留的。根据[Enumerator 的 java 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Enumeration.html)，所有新代码都应使用 Iterator 接口。

> 注意：此接口的功能与迭代器接口相同。此外，Iterator 添加了一个可选的删除操作，并且具有更短的方法名称。新的实现应该考虑使用迭代器而不是枚举。

在遍历集合、列表、集合等或实现该迭代器接口的东西时，您应该使用迭代器。您还可以使用“new”(Java 5) for 循环构造来迭代这样的集合。但是请记住，在循环时从集合中删除项目的唯一安全方法是使用 Iterator.remove() 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T16:37:22.590

迭代器是较新的首选方法。它添加了一个删除功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:41:35.710

枚举用于获取列表中的连续元素，不能用于以任何方式更改列表，例如通过插入或删除。但是，迭代器是一个实例化的对象，它在列表中维护一个引用，并且可以在该引用处插入和删除元素，以及获取列表中的元素。
如果您只是想获取列表中的元素，枚举和使用迭代器都可以正常工作。但是，如果您需要添加插入和删除的功能，我建议使用迭代器。

# android - BouncyCastle 是否在 Gingerbread 之前在 Android 中提供？

> ID：12712842
> 
> 赞同：2
> 
> 时间：2012-10-03T16:31:25.453
> 
> 标签：android, bouncycastle, android-2.3-gingerbread

如果是这样，它有哪些版本可用？我在这里只看到它可以追溯到 Gingerbread： [https](https://android.googlesource.com/platform/external/bouncycastle/) : //android.googlesource.com/platform/external/bouncycastle/ 它是否在 GB 之前打包在不同的存储库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T03:02:04.077

请参阅上文了解为什么它不“可用”。如果您需要加密等功能，请使用 JCE 接口（`Cipher`、`Signature`等），您的应用程序将适用于具有特定机制/算法提供程序的所有版本（不一定是 Bouncy Castle，尤其是在较新的版本中）。如果您需要特定于 BC 的较低级别的 API（ASN.1 解析等），请将 Spongy Castle 捆绑在您的应用程序中并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T18:09:11.320

我发现它已从 pre-Gingerbread 中的 libcore/security/ 移动到 Gingerbread+ 中的 external/ 中：

[https://code.google.com/p/android-source-browsing/source/browse/libcore/security/src/main/java/org/bouncycastle/?repo=platform--dalvik&name=android-2.2_r1.3&r =dfd0afbcb08b871e224a28ecb4ed427a7693545c](https://code.google.com/p/android-source-browsing/source/browse/libcore/security/src/main/java/org/bouncycastle/?repo=platform--dalvik&name=android-2.2_r1.3&r=dfd0afbcb08b871e224a28ecb4ed427a7693545c)

至

[https://code.google.com/p/android-source-browsing/source/browse?repo=platform--external--bouncycastle](https://code.google.com/p/android-source-browsing/source/browse?repo=platform--external--bouncycastle)

# matlab - 以方便、优雅和稳健的方式显示字符串元胞数组

> ID：12712843
> 
> 赞同：3
> 
> 时间：2012-10-03T16:31:26.767
> 
> 标签：matlab, cell-array

通常，我的函数包含一个包含少量有效选项的字符串参数。例如，它可能表示类似于 的最后一个参数的模式`interp1`。当用户传递不正确的值时，我喜欢在错误消息中给出有效选项的列表。

目前，我这样解决它：

```
function out = my_func(mode)
valid_modes = {'rectangular', 'gaussian'};
switch mode
    case 'rectangular'
        % do something
    case 'gaussian'
        % do something else
    otherwise
        error(['atmlab:' mfilename ':invalid'], 'Invalid mode: %s. Valid modes: %s', mode, sprintf('%s ', valid_modes))
end 
```

我正在利用的技巧是`sprintf`可以采用一个单元格数组，然后输出多个字符串的串联。但是，这种行为似乎没有记录，从 Matlab 2012b 开始，Matlabs 代码分析器已经开始警告不要使用`sprintf`. 它仍然有效，但它可能不是一种受支持的方式，我不知道它是否会在未来继续有效，所以我不愿意简单地忽略或抑制警告。

另一种解决方案是使用`evalc('disp(valid_modes)')`，但该解决方案让我呕吐。

如何方便优雅地显示字符串元胞数组的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T17:14:26.840

您可以使用`sprintf`这种方式，使用[列表](http://www.mathworks.se/help/matlab/matlab_prog/comma-separated-lists.html)

```
sprintf('%s ', valid_modes{:}) 
```

这样可行。我真的很惊讶您可以按照自己的方式编写它。我得到一个错误。

现在走更复杂的路线:) 你总是可以这样做

```
str = [valid_modes{:}]; % that is a string 
```

您只需要在模式名称中包含空格，您可能不想这样做。但是您可以声明它们以在第二行中包含空格：

```
valid_modes = {'rectangular'    'gaussian'
               ' '              ' '} 
str = [valid_modes{:}]
ans =

 rectangular gaussian 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T18:37:30.877

`cellfun`这是使用和的单线解决方案`cell2mat`。在 MATLAB R2012a 中测试。

```
error(['atmlab:' mfilename ':invalid'], 'Invalid mode: %s. Valid modes: %s\n', mode, cell2mat(cellfun(@(x) [ x ' ' ], valid_modes, 'UniformOutput', false))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:37:02.303

您可以创建一个将单元格数组转换为字符串的函数：

```
 function st = cell2str(cellStr)
     cellStr= cellfun(@(x){[x ',']},cellStr); %# Add ',' after each string.
     st = cat(2,cellStr{:});  %# Convert to string             
     st(end) = []; %# Remove last ','
 end 
```

请注意，如果您只想显示元胞数组，而不是将其作为字符串传递，则可以使用`celldisp`function.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-26T15:22:47.567

自从最新版本的 Matlab（我认为是 2013b 以来）以来，有一个新函数[`strjoin`](http://www.mathworks.com/help/matlab/ref/strjoin.html)，它可以将字符串连接到一个单元格数组中。例如：

```
C = {'Newton','Gauss','Euclid','Lagrange'};  
str = strjoin(C,', ') 
```

# java - 将javascript数组传递给java servlet

> ID：12712850
> 
> 赞同：0
> 
> 时间：2012-10-03T16:31:55.000
> 
> 标签：java, jquery, ajax, arrays, servlets

我有一个被填充的数组，然后当我发送它时，我的 servlet 将它接收为空。

```
var allIcons = new Array();
$('.icon').each(function(index){
  allIcons.push($(this).find('.iconName').html());
}); 
```

这似乎用适当的字段填充了数组

然后我将它传递给我的 servlet 使用

```
$.ajax({
   "dataType" : 'json',
   "type": 'GET',
   "url" : 'update'
   "data" :{
      "allIcons" : allIcons
   }, "success": function(json){alert("alert");}}); 
```

然后我的 servlet 尝试读取它，但总是返回 null

```
if(request.getParamtersValues("allIcons").length > 0) {/*do something*/} 
```

request.getParamterValues() 应该返回一个 String[]

此外，我知道我的 servlet 能够接收数据，因为这是一些其他代码的补充。谢谢-汤米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:29:58.280

```
$.ajax({
   dataType : 'json',
   type: 'GET',
   url : 'update'
   data :{
      "allIcons" : allIcons
   }, success: function(data){alert("alert");}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:44:57.523

request.getParameterNames() 返回了“allIcons []”，我在其中寻找没有括号的“allIcons”。因此，如果您正在寻找从 JS 到 servlet 的数组，请务必使用正确的参数。一定要加上你的大括号。“[]”

# powershell - 如何使用 PowerShell 在 AD 中移动用户？

> ID：12712852
> 
> 赞同：6
> 
> 时间：2012-10-03T16:32:04.807
> 
> 标签：powershell, active-directory

我需要一点帮助。我几乎没有 PowerShell 经验，但我正在使用我身边的袖珍指南和我的 GoogleFu。

目前，我的计划是提示输入用户名并存储它，使用 Get-ADUser 和存储的用户名来获取和存储 DistinguishedName，使用 Move-ADObject 将用户从 DistinguishedName 移动到目标路径。

我遇到的问题是存储和调用这些东西。我有这个，它给了我一个用户的信息。如何仅隔离可分辨名称并存储它？

```
$name = read-host "Enter user name"
Get-ADUser $name 
```

存储 DN 后，Move-ADObject 是否可以使用存储的值？我试图存储单个值，例如：

```
Move-ADobject 'CN=$name,OU=department,OU=company,DC=Domain,DC=net' -TargetPath 'OU=NonActive,OU=company,DC=Domain,DC=net' 
```

但这会返回“找不到目录对象”，因为它不使用存储的值。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-03T16:59:46.313

尝试这个：

`Get-ADUser $name| Move-ADObject -TargetPath 'OU=nonactive,OU=compny,DC=domain,Dc=net'`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-27T15:32:51.920

顺便说一句——

Powershell 无法识别变量，例如`$name`当它们用单引号括起来时，因为 shell 将这些值视为文字字符串。使用双引号处理变量：

例如。 `write-host '$name'`会给出输出`$name`，但`write-host "$name"`会返回变量中的值。

所以`Move-ADobject "CN=$name,OU=department,OU=company,DC=Domain,DC=net" -TargetPath 'OU=NonActive,OU=company,DC=Domain,DC=net'`应该按预期工作。另一方面，您将通过使用管道学到更多有趣的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-08T14:41:58.077

仅出于您的个人利益：

CB.，做管道是传递一个对象。您应该使用带有以下命令的对象，而不是使用字符串：

```
Move-ADObject 
```

# node.js - 在客户端（在 Node.js 服务器上）从 CoffeeScript 渲染 JS

> ID：12712855
> 
> 赞同：1
> 
> 时间：2012-10-03T16:32:27.080
> 
> 标签：node.js, coffeescript, express, pug

我怎样才能使这项工作？

这是我的玉文件：

```
!!!
html
head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
    sript(type='text/javascript', src='/javascripts/script.coffee') 
```

我不想在我的项目中使用任何 JavaScript，所以我使用 node-dev 来运行 app.coffee 而不是 app.js 作为服务器。它适用于服务器端的咖啡文件，但不适用于客户端。

我需要某种可以即时编译咖啡文件的渲染引擎，例如手写笔中间件：

```
app.use require('stylus').middleware(__dirname + '/public')
app.use express.static path.join __dirname, 'public' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:38:07.790

您可以查看几个：

*   节点浏览器：[https ://github.com/substack/node-browserify](https://github.com/substack/node-browserify)
*   网络包：[https ://github.com/webpack/webpack](https://github.com/webpack/webpack)
*   连接资产：[https ://github.com/TrevorBurnham/connect-assets](https://github.com/TrevorBurnham/connect-assets)

就我个人而言，我真的很喜欢 Browserify，因为你可以使用 CommonJS 风格编写你的客户端 CoffeeScript `module.exports`，但我一直想看看 webpack，它看起来很有前途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T22:58:50.857

查看[https://github.com/wdavidw/node-connect-coffee-script](https://github.com/wdavidw/node-connect-coffee-script)

我会质疑生产应用程序的任何客户端编译的性能。

# javascript - 去抖 Openlayers 事件

> ID：12712856
> 
> 赞同：0
> 
> 时间：2012-10-03T16:32:29.330
> 
> 标签：javascript, openlayers

我想在OpenLayers 的*zoomend*事件的侦听器中执行一项非常密集的任务。

我认为使用像[Ben Alman 的 jQuery Throttle-Debounce 插件之](http://benalman.com/projects/jquery-throttle-debounce-plugin/)类的东西是谨慎的，以防止当用户连续快速单击缩放控件时此侦听器执行太多次。

所以我正在尝试如下代码，但它不起作用。*zoomend*侦听器回调中的*$.debounce()*中的回调永远不会执行。只是为了确认我是否删除了防抖动功能，*zoomend*的侦听器回调确实会执行。

 **```
 map = new OpenLayers.Map('map',{
        eventListeners: {
            zoomend: function(event) {
                //execute 300ms after user stops zooming
                $.debounce(300,function(event) {
                    //..computationally intensive task
                });
            }
        }
    }); 
```

我究竟做错了什么？？

我什至应该为去抖动而烦恼吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T07:05:29.890

原来我只是错误地使用了 $.debounce() 。这是更正后的代码：

```
map = new OpenLayers.Map('map',{
    eventListeners: {
        'zoomend': $.debounce(1000,function() {
            //..computationally intensive task
        })
    }
}); 
```

只是对此发表评论，我认为使用去抖动是有益的，并且对尚未记录此类内容感到惊讶。缩放时，用户可能倾向于快速单击缩放按钮，并且在许多情况下，以新缩放级别重绘将取决于使用新缩放级别的值和分辨率的计算。因此，只有在用户停止缩放后进行这些计算才有意义。我相信这也适用于平移。**

# c++ - 如何在 C++ 中连接字符串？

> ID：12712858
> 
> 赞同：1
> 
> 时间：2012-10-03T16:32:35.047
> 
> 标签：c++, string-concatenation

```
string degreesToDMS(double angle) {
    int intpart = 0;
    int intpart2 = 0;
    int intpart3 = 0;
    return floor(angle) << "\xb0" << modf(angle, &intpart)*60 << "'" << modf(modf(angle, &intpart2), &intpart3)*60 << "\"";
} 
```

此函数以度为单位接收角度并输出纬度。

我在 return 语句上遇到错误。如何正确地将不同的数据类型连接到 C++ 中的字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:35:58.433

如果您想使用流式操作符，请使用 std::stringstream，如下所示：-

```
string degreesToDMS(double angle)
{
  int intpart = 0;
  int intpart2 = 0;
  int intpart3 = 0;
  stringstream ss;
  ss << floor(angle) << "\xb0" << modf(angle, &intpart)*60 << "'" << modf(modf(angle, &intpart2), &intpart3)*60 << "\"";
  return ss.str ();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:35:11.567

您需要首先在 an 中构建结果，`std::ostringstream`然后从中检索字符串。

```
std::ostringstream ss;
ss << floor(angle) << "\xb0" << modf(angle, &intpart)*60 ...
return ss.str(); 
```

还有其他方法可以实现此结果；例如，使用 C++11，您可以使用[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)将值转换为`std::string`然后将它们连接在一起。

```
return std::to_string(floor(angle)) + "\xb0" + 
         std::to_string(modf(angle, &intpart)*60) + ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:34:07.843

要在 C++ 中连接一个字符串，您需要做的就是`+ operator`在两个字符串上使用。

如果要将 a 转换`int`为 a`string`使用[stringstream](http://www.cplusplus.com/reference/iostream/stringstream/)

```
#include <string>
#include <sstream>
using namespace std;

int main()
{
    string firstString = "1st, ";
    string secondString = "2nd ";

    string lastString  = firstString + secondString;

    int myNumber = 3;

    std::stringstream converANumber;
    converANumber << myNumber;

    lastString = lastString + converANumber.str();

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T16:37:17.717

```
std::string result;
result += std::to_string(floor(angle);
result += "\xb0";
result += std::to_string(modf(angle, &intpart) * 60);
return result; 
```

请注意，这需要 C++11 才能获得`std::to_string`.

# java - ReplaceAll 替换除我指定的所有内容

> ID：12712860
> 
> 赞同：2
> 
> 时间：2012-10-03T16:32:42.073
> 
> 标签：java, regex, escaping

我希望用其他东西替换特定字符串中管道的所有实例。但是，它不仅没有替换指定的字符串，而是替换了所有空格。例子：

```
String cleanTitle = StringEscapeUtils.escapeHtml("Bacon is | good");
out.println(cleanTitle.replaceAll("|", "*")) 
```

这个例子输出***B*a*c*o*n*i*s*|*g*o*o*d***

我需要它说**培根*好**

- 我的界面需要函数 escapeHTML，尽管这个例子没有使用它来解决我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T17:25:52.710

您需要在表达式中转义管道，因此请使用：

```
cleanTitle.replaceAll("\\|", "*") 
```

也可以看看

*   [http://www.regular-expressions.info/characters.html](http://www.regular-expressions.info/characters.html)
*   [http://www.regular-expressions.info/alternation.html](http://www.regular-expressions.info/alternation.html)
*   [http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T19:39:36.177

进行正[`String#replaceAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)则表达式匹配和替换。The`|`是正则表达式中的一个特殊字符，因此需要按照`\`Jasper 的回答进行转义。但是，您实际上想要一个简单的逐字符搜索和替换。是错误的`String#replaceAll()`工具。你应该[`String#replace()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28char,%20char%29)改用。

```
out.println(cleanTitle.replace('|', '*')); 
```

# objective-c - 在 Objective-C iPad 开发中发布

> ID：12712861
> 
> 赞同：2
> 
> 时间：2012-10-03T16:32:53.137
> 
> 标签：objective-c, ios, forms, ipad, post

我正在尝试发出 POST 请求，但我似乎无法弄清楚出了什么问题。我从服务器收到回复，但我的电子邮件/密码对似乎没有被正确发送/读取（由服务器），它告诉我不存在这样的帐户。

这是包含在函数中的代码（当用户按下我创建的“登录”按钮时调用）。注意：变量“电子邮件”和“密码”设置为我还创建的 2 个文本字段中的值。

```
NSURL *url = [NSURL URLWithString:@"http://mydomain.com/login-ipad/"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *messageBody = [NSString stringWithFormat:@"email=%@&user_pass=%@",email,password];
NSString *msgLength = [NSString stringWithFormat:@"%d", [messageBody length]];
[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[theRequest setHTTPMethod:@"POST"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Current-Type"];
[theRequest setHTTPBody:[messageBody dataUsingEncoding:NSUTF8StringEncoding]];
NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if(theConnection)
{
    NSLog(@"Connection Successful");
    parent.loginButton.enabled = NO;
    receivedData = [[NSMutableData data] retain];
}
else
{
    UIAlertView *alert1 = [[[UIAlertView alloc] initWithTitle:@"Alert" message:@"There was an issue sending the data. Please check your internet connection." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];
    [alert1 show];
} 
```

有人能看出我的逻辑有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:52:26.817

感谢“Brian”，他解决了我的问题......我已经修改了我的代码，它现在可以工作了。这是最终的代码：

```
NSURL *url = [NSURL URLWithString:@"http://mydomain.com/login-ipad/"];
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
NSString *messageBody = [NSString stringWithFormat:@"email=%@&user_pass=%@",email,password];
NSString *msgLength = [NSString stringWithFormat:@"%d", [messageBody length]];
[theRequest setHTTPMethod:@"POST"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[theRequest setHTTPBody:[messageBody dataUsingEncoding:NSUTF8StringEncoding]];
NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if(theConnection)
{
    NSLog(@"Connection Successful");
    parent.loginButton.enabled = NO;
    receivedData = [[NSMutableData data] retain];
}
else
{
    UIAlertView *alert1 = [[[UIAlertView alloc] initWithTitle:@"Alert" message:@"There was an issue sending the data. Please check your internet connection." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil] autorelease];
    [alert1 show];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T16:42:41.513

您正在添加一个`Current-Type`标题（AFAIK 甚至不是一个有效的标题）而不是`Content-Type`.

# ruby-on-rails-3 - 卡在文件输入和验证错误中

> ID：12712862
> 
> 赞同：2
> 
> 时间：2012-10-03T16:33:03.173
> 
> 标签：ruby-on-rails-3, validation, file-upload, carrierwave

***我在使用载波***时遇到了麻烦，但与它没有严格的关系。我有附件模型：

```
class Attachment < ActiveRecord::Base
  attr_accessible :event_id, :file, :file_cache
  belongs_to :event
  mount_uploader :file, AttachmentUploader
end 
```

属于Event模型

```
class Event < ActiveRecord::Base

 ATTACHMENTS_LIMIT=3
 attr_accessible ...
              :attachments_attributes
 ...
 has_many :attachments, :dependent => :destroy
 accepts_nested_attributes_for :attachments
end 
```

和这样的嵌套形式：

```
<%= f.fields_for :attachments do |builder| %>
<fieldset class="attachment">
  <%= builder.file_field :file %>
  <%= builder.hidden_field :file_cache %>
  <%= link_to_remove_fields t("actions.delete"), builder %>
</fieldset>
<% end %> 
```

似乎没问题，除非您遇到验证错误 - 然后所有 file_fields 都将被重置为空白值。***但是有一个file_cache***指向我的载波上传路径（*uploads/tmp/20121003-1959-2388-3822/Getting_Started.pdf*）。

发生验证错误时如何保护文件不丢失？？？任何提示将不胜感激！我已经从官方的carrierwave wiki和相关帖子中汲取了这些方法，但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T02:51:25.020

编辑：经过一番调查，我意识到我的“image_path”字段和 before_validation 方法不是必需的。我所要做的就是：[https](https://github.com/jnicklas/carrierwave#making-uploads-work-across-form-redisplays) ://github.com/jnicklas/carrierwave#making-uploads-work-across-form-redisplays 。我不确定 OP 代码的问题是什么......看起来它应该对我有用。

* * *

刚遇到同样的问题。carrierwave 将文件保存在 /tmp 文件夹中这一事实非常有帮助。简而言之，这就是我所做的：

模型：

```
class Image < AR:B
  mount_uploader :image, ImageUploader
  attr_writer :image_path

  before_validation :set_image

  def set_image
    self.image = File.open(@image_path) if @image_path && !image.present?
    true
  end
end 
```

查看（使用[slim](http://www.slim-lang.com)）：

```
- if f.object.image.present?
  = f.hidden_field :image_path, value: f.object.image.current_path 
```

** 注意：这会在原始 html 中公开生产服务器上文件的完整路径。如果这对您来说是一个安全问题，您可以加密/解密路径，或将值设置为原始图像数据或其他内容。

# java - 读写锁

> ID：12712864
> 
> 赞同：3
> 
> 时间：2012-10-03T16:33:08.287
> 
> 标签：java, concurrency, locking, struts

我有一个简单的网络应用程序，我在其中使用 struts 和 xslt 转换。在动作类中，如果我得到正确的数据，我会尝试调用方法“保存”

```
public ActionForward saveProduct(ActionMapping mapping, ActionForm form, 
        HttpServletRequest request, HttpServletResponse response) throws XMLProductDAOException {
    // Validation
    if (sizeValidationErrorList == 0) {
        try {
            writeLock.lock();
            productDAO.saveProducts(document, product, categoryId, subcategoryId);
        } finally {
            writeLock.unlock();
        }
    }
        ...
} 
```

但我有一个问题。我的老师说 lock-s 的最佳位置是动作类或命令（如果是简单的网络应用程序）

但是在 saveProducts 方法中，我在将新数据写入 xml 文件之前进行了转换。这意味着如果仅在操作类中使用 writeLock，我将无法控制读取正确的数据。

我 XMLProductDAO 我有这样的东西

```
public void saveProducts(Document document, Product product, Integer categoryId, Integer subcategoryId) throws XMLProductDAOException {
    // /......
    XSLTTransformer xsltTransformer = XSLTTransformer.getInstance();

    Transformer transformer = xsltTransformer.getCachedTransformer(NEW_PRODUCT_REAL_XSL_PATH);

    transformer.setParameter(PARAM_CURRENT_CATEGORY, currentCategory);
    transformer.setParameter(PARAM_CURRENT_SUBCATEGORY, currentSubcategory);
    transformer.setParameter(PARAM_PRODUCT, product);

    Writer result = new StringWriter();

    xsltTransformer.transform(transformer, result);

    File originalXML = new File(PRODUCT_REAL_XML_PATH);
    Writer fileWriter = null;
    try {
        fileWriter = new PrintWriter(originalXML, ENCODING);
        fileWriter.write(result.toString());
    } catch (IOException e) {
        logger.error(IO_EXCEPTION, e);
        throw new XMLProductDAOException(IO_EXCEPTION, e);
    } finally {
        fileWriter.close();
    }
    // /.....
} 
```

如果只在动作类中使用 writeLock，我会面临在 xml 中写入不正确的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:54:06.550

因此，当然，您总是可以编写使用写锁的错误代码。但是，当涉及到使用锁保护数据时，如果您只使用写锁（并且在所有适当的位置使用它们），那么您的数据将是安全的。`synchronized`这将产生与使用块相同的性能。在适当的情况下使用读锁可以提高性能，但是如果您尝试在只有读锁的区域中写入数据，则添加读锁的使用会增加潜在的错误。因此，仅写锁等于更高的安全性但更低的性能。

# unit-testing - 在 CakePHP 的单元测试期间使用不同的电子邮件配置

> ID：12712865
> 
> 赞同：5
> 
> 时间：2012-10-03T16:33:08.870
> 
> 标签：unit-testing, cakephp, phpunit

我在我的一个控制器的操作中使用 CakeEmail 类发送一封电子邮件。在添加电子邮件代码之前，我对此控制器进行了单元测试，该控制器运行良好。添加电子邮件后，我收到此错误：

> SocketException：无法发送电子邮件。

这是因为我无法从本地机器上发送电子邮件。

所以我认为也许一个好主意是在 Config/email.php 的 EmailConfig 类中有两个不同的配置选项（类似于数据库配置文件的工作方式）。默认使用 Mail 传输，而测试使用 Debug 传输。问题在于，与数据库配置不同，Cake 在测试期间不会自动在两者之间切换。

我唯一想到的是向 EmailConfig 类添加一个构造函数并测试我们是否在进行单元测试，但我不确定应该进行什么检查。

类似这样的东西：

```
class EmailConfig {

    public $default = array(
        'transport' => 'Mail'
    );

    public $test = array(
        'transport' => 'Debug'
    );

    public function __construct() {
        if ($isUnitTesting) {
            $this->default = $this->test;
        }
    }

} 
```

我上面建议的方法是个好主意吗？如果没有，在单元测试期间我可以通过哪些其他方式为电子邮件使用不同的传输方式？

* * *

**更新 - 2012 年 4 月 10 日**

我想我做错了。看看[这个答案](https://stackoverflow.com/a/8600556/343465)，似乎即使`$default`默认情况下也没有加载配置，您必须通过调用`CakeEmail::config()`方法来指定它或在构造函数中给出它。所以我认为这给我留下了两个选择：

1.  在控制器中检查我们是否在进行单元测试（不知何故？），然后使用“测试”配置。
2.  将我的计算机设置为能够发送电子邮件。

我宁愿做第一个，但不确定如何在不通过检查我们是否进行单元测试来膨胀控制器操作的情况下做到这一点，这样做似乎是错误的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T14:28:06.143

最简单的方法可能是在测试时切换到 DebugTransport。测试的一部分是您需要将程序设计为可测试的。事实上，Cake 中到处都有一些函数就是为了做到这一点而设计的。对于您的应用，假设您在用户注册时发送了一封电子邮件：

```
App::uses('CakeEmail', 'Network/Email');
App::uses('AppController', 'Controller');

class UsersController extends AppController {

  public function register() {
    //registration logic
    $email = new CakeEmail();
    $email->from(array('site@example.com' => 'Site'));
    $email->to('you@example.com');
    $email->subject('Registered');
    $email->send('Thanks for registering!');
  }

} 
```

这看起来无害，但你不能模拟`CakeEmail`，因为它不允许[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，这在测试时是必需的。相反，`CakeEmail`应该以允许我们稍后更改它的方式实例化该类。例如：

```
App::uses('CakeEmail', 'Network/Email');
App::uses('AppController', 'Controller');

class UsersController extends AppController {

  public function register() {
    //registration logic
    $email = $this->_getEmailer();
    $email->from(array('site@example.com' => 'Site'));
    $email->to('you@example.com');
    $email->subject('Registered');
    $email->send('Thanks for registering!');
  }

  public function _getEmailer() {
    return new CakeEmail();
  }

} 
```

因为我们添加了一个小辅助函数，我们现在可以测试它（通过模拟辅助函数）。

```
App::uses('CakeEmail', 'Network/Email');
App::uses('UsersController', 'Controller');

class UsersControllerTest extends ControllerTestCase {

  public function testRegister() {
    $controller = $this->generate('Users', array(
      'methods' => array(
        '_getEmailer'
      )
    ));
    $emailer = new CakeEmail();
    $emailer->transport('Debug');
    $controller
      ->expects($this->any())
      ->method('_getEmailer')
      ->will($this->returnValue($emailer));
  }

} 
```

该测试为我们的控制器创建了一个模拟对象，并告诉它在调用该方法时返回我们新创建`$emailer`的对象。`_getEmailer`由于`$emailer`已将传输设置为“调试”，因此可以安全地进行测试。

当然，由于现在我们正在决定该方法返回什么电子邮件对象，因此模拟该`CakeEmail`对象并期望某些返回变得微不足道。

# php - 无法通过引用返回 php 对象并随后访问它的方法

> ID：12712866
> 
> 赞同：0
> 
> 时间：2012-10-03T16:33:11.317
> 
> 标签：php

我误解了 php 对象引用是如何工作的。我知道在 php 5 中，对象的引用分配是自动的。我了解引用分配如何适用于非对象。

我想将对象实例的引用从方法传递给调用代码，然后使用实例引用调用该类的方法。

当我尝试这个时，我得到：

> 致命错误：在...中的非对象上调用成员函数 update_Sessions_For_Schedule()

我已经阅读了许多类似的 SO 帖子，但我没有进一步找到为什么我无法做到这一点。

所以我所拥有的是：

类 Schedule 使用类 Time_Tabler 检查是否可以在允许创建时间表之前将新时间表添加到时间表中。所以很明显在这个过程中 Time_Tabler 被实例化了。

我想从实例化计划的 php 代码访问此实例，然后使用该实例调用方法 update_Sessions_For_Schedule()。

所以我在类 Schedule 中有方法 get_Checked_Time_Table() ： -

我已经尝试过两种格式：

使用明确的参考分配：

```
public function &get_Checked_Time_Table(){
    global $test_Time_Tabler;
    return $test_Time_Tabler;
} 
```

其中 $test_Time_Tabler 在较早的类 Schedule 方法中实例化。

这被称为

```
 $tested_Time_Table =& $complete_Schedule->get_Checked_Time_Table(); 
```

没有明确的参考分配：

```
public function get_Checked_Time_Table(){
    global $test_Time_Tabler;
    return $test_Time_Tabler;
} 
```

其中 $test_Time_Tabler 在较早的类 Schedule 方法中实例化。

这被称为

```
$tested_Time_Table = $complete_Schedule->get_Checked_Time_Table(); 
```

在任一情况下

```
$tested_Time_Table->update_Sessions_For_Schedule($update_As_Insert); 
```

产生致命错误。

我不明白为什么引用不被识别为 Time_Tabler 类的对象，因此可以调用该方法。

欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:43:55.813

我已经解决了这个问题。

问题的解决方法一如既往的简单。该实例没有持续存在，所以当我想回顾它时它并不存在。

因此，为了确保实例在引用时仍然存在，我对它进行了克隆。

# mysql - sql表行在其他几个表之一中有对应的行

> ID：12712867
> 
> 赞同：1
> 
> 时间：2012-10-03T16:33:19.310
> 
> 标签：mysql, sql, database, sqlite

我有一个概念性问题，我希望更精通 sql 数据库设计的人可以帮助我。我有一个表，其中每一行在其他几个表之一中都有对应的行。IE。表 1 中的行在表 2、表 3 或表 4 中都有对应的行（但永远不要超过 1……对应的行只能在其他表之一中）。

设置此结构的最佳方法是什么。如果我在表 1 中放了一个 othertable_id 列和一个 tablename 列，我可以保证其他表中只有 1 个对应的行，但这似乎是一个非常不灵活的混乱解决方案。另一方面，如果我只在 table2、table3 和 table4 中放置一个 table1_id 列，似乎每次我想找到与 table1 中的一行对应的行时，我都需要运行 3 个不同的查询，而且看起来像我不能保证 table1 中我的行在三个表中的任何一个中只有一个条目。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:35:39.100

我会使用第二种解决方案，并使用触发器来确保不超过一个相关行存在。

查询如下所示：

```
select *
from table1 t1
left outer join table2 t2 on t1.id = t2.table1_id
left outer join table3 t3 on t1.id = t3.table1_id
left outer join table4 t4 on t1.id = t4.table1_id 
```

如果你想要的表中有一个公共列，例如，`value`你可以像这样得到它：

```
select t1.*,
    coalesce(t2.value, t3.value, t4.value) as value
from table1 t1
left outer join table2 t2 on t1.id = t2.table1_id
left outer join table3 t3 on t1.id = t3.table1_id
left outer join table4 t4 on t1.id = t4.table1_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:54:16.407

我想我没有看到与子表建立关系的复合键有什么问题。如果这是您的逻辑模型的工作原理，请不要试图太聪明，并让任何试图找出依赖关系的人感到困惑。

举个例子，解决问题要容易得多，也许以下工作：

```
A college contains students, professors, and assistants. 
It needs to keep track of each individual's name and address. 
In addition it holds :
    for students, their GPA
    for professors, their office address
    for assistants, their professor 
```

我会建立一个类似于以下的模型：

```
person { person_id, name, address }
student { person_id, gpa }
professor { person_id, office_address }
assistant { person_id, professor_id } 
```

当我去实现这个时，我很可能会得到类似的结果：

```
CREATE TABLE person (
    person_id, type, name, address,
    PK (person_id)
)

CREATE TABLE student (
    person_id, gpa,
    PK(person_id),
    FK(person_id to person.person_id),
    CK(person.type = 'student')
) 
```

# asp.net-mvc - 如何将第一个字母大写

> ID：12712875
> 
> 赞同：8
> 
> 时间：2012-10-03T16:33:44.567
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, capitalization

我是 MVC 新手，还没有在线找到解决方案。

我的 html 为：

```
@Html.DisplayFor(model => model.Address1) <br /> 
```

我希望address1的所有第一个字母都是大写字母，例如Something Road而不是Something Road。

现在我有一个类客户端和属性 Address1 并使用 EF 获取地址如下：

```
 public class MyDBContext : DbContext
    {
        public DbSet<Client> Clients { get; set; }
    } 
```

希望这是有道理的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-08-24T10:28:52.030

简单的解决方案可能是

```
Html.EditorFor(model => model.FirstName, new { htmlAttributes = new { class = "form-control" } }) 
```

然后使用下面的css将你的第一个字母大写然后你就完成了。

```
.form-control {
text-transform:capitalize;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-03T16:44:36.133

您可以添加一个带有在标题案例`Client`中返回的属性的部分类：`Address1`

```
public partial class Client
{
    public string TitleCaseAddress1
    {
        get
        {
            return System.Globalization.CultureInfo.CurrentCulture.TextInfo.ToTitleCase(this.Address1);
        }
    }
} 
```

然后，您将`TitleCaseAddress1`在 Razor 中使用：

`@Html.DisplayFor(model => model.TitleCaseAddress1) <br />`

参考： http: [//msdn.microsoft.com/en-us/library/system.globalization.textinfo.totitlecase (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.globalization.textinfo.totitlecase(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T16:47:35.727

最好将表示层和数据访问层分开。创建一个包装或翻译 ORM / 实体框架对象的视图模型。

```
public class ClientViewModel
{
    private Client _dao;

    public ClientViewModel(Client dao)
    {
        _dao = dao;
    }

    public string Address 
    { 
        get
        {
            // modify the address as needed here
            return _dao.Address;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-06T17:50:28.330

对于希望在 Razor 中严格执行此操作的任何人，此示例正在转换登录的用户名。替换为您的字符串变量。

**这得到第一个字母并转换为大写：**

```
@(@User.Identity.GetUserName().ToString().Substring(0, 1).ToUpper()) 
```

**这将获得剩余的字符串。**

```
@(@User.Identity.GetUserName().ToString().Substring(1, 
    User.Identity.GetUserName().ToString().Length - 1)) 
```

**只需像这样将它们放在一起以获得整个字符串。**

```
@(@User.Identity.GetUserName().ToString().Substring(0, 
    1).ToUpper())@(@User.Identity.GetUserName().ToString().Substring(1, 
    User.Identity.GetUserName().ToString().Length - 1)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-03T19:36:21.243

这是完成您想要的**正确方法，我已经为您实现了它。**

有一个`HtmlStringFormatter.Create()`允许您传递委托并制作自己的匿名格式化程序。

**代码示例：**

```
// This just upper case all the letters.
@Html.DisplayFormatFor(model => model.Address, HtmlStringFormatter.Create(s=> s.ToUpper())) 
```

如果您要创建自定义格式化程序，请从其派生属性派生`HtmlStringFormatter`并将其设置为您想要执行的任何操作。

**代码示例：**

```
// Here I use the Capital Letter custom formatter.
@Html.DisplayFormatFor(model => model.Address, new CapitalLetterFormatter()) 
```

**所有课程：**

```
namespace MvcPlay.HelperExtensions
{
    public static class HelperExtensions
    {
        public static MvcHtmlString DisplayFormatFor<TModel, TValue>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TValue>> expression, HtmlStringFormatter formatter)
        {
            var output = helper.DisplayFor(expression);
            string formatted = formatter.Delegate.Invoke(output.ToString());
            return MvcHtmlString.Create(formatted);
        }
    }
}

namespace MvcPlay.HtmlStringFormatting
{
    public class HtmlStringFormatter
    {
        public delegate string FormatDelegate(string s);

        public FormatDelegate Delegate;
        public Expression<FormatDelegate> formatExpression;

        private HtmlStringFormatter(FormatDelegate expression)
        {
            Delegate = expression;
        }

        protected HtmlStringFormatter()
        {

        }

        public static HtmlStringFormatter Create(FormatDelegate expression)
        {
            return new HtmlStringFormatter(expression);
        }
    }

    public class CapitalLetterFormatter : HtmlStringFormatter
    {
        public CapitalLetterFormatter()
        {
            Delegate =
                s => new CultureInfo("en-US", false).TextInfo.ToTitleCase(s).ToString(CultureInfo.InvariantCulture);

        }
    }
} 
```

不要忘记将以下行添加到 Web.Config 的 Views 文件夹中：

```
<add namespace="MvcPlay.HelperExtensions" />
<add namespace="MvcPlay.HtmlStringFormatting"/> 
```

这将自动包含格式化程序和帮助程序扩展，因此您无需将其包含在要使用它的每个视图中。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-03T16:37:36.950

您可以为此使用 C# 代码：示例来自： http: [//www.dotnetperls.com/uppercase-first-letter](http://www.dotnetperls.com/uppercase-first-letter)

```
using System;

class Program
{
    static void Main()
    {
    Console.WriteLine(UppercaseFirst("samuel"));
    Console.WriteLine(UppercaseFirst("julia"));
    Console.WriteLine(UppercaseFirst("john smith"));
    }

    static string UppercaseFirst(string s)
    {
    // Check for empty string.
    if (string.IsNullOrEmpty(s))
    {
        return string.Empty;
    }
    // Return char and concat substring.
    return char.ToUpper(s[0]) + s.Substring(1);
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-21T04:53:50.057

只需简单地使用如下

```
@System.Globalization.CultureInfo.CurrentCulture.TextInfo.ToTitleCase(sampleText) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-18T20:45:57.380

我知道最初的问题是指将整个字符串中的每个单词都大写。但是，我来到这里试图找到一种将字符串的第一个字母大写的解决方案。我同意 kiflay 的回答作为 OP 的最佳解决方案。但是，在我的使用中，将其扩展为仅修改第一个字母。

CSS：

```
blockquote::first-letter {
text-transform: capitalize;} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-18T14:33:02.277

使用带有 Razor 的 Bootstrap 4.x，您可以使用 CSS 将第一个字母大写：

```
<p class="text-capitalize">CapiTaliZed text.</p> 
```

# php - 使用 REST API 的 Gearman Worker

> ID：12712878
> 
> 赞同：0
> 
> 时间：2012-10-03T16:33:57.100
> 
> 标签：php, rest, cakephp-2.0, gearman

我想检查一下这个概念以及每个人对它的看法。我想使用 Gearman 在后台运行几个任务（主要是数据收集和处理）。

我想围绕 PHP 框架设置 Gearman（在我的例子中，它是 CakePHP2）。据我了解Gearman，工人只是一个运行单个php 脚本（即worker.php）的PHP 守护进程。

我试图弄清楚如何将我已经在 PHP 框架中构建的逻辑/代码引入到单个工作脚本中。否则我发现我可能不得不重建很多东西，比如模型。

所以我的解决方案是让 worker.php 保持轻量级，而让 worker 脚本简单地通过 CURL 启动 REST API 调用。这听起来像是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:03:46.850

对我来说，进行 cURL 调用听起来有点开销。我首先会探索以下内容：

*   在工作人员中加载框架的一部分（比拨打电话然后调用框架便宜）
*   做一个“回电”的特殊工人。例如，真正的工作人员会做真正的工作，并在完成时将结果提交到“回调”队列。然后，该回调工作人员将接受来自 Gearman 的作业并从那里获取它们（就像 REST API 端点将从那里获取它一样）。

无论如何，除非您在机器之间拆分工作，否则进行额外的 HTTP 调用并不是一个好主意。如果您可以直接使用 PHP，为什么还要涉及 Apache？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T01:09:36.800

I am adding this as an addition to the answer but reply was too short.

I have been able to do the Gearman workers as a CakePHP console and wrap it around a supervisord config

```
// Add the example configs below
[program:my-gearman-test]
command= /path/to/cakephp/app/Console/cake gearman test
process_name= %(process_num)g-gearman-test
numprocs=1 
directory=/path/to/cakephp/app
autostart=true
autorestart=true
user=www-data
stdout_logfile=/path/to/logs/worker_stdout.log
stdout_logfile_maxbytes=1MB
stderr_logfile=/path/to/logs/worker_stderr.log
stderr_logfile_maxbytes=1MB 
```

Then I run supervisord, and it will start initializing the Cake console command. Now with the worker part of the CakePHP framework, I get all the goodness that comes from using a framework instead of doing a standalone worker.php script

# javascript - 我可以在我所有的 javascript 之外创建一个命名空间并像这样使用它：

> ID：12712886
> 
> 赞同：0
> 
> 时间：2012-10-03T16:34:41.690
> 
> 标签：javascript, jquery

我对如何处理命名空间有点困惑：

在我定义网站上所有页面布局的母版页中，我有以下内容：

```
<script type="text/javascript">
</script>
@Scripts.Render("~/bundles/theme")
@Scripts.Render("~/bundles/common")
@Scripts.Render("~/bundles/layout")
@Scripts.Render("~/bundles/user") 
```

这是布局包中唯一的脚本：

```
$(document).ready(function () {
    "use strict";
    addAjaxControls();
    addAccessControls();
    addBodyControls();
    addContentControls();
    addThemeControls();

    if (localStorage.getItem('Sidebar')) {
        var sidebar = localStorage.getItem('Sidebar');
        setSidebar(sidebar);
    }
    if (localStorage.getItem('Theme')) {
        var theme = localStorage.getItem('Theme')
        setTheme(theme);
    }
}); 
```

我想保持明确的定义，因此添加以下内容是否合理且是个好主意：

```
<script type="text/javascript">
    var Layout = Layout || {};
</script>
@Scripts.Render("~/bundles/theme")
@Scripts.Render("~/bundles/common")
@Scripts.Render("~/bundles/layout")
@Scripts.Render("~/bundles/user") 
```

然后在我的 layout.js 中：

```
$(document).ready(function () {
    "use strict";
    addAjaxControls();
    addAccessControls();
    addBodyControls();
    addContentControls();
    addThemeControls();

    if (localStorage.getItem('Sidebar')) {
        var Layout.sidebar = localStorage.getItem('Sidebar');
        setSidebar(Layout.sidebar);
    }
    if (localStorage.getItem('Theme')) {
        var Layout.theme = localStorage.getItem('Theme')
        setTheme(Layout.theme);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:35:54.250

这是行不通的：

```
var Layout.sidebar = localStorage.getItem('Sidebar'); 
```

简单地做

```
Layout.sidebar = localStorage.getItem('Sidebar'); 
```

这会将`sidebar`属性添加到`Layout`您之前创建的对象中。

# image - 隐藏在图片后面的文字

> ID：12712888
> 
> 赞同：1
> 
> 时间：2012-10-03T16:34:51.867
> 
> 标签：image, navigation, z-index

我有一个问题，我的徽标图像位于导航链接的顶部。我尝试了不同的 z-index 设置。

如果我将我的 .logo 设置`z-index:`为 -1，它将位于标题图像的后面，而导航链接则位于标题图像的上方。如果我将 .logo 设置`z-index`为 1 并将 nav0 设置为 2 或（就此而言为 500），我仍然会遇到与导航链接顶部的徽标图像相同的问题。

```
.headerFrame {
  height : 153px;
  background-color:#ffffff;
  background-image:url(headerBack.png);
  background-repeat:repeat-x;
}
.logo {
  padding : 5px;.headerFrame {
  height: 153px;
  background-color:#ffffff;
  background-image:url(headerBack.png);
  background-repeat:repeat-x;
}
.logo {
  padding: 5px;
  width: 805px;
  height: 90px;
  position: absolute;
  margin: 20 20 20 20;
  z-index: 1;
}
.logo a img{
  border: none;
  margin-left: auto;
  margin-right: auto; 
  text-align: center;
}
.accountNav {
  float: right;
  text-align: right;
  width: 380px;
  padding-top:6px;
  z-index: 2;
}
.menu0 {
  list-style: none;
  color: #808080;
  font-size: 14px;
}
.menu0 ul {
  margin: 0px;
  padding: 0px;
}
.menu0 li {
  float: left;
  z-index: 2;
}
.menu0 li a, .menu0 li a:visited {
  text-decoration: none;
  color: #0a0a0a;
  font-weight: normal;
  text-transform: uppercase;
  font-size: 14px;
  padding: 0 5px 0 8px;
}
.menu0 li a:hover {
  text-decoration: none;
  color: #f5f5f5;
  font-size: 14px;
  z-index: 2;
} 
```

# websocket - 清漆和 websocket 待定

> ID：12712889
> 
> 赞同：3
> 
> 时间：2012-10-03T16:34:54.190
> 
> 标签：websocket, varnish

我的目标是让我的静态文件由 nginx 提供，我的动态页面由 nodejs 提供。现在它工作得很好。但我目前正在使用 websocket 添加功能，nginx 目前不支持 websocket，所以我想在前面使用 varnish 将 websocket 连接直接路由到我的节点应用程序。

我按照[清漆文档](https://www.varnish-cache.org/docs/3.0/tutorial/websockets.html)中的说明设置了 conf，但它没有按预期工作。我的 websocket 处于挂起状态，这是它的正常行为，当它处于挂起状态时，清漆拒绝任何其他连接，即使在它关闭 2 分钟后...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T08:58:23.893

我不确定这是否是解决方案，但我认为你应该`connection: close`在你的`pipe`sub 中添加：

```
sub vcl_pipe {
    set bereq.http.connection = "close";
    return (pipe);
} 
```

# objective-c - iOS 6.0 Quicklook QLPreviewController 错误：“找不到加载代理的预览项目”

> ID：12712890
> 
> 赞同：7
> 
> 时间：2012-10-03T16:34:54.020
> 
> 标签：objective-c, ios, ios6, quicklook, qlpreviewcontroller

我的应用程序一直在使用 QLPreviewController 来显示所有类型的文件，在 iOS 5.x 中，它似乎做得很好。

现在，在 iOS 6.0 中，我收到一个错误，它显示了控制器，但带有一个恒定的加载指示器，并且从未实际加载任何内容。

日志中的错误是：**找不到加载代理的预览项目：<QLPreviewItemProxy: 0x8dbf480> - file://localhost/Users/me/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/E6A58F8D-71F3-4C7A -B16E-4BA017E318E5/Documents/temp//Welcome.docx**

iOS 6.0 中的 Quicklook 是否还有其他问题？或者有什么建议可以尝试？我已经通过 iPhone 和 iPad 尝试过，同时推动控制器并展示它。

编辑：还刚刚注意到有问题的URL（他们说的那个不好）不仅以file：//开头，而且以file：// localhost开头，而原始文件刚刚以实际路径开头（即：file：///用户）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T20:46:36.413

好吧，经过大量研究并从头开始重新创建一个基本的 QuickLook 查看器，我发现即使从该查看器中仍然会记录错误，但实际上显示的文档并非来自我的原始项目。

然后，我尝试将 QLPreviewController 放入 NavigationController 中，然后再呈现它并最终遇到同样的问题。在呈现之前，我将 QLPreviewController 包装在 UINavigationController 中，因为这似乎是为 navigationItem 分配自定义按钮的方式。这在 iOS 5.1 中运行良好（如上所述），但显然 iOS 6.0 不喜欢这样。

删除将 QLPreviewController 包装在 UINavigationController 中的额外代码似乎允许显示文档。

控制器被包装的示例：

```
QLPreviewController* previewer = [[QLPreviewController alloc] init];
previewer.dataSource = self;
previewer.delegate = self;
[previewer setCurrentPreviewItemIndex:0];

UINavigationController* previewNavCtrl = [[UINavigationController alloc] init];
[previewNavCtrl pushViewController:previewer animated:NO];

[self presentModalViewController:previewNavCtrl animated:YES]; 
```

改成：

```
QLPreviewController* previewer = [[QLPreviewController alloc] init];
previewer.dataSource = self;
previewer.delegate = self;
[previewer setCurrentPreviewItemIndex:0];

[self presentModalViewController:previewer animated:YES]; 
```

注意：代理错误似乎仍然出现在日志中

另外：如果没有 NavigationController，任何 UIBarButtonItem 自定义似乎都不再起作用 =/

**更新：我发现使用 fileURLWithpath 为 previewItemAtIndex 生成 fileURL 使原来的错误消失了。但是，在无法加载文档的地方仍然会出现同样的问题。**

一个新错误（我见过其他人也有）是：

> 无法为路径发出文件扩展名：/Users/me/Library/Application%20Support/iPhone%20Simulator/6.0/Applications/339DDF48-AF93-41B5-B81E-A39440A131C6/Documents/temp/Welcome1.docx

**最后更新：好的，扩展问题/错误是因为我试图手动将 %20 添加到空间（使用`[NSString stringByAddingPercentEscapesUsingEncoding]`等），而`[NSURL fileURLWithPath]`必须已经处理了。一旦我删除了它，它就起作用了，我现在使用的是 iOS 6 耶！所以真正的问题与 UINavigationController 无关，而实际上是通过 previewItemAtIndex 传递的文件 URL。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-08T11:12:03.500

如果有人面临同样的问题，我想回答这个老问题。

当您使用 Xcode 调试应用程序时，每次应用程序的 UUID 都会发生变化。**但这不适用于从设备加载应用程序时。**

例如：我得到了同一个应用程序的以下路径。

文档路径：file:///var/mobile/Applications/CBF533A7-C19A-4336-A92C-DC1A48242A8A/Documents/ 文档路径：file:///var/mobile/Applications/ADB99D3B-EACA-482D-BB8A-0C12B340A044/文件/

这可以通过在`- (id <QLPreviewItem>)previewController:(QLPreviewController *)controller previewItemAtIndex:(NSInteger)index`

```
NSString *documentsDirectoryPath = [NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES ) objectAtIndex:0];
NSURL *localDocumentsDirectoryURL = [NSURL fileURLWithPath:documentsDirectoryPath];
NSURL *fileURL =  [localDocumentsDirectoryURL URLByAppendingPathComponent:fileName isDirectory:NO];
return fileURL; 
```

*fileName 只是文件名 (medoc.pdf)，您可以在 Document 文件夹中找到该文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:18:05.133

我从远程 url 下载文件并保存在本地，然后使用 QLPreviewController 显示 PDF。在 iOS 6 中它可以工作。

首先，我使用以下代码从远程 url 保存文件：

```
NSString *local_location;

    NSString *path = [[NSBundle mainBundle] pathForResource:@"sampleData" ofType:@"plist"];
        path = NSTemporaryDirectory();
    local_location= [path stringByAppendingPathComponent:[NSString stringWithFormat:@"My_Invoice.pdf"]];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString: remoteurl]];
        [request setDownloadDestinationPath:local_location];
        [request startSynchronous];

For showing the Pdf :

QLPreviewController* preview = [[QLPreviewController alloc] init];
        preview.dataSource = self;
        [self presentModalViewController:preview animated:YES];

QLPreviewController delegate methods are :

- (NSInteger) numberOfPreviewItemsInPreviewController: (QLPreviewController *) controller
{
    return 1;
}

- (id <QLPreviewItem>)previewController:(QLPreviewController *)controller previewItemAtIndex:(NSInteger)index
{

    return [NSURL fileURLWithPath:local_location];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T12:51:49.260

1)

> **NSMutableArray * samplepdf = [[NSMutableArray alloc]initWithObjects:@"sam1.pdf",@"sam2.pdf",@"sam3.pdf",@"sam4.pdf", nil];**

//将pdf文件拖入强文本文档目录

2)

> **QLPreviewController *previewController = [[QLPreviewController alloc] init]; previewController.dataSource = self; previewController.currentPreviewItemIndex = [indexPath 行]; [self presentModalViewController:previewController Animation:YES];**

3) #pragma 标记 QLPreviewControllerDataSource

// 返回预览控制器应预览的项目数

**- (NSInteger)numberOfPreviewItemsInPreviewController:(QLPreviewController *)previewController** {

> **返回[样本pdf计数]；**

}

// 返回预览控制器应该预览的项目

**- (id)previewController:(QLPreviewController *)previewController previewItemAtIndex:(NSInteger)index** {

> NSString *documentsDirectoryPath = [[NSBundle mainBundle]resourcePath];
> 
> ```
> NSString *dataPath =[documentsDirectoryPath stringByAppendingPathComponent:[samplepdf objectAtIndex:index]];
> 
> NSURL *url = [NSURL fileURLWithPath:dataPath isDirectory:YES];  
> return url; 
> ```

}

# android - 我可以使用 Android API 创建两个操作栏菜单吗？

> ID：12712891
> 
> 赞同：1
> 
> 时间：2012-10-03T16:34:54.540
> 
> 标签：android, android-fragments, android-actionbar, android-menu

我想实现这样的布局：http: [//i.imgur.com/8W6Uc.png](https://i.imgur.com/8W6Uc.png)

该活动有两个片段，我想为每个片段显示一个菜单。

我不确定是否可以使用本机操作栏 API。

这个问题看起来很相关，但这个人正在使用名为“ActionBarSherlock”的第三方库：[处理带有两个片段的操作栏](https://stackoverflow.com/questions/10096625/handling-action-bars-with-two-fragments)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:10:47.227

使用本机操作栏 API 绝对不可能。您想要的与标准的 Android 设计背道而驰——即使屏幕上可能有多个片段，并且它们都可能对操作栏有所贡献，但仍然只有*一个*操作栏。这就是您链接到的问答所讨论的内容。

欢迎您推出自己的操作栏框架来做您正在寻找的事情，但请记住，您的用户可能会认为您的应用程序很奇怪。请确保对这些用户的价值大大超过了打破标准设计模式的成本。

# jquery - 输入名称的jQuery过滤器

> ID：12712892
> 
> 赞同：0
> 
> 时间：2012-10-03T16:34:58.883
> 
> 标签：jquery, jquery-ui

我正在创建一个显示连锁酒店列表的对话框。我的对话框创建正常

```
<div id="HotelDialog" class="popup ui-dialog-content ui-widget-content">
 <div class="popup-hotel">
  <div class="checkbox">
   <input id="ChainBR" type="checkbox" name="HotelChainBR" value="BR" checked="checked" onclick="filterChain();">
   <label for="ChainBR">BR Hotel</label>
  </div>
  <div class="checkbox">
   <input id="ChainBW" type="checkbox" name="HotelChainBW" value="BW" checked="checked" onclick="filterChain();">
   <label for="ChainBW">BW Hotel</label>
  </div>
  <div class="checkbox">
   <input id="ChainCI" type="checkbox" name="HotelChainCI" value="CI" checked="checked" onclick="filterChain();">
   <label for="ChainCI">CI Hotel</label>
  </div>
 </div>
</div> 
```

我的最终目标是用户将点击每家酒店，如果他们取消选中该框，则会有一个数据链值等于复选框值的 div 消失。我已经到了每次选中/取消选中复选框值时都尝试将复选框值输出到控制台的地步，但它每次只输出 BR。我在选择器语句中做错了什么？

```
<script type="application/javascript">
var hotelchains = [['BR'],['BW'],['CI']]; 

function filterChain() {
 for (loopcnt = 0; loopcnt <= (hotelchains.length-1); loopcnt++) {
  var singlechain = $('input[name^="HotelChain"]').val();
  console.log(singlechain);
 };
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T16:39:49.900

那是因为`val`只返回第一个选定元素的值，并且您在每次迭代中选择相同的元素，您可以使用`eq`or`each`方法：

```
$('input[name^="HotelChain"]').each(function(){
    var val = this.value;
    console.log(val)
}) 
```

或者：

```
var hotelchains = ['BR','BW','CI']; 
var $input = $('input[name^="HotelChain"]');

function filterChain() {
   for (var i = 0; i < hotelchains.length ; i++) {
      var singlechain = $input.filter('[name="HotelChain'+hotelchains[i]+'"]').val();
      console.log(singlechain);
   };
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:38:11.437

```
$('input[name^="HotelChain"]').val(); 
```

这只会输出选择器找到的第一个值..

这就是你总是看到**BR的原因**

还要检查你的数组..它应该像

```
var hotelchains = ['BR','BW','CI']; 
```

尝试这个

```
var hotelchains = ['BR','BW','CI']; 

function filterChain() {
 for (loopcnt = 0; loopcnt <= (hotelchains.length-1); loopcnt++) {
  var singlechain = $('input[name="HotelChain' + hotelchains[loopcnt] + '"]').val();
  console.log(singlechain);
 };​ 
```

# java - Swing JDialog 的内容窗格在执行幻灯片时未更新

> ID：12712900
> 
> 赞同：2
> 
> 时间：2012-10-03T16:35:25.390
> 
> 标签：java, swing, animation, jdialog, event-dispatch-thread

祝大家有美好的一天。

我想要实现的是，当按下按钮时，通过从底部滑入，在框架上出现一个对话框（带有键盘，但这超出了这个问题的范围）。

我是挥杆初学者，如果问题很明显，请不要责怪。
我抛出了一些代码，实现了这一点（有一些缺陷），但没有向用户显示开始和结束位置之间对话的实际位置。动画完成后会出现对话框，但不显示。有谁知道为什么不显示？

```
public class TestSliding
extends JFrame {

private static Window kbdOwner;
private static final double kbdHeightRatio = 1d / 4d;
private static final long kbdSlideDurationMs = 3000;

public static Point getKbdLocation() {
  int x = (int) kbdOwner.getBounds().getLocation().getX();
  int y =
    (int) (kbdOwner.getBounds().getLocation().getY() + kbdOwner.getBounds().getSize().getHeight() - getKbdSize()
        .getHeight());

  return new Point(x, y);
}

public static Dimension getKbdSize() {
  int width = (int) kbdOwner.getBounds().getSize().getWidth();
  int height = (int) (width * kbdHeightRatio);

  return new Dimension(width, height);
}

public static void main(String[] args) {
  SwingUtilities.invokeLater(new Runnable() {

    @Override
    public void run() {
      new TestSliding().setVisible(true);
    }
  });
}

private JButton toogleBtn = new JButton("Toogle");
private VirtualKeyboardSlide slide;

public TestSliding() {
  super();
  kbdOwner = this;
  setTitle("Test Sliding");
  setDefaultCloseOperation(EXIT_ON_CLOSE);
  setLayout(new BorderLayout());
  setBackground(Color.BLUE);

  setResizable(false);
  setSize(1024, 768);

  toogleBtn.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent argE) {
      switch (getSlide().getState()) {
        case OUT: {
          getSlide().in();
          break;
        }

        case IN: {
          getSlide().out();
          break;
        }
      }
    }
  });

  JPanel panel = new JPanel();
  getContentPane().add(panel);
  panel.add(toogleBtn);
}

public VirtualKeyboardSlide getSlide() {
  if (slide == null) {
    slide = new VirtualKeyboardSlide();
    slide.setDefaultCloseOperation(WindowConstants.DO_NOTHING_ON_CLOSE);
    slide.pack();
    slide.setSize(getKbdSize());
    slide.setLocation(getKbdLocation());
    slide.setVisible(true);
  }

  return slide;
}

public interface IVirtualKeyboardPane {
  public void in();
  public void out();
}

public class VirtualKeyboardSlide
....
// see below
....

public class VirtualKeyboardPane
....
// see below
....

} 
```

对话框：

```
private class VirtualKeyboardSlide
  extends JDialog {

private static final long serialVersionUID = 1L;

private KeyboardState kbdState_ = OUT;

private double height;
private double width;

/**
 * Constructs a <code>VirtualKeyboardDialog</code>.
 */
public VirtualKeyboardSlide() {
  this(new VirtualKeyboardPane());
}

public <T extends Container & IVirtualKeyboardPane> VirtualKeyboardSlide(T contentPane) {
  super(kbdOwner, ModalityType.MODELESS);
  setContentPane(contentPane);
  setUndecorated(true);
  setState(OUT);
  setBackground(new Color(0, 0, 0, 0));
}

/**
 * Returns the state of the keyboard
 * @return the state of the keyboard
 */
public synchronized KeyboardState getState() {
  return kbdState_;
}

public void in() {
  if (canSlideIn()) {
    setState(SLIDING_IN);

    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        getVirtualKeyboardPane().in();
        setState(IN);
      }
    });
  }
}

public void out() {
  if (canSlideOut()) {
    setState(SLIDING_OUT);

    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        getVirtualKeyboardPane().out();
        setState(OUT);
      }
    });
  }
}

/**
 * Sets the keyboard state
 * @param argState
 */
public synchronized void setState(KeyboardState argState) {
  kbdState_ = argState;
}

/**
 * Returns true if the keyboard can slide in now
 * @return true if the keyboard can slide in now
 */
protected boolean canSlideIn() {
  if (!getState().equals(OUT)) {
    return false;
  }

  return true;
}

/**
 * Returns true if the keyboard can slide out now
 * @return true if the keyboard can slide out now
 */
protected boolean canSlideOut() {
  if (!getState().equals(IN)) {
    return false;
  }

  return true;
}

protected IVirtualKeyboardPane getVirtualKeyboardPane() {
  return (IVirtualKeyboardPane) getContentPane();
}

} 
```

KeyboardState 是一个定义键盘状态的枚举：

```
public enum KeyboardState {
  SLIDING_IN, SLIDING_OUT, IN, OUT, DIED
} 
```

对话框的内容窗格由以下类表示：

```
public class VirtualKeyboardPane
  extends JPanel
  implements IVirtualKeyboardPane {

private static final long serialVersionUID = 1L;

private int height_;
private int width_;

private int normalHeight_;
private int normalWidth_;

private int x_;
private int y_;

public VirtualKeyboardPane() {
  super();
  setFocusable(false);
  setOpaque(false);
  setBorder(BorderFactory.createEmptyBorder());
}

/** {@inheritDoc} */
@Override
public void in() {
  normalHeight_ = (int) getKbdSize().getHeight();
  normalWidth_ = (int) getKbdSize().getWidth();
  width_ = normalWidth_;
  x_ = 0;
  y_ = 0;

  long currentTime = System.currentTimeMillis();
  long startTime = currentTime;
  long endTime = currentTime + kbdSlideDurationMs;

  height_ = 0;
  while (currentTime < endTime) {
    long elapsedTime = currentTime - startTime;
    float f = ((float) elapsedTime / (float) kbdSlideDurationMs);

    height_ = (int) (f * normalHeight_);

    y_ = normalHeight_ - height_;

    repaint();
    currentTime = System.currentTimeMillis();
  }
}

/** {@inheritDoc} */
@Override
public void out() {
  normalHeight_ = (int) getKbdSize().getHeight();
  normalWidth_ = (int) getKbdSize().getWidth();
  width_ = normalWidth_;
  x_ = 0;
  y_ = normalHeight_;

  long currentTime = System.currentTimeMillis();
  long startTime = currentTime;
  long endTime = currentTime + kbdSlideDurationMs;

  height_ = normalHeight_;
  while (currentTime < endTime) {
    long elapsedTime = currentTime - startTime;
    float f = ((float) elapsedTime / (float) kbdSlideDurationMs);

    height_ = normalHeight_ - (int) (f * normalHeight_);

    y_ = normalHeight_ - height_;

    repaint();
    currentTime = System.currentTimeMillis();
  }
}

@Override
protected void paintComponent(Graphics g) {
  super.paintComponent(g);
  g.setColor(new Color(RGBToFloat(255), RGBToFloat(255), RGBToFloat(255), 0.5f));
  // g.fillRect((int) x_, (int) y_, (int) width_, (int) height_);
  g.fillRect(x_, y_, width_, height_);
}

private float RGBToFloat(int rgbValue) {
  return (rgbValue - 0.5f) / 255f;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:14:46.670

问题是您的方法`in()`和`out()`在 EDT 上运行并阻止它直到它们结束，这会阻止 Repaint 事件被调度并显示键盘的修改位置。

改用 Swing 计时器来调整动画的节奏。这将允许实际发生中间重绘。

# lift - 在电梯中优化搜索的最佳方法？

> ID：12712903
> 
> 赞同：0
> 
> 时间：2012-10-03T16:35:29.667
> 
> 标签：lift

我需要渲染一个对象列表，可以对某些变量进行动态优化。例如更改项目的顺序。一个例子可以是：[https ://www.airbnb.it/s/California](https://www.airbnb.it/s/California)

一种可能是：

*   根据变量构建 REST API 进行细化；
*   使用 SHtml 嵌入 UI 细化元素并触发 Js 函数；
*   编写一个调用 REST API 并呈现 HTML 的 Js 函数；

还有其他解决方案吗？一个优点是我将使用 REST API 在 Tablet/Smarthpone 上进行开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T14:44:05.377

你在这里需要的是平衡。最好使用 REST API (json/xml) 提取所有数据并解析它并存储在客户端。时间到了，如果可能，优化应该在客户端工作，如果有必要，从服务器中提取更多数据。所以在你的情况下，我会坚持使用 REST API 来提取数据，然后客户端应该负责渲染。它稍微复杂一些，但从长远来看会有所回报。此外，如果您不想创建移动应用程序，那么您需要 API 来调用。使用 REST API，您可以重构代码，以便 Lift 生成的 html/js 和 API 调用相同的核心函数并从代码重用中受益。

# batch-processing - 如何检查用户输入是否以批处理（.bat）脚本中的特定字符串结尾

> ID：12712905
> 
> 赞同：18
> 
> 时间：2012-10-03T16:35:35.937
> 
> 标签：batch-processing, batch-file

我正在编写一个批处理脚本，如果用户输入为空或不以“DTO”结尾，我需要要求用户再次输入 DTO 名称。

```
:INPUT
SET /P INPUTDTO=Enter the DTO:

IF "%INPUTDTO%"=="" (
      IF "%INPUTDTO%" ??????? (
             GOTO NODTO
      )
)

:NODTO
ECHO ERROR: Please enter a valid DTO.
GOTO INPUT 
```

如何检查用户输入是否以“DTO”结尾

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-03T17:09:40.103

可能应该清除现有的 INPTDTO 值，因为如果用户不输入任何内容，SET /P 将保留现有值。

```
@echo off
set "INPUTDTO="
:INPUT
SET /P INPUTDTO=Enter the DTO:
if "%INPUTDTO:~-3%" neq "DTO" (
  ECHO ERROR: Please enter a valid DTO.
  goto INPUT
) 
```

`/I`如果您希望比较不区分大小写，请将开关添加到 IF 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:10:03.923

逻辑很简单，首先从原始字符串中删除任何出现的“DTO”并将其存储到另一个变量中。`INTPUTDTO`然后将其与在末尾添加“DTO”的原始变量进行比较。

```
:INPUT
SET /P INPUTDTO=Enter the DTO:
SET NEWINPUTDTO=%INPUTDTO:DTO=%

IF "%INPUTDTO%"=="" (
      IF NOT "%NEWINPUTDTO%DTO"=="%INPUTDTO%"  (
             GOTO NODTO
      )
)

:NODTO
ECHO ERROR: Please enter a valid DTO.
GOTO INPUT 
```

另外，如果你不关心脚本的复杂性，那么就使用这个：

```
IF NOT "%INPUTDTO:DTO=%DTO"=="%INPUTDTO%" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T17:17:34.790

如果您愿意使用其他软件，您可以使用 GnuWin32 中的 grep。它会让你回到 1.5MB

```
@echo off
:INPUT
SET /P INPUTDTO=Enter the DTO:

echo %INPUTDTO% | grep .*DTO\b

IF %ERRORLEVEL%==1 (
 goto NODTO
)
goto:eof
:NODTO
 ECHO ERROR: Please enter a valid DTO.
 GOTO INPUT 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T17:11:43.047

也许您可以使用此处描述的子字符串功能：[在批处理文件中执行子字符串的最佳方法是什么？](https://stackoverflow.com/questions/636381/what-is-the-best-way-to-do-a-substring-in-a-batch-file).

然后将该子字符串与“DTO”进行比较。

# drupal-7 - 如何在第一段之后在节点内插入/添加区域

> ID：12712907
> 
> 赞同：0
> 
> 时间：2012-10-03T16:35:37.810
> 
> 标签：drupal-7, drupal-theming

我正在尝试在节点内插入一个块。问题是我希望它在第 X 段之后自动出现，最好是在第一段之后。

AdSense Injector 模块 (http://drupal.org/project/adsense_injector) 非常有用，但它不是很灵活，因为您只能插入一个代码。由于我打算在不同的情况下插入不同的块，我想在第一段之后插入一个区域。

有一个教程 (www.werockyourweb.com/drupal-insert-adsense-ads-into-middle-of-content) 似乎不适用于 Drupal 7。

这是视觉解释：

```
<h1>Title</h1>
<p>Some text here</p>
<div>BLOCK INSIDE OF THE NEW REGION</div>
<p>Some text here</p> 
```

有人可以提供一些指导吗？

编辑：

这是我正在使用的代码。

块代码：

```
<h2>Is this working?</h2> 
```

.info 文件：

```
regions[testing] = 'Testing' 
```

模板.php

```
function THEMENAME_preprocess_node(&$variables) {

//load your adblock
$testing = block_load('block', '1');
$output .= drupal_render(_block_get_renderable_array(_block_render_blocks(array($testing))));
$variables['ad'] = $output; 
} 
```

节点.tpl.php

```
<?php
$array = explode("</p>", $body[0]['value']);
$array[1] = $ad. $array[1];
$content['body'] = implode("</p>", $array);
print render($content['body']);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:47:18.263

您链接中的代码是：

```
$array = explode("", $body[0]['value']);
$array[1] = $ad. $array[1];
$content['body'] = implode("", $array);
print render($content['body']); 
```

That looks like it should work, except I can't figure out why it's providing a blank delimiter for explode() . What if you ran explode and implode with the first parameter set to `"</p>"`?

# iphone - 使用仪器进行内存泄漏检测

> ID：12712910
> 
> 赞同：0
> 
> 时间：2012-10-03T16:35:45.220
> 
> 标签：iphone, memory-leaks

我想弄清楚这段代码中的内存泄漏在哪里？

```
- (NSMutableArray *) fetchAidDetails:(NSNumber *) rowID {
    NSMutableArray *list = [[NSMutableArray alloc] init];    
    FMDatabase *db = [[FMDatabase databaseWithPath:[self dbPath]] retain];
    if(![db open]) {
        [db release];        
        return [list autorelease];
    }

    NSString *query = [NSString stringWithFormat:@"select legislative_type, legislative_name from legislative_aid where official_id = %d", rowID.unsignedIntValue];

    FMResultSet *result = [[db executeQueryWithFormat:query] retain];

    while ([result next]) {
        NSMutableDictionary *item = [[NSMutableDictionary alloc] init];        
        NSString *type = [[NSString alloc] init];
        type = [result stringForColumn:@"legislative_type"];
        [item setObject:type forKey:@"legislative_type"];
        [type release];

        NSString *party = [[NSString alloc] init];
        party = [result stringForColumn:@"legislative_name"];
        [item setObject:party forKey:@"legislative_name"];
        [party release];

        [list addObject:item];
        [item release];
    }

    [result release];
    [db close];
    [db release];

    return [list autorelease];
} 
```

[item retainCount] 在 [item release] 之​​前给出 2，并且 [list autorelease] 将使引用计数为 0，我这里有什么问题吗？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:39:30.270

```
NSString *type = [[NSString alloc] init];
type = [result stringForColumn:@"legislative_type"]; 
```

您正在创建一个保留计数为 1 的 NSString“类型”，但随后为其分配了一个不同的对象。删除第一行并使用它：

```
NSString *type = [result stringForColumn:@"legislative_type"]; 
```

您还需要删除`[type release]`since`stringForColumn`返回一个自动释放的 NSString（至少如果它遵守 Cocoa 命名约定）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:46:18.970

*   不要依赖`retainCount`。系统或类的内部代码可以在内部保留您的对象并在以后发布它，这是他们的业务，您无法知道，因此您真的不知道在`retainCount`. 这不是寻找泄漏的好方法

*   在您的代码中多次分配一个对象（在您的情况下是一个`NSString`），然后忽略它以使用其他值覆盖变量：

    ```
    NSString *party = [[NSString alloc] init]; // You allocate memory for an NSString object
    party = [result stringForColumn:@"legislative_name"]; // then you completely forget about it and override your party variable with a different object 
    ```

就像你在做的那样：

```
int i = 5;
i = 12; 
```

当然，第一个值是无用的，也不需要。但是对于您的代码，您从不使用的这个值分配的内存永远不会被回收，因此它会泄漏。

*   然后，在您将另一个对象影响到您的`party`变量之后，您稍后将 a 发送`release`到这个新对象。但是`party`已经包含了一个自动释放的对象，正如您`[result stringForColumn:xxx]`对它的影响，并且根据代码命名约定，此方法返回一个自动释放的对象。所以你不需要`release`在这个新对象上发送一个。

所以你的循环应该看起来像下面这样：

```
while ([result next])
{
  @autoreleasepool {
    NSMutableDictionary *item = [[NSMutableDictionary alloc] init];        
    NSString *type = [result stringForColumn:@"legislative_type"];
    [item setObject:type forKey:@"legislative_type"];

    NSString *party = [result stringForColumn:@"legislative_name"];
    [item setObject:party forKey:@"legislative_name"];

    [list addObject:item];
    [item release];
  }
} 
```

# android - 将 backstack 与 ViewPager 一起使用

> ID：12712917
> 
> 赞同：9
> 
> 时间：2012-10-03T16:36:15.720
> 
> 标签：android, android-viewpager, back-stack

我正在使用 ViewPager 在我的 android 应用程序中实现滑动。但是，我希望在用户使用后退按钮而不是结束活动时显示上一个片段。有没有办法做到这一点？谢谢塞巴斯蒂安

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-09-26T16:15:46.523

我有一个类似的问题，这就是我解决它的方法。我有一个带有 6 个片段的 ViewPager，并且想要跟踪页面历史记录并能够使用后退按钮在历史记录中向后导航。我创建一个`java.util.Stack<Integer>`对象，向它添加片段编号（使用后退按钮时除外，见下文），并`onBackPressed()`在我的历史堆栈不为空时覆盖以使其弹出最后查看的片段而不是使用后退堆栈。

当您按下后退按钮时，您希望避免将元素推入堆栈，否则如果您继续使用后退按钮，您将卡在两个片段之间，而不是最终退出。

我的代码：

```
MyAdapter mAdapter;
ViewPager mPager;
Stack<Integer> pageHistory;
int currentPage;
boolean saveToHistory;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mAdapter = new MyAdapter(getSupportFragmentManager());
    mPager = (ViewPager)findViewById(R.id.container);
    mPager.setAdapter(mAdapter);
    mPager.setOffscreenPageLimit(5);

    pageHistory = new Stack<Integer>();
    mPager.setOnPageChangeListener(new OnPageChangeListener() {

        @Override
        public void onPageSelected(int arg0) {
            if(saveToHistory)
                pageHistory.push(Integer.valueOf(currentPage));
        }

        @Override
        public void onPageScrolled(int arg0, float arg1, int arg2) {
        }

        @Override
        public void onPageScrollStateChanged(int arg0) {
        }
    });
    saveToHistory = true;
}

@Override
public void onBackPressed() {
    if(pageHistory.empty())
        super.onBackPressed();
    else {
        saveToHistory = false;
        mPager.setCurrentItem(pageHistory.pop().intValue());
        saveToHistory = true;
    }
}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-07-20T06:03:08.063

在 Fragment Activity 中覆盖以下方法应该可以解决您的问题。

```
@Override
public void onBackPressed() {
    if (mViewPager.getCurrentItem() == 0) {
        // If the user is currently looking at the first step, allow the system to handle the
        // Back button. This calls finish() on this activity and pops the back stack.
        super.onBackPressed();
    } else {
        // Otherwise, select the previous step.
        mViewPager.setCurrentItem(mViewPager.getCurrentItem() - 1);
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-03T16:40:27.930

覆盖您的功能`Activity`：

```
public class Activity extends Activity
{
    @Override
    public void onBackPressed()
    {
        // do stuff
        myFragment.onBackPressed();
    }
}

public class Fragment extends Fragment
{

    public void onBackPressed()
    {
        // do stuff
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-11-16T03:20:58.160

如果您使用的是 Jetpack Navigation 组件，那么您很可能只有一个 Activity 并试图管理 Fragment 内的 backstack。在这种情况下，[OnBackPressedDispatcher](https://developer.android.com/reference/androidx/activity/OnBackPressedDispatcher)就派上用场了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-09T01:34:44.150

我有同样的问题，我按照这个步骤（**编辑了我的答案---当然对我有用，试一试**）

在 viewpager 中有 3 个片段的主要活动中，我创建堆栈并推送和弹出数据。

```
private Stack<Integer> stackkk;
private ViewPager mPager;
private int tabPosition = 0;

    mTabLayout.setupWithViewPager(mPager);
    mPager.addOnPageChangeListener(new TabLayout.TabLayoutOnPageChangeListener(mTabLayout));
    mTabLayout.setOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {
        @Override
        public void onTabSelected(TabLayout.Tab tab) {
            tabPosition = tab.getPosition();
            mPager.setCurrentItem(tab.getPosition());

// here i have add the data into the stack in each tab click, as at first it will always be null so i add 0 position

            if (stackkk.empty())
                stackkk.push(0);

            if (stackkk.contains(tabPosition)) {
                stackkk.remove(stackkk.indexOf(tabPosition));
                stackkk.push(tabPosition);
            } else {
                stackkk.push(tabPosition);
            }
        }

        @Override
        public void onTabUnselected(TabLayout.Tab tab) {
            tabPositionUnselected = tab.getPosition();
        }

        @Override
        public void onTabReselected(TabLayout.Tab tab) {
        }
    });
} 
```

并在 onBackPressed 活动中，

```
//OnbackPress i have first taken out the last one as it already and
//selected by poping it out then only set to the pager.
@Override
public void onBackPressed() {
    if (stackkk.size() > 1) {
        stackkk.pop();
        mPager.setCurrentItem(stackkk.lastElement());
    } else {
    }
} 
```

希望这可以帮助或给我发信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-04T17:43:05.140

参考@Piero Nicolli 代码和 kotlin

一旦您访问了相同的选项卡，此 anwser 将与 instagram 导航相同，您将不会再次访问它

```
 val pageHistory = Stack<Int>()
  var saveToHistory = false
  var viewPager: ViewPager? = null 
```

**如果您在 Fragment 中使用 viewPager，则在 Oncreate 或 OncreateView 内**

```
viewPager?.adapter = viewPagerAdapter

 pageHistory.push(0);
        viewPager?.addOnPageChangeListener(object : ViewPager.OnPageChangeListener {
            override fun onPageScrolled(
                position: Int,
                positionOffset: Float,
                positionOffsetPixels: Int,
            ) {

            }

            override fun onPageSelected(position: Int) {
                if (saveToHistory) {
                    if (pageHistory.contains(position)) {
                        pageHistory.remove(position)
                        pageHistory.push(position);
                    } else {
                        pageHistory.push(position);
                    }
                }
            }

            override fun onPageScrollStateChanged(state: Int) {
            }
        })
        saveToHistory = true;
        requireActivity().onBackPressedDispatcher.addCallback(viewLifecycleOwner) {
            // Handle the back button event
            Log.i(TAG, "pageHistory size ${pageHistory.size}")
            if (pageHistory.size > 1) {

                saveToHistory = false;
                pageHistory.pop()
                viewPager?.currentItem = pageHistory.peek()
                saveToHistory = true;

            } else {
                Log.i(TAG, "pageHistory inside 0 size ${pageHistory.size}")

                if(pageHistory.size ==1){
                    pageHistory.pop()
                }
                if (viewPager?.currentItem == 0){
                    requireActivity().finish()
                }else{
                    viewPager?.currentItem = 0
                }
            }

        } 
```

当我使用 Fragment 时，后退按钮有回调 onBackPressedDispatcher。如果您在 Activity 中使用 viewpager，则将代码从 onBackPressedDispatcher() 复制到 onBackPressed()

# ruby - 多个红宝石安装，肮脏的混乱

> ID：12712921
> 
> 赞同：1
> 
> 时间：2012-10-03T16:36:28.823
> 
> 标签：ruby

我以前在我的系统上安装了 ruby​​ 1.8.7。一段时间后我安装了rvm。从那时起，就出现了巨大的混乱。例如，尝试启动 Sinatra 服务器会导致：

```
/home/yoni/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find rack (>= 0) amongst [bundler-1.1.3, faraday-0.8.4, koala-1.5.0, multi_json-1.3.6, multipart-post-1.1.5, rake-0.9.2.2, rubygems-bundler-0.9.0, rvm-1.11.3.3] (Gem::LoadError) 
```

我知道这是安装两个 ruby​​ 的结果，因此有两个 gem 文件的位置，但我不知道如何解决这个问题。我不介意完全删除 ruby​​ 1.8.7，但我想在不破坏任何东西的情况下这样做。

有任何想法吗？

**更新**：结果`dpkg --get-selections | grep ruby`是：

```
libdataobjects-mysql-ruby1.8            install
libdataobjects-postgres-ruby1.8         install
libdataobjects-ruby1.8              install
libdataobjects-sqlite3-ruby1.8          install
libdbd-mysql-ruby               install
libdbd-mysql-ruby1.8                install
libdbd-sqlite3-ruby1.8              install
libdbi-ruby1.8                  install
libdeprecated-ruby1.8               install
libmysql-ruby                   install
libmysql-ruby1.8                install
libopenssl-ruby                 install
libopenssl-ruby1.8              install
libruby1.8                  install
libruby1.9.1                    deinstall
libsqlite3-ruby                 install
libsqlite3-ruby1.8              install
ruby-dev                    install
ruby1.8-dev                 install 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:57:17.693

```
apt-get --purge remove packagename 
```

`dkpg --list | grep ruby`从不在下面列表中显示的所有内容中：

从`rvm requirements`

```
Additional Dependencies:
# For Ruby / Ruby HEAD (MRI, Rubinius, & REE), install the following:
  ruby: /usr/bin/apt-get install build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion pkg-config 
```

如果 CLI 无法实现，请使用 synaptic 包管理器：

[https://help.ubuntu.com/community/SynapticHowto](https://help.ubuntu.com/community/SynapticHowto)

# scala - Scala 鸭子类型匹配

> ID：12712922
> 
> 赞同：8
> 
> 时间：2012-10-03T16:36:30.907
> 
> 标签：scala, pattern-matching, case-class

我有一个案例类，如下所示：

```
// parent class
sealed abstract class Exp()

// the case classes I want to match have compatible constructors
case class A (a : Exp, b : Exp) extends Exp
case class B (a : Exp, b : Exp) extends Exp
case class C (a : Exp, b : Exp) extends Exp

// there are other case classes extending Exp that have incompatible constructor, e.g.
//     case class D (a : Exp) extends Exp
//     case class E () extends Exp
// I don't want to match them 
```

我想匹配：

```
var n : Exp = ...
n match {
    ...
    case e @ A (a, b) => 
        foo(e, a)
        foo(e, b)
    case e @ B (a, b) => 
        foo(e, a)
        foo(e, b)
    case e @ C (a, b) => 
        foo(e, a)
        foo(e, b)
    ...
}

def foo(e : Exp, abc : Exp) { ... } 
```

有没有办法将这三个案例合并为一个案例（不向 A、B、C 添加中间父类）？我无法更改 A、B、C 或 Exp 的定义。某一些：

```
var n : Exp = ...
n match {
    ...
    case e @ (A | B | C) (a, b) => // invalid syntax
        foo(e, a)
        foo(e, b)
    ...
} 
```

这显然不起作用，也没有：

```
var n : Exp = ...
n match {
    ...
    case e @ (A (a, b) | B (a, b) | C (a, b)) => // type error
        foo(e, a)
        foo(e, b)
    ...
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-03T16:53:56.413

虽然以下“解决方案”实际上只是编写已有内容的另一种方式，但如果您需要`match`在多个地方使用相同的解决方案并希望避免代码重复，它可能会有所帮助。

以下自定义取消应用：

```
object ExpABC {
    def unapply(e:Exp):Option[(Int, Int)] = e match {
        case A(a, b) => Some(a, b)
        case B(a, b) => Some(a, b)
        case C(a, b) => Some(a, b)
        case _ => None
    }
} 
```

允许你写

```
n match {
    case e @ ExpABC(a, b) =>
        println(e)
        println(a)
        println(b)
} 
```

这样，您根本不需要修改原始类。我不知道不涉及修改 A/B/C 类的更好方法，但我很想学习 @Stackoverflow ;)

# r - 在 R 中转换天数

> ID：12712927
> 
> 赞同：0
> 
> 时间：2012-10-03T16:36:48.427
> 
> 标签：r

我在数据框中有 2 个日期变量 WK_BEGIN_DT 和 WK_END_DT，比如 DAT。这两个都是字符格式。我正在尝试获得以下内容。我在这里使用 SAS 命令，但想在 R 中做同样的事情。

我的数据如下所示：

```
var1    Begin_DT      End_DT
 1    02/07/2012    02/11/2012
 2    04/09/2012    04/15/2012
 3    04/17/2012    04/23/2012
 4    06/21/2012    06/30/2012
 5    07/15/2012    07/29/2012 
```

SAS代码：

```
DATA DAT;
  set DAT;
## PART 1: ##

  WK_BEGIN_DT = BEGIN_DT - 2 ;
  WK_END_DT   = WK_BEGIN_DT + 6 ;

## PART 2: ##

  if WEEKDAY(WK_END_DT) ^= 6 then do ;
    if weekday(WK_END_DT) = 7 then WK_END_DT = WK_END_DT + 6 ;
      else WK_END_DT = WK_END_DT + 6 - weekday(WK_END_DT) ; 
  end ; 
```

对于第 1 部分问题，我尝试了

```
DAT$new.dt <- DAT$wk_end_dt - as.difftime(2, unit="days") 
```

计算后，结果应如下所示：

```
var1    Begin_DT      End_DT      Wk_Begin_DT  WK_END_DT
 1    02/07/2012    02/11/2012    02/05/2012  02/12/2012
 2    04/09/2012    04/15/2012    04/07/2012  04/15/2012
 3    04/17/2012    04/23/2012    04/15/2012  04/23/2012
 4    06/21/2012    06/30/2012    06/19/2012  06/25/2012
 5    07/15/2012    07/29/2012    07/13/2012  07/21/2012 
```

但它显示以下错误：

```
Error in `$<-.data.frame`(`*tmp*`, "new.dt", value = numeric(0)) : 
  replacement has 0 rows, data has 2354 
```

谁能帮助我如何获得第 1 部分和第 2 部分的结果？

谢谢你。问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:37:34.690

```
df <- read.table(textConnection("var1    Begin_DT      End_DT
 1    02/07/2012    02/11/2012
 2    04/09/2012    04/15/2012
 3    04/17/2012    04/23/2012
 4    06/21/2012    06/30/2012
 5    07/15/2012    07/29/2012"), header = T)

# Then typecast your dates to a date format
df$Begin_DT <- as.Date(strptime(df$Begin_DT, "%m/%d/%Y"))
df$End_DT <- as.Date(strptime(df$End_DT, "%m/%d/%Y"))

df$Week_begin <- df$Begin_DT - 2
df$Week_end <- df$Week_begin + 6

library(plyr)
library(lubridate)
# If you dont have these packages, 
# run install.packages('plyr') and install.packages('lubridate')
ddply(df, .(Week_end), function(x) {
     if(day(x$Week_end) !=6 && day(x$Week_end) == 7) {
                x$Week_end <- x$Week_end + 6
            } else {
                x$Week_end <- x$Week_end + 6 - wday(x$Week_end)
            }
     x
    }) 
```

# gstreamer - GStreamer - MJPEG 流到文件

> ID：12712931
> 
> 赞同：4
> 
> 时间：2012-10-03T16:37:05.543
> 
> 标签：gstreamer, pipeline, mjpeg

我在将`MJPEG`流保存到文件时遇到问题。当我`MJPEG`使用这样的管道流式传输时：

```
gst-launch filesrc location=thirdmovie640x360.mp4 ! decodebin2 name=dec \
    ! queue ! ffmpegcolorspace ! jpegenc ! queue ! avimux name=mux \
    ! udpsink host=192.168.0.2 port=5000 
```

我可以使用这样的管道在我的第二台机器上播放这个流：

```
gst-launch -v udpsrc port=5000 ! jpegdec ! autovideosink 
```

但是，如何将此类`MJPEG`流保存到可以在某些媒体播放器中播放的文件（无需转码！）？你能推荐一些管道吗？

* * *

我发现这样的管道可以将输出流保存为 matroska 文件：

```
gst-launch udpsrc port=5000 ! multipartdemux ! jpegparse ! jpegdec \
    ! ffmpegcolorspace ! matroskamux ! filesink location=output.mkv 
```

如何更改它以保存 mp4 文件？这样的管道：

```
gst-launch udpsrc port=5000 ! multipartdemux ! jpegparse ! jpegdec \
    ! ffmpegcolorspace ! mp4mux ! filesink location=output.mp4 
```

不起作用。您能否帮我将其保存为 mp4 容器（或 avi 容器）而不对 MJPEG 视频进行转码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T11:02:51.097

我解决了我的问题。这是我正在寻找的管道：

**服务器**

```
gst-launch filesrc location=thirdmovie640x360.mp4 ! decodebin2 name=dec
! queue ! ffmpegcolorspace ! jpegenc ! queue ! multipartmux
! udpsink host=192.168.0.4 port=5000 
```

**客户**

```
gst-launch udpsrc port=5000 ! multipartdemux ! image/jpeg, framerate=25/1 
! jpegparse ! jpegdec ! ffmpegcolorspace ! jpegenc
! avimux ! filesink location=output.avi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T22:41:57.430

MJPEG 是一种编解码器，简单来说意味着有一系列 jpeg 图像。如果您想将这些 jpeg 作为视频查看，则必须将它们存储在容器中。MP4 是存储它们的常用容器。

因此，您可以将 jpegenc 输出复用回 mp4mux 并将其存储在文件中。任何体面的媒体播放器都应该能够播放它。

# php - 在 magento 布局中使用更新句柄设置根模板失败

> ID：12712932
> 
> 赞同：0
> 
> 时间：2012-10-03T16:37:16.340
> 
> 标签：php, magento

我正在使用以下内容将新的布局句柄应用于联系人页面：

```
<update handle="test_contacts_set_root" /> 
```

我可以验证正在应用布局句柄。

不幸的是，以下内容现在有效：

```
<test_contacts_set_root>
    <reference name="root">
        <action method="setTemplate"><template>page/1column.phtml</template></action>
    </reference>
</test_contacts_set_root> 
```

这是更改根模板的非常标准的布局代码。不幸的是，当与自定义布局句柄一起应用时，它没有任何效果。

我怀疑这与布局系统中的某种排序有关。

这是我的contacts.xml的全部内容

```
<layout version="0.1.0">
    <default>
        <reference name="footer_links">
            <action method="addLink" translate="label title" module="contacts" ifconfig="contacts/contacts/enabled"><label>Contact Us</label><url>contacts</url><title>Contact Us</title><prepare>true</prepare></action>
        </reference>
    </default>

    <contacts_index_index translate="label">
        <label>Contact Us Form</label>
        <reference name="head">
            <action method="setTitle" translate="title" module="contacts"><title>Contact Us</title></action>
        </reference>
        <reference name="root">
            <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
            <action method="setHeaderTitle" translate="title" module="contacts"><title>Contact Us</title></action>
        </reference>

        <update handle="test_contacts_set_root" />

        <reference name="content">
            <block type="core/template" name="contactForm" template="contacts/form.phtml"/>
        </reference>
    </contacts_index_index>

    <test_contacts_set_root>
        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
    </test_contacts_set_root>

</layout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T19:00:23.137

您对布局给出了 2 个不同的指令：首先 magento 尝试使用句柄 test_contacts_set_root 并尝试设置 1column 模板，然后它遇到命令“嘿，将模板设置为 2columns-right.phtml”

```
<reference name="root">
    <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
    <action method="setHeaderTitle" translate="title" module="contacts"><title>Contact Us</title></action>
</reference> 
```

Magento 不考虑在 xml 节点中放置指令的顺序。所以首先它会在块之后查看句柄，并且仅在块渲染动作执行期间。您可以查看 Mage_Core_Model_Layout 和 Mage_Core_Model_Layout_Update 了解详细信息。

# php - 使用php解析XML格式

> ID：12712936
> 
> 赞同：0
> 
> 时间：2012-10-03T16:37:30.430
> 
> 标签：php, xml, parsing

我正在尝试使用 PHP 解析 Xml 文件，但每当我运行代码时，mit 都会给我错误：为 foreach() 提供的参数无效

XML

```
<?xml version="1.0" standalone="yes"?>  
<Rows>
<Row Code="10004" Name="EDEN 46cm TROUGH  Terracotta"  />
</Rows> 
```

PHP代码：

```
$xml =  simplexml_load_string(file_get_contents('XML/STKCatigories.xml'));
$i = 0;
   foreach($xml->Rows->Row as $key=>$product) {

  echo '<li>'.anchor ('/shop/listings/'.$product->Code,$product->Name).'</li>';

} 
```

我不明白我错在哪里。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:43:02.830

它应该是

```
$xml =  simplexml_load_string(file_get_contents('XML/STKCatigories.xml'));
$prifix = '/shop/listings/' ;
foreach ( $xml as $row ) {
    $attr = $row->attributes();
    printf('<li>%s</li>', anchor($prifix . $attr->Code, $attr->Name));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:49:33.803

您正在尝试访问标签属性而不是显式值。尝试类似：

```
$str = <<<XML
<?xml version="1.0" standalone="yes"?>  
<Rows>
<Row Code="10004" Name="EDEN 46cm TROUGH  Terracotta"  />
</Rows>
XML;

$xml = simplexml_load_string($str);

foreach($xml->Row->attributes() as $a => $b) {
    echo $a,'="',$b,"\"\n";
} 
```

输出：

> ```
> SimpleXMLElement Object
> (
>     [Row] => SimpleXMLElement Object
>         (
>             [@attributes] => Array
>                 (
>                     [Code] => 10004
>                     [Name] => EDEN 46cm TROUGH  Terracotta
>                 )
> 
>         )
> 
> )
> Code="10004" Name="EDEN 46cm TROUGH Terracotta" 
> ```

# c++ - SIMD 和动态内存分配

> ID：12712941
> 
> 赞同：4
> 
> 时间：2012-10-03T16:37:39.127
> 
> 标签：c++, memory-management, sse, simd

> **可能重复：**
> [SSE、内在函数和对齐](https://stackoverflow.com/questions/12502071/sse-intrinsics-and-alignment)

我是 SIMD 编程的新手，所以如果我问一个明显的问题，请原谅。

我进行了一些试验，并达到了我想将 SIMD 值存储在动态分配的结构中的地步。

这是代码：

```
struct SimdTest
{
    __m128      m_simdVal;

    void setZero()
    {
        __m128 tmp = _mm_setzero_ps(); 
        m_simdVal = tmp; // <<--- CRASH ---
    }
};

TEST( Plane, dynamicallyAllocatedPlane )
{
    SimdTest* test = new SimdTest();

    test->setZero();

    delete test;
} 
```

当执行带有 CRASH 注释的方法时，代码会崩溃并出现以下异常：

```
Unhandled exception at 0x775315de in test-core.exe: 0xC0000005: Access violation reading location 0x00000000 
```

有人可以解释为什么分配操作会中断，以及应该如何动态分配包含 SIMD 的对象以使其正常工作？

我需要补充一点，如果我静态实例化 SimdTest 对象并调用 setZero 方法，一切正常。

谢谢， 帕克萨斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T19:22:11.390

它死了，因为结构没有对齐。CRT 分配器只承诺与 8 对齐，此处需要 16。您需要在 MSVC 上使用 _aligned_malloc() 来获得正确对齐的堆分配内存。

有两种方法可以解决它。由于这是一个 POD 结构，您可以直接转换：

```
#include <malloc.h>
...
    SimdTest* test = (SimdTest*)_aligned_malloc(sizeof SimdTest, 16);
    test->setZero();
    _aligned_free(test); 
```

或者您可以覆盖结构的新/删除运算符：

```
struct SimdTest
{
    void* operator new(size_t size) { return _aligned_malloc(size, 16); }
    void operator delete(void* mem) { return _aligned_free(mem); }
    // etc..
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T17:49:12.967

MSDN 声明 _m128 自动对齐 16 个字节，而不是 __m128，而是 _m128。但无论如何我猜其他人是对的，因为我记得有两种移动指令，一种用于对齐的 movAps，一种用于未对齐的 - movUps。首先需要 16b 对齐，其他不需要。不知道编译器是否能够同时使用两者，但我尝试过这种 _m128 类型。

实际上有特殊类型：_M128A。

# c - 如何区分同一个套接字上的读写事件？

> ID：12712944
> 
> 赞同：6
> 
> 时间：2012-10-03T16:37:54.187
> 
> 标签：c, sockets, epoll

我`epoll`用来获取有关传入数据的通知。这并不难，因为返回的所有事件都`epoll_wait()`表明我可以从`epoll_event.data.fd`（套接字描述符）读取数据。

但现在我想要两种类型的通知：接收和发送（套接字可用于发送）。但我不能这样做，因为：

1.  `epoll_event.events`返回的`epoll_wait()`和我传入的一样`epoll_ctl()`。所以它包含两者`EPOLLIN`，`EPOLLOUT`就我而言。
2.  此外，如果我尝试两次添加一个套接字`epoll`（作为 EPOLLIN 和 EPOLLOUT 事件），我将得到一个`EEXIST`.

`select()`每次收到通知时，如何在不手动调用的情况下解决此问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T17:17:03.203

`man epoll_wait`明确指出“事件成员将包含返回的事件位字段。”。因此，如果您要进入`EPOLLIN | EPOLLOUT`，`epoll_event.events`那么您的套接字必须准备好进行读写。

如果您只想在套接字*更改状态*时收到通知，请使用`EPOLLET`边缘触发操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T17:26:04.117

使用 添加描述符时`epoll_ctl`，将`events`掩码设置为`EPOLLIN | EPOLLOUT`。

当您通过`epoll_wait`then 收到通知时，您将循环检查返回的通知`EPOLLIN`和`EPOLLOUT`.

**伪代码**：

```
int index, count;
count = epoll_wait(epfd, epoll_event, MAX_EVENTS, -1);
for (index = 0; index < count; ++index) {
  if (epoll_event[index].events & EPOLLIN) {
    // Ready for read
  }

  if (epoll_event[index].events & EPOLLOUT) {
    // Ready for write
  }
} 
```

有些人只有`EPOLLOUT`在他们的发送缓冲区中有数据时才设置该位。我没有包括任何错误检查。

# sql - SQL 查询语句

> ID：12712946
> 
> 赞同：1
> 
> 时间：2012-10-03T16:38:02.580
> 
> 标签：sql

我有 2 个单独的 SQL 查询，但我不知道它们有何不同：

```
SELECT A.AccountName,
       T.Total
FROM   ACCOUNTS A
       LEFT OUTER JOIN (SELECT *
                        FROM   Totals
                        WHERE  PersonID = @PersonID
                               AND Yr = @Year) T
         ON A.AccountID = T.AccountID
ORDER  BY AccountName 
```

* * *

```
SELECT A.AccountName,
       T.Total
FROM   ACCOUNTS A
       LEFT OUTER JOIN (SELECT *
                        FROM   Totals) T
         ON A.AccountID = T.AccountID
WHERE  PersonID = @PersonID
       AND Yr = @Year
ORDER  BY AccountName 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:41:18.363

第一个查询将只显示所有客户记录的结果，无论客户是否有与您的@Year 和@Person 值匹配的总计记录（或者甚至是否根本不匹配总计记录）。对于不匹配的记录，Total 列的值为 NULL，但所有帐户都会有结果。第二个查询将仅显示总数与年份和人员匹配的帐户。如果没有匹配，帐户记录将根本不会出现在您的结果中。

并且 2 个查询真的应该写得更像这样（这里不需要子查询）：

```
SELECT A.AccountName, T.Total
FROM   ACCOUNTS A
LEFT JOIN Totals T
         ON A.AccountID = T.AccountID AND T.PersonID = @PersonID AND T.Yr = @Year
ORDER  BY AccountName

SELECT A.AccountName, T.Total
FROM   ACCOUNTS A
LEFT JOIN Totals T ON A.AccountID = T.AccountID
WHERE  T.PersonID = @PersonID AND T.Yr = @Year
ORDER  BY AccountName 
```

上面的代码在功能上等同于您的原件。

最后，听起来你可能想要更像这样的东西：

```
SELECT A.AccountName, T.Total
FROM Accounts A
INNER JOIN Totals T ON T.AccountID = A.AccountID
WHERE T.PersonID = @PersonID AND T.Yr = @Year 
```

在此查询中，您将 Year 和 Person 条件放在哪里并不重要。无论哪种方式，查询都将具有相同的结果：仅当与所需年份和人员的总计记录匹配时，才会显示客户记录。不匹配的帐户根本不会出现在结果中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:41:22.663

通过`WHERE`在外部联接（第二个查询）之后应用条件，您可能会从结果集中消除记录。第一个查询将包括`ACCOUNTS`表中的每一行。

* * *

也就是在第一个查询中，返回的表对于表中的每条记录都会至少有一行`ACCOUNTS`，`NULL`s 表示表中没有匹配的数据`Totals`。如果表中有多个匹配`Totals`项，那么您将获得多行`ACCOUNT`。

第二个查询将只返回`ACCOUNTS`与参数匹配的行，并且它们必须具有匹配的`Totals`行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:58:22.760

每当您为 OUTER JOIN 表添加简单子句时，您必须在测试条件之前测试外部表是否存在，否则，实际上，您将外部联接转换为内部联接。在你的情况下：

```
-- original
SELECT A.AccountName, T.Total
FROM ACCOUNTS A
LEFT OUTER JOIN (SELECT *
    FROM Totals
    WHERE PersonID = @PersonID
    AND Yr = @Year
) T ON A.AccountID = T.AccountID
ORDER  BY AccountName;

-- modified with same result
SELECT A.AccountName, T.Total
FROM ACCOUNTS A
LEFT OUTER JOIN Totals T ON A.AccountID = T.AccountID
WHERE (1=2 -- syntactic sugar
  OR (T.AccountID IS NULL) -- this prevents outer joined rows to be excluded
  OR (T.PersonID = @PersonID AND T.Yr = @Year) -- original filter
)
ORDER  BY AccountName; 
```

# android - Android OpenGL ES 2.0：使用 Matrix.traslateM 没有得到我想要的结果

> ID：12712952
> 
> 赞同：6
> 
> 时间：2012-10-03T16:38:25.230
> 
> 标签：android, opengl-es-2.0

我正在尝试制作一个使用 OpenGL 显示文本的应用程序。当我尝试使用`Matrix.translateM`将指定对象移动到特定位置时出现意外行为。所有其他转换矩阵都按我的预期工作。

这是我打电话时得到的`Matrix.translateM(model_matrix, 0, -1.0f, 0, 0)`： ![结果图像](../Images/952a758f6e7c16364c72cda42ebf0204.png)

这是没有翻译的图像： ![在此处输入图像描述](../Images/18e1d5be3c5b3035f696633c889d5df0.png)

这是我的渲染器代码。

```
@Override
public void onSurfaceCreated(GL10 unused, EGLConfig config) {
    GLES20.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
    GLES20.glDisable(GLES20.GL_DEPTH_TEST);
    GLES20.glEnable(GLES20.GL_BLEND);
    GLES20.glBlendFunc(GLES20.GL_SRC_ALPHA, GLES20.GL_ONE_MINUS_SRC_ALPHA);

    // create programs
    simple_texture = new SimpleTexture();

    // create shapes
    square = new Square();

    // create debug text handlers
    text_fps = new Text(this.font, this.text_scale);
    text_fps.setSize(50);
    text_fps.setText("Test\nLonger line");

    // set camera position
    final float eyeX = 0.0f;
    final float eyeY = 0.0f;
    final float eyeZ = -3.0f;

    final float lookX = 0.0f;
    final float lookY = 0.0f;
    final float lookZ = 0.0f;

    final float upX = 0.0f;
    final float upY = 1.0f;
    final float upZ = 0.0f;

    Matrix.setLookAtM(view_matrix, 0, eyeX, eyeY, eyeZ, lookX, lookY, lookZ, upX, upY, upZ);
}

@Override
public void onSurfaceChanged(GL10 unused, int width, int height) {
    GLES20.glViewport(0, 0, width, height);

    // set projection matrix
    float ratio = (float) width / height;
    Matrix.orthoM(projection_matrix, 0, -ratio, ratio, -1, 1, 3, 7);

    setScreenRatio(ratio);
    setScreenHeight(height);
}

@Override
public void onDrawFrame(GL10 unused) {
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    // calculate projection and view transformation
    Matrix.multiplyMM(vp_matrix, 0, projection_matrix, 0, view_matrix, 0);

    // if we are connected to debugger draw statistics
    drawStatistics(vp_matrix);
} 
```

这是我`draw`的文本代码。

```
 // use predefined program
    GLES20.glUseProgram(program);

    // get attribute positions
    attr_matrix = GLES20.glGetUniformLocation(program, "u_Matrix");
    attr_position = GLES20.glGetAttribLocation(program, "a_Position");
    attr_texture_position = GLES20.glGetAttribLocation(program, "a_TexturePosition");
    attr_texture = GLES20.glGetUniformLocation(program, "u_Texture");

    // set program parameters
    GLES20.glEnableVertexAttribArray(attr_position);
    GLES20.glVertexAttribPointer(attr_position, 2, GLES20.GL_FLOAT, false, 2 * 4, square_buffer);

    // set texture parameters
    GLES20.glEnableVertexAttribArray(attr_texture_position);
    GLES20.glVertexAttribPointer(attr_texture_position, 2, GLES20.GL_FLOAT, false, 2 * 4, texture_buffer);

    // set matrix
    float[] result = new float[16];
    float ratio = (float) texture_height / texture_width;
    float screen_scale = (float) texture_height / PageRenderer.getScreenHeight();

    Matrix.setIdentityM(model_matrix, 0);
    Matrix.translateM(model_matrix, 0, -1, 0, 0);
    Matrix.scaleM(model_matrix, 0, screen_scale, screen_scale * ratio, screen_scale);

    Matrix.setIdentityM(result, 0);
    Matrix.multiplyMM(result, 0, matrix, 0, model_matrix, 0);
    GLES20.glUniformMatrix4fv(attr_matrix, 1, false, result, 0);

    // assign texture
    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, index);
    GLES20.glUniform1i(attr_texture, 0);

    // perform drawing
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);

    // disable vertex array
    GLES20.glDisableVertexAttribArray(attr_position);
    GLES20.glDisableVertexAttribArray(attr_texture_position); 
```

着色器：

```
 int vertex_shader = PageRenderer.loadShader(
            GLES20.GL_VERTEX_SHADER, 
            "uniform mat4 u_Matrix;" + 
            "attribute vec4 a_Position;" +
            "attribute vec2 a_TexturePosition;" +
            "varying vec2 v_TexturePosition;" +
            "void main() {" + 
            "   gl_Position = a_Position * u_Matrix;" +
            "   v_TexturePosition = a_TexturePosition;" +
            "}"
        );
    int fragment_shader = PageRenderer.loadShader(
            GLES20.GL_FRAGMENT_SHADER, 
            "precision mediump float;" +
            "varying vec2 v_TexturePosition;" +
            "uniform sampler2D u_Texture;" +
            "void main() {" +
            "   gl_FragColor = texture2D(u_Texture, v_TexturePosition);" +
            "}"
        ); 
```

缩放和旋转按预期工作，但我不知道为什么 translate 没有。请注意，我直到最近才使用 OpenGL。

我期待`translateM`将文本向左移动，而不是“旋转”它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T09:18:12.810

计算时变量的顺序`gl_Position`很重要！世界矩阵先行，然后是顶点坐标。问问题时我确实知道这一点，但没有注意，因为着色器代码取自 Android OpenGL 教程。小心伙计们。教程不正确！

正确的着色器代码：

```
 int vertex_shader = PageRenderer.loadShader(
            GLES20.GL_VERTEX_SHADER, 
            "uniform mat4 u_Matrix;" + 
            "attribute vec4 a_Position;" +
            "attribute vec2 a_TexturePosition;" +
            "varying vec2 v_TexturePosition;" +
            "void main() {" + 
            "   gl_Position = u_Matrix * a_Position;" +
            "   v_TexturePosition = a_TexturePosition;" +
            "}"
        );
    int fragment_shader = PageRenderer.loadShader(
            GLES20.GL_FRAGMENT_SHADER, 
            "precision mediump float;" +
            "varying vec2 v_TexturePosition;" +
            "uniform sampler2D u_Texture;" +
            "void main() {" +
            "   gl_FragColor = texture2D(u_Texture, v_TexturePosition);" +
            "}"
        ); 
```

# java - 在 Mac 机器上运行没有预装 Java 的 jar 文件

> ID：12712954
> 
> 赞同：0
> 
> 时间：2012-10-03T16:38:37.683
> 
> 标签：java, macos, wrapper, embedded-resource, portable-executable

使用嵌入式 Java 运行 jar 文件。Mac机器中没有预装java。

我需要在没有安装 Java 的 Mac OS X 中运行 jar 文件。我已经下载了适用于 Mac 的便携式 Java。但无法从 shell 命令运行它。请帮助我使用可移植的嵌入式 Java 运行 jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:09:40.690

你遇到了什么错误？您的 shell 脚本是否包含 JAVA_HOME 变量或其他此类变量？

假设您具有应用程序所需的正确版本，则必须将此类变量设置为指向您已安装的 java 实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T04:01:38.660

如果机器上没有 JRE，则无法运行 .jar 文件。您必须使用某种工具（即 Launch4j）来创建本机二进制文件。这些工具中的大多数将创建一个嵌入 JVM（dll、so 等）的本机可执行文件，并使用 C/C++ 代码来初始化 jvm 实例。一旦 jvm 被初始化，它就可以运行你的代码。

[http://launch4j.sourceforge.net/](http://launch4j.sourceforge.net/)

# android - 在Activity中实现Base AsyncTask并将结果传递给fragments

> ID：12712955
> 
> 赞同：2
> 
> 时间：2012-10-03T16:38:45.417
> 
> 标签：android

美好的一天，只是一个简单的问题。我有一个包含 2 个片段的活动。现在片段通过活动页脚中的按钮被调用。在片段中，我基本上做同样的事情，启动 AsyncTask，解析 JSON 响应并显示在 ListView 中。唯一的区别是更新布局中某些视图的一些区别。

所以我的问题是，有没有一种方法可以在活动中使用来自片段的不同构造函数执行 AsyncTask 并将结果传递给片段以更新视图？我现在唯一能看到的问题是（如果这是一个问题），如何知道将数据传递到哪个片段。

有没有更好的方法或者我在每个片段中都执行相同的程序是否可以。觉得我太担心代码重复了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:49:47.487

使用继承！

用于澄清的伪代码：

超级片段：

```
abstract SuperFragment extends Fragment{

    abstract protected void updateLayoutInFragment(..);

    protected MyUpdateTask <...> {

        MyUpdateTask ( int i ){
            // first constructor
        }

        MyUpdateTask ( int i, int y ){
            // second constructor
        }

        @Override
        doInBackground(...){
            // do stuff
        }

        @Override
        postExecute(...){
            if (request was succesfull){
                 updateLayoutInFragment(..);
            }
        }
    }
} 
```

子片段

```
public class MyFragment extends SuperFragment {

    @Override
    onCreateView(...){
        //startTask
    }

    protected void updateLayoutInFragment(..){
        // fill layout
    }
 } 
```

# html - 如何用固定子div做固定宽度？

> ID：12712957
> 
> 赞同：0
> 
> 时间：2012-10-03T16:39:14.313
> 
> 标签：html, css

[http://themorpheustech.com/test/test1.php](http://themorpheustech.com/test/test1.php)

请转到链接。

菜单是固定位置，当你向下滚动它会显示，这正是我想要的。

您可以看到有很多菜单，Fixed menuWrapper 具有 100% 的宽度，而 Wrapper 内的 div 具有固定宽度（1240px），因为它有 19 个菜单。

好的，问题是当我在低分辨率监视器中看到该网站时：1024px 监视器，用于测试只需调整浏览器窗口的大小。一切正常，我的意思是固定的主菜单。但问题是它显示到菜单 18，并且浏览器窗口底部有一个水平滚动条，如果我滚动它，网站的内容会显示除菜单之外的所有内容？看到它显示到菜单 18。

我需要在 CSS 或 Jquery 中解决这个问题。

我使用的代码：

```
<style type="text/css">
html, body {
    margin:0px;
    padding:0px;
}
#menuWrapper {
    position:fixed;
    width:100%;
    height:80px;
    background-color:#999;
}
#menu {
    position:relative;
    width:1240px;
    margin:0 auto;
    height:80px;
    white-space: nowrap;
}
#content {
    padding-top:90px;
    width:1240px;
    background-color:#F3F3F3;
    margin:0 auto;
}
</style>

<div id="menuWrapper">
    <div id="menu">
        Menu 1 | 
        Menu 2 | 
        Menu 3 | 
        Menu 4 | 
        Menu 5 | 
        Menu 6 | 
        Menu 7 | 
        Menu 8 | 
        Menu 9 | 
        Menu 10 | 
        Menu 11 | 
        Menu 12 | 
        Menu 13 | 
        Menu 14 | 
        Menu 15 | 
        Menu 16 | 
        Menu 17 | 
        Menu 18 | 
        Menu 19 
    </div>
</div>
<div id="content">
    Website Content<br />
    Website Content<br />
    Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:52:20.953

问题是#menu 比浏览器窗口宽，它为您提供水平滚动条。使用`overflow: auto`或`overflow:hidden`不是最佳选择，因为第一个会导致水平滚动条，而第二个会向用户隐藏菜单项。

这是一个[执行](http://codepen.io/anon/pen/xHrGq)以下操作的代码笔：

1.  小于 1240 像素（或不支持媒体查询）的浏览器窗口（视口）获得允许菜单项换行的菜单版本，没有水平滚动条（我将“宽度：1240 像素”替换为“最小宽度：1240 像素”
2.  大于 1240 像素的视口（支持媒体查询）获得完整的固定菜单宽度处理。

媒体查询可能需要以不同的宽度进行调整，但总体概念应该保持不变。

您可以使用[response.js](https://github.com/scottjehl/Respond)在旧版浏览器中获得媒体查询支持。

我希望这会有所帮助。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:46:48.580

固定宽度似乎完全符合它的预期：无论屏幕分辨率如何，都显示相同的宽度。如果您想显示不同的宽度，请考虑 CSS3 媒体查询[http://cssmediaqueries.com/](http://cssmediaqueries.com/)。相反，如果您遇到的问题是框中的内容滚动，您可以像这样设置它：

```
#content { overflow: auto; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T19:00:16.133

问题就是你上面说的。“固定宽度”为 1240 像素，屏幕尺寸为 1024 像素。根据您的溢出设置，不可能在小于 1240 像素的屏幕上显示 1240 像素的 div 而不会溢出 div 到其他内容或通过滚动条。您可以尝试以下两种方法之一。删除#menu div 的高度并像您所做的那样指定宽度将导致内容换行并显示在新行上。或者，指定宽度和高度将导致内容溢出并添加滚动条。要确保跨浏览器发生此行为，您可以添加：

```
#menu { overflow: auto; } 
```

希望这可以帮助。

# javascript - 如何从一个选择选项发送到另一个？

> ID：12712958
> 
> 赞同：0
> 
> 时间：2012-10-03T16:39:19.370
> 
> 标签：javascript, jquery

（可能）简单的 jQuery 问题在这里。我正在使用 jQuery UI 对话框，并且正在确认。基本上，当用户选择某个选项（结合其他情况）时，我希望能够将他们发送回他们上次选择的选项，或者如果我不能这样做，则返回默认选项。

该选项也没有“选定”属性，这将是我的首选示例。有没有办法做到这一点？

这是js：

```
alert('hey')
if (document.frm.notNull.checked == true) {
    // This is where it ends!
    if ($('input[name=valueTextField]').length > 1) {
        $('#dialog p').empty();
        $('#dialog p').html("You're going to lose your stuff if you do this. You sure you want to?");
        $('#dialog').dialog({
            autoOpen: true,
            width: 600,
            modal: true,
            buttons: {
                "<spring:message code='dialogBox.cancelConfirmation.YES'/>": function() {
                    $(this).dialog("close");
                    $("#bottom").css('visibility', 'visible');
                    $('.edit-new').css('visibility', 'hidden');
                    $('.edit-trash').css('visibility', 'hidden');
                    // if table has more than one row, delete the rest.
                    deleteExtraRows('valueTable');
                    return true;

                },
                "<spring:message code='dialogBox.cancelConfirmation.NO'/>": function() {
                    $(this).dialog("close");

                    // Need to revert the user back to where they came from here.
                    $('#control[value=1]').attr('selected', true);
                    // return false;
                }
            }
        });
    } else {
        $("#bottom").css('visibility', 'visible');
        $('.edit-new').css('visibility', 'hidden');
        $('.edit-trash').css('visibility', 'hidden');
        // if table has more than one row, delete the rest.
        deleteExtraRows('valueTable');
        return true;

     }
 }​ 
```

这是 HTML（动态呈现）：

```
<div class="lbl">
    <label>Control</label>
</div>
<select style="margin:0 0 0 8px; left:15px; position:relative;" name="control"
id="control" onChange="checkTableVisibility();">
    <option value=1>Check Box</option>
    <option value=0>Dropdown Menu</option>
    <option value=3>Radio Button</option>
    <option value=2 selected="selected">Text Box</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:50:53.297

我想我很理解你的问题我的回答是：使用变量来存储选择的值你可以这样做 id 像这样：

```
$("yourSelect").change(function(){
 selected = $(this).val();
}); 
```

然后您可以将单击时的值重置为按钮重置，例如

```
$("#reset").click(function(){
  $("yourSelect").val(selected);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:53:58.180

这是示例代码。希望这可以帮助你

```
##### Jquery Part #####
<script>
$(document).ready(function(){
 var dropdownControl =$("#control");
 var selectedValue = dropdownControl.val(); 
 dropdownControl.change(function(){
  var dropItem = $(this);
  $('#dialog').dialog({
  autoOpen: true,
      width: 600,
      modal: true,
      buttons: {
          'Ok': function(){
                  selectedValue = dropItem.val();
                  $(this).dialog("close");
               },
               'Cancel' : function(){
                     dropdownControl.val(selectedValue);
                     $(this).dialog("close");
               } 
              }
  });
  });
});
</script>

 #### HTML #####
<body>
 <div>
    <select style="margin:0 0 0 8px; left:15px; position:relative;" name="control" id="control">
     <option value=1>Check Box</option>
     <option value=0>Dropdown Menu</option>
     <option value=3>Radio Button</option>
     <option value=2 selected="selected">Text Box</option>
    </select>
 </div>
 <div id="dialog" style="display:none;">
   Do you want to change value ?
 </div>
</body> 
```

我希望你能放更多的代码。我添加了一些可能对您有所帮助的代码。请仔细阅读我的更改和与之相关的评论。我将您的整个代码包装到 jQuery 就绪函数中。请让我知道它是否有效。

```
 $(document).ready(function(){
  var dropdownControl =$("#control");
  var previousValue = dropdownControl.val(); 
  /// Please add above line of code on your jQuery onload section. So that previous value get set, for the first time, whenever dom gets load. so that you can use it for later cases
alert('hey')
if (document.frm.notNull.checked == true) {
  // This is where it ends!
  if ($('input[name=valueTextField]').length > 1) {
      $('#dialog p').empty();
      $('#dialog p').html("You're going to lose your stuff if you do this. You sure    you want to?");
    $('#dialog').dialog({
        autoOpen: true,
        width: 600,
        modal: true,
        buttons: {
            "<spring:message code='dialogBox.cancelConfirmation.YES'/>": function() {
                $(this).dialog("close");
                $("#bottom").css('visibility', 'visible');
                $('.edit-new').css('visibility', 'hidden');
                $('.edit-trash').css('visibility', 'hidden');
                previousValue = dropdownControl.val();
                // please reset previousValue with the new one that you approved to change so that next time when dropdown changes it value it could use it
                // if table has more than one row, delete the rest.
                deleteExtraRows('valueTable');
                return true;

            },
            "<spring:message code='dialogBox.cancelConfirmation.NO'/>": function() {
                $(this).dialog("close");

                // Need to revert the user back to where they came from here.
                $('#control[value=1]').attr('selected', true);
                 dropdownControl.val(previousValue);
                // Please replace dropdown value with the old one if you want to revert changes.
                // return false;
            }
        }
    });
} else {
    $("#bottom").css('visibility', 'visible');
    $('.edit-new').css('visibility', 'hidden');
    $('.edit-trash').css('visibility', 'hidden');
    // if table has more than one row, delete the rest.
    deleteExtraRows('valueTable');
    return true;

 }
}​ 
}); 
```

# solr - 什么是 Apache solr 中的索引？

> ID：12712959
> 
> 赞同：3
> 
> 时间：2012-10-03T16:39:23.453
> 
> 标签：solr, lucene

我可以将 pdf 文件上传到其中`solr`，并且可以搜索这些文件。但是什么是索引`solr`？W当我上传一个 pdf 文件时，它将如何进行索引？

这是我用来上传pdf文件的代码

```
ContentStreamUpdateRequest up 
            = new ContentStreamUpdateRequest("/update/extract");

            up.addFile(fileName);

            up.setParam("literal.id", solrId);
            up.setParam("literal.first_name", "apachesolr");
            up.setParam("literal.last_name", "cookbook");
            up.setParam("literal.age", "30");

            up.setAction(AbstractUpdateRequest.ACTION.COMMIT, true, true);

            solrServer.request(up); 
```

下面是我的`schema.xml`

```
 <field name="first_name" type="string" indexed="true" stored="true" required="true"/>

<field name="last_name" type="string" indexed="true" stored="true" required="true"/>
<field name="age" type="int" indexed="true" stored="true" required="true"/>

<field name="created_at" type="date" indexed="true" stored="true"/>
<field name="updated_at" type="date" indexed="true" stored="true"/>
<field name="id" type="string" indexed="true" stored="true" required="true"/> 
```

当我搜索 pdf 中的任何内容时。结果看起来像这样

```
 SolrDocument[{
last_modified=Fri Oct 17 08:17:38 IST 2003, 
author=Mark Roth, Eduardo Pelegri-Llopart, 
title=[JSP 2.0 Specification, Final Release], 
content_type=[application/pdf], 
keywords=JSP, 
age=30, 
last_name=cookbook, 
first_name=apachesolr, 
id=jsp-2_0-fr-spec.pdf
}] 
```

它将如何获得标题、作者、关键字...等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T17:39:53.833

您误解了搜索引擎中文档的概念。**文档**是一**组具有相应值的命名字段**。您应该始终明确设置每个字段。首先，使用 Solrj 尝试以下代码：

```
CommonsHttpSolrServer solr = new CommonsHttpSolrServer("http://localhost:8983/solr");
for(int i = 0; i < 1000; ++i) {
  SolrInputDocument doc = new SolrInputDocument();
  doc.addField("title", "My Favorite book");
  doc.addField("author", "Kevin");
  doc.addField("content", "Bla bla bla");
  solr.add(doc);
}
solr.commit(); 
```

这段代码新建`SolrInputDocument`并添加了 3 个字段——“title”、“author”和“content”（注意：所有这些字段都应该在 schema.xml 中定义，只是为了让 Solr 知道如何索引和存储这些字段），然后它将新文档添加到事务 ( `solr.add(doc)`) 并最终提交更改。这是使用 Solr 的基本方式。

在这个正常流程中，您应该**自己**从文档中**提取文本**。例如，您可以为此目的使用[Tika 。](http://tika.apache.org/)这是最灵活、最细粒度的方式。

 **您正在尝试做的是使用**新的 Solr 功能**-**内容提取**。如果我理解正确，您正在尝试设置`setParams()`错误的字段。`setParams()`只设置请求参数，然后将其转换为 URL 参数，让 Solr 知道**如何自己处理请求**。据我所知，这种方式你不能自己设置字段。相反，`/update/extract`处理程序将尝试按文件的 MIME 类型**提取内容，****查找有关文档属性的提示**并将**它们用作字段**（请注意，Solr 使用 Tika 库来提取文档内容）。因此，如果您真的想使用`/update/extract`处理程序，请尝试在**不更改的情况下遵循**[此示例](http://wiki.apache.org/solr/ContentStreamUpdateRequestExample) **与请求参数对应的行并检查**生成的字段**。****

# jquery - JQuery animate 升级到 1.8.2 后停止工作

> ID：12712960
> 
> 赞同：-1
> 
> 时间：2012-10-03T16:39:24.800
> 
> 标签：jquery, jquery-animate, jquery-1.8

很简单...我将 JQuery 从 1.4.1 升级到 1.8.2，以下代码不再有效：

```
 function ShowToast()
            {
                $("#toast").animate({ height: '350px' }, 300, 'swing');
            } 
```

关于为什么会发生这种情况的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:19:07.870

好的，这可能归结为我的糟糕设计。我为 div 设置了 display: none ，在 JQuery 1.4.1 中，调用 animate() 函数似乎覆盖了该设置。但是 1.8.2 没有（这可能更好）。

只需要添加

```
$("#toast").css('display', 'block'); 
```

我的功能

# android - 在我的 getView 方法中获取 LinearLayout 的宽度

> ID：12712961
> 
> 赞同：1
> 
> 时间：2012-10-03T16:39:25.743
> 
> 标签：android, width, android-linearlayout

我想在自定义适配器的 getView 方法中获取 LinearLayout 元素的宽度。我的 getView 方法如下所示：

```
@Override
    public View getView(int position, View v, ViewGroup parent) {
        View mView = v;

        if (mView == null) {

            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);
            mView = vi.inflate(R.layout.levelselector_item, null);

        } 
if (mView != null) {
...
LinearLayout ln = (LinearLayout) mView.findViewById(R.id.lineScore);
            LinearLayout lnTotal = (LinearLayout) mView.findViewById(R.id.lineScoreTotal);
int widthTotal = lnTotal.getWidth()/2;
                ln.getLayoutParams().height = 3;
                ln.getLayoutParams().width = widthTotal;
                ln.requestLayout();
                ln.setBackgroundColor(Color.parseColor("#eef05e"));

}
        return mView;
    } 
```

我的 widthTotal 问题似乎没有价值。如果我单击 gridview 的一个项目并单击后退按钮，那么我突然看到一个黄色条。如果我输入 ln.getLayoutParams().width = 20; 他还显示了一个黄色短条。我只是不知道何时何地可以获得LinearLayout的宽度......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:58:22.770

您可以在 XML 中进行，而不是在代码中设置尺寸。您可以使用 LinearLayout 权重属性来获取“一半”父宽度。例如

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:weightSum="2" >

    <View
        android:layout_width="0dp"
        android:layout_height="3dp"
        android:layout_weight="1"
        android:background="#eef05e" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:13:20.283

看起来您正在尝试将`lineScore`视图的尺寸设置为 3 像素高和视图宽度的一半`lineScoreTotal`。不幸的是，你不能这样做——`getView`代码是在视图附加到活动的视图层次结构之前执行的，所以没有为任何东西定义大小。

一种方法是定义您自己的自定义视图并按照[此线程](https://stackoverflow.com/a/4662629/535871)`onMeasure`中的建议进行覆盖。这可能是最干净的方式。

另一种是尝试查询`parent`视图的尺寸；考虑填充等；然后`mView`在尝试查询尺寸之前构建适当的宽度和高度测量规范并进行布局。

另一种是创建一个布局，将总宽度分成所需的比例。由于您尚未发布布局，因此我无法提出任何具体建议。例如，如果该行的容器是一个 vertical `LinearLayout`，您可以执行以下操作：

```
<LinearLayout
     android:orientation="vertical"
     . . . >
     . . .
    <LinearLayout
         android:orientation="horizontal"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content">

         <View
              android:layout_width="0dp"
              android:layout_height="3dp"
              android:layout_weight="25" />
         <View
              android:layout_width="0dp"
              android:layout_height="3dp"
              android:layout_weight="50"
              android:background="#eef05e" />
         <View
              android:layout_width="0dp"
              android:layout_height="3dp"
              android:layout_weight="25" />
    </LinearLayout>
    . . .
</LinearLayout> 
```

这不是特别有效（使用三个额外的视图），但它可以让您在 XML 中做所有事情。如果您的目标是 API 级别 14 或更高，您还可以使用[`Space`](http://developer.android.com/reference/android/widget/Space.html)视图来提供间距。

**编辑**

下面的代码概述了我所说的“查询`parent`视图......”的含义：

```
int availW = parent.getWidth() - parent.getPaddingLeft() - parent.getPaddingRight();
int widthSpec = MeasureSpec.makeMeasureSpec(availW, MeasureSpec.AT_MOST);
// similar for height
mView.measure(widthSpec, heightSpec);
mView.layout(0, 0, mView.getMeasuredWidth(), mView.getMeasuredHeight());
// now you can query the width of `mView` 
```

我没有对此进行测试，所以我不能保证它会起作用，但这就是想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:59:35.500

我让它正常工作。对于那些可能感兴趣的人：

我首先将我的gridview周围的边框设置为可以通过在xml中添加到我的gridview来控制的数量：

```
android:listSelector="@null"
android:layout_margin="5dp" 
```

然后我结合了 Ted Hopp 和 Sameer 的解决方案：因为我知道我的元素的填充是什么；网格视图周围的 5dp，元素之间的 2dp 和元素中的 15dp。我每行也有 3 个项目，这使我的代码看起来像：

```
int parentW = parent.getWidth() - parent.getPaddingLeft() - parent.getPaddingRight();
                Resources r = C.getResources();
                float pxPaddingBetweenItem = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 2, r.getDisplayMetrics());
                float pxPaddingInItem = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 15, r.getDisplayMetrics());

                int totalBarWidth = (parentW - (int)(2*pxPaddingBetweenItem)  - (int)(6*pxPaddingInItem))/3; 
```

这将我带到我想去的地方:) 谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T16:57:51.903

我认为在屏幕上设置布局（R.layout.levelselector_item）之前无法获得视图的宽度。它应该返回 0。

# sql - SQL查询网络信息

> ID：12712963
> 
> 赞同：0
> 
> 时间：2012-10-03T16:39:36.037
> 
> 标签：sql, database, networking, social-networking

我有一个有 14 个节点的网络。（比如 1 -14）我不知道如何显示网络，但我可以提供包含网络信息的数据库表。网络信息如下：

```
连接到节点的节点
1 2,5
2 1,3,4,5
3 2,4
4 2,3,5
5 1,2,4
6 5,11,12
7 4,8,9
8 7
9 4,7,10,14
10 9,11
11 6,10
12 6,13
13 12,14
14 9,13

```

现在，在这种情况下，我需要距离节点 8 2 跳的所有节点的信息（假设）

```
节点 8 - 节点 7（第一跳）
节点 7 - 节点 4,8,9（第二跳）

```

因此，解决方案是“ node4 和 node9 距离 node8 2 跳。

是否有有助于解决此问题的 SQL 查询？它可能不会一直只有 2 跳。给定一个问题为 3 跳，我们需要进一步我们的步骤：

node4,8,9 连接到 2,3,5,7,4,10,14

因此，解决方案是 2、3、5、7、10、14（我们排除了 4，因为它已经距离 node8 2 跳，我们将考虑最短路径）距离 node8 3 跳。

是否有 SQL 查询可以处理上表的这种情况？如果我不清楚任何事情，请告诉我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T07:19:53.210

你可以试试[sql fiddle](http://www.sqlfiddle.com/#!3/f527e/27/0)

架构：

```
create table tNodes (
  id int
  ,connectedto int
)

insert tNodes values(1,2)
insert tNodes values(1,5)
insert tNodes values(2,1)
insert tNodes values(2,3)
insert tNodes values(2,4)
insert tNodes values(2,5)
insert tNodes values(3,2)
insert tNodes values(3,4)
insert tNodes values(4,2)
insert tNodes values(4,3)
insert tNodes values(4,5)
insert tNodes values(5,1)
insert tNodes values(5,2)
insert tNodes values(5,4)
insert tNodes values(6,5)
insert tNodes values(6,11)
insert tNodes values(6,12)
insert tNodes values(7,4)
insert tNodes values(7,8)
insert tNodes values(7,9)
insert tNodes values(8,7)
insert tNodes values(9,4)
insert tNodes values(9,7)
insert tNodes values(9,10)
insert tNodes values(9,14)
insert tNodes values(10,9)
insert tNodes values(10,11)
insert tNodes values(11,6)
insert tNodes values(11,10)
insert tNodes values(12,6)
insert tNodes values(12,13)
insert tNodes values(13,12)
insert tNodes values(13,14)
insert tNodes values(14,9)
insert tNodes values(14,13) 
```

询问：

```
declare @id int = 8
declare @iHops int = 3
declare @iCnt int = 0

create table #tf (id int)
create table #tf0 (id int)
create table #tt (id int)

insert #tf values (@id)

while @iCnt<@iHops
begin

insert
    #tt (id)
  select distinct
    connectedto
  from
    tNodes
  where
    id in (select id from #tf)
    and
    connectedto not in (select id from #tf0)

  delete #tf
  insert #tf (id) select id from #tt
  insert #tf0 (id) select id from #tt
  delete #tt

  set @iCnt = @iCnt + 1
end

/*
select * from #tt
union all
select -1
union all
*/
select * from #tf
/*
union all
select -1
union all
select * from #tf0
*/
drop table #tf0
drop table #tf
drop table #tt 
```

结果：

```
ID
2
3
5
10
14 
```

因为 4 和 7 也被包括在内。（7 距离 1 跳，4 距离 8 2 跳）。

# asp.net-mvc - My virtual path isn't working in release mode in MVC 4

> ID：12712969
> 
> 赞同：0
> 
> 时间：2012-10-03T16:39:55.620
> 
> 标签：asp.net-mvc, release, virtual-path

My project (named Viper) seems to be working fine in debug mode on my dev PC.

The following line

```
<a href="@Url.Action("Index", "Setup")">Setup</a> 
```

gives me the following link in the browser in dev, which works fine:

```
http://localhost/Viper/Setup 
```

However, when I release this to the staging pc, when I look at the same link, I get this:

```
http://setup 
```

Any idea why the release mode isn't capturing the virtual path?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:54:29.780

why not use

```
@Html.ActionLink("Setup", "Index", "Setup") 
```

if you need the relativa path you can use

```
@Url.Content("~/") 
```

so in your case

```
<a href="@Url.Content("~/" + Url.Action("Index","Setup"))" >Setup</a> 
```

# zend-framework - 如何使用 Zend 分页器保留表单值

> ID：12712970
> 
> 赞同：1
> 
> 时间：2012-10-03T16:40:02.210
> 
> 标签：zend-framework, pagination

我有一个页面，顶部有一个用于选择过滤器的表单。提交时，此表单数据与 Zend 分页器结合使用以显示结果。但是当我使用分页器对结果进行分页时，表单字段会丢失，因为分页器不会发布表单。有没有简单的方法来组合这些？我很难找到这个，因为它很难解释。

我的控制器是这种形式...

```
 $form = new Application_Form_Myform();
    $request = $this->getRequest();
    if ($request->isPost()) {
        $data = $request->getPost();
        $form->populate($data);

        // get the data
        Zend_View_Helper_PaginationControl::setDefaultViewPartial('pagination.phtml');
        $reportsTBL = new Model_DBTable_Reports();
        $paginator = new Zend_Paginator(new Zend_Paginator_Adapter_Array($reportsTBL->getLog($data)));
        $paginator->setCurrentPageNumber($this->_getParam('page',1))
              ->setItemCountPerPage(50);
        $this->view->paginator = $paginator
    } 
    $this->view->form = $form; 
```

如您所见，这会从表单中获取值并保留它们以供首次提交。但是在随后的分页点击中，他们迷路了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T08:26:17.487

不幸的是，您必须再次传递该表单的数据，因此您可以抛出 GET（您可以使用 session，但这是一种更难的方法）。

在这种情况下，我的方法是将上次提交的键/值表单的数据附加到分页 URL，因此当有人单击下一页时，URL(GET) 中的数据将是表单的数据

我在控制器中获得了该表单的数据：

```
//it doesn't matter whether the POST or GET.
$this->_getParam('form_field_name'); 
```

如果要在某些 pagination.phtml 部分中创建分页 URL：

```
$urlParams = array();
foreach (Zend_Controller_Front::getInstance()->getRequest()->getParams() as $urlParamsKey=>$urlParamsVal){
    if (!in_array($urlParamsKey, array('module', 'controller', 'action', 'page'))){
        $urlParams[$urlParamsKey] = $urlParamsVal;
    }
}

// ...

//and than just make URL with URL helper
$this->url(array_merge(array('page' => 1), $urlParams))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T08:39:00.560

如此简单，使用[Zend Session](http://framework.zend.com/manual/1.12/en/zend.session.html)来保留您的过滤器。

像这样的东西

```
$sessionNamespace = new Zend_Session_Namespace('Zend_Searchs');
$sessionNamespace->filter = $this->_request->getParam('filter');
if(isset($sessionNamespace->filter )) {
// do your stuff
} 
```

# python - 读写数据包 python-scapy

> ID：12712971
> 
> 赞同：1
> 
> 时间：2012-10-03T16:40:24.160
> 
> 标签：python, networking, packet, scapy

我正在尝试从多个文件中一一读取数据包并将它们写入不同文件夹中的文件（使用相同的文件名）。我正在使用这个程序：

```
import os, os.path
from scapy.all import*

i=0
filename = ''

def callback_func(pkt):
    wrpcap("/home/new/"+filename,pkt)

files_in_dir = os.listdir("/home/packets/info/sub1")
for file in files_in_dir:
    filename = str(file)
    sniff(prn = callback_func, offline = file) 
```

在这个程序中，我正在从 /home/packets/info/sub1 目录读取一个文件，使用 sniff() 一个一个地读取该文件中的所有数据包，将该文件中的所有这些数据包写入另一个具有相同文件名的不同文件使用 wrpcap 的目录，/home/new/。

Scapy 正在用当前的数据包覆盖前一个数据包。有没有办法将数据包附加到文件而不是覆盖？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T11:02:19.940

你要求 scapy 做的就是覆盖......要追加，你需要做这样的事情......

```
import os, os.path
from scapy.all import *

i=0
filename = ''

ORIG_DIR = '/home/packets/info/sub1'
files_in_dir = os.listdir(ORIG_DIR)
for file in files_in_dir:
    filename = str(file)
    paks = rdpcap(ORIG_DIR+filename)  # Read original packets
    paks.extend(sniff(offline=file))      # Append new packets to original pak list
    wrpcap('/home/new/'+filename, paks)   # write new pak list to file 
```

# c# - 初始化一个倒计时线程，然后执行一个动作

> ID：12712972
> 
> 赞同：0
> 
> 时间：2012-10-03T16:40:25.883
> 
> 标签：c#, silverlight

我正在使用 C#，Silverlight。

我需要一种方法来根据以秒（或其他时间单位）为单位的某个值初始化倒计时，并且在倒计时结束时我需要执行一些方法。

倒计时必须与主应用程序分开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T16:55:23.027

采用`Task.Delay`

```
static void SomeMethod()
{
    Console.WriteLine("Thread ID = " + Thread.CurrentThread.ManagedThreadId);

    Console.WriteLine("performing an action...");
}

static void Main(string[] args)
{
    int someValueInSeconds = 5;

    Console.WriteLine("Thread ID = " + Thread.CurrentThread.ManagedThreadId);

    Task.Delay(TimeSpan.FromSeconds(someValueInSeconds)).ContinueWith(t => SomeMethod());

    // Prevents the app from terminating before the task above completes
    Console.WriteLine("Countdown launched. Press a key to exit.");
    Console.ReadKey();
} 
```

请注意，您关心的唯一代码行是带有`Task.Delay`. 我已经包含了其他所有内容，以证明该操作在倒计时后执行，并且按照您的要求在另一个线程上执行。

**Aviod**使用 Timer 类，新的 Task.* API 提供了相同级别的灵活性和更简单的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T16:42:01.873

使用 System.Timers.Timer 对象。订阅 Elapsed 事件，然后调用 Start。

```
using System.Timers;
...
some method {
...
    Timer t = new Timer(duration);
    t.Elapsed += new ElapsedEventHandler(handlerMethod);
    t.AutoReset = false;
    t.Start();
...
}

void handlerMethod(Object sender, ElapsedEventArgs e)
{
    ...
} 
```

默认情况下（如上所示），Timer 将用于`ThreadPool`触发事件。这意味着 handlerMethod 不会与您的应用程序在同一线程上运行。它可以与 ThreadPool 中的其他线程竞争，但不能与池外的线程竞争。您可以设置 SynchronizingObject 来修改此行为。特别是，如果 Elapsed 事件调用 Windows 窗体控件中的方法，您必须在创建控件的同一线程上运行，将 SynchronizingObject 设置为控件将完成此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T16:46:10.977

在调用事件处理程序时，它们不应被阻塞，它们应立即返回。您应该通过 Timer、BackgroundWorker 或 Thread 来实现这一点（按此优先顺序）。

参考：

```
using System;
using System.Windows.Forms;
class MyForm : Form {
    [STAThread]
    static void Main() {
        Application.EnableVisualStyles();
        Application.Run(new MyForm());
    }

    Timer timer;
    MyForm() {
        timer = new Timer();
        count = 10;
        timer.Interval = 1000;
        timer.Tick += timer_Tick;
        timer.Start();
    }
    protected override void Dispose(bool disposing) {
        if (disposing) {
            timer.Dispose();
        }
        base.Dispose(disposing);
    }
    int count;
    void timer_Tick(object sender, EventArgs e) {
        Text = "Wait for " + count + " seconds...";
        count--;
        if (count == 0)
        {
            timer.Stop();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T16:50:19.397

```
DispatcherTimer timer = new DispatcherTimer();

timer.Tick += delegate(object s, EventArgs args)
                {
                    timer.Stop();
                    // do your work here
                };

// 300 ms timer
timer.Interval = new TimeSpan(0, 0, 0, 0, 300); 
timer.Start(); 
```

# r - R IBrokers。如何让货币合约在 reqHistoricalData 调用中起作用？例如 CADUSD 汇率？以及如何拉动指数价格？例如标准普尔，大疆？

> ID：12712984
> 
> 赞同：3
> 
> 时间：2012-10-03T16:40:56.430
> 
> 标签：r, trading, ibrokers

我目前正在学习如何使用该`IBrokers`软件包。

我可以按我想要的频率和期权价格拉动股票价格，但我目前坚持拉动外汇汇率。

我不知道如何设置权限`twsContract`，用于调用 with `reqHistoricalData`。

我有兴趣在 1 分钟的基础上获得 CADUSD 货币。我怎样才能做到这一点？

手册中的示例给出：

```
currency <- twsCurrency("EUR") 
```

当我尝试用 say 调用它时，`reqHistoricalData(tws, currency)`它会返回一个错误，比如“没有可用的 1D 历史数据”。由于我什至无法使手册中的示例起作用，因此我陷入了困境……

有人可以告诉我正确的语法是什么吗？如果我有几个实际有效的例子，我可以从那里拿来。

此外，当我尝试使用`"USD.CAD"`or`"CAD.USD"`作为`twsContract`对象中的代码时，我收到抱怨说这不是有效的安全性。我怎样才能找出正确的股票代码名称`USD.CAD`是什么？现在，我通过查看我的交互式经纪人应用程序（显然同时打开）并输入公司名称并进行搜索来找出股票票。股票代码通常会返回，例如（输入 apple，当我想在交互式经纪人工作站中将此证券添加到我的投资组合时，返回 AAPL）。

任何帮助将非常感激。

另外，另一个相关的问题是，我如何以 1 分钟为基础提取 S&P500 价格指数的历史数据？

我猜我会`twsContract`在 R 中使用一个对象，但我不知道要使用什么参数。代码应该是什么？贸易工作站提到它是一种“索引”产品类型（显然），它不适合任何包装器`twsStock`，如`twsCurrency`等......再次，在某个地方是否有这样的例子，它确实有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T17:18:28.520

您在获取 FX 数据时遇到问题，因为您正在尝试获取`TRADES`IBrokers 不会为 FX 传播的数据。相反，您应该使用`whatToShow="BID"`or `whatToShow="Ask"`。例如

```
tws <- twsConnect()
ccy <- reqContractDetails(tws, twsCurrency("USD", "CAD"))[[1]]$contract
reqHistoricalData(tws, ccy, whatToShow='BID') 
```

获取标准普尔 500 指数的数据是类似的

```
reqHistoricalData(tws, reqContractDetails(tws, twsIndex("SPX", "CBOE", "USD"))[[1]]$contract) 
```

您的问题非常广泛，读起来像是对软件包概述的请求。你读过小插曲吗？( `vignette("IBrokers")`)

* * *

我[在 R-Forge 上](https://r-forge.r-project.org/R/?group_id=1113)有一个名为**twsInstrument**的包，它提供了一些包装器，让您的操作更轻松。

```
library(twsInstrument)
get_quote("USD.CAD")
getBAT("USD.CAD") #gets the last 5 days of minutely Bid/Ask/Trade/Midpoint 
```

此外，请参阅`?reqTBBOhistory`并将`twsInstrument:::update.data`大量数据下载到磁盘。

最后，我建议在 Jeff 可能会看到的[r-sig-finance 邮件列表](https://stat.ethz.ch/mailman/listinfo/r-sig-finance)上提出这些类型的问题。

# ruby - 与 Google-API-Client 一起使用时，DataMapper 需要可寻址错误

> ID：12712985
> 
> 赞同：2
> 
> 时间：2012-10-03T16:40:58.897
> 
> 标签：ruby, gem, datamapper, google-api-client

我正在开发一个使用 DataMapper 和 google-api gems 的项目。当尝试使用 shotgun 或 Thin 运行项目时，出现错误。运行 bundler 或项目会引发错误，指出 DataMapper 使用可寻址版本 2.4.1，而 google-api-client gem 使用可寻址 2.4.5（版本可能不完全正确，因为我是从内存中编写的）。

我对 ruby​​ 还很陌生，但我想这种冲突很常见，可能有一种惯用的方法来处理这个问题。我显然可以分叉任何一个项目并尝试更新/回滚可寻址的冲突，但这似乎是正确的方法。

update:: 这是在需要 dataMapper 之后尝试在 irb 中需要 google-api gem 的结果

`1.9.3p194 :004 > require 'google/api_client' Gem::LoadError: Unable to activate google-api-client-0.4.6, because addressable-2.2.6 conflicts with addressable (>= 2.3.2)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T23:10:53.573

没有惯用的方法来处理这个问题。datamapper 对 addressable 的依赖只是旧的，bundler 找不到兼容的版本。

据我了解可寻址[Changelog](https://github.com/sporkmonger/addressable/blob/master/CHANGELOG.md)的更改，自可寻址 2.2.6 以来没有影响 dm-core 的破坏性 API 更改。可以更新 Datamapper 以使用更新版本的可寻址。

datamapper 1.x 分支的开发已经停止。我们正在积极开发 datamapper-2.0。

在 github 上 datamapper 的“release-1.2”分支中，依赖项已经更新。您可以通过 Gemfile 使用此分支：

```
gem 'dm-core', :git => 'https://github.com/datamapper/dm-core', :branch => 'release-1.2' 
```

此分支声明与可寻址 2.x 但大于 2.3 的兼容性。您应该能够使用此分支解决您的依赖问题。

# php - PHP，SQL表单将` `插入空白字段，如何在不删除 整个表单中的所有``的情况下将其删除

> ID：12712993
> 
> 赞同：0
> 
> 时间：2012-10-03T16:41:31.813
> 
> 标签：php, sql

`<br>` [好的，我在此处](https://stackoverflow.com/questions/12409583/form-submission-adds-a-br-in-front-of-the-beginning-text-in-the-form)和[此处](https://stackoverflow.com/questions/12677688/php-form-inserting-br-at-the-end-of-the-text-on-each-submission-to-mssql)发布了有关这些该死的其他两个主题， 我得到了表格，以停止
使用以下代码在文本区域的文本开头和结尾添加新的

```
function fromhtml ($x) {
$x = preg_replace("/<p>/i","\n\n",$x);
$x = preg_replace("/^<br(\/|)>/i","\n",$x);
//$x = preg_replace('#^<br(\/|)>+|<br(\/|)>+$#i', "\n", $x);
$x= preg_replace("/(^)?(<br\s*\/?>\s*)+$/","\n", $x);
$x = preg_replace("/<li>/i","\n<li>",$x);

return $x;
} 
```

现在我遇到的问题是，在留空的字段上，a`<br>`会在提交时插入到字段中。它不会重复，但`<br>`在某些字段上可能会出现问题，因为存在关于在另一页上打印该字段的条件语句。任何帮助，将不胜感激。

编辑以添加来自其他页面的条件语句

```
if ($prerequisites != "") {
        print " <b>Prerequisites:</b> ".link_course($prerequisites);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:22:59.210

问题出在您的表单上，而不是专门针对 PHP。Textarea 标签使用其中包含的任何数据作为输入，因此如果您的标签由换行符分隔，即在提供的 html 中的两个不同行上，则表单提交将报告 html 换行符存在于文本区域。这很容易通过将标签保持在同一行来纠正。

无论如何，使用 str_replace 摆脱多余的换行符可能会更好，所以：

```
str_replace("<br>", "", str_replace("<br/>", "", str_replace("</br>", "", $x))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:48:22.433

只需检查字符串是否为 br，如果是，则将其替换为 ''

```
function fromhtml ($x) {
    $x = preg_replace("/<p>/i","\n\n",$x);
    $x = preg_replace("/^<br(\/|)>/i","\n",$x);
    $x= preg_replace("/(^)?(<br\s*\/?>\s*)+$/","\n", $x);
    $x = preg_replace("/<li>/i","\n<li>",$x);
    if(trim(strtolower($x))=="<br>")
        return "";
    return $x;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T16:47:28.093

您可以`$your_string = strip_tags($your_string)`在插入之前使用

# python - python多个dict比较

> ID：12712995
> 
> 赞同：2
> 
> 时间：2012-10-03T16:41:39.970
> 
> 标签：python, dictionary, compare

我有一个字典，想与另外 3 个字典进行比较。如果 3 个 dict 中的任何一个中都不存在键，则使用该键、值对创建一个新的 dict，此外，如果键和值在 3 个 dict 中的任何一个中都匹配，并且如果键存在但值不同，则跳过然后再创建一个字典。

```
a={'a':1,'b':2,'c':3,'d':4}
b={'a':10,'b':20}
c={'p':100,'q':200,'c':300}
d={'a':1000,'x':2000,'c':3} 
```

在将 dict a 与 b、c 和 d 进行比较之后。结果应该是 `p_dict = {'d':4}` 和 `q_dict = {'a':1,'b':2}`

我正在考虑多个 for 循环，但在比较 dict a 和 b 之后会再创建 2 个 dict，这会使过程复杂化。有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:54:08.100

这是 Python 3.3 的解决方案。这也适用于 Python 2.7，但我会使用`.iteritems()`而不是`.items()`：

```
>>> a = {"a":1, "b":2, "c":3, "d":4}
>>> b = {"a":10, "b":20}
>>> c = {"p":100, "q":200, "c":300}
>>> d = {"a":1000, "x":2000, "c":3}
>>> p_dict = {k:v for k,v in a.items() 
...               if not any(k in dicts for dicts in (b,c,d))}
>>> p_dict
{'d': 4}
>>> q_dict = {k:v for k,v in a.items()
...               if any(k in dicts for dicts in (b,c,d))
...               and not any(dicts.get(k)==v for dicts in (b,c,d))}
>>> q_dict
{'a': 1, 'b': 2} 
```

这假设您的 dicts 中没有任何值是`None`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T18:36:08.890

这是基于 Tim Pietzcer 方法的 2.x（不使用字典理解）解决方案：

```
In [680]: dicts=[b,c,d]

In [681]: p_dict=dict([(k,v) for k,v in a.iteritems()
                      if not any(k in di for di in dicts)])

In [682]: p_dict
Out[682]: {'d': '4'}

In [683]: q_dict=dict([(k,v) for k,v in a.iteritems() 
                      if any(k in di for di in dicts)
                      and not any(di.get(k)==v for di in dicts) ])

In [684]: q_dict
Out[684]: {'a': '1', 'b': '2'} 
```

# opencl - 关于内核执行期间的 clEnqueueWriteBuffer()

> ID：12712997
> 
> 赞同：0
> 
> 时间：2012-10-03T16:41:43.647
> 
> 标签：opencl

我可以调用`clEnqueueWriteBuffer()`当前正在由 GPU 设备上运行的内核写入的缓冲区吗？可以说我不关心数据冲突，我知道我在做什么。OpenCL 实现是否允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:45:04.630

值得为您的实现运行一个测试，但从我记得我通过 OpenCL 与 AMD 和 NVIDIA 合作的情况来看，即使指定了无序标志，队列也是有序的。

即使命令将乱序执行，设备完成的缓存也可能不允许您看到内核中的更改。对于全局内存，以及随后的其余内存，OpenCL 规范声明：

> **全局内存。** 该内存区域允许对所有工作组中的所有工作项进行读/写访问。工作项可以读取或写入内存对象的任何元素。根据设备的功能，可以缓存对全局内存的读取和写入。

因此，即使您能够写入设备内存，内核也不太可能读取这些更改。在您的情况下，写作，我会假设内核写入将在写入缓冲区发生之前提交，但似乎 OpenCL 规范在这一点上故意含糊不清（也许允许 APU 类型的数据访问）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T05:01:48.817

如果命令队列不是使用“乱序执行”标志创建的，则所有排队的命令都将按顺序执行（在单个命令队列中）。在这种情况下，写缓冲区和内核将不会同时执行。在其他情况下，命令可能会同时执行，并且行为将是未定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T00:06:30.277

如果你*真的*想试试这个，你需要两个不同的命令队列；这就是你如何获得重叠的 DMA 和计算。我建议不要这样做，因为内核和传输写入的任何区域都会产生不一致的结果。

# sql - 如何使用 SQL 查询加载第 n 到第 m 行？

> ID：12712998
> 
> 赞同：2
> 
> 时间：2012-10-03T16:41:42.890
> 
> 标签：sql, sql-server

如何使用 SQL 查询加载第 n 到第 n 条记录？

就像是

```
select 10 to 20 columnname from tbl order by columnname 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T16:44:11.140

SQL Server 2012 有一个名为`OFFSET`and的新功能`FETCH`：

```
SELECT (list of columns)
FROM YourTable
ORDER BY columnName
  OFFSET 10 ROWS 
  FETCH NEXT 10 ROWS ONLY 
```

[http://www.kodyaz.com/sql-server-2012/sql-paging-in-sql-server-2012-sql-order-by-offset-fetch-next-rows.aspx](http://www.kodyaz.com/sql-server-2012/sql-paging-in-sql-server-2012-sql-order-by-offset-fetch-next-rows.aspx)

在 2012 年之前的版本中，最好的方法是使用带有`ROW_NUMBER()`函数的 CTE（公用表表达式）并使用行号从该 CTE 中进行选择 -[在此处查看更多详细信息](http://blog.sqlauthority.com/2007/06/11/sql-server-2005-t-sql-paging-query-technique-comparison-over-and-row_number-cte-vs-derived-table/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:46:20.323

对于 SQL 2005 及更高版本，您可以使用`ROW_NUMBER()`

```
 DECLARE @p0 Int = 10
 DECLARE @p1 Int = 10

 SELECT [t1].[pkCompanyID]
 FROM (
     SELECT ROW_NUMBER() OVER (ORDER BY [t0].[pkCompanyID]) AS [ROW_NUMBER], [t0].[pkCompanyID]
     FROM [tblCompany] AS [t0]
     ) AS [t1]
 WHERE [t1].[ROW_NUMBER] BETWEEN @p0 + 1 AND @p0 + @p1
 ORDER BY [t1].[ROW_NUMBER] 
```