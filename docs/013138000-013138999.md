# StackOverflow 问答 13138000-13138999

# python - 打印总和（x）-python

> ID：13138007
> 
> 赞同：-1
> 
> 时间：2012-10-30T11:26:44.360
> 
> 标签：python, python-3.x, sum

有人可以帮我解决这个问题吗？我总是收到此代码错误，但不知道出了什么问题？

```
x= 1523

while x <= 10503:
    x=x+2
    print sum(x) 
```

编辑。很抱歉不清楚。是的，我想得到从 1523 到 10503（包括）（2 的间隔）的所有数字的总和。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T11:56:50.470

pythonic解决方案是：

```
print(sum(range(1523, 10504, 2))) 
```

（使用 while 循环来构建一个包含整数范围的列表有点傻，因为有一个内置函数可以更有效地完成它。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T12:23:09.720

为什么要使用循环？

```
>>> ((10503-1523+2)//2  * (1523 + 10503))//2
27004383 
```

这只是老问题“从 1 到 100 的所有整数的总和是多少？”的扩展。这是

```
50*101 (1+100 + 2+99 + 3+98 + ... 50+51) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T11:35:17.963

问题在于 sum() 仅适用于可迭代类型，例如元组、列表或类似类型。

而且您正在将总和应用于整数，所以这行不通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T11:46:20.353

你可以尝试这样的事情：

```
x = 1523
x_list = []
while x <= 10503:
    x=x+2
    x_list.append(x)
print(sum(x_list)) 
```

我假设你想得到一个等差数列中所有数字的总和，它的第一个元素是 1523，最后一个元素是 10503，它们的共同点是 2。从​​你的问题中不清楚

# android - 如何在 Webview android 上覆盖 imageview

> ID：13138010
> 
> 赞同：1
> 
> 时间：2012-10-30T11:26:54.093
> 
> 标签：android, android-layout, webview, imageview

我是 android 的初学者。我想在 webview 上叠加图像。我将 Framelayout 与 webview 和 imageview 一起使用。它可以正常工作。但是当视频在 web 视图中播放时，图像不会显示。如何在播放器中显示图像？我在下面提到了我的代码。请帮我

```
<FrameLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="0dp"
    android:layout_margin="0dp">

<WebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_margin="0dp"
    android:padding="0dp" 
    android:scaleType="center"/>

 <ImageView
     android:id="@+id/imageview"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_gravity="center_horizontal|center"
     android:contentDescription="@string/webviewexample"
     android:src="@drawable/image"/>

</FrameLayout > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T07:43:32.727

嗨，我什至在 webview 上保留了几个按钮图像和进度条。这是代码片段。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:orientation="vertical">

    <WebView
        android:id="@+id/myWebView"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="80dip"
        android:src="@drawable/homepageheader"
        android:layout_marginTop="0dip" />

   <ImageButton
        android:id="@+id/button_back"
        android:layout_width="36dp"
        android:layout_height="44dp"
        android:layout_marginLeft="20dip"
        android:background="@android:color/transparent"
       android:layout_marginTop="22dip"
        android:src="@drawable/backbtn" /> 

    <ProgressBar
        android:id="@+id/progressBar1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical|center_horizontal" />

 <ImageButton
       android:id="@+id/button_refresh"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/refresh_icon" 
        android:layout_gravity="right"
        android:layout_marginRight="20dip"
        android:layout_marginTop="22dip"
        android:background="@android:color/transparent"/> 

</FrameLayout> 
```

但是，这可以通过使用 Interface builder 来实现。

首先将 webview 拖放到布局文件上。

稍后尝试添加图像或图像按钮。

希望这可以帮助。

# html - 导航中的 CSS3 过渡问题

> ID：13138017
> 
> 赞同：0
> 
> 时间：2012-10-30T11:27:20.557
> 
> 标签：html, css

我想在不使用jQuery的情况下使用纯css3效果，我想使用css3过渡使选项卡平滑展开，但是有一个问题。

如果您查看[jsfiddle 文件](http://jsfiddle.net/ATPRu/3/)，您会注意到选项卡重叠和崩溃的问题。

这是我的 HTML 代码：

```
<div id="wrapper">
    <nav id="mainnav">
        <ol>
            <li class="home"><a href="http://www.domain.com"></a></li>
            <li class="news"><a href="http://www.domain.com/p/">News</a></li>
            <li class="photos"><a href="http://www.domain.com/channels/s/">Photos</a> </li>
            <li class="biography"><a href="http://www.domain.com/e/">Biography</a></li>
        </ol>
    </nav>
</div> 
```

和CSS代码：

```
div#wrapper{
width:990px;
height:auto;
margin:0 auto;

font:15px Arial,Verdana,Helvetica,sans-serif;

}
div#wrapper #mainnav{
width:100%;
height:40px;

border-bottom:1px solid #c4c4c4;
float:left;
clear:both;
background-color: #5b5b5b;
background-image: -moz-linear-gradient(#5b5b5b,#4d4d4d,#3f3f3f); 
background-image: -webkit-linear-gradient(#5b5b5b,#4d4d4d,#3f3f3f); 
background-image: -o-linear-gradient(#5b5b5b,#4d4d4d,#3f3f3f);
background-image: -ms-linear-gradient(#5b5b5b,#4d4d4d,#3f3f3f);
background-image: linear-gradient(#5b5b5b,#4d4d4d,#3f3f3f);
}

div#wrapper #mainnav ol{
list-style:none;
margin:0px; padding:0;
}
div#wrapper #mainnav li{
float:left;
}

div#wrapper #mainnav li.home{
background: #6db3f2; /* Old browsers */
background: -moz-linear-gradient(top,  #6db3f2 0%, #54a3ee 40%, #3690f0 56%, #1e69de 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#6db3f2),  color-stop(40%,#54a3ee), color-stop(56%,#3690f0), color-stop(100%,#1e69de)); /*  Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* IE10+ */
background: linear-gradient(to bottom,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%);    /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#6db3f2', endColorstr='#1e69de',GradientType=0 ); /* IE6-9 */

float:left;
width:48px;
height:40px;
position:relative;
margin-top:0px ; padding:0;
}
div#wrapper #mainnav li.home a{
background:url(home.png) 0px 0px no-repeat; 
margin-left:0px;
}

div#wrapper #mainnav li.home:hover{
background: #6db3f2; /* Old browsers */
background: -moz-linear-gradient(top,  #6db3f2 0%, #54a3ee 40%, #3690f0 56%, #1e69de 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#6db3f2), color-stop(40%,#54a3ee), color-stop(56%,#3690f0), color-stop(100%,#1e69de)); /*  Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* IE10+ */
background: linear-gradient(to bottom,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#6db3f2', endColorstr='#1e69de',GradientType=0 ); /* IE6-9 */
float:left;
width:48px;
height:40px;
position:relative;
margin-top:0px ; padding:0;
}
div#wrapper #mainnav li.home a:hover{
background:url(home.png) 0px 0px no-repeat; 
margin-left:0px;

}

div#wrapper #mainnav li.news:hover{
cursor:pointer;
border:1px solid #b30808; background-color: #e40a0a;
 background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#e40a0a), color-stop(100%, #9f0202));
 background-image: -webkit-linear-gradient(top, #e40a0a, #9f0202);
background-image: -moz-linear-gradient(top, #e40a0a, #9f0202);
background-image: -ms-linear-gradient(top, #e40a0a, #9f0202);
background-image: -o-linear-gradient(top, #e40a0a, #9f0202);
background-image: linear-gradient(top, #e40a0a, #9f0202);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#e40a0a, endColorstr=#9f0202); 
 }
 div#wrapper #mainnav li.news a:hover{
background:url(awatch_icon.png) 5px 6px no-repeat; 
padding-top:9px;
text-shadow:1px 1px 1px blue;border-left:1px solid #000;
}

div#wrapper #mainnav li.photos:hover{
background: #6db3f2; /* Old browsers */
background: -moz-linear-gradient(top,  #6db3f2 0%, #54a3ee 40%, #3690f0 56%, #1e69de 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#6db3f2), color- stop(40%,#54a3ee), color-stop(56%,#3690f0), color-stop(100%,#1e69de)); /* Chrome,Safari4+  */
background: -webkit-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* IE10+ */
background: linear-gradient(to bottom,  #6db3f2 0%,#54a3ee 40%,#3690f0 56%,#1e69de 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#6db3f2', endColorstr='#1e69de',GradientType=0 ); /* IE6-9 */
}
div#wrapper #mainnav li.photos a:hover{
background:url(domain_icon.png) 5px 6px no-repeat;padding-top:10px;text-shadow:1px 1px 1px blue;}

div#wrapper #mainnav li.biography:hover{
background-color: #ffaf46;
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffaf46), color-stop(100%, #e78404));
background-image: -webkit-linear-gradient(top, #ffaf46, #e78404);
background-image: -moz-linear-gradient(top, #ffaf46, #e78404);
background-image: -ms-linear-gradient(top, #ffaf46, #e78404);
background-image: -o-linear-gradient(top, #ffaf46, #e78404);
background-image: linear-gradient(top, #ffaf46, #e78404);filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#ffaf46, endColorstr=#e78404);
}
div#wrapper #mainnav li.biography a:hover{
 background:url(icon.png) 5px 6px no-repeat;padding-top:10px;text-shadow:1px 1px 1px blue;}

div#wrapper #mainnav li{background:url(mainnav_sep.jpg) no-repeat left top;float:left;}
div#wrapper #mainnav li a{display:block;padding-top:11px;color:#fff;margin:0  10px;cursor:pointer;height:27px;text-shadow:1px 1px 1px #000;}
div#wrapper #mainnav li a:link, div#wrapper #mainnav li a:visited{text-decoration:none;}
div#wrapper #mainnav li a:hover,div#wrapper #mainnav li a:active, div#wrapper #mainnav li a:focus {
transition:width 2s;
-moz-transition:width 2s; /* Firefox 4 */
-webkit-transition:width 2s; /* Safari and Chrome */
-o-transition:width 2s; /* Opera */
width:120px;height:29px;margin:0px 0px 0px 0px ;text-indent:35px;text- decoration:none;color:#fff;text-shadow:1px 1px 1px #000;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:31:05.453

这是因为您正在为`<a>`元素提供过渡效果，请尝试将其赋予`<li>`元素并更改宽度...

只需尝试这样的[**事情**](http://jsfiddle.net/8qbFx/1/)

HTML

```
<ul>
    <li>blah</li>
    <li>blah2</li>
</ul>​ 
```

CSS

```
ul li:nth-child(1){
    background-color: #ff0000;
}

ul li:nth-child(2){
    background-color: #00ff00;
}

li {
    display: inline-block;
    height: 20px;
    width: 100px;
    text-align: center;
     transition:width 2s;
    -moz-transition:width 2s; /* Firefox 4 */
    -webkit-transition:width 2s; /* Safari and Chrome */
    -o-transition:width 2s; /* Opera */
}

li:hover {
     width: 300px;
}​ 
```

# css - 移动网站背景图像在 Blackberry Bold 9700 上无法正确显示

> ID：13138026
> 
> 赞同：3
> 
> 时间：2012-10-30T11:27:37.523
> 
> 标签：css, mobile, blackberry, web, sprite

我已经为一些图标等使用 CSS sprite 构建了一个移动站点，但在 Blackberry Bold 9700 的浏览器中，图像看起来确实像素化和锯齿状。在其他几个 BB 设备和我们测试过的所有其他设备上都很好。

精灵图像也似乎更小，因此不确定这是否是浏览器的缩放问题。内嵌图像看起来不错，但也比其他设备小。

**设备详情：**

*粗体 9700 - 6.0 捆绑包 2049*

有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:25:51.020

经过大量搜索，我找到了原因，图像压缩。我总是通过 ImageOptim 应用程序运行图像，看起来这导致了这款手机的分辨率极低。导出没有压缩的 CSS 精灵，现在看起来很好。

**编辑：**

我认为压缩是问题，但它实际上是图像精灵的尺寸！这是一张长图，大约 1400px 高，黑莓似乎会自动降低大图的质量，导致所有问题。

**通过简单地将精灵分成 2 个大约 600 像素高的文件来**修复它。****

# ruby-on-rails - 从rails3中的关系中检索对象ID

> ID：13138038
> 
> 赞同：0
> 
> 时间：2012-10-30T11:28:20.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, relationship

我有一个模型

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable
  has_many :meetings, :dependent => :destroy do 
    def find_foreign
      Meeting.where("user_id <> ?", id)
    end
  end

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body

end 
```

当我试图让用户的外国会议像这样

```
some_user.meetings.find_foreign 
```

我收到一个错误

```
NoMethodError (undefined method `id' for []:ActiveRecord::Relation): 
```

因为 find_foreign 中的 self 是一个数组。如何从此方法中检索 User.id ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:32:33.933

你可以`self`在这里访问：

```
def find_foreign
  Meeting.where("user_id <> ?", self.id)
end 
```

但是不知道为什么要写这个？

`some_user.meetings`将已经按当前用户 ID 过滤会议。我什至不知道这里是否允许阻塞！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:25:55.683

`find_foreign`方法在`User Model`，你正试图调用它`Array of the Object of the Meetings`

只需使用

```
some_user.find_foreign 
```

# rally - 需要用java 5构建的集会休息api jar

> ID：13138040
> 
> 赞同：1
> 
> 时间：2012-10-30T11:28:36.780
> 
> 标签：rally

我需要基于 JAVA 5 构建的 rally-rest-api-1.0.2.jar？Rally 提供这个还是我们需要建造一个？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:20:16.200

目前，Rally REST Toolkit for Java 是使用 Java 6 构建的。最新版本是[1.0.4](https://github.com/downloads/RallyTools/RallyRestToolkitForJava/rally-rest-api-1.0.4.jar)。我不认为库本身使用了 6 特有的任何东西，但我不确定它的库（Gson 和 HttpClient）。如果您想尝试所有源代码，请[点击此处](https://github.com/RallyTools/RallyRestToolkitForJava)。请让社区知道情况如何。

# ruby-on-rails-3 - 我们可以一次将多个工厂加载到数据库中吗？

> ID：13138041
> 
> 赞同：0
> 
> 时间：2012-10-30T11:28:36.447
> 
> 标签：ruby-on-rails-3, factory-bot, testunit

刚开始用工厂女孩。如果必须将工厂保存到数据库中，则必须运行 `FactoryGirl.create()`。

但是有什么方法可以将工厂集合加载到数据库中，而不必在每个工厂上调用 create 呢？

如果有任何帮助，我正在使用 Ruby 1.9.3、Rails 3.2.8 和 Factory Girl 4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:41:30.180

如果您需要一堆不同类型的工厂，您只需单独创建它们。您可以通过将其添加到您的`test_helper.rb`：

```
include FactoryGirl::Syntax::Methods 
```

然后你可以像这样创建工厂：

```
create(:factory_name) 
```

当然，如果你需要一堆相同类型的记录，你可以像这样创建它们：

```
5.times { create(:factory_name) } 
```

正如我在评论中提到的，在初始化测试框架时一举创建所有工厂会适得其反。FactoryGirl 背后的想法是只提供每个测试用例或上下文所需的数据。这避免了倾向于滑入夹具驱动方法的测试之间的依赖关系。

# json - Phonegap + Jquery mobile + JSON，滚动到列表视图末尾时附加更多结果

> ID：13138044
> 
> 赞同：0
> 
> 时间：2012-10-30T11:28:37.450
> 
> 标签：json, jquery-mobile, cordova, append

我正在寻找动态内容来填充由 JSON 回调的记录，下面的脚本非常适合从数据库中提取记录，经过一番考虑，如果假设数据库表包含超过 10000 条记录，这是一种方式将回调记录限制为 20 条，直到滚动到达列表视图数据角色的末尾，然后将从列表末尾拉出另外 20 条记录，依此类推。

PHP 从数据库中查询记录：

```
<?php
header('Content-type: application/json');

$server = "localhost";
$username = "root";
$password = "";
$database = "test";

$con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());
mysql_select_db($database, $con);

$sql = "SELECT employeeNumber, firstName, email, jobTitle FROM employees ORDER BY firstName";
$result = mysql_query($sql) or die ("Query error: " . mysql_error());

$records = array();

while($row = mysql_fetch_assoc($result)) {
$records[] = $row;
}

mysql_close($con);

echo $_GET['jsoncallback'] . '(' . json_encode($records) . ');';
?> 
```

Ajax 填充返回的记录：

```
$(document).ready(function() {
// load JSON data
var output = $('#output');
$.ajax({
    beforeSend: function() { $.mobile.loading('show'); },
    complete: function() { $.mobile.loading('hide'); },
    url: 'pool.php',
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    timeout: 10000,
    success: function(data, status){
        $.each(data, function(i, item){
            var i = i + 1;
            var employee = '<li><a href="#indexPage"><img src="images/head.jpg" />'
            + '<h3>#' + i + " " + item.firstName + '</h3>'
            + '<p>' + item.employeeNumber + '<br>'
            + item.email + '<br>'
            + item.jobTitle + '</p></a></li>';

            output.append(employee);
        });
    },
    error: function(){
        output.text('Error loading data!');
    }
});
}); 
```

结果将附加在此处：

```
<div data-role="content">
    <div class="content-primary">   
        <ul data-role="listview" id="output" data-filter="true"></ul>
    </div>
</div> 
```

请多多指教，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:35:59.110

好的。首先，您需要修改 SQL 和 ajax 调用以支持 LIMIT 0,20 的分页。添加到您的 SQL ：

```
$sql = "SELECT employeeNumber, firstName, email, jobTitle FROM employees ORDER BY firstName LIMIT ". mysql_real_escape_string($_REQUEST["page"]) . ",20"; 
```

这会将结果数限制为 20 从通过的页面开始计数。

在 javascript 中，您必须传递页面（从 0 开始）并存储当前页面。

```
url :'pool.php?page=' + page 
```

你必须开始监视元素的滚动端

```
$("#scroller").bind("scroll", function(evt){  
    var el = $(this).get(0);
    if (el.offsetHeight + el.scrollTop >= el.scrollHeight) {
         loadResults(++page);
    }
});
function loadResults(page) {
     // perform your ajax call
} 
```

​</p>

这是一个简单的小提琴，显示滚动结束检测 [http://jsfiddle.net/nxtwrld/bH5Lb/1/](http://jsfiddle.net/nxtwrld/bH5Lb/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T09:30:39.437

```
<ul data-role="listview">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
    <li>7</li>
    <li>8</li>
    <li>9</li>
    <li>10</li>
    <li>11</li>
    <li>12</li>
    <li>13</li>
    <li>14</li>
    <li>15</li>
    <li>16</li>
    <li>17</li>
    <li>18</li>
    <li>19</li>
</ul>

var timer    = setInterval(function () {
    scrollOK = true;
}, 100),
scrollOK = true,
count    = 20;
$(window).bind('scroll', function () {
if (scrollOK) {
    scrollOK = false;
    if ($(this).scrollTop() + $(this).height() >= ($(document).height() - 100)) {
        //now load more list-items because the user is within 100px of the bottom of the page
        console.log('You Hit Bottom!');
        var out = [];
        for (var i = 0; i < 10; i++) {
            out.push('<li>' + (count++) + '</li>');
        }
        $('ul').append(out.join('')).listview('refresh');
    }
}
}); 
```

请参阅此链接[http://jsfiddle.net/knuTW/](http://jsfiddle.net/knuTW/)

# java - Neo4j：在遍历中退后一步

> ID：13138048
> 
> 赞同：0
> 
> 时间：2012-10-30T11:28:49.883
> 
> 标签：java, neo4j, traversal

让我们假设一个非常简单的示例图，其中包含人（作为节点）以及两者之间的 KNOWS 和 FRIEND_OF 关系。现在我想获取每个知道随机人并且是 FRIEND_OF（这个或）另一个人的节点。请考虑一下，我想使用遍历来检查这些关系，而不是简单的 node.hasRelationship()。

因此，我将描述一个 TraversalDescription，它检查其 Evaluator 中的路径长度并在步骤 1 中选择 KNOWS 关系。如果有一个，我（自动）转到路径中连接的 KNOWS 节点，然后必须制作一个回到传出节点。因此，如果当前遍历的节点具有 path-startnode 的 id，我将只检查何时 path.length == 2 获取传入的 KNOWS-relation 并将 continue-variable 设置为 true。

问题：我再也没有回到路径起始节点（我检查了 KNOWS 关系的那个），它永远不会出现在评估器中；我还尝试使用不同的 UNIQUENESS 参数，但没有一个起作用。

/edit：这是我的遍历描述（或多或少的伪代码）：

```
TraversalDescription td = Traversal.description()
    .relationships(RelTypes.KNOWS, Direction.BOTH)
    .relationships(RelTypes.FRIEND_OF, Direction.OUTGOING)
    .uniqueness(Uniqueness.NONE)
    .evaluate(new Evaluator(){
        public Object evaluate(final Path path){
            if (path.length == 0) return EXCLUDE_CONTINUE;
            Relation currentRel = path.lastRelationship();
            boolean continue = false;
            boolean include = false;
            if (path.length == 1){
                // check for outgoing knows-relation
                continue = currentRel.isType(KNOWS) && currentRel.startNode().getId == path.startNode().getId();
            }
            else if (path.length == 2){
                // check for outgoing knows-relation to the original start node
                // SECOND PART OF STATEMENT NEVER GETS TRUE!
                toContinue = currentRel.isType(KNOWS) && currentRel.startNode().getId == path.startNode().getId();
            }
            else if (path.length == 3){
                // ...
            }
            return Evaluation.of(toContinue, include);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:31:45.670

尝试

```
private static Traverser getHomies(final Node ofPerson) {
        TraversalDescription td = Traversal.description().breadthFirst().relationships(RelTypes.KNOWS, Direction.INCOMING)
                .relationships(RelTypes.FRIEND_OF, Direction.OUTGOING).evaluator(Evaluators.includingDepths(1, 2))
                .evaluator(Evaluators.returnWhereLastRelationshipTypeIs(RelTypes.FRIEND_OF));

        return td.traverse(ofPerson);
    } 
```

你的伪代码：

*   说不应该包含任何路径 - 字段*包含*每次都是*错误的*
*   你的语句的第二部分是没有比较（==），它是一个赋值（=）

# jquery - 如何在悬停时放大图像并模糊其余部分？

> ID：13138051
> 
> 赞同：1
> 
> 时间：2012-10-30T11:28:53.933
> 
> 标签：jquery

我正在尝试构建 jQuery 模块，该模块在悬停时放大图像，然后对它们进行淡入淡出描述，最后模糊其余未悬停的图像。

我想我几乎已经管理了模块功能的第一部分（在您的堆栈中提供了很多帮助），但是我在添加模糊脚本时遇到了问题。

我正在使用 jquery.gaussian-blur.js，到目前为止，它是我测试过的最好和最快的脚本。

我在下面添加了指向我的模块的链接：

[http://jsfiddle.net/C6k9j/3/](http://jsfiddle.net/C6k9j/3/)

这是代码的一部分。html:

```
<div id="content">

<div class="wrapper">
<img class="imgblur" src="http://piotrbrzezinski.pl/test.jpg" width="247" height="173"/>
<a href="#" class="description">
Content
</a>
</div>

<div class="wrapper_two">
<img class="imgblur" src="http://piotrbrzezinski.pl/test.jpg" width="247" height="173"/>
<a href="#" class="description_two">
Content
</a>
</div>

<div class="wrapper_three">
<img class="imgblur" src="http://piotrbrzezinski.pl/test.jpg" width="247" height="173"/>
<a href="#" class="description_three">
Content
</a>
</div>

</div>​ 
```

Jquery（每个 div.wrapper 都有单独的功能）：

```
// first DIV                       
    $('.wrapper').hover(function(){

                                 $(this).stop().animate({ 

                    width: 547, height: 383, margin: -100,

                    }, {duration: 100}).css({'z-index':'10000'});
        $('.wrapper > img').stop().animate({ 

                width: 547, height: 383

                    }, {duration: 100});

        $(this).children('.description').stop().fadeTo(500, 0.8);

    $('.wrapper_two > img, .wrapper_three > img').stop().gaussianBlur({
                deviation: 3, //level of blur
                imageClass: 'imgblur'    //class of the original image (just in case)    
            });

    },function(){

        $('.wrapper_two > img, .wrapper_three > img').stop().gaussianBlur({
                deviation: 0, //level of blur
                imageClass: 'imgblur'    //class of the original image (just in case)    
            });

        $(this).children('.description').stop().fadeTo(50, 0);
        $(this).stop().animate({ 

                    width: 247, height: 173, margin: 0,

                    }).css({'z-index':'100'});
        $('.wrapper > img').stop().animate({ 

                    width: 247, height: 173

                    });        
    });

    // secound DIV

    $('.wrapper_two').hover(function(){

                                     $(this).stop().animate({ 

                    width: 547, height: 383, margin: -100,

                    }, {duration: 100}).css({'z-index':'10000'});
        $('.wrapper_two > img').stop().animate({ 

                width: 547, height: 383

                    }, {duration: 100});
        $(this).children('.description_two').stop().fadeTo(500, 0.8);
        $('.wrapper > img, .wrapper_three > img').stop().gaussianBlur({
                deviation: 3, //level of blur
                imageClass: 'imgblur'    //class of the original image (just in case)    
            });

    },function(){

        $('.wrapper > img, .wrapper_three > img').stop().gaussianBlur({
                deviation: 0, //level of blur
                imageClass: 'imgblur'    //class of the original image (just in case)    
            });

        $(this).children('.description_two').stop().fadeTo(50, 0);
        $(this).stop().animate({ 

                    width: 247, height: 173, margin: 0,

                    }).css({'z-index':'100'});
        $('.wrapper_two > img').stop().animate({ 

                    width: 247, height: 173

                    });

    }); 
```

第二个问题是我不知道如何使这些功能成为“子”或“父”，所以我必须为每个 DIV 制作单独的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:56:56.527

我设法删除了每个包装器的重复代码：

```
// first DIV                       
$('.wrapper').hover(function(){
    $('.wrapper').addClass('notSelected');
    $(this).removeClass('notSelected');

    $(this).stop().animate({                     
                width: 547, height: 383, margin: -100,                    
                }, {duration: 100}).css({'z-index':'10000'});
    $(this).find('img').stop().animate({                     
            width: 547, height: 383                    
                }, {duration: 100});

    $(this).children('.description').stop().fadeTo(500, 0.8);

$('.notSelected').find('img').stop().gaussianBlur({
            deviation: 3, //level of blur
            imageClass: 'imgblur'    //class of the original image (just in case)    
        });

},function(){

    $('.notSelected').find('img').stop().gaussianBlur({
            deviation: 0, //level of blur
            imageClass: 'imgblur'    //class of the original image (just in case)    
        });

    $(this).children('.description').stop().fadeTo(50, 0);
    $(this).stop().animate({                     
                width: 247, height: 173, margin: 0,                    
                }).css({'z-index':'100'});
    $(this).find('img').stop().animate({                     
                width: 247, height: 173                    
                });        
    $('.notSelected').removeClass('notSelected');
});

​Here is jsFiddle: http://jsfiddle.net/C6k9j/8/ 
```

在 html 区域中，我已将类“包装器”添加到所有包装器中，但我没有删除旧类，因此 css 仍然可以工作。

# objective-c - 编辑应用程序委托以锁定纵向 ios 5 和 6

> ID：13138055
> 
> 赞同：0
> 
> 时间：2012-10-30T11:29:15.027
> 
> 标签：objective-c, ios, device-orientation

我在 ios 5 和 ios 6 中停止旋转时遇到了一些问题。我想将应用程序锁定为纵向。我正在使用基于导航栏的应用程序，但某些页面上的导航栏是隐藏的（如果这有所不同）。

我不太确定要在应用程序委托中进行哪些编辑，以禁用自动旋转并将其锁定为纵向以针对这些版本的 iO，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:34:37.137

您是否检查过 .info plist 文件？如果没有，请查看支持的接口方向并丢弃您在应用程序中不需要的方向。

# java - JAVA客户端获取登录用户邮箱的lotus notes

> ID：13138061
> 
> 赞同：0
> 
> 时间：2012-10-30T11:29:32.693
> 
> 标签：java, lotus-notes, lotus-domino

我正在写一个莲花笔记插件。我想要java客户端内的lotus notes登录用户电子邮件。即用户用于登录lotus notes 的电子邮件地址。我的lotus notes 是为Gmail 帐户配置的，即我正在使用Gmail 帐户使用lotus notes 发送邮件。

**这是我的工作流程：**
我在“消息”表单内的“发送”按钮旁边创建了一个操作“我的操作”。当我单击“我的操作”时，它会触发我的 JAVA 客户端，我必须在其中获取登录的用户电子邮件地址。

所以我的问题是如何获取登录用户电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:34:48.943

尝试从字段中获取价值`INETFrom`。

注意，你使用什么语言没有区别，java、lotusscript、c++，你只需要知道memo存储Internet地址的项目名称。如果您有 LN 客户端，您可以使用属性检查备忘录中的所有字段，它也可能有很大帮助。

顺便说一句，如果备忘录是从一个 Domino 用户发送到一个域内的另一个 Domino 用户（并且它取决于 Domino 服务器上的设置），则可能是备忘录中没有关于 Internet 地址的信息。

如果这没有帮助，请尝试使用此代码检查所有项目（这将打印出所有项目，以便您找到电子邮件所在的位置）：

```
Vector items = doc.getItems();
for (int j=0; j<items.size(); j++) {
    Item item = (Item)items.elementAt(j);
    System.out.println(item.getName() + " = " + item.getValueString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:01:40.670

由于您更新的问题现在已经澄清您正在寻找当前登录用户的电子邮件地址，并且您已指定该用户是 gmail 用户 - 我相信您要问的是如何获取用户的 gmail 地址。那是对的吗？如果我是正确的，那么我相信答案将是您必须编写一些代码来从他的个人通讯录中读取用户当前的位置文档。为了验证我是否走在正确的轨道上，我建议如下：

*   在 Notes 客户端中，查看窗口底部状态栏右侧的位置部分。记下那里出现的位置名称（例如，“办公室”、“家”等）。
*   单击位置部分，然后从弹出菜单中选择“编辑位置...”。
*   在“首选项”对话框的“选择位置”窗格中，从列表中选择您所在位置的名称，然后单击“编辑”按钮。
*   单击“基本”选项卡，然后检查：您想要的地址是否在标有“Internet 邮件地址”的字段中？

请在我的最后一个要点中将问题的答案作为新评论发布。它就在那里，然后我将继续提供更多详细信息。

**上一个答案：**

如果您正在阅读的邮件是 Notes 内部邮件，从一个 Notes 用户到另一个用户，那么发件人的姓名*就是*电子邮件地址。如果发件人是您自己域中的 Notes 用户，并且您想要他的 Internet 电子邮件地址，那么您必须在 Domino 目录中查找它。如果您使用的是 Notes/Domino 8 或更高版本，则可以在 Java 代码中使用该类的`LookupNames`方法。`lotus.domino.Directory`

# java - 用Java程序查询iPhone联系人

> ID：13138069
> 
> 赞同：0
> 
> 时间：2012-10-30T11:30:03.763
> 
> 标签：java, iphone, bluetooth

我想通过蓝牙从我的java程序中查询和写入iPhone的联系人。那可能吗？是否有任何好的 java 蓝牙库也支持适当的蓝牙配置文件？有什么经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:59:01.577

经过一段时间的搜索和测试：可以。我用过 bluecove 库。我现在可以从 iPhone 查询电话簿。不幸的是，我必须提前配对 iPhone。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T11:34:55.500

不，这绝对不可能。

# jquery - jquery mobile中的弹出对话框

> ID：13138071
> 
> 赞同：0
> 
> 时间：2012-10-30T11:30:07.543
> 
> 标签：jquery, mobile

我使用了 jQuery mobile 并在最左边的按钮上添加了弹出窗口，但弹出窗口没有居中，因为它会向左填充更多。

[在 android 模式下，弹出对话框不在纵向模式中居中我已使用此](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/)链接中的代码从中生成弹出对话框按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:52:02.057

目前尚不清楚您遇到了什么问题，但是要将对话框置于窗口的中心，只需`data-position-to="window"`像这样使用：

```
<a href="#positionWindow" data-rel="popup" data-position-to="window">

<div data-role="popup" id="positionWindow">
    <p>I am positioned to the window.</p>
</div> 
```

# objective-c - 在 NSWindow 中使用 NSImage 作为图案化/重复的背景

> ID：13138072
> 
> 赞同：2
> 
> 时间：2012-10-30T11:30:14.843
> 
> 标签：objective-c, cocoa, nswindow, nsimage

我想在 NSWindow 中将 NSImage 显示为重复的背景。我正在使用[这段](https://stackoverflow.com/questions/5435560/give-nswindow-a-background-image)代码：

```
_window.backgroundColor = [NSColor colorWithPatternImage:[NSImage imageNamed:@"image.png"]]; 
```

调整大小时会出现问题，因为仅重新显示窗口的新区域（底部和右侧），并且背景原点位于左下角。这会导致图像故障： [![窗口示例](../Images/c30e208c19211bfcf923bc788d2b2adc.png)](https://i.stack.imgur.com/Hl7XA.png)

当前的解决方法是在调整大小时重新显示窗口：

```
_window.delegate = self;
...
- (void)windowDidResize:(NSNotification *)notification {
  [_window display];
} 
```

我的问题是：

1.  有没有办法在调整大小时自动显示所有背景（即没有 usign `windowDidResize:`）？
2.  可以将背景原点更改为左上角（以便调整大小的新区域将无缝地延续现有区域）？

# opencart - Opencart - 我如何在管理面板中添加子菜单

> ID：13138073
> 
> 赞同：2
> 
> 时间：2012-10-30T11:30:26.060
> 
> 标签：opencart

我想在管理面板中添加一个**子菜单。**`Opencart`

我看到了这个[链接](http://forum.opencart.com/viewtopic.php?t=45566)，但它并没有真正帮助。

任何帮助都会被挪用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T11:33:43.297

我只是找到了解决方案：

因为我们不应该修改核心，唯一的解决方案是 VQMOD，所以您应该在 xml 文件夹中的 xml 文件中添加一些行：

```
<file name="admin/controller/common/header.php">
    <operation>
        <search position="after"><![CDATA[$this->data['text_backup'] = $this->language->get('text_backup');]]></search>
        <add><![CDATA[      $this->data['text_export'] = "sms";]]></add>
    </operation>
    <operation>
        <search position="after"><![CDATA[$this->data['backup'] = $this->url->link('tool/backup', 'token=' . $this->session->data['token'], 'SSL');]]></search>
        <add><![CDATA[          $this->data['export'] = $this->url->link('tool/export', 'token=' . $this->session->data['token'], 'SSL');]]></add>
    </operation>
</file> 
```

它将菜单添加到系统菜单。希望能帮助到你。

# python - 为什么 pythonics 更喜欢 pip 而不是他们操作系统的包管理器？

> ID：13138077
> 
> 赞同：5
> 
> 时间：2012-10-30T11:30:43.207
> 
> 标签：python, pip, package-managers

在阅读教程和自述文件时，我经常看到人们宣传`pip`使用`apt`. 然而在现实生活中，我只遇到过只用他们的操作系统的包管理器安装东西的人，理由是这个包管理器会同等对待所有的包，不管是否是 python。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T11:39:06.060

Pythonistas 通常推荐有两个主要原因`pip`。第一个是它是一个包管理器，几乎可以保证随 Python 安装一起提供，因此，它独立于您使用它的操作系统。这使得提供适用于 Windows 和 OS X 以及您最喜欢的 Linux 的说明变得更加容易。

也许更重要的是，它可以`pip`很好地与. 一起使用`virtualenv`，这使您可以轻松地拥有多个冲突的包配置并在不破坏全局 Python 安装的情况下对其进行测试。如果我没记错的话，这是因为`pip`它本身就是一个 Python 程序，它会自动在当前`virtualenv`沙箱中运行。操作系统级别的包管理器显然不这样做，因为这不是他们的工作。

此外，正如@Henry 在下面指出的那样，将您的包列出在一个地方 (PyPI) 比依赖 Debian/Ubuntu/Fedora 维护者将其包含在他们的包列表中更容易。不太受欢迎的软件包几乎永远不会进入发行版的软件包列表。

也就是说，我经常发现安装全局库（`numpy`例如 ）更容易，并且使用`apt-get`您最喜欢的替代方案更容易且痛苦更少。

# database - JSON 与数据库

> ID：13138086
> 
> 赞同：1
> 
> 时间：2012-10-30T11:31:09.027
> 
> 标签：database, json, security, configuration

最近我不得不制作一个应用程序，后来必须上传到多个网络服务器。这样做我意识到当将管理员密码和用户名存储到 json 文件中时，不需要数据库连接，因此它一直有效。此外，当在 json 中保存配置时，我可以将我的应用程序复制到 Web 服务器，然后转到浏览器进行配置。

当为此使用数据库时，我必须配置这个硬编码。数据库连接将在 connect.php 或 config.php 中声明。上传应用程序时，我无法使用它，因为没有数据库连接。而且我无法从应用程序本身设置数据库连接，因为即使可以登录，我也无法登录，这就像封闭汽车内的车钥匙一样。

我的困境：这是正确的方法吗，这是保存吗，是否有效，最重要的是你们是如何做到的。

存储管理员登录和配置数据的最佳方式是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:43:26.917

Lynks 是正确的，这很常见并且比在源代码管理中使用密码更好，但是如果这是您正在设计的生产系统，我强烈建议使用不同的用户身份验证机制。

大多数数据库将允许您使用本地系统用户和组，或外部 LDAP 来管理您的用户凭据。大多数应用服务器也会有这种机制，这不是一个新问题。某些系统将允许您为受信任的用户创建安全密钥（如 SSH 密钥）以允许无密码登录。

在生产系统的任何地方都清楚地显示密码是一个坏主意，至少使用有损散列方法对其进行加扰。请记住，一旦您处理密码，作为设计师和开发人员，您有责任尽最大努力确保密码安全。请先评估您的所有选项，然后再决定简单的解决方案，这可能会让您和您的客户日后感到非常尴尬。您正在使用哪些技术？也许我们可以帮助您找到可用的选项。

请记住，没有什么是完全孤立的。例如，即使这不是一个关键系统，很多地方也会使用某种密码模式，这将为潜在的黑客提供入侵其他帐户的线索。如果您管理多个用户的密码，一些用户会在很多事情上使用相同的密码。

这篇文章不是作为讲座，而是请求您确保探索所有可用的途径，以确保您的声誉和客户的安全。把它想象成一个挑战，或谜题，并享受解决它的乐趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:37:15.123

通常的解决方案是将密码从源代码中移到配置文件中。然后将管理和保护该配置文件的工作留给您的系统管理员。这样开发人员就不需要知道任何有关生产密码的信息，并且在您的源代码管理中没有密码记录。

换句话说，`config.php`包含 a是完全正常的`define("DB_PASS", "topSecret");`

`config.php`如果正确管理对文件的访问，则此方法是安全的。

# mysql - 如何在 mysql 数据库中编辑无效的 UTF-8 字符串

> ID：13138087
> 
> 赞同：1
> 
> 时间：2012-10-30T11:31:17.987
> 
> 标签：mysql, sql, utf-8, phpmyadmin, mediawiki

我的数据库中有一些 utf-8 字符串，它们存储为 varbinary。（通常，它是 mediawiki 数据库，但我认为这并不重要）。我发现有些琴弦的形状不好，然后我做

```
SELECT  log_comment, CONVERT( log_comment
USING utf8 ) AS 
COMMENT 
FROM  `logging` 
WHERE log_id = %somevalue% 
```

我在 phpmyadmin 中有这样的输出表：

```
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| d093d09ed0a1d0a220d0a020d098d0a1d09e2fd09cd0add09a20393239342d39332e20c2abd098d0bdd184d0bed180d0bcd0b0d186d0b8d0bed0bdd0bdd0b0d18f20d182d0b5d185d0bdd0bed0bbd0bed0b3d0b8d18f2e2e2e    |NULL |
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
```

我需要的是使这个字符串可读，或者上传带有正确数据的新字符串。但这是 varbinary 字段，我如何管理其中的数据？

**UPD：** 发现 phpmyadmin 自动为每行末尾的三个点添加 2e2e2e - 它们太长而无法显示。原始二进制数据是，如果有人感兴趣，

```
d09fd0a02035302e312e3031392d3230303020d09ed181d0bdd0bed0b2d0bdd18bd0b520d0bfd0bed0bbd0bed0b6d0b5d0bdd0b8d18f20d0b5d0b4d0b8d0bdd0bed0b920d181d0b8d181d182d0b5d0bcd18b20d0bad0bbd0b0d181d181d0b8d184d0b8d0bad0b0d186d0b8d0b820d0b820d0bad0bed0b4d0b8d180d0bed0b2d0b0d0bdd0b8d18f20d182d0b5d185d0bdd0b8d0bad0be2dd18dd0bad0bed0bdd0bed0bcd0b8d187d0b5d181d0bad0bed0b920d0b820d181d0bed186d0b8d0b0d0bbd18cd0bdd0bed0b920d0b8d0bdd184d0bed180d0bcd0b0d186d0b8d0b820d0b820d183d0bdd0b8d184d0b8d186d0b8d180d0bed0b2d0b0d0bdd0bdd18bd1 
```

无论如何，这些字符串在行尾包含非 utf 符号，从

```
SELECT log_comment,CAST(log_comment AS CHAR CHARACTER SET utf8) AS COMMENT
FROM  `logging` 
WHERE log_id = %somevalue% 
```

因为最后一个符号是 � - 对我来说，它似乎是黑色菱形，里面有白色问题，最后 20-30 个字符不见了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:22:55.960

```
SELECT log_comment,CAST(log_comment AS CHAR CHARACTER SET utf8) AS COMMENT
FROM  `logging` 
WHERE log_id = %somevalue% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:00:10.223

正如 Joni 的评论中所说，

> “文本的长度正好是255字节，这是MySQL tinytext/tinyblob字段的限制，也经常被程序员用作varchar/varbinary的大小。看起来你的原始数据被剪掉了。最后一个D1在您的原始数据中开始一个新的 UTF-8 字符，但缺少第二个字节；这就是转换后的文本中最后一个字符被破坏的原因。”

在 MediaWiki DB 中，表 [logging] 的 [log_comment] 字段中应存储已更改页面的标题。其中一些似乎超过 255 个符号，因此在记录时它们被剪掉了。这让我很困惑；我认为存在某种数据库错误，所以我应该只更改这些字符串 - 向它们添加缺少的符号。现在我发现这有点可能，所以我可以从其他领域收集必要的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:47:48.457

试试这个：

```
SELECT  log_comment, 
        CONVERT(log_comment,VARCHAR(65535)) AS COMMENT 
FROM  `logging` 
WHERE log_id = %somevalue% 
```

# tcp - 如何在 LUA 解析器中重新组装 TCP 数据包？

> ID：13138088
> 
> 赞同：4
> 
> 时间：2012-10-30T11:31:23.423
> 
> 标签：tcp, lua, wireshark-dissector

我有一个运行在 TCP 协议之上的解析器，并且有数据在多个 TCP 数据包上流动。

我想在转换所有内容之前组装数据，所以我知道我需要`tcp_dissect_pdus()`它，但我找不到它的文档或示例。

谁能指导我或帮助我了解我如何使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T16:43:05.493

tcp_dissect_pdus 没有 wslua API。但是你可以自己实现它。

如果你想组装跨越两个或更多数据包的 pdu，它相当简单：

```
function slicer.dissector(tvb, pinfo, tree)
    ...
    local pdu_length = get_pdu_length(...)
    if pdu_length > tvb:len() then
        pinfo.desegment_len = pdu_length - tvb:len()
    else
        do_dissection(tvb, pifo, tree)
    end
    return
end 
```

如果您不知道 pdu 的确切长度，您可以执行以下操作：

```
 pinfo.desegment_len = DESEGMENT_ONE_MORE_SEGMENT 
```

您应该阅读[README.developer](https://code.wireshark.org/review/gitweb?p=wireshark.git;a=blob_plain;f=doc/README.developer)第 2.7 节。

# vba - 为什么VBA格式功能会这样工作？

> ID：13138090
> 
> 赞同：4
> 
> 时间：2012-10-30T11:31:24.603
> 
> 标签：vba

为什么 Format("1A","0.000000") 返回 0.041667？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T11:43:14.130

`0.041667`如此`1/24`解释`1A`为`1 AM`

```
?cdate(Format("1A","0.000000") )
01:00:00 
```

如果输入不是数字，则传递给以`"1A"`提取`val()`您`1`想要的内容，否则不要调用格式。

# google-maps - 为同一服务器使用多个 Google Maps API 密钥？

> ID：13138091
> 
> 赞同：12
> 
> 时间：2012-10-30T11:31:29.477
> 
> 标签：google-maps

我有一个充当网格的服务器。我有 3 个移动应用程序，每个应用程序都有自己的 google maps api 密钥所有三个应用程序都调用我的服务器，该服务器使用特定的应用程序密钥调用 google apis。

所以 App1 有密钥 1 App2 有密钥 2 App3 有密钥 3

当我需要 App1 的方向时，我的服务器使用键 1 调用 google api 当我需要 App2 的方向时，我的服务器使用键 2 调用 google api 当我需要 App3 的方向时，我的服务器使用键 3 调用 google api

所以我的服务器就像一个 API 网格一样工作。这违反谷歌条款吗？恐怕他们会查看服务器的 IP 地址，看到使用了 3 个密钥，并假设我对相同的应用程序使用不同的密钥，这是被禁止的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-11T10:05:40.443

简短的回答（来自常见问题解答）非常简单：不，在这种情况下您不能使用两个键。

请参阅[https://developers.google.com/maps/faq#usage_avoidance](https://developers.google.com/maps/faq#usage_avoidance) - 正如您所担心的那样，他们甚至保留“禁止从任何站点访问地图 API 的权利”。

使用多个密钥，即使这对您来说只是方便的问题，也意味着他们试图欺骗并绕过[每天和每项服务 25,000 个请求的限制](https://developers.google.com/maps/faq#usagelimits)。他们不喜欢这样，因为他们当然希望地图 API 的大用户付费。价格列[在同一页上](https://developers.google.com/maps/faq#usage_pricing)。

您应该完整阅读常见问题解答段落“了解服务条款”和“使用限制” - 它很短，但有时有点棘手。您会看到，在某些情况下，即使超出限制，[您实际上也不必付费：](https://developers.google.com/maps/faq#usage_apis)

*   您正在使用谷歌地球 API
*   您正在使用来自移动平台的原生地图 API
*   您仅通过嵌入显示谷歌地图
*   您的应用“符合公共利益（由 Google 自行决定）”

此外，您[并不总是需要提供 API 密钥](https://developers.google.com/maps/faq#keysystem)，尽管这些产品可能仍仅限于有限使用：例如[地理编码 API](https://developers.google.com/maps/documentation/geocoding/#Limits)。

我猜您不在其中一种情况下（至少第 2 和第 3 条），因为您的呼叫通过您的服务器传输。在移动应用程序中使用本机 API 可以解决问题，但我猜这确实意味着相当多的开发。

还值得注意的是，对于某些用例，您应该[为商业许可申请特殊的地图 API](http://www.google.com/enterprise/earthmaps/maps.html)，例如，当只有付费用户才能看到您的地图时。

总之，在使用需要一个的产品时，您需要拥有一个谷歌地图 API 密钥。或者更确切地说，每个域名最多一个。

# excel - 如何比较两个表中的值并将结果添加到第三个？

> ID：13138092
> 
> 赞同：0
> 
> 时间：2012-10-30T11:31:44.953
> 
> 标签：excel

我有以下问题：

表一具有以下列：ID、名称、颜色 表二具有以下列：ID、价格、日期

我需要使用以下内容制作第三张表：

1.  如果在 table1 的 ID 中找到 table2 的 ID，则在 table3 中添加一行：ID、名称、价格

表 1 和表 2 的大小不同。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:43:08.287

```
insert into table3(id, name, price) values(
 select id,name,price from table1, table2 where table1.id=table2.id) 
```

我想你在找那个

# python - 从不同的 HTML 表中提取数据

> ID：13138096
> 
> 赞同：1
> 
> 时间：2012-10-30T11:31:54.840
> 
> 标签：python, html, html-table

我正在尝试从 Edgar 数据库 (http://www.sec.gov/edgar/searchedgar/companysearch.html) 的 8-K 表格中的损益表表中提取数据。这里有些例子：

[苹果](http://www.sec.gov/Archives/edgar/data/320193/000119312512435506/d429806dex991.htm)

[美铝](http://www.sec.gov/Archives/edgar/data/4281/000119312512423191/d424171dex992.htm)

我要抓取的表格称为“运营报表”或“收入报表”或类似名称。我尝试提取所有数据（如净销售额、营业收入等）并根据日期和时间间隔（三个月、六个月等）将其放入字典中。问题是表结构的高度多样性 - 可以通过多种方式构建此类数据。我创建了一个使用 Beautiful Soup 解析表格的脚本，但它变得庞大而复杂。我想知道是否有任何方法可以在没有大量编码的情况下立即获得它（具有所有复杂性）？我尝试使用 Excel 和 Google Docs 自动获取数据，但在这种情况下它们表现不佳。有什么建议么？感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:51:22.413

我想我会先使用 BeautifulSoup 将所有表放入一个简单的数据结构中，然后尝试提取您想要的内容。您提供的两个示例页面不包含任何`<th>`元素，因此对于那些，您可以像这样处理基本提取：

```
from BeautifulSoup import BeautifulSoup

def tables(html):
    """Extract all tables from `html`."""
    soup = BeautifulSoup(html)
    return [[
            [cell.text for cell in row.findAll("td")]
            for row in table.findAll("tr")]
        for table in soup.findAll("table")] 
```

...这将为您提供一个表格列表，每个表格都是一个行列表，每个行都是一个单元格列表。

**警告**：如果周围有嵌套表，上面的代码可能会出错。

`<th>`您也可以通过更改一行来获取元素...

```
 [cell.text for cell in row.findAll(["td", "th"])] 
```

...但是你显然会失去`<th>`和`<td>`细胞之间的区别。鉴于您的源材料的状态，这可能不是一个很大的损失。

实际上，以编程方式从那里获取您需要的东西是另一回事......您最好将每个表转储到 CSV 文件中，然后通过电子表格应用程序使用它。

# c# - Excel 使用密码保护工作簿，但允许只读

> ID：13138099
> 
> 赞同：2
> 
> 时间：2012-10-30T11:32:07.960
> 
> 标签：c#, excel, interop

使用 C# 中的互操作类，我能够保护工作簿以使用密码进行读写。

![密码对话框](../Images/b60cbd410a5da54d5ed513cb35e5b651.png)

但我希望用户能够以只读方式打开工作表。

![只读对话框](../Images/830181d9a80882d45e9ba77e90113045.png)

[`Workbook.SaveAs`](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.saveas.aspx)如果不使用该方法，这可能吗？

使用密码保护工作簿（图 1） 我正在使用该[`Workbook.Password`](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.workbook.password.aspx)属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:49:37.383

根据[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._workbook.readonlyrecommended.aspx)，更改`Workbook.ReadOnlyRecommended`属性的唯一方法是使用`Workbook.SaveAs`方法。

恰好需要您不久前正在寻找的东西（即设置它而不保存），但不得不放弃并使用`SaveAs`. 据我所知，这是唯一的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:25:42.163

使用`Workbook.Open()`. 第三个参数是只读属性。

加上指向[MSDN的链接](http://msdn.microsoft.com/en-us/library/ms260757%28v=office.11%29)

# jquery - 使用 AJAX 在 ExpressionEngine 中加载条目

> ID：13138100
> 
> 赞同：11
> 
> 时间：2012-10-30T11:32:12.017
> 
> 标签：jquery, ajax, expressionengine

我正在寻找使用 jQuery 的 ajax 调用在弹出模式中加载来自 ExpressionEngine 的条目，这个想法是当用户单击条目标题时，它将打开显示一个包含完整条目的模式。然后我希望在模式上有一个下一个和上一个按钮，这将允许我移动到弹出模式中的下一个和上一个条目。我不知道是否最好加载模板或提要，即 JSON，或者是否有另一种我很高兴听到的方式。

有没有人尝试过这个或者知道一个可能有用的 tut。我看到这篇文章对此有所了解，[http://spibey.com/blog/2011/11/using-partial-views-in-the-expressionengine-control-panel-for-ajax-requests-or -相似的/](http://spibey.com/blog/2011/11/using-partial-views-in-the-expressionengine-control-panel-for-ajax-requests-or-similar/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T15:22:26.200

您链接到的该教程适用于控制面板。由于您在讨论前端的内容，因此您可以在 EE 模板中使用常规的旧 EE 标签来完成这一切。

我建议有一个模板组来保存您的 html 片段。在这种情况下，将条目正文和条目链接放在一个模板中可能会很方便

```
ajax.group
    - single_entry.html 
```

然后，在最简单的情况下，在该模板中，您将拥有

```
<div id="entry-body">
    {exp:channel:entries channel="channel_name_here" entry_id="{segment_3}"}
        <h2>{title}</h2>
        {body}
    {/exp:channel:entries} 
</div>

<div id="entry-links">
    {exp:channel:next_entry}        
        <a href="{path='ajax/single_entry'}" class="next">Next</a>
    {/exp:channel:next_entry} 
    {exp:channel:prev_entry}
        <a href="{path='ajax/single_entry'}" class="prev">Previous</a>
    {/exp:channel:prev_entry}
</div> 
```

当您使用 ajax 请求这些片段时，请确保传递当前`entry_id`或`url_title`作为 url 片段，以便片段模板为您加载正确的数据。您可以将选择器传递`load()`给以获取所需的 html 块并将其加载到页面上的适当容器中。最简单的，像

```
$('#entry-container').load('ajax/single_entry/2 #entry-body');
$('#entry-links').load('ajax/single_entry/2 #entry-links'); 
```

`2`您正在`entry_id`加载的条目在哪里。见[http://api.jquery.com/on/](http://api.jquery.com/on/)

最后，您需要在下一个和上一个条目链接上设置 jQuery 事件侦听器，以便它们触发 jQuery`load()`加载下一个条目。这是`.next`链接的示例。

```
$(document).on('click', '.next', function(event) {
    var url = $(this).attr('href');
    $('#entry-container').load(url); // load the html into your chosen DOM element
    event.preventDefault(); // prevent the browser from navigating to this page     
}); 
```

见[http://api.jquery.com/on/](http://api.jquery.com/on/)

# jquery - 应用 max-width 和 max-height 后获取当前图像宽度和高度

> ID：13138103
> 
> 赞同：3
> 
> 时间：2012-10-30T11:32:25.407
> 
> 标签：jquery, html, css

这是[我的例子](http://jsfiddle.net/RedKnight91/HSsqc/1/)

HTML：

```
<div class="container">
    <img src="http://placehold.it/500x500" alt="500x500" />
</div>
<div class="container">
    <img src="http://placehold.it/100x500" alt="100x500" />
</div>
<div class="container">
    <img src="http://placehold.it/500x100" alt="500x100" />
</div>
<div class="container">
    <img src="http://placehold.it/500x800" alt="500x800" />
</div>
<div class="container">
    <img src="http://placehold.it/800x500" alt="800x500" />
</div>
<div class="container">
    <img src="http://placehold.it/100x100" alt="100x100" />
</div>
<div class="container">
    <img src="http://placehold.it/200x100" alt="200x100" />
</div>​ 
```

CSS：

```
div.container { width: 200px; height: 200px; line-height: 200px; overflow: hidden; border: 10px solid white; box-shadow: 0 1px 8px #BBB; margin: 10px; text-align: center; }
            div.container img { position: relative; vertical-align:middle; }
            div.container img.wide { max-height: 100%; }
            div.container img.tall { max-width: 100%; }
            div.container img.square { max-width: 100%; }​ 
```

Javascript：

```
$(window).load( function(){
var $imgs = $("div.container img");

$imgs.each( function(){
    var cW = $(this).parent().width();
    var cH = $(this).parent().height();
    var w = $(this).width(); //I want the CURRENT width, not original!!
    var h = $(this).height(); //I want the CURRENT height, not original!!
    var dW = w - cW;
    var dH = h - cH;

    console.log( cW + " " + cH + " " + w + " " + h + " " + dW + " " + dH );

    if ( w > h ){ 
        $(this).addClass("wide");
        $(this).css("left",  -dW/2);
    }
    else if ( w < h ){
        $(this).addClass("tall");
        $(this).css("top",  -dH/2);
    }
    else { $(this).addClass("square"); }                    
});
});​ 
```

我正在通过 javascript 根据图像元素的比例向图像元素添加一个类。这 3 个类将为图像设置最大宽度和最大高度 css 属性，从而调整它们的大小。之后，我需要调整大小的图像尺寸，但我能得到的只是原始图像的尺寸。那可不好！我尝试使用`width()`, `outerWidth`, `naturalWidth`, 各种宽度，但我就是做错了。

那么，有没有办法在像 CSS 规则一样`max-width`并`max-height`已应用于图像之后获取图像的尺寸？最好是一致的方式，不使用计时器和间隔，或类似的东西。

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T11:41:01.960

看看[这个](http://jsfiddle.net/HSsqc/2/)jsfiddle。您试图在使用 / 应用类之前获得宽度/高度，`max-height`而`max-width`不是在应用之后。

这是测试代码（检查第二个console.log）：

```
$(window).load( function(){
    var $imgs = $("div.container img");

    $imgs.each( function(){
        var cW = $(this).parent().width();
        var cH = $(this).parent().height();
        var w = $(this)[0].clientWidth; //I want the CURRENT width, not original!!
        var h = $(this)[0].clientHeight; //I want the CURRENT height, not original!!
        var dW = w - cW;
        var dH = h - cH;

        console.log( cW + " " + cH + " " + w + " " + h + " " + dW + " " + dH );

        if ( w > h ){ 
            $(this).addClass("wide");
            $(this).css("left",  -dW/2);
        }
        else if ( w < h ){
            $(this).addClass("tall");
            $(this).css("top",  -dH/2);
        }
        else { $(this).addClass("square"); }     
        var w = $(this).width(); //I want the CURRENT width, not original!!
        var h = $(this).height(); //I want the CURRENT height, not original!!
        console.log( w + " " + h );

    });
});​ 
```

`width()`, `outerWidth`- 这总是返回当前宽度。

`naturalWidth`/ [`naturalHeight`](http://help.dottoro.com/ljqqtiks.php)- 这是为了得到一个原始的，就像没有应用任何样式一样，图像的宽度/高度（仅在较新的浏览器中适用于 IMG 标签）

# mysql - db表方案-做什么

> ID：13138107
> 
> 赞同：0
> 
> 时间：2012-10-30T11:32:32.903
> 
> 标签：mysql

我有一张桌子，其中特定的服务提供商将在那里存储例如汽车商店。汽车商店提供各种服务。

我的问题如何将这些服务存储在一个列中？我可以创建第二个表来存储服务，但如果我想提供搜索功能，这将是必需的——我的意图不是，至少现在不是。

那么我将如何将所有服务存储在一行中（对应于 eaxmple 的特定汽车商店）。如我所见，它将是 VARCHAR 类型。

此外，一个表中的主键是否可以引用另一个表中的主键？

我还需要做什么？

我还需要强调，在某些情况下，服务提供商可能提供独特的服务——只有一个服务提供商提供特定服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:38:17.103

你可以有多对多的关系，

此表存储服务提供者列表。

```
CREATE TABLE ServiceProvider
(
    ProviderID INT NOT NULL,
    ProviderName VARCHAR(50),
    .......,
    CONSTRAINT tb_pk PRIMARY KEY (ProviderID),
    CONSTRAINT tb_uq UNIQUE (ProviderName)
);

CREATE TABLE ServiceList
(
    ServiceID INT NOT NULL,
    ServiceName VARCHAR(50),
    .......,
    CONSTRAINT tba_pk PRIMARY KEY (ServiceID),
    CONSTRAINT tba_uq UNIQUE (ServiceName)
); 
```

此表将服务提供商列表映射到他们提供的服务。

```
CREATE TABLE Provider_Service
(
    RecID INT,
    ProviderID INT NOT NULL,
    ServiceID INT NOT NULL,
    CONSTRAINT tbb_pk PRIMARY KEY (RecID),
    CONSTRAINT tbb_fk1 FOREIGN KEY (ProviderID) 
          REFERENCES  ServiceProvider(ProviderID),
    CONSTRAINT tbb_fk2 FOREIGN KEY (ServiceID) 
          REFERENCES  ServiceList(ServiceID),
    CONSTRAINT tba_uq UNIQUE (ServiceName, ProviderID)
); 
```

# iphone - 我想要带有重复计数的计划计时器

> ID：13138111
> 
> 赞同：1
> 
> 时间：2012-10-30T11:32:40.193
> 
> 标签：iphone, objective-c, ios

我想调用一个方法 24 次，但在每次调用之间我想要 1 秒的间隔，现在正在使用

```
[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(loadNumber) userInfo:nil repeats:YES]; 
```

但是如何计算调用，我想在 24 计数后使计时器无效，我可以使它无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:47:09.743

为 an 创建一个实例变量，`int`不管你怎么称呼它。在调用计时器之前将其设置为“0”。

```
someInt = 0;
[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(loadNumber:) userInfo:nil repeats:YES]; 
```

在时间调用的操作中，检查此数字的值以确保应执行操作并增加数字。

```
- (void)loadNumber:(NSTimer *)sender
{
    if (someInt <= 24) {
        //do something
        someInt ++;
    }else{
        [sender invalidate];
        someInt = 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:37:00.350

您应该在 中设置一个计数器`loadNumber`，这将使您`NSTimer`在所需的重复计数后失效。

# php - cakephp & nusoap - 函数（“my_function”）不是此服务的有效方法

> ID：13138114
> 
> 赞同：1
> 
> 时间：2012-10-30T11:32:47.087
> 
> 标签：php, cakephp, soap, nusoap

我从以前的开发人员那里接管了一个应用程序，并且有一些代码使用 Nusoap 完成了一半，我收到了错误：

```
Call to register_donation() web service failed due to an exception: 
Function ("register_donation") is not a valid method for this service 
```

该应用程序建立在：`CakePHP 1.2.10`& 使用`nuSoap 0.9.5`.

我已经`ini_set('soap.wsdl_cache_enabled', 0);`（这没有帮助。）

我的代码在下面（为了便于阅读，我缩短了它），我是否正确处理了这个响应？（代码是我自己从以前的开发人员那里接手的）。

Pastebin（完整代码）在这里：[PasteBin Link](http://pastebin.com/Cv1Nx32W)

下面是一个简短的版本供您浏览，完整版本在上面的 pastebin 链接中。

```
<?php
ini_set('soap.wsdl_cache_enabled', 0);

class ServicesController extends AppController
{
var $uses = array("Donation");
var $components = array( "Email", "MatchingEvents" );

function registerDonation($donation = null){
    $this->log('hit registerDonation', 'donation');
    $this->autoRender = false;
    App::import('Vendor','nusoap');
    Configure::write('debug',0);
    Configure::write('Session.start', false);

    //init soap server
    $server = new soap_server();

    $endpoint = 'http://new.mysite.com/services/registerDonation';

    //initialize WSDL support
    $server->configureWSDL('donations', 'urn:donations', $endpoint);

    //setup service type
    $server->wsdl->addComplexType(
        'DonationResult',
        'complexType',
        'struct',
        'all',
        '',
        array(
            'success' => array('name' => 'success', 'type' => 'xsd:boolean'),
            'msg' => array('name' => 'msg', 'type' => 'xsd:string'),
            'error_number' => array('name' => 'error_number', 'type' => 'xsd:string')
        )
    );

    //register the method to expose
    $server->register('register_donation',
        array('ct_number' => 'xsd:string', 'project_id' => 'xsd:int', 'donation_amount' => 'xsd:decimal',
            // Stripped all other params
        ),
        array(
            'result' => 'tns:DonationResult'
        ),
        'urn:donations',
        'urn:donations#register_donation',
        'rpc',
        'encoded',
        'Accepts the results of a donation to a charity or project on the  site'
    );

    //This inner function is registered and then called (keep within outer function!)
    function register_donation(
        // Pass in all the params (Stripped for readability)
        $ct_number = null, $project_id = null, $donation_amount = null
    ){
        // This function is never hit!.. its not registered, why?
        $this->log('hit #3-register_donation called!', 'donation');
        $return = $this->Donation->add(array(
            'unique_id' => $unique_id,
            'ct_number' => $ct_number,
            'project_id' => $project_id,
            'donation_amount' => $donation_amount,
            // Pass in all other params, (Stripped for readability)
        ));

        // Process that request
        $log = $this->Donation->log . 'Result: ' . $return['msg'] . "\n";
        $this->log( $log, 'donation' );
        if ( isset($this->Donation->matching['events']) )
        {
            //Reserved donations should already have had their events handled
            $this->MatchingEvents->handle($this->Donation->matching, !$this->Donation->matching['reserved']);
        }
        if ( !empty($this->Donation->cacheSaved) )
            $this->_sendDonationEmails($this->Donation->cacheSaved);
        return $return;
    }

    $HTTP_RAW_POST_DATA = isset($GLOBALS['HTTP_RAW_POST_DATA']) ? $GLOBALS['HTTP_RAW_POST_DATA'] : '';
    $server->service($HTTP_RAW_POST_DATA);
}

function _sendDonationEmails($donation)
{
    // Send the emails
}
}

?> 
```

如果我可以提供更多信息，请告诉我。

**总结：**如何处理来自外部来源的 nusoap 响应。
任何调试想法、提示和技巧或解决方案都将得到奖励（+1！）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T19:30:34.043

在发布的代码中有一个`registerDonation`名为`ServicesController`. 在该函数内部还有另一个函数被调用`register_donation`（这显然没有意义 [旧代码]）。

从方法中删除命名的函数`register_donation`并将`registerDonation`其作为方法放在`ServicesContoller`.

然后更改以下行（在其中注册要公开的函数）。

从：`$server->register('register_donation',`
到：     `$server->register('ServicesController.register_donation',`

所以你`class.method`只调用方法而不是方法（这将在 PHP4 过程编程中工作，但在 OOP 中，你需要`controller.method`在公开函数时指定）。

* * *

## 还有其他问题吗？

**问：CakePHP & nuSOAP 没有命中我的控制器/方法，而是重定向到 app/webroot** **答：**使用 CakePHP 1.2，我发现当它没有服务模型时（因为它在技术上不是必需的），请求没有命中控制器。因此，如果您遇到此问题，请为您的控制器创建一个模型，即使您没有使用它。供您参考，这里有一个模态示例：

```
<?php // You may not need this modal, but cakephp requires it to be there.
class Services extends AppModel {
   public $name = 'Services';
   public $useTable = false;
}
?> 
```

**问：我应该收到哪个 URL 的回复？** **答：**您设置的响应命中的 URL 必须包含`?wsdl`.
所以.. 例如：你有一个名为的控制器和名为的`SOAPController`方法`process`。
在 CakePHP 中，您的 URL 看起来像这样：`mydomain.com/SOAP/process`.
所以你`WSDL`位于`mydomain.com/SOAP/process?wsdl`. 确保您的回调 URL 设置为此（包括`wsdl`）。

**问：如何使用 CakePHP 调试 SOAP 请求/响应？**
**答：** CakePHP 有一个日志记录功能，它在调试中被证明是无价的`SOAP`。在您的控制器（或模态）中，您可以使用：

```
$this->log('your message or variable', 'name_of_file_to_save_to); 
```

您可以通过您的`SOAP`请求或响应使用它来查看哪些部分被点击/调用和调试变量（例如：）`$HTTP_RAW_POST_DATA`。

### 问：当我访问 SOAP 页面时，我的 WSDL 位置显示为“domain.com/app/webroot”。

**答：**我认为这是导致所有问题的问题，查看用于获取当前脚本的源代码`Nusoap`（`PHP_SELF`在 cakePHP 中是`app/webroot/index.php`），不用担心，您可以`wsdl`通过在 URL 中附加来`?wsdl`访问向您展示您生成的`WSDL`文件，您无需担心修复此问题。它不会干扰您的`SOAP`请求，只是为了您的方便。

### 问：我的 SOAP 地址位置显示“domain.com/app/webroot/index.php”

**答：**这是我通过`$endpoint`在`configureWSDL()`.

```
//Set our endpoint, Replace with your URL
$endpoint = 'http://yourdomain.com/controller/method';

//initialize WSDL support - Include the $endpoint.
$server->configureWSDL('donations', 'urn:donations', $endpoint);

// Now your Soap Address Location should be what you set as the $endpoint 
```

# java - 使用多个警报

> ID：13138115
> 
> 赞同：1
> 
> 时间：2012-10-30T11:32:49.447
> 
> 标签：java, android, alarm

我想使用警报来触发一些处理。

在下面的代码中，我尝试设置两个警报。它们触发一个`Service`显示一个`Notification`指示刚刚响起的警报的 ID 号的 。

当第一个`Alarm`熄灭时，`Notification`应该出现并显示：“1”。对于第二个`Alarm`，`Notification`应该显示“2”。

如 Javadoc 中所述，仅触发了一个警报（它们具有相同的`Intent`，因此第二个替换第一个）。但奇怪的是，`Notification`显示“1”，而在第二个`Alarm`熄灭的时候出现！！！似乎警报响起的时间已修改，但未修改。

任何想法？

提前感谢您花时间帮助我。

```
public class TestAlarmes extends Activity{
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState){
    AlarmManager am;
    Intent action;
    PendingIntent intent;
    long t0;
    RecepteurMessageAlarme récepteur;

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // créer le récepteur de message d'alarme
    récepteur=new RecepteurMessageAlarme();

    // et l'enregistrer en lui demandant de filtrer sur les messages d'alarme
    registerReceiver(récepteur,new IntentFilter("GL.TestAlarmes.ALARME"));

    // récupérer le service d'alarme
    am=(AlarmManager)getSystemService(Context.ALARM_SERVICE);

    // créer l'action 1
    action=new Intent(this,ServiceAlarme.class);
    action.setAction("GL.TestAlarmes.ALARME");

    // personnaliser l'action a exécuter
    action.putExtra("GL.TestAlarmes.Action",1);

    // créer l'intent à lancer lors du déclenchement de l'alarme
    intent=PendingIntent.getService(this,0,action,PendingIntent.FLAG_ONE_SHOT);

    // prendre l'instant présent
    t0=java.lang.System.currentTimeMillis();

    // configurer l'alarme
    am.set(AlarmManager.RTC_WAKEUP,t0+5000,intent);

    // créer l'action 2
    action=new Intent(this,ServiceAlarme.class);
    action.setAction("GL.TestAlarmes.ALARME");

    // personnaliser l'action a exécuter
    action.putExtra("GL.TestAlarmes.Action",2);

    // créer l'intent à lancer lors du déclenchement de l'alarme
    intent=PendingIntent.getService(this,0,action,PendingIntent.FLAG_ONE_SHOT);

    // configurer l'alarme
    am.set(AlarmManager.RTC_WAKEUP,t0+10000,intent);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:50:49.670

尝试提供不同的请求代码`PendingIntent`以使其唯一

# widget - wavemaker 6.4.6 或 6.5 备用小部件

> ID：13138118
> 
> 赞同：0
> 
> 时间：2012-10-30T11:33:08.137
> 
> 标签：widget, standby, wavemaker

如果有人知道wavemaker 支持dojo 待机小部件？

这是此小部件的示例：http: [//livedocs.dojotoolkit.org/dojox/widget/Standby](http://livedocs.dojotoolkit.org/dojox/widget/Standby)

我想实现“更改叠加颜色”示例，但我不知道如何使用“data-dojo-type="dojox.widget.Standby"”或“data-dojo-props=”制作 div 元素“target:'basic3', color:'red'”我有 Chrome 的 firebug 扩展，当我阅读表单上的 divs 元素时，任何只有 ID、类和样式。另外，如何用这个制作按钮在 wavemaker 中创建待机效果的必要属性（按钮 data-dojo-id="b5" data-dojo-type="dijit.form.Button"）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:13:11.460

如果您想要繁忙的叠加效果，但并不完全需要备用小部件，则服务变量和实时变量现在具有“加载对话框”属性。指定在服务器调用进行时要被加载对话框覆盖的小部件。

WaveMaker 在调色板的“Dijit”部分下有一个 wm.Dijit（dijit 设计器）小部件。您可以轻松地指定一个dojo 类，例如dojox.widget.Standby，并让WM 为您包装dijit。它会自动为您设置颜色、图像和其他属性。我期望备用的一个挑战是它的[限制](http://livedocs.dojotoolkit.org/dojox/widget/Standby)，即它必须将其“父节点作为 document.body 的直接子节点，或者在调用 startup() 之前将 domNode 分配到树中”。

对于该级别的控制，我希望您需要使用[createComponent()。](http://dev.wavemaker.com/wiki/bin/wmdoc_6.5/CustomizeAppsWithJS#HCreatingWidgetsatRuntime28advanced29)

# linux - linux 中未定义的对 `__stack_chk_fail' 错误的引用

> ID：13138120
> 
> 赞同：1
> 
> 时间：2012-10-30T11:33:22.250
> 
> 标签：linux, unix

当我尝试使用脚本文件链接一定数量的对象时，我在 linux 中遇到错误。错误是：

/usr/lib/libc_nonshared.a(stack_chk_fail_local.oS): 在函数`__stack_chk_fail_local ': (.text+0x10): undefined reference to`__stack_chk_fail' collect2: ld 返回 1 退出状态

有什么问题以及如何克服它？

# php - Symfony 2 + Doctrine，加入 3 个表

> ID：13138121
> 
> 赞同：1
> 
> 时间：2012-10-30T11:33:22.703
> 
> 标签：php, symfony, doctrine-orm, many-to-many

我有 3 个实体：游戏、平台（如 PC、XBOX、PS3 等）和图像。

游戏可以在很多平台上发布，平台可以关联很多游戏，最后游戏可以有很多盒盖（比如每个平台一个）。

我想通过连接表关联这 3 个实体。我做了一些阅读，发现我应该创建另一个实体来描述关系，我做到了。

现在我有第四个实体 GameCovers 字段：game_id、platform_id 和 image_id。一切似乎都有效 - 教义生成了 getter 和 setter。我的问题是如何从数据库中获取数据？

在 Game Enity 现在我有方法：

```
/**
* Get game_covers
*
* @return Doctrine\Common\Collections\Collection 
*/
public function getGameCovers()
{
   return $this->game_covers;
} 
```

但是我如何只为一个平台获取盒盖，例如：PC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:00:21.067

您应该查看自定义实体存储库： [http ://symfony.com/doc/2.0/book/doctrine.html#custom-repository-classes](http://symfony.com/doc/2.0/book/doctrine.html#custom-repository-classes)

然后在每个方法中`createQuery`，例如：

```
# Fetch all the games that have PC release
public function getPcGames(){
    $q = $entityManager->createQuery("SELECT gc,p,g FROM GameCover gc JOIN gc.platform p JOIN gc.game g WHERE p.name = :platformName");
    $q->setParameter('platformName', 'PC');
    return $q->getResult();
} 
```

显然，这是一个过于简化的示例，但关键不是依赖 getter，而是创建自己的查询......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:20:46.423

这很简单，`$em->getRepository('GameCover')->findOneBy(array('platform' => $platform, 'game' => $game))`其中平台和游戏是各自的对象或 ID。

您可以使用 GameCover 的自定义存储库以不同的方法为您执行此操作。

如果您使用 getGameCovers，您将触发保存所有游戏封面的代理的初始化，并且学说将从数据库中获取所有这些封面。因此，如果您不想这样做，只需从 GameCover 存储库中获取您想要的特定内容。

# regex - 使用 powershell 的正则表达式

> ID：13138123
> 
> 赞同：1
> 
> 时间：2012-10-30T11:33:35.063
> 
> 标签：regex, powershell

这是场景，我在下面提到了这些行，我只想提取两个点之间的中间字符。

```
 "scvmm.new.resources" --> This after an regular expression match should return only "new"
 "sc.new1.rerces" --> This after an regular expression match should return only "new1" 
```

我的基本要求是在两个点之间提取任何东西，任何东西都可以在前缀和后缀中出现

```
 (.*).<required code>.(.*) 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:42:51.017

您可以在不使用正则表达式的情况下做到这一点。在'.'上拆分字符串 并抓住中间元素：

```
PS> "scvmm.new.resources".Split('.')[1]
new 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T11:51:50.733

或这个

```
'scvmm.new.resources' -replace '.*\.(.*)\..*', '$1' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:45:55.713

像这样：

```
 ([regex]::Match("scvmm.new1.resources", '(?<=\.)([^\.]*)(?=\.)' )).value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:54:48.783

您实际上不需要正则表达式来提取这种微不足道的子字符串。就像 Shay 的一样，`Split('.')`可以使用`IndexOf()`类似的效果，

```
$s = "scvmm.new.resources"
$l = $s.IndexOf(".")+1
$r = $s.IndexOf(".", $l)
$s.Substring($l, $r-$l) # Prints new

$s = "sc.new1.rerces"
$l = $s.IndexOf(".")+1
$r = $s.IndexOf(".", $l)
$s.Substring($l, $r-$l) # Prints new1 
```

这看起来是第一次出现的点。然后它在第一次命中后寻找第一次出现的点。然后它提取两个位置之间的字符。例如，这在分隔字符不相同的情况下很有用（尽管这种`Split()`方式在许多情况下也适用）。

# wpf - 键入时通过转换器格式本身绑定到 DateTime 的 TextBox

> ID：13138125
> 
> 赞同：1
> 
> 时间：2012-10-30T11:33:40.163
> 
> 标签：wpf, binding, .net-4.0, textbox, converter

我有一个使用实现 Convert 和 ConvertBack 的转换器绑定到 DateTime 的 TextBox。UpdateSourceTrigger 设置为 PropertyChanged，以便在用户键入时完成验证。这是问题所在：

1.  用户输入一个字符
2.  转换器将其解析为 DateTime
3.  ViewModel 中的属性已更新和验证
4.  Converter 然后将此 DateTime 转换回字符串并更改文本框中的字符串

这是不可取的，因为文本可以更改为完整日期，而用户只键入了部分日期。如何阻止 UI 这样做？请注意，由于此功能，这只是从 .NET 3.5 升级到 4.0 后才成为问题：

[http://karlshifflett.wordpress.com/2009/05/27/wpf-4-0-data-binding-change-great-feature/](http://karlshifflett.wordpress.com/2009/05/27/wpf-4-0-data-binding-change-great-feature/)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:38:36.983

您可以使用[Data Validation](http://wpftutorial.net/DataValidation.html)，它允许您在属性获取类型值之前检查类型值是否满足特定条件（例如正则表达式）-> 只有在满足条件时才会调用 Converter。
另一个建议是，如果键入的值是 DateTime，则通过正则表达式签入 Converter 并仅在匹配时进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-01T02:12:20.993

尝试这个：

```
Private Sub TextBox1_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
    'Limit the length of the number that can be entered to 12 (This is arbitrary)
    If Len(TextBox1.Text) > 12 Then
        KeyAscii = 0
        Exit Sub
    End If

    If KeyAscii < 32 Then
        Exit Sub    ' let it go, it is a control char like backspace
    End If

    If InStr("0123456789.", Chr$(KeyAscii)) > 0 Then
        If InStr(TextBox1.Text, ".") > 0 Then
            If Chr$(KeyAscii) = "." Then
                KeyAscii = 0    ' do not allow more than one decimal point
                Beep
                MsgBox "Only 2 decimal places to be allowed", vbCritical
                Exit Sub

            ElseIf Len(Mid$(TextBox1.Text, InStr(TextBox1.Text, ".") + 1)) >= 2 Then
                KeyAscii = 0    ' do not allow more than 2 digits past decimal point
                Beep
                MsgBox "Only 2 decimal places to be allowed", vbCritical
                Exit Sub

            End If
        End If
    Else
        Beep
        KeyAscii = 0
    End If

    If Len(Mid$(TextBox1.Text, InStr(TextBox1.Text, "$") + 1)) >= 1 Or KeyAscii < 32 Then
        If Len(Mid$(TextBox1.Text, InStr(TextBox1.Text, ".") + 1)) >= 2 Then

            If KeyAscii < 32 Then Beep: Exit Sub
            TextBox1.Text = Format(TextBox1.Text, "$#,###")
        Else
            If KeyAscii < 32 Then Beep: Exit Sub
            TextBox1.Text = TextBox1.Text
        End If
    ElseIf Len(Mid$(TextBox1.Text, InStr(TextBox1.Text, "$") + 1)) >= 0 Or KeyAscii < 32 Then
        If Len(Mid$(TextBox1.Text, InStr(TextBox1.Text, ".") + 1)) >= 2 Then

            If KeyAscii < 32 Then Beep: Exit Sub
            TextBox1.Text = Format(TextBox1.Text, "$#,###")
        Else
            If KeyAscii < 32 Then Beep: Exit Sub
            TextBox1.Text = ""
            TextBox1.Text = "$" & TextBox1.Text
        End If
    End If

End Sub
Private Sub TextBox1_Change()

    If Len(Mid$(TextBox1.Text, InStr(TextBox1.Text, ".") + 1)) >= 3 Then
        TextBox1.Value = Format(PaidCreditCardForfrm.TextBox1.Value, "$#,###")
    End If

End Sub 
```

# php - Yii 表前缀无法读取具有该前缀的表

> ID：13138127
> 
> 赞同：2
> 
> 时间：2012-10-30T11:33:44.810
> 
> 标签：php, yii, frameworks, prefix

我开始在 localhost 中开发，使用 yii 1.1.11 使用自动生成应用程序，创建用户表，使用 gii 生成 crud。当我迁移到虚拟主机时，我必须为表使用前缀，因此变成“yii_users”并用这个编辑配置：

```
'db'=>array(
  'connectionString' => 'xxxxx',
  'username' => 'xxxxx',
  'password' => 'xxxxx',
  'tablePrefix' => 'yii_',
), 
```

但我无法再登录并收到错误“在数据库中找不到活动记录类“用户”的表“用户”。' 所以我假设 tablePrefix 不起作用。如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T11:51:50.887

这还需要您更改所有活动记录，[请查看指南](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#defining-ar-class "http://www.yiiframework.com/doc/guide/1.1/en/database.ar#defining-ar-class")：

> 信息：要使用表前缀功能，AR 类的 tableName() 方法可能会被覆盖……也就是说，我们不返回完全限定的表名，而是返回不带前缀的表名并将其括在双花括号中

所以你需要这样做：

```
public function tableName() {
    return '{{user}}';
} 
```

也来自[`tablePrefix`文档](http://www.yiiframework.com/doc/api/1.1/CDbConnection#tablePrefix-detail "http://www.yiiframework.com/doc/api/1.1/CDbConnection#tablePrefix-detail")：

> 通过设置这个属性，任何像“ **{{tableName}}** ”这样的标记都将被“prefixTableName”替换，其中“prefix”指的是这个属性值。

（强调我的）

# iphone - 在 UITableView 中显示 NSHomeDirectory() 保存的文件

> ID：13138130
> 
> 赞同：0
> 
> 时间：2012-10-30T11:33:58.583
> 
> 标签：iphone, objective-c, ios, uitableview

在我的应用程序中，我必须存储一些数据，为此我使用了`NSHomeDirectory`并将数据与文档文件夹一起存储到其中。IE

`NSString *filename = [[[URL1 path] lastPathComponent] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];`

> NSString *Path=[NSHomeDirectory() stringByAppendingString:@"/Documents/"];

`result=[Path stringByAppendingString:filename];`

现在我希望将这些数据显示到 UITableView 中，这怎么可能我对此进行搜索并了解`NSDocumentDirectory`.. NSHomeDirectory 与此有何不同？我得到了这个答案

```
-(void)setUpTheFileNamesToBeListed{
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:nil];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return [filePathsArray count];   
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

//Insert this line to add the file name to the list
cell.textLabel.text = [documentsDirectory stringByAppendingPathComponent:[filePathsArray objectAtIndex:indexPath.row]];
} 
```

这就是我得到的......但它对我的工作方式......对于 NSHomeDirectory。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:38:51.927

在上面的代码中改变

```
-(void)setUpTheFileNamesToBeListed{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:nil];
} 
```

对此

```
-(void)setUpTheFileNamesToBeListed{
    NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingString:@"/Documents/"];
    filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:nil];
} 
```

# c# - 使用 winforms 打印 FizzBu zz 的答案

> ID：13138137
> 
> 赞同：-1
> 
> 时间：2012-10-30T11:34:13.077
> 
> 标签：c#

我尝试使用 C# 来做 FizzBu​​zz 问题，我可以将它作为消息框来做。但是我需要使用winforms在文本框中一一打印答案。我怎样才能做到这一点。我已经用这个说明了代码。请你帮帮我。

```
private void button8_Click(object sender, EventArgs e)
{
   int x;
   for (x = 1; x < 16; x++)
    {
        if (x % 3 == 0 && x % 5 ==0)
        {
            MessageBox.Show("FizzBuzz");
        }
        else if (x % 3 == 0)
        {
            MessageBox.Show("Fizz");
        }
        else if (x % 5 == 0)
        {
            MessageBox.Show("Buzz");
        }
        else
        {
            MessageBox.Show(x.ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:38:50.253

TextBox 有一个 Text 属性，它是一个字符串。您可以使用运算符连接字符串`+`。其余的你应该能够自己弄清楚。

# gwt - GWT DataGrid 禁用鼠标悬停选择

> ID：13138148
> 
> 赞同：0
> 
> 时间：2012-10-30T11:35:00.413
> 
> 标签：gwt

当鼠标悬停在一行上时，我试图覆盖 DataGrid 自动选择一行的行为。我试图覆盖 onBrowseEvent 但由于这是 GWT 中的最终方法，我无法做到这一点。

有没有人对此有任何运气并且可以指出我正确的方向？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:58:45.423

您可以使用

```
myTable.setSkipRowHoverStyleUpdate(true); 
```

# matlab - MATLAB 中的“相乘”数组

> ID：13138152
> 
> 赞同：0
> 
> 时间：2012-10-30T11:35:23.283
> 
> 标签：matlab, data-structures, matrix-multiplication, convolution

首先，我不知道该写什么标题，因为这个问题不容易很快提出。

我需要将矩阵值函数 (k) 与向量值函数 (X) 进行卷积，每个函数都在 R^3 上定义。我需要在 MATLAB 中这样做，所以我自然会做离散化版本。我计划分别用 5 维和 4 维数组来表示 k 和 X。不过这似乎有点重。你知道是否有更好的方法来做到这一点？

我不会直接进行卷积，而是`fft`通过将 k 和 X 都输入到傅立叶空间，用零填充，将它们相乘，然后使用`ifft`. 这应该会产生相同的结果并且运行得更快。

我的问题是是否有任何方法可以轻松地将这些数组/矩阵相乘？即有什么方法可以在`k(i,j,k,:,:)*X(i,j,k,:)`不使用三个嵌套循环的情况下对所有 i,j,k 做任何事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:10:53.517

*需要*离散化吗？Matlab 完全能够将函数作为输入和输出。例如，您可以定义一个卷积函数：

```
>> convolve = @(fm,fv) @(x) fm(x) * fv(x); %fm matrix valued, fv vector valued 
```

并定义一些矩阵值和向量值函数（假设输入是列向量）

```
>> f = @(x) [x x x];
>> g = @(x) cos(x); 
```

现在他们的卷积：

```
>> h = convolve(f,g); 
```

并尝试将其应用于向量：

```
>> h([1;2;3])
ans =
   -0.8658
   -1.7317
   -2.5975 
```

您会得到与手动操作相同的答案：

```
>> f([1;2;3]) * g([1;2;3])
ans =
   -0.8658
   -1.7317
   -2.5975 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:05:13.410

您可以使用 执行逐个元素的操作。与选择的运营商一起。例如：

```
Element-by-element multiplication: .* 
Element-by-element division: ./ 
```

等等……你是这个意思吗？

# arrays - Matlab中的多个向量操作

> ID：13138158
> 
> 赞同：1
> 
> 时间：2012-10-30T11:35:44.780
> 
> 标签：arrays, matlab

假设每个都有长度`N`向量。我们想要所有可能的总和，范围从. 有这样的数目。除了如下所示之外，还有其他方法可以在 Matlab 中使用内置函数吗？`X_1, X_2, ..., X_N``k``X_1(i1) + X_2(i2) + ... + X_N(iN)``i1, i2, ..., iN``1...k``k^N``N for-loops`

```
counter = 1;
for i1=1:k
  for i2=1:k
  .
   .
    .
      for iN=1:k
          res(counter) = X_1(i1) + X_2(i2) + ... + X_N(iN); 
          counter = counter + 1;
      end
    .
   .
  .
  end
end 
```

`N`此外，根据我们的需要，此代码需要针对 的值进行硬编码`N for-loops`。我们如何为它的任何一般值编码`N`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:46:22.007

N 次迭代的单个循环就足够了。（这里展开）

```
sums=zeros(1,k^N);
id = 1:k^N;
i = mod(id, k)+1; id=(id-i) / k;
sums = sums + X_1(i);
i = mod(id, k)+1; id=(id-i) / k;
sums = sums + X_2(i);
...
i = mod(id, k)+1; id=(id-i) / k;
sums = sums + X_N(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:52:46.747

答案是使用**ndgrid**。

```
[s{1:N}] = ndgrid(-K:K);
res = zeros(k^N,1);
for i=1:N
   res = res + s{i}(:)
end 
```

# python - 基准测试：python 是否有更快的遍历网络文件夹的方法？

> ID：13138160
> 
> 赞同：32
> 
> 时间：2012-10-30T11:35:57.417
> 
> 标签：python, ruby, vbscript, benchmarking

我需要浏览一个包含大约一万个文件的文件夹。我的旧 vbscript 处理这个速度很慢。从那时起我开始使用 Ruby 和 Python，我在这三种脚本语言之间做了一个基准测试，看看哪种语言最适合这项工作。

下面对共享网络上 4500 个文件子集的测试结果是

```
Python: 106 seconds
Ruby: 5 seconds
Vbscript: 124 seconds 
```

Vbscript 最慢并不奇怪，但我无法解释 Ruby 和 Python 之间的区别。我对 Python 的测试不是最优的吗？有没有更快的方法在 Python 中做到这一点？

thumbs.db 的测试只是为了测试，实际上还有更多的测试要做。

我需要一些东西来检查路径上的每个文件，并且不会产生太多输出以免干扰时间。每次运行的结果都有点不同，但差别不大。

```
#python2.7.0
import os

def recurse(path):
  for (path, dirs, files) in os.walk(path):
    for file in files:
      if file.lower() == "thumbs.db":
        print (path+'/'+file)

if __name__ == '__main__':
  import timeit
  path = '//server/share/folder/'
  print(timeit.timeit('recurse("'+path+'")', setup="from __main__ import recurse", number=1)) 
```

```
'vbscript5.7
set oFso = CreateObject("Scripting.FileSystemObject")
const path = "\\server\share\folder"
start = Timer
myLCfilename="thumbs.db"

sub recurse(folder)
  for each file in folder.Files
    if lCase(file.name) = myLCfilename then
      wscript.echo file
    end if
  next
  for each subfolder in folder.SubFolders
    call Recurse(subfolder)
  next
end Sub

set folder = oFso.getFolder(path)
recurse(folder)
wscript.echo Timer-start 
```

```
#ruby1.9.3
require 'benchmark'

def recursive(path, bench)
  bench.report(path) do
    Dir["#{path}/**/**"].each{|file| puts file if File.basename(file).downcase == "thumbs.db"}
  end
end

path = '//server/share/folder/'
Benchmark.bm {|bench| recursive(path, bench)} 
```

编辑：因为我怀疑打印导致延迟，所以我测试了打印所有 4500 个文件并且不打印的脚本，差异仍然存在，第一种情况是 R：5 P：107，后一种情况是 R：4.5 P：107

EDIT2：根据此处的答案和评论，Python 版本在某些情况下可以通过跳过文件夹运行得更快

```
import os

def recurse(path):
  for (path, dirs, files) in os.walk(path):
    for file in files:
      if file.lower() == "thumbs.db":
        print (path+'/'+file)

def recurse2(path):
    for (path, dirs, files) in os.walk(path):
        for dir in dirs:
            if dir in ('comics'):
                dirs.remove(dir)
        for file in files:
            if file.lower() == "thumbs.db":
                print (path+'/'+file)

if __name__ == '__main__':
  import timeit
  path = 'f:/'
  print(timeit.timeit('recurse("'+path+'")', setup="from __main__ import recurse", number=1)) 
#6.20102692
  print(timeit.timeit('recurse2("'+path+'")', setup="from __main__ import recurse2", number=1)) 
#2.73848228
#ruby 5.7 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T11:45:49.783

的 Ruby 实现`Dir`是在 C 中（文件`dir.c`，根据[本文档](http://www.ruby-doc.org/core-1.9.3/Dir.html)）。但是，Python 等效项是[在 Python](http://hg.python.org/cpython/file/abe8a2908f08/Lib/os.py#l209)中实现的。

Python 的性能不如 C 并不奇怪，但是 Python 中使用的方法提供了更多的灵活性 - 例如，您可以在遍历目录层次结构时跳过名为 eg 的整个子树`'.svn'`。`'.git'``'.hg'`

大多数情况下，Python 实现足够快。

**更新：**文件/子目录的跳过根本不会影响遍历*速率*，但是处理目录树所花费的总时间肯定会减少，因为您避免了遍历主树的潜在大子树。节省的时间当然与您跳过的时间成正比。在您的情况下，它看起来像图像文件夹，您不太可能节省很多时间（除非图像受修订控制，否则跳过修订控制系统拥有的子树可能会产生一些影响）。

**附加更新：**通过更改适当的`dirs`值来完成跳过文件夹：

```
for root, dirs, files in os.walk(path):
    for skip in ('.hg', '.git', '.svn', '.bzr'):
        if skip in dirs:
            dirs.remove(skip)
        # Now process other stuff at this level, i.e.
        # in directory "root". The skipped folders
        # won't be recursed into. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T06:59:41.290

我在本地设置了以下目录结构：

```
for i in $(seq 1 4500); do
    if [[ $i -lt 100 ]]; then
        dir="$(for j in $(seq 1 $i); do echo -n $i/;done)"
        mkdir -p "$dir"
        touch ${dir}$i
    else
        touch $i
    fi
done 
```

这将在目录结构的根目录中创建 99 个路径深度为 1-99 级的文件和 4401 个文件。

我使用了以下红宝石脚本：

```
#!/usr/bin/env ruby
require 'benchmark'

def recursive(path, bench)
  bench.report(path) do
    Dir["#{path}/**/**"]
  end
end

path = 'files'
Benchmark.bm {|bench| recursive(path, bench)} 
```

我得到以下结果：

```
 user     system      total        real
    files/  0.030000   0.090000   0.120000 (  0.108562) 
```

我使用 os.walk 使用以下 python 脚本：

```
#!/usr/bin/env python

import os
import timeit

def path_recurse(path):
    for (path, dirs, files) in os.walk(path):
      for folder in dirs:
          yield '{}/{}'.format(path, folder)
      for filename in files:
          yield '{}/{}'.format(path, filename)

if __name__ == '__main__':
    path = 'files'
    print(timeit.timeit('[i for i in path_recurse("'+path+'")]', setup="from __main__ import path_recurse", number=1)) 
```

我得到以下结果：

```
 0.250478029251 
```

所以，看起来 ruby​​ 仍然表现得更好。看看这个如何在网络共享上的文件集上执行会很有趣。

看到这个脚本在 python3 和 jython 甚至 pypy 上运行可能也会很有趣。

# xml - SSIS 包：与 XML 结果的动态连接

> ID：13138161
> 
> 赞同：1
> 
> 时间：2012-10-30T11:36:03.467
> 
> 标签：xml, dynamic, ssis

> 我想为单元测试创​​建 SSIS 包以自动运行。我有一些查询，我想每天在不同的服务器上运行，并且需要将结果存储在中央数据库中。问题是我想要 XML 中的结果。我可以动态连接不同的服务器并将结果存储在中央数据库中，但这次我有一个 XML 的结果并出现问题。 **示例脚本**

```
Use AdventureWorks2008
Go
Create Schema UT
Go
CREATE TABLE [UT].[MasterTask](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [UTName] [varchar](100) NULL,
    [SelectFromServer] [varchar](50) NULL,
    [SelectFromDatabase] [varchar](50) NULL,
    [SelectStatement] [varchar](max) NULL,
    [CreatedDate] [datetime] NULL,
    [UpdatedDate] [datetime] NULL
)
CREATE TABLE [UT].[SelectResult](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [MasterTaskID] [int] NULL,
    [Result] [xml] NULL,
    [CreatedDate] [datetime] NULL
)

Select * From UT.MasterTask
Insert Into UT.MasterTask Values
('Testing','Local','AdventureWorks2008','SELECT Name, ProductNumber, ListPrice AS Price
FROM Production.Product 
WHERE ProductLine = ''R'' 
AND DaysToManufacture < 4
ORDER BY Name ASC;',GETDATE(),GETDATE())
Insert Into UT.MasterTask Values
('Testing','Server1','AdventureWorks2008','SELECT  TOP 100 P.ProductID, 
 P.Name, 
 P.ListPrice, 
 P.Size, 
 P.ModifiedDate, 
 SOD.UnitPrice, 
 SOD.UnitPriceDiscount,
 SOD.OrderQty,
 SOD.LineTotal 
FROM Sales.SalesOrderDetail SOD 
INNER JOIN Production.Product P 
 ON SOD.ProductID = P.ProductID 
WHERE SOD.UnitPrice > 1000 
ORDER BY SOD.UnitPrice DESC',GETDATE(),GETDATE())
Insert Into UT.MasterTask Values
('Testing','Server2','AdventureWorks2008','Select * From Person.BusinessEntity',GETDATE(),GETDATE()) 
```

> 这里是三台数据库服务器 Server、Server1 和 Server2，每次我都会从 UT.MasterTask(SelectFromServer 和 SelectFromDatabase Column) 表 > > 创建一个动态 > 源连接并执行在 UT.MasterTask 表的 SelectStatement 列中定义的任务并插入 XML结果在 UT.SelectResult 表中。注意：结果列不固定。每行需要单个 xml 条目。执行在 UT.MasterTask 的 SelectStatement 中定义的查询

# android - 按下home键后保存Activity的状态

> ID：13138163
> 
> 赞同：1
> 
> 时间：2012-10-30T11:36:11.087
> 
> 标签：android, state

我有两个活动，`Activity1`和`Activity2`。`Activity1`是从头开始的启动器活动。现在，当我`activity2`从所有应用程序中按下主页按钮并再次打开应用程序时，`Activity1`它正在打开。我想打开在按下主页按钮时打开的同一个活动。我需要保存状态`activity2`，但我没有任何线索。

我看了[这个](https://stackoverflow.com/questions/5086985/maintaining-application-state-in-android)和[这个](https://stackoverflow.com/questions/4783960/call-method-when-home-button-pressed-on-android)，但我仍然没有清楚地了解如何做到这一点。请帮助我，因为我是 android 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T11:39:34.693

当您按下“主页”按钮时，您的活动将转到`onPause()`。

所以我个人建议你重写`onPause()`不仅可以处理按下“主页”按钮而且还可以处理其他情况的方法。

在您的情况下，它只是相关的`onPause()`，`onResume()`因此您可以尝试将状态放入`SharedPreferences`或内部/外部存储中。

说：

在您的`onPause()`方法中，执行以下操作：

```
// Use Shared Preferences to save data
SharedPreferences previewSizePref = getSharedPreferences("PREF",MODE_PRIVATE);
SharedPreferences.Editor prefEditor = previewSizePref.edit();
prefEditor.putInt("x", somethingA);
prefEditor.putInt("y", somethingB);
prefEditor.commit(); 
```

并在您的 中`onResume()`，检索保存的数据，例如：

```
SharedPreferences previewSizePref = getSharedPreferences("PREF",MODE_PRIVATE);
if (previewSizePref.contains("x") && previewSizePref.contains("y")) {
    //your saved data exists, do something
} else {
    // handle the circumstances that the saved data doesn't exist
} 
```

要保存状态`onPause()`并恢复，`onResume()`您可以查看以下答案：

[在 onPause 中保存 Activity 状态](https://stackoverflow.com/questions/8410259/saving-activity-state-in-the-onpause)

对于 SharedPreferences，您可以查看 API 文档：[Data Storage - Shared Preferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:48:08.230

您所描述的应该是 Android 行为的标准，如果它没有按照您所描述的那样做，那么您可能已经在其他地方覆盖了这种行为，可能在您的清单中。

如果您创建一个新的 Android 应用程序并制作一个简单的两页应用程序，其中 Activity A 作为启动器，Activity B 作为第二页，那么您的清单将如下所示，并且应用程序将显示您描述的行为。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".ActivityA"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".ActivityB"
        android:label="@string/title_activity_main" >
    </activity>
</application> 
```

仔细检查您的清单是否与此相似 - 活动 B 没有标志，只是声明它存在于您的清单中。

# php - 如何通过 PHP 更改 Joomla 管理员 URL - 无插件

> ID：13138164
> 
> 赞同：3
> 
> 时间：2012-10-30T11:36:16.420
> 
> 标签：php, joomla, joomla2.5, joomla1.7, joomla3.0

由于我是 Joomla 的新手，我想知道是否有办法通过**使用 PHP**而不是使用插件或扩展来更改管理员 URL。据我所知，使用 3rd 方组件是有风险的。我真的不想在 mysite 中使用 3rd 方扩展。我怎样才能完成它？

默认情况下，Joomla 管理员 URL 是 yoursitename/administrator。

**更改**/includes/defines.php 和 /administrator/includes/defines.php中的常量**不起作用**。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:48:50.077

参考[这篇文章](http://forum.joomla.org/viewtopic.php?f=432&t=611287)，您有两种选择，一种是通过 cpanel，另一种是使用 .htaccess ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:42:09.230

根据我的阅读，您无法更改管理员 URL，但是有人确实在 Stackoverflow 上发布了有关它的内容。

打开以下文件：

```
/includes/defines.php  >> line 25
/administrator/includes/defines.php  >> line 21 
```

否则，唯一的方法可能是使用扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T10:56:15.917

步骤 1\. 在您的根目录中创建一个新目录（例如“newadminurl”）

步骤 2\. 在“newadminurl”目录中创建一个 index.php 文件。

```
$admin_cookie_code="3429020892";
setcookie("JoomlaAdminSession",$admin_cookie_code,0,"/");
header("Location: /administrator/index.php");
?> 
```

第 3 步。将此添加到您真正的 Joomla 管理员目录的 .htaccess 中

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/administrator
RewriteCond %{HTTP_COOKIE} !JoomlaAdminSession=3429020892
RewriteRule .* - [L,F] 
```

解释：

现在，您需要在打开“管理员”路径之前打开“ [http://yoursite.com/newadminurl/ ”。](http://yoursite.com/newadminurl/)在这里，我们创建了一个在会话结束时过期并重定向到实际管理页面的 cookie。在您没有打开您的秘密链接之前，您的实际“管理员”路径是无法访问的。

我希望这就是你要找的。

# iphone - Cocos2d，如何做某一种触摸方法

> ID：13138166
> 
> 赞同：0
> 
> 时间：2012-10-30T11:36:37.997
> 
> 标签：iphone, objective-c, ios, xcode, cocos2d-iphone

我有这个我想触摸的精灵，一旦我不再触摸它，我想调用一个方法 nslog“不触摸”。现在我设置代码的方式只在我点击其他东西时调用方法 nslog“不触摸”。我想在触摸对象时调用方法 nslog“触摸”，但只要我触摸其他东西或抬起我的手指，它会调用 nslog “不接触”。有什么建议么？感谢您的时间。

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
NSSet *allTouches = [event allTouches];
UITouch* touch = [touches anyObject];
CGPoint location = [touch locationInView: [touch view]];
location = [[CCDirector sharedDirector] convertToGL:location];
 int arraysize = [brain count];
for (int i = 0; i < arraysize; i++) {
if (CGRectContainsPoint( [[brain objectAtIndex:0]  boundingBox], location)) {
        NSLog(@"touched");
        }else {

NSLog(@"not touched");
   }}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:46:21.303

我建议您将您的触摸处理程序注册为目标触摸委托。它会让你吞下这种触摸。

您应该处理所有委托方法。我的意思是`touchBegan:withEvent:`，，，`touchMoved:withEvent:`。 `touchEnded:withEVent:`因此，如果它的位置在精灵的矩形内，则只需在开始时存储触摸。然后就进入`touchMoved:withEvent:`并`touchEnded:withEvent:`处理存储的触摸位置以确定触摸是否离开了精灵的矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:46:30.057

您可能想要定义`ccTouchesEnded`.

# php - 某些目录中的zend路由器问题

> ID：13138167
> 
> 赞同：1
> 
> 时间：2012-10-30T11:36:39.853
> 
> 标签：php, zend-framework

我`uploads`在公共路径中有一个目录，但在某些项目中，*zend*无法理解这是一个目录而不是*Controller*。

当我打开此文件夹时，*zend*向我显示以下错误：

```
Invalid controller specified "uploads" 
```

检查`.htaccess`并没有问题。这是我的 htaccess 代码：

```
 RewriteEngine On
 AddDefaultCharset utf-8
 Options +FollowSymLinks
 <IfModule mod_expires.c>
    <FilesMatch "\.(gif|jpg|jpeg|png|swf|css|js|html?|xml|txt)$">
        ExpiresActive On
            ExpiresDefault "access plus 10 years"
    </FilesMatch>
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*\.(js|css))$ plugins/smartoptimizer/?$1
    <IfModule mod_expires.c>
        RewriteCond %{REQUEST_FILENAME} -f
        RewriteRule ^(.*\.(js|css|html?|xml|txt))$ plugins/smartoptimizer/?$1
    </IfModule>
 </IfModule>
 <IfModule !mod_expires.c>
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^(.*\.(gif|jpg|jpeg|png|swf|css|js|html?|xml|txt))$ plugins/smartoptimizer/?$1
 </IfModule>

 <FilesMatch "\.(gif|jpg|jpeg|png|swf|css|js|html?|xml|txt)$">
    FileETag none
 </FilesMatch>

#
# If Apache is compiled with built in mod_deflade/GZIP support
# then GZIP Javascript, CSS, HTML and XML so they're sent to
# the client faster.
#
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE application/x-javascript text/css text/html text/xml
</IfModule>

#enabling gzip----------------------------
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript

# cache images and flash content for one month
<filesmatch ".(flv|gif|jpg|jpeg|png|ico|swf)$">
Header set Cache-Control "max-age=2592000"
</filesmatch>

# cache text, css, and javascript files for one week
<filesmatch ".(js|css|pdf|txt)$">
Header set Cache-Control "max-age=604800"
</filesmatch>

# cache html and htm files for one day
<filesmatch ".(html|htm)$">
Header set Cache-Control "max-age=43200"
</filesmatch>

# implement minimal caching during site development
<filesmatch "\.(flv|gif|jpg|jpeg|png|ico|js|css|pdf|swf|html|htm|txt)$">
Header set Cache-Control "max-age=5"
</filesmatch>

# explicitly disable caching for scripts and other dynamic files
<filesmatch "\.(pl|php|cgi|spl|scgi|fcgi)$">
Header unset Cache-Control
</filesmatch>

SetEnv APPLICATION_ENV development

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

# c++ - 输出错误

> ID：13138169
> 
> 赞同：1
> 
> 时间：2012-10-30T11:36:42.803
> 
> 标签：c++, cin

我现在正在自学 C/C++，并且我得到了练习（来自我正在阅读的书）来编写一个可以产生如下输出的程序：

```
Enter your first name: Flip
Enter your last name: Fleming
Here’s the information in a single string: Fleming, Flip 
```

使用结构。但我的输出是这样的：

```
Enter your first name: Flip
Enter your last name: Fleming
Here’s the information in a single string: , 
```

这是代码。它相当简短，所以应该不难阅读:)

```
#include <iostream>
#include <cstring>

using namespace std;

struct Person {
    char* firstName;
    char* lastName;
};

char* getName(void);

int main() {
    Person* ps = new Person;
    cout << "Enter your first name: ";
    char* name;
    name = getName();
    ps->firstName = name;
    cout << "Enter your last name: ";
    char* lastname;
    lastname = getName();
    ps->lastName = lastname;
    cout << "Here's the information in a single string: "
            << ps->lastName << ", " << ps->firstName;
    delete ps;
    delete name;
    delete lastname;

    return 0;
}

char* getName() {
    char temp[100];
    cin >> temp;
    cin.getline(temp, 100);
    char* pn = new char[strlen(temp) + 1];
    strcpy(pn, temp);

    return pn;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T11:40:39.150

首先，**没有 C/C++ 这样的东西**。你正在混合它们，这是错误的。由于您使用的是 C++ headers/ `new`/ `using`，我假设您需要 C++，所以这里是您修复代码的方法：

*   全部替换`char*`为`char[]``std::string`
*   摆脱动态分配

因此，一些变化将是：

```
struct Person {
    std::string firstName;
    std::string lastName;
}; 
```

或者

```
Person ps; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T11:41:24.330

您正在使用：

```
cin >> temp;
cin.getline(temp, 100); 
```

您可能会在行尾用空字符串覆盖您已有的内容。

只使用其中之一。

如果您坚持使用，`cin >>`您可以考虑设置[`width()`](http://www.cplusplus.com/reference/iostream/ios_base/width/)以防止缓冲区溢出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T11:56:43.470

首先，直接的问题是您从 阅读了两次`std::cin`：首先是 with `operator>>`，然后是 with `getline`。选择一个或另一个。

但是让我们稍微简化一下您的代码。错误的来源太多了。指针很棘手，因为它们可能指向错误的东西，或者您可能忘记删除对象，或者两次删除它们。C 风格的 char 数组作为字符串是不好的，因为它们不是字符串，而且它们的行为不像字符串。

所以让我们使用标准库的字符串类：

```
#include <iostream>
#include <string>

struct Person {
    std::string firstName;
    std::string lastName;
};

std::string getName(void);

int main() {
    Person ps;
    cout << "Enter your first name: ";
    std::string name = getName();
    ps.firstName = name;
    cout << "Enter your last name: ";
    std::string lastname = getName();
    ps.lastName = lastname;
    cout << "Here's the information in a single string: "
            << ps.lastName << ", " << ps.firstName;
}

std::string getName() {
    std::string temp;
    std::getline(cin, temp);
    return temp;
} 
```

这是一个相当简单的，几乎是机械的替换，基本上只是用 替换`char*`，`std::string`并删除不再需要的位。

当然，正如评论中所指出的，我省略了所有形式的错误检查，这是一个真正的程序绝对应该做的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T11:44:06.500

No no no, wayyyy too complicated. Use real C++ idioms. The program could be as simple as this:

```
#include <string>
#include <iostream>

int main()
{
    std::string firstName, lastName;

    if (!(std::cout << "Your first name: "  &&
          std::getline(std::cin, firstName) &&
          std::cout << "Your last name: "   &&
          std::getline(std::cin, lastName)     ))
    {
        std::cerr << "Error: unexpected end of input!\n";
        return 0;
    }

    std::cout << "You are " << firstName << " " << lastName << ".\n";
} 
```

As a variation on the theme, you could put each `getline` in a loop until the user inputs a non-empty line:

```
std::cout >> "Your first name: ";
for ( ; ; )
{
    if (!(std::getline(std::cin, firstName))
    {
        std::cerr << "Error: unexpected end of input.\n"; 
        return 0;
    }
    if (!firstName.empty())
    {
        break;
    }
    std::cout << "Sorry, please repeat - your first name: ";
} 
```

# c# - 从 XML 文件中查找内部文本值

> ID：13138171
> 
> 赞同：0
> 
> 时间：2012-10-30T11:36:53.840
> 
> 标签：c#

当我编写这段代码时，我只得到父标签值。我也想获得他们的子节点值，请告诉我。

```
XmlDocument DOC = new XmlDocument();
DOC.RemoveAll();
DOC.Load("C:\\Users\\DIGITEL EYE SYSTEM\\Desktop\\response.xml");

foreach (XmlNode AllNodes in ParentNode)
{
    Project.Name = AllNodes["Name"].InnerText;
    if (AllNodes.ChildNodes == DOC.GetElementsByTagName("AppBuilderForms"))
    {
        //  Project.Forms = DOC.GetElementsByTagName("");
        // String sb = AllNodes["Forms"].InnerText;
    }
    else if (AllNodes.ChildNodes==DOC.GetElementsByTagName("CheckMarkObject"))
    {
        checkmark.Name = AllNodes["Name"].InnerText;
        checkmark.Label = AllNodes["Label"].InnerText;
        // checkmark.IsChecked = AllNodes["IsChecked"].InnerText;
    }
    else if (ParentNode == DOC.GetElementsByTagName("DateTimeObject"))
    {
        DateTime.Name = AllNodes["Name"].InnerText;
        DateTime.Label = AllNodes["Label"].InnerText;
    }
    else if (ParentNode == DOC.GetElementsByTagName("LocationObject"))
    {
        Location.Name = AllNodes["Name"].InnerText;
        Location.Label = AllNodes["Label"].InnerText;
        Location.Longitude = AllNodes["Longitude"].InnerText;
        Location.Latitude = AllNodes["Latitude"].InnerText;
    }
    else if (ParentNode==DOC.GetElementsByTagName("SwitchObject"))
    {
        Switch.Name = AllNodes["Name"].InnerText;
        Switch.Label = AllNodes["Label"].InnerText;
        // Switch.IsChecked =AllNodes["IsChecked"].InnerText;
    }
    else if(ParentNode==DOC.GetElementsByTagName("TextViewObject")) 
    {
        TextView.Name = AllNodes["Name"].InnerText;
        TextView.Value = AllNodes["Value"].InnerText;
    }
    else if (ParentNode ==DOC.GetElementsByTagName("TextFieldObject"))
    {
        TextField.Name = AllNodes["Name"].InnerText;
        TextField.Value = AllNodes["Value"].InnerText;
    }
    else if (ParentNode == DOC.GetElementsByTagName("PhotoPickerObject"))
    {
        PhotoPicker.Name = AllNodes["Name"].InnerText;
        PhotoPicker.Label = AllNodes["Label"].InnerText;
    }
    else if (ParentNode == DOC.GetElementsByTagName("SpinWheelPickerObject"))
    {
        SpinWheelPicker.Name = AllNodes["Name"].InnerText;
        SpinWheelPicker.Label = AllNodes["Label"].InnerText;
        // SpinWheelPicker.Columns = AllNodes["Columns"].InnerText;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:58:58.213

```
var xdoc = XDocument.Load(@"C:\Users\DIGITEL EYE SYSTEM\Desktop\response.xml");
    var allElements = xdoc.Root.Elements();
    foreach (string element in allElements)
    {
        //TODO add logic
    } 
```

首先，我们将 xml 加载到 XDocument 中（需要 .Net 3.5），
这里没有什么奇怪的。

其次，我们将选择根节点和根下的所有元素到 IEnumrable 中。您可以在 Elements() 方法中添加过滤器。

第三，我们将开始迭代 IEnumerable 中的元素并将它们隐式转换为字符串，这是 LINQ to XML 库中的一个运算符，它只返回 XElement.Value（因此，如果您认为这更具可读性或需要整个 Element出于其他原因，请写下！所有元素中的 IE XElement 元素）

不知道如何在 XmlDocument 中执行此操作，我完全忘记了，希望这可能对您有所帮助，以防您走上这条路（双关语）。

# javascript - 如何启用jquery ui按钮

> ID：13138175
> 
> 赞同：1
> 
> 时间：2012-10-30T11:37:09.720
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jquery ui 对话框。在对话框中我有 1 个保存按钮，当用户单击保存按钮回调中的保存按钮时，我将其禁用。我的代码：

```
$("#Form1").dialog({
    width: 500, autoOpen: false, modal: true, resizable: false, draggable: false,
    buttons: {
        "Save": function (event, ui) {
            $(event.currentTarget).button({ disabled: true });
             ... .
             ....
         }
    }
    , beforeClose: function () {
        //here how can i enable the save button
    }
}); 
```

现在我的问题是，当用户再次打开对话框时，保存按钮仍然被禁用，这就是为什么我想在对话框`beforeClose`事件中启用按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:56:35.650

您调用对话框的元素被包裹在父元素中，因此可以添加标题栏、按钮等。所有按钮都有类`ui-button`

这应该做你需要的

```
beforeClose:function(){
   $(this).parent().find('.ui-button').button({ disabled: false });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:58:33.150

您可能会发现通过以下方式启用和禁用按钮更容易：

```
btn_save = $('#Form1').parent().find(':button:contains("save")');

//disable the save button
$(btn_save).prop('disabled', true).addClass('ui-state-disabled');

//enable the save button
$(btn_save).prop('disabled', false).removeClass('ui-state-disabled'); 
```

添加的 css 类将为按钮提供禁用 css 样式。另请注意，`:contains`选择器区分大小写。

# xslt - 在 xslt 中的每个循环上使用一个整数

> ID：13138177
> 
> 赞同：1
> 
> 时间：2012-10-30T11:37:17.147
> 
> 标签：xslt, foreach

我正在尝试使用 XSLT 根据它在 XML 中找到的组数生成一个动态类。例如，XML 中有 X 个组，所有组都有子节点。我需要 for each 循环根据列表中的组号动态创建一个类名。我可以毫无问题地填充组名，但我找不到任何关于如何将系统生成的部分附加到类的明确信息。例如：

*   groupblue 类 = "groupblue-1"
*   grouporange 类 = "grouporange-2"
*   groupred 类 = "groupred-3"

等等，对于 XML 中的每个组。

我希望这是有道理的，并且有人能够提供帮助！提前致谢。

编辑：

XML

```
<group>
  <title>Title Content</title>
  <text>Content 1</text>
</group>
<group>
  <title>Title Content</title>
  <text>Content 2</text>
</group>
<group>
  <title>Title Content</title>
  <text>Content 3</text>
</group> 
```

HTML 输出

```
<div id="titlecontent-1">
  text from group 1 content
</div>
<div id="titlecontent-2">
  text from group 2 content
</div>
<div id="titlecontent-3">
  text from group 3 content
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:48:14.963

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="group">
     <div id="{translate(title, ' ', '')}-{position()}">
       <xsl:value-of select="text"/>
     </div>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当应用于此格式良好的 XML 文档**（将提供的 XML 片段包装到顶部元素中）时：

```
<t>
    <group>
        <title>Title Content</title>
        <text>Content 1</text>
    </group>
    <group>
        <title>Title Content</title>
        <text>Content 2</text>
    </group>
    <group>
        <title>Title Content</title>
        <text>Content 3</text>
    </group>
</t> 
```

**产生想要的结果**：

```
<div id="TitleContent-1">Content 1</div>
<div id="TitleContent-2">Content 2</div>
<div id="TitleContent-3">Content 3</div> 
```

# python - Celery 无法检测到节点

> ID：13138178
> 
> 赞同：0
> 
> 时间：2012-10-30T11:37:21.383
> 
> 标签：python, redis, celery

我已经使用如下命令在开发机器上启动了一个 celery3 worker（Redis 后端）：（ `celery -A tasks worker --loglevel=info -E` 并且 celery 屏幕显示事件已启用）

然后我尝试使用命令获取此工作的统计信息： `celery status`

这导致 `Error: No nodes replied within time constraint`

这可能是什么原因？我已经尝试重新启动工作和机器。

# postgresql - 远程连接到 PostgreSQL

> ID：13138184
> 
> 赞同：0
> 
> 时间：2012-10-30T11:37:53.183
> 
> 标签：postgresql, postgresql-9.1

我刚刚在 windows server 2008 上安装了 Postgresql 9.1。我试图从默认端口 5432 上的远程计算机连接它（因为我没有更改它），但没有成功。那么可能的配置设置更改是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:49:38.503

您需要更新一些配置文件。它们将位于数据目录中 postgresql 安装的子目录中。在 Windows 上很可能`C:\Program Files\PostgreSQL\9.1\data`

1.  您需要更新您的`postgres.conf`文件，`listen_addresses = '*'`以便其他机器可以看到 postgres 服务。见[18.3。连接和身份验证](http://www.postgresql.org/docs/9.1/static/runtime-config-connection.html)。

2.  让任何机器连接到 postgres `pg_hba.conf`。`0.0.0.0/0`说让任何IP地址连接。您可以将其缩小，使其仅是您网络上的 IP 范围。见[19.1。pg_hba.conf 文件](http://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html)。

    ```
    all             all             0.0.0.0/0               md5 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:41:31.753

您应该检查您的 Postgresql 配置文件。

验证listen_addresses 的设置。默认情况下，它可能只侦听您的环回地址，不允许您从另一台机器连接。让它在外部接口上侦听的最简单方法是将其设置为： `listen_addresses = '*'`

可以在[此处](http://www.postgresql.org/docs/8.1/static/runtime-config-connection.html)的文档中找到更多信息。

# python - 在 SQLAlchemy 中使用非数据库支持的模型

> ID：13138185
> 
> 赞同：2
> 
> 时间：2012-10-30T11:37:55.267
> 
> 标签：python, sqlalchemy

我有一个 SQLAlchemy 设置，其中我的一个模型未存储在数据库中。数据来自网络服务，而其他模型只存储一个主键来引用它。

如何在仍然使用 SQLAlchemy 关系的同时完成这项工作？我现在将数据本地缓存在数据库中，并在发生变化时从 Web 服务进行更新，但这意味着我正在存储数据的冗余副本。我根本不想在本地存储。考虑一下：

```
Base = declarative_base()

# Web service-backed model
class User(Base):
    __tablename__ = 'user'
    id = Column(Integer, primary_key=True)
    username = Column(Unicode(20), nullable=False)

    @classmethod
    def get(cls, id):
        """Get an instance using data from the web service."""
        pass

# Local model
class Document(Base):
    __tablename__ = 'document'
    id = Column(Integer, primary_key=True)
    user_id = Column(Integer, ForeignKey('user.id'))
    user = relationship(User, backref='documents')
    content = Column(UnicodeText) 
```

`Document.user`我想从我的数据库中删除 User 模型并仅从 Web 服务中检索它（这很简单），同时仍然保留 SQLAlchemy（和`User.documents`）提供的双向关系的好处。

我如何实现后者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T02:45:18.807

尽管已经提出了一些想法的草图，但我们并没有在这个模型上投入太多精力，最终可能导致一些模型在非关系存储中持续存在——但这里的工作更多的是在工作单元方面。在查询/加载方面，您也许可以使用 SQLA 的一些相对较新的功能来实现您正在寻找的一些东西 - 在 0.7 中有`load_on_pending`关系标志（http://docs.sqlalchemy.org/en/rel_0_7/ orm/relationships.html#relationships-api) 这将允许你创建一个用户对象，给它你想要的主键，将它添加（）到一个会话，然后没有任何刷新`.documents`集合应该发出负载；在 0.8 中有更好的解决方案 enable_relationship_loading (http://docs.sqlalchemy.org/en/latest/orm/session.html#sqlalchemy.orm.session.Session.enable_relationship_loading) 方法，如果您使用此方法附加用户对象对象将与 Session 保持分离，但在调用 user.documents 时仍会使用它。

这些都是我为了一个用户的利益而添加的粗略功能，不一定适合您在这里所做的事情，但如果您尝试它们，请告诉我它是如何进行的。

# soundcloud - 第一次尝试 Soundcloud API，但它不会加载我的曲目

> ID：13138189
> 
> 赞同：1
> 
> 时间：2012-10-30T11:38:16.763
> 
> 标签：soundcloud, clientid

我确定我做错了一些非常简单的事情，但是......我已经注册了一个应用程序。得到了我的客户 ID 和秘密，我的代码如下。如果有人能给我一些指点，我将不胜感激。问候大卫

```
 SC.initialize({
          client_id: '<?php echo $controller->MY_CLIENT_ID; ?>'
        });

        SC.get('/tracks',  function(tracks) {
         var options = '';           
         $.each(tracks, function(key, value) { 
         var optionValue = value.title+'[[CHILD]]'+value.stream_url+'[[CHILD]]'+value.download_url+'[[CHILD]]'+value.stream_url;
         //&& $('#SelectRight_soundcloud option[value='+optionValue+']').length == 0
            if(value.downloadable){
                options = options +'<option value="'+optionValue+'">'+value.title+'</option>';
            }
        });

        $("#SelectLeft_soundcloud").html(options);

        }); 
```

# visual-studio-2012 - 缺少 Visual Studio 2012 C++ 平台工具集

> ID：13138193
> 
> 赞同：9
> 
> 时间：2012-10-30T11:38:52.067
> 
> 标签：visual-studio-2012

我的机器上安装了 Visual Studio 2008，现在安装了 VS2012。在 VS2012 的 C++ 项目设置中，我现在应该能够将平台工具集更改回 VC++2008 (V90)，但只有新版本 VC++2012 (V110) 可用。有谁知道我的旧安装 VS2008 无法识别的原因，或者我如何手动添加旧平台工具集？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:42:37.747

v90 平台工具集是 VS 2010 的一部分，因此您必须同时安装 VS 2008 和 VS 2010。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:01:04.980

好吧，我对 2012 没有经验，但是当我结合使用 2010 和 2008 时，我只有两个不同的程序文件文件夹和两个不同的可执行文件来启动我喜欢的版本的 Visual Studio。也许这对您有帮助，只需创建 2 个快捷方式？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:13:33.933

If you're sure you've got your VC2008 environment variables set properly, you can always hand-edit the `.vcxproj`.

```
<PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'" Label="Configuration">
   <UseDebugLibraries>true</UseDebugLibraries>
   <ConfigurationType>StaticLibrary</ConfigurationType>
   <PlatformToolset>v110</PlatformToolset>
</PropertyGroup> 
```

Just change the `v110` to `v90`.

Obviously, that is kind of a hack. The `v90` option should be there in the project properties. If this doesn't work, you could try reinstalling or repairing the 2008 install.

# sql - SQL中对master和child的依赖

> ID：13138194
> 
> 赞同：1
> 
> 时间：2012-10-30T11:38:53.797
> 
> 标签：sql, sql-server, sql-server-2008

我有一个这样的主表

```
Product    Status  Product id
A          True     1
B          True     2
C          true     3
D          True     4
E          false    5
F          True     6 
```

现在我有另一个表，它给了我产品的依赖性

```
Product    DependencyId
C             2
C             5
E             1
B             4
B             6 
```

现在当我搜索 C 时，我可以看到两个产品依赖于 C，现在这两个产品依赖于其他产品。

假设我正在搜索 E，那么我只有一个产品依赖项。

现在，我需要检查是否有任何依赖项是否为假的产品。如果任何依赖项为假，那么我必须返回一些文本/值。

**结果**

```
When product is C then output will be E (because the grand children of C (i.e. E) has false)

When product is B then output will be NULL (becuase none of the child of B or their sub childrens has false) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:08:12.310

```
Declare @cnt int

Select * 
into #tmp
from mastera where Product_ID in (Select DependencyID from dbo.dependency where Product='C')

select @cnt=0
while @cnt<>(Select count(*) from #tmp)
begin 
    Select @cnt=count(*) from #tmp
    insert into #tmp
    Select m.* 
    from mastera m
    Left join  #tmp on m.Product=#tmp.Product 
    where m.Product_ID in (Select DependencyID from dbo.dependency where Product in (Select Product from #tmp where status=1))
    and #tmp.Product is null
end

Select * from #tmp  where Status=0

Drop table #tmp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:44:07.743

这应该列出具有*错误*状态的直接子级。

```
SELECT  
    C.Product
FROM 
    MasterTable A
JOIN
    Dependency D ON D.Product = A.Product
JOIN
    MasterTable C ON C.ProductId = D.DependencyId AND C.Status = 0 
```

# objective-c - AVAudioSessionCategoryPlayAndRecord 让 AirPlay 不可见

> ID：13138197
> 
> 赞同：12
> 
> 时间：2012-10-30T11:39:05.800
> 
> 标签：objective-c, ios, ipad, airplay, avaudiosession

我遇到了以下问题：每当我在应用程序中将播放和录制类别设置为音频会话时，AirPlay 就变得不可用：

```
[[AVAudioSession sharedInstance]
        setCategory: AVAudioSessionCategoryPlayAndRecord
        error: &setCategoryError]; 
```

此调用使 AirPlay 消失并立即将音频重新路由到扬声器。

该问题可以很容易地重现，例如在`avTouch`Xcode 文档的示例项目中，通过将`AVAudioSessionCategoryPlayback`类别 替换为`AVAudioSessionCategoryPlayAndRecord`: 在原始示例中，AirPlay 选择器是可见的，并且允许更改输出源，而`AVAudioSessionCategoryPlayAndRecord`选择器在类别中消失了。

是否有适当的方法切换到`AVAudioSessionCategoryPlayAndRecord`类别以便 AirPlay 仍然可用？

（[已经问](https://stackoverflow.com/questions/11319100/avaudiosessioncategoryplayandrecord-with-airplay)过这样的问题，但没有得到任何答案。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T20:50:31.290

您尝试使用哪种 AirPlay 设备？它有麦克风吗？

如果没有，iOS 在使用 PlayAndRecord 类别时不会将其作为选项显示，因为该设备无法播放**和**录制。不过，它会在使用 Play 类别时出现。

另外，如果您使用的设备是蓝牙设备，您是否将 AVAudioSessionCategoryOptionAllowBluetooth 设置为 YES？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:52:09.350

我认为您应该在上面添加以下代码`AVAudioSession`。我希望它有效。

```
NSError *setCategoryError = nil;
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error: &setCategoryError];

if (setCategoryError) {
    // Handle error
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-05T19:41:02.440

好吧，AirPlay 和 PlayAndRecord 类别只是不兼容。这就是我从 Apple 论坛中学到的。

当音频输出发生在其他地方时，为什么需要设备上的音频输入？

# macos - 区分两个 url（即 html、css 或 js 等）

> ID：13138200
> 
> 赞同：3
> 
> 时间：2012-10-30T11:39:15.037
> 
> 标签：macos, diff

有人知道从 URL 中区分两个文件的工具吗？我有不同版本的某些文件（如 js、css、html 等）的不同网站，并且想比较两个 url，例如：

> [http://domain.tld/js/x.js](http://domain.tld/js/x.js) 与[http://domain.tld/js/y.js](http://domain.tld/js/y.js)

运行 OSX...

我现在下载 (wget) 所需的文件，然后与 FileMerge 进行比较。但它有点麻烦。一些插件将是首选。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-25T05:13:20.890

我知道你说过这很麻烦，但看起来很简单......

```
diff <(curl -s http://example.com/foo) <(curl -s http://example.com/bar) --side-by-side 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T11:50:29.533

您可以尝试以下链接，它是在线比较文件的绝佳工具

[http://www.diffnow.com/](http://www.diffnow.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:41:59.260

您可以简单地组合一个小的 shell 脚本，通过`curl`or下载这两个文件`wget`，然后将它们与`diff`通常安装在每个 Mac OS X 下的`/usr/bin/diff`.

# java - Java序列化，它是自动的吗？

> ID：13138202
> 
> 赞同：0
> 
> 时间：2012-10-30T11:39:20.537
> 
> 标签：java, serialization

我必须用这些属性序列化一个特定的类对象：

```
int fetchCount
String requestMethod
long responeTime
int initialAge

byte[] responseEntity
HttpResponse response
    BasicHeader[] headers
        BasicHeader header
            String name
            String value
    Locale locale
        String language
        String country
        String variant
    BasicHttpParams params  IS SERIALIZABLE

    BasicStatusLine statusLine
        ProtocolVersion protocolVersion IS SERIALIZABLE
        int statusCode
        String reasonPhrase 
```

每个子类的最终对象都是可序列化的，那么问题来了：这一切复杂结构的序列化/反序列化是自动的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:51:34.297

[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)实现 [`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)所以你不会遇到任何问题，除非`key`和`value`内部 HashMap 也实现[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)

基元、数组、字符串是可序列化的，所以在第二种情况下，我认为没有问题

# excel - 将 VBA 表单中的单选值插入 Excel 电子表格

> ID：13138204
> 
> 赞同：0
> 
> 时间：2012-10-30T11:39:30.587
> 
> 标签：excel, vba

如何将选定的单选值从 VBA 表单插入 Excel 电子表格？单选值是指只有一种可能的选择。我正在努力在 VBA 中实现这一目标。

* * *

这是我的收音机值：

priority - 位于框架**fr_Priority**中的选项，两个可能的复选框选项：

*   priority_y - 如果用户选择此项，则将*Yes*插入单元格

*   priority_n - 如果用户选择此选项，则将*No*插入单元格

LectureStyle - 位于框架**fr_LectureStyle**中的选项，两个可能的复选框选项：

*   Lecturestyle_trad - 如果用户选择此选项，则将*繁体*插入到单元格中

*   Lecturestyle_sem - 如果用户选择此项，则*研讨会*将插入到单元格中

*   Lecturestyle_lab - 如果用户选择此选项，则*Lab*被插入到单元格中

*   Lecturestyle_any - 如果用户选择这个，那么*Any*被插入到单元格中

roomStructure - 位于框架**fr_roomStruc**中的选项，两个可能的复选框选项：

*   rs_Tiered - 如果用户选择此选项，则将*分层*插入单元格

*   rs_Flat - 如果用户选择这个，那么*Flat*被插入到单元格中

* * *

到目前为止，这是我的代码：

```
Private Sub btnSubmit_Click()
Dim ws As Worksheet, rng1 As Range
Set ws = Worksheets("main")

' Get last empty cell in column A
  Set rng1 = ws.Cells(Rows.Count, "a").End(xlUp)

' I'm strugging to insert the radio values inserted at this point, they 
' need to go into the cells specified below

' rng1.Offset(1, 10) = priority
' rng1.Offset(1, 11) = lectureStyle
' rng1.Offset(1, 12) = roomStructure

End Sub 
```

* * *

非常感谢你的帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:30:04.400

对我来说，您似乎需要对单选框的值进行一些验证，这是您可以做到的一种方法

 `````
Private Sub btnSubmit_Click()

    Dim ws As Worksheet, rng1 As Range
    Set ws = Worksheets("main")

    'Get last empty cell in column A
    Set rng1 = ws.Cells(Rows.Count, "a").End(xlUp)

    ' I'm strugging to insert the radio values inserted at this point, they
    ' need to go into the cells specified below

    rng1.Offset(1, 10) = GetPriority

End Sub

```

```
Private Function GetPriority() As String

    Dim priority As String
    If Me.priority_y.Value = True Then
        priority = "Yes"
    ElseIf Me.priority_n.Value = True Then
        priority = "No"
    Else
        priority = "N/A"
    End If
    GetPriority = priority

End Function

`````

# android - 在活动之间传递时Android Bundle损坏？

> ID：13138207
> 
> 赞同：3
> 
> 时间：2012-10-30T11:39:37.963
> 
> 标签：android, android-intent, android-activity

我正在尝试在两个活动之间传递 Parcelable 对象的 ArrayList 以及字符串值。这是将数据添加到意图并将其传递的代码：

```
Intent intent = new Intent(this, DisplayLotListActivity.class);
Bundle dataBundle = new Bundle();
dataBundle.putParcelableArrayList(DisplayLotListActivity.EXTRA_LOT_ARRAY, lotList);
dataBundle.putString(EXTRA_LOT_NUMBER, lotNumber);
intent.putExtra(DisplayLotListActivity.EXTRA_DATA, dataBundle);
startActivity(intent); 
```

这是我用来从目标活动的意图中获取数据的代码：

```
Intent intent = getIntent();
Bundle dataBundle = intent.getBundleExtra(EXTRA_DATA);
lotList = dataBundle.getParcelableArrayList(EXTRA_LOT_ARRAY);
lotNumber = dataBundle.getString(LotInquiryActivity.EXTRA_LOT_NUMBER); 
```

当我检查调试器时，数据结构在调用活动之前看起来是正确的，但是当我进入目标活动时，数据结构已损坏。特别是 ArrayList 作为 3 个元素，它的大小仍然是 3 个元素，但第二个元素为空。捆绑包中还有一个额外的额外内容，其中包含带有空键的缺失元素对象。我之前和之后都有调试器的图像，但由于反垃圾邮件规则，无法将它们放在帖子中。

之前： http: [//i.stack.imgur.com/vDipq.png](http://i.stack.imgur.com/vDipq.png) 之后：http: [//i.stack.imgur.com/JqbF7.png](http://i.stack.imgur.com/JqbF7.png)

有什么我想念的吗？无论我使用 Bundle 还是将 ArrayList 直接添加到意图，都会出现此问题。这是在运行 4.0.3 的三星 Tab 2 上运行的。4.0 模拟器也会出现这种情况。

**[编辑]** 这是 Parcelable 正在使用的对象（我刚刚离开了底部的 getter 和 setter 方法）

```
public class Lot implements Parcelable{

private String lotn;

private String dsc1;
private String dsc2;
private String litm;
private long itm;
private String locn;
private String mcu;
private String uom1;
private String uom2;
private BigDecimal pqav;
private BigDecimal pqoh;
private BigDecimal sqoh;
private long vend;
private String rlot;
private String ldsc;
private String lots;
private String lot1;
private String lot2;
private String lot3;
private String lotsdsc;
private XMLGregorianCalendar mmej;
private XMLGregorianCalendar ohdj;

public Lot(){

}

public Lot(Parcel source){
    lotn = source.readString();
    dsc1 = source.readString();
    dsc2 = source.readString();
    litm = source.readString();
    locn = source.readString();
    mcu = source.readString();
    uom1 = source.readString();
    uom2 = source.readString();
    itm = source.readLong();
    pqav = new BigDecimal(source.readString());
    pqoh = new BigDecimal(source.readString());
    sqoh = new BigDecimal(source.readString());
    vend = source.readLong();
    rlot = source.readString();
    ldsc = source.readString();
    lots = source.readString();
    lot1 = source.readString();
    lot2 = source.readString();
    lot3 = source.readString();
    lotsdsc = source.readString();
    try{
        mmej = DatatypeFactory.newInstance().newXMLGregorianCalendar(source.readString());
    }catch (Exception exc){
        mmej = null;
    }
    try{
        ohdj = DatatypeFactory.newInstance().newXMLGregorianCalendar(source.readString());
    }catch (Exception exc){
        ohdj = null;
    }
}

public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(lotn);
    dest.writeString(dsc1);
    dest.writeString(dsc2);
    dest.writeString(litm);
    dest.writeString(locn);
    dest.writeString(mcu);
    dest.writeString(uom1);
    dest.writeString(uom2);
    dest.writeLong(itm);
    if(pqav != null){
        dest.writeString(pqav.toPlainString());
    } else {
        dest.writeString("0");
    }
    if(pqoh != null){
        dest.writeString(pqoh.toPlainString());
    } else {
        dest.writeString("0");
    }
    if(sqoh != null){
        dest.writeString(sqoh.toPlainString());
    } else {
        dest.writeString("0");
    }
    dest.writeLong(vend);
    dest.writeString(rlot);
    dest.writeString(ldsc);
    dest.writeString(lots);
    dest.writeString(lot1);
    dest.writeString(lot2);
    dest.writeString(lot3);
    dest.writeString(lotsdsc);
    if(mmej != null){
        dest.writeString(mmej.toXMLFormat());
    } else {
        dest.writeString("");
    }
    if(ohdj != null){
        dest.writeString(ohdj.toXMLFormat());
    } else {
        dest.writeString("");
    }
}

/**
 *
 */
public static final Parcelable.Creator<Lot> CREATOR
         = new Parcelable.Creator<Lot>() {
     public Lot createFromParcel(Parcel in) {
         return new Lot(in);
     }

     public Lot[] newArray(int size) {
         return new Lot[size];
     }
 }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T22:56:21.913

好的，对于任何回到这个问题的人来说，我发现了两个问题，我认为它们结合起来会导致这种行为。这些问题都与我使用的 Parcelable 对象有关，因此感谢 Todd 至少为我指明了这个方向。

首先，我有一个简单的错误，我在 Parcelable 对象的构造函数中错过了 readString()。所以基本上我在写出 n 个元素并读入 n - 1 个元素。第二个问题是 Android 没有实现 javax.xml.datatype 库，这意味着 XMLGregorianCalendar 不可用。因为我在客户端不需要这个类的特性（有一个它与之交谈的 Java Web 应用程序确实使用它），所以我只是转换为一个简单的 java.util.Date 对象。

# ruby-on-rails - 使用 RSpec 测试 rails 模型验证日期

> ID：13138208
> 
> 赞同：7
> 
> 时间：2012-10-30T11:39:59.977
> 
> 标签：ruby-on-rails, validation, datetime, rspec, rspec-rails

我对 Rails 和 Rspec 有点陌生，因此我不确定如何在我的模型中测试日期时间验证是否正确。我制作了一个具有开始时间和结束时间的模型事件，并且有一些重要的条件，例如开始时间不能在过去，结束时间必须在开始时间之后。

为了确保这些验证，我使用了 ValidatesTimeliness [https://github.com/adzap/validates_timeliness](https://github.com/adzap/validates_timeliness)

我的模型如下：

```
class Event < ActiveRecord::Base
  ...

  validates_datetime :start_date,
    :after => :now,
    :after_message => "Event cannot start in the past"

  validates_datetime :end_date,
    :after => :start_date,
    :after_message => "End time cannot be before start time"
end 
```

在我的 RSpec 测试中，我有：

```
describe Event do
  let(:event) { FactoryGirl.build :event }
  subject { event }

  context "when start_date is before the current time" do
    it {should_not allow_value(1.day.ago).
        for(:start_date)}
  end

  context "when end_date is before or on start date" do
    it {should_not allow_value(event.start_date - 1.day).
        for(:end_date)}

    it {should_not allow_value(event.start_date).
        for(:end_date)}
  end

  context "when the end_date is after the start_date" do
    it {should allow_value(event.start_date + 1.day).
        for(:end_date)}
  end
end 
```

但是，这并不能真正测试我的开始日期必须早于确切的日期时间。例如，如果我不小心在我的模型中使用`:today`而不是`:now`，这些测试也会通过。

我在网上读到，曾经有一个名为`validate_date`( [http://www.railslodge.com/plugins/1160-validates-timeliness](http://www.railslodge.com/plugins/1160-validates-timeliness) ) 的 RSpec 匹配器，这正是我正在寻找的，但据我所知，它已经删除。

我的问题是如何改进我的测试，我是否需要添加尝试最短时间（即毫秒）的测试以确保相应地通过/失败，还是有更好的方法来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:33:30.360

尝试这个

```
validates_date :end_time, :after => [:start_time, Proc.new {1.day.from_now_to_date}]
validates_date :start_time, :after => Time.now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T04:47:43.423

You could work with `valid?` and `errors.messages`:

*   Build an`Event` that passes validation except for your `start_date` and `end_date`
*   Set the `start_date` and `end_date` in the **right** order, and assert that `event.valid?` is `true`
*   Set the `start_date` and `end_date` in the **wrong** order, and assert that it is not `valid?` and that `event.errors.messages` includes the right validation errors. (Note, you have to call `event.valid?` before checking `event.errors.messages`, otherwise they will be empty)

* * *

Example for `valid?` and `errors.messages`:

```
 user = User.new
 user.errors.messages #=> {} # no messages, since validations never ran
 user.valid? # => false
 user.errors.messages #=> {:email=>["can't be blank"]}

 user.email = "foo@bar.com"
 user.valid? #=> true
 user.errors.messages #=> {} 
```

# blackberry - opencellid 没有给出黑莓的实际位置结果

> ID：13138209
> 
> 赞同：0
> 
> 时间：2012-10-30T11:40:01.833
> 
> 标签：blackberry

我想在不使用 GPS 的情况下获取我的黑莓设备的位置。所以，我使用 Opencellid 来获得结果。但它给了我错误的位置结果。谁能澄清确切的程序是什么以及我可能做错了什么？

我的代码：

```
public final static String getQueryString(){
    cellID = Integer.toString(GPRSInfo.getCellInfo().getCellId());
    // Retrieves the Location Area Code.
    lac = Integer.toString(GPRSInfo.getCellInfo().getLAC());
    // Retrieves the mobile country code.
    mcc = Integer.toHexString(RadioInfo.getMCC(RadioInfo.getCurrentNetworkIndex()));
    // Retrieves the Location network Code.
    mnc = Integer.toHexString(RadioInfo.getMNC(RadioInfo.getCurrentNetworkIndex()));     
    queryStr="http://www.opencellid.org/cell/get?
    key="+myapikey+"&mcc="+mcc+"&mnc="+mnc+"&cellid="+cellID+"&lac="+lac+"&fmt=txt";
    return queryStr;
}

public void httpGetRequest(){
    HttpConnection conn = null;
    InputStream in = null; StringBuffer buff = new StringBuffer(); String result = "";
    try {
        conn=(HttpConnection) Connector.open(getQueryString()+getString(),Connector.READ);
        conn.setRequestMethod(HttpConnection.GET); conn.setRequestProperty("User-Agent", "Profile/MIDP-1.0 Confirguration/CLDC-1.0");
        conn.setRequestProperty("Content-Type", "plain/text");
        in = conn.openInputStream();

        int car;
        while( (car=in.read())!= -1){
            buff.append((char)car);
        }
        in.close();
        conn.close();
        result=buff.toString();

        //get latitude and longitude
        if(result.startsWith("err")){
            System.out.println("Cell not found!");
        }else{
            int pos=result.indexOf(',');
            String lat=result.substring(0,pos);
            int pos2=result.indexOf(',',pos+1);
            String lon=result.substring(pos+1,pos2);
            System.out.println(lat+" "+lon);
            getLocationFromGoogleMaps(lat,lon);
        }
    } catch (Exception ex) {
        System.out.println("====Exception: "+ex.getMessage());
    } finally {
        try {
            if (in != null) {
                in.close();
            }
            conn.close();
        } catch (IOException e) {
            System.out.println("====Exception: "+e.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:47:55.547

尝试这个 -

```
 try {

                int cellID = GPRSInfo.getCellInfo().getCellId();
                int lac = GPRSInfo.getCellInfo().getLAC();
                String urlString2 = "http://www.google.com/glm/mmap";
                // Open a connection to Google Maps API 
                ConnectionFactory connFact = new ConnectionFactory();                   ConnectionDescriptor connDesc;
                connDesc = connFact.getConnection(urlString2);

                HttpConnection httpConn2;
                httpConn2 = (HttpConnection)connDesc.getConnection();
                httpConn2.setRequestMethod("POST");

                // Write some custom data to Google Maps API 
                OutputStream outputStream2 = httpConn2.openOutputStream();//getOutputStream();
                WriteDataGoogleMaps(outputStream2, cellID, lac);

                // Get the response  
                InputStream inputStream2 = httpConn2.openInputStream();//getInputStream();
                DataInputStream dataInputStream2 = new DataInputStream(inputStream2);

                // Interpret the response obtained 
                dataInputStream2.readShort();
                dataInputStream2.readByte();

                int code = dataInputStream2.readInt();
                //Dialog.alert(code+"");

                if (code == 0) {
                    latitude= dataInputStream2.readInt() / 1000000D;
                    longitude=dataInputStream2.readInt() / 1000000D;

                    //Dialog.alert(latitude+"-----"+longitude);  

                    dataInputStream2.readInt();
                    dataInputStream2.readInt();
                    dataInputStream2.readUTF();

                } else {
                    System.out.println("Error obtaining Cell Id ");
                }
                outputStream2.close();
                inputStream2.close();
            } catch (Exception e) {
                System.out.println("Error: " + e.getMessage());
            } 
```

下面给出了 WriteDataGoogleMaps 函数 -

```
 private static void WriteDataGoogleMaps(OutputStream out, int cellID, int lac)
throws IOException {
    DataOutputStream dataOutputStream = new DataOutputStream(out);
    dataOutputStream.writeShort(21);
    dataOutputStream.writeLong(0);
    dataOutputStream.writeUTF("en");
    dataOutputStream.writeUTF("Android");
    dataOutputStream.writeUTF("1.0");
    dataOutputStream.writeUTF("Web");
    dataOutputStream.writeByte(27);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(3);
    dataOutputStream.writeUTF("");
    dataOutputStream.writeInt(cellID);
    dataOutputStream.writeInt(lac);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.writeInt(0);
    dataOutputStream.flush();
} 
```

# objective-c - 在 NSTableView 中添加页脚

> ID：13138211
> 
> 赞同：3
> 
> 时间：2012-10-30T11:40:10.883
> 
> 标签：objective-c, macos, cocoa, nstableview

我正在为 Mac 开发一个 Cocoa 应用程序。在应用程序中，我必须在表格中添加页脚，以便添加和删除行，如附图中所示：

![在此处输入图像描述](../Images/764474cbaefeb1fa57160fca815a3b24.png)

这种类型的页脚视图是否存在任何默认控件？如果没有这样的默认控件，我必须使用图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:59:36.460

没有这样的默认控件。您可以像这样创建自定义控件，也可以通过拍摄图像和两个按钮来获得此效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:38:36.267

您可以查看[NSWindow](https://stackoverflow.com/questions/1097115/bottom-bar-in-nswindow)中的底部栏以了解类似的问题和解决它的建议！

# php - 用于管理每个成员的个人网页的 PHP 框架

> ID：13138215
> 
> 赞同：0
> 
> 时间：2012-10-30T11:40:34.393
> 
> 标签：php, frameworks

我的机构希望中心的**每个成员**都必须拥有他们的**个人网页**。他们还希望各个桅杆能够根据需要构建/修改他们的个人页面。

现在，我看到的应用程序是 -

*   成员可以创建自己的基于主题的个人资料。
*   他们可以有多个带有导航的链接页面。
*   他们可以在页面内上传图片、视频。
*   他们可以发布、暂停任何页面。

是否有任何基于 php 的框架；可以处理上述要求。

谢谢，
萨加尔·S·德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:43:28.200

You need a CMS(Content Management System) rather than a framework. Take a look at [Joomla](http://www.joomla.org/) and [Drupal](http://drupal.org/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:45:50.627

任何 CMS 都应该满足它......但所有这些都需要一些定制才能完全满足您的需求......

一个很好的基于 CodeIgniter 的 CMS 是[http://www.getfuelcms.com/](http://www.getfuelcms.com/)，它很容易定制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T15:48:38.107

我会选择 Joomla，因为它提供了很大的灵活性。研究创建您自己的自定义扩展和组件。

# asp.net - 删除时的图像按钮确认

> ID：13138216
> 
> 赞同：0
> 
> 时间：2012-10-30T11:40:36.187
> 
> 标签：asp.net, button, confirm

我想要求我的删除按钮在删除一行之前要求确认。我该如何执行？

```
<dx:GridViewCommandColumn VisibleIndex="3" ButtonType="Image" Width="10px">
    <DeleteButton Visible="True" Text="<%$ Resources:GlobalResource, Delete %>" >
        <Image   Url="../Resources/Imgs/Erase.gif" ToolTip="<%$ Resources:GlobalResource, Delete %>" />
    </DeleteButton>
    <HeaderCaptionTemplate>
        <dx:ASPxButton runat="server" ID="ButtonAddNew" Text="<%$ Resources:GlobalResource, Add %>" ToolTip="<%$ Resources:GlobalResource, Add %>" Image-Url="~/Resources/Imgs/Add.gif" AutoPostBack="False">
            <ClientSideEvents Click="function(s, e) { OperationsGrid.AddNewRow(); }" />
        </dx:ASPxButton>
    </HeaderCaptionTemplate>
</dx:GridViewCommandColumn> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:50:25.373

假设我已经正确理解了您的问题（您想要在执行删除之前收到确认消息，对吗？），对于类似的功能，我使用了 OnClientClick 按钮属性，如下所示：

```
 <asp:ImageButton ID="btnDel" runat="server" ImageUrl="Images/delete-button.jpg" ToolTip="Delete" OnClientClick ="return confirm('Are you sure to delete this record?');"/> 
```

此外，在后面的代码中，为了检查确认框的哪个按钮被按下（确定/取消），我有以下代码：

```
 if (btnDel.CausesValidation == true)    //ok was pressed.
       {
             //perform delete.
       } 
```

后期编辑：

```
<dx:ASPxGridView ID="myGrid" runat="server" AutoGenerateColumns="False" ClientInstanceName="GridView1" >
    <ClientSideEvents CustomButtonClick="function(s, e) {     
              e.processOnServer = confirm('Do you really want to apply changes?'); }" />        
</dx:ASPxGridView> 
```

# javascript - JS 函数返回的 div 高度不正确。为什么？

> ID：13138219
> 
> 赞同：5
> 
> 时间：2012-10-30T11:40:55.607
> 
> 标签：javascript

我尝试获取页面上主 div 的大小，以使 iframe 将其高度更改为内容，但`document.getElementById("divId").offsetHeight`（也尝试`innerHeight`）返回错误值。它总是返回 247，但实际上页面看起来减少了 75%。我知道页面没有完全加载，所以我将调整大小代码放在页面的页脚中，但它仍然返回 247。

```
$(document).ready(function() {
     console.log(document.getElementById("resizeDiv").offsetHeight);
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:01:08.820

我找到了其他决定，我只是得到了身高，而且效果很好：

```
var height = Math.max(
    document.body.scrollHeight, 
document.body.clientHeight, 
document.body.offsetHeight, 
document.documentElement.scrollHeight, 
document.documentElement.offsetHeight, 
document.documentElement.clientHeight); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-11-12T15:23:22.873

添加 setTimeout 以等待屏幕加载并获得正确的高度。

```
setTimeout(() => {
    document.getElementById("resizeDiv").offsetHeight
}, 300); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:44:57.813

试试这个

```
$(document).ready(function() {
     console.log($("#resizeDiv").height());    }
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T11:45:24.110

你已经在使用 jQuery，为什么不试试：

```
$(function() {
    $('#resizeDiv').height();
}); 
```

听起来您可能正在尝试根据其中的内容调整 iFrame 的大小。如果你想这样做，这个问题已经在这里得到了回答：

[根据内容调整 iframe 的大小](https://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T11:48:48.993

`document.getElementById("resizeDiv").offsetHeight`，它以像素为单位给出元素的实际高度。该值包括任何填充和边框的高度。

`document.getElementById("resizeDiv").style.height`与 .height 类似，但您要求的是样式属性的高度部分。

`document.getElementById("resizeDiv").height`仅当元素具有高度属性时才有效，例如 IMG 标记：

```
<img src="..." width="200" height="300"> 
```

它是 的简写`document.getElementById("resizeDiv").getAttribute("height")`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-15T17:55:54.573

您可能需要在加载 DOM 后加载您的函数。

```
window.addEventListener('DOMContentLoaded', (event) => {
  // do something
}); 
```

请参阅[Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/API/Window/DOMContentLoaded_event)

> DOMContentLoaded 事件在初始 HTML 文档完全加载和解析后触发，无需等待样式表、图像和子框架完成加载。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-30T03:06:36.570

对象上的`load`事件在`window`整个页面加载时触发，包括样式、图像和其他资源。我们可以使用它来获得正确的高度：

```
window.onload = function () {
    element.offsetHeight;
} 
```

# matlab - 在 MATLAB 的 GUIDE 工具中对 GUI 的“编辑文本”和“按钮”组件进行编程

> ID：13138223
> 
> 赞同：1
> 
> 时间：2012-10-30T11:41:12.613
> 
> 标签：matlab, matlab-guide

我有一个 .m 文件，其中包含输入和输出变量的定义以及调用其他函数文件，这些文件从提供的数字输入计算数字输出。

我想在 MATLAB 中为此构建一个 GUI。

我需要的是编码信息

1）从“编辑文本”组件中检索数字数据并将此数据分配为输入数据

2）通过单击按钮运行程序来设置动作，从输入计算输出并将数值显示为输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T11:37:40.927

据我了解你的问题，这很容易。我希望这会有所帮助。
1\. 通过在命令窗口中键入指南打开指南。
2\. 单击空白 gui
3\. 向导窗口将打开
4\. 单击并拖动一个按钮和一个编辑文本。
5\. 点击编辑器
6\. 保存文件
7\. 转到以下功能

```
 function pushbutton_Callback(hObject, eventdata, handles) 
```

并在下面写下这段代码。

```
 str = inputdlg('Enter numbers (seperated by commas)');         
  num = str2num(str{1});    
  a=num(:,1);    
  b=num(:,2);    
  ans=a+b; //or whatever you want to do!    
  caption = sprintf('your answer is %.2f',ans)    
  set(handles.edit,'string',caption) 
```

# android - 如何找出在横向模式下未捕获图像的时间，即通过旋转手机而不是相机方向。

> ID：13138232
> 
> 赞同：0
> 
> 时间：2012-10-30T11:41:38.177
> 
> 标签：android, android-layout

我正在使用处于横向模式的手机默认摄像头。如果我以横向模式捕获图像，它非常适合图像视图。但是当我旋转设备时，图像会旋转 90 度。当时的相机模式仍然是风景。我试图找出在横向模式下未捕获图像的时间，即通过旋转手机而不是相机方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:52:27.740

请看[我](https://stackoverflow.com/questions/12933085/android-camera-intent-saving-image-landscape-when-taken-portrait/12933632#12933632)对[这个问题](https://stackoverflow.com/questions/12933085/android-camera-intent-saving-image-landscape-when-taken-portrait)的回答。基本上，您必须读取存储在图片中的方向信息（EXIF 元数据）。那里存储了拍摄图像时设备的方向。在我的回答中，给出了一些代码来旋转图像以在纵向模式下正确显示。

# git - Git 车道概念

> ID：13138233
> 
> 赞同：1
> 
> 时间：2012-10-30T11:41:55.313
> 
> 标签：git, egit

我是 git 新手，想了解更多关于用于查找分支的 git 通道的信息。Git 存储库有一个通道概念，用于识别我们是在同一个分支还是在主分支等。

但是当我检查为第一个分支初始化的车道时，它被设置为“1” - 主分支，创建的下一个分支被标记为“0” - 第一个分支和下一个分支为车道“2”，然后是车道3等等……

我在 eclispe 中使用 egit2.1 所以我怀疑是否

1.  主通道在 git 上始终设置为 1。
2.  master的车道值设置在哪里？它是 egit 还是 jgit 的一部分

你们中的任何人有任何关于 egit 开发的文档吗:)

## 编辑：

抱歉，如果我没有使用确切的名称，我不知道用于车道的类，直到我检查了 eGit 的代码

该代码在**org.eclipse.egit.ui.internal.history.CommitGraphTable**中找到了 一些与**git CommitGraphTable lane**的谷歌搜索的[车道缺陷相关的代码](http://git.eclipse.org/c/egit/egit.git/commit/?id=e78a17acc65a41e840a77c5b5243b199077e883c)

 **这些是我找到车道对象和车道定义的类

eGit org.eclipse.egit.ui.internal.history.SWTCommit org.eclipse.egit.ui.internal.history.SWTCommitList.SWTLane

jGit org.eclipse.jgit.revplot.PlotCommitList

那么请告诉我主车道的车道设置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:28:41.393

也许截图可以帮助澄清“车道”的含义，但 EGit 没有将 id 附加到分支，它只是列出它们：

![伊吉特分支](../Images/82aa21e70c82c2db5b115dd913387823.png)

与 Git 相同，它只记录所有分支的活动 HEAD 和 HEADS。

* * *

编辑后，这里的“lane”指的是[内部类 SWTLane 或 SWTCommitList](https://github.com/eclipse/egit/blob/master/org.eclipse.egit.ui/src/org/eclipse/egit/ui/internal/history/SWTCommitList.java#L96) ”，用于管理分支的颜色。
我没有看到为 设置的特定通道`master`，仅查询 SWTCommitList 中按顺序完成的所有正确分支绘制正确的车道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:06:37.140

我对代码做了一些进一步的挖掘，**Class PlotCommitList**正在为提交树中的每个提交对象设置通道。

这个逻辑是 Jgit 逻辑的一部分

ya @VonC 在**SWTCommitList的范围内是正确的**

```
 package org.eclipse.jgit.revplot;

 public class PlotCommitList<L extends PlotLane> extends
    RevCommitList<PlotCommit<L>>{
....
protected void enter(final int index, final PlotCommit<L> currCommit){
//This method contains the logic
}

....

} 
```**

# java - Java 排列

> ID：13138238
> 
> 赞同：2
> 
> 时间：2012-10-30T11:42:08.417
> 
> 标签：java, permutation, poker

我正在尝试编写一个程序来跟踪每个玩家在扑克中的筹码数量。这不是扑克游戏，只是一个可以保持每个玩家拥有的筹码数量的程序。但是，我希望能够“下注”“跟注”“弃牌”等并能够自动跟踪。

我的问题是，有没有办法在不写每个排列的情况下调整玩家数量？目前，它只能跟踪 2 个人。我将如何使它理论上可以跟踪无限数量的人？我已经写了所有可能的排列，我知道它不是很有效，所以有没有更有效的编码方式？

我是一个java noob，所以任何帮助将不胜感激。

```
import java.util.Scanner;
import static java.lang.System.out;

class Chips {
static String move; //first move
static int betVal1, betVal2;
static int pot;
static int P1, P2;
static int roundcount;
static String player;
static Scanner myScanner = new Scanner(System.in);
static int turncount;
static String outcome;

public static void firstP1() { //first move when P1 start
    out.print("P1 - will you 'Bet', 'Check' or 'Fold'? ");
    move = myScanner.next();

    while (!move.equals("Bet") && !move.equals("Check") && !move.equals("Fold")){
    out.print("Please type 'Bet', 'Check' or 'Fold'");
    move = myScanner.next();
    }

    switch(move) {
    case "Bet":
        out.print("How much will you bet? If you've changed your mind: Type '0' to check and '-1' to fold. ");
        betVal1 = myScanner.nextInt();

        while (betVal1 > P1) {
            out.print("You cannot bet more than your chip count. How much will you bet? ");
            betVal1 = myScanner.nextInt();
        }
        if (betVal1 == 0) { //check
            P2aftercheck();
        }
        if (betVal1 == -1) { //fold
            P2 += pot;
            pot = 0;
            roundcount = 0;
            turncount++;

            out.print("P1: ");
            out.println(P1);
            out.print("P2: ");
            out.println(P2);
            out.println("Next turn");

            if (turncount  % 2 == 0) { //check to see who begins next turn
                player = "One";
            } else {
                player = "Two";         
            }

            if( player.equals("One")) {
                firstP1();
            } else {
                firstP2();
            }

        }

        pot += betVal1;
        P1 -= betVal1;
        //out.println(betVal);
        //out.print(pot);
        P2afterbet();
        break;

    case "Check":
        P2aftercheck();
        break;

    case "Fold":
        P2 += pot;
        pot = 0;
        roundcount = 0;
        turncount++;

        if (turncount  % 2 == 0) {
            player = "One";
        } else {
            player = "Two";         
        }

        if( player.equals("One")) {
            firstP1();
        } else {
            firstP2();
        }
        break;

    }
}

public static void firstP2() { //first move when P2 start
    out.print("P2 - will you 'Bet', 'Check' or 'Fold'? ");
    move = myScanner.next();

    while (!move.equals("Bet") && !move.equals("Check") && !move.equals("Fold")){
    out.print("Please type 'Bet', 'Check' or 'Fold' ");
    move = myScanner.next();
    }

    switch(move) {
    case "Bet":
        out.print("How much will you bet? ");
        betVal2 = myScanner.nextInt();
        while (betVal2 > P2) {
            out.print("You can not bet more than your chip count. How much will you bet? ");
            betVal2 = myScanner.nextInt();
        }
        pot += betVal2;
        P2 -= betVal2;
        //out.println(betVal);
        //out.print(pot);
        P1afterbet();
        break;

    case "Check":
        P1aftercheck();
        break;

    case "Fold":
        P1 += pot;
        pot = 0;
        roundcount = 0;
        turncount++;

        out.print("P1: ");
        out.println(P1);
        out.print("P2: ");
        out.println(P2);
        out.println("Next turn");

        if (turncount  % 2 == 0) {
            player = "One";
        } else {
            player = "Two";         
        }

        if( player.equals("One")) {
            firstP1();
        } else {
            firstP2();
        }
        break;

    }
}

public static void P1afterbet() { //P1 move after P2 bet
    out.print("P1 - will you 'Bet', 'Call' or 'Fold'? ");
    move = myScanner.next();

    while (!move.equals("Bet") && !move.equals("Call") && !move.equals("Fold")){
        out.print("Please type 'Bet', 'Check' or 'Fold' ");
        move = myScanner.next();
    }

    switch(move) {
    case "Bet":
        out.print("How much will you bet? ");
        betVal1 = myScanner.nextInt();
        while (betVal1 < betVal2){
            out.print("Please bet at least ");
            out.print(betVal2);
            out.println(" chips.");
            out.print("How much will you bet? ");
            betVal1 = myScanner.nextInt();
        }

        pot += betVal1;
        P1 -= betVal1;
        P2afterbet();
        break;

    case "Call":
        pot += betVal1;
        P1 -= betVal1;
        roundcount++;
        if (roundcount == 4){
            roundend();
        }
        if( player.equals("P1")) {
            firstP1();
        } else {
            firstP2();
        }
        break;

    case "Fold":
        P2 += pot;
        pot = 0;
        roundcount = 0;
        turncount++;

        out.print("P1: ");
        out.println(P1);
        out.print("P2: ");
        out.println(P2);
        out.println("Next turn");

        if (turncount  % 2 == 0) {
            player = "One";
        } else {
            player = "Two";         
        }

        if( player.equals("One")) {
            firstP1();
        } else {
            firstP2();
        }
        break;
    }
}

public static void P1aftercheck() { //P1 move after P2 check
    out.print("P1 - will you 'Bet', 'Check' or 'Fold'? ");
    move = myScanner.next();

    while (!move.equals("Bet") && !move.equals("Check") && !move.equals("Fold")){
    out.print("Please type 'Bet', 'Check' or 'Fold'");
    move = myScanner.next();
    }

    switch(move) {
    case "Bet":
        out.print("How much will you bet? ");
        betVal1 = myScanner.nextInt();
        while (betVal1 > P1) {
            out.print("You can not bet more than your chip count. How much will you bet? ");
            betVal1 = myScanner.nextInt();
        }
        pot += betVal1;
        P1 -= betVal1;
        //out.println(betVal);
        //out.print(pot);
        P2afterbet();
        break;

    case "Check":
        roundcount++;
        if (roundcount == 4) {
            roundend();
        }
        if( player.equals("One")) {
            firstP1();
        } else {
            firstP2();
        }
        break;

    case "Fold":
        P2 += pot;
        pot = 0;
        roundcount=0;
        turncount++; 

        out.print("P1: ");
        out.println(P1);
        out.print("P2: ");
        out.println(P2);
        out.println("Next turn");

        if (turncount  % 2 == 0) {
            player = "One";
        } else {
            player = "Two";         
        }

        if( player.equals("One")) {
            firstP1();
        } else {
            firstP2();
        }
        break;

    }
}

public static void P2afterbet() { //P2 move after P1 bet
    out.print("P2 - will you 'Bet', 'Call' or 'Fold'? ");
    move = myScanner.next();

    while (!move.equals("Bet") && !move.equals("Call") && !move.equals("Fold")){
    out.print("Please type 'Bet', 'Check' or 'Fold'");
    move = myScanner.next();
    }

    switch(move) {
    case "Bet":
        out.print("How much will you bet? ");
        betVal2 = myScanner.nextInt();
        while (betVal2 > P2) {
            out.print("You can not bet more than your chip count. How much will you bet? ");
            betVal2 = myScanner.nextInt();
        }
        while (betVal2 < betVal1) {
            out.print("You must bet at least ");
            out.print(betVal1);
            betVal2 = myScanner.nextInt();
        }
        pot += betVal2;
        P2 -= betVal2;
        //out.println(betVal);
        //out.print(pot);
        P1afterbet();
        break;

    case "Call":
        P2 -= betVal1;
        pot += betVal1;
        roundcount++;
        if (roundcount == 4){
            roundend();
        }
        if( player.equals("P1")) {
            firstP1();
        } else {
            firstP2();
        }
        break;

    case "Fold":
        P1 += pot;
        pot = 0;
        roundcount = 0;
        turncount++;

        out.print("P1: ");
        out.println(P1);
        out.print("P2: ");
        out.println(P2);
        out.println("Next turn");

        if (turncount  % 2 == 0) {
            player = "One";
        } else {
            player = "Two";         
        }

        if( player.equals("One")) {
            firstP1();
        } else {
            firstP2();
        }
        break;

    }
}

public static void P2aftercheck() { //P2 move after P1 check
    out.print("P2 - will you 'Bet', 'Check' or 'Fold'? ");
    move = myScanner.next();

    while (!move.equals("Bet") && !move.equals("Check") && !move.equals("Fold")){
    out.print("Please type 'Bet', 'Check' or 'Fold'");
    move = myScanner.next();
    }

    switch(move) {
    case "Bet":
        out.print("How much will you bet? ");
        betVal2 = myScanner.nextInt();
        while (betVal2 > P1) {
            out.print("You can not bet more than your chip count. How much will you bet? ");
            betVal2 = myScanner.nextInt();
        }
        pot += betVal2;
        P2 -= betVal2;
        //out.println(betVal);
        //out.print(pot);
        P1afterbet();
        break;

    case "Check":
        roundcount++;
        if (roundcount == 4){
            roundend();
        }
        if( player.equals("One")) {
            firstP1();
        } else {
            firstP2();
        }

        break;

    case "Fold":
        P1 += pot;
        pot = 0;
        roundcount=0;
        turncount++;

        out.print("P1: ");
        out.println(P1);
        out.print("P2: ");
        out.println(P2);
        out.println("Next turn");

        if (turncount  % 2 == 0) {
            player = "One";
        } else {
            player = "Two";         
        }

        if( player.equals("One")) {
            firstP1();
        } else {
            firstP2();
        }

        break;

    }
}

public static void roundend() {
    out.print("Who won the round? 'P1' or 'P2'? ");
    outcome = myScanner.next();
    turncount++;

    if (turncount  % 2 == 0) {
        player = "One";
    } else {
        player = "Two";         
    }

    while (!outcome.equals("P1") && !outcome.equals("P2")){
        out.print("Please type 'P1' or 'P2'");
        outcome = myScanner.next();
    }

    if (outcome.equals("P1")){
        P1 += pot;
        pot = 0;
        roundcount = 0;

        out.print("P1: ");
        out.println(P1);
        out.print("P2: ");
        out.println(P2);
        out.println("Next turn");

        if (P1 != 0 && P2 != 0){
            if( player.equals("One")) {
                firstP1();
            } else {
                firstP2();
            }
        } else if (P1 == 0) {
            out.print("P1 is out of chips. P2 Wins!");
        } else {
            out.print("P2 is out of chips. P2 Wins!");
        }
    } else {
        P2 += pot;
        pot = 0;
        roundcount = 0;

        out.print("P1: ");
        out.println(P1);
        out.print("P2: ");
        out.println(P2);
        out.println("Next turn");

        if (P1 != 0 && P2 != 0) {
            if( player.equals("P1")) {
                firstP1();
            } else {
                firstP2();
            }
        } else if (P1 == 0) {
            out.print("P1 is out of chips. P2 Wins!");
        } else {
            out.print("P2 is out of chips. P2 Wins!");
        }
    } 

    System.exit(0);
}

public static void main(String args[]){

    pot = 0;
    roundcount = 0; //status within turn i.e. Flop, Turn, River
    turncount = 2; //use for who starts

    out.print("Please enter starting chip count ");
    P1 = myScanner.nextInt();
    P2 = P1;

    firstP1();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:48:59.240

是的，但您需要重新考虑程序的设计方式。

最简单的方法是创建一个`Player`类，并将玩家执行的每个操作作为该类中的方法实现。为了管理玩家的筹码，您将拥有一个`Player.chips`可全局访问或使用诸如`Player.getChips()`和之类的方法管理的变量`Player.setChips()`。

`Player`对于多个玩家，您将拥有一个's数组。

```
Player[] Players; 
Players[0] = new Player();
Players[1] = new Player(); 
```

以下帖子可能对您有更多帮助（类似的问题，但使用 Blackjack 而不是 Poker） - [How to initialize a array of objects in Java](https://stackoverflow.com/questions/5889034/how-to-initialize-an-array-of-objects-in-java)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:48:11.870

我认为您缺少的主要内容是**方法可以采用参数**。

因此，与其拥有风格的东西；

```
private static void player1Move() {
    //player 1 takes his move
}

private static void player2Move() {
    //player 2 takes her move
} 
```

你将会拥有;

```
private static void move(int playerID) {
    //player playerID takes their move
} 
```

Java 命名约定规定方法名和字段名必须以小写字母开头，类名必须以大写字母开头。也不要忘记**方法可以返回东西，有用的东西**。您的所有方法都是`void`，尝试考虑它们如何将某种状态返回给调用函数。

例如，您可以有一个方法`int getBet(int playerID)`要求用户输入他们的下注金额，对照他们的筹码堆栈检查（使用 playerID 参数），并在有效时返回他们的下注金额。比一遍又一遍地重写所有内容要好得多，对吧？

最后提示：如果您发现自己复制了**一行**代码，那么您做错了什么。

编辑：内森邓恩的回答也很相关。Java 是一种面向对象的语言，学习利用这一事实。你当然需要一`Player`堂课。

# c# - 实体框架：Linq 查询按原始数据查找条目，但返回对更改条目的引用

> ID：13138243
> 
> 赞同：1
> 
> 时间：2012-10-30T11:42:21.050
> 
> 标签：c#, database, linq, entity-framework

我刚刚花了几天时间来发现一个由实体框架（版本 4.4.0.0）的一些奇怪行为引起的错误。为了解释，我写了一个小测试程序。最后，您会发现我对此有一些疑问。

## 宣言

这里我们有一个类“Test”，它代表我们的测试数据集。它只有一个 ID（主键）和一个“值”属性。在我们的 TestContext 中，我们实现了一个 DbSet 测试，它将我们的“测试”对象作为数据库表来处理。

```
public class Test
{
    public int ID { get; set; }
    public int value { get; set; }
}

public class TestContext : DbContext
{
    public DbSet<Test> Tests { get; set; }
} 
```

## 初始化

现在，我们从“测试”表中删除任何（如果存在）条目，并添加我们唯一的“测试”对象。它的 ID=1（主键）和值=10。

```
// Create a new DBContext...
TestContext db = new TestContext();

// Remove all entries...
foreach (Test t in db.Tests) db.Tests.Remove(t);
db.SaveChanges();

// Add one test entry...
db.Tests.Add(new Test { ID = 1, value = 10 });
db.SaveChanges(); 
```

## 测试

最后，我们运行一些测试。我们通过它的原始值 (=10) 选择我们的条目，并将我们的条目的“值”更改为 4711。但是，我们不调用 db.SaveChanges(); ！！！

```
// Find our entry by it's value (=10)
var result = from r in db.Tests
             where r.value == 10
             select r;
Test t2 = result.FirstOrDefault();

// change its value from 10 to 4711...
t2.value = 4711; 
```

现在，我们尝试通过原始值 (=10) 找到（旧）条目并对其结果进行一些测试。

```
// now we try to select it via its old value (==10)
var result2 = from r in db.Tests
             where r.value == 10
             select r;

// Did we get it?
if (result2.FirstOrDefault() != null && result2.FirstOrDefault().value == 4711)
{
    Console.WriteLine("We found the changed entry by it's old value...");
} 
```

运行程序时，我们实际上会看到“我们通过它的旧值找到了更改的条目......”。这意味着我们已经运行了 r.value == 10 的查询，发现了一些东西......这是可以接受的。但是，接收已经更改的对象（不满足值 == 10）！！！

**注意：**您将获得“where r.value == 4711”的空结果集。

在进一步的测试中，我们发现 Entity Framework 总是分发对同一个对象的引用。如果我们改变一个引用中的值，它也会在另一个引用中改变。好吧，没关系……但应该知道它会发生。

```
Test t3 = result2.FirstOrDefault();    
t3.value = 42;
if (t2.value == 42)
{
    Console.WriteLine("Seems as if we have a reference to the same object...");
} 
```

## 概括

在同一数据库上下文上运行 LINQ 查询时（不调用 SaveChanges()），如果它具有相同的主键，我们将收到对同一对象的引用。奇怪的是：即使我们改变一个对象，我们会（仅！）通过它的旧值找到它。但是我们将收到对已更改对象的引用。这意味着对于自上次调用 SaveChanges() 以来我们更改的任何条目，我们的查询中的限制（值 == 10）不能保证。

## 问题

当然，我可能不得不在这里忍受一些影响。但我想避免在每次小改动后都使用“SaveChanges()”。特别是，因为我想将它用于事务处理......如果出现问题，能够恢复一些更改。

如果有人能回答我以下一个或两个问题，我会很高兴：

1.  是否有可能改变实体框架的行为，就像在事务期间与普通数据库进行通信一样？如果是这样……怎么办？

2.  回答“如何使用实体框架的上下文？”的好资源在哪里？它回答了诸如“我可以依靠什么？”之类的问题。和“如何选择我的 DBContext 对象的范围”？

## 编辑#1

Richard 刚刚解释了如何访问原始（未更改的）数据库值。虽然这很有价值和有帮助，但我有明确目标的冲动......

让我们看看使用 SQL 时会发生什么。我们设置了一个表“测试”：

```
CREATE TABLE Tests (ID INT, value INT, PRIMARY KEY(ID));
INSERT INTO Tests (ID, value) VALUES (1,10); 
```

然后我们有一个事务，它首先查找值为 10 的实体。之后，我们更新这些条目的值并再次查找这些条目。在 SQL 中，我们已经在使用更新版本，因此我们不会为第二个查询找到任何结果。毕竟我们做了一个“回滚”，所以我们条目的值应该又是 10...

```
START TRANSACTION;

SELECT ID, value FROM Tests WHERE value=10; {1 result}
UPDATE Tests SET value=4711 WHERE ID=1; {our update}

SELECT ID, value FROM Tests WHERE value=10; {no result, as value is now 4711}

ROLLBACK; { just for testing transactions... } 
```

我希望实体框架（EF）具有这种行为，其中 db.SaveChanges(); 等效于“COMMIT”，其中所有 LINQ 查询都等效于“SELECT”语句，并且对实体的每次写入访问都类似于“UPDATE”。我不关心 EF 何时实际调用 UPDATE 语句，但它的行为方式应该与直接使用 SQL 数据库的方式相同......当然，如果调用“SaveChanges()”并成功返回它应该保证所有数据都正确保存。

注意：是的，我可以在每次查询之前调用 db.SaveChanges()，但是我会失去“回滚”的可能性。

问候，

斯特凡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:29:34.563

正如您所发现的，Entity Framework 跟踪它已加载的实体，并为访问同一实体的每个查询返回相同的引用。这意味着从您的查询返回的数据与数据的当前内存版本匹配，而不一定与数据库中的数据匹配。

如果您需要访问数据库值，您有几个选择：

1.  使用 new`DbContext`加载实体；
2.  用于[`.AsNoTracking()`](http://msdn.microsoft.com/en-us/library/gg679169%28v=vs.103%29.aspx)加载您的实体的未跟踪副本；
3.  用于[`context.Entry(entity).GetDatabaseValues()`](http://msdn.microsoft.com/en-us/library/system.data.entity.infrastructure.dbentityentry.getdatabasevalues%28v=vs.103%29.aspx)从数据库加载属性值；

如果你想用数据库中的值覆盖本地实体的属性，你需要调用[`context.Entry(entity).Reload()`](http://msdn.microsoft.com/en-us/library/system.data.entity.infrastructure.dbentityentry.reload%28v=vs.103%29.aspx).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:57:43.893

您可以将更新包装在事务中以实现与 SQL 示例中相同的结果：

```
using (var transaction = new TransactionScope())
{

    var result = from r in db.Tests
                    where r.value == 10
                    select r;
    Test t2 = result.FirstOrDefault();

    // change its value from 10 to 4711...
    t2.value = 4711;
    // send UPDATE to Database but don't commit transcation
    db.SaveChanges();

    var result2 = from r in db.Tests
                    where r.value == 10
                    select r;
    // should not return anything
    Trace.Assert(result2.Count() == 0);

    // This way you can commit the transaction:
    // transaction.Complete();

    // but we do nothing and after this line, the transaction is rolled back
} 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/bb896325(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb896325%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:17:30.590

我认为你的问题是表达式树。`SaveChanges()`正如您已经提到的，当您说 时，实体框架会执行您对数据库的查询。在上下文中操作某些内容时，更改不会发生在数据库上，而是发生在您的物理内存中。就在您调用时，`SaveChanges()`您的操作将被翻译为 SQL。

当您执行一个简单`select`的操作时，数据库会在您访问数据的那一刻进行查询。因此，如果您没有调用`SaveChanges()`，它会使用（SQL）在数据库中找到数据集，`SELECT* FROM Test WHERE VALUE = 10`但从表达式树中解释它必须是`value == 4711`。

EF 中的事务正在您的存储中进行。你之前所做的一切都是你`SaveChanges()`的交易。阅读更多信息：[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/bb738523%28v=vs.100%29.aspx)

一个非常好的资源，可能是最新的，关于 EF 的信息是[Microsoft Data Developer Center](http://msdn.microsoft.com/en-US/data/ef)

# c# - 可恢复文件下载器 C# 到 VB.NET

> ID：13138244
> 
> 赞同：1
> 
> 时间：2012-10-30T11:42:28.757
> 
> 标签：c#, vb.net, type-conversion, download-manager

我正在尝试转换我在另一个站点上找到的 C# 脚本：http: [//www.codeproject.com/Tips/307548/Resume-Suppoert-Downloading](http://www.codeproject.com/Tips/307548/Resume-Suppoert-Downloading)

到目前为止，我已经设法转换了其中的大部分内容，但是一旦我运行程序，它就会创建一个只有 0 字节的文件。当在 C# 中运行时，它工作得很好，所以我知道它一定是我的转换技能的问题（或者在这种情况下缺乏）。

这是 C#

```
 static void DownloadFile(string sSourceURL, string sDestinationPath)
    {
        long iFileSize = 0;
        int iBufferSize = 1024;
        iBufferSize *= 1000;
        long iExistLen = 0;
        System.IO.FileStream saveFileStream;
        if (System.IO.File.Exists(sDestinationPath))
        {
            System.IO.FileInfo fINfo =
               new System.IO.FileInfo(sDestinationPath);
            iExistLen = fINfo.Length;
        }

        if (iExistLen > 0)
            saveFileStream = new System.IO.FileStream(sDestinationPath,
              System.IO.FileMode.Append, System.IO.FileAccess.Write,
              System.IO.FileShare.ReadWrite);
        else
            saveFileStream = new System.IO.FileStream(sDestinationPath,
              System.IO.FileMode.Create, System.IO.FileAccess.Write,
              System.IO.FileShare.ReadWrite);

        System.Net.HttpWebRequest hwRq;
        System.Net.HttpWebResponse hwRes;
        hwRq = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(sSourceURL);
        hwRq.AddRange((int)iExistLen);
        System.IO.Stream smRespStream;
        hwRes = (System.Net.HttpWebResponse)hwRq.GetResponse();
        smRespStream = hwRes.GetResponseStream();

        iFileSize = hwRes.ContentLength;

        int iByteSize;
        byte[] downBuffer = new byte[iBufferSize];

        while ((iByteSize = smRespStream.Read(downBuffer, 0, downBuffer.Length)) > 0)
        {
            saveFileStream.Write(downBuffer, 0, iByteSize);
        }
    } 
```

现在我的 VB.NET

```
 Dim sSourceURL As String = TextBox1.Text
    Dim sDestinationPath As String = TextBox2.Text

    Dim iFileSize As Long = 0
    Dim iBufferSize As Integer = 1024
    iBufferSize *= 1000
    Dim iExistLen As Long = 0
    Dim saveFileStream As System.IO.FileStream

    If System.IO.File.Exists(sDestinationPath) Then
        Dim fINfo As New System.IO.FileInfo(sDestinationPath)
        iExistLen = fINfo.Length
    End If

    If iExistLen > 0 Then
        saveFileStream = New System.IO.FileStream(sDestinationPath, System.IO.FileMode.Append, System.IO.FileAccess.Write, System.IO.FileShare.ReadWrite)
    Else
        saveFileStream = New System.IO.FileStream(sDestinationPath, System.IO.FileMode.Create, System.IO.FileAccess.Write, System.IO.FileShare.ReadWrite)
    End If

    Dim hwRq As System.Net.HttpWebRequest
    Dim hwRes As System.Net.HttpWebResponse
    hwRq = DirectCast(System.Net.HttpWebRequest.Create(sSourceURL), System.Net.HttpWebRequest)
    hwRq.AddRange(CInt(iExistLen))
    Dim smRespStream As System.IO.Stream
    hwRes = DirectCast(hwRq.GetResponse(), System.Net.HttpWebResponse)
    smRespStream = hwRes.GetResponseStream()

    iFileSize = hwRes.ContentLength

    Dim iByteSize As Integer
    Dim downBuffer As Byte() = New Byte(iBufferSize) {}

    While ((smRespStream.Read(downBuffer, 0, downBuffer.Length))) > 0
        saveFileStream.Write(downBuffer, 0, iByteSize)
    End While 
```

我相信我遇到的问题在这段代码中：

```
 While ((smRespStream.Read(downBuffer, 0, downBuffer.Length))) > 0
        saveFileStream.Write(downBuffer, 0, iByteSize)
    End While 
```

谢谢大家的时间:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:45:22.077

我认为您缺少对 iByteSize 的分配，该分配被检查为大于 0。

所以是这样的：

```
While (iByteSize = (smRespStream.Read(downBuffer, 0, downBuffer.Length))) > 0
   saveFileStream.Write(downBuffer, 0, iByteSize)
End While 
```

编辑：可能是这样的，但我没有在本地测试过！

```
iByteSize = (smRespStream.Read(downBuffer, 0, downBuffer.Length))
While (iByteSize > 0)
   saveFileStream.Write(downBuffer, 0, iByteSize)
   iByteSize = (smRespStream.Read(downBuffer, 0, downBuffer.Length))
End While 
```

# android - 如何在延迟加载期间设置位图大小

> ID：13138246
> 
> 赞同：0
> 
> 时间：2012-10-30T11:42:44.800
> 
> 标签：android, bitmap, lazy-loading, sax, out-of-memory

我正在开发一个安卓应用程序。我已经使用延迟加载概念在我的应用程序中解析了文本和图像。它直到最后几天都可以正常工作，但今天它给出了错误

```
Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

我有一堂课，我在其中使用`bitmap`概念

```
 package com.example.shareslab;

public final class UrlImageViewHelper {
    private static final String LOGTAG = "UrlImageViewHelper";
    public static int copyStream(InputStream input, OutputStream output) throws IOException
    {
        byte[] stuff = new byte[1024];
        int read = 0;
        int total = 0;
        while ((read = input.read(stuff)) != -1)
        {
            output.write(stuff, 0, read);
            total += read;
        }
        return total;
    }

    static Resources mResources;
    static DisplayMetrics mMetrics;
    private static void prepareResources(Context context) {
        if (mMetrics != null)
            return;
        mMetrics = new DisplayMetrics();
        Activity act = (Activity)context;
        act.getWindowManager().getDefaultDisplay().getMetrics(mMetrics);
        AssetManager mgr = context.getAssets();
        mResources = new Resources(mgr, mMetrics, context.getResources().getConfiguration());
    }

    private static BitmapDrawable loadDrawableFromStream(Context context, InputStream stream) {
        prepareResources(context);
        final Bitmap bitmap = BitmapFactory.decodeStream(stream);
        //Log.i(LOGTAG, String.format("Loaded bitmap (%dx%d).", bitmap.getWidth(), bitmap.getHeight()));
        return new BitmapDrawable(mResources, bitmap);
    }

    public static final int CACHE_DURATION_INFINITE = Integer.MAX_VALUE;
    public static final int CACHE_DURATION_ONE_DAY = 1000 * 60 * 60 * 24;
    public static final int CACHE_DURATION_TWO_DAYS = CACHE_DURATION_ONE_DAY * 2;
    public static final int CACHE_DURATION_THREE_DAYS = CACHE_DURATION_ONE_DAY * 3;
    public static final int CACHE_DURATION_FOUR_DAYS = CACHE_DURATION_ONE_DAY * 4;
    public static final int CACHE_DURATION_FIVE_DAYS = CACHE_DURATION_ONE_DAY * 5;
    public static final int CACHE_DURATION_SIX_DAYS = CACHE_DURATION_ONE_DAY * 6;
    public static final int CACHE_DURATION_ONE_WEEK = CACHE_DURATION_ONE_DAY * 7;

    public static void setUrlDrawable(final ImageView imageView, final String url, int defaultResource) {
        setUrlDrawable(imageView.getContext(), imageView, url, defaultResource, CACHE_DURATION_THREE_DAYS);
    }

    public static void setUrlDrawable(final ImageView imageView, final String url) {
        setUrlDrawable(imageView.getContext(), imageView, url, null, CACHE_DURATION_THREE_DAYS);
    }

    public static void loadUrlDrawable(final Context context, final String url) {
        setUrlDrawable(context, null, url, null, CACHE_DURATION_THREE_DAYS);
    }

    public static void setUrlDrawable(final ImageView imageView, final String url, Drawable defaultDrawable) {
        setUrlDrawable(imageView.getContext(), imageView, url, defaultDrawable, CACHE_DURATION_ONE_DAY);
    }

    public static void setUrlDrawable(final ImageView imageView, final String url, int defaultResource, long cacheDurationMs) {
        setUrlDrawable(imageView.getContext(), imageView, url, defaultResource, cacheDurationMs);
    }

    public static void loadUrlDrawable(final Context context, final String url, long cacheDurationMs) {
        setUrlDrawable(context, null, url, null, cacheDurationMs);
    }

    public static void setUrlDrawable(final ImageView imageView, final String url, Drawable defaultDrawable, long cacheDurationMs) {
        setUrlDrawable(imageView.getContext(), imageView, url, defaultDrawable, cacheDurationMs);
    }

    private static void setUrlDrawable(final Context context, final ImageView imageView, final String url, int defaultResource, long cacheDurationMs) {
        Drawable d = null;
        if (defaultResource != 0)
            d = imageView.getResources().getDrawable(defaultResource);
        setUrlDrawable(context, imageView, url, d, cacheDurationMs);
    }

    private static boolean isNullOrEmpty(CharSequence s) {
        return (s == null || s.equals("") || s.equals("null") || s.equals("NULL"));
    }

    private static boolean mHasCleaned = false;

    public static String getFilenameForUrl(String url) {
        return "" + url.hashCode() + ".urlimage";
    }

    private static void cleanup(Context context) {
        if (mHasCleaned)
            return;
        mHasCleaned = true;
        try {
            // purge any *.urlimage files over a week old
            String[] files = context.getFilesDir().list();
            if (files == null)
                return;
            for (String file : files) {
                if (!file.endsWith(".urlimage"))
                    continue;

                File f = new File(context.getFilesDir().getAbsolutePath() + '/' + file);
                if (System.currentTimeMillis() > f.lastModified() + CACHE_DURATION_ONE_WEEK)
                    f.delete();
            }
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static void setUrlDrawable(final Context context, final ImageView imageView, final String url, final Drawable defaultDrawable, long cacheDurationMs) {
        cleanup(context);
        // disassociate this ImageView from any pending downloads
        if (imageView != null)
            mPendingViews.remove(imageView);

        if (isNullOrEmpty(url)) {
            if (imageView != null)
                imageView.setImageDrawable(defaultDrawable);
            return;
        }

        final UrlImageCache cache = UrlImageCache.getInstance();
        Drawable d = cache.get(url);
        if (d != null) {
            //Log.i(LOGTAG, "Cache hit on: " + url);
            if (imageView != null)
                imageView.setImageDrawable(d);
            return;
        }

        final String filename = getFilenameForUrl(url);

        File file = context.getFileStreamPath(filename);
        if (file.exists()) {
            try {
                if (cacheDurationMs == CACHE_DURATION_INFINITE || System.currentTimeMillis() < file.lastModified() + cacheDurationMs) {
                    //Log.i(LOGTAG, "File Cache hit on: " + url + ". " + (System.currentTimeMillis() - file.lastModified()) + "ms old.");
                    FileInputStream  fis = context.openFileInput(filename);
                    BitmapDrawable drawable = loadDrawableFromStream(context, fis);
                    fis.close();
                    if (imageView != null)
                        imageView.setImageDrawable(drawable);
                    cache.put(url, drawable);
                    return;
                }
                else {
                    //Log.i(LOGTAG, "File cache has expired. Refreshing.");
                }
            }
            catch (Exception ex) {
            }
        }

        // null it while it is downloading
        if (imageView != null)
            imageView.setImageDrawable(defaultDrawable);

        // since listviews reuse their views, we need to 
        // take note of which url this view is waiting for.
        // This may change rapidly as the list scrolls or is filtered, etc.
        //Log.i(LOGTAG, "Waiting for " + url);
        if (imageView != null)
            mPendingViews.put(imageView, url);

        ArrayList<ImageView> currentDownload = mPendingDownloads.get(url);
        if (currentDownload != null) {
            // Also, multiple vies may be waiting for this url.
            // So, let's maintain a list of these views.
            // When the url is downloaded, it sets the imagedrawable for
            // every view in the list. It needs to also validate that
            // the imageview is still waiting for this url.
            if (imageView != null)
                currentDownload.add(imageView);
            return;
        }

        final ArrayList<ImageView> downloads = new ArrayList<ImageView>();
        if (imageView != null)
            downloads.add(imageView);
        mPendingDownloads.put(url, downloads);

        AsyncTask<Void, Void, Drawable> downloader = new AsyncTask<Void, Void, Drawable>() {
            @Override
            protected Drawable doInBackground(Void... params) {
                AndroidHttpClient client = AndroidHttpClient.newInstance(context.getPackageName());
                try {
                    HttpGet get = new HttpGet(url);
                    final HttpParams httpParams = new BasicHttpParams();
                    HttpClientParams.setRedirecting(httpParams, true);
                    get.setParams(httpParams);
                    HttpResponse resp = client.execute(get);
                    int status = resp.getStatusLine().getStatusCode();
                    if(status != HttpURLConnection.HTTP_OK){
//                        Log.i(LOGTAG, "Couldn't download image from Server: " + url + " Reason: " + resp.getStatusLine().getReasonPhrase() + " / " + status);
                        return null;
                    }
                    HttpEntity entity = resp.getEntity();
//                    Log.i(LOGTAG, url + " Image Content Length: " + entity.getContentLength());
                    InputStream is = entity.getContent();
                    FileOutputStream fos = context.openFileOutput(filename, Context.MODE_PRIVATE);
                    copyStream(is, fos);
                    fos.close();
                    is.close();
                    FileInputStream  fis = context.openFileInput(filename);
                    return loadDrawableFromStream(context, fis);
                }
                catch (Exception ex) {
//                    Log.e(LOGTAG, "Exception during Image download of " + url, ex);
                    return null;
                }
                finally {
                    client.close();
                }
            }

            @Override
            protected void onPostExecute(Drawable result) {
                if (result == null)
                    result = defaultDrawable;
                mPendingDownloads.remove(url);
                cache.put(url, result);
                for (ImageView iv: downloads) {
                    // validate the url it is waiting for
                    String pendingUrl = mPendingViews.get(iv);
                    if (!url.equals(pendingUrl)) {
                        //Log.i(LOGTAG, "Ignoring out of date request to update view for " + url);
                        continue;
                    }
                    mPendingViews.remove(iv);
                    if (result != null) {
                        final Drawable newImage = result;                       
                        Drawable newSize=resize(newImage);                                             
                        final ImageView imageView = iv;                       
                        imageView.setImageDrawable(newSize);
                    }
                }
            }
            private BitmapDrawable resize(Drawable newImage) {
                // TODO Auto-generated method stub

                Bitmap d = ((BitmapDrawable)newImage).getBitmap();
                Bitmap bitmapOrig = Bitmap.createScaledBitmap(d, 75, 75, false);
                return new BitmapDrawable(bitmapOrig);                                              
            }
        };
        downloader.execute();
    }

    private static Hashtable<ImageView, String> mPendingViews = new Hashtable<ImageView, String>();
    private static Hashtable<String, ArrayList<ImageView>> mPendingDownloads = new Hashtable<String, ArrayList<ImageView>>();
} 
```

我的应用程序中的另一个问题是当我从详细信息页面返回时，我的图像尺寸变得非常小。我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:57:43.687

尝试使用 BitmapFactory 选项作为

```
BitmapFactory.Options op=new BitmapFactory.Options();
op.inSampleSize=4;
final Bitmap bitmap = BitmapFactory.decodeStream(stream,null,op); 
```

# c# - FileUpload.HasFile 总是假的

> ID：13138247
> 
> 赞同：5
> 
> 时间：2012-10-30T11:42:46.283
> 
> 标签：c#, asp.net

这是我的代码，其中我的 FileUpload 控件位于更新面板之外，但是当我单击更新面板下的保存按钮时，给出 fileUploadAttachment.HasFile = false

ASPX

```
<asp:Literal runat="server" ID="lblAttachment" Text="Attachment:" /><asp:FileUpload
            ID="fileUploadAttachment" runat="server" Width="488px" />
        <asp:UpdatePanel ID="updatePanelAction" runat="server" UpdateMode="Always">
            <ContentTemplate>
                <asp:Button ID="btnSave" runat="server" Text="Save" OnClick="btnSave_Click" ValidationGroup="Save" />
                <asp:Button ID="btnTest" runat="server" Text="Test" Enabled="false" OnClick="btnTest_Click" />
                <asp:Button ID="btnConfirmTest" runat="server" Text="Confirm Test" Enabled="false"
                    OnClick="btnConfirmTest_Click" />
                <asp:Button ID="btnSend" runat="server" Text="Send" Enabled="false" OnClick="btnSend_Click" />
            </ContentTemplate>

        </asp:UpdatePanel> 
```

CS

```
protected void btnSave_Click(object sender, EventArgs e)
{
    CampaignBAL campaignBAL;
    string tmpFileName = "";
    User user;
    Campaign campaignDetail = new Campaign();
    int? campaignID;

    if (fileUploadAttachment.HasFile) // return always false
    {
        tmpFileName = string.Format("{0}\\{1}{2}", Server.MapPath("TempUpload"), Guid.NewGuid(), Path.GetExtension(fileUploadAttachment.PostedFile.FileName));
        fileUploadAttachment.PostedFile.SaveAs(tmpFileName);
    }
} 
```

请帮助我如何解决它

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T12:22:43.233

您需要为在以下位置发布的控件添加回发触发器`UpdatePanel`：

```
<asp:UpdatePanel ...>
  <Triggers>
    <asp:PostBackTrigger ControlID="btnSend" />
  </Triggers>
  ...
</asp:UpdatePanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:46:48.233

您可以像这样在 ASP 页面中更改代码

```
<asp:updatePanel>
<trigger>
<asp:PostBackTrigger ControlID="btnSend">
</trigger>
<\asp:updatePanel> 
```

# c# - 带有反向引用的正则表达式

> ID：13138249
> 
> 赞同：1
> 
> 时间：2012-10-30T11:42:53.380
> 
> 标签：c#, regex, backreference

我试图在 C# 应用程序中编写一个正则表达式来查找“{value}”，以及对它之前的文本的反向引用到“[[”，以及对它之后的文本的另一个反向引用到“]]” . 例如：

```
This is some text [[backreference one {value} 
backreference two]] 
```

将匹配“[[反向引用一”、“{value}”和“\r\n反向引用二]]”。

我尝试过以下修改版本，但没有成功。我相信我缺少单词边界，并且可能因为我试图查找的文本中的“{”而遇到麻烦。

```
\[\[(^[\{value\}]+)\{value\}(^\]\]+)\]\] 
```

我不确定是否可以使用正则表达式，但如果它可以找到匹配的右括号，那将是理想的，例如以下将找到 "[[backreferenc[[e]] one ", "{value} ”和“ba[[ckref[[e]]rence t]]wo]]”：

```
This is some text [[backreferenc[[e]] one {value} 
ba[[ckref[[e]]rence t]]wo]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:37:07.730

您需要[在 Regex replace 上使用 MatchEvaluator](http://msdn.microsoft.com/en-us/library/ht1sxswy.aspx)。此外，通过将匹配分解为命名的捕获组以帮助匹配评估器处理，这将使您的生活更轻松。让我解释。

MatchEvaluator 的作用是，它允许使用 C# 委托在匹配过程中进行调解，并通过检查捕获的实际匹配返回匹配发生时应替换的内容。这样您就可以根据需要进行文本处理。

这是一个基本示例，它以基本方式处理各个部分，但结构是为了添加您的业务逻辑：

```
string text = @"This is some text [[Name: {name}]] at [[Address: {address}]].";

Regex.Replace(text,
              @"(?:\[\[)(?<Section>[^\:]+)(?:\:)(?<Data>[^\]]+)(?:\]\])",
              new MatchEvaluator((mtch) =>
              {
                    if (mtch.Groups["Section"].Value == "Name")
                            return "Jabberwocky";

                  return "120 Main";

              })); 
```

正则表达式替换的结果是：

```
This is some text Jabberwocky at 120 Main. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:56:18.900

对于你问题的第一部分，试试这个：

```
\[\[(.*)({value})(.*)\]\] 
```

# windows-phone-7 - 引用 Dll 文件时的问题

> ID：13138253
> 
> 赞同：1
> 
> 时间：2012-10-30T11:43:14.720
> 
> 标签：windows-phone-7, windows-phone-7.1

在我的 Wp7 项目中，它指的是一些 Dll，所以我删除了项目的调试和发布文件夹中的 Dll 文件，我得到了工具包和其他 Dll 的参考问题（不确定）。在参考了工具包之后，我被困住了的问题

> 命名空间“System.Windows.Controls”中不存在类型或命名空间名称“ChildWindow”（您是否缺少程序集引用？）

所以我添加了参考文件，现在我得到了新的错误

> “GestureEventArgs”是“System.Windows.Input.GestureEventArgs”和“Microsoft.Phone.Controls.GestureEventArgs”之间的模糊引用

我被这个参考问题困住了，有没有人遇到过这种类似的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:30:09.800

问题是有两个命名空间（System.Windows.Input 和 Microsoft.Phone.Controls）都有 GestureEventArgs 类。引用两个具有相同命名类的 DLL 很好。问题是您很可能拥有`using System.Windows.Input`并且`using Microsoft.Phone.Controls`位于代码文件的顶部。这允许您在不输入完整名称空间（例如 System.Windows.Input.GestureEventArgs）的情况下引用 GestureEventArgs - 但是，由于您有两个具有相同名称的类，因此您应该使用它们的完全限定名称来引用它们。

所以而不是：

```
 private void Test_Tap(object sender, GestureEventArgs e)
    {

    } 
```

尝试（如果 System.Windows.Input GestureEventArgs 是您想要的类）：

```
 private void Test_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {

    } 
```

# javascript - how to fire mouse down event in firefox using javascript?

> ID：13138256
> 
> 赞同：0
> 
> 时间：2012-10-30T11:43:29.760
> 
> 标签：javascript, prototype

I want to trigger mouse down event of combo box/selection box using javascript. here is the code, it is working perfect in crome but not in Firefox. any help on this ??

```
<select id="dropdown">
    <option value="Red">Red</option>
    <option value="Green">Green</option>
    <option value="Blue">Blue</option>
</select>
<br>
<button id="fire" type="button" onclick="runThis()">Show dropdown items</button>

// <select> element displays its options on mousedown, not click.
showDropdown = function (element) {
    var event;
    event = document.createEvent('MouseEvents');
    //event.initMouseEvent('mousedown', true, true, window);
    event.initMouseEvent('mousedown', true, true, window,0, 0, 0, 0, 0, false, false, false, false, 0, null);
    element.dispatchEvent(event);
};

// This isn't magic.
window.runThis = function () {
    var dropdown = document.getElementById('dropdown');
    showDropdown(dropdown);
}; 
```

Thanks in advance....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:20:30.613

这似乎是不可能的。查看类似问题：

*   [如何以编程方式告诉 HTML SELECT 下拉（例如，由于鼠标悬停）？](https://stackoverflow.com/questions/249192/how-can-you-programmatically-tell-an-html-select-to-drop-down-for-example-due)
*   [在jQuery中显示选择下拉菜单？](https://stackoverflow.com/questions/4457076/show-select-dropdown-in-jquery)
*   [选择框上的单击触发器在 jQuery 中不起作用](https://stackoverflow.com/questions/2895608/click-trigger-on-select-box-doesnt-work-in-jquery)

# qt - ListView issue in QML

> ID：13138259
> 
> 赞同：1
> 
> 时间：2012-10-30T11:43:44.817
> 
> 标签：qt, drop-down-menu, navigation, qt-creator, qml

I'm trying to develop an application which has multi-layered navigation in drop-downs. Below is the snapshot of the requirement. On clicking QSR only the subitems of QSR should pop out with proper alignment.

![original requirement](../Images/e2b18cc0391a414bc28aa42da8755ba5.png)

But with my implementation, I'm getting following result. The pop out window is not aligned, but extending itself to the list.

![my implementation](../Images/0f32e0e3c436799cf52fedc0adc66353.png)

Below is the my code snippet

```
import QtQuick 1.1

Item {
    width: 500
    height: 300

    ListView {
        anchors.fill: parent
        model: nestedModel
        delegate: categoryDelegate
    }

    ListModel {
        id: nestedModel
        ListElement {
            categoryName: "QSR"
            collapsed: true

            subItems: [
                ListElement { itemName: "KFC" },
                ListElement { itemName: "Mc Donalds" },
                ListElement { itemName: "Pizza Hut" },
                ListElement { itemName: "Brain's" }
            ]
        }

        ListElement {
            categoryName: "Drinks"
            collapsed: true
            subItems: [
                ListElement { itemName: "Pepsi" },
                ListElement { itemName: "Coke" },
                ListElement { itemName: "7up" },
                ListElement { itemName: "Bacardi" }
            ]
        }
    }

    Component {
        id: categoryDelegate
        Column {
            width: 200

            Rectangle {
                id: categoryItem
                border.color: "black"
                border.width: 5
                color: "white"
                height: 50
                width: 200
                anchors.left: parent.right

                Text {
                    anchors.right: parent.right
                    x: 15
                    font.pixelSize: 24
                    text: categoryName
                }

                MouseArea {
                    anchors.fill: parent
                    onClicked: nestedModel.setProperty(index, "collapsed", !collapsed)
                }

            }

            Loader {
                id: subItemLoader
                visible: !collapsed
                property variant subItemModel : subItems
                sourceComponent: collapsed ? null : subItemColumnDelegate
                onStatusChanged: if (status == Loader.Ready) item.model = subItemModel
            }
        }

    }

    Component {
        id: subItemColumnDelegate
        Column {
            property alias model : subItemRepeater.model
            width: 200
            Repeater {
                id: subItemRepeater
                delegate: Rectangle {
                    color: "#cccccc"
                    height: 40
                    width: 200
                    border.color: "black"
                    border.width: 2

                    Text {
                        anchors.verticalCenter: parent.verticalCenter
                        x: 30
                        font.pixelSize: 18
                        text: itemName
                    }
                }
            }
        }
    }
} 
```

Any help to achieve original requirement will be appreciable.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:00:12.787

仔细查看主列表视图的委托：它是`Column`主菜单项和`Loader`弹出菜单的（将项目放在每个项目的顶部）。显然，一旦您加载一个弹出菜单，它就会显示在列表中相应的菜单项下。

要获得您想要的行为，您必须将`Loader`弹出菜单的 移出`ListView`：

```
import QtQuick 1.1

Item {
    width: 400
    height: 300

    Row {
        anchors.fill: parent

        Loader {
            id: subItemLoader
            width: 200
            height: parent.height
            property variant subItemModel: null
            sourceComponent: subItemModel == null? null: subItemColumnDelegate
            function setModel() {
                if (status == Loader.Ready) item.model = subItemModel
            }
            onStatusChanged: setModel()
            onSubItemModelChanged: setModel()
        }

        ListView {
            width: 200
            height: parent.height
            model: nestedModel
            delegate: categoryDelegate
        }
    }

    ListModel {
        id: nestedModel
        ListElement {
            categoryName: "QSR"

            subItems: [
                ListElement { itemName: "KFC" },
                ListElement { itemName: "Mc Donalds" },
                ListElement { itemName: "Pizza Hut" },
                ListElement { itemName: "Brain's" }
            ]
        }

        ListElement {
            categoryName: "Drinks"
            subItems: [
                ListElement { itemName: "Pepsi" },
                ListElement { itemName: "Coke" },
                ListElement { itemName: "7up" },
                ListElement { itemName: "Bacardi" }
            ]
        }
    }

    Component {
        id: categoryDelegate

        Rectangle {
            id: categoryItem
            border.color: "black"
            border.width: 5
            color: "white"
            height: 50
            width: 200

            Text {
                anchors.centerIn: parent
                x: 15
                font.pixelSize: 24
                text: categoryName
            }

            MouseArea {
                anchors.fill: parent
                onClicked: {
                    if (subItemLoader.subItemModel != subItems)
                        subItemLoader.subItemModel = subItems
                    else
                        subItemLoader.subItemModel = null
                }
            }
        }

    }

    Component {
        id: subItemColumnDelegate
        Column {
            property alias model : subItemRepeater.model
            width: 200
            height: 500
            Repeater {
                id: subItemRepeater
                delegate: Rectangle {
                    color: "#cccccc"
                    height: 40
                    width: 200
                    border.color: "black"
                    border.width: 2

                    Text {
                        anchors.verticalCenter: parent.verticalCenter
                        x: 30
                        font.pixelSize: 18
                        text: itemName
                    }
                }
            }
        }
    }

} 
```

# android - udp 连接到设备

> ID：13138262
> 
> 赞同：0
> 
> 时间：2012-10-30T11:43:49.113
> 
> 标签：android, multithreading, sockets, udp, datagram

这是我的代码

```
package com.example.messenger;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketException;
import java.net.UnknownHostException;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

@SuppressLint("NewApi")
public class MainActivity extends Activity implements View.OnClickListener {
    Button Send;
    EditText IPAdresse;
    EditText TEXT;
    TextView RXtext,tstep,rstep;
    private static final int TIMEOUT_MS = 1000;
    private static final int server_port = 13011;

    @SuppressLint({ "NewApi", "NewApi", "NewApi" })
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy); 

        IPAdresse = (EditText) findViewById(R.id.etIPAdresse);
        IPAdresse.setText("192.168.2.32");
        TEXT = (EditText) findViewById(R.id.etTEXT);
        Send = (Button) findViewById(R.id.bSendaa);
        RXtext = (TextView) findViewById(R.id.tvRXtext);
        tstep = (TextView) findViewById(R.id.tvTstep);
        rstep = (TextView) findViewById(R.id.tvRstep);
        Send.setOnClickListener(this);

        new Thread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub

                String text;
                byte[] message = new byte[1500];
                DatagramSocket s;

                while(true){
                try {
                    s= new DatagramSocket(server_port);
                    rstep.setText("1");
                    s.setBroadcast(true);
                    rstep.setText("2");
                    s.setSoTimeout(TIMEOUT_MS);
                    rstep.setText("3");

                    while(true){
                        DatagramPacket p = new DatagramPacket(message, message.length);
                        rstep.setText("4");
                        //InetAddress test = InetAddress.getByName("192.168.1.101");
                        //rstep.setText("5");
                        //s.connect(test,12345);
                        //rstep.setText("6");
                        s.receive(p);
                        rstep.setText("xxx");
                        text = new String(message, 0, p.getLength());
                        RXtext.setText(text);
                    }
                } catch (SocketException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    rstep.setText("fail socket create");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    rstep.setText("fail receive");
                }

                }
            }
        });
        }

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch(arg0.getId()){
    case R.id.bSendaa:
        tstep.setText("1");
        String messageStr= TEXT.getText().toString();
        tstep.setText("2");

        DatagramSocket s;
        try {
            s = new DatagramSocket();
            tstep.setText("3");
            s.setBroadcast(true);
            tstep.setText("4");
            s.setSoTimeout(TIMEOUT_MS);
            tstep.setText("5");
            InetAddress local = InetAddress.getByName(IPAdresse.getText().toString());
            tstep.setText("6");
            int msg_length=messageStr.length();
            tstep.setText("7");
            byte[] message = messageStr.getBytes();
            tstep.setText("8");
            DatagramPacket p = new DatagramPacket(message, msg_length,local,server_port);
            tstep.setText("9");
            s.connect(local,server_port);
            tstep.setText("10");
            s.send(p);
            tstep.setText("sending complete");

        } catch (SocketException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            tstep.setText("sending failed");
        }
    }
}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

我的 android 手机的 Ip 是 192.168.2.32 ，我在 wifi 设置中看到了它。所以当我逐行调试的时候，我看到我的虚拟设备发送了数据包，但我不知道为什么我的手机收不到它。有谁能够帮助我？感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:01:26.800

现在它可以工作了，我没有`start()`为线程调用函数，我应该将 UI 从 更改 `runOnUiThread` 为

```
package com.example.messenger;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketAddress;
import java.net.SocketException;
import java.net.UnknownHostException;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

@SuppressLint("NewApi")
public class MainActivity extends Activity implements View.OnClickListener {
    Button Send;
    EditText IPAdresse;
    EditText TEXT;
    TextView RXtext,tstep,rstep;
    private static final int TIMEOUT_MS = 10000;
    private static final int server_port = 13011;
    String mMessage;

    @SuppressLint({ "NewApi", "NewApi", "NewApi" })
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy); 

        IPAdresse = (EditText) findViewById(R.id.etIPAdresse);
        IPAdresse.setText("192.168.2.32");
        TEXT = (EditText) findViewById(R.id.etTEXT);
        Send = (Button) findViewById(R.id.bSendaa);
        RXtext = (TextView) findViewById(R.id.tvRXtext);
        tstep = (TextView) findViewById(R.id.tvTstep);
        rstep = (TextView) findViewById(R.id.tvRstep);
        Send.setOnClickListener(this);

        new Thread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub

                String text;
                byte[] message = new byte[4];
                DatagramSocket s;

                try {
                    s= new DatagramSocket(server_port);
                    s.setSoTimeout(TIMEOUT_MS);

                    while(true){
                        try {
                            DatagramPacket p = new DatagramPacket(message, message.length);
                            s.receive(p);

                            mMessage = new String(message, 0, p.getLength());
                            runOnUiThread(new Runnable() {
                                @Override
                                public void run() {
                                    RXtext.setText(mMessage);
                                }
                            });
                        }
                        catch(Exception e) {
                            e.printStackTrace();
                        }

                    }
                } catch (SocketException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    //rstep.setText("fail socket create");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    //rstep.setText("fail receive");
                }
            }

        }).start();
    } 

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch(arg0.getId()){
    case R.id.bSendaa:
        String messageStr= TEXT.getText().toString();

        DatagramSocket s;
        try {
            s = new DatagramSocket();
            s.setBroadcast(true);
            s.setSoTimeout(TIMEOUT_MS);
            InetAddress local = InetAddress.getByName(IPAdresse.getText().toString());
            int msg_length=messageStr.length();
            byte[] message = messageStr.getBytes();
            DatagramPacket p = new DatagramPacket(message, msg_length,local,server_port);
            //s.connect(local,server_port);
            s.send(p);
            tstep.setText("sending complete");

        } catch (SocketException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            tstep.setText("sending failed");
        }
    }
}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

# c# - How to bind the repeater which is placed in Web User Control

> ID：13138263
> 
> 赞同：0
> 
> 时间：2012-10-30T11:43:49.663
> 
> 标签：c#, asp.net, webusercontrol

I have a webuser control having repeater control inside it like below.

```
 <asp:Repeater ID="repeaterInvoicesPaid" runat="server">
        </asp:Repeater> 
```

I just dragged it to my data.aspx page.Now i have a method inside data.cs C# file which is returning the data from table .i want to ask ,how to bind the repeater(which is inside the user control)?

it will be binded inside data.cs file or web user control's own C# file.?

And please tell me how to access the repeater id from user control inside data.cs file?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:05:38.943

至于问题1：您可以

*   暴露中继器（见问题 3）或
*   暴露数据源

我个人赞成最后一种选择

对于数据绑定选项，您可以选择公开内置的数据绑定方法，也可以在设置源时进行数据绑定。

可以像这样公开数据源

```
public static object RepeaterDataSource {
    get { return repeater.DataSource; }
    set { repeater.DataSource = value; }
} 
```

或创建一种方法来设置它，以允许在设置时进行操作，例如数据绑定。

* * *

问题2：实际绑定总是发生在转发器所在的地方。如果您需要一个 OnItemDataBound 处理程序，那么该处理程序将位于用户控件的代码隐藏中，无论您从何处绑定它。但是，您也可以公开它，但我认为没有理由这样做。

* * *

问题 3：如果你想要 id，那么我假设客户 id。你可以用这样的东西得到它

```
public static string RepeaterClientID {
    get { return theRepeater.ClientID; }
} 
```

虽然我不确定这就是你的真正意思。如果你想要一个参考，那么

```
public static Repeater TheRepeater {
    get { return theRepeater; }
    set { theRepeater = value; }
} 
```

* * *

最后，接受更多问题的答案，或完全删除它们。你的录取率很低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:13:12.360

Create object of user control

UserControl usr = Page.FindControl("usercontrolID"); Repeator rept = usr.FindControl("repeatorControlID");

rept.DataScourse= Datatbale; rept.DataBind();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:45:49.523

您始终可以在返回中继器的用户控件中创建一个公共属性。

# c# - C# outlook 2010 add-in install all users doesn't load

> ID：13138265
> 
> 赞同：2
> 
> 时间：2012-10-30T11:43:51.350
> 
> 标签：c#, outlook, vsto, outlook-addin, outlook-2010

I am working on a Outlook 2010 add-in. I have already check this blog. [Deploying your VSTO add-ins to All Users (Saurabh Bhatia)](http://blogs.msdn.com/b/vsto/archive/2010/03/08/deploying-your-vsto-add-ins-to-all-users-saurabh-bhatia.aspx)

My test environment is the next Win7 64bit with OU2010 32bit. So I registry my add-in into HKLM to allusers install in this way.

> Unlike the HKCU registry hive, the HKLM registry hive for Office add-ins is redirected on a 64-bit Windows OS. So if you are trying to register an add-in with 32-bit version of Office running on a 64-bit OS, the add-ins registry will be under the WOW6432Node. The 32-bit Office running on 64-bit OS will always load the add-ins listed under this key.
> 
> HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Office\application name\Addins\add-in ID

After install I check HKLM, and everything is fine with the registered values(like loadbehavior, and manifest). But in HKCU this registry values doesn't exists. If i put them manually the add-in load without any problem.

What is the problem?

My **registry path** is the next:

> HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Office\Outlook\Addins\Myaddin

**Manifest value**: `[TARGETDIR]Myaddin.vsto|vstolocal`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:59:44.607

您的**清单值**应该是`file:///[TARGETDIR]Myaddin.vsto|vstolocal`（*[VSTO Fastpath 格式](http://blogs.msdn.com/b/vsto/archive/2010/11/30/performance-improvements-coming-soon-to-a-service-pack-near-you-stephen-peters.aspx)*）。您拥有的**注册表路径**[对于 x64 OS 上的 x86 Office 是正确的](https://stackoverflow.com/a/8606087/175679)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T15:53:09.970

您应该检查您正在创建的注册表的名称。我在同一个问题上被困了好几天，后来发现我在 DWORD“loadbehavior”而不是“LoadBehavior”上有错字

# java - How do I know if an item of an auto-complete decorated JComboBox is mouse clicked?

> ID：13138266
> 
> 赞同：6
> 
> 时间：2012-10-30T11:43:59.340
> 
> 标签：java, swing, autocomplete, jcombobox, swingx

I'm using the [SwingX](http://swingx.java.net/) `AutoCompleteDecorator` for a `JComboBox`. The autocomplete feature works beautifully...

But I have trouble to identify *the moment of the **final** user selection*; to persist my data seldom.

Let me try to explain: The combobox fires an "comboBoxChanged"-`ActionEvent` for every selection. I have to ignore these events while the user is typing characters and the combobox is auto-matching and selecting items. If the user hits the return-key an "comboBoxEdited"-`ActionEvent` is generated and I can save the selected value. Great ;-)

If the mouse is used to open the `JComboBox`-PopUp and to select an item, the only fired event is a "comboBoxChanged"-`ActionEvent` (like when auto-matching or selecting an item with the cursor-keys). The mouse-clicked-Event is consumed somehow!? That's why I can't identify the *final* mouse selection.

How can I figure this out? My failed attempts to listen for the mouseClicked-Event are documented in this SSCCE:

```
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import org.jdesktop.swingx.autocomplete.AutoCompleteDecorator;

public class SearchForThePopUpMouseClick extends JPanel
{
  private JComboBox<String> comboBox;

  public SearchForThePopUpMouseClick()
  {
    comboBox = new JComboBox<String>(new String[] { "Anna", "Marc", "Maria", "Marten", "Peter" });
    add(comboBox);
    add(new JTextField("textfield to click"));

    AutoCompleteDecorator.decorate(comboBox);

    comboBox.addActionListener(new ActionListener()
    {
      @Override
      public void actionPerformed(ActionEvent e)
      {
        System.out.println("Action Event with '" + e.getActionCommand() + " " + e.getID() + "'");
      };
    });

    ((Component) comboBox.getUI().getAccessibleChild(comboBox, 0)).addMouseListener(new MouseListener()
    {
      @Override
      public void mouseReleased(MouseEvent e)
      {
        System.out.println(e);
      }
      @Override
      public void mousePressed(MouseEvent e)
      {
        System.out.println(e);
      } 
      @Override
      public void mouseExited(MouseEvent e)
      {
        System.out.println(e);
      }
      @Override
      public void mouseEntered(MouseEvent e)
      {
        System.out.println(e);
      }
      @Override
      public void mouseClicked(MouseEvent e)
      {
        System.out.println(e);
      }
    });
  }

  public static void main(String[] args) throws Exception
  {
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    SwingUtilities.invokeLater(new Runnable()
    {
      @Override
      public void run()
      {
        SearchForThePopUpMouseClick autoCompletePanel = new SearchForThePopUpMouseClick();
        JFrame frame = new JFrame("SwingX Autocomplete Example");
        frame.add(autoCompletePanel);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
      }
    });
  }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T12:56:08.347

A comboBox has no notion of *final* selection: all selections have equal semantic weight independent on their trigger (mouse, keyboard navigation, programmatically, selection by first letter in core) and fire an actionEvent. Same behaviour for plain and decorated comboBox.

That's exactly what you need in most contexts: react to a selection always as if it were *final* (whatever that might mean)

If in your case you **really** want to regard a selection triggered by a mouseEvent as more final than those triggered by anything else (again: that's typically **not** recommended for a good user experience, so be very, very careful in your evaluation) you can check the modifiers returned by the actionEvent:

```
if ((e.getModifiers() & InputEvent.BUTTON1_MASK) != 0) {
    // triggered by mouse
} 
```

**Edit**

Seeing the use cases (thanks for providing them!) in the comments, realized that my beware partly barked at the wrong tree :-)

In this context, the mouse- vs. keyboard gesture have indeed different semantics

*   keyboard: typing in the editor as well as navigating in the popup denote the process to build the final selection, with a special key (enter) denoting a commit
*   mouse: clicking in the popup is both selecting and commit

JComboBox doesn't support that use-case optimally, firing too much. That's problem even swing-internally, f.i. when using a comboBox as CellEditor. That's partly fixed by a magic clientProperty:

```
public DefaultCellEditor(final JComboBox comboBox) {
    editorComponent = comboBox;
    comboBox.putClientProperty("JComboBox.isTableCellEditor", Boolean.TRUE); 
```

Detecting that property, the BasicComboBoxUI (actually the BasicComboPopup) keyStrokes navigation selects in the list of the popup only, defering the synch of the listSelection to the comboSelection until committed via enter. It's partial because the look-ahead (aka: typing and selecting by first letter) still selects (and thereby committing) immediately in the combo.

Short summary: there already is a swing-internal use-case, which leads to an already available swingx-internal solution for autoComplete editing in tables - a class named ComboBoxCellEditor. Can be used stand-alone also:

```
AutoCompleteDecorator.decorate( withEditor );
ComboBoxCellEditor editor = new ComboBoxCellEditor(withEditor);
CellEditorListener listener = new CellEditorListener() {

    @Override
    public void editingStopped(ChangeEvent e) {
        // do commit stuff
    }

    @Override
    public void editingCanceled(ChangeEvent e) {
    }
};
editor.addCellEditorListener(listener);
contentPane.add(withEditor, BorderLayout.SOUTH); 
```

# c# - Hexadecimal to BigInteger conversion

> ID：13138267
> 
> 赞同：1
> 
> 时间：2012-10-30T11:44:01.077
> 
> 标签：c#, hex, biginteger

What is idiomatic way to convert standard hexadecimal string (like "0x0123") to BigInteger in C#?

What I tried requires removing the hex prefix manually:

```
using System;
using System.Numerics;
using System.Globalization;

namespace TestHex
{
    class Program
    {
        static void Main(string[] args)
        {
            BigInteger A;
// it does not work
//            A = BigInteger.Parse("0x0123");
// it works, but without hex prefix
            A = BigInteger.Parse("123", NumberStyles.AllowHexSpecifier);
            Console.WriteLine(A);
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:00:24.623

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/vstudio/dd268285.aspx)，*习惯用法*是只接受十六进制字符串而不`0x`作为输入，然后通过输出前缀来欺骗用户`0x`：

```
public class Example
{
    public static void Main()
    {
        string[] hexStrings = { "80", "E293", "F9A2FF", "FFFFFFFF", 
                                "080", "0E293", "0F9A2FF", "0FFFFFFFF",  
                                "0080", "00E293", "00F9A2FF", "00FFFFFFFF" };
        foreach (string hexString in hexStrings)
        {
            BigInteger number = BigInteger.Parse(
                hexString,
                NumberStyles.AllowHexSpecifier);
            Console.WriteLine("Converted 0x{0} to {1}.", hexString, number);
        }         
    }
}
// The example displays the following output: 
//       Converted 0x80 to -128\. 
//       Converted 0xE293 to -7533\. 
//       Converted 0xF9A2FF to -417025\. 
//       Converted 0xFFFFFFFF to -1\. 
//       Converted 0x080 to 128\. 
//       Converted 0x0E293 to 58003\. 
//       Converted 0x0F9A2FF to 16360191\. 
//       Converted 0x0FFFFFFFF to 4294967295\. 
//       Converted 0x0080 to 128\. 
//       Converted 0x00E293 to 58003\. 
//       Converted 0x00F9A2FF to 16360191\. 
//       Converted 0x00FFFFFFFF to 4294967295. 
```

这真是一个垃圾成语。我会发明适合您用例的您自己的成语。

# asp.net - 即使 ListBox 的 AutoPostBack 设置为 false，ListBox 选择更改也会回发

> ID：13138270
> 
> 赞同：1
> 
> 时间：2012-10-30T11:44:20.323
> 
> 标签：asp.net

问题在标题中描述。当我专门将 ListBox 的 AutoPostBack 属性设置为 false 时，它​​也会进行回发，尽管默认情况下它应该是这样的。ListBox 选择模式设置为多个。

有一个类似的[问题](https://stackoverflow.com/questions/4066977/firing-selectedindexchanged-event-but-the-listboxs-autopostback-property-is-f)，但背景不同。

我错过了什么？这是一些众所周知的问题吗？

感谢您的回复，如果您需要确切的代码，请告诉您

编辑：

这是aspx页面。Codebehind 要大得多，因为这个页面是重定向的目标，请告诉你是否需要从那里获得更多信息。

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="ReportsPreviewViewAddParams.aspx.cs" Inherits="Admin_ReportsPreviewViewAddParams" %>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
</head>
<body>
    <form runat="server">

        <asp:HiddenField ID="SqlSelect" runat="server" />
        <asp:HiddenField ID="SqlColumnSize" runat="server" />
        <asp:HiddenField ID="SqlGroup" runat="server" />
        <asp:HiddenField ID="SqlOrder" runat="server" />
        <asp:HiddenField ID="PageSize" runat="server" />
        <asp:HiddenField ID="SumColumns" runat="server" />

        <asp:Repeater ID="RepeaterInput" runat="server" OnItemDataBound="OnRepeaterItemDataBound" >
            <HeaderTemplate>
                <table>
                <tr><th>
                    <asp:Label ID="LabelHeader" runat="server" Text='<%# Webcom.Configurator.Core.MLPersistentManager.GetKeyValue("Admin.Reports.EnterParams") %>' />
                </th></tr>
            </HeaderTemplate>
            <ItemTemplate>
                <tr>
                    <td>
                        <asp:TextBox ID="TextBoxValueOne" runat="server" AutoPostBack="false" />
                        <asp:ListBox ID="ListBoxControlOne" runat="server" AutoPostBack="false" />
                    </td>
                    <td><asp:Label ID="LabelOperatorOne" runat="server" /></td>
                    <td><asp:Label ID="LabelColumnName" runat="server" /></td>
                    <td><asp:Label ID="LabelOperatorTwo" runat="server" /></td>
                    <td>
                        <asp:TextBox ID="TextBoxValueTwo" runat="server" AutoPostBack="false" />
                        <asp:ListBox ID="ListBoxControlTwo" runat="server" AutoPostBack="false" />
                    </td>
                </tr>
            </ItemTemplate>
            <FooterTemplate>
                </table>
            </FooterTemplate>
        </asp:Repeater>

        <asp:Button ID="buttonSubmit" runat="server" Visible="true" OnClick="OnSubmit" />

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:12:37.750

转发器没有跟踪转发器内控件发生的自动回发的方法。这可能会为您提供一个线索：

[在转发器中处理自动回发](http://weblogs.asp.net/rternier/archive/2006/04/04/handling-autopostbacks-within-a-repeater-checkbox-style.aspx)

You could try initializing the AutoPostBack property early in the code-behind page life-cycle, perhaps in Page Load method (after page controls have been created):

```
ListBox ListBoxControlOne = (ListBox)RepeaterInput.FindControl("ListBoxControlOne");
ListBoxControlOne.AutoPostBack = false; 
```

# delphi - Lazarus Free Pascal / Delphi - RunError 211

> ID：13138271
> 
> 赞同：1
> 
> 时间：2012-10-30T11:44:24.203
> 
> 标签：delphi, postgresql, runtime-error, freepascal, lazarus

我正在尝试将我的 Windows XP 程序（Lazarus）连接到我的 Ubuntu postgres 服务器。

当 Lazarus 程序运行时，它似乎编译得很好，但我得到了这个错误：

> 项目...引发异常类“RunError(211)”。

然后它终止执行（我没有看到任何输出），并打开一个文件**customform.inc**。在该文件中，它显示了`procedure TCustomForm.DoCreate;`突出显示一行的过程：`if Assigned(FOnCreate) then FOnCreate(Self);`

我相信这是系统的文件之一。

我从来没有看到任何输出。这可能是什么？谢谢！

更多信息：

我已将错误范围缩小到这一行：

```
 dbQuery_Menu.SQL.Text:='Select * From "tblMenus"';

  dbQuery_Menu.Open; 
```

执行 OPEN 语句时会触发异常。

顺便说一句，dbQuery_Menu 被定义为 TSQLQuery 组件。

没头没脑！:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:11:00.290

尝试调用抽象方法时出现运行错误 211。从有关 FreePascal/Lazarus 运行时错误的更多信息中查看此[链接。](http://community.freepascal.org:10000/docs-html/user/userch14.html)

由于您说所有内容都由代码完成并且您没有可视组件，因此问题可能在于您的代码试图使用尚未覆盖 Open 方法的祖先组件。您应该能够通过使用正确的后代组件来解决此问题。

尽管我**强烈**建议避免这种情况，但另一种可能性是自己覆盖 Open 方法。应该避免这种情况，因为如果您使用的是祖先组件，那么您可能必须覆盖更多的抽象方法。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T05:23:57.683

将近5天后，我找到了答案。非常感谢所有为他们的想法做出贡献的人，特别**是 RRUZ**、**RBA**和**Guillem Vicens**。还有其他相关的帖子都与让 FIRST Lazarus 程序与 PostgreSQL 一起工作有关。

概括。

1.  我在这里犯的最大错误是我使用了`TSQLConnection`组件。不要这样做。而是使用`TPQConnection`.

2.  一切都是通过代码完成的。我们没有使用顶部选项卡中的任何可拖动组件。

3.  至少不要依赖 Lazarus 文档 (wiki) 来处理 PG DB。它已经过时了。其中一些示例可能会产生误导。

4.  确保这些字段具有一些默认值。例如，如果布尔字段没有设置真假 (t/f)，这可能会导致错误。

就是这样！我希望许多 postgres+Lazarus 新手会发现这很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T14:33:12.617

从[这里](http://www.network-theory.co.uk/docs/postgresql9/vol2/SQLSTATEvsSQLCODE.html)- [http://www.network-theory.co.uk/docs/postgresql9/vol2/SQLSTATEvsSQLCODE.html](http://www.network-theory.co.uk/docs/postgresql9/vol2/SQLSTATEvsSQLCODE.html) - -211 (ECPG_CONVERT_BOOL) 这意味着主机变量是 bool 类型，数据库中的数据既不是 ' t' 也不是 'f'。(SQLSTATE 42804)

# c# - How should I use Task When All?

> ID：13138272
> 
> 赞同：3
> 
> 时间：2012-10-30T11:44:23.717
> 
> 标签：c#, task-parallel-library, async-await

I've got the follow code, I just need to make sure this is the correct way to do this.. It works and everything but isn't as quick as Id expect.. I've timed each individual call and the longest is no where near the time it takes it takes to run.

```
public async Task<Result[]> DoSomethingGoodAsync()
{
    List<Product> productList = getproducts();

    IEnumerable<Task<Result>> list = 
        from p in productList select DoSomethingAsync(p);

    Task<Result>[] slist = list.ToArray();

    return await Task.WhenAll(slist);
} 
```

Now my question again, is this correct? Is there a better and more efficient way to do this? DoSomethingAsync is an awaitable method also which calls another async method.

Edit: My question.. Is this the correct way to build up a collection of awaitable methods that I want to execute together?

Inside DoSomethingAysnc()

```
 scrapeResult = await UrlScraper.ScrapeAsync(product.ProductUrl);

   model = this.ProcessCheckStock(model, scrapeResult, product); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:08:02.233

似乎`getproducts`返回一个可分配给的类型[`IList<T>`](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)。这意味着`getproducts`在您调用`DoSomethingAsync`从`getproducts`.

取决于生产每个项目和实现该集合需要多长时间，这很可能产生最大的影响。

也就是说，您应该更改`getproducts`方法以返回[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)实现。但是您需要做的不仅仅是更改返回类型，还需要删除具体化（很可能是对 的调用[`ToList`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)）并[`yield`](http://msdn.microsoft.com/en-us/library/vstudio/9k7k7cf0.aspx)改用它。

# iphone - Save images to NSLibraryDirectory in a particular folder

> ID：13138275
> 
> 赞同：0
> 
> 时间：2012-10-30T11:44:36.633
> 
> 标签：iphone, directory

I want to save the images in NSLibraryDirectory, the code i am using is replacing image, when next image is saved.

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory,        NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *savedImagePath = [documentsDirectory  stringByAppendingPathComponent:@"images.doc"];
UIImage *image = [arrayImages objectAtIndex:0];
NSData *imageData = UIImagePNGRepresentation(image);
[imageData writeToFile:savedImagePath atomically:NO]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T11:59:27.117

```
 NSMutableArray *imag = [[NSMutableArray alloc]initWithObjects:[UIImage imageNamed:@"1333681269.jpeg"],[UIImage imageNamed:@"image001-794043.jpeg"],[UIImage imageNamed:@"Circle.png"], nil];

 for(int i=0;i<[imag count];i++)
 {
       NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
       NSString *documentsDirectory = [paths objectAtIndex:0];
       NSString *imageName = [NSString stringWithFormat:@"savedImage%i.png",i];
       NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:imageName];
       NSData *imageData = UIImagePNGRepresentation([imag objectAtIndex:i]);
       [imageData writeToFile:savedImagePath atomically:NO];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:41:13.510

**每次您必须使用**尚未使用的不同名称。因此您必须每次更改文件名。

如果您想**在应用程序重新启动后**继续工作，请将索引值保存到**NSUserDefaults**

**.h 文件**

```
int index; 
```

更改您的代码，如 .m

```
index = [[NSUserDefaults standardUserDefaults] integerForKey:@"HighScore"];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"NewFolder"];
NSString *dynamicimagename = [[@"/images" stringByAppendingFormat:@"%d",[[NSUserDefaults standardUserDefaults] integerForKey:@"HighScore"]] stringByAppendingFormat:@".doc"];
NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:dynamicimagename];
UIImage *image = [arrayImages objectAtIndex:0];
NSData *imageData = UIImagePNGRepresentation(image);
BOOL isWritten = [imageData writeToFile:savedImagePath atomically:NO];

index++;
[[NSUserDefaults standardUserDefaults] setInteger:index forKey:@"HighScore"]; 
```

# android - Speedometer Animation Android

> ID：13138277
> 
> 赞同：0
> 
> 时间：2012-10-30T11:44:46.173
> 
> 标签：android, android-animation

I have 8 images which are placed circularly on the dial which resembles a speedometer with first image placed at the position which is similar to 0 and the last image on the position similar to 200 or the last value of the speedometer. Now i want to rotate the needle which is fixed at the base and moves from the first image to last.While the needle rotates,as it moves over the images,the images changes. The needle moves from first image to the last and moves back to first image.! Have removed the sensor's code as i didnt wanted and remove the background and major chunk added a new method called `reverse()` for reversing the movement not able to find where i am going wrong. it just execute the loop once and comes out.

```
public final class Thermometer extends View  
{
    private static final String TAG = Thermometer.class.getSimpleName();
    private Handler handler;

    // drawing tools

    private Paint scalePaint;
    private RectF scaleRect;

    private Paint logoPaint;
    private Bitmap logo;
    private Matrix logoMatrix;
    private float logoScale;

    private Paint handPaint;
    private Path handPath;
    private Paint handScrewPaint;

    private Paint backgroundPaint;
    // end drawing tools

    private Bitmap background; // holds the cached static part

    // scale configuration
    private static final int totalNicks = 100;
    private static final float degreesPerNick = 360.0f / totalNicks;
    private static final int centerDegree = 40; // the one in the top center (12
                                                // o'clock)
    private static final int minDegrees = -30;
    private static final int maxDegrees = 110;

    // hand dynamics -- all are angular expressed in F degrees
    private boolean handInitialized = false;
    private float handPosition = minDegrees;
    private float handTarget = minDegrees;
    private float handVelocity = 0.0f;
    private float handAcceleration = 0.0f;
    private long lastHandMoveTime = -1L;

    public Thermometer(Context context) 
    {
        super(context);
        init();
    }

    public Thermometer(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
        init();
    }

    public Thermometer(Context context, AttributeSet attrs, int defStyle) 
    {
        super(context, attrs, defStyle);
        init();
    }

    @Override
    protected void onRestoreInstanceState(Parcelable state) 
    {
        Bundle bundle = (Bundle) state;
        Parcelable superState = bundle.getParcelable("superState");
        super.onRestoreInstanceState(superState);

        handInitialized = bundle.getBoolean("handInitialized");
        handPosition = bundle.getFloat("handPosition");
        handTarget = bundle.getFloat("handTarget");
        handVelocity = bundle.getFloat("handVelocity");
        handAcceleration = bundle.getFloat("handAcceleration");
        lastHandMoveTime = bundle.getLong("lastHandMoveTime");
    }

    @Override
    protected Parcelable onSaveInstanceState() 
    {
        Parcelable superState = super.onSaveInstanceState();

        Bundle state = new Bundle();
        state.putParcelable("superState", superState);
        state.putBoolean("handInitialized", handInitialized);
        state.putFloat("handPosition", handPosition);
        state.putFloat("handTarget", handTarget);
        state.putFloat("handVelocity", handVelocity);
        state.putFloat("handAcceleration", handAcceleration);
        state.putLong("lastHandMoveTime", lastHandMoveTime);
        return state;
    }

    private void init() 
    {
        handler = new Handler();
        initDrawingTools();
    }

    private void initDrawingTools() 
    {
        // the linear gradient is a bit skewed for realism

        logoPaint = new Paint();
        logoPaint.setFilterBitmap(true);
        logo = BitmapFactory.decodeResource(getContext().getResources(),R.drawable.logo);
        logoMatrix = new Matrix();
        logoScale = (1.0f / logo.getWidth()) * 0.3f;

        logoMatrix.setScale(logoScale, logoScale);

        handPaint = new Paint();
        handPaint.setAntiAlias(true);
        handPaint.setColor(0xff392f2c);
        handPaint.setShadowLayer(0.01f, -0.005f, -0.005f, 0x7f000000);
        handPaint.setStyle(Paint.Style.FILL);

        handPath = new Path();
        handPath.moveTo(0.5f, 0.5f + 0.2f);
        handPath.lineTo(0.5f - 0.010f, 0.5f + 0.2f - 0.007f);
        handPath.lineTo(0.5f - 0.002f, 0.5f - 0.32f);
        handPath.lineTo(0.5f + 0.002f, 0.5f - 0.32f);
        handPath.lineTo(0.5f + 0.010f, 0.5f + 0.2f - 0.007f);
        handPath.lineTo(0.5f, 0.5f + 0.2f);
        handPath.addCircle(0.5f, 0.5f, 0.025f, Path.Direction.CW);

        handScrewPaint = new Paint();
        handScrewPaint.setAntiAlias(true);
        handScrewPaint.setColor(0xff493f3c);
        handScrewPaint.setStyle(Paint.Style.FILL);

        backgroundPaint = new Paint();
        backgroundPaint.setFilterBitmap(true);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
    {
        Log.d(TAG, "Width spec: " + MeasureSpec.toString(widthMeasureSpec));
        Log.d(TAG, "Height spec: " + MeasureSpec.toString(heightMeasureSpec));

        int widthMode = MeasureSpec.getMode(widthMeasureSpec);
        int widthSize = MeasureSpec.getSize(widthMeasureSpec);

        int heightMode = MeasureSpec.getMode(heightMeasureSpec);
        int heightSize = MeasureSpec.getSize(heightMeasureSpec);

        int chosenWidth = chooseDimension(widthMode, widthSize);
        int chosenHeight = chooseDimension(heightMode, heightSize);

        int chosenDimension = Math.min(chosenWidth, chosenHeight);

        setMeasuredDimension(chosenDimension, chosenDimension);
    }

    private int chooseDimension(int mode, int size) 
    {
        if (mode == MeasureSpec.AT_MOST || mode == MeasureSpec.EXACTLY) 
        {
            return size;
        } 
        else 
        { // (mode == MeasureSpec.UNSPECIFIED)
            return getPreferredSize();
        }
    }

    // in case there is no size specified
    private int getPreferredSize() 
    {
        return 300;
    }

    private void drawScale(Canvas canvas) 
    {
        canvas.drawOval(scaleRect, scalePaint);

        canvas.save(Canvas.MATRIX_SAVE_FLAG);
        for (int i = 0; i < totalNicks; ++i) 
        {
            float y1 = scaleRect.top;
            float y2 = y1 - 0.020f;
            canvas.drawLine(0.5f, y1, 0.5f, y2, scalePaint);
            if (i % 5 == 0) 
            {
                int value = nickToDegree(i);
                if (value >= minDegrees && value <= maxDegrees) 
                {
                    String valueString = Integer.toString(value);
                    canvas.drawText(valueString, 0.5f, y2 - 0.015f, scalePaint);
                }
            }
            canvas.rotate(degreesPerNick, 0.5f, 0.5f);
        }
        canvas.restore();
    }

    private int nickToDegree(int nick) 
    {
        int rawDegree = ((nick < totalNicks / 2) ? nick : (nick - totalNicks)) * 2;
        int shiftedDegree = rawDegree + centerDegree;
        return shiftedDegree;
    }

    private float degreeToAngle(float degree) 
    {
        return (degree - centerDegree) / 2.0f * degreesPerNick;
    }

    private void drawLogo(Canvas canvas) 
    {
        canvas.save(Canvas.MATRIX_SAVE_FLAG);
        canvas.translate(0.5f - logo.getWidth() * logoScale / 2.0f,0.5f - logo.getHeight() * logoScale / 2.0f);
        int color = 0x00000000;
        float position = getRelativeTemperaturePosition();
        if (position < 0) 
        {
            color |= (int) ((0xf0) * -position); // blue
        } 
        else 
        {
            color |= ((int) ((0xf0) * position)) << 16; // red
        }
        Log.d(TAG, "*** " + Integer.toHexString(color));
        LightingColorFilter logoFilter = new LightingColorFilter(0xff338822,color);
        logoPaint.setColorFilter(logoFilter);

        canvas.drawBitmap(logo, logoMatrix, logoPaint);
        canvas.restore();
    }

    private void drawHand(Canvas canvas) 
    {
        if (handInitialized) 
        {
            float handAngle = degreeToAngle(handPosition);
            canvas.save(Canvas.MATRIX_SAVE_FLAG);
            canvas.rotate(handAngle, 0.5f, 0.5f);
            canvas.drawPath(handPath, handPaint);
            canvas.restore();
            canvas.drawCircle(0.5f, 0.5f, 0.01f, handScrewPaint);
        }
    }

    private void drawBackground(Canvas canvas) 
    {
        if (background == null) 
        {
            Log.w(TAG, "Background not created");
        } 
        else 
        {
            canvas.drawBitmap(background, 0, 0, backgroundPaint);
        }
    }

    @Override
    protected void onDraw(Canvas canvas) 
    {
        drawBackground(canvas);
        float scale = (float) getWidth();
        canvas.save(Canvas.MATRIX_SAVE_FLAG);
        canvas.scale(scale, scale);
        drawLogo(canvas);
        drawHand(canvas);
        canvas.restore();
        moveHand();
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) 
    {
        Log.d(TAG, "Size changed to " + w + "x" + h);
        regenerateBackground();
    }

    private void regenerateBackground() 
    {
        // free the old bitmap
        if (background != null) 
        {
            background.recycle();
        }

        background = Bitmap.createBitmap(getWidth(), getHeight(),Bitmap.Config.ARGB_8888);
        Canvas backgroundCanvas = new Canvas(background);
        float scale = (float) getWidth();
        backgroundCanvas.scale(scale, scale);

    }

    private boolean handNeedsToMove() 
    {
        return Math.abs(handPosition - handTarget) > 0.01f;
    }

    private void moveHand() 
    {
        setHandTarget(maxDegrees);
        if (!handNeedsToMove()) 
        {
            return;
        }
        if (lastHandMoveTime != -1L) 
        {
            long currentTime = System.currentTimeMillis();
            float delta = (currentTime - lastHandMoveTime) / 1500.0f;
            float direction = Math.signum(handVelocity);
            if (Math.abs(handVelocity) < 90.0f) 
            {
                handAcceleration = 5.0f * (handTarget - handPosition);
            } 
            else 
            {
                handAcceleration = 0.0f;
            }
            handPosition += handVelocity * delta;
            handVelocity += handAcceleration * delta;
            if ((handTarget - handPosition) * direction < 0.01f * direction) 
            {
                handPosition = handTarget;
                handVelocity = 0.0f;
                handAcceleration = 0.0f;
                lastHandMoveTime = -1L;
            } 
            else 
            {
                Log.i("inside ","direction else loop");
                lastHandMoveTime = System.currentTimeMillis();
            }
            invalidate();
        }   
        else 
        {
            Log.i("inside ","direction first final else loop");
            lastHandMoveTime = System.currentTimeMillis();
            moveHand();
        }
        if(handPosition==maxDegrees)
        {
            reverse();
        }
    }

    public void reverse()
    {
        handAcceleration=1.0f;
        Log.i("Hand Velocity",Float.toString(handVelocity));
        Log.i("Inside","next loop");
        setHandTarget(minDegrees);
        if (!handNeedsToMove()) 
        {
            return;
        }
        if (lastHandMoveTime != -1L) 
        {
            long currentTime = System.currentTimeMillis();
            float delta = (currentTime -lastHandMoveTime) / 1500.0f;
            float direction = Math.signum(handVelocity);
            if (Math.abs(handVelocity) <90.0f) 
            {
                handAcceleration = 5.0f * (handPosition+handTarget);
                Log.i("Hand Acceleration",Float.toString(handAcceleration));
            }       
            else 
            {
                handAcceleration = 0.0f;
            }   
            handPosition -= handVelocity * delta;
            handVelocity -= handAcceleration *delta;
            if ((handPosition + handTarget) * direction < 0.01f * direction) 
            {
                handPosition = handTarget;
                handVelocity = 0.0f;
                handAcceleration = 0.0f;
                lastHandMoveTime =-1L; 
            } 
            else 
            {
                lastHandMoveTime = System.currentTimeMillis();
            }   
            invalidate();
        } 
        else 
        {
            lastHandMoveTime = System.currentTimeMillis();
            reverse();
        }   
    }

    private float getRelativeTemperaturePosition() 
    {
        if (handPosition < centerDegree) 
        {
            return -(centerDegree - handPosition)/ (float) (centerDegree - minDegrees);
        } 
        else 
        {
            return (handPosition - centerDegree)/ (float) (maxDegrees - centerDegree);
        }
    }

    private void setHandTarget(float temperature) 
    {
        if (temperature < minDegrees) 
        {
            temperature = minDegrees;
        } 
        else if (temperature > maxDegrees) 
        {
            temperature = maxDegrees;
        }
        handTarget = temperature;
        handInitialized = true;
        invalidate();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:39:51.437

只需将手的位置初始化为最大程度，并在逆时针旋转的`moveHand()`方法`setHandTarget(minDegrees)`中它对我有用。

对于顺时针旋转，只需做相反的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-19T14:51:47.077

我已经解决了在主要活动中插入这个的手显示和移动：

```
 View termometro = (View)findViewById(R.id.termometro);
    termometro.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

它与硬件加速有关

# android - 如何创建 Google Play 商店等搜索功能

> ID：13138280
> 
> 赞同：0
> 
> 时间：2012-10-30T11:44:53.153
> 
> 标签：android

我将如何创建像 Google 一样在 Play 商店中实现的搜索功能？我想要完全相同的功能 - 单击屏幕顶部的搜索图标，然后显示一个 inputText 字段，其中包含覆盖在后台应用程序顶部的建议。

请帮忙！

贾斯汀。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:08:08.763

对于搜索功能您可以使用`AutoCompleteTextView`

```
ArrayList<String> mcontact_arraylist = new ArrayList<String>();

ArrayAdapter<String> mcontactarray = new ArrayAdapter<String>(
            getApplicationContext(),
            R.layout.row_text, mcontact_arraylist);
            mAutoCompleteText.setAdapter(mcontactarray); 
```

这将帮助您实现上述功能。

# paypal - 已验证的 PayPal IPN 响应仅以美元货币

> ID：13138289
> 
> 赞同：1
> 
> 时间：2012-10-30T11:45:26.810
> 
> 标签：paypal, paypal-ipn

我为我的网站使用了 PayPal IPN。我的网站采用多种货币和语言。我已将 PayPal IPN 与沙箱集成以进行测试，当我使用美元货币付款时，IPN 响应为 VERIFIED，状态也是 payment_status=Completed。8 已验证 0

但是，当我使用欧元货币登录并付款时，IPN 响应为无效，但状态为 payment_status=Completed。

7 无效 0

我不明白这里有什么问题，所以请你帮帮我吗？

如果有人知道这个解决方案并回复我，那真的很有帮助。谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:55:08.817

我猜这个问题来自这样一个事实，即在您的侦听器代码中的某个地方，您期望 $valid_currency 以“USD”的形式返回，要解决这个问题，创建一个包含您接受付款的所有有效货币的数组，然后检查 mc_currency 是当它通过 IPN 传递时，在该数组中。

```
$valid_currency = array("USD", "GBP", "EUR");
if(!in_array($_POST['mc_currency'], $valid_currency) {
    //Not a valid currency according to your list
} else {
    //Is a valid currency according to your list
} 
```

# file - 在 Matlab 中处理文件序列的输出

> ID：13138293
> 
> 赞同：0
> 
> 时间：2012-10-30T11:45:30.623
> 
> 标签：file, matlab, sequence

**编辑 3**

你好！我遇到了矩阵尺寸的问题，但我已经解决了。现在我的问题是我想对同一个文件夹中的大量文件执行相同的操作，并且我想将输出值写在 text.txt 的单独行上。使用第一个它可以工作，但它不会“写入”到“文本”，其余的。有什么不对？

```
myPath = 'C:\EX\'; 
a= dir (fullfile(myPath,'*.DIM')); 
fileNames = { a.name };

% Rename files
for k = 1:length(fileNames)
     newFileName = [fileNames{k}(1:2) fileNames{k}(4:6) '.txt']; 
     movefile([myPath fileNames{k}], [myPath newFileName]);
end

 filePattern=fullfile( myPath,'*.txt');
 txtFiles= dir(filePattern);    
   for k = 1:length(txtFiles)
    baseFileName=txtFiles(k).name;
    fullFileName= fullfile(myPath,baseFileName);
    fid=fopen(fullFileName, 'r');
    for i = 1:18
        m{i} = fgetl(fid);
    end
    result2 = m{18};
    result2b= result2([12:19]);

    fid=fopen(fullFileName, 'r');
    for i = 1:30
    m{i} = fgetl(fid);
    end
    result3 = m{30};
    result3b= result3([12:19]);

    fid=fopen(fullFileName, 'r');
    for i = 1:31
    m{i} = fgetl(fid);
    end
    result4 = m{31};
    result4b= result4([12:20]);

    fid=fopen(fullFileName, 'r');
    for i = 1:19
    m{i} = fgetl(fid);
    end
    result5 = m{19};
    result5b= result5([12:20]);

  text= {baseFileName, result2b, result3b, result4b, result5b};
    final= [Fields'; text];

       end 
```

真的提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:19:25.583

索引超出维度正是它的意思。

尝试在它发生的行放置一个断点并检查 result2 的维度。假设它是一个向量，你会发现它的长度小于 19。

# javascript - 用于 Javascript 的 .tiff 库

> ID：13138297
> 
> 赞同：4
> 
> 时间：2012-10-30T11:45:41.993
> 
> 标签：javascript, image, node.js, canvas, base64

是否有类似[canvas2image](http://www.nihilogic.dk/labs/canvas2image/canvas2image.js)的库（请查看 createBMP 函数）用于在 JavaScript（浏览器或 nodejs）中制作 .tiff？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T02:08:43.763

对 tiff 文件的本机浏览器支持仍然很糟糕。[维基百科对浏览器图像格式支持](http://en.wikipedia.org/wiki/Comparison_of_web_browsers#Image_format_support)有一个很好的概述。

话虽如此; 由于 .tiff 图像本质上仍然是光栅图像，因此确实可以将它（棘手的部分是支持不同的压缩算法，如 PACKBITS、DEFLATE、LZW 等）转换为另一种（浏览器支持的）光栅格式（因此可以将其作为`data:img`源提供）。

有一个名为**[Tiffus](https://github.com/sugark/Tiffus)**的库：一个客户端纯 Javascript 图像库，用于加载、保存和操作二进制图像。

最初的项目目标是创建一个普通的 Javascript chrome 扩展，它可以将单页/多页 TIFF 图像/s 转换为 BMP/GIF 图像（这就是名称的来源）。

但是现在它支持：

*   Windows BMP（无压缩，RLE）
*   操作系统/2 BMP
*   ICO
*   动图
*   JPEG
*   PNG
*   国际电影节

目前支持以下图片功能：

*   加载
*   节省
*   调整大小
*   翻动
*   反转颜色

基本上它是这样工作的：

1.  使用带有 MimeType('text/plain; charset=x-user-defined'); 的 XMLHttpRequest 作为二进制数据下载的源图像 （未来：HTML5 Canvas ImageData）
2.  使用 Tiffus 进行图像处理
3.  显示为数据 URI 方案的目标图像（未来：HTML5 Canvas ImageData）

注意根据上述；作者预计`ImageData`将来会使用 HTML5 Canvas。

希望这可以帮助！

# javascript - 跨域发送“大量”数据

> ID：13138298
> 
> 赞同：1
> 
> 时间：2012-10-30T11:45:43.140
> 
> 标签：javascript, ajax, cross-domain, html2canvas

我有一个 javascript 小书签，它创建元素的屏幕截图并将其保存为 base64 编码的字符串。

现在，我需要将该图像/字符串发送到我自己的服务器以保存它。唯一的问题是它有 6000 多个字符长，或大约 61 KB，使它`GET`返回到我的服务器是不现实的。

是否有某种外部服务会以某种方式将其检索回我的服务器上？如何将此图像发送到我的服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:32:52.147

使用 POST。

选项 A.) 使用 JavaScript 创建表单并发布数据。如果您不想更改页面位置，请将`target`表单设置为隐藏的 iframe。

如果您需要在发布后从服务器获取响应，请在您发布的表单中添加一个唯一键，例如`<input type="hidden" name="key" value="...">`，然后在发布完成后使用 JSONP 获取响应，例如`http://yourserver.com/donepost.php?key=...`. 由于您无法确定在进行 JSONP 调用之前发布是否会完成，因此您需要不断重新检查服务器，直到有效响应可用或超时。

选项 B.) 使用 AJAX 发布。在您的服务器上设置`Access-Control-Allow-Origin`标头以允许此操作。

# wpf - WPF字体质量

> ID：13138299
> 
> 赞同：6
> 
> 时间：2012-10-30T11:45:43.757
> 
> 标签：wpf, fonts, font-size

我正在开发一个 WPF 应用程序，但我注意到在某些字体大小下，文本的呈现效果不如您在控制面板-> 字体中看到的示例。我正在使用大的 Segoe UI 字体 ( `FontSize="36"`)，效果在直立线条上更明显，例如字母“U”的一侧可能比另一侧稍厚。）。

在某些字体大小下，字体质量会有所提高，例如`FontSize="48"`（我认为相当于 36pt），但使用有限数量的字体大小并不总是可行的。

我可以通过将以下属性应用于 TextBlock 来提高字体质量：-

```
TextOptions.TextFormattingMode="Display" TextOptions.TextRenderingMode="ClearType" 
```

鉴于质量的提高，我很想知道为什么 WPF 不对所有文本执行此操作，还是归结为性能？我正在考虑创建一种全局样式以将其应用于所有控件，或者这会导致问题吗？

（我尝试上传屏幕截图，但必须以低质量存储图像，您无法真正找出字体问题）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-06T21:50:20.387

这是WPF 文本团队撰写的关于此功能的[博客文章。](http://blogs.msdn.com/b/text/archive/2009/08/24/wpf-4-0-text-stack-improvements.aspx)

注意事项`TextFormattingMode`：

> **理想**的理想文本度量是自引入 WPF 以来一直用于格式化文本的度量。这些指标导致字形的形状与字体文件中的轮廓保持高保真度。在创建字形位图或相对于彼此定位字形时，不会考虑字形的最终位置。
> 
> **显示**在这种新的格式化模式下，WPF 使用 GDI 兼容的文本度量。这确保了每个字形都具有多个整像素的宽度，并且定位在整像素上。使用 GDI 兼容的文本度量也意味着字形大小和换行符类似于基于 GDI 的框架。也就是说，字形大小并不是 WPF 使用的换行算法的唯一输入。即使我们使用与 GDI 相同的指标，我们的换行也不会完全相同。

由于这些属性是.NET 4.0 中的*新*属性，因此它们将原始 WPF 算法保留为默认值，即理想模式。

为了`TextRenderingMode`

> **自动**此模式将使用 ClearType，除非系统设置已设置为专门禁用机器上的 ClearType。
> 
> **Aliased**没有抗锯齿将用于绘制文本。
> 
> **灰度**灰度抗锯齿将用于绘制文本。
> 
> **ClearType** ClearType 抗锯齿将用于绘制文本。

由于`Auto`是默认设置，您通常会得到`ClearType`渲染。

现在，因为这些是附加属性，并且它们**继承**，所以您可以将它们设置在 root `Window`。无需创建一堆`Style`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T20:20:21.480

当 ClearType 打开时，在处理大量数据（超过 10,000 个项目）时，我注意到了一些小的性能问题。将 TextFormattingMode 更改为 Display 对性能没有明显影响。

这就是说，在我所有的 WPF 应用程序中，我使用全局样式来改进文本呈现，除非性能影响大到足以使 UI 感觉粘滞。

# ms-word - 如何在 Word 2007 中更改“下划线”的键盘快捷键

> ID：13138308
> 
> 赞同：0
> 
> 时间：2012-10-30T11:46:02.290
> 
> 标签：ms-word

我想更改“下划线”命令的键盘快捷键，但它没有出现在“开始选项卡”类别的“调整键盘”菜单中（在自定义菜单中）。

有谁知道如何找到相应的条目或可以提供一种以不同方式更改它的方法，例如以编程方式？

谢谢！基督教

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:55:46.607

在 Word-Options 中转到“自定义功能区”=> 键盘快捷键 => 在类别中查找“所有命令”（几乎在分隔线上方的底部），然后它应该在右侧列表框中的某个位置。

# php - 按季度分组

> ID：13138317
> 
> 赞同：1
> 
> 时间：2012-10-30T11:46:40.700
> 
> 标签：php, mysql, group-by

`.php`我需要在我的文件中按季度分组。以**粗体**显示需要修复的代码，即 switch case 4。刚才我对年、月、周和日进行了正确分组，但现在我需要季度名称 case 4。我尝试了此代码`GROUP FUNCTION`，但它显示了我2010 年和 2011 年有 5 组，这是错误的。

```
switch ($level) 
{

  case '4':**
    $group = "FLOOR(EXTRACT(YEAR_MONTH FROM FROM_UNIXTIME(invoice_date))/3)";</b>
    break;
} 
```

固定是

```
SQL 部分

案例“4”：
                    $group = "EXTRACT(YEAR FROM_UNIXTIME(invoice_date)) as group_field2, EXTRACT(QUARTER FROM_UNIXTIME(invoice_date))";
                    休息;

    $sql_select = $db->query("SELECT sum(amount) AS invoice_amount, " . $group ." AS group_field FROM
                " . DB_PREFIX . "invoices WHERE invoice_date>= " . $startup . " " . $user_query . " GROUP BY group_field, group_field2 ORDER BY group_field2 DESC, group_field DESC");

文本 - 链接部分

                    案例“4”：
                        $start = strtotime('+' . (($view_details_received['group_field'] - 1) * 3) . 'month', strtotime($view_details_received['group_field2'] . '/1/1'));
                        $finish = strtotime('+' . (($view_details_received['group_field'] - 1) * 3 + 3) . 'month', strtotime($view_details_received['group_field2'] . '/1/1'));
                        $start = getdate($start);
                        $finish = getdate($finish - 86400);
                        $title = 'Q' 。$view_details_received['group_field2'] 。'，' 。$view_details_received['group_field'];
                        休息;

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:52:02.343

您可以在 SQL 中使用 EXTRACT(QUARTER FROM date)，然后执行常规 GROUP BY

请参阅 MySQL 网页上的[EXTRACT 文档和](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_extract)[可能的参数表](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)。

# configuration - Nginx：try_files 外部位置

> ID：13138318
> 
> 赞同：5
> 
> 时间：2012-10-30T11:46:43.207
> 
> 标签：configuration, nginx

我正在使用 nginx 配置一个非常标准的网络服务器。服务器按预期工作，但是，我想了解一个小的配置细节。

我目前的配置是：

```
index index.html index.htm index.php;

location / {
    try_files $uri $uri/ /index.php?q=$uri;
}

location ~ \.php$ {
    try_files $uri =404;
    fastcgi_index index.php;
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include /etc/nginx/fastcgi_params;
} 
```

使用此配置，如果我访问： http: [//myweb.com/wp-content/uploads/2012/10/cropped-bitmap11.png/lol.php](http://myweb.com/wp-content/uploads/2012/10/cropped-bitmap11.png/lol.php)我会得到预期的 404。

但是，使用此配置：

```
try_files $uri =404;

location ~ \.php$ {
    fastcgi_index index.php;
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include /etc/nginx/fastcgi_params;
} 
```

我得到一个“拒绝访问”的空白页面。

为什么结果不一样？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T01:47:27.267

您可能认为`try_files`在服务器级别必须为每个请求工作。一点也不。恰恰相反，它只适用于不匹配任何`location`块的请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T01:31:45.310

**简短的回答：**从 php5.3.9 开始，php-fpm 不允许 .php 和 .php5 以外的扩展名，因为`security.limit_extensions`您的请求是对现有 .png 文件的默认值。

**长答案：**这与 try_files 在位置块内部或外部无关。让我们打破并解释一下：

请求是： http: [//myweb.com/wp-content/uploads/2012/10/cropped-bitmap11.png/lol.php](http://myweb.com/wp-content/uploads/2012/10/cropped-bitmap11.png/lol.php)

**在您的第一个配置上**

*   它与`location ~ .php$ { ... }`块匹配，因为请求以`.php`.
*   location中的 `try_files $uri =404;`指令`.php$`导致 nginx 返回 404，因为没有名为 $uri 的文件 (=/wp-content/uploads/2012/10/cropped-bitmap11.png/lol.php)
*   该`location / { ... }`块永远不会匹配。只有在没有其他位置块匹配时才匹配。（见[http://wiki.nginx.org/HttpCoreModule#location](http://wiki.nginx.org/HttpCoreModule#location)）

**在你的第二个配置**

*   同样，当请求以 结尾时`.php`，它与`.php$`位置块匹配。
*   在 location 块内没有检查文件是否存在，请求直接传递给 fastcgi 进程。
*   fastcgi 进程找到`/wp-content/uploads/2012/10/cropped-bitmap11.png`（显然，它存在）并拒绝运行请求，因为 .png 扩展名。（见简短回答）

我不知道这是错误还是“设计”的东西，但与“根”指令相反，位置块之外的 try_files 指令不会在位置块内继承。（如果有错，有人可能会纠正）

# ios - 为表格视图中的单元格而不是其他单元格关闭画外音焦点

> ID：13138319
> 
> 赞同：4
> 
> 时间：2012-10-30T11:46:52.650
> 
> 标签：ios, accessibility

我的表格视图中的第一个单元格是一个虚拟单元格，因此，当旁白模式打开时，我想跳过该单元格，以便焦点不会到达该控件，因此，语音不会说出它的任何特征超过。我编写了粘贴在下面的代码来实现相同的目标，认为`isAccessibilityElement`仅此一项就足够了。但似乎并非如此。尽管我说这个元素在代码中是不可访问的，但它仍然通过`Voice-over`模式中的右/左轻弹来获得焦点。关于如何实现这一点的任何想法？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
....
     UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:MyIdentifier];
     if(indexPath.row == 0)
     {
          cell.isAccessibilityElement = 0;
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T19:00:10.543

使用一些自定义单元格，并在该单元格定义中实现：

```
- (NSInteger)accessibilityElementCount {
    NSIndexPath *indexPath = [(UITableView *)self.superview indexPathForCell: self];
    if(indexPath.row==0){
        return 0;
    }
    else{
        return 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-13T12:45:29.287

当前执行此操作的方法似乎是将`accessibilityElementsHidden`单元格设置为`true`/ `YES`（取决于使用 Swift 还是 Obj-C.

似乎比提出的其他答案更干净，并且在我非常简短的测试中似乎有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-16T13:01:16.837

只需像这样覆盖单元格的功能`accessibilityElementCount`：

斯威夫特 4.2：

```
override func accessibilityElementCount() -> Int {
   return 0
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T14:38:51.360

这并不理想，但您是否只能在未激活 VoiceOver 时显示单元格？您可以使用

```
UIAccessibilityIsVoiceOverRunning() 
```

在您的应用程序加载时查看 VoiceOver 是否打开的功能，并注册

```
@selector(voiceOverStatusChanged) 
```

通知，以便在用户启用或禁用画外音时通知您。有关这方面的更多信息，请参阅以下博客文章。< [http://useyourloaf.com/blog/2012/05/14/detecting-voiceover-status-changes.html](http://useyourloaf.com/blog/2012/05/14/detecting-voiceover-status-changes.html) >

# debugging - 429 - ActiveX 组件无法创建对象：什么对象？

> ID：13138323
> 
> 赞同：0
> 
> 时间：2012-10-30T11:47:04.890
> 
> 标签：debugging, com, activex

上下文：试图将应用程序的安装减少到绝对最小文件数。我们正在运行应用程序并一一添加所需的依赖项。

但是现在我们得到一个弹出窗口，告诉我们“429 - ActiveX 组件无法创建对象”。我们知道这意味着什么，但我们不知道此时应用程序试图创建什么“对象”。

有没有办法轻松找出我的应用程序想要实例化的对象？

# java - 将 wav 转换为倒谱导致 Shpinx 4 关键字定位功能精度低

> ID：13138324
> 
> 赞同：3
> 
> 时间：2012-10-30T11:47:08.120
> 
> 标签：java, speech-recognition, cmusphinx

我正在尝试构建一个关键字定位系统，我选择[这个](http://cmusphinx.svn.sourceforge.net/viewvc/cmusphinx/branches/long-audio-aligner/KeyWordSpotting/)sphinx 4 的一个分支作为我项目的基础。

它适用于 wav 文件（至少 70% 使用单个关键字）。但是为了节省将文件从客户端传输到服务器的时间，我决定先在客户端将 wav 文件转换为倒谱，然后再传输倒谱。这项工作由[Featurefiledumper](http://cmusphinx.sourceforge.net/sphinx4/javadoc/edu/cmu/sphinx/tools/feature/FeatureFileDumper.html)执行。

但是当将倒谱加载到原来的 KWS 系统中时，精度是可怕的。我以为我只是在客户中放了一些作品，它应该不会对准确性产生太大影响。原来的 KWS 系统可以将每个单词分成适当的块然后识别。使用频谱作为输入后，系统甚至无法正确拆分每个单词。我想这也是它不能达到高精度的原因。

我想找到一种方法来节省传输文件的时间，并且仍然具有 KWS 系统的合理准确性。我在配置中有什么遗漏或者有其他方法可以满足需求吗？

这是客户端的配置：

```
<config>

<!-- ******************************************************** -->
<!-- The frontend configuration                               -->
<!-- ******************************************************** -->

<component name="cepstraFrontEnd" type="edu.cmu.sphinx.frontend.FrontEnd">
    <propertylist name="pipeline">
        <item>streamDataSource</item>
        <item>preemphasizer</item>
        <item>windower</item>
        <item>fft</item>
        <item>melFilterBank</item>
        <item>dct</item>
    </propertylist>
</component>

<component name="preemphasizer"
           type="edu.cmu.sphinx.frontend.filter.Preemphasizer"/>

<component name="windower"
           type="edu.cmu.sphinx.frontend.window.RaisedCosineWindower">
</componentcomponent>

<component name="fft"
           type="edu.cmu.sphinx.frontend.transform.DiscreteFourierTransform"/>

<component name="melFilterBank"
           type="edu.cmu.sphinx.frontend.frequencywarp.MelFrequencyFilterBank">
</component>

<component name="dct"
           type="edu.cmu.sphinx.frontend.transform.DiscreteCosineTransform"/>

<component name="streamDataSource"
           type="edu.cmu.sphinx.frontend.util.StreamDataSource">
    <property name="sampleRate" value="16000"/>
</component>

</config> 
```

这是服务器端的配置：

```
<config>

<property name="logLevel" value="WARNING" />
<property name="absoluteBeamWidth" value="-1" />
<property name="relativeBeamWidth" value="1E-150" />
<property name="wordInsertionProbability" value="0.7" />
<property name="languageWeight" value="7" />

<property name="frontend" value="epFrontEnd" />
<property name="recognizer" value="recognizer" />
<property name="showCreations" value="false" />
<property name="outOfGrammarProbability" value="1E-10"/>
<property name="phoneInsertionProbability" value="1E-55"/>  
<component name="recognizer" type="edu.cmu.sphinx.recognizer.Recognizer">
    <property name="decoder" value="decoder" />
</component>

<component name="decoder" type="edu.cmu.sphinx.decoder.Decoder">
    <property name="searchManager" value="searchManager" />
</component>

<component name="searchManager" type="edu.cmu.sphinx.decoder.search.SimpleBreadthFirstSearchManager">
    <property name="logMath" value="logMath" />
    <property name="linguist" value="FlatLinguist" />
    <property name="pruner" value="trivialPruner" />
    <property name="scorer" value="threadedScorer" />
    <property name="activeListFactory" value="activeList" />
</component>

<component name="activeList" type="edu.cmu.sphinx.decoder.search.PartitionActiveListFactory">
    <property name="logMath" value="logMath" />
    <property name="absoluteBeamWidth" value="${absoluteBeamWidth}" />
    <property name="relativeBeamWidth" value="${relativeBeamWidth}" />
</component>

<component name="trivialPruner" type="edu.cmu.sphinx.decoder.pruner.SimplePruner" />

<component name="threadedScorer" type="edu.cmu.sphinx.decoder.scorer.ThreadedAcousticScorer">
    <property name="frontend" value="${frontend}" />
</component>

<component name="FlatLinguist" type="edu.cmu.sphinx.linguist.KWSFlatLinguist.KWSFlatLinguist">
    <property name="logMath" value="logMath" />
    <property name="grammar" value="NoSkipGrammar" />
    <property name="acousticModel" value="wsj" />       
    <property name="wordInsertionProbability" value="${wordInsertionProbability}" />
    <property name="languageWeight" value="${languageWeight}" />
    <property name="unitManager" value="unitManager" /> 
    <property name="addOutOfGrammarBranch" value="true"/>
    <property name="phoneLoopAcousticModel" value="WSJ"/>
    <property name="outOfGrammarProbability" value="${outOfGrammarProbability}"/>
    <property name="phoneInsertionProbability" value="${phoneInsertionProbability}"/>
    <property name="dumpGStates" value ="true"/>    
</component>

<component name="NoSkipGrammar" type="edu.cmu.sphinx.linguist.language.grammar.NoSkipGrammar">
    <property name="dictionary" value="dictionary" />
    <property name="logMath" value="logMath" />
    <property name="addSilenceWords" value="false" />
</component>

<component name="dictionary" type="edu.cmu.sphinx.linguist.dictionary.AllWordDictionary">
    <property name="dictionaryPath" value="resource:/WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz/dict/cmudict.0.6d" />
    <property name="fillerPath" value="resource:/WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz/noisedict" />
    <property name="addSilEndingPronunciation" value="false" />
    <property name="wordReplacement" value="&lt;sil&gt;" />
    <property name="unitManager" value="unitManager" />
</component>

<component name="wsj" type="edu.cmu.sphinx.linguist.acoustic.tiedstate.TiedStateAcousticModel">
    <property name="loader" value="wsjLoader" />
    <property name="unitManager" value="unitManager" />
</component>

<component name="wsjLoader" type="edu.cmu.sphinx.linguist.acoustic.tiedstate.Sphinx3Loader">
    <property name="logMath" value="logMath" />
    <property name="unitManager" value="unitManager" />
    <property name="location" value="resource:/WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz" />
</component>

<component name="unitManager" type="edu.cmu.sphinx.linguist.acoustic.UnitManager" />
<!-- additions start-->
<component name="WSJ" type="edu.cmu.sphinx.linguist.acoustic.tiedstate.TiedStateAcousticModel">
    <property name="loader" value="WSJLOADER" />
    <property name="unitManager" value="UNITMANAGER" />
</component>

<component name="WSJLOADER" type="edu.cmu.sphinx.linguist.acoustic.tiedstate.Sphinx3Loader">
    <property name="logMath" value="logMath" />
    <property name="unitManager" value="UNITMANAGER" />
    <property name="location" value="resource:/WSJ_8gau_13dCep_16k_40mel_130Hz_6800Hz" />
</component>

<component name="UNITMANAGER" type="edu.cmu.sphinx.linguist.acoustic.UnitManager" />

<component name="tidigits" 
  type="edu.cmu.sphinx.model.acoustic.TIDIGITS_8gau_13dCep_16k_40mel_130Hz_6800Hz.Model">
    <property name="loader" value="sphinx3Loader"/>
    <property name="unitManager" value="unitManager"/>
</component>

<component name="sphinx3Loader"
           type="edu.cmu.sphinx.model.acoustic.TIDIGITS_8gau_13dCep_16k_40mel_130Hz_6800Hz.ModelLoader">
    <property name="logMath" value="logMath"/>
    <property name="unitManager" value="UNITMANAGER"/>
</component>
<!-- additions end -->

<component name="epFrontEnd" type="edu.cmu.sphinx.frontend.FrontEnd">
    <propertylist name="pipeline">
        <item>streamCepstrumSource </item>
        <item>BatchCMN </item>
        <item>featureExtraction </item>
    </propertylist>
</component>

<component name="audioFileDataSource" type="edu.cmu.sphinx.frontend.util.AudioFileDataSource" />

<component name="dataBlocker" type="edu.cmu.sphinx.frontend.DataBlocker" />

<component name="speechClassifier" type="edu.cmu.sphinx.frontend.endpoint.SpeechClassifier" />

<component name="nonSpeechDataFilter" type="edu.cmu.sphinx.frontend.endpoint.NonSpeechDataFilter" />

<component name="speechMarker" type="edu.cmu.sphinx.frontend.endpoint.SpeechMarker" />

<component name="preemphasizer" type="edu.cmu.sphinx.frontend.filter.Preemphasizer" />

<component name="windower" type="edu.cmu.sphinx.frontend.window.RaisedCosineWindower">
</component>

<component name="fft" type="edu.cmu.sphinx.frontend.transform.DiscreteFourierTransform">
</component>

<component name="melFilterBank" type="edu.cmu.sphinx.frontend.frequencywarp.MelFrequencyFilterBank">
</component>

<component name="dct" type="edu.cmu.sphinx.frontend.transform.DiscreteCosineTransform" />

<component name="liveCMN" type="edu.cmu.sphinx.frontend.feature.LiveCMN" />

<component name="featureExtraction" type="edu.cmu.sphinx.frontend.feature.DeltasFeatureExtractor" />

<component name="BatchCMN" type="edu.cmu.sphinx.frontend.feature.BatchCMN"/>

<component name="logMath" type="edu.cmu.sphinx.util.LogMath">
    <property name="logBase" value="1.0001" />
    <property name="useAddTable" value="true" />
</component>

<component name="streamCepstrumSource" type="edu.cmu.sphinx.frontend.util.StreamCepstrumSource">
    <property name="sampleRate" value="16000"/>
    </component>

</config> 
```

==================================================== =================

感谢尼古拉。我发现原因是处理文件的组件不同（StreamDataSource 和 AudioFileDataSource）。

但是有个问题，我的客户端是安卓系统。它不支持 javax.sound.sampled 类。所以在我的客户端上使用 AudioFileDataSource 是不可能的。StreamDataSource 是一种可能的解决方案。但我不知道为什么这两个组件会导致不同的功能集。

是否有提示使 StreamDataSource 生成与 AudioFileDataSource 相同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:36:18.193

> 我在配置中有什么遗漏或者有其他方法可以满足需求吗？

配置是正确的，你没有错过任何东西。

很可能您在自己编写的传递函数中犯了错误。您需要先尝试将数据作为文件传输，以确保一切都相同。您还可以转储 CepstrumDataSource 生成的值，以验证它们是否在预期范围内。您可以为此使用 DataDumper 组件。

# umbraco - 如何在 umbraco 中获取当前内容的一部分

> ID：13138325
> 
> 赞同：0
> 
> 时间：2012-10-30T11:47:08.090
> 
> 标签：umbraco

我的问题是：如何在后端文件 (*.master.cs) 中获取 Umbraco CMS 中当前内容的一部分？大约 350 个字符，但我敢肯定，一个大的没关系。有什么有用的方法可以做到吗？Umbraco 版本：4.6.2。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:31:03.910

我自己找到了解决方案：

```
 string part = currentNode.GetProperty("bodyText").Value.Substring(0, 450) + "..."; 
```

# android - 在editText android中写入文本时激活按钮

> ID：13138329
> 
> 赞同：3
> 
> 时间：2012-10-30T11:47:22.337
> 
> 标签：android, android-layout

我有一个布局，其中有一些编辑文本和一个按钮。此按钮为 setEnabled(false)。当用户在edittext中写一些文本时，我如何改变他的状态？我想当用户输入一些文本来编辑文本按钮 setEnabled on true 时？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T11:49:04.063

您需要使用`TextWatcher`：

```
editText.addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {

                // TODO Auto-generated method stub
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

                // TODO Auto-generated method stub
            }

            @Override
            public void afterTextChanged(Editable s) {

                // TODO Auto-generated method stub
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T11:52:30.360

*通知用户为什么*禁用 Button也是一个好主意。

使用 a`TextWatcher`禁用/启用按钮并为 EditText 设置错误提示：

`mEditText.addTextChangedListener(new EmptyValidator());`

```
private class EmptyValidator implements TextWatcher {

        @Override
        public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {
        }

        @Override
        public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
        }

        @Override
        public void afterTextChanged(Editable editable) {
            if (editable.length() == 0) {
                mEditText.setError("Required");
                mButton.setEnabled(false);
            } else {
                mEditText.setError(null);
                mButton.setEnabled(true);
            }
        }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:53:34.420

关于您的代码和要求，以下代码应该可以正常工作：

```
mEditText.addTextChangedListener(new TextWatcher() {
    @Override
    public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}
    @Override
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}

    @Override
    public void afterTextChanged(Editable string) {
        if(string.length() > 0) {
            mButton.setEnabled(true);
        } else {
            mButton.setEnabled(false);
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T12:01:28.447

您需要检查 edittext 的当前长度以及从 TextWatcher 获得的 EditText 的最小长度 one(1) 或不为 null 然后 setEnabled(true); 否则默认为假。

检查条件：

```
editText.addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {

                // TODO Auto-generated method stub
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {

                // TODO Auto-generated method stub
            }

            @Override
            public void afterTextChanged(Editable s) {

                // TODO Auto-generated method stub
           if(edt.getText().toString().length()<=0)
              { 
           edt.setError("Required.");
           btn.setEnable(true);
               } 

       else
         {
       btn.setEnable(true); 
         }

            }
        }); 
```

# fastcgi - lighttpd中按目录或别名的不同php ini文件

> ID：13138335
> 
> 赞同：0
> 
> 时间：2012-10-30T11:47:56.707
> 
> 标签：fastcgi, php, lighttpd

取 2 个域：www.domain.com 和 sub.domain.com。每个都分别托管在同一服务器上`/home/www`，并`/home/sub`通过 lighttpd 中的 vhost 配置使用不同的 php.ini 文件。

```
fastcgi.server = ( ".php" =>
  ((
    "bin-path" => "/usr/bin/php5-cgi -c /home/www/php.ini"
  ))
)

$HTTP["host"]=="sub.domain.com" {
  fastcgi.server = ( ".php" =>
    ((
      "bin-path" => "/usr/bin/php5-cgi -c /home/sub/php.ini"
    ))
  )
} 
```

是否可以在仍然使用适当的 php.ini`www.domain.com/sub`的同时提供内容？`sub.domain.com`

我们使用的 php.ini 文件的主要区别是`include_path`. 有没有另一种方法可以通过目录或别名通过服务器配置来改变它？还是在单个 php.ini 中？

这样做的动机是我们只有主 www 域的 SSL 证书，但希望通过主域路径上的 SSL 提供子内容。

在 debian 上使用 lighttpd。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:51:27.960

不知道它是否仍然有效，但几年前我遵循了这个......遗憾的是，我现在没有在我工作的地方使用 lighttp，所以无法验证它是否仍然有效。

[http://www.cyberciti.biz/tips/custom-phpini-file-for-each-domain-user.html](http://www.cyberciti.biz/tips/custom-phpini-file-for-each-domain-user.html)

# iphone - 如何在后台将图像从网站保存到 iphone 应用程序（并快速完成）？

> ID：13138337
> 
> 赞同：0
> 
> 时间：2012-10-30T11:48:02.113
> 
> 标签：iphone, ios

我在一些关于将图像从网站保存到 iphone 应用程序的论坛帖子上发现，我正在使用它，因为除了一件事，速度之外一切都很好。

图像大约10KB，当只有一张图像时下载速度还可以，但是当有15-20张图像时下载速度很慢。

我知道必须有办法以另一种方式更快地下载图像，因为我的 iPhone 上有一些新闻应用程序，并且这个应用程序下载了 15-20 篇带有我的图像的文章（我说喜欢我的图像，因为质量相同或更好）并且大约快 5 秒（或更多）。

所以我的问题是；是否有另一种更快的方式将图像从网站下载到 iPhone 应用程序？

这是我的代码：

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) //1

#import "downloadImage.h"

@interface downloadImage ()

@end

@implementation downloadImage

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *imgUrl = @"http://somesite.com/someimage.jpg";

    dispatch_async(kBgQueue, ^{

        [self performSelectorOnMainThread:@selector(downloadImageFromWeb:) withObject:imgUrl waitUntilDone:YES];

    });

}

-(void)downloadImageFromWeb:(NSString *)imgUrl{

    UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:imgUrl]]];

    NSArray *parts = [imgUrl componentsSeparatedByString:@"/"];

    NSString *imgFilename = [parts lastObject];

    [self saveImage:image:imgFilename];

}

- (void)saveImage:(UIImage*)image:(NSString*)imageName {

    NSData *imageData = UIImageJPEGRepresentation(image, 100);
    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:
                          imageName];

    [fileManager createFileAtPath:fullPath contents:imageData attributes:nil];

    //NSLog(@"image saved");

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:56:34.187

1）从普通浏览器检查此图像的实际加载时间，这可能是服务器端问题

2）尝试为此使用一些经过验证的代码，例如[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)并查看与您的代码是否有任何区别。

3）删除保存并再次测试。如果速度更快，则对保存进行子线程化（但是，创建这么多线程并不是一个好主意）

4）为什么要在主线程上执行负载选择器？在后台线程上执行此操作，然后在主线程上更新图像。您现在调度它的方式会阻塞主线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:57:50.613

下载图像取决于`speed`的`internet`以及`server`.

如果不想在下载时打扰`UI`，请在以下位置`application`执行下载`Background process`：

```
 [self performSelectorInBackground:@selector(downloadImageFromWeb:) withObject:imgUrl waitUntilDone:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:57:50.347

```
dataWithContentsOfURL 
```

是同步调用。我们`NSConnection`并在`connectionDidFinishedLoading`获取主队列并将图像设置到您想要的任何位置。这将在后台运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:42:41.717

使用`dispatch_async`是更好的选择。但在你的情况下，这条线会导致问题：

```
dispatch_async(kBgQueue, ^{

        [self performSelectorOnMainThread:@selector(downloadImageFromWeb:) withObject:imgUrl waitUntilDone:YES];

    }); 
```

将代码更改为：

```
dispatch_async(kBgQueue, ^{

            [self downloadImageFromWeb:imgUrl];

        }); 
```

请参考这些文件：

[性能：dispatch_async](http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/c/func/dispatch_async)

[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)

这是一个很好的[教程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial%29)，可以帮助您处理这种情况。

# java - json解析器异常

> ID：13138338
> 
> 赞同：0
> 
> 时间：2012-10-30T11:48:04.490
> 
> 标签：java, json, tomcat, jar, struts

我想将 json 数据发送到我的页面，这里是代码：

```
response.setContentType("application/json");
    String jsonObject = "{ key1 = value1, key2 = value2 }";
    JSON json = JSONSerializer.toJSON(jsonObject);
    PrintWriter out = response.getWriter();
    out.print(json);
    out.flush();
    return null; 
```

我收到此错误：

```
java.lang.NoClassDefFoundError: net/sf/json/JSONSerializer 
```

我正在使用 jdk1.7 和 json：-json-lib-2.4-jdk15.jar -json-lib-2.4-jdk15-javadoc.jar -json-lib-2.4-jdk15-sources.jar

ezmorph：-ezmorph-1.0.6.jar

和 commons-lang.jar

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:22:28.337

尝试：

```
String myjsonObject = "{ key1 = value1, key2 = value2 }";
JSONObject json = (JSONObject) JSONSerializer.toJSON( myjsonObject ); 
```

# .net - 用于解析命令行参数的正则表达式失败

> ID：13138344
> 
> 赞同：2
> 
> 时间：2012-10-30T11:48:23.517
> 
> 标签：.net, regex, command-line

我正在尝试使用正则表达式来解析命令行开关的键值对。这是我到目前为止所得到的：

```
(?<=(^-{1,2}| -{1,2}|^/| /))(?<name>[\w]+)[ :"]*(?<value>[\w.?=&+ :/|\\]*)(?=[ "]|$) 
```

它似乎可以正确解析所有内容......几乎。如果值中有连字符，则匹配失败。如何调整它以适用于下面的所有测试示例？

测试示例（全部有效）：

```
-s  -i:C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB Scripts\ -h:local:host -d:theDB
-o:"C:\temp\db\" -s -r -host:localhost --d theDB
-s  -i:"C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB -Scripts\" -h:localhost -d:theDB
-s  -d http://www.theproject.com -h:localhost -d:theDB
-i:"C:\Users\Fozzie\Workspace\TheProject\TheProject_Stack_1_5\db\DB Scripts\" --h:localhost -d:theDB
-h:localhost -i:"C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack_1_5\db\DB Scripts\"  -d:theDB
--d theDB   -o:"C:\temp\db\" -host=local-host     -r 
```

当值部分类似于

```
"C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB Scripts\" 
```

或`"local-host"`由于其中的连字符。它被视为新开关的开始。

PS：我不想使用像 getops 这样的固定选项库。我有兴趣让正则表达式正确。

谢谢。

更新：抱歉缺少细节：这是一个 .NET 正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:37:18.073

### .NET 解决方案——投机

这个建议的 .NET 解决方案只是“建议的”；我不使用 .NET，也无法在我的任何机器上对其进行测试（是否有 .NET 的正则表达式测试网站？）。我已经采用了有效的 Perl 解决方案，删除了您不担心的部分`<mark>`和`<pad>`注释，并在假设 .NET 没有类似于 Perl 的`x`选项的易读性选项的情况下将其全部展平到一行. 您仍然可以找到对应于 Perl 正则表达式的 5 个部分的 5 组括号。我假设这`(?:...)`是一个非捕获组。

```
(?:-{1,2}|/)(?<name>\w+)(?:[=:]?|\s+)(?<value>[^-\s"][^"]*?|"[^"]*")?(?=\s+[-/]|$) 
```

我还假设 .NET 提供了一些类似于 Perl`g`修饰符的机制，它允许您在第二次（或后续）遍历中扫描字符串，它在上一次遍历中停止。或者您可以以某种方式确定比赛结束的位置并从那里恢复扫描。

### Perl 解决方案 — 已验证

这与我设法使用 Perl 正则表达式（在 Mac OS X 10.7.5 上使用 Perl 5.16.0 测试）一样好。

```
#!/usr/bin/env perl
use strict;
use warnings;

# Original regex split into 5 sections:
# C1          (?<=(^-{1,2}|\ -{1,2}|^/|\ /))
# C2          (?<name>[\w]+)
# C3          [ :"]*
# C4          (?<value>[\w.?=&+ :/|\\]*)
# C5          (?=[ "]|$)

my $rx = qr%(?<mark>  -{1,2}|/ )                        (?# Was C1)
            (?<name>  \w+ )                             (?# Was C2)
            (?<pad>   (?: [=:]?|\s+ ))                  (?# Was C3)
            (?<value> (?: [^-\s"][^"]*? | "[^"]*" ))?   (?# Was C4)
            (?=\s+[-/]|$)                               (?# Was C5)
           %x;

while (my $line = <DATA>)
{
    chomp $line;
    print "\nLine: $line\n";
    while ($line =~ m/$rx/g)
    {
        my($mark, $name, $pad, $value) = ($1, $2, $3, $4 // "");
        print "Found: mark $mark name <<$name>> pad <<$pad>> value <<$value>>\n";
    }
}

__DATA__
-s  -i:C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB Scripts\ -h:local:host -d:theDB
-o:"C:\temp\db\" -s -r -host:localhost --d theDB
-s  -i:"C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB -Scripts\" -h:localhost -d:theDB
-s  -d http://www.theproject.com -h:localhost -d:theDB
-i:"C:\Users\Fozzie\Workspace\TheProject\TheProject_Stack_1_5\db\DB Scripts\" --h:localhost -d:theDB
-h:localhost -i:"C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack_1_5\db\DB Scripts\"  -d:theDB
--d theDB   -o:"C:\temp\db\" -host=local-host     -r
-s -i:C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB Scripts\ -h:local:host -d:theDB
/d theDB   /o:"C:\temp\db\" /host=local-host     /r
/d theDB /o:"C:\temp\db\" /host=local-host /r /t
-s:C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB Scripts\ -h:local:host -d:theDB 
```

大部分脚本不是很有趣。`__DATA__`外部 while 循环一次一行读取文件的数据部分（即标记后的材料），将其打印以进行验证，然后在该行重复运行正则表达式以查找组件（标记、名称、填充和值），将它们打印出来。大部分数据是问题中提供的（谢谢！）。与最初提供的数据相比，最后三行数据是额外的。

所有的兴奋都在正则表达式中。我使用 Perl 的`/x`修饰符在正则表达式中允许空格以提高可读性。这意味着除非前面有反斜杠或用方括号括起来，否则空格并不重要（并且此样本中没有重要的空格）。我已经使用`(?<name> ...)`符号来识别原始片段，尽管名称可以省略，因为它们没有被使用。这些`(?# Was Cn)`部分是纯粹的评论。

1.  标记是一个或两个破折号或斜线；`--?`将是另一种更短的编写方式。
2.  名称是一串字母数字；这并不试图强制“第一个字符可能不是数字”。
3.  填充将名称与值分开。它可以是单个等号或冒号，也可以是一串空格。内部`(?: ...)`是非捕获分组运算符。
4.  该值是可选的（`-s`样本数据第一行第一个位置的选项没有值）。它由以下部分组成： 以破折号、双引号或空格以外的其他内容开头的字符串，后跟非引号的非贪婪字符串；或一个双引号、一串非引号和另一个双引号。
5.  尾随零宽度上下文 (C5) 是一个或多个空格字符，后跟一个破折号或斜线，或 EOS。因为值模式是非贪婪的，所以贪婪的尾随上下文会吞噬选项值之后的尾随空格。

输出是：

```
Line: -s  -i:C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB Scripts\ -h:local:host -d:theDB
Found: mark - name <<s>> pad << >> value <<>>
Found: mark - name <<i>> pad <<:>> value <<C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB Scripts\>>
Found: mark - name <<h>> pad <<:>> value <<local:host>>
Found: mark - name <<d>> pad <<:>> value <<theDB>>

Line: -o:"C:\temp\db\" -s -r -host:localhost --d theDB
Found: mark - name <<o>> pad <<:>> value <<"C:\temp\db\">>
Found: mark - name <<s>> pad <<>> value <<>>
Found: mark - name <<r>> pad <<>> value <<>>
Found: mark - name <<host>> pad <<:>> value <<localhost>>
Found: mark -- name <<d>> pad << >> value <<theDB>>

Line: -s  -i:"C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB -Scripts\" -h:localhost -d:theDB
Found: mark - name <<s>> pad << >> value <<>>
Found: mark - name <<i>> pad <<:>> value <<"C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB -Scripts\">>
Found: mark - name <<h>> pad <<:>> value <<localhost>>
Found: mark - name <<d>> pad <<:>> value <<theDB>>

Line: -s  -d http://www.theproject.com -h:localhost -d:theDB
Found: mark - name <<s>> pad << >> value <<>>
Found: mark - name <<d>> pad << >> value <<http://www.theproject.com>>
Found: mark - name <<h>> pad <<:>> value <<localhost>>
Found: mark - name <<d>> pad <<:>> value <<theDB>>

Line: -i:"C:\Users\Fozzie\Workspace\TheProject\TheProject_Stack_1_5\db\DB Scripts\" --h:localhost -d:theDB
Found: mark - name <<i>> pad <<:>> value <<"C:\Users\Fozzie\Workspace\TheProject\TheProject_Stack_1_5\db\DB Scripts\">>
Found: mark -- name <<h>> pad <<:>> value <<localhost>>
Found: mark - name <<d>> pad <<:>> value <<theDB>>

Line: -h:localhost -i:"C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack_1_5\db\DB Scripts\"  -d:theDB
Found: mark - name <<h>> pad <<:>> value <<localhost>>
Found: mark - name <<d>> pad <<:>> value <<theDB>>

Line: --d theDB   -o:"C:\temp\db\" -host=local-host     -r
Found: mark -- name <<d>> pad << >> value <<theDB>>
Found: mark - name <<o>> pad <<:>> value <<"C:\temp\db\">>
Found: mark - name <<host>> pad <<=>> value <<local-host>>
Found: mark - name <<r>> pad <<>> value <<>>

Line: -s -i:C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB Scripts\ -h:local:host -d:theDB
Found: mark - name <<s>> pad <<>> value <<>>
Found: mark - name <<i>> pad <<:>> value <<C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB Scripts\>>
Found: mark - name <<h>> pad <<:>> value <<local:host>>
Found: mark - name <<d>> pad <<:>> value <<theDB>>

Line: /d theDB   /o:"C:\temp\db\" /host=local-host     /r
Found: mark / name <<d>> pad << >> value <<theDB  >>
Found: mark / name <<o>> pad <<:>> value <<"C:\temp\db\">>
Found: mark / name <<host>> pad <<=>> value <<local-host    >>
Found: mark / name <<r>> pad <<>> value <<>>

Line: /d theDB /o:"C:\temp\db\" /host=local-host /r /t
Found: mark / name <<d>> pad << >> value <<theDB>>
Found: mark / name <<o>> pad <<:>> value <<"C:\temp\db\">>
Found: mark / name <<host>> pad <<=>> value <<local-host>>
Found: mark / name <<r>> pad <<>> value <<>>
Found: mark / name <<t>> pad <<>> value <<>>

Line: -s:C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB Scripts\ -h:local:host -d:theDB
Found: mark - name <<s>> pad <<:>> value <<C:\Users\Fozzie\Workspace\TheProject\TheProject-Stack-1_5\db\DB Scripts\>>
Found: mark - name <<h>> pad <<:>> value <<local:host>>
Found: mark - name <<d>> pad <<:>> value <<theDB>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:19:28.863

编辑：更改了解决方案，因此现在它可以匹配 FILEPATHS，例如 D:\huheue\hello\my name.pdf

这是我得到的正则表达式，它工作得很好。

`(--?[a-zA-Z]+)[:\s=]?([A-Z]:(?:\\[\w\s-]+)+\\?(?=\s-)|\"[^\"]*\"|[^-][^\s]*)?`

[演示](http://regex101.com/r/oR5lL1)

我希望这是你所需要的，你会有这样的输出：

```
MATCH 1
1\.  [0-2]   `-s`
MATCH 2
1\.  [3-5]   `-i`
2\.  [6-70]  `C:\Users\Fozzie\Workspace\TheProject\TheProaject-Stack-1_5\db\DB Scripts`
MATCH 3
1\.  [80-82] `-h`
2\.  [83-93] `local:host`
ETC 
```

# highcharts - 将系列数据传递给 Highcharts

> ID：13138345
> 
> 赞同：0
> 
> 时间：2012-10-30T11:48:25.210
> 
> 标签：highcharts

![在此处输入图像描述](../Images/8e4b1c3469a3dea181975708dc84e1d8.png)

有人可以向我解释如何正确地将对象作为系列数据传递到 HighCharts 中吗？

我使用以下内容创建了一个对象：

```
var series2 = {
            id: 'series',
            name: 'JSON Data',
            data: []
        } 
```

然后有一个循环，我将数据推送到对象中，如下所示：

```
series2.data.push([c, csv]); 
```

并尝试在 HighCharts 图表初始化中将系列设置为：

```
legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                floating: false,
                borderWidth: 1,
                backgroundColor: '#FFFFFF',
                shadow: true
            },
            series: series2 
```

渲染时，我的图表没有给出任何错误，但同样它也没有显示任何数据！

如果我将我的 HighCharts 初始化行更改为“series: series2.data”，我确实得到了正确数量的系列，但仍然没有数据。

有这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T19:46:19.977

系列属性期望和数组。将您的代码更改为：

```
...
series: [series2]
... 
```

# wordpress - 将登录的 wordpress 用户传递给 phpfreechat

> ID：13138346
> 
> 赞同：2
> 
> 时间：2012-10-30T11:48:29.077
> 
> 标签：wordpress, session-cookies

我需要将当前登录的 WordPress 3.2.4 用户的显示名称传递给 PhpFreeChat 2.0.4。实现这一点的途径似乎是使用 PhpFreeChat 挂钩功能为 WordPress 用户提供当前用户名。

在我的 PhpFreeChat config.local.php 我有：

```
<?php
    $GLOBALS['pfc_hooks']['pfc.before.auth'][5] = function ($app, $req, $res) {
    return function ($hr) use ($app, $req, $res) {
        $username = "";
        foreach($_COOKIE as $key => $value) {
            if(preg_match('@^wordpress_logged_in_@', $key)) {
                $cookie = explode('|', $_COOKIE[$key]);
                $username = $cookie[0];
            }
        }
        $hr->login = $username;
       };
}; 
```

根据我的阅读，这应该在启动时将当前登录的 WordPress 用户的用户名传递给 PhpFreeChat。

这似乎不起作用，因为聊天中没有显示用户名。

如果我只使用 cookie 解析代码创建一个 .php 页面，它**确实**给了我一个值。

任何人都可以建议任何其他方法吗？有没有办法从 WordPress 模板中将用户名传递给 PhpFreeChat？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T18:39:44.930

从 phpfreechat-2.0.5 开始，pfc.before.auth 钩子已经被重构，所以你必须像这样调整你的代码（注意`return $username`最后）：

```
<?php
  $GLOBALS['pfc_hooks']['pfc.before.auth'][5] = function ($app, $req, $res) {
    return function () use ($app, $req, $res) {
      $username = '';
      foreach ($_COOKIE as $key => $value) {
        if (preg_match('@^wordpress_logged_in_@', $key)) {
            $cookie = explode('|', $_COOKIE[$key]);
            $username = $cookie[0];
        }
      }
      return $username;
    };
  }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:51:58.617

该代码实际上只是缺少一个右括号）。

代码本身工作正常。我将把问题留在这里，因为它可能对其他人有用。

# java - 如何在java中拆分这个字符串？

> ID：13138347
> 
> 赞同：-2
> 
> 时间：2012-10-30T11:48:29.923
> 
> 标签：java, string

我有这个代码

```
lStock.setText(" Put " + getLoc(i)); 
```

目前它在 GUI 上打印如下：

```
3I031C 
```

我现在想在屏幕 GUI 上显示的是：

```
3I03-1C 
```

我尝试测试`split()`但我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:50:35.883

[`String.split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)用于根据某些特定的分隔符拆分字符串。您在这里没有分隔符。

如果您总是想在第四个字符之后中断：

```
String str = "3I031C";
String out = str.substring(0, 4) + '-' + str.substring(4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:51:34.443

如果它是固定输出，请尝试如下

```
s = s.substring(0, 4) + "-" + s.substring(4); 
```

参考[String.substring()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int,%20int%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:51:44.040

您不能使用 split 方法，因为它需要一个分隔符，但您的字符串不包含任何分隔符。

您可以尝试使用子字符串：

```
str = str.substring(0, 4) + "-" + str.substring(4); 
```

但这只有在字符串始终具有相同的长度和格式时才有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T11:53:43.753

你可以使用这个。因为没有分隔符来使用`split`方法。

```
String str = Service.getLetterLocation(i);
str = str.substring(0, str.length()-2)+ "-" + str.substring(str.length()-2);
lStockPI.setText(" Put " + str ); 
```

# security - Postgresql 数据库对象安全性

> ID：13138350
> 
> 赞同：1
> 
> 时间：2012-10-30T11:48:49.603
> 
> 标签：security, postgresql

我正在开发一个将使用 postgreSQL 数据库后端的应用程序。我想防止用户看到一些 db 对象 - 特别是存储的 procs 实现等。

“显而易见”（但可能是错误的）方法是将数据库的 CRUD 访问权限授予将具有加密 uname/pwd 的特定用户？

还有另一种方法吗？

注意：我的目标受众主要是非程序员，所以我不需要任何“牢不可破”的东西（假设存在这样的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:52:33.390

PostgreSQL 并不真正支持限制过程源代码、用户或数据库列表等的可见性。最好的做法是接受这一点，或者在 C 或 PL/Java 中实现该过程，在这种情况下，检查起来有点困难，代价是相当大的实现的复杂性更大。

一般来说，您不应该让数据库/表所有者成为数据库的日常操作用户。创建一个新用户，`GRANT`它只有它需要的权限。

大多数系统目录都`SELECT`授予了默认权限，`public`因此您确实想要限制访问权限，您需要明确`REVOKE`该访问权限，然后`GRANT`将其返回给数据库所有者和任何其他应该拥有它的用户。`pg_proc`例如，如果您想限制对过程源的访问，您可能希望限制访问。这种方法是有限且脆弱的（root 始终可以获得 PostgreSQL 超级用户访问权限，并从那里做任何事情），但您已经说过这可能适合您的目的。

不真正支持弄乱系统目录，并且可能会导致 JDBC、psql 等中的元数据访问出现问题。请参阅[此相关答案](https://stackoverflow.com/a/13003392/398670)。如果你弄乱了目录并且有东西坏了，你可以保留这些碎片。

BTW，如果您修改目录，请尽量避免在此处询问有关手动修改目录的数据库的问题。至少要*非常*清楚地说明你弄乱了系统目录以及你做了什么*。*如果可能，请先在未修改的数据库上重现该问题。

# php - 在zend地址栏中使用_redirect（）时不显示新的url

> ID：13138354
> 
> 赞同：3
> 
> 时间：2012-10-30T11:49:02.987
> 
> 标签：php, zend-framework

首先，我想明确一点，我是 PHP 和 Zend 的新手。

我正在使用 zend 框架开发一个站点，这是一个动作调用 successAction....

```
public function successAction()
{
    $responseParams= $this->_request->getParam('responseparams');
    if (isset($responseParams)){
        $pgResArray = explode("|", $responseParams);        
        if ($pgResArray[1] == 'SUCCESS') {
            switch ($pgResArray[4]) {
                case 'xyz':
                    $this->_redirect('/xyz');
                    break;
                case 'pqr':
                    $this->_redirect('/pqr');
                    break;
                case 'abc':
                    $this->_redirect('/abc');
                    break;
            }
        }
    }

} 
```

当客户端成功付款后，服务器会向我的网站抛出成功标志，我决定现在重定向到哪里。

每个重定向网址都有一些肥皂请求。

我的问题是，当我从支付网关回来时，地址栏显示支付网关的 url，但在后台所有过程都完成了。

重定向运行良好，但未在屏幕上显示。

如何解决这个...

我想要的第二件事是，当我向肥皂服务器请求时，屏幕将显示处理图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:55:32.350

您可能需要在[操作实用程序方法 _redirect()](http://framework.zend.com/manual/1.12/en/zend.controller.action.html#zend.controller.action.utilmethods)`exit`上设置选项，否则您可能希望考虑使用[操作帮助器 redirector()](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.redirector)，因为它具有更多可用功能。

> *我想要的第二件事是，当我向肥皂服务器请求时，屏幕将显示处理图像。*

此功能通常使用 javascript 实现，您不妨探索[jquery javascript 库](http://jquery.com/)作为 javascript 捷径。

# firefox - 如何更改 Firefox 的 about:home 页面的主题？

> ID：13138356
> 
> 赞同：0
> 
> 时间：2012-10-30T11:49:12.720
> 
> 标签：firefox, themes

我想创建一个主题，我还需要自定义 about:home 页面。我从图书馆下载的所有主题都没有改变 about:home page。我知道如何手动更改 about:home，但我需要使用主题进行更改。可能吗？

库中的 PS 主题具有不同 about:home 页面的屏幕截图。但是我的 Firefox 16.0.2 并没有改变关于：主页。mb这个功能被删除了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:10:48.470

我不确定解决方案，但您可能会通过以下步骤获得一些线索：

*   在 Firefox 上运行 about:config
*   点击“我会小心的，我保证”
*   您将获得浏览器的配置，只需在搜索框中输入配置名称

你可能会得到任何线索来完成你的任务。

# android - Android 日历同步

> ID：13138362
> 
> 赞同：0
> 
> 时间：2012-10-30T11:49:49.400
> 
> 标签：android, jquery, mobile, calendar, sync

我有一个用 jQuery 制作的日历。我已经将它部署在网络上。我需要将日历事件与 Android 移动日历同步。有什么办法可以做到这一点？欢迎提供教程。

谢谢，安基特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:56:43.607

您无法使用网络应用程序与本地日历同步，因为您无权访问 android 意图等。但是您可以将事件与与用户手机关联的 Google 日历同步，Android 会自动将这些事件与其本地日历同步。

在此处查看 Google 日历 API：

[https://developers.google.com/google-apps/calendar/](https://developers.google.com/google-apps/calendar/)

更新：

如果您从应用程序中获取 ical 文件，那么您必须解析 iCal 文件并从中获取事件数据，然后使用 Google Calendar API 将这些事件导入其中。

在此处查看如何在 js 中解析 ical 文件：

[如何使用 JavaScript 解析日历文件日期？](https://stackoverflow.com/questions/8657958/how-to-parse-calendar-file-dates-with-javascript)

你也可以试试这个库：

[https://github.com/thybag/JavaScript-Ical-Parser](https://github.com/thybag/JavaScript-Ical-Parser)

# api - 对 ColdFusion 的卷曲呼叫 - Instagram

> ID：13138365
> 
> 赞同：1
> 
> 时间：2012-10-30T11:49:56.467
> 
> 标签：api, curl, instagram, railo, cfml

我根本没有使用 cURL 的经验，但据我所知，它相当于 cfhttp。

我想使用 Instagram API 并对用户进行身份验证。他们的示例使用 cURL。

```
curl \-F 'client_id=CLIENT-ID' \
    -F 'client_secret=CLIENT-SECRET' \
    -F 'grant_type=authorization_code' \
    -F 'redirect_uri=YOUR-REDIRECT-URI' \
    -F 'code=CODE' \https://api.instagram.com/oauth/access_token 
```

我认为 CF 版本是正确的：

```
<cfhttp url="https://api.instagram.com/oauth/access_token" method="post" resolveurl="true">
    <cfhttpparam type="formField" name="client_id" value="CLIENT-ID" />
    <cfhttpparam type="formField" name="client_secret" value="CLIENT-SECRET" />
    <cfhttpparam type="formField" name="grant_type" value="authorization_code" />
    <cfhttpparam type="formField" name="redirect_uri" value="YOUR-REDIRECT-URI" />
    <cfhttpparam type="formField" name="code" value="code" />
</cfhttp> 
```

我还不能尝试这个，因为直到很久以后我才会在我的开发机器上，所以我现在只是在四处寻找可能性并制作伪代码（未经测试！）。

任何对 Instagram API 和 ColdFusion 有特定经验的人，如果能从中获得一些见解，我们将不胜感激。

我正在使用Railo。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T12:13:06.737

According to how to use cURL the -F option is form data.

> [http://curl.haxx.se/docs/manpage.html](http://curl.haxx.se/docs/manpage.html)

So you're going to want to send form data, not url data in your cfhttpparam tags.

```
<cfhttp url="https://api.instagram.com/oauth/access_token" method="post" resolveurl="true">
    <cfhttpparam type="formField" name="client_id" value="CLIENT-ID" />
    <cfhttpparam type="formField" name="client_secret" value="CLIENT-SECRET" />
    <cfhttpparam type="formField" name="grant_type" value="authorization_code" />
    <cfhttpparam type="formField" name="redirect_uri" value="YOUR-REDIRECT-URI" />
    <cfhttpparam type="formField" name="code" value="code" />
</cfhttp> 
```

I don't know anything about the Instagram API and only what I read in the above link about cURL so this may not be the complete solution but it looks like you're on the right track.

# html - MVC 4，HTML 输入标记抛出“未终止的字符串常量”

> ID：13138366
> 
> 赞同：0
> 
> 时间：2012-10-30T11:49:58.773
> 
> 标签：html, razor, syntax-error

嗨，每当我尝试在 html 中创建按钮时，我都会收到此错误。错误：“未终止的字符串常量”这是代码：

```
<input id="topImageNavigationPreviousButton" type="button" value="Previous" class="inline" onclick="location.href='@Url.Action("Index", "Home", new { id = (id + (startIndex - endIndex) + 1) })'"/> 
```

我正在使用 MVC 4 Razor。如果您希望我发布更多我的代码，请告诉我:)

（PS：有人可以告诉我如何换行该代码吗？试过了`<br/>`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:54:25.313

未终止的字符串常量是因为缺少右引号。很确定您在语法上犯了一些错误。

```
onclick="location.href='@Url.Action("Index", "Home", new { id = (id + (startIndex - endIndex) + 1) })'" 
```

# mysql - Wordpress 自定义查询：来自一种帖子类型的交叉引用自定义分类与来自另一种类型的自定义元

> ID：13138368
> 
> 赞同：0
> 
> 时间：2012-10-30T11:50:00.880
> 
> 标签：mysql, wordpress

我在使用自定义 Wordpress MySQL 查询时遇到问题。我的情况是这样的：我有用于帖子的常规帖子类型“帖子”和用于有关作者信息的自定义帖子类型“作者”。“作者”帖子类型包含所有作者，但并非所有人都需要是帖子的作者。

每个帖子（“帖子”和“作者”类型）都有一个带有作者确切姓名的自定义分类法（例如“John Smith”）。帖子类型“作者”具有作者的名字和姓氏的附加自定义元值（因为它们可能变得复杂并且更容易按姓氏、名字排序）。

现在我正在尝试选择所有已发布帖子的作者，计算他们的帖子数量并显示与他们的姓名相关联的元值。我不确定如何交叉引用来自一种帖子类型（'post'）的分类法与一行中的另一种（'author'）的元值。

我想要的是：

```
John Smith    John    Smith    10 
```

到目前为止我得到了什么：

```
John Smith    10    John
John Smith    10    Smith 
```

我坚持下面的查询。任何帮助都感激不尽！

```
SELECT
    N, C, meta_value
    FROM
        (SELECT
            t.name AS N, count(*) AS C
                FROM
                    wp_2_posts p
                    INNER JOIN wp_2_term_relationships AS tr ON p.ID=tr.object_id
                    INNER JOIN wp_2_term_taxonomy AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
                    INNER JOIN wp_2_terms AS t ON tt.term_id = t.term_id
                WHERE 1=1
                    AND tt.taxonomy = 'myauthor'
                    AND p.post_type = 'post'
                    AND p.post_status = 'publish'
                GROUP BY
                    N
                ORDER BY
                C DESC) AS x
        INNER JOIN wp_2_posts p2
        INNER JOIN wp_2_term_relationships AS tr2 ON p2.ID=tr2.object_id
        INNER JOIN wp_2_term_taxonomy AS tt2 ON tr2.term_taxonomy_id = tt2.term_taxonomy_id
        INNER JOIN wp_2_terms AS t2 ON tt2.term_id = t2.term_id
        INNER JOIN wp_2_postmeta AS m2 ON m2.post_id = p2.ID
            WHERE 1=1
                AND post_type = 'author'
                AND t2.name = x.N
                AND (m2.meta_key = 'lastname' OR m2.meta_key = 'firstname') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:57:41.460

这是一个相当丑陋的解决方案，关于如何改进它的任何想法？

```
SELECT
    N, C, m2.meta_value AS L, m3.meta_value AS F
    FROM
        (SELECT
            t.name AS N, count(*) AS C
                FROM
                    wp_2_posts p
                    INNER JOIN wp_2_term_relationships AS tr ON p.ID=tr.object_id
                    INNER JOIN wp_2_term_taxonomy AS tt ON tr.term_taxonomy_id = tt.term_taxonomy_id
                    INNER JOIN wp_2_terms AS t ON tt.term_id = t.term_id
                WHERE 1=1
                    AND tt.taxonomy = 'myauthor'
                    AND p.post_type = 'post'
                    AND p.post_status = 'publish'
                GROUP BY
                    N) AS x
        INNER JOIN wp_2_posts p2
        INNER JOIN wp_2_term_relationships AS tr2 ON p2.ID=tr2.object_id
        INNER JOIN wp_2_term_taxonomy AS tt2 ON tr2.term_taxonomy_id = tt2.term_taxonomy_id
        INNER JOIN wp_2_terms AS t2 ON tt2.term_id = t2.term_id
        INNER JOIN wp_2_postmeta AS m2 ON m2.post_id = p2.ID
        INNER JOIN wp_2_posts p3
        INNER JOIN wp_2_term_relationships AS tr3 ON p3.ID=tr3.object_id
        INNER JOIN wp_2_term_taxonomy AS tt3 ON tr3.term_taxonomy_id = tt3.term_taxonomy_id
        INNER JOIN wp_2_terms AS t3 ON tt3.term_id = t3.term_id
        INNER JOIN wp_2_postmeta AS m3 ON m3.post_id = p3.ID
            WHERE 1=1
                AND p3.post_type = 'author'
                AND t3.name = x.N
                AND m3.meta_key = 'firstname'
                AND p2.post_type = 'author'
                AND t2.name = x.N
                AND m2.meta_key = 'lastname'
    ORDER BY
        C DESC,
        L 
```

# java - 写入的字节太多 - HttpsURLConnection

> ID：13138369
> 
> 赞同：1
> 
> 时间：2012-10-30T11:50:10.740
> 
> 标签：java, networking

我编写了一个测试 servlet 性能的应用程序。我编写的代码可以很好地处理一些请求。如果我增加更多的连接，那么有时我会得到“写入的字节太多”异常。

```
int startRange = 0, endRange = 10000;
HttpsURLConnection c = null;

c = getHttpsConnection(URL);
c.setDoInput(true);
c.setDoOutput(true);
c.setRequestProperty("Content-Length",(cotentLength+1));
c.setFixedLengthStreamingMode(contentLength+1);
c.setRequestProperty("Content-Type","appplication/zip");
c.setRequestMethod("POST");
c.setRequestProperty("Content-Range", "bytes "+startRange+"-"+endRange+"/"+filesize);

OutputStream op = c.getOutputStream(); 
```

我计算要发送到的固定块`byte[] partBuf = new byte[contentLength+1];`

然后

```
op.write(partBuf)
String range = c.getHeaderField("Range");

in.close();
op.flush();
op.close(); 
```

在发送的某些请求之前，我没有收到“太多字节写入错误”，发送的请求太多有时只会给我这个错误..我该如何处理这种情况？

通常为了测试，我会产生一些从 10、100、500、1000 .. 不等的请求，这些请求又会命中一个以块的形式接收数据的 servlet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:04:00.547

您的示例代码中有许多错字，因此不清楚您的真实代码是做什么的。然而，这看起来非常错误：

```
 c.setRequestProperty("Content-Range", startRange-endRange/filesize); 
```

该标头的内容应该是一个字符串，但您似乎正在发送一个整数值。这是 HTTP 1.1 规范中标头*的*示例。

```
 HTTP/1.1 206 Partial content
   Date: Wed, 15 Nov 1995 06:25:24 GMT
   Last-Modified: Wed, 15 Nov 1995 04:58:08 GMT
   Content-Range: bytes 21010-47021/47022
   Content-Length: 26012
   Content-Type: image/gif 
```

* * *

您编辑的版本仍然不正确。应该是这样的：

```
c.setRequestProperty("Content-Range", 
                     "bytes " + startRange + "-" + endRange + "/" + filesize); 
```

...假设这些变量具有适当的值。

* * *

现在您已经修复了这些错误，我的下一个怀疑点是值本身......以及`contentLength`值。

如果这不是答案，请考虑服务器或 servlet 不支持 POST 的“Content-Range”的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-07T13:52:59.957

我遇到了这个`java.io.IOException: too many bytes to write to stream`错误，它是由于正文中的非 ASCII 字符而发生的。发送代码错误地假定文本长度等于字符数。由于代码是一个测试工具，删除这些字符比修复代码更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-03T14:31:03.260

`c.setFixedLengthStreamingMode(x)`要求您将字节**准确** `x`写入流。来自 Javadocs：

> 如果应用程序尝试写入超过指定内容长度的数据，或者应用程序在写入指定数量之前关闭了 OutputStream，则会引发异常。

例如，当我犯了以下愚蠢的错误时，我遇到了类似的问题：

```
http.setFixedLengthStreamingMode(body.length());
try (OutputStream os = http.getOutputStream()) {
    os.write(body.getBytes("UTF-8"));
} ... 
```

这一直有效，直到重音字符出现在`body`. 这使得字节长度与字符串长度不同，从而导致`java.io.IOException: too many bytes written`.

更令人困惑的是，try-with-resources 导致了另一个异常：`Suppressed: java.io.IOException: insufficient data written`. 我仍然不确定它是从哪里来的，但是当我通过适当的长度时它就消失了`setFixedLengthStreamingMode`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T20:55:00.253

您设置了错误的内容长度值。根本不需要设置它：Java 会为您完成。只需删除代码。

# objective-c - 带有图像的 UIPageViewController 使应用程序崩溃

> ID：13138371
> 
> 赞同：1
> 
> 时间：2012-10-30T11:50:23.727
> 
> 标签：objective-c, uipageviewcontroller

我使用了一个 UIPageViewController 我想显示 24 个页面，每个页面都不是文本，而是 contentview 控制器中的图像，我使用此代码

```
 self.imgView.image=nil;
 self.imgView.image= [UIImage imageNamed:[NSString  stringWithFormat:@"image%d.jpg",index+1]];

 if(self.categoryId==3 ||self.categoryId==4)
 {
     self.imgView.contentMode=UIViewContentModeScaleToFill;
 }
 else
 {
     self.imgView.contentMode=UIViewContentModeScaleAspectFit;
 } 
```

但问题是当我运行应用程序并在 17 或 18 页之后翻页时，它会给我一个内存警告，我的应用程序崩溃了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:24:28.167

您可以尝试使用：

```
NSString* imgFile = [NSString  stringWithFormat:@"image%d",index+1];
NSString* pathToImageFile = [[NSBundle mainBundle] pathForResource:imgFile ofType:@"jpg"];
self.imgView.image = [UIImage imageWithContentsOfFile:pathToImageFile]; 
```

事实上，`imageNamed`缓存您通过它加载的所有图像。缓存变得越来越大，它会阻止内存被适当地释放。

# android - 操作栏的项目重叠应用程序的名称？

> ID：13138376
> 
> 赞同：1
> 
> 时间：2012-10-30T11:50:36.553
> 
> 标签：android, android-actionbar

![图片](../Images/1a69608b439fa8f78fee2c3f5e3b2438.png)

如你们所见，我的应用程序名称已与操作栏的项目重叠。我在操作栏中只有两个项目。
是否可以在那里只显示一个项目，以便它不能与溢出菜单中的应用程序名称和其余项目重叠（默认行为..）？想知道为什么它没有感知应用程序名称并相应地安排其项目？

编辑（actionbar.xml）：

```
 <item
    android:id="@+id/about"
    android:title="@string/about"
    android:showAsAction="ifRoom|withText"
    >
</item>
<item
    android:id="@+id/email"
    android:title="@string/email"
    android:showAsAction="ifRoom|withText">
</item> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T19:10:59.057

你在使用 ActionBarSherlock 吗？我相信我遇到了类似的问题，直到我将 androidManifest.xml 中的主题更改为从 Theme.Sherlock.ForceOverflow 派生

添加到 AndroidManifest.xml 下的 application 标签

android:theme="@style/Theme.Sherlock.ForceOverflow"

# actionscript-3 - Flare3D Flex Context3D 问题

> ID：13138379
> 
> 赞同：0
> 
> 时间：2012-10-30T11:50:52.793
> 
> 标签：actionscript-3, flash-builder, flare3d

我已逐步按照此 url [http://www.flare3d.com/blog/2011/03/10/flare3d-2-0-startup-with-flash-builder/上的说明构建 Flare3D 示例](http://www.flare3d.com/blog/2011/03/10/flare3d-2-0-startup-with-flash-builder/)

我修复了 wmode 以直接在我的 html 模板中用于 actionscript 项目，但是在构建来自 5th Flex 的示例时，由于项目中存在错误，因此拒绝编译。这些错误是： [https ://dl.dropbox.com/u/4064417/FlareProblems.jpg](https://dl.dropbox.com/u/4064417/FlareProblems.jpg)

您对如何解决它们有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:27:43.047

我链接的指南很旧！因为我使用的是 Flash Builder 4.6，所以我只去了 Project > Properties > ActionScript Compiler 并选择了 Flex 4.6 sdk！

这使得所有错误都消失了。

问题是 display3d 仅存在于 flashplayer 11 中，指南告诉我选择 10.2，这是错误的！

希望这对其他人也有帮助！

# php - symfony 2 中不显示非英文字符

> ID：13138380
> 
> 赞同：5
> 
> 时间：2012-10-30T11:50:56.413
> 
> 标签：php, symfony, doctrine-orm, twig

我正在尝试从 MySQL 中的一张表中检索数据。我已经设置了数据库和 symfony 2 来支持 utf8 中的数据交换。但是，例如，当我想显示具有两列（id、名称）的“类别”表中的所有类别时，不显示俄语等非英文字符。在 parameters.yml 中，我已将语言环境更改为 ru_RU - 无效。我在 symfony 2.2-DEV 中使用 Doctrine2，Twig。感谢任何帮助。

```
<ul>
    {% for category in categories %}
        <li><a href="#">{{ category.id }} : {{ category.name }}</li>
    {% endfor %}
</ul> 
```

**更新：**我已经解决了这个问题，实际上我的 MySQL 服务器设置为同时接受 utf8 和 cp1251，这是一个问题。当我将 my.ini 中的所有内容都更改为 utf8 时，问题就消失了。我想我们可以结束这个问题。

# maven-3 - maven-3.0.4 中的 maven-glassfish-plugin

> ID：13138383
> 
> 赞同：1
> 
> 时间：2012-10-30T11:51:00.360
> 
> 标签：maven-3, glassfish-2.x, maven-glassfish-plugin

运行时`mvn install glassfish:deploy`我遇到以下问题

```
[...]
[ERROR] Failed to execute goal org.glassfish.maven.plugin:maven-glassfish-plugin:2.1:deploy (default-cli) on project post-build-pom: Execution default-cli of goal org.glassfish.maven.plugin:maven-glassfish-plugin:2.1:deploy failed: Plugin o    rg.glassfish.maven.plugin:maven-glassfish-plugin:2.1 or one of its dependencies could not be resolved: Failed to collect dependencies for org.glassfish.maven.plugin:maven-glassfish-plugin:jar:2.1 (): Failed to read artifact descriptor for org.apache.maven:maven-plugin-api:jar:3.0-SONATYPE-688946: Failure to find org.apache.maven:maven-parent:pom:9-SNAPSHOT in http://maven-repository/content/groups/public was cached in the local repository, resolution will not be reattempted until the update interval of internal-repository has elapsed or updates are forced -> [Help 1]
[...] 
```

我的`mvn -v`样子是这样的：

`Apache Maven 3.0.4 (r1232337; 2012-01-17 09:44:56+0100) Maven home: C:\Users\rob\apache-maven-3.0.4\bin\.. Java version: 1.6.0_37, vendor: Sun Microsystems Inc. Java home: C:\Programme\Java\jdk1.6.0_37\jre Default locale: de_DE, platform encoding: Cp1252 OS name: "windows 7", version: "6.1", arch: "amd64", family: "windows"`

此外，我的 nexus-repository 运行在`http://maven-repository`.

编辑： pom.xml 的插件部分如下所示：

```
<plugin>
    <groupId>org.glassfish.maven.plugin</groupId>
    <artifactId>maven-glassfish-plugin</artifactId>
    <version>2.1</version>
    <configuration>
        <user>admin</user>
        <adminPassword>adminadmin</adminPassword>
        <glassfishDirectory>c:\development\glassfish-v2.1.1-b31g</glassfishDirectory>
    </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T06:32:02.593

你不是那里唯一面临问题的人:)

似乎甚至有官方的错误报告：http: [//java.net/jira/browse/GLASSFISH-14411](http://java.net/jira/browse/GLASSFISH-14411)

作为此处建议的解决方法：http: [//jira.codehaus.org/browse/MNG-4843](http://jira.codehaus.org/browse/MNG-4843) 您应该使用正确的版本覆盖项目中的插件依赖项。

以下应该可以解决您的问题：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.glassfish.maven.plugin</groupId>
            <artifactId>maven-glassfish-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <user>admin</user>
                <adminPassword>adminadmin</adminPassword>
                <glassfishDirectory>c:\development\glassfish-v2.1.1-b31g</glassfishDirectory>
            </configuration>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-project</artifactId>
        <version>3.0-alpha-2</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-plugin-api</artifactId>
        <version>3.0.4</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.maven</groupId>
        <artifactId>maven-artifact</artifactId>
        <version>3.0.4</version>
        <scope>provided</scope>
    </dependency>
</dependencies> 
```

当然，您需要提供所需的所有配置，但这是另一个主题：http: [//maven-glassfish-plugin.java.net/examples/complete.html](http://maven-glassfish-plugin.java.net/examples/complete.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T10:40:43.133

我找到了另一种方法来解决这个问题：

1.  将文件“C:\Users\<当前用户>\.m2\repository\org\apache\maven\maven-parent\11\maven-parent-11.pom”复制到“C:\Users\<当前用户>\ .m2\repository\org\apache\maven\maven-parent\11-SNAPSHOT\"

2.  并将其重命名为“maven-parent-11-SNAPSHOT.pom”

# symfony - 如何覆盖表单中的 symfony2 悬停消息？

> ID：13138384
> 
> 赞同：0
> 
> 时间：2012-10-30T11:51:03.743
> 
> 标签：symfony

我创建了一个 symfony2 表单，我想覆盖悬停消息（当您将鼠标放在输入上时）。有这样的消息“请填写此字段”。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:54:01.347

这是 HTML5 验证

检查文档：[http ://symfony.com/doc/current/book/forms.html#book-forms-html5-validation-disable](http://symfony.com/doc/current/book/forms.html#book-forms-html5-validation-disable)

> 但是，可以通过将 novalidate 属性添加到表单标签或将 formnovalidate 属性添加到提交标签来禁用客户端验证。

# avfoundation - 如何使用 AVAssetWriter 将 h264 strem 写入视频？

> ID：13138385
> 
> 赞同：4
> 
> 时间：2012-10-30T11:51:04.980
> 
> 标签：avfoundation, h.264, avassetwriter

我想让 h.264 流从服务器到视频文件，但是当我使用时`assetwrite.finishwrite`，XCode 报告

```
Video /var/mobile/Applications/DE4196F1-BB77-4B7D-8C20-7A5D6223C64D/Documents/test.mov cannot be saved to the saved photos album: Error Domain=NSOSStatusErrorDomain Code=-12847 "This movie format is not supported." UserInfo=0x5334830 {NSLocalizedDescription=This movie format is not supported.}" 
```

下面是我的代码：data是h.264帧，只有一帧，可能是i帧或p。

```
(void)_encodeVideoFrame2:(NSData *) data time:(double)tm 
{
  CMBlockBufferRef videoBlockBuffer=NULL;
  CMFormatDescriptionRef videoFormat=NULL;
  CMSampleBufferRef videoSampleBuffer=NULL;
  CMItemCount numberOfSampleTimeEntries=1;
  CMItemCount numberOfSamples=1;
  CMVideoFormatDescriptionCreate(kCFAllocatorDefault, kCMVideoCodecType_H264, 320, 240, NULL, &videoFormat);
  OSStatus result;
  result=CMBlockBufferCreateWithMemoryBlock(kCFAllocatorDefault, NULL, data.length, kCFAllocatorDefault, NULL, 0, data.length, kCMBlockBufferAssureMemoryNowFlag, &videoBlockBuffer);
  result=CMBlockBufferReplaceDataBytes(data.bytes, videoBlockBuffer, 0, data.length);
  CMSampleTimingInfo videoSampleTimingInformation={CMTimeMake(tm*600, 600)};
  size_t sampleSizeArray[1];
  sampleSizeArray[0]=data.length;
  result=CMSampleBufferCreate(kCFAllocatorDefault, videoBlockBuffer, TRUE, NULL, NULL, videoFormat, numberOfSamples, numberOfSampleTimeEntries, &videoSampleTimingInformation, 1, sampleSizeArray, &videoSampleBuffer);
  result = CMSampleBufferMakeDataReady(videoSampleBuffer);
  [assetWriterInput appendSampleBuffer:videoSampleBuffer]; 
} 
```

也许`CMSampleBufferCreate`论点是错误的？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T07:17:52.893

# 试试这个代码

```
 *   (IBAction)createVideo:(id)sender {

    ///////////// setup OR function def if we move this to a separate function ////////////
    // this should be moved to its own function, that can take an imageArray, videoOutputPath, etc...
    //    - (void)exportImages:(NSMutableArray *)imageArray
    // asVideoToPath:(NSString *)videoOutputPath
    // withFrameSize:(CGSize)imageSize
    // framesPerSecond:(NSUInteger)fps {

    NSError *error = nil;

    // set up file manager, and file videoOutputPath, remove "test_output.mp4" if it exists...
    //NSString *videoOutputPath = @"/Users/someuser/Desktop/test_output.mp4";
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *documentsDirectory = [NSHomeDirectory()
                                    stringByAppendingPathComponent:@"Documents"];
    NSString *videoOutputPath = [documentsDirectory stringByAppendingPathComponent:@"test_output.mp4"];
    //NSLog(@"-->videoOutputPath= %@", videoOutputPath);
    // get rid of existing mp4 if exists...
    if ([fileMgr removeItemAtPath:videoOutputPath error:&error] != YES)
        NSLog(@"Unable to delete file: %@", [error localizedDescription]);

    CGSize imageSize = CGSizeMake(400, 200);
    NSUInteger fps = 30;

    //NSMutableArray *imageArray;
    //imageArray = [[NSMutableArray alloc] initWithObjects:@"download.jpeg", @"download2.jpeg", nil];
    NSMutableArray *imageArray;
    NSArray* imagePaths = [[NSBundle mainBundle] pathsForResourcesOfType:@"jpg" inDirectory:nil];
    imageArray = [[NSMutableArray alloc] initWithCapacity:imagePaths.count];
    NSLog(@"-->imageArray.count= %i", imageArray.count);
    for (NSString* path in imagePaths)
    {
        [imageArray addObject:[UIImage imageWithContentsOfFile:path]];
        //NSLog(@"-->image path= %@", path);
    }

    //////////////     end setup    ///////////////////////////////////

    NSLog(@"Start building video from defined frames.");

    AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:
                                  [NSURL fileURLWithPath:videoOutputPath] fileType:AVFileTypeQuickTimeMovie
                                                              error:&error];
    NSParameterAssert(videoWriter);

    NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                   AVVideoCodecH264, AVVideoCodecKey,
                                   [NSNumber numberWithInt:imageSize.width], AVVideoWidthKey,
                                   [NSNumber numberWithInt:imageSize.height], AVVideoHeightKey,
                                   nil];

    AVAssetWriterInput* videoWriterInput = [AVAssetWriterInput
                                            assetWriterInputWithMediaType:AVMediaTypeVideo
                                            outputSettings:videoSettings];

    AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor
                                                     assetWriterInputPixelBufferAdaptorWithAssetWriterInput:videoWriterInput
                                                     sourcePixelBufferAttributes:nil];

    NSParameterAssert(videoWriterInput);
    NSParameterAssert([videoWriter canAddInput:videoWriterInput]);
    videoWriterInput.expectsMediaDataInRealTime = YES;
    [videoWriter addInput:videoWriterInput];

    //Start a session:
    [videoWriter startWriting];
    [videoWriter startSessionAtSourceTime:kCMTimeZero];

    CVPixelBufferRef buffer = NULL;

    //convert uiimage to CGImage.
    int frameCount = 0;
    double numberOfSecondsPerFrame = 6;
    double frameDuration = fps * numberOfSecondsPerFrame;

    //for(VideoFrame * frm in imageArray)
    NSLog(@"**************************************************");
    for(UIImage * img in imageArray)
    {
        //UIImage * img = frm._imageFrame;
        buffer = [self pixelBufferFromCGImage:[img CGImage]];

    ```
    BOOL append_ok = NO;
    int j = 0;
    while (!append_ok && j < 30) {
        if (adaptor.assetWriterInput.readyForMoreMediaData)  {
            //print out status:
            NSLog(@"Processing video frame (%d,%d)",frameCount,[imageArray count]);

            CMTime frameTime = CMTimeMake(frameCount*frameDuration,(int32_t) fps);
            append_ok = [adaptor appendPixelBuffer:buffer withPresentationTime:frameTime];
            if(!append_ok){
                NSError *error = videoWriter.error;
                if(error!=nil) {
                    NSLog(@"Unresolved error %@,%@.", error, [error userInfo]);
                }
            }
        }
        else {
            printf("adaptor not ready %d, %d\n", frameCount, j);
            [NSThread sleepForTimeInterval:0.1];
        }
        j++;
    }
    if (!append_ok) {
        printf("error appending image %d times %d\n, with error.", frameCount, j);
    }
    frameCount++; 
    ```

    }
    NSLog(@"**************************************************");

    //Finish the session:
    [videoWriterInput markAsFinished];
    [videoWriter finishWriting];
    NSLog(@"Write Ended");

    ////////////////////////////////////////////////////////////////////////////
    //////////////  OK now add an audio file to move file  /////////////////////
    AVMutableComposition* mixComposition = [AVMutableComposition composition];

    NSString *bundleDirectory = [[NSBundle mainBundle] bundlePath];
    // audio input file...
    NSString *audio_inputFilePath = [bundleDirectory stringByAppendingPathComponent:@"30secs.mp3"];
    NSURL    *audio_inputFileUrl = [NSURL fileURLWithPath:audio_inputFilePath];

    // this is the video file that was just written above, full path to file is in --> videoOutputPath
    NSURL    *video_inputFileUrl = [NSURL fileURLWithPath:videoOutputPath];

    // create the final video output file as MOV file - may need to be MP4, but this works so far...
    NSString *outputFilePath = [documentsDirectory stringByAppendingPathComponent:@"final_video.mp4"];
    NSURL    *outputFileUrl = [NSURL fileURLWithPath:outputFilePath];

    if ([[NSFileManager defaultManager] fileExistsAtPath:outputFilePath])
        [[NSFileManager defaultManager] removeItemAtPath:outputFilePath error:nil];

    CMTime nextClipStartTime = kCMTimeZero;

    AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:video_inputFileUrl options:nil];
    CMTimeRange video_timeRange = CMTimeRangeMake(kCMTimeZero,videoAsset.duration);
    AVMutableCompositionTrack *a_compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    [a_compositionVideoTrack insertTimeRange:video_timeRange ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];

    //nextClipStartTime = CMTimeAdd(nextClipStartTime, a_timeRange.duration);

    AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL:audio_inputFileUrl options:nil];
    CMTimeRange audio_timeRange = CMTimeRangeMake(kCMTimeZero, audioAsset.duration);
    AVMutableCompositionTrack *b_compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    [b_compositionAudioTrack insertTimeRange:audio_timeRange ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:nextClipStartTime error:nil];

    //AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];
    __block AVAssetExportSession* _assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetPassthrough];

    NSLog(@"support file types= %@", [_assetExport supportedFileTypes]);
    _assetExport.outputFileType = @"com.apple.quicktime-movie";
    NSLog(@"support file types= %@", [_assetExport supportedFileTypes]);
    _assetExport.outputURL = outputFileUrl;

    [_assetExport exportAsynchronouslyWithCompletionHandler:^{
        switch (_assetExport.status) {
            case AVAssetExportSessionStatusCompleted:
                // Custom method to import the Exported Video
                NSLog(@"completed!!!");
                break;
            case AVAssetExportSessionStatusFailed:
                //
                NSLog(@"Failed:%@",_assetExport.error);
                break;
            case AVAssetExportSessionStatusCancelled:
                //
                NSLog(@"Canceled:%@",_assetExport.error);
                break;
            default:
                break;
        }
    }];

    ///// THAT IS IT DONE... the final video file will be written here...
    NSLog(@"DONE.....outputFilePath--->%@", outputFilePath);

    // the final video file will be located somewhere like here:
    // /Users/caferrara/Library/Application Support/iPhone Simulator/6.0/Applications/D4B12FEE-E09C-4B12-B772-7F1BD6011BE1/Documents/outputFile.mov

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-20T05:01:12.920

为了将已压缩的 h264 缓冲区与 混合`AVAssetWriter`，您必须指定一个`nil`OutputSettings，这与文档所述相反。

所以，而不是做

```
videoInput = [[AVAssetWriterInput alloc] 
    initWithMediaType:AVMediaTypeVideo outputSettings:@{
        AVVideoCodecKey: AVVideoCodecH264,
    }
    sourceFormatHint:myVideoFormat
]; 
```

你应该做

```
videoInput = [[AVAssetWriterInput alloc] 
    initWithMediaType:AVMediaTypeVideo
    outputSettings:nil
    sourceFormatHint:myVideoFormat
]; 
```

这将允许您传递视频或音频数据，而无需 AVAssetWriterInput 尝试为您编码/转码任何内容。

# asp.net - 在浏览器地址栏中输入 IP 地址时如何停止重定向到默认网站？

> ID：13138386
> 
> 赞同：0
> 
> 时间：2012-10-30T11:51:08.003
> 
> 标签：asp.net, iis, iis-6

我在我们的服务器上托管了多个网站。当有人在浏览器的地址栏中键入 IP 地址时，它会重定向到服务器上托管的网站之一。有什么方法可以设置当有人键入 IP 地址时打开的默认网站。多个网站共享相同的 IP 地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:56:49.250

1 个 IP 地址只能绑定到 1 个 IIS 条目。因此，您需要做的是选择您想要的 IIS 条目，进入“绑定”部分并将您的 IP 绑定为绑定标头。

例如：如果您的 IP 是 1.1.1.1 ，那么在绑定标头中，您输入 1.1.1.1，在 IP 地址中，您也选择 1.1.1.1。

设置此绑定后，您可以浏览到 1.1.1.1，它将打开您的站点。

请记住确保所有其他站点都没有此绑定。否则会产生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:29:28.010

All you have to do is *leave off* the IP address and host name entries, and provided you have only a single website matching that, that site will become the 'default', while your other sites will have specific host name(s) they respond to.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T11:58:35.493

我不确定，但您可能必须在`C:\\Windows\System32\drivers\etc\hosts`文件中添加特定主机，提供 IP 地址及其相应地址，这绝对可以通过登录到托管它的网站，即在托管服务器上。

对于从不同 IP 机器进行日志记录，请尝试相同的逻辑 - 在这种情况下，请确保 LAN 的网关相同。

让我们看看在这种情况下会发生什么？？

# linker - arm loader脚本的含义

> ID：13138389
> 
> 赞同：0
> 
> 时间：2012-10-30T11:51:25.570
> 
> 标签：linker, arm, embedded-linux, linker-scripts

```
OUTPUT_FORMAT("elf32-littlearm", "elf32-littlearm", "elf32-littlearm")
OUTPUT_ARCH(arm)
ENTRY(_ram_entry)
SECTIONS
{
    . = 0xA0008000;

    . = ALIGN(4);
    .text : { *(.text) }

    . = ALIGN(4);
    .rodata : { *(.rodata) }

    . = ALIGN(4);
    .data : { *(.data) }

    . = ALIGN(4);
    .got : { *(.got) }

    . = ALIGN(4);
    .bss : { *(.bss) }
} 
```

我得到了 output_format、output_arch、entry... 可能意味着输出将是 elf32-littlearm 等等。

但是 Sections 部分是我没有得到的。

这个 '。=' 是开始。

和 '。= ALIGN(4)' 和 .text : { *(.text) } ....

谁能帮我解决这个T_T

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:42:11.723

实际上，这个链接器描述语言是在我上次检查的 ld 的文档中定义的。它并不像看起来那么糟糕。基本上，“。” 运算符指的是“当前位置指针”。所以，线

```
. = 0xA0008000 
```

表示将位置指针移动到该值。下一个条目 .text 基本上表示将所有文本对象放入最终 ELF 文件中的 .text 部分，从位置指针开始（它也被调整为具有 4 字节（32 位）对齐。）请注意，第一次使用 ALIGN 可能是多余的，因为 0xA0008000 已经是 32 位对齐的！

接下来的部分简单地指示链接器将所有输入对象的所有 .rodata、.data、.got 和 .bss 部分的集合按顺序发送到 ELF 二进制文件的最后相应部分，从 32 位对齐的地址开始。

因此，链接器生成的最终 ELF 二进制文件将分别并按顺序包含这五个部分。您可以使用 readelf 实用程序查看最终 ELF 二进制文件的结构。它非常有用，有助于理解所有这些东西。通常有一个跨版本的 readelf，比如 arm-linux-gnueabi-readelf，或者任何用于生成您正在使用的编译器/链接器的前缀。从 readelf -S 开始以获取 ELF 文件包含的部分的摘要。然后你可以从那里探索。快乐阅读！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:22:54.190

```
 . = 0xA0008000; 
```

我认为，但我不是 100% 确定，arm 将在哪里开始执行二进制文件

```
 . = ALIGN(4); 
```

定义如何对齐以下指令。

`.text`, `.data`,`.rodata`和`.got`. `bss`是程序的部分。text 用于指令，data 和 rodata 用于初始化数据部分，bss 用于未初始化数据部分。got 是全局偏移表。

```
 .text : { *(.text) } 
```

这复制了所有指令，类似的命令用于数据和全局偏移表。

# c# - UserPrincipal.GetGroups 仅在域中的一台服务器上崩溃

> ID：13138397
> 
> 赞同：1
> 
> 时间：2012-10-30T11:51:36.543
> 
> 标签：c#, .net, active-directory, userprincipal

我在使用 .NET 的 UserPrincipal.GetGroups() 方法时遇到问题。

在我域中的几乎所有系统上，我都可以调用

```
var groups = UserPrincipal.Current.GetGroups().ToArray() 
```

它会返回当前用户所在的组。但是有一个 Windows 2008 R2 Enterprise Server 在执行此操作时会崩溃并显示以下消息：

服务器无法运行。名称：TESTDOMAIN.ORG

我认为该服务器以某种方式具有不同的配置，但它属于同一域。

```
Console.WriteLine(
  new DirectoryEntry("LDAP://RootDSE")
  .Properties["defaultNamingContext"]
  .Value
  .ToString()
); 
```

在所有系统上显示相同：DC=GLOBAL,DC=TESTDOMAIN,DC=ORG

我在哪里可以看？可能是什么问题呢 ？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T05:38:20.063

我终于找到了。问题是，服务器不知道使用什么标准网关。解决方案是转到网络选项，选择使用的 LAN 接口，编辑 IPv4 条目并设置标准网关。这样，网络将不再在网络邻域下显示为“未识别网络”，并且所有与 LDAP 相关的查询将再次起作用。

这个困扰了我好几天，所以我希望这个答案也能帮助你。

# c# - “对象”不包含“名称”的定义

> ID：13138406
> 
> 赞同：0
> 
> 时间：2012-10-30T11:52:02.953
> 
> 标签：c#, inheritance, polymorphism

我收到一条错误消息，告诉我：

“BankAccount.account”不包含“提款”的定义。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace BankAccounts
{
class account
{
    protected string name;
    protected float balance;
    public account(string n, float b)
    {
        name = n;
        balance = b;
    }

    public void deposit(float amt)
    {
        balance -= amt;
    }

    public void display()
    {
        Console.WriteLine("Name: {0}. Balance: {1}.", name, balance);
    }
}

class savingaccount : account
{
    static int accno = 1000;
    int trans;
    public savingaccount(string s, float b) : base(s, b)
    {
        trans = 0;
        accno++;
    }
    public void withdraw (float amt)
    {
        if (trans >= 10)
        {
            Console.WriteLine("Number of transactions exceed 10.");
            return;
        }
        if (balance - amt < 500)
            Console.WriteLine("Below minimum balance.");
        else
        {
            base.withdraw(amt);
            trans++;
        }
    }
    public void deposit(float amt)
    {
        if (trans >= 10)
        {
            Console.WriteLine("Number of transactions exceed 10.");
            return;
        }
        base.deposit(amt);
        trans++;
    }
    public void display()
    {
        Console.WriteLine("Name: {0}. Account no.: {1}. Balance: {2}", name, accno,        balance);
    }
}

class currentaccount : account
{
    static int accno = 1000;
    public currentaccount(string s, float b) : base(s, b)
    {
        accno++;
    }
    public void withdraw(float amt)
    {
        if (balance - amt < 0)
            Console.WriteLine("No balance in account.");
        else
            balance -= amt;
    }
    public void display()
    {
        Console.WriteLine("Name: {0}. Account no.: {1}. Balance: {2}.", name, accno, balance);
    }
} 
```

}

我不明白为什么它不识别它。它是类 Savingaccount 中的一个方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T11:55:42.077

你在打电话

```
base.withdraw(amt); 
```

从你的课`savingsaccount`上。但是基类 ( `account`) 没有这样的方法。所以编译器是绝对正确的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T12:01:52.497

看起来您只是错过了基本类型的方法：

```
public virtual void Deposit(float amt)
{
    balance += amt;
}
public virtual void Withdraw(float amt)
{
    balance -= amt;
} 
```

请注意，我将“存款”更改为`+=`，并创建了该方法`virtual`，以便子类可以`override`使用该方法，这就是（我强烈怀疑）这里的意图。此外，`float`对于存钱来说，这是一个非常糟糕的选择。`decimal`可能是更好的选择。作为风格上的改变，我还将名字大写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:00:07.880

我假设您的意图是`withdraw`在基`account`类中定义基本方法，以便它可以同时被`savingaccount`和继承`currentaccount`。如果需要，您应该将其声明为`virtual`允许它被派生类覆盖。

```
class account
{
    public virtual void withdraw(float amt)
    {
        if (balance - amt < 0)
            Console.WriteLine("No balance in account.");
        else
            balance -= amt;
    }
} 
```

该类`currentaccount`大概不需要修改这个继承方法的逻辑，所以可以完全省略。另一方面，在您的`savingaccount`类中，您可以重写该方法来实现您的自定义行为：

```
class savingaccount : account
{
    public override void withdraw(float amt)
    {
        if (trans >= 10)
        {
            Console.WriteLine("Number of transactions exceed 10.");
            return;
        }
        if (balance - amt < 500)
            Console.WriteLine("Below minimum balance.");
        else
        {
            base.withdraw(amt);
            trans++;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:36:44.353

正如大家已经指出的那样，您应该在您的基类帐户上声明withdraw() 方法，以便所有派生类都可以继承该方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T11:56:00.267

你`base.withdraw(amt)`在你的`savingaccount`类中调用，但是基类`account`没有定义这个方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T11:58:41.907

如果你仔细观察，你会发现你的`account`类实际上没有`withdraw`方法。

我猜你的意思是让你的`account`类包含一个虚拟方法`withdraw`，定义如下： `public virtual void withdraw(float amt) { ... }`

然后，在您继承的类中，您希望重写此方法，如下所示：

```
class currentaccount : account
{
    public override void withdraw(float amt)
    {
        ...
        base.withdraw(amt)
        ...
    }
    ...
} 
```

您的代码还有一个命名样式问题，但这可能不在这个问题的范围内:)

# android - 以全尺寸查看图像

> ID：13138407
> 
> 赞同：0
> 
> 时间：2012-10-30T11:52:07.797
> 
> 标签：android, android-gallery

我已经编写了在图库视图中打开图像的代码。我想在单击特定图像时查看图像的完整大小。现在我可以看到所有图像，但是当单击特定图像时出现异常。

```
private static final int SELECT_PICTURE = 1;
    private String selectedImagePath;
    ImageView img;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.mygrid);
        img=(ImageView)findViewById(R.id.img);
        Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(intent,
                "Select Picture"), SELECT_PICTURE);

    }
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE) {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
            }
        }
    }
    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        String filePath = cursor.getString(column_index);
        cursor.close();
        Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);
        img.setImageBitmap(yourSelectedImage);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

} 
```

堆栈跟踪

```
 10-30 17:27:15.109: E/AndroidRuntime(2085): FATAL EXCEPTION: main
 10-30 17:27:15.109: E/AndroidRuntime(2085): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://media/external/images/media/155 }} to activity {com.example.babysnap/com.example.babysnap.MyGrid}: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1 
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.app.ActivityThread.deliverResults(ActivityThread.java:2536)
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.app.ActivityThread.handleSendResult(ActivityThread.java:2578)
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.app.ActivityThread.access$2000(ActivityThread.java:117) 
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:965)
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.os.Handler.dispatchMessage(Handler.java:99) 
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.os.Looper.loop(Looper.java:130)       
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.app.ActivityThread.main(ActivityThread.java:3687) 
 10-30 17:27:15.109: E/AndroidRuntime(2085): at java.lang.reflect.Method.invokeNative(Native Method) 
 10-30 17:27:15.109: E/AndroidRuntime(2085): at java.lang.reflect.Method.invoke(Method.java:507) 
 10-30 17:27:15.109: E/AndroidRuntime(2085): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
 10-30 17:27:15.109: E/AndroidRuntime(2085): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636) 
 10-30 17:27:15.109: E/AndroidRuntime(2085): at dalvik.system.NativeStart.main(Native Method) 
 10-30 17:27:15.109: E/AndroidRuntime(2085): Caused by: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1 
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.database.CursorWrapper.getString(CursorWrapper.java:135) 
 10-30 17:27:15.109: E/AndroidRuntime(2085): at com.example.babysnap.MyGrid.getPath(MyGrid.java:53) 
 10-30 17:27:15.109: E/AndroidRuntime(2085): at com.example.babysnap.MyGrid.onActivityResult(MyGrid.java:44) 
 10-30 17:27:15.109: E/AndroidRuntime(2085): at android.app.Activity.dispatchActivityResult(Activity.java:3908) 
 10-30 17:27:15.109: E/AndroidRuntime(2085): atandroid.app.ActivityThread.deliverResults(ActivityThread.java:2532) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:04:10.967

我认为您应该`cursor.moveToFirst();`在关闭光标之前执行此操作。

此外，您可以尝试将 setImage 相关方法移至您的`onActivityResult`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:05:06.023

`cursor.moveToFirst();`在执行如下查询后立即尝试调用：

```
 Cursor cursor = managedQuery(uri, projection, null, null, null);
 cursor.moveToFirst(); 
```

您可能会得到 a `CursorIndexOutOfBoundsException`，因为您的光标指向 -1 位置，并且您试图访问它的内容而不将其移动到第一个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:05:38.170

`getColumnIndexOrThrow(MediaStore.Images.Media.DATA)`=====> -1

这是因为 MediaStore.Images.Media.DATA 不是游标中列的名称，否则....getColumnIndexOrThrow 必须是>-1 的整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:23:35.413

这是解决我的问题的链接 [http://viralpatel.net/blogs/pick-image-from-galary-android-app/](http://viralpatel.net/blogs/pick-image-from-galary-android-app/)

# struts2 - 可以使用struts 2在一页中加载和更新数据吗？

> ID：13138409
> 
> 赞同：1
> 
> 时间：2012-10-30T11:52:28.117
> 
> 标签：struts2

我想知道我是否可以使用 1 个动作来加载数据并更新它？

这意味着我有一个页面调用 about.jsp，经理将单击一个链接来访问该页面。重定向到此页面后，如果用户编辑了数据，则此页面会加载 about 的内容并更新内容，但两个任务可以使用 1 个操作。

我的想法是，用户使用操作调用 AboutAction 将数据加载到 about.jsp 页面，最终用户在 about.jsp 上编辑数据并单击提交后，它会将数据发送到 AboutAction 并更新它？

我可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:07:28.523

第一件事 你问的是 Struts2 的优点之一

**xml：**

```
<action name="AboutAction" class="AboutAction" method="load">
  <result>showMe.jsp</result>
  <result name="input">about.jsp</result>
</action>
<action name="AboutAction" class="AboutAction" method="update">
  <result>showMe.jsp</result>
  <result name="input">editsuccess.jsp</result>
</action> 
```

**行动 ：**

```
 public String load(){
     //logic to load
    return SUCCESS;
  }

  public String update(){
     //logic to update
    return SUCCESS;
  } 
```

# ruby-on-rails-3 - Rails 3-rails3 中 CSV.parse_line 的替代解决方案是什么

> ID：13138415
> 
> 赞同：0
> 
> 时间：2012-10-30T11:52:57.797
> 
> 标签：ruby-on-rails-3, csv

在 rails 2 中，我使用 CSV.parse_line 来读取 csv 文件。在 Rails 3 中，CSV.parse_line 不存在。我使用了 line.split，但是当一个单词中存在逗号 (,) 时它不起作用。它将它分成两列。

我想知道 Rails 3 中是否有 CSV.parse_line 的替代解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T22:18:24.913

[您可以使用一个名为smartcsv](https://github.com/tilo/smarter_csv)的替代 CVS 库。 它提供了比标准 Ruby 上的默认 CVS 解析器实现更好的文档和更多选项。

# arrays - 将（字符串）列表从数据读取器转换为字符串

> ID：13138416
> 
> 赞同：0
> 
> 时间：2012-10-30T11:53:02.720
> 
> 标签：arrays, vb.net, list

我已经从数据读取器中捕获了一些数据到一个列表中，现在我想知道将这些数据放入字符串中的最佳方法是什么。

我的要求是我需要从表中获取字段名称，然后将它们作为标题放在页面上。

```
 objConn = New SqlConnection(strConnection)
    objConn.Open()
    objCmd = New SqlCommand(strSQL, objConn)
    rsData = objCmd.ExecuteReader(0)

    If rsData.HasRows Then

        Do While (rsData.Read())

            Dim SubjectNames As New List(Of String)

            SubjectNames.Add(rsData.GetString("subject"))

        Loop

            SubjectList = SubjectNames.ToArray 
```

现在我在想 ToArray 并且想知道如何将所有列表条目输出到我以后可以使用的字符串中。

值得注意的是，我这样做是内联的，因为我必须使用的 CMS 不允许后面有任何代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:59:52.983

如果我理解正确，您不知道如何将 a 转换`List(Of String)`为字符串。您可以使用`String.Join`并指定要用于连接单词的字符串：

```
Dim SubjectNames As New List(Of String)
Do While (rsData.Read())
    SubjectNames.Add(rsData.GetString("subject"))
Loop

Dim headers As String = String.Join(", ",  SubjectNames) 
```

请注意，我已将列表的声明移到循环之外，否则您将始终为每条记录创建一个新列表。

**编辑**：所以你不知道如何访问 a `List`or中的元素`Array`。

a `List(Of String)`or`String()`中的元素已经是单独的字符串。您可以通过索引器访问每个元素。例如：`Dim firstSubject = SubjectNames(0)`或通过`Linq`: `firstSubject = SubjectNames.First()`。对于第 10 个元素：`Dim subject10 = SubjectNames(9)`因为索引是从零开始的。

[MSDN：Visual Basic 中的数组](http://msdn.microsoft.com/en-us/library/vstudio/wak0wfyt%28v=vs.100%29.aspx)

# .net - 如何在 C# 智能设备应用程序中创建文本文件或 XML 文件

> ID：13138421
> 
> 赞同：1
> 
> 时间：2012-10-30T11:53:43.090
> 
> 标签：.net

m .net 新手 m 试图在智能设备应用程序中创建文本文件或 xml 文件。但它仅在应用程序运行之前存在。停止并再次运行应用程序。需要再次在文件中填写数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:59:12.267

如果您显示一些代码，那么我们可以提供更多帮助。您是否将文件保存到文件系统？你是用 TextWriter、StreamWriter、File.Open() 打开它吗？

# exception - 具有异步操作视图渲染异常的 Castle MonoRail

> ID：13138422
> 
> 赞同：0
> 
> 时间：2012-10-30T11:53:44.667
> 
> 标签：exception, asynchronous, action, castle-monorail, nvelocity

我正在尝试在 MonoRail 中使用异步操作，但是当呈现视图时，我得到一个 NullReference 异常，也使用 emtpy 视图文件进行了测试。

我还尝试在 EndUploadTags 中调用 RenderView("uploadTags.vm")。当我在 EndUploadTags 中调用 RenderText(s) 时，我没有收到异常。

堆栈跟踪：

```
 [NullReferenceException: Object reference not set to an instance of an object.]
   Castle.MonoRail.Framework.Services.DefaultCacheProvider.Get(String key) +163
   Castle.MonoRail.Framework.Views.NVelocity.CustomResourceManager.GetResource(String resourceName, ResourceType resourceType, String encoding) +68
   NVelocity.Runtime.RuntimeInstance.GetTemplate(String name, String encoding) +57
   NVelocity.Runtime.RuntimeInstance.GetTemplate(String name) +82
   NVelocity.App.VelocityEngine.GetTemplate(String name) +47
   Castle.MonoRail.Framework.Views.NVelocity.NVelocityViewEngine.Process(String viewName, TextWriter output, IEngineContext context, IController controller, IControllerContext controllerContext) +564
   Castle.MonoRail.Framework.Services.DefaultViewEngineManager.Process(String templateName, TextWriter output, IEngineContext context, IController controller, IControllerContext controllerContext) +237
   Castle.MonoRail.Framework.Controller.ProcessView() +146
   Castle.MonoRail.Framework.Controller.EndProcess() +1579
   Castle.MonoRail.Framework.BaseAsyncHttpHandler.EndProcessRequest(IAsyncResult result) +141

[MonoRailException: Error processing MonoRail request. Action uploadtags on asyncController vendor]
   Castle.MonoRail.Framework.BaseAsyncHttpHandler.EndProcessRequest(IAsyncResult result) +461
   System.Web.CallHandlerExecutionStep.OnAsyncHandlerCompletion(IAsyncResult ar) +86 
```

这是我的测试代码：

```
 private Output output;
        public delegate string Output();

        private string DoNothing()
        {
            return "nothing";
        }

        private string Upload()
        {
            return "upload";
        }

        public IAsyncResult BeginUploadTags(HttpPostedFile xmlFile, Boolean doUpload)
        {
            if (IsPost)
            {
                output = Upload;
                return output.BeginInvoke(ControllerContext.Async.Callback, null);
            }
            output = DoNothing;
            return output.BeginInvoke(ControllerContext.Async.Callback, null);
        }

        public void EndUploadTags()
        {
            var s = output.EndInvoke(ControllerContext.Async.Result);
            PropertyBag["logging"] = s;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:51:17.047

这是旧版本 MonoRail 中的错误。它适用于[MonoRail 2.1 RC](http://sourceforge.net/projects/castleproject/files/MonoRail/2.1/)，但不适用于我刚刚尝试过的旧版本，我得到了相同的 null ref 异常。

这就是版本 5688 在 Subversion 中的样子，这就是它的`NullReferenceException`来源。[代码](https://github.com/castleproject/MonoRail/blob/master/MR2/src/Castle.MonoRail.Framework/Services/DefaultCacheProvider.cs)不再使用缓存`HttpContext`。

```
public object Get(String key)
{
    if (logger.IsDebugEnabled)
    {
        logger.DebugFormat("Getting entry with key {0}", key);
    }

    return GetCurrentContext().Cache.Get(key);
}

private static HttpContext GetCurrentContext()
{
    return HttpContext.Current;
} 
```

# android - 在 Android 中使用 HTML5

> ID：13138426
> 
> 赞同：0
> 
> 时间：2012-10-30T11:53:59.970
> 
> 标签：android, html

我开始使用 android 开发，需要使用 HTML5 作为跨平台技术，但我不了解 HTML5 及其在 android 中的行为，我搜索了很多但不明白我应该从哪里开始学习。任何建议表示赞赏。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:05:27.033

编写`Html5`代码并将其放在资产文件夹中，然后使用`webView`并加载它，打开您的 html5 文件。`webView`这对于更多[观看](https://www.youtube.com/watch?v=uVqp1zcMfbE)来说非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:00:02.983

您好，您可以查看[http://www.sencha.com/blog/introducing-sencha-touch-html5-framework-for-mobile](http://www.sencha.com/blog/introducing-sencha-touch-html5-framework-for-mobile) sancha touch。

最重要的是[http://www.sencha.com/blog/galaxy-nexus-the-html5-developer-scorecard/](http://www.sencha.com/blog/galaxy-nexus-the-html5-developer-scorecard/)是相同的记分卡。

您还可以选择 Jquery Mobile 为 Android 构建 HTML5 标准 UI。

# android - 带有片段标识符的 Android WebView 缓存

> ID：13138428
> 
> 赞同：2
> 
> 时间：2012-10-30T11:54:08.913
> 
> 标签：android, html, backbone.js, android-webview, local-storage

我在一个应用程序中有几个 webviews，我们遇到了一些缓存问题。

例如，我们有一个选项卡`http://someurl/`和另一个选项卡`http://someurl/#somehash`

理论上，第一个 url 生成的缓存在第二个 url 上是相同的，因为片段标识符之后的 url 变化只是页面特定的。

问题是，当我们在第一个 url 加载后调用带有片段标识符的 url，我们仍然会得到非常长的加载时间。最糟糕的是，它似乎是随机的。

加载同一页面需要 300 毫秒到 2500 毫秒。我们使用本地存储和一切可能的方式来加快速度，但似乎第二页不是从缓存中加载所有资源，而是再次加载所有内容，并以这种奇怪的速度变化。

以下是我们设置 webview 缓存的方法：

```
webSettings.setAppCachePath(getContext().getApplicationContext().getCacheDir().getAbsolutePath());
webSettings.setAllowFileAccess(true);
webSettings.setAppCacheEnabled(true);
webSettings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
webSettings.setDomStorageEnabled(true);
webSettings.setAppCacheMaxSize(1024 * 1024 * 10);
webSettings.setDatabaseEnabled(true);
webSettings.setDatabasePath(getContext().getApplicationContext().getDir("database", Context.MODE_PRIVATE).getPath()); 
```

**所以我的问题是**：

WebView 的片段标识符缓存是否存在已知限制？

在这种情况下我做错了吗？

多个 WebView 能否按预期优雅地共享同一个缓存？

# entity-framework - 首先在 mvc 4 数据库中自动生成模型？

> ID：13138429
> 
> 赞同：0
> 
> 时间：2012-10-30T11:54:09.150
> 
> 标签：entity-framework, asp.net-mvc-4, ef-database-first

我首先使用数据库和实体框架创建了一个 mvc 4 Web 项目，但很惊讶地发现默认模型不是自动生成的，有没有办法从我的 .edmx 文件中创建它们，或者还有其他方法可以节省手动编码吗？

任何帮助将非常感激

更新：

抱歉，应该提到我正在寻找一种使用基本方法生成简单模型的解决方案，例如：

```
public class EditUserModel
{
    public int ID { get; set; }

    [Required(ErrorMessage = "Forename is required")]
    public string Forename { get; set; }

    [Required(ErrorMessage = "Surname is required")]
    public string Surname { get; set; }

    [Required(ErrorMessage = "Username is required")]
    public string Username { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:46:07.800

我最终做了一个 SQL 查询来从我的表中生成一个简单的 mvc 模型。

# iphone - 在 constraintWithItem 中更改乘数时无法满足约束

> ID：13138430
> 
> 赞同：2
> 
> 时间：2012-10-30T11:54:10.113
> 
> 标签：iphone, ios, cocoa-touch, constraints, containers

我正在尝试让我的容器视图正常工作。问题是当将乘数更改为与 0.5 不同的值时，我得到：

> 无法同时满足约束。

例如，如果我将 *c2 multipier 更改为 0.4 并将 *c8 更改为 0.6，则会出现上述错误。但如果我改回 0.5 一切都很好。我在这里做错了什么？我有更多的限制，但它们是针对垂直布局的，所以我认为它们不是问题。

```
 NSLayoutConstraint *c1 = [NSLayoutConstraint constraintWithItem: contentView
                                                      attribute: NSLayoutAttributeLeft
                                                      relatedBy: NSLayoutRelationEqual
                                                         toItem:self.view
                                                      attribute:NSLayoutAttributeLeft
                                                     multiplier:1.0
                                                       constant:0.0];

NSLayoutConstraint *c2 = [NSLayoutConstraint constraintWithItem: contentView
                                                      attribute: NSLayoutAttributeWidth
                                                      relatedBy: NSLayoutRelationEqual
                                                         toItem:self.view
                                                      attribute:NSLayoutAttributeWidth
                                                     multiplier:.4
                                                       constant:0.0];

// detailView

NSLayoutConstraint *c7 = [NSLayoutConstraint constraintWithItem: detailView
                                                      attribute: NSLayoutAttributeRight
                                                      relatedBy: NSLayoutRelationEqual
                                                         toItem:self.view
                                                      attribute:NSLayoutAttributeRight
                                                     multiplier:1.0
                                                       constant:0.0];

NSLayoutConstraint *c8 = [NSLayoutConstraint constraintWithItem: detailView
                                                      attribute: NSLayoutAttributeWidth
                                                      relatedBy: NSLayoutRelationEqual
                                                         toItem:self.view
                                                      attribute:NSLayoutAttributeWidth
                                                     multiplier:.6
                                                       constant:0.0]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-04T16:45:37.007

我成功使用了relatedBy:NSLayoutRelationGreaterThanOrEqual。

例如：

```
 [self.view addConstraint:

             [

              NSLayoutConstraint

              constraintWithItem: _accountRegisteredDateLabel
              attribute:NSLayoutAttributeWidth
              relatedBy:NSLayoutRelationGreaterThanOrEqual
              toItem:self.view
              attribute:NSLayoutAttributeWidth
              multiplier:.30
              constant:0

              ]

         ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T00:55:07.863

我想我会回答我自己的问题。我最终将一个视图乘数设置为 0.609375，另一个设置为 0.390625 这对我来说非常有用！

为什么它以 0.4 和 0.6 失败是因为它没有与总空间相加。我的两个视图将彼此相邻，总空间为 1024 像素（ipad）。

0.4 * 1024 = 409,6

0.6 * 1024 = 614,4

我的理解是，constraintWithItem 方法不关心余数并抛出错误。

所以只要想出一个不会给你任何余数的数字

0.390625 * 1024 = 400

0.609375 * 1024 = 624

# tfs - 从测试管理器到 TFS 2012 团队项目的连接失败

> ID：13138432
> 
> 赞同：0
> 
> 时间：2012-10-30T11:54:20.863
> 
> 标签：tfs, microsoft-test-manager

我无法从 MS 测试管理器连接到某个 TFS 2012 团队项目。我有两个团队项目：第二个从测试管理器连接良好，但第一个得到错误：

```
"Automatic connection to the following team project failed: ..." 
```

两个团队项目似乎相同 - 我将所有工作项类型从第一个导出到第二个，但仍然可以连接第二个，但不能连接第一个。

第一个团队项目缺少什么或连接错误的原因是什么？

谢谢，康拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:45:33.923

问题是项目的类别：

[http://social.msdn.microsoft.com/Forums/en-US/vsmantest/thread/71ee54fd-38f4-403e-9256-268dae6e3704](http://social.msdn.microsoft.com/Forums/en-US/vsmantest/thread/71ee54fd-38f4-403e-9256-268dae6e3704)

# android - 从图库中选择第二张图片时错误传递结果失败

> ID：13138434
> 
> 赞同：2
> 
> 时间：2012-10-30T11:54:23.767
> 
> 标签：android, android-intent

我正在尝试使用项目列表完成我的第一个示例应用程序。为了让列表中的每个项目都有自己的图像，我在stackoverflow上找到了以下代码：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = {MediaStore.Images.Media.DATA};

        Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        picturePath = cursor.getString(columnIndex);
        cursor.close();

        main_datasource.pic.setPicturePath(picturePath);
    }
} 
```

它效果很好，我可以选择图像但只能选择一次。当我尝试第二次选择时，会弹出以下错误：

```
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime  FATAL EXCEPTION: main
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime  java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://media/external/images/media/2 }} to activity {example.CustomAdapter/example.CustomAdapter.MainActivity}: java.lang.NullPointerException
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread.handleSendResult(ActivityThread.java:2574)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread.access$2000(ActivityThread.java:117)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:961)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at android.os.Handler.dispatchMessage(Handler.java:99)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at android.os.Looper.loop(Looper.java:123)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread.main(ActivityThread.java:3683)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at java.lang.reflect.Method.invokeNative(Native Method)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at java.lang.reflect.Method.invoke(Method.java:507)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at dalvik.system.NativeStart.main(Native Method)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime  Caused by: java.lang.NullPointerException
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at example.CustomAdapter.MainActivity.onActivityResult(MainActivity.java:303)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.Activity.dispatchActivityResult(Activity.java:3908)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      at android.app.ActivityThread.deliverResults(ActivityThread.java:2528)
11:14:41.472    1212    example.CustomAdapter   ERROR   AndroidRuntime      ... 11 more 
```

由于我是 Android 的新手，您能否在我能够选择图像时帮助我更新此代码。如果有人向我解释这段代码是如何工作的，那也将非常有用。

# android - 包含文本视图的 Android 彩色视图

> ID：13138437
> 
> 赞同：0
> 
> 时间：2012-10-30T11:54:33.827
> 
> 标签：android, view, viewgroup

我制作了一个程序，它在窗口顶部（标题栏正下方）有一个视图。根据程序中发生的情况，视图的颜色会发生变化。

这工作得很好。

现在我的问题是：我想要里面有 2 个文本视图，彼此相邻。所以可能：视图、表格布局、表格行、文本视图、文本视图、表格行结束、表格布局结束、视图结束。

但这似乎不起作用。它给了我错误“Java.lang.RuntimeException：无法启动活动 ComponentInfo”和“无法将视图转换为视图组”。

在 java 代码中，我没有触及 xml 代码中的任何新视图，唯一触及 XML 的 java 是`TopView = (View)findViewById(R.id.TopView);`，`TopView.setBackgroundColor(Color.GREEN );`Topview 是外部视图，并且在其中没有任何东西的情况下可以完美地工作。

这是 XML 代码

```
 ...
<View
        android:id="@+id/TopView"
        android:layout_width="fill_parent"
        android:layout_height="20dp" 
        android:background="#8E8E8E" >

        <TableLayout
                android:id="@+id/tableTrolo"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <TableRow
                    android:id="@+id/TableRow000"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="left"
                    android:gravity="left"
                    android:orientation="vertical" >

            <TextView
                        android:id="@+id/lbl1"
                        android:layout_width="120dp"
                        android:layout_height="wrap_content"
                        android:text="Vare :"
                        android:textSize="22dp" />

                    <TextView
                        android:id="@+id/lbl2"
                        android:layout_width="180dp"
                        android:layout_height="wrap_content"
                        android:text="du grim" />

            </TableRow>
            </TableLayout>

    </View>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:04:56.607

`View`您在标签内放置多个元素。`View`的不要持有孩子的意见，有`ViewGroup`课。请改用`FrameLayout`, `LinearLayout`,之一`RelativeLayout`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:05:12.933

不要使用`View`. 将您的更改`View`为`ViewGroup`. View 和 ViewGroup 的区别在于 ViewGroup 可以包含其他 View。如果你想在里面放一些 TextView 和其他东西，你应该使用`ViewGroup`or 某种布局，比如`LinearLayout`or `RelativeLayout`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:06:05.670

你不能有`child-views`里面的`View`。

A`View`始终**是**布局层次结构中的叶节点。

1.将您的xml布局的第一行重写为：

> ```
> <LinearLayout
>     android:id="@+id/TopView"
>     android:layout_width="fill_parent"
>     android:layout_height="wrap_content" 
>     android:background="#8E8E8E"> 
> ```

2.修改对应的Java代码如下：

> ```
> TopView = (LinearLayout)findViewById(R.id.TopView); 
> ```

# google-app-engine - Struts 2.3.4.1 AppEngine 1.7.3 freemarker com.google.appengine.tools.development.LocalResourceFileServlet

> ID：13138441
> 
> 赞同：0
> 
> 时间：2012-10-30T11:54:44.687
> 
> 标签：google-app-engine, struts2, freemarker

**当我在任何 struts 页面上访问时，我都会收到这个错误，因为 appengine 没有找到这个静态文件：**
我一直在用谷歌搜索，但一点运气都没有。

```
 oct 30, 2012 12:24:32 PM com.google.appengine.tools.development.LocalResourceFileServlet doGet
WARNING: No file found for: /struts/xhtml/styles.css
oct 30, 2012 12:24:32 PM com.google.appengine.tools.development.LocalResourceFileServlet doGet
WARNING: No file found for: /struts/utils.js
oct 30, 2012 12:24:32 PM com.google.appengine.tools.development.LocalResourceFileServlet doGet
WARNING: No file found for: /struts/xhtml/validation.js
oct 30, 2012 12:24:33 PM com.google.appengine.tools.development.LocalResourceFileServlet doGet
WARNING: No file found for: /struts/utils.js 
```

我的 web.xml 上有 struts 过滤器（看起来像这样）：

```
<filter>
        <filter-name>struts2</filter-name>
        <filter-class>
        org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
        </filter-class>
    </filter>

    <!-- 
I've tried this option too!!!!
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>*.action</url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/struts/*</url-pattern>
    </filter-mapping>
    -->

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

我的 appengine-web.xml 有静态文件目录：

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
    <application>myapp</application>
    <version>1</version>

    <threadsafe>false</threadsafe>

    <sessions-enabled>true</sessions-enabled>

    <!-- Configure java.util.logging -->
    <system-properties>
        <property name="java.util.logging.config.file" value="WEB-INF/logging.properties"/>
    </system-properties>

    <!-- Static files -->
    <static-files>
        <include path="/css/*" />
        <include path="/struts/*" />
        <include path="/struts/xhtml/*" />
        <include path="/js/*" />
    </static-files>
</appengine-web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:05:05.653

在 struts.properties 上设置

```
struts.serve.static=true 
```

# powershell-2.0 - 使用模板 txt 文件的带有许多文件的文件夹的 Foreach 命令

> ID：13138446
> 
> 赞同：1
> 
> 时间：2012-10-30T11:54:55.027
> 
> 标签：powershell-2.0

使用以下代码选择帮助从许多日期文件列表中选择 1 个文件，然后复制以共享。使用 Stacker 同伴非常友好地提供的以下代码

```
$pastdays = -7

$pastdate = [datetime]::Now.AddDays($pastdays)

$files = Get-ChildItem "V:\Capacity Manager Size reports\"

$filename = ($files | Where-Object {$_.Name -like "Database_Server1_Userdb1_" + $pastdate.Day  + "_" + $pastdate.Month + "_" + $pastdate.Year+ "*.pdf"})

Copy-Item -Path $filename.FullName "\\Server50\report_Archive" 
```

我需要扩展此过程以针对文件夹中的许多文件运行 - 每个文件的名称略有不同，但文件名遵循通用模板

原始文件名示例：

```
Database_Server1_UserDB1_30_10_2012_00_20_51
Database_Server2_UserDB2_30_10_2012_01_20_51 
```

ETC

ETC

但我不确定如何在 foreach 中最好地做到这一点？

我正在考虑创建一个模板文件以加载到一个变量中，该变量包含在复制之前要检查的所有文件示例

所以：

```
$Report_Template = Get-Content "C:\Powershell\FileTemplate_Name.txt";

FileTemplate_name.txt:

Database_Server1_tempdb_

Database_Server1_UserDB1_

Database_Server1_UserDB2_

Database_Server2_UserDB2_

Database_Server2_UserDB4_

$Report_Template = Get-Content "C:\Powershell\QCM_Template_Name.txt";

$pastdays = -7

$pastdate = [datetime]::Now.AddDays($pastdays)

$files = Get-ChildItem "V:\Capacity Manager Size reports\"

foreach($template in $Report_Template)

$filename = ($files | Where-Object {$_.Name -like $template + $pastdate.Day  + "_" + $pastdate.Month + "_" + $pastdate.Year+ "*.pdf"})

Copy-Item -Path $filename.FullName "\\Server50\CapacityManagerReports_Archive\" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:44:58.990

我做了以下这似乎工作

```
$Report_Template = Get-Content "C:\Powershell\QCM_Template_Name.txt";
$pastdays = -3
$pastdate = [datetime]::Now.AddDays($pastdays)
$Results = Get-ChildItem "V:\Capacity Manager Size reports\"
Foreach ($Files in $Results)
{foreach($template in $Report_Template)
 {If ($files.Name -like $($template + $pastdate.Day + "_" + $pastdate.Month + "_" + $pastdate.Year +"*.pdf"))
  {Copy-Item -Path $files.FullName "\\Server50\CapacityManagerReports_Archive\"}
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:42:20.280

尝试这个：

```
$Report_Template = Get-Content "C:\Powershell\QCM_Template_Name.txt";
$pastdays = -7
$pastdate = [datetime]::Now.AddDays($pastdays)
$files = Get-ChildItem "V:\Capacity Manager Size reports\"
foreach($template in $Report_Template)
{
    $filename = ($files | Where-Object {$_.Name -like $template + $pastdate.Day  + "_" + $pastdate.Month + "_" + $pastdate.Year+ "*.pdf"})
    Copy-Item -Path $filename.FullName "\\Server50\CapacityManagerReports_Archive\"
} 
```

但是你真的需要模板文件吗？您不能使用文件扩展名或名称的某些部分，或者只是从该日期复制所有内容吗？也许您的初始文件夹结构错误，您最好切换到多个文件夹，例如每个 Database_Server1 的单独文件夹？

# svn - 是否可以创建多个 SVN 存储库？

> ID：13138447
> 
> 赞同：-3
> 
> 时间：2012-10-30T11:54:56.933
> 
> 标签：svn, tortoisesvn

我想创建多个 SVN 存储库，因为过去几天我遇到了很多问题。

让我解释一下我想要什么。

我的公司有一个主要的回购协议。我有那个 repo 的结帐副本，所以我可以处理它并进行更改并提交到 main repo。现在我想在我的本地系统上有一个包含所有主 repo 文件的新 repo，所以当我提交时，它应该更新所有 repo，即主 repo 和我创建的本地 repo。

但是当我尝试提交它时，它没有给我任何将它提交到本地仓库的选项。我不知道这是否可能。

我正在使用 TortoiseSVN，Windows 7。IDE：VS2010

我没有运气用谷歌搜索它。

谢谢

===================== 编辑

想拥有

第一个分支（主仓库） 第二个分支（本地工作副本） 第三个分支（本地仓库，取决于本地工作副本）

所以当我对第 2 个分支进行更改时，它应该更新第 1 个分支，这是我本地 PC 上的主仓库和第 3 个分支

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:00:37.683

除非您从两个存储库中签出相同的代码，否则您不能将相同的代码提交到两个存储库。您可以做的是设置镜像，但通常您只为单向关系执行此操作（一个 repo 是只读的，并镜像您提交的 repo）。如果你用谷歌搜索你会`svn mirror setup`看到一些关于设置的结果。

也就是说，听起来你可能会更好地使用 Git，通常你总是提交到存储库的本地副本，然后在某个时候推送到远程存储库。

# symfony - 如何在 Twig 中将 HTML 输出为实体？

> ID：13138448
> 
> 赞同：0
> 
> 时间：2012-10-30T11:55:08.303
> 
> 标签：symfony, twig, symfony-2.1

我有需要输出 HTML 的小部件示例，以便人们可以将它们复制并粘贴到他们自己的网站上。如何转义输出以使其不被渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:56:33.780

最终这样做了，问题的关键是使用转义过滤器作为一个块，其余的说明不需要`<pre/><code/>`'s 周围的空格来获得所需的输出：

```
<pre>
    {%- spaceless -%}
        <code>
            {%- filter escape -%}
                {% spaceless %}
                    {% include 'ACMEDemoBundle:Example:widget.html.twig' %}
                {% endspaceless %}
            {%- endfilter -%}
        </code>
    {%- endspaceless -%}
</pre> 
```

# ruby-on-rails - Rails omniauth-shopify-oauth2：来自控制台的“[API] API 密钥或访问令牌无效（无法识别的登录名或密码错误）”

> ID：13138455
> 
> 赞同：1
> 
> 时间：2012-10-30T11:55:25.187
> 
> 标签：ruby-on-rails, shopify

我为我的 rails 3.2.6 应用程序设置了 shopify auth (omniauth-shopify-oauth2 gem)。

从网页路由（到以下控制器#action）时它工作正常

```
class ShopifyController < ApplicationController
  ...
  def login
    redirect_to "/auth/shopify?shop=#{current_retailer.primary_host_name}"
  end 
```

它将我重定向到商店登录，一旦我登录，它就会重定向回成功回调。一切都好（见下面的服务器日志成功）。

但是当我尝试从 rails 控制台做几乎相同的事情时：

```
irb(main):001:0> RestClient.get 'http://localhost:3000/auth/shopify?shop=vinehillposters.myshopify.com' 
```

我得到：

```
RestClient::Unauthorized: 401 Unauthorized: <?xml version="1.0" encoding="UTF-8"?>
<hash>
  <errors>[API] Invalid API key or access token (unrecognized login or wrong password)</errors>
</hash> 
```

请参阅下面的服务器日志失败

**服务器日志成功：**

```
Processing by ShopifyController#login as HTML
... AR stuff snipped ...
Redirected to http://localhost:3000/auth/shopify?shop=vinehillposters.myshopify.com
Completed 302 Found in 93ms (ActiveRecord: 1.6ms)
(shopify) Setup endpoint detected, running now.
(shopify) Request phase initiated.
"https://vinehillposters.myshopify.com/admin/oauth/authorize?response_type=code&client_id=44dd9799fbc268c36ef609f0c2386b8c&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Fshopify%2Fcallba
ck&scope=read_orders"

Started GET "/auth/shopify?shop=vinehillposters.myshopify.com" for 127.0.0.1 at 2012-10-30 11:24:21 +0000
(shopify) Setup endpoint detected, running now.
(shopify) Callback phase initiated.

Started GET "/auth/shopify/callback?code=c8c6696ed347e37324d2d62ec203457b&shop=vinehillposters.myshopify.com&timestamp=1351596261&signature=e6324b041d6a6ed1e07719a8909d70f7" for 127.0.0.1 at 
2012-10-30 11:24:21 +0000
Processing by ShopifyController#auth_callback as HTML
... 
```

**服务器日志故障：**

```
(shopify) Setup endpoint detected, running now.
(shopify) Request phase initiated.
"https://vinehillposters.myshopify.com/admin/oauth/authorize?response_type=code&client_id=44dd9799fbc268c36ef609f0c2386b8c&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth%2Fshopify%2Fcallback&scope=read_orders"

Started GET "/auth/shopify?shop=vinehillposters.myshopify.com" for 127.0.0.1 at 2012-10-30 11:24:54 +0000 
```

您可能已经注意到，我在 request_phase 网址被重定向到 shopify 之前（之后`(shopify) Request phase initiated.`）打印出了它。在这两种情况下都是一样的。除了在一种情况下它返回成功，在另一种情况下它是 401。

那么，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:44:24.147

我认为您的问题令人困惑，并且您专注于错误的部分。您需要做的是，一旦您的用户登录，就可以从 shopify 回调中获取一些关于他们的信息。

```
def shopify
  shopify_domain = params[:shop]
  @your_shop_object = your_finds_or_initializes_shop_or_auth_object_with shopify_domain, token

  if @your_shop_object.persisted?
    redirect_to root_url
  else
    # something went wrong :/
    session['devise.shopify_data'] = request.env['omniauth.auth']
    redirect_to auth_index_url
  end
end

private
def token
  request.env['omniauth.auth']['credentials']['token']
end 
```

现在有了这个，您可以使用该持久的商店对象数据来设置授权会话

```
session = ShopifyAPI::Session.new(domain, authentication_token)
if session.valid?
  ShopifyAPI::Base.activate_session(session)
  # Now you can make api calls for that shop (domain)
else
  Rails.logger.error "[Shop] Could not create a valid session for '#{domain}'"
end 
```

# java - form-login-config 和 ajax 请求

> ID：13138456
> 
> 赞同：1
> 
> 时间：2012-10-30T11:55:30.190
> 
> 标签：java, ajax, jsp, servlets

我已经使用登录页面设置了我的 web.xml，但是，我希望服务器为某些用于异步调用的 servlet 返回 403 状态。

需要身份验证的 Servlet 都映射为 /restricted/*

我只能想到2个选项：

*   映射“受限”之外的异步 servlet 并检查 servlet 中的角色

*   在转发到页面的 servlet 中处理重定向到登录页面

有没有其他方法可以做到这一点，同时保持访问控制始终一致？

# android - 捏缩放 ImageView 时的奇怪行为

> ID：13138459
> 
> 赞同：0
> 
> 时间：2012-10-30T11:55:53.453
> 
> 标签：android, imageview, ontouchlistener, pinchzoom

我有一个 ImageView，我在其中添加了一个 OnTouchListener，这样我就可以用两根手指捏合手势放大和缩小后者。我正在使用下面的代码，但在调整实际位图大小时遇到​​问题。后者变得模糊，保持相同的大小，并被调整大小的图像覆盖，就好像它只是将新图像放在旧图像之上而不是替换它。我在想drawMatrix方法有问题......

```
 int touchState;
    final int IDLE = 0;
    final int TOUCH = 1;
    final int PINCH = 2;
    float dist0, distCurrent;

    public boolean onTouch(View view, MotionEvent event) {
        boolean handledHere = false;

        float distx, disty;

        final int action = event.getAction();

        switch(action & MotionEvent.ACTION_MASK){
        case MotionEvent.ACTION_DOWN:
            //A pressed gesture has started, the motion contains the initial starting location.
            touchState = TOUCH;
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            //A non-primary pointer has gone down.
            touchState = PINCH;

            //Get the distance when the second pointer touch
            distx = event.getX(0) - event.getX(1);
            disty = event.getY(0) - event.getY(1);
            dist0 = FloatMath.sqrt(distx * distx + disty * disty);

            break;
        case MotionEvent.ACTION_MOVE:
            //A change has happened during a press gesture (between ACTION_DOWN and ACTION_UP).
            if(touchState == PINCH){                        
                //Get the current distance
                distx = event.getX(0) - event.getX(1);
                disty = event.getY(0) - event.getY(1);
                distCurrent = FloatMath.sqrt(distx * distx + disty * disty);

                drawMatrix((ImageView) view);
            } 

            break;
        case MotionEvent.ACTION_UP:
            //A pressed gesture has finished.
            touchState = IDLE;
            break;
        case MotionEvent.ACTION_POINTER_UP:
            //A non-primary pointer has gone up.
            touchState = TOUCH;
            break;

        }

        return handledHere;
    }

    private void drawMatrix(ImageView view){
        float curScale = distCurrent/dist0;
        if (curScale < 0.1){
            curScale = 0.1f;    
        }

        view.buildDrawingCache();
        Bitmap originalBitmap = view.getDrawingCache();
        Bitmap resizedBitmap;    
        int newHeight = (int) (view.getHeight() * curScale);
        int newWidth = (int) (view.getWidth() * curScale);
        resizedBitmap = Bitmap.createScaledBitmap(originalBitmap, newWidth, newHeight, false);
        view.setImageBitmap(resizedBitmap); 

    } 
```

当我放大和缩小几次时，它会变成这样...... ![在此处输入图像描述](../Images/e657ecb8f63ca8748d53ec2c718f354f.png)

感谢我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:08:34.727

实际上，您正在 onmove 中调用绘图函数，因此当您移动手指时它会继续调用它。因此，使用新高度和宽度生成的图像已设置为已设置的 imageview。在将调整大小的图像设置为 imageview 之前尝试删除所有视图。希望这能解决您的问题。

```
private void drawMatrix(ImageView view){
        float curScale = distCurrent/dist0;
        if (curScale < 0.1){
            curScale = 0.1f;    
        }

        view.buildDrawingCache();
        Bitmap originalBitmap = view.getDrawingCache();
        Bitmap resizedBitmap;    
        int newHeight = (int) (view.getHeight() * curScale);
        int newWidth = (int) (view.getWidth() * curScale);
        resizedBitmap = Bitmap.createScaledBitmap(originalBitmap, newWidth, newHeight, false);
        view.removeallviews();
        view.setImageBitmap(resizedBitmap); 

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:12:14.477

您可以使用 TouchImageView 类 [https://github.com/MikeOrtiz/TouchImageView/blob/master/src/com/example/touch/TouchImageView.java]。这为图像视图提供了很好的放大和缩小功能。

# c++ - 摆脱带符号的零

> ID：13138464
> 
> 赞同：2
> 
> 时间：2012-10-30T11:56:15.980
> 
> 标签：c++, floating-point

我正在做一些矩阵运算，其中矩阵元素通过以下方式从某些变量中获取值：

```
elem[1] = -x 
```

但是当`x = 0`它设置`-0`在矩阵中时，这是不可取的。有什么明确的方法可以防止这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:21:25.230

您可以执行以下操作：

```
elem[i] = -x + 0.0; 
```

我已经测试了以下代码：

```
float a = -0.0; 
printf("%f %f\n", a, a + 0.0); 
```

产生以下输出：

```
-0.000000 0.000000 
```

# vb.net - vb.net 更改数据绑定数据网格视图中单元格的值

> ID：13138478
> 
> 赞同：1
> 
> 时间：2012-10-30T11:56:46.230
> 
> 标签：vb.net, datagridview

我有一个使用 datasource 属性从数据表中填充的 datagridview。我需要在不影响数据库的情况下更改单元格的值。到目前为止，我只能发现我必须首先更改数据绑定项目，但没有关于如何做到这一点的信息。此外，我不想更改数据绑定项。

想要这样做的原因是我有一个包含开始时间和结束时间的记录列表，并且有一个计算字段以秒为单位给出差异。我需要改变计算域的值，并相应地改变行的高度，即每行的高度与它所代表的持续时间成正比。更改是从文本框中完成的，如果“增加”按钮被按住，该文本框会快速增加，因此我无法在每次增加时更改数据库。相反，我会经常更改表中的值，并在增量停止后更新数据库。

我尝试使用以下代码直接更新 datagridview：

```
dgvTasks.Rows(SelectedRowIndex).Cells(5).Value = DateAdd(DateInterval.Minute, DateDiff(DateInterval.Minute, CDate("00:00:00"), CDate(txtDuration.Text & ":00")), dgvTasks.Rows(SelectedRowIndex).Cells(4).Value) 
```

但收到错误：

> System.Data.ReadOnlyException：列 'Column1' 是只读的。

我还尝试更新数据表，并允许更新计算列：

```
dtblTasks.Rows(SelectedRowIndex)(5) = DateAdd(DateInterval.Minute, DateDiff(DateInterval.Minute, CDate("00:00:00"), CDate(txtDuration.Text & ":00")), dtblTasks.Rows(SelectedRowIndex)(4)) 
dgvTasks.DataSource = dtblTasks 
```

但计算值不会改变。

我还提供了一个额外的计算值（在 SQL 中），我在其中找到了以分钟为单位的差异，并将字符串文字附加到该值：

```
( CAST ( DATEDIFF(MINUTE, Tasks.TaskStart, Tasks.TaskEnd) AS NVARCHAR(10) ) + ' mins') AS TaskDurationString 
```

有没有办法将网格与数据源分离，但仍保持数据在数据网格中可见并对其进行操作（不影响数据绑定对象）？或者也许是解决这个问题的其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:04:13.473

更新应该工作的计算列`DataTable`- 我刚刚尝试过，当我编辑作为计算值一部分的值之一时，以及当我更改代码中的值时，都会重新计算该列和网格 UI更新。

要检查的一件事是您正在正确计算该值。您应该使用`DataTable~ column [`Expression` 属性] [1](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression%28v=vs.71%29.aspx)。像这样的东西：

```
dt.Columns["FullName"].Expression = "FirstName + LastName"; 
```

* * *

由于您实际上不需要将任何这些值绑定`DataTable`到数据库或将它们持久保存到数据库中，因此一种可能的解决方案是在未绑定的`DataGridView`计算列中完成所有这些操作。

为此，使用设计器添加一列，然后在单元格验证事件中具有如下内容：

```
void dataGridView1_CellValidated(object sender, DataGridViewCellEventArgs e)
{
    dataGridView1.Rows[e.RowIndex].Cells["TargetColumn"].Value = dataGridView1.Rows[e.RowIndex].Cells["FirstName"].Value.ToString() + dataGridView1.Rows[e.RowIndex].Cells["LastName"].Value.ToString();
    dataGridView1.Rows[e.RowIndex].Height = dataGridView1.Rows[e.RowIndex].Cells["LastName"].Value.ToString().Length + dataGridView1.Rows[e.RowIndex].Cells["FullName"].Value.ToString().Length;
} 
```

# php - 字符串内爆中的意外符号

> ID：13138481
> 
> 赞同：1
> 
> 时间：2012-10-30T11:56:55.620
> 
> 标签：php

我正在使用 implode 创建一个查询字符串，但其中出现了一个意外的符号，我不确定它来自哪里

如果有人有任何见解，将不胜感激。

```
$url = "https://mypay.com/billing/signup.cgi";

$key = "11";
$key .= "11";
$key .= "GBP";
$key .= "QQDNfAHlC2WEEfhfhFFdhbdf";

$variables[] = "?formDigest=".md5($key);
$variables[] = "clientAccnum=1111";
$variables[] = "clientSubacc=1111";
$variables[] = "formName=108ck";
$variables[] = "formPrice=11";
$variables[] = "formPeriod=11";
$variables[] = "currencyCode=GBP";

$url .= implode("&", $variables);

echo $url; 
```

字符串

`https://bill.ccbill.com/jpost/signup.cgi?formDigest=df03f2b103f79bd5de34c6cfea405ec5&clientAccnum=1111&clientSubacc=1111&formName=108ck&formPrice=11&formPeriod=11¤cyCode=GBP`

注意`¤`货币代码应该在的符号。

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T11:59:24.630

`implode`工作正常。

这里的问题是您正在输出 HTML 文本 ( `echo $url`)，但您没有正确编码 HTML 特殊字符[`htmlspecialchars`](http://php.net/manual/en/function.htmlspecialchars.php)。

当浏览器看到子字符串`&currencyCode=GBP`时，它会猜测您的意思是`&curren;Code=GBP`；`&curren;`是货币符号的[HTML 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML)，这就是您在屏幕上看到的内容。

更改代码以`echo htmlspecialchars($url)`立即看到差异；要获得完全正确的解决方案，*请注意并为 的前三个参数提供正确的值`htmlspecialchars`*。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T12:03:35.997

“ **¤** ”将以这种方式显示...将变量名称“ **currencyCode** ”更改为其他名称，它将起作用

问候

苏迪普

# spring - 是否有任何 Spring Retry 文档？

> ID：13138483
> 
> 赞同：7
> 
> 时间：2012-10-30T11:56:56.277
> 
> 标签：spring, spring-batch

我有兴趣了解有关 Spring Retry 的更多信息。有任何文件吗？我只能找到[GitHub 项目](https://github.com/SpringSource/spring-retry)中的源代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T14:31:04.030

Spring Retry 的 Spring 参考文档在这里：[http ://docs.spring.io/spring-retry/docs/api/current/](http://docs.spring.io/spring-retry/docs/api/current/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T23:59:39.060

如果你需要 javadocs，你可以在这里找到它们：[org.springframework.retry : spring-retry](http://javadox.com/org.springframework.retry/spring-retry/1.0.2.RELEASE/overview-summary.html)

希望它有帮助，尼古拉斯

# url-rewriting - Zeus 服务器上 CakePHP 应用程序中 CKEditor 的路径

> ID：13138484
> 
> 赞同：2
> 
> 时间：2012-10-30T11:56:56.667
> 
> 标签：url-rewriting, ckeditor, cakephp-2.0

我正在将 CKEditor 集成到在 Zeus 服务器上运行的 CakePHP 应用程序中（因此不能使用 .htaccess - 我必须改用 rewrite.script ）。问题是，CKEditor 放入页面头部的路径不起作用，所以编辑器不会加载。

例如，一个生成的路径是：

```
http://www.example.com/js/ckeditor/config.js?t=B8DJ5M3 
```

如果我去

```
http://www.example.com/js/ckeditor/config.js 
```

我可以看到该文件，但是一旦我添加到`?t=B8DJ5M3`最后，Cake 就会抱怨它找不到 jsController。

我不知道该怎么做 - 是否在 CakePHP、CKEditor 或 rewrite.script 文件中挖掘！接下来我应该尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T05:36:27.360

URL 末尾的查询字符串用于确保文件没有被缓存。似乎 Zeus 服务器上的 GET 请求配置/路由中的某些内容试图找到包含查询字符串的确切文件。您将需要创建一个 Rewrite，它在 URL 上执行 goto 减去查询字符串。我在 Drupal 论坛中发现了一篇非常可靠的文章，其中有人整理了一个可以帮助您的脚本：http: [//drupal.org/node/46508](http://drupal.org/node/46508)

```
RULE_0_START:
# get the document root
map path into SCRATCH:DOCROOT from /
# initialize our variables
set SCRATCH:ORIG_URL = %{URL}
set SCRATCH:REQUEST_URI = %{URL}

# see if theres any queries in our URL
match URL into $ with ^(.*)\?(.*)$
if matched then
  set SCRATCH:REQUEST_URI = $1
  set SCRATCH:QUERY_STRING = $2
endif
RULE_0_END: 
```

然后从那里处理你的 goto 减去查询字符串。希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T06:14:34.283

你可以这样做

在要显示编辑器的视图中，将以下脚本放在页面顶部（或要包含编辑器的 textarea 之前的某个位置）：

```
<?php echo $this->Html->script('ckeditor/ckeditor');?> 
```

此 scipt 将在您的视图中包含“webroot/js/ckeditor.js”文件。创建文本区域并给它一个名为“ckeditor”的类

```
<?php echo $this->Form->textarea('content',array('class'=>'ckeditor'))?> 
```

瞧！编辑器现在显示而不是原始文本区域。

# validation - 骨干形式的实时验证

> ID：13138486
> 
> 赞同：3
> 
> 时间：2012-10-30T11:57:09.220
> 
> 标签：validation, backbone.js

我正在使用 Backbone-Forms 并创建了一个具有以下架构的模型：

```
 schema:
    title:
      type: "Text"
      validators: ["required"]
    description: 
      type: "TextArea"
      validators: ["required"]
    location:
      type: "Text"
      validators: ["required"] 
```

当我尝试提交带有空字段的表单时，验证正确发生并且它们都收到错误类。

但是，当我随后更新输入以包含内容时，错误类不会从我的输入中删除，直到我再次尝试提交表单。同样，如果我最初输入了一个有效的输入，然后删除了所有内容，它不会通知我错误，直到我尝试再次提交表单，而我想立即知道。

有没有办法在修改后的输入字段上触发验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:27:43.403

从文档：[http](http://backbonejs.org/#Model-validate) ://backbonejs.org/#Model-validate ：

> `isValidmodel.isValid()`
> 
> 如果您默默地更改模型，模型可能会进入无效状态......在处理表单输入时很有用。`model.isValid()`根据您的 validate 函数调用以检查模型当前是否处于有效状态。

也来自[https://github.com/thedersen/backbone.validation#what-gets-validated-when](https://github.com/thedersen/backbone.validation#what-gets-validated-when)

> 什么时候得到验证？
> 
> 如果您使用 Backbone v0.9.1 或更高版本，将验证模型中的所有属性。但是，如果从未设置过 name （显式地或使用默认值），则该属性在设置之前将不会被验证。
> 
> 这在填充表单时非常有用，因为您不想提醒用户尚未输入的输入错误。
> 
> 如果您需要验证整个模型（已设置或未设置的两个属性），您可以调用`validate()`或`isValid(true)`在模型上。

Backbone-Forms 文档特别提到了 model.validate：

[https://github.com/powmedia/backbone-forms#model-validation](https://github.com/powmedia/backbone-forms#model-validation)

您可以轻松地挂钩 model.Validate 到您想要的任何编辑事件或单击事件。

此外，您可能会发现这很有用（但不确定它是否与 Backbone.Forms 兼容）：

[https://github.com/thedersen/backbone.validation](https://github.com/thedersen/backbone.validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T19:35:15.110

您可以使用 Backbone-Forms 进行“实时验证”的方式是扩展 Backbone.Form 模型并附加事件以调用您的自定义方法来验证该字段，然后只需“新建”您的自定义形式而不是 Backbone.Form

（Backbone.Form 只是 Backbone.View 的子类）

这是一些示例代码：

```
 var MyCustomForm = Backbone.Form.extend({
        events: {
            "blur input": "validateRealTime"
        },
        validateRealTime:   function(e){
            if(e.currentTarget.value == "") return;
            var err = this.fields[e.currentTarget.name].validate();
            if(err)
                myDisplayErrorMethod(err.message);
        }
    }); 
```

这样做的好处是它将利用您在模型模式中定义的验证器，因此您也可以获得您在那里定义的所有相同的验证和消息（如果您确实定义了自定义消息）。

此外，如果您像我一样定义了多个验证器，每次用户从该字段“模糊”时，它都会按顺序调用您的验证器，直到所有验证器都通过。所以这是一个优点。

旁注，你会注意到我做到了`if(e.currentTarget.value == "") return;`。这只是我的用例，我不想仅仅因为用户点击并点击离开而显示错误。

# algorithm - 需要使用数组在java中使程序并行Eratosthenes算法的Sieve

> ID：13138497
> 
> 赞同：1
> 
> 时间：2012-10-30T11:58:07.507
> 
> 标签：algorithm, primes, sieve-of-eratosthenes

我们被指派制作一个与 Eratosthenes 算法的 Sieve 并行的 java 程序。我用我知道的每一种方式都尝试了好几次，但一直没能把它弄好。我应该使用质数小于估算的数字的填充数组。这是我的代码，有人可以帮我仔细检查程序和/或找出我收到此错误的原因吗？任何帮助表示赞赏。

```
import java.text.DecimalFormat;
import java.util.Scanner;

import java.util.Arrays;

public class Lab6st
{
static int MAX = 100;
static int i;
static int k;
static int intArray;
static int isPrime;

public static void main(String args[]) 
{
    System.out.println("\nLAB12 100 Point Version");
    Scanner input = new Scanner(System.in);
    boolean primes[] = new boolean[MAX];
    computePrimes(primes);
    displayPrimes(primes);
    Arrays.fill(primes,true);
}

public static void computePrimes(boolean primes[])
{
    System.out.println("\nCOMPUTING PRIME NUMBERS");
    for (int i = 1; i < MAX; i++);
    {
        for (i=1; i < MAX; i++ );
        for (k=2; k<i; k++){
            int n = i%k;
            if (n==0)
            {
                break;
            }
        }
        if (i==k);
        {
            primes[i] = true;
        }       
    }
}

public static void displayPrimes(boolean primes[])
{
    System.out.println("\n\nPRIMES BETWEEN 1 AND "+ primes.length);
    for (int isPrime = 0; isPrime < MAX; isPrime++);
        if (primes[isPrime] == true);
            System.out.println(Arrays.asList(primes));              
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:49:35.023

你的算法*不是*埃拉托色尼筛法；这是试验除法的糟糕实现（模运算符放弃了它）。我的[文章](http://programmingpraxis.com/essays) *Programming with Prime Numbers*详细描述了 Sieve of Eratosthenes 算法，讨论了您犯的非常常见的错误，并在 Java 中包含了这个实现：

```
public static LinkedList sieve(int n)
{
    BitSet b = new BitSet(n);
    LinkedList ps = new LinkedList();

    b.set(0,n);

    for (int p=2; p<n; p++)
    {
        if (b.get(p))
        {
            ps.add(p);
            for (int i=p+p; i<n; i+=p)
            {
                b.clear(i);
            }
        }
    }

    return ps;
} 
```

# php - PHP 会话验证

> ID：13138498
> 
> 赞同：2
> 
> 时间：2012-10-30T11:58:08.553
> 
> 标签：php, validation, session

我想编写一个只能由管理员访问的脚本。

这就是我想做的事情：

```
session_start();

if (!isset($_SESSION['user_id'])) { //not logged in

    //redirect to homepage
    header("Location: http://domain.com/index.php");
    die();

}

if ($_SESSION['user_level'] != 1337) { //not admin

    //redirect to homepage
    header("Location: http://domain.com/index.php");
    die();

}

if ($_SERVER['REQUEST_METHOD'] == 'POST') { //form is submitted

    //validate the submitted data
    //submit the query

}

//form goes here 
```

我的问题是：是否有更好的方法来验证这一点（例如，是否应该嵌套所有三个条件）或者这是否足够？

干杯，

n1te

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:03:04.343

如果人员权限不可能即时更改（即：您删除管理员权限），那么这应该足够了，尽管我会构建一个函数：

```
function IsAdmin() {
    if( !isset($_SESSION['user_level'])){
        return false;
    }

    return ($_SESSION['user_level'] == 1337);
} 
```

对于这种情况，您将来会使用扩展权限检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:01:39.773

以下内容更简洁...尽管您可能希望在 $_SESSION['user_id'] 上运行一些验证以确保它是 int 或您期望的任何数据类型...

```
session_start();

if (!isset($_SESSION['user_id']) || $_SESSION['user_level'] != 1337) { //not logged in

    //redirect to homepage
    header("Location: http://domain.com/index.php");
    exit(); // NOT DIE :P

}

if ($_SERVER['REQUEST_METHOD'] == 'POST') { //form is submitted

    //validate the submitted data
    //submit the query

}

//form goes here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:02:24.370

我会写：

```
if (!isset($_SESSION['user_id']) || $_SESSION['user_level'] != 1337) {
    //not logged in/not admin
    //redirect to homepage
    header("Location: http://domain.com/index.php");
    die();
} 
```

# android - getInt() SharedPreferences android 错误

> ID：13138499
> 
> 赞同：1
> 
> 时间：2012-10-30T11:58:26.347
> 
> 标签：android, sharedpreferences

```
SharedPreferences peepsScores= PreferenceManager.getDefaultSharedPreferences(GamePlayFirst.this);
SharedPreferences.Editor editor =peepsScores.edit();

editor.putInt("userScore1", zero);
editor.putInt("userScore2", zero);
editor.putInt("userScore3", zero);
editor.putInt("userScore4", zero);
editor.putInt("userScore5", zero);
editor.putInt("userScore6", zero);
editor.putInt("userScore7", zero);
editor.putInt("userScore8", zero);
editor.commit();

SharedPreferences peepsScores = PreferenceManager.getDefaultSharedPreferences(this);
//tryed this
int userScore1 = peepsScores.getInt("userScore1","u");
//tryed this
userScore2 = peepsScores.getInt("userScore2","0");
//and tryed this
String userScore3 = peepsScores.getInt("userScore3","0");
String userScore4 = peepsScores.getInt("userScore4","0");
String userScore5 = peepsScores.getInt("userScore5","0");
String userScore6 = peepsScores.getInt("userScore6","0");
String userScore7 = peepsScores.getInt("userScore7","0");
String userScore8 = peepsScores.getInt("userScore8","0"); 
```

无论我更改什么随机内容，getint 方法都带有下划线，然后如果我删除接收类的第一行 peepScore 带有下划线，我一直在 android dev webiste 这个网站和谷歌上，一切都说它像 getInt 一样简单我在做什么错误的

稍后我会尝试弄清楚添加，我想当我最终得到这个时，我会将这个发布给像我这样的所有新手，看看哈哈

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T12:00:05.010

试试这个。

```
int userScore1 = peepsScores.getInt("userScore1",0); 
```

> 当您使用 getInt 时，如果您的值未在共享首选项中设置，则必须返回整数值。

# javascript - 使用 JSON 通过 POST 请求 PDF

> ID：13138507
> 
> 赞同：1
> 
> 时间：2012-10-30T11:58:48.257
> 
> 标签：javascript, json, http-headers

我有一个从 JSON 对象创建 PDF 的 Web 服务。在我的 Web 应用程序中，我想在浏览器中显示该 PDF。

所以我希望浏览器发送一个使用请求内容类型的 POST 请求：应用程序/json 和我的 JSON 对象。

通过使用 AJAX 调用，这不是问题。但是后来我将 PDF 作为字符串，不知道如何将该字符串呈现为 PDF。

另一种可能性是建议浏览器加载 PDF 作为下一页显示。但似乎没有办法修改用于加载页面的请求内容类型。当我使用 Form-Tag 时，Request Content-Type 始终是 application/x-www-form-urlencoded。

我在互联网上发现其他人也有同样的问题。但是还没有找到解决办法。但由于这对我来说似乎是一个标准问题，我无法相信没有解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:08:51.430

您可以尝试使用数据协议（例如 data:application/pdf,base64;ABC....=）将 PDF 数据传递给 window.open；取决于网络浏览器，它可能会也可能不会处理那个长 URL

另一种方法是将它提供给一些 HTML/JS 库，例如[https://github.com/mozilla/pdf.js](https://github.com/mozilla/pdf.js)。也有 Flash 替代品。

# c# - Windows Phone 中 WebBrowserTask.URL 的字符串大小限制

> ID：13138510
> 
> 赞同：1
> 
> 时间：2012-10-30T11:58:55.963
> 
> 标签：c#, string, windows-phone-7, browser

我正在尝试从我的应用程序调用 Web 服务，但由于某种原因，它会缩短我传递给 WebBrowserTask.URL 的字符串...所以我不知道它是否存在某种字符串限制？

显然，由于 URL 被缩短，调用失败了，它应该返回我一个 pdf 文档。下面是我正在使用的代码。我无法为您提供 PatientGuid 和 sessionID，但作为参考，每个都大约 16 个字符长

```
 WebBrowserTask browser = new WebBrowserTask();
 browser.URL = string.Format("https://secure.lancet.co.za/Patriarch/patient?sid={0}&patientGuid={1}&f=CUM.PAT.PDF", Uri.EscapeDataString(sessionID), Uri.EscapeDataString(patientGuid));
 browser.Show(); 
```

谢谢你的帮助！

更新：我的 URL 的总大小最终为 149 个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T09:35:03.960

您应该使用 Uri.EscapeDataString("&") 在您的 url 字符串中转义“&”。

# javascript - 在我的表单字段正下方添加停靠项的最佳方法是什么？

> ID：13138511
> 
> 赞同：0
> 
> 时间：2012-10-30T11:59:01.640
> 
> 标签：javascript, extjs, extjs4, extjs4.1

标题中的关键词是**直接**。我不希望我的停靠项目出现在表单面板的底部，因此我的字段和停靠项目之间存在空间。我希望额外的空间位于我的停靠项下方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:27:58.877

尝试在表单项中添加工具栏

```
var frm = Ext.create('Ext.form.Panel', {
    width: 350,
    items : [{
        xtype : 'textfield',
        fieldLabel:'textfld1'
    },{
        xtype:'toolbar',
        items: [{
            text : 'btn1'
        },{
            text : 'btn2'
        }]
    }]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:33:17.777

我决定我试图使用错误的工具来完成正确的工作。基本上，如果我要对接的东西，它应该漂浮到它所停靠的容器的边缘。这是对接概念的一部分。我想要的是我的按钮不应该那样浮动。因此我不应该停靠我的按钮。

因此，解决方案是将按钮添加到表单本身而不是停靠它们。

# c# - 如何在 Razor MVC4 中将 Viewdata 值传递给母版页

> ID：13138517
> 
> 赞同：1
> 
> 时间：2012-10-30T11:59:35.120
> 
> 标签：c#, asp.net, asp.net-mvc-3, master-pages

我在我的页面中使用 Directoryservices 登录。我需要将用户名传递给我的母版页以在所有页面中显示用户名。

我得到了用户名并将其存储在 ViewData 中。如何在 masterpage 中传递 viewdata 值。
我的代码：

```
 [HttpPost]
    public ActionResult Index(LoginModels model)
    {
        if (ModelState.IsValid)
        {
            string DisplayUserName = string.Empty;
            string LoginUser = model.Userid;
            string LoginPassword = model.Password;    
            string  name = model.UserName
            if (ValidateActiveDirectoryLogin(LoginUser, LoginPassword, out DisplayUserName) == true)
            {
                model.UserName = DisplayUserName;
                ViewData["UserName"] = "Welcome" + DisplayUserName;
                return RedirectToAction("Index", "MPP", new { UserID = LoginUser });
            }          
            else
            {
                ModelState.AddModelError("","Invalid Username or Password");
            }               
        }
        return View();          
    } 
```

在布局页面中：

```
 @{  @ViewData["UserName"]   } 
```

我尝试了以下方式来显示用户名。但它会抛出空异常。
编辑 ：

```
@foreach (var m in IEnumerable<SampleECommerce.Models.LoginModels>)ViewData["UserName"])
{ 
    @m.UserName
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:08:21.473

有一些误解，比如如果你设置`ViewData["UserName"]`一个字符串值，你会得到一个`IEnumerable<SampleECommerce.Models.LoginModels>`. 这是另一个解决方案：

把它放到布局页面：

```
<span>@{Html.RenderAction("actionname", "controllername");}</span> 
```

并在相关行动中：

```
 public ActionResult actionname() {
        string result = getusername();
        return Content(result);
    }

[NoneAction]
private string getusername(){
    return (Membership.GetUser()!= null) ? Membership.GetUser().UserName : "Guest";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:05:01.707

试试不用额外的@，即

```
 @{  ViewData["UserName"]   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:09:49.093

首先，您需要将语法更改为：

```
@(ViewData["UserName"]) 
```

这可能是最好的（*坏的一群*）。实际上，您应该寻求通过控制器`User`的属性（通常在您读取 cookie 的授权属性中）将用户推送到页面的`User`属性中 - 这样您就不会依赖类型不安全`ViewData`和魔法您将在***每一页***上使用的东西的字符串。

但无论如何......如果视图是由于最后`return View();`一行而呈现的，那么如果您按照我所示的那样更改语法，那么您尝试做的事情将会起作用。

如果没有，那么当您这样做时，`return RedirectToAction("Index", "MPP", new { UserID = LoginUser });`您需要将 UserName 推入`TempData`，然后在控制器上的`Index`操作开始时将其读回：`MPP`

所以：

```
TempData["UserName"] = "Welcome " + DisplayUserName;
return RedirectToAction("Index", "MPP", new { UserID = LoginUser }); 
```

然后在您的`Index`方法开始时，您需要将值拉回`TempData`：

```
public class MPPController {
  public ActionResult Index(){
    ViewData["UserName"] = TempData["UserName"];
  }
} 
```

为什么你必须这样做？因为`RedirectToAction`不呈现页面 - 它告诉客户端向新的 Url 发出不同的请求 - 因此`ViewData`就服务器而言，任何或模型或任何东西都会被丢弃。 ***是否仅在两个连续请求***`TempData`之间提供临时存储- 因此它适用于该场景。*`RedirectToAction`*

 *就像我说的那样 - 这确实是一种将您的用户信息从控制器保存到视图的糟糕方法，您应该认真重新考虑它作为紧急事项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-16T08:29:22.937

在布局页面中：

```
<span>@{Html.RenderAction("actionname", "controllername");}</span> 
```

在控制器中存储一个会话变量

```
 [HttpPost]
public ActionResult Index(LoginModels model)
{
      Session["username"] = model.UserName;
     //remaining code
} 
```

增加一项功能

```
public ActionResult actionname() {

    return Content(Session["username"]);
} 
```

所以这里我们不需要额外的功能。*

# javascript - 光标在ie9中的元素上方跳转

> ID：13138518
> 
> 赞同：1
> 
> 时间：2012-10-30T11:59:38.133
> 
> 标签：javascript, html, asp.net-mvc-3, internet-explorer, google-chrome

在我的 MVC3 应用程序中，当悬停在 -element 上方时，我正在切换光标。

这是javascript代码：

```
$('#print').hover(function () {
    var cursorUrl = 'url(@Url.Content("~/Content/img/print_24.ico")), auto';
    $(this).css('cursor', cursorUrl);
}); 
```

问题是：谷歌浏览器以应有的方式显示它。光标悬停，图标显示在鼠标位置上。但是 Internet Explorer 会在链接上方 0,5 - 1cm 处显示光标图标。我已经测试了 browsermodus IE7、IE8 和 IE9。但图标始终位于链接上方。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:40:26.910

我在使用 .cur 光标文件时解决了这个问题（它也可以在 chrome 和 firefox 中正确显示）。

为了创建这些 cur 文件，我使用[了 RealWorld Cursor Designer](http://www.rw-designer.com/cursor-maker)

# javascript - 使用 jQuery 和 jQueryUI 显示/隐藏 div

> ID：13138525
> 
> 赞同：2
> 
> 时间：2012-10-30T12:00:15.260
> 
> 标签：javascript, jquery, jquery-ui

我对此很陌生，知识有限（过去几周都是自学的）。我已经尝试了许多其他人提出的类似问题的解决方案，但似乎没有一个对我有用。

我正在尝试将 'date_range' div 设置为仅在选择 'range' 过滤器时可见。我正在使用 jQuery 1.8.2 和 jQueryUI 1.9（使用 $.noConflict(); 设置）。

我的代码如下（请善待，我知道我不是很擅长这个），任何帮助表示赞赏。

```
<script>
$('#filters').is(function() {
if ($('#range').attr('checked')) {
    $('#date_range').show();
} else {
    $('#date_range').hide();
}
});
</script>

    <div>
        <form align="center" id="filters">
            <input type="radio" id="last24" name="filter_radio" checked="checked"/><label for="last24">Last 24hrs</label>
            <input type="radio" id="WTD" name="filter_radio" /><label for="WTD">WTD</label>
            <input type="radio" id="last_week" name="filter_radio" /><label for="last_week">Last Week</label>
            <input type="radio" id="range" name="filter_radio" /><label for="range">Range</label>
                <div id="date_range">
                    <br />
            <label for="from">From: </label><input type="text" id="from" name="from"/>
            <label for="to">To: </label><input type="text" id="to" name="to" />
                </div>
        </form>     
    </div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T12:06:57.190

试试这个代码

```
$(function(){

    $('#date_range').hide();

    $('#filters').on('click' ,'input[type=radio]', function(){
        if (this.id == "range" && this.checked) {
            $('#date_range').show();
        } else {
            $('#date_range').hide();
        }
    });

}); 
```

检查此**[演示](http://jsfiddle.net/YAKrq/)**

希望它会有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T12:12:41.810

试试这个代码： -

**这是用于隐藏和显示的 jquery：-**

```
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js" ></script>
<script>
function asfd(str)
{
if(str==true)
{
jQuery('div#renew').show();
}
else
{
jQuery('div#renew').hide();
}
}
</script> 
```

**这是调用 Jquery 函数的地方：-**

```
<input type="checkbox" autocomplete="off" onchange="asfd(this.checked);"/> 
```

**这是将隐藏或显示的 div：-**

```
<div id="renew" style="display: none ;">
........Content.........
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:18:45.680

你可以试试这个

**标记**：

```
<label><input id="last24" type="radio" name="filter_radio" value="1" />Last 24hrs</label>
<label><input id="WTD" type="radio" name="filter_radio" value="2" />WTD</label>
<label><input id="last_week" type="radio" name="filter_radio" value="3" />Last Week</label>
<label><input id="range" type="radio" name="filter_radio" value="4" />Range</label>

<div id="filter_radio-4" class="toHide" style="display:none">
    <br />
            <label for="from">From: </label><input type="text" id="from" name="from"/>
            <label for="to">To: </label><input type="text" id="to" name="to" />
</div> 
```

**Javascript**：

```
$(function() {
    $("[name=filter_radio]").click(function(){
            $('.toHide').hide();
            $("#filter_radio-"+$(this).val()).show('slow');
    });
 });​ 
```

**演示**：http: [//jsfiddle.net/chridam/FSrBC/](http://jsfiddle.net/chridam/FSrBC/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:10:50.613

你可以用这个来实现它

```
$('#date_range').hide();

$('[name=filter_radio]').on('click', function(){
    if($('#range').is(':checked')){
        $('#date_range').show();
    } else {
        $('#date_range').hide();
    }
}); 
```

希望它简单明了..

# php - 如何覆盖平面文件中的特定行？

> ID：13138526
> 
> 赞同：1
> 
> 时间：2012-10-30T12:00:15.590
> 
> 标签：php, text

我的文本文件包含：

```
a
b
c
d
e 
```

我不知道如何修改我的代码，以便我可以只用我在输入框“数据”中键入的任何内容覆盖第 3 行（即替换“c”）。我的代码如下，目前输入框“数据”的内容完全替换了我的文件：

```
$data = $_POST['data'];
$file = "data.txt"; 

$fp = fopen($file, "w") or die("Couldn't open $file for writing");

fwrite($fp, $data) or die("Couldn't write values to file"); 
fclose($fp); 
```

我让它反过来工作，即下面的代码仅在页面首次加载时将第 3 行读入文本框中：

```
$file = "data.txt";
$lines = file( $file ); 
echo stripslashes($lines[2]); 
```

任何人都可以建议我需要用来实现这一目标的代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:08:36.100

唯一的方法是读取整个文件，更改第 3 行，然后将其全部写回。基本上，像这样：

```
$lines = file($file);
$lines[2] = $_POST['data'];
file_put_contents($file, implode("\n", $lines)); 
```

顺便说一句，您的阅读代码不会“仅”读取第 3 行 - 它按照 file() 读取所有行，然后您只使用第 3 行。

# ant - Apache Ant 参数仅用于生成 portlet

> ID：13138532
> 
> 赞同：0
> 
> 时间：2012-10-30T12:00:36.590
> 
> 标签：ant, liferay, portlet

我正在使用`Liferay`基于 Apache Ant 的构建并生成 portlet。
我想生成一个`portlet project only`而不编译它的代码。
我该怎么做？必须将哪些参数传递给 ant 命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:52:06.377

只需使用[Plugins SDK](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/the-plugins-s-3)下 portlets 目录中的 create.sh 脚本来创建一个新的 portlet 插件项目。

1.  [安装插件 SDK](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/installing-the-sdk)
2.  在命令行上进入 portlets 子目录
3.  运行 create.sh/create.bat 并传递两个参数，一个用于 portlet 项目的名称，另一个用于显示名称。

所有这些都[在此处完整记录，](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-a-portl-3)以及如何使用[Liferay IDE](http://www.liferay.com/community/liferay-projects/liferay-ide/overview)（用于 Liferay 开发的 Eclipse 插件）执行相同的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:35:34.450

`myProject-xmlportletfactory`文件夹下的文件夹中有2个文件`XmlPortletFactory`：build.xml和myProject.xml。
当我`ant`在此路径中运行时，它会运行 build.xml。
在buil.xml 文件中，`<target>`标签下有to`<ant>`标签，第一个为项目构建服务和类，第二个为项目编译和部署。如果我删除第二个标签并运行 ant，它将只构建项目而不编译它。

# sql - 如何处理作为过程输入参数的大字符串？

> ID：13138534
> 
> 赞同：-1
> 
> 时间：2012-10-30T12:00:43.963
> 
> 标签：sql, oracle, plsql, plsqldeveloper

我得到 200 个供应商名称作为存储过程的巨大值的输入参数。我尝试在 CLOB、VARCHAR2(32767) 中声明。但是当我尝试执行时它不接受。请任何人帮助我如何处理这个问题。

```
CREATE OR REPLACE PROCEDURE GMMT_PROC.or_rmce_RB_grid_sp (
   p_plant_cd        IN VARCHAR2,
   p_region_cd       IN VARCHAR2,
   p_matrl_nbr       IN OUT VARCHAR2,
   p_supplier_nbr    IN OUT VARCHAR2,
   p_supplier_name   IN OUT CLOB,
   p_mrpcontrollercd IN OUT VARCHAR2,
   p_currency        IN   VARCHAR2,
   oresultset        OUT  sys_refcursor,
   p_err_cd          OUT  NUMBER,
   p_err_msg         OUT  VARCHAR2
)
IS
sqlquery varchar2(10000);
p1 varchar2(10);
p2 varchar2(20);
p3 varchar2(20);
p4 varchar2(20);
v_percent varchar2(10):='%';
V_FROM_CURRENCY VARCHAR2(5);
V_EX_RATE NUMBER;
v_matrl_nbr       VARCHAR2(10000);
v_supplier_nbr    VARCHAR2(10000);
v_supplier_name   CLOB;
v_mrpcontrollercd  VARCHAR2(10000);

BEGIN
p1:='matrl_nbr';
 v_matrl_nbr:=p_matrl_nbr;
 p2:='supplier_nbr';
 v_supplier_nbr :=p_supplier_nbr;
 p3:='supplier_name_txt';
 v_supplier_name :=p_supplier_name;
 p4:='mrp_controller_cd';
 v_mrpcontrollercd:=p_mrpcontrollercd; 
sqlquery:='select wk_nbr, nbr_working_days,'||p1||' as matrl_nbr ,'||p2||' as supplier_nbr,'||p3||' as supplier_name_txt,'||p4||' as mrp_controller_cd,sum(reqmnt_qty)reqmnt_qty , sum(proj_inven_qty)proj_inven_qty, sum(doh) doh,sum(proj_recpt_1) proj_recpt_1, sum(proj_recpt_2) proj_recpt_2, sum(proj_recpt_3) proj_recpt_3, sum(proj_recpt_4) proj_recpt_4,sum( proj_recpt_total_qty) proj_recpt_total_qty,sum(consumption_qty) consumption_qty, sum(consumption_var_qty) consumption_var_qty , sum(final_recpt_qty) final_recpt_qty,sum(recpt_var_qty) recpt_var_qty from GMMT_OWNER.OR_RMCE_GTT_PROJ_RECPT_T ';
sqlquery:=sqlquery||' where ('''||v_matrl_nbr||''' IS NULL) OR matrl_nbr IN (SELECT * FROM TABLE(GMMT_PROC.OR_in_list_RPT5_FN('''||v_matrl_nbr||'''))) OR matrl_nbr like '''|| v_matrl_nbr||v_percent||'''';
sqlquery:=sqlquery||' AND ('''||v_supplier_nbr||''' IS NULL) OR supplier_nbr IN (SELECT * FROM TABLE(GMMT_PROC.OR_in_list_RPT5_FN('''||v_supplier_nbr||'''))) OR supplier_nbr like '''|| v_supplier_nbr||v_percent||'''';
sqlquery:=sqlquery||' AND ('''||v_supplier_name||''' IS NULL) OR supplier_name_txt IN (SELECT * FROM TABLE(GMMT_PROC.OR_in_list_RPT5_FN('''||v_supplier_name||'''))) OR supplier_name_txt like '''|| v_supplier_name||v_percent||'''';
sqlquery:=sqlquery||' AND ('''||v_mrpcontrollercd||''' IS NULL) OR mrp_controller_cd IN (SELECT * FROM TABLE(GMMT_PROC.OR_in_list_RPT5_FN('''||v_mrpcontrollercd||'''))) OR mrp_controller_cd like '''|| v_mrpcontrollercd||v_percent||'''';
sqlquery:=sqlquery||' group by wk_nbr, nbr_working_days,'||p1||','||p2||','||p3||','||p4||' order by wk_nbr';

OPEN oresultset FOR sqlquery;

dbms_output.put_line(sqlquery);
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:34:24.227

您需要了解绑定变量！永远不要*连接*传递给 SQL 语句的值。

请参阅[http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/dynamic.htm#CHDFCHHJ](http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/dynamic.htm#CHDFCHHJ)了解为什么这是一个坏主意。

现在您遇到的问题是由于插入到 SQL 语句中的值很大，导致字符串*很*长——对于 varchar 来说太长了。

请参阅[http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/dynamic.htm#BJEDAHEE](http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/dynamic.htm#BJEDAHEE)了解如何使用来自 PL/SQL 的动态 SQL 的绑定变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:42:52.583

动态 SQL：不要这样做。

您永远不应该，永远不要将包含值的变量连接到 SQL。[永远不要，](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:104931400346587790)它会降低性能，产生难以重现/发现的错误，并且公然对 SQL 注入开放。

可以使用动态 SQL 进行动态分组，因为 P1...P4 不是值，而是列名，因此无法绑定。

[**所有其他变量应作为绑定传递**](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#BJEDAHEE)：

你的 OPEN 声明应该是：

```
OPEN oresultset FOR '
SELECT wk_nbr,
       nbr_working_days,
       ' || dbms_assert.simple_sql_name(p1) || ' AS matrl_nbr,
       ' || dbms_assert.simple_sql_name(p2) || ' AS supplier_nbr,
       ' || dbms_assert.simple_sql_name(p3) || ' AS supplier_name_txt,
       ' || dbms_assert.simple_sql_name(p4) || ' AS mrp_controller_cd,
       sum(reqmnt_qty) reqmnt_qty,
       [...]
  FROM GMMT_OWNER.OR_RMCE_GTT_PROJ_RECPT_T
 WHERE (:VAR1 IS NULL)
    OR matrl_nbr IN (SELECT * FROM TABLE(GMMT_PROC.OR_in_list_RPT5_FN(:VAR1)))
    OR matrl_nbr LIKE :VAR1 || ''%''
    AND (:VAR2 IS NULL)
    OR supplier_nbr IN (SELECT * FROM TABLE(GMMT_PROC.OR_in_list_RPT5_FN(:VAR2)))
    OR supplier_nbr LIKE :VAR2 || ''%''
    [...]
GROUP BY wk_nbr,
         nbr_working_days,
         ' || p1 || ', ' || p2 || ', ' || p3 || ', ' || p4 || '
ORDER BY wk_nbr' 
   USING v_matrl_nbr, v_matrl_nbr, v_matrl_nbr, 
         v_supplier_nbr, v_supplier_nbr, v_supplier_nbr,
         [...]; 
```

为防止用户滥用此动态 SQL 片段，您必须确保 p1...p4 已从您定义的列表中预先批准，或者如上所述使用[DBMS_ASSERT 。](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_assert.htm#BABHIEBA)

实际上，如果列表很小，您可以使用简单的静态 SQL：

```
OPEN cc FOR 
    SELECT wk_nbr,
           nbr_working_days,
           decode(p1, 'column1', column1, 'column2', column2 [...]) AS matrl_nbr,
           [...]
     GROUP BY [...]
              decode(p1, 'column1', column1, 'column2', column2 [...]),
              [...]; 
```

# excel - 在excel中查找最后一行数据[特定]/[过滤]年份

> ID：13138541
> 
> 赞同：1
> 
> 时间：2012-10-30T12:01:23.403
> 
> 标签：excel, excel-formula

在excel中，我有如下数据。

```
2011    0
2011    15
2011    10
2011    5
2012    15
2012    10
2012    5 
```

我想找到的是相应年份的最后一行，以便输出为

```
2011    5
2012    5 
```

知道如何完成这项工作吗？

我正在查看这篇[文章](http://en.allexperts.com/q/Excel-1059/Find-filled-cell-column.htm)并找到了查找最后一行数据的方法，但是我需要知道如何按年份过滤相同的数据。

**注意**：我想使用 excel 预定义函数来执行此操作。没有宏，没有编码，没有枢轴。

* * *

## 编辑 1

`=INDEX($B:$B,MAX(IF(LEN($B:$B)>0,ROW($B:$B),0)),1)`给我答案 5。但是我希望它逐年适应。知道如何完成这项工作吗？

* * *

## 编辑 2

`=OFFSET(B2,MAX(IF(NOT(ISBLANK(B2:B25)),ROW(B2:B25),0))-ROW(B2),0)`这也给出了最后一行数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:39:01.400

这是你想要的吗？

```
{=INDEX($B$1:$B$7,MAX(IF(A9=$A$1:$A$7,ROW($A$1:$A$7))))} 
```

您**必须**将此作为数组函数输入，因此请在`{}`'s 之间输入复制并粘贴代码，然后按`ctrl-shift-enter`。该代码假设您`2011`在 cell 中`A9`。如果您然后输入 2012`A10`并将公式复制下来，它将起作用。

![屏幕截图](../Images/4b01bed6700f2178bf5065a9f243ef02.png)

该公式的基本思想是：

1.  如果任何单元格`A1:A7`匹配`A9`，则将其行号添加到候选行列表中
2.  取候选列表的最大行数；说这是*k*
3.  使用索引函数返回第*k*行的值`B1:B7`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:07:43.767

*无需编码*即可做到这一点的最简单方法是使用[数据透视表](http://chandoo.org/wp/2009/08/19/excel-pivot-tables-tutorial/)。

如果你碰巧为它写了一个 excel 公式或函数，你很可能会使用[max()](http://www.techonthenet.com/excel/formulas/max.php)函数和vlookup( [)](http://www.techonthenet.com/excel/formulas/vlookup.php)或[hlookup()](http://www.techonthenet.com/excel/formulas/hlookup.php)函数。

# c++ - 从 mp3 获取没有元数据（ID3）的数据的方法

> ID：13138543
> 
> 赞同：-1
> 
> 时间：2012-10-30T12:01:30.110
> 
> 标签：c++, objective-c, cocoa, mp3, id3

有没有办法使用 Objective-C、C++ 或 C 从 mp3 文件中获取数据删除的元数据（例如，ID3）？

[PHP](http://php.net/manual/en/function.id3-remove-tag.php)中也有类似的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:26:44.327

不幸的是没有。[使用库（对于 ID3， ID3.org](http://id3.org/Implementations)上列出了库实现）。

如果由于某种原因您不能使用库，则从文件中删除单个 ID3 标记是一个非常简单的过程（搜索字符“ID3”，然后查看标头以获取以字节为单位的标记大小（[找到标头的详细信息这里](http://id3.org/id3v2.4.0-structure)）。标签将是连续的，因此您可以使用文件描述符将其删除。

# android - 在只有一个 URL + android 的 Listview 中延迟加载数据

> ID：13138544
> 
> 赞同：1
> 
> 时间：2012-10-30T12:01:32.957
> 
> 标签：android

我有一个 URL，它加载了大约 500 条数据记录，这需要花费大量时间来下载并在 Listview 中显示。我想使用延迟加载来显示数据，但是因为当我调用异步任务时，会调用 url 并获取所有数据。但是我想显示前几条记录，然后在滚动时应该加载下一条记录。请好心让我知道实现这一目标的逻辑。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:07:07.470

有很多解决方案可以解决这个问题。

**我自己有几个：**
1) [LazyList](https://github.com/thest1/LazyList)这是一个很好的例子
2) 我使用[AQuery](http://code.google.com/p/android-query/)来解决惰性和异步问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:09:12.183

我首先创建custome listview，然后当您在listview上设置数据时，这个过程会写入thread.i很简单的方法

# javascript - 第一次单击按钮验证 CKeditor 中的数据，第二次单击它不会获取修改后的数据

> ID：13138545
> 
> 赞同：0
> 
> 时间：2012-10-30T12:01:34.623
> 
> 标签：javascript, jquery, html, ckeditor

我正在使用 jquery 在按钮单击事件上验证 CKeditor 中存在的数据。单击按钮后，它将正确答案列表和错误答案列表分开。这工作正常。但是在修改了错误的答案并点击按钮后，它再次采用最初输入的值。如何使其在第二次单击按钮时获取修改后的数据。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="../ckeditor/ckeditor.js"></script>
<script src="../ckeditor/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
 $(document).ready(function () {

     CKEDITOR.replace('Field');

     var correctZips = new Array;
         var wrongZips = new Array;
     var CorZip;
     var WorZip;

     $('#save').click(function () {

        var editor_data = CKEDITOR.instances['Field'].getData();
        var element = $(editor_data).text().split(",");

            $.each((element), function (index, value) {
            if(this.length=5 && jQuery.isNumeric(this)) {
                    correctZips= correctZips+"<span>"+this+"</span>"+",";

                }else {
                    wrongZips= wrongZips+"<span id='flip' style=\"background-color: yellow; \">"+this+"</span>"+",";
                }
            }
            )   

            CKEDITOR.instances.Field.setData((correctZips + wrongZips), function (index, value){

            })
        //$("#save").attr("disabled", "disabled");       
     });         
 });

</script>
</head>
<body>
<textarea id="Field"></textarea>
<button id ="save">Verify the ZipCodes</button>
</body>
</html> 
```

问候，史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:29:34.913

您将 2 个`ZIPS`变量定义为单击处理程序之外的数组。您需要在每次单击时重置它们，因此需要在处理程序中定义它们，并且不应将它们定义为数组，因为您使用它们来连接字符串

```
 $('#save').click(function () {
      var correctZips = '', wrongZips='';/* start with empty strings*/
      /* remainder of your handler code*/
 }); 
```

# objective-c - 更新 NSArray 上的值

> ID：13138546
> 
> 赞同：2
> 
> 时间：2012-10-30T12:01:38.117
> 
> 标签：objective-c, ios, xcode

我遇到了这样的问题。我需要更新我的 NSArray 中的值。而且不知道怎么做。这是我的数组

```
NSArray *arrayWithInfo = [[NSArray alloc] initWithObjects:AMLocalizedString(@"Status", nil),AMLocalizedString(@"Call", nil),AMLocalizedString(@"Location", nil),AMLocalizedString(@"Control", nil),AMLocalizedString(@"Sim", nil),AMLocalizedString(@"Object", nil),AMLocalizedString(@"Info", nil),nil];
self.dataArray = arrayWithInfo;
[arrayWithInfo release]; 
```

更具体地说，我已经用这个数组初始化了 tableview。用户有可能使用不同的本地化字符串，所以我必须更新它。通过使用`[tableview reloadData];`我得到了要更新的表，但 NSArray 中的值与它们最初初始化时保持不变。

那么如何让数组再次查找字符串并获取它们的新值呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T12:03:41.123

使用**NSMutableArray**而不是**NSArray**

**可以修改**NSMutableArray （以及名称中包含****Mutable**的所有其他类）。**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T12:04:26.910

您应该使用[NSMutableArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)。这样做将允许您在实例化后更改其值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:12:39.270

您的数组在这里不需要是可变的，因为数组似乎是全部或全部。您没有提到删除某些对象而不是其他对象的要求。`NSMutableArray`不需要。您想为数组编写一个延迟加载 getter 方法，如果该数组不存在，该方法会重新实例化它。

```
-(NSArray *)dataArray{
    if (_dataArray){
        return _dataArray;
    }

    _dataArray = NSArray *arrayWithInfo = [[NSArray alloc] initWithObjects:AMLocalizedString(@"Status", nil),AMLocalizedString(@"Call", nil),AMLocalizedString(@"Location", nil),AMLocalizedString(@"Control", nil),AMLocalizedString(@"Sim", nil),AMLocalizedString(@"Object", nil),AMLocalizedString(@"Info", nil),nil];
    return _dataArray;
} 
```

然后当你想重新加载 tableView

```
self.dataArray = nil;
[tableView reloadData]; 
```

这会破坏旧阵列，迫使它重新制作，但使用新的本地化。

编辑：

问题是数组没有存储语句，而是存储了该语句`AMLocalizedString(@"Status", nil)`的结果，即本地化字符串本身。如果不重新创建整个数组或使用`NSMutableArray`并更改所有对象，就无法让数组重新评估该语句。延迟加载getter方法更多的是objective-c风格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:04:02.967

您需要使用`NSMutableArray`. 是不可变的`NSArray`。**

# filesystems - 如何使用 nsis 保护文件不被删除？

> ID：13138549
> 
> 赞同：0
> 
> 时间：2012-10-30T12:01:46.947
> 
> 标签：filesystems, installation, nsis

我想锁定一个文件以防止它在安装过程中被删除，但我需要同时读取这个文件。我怎样才能使用 NSIS 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:43:37.780

`FileOpen $0 "$instdir\myfile.txt" r`应该阻止删除并允许您从中读取...

# c# - 如何使用 Fiddler 和 C# 来跟踪 http 请求

> ID：13138558
> 
> 赞同：1
> 
> 时间：2012-10-30T12:02:20.283
> 
> 标签：c#, fiddler, http-request, ranorex

我正在使用带有 c# 的 ranorex 自动化工程师，并且有如下客户要求

1.我们安排了几个测试用例每天运行 2.如果任何特定的测试用例失败，则应跟踪该失败用例的 https 请求

我用谷歌搜索发现我们需要使用 fiddlercore 并编写了如下脚本

```
1.Fiddler.FiddlerApplication.Startup(8877, true, true);
2.var items = new List<Fiddler.Session>();
3.Fiddler.FiddlerApplication.AfterSessionComplete += delegate(Fiddler.Session oS)
4.{
5\.  items.Add(oS);
6.};

7.Fiddler.FiddlerApplication.OnNotification += delegate(object sender,      NotificationEventArgs oNEA) 
8.{ Console.WriteLine("** NotifyUser: " + oNEA.NotifyString); };
9.Fiddler.FiddlerApplication.Log.OnLogString += delegate(object sender, LogEventArgs   oLEA) { 10.Console.WriteLine("** LogString: " + oLEA.LogString); };

    //Open url
    //steps in testcase

FiddlerApplication.oTranscoders.ImportTranscoders( @"C:\EZPrints_VL_Demo\FiddlerCore- BasicFormats.dll");
var oExportOptions = new Dictionary<string, object>();
string filename = "C:\\output.har";
oExportOptions.Add("Filename", filename);
Fiddler.FiddlerApplication.DoExport("HTTPArchive v1.2", items.ToArray(), oExportOptions, null);
Fiddler.FiddlerApplication.Shutdown(); 
```

但在执行此操作后，我看不到任何名为“output.har”的文件，而且当我在第 3 步执行后调试时不会进入循环内的第 5 步，而是进入第 7 步。

我的问题是

1.  我的方法是否符合我的要求。它会跟踪我整个测试用例的所有会话吗？如果没有，我需要做哪些更新才能做到这一点？2.如果我的方法是正确的，我是否遗漏了一些阻止我生成输出的东西？

# css - 需要一些反馈：使用 CSS 自定义 JBoss-Portal

> ID：13138562
> 
> 赞同：0
> 
> 时间：2012-10-30T12:02:42.517
> 
> 标签：css, portlet, jboss-portal

作为一名 Web 设计师，我被要求评估 JBoss-portal 实例的定制。我对 JBoss-portal 的了解非常少，但我知道使用此类门户有时（总是？）很难操作和修改布局和主题。

有人可以告诉我是否可以简单地通过新的 CSS 样式表自定义 JBoss-Portal？一些反馈和可以/不能做的例子会有所帮助！

例如：

*   是否可以自定义门户的全局布局？
*   *portal_style.css*是唯一需要修改的文件吗？

我在这里需要的不是一个是或否，而是来自知道如何定制 JBoss-Portal 以及我能走多远的人的一些反馈。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:28:38.117

所以我终于在[这里找到了一个有趣的 HowTo PDF 指南](http://jbossworld.com/2008/downloads/pdf/friday/11-1150am_JBoss_Portal_How-To_Guide_Peter_Johnson.pdf)

我希望这会帮助其他用户；）

# java - 在@Transactional REST 服务方法中捕获 Hibernate Persistence 异常

> ID：13138564
> 
> 赞同：1
> 
> 时间：2012-10-30T12:02:45.607
> 
> 标签：java, spring, hibernate, rest, transactions

我们正在使用 Spring 和 JPA 构建一个 REST 服务，其中每个方法都带有注释`@Transactional`，因为一个 REST 调用就是一个事务。现在，如果说用户试图在具有依赖关系的资源上调用 delete，hibernate 将抛出一个`PersistenceException`，导致 REST 服务器调用返回状态 500。

我们希望捕获这些异常并将它们包装在我们自己的错误对象中，该对象将包含自定义错误代码以及原始消息。

我尝试在 REST 调用中简单地捕获所有`RuntimeExceptions`内容，然后返回我们的自定义错误对象。然而，这不起作用，因为事务已中止的事实显然将在我的方法之外得到处理。

我还尝试`PersistenceException`直接在 DAO 级别捕获。这在我的单元测试中运行良好，并没有改变它们之外的任何东西。此外，我们的 Web 容器似乎只是通过抛出 a`DataIntegrityViolationException`而不是`PersistenceException`. 这甚至没有出现在跟踪中。作为旁注，这相当令人困惑，因为我认为 Hibernate 会处理它自己的东西。为什么弹簧干扰？

无论如何..我也尝试使用

```
TransactionAspectSupport.currentTransactionStatus().setRollbackOnly(); 
```

在 REST 服务方法中没有成功。

我在这里不知所措..似乎对开始的交易的错误处理`@Transactional`不在我的掌控之中..？！是否可能是因为注释创建了一个在不同范围内处理的代理？

是使用 ? 手动处理事务的唯一选择`TransactionTemplate`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:27:15.513

我希望在尝试提交事务时会引发异常。因此，只要您在事务中，就不会出现异常。

Spring 会做一些叫做 Exception-Translation 的事情，这会将一些（供应商）特定的异常“翻译”成一些其他的 Spring Exceptions。我想这就是为什么你会注意到`DataIntegrityViolationException`

# ffmpeg - ffmpeg windows和linux版本：linux上不允许操作

> ID：13138566
> 
> 赞同：1
> 
> 时间：2012-10-30T12:02:54.853
> 
> 标签：ffmpeg

我从以下位置运行最新编译的 ffmpeg 版本：http: [//ffmpeg.gusari.org/static/](http://ffmpeg.gusari.org/static/)

此命令在 Windows 上正常工作：

```
ffmpeg -i "rtmp://myIpAddress/live/video live=1" -c copy dump.flv 
```

当我在 Linux 上运行它时（ffmpeg 来自[http://ffmpeg.gusari.org/static/64bit/](http://ffmpeg.gusari.org/static/64bit/)）

```
ffmpeg -i "rtmp://myIpAddress/live/video live=1" -c copy dump.flv 
```

我有：

```
ffmpeg version N-46124-gb399816 Copyright (c) 2000-2012 the FFmpeg developers
built on Oct 29 2012 05:22:17 with gcc 4.6 (Debian 4.6.3-1)

configuration: --prefix=/root/ffmpeg-static/64bit --extra-cflags='-I/root/ffmpeg-static/64bit/include -static' --extra-ldflags='-L/root/ffmpeg-static/64bit/lib -static' --extra-libs='-lxml2 -lexpat -lfreetype' --enable-static --disable-shared --disable-ffserver --disable-doc --enable-bzlib --enable-zlib --enable-postproc --enable-runtime-cpudetect --enable-libx264 --enable-gpl --enable-libtheora --enable-libvorbis --enable-libmp3lame --enable-gray --enable-libass --enable-libfreetype --enable-libopenjpeg --enable-libspeex --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-version3 --enable-libvpx
  libavutil      52\.  1.100 / 52\.  1.100
  libavcodec     54\. 69.100 / 54\. 69.100
  libavformat    54\. 35.100 / 54\. 35.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 20.106 /  3\. 20.106
  libswscale      2\.  1.101 /  2\.  1.101
  libswresample   0\. 16.100 /  0\. 16.100
  libpostproc    52\.  1.100 / 52\.  1.100
[rtmp @ 0x37bde40] Server error: 
rtmp://myIPAddress/live/video live=1: Operation not permitted 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T03:46:39.920

看来您的 Linux 版本尚未使用 librtmp 编译。仔细注意我的版本的输出。

```
ffmpeg 版本 N-47062-g26c531c 版权所有 (c) 2000-2012 FFmpeg 开发者
  使用 gcc 4.7.2 (GCC) 于 2012 年 11 月 25 日 12:25:21 构建
  配置：--enable-gpl --enable-version3 --disable-pthreads --enable-runt
ime-cpudetect --enable-avisynth --enable-bzlib --enable-frei0r --enable-libass -
-enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libfreetype --enab
le-libgsm --enable-libmp3lame --enable-libnut --enable-libopenjpeg --enable-libo
脓--enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libtheo
ra --enable-libutvi​​deo --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-li
bvorbis --enable-libvpx --enable-libx264 --enable-libxavs --enable-libxvid --ena
ble-zlib
```

# c - 具有指针作为C中成员的结构的memcpy

> ID：13138567
> 
> 赞同：5
> 
> 时间：2012-10-30T12:03:03.560
> 
> 标签：c, data-structures, structure

我有一个带有一些指针作为成员的结构，我正在尝试做 memcpy，有人建议我在这种情况下不应该使用 memcpy，因为 memcpy 做的是浅拷贝（意味着它复制指针）而不是深拷贝（意味着复制什么指针指向）。

但我不确定为什么它在以下程序中没有任何区别：请查看代码和输出，并解释为什么在这种情况下它不是浅拷贝？

```
#include <stdio.h>
#include <malloc.h>
#include <string.h>

struct student {
    char *username;
    char *id;
    int roll;
};

void print_struct(struct student *);
void print_struct_addr(struct student *);
void changeme(struct student *);

int main (void) {
    struct student *student1;
    char *name = "ram";
    char *id = "200ABCD";
    int roll = 34;

    student1 = (struct student *)malloc(sizeof(struct student));
    student1->username = name; 
    student1->id = id;
    student1->roll = roll; 
    print_struct_addr(student1);
    print_struct(student1);
    changeme(student1);
    print_struct(student1);
    print_struct_addr(student1);
    return 0;
}

void print_struct(struct student *s) {
    printf("Name: %s\n", s->username);
    printf("Id: %s\n", s->id); 
    printf("R.No: %d\n", s->roll);
    return; 
}

void print_struct_addr(struct student *s) {
    printf("Addr(Name): %x\n", &s->username);
    printf("Addr(Id): %x\n", &s->id);
    printf("Addr(R.No): %x\n", &s->roll);
    return;
}

void changeme(struct student *s) {
    struct student *student2;
    student2->username = "someone";
    student2->id = "200EFGH";
    student2->roll = 35;
    print_struct_addr(student2);
    memcpy(s, student2, sizeof(struct student));
    student2->username = "somebodyelse";
    return;
} 
```

输出：

```
Addr(Name): 9b72008
Addr(Id): 9b7200c
Addr(R.No): 9b72010
Name: ram
Id: 200ABCD
R.No: 34
Addr(Name): fa163c
Addr(Id): fa1640
Addr(R.No): fa1644
Name: someone
Id: 200EFGH
R.No: 35
Addr(Name): 9b72008
Addr(Id): 9b7200c
Addr(R.No): 9b72010 
```

如果 memcpy 进行浅拷贝，为什么 student1->username 不是“somebodyelse”。

请说明在哪种情况下，此代码会产生问题，我希望在 main() 中调用 changeme() 后 student1 中的 student2 信息，并且之后应该能够使用修改后的 student1 数据。

有人建议我不要在这里使用 memcpy() ，但它似乎工作正常。

谢谢

这是修改后的代码：但我仍然没有在这里看到浅拷贝的概念：

```
#include <stdio.h>
#include <malloc.h>
#include <string.h>

struct student {
    char *username;
    char *id;
    int roll;
};

void print_struct(struct student *);
void print_struct_addr(struct student *);
void changeme(struct student *);

int main (void) {
    struct student *student1;
    char *name = "ram";
    char *id = "200ABCD";
    int roll = 34;

    student1 = malloc(sizeof(*student1));
    student1->username = name; 
    student1->id = id;
    student1->roll = roll; 
    print_struct_addr(student1);
    print_struct(student1);
    changeme(student1);
    print_struct(student1);
    print_struct_addr(student1);
    return 0;
}

void print_struct(struct student *s) {
    printf("Name: %s\n", s->username);
    printf("Id: %s\n", s->id); 
    printf("R.No: %d\n", s->roll);
    return; 
}

void print_struct_addr(struct student *s) {
    printf("Addr(Name): %x\n", &s->username);
    printf("Addr(Id): %x\n", &s->id);
    printf("Addr(R.No): %x\n", &s->roll);
    return;
}

void changeme(struct student *s) {
    struct student *student2;
    student2 = malloc(sizeof(*s));
    student2->username = strdup("someone");
    student2->id = strdup("200EFGH");
    student2->roll = 35;
    print_struct_addr(student2);
    memcpy(s, student2, sizeof(struct student));
    student2->username = strdup("somebodyelse");
    free(student2);
    return;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T12:07:26.047

这个：

```
struct student *student2;
student2->username = "someone";
student2->id = "200EFGH";
student2->roll = 35; 
```

正在写入未分配的内存，调用未定义的行为。在写作之前，您需要确保`student2`指向有效的地方。

要么分配它，要么使用堆栈上的实例，因为无论如何你只是要从中复制。

当然，这整个初始化`student2`然后`s`用它覆盖的业务是不必要的复杂，你应该直接修改`s`。

另外，这个：

```
student1 = (struct student *)malloc(sizeof(struct student)); 
```

最好用 C 写成：

```
student1 = malloc(sizeof *student1); 
```

这消除了[无意义的（并且有潜在危险的）强制转换](https://stackoverflow.com/a/605858/28169)，并确保大小适合该类型，将程序员检查的依赖项替换为编译器处理的依赖项。

第三，初级 C 程序员有点典型的“症状”是没有意识到您可以分配结构。所以，而不是

```
memcpy(s, student2, sizeof *s); 
```

你可以写：

```
*s = *student2; 
```

并让编译器正确。这可能是性能上的胜利，因为结构可以包含很多填充，赋值可以知道而不是复制，但`memcpy()`不能忽略。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:07:02.480

它完全起作用是侥幸。在您的`changeme()`函数中，您正在为 创建一个新指针`student2`，但您没有为它分配内存。

其次，在同一个功能中`student2` *，*您将其复制到`s`. 浅拷贝并不意味着拷贝中的任何指针都是共享的——它意味着指针本身的*值也被拷贝。*所以当你改变`student2->username`之后`memcpy`它不会改变`s->username`.

随着您的进步，您还需要更加小心地分配这些结构*中的内存。*AFAICR，如果您使用常量文字字符串，那么指针将指向程序内存空间中的一块静态初始化数据。然而，更严格的设计将为这些元素`malloc()`提供`free()`动态记忆。如果您需要一个静态初始化的值，您可以使用`strdup()`或类似的方法将字符串从静态空间*复制*到堆内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:06:59.893

复制*后将*用户名设置为“somebodyelse” 。这仅更改函数“changeme（）”内的本地副本。*尝试在*“changeme()”中打印出 student2 ，你会明白我的意思。

# php - CakePHP removeFromTree 总是在删除之前

> ID：13138571
> 
> 赞同：0
> 
> 时间：2012-10-30T12:03:17.473
> 
> 标签：php, cakephp, tree, cakephp-1.3

在 CakePHP 1.3 上，我有一棵树，并且总是在删除树记录之前，我必须从树中删除记录，因为我不想删除它的子项。一种选择是`removeFromTree`始终在删除记录之前在控制器内部执行操作，但其他非树模型也使用删除操作。

所以我能想到的是放入`removeFromTree`回调`beforeDelete`。这是我能做的最好的还是你有任何其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:05:47.473

把它放在你模型的`beforeDelete()`方法中很好，我会建议。随它去吧。

# delphi - TAction.SecondaryShortCuts 是特定于语言的。如何正确设置？

> ID：13138573
> 
> 赞同：4
> 
> 时间：2012-10-30T12:03:23.780
> 
> 标签：delphi, delphi-xe2

我刚刚使用了 Delphi 的 TAction 的 SecondaryShortCuts-Feature。但是快捷方式是由字符串定义的，例如“F5”或“Shift+F5”。现在的问题是：在我的德语 Windows 上，该操作不会触发，因为键“Shift”在德语中被称为“Umsch”！这是否意味着 SecondaryShortCuts-Property 在设计时完全没用，因为没有人可以创建可以在国际上使用它的应用程序？

我可以通过将 VK_SHIFT 转换为正确的名称在运行时设置密钥。我通过[GetKeyNameText](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646300%28v=vs.85%29.aspx)进行了尝试，但这并没有奏效，因为它给出了长格式“Umschalt”而不是“Umsch”。有人知道获取密钥名称的简短版本的功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T12:09:30.723

你可以试试这个：从快捷方式生成快捷方式文本：

```
var
  s: TShortCut;
begin
  s := ShortCut(Ord('A'), [ssShift]);
  Action1.SecondaryShortCuts.Add(ShortCutToText(s)); 
```

顺便说一下，这些值由以下常数确定。你翻译过那些吗？如果是这样，你需要吗？：

```
SmkcShift = 'Shift+';
SmkcCtrl = 'Ctrl+';
SmkcAlt = 'Alt+'; 
```

# ios5 - 如何以编程方式启用 iOS 6 的“自动布局”？

> ID：13138574
> 
> 赞同：1
> 
> 时间：2012-10-30T12:03:29.020
> 
> 标签：ios5, ios6

如何以编程方式启用“自动布局”。实际上我必须创建一个应该在 iOS6 和 iOS5 上运行的应用程序，但我们只能在 iOS 6 的 XIB 中启用“自动布局”，它在 iOS 5 上不起作用，所以我正在检查 iOS 版本并使用 if else 条件根据 iOS 的相应任务。因此，如果应用程序在 iOS 6 上运行，我将启用 AutoLayout，否则我将编写 AutoResizing 代码。如果我在任何时候不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:30:32.467

如果您想在 iOS6 设备上自动布局而不是 iOS5（不支持）但仍想使用 nib，则必须保留单独的 nib。iOS5 一个，iOS6 一个。

加载 nib 时，通过检查 NSLayoutConstraint 类是否存在来检查是否支持自动布局：

```
if (NSClassFromString(@"NSLayoutConstraint"))
    //Load iOS6 nib with autlayout.
else
    //Load iOS5 nib sans autolayout. 
```

# django - 如何在同一页面上显示两个表单？

> ID：13138575
> 
> 赞同：0
> 
> 时间：2012-10-30T12:03:34.607
> 
> 标签：django

如何在同一页面上显示两个表单？我会感谢你的帮助

这是我的views.py：

```
def register_user(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.create_user(username=form.cleaned_data['username'], email=form.cleaned_data['email'], password=form.cleaned_data['password'])
            user.save()
            user_profil = UserProfil(user=user, name=form.cleaned_data['name'], last_name=form.cleaned_data['last_name'],city=form.cleaned_data['city'])
            user_profil.save()
            return HttpResponseRedirect('/profile/')
        return render_to_response('access.html', {'formRegister':form}, context_instance=RequestContext(request))
    else:
        form = RegistrationForm()
        return render_to_response('access.html', {'formRegister':form}, context_instance=RequestContext(request))

def login_user(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
        form = LoginForm(request.POST)
        if forml.is_valid():
            username = form.cleaned_data['username']
            password = form.cleaned_data['password']
            user_profil = authenticate(username= username, password=password)
            if user_profil is not None:
                login(request, user_profil)
                return HttpResponseRedirect('/profile/')
            else:
                return HttpResponseRedirect('/login/')
        return render_to_response('access.html', {'formLogin':form}, context_instance=RequestContext(request))
    else:
        form = LoginForm()
        context = {'formLogin':form}
        return render_to_response('access.html', context, context_instance=RequestContext(request)) 
```

这是我的 urls.py

```
url(r'^access/$','users.views.register_user'),
url(r'^access/$','users.views.login_user'), 
```

访问.html：

```
<form action="" method="post">{%csrf_token%}
{{ formRegister.as_p }}
<p><input type="submit" value="Rejestruj"/></p>
</form>

<hr>

<form action="" method="post">{%csrf_token%}
{{ formLogin.as_p }}
<input type="submit" value="Login"/>
</form> 
```

有一个模板（access.html）和两个视图

当我替换 urls.py(order) 时：

```
url(r'^access/$','users.views.login_user'),
url(r'^access/$','users.views.register_user'), 
```

仅显示登录表单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:10:14.257

`return`如果您在语句中更改表单变量的名称怎么办，即

```
{'formRegister':form} 
```

另一个：

```
{'formLogin':form} 
```

**更新：**

在您的 url 文件中，您可以执行以下操作：

```
url(r'^access/login/$','users.views.login_user'),
url(r'^access/register/$','users.views.register_user'), 
```

仍将使用相同的模板，但使用不同的视图来处理表单。

其他替代方案包括：

1.  将不同的 URL 放在两个表单的 action 属性中。然后你将有两个不同的视图函数来处理这两种不同的形式。

2.  从 POST 数据中读取提交按钮的值。您可以判断单击了哪个提交按钮，然后处理逻辑。

# c# - 从 nupkg 读取元数据

> ID：13138580
> 
> 赞同：17
> 
> 时间：2012-10-30T12:03:50.157
> 
> 标签：c#, .net, nuget

无论如何要读取 NuGet 包文件的元数据吗？

我真的很想创建一个简单的站点来在我的 nupkg 文件中进行搜索..

提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-30T20:14:48.670

NuGet.Core包包含用于读取包元数据的官方 API [。](http://nuget.org/packages/Nuget.Core/)

要阅读有关单个 .nupkg 文件的信息，请使用类似于以下的代码。

```
var myPackage = new ZipPackage(@"C:\Path\to\MyPackage.1.0.0.nupkg");

Console.WriteLine("Id: {0}", myPackage.Id);
Console.WriteLine("Version: {0}", myPackage.Version);
Console.WriteLine(
    "Assemblies: {0}",
    myPackage.AssemblyReferences.Select(a => a.Name).ToArray()); 
```

也有类似的类用于读取包源（又名 Feed）等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-10T08:18:09.043

如果您在服务器中部署了 nuget，则可以访问 nugetCore API 来访问所有元数据。

```
using NuGet; 
```

示例代码

```
 IPackageRepository repo =
                PackageRepositoryFactory.Default.CreateRepository("https://nugetserver.sample/nuget");

            //Initialize the package manager
            string path = "../../xyx";
            PackageManager packageManager = new PackageManager(repo, path);

            var package = packageManager.SourceRepository.GetPackages()
                .OrderByDescending(p => p.Version).Where(p => p.Id == packageName).FirstOrDefault();

            var version = package.Version.ToFullString();
            var packageName = package.GetFullName(); 
```

完成这项工作的实际代码如下

```
var package = packageManager.SourceRepository.GetPackages()
                    .OrderByDescending(p => p.Version).Where(p => p.Id == packageName).FirstOrDefault(); 
```

# wpf - WPF RibbonWindow 标签栏样式

> ID：13138584
> 
> 赞同：0
> 
> 时间：2012-10-30T12:04:11.850
> 
> 标签：wpf, ribbon

我想使用 WPF 创建一个 RibbonWindow 应用程序，并且标签栏的外观与窗口标题栏相同。就像 Office 2010 一样：

![](../Images/34b087d0665ed5dbe0655a8425f12fa4.png)

在我的应用程序中，选项卡栏的颜色为蓝灰色，这是添加功能区控件时的默认颜色：

![](../Images/603638808457eda435ee0a41df4ce36e.png)

请问您对如何拥有相同的布局有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:11:28.510

Office 提供的 WPF 功能区无法实现某些功能。`RibbonWindow`但是，当使用 a而不是普通的 WPF`Window`类时，可以使用大多数功能。

我假设，您正在寻找的功能称为 QuickAccessToolbar。

# html - 在普通图像之前加载 CSS 背景图像？

> ID：13138593
> 
> 赞同：3
> 
> 时间：2012-10-30T12:04:37.753
> 
> 标签：html, css, ruby-on-rails, background-image, image

我有一个 ruby​​ on rails web 应用程序，在某些视图中，我有许多重图像（`<img>`）要渲染。`<img>`它们是在 Helper 中生成的。

问题是首先加载 css，然后是 js，然后是重图像，最后是 css 引用的背景图像。

加载所有重图像需要相当长的时间，因此会支撑整个网站。

我想先加载 css 背景图像，然后再加载其他图像，因为它们显然拥有页面的视觉结构。

导轨版本：2.3.8

编辑：谢谢你们，我很抱歉之前没有分享代码。

我有两个模型：类别和图像，每个类别都有很多图像。在视图中，我有一个由助手生成的类别列表：

```

category.each 做 |cat|
    html <<"<a href='##{cat.id}' class='mapcat' >#{cat.libelle}</a>"
结尾

```

当我单击类别时，将显示图像

```
categories_images.each 做 |i|
    html <<"<div id='#{i.id}' class='#{css}'><img src='/images_moi/categories/#{cat.libelle}/#{i.path_file_name}' />"
  结尾

```

我有与类别列表关联的css背景图像问题是图像（`<img>`）显示在类别列表的css背景图像之前。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T12:21:51.237

*我们需要**假设**一些事情，因为您还没有共享您的代码。*

来到您的查询，现在您可以使用**jQuery**预加载图像：

```
function preload(arrayOfImages) {
    $(arrayOfImages).each(function(){
        $('<img/>')[0].src = this;
        // Alternatively you could use:
        // (new Image()).src = this;
    });
}

// Usage:

preload([
    'img/imageName.jpg',
    'img/anotherOne.jpg',
    'img/blahblahblah.jpg'
]); 
```

这节省了加载图像的加载时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-24T12:52:14.000

**使用 base64 字符串。**

例子：

```
background-image: url(data:image/png;base64,*CONVERTED IMAGE DATA HERE*); 
```

*   没有： **
*   在线转换器：[http ://webcodertools.com/imagetobase64converter](http://webcodertools.com/imagetobase64converter)
*   **注意：**如果图像尺寸不太重，我只会建议这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:35:12.793

解决方案：**不要使用 img 标签。**

1.  创建一个包含所有图像的精灵。在您的 application.html 布局中加载精灵一次。
2.  使用 data uris 直接在 html 中传输数据。见[http://css-tricks.com/data-uris/](http://css-tricks.com/data-uris/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T22:27:52.470

我的方法是使用 jquery 和 data-tags 延迟加载图像。这种方法还允许我根据设备宽度和备用平板电脑/移动用户选择不同的图像。

```
<img src="" data-src="/img/graphic-desktop.jpg" data-smallsrc="/img/graphic-smaller.jpg" alt="Graphics" class="lazy" />

<!-- the following would be in your js file -->
$lazy = $('img.lazy');

$(window).load(function(){
  // window load will wait for all page elements to load, including css backgrounds
  $lazy.each(function(){
    // run thru each img.lazy on the page. spare the jquery calls by making $this a variable
    $this = $(this);
    // if the window is greater then 800px wide, use data-src, otherwise, use the smaller graphic
    ($(window).width() >= 800) ? $this.attr('src', $this.attr('data-src')) : $this.attr('src', $this.attr('data-smallsrc'));
  });
}); 
```

# c++ - Qt相当于winapi InterlockedIncrement？

> ID：13138594
> 
> 赞同：0
> 
> 时间：2012-10-30T12:04:48.877
> 
> 标签：c++, qt, winapi

我尝试在 Qt c++ 中找到与我正在阅读的 winapi InterlockedIncrement 等效的内容：http: [//doc.qt.io/qt-4.8/qatomicint.html](http://doc.qt.io/qt-4.8/qatomicint.html)
但我不明白，谁能给我一个简单的例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:34:01.597

`InterlockedIncrement()`生成一个完整的内存屏障（或栅栏）以确保按顺序完成内存操作（MSDN 文档）。它返回新值。

在 Qt 中，这转换为`QAtomicInt::fetchAndAddOrdered(1) + 1`. 例如：

```
QAtomicInt atomInt(15);
int n = atomInt.fetchAndAddOrdered(1) + 1; // n == 16, atomInt == 16 
```

# jsf - Primefaces：selectionMode 多重/设置复选框的值

> ID：13138595
> 
> 赞同：0
> 
> 时间：2012-10-30T12:04:50.187
> 
> 标签：jsf, checkbox, datatable, primefaces

我已经在 J​​SF 中实现了一个数据表，其中包含一个属性 selectionMode="multiple" 的列。到目前为止一切正常。

有没有办法操纵复选框的值？我想根据特定值将第一次加载时的复选框设置为选中或未选中。我已经实现的函数（在 java 中）返回 true 或 false，但我需要将 checkboxValue 设置为该值。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:46:42.210

`value`您可以像处理任何其他组件一样通过属性操作复选框值。请参阅具有多项选择的 DataTable 演示：

[数据表 - RadioCheckbox](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)

# javascript - 计算不包括工作日和节假日的天数

> ID：13138597
> 
> 赞同：-1
> 
> 时间：2012-10-30T12:04:52.700
> 
> 标签：javascript

我知道这个问题被问了很多时间，但请帮助我找不到解决方案

使用下面的代码，我可以计算不包括工作日的天数

现在我还想排除公共假期，例如 2012 年 8 月 15 日、2012 年 9 月 12 日、2012 年 12 月 20 日，请帮忙

```
function namet()
 {

        var iWeeks, iDateDiff, iAdjust = 0;

        var nodays = document.getElementById("timestamp1").value;

        var nodays1 = document.getElementById("timestamp").value;

        var dDate1 = new Date(nodays1);

        var dDate2 = new Date(nodays);

        if (dDate2 < dDate1) {

            alert("End Date : Enter date more than Start Date ");
        }
        // error code if dates transposed

        var iWeekday1 = dDate1.getDay(); // day of week

        var iWeekday2 = dDate2.getDay();
        iWeekday1 = (iWeekday1 == 0) ? 7 : iWeekday1; // change Sunday from 0 to 7
        iWeekday2 = (iWeekday2 == 0) ? 7 : iWeekday2;
        if ((iWeekday1 > 5) && (iWeekday2 > 5)) iAdjust = 1; // adjustment if both days on weekend
        iWeekday1 = (iWeekday1 > 5) ? 5 : iWeekday1; // only count weekdays
        iWeekday2 = (iWeekday2 > 5) ? 5 : iWeekday2;

        // calculate differnece in weeks (1000mS * 60sec * 60min * 24hrs * 7 days = 604800000)
        iWeeks = Math.floor((dDate2.getTime() - dDate1.getTime()) / 604800000)

        if (iWeekday1 <= iWeekday2) {
          iDateDiff = (iWeeks * 5) + (iWeekday2 - iWeekday1)
        } else {
          iDateDiff = ((iWeeks + 1) * 5) - (iWeekday1 - iWeekday2)
        }

        iDateDiff -= iAdjust // take into account both days on weekend

        var final = (iDateDiff + 1); // add 1 because dates are inclusive

        document.leaveapplication.noofdays3.value = final; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:15:59.880

您将需要一个工作日的假期列表。

1.  计算开始和结束之间的天数
2.  计算开始和结束之间的周末（天数模 7，然后调整最后一周的位置）
3.  计算日期之间列表中的所有假期并减去它。

# android - 在 Native-audio 示例的 android-NDK 构建中导致以下错误

> ID：13138599
> 
> 赞同：-1
> 
> 时间：2012-10-30T12:04:56.893
> 
> 标签：android, android-ndk

NDK构建原生音频导致以下错误，有没有人有任何线索？

```
 jni/native-audio-jni.c:721: error: 'bqPlayerPlay' undeclared (first use in this function)
jni/native-audio-jni.c:722: error: 'bqPlayerBufferQueue' undeclared (first use in this function)
jni/native-audio-jni.c:723: error: 'bqPlayerEffectSend' undeclared (first use in this function)
jni/native-audio-jni.c:724: error: 'bqPlayerMuteSolo' undeclared (first use in this function)
jni/native-audio-jni.c:725: error: 'bqPlayerVolume' undeclared (first use in this function)
jni/native-audio-jni.c:729: error: 'fdPlayerObject' undeclared (first use in this function)
jni/native-audio-jni.c:732: error: 'fdPlayerPlay' undeclared (first use in this function)
jni/native-audio-jni.c:733: error: 'fdPlayerSeek' undeclared (first use in this function)
jni/native-audio-jni.c:734: error: 'fdPlayerMuteSolo' undeclared (first use in this function)
jni/native-audio-jni.c:735: error: 'fdPlayerVolume' undeclared (first use in this function)
jni/native-audio-jni.c:739: error: 'uriPlayerObject' undeclared (first use in this function)
jni/native-audio-jni.c:742: error: 'uriPlayerPlay' undeclared (first use in this function)
jni/native-audio-jni.c:743: error: 'uriPlayerSeek' undeclared (first use in this function)
jni/native-audio-jni.c:744: error: 'uriPlayerMuteSolo' undeclared (first use in this function)
jni/native-audio-jni.c:745: error: 'uriPlayerVolume' undeclared (first use in this function)
jni/native-audio-jni.c:749: error: 'recorderObject' undeclared (first use in this function)
jni/native-audio-jni.c:752: error: 'recorderRecord' undeclared (first use in this function)
jni/native-audio-jni.c:753: error: 'recorderBufferQueue' undeclared (first use in this function)
jni/native-audio-jni.c:757: error: 'outputMixObject' undeclared (first use in this function)
jni/native-audio-jni.c:760: error: 'outputMixEnvironmentalReverb' undeclared (first use in this function)
jni/native-audio-jni.c:764: error: 'engineObject' undeclared (first use in this function)
jni/native-audio-jni.c:767: error: 'engineEngine' undeclared (first use in this function) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:08:50.833

如果您是从命令行构建，请尝试

ndk-build TARGET_PLATFORM=android-9

# c++ - 为什么类 { int i; }; 不完全符合标准？

> ID：13138605
> 
> 赞同：43
> 
> 时间：2012-10-30T12:05:07.910
> 
> 标签：c++, class, definition, identifier, standards-compliance

这是一个后续问题。

在上[一个问题](https://stackoverflow.com/questions/13134845/class-with-no-name/13134925#comment17869000_13134925)中，@JohannesSchaub-litb 说以下代码**不**完全符合标准：

```
class { int i; };  //unnamed-class definition. § 9/1 allows this! 
```

然后他补充说，

> 虽然它在语法上是有效的，但它打破了这样的类必须在其封闭范围内声明至少一个名称的规则。

我真的无法理解这一点。他在说什么名字？

谁能进一步详细说明（最好引用标准）？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-30T12:50:49.347

标准的第 9 条允许`class {public: int i;}`（注意缺少最后的分号），因为未命名类的*decl-specifier-seq*可能用于其他一些构造，例如 typedef 或变量声明。（请注意，现在出现了最后的分号）的问题`class {public: int i;};`是这个类规范现在变成了一个声明。这是标准第 7 条第 3 款的非法声明：

> 在这种情况下，除了未命名位域（9.6）的声明外，*decl-specifier-seq*应在程序中引入一个或多个名称，或应重新声明由先前声明引入的名称。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-30T12:22:42.173

关键是，通过声明`class{ int i; };`您正在组装一堆符号 ( `int i`，在这种情况下)，您将无法在任何代码中的其他任何地方使用。

要使此代码有意义，您至少应该执行以下操作之一：

```
class Myclass { int i; }; //I can furthermore instantiate variables of Myclass
class { int i; } myvar; //This in fact creates a myvar object
typedef class { int i; } MyType; //I can funthermore instantiate variables of MyType 
```

通过说只是`class{ int i; };`你对编译器说：

*   保留一个`int`并命名它`i`，
*   把它包装成一个`class`我永远不会打电话给...
*   忘了它！( `};`)

如果你从你的程序中删除那个声明，什么都不会改变。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-30T12:52:28.500

`class { int i; };`不是一个有效的声明，因为它是一个没有*init-declarator-list的**简单声明*，但它没有引入（或重新声明）类名。

 *ISO/IEC 14882:2011 7 [dcl.dcl] / 3：

> 在*simple-declaration*中，可选的*init-declarator-list*只有在声明类（第 9 条）或枚举（7.2）时才能省略，也就是说，当*decl-specifier-seq*包含*class-specifier*、*explaindtype时-*带有*类键*(9.1) 或*enum-specifier 的说明符*。在这些情况下，只要在*decl-specifier-seq*中存在*类说明符*或*枚举说明*符，这些说明符中的标识符就在声明所声明的名称中（如*class-names*、*enum-names*或*enumerators*****，取决于语法）。**在这种情况下，除了未命名位域（9.6）的声明外，*decl-specifier-seq*应在程序中引入一个或多个名称，或应重新声明由先前声明引入的名称。******

 *** * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-30T12:28:35.963

来自 GCC 的错误消息非常简洁地解释了它：

```
$ cat > a.cc
class { int i; };
$ g++ -Wall -std=c++98 a.cc
a.cc:1: error: abstract declarator ‘&lt;anonymous class>’ used as declaration 
```

`class { int i; }`是一个*抽象声明*符（标准，§8），但不是一个有效的*声明*（§7）。这就是@JohannesSchaub-litb 引用的规则：对于有效的声明，您需要声明一些东西，例如类名或变量名。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-30T12:56:28.627

你打破了`[basic.scope.pdecl]/6`，它说：

> 首先在详细类型说明符中声明的类的声明点如下：
> - 对于形式的声明
> `class-key attribute-specifier-seqopt identifier ;`
> 
> 标识符被声明为包含声明的范围内的类名，否则
> - 对于形式的详细类型说明符
> `class-key identifier`
> 
> 如果在命名空间范围内定义的函数的 decl-specifier-seq 或参数声明子句中使用了详细类型说明符，则标识符在包含该声明的命名空间中声明为类名；否则，除非作为友元声明，否则标识符将在包含该声明的最小命名空间或块范围内声明。[ 注意：这些规则也适用于模板。— end note ] [ 注意：其他形式的详细类型说明符不声明新名称，因此必须引用现有类型名称。见 3.4.4 和 7.1.6.3。——尾注]

1.  您没有创建匿名类型的变量
2.  你没有创建一个类型

标准中的另一个示例（中`[basic.def]/2`）证明您的示例不符合标准：

```
struct S { int a; int b; };       // defines S, S::a, and S::b
struct X {                        // defines X
  int x;                          // defines non-static data member x
  static int y;                   // declares static data member y
  X(): x(0) { }                   // defines a constructor of X
};
int X::y = 1;                     // defines X::y
enum { up, down };                // defines up and down
namespace N { int d; }            // defines N and N::d
namespace N1 = N;                 // defines N1
X anX;                            // defines anX 
```

您的示例未定义任何内容（匿名结构除外，无法访问谁的字段）。

注意枚举的一个例外，因为这种情况引入了两个要使用的值。***

# visual-studio-2010 - 安装项目在发布配置中使用调试 dll

> ID：13138613
> 
> 赞同：3
> 
> 时间：2012-10-30T12:05:30.313
> 
> 标签：visual-studio-2010, setup-project

当 Visual Studio 2010 的解决方案配置设置为“调试”时，我可以构建“调试”部署包。但是当我将其更改为“发布”并构建我的安装项目时，生成的 msi 仍然会打包调试 dll。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T06:17:15.957

你检查![配置管理器](../Images/98053093b2b1550423ee795016e1216d.png)过你的设置项目吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T15:46:29.687

很可能这是一个错误。我在 VS2013 中观察到相同的行为。只需关闭并重新打开解决方案即可更新依赖项。

# c# - SqlDataAdapter 未填充 DataSet

> ID：13138615
> 
> 赞同：2
> 
> 时间：2012-10-30T12:05:31.827
> 
> 标签：c#, sql, sql-server, ado.net

我正在使用 VS2012 和 SQL Server Express 2008。我已经总结了我的连接/查询，试图找出为什么我`DataSet`没有被填满。连接成功完成，没有抛出异常，但是适配器没有填充`DataSet`. 从中提取的数据库位于同一台 PC 上，并且使用`localhost\SQLEXPRESS`不会改变结果。感谢您的任何意见！

```
SqlConnection questionConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString);
questionConnection.Open();
String sql = "SELECT * FROM HRA.dbo.Questions";
SqlDataAdapter adapter = new SqlDataAdapter();
DataSet ds = new DataSet();
SqlCommand command = new SqlCommand(sql, questionConnection);
adapter.SelectCommand = command;
adapter.Fill(ds);
adapter.Dispose();
command.Dispose();
questionConnection.Close(); 
```

连接字符串：

```
<add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=CODING-PC\SQLEXPRESS;Initial Catalog=HRA;User ID=sa; Password= TEST" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T12:09:05.990

试试这个：

```
SqlConnection questionConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString);
questionConnection.Open();
DataSet ds = new DataSet();
String sql = "SELECT * FROM HRA.dbo.Questions";
SqlDataAdapter adapter = new SqlDataAdapter(sql, questionConnection);
adapter.Fill(ds);

adapter.Dispose();
command.Dispose();
questionConnection.Close(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T12:28:41.143

似乎已经找到了答案，但是，无论如何我都会发布一个来提倡使用`using`块，并让 .NET 框架为您完成工作。你的 11 行代码可以改写为 3 行：

```
DataSet ds = new DataSet();
using (var adapter = new SqlDataAdapter("SELECT * FROM HRA.dbo.Questions", ConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString))
{
    adapter.Fill(ds);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:10:18.343

“HRA.dbo.Questions”是一个实际的表吗？

您的连接字符串包含一个值为“HRA”的初始目录，据我所知，SQL 应该只包含 dbo.Questions。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-15T06:10:22.730

检查您是否在代码的另一部分（例如页面加载事件）中没有填充语句。

# php - ZendFramework 2 - 如何使用一个路由器规则使所有操作可用？它唯一允许的动作索引

> ID：13138621
> 
> 赞同：0
> 
> 时间：2012-10-30T12:05:59.183
> 
> 标签：php, zend-framework2, zend-route, zend-router

如何使用一个路由器规则允许该控制器内的所有子操作？例如以下：

```
visit: site/login                - works only
       site/login/forgetpassword - does not work
       site/login/remmeberme     - does not work 
```

例子：

```
$router = $e->getApplication()->getServiceManager()->get('router');
$route = Http\Literal::factory(array(
  'route' => '/login',
  'defaults' => array(
    'controller' => 'Application\Controller\Login',
    'action' => 'index'
  ),
));
$router->addRoute('login', $route, null); 
```

**跟进：**

我怎样才能让它 /login 和 /login/anything 工作？

```
$route = Http\Segment::factory(array(
  'route' => '/login[/:action]',
  'defaults' => array(
    'controller' => 'Application\Controller\Login',
    'action' => 'index'
  ),
));
$router->addRoute('login', $route, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:20:43.633

官方文档中有一个出色的[快速入门教程。](http://framework.zend.com/manual/2.0/en/user-guide/routing-and-controllers.html)如下设置您的路线以允许多个操作和一个 ID 参数。更多信息请查看文档。

您可能还对来自 ZendCon2012的[DASPRiDs 演示感兴趣](http://stuff.dasprids.de/slides/zendcon2012/introducing-the-new-zend-framework-2-router/presentation.html#1)

```
 'router' => array(
    'routes' => array(
        'album' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/album[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
), 
```

# asp.net-mvc-3 - 添加条目后，WebGrid 上的分页停用

> ID：13138622
> 
> 赞同：0
> 
> 时间：2012-10-30T12:06:00.677
> 
> 标签：asp.net-mvc-3, webgrid

我正在使用带有分页功能的 WebGrid 和 AJAX 弹出窗口来添加新条目。我注意到，在添加条目后，WebGrid 底部的分页链接变为非活动状态。

弹出窗口调用控制器的 Save 操作，完成以下操作：

```
return PartialView("_PersonGrid", pModel.Persons); 
```

这里使用了三个视图。一个索引、一个网格和一个弹出窗口。网格嵌入在索引中，可以通过单击网格和索引上的按钮来调用弹出窗口。

索引视图具有以下代码：

```
@using (Ajax.BeginForm(new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "myUserGrid" }))
{

<div id="myUserGrid">
    @Html.Partial("_PersonGrid", Model.Persons)
</div>
<br />

    //other code
} 
```

网格视图 (_PersonGrid.cshtml) 是：

```
@model IEnumerable<CIMsWebApp.Client.Group.Entities.IPerson>

@{  var grid = new WebGrid(Model, canSort: true, canPage: true, defaultSort: "UserName", ajaxUpdateContainerId: "myUserGrid"); }    

@grid.GetHtml(
    tableStyle: "dataGrid", 
    headerStyle: "header",
    alternatingRowStyle: "evenRow",
    columns: grid.Columns
    (
        grid.Column(header: "User Name", columnName: "UserName", format: item => Html.Raw("<a href='#' class='userNames' data-personid='"+item.PersonId+"'>" + item.UserName + "</a>"), canSort: false),
        grid.Column(header: "Role(s)", columnName: "Rolebuilder", canSort: false),
        grid.Column(header: "Active", columnName: "ActiveIndBuilder", canSort: false),
        grid.Column(header: "Action", format:
                                    @<span><input type="button" class="edit-user" id="@item.PersonId" value="EDIT" />
                                    </span>, canSort: false)
    )
) 
```

最后弹出视图是：

```
@model CIMsWebApp.Models.PersonModel
@using (Html.BeginForm("Save", "Person", FormMethod.Post, new { id = "formUser" }))
{
    //code

} 
```

当我第一次到达页面或刷新它时，它们再次变为活动状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:48:25.003

我猜你的 "ajaxUpdateContainerId: "myUserGrid"" 是一个 id="myUserGrid" 的 div，并且部分加载在那里。如果我错了，请纠正我，但我相信 div 应该在你的部分中。有时有点混乱，但你应该试试这个..

看法：

```
@*Everything else except the div*@
@{Html.RenderPartial("_PersonGrid", Model) 
```

部分视图：

```
@model IEnumerable<CIMsWebApp.Client.Group.Entities.IPerson>
<div id="myUserGrid">
    @{  var grid = new WebGrid(Model, canSort: true, canPage: true, defaultSort: "UserName", ajaxUpdateContainerId: "myUserGrid"); }    

    @grid.GetHtml(
        tableStyle: "dataGrid", 
        headerStyle: "header",
        alternatingRowStyle: "evenRow",
        columns: grid.Columns
        (
            grid.Column(header: "User Name", columnName: "UserName", format: item => Html.Raw("<a href='#' class='userNames' data-personid='"+item.PersonId+"'>" + item.UserName + "</a>"), canSort: false),
            grid.Column(header: "Role(s)", columnName: "Rolebuilder", canSort: false),
            grid.Column(header: "Active", columnName: "ActiveIndBuilder", canSort: false),
            grid.Column(header: "Action", format:
                                @<span><input type="button" class="edit-user" id="@item.PersonId" value="EDIT" />
                                </span>, canSort: false)
        )
    )
</div> 
```

如果这不起作用，请提供一些额外的数据（调用部分视图的视图、调用保存操作的位置和方式等...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:32:31.500

在研究了 WebGrid 分页实际上是如何工作的之后，似乎在执行保存之后它会尝试在 Save 方法上调用 GET 方法。因此，我为此目的创建了一个方法，然后将其重定向回 Index 方法。最后两个参数直接传递给查询字符串，然后在分页中使用。

```
[ActionName("Save")]
public ActionResult Pagination(string page, string __, long id = 0)
{
  return RedirectToAction("Index", new {id = id, page=page, __ = __ }); 
} 
```

# php - 在 PHP 中显示数据库中的值字段

> ID：13138624
> 
> 赞同：0
> 
> 时间：2012-10-30T12:06:11.377
> 
> 标签：php, mysql

我对 PHP 和 MySQL 相当陌生，正在尝试编写一个代码，在其中显示列的所有`value`值`attribute_id = 64`。这是我写的，但我似乎无法让它显示：

```
<? 
mysql_connect ("localhost","cpsdev_mage1","**********"); 
mysql_select_db ("cpsdev_mage1"); 

$sql = "select 'value' from mage_catalogsearch_fulltext 
WHERE 'Attribute_id' = 64"; 
$result = mysql_query ($sql) or die($myQuery."<br/><br/>".mysql_error()); 

while($row = mysql_fetch_array($result))
{
  echo $row['value'];
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:09:15.557

尝试这个 ：-

```
 $sql = "select value from mage_catalogsearch_fulltext WHERE Attribute_id = 64"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:09:12.573

作为您的问题的解决方案，请尝试执行以下查询

```
 $sql = "select value from mage_catalogsearch_fulltext 
          WHERE 'Attribute_id' = 64"; 
```

在 sql 查询列中不需要用引号引起来。并且更喜欢使用 php 完整标签而不是短标签，因为在某些服务器中，短标签可能会设置为关闭，这可能会在不同的服务器环境中产生问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:11:22.877

试试这个代码 -

```
<?php
mysql_connect ("localhost","cpsdev_mage1","**********"); 
mysql_select_db ("cpsdev_mage1"); 

$sql = "select value from mage_catalogsearch_fulltext WHERE Attribute_id = 64"; 
$result = mysql_query ($sql) or die($myQuery."<br/><br/>".mysql_error()); 

while($row = mysql_fetch_array($result,MYSQL_ASSOC))
{
  echo $row['value'];
}

?> 
```

我补充的——

1.  改为。`<?`_`<?php`
2.  在查询中将**“value”**更改为**value**并将**“Attribute_id”**更改为**Attribute_id 。**
3.  添加`mysql_fetch_array($result,MYSQL_ASSOC)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:11:45.270

```
<?php // instead of <?

  mysql_connect ("localhost","cpsdev_mage1","**********"); 
  mysql_select_db ("cpsdev_mage1"); 

  $sql = "SELECT value FROM mage_catalogsearch_fulltext 
  WHERE Attribute_id = 64"; // <------------ removed un-needed single quotes
  $result = mysql_query ($sql) or die("<br/><br/>".mysql_error()); // removed '$myQuery'

  while($row = mysql_fetch_array($result))
  {
    echo $row['value'];
  }

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T12:14:33.667

```
$sql = "select value from mage_catalogsearch_fulltext WHERE Attribute_id = 64"; 
```

`<?php`您的代码也应该以not开头`<?`

# c - 带有一个 goto 标签的 C 代码未按预期工作

> ID：13138627
> 
> 赞同：1
> 
> 时间：2012-10-30T12:06:22.600
> 
> 标签：c, function, main, goto

我被要求分解一个 C 程序，它最初只是一个主要方法，有很多注释很好的段。如果发生错误，每个段都使用相同的定义函数字符串“die”。die 函数使用 goto 标签 'out' 来关闭程序。

在将这些段中的每一个都转换为现在都从底部缩小的 main 方法调用的函数之后，每个段的这个 goto out 代码不再起作用。'out' 标签在 main 中，XCode 编译器告诉我 goto 标签尚未定义。

所以我想我在问如何以最有效的方式在每个本地函数中定义我的 out 标签？

以下是一些代码片段，全部按照它们出现的顺序/结构：

模具定义

```
 #define die(msg, ...) do {                      \
(void) fprintf (stderr, msg, ## __VA_ARGS__); \
(void) fprintf (stderr, "\n");                \
goto out;                                     \
} while (0) 
```

使用 die 的函数示例

```
void createContext(void){
        context = clCreateContext (0, 1, &device_id, NULL, NULL, &err);
        if (!context || err != CL_SUCCESS)
            die ("Error: Failed to create a compute context!");
    } 
```

最后是我的 main，最后包含 die 的 out 标签

```
main (int argc, char *argv[])
{

    (Several functions called here)

out:
    /* Shutdown and cleanup.  */
    if (data)
        free (data);

    if (results)
        free (results);

    return rc;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T12:09:04.137

A`goto`不能跨越函数。如果你使用`goto`它，它必须是与`goto`.

要在函数之间进行跳转，请查找[`setjmp`](http://en.cppreference.com/w/c/program/setjmp)和[`longjmp`](http://en.cppreference.com/w/c/program/longjmp)函数。

但是，在您的情况下，由于您只是跳转退出程序，因此您可以`exit`直接调用。所有资源（打开的文件、分配的内存）都将由运行时库和操作系统释放。

# sitecore - Sitecore - ECM 模块如何将新的时事通讯模板分支映射到目标受众模板

> ID：13138628
> 
> 赞同：0
> 
> 时间：2012-10-30T12:06:49.473
> 
> 标签：sitecore, sitecore6, sitecore-dms, sitecore-ecm

我创建了一个新的内容电子邮件管理器 + 目标受众。当我选择“目标受众”项目时，我有 6 个选项来创建新的时事通讯。我想插入一个新的，专门针对我的项目。

我已经复制了分支 Newsletter Message 并更新了内容（链接到根分支的布局/项目......）。现在，我希望它能够根据项目/客户的需求插入/创建新的时事通讯。

链接在哪里？我找不到它了。我已经解析了不同的项目模板，但我没有找到我必须在哪里将目标受众模板与我的新 Branch Newsletter 模板链接。

任何提示/帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T07:25:13.657

尝试将其作为插入选项添加到`/sitecore/templates/Branches/Email Campaign/Target Audience Branch/$name/Drafts`项目中。

您可以借助内容编辑器中的功能区添加插入选项：`Configure tab -> Insert Options -> Assign`。

# java - 无法使用 webdriver 将文件上传到 Box.com

> ID：13138629
> 
> 赞同：1
> 
> 时间：2012-10-30T12:06:51.830
> 
> 标签：java, selenium, upload, webdriver, selenium-webdriver

我无法自动上传到 Box.com

尝试了下面列出的多个选项。他们似乎都没有帮助 -

```
driver.findElement(By.id("upload_file1")).sendKeys("C:\\Automation\\BoxUploadFile.rtf");
driver.findElement(By.id("upload_file1")).click();
driver.findElement(By.xpath("//body/input")).click(); 
```

还有许多其他...

此外，webdriver 没有抛出错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T11:20:55.147

目标是在不使用 AutoIT 的情况下自动上传到 Box.com。

@id=upload_file1 是必须发送文件名的元素。默认情况下，此元素不可见。必须执行一系列操作以启用此元素的可见性

以下是遵循的步骤顺序 -

```
-> Mouse Hover to @id=upload_button
-> Then you click on the arrow (b[@class='arrow'])
-> Mouse Hover on to linkText = Upload Files 
```

现在您可以使用 sendKeys 方法将文件名填充到 @id=upload_file1

瞧！您的文件现已上传！！

# javascript - 背景更改在 javascript 中不起作用。怎么了？

> ID：13138630
> 
> 赞同：0
> 
> 时间：2012-10-30T12:06:52.060
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc-3, jquery-slider

我正在使用 jquery 滑块，我有一个布局和一个中心 div 内容..当我在不同的页面上滑动时，我需要更改布局的颜色。这就是我使用 asp.net mvc3 所做的。

HTML：

```
 <div id="iPhone_Product">
            <div class="slides_containeriphone" >
                @if (Model == null)
                {
                    <div class="animateriphone" id="1" title="iphone">

                        @Html.Partial("`enter code here`_iPhone_Main")

                    </div>
                        <div class="animateriphone" id="2" title="salah">
                        @Html.Partial("Salah")
                    </div>
                        <div class="animateriphone" id="3" title="tasbeeh">
                        @Html.Partial("_Tasbeeh")
                    </div>
                }
                else
                { 
                    foreach (string s in Model)
                    {
                        <div class="animateriphone">
                            @Html.Partial(s);
                        </div>
                    }
                }

            </div>
        </div> 
```

Javascript: function color_change() { var ids = new Array(); ids[0] = '1'; ids[1] = '2'; ids[2] = '3';

```
 for (var item = 0; item < ids.length; item++) {
                var x = document.getElementById(ids[item]);
            }

        if (x.id == '1' && x.title=='iphone') {
            $(".st_tabs_container").css({ "background-color": "#c8c7c7" });

            }
            else
                if (x.id == '2' && x.title == 'salah') {
                    $(".st_tabs_container").css({ "background-color": "yellow" });
                }
                else
                    if (x.id == '3' && x.title == 'tasbeeh') {
                        $(".st_tabs_container").css({ "background-color": "#c8c7c7" });
                    }
                }
      $(document).ready(function () {
    color_change();
    }); 
```

我已经使用这个 javascript 来更改背景，但它不起作用，任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:10:45.630

很确定你没有正确调用ID，试试这个：

```
<div class="animateriphone" id="id2" title="salah">  

var x = document.getElementById('id'+ ids[item]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:11:24.553

我认为问题在于您使用数字作为 ID。尝试以字母开头您的 id 值。我认为你应该考虑为你的 id 加上前缀，即 id1、id2 或类似的东西。

而且您过早地关闭了 for 循环，也将所有 if/else 逻辑嵌套在其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:12:14.093

不是 x 总是 3，因为您在循环内重置 x 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:12:20.017

您正在遍历所有元素而不对它们做任何事情，因此根据您要执行的操作，您可能还需要将 if 语句移到 for 循环中，或者`x`以适当的方式使用在for循环中。

不完全确定你想要完成什么，但我已经把我相信你正在尝试做的事情放在一起：http: [//jsfiddle.net/ZuzTU/1/](http://jsfiddle.net/ZuzTU/1/)

```
function color_change() { 
    var ids = new Array(); ids[0] = '1'; ids[1] = '2'; ids[2] = '3';
    for (var item = 0; item < ids.length; item++) {
        var x = document.getElementById(ids[item]);

        if (x.id == '1' && x.title=='iphone') {
            $("#" + x.id).css({ "background-color": "#c8c7c7" });

        }
        else if (x.id == '2' && x.title == 'salah') {
            $("#" + x.id).css({ "background-color": "yellow" });
        }
        else if (x.id == '3' && x.title == 'tasbeeh') {
            $("#" + x.id).css({ "background-color": "#c8c7c7" });
        }
    }
}        
$(document).ready(function () {
    color_change();
});​ 
```

# android - 使用 XML 指定 ListView（或其他类似组件）的元素

> ID：13138631
> 
> 赞同：1
> 
> 时间：2012-10-30T12:06:52.683
> 
> 标签：android, eclipse, android-layout, listview, android-2.2-froyo

Android 文档暗示我在声明 UI 时应该更喜欢使用 XML：http: [//developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

不管您是否同意它暗示这一点，我个人的偏好*是*尽可能使用 XML。

但是，对于 ListView 文档仅说明了如何以编程方式填充它：http: [//developer.android.com/guide/topics/ui/layout/listview.html](http://developer.android.com/guide/topics/ui/layout/listview.html)

例如，我如何仅使用 XML 布局文件创建一个包含三个元素的 ListView？这是不可能的还是不可取的？

习惯于为桌面开发，我不习惯被要求手动创建 UI 容器的元素，所以我很困惑我是否缺少某些东西或 Android 中的东西不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:20:53.137

ListView 和类似的视图通常会接收来自动态源（如 SQLite 数据库）的数据。在这种情况下，填充它的唯一方法是以编程方式。

但是，如果您有一个静态元素列表，您可以通过 XML 使用以下属性填充它：android:entries。该值将是一个数组资源。

例子：

```
<ListView 
android:layout_width="match_parent"
android:layout_height="match_parent"
android:entries="@array/your_array"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:46:42.240

`ListView`为 中的每个项目`ListAdapter`提供一个的用途。这个项目视图的**模板**可以很好地定义为另一个 XML 布局。就数据而言，您可以将其作为字符串数组等放在文件夹中的 XML 文件中。甚至可以从其他文件中解析。`View``ListView`**`res/values`**

 **完全硬编码的布局将`LinearLayout`放置在`ScrollView`. 然后您可以将许多子元素添加到`LinearLayout`.**

# module - Prestashop - 安装后不出现 PayPal 模块

> ID：13138632
> 
> 赞同：0
> 
> 时间：2012-10-30T12:06:53.520
> 
> 标签：module, paypal, installation, prestashop

使用 Prestashop 的 1.4.9 版本，我正在尝试安装 PayPal 模块；从官方PS模块库下载，安装成功结束；但是当我刷新模块列表时它不会出现......

我尝试使用后端界面安装模块，并将解压缩的插件上传到商店的 /modules/ 文件夹。

没有显示错误，也没有磁盘空间限制。

有人有/有同样的问题？我对PS并不陌生，我从来没有遇到过这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:15:45.347

Prestashop 继续提醒我“**由于内存限制限制，无法加载所有模块，请增加服务器配置的内存限制值**”；在 Prestashop 论坛上搜索，我发现了这个： http: [//www.prestashop.com/forums/topic/185375-solucionado-instalar-paypal/](http://www.prestashop.com/forums/topic/185375-solucionado-instalar-paypal/) 做这个

> Contacta con tu hosting, para que te aumenten el memory limit, puedes intentarlo tu, por ejemlo añadiendo esto:
> 
> ini_set('memory_limit','128M');
> 
> en el fichero /config/config.inc.php。

拯救了我的一天！事实上，Prestashop 并没有加载所有模块，安装后我也没有看到 PayPal，而现在有 :)

# javascript - Ember JS 和模板“找不到模板”

> ID：13138638
> 
> 赞同：1
> 
> 时间：2012-10-30T12:07:04.643
> 
> 标签：javascript, ember.js, templating

所以我有这些脚本包括：

```
 <script src="js/vendor/modernizr-2.6.2.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
    <script src="js/vendor/ember-1.0.0-pre.2.min.js"></script>
    <script src="js/vendor/handlebars-1.0.rc.1.js"></script>
    <script src="http://yui.yahooapis.com/3.7.3/build/yui/yui-min.js"></script>
    <script src="js/main.js"></script> 
```

这在我的头标签中：

```
 <script type="text/x-handlebars" data-template-name="application">
            WTF

        </script> 
```

这在我的 main.js 中：

```
window.Stocks = Ember.Application.create();

Stocks.Router = Em.Router.extend({
    initialState: 'root.home',
    root: Em.Route.extend({
        home: Em.Route.extend({
            view: Stocks.CurrentStocksView
        })
    })
});

Stocks.CurrentStocksView = Ember.View.extend({
    templateName: 'application',
    appendTo: function() {
        this._super('#current');
    }
});

// Startup call
Stocks.initialize(); 
```

我完全迷失了方向。我只想在 . 我是否需要包含脚本标签 voor 车把？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:39:51.860

首先，您似乎使用`ember 1.0.0-pre2`. `Stocks.initialize()`因此，除非您将`autoinit` `Ember.Application`属性设置为 false ，否则您不必指定：

```
Stocks = Ember.Application.create({
  autoinit: false
});

// omitted code

Stocks.initialize(); // needed because the app is not automatically initialized 
```

接下来，您应该`Handlebars`在加载 ember 之前包含：

```
<script src="js/vendor/handlebars-1.0.rc.1.js"></script>
<script src="js/vendor/ember-1.0.0-pre.2.min.js"></script> 
```

[正如您在此 JSFiddle](http://jsfiddle.net/BWUCA/)中所见，它应该可以工作。

# java - 如何在java中强制转义字符

> ID：13138642
> 
> 赞同：1
> 
> 时间：2012-10-30T12:07:10.940
> 
> 标签：java, string, escaping

我有一个带有转义字符的字符串，当打印字符串时，它会产生另一个带有有效转义字符的字符串。我如何检索打印第一个字符串时看起来像的那个字符串？

这是代码 - 初始字符串如下所示：

```
String string = "{\"agent\":\"{\\\"name\\\":\\\"James Bond\\\"}\"}";
System.out.println("str: "+string); 
```

执行代码会产生

```
str: {"agent":"{\"name\":\"James Bond\"}"} 
```

我要得到输出中出现的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:12:45.787

您可以使用来自[Apache Commons Lang](http://commons.apache.org/lang/)`String unescapeJava(String)`的方法。`StringEscapeUtils`

例子：

```
String in = "a\\tb\\n\\\"c\\\"";

System.out.println(in);
//This prints
// a\tb\n\"c\"

String out = StringEscapeUtils.unescapeJava(in);

System.out.println(out);
//This prints
// a    b
// "c" 
```

您可以查看有关[如何在 Java 中取消转义 Java 字符串文字的更多信息？](https://stackoverflow.com/questions/3537706/howto-unescape-a-java-string-literal-in-java)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T12:16:08.880

我想你在找那个

```
String a="\"agent\":\"{\\\"name\\\":\\\"James Bond\\\"}q\"";

a=a.replace("\\", "\\\\");
a=a.replace("\"","\\\""); 
```

# javascript - 从inkscape缩放导入的svg

> ID：13138644
> 
> 赞同：0
> 
> 时间：2012-10-30T12:07:15.297
> 
> 标签：javascript, svg, raphael

我已经导入了一个使用 inkscape 创建的 SVG 文件。

我使用[http://github.com/wout/raphael-svg-import](http://github.com/wout/raphael-svg-import)。

有些元素没有出现在好的地方。似乎我在我的 svg 中复制/粘贴的所有元素（有一个变换矩阵是问题）

当我尝试使用 .attr('transform', 's0.5') 缩放集合时，它变得更加令人沮丧

-> 所有子元素都会缩放，但位置更差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:50:38.403

我无法谈论导入本身产生的任何问题，但我可以指出您应用的缩放变换是相对的——因此它将相对于该元素的预变换位置缩放每个元素。在这种情况下，您希望对坐标原点使用绝对变换：

```
set.attr( 'transform', 'S0.5,0.5,0,0' ); 
```

# vb.net - 当应用程序最小化时，vb.net sendKeys 到我的应用程序

> ID：13138653
> 
> 赞同：0
> 
> 时间：2012-10-30T12:07:39.453
> 
> 标签：vb.net, winforms, pinvoke, sendmessage, sendkeys

我想在我的表单最小化**且不**在焦点 时将密钥发送到我的

```
SendKeys.Send("{TAB}") 
```

有效，但**仅当**我的表单处于**焦点**时。
这很不方便，如果用户想最小化应用程序然后应用程序将密钥发送到**任何地方**，我希望应用程序**只**将密钥发送到我的应用程序。

所以我需要一个看起来像这样的函数：

```
Dim wb As New WebBrowser
wb.Navigate(urll)
WaitToWb()
'Send Keys To WebBrowser
SendKeysToBrowser(Me.Handle, wb, "{TAB}") 
```

我需要该功能仅将密钥发送到我的网络浏览器，如果我的应用程序被最小化，则密钥**仅**发送到网络浏览器控件。

当我的应用程序最小化时，有一个功能可以只向我的应用程序发送密钥？

# string - AS3 > 用 \" 替换双引号字符

> ID：13138658
> 
> 赞同：0
> 
> 时间：2012-10-30T12:08:08.210
> 
> 标签：string, actionscript-3

如何在字符串中用 \" 替换标准引号 (')？

这显然是行不通的：

```
s = s.split("'").join (" \" "); 
```

这给了我一个错误（当然）：

```
s = s.split("'").join (" \\" "); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:18:52.780

好的，抱歉，我刚刚打电话给我的一个朋友并谈到了这件事。

如果有人需要，这里有解决方案

```
s = s.split("'").join ("\\\""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:16:37.537

您是否尝试过使用 String.replace() 的任何解决方案？我无法让它完全按照您的指定进行，但这可能是一个很好的起点。全局标签使其替换所有实例而不仅仅是第一个。

```
var myPattern:RegExp = /'/g; // The 'g' tags the pattern as global  
var str:String = "Test'String";
trace(str.replace(myPattern, "\""));  
// Will output: Test"String 
```

取自[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#replace](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/String.html#replace) ()

扩展：

```
var myPattern:RegExp = /'/g;
var myPattern2:RegExp = /\"/;
var str:String = "Test'String";
trace(str.replace(myPattern, myPattern2));  
// Will output: Test/\"/String 
```

这会给您留下一个字符串，您只需删除“/”字符即可获得所需的结果。不过，您的解决方案要简单得多，这只是一种选择。

# jenkins - 詹金斯失败：主机密钥验证失败

> ID：13138662
> 
> 赞同：2
> 
> 时间：2012-10-30T12:08:21.503
> 
> 标签：jenkins, bitbucket, ssh-keys

我在我的 Macbook Pro（操作系统：Mountain Lion）上下载并安装了 Jenkins for Mac OSX。我现在想将其设置为从 bitbucket 下拉项目并进行自动构建。

我创建了 ssh 密钥，将其添加到 bitbucket 并尝试设置构建作业。但是，我收到错误：

无法连接到存储库：命令“git ls-remote -h HEAD”返回状态码 128：stdout：stderr：主机密钥验证失败。致命：远端意外挂断

我试图从 known_hosts 中删除导致问题的域，但仍然收到此错误。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:23:05.983

# c# - Log4Net 在 MSTest 下不工作

> ID：13138666
> 
> 赞同：1
> 
> 时间：2012-10-30T12:08:42.703
> 
> 标签：c#, visual-studio-2010, log4net, mstest, nuget

我正在使用 NuGet 管理 C# 项目的构建以获取 Common.Logging.Log4Net。从 Visual Studio 2010 运行时，单元测试全部通过，没有错误，但是当我使用 MSTest 从命令行运行时（因此当 TeamCity 执行相同操作时），当单元测试组织一个执行此操作的类时，我会失败：

```
private static readonly ILog Log = LogManager.GetCurrentClassLogger(); 
```

错误是：

> 测试方法 MyProject.Tests.Unit.BusinessDateBuilderTest.CreateElementalTest 抛出异常：System.TypeInitializationException：“MyProject.Common.Library”的类型初始化程序抛出异常。---> System.TypeInitializationException：'MyProject.Common.Initialization.Impl.InitializationLoaderImpl' 的类型初始化程序引发了异常。---> Common.Logging.ConfigurationException：无法从配置部分“common/logging”获取 Common.Logging 的配置。---> System.Configuration.ConfigurationErrorsException：为 common/logging 创建配置节处理程序时出错：无法创建类型“Common.Logging.Log4Net.Log4NetLoggerFactoryAdapter，Common.Logging.Log4net”（C:\Subversion\Project\ MyProject.Tests。Unit\bin\Debug\TestResults\rac_DWM300619 2012-10-30 11_58_34\Out\MyProject.Tests.Unit.dll.config 第 168 行) ---> Common.Logging.ConfigurationException: 无法创建类型 'Common.Logging.Log4Net .Log4NetLoggerFactoryAdapter，Common.Logging.Log4net' ---> System.IO.FileNotFoundException：无法加载文件或程序集“Common.Logging.Log4net”或其依赖项之一。该系统找不到指定的文件。

我正在使用以下 NuGet 依赖项：

Common.Logging.2.1.1（DLL 版本为 2.1.1.0） Common.Logging.Log4Net.2.0.1（DLL 版本为 2.0.0.0） log4net.1.2.10（DLL 版本为 1.2.10）

我注意到 Common.Logging.Log4net.dll 没有复制到 testresults 输出文件夹 - 这是问题吗？如果是这样，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T12:50:46.623

MSTest 有时会将程序集复制到新文件夹并从那里运行测试。问题是某些版本（所有版本？）对要复制的程序集使用某种静态分析。而且由于来自公共日志记录的 log4net 连接是非常动态的（使用公共日志记录的目的），因此永远不会复制程序集，因此会出现错误。
如果你想解决这个问题，你需要为 MSTest 创建一个 testsettings 文件（从 Visual Studio 内部）。然后将 deploymentItems （您缺少的程序集）添加到它。然后你需要将你的命令行指向它。在 teamcity 中，您在配置 MsTest 运行器时在“MSTest 运行配置文件”中执行此操作。

# java - JTable - 将多维数组加载到表中

> ID：13138669
> 
> 赞同：0
> 
> 时间：2012-10-30T12:09:01.233
> 
> 标签：java, swing, jtable

我一直试图将我的数组加载到一个 JTable 对象中，但没有成功。所以这是我的数组：

```
int[][] board = {
    {0, 0, 0, 0, 2, 0, 0, 0, 0},
    {0, 0, 5, 0, 0, 0, 0, 2, 4},      
    {1, 0, 0, 4, 0, 0, 0, 3, 8},
    {0, 0, 0, 6, 0, 0, 0, 0, 7},
    {0, 0, 4, 5, 3, 8, 9, 0, 0},
    {8, 0, 0, 0, 0, 7, 0, 0, 0},
    {7, 4, 0, 0, 0, 6, 0, 0, 1},
    {6, 1, 0, 0, 0, 0, 3, 0, 0},
    {0, 0, 0, 0, 9, 0, 0, 0, 0} 
```

我去了[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html) 并且没有用于放置 int 数组的构造函数，但有用于主题。

谁知道方法，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:11:30.043

你可以这样做：

```
Integer[][] board = new Integer[][]{
        {0, 0, 0, 0, 2, 0, 0, 0, 0},
        {0, 0, 5, 0, 0, 0, 0, 2, 4},      
        {1, 0, 0, 4, 0, 0, 0, 3, 8},
        {0, 0, 0, 6, 0, 0, 0, 0, 7},
        {0, 0, 4, 5, 3, 8, 9, 0, 0},
        {8, 0, 0, 0, 0, 7, 0, 0, 0},
        {7, 4, 0, 0, 0, 6, 0, 0, 1},
        {6, 1, 0, 0, 0, 0, 3, 0, 0},
        {0, 0, 0, 0, 9, 0, 0, 0, 0}};

new JTable(board, new String[]{"columnName1"...}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:14:04.660

我在这里看到了两种可能性： zou 可以使用`Integer[][]`而不是`int[][]`可以转换为`Object[][]`，这将与 JTable 一起使用，或者您可以编写自己的数据模型。

根据您最终想要实现的目标，您应该选择更合适的一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:14:19.293

只需尝试将`int`数组更改为`Integer`数组

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T12:16:50.457

请试试这个

```
import javax.swing.*;
import java.awt.*;
public class JTableComponent{
  public static void main(String[] args) 
{
  new JTableComponent();
  }

  public JTableComponent(){
  JFrame frame = new JFrame("Creating JTable Component Example!");
  JPanel panel = new JPanel();
  Integer[][] board = {
            {0, 0, 0, 0, 2, 0, 0, 0, 0},
            {0, 0, 5, 0, 0, 0, 0, 2, 4},      
            {1, 0, 0, 4, 0, 0, 0, 3, 8},
            {0, 0, 0, 6, 0, 0, 0, 0, 7},
            {0, 0, 4, 5, 3, 8, 9, 0, 0},
            {8, 0, 0, 0, 0, 7, 0, 0, 0},
            {7, 4, 0, 0, 0, 6, 0, 0, 1},
            {6, 1, 0, 0, 0, 0, 3, 0, 0},
            {0, 0, 0, 0, 9, 0, 0, 0, 0}};

   String col[] = {"1","2","3","4","5","6","7","8","9"};
  JTable table = new JTable(board,col);
  panel.add(table,BorderLayout.CENTER);

frame.add(panel);
  frame.setSize(800,500);
  frame.setVisible(true);
  frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  } 
```

# php - Blueimp Jquery 文件上传 S3 和调整大小

> ID：13138671
> 
> 赞同：4
> 
> 时间：2012-10-30T12:09:04.180
> 
> 标签：php, jquery, amazon-s3, imagick, blueimp

我正在使用[Blueimp/jQuery-File-Uploader](https://github.com/blueimp/jQuery-File-Upload)和可用的 Amazon S3 插件，一切正常，但是我需要将图像的大小调整为最短边不超过 640 像素。

我目前的代码是

```
 global $s3;
    if (isset($_REQUEST['_method']) && $_REQUEST['_method'] === 'DELETE') {
        return "";
    }
    $upload = isset($_FILES['files']) ? $_FILES['files'] : null;
    $info = array();
    if ($upload && is_array($upload['tmp_name'])) {
        foreach($upload['tmp_name'] as $index => $value) {
            $fileTempName = $upload['tmp_name'][$index];

            $file_name = (isset($_SERVER['HTTP_X_FILE_NAME']) ? $_SERVER['HTTP_X_FILE_NAME'] : $upload['name'][$index]);
            $extension=end(explode(".", $file_name));
            $rand = rand(1,100000000);
            $sha1 = sha1($rand);
            $md5 = md5($sha1);
            $filename = substr($md5, 0, 8);
            $fileName=$filename.".".$extension;    

            $fileName = $prefix.str_replace(" ", "_", $fileName);
            $response = $s3->create_object($bucket, $fileName, array('fileUpload' => $fileTempName, 'acl' => AmazonS3::ACL_PUBLIC, 'meta' => array('keywords' => 'example, test'),));
            if ($response->isOK()) {
                $info[] = getFileInfo($bucket, $fileName);
            } else {
                //     echo "<strong>Something went wrong while uploading your file... sorry.</strong>";

            }
        } 
```

而且我已经编写了这段 PHP，但是我不确定如何让两者一起工作。

```
$image = new Imagick('test2.jpg');
$imageprops = $image->getImageGeometry();

$w=$imageprops['width'];
$h=$imageprops['height'];
$edge = min($w,$h);
$ratio = $edge / 640;

$tWidth = ceil($w / $ratio);
$tHeight = ceil($h / $ratio);

if ($imageprops['width'] <= 640 && $imageprops['height'] <= 640) {
    // don't upscale
} else {
    $image->resizeImage($tWidth,$tHeight,imagick::FILTER_LANCZOS, 0.9, true);
}
$image->writeImage("test2-resized.jpg"); 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T10:14:23.877

这是基于假设 OP 消息中的所有代码都是正确的，并且只是根据要求重新安排了它。

**更新**：四个赞成票（到目前为止）似乎表明 OP 不仅在代码方面是正确的，而且在问题的严重性方面也是正确的。我理所当然地做 OSS，所以无论如何，如果这对您有任何兴趣，请明确告诉我，以便我们可以在 github 上对此进行改进（任何操作都可以 - 支持问题，支持答案，发布评论，或其任何组合）。

```
 function resize($imgName, $srcName)
{
    $image = new Imagick($imgName);
    $imageprops = $image->getImageGeometry();

    $w=$imageprops['width'];
    $h=$imageprops['height'];
    $edge = min($w,$h);
    $ratio = $edge / 640;

    $tWidth = ceil($w / $ratio);
    $tHeight = ceil($h / $ratio);

    if ($imageprops['width'] <= 640 && $imageprops['height'] <= 640) {
        return $imgName;
    } else {
        $image->resizeImage($tWidth,$tHeight,imagick::FILTER_LANCZOS, 0.9, true);
    }
    $extension=end(explode(".", $srcName));
    // Change "/tmp" if you're running this on Windows
    $tmpName=tempnam("/tmp", "resizer_").".".$extension;
    $image->writeImage($tmpName);
    return $tmpName
}

global $s3;
if (isset($_REQUEST['_method']) && $_REQUEST['_method'] === 'DELETE') {
    return "";
}
$upload = isset($_FILES['files']) ? $_FILES['files'] : null;
$info = array();
if ($upload && is_array($upload['tmp_name'])) {
    foreach($upload['tmp_name'] as $index => $value) {
        $file_name = (isset($_SERVER['HTTP_X_FILE_NAME']) ? $_SERVER['HTTP_X_FILE_NAME'] : $upload['name'][$index]);
        $fileTempName = resize($upload['tmp_name'][$index], $file_name);
        $extension=end(explode(".", $file_name));
        $rand = rand(1,100000000);
        $sha1 = sha1($rand);
        $md5 = md5($sha1);
        $filename = substr($md5, 0, 8);
        $fileName=$filename.".".$extension;    

        $fileName = $prefix.str_replace(" ", "_", $fileName);
        $response = $s3->create_object($bucket, $fileName, array('fileUpload' => $fileTempName, 'acl' => AmazonS3::ACL_PUBLIC, 'meta' => array('keywords' => 'example, test'),));
        if ($response->isOK()) {
            $info[] = getFileInfo($bucket, $fileName);
        } else {
            //     `echo "<strong>Something went wrong while uploading your file... sorry.</strong>";`

        }
        unlink($fileTempName);
} 
```

# matlab - 标准化元胞数组的长度

> ID：13138674
> 
> 赞同：0
> 
> 时间：2012-10-30T12:09:10.957
> 
> 标签：matlab, cell-array

我有一个长度为 3 的单元格数组，我想`for`用另一个长度为 的单元格数组创建一个循环`6`，那么如何为第一个数组添加额外的 3 个单元格以使 2 个单元格数组相等并使用我的`for`循环MATLAB？

例如，有 2 个输入：

```
type = { '12' '62' '5' };
colour = {'re' 'green' 'yellow' 'brown' 'blue' 'black'};

for i = 1:length(colour)
    if isequal(colour(i), type(:))
        result(i) = type(i);
    else
    end
end 
```

我需要使`type`单元格数组与`colour`单元格数组大小相同（我想我必须在`type`单元格数组中添加额外的 3 个空单元格）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T14:06:49.750

我必须首先解决您的代码中的几个问题：

1.  如果使用元胞数组，则必须使用花括号 ( `{}`) 从中提取元素。`colour(i)`你应该写作而不是写作`colour{i}`。

2.  这不是问题，而是良好实践的问题。如果你不需要处理语句的`else`一部分`if`，就不要写它。

3.  预先分配内存，这样数组就不会在循环内增长（它会减慢程序的速度）。具体来说， 在循环`result = cell(size(colour));`之前添加该行。`for`

4.  你的[`isequal`](http://www.mathworks.com/help/matlab/ref/isequal.html)逻辑有缺陷。实际上，它总是会返回`false`，因为它`colour{1}`是一个元素并且`type{:}`是多个元素。

5.  根据您的示例，`types`包含数字和`colours`字母，尽管它们都是字符串。将两者进行比较有意义吗？

现在，关于您的问题，由您决定`for`循环的运行方式。由于您没有提及您想要实现的目标（您宁愿询问您希望如何实现某事而不说具体是什么），如果有必要的话，我无法说出您的`for`循环应该是什么样子。也许你的意思是使用[`ismember`](http://www.mathworks.com/help/matlab/ref/ismember.html)而不是`isequal`？如果是这样，固定代码可能如下所示：

```
result = cell(size(colour));
for i = 1:length(colour)
    if ismember(colour{i}, type)
        result{i} = type{i};
    end
end 
```

或更短，像这样：

```
result = cell(size(colour));
[found, idx] = ismember(colour, type);
result(found) = type{idx(found)} 
```

如果您提供更多详细信息，也许我可以完善我的答案，以便对您有更多帮助。

# php - 关于 PHP SimpleXML 和 xpath 的一些初学者问题

> ID：13138681
> 
> 赞同：0
> 
> 时间：2012-10-30T12:10:10.093
> 
> 标签：php, xpath, simplexml

我正在学习 PHP SimpleXML，我有一些问题。我一直在玩从我工作的 Intranet 中的 web 获取代码。我尽可能需要通用代码，因为代码可能随时更改。在我的示例中，我选择了一个 div 标签及其所有子标签。

> ```
> ...
>   <div class="cabTabs">
>       <ul>
>           <li><a href="/link1">Info1</a></li>
>           <li><a href="/link2">Info2</a></li>
>           <li><a href="/link3">Info3</a></li>
>       </ul>
>   </div>
> ...
> 
> //Get all web content:
> $b = new sfWebBrowser(); //using symfony 1.4.17 sfWebBrower to get a SimpleXML object.
> $b->get('http://intranetwebexample'); //returns a sfWebBrower object.
> $xml = $b->getResponseXML(); //returns a SimpleXMLElement
> 
> //[Eclipse xdebug Watch - $xml]
> "$xml"    SimpleXMLElement     
>   @attributes Array [3]   
>   head    SimpleXMLElement    
>   body    SimpleXMLElement
> 
> //Get the div class="cabTabs".
> $result = $xml->xpath('//descendant::div[@class="cabTabs"]'); 
> 
> //[Eclipse xdebug Watch - $result]
> "$result" Array [1]   
>   0   SimpleXMLElement    
>       @attributes Array [1]   
>           class   cabTabs 
>       ul  SimpleXMLElement    
>           li  Array [6] 
> ```

问题：

1.  使用 descendant:: 前缀：
    我在其他 stackoverflow 主题中读到不推荐使用 descendant:: 前缀。为了选择标签及其所有内容，正确的方法应该是什么？我使用上面的代码，但不知道它是否正确。

2.  检查 Eclipse xdebug 变量 Watch 的一些问题：

2.1 有时我不能将 SimpleXML 树扩展不止一层。在上面的示例中，我无法访问/查看下面的“li”节点，也无法查看其子节点。
可能是 xdebug 调试器与 SimpleXML 对象的限制，还是 Eclipse Watch 的限制？
当我使用通常的循环访问其父节点时，我可以完美地展开/查看“li”节点：foreach($ul->li as $li)。
然而它不是一个严重的错误，我认为直接看到它并在适当的论坛上报告它是完美的。

2.2 我完全看不懂$xml->xpath的结果代码：
如果我们看一下Eclipse Watch，“div”标签已经转换为0索引键，但是“ul”和“li”标签有它们原来的名字，为什么？

2.3 如何使用通用代码访问/循环 xpath 内容：
我使用以下非通用代码来访问它：

> ```
> foreach ($result as $record) {        
>     foreach($record->ul as $ul) { 
>         foreach($ul->li as $li) {
>             foreach($li->a as $a) {
>                 echo ' ' . $a->name;
>             }
>         }
>     }
> } 
> ```

上面的代码有效，但前提是我们编写了正确的标签名称。(->ul, ->li, ->a..)
遍历所有内容而不必每次都指定子名称的通用方法是什么？(->ul, ->li, ->a..)
此外，我宁愿不必将其转换为数组，除非它是正确的方法。
我一直在尝试使用 children() 属性，但它不起作用，它在该行停止并崩溃： foreach ($result->children() as $ul)

非常感谢您花时间阅读我的问题。非常欢迎任何帮助:)

*系统信息：
symfony 1.4.17 和 sfWebBrowserPlugin、cURL dadapter。
启用了 cURL 支持的 PHP 5.4.0，cURL 信息 7.24.0*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:32:09.697

1.  我不知道我自己没用过

2.  不知道我通常使用 Zend Debug - 但我还是不明白你的问题......我想你漏掉了一些话:-)

2.1 可能是 xdebug/eclipse。Id 检查首选项可能有一个设置来限制递归量以帮助管理内存。

2.2`SimpleXML::xpath`总是返回一个匹配的节点数组。这就是为什么你有整数索引数组作为你的结果。因此，如果您这样做，您将获得所有标签`//someelement`的数组。`someelement`然后，您可以以正常方式访问它们的后代，例如`$someelement->itschildelement`.

2.3`$result->children()`是从一般意义上理解事物的好方法。如果 Xdebug 崩溃，那就是 xdebug。要么关闭它，忽略它，要么找到一个不同的调试器:-) Xdebug 只是一个工具，但不应该决定你如何实现事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:04:23.130

我想现在我完全理解问题 2.2 和 2.3。

正如您所解释的，由于它的 xpath 返回一个 Array[1]，而不是 SimpleXML 对象，因此我永远不能使用 $result->children()，因为 php 数组没有 children() 属性呵呵。（我有点白痴哈哈）。

正如您所解释的，解决方案很简单，计算数组元素的数量，循环进入元素，然后使用 children 属性再次循环，如果它是 SimpleXML 对象。我将在下面添加正确的代码。

我还将向他们的论坛提交 Eclipse Watch 或 xdebug 的第 1 点问题，以猜测真正的问题是什么。

谢谢prodigitalson，非常有用的答案:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:48:31.210

工作就像一个魅力呵呵。

在这里，我添加了一个完整的函数，它在节点的所有属性中递归搜索子节点，并返回找到它的完整字符串。

在我的情况下，它非常适合搜索一些值，如 href=，以及其他动态生成的标签值。还显示了我们上面讨论的内容的实现。可能它可以改进并且可以添加更安全的检查。

> ```
> /* public function bSimpleXMLfindfullstringwithsubstring($node, $sSearchforsubstring, &$sFullstringfound, &$bfoundsubstring)
>  * Recursive function to search for the first substring in a list of SimpleXML objects, looking in all its children, in all their attributes.
>  * Returns true if the substring has been found.
>  * Parameter return:
>  *   $sFullstringfound: returns the full string where the substring has been found.
>  *   $bfoundsubstring: returns true if the substring has been found.
> */
> 
> public function bSimpleXMLfindfullstringwithsubstring($node, $sSearchforsubstring, &$sFullstringfound, &$bfoundsubstring=false)
> {
>   $bRet = false; 
>   if ((isset($node) && ($bfoundsubstring == false)))
>   {
>       //If the node has attributes
>       if ($node->attributes()->count() > 0)
>       {
>           //Search the string in all the elements of the current SimpleXML object.
>           foreach ($node->attributes() AS $name => $attribute)  //[$name = class , (string)$attribute = cabTabs, $attribute = SimpleXML object]
>           {
>               //(Take care of charset if necessary).
>               if (stripos((string)$attribute, $sSearchforsubstring) !== false)
>               {
>                   //substring found in one of the attributes.
>                   $sFullstringfound = (string)$attribute;
>                   $bfoundsubstring = true;
>                   $bRet = true;
>                   break;
>               }
>           }
>       }
> 
>       //If the node has childrens (subnodes)
>       if (($node->count() > 0) && ($bfoundsubstring == false))
>       {
>           foreach ($node->children() as $nodechildren)
>           {
>               if ($bfoundsubstring == false)
>               {
>                   //Search in the next children.
>                   self::bSimpleXMLfindfullstringwithsubstring($nodechildren, $sSearchforsubstring, $sFullstringfound, $bfoundsubstring);
>               }
>               else
>               {
>                   break;
>               }
>           }
>       }
>   }
>   return $bRet;
> } 
> ```

如何称呼它：

> ```
> $b = new sfWebBrowser();
> $b->get('http://www.example.com/example.html');
> $xml = $b->getResponseXMLfixed();     
> $result = $xml->xpath('//descendant::div[@class="cabTabs"]'); //example
> 
> $sFullString = "";
> $bfoundsubstring = false;
> foreach ($result as $record)
> {
>   self::bSimpleXMLfindfullstringwithsubstring($record, "/substring/tosearch", $sFullString, $bfoundsubstring);
> } 
> ```

# python - django交叉表模型结构

> ID：13138685
> 
> 赞同：6
> 
> 时间：2012-10-30T12:10:19.533
> 
> 标签：python, django, django-models, django-orm

我有一个*系统*模型和一个*接口*模型。接口是两个系统之间的组合。以前，此界面表示为 Excel 工作表（交叉表）。现在我想将它存储在数据库中。

我尝试创建一个接口模型，其中有两个外键 System. 这不起作用，因为：

*   它在目标模型上创建了两种不同的反向关系
*   它不能避免重复（第一个和第二个 rel 交换）

我使用了这段代码：

```
class SystemInterface(Interface):
    assigned_to = models.ManyToManyField(User)
    first_system = models.ForeignKey(System)
    second_system = models.ForeignKey(System) 
```

难道没有更好的方法来做到这一点吗？

我需要有对称的关系：系统是接口中的“第一”或“第二”不重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T14:45:49.133

我认为代表这些模型的最简单的方法是这样的：

```
class System(models.Model):
    pass

class Interface(models.Model):
    assigned_to = models.ManyToManyField(to=User)
    system = models.ForeignKey(System)

    @property
    def systems(self):
        Interface.objects.get(system=self.system).interfacedsystem_set.all()         

class InterfacedSystem(models.Model):
    interface = models.ForeignKey(Interface)
    system = models.ForeignKey(System) 
```

接口系统的添加/删除显然留给读者作为练习，放置应该相当容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:14:32.550

[您可以使用带有额外字段](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)的多对多关系，但它不能是[对称](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)的。

用于多对多关系的表在 2 个模型之间的每个关系中包含一行。用于从 System 到 self 的多对多关系的表，在两个 System 之间的每个关系都有一行。这与您的模型适合用于 [ManyToManyField.through](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)的模型的结构这一事实是一致的。

使用中间模型允许将诸如assigned_to 之类的字段添加到多对多表中。

这可能很难理解，但它应该防止创建 SystemInterface(left_system=system_ **a** , right_system=system_ **b** )。请注意，我将“first”更改为“left”，将“second”更改为“right”，以表示具有“左侧”和“右侧”的多对多关系行/实例。

因为它们不可能是对称的，所以这不会解决拥有一个 SystemInterface(left_system=system_ **a** , right_system=system_ **b** ) 和一个具有 SystemInterface(left_system=system_ **b** , right_system=system_ **a** ) 的问题。您应该防止在 SystemInterface 的[clean() 方法](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#django.db.models.Model.clean)中发生这种情况 - 或任何用于表示具有 ManyToManyField.through 模型的多对多表的模型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T16:02:17.133

由于 django 不支持具有额外数​​据的对称多对多关系，因此您可能需要自己执行此操作。

如果您在系统中有一个方便的不可变值（例如系统 id），您可以创建一个可预测的算法，以便将哪个系统存储在表的哪个条目中。如果在您创建接口对象时系统始终是持久的，则可以使用主键。

然后，编写一个函数来创建接口。例如：

```
class System(models.Model):
def addInterface(self, other_system, user):
    system_interface = SystemInterface()
    system_interface.assigned_to = user
    if other_system.id < self.id:
        system_interface.first_system = other_system
        system_interface.second_system = self
    else:
        system_interface.first_system = self
        system_interface.second_system = other_system
    system_interface.save()
    return system_interface 
```

使用这种设计，您可以对 SystemInterface 对象进行通常的验证、重复检测等。要点是您在代码中而不是在数据模型中强制执行约束。

这有意义吗？

# javascript - 允许 HTML 文本框中的空格

> ID：13138686
> 
> 赞同：1
> 
> 时间：2012-10-30T12:10:30.560
> 
> 标签：javascript, html, blogger

这是我现在在我的博客文章中拥有的 Javascript 和 HTML 代码。

```
<div dir="ltr" style="text-align: left;" trbidi="on">
<br />
<script language="javascript" type="text/javascript">
function convertinput() {
    document.getElementById('output').value = "@@[0:[0:1: " + document.getElementById('first').value + "]]";
   document.getElementById('output').style.display = 'block';
}
</script> 
```

```
<input id="first" maxLength=75 style="WIDTH: 300px;></input>
<br>
<input id="output" style="display:none;"></input>
<br>
<input type='button' onclick='convertinput()' value='convert'>
</div> 
```

我无法在输入文本框中插入空格。
什么原因 ？解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:15:33.933

你错过了一个`"`关闭`style="WIDTH: 300px;>`

另一件事是`</input>`不是关闭标签。它必须以这种方式关闭：

```
<input type="text" /> 
```

# ruby-on-rails-3 - rails before_destroy 部分删除

> ID：13138693
> 
> 赞同：1
> 
> 时间：2012-10-30T12:10:57.820
> 
> 标签：ruby-on-rails-3, model

我试图找出一种方法来部分删除/销毁rails中的依赖模型。

代码看起来像这样：

```
class User < ActiveRecord::Base

  has_many :subscriptions
  has_many :photos, :dependent => :destroy
  has_many :badges, :dependent => :destroy

  before_destroy :partial_destroy

  def partial_destroy
    self.photos.destroy_all
    self.badges.destroy_all
    return false if self.subscriptions.any? 
  end
... 
```

本质上，我想销毁照片和徽章，但如果用户有任何订阅，我想保留这些，同时也防止用户被销毁。

我尝试`.each { |obj| obj.destroy }`使用`delete`and `delete_all`，但这似乎无关紧要。

`before_destroy`每当返回 false时，似乎 Rails 正在执行某种回滚。有没有办法摧毁部分家属而不是其他人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-29T17:04:35.677

这是旧的，所以我希望您已经忘记了它，但是我偶然发现了它。

我并不感到惊讶`delete`并且`delete_all`没有工作，因为那些[绕过回调](http://guides.rubyonrails.org/v3.2.19/active_record_validations_callbacks.html#skipping-callbacks)。

[如果任何回调返回 false ，](http://guides.rubyonrails.org/v3.2.19/active_record_validations_callbacks.html#halting-execution) [Rails 执行回滚`before_`](http://guides.rubyonrails.org/v3.2.19/active_record_validations_callbacks.html#halting-execution)是完全正确的。因为 Rails 将整个回调链包装在一个事务中，所以您将无法在链中执行数据库调用（如销毁）。我建议在回调中放置一个条件：

*   如果用户有订阅，则启动一个后台作业，该作业稍后将执行此部分删除（在回调事务之外），并从回调中返回 false。
*   如果他们没有订阅，你就不会启动后台作业，从回调中返回 true，然后像往常一样销毁你的模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-30T08:49:50.773

我最终做了以下事情：

*   覆盖模型（`destroy`见`User`下文）
*   实际上并没有删除`User`，而是销毁不需要的依赖项，并清除`User`模型本身的任何字段，例如电子邮件。
*   我创建了一个`UserDeleter`类，它接受用户并执行所有清除操作，只是为了保持清洁/具有某种单一职责

## 压倒一切`destroy`

```
 def destroy
    run_callbacks(:destroy) do
      UserDeleter.new(self).delete
    end
  end 
```

## 删除家属并清除用户数据

```
class UserDeleter

  def initialize(user)
    @user = user
  end

  def delete
    delete_photos
    delete_badges
    clear_personal_data
    # ...
  end

  private

  def delete_photos
    @user.photos.destroy_all
  end

  def clear_personal_data
    @user.update_attributes!(
      :email => deleted_email,
      :nickname => '<deleted>')
  end

  def deleted_email
    "deleted@#{random_string}.com"
  end

  def random_string(length = 20)
    SecureRandom.hex(length)[0..length]
  end
#...
end 
```

# jquery - jquery - 将 img src 设置为浏览器已加载的图像 - 导致在 Safari 中重新加载图像

> ID：13138694
> 
> 赞同：2
> 
> 时间：2012-10-30T12:11:03.773
> 
> 标签：jquery

我正在使用此 javascript 代码将图像 src 设置为现有图像的图像 src：

```
var src = $('#thumbnailImg' + pageNum).attr('src');
$('#mainAppImageImg').attr('src', src); 
```

在 Firefox 和 IE 中，这按预期工作 - 图像使用现有图像并且不会再次从服务器请求图像。

在 Safari 中，它会导致从服务器重新加载图像。我认为这是因为我对服务器返回的图像标题做错了，但这不是我很了解的主题。

您可以在这里看到这一点：[http](http://www.las.si/tryitout.php) ://www.las.si/tryitout.php 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:52:59.720

正如 Dev 所说：

> 默认情况下，图像将被重新加载

您应该强制服务器使用图像文件夹中的 .htaccess 文件缓存图像：

```
Header unset Pragma
Header set Cache-Control "public, max-age=10000, must-revalidate" 
```

这样，safari 和 chrome 将重用您的浏览器缓存。

您也可以使用 canvas 元素在 base64、服务器端或客户端搜索对您的图像进行编码。

# c# - 在 if 语句中使用按位运算

> ID：13138695
> 
> 赞同：5
> 
> 时间：2012-10-30T12:11:04.647
> 
> 标签：c#, bit

有人可以解释为什么这无效吗？我得到“无法将 int 转换为 bool”

```
 if (b & 1) 
```

还有，为什么我不能

```
 b & 1 
```

在代码中，这是正确的方法吗？

```
 int b = b & 1
 if(b) 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T12:12:51.637

这是因为 b & 1 的结果是一个整数（如果 b 是一个整数）。

这样做的正确方法是（除其他外）：

```
if ((b & 1) != 0) { ... } 
```

或者

`if (Convert.ToBoolean(b & 1)) { ... }`

# linux - 在linux中覆盖.bash_profile文件

> ID：13138696
> 
> 赞同：2
> 
> 时间：2012-10-30T12:11:11.217
> 
> 标签：linux

在我的**.bash_profile**文件中，我想更新 PATH 变量的值。另外，要添加**JAVA_PATH**和**JRE_HOME**变量。而且，我想用**Shell Script**来完成这一切。

我不知道如何使用命令执行此操作，因此我使用**cat**命令**覆盖**整个文件-

 **```
cat >> ~/.bash_profile << _EOF_
#!/bin/bash/
if [ -f ~/.bashrc ]; then
.~/.bashrc
fi

#User specific environment and startup programs
JAVA_PATH=/usr/java/jdk1.6.0_35/bin
PATH=$JAVA_PATH:$PATH:HOME/bin
JRE_HOME=/usr/jdk1.6.0_35

export PATH
unset USERNAME
_EOF_ 
```

对这个文件这样做会有什么影响？如何轻松更新**PATH**变量的值并在此文件中插入**JAVA_PATH**和**JRE_HOME变量？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:29:14.600

你需要使用一些文本操作工具——比如 sed 或 awk...

这是如何更改 .bash_profile 中的 PATH 值的简单示例

```
sed 's/^\([[:space:]]*PATH=\)\(.*\)$/\1"\/bin:\/usr\/bin:~\/bin"/' ~/.bash_profile 
```

注意转义的特殊字符 ( 和 /

如果你想覆盖你的旧文件，你需要通过临时文件来完成，比如：

```
sed ... > /tmp/tmpbashprofile$$
mv /tmp/tmpbashprofile$$ ~/.bash_profile 
```

添加新设置很容易：

```
echo "JAVA_PATH=/usr/java/jdk1.6.0_35/bin" >> ~/.bash_profile 
```

注意双 >> - 它将数据附加到指定文件**

# vb.net - 使用样式和格式将数据表导出到 Excel

> ID：13138697
> 
> 赞同：0
> 
> 时间：2012-10-30T12:11:12.323
> 
> 标签：vb.net, excel, datatable, export

我在将数据表导出到 Excel 时遇到问题。导出到 excel 不是问题，stackoverflow 和互联网上有足够的解决方案。我的问题是我必须使用格式化导出数据表。现在，当我导出数据表时，所有单元格（标题和正文）都被定义为标准（数据格式）。因此，如果我使用整数（数字）和字符串（文本）导出数据表，我将在 excel 中得到正确的格式，整数格式为数字，字符串格式为文本（在 excel 中，我的意思是类别）。有谁知道这个的解决方案？

目前我使用 [http://www.codeproject.com/Tips/406704/Export-DataTable-to-Excel-with-Formatting-in-Cshar](http://www.codeproject.com/Tips/406704/Export-DataTable-to-Excel-with-Formatting-in-Cshar)上的功能 来导出我的数据表。

我的第二个问题是。有没有办法用第二个数据表设置样式，其中包含表格样式的整个配置（标题背景等）

现在在我的函数中，我使用设置样式的输入参数来配置它。

这是我的想法。

```
ExportDatatabletoExcel(ByVal _datatable as datatable, ByVal _styletable as Datatable) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:04:03.937

您还可以使用 EPPLUS 创建真正的 Excel 文档。它比将 HTML 输出为 excel 文档更有效，但会给您更多的控制权。

[https://epplus.codeplex.com/](https://epplus.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:32:36.167

这篇文章应该对你很有用：[Understanding the Excel Object Model](http://msdn.microsoft.com/en-us/library/office/aa168292%28v=office.11%29.aspx)

它包含通过 .NET 和 Excel 处理样式的详细信息和代码示例。

# perl - 如何在 Catalyst 应用程序中正确使用 Schema 中的 UTF-8 编码数据？

> ID：13138698
> 
> 赞同：6
> 
> 时间：2012-10-30T12:11:13.133
> 
> 标签：perl, utf-8, catalyst, dbix-class

在 Catalyst 应用程序或模板中定义的数据具有正确的编码并且显示良好，但从数据库`Latin1`中所有非`?`. 我想问题应该在模型类中，就是这样：

```
use strict;
use base 'Catalyst::Model::DBIC::Schema';

__PACKAGE__->config(
 schema_class => 'vhinnad::Schema::DB',

 connect_info => {
     dsn => 'dbi:mysql:test',
     user => 'user',
     password => 'password',
     {
         AutoCommit        => 1,
         RaiseError        => 1,
         mysql_enable_utf8 => 1,
     },
     'on_connect_do' => [
             'SET NAMES utf8',
     ],      
     }
);

1; 
```

我在这里看不到任何缺陷，但一定有什么地方不对劲。我也将我的模式与测试脚本一起使用，数据编码良好，输出正确，但在 Catalyst 应用程序中我没有正确编码。问题可能出在哪里？

**编辑**

为了将来参考，我把解决方案放在这里：我混合了新旧风格的连接信息。

旧风格就像`(dsn, username, passw, hashref_options, hashref_other options)`

新样式是`(dsn => dsn, username => username, etc)`，所以正确的是使用：

```
 connect_info => {
     dsn               => 'dbi:mysql:test',
     user              => 'user',
     password          => 'password',
     AutoCommit        => 1,
     RaiseError        => 1,
     mysql_enable_utf8 => 1,
     on_connect_do     => [
             'SET NAMES utf8',
     ],      
 } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T21:18:13.417

在具有 Catalyst::View::TT 和 Catalyst::Model::DBIC::Schema 的典型 Catalyst 设置中，UTF-8 需要满足以下条件：

*   将 Catalyst::Plugin::Unicode::Encoding 添加到您的 Catalyst 应用程序
*   添加`encoding => 'UTF-8'`到您的应用配置
*   添加`ENCODING => 'utf-8'`到您的 TT 视图配置
*   添加`<meta http-equiv="Content-type" content="text/html; charset=UTF-8"/>`到`<head>`您的 html 部分以满足不关心`Content-Type:text/html; charset=utf-8`由 Catalyst::Plugin::Unicode::Encoding 设置的 http 标头的旧 IE
*   如果模板包含非 ASCII 字符，请确保您的文本编辑器将模板保存为 UTF-8
*   根据[DBIx::Class::Manual::Cookbook#Using Unicode配置您的 DBIC 模型](https://metacpan.org/module/DBIx::Class::Manual::Cookbook#Using-Unicode)
*   如果您使用 Catalyst::Authentication::Store::LDAP 配置您的 LDAP 存储以通过添加返回 UTF-8`ldap_server_options => { raw => 'dn' }`

根据[Catalyst::Model::DBIC::Schema#connect_info](https://metacpan.org/module/Catalyst::Model::DBIC::Schema#connect_info)：

*旧的 arrayref 样式与 DBI 的 hashrefs 和 DBIx::Class 选项也受支持。*

但是您已经在使用“新”样式，因此不应嵌套 dbi 属性：

```
connect_info => {
     dsn               => 'dbi:mysql:test',
     user              => 'user',
     password          => 'password',
     AutoCommit        => 1,
     RaiseError        => 1,
     mysql_enable_utf8 => 1,
     on_connect_do     => [
         'SET NAMES utf8',
     ],      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T16:59:49.230

此建议假定您拥有最新版本的[DBIC](https://www.metacpan.org/module/DBIx%3a%3aClass)和[Catalyst](https://www.metacpan.org/module/Catalyst)。

*   这不是必需的：`on_connect_do => [ 'SET NAMES utf8' ]`
*   确保数据库中的表|列字符集是 UTF-8。即使零件损坏，您也可以实现有时看起来正确的事情。如果您希望整个链正常工作，数据库必须将字符数据保存为 UTF-8。
*   确保您在 Catalyst 应用程序中使用和配置[Catalyst::Plugin::Unicode::Encoding](https://www.metacpan.org/module/Catalyst::Plugin::Unicode::Encoding)。它在不久的过去确实有严重的错误，所以获取最新的。

# mysql - Ruby on rails 内爆和爆炸函数以更改日期格式

> ID：13138702
> 
> 赞同：0
> 
> 时间：2012-10-30T12:11:25.130
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, date

我们如何在 '-' 上爆炸一个字符串，然后在 ruby​​ on rails 中的 '-' 上再次内爆它。我的问题是我想将`"MM-DD-YYYY"`格式中的日期转换为`'YYYY-MM-DD'`来自表单并将其保存到 mysql 数据库。正如 MySQL 将只接受`'YYYY-MM-DD'`格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:13:41.837

查看[`strftime`](http://www.wetware.co.nz/2009/07/rails-date-formats-strftime/)

```
"31-12-2012".to_date.strftime("%Y-%m-%d") #Gives "2012-12-31" 
```

如果您有日期时间对象，请执行以下操作

```
t = Time.now
puts t.strftime("%Y-%m-%d %H:%M:%S") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:18:55.577

如果它是这样进来的：`"MM-DD-YYYY"`

然后我会这样做：

```
m, d, y = "MM-DD-YYYY".split('-')
new_format = [y,m,d].join('-') 
```

我将其保留为稍长的格式，以便您拥有更大的灵活性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:42:52.073

Rails 不支持开箱即用的 MM-DD-YYYY。通常不可能将它们与 DD-MM-YYYY 区分开来，这可能就是原因。

您可以使用[Date::strptime](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html#method-c-strptime)

```
dateMMDDYYY = "10-30-2012"
date = Date.strptime(dateMMDDYYY, '%m-%d-%Y') 
```

您实际上不必将其格式化为 YYYY-MM-DD，因为 ActiveRecord 只需要一个日期对象。

# ios5 - 标签栏在切换回来后隐藏

> ID：13138703
> 
> 赞同：0
> 
> 时间：2012-10-30T12:11:27.057
> 
> 标签：ios5, xcode4, uitabbar

我有标签栏应用程序，当我回来时，我将通过导航控制器加载另一个视图控制器标签栏隐藏我搜索并使用

```
for(UIView *view in self.window.subviews)
    {
        if([view isKindOfClass:[UITabBarItem class]])
        {
            if(view.hidden){

                view.hidden = NO;
                break;
            }
            view.hidden = YES;
        }
    } 
```

但问题仍然存在，任何人都可以知道解决方案吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T06:40:16.337

我不确定你想要达到什么样的结果，但也许你可以检查以前的问题来隐藏和显示 TabBar

[如何隐藏uitabbar控制器](https://stackoverflow.com/questions/5272290/how-to-hide-uitabbarcontroller)

如果它不起作用，您可以尝试粘贴用于声明 TabBar 的代码

# iphone - 无法关闭 presentModalViewController

> ID：13138706
> 
> 赞同：3
> 
> 时间：2012-10-30T12:11:49.327
> 
> 标签：iphone, uiviewcontroller, presentmodalviewcontroller

我在 iphone 应用程序中有两个视图控制器。

1.) 第一VC

2.) 第二VC

在我的 FirstVC 中，我有一个按钮。通过点击该按钮，我在`presentModalViewController`. 看下面的代码。

```
- (IBAction)buttonClicked:(id)sender
{
    SecondVC *secondVC = [SecondVC alloc] initWithNibName:@"SecondVC" bundle:nil];
    [self.navigationController presentModalViewController:secondVC animated:YES];
} 
```

现在搬到了SecondVC。在 SecondVC 上，我创建了导航栏以及“取消”按钮作为 leftBarButtonItem。我在取消按钮上设置了一个按钮单击事件。在那种方法中，我想解雇 SecondVC。波纹管方法在 SecondVC 中。看下面的代码。

```
- (void)cancelButtonClicked
{
  [self dismissModalViewControllerAnimated:YES];
} 
```

此代码不起作用。我不能通过这段代码解雇 SecondVC。请提出其他技巧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T12:17:14.603

将按钮代码更改为此..

```
- (IBAction)buttonClicked:(id)sender
{
    SecondVC *secondVC = [SecondVC alloc] initWithNibName:@"SecondVC" bundle:nil];
 [self presentViewController:secondVC animated:YES completion:NULL];

} 
```

在取消按钮点击

```
-(void)cancelButtonClicked {
 [self.presentingViewController dismissViewControllerAnimated:YES completion:NULL];

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T12:16:28.877

您将`dismissModalViewControllerAnimated:`消息发送到错误的对象。

由于您通过导航控制器呈现了模态视图控制器，因此您应该调用：

```
[self.presentingViewController dismissModalViewControllerAnimated:YES]; 
```

这将适用于 iOS 5 及更高版本。如果您只针对 iOS 5 和更新版本，您还可以考虑使用其上可用的更新方法来管理模态视图控制器：

```
– presentViewController:animated:completion:
– dismissViewControllerAnimated:completion: 
```

但我认为这不是强制性的。

如果你想支持 iOS 4 和更早的版本，你应该给你的模态视图控制器添加一个属性：

```
@interface SecondVC : UIViewController
@property (nonatomic, weak/assign) UIViewController* presentingController;
...
@end 
```

并在模态显示控制器之前设置它：

```
- (IBAction)buttonClicked:(id)sender
{
     SecondVC *secondVC = [SecondVC alloc] initWithNibName:@"SecondVC" bundle:nil];
     secondVC.presentingController = self.navigationController;
     [self.navigationController presentModalViewController:secondVC animated:YES];
} 
```

那么你会使用：

```
[self.presentingController dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:47:53.867

请用以下代码替换您的代码...代码

```
- (IBAction)buttonClicked:(id)sender
{
    SecondVC *secondVC = [SecondVC alloc] initWithNibName:@"SecondVC" bundle:nil];
    [self presentModalViewController:secondVC animated:YES];
}

- (void)cancelButtonClicked
{
   [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:16:39.597

现在试试这个 secondVC ......

```
[self presentModalViewController:secondVC animated:YES]; 
```

# shopify - 在不同页面上访问集合的图像

> ID：13138712
> 
> 赞同：0
> 
> 时间：2012-10-30T12:12:00.167
> 
> 标签：shopify

我知道在 Shopify 中，当您制作收藏品时，您可以提交一张图片来代表该收藏品，并且您可以通过执行 {{ collection.image.src }} 在相关收藏品页面上获得该图片，但有人知道吗？将相同图像放到该特定集合的集合页面以外的不同页面上的方法。

我想也许像 {{ collection[trousers].image.src }}

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:15:02.207

你有几个语法错误

*   `collection`变量是复数：`collections`
*   集合名称需要用引号引起来

这个片段应该工作：

```
{{ collections['trousers'].image.src }} 
```

# c# - Lua 没有这样的类型：loadassembly

> ID：13138713
> 
> 赞同：0
> 
> 时间：2012-10-30T12:12:07.253
> 
> 标签：c#, lua, luainterface

我正在尝试使用 Lua 编写脚本：-

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using LuaInterface;

namespace Scripting {
    public class LuaParser {
        Lua lua;
        string path;

        public LuaParser(string path) {
            this.path = path;
            lua = new Lua();
        }

        public void ParseClass(string ClassName) {
            string p = path + ClassName + ".lua";
            lua.DoFile(p);

        }

        public Lua Parser {
            get {
                return lua;
            }
        }
    }
}
-----------------------------------------------------------------------------
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Scripting {
    class Program {
        static void Main(string[] args) {
            LuaParser p = new LuaParser("C:\\Users\\Administrator\\Documents\\Visual Studio 2012\\Projects\\Scripting\\Scripting\\bin\\Debug\\");
            p.ParseClass("test");

        }
    }
} 
```

和 test.lua :-

```
luanet.loadassembly("Scripting"); 
```

但它不工作它抛出这个异常： -

```
 LuaInterface.LuaException was unhandled
  HResult=-2146232832
  Message=...2012\Projects\Scripting\Scripting\bin\Debug\test.lua:1: No such type: loadassembly
  Source=LuaInterface
  StackTrace:
       at LuaInterface.Lua.ThrowExceptionFromError(Int32 oldTop)
       at LuaInterface.Lua.DoFile(String fileName)
       at Scripting.LuaParser.ParseClass(String ClassName) in c:\Users\Administrator\Documents\Visual Studio 2012\Projects\Scripting\Scripting\LuaParser.cs:line 20
       at Scripting.Program.Main(String[] args) in c:\Users\Administrator\Documents\Visual Studio 2012\Projects\Scripting\Scripting\Program.cs:line 11
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

test.lua ， lua51.dll 和 LuaInterface.dll 在同一目录下，这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:01:01.330

找到非类型时是 Lua 错误；而不是 .Net 加载程序集。它找不到上面示例中指定的“loadassembly”。尝试给它一个完全限定的名称，例如“System.Windows.Forms.Form”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T10:03:51.983

该方法名为“load_assembly”。

# javascript - 仅西里尔文输入文本表单

> ID：13138715
> 
> 赞同：7
> 
> 时间：2012-10-30T12:12:09.690
> 
> 标签：javascript, jquery

如何将输入文本限制为仅**西里尔**字符的 Web 表单文本框？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T12:17:44.897

首先，您应该为页面和脚本使用支持西里尔字符（例如 UTF-8）的编码。然后，您可以使用正则表达式来检查：

```
$("input").keyup(function() {
    this.value = this.value.replace(/[^а-яё]/i, "");
});​ 
```

**演示：http:** [//jsfiddle.net/CSjkP/](http://jsfiddle.net/CSjkP/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T12:16:49.813

使用仅与西里尔文匹配的正则表达式，使用许多可用的 JS 表单验证器中的任何一个（一个简单的搜索即可获得十几个）：

```
/^[абвгдеёжзийклмнопрстуфхцчшщьыъэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЬЫЪЭЮЯ]*$/ 
```

也许您还想在那里添加空格或数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-20T08:21:46.133

```
$("input").keypress(function(e) {
   var verified = String.fromCharCode(e.which).match(/[a-zA-Z-]/);
   if (verified) {
  e.preventDefault();
   }
 }); 
```

演示：http: [//jsfiddle.net/fejkmzp1/1/](http://jsfiddle.net/fejkmzp1/1/)

# c# - 给定 GridView 上的 ItemClick 事件，我如何知道被单击的组？

> ID：13138716
> 
> 赞同：0
> 
> 时间：2012-10-30T12:12:11.277
> 
> 标签：c#, xaml, windows-8, windows-runtime

我有一个显示分组项目的 GridView（类似于 Win8 商店应用程序上的默认项目）。

不同之处在于每个组可能包含与其他组相同的项目。

对于该项目，我需要知道它被点击到了哪个组。

[编辑：删除“项目被点击”]

**我知道如何通过遍历可视化树（而不是使用 ItemClick 事件）来解决这个问题——但我想知道是否有标准的方法来做到这一点。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:36:04.777

您是否使用默认的 SampleDataSource 类？如果您是，在 ItemView_ItemClick 事件中，您可以使用以下代码获取组的 ID

```
 var groupId = ((SampleDataItem)e.ClickedItem).Group; 
```

# function - VBA-Excel从函数返回多维数组

> ID：13138718
> 
> 赞同：0
> 
> 时间：2012-10-30T12:12:16.783
> 
> 标签：function, excel, multidimensional-array, vba

我正在尝试编写一个返回多维数组的函数。问题是数组的大小没有定义。

**我的数组在my_list()**下面的函数中初始化

 **```
Dim my_list() As String

Public Sub Load_My_List()

    Dim last_column As Integer
    last_column = some_helper.Get_Last_Column(somw_worksheet)

    'my array is resized in this point
    ReDim my_list(1 To last_column - 1, 1)

    Dim i As Integer
    i = 1

    For index= 2 To ultima_colonna

       my_list(i, 0) = some_worksheet.Cells(2, index).value
       my_list(i, 1) = index

       i = i + 1

    Next index

End Sub 
```

那么，我怎样才能编写一个返回**my_list**的函数呢？类似下面的函数会产生错误类型错误

```
Public function Get_My_List as String()

    Get_My_List = my_list 

End Function 
```

我怎样才能正确调用这个函数？我认为像

```
Dim test() as String
test = Get_My_List 
```

将不起作用**

# java - JPA 2（hibernate）在保留父集合的同时插入子集合的重复项。截至今天的解决方法是什么

> ID：13138729
> 
> 赞同：1
> 
> 时间：2012-10-30T12:12:43.570
> 
> 标签：java, hibernate, jpa, duplicates

我相信很多人都经历过这个问题，如在[hibernate jira](https://hibernate.onjira.com/browse/HHH-5855)和[stackOV 1](https://stackoverflow.com/questions/7903800/hibernate-inserts-duplicates-into-a-onetomany-collection)和[stackOV 2](https://stackoverflow.com/questions/12902827/jpa-merge-results-in-duplicate-entry-of-foreign-entity)上表达的标题和明确表达。我用`hibernate 4.0.1.Final`和`spring-data-jpa 1.1.0.M1`。相关的 POJO 实际上是 ID 生成的，所以我想知道具体实现`equals`和是否`hashcode`可以帮助解决问题，或者我必须找到另一种生成 ID 的方法

感谢您阅读本文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:47:19.173

没关系！！

我有一个独特的领域，这是问题的根源。顺便说一句，我使用身份（自动增量）

```
@Id
@GeneratedValue(strategy= GenerationType.IDENTITY) 
```

# asp.net-mvc - MVC4 - 渲染 html.dropdownlist

> ID：13138733
> 
> 赞同：1
> 
> 时间：2012-10-30T12:12:47.403
> 
> 标签：asp.net-mvc

我想渲染一个 html.dropdownlist，这样用户就可以“点击”一个项目，在默认渲染中，用户必须点击下拉列表，然后列表会出现，然后用户可以选择一个项目。

我想将其显示为 ul\li 列表，但不知道如何，我确定我可以做一些 css 的东西，但是如何将选定的 SelectListItem-Value 重新放入数据源...？我很确定那里已经有东西了。谁能指出我正确的方向？

最好的问候，Jurjen。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:40:59.023

让我们为您的屏幕创建一些视图模型。假设我们正在做一个商店定位器视图，用户必须从下拉列表中选择一个状态，然后我们将在单选按钮中显示商店属于该状态。

```
public class LocateStore
{
  public List<SelectListItem> States { set;get;}
  public int SelectedState { set;get;}
  public LocateStore()
  {
     States=new List<SelectListItem>();
  }
}
public class StoreLocation
{
  public List<Store> Stores{ set;get;}
  public int SelectedStore { set;get;}
  public StoreLocation()
  {
     Stores=new List<Store>();
  } 
}
public class Store
{
  public int ID { set;get;}
  public string Name { set;get;}
} 
```

现在在您的`GET`操作中，创建 LocateStore 类的对象并设置 State 集合属性值并将其发送到视图。

```
public ActionResult Locate()
{
  var vm=new LocateStore();
  //The below code is hardcoded for demo. you mat replace with DB data.
  vm.States= new List<SelectListItem>
  {
    new SelectListItem { Value = 1, Text = "MI" },
    new SelectListItem { Value = 2, Text = "CA" },
    new SelectListItem { Value = 3, Text = "OH" }
  };  
  return View(vm);
} 
```

现在创建你的定位视图，它是强类型的`LocateStore`类。我们将有一些 javascript 代码来监听下拉列表的更改事件并进行 ajax 调用以获取单选按钮列表视图。

```
@model LocateStore
@Html.DropDownListFor(x=>x.SelectedState, 
                    new SelectList(Model.States,"Value","Text"),"Please select")
<div id="stores">

</div>
<script type="text/javascript">
   $(function(){
     $("#SelectedState").change(function(){
        $("#stores").load("@Url.Action("GetStores","Store")/"+$(this).val());
     });
   });
</script> 
```

现在我们需要一个`GetStores`动作方法，它接受选定的状态 id 并返回一个局部视图，该视图具有单选按钮列表格式的商店名称。

```
public ActionResult GetStores(int id)
{
     var vm=new StoreLocation();
      //The below code is hardcoded for demo. you mat replace with DB data.
      vm.Stores= new List<Store>
      {
        new Store{ ID= 1, Name= "Costco" },
        new Store{ ID= 2, Name= "RiteAid" },
        new Store{ ID= 3, Name= "Target" }
      };  
      return PartialView(vm);
} 
```

现在我们需要这个方法的视图，`GetStores.cshtml`它是强类型的`StoreLocation`类

```
@model StoreLocation
@foreach(var item in Model.Stores)
{
  @Html.RadioButtonFor(b=>b.SelectedStore,item.ID)  @item.Name
} 
```

现在，当您运行应用程序时，当用户从下拉列表中选择一个项目时，它将带来具有单选按钮的局部视图。

[这](https://skydrive.live.com/redir?resid=B9ABE38A81F442D6!206&authkey=!AJBWvNbhkCJS0es)是使用上述代码的工作示例供您参考。

# java - Python with java

> ID：13138739
> 
> 赞同：3
> 
> 时间：2012-10-30T12:13:04.290
> 
> 标签：java, python, jvm

Instead of using Jython, is there any way to call a Java program from Python?

This Java program contains some function and I need to give an input file to Java code and it returns two values which I will be using in Python. So the Python program passes a filename to the Java code and the Java code will return two values for each line in that file.

For example I have the following file containg data like given below:

```
22      16050408        2       2184    T:0.938645      C:0.0613553
22      16050612        2       2184    C:0.915751      G:0.0842491
22      16050678        2       2184    C:0.94826       T:0.0517399
22      16050984        2       2184    C:0.997711      G:0.00228938
22      16051107        2       2184    C:0.94185       A:0.0581502 
```

I need give a file to the Java program and it will return two values for each line of that file. So the number of lines in the file containg the above data, input to java code will be the same. I need to replace the column two with two columns.. i.e. the values returned by Java.

Please kindly help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:17:24.477

您始终可以将 java 程序作为命令行工具来调用——那么程序是什么语言并不重要。为此，我建议使用[subprocess](http://docs.python.org/2/library/subprocess.html)模块。您甚至可以在不使用文件系统上的任何临时文件的情况下将输入/输出通过管道传输到您的 python 程序。以下示例运行 java 应用程序并获取其输出：

```
prog = subprocess.Popen(["/usr/bin/java", "TestClass"], stdout=subprocess.PIPE)
print prog.stdout.read() 
```

另一种选择，虽然涉及更多的是使用[py4j](http://py4j.sourceforge.net/index.html)：

> Py4J 使在 Python 解释器中运行的 Python 程序能够动态访问 Java 虚拟机中的 Java 对象。调用方法就像 Java 对象驻留在 Python 解释器中一样，并且可以通过标准 Python 集合方法访问 Java 集合。Py4J 还使 Java 程序能够回调 Python 对象。Py4J 在 BSD 许可下分发。

我认为这听起来确实像你正在做的事情..

Py4J 的优势在于它是一种更便携的解决方案，它使用套接字在 java 和 python 程序之间进行通信——您不是在 python 环境中运行 JVM，而是与运行 py4j 网关的现有 JVM 实例“通信”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:17:37.187

你可以试试[JPype](http://jpype.sourceforge.net/)。

这是文档中有关使用的引用：

```
from jpype import * 
startJVM("d:/tools/j2sdk/jre/bin/client/jvm.dll", "-ea") 
java.lang.System.out.println("hello world") 
shutdownJVM() 
```

这将启动一个专用的 JVM，您可以在其中运行您的 Java 代码，从 Python 透明地调用它。

尽管在您的情况下，我相信您确实可以将例程作为子进程运行，并且如果您将来需要这样做，还具有从 Java 轻松切换到其他任何东西的优势。

# mysql - 定义用于 GROUP BY 的标准

> ID：13138742
> 
> 赞同：0
> 
> 时间：2012-10-30T12:13:14.027
> 
> 标签：mysql, join, group-by

在下面的数据库中，我需要所有用户及其位置，没有重复，并且首先列出了新泽西州的用户。
（如果他们有新泽西地址，我不需要他们的其他地址。为清楚起见，简化了数据库）。

```
> table address,

|  id  |  state |   City   |
|------|--------|----------|
|  01  |   NY   |  Gotham  |
|  02  |   NY   |  Uye     |
|  03  |   NJ   |  Hoboken |
|  04  |   NJ   |  Newark  |

> table contact

|  user  |  address  |
|--------|-----------|
|   01   |     01    |
|   02   |     02    |
|   02   |     03    |
|   03   |     04    | 
```

以下是我的一些尝试及其输出。从我读到的[我在这上面花了几个小时]，我认为这被称为模棱两可的 GROUP BY 查询，只有 MySQL 才允许。

不过，我想不出正确的方法来做到这一点。请帮忙！

期望的结果：

```
|  user  |  state  |
|--------|---------|
|   02   |   NJ    |
|   03   |   NJ    |
|   01   |   NY    | 
```

其他尝试：

```
SELECT user, state FROM contact, address WHERE id = address;
// Duplicate users, and addresses I do not need.

|  user  |  state  |
|--------|---------|
|   01   |   NY    |
|   02   |   NY    |
|   02   |   NJ    |
|   03   |   NJ    |  

SELECT user, state FROM contact, address WHERE id = address GROUP BY user;
// NY address. I need the NJ address.

|  user  |  state  |
|--------|---------|
|   01   |   NY    |
|   02   |   NY    |
|   03   |   NJ    |

SELECT user, state FROM contact, address WHERE id = address GROUP BY user HAVING state = 'NJ';
//Worse, now I lose my NY users, and one of my NJ users doesn't even show 

|  user  |  state  |
|--------|---------|
|   03   |   NJ    | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:52:55.210

它可能不漂亮，但这个解决方案有效。我在这里更新了查询以反映小提琴中的变化：

```
SELECT user, state, `state` LIKE 'NJ' ismatch
FROM contact, address WHERE id = address
AND (state = 'NJ' OR `user` NOT IN 
    (SELECT `user` FROM contact, address WHERE address = id AND `state` LIKE 'NJ'))
GROUP BY user
ORDER BY ismatch DESC; 
```

简单解释：将每个用户加入他在新泽西州的地址，或者如果他在新泽西州没有地址，则加入他的任何地址。需要 GROUP BY 以防止重复用户出现在结果中。

本质上，问题归结为想要检索用户的匹配地址（如果存在），否则只是获取该用户的任何地址。因此 where 子句中的第二个条件，只有当该用户有一个 NJ 地址时才会提取一个 NJ 地址，否则它将正常取第一个。ismatch 字段用于排序。

注意：我最初是使用表之间的 JOIN 编写的。为了清楚起见，它们已被删除。

[链接到 SQL 小提琴](http://www.sqlfiddle.com/#!2/e4b96/4)

编辑：有人向我指出，此解决方案并非在所有情况下都有效（请参阅评论）。为了解决这个问题，我添加了一个 GROUP BY，现在它似乎可以工作了。我还用一个简单的比较替换了 CASE 以提高性能：[SQLFiddle](http://www.sqlfiddle.com/#!2/bb4ae/4/0)

此外，我认识的具有数据库管理经验的人向我建议了一个替代答案。他的建议是（至少）在两个查询中执行此操作，因此我构建了这些查询并使用了 UNION：

```
SELECT user, state, 1 ismatch FROM contact, address
WHERE id = address AND state = 'NJ' GROUP BY user
UNION
SELECT user, state, 0 ismatch FROM contact, address
WHERE id = address AND `user` NOT IN (SELECT `user` FROM contact, address WHERE address = id AND `state` LIKE 'NJ')
GROUP BY user ORDER BY ismatch DESC 
```

简单说明：获取每个具有 NJ 地址的用户，然后获取具有任何地址的每个用户，如果他没有 NJ 地址，并将两个结果集合并在一起。GROUP BY 用于两个查询以防止重复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T17:20:31.320

有点迟到的答案，有点啰嗦，但标准的 SQL；

```
SELECT DISTINCT c1.user,a1.state,a1.city
FROM contact c1
LEFT JOIN contact c2 
  ON c1.user = c2.user AND c1.address<>c2.address
JOIN address a1
  ON a1.id=c1.address
LEFT JOIN address a2 
  ON a2.id=c2.address AND
     ( a1.state<> 'NJ' AND a2.state='NJ' OR
       a1.state=a2.state AND a1.id>a2.id )
GROUP BY c1.user,a1.state,a1.city
HAVING MAX(a2.id) IS NULL 
```

[SQLfiddle 在这里](http://sqlfiddle.com/#!2/7607a/11)。

EDIT: Added a fix for the duplicate case you found. A cursory explanation of the query;

For each user, it will go through all combinations of contact/address (c1/a1) and compare them with all other (a2/c2) for the same user using a left join that sets a2.id to NULL if a1/c1 is "better". If an address isn't "worse" in *any* comparison, it will be the address kept.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:29:53.883

试试这个：

```
SELECT user, state FROM contact, address WHERE id = address 
and state='NJ'
union
SELECT min(user), state FROM contact, address WHERE id = address 
and state<>'NJ'
group by state 
```

[**SQLFIDDLE 演示**](http://www.sqlfiddle.com/#!2/6221e/12)

# php - 如何在 setcookies() 中设置域

> ID：13138746
> 
> 赞同：2
> 
> 时间：2012-10-30T12:13:29.197
> 
> 标签：php, http, setcookie

我曾尝试设置 cookie，但问题在于设置域。当我尝试在其中设置域时，`setcookies()`它没有设置任何值。如果没有域设置，它将自动设置我的域（例如 localhost）。

如果我使用任何`.com`它会默认设置它，但我不能在 cookie 中设置域。

谁能帮我在php中设置域。

```
 setcookie('session_id',$sessionID[1],strtotime($expireTime[1]),'/',$domain); 
```

当我在没有域的情况下设置它时，它会将 cookie 设置为我的本地主机或我所在的域。

谁能帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:18:30.930

您不能设置归因于您正在使用的域以外的域的 cookie。这通常被认为是一件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:27:34.153

如果您将域添加到`setcookie`，您将在标题中看到 PHP 已将您的 cookie 设置为正确的域名。但是，出于安全原因，您的浏览器会忽略它。

如果您需要为自动登录等设置 cookie，则需要使用[hosts 文件](http://en.wikipedia.org/wiki/Hosts_%28file%29)让浏览器相信您与要设置 cookie 的域位于同一个域中。

例子 ：

如果您添加：

```
127.0.0.1   autologin.amazon.co.uk 
```

在您的主机文件中，然后转到`http://autologin.amazon.co.uk`而不是`http://localhost`，您的远程脚本将被允许设置任何`.amazon.co.uk`cookie。

# smarty - 如何使用 smarty 获取当前 URL

> ID：13138751
> 
> 赞同：38
> 
> 时间：2012-10-30T12:13:40.860
> 
> 标签：smarty

如何`URL`使用`Smarty`类似于`window.location`in `JavaScript`？

我做了这个

```
{$smarty.server.PHP_SELF} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-04-19T13:02:59.823

你也可以用这个。

```
{$smarty.server.HTTP_HOST}{$smarty.server.REQUEST_URI} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T12:24:41.363

这是控制器代码：

```
<?php
require_once('libs/Smarty.class.php');
$smarty = new Smarty();
if (isset($_SERVER["HTTPS"]) && $_SERVER["HTTPS"] == "on") {
    $pro = 'https';
} else {
    $pro = 'http';
}
$port = ($_SERVER["SERVER_PORT"] == "80") ? "" : (":".$_SERVER["SERVER_PORT"]);
$current_url =  $pro."://".$_SERVER['SERVER_NAME'].$port.$_SERVER['REQUEST_URI'];

$smarty->assign("current_url",$current_url);
$smarty->display('index.tpl');

?> 
```

您可以在 index.tpl 模板文件中显示变量：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>Title</title>
    </head>
    <body>

        {$current_url}

    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-12T18:31:31.700

看看有什么可用的：

```
{$smarty.server|@var_dump} 
```

**[url https://some.example.com/some/path?param=1](https://some.example.com/some/path?param=1)**的几个示例：

```
{$smarty.server.SCRIPT_URI} 
```

[https://some.example.com/some/path](https://some.example.com/some/path)

```
{$smarty.server.SERVER_NAME} 
```

some.example.com

```
{$smarty.server.SCRIPT_URL} 
```

/一些/路径

# ruby-on-rails - 在搜索结果中排除索引数据 - elasticsearch（轮胎）

> ID：13138752
> 
> 赞同：0
> 
> 时间：2012-10-30T12:13:41.900
> 
> 标签：ruby-on-rails, elasticsearch, tire

我正在尝试通过轮胎宝石将弹性搜索用于多租户应用程序。该应用程序有许多帐户，每个帐户都有许多用户。

现在我想根据帐户 ID 索引用户。

用户模型：

```
 include Tire::Model::Search
  mapping do
    indexes :name, :boost => 10
    indexes :account_id
    indexes :company_name
    indexes :description
  end

  def to_indexed_json
    to_json( :only => [:name, :account_id, :description, :company_name], 
           )
  end 
```

搜索查询：

```
 User.tire.search do
    query do
      filtered do
        query { string 'vamsikrishna' }
        filter :term, :account_id => 1
      end
    end
  end 
```

过滤器工作正常，结果仅显示过滤后的帐户 ID (1)。但是，当我搜索查询字符串 1 时：

```
 User.tire.search do
    query do
      filtered do
        query { string '1' }
        filter :term, :account_id => 1
      end
    end
  end 
```

假设有一个名为 1 的用户。在这种情况下，将为所有帐户 ID 为 1 的用户和该用户显示结果。这是因为我在 to_indexed_json 中添加了 account_id。现在，我怎样才能只显示名称为 1 的用户？（不是所有用户**都**可以在点击中使用。应该只显示名称为 1 的用户）

**当没有名称或公司名称或描述为 1 的用户时，我只是不希望显示任何结果。但是，在我的情况下，正如我解释的那样，我会得到帐户 id 1 中的所有用户。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:39:56.510

您正在搜索[`_all`](http://www.elasticsearch.org/guide/reference/mapping/all-field.html)特殊字段，其中包含您索引的所有字段内容的副本。您应该搜索特定字段以获得正确的结果，如下所示：`field_name:1`.

如果您愿意，可以使用[查询字符串](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)搜索多个字段：

```
{
    "query_string" : {
        "fields" : ["field1", "field2", "field3"],
        "query" : "1"
    }
} 
```

# c# - 在 Visual Studio 中运行前仅在设计器视图中使用事件

> ID：13138753
> 
> 赞同：1
> 
> 时间：2012-10-30T12:13:55.850
> 
> 标签：c#, visual-studio, events, user-controls

我想这是一个非常奇怪和罕见的问题！

我已经制作了一个继承`System.Windows.Forms.Label`对象的 Label 控件，因此在设计器视图中变得可见和可用。当我将标签拖到表单上并且 Visual Studio 创建它的一个实例时，我希望它打开一个输入框并询问我它的文本应该是什么。我覆盖了`OnCreateControl`事件并且它正在工作，但问题是当我运行程序时会发生同样的事情，但我只是希望它**在运行时之前**在设计器视图中工作。我应该如何检查/避免这种情况？

这是代码：

```
protected override void OnCreateControl()
{
        base.OnCreateControl();
        this.Text = Microsoft.VisualBasic.Interaction.InputBox("Enter text: ");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:18:11.307

使用该属性`DesignMode`来查明该组件是否是当前设计的：

```
protected override void OnCreateControl()
{
   base.OnCreateControl();
   if (DesignMode)
        this.Text = Microsoft.VisualBasic.Interaction.InputBox("Enter text: ");
} 
```

# java - 如何使用 javafx 选择和检索带有复选框控件的列

> ID：13138756
> 
> 赞同：3
> 
> 时间：2012-10-30T12:14:11.720
> 
> 标签：java, checkbox, tableview, javafx-2, javafx

在我的`Javafx2`应用程序`TableView`中，我想在其中`CheckBoxes`选择一个或多个列。

我找到了很多答案来逐行制作一整列专用于复选框，但在我的情况下，我想为每个列标签添加一个复选框，以便仅选择当用户单击按钮以计算一行时选中的列。

我看到有一个`javafx.scene.control.cell.CheckBoxTableCell<S,T>`，但我可以将它用于 tableview 列选择吗？

可能吗 ？

**更新 1：**

感谢@amru，可以添加`Node`到`TableColumn`对象的标题中。所以我还有另一个问题，检索所有选定列的索引的最佳方法是什么？就我而言，我也在 javafx api 中搜索

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T13:31:54.330

此代码将在列标题中放置一个复选框。

```
column.setGraphic(new CheckBox()); 
```

更新：使用列设置复选框的用户数据。当用户勾选复选框时，您可以稍后检索它。

```
EventHandler<ActionEvent> handler = new EventHandler<ActionEvent>() {

        @Override
        public void handle(ActionEvent event) {
            CheckBox cb = (CheckBox) event.getSource();
            TableColumn column = (TableColumn) cb.getUserData();
            if (cb.isSelected()) {
                lstClm.add(column);
            } else {
                lstClm.remove(column);
            }
            for (TableColumn clm : lstClm) {
                System.out.println("selected column: " + clm.getText());
            }
        }
    };
    CheckBox cb = new CheckBox();
    cb.setUserData(firstDataColumn);
    cb.setOnAction(handler);
    firstDataColumn.setGraphic(cb);

    cb = new CheckBox();
    cb.setUserData(secondDataColumn);
    cb.setOnAction(handler);
    secondDataColumn.setGraphic(cb); 
```

# java - 按下返回按钮后，Android 应用程序无法正常工作

> ID：13138758
> 
> 赞同：2
> 
> 时间：2012-10-30T12:14:19.320
> 
> 标签：java, android, eclipse, sdk

我创建了一个 Android 应用程序，它会在屏幕上绘制一个小图像，如果你点击屏幕底部 50 像素，它就会退出。当我点击那里时，它退出正常，但是，当我按下后退（或主页）按钮退出应用程序时，它退出，然后说，“不幸的是，游戏开发已经停止。” 我还检查了 LogCat，它显示每次停止工作时都会发生 Java NullPointerException。LogCat 的输出是：

```
10-30 01:13:28.280: E/AndroidRuntime(15294): FATAL EXCEPTION: Thread-1718
10-30 01:13:28.280: E/AndroidRuntime(15294): java.lang.NullPointerException
10-30 01:13:28.280: E/AndroidRuntime(15294):    at tricrose.gamedev.GameView.onDraw(GameView.java:56)
10-30 01:13:28.280: E/AndroidRuntime(15294):    at tricrose.gamedev.GameThread.run(GameThread.java:30) 
```

我有三个 Java 类：Game.java（Activity）、GameView.java（SurfaceView）和 GameThread.java（主线程）。

代码如下：

游戏.java：

```
package tricrose.gamedev;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.Window;
import android.view.WindowManager;

public class Game extends Activity {

    public static final String TAG = Game.class.getSimpleName();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(new GameView(this));
        Log.d(TAG, "View added");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_game, menu);
        return true;
    }
} 
```

游戏视图.java：

```
package tricrose.gamedev;

import android.app.Activity;
import android.content.Context;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class GameView extends SurfaceView implements SurfaceHolder.Callback {

    public static final String TAG = GameView.class.getSimpleName();
    private GameThread thread;

    public GameView(Context context) {
        super(context);
        getHolder().addCallback(this);
        thread = new GameThread(getHolder(), this);
        setFocusable(true);
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {

    }

    public void surfaceCreated(SurfaceHolder holder) {
        thread.setRunning(true);
        thread.start();
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        boolean retry = true;
        while (retry) {
            try {
                thread.join();
                retry = false;
            } catch (Exception e) {}
        }
    }

    public boolean onTouchEvent(MotionEvent e) {
        if (e.getAction() == MotionEvent.ACTION_DOWN) {
            if (e.getY() > getHeight() - 60) {
                thread.setRunning(false);
                ((Activity)getContext()).finish();
            }
        }
        return super.onTouchEvent(e);
    }

    protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.BLACK);
        canvas.drawBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.droid_1), 10, 10, null);
    }
} 
```

游戏线程.java：

```
package tricrose.gamedev;

import android.graphics.Canvas;
import android.view.SurfaceHolder;

public class GameThread extends Thread {

    public static final String TAG = GameThread.class.getSimpleName();
    private boolean running;
    private SurfaceHolder surfaceHolder;
    private GameView gameView;

    public GameThread(SurfaceHolder surfaceHolder, GameView gameView) {
        super();
        this.surfaceHolder = surfaceHolder;
        this.gameView = gameView;
    }

    public void setRunning(boolean running) {
        this.running = running;
    }

    public void run() {
        Canvas canvas;
        while (running) {
            canvas = null;
            try {
                canvas = this.surfaceHolder.lockCanvas();
                synchronized (surfaceHolder) {
                    this.gameView.onDraw(canvas);
                }
            } finally {
                if (canvas != null) {
                    surfaceHolder.unlockCanvasAndPost(canvas);
                }
            }
        }
    }
} 
```

我已经在互联网上搜索了一个解决方案，但我找不到一个真正有效的解决方案，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:03:32.477

我终于设法找到了解决方案！事实证明，我应该在调用 onDraw 之前检查画布是否为空，如果为空，则通过完成活动退出应用程序。我在 JavaCodeGeeks.com 上找到了解决方案，当时我正在查看 Android 教程。感谢大家的所有回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:29:44.217

为什么要从 onDraw 和 GameThread 运行方法的两个地方进行绘图。我认为你只需要从 GameThread rlun 方法中删除 onDraw 做每一个绘图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:33:02.613

这只是一个猜测，但当应用程序尝试退出时，您的应用程序可能仍在绘图。在您的 onDraw 方法中，您调用这行代码（这可能是您的问题原因）：
`canvas.drawBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.droid_1), 10, 10, null);`
在这种情况下，您可能不再有可用的资源；）

您可以尝试：
1\. 将一个类私有位图变量放入您的 GameView 类：
`private Bitmap mBitmap;`
2\. 在 GameView 构造函数中加载位图：
`mBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.droid_1);`
3\. 使用（已加载的）位图进行绘制：
`canvas.drawBitmap(mBitmap, 10, 10, null);`

希望有帮助！

# html - 用 HTML5 和 Css3 解决 IE8 中的问题的最佳解决方案是什么

> ID：13138759
> 
> 赞同：1
> 
> 时间：2012-10-30T12:14:22.003
> 
> 标签：html, css, internet-explorer-8

我有网站 HTML5、Css3 和 Jquery，在 IE9 中看起来不错，但在 IE8 中不好看

我在这里阅读了所有解决方案，并使用了所有方法，例如

*   CSS3 饼图

*   ie7-js

-

```
 <link rel="stylesheet" href="normal.css" type="text/css" />
  <!--[if lt IE 9]><link rel="stylesheet" type="text/css" href="ie8.css"><![endif]-->
  <!--[if lt IE 8]><link rel="stylesheet" type="text/css" href="ie7.css"><![endif]--> 
```

-

```
 <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js">          
  </script><![endif]-->   
  <script>
  document.createElement('header');
  document.createElement('nav');
  document.createElement('hgroup');
  document.createElement('section');
  document.createElement('article');
  document.createElement('aside');
  document.createElement('footer');
  </script> 
```

和....和....

我找不到在 IE8 中显示网站的最佳方式

任何帮助请。

网站：[moic-egypt.com](http://www.moic-egypt.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:58:57.587

我不会推荐 css3pie，它会导致一些副作用。

对于 html5 元素的样式问题，您正确使用了 shim/shiv（如[html5shiv](https://code.google.com/p/html5shiv/)），因此您不需要该`document.createElement`部分。这将解决大部分问题。

我不会为 IE 创建自定义 CSS 样式表，而是切换到[条件注释](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)，以便您可以在主 CSS 中添加特定的 ie 规则：

```
.ie #specificdiv { /* custom rule for ie */ } 
```

当您的项目变得更大时，您将不必浏览所有不同的工作表。

然后[ie9.js](http://code.google.com/p/ie7-js/)`:not` ，这是旧版 IE 不支持的 css 选择器（如）。

你还剩下 css3 属性。对于这些，恐怕您将不得不一一搜索后备/ polyfill。以下是一些不错的资源：

*   [html5请](http://html5please.com/)
*   [我可以用吗](http://caniuse.com/)
*   [跨浏览器 polyfill 列表](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

# android - MapView 顶部的 SurfaceView，Surface 无效

> ID：13138760
> 
> 赞同：0
> 
> 时间：2012-10-30T12:14:27.097
> 
> 标签：android, android-layout

我试图实现一个 MapView，在它上面是一个 SurfaceView，它们分别工作得很好，但是当我把它们都放在 FrameLayout 中时，我无法得到

> getHolder().getSurface().isValid()

作为真实。

XML:

> ```
> <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
> xmlns:tools="http://schemas.android.com/tools"
> android:layout_width="match_parent"
> android:layout_height="match_parent" > 
> ```

```
<FrameLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_alignParentRight="true" >

    <com.google.android.maps.MapView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="0Xja4jU2XxeYRsWmblq0ccK2EweYe469rQRgWFg"
        android:clickable="true"
        android:enabled="true" >
    </com.google.android.maps.MapView>

<com.example.tricorder.BallSurfaceView
    android:id="@+id/nixx"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     />

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="124dp"
        android:src="@drawable/ballz" />

</FrameLayout>
</RelativeLayout> 
```

SurfaceView 代码：

> 公共类 BallSurfaceView 扩展 SurfaceView 实现 Runnable {

```
float x, y, sensorX, sensorY, a, b, centerX, centerY;
int color = 0;
SurfaceHolder ourHolder;
Thread ourThread = null;
boolean isRunning = false;

public BallSurfaceView(Context context) {
    super(context);
    ourHolder = getHolder();
    x = y = sensorY = sensorX = 0;

}

public BallSurfaceView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    ourHolder = getHolder();
    x = y = sensorY = sensorX = 0;
    // TODO Auto-generated constructor stub
}

public BallSurfaceView(Context context, AttributeSet attrs) {
    super(context, attrs);
    ourHolder = getHolder();
    x = y = sensorY = sensorX = 0;
    // TODO Auto-generated constructor stub
}

public void pause() {
    isRunning = false;
    while (true) {
        try {
            ourThread.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        break;
    }
    ourThread = null;
}

public void resume() {
    isRunning = true;
    ourThread = new Thread(this);
    ourThread.start();
}

public void run() {
    // TODO Auto-generated method stub
    while (isRunning) {
        Surface sc = ourHolder.getSurface();
        if (!sc.isValid())
            continue;

        Canvas canvas = ourHolder.lockCanvas();
        //if (color == 0)
            //canvas.drawRGB(0, 0, 0);
    //  else if (color == 1)
            //canvas.drawRGB(127, 127, 127);
        //else
            //canvas.drawRGB(255, 255, 255);
        centerX = canvas.getWidth() / 2;
        centerY = canvas.getHeight() / 2;
        x += sensorX;
        y += sensorY;
        a = centerX + x;
        b = centerY + y;

        if (x > (1.5 * centerX)) {
            x = (float) (1.5 * centerX);
        }
        if (x <= (0.2 * centerX)) {
            x = (float) (0.2 * centerX);
        }
        if (y > (1.5 * centerX)) {
            y = (float) (1.5 * centerX);
        }
        if (y <= (0.2 * centerX)) {
            y = (float) (0.2 * centerX);
        }
        // if (a > canvas.getWidth())
        // a = canvas.getWidth();
        // if (b > canvas.getHeight())
        // b = canvas.getHeight();
        // if (a < 0)
        // a = 0;
        // if (b < 0)
        // b = 0;

        canvas.drawBitmap(GraphicActivity.ball, x, y, null);
        ourHolder.unlockCanvasAndPost(canvas);
    }
}

} 
```

MapActivity 中的 onCreate：

> protected void onCreate(Bundle savedInstanceState) {

```
 super.onCreate(savedInstanceState);
            mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    mMag = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);
    mAcc = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
    mLight = mSensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);

    ball = BitmapFactory.decodeResource(getResources(), R.drawable.ballz);
    ourSurfaceView = new BallSurfaceView(this);
    ourSurfaceView.resume();
    //ourSurfaceView = (BallSurfaceView) findViewById(R.id.nixx);
    setContentView(R.layout.activity_graphic);

    mapView = (MapView) findViewById(R.id.mapView);
    List mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.ballz);
    CustomItemizedOverlay itemizedOverlay = new CustomItemizedOverlay(
            drawable, this);

    GeoPoint point = new GeoPoint(37985339, 23716735);
    OverlayItem overlayitem = new OverlayItem(point, "Hello",
            "I'm in Athens, Greece!");

    itemizedOverlay.addOverlay(overlayitem);
    mapOverlays.add(itemizedOverlay);

    MapController mapController = mapView.getController();
    mapController.animateTo(point);
    mapController.setZoom(6);
} 
```

我总是到达

> if (!sc.isValid())

并将 sc.isValid() 设为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:20:34.197

没关系，我让它工作了。问题是我没有像这样将XML中的surfaceview链接到surfaceview实例：

> ourSurfaceView = (BallSurfaceView) findViewById(R.id.nixx);

然后，我不需要创建 ourSurfaceView 的“新”实例。

# android - 如何显示特定时间段的图像？

> ID：13138765
> 
> 赞同：-1
> 
> 时间：2012-10-30T12:14:45.200
> 
> 标签：android

在我的应用程序中，我需要解密特定的消息格式，以提取消息 ID、超时等信息。我需要为给定的 ID 显示相应的图像，并在提到的时间段内显示它。为此，我创建了一个自定义布局来显示图像和其他细节。我正在使用 imageview 来显示图像。但不知道如何为此设置timeiut？有人对此有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:26:19.537

你可以很容易`Handler`地做到这一点，像这样

```
 imageuser.setImageBitmap(bitmapObject);
                new Handler().postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        imageuser.setImageBitmap(null);
                    }
                }, 5000); 
```

在这里，`imageuser`是您的`ImageView`并替换`5000`为您的特定时间（以毫秒为单位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:24:13.963

就像每当你想显示图像时使用它，只需调用你的 UI 并在你想显示图像的给定时间启动一个线程，当时间完成时，只是让那个 ui 可见性消失，这是逻辑以你自己的方式尝试. 谢谢

# grails-2.0 - 在 Spock 中的项目列表上断言

> ID：13138769
> 
> 赞同：6
> 
> 时间：2012-10-30T12:15:09.017
> 
> 标签：grails-2.0, spock

将 Spock 0.7 与 Grails 2.04 一起使用。尝试搭建测试环境。我需要一些关于测试对象列表的帮助。

我有一个位置对象列表。我想测试每个对象的日期。我正在迭代但不确定如果日期不相等如何使测试失败。有没有一种测试列表中对象的好方法？我在我当时的代码块下面列出了。

```
then:
        weatherList != null
        weatherList.empty != null
        weatherList.size() == 3
        weatherList.each {
            Calendar today = Calendar.getInstance();
            today.clearTime()
            if(it.forecastDate != today) {
                return false
            }
        } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-30T12:57:59.090

解决方案可能如下所示（内联注释）：

```
// avoid testing with real dates if possible
def today = Calendar.getInstance().clearTime() 

when:
...

then:
weatherList != null
weatherList.size() == 3
// does this list really contain Calendar objects?
weatherList.every { it.forecastDate == today }
// OR, for a potentially better error message
weatherList.each { assert it.forecastDate == today } 
```

# javascript - 使用 LDAP 连接 Node JS

> ID：13138770
> 
> 赞同：2
> 
> 时间：2012-10-30T12:15:16.240
> 
> 标签：javascript, node.js, ldap

如何使用节点 js 连接到 LDAP？请帮助提供示例代码。我无法像帖子[https://stackoverflow.com/questions/13134177/connect-ldap-using-node-js-segmentation-fault-error](https://stackoverflow.com/questions/13134177/connect-ldap-using-node-js-segmentation-fault-error)那样连接 LDAP 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:26:32.637

我更喜欢你[node-LDAP](https://github.com/jeremycx/node-LDAP)。

在您的应用程序中，您可以使用以下结构

```
var ldap = require('LDAP');
var ldapObj = new ldap({ uri: 'ldap://your_server', version: 3});

//check your connection
ldapObj.open(function(err) {
    if (err) {
       throw new Error('Connection problem occured!');
    }
    console.log("Connected to ldap");

});

//Search
search_options = {
    base: '',
    scope: '',
    filter: '',
    attrs: ''
}

ldapObj.search(search_options, function(err, data){
   if (err) {
      throw new Error('Search filed');
   } else {
      console.log("Search result:" + JSON.stringify(data))
   }

}); 
```

有关 search_options 的更多详细信息，您可以参考[此处](https://github.com/jeremycx/node-LDAP#ldapsearch)

替代选项**node-ldapjs**在[这里](https://github.com/mcavage/node-ldapjs)

# php - HTML 不工作 - PHP/GD 库

> ID：13138771
> 
> 赞同：1
> 
> 时间：2012-10-30T12:15:19.943
> 
> 标签：php, gd

我想在生成图像的页面上有一个“打印此图像”按钮。我尝试将 html 代码放在我的**image.php**文件中（请参阅下面的代码），但它不会显示。有人说尝试将html和php代码分开。我尝试 `<img src="image.php" alt="" />`在另一个名为**generate.php**的文件上使用代码，但我得到的只是一个损坏的图像。请帮忙！:(

这是我的**image.php**文件的代码：

```
$num_fields = $_POST['num_fields'];
// create image
$image = imagecreate(500, 500);

// allocate some colors
$white    = imagecolorallocate($image, 255, 255, 255);
$pink     = imagecolorallocate($image, 255, 105, 180);
$red = imagecolorallocate($image, 255, 000, 000);
$green     = imagecolorallocate($image, 034, 139, 034);
$brown = imagecolorallocate($image, 139, 069, 019);
$yellow      = imagecolorallocate($image, 255, 255, 000);
$orange  = imagecolorallocate($image, 255, 140, 000);
$blue  = imagecolorallocate($image, 100, 149, 237);
$purple  = imagecolorallocate($image, 218, 112, 214);
$gray  = imagecolorallocate($image, 205, 205, 193);
$black    = imagecolorallocate($image, 000, 000, 000);
$cyan    = imagecolorallocate($image, 000, 255, 255);

//bg color//
imagefilledrectangle($image,0,0,500,500,$white);

$font = 'arial.ttf'; 

if($num_fields =='6')
{ 
// for each slices
imagefilledarc($image, 250, 250, $_POST['rating-1'], $_POST['rating-1'], 0, 60, $pink, IMG_ARC_EDGED);
imagefilledarc($image, 250, 250, $_POST['rating-2'], $_POST['rating-2'], 60, 120 , $green, IMG_ARC_EDGED);
imagefilledarc($image, 250, 250, $_POST['rating-3'], $_POST['rating-3'], 120, 180 , $red, IMG_ARC_EDGED);
imagefilledarc($image, 250, 250, $_POST['rating-4'], $_POST['rating-4'], 180, 240 , $gray, IMG_ARC_EDGED);
imagefilledarc($image, 250, 250, $_POST['rating-5'], $_POST['rating-5'], 240, 300 , $orange, IMG_ARC_EDGED);
imagefilledarc($image, 250, 250, $_POST['rating-6'], $_POST['rating-6'], 300, 360 , $blue, IMG_ARC_EDGED);

//outline
imagefilledarc($image, 250, 250, 400, 400, 0,360, $black, IMG_ARC_NOFILL); //outer circle
imagefilledarc($image, 250, 250, 320, 320, 0,360, $black, IMG_ARC_NOFILL); //inner circle
imageline($image, 250, 250, 450, 250, $black ); //line bet blue and pink 0 deg
imageline($image, 250, 250, 349, 78, $black ); //line bet orange and blue
imageline($image, 250, 250, 150, 78, $black ); //line bet orange and gray 
imageline($image, 250, 250, 50, 250, $black ); //line bet red and gray 
imageline($image, 250, 250, 151, 422, $black ); //line bet red and green 
imageline($image, 250, 250, 350, 422, $black ); //line bet pink and green 

//text legends 2
imagettftext($image, 9, 243, 425, 280, $black, $font, $_POST['field-1']);
imagettftext($image, 9, 183, 315, 415, $black, $font, $_POST['field-2']);
imagettftext($image, 9, 120, 130, 380, $black, $font, $_POST['field-3']);
imagettftext($image, 9, 60, 75, 210, $black, $font, $_POST['field-4']);
imagettftext($image, 9,0, 200, 80, $black, $font, $_POST['field-5']);
imagettftext($image, 9, 300, 378, 128, $black, $font, $_POST['field-6']);

// flush image
header('Content-type: image/png');
imagepng($image);
imagedestroy($image);   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:24:57.847

我有点不清楚你想要什么，但是......你展示的代码只是制作图像。除此之外，您需要一个由某种脚本语言制作的 html 页面，该页面将查询转发到您的 image.php，例如（这是非常老式的 php 编码，看起来很难看，但它应该可以工作）

```
<html>
<head><title>My image</title></head>
<body>
<img src="image.php?<?php
    print"num_fields=${_POST['num_fields']}&rating-1=${_POST['rating-1']}&rating-2=${_POST['rating-2']}&rating-3=${_POST['rating-3']}&rating-4=${_POST['rating-4']}&rating-5=${_POST['rating-5']}&rating-6=${_POST['rating-6']}&field-1=${_POST['field-1']}&field-2=${_POST['field-2']}&field-3=${_POST['field-3']}&field-4=${_POST['field-4']}&field-5=${_POST['field-5']}&field-6=${_POST['field-6']}"
?>
" alt="" /> 
</body>
</html> 
```

（“我的图片”部分当然可以是您喜欢的任何页面标题）

现在您可以开始在 and 标记之间添加更多内容。如果您在现有文件中添加一些 html 输出，它将被忽略或使您的图像无效。

# certificate - 已签名的驱动程序在设备管理器中显示为未签名

> ID：13138772
> 
> 赞同：5
> 
> 时间：2012-10-30T12:15:25.073
> 
> 标签：certificate, driver, windows-server-2008-r2, sign

我们的软件使用签名驱动程序，一切正常。但由于某些原因，此驱动程序在设备管理器中显示为未签名。在我们的案例中，这会在 Windows Server 上的故障转移群集验证报告中产生不需要的警告，这可能会让我们的客户感到有些困惑。什么可能导致这种行为？谢谢。

![在此处输入图像描述](../Images/029caad0dc846b2a92aa95dead7347c0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-09T11:31:59.663

找到解决方案！
问题在于缺少交叉证书
签名应该如下所示：

```
signtool sign /v /f "Cert.pfx" /p pwd /ac "Cross.cer" /t "http://timestamp.server" driver.sys 
```

交叉证书本身可以在这里找到 - [http://msdn.microsoft.com/en-us/library/windows/hardware/dn170454(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/dn170454(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T22:56:27.220

我一直在努力解决同样的问题并找到了部分解决方案。我们使用 makecat 从 .cdf 文件创建目录文件，但后来我切换到使用 Inf2Cat 并在 INF 文件中添加了 CatalogFile 条目，它有效 - 或至少部分有效。问题是即使驱动程序在“数字签名”选项卡中显示为签名者，但当您单击该选项卡内的“驱动程序详细信息”按钮时，下一个对话框仍将驱动程序显示为未签名。

哦，好吧，这是进步。也许有人会回来提供有关此的更多信息。

# c# - 使用 linq to xml 加载列表

> ID：13138773
> 
> 赞同：0
> 
> 时间：2012-10-30T12:15:25.793
> 
> 标签：c#, xml, linq, linq-to-xml

我正在尝试从 xml 加载列表。每个节点都有几个节点。我知道可以在下图中的 foreach 循环中执行此操作，但我想避免使用循环。

这是我不想要的，但没有循环： ![在此处输入图像描述](../Images/c57e9eeb1fe811fae69a8812a3a1d2e9.png)

我看到了这个例子，但它只适用于一个节点“id”。 [如何将 XML 转换为 List<string> 或 String[]？](https://stackoverflow.com/questions/956749/how-can-i-transform-xml-into-a-liststring-or-string)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:19:07.123

```
var contacts = from c in xdoc.Descendants("contact")
               select new Contact()
               {
                  GUID = (string)c.Element("Guid"),
                  Name = (string)c.Element("Name"),
                  Email = (string)c.Element("Email"),
                  PhoneNumber = (string)c.Element("PhoneNumber")
               }; 
```

`xdoc`类的实例在哪里`XDocument`。

# sql-server - 在 SQL Server Management Studio 中对锁定表进行调试期间执行 SQL 查询

> ID：13138774
> 
> 赞同：0
> 
> 时间：2012-10-30T12:15:25.840
> 
> 标签：sql-server, debugging

是否可以在调试 T-SQL 语句期间以某种方式对表执行查询？它当时已锁定其他连接，因此使用其他窗口无济于事。

我正在尝试调试`INSTEAD OF UPDATE`触发器，但某些东西没有按预期工作，我想评估另一个 SQL 表达式以进行调查。

我认为我也许可以编写一个游标来循环表格和`print`我需要的信息，但我宁愿避免这种情况并使用更简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:23:56.850

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
SELECT ..
  FROM .. 
```

或者

```
SET TRANSACTION ISOLATION LEVEL READ SNAPSHOT;
SELECT ..
  FROM .. 
```

在此处查看[事务隔离](http://msdn.microsoft.com/en-us/library/ms173763.aspx)级别。
第一个将允许访问“脏”未提交的数据，而第二个将跳过未提交的数据。但是，**两者都**不会在触发器中看到数据`INSTEAD OF UPDATE`，因为它甚至还没有出现在表格中。

# ajax - 使用 knockoutjs 构建动态表单

> ID：13138778
> 
> 赞同：5
> 
> 时间：2012-10-30T12:15:38.430
> 
> 标签：ajax, asp.net-mvc-3, knockout.js, json.net, form-post

我需要从数据库构建一个动态表单。我有以下实体来动态定义表单字段：

```
 public class FormField {
        public int ID { get; set; }
        public string Name { get; set; }
        public string Type { get; set; }    // Possible values are: 'Radio','Combo','Text'. A dropdown will be created for a Combo type of element, a radio set for Radio type of element and a text input for Text type of element.
        public string Options { get; set; } // Only relevant in case of Radio/Combo type
        public string Default { get; set; } // Default value in case of Type 'Text' and selected value in case of Type 'Radio/Combo'
        public string Blankout { get; set; }// An expression to define when this field should be hidden 
    }

    /* A sample JSON array (from the DB) to build the form would be:
       [
        { Name:"Gender", Type:"radio", Options:["Male","Female","Unknown"], Default:"Male", Blankout:"Never" },
        { Name:"Age", Type:"text", Options:"None", Default:15, Blankout:"Never" },
        { Name:"Neighbourhood", Type:"Combo", Options:["Eastern","Western","Northern","Southern","Central"], Default:"Central", Blankout:"if (Age < 40 or Voted='Obama')" },
        { Name:"Voted", Type:"Combo", Options:["Obama","Romney","Harry Potter"], Default:"Harry Potter", Blankout:"if ((Gender='Female' and Age < 15) or Neighbourhood='Eastern'" }
       ]
    */ 
```

我可以从 DB 中的“FormField”记录构建动态表单，但问题是我需要跟踪任何表单字段的值的变化，当值发生变化时，我需要将所有表单数据发送到服务器（异步）以评估服务器上的“Blankout”公式。如果我在没有 KnockoutJS 的情况下执行此更改跟踪，它不会响应并且变得非常复杂。我已经阅读了几个 KnockoutJS 教程，但无法弄清楚如何针对这个特定问题组织我的 ViewModel。

任何帮助，将不胜感激。

**更新 1**

我尝试使用以下代码将此表单数据发布到控制器：

```
 $.ajax({
            type: "POST",
            url: "/MyController/GetBlankoutElements",
            contentType: 'application/json',
            dataType: 'json',
            data: JSON.stringify(ko.toJSON(self)),
            success: function(result) {
                alert(result);
                //self.HiddenElements(result.split(','));
            }
    }); 
```

在我的控制器中，我尝试了以下代码：

```
 [HttpPost]
    public ActionResult GetBlankoutElements(List<MyFieldViewModel> Fields)
    {
        return Json(Fields); // List, Fields is null here
    } 
```

她是 MyFieldViewModel 类的样子：

```
 public class MyFieldViewModel 
    {
        public string Title { get; set; }
        public string Name { get; set; }
        public string Type { get; set; }
        public string Default { get; set; }
        public string[] Options { get; set; }
    } 
```

我已经尝试过[通过 JSON 将对象数组发布到 ASP.Net MVC3 中描述的技巧](https://stackoverflow.com/questions/4789481/post-an-array-of-objects-via-json-to-asp-net-mvc3)

*以下是我执行alert(ko.toJSON(self))*时打印出来的 Json 数据

 *```
 {"Fields":
        [{"Title":"CCType","Name":"CCType","Type":"Radio","Default":"Enterprise","Options":["Enterprise","Express","CVP","PCCE"]},{"Title":"Industry","Name":"Industry","Type":"Combo","Default":"Banks","Options":["Banks","ServiceProvider","Outsourcer","Airlines","Utilities","Government","Retail"]},{"Title":"Customer Lab","Name":"CustomerLab","Type":"Combo","Default":"0","Options":["0","1"]},{"Title":"No of Agents","Name":"Agents","Type":"Text","Default":"if(c.CCType==\"CVP\") then 10 else 25","Options":[]},{"Title":"ExpLicType","Name":"ExpLicType","Type":"Radio","Default":"if(c.CCType==\"Express\") then \"Enhanced\" else \"None\"","Options":["None","Premium","Standard","Enhanced"]},{"Title":"Multimedia","Name":"Multimedia","Type":"Combo","Default":"WIM","Options":["None","EIM","WIM","EIM&WIM","BSMediaRouting","MCAL"]}],
     "HiddenElements":[]
    } 
```

我需要的只是用户选择的字段名称和它的值，即使我将这个 json 数据映射到我的*MyFieldViewModel*类，我仍然感到困惑，我仍然如何获得选择的 VALUES ？

**更新 2** *（JSON 数据映射工作）*

当我改变

```
 data: JSON.stringify(ko.toJSON(self)) 
```

带数据：ko.toJSON(self)

映射在我的控制器上完美运行，您可以在以下屏幕截图中看到： ![从 post json 数据调试映射列表对象的屏幕截图](../Images/88a36364649bac2ff407e75397708e81.png)

现在，问题仍然存在，发布表单的全部目的是用用户在表单上的输入更新服务器，即针对每个表单字段元素的值。 **如何发布表单字段的当前选定/键入值？** 例如，在上面的屏幕截图中，我可以看到默认值，但看不到当前选择的值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T12:54:49.743

要跟踪您可以使用`dirty flag`本文中的更改：[http](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html) ://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html 。

创建以下视图模型：

```
function FormField(data) {
    var self = this;

    self.Name = ko.observable(data.Name);
    self.Type = ko.observable(data.Type);
    self.Options = ko.observableArray(data.Type != 'text' ? data.Options : []);
    self.Default = ko.observable(data.Default);
}

function ViewModel(data) {
    var self = this;

    self.Fields = ko.observableArray(ko.utils.arrayMap(data, function(item) {
        return new FormField(item);
    }));

    self.dirtyFlag = new ko.dirtyFlag(this);

    self.isDirty = ko.computed(function (){
        if (self.dirtyFlag.isDirty())
        {
            alert("Value changed!");
            // Do async update.
        }
    });
} 
```

html标记：

```
<div data-bind="foreach: Fields">
    <b data-bind="text: Name"></b>
    <!--ko if: Type() == "combo"-->
        <select data-bind="options: Options, value: Default"></select>                 <!--/ko-->
    <!--ko if: Type() == "radio"-->
        <div data-bind="foreach: Options">
            <input type="radio" value="cherry" data-bind="value: $data, checked: $parent.Default" />
            <span data-bind="text: $data"></span>
        </div>
    <!--/ko-->    
    <!--ko if: Type() == "text"-->
        <input type="text" data-bind="value: Default"></input>                 
    <!--/ko-->   
    <br/>    
</div> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/CWTTR/](http://jsfiddle.net/vyshniakov/CWTTR/)

编辑：

如果我理解正确，以下是您的问题的答案：

要将所有字段发布到服务器，您可以使用`ko.toJSON(self)`函数。您的 ajax 调用如下所示：

```
 $.ajax({
        type: "POST",
        url: "controller/action",
        contentType: 'application/json',
        data: JSON.stringify(ko.toJSON(self)),
        success: function(result) {
            self.HiddenElements(result);
        }
    }); 
```

查看更新的小提琴，看看如何根据服务器的响应隐藏一些字段：http: [//jsfiddle.net/vyshniakov/CWTTR/1/](http://jsfiddle.net/vyshniakov/CWTTR/1/)。*

# android - Android：使列表视图顶部的视图与列表视图一起滚动

> ID：13138779
> 
> 赞同：8
> 
> 时间：2012-10-30T12:15:42.970
> 
> 标签：android, android-listview, android-custom-view, android-scroll

我有一个显然可以滚动的列表视图。列表视图包含一些表单问题。一旦用户提交了表单，我们就会在列表视图的顶部放置一个看起来像邮票的自定义视图（并阻止用户回答问题，但这并不重要）。

标记应该出现在列表视图的顶部（如屏幕顶部）并且可以以与列表视图相同的速度滚动，即当最初位于其下方的列表视图项目在屏幕顶部消失时，它应该消失滚动。

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T17:17:55.240

我找到了解决方案。不确定它是否太优雅，但它可以工作，所以除非有人想出更好的东西，否则它会离开它。

我想与列表一起滚动的视图是自定义视图，它必须了解列表视图。所以我在它上面实现了一个 setListView(ListView listView) 方法：

```
private int scrollY; //1
private Map<Integer, Integer> listViewItemHeights = new Hashtable<>();
public void setListView(final ListView listView) {
    listView.setOnScrollListener(new OnScrollListener() {  //2
        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {} //3

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) { //4
            View c = listView.getChildAt(0);
            if (c != null) {
                int oldScrollY = scrollY;
                scrollY = -c.getTop();

                listViewItemHeights.put(listView.getFirstVisiblePosition(), c.getHeight());
                for (int i = 0; i < listView.getFirstVisiblePosition(); ++i) {
                    if (listViewItemHeights.get(i) != null)
                        scrollY += listViewItemHeights.get(i);
                }
                scrollBy(0, scrollY - oldScrollY);
            }
        }
    });
} 
```

评论 1：这是一个变量，让我可以跟踪当前滚动位置。

评论 2：设置一个新的滚动监听器，让我的自定义视图知道何时列表

注释 3：在这种情况下不需要执行。

评论 4：这就是魔法发生的地方。注意最后我通过scrollY-oldScrollY滚动我的视图，让我先从这一点开始。oldScrollY 是保留的滚动位置，scrollY 是新的。我需要滚动它们之间的差异。至于如何计算scrollY，我在这里向您推荐我的答案：[Android 在 ListView 中获取准确的滚动位置](https://stackoverflow.com/questions/10808387/android-getting-exact-scroll-position-in-listview/13415273#13415273)，这是在列表视图中计算滚动位置的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T12:20:40.000

对于顶部屏幕的视图，您可以添加 headerview 以便将自定义布局绑定为 listview 的 headerlayout ..所以您的滚动与 listview 相同...

```
View headerview = ((LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.track_footer_view, null, false);
    listview.addHeaderView(headerview); 
```

# php - 网站的 Facebook 访问令牌

> ID：13138785
> 
> 赞同：0
> 
> 时间：2012-10-30T12:16:13.843
> 
> 标签：php, facebook, facebook-graph-api

我正在开发一个网络应用程序，让您可以查看您的 Facebook 墙贴，并以 Facebook 页面而非用户的身份重播/评论这些帖子。我遇到的问题是我找不到合适的令牌或验证方法来这样做。我正在寻找的功能是一定数量的用户登录我的应用程序并能够作为该页面发布到 Facebook 页面墙。我试图做一个长期访问令牌的事情，但它似乎过期得太早了。完成此类任务的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:22:01.457

如果您使用的是授权令牌，您必须这样做；这是你能做的最好的。Offline_access 不再可用。一个解决方案当然是定期刷新授权令牌。为此，用户需要再次登录应用程序。您可以（并且应该）每次刷新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:26:46.840

*   起初使用用户访问令牌，您不能将帖子或任何操作作为页面发送。如果要将评论作为页面发布，则需要获取页面访问令牌
*   您可以获得您需要`manage_pages`的页面访问令牌拳头。在此之后您可以使用这里获得特定的页面访问令牌`graph API`是一种方法

[https://developers.facebook.com/tools/explorer/?method=GET&path=me%3Ffields%3Daccounts](https://developers.facebook.com/tools/explorer/?method=GET&path=me%3Ffields%3Daccounts) 或

```
me?fields=accounts 
```

现在使用此帐户/页面帐户访问令牌发布每个操作，现在它会自动作为页面发布，因为您使用页面访问令牌

# hook - Win 7 x64 上的 MS Detours 3.0？

> ID：13138793
> 
> 赞同：3
> 
> 时间：2012-10-30T12:16:35.627
> 
> 标签：hook, detours

我想详细了解 win api hooking。这是来自 MS Detours 3.0 下载页面的引用：

> Detours Express 3.0 可在免费、点击许可下立即下载，用于研究、非商业和非生产用途。Detours Express 仅限于 x86 处理器上的 32 位进程。

我正在使用 Win 7 x64。这是否意味着 Detours（至少是免费版）对我没用？我之所以问，是因为我阅读了很多推荐 MS Detours 的帖子，但现在我认为几乎每个人都在使用 x64 机器。

有人在 x64 操作系统上使用过它吗？它有效吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T03:32:26.333

MS Detours x64 是一个非常昂贵的商业包。另一种选择是 MHook 或 EasyHook。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-25T02:46:02.747

微软最近在 MIT 许可下在[GitHub 上](https://github.com/Microsoft/Detours)[发布](https://www.microsoft.com/en-us/research/project/detours/)了源代码。 它包括对 x86、x64、IA64 和 ARM 架构以及一些[示例](https://github.com/Microsoft/Detours/wiki/Samples)的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T17:42:16.327

我写了一个工具 D Probe，支持 x86/x64 hooking，但它不是 hook 库，它是一个带有 API 过滤器 SDK 的动态跟踪工具，所以它必须集成到 D Probe 控制台中，不能链接到其他应用程序中独立模块，如 detours 或 easyhook，如果你想试一试，请到我的个人资料页面获取下载链接。

# java - 将 Objects#hash(Object...) 用于 hashCode 方法？

> ID：13138802
> 
> 赞同：2
> 
> 时间：2012-10-30T12:16:52.870
> 
> 标签：java, java-7

您如何看待`Objects#hash(Object...)`在`hashCode()`方法中使用？

```
int a = 1; 
boolean b = true; 
Date c = new Date(); 
String d = "1234";
Object e = new ch.example.blabla.Foo();

// Java 7
public int hashCode() {
  return Objects.hash(a, b, c, d, e);
}

// or using Java 6 
public int hashCode() {
  return Arrays.hashCode(new Object[] {a, b, c, d, e});
} 
```

当然一般情况下也有`equals(Object)`方法等。Joshua Bloch 在他的书中写道，如何`hashCode()`使用他的规则/配方（例如移位等）编写一个好的方法。

上面的示例不遵循原始数据类型的这些规则......所以我的问题是，可以处理对象（自动装箱）等原始数据类型而不是遵循 Bloch 的配方或使用 Apache Commons`HashCodeBuilder`吗？

`Objects#hash(Object...)`在 Java 7 中引入并且仅调用`Arrays.hashCode(Object[])`，所以这个问题也针对 Java 6 用户。

感谢您的回复/想法/建议！

* * *

**我真的不明白什么时候旧的问题因为新的问题而被重复关闭。**

但是，这里有一个问题**有更好的答案**：

*   [使用 Objects.hash() 还是自己的 hashCode() 实现？](https://stackoverflow.com/questions/45832458/use-objects-hash-or-own-hashcode-implementation)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T07:42:36.047

包装类如`Integer`,确实实现了 Joshua Bloch 的 Effective Java 中描述的规则`Double`。`Boolean`感谢 Marko Topolnik 强调这一点。

他还提到了可能导致性能问题的不利因素。然而，Jörn Horstmann 假设这可能会被现代 JVM 优化。

我们将采用这种方法 ( `Objects.hash(a, b, c)`)，因为它比编写我们自己的`hashCode()`方法更具可读性。如果真的有必要（如果我们遇到性能问题），我们会自己实现原始哈希码。

Marko，Jörn，感谢您的评论。如果您要写答案，我会将已接受的答案更改为最佳答案。

# android - Android - 安卓模拟器的任何替代品

> ID：13138803
> 
> 赞同：3
> 
> 时间：2012-10-30T12:16:55.850
> 
> 标签：android, eclipse, android-emulator

我开发 Android 应用程序。我使用 Eclipse IDE、Android SDK API 16。除了 BlueStacks 和 YouWave，我需要一个 Android 模拟器的替代品。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-19T06:54:57.773

目前有两种替换模拟器的最佳选择和一种改进它的选择：

1) 现在 Geymotion 已经有 Android 2.3 imagem 这使得 Bluestacks 相当过时。

> 适用于 Android 2.3 的 BlueStacks，但出于某种原因，您说您不想要这个。无论如何，它非常有用，因为没有其他模拟器既快速又能够使用 OpenGL ES 2.0 模拟 Android 2.3。如果您不喜欢他们的启动器，[您仍然可以使用它。](http://www.xda-developers.com/android/how-to-install-and-root-the-latest-bluestacks/)

2) [Genymotion](http://www.genymotion.com/)可能是 Android 4.x 中最好的。他们计划很快发布 2.3 映像。它在运行 Android 操作系统的 VirtualBox 中作为一个特殊的虚拟机工作。它非常快，集成到 Eclipse - 我还没有尝试过，adb 对我来说已经足够了。它比 Bluestacks 运行更流畅，并且有许多配置选项。Android 4.3 映像现在也可用。

3) 带有 Intel HAXM 驱动程序和 Intel Atom android 映像的默认模拟器。此选项适用于 Android 4.2，但不适用于 2.3，因此我不能真正推荐它。但在快速 PC 上，这是一个可行的选择，因为您有 Intel CPU。

我目前正在详细研究这些选项。如果您想了解更多信息，我已经[发布了有关 Bluestacks](http://android.kul.is/)的信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T12:49:37.893

鸸鹋很慢，我用我的手机。如果您在设置中将其设置为 USB 调试，然后通过 USB 连接它，我真的很喜欢这种方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T12:22:51.203

[从http://www.manymo.com/](http://www.manymo.com/)检查解决方案。它可能会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-31T15:04:44.220

检查我找到了解决方案

[http://www.bobbychanblog.com/2011/07/faster-android-emulator-alternative-using-virtualbox/](http://www.bobbychanblog.com/2011/07/faster-android-emulator-alternative-using-virtualbox/)

使用虚拟操作系统作为模拟器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-10T11:01:27.480

有 2 个不错的选择： 1\. AndroVM 是一个基于 Virtualbox 的项目。它真的很快，但配置起来有点复杂。2\. Youwave 快速简单。唯一的问题是，它不支持原生 ARM 代码。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-01-09T08:24:39.450

Checkout GenyMotion 它是基于 VirtualBox 的。它很容易配置（我几乎什么都没做）。启动、运行和部署应用程序的速度极快。它允许将您的网络摄像头用作应用程序的摄像头等。

如果您尝试 GenyMotion，请不要忘记回来并支持这个答案

# linux - 如何将标准错误输入标准输入？

> ID：13138808
> 
> 赞同：2
> 
> 时间：2012-10-30T12:17:32.613
> 
> 标签：linux, unix, ubuntu, upstart

> **可能重复：**
> [管道标准输出和标准错误到shell脚本中的两个不同进程？](https://stackoverflow.com/questions/9112979/pipe-stdout-and-stderr-to-two-different-processes-in-shell-script)

我有一个写入标准输出和标准错误的程序，我想将标准输出通过管道传输到`logger`命令的标准输入，并将标准错误传输到另一个`logger`命令的标准输入，其中设施、优先级和标记与第一个`logger`命令不同。

此命令在 Ubuntu 上的 upstart 脚本的 exec 节中运行。我也尝试过使用子shell，但它没有用。

知道我该怎么做吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:21:21.070

尝试这个：

```
logger 2>&1 | logger 
```

说明：`logger 2>&1`将标准错误（文件描述符 2）重定向到标准输出（文件描述符 1），然后`| logger`将其通过管道传输到`logger`命令的另一个实例的标准输入。

# blackberry - 如何从应用程序内部锁定黑莓设备？

> ID：13138809
> 
> 赞同：0
> 
> 时间：2012-10-30T12:17:33.387
> 
> 标签：blackberry

根据 BB 文档，我们有 ApplicationManger.locksystem(true); 但自 OS 4.7 起已弃用。当我尝试这个时，它不会抛出任何错误，但它不起作用。

有什么方法可以通过 OS 5.0 及更高版本以编程方式锁定 BB 设备？这个问题在这里：[如何以编程方式锁定 BLACKBERRY 设备（6.0）？](https://stackoverflow.com/questions/10682153/how-to-programatically-lock-blackberry-device6-0)是一样的。但是还没有人回答；所以我再次发布它。提前致谢。

# django - django admin过滤器和mongodb：渲染时捕获DatabaseError：数据库不支持此查询

> ID：13138816
> 
> 赞同：1
> 
> 时间：2012-10-30T12:18:03.500
> 
> 标签：django, mongodb, django-models, filter, django-admin

使用 django non-rel 1.3 和 MongoDB 作为数据库后端：

我正在尝试在相应的 django ModelAdmin 类中对 MyModel 类的字段（CharField）设置过滤器，如下所示：

`class MyModelAdmin(admin.ModelAdmin): list_filter = ('myfield',)`

但我得到的是：

`TemplateSyntaxError at /admin/myapp/mymodel`

`Caught DatabaseError while rendering: This query is not supported by the database.`

似乎 Django MongoDB 引擎不支持过滤器，但我没有找到有关的文档。

编辑：错误来自模板文件.../admin/templates/change_list.html，抛出它的行是第85行：

`{% for spec in cl.filter_specs %}{% admin_list_filter cl spec %}{% endfor %}`

我的模型是：

`class MyModel(models.Model): myfield=models.CharField(max_length='300')`

我的管理模型是：

`class MyModelAdmin(admin.ModelAdmin): list_filter = ('myfield',)`

并注册：

`admin.site.register(MyModel, MyModelAdmin)` .

调试代码，异常是由`check_query`basecompiler.py的方法抛出的。此方法验证是否`self.query.distinct or self.query.extra or self.query.having`为真，然后抛出异常（self.query.distinct 在感兴趣的查询对象中等于'True'，因此原因是这样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T21:24:53.797

我是 Python/Django 新手，但我设法通过从[https://github.com/django/django/blob/stable/1.4.x/django/contrib/admin/filters.py](https://github.com/django/django/blob/stable/1.4.x/django/contrib/admin/filters.py)复制 AllValuesFieldListFilter 来解决这个问题（make确保将您的分支更改为您的 Django 版本），然后我删除了对`distinct`. 不得不进口一堆东西。然后它工作。我还应用了@AlexeyMK 答案中的更改，使其再次与众不同。

对于 1.4：

```
from django.contrib.admin.filters import FieldListFilter
from django.contrib.admin.util import (get_model_from_relation, reverse_field_path, get_limit_choices_to_from_path, prepare_lookup_value)
from django.utils.translation import ugettext_lazy as _
from django.utils.encoding import smart_unicode, force_unicode

class MongoFieldListFilter(FieldListFilter):
def __init__(self, field, request, params, model, model_admin, field_path):
    self.lookup_kwarg = field_path
    self.lookup_kwarg_isnull = '%s__isnull' % field_path
    self.lookup_val = request.GET.get(self.lookup_kwarg, None)
    self.lookup_val_isnull = request.GET.get(self.lookup_kwarg_isnull,
                                             None)
    parent_model, reverse_path = reverse_field_path(model, field_path)
    queryset = parent_model._default_manager.all()
    # optional feature: limit choices base on existing relationships
    # queryset = queryset.complex_filter(
    #    {'%s__isnull' % reverse_path: False})
    limit_choices_to = get_limit_choices_to_from_path(model, field_path)
    queryset = queryset.filter(limit_choices_to)

    def uniquify(coll):  # enforce uniqueness, preserve order
      seen = set()
      return [x for x in coll if x not in seen and not seen.add(x)]

    self.lookup_choices = uniquify(queryset.order_by(field.name).values_list(field.name, flat=True))

    super(MongoFieldListFilter, self).__init__(field, request, params, model, model_admin, field_path)

def expected_parameters(self):
    return [self.lookup_kwarg, self.lookup_kwarg_isnull]

def choices(self, cl):
    from django.contrib.admin.views.main import EMPTY_CHANGELIST_VALUE
    yield {
        'selected': (self.lookup_val is None
            and self.lookup_val_isnull is None),
        'query_string': cl.get_query_string({},
            [self.lookup_kwarg, self.lookup_kwarg_isnull]),
        'display': _('All'),
    }
    include_none = False
    for val in self.lookup_choices:
        if val is None:
            include_none = True
            continue
        val = smart_unicode(val)
        yield {
            'selected': self.lookup_val == val,
            'query_string': cl.get_query_string({
                self.lookup_kwarg: val,
            }, [self.lookup_kwarg_isnull]),
            'display': val,
        }
    if include_none:
        yield {
            'selected': bool(self.lookup_val_isnull),
            'query_string': cl.get_query_string({
                self.lookup_kwarg_isnull: 'True',
            }, [self.lookup_kwarg]),
            'display': EMPTY_CHANGELIST_VALUE,
        } 
```

然后指定它以使用此过滤器，如下所示：

```
list_filter = (('myfield', MongoFieldListFilter),) 
```

这很好，因为不需要修补。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:03:13.557

Mongo-Db-Engine 不支持管理员过滤器所需的查询，如此处[所述](https://groups.google.com/forum/?fromgroups=#!topic/django-non-relational/yneQ6kbAM2g)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T08:31:41.350

发生错误是因为 Django Admin 的 list_filters`distinct()`在尝试确定哪些成员属于列表时使用 a 。

我们的（内部，hacky）解决方案是修补 django non_rel 以使不同的调用发生在内存中，而不是在数据库端。这绝不是“正确”的解决方案，我们也没有在除我们之外的用例中测试它，但总比没有好。

YMMV。

[https://github.com/BlueDragonX/django-nonrel/commit/4025327efbe5c17c6b77e0497c2b433819c42918](https://github.com/BlueDragonX/django-nonrel/commit/4025327efbe5c17c6b77e0497c2b433819c42918)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T14:16:42.850

所以基本上你只想从 mongo 中检索一些字段，不是吗？

看[教程](http://django-mongodb.org/tutorial.html#adding-some-templates)，我相信你必须在 Django View 或 Template

您也可以尝试[Google 群组](https://groups.google.com/forum/?fromgroups#!forum/django-non-relational)了解更多信息

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-30T14:19:36.207

是什么类型`myfield`的？你不能按关系排序。

# msbuild - Visual Studio 2012 - MSBuild 增量构建未检测到更改

> ID：13138820
> 
> 赞同：14
> 
> 时间：2012-10-30T12:18:27.903
> 
> 标签：msbuild, visual-studio-2012, incremental-build

我已经自定义了一个 MSBuild 项目，因此默认目标是一个类似于“BuildWithExternalReference”的新目标。这个新目标调用了另外两个目标；第一个是一个名为“BuildExternalReference”的自定义目标，它使用外部工具构建 DLL。构建的 DLL 是对主项目的引用，它是使用普通的“构建”目标构建的。我已经为“BuildExternalReference”目标设置了输入和输出属性，因此输入引用源文件，输出引用生成的 DLL。

在 Visual Studio 2012 和 Visual Studio 2010 中，构建在第一次被调用时可以正常工作。但是，在后续构建中，如果我更改外部源文件（由“BuildExternalReference”目标输入属性引用），那么 Visual Studio 2012 只会报告“构建：0 成功，0 失败，1 最新，0 跳过”。Visual Studio 2010 继续完美运行。此外，使用 MSBuild.exe 从命令行构建可以完美运行。

我知道 Visual Studio 2012 中的构建系统已更改，但我找不到有关更改执行增量构建方式的信息。

Visual Studio 2012 中是否有任何更改导致增量构建发生更改？

这是我正在使用的 csproj 文件的精简版本：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="BuildWithExternalTool" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup>
    <ExternalSourceFiles Include="..\ExternalSourceFiles\\*\*.cs" />
    <ExternalDll Include="..\ExternalSource\External.dll" />
  </ItemGroup>
  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
  <Target Name="BuildExternalTool" Inputs="@(ExternalSourceFiles);" Outputs="@(ExternalDll)">
    <Exec Command="C:\External\Path\To\Tool.exe" />
  </Target>
  <Target Name="BuildWithExternalTool">
    <CallTarget Targets="BuildExternalTool" />
    <CallTarget Targets="Build" />
  </Target>
</Project> 
```

**2012 年 11 月 1 日更新**

这是一个完整的自包含示例，它重现了该问题：

[https://skydrive.live.com/redir?resid=EA1DD6ACA92F9EFF!155&authkey=!ANhuqF_rrCgxpLE](https://skydrive.live.com/redir?resid=EA1DD6ACA92F9EFF!155&authkey=!ANhuqF_rrCgxpLE)

这是一个项目的解决方案。MSBuildIssueExample\MSBuildIssueExample.csproj 文件已自定义，因此有一个自定义默认目标。此默认目标调用自定义目标（称为“ExternalTool”），然后调用默认构建目标。

自定义 ExternalTool 目标写出一些消息以确保其正常工作，并且还将 MSBuildIssueExample\ExternalTool\Input.txt 文件的内容复制到 MSBuildIssueExample\ExternalTool\Output.txt 文件上。

Input.txt 文件是 ExternalTool 目标的输入，Output.txt 是输出。

要重新创建问题，请执行以下步骤：

1）在指定版本的Visual Studio中打开解决方案

2) 构建一次解决方案，以确保输出相对于输入是最新的

3) 修改 MSBuildIssueExample\ExternalTool\Input.txt 使其内容与 Output.txt 不匹配

4) 再次构建

当您在 Visual Studio 2010 中完成此过程时，将再次调用 ExternalTool 目标，并且 Input.txt 文件将被复制到 Output.txt 上。

在 Visual Studio 2012 中执行此过程时，不会调用 ExternalTool 目标，即使输入比输出新，因此 Input.txt 的内容不会写入 Output.txt。

但是，如果您执行 Rebuild（而不仅仅是 Build），那么 Visual Studio 的两个版本都可以按预期工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-16T10:25:03.033

来自 Microsoft 的反馈回答了这个问题：

“这是由于 VS 2012 中的变化，C#/VB 项目现在执行“快速更新检查”，允许他们跳过构建，而不是一直强制构建。然而，一个缺点是快速最新检查不考虑自定义目标，这就是未检测到您的增量更改的原因。如果您希望禁用“快速最新检查”，请将“DISABLEFASTUPTODATECHECK”设置为true项目文件中的 MSBuild 属性或作为启动 VS 的环境中的环境变量。”

[http://connect.microsoft.com/VisualStudio/feedback/details/770784/visual-studio-2012-msbuild-incremental-build-not-detecting-changes#details](http://connect.microsoft.com/VisualStudio/feedback/details/770784/visual-studio-2012-msbuild-incremental-build-not-detecting-changes#details)

所以基本上这是 Visual Studio 2012 中的一个重大变化，不幸的是似乎没有很好地记录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-12T21:26:46.603

这是一个老问题，但仍然相关。非常感谢您在这里提出。

我想提供我的研究结果。

您分享的示例显示了在 Visual Studio GUI 内和 devenv 命令行 ( `devenv .\MSBuildIssueExample.sln /build`)构建时的异常行为

但是，如果您将 csproj 文件替换为以下内容：

**MSBuildIssueExample.csproj**

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>8.0.30703</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{4EA8847D-262C-4937-8536-E526E9BAB1C7}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>MSBuildIssueExample</RootNamespace>
    <AssemblyName>MSBuildIssueExample</AssemblyName>
    <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Class1.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <Import Project="Custom.Targets" />
</Project> 
```

**自定义目标**

```
<?xml version="1.0" encoding="utf-8" ?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <CompileDependsOn>ExternalTool;$(CompileDependsOn)</CompileDependsOn>
    <CleanDependsOn>CleanOutput;$(CleanDependsOn)</CleanDependsOn>
  </PropertyGroup>
  <ItemGroup>
    <ExternalToolInputs Include="ExternalTool\Input.txt">
      <InProject>false</InProject>
    </ExternalToolInputs>
    <ExternalToolOutputs Include="ExternalTool\Output.txt">
      <InProject>false</InProject>
    </ExternalToolOutputs>
  </ItemGroup>
  <Target Name="ExternalTool" Inputs="@(ExternalToolInputs)" Outputs="@(ExternalToolOutputs)">
    <Message Text="ExternalTool target start, copying input file over output..." />
    <Copy SourceFiles="@(ExternalToolInputs)" DestinationFiles="@(ExternalToolOutputs)" />
    <Message Text="ExternalTool target end, copy successful" />
  </Target>
  <Target Name="CleanOutput">
    <Delete Files="@(ExternalToolOutputs)" ContinueOnError="true" />
  </Target>
</Project> 
```

那么行为就不一样了！

Visual Studio GUI 继续出现异常行为，**但是，使用 devenv 构建的命令行确实可以识别输入中的更改！**

另请注意，`msbuild`在命令行上运行而不是`devenv`在两个版本中都能正常工作。虽然msbuild还有其他问题...

**编辑**

GUI构建有一个解决方案，仅适用于外部文件量较小的情况。您将它们作为链接添加到项目中，并确保`Build Action`是`None`. 然后它在 GUI 中工作正常。

虽然，我只检查了`Custom.Targets`，但我很确定它也可以与原始版本一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-01T13:43:23.270

为了扩展标记的编辑，并且由于`None`-items 对我不起作用，这里是我可以在其他项目中导入的自定义目标文件的示例，它将文本文件读入属性（然后我可以在`DefineConstants`属性中使用)，这会将文本文件标记为`CoreCompile`目标的输入：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup>
    <CommonDefines>$([System.IO.File]::ReadAllText('$(SolutionDir)\_meta\definesFlags.txt'));$(CommonDefines)</CommonDefines>
  </PropertyGroup>

  <ItemGroup>
    <CustomAdditionalCompileInputs Include="$(SolutionDir)\_meta\definesFlags.txt" />
  </ItemGroup>

</Project> 
```

`CustomAdditionalCompileInputs`-items 被作为输入`Microsoft.Csharp.Core.targets`。

# iphone - 使用 UIRotationGestureRecognizer 旋转图像时出现问题？

> ID：13138826
> 
> 赞同：2
> 
> 时间：2012-10-30T12:19:02.667
> 
> 标签：iphone, ios5, uigesturerecognizer, cgaffinetransform, image-rotation

我正在尝试实施`UIRotationGestureRecognizer`for `UIImageView`。

```
UIRotationGestureRecognizer *rotateGesture = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotate:)];

[self.view addGestureRecognizer:rotateGesture]; 
```

在选择器方法中，我没有这个

```
-(void)rotate:(UIRotationGestureRecognizer *)gesture
{

    if ([gesture state] == UIGestureRecognizerStateBegan || [gesture state] == UIGestureRecognizerStateChanged) {
        selectedImage.transform=CGAffineTransformRotate(selectedImage.transform, gesture.rotation);

        [gesture setRotation:0];
    }

} 
```

使用上面的代码，图像正在旋转。但是，问题是，图像中心正在改变。这样，图像旋转看起来有点尴尬。

图像的初始中心`(277,653)` 在旋转时，值不断增加`(365,659)` ，然后又回到`(277,653)`。

可能是什么原因？怎么解决中心问题？如何使我的图像在`UIImageView`使用中心旋转`UIRotationGestureRecognizer`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:29:47.663

尝试使用

```
recognizer.rotation = 0; 
```

这是一个教程。希望能帮助到你

[关联](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)

# asp.net - 如何使 WCF 服务不反序列化消息并将其发送到下一个服务？

> ID：13138834
> 
> 赞同：1
> 
> 时间：2012-10-30T12:19:38.830
> 
> 标签：asp.net, wcf, serialization, azure-web-roles

我的系统如下所示：

![在此处输入图像描述](../Images/06c9bf95bcab81f7564417f622248128.png)

我需要从 to 发送消息`Management portal`来`WCF Service 1`控制 Web 应用程序（清除缓存等）。

这里的问题是消息必须通过`WCF Service 2`。我不能`WCF Service 2`像其他两个组件（`Management portal`和`WCF Service`）那样频繁地更新，所以我必须制定某种通用方法，在`WCF Service 2`这种方法中，只需将消息重新发送到`WCF Service 1`而不关心它。

如何使`WCF Service 2`充当和之间的`Management portal`代理`WCF Service 1`？

（注意：我不能直接调用服务 1，因为服务 2 负责加密、日志记录等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:27:08.387

一些想法取决于您可能有什么其他要求

1.  使用 WCF[路由器服务](http://msdn.microsoft.com/en-us/library/ee517423.aspx)，因为这只会传递您的消息。它的主要用途是基于内容的路由（在标头甚至消息内容上）。您可以在行为/扩展中实现任何自定义代码。路由器很好，因为您可以通过配置完成大部分工作。

2.  更改 WCF Service 2 的合同以接受[Message](http://msdn.microsoft.com/en-us/library/ms734675.aspx)。这可以防止它序列化和反序列化为 .Net 对象，并且基本上接受任何请求并将其转发。

    ```
     [ServiceContract]
    public interface IService2
    {
    //pass message to Service1
    [OperationContract]
    void MyMethod(Message m);
    } 
    ```

3.  扩展 ClientMessageFormatter 和 DispatchMessageFormatter 以覆盖默认的序列化实现。仅当您想更改其被序列化/反序列化的*方式或是否要进行序列化/反序列化时。*这可能不是您要寻找的东西 - 但我想我还是会提到它，因为您的问题提到您想要一个挂钩到 WCF 中您可以更改此行为的位置。有关详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ff183867.aspx)。

# symfony - Symfony2 Basic Auth Athentication 除了 localhost

> ID：13138839
> 
> 赞同：0
> 
> 时间：2012-10-30T12:20:19.703
> 
> 标签：symfony

我想在我的项目中配置我的 security.yml 以要求来自除 localhost 之外的所有主机的基本身份验证？可能吗？我试图在网上找到解决方案，但无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:04:02.297

您可以创建一个请求匹配器。

您可以按照这个很棒的教程启用请求匹配器[http://php-and-symfony.matthiasnoback.nl/2012/07/symfony2-security-using-advanced-request-matchers-to-activate-firewalls/](http://php-and-symfony.matthiasnoback.nl/2012/07/symfony2-security-using-advanced-request-matchers-to-activate-firewalls/)

仅遵循“创建高级请求匹配器”和“在安全配置中挂钩请求匹配器”部分。

您的匹配方法如下所示：

```
return 'localhost' == $request->getHost(); 
```

# performance - 光线追踪的性能

> ID：13138841
> 
> 赞同：2
> 
> 时间：2012-10-30T12:20:23.393
> 
> 标签：performance, graphics, time-complexity, raytracing

我想知道我们是否可以制定光线追踪的性能。在我的原始光线追踪器中，性能主要取决于这个公式：宽度 x 高度 x 采样器数量 x（物体数量 + 灯光数量）

比如，在皮克斯或其他任何大公司，他们是否遵循这样的公式来进行绩效评估。性能不取决于对象的三角形数吗？例如，如果我想大致计算 1000x1000 帧的最大渲染时间，平均 500 个对象由 5.000.000 个三角形组成，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:52:50.073

用于严肃工作的光线追踪器使用各种加速方法，使它们与对数（三角形）成正比，而不是三角形的数量。有时也与灯光的数量相关（不包括不能影响场景部分的灯光，一次对所有灯光进行集体采样，诸如此类）。

另一方面，材质变化（即使是固定的分辨率和场景几何）也可以产生很大的变化。例如，使事物或多或少反射/折射可能会对场景的平均“光线深度”产生很大的变化。

一般来说，对于一组给定的几何体、灯光和材质，时间应该与光线的总数（即分辨率和采样率）成线性比例，但是对于在读取时部分序列化的非常大的场景，这可能会被抛弃场景输入（可能是 GB 和 GB 的解析）和从磁盘或网络读取纹理（我们通常有引用 >> 1 TB 纹理的场景）。

所以总体而言，您会期望时间与以下方面有些相关：

场景 I/O + xres * yres * 样本 * (shading_factor + texture_factor + log(triangles)) + texture_I/O

与您的材质有关的 I/O 数量以及任意着色和纹理因素可能会让您难以准确预测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:25:04.093

你只能有性能的上限。
例如，如果所有多边形（三角形或其他）都不在视图中，则计算会非常快。
但是，如果您想计算上限，您需要定义算法细节：您使用的是行进立方体吗？你删除背面多边形等...
但是对于特定的算法，计算应该非常简单。

ps 对象的数量仅与它们所有多边形的总和无关。

# c# - 在linq查询中循环遍历数组

> ID：13138845
> 
> 赞同：3
> 
> 时间：2012-10-30T12:20:37.663
> 
> 标签：c#, linq

大家好，我有一个使用 Linq 的查询，它返回一组记录，其中一个是国家 ID，我还有一系列所需的国家。有没有办法循环遍历国家数组并查看 id 是否在结果中，我想做这样的事情

```
results = from r in results 
where
//jump to my c# array
for(int x = 0;x < array.count; x++)
{
r.countryId.ToString().Contains(array[x]) 
}
select r 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:23:25.280

试试这个

```
var list  =  from r in results
             where array.Contains(r.countryId.ToString()) 
             select r; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:01:31.400

您可以加入收藏，但我认为 Yograj Gupta 的答案可能是更好的答案。

```
var query = from a in results
            join b in array
            on a.CountryId equals b.CountryId
            select a; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:37:48.410

你没有给出数组类型所以假设它是 testclass1

```
 class TestClass1
    {
        public int Id { get; set; }
        public string Name { get; set; }
    }

    class Country
    {
        public int Id { get; set; }
        public string Name { get; set; }
    }

    List<Country> countries = new List<Country>();
    TestClass1[] arrays = new TestClass1[30];

    countries.Where(x => arrays.Select(y => y.Id).Contains(x.Id)).ToList(); 
```

我不确定这是否是最好的方法，但我认为这会奏效。

**更新**：没有注意到数组也是国家类型的。对不起。

# c++ - 水平翻转图像 C++

> ID：13138846
> 
> 赞同：0
> 
> 时间：2012-10-30T12:20:37.960
> 
> 标签：c++, image-processing

我在翻转时遇到了问题，因为只显示了正确的部分，图片的其余部分只有灰色。

```
![Lena FLipped][1]    

Image *im2 = new Image();
im2->CloneImage(image);

unsigned int sizeX = im2->GetSizeX();
unsigned int sizeY = im2->GetSizeY();

for(int x = 0; x < sizeX/2;x++){
   for(int y = 0;y < sizeY;y++ ){

       Image::PixelType pix = im2->GetPixel(x,y);
       im2->SetPixel(x,y,sizeX-x-1);
       im2->SetPixel(sizeX-x-1,y,pix);
   }
}
ImageIO::Write( "flip.pgm", im2 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:24:27.817

```
im2->SetPixel(x,y,sizeX-x-1); 
```

是错误的，你需要设置颜色来代替：

```
Image::PixelType pix1 = im2->GetPixel(x,y);
Image::PixelType pix2 = im2->GetPixel(sizeX-x-1,y);
im2->SetPixel(x,y,pix2);
im2->SetPixel(sizeX-x-1,y,pix1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:23:59.363

您将需要执行两个像素的完全交换，而不仅仅是覆盖值 - 灰色来自此行：

```
im2->SetPixel(x,y,sizeX-x-1); 
```

您在哪里提供两个 x 坐标，并且没有像素值。更正循环：

```
for(int x = 0; x < sizeX/2;x++){
   for(int y = 0;y < sizeY;y++ ){

       Image::PixelType pix = im2->GetPixel(x,y);
       im2->SetPixel(x,y,im2->GetPixel(sizeX-x-1,y));
       im2->SetPixel(sizeX-x-1,y,pix);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:24:03.720

你在这些方面做什么：

```
 Image::PixelType pix = im2->GetPixel(x,y);
   im2->SetPixel(x,y,sizeX-x-1);
   im2->SetPixel(sizeX-x-1,y,pix); 
```

您应该记住两个像素值，然后交换它们。将像素设置为的想法是什么`sizeX - x - 1`？

# java - 将 base64 转换为 PDF 文件并在 JAVA 中传入 web 服务

> ID：13138849
> 
> 赞同：1
> 
> 时间：2012-10-30T12:20:42.330
> 
> 标签：java, web-services, pdf, base64

我有一个 web 服务，它返回一个 PDF 文件的 base 64 表示。我想编写另一个 web 服务，它将接收 base64 字符串并将 base 64 转换回 PDF 文档，并将这个 PDF 文档传回给 web 服务的调用者。全部在 JAVA 中。考虑到我实际上不会将 PDF 保存到文件位置，这可能吗？我想避免共享网络文件位置。到目前为止，我能找到的所有建议都是关于文件，但使用的是文件路径，而不是实际的文件对象。

我可以使用标准的 JAVA 类而不是扩展吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:25:12.160

你可以这样做，但你为什么要这样做？解码 base64 是一项非常基本的任务，因此将其卸载到 Web 服务几乎没有意义——首先*调用*Web 服务所需的基础设施极有可能包含/提供一个您可以在本地使用的 base64 解码器在客户端。

（您解码的编码字节恰好是 PDF 文档并不重要）。

# c++ - 为什么我需要在移动构造函数的初始化列表中使用 std::move？

> ID：13138851
> 
> 赞同：14
> 
> 时间：2012-10-30T12:20:45.760
> 
> 标签：c++, c++11, rvalue-reference, move-semantics, move-constructor

假设我有一个（平凡的）类，它是可移动构造和可移动分配的，但不能复制构造或复制分配：

```
class movable
{
  public:
    explicit movable(int) {}
    movable(movable&&) {}
    movable& operator=(movable&&) { return *this; }
    movable(const movable&) = delete;
    movable& operator=(const movable&) = delete;
}; 
```

这工作正常：

```
movable m1(movable(17)); 
```

当然，这不起作用，因为`m1`它不是右值：

```
movable m2(m1); 
```

但是，我可以换`m1`行`std::move`，将其转换为右值引用，以使其工作：

```
movable m2(std::move(m1)); 
```

到现在为止还挺好。现在，假设我有一个（同样微不足道的）容器类，它包含一个值：

```
template <typename T>
class container
{
  public:
    explicit container(T&& value) : value_(value) {}
  private:
    T value_;
}; 
```

但是，这不起作用：

```
container<movable> c(movable(17)); 
```

编译器（我尝试过 clang 4.0 和 g++ 4.7.2）抱怨我试图在' 的初始化列表中使用`movable`' 已删除的复制构造函数。`container`再次，包装`value`使它`std::move`工作：

```
 explicit container(T&& value) : value_(std::move(value)) {} 
```

但为什么`std::move`在这种情况下需要？不是`value`已经类型了`movable&&`吗？有什么`value_(value)`不同`movable m1(movable(42))`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-30T12:43:20.957

那是因为`value`是一个命名变量，因此是一个左值。需要将`std::move`其转换回右值，以便它会导致`T`匹配的移动构造函数重载。

换一种说法：右值引用可以*绑定*到右值，但它本身不是右值。它只是一个引用，在表达式中它是一个左值。从它创建一个右值表达式的唯一方法是强制转换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T12:47:01.650

> 有什么`value_(value)`不同`movable m1(movable(42))`？

命名的右值引用是左值（因此将绑定到已删除的副本ctor），而临时值是右值（具体而言是纯右值）。

`§5 [expr] p6`

> [...] 通常，此规则的效果是命名的右值引用被视为左值，而对对象的未命名右值引用被视为 xvalue [...]

以及来自示例：

```
A&& ar = static_cast<A&&>(a); 
```

> 表达式`ar`是一个左值。

上面的引用来自非规范性注释，但是是一个充分的解释，因为第 5 节的其余部分解释了哪些表达式*只*创建 xvalues ^(†</sup>（也就是只有指定的表达式，没有其他表达式会创建 xvalues）。另请参阅[此处](https://stackoverflow.com/q/11581903/500104)以获取详尽列表。)

† xvalues 是 rvalues 的一个子组，prvalues 是另一个子组。请参阅[此问题](https://stackoverflow.com/q/3601602/500104)以获取解释。

# php - 向 php 服务器发送 ajax 调用返回空错误

> ID：13138853
> 
> 赞同：1
> 
> 时间：2012-10-30T12:20:50.553
> 
> 标签：php, javascript, jquery

我在一个函数中有以下 ajax 调用，该函数在 clickevent 上调用。

```
$.ajax({
  url:"server.php",
  type:'GET',
  data: {'action':'addEvent'},
  success: function(response)
  {
    if(response)
    {
    alert("200 ok");                
    }
 },
 error: function(xhr, ajaxOptions, ThrownError)
 {
   alert("Error:" + ThrownError);
   $("#output").text("Error: "+ThrownError);
 }
}); 
```

php端如下。

```
 if(isset($_GET["action"]))
   {
      $action = $_GET["action"];
     if($action == 'addEvent')
     {
          echo("ping");
     }

   } 
```

现在它抛出一个错误。但我得到的错误信息是：

没错，我得到错误：

这让我快疯了。

我还放入了我的document.ready，让它充当某种ping，它运行良好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:03:49.850

看看[这个 jsFiddle](http://jsfiddle.net/Yh9Za/)。我遇到了同样的错误。

为什么会发生这种情况：单击链接并发送 ajax 请求。但是默认操作不会停止，浏览器会导航到指定的 url`href`并停止任何 JS 执行。AJAX 调用也停止了。

为了防止这种情况，您应该执行以下操作：

```
$('a').click(function(e) { 
    $.ajax({
      url:"server.php",
      type:'GET',
      data: {'action':'addEvent'},
      success: function(response) {
        if(response) {
           alert("200 ok");                
        }
      },
      error: function(xhr, ajaxOptions, ThrownError) {
         alert("Error:" + ThrownError);
         $("#output").text("Error: "+ThrownError);
      }
   }); 
   e.preventDefault();//this will not allow browser to move to a different URL
   return false; //alternative to e.preventDefault(). 
});​ 
```

可能您有类似的问题，但很难注意到，因为您的元素导致简单的页面重新加载，浏览器导航到同一页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:33:10.267

错误的函数定义如下：

```
error(jqXHR, textStatus, errorThrown) 
```

此外，尝试通过定义以下内容来获取更多信息

`statusCode`

响应具有相应代码时要调用的数字 HTTP 代码和函数的映射。例如，以下将在响应状态为 404 时发出警报：

```
$.ajax({
  statusCode: {
    404: function() {
      alert('page not found');
    }
  }
}); 
```

如果请求成功，状态码函数采用与成功回调相同的参数；如果导致错误，它们将采用与错误回调相同的参数。

`success(data, textStatus, jqXHR)`

所以现在，您又定义了两个函数（成功 + http 代码）。所以如果请求失败，它会错误地执行代码，如果它成功，它会执行`success`。在这两种情况下，您都将获得 http 响应代码。检查代码是否为 200，然后一切顺利。404 - 脚本 url 错误。500 - 存在服务器错误等。

# jquery - .hover 和 jquery 在 ipad/手机上

> ID：13138856
> 
> 赞同：1
> 
> 时间：2012-10-30T12:21:20.863
> 
> 标签：jquery, ios

我编写了一些脚本，当用户将鼠标悬停在选取框中的某些文本上时，它将暂停选取框，然后当用户的鼠标离开文本时，它将重新开始。由于 ipad 和手机不使用鼠标，因此我无法在它们上完美地重新启动选取框。我最初的想法是在悬停后创建一个延迟，然后在该延迟后重新开始滚动。它可以部分工作，但不能完全工作，因为在手机和 ipad 上单击链接后，选取框将一遍又一遍地开始和停止。

那么我该如何解决这个问题呢？

```
$('marquee p').hover(
    function(){//When mouse hovers over
        $('marquee').attr({scrollamount:0});

        setTimeout(function(){
            $('marquee').attr({scrollamount:2});
            ;},3000);
    },
    function(){//When mouse doesn't hover over
        $('marquee').attr({scrollamount:2});
    }
); 
```

# django - Django 访问模板中列表的长度

> ID：13138859
> 
> 赞同：75
> 
> 时间：2012-10-30T12:21:29.803
> 
> 标签：django, templates

简单的问题。我的模板中有一个列表，想要输出列表的长度。我是否必须在我的观点中计算这个并通过我的上下文交出它？

```
<p>the size of the list is {{??}}</p>

{% for element in list %}
<p>element.Name</p>
{% end for %} 
```

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-10-30T12:22:58.410

使用[`length`过滤器](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#length)：

```
{{ some_list|length }} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-30T12:23:32.170

使用`list|length`. `|`表示您将使用过滤器。列表的大小是

```
{{ list|length }} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-11T19:12:40.277

```
{% if your_list %}
{{ your_list|length }}
{% endif %} 
```

请记住，如果 your_list 是一个属性，它将在这一行上跳动，因此，如果您制作每次请求时都创建的动态列表并且您想要`for`稍后触发它两次；

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-21T21:30:17.580

只是一点点更新，以防有人在这里结束。正如评论中所指出的，如果您有一个 QuerySet，现在可以通过以下方式获取长度：

```
{{ your_list.count }} 
```

希望能帮助到你！

# php - 使用 javascript 变量和 php 数组的 Javascript 警报框

> ID：13138861
> 
> 赞同：1
> 
> 时间：2012-10-30T12:21:30.487
> 
> 标签：php, javascript

我正在尝试`johan`使用带有 javascript 变量和 php 数组的 javascript 警报框进行打印。但是以下代码不起作用。

```
$result['firstName']['lastName']='johan';
$data =  json_encode($result);

?>
<html>
<body onload='myfunction(<?php echo $data; ?>);'>
<script>
function myfunction(data) 
{
  var fn = "firstName";
  alert(data.+fn+.lastName);
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:24:07.393

尝试警报（data.firstName.lastName）；

编辑：

我刚刚对此进行了测试，它按预期工作，所以干杯:)

```
<?php
$result['firstName']['lastName']='johan';
$data =  json_encode($result);
echo $data;
?>
<html>
<body onload='myfunction(<?php echo $data; ?>);'>
<script>
function myfunction(data) 
{
  var fn = data.firstName;
  alert(fn.lastName);// you can use data.firstName.lastName too 
}
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:24:48.487

这应该这样做：

```
alert(data[fn].lastName); 
```

因为您的索引在变量内，所以您必须使用方括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:26:26.800

至少您需要评估在 php 中生成的 json 字符串

在你提醒使用：data[fn].lastName

Mb 我错过了其他东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:30:16.167

您不能使用点表示法访问变量对象属性。您需要使用 [] 代替。

# web-services - 从 Camel 调用网络服务

> ID：13138864
> 
> 赞同：1
> 
> 时间：2012-10-30T12:21:57.197
> 
> 标签：web-services, apache, cxf, apache-camel

我想从 Camel 调用网络服务。但是每次调用该服务时我都会收到 null 。你能帮我找到解决办法吗？

该服务在tomcat上运行，我可以用soapUI对其进行测试。这是来自 SoapUI 的请求。

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"     xmlns:hel="http://helloworld.localhost">
    <soapenv:Header/>
       <soapenv:Body>
          <hel:HelloWorldRequest>
               <hel:input>Pavel</hel:input>
          </hel:HelloWorldRequest>
       </soapenv:Body>
    </soapenv:Envelope> 
```

并且响应返回 Hello Pavel。我按照 CamelInAction 指南创建了合同优先的 Web 服务。我能够运行读取文件并将其发送到 Web 服务的路由。

路线的代码如下。

```
public class FileToWsRoute extends RouteBuilder {
public void configure() { 
    from("file://src/data?noop=false")
    .process(new FileProcessor())
    .to("cxf:bean:helloWorld");
    }

} 
```

FileProcessor 类如下所示：

```
public class FileProcessor implements Processor {

public void process(Exchange exchange) throws Exception {

    System.out.println("We just downloaded: " 
            + exchange.getIn().getHeader("CamelFileName"));
    String text = 
    "<?xml version='1.0' ?>" 
    +"<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:hel=\"http://helloworld.localhost\">"
    +"<soapenv:Header/>"
    +   "<soapenv:Body>"
    +     " <hel:HelloWorldRequest>"
    +        " <hel:input>WhatsUP</hel:input>"
    +     " </hel:HelloWorldRequest>"
    +   "</soapenv:Body>"
    +"</soapenv:Envelope>";

    exchange.getIn().setBody(text);
}
} 
```

在下一个版本中，我想通过 cxf-codegen-plugin 生成的对象（HalloWorld.java，HelloWorldImpl.java，HelloWorldRequest.java，HelloWorldResponse.java，HelloWorldService.java，ObjectFactory.java，package-info.java ）。

在 camel-cxf.xml 我有：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:cxf="http://camel.apache.org/schema/cxf"
   xsi:schemaLocation="
     http://www.springframework.org/schema/beans 
     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
     http://camel.apache.org/schema/cxf 
     http://camel.apache.org/schema/cxf/camel-cxf.xsd">

  <import resource="classpath:META-INF/cxf/cxf.xml"/>
  <import resource="classpath:META-INF/cxf/cxf-extension-soap.xml"/>
  <import resource="classpath:META-INF/cxf/cxf-extension-http-jetty.xml"/>

  <cxf:cxfEndpoint id="helloWorld"
               address="http://localhost:8080/ode/processes/HelloWorld"
               serviceClass="localhost.helloworld.HelloWorld"
               wsdlURL="wsdl/HelloWorld.wsdl"/>
</beans> 
```

要读取来自 Web 服务的响应，我正在使用这条路线。

```
public class WsToQueueRoute extends RouteBuilder {
    public void configure() { 
    from("cxf:bean:helloWorld")
    .to("seda:incomingOrders")
    .transform().constant("OK");
    }

} 
```

最后一条路由从 seda 获取数据...

```
public class QueueToProcessRoute extends RouteBuilder {
public void configure() { 
    from("seda:incomingOrders")
    .process(new PrintResult());
    }

} 
```

...并打印结果。

```
public class PrintResult implements Processor {

public void process(Exchange exchange) throws Exception {

    System.out.println("Data received: " 
            + exchange.getIn().getBody(String.class));
}

} 
```

执行的输出是：收到的数据：null

我希望有一些可以用 cxf 对象解析的 XML 文件。你能帮我找出问题吗？

谢谢

帕维尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T12:43:12.123

这个例子的问题在于 FileProcessor 和 PrintResult 类。我还简化了这个例子，所以我现在只使用一个路由 FileToWsRoute。

```
public class FileToWsRoute extends RouteBuilder {
public void configure() { 
    from("file://src/data?noop=true")
    .process(new FileProcessor())
    .to("cxf:bean:helloWorld")
    .process(new PrintResult());
    }
} 
```

FileProcessor 已更改为此。

```
public class FileProcessor implements Processor {

public void process(Exchange exchange) throws Exception {
        HelloWorldRequest hs = new HelloWorldRequest();
        hs.setInput("Pavel");
        exchange.getOut().setBody(hs);
    }
} 
```

PrintProcessor 已更改为此。

```
public class PrintResult implements Processor {
public void process(Exchange exchange) throws Exception {
    MessageContentsList msgList = (MessageContentsList) exchange.getIn().getBody();
    HelloWorldResponse resp = (HelloWorldResponse) msgList.get(0);
    String result = resp.getResult();       
       System.out.println("Data received: " + result);
    }

} 
```

我认为这对于其他在骆驼和网络服务方面苦苦挣扎的人来说是一个很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T11:30:48.127

问题可能与发送到您的`process`方法的数据格式有关。我会尝试向`camel cxf`端点添加属性，如下所示：

```
<cxf:properties>
    <entry key="dataFormat" value="POJO"/> 
</cxf:properties> 
```

通过将数据格式更改为`POJO`您应该收到您的消息。所以你的`camel cxf`端点应该是这样的：

```
 <cxf:cxfEndpoint id="helloWorld"
               address="http://localhost:8080/ode/processes/HelloWorld"
               serviceClass="localhost.helloworld.HelloWorld"
               wsdlURL="wsdl/HelloWorld.wsdl">
    <cxf:properties>
        <entry key="dataFormat" value="POJO"/> 
    </cxf:properties>
  </cxf:cxfEndpoint> 
```

我曾经遇到过类似的问题，这解决了我的问题，但是我在`Spring`非 java 类中使用了骆驼。

如果这不起作用，请尝试将 parameter: 添加`?dataFormat=POJO`到您的路线中，如下所示：

```
from("cxf:bean:helloWorld?dataFormat=POJO") 
```

# android - Android SuperUser 应用程序如何检测应用程序请求 root？

> ID：13138867
> 
> 赞同：15
> 
> 时间：2012-10-30T12:22:04.150
> 
> 标签：android, security, su

我正在编写一个应用程序，`su`用于在 linux 内核中执行一些命令。我想知道 SuperUser 是如何确定应用程序要求 root 权限的？此外，是否有任何已知的方法（通过混淆）可以绕过此检查？

换句话说：尽管在 android 清单文件中没有明确请求权限，但 Android/(SuperUser) 如何知道应用程序需要 root 权限。

我从安全的角度问这个问题。我想知道这是如何工作的细节，以确保恶意应用程序无法绕过超级用户。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-14T04:49:26.210

超级用户系统有两个部分 -[超级用户二进制文件](https://github.com/ChainsDD/su-binary)（终端上的 su）和[SuperUser.apk](https://github.com/ChainsDD/Superuser)（使用 su 管理应用程序的 Android 应用程序）。查看[su 二进制文件](https://github.com/ChainsDD/su-binary/blob/master/activity.c)的源代码，当您请求 su 访问时

```
Process p = Runtime.getRuntime().exec("su"); 
```

它通过 android 消息管理器发布应用程序已请求超级用户访问的意图。

```
sprintf(command, "/system/bin/am broadcast -a '%s' --es socket '%s' --ei caller_uid '%d' --ei allow '%d' --ei version_code '%d' > /dev/null",action, socket_path, ctx->from.uid, allow, VERSION_CODE); 
```

管理器应用程序侦听此意图并要求用户处理请求（允许/拒绝）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-30T12:46:05.547

当你运行这个：

```
Process p = Runtime.getRuntime().exec("su"); 
```

您正在尝试执行只有具有超级用户权限的应用程序才能执行的“su”！因此，每当 Android 检测到您正在尝试运行“su”时，它就会知道该应用程序需要超级用户权限。

此外，Android 还保留了一些只有 Android 系统才能访问的区域。如果您的应用程序试图访问那里的某些内容，Android 会理解需要超级用户。

例如，假设您正在尝试修改主机文件或修改某些网络配置，例如 DHCP。或者您正在尝试从系统区域访问文件，例如`/data`Android 将检查应用程序是否具有超级用户权限，然后仅授予它访问此类内容的权限。

关于恶意软件，当应用程序需要超级用户访问权限时，系统会提示用户授予或拒绝超级用户权限。只有这样，应用程序才能获得 root 访问权限。因此，由用户决定是接受还是拒绝任何应用程序的 root 访问。*（每次*应用程序尝试访问需要 root 访问权限的内容时，系统都会提示用户，*除非*您告诉系统记住您对特定应用程序的接受或拒绝选择。）

PS：您可以考虑查看[Superuser app 的网站](http://androidsu.com/superuser/)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-14T04:31:20.817

其实很简单。Vanilla Android 甚至没有`su`或`superuser`. 当你 root 设备时，你以 root 身份运行 shell。然后安装`su`二进制文件和`superuser.apk`. 安装后，您将 shell 设置回其正常权限。所有这些仅限 root 的应用程序现在都可以调用`su`以请求 root 访问权限。

运行时`su`它会调用`superuser.apk`一条消息，询问您是否要提升权限。`su`二进制文件 和`superuser.apk`通过 Android 的正常沙盒保护。请注意，一旦您授予应用程序 root 权限，它就可以自由地做任何它想做的事情，包括用它自己的版本覆盖 su。

# qt - qt qml：水平淡化图像（即从左到右......不是整个图像）

> ID：13138868
> 
> 赞同：1
> 
> 时间：2012-10-30T12:22:05.700
> 
> 标签：qt, qml

![在此处输入图像描述](../Images/b21a82fe8ed559d777badd969c436393.png)我使用 PathLine 一次水平显示 3 张图像。左右图像需要显示为从左侧褪色 50% 和从右侧褪色 50%。在这里，我不能使用黑色矩形渐变来显示淡入淡出效果，因为我的父母是 20% 透明的并且它漂浮在背景视频上。

那么有什么方法可以将 opacity 属性应用为水平淡入淡出动画？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T14:41:23.747

使用[QML`ShaderEffectItem`元素](https://qt-project.org/doc/qt/qml-shadereffectitem.html)，您可以使用着色器程序将后期效果添加到 QML 项目。这使您可以在 GPU 上执行一些图形效果。

正如您在我上面链接的文档中看到的那样，这可以是例如波浪效果。通常，您对每个输出像素应用一个小“程序”。这就是GLSL 中所谓的*片段着色器。*

为了让您了解如何在项目上实现 alpha 蒙版（这可能是您的场景，其中包含您正在制作动画的路径上的图像），我将给出一个示例，其中我实现了一个简单的线性渐变alpha 蒙版，左边是零不透明度，右边是完全不透明度。

```
import QtQuick 1.0
import Qt.labs.shaders 1.0

Item {
    width: 300
    height: 300

    id: wrapper

    Item {
        id: scene
        anchors.fill: parent
        // Here is your scene with the images ...
    }

    ShaderEffectItem {
        anchors.fill: wrapper

        // Any property you add to the ShaderEffectItem is accessible as a
        // "uniform" value in the shader program. See GLSL doc for details.
        // Essentially, this is a value you pass to the fragment shader,
        // which is the same for every pixel, thus its name.

        // Here we add a source item (the scene) as a uniform value. Within the
        // shader, we can access it as a sampler2D which is the type used to
        // access pixels in a texture. So the source item becomes a texture.
        property variant source: ShaderEffectSource
        {
            sourceItem: scene // The item you want to apply the effect to
            hideSource: true  // Only show the modified item, not the original
        }

        // This is the fragment shader code in GLSL (GL Shading Language)
        fragmentShader: "
        varying highp vec2 qt_TexCoord0;  // The coords within the source item
        uniform sampler2D source;         // The source item texture
        void main(void)
        {
            // Read the source color of the pixel
            vec4 sourceColor = texture2D(source, qt_TexCoord0);

            // The alpha value of the mask
            float alpha = qt_TexCoord0.x; // = 0.0 at left, 1.0 at right border

            // Multiply the alpha mask on the color to be drawn:
            sourceColor *= alpha;

            // Write the pixel to the output image
            gl_FragColor = sourceColor;
        }
        "
    }
} 
```

着色器程序中最重要的一行是`alpha`变量的值。在这个小例子中，我只是将纹理坐标的 X 分量设置为 alpha 值，因此在左边界为 0，在右边界为 1。请注意，纹理坐标不是以像素为单位测量的，而是以 [ 0..1] 范围。如果要访问像素坐标，可以使用`gl_FragCoord.x`/ `y`。注意`y`是从下到上测量的，所以0是下边框，`height`也是上边框。默认情况下，您无法访问`height`整个生成的图像，但因此我们可以使用制服。只需分配一个新的并在着色器中`property int h: height`使用它来访问它。`uniform float h`

# jquery - 从加载函数访问变量

> ID：13138870
> 
> 赞同：-1
> 
> 时间：2012-10-30T12:22:13.950
> 
> 标签：jquery, function, variables, scope, global

这是一个函数的片段。我正在获取每个图像的原始大小。然后我想做一个简单的 if 语句，但不能访问变量'imageWidth'。在“theImage.onload = function()”之外获取“未定义”。怎么会超出范围？

```
 var parentWidth = $('figure.pack_image').width();
    var screenImage = $('figure.pack_image img');
    var imageWidth = '';

    screenImage.each(function () {

        var theImage = new Image();
        theImage.src = $(this).attr('src');

        theImage.onload = function() {
            imageWidth = this.width;

        }

        if (imageWidth > parentWidth) {
        ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:25:12.137

它不是“超出范围”，只是还没有价值。在设置之前您无法测试`imageWidth`它，并且`.onload`调用是异步的。

您的测试需要在`.onload`函数内部开始：

```
theImage.onload = function() {
    imageWidth = this.width;
    if (imageWidth > parentWidth) {
        ...
    }
} 
```

或者，使用延迟回调`onload`从后续处理中取消嵌套逻辑：

```
var gotImage = $.Deferred();
theImage.onload = function() {
    gotImage.resolve(this);
}

gotImage.done(function(img)) {
    if (img.width > parentWidth) {
         ...
    }
}); 
```

# set - DQL 更新集（Doctrine 1.2）

> ID：13138871
> 
> 赞同：2
> 
> 时间：2012-10-30T12:22:20.553
> 
> 标签：set, dql, doctrine-1.2

我正在尝试更新 mysql 数据库中的一行。我遇到了一些问题，而且我是学说新手（不幸的是 1.2）dql，我想我因为“集合”部分而遇到错误，但我在任何地方都找不到正确的方法......

```
 $q = Doctrine_Query::create()
        ->update('OfferUser')
        ->set('price_alone', $price_alone)
        ->set('price_group', $price_group)
        ->set('comments', $comments)
        ->where('id=?', $id); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:29:23.293

是的，问题出在布景上……我必须输入“？” 中间是这样的：

设置('price_group', '?', $price_group)

# java - 获取对象树

> ID：13138872
> 
> 赞同：1
> 
> 时间：2012-10-30T12:22:23.097
> 
> 标签：java, garbage-collection, reachability

> **可能重复：**
> [是否可以“看到”垃圾收集的对象图？](https://stackoverflow.com/questions/1238629/is-it-possible-to-see-the-object-graph-for-garbage-collection)

是否有任何虚拟机或库提供对对象图的访问？我需要知道特定对象是否可以从我视为根的一组对象中访问。

我想在单元测试中实现内存泄漏检查。

# algorithm - 用点图案填充矩形

> ID：13138875
> 
> 赞同：3
> 
> 时间：2012-10-30T12:22:30.613
> 
> 标签：algorithm, geometry

在下面的图像中有一些特定的模式。它在第一张图像上最明显。我的点用小圆圈标记并用线连接。他们制作了一些网状图案。有些点是错误的，不适合图案（在第一张图片上标记）。目标是填充用红色标记的整个矩形（矩形是从极值点创建的 - 在图案坐标系中具有极值坐标的点）。

**问题是应该采取什么方法来用点填充矩形，并消除错误的点。第二张图像的情况是极端的，但主要是点更多的情况。**

图像仅用于可视化。我有带有点坐标的向量。无需检测点。

我会尽快添加我的解决方案。

![](../Images/7dee0ba2be8d206bcd57d59d5faf9ea2.png) ![](../Images/1bbd87c73d253369c0302cdf679ad907.png) ![](../Images/23574df6895b1948bff2e303bcd77e45.png)

我目前的方法是创建平行于具有已知图案偏移的较长矩形边的线。然后寻找线附近具有一定增量距离的点，并填充其余点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:17:19.740

总的来说，我要做的是首先确定网格，然后很容易检查该网格上是否有东西。

这些是步骤：

*   旋转所有东西，这样你就只有水平线和垂直线。

*   每 x 值计算你有多少分。

*   每个值计算你有多少分。

伪代码：

```
xcount is array of int
ycount is array of int

for x=0 to width-1 do
  for y=0 to height-1 do
    foreach point do
      if point.x = x then
        xcount[x]++
      if point.y = y then
        ycount[y]++ 
```

对于您的最后一张图片，结果将是这样的：

```
x-count:1,0,0,0,3,0,2,0,1,0,0,0,4,0,0,0,3,0,0,0,4
y-count:2,0,0,0,6,0,0,0,4,0,1,0,3,0,1,0,1 
```

*   现在检测网格大小：

    match = 0 for i=1 to 10 do foreach xcount do if xcount mod i=0 then matches[i]++

现在我们有一个数组，其中包含 10 种不同网格大小的分数（匹配的点数）。它可能看起来像这样：

```
gridscores[] = 5,5,0,5,34,5,0,5

XgridSize = index of greatest gridSore 
```

*   34 显然是最佳匹配，它在索引 5 处，因此网格大小为 5。

*   现在您知道了网格大小，您可以轻松找到哪些点不在该网格上：

    foreach 点做 wrongpoint = (point.x mod XgridSize != 0) 或 (point.y mod YgridSize != 0)

即使有很多错误点，这也有效。我没有详细介绍如何旋转以及如何找到网格的偏移量，但这也许可以帮助您找到正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:13:47.877

这些点位于两组平行线上。检测这些线条的最简单方法是[Hough 变换](http://en.wikipedia.org/wiki/Hough_transform)。

执行霍夫变换后，您有一个二维直方图，其中一维（列）对应于线方向，另一维（行）对应于线偏移。将同一列的元素相加，并在结果向量中找到两个最大值。将列的同一行的元素加在一起，接近这些最大值之一，并在结果向量中找到周期性模式（[快速傅里叶变换](http://en.wikipedia.org/wiki/Fft)在这里可能会有所帮助）。对其他最大值执行相同操作。

因此，对于两组平行线中的每组，您都有方向、周期和偏移量。要用适当的点填充矩形，只需获得这些线组的交点。

# ios - 一个线程中的数据库忙正在一个表中写入，而另一个线程正在访问另一个表中的数据

> ID：13138876
> 
> 赞同：2
> 
> 时间：2012-10-30T12:22:30.113
> 
> 标签：ios, fmdb

我在后台线程的一些表中插入大量数据。在插入期间，如果应用程序访问其他表中的数据，我得到一个数据库繁忙错误。我正在使用 FMDatabase。如何解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:26:04.073

使用 FMDatabaseQueue，它适用于这种情况。

# oracle - 如何将模式名称带入 Oracle 中的 VIEW？

> ID：13138877
> 
> 赞同：0
> 
> 时间：2012-10-30T12:22:33.373
> 
> 标签：oracle, view, database-schema

我正在尝试在具有 50 个相同模式的数据库中创建 MVIEW。所以基本的 VIEW 非常简单，但是我需要在视图中添加一列来存储源记录的模式。所有 50 个模式中的表的唯一键都从 0 开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:06:00.547

无论如何，您必须替换视图的 ddl。

你可以这样做：

```
create or replace view_name
as
select col1, col2, 'schema1' as schema_name
from schema1.table
union all
select col1, col2, 'schema2'
from schema2.table
union all
select col1, col2, 'schema3' 
from schema3.table
... 
```

# reporting-services - 具有多组的 SSRS 堆积条形图

> ID：13138880
> 
> 赞同：0
> 
> 时间：2012-10-30T12:22:48.393
> 
> 标签：reporting-services

我有这样的要求：我们有 SharePoint 列表，其中包含打开和关闭的请求。我想在堆积条形图中显示这些请求，在给定的时间段内打开与关闭。我通过创建一个数据集来实现这一点，该数据集使用创建日期列过滤给定日期的请求列表。

但是我的客户问，打开的请求数应该根据创建日期显示，然后关闭的请求数应该根据修改日期显示。例如，我今天打开一张票，明天关闭这张票，所以这张票应该显示在明天的日期下方。如果有人在 SSRS 中堆叠时对不同的列进行了分组，请帮助我。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:10:54.083

只需让 SQL 为您完成繁重的工作：

```
SELECT ReportDate, SUM(Opened) AS Opened, SUM(Closed) AS Closed
FROM (
    SELECT Created AS ReportDate, 1 AS Opened, 0 AS Closed
    FROM RequestTable
    UNION ALL
    SELECT Modified AS ReportDate, 0 AS Opened, 1 AS Closed
    FROM RequestTable
    WHERE Modified IS NOT NULL
)
GROUP BY ReportDate 
```

假设在请求关闭并且日期没有时间组件时设置了修改日期。

# sql - sql子查询并加入一对多表

> ID：13138885
> 
> 赞同：1
> 
> 时间：2012-10-30T12:23:14.343
> 
> 标签：sql, sql-server-2008, join, subquery, one-to-many

这个太让我挠头了！基本上，我需要显示位置列表、存储在那里的当前项目以及拥有它的人。我创建了 4 个表，并用数据填充了这些表。

设置：MSSQL 2008

我正在寻找的是来自 tbl_locationHistory 的项目和所有者的“Top(1)”，因为在每个位置的任何时候都只能有一个项目或一个所有者。请记住，tbl_locationHistory 可能有多个数据位，我只需要为每个数据提取最新的 ID（例如，历史表中当前可用的最高 ownerID、最高 itemID）。

## tbl_location

locID 位置名称

## tbl_item

itemID itemName

## tbl_owner

所有者 ID 所有者名称

## tbl_locationHistory

locHistID locID itemID ownerID dateModified

我尝试将所有这些表与连接连接在一起。但是我意识到这行不通，因为我没有拉回“所有者”或“物品”的最高 ID，因此显示的数据将不准确。

我想到的一件事是我应该将历史表分成两部分：1 x 所有者到位置和 1 x 项目到位置 - 但是我现在处于 SQL 的极限，所以可以用一些正确方向的指针来做因为不知道该怎么做。

因此，即使我必须分解历史记录表，我也需要帮助。

**2012 年 1 月 11 日更新**

好的，我将在这里粘贴一些代码。

我是一个老派的经典 ASP 编码器.....还需要继续前进！我正在使用经典的 asp 和 MSSQL 来创建这个应用程序。我也在使用dreamweaver，因此希望将查询放在其中，这样我就可以使用DW CS6中的“绑定”功能。

这是我的原始查询：

```
SELECT DISTINCT p.pID, p.cliID, p.pNo, p.pName, p.dtCommissioned,     
p.description, ps.plotStatus, pt.plotType, o.oSalutation, o.oFname, o.oSname, man.manName, 
mod.model, sl.width, sl.length, sl.yr
FROM history AS ph INNER JOIN owners AS o ON ph.ownerID   
= o.ownerID INNER JOIN StockList AS sl ON ph.stockID = sl.stkID   
INNER JOIN manufacturers AS man ON sl.make = man.manID 
INNER JOIN models AS mod ON sl.model = mod.cID FULL OUTER   
JOIN plotType AS pt RIGHT OUTER JOIN                       
plots AS p ON pt.plotTypeID = p.plotType LEFT OUTER JOIN                       
plotStatus AS ps ON p.pStatus = ps.plotStatusID ON ph.plotID = p.pID
WHERE (p.cliID = value)
ORDER BY p.pNo 
```

现在，当我意识到我没有正确地在历史表中查找“stockID”的最高 HistoryID 以及“ownerID”的最高 plotHistoryID 时，我开始研究如何为每个 ID 执行“子查询”。 .....这就是我卡住的地方。

我已经尝试了一些类似的东西：

```
Select p.pID, p.cliID, p.pNo, p.pName, p.dtCommissioned,     
p.description, ps.plotStatus, pt.plotType, o.oSalutation, o.oFname, o.oSname, man.manName, 
mod.model, sl.width, sl.length, sl.yr
(Select top 1 ph.plotHistoryID, ownerID
FROM History AS ph
order by ph.plotHistoryID desc)
THEN JOINING ETC
THEN DO ANOTHER SUBQUERY FOR THE OWNER ETC 
```

但是我无法让它工作，但我现在超出了与子查询和联接相关的 SQL 水平。

输出显示将是：

地块号 | 地块名称 | 情节类型 | 地块状态 | 当前所有者 | 当前库存

每个 Plot No's/Names/Type/Status 都将填充我需要显示的数据。如果所有者\当前股票为空白，我有一个 IF 语句，说“没有所有者”或“没有找到股票”。

然后，用户将能够单击行末尾的“查看”链接并查看绘图/位置的详细信息，并将 pID 通过 QueryString 传递到下一页。

这有帮助吗？我现在有点绝望了！哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:38:07.147

您可以使用该`ROW_NUMBER`功能来帮助仅获取每个位置的最新历史事件，然后使用它来加入所有者和项目：

```
WITH LocationHistoryExt AS
(   SELECT  LocID, 
            ItemID, 
            OwnerID,
            DateModified,
            [RowNumber] = ROW_NUMBER() OVER(PARTITION BY LocID ORDER BY DateModified DESC)
    FROM    tbl_LocationHistory
)
SELECT  l.LocName,
        i.ItemID,
        o.OwnerName,
        lh.DateModified
FROM    tbl_Location l
        INNER JOIN LocationHistoryExt lh
            ON l.LocID = lh.LocID
            AND RowNumber = 1 -- ONLY LATEST EVENT
        INNER JOIN tbl_Item i
            ON lh.ItemID = i.ItemID
        INNER JOIN tbl_Owner o
            ON o.OwnerID = lh.OwnerID 
```

**编辑 - 添加解释**

顶部是[公共表表达式（CTE）](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)，在这种情况下，它只是将子查询移出主查询的一种方式，所以

```
WITH CTE AS
(   SELECT  A, B, C
    FROM    T
)
SELECT  *
FROM    CTE 
```

和刚才执行的完全一样

```
SELECT  A, B, C
FROM    T 
```

CTE 中的[ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734.aspx)将根据其中的`ORDER`and`PARTITION`子句为每个历史事件分配一个行号，因此在 tbl_LocationHistory 中给出以下示例数据：

```
locHistID | locID | itemID | ownerID | dateModified
----------+-------+--------+---------+--------------
    1     |   1   |   1    |   1     |  20121001
    2     |   1   |   4    |   2     |  20121002
    3     |   1   |   3    |   1     |  20121003  <-- LATEST FOR LocID 1
    4     |   2   |   5    |   2     |  20121002
    5     |   2   |   1    |   2     |  20121004
    6     |   2   |   2    |   3     |  20121005  <-- LATEST FOR LocID 2 
```

我假设您要做的是检索每个位置 ID 的最新行，并获取与该行关联的 itemID 和 OwnerID，因此解构`ROW_NUMBER`函数：

```
ROW_NUMBER() OVER(PARTITION BY LocID ORDER BY DateModified DESC); 
```

这将为您的数据中的每一行分配一个行号，每个`LocID`( `PARITION BY locID`) 再次从 1 开始，它将从具有最新修改日期 ( `ORDER BY DateModified DESC`) 的记录开始编号为 1。将此应用于您将获得的示例数据：

```
locHistID | locID | itemID | ownerID | dateModified | RowNumber
----------+-------+--------+---------+--------------+---------------
    1     |   1   |   1    |   1     |  20121001    | 3
    2     |   1   |   4    |   2     |  20121002    | 2
    3     |   1   |   3    |   1     |  20121003    | 1
    4     |   2   |   5    |   2     |  20121002    | 3
    5     |   2   |   1    |   2     |  20121004    | 2
    6     |   2   |   2    |   3     |  20121005    | 1 
```

这是在我的查询中在 CTE 中检索的内容，然后当我加入它时，我添加了 that `RowNumber = 1`，这意味着只返回最新的行

```
FROM    tbl_Location l
        INNER JOIN LocationHistoryExt lh
            ON l.LocID = lh.LocID
            AND RowNumber = 1 -- ONLY LATEST EVENT

locHistID | locID | itemID | ownerID | dateModified | RowNumber
----------+-------+--------+---------+--------------+---------------
    3     |   1   |   3    |   1     |  20121003    | 1
    6     |   2   |   2    |   3     |  20121005    | 1 
```

其余的只是正常加入，以从上述 2 行中获取适当的位置、所有者和项目。

我希望这现在更有意义。如果不让我知道，我将尝试解释任何其他内容。

**编辑 2 - 占空字段**

我稍微改变了 select 的顺序，改成`INNER JOIN`了`LEFT JOIN`，但是主体还是一样的：

```
WITH LocationHistoryExt AS
(   SELECT  LocID, 
            ItemID, 
            OwnerID,
            DateModified,
            [RowNumber] = ROW_NUMBER() OVER(PARTITION BY LocID ORDER BY DateModified DESC)
    FROM    tbl_LocationHistory
)
SELECT  [LocationName] = COALESCE(l.LocName, 'No Location'),
        [ItemName] = COALESCE(i.ItemName, 'No Item'),
        [OwnerName] = COALESCE(o.OwnerName, 'No Owner'),
        lh.DateModified
FROM    LocationHistoryExt lh
        LEFT JOIN tbl_Location l
            ON l.LocID = lh.LocID
        LEFT JOIN tbl_Item i
            ON lh.ItemID = i.ItemID
        LEFT JOIN tbl_Owner o
            ON o.OwnerID = lh.OwnerID
WHERE   RowNumber = 1 -- ONLY LATEST EVENT 
```

# powershell - 如何读取存储在当前日期文件夹中的 xml 文件？

> ID：13138891
> 
> 赞同：0
> 
> 时间：2012-10-30T12:23:31.940
> 
> 标签：powershell, directory, datetime-format

我将 xml 文件存储在当前日期文件夹中，如下所示 -[请参阅此链接](https://stackoverflow.com/questions/13118883/how-to-create-a-folder-using-a-name-based-on-the-current-date-in-powershell)
现在我想读取 xml 的特定部分并将其打印在 csv 文件中。如链接How can I use the $location as input to read the xml files based on the current date folder?

我尝试使用：

```
$locatexml = -item -path $rptdir -itemtype Directory -Name ("XML_$(Get-Date -f yyyy_mm_dd)") 
```

但我收到一个错误 - 一元运算符“-”后缺少表达式。 **如何将当前文件夹分配给 $locatexml？**这样我就可以引用当前日期文件夹中存在的所有 xml 文件？

我的代码试图读取位于日期文件夹中的 xml 文件：

从 $locatexml 中删除了 -itemtype，我将全名分配给另一个变量 $locatexml2。

```
$locatexml = get-item -path $reportdir -Name ("XML_$(Get-Date -f yyyy_MM_dd)")
**Do I need $locatexml2 here?**
$locatexml2 = "$($location.fullname)" 

Function DoRpt($locatexml2)
{
$rptOut="Asm"
Get-ChildItem  $locatexml2 | ForEach-Object {        
$file = Get-Content -path $locatexml2\$_ -totalcount 15
try {
$asm = [regex]::matches($file[5], 'asm=".*" ')[0].value -replace 'asm="(.*)" ','$1' 
      $rptOut=$rptOut+"`n$Asm,$locatexml2\$_"        
} catch {}   
}
Set-Content -path $testdir\test.csv -value $rptOut
} 
```

XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Rpt Version="10.0">
<Targets>
<Target="\\Shared\Data\SB\app\bin\test.dll">
<Mods>
<Mod="test.dll" asm="1.0.0000.000">
</Mod>
</Mods>
</Target>
</Targets>
</Rpt> 
```

**我尝试了所有分配 $locatexml 的方法，如下所示，但我没有通过.. 上面的代码中是否缺少我的东西？**

我真的需要 $locatexml2 吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T01:23:44.967

`dir`在父目录中执行 a ，指示您要查找的文件夹名称。我假设`$rptdir`是一个字符串，指示日期命名的子目录所在的父目录。

```
$locatexml = dir -Path $rptdir -Filter "XML_$(Get-Date -f yyyy_MM_dd)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T18:46:28.867

这会将 Directory 对象分配给 $locationxml，其中 $rptdir 中的文件夹名称匹配`yyyy_MM_dd`：

```
$locationxml = $rptdir | Where-Object {$_.Name -eq (Get-Date -f yyyy_MM_dd)} 
```

*请注意，日期格式字符串...**使用大写的 MM 来获取月份**（您在问题中的示例语法有小写的 mm，这将为您提供分钟）。*

# django - 在 Django 中更改相关集名称

> ID：13138895
> 
> 赞同：4
> 
> 时间：2012-10-30T12:23:42.730
> 
> 标签：django, set, rename, django-queryset

我想知道如何在 Django 模型中自定义集合的名称。

在教程示例中，Choice 指的是 ForeignKey 字段中的 Polls。稍后，我们可以知道哪些选项可用于投票：

```
poll.choice_set.all 
```

是否可以将该设置重命名为其他名称，以便我可以使用类似的内容进行查询？：

```
poll.my_choices.all 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T12:25:03.773

是的。在 ForeignKey 中使用 related_name 参数。

# uitableview - 如何在字典的根目录中显示数组名称

> ID：13138897
> 
> 赞同：0
> 
> 时间：2012-10-30T12:23:44.373
> 
> 标签：uitableview, plist, root

嗨，我有一个 plist 文件，我正在从它的层次结构中读取它，如下所示：

根 - 字典 Date1 数组（填充字典） Date2 数组（填充字典）等

如何用数组标题填充我的 UITableView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:32:39.270

`NSDictionary`您可以使用以下方法访问根的密钥`allKeys`：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"MyData" ofType:@"plist"];
NSDictionary *rootDict = [[[NSDictionary alloc] initWithContentsOfFile:path] autorelease];

NSLog(@"%@", [[rootDict allKeys] objectAtIndex:0]); // Should return Date1Array 
```

因此，在您的 UITableViewDataSource 方法中，您可以访问正确的密钥：

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

// Assumes the plist's root dictionary has been retained using a property:
NSString *arrayName = [[self.rootDict allKeys] objectAtIndex:indexPath.row];

//... configure cell

} 
```

# python - 如何在 python 的列表中列出在字典中找到的某些值的出现？

> ID：13138898
> 
> 赞同：0
> 
> 时间：2012-10-30T12:23:46.257
> 
> 标签：python

```
dave = [{'date':'12/10/12','time':'09:12','created_by':'adam','text':'this'},
        {'date':'28/09/11','time':'15:58','created_by':'admin','text':'that'},
        {'date':'03/01/10','time':'12:34','created_by':'admin','text':'this and that'}] 
```

如何获取在`created_by`. （例如`['adam','admin']`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T12:24:52.317

列表推导会很好地工作：

```
[ x['created_by'] for x in dave if 'created_by' in x ] 
```

如果您绝对确定 that`'created_by'`是包含在每个 dict 中的键，则可以省略`dave`该部分-如果在这种情况下缺少该键`if 'created_by' in x`，则会引发 a 。`KeyError`

当然，如果您想要*唯一的*值，那么您需要确定顺序是否重要。如果顺序不重要，a`set`是要走的路：

```
set(x['created_by'] for x in dave if 'created_by' in x) 
```

如果顺序很重要，请参考[这个经典问题](https://stackoverflow.com/q/480214/748858)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:28:14.060

您可以使用`set`工厂仅返回唯一值，然后您可以通过以下方式取回`list`使用`list`工厂`set`：-

```
>>> set(x['created_by'] for x in dave)
set(['admin', 'adam'])

>>> list(set(x['created_by'] for x in dave))
['admin', 'adam'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:29:02.607

把它放在一个集合中，然后回到一个列表......

```
list(set(d['created_by'] for d in dave)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:55:46.577

列表理解的一个进步是对可能没有“created_by”的项目使用 if 条件。在处理杂乱的数据时，这通常是必需的。

```
list(set(x['created_by'] for x in dave if 'created_by' in x))
>>> ['admin', 'adam'] 
```

# android - 在图像缩放时限制比例以适合屏幕

> ID：13138900
> 
> 赞同：1
> 
> 时间：2012-10-30T12:23:56.260
> 
> 标签：android, zooming, limit, scale

我目前正在开发一个应用程序，我需要一个可以放大的图像视图。我找到了正确的代码，但是放大或拖出时的图像不会停在图像边框上。我会很感激任何帮助，谢谢。

```
public class test extends Activity implements OnTouchListener {
private static final String TAG = "Touch";
@SuppressWarnings("unused")
private static final float MIN_ZOOM = 1f, MAX_ZOOM = 1f;

// These matrices will be used to scale points of the image
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();

// The 3 states (events) which the user is trying to perform
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// these PointF objects are used to record the point(s) the user is touching
PointF start = new PointF();
PointF mid = new PointF();
int picx;
int picy;
float oldDist = 1f;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ImageView view = (ImageView) findViewById(R.id.imageView1);
    view.setOnTouchListener(this);
}

public boolean onTouch(View v, MotionEvent event) {
    ImageView view = (ImageView) v;

    view.setScaleType(ImageView.ScaleType.MATRIX);
    float scale;

    dumpEvent(event);
    // Handle touch events here...

    switch (event.getAction() & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN: // first finger down only
        savedMatrix.set(matrix);
        start.set(event.getX(), event.getY());
        Log.d(TAG, "mode=DRAG"); // write to LogCat
        mode = DRAG;
        break;

    case MotionEvent.ACTION_UP: // first finger lifted

    case MotionEvent.ACTION_POINTER_UP: // second finger lifted

        mode = NONE;
        Log.d(TAG, "mode=NONE");
        break;

    case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

        oldDist = spacing(event);
        Log.d(TAG, "oldDist=" + oldDist);
        if (oldDist > 5f) {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;
            Log.d(TAG, "mode=ZOOM");
        }
        break;

    case MotionEvent.ACTION_MOVE:

        if (mode == DRAG) {

            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x, event.getY()
                    - start.y); // create the transformation in the matrix
                                // of points
        } else if (mode == ZOOM) {
            // pinch zooming
            float newDist = spacing(event);
            Log.d(TAG, "newDist=" + newDist);
            if (newDist > 5f) {
                matrix.set(savedMatrix);
                scale = newDist / oldDist; // setting the scaling of the
                                            // matrix...if scale > 1 means
                                            // zoom in...if scale < 1 means
                                            // zoom out
                matrix.postScale(scale, scale, mid.x, mid.y);
            }
        }
        break;
    }

    view.setImageMatrix(matrix); // display the transformation on screen

    return true; // indicate event was handled
}

/*
 * --------------------------------------------------------------------------
 * Method: spacing Parameters: MotionEvent Returns: float Description:
 * checks the spacing between the two fingers on touch
 * ----------------------------------------------------
 */

private float spacing(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
}

/*
 * --------------------------------------------------------------------------
 * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
 * Description: calculates the midpoint between the two fingers
 * ------------------------------------------------------------
 */

private void midPoint(PointF point, MotionEvent event) {
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
}

/** Show an event in the LogCat view, for debugging */
private void dumpEvent(MotionEvent event) {
    String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
            "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
    StringBuilder sb = new StringBuilder();
    int action = event.getAction();
    int actionCode = action & MotionEvent.ACTION_MASK;
    sb.append("event ACTION_").append(names[actionCode]);

    if (actionCode == MotionEvent.ACTION_POINTER_DOWN
            || actionCode == MotionEvent.ACTION_POINTER_UP) {
        sb.append("(pid ").append(
                action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
        sb.append(")");
    }

    sb.append("[");
    for (int i = 0; i < event.getPointerCount(); i++) {
        sb.append("#").append(i);
        sb.append("(pid ").append(event.getPointerId(i));
        sb.append(")=").append((int) event.getX(i));
        sb.append(",").append((int) event.getY(i));
        if (i + 1 < event.getPointerCount())
            sb.append(";");
    }

    sb.append("]");
    Log.d("Touch Events ---------", sb.toString());
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:37:19.487

它很难用矩阵做，所以我写了一些代码和一些数学解决方案来做到这一点。

使用此视图的 zoomIn()、zoomOut、setBitmapResource()。

```
public class ZoomView extends View {

public static interface ZoomViewClickListner{
    void onZoomViewClick(View v);

}

public ZoomView(Context context) {
    super(context);
}
private ZoomViewClickListner zoomViewClickListener;
private int viewHeight;

private int viewWidth;
private float ratio;
private float zoomFactor = 2f;

private Bitmap image;
private Rect drawingRect;

private int offsetX = 0, offsetY = 0;
private int drawingHeight;
private int drawingWidth;

private boolean scrollableHorizontal = false;
private boolean scrollableVertical = false;

public ZoomView(Context context, AttributeSet attrs) {
    super(context, attrs);
}
public void setZoomViewClickListener(ZoomViewClickListner zoomViewClickListener) {
    this.zoomViewClickListener = zoomViewClickListener;
}
@Override
protected void onDraw(Canvas canvas) {
    viewHeight = getHeight();
    viewWidth = getWidth();

    drawingHeight = (int) (viewHeight * zoomFactor);
    drawingWidth = (int) (ratio * viewHeight * zoomFactor);

    //      System.out.println("height:::"+viewHeight+"   width:::"+viewWidth);
    drawingRect = new Rect((viewWidth-drawingWidth)/2 + offsetX, (viewHeight - drawingHeight)/2 + offsetY, (drawingWidth+(viewWidth-drawingWidth)/2) + offsetX,(viewHeight - drawingHeight)/2+drawingHeight + offsetY);
    if(image != null)
        canvas.drawBitmap(image, null, drawingRect, null);

    if(viewHeight < drawingHeight) scrollableVertical = true;
    else scrollableVertical = false;

    if(viewWidth < drawingWidth) scrollableHorizontal = true;
    else scrollableHorizontal = false;

    super.onDraw(canvas);
}

float touchX, touchY , initOffsetX, initOffsetY ;

@Override
public boolean onTouchEvent(MotionEvent event) {

    switch(event.getAction()){

    case MotionEvent.ACTION_DOWN:

        touchX = event.getX();
        touchY = event.getY();
        initOffsetX = offsetX;
        initOffsetY = offsetY;
        break;
    case MotionEvent.ACTION_MOVE:
        if(scrollableVertical){
            offsetY = (int) (initOffsetY + event.getY() - touchY);
        }
        if(scrollableHorizontal){
            offsetX = (int) (initOffsetX + event.getX() - touchX);
        }

        break;
    case MotionEvent.ACTION_UP:

        if((Math.abs((event.getY() - touchY)) < 10) && ((event.getX() - touchX) < 10)){
            System.out.println("Action up");
            if (zoomViewClickListener != null) {
                zoomViewClickListener.onZoomViewClick(this);
            }

        }

        break;
    }

    validateOffsets();
    return true;
}

private void validateOffsets(){
    if (scrollableVertical) {
        if (((viewHeight - drawingHeight) / 2 + offsetY) > 0) {
            offsetY = (drawingHeight - viewHeight) / 2;
        }
        if ((viewHeight - drawingHeight) > ((viewHeight - drawingHeight) / 2 + offsetY)) {
            offsetY = (viewHeight - drawingHeight) / 2;
        }
    }
    if (scrollableHorizontal) {
        if (((viewWidth - drawingWidth) / 2 + offsetX) > 0) {
            offsetX = (drawingWidth - viewWidth) / 2;
        }
        if ((viewWidth - drawingWidth) > ((viewWidth - drawingWidth) / 2 + offsetX)) {
            offsetX = (viewWidth - drawingWidth) / 2;
        }
    }
    invalidate();
}

public void zoomIn(){
    System.out.println("Zooming In");
    if(zoomFactor < 3)
        zoomFactor += 0.1;
    validateOffsets();
}
public void zoomOut(){
    System.out.println("Zooming Out");
    if(zoomFactor > 1)
        zoomFactor -= 0.1;
    validateOffsets();
}

public void setBitmapResource(int id){
    image = ((BitmapDrawable)getContext().getResources().getDrawable(id)).getBitmap();
    //      imgRect = new Rect(0, 0, image.getWidth(), image.getHeight());
    ratio = (float)image.getWidth()/image.getHeight();

    zoomFactor = 1.0f;
    offsetX = 0; 
    offsetY = 0;
    invalidate();
} 
```

}

# java - OutputStream 代码没有给出任何错误，但缺少 txt 文件

> ID：13138901
> 
> 赞同：1
> 
> 时间：2012-10-30T12:23:57.660
> 
> 标签：java, outputstream, printwriter

我试图让我的程序将输出保存到文件中以进行调试。问题是，它编译时没有任何错误，而不会在任何地方创建文件。这可能是非常简单的事情，但我想不通，有一段时间没有用 Java 编码了。

```
public static void main(String[] Args) {
    FileOutputStream out = null;
    try {
        out = new FileOutputStream("out.txt");
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    PrintWriter ps = new PrintWriter(out);
    for (int l = 1; l < 1001; l++) {
        ps.println((translation(makeString(l))));
        System.out.println((translation(makeString(l))));
    }
    try {
        out.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:26:21.737

您正在创建没有绝对路径的 FileOutputStream。结果将相对于程序的当前目录。下面展示了如何给出一个绝对路径。

```
public static void main(String[] Args) {
    FileOutputStream out = null;
    try {
        out = new FileOutputStream("c:\\out.txt");
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    PrintWriter ps = new PrintWriter(out);
    for (int l = 1; l < 1001; l++) {
        ps.println((translation(makeString(l))));
        System.out.println((translation(makeString(l))));
    }
    try {
        out.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

将使您的文件出现在 C: 驱动器根文件夹...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:27:12.597

如果您在 Eclipse 中运行此代码，请在`workspace/project`文件夹中搜索，您应该在那里找到一个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:29:13.920

如果文件不存在，则 FileOutputStream 创建文件：请参阅[FileOutputStream(java.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.lang.String%29)

运行该文件时，该文件将位于当前目录中。要查看代码的运行位置，请添加以下行：

```
System.out.println(new java.io.File(".").getAbsolutePath()); 
```

这将打印出当前的工作目录。

# .net - 如何在 .net url 路由中实现这一点？

> ID：13138907
> 
> 赞同：0
> 
> 时间：2012-10-30T12:24:10.020
> 
> 标签：.net, webforms, url-routing

我正在为 Web 表单使用 .net 路由。

我有 2 条这样的路线

1) 路由名称 = "recover", routeurl = "my-account/recover" 2) 路由名称 = "recover-verify", routeurl = "my-account/recover/{email}/{auth}"

两者都转到同一页面。

当我登陆页面时，需要检查它是哪条路线，然后如何/隐藏相应的东西。

但是，当我这样做时：

```
var email = Page.RouteData.GetRequiredString("Email"); 
```

我在 1 上得到一个异常，而不是简单地返回 null 以供以后检查。

如何确定正在使用哪条路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:32:12.480

你可能会做这样的事情：

```
var emailAction = Page.RouteData.Values["email"];

if(emailAction != null){
    // Parameter is available
} 
```

# wpf - 从另一台主机中的 WPF xbap 客户端应用程序调用 WCF 服务时出现问题

> ID：13138915
> 
> 赞同：0
> 
> 时间：2012-10-30T12:24:42.970
> 
> 标签：wpf, wcf, xbap

我是 WCF 新手，我开发了一个 WCF 服务，它返回一个具有所需值的字符串，我在同一台计算机上的 IIS 中发布它，然后我创建了一个 WPF 客户端应用程序，我在调试模式下对其进行了测试并且工作正常，我尝试在 IIS 中发布客户端应用程序并在同一台机器上对其进行测试，一切正常，这是一个完全信任的应用程序。

问题是当我尝试在另一台机器上执行客户端应用程序时，问题是我可以从该机器访问该服务：

```
http://ip_address/OASWS.Utilities/Service1.svc 
```

没有问题，我可以执行应用程序：

```
http://address/OASWS.Utilities.BrowserClient/UtilitiesBrowserClient.xbap 
```

并且应用程序执行没有问题，但是当应用程序尝试从服务执行任何功能时，我立即收到以下错误：

```
Startup URI: http://ip_address/OASWS.Utilities.BrowserClient/UtilitiesBrowserClient.xbap

Application identity: http://ip_address/OASWS.Utilities.BrowserClient/UtilitiesBrowserClient.xbap#UtilitiesBrowserClient.xbap, Version=1.0.0.5, Culture=neutral, PublicKeyToken=5273a5e76684b5e7, processorArchitecture=msil/UtilitiesBrowserClient.exe, Version=1.0.0.5, Culture=neutral, PublicKeyToken=5273a5e76684b5e7, processorArchitecture=msil, type=win32 
```

System.Runtime.Serialization.SerializationException：从程序集“System.ServiceModel，Version=3.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”中键入“System.ServiceModel.Channels.ReceivedFault”未标记为可序列化。在 System.Runtime.Serialization.FormatterServices.InternalGetSerializableMembers(RuntimeType type) 在 System.Runtime.Serialization.FormatterServices.GetSerializableMembers(Type type, StreamingContext context) 在 System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitMemberInfo() 在 System. Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitSerialize（对象 obj，ISurrogateSelector surrogateSelector，StreamingContext 上下文，SerObjectInfoInit serObjectInfoInit，IFormatterConverter 转换器，ObjectWriter objectWriter）在 System.Runtime.Serialization.Formatters。

而且我不知道可能发生什么或该错误来自哪里，因为服务返回的唯一这个是一个简单的字符串。

有人有什么主意吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:45:51.697

当 WCF 服务中的代码抛出 FaultException 以外的异常时，我也看到过类似的行为——同样，仅在 XBAP 中。

# php - 高度 div 和图像

> ID：13138916
> 
> 赞同：0
> 
> 时间：2012-10-30T12:24:43.747
> 
> 标签：php, jquery

我的 div 高度有问题。我在左 div“image_view”中有一个图像，这个 div 的高度是基于图像的。在右侧，我有一个包含一些信息的 div。此 div 必须与 image_view div 具有相同的高度。我该怎么做？这是我现在的代码。

```
<div id="image_view">
    <img src="<?php echo base_url().'upload/images/'.$nome_immagine; ?>" />
</div>
<div id="info_image" style="height:<?php echo $altezza.'px'; ?>">
   content of this div
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:27:58.460

你可以这样做：

```
$('#info_image').css("height", $("#image_view").height()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:30:15.597

[或者，您可以使用getimagesize()](http://php.net/manual/en/function.getimagesize.php)获取图像高度并将其分配给`info_image`元素。

```
<?php 
$imagePath = base_url().'upload/images/'.$nome_immagine;
$size = getimagesize($imagePath);
?>

<div id="image_view">
    <img src="<?php echo $imagePath; ?>" />
</div>
<div id="info_image" style="height:<?php echo $size[1].'px'; ?>">
   content of this div
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T12:37:03.087

# 没有 JavaScript 的解决方案

您可以重组您的 HTML，以强制`<div>`' 与图像的高度相同：

**HTML**

```
<div id="image-info-container">
   <div id="image-info">
       <div id="image">
           <img src="" />
       </div>
       <div id="info">
           info here
       </div>
       <div style="clear:both;"></div>
   </div>
</div>​ 
```

**CSS**

```
#image-info {
    width: 600px;
    background:#eeeeee;
}

#info {
    float: left;
    width: 200px;
    background: #eee;
}

#image {
   float: left;
   background: #f0e;
   width: 400px;
}

#image img {
   height: 500px; 
}
​ 
```

这将迫使'`#image-info-area`变得与图像相同的高度，并且您可以随意设置`<div>`' 的样式。

[这是一个小提琴](http://jsfiddle.net/mmdYL/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:40:55.840

您可以使用 jQuery 的`height()`功能：

```
$('#info_image').height($('#image_view').height()); 
```

[jsFiddle在这里](http://jsfiddle.net/CaHaB/)

# expressionengine - 使用搜索和替换同步模板

> ID：13138927
> 
> 赞同：6
> 
> 时间：2012-10-30T12:25:05.160
> 
> 标签：expressionengine

当我在我的 Expressionengine 模板中搜索和替换文本时，使用“工具 > 数据 > 搜索和替换”它不会与文件同步。

其他人有这个吗？我想这不是什么大问题，因为也可以轻松地在文件中进行搜索和替换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:19:38.060

您可以使用同步模板工具（在设计->模板菜单中）来同步模板吗？

# matlab - 在matlab中冲浪插值数据

> ID：13138930
> 
> 赞同：0
> 
> 时间：2012-10-30T12:25:11.497
> 
> 标签：matlab, interpolation, surf

> **可能重复：**
> [如何在 MATLAB 中使用不规则间隔的数据制作冲浪图？](https://stackoverflow.com/questions/2848015/how-do-i-make-a-surf-plot-in-matlab-with-irregularly-spaced-data)

我有这样的数据：

```
data = [
x1 y1 z1
x2 y2 z2
...
xn yn zn
]; 
```

我需要了解这些数据。第三行，z - 将是表面的高度。但是 Xs 和 Ys 不是单调连续数据，所以这不起作用：

```
[X Y] = meshgrid(data(:,1), data(:,2));
Z = interp2(data(:,1), data(:,2), data(:,3), X, Y); 
```

因为我在第一行和第二行的数据不是单调的。

**更新：**

[TriScatteredInterp](http://www.mathworks.com/help/matlab/ref/triscatteredinterp.html)可以做到这一点。（感谢@Rody Oldenhuis）

```
F = TriScatteredInterp(data(:,1), data(:,2), data(:,3))
ti=1:10:600;
[qx qy] = meshgrid(ti, ti);
qz = F(qx, qy);
mesh(qx, qy, qz); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:40:58.937

我认为您正在寻找[TriScatteredInterp](http://www.mathworks.nl/help/matlab/ref/triscatteredinterp.html)。从文档中：

> F = TriScatteredInterp(X, V) 创建一个插值，将 V = F(X) 形式的曲面拟合到 (X, V) 中的分散数据。X 是大小为 mpts-by-ndim 的矩阵，其中 mpts 是点数，ndim 是点所在空间的维度（ndim 为 2 或 3）。列向量 V 定义 X 处的值，其中 V 的长度等于 mpts。
> 
> F = TriScatteredInterp(X, Y, V) 和 F = TriScatteredInterp(X, Y, Z, V) 允许在 2-D 和 3-D 工作时以替代列向量格式指定数据点位置。

# perl - Emacs 中 perl 的语法高亮已损坏，是否有修复？

> ID：13138932
> 
> 赞同：4
> 
> 时间：2012-10-30T12:25:12.313
> 
> 标签：perl, emacs, cperl-mode

我是一个 perl 程序员和一个新的 emacs 用户。我在 Windows 下，使用 cperl-mode 来编辑 perl。Emacs 版本是 24.2.1。这是带有一些示例代码的屏幕截图：

![](../Images/b48b12efd5c49bcf53d0c13e7ae7a181.png)
[（来源：[breqwas.net](http://breqwas.net/dropbox/perlsyn_emacs.png)）]

1.  *明显的错误：它在 (a => "b" ) 样式列表中*突出显示数组、哈希和未引用的文字值
**   另一个错误：由于非默认引号符号，它将正则表达式中的第一个单词作为数组高亮显示*   不是错误，但看起来很奇怪：它在使用数组和散列时随时突出显示（即使在注释中，呵呵），但标量仅在声明时才会突出显示*   不是错误，但看起来很奇怪：与函数相同的故事：声明时突出显示，而不是调用时*   不是错误，但看起来很奇怪：为什么“打印”、“说”和“系统”有不同的颜色？*

 *我可以继续前进，但我希望这能很好地解释“破碎”这个词。

然后我学会了神奇的 Cu Cx = 组合键，它显示光标下文本的文本属性等，希望能做出更好的自己的着色方案。在这一点上，它开始变得更没有意义了。

“打印”具有*cperl-nonoverridable-face*。“死”有*font-lock-keyword-face*。同时，两者都是函数，可以（并且经常）被覆盖。“系统”有*font-lock-type-face*。为什么？函数声明有*font-lock-function-name-face* - 这没关系，但“use”的参数也是如此。为什么？函数调用和标量根本没有 face 属性，无法突出显示。为什么？等等，等等。再一次，我可以继续前进。

有没有办法解决这一切？是否有一些配置可以让我将词汇单元重新映射到其他字体，或者其他方式来使语法突出显示不那么疯狂？

为了避免“perl 不可解析”的说法，这里是我要迁移的编辑器的屏幕截图，代码完全相同：http: [//breqwas.net/dropbox/perlsyn_pn.png](http://breqwas.net/dropbox/perlsyn_pn.png)。看起来更合理。

* * *

**更新：**到目前为止（在这里提出这个问题后 3 周）我还没有找到治愈方法。我认识的所有使用 emacs 的 perl 程序员都忽略了这些问题。似乎没有更好的用于 emacs 的 perl 荧光笔。阅读 cperl-mode 文档提供了一些解释（现在各种元素的面孔选择似乎不那么疯狂了），但没有提供任何答案。我给 cperl-mode 维护者写了一封电子邮件，提出了这些问题，并进行了一些挖掘，但没有得到回复。

是的，你没看错：似乎 emacs 社区在 perl 出现的 25 年里无法做出好的 perl 语法高亮。这是一个悲伤的故事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T14:24:49.750

您可能想尝试`perl-mode`而不是`cperl-mode`. 如果您发现其中缺少的功能，我们也许可以`cperl-mode`毫不费力地移植它们。 `perl-mode`的突出显示没有`cperl-mode`' 那样华而不实，但它确实解决了您指出的一些问题。

至于“声明时高亮，而不是调用时高亮”，这是因为 Emacs 通常以这种方式高亮显示。我发现突出显示变量和函数用途的好处为零。我保留变量用途的突出显示`perl-mode`主要是因为它以前就在那里，我不想与心怀不满的用户打交道。此外，在 Perl 的情况下，突出显示变量声明和使用相同的变量可能更容易，`perl-mode`而`cperl-mode`必须做额外的工作来区分这两种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T03:30:34.093

使用 Emacs cperl-mode 时要注意的另一种突出显示问题的语法与用于注释代码块的 POD 注释有关。这是演示的屏幕截图：

![cperl-mode 语法高亮错误演示](../Images/3d6545f303725330d07a9d24f115bca9.png)

很容易错过使用 POD 指令而没有空白行填充的注释掉的代码，如我上面的“不推荐”示例中所示。在 Emacs 中查看它时，它只是不会作为注释引起您的注意，特别是如果注释块很大并且跨越多个屏幕页面，因此“=cut”行甚至不在视图中。

值得注意的是**vim**的 Perl 模式可以正确突出显示 POD，而不需要根据 POD 规范填充空白行，尽管我会提醒 vim 用户避免依赖该功能并使用空白行填充和 '=begin comment ...=end如上所示和[推荐](https://stackoverflow.com/questions/3608957/what-are-the-common-workarounds-for-multi-line-comments-in-perl)的评论指令。

如果 Perl 有一个更简单的多行注释语法（例如 la '/* ... */'）而不是容易被滥用的 POD 机制，那就太好了。也许有一天我们会在 Perl 6 中得到这个？

在 Emacs（对于任何语言）中进行多行注释的另一种方法是通过内置的 'string-rectangle'：Cx rt 然后输入 '#'。要取消注释块，请手动执行或编写简单的宏。*

# c++ - 使用 StringCchPrintf 从子字符串构建字符串

> ID：13138936
> 
> 赞同：2
> 
> 时间：2012-10-30T12:25:24.020
> 
> 标签：c++, strsafe

我正在尝试从来自错误消息的子字符串构建字符串：

```
// the error message
const char* error_msg = e.what();

size_t const cchDest = 100;
TCHAR pszDest[cchDest]; 

LPCTSTR pszFormat = TEXT("%s %s");
TCHAR* pszTxt = TEXT("The error is: ");

HRESULT hr = StringCchPrintf(pszDest, cchDest, pszFormat, pszTxt, error_msg ); 
```

我希望第二个`%s`将被替换为 的值`error_msg`，但是输出是：

`The error is: ☐☐a`

我如何修改上面的代码以显示子字符串？

**EDIT1** 我也尝试了以下方法，但我得到的只是一个盒子。

```
TCHAR* pszTxt = TEXT("The error is: %c", error_msg );
HRESULT hr = StringCchPrintf(pszDest, cchDest, pszTxt); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:46:25.667

这有效：

```
LPCTSTR pszFormat = TEXT("%s %hs");
TCHAR* pszTxt = TEXT("The error is: ");

HRESULT hr = StringCchPrintf(pszDest, cchDest, pszFormat, pszTxt, error_msg); 
```

# javascript - 将 Javascript 传递给重定向的网页

> ID：13138937
> 
> 赞同：1
> 
> 时间：2012-10-30T12:25:33.183
> 
> 标签：javascript, redirect, iframe, web

我想在触发重定向时运行的代码是转到另一个网页（或本地 html 文件，在这种情况下都可以），但是传递一些 javascript 以在该页面上运行，因为该页面可以嵌入内容框架。需要这样做以允许我在重定向时指定 iframe 中的内容。

说得简单点。我怎样才能做到这一点，当您转到时`website.com/about/`，它会重定向到iframe 中加载`website.com/`的内容？`/about/`

```
<head>
    <title> CodeBundle </title>
    <script>
        function home() {document.getElementById("loadedpage").src="home.html";}
        function about() {document.getElementById("loadedpage").src="about.html";}
        function reviews() {document.getElementById("loadedpage").src="reviews.html";}
        function tutorials() {document.getElementById("loadedpage").src="tutorials.html";}
        function blog() {document.getElementById("loadedpage").src="blog.html";}
</script>
</head>
<body>
    <header>
        <br><hr><font size=27><a onClick="home();">Code Bundle</a></font><br><hr>
        <div ALIGN=RIGHT>
            <font size=6> | <a onClick="about();">About</a> | <a     onClick="reviews();">Reviews</a> | <a onClick="tutorials();">Tutorials</a> | <a onClick="blog();">Blog<a> |</font> <hr>
        </div>
        <iframe id="loadedpage" src=home.html width=100% height=100% frameborder=0>Iframe Failed to Load</iframe>
    </header>
</body>
</body> 
```

这是我的 website.com/ 的 index.html

我想写一个页面，这样当你转到`website.com/about/`它时会重定向到`website.com/`运行 javascript 函数`about()`，从而显示关于页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T12:35:00.473

您将不得不使用查询参数或片段标识符传递一些数据。

看：

*   [http://en.wikipedia.org/wiki/Query_string](http://en.wikipedia.org/wiki/Query_string)
*   [http://en.wikipedia.org/wiki/Fragment_identifier](http://en.wikipedia.org/wiki/Fragment_identifier)

无论哪种情况，您都会在 url 中出现一些内容，它看起来像：

```
http://www.example.com/?page=about 
```

或者：

```
http://www.example.com/#about 
```

或者 - 这将是最好的：

```
http://www.example.com/#!/about 
```

因为它可以让您使网站可抓取。看：

*   [使 AJAX 应用程序可抓取](https://developers.google.com/webmasters/ajax-crawling/)

* * *

现在，在阅读了您对[theredled 答案的](https://stackoverflow.com/questions/13138937/passing-javascript-to-a-redirected-web-page/13139006#13139006)评论后，您*“定期添加新内容并将其加载到嵌入的 iframe 中比每次都编写新的 html 更快”*，我不得不问这个问题：您不是**在您的网站中****使用[模板系统吗？](http://en.wikipedia.org/wiki/Web_template_system)**

请记住，制作 AJAX 加载的内容并使用片段标识符来显示正确的内容并不是因为页面创建更容易（事实并非如此），而是因为用户体验更快且响应更快。例如，参见 SoundJS 库的网站：

*   [http://www.createjs.com/#!/SoundJS](http://www.createjs.com/#!/SoundJS)

当您单击顶部的 PreloadJS 链接时，您将转到：

*   [http://www.createjs.com/#!/PreloadJS](http://www.createjs.com/#!/PreloadJS)

内容重新加载，地址栏发生变化，但页面实际上**并没有**重新加载。（你可以看到它是可以正确抓取的，因为如果你[用谷歌搜索 ReloadJS](https://www.google.com/search?q=preloadjs) ，它就会显示在结果中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:28:53.530

通过用户会话传递内容？

然而，这是一个非常肮脏的案例，也许你已经知道了:)

# oracle - 使用模型子句计算oracle中数据集的经验分布

> ID：13138938
> 
> 赞同：2
> 
> 时间：2012-10-30T12:25:36.107
> 
> 标签：oracle, model

我可以通过这种方式找到经验分布

```
 select command_type, duration, round(percentage, 2)
    from (select distinct command_type,duration_sec,
                        percent_rank() over(partition by command_type order by duration) percentage
          from command_durations
          order by 1, 2) 
```

问题是如何使用 oracle 模型子句来做同样的事情。我从这个开始

```
select command_type,duration,dur_count from command_durations
model UNIQUE SINGLE REFERENCE
partition by (command_type)
dimension by ( duration)
measures(0 dur_count)
rules(
dur_count[duration]=count(1)[cv(duration)]
)
order by command_type,duration 
```

但现在我需要区分记录，以便能够继续寻找经验分布。

如何在模型子句中区分记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:31:34.750

如果您想获取该查询并在其上使用“distinct”，一种方法可能是将其包装在 From Subquery 语句中，然后执行不同的操作。例如：

```
Select Distinct command_type, duration, dur_count
From (
    [Your Code]
) 
```

让我知道这是否有效。

# callback - gmaps4rails 回调并不总是有效

> ID：13138939
> 
> 赞同：1
> 
> 时间：2012-10-30T12:25:37.993
> 
> 标签：callback, gmaps4rails

可能是一个简单的问题，但它多年来一直在困扰我，我无法在任何地方找到答案。我正在使用 gmaps4rails gem，我想在地图加载后添加一个回调函数。当我使用基本助手时，一切正常，如下所示：

```
<%= gmaps4rails(@json) %>
<% content_for :scripts do %>
    <script type="text/javascript">
      Gmaps.map.callback = function() {
            alert('callback');
        }
    </script>
<% end %>
<%= yield :scripts %> 
```

但是如果我用 gmaps 助手替换 <%= gmaps4rails(@json) %> ，回调就不会发生：

```
<%= gmaps("markers" => { "data" => @json }) %>
<% content_for :scripts do %>
    <script type="text/javascript">
      Gmaps.map.callback = function() {
            alert('callback');
        }
    </script>
<% end %>
<%= yield :scripts %> 
```

谁能建议为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T08:21:33.387

当然，答案总是在您拔出头发并在这里询问的那一刻出现。问题是我使用的 gem 的版本。我仍然不知道为什么它不适用于 1.4.6，但 1.5.5 似乎可以正常工作。

# c# - 使用 Telerik RadEditor 将图像转换为流并将其显示到浏览器

> ID：13138941
> 
> 赞同：2
> 
> 时间：2012-10-30T12:25:40.973
> 
> 标签：c#, asp.net, telerik, radeditor

我在我的 aspx 页面中放置了一个 radeditor 控件，并将一些内容从 microsoft word 复制到其中，其中包含图像和一些文本数据。然后我保存了数据。我标记它正在将图像转换为流。我注意到图像的字符串是这样的：

```
<img alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASUAAADfCAIAAAA/e1LrAAAgAElEQVR4nO19T2zjRr6mjn30YQ86vMMTkEMIzCHazcyE7/X8CSfdSTOd96b5pjMxMz2Jh3EStaYnYwg+GIIvBuGDQfhgCD4YhA4G6IMA6qBdarHCUotdYUtvRm+oSTRDzUQzVBIlqXQrnUpH3eECPtQeKKtl8Y/+2JbdUn34UPipXCyWKH7+WCR/ZAgTEBBMC6HzHgABwRyhq7dm+1Gz/bDZfti812ne/aZ595vm3QfNuw+aXzxofvHgoy8efHTvwcf3Hnx875tW+5tP251Pv3z42f2Hn91/BL96BNG3ENlfIPuLr+0vvv5/8Gv7iwdH/Nr+4msbfm1DZEP07efHaDuEyIZHsQe/+tbhZ199++n9R5/ef9S6/6j15aNP2g+7vOfD9sOP2w8/vvfw43vd4KPH7DTvdZr3OpbDu9948u93O3+/17Hudv7u8F7n73c7f7vbLf/2xTcOGw7hgwZ88CF88OHnx/jXHj978JfPvv7LZ1/XP/3abCHzE/TnT7760ydf/emT+x98dP+Dj758v9l+32q/b7X/2Meq1a72BVXryz9aX/6xef+P1v33m/ff/+irDz7+6oOP0Qef9Ph17ZOvP/Dgg6Oyy1rrQa314E+fPvjTZw/+/Pk35ucdEz6sf/HwL3cf/fXeow/vPWq0v3X4ty/tPn77ty+//Vv720b7UeNelx/ee/jh3Yd/vfvwL1906rBjfv6N+fk3f/7sQe3TBx988uD9T77+48fI+AgZ1ld/sL76j7/fr/ztfqXx5e8bX/7+w/bvPmz/7sN7//7XLstH/Hc3/9JluY8DbX734b3ffdj+/YdfVhr3K3+7/x/WV3+wvjI+QtWPv37/kwcffPpN7fNv/vT5Q/OLh+bdR/V7j/5y79u/trv88Ev7wy/tv37pfHxUv/uofveheffhn7/o1GCn9nnn/c8e/PHTB9VPH/zh068rH6Pff4R+17wP/v7l/220/89f7/3v+hf/689Qr332P9//tFD95H/84eP//h/N/O8t7Xd//2/lxn8FHx7T29XXYldfe/fKa+9e+fk7V37+9pVX377y6vLVV5ev3nzL4YuvvvXSq2+99Opb136+zL72Nvva2y8vvnOdf/f667Hrr8eu/+L29V/Er99y+OseX74Vf/kXcfb12+zrt6+9fvsaH+vj7T7Gu3z9OPn4Nf72S4u3X1q8/eJrsauvxa7+/N2rr7575dV3rtx854Wbb3vxnRdefeeKw5+/e4zdLzjAd144Yn/Lq6+9e9VZ42LsxcXYi/ztl/jbL71++6XXXYM8xtsO2ddvs/zx77sYu7YYe2kx9uJrsauvvXvVWfWr7/zk5tvMz5af/7flH3Nv/Zh760ec8KMbwg8d/lT4wU+FH/z0V8cpPOYN4Qc3hB/eeOuHnMNlN3/gwx/+29s/+tnbP7r5zo9vvvP8z2M/eS32An/7yuu/vvqLX7/0yzvX3vgN++Z7L7/53vWl43zzvetvvnf9jd+8/Madl395h/3lr6/d+vW1X8Rfej3+4uu3r/K3ryzGXngt9pOfv8u8+u7zN9/58c/e/uG/vf0Dbvnyjbf++afCP/2rQP/Lr5575Vffv770/etL33/5ze+9/Ob32De/y77xXfaN7147xmc9+EtPfvfaL51Fvse+8b2X3/z+9aXnri/R//Krf/pX4Z9vLP+Ae/uHP3vnx6/GmNdu/4SPX/nFr1+89ZuX3njv2pvvvbz02+u/+u11YeWVI/5LH48qf3vd4a9++/Kv3mOX3ru29N61N3/z0hu/uXrr1y+8Hv8Jf/v512I/evXdH/zs7X/m3vqnfxWee2Xp+9ff/C77y2dfuvVfXnz9P1/loy8sHtObuCESEhKeEc2aQfRGSDglEr0REk6PRG+EhNMj0Rsh4fQ4ht5CxzG1IQ6sbsprJyQ8RY6qt3Pcy4nACGeGJ9Wb2/E8bdDPG0ep9Pw41tr9VkRIOGWeSG/uHf10Kz1XfSp9EhKeC89fbwPOc3Z6I6ojPHeev96GrujkehOJ5AgvBudFbwHfgpBwajzp9QC/moF4FNsZ2qdfVyOunYiN8NxJrncTEk6PRG+EhNMj0Rsh4fRI9EZIOD0SvRESTo9Eb4SE06OH3vChjQ/xEUlMYhKfTuynN0xISHjq9NabbdvYxqQkJSlPt/TxNxvjvkYkJjGJTyX28beOjW27V1ptS6vpWkM3mqZSsqQ8NCEcaDNWCcpAz+taTjOrhlExzKppVAx3rOd1LauZFWPCdbVtBNFJxuneDmpN1xsANEy1bEl5y2qfaDuQct5KP3/r/hnbWKlpfJ1J1GS5qUktJNUhn7USGVMuqzaacMWgoKd2UuqBiiBCEMEWRBB2yyaELQibEEGoZlR5N6UXdL+hB6/FqBigBKy6NdbY3P9unFKp6VyNTtaVVENNtWypBvmcFc8YckVDk24HUs5b6edvyO7YdgfJBZ2pUYkab7R1ywaijfmmHc9BftNMlkQpr+CO7bQcq9QLut2xlX0FtRGC8FgJEYQQQYQg1LKa3UGgCDz7cc6uevaPO7ZZNY0yACUAigCUgFUzzZrplDYKGttRt8fq5SJgapFkTTDaOrSNZAcLTSzkIL9lJkpiqqDaE20HUs5b6eNvHdvuIKMCoyWKqUfkVhzahomxfIiFpi1kLW7TFHZVYSOl5g27g3Bfp6PEel5XM6p6oMI+gcHWYOm00fOaZz8DwsAd224j51gUFHVQAkbZMMrArBpG2bAallE29IIOm5ZZMwPG1i/j7naoQqpIMQ0q1YzDQ9PEWMFYaNhCzuI2zPiuym9Ik20HEs9b7K03hJCNUHJDjWQj0QIVb4jSIZYxFjuYryE+Y3GbBrMM5IaQqiZtZDvtHY4SazlNy2rKvtLvZj2ZoVZXhFpGVfYVPa979tMVRl+9WTNhE1p1E5SAozezahplw3E5q25aDctqWFbNDBhbf7dOfWJDjeQiVJ6KN0XJxgrGYgcLNZvPWPymySwBuSlIlQTujL0dSDxvsc/xJEI2QvSNJLUqRNd0pgjZms03ba6G2AJid032jsHE1FSTTVRZCOFRp7b9eAVBsZ7T1Iyq7qto0NngoL/tq3pe8+ynTxjdeqtuwSaETegcOhplw6yZWk4zSsCoGA7NqmFWzYCxHXX7uJ6+KUZWeXpNZwoWV7e5hs3XbbYA2T2LuQPYmJZqMMkqB1tjbwcSz1vs429tZCNEPStGbvHRFZXeMZiMRWcses+gN3VuXeNXNOaWLBQpJkuZTdNpj9rQRmiUWMtpjnd5Hkb2Si2jKmlZz+ue/fT01qu36iaCEDYt2IRm1XCOJI2yAVvQIWoh2IJGxQgYm9Ntfz31TJJaEqJ3FHrXpA8sOmtF9wxmS+fWVX5FpxfleClKZyJWyxp3O5B43mJff0NtFL0sRr6TpJYkehlEVwx2TdcKQMmDVFZTS4a4p3JpLrrKWw2rv+uBfG3P1Ws5TT1Q1X3l2JlJV6keqMq+ouVUv6H3/jU49WbNdM5tWg0LlIBRMfSCblYN2OyKEDYtq2EZZRCwadwypi+L4e8ko0up6DKIrhrsqq4VgZLT5ZyuloC0p7J7bHRNMI9vBxKT2B37+RtEbRS/o4SfEqOXlfA6HdmhhT3JqJpKVtMrploASkZTDzRxU0MQOe17ZZ/YjtX3Si2rqhlV2VeshtVzs8cW1ISwBa26qWZUuetvHv309NarMWsmakHYhEbFAEWgF3SjbMCmZXXF1pWiUTE8R+WUPX/r1cTvKMxTieQzvPIMpTxDpW5y4EBVcrpeNrQikA9UNaMlN1W7bfv1SUpS9vYu7+NJ1IZ63ow8JVHXxEtrl0KrIWaPVcpWckdR83pyQ2JvCfHVZGpP6XVnH5ecZ70Ta1lNOVDUA7Vb7ivqgaLsK8q+oqTlXimnZSWtaDnNs5/HB35H9WbNtBqWXtD1gq7ndee0pNWwHFuznPLI3/zG1vW3vnqwp8lP0+Aaayzy4AanPRtVLzPimqgWQHJD5G7F4ytJOa0G9EliEqOjvctLbxA6F8QSd1T6eTm6xobXwpeWF6ibDL8hyUWDX47HV0VQs+QD1axbTnvoLDVCrGZUNaMqB4pzcaznRc55RadGy2nynizvyXpO8+ynq7e+erNqmrXuycmewBxP64+NshEwNqfb/npjNQmusRhj8yaPrrAY2dp3KPEKKxcMIZYQVkVQh6l91Rp/O5B43uJAvUEIW1BYltmbMrMrRDNMeC288FyEvpVgYyJzKy5uSmrZSOWAVgRjrV7LqsqBou4roAxgCyppRdlXjIrR1UbdMqqGltPk3ZSSVtSs6jf03lCderPaNTQPOhcD6qbVsEAZBIzNLWP9MgNe4YwbnLN9wE1e/w4l/acF5laCjYnsrURyQ1TLppTV9ZJxcX5aEl/A2FtvsGU5RC2IWlBcl9hYnN7muLTELKfoxQQfS6R2Unpek9NyKqun8oaSUZ32/cv6xeqBoh4oSlo2KobVtJS0LKdlUARmzTRrplk1zIqhZVV5T5bTsp7TPPvpGlFfvVExYNOy6v0C84iNshEwtl63vXr9Mg2eY6xXOIwxakGwyOv/GEmFI/Rigo8lu9thT5ZzQMoBJaONvh1IPG+xj7+1YK+RU1pVU8uqyp6iHqh6XjerBmx0O9LymphW4xsp91J+pZpRlX1Z2VecAz95L6XsyXpeM6umUQHOfY9aVkvtppQ9Wcuqnv0MCAO1jvytblp106r3gsEYlEDA2Lr+1ldjrCa1pymMsX6D06+xdhtp4bB8jQV53awC1Oy21HKamFaFdWn07UDKeSt9/K1pwaYFm+ZR4BGjJjRrplEznWsD8XUxuH1/rB6dJnEuSVt107kM3b0qXQZG+cjf9mQto3r209VbX71RBkd0OgGgBIwSAEUdFHW9oIOCrud1Pa8FjO2o28f1VkHTr7DaUxHwNAWeimj/EFGfjVp5vdemewBcMpN7amJdGn07kHje4mC9+S6GWpbVsEDZULKalFaUrA4bY6zerBjO2Ug1o+gFXc2qWlZVM4qaUdUDxTmVoqQVJS0racVPHn16O81N45YxbFpWXgOxuPI0pTxN6UuCldcfL+tsh5wupRUlp1vjbAcSz1vsrTerYcKGaTVM2LAucixuiGfR/9EWuBDfkcSzFPv428UYHIlJPGOxj7/VDathkpKUpDzd0k9vplU3SElKUp5u6a03QkLCM6JXfveJYSOI8lGYo2CBQ23LgiiVN1IZw2ohfHjy7gkInkicld7gQcSuxnEjgZsSykWUAzq+G7cOIuwmZDZ0CNHJV0FA8MThzPS2H4YFXivpqBjFULILYTu7gHNhNmPzaYtd11CbSI5g7nCG/gYLPLWvUbu0XYziZhyXLtm5MJvFQgGISBDSom2ffD0EBE8Szmz+1ra0OqQONGqTQ0UatxXcku1chE5j56YtUDFAxVDzupLVUgequ4f+JHHn44ir9mw50BsBwbngrPSGD21+T49sGeY+hTJhlHW4QG9io2LoVTPyCh95hY8+E9WrZmp/UG9uVZxcbxN0RUBwujgzvWHM7WqRGAjfsMIxI7JuUFtWdBNFl2yjYtiHGNkY2diEyGhCKa0MLOupt353cn/sL90+5qk3d0u3DRJXJDhFnKHeQA0uPK0uvKKEcwm6mmBLErMJojcQqBhyWhE3JXFTSqyJiQ0puS27F/dUlGezXuOAlsH+5j5k9ashIDgJJtSb0ya4xId44R+0SzeSoXI03GFoW2BqIrWlgIoBke3QaiMLouRWKmBdnvO3gNnd6PO3oZ2EjmPoZiEgCMYZ+hvG2GqiS0/LoTtcqBS9BOkwpsN1DpSAuJ1KrIuJdTG+mkxsSIkNKaCTYEWNrreAmlH8jYDg5DiRv40C2EKR51OhVTqUoUI5ZmEnoZeAVjIcqgWg5PT4elBvF0RvRHsEJ8fZ+psD28Z6xWB2BWZbBFVLLwKtZGhFoBWBmteVnB5fG1xjwOGfZwPPo82BGvfA3GsJqDnRJiAgwBhPwd/cUHO6VjLUIlCLQMnrSlaPryYn7u2MQARGcBaYhr8NQMlpWhGoBaAWgNxkQHNBuDB6I25GcKY4B3+T91X1SG/ReojBIWHlouiNgOBMcQ7+ltyUEhtSYl1KrEvxNVFYSfKxxJmukYDgguDs/e0Qm00oZvVUxrRaJCeAYK5xtv5m21jIpRIVKV7S2API7iIxDU6rcwKCJw5n6W+HmM7HE5jD2NbbmKtiPmv3kgO6FwN8kgMICGYSZ+hvRt0KpSPxZgIhJHcwU8NsGvWSA6LPRP2SAwjGAjmbOhQXZxONobeAR6B4tufW5YWbKrVucgc2XcHRLGY2YC85wGojv+SAHoZe9Q5uE1yPj5/997y5xK+9u/HQZf0G7/d93aNyfwzugWyx/s49lzpJTfCXDbl+KQfj6W2semFTDT8PwstGZFuL7hj0HTt6ExoVA9k2RLYjNqMBxV2P5AAcmBDg9wP0b4sRO/RcxPNHGnFdfssOHXzwWvzaD+0teKVzssWCv/5kNaN/hX6cod6sBrr0j9qlNE/ZDAcTzLZG3TR7yTjx1WRwMo5nn+7fbMS9Z/QOsf/mO+HeEzz44LUM/Ui2WEDnwQuOq6WxVjHQ8gz1hjGOr4LQshCqU2HMRA4ZKiM+TsZpo4BknJPvPT2M2CF2bdngTjyb9Rq7lx06eL8huTsPGHxAb3O+xdwLBg+y11Vwm+Cv78bYenN/Gd/8N4zxIU5ugFCMDeUjoSIT3hBBeVBviU2PZJyx9p6A3ylgo7hbuvcedydD1zXQydDBBzTz63yUlsErncMtNnRL+kll3O028KUGNt3Z+psDqwUTWUnK6wjZveS3+EoyIPnNb7MOAPts0ICtNvBx3L1n6Lr89p7gwfsNdehe4venUVY6V1tsFJEEf4VRVjd0qWnorR+95DfnFsqA5LcR9wDPLz/6rzLWHjx6DxMMfpQxjPVxlJXOzxYL/qYBbUb/vqNsiqnr7Sj5TS34Jr/1DzHgf1tw5cCyfh26G3g2PvkAhjbzG4N7qYAassUCtljANx3o0O+bjvJzuJv1//UMr7954nHyW+HiJr89QfD7aQncuAjbatr5AY+T3/L6RUt+e0JxEXajJwIXYUNNW2+95Dclr5PkN4J5w7T11kt+i6+LJPmNYN4wbb1N2Pkh7r5BLkveIEfwBOMc8rvHBUI2syNxuSRfkNm0Qd4gR/Dk4qL7G2zbVJYV26Jpm1LV4oqIvEGO4MnFBfU3UAL91Iu6XtABwkITn9Eb5C7CyatgXPwREgzFBfU3vajjQ4QPEcZOaesFXYSYbWI6jYW8KuIoW2JA3fRcPOCaox88r7EGN3bHo68r+MLo0JUSPKG4oP6mF470dog8vY47DEVKC9ye771gk+ntLBoHLz56V0RvM4AL6m9qVu3XW9fo+rwunI1e2mC59aDcuYG7ddz37wzUeC4y9OPQNp53/XiO1vMGooCvM8qWJLhQuKD+5ujN09kcvVHrWmRRBWXLvaznDjrwV7+aoUeVwYsH13h+HLdDIrMnGufjb0NeHIexnJa7znYcPb0xWzYTMzzPl5yF3gbM6uR68/OuUUZIJPfk4oL6m7In40OkF3WMsbin89s6v63jPr1Fly3PS3AhF/CJ9XYSO3L34P44WYdEdU8iLuL8DZQNNathG+oFfeBPjt60nKbndc+7TDz37NnTm2cnBBcfF87fQMUwmpa8J6OWoeU1jLGY1ukNEF0DGGMtr2FsawUdVAw1p7kX99Ob+/jN84jO3SCg/dBFgkflHvmAa/mNkJjbk4sL529KVjWLurXExS/T8u7go4TkPdkqgdSGCNtI8nmQnhvBfkJAMDVcOH/T8pryPG1dpswbtHSNFlcT8VWRjYlsTJJWEuLztPJ81HyFBluiPPKD0IneCC4ILpy/4UOspOXUs1FwjbZWBBtC+xDbtm3bNixo5iu0+VxUDy8oa0m7c3p3cxEQTAUXzt8wxvgQI4S0rCptiMl1MbkpJbek5JaUXBbk1QTIaQiRO5UJnkhcPH+bFJeeip8uz2icBPOMC+lvLtht08rHj1Ow0bGbS4jeCC4+LqK/2R0EMvF+WsWE3eiejUxmMbNv2A3ZLBx78AnRG8HFx0X0N6uUtJsS7mg96mnBrokDJHojeOIwDb2N++BKWBFxR8MwhWEKt1O4ncIdTd3l9LTQb3p+ehuo7C+J3gjOF1PS21j1VrlPb48lpw5QTwv9S/VE4iceojeCc8eF1FtJxB0VtySHelESdhPClqqkJbvRrbQb0oh6w0f+NtCs/2NwDQHBaeFi660p6bkkX6MllOIKmNlT5b0Ebkq46as3T2kN6NAdYy/3O50vT0DQh+npLXQcvXp3aRZFjBRHV+wqHy+mpCqmDzBfT7JZCjck3JDshuinN08tYX/j6tUQvRGcNS6iv5mFJG7LuCHihkjfTC3EdCqn0WuI2VKoOxyui7gu2vUT6S1gwiYsC/FYnJSkHKWcQAsXTm9GPonbsl0X7boob0mXluLhNk1VEuFFPRET7Zpon57eBhbEGMdjcXyICQmHMr48M3qDKeciG6qI0kYyshEN79KJtQQsJXvX3/zOl7hr+v/kN8frfRSWBWzb457MJJw34kN8cf1trOtvRi6JW5L7AvcAtT2+f6nT2o7xWNy27YWnElrRJCT0ZFdvF9PfxoW+LwxQSwvaHq/ucMo2p2yx8gabWmdSa0z/Uqelt56/nfuPSnhheempOD60L6i/TQfn6G/WDnXuewDhNDlT/jYZzsXfrB3KKCg4HzEKClHd/PBCz99OBWONCrURqFjSgRHf1qV9oJet0V+mM5a/mUUV5ylc5XGeMovque8HhNMh8bfH0CsWuy3zGTFRlOIHGrsF+B0jvgnkojrKIxj8/E3JGqk0SOzowpbOr2vitm5uUzgfwRUOF2lc5XE+Ym6fssWFQqGhNSfskHACzv78bcRRyTkjui8IhWTiQJXqCrcHuH1D2De5dcBvaVrBHCo5t7/pJUvKAGZdFnJSspyKH2j8nslvQm5P1jOpk/ubc8ON35+Ca/o/+sXBHbpH0htPf0nYT+JvGGOsFU1qj6PrUQPp9qGplS0hZwolKGQsbhMksgq7lgJlCx8GdeL2NzGtU1txviYoVT1V1oWswWcsfteM7wJrh9Iz8gnnbxdEb5NJdD45m/O3sS7coTaiNuJUhReavGUDG0OrhaQm5MtQyFj8tiG1ebHNsCty8LuIB/xNyRn0hhit0yoWMbZhCyXLUKggfgcm86pYTXB3FPMEZ0p6e/OAWvp9xrPGcynPbkfpR/PXtl8P577TnyNn09/GujFFyYHQHhXOsHQ1rnQk2LalAyBUUbwIuX2L2TKFWoKvxNmdlF7yeKtODwP+lkqDhQxNV4QUlGxkgTpK1BFfgtwWSpSSMqaYnURyS5/4l3PrzS2bYONyH/udpKsBaQUsMs+Sm835W/9IQn1PaPUcIbsuR28q1C2FXlbYO2pyV+frNluAiRwS8rZQxkIJswe2kEaJ3aC3og74G7sqR1ZEai3FpRUxCxJlxJQRl4fsGkoUkwlE0VmGi01+ZvKs9eY5JfPrKqBPvw7nk7Pvb0P1Foklozc1KqZHt01636QzFp+H0XWL3rXVlq2WLDlv6k2b20JUzDSbg4eUvf4H/I2KJekbIBozoisGvW7SacgcQGbXZJchm4kz1XB4L0rfONGZkqGSOBV/c9dMprdz39cvAmd2/oZHTpxjViRqKRW9pVGLKnVLoRaVxJ5BxUyzhVNpQL2iRC4r3B0dIptd1oWtQYvr6W3A35hYil5Uo4s6vaLROyl2S2XXAbtiMotmdC1FbQrROxK7OLne/Pby4JqAfoLjU9RbgCEP7f9JJ/E3rGYN6lmNuqJGb6jROsc1hPBSKrFrYIzFPUOv2WoZLlxRQRWpJYu6NfhuHT9/S27q1GWNWkxRWYFpCnwtIeRT7B3ALJpMDHBbgF0xEhsTzt889aaNc75k6F4+ej+eK+3/k2eHAWufdb3N9/wNQkQ9q1GXlcg+e6nI0VVh4Voilen6GGwhdkkRNgBEGLYRtTj4rg8/f1MyRvSyTt1MhXPMQpWmGwJbT7Alkd5IcdsGv29xKyC1D859DyCcJmff30aplw8M6jmNupkK7VGhfPTSlYS4B+xDjDEWdzVmSbVaNsZYr0LqhuJe3Pm37b7+Fl/TqMt6eCm5cMBEyixV4SKQjmbi7IbOrZnJTe3cf37CKXNm529jJc7ZHVvcAtRzamRRXDhgoqspZlEx6hBjrGQNOWs67/sW7ijMku+7rDzunyxY8TUtekULryTC+Wi4QtMFkTsA3CpIbupa0Tr3n59wypxNf5sAdsdWMiZ1WV1YY/mcEn5WFGKKWYfJLS2+rhk1qGRA5OmkkvO+JID9759M7QNhVYkuJalbErOoJjd0chg5t5zN+Vs/xhjVIYYtJGd0JiZGY0r4OyJ9I5XY1JI7OndHCT+dTO4A2/8mSpLfTTiUxN98YUFb3AWJVTWxoibWVLUIx71/kpBwgLM5f+vHhPlvO5Pnv116Kk5KUvqVxN+6OJX8N7vjENkd20bIRgg5ZRvZbYTaELUhghBBCFsWbFmwacGmZTVMq2FadcOqm2bN6Ht2mk3i2YuJv51a/psjOTyR5OCR5Pp+G8IZ5Lz7m3Z6+W9dmXmIDaIjscFjYjMHxHbkbxfiPzGJzyKeNX+bZv5b7zalAH+zjyRnB0rOGuZvAd+L8Ekhnj1/8xuJZ71f/htXgPyByW2AZItOQDq6kfDMfxu4f5LM30g8NJ5Bf+vFQ++f9M5/KyN+VxVWRH5R4Jd4YYNnt3hxG7gXH7h/kszfCIdylv1tqN7c+W901kruKKmdFCgDhBBCCJRBaieV3Ei5F3f5G5m/kXj+5m/4BPlvzJKU2hmUFmojaVsy60Py3850/kY4G5xrf3Pnv/EbAigDjDH1NEU9TdR89lsAAA2GSURBVFHfoZjnGXyIQQnIaXlgcTJ/I/G48Wz6m4MJ8t+4WxxCCPfpLfpM1LZt2ILuLeXnb7BpqRlNzahaRlMzanBs1Uwyf5sfzrK/jVI/kP/W1dshdpQWfSYafTZqd2yraXnqrT//rTd/UzOa0QYAa9qhCrCm426pY1U/VPVDTT9U9UMVYN2EpppRyfxtfuIZ9Dffqx9eGMh/Y1d5UAL4EDPPM47Y2GsMQkjPa+7jyR4G/E3NqDrWDBtY2NRampRVUjlFa+rmoWEeGqbdK00DAzWjkfnb/HDW/G0C9Oe/RTc5aVuybdvuOPMvhNoIQihuiu7zJT0MzN/UjKaglN7RgK2Lue7ZFzGnaB0ddDTQ0XWkgY4OOrrWUdWMekbzt+65ojGXDYVCpzgGEs/4/K0fY4yqL/8tsS5JW5Je0K2mZTUsLa+Jm6KWG3xYUD/c/pZqSxIUk2VJLeoY4/i+KNUkuS3JbSkFJRmmHCptWctoY83fjp13DWw2tKvTXZBwFBJ/84BZN+W0HI/F47G4nJYDnM2Be/4WbwjRQpTa4zDGWhUs7EWZMs1VWC7D8fsCW2C5KstWGLGZHHf+dqSHwXig/QTONrRPEp88Jv7Wxcnz3/r9jU1z0Q02mZHwIQZ1k92N01tc6NYlYTth23Z4mQqth0JbITbPjzt/6/efgbjf9Po/9pfulu7Go/gn4WQk/obxaee/qRmN2eLsjo1Qdx5od2xhK8Hc4VC7Oye8dCsSWgmxOW7c+Zun3vrdzIn7mtl94hmsxy4n9NPzuTvDbMTE304//03NqPQ+E1pcQG2EIEJtlNhJcquCE/fKS8sRJseeyvxt8H6aEWxwwNBG0BvhKXDe/e0s8t/UjBbNMKHV0KVbYQihlE6Fbi5EVxl+I67kVQhR6kDm1oTQnQXH3yabv7mdqr+92/Hc8UD740Ilc7kziWfN38a6/na673/r9zemwIV2Q6HthchqNLxGhXYuhXZDoZWQdJCyGha9zobWQ6HdEFc8nfmbu3IUyxqwr+AFCU+Fs+Zv08x/68E9f+Nq3EL+UrgQDhfC4cJCuBgOZxeozahZN5WcGtmNhAsLl/KX4nXhJPO3fmc7fpAZ5H4Dh6Puj37rIvHJ4xn0t14cmjT/jc1a3K7JrgEJMXwjSu0ynvlv+Pj73/r9TYBcpLYQrUeitUi0HqHqYSbDmHXLqlvMDkNVwlQtHKktxKEw7vyN8InmLPvbUL155b9B+sBidk12w2BigKlFooWFhZ0ot+xxvbvXv8f1t0M+0rpEtRaiMEy1FqLtMFUNswcss8dQpTAFF6IwHGmFkodxcv/kXMWz6W+DZ+FGzn+LLin0qs6sG0wM0It6ZI+ntoXoLTm5OUZ+t5pRtY6axMIR404Qx3wC8wksJHE8gQURJzSkkvsn54pz7W/u/Ld4MylkZSYG6FuAvgXomE4va/SSqhc9bjFx+Vt3/gZbsJduM7Q0qwbJf5ufeDb9zcFQvbnz3+hanG3E+azMrABmVed2TD5jcqvA7/lcTkCeX0I4ImfZ30apH8h/i5S5aFWIVoVonaWXFT5tMCuGXjTxoffqnONV8vwSEo8Yz6C/nST/LVLgwiUmXGailTi9qjJ3gJI1EZr8+crk+SWE/Zw1f5sA/flvC/tsuEhHD0RmS2c3gVYYLjZMnl9C4pHjWfO3fkyW/xaNpRLrulYwYQvhw5GWJvM3whFJ/O0UQOZvJB4xJv7WxSnmv5H3BxB6EhN/c0De/0bi6cTE38j73winx3n3N/L+NxJPM541fws6enbhjPLfyPU3Qj/Omr/5jcSz/ozy38j8jcR+8Qz6Wy8+6/w3p393/tsokrN2KDJ/m0POsr9NIf/NWcVY8zdrh4JVFecjsKJYOxSZv81VPJv+dr75b8HzN1TTcJ7CVR7nKVRVyfxtrjjX/nZG+W89sZkNqJdMaR/Et/X4lq5kgLlN4XwEVzhcpHGVx/mIuU2d7vzN/QQu99O7SHxe8Wz6m4NzzH/DNlZLBrshCzkpWU7FDzR+z+Q3IZ+Wjbzs9rdx528DD40c+FNwzaD5D6vxW3t/Y8/1Ero5y/42Sv1J8t/8nl9id2wlb1Bbcb4mKFU9VdaFrMFnLH7XjO8Ca4cy8vIJ52/HlTDEzQYcz++pW35P5hpoP/p6SeyOZ9DfRr/+hs8m/w22IL0pRuu0ikWMbdhCyTIUKojfgcm8KlYT/Jpids9PTnL9ze/ZdQOO5OdRoxijv958/dNv7aN8o/nhrPnbBDj1/DdQthYyNF0RUlCykQXqKFFHfAlyWyhRSsqYYnYSclqf+PqbW2/9Dhbyen9Afz/uo8de/dDYS0se7yHwi4O/1zzEs+Zv/RhjVKea/8ZvKpEVkVpLcWlFzIJEGTFlxOUhu4YSxWQCUXSWEVa0ia+/+ejt2F/HMijPTkYxKL/5m5ekCTEm/nYqGJi/UbEkfQNEY0Z0xaDXTToNmQPI7JrsMmQzcaYaDu9F6RvqZPdPhlzwdLMAhzkugOHzt6FOO9RRSTyz87d+jDWqU8x/41ZlelGNLur0ikbvpNgtlV0H7IrJLJrRtRS1KUTvSNySOtn8zdOszsLfho4EB/qbOx5xfjjbJP6G8WnnvykHJnVZoxZTVFZgmgJfSwj5FHsHMIsmEwPcFmBXjNTuhPO3Aedxn5/ouZnXEZ33fGyUOVu/W3rO33p/Gmg2tP+Adc1eTPzt9PPfrDqMPg+om6lwjlmo0nRDYOsJtiTSGylu2+D3LX4V6EWD3D85h5x3fzuj/DdpB1CX9fBScuGAiZRZqsJFIB3NxNkNnVs35bRO8t/mM541f5tm/lso4P7Jtp3aAfQVLbySCOej4QpNF0TuAPDrhrwPUAuR/Lf55Kz52zTz33p687t/ElQscUujY0nqlsQtqfIeACWT5L/NczyD/taLe3rAPiM8ef6bA/L8EsIROcv+NlRvZ/T+N/L8EhL7xbPpb4NXhC9S/ht5fsk8c6797azz38jzS0hM5m+PQd7/RjhlzrK/jVJP3v9G4mnGM+hv557/Rt4fQOhJPHv+NgHI+99IPLV41vytH2OMirz/jXAqJP52CiDzNxKPGBN/6+KCv/+NcDZI/A1j8v43Ek8rJv52Ju9/AyXgSTJ/m3POu7+dUf4bKHnc/wVKwMrHYSFu5eNWPm43NDJ/m7d41vwt6OqHC2eU/4aawNGbn8uxByaqilZRJPO3eeOs+ZvfSDzrzyj/DVWlnt7cS4ESsFuSXZfMQvJ852/kKVrTj2fQ33rxxPlv/K4qrIj8osAv8cIGz27xY+W/wcpjvRkF0cgmQCZuZBN6WnAqcTtl10SrmJz4+ZOuBwF5N8OBT7+a7E8Tj2fi/v3aux/ydfEf9TXL/jZR/puV3FFSOylQBgghhBAog9ROKrmRci/ul//W05tZTNotBds6PgTY1u2Womyx2i6vpwWHRjZu1cG4z58c2mbE9r0nebmXPb7jnuZ4xu0/oH3/+AO+y4WKZ9PfJs5/Y5ak1M6gtFAbSduSWR9MyfGbv1llsau3gog7Om5KuCHhhuSeyMGWiWqpkzx/sr9mIOiVfo+pC/ClgKWCBxO8uF+H47Z3r33A39yL+wVT5lz7mzv/jd8QQBlgjKmnKeppivoOxTzP4EMMSkBOywOL9/ofmL9ZRRGUgFVIwLqMkYYbIm5IuCEOTOe6mqzqE7w/4GhnOuYwfnrzkceQdwwMjY8+Bjme3xiC+w9u717X8S8e9LRp97Yi87cTYSy9ufPfuFscQgj36S36TNS2bdiC7i3V63/A30AmbhWT+r5gQw23ZNyQcF10/K1/8Z7LTXz9za0rv9JLb5P8KaBZQPuhNQOGFtzebwv0f/Ts0G+zTJOz7G+j1A/kv3X1dogdpUWfiUafjdod22panv+ZnF90YP6m7fIgEzcKIu7oqCKiStKuiqiSdPQmHQC27+kMoDTe/K0/HkdvQ9xpwKlG05u3S4ziZgF9Dm3vXteAa7ldt7/er8104hn0t9Gvv2FX/hu7yoMSwIeYeZ5xxMZeYxBCel5zH0/2MOBvyhYnb7BWVcZQg+UkqoionOzpbQCOv012/W3g/7pn5Zn629CaEf1trPYTrG7ot5gaZ83fJkB//lt0k5O2Jdu27Y5z/yNCbQQhFDdF9/mSHgbmb6k1VtliUUtF9RQsJWEp4ZSO3lIHenxHZzcBvdG9ZjDu+wP6jpSCnKr/v/5A3P+fvlc/sK6+pdynK7znk37t/QQwcfuBcXp+94H2wY46tXjW/G1C9OW/JdYlaUvSC7rVtKyGpeU1cVPUch7Pw+thwN/UHV5PC6ipoIpoFRI96nndvaxe0Mn9k/ND4m8eMOumnJbjsXg8FpfTcoCzORi8/lbXQTZhZJMgkwCZhL4v6GlB3eHVjIoxTh2AI38zMMZqRiX3T85PTPztFDBi/pu85zEDlPdkcv/k/JD42ylgxPy31LYkbUnStiRtSf0xyX+bn5j42ymAPL+EcEQSfzsFkOeXkHjEmPjbKYA8v4RwRBJ/OwUIy0LfNr1A/01JfNFi4m+ngHgsHl+Ok5KUo5Tj7l1EbwQE0wPRGwHB9ED0RkAwPRC9ERBMD0RvBATTA9EbAcH04KE3AgKCKYDojYBgevj/IpFAw+sEFQ8AAAAASUVORK5CYII=" /><br /> 
```

我复制了这个源并将其粘贴到另一个 html 文件中并在浏览器中运行它，它显示了我复制的图像。

现在，我从其他网站（浏览器）复制了一些其他文本和图像并将其粘贴到编辑器，它显示图像标签和路径。

我想要的是从浏览器复制并粘贴图像到编辑器应该像上面那样转换它，而不是它具有 src="domain/path/filename.extesion"。

可能吗？另一种解决方案是从 content() 方法中获取所有图像标签并替换其 src 属性值。但为此，我必须从 URL 获取图像，将其转换为字节或流（我不知道你们是怎么做的），使用 base 64 进行编码，然后用实际源替换它。

有人可以帮忙吗？？

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T07:21:36.467

我自己解决了：

为此，我`HTMLAgilityPack.dll`在 bin 文件夹中添加并在项目中添加了它的引用。在页面中添加了一个`telerik RadEditor`控件。然后创建了一个方法，该方法`parseHtmlToImageSource(string html)`接受 html 作为字符串并以流格式返回带有图像的修改后的字符串。单击提交按钮后，将执行以下代码，并为您提供整个 HTML 页面的内容，您可以将其存储到服务器`varbinary`数据类型中。

```
protected void submitBtn_Click(object sender, EventArgs e)
{
            try
            {
                string html = parseHtmlToImageSource(editor.Content);
                byte[] array = new GetBytes(html);
        }
            catch (Exception ex)
            {
                throw ex
            }
}

private string parseHtmlToImageSource(string html)
{
            try
            {
                string modifiedHTML = html;
                HtmlDocument doc = new HtmlDocument();
                doc.LoadHtml(html);

                var srcTags = doc.DocumentNode.SelectNodes("//img");
                if (srcTags != null)
                {
                    foreach (var item in doc.DocumentNode.SelectNodes("//img[@src]"))//select only those img that have a src attribute..ahh not required to do [@src] i guess
                    {
                        string value = item.Attributes["src"].Value.ToString();

                        if (!(value.Contains("data:image/") && value.IndexOf("base64") > 0))
                        {
                            string extension = Path.GetExtension(item.Attributes["src"].Value.ToString().ToLower());

                            if (extension.Contains("."))
                            {
                                extension = extension.Remove(extension.IndexOf("."), extension.IndexOf(".") + 1);
                            }

                            item.Attributes["src"].Value = makeImageSrcData(item.Attributes["src"].Value.ToString(), extension);

                            modifiedHTML = modifiedHTML.Replace(value, item.Attributes["src"].Value.ToString());
                        }
                    }
                }

                //doc.ToString();

                //doc.Save("yourFile");//dont forget to save

                return modifiedHTML;
            }
            catch (Exception ex)
            {
                throw ex;
            }
}

private string makeImageSrcData(string url, string extension)
{
            try
            {
                WebResponse result = null;
                WebRequest request = WebRequest.Create(url);

                // Get the content
                result = request.GetResponse();

                Stream rStream = result.GetResponseStream();
                byte[] rBytes = ReadFully(rStream);

                return "data:image/" + extension + ";base64," + Convert.ToBase64String(rBytes, Base64FormattingOptions.None);
            }
            catch (Exception ex)
            {
                throw ex;
            }
}

public static byte[] GetBytes(string str)
{
    try
        {
            byte[] bytes = new byte[str.Length * sizeof(char)];
            System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
            return bytes;
    }
        catch (Exception ex)
        {
                throw ex;
        }
}

public static byte[] ReadFully(Stream input)
{
            try
            {
                byte[] buffer = new byte[16 * 1024];
                using (MemoryStream ms = new MemoryStream())
                {
                    int read;
                    while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
                    {
                        ms.Write(buffer, 0, read);
                    }
                    return ms.ToArray();
                }
            }
            catch (Exception ex)
            {
                throw ex;
            }
} 
```

您还可以在读取数据或将其放置到编辑器时使用以下方法将字节转换为字符串：

例如 ：

```
protected void getData()
{
    try
        {   // Make a code to get the data from data base here and then for varbinary fild I have used "fieldName"
        string contents = (byte[])ds.Tables[0].Rows[0]["fieldName"];
        editor.Content = new GetString(excelContents);
    }
    catch (Exception ex)
        {
                throw ex;
        }
}

public static string GetString(byte[] bytes)
{
    try
        {
            char[] chars = new char[bytes.Length / sizeof(char)];
            System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
            return new string(chars);
    }
    catch (Exception ex)
        {
                throw ex;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:15:17.740

我认为这提出了同样的问题：[http ://www.telerik.com/community/forums/aspnet-ajax/editor/conver-image-to-stream-how.aspx](http://www.telerik.com/community/forums/aspnet-ajax/editor/conver-image-to-stream-how.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-17T15:35:29.987

开发人员的回答解决了我的问题，但作为一个临时（快速和简单）的解决方案，您可以使用 OnClientPasteHtml 来防止粘贴 base64 编码图像：

```
<telerik:RadEditor ID="RadEditor1" runat="server" OnClientPasteHtml="OnClientPasteHtml">
</telerik:RadEditor> 
    <script type="text/javascript">
        function OnClientPasteHtml(sender, args) {
            if (args.get_value().indexOf(";base64,") > -1) {
                args.set_cancel(true);
            }
        }
    </script> 
```

# mysql - STR_TO DATE 不太正常

> ID：13138943
> 
> 赞同：0
> 
> 时间：2012-10-30T12:25:50.600
> 
> 标签：mysql, datetime

```
Select *,  STR_TO_DATE(l.act_detail,'%Y-%m-%d %H:%i:%s') AS callback_date, DATE_FORMAT(l.act_date , '%m/%d/%Y %H:%i' ) as activity_date                   
            from lead_activity as l 
            join rawdata as r on (r.phone=l.phone) && (r.year_make=l.year_make) && (r.model=l.make)   
            where l.sp_id=".$_SESSION['user']['sp_id']." 
            and ((callback_date>='$date1' ) && (callback_date<= '$date2')) 
             and l.act_name='SCB'
            ORDER BY  l.act_date DESC 
```

我正在尝试使用 ocnverted 到 datetime 的文本并在该列上做一个 where ？有任何想法吗 ？act_detail = 2012-10-29 05:10:00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:27:52.313

*   你不应该使用`callback_date`，因为它是一个别名，你不能在`where`子句中使用它
*   你不能使用`&&`，而是`AND`

询问，

```
SELECT .....
FROM ....
WHERE  l.sp_id= 'sessionValue' AND
       (STR_TO_DATE(l.act_detail,'%Y-%m-%d %H:%i:%s') >= '$date1') AND
       (STR_TO_DATE(l.act_detail,'%Y-%m-%d %H:%i:%s') <= '$date2') ..... 
```

# iphone - 将 MPMoviePlayer 创建为已暂停

> ID：13138947
> 
> 赞同：0
> 
> 时间：2012-10-30T12:26:00.193
> 
> 标签：iphone, objective-c, mpmovieplayer

我正在尝试创建一个 MPMoviePlayer，因为它在出现时暂停。我尝试过定期暂停，作为延迟为 0.1 秒的选择器，让 NSNotificationCenter 在电影开始后立即暂停它（这确实有效，但有一点延迟。电影在暂停前播放了一秒钟）。

有没有办法让它在第一次出现时暂停？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:28:16.947

使用暂停方法来做到这一点

**`[moviePlayer pause];`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:34:22.233

很抱歉占用你们的时间......在我发布问题后，一位朋友帮助了我。

`shouldAutoplay`显然，我在文档中错过了一个名为的属性。

就用那个。

# r - R中的窗口函数？

> ID：13138949
> 
> 赞同：1
> 
> 时间：2012-10-30T12:26:05.590
> 
> 标签：r

我正在尝试在 R 中做一些相当于 SQL 中的“第一值”窗口函数的事情，例如：

```
select *, first_value(value3) over (partition by value1, value2 order by value5 desc)
from df 
```

有没有一种好方法可以在 R 中执行此操作，而无需创建数据库来使用 sqldf/RPostgreSQL 之类的东西？

我在这里看到了一些其他示例，例如：[sqldf 中的按组累积总和？](https://stackoverflow.com/questions/8559485/cumulative-sum-by-group-in-sqldf)

但是我在弄清楚如何使用窗口内的顺序很重要的功能时遇到了一些麻烦。另一件事是我正在处理约 500K 行，因此性能是一个问题。

编辑：这是一个例子：

```
item_id  rental_date   customer_id
I001     10/20/2012    1
I002     10/05/2012    4 
I001     10/15/2012    3
I004     10/19/2012    1
I001     10/11/2012    6
I002     9/15/2012     5
I004     10/13/2012    10
I001     9/30/2012     4 
```

我如何确定每个月租用给定项目的第一个客户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T15:27:50.273

如果不使用 sqldf/PostgreSQL 您的意思是使用 sqldf 但使用 SQLite 而不是 PostgreSQL，那么试试这个（它依赖于去年添加的 SQLite 的新功能，如果有最小值或最大值，则保证其他列来自同一行）：

```
Lines <- "item_id  rental_date   customer_id
I001     10/20/2012    1
I002     10/05/2012    4 
I001     10/15/2012    3
I004     10/19/2012    1
I001     10/11/2012    6
I002     9/15/2012     5
I004     10/13/2012    10
I001     9/30/2012     4"

DF <- read.table(text = Lines, as.is = TRUE, header = TRUE)
DF$rental_date <- as.Date(DF$rental_date, "%m/%d/%Y")
DF$ym <- format(DF$rental_date, "%Y-%m")

sqldf("select item_id, ym, customer_id, min(rental_date) rental_date
    from DF 
    group by item_id, ym") 
```

这种情况下的结果是：

```
 item_id      ym customer_id      rental_date
1    I001 2012-09           4       2012-09-30
2    I001 2012-10           6       2012-10-11
3    I002 2012-09           5       2012-09-15
4    I002 2012-10           4       2012-10-05
5    I004 2012-10          10       2012-10-13 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:12:41.237

我假设您示例中的对象是`data.frame`我们称之为的对象`df`。

```
library( "plyr" )
df$rental_date <- as.Date( df$rental_date, "%m/%d/%Y" )
df$year <-  as.numeric( format( df$rental_date, "%Y"))
df$month <- months( df$rental_date )

ddply( df, c("item_id", "month", "year"), function(x) {
  x[ min(x$rental_date) == x$rental_date, "customer_id", drop=FALSE ]
} ) 
```

结果应如下所示：

```
 item_id     month year customer_id
1    I001   October 2012           6
2    I001 September 2012           4
3    I002   October 2012           4
4    I002 September 2012           5
5    I004   October 2012          10 
```

# php - 为什么 PHP 忽略 ajax POST？

> ID：13138950
> 
> 赞同：0
> 
> 时间：2012-10-30T12:26:11.153
> 
> 标签：php, jquery, ajax, post, get

代码：（`index.php`）：

```
<head>

<?php
if(isset($_GET['text1']))
{
some_function();
}
?>
</head>

<body>
<form id="form">
<input type="text" id="text1" name="text1"/>
<input type="text" id="text2" name="text2"/>
<input type="submit" id="submit" value="submit"/>
</form>

<script>
$(document).ready(function(){

    $("#submit").click(function(){
            var dataString=$("form#form").serialize();
            var proccessPage="<?php echo $_SERVER['PHP_SELF'] ?>";

            alert(dataString);
            $.ajax({
                type: "POST", 
                url: proccessPage,
                data: dataString,
                });
    return false;
    });

});
</script>
</body> 
```

有谁知道为什么`some_function();`没有触发呼叫？我不知道问题出在 ajax 还是 php 或哪里。我花了两天时间尝试使用`$.post`，或者`$.ajax`，搜索代码等中可能出现的错误，但我找不到任何问题。

你知道吗？感谢所有的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T12:27:56.260

因为你要找的`GET`不是`POST`。将您的 PHP 更改为以下内容：

```
<?php
if(isset($_POST['text1']))
{
some_function();
}
?> 
```

`GET`并且`POST`是不同类型的 HTTP 请求，您需要确保您的 PHP 代码正在寻找正确的请求。在这个问题上对它们之间的区别进行了相当全面的描述： [POST和GET之间的区别是什么？](https://stackoverflow.com/questions/3477333/what-is-the-difference-between-post-and-get)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T13:21:15.727

这无论如何都行不通！

原因是您正在制作一个异步的 AJAX POSTBACK。

为了得到你需要的东西，你必须尝试这种方式：

```
<form id="form" action="" method="post"> 
```

并删除脚本部分。它会起作用的！

~夏基尔·沙比尔

# javascript - 带有 setTimeout 的 jQuery 下拉菜单不起作用

> ID：13138951
> 
> 赞同：0
> 
> 时间：2012-10-30T12:26:12.637
> 
> 标签：javascript, jquery, drop-down-menu, settimeout

我知道这个问题已经被问过很多次了，但我不能让我的下拉菜单与我目前所拥有的一起工作。如果我设置菜单显示的延迟，就会出现问题，而没有 setTimeout，菜单就可以正常工作。有人可以看看并提出解决方案吗？我也在尝试它在 IE6 中工作。

*   这是 setTimeout 的完整示例：http: [//jsbin.com/owoyon/1/](http://jsbin.com/owoyon/1/)（错误，无法正常工作，下拉菜单卡住，无法识别延迟）

*   这是一个没有 setTimeout [http://jsbin.com/isamay/1/的工作版本](http://jsbin.com/isamay/1/)

这是一个代码副本：

```
<!DOCTYPE html>
<html class="no-js">
<head>
<meta charset="utf-8">

<style>
    body {margin:60px; font-family: sans-serif; font-size:12px;}
    ul,ul ul {margin:0;padding:0;} 
    ul li {
        position:relative;
        list-style-type: none;
        padding:5px 0;
        margin:0 10px;
        cursor:pointer;
        border-bottom:1px solid #ddd;
        display:inline-block;
        float:left;     
    }
    .submenu {
        background:#eee;
        display:none;
        position:absolute;
        width:200px;        
        top:25px;
        left:0;
        margin-left:-5px;
    }
    .hover {
        display:block !important;
    }
</style>
</head>
<body>

<nav id="navigation">
<ul>
    <li class="drop">Option 1
        <div class="submenu">
            <ul>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
                <li>Vestibulum auctor dapibus neque.</li>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            </ul>          
        </div>
    </li>
    <li class="drop">Option 2
    <div class="submenu">
            <ul>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
                <li>Vestibulum auctor dapibus neque.</li>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
            </ul>          
        </div>
    </li>
</ul>
</nav>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script>

$(document).ready(function(){

    (function(){

        var topNav = $('#navigation'),
            drop = topNav.find('.drop'),
            myTimer;                

        drop.hover(function(){                  
            obj = $(this);                      
            subMenu = obj.find('.submenu');         
            subMenu.addClass('hover');  
            clearTimeout(myTimer);              
        },function(){
            myTimer = setTimeout(function(){                
                subMenu.removeClass('hover');   
            },300);                                             
        });     

    })();   

});

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:57:34.937

我能够解决它。演示在这里[http://jsbin.com/owoyon/3/edit](http://jsbin.com/owoyon/3/edit)

```
var topNav = $('#navigation'),
    drop = topNav.find('.drop'),
    myTimer;

drop.hover(function () {
    var obj = $(this);
    var subMenu = obj.find('.submenu');
    clearTimeout(myTimer);
    if (subMenu.hasClass('hover')) {
        //do nothing
    } else {
        drop.find('.submenu').removeClass('hover');
        subMenu.addClass('hover');
    }
}, function () {
    myTimer = setTimeout(function () {
        drop.find('.submenu').removeClass('hover');
    }, 300);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:51:53.027

我修改了你的 JS 代码并试试这个

```
var topNav = $('#navigation'),
            drop = topNav.find('.drop'),
            myTimer, subMenu;                

$('#navigation .drop').each(function(){
    var obj = $(this);
    obj.hover(function(){

        subMenu = obj.find('.submenu');
        subMenu.addClass('hover');
    },function(){
            myTimer = setTimeout(function(){                
                obj.find('.submenu').removeClass('hover');    
            },300);                                                   
     });
}) 
```

演示：http: [//jsfiddle.net/bvhk2/1/](http://jsfiddle.net/bvhk2/1/)

# php - 如何减少 IF 语句的数量？

> ID：13138952
> 
> 赞同：3
> 
> 时间：2012-10-30T12:26:13.093
> 
> 标签：php, class, if-statement, refactoring, dry

我有很多 IF 句子，每个句子都启动一个函数。
有没有一种明显的方法可以更简单地编写这段代码？
每个 IF 启动不同的功能，但它仍然看起来有点矫枉过正。

```
 if ($this->machine == '' AND $this->date_from == '' AND $this->date_to == '' AND $this->date_like == '' AND $this->article_or_tool == '') {
        $this->AllTime();
    }
    if ($this->machine <> 0 AND $this->date_from == '' AND $this->date_to == '' AND $this->date_like == '' AND $this->article_or_tool == '') {
        $this->ByMachine();
    }
    if ($this->machine == '' AND $this->date_from <> 0 AND $this->date_to <> 0 AND $this->date_like == '' AND $this->article_or_tool == '') {
        $this->ByDate();
    }
    if ($this->machine <> 0 AND $this->date_from <> 0 AND $this->date_to <> 0 AND $this->date_like == '' AND $this->article_or_tool == '') {
        $this->ByMachineByDate();
    }
    if ($this->machine == '' AND $this->date_from == '' AND $this->date_to == '' AND $this->date_like <> 0 AND $this->article_or_tool == '') {
        $this->ByDateLike();
    }
    if ($this->machine <> 0 AND $this->date_from == '' AND $this->date_to == '' AND $this->date_like <> 0 AND $this->article_or_tool == '') {
        $this->ByMachineByDateLike();
    }
    if ($this->machine == '' AND $this->date_from == '' AND $this->date_to == '' AND $this->date_like == '' AND $this->article_or_tool <> 0) {
        $this->ByArticle();
    }
    if ($this->machine <> 0 AND $this->date_from == '' AND $this->date_to == '' AND $this->date_like == '' AND $this->article_or_tool <> 0) {
        $this->ByMachineByArticle();
    }
    if ($this->machine == '' AND $this->date_from <> 0 AND $this->date_to <> 0 AND $this->date_like == '' AND $this->article_or_tool <> 0) {
        $this->ByDateByArticle();
    }
    if ($this->machine == '' AND $this->date_from == '' AND $this->date_to == '' AND $this->date_like <> 0 AND $this->article_or_tool <> 0) {
        $this->ByDateLikeByArticle();
    }
    if ($this->machine <> 0 AND $this->date_from <> 0 AND $this->date_to <> 0 AND $this->date_like == '' AND $this->article_or_tool <> 0) {
        $this->ByMachineByDateByArticle();
    }
    if ($this->machine <> 0 AND $this->date_from == '' AND $this->date_to == '' AND $this->date_like <> 0 AND $this->article_or_tool <> 0) {
        $this->ByMachineByDateLikeByArticle();
    } 
```

解决方案
这是我重构后的代码：

```
function MethodPicker() {
    $machine            = $this->machine            <> 0;
    $date_from          = $this->date_from          <> 0;
    $date_to            = $this->date_to            <> 0;
    $date_like          = $this->date_like          <> 0;
    $article_or_tool    = $this->article_or_tool    <> 0;

    $decision  = array($machine, $date_from, $date_to, $date_like, $article_or_tool);
    $decisions = array(
                    'AllTime' =>                        array(false,    false,  false,  false,  false   ),
                    'ByMachine' =>                      array(true,     false,  false,  false,  false   ),
                    'ByDate' =>                         array(false,    true,   true,   false,  false   ),
                    'ByMachineByDate' =>                array(true,     true,   true,   false,  false   ),
                    'ByDateLike' =>                     array(false,    false,  false,  true,   false   ),
                    'ByMachineByDateLike' =>            array(true,     false,  false,  true,   false   ),
                    'ByArticle' =>                      array(false,    false,  false,  false,  true    ),
                    'ByMachineByArticle' =>             array(true,     false,  false,  false,  true    ),
                    'ByDateByArticle' =>                array(false,    true,   true,   false,  true    ),
                    'ByDateLikeByArticle' =>            array(false,    false,  false,  true,   true    ),
                    'ByMachineByDateByArticle' =>       array(true,     true,   true,   false,  true    ),
                    'ByMachineByDateLikeByArticle' =>   array(true,     false,  false,  true,   true    ),
    );
    $method = array_keys($decisions, $decision, true);
    $method && list($method) = $method;
    $method && $this->$method();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:56:33.043

Maybe you really need all this decisions, but you could make it a bit easier to read. Instead of writing many times `$this->machine == ''` inside the if statement, you could set this value to a meaningful variable first.

```
$machineIsEmpty = $this->machine == '' || $this->machine == 0;
$dateFromIsEmpty = $this->date_from == '' || $this->machine == 0;
...

if ($machineIsEmpty && $dateFromIsEmpty && $dateToIsEmpty && $dateLikeIsEmpty && $articleOrToolIsEmpty)
{
  $this->AllTime();
}
else if (!$machineIsEmpty && $dateFromIsEmpty && $dateToIsEmpty && $dateLikeIsEmpty && $articleOrToolIsEmpty)
{
  $this->ByMachine();
}
... 
```

In this example i assume two things: first i suspect that you want to handle both the values `''` and `0` as **not set**. I'm not sure about this, because there is no case where you did anything with the value `0`.

Second i assume that if one function was called, you do not want to call further functions, so i added an else before the next if.

Nesting the if statements would in my opinion make the code more **difficult** to read, because you have to remember in which level of if statement you currently are.

* * *

An alternative approach would be to use a decision-matrix. You can write an array holding all possible combinations, and each combination knows the function name.

```
$myObject = new TestClass();
$myObject->DoAction($machineIsSet, $dateFromIsSet, $dateToIsSet, $dateLikeIsSet, $articleToolIsSet);

class TestClass
{
  private $actionMatrix = array(
    //    machine, dateFrom, dateTo, dateLike, articleOrTool, action
    array(false,   false,    false,  false,    false,         'AllTime'),
    array(true,    false,    false,  false,    false,         'ByMachine')
  );

  public function DoAction($machine, $dateFrom, $dateTo, $dateLike, $articleOrTool)
  {
    foreach($this->actionMatrix as $action)
    {
      if (($action[0] == $machine) && ($action[1] == $dateFrom) && ($action[2] == $dateTo) && ($action[3] == $dateLike) && ($action[4] == $articleOrToolLike))
      {
        $functionName = $action[5];
        $this->$functionName(); // call the function
        break;
      }
    }
    // no action found, maybe we want some error handling here?
  }

  public function AllTime()
  {
    echo('AllTime');
  }

  public function ByMachine()
  {
    echo('ByMachine');
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T14:31:59.710

首先，我会做一些标准的重构。不知道为什么我这样做，但这里是：

1.  用局部变量替换属性，例如

    ```
    $machine = $this->machine; 
    ```

2.  同样适用于条件，但是看起来更接近条件很明显，每个变量只有两个状态，所以这实际上是每个变量只有一个条件（参见[*Type Juggling*](http://php.net/language.types.type-juggling)），它导致`true`or `false`。分配条件，而不是：

    ```
    $machine = $this->machine == '' || $this->machine == 0; 
    ```

（*学分去[martinstoeckli](https://stackoverflow.com/a/13139477/367456)*正确*的**条件*）

这将是一个开始。到现在为止的 if 子句已经改变并且会更紧凑。但是，为什么要停在这里？有一个当前的决定：

```
$decision  = [$machine, $date_from, $date_to, $date_like, $article_or_tool]; 
```

并且有一组决策可供选择：

```
$decisions = [
    'AllTime' => [true, true, true, true, true],
    ...
]; 
```

所以需要做的就是找到决策并执行方法：

```
$method = array_keys($decisions, $decision, true);
$method && $this->$method(); 
```

if 块已变成矩阵。该函数已映射到它的一种状态。

您丢失了字段上的名称，但是，您可以通过评论解决这个问题：

```
 $decisions = [
        //            machine  from  to    like  article
        'AllTime' => [true   , true, true, true, true],
        ...
    ]; 
```

乍看上去：

```
$machine = $this->machine == '' || $this->machine == 0;
... # 4 more times

$decision  = [$machine, $date_from, $date_to, $date_like, $article_or_tool];

$decisions = [
    'AllTime' => [true, true, true, true, true],
    ... # 11 more times
];

$method = array_keys($decisions, $decision, true);
$method && $this->$method(); 
```

如果 this 所在的类表示一个值对象，我建议您将决策移入它自己的类型，然后将该决策类型用作单个方法对象。将使您以后能够更轻松地做出不同的决策。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:29:21.097

其中很多是重复的，因此您可以嵌套条件以消除冗余，例如：

```
if ($this->machine == '') {
  // do everything requiring empty 'machine' string
  // remove condition from all subsequent ifs in this context
} else if ($this-> machine <> 0) {

} 
```

我没有时间也没有兴趣浏览所有这些代码并实际为您执行此操作，但这个想法应该为您提供足够的信息，以便您将其作为练习来实现给读者。（：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T12:30:01.217

有时，如果您的条件不同，这是不可能的，但在这种情况下，您可以从分组您`if()`的 s 开始，因为许多共享相同的条件。例如，而不是拥有大量

```
if( $this->machine <> 0 AND .... ) 
```

您可以将它们组合在一起：

```
if( $this->machine <> 0 ) {
    // all related ifs there
} 
```

然后继续进行下一个“级别”的条件。虽然这可能不会减少 s 的总数`if()`，但您的代码将比现在更具可读性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T12:57:02.887

As I see you have a convention naming your methods. If I have such code and such conventions, I would refactor it using calling method by name, in this way your code will be very short, easy to read and maintainable

```
 $method = '';

    if (this->machine <> 0) $method.="ByMachine";
    if ($this->date_from <> 0 AND $this->date_to <> 0) $method.="ByDate"
    .....
    //here you have full $method name ByMachineByDateByArticle or ByMachineByDateByArticle etc
    if($method){ 
       call_user_func_array(array($this, $method));
    } 
```

# objective-c - 在 xcode 中转换 MM/dd/yyyy 格式的日期？

> ID：13138957
> 
> 赞同：16
> 
> 时间：2012-10-30T12:26:22.597
> 
> 标签：objective-c, ios, nsdate, uidatepicker

我有一个`UIDatePicker`并且我正在从中获取所选日期的格式。`yyyy-MM-dd`现在我想将其转换为`MM/dd/yyyy`格式..我该怎么做？

```
NSDateFormatter *df=[[[NSDateFormatter alloc]init] autorelease];
df.dateFormat = @"yyyy-MM-dd";
NSArray *temp=[[NSString stringWithFormat:@"%@",[df stringFromDate:DatePicker.date]] componentsSeparatedByString:@""];

[dateString2 release];
dateString2=nil;
dateString2= [[NSString alloc]initWithString:[temp objectAtIndex:0]];
NSLog(@"%@",dateString2); 
```

我得到 2012 年 10 月 30 日，但我想要 2012 年 10 月 30 日。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-30T12:29:25.557

请参阅每一行的说明或介绍

```
NSString *str = @"2012-10-30"; /// here this is your date with format yyyy-MM-dd

NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease]; // here we create NSDateFormatter object for change the Format of date..
[dateFormatter setDateFormat:@"yyyy-MM-dd"]; //// here set format of date which is in your output date (means above str with format)

NSDate *date = [dateFormatter dateFromString: str]; // here you can fetch date from string with define format

dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"dd/MM/yyyy"];// here set format which you want...

NSString *convertedString = [dateFormatter stringFromDate:date]; //here convert date in NSString
NSLog(@"Converted String : %@",convertedString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:28:39.770

df.dateFormat = @"MM/dd/yyyy";

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T12:30:39.893

```
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
[formatter setDateFormat:@"MM/dd/yyyy"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T13:00:44.293

只是看看它是如何结束的：

```
NSDateFormatter* df = [[[NSDateFormatter alloc]init] autorelease];
df.dateFormat = @"MM/dd/yyyy";
NSString* dateString = [df stringFromDate:datePicker.date];  // Don't use leading caps on variables
NSLog(@"%@", dateString); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-13T04:20:01.087

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];    
[formatter setDateFormat:@"MM/dd/yyyy"]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-20T12:34:20.807

最初接受的答案做了一些额外的事情：

1）它分配了两个不需要的 NSDateFormatter 实例。NSDateFormatter 的创建成本很高。

2) 最好在使用完日期格式化程序后明确发布它们，而不是使用 autorelease 延迟发布。

```
//get datepicker date (NSDate *)
NSDate *datePickerDate = [myDatePicker date];

//create a date formatter
NSDateFormatter *formatter = [[NSDateFormatter alloc] init]; 

//set its format as the required output format
[formatter setDateFormat:@"MM/dd/yyyy"];

//get the output date as string
NSString *outputDateString = [formatter stringFromDate:datePickerDate];

//release formatter
[formatter release]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-23T07:33:31.370

```
- (void)showTime {
   NSDate *now = [NSDate date];
   NSDateFormatter *dateFormatter = [NSDateFormatter new];
   [dateFormatter setDateFormat:@"HH:mm:ss"];
   // you label
   _time.text = [dateFormatter stringFromDate:now]; 
}

- (void)showDate {
   NSDate *now = [NSDate date];
   NSDateFormatter *dateFormatter = [NSDateFormatter new];
   [dateFormatter setDateFormat:@"MM/dd/yyyy"];
   // you label
   _date.text = [dateFormatter stringFromDate:now];
}

- (void)viewDidLoad {
   [super viewDidLoad];
    self.showTime;
    self.showDate;
} 
```

享受

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-26T10:08:00.700

```
NSString *str = @"2012-10-30"; /// here this is your date with format yyyy-MM-dd

NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease]; // here we create NSDateFormatter object for change the Format of date..
[dateFormatter setDateFormat:@"yyyy-MM-dd"]; //// here set format of date which is in your output date (means above str with format)

NSDate *date = [dateFormatter dateFromString: str]; // here you can fetch date from string with define format

dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"dd/MM/yyyy"];// here set format which you want...

NSString *convertedString = [dateFormatter stringFromDate:date]; here convert date in NSString
NSLog(@"Converted String : %@",convertedString); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-20T06:11:22.160

我使用带有选项 NSISO8601DateFormatWithDashSeparatorInDate 的代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSString * stringformat = [NSDateFormatter dateFormatFromTemplate:@"MMddy" options:NSISO8601DateFormatWithDashSeparatorInDate locale:[NSLocale systemLocale]];
[dateFormatter setDateFormat:stringformat];

NSDate *d = [NSDate date]; // or set your date
NSLog(@"date in format %@",  [dateFormatter stringFromDate:d]); // date in format 2018-06-20 
```

# java - 观察者模式小鬼

> ID：13138964
> 
> 赞同：0
> 
> 时间：2012-10-30T12:26:46.447
> 
> 标签：java, unit-testing, observer-pattern

我正在做一个观察者模式作为家庭作业，但我没有通过测试。我已经堆了很长时间了。如果你能看看我的代码，给我一个建议，我哪里错了，我没有按预期做。干杯。这是代码。

```
public class Share 
{
    /**@param poundsAndPences stores the monetary unit for the share.
     * @unique a  instance of the Share class responsible for the observer pattern*/
    private double poundsAndPences = 1.00;
    ArrayList<ShareWatcher> list = new ArrayList<ShareWatcher>();

    public boolean addShareWatcher(ShareWatcher sw)
    {
            list.add(sw); 
            if (list.contains(sw))
            {
                return true;
            }
        return false;
    }

    public boolean removeShareWatcher(ShareWatcher sw)
    {
        if(list.contains(sw))
        {
             list.remove(sw);
            return true;
        }
        else
        {
          return false;  
        } 

    }

    /** Share(double poundsAndPences) private constructor.
     * 1-st pre-requisite for the multiple pattern 
     * takes and double value and initialized the local
     * variable with the one that have been passed
     * @param poundsAndPences sets the local variable with the current value*/
     Share()
    {
//        this.poundsAndPences = poundsAndPences;
//          changeState();
//        System.out.println("test: " + list);
    }

    /**getPoundsAndPences() is a getter method to. 
     * @return the poundsAndPences
     */
    public double getPrice() 
    {
        return poundsAndPences;
    }

    /**setPoundsAndPences(int poundsAndPences) is a mutator method.
     * @param poundsAndPences set the poundsAndPences passed to the
     * methods to the local ones 
     */
    public void setPrice(double poundsAndPences) 
    {
        this.poundsAndPences = poundsAndPences;
        changeState();
        updateShareWatcher();
    }

    public void changeState()
    {
        poundsAndPences = getPrice() ;
    }

    public void updateShareWatcher()
    {
//       System.out.println("list: " + list);
        int counter = 0;
        for(ShareWatcher sw: list)
        {
//            System.out.println("list test: "+ counter++  + "  %%% " + sw);
            sw.updatePrice(poundsAndPences);
//            System.out.println(list.toString());
        }
    }
} 
```

这是界面

```
public interface ShareWatcher 
{
    void updatePrice(double price);

}

public class BankManager implements ShareWatcher
{
     int portfolio = 0;
    /**
     * Buy value for bank manager.
     */
     static double BM_BUY = 1.00;

    /**
     * Sell value for bank manager.
     */
     static double BM_SELL = 4.00;

    /**
     * Increment value for bank manager.
     */
     static int BM_INCREMENT = 100;

    public BankManager(double BM_BUY, double BM_SELL, int BM_INCREMENT)
    {
        this.BM_BUY = BM_BUY;
        this.BM_SELL = BM_SELL;
        this.BM_INCREMENT = BM_INCREMENT;

        portfolio = 0;

//        updatePrice(portfolio);
    }

    public  int getPortfolio()
    {
        return portfolio;
    }

    public  void setPortfolio(int portfolio)
    {
        this.portfolio = portfolio;
//        updatePrice(portfolio);
    }

    public void  updatePrice(double price)
    {
        if(price < 1.00)
        {
            BM_BUY = price;
            System.out.println("BankManager buy shares at: " + BM_BUY);

        }

        if(price > 4.00)
        {
            BM_SELL = price;
            System.out.println("BankManager sell shares at:" + BM_SELL);
        }
//        portfolio = price;
//        System.out.println("Update BankManager");
//        System.out.println("New value is: " + portfolio);
    }
}

public class StockBroker implements ShareWatcher
{
      int portfolio = 1;
     /**
     * Buy value for stock broker.
     */
     static double SB_BUY = 2.00;

    /**
     * Sell value for stock broker.
     */
     static double SB_SELL = 3.00;

    /**
     * Increment value for stock broker.
     */
     static int SB_INCREMENT = 500;

    StockBroker(double SB_BUY, double SB_SELL, int SB_INCREMENT)
    {
//        this.price = portfolio;
//        updatePrice(portfolio);
        this.SB_BUY = SB_BUY;
        this.SB_SELL = SB_SELL;
        this.SB_INCREMENT = SB_INCREMENT;
        portfolio = 0;

//        updatePrice(portfolio);
    }
    public  int getPortfolio() 
    {
        return portfolio ;
    }

    public  void setPortfolio(int portfolio) 
    {
        this.portfolio = portfolio;
    }

    public void updatePrice(double price)
    {
//        StockBroker sb = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);

        if(price < 2.00)
        {
           SB_BUY = price;
            System.out.println("StockBroker buy shares at: " + SB_BUY);
        }

        if(price > 3.00)
        {
            SB_SELL= price;
            System.out.println("StockBroker sell shares at:" + SB_SELL);
        }
        portfolio = SB_INCREMENT;
//        System.out.println("Update StockBroker");
//        System.out.println("New value is: " + portfolio);
    }

} 
```

这是测试类

```
import org.junit.Test;
import static org.junit.Assert.*;
import org.junit.Ignore;

/** A set of unit tests that check the solution to the SILVER task.
 *
 */
public class ShareTest {

/**
     * Arbitrary stock price value for testing. 
     */
    final static double PRICE1 = 4.01;
    /**
     * Arbitrary stock price value for testing. 
     */
    final static double PRICE2 = 0.99;
    /**
     * Arbitrary stock price value for testing. 
     */
    final static double PRICE3 = 2.12;
    /**
     * Arbitrary stock price value for testing. 
     */
    final static double PRICE4 = 1.89;
    /**
     * Arbitrary stock price value for testing. 
     */
    final static double PRICE5 = 1.83;
    /**
     * Arbitrary stock price value for testing. 
     */
    final static double PRICE6 = 2.78;
    /**
     * Arbitrary stock price value for testing. 
     */
    final static double PRICE7 = 14.12;
    /**
     * Arbitrary stock price value for testing. 
     */
    final static double PRICE8 = 6.99;

    /**
     * Buy value for bank manager.
     */
    final static double BM_BUY = 1.00;

    /**
     * Sell value for bank manager.
     */
    final static double BM_SELL = 4.00;

    /**
     * Increment value for bank manager.
     */
    final static int BM_INCREMENT = 100;

    /**
     * Buy value for stock broker.
     */
    final static double SB_BUY = 2.00;

    /**
     * Sell value for stock broker.
     */
    final static double SB_SELL = 3.00;

    /**
     * Increment value for stock broker.
     */
    final static int SB_INCREMENT = 500;
  public ShareTest(){
  }

  @Test
    public void testChangePrice1() {
        final Share share = new Share();
        final BankManager bankManager = new BankManager(BM_BUY, BM_SELL, BM_INCREMENT);
        final StockBroker stockBroker = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);
        assertTrue(share.addShareWatcher(bankManager));
        assertTrue(share.addShareWatcher(stockBroker));
        share.setPrice(PRICE5);
        final int expectedValue1 = 0;
//        System.out.println("*****BankManager " + bankManager.getPortfolio());
        assertEquals(bankManager.getPortfolio(), expectedValue1);
        final int expectedValue2 = 500;
        System.out.println("*****StockBroker " + stockBroker.getPortfolio());
        assertEquals(stockBroker.getPortfolio(), expectedValue2);
    }

    /**
     * Test of changePrice method, of class Share. A similar test to above. More 
     * changes this time.
     */
//    @Ignore
    @Test
    public void testChangePrice2() {
        final Share share = new Share();
        final BankManager bankManager = new BankManager(BM_BUY, BM_SELL, BM_INCREMENT);
        final StockBroker stockBroker = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);
        assertTrue(share.addShareWatcher(bankManager));
        assertTrue(share.addShareWatcher(stockBroker));
        share.setPrice(PRICE3);
        share.setPrice(PRICE6);
        share.setPrice(PRICE8);
        final int expectedValue1 = 0;
        assertEquals(bankManager.getPortfolio(), expectedValue1);
        final int expectedValue2 = 0;
        assertEquals(stockBroker.getPortfolio(), expectedValue2);
    }

    /**
     * Test of changePrice method, of class Share. A similar test to above. More
     * changes this time.
     */
//    @Ignore
    @Test
    public void testChangePrice3() {
        final Share share = new Share();
        final BankManager bankManager = new BankManager(BM_BUY, BM_SELL, BM_INCREMENT);
        final StockBroker stockBroker = new StockBroker(SB_BUY, SB_SELL, SB_INCREMENT);
        assertTrue(share.addShareWatcher(bankManager));
        assertTrue(share.addShareWatcher(stockBroker));
        share.setPrice(PRICE1);
        share.setPrice(PRICE4);
        share.setPrice(PRICE7);
        share.setPrice(PRICE2);
        final int expectedValue1 = 100;
        assertEquals(bankManager.getPortfolio(), expectedValue1);
        final int expectedValue2 = 500;
        assertEquals(stockBroker.getPortfolio(), expectedValue2);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:00:05.990

切换`assertEquals(..., exptedValue);`到`assertEquals(exptedValue, ...);`。这不会改变您的失败，但会遵循[Class Assert](http://junit.sourceforge.net/javadoc/org/junit/Assert.html)的 javadoc并修复报告的输出。

*   在`BankManager`中，你永远不会改变`portfolio`，所以这就是你第一次失败的原因。
*   在`StockBroker`中，您`portfolio`始终设置为`SB_INCREMENT`，因此这可能是您第二次失败的原因。

因此，为了使其正常工作，您必须调整`portfolio`, 如果价格发生变化，或者将`expectedValue`s 调整为您当前的实现。

# c# - 鉴于使用标准助手的自定义助手，“无法从用法中推断出类型参数”

> ID：13138967
> 
> 赞同：2
> 
> 时间：2012-10-30T12:26:47.977
> 
> 标签：c#, asp.net-mvc-3, razor, helper, inference

我有一些用于 MVC3 网站的表格，其中包含很多重复部分。所以我试图为此做一个帮手。按照互联网上的一个例子，我做了这个：

```
using System;
using System.Linq.Expressions;
using System.Web.Mvc;
using System.Web.Mvc.Html;
using System.Web.Routing;

namespace Nop.Web.Themes.MyTheme.Extensions
{
    public static class FormLineHelper
    {
        public static MvcHtmlString FormLine<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper,
                                                                    Expression<Func<TModel, TProperty[]>> expression,
                                                                    object htmlAttributes = null)
        {
            TagBuilder tag = new TagBuilder("tr");
            tag.MergeAttributes(new RouteValueDictionary(htmlAttributes), true);
            var member = (MemberExpression)expression.Body;
            string propertyName = member.Member.Name;

            tag.InnerHtml += String.Format("<td class='label'>{0}</label></td><td class='field'>{1}</td><td class='padding'>{2}</td>",
               htmlHelper.LabelFor(expression), htmlHelper.EditorFor(expression), htmlHelper.ValidationMessageFor(expression));

            return MvcHtmlString.Create(tag.ToString());
        }
    }
} 
```

这编译得很好。但是，当我这样做时

```
@model Nop.Plugin.MyPlugin.Models.ViewModel

@{
    Layout = "../Shared/_Root.cshtml";
}

<div class="form">
<div class="form-top"></div>
<div class="form-center">

@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <table>
    @Html.FormLine(model => model.FirstName)
   </table>
}
</div>
<div class="form-bottom"></div>
</div> 
```

我确保 web.config 包含

```
<compilation debug="true" targetFramework="4.0"> 
```

我收到“无法从用法中推断出类型参数”错误。另一个工作类似但不使用标准助手的助手工作正常。我也试过这个：

```
@{ Html.FormLine<ViewModel, string>(model => model.FirstName); } 
```

这给出了错误“无法将类型'string'隐式转换为'string []'”。

我看到了类似的问题，但我无法找到答案。那我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:34:29.443

为什么你得到属性数组？

如何更改此行：

```
Expression<Func<TModel, TProperty[]>> expression, 
```

和

```
Expression<Func<TModel, TProperty>> expression, 
```

# c++ - C++快速刷新桌面

> ID：13138968
> 
> 赞同：0
> 
> 时间：2012-10-30T12:26:50.850
> 
> 标签：c++, windows, animation, desktop

我正在尝试制作一个当前将多边形输出到桌面以获得简单动画的程序。我目前遇到的问题是动画获得了“洋葱”效果，因为桌面没有刷新。我已经搜索了一种刷新桌面的方法，但是因为它是一个动画，所以没有一个解决方案可以足够快地刷新它。下面是我的代码示例：

```
#include <iostream>
#include <Windows.h>
#include <math.h>
#include <Shlobj.h>

int main() {    
    //start ambrose
    POINT amby[5];
    POINT pos;
    /* hide console window */
    ShowWindow(FindWindowA("ConsoleWindowClass", NULL), false);
    /* Calling GetDC with argument 0 retrieves the desktop's DC */
    HDC hDC_Desktop = GetDC(0);

    //This is just an example of what I am doing

    for (int i = 0; i < 10000; i++) {

        pos.x = 600+sin(double(i)/50)*200;
        pos.y = 500+cos(double(i)/50)*200;
        amby[0].x = -10+pos.x;
        amby[0].y = -10+pos.y;
        amby[1].x = -50+pos.x;
        amby[1].y = -50+pos.y;
        amby[2].x = 50+pos.x;
        amby[2].y = -50+pos.y;

        Polygon(hDC_Desktop,amby, 3);
        Sleep(10);
    }
    //The method I was trying before that didn't work VVVVV
    //LPITEMIDLIST pidl;
    //SHGetSpecialFolderLocation(NULL,CSIDL_DESKTOP,&pidl);
    //SHChangeNotify(SHCNE_ASSOCCHANGED,SHCNF_IDLIST,pidl,0);
    return 0;
} 
```

谢谢

# 编辑

我尝试过使用 invalidateRect ：

```
...
for (int i = 0; i < 10000; i++) {

    pos.x = 600+sin(double(i)/50)*200;
    pos.y = 500+cos(double(i)/50)*200;
    amby[0].x = -10+pos.x;
    amby[0].y = -10+pos.y;
    amby[1].x = -50+pos.x;
    amby[1].y = -50+pos.y;
    amby[2].x = 50+pos.x;
    amby[2].y = -50+pos.y;

    Polygon(hDC_Desktop,amby, 3);
    InvalidateRect(GetDesktopWindow(),NULL, true);
    Sleep(10);
}
... 
```

**我想知道是否有任何方法可以调用 WM_ERASEBKGND 或 WM_DISPLAYCHANGE 来强制更改。有谁知道是否有办法调用这些？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T13:40:29.567

我不确定您要达到的目标。让我来回答洋葱效应的问题。擦除前一次迭代中绘制的内容的快速而肮脏的解决方案可能是使用 XOR 模式进行绘制，但该解决方案有一些缺点，例如闪烁和颜色可能是任意的。解决这两个缺点的适当解决方案是在内存 DC 和 BitBlt 中对屏幕进行相同的绘图。

快速而肮脏的解决方案的代码是 -

```
SetROP2(hDC_Desktop,R2_XORPEN);
//This is just an example of what I am doing

for (int i = 0; i < 100; i++) 
{
    if(i!=0)
    {
        pos.x = 600+sin(double(i-1)/50)*200;
        pos.y = 500+cos(double(i-1)/50)*200;
        amby[0].x = -10+pos.x;
        amby[0].y = -10+pos.y;
        amby[1].x = -50+pos.x;
        amby[1].y = -50+pos.y;
        amby[2].x = 50+pos.x;
        amby[2].y = -50+pos.y;

                    Polygon(hDC_Desktop,amby, 3);
    }

    pos.x = 600+sin(double(i)/50)*200;
    pos.y = 500+cos(double(i)/50)*200;
    amby[0].x = -10+pos.x;
    amby[0].y = -10+pos.y;
    amby[1].x = -50+pos.x;
    amby[1].y = -50+pos.y;
    amby[2].x = 50+pos.x;
    amby[2].y = -50+pos.y;

    Polygon(hDC_Desktop,amby, 3);
    Sleep(10);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:40:34.337

有一个简单的解决方案，那就是实际上不在桌面上绘图。相反，创建一个**透明**的全屏窗口。由于它是透明的，因此您未绘制的任何像素都会在下方显示桌面。因此，只有您的多边形像素会隐藏底层桌面。

因此，桌面窗口永远不需要失效或重新绘制等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T13:05:16.983

你为什么不使用透明的wnd。

```
class COverlayWnd : public CWnd
{
    DECLARE_DYNAMIC(COverlayWnd)

public:
    COverlayWnd();
    virtual ~COverlayWnd();

protected:
    afx_msg void OnPaint();
    afx_msg int OnCreate(LPCREATESTRUCT lpCreateStruct);
    DECLARE_MESSAGE_MAP()
};

// OverlayWnd.cpp : implementation file
// 
```

实施。如果您希望动画在整个桌面上运行，只需移动窗口即可。

```
#include "stdafx.h"

// COverlayWnd

IMPLEMENT_DYNAMIC(COverlayWnd, CWnd)

COverlayWnd::COverlayWnd()
{
}

COverlayWnd::~COverlayWnd()
{
}

BEGIN_MESSAGE_MAP(COverlayWnd, CWnd)
    ON_WM_PAINT()
    ON_WM_CREATE()
END_MESSAGE_MAP()

void COverlayWnd::OnPaint()
{
    CPaintDC dc(this);
    CRect rect;
    GetClientRect( &rect );
    dc.FillSolidRect(&rect, RGB(1,1,1));
    //paint other stuff that don't have RGB(1,1,1)

}

int COverlayWnd::OnCreate(LPCREATESTRUCT lpCreateStruct)
{
    if (CWnd::OnCreate(lpCreateStruct) == -1)
        return -1;

    BOOL bRet = 0;

    bRet = ModifyStyleEx(0,WS_EX_LAYERED|WS_EX_TRANSPARENT);
    bRet = ModifyStyle(DS_SETFONT | DS_MODALFRAME | DS_FIXEDSYS | WS_POPUP | WS_CAPTION | WS_SYSMENU,0);
    bRet = ModifyStyle(WS_POPUP,0);
    bRet = SetLayeredWindowAttributes(RGB(1,1,1),0,LWA_COLORKEY);
    //the RGB(1,1,1) is the transparent color 
    ASSERT(bRet);
    //this->EnableWindow(FALSE);

    return 0;
} 
```

# android - Android : 从自己的应用程序更新其他应用程序

> ID：13138970
> 
> 赞同：0
> 
> 时间：2012-10-30T12:26:54.237
> 
> 标签：android, updates

是否可以从我自己的应用程序更新其他已安装的应用程序。实际上我想要做的是，我想开发一个应用程序来检查设备上已安装的应用程序，然后检查这些应用程序是否有可用的更新，如果有，它会更新它们。

要检查是否有可用于特定应用的更新，我发现第三方 API 单击此处[https://groups.google.com/forum/?fromgroups=#!topic/android-market-api/-F2QfvGt1nU](https://groups.google.com/forum/?fromgroups=#!topic/android-market-api/-F2QfvGt1nU)

那么，现在可以从我的应用程序以编程方式更新应用程序了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:30:28.460

Google Play Store 应用程序已经为 Play 商店中的每个应用程序执行此操作，我不相信 Android 提供了任何公开可用的 API 来在您自己的应用程序中执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:33:35.873

如果您真的想使用肯定会很快中断的不受支持的 API，我建议您执行以下操作：

检查用户安装的应用程序及其版本：

> 使用 PackageManager 和 getPackageInfo() 获取特定应用程序的 PackageInfo 对象，由其包标识（例如，com.commonsware.mygreatapp）。PackageInfo 上的 versionCode 和 versionName 字段将包含您要查找的信息。

然后将其与最新版本的 API 进行比较：

**编辑：** 将包名发送到 API：dev.appaware.com/1/doc/examples/example3.php 并分析这一行“版本”：“2.4.0.263535”，如果这个数字与手机上的版本不同，将用户带到 Google Play 页面。

这将是现有功能的完全重复...

# python - 从列表中删除空字符串

> ID：13138978
> 
> 赞同：5
> 
> 时间：2012-10-30T12:27:32.830
> 
> 标签：python, string, list

我刚刚开始 Python 课程，我真的需要一些帮助。请记住，如果您要回答这个问题，我是新手。

我必须制作一个程序，取某个列表“l”中所有元素的平均值。这本身就是一个非常简单的功能；问题是老师希望我们在进行平均之前删除列表中存在的任何空字符串。

因此，当我收到列表时，`[1,2,3,'',4]`我希望函数忽略`''`平均值，而只取其他 4/len(l) 的平均值。谁能帮我这个？

也许是一个循环将列表中的某个位置与列表中的某个位置进行比较并从列表`''`中删除这些位置？我已经尝试过了，但它不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T12:33:53.887

您可以使用列表推导来删除以下所有元素`''`：

```
mylist = [1, 2, 3, '', 4]
mylist = [i for i in mylist if i != ''] 
```

然后，您可以通过将总和除以列表中的元素数来计算平均值：

```
avg = sum(mylist)/len(mylist) 
```

### 浮点平均值（假设 python 2）

根据您的应用程序，您可能希望平均值为浮点数而不是整数。如果是这种情况，请先将这些值之一转换为浮点数：

```
avg = float(sum(mylist))/len(mylist) 
```

或者，您可以使用 python 3 的除法：

```
from __future__ import division
avg = sum(mylist)/len(mylist) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T12:49:12.913

您可以使用`filter()`：

`filter()``list`如果我们在 Python 3 中传递一个列表和 an 在 Python 2 中返回 a `iterator`。正如@PhilH 所建议的，您可以 `itertools.ifilter()`在 Python 2 中使用来获取迭代器。

要在 Python 3 中获取列表作为输出，请使用`list(filter(lambda x:x != '', lis))`

```
In [29]: lis = [1, 2, 3, '', 4, 0]

In [30]: filter(lambda x:x != '', lis)
Out[30]: [1, 2, 3, 4, 0] 
```

请注意过滤您可以简单使用的任何虚假值`filter(None, ...)`：

```
>>> lis = [1, 2, 3, '', 4, 0]
>>> filter(None, lis)
[1, 2, 3, 4] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T12:44:19.273

其他答案向您展示了如何创建一个删除所需元素的新列表（这是在 python 中执行此操作的常用方法）。但是，在某些情况下，您希望在适当的列表上进行操作——这是一种在适当的列表上进行操作的方法：

```
while True:
    try:
        mylist.remove('')
    except ValueError:
        break 
```

虽然我认为可以说你可以通过切片分配和列表理解来做到这一点：

```
mylist[:] = [i for i in mylist if i != ''] 
```

而且，正如一些人提出了关于内存使用和生成器奇迹的问题：

```
mylist[:] = (i for i in mylist if i != '') 
```

也可以。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T12:55:19.377

```
itertools.ifilterfalse(lambda x: x=='', myList) 
```

这使用了迭代器，因此它不会创建列表的副本，并且在时间和内存方面都应该更高效，从而使其对长列表具有鲁棒性。

JonClements 指出，这意味着单独跟踪长度，以便展示该过程：

```
def ave(anyOldIterator):
    elementCount = 0
    runningTotal = 0
    for element in anyOldIterator:
        runningTotal += element
        elementCount += 1
    return runningTotal/elementCount 
```

甚至更好

```
def ave(anyOldIterator):
    idx = None
    runningTotal = 0
    for idx,element in enumerate(anyOldIterator):
        runningTotal += element
    return runningTotal/(idx+1) 
```

减少：

```
def ave(anyOldIterator):
    pieces = reduce(lambda x,y: (y[0],x[1]+y[1]), enumerate(anyOldIterator))
    return pieces[1]/(pieces[0]+1) 
```

平均 range(0,1000) 运行 10000 次的 Timeit 使列表理解的时间为 0.9 秒，减少版本为 0.16 秒。因此，在我们添加过滤之前，它已经快了 5 倍。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-06T03:15:12.780

您可以使用：

```
alist = ['',1,2]
new_alist = filter(None, alist)
new_alist_2 = filter(bool, alist) 
```

结果：

```
new_alist = [1,2]
new_alist_2 = [1,2] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-30T12:34:53.403

'' 相当于 False。如果我们过滤掉 0 的情况（因为 0 相当于 False），我们可以使用列表推导：

```
[x for x in a if x or x == 0] 
```

或者，如果我们严格想要**过滤掉空字符串**：

```
[x for x in a if x != ''] 
```

这可能不是最快的方法。

**编辑**，添加了一些与其他解决方案相比的基准结果（不是为了将自己与其他人进行比较，但我也很好奇哪种方法最快）

```
ragsagar>
6.81217217445
pistache>
1.0873541832
cerealy>
1.07090902328
Matt>
1.40736508369
Ashwini Chaudhary>
2.04662489891
Phil H (just the generator) >
0.935978889465
Phil H with list() >
3.58926296234 
```

我快速制作了脚本，使用 timeit()，我用作`[0,1,2,0,3,4,'',5,8,0,'',4]`列表。我进行了多次测试，结果没有变化。

**注意：**我并不是想以速度为标准将我的解决方案放在首位。我知道 OP 并没有特别要求速度，但我很好奇，也许其他人也很好奇。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-30T12:30:25.663

```
mylist = [1, 2, 3, '', 4]
newlist = []
for i in mylist:
    try:
        newlist.append(int(i))
    except ValueError:
        pass
avg = sum(newlist)/len(newlist) 
```

# c# - 如何计算excel列名？

> ID：13138981
> 
> 赞同：0
> 
> 时间：2012-10-30T12:27:39.287
> 
> 标签：c#

我想将数据从excel导入sql，在此操作中如果用户可以额外添加一列，我如何检查新添加的列，同时在sql表中还添加了具有相同列名的新列，例如excel表格...

我可以完成阅读我的编码下方的 excel 列计数

```
 protected void btn_upload_Click(object sender, EventArgs e)
    {
        //Add Path to Local system dynamically
        string path = string.Empty;

        path = Server.MapPath("~//files//") + Fup_Excel.PostedFile.FileName;

        Fup_Excel.SaveAs(path);
        //-----------------Execl Connection & Count Part-------------------------------------
        //create Oledb connection for Excel Fetch
        OleDbConnection oconn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + path + ";Extended Properties=Excel 8.0");

        OleDbCommand olcmd = new OleDbCommand("select * from [sheet1$]", oconn);//create command for select excel file

        OleDbDataAdapter adapter = new OleDbDataAdapter();

        adapter.SelectCommand = olcmd;//adap the command

        DataSet ds = new DataSet();//collection of data

        adapter.Fill(ds);//data's are filled to dataset

        string count = ds.Tables[0].Columns.Count.ToString();//taking the Excel sheet column count

    } 
```

在我完成从 sql 表中计算之后，代码也是

```
 SqlConnection sconn = new SqlConnection(@"Data Source=C07-PC\SQLEXPRESS;Initial Catalog=excel;User ID=sa;Password=**********");
        string asdf = null;
        SqlCommand scmd = new SqlCommand();
        scmd.CommandText = "select count(*) from information_schema.columns where table_name='table_1'";
        scmd.Connection = sconn;
        sconn.Open();
        SqlDataReader sr = null;
        sr = scmd.ExecuteReader();
        while (sr.Read())
        {

              asdf =sr[0].ToString();

        } 
```

从这里开始，我不知道如何检查在 excel 中新添加的列？然后我想在 sql 表中插入列的同名..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:32:29.433

从 excel 中检索所有列后，您需要检查 SQL 数据库中的每一列是否存在该列。如果不存在，则添加到 sql 数据库。

# ibm-mq - Websphere MQ 死信队列处理程序失败

> ID：13138988
> 
> 赞同：3
> 
> 时间：2012-10-30T12:28:01.033
> 
> 标签：ibm-mq

我正在尝试使用以下字符串在 linux 框上创建死信队列处理程序

```
DEFINE SERVICE(dlqhandler) + CONTROL(MANUAL) + DESCR('DLQ Handler Service') + 
SERVTYPE(SERVER) + STARTCMD('/home/mqm/dlq/dlqhandler.sh') + 
STDOUT('/home/mqm/dlq/dlq.log') + 
STDERR('/home/mqm/dlq/dlq.err') + 
REPLACE 
```

但是服务无法启动。有人对此有任何想法吗？

问候 J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:45:05.987

这与 WebSphere MQ 如何执行命令有关。当您从 shell 程序执行文本文件时，为方便起见，shell 会在文件开头查找 shebang 行，以获取有关要运行什么可执行文件的线索。然后它运行指定的程序并将文件作为参数传递。因此，例如，如果您运行`/home/mqm/dlq/dlqhandler.sh`并且脚本中的第一行是`#! /bin/sh`您的 shell`/bin/sh /home/mqm/dlq/dlqhandler.sh`代表您将其转换为并提交它。效果是启动一个新的子外壳并将其作为参数传递给您的脚本文件。

WebSphere MQ 使用操作系统直接执行您在`STARTCMD`现场放置的任何内容。没有由 shell 执行的方便替换，因此如果您指定的内容是脚本，操作系统不知道如何处理它。更改为`STARTARG(/bin/sh /home/mqm/dlq/dlqhandler.sh)`将无济于事，因为操作系统不将其视为命令和参数，而是将其视为具有嵌入式空间的命令。

但是，WebSphere MQ 确实`STARTARG`为此目的提供了一个参数。如果您更改为使用以下命令（假设您的脚本的 shebang 行执行`/bin.sh`）它应该可以工作：

```
DEFINE SERVICE(dlqhandler) + 
       CONTROL(MANUAL) DESCR('DLQ Handler Service') + 
       SERVTYPE(SERVER) STARTCMD('/bin/sh') + 
       STARTARG('/home/mqm/dlq/dlqhandler.sh') +
       STDOUT('/home/mqm/dlq/dlq.log') + 
       STDERR('/home/mqm/dlq/dlq.err') + 
       REPLACE 
```

**更新：**
经过一些测试，我们发现 Linux 服务器被配置为运行受限 shell。这阻止了使用路径名传递参数，并且与此问题相关，执行托管在共享驱动器上的任何内容，例如`/hom/mqm`. 在受限环境中，将脚本和日志移动到目录下`/var/mqm`解决了问题。

在测试期间，我们能够通过使用 shell 内置命令来隔离问题。这些没有路径或权限问题，因此排除了文件系统权限等问题。例如，`STARTCMD('/bin/sh') STARTARG('-c "echo It works"')`告诉我们 QMgr 能够`/bin/sh`正确调用。将脚本更改为读取失败的单行，`echo It works`这告诉我们问题不是脚本的内容，而是脚本本身。使用`STARTARG('-c set')`工作并向我们展示了当前目录在哪里以及`$PATH`. 将脚本移动到当前目录解决了权限问题，并且一些进一步的实验表明它不是`/`脚本路径中的失败。我们看到的唯一明显的区别是`/home/mqm`和`/var/mqm`一个是共享的，一个是专用的。最终的服务定义是：

```
DEFINE SERVICE(dlqhandler) +
       CONTROL(QMGR) DESCR('DLQ Handler Service') + 
       SERVTYPE(SERVER) STARTCMD('/bin/sh') + 
       STARTARG('-c "+MQ_INSTALL_PATH+bin/runmqdlq < +MQ_DATA_PATH+subdir/+QMNAME+.rules.table"') +
       STDOUT('+MQ_DATA_PATH+subdir/dlq.+QMNAME+.log') + 
       STDERR('+MQ_DATA_PATH+subdir/dlq.+QMNAME+.err') + 
       STOPCMD('+MQ_INSTALL_PATH+bin/amqsstop') +
       STOPARG('-m +QMNAME+ -p +MQ_SERVER_PID+') +
       REPLACE 
```

将`subdir`上面替换为规则文件的路径。因此，例如，`+MQ_DATA_PATH+subdir/+QMNAME+.rules.table`可能`+MQ_DATA_PATH+exits/+QMNAME+.rules.table`会期望在`/var/mqm/exits`默认安装的股票 Linux 上使用规则文件。

# iphone - iPhone应用程序打开时显示以前的状态

> ID：13138989
> 
> 赞同：0
> 
> 时间：2012-10-30T12:28:07.207
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我有一个很奇怪的问题。我的应用程序运行良好，`simulator`但安装时`iphone`显示奇怪的行为

假设我在`settings`页面然后我使用主页按钮关闭了应用程序。然后我在很长一段时间后再次启动应用程序，我总是会先进入设置页面一秒钟，然后进入主加载屏幕。每隔一个页面都会发生这种情况，即使它不是设置`ViewController`

怎么了？

最好的问候奥马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:57:21.333

标准行为，UI 恢复。您的 iOS 应用程序会在您离开的地方继续执行。这意味着：如果应用程序被推送到后台，则会截取屏幕截图。回到应用程序，将显示此屏幕截图，同时您的 UI 已准备好。如果您的应用程序中有代码`applicationDidBecomeActive:`或`applicationWillEnterForeground:`（请参阅此处：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)），并且将立即重新配置 UI，你得到描述的行为。您可以关闭 UI 恢复并让您的应用真正退出，而不是通过更改 info.plist 中的键将其推到后台：`UIApplicationExitsOnSuspend`

# java - 如何在 Java 对象列表中搜索

> ID：13138990
> 
> 赞同：39
> 
> 时间：2012-10-30T12:28:07.753
> 
> 标签：java, list, search, collections

我有一个对象列表，列表非常大。对象是

```
class Sample {
    String value1;
    String value2;
    String value3;
    String value4;
    String value5;
 } 
```

现在我必须在列表中搜索对象的特定值。说如果`value3=='three'` 我必须返回那些对象（我的搜索并不总是基于 value3）

名单是

```
List<Sample> list = new ArrayList<Sample>(); 
```

这样做的有效方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-30T13:31:53.577

你可以试试[Apache Commons Collections](http://commons.apache.org/collections/)。

有一个类[CollectionUtils](http://commons.apache.org/collections/api-release/org/apache/commons/collections/CollectionUtils.html)允许您通过自定义[Predicate](http://commons.apache.org/collections/api-release/org/apache/commons/collections/Predicate.html)选择或过滤项目。

您的代码将是这样的：

```
Predicate condition = new Predicate() {
   boolean evaluate(Object sample) {
        return ((Sample)sample).value3.equals("three");
   }
};
List result = CollectionUtils.select( list, condition ); 
```

**更新：**

在**java8**中，使用 Lambdas 和[StreamAPI](http://www.oracle.com/technetwork/articles/java/ma14-java-se-8-streams-2177646.html)这应该是：

```
List<Sample> result = list.stream()
     .filter(item -> item.value3.equals("three"))
     .collect(Collectors.toList()); 
```

好多了！

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-09-06T18:52:02.633

## 使用 Java 8

使用[Java 8](http://en.wikipedia.org/wiki/Java_version_history#Java_SE_8_.28March_18.2C_2014.29)，您可以简单地将列表转换为允许您编写的[流：](http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html)

```
import java.util.List;
import java.util.stream.Collectors;

List<Sample> list = new ArrayList<Sample>();
List<Sample> result = list.stream()
    .filter(a -> Objects.equals(a.value3, "three"))
    .collect(Collectors.toList()); 
```

注意

*   `a -> Objects.equals(a.value3, "three")`是一个[lambda 表达式](http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)
*   `result`是`List`一个`Sample`类型
*   它非常快，每次迭代都没有演员表
*   如果您的过滤器逻辑变得更重，您可以这样做`list.parallelStream()`而不是`list.stream()`（[阅读此](https://stackoverflow.com/questions/20375176/should-i-always-use-a-parallel-stream-when-possible)）

## 阿帕奇公地

如果不能使用 Java 8，可以使用[Apache Commons](http://commons.apache.org/)库并编写：

```
import org.apache.commons.collections.CollectionUtils;
import org.apache.commons.collections.Predicate;

Collection result = CollectionUtils.select(list, new Predicate() {
     public boolean evaluate(Object a) {
         return Objects.equals(((Sample) a).value3, "three");
     }
 });

// If you need the results as a typed array:
Sample[] resultTyped = (Sample[]) result.toArray(new Sample[result.size()]); 
```

注意：

*   每次迭代都有一个从`Object`to的演员表`Sample`
*   如果您需要将结果输入为`Sample[]`，则需要额外的代码（如我的示例所示）

* * *

奖励：一篇[不错的博客文章](http://www.leveluplunch.com/java/examples/find-element-in-list/)，讨论如何在列表中查找元素。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-30T12:31:34.683

如果您总是基于 搜索`value3`，您可以将对象存储在 Map 中：

```
Map<String, List<Sample>> map = new HashMap <>(); 
```

`key = value3`然后，您可以使用和 value = 具有相同`value3`属性的 Sample 对象列表填充地图。

然后您可以查询地图：

```
List<Sample> allSamplesWhereValue3IsDog = map.get("Dog"); 
```

注意：如果没有 2 个`Sample`实例可以具有相同的`value3`，您可以简单地使用`Map<String, Sample>`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-30T12:33:32.437

我修改了这个列表并在示例中添加了一个列表试试这个

伪代码

```
Sample {
   List<String> values;
   List<String> getList() {
   return values}
}

for(Sample s : list) {
   if(s.getString.getList.contains("three") {
      return s;
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T12:42:22.717

由于您的列表是`ArrayList`，因此可以假定它是未排序的。因此，没有办法搜索比*O(n)*更快的元素。

如果可以的话，您应该考虑将您的列表更改为具有特定于您的示例类的`Set`（作为实现）。`HashSet``Comparator`

另一种可能性是使用`HashMap`. 您可以将数据添加为`Sample`（请以大写字母开头类名）并使用要搜索的字符串作为键。然后你可以简单地使用

```
Sample samp = myMap.get(myKey); 
```

如果每个键可以有多个样本，则使用`Map<String, List<Sample>>`，否则使用`Map<String, Sample>`。**如果您使用多个键，则必须创建多个包含相同数据集的地图。**由于它们都指向相同的对象，因此空间应该不是什么大问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-15T13:37:53.670

for+if 呢？

```
Object result; 
for (Object o: objects){ 
  if (o.value3.equals("three")){ 
    result=o; 
    break;
  }
} 
```

没有溪流，没有番石榴，我认为这很简单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-15T14:20:03.563

您可以过滤列表：

```
list.stream().filter(
              sample -> sample.getValue4().equals("4")
              ).forEach(System.out::println) 
```

# windows-phone-7 - 如何在 wp7 中使用列表框？

> ID：13138998
> 
> 赞同：0
> 
> 时间：2012-10-30T12:28:35.450
> 
> 标签：windows-phone-7, xaml, listbox

我的 xaml par中有一个列表框控件。我的列表框代码是

```
<ScrollViewer Grid.Row="2" Name="ScrollGrid" VerticalScrollBarVisibility="Auto" VerticalAlignment="Top" Height="Auto" Width="450" Margin="0,100,0,0" >
    <ListBox x:Name="TransactionList" Grid.Row="2" HorizontalAlignment="Center" Margin="0,0,0,0"  Width="400" Height="Auto">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Top" Margin="0,-10,0,0" Height="120" Width="400" MouseLeftButtonUp="StackPanel_MouseLeftButtonUp">

                    <StackPanel Orientation="Horizontal" VerticalAlignment="Top"  Height="80" Width="300" Margin="0,0,20,0">
                        <TextBlock Height="Auto" Margin="20,0,0,0" VerticalAlignment="Center" Text="vodafone vas" FontSize="30" Foreground="Gray" Name="tbCitynameFavorite"  />
                    </StackPanel>
                    <StackPanel Orientation="Vertical"  Height="60" Width="60" Margin="0,0,0,30">
                        <Image Name="imgfevdlt" Width="50" Height="40"  VerticalAlignment="Center" FlowDirection="LeftToRight" Source="/VodafoneAugmentedReality;component/Images/ArrowMoreSmall.png" />

                    </StackPanel>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left"  Height="10" Width="350" Margin="-360,60,0,0">
                <Image Source="/VodafoneAugmentedReality;component/Images/SaperaterLine.png" Width="350" />
            </StackPanel>
        </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</ScrollViewer> 
```

当我运行应用程序时，这不会显示任何数据

但是当我注释掉这两个标签时，它将完美运行

```
 <ListBox.ItemTemplate>
                    <DataTemplate> 
```

在这里我只有静态值，所以它可以，但是当我有多个值时，它会产生问题所以请帮助我，我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:51:37.310

您将必须设置一个类（例如 ListBoxItem ），其中包含您的 DataTemplate 成员值的所有属性

然后定义 ListBoxItem 的 List 并将其设置为 ListBox 的 ItemSource

示例代码

```
public class ListBoxItem
{
   public string CityNameFavorite { set; get; }
   // Other required properties follows here
}

List<ListBoxItem> listBoxItems = new List<ListBoxItem>();
listBoxItems.Add(new ListBoxItem() { CityNameFavorite = "Vodafone vas" });
//Add as many items you need

TransactionList.ItemsSource = listBoxItems; 
```

这只是对如何实现它的概述，根据您的需要即兴创作