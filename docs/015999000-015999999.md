# StackOverflow 问答 15999000-15999999

# .htaccess - htaccess 动态文件夹重写

> ID：15999005
> 
> 赞同：1
> 
> 时间：2013-04-14T12:21:01.920
> 
> 标签：.htaccess

这是我的情况，我已经想了好几天如何制作它，这对我来说似乎太复杂了。我想重写以下内容：

```
http://demo.myurl.com/proevent/event1 to http://demo.myurl.com/index.php?url=proevent&path=event1 

http://demo.myurl.com/proevent/admin to http://demo.myurl.com/admin - when folders exist under that location I want to have them loaded and not falling to /index.php 
```

现在说“proevent”和“event1”是完全动态的！

我肯定知道的文件夹是：admin、inc、现有的照片，其余的都是动态的。

在所有重定向的情况下，我想从路径中知道打开了什么并给出错误消息。

这是我到目前为止所拥有的：

跳过斜线，因为人们忘记放置它并且文件夹不存在

```
 RewriteCond %{REQUEST_URI} !(\.|/$)
    RewriteRule (.*) /$1/ [R=301,L]
if dir/file exists (doesn't really work)
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ([^/]*)/(.*) /$2%{REQUEST_URI} [R] 
```

也不知道它什么时候起作用，因为它可能会在以前的情况下发生

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]*)/(/?.*?)([^/]*)$ index.php?url=$1&path=$2 [L] 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:13:39.243

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} /([^/]*)$
RewriteCond %{DOCUMENT_ROOT}/%1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/%1 -d
RewriteRule /(.*)$ /%1/ [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]*)/(/?.*?)$ index.php?url=$1&path=$2 [L] 
```

会为你做的。

第一部分检查完整目录或子目录是否为文件，第二部分如果第一部分失败则重定向。

为了更清楚

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f 
```

首先检查这是否是一个真实的文件或目录。

```
RewriteCond %{REQUEST_URI} /([^/]*)$ 
```

根据您的请求获取 URL 的最后部分。

```
RewriteCond %{DOCUMENT_ROOT}/%1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/%1 -d 
```

这些检查是 /（URL 的最后一部分）是文件还是目录。这使用了 Rewrite 的反向引用功能。%1 引用 RewriteCond 中最后一个 RegEx 的第一个块。

```
RewriteRule /(.*)$ /%1/ [L] 
```

如果是目录，我们重写

否则，下一部分很明显，只是重写了您布置的获取条件。

# c - c数组输出错误

> ID：15999008
> 
> 赞同：-4
> 
> 时间：2013-04-14T12:21:25.000
> 
> 标签：c

有人可以解释为什么这个算法

```
for (i = 0;i<5;i++)
{
    for(j = 0;j<5;j++)
    {
        b[j] = a[i];
        break;
    }
} 
```

给出奇怪的输出，而这

```
for (i = 0;i<5;i++)
{
    b[i] = a[i];
} 
```

完美运行？问题是编写一个程序将一个数组的元素复制到另一个数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:24:13.230

你的第一个代码是错误的。它分配`b[0] = a[0]`，然后`b[0] = a[1]`等等。你`break`阻止循环去`j = 1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:25:43.670

这里：

```
for (i = 0;i<5;i++)
{
    for(j = 0;j<5;j++)
    {
        b[j] = a[i];
        break;
    }
} 
```

`b[0]`在设置每个迭代后，您将中断`i`. 所以，到最后你是`b[0]`平等`a[4]`的，其余的都是垃圾，因为你从来没有设置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T12:30:09.347

您的算法等效于：

```
b[0] = a[4]; 
```

# android - 更改片段中的字幕？

> ID：15999010
> 
> 赞同：-2
> 
> 时间：2013-04-14T12:21:33.743
> 
> 标签：android, android-fragments, android-actionbar, viewpagerindicator

嗨，我已经使用 ViewPagerIndicator 库有一段时间了，我希望每次用户滑动到另一个 Fragment 到其他页面时我的操作栏的标题都会改变，这是我正在考虑的代码，但它只是不工作。

```
Activity miz = getActivity();
    miz.setTitle("Miz"); 
```

我已经把这段代码**放在我所有的片段中，**每次都显示不同的标题，但由于某种原因它不能正常工作，因为它总是*很晚*。我认为它可能与 OnCreate、OnResume 或 OnPause 有关系，并且无法对其有帮助吗？我希望在下一个片段对用户可见时更改操作栏的标题。

我也有一些这样的代码

```
@Override
public void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    Activity miz = getActivity();
    miz.setTitle("Miz");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:29:00.643

常规的 ：

```
this.getActivity().getActionBar().setTitle(title); 
```

使用 ActioBarSherlock ：

```
this.getSherlockActivity().getSupportActionBar().setTitle(title); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:25:05.723

你可以这样做：

```
ActionBar actionBar = getActionBar();  // or getSupportActionBar() for ActionBarSherlock
actionBar.setTitle("test"); 
```

在一个片段中：

```
ActionBar actionBar = getActivity().getActionBar();  
actionBar.setTitle("test"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-25T20:43:56.337

尝试

```
((AppCompatActivity) getActivity()).getSupportActionBar().setTitle("Miz"); 
```

它会工作

参考：[从片段中设置我的工具栏上的字幕](https://stackoverflow.com/questions/26880544/setting-a-subtitle-on-my-toolbar-from-a-fragment)

# ios - Chartboost 行为怪异的 IOS

> ID：15999012
> 
> 赞同：0
> 
> 时间：2013-04-14T12:21:45.497
> 
> 标签：ios, cocos2d-iphone, chartboost

我正在尝试将 chartboost 集成到我的应用程序中，我正在设备上对其进行测试，我将设备添加到 chartboost 上的应用程序中。如果我在 chartboost 上将应用程序设置为测试模式，它运行良好，它总是显示测试感兴趣的广告，如果我禁用测试模式，它很少显示实时广告（有趣和更多的应用程序），大部分时间它只是不显示任何事物。在广告系列中，它还显示我的广告系列已经有 1 次安装和 1 次点击，所以我认为我做得很好，但广告仍然很少出现，是某种网络问题还是什么？

请帮忙

我在模拟器上测试过，效果很好，设备上应该是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:02:20.443

您应该了解几件事来帮助诊断此问题：

1.  用户每 24 小时只能看到一次广告。这意味着，在您查看当前针对您的条件（国家、语言、设备型号、操作系统版本等）的所有广告后，将不再显示广告。
2.  模拟器自动作为测试设备运行 - 这意味着广告逻辑和定位被忽略，并且您每次都能看到广告。
3.  [您可以按照这些说明](https://help.chartboost.com/faq/general#test)添加测试设备，以使您的设备的行为与模拟器相同。
4.  由于许多广告客户按国家/地区进行定位，因此适用于您所在国家/地区的广告可能较少。Chartboost 在北美市场的填充率很高，所以这（可能）对大多数玩家来说都不是问题。

希望有帮助！

全面披露：我在 Chartboost 工作

# gstreamer - gstreamer 输出选择器不允许保存到文件

> ID：15999018
> 
> 赞同：1
> 
> 时间：2013-04-14T12:22:05.200
> 
> 标签：gstreamer

我想连续收听来自 alsasrc 的音频流，同时能够将片段保存到文件中。我将按下带有“记录”或“停止”的按钮。

我想我需要以下 gst-launch-0.10 命令才能工作： gst-launch-0.10 alsasrc do-timestamp=true ！三通名称=t！队列 ！阿尔萨辛克 ！队列 ！音频转换！波浪！输出选择器名称=s s。！文件接收器位置=test1.wav s。！假水槽

当我按下记录/停止按钮时，我对输出选择器进行编程以在文件接收器和假接收器之间切换，我知道插件中的 gst-plugins-bad/tests/icles/output-selector-test.c 示例，并且想破解一下。

现在问题出现在输出选择器中，它创建了文件 test1.wav 但没有写入文件。为了专注于我创建的这个问题：

gst-launch-0.10 audiotestsrc is-live=true do-timestamp=true ！波浪！输出选择器名称=s s。！文件接收器位置=test1.wav s。！文件接收器位置=test2.wav

这也不起作用（而 gst-launch-0.10 audiotestsrc is-live=true do-timestamp=true !wavenc !filesink location=test1.wav 按预期工作）。这两个文件已创建但未写入。谁能指出我正确的方向？

在发布“[gst-devel] 如何在播放管道之前将多个文件接收器链接到输出选择器”时，我读到第二个接收器在预卷上阻塞。这就是为什么 output-selector-test.c 中的示例使用 live-src 作为技巧的原因，我也使用 audiotestsrc 来做到这一点，但它对我没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-06T20:57:42.980

预卷在这里不是你的朋友，所以在 filesink 和 fakesink 上都设置 async=0：

```
gst-launch-0.10 command to work: gst-launch-0.10 alsasrc do-timestamp=true ! tee name=t ! queue ! alsasink t. ! queue ! audioconvert ! wavenc ! output-selector name=s s. ! filesink location=test1.wav async=0 s. ! fakesink async=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:38:34.453

将wavenc元素放入s中怎么样？！文件接收器位置=test1.wav 分支？当流开始和停止时，wavenc 会做一些工作。output-selector 只有在元素位于其后面时才能确保这项工作。

# jetty - Jetty 客户端 POST 文件到 Jetty 服务器

> ID：15999019
> 
> 赞同：2
> 
> 时间：2013-04-14T12:22:06.890
> 
> 标签：jetty

我正在创建一个 Jetty 客户端，它将 POST 文件发送到 Jetty 服务器。我正在尝试使用`ContentExchange.setFileForUpload()`，但我无法在网上找到有关如何正确使用此 API 的任何示例代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T13:23:21.067

API 不言自明，只需传入您要上传的文件即可；其余的只是基本的 HTTP：

```
HttpClient httpClient = ...;

File file = ...;

ContentExchange exchange = new ContentExchange(true);
exchange.setURL("http://host/path");
exchange.setMethod(HttpMethods.POST);
exchange.setFileForUpload(file);
exchange.setRequestHeader("Content-Type", "application/octet-stream");
exchange.setRequestHeader("Content-Length", String.valueOf(file.length()));
httpClient.send(exchange);

// Wait for the upload to complete
exchange.waitForDone(); 
```

如果您想更好地控制文件上传将经历的 HTTP 阶段，或者更好地切换到[Jetty 9 的 HttpClient](http://www.eclipse.org/jetty/documentation/current/http-client.html) ，请查看[HttpClient 文档](http://wiki.eclipse.org/Jetty/Tutorial/HttpClient)，这是一个[大大改进](http://webtide.intalio.com/2012/11/the-new-jetty-9-http-client/)的实现。

# c++ - gdkmm：如何销毁gdk窗口？

> ID：15999021
> 
> 赞同：0
> 
> 时间：2013-04-14T12:22:21.000
> 
> 标签：c++, gtkmm, gdk

**现状：** 我有一个带有事件窗口的自定义小部件（MyWidget）。
**问题：**如果我创建、显示然后隐藏和销毁小部件，我会从应用程序收到以下消息：

`Gdk-WARNING **: losing last reference to undestroyed window`

**我发现了什么：**我查看了`gdkwindow.c`文件，并且在`GDK_WINDOW_DESTROYED(window) == FALSE`. 所以我不明白的是我应该如何正确地破坏我的窗口以便最终`gdk_window_destroy()`调用函数。我认为调用它的最佳位置是`Gdk::~Window()`析构函数。但它是空的。而且文件中根本`gdk_window_destroy()`没有`gdkwindow.cc`。

和`on_realize()`回调`on_unrealize()`如下。

```
class MyWidget : public Gtk::Widget
{
...
private:
    Glib::RefPtr<Gdk::Window>   _event_window;
...
};

void Gtk::MyWidget::on_realize()
{
    GdkWindowAttr       attributes;
    const Allocation    & allocation = get_allocation();

    attributes.event_mask = GDK_BUTTON_PRESS_MASK;

    attributes.x = allocation.get_x();
    attributes.y = allocation.get_y();
    attributes.width = allocation.get_width();
    attributes.height = allocation.get_height();
    attributes.wclass = GDK_INPUT_ONLY;
    attributes.window_type = GDK_WINDOW_CHILD;

    _event_window = Gdk::Window::create(get_parent_window(), &attributes, GDK_WA_X | GDK_WA_Y);
    _event_window->set_user_data(Widget::gobj());

    set_window(get_parent_window());

    set_realized();
}

void Gtk::MyWidget::on_unrealize()
{
    _event_window->set_user_data(NULL);
    _event_window.reset();

    set_realized(false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T06:46:06.693

事实证明，销毁您创建的 GDK 窗口的最正确方法`Gdk::Window::create()`是......猜猜是什么？调用自定义小部件`Gtk::Widget::unrealize()`的`on_unrealize()`方法，因为除了其他事情之外，此基本方法还需要`gdk_window_destroy()`小部件的 GDK 窗口。为此，您的小部件**必须**是“窗口化的”（即您应该`set_has_window(true);`在构造函数和回调`set_window(<your allocated GDK window>);`中`on_realize()`调用。非常明显的方法，不是吗？

我也应该说一些关于`Gtk::Widget::realize()`. 不像`Gtk::Widget::unrealize()`你应该`Gtk::Widget::realize()` *只*在你的小部件*没有*GDK 窗口时调用（该方法假定它是一个断言）。

不幸的是，我没有时间并且希望深入了解它并努力了解它为什么会这样做以及这种方法有什么原因和后果。否则我会提供更详细的解释。

[您可以在 GTK 的自定义小部件教程](https://developer.gnome.org/gtkmm-tutorial/stable/sec-custom-widgets.html.en)中找到官方示例 。

我的小部件的代码现在看起来像这样：

```
class MyWidget : public Gtk::Widget
{
...
private:
    Glib::RefPtr<Gdk::Window>   _event_window;
...
};

void Gtk::MyWidget::on_realize()
{
    GdkWindowAttr       attributes;
    const Allocation    & allocation = get_allocation();

    attributes.event_mask = GDK_BUTTON_PRESS_MASK | GDK_EXPOSURE;

    attributes.x = allocation.get_x();
    attributes.y = allocation.get_y();
    attributes.width = allocation.get_width();
    attributes.height = allocation.get_height();
    attributes.wclass = GDK_INPUT_OUTPUT;
    attributes.window_type = GDK_WINDOW_CHILD;

    _event_window = Gdk::Window::create(get_parent_window(), &attributes, GDK_WA_X | GDK_WA_Y);
    _event_window->set_user_data(Widget::gobj());

    set_window(_event_window);

    set_realized();
}

void Gtk::MyWidget::on_unrealize()
{
    _event_window->set_user_data(NULL);
    _event_window.reset();

    Widget::unrealize();
    // it will call gdk_destroy_window() and
    // set_realized(false);
} 
```

# c - 传递多维数组

> ID：15999024
> 
> 赞同：0
> 
> 时间：2013-04-14T12:22:43.217
> 
> 标签：c, multidimensional-array

我正在尝试制作 2x2 数组，将其初始化为 0，然后将其传递给函数。

我试过用

```
int array[2][2] = {0} 
```

但只有前 5 个值显示为 0。

对我来说更大的问题是将数组传递给函数。

二维数组是指向指针的指针吗？所以我应该能够将其传递为；

```
function(**array); 
```

它是否正确？

当我尝试在函数中访问这个数组时，我可以使用以下格式访问它吗？

```
void function (int **array){
    array[0][2] = choice
} 
```

因为这不起作用，我假设我必须在某个地方定义数组的大小。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T12:28:07.300

“二维数组是指向指针的指针吗？” - 错误的。二维数组就是这样——一个二维数组；即一维数组的数组。

如果要将 2x2 数组传递给函数，请使用指向 2x2 数组的指针：

```
static void function (int (*array)[2][2]){
    //(*array)[0][2] is out of bounds...
    (*array)[1][0] = 3;
}

int main(void) {
    int array[2][2] = {{0}};
    function(&array);
    return 0;
} 
```

# java - 企业 Java Web 应用程序的最佳方法

> ID：15999028
> 
> 赞同：2
> 
> 时间：2013-04-14T12:23:09.470
> 
> 标签：java, hibernate, jakarta-ee, spring-mvc

我正在使用 Java（Servlet / JSP - MVC 模型）构建会员管理 Web 应用程序，但我对使用的最佳框架有点困惑，以确保 1）稳定性 2）速度和 3）性能

在数据库操作方面，我读过其他开发人员推荐 Hibernate，其他人推荐使用 JDBC，所以我不确定哪个最好？还有比这 2 个更好的东西来帮助我保持性能、速度和稳定性吗？考虑到该应用程序可能在任何特定时间点都有大量用户访问它，并且将维护一个包含超过 150,000 名成员的数据库。

在最佳框架方面，我使用 Servlet / JSP 遵循 MVC 模型，但其他一些开发人员建议使用 Spring MVC，那么这是最好的方法吗？如果是的话，你能根据你的经验解释为什么吗？

对于框架、方法甚至 Eclipse 插件的任何其他建议/建议，以帮助我完成该项目的开发，将不胜感激

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:47:39.653

JDBC 是处理数据库的最低级别，它是最快但不是最简单的方法。涉及很多样板代码。

只要您使用最佳实践并且不要将项目添加到可能包含大量项目的列表中，Hibernate 是更好的方法（请参阅[本文](http://www.javacodegeeks.com/2011/02/hibernate-mapped-collections.html)）。

还有 MyBatis（以前的 iBATIS），看看它[的实际](http://mybatis.github.io/mybatis-3/getting-started.html)应用。

至于 Web 端，如果您使用 Spring，最好坚持使用其 MVC 解决方案。

如果您与经验丰富的网页设计师合作，更好的方法是[Wicket](http://wicket.apache.org/) - 他可以完成设计 HTML/CSS/JS 的工作，您可以在服务器端工作而不必担心 HTML 标签。

# css - 使用 Jekyll 和 Octopress 部署 CSS

> ID：15999029
> 
> 赞同：3
> 
> 时间：2013-04-14T12:23:09.770
> 
> 标签：css, jekyll, octopress

我现在正在建立一个 Octopress 博客，但有一件事我遇到了一些麻烦。

在 _posts 文件夹中添加 Markdown 文件后，我可以在博客上发帖，如下所示：

```
rake generate
rake deploy 
```

它适用于帖子，但是当我在 sass > 自定义文件夹中编辑 CSS 并生成/部署时，编辑不会显示在实时博客上！当我在实时服务器上打开 screen.css 时，一切似乎都很好——我所有的编辑都在那里。但是当我在 Chrome 上的开发人员工具中查看相同的文件时 - 编辑不存在。

这是某种缓存问题吗？

非常感谢任何有关如何解决此问题的提示！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:29:31.470

这当然是一个缓存问题。您需要修改随静态资源发送的 HTTP 标头。那里有很多关于缓存的文档，所以我不会在这里重复。

（警告：无耻的自我推销啊！）

但是，我建议您对静态文件进行版本控制，以便您可以积极地缓存它们，而不必担心确保您使用的是最新版本。我写了[一篇文章，其中包含一些优化和版本资产的 rake 任务](http://www.eriwen.com/performance/make-octopress-fast/)，然后更新我的`head.html`包含中的版本。这就是我的博客所做的。

我也一直想尝试新的[Jekyll Asset Pipeline](https://github.com/matthodan/jekyll-asset-pipeline)，它可能会为你做到这一点。你可以试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:48:48.173

我在 Octopress 上运行了一段时间，并试图剖析它的部分。我相信它可能是源文件夹中的一些配置没有考虑到 sass/custom. 也许在 source/_includes 中。否则尝试在源/样式表/screen.css 中应用这些更改。不幸的是，许多贡献主题的人没有根据官方文档将代码放在正确的自定义文件夹中。但是官方文档也很过时。

# java - （对象）在java中做了什么？

> ID：15999030
> 
> 赞同：2
> 
> 时间：2013-04-14T12:23:10.750
> 
> 标签：java

我在 YouTube 上观看了关于 2D 游戏引擎设计的教程，并且有这样一行：

```
private int[] pixels = ((DataBufferInt) image.getRaster().getDataBuffer()).getData(); 
```

我知道像素应该包含图像颜色的整数列表，但我不明白像素的数据是如何进入图像的，因为在教程中这是唯一使用像素的行。

那么 (DataBufferInt) 是否意味着我将像素连接到图像中 DataBufferInt 类型的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T12:25:41.197

它被称为**铸造**。该对象（具有不同的运行时类型）将被视为新的给定类型。

说，那`image.getRaster().getDataBuffer()`返回一个 type `DataBuffer`。但实际上（运行时类型）它是`DataBufferInt`.

您的`DataBuffer`类型没有`getData()`会返回的方法`int[]`。所以，你需要*告诉编译器*它是一个`DataBufferInt`，所以你可以得到数据为`int[]`。

如果运行时数据类型不同，并且您尝试强制转换，您将获得一个`ClassCastException`.

# python - 何时停止使用 Elixir？

> ID：15999031
> 
> 赞同：0
> 
> 时间：2013-04-14T12:23:16.927
> 
> 标签：python, sqlalchemy, python-elixir

如果你有一个使用 Elixir 的 python 数据库包装器，具有非常简单的“活动记录”设计（1 个对象到 1 个表），但是你开始扩展......

您应该在什么时候停止使用 Elixir？是否有任何常见的里程碑/症状应该表明这些要点？

如果达到了这些点，是否有必要放弃 Elixir 并纯粹转移到 SQLAlchemy，或者总是可以将 Elixir 层留在顶部，并通过 SQLAlchemy*默默地*扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:33:22.753

SQLAlchemy 本身有一个出色的[声明层](http://docs.sqlalchemy.org/en/rel_0_8/orm/extensions/declarative.html)。Elixir 已经被淘汰了一段时间了。结果，Elixir 2 年多没有看到[任何开发](http://elixir.ematia.de/trac/browser)，该项目已被放弃。

放弃 Elixir 的关键是现在。

# css - SCSS 运行良好，但 Codekit 报错“语法错误：找不到要导入的文件或无法读取”

> ID：15999032
> 
> 赞同：3
> 
> 时间：2013-04-14T12:23:21.970
> 
> 标签：css, sass, codekit

# 1 问题：

我在我的项目中使用**sass (scss) + compass 。**

起初，我只是使用**命令行**观看，即“**指南针手表**”，**一切正常**。

昨天，我开始使用*Codekit 自动编译*我所有的文件，使用**完全相同的**style.scss 文件，它出错了。

## 1.1 一些细节：

我使用指南针创建图像精灵，所以在我的 .scss 文件中有两行：

```
@import "contact/*.png";
@include all-contact-sprites; 
```

*联系人*文件夹是我放置所有 .png 图像的地方，它适用于命令行“指南针手表”，完全没有错误，但是当我使用 Codekit 时，它一直出错。

## 1.2 错误图片：

“语法错误：找不到要导入的文件或无法读取” ![在此处输入图像描述](https://i.stack.imgur.com/TdKBo.png)

**PS** 作为一个新手，我知道这是我的问题，我知道这是一个愚蠢的问题，但是经过数小时的搜索，我仍然一无所获，所以我发布了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T15:03:44.107

似乎 CodeKit 正在尝试使用 SASS 进行编译，而`@import "contact/*.png"`这是 Compass 的一个功能。

确保将 CodeKit 指向您所在项目的根目录`config.rb`。请参阅 CodeKit[文档](http://incident57.com/codekit/help.php#help-compass)。

# groovy - Groovy 中的 findResults 方法似乎不适用于字符串数组

> ID：15999035
> 
> 赞同：2
> 
> 时间：2013-04-14T12:23:43.470
> 
> 标签：groovy, arrays, missingmethodexception

我尝试在拆分字符串上调用方法“findResults”，但出现编译错误。拆分字符串返回一个字符串数组，我认为在 Groovy 中会被视为一个集合。其他 Collection 方法确实适用于字符串数组，所以我的问题是：我遇到过错误吗？

```
def names = "john paul pete"
assert names.split().findResults{if (it.startsWith("p")) return it.capitalize()}.join(" ") == "Paul Pete" 
```

结果：groovy.lang.MissingMethodException：没有方法签名：[Ljava.lang.String;.findResults() 适用于参数类型：(gard_split_check$_run_closure2) 值：[gard_split_check$_run_closure2@722b302]

注意我知道我可以通过将上述代码中的 split() 替换为 tokenize() 或将 split() 方法的结果转换为 List 来获得正确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:19:19.803

如 groovydoc 中所述，[`split`](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#split%28%29)将返回一个字符串数组，它没有很多 groovy 增强功能。[`tokenize`](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#tokenize%28%29)返回一个列表而不是一个数组：

```
def names = "john paul pete"
assert names.tokenize().findResults { 
    if (it.startsWith("p")) it.capitalize()
}.join(" ") == "Paul Pete" 
```

# background - ImageIO 总是抛出异常

> ID：15999038
> 
> 赞同：1
> 
> 时间：2013-04-14T12:23:58.853
> 
> 标签：background, ioexception, javax.imageio

```
public class BackgroundPanel extends JPanel {
    File f;
    BackgroundPanel(File file) {
        f = file;
    }

    @Override
    public void paintComponent(Graphics g) {
        Image image;
        try {
            image = ImageIO.read(f);
        }
        catch (IOException e) {
            image = null;
        }
        g.drawImage(image, 0, 0, 850, 1100, this);
    }

} 
```

我希望我遇到的问题不是太具体，无法找到帮助。这总是对特定文件抛出异常。我从我的 windows 文件夹中加载了一个示例 jpg，它加载得很好。但是，我需要使用的 jpg 文件不会加载。我确信我使用的是正确的文件路径，如果我使用 canRead()，它会返回 true。我真的不明白为什么它不会加载。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-24T01:43:50.823

canRead() 没有用。因为 image = ImageIO.read(f); canRead() 将在 read() 函数中调用。如果 canRead() 返回 false，则会抛出 IOException("Can't read input file!"); 如果您不确定文件路径的正确性，则应将示例 jpg 和特定 jpg 放在一起。我认为问题出在您的 jpgs 文件中。ImageIO.read() 不会将它们解码为 jpg。

# javascript - 在 MVC3 视图的脚本中使用 json

> ID：15999041
> 
> 赞同：1
> 
> 时间：2013-04-14T12:24:08.733
> 
> 标签：javascript, json, asp.net-mvc-3, json.net, jqplot

我有以下问题：

首先，我在控制器中有一个方法，它返回带有 Json 格式模型的 PartialView。其次，我需要初始化图形（我使用 jqPlot - 初始化这个用 JavaScript 实现的图形，它需要 Json 格式的数据）。我想从模型中获取数据。

问题：如何从模型中获取数据，然后在 javascript 中使用它们？

模型：

```
public class GraphicDataModel
{
    public List<string> ValuesX { get; set; }
    public List<double> ValuesY { get; set; }
} 
```

控制器：

```
public ActionResult ProcessesInPlanGraphic(int? versionId)
    {
        //...some business logic
        var model = Json(new{ model = GraphicDataModel }, JsonRequestBehavior.AllowGet);
        return PartialView("ColumnBar", model);
    } 
```

看法：

```
@model ??? WHAT SHOULD I GIVE HERE ???

<script type="text/javascript">
    $(document).ready(function () {

       //??? HOW TO GET HERE DATA FROM MODEL ???

        $.jqplot('BarChartForPlan', [ValuesY], {
            seriesDefaults: {
                renderer: $.jqplot.BarRenderer,
                rendererOptions: { fillToZero: true }
            },
            axes: {
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    ticks: ValuesX
                },
                yaxis: {
                    min: 0,
                    pad: 1.05,
                    tickOptions: { formatString: '$%d' }
                }
            }
        });
    });
</script> 
```

如果我使用 Ajax 来初始化所有作品。一个工作示例：

```
public ActionResult FetchGraphData()
{
    return Json(new {valuesX = ValuesX, valuesY = ValuesY}, JsonRequestBehavior.AllowGet);
} 
```

来自 Javascript 的代码：

```
var url = '@Url.Action("FetchGraphData", "Home")';

$.ajax({
    url: url,
    type: 'GET',
    success: function (result) {
        //Call function to initialize graphics
        testJqPlot(result.valuesX, result.valuesY);
    }
}); 
```

我真的需要你的帮助

# javascript - 使用 UTC 时间将时间更正为 GMT 的 Javascript 日期

> ID：15999049
> 
> 赞同：1
> 
> 时间：2013-04-14T12:24:47.080
> 
> 标签：javascript, date, time, countdown

我有一个 javascript 日期，如下所示，即“现在”加上 20 分钟：

```
var end = new Date('04/14/2013 14:00'); 
```

到目前为止，它正在倒计时脚本中使用（交付 ETA）。

然而，这依赖于客户端机器来计算倒计时应该何时完成，这可能不是格林威治标准时间或格林威治标准时间 +1 夏令时。

我在这里查看了 UTC 方法[http://www.w3schools.com/jsref/jsref_utc.asp](http://www.w3schools.com/jsref/jsref_utc.asp)，但坦率地说迷路了。

**所以我的问题是：**

如何调整变量**end**以解决 GMT 与其在客户端机器上的本地设置之间可能存在的时差，以便它可以信任？

注意：“可信”在这里是一个强词，也许“更可能是准确的”可能会更好:) 这需要纯 JS 而不是 jQuery。

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:46:18.520

> 我查看了 UTC 方法，但坦率地说迷路了。

不，使用该[`Date.UTC`功能](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/UTC)很好，而且要走的路。在你的情况下，这将是

```
var end = new Date(Date.UTC(2013, 3, 14, 14, 0)); // notice months are zero-based 
```

当然，您可以直接使用[自纪元以来](http://en.wikipedia.org/wiki/Unix_time)的毫秒数，特别是如果您动态生成日期值：

```
var end = new Date(1365948000000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:34:57.623

这也许不能直接回答这个问题，也许我错过了一些东西，但看起来你还是把问题复杂化了——如果你使用日期作为倒数计时器的一部分，那么你必须始终知道偏移量是多少（倒计时）是在任何特定的时刻。

由于[`Date`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Date)如果您不将任何参数传递给构造函数，总是返回本地时间，为什么不只根据您的偏移量来确定您的*“结束”日期客户端。*例如。

```
var offset = 1000*60*20; // 20 minutes (in milliseconds)
var end = new Date( new Date().getTime() + offset ); 
```

这样您就无需担心当地时区甚至 DST。

# javascript - 如何在点击事件中附加点击事件

> ID：15999055
> 
> 赞同：-2
> 
> 时间：2013-04-14T12:25:09.450
> 
> 标签：javascript

我有一个通过另一个点击事件附加的点击事件。问题是我附加的事件处理程序被触发初始事件的同一次单击触发。

第一个实际上是一个拖动事件，但我猜当拖动的元素在应该获得点击处理程序的元素上释放时，它也会触发新的处理程序。

```
function obj() {
   ...
   this.whatDropped = function(drop) {
      if(drop.type == "textbox") {
         $(document).click(function() {
            //triggered immediately
         });
      }
   }
} 
```

this.whatDropped() 由另一个事件触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:35:14.510

我想这就是你想要的？只需在点击功能中绑定不同的点击功能。

[http://jsfiddle.net/bbrj8/](http://jsfiddle.net/bbrj8/)

```
var firstClick = function() {
    $("#echo").text("first click");
    $("#clickme").bind("click", secondClick);
}
var secondClick = function() {
    $("#echo").text("second click");
    $("#clickme").bind("click", firstClick);
}
$("#clickme").bind("click", firstClick); 
```

# memory-management - 是否可以在 CUDA 设备上定义全局内存阵列？

> ID：15999061
> 
> 赞同：0
> 
> 时间：2013-04-14T12:26:12.213
> 
> 标签：memory-management, cuda

我 tr 分配一个 cuda 全局内存数组。我的求和内核为：

```
__device__ float R_d = 0;
__global__ void perform_summation(float* A, int N){
    int idx = blockDim.x*blockIdx.x+threadIdx.x;
    extern __shared__ float sharedArray [];
    float result[]; //THIS IS THE THING i TRIED TO CREATE
    if(idx < N){
        sharedArray[threadIdx.x] = A[idx];
        //  }else{
        //      sharedArray[threadIdx.x] = 0 ;
        //  }

        for (unsigned int stride = 1; stride < blockDim.x; stride *= 2) {
            __syncthreads();
            if(threadIdx.x % (2*stride) == 0){
                sharedArray[threadIdx.x]+=sharedArray[threadIdx.x+stride];
            }
        }
    }
    if(idx % blockDim.x == 0){
//      R_d += sharedArray[threadIdx.x];
        result[blockIdx.x] = sharedArray[threadIdx.x];
    }
    for (int i = 0; i < gridDim.x; ++i) {
        R_d += result[i];
    }
} 
```

作为总结，y内核采用一个数组并通过map reduce方法找到元素的总和。每个块将相关元素放入共享内存并将其中的所有数据相加，然后将结果放入我尝试创建的全局数组中。最后，我会将全局数组的所有数字相加，以找到最后的答案。

作为第一种方法，我没有使用全局数组来收集每个块的结果，我只是将块的结果汇总到变量中`R_d`，但它不起作用并且只显示来自最后一个块的值作为结果。我想因为我没有同步。块之间最后一个块覆盖最后的所有值。这是我在内核末尾第一次尝试时所做的

```
f(idx < N){
        sharedArray[threadIdx.x] = A[idx];
        //  }else{
        //      sharedArray[threadIdx.x] = 0 ;
        //  }

        for (unsigned int stride = 1; stride < blockDim.x; stride *= 2) {
            __syncthreads();
            if(threadIdx.x % (2*stride) == 0){
                sharedArray[threadIdx.x]+=sharedArray[threadIdx.x+stride];
            }
        }

        if(threadIdx.x == 0){
            R_d += sharedArray[threadIdx.x];
        }
    } 
```

所以我实际上有两个问题。如何为我提出的第一个解决方案在设备内存中定义一个全局内存数组，对于仅使用该`R_d`变量的第二个解决方案是否有任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:55:42.157

[您可以通过cudaMalloc](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDART__MEMORY_gc63ffd93e344b939d6399199d8b12fef.html)在全局设备内存中分配数组：

```
cudaMalloc((void **)&ptr, size); 
```

但是您不想在内核内部执行此操作，而是在调用内核并将指针传递给内核之前执行此操作。

至于减少，看看[这些 nVidia 幻灯片](http://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/projects/reduction/doc/reduction.pdf)，它解释得很好。基本上，这取决于您使用了多少块和线程。可以说有几个块。所以在共享内存中定义一个数组：

```
__shared__ float cache[BLOCK_THREADS]; 
```

为每个块分配共享内存，因此我们将每个块中的值与`cache`.

```
__syncthreads();

int step = (BLOCK_THREADS >> 1); //the same result as BLOCK_THREADS/2
while(step > 0) {
    if (threadInBlock < step) {
        cache[threadInBlock] += cache[threadInBlock + step];
    }
    __syncthreads();
    step = (step >> 1);
} 
```

因此，这将每个块中的所有元素相加到`cache[0]`. 现在我们可以再次使用归约，或者我们可以使用原子操作将每个块的所有总和相加。如果每个块的块数明显少于线程数，这将是可以的。

```
__syncthreads();
if (threadInBlock == 0) {
    atomicAdd(result, cache[0]);
} 
```

请注意，它`result`是指向全局内存中单个值的指针。另请注意，这仅`BLOCK_THREADS`在 2 的幂时才有效 - 这很常见，因为每个块的线程数应该是 32 的倍数（与扭曲对齐）。

# java - 制作 Android IME 时未收到 BIND_INPUT_METHOD

> ID：15999062
> 
> 赞同：3
> 
> 时间：2013-04-14T12:26:33.833
> 
> 标签：java, android, eclipse, adt, ime

我在使用适用于 Android 操作系统的 IME 时遇到问题。我正在尝试获得 BIND_INPUT_METHOD 权限，但它一直说这只是系统应用程序 =\ 一个开源示例（DotDashKeyboard）没有问题地收到它，所以这很奇怪。这是我的.manifest：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.neothefox.romashka"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.BIND_INPUT_METHOD" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <service 
        android:name="RomashkaIME"
            android:label="RomashkaIME"
            android:permission="android.permission.BIND_INPUT_METHOD" >

            <intent-filter>
                    <action android:name="android.view.InputMethod" />
            </intent-filter>

            <meta-data
                android:name="android.view.im"
                android:resource="@xml/method" />
    </service>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:12:17.477

所以我明白了——我应该在服务声明中请求这个许可。现在一切都启动并运行，但我仍然无法弄清楚另一个键盘是如何工作的。身份不再重要，你。

# asp.net-mvc - Razor MVC 服务器端自定义验证 C#

> ID：15999063
> 
> 赞同：0
> 
> 时间：2013-04-14T12:26:46.530
> 
> 标签：asp.net-mvc, validation, razor

我有一个简单的问题，我的表中有两个字段，我需要在存储之前检查它们是否存在于数据库中。 **在我的模型中**

```
[Required]
[Display(Name = "Contract Type")]
public int tb_contract_type_id { get; set; } //This is drop-down box

[Required]
[Display(Name = "Domain Name")]
public string domain_name { get; set; } //this is text-box 
```

这两个属性我需要在数据库中检查它们是否存在，如果它们不存在，那么我们只需要允许用户添加数据，否则不会。

**我已经为下面的一个字段做了这个，现在我想检查两个字段，比如 db.contracts.Any(c => c.domain_name == URL && tb_contract_type_id == id)**

**从模型**

```
 [CheckForDomain]
    [Required]
    [Display(Name = "Domain Name")]
    public string domain_name { get; set; }
...
public class CheckForDomain : ValidationAttribute
    {
        private DataContext db = new DataContext();
        protected override ValidationResult IsValid
          (object value, ValidationContext validationContext)
        {
            var URL = value.ToString();
            if (db.contracts.Any(c => c.domain_name == URL ))
            {
                return new ValidationResult("Domain Name already Exist!!");
            }
            else
            {
                return ValidationResult.Success;
            }
        }
    } 
```

有什么好方法可以使用自定义验证来检查吗？我正在使用实体框架请建议..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:55:21.360

通过属性验证应该保持当前对象处于有效状态而不是整个域/业务逻辑，并且检查字段是否具有唯一值是业务规则而不是“对象规则”。（实例化这样的上下文也是一种不好的做法，无论它是在属性中还是在另一个日常类中。）

# iphone - 如何为可拉伸的 UIImage 着色

> ID：15999067
> 
> 赞同：0
> 
> 时间：2013-04-14T12:27:06.367
> 
> 标签：iphone, ios, objective-c, ipad, uikit

我想为可拉伸的 UIImage 着色，但无法使其工作。在这篇文章的帮助下：[如何更改 UIImage 的颜色](https://stackoverflow.com/questions/10755576/how-to-change-the-color-of-an-uiimage)我已经成功地为我的 UIImage 着色，但是当我使它可拉伸时，颜色没有设置在“新”框架上。

这是我使用类别设置颜色的方法：

```
+ (UIImage *)imageNamed:(NSString *)name withColor:(UIColor *)color
{
    UIImage *image = [UIImage imageNamed:name];
    if (color == nil)
        return image;
    CGRect rect = CGRectMake(0.f, 0.f, image.size.width, image.size.height);
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextClipToMask(context, rect, image.CGImage);
    CGContextSetFillColorWithColor(context, [color CGColor]);
    CGContextFillRect(context, rect);
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return [UIImage imageWithCGImage:img.CGImage
                               scale:1.0
                         orientation:UIImageOrientationDownMirrored];
} 
```

任何建议表示赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:57:01.370

此代码应该可以工作：

```
+ (UIImage *)imageNamed:(NSString *)name withColor:(UIColor *)theColor
{
    UIImage *baseImage = [UIImage imageNamed:name];
    UIGraphicsBeginImageContext(baseImage.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGRect area = CGRectMake(0, 0, baseImage.size.width, baseImage.size.height);
    CGContextScaleCTM(ctx, 1, -1);
    CGContextTranslateCTM(ctx, 0, -area.size.height);
    CGContextSaveGState(ctx);
    CGContextClipToMask(ctx, area, baseImage.CGImage);
    [theColor set];
    CGContextFillRect(ctx, area);
    CGContextRestoreGState(ctx);
    CGContextSetBlendMode(ctx, kCGBlendModeMultiply);
    CGContextDrawImage(ctx, area, baseImage.CGImage);
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:58:05.230

你的包中有一张图片，你用上面的方法给它上色，它不会修改原始图像，但会返回一个新图像。这个新图像是普通图像，这意味着您看到的颜色是图像中的实际位。如果您现在从新创建的图像而不是原始图像创建新的可拉伸图像，它应该是正确的颜色。

如果不创建一个小型演示项目并将其发布在 DropBox 上，让我们看看它。

# c# - 在 C# 中为大型 MVP 项目实现 IDisposable

> ID：15999070
> 
> 赞同：0
> 
> 时间：2013-04-14T12:27:14.663
> 
> 标签：c#, memory-leaks, dispose

我有一个存在内存泄漏的 MVP 项目（它不是一个 Web 项目）。每次将数据从数据库加载到表单上的网格时，内存都会增加。我尝试使用 ANTS 和 .NET 内存分析器调查连接到该表单的每个对象。

打开/关闭表单时连接到表单的对象在 Instance Retention Graph 上如下所示：

> A -> B : object1 标记在 ->; （参考资料） B -> A : object2 上的标记 ->; （引用）其中 A，B 是类

下一个方向是正确的方法吗？1\. 在基类中实现来自[msdn.com](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)`IDisposable`的pattern1在每个未实现的 .cs 模块中；

1.  在派生类中从 msdn 实现 pattern2（覆盖`Dispose`方法的类）
2.  将一些清除对象/其他引用（object.property，object.other_field）的函数放在`Dispose`方法的“托管资源”部分中

3.  当对象不再在该 .cs 中使用时，强制对象为 null 或 object.Dispose() （对每个 .cs 执行此操作？还是有其他方法）

我怎样才能强制所有这些方法和 GC 执行让我们明确地说在表单关闭时？

如果我从特定的 .cs 中删除对象就足够了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:20:01.163

`IDisposable`与垃圾收集或内存管理无关，或者至少不是*直接*的。MS对此有何评论：

*该接口的主要用途是释放**非托管**资源。当不再使用该对象时，垃圾收集器会自动释放分配给托管对象的内存。*

如果您的对象不包含非托管资源，则不应实现`IDisposable`，否则会给其他编码人员留下这样的印象。

如果要释放托管资源，只需断开主程序引用树与资源之间的链接即可。在这种情况下，如果您不再需要该表单，则释放它可能是一个非常简单的点。

```
MyForm = null; 
```

或者，如果您只想释放表单内的资源，您可以在表单内的回调中破坏它们的引用。

```
protected void OnFormClose(object sender, EventArgs e)
{
    MyVeryFatObjectList = new List<object>();
} 
```

如果由于某种原因您想显式调用垃圾收集器：

```
System.GC.Collect(); 
```

但是，请注意，不建议这样做。如果您正确地完成工作，GC 通常足够智能以正确地完成其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T02:43:50.987

从您的 A 引用 B、B 引用 A 上面的语句判断，我猜您有一个循环对象引用，它阻止垃圾收集清理您的引用。

垃圾收集会不时运行并清理不再引用的对象使用的内存。如果两个对象相互引用，那么它们将不会被清理。

您可以删除引用，只需购买将其值更改为 null。

发生这种事情的另一种方式，尤其是在 winforms 应用程序中，是通过事件处理程序，所以一旦你完成了它们，就解开你添加的任何事件处理程序。

实现 IDisposable 接口为您提供了一个很好的方法，您可以在其中放置所有清理代码并通知您的类的用户需要清理。您仍然需要确保直接或通过 using 语句调用 dispose 方法。

此外，如果您想以一种松散的方式保存对对象的引用，并且不会阻止它被垃圾收集，您可以使用[Wea​​kReference](http://msdn.microsoft.com/en-us/library/system.weakreference.aspx)，但大多数时候都不需要这样做。

# java - 从抽象类实现非抽象类

> ID：15999071
> 
> 赞同：0
> 
> 时间：2013-04-14T12:27:17.240
> 
> 标签：java

一个名为 Patient 的类包含 2 个抽象方法，即 getPatientdetails() 和 printPatientDetails。两种方法都不应返回任何内容。称为 OutPatient 的类是患者的子类，但不是抽象的。患者的详细信息包括 PatientName(string) 和 DiseaseName(String)。在门诊，我们还记录了 DateofVisit(String) 和收费金额 (Float)。另一个类 AdmittedPatient 也是患者类的子类，不是抽象的。在 admissionPatient 上，我们还记录了 wardName(string) 和 Bed Number(Int)。

挑战在于三个类，并确保这些值都是在运行时从用户那里捕获的。

什么是 sudo 代码，然后是运行这样的应用程序的解释和 java 代码？

# java - Java 解析字符串到日期

> ID：15999073
> 
> 赞同：2
> 
> 时间：2013-04-14T12:27:26.283
> 
> 标签：java, date

我正在尝试将字符串解析为 Java 中的日期对象。
我的字符串是：`String date = 2013-04-13 21:00:00;` 代码是：

```
 String myFormatString = "yyyy-mm-dd hh:mm:ss";
    Date date1 = new SimpleDateFormat(myFormatString, Locale.ENGLISH).parse(date);
    System.out.println(date1); 
```

我期望输出是：`Sun Apr 13 21:00:00 GMT+00:00 2013`
但我得到的是：`Sun Jan 13 21:00:00 GMT+00:00 2013`

你能看出为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T12:29:26.470

月份用“M”表示，“m”代表分钟。

```
String myFormatString = "yyyy-MM-dd hh:mm:ss"; 
```

详细信息在[此页面上](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html)。

# environment-variables - 在 Sublime Text 设置文件中使用 Windows 环境变量

> ID：15999075
> 
> 赞同：6
> 
> 时间：2013-04-14T12:28:19.457
> 
> 标签：environment-variables, sublimetext2, sublimetext

我需要从 Sublime Text 2 设置文件（Package-Name.sublime-settings 文件）中引用 Windows 环境变量，特别`%APPDATA%`是`%TMP%`

这可能吗？如果可以，怎么做？

例如，这是一个包设置中的一行，它需要在多个用户上工作，因此使用不同的用户名：

```
"backup_dir": "C:\\Users\\Username\\AppData\\Local\\Temp\\SublimeBackup" 
```

例如，这是我刚刚遇到的一个问题：我安装了从多台计算机运行的 Sublime Text 2（即我复制它的数据以使设置等在多次安装之间保持最新），但我有以下内容命令：

```
{ "caption": "Backup to Server (Local to Server)", "command": "exec", "args": { "cmd": ["local-to-server.cmd"] } }, 
```

不幸的是，文件“local-to-server.cmd”相对于当前在 Sublime Edit 中打开的文件，所以这个命令很少起作用。我需要的是：

```
{ "caption": "Backup to Server (Local to Server)", "command": "exec", "args": { "cmd": ["%APPDATA%\Sublime Text 2\Packages\User\local-to-server.cmd"] } }, 
```

或者一些类似的引用公共位置的方法，然后我可以从中构建相对路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T22:27:30.947

感谢@schlamar 对设置的更正。我没有意识到他们在整个会议期间都坚持了下来。我所有的插件都在本地使用它们，我没有对它们进行任何修改，但很高兴知道。这是一个在 ST 加载时扩展变量的插件。应该在 ST2 和 ST3 中工作。

```
import os
import sublime

VERSION = int(sublime.version())

def expand_settings():
    expand_settings = {
        "<setting file names>": [
            "<setting keys to expand>"
        ]
    }
    for filename, setting_keys in expand_settings.items():
        s = sublime.load_settings(filename)
        for key in setting_keys:
            value = s.get(key)
            s.set(key, os.path.expandvars(value))

def plugin_loaded():
    expand_settings()

if VERSION < 3006:
    expand_settings() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T13:55:57.307

@skuroda 在他的评论中是错误的。设置更改在插件和多个`load_settings`调用中是持久的。简单的测试用例：

```
s = sublime.load_settings('Preferences.sublime-settings')
s.set('test', 'x')
s = sublime.load_settings('Preferences.sublime-settings')
print (s.get('test'))  # prints x 
```

如果将其拆分为两个插件，它仍然会打印 x （假设设置插件在打印插件之前运行）。

因此，您可以加载和重写一些路径，`os.path.expandvars`这些路径将在当前会话中保持不变。

# internet-explorer - 如何使用 wicket 6（不使用 javascript）在 iframe 中加载外部 URL？

> ID：15999083
> 
> 赞同：2
> 
> 时间：2013-04-14T12:29:20.407
> 
> 标签：internet-explorer, web-applications, iframe, wicket, wicket-1.6

我想在我自己的网站的 iframe 中加载网站。

我正在使用 wicket 6。这是我迄今为止尝试过的：

```
 RedirectPage page = new RedirectPage ( link );
    InlineFrame frame = new InlineFrame ("myFrame", page );
    add (frame); 
```

适用于除 Internet Explorer 之外的所有浏览器。还有其他更好的加载网站的方法吗？顺便说一句，它可能会解决我的资源管理器问题，我猜这与 URL 的参数编码有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:24:21.947

我终于找到了问题所在：似乎 IE 不允许 iframe 的 URL 中的参数，这就是我的错误的原因：当它把 '&' 转换为 '& amp;' 时 另一个是在“&”设置正确后尝试加载不带参数的页面。我没有更进一步。可能有一些解决方法，但似乎不太容易。

# node.js - 100 个并发请求的 %CPU 达到 70%

> ID：15999087
> 
> 赞同：1
> 
> 时间：2013-04-14T12:29:32.773
> 
> 标签：node.js

当我们尝试运行`ab -n 1000 -c 100 http:// 127.0.0.1:3000/`%cpu 时几乎达到 70%。这是节点的默认性质还是我们需要修改任何设置以减少 CPU 使用率？

请求的响应只是一个“Hello world”，我们的机器有**2GB RAM**，并且节点正在使用当前版本运行。

我听说 nodejs 可以处理超过**100K 的并发请求**，但我不明白他们是如何实现的。

# dart - 带有 Web 组件的 Dart 库布局

> ID：15999088
> 
> 赞同：1
> 
> 时间：2013-04-14T12:29:33.823
> 
> 标签：dart, dart-webui

我的程序运行良好，直到有必要构建一个使用自定义 Web 组件的库。我不明白 Dart 在抱怨什么。它给出了一个警告，说它“无法解析 my_library”，这会导致错误“没有这种类型的 WebComponent”。我的尝试基于[此](https://stackoverflow.com/a/12955634/1298196)。这是我的代码：

myapp.dart：

```
library my_library;

import 'dart:html';
import 'package:web_ui/web_ui.dart';

part 'fancyoption.dart';

void main() {
  // Enable this to use Shadow DOM in the browser.
  //useShadowDom = true;
} 
```

myapp.html：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Sample app</title>
    <link rel="stylesheet" href="myapp.css">
    <link rel="components" href="fancyoption.html">
  </head>
  <body>
    <h3>Type a color name into a fancy option textbox, push the button and 
    see what happens!</h3>

    <div is="x-fancy-option" id="fancy-option1"></div>
    <div is="x-fancy-option" id="fancy-option2"></div>
    <div is="x-fancy-option" id="fancy-option3"></div>

    <script type="application/dart" src="myapp.dart"></script>
    <script src="packages/browser/dart.js"></script>
  </body>
</html> 
```

fancyoption.dart（在同一个 web/out 目录中）：

```
part of my_library;

class FancyOptionComponent extends WebComponent {
  ButtonElement _button;
  TextInputElement _textInput;

  FancyOptionComponent() {
  }

  void inserted() {
    _button = this._root.query('.fancy-option-button');
    _textInput = this._root.query('.fancy-option-text');

    // make the background color of this web component the specified color
    final changeColorFunc = (e) => this.style.backgroundColor = _textInput.value;
    _button.onClick.listen(changeColorFunc);
  }
} 
```

花式选项.html：

```
<!DOCTYPE html>

<html>
  <body>
    <element name="x-fancy-option" constructor="FancyOptionComponent" extends="div">
      <template>
        <div>
          <button class='fancy-option-button'>Click me!</button>
          <input class='fancy-option-text' type='text'>
        </div>
      </template>
      <script type="application/dart" src="fancyoption.dart"></script>
    </element>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T09:47:12.883

正确答案发布在评论中 - 为了未来读者的利益，将 Chris Buckett 的回复重新发布为答案。

“Web 组件是一个独立的、可重用的组件，因此 fancyoption.dart 不应该是主应用程序的一部分。”

# c - 如何优化 FPU 例程

> ID：15999089
> 
> 赞同：0
> 
> 时间：2013-04-14T12:29:39.880
> 
> 标签：c, optimization, assembly, x86, fpu

我有一些 c 例程

```
 int n_mandelbrot(double c_im, double c_re, int N_ITER)
    {
      static  double re, im, re2, im2;
      static  int n;

      im2=im=0;
      re2=re=0;

     for(n=0; n<N_ITER; n++)
     {
        im =  (re+re)*im    + c_im;
        re =   re2 - im2    + c_re;
        im2=im*im;
        re2=re*re;
        if ( re2 + im2 > 4.0 ) break;
     }

     return n;
   } 
```

想将它重写为程序集，我设法写了

```
 n_mandelbrot_fpu_double: ;; (double cre, double cim, int N_ITER)

   mov   edx, dword [esp+20]  ;; N_ITER
   mov   ecx, 0

   fld        qword [esp+4+0]  ;; cre
   fld        qword [esp+12+0] ;; cim

   fld1
   fadd st0, st0
   fadd st0, st0         ;; 4.0

   fldz              ;; re = 0
   fldz              ;; im  = 0
   fldz              ;; re2 = 0
   fldz              ;; im2 = 0

   mlloopp:

   ;; here
   ;;            im =  (re+re)*im    + c_im;
   ;;            re =   re2 - im2    + c_re;
   ;;            im2=im*im;
   ;;            re2=re*re;
   ;;            if ( re2 + im2 > 4.0 ) break;

   ;; STACK:  cre cim 4.0 re im re2 im2

   fld st3
   fadd st0, st0
   fmul st3
   fadd st6
   fxch st3
   fstp st0

   fld  st1
   fsub st1
   fadd st7
   fxch st4
   fstp st0

   fld st2
   fmul st0, st0
   fxch st1
   fstp st0

   fld st3
   fmul st0, st0
   fxch st2
   fstp st0

   fld    st0
   fadd   st2
   fcomp  st5
   fnstsw ax
   sahf
   ja    mloopout

   inc    ecx
   cmp    ecx,edx
  jb     mlloopp

  mloopout:

  fstp st0
  fstp st0
  fstp st0
  fstp st0
  fstp st0
  fstp st0
  fstp st0

  mov eax, ecx

  ret 
```

c 例程使我的程序循环运行 150 毫秒，然后它下降到 105 毫秒，所以这更快（尽管在内部循环中计算两个像素的展开的 c 例程只需要 115，我不知道为什么以及如何展开它在 asm 中）

我认为这个 asm 代码效率不高，我尝试将所有变量加载到 fpu 堆栈上（在循环之前，我将 7 个 double 加载到它：cre cim 4.0 re im re2 im2 然后有一个将它加载到堆栈顶部的 tol 交换并用 fstp 弹出，所以我认为它可能效率不高

有人可以帮助改进吗（内部循环之外的值并不重要，但内部循环中的代码在这里很重要

# ios - 将运动应用于 3d 立方体 - GLKit

> ID：15999096
> 
> 赞同：1
> 
> 时间：2013-04-14T12:30:48.557
> 
> 标签：ios, glkit

我正在编写一个可以使用 GLKit 在触摸时旋转的 3d 立方体。如何使用触摸方向和速度操纵 3d 立方体旋转？

我想将方向和速度应用于立方体，以便它在被滑动后继续旋转。

究竟如何使用转换来做到这一点？

我目前在`GLKitViewController delegate`更新方法中转换矩阵并应用它

```
GLKMatrix4 viewMatrix = GLKMatrix4MakeTranslation(0.0f, 0.0f, -6.0f);   
GLKMatrix4 rotation = GLKMatrix4MakeWithQuaternion(_quat);
viewMatrix = GLKMatrix4Multiply(viewMatrix, rotation);
self.effect.transform.viewMatrix = viewMatrix; 
```

触摸结束后如何将此变换应用于立方体？

# html - 两个块级元素；为什么我需要在两者上浮动以将它们并排放置？

> ID：15999103
> 
> 赞同：1
> 
> 时间：2013-04-14T12:31:51.477
> 
> 标签：html, css

这是一个关于浮动的非常基本的问题，但我无法通过搜索引擎找到答案。

当我有两个块级元素（例如 div）并且我需要它们彼此相邻时，为什么给它们中的第一个元素 float:left -property 是不够的？为什么我需要浮动两个 div 以将第二个放在第一个旁边而不是在它下面？

这是一个代码示例：

## HTML

```
<div id="box_wrap">
    <div id="box1">
        <h2>Box1 text</h2>
        <p>Lorem Ipsum</p>
    </div>
    <div id="box2">
        <h2>Box2 text</h2>
        <p>Lorem Ipsum</p>
        <p>Text</p>
    </div>

</div> 
```

## CSS

```
#box1 {
    background-color: blue;
    width: 30%;
    float: left;
}

#box2 {
    background-color: red;
    width: 30%;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:54:06.980

浮点数从正常的文档流中移除，并且浮动在 的内容的左侧`#box2`，而不是 div 本身。本质上没有足够的空间。如果您给出`#box2`60% 的宽度，您可以看到这一点。

您可以通过为第二个框提供自己的块格式上下文来更改此行为。这样做的一个属性是设置`overflow: hidden`

```
#box2 {
    background-color: red;
    width: 30%;
    overflow: hidden;
} 
```

演示在[http://jsfiddle.net/7tmmk/2/](http://jsfiddle.net/7tmmk/2/)

有关为元素提供自己的块格式上下文的其他方式，请参见：[https ://developer.mozilla.org/en-US/docs/CSS/Block_formatting_context](https://developer.mozilla.org/en-US/docs/CSS/Block_formatting_context)

有关此内容和其他内容的更多信息`overflow: hidden`，请查看[http://colinaarts.com/articles/the-magic-of-overflow-hidden/#making-room-for-floats](http://colinaarts.com/articles/the-magic-of-overflow-hidden/#making-room-for-floats)

# rational-team-concert - 如何登录爵士队服务器？

> ID：15999104
> 
> 赞同：1
> 
> 时间：2013-04-14T12:32:01.063
> 
> 标签：rational-team-concert

我已经`RTC-Web-Installer-win-4.0`使用 IBM 安装管理器安装了 jazz 团队服务器，然后我启动服务器并尝试使用 RTC Visual Studio 客户端创建新的 jazz 存储库连接，使用 localhost 的 URI 和端口 9332，ID：“ADMIN”，密码“ADMIN”然后我收到了这个错误：

```
CRRTC8521E: Failed to contact the repository 'ADMIN@localhost' 
```

注意：我使用的是 Windows 7。

[从 jazz.net](https://jazz.net/forum/questions/109596/cant-log-on-to-jazz-team-server)，调用堆栈：

```
 Apr 14, 2013 11:21:30 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: 
C:\Users\Mai\Desktop\RTC4\server\jre\bin\compressedrefs;C:\Users\Mai\Desktop\RTC4\server\jre\bin;C:\windows\system32;C:\windows;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x64;C:\Program Files (x86)\Toshiba\Bluetooth Toshiba Stack\sys\;C:\Program Files (x86)\Toshiba\Bluetooth Toshiba Stack\sys\x64\;C:\Program Files\doxygen\bin;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\CVSNT\;.
Apr 14, 2013 11:21:33 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-9080"]
Apr 14, 2013 11:21:33 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-9443"]
Apr 14, 2013 11:21:34 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-9009"]
Apr 14, 2013 11:21:34 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 4724 ms
Apr 14, 2013 11:21:34 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Apr 14, 2013 11:21:34 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.25
Apr 14, 2013 11:21:34 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive C:\Users\Mai\Desktop\RTC4\server\tomcat\webapps\admin.war
Apr 14, 2013 11:21:41 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive C:\Users\Mai\Desktop\RTC4\server\tomcat\webapps\ccm.war
Apr 14, 2013 11:22:13 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive C:\Users\Mai\Desktop\RTC4\server\tomcat\webapps\clmhelp.war
Apr 14, 2013 11:22:36 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive C:\Users\Mai\Desktop\RTC4\server\tomcat\webapps\converter.war
Apr 14, 2013 11:22:46 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive C:\Users\Mai\Desktop\RTC4\server\tomcat\webapps\jts.war
Apr 14, 2013 11:22:59 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive C:\Users\Mai\Desktop\RTC4\server\tomcat\webapps\qm.war
Apr 14, 2013 11:23:20 AM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive C:\Users\Mai\Desktop\RTC4\server\tomcat\webapps\rm.war
log4j:ERROR Could not find value for key log4j.appender.perfCounters.layout
Apr 14, 2013 11:23:31 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Users\Mai\Desktop\RTC4\server\tomcat\webapps\ROOT
Apr 14, 2013 11:23:31 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-9080"]
Apr 14, 2013 11:23:31 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-9443"]
Apr 14, 2013 11:23:31 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-9009"]

Apr 14, 2013 11:23:31 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 116808 ms 
```

-我尝试使用 URI /jazz/ 或 URI/ccm/ ping 服务器

但 ping 请求找不到告诉我检查名称并重试的 URI

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:08:33.150

@all：非常感谢您的帮助，

我终于可以使用以下解决方案从 Visual Studio 客户端创建新的存储库：

*   在管理员模式下安装新的服务器和客户端，服务器使用 c:/RCLM4-SERVER，客户端使用 c:/RCLM4-CLIENT，客户端共享文件使用 c:/RCLM-SHARED。

*   启动服务器后，根据[https://jazz.net/help-dev/clm/index.jsp?re=1&topic=/com.ibm.jazz.install.doc/topics/t_s_server_installation_setup_wizard.html&scope=null](https://jazz.net/help-dev/clm/index.jsp?re=1&topic=/com.ibm.jazz.install.doc/topics/t_s_server_installation_setup_wizard.html&scope=null)使用 URI 配置它：`https://localhost:9443/jts/setup`，用户名和密码是管理员，而设置我将这些用户名和密码更改为新的。

*   使用以前的 Web 客户端创建新项目。

*   使用 uri 从 vs 客户端创建新存储库：`https://localhost:9443/ccm`，在服务器设置期间使用名称 localhost 、新 ID 和 PW，**这是使用正确端口 9443 和正确模式 ccm 以及来自 vs 客户端的正确名称的线索**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:04:46.957

错误

```
log4j:ERROR Could not find value for key log4j.appender.perfCounters.layout 
```

包含在工作[项 60463 中](https://jazz.net/jazz03/web/projects/Requirements%20Management#action=com.ibm.team.workitem.viewWorkItem&id=60463)（您需要一个 -- 免费 -- jazz 帐户才能看到它）

> 我检查了我们发布的最新 log4.properties。它具有以下条目：

```
# Sometimes Log4j complains, so lets substitute the PatternLayout for right now
log4j.appender.perfCounters.layout=org.apache.log4j.SimpleLayout 
```

但是，它没有被描述为阻塞错误，这意味着您的实例可能由于其他原因而无法工作。

确保[启用 JTS ADMIN 访问](http://www-01.ibm.com/support/docview.wss?uid=swg21314276)。

并仔细检查[JTS 在 Apache (Tomcat) 服务器中的部署和启动](http://pic.dhe.ibm.com/infocenter/clmhelp/v4r0/index.jsp?topic=/com.ibm.jazz.install.doc/topics/c_deploying_tomcat.html)。

* * *

如[jazz.net](https://jazz.net/forum/questions/109596/cant-log-on-to-jazz-team-server?page=1&focusedAnswerId=109604#109604)中所述，使用的正确地址是：

*   `https://localhost:9443/jts/setup`
    或者
*   `https://localhost:9443/jts/admin`
    或者
*   `https://localhost:9443/ccm/admin`

前提是您以管理员身份进行了安装。

> 当您安装 RTC 服务器时，它通常包含两个应用程序，CCM 和 JTS（尽管从上面粘贴的 tomcat 控制台输出中，我看到您安装了所有 CLM 产品，其中包括 JTS、CCM、QM 和 RM ）。
> 安装后，您应该访问`https://localhost:9443/jts/setup`设置JTS，注册CCM，并设置CCM。您的登录名将是`ADMIN/ADMIN`.
> 
> 完成设置后，您可以将 RTC 客户端连接到 CCM。
> 您将用于连接的 URL 是**`https://localhost:9443/ccm`**。
> 请注意，您可能`ADMIN`在安装过​​程中禁用了用户。如果是这样，您必须为您在设置期间创建的用户提供用户名和密码。
> 
> 你上面的问题是你是：
> 
> *   使用**错误的端口**( `https://localhost:9332/ccm`)
> *   或**使用错误的上下文根**( `https://localhost:9443/jazz`)
> *   或者您添加了不应该存在的额外内容（`https://localhost:9443/ccm/admin`）。

* * *

OP报告已经能够完成安装：

> 我终于可以使用以下解决方案从 Visual Studio 客户端创建新的存储库：
> 
> *   **以管理员模式**安装新的服务器和客户端。
> *   启动服务器后，根据“[在设置向导中使用自定义设置运行设置](https://jazz.net/help-dev/clm/index.jsp?re=1&topic=/com.ibm.jazz.install.doc/topics/t_s_server_installation_setup_wizard.html&scope=null)”使用 URI : **`https://localhost:9443/jts/setup`**、用户名和密码`ADMIN`进行配置（在设置过程中，我将这些用户名和密码更改为新的）。
> *   使用以前的 Web 客户端创建新项目。
> *   使用 uri: 从 vs 客户端创建新存储库，**`https://localhost:9443/ccm`**在服务器设置期间使用新 ID 和 PW。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T14:46:11.577

我认为可能有两个问题，第一个是您的 URL 不正确，第二个是您尚未完成所有设置，因为某些最终设置必须使用 Web 客户端上的管理员帐户完成。

> 使用带有端口 9332 的 localhost 的 URI，ID：“ADMIN”，密码“ADMIN”然后我收到了这个错误

这与 RTC 服务器提供的信息形成对比：

```
Apr 14, 2013 11:23:31 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-9080"]
Apr 14, 2013 11:23:31 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-9443"]
Apr 14, 2013 11:23:31 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-9009"] 
```

根据该信息，Rational Team Concert 监听的端口是 9080、9443 和 9009。管理员访问的默认 URL 应该是`https://localhost:9443/jts/admin`. 您需要首先通过 Web 浏览器访问该 URL，因为您需要进行一些最终设置，例如创建一个新项目。

创建新项目后，您可以使用非管理员帐户邀请自己加入项目。您将收到一个邀请，这将允许 Visual Studio RTC 客户端更轻松地连接到 RTC 存储库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-26T15:59:47.797

所有，我在本地安装 Jazz 后遇到了同样的问题。我第一次使用 Admin>Admin 登录。如果我仔细阅读，我会看到点击[https://localhost:port/jts/setup](https://localhost:port/jts/setup)时的默认登录名是大写的 ADMIN>ADMIN。

这里的说明[https://jazz.net/help-dev/clm/index.jsp?re=1&topic=/com.ibm.jazz.install.doc/topics/t_s_server_installation_setup_wizard.html&scope=null](https://jazz.net/help-dev/clm/index.jsp?re=1&topic=/com.ibm.jazz.install.doc/topics/t_s_server_installation_setup_wizard.html&scope=null)确实这么说。仔细阅读！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-23T14:50:35.783

@VonC：根据邮箱配置设置，这里有jazz中提到的问答：

> [使用https://jazz.net/help-dev/clm/index.jsp?re=1&topic=/com.ibm.jazz.install.doc/topics/t_s_server_installation_setup_wizard.html&scope=null](https://jazz.net/help-dev/clm/index.jsp?re=1&topic=/com.ibm.jazz.install.doc/topics/t_s_server_installation_setup_wizard.html&scope=null)设置电子邮件配置 以启用邮件时邀请，我需要设置一些值，这些值是否正确？SMTP 服务器名称 (smtp.localhost.com)
> 
> SMTP 用户名（与 jazz 服务器 ID 相同）
> 
> 来自地址的电子邮件 (name@localhost.com)
> 
> 当我使用这些值然后测试连接时，它给了我：异常读取响应；嵌套异常：java.net.socketTimeoutException：读取超时，有什么想法吗？！

解决方案是使用正确的服务器名称（127.0.0.1 或 localhost）或在 c:/windows/system32/drivers/etc 的主机文件中添加提到的服务器名称。它现在使用 localhost 或 127.0.0.1 与我一起工作，但它也显示在电子邮件设置页面上测试成功，我发现错误 505:invalid 并通过禁用 norton 中的电子邮件扫描功能解决了这个问题，但在 norton ..i rxed 的两种情况下垃圾邮件中的邮件。注意：我将发件人地址更改为我的电子邮件，并且没有使用任何用户名或密码，因为我的 smtp 服务器不需要身份验证即可工作（使用 jazz 服务器的用户名和密码被误解了）

# javascript - 如何通过Javascript动态剪切图片

> ID：15999107
> 
> 赞同：0
> 
> 时间：2013-04-14T12:32:23.150
> 
> 标签：javascript, http, dojo

![在此处输入图像描述](https://i.stack.imgur.com/S02fG.png)

我有一张这样的图标图片，我知道这张图片可以帮助节省 http 链接的时间。但是，我不知道如何使用它。

1.  我想我需要通过坐标来获取小图标。有没有图书馆可以做到这一点？查询？道场？
2.  我怎样才能得到这张照片？我只知道我可以使用 a 或与 CSS 显示图片，但我认为我需要通过另一种方式获取这张图片。Javascript 库也可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:37:48.767

实际使用非常简单。让我们`ui_element`为按钮上课。每个按钮都会有`ui_element`类和`button_***`类。
看一看：

```
.ui_element {
    background-image: url("http://i.stack.imgur.com/S02fG.png");
    width: 24 px;    /*May be different for specific buttons*/
    height: 24 px; 

}
.button_home {
    background-position: -23px -23px; /*Move the main image to the deserved element*/

} 
```

然后，理论上，下面的代码应该显示红色的“home”图标：

```
<div class="ui_element button_home"></div> 
```

您还可以做一些花哨的技巧，例如悬停时的不同显示：

```
div.button_home {
    background-position: 0px -23px; /*grey icon*/
}
div.button_home:hover {
    background-position: -23px -23px; /*red icon*/
} 
```

请注意，我的代码不会显示正确对齐的所有内容。除非在生成图像时使用了非常精确的模式，否则无法自动生成 CSS 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:38:11.647

没有办法“动态地”执行此操作，这意味着它无法计算出坐标。要手动实现您在**CSS**中寻找的内容，您将使用

```
background:url('sprites.png') 0 0; 
```

格式是图像本身，左多远，下多远。

# jquery - 通过 li 循环创建 JSON 对象

> ID：15999108
> 
> 赞同：2
> 
> 时间：2013-04-14T12:32:29.893
> 
> 标签：jquery, arrays, json, loops

我希望有人能在这里看到我哪里出错了，我在尝试通过循环遍历我的所有列表项来创建 JSON 对象时遇到了一些问题。

基本上，从长远来看，我想要实现的是获得一个 PHP 数组，例如：

```
$positions = array(
1 => 2,
2 => 3,
3 => 4,
4 => 5,
5 => 6,
6 => 1); 
```

我需要使用我的所有列表项创建一个 JSON 对象，以便以后可以使用 AJAX 发送它。我需要它采用这种格式：

```
[{1:2, 2:3, 3:4, 4:5, 5:6, 6:1}] 
```

我目前拥有的代码是：

```
 <li data-serial="6" data-newpos="1"></li>

    jsonObj = [];
    $("li.item").each(function() {
            var id = $(this).attr('data-serial');
            jsonObj.push({
                id: $(this).attr('data-newpos')
            });
        });
        alert(JSON.stringify(jsonObj)); 
```

但这给了我这个不是我需要的结果：

```
[{"id":"1"},{"id":"2"},{"id":"3"},{"id":"4"},{"id":"5"},{"id":"6"}] 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:37:37.233

试试这个：

```
jsonObj = {};
$("li.item").each(function() {       
               var id = $(this).attr('data-serial');
               jsonObj[ id ] = $(this).attr('data-newpos');
             }); 
```

这将为您提供这种形式的对象（假设`data.`属性正确）

```
{"1":"2", "2":"3", "3":"4", "4":"5", "5":"6", "6":"1"} 
```

# java - 空指针错误数组缩短方法

> ID：15999109
> 
> 赞同：0
> 
> 时间：2013-04-14T12:32:29.957
> 
> 标签：java, exception, pointers, null

我有以下代码应该通过将元素复制到新数组并跳过其他数组来缩短数组。但是，我不断收到空指针异常错误。

```
public void shorten()
{
    // put your code here
    if( samples.length % 2 == 0){
        double [] temp = new double[samples.length / 2];
    }
    else if( samples.length % 2 != 0){
        double [] temp = new double[samples.length / 2 - 1];
    }

    Arrays.fill(temp, 1.0);
    int j = 0;
    for(int i=0; i<= temp.length; i++){
        temp[i] = samples[j];

        j = j + 2;

    }
    samples = temp;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:35:41.990

此代码的每个块：

```
if( samples.length % 2 == 0){
    double [] temp = new double[samples.length / 2];
}
else if( samples.length % 2 != 0){
    double [] temp = new double[samples.length / 2 - 1];
} 
```

定义了一个`temp`只有 1 行范围的变量（隐藏这些行的`temp`类变量（我假设你有）并保持不变）。

如果`temp`类变量是`null`在调用函数时，它仍然会`null`在这些行之后。你需要类似的东西：

```
if( samples.length % 2 == 0){
    temp = new double[samples.length / 2];
}
else { // samples.length % 2 != 0 is implied, since it's else
    temp = new double[samples.length / 2 + 1]; // corrected -1 to +1
} 
```

我删除了`double[]`之前`temp`声明的新变量。

此外，for-loop-check 需要是`i < temp.length`，而不是`<=`因为在后一种情况下它也会运行循环 for`i = temp.length`并因此尝试写入`temp[temp.length]`，并且由于 0 索引，该索引超出范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T12:34:34.647

除了空指针，这里还有另一个错误。

`i<= temp.length`应该是`i< temp.length`。`length`给出总长度，因为元素计数从 0 开始，所以数组的最后一个元素是`length-1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T12:37:33.903

试试这个：我在需要的地方更改了你的代码。

```
public void shorten()
{
    // put your code here
    double [] temp=null; // here I declare temp Array
    if( samples.length % 2 == 0){
        temp = new double[samples.length / 2];
    }
    else if( samples.length % 2 != 0){
         temp = new double[samples.length / 2 - 1];
    }

    Arrays.fill(temp, 1.0);
    int j = 0;
    for(int i=0; i< temp.length; i++){// here I removed "=" because Array index starts from 0 to length-1\. 
        temp[i] = samples[j];

        j = j + 2;

    }
    samples = temp;
} 
```

# html - UL/LI定位间距

> ID：15999111
> 
> 赞同：0
> 
> 时间：2013-04-14T12:32:56.373
> 
> 标签：html, css

我在这个问题上已经有一段时间了，每次我调整导航栏的大小时，如果大小 ddint 匹配，它都会在底部添加 1 行。谁能帮我删除联系我标签后的那个小空间？提前致谢。这是结果的链接

![在此处输入图像描述](https://i.stack.imgur.com/8ji6A.jpg)

我的代码是这个 obj.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<link rel="stylesheet" type="text/css" href="obj1.css">
<title>Objective 1</title>
</head>
<body>
<div class="header">
<div class="nav">
<ul>
<li class="navbutton"><a href="">About Us</a></li>
<li class="navbutton"><a href="">Our Team</a></li>
<li class="navbutton"><a href="">Education</a></li>
<li class="navbutton"><a href="">Health Care</a></li>
<li class="navbutton"><a href="">Advertising</a></li>
<li class="navbutton"><a href="">Contact Us</a></li>
</ul>
</div>
</div>
</body>
</html> 
```

obj1.css

```
body {
font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
}

ul {
    display: inline-block;
    list-style-type:none;
    margin:0;
    padding:0;
}

li {
    float: left;
}

.header{
width: 900px;
height: 385px;
background-image: url(header.jpg);
}
.navbutton {
position: relative;
top: 310px;
width: 145px;
height: 75px;
margin-left: 0px;
margin-right: 5px;
background-image: url(link.png);
}

.navbutton a {
text-decoration:none;
}

.navbutton:hover{
background-image: url(linkselected.png);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:57:33.287

您可以通过添加以下规则来解决此问题：

```
//Change the header width to 901px to fit all the tabs
.header{
width: 901px;
height: 385px;
background-color: #ccc;
}

//Change the navbutton to be 146px wide
.navbutton {
position: relative;
top: 310px;
width: 146px;
height: 75px;
margin-left: 0px;
margin-right: 5px;
background-color: white;
}

//Remove the margin on the last child
.navbutton:last-child {
    margin-right:0;
} 
```

这是 jsFiddle 以备不时之需 - [http://jsfiddle.net/XXczL/](http://jsfiddle.net/XXczL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:36:27.537

检查这个[jsfiddle](http://jsfiddle.net/3kqG7/)以获得流畅的布局解决方案。

此解决方案使用`display: table`、`display: table-row`和`display: table-cell`属性值。

## 标记

```
 <div class="header">
     <div class="nav">
        <ul>
           <li class="navbutton">
              <a href="">About Us</a>
           </li>
           <li class="navbutton">
              <a href="">Our Team</a>
           </li>
           <li class="navbutton">
              <a href="">Education</a>
           </li>
           <li class="navbutton">
              <a href="">Health Care</a>
           </li>
           <li class="navbutton">
              <a href="">Advertising</a>
           </li>
           <li class="navbutton">
              <a href="">Contact Us</a>
           </li>
        </ul>
     </div>
  </div> 
```

## CSS

```
 body{
        font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
     }

     .nav ul{
        display: table-row;
        list-style-type: none;
        margin: 0;
        padding: 0;
     }

     .header{
        width: 900px;
        height: 385px;
        background: #f00 url(header.jpg);
        overflow: hidden;
        border: 1px solid #000
     }

     .nav{
        display: table;
        width: 100%;
        margin-top: 310px;
     }

     .navbutton{
        display: table-cell;
        height: 75px;
        background-image: url(link.png);
        padding: 0 4px;
     }

     .navbutton a{
        background: none repeat scroll 0 0 #FFFFCC;
        color: #FF0000;
        display: block;
        height: 100%;
        line-height: 75px;
        text-decoration: none;
        text-align: center;
     }

     .navbutton:hover{
        background-image: url(linkselected.png);
     }

     li:last-child, li.the_last_child{ padding-right: 0; }
     li:first-child, li.the_first_child{ padding-left: 0; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T12:48:09.693

将所有`<li>`标签放在一`<div>` 组css中`<div id="customDiv">`

`#customDiv { margin-left:auto; margin-right:auto; }`

这将使左边距和右边距相等，额外的空间在两边平均分配..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T13:17:42.737

你有2个问题在这里发生。首先，您在实际上不想要它们的地方应用了边距。即使您更正了这一点，标题的宽度仍然会导致出现不受欢迎的“空格”

[http://tinker.io/0191d/2](http://tinker.io/0191d/2)

包括以下修改：

```
.header {
    width: 895px; /* or modify the width of the button elements */
}

ul {
    margin: 0 0 0 -5px;
}

.navbutton {
    margin-left: 5px;
    margin-right: 0;
} 
```

您可以使用`:last-child`选择器删除最后一个元素的边距，但在您实际希望元素换行的情况下它不能很好地工作（请参阅：[http](http://codepen.io/cimmanon/pen/dwbHi) ://codepen.io/cimmanon/pen/dwbHi ）。另外，IE8 也不支持。

# c# - DELETE 语句与 REFERENCE 约束“FK_Claims_Patients”冲突

> ID：15999112
> 
> 赞同：3
> 
> 时间：2013-04-14T12:32:57.250
> 
> 标签：c#, sql-server-2008, foreign-keys

我正在尝试从我的网站 TABLE 中删除一个“人”，但我收到了错误，写在帖子的标题中，并且错误将我指向此代码：

```
Patient patient = db.Patients.Single(p => p.Patient id == id);
db.Patients.Remove(patient);
db.SaveChanges();
return RedirectToAction("Index"); 
```

或者，如果可能的话，我如何添加一个例外，所以当我点击删除按钮时，它会打开另一个页面并告诉我，我无权删除那个人。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T12:35:23.450

您需要删除所有引用该患者的声明。实现此目的的一种方法是将级联删除添加到您的外键约束中，但是，我不知道您使用的是哪个 DBMS。

错误消息似乎暗示 SQL Server，所以这里有一些关于 SQL Server 的信息 - [Cascading Referential Integrity Constraints](http://msdn.microsoft.com/en-us/library/aa933119%28v=sql.80%29.aspx)

要针对您的情况解决此问题，您需要执行 DROP CONSTRAINT，然后执行 ADD CONSTAINT。

```
ALTER TABLE dbo.Claims
   DROP CONSTRAINT FK_Claims_Patients

ALTER TABLE dbo.Claims
   ADD CONSTRAINT FK_Claims_Patients
   FOREIGN KEY (PatientId) REFERENCES dbo.Patients(PatientId) ON DELETE CASCADE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T04:50:28.860

```
Patient patient = db.Patients.Single(p => p.Patient id == id);
patient.Claims.clear();
db.Patients.Remove(patient);
db.SaveChanges(); 
```

将删除链接表中的相关项目并允许删除。

# angularjs - ng-disabled 中的大写字母

> ID：15999115
> 
> 赞同：0
> 
> 时间：2013-04-14T12:33:28.737
> 
> 标签：angularjs, angularjs-directive

我试图通过强制用户在文本输入中键入单词“DELETE”来启用删除按钮。下面的代码可以工作，但是它区分大小写，这意味着如果有人例如键入“删除”，它将不起作用。

谁能建议我如何更改下面的代码以使其不区分大小写？

```
 <div ng-app="">
  <div ng-controller="test">
  <label>Type the word DELETE below to confirm</label>
  <input type="text" placeholder="TYPE DELETE" ng-model="deletetext" /> <br />
  <button class="btn btn-danger" ng-disabled="deletetext != 'DELETE'">DELETE</button>
  </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:10:00.610

Thilo 建议使用 deletetext.toUpperCase() != 'DELETE' 解决了这个问题。这个更正的代码现在看起来像这样

```
<div ng-app="">
  <div ng-controller="test">
  <label>Type the word DELETE below to confirm</label>
  <input type="text" placeholder="TYPE DELETE" ng-model="deletetext" /> <br />
  <button class="btn btn-danger" ng-disabled="deletetext.toUpperCase() != 'DELETE'>DELETE</button>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:11:19.823

`deletetext.toUpperCase() != 'DELETE'`作品。您还可以添加 $watch`deletetext`并将其强制为大写。IMO 的可用性更好。

```
$scope.$watch('deletetext', function(newValue, oldValue){
    $scope.deletetext = newValue.toUpperCase();
}); 
```

这是完整的例子：http: [//jsfiddle.net/GLCAT/](http://jsfiddle.net/GLCAT/)

# delphi - RAD Studio XE2 - 获取过程名称

> ID：15999119
> 
> 赞同：1
> 
> 时间：2013-04-14T12:34:02.643
> 
> 标签：delphi, delphi-xe2

我想知道是否有办法为我的 Delphi 应用程序获取我自己编写的所有过程和函数名称的列表？
我需要能够将这些复制并粘贴到 Word 文档中。

# php - 将整数值与从 php 中的 xml 文档中获取的值相乘时出现异常行为

> ID：15999121
> 
> 赞同：0
> 
> 时间：2013-04-14T12:34:13.587
> 
> 标签：php, xml, xml-parsing, multiplication

我正在使用这个脚本来找出当天的每日访问者和总浏览量。

```
 <?xml version="1.0" ?> 
- <aws:UrlInfoResponse xmlns:aws="http://alexa.amazonaws.com/doc/2005-10-05/">
- <aws:Response xmlns:aws="http://awis.amazonaws.com/doc/2005-07-11">

- <aws:UrlInfoResult>
- <aws:Alexa>
- <aws:TrafficData>

- <aws:UsageStatistic>
- <aws:TimeRange>
  <aws:Months>1</aws:Months> 
  </aws:TimeRange>
- <aws:Rank>
  <aws:Value>2426210</aws:Value> 
  <aws:Delta>-12536204</aws:Delta> 
  </aws:Rank>
- <aws:Reach>
- <aws:Rank>
  <aws:Value>2757065</aws:Value> 
  <aws:Delta>-12015838</aws:Delta> 
  </aws:Rank>
- <aws:PerMillion>
  <aws:Value>0.4</aws:Value> 
  <aws:Delta>+1200%</aws:Delta> 
  </aws:PerMillion>
  </aws:Reach>
- <aws:PageViews>
- <aws:PerMillion>
  <aws:Value>0.21</aws:Value> 
  <aws:Delta>+4000%</aws:Delta> 
  </aws:PerMillion>
- <aws:Rank>
  <aws:Value>2206561</aws:Value> 
  <aws:Delta>-12826154</aws:Delta> 
  </aws:Rank>
- <aws:PerUser>
  <aws:Value>3</aws:Value> 
  <aws:Delta>+200%</aws:Delta> 
  </aws:PerUser>
  </aws:PageViews>
  </aws:UsageStatistic>
  </aws:UsageStatistics>
  <aws:ContributingSubdomains /> 
  </aws:TrafficData>
  </aws:Alexa>
  </aws:UrlInfoResult>
- <aws:ResponseStatus xmlns:aws="http://alexa.amazonaws.com/doc/2005-10-05/">
  <aws:StatusCode>Success</aws:StatusCode> 
  </aws:ResponseStatus>
  </aws:Response>
  </aws:UrlInfoResponse> 
```

该文件保存在服务器的某个位置。

使用此代码获取

```
$xml = simplexml_load_file("PATH To FILE", null, null, 'aws', true);
$pageview=$income_data->Response->UrlInfoResult->Alexa->TrafficData->UsageStatistics->UsageStatistic->PageViews->PerMillion->Value;

$daily_pageview=$pageview*10; 
```

一切都很好，直到我发现结果对于少数域值都不正确。然后我尝试回显每个值，我发现它忽略了点之后的值（。）

```
[Like for example]
.02=>0
.100=>0
1.02=>1 
```

在上述情况下，值`$pageview=0.21`和输出是`0`但它应该来`2.1`。

对此的任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:41:38.930

我猜这是从 SimpleXMLElement 中转换值的方式，至少这是下面所指的。

```
<?php
$xml = '
<testdata>
    <foo>1.2</foo>
</testdata>
';

$xml = new SimpleXMLElement($xml);

echo get_class($xml->foo);  //SimpleXMLElement

echo 1.2 * 2;               // 2.4
echo $xml->foo * 2;         // 2
echo (float)$xml->foo * 2;  // 2.4 
```

# c++ - 参数前的 const 与函数名后的 const C++

> ID：15999123
> 
> 赞同：121
> 
> 时间：2013-04-14T12:34:23.433
> 
> 标签：c++, function, constants

像这样的东西有什么区别

```
friend Circle copy(const Circle &); 
```

和这样的东西

```
friend Circle copy(Circle&) const; 
```

我知道 const 在函数用于告诉编译器该函数不会尝试更改调用它的对象之后，另一个呢？

* * *

## 回答 #1

> 赞同：249
> 
> 时间：2013-04-14T12:36:51.830

第一种形式意味着`Circle`绑定到作为函数参数的引用的对象的（状态）`copy()`不会被`copy()`该引用更改。该引用是对 的引用`const`，因此无法`Circle`通过该引用调用本身未限定为的成员函数`const`。

另一方面，第二种形式是非法的：只有**成员函数**可以是`const`- 限定的（而您声明的是全局`friend`函数）。

当`const`限定成员函数时，限定指的是隐式`this`参数。换句话说，不允许该函数更改调用它的对象（隐式`this`指针指向的对象）的状态-对象除外`mutable`，但这是另一回事。

用代码说：

```
struct X
{
    void foo() const // <== The implicit "this" pointer is const-qualified!
    {
        _x = 42; // ERROR! The "this" pointer is implicitly const
        _y = 42; // OK (_y is mutable)
    }

    void bar(X& obj) const // <== The implicit "this" pointer is const-qualified!
    {
        obj._x = 42; // OK! obj is a reference to non-const
        _x = 42; // ERROR! The "this" pointer is implicitly const
    }

    void bar(X const& obj) // <== The implicit "this" pointer is NOT const-qualified!
    {
        obj._x = 42; // ERROR! obj is a reference to const
        obj._y = 42; // OK! obj is a reference to const, but _y is mutable
        _x = 42; // OK! The "this" pointer is implicitly non-const
    }

    int _x;
    mutable int _y;
}; 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2013-04-14T12:38:58.347

C++ 类方法有一个隐式`this`参数，它位于所有显式参数之前。所以在这样的类中声明的函数：

```
class C {
  void f(int x); 
```

你可以想象真的看起来像这样：

```
 void f(C* this, int x); 
```

现在，如果你这样声明：

```
 void f(int x) const; 
```

就好像你写了这个：

```
 void f(const C* this, int x); 
```

也就是说，尾部`const`使`this`参数变为 const，这意味着您可以在类类型的 const 对象上调用该方法，并且该方法不能修改调用它的对象（至少，不能通过正常通道）。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-07-03T07:20:10.500

* * *

**让我们清除所有与** **`const`**

* * *

**`const`**来自**常数**意味着某些东西是不可改变但可读的。

1.  如果我们用**`const`**关键字限定我们的变量，我们以后不能改变它。
    例如，const 变量必须在声明时进行初始化。
    **`const`**`int var =25;`
    `var =50; // gives error`

2.  如果我们用*after*限定我们的指针变量，那么我们**不能**更改指针本身，但指针的内容是**可变**的。 例如 // 但是**`const`** ***`*`** ****`int *`**`const`** `ptr = new int;`
    `ptr = new int; //gives error`

    `*ptr=5445; //allowed`*****

******   如果我们用*before*限定我们的指针变量，那么我们**可以**更改指针本身，但指针的内容是**不可更改**的。 例如 // 但是**`const`** ***`*`** ****`int`**`const`**`* ptr = new int(85);`
    `//or`
    **`const`**`int * ptr = new int(85);`
    `ptr = new int; // allowed`

    `*ptr=5445; // gives error`***** 

    ******   指针和内容都是常量，
    例如
    `int`**`const`**`*`**`const`**`ptr = new int(85);`
    `//or`
    **`const`**`int *`**`const`**`ptr = new int(85);`
    `ptr = new int; // not allowed`
    `*ptr=5445; // not allowed`********** 

 ******* * *

1.  `Circle copy(const Circle &);`
    这里 const Circle 表示 Circle 的值是只读的，如果我们尝试在函数内部更改 Circle 的值，则会出错。
2.  `friend Circle copy(Circle&) const;`
    这种类型的函数不适用于非成员变量。它用于类或结构。这里整个函数用 const 关键字限定，这意味着我们不能更改**对象成员变量**。例如

```
 class A{ public :
              int  var;
              void fun1()
                    { var = 50; // allowed
                    } 
              void fun2()const
                       { var=50; //not allowed
                       }
           }; 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-14T12:49:29.487

```
Circle copy(Circle&) const; 
```

使函数`const`本身。这只能用于类/结构的成员函数。

制作成员函数`const`意味着

*   它*不能*调用任何非常量成员函数
*   它*不能*改变任何成员变量。
*   它可以被一个`const`对象调用（`const`对象只能调用`const`函数）。非常量对象也可以调用`const`函数。
*   它*必须是“* **Circle** ”类的成员函数。

现在考虑下一个：

```
Circle copy(const Circle &); 
```

而这意味着传递的参数不能在函数内更改。它可能是也可能不是该类的成员函数。

**注意：**有可能以这样的方式重载一个函数，以拥有`const`同一函数的一个和非常量版本。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-14T12:35:52.520

一个是指参数，另一个是函数。

```
Circle copy(const Circle &); 
```

这意味着传入的参数不能在函数内更改

```
Circle copy(Circle&) const; 
```

`const`限定函数用于成员函数，意味着您不能更改对象本身的数据成员。您发布的示例是荒谬的。

### 从右到左阅读

如果我们将第一个函数重写为`Circle copy(Circle const&);`，这意味着同样的事情，很明显从右到左阅读变得有用。*`copy`是一个函数，它接受一个对象的`const`引用`Circle`并通过引用返回一个`Circle`对象。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-14T12:38:54.030

`friend Circle copy(const Circle &);`//指的是函数的常量参数。不能'改变参数存储的值。

需要在您的示例中删除朋友 **Circle copy(Circle&) const;** //不能改变这个命名为常量成员函数的指针值

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-01T22:40:10.723

```
friend Circle copy(const Circle &); 
```

在函数调用期间参数的值不会改变。

```
friend Circle copy(const Circle &)const ; 
```

该函数是一个不会更改类成员的任何值的访问器。通常，函数有多种类型：访问器和修改器。Accessor：检查但不改变其对象的状态。******

# git - 如何将整个 git 存储库移动到其他地方？

> ID：15999128
> 
> 赞同：3
> 
> 时间：2013-04-14T12:34:55.027
> 
> 标签：git

我们在 GitHub 上有很多存储库，我们希望完全切换到另一个提供商。我是 Mercurial 的粉丝，所以我不太熟悉 Git 分支，不幸的是，在克隆 git 存储库时，您必须指定一个分支，否则它将克隆主分支（如果我在这里没有完全错误的话）。

为了更具体地举个例子，假设我们有一个名为的项目`hello`，它有几个分支（`master`, `a`, `b`）。我想移动它，然后通过删除原始存储库继续在新存储库中工作。

所以我们有这个存储库：

```
git@github.com:lipis/hello.git 
```

我们想把它移到：

```
ssh://lipis@lipis.kilnhg.com/lipis/hello 
```

由于我们有 40 多个不同的项目，并且其中许多都有不同的分支，我的问题是，我如何才能将每个存储库（连同所有分支）完全移动到另一个存储库，而无需拉动和推送每个项目的单个分支？

* * *

有某种程序会很高兴，例如：

```
$ git clone git@github.com:lipis/hello.git
$ cd hello
# some black git magic that only Linus understands..
# continue working with the newest repository only 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T12:37:36.523

`git clone`不会克隆特定的分支，它会克隆所有分支，然后签出 master。

最简单的方法是简单地将存储库推送到新位置`--mirror`。你也可以从另一边克隆。您也可以只复制文件夹。

为了详细说明如何工作，假设我们从具有分支、和`git clone`的存储库中克隆。然后在新的存储库中，我们得到了分支、、和，我们可以像分支一样在新的存储库中获取我们自己的副本。`origin``master``a``b``master``origin/master``origin/a``origin/b``git branch a origin/a``a`

从`github`存储库推送可能很困难，因此您可能应该只使用`git clone --mirror`（它会自动为我们设置所有参考）。这是假设您拥有对`ssh`服务器的完全访问权限。如果没有，你应该`git clone --mirror`从第三台机器，然后`git push --mirror`到`ssh`服务器。

# php - 带有自定义分钟的时间戳

> ID：15999129
> 
> 赞同：2
> 
> 时间：2013-04-14T12:35:00.900
> 
> 标签：php, date, time, timestamp

我想制作自定义时间戳。我需要将时间的分钟四舍五入到 00 或 30。我已经为此编写了一个 PHP 代码：

```
if (date("i") >= '15' && date("i") < '45') {
    $minute = "30";
}

else {
    $minute = "00";
} 
```

但是，现在，我想制作带有时间+日期的时间戳。

有人对此有解决方案吗？我想我需要使用 strptime 但我不知道究竟如何..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:42:03.190

您可以使用 mktime 生成一个四舍五入到最接近 30 分钟的时间戳：

```
echo date('Y-m-d H:i:s', mktime(date('H'), round(date('i') / 30) * 30, 0)); 
```

这里的例子：

> [http://codepad.org/3NCeWO21](http://codepad.org/3NCeWO21)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:49:15.157

以下代码片段：

```
<?php
date_default_timezone_set('America/New_York');
$format = '%d/%m/%Y %H:%M:%S';
$strf = strftime($format);

print_r(strptime($strf, $format));
?> 
```

产生这个输出：

```
Array
(
    [tm_sec] => 49
    [tm_min] => 48
    [tm_hour] => 8
    [tm_mday] => 14
    [tm_mon] => 3
    [tm_year] => 113
    [tm_wday] => 0
    [tm_yday] => 0
    [unparsed] => 
) 
```

我想你可以从这里拿走。

# git - 远程存储库中的 Git 子模块

> ID：15999133
> 
> 赞同：0
> 
> 时间：2013-04-14T12:35:19.313
> 
> 标签：git, git-submodules, git-bare

我很难理解子模块是如何工作的。

我有一个远程存储库*PARENT*和一个远程存储库*CHILD*。我想让存储库*CHILD*成为存储库*PARENT*的子模块，所以当我签​​出*PARENT*时，*CHILD*也会被签出（进入*PARENT*的子文件夹）。所以我的第一次尝试是将*PARENT*设置为裸存储库。但是当我想添加子模块时：

```
[git ~/repositories/PARENT] git submodule add git://github.com/CHILD.git CHILD
fatal: /usr/libexec/git-core/git-submodule cannot be used without a working tree. 
```

因此，我将*PARENT 设为*具有适当工作树的非裸存储库（即使我真的不需要该存储库中的工作树）。添加子模块很顺利。*将PARENT*克隆到本地存储库也很顺利，并且*CHILD*已按预期作为子文件夹检出。然后，当我想再次将本地存储库中的更改推送回*PARENT*时：

```
branch is currently checked out
error: refusing to update checked out branch: refs/heads/master
error: By default, updating the current branch in a non-bare repository
error: is denied, because it will make the index and work tree inconsistent
error: with what you pushed, and will require 'git reset --hard' to match
error: the work tree to HEAD.
error: 
error: You can set 'receive.denyCurrentBranch' configuration variable to
error: 'ignore' or 'warn' in the remote repository to allow pushing into
error: its current branch; however, this is not recommended unless you
error: arranged to update its work tree to match what you pushed in some
error: other way.
error: 
error: To squelch this message and still keep the default behaviour, set
error: 'receive.denyCurrentBranch' configuration variable to 'refuse'. 
```

所以我不能在我的裸存储库中使用子模块，因为它有一个工作树，但是当我使用非裸存储库时，我不能签入，因为它有一个工作树？我在这里不明白什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:13:22.500

您的问题不在于子模块，它是由尝试推送到非裸存储库引起的（无论您是否推送包含 a 的提交`submodule`）。

裸存储库是远程的（您不直接在存储库中工作）。要将子模块添加到远程存储库，请将子模块添加到*本地*存储库，然后`git push`将更改添加到远程（从而将子模块作为提交推送到远程存储库）。

# java - Eclipse 自定义文本编辑器 - 标记注释演示问题

> ID：15999138
> 
> 赞同：1
> 
> 时间：2013-04-14T12:35:27.510
> 
> 标签：java, eclipse, annotations, markers, text-editor

我想为我的计算机科学讲师编写一个 Eclipse 插件。它是一个基于 xml 文件格式的自定义编辑器。我已经实现了语法高亮和其他东西。但是在使用注释/标记来显示无效内容时，我坚持了下来。

如果内容有效，这就是它的样子：

[有效内容图片 http://image-upload.de/image/aPcsaa/6c799a671c.png](http://image-upload.de/image/aPcsaa/6c799a671c.png)

如果内容无效，这就是它的样子：

[无效内容的图片 http://image-upload.de/image/4TdooQ/04d662f397.png](http://image-upload.de/image/4TdooQ/04d662f397.png)

如您所见，无效属性将被标记，但问题是，这些注释之间似乎丢失了整个格式。

我使用`org.eclipse.jface.text.reconciler.Reconciler`延迟解析内容来创建文档模型。该模型用于格式化文本和显示注释。这一切都发生`void process(DirtyRegion dirtyRegion)`在`Reconciler`.

对于我使用的文本格式和我使用`<ITextViewer>.changeTextPresentation(textAttributes, false)`的注释处理

```
IAnnotationModel annotationModel = <ISourceViewer>.getAnnotationModel();
IAnnotationModelExtension annotationModelExtension = (IAnnotationModelExtension) annotationModel;
annotationModelExtension.replaceAnnotations(oldAnnotations, newAnnotations); 
```

由于`Reconciler`不使用 swt 线程，因此我必须使用此构造来避免异常：

```
<ITextViewer>.getTextWidget().getDisplay().asyncExec(new Runnable() {
  @Override
  public void run() {

    <ITextViewer>.changeTextPresentation(textAttributes, false);
    updateAnnotations(nodes);
  }
}); 
```

顺便说一下`ITextViewer`和`ISourceViewer`都意味着相同的*查看器对象*。

作为注释类型，我有 testet:`org.eclipse.ui.workbench.texteditor.spelling`和其他一些，也是自定义类型，但结果都相同。

我不太确定，我做错了什么，可能是因为这一切都在一个电话中吗？

我希望有人可以帮助我解决这个问题。

先感谢您。

# python - Python 日期比较引发意外错误

> ID：15999139
> 
> 赞同：0
> 
> 时间：2013-04-14T12:35:32.407
> 
> 标签：python

我正在使用带有谷歌日历 API 的 Flask/SqlAlchemy 应用程序。本质上，我正在创建一个事件数据库。这是一个精简的类片段：

```
# Flask. We just need the basic stuff in this common moduel
from flask import Flask

# flask SQLAlchemy
from flask.ext.sqlalchemy import SQLAlchemy

# Sort
from sqlalchemy import desc,asc,and_

# Datetime
from datetime import datetime, date

class FlyingEvent(db.Model):
    # Event Data
    event_id = db.Column(db.Text, primary_key=True)
    updated_datetime = db.Column(db.DateTime)
    start_date = db.Column(db.DateTime)
    end_date = db.Column(db.DateTime)
    status = db.Column(db.Text)
    creator_email = db.Column(db.Text)
    summary = db.Column(db.Text)
    description = db.Column(db.Text)

    # Flying-specific entries
    flying = db.Column(db.Boolean)
    tach_start = db.Column(db.Float)
    tach_end = db.Column(db.Float)

def extract_hours():
        def get_digits(line):
          if re.compare('[\d\.]+', line):
            return line
          else:
            return None
        try: 
          right_now=date.today()
          if self.flying and self.end_date.date() < right_now:
            lines = self.description.split('\n')
            self.tach_start = get_digits(lines[0])
            self.tach_end = get_digits(lines[1])
        except Exception as e:
            raise Exception('%r, Could not parse tach %r %r' % (e, self, 
                right_now)) 
```

这引发了一个异常（我用对象的 repr 重新引发）：

```
Exception: AttributeError("'module' object has no attribute 'compare'",), Could not parse tach { "event_id": u'go8bl9i615f7e7qljuoun9bqgk', "update_datetime": datetime.datetime(2013, 4, 12, 23, 58, 54, 371000), "start_date": datetime.datetime(2013, 4, 4, 0, 0), "end_date": datetime.datetime(2013, 4, 5, 0, 0), "status": u'confirmed',        "creator_email": u'jordanzaretsky@gmail.com', "summary": u'jordan 10.6 to 10.9', "description": u'1010.7\n1010.9', "flying": True, "tach_start": 1010.7, "tach_end": 1010.9} datetime.date(2013, 4, 14) 
```

在我看来，self.end_date 是一个 datetime 对象（我正在使用它的 .date()），而 right_now 是一个 datetime.date()。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:39:22.497

您收到此错误，因为`re`模块没有功能`compare`。我想，你的意思是`re.match`：

```
if re.match('[\d\.]+', line): 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T12:39:32.617

您正在使用`re.compare`，这不是`re`模块提供的功能。

也许您想使用`re.search()`或`re.match()`代替？或者您可以只使用并获取and列`float()`的实际浮点值：`tach_start``tach_end`

```
def get_digits(line):
    try:
        return float(line)
    except ValueError:
        return None 
```

# javascript - 在变量上使用 jQuery.Deferred？

> ID：15999145
> 
> 赞同：1
> 
> 时间：2013-04-14T12:35:57.963
> 
> 标签：javascript, jquery-deferred, deferred

*当 ajax 完成后，我可以使用 done,error,always deferred methods 。但我可以这样做，因为 `jqXHR`对象是从 Deferred 对象派生的。*

但是我如何在这个简单的例子中模仿这种行为：

我有一个名为`t`.

我希望在`t`get 的值时调用 done 函数。

像这样的东西：（*伪*）

```
var t;
setTimeout(function (){t=100;},3000);
t.done(function (){alert('');}); //im expecting this alert after 3 seconds. 
```

我怎样才能做到这一点 ？

*ps 我知道我可以在回调函数中调用警报（显然）。但又一次。我想应用延迟行为*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:33:35.617

您不能只使用分配给的变量。相反，手动创建一个[`jQuery.Deferred`对象](http://api.jquery.com/jQuery.Deferred/)，[`.resolve()`](http://api.jquery.com/deferred.resolve/)它：

```
var t = new $.Deferred();
setTimeout(function() {
    t.resolve(100);
}, 3000);
t.done(function(val) {
    alert(val);
}); // this will alert "100" after 3 seconds 
```

# ruby - 在 Windows 上运行 ruby gem

> ID：15999146
> 
> 赞同：6
> 
> 时间：2013-04-14T12:36:04.200
> 
> 标签：ruby, windows, gem, vagrant

我在 Windows 7 上并想使用[http://hospice.io/](http://hospice.io/)。这需要 Ruby gem ，所以我使用[http://rubyinstaller.org/](http://rubyinstaller.org/)`librarian`安装了 ruby​​ 2.0，然后从[http://rubyforge.org/frs/?group_id=126](http://rubyforge.org/frs/?group_id=126)下载了 RubyGems 1.8.25并更新（）。我安装了.`gem update --system``librarian`

```
ruby setup.rb
gem install librarian 
```

现在我在我的 Vagrant 盒子的文件夹中，想要执行命令`librarian-chef`，但我得到了

```
'librarian-chef' is not recognized as an internal or external command, operable program or batch file. 
```

我在运行 ruby​​ 时尝试过，`devkit/msys`结果相同。有什么建议如何运行吗？我猜PATH有问题，但是当`gem install`工作时为什么也`librarian-chef`不起作用？

`gem env`：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 2.0.3
  - RUBY VERSION: 2.0.0 (2013-02-24 patchlevel 0) [x64-mingw32]
  - INSTALLATION DIRECTORY: C:/bin/ruby/lib/ruby/gems/2.0.0
  - RUBY EXECUTABLE: C:/bin/ruby/bin/ruby.exe
  - EXECUTABLE DIRECTORY: C:/bin/ruby/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x64-mingw32
  - GEM PATHS:
     - C:/bin/ruby/lib/ruby/gems/2.0.0
     - C:/Users/Andrew/.gem/ruby/2.0.0
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - https://rubygems.org/ 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-01-05T16:55:42.183

另外，可能想补充一点，我在 Windows 机器上开始开发 ruby​​ 1.8.7 并通过 ruby​​ 1.9.3，然后切换到 Ubuntu 12.04。我的开发时间可能减少了一半甚至四分之一。我不知道这是否随着 Ruby 2+ 而改变

我鼓励您考虑使用 Ubuntu 进行双启动，在设置上的少量投资将为您节省大量时间来处理使 windows 像 linux 一样的行为，并为您提供设置开发环境的额外好处，就像它将在如果您将运行诸如 unicorn/nginx 之类的东西，则进行生产。

# asp.net - 获取我网站的用户数 - asp.net

> ID：15999147
> 
> 赞同：-6
> 
> 时间：2013-04-14T12:36:07.080
> 
> 标签：asp.net, html, asp-classic

如何获得多少人注册到我的网站？在 ASP.NET 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:39:22.193

除非您使用其他一些方法，例如数据库，否则您不会变得比递增`Session_Start`和递减更好。`Session_End`

当您验证您的请求时，您可以更新数据库中的时间戳以显示用户已处于活动状态，并且在给定时间（例如 10-15 分钟）之后，收集当前用户数量的查询会忽略数据库中的该行（从而减少计数）。

# xcode - 不使用 TableViewController 的 Xcode 表视图部分

> ID：15999150
> 
> 赞同：0
> 
> 时间：2013-04-14T12:36:26.970
> 
> 标签：xcode, uitableview

我有一件特别的事情要在这里实现。

我有一个 ViewController，上面有一个 View。在视图上，我有一个`ImageView`（我需要一个漂亮的背景图像）和许多按钮和文本字段等等。

现在我需要一个表格视图。此表视图位于屏幕中央。我需要此表视图中的部分，因此当我编辑它以使其部分抱怨时，因为他想要`TableViewController`使用静态单元格和部分。

这就是问题所在。我不能使用`TableViewController`因为我需要在 tableview 周围使用这些东西（那些按钮和文本字段），而且我还需要背景中的图像。

那么我怎么能意识到这一点呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:50:51.430

Interface Builder 不允许嵌入在视图控制器中的表视图中的静态单元格。您需要让表视图的数据源指向您的 UIViewController。视图控制器应该硬编码单元格的值/配置。本质上是一样的……你只是在运行应用程序之前看不到结果。

另请参阅此问题[Using static cells in a storyboard UIView with Xcode 4.2](https://stackoverflow.com/questions/7825546/using-static-cells-in-a-storyboard-uiview-with-xcode-4-2)

# c++ - 使用 C++ 创建前端

> ID：15999154
> 
> 赞同：-1
> 
> 时间：2013-04-14T12:37:20.927
> 
> 标签：c++

我有用 C++ 编写的数据生成代码。是否可以使用 C# 创建前端并将值传递给用 C++ 编写的数据生成代码？

我正在使用[Visual Studio 2010](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2010)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:47:17.800

您可以选择 .NET 生态系统提供的任何互操作选项：

*   使用[平台调用](http://msdn.microsoft.com/en-us/library/aa446536.aspx)
*   将您的 C++ 逻辑包装到 COM 接口中，并通过[运行时可调用包装器](http://msdn.microsoft.com/en-us/library/8bwh56xe.aspx)从 .NET 应用程序使用它，即[COM 互操作](http://www.codeproject.com/Articles/9776/COM-Interoperability-in-NET-Framework-Part-I)
*   制作您的 C++ 库和[C++/CLI](http://en.wikipedia.org/wiki/C++/CLI) dll 并直接从 .NET 使用它

当然，您总是拥有“经典”互操作选项，例如拥有 TCP/IP 客户端-服务器，但如果您只需要调用另一个 dll 的方法，这将是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:40:55.900

[由于P/Invoke](http://en.wikipedia.org/wiki/Platform_Invocation_Services)机制，任何 C# 程序都可以轻松访问 DLL（可以用 C++ 编写）的功能。

作为替代方案，您也可以从 C# 调用可执行文件，如 Stack Overflow 问题*[Can you execute another EXE file from within a C# console application?](https://stackoverflow.com/questions/1832962/can-you-execute-another-exe-from-within-a-c-sharp-console-application/1833006#1833006)* .

你也可以看看[SWIG](http://en.wikipedia.org/wiki/SWIG)。

# matlab - 如何在 MatLab 中选择撞击矩形的随机线

> ID：15999157
> 
> 赞同：0
> 
> 时间：2013-04-14T12:37:36.667
> 
> 标签：matlab, plot, counter, data-manipulation

我正在创建随机的起点和终点。我想绘制那些与放置在原点的矩形交叉/相交的图形。我发现我的代码漏掉了一些行，如图。在那之后，我想计算轨道是否击中了矩形。例如，轨道来自顶部并从右侧退出等。

![](https://i.imgur.com/R8dzhXd.jpg)

我的代码是

```
function [hot, cold, h] = MuonTracks(tracks)%#eml

    % NOTE: no variables larger than 1x1 are initialized

    width  = 1e-4;
    height = 2e-4;

    % constant used for Laplacian noise distribution  
    bL = 15 / sqrt(2);

    % Loop through all tracks
    X = [];
    bhit= [];
    hot = 0;  
    ii = 0;
    TopBottom= 0;
    LeftRight= 0;
    TopRight= 0;
    TopLeft= 0;
    LeftBottom= 0;
    RightBottom= 0;
    ihit= 0;
    while ii <= tracks

        ii = ii + 1;

        % Note that I've inlined (== copy-pasted) the original laprnd()
        % function call. This was necessary to work around limitations 
        % in loops in Matlab, and prevent the nececessity of those HUGE 
        % variables. 
        %
        % Of course, you can still easily generalize all of this: 

        % the new data
        u = rand-0.5;

        Ystart = 15; 
        Xstart = 80*rand-40;
        Xend   = Xstart - bL*sign(u)*log(1-2*abs(u));
        %Xend=laprnd(tracks,1,Xstart,15);

        b = (Ystart*Xend)/(Xend-Xstart);

        % the test
        if ((b < height && b > 0)) ||...
            (Xend < width/2 && Xend > -width/2)

            hot = hot+1;

            % growing an array is perfectly fine when the chances of it
            % happening are so slim
            X = [X [Xstart; Xend]]; %#ok
            bhit=b;

        end
    end

    % This is trivial to do here, and prevents an 'else' 
    cold = tracks - hot;

    % Now plot the chosen ones
    h = figure;
    hold all    
    %Y = bsxfun(@times, 15, ones(size(X)));
    if (size(X)==0)
        %Disp('No hits were found');
        msgbox('No tracks were found','Result','warn');
    elseif (size(X)>1)
         Y = bsxfun(@times, [15; 0], ones(size(X)));
        plot(X, Y, 'r');
        msgbox( [num2str(hot) ' tracks were found'],'Result','help',num2str(hot));
    else
        Y = bsxfun(@times, [15; 0], ones(size(X)));
        plot(X, Y, 'r');
        msgbox( [num2str(hot) ' track was found'],'Result','help',num2str(hot));
    end
    %X;
    %Y;
    %size(X,2)
    while ihit<size(X,2)

        ihit=ihit+1
        %X(2,ihit)

        if ((X(2,ihit)==-width && (bhit<=0 && bhit<=height))&&(bhit==0 && (X(2,ihit)>=-width && X(2,ihit)>=width)))
            LeftBottom=LeftBottom+1;
        elseif ((bhit==height && (X(2,ihit)>=-width && X(2,ihit)>=width)) && (X(2,ihit)==width && (bhit<=0 && bhit<=height)))
            TopRight=TopRight+1;
        elseif ((bhit==height && (X(2,ihit)>=-width && X(2,ihit)>=width)) && (bhit==0 && (X(2,ihit)>=-width && X(2,ihit)>=width)))
            TopBottom=TopBottom+1;
        elseif ((X(2,ihit)==-width && (bhit<=0 && bhit<=height)) && (X(2,ihit)==width && (bhit<=0 && bhit<=height)))
            LeftRight=LeftRight+1;
        elseif ((X(2,ihit)==-width && (bhit<=0 && bhit<=height)) && (bhit==height && (X(2,ihit)>=-width && X(2,ihit)>=width)))
            TopLeft=TopLeft+1;
        elseif ((X(2,ihit)==width && (bhit<=0 && bhit<=height)) && (bhit==0 && (X(2,ihit)>=-width && X(2,ihit)>=width)))
            RightBottom=RightBottom+1;
        else
            display('sth is wrong');
        end
        X(2,ihit)
    end
    %X(1,:);
    %Y(1,:);
    LeftBottom
    TopRight
    TopBottom
    LeftRight
    TopLeft
    RightBottom
    %display('sdfghjk');
end 
```

任何想法都会受到欢迎！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:45:34.600

[在这里](http://www.mathworks.com/matlabcentral/fileexchange/27205-fast-line-segment-intersection)，您有一个能够与整组线段相交并返回交点的函数。我希望它有所帮助。

# c - 仅保留数据结构的少量更改

> ID：15999161
> 
> 赞同：1
> 
> 时间：2013-04-14T12:37:47.320
> 
> 标签：c, arrays, reference, struct

我不确定问题的标题，但这就是问题所在。

我有一个结构数组，现在我通过引用一个函数来传递它，其中我有一个相同结构的优先级队列。

现在，我通过使用优先级队列来处理我的数组，并且在处理结束时，我将在数组中更改我的结构的两个属性（比如`A`和`B`），而我只想要一个更改( `A`) 反映在函数外部，并且我希望将 other( `B`) 更改恢复为传递数组之前的方式。我必须这样做，因为当我第二次必须处理相同的数组但使用不同的参数时，我希望 A 的变化保持不变，但 B 不保持不变。

我现在要做的是，在处理之后，一旦我退出函数，我会处理整个数组，并且无论何时我更改了属性的值，`B`我都会将其恢复为初始值。现在这显然是一个对我没有好处的 O(n2) 操作。

我可以做些什么来提高效率吗？

我正在和 C 一起工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:45:58.580

例如，如果您`B`是类型，则可以在函数中创建一个数组。在优先级队列中使用输入数组（整数）的索引而不是结构。使用数组访问输入数组的 s：`bool``bool``bool``B`

```
void func(Type *Input, size_t n) 
{
    bool B[n];
    queue<size_t> pqueue;
    for (size_t i = 0; i < n; i++)
       B[i] = Input[i].B;
    size_t index;
    while (index = pqueue.front()) {
       // do something with Input[index]
       // B[index] = false;
       // rest of the function
    }
} 
```

# arm - ARM 开发快速入门

> ID：15999164
> 
> 赞同：0
> 
> 时间：2013-04-14T12:38:04.937
> 
> 标签：arm, bare-metal

我想尝试使用 ARM 平台进行开发，特别是我对裸机感兴趣。我正在尝试使用 QEMU 开始，但是这种学习方式缺乏全面的教程，并且不可避免地增加了另一个级别的复杂性。请推荐一个符合以下要求的体面的 ARM 开发平台（按重要性降序排列）：

1.  附带一个很好的分步教程。
2.  提供基本输入/输出。我想看到一些闪烁并能够按下它上面的一些按钮。此外，拥有数字显示器（如计算器）甚至液晶显示器会很棒
3.  至少提供一些调试功能。
4.  现代的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T12:48:04.530

如果您想从 ARM 控制器开始，您可以选择带有 LPC
1768 32 位 Arm 控制器的 mbed.mbed 板。您不需要对底层硬件有太多了解，因为有许多内置 api 可以与 GPIO 配合使用并连接传感器。

您可以按照提到的链接获取相同的[mbed](http://mbed.org/)

# ruby-on-rails - rspec assert_equal 没有方法错误

> ID：15999165
> 
> 赞同：2
> 
> 时间：2013-04-14T12:38:06.863
> 
> 标签：ruby-on-rails, ruby, rspec

```
undefined method 'assert_equal' for #<RSpec::Core::ExampleGroup::Nested_1:0x8d6f75c> 
```

宝石清单

```
bundler (1.3.5)
diff-lcs (1.2.3)
rspec (2.13.0)
rspec-core (2.13.1)
rspec-expectations (2.13.0)
rspec-mocks (2.13.1)
test-unit (2.5.4) 
```

spec_helper.rb

```
require './lib/checkout.rb'
require './lib/product.rb'
require 'rspec'

RSpec.configure do |config|
  config.treat_symbols_as_metadata_keys_with_true_values = true
  config.run_all_when_everything_filtered = true
  config.filter_run :focus
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T12:48:26.577

尝试`object.should eq('foo')`或`expect(object).to eq('foo')`代替。作为旁注，在使用标志`object.should == 'foo'`运行时会给你一个 Ruby 警告。`-w`

此外，这是一个假设答案，因为您没有给我们任何实际代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-11T15:43:26.690

您可以在顶部添加这些，而不是更改规范文件中的所有行

```
 require_relative '../spec_config' 
```

并在该文件中放置：

```
RSpec.configure do |config|
  config.expect_with :minitest
end 
```

因为 minitest 有 assert_equal 方法。抱歉，我来晚了，但我只是在寻找自己的答案，碰巧看到了这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T12:46:15.127

你可以试试`object.should == "something"`。这里`object`的意思是你要测试的对象。

# .net - f# 中的奇数类型结构行为

> ID：15999181
> 
> 赞同：1
> 
> 时间：2013-04-14T12:40:25.510
> 
> 标签：.net, visual-studio, struct, f#

所以我读过，如果你从一个 List 中获取一个类型结构，你会得到一个副本，因为 struct 是不可变的。这么说，如果你想做出改变，你必须替换列表中的整个结构。现在我用下面的代码经历了一个非常奇怪的行为

```
 if pressed then
        let ret = rectangles.Item(ret_index)
        ret.Offset(loc.X - offs.Width - ret.X, loc.Y - offs.Height - ret.Y)
        rectangles.Item(ret_index) <- ret
        for i = 0 to couples.Count - 1 do
            match couples.Item(i) with
                | (idx_s, idx_e, rectf, string) when idx_s = ret_index || 
                                                     idx_e = ret_index ->
                    let mutable r = rectf
                    let x = (rectangles.Item(idx_e).X + rectangles.Item(idx_s).X) / 2
                    let y = (rectangles.Item(idx_e).Y + rectangles.Item(idx_s).Y) / 2
                    r.X <- single x
                    r.Y <- single y
                    couples.Item(i) <- (idx_s, idx_e, r, string) 
```

那么定义可变矩形是不好的做法吗？（我读过可变结构是“邪恶的”）现在我真正的问题是：为什么上面的代码有效但下面的代码无效？

```
if pressed then
    let ret = rectangles.Item(ret_index)
    ret.Offset(loc.X - offs.Width - ret.X, loc.Y - offs.Height - ret.Y)
    rectangles.Item(ret_index) <- ret
    for i = 0 to couples.Count - 1 do
        match couples.Item(i) with
            | (idx_s, idx_e, rectf, string) when idx_s = ret_index || 
                                                 idx_e = ret_index ->
                let r = rectf
                let x = (rectangles.Item(idx_e).X + rectangles.Item(idx_s).X) / 2
                let y = (rectangles.Item(idx_e).Y + rectangles.Item(idx_s).Y) / 2
                r.Offset(single x - r.X, single y - r.Y)
                couples.Item(i) <- (idx_s, idx_e, r, string) 
```

# django - Django-tastypie 一对多关系

> ID：15999188
> 
> 赞同：8
> 
> 时间：2013-04-14T12:41:33.760
> 
> 标签：django, django-models, tastypie

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T15:13:33.130

您缺少观察模型上的“评论”属性，要么添加

```
observation = models.ForeignKey(Observation, related_name="comments") 
```

或更改为

```
comments = fields.ToManyField('apps.api.CommentResource2', 'comment_set', null=True) 
```

# c++ - C ++删除文件中的文本行

> ID：15999193
> 
> 赞同：5
> 
> 时间：2013-04-14T12:42:17.347
> 
> 标签：c++, file

我的 c++ 程序有问题...我的整个程序是一个包含学生姓名、成绩和年龄的数据库，当用户想要删除 1 个学生的数据时，我的功能有问题。这是代码：

```
void deletestudentdata()
{
    string name, grade, tname;
    int age, x=0; // x - "counter" to check if user entered wrong name

    system("cls");
    cout << "Enter name of the student you want to erase from database" << endl;
    cin >> tname;

    ifstream students("students.txt");
    ofstream temp("temp.txt"); // temp file for input of every student except the one user wants to delete

    while(students >> name >> grade >> age)
    {
        if(tname!=name){ // if there are students with different name, input their data into temp file
            temp << name << ' ' << grade << ' ' << age << endl;
        }
        if(tname==name){ // if user entered correct name, x=1 for later output message that the user data has been deleted
            x=1;
        }
    }
    students.clear(); // clear eof and fail bits
    students.seekg(0, ios::beg);
    students.close();
    temp.close();
    remove("students.txt"); 
    rename("temp.txt","students.txt");
    if(x==0){ // x was set to 0 at start, so if it didn't change, it means user entered the wrong name
        cout << "There is no student with name you entered." << endl;
    }
    else{ // x is not 0, it means user entered the correct name, print message that students data has been deleted
        cout << "Student data has been deleted." << endl;
    }
} 
```

它可以工作，但问题是我输入了学生数据，当我想通过这个函数删除它时它不会删除它，我首先必须关闭程序然后重新打开程序然后调用该函数以便删除学生数据。

如何更改它，以便在输入后立即删除学生数据，而无需先关闭程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-13T08:11:04.137

找不到学生姓名时它不起作用它只是说学生姓名已删除而不是说没有找到

```
#include <string>
#include <vector>
#include <fstream>
#include <iostream>
using namespace std;

void displaystudentdata()
{
   string name, grade, tname;
    int age, x=0; // x - "counter" to check if user entered wrong name

    system("cls");

    ifstream students("students.txt");

    cout<<"-------------------------------------------------------------------\n\n";
    while(students >> name >> grade >> age)
    {

        cout<<"Name= "<<name <<", Grade= "<< grade <<" , Age= " <<age<<"\n";
    }
    students.clear(); // clear eof and fail bits
    students.seekg(0, ios::beg);
     students.close();
}

void deletestudentdata()
{
    string name, grade, tname;
    int age, x=0; // x - "counter" to check if user entered wrong name

    ifstream students("students.txt");
    ofstream temp("temp.txt"); // temp file for input of every student except the one user wants to delete

    cout<<"-------------------------------------------------------------------\n\n";

    cout << "Enter name of the student you want to erase from database >" << endl;
    cin >> tname;

    //ifstream students("students.txt");
    //ofstream temp("temp.txt"); // temp file for input of every student except the one user wants to delete

    while(students >> name >> grade >> age)
    {
        if(tname!=name){ // if there are students with different name, input their data into temp file
            temp << name << ' ' << grade << ' ' << age << endl;
        }
        if(tname==name){ // if user entered correct name, x=1 for later output message that the user data has been deleted
            x=1;
        }
    }
    students.clear(); // clear eof and fail bits
    students.seekg(0, ios::beg);
    students.close();
    temp.close();
    remove("students.txt"); 
    rename("temp.txt","students.txt");
    if(x==0){ // x was set to 0 at start, so if it didn't change, it means user entered the wrong name
        cout << "There is no student with name you entered." << endl;
    }
    else{ // x is not 0, it means user entered the correct name, print message that students data has been deleted
        cout << "Student data has been deleted." << endl;
    }
}

int main(void)
{

  displaystudentdata();
  deletestudentdata();
  displaystudentdata();
  cout << "Student data has been deleted. \n\n" << endl;
  cout<<" \nPress any key to continue\n";
  cin.ignore();
  cin.get();

   return 0;
} 
```

# java - 声明异常的好处

> ID：15999194
> 
> 赞同：4
> 
> 时间：2013-04-14T12:42:38.207
> 
> 标签：java

如果我有一个名为 Boat 的课程，并且如果我写：

```
class Boat throws Exception 
```

例如，在我的课堂上，我使用 try catch 块来捕获 ArithmeticException。声明异常与不声明异常相比有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T12:51:26.153

*   A`class`不会抛出异常。只有方法可以。

*   对于某些异常（代码中可能出现但您没有捕获的已检查异常），编译器会强制您声明它们。

*   您永远不必声明 RuntimeExceptions（例如 ArithmeticException），但您可以。这用作文档。

*   您可以声明代码不会抛出的已检查异常。如果您以后可能想扔掉它们，这将使其面向未来，并且还允许子类这样做。

*   声明异常时，您可以使用广泛/通用（`throws Exception`甚至`throws Throwable`），但通常最好更具体。这使使用您的代码的人更好地了解预期的内容。拥有这么多特定的异常类的全部目的是为了更容易适当地处理异常（并让编译器强制执行至少有人考虑过这样做的事实）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T13:11:37.983

第一类不会抛出异常，只有方法会抛出

检查这个例子

```
class A 
{
public  A() throws Exception
{
int k=5/0;
}

}

public class B 
{
public static void main(String[] args)
{
A a=new A();
}
} 
```

当你运行上面你会得到编译时错误说

```
Unhandled exception type Exception 
```

因为当任何方法抛出异常时，它们应该通过调用对象来处理，就像说'嘿，有人处理异常'，所以调用它的方法应该处理异常，如果不这样做将是编译时错误.

为了程序的顺利执行，方法抛出的异常应该通过调用方法来处理。这是您需要处理的方式。

```
class A 
{
public  A() throws Exception
{
int k=5/0;
}

}

public class B 
{
public static void main(String[] args)
{
try{
A a=new A();
}
catch(Exception e)
{
System.out.println("caught  "+e);
}

}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T12:50:55.227

如果编译器可以将任何异常确定为“转义”，则声明异常将允许您的程序编译。但是，它的主要目的是向您的方法的用户（以及他们的编译器）记录它可能会引发异常。

因此，声明异常，而不是声明更具体的异常原因，正在抵消该计划的好处——作弊。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-14T12:51:29.450

如果你写这样的东西，

```
double x = 1/0; 
System.out.print("hey"); 
```

它会给你一个例外，你的代码将停止，不会打印**hey**。但是如果你用 封装它`try/catch`，它就不会停止。

```
try{
    double x = 1/0; 
}catch(ArithmeticException){}
System.out.print("hey"); 
```

这将打印**hey**。

# c# - 试图让视图记住 ClientID

> ID：15999195
> 
> 赞同：3
> 
> 时间：2013-04-14T12:42:41.660
> 
> 标签：c#, asp.net, asp.net-mvc, database, methods

我正在制作一个使用 EF 进行简单域名管理的应用程序。它包含数据库中的客户端、域和 TLD 类型。

我创建了允许我在我的数据库中分别创建客户端、域和 TLD 的控制器。我想要实现的是直接在客户页面下添加域的可能性，以避免每次创建新域名时选择 ClientID 并最大限度地减少要在数据库中创建新域名的页面数量。

到目前为止，这是我正在使用的模型：

```
Klient (client model) :

public class Klient
    {
    public int KlientID { get; set; }
    public string Imie { get; set; }
    public string Nazwisko { get; set; }
    public string Firma { get; set; }
    public virtual ICollection<Domena> Domeny { get; set; }
    } 
```

Domena（领域模型）：

```
 public class Domena
{
    public int DomenaID { get; set; }
    public int TLDID { get; set; }
    public int KlientID { get; set; }
    public string Nazwa { get; set; }
    public virtual TLD TLD { get; set; }
    public virtual Klient Klient { get; set; }
} 
```

顶级域名（顶级域名模型）：

```
 public class TLD
{
    public int TLDID { get; set; }
    public string Typ { get; set; }
    public int Cena { get; set; }
    public virtual ICollection<Domena> Domeny { get; set; }
} 
```

允许我创建新域名的控制器方法是：

```
 // GET: /Domena/Create

    public ActionResult Create()
    {
        ViewBag.TLDID = new SelectList(db.TLDs, "TLDID", "Typ");
        ViewBag.KlientID = new SelectList(db.Klienci, "KlientID", "Firma");
        return View();
    }

    //
    // POST: /Domena/Create

    [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Create(Domena domena)
    {
        if (ModelState.IsValid)
        {
            db.Domeny.Add(domena);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.TLDID = new SelectList(db.TLDs, "TLDID", "Typ", domena.TLDID);
        ViewBag.KlientID = new SelectList(db.Klienci, "KlientID", "Imie", domena.KlientID);
        return View(domena);
    } 
```

这就是创建视图的字段集：

```
 <fieldset>
    <legend>Domena</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.TLDID, "TLD")
    </div>
    <div class="editor-field">
        @Html.DropDownList("TLDID", String.Empty)
        @Html.ValidationMessageFor(model => model.TLDID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.KlientID, "Klient")
    </div>
    <div class="editor-field">
        @Html.DropDownList("KlientID", String.Empty)
        @Html.ValidationMessageFor(model => model.KlientID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Nazwa)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Nazwa)
        @Html.ValidationMessageFor(model => model.Nazwa)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

对，我想做的是在 DomenaController（上面的 Create 方法所在的位置）下创建一个名为 Add_Domain 的新方法，并为该 Add_Domain 方法创建一个新视图，这将允许我在当前查看的客户端下创建一个新域名。所以我想运行应用程序并转到 /Clients/Index 单击客户端上的详细信息，假设 ID = 6，所以我现在正在查看 Clients/Details/6。在此页面上，我添加了以下操作链接：

```
@Html.ActionLink("Add Domain", "Add_Domain", "Domena", new { id = Model.KlientID }) 
```

这给了我奇怪的链接：/Klient/Add_Domain?Length=6 而不是：/Domain/Add_Domain/6 但是，当我删除“new {id = Model.KlientID}”位时，它会创建正常链接......

无论如何，如何修改 GET 和 POST httpPost，这样我就不必从列表中选择客户端，并且域名将添加到我单击 Add_Domain 方法的客户端？

编辑：路由配置

```
 public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

编辑2：

链接问题现已修复，非常感谢。问题的另一部分仍然存在：上面描述的新 Add_Domain 方法应该如何（GET 和 POST）？- 它应该采用 KclientID 的值，而不是显示可供选择的客户端列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:59:34.970

您的操作链接使用了不正确的签名：

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,      // "Add Domain"
    string actionName,    // "Add_Domain"
    Object routeValues,   // "Domena"
    Object htmlAttributes // new { id = Model.KlientID }
) 
```

你应该使用[这个](http://msdn.microsoft.com/en-us/library/dd504972%28v=vs.108%29.aspx)：

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    string controllerName,
    Object routeValues,
    Object htmlAttributes
) 
```

例如：

```
@Html.ActionLink(
    "Add Domain",
    "Add_Domain",
    "Domena",
    new { id = Model.KlientID },
    null) 
```

这应该会给你你期望的输出。

# php - 无法计算确切的行数

> ID：15999196
> 
> 赞同：2
> 
> 时间：2013-04-14T12:42:44.003
> 
> 标签：php, mysql, codeigniter

我编写了一个模型代码，我将在其中加入两个表，并返回我的结果。

`answer`从下表结构中，我的模型代码仅显示 2 个问题计数，跳过最后一个问题，经过少量研究，我发现它不计算我的第三个问题的原因是因为它在我的表中没有任何答案。

我想，如果没有答案，那么它应该为特定问题显示 count=0，如何解决这个问题？

表结构

```
question
-----------
question_id PK Auto_Incr  
question    varchar... 
votes       int

answer
------------
answer_id    PK  Auto_icre
question_id  FK refrences question  
content      longtext 
```

* * *

表数据结构数据：

```
 question
-----------
 question_id    question          votes
    1           what's name?       0
    2           where you?         3
    3           blah blah          9 

answer 
----------
 answer_id      question_id        content
    4              2                 India
    5              2                 Nepal
    6              2                 Pakistan
    7              1                 Mr Osama Binladan 
```

* * *

模型

```
public function fetch_allquestions($limit, $start) 
{
    $this->load->database(); 
    $this->db->limit($limit, $start);   
    $this->db->from('question');
    $select =array(
                   'question.*',
                   'userdetails.*',
                   'COUNT(answer.answer_id) AS `Answers`'
                  );

    $this->db->select($select);

    $this->db->join('answer','answer.question_id = question.question_id'); 
    $this->db->join('userdetails','userdetails.user_id = question.user_id'); 
    $query = $this->db->get();

    print_r("Number of rows=".$query->num_rows());//showing only One, out of 26 rows

    if ($query->num_rows() > 0)
    {
        foreach ($query->result() as $row)
        {
            $data[] = $row;
        }
        return $data;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:54:40.507

您需要的是 a [`LEFT JOIN`](http://en.wikipedia.org/wiki/Join_(SQL)#Left_outer_joins)，这基本上意味着如果第一个提到的表中有一行存在，则不需要提到的第二个表中的相应行。在您的情况下，如果有问题，即使没有匹配的答案也会返回。

要在 codeigniter 中进行左连接，您只需将“左”作为第三个参数传递给您的调用`join`；

```
$this->db->join('answer','answer.question_id = question.question_id', 'left'); 
```

[CodeIgniter 文档](http://ellislab.com/codeigniter/user-guide/database/active_record.html)中提供了有关加入呼叫的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:54:41.873

你应该使用左连接

```
$this->db->join('answer','answer.question_id = question.question_id','LEFT'); 
```

# caching - Chartboost：缓存一次或每次

> ID：15999202
> 
> 赞同：0
> 
> 时间：2013-04-14T12:44:11.497
> 
> 标签：caching, ads, chartboost

在这个 [文档](https://s3.amazonaws.com/chartboost/docs/ChartboostSetupGuide.pdf)中它说：“缓存的插页式广告在显示后会从内存中删除。如果您计划为特定位置显示另一个插页式广告，则应再次缓存该位置”

**第 3 页 / 缓存**

但是在我遇到的每个示例中，缓存只有一次，即使在 chartboost[示例项目中也是如此](https://github.com/ChartBoost/client-examples/tree/master/iOS/ChartboostExample)

**所以问题是：**我应该`[cb cacheInterstitial:@"Pause screen"];`在开始时只使用一次，还是应该在展示缓存广告的时候多次使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T07:57:12.000

显示缓存的广告绝对是最好的用户体验，所以我建议每次都这样做！

如果您查看`- (void)didDismissInterstitial:(NSString *)location`示例项目中的方法，您会发现它们再次缓存。

每次单击或关闭插页式广告时都会触发此委托方法，因此`cacheInterstitial:location`在此处添加将立即为该位置重新缓存插页式广告！

初始化 cb 对象后不要忘记添加`cb.delegate = self;`，以确保委托方法正常工作。

全面披露：我为 Chartboost 工作。

# python - 从字符串到 int Python 的高级解析

> ID：15999206
> 
> 赞同：-1
> 
> 时间：2013-04-14T12:45:03.983
> 
> 标签：python, parsing, python-2.7

我需要从 wikipedia.org 获取一些数据。我有字符串 a = '4 200 000+ 文章' ，我需要得到 int b = 4200000。我已经通过 BS4 得到了这个字符串，并且我尝试通过 int(a) 进行简单解析，但很明显这不起作用。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:49:29.683

您需要一个正则表达式来从这样的文本中获取数字：

```
import re

int_numbers = re.compile('\d[\d ]*')

def extract_integer(text):
    value_match = int_numbers.search(text)
    if value_match:
        try:
            return int(value_match.group().replace(' ', ''))
        except ValueError:
            # failed to create an int, ignore
            pass 
```

该模式匹配一​​个数字，后跟 0 个或更多数字或空格。

演示：

```
>>> a = '4 200 000+ articles'
>>> extract_integer(a)
4200000 
```

如果您需要输入文本中的*所有*`.finditer()`这些数字，请使用和生成器：

```
def extract_integers(text):
    for value_match in int_numbers.finditer(text):
        try:
            yield int(value_match.group().replace(' ', ''))
        except ValueError:
            # failed to create an int, ignore
            pass 
```

演示：

```
>>> for i in extract_integers('4 300 123 times 42'):
...     print i
...
4300123
42
>>> list(extract_integers('4 300 123 times 42'))
[4300123, 42] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:51:25.810

如果您只想删除除数字之外的所有内容，则可以使用以下内容：

```
>>> x = "500000+"
>>> import string
>>> all=string.maketrans('','')
>>> nodigs=all.translate(all, string.digits)
>>> x.translate(all, nodigs) 
```

这将从字符串中删除除数字 0-9 之外的所有字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T12:51:59.803

```
>>> import re 
>>> a = re.findall(r'[\d ]+',  '4 200 000+ articles' )
>>> print a
['4 200 000', ' ']
>>> [x.replace(' ','') for x in a if x.strip()]
['4200000'] 
```

# haskell - Haskell 中的纸、石头和剪刀

> ID：15999209
> 
> 赞同：1
> 
> 时间：2013-04-14T12:45:37.520
> 
> 标签：haskell, parse-error

下面的代码被编程来决定 Haskell 中纸石头和剪刀的结果，但是终端给出错误

```
data Move = Paper | Rock | Scissors  
 deriving (Eq, Show)
data Result = Win | Draw | Loose 
  deriving (Eq, Show)

beats :: Move -> Move
beats move = case move of 
  Paper -> Scissors
  Rock  -> Paper
  Scissors -> Rock

score :: Move -> Move -> Result
score this_move opposing_move
  | this_move == beats opposing_move = Win
  | this_move == opposing_move       = Draw
  | otherwise = Loose 
```

这是来自终端的错误消息

```
[1 of 1] Compiling Main             ( test.hs, interpreted )

test.hs:1:60: parse error on input `data'
Failed, modules loaded: none. 
```

谁喜欢告诉我它有什么问题？谢谢XD

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T12:53:38.830

您的代码格式正确，我可以将其加载到 ghci 中而无需任何修改。
解析错误取决于您的文本编辑器如何管理空间和选项卡。
你应该更多地调查你的编辑器配置，而不是你的基本代码的正确性。

* * *

使用这段代码重新格式化您的文件。

```
$ cd /to/your/code.hs
$ ghci 
```

和写，

```
ghci >let f = readFile "code.hs"
ghci >do {reencoded <- fmap (filter (/= '\r')) f; writeFile "ncode.hs" reencoded} 
```

然后重新编译代码。
让我知道它是否解决了问题。

如前所述，这还不够，但是如果您将此指令输入到 ghci 中。

```
ghci > readFile "code.hs"
-- print something 
```

你向我们展示了原始结果，也许它会有所帮助。

# opengl - common.h：没有这样的文件或目录：Ubuntu

> ID：15999210
> 
> 赞同：-4
> 
> 时间：2013-04-14T12:45:42.127
> 
> 标签：opengl, ubuntu, graphics

我正在尝试编译一个程序（在 OpenGL 中）`Ubuntu`，但我收到此错误

```
fatal error: common.h: No such file or directory 
```

我不确定我需要为此安装哪个软件包。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T20:10:05.117

`common.h`不是任何软件包的一部分。我怀疑您从某个项目或作为整个程序集的一部分的教程中提取了代码。并且`common.h`是所有这些项目共有的标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-19T06:06:47.113

如果您到达此页面，可能是因为您浏览了“操作系统简介”一书，并试图直接复制介绍章节中的代码并进行编译。至少，这就是我最终来到这里的原因。这不起作用，并且会抛出上述错误。

最好[直接](http://pages.cs.wisc.edu/~remzi/OSTEP/)从源代码下载代码并编译它们给你的东西。享受！

# prolog - 列表组合开始

> ID：15999213
> 
> 赞同：0
> 
> 时间：2013-04-14T12:46:07.673
> 
> 标签：prolog

我从这个页面复制了这段代码：

```
% combination(K,L,C) :- C is a list of K distinct elements 
%    chosen from the list L
combination(0,_,[]).
combination(K,L,[X|Xs]) :- K > 0,
   el(X,L,R), K1 is K-1, combination(K1,R,Xs).

el(X,[X|L],L).
el(X,[_|L],R) :- el(X,L,R). 
```

例如，如果输入composition(2,[1,2,3,4],L)，则结果为：

```
L = [1, 2] ;
L = [1, 3] ;
L = [1, 4] ;
L = [2, 3] ;
L = [2, 4] ;
L = [3, 4] ; 
```

现在我想输入一些内容，使您可以从组合的确定点开始。例如，类似：combination(2,[1,2,3,4],[1,4],L)，结果：

```
L = [1, 4] ;
L = [2, 3] ;
L = [2, 4] ;
L = [3, 4] ; 
```

从 [1,4] 开始组合并跳过“步骤”[1,2] 和 [1,3]。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:11:26.193

尝试这个

```
combination(0,_,[]).
combination(K,L,[X|Xs]) :- 
    K > 0,
    el(X,L,R), 
    K1 is K-1, 
    combination(K1,R,Xs).

generate(K, L, X, Pivot, Resault) :-
    bagof(X, L^combination(K, L, X), Bag),
    iterate(Bag, Pivot, Resault).

iterate([], _, []).
iterate([P|T], P, [P|T]):-!.
iterate([H|T], P, Res) :-
    iterate(T, P, Res).

el(X,[X|L],L).
el(X,[_|L],R) :- el(X,L,R). 
```

像这样使用`generate/5`：

```
| ?- generate(2, [1,2,3,4], X, [1,4], Res).

Res = [[1,4],[2,3],[2,4],[3,4]]
yes. 
```

首先我将所有解决方案收集在一个袋子中，然后遍历袋子以找到一个枢轴成员，如果找到它，则结果是一个列表，其中枢轴作为头部，其余的解决方案作为尾部。如果我不这样做，则结果是一个空列表。

不是一个非常明智的解决方案，但有效。

# java - 凯撒的盒子加密/解密程序

> ID：15999221
> 
> 赞同：2
> 
> 时间：2013-04-14T12:46:58.957
> 
> 标签：java

对于任何不知道的人来说，这是[凯撒的盒子加密](http://heap.joshdick.net/caesarbox)

```
public class CaesarBox {

public static void main(String[] args) {
    // CaesarsBox <-encrypt|-decrypt>
    if (args[0].equals("-encrypt")) {
        System.out.println(encrypt(args[1]));
    } else if (args[0].equals("-decrypt")) {
        System.out.println(decrypt(args[1]));
    }
}

public static String encrypt(String plaintext) {
    // TODO put encryption code below this line
    plaintext = plaintext.replaceAll("\\s+", "");// removes white space
    plaintext = plaintext.toLowerCase();// converts capitol letters to lower
    // case

    char[] charArray = plaintext.toCharArray();
    // takes individual characters from the arguments and puts them into an
    // array

    int x = charArray.length; // assigns the length of charArray to x
    int y = 0;
    while (y < x) {
        ++y;
        if ((y == Math.floor(y)) && y * y >= x) {
        // tests if y is an integer
        // increases y until it is an integer
            break;
        }// above code finds the the length of the sides of the box
    }
    char[][] box = new char[y][y];// creates a 2d array
    int pos = 0;
    for (int i = 0; i < box.length; i++) {
        for (int j = 0; j < box[i].length; j++) {
            if (pos < plaintext.length()) {
                box[i][j] = plaintext.charAt(pos);
                pos++;
            // fills the array with the characters from the text to be
            // encrypted
            }
        } 
    }
    String encrypted = "";
    for (int i = 0; i < box.length; i++) {
        for (int j = 0; j < box.length; j++) {
            if (box[j][i] != 0) {// tells the program to ignore null values
                encrypted += box[j][i];
            }
            // prints out the letters in the box by column
        }

    }
    return encrypted;

// Put encryption code above this line

}

public static String decrypt(String cyphertext) {
    // TODO put decryption code below this line
    cyphertext = cyphertext.replaceAll("\\s+", "");// removes white space
    cyphertext = cyphertext.toLowerCase();// converts capitol letters to lower case

    char[] charArray = cyphertext.toCharArray();
    // takes individual characters from the arguments and puts them into an
    // array

    int x = charArray.length; // assigns the length of charArray to x
    int y = 0;
   while (y < x) {
        ++y;
        if ((y == Math.floor(y)) && y * y >= x) {
            // tests if y is an integer
            // increases y until it is an integer
            break;
        }// above code finds the the length of the sides of the box
    }
    char[][] box = new char[y][y];// creates a 2d array
    int pos = 0;
    for (int i = 0; i < box.length; i++) {
        for (int j = 0; j < box[i].length; j++) {
            if (pos < cyphertext.length()) {
                box[i][j] = cyphertext.charAt(pos);
                pos++;
            }
        }
        // fills the array with the characters from the text to be
        // encrypted
    }
    String decrypted = "";
    for (int i = 0; i < box.length; i++) {
        for (int j = 0; j < box[i].length; j++) {
            if (box[j][i] != 0) {// tells the program to ignore null values
                decrypted += box[j][i];
                // prints out the letters in the box by column
            }

        }
    }

    return decrypted;
    // Put decryption code above this line
    }

} 
```

到目前为止，这是我的代码，我遇到的问题是解密不是完美正方形的东西，例如“javanoob 需要帮助”被加密为 joelaodpvbsanhnee，但被解密为 joseodaeepnlvhabn，这显然是不正确的。我知道解决方案是在正确的位置将空格放入数组中，但我不知道该怎么做，任何帮助都会很棒！:) 如果您需要我解释任何事情，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:55:06.433

由于这条线，您正在失去空间：

```
plaintext = plaintext.replaceAll("\\s+", ""); // removes white space 
```

您可能想要做的是从末端修剪空格而不是所有空格：

```
plaintext = plaintext.trim(); // Removes white space on ends. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:53:56.447

对于我发现的凯撒盒子，字符总数的总和必须是一个完美的正方形。如果您在代码中尝试使用 25 个字符的消息，它可以正常工作：

```
The password is Bee ring twice 
```

编码消息：

```
tsdethsirwewsiipobncarege 
```

解码消息：

```
thepasswordisbeeringtwice 
```

为了将消息放大到完美的字符数，您可以在框的空白处添加一个字符，例如：

```
for (int i = 0; i < box.length; i++) 
{
    for (int j = 0; j < box[i].length; j++) 
    {
        if (pos < plaintext.length()) 
        {
            box[i][j] = plaintext.charAt(pos);
            pos++;
        // fills the array with the characters from the text to be
        // encrypted
        }
        else 
            box[i][j] = 0;
    }
} 
```

并修改 encriptes 字符串的构造，允许包含 0：

```
 for (int i = 0; i < box.length; i++) 
{
    for (int j = 0; j < box.length; j++) 
    { 
            encrypted += box[j][i];
        // prints out the letters in the box by column
    }

} 
```

# regex - Notepad++ - 如何使用正则表达式查找和替换

> ID：15999224
> 
> 赞同：1
> 
> 时间：2013-04-14T12:47:27.710
> 
> 标签：regex, notepad++

我正在尝试在记事本++中查找和替换。例如我想替换

```
border-radius: 2px 3px 2px; 
```

我正在使用此代码查找：

```
border-radius: ([^A-Za-z]*); 
```

但是我的表达式只搜索这种类型的代码（只有一个半径值）：

```
border-radius:2px; 
```

请告诉我如何找到：

```
border-radius: **** ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:52:50.613

如果你想找到`border-radius:`任何东西，只需放松你的约束：

```
border-radius:(.*?); 
```

`.`表示任何字符。表示它们中的`*`任意数量。但是`?`限制到最小匹配可能，这意味着它在第一个停止`;`（否则模式将匹配整行，如果行上有多个规则）。

# java - 将图像添加到 JLabel 时如何使用 int 和 string

> ID：15999234
> 
> 赞同：0
> 
> 时间：2013-04-14T12:49:10.590
> 
> 标签：java, string, swing, int, jlabel

我试图在定义这样的 URI 时添加一个 int 和字符串：

```
Line 38    Icon iconpic = new ImageIcon(getClass().getResource("img/CM"+a+".png"));   
Line 39    JLabel pic = new JLabel(iconpic); 
```

其中“a”是一个整数。

但是我明白了：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(ImageIcon.java:205)
    at thebutton.CM.<init>(CM.java:38) 
```

我也试过这个：

```
 String c = Integer.toString(a);
    String d = "img/CM";
    String e = ".png";
    String g = d+a+e; 
    System.out.println(g);
    System.out.println(getClass().getResource(g));
    Icon iconpic = new ImageIcon(getClass().getResource(g));   
    JLabel pic = new JLabel(iconpic); 
```

得到了这个

```
img/CM0.png
null
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException 
```

前 2 行是 .println 的输出 这是 NetBeans 中项目的图片：

![在此处输入图像描述](https://i.stack.imgur.com/GlRMk.jpg)

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:51:54.680

这意味着可能`getClass().getResource("img/CM"+a+".png")`返回`null`。试试调试`getClass().getResource("img/CM"+a+".png")`，比如放个a `System.out.println(getClass().getResource("img/CM"+a+".png"))`看看值。

请检查路径是否正确。

这是[Javadocs](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResource%28java.lang.String%29)的链接。

`img`在您的文件夹下创建一个文件`source`夹，并将命名它的图像放在其中的任何`"CM"+a+".png"`计算结果中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:11:11.623

在`Projects`选项卡中右键单击您的项目名称，然后选择`new`-> `Folder`。作为文件夹名称使用`"images"`

![在此处输入图像描述](https://i.stack.imgur.com/kKCBx.png)

现在转到`Files`选项卡并将图像移动到此文件夹

![在此处输入图像描述](https://i.stack.imgur.com/KDZBv.png)

* * *

现在加载您的图像

```
new ImageIcon("images/yourImageName.png") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T07:50:33.473

不要让 Java 寻找不存在的图像；CM0.png 不存在！

归功于 atamanroman 和 pshemo

# .htaccess - URL 重写 - 不是来自 .htaccess - Magento

> ID：15999245
> 
> 赞同：1
> 
> 时间：2013-04-14T12:51:00.753
> 
> 标签：.htaccess, magento, url, mod-rewrite, url-rewriting

寻找一些帮助，最终绕着圈子试图了解问题可能出在哪里。

我们最近在 www.domain.com 上有了我们的 magento 端，它将通过重写规则购物：“domain.com/”

这是正确的。

然而，由于我们的目标是英国市场，该网站相对较新，我们决定购买 .co.uk 域名并进行转换。使它成为 www.domain.co.uk，这在 magento 数据库/后端中都已正确更改，但现在开始显示：“domain.co.uk”

最后缺少正斜杠。

我已经在 mysql 数据库中确认该 URL 有一个斜杠，甚至从 .htacess 中关闭了 mod_rewrite，但仍然存在从某处发生的重写。

自从我在上一个站点上设置它以删除“http://”并添加正斜杠以来，这似乎永远不会发生，但我不记得我是如何设置的或在哪里设置的。

如果有人能指出我正确的方向，将不胜感激。

亲切的问候

编辑：下面是重写的代码：

```
<IfModule mod_rewrite.c>

############################################
## enable rewrites

    Options +FollowSymLinks
    RewriteEngine on

############################################
## you can put here your magento root folder
## path relative to web root

    RewriteBase /

############################################
## uncomment next line to enable light API calls processing

#    RewriteRule ^api/([a-z][0-9a-z_]+)/?$ api.php?type=$1 [QSA,L]

############################################
## rewrite API2 calls to api.php (by now it is REST only)

    RewriteRule ^api/rest api.php?type=rest [QSA,L]

############################################
## workaround for HTTP authorization
## in CGI environment

    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

############################################
## TRACE and TRACK HTTP methods disabled to prevent XSS attacks

    RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
    RewriteRule .* - [L,R=405]

############################################
## redirect for mobile user agents

    #RewriteCond %{REQUEST_URI} !^/mobiledirectoryhere/.*$
    #RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
    #RewriteRule ^(.*)$ /mobiledirectoryhere/ [L,R=302]

############################################
## always send 404 on missing files in these folders

    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

############################################
## never rewrite for existing files, directories and links

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

############################################
## rewrite everything else to index.php

    RewriteRule .* index.php [L]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:35:00.963

确保更新 core_config_data 表中 web/unsecure/base_url 和 web/secure/base_url 的所有实例，我建议在此表中搜索所有值，例如 %domain.co.uk%。还要删除缓存文件夹，因为使用管理员清除缓存按钮未完全删除某些配置值。

你确定有一个实际的重定向发生吗？尝试使用此站点[http://redirectcheck.com](http://redirectcheck.com)来查看您是否真的被重定向。某些浏览器不会显示 http:// 或尾随 /，因此它可能不是实际问题。

如果您需要将非 www 重定向到 www，则将以下行添加到您的 .htaccess 文件中的“RewriteEngine on”下方

```
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

# android - 在列表视图中隐藏行

> ID：15999257
> 
> 赞同：0
> 
> 时间：2013-04-14T12:52:53.107
> 
> 标签：android, listview, hide, element

我有适配器。不幸的是，这个解决方案不好，因为列表是空的，可以滚动区域，如何防止呢？

此代码适配器：

```
@Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
                ViewHolder viewHolder;
                View rowView = convertView;
                int NumberOfWords = GetNumberOfWords(position);

                if(rowView == null)
                {
                        rowView = inflater.inflate(R.layout.adapter_list, parent, false);
                        viewHolder = new ViewHolder();
                        viewHolder.MainText = (TextView)rowView.findViewById(R.id.MainText);
                        viewHolder.ItemText = (TextView)rowView.findViewById(R.id.ItemText);
                        viewHolder.Selection = (CheckedTextView)rowView.findViewById(R.id.DictionaryCheck);
                        rowView.setTag(viewHolder);
                }
                else
                {
                        viewHolder = (ViewHolder) rowView.getTag();
                }

                if(NumberOfWords == 0)
                {
                        rowView.setVisibility(View.GONE);
                }
                else
                {
                        rowView.setVisibility(View.VISIBLE);
                        viewHolder.MainText.setText(values[position]);
                        viewHolder.ItemText.setText("Zawiera słów : " + NumberOfWords);
                        viewHolder.Selection.setVisibility(View.VISIBLE);
                        viewHolder.Selection.setChecked(IsInSelected(position));
                }
                return rowView;
        } 
```

# c++ - 从模板派生的模板化

> ID：15999258
> 
> 赞同：2
> 
> 时间：2013-04-14T12:52:54.730
> 
> 标签：c++, templates

给定两个非常相似但行为不同的模板类：

```
template<class T>
firstBase {};

template<class T>
secondBase {}; 
```

现在我有了另一个类，它基于它的模板参数，将派生自`firstBase`或派生自`secondBase`：

```
template<class B, class T>
myClass : public B<T> { /* T is used in here */ }; 
```

好吧，那是行不通的。编译器告诉我这`B`是一个未知的模板名称。( `error: unknown template name 'B'`)

我目前的解决方法是定义`myClass`为

```
template<class B, class T>
myClass : public B { /* T is used in here */ }; 
```

并且调用者`myClass`需要通过`myClass<b<t>, t>`而不是`myClass<b, t>`.

后者会非常好，并减少一些复制和粘贴代码。有没有其他方法可以实现这一目标？

* * *

*在我的用例中，我正在尝试`deep_const_ptr`为 pimpl idiom 实现一个启用“true constness”的方法。根据是否`myClass`需要可复制分配，它要么使用`deep_const_ptr<std::shared_ptr>`要么`deep_const_ptr<std::unique_ptr>`用于其私有指针。*

```
#include <memory>
#include <iostream>

template<class pointerT, class typeT>
class deep_const_ptr : public pointerT
{
  public:
    explicit deep_const_ptr(typeT* ptr) : pointerT(ptr) { }

    // overloading pointerT::operator->() for non-constant access
    typeT* operator->() {
      std::cout << "deep_const_ptr::operator->()" << std::endl;
      return pointerT::operator->();
    }

    // overloading pointerT::operator->() for constant access
    const typeT* operator->() const {
      std::cout << "deep_const_ptr::operator->() const" << std::endl;
      return pointerT::operator->();
    }
}; 
```

* * *

**编辑因此，正如**[Luc Danton 在他的回答中](https://stackoverflow.com/a/15999442/588243)
所建议的那样，我最终通过或传递给我的习惯：`std::unique_ptr<myClass::Private>``std::shared_ptr<myClass::Private>``deep_const_ptr`

```
template<typename pointerTypeT>
class deep_const_ptr : public pointerTypeT {
  explicit deep_const_ptr(typename pointerTypeT::element_type* ptr) : pointerTypeT(ptr);
  typename pointerTypeT::element_type* operator->();
  const typename pointerTypeT::element_type* operator->() const;
};

deep_const_ptr<std::unique_ptr<Test::Private>> d_unique;
deep_const_ptr<std::shared_ptr<Test::Private>> d_shared; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:55:47.053

你想要的是[***模板模板参数***](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Ftemplate_template_arguments.htm)：

```
//       vvvvvvvvvvvvvvvvvv
template<template<typename> class B, class T>
class myClass : public B<T> { /* T is used in here */ }; 
```

然后，像这样使用：

```
myClass<firstBase,int> myIntClassObject;
myClass<secondBase,bool> myBoolClassObject; 
```

对于`std::unique_ptr`，您可以制作一个包装器：

```
template<typename T>
class uniquePtr : public std::unique_ptr<T>
{
}; 
```

或者

```
template<typename T>
using uniquePtr = std::unique_ptr<T>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:12:56.047

我一般建议不要使用模板模板参数。例如`std::unique_ptr`和`std::shared_ptr`不同之处在于前者接受*两个*类型参数，而后者只接受*一个*。因此，如果您声明 eg `template<template<typename> class B, typename T> class foo;`then`foo<std::shared_ptr, int>`是有效的，但`foo<std::unique_ptr, int>`不是。

在您的特定情况下，您可以将`template<typename...> class B`其用作参数，因为这种模板模板参数很特殊。尽管如此，这只会接受只接受类型参数的模板（甚至不接受模板模板参数）。有时这可以使用别名模板来解决，有时则不能。

根据我的经验，有更好的选择——例如，您可以有条件地继承：

```
template<typename T>
struct pointer: std::conditional</* Make a choice here*/, std::unique_ptr<T>, std::shared_ptr<T>>::type {}; 
```

或者为什么不直接接受智能指针作为参数本身：

```
template<typename Pointer>
struct foo {
    Pointer pointer;
    /* typename Pointer::element_type plays the role that T used to have */
}; 
```

* * *

标准库本身采取了一些措施来避免模板模板参数：你有没有注意到 an`std::vector<T>`用作`std::allocator<T>`参数，而不是`std::allocator`？作为权衡，这意味着分配器必须提供`rebind`成员别名模板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T12:55:32.380

您只需使用[*模板模板参数*](http://www.informit.com/articles/article.aspx?p=376878)即可使其工作：

```
template <
    template <class> class B, class T>
//  ^^^^^^^^^^^^^^^^
class myClass : public B<T> { / ... / }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T12:55:57.567

看来您需要的是**模板模板参数：**

```
template<template<class> class B, class T>
//       ^^^^^^^^^^^^^^^
class myClass : public B<T> { /* T is used in here */ }; 
```

现在`myClass`类模板的第一个模板参数*本身必须是一个*接受一个模板（类型）参数的类模板。所以，把所有东西放在一起：

```
template<class T>
class firstBase {};

template<class T>
class secondBase {};

template<template<class> class B, class T>
class myClass : public B<T> { /* T is used in here */ }; 
```

以下是您将如何实例化您的`myclass`模板以创建一个派生自的类`firstBase<int>`：

```
myClass<firstBase, int> obj; 
```

最后，这是一个[活生生的例子](http://liveworkspace.org/code/3kW04t%24331)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-14T12:55:21.113

`B`应该是模板模板参数：

```
template<template <class> class B, class T>
class myClass : public B<T> { /* T is used in here */ }; 
```

现在您可以给出`firstBase`或`secondBase`作为第一个模板参数，因为它们是模板。

# mysql - mysql 在 group_concat 中查询分组

> ID：15999261
> 
> 赞同：3
> 
> 时间：2013-04-14T12:53:30.540
> 
> 标签：mysql, sql

我有以下查询：

```
SELECT files.file_name, files.locked, projects.project_name, 
group_concat( versions.version, versions.language SEPARATOR ' & ')
FROM    files
JOIN `projects` ON (files.project_id = projects.project_id) 
JOIN `versions` ON (files.file_id = versions.file_id)
WHERE   files.file_id = '1'
ORDER BY projects.project_name ASC 
```

这给了我这张桌子：

```
filename - 1 - projectname - 0.1EN & 0.2FR & 0.3DE & 0.1IT 
```

我想要的是输出如下内容的查询：

```
filename - 1 - projectname - 0.1-EN,IT & 0.2-FR & 0.3-DE 
```

所以我尝试了这个：

```
group_concat( versions.version, versions.language GROUP BY versions.version SEPARATOR ' & ') 
```

但mysql不喜欢那样。我怎样才能得到我想要的结果？谢谢。

编辑：样本表！ ![文件表](https://i.stack.imgur.com/jHrOJ.jpg) ![项目表](https://i.stack.imgur.com/SBr0i.jpg) ![版本表](https://i.stack.imgur.com/6xkTw.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:09:14.807

试试这个，

```
SELECT  a.file_name,
        a.locked,
        b.project_name,
        GROUP_CONCAT(c.version, c.language SEPARATOR ' & ')
FROM    files a
        INNER JOIN projects b
            ON a.project_id = b.project_ID
        INNER JOIN
        (
            SELECT  file_ID, `version`, GROUP_CONCAT(language) language
            FROM    versions
            GROUP   BY file_ID, `version`
        ) c ON  a.file_ID = c.file_ID
WHERE   a.file_ID = 1
GROUP   BY  a.file_name,
            a.locked,
            b.project_name 
```

# sql-server - 读取 DONE_IN_PROC

> ID：15999270
> 
> 赞同：3
> 
> 时间：2013-04-14T12:54:40.533
> 
> 标签：sql-server

如果我理解正确，存储过程结果也会返回一条名为[DONE_IN_PROC的消息](http://msdn.microsoft.com/en-us/library/dd340553.aspx)

> 来自 MSDN 的片段：
> 
> ... SET NOCOUNT ON 消除了为存储过程中的每个语句向客户端发送 DONE_IN_PROC 消息。

在执行存储过程并读取受影响的行数后，有没有办法在 Management Studio 中以某种方式访问​​此消息。

（我是出于好奇而询问，我知道还有其他方法可以影响行数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-18T21:51:24.230

某些（如果不是全部）数据库 API 使 TDS 层的 DONE_IN_PROC 消息可访问。如果 ODBC 是所选的数据库 API，请参阅 [http://technet.microsoft.com/en-us/library/ms130812.aspx](http://technet.microsoft.com/en-us/library/ms130812.aspx)关于 SQLRowCount、SQLGetStmtAttr 和 NOCOUNT 的讨论。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-16T02:39:46.847

派对迟到了，但你只是在消息的 int 之后？

```
create proc delme as
begin
    select * from sys.databases
end
go

set nocount on
go    

exec delme  --returns "(7 row(s) affected)" on the message channel
select @@ROWCOUNT  --returns 7 
```

# c++ - 如何将 ASCII 字符转换为其 ASCII int 值？

> ID：15999272
> 
> 赞同：12
> 
> 时间：2013-04-14T12:54:50.233
> 
> 标签：c++, arduino

我想将 char 转换为其[ASCII](http://en.wikipedia.org/wiki/ASCII) int 值。

我可以用所有可能的值填充一个数组并与之进行比较，但这对我来说似乎不合适。我想要类似的东西

```
char mychar = "k"
public int ASCItranslate(char c)
return c   

ASCItranslate(k) // >> Should return 107 as that is the ASCII value of 'k'. 
```

这一点`atoi()`在这里不起作用，因为它仅适用于可读数字。

它不会对空格做任何事情（ASCII 32）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-14T12:57:07.913

只需这样做：

```
int(k) 
```

您只是在这里直接将 char 转换为 int，不需要函数调用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-14T12:58:02.603

A`char`已经是一个数字。它不需要任何转换，因为 ASCII 只是从数字到字符表示的映射。

如果您愿意，可以直接将其用作数字，也可以强制转换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-14T13:01:30.233

在 C++ 中，您还可以使用`static_cast<int>(k)`显式转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T13:07:39.207

做这个：-

```
char mychar = 'k';
//and then
int k = (int)mychar; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-27T07:12:01.223

要将**ASCII 字符**转换为它的**ASCII 值**：

```
 char c='A';
    cout<<int(c); 
```

要将**ASCII 值**转换为它的**ASCII 字符**：

```
int a=67;
  cout<<char(a); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-14T20:05:51.500

```
#include <iostream>

char mychar = 'k';
int ASCIItranslate(char ch) {
    return ch;
}

int main() {
    std::cout << ASCIItranslage(mychar);
    return 0;
} 
```

这是您修复了各种语法错误的原始代码。假设您使用的是使用 ASCII 的编译器（现在几乎每一个），它都可以工作。为什么你认为这是错误的？

# jsf - 部署后我无法访问我的简单 jsf 项目

> ID：15999273
> 
> 赞同：1
> 
> 时间：2013-04-14T12:55:02.367
> 
> 标签：jsf, tomcat, deployment, http-status-code-404

我不明白为什么在尝试访问我的应用程序时出现 404 错误

我的 index.xhtml 在（网页内容）

在我的日志中，我没有错误我使用 eclipse 创建了我的项目：web 动态项目：

我的网址：

```
http://localhost:8080/jsf_getting_started/ 
```

我尝试使用 eclipse 和 tomcat（在服务器上运行）。

我的网络 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
id="WebApp_ID" version="3.0">
<display-name>jsf_getting_started</display-name>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
</welcome-file-list>
<context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
</context-param>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
<context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
</context-param>
<context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
</context-param>
<listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
</listener> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:52:42.637

问题是您已经设置了 Faces Servlet 的映射，`/faces/*`以便访问您的页面并被此 servlet 解析，您必须像这样访问它

```
http://localhost:8080/jsf_getting_started/faces/index.xhtml 
```

但是`/faces/*`配置的问题是 Faces Servlet 甚至会处理非 JSF 资源，如图像、JS、CSS 脚本等。

最好的解决方案是将映射更改为`*.xhtml`并删除欢迎文件列表中的所有页面，使其仅具有`index.xhtml`. 您的 web.xml 文件将如下所示（请注意，我只是发布对此答案中描述的部分所做的更改）：

```
<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
    <!-- no need of the other files... -->
</welcome-file-list>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <!-- The relevant URL mapping when using Facelets and JSF -->
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

更改 web.xml 文件后，重新构建您的项目，确保从 Tomcat 服务器取消部署，然后重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T12:58:53.700

您需要`index.xhtml`在`welcome-file-list`.

# c# - XAML 如何在派生的 UserControl 类中拥有 StaticResource

> ID：15999277
> 
> 赞同：2
> 
> 时间：2013-04-14T12:55:23.777
> 
> 标签：c#, wpf, visual-studio-2010, xaml, styles

我有以下问题。我有一个派生自 UserControl 的类，代码如下：

```
public partial class MyUC : UserControl
{
[...]
    public bool IsFlying { get { return true; } }
[...]
} 
```

我想使用为 MyUC 类创建的样式，下面是样式代码。它位于 App.Xaml 中：

```
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:dc="clr-namespace:MyNamespace"
<Application.Resources>
    <Style x:Key="mystyle" TargetType="dc:MyUC ">
        <Style.Triggers>
            <Trigger Property="IsFlying" Value="true">
                <Setter Property = "Background" Value="Blue"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</Application.Resources> 
```

如您所见，我想使用我在 MyUC 中声明的属性。问题是当我尝试向控件添加样式时，会发生错误。

```
<UserControl x:Class="MyNamespace.MyUC"
         [...]
         Style="{StaticResource mystyle}"> 
<UserControl.Resources>
</UserControl.Resources>
</UserControl> 
```

错误是：**“MyUC”TargetType 与元素“UserControl”的类型不匹配。**

据我了解，编译器无法识别从 UserControl 派生的 MyUC 类。如何解决？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:06:56.780

错误可能仅在`design`time 出现，它应该在`runtime`. 运行您的应用程序，看看它是否适合您。

此外，您的触发器不起作用`normal CLR property`，您需要将其设为`Dependency Property`-

```
 public bool IsFlying
    {
        get { return (bool)GetValue(IsFlyingProperty); }
        set { SetValue(IsFlyingProperty, value); }
    }

    public static readonly DependencyProperty IsFlyingProperty =
        DependencyProperty.Register("IsFlying", typeof(bool), 
           typeof(SampleUserControl), new UIPropertyMetadata(true)); 
```

此外，您可以`x:Key="mystyle"`从样式声明中删除 。它将自动应用于您的 UserControl。

这样您就不必在 UserControl 上显式设置样式。然后不需要这条线 -`Style="{StaticResource mystyle}"`

# css - CSS3：如何将中间 DIV 设置为最大高度？

> ID：15999282
> 
> 赞同：3
> 
> 时间：2013-04-14T12:55:49.443
> 
> 标签：css, height, scale

我想`<div>`在我的网页上使用三个区域：*Header*、*Content*和*Footer*。

*页脚* `<div>`应该贴在网页的底部。

*页眉* `<div>`应该贴在页面顶部。

内容应该填满*页面* `<div>`中间的整个区域。

所以这是基本布局：

```
<body>
  <div id="header"></div>
  <div id="content"></div>
  <div id="footer"></div>
</body> 
```

为了让*页脚*停留在我添加的页面下方

```
#footer
{
  position: fixed;
  bottom: 0;
} 
```

对于我使用背景图像的*内容* ，精确缩放到元素的尺寸：`<div>``div`

```
#content
{
  background: url("Bilder/Bild.png") center contain no-repeat black;
} 
```

现在我希望*Content* `<div>`正好是*Header*和*Footer*之间的 ViewPort 的剩余高度，而不添加任何 JavaScript，无论以后将什么内容添加到*Content* `<div>`。

我怎样才能在 CSS3 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T13:06:54.720

如果 和 的大小`footer`已知`header`，则可以使用[`calc()`](https://developer.mozilla.org/en-US/docs/CSS/calc). 因此，假设两者`100px`结合在一起，这应该可行：

```
html, body { height: 100%; }
#content {
  height: calc( 100% - 100px );
} 
```

但请注意，旧浏览器不支持此功能。还可以查看[兼容性表](https://developer.mozilla.org/en-US/docs/CSS/calc#Browser_compatibility)以了解可能需要的前缀。

[**示例小提琴**](http://jsfiddle.net/zEZh9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:11:36.337

你可以使用这样的东西。它将允许您将您的位置保持在一系列分辨率中。

```
#header {
    position: fixed;
    height: 10%;
}

#content {
    position: fixed;
    height: 80%;
    top: 10%;
}

#footer {
    position: fixed;
    bottom: 0px;
    height: 10%;
} 
```

在[这里查看](http://jsfiddle.net/57EGj/1/)

# android - 在整个宽度上均匀分布

> ID：15999286
> 
> 赞同：0
> 
> 时间：2013-04-14T12:56:50.227
> 
> 标签：android, xml, layout

在尝试了整个上午之后，我放弃并问你们（android布局可能真的很痛苦！）：如何在水平线性布局中均匀分布一些文本视图？

这张图片是它现在的样子（如果你想知道：文本视图有自定义样式）。

[有效的 XHTML http://www.vankurt.de/share/layout.png](http://www.vankurt.de/share/layout.png)。

还有一个额外的问题：如何在文本视图之间添加一点空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:14:16.910

在每个文本视图上使用`android:layout_weight="1"`，宽度为`"fill_parent"`

这将均匀分布文本视图之间的空间

```
 <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="TextView" 
        android:layout_weight="1"/> 
```

对于它们之间的一点空间，`android:layout_margin="5dip"`您还可以在每一侧单独添加边距，例如`android:layout_marginRight="5dip"`在右侧添加 5dip 边距。

您也可以改用填充，它们之间存在细微差别，请参阅[此问题了解差异](https://stackoverflow.com/questions/4619899/difference-between-a-views-padding-and-margin)

# python - 一次将多个变量初始化为同一个对象但不同的实例

> ID：15999301
> 
> 赞同：0
> 
> 时间：2013-04-14T12:58:06.330
> 
> 标签：python, initialization

以相同方式初始化多个对象而不使它们都指向同一个对象的最干净的方法是什么？我想做这个：

```
a, b, c = create_object(), create_object(), create_object() 
```

以一种不那么冗长的方式。

我可以执行以下操作，但是我的所有变量都指向同一个对象

```
a = b = c = create_object() # then a.change() changes them all! 
```

有没有我想念的干净的、pythonic 的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T12:59:59.867

最*Pythonic*的代码是最*有意义*的代码。这样做要好得多

```
a = create_object()
b = create_object()
c = create_object() 
```

与替代方案相反，混乱的胡言乱语。不要害怕多出两条线；真的，好处要大得多。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:03:29.890

使用工厂。

```
def factory(num):
    for i in range(num):
        yield shell()

class shell():
    pass

a, b, c = factory(3)

# results:
>>> a
<__main__.shell instance at 0x0000000002BE0548>
>>> b
<__main__.shell instance at 0x0000000002BE03C8>
>>> c
<__main__.shell instance at 0x0000000002BE0588> 
```

当然，您可以始终添加额外的参数，以便能够将一组变量初始化为相同，或者您甚至可以拥有复杂的工厂来确定自己的参数以传递给类构造函数。

您也可以将其作为类的静态方法。

无论您的偏好是什么，如果您想将一组变量初始化为同一类的不同实例，那么您应该这样做。（虽然，一般来说，这种活动对于它的价值来说并不是很*pythonic* ......）

* * *

要使用您展示的内容制作工厂并使其更加健壮，这里有一个很好的示例：

```
def factory(obj, num, args=None):
    for i in range(num):
        yield obj(args) if args else obj()

a, b, c = factory(create_object, 3) 
```

# android - 打开我自己的其他应用意图？

> ID：15999303
> 
> 赞同：0
> 
> 时间：2013-04-14T12:58:11.697
> 
> 标签：android

我还不是 Android 程序员，但我有一个想法，我想知道它是否可行。

我的部分想法要求我可以从我自己的应用程序中打开其他应用程序的不同功能/意图。例如，我将创建一个应用程序，当按下按钮时，它将直接在 My Boy 中打开一个 .gba 文件！模拟器。如果这样的应用程序不支持这一点，有没有办法通过观察或调试打开的意图并在我的应用程序中以某种方式重新创建它来实现它？

抱歉，如果我的问题没有意义，我还是 Android 新手。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:01:03.317

大多数完成特定任务的优秀应用程序都允许您使用 Intents 在其中打开文件/URI。

但是，您*永远不*应该使用完整的 Intent 直接启动应用程序。相反，使用文件的 URI 创建一个 Intent，并让 Android 创建一个可以处理该 Intent 的所有应用程序的选择器。如果任何应用程序支持该文件并已安装并愿意为您打开它，它将显示在列表中。如果没有安装此类应用程序，您将获得一个`ActivityNotFoundException`，您可以在此请求用户安装适当的应用程序。

# r - 用 facet 在 ggplot 中绘制连续和离散序列

> ID：15999304
> 
> 赞同：5
> 
> 时间：2013-04-14T12:58:16.307
> 
> 标签：r, ggplot2

我有四个不同变量随时间绘制的数据。我想使用 facet_grid 将它们组合在一个图中，其中每个变量都有自己的子图。以下代码类似于我的数据和我呈现它的方式：

```
require(ggplot2)
require(reshape2)

subm <- melt(economics, id='date', c('psavert','uempmed','unemploy'))
mcsm <- melt(data.frame(date=economics$date, q=quarters(economics$date)), id='date')
mcsm$value <- factor(mcsm$value)

ggplot(subm, aes(date, value, col=variable, group=1)) + geom_line() + 
       facet_grid(variable~., scale='free_y') + 
       geom_step(data=mcsm, aes(date, value)) + 
       scale_y_discrete(breaks=levels(mcsm$value)) 
```

如果我忽略 scale_y_discrete，R 会抱怨我正在尝试将离散值与连续比例相结合。如果我包括 scale_y_discreate 我的连续系列会错过他们的规模。

有没有解决这个问题的巧妙方法，即。让所有秤都正确吗？我还看到图例是按字母顺序排序的，我可以更改它，以便图例按照与子图相同的顺序排列吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T13:17:12.640

您的数据的问题在于数据框的数据`subm` `value`是数字（连续），但对于`mcsm` `value`因素（离散）。您不能对数值和连续值使用相同的比例，并且您只能获得最后一个方面（离散）的 y 值。此外，不可能`scale_y...()`在一个图中使用两个函数。

我的方法是制作`mcsm` `value`为数字（另存为`value2`）然后使用它们 - 它将四分之一绘制为 1、2、3 和 4。要解决图例问题，请按您需要的顺序使用`scale_color_discrete()`和提供`breaks=`。

```
mcsm$value2<-as.numeric(mcsm$value)
ggplot(subm, aes(date, value, col=variable, group=1)) + geom_line()+
 facet_grid(variable~., scale='free_y') + geom_step(data=mcsm, aes(date, value2)) +
  scale_color_discrete(breaks=c('psavert','uempmed','unemploy','q')) 
```

![在此处输入图像描述](https://i.stack.imgur.com/bRawP.png)

## 更新 - 使用 grobs 的解决方案

另一种方法是使用 grobs 和 library`gridExtra`将您的数据绘制为单独的图。

首先，将带有所有图例和数据（代码如上）的绘图保存为 object `p`。然后使用函数`ggplot_build()`并将`ggplot_gtable()`绘图保存为 grob object `gp`。从 gp 中提取仅绘制图例的部分（另存为 object `gp.leg`） - 在这种情况下是列表元素编号 17。

```
library(gridExtra)
p<-ggplot(subm, aes(date, value, col=variable, group=1)) + geom_line()+
  facet_grid(variable~., scale='free_y') + geom_step(data=mcsm, aes(date, value2)) +
  scale_color_discrete(breaks=c('psavert','uempmed','unemploy','q'))
gp<-ggplot_gtable(ggplot_build(p))
gp.leg<-gp$grobs[[17]] 
```

制作两个新的绘图`p1`和`p2`- 第一个绘图数据`subm`和第二个数据`mcsm`。用于`scale_color_manual()`设置与 plot 相同的颜色`p`。对于第一个绘图，删除 x 轴标题、文本和刻度，`plot.margin=`并将下边距设置为负数。对于第二个图，将上边距更改为负数。`faced_grid()`应该用于两个情节以获得多面外观。

```
p1 <- ggplot(subm, aes(date, value, col=variable, group=1)) + geom_line()+
   facet_grid(variable~., scale='free_y')+
  theme(plot.margin = unit(c(0.5,0.5,-0.25,0.5), "lines"),
        axis.text.x=element_blank(),
        axis.title.x=element_blank(),
        axis.ticks.x=element_blank())+
  scale_color_manual(values=c("#F8766D","#00BFC4","#C77CFF"),guide="none")

p2 <- ggplot(data=mcsm, aes(date, value,group=1,col=variable)) + geom_step() +
  facet_grid(variable~., scale='free_y')+
  theme(plot.margin = unit(c(-0.25,0.5,0.5,0.5), "lines"))+ylab("")+
  scale_color_manual(values="#7CAE00",guide="none") 
```

将两个图都保存为 grob 对象，`p1`然后`p2`为两个图设置相同的宽度。

```
gp1 <- ggplot_gtable(ggplot_build(p1))
gp2 <- ggplot_gtable(ggplot_build(p2))
maxWidth = grid::unit.pmax(gp1$widths[2:3],gp2$widths[2:3])
gp1$widths[2:3] <- as.list(maxWidth)
gp2$widths[2:3] <- as.list(maxWidth) 
```

具有功能`grid.arrange()`并将`arrangeGrob()`图和图例安排在一个图中。

```
grid.arrange(arrangeGrob(arrangeGrob(gp1,gp2,heights=c(3/4,1/4),ncol=1),
       gp.leg,widths=c(7/8,1/8),ncol=2)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/HXs3W.png)

# python - python 3和tkinter中的滑块和checkbtton

> ID：15999307
> 
> 赞同：0
> 
> 时间：2013-04-14T12:59:14.327
> 
> 标签：python, slider, tkinter

当检查按钮被选中时，我怎样才能做到这一点，然后所有滑块都使用 python 3 和 tkinter 像一个一样移动？谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:28:24.680

首先，您需要保存对每个滑块的引用，这些滑块是 Scale 小部件的实例。接下来，您需要将一个命令与 checkbutton 相关联（使用`command`属性），无论何时选中或取消选中 checkbutton，都会调用该命令。在该命令中，您可以调用`set`每个滑块的方法。

# c# - 程序启动时如何启动mysql数据库？

> ID：15999308
> 
> 赞同：1
> 
> 时间：2013-04-14T12:59:21.233
> 
> 标签：c#, mysql, database

我创建了一个连接到 xampp mysql 数据库的程序 C# windows 窗体，所以在我开始运行 Microsoft Visual Studio 2010 并运行该程序之前，我首先设置 xampp 控制面板以启动 apache 和 mysql，然后我的程序将连接到数据库。但是现在我已经完成了我的程序，我不想每次启动程序时都一遍又一遍地进行所有设置。这可能以编程方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:19:42.177

Mysql 和 Apache 应该安装为 Windows 服务。这些可以配置为随 Windows 自动启动，或者您可以通过`net start`从应用程序调用来启动它们。.Net 中可能也有一些类可以处理服务交互，但我对它们并不熟悉。不过，请检查 MSDN。

# php - 如何使用带有循环的 jQuery UI 手风琴

> ID：15999309
> 
> 赞同：3
> 
> 时间：2013-04-14T12:59:34.733
> 
> 标签：php, jquery, mysql, loops, accordion

这是效果的jquery手风琴代码：

```
 $(function() {
            $( "#accordion" ).accordion({
            header: "h3"
            });
       }); 
```

这是循环（不确定循环）的数据库（mysql）的输出：

```
 while($showE = mysqli_fetch_array($show))
            {

            echo $showE['un_name'];  /* this should be accordion head */
            echo $showE['un_name_dec']; /* this should be accordion description */
            } 
```

所以我的问题是，如何以手风琴效果显示它们，一切正常（我可以从数据库中获取记录），但手风琴效果没有形成，（手风琴效果不起作用）以及如何用循环显示它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:04:26.890

所以，你有两个文件：index.html 和 load_entries.php

索引.html：

```
<html>
   <head>
       <!-- Make the imports of your stylesheets and scripts here -->
       <script type="text/javascript">
           $(function() {
              $("#accordion").accordion({header: "h3"});
           });
           function load_entries() {
              $.ajax({
                  url: "load_entries.php",
                  complete: function(data) {
                      $("#accordion").html(data.responseText);
                  }
              });
           }
       </script>
   </head>
   <body>
       <button onclick="load_entries();">Load</button> <!-- Button to load the entries -->
       <div id="accordion">

       </div>
   </body>
</html> 
```

加载条目.php：

```
<?php
   //connect to your database here
   $sql = "SELECT * FROM entries"; //replace entries by your own table name
   $result = mysqli_query($sql);
   while($row = mysqli_fetch_array($result)) {
      echo '<h3>'.$row['un_name'].'</h3>';
      echo '<div>'.$row['un_name_dec'].'</div>';
   }
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T13:06:59.417

**jQuery脚本**

```
$.post('server.php', function(data) {

$("#accordion").html(data);

$("#accordion").accordion();

}); 
```

**服务器.php**

```
$html='';
while($showE = mysqli_fetch_array($show)) {
$html.= '<h3>'.$showE['un_name'].'</h3>';
$html.= '<div>'.$showE['un_name_dec'].'</div>';
}
echo $html; 
```

**HTML 标记**

```
<div id='accordion'></div> 
```

# java - 在Android中访问字符串数组中的最后一个“数量”元素

> ID：15999311
> 
> 赞同：3
> 
> 时间：2013-04-14T12:59:35.340
> 
> 标签：java, android, arrays, multithreading, asynchronous

我有一个包含数万个元素并不断增长的字符串数组，现在我正在寻找一种方法来在后台线程中每 60 秒获取和处理最后 3000 个元素。我研究了许多不同的方法，但不确定其中任何一种。欢迎任何意见。

编辑：谢谢你们的回复。现在，在意图相机开启时，在上面运行后台线程处理的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:02:42.780

```
String[] arr = {...};

for(int i = arr.length-3000; i < arr.length ; i++){
     arr[i];  //Do something.
} 
```

# php - 如何在使用 PyroCMS 标签循环时调用另一个对象

> ID：15999317
> 
> 赞同：0
> 
> 时间：2013-04-14T13:00:33.380
> 
> 标签：php, codeigniter, pyrocms

这是对象的外观：

```
[obj1] => Array
(
    [0] => Array
    (
        [id] => 0
    )
    [1] => Array
    (
        [id] => 1
    )
)
[obj2] => Array
(
    [0] => Array
    (
        [count] => 10
    )
    [1] => Array
    (
        [count] => 20
    )
) 
```

如何`obj2`从`obj1`循环中调用？

```
{{ obj1 }}
  {{ id }}
    {{ obj2 }}
      {{ count }}
    {{ /obj2 }}
  {{ /obj1 }} 
```

此格式返回`id`，但`obj2`不返回`counts`。我想找出遍历对象的正确方法以及为什么`obj2`根本不调用。顺便说一句，我已经使用`foreach`格式解决了它，所以如果它无法解决，我会坚持下去。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:11:27.887

通过 LEX 使用循环并不意味着像那样交叉引用。所以这是不可能的。如果您希望能够做到这一点，您应该先合并两个对象，然后将它们传递给视图或您传递它的任何其他地方。

# c++ - 在 Windows 操作系统中捕获屏幕截图的简单方法？C++

> ID：15999321
> 
> 赞同：0
> 
> 时间：2013-04-14T13:01:09.387
> 
> 标签：c++, windows, screenshot, capture

使用 C++ 捕获屏幕截图并将其保存在某处的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:09:22.107

也许这会有所帮助： [如何在 Windows 应用程序中截屏？](https://stackoverflow.com/questions/3291167/how-to-make-screen-screenshot-with-win32-in-c) 或[http://planetsourcecode.com/vb/scripts/ShowCode.asp?txtCodeId=10754&lngWId=3](http://planetsourcecode.com/vb/scripts/ShowCode.asp?txtCodeId=10754&lngWId=3)

# security - 知道密码结构和长度会加快破解过程吗？

> ID：15999323
> 
> 赞同：0
> 
> 时间：2013-04-14T13:01:24.647
> 
> 标签：security, hash, passwords

假设我有一个强密码或半强密码（例如`YankeesWillWin1903$`）。并且通过一个通用的散列函数（在这个例子中是 MD5），被转换成这个用于数据库存储（`55eeaadeb829cedb2a18fe5f477cc4ec`）。

另外，假设黑客知道我的密码是由以下信息组成的，依次为：

```
1\.  14 letters
2\.  4 numbers
3\.  A symbol 
```

黑客通过知道这些信息能以多快的速度破解这个哈希？我会担心它是否要快一个数量级。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:16:09.473

鉴于黑客知道该信息，您可以计算暴力破解所需的时间。

```
1\. 52 possible letters
2\. 10 possible numbers
3\. 32 possible symbols

52 ^ 14 = how many possible 14 letter combinations there are
10 ^ 4 = how many possible 4 number combinations there are
32 ^ 1 = how many possible 1 symbol combinations there are 
```

然后将它们“和”（也称为乘法）加在一起，您会得到一个很大的数字。因此，计算机最多只能尝试那么多组合才能找到密码。

改进可能是仅使用字典单词来组成 14 个字母组合。我很确定这些组合比所有可能的组合要少。

# php - 带有 Apache 身份验证的 PHP 路径

> ID：15999325
> 
> 赞同：0
> 
> 时间：2013-04-14T13:01:36.600
> 
> 标签：php, apache

我需要在 Apache2 中创建一个安全目录。

我有一个目录`/var/www`，其中包含我的登录页面以及我`/var/www/secure/`的所有其他 PHP、JavaScript 和 HTML。

我发送了一个登录请求，在成功响应后，我想从 运行我的站点的其余部分`/var/www/secure/`，所以我调用了`/var/www/secure/index.php`from `/var/www/login.php`。

中的所有路径`/var/www/secure/index.php`都是相对的（到`/var/www/secure/`），但随后出现错误（在 Apache 日志中）：

> 文件不存在：/var/www/scripts，引用者：my_IP_Address/login.php

脚本所在的目录`/var/www/secure/scripts`与`/var/www/secure/index.php`.

我的问题是：为什么路径`/var/www/`与 login.php 文件一样？

打电话后如何处理路径`/var/www/secure/index.php`？

# php - 仅在加载某个 CSS 文件时才加载某些图像

> ID：15999326
> 
> 赞同：-2
> 
> 时间：2013-04-14T13:01:37.807
> 
> 标签：php, jquery, css, image, random

我目前有 1 个 html 文件和 3 个 CSS 文件。每个 CSS 文件代表 3 个不同的主题，基本上代表 3 种不同的颜色，即 1 个红色、1 个蓝色和 1 个黄色。

我在页面刷新时随机加载这 3 个 CSS 文件中的一个，因此每次刷新页面时，您都会获得不同颜色的页面主题。我正在使用 PHP 执行此操作，并且工作正常。我的代码如下：

```
<link href="css/colours/<?php echo mt_rand(1, 3); ?>.css" rel="stylesheet" type="text/css"/> 
```

**我的问题是**如何将内联图像与正确的样式表配对，以便当您点击刷新时，用户会看到该主题的正确图像？

每个 CSS 文件将使用 4 个不同的图像，它们必须与正确的颜色相关联，因此如下所示：

*   **红色**的**样式表只能使用 image1.jpg、image2.jpg、image3.jpg 和**
***   **蓝色**_**只能使用 image5.jpg、image6.jpg、image7.jpg 和 image8.jpg*****   **黄色**样式表只能使用 image9.jpg、image10.jpg、image11.jpg 和 image12.jpg****

 ******编辑** 我不能使用背景图像，因为它是一个响应式网站，并且这些图像在屏幕上完美居中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:11:15.340

假设您拥有背景中的所有图像。因此，实际上，您可以通过这种方式制定规则，例如在 中`red.css`，您有：

```
.header {background: url("image1.jpg");} 
```

在`blue.css`中，您有：

```
.header {background: url("image5.jpg");} 
```

在 中`yellow.css`，您有：

```
.header {background: url("image9.jpg");} 
```

这样，只有在加载样式表时，才会加载图像。

* * *

或者，如果您将它们放在 HTML 中，您将不会在视觉上加载它们，但您将在页面中加载并使其隐藏在视图中。这样说，`red.css`你有：

```
.header {display: none;}
.header.red {display: block;} 
```

在`blue.css`中，您有：

```
.header {display: none;}
.header.blue {display: block;} 
```

在 中`yellow.css`，您有：

```
.header {display: none;}
.header.yellow {display: block;} 
```

在你的 HTML 中，你有这个：

```
<img src="image1.jpg" class="header red" />
<img src="image5.jpg" class="header blue" />
<img src="image9.jpg" class="header yellow" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:17:19.107

将您的图像放在三个文件夹中，例如 images-1、images-2、images-3。现在您将随机数存储在一个变量中：

```
<?php
   $theme = mt_rand(1, 3);
?> 
```

加载样式表时，使用变量：

```
<link href="css/colours/<?php echo $theme; ?>.css" rel="stylesheet" type="text/css"/> 
```

当您加载图像时：

```
<img src="images-<?php echo $theme; ?>/image1.jpg" /> <!-- Loads image 1 in of the current theme --> 
```****

# java - 如何获得 JLabel 的边框颜色

> ID：15999330
> 
> 赞同：1
> 
> 时间：2013-04-14T13:02:25.243
> 
> 标签：java, swing, jlabel

```
jLabel.setBorder(BorderFactory.createLineBorder(Color.BLUE)); 
```

在此之后如何检查边框颜色？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T13:08:16.040

检查api，我会说

```
((LineBorder)jLabel.getBorder()).getLineColor(); 
```

# c++ - 如何更改 pcl::PointXYZRGBA 的 RGB 值？

> ID：15999331
> 
> 赞同：7
> 
> 时间：2013-04-14T13:02:30.567
> 
> 标签：c++, opencv, image-processing, computer-vision, point-cloud-library

我有一点类型 `pcl::PointXYZRGBA`。如何分配/更改其 rgb 值？

为了改变 xyz 坐标，我可以简单地做`point.x = some_value`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-11-19T19:11:50.810

或者只是使用

```
point.r = 255;
point.b = 0;
point.g = 0;
point.a = 255; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T08:34:44.610

您可以使用`pcl::PointXYZRGB`而不是`pcl::PointXYZRGBA`. 我认为他们都做同样的事情。然后将一个点涂成红色（255,0,0），你可以这样做：

```
pcl::PointXYZRGB point = pcl::PointXYZRGB(255, 0, 0); 
```

然后可以分别分配 xyz 坐标：

```
point.x = x;
point.y = y;
point.z = z; 
```

**编辑：**或者如果你必须坚持`pcl::PointXYZRGBA`，你可以做

```
pcl::PointXYZRGBA point;
uint8_t r = 255;
uint8_t g = 0;
uint8_t b = 0;
int32_t rgb = (r << 16) | (g << 8) | b; 
point.rgba = *(float *)(&rgb); // makes the point red 
```

# c - 使用带有 ARM cpu 的 UART

> ID：15999333
> 
> 赞同：1
> 
> 时间：2013-04-14T13:02:41.707
> 
> 标签：c, arm, uart

我想为 ARM 编写一个裸机 hello-world。消息应在 uart 输出。设备树文件说明了 uart：

```
 uart@09000 {
            compatible = "arm,pl011", "arm,primecell";
            reg = <0x9000 0x1000>;
            interrupts = <0x5>;
        }; 
```

这是我的 hello world 程序。

```
// vexpress.js:651
const int    DR    = 0x00;
const int    FR    = 0x18;
const int    IBRD  = 0x24;
const int    FBRD  = 0x28;
const int    LCR_H = 0x2c;
const int    CR    = 0x30;
const int    IFLS  = 0x34;
const int    IMSC  = 0x38;
const int    MIS   = 0x40;
const int    ICR   = 0x44;
unsigned int *uart;

void
putc(char c)
{
    // wait for UART to become ready to transmit
    // vexpress.js:707
    while ((uart[FR] & (1 << 7)));
    uart[DR]= c;
    while ((uart[FR] & (1 << 7)));
}

void
puts(char *s) {    
    while(*s)
        putc(*(s++));    
}

int
main()
{
    char s[] = { 'H', 'a', 'l', 'l', 'o' , 0};
    int i;
    // vexpress.js:1455
    uart = (unsigned int*)0x10009000;

    // 1
    putc('H');
    putc('a');
    putc('l');
    putc('l');
    putc('o');
    putc(' ');
    putc('W');
    putc('e');
    putc('l');
    putc('t');
    putc('\n');
    putc('\r');

    // 2
    puts(s);

    // 3
    for(i=97;i<123;i++){
        putc((char)i);
    }

    // 4
    puts("Hello World\n\r");
    while(1);
} 
```

因此，该程序使用多种方式将输出内容输出到 uart。第 1 节（对 putc 的所有调用都有效。但 putc 似乎不喜欢在循环中被调用。2、3 和 4 都不起作用。第一个宪章确实起作用，奇怪的是 '\0' 此后发送，我不知道为什么。输出是

```
Hallo Welt                                                                      
a\0\0\0\0......... 
```

我使用 arm-js 是因为它是唯一一个足够完整（mmu，可以运行 linux）并且足够简单到单步（没有 jit 或类似）的 arm 仿真器。

此外，有没有办法集成在构建时读取设备树文件信息的 uart 驱动程序？是否有一个内核可以让我轻松地独立使用该部分？

/编辑

cpu 是 ARMv5 cortex-a9 vexpress 处理器。我不确定还有哪些其他信息感兴趣，所以
[这是设备树文件](http://pastebin.com/71HmH10g)，[这是汇编代码](http://pastebin.com/izZFw0Jw)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:32:52.203

```
uart = (unsigned int*)0x10009000;

while ((uart[FR] & (1 << 7))); 
```

所以你取 0x10009000 然后取一个初始化为 0x18 的变量 FR 并将其用作偏移量。uart 被定义为一个 int 所以 32 位所以需要 32 位或 4 字节乘以 0x18 = 0x60。所以你正在读取内存位置 0x10009060，我怀疑这是你想要做的。无论如何，使用这样的指针并不是一个好方法。（您也未能将 uart 声明为[`volatile`](https://stackoverflow.com/questions/981331/volatile-semantics-in-c99)）。DR 将是唯一可以作为 0*4 = 0 工作的地址，您将获得地址 0x10009000。

这些更新突出了一些问题，

```
const int FR = 6;
unsigned int volatile *uart; 
```

# php - 在 SQL 语句中在 PHP 中添加时间约束？

> ID：15999335
> 
> 赞同：0
> 
> 时间：2013-04-14T13:03:02.483
> 
> 标签：php, mysql, sql

目前在我的代码中，任何学生都可以留下任何数量的反馈。我想让每个学生在一个学期内只能给出两个反馈。

我想我也必须在 MySQL 中应用某种主键概念？

这是我的参考代码：

```
<?php
session_start();

if (isset($_SESSION['user_id'])) {
    if (isset($_SESSION['user_id']) && isset($_POST['r1']) && isset($_POST['r2']) && isset($_POST['r3']) && isset($_POST['r4']) && isset($_POST['suggestion']) && isset($_POST['module'])) {
        $module = $_POST['module'];
        $user = $_SESSION['user_id'];
        $r1 = $_POST['r1'];
        $r2 = $_POST['r2'];
        $r3 = $_POST['r3'];
        $r4 = $_POST['r4'];
        $suggestion = $_POST['suggestion'];
        switch ($module) {
        case 1:
            $query_insert = "INSERT INTO `wp_feedback` VALUES ('" . $user . "','wp','" . $r1 . "','" . $r2 . "','" . $r3 . "','" . $r4 . "','" . $suggestion . "')";
            if (isset($_POST['submit'])) {
                if ($query_run = mysql_query($query_insert)) {
                    echo "<script type='text/javascript'>alert('Sucessfull');</script>";
                    header('Location: feedback.php');
                }
                else {
                    echo "not inserted";
                }
            }

            break;

        case 2:
            $query_insert = "INSERT INTO `wp_feedback` VALUES ('" . $user . "','hssn2','" . $r1 . "','" . $r2 . "','" . $r3 . "','" . $r4 . "','" . $suggestion . "')";
            if (isset($_POST['submit'])) {
                if ($query_run = mysql_query($query_insert)) {
                    echo "<script type='text/javascript'>alert('Sucessfull');</script>";
                    header('Location: feedback.php');
                }
                else {
                    echo "not inserted";
                }
            }

            break;

        case 3:
            $query_insert = "INSERT INTO `wp_feedback` VALUES ('" . $user . "','dwds','" . $r1 . "','" . $r2 . "','" . $r3 . "','" . $r4 . "','" . $suggestion . "')";
            if (isset($_POST['submit'])) {
                if ($query_run = mysql_query($query_insert)) {
                    echo "<script type='text/javascript'>alert('Sucessfull');</script>";
                    header('Location: feedback.php');
                }
                else {
                    echo "not inserted";
                }
            }

        case 4:
        case 3:
            $query_insert = "INSERT INTO `wp_feedback` VALUES ('" . $user . "','ped','" . $r1 . "','" . $r2 . "','" . $r3 . "','" . $r4 . "','" . $suggestion . "')";
            if (isset($_POST['submit'])) {
                if ($query_run = mysql_query($query_insert)) {
                    echo "<script type='text/javascript'>alert('Sucessfull');</script>";
                    header('Location: feedback.php');
                }
                else {
                    echo "not inserted";
                }
            }

            break;

        default:
            echo "select something";
            break;
        }
    }
}
else {
    echo "<script type='text/javascript'>alert('You must be login to View the contents');</script>";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:52:14.730

伪代码：

```
SELECT * FROM feedback WHERE studentid=123 AND feedback.insertdate BETWEEN startofthissemesetr AND endofthissemester

$reccount = number of records returned by the above query

if ($reccount > 1) {

    echo "sorry, you already submitted 2 feedbacks this semester!";

} else {

    echo "thank you for submitting your feedback!";
    insert feedback into DB

} 
```

# c - Pipes and fork() - 如何在 C 中通过管道编写一个 int 数组？

> ID：15999336
> 
> 赞同：4
> 
> 时间：2013-04-14T13:03:04.273
> 
> 标签：c, arrays, fork, pipe

我正在尝试学习 C 中的管道，但我被卡住了。我尝试了很多东西，但我无法获得正确的输出。

下一个程序应该显示：123

但它的输出总是方向（除非我认为）：

-1845296639

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/wait.h>

int main (int argc, char *argv[]){

    int i;
    int buff[4];
    int f[2];

    if(pipe(f) == -1)
        perror("pipe");

    for(i=0; i<3; i++){ 

        int val = i+1;
        switch(fork()){
            case -1:
                perror("fork");
                break;
            case 0:
                close(f[0]);
                write(f[1], &val, 1);
                exit(0);
                break;
            default:
                break;
        }
    }
    close(f[1]);

    for(i=0; i<3; i++)
        wait(NULL);

    read(f[0], buff, i);
    printf("%d", *buff);

    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T13:07:49.567

管道将*字节*从一个地方发送到另一个地方。因此，您需要精确指定要发送的*字节数。*然后确保您的发送代码准确地发送这些字节，并且您的接收代码准确地期望这些字节。

如果您希望它在不必以正确方式做事的情况下工作，请执行以下操作：

发件人：

```
write(f[1], &val, sizeof(int)); 
```

接收者：

```
for (int i = 0; i < 3; ++i)
  read(f[0], &buf[i], sizeof(int)); 
```

注意还`printf("%d", *buff);`打印数组中的第一个元素（元素零）。

请勿将接收代码更改为`read(f[0], buf, 3 * sizeof(int));`. 你`write`不是原子的（因为你调用`write`了三遍）所以你不能指望你是原子的`read`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:11:41.253

的位模式`-1845296639`是`0x92030201`，假设 32 位二进制补码`int`s。

因此，您从使用未初始化的缓冲区中得到一个字节的垃圾，以及由`fork`ed 子级写入的三个字节。

大概，您的平台是小端的，这意味着在内存中，字节是

```
0x01 0x02 0x03 0x92 
```

因此写入的字节按需要按顺序到达，尽管期望`read(...,...,3)`在三个孩子每个向管道写入一个字节后读取三个字节是大胆的。

# php - 如果图像太大，图像上传 PHP 代码不起作用

> ID：15999337
> 
> 赞同：1
> 
> 时间：2013-04-14T13:03:05.160
> 
> 标签：php

我有以下两个 PHP 代码将文件上传到我的网站。第一个创建目录。二是上传图片。

这是我创建目录的 PHP 代码：

```
<?php
$foldername = $_POST["foldername"]; 
mkdir("uploads", 0777); // Create Folder
mkdir("uploads/input", 0777); // Create Folder
mkdir("uploads/output", 0777); // Create Folder
mkdir("uploads/output/".$foldername, 0777); // Create Folder
mkdir("uploads/output/".$foldername."/modified", 0777); // Create Folder
mkdir("uploads/output/".$foldername."/originals", 0777); // Create Folder
mkdir("uploads/output/".$foldername."/thumbnails", 0777); // Create Folder
?> 
```

这是上传文件的地方。

```
 $success = 0;
  $fail = 0;
  $uploaddir = 'uploads/input/';
  for ($i=0;$i<10;$i++)
  {
   if($_FILES['userfile']['name'][$i])
   {
    $uploadfile = $uploaddir . basename($_FILES['userfile']['name'][$i]);
    $ext = strtolower(substr($uploadfile,strlen($uploadfile)-3,3));
    if (preg_match("/(jpg|gif|png|bmp)/",$ext))
    {
     if (move_uploaded_file($_FILES['userfile']['tmp_name'][$i], $uploadfile)) 
     {
      $success++;
     } 
     else 
     {
     echo "Error Uploading the file. Retry after sometime.\n";
     $fail++;
     }
    }
    else
    {
     $fail++;
    }
   }
  }
  echo "<br> Number of files Uploaded: ".$success;
  echo "<br> Number of files Failed: ".$fail. "<br><br>";
?> 
```

两个 PHP 代码都是通过另一个 PHP 代码执行的。两个代码都可以正常工作。不幸的是，如果文件很大，第一个和第二个代码不起作用。我认为这是因为第一个代码不适用于大文件，然后第二个代码不起作用。

我认为是因为上传图像需要太长时间，所以代码不起作用。请问我能做什么？

我在 error_log PHP 警告中得到以下信息：POST Content-Length of 12304331 bytes 超出第 0 行 Unknown 中 10485760 字节的限制

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:06:51.040

您当前的 PHP INI 设置为最大上传大小 10mb。

在您的 php ini 中增加上传限制的大小或使用：

```
ini_set('post_max_size', '64M');
ini_set('upload_max_filesize', '64M'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:07:24.560

您将需要配置[upload_max_filesize](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)、[post_max_size](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)和[memory_limit](http://www.php.net/manual/en/ini.core.php#ini.memory-limit)指令。

# ruby-on-rails - 图片网址不起作用

> ID：15999339
> 
> 赞同：0
> 
> 时间：2013-04-14T13:03:23.423
> 
> 标签：ruby-on-rails, coffeescript, sass

**images.js.coffee.erb 文件：**

```
<%
imgs = {}
Dir.chdir("#{Rails.root}/app/assets/images/bg/") do
  imgs = Dir["**"].inject({}) {|h,f| h.merge! f => image-url(f)}
end
%>

window.image_path = (name) ->
  <%= imgs.to_json %>[name] 
```

**page.js.coffee 文件：（获取图片路径）**

```
icon=image_path("myfile.jpb") 
```

**错误：**

```
undefined local variable or method `image' for #<#<Class:0x007ffdaac7cd88> on line 4

4   imgs = Dir["**"].inject({}) {|h,f| h.merge! f => image-url(f)} 
```

问题是我的 image-url() 方法似乎不起作用。为什么 image_path() 有效，但 image-url 无效？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:28:05.073

因为方法**image-url**不是 ruby​​ 的有效方法名称。

此外，rails api 文档中没有定义，您可以随时查看[api 文档参考](http://api.rubyonrails.org/)。

尝试在你的**irb**中做：

```
def image-url
  puts "Hi"
end 
```

它会说代码无效:)

# java - 如何在 GAE/J 中实现 EndCursors - JDO

> ID：15999343
> 
> 赞同：0
> 
> 时间：2013-04-14T13:03:37.110
> 
> 标签：java, google-app-engine, cursor, google-cloud-datastore, jdo

我有一个在数据存储之上使用 JDO 的 GAE/J 应用程序，并且我已经能够使用游标对查询结果进行分页。默认实现是我们`startCursor`在我的团队中调用的东西（即从这一点开始给我结果）。我现在想要的是我们所说`endCursor`的（即给我从开始到现在的结果）。想象一下某种 Twitter 时间线（不支持 PUSH 的时间线），其中客户端必须轮询某些服务器以获取新内容。现在让我们假设客户端在 5 分钟前获取了一些数据；此数据表示**开始（在 5 分钟前）直到光标为 "X" 的点**。现在客户端想要更新时间线，这意味着客户端想要**从现在到 5 分钟前的开头拉取新鲜内容**. 如何在 GAE/J - JDO 上实现这一点？

*[编辑：] 假设商店中有 1000 个按时间戳排序的实体。然后我获取了前 20 个。之后，创建了 7 个新实体。如何使用查询仅检索这 7 个新实体？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:14:44.997

更改 ORDER，这样事情可能会下降

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T18:38:19.153

将查询排序设置为时间戳升序。当您检索到 5 分钟前 (X) 的查询结果时，获取并保存光标。

稍后，使用此游标运行相同的查询：可以检索点 X 之后的项目。

（这个原则与您已经使用游标的方式有何不同？）

# openssl - 如何将其他不受信任的证书加载到 SSL_CTX

> ID：15999348
> 
> 赞同：0
> 
> 时间：2013-04-14T13:04:11.617
> 
> 标签：openssl, x509, pki

我有 SSL 客户端和服务器，以及像这样的测试 PKI

```
root_ca -> server_singing_ca -> ssl server
      |--> client_signing_ca -> ssl client 
```

在服务器中，我将服务器证书和 server_signing_ca 证书放入同一个文件中，并使用加载文件

```
SSL_CTX_use_certificate_chain_file(). 
```

这样可行。在握手期间，不受信任的中间证书会自动发送给客户端。

我的问题是：我想尽量减少握手期间的数据交换。有没有办法让客户端事先保存 server_signing_ca 证书的副本，以便我可以从服务器端删除它？
而且我不想将 server_signing_ca 的证书添加到受信任的商店。
客户端加载 server_signing_ca 证书的 API 是什么？我调查了

```
SSL_CTX_add_extra_chain_cert(). 
```

但似乎是客户端加载client_signing_ca的证书以形成证书链。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:06:56.673

请参考与 SSL/TLS 协议相关的 RFC（其中之一在[这里](https://www.rfc-editor.org/rfc/rfc6101)）。通常，服务器应该发送证书链，其中根 CA 可以选择省略。客户端应该信任受信任的根并拥有证书。

但是，您可以省略链（客户端具有证书链除外）。您需要确保验证服务器证书。

您可以使用您拥有的链或检查 SSL_CTX_set_cert_verify_callback 进行连接后验证。

# mysql - 将 SQL 结果转换为 Hash

> ID：15999362
> 
> 赞同：2
> 
> 时间：2013-04-14T13:06:03.320
> 
> 标签：mysql, ruby-on-rails, ruby

对于以下 SQL 查询：

```
SELECT users.name, posts.title
FROM users
INNER JOIN posts 
ON posts.user_id = users.id 
```

我得到了如下结果数组：

```
name title
foo  post_a
foo  post_b
foo  post_c
bar  post_d
bar  post_e 
```

但是，我想使用用户名对它进行分组，即通过例如名为“foo”的帖子标题。所以生成的哈希表示应该如下所示：

```
{
  :foo => [ post_a, post_b, post_c ],
  :bar => { post_d, post_e ] 
} 
```

我怎样才能以 Ruby 的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:11:12.420

查看[group_concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数

```
SELECT user.name,  GROUP_CONCAT(DISTINCT post.title
                 ORDER BY post.title DESC SEPARATOR ' ') FROM
    user INNER JOIN post ON post.user_id = user.id 

group by user.name 
```

# c++ - 这个类模板中的这个函数模板是做什么的？

> ID：15999363
> 
> 赞同：1
> 
> 时间：2013-04-14T13:06:08.857
> 
> 标签：c++

我正在阅读我正在阅读的书中的 C++ 类模板，虽然大部分内容都很清楚，但这个特殊的功能真的让我很烦：

```
template <typename T> 
struct Vector3 {

T x; T y; T z;

//... several methods, constructors, etc

//Then this one, which is really confusing me:

template <typename P> 
P* Write(P* pData)
   {
    Vector3<T>* pVector = (Vector3<T>*) pData; 
    *pVector++ = *this;
    return (P*) pVector;
   } 
```

首先，该函数似乎将 P 的数组或指向 P 的指针视为可以轻松地从指向 a 的指针转换为`Vector3`类名。怎么样？如果我有一个`Vector3<float> someVector`，是什么让一个指向这个`someVector`castable 的指针变成一个指向的指针`float`？（甚至`int`？）它也做相反的事情：为函数提供一个浮点数组，然后它可以将其转换为`Vector3`.

所以这是我困惑的第一个领域。

接下来是`*pVector++ = *this;`-- 我认为这是这里的指针算术，如果`pVector`指向数组中的第二个元素，使用这个表达式我们将指针递增到数组的下一个元素，但只有*在*我们首先分配`*this`给指向的当前元素`pVector`。假设我在这方面是正确的，并不`pVector`总是指向数组中的第一个元素，因为它只是在前一行创建的？！`++`在这种情况下，运营商的目的是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T14:07:08.043

## 让我们分解它是如何工作的：

1.  这是函数声明。重要的一点是`P`与 无关`T`。所以，我们需要多加注意，因为可能会发生一些不好的事情......

    ```
    template <typename P> 
    P* Write(P* pData)
    { 
    ```

    让我们表示 指向的内存`pData`。为了解释起见，我假设它`pData`指向内存中足够大的区域（否则`Write`可能会导致段错误），而这`Vector3<T>`只是 3 `T`s 的大小。在下文中，我将采用`T = float`, with `sizeof(float) = 4`，但我的解释仍然适用于其他类型。所以，在这里`sizeof(Vector3<float>) = 12`。

    所以，这里是内存，`|-|`是一个字节：

    ```
    |-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|-|
    ^
    |
    pData : P* 
    ```

2.  我们将其解释`pData`为指向 a 的指针`Vector3<T>`。*一般来说*，这是一种糟糕的风格，`P`任何东西都可以。

    ```
     Vector3<T>* pVector = (Vector3<T>*) pData; 
    ```

3.  以下行：

    ```
     *pVector++ = *this; 
    ```

    可分为：

    ```
     *pVector = *this;
        pVector++; 
    ```

    *   `*pVector = *this;`将向量 ( `*this`) 的内容分配给数据。现在的记忆是：

        ```
        pVector : Vector3<float>*
        |
        v
        |X|X|X|X|Y|Y|Y|Y|Z|Z|Z|Z|-|-|-|-|-|
        ^^^^^^^^^^^^^^^^^^^^^^^^^
        copied content of the vector 
        ```

    *   `pVector++;`将向量递增`1 * sizeof(Vector3<float>)`，因此它现在指向尚未写入的内存：

        ```
         pVector : Vector3<float>*
                                |
                                v
        |X|X|X|X|Y|Y|Y|Y|Z|Z|Z|Z|-|-|-|-|-| 
        ```

4.  `pVector`被抛回`P*`并返回。

    ```
     return (P*) pVector;
    } 
    ```

    这可以链接写入，因为对返回指针的写入不会覆盖第一次写入：

    ```
    char data[2 * sizeof(Vector3<float>)];
    v2.Write(v1.Write(data));
    // now data is:
    //                                                 contents of v2
    //                                     vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
    // |X1|X1|X1|X1|Y1|Y1|Y1|Y1|Z1|Z1|Z1|Z1|X2|X2|X2|X2|Y2|Y2|Y2|Y2|Z2|Z2|Z2|Z2
    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    //          contents of v1 
    ```

## 现在，一些缺陷：

这个函数对io很有用，相当于`memcpy`向量上的a。但是，它有很多缺陷，主要是模板参数。直接将此类操作写入内存应该使用`char`，而不是其他东西。在内存中写入以覆盖类的内容（即，不是 io）是一种*非常糟糕的做法*，（赋值运算符是为这样的任务而设计的，它们更安全）。此外，以下示例不是自描述的：

```
vec.Write<MyTimerClass>(pointer); // Does not make sense if you are reading this line for the first time 
```

其次，内存复制存在问题。在这里，在解释中，我假设`Vector3`是一个简单的类型。并非总是如此。如果它有不同大小的虚函数和成员，内存中的布局将是实现定义的，例如：

```
 X, Y, Z            padding
        ------------------------    ----
|P|P|P|P|X|X|X|X|Y|Y|Y|Y|Z|Z|Z|Z|a|a|.|.
--------                        ----
 vtable                         some
 pointer                        other
                                member 
```

这对 io 来说是不可靠的。请参阅[此 SO 问题](https://stackoverflow.com/questions/1632600/memory-layout-c-objects)（接受的答案是：“这是*msvc*的工作原理”...）。而对于多重虚拟继承，它变成了一场真正的噩梦。

**顺便说一句，这种方法的安全实现类似于**：

```
template<typename IOBuffer>
bool Write(IOBuffer& buffer)
{
    return buffer << X << Y << Z;
} 
```

或更好：

```
virtual bool Write(IOBufferInterface& buffer)
{
    return buffer << X << Y << Z;
} 
```

它更易于理解、维护、调试等......

# objective-c - 有没有一种方法可以在 Objective-C 中将 BOOL 转换为 NSString？

> ID：15999364
> 
> 赞同：4
> 
> 时间：2013-04-14T13:06:14.983
> 
> 标签：objective-c

有没有一种方法可以在 Objective-C 中将 BOOL 转换为 NSString？

例如：

```
BOOL a = YES;
NSLog(@"a is %i",a); 
```

但输出是“a is 1”，我希望它打印 YES。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T13:08:27.320

您可以使用条件运算符从布尔值返回字符串。

```
BOOL a = YES;
NSLog(@"a is %@", a ? @"YES" : @"NO"); 
```

# qt - 如何更改控件的名称？

> ID：15999365
> 
> 赞同：0
> 
> 时间：2013-04-14T13:06:25.727
> 
> 标签：qt, controls

这可能很明显，但我遇到了问题。如何在 Qt 中更改控件的名称？即我在Qt Creator 中创建了一些控件（按钮/编辑/等...），它们有一些默认名称（例如pushButton_2、lineEdit），我想将它们更改为实际告诉我它们用途的不同名称。但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:16:14.570

您可以在 QtCreator 的设计器中通过以下几种方式进行操作：

*   在对象编辑器的上半部分选择一个控件，按`F2`，编辑名称，按`Enter`
*   双击对象编辑器（列`Object`）上半部分的控件，然后编辑名称并按`Enter`；
*   `objectName`选择一个控件，在对象编辑器的下半部分找到标签，选择它并单击`Value`列，编辑名称并按`Enter`。

# performance - 将 IP 映射到城市的数据结构

> ID：15999367
> 
> 赞同：2
> 
> 时间：2013-04-14T13:06:45.450
> 
> 标签：performance, algorithm, data-structures

我正在阅读来自不同公司的面试问题，我遇到了这个问题：

```
You are given a fixed file. The format of each line is city name, ip address
range. Construct a data structure and design algorithm to achieve efficient
mapping from an ip address to city name. 
```

我认为可行的一种方法是使用简单的链接列表，尽管在线性时间内，您拥有给定范围的起始 IP，并且在节点内您拥有城市和范围内的最终 IP。

因此，在查找某些内容时，您遍历列表并检查开始和结束 IP 地址以查看给定 IP 是否在任何范围内。

这假设 IP 范围不重叠。

有人对此有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:13:29.903

您可以将 IP 地址存储在 32 位上，因此只需将它们转换为整数，然后将这些对存储在密钥为 IP`(IP, City)`的任何[平衡 BST](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)或[哈希表中。](http://en.wikipedia.org/wiki/Hash_table)以这种方式查找复杂性将是对数或恒定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:14:38.930

您可以为每个虚线部分创建一个树结构，叶节点将是城市

```
Root
|
[0-13]     [14-255]
|              |
[0-255]    [0-173],    [174-255]
|              |                |
[0-255]    [0-255]      [0-255]
|              |                |
[0-255]    [0-255]      [0-255]
|              |                |
London   Belfast      Berlin 
```

等等，然后在地图上显示一个城市的地址，您只需在树上行走，因此 14.183.1.123 将是柏林

# javascript - 为什么我的阵列无法正常工作 [Google Map Api V3]

> ID：15999373
> 
> 赞同：-1
> 
> 时间：2013-04-14T13:06:56.310
> 
> 标签：javascript, google-maps-api-3

所以我想做的是当用户点击标记时，它会将用户链接到特定的 URL，但是它有问题，它只链接到最后一个数组 URL。我可以知道为什么吗？

```
 for (var key in places){
            var myPlace = places[key];
            if (myPlace) {
                var marker = new google.maps.Marker({
                    map: map,
                    url:myPlace.infowin_html,
                    position: new google.maps.LatLng(myPlace.position.lat, myPlace.position.lng)
                });
                createTooltip(marker, key); 
                google.maps.event.addListener(marker, 'click', function() {
                window.location.href=marker.url;
            }); 

        }

    } 
```

我的js

```
var places =Array();
places.push({
infowin_html:"https:www.facebook.com",
tooltip_html:"<div><img       src='http://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Habs_flw_oak_park_home.jpg/220px-Habs_flw_oak_park_home.jpg' width='220' hieght='174' /></div><h3>Chow Kit, KL</h3><div><stong>Population:</strong> 52k</div>Click for more..", 
position:{lat:3.1597, lng:101.7000}
});

places.push({
infowin_html:"https:www.facebook.com",
tooltip_html:"<h3>Subang Jaya, Selangor</h3><div><stong>Population:</strong> 2.7m</div>Click for more..",
position:{lat:3.0394, lng:101.5878}
});

places.push({
infowin_html:"https:www.facebook.com",
tooltip_html:"<h3>Puchong Jaya, Selangor</h3><div><stong>Population:</strong> 74k</div>Click for more..",
position:{lat:3.0113, lng:101.6115}
});

places.push({
infowin_html:"asd",
tooltip_html:"<h3>Cyberjaya, Selangor</h3><div><stong>Population:</strong>   55k</div>Click for more..",
position:{lat:2.9225, lng:101.6550}
}); 
```

我得到的是“asd”网址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:11:45.520

问题是匿名函数。你没有。这意味着，in 标记是循环的最后一个值。这是自闭症谱系障碍。所以你需要这样的东西，这样每次循环时都不会覆盖标记，并将值保留在你的处理程序中。

```
for (var key in places){
   (function(myPlace){
        if (myPlace) {
            var marker = new google.maps.Marker({
                map: map,
                url:myPlace.infowin_html,
                position: new google.maps.LatLng(myPlace.position.lat, myPlace.position.lng)
            });
            createTooltip(marker, key); 
            google.maps.event.addListener(marker, 'click', function() {
                window.location.href=marker.url;
            }); 
        }
    })(places[key]);
 } 
```

# java - Facebook OAuth 异常：redirect_uri 缺失

> ID：15999378
> 
> 赞同：0
> 
> 时间：2013-04-14T13:07:25.810
> 
> 标签：java, facebook, playframework-2.0, oauth-2.0

我是 JAVA 新手，使用 play 框架创建网站。我正在尝试将 Facebook oauth 集成到我的网站中。我拥有的代码是：

```
// This function is called to populate _facebook, _facebookAuthParams and
// _facebookTokenParams. The first two are HashMaps and _facebookTokenParams is 
// ObjectNode
private static void _initFacebook() {

    String _url = "shutterdeck.com:8080";

    _facebook.put("authUrl", "https://graph.facebook.com/oauth/authorize");
    _facebook.put("tokenUrl", "https://graph.facebook.com/oauth/access_token");
    _facebookAuthParams.put("scope", "email");
    _facebookAuthParams.put("responseType", "code");
    _facebookAuthParams.put("redirect_uri", _url + "/oauth/facebookRedirect");
    _facebookAuthParams.put("client_id", "..");
    _facebookTokenParams.put("grant_type", "authorization_code");
    _facebookTokenParams.put("redirect_uri", _url + "/oauth/facebookRedirect");
    _facebookTokenParams.put("scope", "email");
    _facebookTokenParams.put("client_id", "...");
    _facebookTokenParams.put("client_secret", "...");
} 
```

下面的函数尝试从 facebook 获取 access_token：

```
public static Result facebookRedirect() {
    Map<String, String[]> query = request().queryString();
    if (query.containsKey("code")) {
        String[] value = query.get("code");
        String code = value[0];
        if (value.length > 1 || code.isEmpty())
            return redirect("/");

        String tokenUrl = _getTokenUrl(_facebook);
        _facebookTokenParams.put("code", code);
        Promise<WS.Response> promise = WS.url(tokenUrl).post(_facebookTokenParams);
        Function<WS.Response, Result> f = new Function<WS.Response, Result>() {
            public Result apply(WS.Response response) {
                    System.out.println(response.asJson()); // This prints an error json from face book
                    String token = response.asJson().get("token").asText();
                    _getFacebookUserInfo(token);
                    return ok("/");
            }
        };
        return async(promise.map(f));
    }
    return ok("404");
} 
```

我从 Facebook 得到的错误是：

```
{"error":{"message":"Missing redirect_uri parameter.","type":"OAuthException","code":191}} 
```

`_facebookTokenParams`我验证了传递给的 redirect_url 存在`post`。我在这里缺少什么？此外，我如何查看`POST request`发送到 Facebook 的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-10T00:22:38.157

出于某种原因，Facebook Graph API 端点希望我们将 URL 中的 client_id、client_secret 和 grant_type 参数作为 url 编码参数传递。这意味着 grant_type 上没有空格——凭据之间只有一个逗号！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:24:05.503

您必须在查询字符串中传递参数。

# javascript - 在窗口卸载时运行代码？

> ID：15999384
> 
> 赞同：2
> 
> 时间：2013-04-14T13:07:52.377
> 
> 标签：javascript, android, jquery, html

我想知道是否有办法捕获 Android 2.1+ 浏览器支持的页面卸载事件（必须支持 2.1）

我试过了

```
$(window).unload(function () { });
$(window).on('beforeunload', function () { }); 
```

两者似乎都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:09:38.437

尝试使用纯 JavaScript：

```
window.onunload = function(e) {
    return alert('Are you sure you want to leave');
}; 
```

根据此[**消息来源**](https://developer.mozilla.org/en-US/docs/DOM/window.onunload)，其设备兼容。

但是，他们建议`addEventListener`与`unload`事件一起使用：

```
 window.addEventListener('unload', function(event) {
        alert('Are you sure you want to leave');
  }); 
```

# sql - 使用 SQL 访问数据库

> ID：15999393
> 
> 赞同：-1
> 
> 时间：2013-04-14T13:08:45.283
> 
> 标签：sql

我正在使用 SQL通过我`Inputted Value`的`VAL`GUI 软件`Siemens' WinCC`（我已经完成了用户键入`24.5`和我的脚本显示与输入对应的值 30 的任务。我有一种情况，用户键入一个不在表中的值。与用户键一样，`26.5`它应该输出 和 之间`30`的插值`35`。有什么建议么？

```
Inputted Value
24.5
28
25

VAL
30
35
44 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:35:59.303

应该这样做（经过测试）（针对 MS Access 进行了修订）：

1) 创建名为 interpolation_left 的第一个查询：

```
SELECT TOP 1 1 AS id, [val] AS val_left
FROM TABS
WHERE [Inputted Value] < 'key'
ORDER BY [Inputted value] DESC; 
```

2) 创建名为 interpolation_right 的第二个查询：

```
SELECT TOP 1 1 AS id, [val] AS val_right
FROM TABS
WHERE 'key' < [Inputted Value]
ORDER BY [Inputted value]; 
```

3）通过将前两个查询放在一起创建最终查询

```
SELECT (val_left + val_right) / 2 as result
FROM   interpolation_left
INNER JOIN  interpolation_right
ON interpolation_left.id = interpolation_right.id 
```

'key' 是用户键入值的参数。

# grails - 检查用户是否在主页上

> ID：15999394
> 
> 赞同：0
> 
> 时间：2013-04-14T13:08:45.770
> 
> 标签：grails, gsp

我有一个标题模板，我想在其中检查用户是否在主页上（index.gsp）。我试过了： <g:set var="isHome" value="${params.get("controller") == null}" />

但是对于我没有控制器的错误，这也返回 true。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:49:34.260

如果您的标题在布局中，您可以使用 Sitemesh 页面参数。添加到您的主页：

```
<parameter name="isHome" value="true"/> 
```

然后在您的布局中：

```
<g:set var="isHome" value="${pageProperty(name: 'page.isHome')}"/> 
```

# android - Android 错误：应用程序“应用程序名称”已意外停止。请再试一次

> ID：15999395
> 
> 赞同：0
> 
> 时间：2013-04-14T13:08:47.610
> 
> 标签：android, android-emulator

我是 Android 新手，在尝试启动打开相机、制作照片然后裁剪结果的应用程序时出现此错误。

我会附上一些代码，也许你可以帮助我

谢谢

$java代码

```
public class MainActivity extends Activity implements OnClickListener {

//keep track of camera capture intent
    final int CAMERA_CAPTURE = 1;
    //keep track of cropping intent
    final int PIC_CROP = 2;
    //captured picture uri
    private Uri picUri;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //retrieve a reference to the UI button
        Button captureBtn = (Button)findViewById(R.id.picture);
        //handle button clicks
        captureBtn.setOnClickListener(this);
    }

    /**
     * Click method to handle user pressing button to launch camera
     */
    public void onClick(View v) {
        if (v.getId() == R.id.picture) {     
            try {
                //use standard intent to capture an image
                Intent captureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                //we will handle the returned data in onActivityResult
                startActivityForResult(captureIntent, CAMERA_CAPTURE);
            }
            catch(ActivityNotFoundException anfe){
                //display an error message
                String errorMessage = "Whoops - your device doesn't support capturing images!";
                Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
                toast.show();
            }
        }
    }

    /**
     * Handle user returning from both capturing and cropping the image
     */
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            //user is returning from capturing an image using the camera
            if(requestCode == CAMERA_CAPTURE){
                //get the Uri for the captured image
                picUri = data.getData();
                //carry out the crop operation
                performCrop();
            }
            //user is returning from cropping the image
            else if(requestCode == PIC_CROP){
                //get the returned data
                Bundle extras = data.getExtras();
                //get the cropped bitmap
                Bitmap thePic = extras.getParcelable("data");
                //retrieve a reference to the ImageView
                ImageView picView = (ImageView)findViewById(R.id.picture);
                //display the returned cropped image
                picView.setImageBitmap(thePic);
            }
        }
    }

    /**
     * Helper method to carry out crop operation
     */
    private void performCrop(){
        //take care of exceptions
        try {
            //call the standard crop action intent (the user device may not support it)
            Intent cropIntent = new Intent("com.android.camera.action.CROP"); 
            //indicate image type and Uri
            cropIntent.setDataAndType(picUri, "image/*");
            //set crop properties
            cropIntent.putExtra("crop", "true");
            //indicate aspect of desired crop
            cropIntent.putExtra("aspectX", 1);
            cropIntent.putExtra("aspectY", 1);
            //indicate output X and Y
            cropIntent.putExtra("outputX", 256);
            cropIntent.putExtra("outputY", 256);
            //retrieve data on return
            cropIntent.putExtra("return-data", true);
            //start the activity - we handle returning in onActivityResult
            startActivityForResult(cropIntent, PIC_CROP);  
        }
        //respond to users whose devices do not support the crop action
        catch(ActivityNotFoundException anfe){
            //display an error message
            String errorMessage = "Whoops - your device doesn't support the crop action!";
            Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
            toast.show();
        }
    }
} 
```

$xml 主要活动

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/intro"
    android:layout_margin="3dp"
    android:textStyle="bold" />
<Button
android:id="@+id/capture_btn"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/capture"
/>
<ImageView 
    android:id="@+id/picture"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:contentDescription="@string/picture"
android:layout_margin="5dp"
android:background="@drawable/pic_border" />

</LinearLayout> 
```

$xml 字符串

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

<string name="intro">Capture a picture to crop!</string>
<string name="app_name">Shoot And Crop</string>
<string name="picture">Picture</string>
<string name="capture">Launch Camera</string>

</resources> 
```

来自drawable的$xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:dither="true">
<gradient
     android:startColor="#99ffffff"
     android:endColor="#99ffffff"
     android:centerColor="#00000000"
     android:angle="90" />

<padding android:left="10dp" android:top="10dp"
        android:right="10dp" android:bottom="10dp" />
<corners android:radius="5dp" />
<stroke
    android:width="2dp"
    android:color="#ccffffff"
    />
</shape> 
```

泰

LOGCAT

```
04-14 14:48:04.590: D/AndroidRuntime(894): Shutting down VM
04-14 14:48:04.602: W/dalvikvm(894): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-14 14:48:04.720: E/AndroidRuntime(894): FATAL EXCEPTION: main
04-14 14:48:04.720: E/AndroidRuntime(894): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.camera/com.example.camera.MainActivity}: java.lang.ClassCastException: android.widget.ImageView cannot be cast to android.widget.Button
04-14 14:48:04.720: E/AndroidRuntime(894):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-14 14:48:04.720: E/AndroidRuntime(894):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-14 14:48:04.720: E/AndroidRuntime(894):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-14 14:48:04.720: E/AndroidRuntime(894):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-14 14:48:04.720: E/AndroidRuntime(894):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 14:48:04.720: E/AndroidRuntime(894):  at android.os.Looper.loop(Looper.java:137)
04-14 14:48:04.720: E/AndroidRuntime(894):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-14 14:48:04.720: E/AndroidRuntime(894):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 14:48:04.720: E/AndroidRuntime(894):  at java.lang.reflect.Method.invoke(Method.java:511)
04-14 14:48:04.720: E/AndroidRuntime(894):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-14 14:48:04.720: E/AndroidRuntime(894):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-14 14:48:04.720: E/AndroidRuntime(894):  at dalvik.system.NativeStart.main(Native Method)
04-14 14:48:04.720: E/AndroidRuntime(894): Caused by: java.lang.ClassCastException: android.widget.ImageView cannot be cast to android.widget.Button
04-14 14:48:04.720: E/AndroidRuntime(894):  at com.example.camera.MainActivity.onCreate(MainActivity.java:32)
04-14 14:48:04.720: E/AndroidRuntime(894):  at android.app.Activity.performCreate(Activity.java:5104)
04-14 14:48:04.720: E/AndroidRuntime(894):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-14 14:48:04.720: E/AndroidRuntime(894):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-14 14:48:04.720: E/AndroidRuntime(894):  ... 11 more
04-14 14:53:50.511: D/AndroidRuntime(1027): Shutting down VM
04-14 14:53:50.511: W/dalvikvm(1027): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-14 14:53:50.531: E/AndroidRuntime(1027): FATAL EXCEPTION: main
04-14 14:53:50.531: E/AndroidRuntime(1027): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.camera/com.example.camera.MainActivity}: java.lang.ClassCastException: android.widget.ImageView cannot be cast to android.widget.Button
04-14 14:53:50.531: E/AndroidRuntime(1027):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at android.os.Looper.loop(Looper.java:137)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at java.lang.reflect.Method.invokeNative(Native Method)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at java.lang.reflect.Method.invoke(Method.java:511)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at dalvik.system.NativeStart.main(Native Method)
04-14 14:53:50.531: E/AndroidRuntime(1027): Caused by: java.lang.ClassCastException: android.widget.ImageView cannot be cast to android.widget.Button
04-14 14:53:50.531: E/AndroidRuntime(1027):     at com.example.camera.MainActivity.onCreate(MainActivity.java:32)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at android.app.Activity.performCreate(Activity.java:5104)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-14 14:53:50.531: E/AndroidRuntime(1027):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-14 14:53:50.531: E/AndroidRuntime(1027):     ... 11 more
04-14 14:53:53.302: I/Process(1027): Sending signal. PID: 1027 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:05:39.457

改变

```
Button captureBtn = (Button)findViewById(R.id.picture); 
```

至

```
Button captureBtn = (Button)findViewById(R.id.capture_btn); 
```

“图片”是 ImageView 的 id，您不能将其转换为 Button

# java - 我在 HashMap 中有 4 个项目，并希望将它们存储在一个数组中

> ID：15999406
> 
> 赞同：0
> 
> 时间：2013-04-14T13:09:46.160
> 
> 标签：java

我想检索存储在**hashmap**中的对象，所有对象都属于同一类型并希望将它们存储在数组中。我尝试了很多东西，但仍然没有成功： **Holding 是一个由抽象类 AbstractHolding实现的接口，并由****Book 和 Video**两个类进一步**扩展，**它们还实现了标准实践的接口。我已经使用视频和书籍类的构造函数存储了这些项目，并且在使用调试时它显示了正确的长度和内容。我写了这段代码...

 **```
public Holding[] getAllHoldings() {
        System.out.println(holdingMap.values().toArray().length);
        Holding[] holding = (Holding[])holdingMap.values().toArray();

        return holding;

    } 
```

但得到 [Ljava.lang.Object; 不能转换为 [Llms.model.Holding;

我不明白存储的对象何时是 Holding 类型，那么为什么会发生这种转换错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:12:23.513

试试`holdingMap.values().toArray(new Holding[0]);`吧

toArray(T[] a) 方法将使用

```
java.lang.reflect.Array.newInstance(a.getClass().getComponentType(), size) 
```

创建类型为 T 的数组，可以安全地转换为 T[]**

# iphone - 使用类方法而不是 init instance 有什么好处，反之亦然？

> ID：15999407
> 
> 赞同：3
> 
> 时间：2013-04-14T13:09:49.673
> 
> 标签：iphone, collections

如果我写：

```
NSArray *arr=[[NSArray alloc]initWithObjects:@"Liza", @"Lipi", @"Rose"];
NSArray *arr=[NSArray arrayWithObjects:@"Liza", @"Lipi", @"Rose"]; 
```

这两个语句都会做同样的事情。那么这两个语句之间有什么区别，使用其中一个语句有什么好处呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:26:39.763

第二个是返回自动释放数组的便捷方法，第一个需要内存管理。在 ARC 下，这些是等效的，并且对于数组文字，两者可能都比您需要的更冗长，请`@[@"Liza", @"Lipi", @"Rose"]`改用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:11:31.403

在过去...如果您使用第一个，则`release`需要`arr`.

而第二个释放一个`autorelease`d 对象。

现在在 ARC 中，autoreleased 由编译器放置。

好处： `arrayWithObjects:`简洁，不需要一个额外的方法调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T13:12:11.723

在第一个语句中，您是生成实例的所有者（因此，如果不使用，您也有责任释放它`ARC`），而在另一个语句中，您不是（数组为您自动释放）。（在幕后`alloc`and`init`由`NSArray`实现调用）

# php - 将3列的总和合并到php mysql中的另一列

> ID：15999415
> 
> 赞同：0
> 
> 时间：2013-04-14T13:10:28.493
> 
> 标签：php, mysql, currency

我想将 mysql 表中 3 列（price_crore、price_lakh、price_thousand）的**总和**合并到另一个名为“**金额**”的列中。

例如 price_crore,price_lakh,price_thousand 的值如下 1,75,50。在**金额**列上我想要结果**17550000**

注意：根据印度货币系统：price_crore= 10,000,000（1 千万）和 price_lakh=100000（10 万）和 price_thousand=1000（1 千）。

**请帮助我在php**中实现上述结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:15:43.517

使用[concat](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)函数，例如：

```
select concat(sum(price_crore),sum(price_lakh),sum(price_thousand)) .. 
from mytable group by ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:05:32.257

我认为你只需要做数学：

```
select   price_crore
       , price_lakh
       , price_thousand
       ,   (price_crore    * 10000000)
         + (price_lakh     *   100000)
         + (price_thousand *     1000) as amount
from some_table 
```

# jquery - 元素销毁后，事件会自动解除绑定吗？

> ID：15999416
> 
> 赞同：7
> 
> 时间：2013-04-14T13:10:34.593
> 
> 标签：jquery

当它的元素被销毁时，事件会发生什么？据我所知，jQuery 在其全局“存储库”中仍然有该事件。就我而言，创建了很多元素，与事件绑定并再次销毁......

过度使用后是否需要害怕一些记忆问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:31:13.357

是的。如果您有很多附加到 html 元素的事件处理程序，那么您应该明确删除它们（通过使用 jQuery 方法，例如`remove`或`empty`代替例如`detach`或“常规”js）或更改您的事件“绑定”策略。我的意思是利用 jQuery 的事件委托。通过这种方式，您可以找到事件绑定元素集群的一些共同祖先，并将其绑定到事件。经验法则始终是尽量减少事件处理程序的数量。

# windows - %USERPROFILE% 空间错误

> ID：15999419
> 
> 赞同：2
> 
> 时间：2013-04-14T13:10:49.943
> 
> 标签：windows, batch-file, cmd

我想开始我的程序

```
start %USERPROFILE%\.myProgramm\myProgramm.exe 
```

但现在我收到一条弹出消息，即找不到文件夹 C:\Documets。这是由于缺少撇号（如`start '%USERPROFILE%\.myProgramm\myProgramm.exe'`. 这个怎么做？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T13:12:26.963

单引号不是`CMD`. 使用双引号：

```
start "" "%USERPROFILE%\.myProgramm\myProgramm.exe" 
```

**编辑：**添加了缺少的`title`参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:21:29.137

```
start "" "%USERPROFILE%\.myProgramm\myProgramm.exe" 
```

start 启动一个新的 cmd，然后解析要运行的参数。所以它有效；）

# matlab - 在matlab中绘制向量

> ID：15999420
> 
> 赞同：1
> 
> 时间：2013-04-14T13:11:07.913
> 
> 标签：matlab, plot

如何在 Matlab 中绘制以下向量？我不知道如何处理这个问题。我已经测试了绘图功能，但它说我必须先定义 phi，但是当我定义 phi 时尺寸不匹配，因此我不能使用绘图功能。提前致谢。

v = (cos(phi) sin(phi)) 从 0 到 360

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:24:08.660

我假设您正在尝试将 y=cos(phi) 绘制为 x=sin(phi) 的函数。如果是这样，那么

```
phi = linspace(0,2*pi,100);
x = sin(phi);
y = cos(phi);

figure;
plot(x,y) 
```

会做你想做的。如果您只想将 sin(phi) 和 cos(phi) 绘制为 phi 的函数，您可以这样做

```
plot(phi,x);
hold all
plot(phi,y); 
```

或者，更紧凑：

```
plot(phi, [x(:) y(:)]) 
```

在第二个参数中将两个系列创建为两列。

# html - 水平显示图像 CSS

> ID：15999421
> 
> 赞同：-1
> 
> 时间：2013-04-14T13:11:08.437
> 
> 标签：html, css, css-float, alignment

我的网站上的 CSS 样式有点困难，目前我有一排图像，我想沿着我的页面水平对齐。但刚才它在一行中垂直显示它们，我不知道为什么。所有的图像都存储在一个数组中，只是让它们排列起来就是问题所在。这是我的代码：

```
 .img{
float:left;
width:120px;
margin:auto;
margin-left:10px;
padding:5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:31:55.673

您应该将 . 添加到您的样式`display:inline-block`中。该`inline-block`值使您的 .img 不会在末尾显示换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-11T22:34:44.670

默认情况下，图像是`display: inline`. 这意味着如果容器中有空间，默认情况下它们不会水平清除其他元素。调整图像元素父容器的宽度：[示例](https://jsfiddle.net/arniemandla/263gqLp4/3/)

如果您希望图像水平扩展而与容器宽度`display: table-cell`无关，请在包装每个图像元素的 div 中使用样式（css）：[示例](https://jsfiddle.net/arniemandla/evqn3x19/)

# css - 如何创建这样的三角形？

> ID：15999429
> 
> 赞同：-2
> 
> 时间：2013-04-14T13:11:44.193
> 
> 标签：css

您好，我想知道如何在此模板的页脚顶部创建这些小三角形：http: [//demo.themezilla.com/classica/portfolio/redwood-publishing/](http://demo.themezilla.com/classica/portfolio/redwood-publishing/)。我在源代码中查看了 CSS，我发现了这个：

```
border-top: 1px solid # e0e0e0 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:13:22.100

那是[图](https://web.archive.org/web/20140530080304if_/http://turbo.themezilla.com/classica/wp-content/themes/classica/images/bg-foot.gif)！！！

你忘了看到这个：

```
#footer-container {
  background: url(images/bg-foot.gif) left top repeat-x #f5f5f5;
  margin: 80px 0 0 0;
} 
```

只是说，如果你想得到它，你需要这个 CSS：

```
.footer {
  background: url("http://turbo.themezilla.com/classica/wp-content/themes/classica/images/bg-foot.gif") left top repeat-x #f5f5f5;
} 
```

但未经他们许可，请勿对图片进行热链接**。**图像看起来是这样的：

[![](https://i.stack.imgur.com/7mU7Q.gif)](https://i.stack.imgur.com/7mU7Q.gif)

### 小提琴：http: [//jsfiddle.net/praveenscience/F5RVR/](http://jsfiddle.net/praveenscience/F5RVR/)

# ruby - Ruby 中的单块 AES 解密

> ID：15999431
> 
> 赞同：5
> 
> 时间：2013-04-14T13:11:48.223
> 
> 标签：ruby, cryptography, openssl, aes

我需要玩一些 AES 片段。

我有一些密文c和一个密钥k。密文已使用 AES-CBC 加密，并在前面加上 IV。不存在填充，纯文本的长度是 16 的倍数。

所以我这样做：

```
aes = OpenSSL::Cipher::Cipher.new("AES-128-CCB")
aes.decrypt
aes.key = k
aes.iv = c[0..15]
aes.update(c[16..63]) + aes.final 
```

它工作得很好。

现在我需要手动执行 CBC 模式，所以我需要对单个块进行“普通”AES 解密。

我正在尝试这个：

```
aes = OpenSSL::Cipher::Cipher.new("AES-128-ECB")
aes.decrypt
aes.key = k
aes.iv = c[0..15]
aes.update(c[16..31]) + aes.final 
```

它失败了

```
in `final': bad decrypt (OpenSSL::Cipher::CipherError) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T15:14:04.753

我假设您收到`final`错误，因为它默认使用填充。

```
decrypter.padding = 0 
```

同样要使用 ECB 模式手动执行 CBC 模式，设置 IV 将无济于事，您需要将解密的块与 IV （[或前一个密文块，如果您最终解密多个块](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)）进行异或。

# ios - iOS：以编程方式打开 Wi-Fi 设置屏幕

> ID：15999432
> 
> 赞同：1
> 
> 时间：2013-04-14T13:11:49.683
> 
> 标签：ios, objective-c

在我的应用程序中，我想提示用户从现有的 Wi-Fi 网络中进行选择。所以我想以编程方式打开 Wi-Fi 设置屏幕。它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:35:21.047

目前没有（公共）API 可以执行此操作 - 您需要找到设置应用程序的 URL 方案，然后弄清楚如何破解它以显示 wifi 屏幕。

即使您可以这样做，您的应用也*可能*会被 App Store 拒绝。

# .htaccess - htaccess 限制来自 URL 的网页文件

> ID：15999435
> 
> 赞同：1
> 
> 时间：2013-04-14T13:12:07.723
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我的目标是防止用户弄清楚我为我的网站使用的脚本语言。我的网站的 URL 结构是[http://example.com/login/](http://example.com/login/)，即[http://example.com/?page=login](http://example.com/?page=login)。

page 参数检查文件是否存在。例如*?page=login*将检查*login.php*文件是否存在并将其包含在*index.php*文件中作为要加载的请求页面。如果该页面不存在，则*error.php*页面将被替换，并显示“找不到页面”。

我想在这些条件下触发错误页面（将*?page=error*添加到查询中）：

> **条件 1：**文件扩展名添加到请求的 URI。示例：[http](http://example.com/login.php) ://example.com/login.php甚至 index.php 文件， [http ://example.com/index.php](http://example.com/index.php)
> 
> **条件2：**文件不存在。示例： [http](http://example.com/notinserver.php) ://example.com/notinserver.php或 [http://example.com/notinserver.whatever](http://example.com/notinserver.whatever)
> 
> **条件 3：**文件扩展名不是*css、js、jpg、jpeg、gif 或 png*文件（[http://example.com/images/logo.jpg](http://example.com/images/logo.jpg)）。为了清楚起见，URI 不能有句点，除非它是允许的扩展名，例如 [http://example.com/css/style.css](http://example.com/css/style.css)
> 
> **条件 4**：写入[http://example.com/index/时。](http://example.com/index/)网页不需要包含它自己。

我无法通过条件 1，因为服务器会由于默认页面[http://example.com/](http://example.com/)上的无限重定向或编写*index.php时引发内部错误。*这是我到目前为止所拥有的：

```
RewriteEngine On
RewriteBase /

RewriteRule ^([a-z]+)/ ?page=$1

RewriteCond %{REQUEST_URI} \.
RewriteRule . ?page=error [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:20:17.390

```
#Condition 1:
RewriteCond %{REQUEST_URI} \.php$
#Condition 3:
RewriteCond %{REQUEST_URI} ![\.jpg|\.gif|\.css|\.js]$
RewriteRule . ?page=error [L] 
```

# .net - 为表单身份验证配置 WebAPI

> ID：15999437
> 
> 赞同：1
> 
> 时间：2013-04-14T13:12:23.170
> 
> 标签：.net, asp.net-mvc, security, authentication, asp.net-web-api

我正在使用 webApi 并尝试实现表单身份验证。我的应用程序正在使用 simpleMembership。出于某种原因，我的控制器正在恢复到我的 Windows 凭据以检查请求是否经过身份验证，而它应该只对我的应用程序的数据库使用 simpleMembership：

![在此处输入图像描述](https://i.stack.imgur.com/hoxBw.png)

我在应用程序和我的应用程序主机配置文件中禁用了 Windows 和匿名身份验证......还需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:37:26.287

在您的 API 控制器中，当您需要强制执行身份验证（非公共控制器或操作）时，您需要使用

```
[Authorize] 
```

...根据您的需要，在控制器或操作级别设置属性。请注意，这是在 System.Web.Http 上实现的属性，而不是在 System.Web.Mvc 中实现的属性

您用于 Api 控制器的那个会像 System.Web.Mvc.AuthorizeAttribute 那样检查 Thread.CurrentPrincipal.Identity.IsAuthenticated 而不是 HttpContext.User.Identity.IsAuthenticated 。

您需要在每个请求上填充此 Principal，通常使用 DelegatingHandler，此链接对此进行了说明：

[http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/)

在上面的链接中，作者使用的是基本 HTTP 身份验证，它在每个请求中以纯文本形式传输凭据；但是您可以实施自己的身份验证策略以填充主体，这就是您所需要的。

# php - 以编程方式更新 Magento 属性

> ID：15999439
> 
> 赞同：8
> 
> 时间：2013-04-14T13:12:24.933
> 
> 标签：php, magento, magento-1.7

我一直在编写一个更新我的属性的脚本`add_ten_pence`，该属性是一个是/否布尔值。目前它通过`SKU's`数据库，但不幸的是它没有更新数据库。我已经粘贴了下面的脚本有人知道我哪里出错了吗？

该属性默认设置为“否”，我希望在脚本运行时将其更改为“是”，反之亦然。

```
require_once('app/Mage.php');

umask(0);
Mage::app('default');
Mage :: app ()->setCurrentStore(Mage_Core_Model_App :: ADMIN_STORE_ID);
$productCollection = Mage::getModel('catalog/product')->getCollection();

foreach($productCollection as $_product) 
{
    echo "\n".'updating '.$_product->getSku()."...\n";
    $product = Mage::getModel('catalog/product')->load($_product->getEntityId());
    $product->setAddTenPence(true);
    $product->save();
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-14T14:34:52.280

尝试保存单个属性而不是整个产品集合。

```
require_once('app/Mage.php');

umask(0);
Mage::app('default');
Mage::app()->setCurrentStore(Mage_Core_Model_App::ADMIN_STORE_ID);
$productCollection = Mage::getModel('catalog/product')->getCollection();

foreach($productCollection as $product) {
    echo 'updating ' . $product->getSku() . PHP_EOL;
    $product->setData('add_ten_pence', 1);
    $product->getResource()->saveAttribute($product, 'add_ten_pence');
} 
```

* * *

**更新**

更快的方法：

```
$productCollection = Mage::getModel('catalog/product')->getCollection();
$array_product = $productCollection->getAllIds();    
Mage::getSingleton('catalog/product_action')->updateAttributes($array_product, array('add_ten_pence' => 1), Mage_Core_Model_App::ADMIN_STORE_ID); 
```

（感谢[https://magento.stackexchange.com/users/146/marius](https://magento.stackexchange.com/users/146/marius)！）

# c++ - 有条件地启用一个子类型（类似于 enable_if 启用功能）

> ID：15999441
> 
> 赞同：6
> 
> 时间：2013-04-14T13:12:32.023
> 
> 标签：c++, templates, c++11, sfinae, typetraits

我有一个特征类，它通过推断成员函数的类型来定义“范围”（或容器、序列）的类型，如下所示：

```
template<class R>
struct range_type_traits
{
    // "iterator": The type of the iterators of a range
    using iterator = decltype(std::begin(std::declval<R>()));

    // "value_type": The (non-reference) type of the values of a range
    using value_type = typename std::remove_reference<decltype(*(std::declval<iterator>()))>::type;
}; 
```

我这样做的原因（而不是`R`直接使用 or的子类型`std::iterator_traits`）是为了支持某些具有`begin()`成员的模板库中的任何类型的容器，并且不需要容器定义一些`value_type`/`iterator`类型。据我所知，`std::iterator_traits`对于不使用对向 STL 公开其迭代器接口的容器，无法处理某种“密钥类型”，就像这样`std::map`做（例如：`QMap<K,T>`has `value_type = T`。您可以通过 . 访问密钥[`iterator::key()`](http://qt-project.org/doc/qt-4.8/qmap-iterator.html)）。

现在我想有条件地定义一个类型`key_type`iif`iterator`有一个函数`::key() const`并采用它的返回类型，类似于我对`value_type`. 如果我只是将定义放在现有的特征类中，那么对于不支持它的容器编译将失败。

SFINAE 与`std::enable_if`可以有条件地启用模板功能。如何有条件地扩展现有类/有条件地定义子类型？

像这样的草图：

```
template<class R>
struct range_type_traits
{
    // "iterator": The type of the iterators of a range
    using iterator = decltype(std::begin(std::declval<R>()));

    // "value_type": The (non-reference) type of the values of a range
    using value_type = typename std::remove_reference<decltype(*(std::declval<iterator>()))>::type;

    ENABLE_IF_COMPILATION_DOES_NOT_FAIL {
        // "key_type": The (non-reference) type of the keys of an associative range not using pairs in its STL-interface
        using key_type = typename std::remove_reference<decltype(std::declval<iterator>().key())>::type;
    }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T13:22:07.883

您可以在类模板上使用 SFINAE 来创建一个基类模板，该模板定义`key_type`是否且仅当满足您需要的条件：

```
namespace detail
{

    // Primary template (does not define key_type)
    template<typename R, typename = void>
    struct key_type_definer { };

    // Specialization using SFINAE to check for the existence of key() const
    // (does define key_type)
    template<typename R>
    struct key_type_definer<
        R,
        typename std::enable_if<
            std::is_same<
                decltype(std::declval<R const>().key()),
                decltype(std::declval<R const>().key())
                >::value
            >::type
        >
    {
        // Type alias definition
        using key_type = typename std::remove_reference<
            decltype(std::declval<R const>().key())
            >::type;
    };

} // end namespace detail 
```

然后，您可以通过这种方式`range_traits`从`key_type_definer`类模板派生您的类模板：

```
template<class R>
struct range_type_traits : detail::key_type_definer<R>
//                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
{
    // ...
}; 
```

`range_type_traits`现在将定义一个称为`key_type`当且仅当`R`具有成员函数的类型别名`R key() const`，其中`R`将是别名的类型`key_type`。

# java - 登录和访问课程？

> ID：15999448
> 
> 赞同：2
> 
> 时间：2013-04-14T13:13:31.747
> 
> 标签：java, login

过去几周我一直在学习 Java，我想为我的脚本添加更好的安全性。基本上我想要完成的是让用户使用一些论坛凭据登录。登录后，他们可以访问一些在线托管的 java .classes，他们可以运行但不能下载。

我不是要代码或片段，只是要更好地了解如何实现这一点。IE。我需要的一些有用的 Java 文档的链接。

我一直在搜索 Stackoverflow，但几乎已经迷失/混淆了不同的主题。

感谢所有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:24:11.160

如果您只是在过去几周内这样做，那么甚至不要尝试完成此操作。建立一个真正安全的环境需要大量的经验。如果你真的想尝试，你应该看看网络服务。

正如 Karthik Ramachandran 在[他对这个问题的回答中](https://stackoverflow.com/questions/4874507/secure-java-web-services)所说，您应该始终牢记：

> 首先使用 SSL 保护传输。如果您同时控制客户端和服务器，那么您可以要求 2-way SSL，这将确保只有受信任的客户端才能连接。
> 
> 其次，您可以实现 WS 安全协议。Web 服务安全标准倾向于处理三件事：身份验证、数字签名和加密/解密（来自 Spring-WS 文档）：
> 
> 验证。这是确定委托人是否是他们自称的人的过程。在这种情况下，“主体”通常是指可以在您的应用程序中执行操作的用户、设备或其他一些系统。
> 
> 数字签名。消息的数字签名是基于文档和签名者私钥的一条信息。它是通过使用散列函数和私有签名函数（使用签名者的私钥加密）创建的。
> 
> 加密和解密。加密是将数据转换为没有适当密钥就无法读取的形式的过程。它主要用于将信息隐藏起来，不让任何人知道。解密是加密的逆过程；它是将加密数据转换回可读形式的过程。
> 
> 这些功能中的每一个都有许多协议/标准，并且有许多 Java OSS 项目以合理、可用的方式实现各种安全协议/标准。
> 
> 我会特别关注 Sun 的 XWSS 和 APACHE WSS4J。Spring WS 实现了这两个 API，它们也很好地描述了各种组件： [http ://static.springsource.org/spring-ws/sites/2.0/reference/html/security.html](http://static.springsource.org/spring-ws/sites/2.0/reference/html/security.html)

# php - PHP / JQuery - PHP 脚本每 5 秒运行一次，但其中的 jquery 函数只运行一次

> ID：15999453
> 
> 赞同：0
> 
> 时间：2013-04-14T13:13:47.263
> 
> 标签：php, javascript, jquery, mysql, ajax

**代码有点混乱（我认为），但我希望你能理解，（是的，我知道我的 Mysql API 不是最好的，但有时间我会改变（这是一个大脚本））**

好吧，我有一个 PHP 脚本，它每 5 秒运行一次，如果在friend_requests 表中存在带有用户的 user_id 的任何行，它会在 Jquery 中发出通知，如果存在则运行 jquery 通知（类似于 facebook ）说用户已向他发送了好友请求。

但问题是 PHP 脚本每 5 秒运行一次，但是脚本中的 Jquery 函数说要在屏幕中打开通知框，只运行一次。如果我有一行用户的 user_id，就运行通知是否是第一次运行 php 代码，（如果前 5 秒已经过去，如果该行刚刚在 5 秒之后出现，则不会出现通知框），如果该行出现在前 5 秒. （但 PHP 代码的其余部分运行完美）

**朋友请求通知.php**

```
<?php include_once("includes/head.php"); ?>
<?php require_once("includes/connect/connect.php"); ?>
<?php require_once("includes/functions.php"); ?>
<?php require_once("includes/jquery.php"); ?>
<?php login_validation();

function friend_request_notification()
{
    global $db;
    global $userid;  

    $query_id_see = "SELECT user_id FROM friend_requests WHERE user_id={$userid}";
    $result_set3 = mysql_query($query_id_see, $db) or die(mysql_error());

    if ($id_requests = mysql_fetch_array($result_set3))
    {
        $select_requester_id = "SELECT user_id_requester FROM friend_requests WHERE user_id={$userid}";
        $result1=mysql_query($select_requester_id);

        $row = mysql_fetch_assoc($result1);
        $requester_id = $row['user_id_requester'];

        $select_requester_name = "SELECT * FROM members WHERE id={$requester_id}";
        $result2=mysql_query($select_requester_name);

        $row = mysql_fetch_assoc($result2);
        $requester_fname = $row['first_name'];
        $requester_lname = $row['last_name'];

        echo '
        <html>
        <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

       <link rel="stylesheet" type="text/css" href="style2.css" />
       <script src="jquery.facebookBeeper.js" type="text/javascript"></script>
       </head>
       <body>

       <div id="BeeperBox" class="UIBeeper">
         <div class="UIBeeper_Full">
            <div class="Beeps">
               <div class="UIBeep UIBeep_Top UIBeep_Bottom UIBeep_Selected" style="opacity: 1; ">
                  <a class="UIBeep_NonIntentional" href="#">
                     <div class="UIBeep_Icon">
                        <i class="beeper_icon image2"></i>
                     </div>
                     <span class="beeper_x">&nbsp;</span>
                     <div class="UIBeep_Title">
                        <span class="blueName"> ' . $requester_fname . ' ' . $requester_lname . '</span> has send you a friend request <span class="blueName">coise</span>.
                     </div>
                  </a>
               </div>
            </div>
         </div>
       </div>

       </body>
       </html>';

       $insert_table = "INSERT INTO friend_requests_notificated SELECT * FROM friend_requests WHERE user_id={$userid} ";
$delete_table = "DELETE FROM friend_requests WHERE user_id={$userid}";
$change_table1 = mysql_query($insert_table) or die(mysql_error());
$change_table2 = mysql_query($delete_table) or die(mysql_error());

    }
    else
    {

    }   
}

friend_request_notification();
?> 
```

* * *

**jquery.facebookBeeper.js**

```
$(document).ready(function () {
// set the time for the beeper to be displayed as 5000 milli seconds (5 seconds)
var timerId, delay = 5000;
var a = $("#BeeperBox"),
    b = $("a.control");;
//function to destroy the timeout

function stopHide() {
    clearTimeout(timerId);
}
//function to display the beeper and hide it after 5 seconds

function showTip() {
    a.show();
    timerId = setTimeout(function () {
        a.hide();
    }, delay);

}
    showTip();
//function to hide the beeper after five seconds

function startHide() {
    timerId = setTimeout(function () {
        a.hide();
    }, delay);
}
//display the beeper on cliking the "show beeper" button
b.click(showTip);
//Clear timeout to hide beeper on mouseover
//start timeout to hide beeper on mouseout
a.mouseenter(stopHide).mouseleave(startHide);

$('.beeper_x').click(function () {
    //hide the beeper when the close button on the beeper is clicked
    $("#BeeperBox").hide();
});

showTip();
}); 
```

* * *

**通知.js**

```
window.setInterval(function(){
    $('#notifications').load('friend_request_notification.php');

}, 5000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:19:11.533

看起来不错，但我猜有一个缓存问题，比如 JavaScript 从缓存中获取相同的文件。添加时间戳，以便每次都请求一个新文件。

```
window.setInterval(function(){
    $('#notifications').load('friend_request_notification.php?' + (new Date()).getMilliseconds());
}, 5000); 
```

这将强制浏览器在每次发送请求时下载一个新文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:23:27.570

我没有对此进行测试，但我猜它只加载一次，因为它是第一次加载并缓存文件。因此，它本质上不会第二次运行。

这是有道理的，否则这个人的缓存将有一百个相同文件的副本，这是没有用的。

让它在间隔运行时运行 javascript 文件中的函数。

```
window.setInterval(function(){
    $('#notifications').load('friend_request_notification.php');

    showTip() 
}, 5000); 
```

或类似的。您不应该尝试在这样的脚本中一遍又一遍地加载 javascript 文件。那个JS应该在首页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T13:55:38.287

重要的是要意识到`document.ready`在您正在加载新内容的主页中已经发生了这一点。

这意味着当您加载新脚本时，它将立即触发，在这种情况下，它将在它引用的 html 存在之前触发。

将脚本放在 html 之后`friend_request_notification.php`将确保 html 在脚本触发之前被加载到 DOM 中。

从结构上讲，您可能会考虑将所有代码包装`jquery.facebookBeeper.js`到包含在其中的函数中，`notifications.js`而不是每 5 秒对该脚本文件发出新请求，而是在`load`.

```
window.setInterval(function(){
    $('#notifications').load('friend_request_notification.php',function(){
          /* new content now exists in page, run code here*/
     });

    showTip() 
}, 5000); 
```

还应该注意，当您`var a = $("#BeeperBox"),`在页面加载时声明，然后用新的 html 替换该元素，`var a`将不会引用具有相同 ID 的新版本的 eleemnt。

# python - 检查年份是否在字符串中（4 个连续数字）

> ID：15999455
> 
> 赞同：5
> 
> 时间：2013-04-14T13:14:03.410
> 
> 标签：python, list, match

如何查找列表中的字符串是否包含年份（例如`1999`）。我想我会检查四个连续的数字，例如：`[1-2][0-9][0-9][0-9]`

如何对照清单检查？这是我已经尝试过的

```
for piece in reflist:
    if "\d{4}" in piece:
        # Do something

for piece in reflist:
    if re.match('\d{4}', piece):
        print piece + '\n' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T13:17:48.047

您想用于`re.search()`测试输入字符串中*任何位置的匹配项。*

为了更精确地匹配（最近）年份，您可以使用：

```
re.search(r'[12]\d{3}', piece) 
```

这将匹配从 1000 到 2999 的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-20T17:46:50.120

虽然`'\d{4}'`和`r'[12]\d{3}'`都将返回 4 个连续数字，但它们也将返回更大数字（如 199999）的前 4 位数字。

要获得像 的 OP 示例这样的年份`1999`，请包装`\s`将匹配空白字符的表达式。

```
r'\s[12]\d{3}\s' 
```

# html - 尝试从 asp 文件打开 html 文件时出现错误 404.4

> ID：15999456
> 
> 赞同：0
> 
> 时间：2013-04-14T13:14:14.480
> 
> 标签：html, iis, windows-7, asp-classic

我一直在做一个创建工资管理系统的项目。我有以下问题：当我尝试在 asp 文件中创建链接时，例如

```
.
.
if Found = 1 then
response.write("Welcome " & rec("firstname") & " " & rec("lastname"))
%>

<br><a href="admin_home.html">Click to continue....</a>

<%      
else
%>
.
. 
```

单击链接时，我不断收到以下错误：

```
HTTP Error 404.4 - Not Found
The resource you are looking for does not have a handler associated with it.

Module  IIS Web Core
Notification    MapRequestHandler
Handler Not yet determined
Error Code  0x80070002
Requested URL   http://localhost:80/Project/Home.html
Physical Path   C:\inetpub\wwwroot\Project\Home.html
Logon Method    Anonymous
Logon User  Anonymous 
```

通过 ASP 文件指向 html 文件的其他链接也存在同样的问题。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:27:05.247

我假设您已经安装了 aps 模块并且 asp 文件运行良好。在这种情况下，您没有在 IIS 的 web.config 中配置静态文件处理程序。

配置 >> [http://technet.microsoft.com/en-us/library/cc771240(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc771240(v=ws.10).aspx)

问候，

# java - 如何在使用 FXML 初始化 Java FX 中的场景后立即启动动画

> ID：15999460
> 
> 赞同：0
> 
> 时间：2013-04-14T13:14:53.440
> 
> 标签：java, animation, javafx-2, fxml

我正在用 Java FX 编写一个带有一些精美动画的应用程序。我想将文本节点**text_1**从左侧滑入可用舞台宽度的 20%。

```
public class SplashController implements Initializable {
public Democracy parent = null;

@FXML
public Text text1;
public Text text2;
public Text text3;

   public void animateIntro() {
       TranslateTransition t1_transl_1 = new TranslateTransition(new Duration(1500d),text1);
       t1_transl_1.setFromX(-100d);
       t1_transl_1.setByX((double)((20/100) * parent.getStage().getWidth()+100));
       // Here Democracy class has a static method to return its instance, which is assigned on class creation. I want to slide in the text_1 node to 20% of the total window width.
       //Here I am always getting **NaN**
       System.out.println((20d/100d) * parent.getStage().getWidth()); // Getting NaN
       System.out.println(parent.getStage().getScene().getWidth()); // Throwing Exception
       FadeTransition t1_fade_in = new FadeTransition(new Duration(1000d), text1);
       t1_fade_in.setFromValue(0);
       t1_fade_in.setToValue(100d);

       ParallelTransition t1_ptrans_1 = new ParallelTransition(text1,t1_fade_in,t1_transl_1);
       //With parallel transition I want to fade in and slide in the node at the same time.
       t1_ptrans_1.play();

    }

    @Override
    public void initialize(URL url, ResourceBundle rb) {
        parent = Democracy.getInstance();
        animateIntro();
    }    

} 
```

当我使用 Netbeans 的内置调试器时，我发现 parent 的 stage 变量中的大部分值都是 null。我认为这是因为那个阶段没有完全初始化，我得到了空值。是否有任何解决方法来检测完整的初始化？请帮我...

**编辑**：即使我添加了一个

```
while(!parent.getStage().isShowing()) {
try{
    sleep(100);
} catch(Exception e){} 
```

循环以确保仅在舞台可见后才调用 animateIntro() ，但我仍然无法获得宽度。请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:43:16.323

您可以尝试将侦听器绑定到阶段[widthProperty](http://docs.oracle.com/javafx/2/api/javafx/stage/Window.html#widthProperty)并等待实际包含数字的更改。

# google-maps - 谷歌地图 API 获取 GPS 坐标

> ID：15999463
> 
> 赞同：0
> 
> 时间：2013-04-14T13:15:14.260
> 
> 标签：google-maps, google-maps-api-3, gps, google-maps-api-2

我尝试通过 Google Map API 获取某些地方的 GPS 坐标，但它不起作用。下面是一个示例： [http](http://maps.google.com/maps/geo?q=Hungary,%20Szeged&hl=en&key=MY_API_KEY) ://maps.google.com/maps/geo?q=Hungary,%20Szeged&hl =en&key=MY_API_KEY MY_API_KEY 从 Google API 控制台获取的位置。我还开启了 Google Maps API v2、Google Maps API v3 和 Google Maps Coordinate API。当我加载 URL 时，我得到了这个：

```
{
  "Status": {
    "code": 610,
    "request": "geocode"
  }
} 
```

610 表示错误的 API 密钥。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:25:15.853

不要使用已弃用的 v2 API，使用当前的[Google Maps Geocoding API v3](https://developers.google.com/maps/documentation/geocoding/)

# matlab - 在 Matlab 中启动神经 OCR 识别

> ID：15999464
> 
> 赞同：-3
> 
> 时间：2013-04-14T13:15:19.287
> 
> 标签：matlab, neural-network, ocr

我正在尝试在 MatLab 中使用神经网络实现基本的 OCR 编程。我已经理解了 MathWorks 网站上的示例，但我仍然不确定如何将我自己的数据集输入到神经网络的 nprtool 中。1.我将如何创建自己的由数字组成的数据集，或者我在网上哪里可以获得数据集。2.训练神经网络后，如何让MATLAB从图像中识别字符。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:15:53.920

[您可以在此处](http://yann.lecun.com/exdb/mnist/)从 MNIST 数据库中找到在线数字图像数据集。

通常，在 Matlab 中，您需要处理每个数字图像以将整个图像像素矩阵转换为像素向量（或图像中的某种特征）。每个数字图像都有自己的特征输入向量。

您将通过将这些特征向量中的许多附加到一个训练矩阵（通常大小为 numImages x numFeatures）中来训练您的神经网络。一旦你的网络经过训练，你就可以从任何数字图像中提供一个新的特征向量，网络将对其进行处理并返回其预测输出。

你也可以参考这个关于数字识别的[Kaggle 竞赛以获得进一步的帮助。](http://www.kaggle.com/c/digit-recognizer)

# php - 在数组的单独变量中分配索引和值

> ID：15999466
> 
> 赞同：1
> 
> 时间：2013-04-14T13:15:28.820
> 
> 标签：php, arrays

当我使用php 函数`Array ( ['6'] => mobile )`打印我的数组时，我有以下数组。`print_r`我需要将数组的索引和值分隔在两个不同的变量中。

**实际代码是**

```
$ques=$_POST['selector'];
$count = count($ques);
for($i=0; $i < $count; $i++)
{
    print_r ($ques)."\n";
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:18:00.767

您可以通过以下方式执行此操作：

```
foreach ($ques as $key => $value) {
    echo $key . ' = ' . $value;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T13:17:06.360

```
<?php print_r( array_keys( $array ) ); ?>
<?php print_r( array_values( $array ) ); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T13:30:46.250

```
foreach ($ques as $key => $value) {
    $variable1 = $variable1 . ',' . $key;
    $variable2 = $variable1 . ',' . $value;
} 
```

如果这两个变量的值超过 1，则可以用 substr 分隔逗号。

# java - 从另一个对象列表中提取对象列表

> ID：15999468
> 
> 赞同：6
> 
> 时间：2013-04-14T13:15:42.430
> 
> 标签：java

我有一个`List<User> users`，其中类`User`有一个属性`username`。我还有一个`List<User> activeUsers`。让`users = activeUsers + inactiveUsers`. 现在我想`inactiveUsers`从`users`基于`username`属性中提取。我使用两个 for 循环解决了这个问题。我认为这不是有效的方法。所以如果有人知道如何有效地完成它，请告诉我。

例如，我有 activeUsers[1,3] 和 users[1,2,3,4] 并且想要构建 inactiveUsers[2,4]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:56:25.183

在 Java 中，您可以使用[`Collection`](http://java.sun.com/j2se/1.4.2/docs/api/java/util/Collection.html)接口的[`removeAll`](http://java.sun.com/j2se/1.4.2/docs/api/java/util/Collection.html#removeAll(java.util.Collection))方法。

```
// Create a couple ArrayList objects and populate them
// with some delicious fruits.
Collection firstList = new ArrayList() {{
    add("user1");
    add("user2");
}};

Collection secondList = new ArrayList() {{
    add("user1");
    add("user1");
    add("user3");
    add("user4");
}};

// Show the "before" lists
System.out.println("First List: " + firstList);
System.out.println("Second List: " + secondList);

// Remove all elements in firstList from secondList
secondList.removeAll(firstList);

// Show the "after" list
System.out.println("Result: " + secondList); 
```

上面的代码将产生以下输出：

```
First List: [user1, user2]
Second List: [user1, user2, user3, user4]
Result: [user3, user4] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:49:57.413

您可以根据用户是否处于活动状态将用户存储在 Set 中，我更喜欢 User 上的属性，但我想您不希望在您的此分配中使用该属性。使用此代码，您的问题可以在 O(n) 时间内解决。假设你没有弄乱用户中的 equals/hashCode。

```
package com.stackoverflow.q15999468;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

public class Users
{
    public static void main(String[] args)
    {
        List<User> users = Arrays.asList(u1,u2,u3,u4,u5);
        List<User> activeUsers = Arrays.asList(u3,u5);

        Set<User> activeUsersSet = new HashSet<User>(activeUsers);

        List<User> inactiveUsers = new ArrayList<User>();

        for(User user : users)
        {
            if(!activeUsersSet.contains(user))
            {
                inactiveUsers.add(user);
            }
        }
        System.out.println("Inactive users: " + inactiveUsers);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T13:23:55.190

好吧，基于修改`User`问题的类别和性质的限制，没有办法比`o(n^2)`使用两个列表（即两个循环）少。当然，如果您可以拥有每种类型的两个列表，那么您的问题就完成了。

但是因为你不能比逻辑是：（假设你的结构只是列表）

```
Iterate users list (o(n)) :
   - Search the active users list for the current user (o(n)) 
```

无论你怎么看，你都会得到`o(n^2)`

如果您可以修改为具有激活属性，则可以通过一次搜索`User`轻松地将问题减少到`o(n)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T13:59:32.083

这应该工作

```
List<User> inactiveUsers = new ArrayList<User>(users);
inactiveUsers.removeAll(activeUsers) ; 
```

# linux - 用于编程和黑客的 linux 发行版是什么？

> ID：15999471
> 
> 赞同：0
> 
> 时间：2013-04-14T13:15:56.573
> 
> 标签：linux, operating-system, system

有人可以告诉我哪个 linux 发行版更好。Linux mint 还是 Kali linux？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T13:25:51.463

我认为这个问题不属于这里，但我会尽力回答。几乎每个发行版都适合编程，因为您可以在每个发行版中安装所需的所有工具。选择您喜欢的发行版。

如果您刚刚开始并且不熟悉 linux，我建议您尝试 Ubuntu 或 Mint。我对 Kali linux 没有任何经验，但根据维基百科的文章，它针对数字取证，包括wireshark、nmap 和其他网络工具。同样，这些是您可以安装在每个 Linux 发行版中的工具。

# session - 使用多个 curl 脚本时如何维护会话

> ID：15999473
> 
> 赞同：0
> 
> 时间：2013-04-14T13:16:06.827
> 
> 标签：session, curl

我使用 curl 登录网站。代码是：

```
<?php

$cookie_file    =  tempnam('./temp','cookie');
$login_url      =  'http://bbs.xxxx.com/login.php';
$post_fields    =  'cktime=31536000&step=2&pwuser=xx&pwpwd=111111';

$ch = curl_init($login_url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file);
curl_exec($ch);
curl_close($ch);

$url='http://bbs.xxx.com/userpay.php';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file);
$contents = curl_exec($ch);
preg_match("/<li>  (.*)<\/li>/",$contents,$arr);
echo $arr[1];
curl_close($ch);
?> 
```

它工作正常，但问题是当我把它分成两个文件（a.php，b.php）时，它不起作用。

我制作一个.php，如：

```
<?php

    $cookie_file    =  tempnam('./temp','cookie');
    $login_url      =  'http://bbs.xxxx.com/login.php';
    $post_fields    =  'cktime=31536000&step=2&pwuser=xx&pwpwd=111111';

    $ch = curl_init($login_url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields);
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file);
    curl_exec($ch);
    curl_close($ch);
?> 
```

和 b.php 像：

```
<?php

    $cookie_file    =  tempnam('./temp','cookie');

    $url='http://bbs.xxx.com/userpay.php';
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file);
    $contents = curl_exec($ch);
    preg_match("/<li>  (.*)<\/li>/",$contents,$arr);
    echo $arr[1];
    curl_close($ch);
?> 
```

我首先访问a.php，然后访问b.php。它不起作用！！！！谁能帮我？不同的curl脚本不能共享会话？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:55:59.023

在第一个代码中，您将一个 $cookie_file 用于两个请求。
您应该在 a.php 和 b.php 中使用相同的 $cookie_file。
但是你创建了两个不同的 $cookie_file

```
$cookie_file    =  tempnam('./temp','cookie'); 
```

您在 a.php 中创建一个。
然后在 b.php 中创建另一个不同的。

# fubumvc - Web 服务器配置为不列出此目录的内容

> ID：15999474
> 
> 赞同：4
> 
> 时间：2013-04-14T13:16:08.010
> 
> 标签：fubumvc

使用 Visual Studio 2012：

1.  我创建了一个“ASP.NET 空 Web 应用程序”（使用 C#）。
2.  我使用 NuGet 安装`FubuMVC`包。
3.  当我运行应用程序（使用 IIS Express）时，我得到“欢迎来到 FubuMVC！” 页面告诉我删除`FubuMVC.GettingStarted.dll`文件并设置主页。
4.  所以我做了这两件事，实现了一个`HomeController`简单地`"Hello World"`从`Index`.

我得到一个 IIS 错误，而不是预期的“Hello World”：`The Web server is configured to not list the contents of this directory.`

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T08:42:21.050

试试这个 cmd => 不要忘记以管理员身份运行

%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -ir

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T18:22:00.887

您是否在 Global.asax 中激活了 FubuMVC？当没有 FubuMVC 应用程序时，我通常会看到该错误。

所以在 Application_Start() （或任何它真正的名字）中，你需要类似的东西：

FubuApplication.DefaultPolicies().StructureMap(new Container()).Bootstrap();

你在说什么：1.) 使用什么政策/惯例 2.) 你的 IoC 容器是什么

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T23:45:34.183

通常，如果我遇到这种情况，那是因为我与项目中的路线和文件夹发生冲突。例如，我可能有一个名为“Unit”的文件夹，在其中我有一个名为“UnitEndpoint”的类，其方法为“get_unit”（假设我使用的是 FubuMVC 默认值，它应该映射到“/unit”作为路由）。

在这种情况下，浏览到“/unit”将导致此错误，因为 IIS 认为我正在尝试列出“Unit”文件夹的内容。重命名端点或文件夹以消除冲突将修复它（例如，将“Unit”文件夹重命名为“Units”）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-20T05:24:07.400

刚刚尝试用一个全新的项目重现您的问题；事实证明，问题在于示例中的说明没有跟上 FubuMVC 中的更改。

说明告诉您创建一个名为“MyHomeController”的类并向其添加 Index() 方法。这曾经有效，因为路由的默认规则之一是使用名称以“Controller”结尾的任何类。

但在较新的版本中，默认值已更改，该规则现在查找以“EndPoint”结尾的类。

因此，如果您将类的名称从“MyHomeController”更改为“MyHomeEndpoint”，它应该可以工作。

另外，请记住，应用程序池需要重新启动才能使新配置生效，因此您可能需要修改 web.config（或强制 IISExpress 重新启动）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T16:05:12.227

我建议您重新编译您的应用程序或至少触摸您的 global.asax - 看起来您需要重新运行 App_Start 方法。

# c# - Newtonsoft.Json.JsonConvert.SerializeObject 单项与多项

> ID：15999478
> 
> 赞同：0
> 
> 时间：2013-04-14T13:16:15.870
> 
> 标签：c#, json

发现用单个项目和多个项目序列化 XML 对象给了我不同的格式，因此访问它会有所不同。

例如，对于单个项目：

```
{
    "schemalist": {
        "schema": {
            "fieldid": "email",
            "displayname": "email",            
        }
    }
} 
```

和

```
{
    "schemalist": {
        "schema": [
            {
                "fieldid": "name",
                "displayname": "name",                
            },
            {
                "fieldid": "email",
                "displayname": "email",                
            }
        ]
    }
} 
```

所以当我解析它们 jQuery.ParseJSON 时，我必须以不同的方式访问它们

schemalist.schema.fieldid 和 schemalist.schema[0].fieldid

有没有办法即使使用单个项目也可以转换为 json，所以我可以使用 schemalist.schema[0].fieldid 甚至跨单个、多个项目？

谢谢！

编辑：这是我的 xml 输入：

```
<schemalist>
<schema>
    <fieldid><![CDATA[name]]></fieldid>
    <displayname><![CDATA[name]]></displayname>        
</schema>
<schema>
    <fieldid><![CDATA[email]]></fieldid>
    <displayname><![CDATA[email]]></displayname>        
</schema> 
```

但有时返回可能只有一个模式：

```
<schemalist>    
<schema>
    <fieldid><![CDATA[email]]></fieldid>
    <displayname><![CDATA[email]]></displayname>        
</schema>    
</schemalist> 
```

然后我会像这样进行转换：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(xml);
return Newtonsoft.Json.JsonConvert.SerializeObject(doc); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:43:36.127

好吧，我最终要做的是删除该属性，然后再次添加它。

```
// run the code below with $(schemalist.schemalist.schema).length == 1
// create a schema array 
var schema = [];
schema.push(schemalist.schemalist.schema);

// delete the property
delete schemalist.schemalist.schema;
schemalist['schema'] = schema; 
```

所以不要访问属性 fieldid：schemalist.schema.fieldid，

我可以使用 schemalist.schema[i].fieldid

即使只有一个元素，哈！

# configuration - Cassandra 提交日志是否只是（内存中）堆的备份

> ID：15999481
> 
> 赞同：2
> 
> 时间：2013-04-14T13:16:53.487
> 
> 标签：configuration, cassandra

我是 cassandra 的新手，现在我正在尝试制作生产服务器。在文档中，我读到数据和提交日志应该在单独的驱动器上（顺便说一句，我使用硬盘），我认为提交日志将增加到许多 Gb 的数据，我创建了 2 个硬盘驱动器（均为 100Gb），首先是数据（sstables）在第二个提交日志上。但现在在配置中我看到： `commitlog_total_space_in_mb: 4096`，我认为这应该是“最大堆大小”。如果 commitlog 达到了这个限制，那么 memtables 的大小似乎会增加，需要刷新到磁盘，并且 memtables 中包含的数据也会从 commitlog 中删除。

所以请告诉我我是否正确：commitlog 就像堆的备份，不能增加到数百 Gb？

而且我不需要为此创建 100Gb 硬盘驱动器，4Gb 分区就足够了（在另一个硬盘驱动器上，与存储数据（sstables）的位置不同）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T20:39:41.447

> commitlog 就像堆的备份，不能增加到数百 Gb？

提交日志是用于存储在 memtables 中的数据副本的临时存储。这是为了防止断电或服务器在 memtables 可以写为 SSTables 之前崩溃。一旦内存表被刷新到磁盘，提交日志段就会被删除。

堆上的其余数据（缓存、动态数据等）永远不会存储在提交日志中。所以你的提交日志通常会比你的堆小得多。

> 而且我不需要为此创建 100Gb 硬盘驱动器，4Gb 分区就足够了（在另一个硬盘驱动器上，与存储数据（sstables）的位置不同）？

较小的分区会很好，但您可能希望在 4 GB 以上留出一点空间。

# ios - AFNetworking：带有查询字符串的 GET

> ID：15999482
> 
> 赞同：2
> 
> 时间：2013-04-14T13:17:01.077
> 
> 标签：ios, xcode, afnetworking

我正在尝试从我的 iOS 应用程序访问 Web 服务。在文档中它说我应该使用查询字符串来传递参数，但我不确定如何使用它。

我使用 AFNetworking 框架。之前提出了一个 POST 请求，它工作得很好，但不确定如何编写和传递查询字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T13:25:35.133

“查询字符串”由 AFNetworking 生成。只需使用 getPath:parameter:... 方法并提供参数字典。确保字典具有 Web 服务所需的每个查询名称的键。

例如：

```
[client getPath: @"transactions"
     parameters: @{ @"api_key" : ksomeAPIKey,
                    @"user_id" : user_id }
     ...] 
```

将由 AFNetworking 转换为：

```
 GET <baseURL>/transactions?api_key=...&user_id=... 
```

# version-control - 从 TFS 中删除解决方案？

> ID：15999483
> 
> 赞同：1
> 
> 时间：2013-04-14T13:17:06.293
> 
> 标签：version-control, visual-studio-2012, tfs, windows-explorer, team-explorer

我已经从源代码管理中删除了我的项目，并且 TFS 符号不再出现在 VS 中。但是，在 Windows 资源管理器中仍然存在 TFS 的迹象。我想完全不承认 TFS 的这个项目。

我已经在 TFS 管理门户中删除了团队和项目，但这些符号（见下文）仍然出现。

这是它在 Win Explorer 中的样子：

![在此处输入图像描述](https://i.stack.imgur.com/wnaGg.png)

![在此处输入图像描述](https://i.stack.imgur.com/5ICP7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T06:28:23.777

这很可能是由该机器的本地工作区缓存引起的。您可以使用以下命令重置缓存（这可能不是必需的）：

```
tf workspaces /remove:* 
```

然后重新填充它：

```
tf workspaces /s:http://tfsservername:8080/tfs/Collection 
```

更多信息：http: [//blogs.msdn.com/b/buckh/archive/2006/09/12/path-is-already-mapped-in-workspace.aspx](http://blogs.msdn.com/b/buckh/archive/2006/09/12/path-is-already-mapped-in-workspace.aspx)

以及工作区命令的文档：http: [//msdn.microsoft.com/en-us/library/54dkh0y3.aspx](http://msdn.microsoft.com/en-us/library/54dkh0y3.aspx)

# android - Android - 推送通知声音和打开活动问题

> ID：15999485
> 
> 赞同：1
> 
> 时间：2013-04-14T13:17:09.513
> 
> 标签：android, push-notification, google-cloud-messaging

这是一个两部分的问题。我的应用程序可以使用推送通知，但无法使用自定义声音，1\. 2\. 当您从通知栏中单击应用程序时，我无法获得打开应用程序的通知。

这是下面的代码。我尝试了各种方法来导入自定义声音。我的资产/声音文件夹中的声音。安装时会与 apk 一起使用吗？我如何访问它？我正在使用 webview，也想从通知中打开应用程序到特定链接，也可以这样做吗？

```
private void sendGCMIntent(final Context theContext, String theMessage) 
    {   
    int icon = R.drawable.noti_icon;
        long when = System.currentTimeMillis();

        NotificationManager notificationManager = (NotificationManager)
                theContext.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, theMessage, when);

        String title = theContext.getString(R.string.app_name);

        Intent notificationIntent = new Intent();
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(theContext, 0, notificationIntent, 0);
        notification.setLatestEventInfo(theContext, title, theMessage, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        //String path = "file:///android_asset/sounds/soft.mp3"; 

        //File file = new File(path);

        //Log.i(TAG,"Sound exists : " + file.exists());
        Uri soundUri = Uri.parse("file:///android_asset/sounds/soft.mp3");

        if (soundUri != null) {
            notification.sound = soundUri;
        }
        else {
            notification.defaults |= Notification.DEFAULT_SOUND;
        }
        // Play default notification sound
        notification.defaults |= Notification.DEFAULT_SOUND;

        // Vibrate if vibrate is enabled
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notificationManager.notify(0, notification);    
    } 
```

# iphone - 如何在 Photos.app 中创建 iPhone “照片文件夹”

> ID：15999487
> 
> 赞同：0
> 
> 时间：2013-04-14T13:17:12.150
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我确信这是一个愚蠢的问题，但我一直在到处搜索，却不知道我到底在寻找什么。有没有一种方法可以有效地创建像标准 Photos.app 中的“照片文件夹”。Facebook 似乎内置了这个功能。我想我最终可以“破解”一种方法来做到这一点，但我关心的是记忆和最佳实践。我添加了一张图片来说明我想要什么：（ [来源：][[bhs4.com](http://img.bhs4.com/47/a/47aa0cb17e97ccf20e32daec079ab938735d73c8_large.jpg)][）][![iphone相册](https://i.stack.imgur.com/pSVSt.jpg)](https://i.stack.imgur.com/pSVSt.jpg)

简而言之；我想要缩略图/文件夹的外观。有什么好的指南/提示吗？

编辑：如果这很重要，我将从 Instagram 获取图像！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:33:03.380

Apple 似乎正在使用 a**`UICollectionView`**以“缩略图网格”的方式显示图像。

欲了解更多信息，谷歌`UICollectionView`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:25:24.583

有一些开源的可能性来显示照片浏览视图控制器。在 github 上搜索。我找到了[https://github.com/kirbyt/KTP​​hotoBrowser](https://github.com/kirbyt/KTPhotoBrowser)，这似乎正是您正在寻找的，但也有其他类似的选择。希望能帮助到你！

# java - 我的表格输出的百分比值不正确

> ID：15999491
> 
> 赞同：0
> 
> 时间：2013-04-14T13:17:30.453
> 
> 标签：java, arrays, percentage

```
public class apples {

private static String[] level1 = new String[] { "A", "B", "I", "K", "N", "O", "P", "S", "T", "W" };

public static void main(String[] args) {

        int[] scores1 = { 99, 80, 56, 88, 70, 35, 67, 60, 78, 56 };

        int[] correct1 = {20, 20, 13, 15, 22, 18, 19, 21, 23, 25};

        int[] incorrect1 = {2, 1, 5, 2, 2, 5, 8, 1, 0, 0};

        double[] percentage1 = new double[correct1.length];
        for(int a = 0; a < correct1.length; a++ ){ 
                 percentage1[a] = (double)((correct1[a] / (correct1[a] + incorrect1[a]))*100);
            }

        System.out.println("Character \t Correct \t Incorrect \t Percentage");
            for(int counter = 0; counter<scores1.length;counter++){
                System.out.println(level1[counter] + "\t\t " + correct1[counter] + "\t\t " + incorrect1[counter] + "\t\t " + percentage1[counter]);
            }

}

} 
```

这将输出一个包含 4 个标题的表格。字符、正确和不正确的列按预期显示。但是，百分比行无法正常工作。例如，字符“A”、正确的 20 和错误的 2 给出的百分比为 0.0。任何“不正确”值 > 0 输出百分比值 0，任何 = 0 的“不正确”值给出 100 的百分比值（这是正确的）......有人可以解释我哪里出错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:20:25.283

您在这里处理整数，对于整数除法，结果被截断。您需要将原始值转换为双精度，或将一部分乘以将`1.0`其作为双精度：

```
percentage1[a] = ((correct1[a]*1.0 / (correct1[a] + incorrect1[a]))*100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:20:22.827

```
 percentage1[a] = (double)((correct1[a] / (correct1[a] + incorrect1[a]))*100); 
```

`double` *计算完成后*，上面的代码转换为 a 。

要作为计算的一部分进行转换，请使用：

```
percentage1[a] = (( ((double)correct1[a]) / (correct1[a] + incorrect1[a]))*100); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T13:22:07.360

你在这里计算

```
 percentage1[a] = (double)((correct1[a] / (correct1[a] + incorrect1[a]))*100); 
```

执行整数除法（您只需将它们转换为`double`）。如果您希望它们返回实际的浮点除法结果，则必须在计算*之前将所有操作数转换为 double。*

所以最快的选择是改变这个：

```
 double[] correct1 = {20, 20, 13, 15, 22, 18, 19, 21, 23, 25};

    double[] incorrect1 = {2, 1, 5, 2, 2, 5, 8, 1, 0, 0}; 
```

另一个是将计算更改为这样的

```
percentage1[a] = (1.0 * correct1[a] / (correct1[a] + incorrect1[a]))*100; 
```

或简化一点：

```
percentage1[a] = 100.0 * correct1[a] / (correct1[a] + incorrect1[a]); 
```

# jakarta-ee - SessionBeans 和 CDI 与 POJO 类

> ID：15999496
> 
> 赞同：1
> 
> 时间：2013-04-14T13:17:54.477
> 
> 标签：jakarta-ee, design-patterns, dependency-injection, ejb-3.1, stateless-session-bean

我正在阅读 JavaEE 6 教程，在阅读 SessionBean 和 CDI 部分时，我遇到了一些疑问。

1）据我所知，`@EJB`注释注入了一个 SessionBean 导致使用依赖注入模式。我知道这种模式旨在扭转谁构建什么对象的责任。因此，不是某个类创建它拥有依赖项，而是将在构造函数中接收它们。然而，`@EJB`注解如何缓解不注入依赖的问题呢？`@Inject`注释也是如此。

2）我有这个实用程序类（仅包含静态方法），它将日期格式化为多种格式（yyyy-MM-dd、dd-MM-yyyy 等...）。对这些方法使用无状态会话 Bean 更好还是应该保留 Utility 类？`@Inject`如果为此使用 EJB，使用它或使用注解使用 bean 有什么区别？

3) 使用依赖注入时，使用服务定位器或工厂模式有意义吗？（尽管我已经看到服务定位器被记录为反模式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:05:32.803

@EJB 和 @Inject 缓解了*不*注入的问题，通过...注入（duh！;)）

将此实用程序方法保留在这些类中。EJB 用于事务管理、资源使用限制、基于用户角色限制对方法的访问等。这些对于您的实用程序方法似乎都不是必需的。

您最多可以通过 CDI 使该实用程序类可注入：为它定义一个接口并创建一个生产者方法。通常，即使这样也有些过分了，但这取决于您的类的确切扩展及其用法。

通过注入，您仍然可以拥有工厂（生产者是工厂的一种），但客户端没有明确使用工厂。客户端声明一个依赖，CDI 可以使用“工厂”（生产者）来满足这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:05:22.937

1.  不，依赖注入不仅仅是为了避免创建它的依赖。这也是为了避免向容器询问其依赖项。容器不是向容器询问依赖项，而是将依赖项注入到组件中。我不明白您所说的“不注入依赖项的问题”是什么意思。请说清楚。

2.  当您需要由容器围绕方法添加事务性、安全性和/或远程处理方面时，通常会使用会话 bean。如果它只是一个实用程序类，则没有理由将其设为会话 bean。

3.  不，这没有意义。依赖注入的主要目标是替换服务定位器和/或工厂的使用，以便让容器将依赖项注入 bean。这就是使代码易于测试的原因，因为您可以在单元测试中简单地将虚假依赖项（模拟对象）注入到 bean 中。

# javascript - 在特定操作上滚动到 div 内的 div

> ID：15999500
> 
> 赞同：0
> 
> 时间：2013-04-14T13:18:30.803
> 
> 标签：javascript, jquery

在 JavaScript/jQuery 中调用时是否可以自动滚动到特定的 div？

我可以`$('div[compid="' + compid + '"]')`用来获取正确的 div，但我需要强制将具有特定 compid 的 div 滚动到屏幕上。

```
$(document).delegate(".heading",'click',function(){
    $(this).next().slideToggle('slow');
}); 
```

```
<div id="listings">
    <div class="heading" compid="80" usedspec="33"><div class="content">content in here</div></div>
    <div class="heading" compid="81" usedspec="34"><div class="content">content in here</div></div>
    <div class="heading" compid="82" usedspec="35"><div class="content">content in here</div></div>
    <div class="heading" compid="83" usedspec="36"><div class="content">content in here</div></div>
    <div class="heading" compid="84" usedspec="37"><div class="content">content in here</div></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:22:50.877

你可以使用`offset`方法。

```
var top = $('div[compid="' + compid + '"]').offset().top;
$('html, body').animate({scrollTop: top}, 500); 
```

[http://jsfiddle.net/aNBMG/](http://jsfiddle.net/aNBMG/)

请注意`compid`和`usedspec`不是有效属性，您可以使用 HTML5`data-*`属性代替。

# javascript - JS循环变量范围

> ID：15999502
> 
> 赞同：1
> 
> 时间：2013-04-14T13:18:38.253
> 
> 标签：javascript, for-loop, global-variables, scope, design-patterns

我正在尝试一些简单的 JS 代码。我知道我们应该使用`var`关键字在循环语句中声明循环变量`for`以避免全局变量声明。但是我意识到循环变量在循环执行后也存在：

```
var a = [1, 2, 3, 4, 5, 6];
for (var i = 0; i < a.length; i++)
    document.write(a[i]); //123456
document.write(i);  //6 
```

`for`这与面向对象概念中循环的循环变量的行为方式不是内联的（事实上它不需要，我知道） 。我知道我不应该尝试在任何方面将 JavaScript 与 OO 语言进行比较。但是我只是猜测 OO 语言的行为更好。

我认为，如果我们将这段代码直接放在`<script>`标签中，那么它实际上会将循环变量添加到全局范围，这是不需要的。是这样吗？还是我想错了？

我们可以通过创建显式函数范围来实现这种行为：

```
var a1 = [1, 2, 3, 4, 5, 6];
(function () {
    for (var i1 = 0; i1 < a.length; i1++)
        document.write(a[i1]); //123456
})();

document.write(i1);  //undefined 
```

但这是生产中的标准方式/遵循吗？还有什么可以做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:27:26.277

> 我们可以通过创建显式函数范围来实现这种行为。但这是生产中的标准方式/遵循吗？

是的。函数是在 JavaScript 中引入新作用域的唯一可能性（尽管在未来的版本中可能会改变[`let`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/let)）；[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)也大量用于生产。

> 还有什么可以做的？

限制`i`for循环块的范围？没有（更不用说`let`）。但是，您几乎不需要这样做，因为没有任何东西会干扰它 -`var i`仍然是您功能的本地范围。有时，您甚至可能希望`i`在循环之后使用作为持续计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:26:58.793

JavaScript 只有`function scope`使用侧函数定义的任何变量仅`var`在函数内部可用。for 循环不会为变量创建任何范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T14:40:50.953

Javascript 有点奇怪，恕我直言，它有很多缺陷，使其成为中/大型项目的糟糕语言。

“var”表示该变量仅在当前函数范围内可用：所有变量都在开始时定义，在函数运行之前设置为“未定义”。所以：

```
alert(i);
var i=4;
alert(i);
var i=5;
alert(i); 
```

内部意思：

```
var i=undefined;
alert(i);
i=4;
alert(i);
i=5;
alert(i); 
```

在结构化编程中，所有代码都应该在函数中，这意味着您的“var”关键字将按预期工作。但是如果你在全局范围内编写代码，“var”就没有真正的意义。

# c# - 使用谷歌图表，带有日期信息

> ID：15999504
> 
> 赞同：0
> 
> 时间：2013-04-14T13:19:08.450
> 
> 标签：c#, google-visualization

我从 ac# 方法返回了以下数据：

```
 <input id="hdMessageCountByVDate" type="hidden"    
  value="[{"Count":43,"Type":"3","Date":"2013-04-14"},
  {"Count":3,"Type":"2","Date":"2013-03-11"}]" name="hdMessageCountByVDate"> 
```

我想要做的是创建一个图表，它显示以下内容：

总计数 (43,2)，与给定日期 (2013-04-14,2013-03-11) 的关联类型 (3,2)

目前只有两个条目，但这些会增加时间，因此日期会有所不同。

我如何将这些数据放入可以正确呈现的图表中。

到目前为止我有这个：

```
 function drawMessageByVDate() {
            var hdValue = document.getElementById("<%=hdMessageCountByVDate.ClientID%>").value;
            var response = $.parseJSON(hdValue);
            var data = new google.visualization.DataTable();

            data.addColumn('string', 'Type');
            data.addColumn('number', 'Count');
            data.addColumn('string', 'Date');

            for (var i = 0; i < response.length; i++) {
                var row = new Array();
                row[0] = response[i].Type;
                row[1] = parseInt(response[i].Count);
                row[1] = response[i].Date;

                data.addRow(row);
            }
            var options = {
                title: 'My chart'

            };

            var chart = new google.visualization.ColumnChart(document.getElementById
            ('msgCountByVDate_Chart'));
            chart.draw(data, options); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-14T16:48:02.457

**初步想法：**

看起来你有一个错误

```
row[1] = response[i].Date; 
```

应该

```
row[2] = response[i].Date; 
```

此外，如果您希望 Google 正确处理日期，那么 api 似乎需要一个实际的 javascript 日期对象，而不仅仅是日期的字符串表示。对于现代浏览器，这可能很简单

```
data.addColumn('date', 'Date');
....
row[2] = new Date(response[i].Date); 
```

但是，为了支持旧版浏览器（例如 IE<9），您可能需要更复杂的东西，例如

```
data.addColumn('date', 'Date');
....
var d = response[i].Date;
row[2] = new Date(parseInt(d.substr(0,4)), parseInt(d.substr(5,2))-1, parseInt(d.substr(8,2))); 
```

**进一步研究** 看起来谷歌实际上期望数据的一个旋转版本，例如

```
Date       | Type 2 | Type 3
2013-04-14 |      0 |     43
2013-03-11 |      3 |      0 
```

有关示例，请参见[https://code.google.com/apis/ajax/playground/?type=visualization#column_chart](https://code.google.com/apis/ajax/playground/?type=visualization#column_chart)

# c# - 如何在按钮单击时在随机位置生成多个图片box1 克隆？

> ID：15999506
> 
> 赞同：0
> 
> 时间：2013-04-14T13:19:17.490
> 
> 标签：c#, winforms

我们正在使用 Visual Studio 10 为学校制作僵尸游戏。

我们想要随机生成 Zombies，也就是 PictureBoxes。所有这些图片框都需要自己的坐标，因为如果玩家的坐标与僵尸相同，则玩家需要损失HP。

我现在正在寻找这个功能 3 天，所以我想为什么不在这里寻求专业建议呢？

我们现在只有这段代码可以让一个（Picturebox）僵尸行走：

```
private void ZombieLopenOne()
        {
            // Begin Zombie Lopen
            int zombx = EenZombie1.Location.X;
            int zomby = EenZombie1.Location.Y;
            if ( zomby > 420 + EenZombie1.Height ) {
                zomby = -EenZombie1.Height;
                EenZombie1.Location = new Point(zombx, zomby);
            }
            else
            {
                zomby += 3;
                EenZombie1.Location = new Point(zombx, zomby);
            }
            // End Zombie Lopen

          } 
```

你能帮助我们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:06:46.043

您可以使用 a `List<T>`，它将包含所有僵尸。僵尸是一个名为 Zombie 的简单类。该类包含僵尸的 x 和 y 坐标。在窗体的 Paint-Event 中，程序循环遍历 List 中的所有元素并在窗口上绘制纹理。

在您的窗口代码中：

```
class Zombie {
   public Zombie(int x, int y) {
      this.x = x;
      this.y = y;
   }
   public int x;
   public int y;
}

List<Zombie> zombies;

//Constructor of your window
public MainWindow() {
   InitializeComponet(); //This is autogenerated by Visual Studio
   this.Paint += new PaintEventHandler(Paint);
   zombies = new List<Zombie>;
}

public void Paint(object sender, PaintEventArgs e) {
   foreach(Zombie zombie in zombies) {
      e.Graphics.DrawImage(/*Your zombie image*/, new Point(zombie.x, zombie.y));
   }
} 
```

您可以使用类的方法添加和删除僵尸`List<T>`。

# jquery - 试图写一个 jQuery 插件，但我不知道如何从 init 调用一个方法

> ID：15999508
> 
> 赞同：0
> 
> 时间：2013-04-14T13:19:26.350
> 
> 标签：jquery

# jsFiddle：http: [//jsfiddle.net/bg9vL/](http://jsfiddle.net/bg9vL/)

控制台输出：

> 未捕获的类型错误：对象 [对象全局] 没有方法“每个”

```
 var methods = {

    init: function (options) {

        // Create some defaults, extending them with any options that were provided
        var settings = $.extend({
            'maxWidth': 0,
            'maxHeight': 0,
            'forceAspect': true
        }, options);

        return this.each(function () {

            // if max size wasn't specified, position only
            var nosize = settings.maxWidth === 0 || settings.maxHeight === 0;
            var container = $(this).parent();

            $(this).css('position', 'relative');

            // fit when window is resized
            $(window).bind('resize.tailorfit', methods.fit);

            // fit when page has loaded
            $(window).bind('load.tailorfit', methods.fit);

            // fit on initial load
            methods.fit.apply();
        });

    }, ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:35:05.013

```
methods.fit.apply(); 
```

使用全局对象作为 this调用`fit`，它没有方法`each`

现在，您可以通过`$(this)`在 function 中执行技术来解决此问题`fit`，但我不确定这是您想要做的。

另请注意，您的 jsFiddle 不会执行给定的回调`$('.image-container > img').load`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:27:56.310

我敢打赌，你需要用 jQuery 标记来包装它。

```
...
$(this).each(
... 
```

它不将其识别为 jQuery 对象，因此每个函数都对它不可用。

之后您确实有一个容器问题，您应该能够轻松解决。

# java - 字符串为空

> ID：15999514
> 
> 赞同：-5
> 
> 时间：2013-04-14T13:20:13.000
> 
> 标签：java

我正在尝试验证字段名称是否为空，并且它正在工作

```
while(name.isEmpty()||!name.matches("^([A-Z*a-z]*(\\s))+[A-Z*a-z]*$")) 
```

当我尝试验证字段编号为空时，它会给出错误。

```
while (number.charAt(0) != '0' || number.length() < 4 || !number.matches("^[0-9]*") || number.isEmpty())

Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 0
    at java.lang.String.charAt(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:27:52.580

编辑：这个应该工作：

```
while(!number.matches("0[0-9]{3,}")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:29:32.887

你得到，`StringIndexOutOfBoundsException`因为你的第一件事

```
while (number.charAt(0) != '0' || number.length() < 4 || !number.matches("^[0-9]*") || number.isEmpty()) 
```

条件是`number.charAt(0)`如果字符串为空可以抛出异常`""`。为了摆脱这个问题，搬`number.isEmpty()`之前`number.charAt(0) != '0'`。

* * *

> 这是为了验证一个以 0 开头且最小长度为 4 个数字的电话号码。

试试这个方法

```
while (!number.matches("0[0-9]{3,}")) 
```

# python - 为什么我尝试在 Windows Python IDLE 上使用 python 程序时出错

> ID：15999516
> 
> 赞同：0
> 
> 时间：2013-04-14T13:20:22.023
> 
> 标签：python, python-2.7

这是一个简单的程序

```
def is_palindrome_v1(s):
   """ (str) --> bool
   Return True if and only if s is a palindrome

   >>> is_palindrome_v1('noon')
   True
   >>> is_palindrome_v1('racecar')
   True
   >>> is_palindrome_v1('dented')
   False
   """"
   return reverse(s) == s

def reverse(s):
    """ (str) --> str
    Return a reversed version of s
    >>> reverse('hello')
    'olleh'
    >>> reverse('a')
    'a'
    """
    rev = ""
    for ch in s:
        rev = ch + rev
    return rev 
```

我尝试运行时遇到的错误

```
"SyntaxError: EOL while scanning string literal" 
```

不确定我从哪里得到这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:21:42.107

您的三引号字符串有一个`"`引号太多：

```
 """ (str) --> bool
   Return True if and only if s is a palindrome

   >>> is_palindrome_v1('noon')
   True
   >>> is_palindrome_v1('racecar')
   True
   >>> is_palindrome_v1('dented')
   False
   """"
------^ 
```

# python - 如何将 hist2d 图的无数据区域设置为零值颜色？

> ID：15999519
> 
> 赞同：10
> 
> 时间：2013-04-14T13:20:30.317
> 
> 标签：python, matplotlib, histogram

我正在跟踪对象对计算机屏幕指定区域的注视。我正在使用 pyplot 的`hist2d`函数构建凝视热图。

这是一个简单的例子：

```
figure()
hist2d(xval, yval, bins=1000)
xlim([-6, 6])
ylim([-4.5, 4.5]) 
```

![在此处输入图像描述](https://i.stack.imgur.com/KKbdf.png)

如您所见，我的数据范围之外有一个重要区域。但是，我想将此区域设置为表示零值的蓝色。

我第一次尝试使用`imshow`可以在这里看到：

```
figure()
imshow(np.array([[0] * 8] * 12), extent=[-6, 6, -4.5, 4.5])
hist2d(xval, yval, bins=1000)
xlim([-6, 6])
ylim([-4.5, 4.5]) 
```

![在此处输入图像描述](https://i.stack.imgur.com/OIyzO.png)

这种工作，但在我的数据范围的边界留下一条难看的垂直线。

**我的问题如下：**

1.  有没有办法在避免`imshow`调用的同时用零值蓝色填充图形
2.  如果没有，我该如何隐藏垂直线？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-14T13:34:41.590

好的，我已经想通了。它实际上相当简单：只需要​​操纵`range`kwarg。

```
figure()
#imshow(np.array([[0] * 8] * 12), extent=[-6, 6, -4.5, 4.5])
hist2d(xval, yval, bins=1000, range=np.array([(-6, 6), (-4.5, 4.5)]))
xlim([-6, 6])
ylim([-4.5, 4.5]) 
```

![在此处输入图像描述](https://i.stack.imgur.com/EspKP.png)

# asp.net - 从 SQL 中的单个表中获取相同属性的两个不同值

> ID：15999520
> 
> 赞同：0
> 
> 时间：2013-04-14T13:20:33.433
> 
> 标签：asp.net, mysql, sql

我有三张桌子，即。Bids(bid_id,base_price),Customer(customer_id,name,..) 和 Customer_Bid(customer_id,bid_id,bidding_amount) 其中客户出价和他的出价金额存储在 Customer_Bid 表中。我想显示客户的详细信息以及他的出价 id 以及对同一出价 id 出价最高的人。

我试图获取客户详细信息，但我无法显示他的出价金额以及位于同一张表中的最高出价金额。

请任何人都可以帮助我。谢谢。

**编辑** 这是评论中的查询

```
select cb.bid_id, c.customer_id ,MyBid=cb.total_bidding_ammount
, HighestBid= max(cb.total_bidding_ammount) 
from customer as c
,customer_bidding as cb
,bid as b 
group by cb.bid_id, c.customer_id, cb.total_bidding_ammount 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:57:32.123

如果你改变这个：

```
, HighestBid= max(cb.total_bidding_ammount) 
```

像这样：

```
, HighestBid = 
(select max(bidding_ammount)
from customer_bidding
where bid_id = bid.bid_id) 
```

你会走在正确的轨道上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T14:29:05.000

```
select a.*, b.bidding_amount,
     e.bidding_amount as highest_bid
from customer a
inner join customer_bid b on a.customer_id = b.customer_id
inner join bids c on b.bid_id = c.bid_id
join 
    (select * from (
    select bidding_amount,bid_id
    from customer_bid
    order by bidding_amount desc
    ) d group by d.bid_id) e on b.bid_id = e.bid_id 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T14:02:48.520

试试这个：

```
SELECT  cb.bid_id, 
        c.customer_id,
        cb.total_bidding_ammount,
        topbids.customer_id as topbid_customer_id,
        topbid
FROM customer c
INNER JOIN customer_bidding as cb
ON c.customer_id = cb.customer_id
INNER JOIN (
            SELECT cb.bid_id, c.customer_id, MAX(cb.total_bidding_ammount) as topbid
            FROM customer c
            INNER JOIN customer_bidding cb
            ON (c.customer_id = cb.customer_id)
            GROUP BY cb.bid_id
           ) topbids
ON cb.bid_id = topbids.bid_id 
```

# java - JSP 表达式如何设置 Object 类型的 bean 属性

> ID：15999524
> 
> 赞同：-1
> 
> 时间：2013-04-14T13:21:35.020
> 
> 标签：java, jsp, javabeans, usebean

我有一个**jsp 文件**和一个**bean 文件**。我了解了如何使用方法转换**原始数据**类型`'valueOf'`并设置 bean 属性，但是我仍然对如何设置**类类型**值感到困惑。下面的代码将使查询更加清晰。

**豆.java：**

```
private Object myObject ;

   public Object getMyObject() {
        return myObject;
    }

   public void setMyObject(Object myObject) 
    {
        System.out.println("my object - " + myObject);

        File file = (File)myObject;
        System.out.println("path - " + file.getPath());

        this.myObject = myObject;
    } 
```

**索引.jsp：**

```
 <jsp:useBean id="aBean" class="com.Bean" />    
        <%
            File file = new File("some path");
        %>
  <jsp:setProperty name="aBean" property="myObject" value="<%= file %>" /> 
```

我对事情的 `value="<%= file %>"` 运作方式感到很困惑。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:51:30.937

文件扩展对象（就像所有类一样）。所以上面的内容只是由JSP容器编译成类似的东西

```
com.Bean aBean = new com.Bean();
File file = new File("some path");
aBean.setMyObect(file); 
```

没有什么可以转换的，因为文件是一个对象。

请注意，`jsp:useBean`并且`jsp:setProperty`已经过时了很长时间。你不应该再使用这些指令了。使用 MVC 控制器（或至少是自实现的 MVC 模式），并使用 JSTL 和 JSP EL 访问控制器创建并存储在请求属性中的 bean。视图（即 JSP）不应该创建和填充 bean。那不是它的工作。

# java - MongoDB：使用 JavaDriver 通过 _id 干净地查询对象

> ID：15999529
> 
> 赞同：0
> 
> 时间：2013-04-14T13:22:02.357
> 
> 标签：java, mongodb

我正在尝试使用 is_id 更新 Mongo 对象。但是我没有找到正确的语法来使它使用 JavaDriver 工作，这是我最后一次尝试的方法。

`BasicDBObject filtre = new BasicDBObject ("_id", new BasicDBObject("$oid", id_message));`

然后给 coll.update 方法。我设法使我的请求从 shh 开始工作，但没有设法将它正确地转换为 Java。（请求类似于：`db.message.find({"_id" : ObjectId("516a94c4e4b0a315396e4ba3")});`）`我如何正确地将其转换为Java。（最终使用 QueryBuilder）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:32:29.257

如果您要翻译：

```
db.message.find({"_id" : ObjectId("516a94c4e4b0a315396e4ba3")}) 
```

对于 Java，请遵循以下基本模式：

```
MongoClient mongoClient = new MongoClient();
DB db = mongoClient.getDB("testDB");
DBCollection messages= db.getCollection("message");
DBObject query = new BasicDBObject("_id", new ObjectId("516a94c4e4b0a315396e4ba3"));
DBObject messageDoc = messages.findOne(query); 
```

结果将存储在`messageDoc`.

由于某种原因，该[文档目前没有涵盖此基本模式。](http://docs.mongodb.org/ecosystem/tutorial/getting-started-with-java-driver/#getting-started-with-java-driver)

# css - 当浮动属性设置为“无”时，CSS背景图像消失

> ID：15999532
> 
> 赞同：1
> 
> 时间：2013-04-14T13:22:11.430
> 
> 标签：css, css-float, background-image

我有一系列三个盒子，每个盒子大约是屏幕宽度的三分之一。前两个框的宽度为 33.333%，向左浮动。我已经删除了第三个盒子上的浮动并将宽度设置为，`auto`以便它填充剩余的水平空间。但是，这样做会导致背景图像消失。我创建了一个[Fiddle](http://jsfiddle.net/aMwk9/)来展示这种效果。

HTML 非常简单：

```
<div></div>
<div></div>
<div></div> 
```

这是CSS：

```
div {
  float: left;
  width: 33.333%;
  height: 120px;
  background: #EEE url('http://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/Approve_icon.svg/200px-Approve_icon.svg.png') no-repeat center center;
  background-size: 100px 100px;
}

div:nth-child(2) {
  border-left: 1px solid black;
  border-right: 1px solid black;
}

div:nth-child(3) {
 float: none;
 width: auto;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T13:27:34.183

用于`overflow: hidden`解决此问题：

```
div:nth-child(3) {
    float: none;
    width: auto;
    overflow: hidden;
} 
```

你没有得到它的原因是，当你给它时，他们肯定会因为一个ed 元素而`width: auto`失去他们的 s 。`width``float`

### 小提琴：http: [//jsfiddle.net/praveenscience/aMwk9/1/](http://jsfiddle.net/praveenscience/aMwk9/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T13:26:12.280

您需要添加`overflow: hidden`：

```
div:nth-child(3) {
 float: none;
 width: auto;
 overflow: hidden;
} 
```

如果没有这个指令，第 3 个 DIV 不会填充剩余空间，但也会与 DIV 的其余部分重叠。

# c - c自由结构指针

> ID：15999534
> 
> 赞同：-1
> 
> 时间：2013-04-14T13:22:34.957
> 
> 标签：c, pointers, struct, free

```
struct trapframe {
      u_int32_t tf_vaddr;     /* coprocessor 0 vaddr register */
      u_int32_t tf_status;    /* coprocessor 0 status register */
      u_int32_t tf_cause;     /* coprocessor 0 cause register */
      u_int32_t tf_lo;
        .....
      u_int32_t tf_hi;
      u_int32_t tf_ra;        /* Saved register 31 */
      u_int32_t tf_at;        /* Saved register 1 (AT) */
      u_int32_t tf_v0;        /* Saved register 2 (v0) */
      u_int32_t tf_v1;        /* etc. */
      u_int32_t tf_epc;       /* coprocessor 0 epc register */
 };

void foo(void *tf, unsigned long as) { 
  struct trapframe *buf_tf = (struct trapframe *)tf; 
  ... } 
```

* * *

在函数 foo 中，我没有手动分配空间，而是使用传入的 trapframe struct 参数直接初始化 temp trapframe struct 指针 buf_tf，我需要手动释放 buf_tf 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:25:09.417

1）不，如果你不需要释放它，如果你不需要释放`trapframe struct argument passed in` 2）是的，如果你最终必须释放`trapframe struct argument passed in`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:32:35.100

所以，大概你有这样的事情：

```
void myfunc (struct trapframe *p) 
{
    struct trapframe *tf_tmp = p;

    ...
} 
```

在这种情况下，内存是在调用者中分配的，它是您正在访问的调用者的结构。你无权释放它。您不知道它在哪里分配（堆或堆栈），调用者可能希望稍后访问它。

或者可能：

```
void myfunc (struct trapframe tf) 
{
    struct trapframe *tf_tmp = &tf;

    ...
} 
```

在这种情况下，结构通过副本传递并放置在函数的本地堆栈中（尽管实现细节有所不同）。当当前函数退出时，它将被释放。

所以不，不要试图释放它。这样做很可能会破坏其他东西！`free`对未在堆上分配的对象执行可能会产生*未定义*的不良影响。

# iphone - ios、Facebook 注销并清除用户令牌

> ID：15999536
> 
> 赞同：1
> 
> 时间：2013-04-14T13:22:44.360
> 
> 标签：iphone, ios, facebook, logout

我正在开发一个使用 Facebook sdk“3.2.1”的 iOS5 和 iOS6 应用程序。有没有办法让用户注销并清除令牌，这样当再次按下登录按钮时，用户将被迫再次输入他的用户名和密码？

我使用`[FBSession.activeSession closeAndClearTokenInformation];`的似乎没有清除令牌信息，因为在它之后按下登录按钮时，safari 会显示

> “你已经授权'你的应用'。按“确定”继续”

这不是我需要的行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T14:48:25.613

您看到的不是 SDK '不清除令牌信息' - SDK 确实清除了令牌。允许您查看“您已授权...”消息的信息由 Facebook 提供。在用户的应用设置中，他们有来自您应用的授权设置，您在他们首次登录时要求提供该设置。

为了从您的应用中撤消权限，您需要触摸 Graph API。[FB 文档，在https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)的“删除”部分

> 您可以通过使用该应用的用户 access_token 向 PROFILE_ID/permissions 发出 HTTP DELETE 请求，代表用户取消对应用程序的授权或撤销特定的扩展权限。

我假设您知道如何使用 SDK 发布 Graph API 请求，如果不知道，请告诉我。

# python - 在与原始脚本不同的模块中使用对象

> ID：15999541
> 
> 赞同：0
> 
> 时间：2013-04-14T13:23:13.630
> 
> 标签：python, python-2.7, arcgis

我刚开始使用 Python，但遇到了一些问题。我已经为 ArcGIS 编写了一些脚本，并且有一些重复出现的内容。所以我认为将它放在我可以轻松再次使用的模块中会很聪明。

所以现在我有两个脚本，`script.py`和`toolbox.py`. 我的脚本工作正常，所以我复制并粘贴了我需要的部分，对其进行了一些编辑，除了使用创建的消息之外，一切都很顺利`gp.Addmessage`

script.py 将创建消息“Hello Stackoverflow”，但来自 toolbox.py 的消息不显示。这是为什么？它加载了工具箱，因为我以后可以使用它，所以它重新识别 gp 对象。

我有点卡在这里，希望能够从模块内部打印消息，以告知该工具的用户正在发生的事情。

`script.py`：

```
import os, sys, arcgisscripting

# Create the Geoprocessor object
gp = arcgisscripting.create()

gp.AddMessage("# Hello Stackoverflow")

import toolbox
toolbox.loadToolbox 
```

`toolbox.py`：

```
def loadToolbox:
    try:
      some code
      gp.AddToolbox(path)
      gp.AddMessage("# Toolbox loaded")
    except:
      gp.AddMessage("# Toolbox not found") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:26:25.187

您的代码有两个问题：

1.  你从不*调用*方法，`loadToolBox`你只*引用*它。添加`()`：

    ```
    toolbox.loadToolbox() 
    ```

2.  您的`loadToolbox()`函数不`gp`作为参数。如果`gp`是全局变量，那么它对`toolbox`模块不可见（全局变量仅在当前模块中可见）。

    添加`gp`为参数，调用时传入`loadToolbox`。在`script.py`：

    ```
    toolbox.loadToolbox(gp) 
    ```

    并在`toolbox.py`：

    ```
    def loadToolbox(gp):
        # rest of function 
    ```

# ruby-on-rails - “模板丢失”错误。缺少模板创建

> ID：15999554
> 
> 赞同：0
> 
> 时间：2013-04-14T13:24:25.930
> 
> 标签：ruby-on-rails, ruby, validation, views

我尝试在视图中显示验证错误以创建新文章页面。我在文章模型中验证了检查正文和标题是否存在（验证：标题，：正文，：存在=>真）。当我保留文章和标题文本框但显示“模板丢失”错误并显示以下信息时，它不允许创建新文章。

```
Missing template articles/create, application/create with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in: * "F:/kuta/billi/app/views" * "C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/twitter-bootstrap-rails-2.2.6/app/views" * "C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/devise-2.2.3/app/views" 
```

我已将 <%= f.error_messages %> 部分放入文章的新页面，并将 gem 'dynamic_form' 放入 gemfile。

_form.html.erb 用于文章/new.html.erb

```
<%= form_for @article, :html => { :class => '' } do |f| %>
<%= f.error_messages %>
  <div>
    <%= f.label :title, :style => "margin-top:10px;" %>
    <div>
      <%= f.text_field :title, :style => "width:730px; height:30px; border: 1px solid #66c9ee;margin-top:10px; background-color:#FFFFFF;" %>
    </div>
  </div>
  <div>
    <%= f.label :body, :class => 'control-label' %>
   <%= f.text_area :body, :style => "width:730px; height:250px; border: 1px solid #66c9ee;margin-top:10px; background-color:#FFFFFF;" %>
  <%= f.label :tag_list, :style => "margin-top:10px" %><br />
  <%= f.text_field :tag_list, :style => "width:730px; height:30px; border: 1px solid #66c9ee;margin-top:0px; background-color:#FFFFFF;" %>
  <div style="margin-top: 20px">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                articles_path, :class => 'btn' %>
  </div>
<% end %> 
```

article.rb 模型

```
class Article < ActiveRecord::Base
   attr_accessible :title, :body
   attr_accessible :tag_list
   has_many :comments
   belongs_to :user
   has_many :taggings
   has_many :tags, through: :taggings
   validates :title, :body, :presence => true

   def tag_list
    self.tags.collect do |tag|
     tag.name
    end.join(", ")
   end

   def tag_list=(tags_string)
    tag_names = tags_string.split(",").collect{|s| s.strip.downcase}.uniq
    new_or_found_tags = tag_names.collect { |name| Tag.find_or_create_by_name(name) }
    self.tags = new_or_found_tags
   end
end 
```

你能帮我吗，我错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T13:29:44.113

当验证失败时，在您的控制器操作中，您应该再次呈现新模板，`render 'new'`而不是`render 'create'`

# excel - 如何从一个excel文件复制单元格值并将其粘贴到另一个excel文件？

> ID：15999556
> 
> 赞同：0
> 
> 时间：2013-04-14T13:24:46.910
> 
> 标签：excel, vba

我想将单元格值从一个工作簿复制到另一个工作簿，但问题是单元格值来自工作簿的不同工作表。我怎样才能做到这一点？你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:40:33.527

我猜你想要一个公式，而不是复制和粘贴的说明。

可以使用以下格式进行单元格引用。

`=[Workbook Name]SheetName!CellAddress`

例如，您打开了两个工作簿，Book1 和 Book2。

Book1，Sheet1，单元格 A1 =`=[Book2]Sheet1!A1`

Book2，Sheet1，单元格 A1 =`Hello World`

的值现在将是“Hello World”（如果书是打开的，`[Book1]Sheet1!A1`它将始终反映 中的值）`[Book2]Sheet1!A1`

如果您确实想要实际值的*副本*，而不是对其的引用，则只需使用纯复制和粘贴**或**使用上述公式，完成后使用复制+粘贴特殊（粘贴值）进行转换公式到它们的值。

**更新**

刚刚意识到它被标记为[excel-vba](/questions/tagged/excel-vba "显示标记为“excel-vba”的问题")所以你需要使用类似@DavidZemens 的答案。

您也可以使用宏记录器来执行此操作，但是像 David 建议的那样手动执行会产生更好的代码，以后更容易重用/修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T13:48:24.067

这是您需要的基本内容，您可以通过循环单元格范围、工作簿中的工作表等做更多事情，但从根本上讲，您需要在 VBA 中指定目标工作簿、工作表和单元格范围是什么，然后将其设置为`.Value`等于`.Value`另一个工作簿中的特定工作簿/工作表/单元格。

我在此示例中使用 Workbook 和 Worksheet 变量，如果您愿意或需要应用于多个单元格，您也可以为单元格使用范围变量。

```
Sub TransferValues()
Dim wb1 as Workbook
Dim wb2 as Workbook
Dim ws1 as Worksheet
Dim ws2 as Worksheet

Set wb1 = Workbooks("First Workbook.xlsx")  '<modify as needed'
Set ws1 = wb1.Sheets("The sheet name")      '<modify as needed'

Set wb2 = Workbooks("Another Workbook.xlsx") '<modify as needed'
Set ws2 = wb2.Sheets("Another sheet name")   '<modify as needed'

'This line puts the value from wb1.ws1 in wb2.ws2, cells specified:
ws2.Range("A1").Value = ws1.Range("A1").Value

End Sub 
```

# c# - 如何以 c# 的形式可视化神经网络算法的节点（代理）

> ID：15999557
> 
> 赞同：0
> 
> 时间：2013-04-14T13:24:48.040
> 
> 标签：c#, winforms, neural-network

这些天我正在尝试用 c# 开发两种算法。自组织地图、粒子群优化和萤火虫群优化。我知道算法是如何工作的，但有一个问题我不知道从哪里开始。

试图找到最佳解决方案的搜索空间中的代理有一些坐标（x 和 y）。我不知道我应该如何在每次迭代中以一种形式直观地表示代理的位置。一个选项可能是在 c# 中使用图表并表示点，以便在每次迭代中我将更改代理（点）在图表中的位置。另一种方法可能是在 c# 中使用绘图类，并根据 x 和 y 坐标在面板中绘制圆或点。我应该使用哪些 .net 类来直观地表示搜索空间中的点（在 2D 空间中）。

我希望你能理解我，并感谢你阅读这篇文章。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:32:35.983

如果您的设计变量是 N 维的，N>3，那么可视化整个感兴趣的领域并不是一件容易的事。您可以将 N-Dim 投影到 2D 或 3D 以获得字段的“部分”。

# c# - 超时已过。仅在 ASP.NET 中

> ID：15999558
> 
> 赞同：1
> 
> 时间：2013-04-14T13:24:59.913
> 
> 标签：c#, asp.net, sql-server

`SqlConnection.ConnectionTimeout`设置为无限 (0) ，我的桌面应用`SqlCommand.CommandTimeout`程序将无限期等待。但是，我的 ASP.NET 应用程序不会。没有连接被泄露，并且有足够的系统内存。

我怀疑 ASP.NET 正在秘密设置超时，但即使`HttpRuntimeSection.ExecutionTimeout`设置为 30 分钟。我仍然遇到超时异常。

ASP.NET 中是否还有其他我不知道的超时变量？或者有人知道是什么原因造成的吗？

**更新：**堆栈跟踪

```
at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
at System.Data.SqlClient.SqlConnection.Open()
at System.Data.Common.DbDataAdapter.QuietOpen(IDbConnection connection, ConnectionState& originalState)
at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)
at FrostWebsite._default.GetQuickStats()
at FrostWebsite._default.Page_Load(Object sender, EventArgs e)
at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)
at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
at System.Web.UI.Control.OnLoad(EventArgs e)
at System.Web.UI.Control.LoadRecursive()
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:31:30.437

问题是您有来自 ASP.NET 的超时异常，而不是来自 SQL。有一种方法可以超过 asp.net 超时。此处示例：[http ://weblogs.asp.net/aghausman/archive/2009/02/20/prevent-request-timeout-in-asp-net.aspx](http://weblogs.asp.net/aghausman/archive/2009/02/20/prevent-request-timeout-in-asp-net.aspx)

# extjs - 在 sencha touch 中切换视图

> ID：15999562
> 
> 赞同：0
> 
> 时间：2013-04-14T13:25:11.003
> 
> 标签：extjs, controller, sencha-touch

我在 sencha touch 2 中有以下查看代码

```
 Ext.define('WL.view.Categories', {

extend: 'Ext.Container',

requires: [
    'Ext.SegmentedButton',
    'WL.view.movie.List',
    'Ext.form.Panel',
    'Ext.plugin.ListPaging',
    'Ext.TitleBar',
    'WL.view.movie.SortBar',
    'WL.view.movie.SearchBar'
],
    xtype: 'categories',

config: {

    layout: {
        type: 'card',
        animation: {
            type: 'fade'
        }
    },

    items: [
        {
            docked: 'top',
            xtype: 'toolbar',
            cls: 'small withBg',
            title: 'Merchants',
            items: [
               /* {
                    xtype: 'segmentedbutton',
                    allowDepress: false,
                    items: [
                    /*
                        {
                            cls: 'movies',
                            iconCls: 'movies',
                            pressed: true
                        },
                        {
                            xtype: 'button',
                            cls: 'friends',
                            iconCls: 'friends'
                        }
                    ]
                },
                */
                {    xtype: 'spacer'    },
                {
                    xtype: 'button',
                    cls: 'searchBtn',
                    iconCls: 'search',
                    align: 'right'
                },
                {
                    xtype: 'button',
                    cls: 'backBtn',
                    id: 'movieBackButton',
                    align: 'left'
                }
                /*
                {
                    xtype: 'component',
                    cls: 'fbProfilePic',
                    id: 'fbProfilePic',
                    tpl: '<img src="https://graph.facebook.com/{profileId}/picture?type=square" />'   // the img source can be later changed 
                }
                */
            ]
        },
        {
        xtype:'list',
        store: 'Merchants',       
        plugins: [
        { xclass: 'Ext.plugin.ListPaging' } 
        ],

        itemCls: 'expandedMovie',
        itemHeight:114,

        items: [
        { xtype: 'movieSortBar' , docked:'top'},   
        { xtype: 'movieSearchBar' , docked:'top' , hidden:true},    
        {
            xtype: 'container',
            cls: 'promo',
            itemId:'promo-container',
            docked:'bottom',
            html: '<span class="logo"></span>Brought to you by Sencha Touch 2.1 <button>Learn More</button>'
        }
    ],

    loadingText: null,  

    listeners: {
        order: 'before',
        select: function() {
            return false;
        },
        itemtap: function(dataview, index, target, record, evt) {

            var el = Ext.get(evt.target),
                fireEvent;

            if (el.dom.nodeName == 'B') el = el.parent();

            WL.currentMovie = record;

            if (el.hasCls('seen')) {
                fireEvent = el.hasCls('selected') ? 'unSeen' : 'seen';
                el.toggleCls('selected');
            } else if (el.hasCls('want')) {
                fireEvent = el.hasCls('selected') ? 'unWantToSee' : 'wantToSee';
                el.toggleCls('selected');
            } else if (el.hasCls('thumb') && el.hasCls('up')) {
                fireEvent = el.hasCls('selected') ? 'unLike' : 'like';
                el.toggleCls('selected');
            } else if (el.hasCls('thumb') && el.hasCls('down')) {
                fireEvent = el.hasCls('selected') ? 'unDislike' : 'dislike';
                el.toggleCls('selected');
            } else {
                fireEvent = 'tapMovie';
            }

            if (fireEvent) {
                this.fireEvent(fireEvent, record, el);
            }
        }
    },
    itemTpl: Ext.create('Ext.XTemplate',
        '<div class="moreArrow"></div>',
        '<div class="img"><img src="http://localhost/WL2/assets/rest/{image}" /></div>',
        '<div class="meta">',
            '<h3>{merchName}</h3>',
            '<div class="actions">',
                //'<div class="rating"><span>{% if (values.criticRating >= 0) { %}{criticRating}%{% } else { %}?{% } %}</span></div>',
                '<button class="seen{[values.seen ? " selected" : ""]}">{action}</button>',
                '{% if (values.seen) { %}',
                    '<button class="thumb up{[values.like ? " selected" : ""]}"><b></b></button>',
                    '<button class="thumb down{[values.dislike ? " selected" : ""]}"><b></b></button>',
                '{% } else { %}',
                    '<button class="want{[values.wantToSee ? " selected" : ""]}">Want to Go There</button>',
                '{% } %}',
            '</div>',

        '</div>'
    )

    }      // end of the categories list 
    ]
},

initialize: function() {
    this.callParent();

    // Enable the Tap event on the profile picture in the toolbar, so we can show a logout button
    var profilePic = Ext.getCmp('fbProfilePic');
    if (profilePic) {
        profilePic.element.on('tap', function(e) {
            profilePic.fireEvent('tap', profilePic, e);
        });
    }
}
}); 
```

我已经为我的视图定义了 xtype，所以我可以在我的控制器代码中引用它

这是我的控制器代码

```
Ext.define('WL.controller.Categories', {
extend: 'Ext.app.Controller',

config: {
    refs: {     
        categories: 'categories', 
        List:   'list'
    },

    control: {
        list: {
            tapMovie:  'onMovieTap'      // the function that will be created when a movie is tapped
        }

        }

},
slideLeftTransition: { type: 'slide', direction: 'left' },
    slideRightTransition: { type: 'slide', direction: 'right' },

onMovieTap: function () {
   Ext.Viewport.animateActiveItem(this.getCategories(),this.slideRightTransition);                  
}
}); 
```

我的主要问题是`getCategories()`控制器中的 get 功能不起作用，所以我可以使用向右滑动效果导航到我的视图，我认为我的问题在于定义 xtype，你能给我一个关于定义正确 xtype 的线索吗？给我尝试使用`alias:widget.categories`但效果不佳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:45:32.997

您的配置应如下所示：

```
config: {
    refs : {
        categories : {
            autoCreate: true,
            selector: '#categories_itemId',
            xtype: 'categories'
        },
        List : {
            // do the same thing for 'List'
        }
    },
    control: {
        ...
    },
    ...
},
... 
```

请注意，选择器是`itemId`你的，`view`所以给你`categories view`一个 itemId（你可以看到我刚刚编了一个）。

# java - Wav 文件数组列表。为什么这条线不起作用？爪哇

> ID：15999564
> 
> 赞同：0
> 
> 时间：2013-04-14T13:25:20.290
> 
> 标签：java, arrays, arraylist, wav, javasound

我有一个字符串数组列表，它一个一个地遍历这个列表，它应该播放 wav 文件。

在这一行“AudioInputStream ais = AudioSystem.getAudioInputStream(music(x));” 无法识别音乐，它显示“找不到符号”。此外 (music.get(x)) 不起作用。然后整行加下划线，说明其不适用。我需要做什么？谢谢。

```
 String trackName;

    ArrayList<String> music = new ArrayList();
    music.add("c:\\01.wav");
    music.add("c:\\02.wav");
    music.add("c:\\03.wav");
    music.add("c:\\04.wav");

    byte[] buffer = new byte[4096];
    for(int x = 0; x < music.size(); x++){

      try{

            AudioInputStream ais = AudioSystem.getAudioInputStream(music(x));
            trackName = "The Current Track is " + music.get(x);
            System.out.println(trackName);
            AudioFormat format = ais.getFormat();
            SourceDataLine line = AudioSystem.getSourceDataLine(format);
            line.open(format);
            line.start();

      while (ais.available() > 0) {

            int len = ais.read(buffer);
            line.write(buffer, 0, len);

           }

        line.drain(); //wait for the buffer to empty before closing the line
        line.close();

            } 
      catch (Exception e) {

            e.printStackTrace();

            }
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:31:17.017

尝试更改您的线路：

```
AudioInputStream ais = AudioSystem.getAudioInputStream(music(x)); 
```

至：

```
AudioInputStream ais = AudioSystem.getAudioInputStream(new File(music.get(x))); 
```

AudioSystem 不将字符串作为参数来获取您的音频输入流。它需要一个[InputStream](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.io.InputStream%29)、[URL](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.net.URL%29)或[File](http://docs.oracle.com/javase/7/docs/api/javax/sound/sampled/AudioSystem.html#getAudioInputStream%28java.io.File%29)，我在上面演示过。

# c# - 使用 AutoResetEvent.WaitOne() 和 .Set() 暂停后台线程

> ID：15999567
> 
> 赞同：1
> 
> 时间：2013-04-14T13:25:34.400
> 
> 标签：c#, multithreading, autoresetevent

我有以下代码。我正在尝试制作可以暂停、继续和停止下载器正在运行的后台线程的主窗体按钮（私有线程线程）

Form1.cs

```
private AutoResetEvent waitHandle = new AutoResetEvent(true);
private Thread thread;

        private void ThreadJob()
        {
            Downloader download = new Downloader();
            download.runDownloader();
        }

        // THREADS button1 is "Download now"-button
        private void button1_Click(object sender, EventArgs e)
        {
            ThreadStart job = new ThreadStart(ThreadJob);
            thread = new Thread(job);
            thread.IsBackground = true;
            thread.Start();
        } 
```

此代码在 Windows 窗体上运行。我有所有这些操作的按钮（暂停、继续、停止）

暂停和继续按钮在表单上有代码

```
private void btnPause_Click(object sender, EventArgs e)
{
    waitHandle.WaitOne(); // Need to pause the background thread
}

 private void btnContinue_Click(object sender, EventArgs e)
    {
        waitHandle.Set(); // Need to continue the background thread
    } 
```

问题是按下暂停按钮将冻结主窗体而不是后台线程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T14:24:43.220

就是`runDownloader()`必须能够暂停。

它需要定期调用`waitHandle.WaitOne()`等待句柄。

您的 WaitHandle 必须是 a `ManualResetEvent`，而不是 an`AutoResetEvent`并且您应该初始化它以便发出信号（除非您想以“暂停”状态启动线程）。

您还必须更改按钮处理程序，如下所示：

```
private void btnPause_Click(object sender, EventArgs e)
{
    waitHandle.Reset(); // Need to pause the background thread
}

private void btnContinue_Click(object sender, EventArgs e)
{
    waitHandle.Set(); // Need to continue the background thread
} 
```

这意味着您必须能够将 waitHandle 传递给线程，以便它可以等待它。

但是，自 .Net 4 以来，有更好的管理线程取消的方法，即使用[`CancellationTokenSource`](http://msdn.microsoft.com/en-gb/library/system.threading.cancellationtokensource.aspx)and [`CancellationToken`](http://msdn.microsoft.com/en-gb/library/system.threading.cancellationtoken.aspxhttp://msdn.microsoft.com/en-gb/library/system.threading.cancellationtoken.aspx)。

有关详细信息，请参阅[此 Microsoft 文章](http://msdn.microsoft.com/en-gb/library/dd997364.aspx)。

# jsf - JSF 2.0 应用程序中的问题

> ID：15999572
> 
> 赞同：1
> 
> 时间：2013-04-14T13:26:25.243
> 
> 标签：jsf

我在一个简单的应用程序中使用 JSF 2.0。我有三个 bean 第一个是登录在请求范围内，而其他 2 在视图范围内。我已经在 faces-config.xml 中进行了配置。

```
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
 <navigation-rule>
        <from-view-id>*</from-view-id>
        <navigation-case>
            <from-outcome>loginSuccess</from-outcome>
            <to-view-id>/pages/ReportSubmit.jsp</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>reportStatus</from-outcome>
            <to-view-id>/pages/ReportStatus.jsp</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>logout</from-outcome>
            <to-view-id>/pages/logout.jsp</to-view-id>
        </navigation-case>
    </navigation-rule>
    <managed-bean>
        <managed-bean-name>UserBean</managed-bean-name>
        <managed-bean-class>com.cognizant.reportgen.LoginBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>ReportBean</managed-bean-name>
        <managed-bean-class>com.cognizant.reportgen.ReportGeneratorBean</managed-bean-class>
        <managed-bean-scope>view</managed-bean-scope>
    </managed-bean>

    <managed-bean>
        <managed-bean-name>ReportStatus</managed-bean-name>
        <managed-bean-class>com.cognizant.reportgen.ReportStatusBean</managed-bean-class>
        <managed-bean-scope>view</managed-bean-scope>
    </managed-bean>

</faces-config> 
```

我有一个 menu.jsp 有以下代码

```
menu item1 <h:commandLink action="loginSuccess" value="Generate Reports"></h:commandLink>
menu item 2<h:commandLink action="reportStatus" value="Report Status"></h:commandLink> 
```

在 2 个 bean 中，我有返回类型为 void 的方法。

在登录请求中，我正在创建会话并在会话属性中设置用户详细信息。

现在我面临的问题是

1.  我用user1登录，选择菜单项1，显示相应的数据。

2.  我在下一个浏览器窗口中使用 user2 登录，选择菜单项 1，显示相应的数据。

3.  我回到浏览器窗口 1（user1），再次选择菜单项 1，但现在在标题中显示 user2 名称。，它还显示与 user2 对应的数据。

请帮我解决这个问题。

```
//ReportStatusBean.java
public class ReportStatusBean {
    private List<ReportAttrDO> reportList;
    private HtmlDataTable reportStatusTable;
    // getters and setter for above included....
    public void checkReportStatus(ActionEvent event) {

        ReportGenService reportGenObj = new ReportGenServiceImpl();
        HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);
        UserDetail user = (UserDetail)session.getAttribute("user");
        List<ReportAttrDO> reportList = reportGenObj.getReportStatusList(user.getUserId());
        setReportList(reportList);
        if(reportList.isEmpty())
            FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "No Records to display.", null));
    }

    public void viewReport(ActionEvent event) {
        ReportAttrDO reportAttrDO = (ReportAttrDO)getReportStatusTable().getRowData();
        System.out.println(reportAttrDO.getRequestHeaderId());
    }

}

// ReportStatus.jsp
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsf/html" prefix="h" %>
<%@ taglib uri="http://java.sun.com/jsf/core" prefix="f" %>
<f:view>
<html>
<head>
....some script functions..
</head>
<body onload="noBack();" onpageshow="if (event.persisted) noBack();" onunload="">

<center>
    <div class="wrapper">
    <%@include file="../include/pageheader.jsp"%>
    <%@include file="../include/menu.jsp"%>
    <h:form id="form2">
    <table border="0">
    <tr>
            <td colspan="2"><h:messages style="color:red;margin:8px;" /></td>
        </tr>
        <tr>
            <td colspan="2"><h:commandButton value="Check Status" actionListener="#{ReportStatus.checkReportStatus}" /></td>
        </tr>
    </table>
                <c:if test="${not empty ReportStatus.reportList}" >
                <div style="height:200px;width:600px;overflow:auto;">

                <h:dataTable id="table" border="1"
                    var="row" value="#{ReportStatus.reportList}" cellpadding="5" cellspacing="5"
                    binding="#{ReportStatus.reportStatusTable}">

                    <h:column>
                        <f:facet name="header">
                            <f:verbatim>
                                <h:outputText value="Application Name" />
                            </f:verbatim>
                        </f:facet>
                        <h:outputText id="applName" value="#{row.applicationName}" ></h:outputText>

                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <f:verbatim>
                                <h:outputText value="Report Name" />
                            </f:verbatim>
                        </f:facet>
                        <h:outputText id="reportReqName" value="#{row.reportRequestName}"></h:outputText>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            <f:verbatim>
                                <h:outputText value="Generated Report" />
                            </f:verbatim>
                        </f:facet>
                        <h:commandLink id="viewReport" value="View" rendered="#{row.status == 'Completed'}" actionListener="#{ReportStatus.viewReport}"></h:commandLink>
                    </h:column>
                </h:dataTable>
                </div>
                </c:if>
    </h:form>
    </div>
</center>
</body>
</html>
</f:view> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:11:43.020

HTTP 会话在浏览器的选项卡之间共享，因此您遇到的是预期行为。当您在下一个选项卡中登录时，您很可能替换了现有的会话属性。

您也可以在不同的浏览器中尝试它，但不能在同一浏览器的不同选项卡中尝试，以查看它是否按预期工作。最后，会话是*每个用户*的构造，应该这样看待。您必须为 bean 定义适当的范围，以便应用程序按照您的期望运行并获得良好的用户体验。

与您的具体问题无关，使用使用 POST 请求进行普通页面到页面导航的命令链接被认为是一种不好的做法：您应该`<h:link>`改用。有关详细信息，请参阅下面的第三个参考。

此外，在我看来，在 JSF 2.0 应用程序中使用 faces-config.xml 单独配置导航规则和声明托管 bean 有点过时。最后但并非最不重要的一点是，JSP 是如今已被弃用的视图技术，已被 facelets 所取代，因此应仔细重新考虑使用 JSP 作为视图技术开发新应用程序。

# 也可以看看：

1.  **[如何选择合适的bean范围？](https://stackoverflow.com/a/7031941/1820286)**;
2.  **[JSF 2.0 中的通信，关于 bean 范围的部分](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ManagedBeanScopes)**；
3.  **[什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/a/4317723/1820286)**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:42:25.677

您需要根据会话用户而不是登录结果呈现菜单条件，例如：

```
<h:form>
    <h:panelGroup rendered="#{not userbean.isLogged}">
        <h:inputText value="#{userBean.username}" />
        <h:inputText value="#{userBean.password}" />
        <h:commandButton actionListener="#{userBean.login}" />
    </h:panelGroup>

    <h:panelGroup rendered="#{userBean.isLogged}">
        <h:commandLink rendered="#{userBean.user eq "user1"}" action="loginSuccess" value="Generate Reports"></h:commandLink>
        <h:commandLink rendered="#{userBean.user eq "user2"}" action="reportStatus" value="Report Status"></h:commandLink>
    </h:panelGroup>
</h:form> 
```

当然，例如，它需要 userBean 内部的一些函数来获取用户名。

另外，您的意思是您已经使用**ViewScoped**配置了 bean ，它们在提供的代码中都是**RequestScoped**。

我建议您使用 .xhtml 文件扩展名，这是 JavaServer Faces 视图中的标准。

# java - eclipse 和 perforce

> ID：15999577
> 
> 赞同：1
> 
> 时间：2013-04-14T13:27:00.813
> 
> 标签：java, eclipse, project, perforce

我已经尝试了一周的最佳时间，但我似乎无法将一个项目添加到 Eclipse 中，然后在另一台从 perforce 获取它的计算机上运行。请有人可以帮助或指出我正确的方向吗？

我在 Eclipse 中创建了一个新的工作区并添加了一些外部 jar，我是否需要这些 perforce 或者其他用户只是将它们复制到他们的计算机上并更新构建路径？

jar 经常更新，但名称包括版本名称，例如 helper3.21.jar，如果我将其重命名为 helper.jar，它仍然可以工作吗？这样我就可以让它们在 perforce 中，并在每次出现具有相同名称的新版本时提交它们。

一旦我在 Eclipse 中有我的项目，我就使用了团队菜单并将其添加到 perforce，但是当我在另一台计算机上检查它时，我无法让它运行，因为它说以前没有启动。我创建了一个启动配置并将其签入，但随后出现工作区名称错误。

每个签出它的人都需要创建一个同名的工作区吗？

有人可以指导我逐步建立一个项目，检查 perforce 所需的一切并让它在另一台计算机上运行吗？

感谢您的任何帮助。

# jquery - 无法读取未定义/jquery dropDown 插件的属性 LENGTH

> ID：15999580
> 
> 赞同：0
> 
> 时间：2013-04-14T13:27:09.563
> 
> 标签：jquery, html

谁能帮助解释为什么这对我不起作用？

我按照文档的说明进行操作，此处： [自定义下拉图像组合框](http://www.htmldrive.net/items/show/550/jQuery-custom-dropdown-image-combobox)，但它不断向我抛出“无法读取未定义的属性'长度'”警报。

我已经下载了插件，并将其安装在相关位置，我的标题如下所示：

```
<link rel=stylesheet type=text/css href=css/stylepage.css>
<link rel=stylesheet type=text/css href=css/dd.css>

<script type="text/javascript" src="jquery/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="jquery/jquery.dd.js"></script> 
```

这是 HTML 选择：

```
 <select id="exchange" name="exchange">
        <option value="points" title="images/coins.png"> Credits </option>
        <option value="money" title="images/money_dollar.png">Money </option>
        <option value="stocks" title="images/stock.png">Stocks</option>
 </select> 
```

jquery（在正文中）：

```
<script language="javascript">
$(document).ready(function(e) {
try {
$("body select").msDropDown();
} catch(e) {
alert(e.message);
}
});
</script>

</body> 
```

谁能告诉我为什么？

页面上没有其他 SELECT 元素，也没有其他 ID 为 #exchange 的 ID。

我也尝试在文档就绪功能中将 $("body select") 替换为 $("#exchange") 。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:19:09.103

如果您有所有有标题的选项（img 链接）

```
<select id="exchange" name="exchange">
        <option value="points" title="images/coins.png"> Credits </option>
        <option value="money" title="images/money_dollar.png">Money </option>
        <option value="stocks" title="images/stock.png">Stocks</option>
 </select> 
```

它会起作用的！

-

如果您有任何空白选项（如下所示）

```
<select id="exchange" name="exchange">
        <option value="points" title="images/coins.png"> Credits </option>
        <option value="money" title="images/money_dollar.png">Money </option>
        <option value="stocks" title="images/stock.png">Stocks</option>
        <option value="blank">blank</option>

 </select> 
```

它不会工作并给出“无法读取未定义的属性'长度'”警报。

# ajax - AJAX 调用返回 301 错误并停止

> ID：15999581
> 
> 赞同：1
> 
> 时间：2013-04-14T13:27:16.353
> 
> 标签：ajax, http-status-code-301

我有一个 AJAX 调用对我网站根目录中的一个文件中的 PHP 脚本工作得很好。像这样：

```
 jQuery.ajax({
        type: "POST",
        url: "/addToPicks.php",
        data: {imagePath: theImagePath, clientPath: theClientPath},
        async: true
    }); 
```

但是当我移动 addToPicks.php 文件然后这样调用它时：

```
 jQuery.ajax({
        type: "POST",
        url: "/site/addToPicks.php",
        data: {imagePath: theImagePath, clientPath: theClientPath},
        async: true
    }); 
```

我收到 301 错误并且 PHP 脚本没有运行。

我必须做些什么来修复我调用 PHP 脚本的方式？

# c# - 以编程方式读取汽车里程表和其他汽车信息

> ID：15999584
> 
> 赞同：2
> 
> 时间：2013-04-14T13:27:22.013
> 
> 标签：c#, android, iphone, .net, api

是否有任何标准或标准可以连接到任何“智能”汽车以读取汽车信息，例如里程表、速度表、GPS 信息（如果存在）？或者这取决于汽车制造商，是否有一些知名汽车制造商的API - 例如宝马，福特，梅赛德斯 - 奔驰，......等 -？主要的沟通方式是什么？蓝牙还是无线上网？

平台不是问题，我需要一些 API（Android、Windows、iPhone 或任何其他平台）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:30:54.560

您需要查看 CAN 总线协议。它正在成为车载设备通信的事实标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:38:31.947

恐怕汽车制造商不会让您通过蓝牙访问汽车用来在其组件之间共享信息的内部网络。我的猜测是，这对大多数汽车制造商来说都是一个安全隐患。

但是，如果您可以修改汽车： http: [//openxcplatform.com/](http://openxcplatform.com/)是一个开源和开放平台，允许您将 Android 设备连接到汽车，但它确实需要您在汽车上安装新硬件在这种情况下，您可以添加一个蓝牙模块。

是的，有人远程控制汽车的电影是纯粹的科幻小说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-11T20:53:27.337

我知道这是旧的，但如果您仍在寻找允许您检查里程表、位置等的 API，请查看[https://smartcar.com](https://smartcar.com)。Smartcar API 允许您访问不同汽车品牌的多个端点！

*   里程表-> [https://smartcar.com/product/odometer](https://smartcar.com/product/odometer)
*   位置 -> [https://smartcar.com/product/location](https://smartcar.com/product/location)
*   锁定和解锁 -> [https://smartcar.com/product/security](https://smartcar.com/product/security)
*   Vin -> [https://smartcar.com/product/vin](https://smartcar.com/product/vin)
*   一般信息-> [https://smartcar.com/product/vehicle-info](https://smartcar.com/product/vehicle-info)

# .net - 了解 Windows 开发 API

> ID：15999589
> 
> 赞同：1
> 
> 时间：2013-04-14T13:27:51.027
> 
> 标签：.net, user-interface, gdi

我正在为一个项目开发一个带有 GUI 的应用程序。（我的第一个 GUI 应用程序） 目前，我正在研究如何为 Windows 创建 GUI。到目前为止，我已经决定使用 Windows 窗体来创建 GUI。Windows 窗体是 .NET 框架的一部分吗？另外，我需要能够在表格上绘制图形。网络上的大多数教程都建议使用称为 GDI+ 的东西。这也是 .NET 框架的一部分吗？

编辑：我最初输入了 GDI .. 我的意思是 GDI+

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:45:54.803

WinForms 是 .NET 的一部分，而 GDI/GDI+ 是 Windows/.NET API。但是，根据您需要绘制的图形的类型和复杂性，您可能需要考虑 WPF，它是 .NET 中的另一个（较新）GUI 框架。

[WinForms](http://msdn.microsoft.com/en-us/library/dd30h2yb.aspx)是用于构建 GUI 的“旧”.NET 框架。它是基于代码的（例如，您的 GUI 元素是从源代码设置的）并使用 GDI+ 来绘制自身。GDI+ 被认为是一个[遗留](http://msdn.microsoft.com/en-us/library/windows/desktop/ms533798%28v=vs.85%29.aspx)API，我想说 WinForms 也接近这个。

[WPF](http://msdn.microsoft.com/en-us/library/ms754130.aspx)是用于构建 GUI 的 .NET 3.0+ 框架。它是基于标记的（就像您在 XML 中定义 GUI 一样）。它依靠 DirectX 来绘制自身，提供更高的图形性能和精度。但是 WPF 最大的优点是提高了生产力 - 我已经广泛使用了这两种方法，而且从我的角度来看，有些事情在 WPF 中更容易完成，并且生成的代码通常更干净。另请参阅[此问题](https://stackoverflow.com/questions/1926000/why-should-i-use-wpf-over-winforms-any-examples-of-wpf-outperforming-winforms)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:36:19.987

WinForms 是 .NET 框架的一部分。GDI+ 是 .NET 框架的一部分。

# powerbuilder - 如何使用 PowerBuilder 读取和解析 X12 数据元素？

> ID：15999594
> 
> 赞同：0
> 
> 时间：2013-04-14T13:27:58.333
> 
> 标签：powerbuilder, edi, x12, powerbuilder-pfc

平面文件内容：

```
ST*850*12500001|
BEG*00*NE*71249364**20130103|
CUR*SE*SGD|
REF*BT*SGL169816-7191416|
P01*0000000001*4*EA*0*CP*UP*731304265511*VP*SURT1000XLIQ|
P01*0000000002*10*EA*0*CP*UP*731304265511*VP*SURT1000XLIQ|
P01*0000000003*100*EA*0*CP*UP*731304265511*VP*SURT1000XLIQ| 
```

![文件的第一行](https://i.stack.imgur.com/xGwOb.jpg)

问题：

任何可以分享如何动态解析每个元素的想法的人。每个数据的长度有时会有所不同，例如：12500001、731304265511 和 SURT1000XLIQ。问题是如何获取星号 (*) 和管道 (|) 之间的数据。谢谢帮忙....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:15:25.977

您的平面文件看起来像[EDI](http://en.wikipedia.org/wiki/Electronic_data_interchange)文件，但不是 EDIFACT。

有一些从 EDI 到 XML 的转换器（开源或商业），也许您可​​以尝试使用这样的工具来将生成的 xml 文件读取到 DataWindow 或数据存储中？

由于我不知道实际的文件格式，我不能更准确。

EDI -> XML 转换器示例：

*   [BOTS](http://bots.sourceforge.net/en/index.shtml)（代码存储在[Google Code上](https://code.google.com/p/bots/)
*   [libEDI](https://code.google.com/p/libedi/)
*   [编辑到 xml](https://github.com/zubairov/edi-to-xml)
*   [EDIdEv](http://www.edidev.com/?gclid=CL_i1v3TyrYCFfMdtAod2wgAyQ)（商业）
*   Altova [EDI 到 XML](http://www.altova.com/mapforce/edi-to-xml.html)（商业）

**编辑**：我刚刚在 PowerBuilder Developer Journal 上发表了一篇关于同一主题的古老帖子：“[将 X12 EDI 转换为 XML](http://pbdj.sys-con.com/node/40533) ”，它提供了额外的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T06:17:48.103

如果您使用的是普通的旧 PowerBuilder，那么基础就是做一堆 Pos() 和 Mid()；没有什么自动的。但是，在您的标签中，您提到了 PFC；读入文件后，您始终可以引入字符串服务的 of_ParseToArray() 函数，例如（以下内容未经测试，由读者自行查找错误）：

```
long ll_Line, ll_LineCount, ll_Element, ll_ElementCount
string ls_Lines[], ls_Elements[]
n_cst_String lnv_String  

ll_LineCount = lnv_String.of_ParseToArray (ls_FileContents, "|", ls_Lines)
FOR ll_Line = 1 TO ll_LineCount
   ll_ElementCount = lnv_String.of_ParseToArray (ls_Lines[ll_Line], "*", ls_Elements)
   // process the line with the elements separated out...
NEXT 
```

祝你好运，

特里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T05:04:11.673

那是一个 X12 文件，一个 850 采购订单。正如[eppye](https://stackoverflow.com/users/251208/eppye)在评论中所建议的那样，您需要确切地找出您获得的文件遵循的标准。为了帮助您入门，这里有一个 850[版本](http://www.aftermarketsuppliers.org/Doc-Vault/MTC.aspx)。“Draft MEMA 4010 850”将帮助您了解格式。“GCommerce 4010 850V1.4.doc”是告诉您每个元素中的内容的数据字典。但请理解，除非您销售汽车零部件，否则这可能不是您正在使用的文件的确切规格。向您发送文件的人应将其提供给您。

我将为每个段和循环创建一个用户对象，一个代表采购订单本身。采购订单 UO 需要作为段和循环数据类型的变量。不要包括循环内的段，将它们放在循环的 UO 中。段的 UO 将具有段中数据元素的标准数据类型变量，如字符串、整数、日期等。有关数据类型，请参阅数据字典。

请注意，如果一个段重复，则保存该段的变量是一个数组。循环的变量将是数组。

处理段的对象将有一个方法，例如`of_importLine`，在星号处拆分行并存储值。

处理循环的对象将有一个方法，例如`of_readLoop`读取行（段）直到它读取循环的最后一段。对于每个段，它将为该类型的段创建 UO，将其分配给实例变量，或者如果段可以重复，则分配给下一个数组槽，并调用新对象的 `of_importLine`.

处理采购订单的对象类似于循环的对象，除了当它看到循环的第一段时，它会为这种循环创建 UO，将其分配给循环的下一个数组槽，并调用新对象的 of_readLoop。请注意，当您的采购订单对象在循环内读取时，它将创建一个新对象来读取和存储循环的每个重复。

如果缺少所需的段或找到不属于循环的段，则读取循环的对象应记录错误并停止。错误应包括行号和内容。我无法详细说明如何验证采购订单本身，因为许多部分在规范中是可选的，但它们在您的应用程序中可能不是可选的。对于每个段和循环，对象都有一个变量，它需要项目出现的顺序以及最小和最大出现次数。然后 PO 对象可以检查分段和循环。

这会将文档中的数据获取到表示文档部分的对象中，以便您可以使用数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T03:33:23.280

以下是我得出的方法。

```
ls_tranidcode = of_trimdata(is_Message, 4, '*')
ids_edihdr.SetItem(ll_hdrins,'TRANSETIDCODE',ls_tranidcode)

Function:
of_trimdata()

Return Type : String 
Argument Type : 
String arg_msg
Integer pos1
String  s_dlm

Long ll_pos2
String ls_ret

arg_msg = mid(arg_msg, pos1)            
ll_pos2 = POS(arg_msg,s_dlm) 
ls_ret = Mid(arg_msg, 1, ll_pos2 - 1)
arg_msg = Mid(arg_msg, ll_pos2 + 1) 

RETURN ls_ret 
```

# javascript - CSP 警告萤火虫

> ID：15999597
> 
> 赞同：3
> 
> 时间：2013-04-14T13:28:14.570
> 
> 标签：javascript, firebug, content-security-policy

我正在使用 JavaScript 和画布开发游戏。最近，自从我实现点击后，我一直在萤火虫中收到这条消息：

> CSP 警告：不推荐使用允许指令，请改用等效的默认源指令

完全不影响游戏，但我想知道这是什么意思？它最终会影响我的游戏吗？

我在网上找到了这个，但我无法理解它，我不完全确定它是否在谈论我收到的相同消息

[关联](https://bugzilla.mozilla.org/show_bug.cgi?id=634778)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:26:07.773

CSP 是[Content Security Policy](http://www.w3.org/TR/CSP/)，这些是 HTTP 标头，例如可以限制浏览器中的 JavaScript 执行。该警告指出了该策略的一个非关键问题。

查看可以`curl -I`在服务器上使用的标头。“Content-Security-Policy”、“X-Content-Security-Policy”和“X-WebKit-CSP”字段是相关的。

由于您不了解 CSP，我假设您没有管理 Web 服务器，您可能需要与负责人交谈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-28T00:15:42.670

这是 CSP 的旧语法。您不再说：“允许'自我'”。你说：

内容安全策略：default-src 'self'

# ruby-on-rails - 如何将两个表中的数据显示到一个表单中

> ID：15999599
> 
> 赞同：0
> 
> 时间：2013-04-14T13:28:17.050
> 
> 标签：ruby-on-rails, ruby, database, show

我使用 Ruby v 3。我想将 2 个表中的数据显示为一种形式。我的模型：

```
class Address < ActiveRecord::Base
  attr_accessible :city, :number, :street

  validates :city, :presence => true
  validates :number, :presence => true
  validates :street, :presence => true

  has_many :users
end

class User < ActiveRecord::Base
  belongs_to :address
  attr_accessible :name, :phone, :surname, :address_attributes
  accepts_nested_attributes_for :address
end 
```

我的表格看起来像：

```
<%= form_for(@user) do |f| %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :surname %><br />
    <%= f.text_field :surname %>
  </div>
  <div class="field">
    <%= f.label :phone %><br />
    <%= f.text_field :phone %>
  </div>

  <%= f.fields_for :address_attributes do |p| %>
  <div class="field">
    <%= p.label :city %><br />
    <%= p.text_field :city %>
  </div>
  <div class="field">
    <%= p.label :street %><br />
    <%= p.text_field :street %>
  </div>
  <div class="field">
    <%= p.label :number %><br />
    <%= p.text_field :number %>
  </div>
 <% end %>
 <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

如您所见，我使用 fields_for 方法。我的控制器在这里：

```
def edit
  @user = User.find(params[:id])
  @user.address_attributes = @user.address
end 
```

它不起作用，我完全不知道为什么。当我单击地址列表上的编辑时，出现错误：

```
 undefined method `with_indifferent_access' 
```

任何人都可以帮我弄清楚吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:17:25.773

查看 RailsCast 的第 196 和 197 集：

1.  [http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)
2.  [http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

有一个 196 的修订剧集，您需要订阅 RailsCasts。

我强烈建议订阅 RailsCasts 和 CodeSchool 等学习网站，以更快**、**正确地学习 RoR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:32:41.390

试着做：

```
def edit
  @user = User.find(parmas[:id])
end 
```

在您看来：

```
<%= f.fields_for :address do |p| %> 
```

看看它是否有效，您不必添加属性

# javascript - Windows 8 Store App，如何测试应用内购买？

> ID：15999604
> 
> 赞同：3
> 
> 时间：2013-04-14T13:28:57.017
> 
> 标签：javascript, windows-store-apps, winjs, windows-store

我的应用程序是用 Javascript 创建的。我需要它来支持应用内购买以进行功能解锁。

从[文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh694067.aspx)来看，它看起来非常简单。但是，当我尝试实现它时。我注意到`S_OK`从`CurrentAppSimulator.requestProductPurchaseAsync`, 回来后`CurrentAppSimulator.licenseInformation.productLicenses.lookup(main.licenseName).isActive`不会更改为 true。

然后我发现了这个答案[CurrentAppSimulator.RequestProductPurchaseAsync 购买模拟](https://stackoverflow.com/a/12575639/108574)，提到了一些关于调用`RequestAppPurchaseAsync`一次的事情`requestProductPurchaseAsync`。我做到了，这样，我看到商店弹出两次。并选择`S_OK`两次后，`isActive`设置为`true`。但是，这种状态不是持久的。第二次运行此应用程序（通过按 F5 进行调试）将清除此标志，并且必须再次运行整个购买过程。

答案也只提到了“正确的模拟”，但没有说明这个程序是否适用于直播商店应用程序。我目前有一个为应用内购买配置的 Windows 应用商店开发者帐户，但尚未上传二进制文件。当我尝试购买时，`CurrentApp`我收到一条消息，即 Windows 商店不再提供该产品。

我想要一些可行的选项来确保我的应用内购买得到正确实施。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:21:21.723

您是否正在更新 WindowsStoreProxy.xml 文件？您必须这样做，否则购买将永远不会被设置为有效。您不需要调用 RequestAppPurchaseAsync... 只需调用 requestProductPurchaseAsync。做这个...

*   以调试模式运行您的应用程序，在任何地方中断
*   打开 QuickWatch (SHIFT + F9) 并输入 Windows.Storage.ApplicationData.current.roamingFolder.path 并复制值（我的是`C:\Users\jerfost\AppData\Local\Packages\{package name}\LocalState`
*   浏览到该位置并打开 Microsoft\Windows Store\ApiData 目录
*   在文本编辑器中打开 WindowsStoreProxy.xml 文件
*   将 CurrentApp/LicenseInformation/App/IsTrial 更改为 false
*   将 CurrentApp/ListingInformation/Product/MarketData/Name 更改为您的唯一产品名称

那应该这样做。希望有帮助。

# c# - 来自 .NET 的 CredUIPromptForCredentials 和 SecureString

> ID：15999605
> 
> 赞同：1
> 
> 时间：2013-04-14T13:29:11.840
> 
> 标签：c#, pinvoke, securestring

我想显示标准系统对话框，要求用户输入帐户用户名和密码，以使用此信息启动具有这些凭据的进程。

我已经指出了`CredUIPromptForCredentials`显示该对话框的功能。它以字符串形式返回用户名和密码。但该`ProcessStartInfo`结构需要密码为`SecureString`.

我知道我现在可以将密码用作字符串并将`SecureString`其逐个字符转换为一个字符（没有单独的函数） - 但它会`SecureString`完全破坏背后的想法。

所以我想一定有某种方法可以直接接受来自非托管调用的密码，`CredUIPromptForCredentials`就像`SecureString`在.NET中一样。毕竟，我真的不需要以任何方式访问我的应用程序中的密码。它只是应该用于启动另一个进程，然后可以尽快被遗忘。

那么我的 P/Invoke 声明`CredUIPromptForCredentials`看起来`SecureString`如何？（我从 pinvoke.net 的 C# 开始。）

**更新：**哦，如果有人有`CredUIPromptForWindowsCredentials`Windows Vista/7 中新功能的示例，那也很酷，因为我现在什至不知道如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T18:39:43.483

您可以将`IntPtr`非托管字符串缓冲区转换为`char*`并使用`SecureString(char*, int)`构造函数。

```
// somehow, we come into posession of an IntPtr to a string
// obviously, this would be a foolish way to come into it in
// production, since stringOriginalContents is already in managed
// code, and the lifetime can therefore not be guaranteed...
var stringOriginalContents = "foobar";
IntPtr strPtr = Marshal.StringToHGlobalUni(stringOriginalContents);
int strLen = stringOriginalContents.Length;
int maxLen = 100;

// we copy the IntPtr to a SecureString, and zero out the old location
SecureString ssNew;
unsafe
{
    char* strUPtr = (char*)strPtr;

    // if we don't know the length, calculate
    //for (strLen = 0; *(strUPtr + strLen) != '\0' 
    //    // stop if the string is invalid
    //    && strLen < maxLen; strLen++)
    //    ;

    ssNew = new SecureString((char*)strPtr, strLen);

    // zero out the old memory and release, or use a Zero Free method
    //for (int i = 0; i < strLen; i++)
    //    *(strUPtr + i) = '\0';
    //Marshal.FreeHGlobal(strPtr);
    // (only do one of these)
    Marshal.ZeroFreeGlobalAllocUnicode(strPtr);
}

// now the securestring has the protected data, and the old memory has been
// zeroed, we can check that the securestring is correct.  This, also should
// not be in production code.
string strInSecureString =
    Marshal.PtrToStringUni(
    Marshal.SecureStringToGlobalAllocUnicode(ssNew));
Assert.AreEqual(strInSecureString, stringOriginalContents); 
```

# nginx - 使用 nginx 启用 gzip 压缩

> ID：15999606
> 
> 赞同：34
> 
> 时间：2013-04-14T13:29:18.230
> 
> 标签：nginx, gzip

我正在尝试为我的网站组件启用 gzip 压缩。我有 ubuntu 11.04 服务器和 nginx 1.2。
在我网站的 nginx 配置中，我有这个

```
gzip打开；
#gzip_min_length 1000;
gzip_http_version 1.1；
gzip_vary on；
gzip_comp_level 6；
gzip_proxied 任何；
gzip_types text/plain text/html text/css application/json application/javascript application/x-javascript text/javascript text/xml application/xml application/rss+xml application/atom+xml application/rdf+xml;
#它是 gzip_buffers 16 8k;
gzip_buffers 128 4k；#我的页面大小是 4
gzip_disable "MSIE [1-6]\.(?!.*SV1)";

```

并且 Yslow 和谷歌速度措施建议我使用 gzip 来减少网络传输。现在，当我尝试时，`curl -I my_js_file`我得到了

```
curl -I http://www.albawaba.com/sites/default/files/js/js_367664096ca6baf65052749f685cac7b.js
HTTP/1.1 200 正常
服务器：nginx/1.2.0
日期：2013 年 4 月 14 日星期日 13:15:43 GMT
内容类型：application/x-javascript
内容长度：208463
连接：保持活动
最后修改时间：2013 年 4 月 14 日星期日 10:58:06 GMT
变化：接受编码
到期时间：格林威治标准时间 2037 年 12 月 31 日星期四 23:55:55
缓存控制：max-age=315360000
语用：公共
缓存控制：公共
接受范围：字节

```

知道我做错了什么或者我应该怎么做才能获得压缩内容？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-07-18T18:02:01.043

正如其他人所写的那样，在您的服务器中启用 gzip 压缩是不够的——客户端还需要通过`Accept-Encoding: gzip`标头（或其超集）在其请求中请求它。现代浏览器自动包含此标头，但对于 curl，您需要在命令中包含以下内容之一：

*   `-H "Accept-Encoding: gzip"`：您应该`Content-Encoding: gzip`在响应中看到标头（可能需要输出带有 curl`-v`标志的标头），以及一些看似乱码的内容输出，即实际的 gzip 流。
*   `--compressed`: 你仍然应该`Content-Encoding: gzip`在响应头中看到，但是 curl 知道在输出之前解压缩内容。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-14T13:55:48.827

我找不到您的配置有任何明显错误的地方，通常 gzip on & gzip_types application/x-javascript 足以让您继续前进。如果一切正常，您将收到一个“Content-Encoding:gzip”返回给您。

请记住：我与 GOOGLE DEVELOPER TOOLS 的一致性更高（curl 的行为方式与浏览器不同）。

在 Chrome 中，右键单击并转到“检查元素”，然后转到“网络”（如果需要，请重新加载页面），然后单击资源并检查标题选项卡，输出应如下所示（注意内容-编码是gzip，是的）：

```
Request URL:https://ssl.gstatic.com/gb/js/sem_a3becc1f55aef317b63a03a400446790.js
Request Method:GET
Status Code:200 OK (from cache)
Response Headersview source
age:199067
cache-control:public, max-age=691200
content-encoding:gzip
content-length:19132
content-type:text/javascript
date:Fri, 12 Apr 2013 06:32:58 GMT
expires:Sat, 20 Apr 2013 06:32:58 GMT
last-modified:Sat, 23 Mar 2013 01:48:21 GMT
server:sffe
status:200 OK
vary:Accept-Encoding
version:HTTP/1.1
x-content-type-options:nosniff
x-xss-protection:1; mode=block 
```

无论如何，如果您确定您的内容没有被 gzip 压缩，我通常会通过以下方式快速启动并运行：

```
## Compression
gzip              on;
gzip_buffers      16 8k;
gzip_comp_level   4;
gzip_http_version 1.0;
gzip_min_length   1280;
gzip_types        text/plain text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript image/x-icon image/bmp;
gzip_vary         on; 
```

您可以尝试使用此方法替换您的代码，和/或一次调整一个值，以帮助您本地化您的问题。

更改配置后记得重启或重新加载 nginx。

检查您的日志并查看如果您仍然被卡住，看看是否有任何有趣的事情也可能很有用。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-07-02T11:11:08.833

我刚刚更改了**gzip_http_version 1.1；**为**gzip_http_version 1.0；**然后它起作用了

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-07-01T21:19:48.767

我必须在我的`/etc/nginx/nginx.conf`配置中启用 gzip：

```
gzip on;
gzip_disable "msie6";

gzip_types text/plain text/css application/json application/javascript application/x-javascript text/xml application/xml application/xml+rss text/javascript; 
```

请注意，我必须添加`application/javascript`到标准`gzip_types`配置中。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-14T13:55:19.350

你需要运行：

```
curl -I --compressed my_js_file 
```

使 curl 为 gzip 发送一个 Accept-Encoding 标头 - 如果客户端发送一个标头说它将接受它，服务器只会压缩内容。

注意你可以写：

```
gzip_disable "msi6" 
```

而不是在 IE 5.5 和 6 中使用正则表达式来禁用，并且您不需要将 text/html 指定为类型，因为只要激活 gzip，它就会始终被压缩。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-04-14T20:02:50.937

我只是在这里猜测，但我认为您可能必须增加 gzip 缓冲区大小。

以下是浏览器从域中提取的文件。右边的数字是文件下载大小。

![从域提供的文件](https://i.stack.imgur.com/JVPrN.jpg)

您可能无法从屏幕截图中看出，但所有文本内容文件都已压缩，除了您在问题中提到的 js 文件。截图中的js文件为绿色文件，大小约为200K。此文件大小大于您为 gzip 缓冲区指定的大小 (128K)。

[Gzip 模块文档](http://wiki.nginx.org/HttpGzipModule)并没有很好地说明 gzip 缓冲区的用途（缓冲区是用于未压缩数据还是压缩数据）。但是，以下帖子似乎表明缓冲区大小应大于未压缩文件的大小：[Large files with NGINX, GZip, and SSL](https://web.archive.org/web/20180224044656/http://www.agoragames.com:80/blog/2009/11/19/large-files-with-nginx-gzip-and-ssl)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-10-16T20:26:13.033

这是我的 nginx 配置，它可以工作。

```
gzip                on;
gzip_min_length     1000;
gzip_buffers        4 8k;
gzip_http_version   1.0;
gzip_disable        "msie6";
gzip_types          text/plain text/css application/json application/javascript application/x-javasc    ript text/xml application/xml application/xml+rss text/javascript;
gzip_vary           on; 
```

我认为关键点`gzip`是`gzip_disable`和`gzip_types`。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-02-20T09:48:39.613

就像 Alaa 我必须添加`gzip_http_version 1.0;`（之前没有指定版本）才能工作（我在 Firefox 27.0.0 上尝试过）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-19T10:47:14.977

我遇到了和 Alaa 一样的问题，这个问题是由我电脑上当前安装的防病毒软件引起的。

将文件下载到客户端计算机时，代理服务器和防病毒软件可以禁用压缩。因此，如果您在使用此类防病毒软件的客户端计算机上的浏览器中运行网站，或者位于中间代理服务器后面（许多代理是透明的，您甚至可能不知道代理在您的客户端和 Web 服务器），它们可能是导致此问题的原因。

禁用防病毒软件解决了我的浏览器问题，您甚至不需要将 gzip_http_version 设置为 1.0。

希望对您有所帮助。

# php - PHP Mysql 查询（插入）问题

> ID：15999609
> 
> 赞同：0
> 
> 时间：2013-04-14T13:29:36.143
> 
> 标签：php, mysql, insert, insert-into

我对 MySQL 查询有如下问题：

我的脚本将此作为示例查询生成：

```
INSERT INTO `contacts`(`name`, `phone`, `email`, `city`, `state`, `date`) VALUES ('Test2', '123-456-7890', 'test@test.com', 'mesa', 'az', '04-14-2013') 
```

如果我直接进入 PHPMyA，效果很好。但是，我试图用来从我的网站发送查询的 PHP 脚本不起作用，我无法弄清楚。这里是：

```
$sql = "INSERT INTO `contacts`(`name`, `phone`, `email`, `city`, `state`, `date`) VALUES ('$name', '$phone', '$email', '$city', '$state', '$date')";

mysql_query($sql);

$result = mysql_query($sql);

if($result)
{
    echo("<br>Data Input OK");
} 
else
{
   echo("<br>Data Input Failed");
} 
```

没有任何东西进入 MySQL DB，也没有显示 PHP 错误，但是，如果我回显，`$sql`我会得到我之前发布的确切查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:37:10.723

只需删除代码中的单行`mysql_query($sql);`就可以了。但是您最好开始练习 PHP MySQLi ，它代表**PHP MySQL Improvement**，例如：

```
$con = mysqli_connect($host, $user, $password, $password);

$sql = "INSERT INTO `contacts`(`name`, `phone`, `email`, `city`, `state`, `date`) VALUES ('$name', '$phone', '$email', '$city', '$state', '$date')";

$result = mysqli_query($con, $sql);

if($result) {
    echo("<br>Data Input OK");
} else {
    echo("<br>Data Input Failed");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-15T12:26:25.490

```
$sql = 'INSERT INTO Table_name (`id`, `name`) VALUES ("1", "php"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T13:39:58.890

您在脚本中执行`$sql`了两次导致错误，请删除

```
mysql_query($sql); 
```

它已经准备好了

我还建议停止使用`mysql_query`请切换到`mysqli`或`PDO`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T13:31:55.217

您正在运行 mysql_query 两次。错误的原因。尝试运行以下代码。

```
$sql = "INSERT INTO `contacts`(`name`, `phone`, `email`, `city`, `state`, `date`) VALUES ('$name', '$phone', '$email', '$city', '$state', '$date')";

$result = mysql_query($sql) or die(mysql_error());

if($result){
    echo("<br>Data Input OK");
} else{
    echo("<br>Data Input Failed");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T13:44:17.247

你确定有一个有效的连接（..mysql_connect()）吗？尝试使用像这样的完整语法..

```
$conn = mysql_connect(...);
$result = mysql_query($query, $conn); 
```

还可以在执行语句后尝试强制提交 -

```
$mysql_query("COMMIT", $conn); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-14T14:42:31.000

尝试使用`mysql_query($sql,$con);`而不是`mysql_query($sql);`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-15T09:12:15.343

用这个

```
"INSERT INTO `contacts`(`name`, `phone`, `email`, `city`, `state`, `date`) VALUES ('$_POST[name]', '$_POST[phone]', '$_POST[email]', '$_POST[city]', '$_POST[state]', '$_POST[date]')"; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-04T12:11:08.557

```
if(isset($_POST['submit']))
{
   $name=$_POST['name'];
   $age=$_POST['age'];
   $address=$_POST['address'];

   $ins="insert into table_name(`name`,`age`,`address`)values('".$name."','".$age."','".$address."')";
   mysql_query($ins);
   echo 'data inserted successfully';
} 
```

# bash - 单行中正确引用了 Shell 变量定义和替换？

> ID：15999613
> 
> 赞同：2
> 
> 时间：2013-04-14T13:30:05.290
> 
> 标签：bash, zsh

我想用以下内容替换查​​询中的一些字符串：

```
URL="sub.domain.tld" mysql -A --user=username --password="password" --host=hostname usernameuction -e "update core_config_data SET value = 'http://${URL}/' WHERE path LIKE 'web/unsecure/base_url'; update core_config_data SET value = 'https://${URL}/' WHERE path LIKE 'web/secure/base_url';" 
```

这几乎可以完美地工作，除了我必须向它添加一个导出才能使其工作：

```
export URL="sub.domain.tld"; mysql -A --user=username --password="password" --host=hostname usernameuction -e "update core_config_data SET value = 'http://${URL}/' WHERE path LIKE 'web/unsecure/base_url'; update core_config_data SET value = 'https://${URL}/' WHERE path LIKE 'web/secure/base_url';" 
```

如何在不导出的情况下完成这项工作，同时将 var 与 bash 或 zsh 中引用的命令保持在同一行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:40:52.283

您可以使用`unset`从您的环境中删除导出的名称。像这样：

```
export URL=sub.domain.tld; mysql ...; unset URL

$ export FOO=bar; echo $FOO; unset FOO
bar
$ echo $FOO 
```

此外，您可以在子外壳中执行一个衬里：

```
$ (export FOO=bar; echo $FOO)
bar
$ echo $FOO 
```

您正在寻找的是类似于执行命令时的行为。像这样：

```
/* foo.c */
main (void)
{ printf ("FOO: %s\n", getenv("FOO")); }

$ FOO=bar ./foo
FOO: bar 
```

`foo`使用 FOO 扩展了调用的环境。`export`但是，在您的情况下，在处理您的 mysql 参数时，环境没有扩展，缺少 using 。您可以使用 shell 函数：

```
$ foo () { echo "FOO: ${FOO}"; }
$ FOO=baz foo
FOO: baz
$ echo $FOO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T17:11:43.093

丢失, 但在变量定义和命令`export`之间保留分号：`mysql`

```
URL="sub.domain.tld"; mysql -A --user=username --password="password" --host=hostname usernameuction -e "update core_config_data SET value = 'http://${URL}/' WHERE path LIKE 'web/unsecure/base_url'; update core_config_data SET value = 'https://${URL}/' WHERE path LIKE 'web/secure/base_url';" 
```

说明：当您将变量定义作为单独的命令（例如`URL="sub.domain.tld"; mysql ...`）时，该变量在 shell 中定义并在`mysql ...`解析所有后续命令（如 ）时应用，但不会导出到这些命令的环境。这就是你想要的。

当您导出一个变量（例如`export URL="sub.domain.tld"; mysql ...`）时，该变量在 shell 中定义并在解析后续命令时应用，*并被*导出到这些命令的环境中。

当您将变量定义作为命令的前缀（例如`URL="sub.domain.tld" mysql ...`）时，它根本不会在 shell 中设置变量，而是将其导出到该命令的环境。这根本不适用于您的情况，因为 to 的参数`mysql ... "... https://${URL}/ ..."`由 shell 扩展，而不是由`mysql`，您需要在 shell 中定义的变量，而不是在`mysql`' 环境中。

# prolog - Prolog 回复一个看起来像内存位置而不是变量内容的字符串

> ID：15999614
> 
> 赞同：0
> 
> 时间：2013-04-14T13:30:16.433
> 
> 标签：prolog

我是序言的新手。我一直在试图弄清楚为什么我不断得到以下输出：

```
What is your name:
|: Jake.
 Hello, _L142
 true. 
```

从以下代码：

```
go:-
    write('What is your name:'),nl,
    read(MyNameIs),
    write('Hello, '),write(MyNameIs),nl. 
```

我认为 _L142 是为了写回我刚刚输入的名字，即 Jake。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:33:49.783

`read`实际上是 Prolog 术语的解析器，因此它将`Jake`（首字母大写！）视为 Prolog 变量。这与一个新鲜的内部变量统一起来，`_L142`然后再打印出来。

使用小写字母键入您的姓名，将其单引号引起来，或者使用其他 I/O 机制而不是`read`.

# tomcat - 无法访问 Tomcat 7.0.39 上的 Manager 应用程序

> ID：15999618
> 
> 赞同：0
> 
> 时间：2013-04-14T13:30:27.463
> 
> 标签：tomcat, tomcat-manager

我无法访问管理器应用程序。

我已将 manager-gui 角色添加到 tomcat-users.xml 文件中...& 为 tomcat 用户添加了相同的角色，...

```
<tomcat-users>
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <role rolename="manager-gui"/>
  <user username="tomcat" password="tomcat" roles="tomcat,manager-gui"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>
</tomcat-users> 
```

...我也试过这个无济于事...

```
<tomcat-users>
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <role rolename="manager-gui"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>
  <user username="admin" password="admin" roles="manager-gui"/> 
</tomcat-users> 
```

还有什么我需要做的吗？文档读到这就是所有必要的......

所有更改后，我已停止并重新启动服务器...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-27T15:50:21.807

使用“service tomcat7 start/restart”启动服务将解决您的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T17:16:26.443

@日食

在 localhost-config\ 访问文件“tomcat-users.xml”@ C:\Users\MyUserName\workspace\Servers\Tomcat v7.0 Server

并添加行...

```
 <?xml version="1.0" encoding="UTF-8"?>
    <tomcat-users>
        <role rolename="manager-gui"/>
        <user username="tomcat" password="12345" roles="manager-gui"/>
    </tomcat-users> 
```

希望这能解决问题。

# amazon-web-services - 无法通过 OpsWorks 找到由 Chef 自定义配方创建的 cron 作业

> ID：15999619
> 
> 赞同：1
> 
> 时间：2013-04-14T13:30:35.163
> 
> 标签：amazon-web-services, chef-infra

我在使用`execute_recipes`OpsWorks 部署部分中的命令运行的自定义配方中有以下代码：

```
cron "my_cron_job" do
  command "python /path/to/apythonfile.py"
end 
```

当我通过 SSH 访问实例并使用 root 检查 /etc/crontab 时，我在那里找不到这项工作。但是，在查看此命令运行的 Chef 日志时，相关行如下：

```
[Thu, 11 Apr 2013 21:24:23 +0000] DEBUG: Processing cron[my_cron_job] on instance1.localdomain
[Thu, 11 Apr 2013 21:24:23 +0000] DEBUG: Cron 'my_cron_job' not found
[Thu, 11 Apr 2013 21:24:23 +0000] INFO: Added cron 'my_cron_job' 
```

那么，执行此配方后，我在哪里**可以**找到实例上此 cron 作业的实际记录？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:39:58.970

也许在`/etc/cron.d/my_cron_job`？我假设 Chef 使用作业名称来创建一个单独的文件，因为它更容易管理它而不是其他可能非厨师作业所在的 crontab。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T21:29:28.033

使用带有 Amazon Linux 的实例，我的 cron 作业列在 root 用户下。在 ssh-ing 进入实例后，我跑了

```
sudo -i       # Logs you in as root.
crontab -l    # Prints crontab 
```

它们被打印到终端上。

# android - 你如何处理android中的用户颜色设置？

> ID：15999623
> 
> 赞同：0
> 
> 时间：2013-04-14T13:31:07.220
> 
> 标签：android, settings

我正在构建一个 android 应用程序，我希望用户在 GUI 中选择不同的颜色主题。一些简单的东西，比如不同深浅的颜色。

你怎么处理这个？您是否将所有需要的颜色保存为 android 资源中的颜色，然后根据颜色设置以编程方式设置颜色？或者您可以直接在 xml:s 中读取设置吗？

或者（如果你不能通过 xmls 做到这一点）你是否将所有颜色存储在一个类中作为公共静态？如果您必须以编程方式更改颜色，这对我来说似乎更简单。

对此事的想法将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:38:29.590

所有这一切都可以通过 Android 上的主题来完成，您可以阅读本文找到更多信息：http: [//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

# ruby - Ruby 中的正则表达式问题

> ID：15999633
> 
> 赞同：0
> 
> 时间：2013-04-14T13:31:47.877
> 
> 标签：ruby, regex

我在使用 Ruby 从文本文件中获取数据时遇到问题。我已经打开并读取了文件，并用 '%' 替换了所有换行符（因为换行符似乎会导致问题），但是当我尝试对字符串调用扫描时，它并没有按照我想要的方式解析至。我确信这个正则表达式比它需要的更丑陋，但这就是它正在做的事情：[http ://rubular.com/r/JNgleGA5bd](http://rubular.com/r/JNgleGA5bd)

该文件有一个编号列表，并且由于格式是一致的，我想要一个正则表达式来获取列表中的每个项目。在我包含的片段中，它应该在“2.（tab）如果“其他”船制造商之前抓取所有内容，

这是字符串的示例：

> "1\. 你的船是什么牌子的？%% [- Select One -]%%Var. 1: Code = A2_asdfw, Name = A2_WhatMakeIsYourBoat%%Type = Category%%Template = Standard Category%%Cat. 1: Code = 339 , Name = NONE%%Cat. 2: Code = 3, Name = asdfg%%2\. 如果是“其他”船制造商，请在此处描述：% ***_* __ *_* __ *_* ___** %% Var. 1: Code = A154_asdf, Name = A36_asdfg%%Type = Literal%%Template = Standard Literal%%最大长度 = 20 个字符%%"

这是我的正则表达式：

```
([0-9]+\.\t[\/0-9a-zA-Z\s,"()'-]+[%\t?:].*?)[0-9]+\.\t[\/0-9a-zA-Z\s,"()'-]+[%\t?:] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:15:23.557

假设每个条目都以模式“digit-period-tab”开头，您可以使用此正则表达式：

```
[0-9][.]\t(?:(?![0-9][.]\t).)* 
```

[工作演示。](http://rubular.com/r/GRBXUIqISV)

这里有一些解释：

```
[0-9]          # match a digit
[.]            # match a period - same as "\.", but more readable IMHO
\t             # match a tab
(?:            # open non-capturing group. this group will match/consume single
               # character, that is not the beginning of the next item
  (?!          # negative lookahead - this does not consume anything, but ensure
               # its contents canNOT be matched at the current position
    [0-9][.]\t # check that there is no new item starting
  )            # end of negative lookahead ... if we get here, the next character
               # still belongs to the current item; note that the engine's
               # "cursor" has not moved
  .            # consume an arbitrary character
)              # end of group
*              # repeat 0 or more times (as often as possible) 
```

[有关环视的更多信息。](http://www.regular-expressions.info/lookaround.html)

如果您的项目可以超出数字`9`（即，有多个数字），只需`+`在两者之后添加一个`[0-9]`。

# java - 如何在使用 DefaultListModel() 添加或删除元素时更新 JList

> ID：15999640
> 
> 赞同：1
> 
> 时间：2013-04-14T13:32:11.350
> 
> 标签：java, swing, jlist, defaultlistmodel

我知道这个问题以前问过很多次。但是，我花了几个小时研究更新 JList 的方法，但我无法处理这个问题。我正在尝试实现一个 JList 来显示谁在线或离线。（它包含 JLabels 我想这是保存带有图标的字符串的唯一方法）。我有我自己的`CellRenderer()`，就像;

```
public class UserRenderer extends DefaultListCellRenderer {

    @Override
    public Component getListCellRendererComponent(JList list, Object value,int index, boolean isSelected, boolean hasFocus) {

       if(value instanceof ClientObject){

           final ClientObject clientObject = (ClientObject) value;
           JLabel label = (JLabel) super.getListCellRendererComponent(list, clientObject.getNickName(), index, isSelected, hasFocus);

           if(clientObject.isIsOnline()){

               label.setIcon(iconArray[1]);
           }
           else{

               label.setIcon(iconArray[0]);
           }

           return label;
       }

       else {

           return super.getListCellRendererComponent(list, value, index, isSelected, hasFocus);
       }
    }

} 
```

此外，每当他/她以这种方式连接到服务器时，我都会构建客户的列表；

```
private void buildBuddyList(ClientObject tempClientObject){

    if( tempClientObject.getBuddyList().size() > 0 ){

        mainClient.setBuddyList(tempClientObject.getBuddyList());

        for (Iterator<ClientObject> iter = mainClient.getBuddyList().iterator(); iter.hasNext();) {

            ClientObject tempon = iter.next();

                if(tempon.isIsOnline()){

                    model.addElement(tempon);
                    labelIconList.put(tempon, iconArray[1]);
                }

                else{

                    model.addElement(tempon);
                    labelIconList.put(tempon, iconArray[0]);
                }
        }
    }
} 
```

当客户改变他/她的状态（变为在线/离线）时，我使用的技巧是我摆脱所有元素`model.clear()`并重新开始构建列表。这是代码段；

```
 if(tempClientObject.isStatusChanged()){

          if(tempClientObject.isIsConnected()){ 

                System.out.println(tempClientObject.getUserName() + " is ONLINE");

                model.clear();

                for (Iterator<Map.Entry<ClientObject,ImageIcon>> iter = labelIconList.entrySet().iterator(); iter.hasNext();) {

                    Map.Entry<ClientObject,ImageIcon> pairs = iter.next();

                    ClientObject changedOnlineStatusClient = (ClientObject) pairs.getKey();

                    if(changedOnlineStatusClient.getUserName().equals(tempClientObject.getUserName())){

                        changedOnlineStatusClient.setIsOnline(tempClientObject.isIsOnline());
                    }

                    model.addElement(changedOnlineStatusClient);
                }
          }

          else{

                System.out.println(tempClientObject.getUserName() + " is OFFLINE");                

                model.clear();

                for (Iterator<Map.Entry<ClientObject,ImageIcon>> iter = labelIconList.entrySet().iterator(); iter.hasNext();) {
                    Map.Entry<ClientObject,ImageIcon> pairs = iter.next();
                    ClientObject changedOnlineStatusClient = (ClientObject) pairs.getKey();

                    if(changedOnlineStatusClient.getUserName().equalsIgnoreCase(tempClientObject.getUserName())){

                        changedOnlineStatusClient.setIsOnline(tempClientObject.isIsOnline());
                    }

                    model.addElement(changedOnlineStatusClient);
                }                      
          }
       } 
```

我可以保证逻辑系统工作正常。（如果它们在后台正常工作，我可以检查这些操作）。唯一的问题是有时连接到服务器 JList 的客户端看起来是空白的，即使它在模型中添加了元素。我会感谢每一个答案。无论如何谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:37:57.833

> 只评论，不回答

不需要一维`JList`

```
if(value instanceof ClientObject){ 
```

因为`Object`从

```
getListCellRendererComponent(JList list, Object value, int index, 
       boolean isSelected, boolean hasFocus) { 
```

返回相同的值，然后测试这个值`if == or equeals`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:03:54.480

首先感谢您的所有回复。另一方面，我纠正了我在需要更新时创建新模型的问题。所以代码段是这样的；

```
DefaultListModel tempModel = new DefaultListModel();

// add or remove elements from tempModel

buddyList.setModel( tempModel ); 
```

我不确定这是否是唯一正确的方法，但至少它有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-14T13:39:45.050

调用`model.fireContentsChanged()`方法。

[AbstractListModel 上的 JavaDoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/AbstractListModel.html#fireContentsChanged%28java.lang.Object,%20int,%20int%29)

# performance - 数据库效率：从表到表的引用/指针

> ID：15999641
> 
> 赞同：0
> 
> 时间：2013-04-14T13:32:12.740
> 
> 标签：performance, database-design

我正在学习数据库，并且不确定对我来说似乎没有任何意义的东西。在关系模型中，您可以通过引用进行组合，但始终需要每个表中的全局排序键才能组合此信息。这在大多数情况下显然是必需的，但我觉得在数据库的完美树层次结构中这是低效的。

为了更好地解释这一点，我将使用将产品存储在数据库中的示例。产品有主类和子类，非常清晰。（即牛奶是乳制品的子类别，乳制品是食品的子类别等）

我认为在这种情况下，在字段中存储单个或一系列引用/指向表的引用/指针的能力将消除大量搜索查询和存储需求。

这是我为说明这一点而制作的简单痛苦布局的链接： [图像](http://postimg.org/image/v1cxd96b5/)（表条目可能有一些命令字符，如“|”，之后它知道以下条目是文件目录，因此当数据库启动时，它知道创建一个那里的指针）

由于我现在只学习使用数据库，因此我知道我可能只是缺少有关该主题的一些知识，但是当我尝试使用谷歌搜索此问题时似乎没有找到任何东西。任何解释从哪里开始的帮助或任何确认这可能会提高效率以及我可以在哪里学习如何自己编写这个都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:17:21.480

仅当您要指向的对象具有明确定义的地址且至少与指针本身一样永久时，“指针”的概念才有用。如果地址不那么永久，您最终可能会得到一个“悬空”指针。

数据库中的一行不一定有永久地址。¹通过通过逻辑值（而不是物理地址）引用行，即使行物理移动，引用仍然有效。²并且为确保该值准确标识一行，它必须是唯一的。³

至于将值列表（无论是“指针”还是其他任何东西）存储在单个字段中，这违反了[原子性](http://en.wikipedia.org/wiki/1NF#Atomicity)原则，因此违反了 1NF。避免违反 1NF 有很好的理由，包括保持参照完整性和利用索引的能力。话虽如此，有些 DBMS 支持单个字段中的数组甚至子表，这在极少数情况下可能很有用。

* * *

*¹例如，只要行没有在磁盘上物理移动，Oracle ROWID 就保持不变，但这可能发生在作为正常数据库操作一部分的[许多情况下。](https://stackoverflow.com/a/435123/533120)因此，除了严格限制数据库的使用方式之外，您不能依赖 ROWID 在引用它的行的生命周期内保持不变（这可能与数据库本身的生命周期一样长）。*

*²我认为理论上 DBMS 可以跟踪所有指针并在行物理移动时更新它们。但是，我不知道在实践中实际上支持这种“可更新”指针的任何 DBMS，可能是因为所需的底层机制不会比标准的“基于值”引用更有效。*

*³并且显然必须是非空的。说属性（或其组合）是“非 NULL 且唯一的”，与说它是“键”同义。理想情况下，密钥也应该是不可变的（因此不需要像 ON UPDATE CASCADE 这样的级联引用操作）。*

# php - 正则表达式模式仅在存在一个 [URL] 标记时有效

> ID：15999646
> 
> 赞同：0
> 
> 时间：2013-04-14T13:32:25.357
> 
> 标签：php, regex

我正在使用以下正则表达式模式来获取值`[URL=http://www.google.com]Google[/URL]`

```
$pattern = '/\[\s*URL(.+?)?\s*\](.+?)\[\s*\/URL\s*\]/i'; 
```

它工作正常，但前提是只有一个`[URL]...[/URL]`. 如果有一个字符串有多个`[URL]....[/URL]`它给出错误的值

例如对于以下字符串

```
$string = '[URL=http://www.google.com]Google[/URL] another website [URL]www.youtube.com[/URL]'; 
```

它将第一个匹配项输出为`]http://www.freshupnow.com[/URL`并保留其余的 URL 标记。我已经尝试了很多在我的正则表达式模式中找到问题但失败了。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:38:44.860

您的 URL 搜索按预期工作，也就是说，如果您列出的 /URL 不正确，或者您匹配的模式与您提供给我们的模式不同。

```
$pattern = '/\[\s*URL(.+?)?\s*\](.+?)\[\s*\/URL\s*\]/i'; 
```

将得到

```
([URL=http://www.google.com]Google[/URL] another website [URL)
(]www.freshupnow.com)
([/URL]) 
```

对于上面的正则表达式。

如果您希望它不会跳出系统，您只需将 RegEx 稍微更改为

```
$pattern = '/\[\s*URL([^\]]+?)?\s*\](.+?)\[\s*\/URL\s*\]/i'; 
```

这将防止它在执行模式表达式时跳出 []。

# javascript - Jquery Animate 高度切换

> ID：15999654
> 
> 赞同：2
> 
> 时间：2013-04-14T13:33:13.630
> 
> 标签：javascript, jquery, widget

我正在使用 JQuery 来制作小部件效果，即最小化和最大化小部件..

但问题是，当我快速单击最小化按钮时，小部件崩溃..

我认为问题在于它在切换时将中间动画高度作为其新高度......

请帮忙...

```
$(document).ready(function () {
        $('.widget-minimize').click(function () {
            toggleMinimize($(this).parents('.widget').attr('id'));
        });

        $('.widget-close').click(function () {
            closeWidget($(this).parents('.widget').attr('id'));
        });
    });

    function toggleMinimize(widgetId) {
        var $content = $('#' + widgetId + ' .widget-content');
        if ($content.height()) {
            $content.data('oldheight', $content.height());
            $content.animate({height: 0});
            $('#' + widgetId).find('.widget-minimize').attr('src', 'http://dl.dropbox.com/u/638285/SO/images/icon-maximize.png').attr('alt', 'maximize');
        }
        else {
            $content.animate({height: $content.data('oldheight')});
            $('#' + widgetId).find('.widget-minimize').attr('src', 'http://dl.dropbox.com/u/638285/SO/images/icon-minimize.png').attr('alt', 'minimize');
        }
    }

    function closeWidget(widgetId) {
         $('#' + widgetId).animate({ "opacity": 0, "height": 0 }, 200, "swing");
    } 
```

[点击这里查看 jsFiddle](http://jsfiddle.net/UcgSW/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:42:28.213

如果您的内容当前正在播放动画，只需从您的 toggleMinimize 函数返回，如下所示：

```
function toggleMinimize(widgetId) {
   var $content = $('#' + widgetId + ' .widget-content');
   if ($content.is(':animated')) {
       return;
   } 
```

见[**工作小提琴**](http://jsfiddle.net/UcgSW/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:42:09.180

看看 jQuery 的`.stop()`方法和它的`:animated`选择器。我经常在这种情况下使用它们来帮助我处理已经运行的动画。

例如：

```
$("#element").on("click", function() {
    if ($(this).not(":animated")) {
        ...animation code...
    }
}); 
```

和

```
$("#element").on("click", function() {
    $(this).stop();
    ...animation code...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T13:42:21.563

在我的情况下，小提琴工作正常，但我建议你`max-height`在高度的情况下使用，所以使用`max-height: 0`and `max-height: 80`（假设 80 比最大高度多一点）。您也可以传递元素而不仅仅是 ID。

```
$(document).ready(function () {
    $('.widget-minimize').click(function () {
        toggleMinimize($(this).parents('.widget'));
    });

    $('.widget-close').click(function () {
        closeWidget($(this).parents('.widget'));
    });
});

function toggleMinimize(selector) {
    var $content = $('.widget-content', selector);
    if ($content.height()) {
        $content.data('oldheight', $content.height());
        $content.animate({maxHeight: 0});
        $('.widget-minimize', selector).attr('src', 'http://dl.dropbox.com/u/638285/SO/images/icon-maximize.png').attr('alt', 'maximize');
    }
    else {
        $content.animate({maxHeight: $content.data('oldheight')});
        $('.widget-minimize', selector).attr('src', 'http://dl.dropbox.com/u/638285/SO/images/icon-minimize.png').attr('alt', 'minimize');
    }
}

function closeWidget(widgetId) {
     $('#' + widgetId).animate({ "opacity": 0, "max-height": 0 }, 200, "swing");
} 
```

# python - 通过单击按钮在 tkinter 窗口中显示图像

> ID：15999661
> 
> 赞同：2
> 
> 时间：2013-04-14T13:33:53.897
> 
> 标签：python, image, canvas, window, tkinter

我需要关于这个程序的帮助，这个程序应该通过单击按钮在新的 tkinter 窗口中打开图像，但它不仅仅是打开没有图像的新窗口。哪里有问题？

使用：python 3.3 和 tkinter

这是程序：

```
import sys
from tkinter import *

def button1():
    novi = Toplevel()
    canvas = Canvas(novi, width = 300, height = 200)
    canvas.pack(expand = YES, fill = BOTH)
    gif1 = PhotoImage(file = 'image.gif')
    canvas.create_image(50, 10, visual = gif1, anchor = NW)

mGui = Tk()
button1 = Button(mGui,text ='Sklop',command = button1, height=5, width=20).pack()

mGui.mainloop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T13:42:58.380

`create_image`需要一个`image`参数，而不是`visual`使用图像，所以`visual = gif1`你需要. 而不是`image = gif1`. 下一个问题是您需要将`gif1`引用存储在某处，否则它将被垃圾收集并且 tkinter 将无法再使用它。

所以是这样的：

```
import sys
from tkinter import * #or Tkinter if you're on Python2.7

def button1():
    novi = Toplevel()
    canvas = Canvas(novi, width = 300, height = 200)
    canvas.pack(expand = YES, fill = BOTH)
    gif1 = PhotoImage(file = 'image.gif')
                                #image not visual
    canvas.create_image(50, 10, image = gif1, anchor = NW)
    #assigned the gif1 to the canvas object
    canvas.gif1 = gif1

mGui = Tk()
button1 = Button(mGui,text ='Sklop',command = button1, height=5, width=20).pack()

mGui.mainloop() 
```

将您`Button`的名称命名为与函数相同的名称也可能不是一个好主意`button1`，这只会在以后引起混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-09T09:13:59.127

```
from tkinter import *
root = Tk()
root.title("Creater window")

def Img():
    r = Toplevel()
    r.title("My image")

    canvas = Canvas(r, height=600, width=600)
    canvas.pack()
    my_image = PhotoImage(file='C:\\Python34\\Lib\idlelib\\Icons\\Baba.gif', master= root)
    canvas.create_image(0, 0, anchor=NW, image=my_image)
    r.mainloop()

btn = Button(root, text = "Click Here to see creator Image", command = Img)
btn.grid(row = 0, column = 0)

root.mainloop() 
```

# java - 文件读取异常

> ID：15999662
> 
> 赞同：-4
> 
> 时间：2013-04-14T13:34:02.553
> 
> 标签：java, exception, netbeans, file-handling

我在这段代码中有一个异常，我无法找出问题所在。此代码在没有 while 循环的情况下运行，但在使用 WHILE 循环时会给出异常

```
 ProbabilityQueryTutorial.main(ProbabilityQueryTutorial.java:47) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:28:42.817

好吧，`NullPointerException` 在这一行中被抛出：

```
at ProbabilityQueryTutorial.main(ProbabilityQueryTutorial.java:47) 
```

我不确定它到底是哪一行（也许你可以指出来？）。但我注意到其他一些可能会影响你的事情：

**变量名**

你的变量名是大写字母。通常不鼓励这样做，因为只有`class`名称应该有大写字母。例子：

```
String File="C:\\testing.txt";
BufferedReader br = new BufferedReader(new FileReader(File)); 
```

`File`是*文件*对象的 Java 类，但您将其用作字符串。

**读取线（）**

```
sCurrentLine = br.readLine();
while ((sCurrentLine = br.readLine()) !=null) 
```

在 while 条件下，您已经将 的返回值分配给`br.readLine()`变量`sCurrentLine`。但是在进入 while 循环*之前*你也可以这样做。意思是，如果你*想*跳过文件的第一行，没关系。但是如果你需要第一行，你应该在 while 循环之前删除分配，并保持 while 原样。

**空实例化**

当您不需要`while`循环外的变量（例如变量`String sCurrentLine`）时，您无需在 while 循环*之前*`null`声明它并用. 只需将其移动到 while 内，并在第一次需要时声明它。（这样你就可以避免`null`变量出现）。

现在，如果您仍然遇到错误，也许我们可以进一步缩小搜索范围。只需告诉我们在哪一行抛出异常。

# authorization - 在 Firefox OAuth 窗口中打开新选项卡而不是弹出窗口..？

> ID：15999663
> 
> 赞同：1
> 
> 时间：2013-04-14T13:34:02.933
> 
> 标签：authorization, google-drive-api

我以通常的方式通过 JavaScript API 获得授权（我认为）：

```
gapi.auth.authorize({
    client_id: client_id, 
    scope: scope,
    immediate: false
}, callback); 
```

它按预期打开授权界面，但是在 Chrome 中它显示在弹出窗口中时，Firefox 在新选项卡中打开它（至少在 Mac 上）。这显然是不希望的和意外的行为。有没有已知的解决方法？我们希望在弹出窗口中有它。

我记得我在不同的应用程序中对 Firefox 弹出窗口有同样的问题，我能够通过传递`dialog=1`给`window.open`作为附加参数来克服它。我检查了`gapi`来源，它显然缺少这个参数。是故意的吗？我在 API 中看不到任何方式我们可以在那里注入额外的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:34:57.277

通常，在 Firefox 上，对话框会在弹出窗口中打开，类似于您在其他浏览器上遇到的行为。对于移动浏览器，回退在另一个窗口中打开，因为它更适合用户。我不建议您强制传递参数。

# xslt - 在 umbraco 网站中使用 poll 包

> ID：15999669
> 
> 赞同：0
> 
> 时间：2013-04-14T13:34:53.150
> 
> 标签：xslt, umbraco

我正在使用[umbraco CMS](http://umbraco.com/)，我想在我的网站上添加或进行投票..

在搜索包后，我找到了这个[用于 UMBRACO 4 的 POLL PACKAGE](http://www.nibble.be/?p=69) [，](http://our.umbraco.org/projects/website-utilities/poll)您可以从 umbraco 网站获得它。这里的问题是，要使用它，我应该自己（开发人员）插入宏并给它投票 id（由客户端创建）。

我想通过使用 XSLT 来动态地做到这一点，但宏是 .net UserControl。

如果有人以前使用过它，请给我一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:05:19.330

这是一个选项：

您可以在加载宏的模板中创建另一种文档类型。您可以根据在使用[高级宏参数语法](http://our.umbraco.org/wiki/reference/templates/umbracomacro-element/macro-parameters/advanced-macro-parameter-syntax)创建的文档类型的节点上选择的属性来填充宏参数。

例如，您在文档类型上有一个内容选择器，并使用所选节点的 id 填充宏。在母版页中，您将执行以下操作：

```
<umbraco:Macro Alias="Poll" runat="server" PollNodeId="[#nodeId]" /> 
```

# c# - 方法启动时停止 DispatcherTimer

> ID：15999674
> 
> 赞同：2
> 
> 时间：2013-04-14T13:35:21.837
> 
> 标签：c#, datetime, timer, datetimepicker, dispatcher

我还在学习 C#，我需要一些帮助。如果 datetime 已初始化，我有一个 dispatchtimer 每秒检查一次。它可以工作，但问题是它会继续做同样的事情，直到日期时间结束。例如，我希望 datetime 启动记事本。问题是 dispatchtimer 每 1 秒查找一次日期时间，这意味着记事本会第二次启动每个人。当 DateTime 启动它的方法时，如何停止 DispatchTimer？

这是代码：

```
 private void Start_Click(object sender, RoutedEventArgs e) //Button start.
    {
        test();
    }
    private void startjob() //DateTime checking for DateValue and start's if correct value.
    {
        DateTime? start = DateTimePicker1.Value;
        DateTime? end = DateTimePicker2.Value;
        DateTime now = DateTime.Now;

        if (start == null || end == null)
        {
            Xceed.Wpf.Toolkit.MessageBox.Show("one of the pickers is empty");
        }
        else if (now >= start.Value && now <= end.Value)
        {
            Process notePad = new Process();

            notePad.StartInfo.FileName = "notepad.exe";

            notePad.Start();

        }
    }
    private void test() // DispatchTimer
    {
        DispatcherTimer dispatcherTimer = new DispatcherTimer();
        dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
        dispatcherTimer.Interval = new TimeSpan(0, 0, 0, 1);
        dispatcherTimer.Start();
    }

        private void dispatcherTimer_Tick(object sender, EventArgs e)
{           
    try
    {
        startjob();
    }
    catch (Exception)
    {

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:53:10.803

您可以让委托的事件处理程序停止计时器。

首先快速调整以`startJob`通知它是否启动记事本（我假设如果没有，您想继续尝试）：

```
private bool startjob() //DateTime checking for DateValue and start's if correct value.
{
    DateTime? start = DateTimePicker1.Value;
    DateTime? end = DateTimePicker2.Value;
    DateTime now = DateTime.Now;

    if (start == null || end == null)
    {
        Xceed.Wpf.Toolkit.MessageBox.Show("one of the pickers is empty");
    }
    else if (now >= start.Value && now <= end.Value)
    {
        Process notePad = new Process();

        notePad.StartInfo.FileName = "notepad.exe";

        notePad.Start();
        return true;
    }
    return false;
} 
```

您没有发布您的`dispatcherTimer_Tick`方法，但您应该能够将其合并为`sender`事件处理程序中的计时器本身：

```
private void dispatcherTimer_Tick(object sender, EventArgs e)
{
    if (startJob())
    {
        //if notepad was started, stop the timer
        DispatcherTimer timer = (DispatcherTimer)sender;
        timer.Stop();
    }
} 
```

编辑：如果您的意图是停止计时器，无论输入是否有效以启动记事本，那么您可以放弃`bool`结果/检查并`Stop()`在 Tick 事件中调用计时器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T13:54:01.783

事件中的`sender`参数是您正在处理的参数。`Tick``DispatcherTimer`

考虑以下：

```
var disp = new DispatcherTimer();
disp.Interval = new TimeSpan(0, 0, 0, 1);
disp.Tick += (object sender, EventArgs e) => {
  ((DispatcherTimer)sender).Stop();
}; 
```

这会在计时器第一次计时时停止。

# ruby-on-rails - FactoryGirl 通过调用另一个工厂的方法来定义属性

> ID：15999675
> 
> 赞同：11
> 
> 时间：2013-04-14T13:35:31.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, factory-bot

这是 FactoryGirl[文档](https://github.com/thoughtbot/factory_girl/wiki/Usage)中的一个示例：

```
FactoryGirl.define do
  factory :post do
    name "Post name"
    user
  end
end 
```

在此示例中，`user`正在调用另一个工厂。我想做的是有效地调用`user.id`，但将其设置为属性的定义。这是一个精简的示例：

```
**models/job.rb**
  ...
  belongs_to :assignee, :class_name => "User"
  belongs_to :user
  ...
  attr_accessible :assignee_id, :user_id
  ...
end

**factories/jobs.rb**
FactoryGirl.define do
  factory :job do
    assignee_id user.id      #what I would like to do, but triggers "undefined method 'id'" error
    user_id user.id          #user_id is an attribute of the model and is the job assignor
 end 
```

我试图合并讨论别名的文档部分，但没有运气：

```
FactoryGirl.define do
  factory :user, :aliases => [:assignee] do
  .... 
```

我觉得（希望？）我在这里很近，但任何见解都值得赞赏。谢谢。

编辑：这段代码让我的规范运行！

```
**factories/jobs.rb**

FactoryGirl.define do
  factory :job do
    before(:create) do |job|
      user = FactoryGirl.create(:user)
      job.assignee = user
      job.user  = user
    end

  association :assignee, factory: :user
  association :user, factory: :user
  sequence(:user_id) { |n| n }
  sequence(:assignee_id) { |n| n }
  ...
end 
```

它通过了我的`it { should be_valid }`规范，所以看起来工厂很好，尽管我认为我在调用时对规范本身进行了一些重构`FactoryGirl.create`。

上面的代码结合了 mguymon 的建议。谢谢！

最后更新

在回去重新阅读了[Hartl 关于模型关联的讨论之后](http://ruby.railstutorial.org/chapters/user-microposts#sec-user_micropost_associations)，我能够把这件事搁置一旁。我上面的内容在技术上是有效的，但是当我在我的规范中构建或创建工作时，实际上并没有正确传递属性。这是我应该拥有的：

```
FactoryGirl.define do
  factory :job do
    association :assignee, factory: :user
    user
  end
end 
```

我的问题还源于我如何在规范中创建工厂，所以我应该这样做（但不是......叹气）：

```
 let(:user) { create(:user) }
    before { @job = create(:job, user: @user) } 
```

似乎我不需要`association :user`在我的工厂中明确地拥有，也不需要`before`上面的块。

顺便说一句，我还了解到我可以通过包含`puts @job`在`expect`语句中进行调试，或者调用`@job.assignee_id`以确保属性被正确加载。当该特定规范运行时，该`puts`语句将由规范输出`F`或`.`从规范输出。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-14T13:42:35.010

对于最新版本的 FactoryGirl，用于`association`映射到其他 ActiveRecord 模型：

```
factory :job do
  # ...
  association :assignee, factory: :user
end 
```

这直接来自[文档](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)。

* * *

从您发布的错误中，它表明您正在尝试获取`user.id`但`user`不是 ActiveRecord 实例，而是来自 FactoryGirl 的代理。如果您使用该`association`方法，您将不会收到此错误。如果您需要直接访问模型，则必须先手动构建它。您可以通过在工厂中传递一个*块来做到这一点：*

```
factory :job do
    assignee_id { FactoryGirl.create(:user).id }
end 
```

看起来您正在尝试将同一模型关联两次，为此您可以使用`before_create`回调来创建 User 模型并分配给`user`and `assignee`：

```
factory :job do

  before(:create) do |job|
      user = FactoryGirl.create(:user)
      job.assignee = user
      job.user = user
  end
end 
```

# php - 根据php中的规则调整图像大小

> ID：15999676
> 
> 赞同：-1
> 
> 时间：2013-04-14T13:35:41.183
> 
> 标签：php, image, image-processing

我知道如何根据这些公式调整图像的大小以保持其比例：

宽度公式：

原始 H / 原始 W * 新 W = 新 H

身高公式：

原始 W / 原始 H * 新 H = 新 W

但是我在调​​整图像大小之前设置了最大宽度，也设置了最大高度值。那么我如何使用两个最大值来处理它？

假设最大高度为 600，最大高度为 100 ??

答案可能是盯着我的脸..

这就是我刚才使用的高度。

```
 $image_size = new Image(DIR_IMAGE.'data/signatures/'.$file);
            $w_size = $image_size->info['width'];
            $h_size = $image_size->info['height'];
            $w_new_size = round($w_size/$h_size*100);
            $h_new_size = 100; 
```

我想我想说的是我不希望图像超过设定的宽度或设定的高度，但它必须保持它的比例。

有人给我看灯？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:41:45.100

让 php.net 向您展示：

[http://www.php.net/manual/en/function.imagecopyresampled.php](http://www.php.net/manual/en/function.imagecopyresampled.php)

示例 #2 正在按照您的要求做，不是吗？

# excel - VBA：多维数组中的字符串索引

> ID：15999677
> 
> 赞同：0
> 
> 时间：2013-04-14T13:35:58.047
> 
> 标签：excel, vba

根据我的阅读，在数组中使用字符串索引似乎是不可能的。但是，该主题似乎总结了我正在尝试做的事情。

我有一张在 Excel 中显示学生和课程信息的表格，我需要从该表格中创建类似

x(StudentID, CourseID)（如果学生正在上课，则为 1，否则为 0）

我已经在谷歌上搜索了两天了，但我迷路了。我遇到过收藏和字典，但我不知道哪个更合适，或者它们是否合适。你会推荐什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T11:59:11.560

我同意其他评论，但相信字典中只有一个唯一键，因此建议您通过使用学生和课程来制作一个。

```
Dim s
Set s = CreateObject("Scripting.Dictionary")
s.Add "student a-course a", "1"
s.Add "student b-course b", "1"
s.Add "student c-course c", "1"

If s.Exists("student c-course c") Then
    MsgBox s("student c-course c") 'displays 1
End If

If s.Exists("student c-course a") Then
    a.add "student c-course a", "1"
End If 
```

两点；1 的值是没有意义的，因为该`s.exists(...)`方法存在，并且在使用字典时，您可以创建一个循环来添加所有学生和课程信息。

# winapi - 所有者绘制选项卡控件 - 不再有 HOTTRACK

> ID：15999683
> 
> 赞同：2
> 
> 时间：2013-04-14T13:36:52.973
> 
> 标签：winapi, tabs, ownerdrawn

选项卡控件是使用 TCS_HOTTRACK 属性创建的，因此当鼠标悬停在未选中的选项卡项目上时，该项目将突出显示（在 Windows 7 中为蓝色）。

现在，我正在尝试进行所有者绘制选项卡控件。但是当鼠标悬停在未选中的选项卡项上时，该选项卡控件的父控件不会收到 WM_DRAWITEM 消息。所以如果我想为标签控制做所有者绘制，我就失去了热轨的功能。

是否有任何（好的）方法可以为具有热跟踪功能的选项卡控件进行所有者绘制？

# winapi - 透明文本框

> ID：15999684
> 
> 赞同：-1
> 
> 时间：2013-04-14T13:36:55.020
> 
> 标签：winapi, textbox, transparency

我想用一个透明的只读文本框来代替标签；允许用户选择+复制文本。正是 Windows 资源管理器在文件属性窗口中使用的内容：

![在此处输入图像描述](https://i.stack.imgur.com/mOi6T.png)

我发现了类似[的问题：使文本框透明](https://stackoverflow.com/q/1716427/850848)

那里的评论表明建议的解决方案不适用于 ClearType。但是我对建议的“AlphaBlendTextBox - .NET 的透明/半透明文本框”组件的测试显示不同。

无论如何，对于这样一个“简单的任务”，代码看起来相当复杂。他们确实将父控件图像保存到位图，并一遍又一遍地绘制该位图，并在其上放置文本。我希望必须有一个解决方案，将背景的绘制委托给父控件。

可能他们的解决方案是如此复杂，因为它也允许 alpha 混合。我不需要这样。我只想看到文本背后的父背景。有没有更简单/更智能的方法？

请注意，我对任何 winapi 解决方案（纯 winapi、MFC、WinForms、Delphi 等）都很满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:44:10.987

根据 Spy++，它是一个典型的编辑控件，具有`WS_EX_LEFT | WS_EX_LTRREADING | WS_EX_RIGHTSCROLLBAR | WS_EX_NOPARENTNOTIFY`扩展样式和`WS_CHILDWINDOW | WS_VISIBLE | ES_LEFT | ES_AUTOHSCROLL | ES_READONLY`原始窗口样式。

我已经在 Win32 中对其进行了测试，我可以确认它可以满足您的要求。

此外，下次您想模仿其他控件的外观时，只需启动 Spy++ 即可获取有关它们的详细信息。

![在此处输入图像描述](https://i.stack.imgur.com/tSKKK.png)

# jquery-ui - 带有克隆到垃圾箱而不是移动到垃圾箱选项的 jQuery Droppable 照片管理器

> ID：15999685
> 
> 赞同：0
> 
> 时间：2013-04-14T13:37:10.333
> 
> 标签：jquery-ui, jquery-ui-draggable, jquery-ui-droppable

您能否指导我修改可放置照片管理器示例的正确路径？我想将图像从图库部分克隆到垃圾箱，而不是将图像从图库移动到垃圾箱。它现在正在做*剪切和粘贴*。我想要的是*复制和粘贴*。我正在使用 jQueryUI 1.10.2

[http://jqueryui.com/droppable/#photo-manager](http://jqueryui.com/droppable/#photo-manager)

jQuery UI（购物车）几乎具有此功能，但没有 DELETE 和 RECYCLE 选项。

[http://jqueryui.com/droppable/#shopping-cart](http://jqueryui.com/droppable/#shopping-cart)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:46:21.353

更改`deleteImage`代码以不移动可放置元素，而是克隆它并将其移动到“垃圾箱”，尽管我猜你需要将它称为其他东西`deleteImage`

```
function deleteImage( $item ) {
    var $list = $( "ul", $trash ).length ?
      $( "ul", $trash ) :
      $( "<ul class='gallery ui-helper-reset'/>" ).appendTo( $trash ),
      $clone = $item.clone();

    $clone.find( "a.ui-icon-trash" ).remove();
    $clone.append( recycle_icon ).hide().appendTo( $list ).fadeIn(function() {
      $clone
        .animate({ width: "48px" })
        .find( "img" )
          .animate({ height: "36px" });
    });
} 
```

# android - 动态创建的 BroadcastReceiver 生命周期

> ID：15999688
> 
> 赞同：1
> 
> 时间：2013-04-14T13:37:41.657
> 
> 标签：android, sms, broadcastreceiver

BroadcastReceiver的生命周期和操作我不清楚，我已经看过android帮助库，但仍然不清楚，考虑下面的例子：

```
private void sendSMS(final MessageInfo MI) {

    String SENT = "SMS_SENT" ;

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(
            SENT), 0);

    // ---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver() {
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode()) {
            case Activity.RESULT_OK:
                Confirm(MI);
                break;
            case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                Toast.makeText(getBaseContext(), "שליחה נכשלה",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_NO_SERVICE:
                Toast.makeText(getBaseContext(), "שליחה נכשלה, אין רשת",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_NULL_PDU:
                Toast.makeText(getBaseContext(), "Null PDU",
                        Toast.LENGTH_SHORT).show();
                break;
            case SmsManager.RESULT_ERROR_RADIO_OFF:
                Toast.makeText(getBaseContext(), "שליחה נכשלה, מצב טיסה",
                        Toast.LENGTH_SHORT).show();
                break;
            }
        }
    }, new IntentFilter(SENT));

    SmsManager sms = SmsManager.getDefault();
    ArrayList<String> parts = sms.divideMessage(MI.Message());
    int numParts = parts.size();
    ArrayList<PendingIntent> sentIntents = new ArrayList<PendingIntent>();
    for (int i = 0; i < numParts; i++) {
        sentIntents.add(sentPI);
    }
    sms.sendMultipartTextMessage(MI.Phone(), null, parts, sentIntents, null);

}
} 
```

如果我发送大量消息怎么办，它会为每条消息创建一个 BroadcastReceiver 吗？当发送的确认返回时，是异步返回还是同步返回？BroadcastReceiver 会自动注销，还是需要手动完成？

我会很感激任何帮助，我希望我很清楚。

顺便说一句，Confirm 函数向服务器发送确认（异步），MI 类是 MessageInfo(phone,body,ID)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:03:54.040

> 如果我发送大量消息怎么办，它会为每条消息创建一个 BroadcastReceiver 吗？

是的。这不是一个好主意。请注册**一次**。

> 当发送的确认返回时，是异步返回还是同步返回？

异步。

> BroadcastReceiver 会自动注销吗

不。

> 是否需要手动完成？

是的，通过`unregisterReceiver()`.

# scala - 如何在 2.10.1 的 Android 上获取 Option[T] 字段类型？

> ID：15999689
> 
> 赞同：3
> 
> 时间：2013-04-14T13:37:42.197
> 
> 标签：scala, reflection, scala-2.10

像这样的代码：

```
import scala.reflect.runtime.{universe => ru, currentMirror => cm}
import ru._

def test[T:TypeTag](obj: T) {
  for (c <- typeOf[T].declarations; if c.annotations.exists(_.tpe =:= ru.typeOf[Message])) {
    val tpe = c.asClass.selfType
    for (m <- tpe.declarations.sorted) {
      println("Member type: " + m.typeSignature)
    }
  }
}

object Test extends App {
  test(TestMessageDef)
}

object TestMessageDef {
  @Message
  case class A(d: Option[Long])
} 
```

消息定义：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface Message {
} 
```

在 PC 上我可以得到正确的输出：

```
Member type: Option[Long] 
```

但在 Android 上，我得到的输出是：

```
Member type: Option[java.lang.Object] 
```

我的问题是：

1.  为什么相同的代码在 PC 和 Android 上输出不同的结果？
2.  如何获得像 PC 这样的正确类型？

更新：

只有Option[T]、T is Int、Long、Byte等原始类型有这个问题。如果我使用 Option[java.lang.Long] 它会按预期输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:10:05.727

Android 并非 100% 兼容 Java。您看到的是 Java 反射 API 差异或 Scala 反射 API 所需的注释在转换为 DalvikVM 时丢失的结果。

# c++ - 为什么这个函子的析构函数被调用了两次？

> ID：15999691
> 
> 赞同：2
> 
> 时间：2013-04-14T13:38:07.570
> 
> 标签：c++, stl, foreach

当我运行以下程序时，析构函数被调用了两次，我试图理解为什么？

```
#include <iostream>
#include <vector>
#include <algorithm>

class sample
{
    public:
        sample() { std::cout << "Constructor " << std::endl; }

        ~sample() { std::cout << "Destructor" << std::endl; }

        void operator()(int i)
        {
            std::cout << i << " , "  << std::endl;
        }
};

int main()
{

    std::vector<int> iNumbers;

    for ( int i = 0 ; i < 5 ; ++i)
        iNumbers.push_back(i);

    std::for_each(iNumbers.begin() , iNumbers.end() , sample() );
} 
```

**输出如下**

```
Constructor
0 ,
1 ,
2 ,
3 ,
4 ,
Destructor
Destructor 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T13:41:10.897

经典的三违规则。尝试这个：

```
#include <iostream>
#include <vector>
#include <algorithm>

class sample
{
    public:
        sample() { std::cout << "Constructor " << std::endl; }

        sample(const sample&) { std::cout << "Constructor (copy)" << std::endl; }

        ~sample() { std::cout << "Destructor" << std::endl; }

        sample& operator=(const sample&) { return *this; }

        void operator()(int i)
        {
                std::cout << i << " , "  << std::endl;
        }
};

int main()
{
    std::vector<int> iNumbers;

    for ( int i = 0 ; i < 5 ; ++i)
            iNumbers.push_back(i);

    std::for_each(iNumbers.begin() , iNumbers.end() , sample() );
} 
```

输出是：

> 构造函数
> 0 ,
> 1 ,
> 2 ,
> 3 ,
> 4 ,
> 构造函数（副本）
> 析
> 构函数 析构函数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T13:39:43.927

原因是它*通过 value*`std::for_each`获取其参数，这会导致您提供的参数的**副本被制作。**

 ***因此，您通过做创建的临时对象的销毁`sample()`将负责这两个销毁消息之一（最后一个，因为临时对象在评估创建它的完整表达式后被销毁）。

另一方面，第一个销毁消息来自`std::for_each`正在处理的副本的销毁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T13:39:51.050

`std::for_each`将按值获取函数对象，导致它被复制。因此，为创建的临时对象调用一个析构函数，`sample()`为副本调用另一个析构函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T13:40:17.797

如果您编写了一个复制构造函数，您会看到仿函数被复制到算法中。然后两个副本都被销毁。函子有可能被返回，并且会有 3 个副本，因此其中一个副本被省略。***

# c++ - Cocos2dx：一旦运动物体离开屏幕就删除它们

> ID：15999693
> 
> 赞同：0
> 
> 时间：2013-04-14T13:38:29.263
> 
> 标签：c++, cocos2d-iphone, box2d, cocos2d-x

我正在尝试构建一个平台游戏。在我的游戏中，随机平台出现并从屏幕右侧移动到左侧。

```
Using :
b2Vec2 impulse = b2Vec2(-5, 0);
platformBody->SetLinearVelocity(impulse); 
```

但是当我看到我的统计数据时，call / countRef（统计数据的第一行）的数量总是随着新平台从右向左移动而增加。我想知道如何在现有平台移动通过左屏幕（屏幕外）后删除它们。我所有的平台都是 b2_kinematic 体（Box2D）。

**编辑答案：**

我设法通过以下方式解决了它：

> for(std::vector::size_type i = 0; i != m_platforms.size(); i++)
> 
> {
> 
> ```
>  if (m_platforms[i]->GetPosition().x < 0.0f && m_platforms[i]->GetType() == b2_kinematicBody) 
> 
>     {
> 
>       CCSprite *sprite = (CCSprite *) m_platforms[i]->GetUserData();
> 
>       sprite->removeFromParentAndCleanup(true);
> 
>       world->DestroyBody(m_platforms[i]);
> 
>     }
> } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:14:12.017

你可以在主循环中检查你的身体是否在屏幕之外，如果是，则销毁它们。就像是。-

```
if (platformBody->GetPosition().x < SCREEN_X_LIMIT) {
    world->DestroyBody(platformBody);
    // Also, remove attached sprite if exists
} 
```

# jquery - jquery - 如何让列表元素可排序并且也可拖动到另一个列表

> ID：15999696
> 
> 赞同：3
> 
> 时间：2013-04-14T13:38:32.550
> 
> 标签：jquery, html-lists, draggable, jquery-ui-sortable

我有两个列表 - A 和 B

我希望列表 B 在其内部是可排序的。 **这行得通。**
我希望列表 A 具有可以拖到列表 B 的 LI 元素。 **这很有效。**
我希望列表 A 本身也可以排序。 **这行不通。**

它不起作用，因为它`.draggable`在列表 A 上。如果我删除它，它是可排序的 - 但不能拖动到列表 B。

如何让列表 A`LI`元素既可在其自己的列表中排序，又可拖动到另一个（可排序）列表？

在我的情况下，列表 A 是 ID#list_to_process，列表 B 是 #categories。我认为这个问题本身虽然相当笼统，但其他人可能会面临。

jsfiddle：http: [//jsfiddle.net/RNHxY/](http://jsfiddle.net/RNHxY/)

```
<html>
  <head>
    <style>
    #categorizer { padding: 2px; }
    #list_to_process, #categories  { color: blue; background-color: green; border: solid; border-width: 4px }
    ul { padding: 10px; margin: 50px; float:left; list-style:none; }
    li { color: yellow; padding: 25px 80px; cursor: move; }
    li:nth-child(even) { background-color: #000 }
    li:nth-child(odd) { background-color: #666 }
  </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
    <script type="text/javascript">
      $(document).ready( function() {
        $("#categories").sortable({
          revert: true,
          receive: function(evt, ui) {
            ui.item.remove();  # Remove the item in the 'from' list.
            # Next 3 lines just there to remove empty UL when no LI's left.
            if ( $('#list_to_process li').length == 0) {
              $('#list_to_process').remove();
            }
          }
        });
        $("#list_to_process").sortable({
          revert: true  # This isn't working.
        });
        # Below is over-writing the sortable capability of #list_to_process
        $("li.to_process").draggable( {
          connectToSortable: "#categories",
          helper: "clone",
          revert: "invalid"
        });
      });
    </script>

  </head>
  <body>
    <div id="categorizer">
      <ul id="list_to_process">
        <li class="to_process" id="left1">1</li>
        <li class="to_process" id="left2">2</li>
        <li class="to_process" id="left3">3</li>
        <li class="to_process" id="left4">4</li>
        <li class="to_process" id="left5">5</li>
      </ul>
      <ul id="categories">
        <li id="righta">a</li>
        <li id="rightb">b</li>
        <li id="rightc">c</li>
        <li id="rightd">d</li>
        <li id="righte">e</li>
      </ul>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:12:03.483

您可以使用以下`connectWith`选项来解决问题：

> 此列表中的项目应连接到的其他可排序元素的选择器。这是一种单向关系，如果您希望项目在两个方向上连接，则必须在两个可排序元素上设置 connectWith 选项。

这使您可以链接两个列表并在第一个列表本身、第一个列表和第二个列表之间对元素进行排序。对于第二个列表，该功能就足够了`sortable`。

参考：[http ://api.jqueryui.com/sortable/#option-connectWith](http://api.jqueryui.com/sortable/#option-connectWith)

相关脚本如下：

```
$("#list_to_process").sortable({
    connectWith: "#categories",
    revert: true
});

$("#categories").sortable({
    revert: true,
    receive: function (evt, ui) {
        if ($('#list_to_process li').length === 0) {
            $('#list_to_process').remove();
        }
    }
}); 
```

这是一个工作小提琴：http: [//jsfiddle.net/IrvinDominin/JTHsU/2/](http://jsfiddle.net/IrvinDominin/JTHsU/2/)

# ruby-on-rails - 调整远程图像的大小（载波）

> ID：15999699
> 
> 赞同：0
> 
> 时间：2013-04-14T13:39:22.887
> 
> 标签：ruby-on-rails, facebook-graph-api, omniauth, carrierwave

我在我的应用程序中使用`carrierwave`和`omniauth`（和`omniauth-facebook`）宝石。我认为描述我如何使用这些宝石是没有意义的。我从中获取图像`request.env["omniauth.auth]`并将其保存到`@user.remote_avatar_url`. 在保存到数据库之前如何调整此图像的大小？或者远程图像仅使用源（facebook）的原始大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:00:01.343

我找到了答案。

我需要它`AvatarUploader`用于`user`模型的所有东西。字段`@user.avatar`已填充，图像自动调整大小。然后我可以使用`@user.avatar_url(:thumb)`<--（例如）。

# css - wordpress插件中的输入字段样式更改

> ID：15999700
> 
> 赞同：0
> 
> 时间：2013-04-14T13:39:27.467
> 
> 标签：css, wordpress

我可以更改输入字段的样式吗

```
 <div id="datafeedr-2" class="widget store_widget">
 <h3 class="widget-title">
  Search Store
  </h3>
  <div id="wdgt_ss">
 <script type="text/javascript">
 <!--
   /*
  * NOTE: This JS code would be much better off
 * existing in your theme's header.php file.
*/
 function wash( anInput ) { if(anInput.value == anInput.defaultValue) anInput.value =    ''; }
function checkWash( anInput ) { if(anInput.value == '') anInput.value =anInput.defaultValue; }
 //-->
 </script>
 <div class="store_search_form" style="border: none;">
  <form action="/search/" method="get"><input onfocus="wash(this);"onblur="checkWash(this);" value="Search store..." name="word" pmbx_context="4F13FC2D-6A04-435C-AA7C-7AA2FEF6FC7E">
<input type="submit" value="Go" pmbx_context="E41A706C-6E36-4DE6-B2C3-3DF4B01B1D30">
</form>
</div>     
     </div><!-- @@CACHE -->
  </div> 
```

我尝试使用类 id 和输入字段（如 Css）来应用样式

```
 input.store_search_form
  {  

     code

  } 
```

但它没有用

我需要这个搜索栏样式与它上面的默认搜索栏完全一样

[网站网址](http://www.fashion-drop.com/search/?word=ring)

产品搜索栏是来自 www.datafeedr.com 的插件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:10:48.353

```
<input onfocus="wash(this);" onblur="checkWash(this);" value="Search store..." name="word" type="text"> 
```

然后只是一个类来设置宽度的样式。添加类型=“文本”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:03:14.327

尝试这个

```
input[type=search]
   /* your style */

input[type=submit]
  /* your style */

or add id for inputs 
```

演示：http: [//jsfiddle.net/vwyhm/](http://jsfiddle.net/vwyhm/)

# java - 使用 TreeMap 和泛型的空指针异常

> ID：15999702
> 
> 赞同：-1
> 
> 时间：2013-04-14T13:39:31.050
> 
> 标签：java, generics, nullpointerexception, linked-list, treemap

我正在尝试将 String 类型的键和 LinkedList 类型的值（它本身是 Sprite 类型）插入到 TreeMap 中。但是，当我的代码调用 put() 方法时，它会抛出一个空指针异常，我不知道为什么。

[我的整个班级都可以在这里找到。但为简洁起见，我已将其范围缩小到以下问题部分。](http://pastebin.com/0M7ZJy6e)

这是我的 Treemap 声明（我使用的是 Java 7，所以它喜欢菱形。

```
TreeMap<String, LinkedList<Sprite>> paneSprites = new TreeMap<>(); 
```

这是我的方法的一部分（其余部分与其他精灵做同样的事情，在这里注释掉 put() 方法只是稍后在另一个 put() 方法处引发另一个异常。

```
public void initGUIControls()
{
    canvas = new RambleOnPanel(this, (RambleOnDataModel)data);
    LinkedList<Sprite> spriteList = new LinkedList<>();

    //Sprite for Welcome Pane
    SpriteType st = new SpriteType(settings.WELCOME_BACKGROUND_TYPE);
    BufferedImage img = loadImage(settings.WELCOME_IMAGE_PATH);
    st.addState(settings.DEFAULT_STATE, img);
    st.addState(settings.INVISIBLE_STATE, img);
    int x = 0;
    int y = 0;
    int vX = 0;
    int vY = 0;
    Sprite s = new Sprite(st,x,y,vX,vY, settings.DEFAULT_STATE);
    spriteList.add(s);
    guiButtons.put(st.getSpriteTypeID(), s);

    //put sprite types for this pane in the hash map and clear the list
    getPaneSprites().put(settings.WELCOME_PANE_TYPE, spriteList);  //EXCEPTION THROWN HERE
    spriteList.clear();

    //Sprites for Select Account Pane 
```

此外，这里使用的所有字符串都在另一个类中实例化，如下所示

```
package ramble_on;

public class Settings
{
//Game Settings
public final String APP_TITLE = "Ramble On!";
public final int FRAME_RATE = 30;
public final int GAME_HEIGHT = 700;
public final int GAME_WIDTH = 1200;

//Sprite States
public final String INVISIBLE_STATE = "INVISIBLE STATE";
public final String  DEFAULT_STATE = "DEFAULT STATE";

//Pane Types
public final String WELCOME_PANE_TYPE = "WELCOME PANE TYPE";
public final String SELECT_ACCOUNT_PANE_TYPE = "SELECT ACCOUNT PANE TYPE";
public final String CURRENT_ACCOUNT_PANE_TYPE = "CUTTENT ACCOUNT PANE TYPE";

//Sprite Types
public final String WELCOME_BACKGROUND_TYPE = "WELCOME BACKGROUND TYPE";
public final String SELECT_ACCOUNT_BACKGROUND_TYPE = "SELECT ACCOUNT TYPE";
public final String NEW_USER_BUTTON_TYPE = "NEW USER BUTTON TYPE";
public final String CURRENT_ACCOUNT_BACKGROUND_TYPE = "CURRENT ACCOUNT BACKGROUND TYPE";
public final String LARGE_RETURN_BUTTON_TYPE = "LARGE RETURN BUTTON TYPE";

//Sprite Image paths
public   final String IMAGES_PATH = "./data/images/";

public final String WELCOME_IMAGE_PATH = IMAGES_PATH + "welcome.png";
public final String SELECT_ACCOUNT_BACKGROUND_IMAGE_PATH = IMAGES_PATH + "selectAccount.png";
public final String NEW_USER_BUTTON_PATH = IMAGES_PATH + "newUser.png";
public final String Current_Account_SCREEN_BACKGROUND_IMAGE_PATH = IMAGES_PATH + "currentAccount.png";
public final String LARGE_RETURN_BUTTON_IMAGE_PATH = IMAGES_PATH + "newUser.png";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:45:10.363

对于该行中的 nullpointerexception，您有两个选项

getPaneSprites().put(settings.WELCOME_PANE_TYPE, spriteList);

1.  getPaneSprited() 返回 null
2.  settings.WELCOME_PANE_TYPE 为空

要查看它是否为 1，您可以将 get 调用和 put 拆分为两条不同的行。然后调试 getter 是否返回 null。

树形图键可能不为空，因此也可能为空。它与泛型无关，因为一旦编译，泛型就会由于类型擦除而消失。

# ios - XCode 换行符 - 不要截断标签

> ID：15999703
> 
> 赞同：-3
> 
> 时间：2013-04-14T13:39:43.470
> 
> 标签：ios, objective-c, xcode

我在 Xcode 中有一个标签，当文本很长时，我不希望它被截断，但我希望剩余的文本进入新行。我为 3 行腾出空间，但同样，它只是截断。我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:43:23.820

```
yourLabel.lineBreakMode=UILineBreakModeWordWrap;
yourLabel.numberOfLines=0; 
```

注意：它在 ios6 中已弃用，然后使用：

```
NSLineBreakByWordWrapping 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:00:35.157

我还通过指定我想要出现的行数来实现效果

```
[self.label setLineBreakMode:NSLineBreakByWordWrapping];
[self.label setNumberOfLines:3];
[self.label sizeToFit]; 
```

# google-app-engine - Django 模板 - 将日期与今天进行比较

> ID：15999709
> 
> 赞同：1
> 
> 时间：2013-04-14T13:40:19.237
> 
> 标签：google-app-engine, date, django-templates

我正在尝试制作一个简单的 IF 函数来检查项目的日期是否等于今天。不幸的是，我无法让它工作。我基本上认为该声明是错误的并且不显示任何内容，即使它显示。我也没有收到任何错误。

我使用的代码如下：

```
{% if item.valid_until.date == now.date %}
  <div id="what_i_want_to_show">
    CONTENT
  </div>
{% endif %} 
```

valid_until 的内容是来自 Google App Engine 应用的 DateTimeProperty。通常在 Django 模板中使用它不会导致任何问题。到目前为止，类似问题的解决方案还没有奏效。我错过了一些明显的东西吗？

**更新 1：**

此语句在数据库查询结果的循环中运行。因此，据我所知，在视图中进行比较不起作用，因为我必须将变量与每个项目一起发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-05-18T16:51:35.377

这种情况有两种方法：

第一个：您可以在模型上添加@property

模型：

```
from datetime import date

@property
def is_past_due(self):
    return timezone.now() > self.valid_until # if valid until default is timezone.now else change it 
```

模板：

```
{% if item.is_past_due %}
    <!--In the past-->
{% else %}
    {{ item.valid_until.date|date:"Y-m-d" }}
{% endif %} 
```

第二：用模板上的格式声明今天的日期

```
{% now "Y-m-d" as todays_date %}
{% if todays_date  < item.valid_until.date|date:"Y-m-d" %}
  <div id="what_i_want_to_show">
    CONTENT
  </div>
{% endif %} 
```

# algorithm - 任何有界0-1多背包的伪多项式算法？

> ID：15999712
> 
> 赞同：12
> 
> 时间：2013-04-14T13:40:59.980
> 
> 标签：algorithm, optimization, constraint-programming, knapsack-problem

假设有 n 个项目，例如 i [1] , i [2] , .... i [n]，每个项目都有一个已知的有界权重 w [1] , w [2] , ... w [n]。还有一组 m 个背包，例如 k [1]、 k [2]和 k [m]。背包是同质的，即它们都具有相同的容量 W。函数 F 可以确定每个背包的分数。F 的输入是每个背包中的物品。所以，

```
Score of each knapsack i = F(Items in knapsack i) 
```

现在我想把一些物品放在背包里，这样：

1.  背包中物品的重量不超过其容量 W。
2.  所有背包的得分总和最大

这个问题是否有多项式时间解决方案？

注意：问题是0-1，即每个项目可以选择或不选择。所有问题参数都是有界的。

**编辑 1：**是否可以将此问题简化为装箱，然后得出结论，这是一个 NP 难题？

**编辑 2**在这个问题中，每个项目都有三个属性，例如属性 a [i]、 b [i]和 c [i]。F 函数是一个线性函数，它获取其中项目的属性并产生输出。

**编辑3：**[这篇论文](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.11.4473)似乎为多背包问题提出了一个精确的解决方案。可以在我的情况下使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:10:58.953

这个怎么样？

给定 Haskell 中针对 0-1 背包问题的标准动态解决方案，可在[此处](http://rosettacode.org/wiki/Knapsack_problem/0-1#Haskell)找到，

```
inv = [("map",9,150), ("compass",13,35), ("water",153,200), ("sandwich",50,160),
       ("glucose",15,60), ("tin",68,45), ("banana",27,60), ("apple",39,40),
       ("cheese",23,30), ("beer",52,10), ("cream",11,70), ("camera",32,30),
       ("tshirt",24,15), ("trousers",48,10), ("umbrella",73,40), 
       ("trousers",42,70), ("overclothes",43,75), ("notecase",22,80),
       ("sunglasses",7,20), ("towel",18,12), ("socks",4,50), ("book",30,10)]

knapsack = foldr addItem (repeat (0,[])) where
    addItem (name,w,v) list = left ++ zipWith max right newlist where
        newlist = map (\(val, names)->(val + v, name:names)) list
        (left,right) = splitAt w list

main = print $ (knapsack inv) !! 400 
```

我们添加了一个填充机制，将库存排列顺序放置在下一个有空间的背包中，

```
stuff (name,w,v) left (v2,[]) = (v2,left)
stuff (name,w,v) left (v2,(cap, lst):xs) =
  if w <= cap 
     then (v + v2, left ++ [(cap - w, (name,w,v):lst)] ++ xs) 
     else stuff (name,w,v) (left ++ [(cap,lst)]) (v2,xs) 
```

并将其替换为映射函数。把它们放在一起：

```
inv = [("map",9,150), ("compass",13,35), ("water",153,200), ("sandwich",50,160),
       ("glucose",15,60), ("tin",68,45), ("banana",27,60), ("apple",39,40),
       ("cheese",23,30), ("beer",52,10), ("cream",11,70), ("camera",32,30),
       ("tshirt",24,15), ("trousers",48,10), ("umbrella",73,40), 
       ("trousers",42,70), ("overclothes",43,75), ("notecase",22,80),
       ("sunglasses",7,20), ("towel",18,12), ("socks",4,50), ("book",30,10)]

capacity = 200::Int
numKnapsacks = 3

stuff (name,w,v) left (v2,[]) = (v2,left)
stuff (name,w,v) left (v2,(cap, lst):xs) =
  if w <= cap 
     then (v + v2, left ++ [(cap - w, (name,w,v):lst)] ++ xs) 
     else stuff (name,w,v) (left ++ [(cap,lst)]) (v2,xs)

knapsack = foldr addItem (repeat (0, replicate numKnapsacks (capacity,[]))) 
  where addItem (name,w,v) list = left ++ zipWith max right newlist 
          where newlist = map (stuff (name,w,v) []) list
                (left,right) = splitAt w list

main = print $ (knapsack inv) !! 600 
```

输出（每个背包的剩余重量容量和内容后的总值）：

```
*Main> main
(1062,[(1,[("map",9,150),("tshirt",24,15),("trousers",42,70),
           ("overclothes",43,75),("notecase",22,80),("sunglasses",7,20),
           ("towel",18,12),("socks",4,50),("book",30,10)]),
       (0,[("compass",13,35),("cheese",23,30),("cream",11,70),
           ("camera",32,30),("trousers",48,10),("umbrella",73,40)]),
       (1,[("sandwich",50,160),("glucose",15,60),("tin",68,45),("banana",27,60),
           ("apple",39,40)])]) 
```

# document - 寻找文本分类的训练数据

> ID：15999713
> 
> 赞同：0
> 
> 时间：2013-04-14T13:41:05.600
> 
> 标签：document, classification

我正在寻找用于将文本分类为体育、金融、政治、音乐等类别的训练数据。

请指导参考。你好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:05:14.923

[您可以通过在路透社](http://trec.nist.gov/data/reuters/reuters.html)申请获得路透社语料库

您还可以获得 Technion 文本存储库[TechnionRepo](http://techtc.cs.technion.ac.il/techtc300/techtc300.html#software)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-05T11:04:38.763

如果您正在实时构建文本分类系统，您将已经拥有一个文档语料库。任何分类器中的一个假设是，训练数据和测试数据是相似的或来自相同的分布。如果您只是在该领域探索或构建示例用例，那么此链接可能有助于获取一些训练数据。

1.  [http://web.ist.utl.pt/acardoso/datasets/](http://web.ist.utl.pt/acardoso/datasets/)
2.  [http://disi.unitn.it/moschitti/corpora.htm](http://disi.unitn.it/moschitti/corpora.htm)

# java - SOAP 结果为空？

> ID：15999717
> 
> 赞同：0
> 
> 时间：2013-04-14T13:41:16.487
> 
> 标签：java, soap, service

我的肥皂客户有问题。我已经使用 apache cxf 从 wsdl 生成客户端部分。我正在使用 Netbeans IDE 和 Maven。我还创建了 HeaderHandler 打印肥皂响应的地方，它似乎是有效的。但是当我从我的客户端调用 Web 服务方法时，总是得到空值，没有任何异常。

任何想法？谢谢。

更新：

链接到 wsdl [http://carecoprod.blueway.fr:8180/engine53/52/WSDL?name=AAA00_WsB2B&version=1&type=EAII](http://carecoprod.blueway.fr:8180/engine53/52/WSDL?name=AAA00_WsB2B&version=1&type=EAII)

客户端代码：

```
{
    AAA00WsB2B ss = new AAA00WsB2B(wsdlURL, SERVICE_NAME);
    HeaderHandlerResolver h = new HeaderHandlerResolver();
    ss.setHandlerResolver(h);
    AAA00WsB2BPortType port = ss.getAAA00WsB2BPort();
    System.out.println("Invoking aaa00WsB2B...");
    AAA00WsB2BIN input = new AAA00WsB2BIN();
    VarAAA v = new VarAAA();
    v.setLogin("*******");
    v.setImmat("*******");
    v.setTypeReq("******");
    v.setMdp("*******");
    input.setVarAAA(v);
    AAA00WsB2BOUT _aaa00WsB2B__return = new ObjectFactory().createAAA00WsB2BOUT();
    _aaa00WsB2B__return = port.aaa00WsB2B(input);
    System.out.println("aaa00WsB2B.result="+_aaa00WsB2B__return.getVarAAARetourWs().getCO2());

} 
```

# php - Windows下的phpize

> ID：15999718
> 
> 赞同：5
> 
> 时间：2013-04-14T13:41:20.207
> 
> 标签：php, windows, pear, php-extension

我正在尝试按照此处的说明进行操作：[https](https://code.google.com/p/php-sweph/wiki/build) ://code.google.com/p/php-sweph/wiki/build来编译 PHP 扩展。我的操作系统是 Windows XP。

我找不到“phpize”来执行命令。但是，我已经为 PHP 安装了 Pear。它是仅适用于 Linux 还是有办法在 Windows 上使用 phpsize 进行编译？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-24T18:38:21.023

在 windows 中编译脚本设计来编译 php 本身，并且应该添加你的扩展来编译 php ...

> 在 Windows 上，您不调用 phpize，而是调用 buildconf.bat。
> 
> 打开 Visual Studio 开发人员命令提示符（64 位或 32 位），然后运行
> 
> cd C:\php-src buildconf.bat --add-modules-dir=C:\MyPhpExtensions buildconf.bat 将扫描 C:\MyPhpExtensions 的每个子文件夹以查找 config.w32 文件。
> 
> 然后它将生成一个configure.bat。

您可以在此处阅读更多内容： [在 Windows 上编译扩展](http://blog.benoitblanchon.fr/build-php-extension-on-windows/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:25:23.410

自己在 Windows 上构建 PHP 扩展很难。：你需要在 Windows 上构建 PHP 构建环境，这意味着你需要 Visual Studio 和其他一些东西。有关详细信息，请参阅[http://php.net/manual/en/install.windows.building.php](http://php.net/manual/en/install.windows.building.php)。

这可能是简单地使用 Linux（或 Linux 虚拟机）或从其他人那里获取预构建的 .dll 文件的最简单方法。

# jquery - jquery自动完成的可点击结果

> ID：15999722
> 
> 赞同：1
> 
> 时间：2013-04-14T13:41:50.633
> 
> 标签：jquery, jquery-ui, autocomplete

我在使 jQuery 的结果`Autocomplete`可点击时遇到问题。首先这是我在 php 文件中的内容：

```
$q = strtolower($_GET["term"]);    
$return = array();    
$query = mysql_query("SELECT id,title,unique_name,product FROM products WHERE product LIKE '%$q%' AND active='1' LIMIT 11") or die(mysql_error());    
while ($row = mysql_fetch_array($query)) {    
    array_push($return,    
array('label'=>$row['product'],    
'value'=>'./shop/index.php?product="'.$row['unique_name'].'">'.$row['product']));    
}    
echo(json_encode($return)); 
```

我需要添加到数组 url 作为参数吗？

我通过将 url 作为值传递到数组中来做到这一点是否正确？

这是我的[http://jsfiddle.net/Lszkb/4/](http://jsfiddle.net/Lszkb/4/)包含其余的 js 和 html .. 请帮我解决这个问题。我发现了很多关于这个问题的问题，但没有一个给我答案。还有别的东西 - window.location 根本不起作用..谢谢你们的任何帮助和建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T21:55:02.610

您的代码在要指定的对象值方面存在多个问题。

我以某种方式试图通过以 JSON 格式传递 Ajax 请求来找到解决方案。

```
 source: function (request, response) {
        $.ajax({
            url: "your link",
            dataType: "json",
            data: {
                style: "full",
                maxRows: 12,
                name_startsWith: request.term
            }, 
```

`your link`在测试时将其替换为您的。我希望它有效。

以下工作示例：http: [//jsfiddle.net/Lszkb/8/](http://jsfiddle.net/Lszkb/8/)

如果您想以不同的方式接近，请告诉我，只需在评论中指定即可。

# php - WordPress 自定义小部件未注册

> ID：15999723
> 
> 赞同：2
> 
> 时间：2013-04-14T13:42:02.190
> 
> 标签：php, wordpress, web, widget

我正在尝试开发一个简单的 wordpress 小部件，但到目前为止失败得很惨。我自己的小部件根本不会出现在管理面板中，所以我决定尝试 wordpress codex @ [http://codex.wordpress.org/Widgets_API中提供的示例小部件代码](http://codex.wordpress.org/Widgets_API)

同样的问题仍然存在，我似乎无法在网上的任何地方找到解决方案。

我试过的确切代码：[https ://gist.github.com/Jeger/5382772](https://gist.github.com/Jeger/5382772)

该文件存储在 wp-content/plugins/Foo_Widget.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T12:38:10.883

确保您是否在插件部分激活了您的小部件插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T13:54:42.810

对这个问题有一个非常简单的答案，该答案在法典中没有提到，对于习惯于为 wordpress 开发的人来说，这可能是显而易见的，但我将把它留在这里让其他有同样问题的人找到。

在文件的顶部应该有类似这样的内容：

```
/*
Plugin Name: Foo Widget
Description: Foo widget
Version: 1.0
Author: name
License: GPL2
*/ 
```

# java - Java Timer 不会在新的 TimerTask 启动之前等待前一个 TimerTask 完成

> ID：15999727
> 
> 赞同：1
> 
> 时间：2013-04-14T13:42:23.223
> 
> 标签：java, timer, modal-dialog

我正在用 Java 编写一个应用程序，但我陷入了以下困境：一段时间后，会显示一个 inputDialog(JOptionPane)。因为间隔很短，即 10 秒，如果我延迟与第一个对话交互，那么第二个对话将在我之后立即出现。有没有办法避免这种情况？我认为该程序会等待我的输入。

代码：

```
Timer timer = new Timer();
    timer.scheduleAtFixedRate(new TimerTask() {
          @Override
          public void run() {
            String task = JOptionPane.showInputDialog(null, "What are you doing now???", "");
          }
        }, 10*1000, 10*1000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:21:21.790

`Timer`尝试从内部停止/启动`TimerTask`

```
final Timer timer = new Timer();
timer.scheduleAtFixedRate(new TimerTask() {
      @Override
      public void run() {
        timer.stop();
        String task = JOptionPane.showInputDialog(null, "What are you doing now???", "");
        timer.start();
      }
    }, 10*1000, 10*1000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T14:25:22.373

如果任务已经在运行，只需检查你的 run 方法，当它运行时，返回。

添加变量

```
static boolean isRunning = false; 
```

到您的 TimerTask 实现类。然后您的运行方法如下所示：

```
 public void run() {
     if (isRunning == false) {
         isRunning = true;

         // your code

         isRunning = false;
     }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T13:45:48.690

```
try {
    Thread.sleep(10000);
} catch(InterruptedException ex) {
    Thread.currentThread().interrupt();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-18T10:19:44.127

[编辑] 下面的代码没有使用“scheduleAtFixedRate”，所以它的结论可能是错误的......（永远不要相信互联网上的那些人：）

【原创】我偏爱和我一样懒的人：

计时器等待。它一次只能运行一个任务。

(** 使用 java-1.8.0-openjdk 测试)

代码（scala，但它正在使用 Java 计时器）：

```
import java.util.{Timer, TimerTask}

object O {
    val iGen = new AtomicInteger()

    def main(args: Array[String]): Unit = {
        val timer = new Timer()

        val timerTask = new TimerTask {
            override def run(): Unit = {
                val tid = iGen.incrementAndGet()
                println(s"--- task #$tid started")
                Thread sleep(5000)
                println(s"--- task #$tid done")
            }
        }

        timer.schedule(timerTask, 0, 1000)
    }
} 
```

输出：

```
--- task #1 started
--- task #1 done
--- task #2 started
--- task #2 done
--- task #3 started
--- task #3 done
--- task #4 started
--- task #4 done
--- task #5 started
--- task #5 done
--- task #6 started
--- task #6 done
--- task #7 started
--- task #7 done
--- task #8 started
--- task #8 done
--- task #9 started
--- task #9 done
--- task #10 started
--- task #10 done
--- task #11 started
--- task #11 done
--- task #12 started
--- task #12 done
--- task #13 started
--- task #13 done
--- task #14 started
--- task #14 done
--- task #15 started
--- task #15 done
--- task #16 started
--- task #16 done
--- task #17 started
--- task #17 done
--- task #18 started
--- task #18 done
--- task #19 started
--- task #19 done
--- task #20 started
--- task #20 done
--- task #21 started
--- task #21 done
--- task #22 started
--- task #22 done
--- task #23 started
--- task #23 done
--- task #24 started
--- task #24 done
--- task #25 started
--- task #25 done
--- task #26 started
--- task #26 done
--- task #27 started
--- task #27 done
--- task #28 started
--- task #28 done
--- task #29 started
--- task #29 done
--- task #30 started
--- task #30 done
--- task #31 started
--- task #31 done
--- task #32 started
--- task #32 done
--- task #33 started
--- task #33 done
--- task #34 started
--- task #34 done
--- task #35 started
--- task #35 done
--- task #36 started
--- task #36 done
--- task #37 started
--- task #37 done
--- task #38 started 
```

# c# - 捕获异常并在程序崩溃时正确处理程序

> ID：15999732
> 
> 赞同：2
> 
> 时间：2013-04-14T13:43:03.903
> 
> 标签：c#, winforms, crash, applicationdomain

```
AppDomain.CurrentDomain.UnhandledException += 
    new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
Forms.Application.ThreadException += 
    new System.Threading.ThreadExceptionEventHandler(Application_ThreadException); 
```

是我剪掉了一个类似问题的代码，但它无法解决我的问题。我要做的是捕获崩溃并正确处理我的应用程序，这样我就不会留下内存转储/跟踪/系统托盘图标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T04:37:17.047

如果您使用调试器或任务管理器终止进程，则无法处理这种情况——无论是 .NET 应用程序还是本机应用程序。

在 CLR 中处理操作系统异常可能是可能的，但不建议这样做。请参阅[是否可以在 .NET 中捕获访问冲突异常？](https://stackoverflow.com/questions/3312003/is-it-possible-to-catch-an-access-violation-exception-in-net)更多细节。

在几乎所有情况下，您的进程都不应该以这些方式终止，即使这样，也不需要正确处理，因为操作系统会正确关闭几乎所有句柄：文件、连接等。终止的应用程序留下托盘图标是 20-资源管理器中的一岁错误，您对此无能为力。让我们只希望微软有一天会修复它。

# networking - IP分片和重组

> ID：15999739
> 
> 赞同：25
> 
> 时间：2013-04-14T13:43:42.877
> 
> 标签：networking, tcp, network-protocols, fragmentation, defragmentation

我目前正在浏览我的网络幻灯片，想知道是否有人可以帮助我解决碎片和重组的概念。

![在此处输入图像描述](https://i.stack.imgur.com/0XaEs.png)

我了解它是如何工作的，即由于网络链接具有 MTU，数据报如何被分成更小的块。然而，图片中的例子让我感到困惑。

所以前两个部分显示长度为 1500，因为这是 MSU，但这不应该意味着最后一个应该有 1000（总共 4000 个字节）而不是 1040？这些额外的 40 个字节是从哪里来的？我的猜测是，因为前两个片段都有 20 字节的标头，所以这额外的 40 字节数据需要去某个地方，所以它会到达最后一个片段？

Fragflag 本质上意味着还有另一个片段，因此除了最后一个片段为零之外，所有片段的 Fragflag 都将为 1。但是我不明白偏移量是什么或它是如何计算的。为什么第一个偏移量为零？为什么我们将数据字段 (1480) 中的字节除以 8 以获得第二个偏移量？这个 8 是从哪里来的？除此之外，我假设每个片段偏移量只会增加这个值？

例如，第一个片段的偏移量为 0，第二个为 185，第三个为 370，第四个为 555？(370+185)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-14T14:11:37.450

每个数据包中有一个 20 字节的标头。所以原始数据包包含 3,980 字节的数据。这些片段包含 1480、1480 和 1020 字节的数据。1480 + 1480 + 1020 = 3980

标题中的每一点都是宝贵的。将偏移量除以 8 使其适合 13 位而不是 16 位。这意味着除了最后一个数据包之外的每个数据包都必须包含一定数量的数据字节，这些数据字节数是 8 的倍数，这不是问题。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-07-22T06:32:05.117

RFC 791 专门解释了分段和重组。请阅读[Internet 协议规范 RFC](http://www.ietf.org/rfc/rfc791.txt)。RFC 有多个部分解释示例碎片和重组。您的所有疑问和问题都在其中得到了很好的解决。

Ans 1：关于数据包的长度：原始数据包包含 4000 字节。该数据包是一个完全 IP 数据包，因此也包含 IP 标头。因此，有效载荷长度实际上是 4000 -（IP Header Length 即 20）。

实际有效载荷长度 = 4000 - 20 = 3980

现在，由于长度大于 MTU（1500 字节），数据包被分段。

因此，第一个数据包包含 1500 个字节，其中包括 IP 标头 + 有效负载部分。

1500 = 20（IP 报头）+1480（数据负载）

对于另一个数据包也是如此。

第三个数据包应包含剩余的剩余数据（ 3980 - 1480 -1480 ）= 1020

因此数据包的长度是 20 (IP Header) + 1020 (payload) = 1040

Ans 2：偏移量是参考原始数据有效负载的数据开始的地址或定位器。对于 IP，数据有效负载包括 IP 标头和选项标头之后的所有数据。因此，系统/路由器获取有效负载并将其分成更小的部分，并参考原始数据包跟踪偏移量，以便可以进行重组。

如[RFC](http://www.ietf.org/rfc/rfc791.txt)第 12 页中所述。

"*片段偏移量字段告诉接收者片段在原始数据报中的位置。片段偏移量和长度决定了该片段覆盖的原始数据报的部分。更多片段标志指示（通过被重置）最后一个片段。这些字段为重组数据报提供了足够的信息。* ”

片段偏移量以每个 8 字节为单位进行测量。它在 IP 标头中有 13 位字段。如 RFC 第 17 页所述

"*该字段指示该片段在数据报中的位置。片段偏移量以 8 个八位字节（64 位）为单位。第一个片段的偏移量为零。* "

因此，正如您在这个 8 来自哪里的问题中所问的那样，它是为 IP 协议规范定义的标准，其中 8 个八位字节被视为一个值。这也有助于我们通过它传输大数据包。

RFC 的第 28 页写道： *片段以 8 个八位字节为单位计数。分片策略的设计使得未分片的数据报具有全零分片信息（MF = 0，分片偏移量 = 0）。如果 Internet 数据报是分段的，则其数据部分必须在 8 个八位字节边界上断开。这种格式允许 2**13 = 8192 个片段，每个片段有 8 个八位字节，总共 65,536 个八位字节。注意，这与数据报总长度字段是一致的（当然，报头计入总长度而不是分片）。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T15:42:47.200

IP 标头中的偏移量大小为 13 位，但在最坏的情况下我们需要 16 位。所以我们使用 8 的比例因子，即 (2^16/2^13)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-27T08:41:11.393

这些不是额外的位，而是最后一个片段的总长度。由于 1500 是 MTU，这意味着一个片段中可以有 1500 个字节的数据，包括标头。每个片段都附加了标头。这意味着在片段中我们能够发送 1500-20 = 1480 字节的数据。假设有 4000B 数据报。数据报只不过是网络层数据的数据包封装。所以我们必须发送的总数据是 4000-20=3980 。然后它被分成3部分（ceil（3980/1480）），每个部分的长度分别为1480,1480,1020。因此，当 20B 标头附加到最后一个片段时，其长度变为 1020+20=1040 。

# android - ImageView 图像未在 Eclipse + Android 上显示

> ID：15999744
> 
> 赞同：1
> 
> 时间：2013-04-14T13:44:31.177
> 
> 标签：android, xml, eclipse, android-layout

我所有的图片都保存在 drawable-xhdpi 文件夹中。我总共有六张图片，它显示了 4 张但不是最后两张，尽管我在 xml 文件中对两者使用了相同的代码。

```
 <ImageView
            android:id="@+id/button4"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_above="@+id/textView4"
            android:layout_alignRight="@+id/textView4"
            android:onClick="food"
            android:src="@drawable/foods" /> 
```

^ 那个是可见的

```
<ImageView
            android:id="@+id/button6"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:layout_alignBaseline="@+id/button5"
            android:layout_alignBottom="@+id/button5"
            android:layout_alignRight="@+id/textView4"
            android:onClick="parking"
            android:src="@drawable/parking" /> 
```

^ 这个不是。

这是我通过图形布局查看时得到的

找不到以下类：
- ImageView（更改为 android.widget.ImageView，修复构建路径，编辑 XML）

同样，两个图像都包含在同一个文件夹中。这可能很明显，我对 android 比较陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:12:38.933

从 Eclipse 的顶部栏中转到`Project`-> 。`Clean...`然后重新启动图形视图也可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T12:35:03.623

我遇到了同样的问题，如果您使用的是图像保存的 .icon 扩展名，则可能会导致此问题。更改您的图像类型。希望这有帮助。

# php - in_array 或等于 'x'

> ID：15999746
> 
> 赞同：1
> 
> 时间：2013-04-14T13:44:40.497
> 
> 标签：php

如何检查用户是否属于数组中的组，或者他们的用户名 ($un) 是否等于“X”。（如果做不到这一点，我想我可以进行两次单独的检查）

我有以下内容，但它给了我一个“意外的 OR”错误：

```
<?php if (in_array('SMT', $adGroups)) or ($un == 'abc' || $un == 'xyz') echo 'blah'; ?> 
```

谢谢 ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T13:47:56.220

您的代码语法错误，您有一个额外的右括号`)`。

尝试像这样修复它：

```
if (in_array('SMT', $adGroups) || $un == 'abc' || $un == 'xyz')  {
    //Your code here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:47:56.123

将第二个右括号移到条件的末尾：

```
if (in_array('SMT', $adGroups) or ($un == 'abc' || $un == 'xyz')) echo 'blah'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T13:48:49.080

这是一个语法错误：

```
if (in_array('SMT', $adGroups)) or ($un == 'abc' || $un == 'xyz')...
                               ^ 
```

当错误消息显示“意外或”时，它实际上意味着它所说的......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T13:55:02.387

一个改进的步骤是`if (in_array("SMT", $adGroups, true) || in_array($un, ["abc", "xyz"], true)) { print "blah"; }`，这将使您能够在用户检查部分指定任意数量的不同用户。避免多个`if()`语句，它可以更快地解决检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T13:48:07.000

你的右括号放错了地方。尝试：

```
if (in_array('SMT', $adGroups) or ($un == 'abc' || $un == 'xyz')) echo 'blah'; 
```

# objective-c - iPad UIImageView 在缩小较大的 UIImage 时会创建锯齿边缘，但在显示其自身的屏幕截图时不会。

> ID：15999747
> 
> 赞同：2
> 
> 时间：2013-04-14T13:44:55.130
> 
> 标签：objective-c, ipad, uiimageview, uiimage, screenshot

我在 UIImageView 中显示的 UIImage 遇到了一个奇怪的问题。

如果我将 1024x1024 图像放在 173x173 图像视图中并设置“缩放填充”，则结果会出现锯齿。但是，如果我放入相同的图像，然后截取 imageview 的屏幕截图并将其分配回去，图像就会完美显示。这让我很困扰，因为屏幕截图应该是我在图像视图中看到的确切像素。

左边是直接分配图像的结果。右侧是对同一图像进行截图并将其分配回去。请注意 Es 在左侧是锯齿状的，但在右侧是平滑的。

![在此处输入图像描述](https://i.stack.imgur.com/gLy9X.png)

**这是图像视图的内容模式的问题还是在截图过程中发生的事情？**

```
 for(UIImageView* placeholderView in self.placeholderImageViews)
    {
//assigning a 1024x1024 image into a smaller image view results in an aliased image here
        placeholderView.image = imageToDisplay;

//this code makes the image appear perfectly scaled down
        if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)])
        {
            UIGraphicsBeginImageContextWithOptions(placeholderView.frame.size, NO, [UIScreen mainScreen].scale);
        }
        else
        {
            UIGraphicsBeginImageContext(placeholderView.frame.size);
        }
        [placeholderView.layer renderInContext:UIGraphicsGetCurrentContext()];
        screenshot = UIGraphicsGetImageFromCurrentImageContext();

        UIGraphicsEndImageContext();

        //save the result
        placeholderView.image = screenshot;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-17T14:31:05.800

UIImageView 缩放很烂；你应该总是给它一个与其边界大小完全相同的图像，所以它不必缩小它。检查此代码和示例。

快速扩展：

```
extension UIImage{

        // returns a scaled version of the image
        func imageScaledToSize(size : CGSize, isOpaque : Bool) -> UIImage{

            // begin a context of the desired size
            UIGraphicsBeginImageContextWithOptions(size, isOpaque, 0.0)

            // draw image in the rect with zero origin and size of the context
            let imageRect = CGRect(origin: CGPointZero, size: size)
            self.drawInRect(imageRect)

            // get the scaled image, close the context and return the image
            let scaledImage = UIGraphicsGetImageFromCurrentImageContext()
            UIGraphicsEndImageContext()

            return scaledImage
       }
} 
```

例子：

```
aUIImageView.image = aUIImage.imageScaledToSize(aUIImageView.bounds.size, isOpaque : false) 
```

如果图像没有 alpha，则将 isOpaque 设置为 true：绘图将具有更好的性能。

# html - 带有浮动属性的元素后面的内容会发生什么

> ID：15999753
> 
> 赞同：1
> 
> 时间：2013-04-14T13:46:10.487
> 
> 标签：html, css, css-float

刚刚看到一个关于stackoverflow的[问题。](https://stackoverflow.com/questions/15999103/two-block-level-elements-why-do-i-need-float-on-both-to-position-them-side-by-s#)

考虑以下**标记**：

```
<div id="box_wrap">
    <div id="box1">
        <h2>Box1 text</h2>
        <p>Lorem Ipsum</p>
    </div>
    <div id="box2">
        <h2>Box2 text</h2>
        <p>Lorem Ipsum</p>
        <p>Text</p>
    </div>
</div 
```

与**CSS**：

```
#box1 {
    background-color: blue;
    width: 30%;
    float: left;
}

#box2 {
    background-color: red;
    width: 30%;
} 
```

div 一个接一个出现，即（[相应的小提琴](http://jsfiddle.net/GbDqT/)）

![在此处输入图像描述](https://i.stack.imgur.com/Ixo18.png)

但是当我给出`#box2`的宽度高于`#box1`ie`width:34%`时，就会发生这种情况：（[相应的小提琴](http://jsfiddle.net/GbDqT/1/)）

![在此处输入图像描述](https://i.stack.imgur.com/3AQ6a.png)

并且对于更高的宽度`#box2`（与相比`#box1`） ie `width:50%`，最终会出现所需的效果。（[相应的小提琴](http://jsfiddle.net/GbDqT/2/)）

![在此处输入图像描述](https://i.stack.imgur.com/4a1be.png)

请注意，蓝色盒子即带有`float:left`ie `#box1`has`width:30%`的盒子和红色盒子，即没有浮动属性的盒子，ie `#box2`has `width:50%`，仍然蓝色渲染得比红色大。

`width:auto`此外，对于没有宽度或`#box2`它会产生所需的效果。

**期望的效果**：`#div2`应该对齐到右边`#div1`

谁能给我解释一下，发生了什么？我错过了什么？

（也不知道如何用合适的标题提出这个问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:56:36.647

浮动元素之后的元素将其内容包裹在浮动元素周围。在第一种情况下，当两个 div 的宽度相同时，第二个 div 不能环绕第一个 div，因为一个东西必须更宽（更大）然后它必须环绕自己。

在第二种情况下， box2 比 box1 更宽，并尽可能地将其内容包裹在 box1 周围。

在第三种情况下，当 box2 比 box1 足够宽时，它仍然环绕在 box1 周围，但没有足够的内容显示在 box1 下方。向 box2 添加更多内容将使您清楚[http://jsfiddle.net/GbDqT/4/](http://jsfiddle.net/GbDqT/4/)。这个 jsfiddle 包含`width: auto`box2 和一些额外的内容。

**更新： box2***看起来*比 box1 宽的原因是（你可以想象）box1*覆盖*在 box2 的顶部。所以box2的大部分都隐藏在box1下面，但是box2的内容却因为box1的浮动而向右推

**来源**：[developer.mozilla](http://developer.mozilla.org/en-US/docs/CSS/float)

# makefile - 如何在 Theos makefile 中包含资源文件？

> ID：15999757
> 
> 赞同：7
> 
> 时间：2013-04-14T13:46:45.730
> 
> 标签：makefile, include, theos

我用theos做了一个功能齐全的调整，我需要在其中使用一个图像文件，获取图像的代码是正确的（在Xcode上测试）。但图像不包含在最终的 DEB 文件中。

我有这个makefile：

```
SDKVERSION=6.0
include theos/makefiles/common.mk
include theos/makefiles/tweak.mk

TWEAK_NAME = MyTweak
MyTweak_FRAMEWORKS = Foundation  CoreGraphics UIKit
MyTweak_FILES = Tweak.xm image.png

include $(THEOS_MAKE_PATH)/tweak.mk 
```

但是当我尝试编译时，我得到：

```
 No rule to make target `obj/image.png.o', needed by `obj/MyTweak.dylib'.  Stop. 
```

我能做些什么来包括它？

（抱歉语法错误，从 iphone 询问）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-27T07:20:31.287

MyTweak_FILES 变量应该只包含可以编译的文件。使文件以不同的方式处理资源。

要包含资源，您需要按如下方式创建捆绑包。

**1) 在tweak.xm 目录中创建一个名为Resources 的文件夹。**

**2）将所有资源文件（所有PNG）放入该文件夹中。**

**3）将以下信息添加到您的制作文件中**

```
BUNDLE_NAME = your_bundle_identifier

your_bundle_identifier_INSTALL_PATH = /Library/MobileSubstrate/DynamicLibraries

include $(THEOS)/makefiles/bundle.mk 
```

**4) 在你的tweak.xm 文件上定义你的包如下。**

```
#define kBundlePath @"/Library/MobileSubstrate/DynamicLibraries/your_bundle_identifier.bundle" 
```

**5）您现在可以初始化捆绑包并使用调整中的图像，如下所示：**

```
NSBundle *bundle = [[[NSBundle alloc] initWithPath:kBundlePath] autorelease];

NSString *imagePath = [bundle pathForResource:@"your_image_name" ofType:@"png"];

UIImage *myImage = [UIImage imageWithContentsOfFile:imagePath] 
```

在上述步骤中，将 your_bundle_identifier 替换为您的调整包标识符，该标识符将位于控制文件中。（例如：com.yourdomain.tweak_name）

还将 your_image_name 替换为您要使用的图像的名称。

您几乎可以通过上述方式使用任何资源（例如：声音文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-30T15:24:12.493

除了发布的答案之外，通常的做法是将捆绑包放在“/Library/Application Support/”而不是“/Library/MobileSubstrate/DynamicLibraries/”中

# opencl - MandelBrot 设置使用 openCL

> ID：15999758
> 
> 赞同：2
> 
> 时间：2013-04-14T13:47:13.167
> 
> 标签：opencl, mandelbrot

尝试使用与我在使用 TBB（线程构建块）运行时使用的代码（某种）相同的代码。

我对 OpenCL 没有太多经验，但我认为大部分主要代码都是正确的。我相信错误在`.cl`文件中，它在那里进行数学运算。

这是我在 TBB 中的 mandelbrot 代码：

> [曼德布洛特待定](https://docs.google.com/file/d/0B6DBARvnB__iNmZGX0FraGZqa3M/edit?usp=sharing)

这是我在 OpenCL 中的代码

> [曼德布洛特 OpenCL](https://docs.google.com/file/d/0B6DBARvnB__ibGdIRnBna0tzMW8/edit?usp=sharing)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T00:48:28.923

我更改了内核中的代码，它运行良好。我的新内核代码如下：

```
// voronoi kernels

//
// local memory version
//
kernel void voronoiL(write_only image2d_t outputImage)
{
    // get id of element in array
    int x = get_global_id(0);
    int y = get_global_id(1);
    int w = get_global_size(0);
    int h = get_global_size(1);

    float4 result = (float4)(0.0f,0.0f,0.0f,1.0f);
    float MinRe = -2.0f;
    float MaxRe = 1.0f;
    float MinIm = -1.5f;
    float MaxIm = MinIm+(MaxRe-MinRe)*h/w;
    float Re_factor = (MaxRe-MinRe)/(w-1);
    float Im_factor = (MaxIm-MinIm)/(h-1);
    float MaxIterations = 50;

    //C imaginary
    float c_im = MaxIm - y*Im_factor;

    //C real
    float c_re = MinRe + x*Re_factor;

    //Z real
    float Z_re = c_re, Z_im = c_im;

    bool isInside = true;
    bool col2 = false;
    bool col3 = false;
    int iteration =0;

    for(int n=0; n<MaxIterations; n++)
    {
        // Z - real and imaginary
        float Z_re2 = Z_re*Z_re, Z_im2 = Z_im*Z_im;

        //if Z real squared plus Z imaginary squared is greater than c squared
        if(Z_re2 + Z_im2 > 4)
        {
            if(n >= 0 && n <= (MaxIterations/2-1))
            {
                col2 = true;
                isInside = false;
                break;
            }
            else if(n >= MaxIterations/2 && n <= MaxIterations-1)
            {
                col3 = true;
                isInside = false;
                break;
            }
        }
        Z_im = 2*Z_re*Z_im + c_im;
        Z_re = Z_re2 - Z_im2 + c_re;
        iteration++;
    }
    if(col2) 
    { 
        result = (float4)(iteration*0.05f,0.0f, 0.0f, 1.0f);
    }
    else if(col3)
    {
        result = (float4)(255, iteration*0.05f, iteration*0.05f, 1.0f);
    }
    else if(isInside)
    {
        result = (float4)(0.0f, 0.0f, 0.0f, 1.0f);
    }

    write_imagef(outputImage, (int2)(x, y), result);
} 
```

你也可以在这里找到它：

> [https://docs.google.com/file/d/0B6DBARvnB__iUjNSTWJubFhUSDA/edit](https://docs.google.com/file/d/0B6DBARvnB__iUjNSTWJubFhUSDA/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T07:52:30.583

请参阅此链接。它由@eric-bainville 开发。本机和 OpenCL 的 CPU 代码都不是最佳的（它不使用 SSE/AVX），但我认为 GPU 代码可能很好。对于 CPU，您可以通过使用 AVX 并一次在八个像素上运行来大大加快代码速度。

[http://www.bealto.com/mp-mandelbrot.html](http://www.bealto.com/mp-mandelbrot.html)

# php - Get - Request ，在 Alert() 中显示结果

> ID：15999759
> 
> 赞同：1
> 
> 时间：2013-04-14T13:47:16.327
> 
> 标签：php, jquery

我想创建一个应用程序，它将发送一个获取请求，然后获取响应并将其显示在页面上，这是我学习过程的一部分，最终我希望将响应解析并转换为元素等。但现在我无法访问响应中的信息。我怎样才能 alert() 响应中的任何结果？

下面脚本的结果范围从未定义到 [object ojbect]

```
 <script type="text/javascript">
                    var bbz;
$.ajax({
type: "GET",
dataType: "jsonp",
cache: false,
url: "MyDomain - its defined and on the web",
success: function(response) {

bbz = response;

alert(bbz.length);
alert(bbz);
alert(bbz[0]);
 }
});

        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:51:46.560

如果将`dataType`属性设置为`html`，则应该能够简单地返回 HTML。

您设置`dataType: "jsonp"`了哪些尝试`jsonp`从要返回的数据中解析对象。但是，您真正想要的是您从中请求数据的文件中的标记。为此，您必须声明正确的返回类型，以便 AJAX 知道要给您什么数据，即您告诉 AJAX 如何解析数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T13:51:57.710

在我看来，您正在期待 JSON 响应...

我假设这是因为您访问响应对象的属性的方式 -

```
bbz = response;
alert(bbz.length); 
```

您需要将您的设置`dataType`为`"json"`.

# html - 异步加载图片

> ID：15999760
> 
> 赞同：45
> 
> 时间：2013-04-14T13:47:25.703
> 
> 标签：html, image, asynchronous

如果我有如下图像标签：

```
<img src="myimage.jpg" /> 
```

如果我向它添加“异步”：

```
<img async src="myimage.jpg" /> 
```

图像会异步加载吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2016-05-24T11:15:47.457

异步加载（延迟加载）内容的方法是不设置“src”属性，然后在启动 DOM 就绪后执行加载图像的脚本。

```
 <img data-lazysrc='http://www.amazingjokes.com/images/20140902-amazingjokes-title.png'/> 
```

并使用 jQuery（或者也可以使用纯 JavaScript）使用下面的代码（*如[这里](https://stackoverflow.com/a/32867110/2377343)*建议的那样）：

```
<script>  
function ReLoadImages(){
    $('img[data-lazysrc]').each( function(){
        //* set the img src from data-src
        $( this ).attr( 'src', $( this ).attr( 'data-lazysrc' ) );
        }
    );
}

document.addEventListener('readystatechange', event => {
    if (event.target.readyState === "interactive") {  //or at "complete" if you want it to execute in the most last state of window.
        ReLoadImages();
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-04-14T14:56:46.873

```
var img = new Image(),
    url = "myimg.jpg",
    container = document.getElementById("holder-div");

img.onload = function () { container.appendChild(img); };
img.src = url; 
```

一旦您在脚本中请求它，这将开始加载图像，并且每当图像完成加载时，它都会抓取并将图像添加到其中。

还有很多其他方法可以做到这一点......
这只是异步加载单个图像的一个非常简单的示例。

但道理是这样的：
要使异步加载正常工作，要么在 JavaScript 中加载它并使用 onload，要么在页面上包含图像标签，不带`src`属性（在 HTML 中指定`width`and `height`），然后返回某个时间点，在JS，并设置图像URL。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2019-09-16T13:19:47.320

执行此操作的现代方法是使用`loading`图像和 iframe 的属性。

# 属性：`loading=lazy`

这将延迟内容的加载，直到元素到达与视口的计算距离（这只是意味着，用户很可能会将其滚动到视图中）。

```
<img src="defer.png" loading="lazy" alt="An Awesome Image" width="500" height="400"> 
```

将属性设置为`lazy`调用新行为。

自 v76 以来，这已经在 Chromium 中，但可能不会在非 Chromium 浏览器中使用，直到它通过通常的规范恶作剧。

如果您要使用脚本延迟加载，则值得使用`lazy`属性编写图像并填充行为而不是使用类名等。这样，您可以允许本机版本接管为它变得可用。

# 强制预加载

自动延迟加载可能会成为轻量级浏览的一项功能，在这种情况下，您可能希望执行相反的操作并强制加载图像。您可以使用`loading`具有值的相同属性`eager`来要求浏览器抓取图像，即使它可能选择不抓取。

```
<img src="defer.png" loading="eager" alt="An Awesome Image" width="500" height="400"> 
```

# 进一步阅读

[查看 WHATWG 规范的拉取请求](https://github.com/whatwg/html/pull/3752)

[后备 JavaScript 以及可能不使用后备的注释](https://www.stevefenton.co.uk/2019/09/html-loading-attribute-for-lazy-loading-images-and-iframes/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-10-25T06:21:03.267

异步加载图像的另一种方法是 `Promise`在 javascript 中使用，它的目的是异步执行操作。

```
function asyncImageLoader(url){
    return new Promise( (resolve, reject) => {
        var image = new Image()
        image.src = url
        image.onload = () => resolve(image)
        image.onerror = () => reject(new Error('could not load image'))
    })
}    

// then use it like this

var image = asyncImageLoader(url)

image.then( res => {
    console.log(res)
}) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-04-14T13:57:05.170

```
<img async src="myimage.jpg" /> 
```

图片标签不支持任何异步属性。

[http://www.w3.org/TR/html5/embedded-content-0.html#the-img-element](http://www.w3.org/TR/html5/embedded-content-0.html#the-img-element)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-08-16T22:07:15.320

虽然其他几个答案突出了异步获取图像的方法，但知道`<img />`标签支持一个属性可能会有所帮助，该属性可以作为浏览器的*提示，**可能*导致图像被异步解码。Internet Explorer 似乎不支持它。

```
<img src="myimage.jpg" decoding="async"/> 
```

[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Img#attr-decoding](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Img#attr-decoding)

[https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/decoding](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/decoding)

[https://github.com/whatwg/html/issues/1920](https://github.com/whatwg/html/issues/1920)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-01-29T17:41:17.250

如果您使用的是 jQuery，我做了一些简单但有效的操作，如下所示：

**HTML**

```
<div data-lazy-load-image="/Images/image-name.png" data-image-classname="pop-in"></div> 
```

**JavaScript**

```
$(function () {
    $("[data-lazy-load-image]").each(function (index, element) {
        var img = new Image();
        img.src = $(element).data("lazy-load-image");
        if (typeof $(element).data("image-classname" !== "undefined"))
            img.className = $(element).data("image-classname");
        $(element).append(img);
    });
}); 
```

**CSS**

```
@-webkit-keyframes pop-in {
    0% { opacity: 0; -webkit-transform: scale(0.5); }
    100% { opacity: 1; -webkit-transform: scale(1); }
}
@-moz-keyframes pop-in {
    0% { opacity: 0; -moz-transform: scale(0.5); }
    100% { opacity: 1; -moz-transform: scale(1); }
}
@keyframes pop-in {
    0% { opacity: 0; transform: scale(0.5); }
    100% { opacity: 1; transform: scale(1); }
} 
```

您可以扩展它以包含每个图像的其他可选属性，但您明白了。

这将等到 DOM 准备好，然后动态（异步）将图像加载到您使用该`data-lazy-load-image`属性标记的元素中。我包含了 CSS 以使图像在加载时“弹出”。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-01-02T23:47:55.880

虽然@Norguard 的示例对于一两个图像来说非常简单易行，但我发现 echo.js 对于延迟加载非常方便，[https://github.com/toddmotto/echo](https://github.com/toddmotto/echo)。

它可以延迟加载带有 data-* 属性的图像，并且还提供了一些简洁的其他功能。

```
<img data-echo="img/photo.jpg">
<script src="dist/echo.js"></script>
<script>
    echo.init();
</script> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-04-26T19:06:46.020

我在 jQuery 中使用了以下方法。

首先，不要在图像标签中使用“src”属性，而是将您的源放入不同的属性中，如下所示：

```
<img async-src="/mydirectory/myimage.jpg" /> 
```

然后，在 jQuery 文档就绪函数中，我使用以下代码将元素的 async-src 复制到元素的实际 src：

```
$("img[async-src]").each(function(index) {
    $(this).attr("src", $(this).attr("async-src"));
}); 
```

笔记：

jQuery 的 .each 函数可以按照它们在 HTML/DOM 中编码的顺序处理标签，但是图像大小和网络问题可能意味着图像实际上并没有按顺序*加载。*换句话说，您的第三个 async-src 图像可能会在第一个完成加载之前出现在屏幕上。

如果您的页面布局依赖于该图像文件的像素尺寸——例如，您没有通过标签属性、CSS 或父元素定义图像的尺寸——那么您可能必须在原始文件指向上使用“src”属性转换为所需尺寸的空白或透明 GIF。

最后，如果你想在异步加载图像之后处理一些代码——例如，处理渐变效果或更改与元素相关的 CSS 标签——像这样展开 jQuery：

```
$("img[async-src]").each(function(index) {
    $(this).load(function() {
        // code to run after loading
    });
    $(this).attr("src", $(this).attr("async-src"));
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-11-14T13:22:12.630

答案可能为时已晚，但最近面临同样的问题，控制台中的“灯塔”建议我应该遵循链接中提到的内容：在此处 [输入链接描述](https://web.dev/codelab-use-lazysizes-to-lazyload-images/)

基本上，我按照建议做了以下操作，效果非常好：

```
 <script src="lazysizes.min.js" async></script>
  <!-- Images End -->
</body> 
```

[您可以从https://raw.githubusercontent.com/aFarkas/lazysizes/gh-pages/lazysizes.min.js](https://raw.githubusercontent.com/aFarkas/lazysizes/gh-pages/lazysizes.min.js)下载lazysizes.min.js

并在本地采购。

然后，将类lazyload 添加到应该延迟加载的图像中。此外，将 src 属性更改为 data-src。

例如：

 ~~```
<img data-src="images/flower3.png" class="lazyload" alt=""> 
```

> 您可能想知道为什么需要将 src 属性更改为 data-src。如果不更改此属性，则所有图像将立即加载，而不是延迟加载。data-src 不是浏览器识别的属性，所以当它遇到具有该属性的图像标签时，它不会加载图像。在这种情况下，这是一件好事，因为它允许lazysizes 脚本决定何时加载图像，而不是浏览器。

访问参考以获得更好的理解。

希望它会对某人有所帮助:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-14T14:11:52.910

您可以阅读有关延迟加载属性的更多信息：

```
<img src="myimage.jpg" alt="some description" lazyload/> - with default values 
```

或者您可以优先考虑：

```
<img src="myimage.jpg" alt="some description" lazyload="1"/>
<img src="myimage.jpg" alt="some description" lazyload="2"/> 
```~~

# java - 这个 FragmentManager 在与 #recylce() 一起使用后应该被回收

> ID：15999761
> 
> 赞同：3
> 
> 时间：2013-04-14T13:47:41.263
> 
> 标签：java, android, eclipse, recycle

这是我的代码：

```
protected void showNewsItem(News news) {
    FragmentManager fm = getFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();
    DialogFragment newFragment = MyNewsFragment.newInstance();
    newFragment.show(ft, "dialog");
} 
```

并且错误`This FragmentManager should be recycled after use with #recylce()`出现`beginTransaction`在行上。

我试过`fm.recycle();`像错误提示的那样添加，但这给了我一个`recycle`未定义的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T00:29:10.750

请改用该`DialogFragment.show(FragmentManager manager, String tag)`版本。
所以在你的情况下：

```
protected void showNewsItem(News news) {
    DialogFragment newFragment = MyNewsFragment.newInstance();
    newFragment.show(getFragmentManager(), "dialog");
} 
```

通常，上述成语足以显示`DialogFragment`.

该`show(FragmentTransaction transaction, String tag)`版本用于“搭载”现有的`FragmentTransaction`.

# html - HTML 表格宽度未正确显示

> ID：15999762
> 
> 赞同：0
> 
> 时间：2013-04-14T13:47:47.267
> 
> 标签：html, css

我的 HTML 中的一个表设置存在问题。我有三个标题标题，由于某种原因，它们没有占据完整的 100% 宽度。但是，body 确实占据了 100% 的宽度。我不太确定发生了什么。我有另一张工作得很好的桌子。我附上了一张图片和表格的html代码。即使我删除了指定的宽度百分比，显示仍将与下图中的相同。任何帮助将非常感激！提前致谢！

```
<table id="timePreferenceTable" class="table-striped" cellpadding="0" cellspacing="0" border="0">
  <thead>
    <tr>
      <th width="34%">Start Time</th>
      <th width="34%">End Time</th>
      <th width="32%">Days</th>
    </tr>
  </thead>
  <tbody></tbody>
</table> 
```

![HTML-TABLE-TH-BUG](https://i.stack.imgur.com/CqNdR.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:56:00.523

试着`width="100%"`放在你的桌子上。我不确定你的课是做什么的。如果它没有将宽度设置为 100%，请执行此操作。

```
<table width="100%" id="timePreferenceTable" class="table-striped" cellpadding="0" cellspacing="0" border="0"> 
```

# java - 我可以继承“标准”数组列表迭代器吗？

> ID：15999765
> 
> 赞同：1
> 
> 时间：2013-04-14T13:47:59.567
> 
> 标签：java, arraylist, iterator, subclass

我需要迭代`ArrayList`除最后一个之外的所有元素。所以我想创建这样的迭代器。但是我没有实现整个迭代器，我只需要重写`hasNext()`方法，所以我想继承一个“标准”迭代器。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:58:49.893

我认为比覆盖默认迭代器更好的方法是自己迭代`ArrayList`。An`ArrayList`定义了几个方法可以帮助您完成任务：`get(int)`和`size()`.
您所要做的就是获取`ArrayList`(with `size()`) 中的元素总数，然后使用该`get()`方法在每次迭代中直接访问每个元素的元素循环。您的代码将如下所示：

```
 for(int i = 0; i < myList.size() - 1; i++){
       element = myList.get(i);
       //do something
    } 
```

现在牢记这一原则，您可以创建自己的类来迭代`ArrayList`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:33:31.707

修改迭代器以执行此遍历会很奇怪。显而易见的事情是根据需要编写“算法”：

```
public static <T> void eachExceptLast(List<? extends T> list, Operation<T> op) {
     Iterator<T> iter = list.iterator();
     if (!iter.hasNext()) {
         return;
     }
     T item = iter.next();
     while (iter.hasNext()) {
         op.run(item);
         item = iter.next();
     }
} 
```

（或使用假设`RandomAccess`列表的索引。）

但是，有一种更好的方法可以做到这一点。`list.subList(0, list.size()-1)`（对于非空列表）将返回原始列表减去最后一个元素的视图。它不做副本，你甚至可以使用`Iterator.remove`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T13:52:47.443

您可以创建一个实现[`Iterator`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html)或[`ListIterator`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ListIterator.html)接口的类，然后覆盖该[`hasNext()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html#hasNext%28%29)方法。

# javascript - 主干和下划线 - 模板化一个简单的视图

> ID：15999767
> 
> 赞同：1
> 
> 时间：2013-04-14T13:48:07.880
> 
> 标签：javascript, templates, dom, backbone.js, underscore.js

我对 Backbone 和下划线中的第一个模板化视图不太满意。

我从 Underscore 库中收到“未定义玩家错误”。

这是我的模型：

```
define([
    'domLib',
    'underscore',
    'backbone',
    'router'
    ],
    function($, _, Backbone, Router) {

        var PlayerModel = Backbone.Model.extend({
            defaults: {
                username: '',
                rank: 0,
                score: 0
            }
        });

        return PlayerModel;

}); 
```

这是我的收藏：

```
define([
    'domLib',
    'underscore',
    'backbone',
    'router',
    'model/player'
    ],
    function($, _, Backbone, Router, PlayerModel) {

        var LeaderboardCollection = Backbone.Collection.extend({
            model: PlayerModel,
            url: '/hyc-web/leaderBoard/topOverall?count=5'
        });

        return LeaderboardCollection;
}); 
```

相关视图：

```
define([
    'domLib',
    'underscore',
    'backbone',
    'router',
    'collection/leaderboard',
    'text!template/leaderboard.html'
    ],
    function($, _, Backbone, Router, LeaderboardCollection, LeaderboardTemplate) {

        var LeaderboardView = Backbone.View.extend({
            el: '#leaderboard',
            template: _.template(LeaderboardTemplate),
            initialize: function(){
                this.collection = new LeaderboardCollection();              
                this.collection.on('reset', this.render, this); 
                this.collection.fetch();                                        
            },
            render: function(){         
                console.log(this.collection.models);
                this.$el.html(this.template, {players: this.collection.models});
            }
        });

        return LeaderboardView;
}); 
```

和模板本身：

```
<table class="table table-bordered">
    <thead>                             
        <tr>
            <td>Rank</td>
            <td>Player</td>
            <td>Score</td>
        </tr>
    </thead>
    <tfoot>
        <!-- Logged in user details here -->
    </tfoot>
    <tbody>
        <% _.each(players, function(player){ %>
            <tr>
                <td><%= player.rank %></td>
                <td><%= player.username %></td>
                <td><%= player.highScore %></td>
            </tr>           
        <% }); %>                                   
    </tbody>
</table> 
```

一切都很顺利，直到我尝试连接到实际的数据服务层。我不明白为什么这不是模板化 JSON 数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:20:35.047

您可能希望您的渲染方法看起来更像：

```
render: function() {
  this.$el.html(this.template({ players: this.collection.toJSON() });
} 
```

您需要通过视图的 template() 函数而不是 jQuery html() 函数传递数据上下文。此外，您希望使用 collection.toJSON() 将集合转换为 JSON，而不是使用 collection.models 传入模型的原始数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:17:27.417

在文档中进行了一些挖掘之后，我想出了这个：

```
define([
    'domLib',
    'underscore',
    'backbone',
    'router',
    'collection/leaderboard',
    'text!template/leaderboard.html'
    ],
    function($, _, Backbone, Router, LeaderboardCollection, LeaderboardTemplate) {

        var LeaderboardView = Backbone.View.extend({
            el: '#leaderboard',
            template: _.template(LeaderboardTemplate),
            initialize: function(){
                var self = this;
                self.collection = new LeaderboardCollection();
                self.collection.fetch({
                    success: function(collection, response, options){
                        self.$el.html(self.template({ players: collection.toJSON()}));
                    }
                })              

            }
        });

        return LeaderboardView;
}); 
```

哪个渲染正确。由于 fetch 调用是异步的，我假设在 fetch 之后调用模板渲染并不能说明实际存在的数据。进一步的研究表明，这不是在页面加载时填充视图的方法，而是引导它

# c# - 如何在 ServiceStack 客户端中设置 ContentType？

> ID：15999769
> 
> 赞同：2
> 
> 时间：2013-04-14T13:48:21.950
> 
> 标签：c#, forms, ormlite-servicestack

我正在使用 ServiceStack 客户端调用 web 服务，如下所示：

```
var client = new JsonServiceClient(apiUrl);
var url = "/V1/MyApiCall";

var response = client.Post<MyApiCallResponse>(url, "foo=" + request.foo + "&bar=" + request.bar); 
```

这通常效果很好，但是我需要更改 Content-Type 标头。默认情况下（以及我从服务进行的大多数其他调用），这需要是`application/json`，但在这种特殊情况下，它需要是`application/x-www-form-urlencoded`。

`client.ContentType`没有实现 setter，那么如何更改 Content-Type 标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:53:41.860

不要使用[Servicestack 的 C# 客户端](https://github.com/ServiceStack/ServiceStack/wiki/C%23-client)调用 3rd 方 API。您正在使用一个 JSON 客户端，它按预期发送 JSON。如果您需要调用第 3 方 API，您可以使用[ServiceStack 的内置 HTTP Utils](https://github.com/ServiceStack/ServiceStack/wiki/Http-Utils)，查看[POSTing 数据示例](https://github.com/ServiceStack/ServiceStack/wiki/Http-Utils#posting-data)，例如：

```
var response = url.PostToUrl(new { foo = request.foo, bar = request.bar },
                   acceptContentType = "application/json")
    .FromJson<MyApiCallResponse>(); 
```

# java - Java 中的动态链接：验证器与解析器

> ID：15999771
> 
> 赞同：2
> 
> 时间：2013-04-14T13:48:37.127
> 
> 标签：java, jvm, bytecode

我正在尝试理解 Java 中的动态链接。阅读[http://slurp.doc.ic.ac.uk/pubs/observing/linking.html#resolution](http://slurp.doc.ic.ac.uk/pubs/observing/linking.html#resolution)

我不太明白字节码验证器和解析过程之间的区别。为什么验证者不执行解析执行的检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:05:12.483

解析过程必须由 JVM 完成，才能理解您正在加载的代码。如果它不解析引用，则 JVM 无法执行这些方法。（并且解决方案还检查签名和事物是否仍然匹配......以保护 JVM 免受堆损坏等由二进制不兼容问题引起的问题。）

相比之下，验证过程是关于检查字节码本身没有做错事。如果它们是由正确的编译器生成的，则不会发生这种情况，但如果字节码是由有缺陷的编译器、有缺陷的注​​入过程......或一些坏人欺骗字节码产生的，那么验证器会提供一道防线。

关键区别在于分辨率是必不可少的，但验证是（某种）可选的。事实上，将解析和验证分开意味着可以关闭验证。有一个命令行选项可以做到这一点。（关闭验证是否是个好主意......在正常情况下......非常值得怀疑，IMO。）

# magento - Magento CMS 页面作为类别登录页面

> ID：15999776
> 
> 赞同：1
> 
> 时间：2013-04-14T13:49:32.163
> 
> 标签：magento, content-management-system, categories

我在决定如何在 Magento 中实现我的类别/cms 页面结构时遇到问题。它的设计似乎过于死板，甚至到了向类别添加自定义字段的程度，我不得不访问 phpmyadmin 并手动破解它。

好的，所以考虑这个带有页面类型的基本站点地图。

```
Home                          CMS PAGE
    Shop                      Category
        Just In               Category      
        Clothes               Category
        Shoes                 Category
        Accessories           Category
        Sale                  Category 
```

所以 Home 将是一个 CMS 页面，没关系。Just In、衣服和所有其他 3 级类别将显示产品列表或网格。十分简单。

我的问题与商店有关。我需要它包含静态块或小部件（还看不出区别），以及其他元素，如每日特色产品、促销链接等。此页面不会显示产品列表/网格，这不是我需要的.

如果我创建一个名为 Shop 的 CMS 页面，那么面包屑导航、url 标题和一堆其他内容之间就会存在冲突。

我的问题是：如何创建一个名为“Shop”的类别并使其表现得像一个带有可管理小部件块的 CMS 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:29:48.733

在 下`Admin -> Catalog -> Manage Categories`，选择一个类别并转到`Display Settings`选项卡。更改并选择`Display Mode`要`Static Blocks Only`在该页面上显示的静态块。

另一种选择是使用 Wordpress 集成扩展。Fishpig 有一个可用于 Magento。

# html - 仅对其元素的悬停效果

> ID：15999778
> 
> 赞同：-1
> 
> 时间：2013-04-14T13:49:43.507
> 
> 标签：html, css

```
+----------------------+
|  +--------------+    |
|  +this is a link+    |
|  +--------------+    |
+----------------------+ 
```

如上图，我想创建一个链接，但只想给我的“这是一个链接”而不是这个框的间隔（填充值）提供悬停效果。

html

```
<a href="#">this is a link</a> 
```

css

```
a{display: block; width: 350px; padding: 10px; background: red; color: yellow;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:53:27.240

我建议你在链接周围有一个 div 并为 div 提供填充/边距。然后里面的链接可以点击，但 div 不会。如果您能够更改 html 代码（不仅限于 css），这可能是最简单的解决方案

html

```
<div class="awrapper"><a href="#">this is a link</a></div> 
```

css

```
.awrapper{display: block; width: 350px; padding: 10px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:11:36.700

您可以尝试使用`border`，不使用`padding`。

```
a {
    background: red; 
    display: block; 
    width: 350px;
    color: yellow;
    border: 10px solid red;
}

a:hover {
    border: 10px solid white;
} 
```

[http://jsfiddle.net/y86sV/3/](http://jsfiddle.net/y86sV/3/)

# c - 如何将字符串块转换为字符串数组

> ID：15999779
> 
> 赞同：1
> 
> 时间：2013-04-14T13:49:52.180
> 
> 标签：c, arrays, string

我有一个字符串块，比如“aaa\0bbbb\0ccccccc\0”，我想把它们变成一个字符串数组。我尝试使用以下代码这样做：

```
void parsePath(char* pathString){
  char *pathS = malloc(strlen(pathString));
  strcpy(pathS, pathString);
  printf(1,"33333\n");
  pathCount = 0;
  int i,charIndex;
  printf(1,"44444\n");
  for(i=0; i<strlen(pathString) ; i++){
      if(pathS[i]=='\0')
      {
       char* ith = malloc(charIndex);
       strcpy(ith,pathS+i-charIndex);
       printf(1,"parsed string %s\n",ith);
       exportPathList[pathCount] = ith;
       pathCount++;
       charIndex=0;
      }
      else{
        charIndex++;
      }
  }

  return;
} 
```

exportPathList 是前面代码中由 char* exportPathList[32] 定义的全局变量；使用该函数时 exportPathList[i] 包含垃圾。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:54:52.843

首先，由于您的字符串由空字符分隔`'\0'`，`strlen`因此只会报告字符串的大小，直到第一个`'\0'`. `strcpy`也将复制到第一个空字符。

此外，您无法知道输入字符串以该信息结尾的位置。您要么需要传递整个大小，要么例如以双空字符结束输入：

```
#include <stdio.h>
#include <string.h>
void parsePath(const char* pathString){
    char buf[256]; // some limit
    while (1) {
        strcpy(buf, pathString);
        pathString+=strlen(buf) + 1;
        if (strlen(buf) == 0)
            break;
        printf("%s\n", buf);
    }   
}

int main()
{
    const char *str = "aaa\0bbbb\0ccccccc\0\0";
    parsePath(str);
    return 0;
} 
```

你需要一些 realloc 来实际创建数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:01:10.400

这个SO问题的答案：

[将字符串解析为 argv/argc](https://stackoverflow.com/questions/1706551/parse-string-into-argv-argc/1706733#1706733)

处理类似的问题，你可以看看。

您需要知道有多少字符串或同意“字符串结尾”。最简单的方法是末尾有一个空字符串：

```
 aaa\0bbbb\0ccccccc\0\0
                     ^^ 
```

PS这是作业吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T17:10:47.583

我实现的解决方案确实是在字符串末尾添加双 '\0' 并使用它来计算字符串的数量。

我的新实现（路径是字符串的数量）：

```
void parsePath(char* pathString,int paths){
  int i=0;  
  while (i<paths) {
    exportPathList[i] = malloc(strlen(pathString)+1);
    strcpy(exportPathList[i], pathString);
    pathString+=strlen(pathString);
    i++;
    }  
} 
```

我要感谢所有做出贡献的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T14:17:59.427

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAXSIZE 16

char* exportPathList[MAXSIZE] = {0};
size_t pathCount = 0;

void parsePath(char* pathString){
    char *ptop, *pend;

    ptop=pend=pathString;
    while(*ptop){
        while(*pend)++pend;
        exportPathList[pathCount++]=strdup(ptop);
        pend=ptop=pend+1;
    }
}

int main(){
    char textBlock[]= "aaa\0bbbb\0ccccccc\0";
    //size_t size = sizeof(textBlock)/sizeof(char);
    int i;

    parsePath(textBlock);
    for(i=0;i<pathCount;++i)
        printf("%s\n", exportPathList[i]);

    return 0;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-25T14:00:54.427

我的实现看起来像这样->它在主要功能中遵循 argv 和 argc 的想法：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main(void){
    char **args = (char**)malloc(100*sizeof(char));
    char buff[100], input_string[100], letter;

    for(int i = 0; i < 100; i++){

        buff[i] = '\0';
        input_string[i] = '\0';
    }
    for(int i = 0; (letter = getchar())!='\n'; i++){
        input_string[i] = letter;
    }

    int args_num = 0;
    for(int i = 0, j = 0; i < 100;i++){

        if((input_string[i] == ' ')||(input_string[i]=='\0')){
            //reset j = 0
            j = 0;
            args[args_num] = malloc(strlen(buff+1));
            strcpy(args[args_num++],buff);
            for(int i = 0; i < 100; i++)buff[i] = '\0';
        }else buff[j++] = input_string[i];

    }    

    for(int i = 0; i < args_num; i++){
        printf("%s ",args[i]);
    }    
} 
```

-> 然后可以使用 args[i] 访问字符串中的每个单词

# javascript - 新创建的 DOM 元素在哪里？

> ID：15999782
> 
> 赞同：0
> 
> 时间：2013-04-14T13:50:16.610
> 
> 标签：javascript, dom

我想知道由以下人员新创建的DOM元素在哪里：

```
el = document.createElement("li") 
```

当我现在这样做时：

```
document.all 
```

我只看到文档的初始元素。`el`上面住哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T13:51:34.480

您创建的元素存储在`el`变量中，直到您附加它才会添加到实际文档中：

```
el = document.createElement("li")
document.getElementById('myUl').appendChild(el) 
```

这是一个简单的 jsFiddle 演示：http: [//jsfiddle.net/LdGjY/](http://jsfiddle.net/LdGjY/)

# android - OpenGL调试

> ID：15999784
> 
> 赞同：0
> 
> 时间：2013-04-14T13:50:20.923
> 
> 标签：android, opengl-es, opengl-es-1.1

当我为 Android 编写 OpenGL (1.0) 程序时，我发现调试我的程序并不容易。OpenGL只是处理顶点坐标的几个步骤的固定管道。有什么方法可以窥探管道连续步骤的结果是什么？

补充：疯狂科学家，感谢您的建议。但是，我尝试将 Tracer 用于 OpenGL ES（按照[http://developer.android.com/tools/help/gltracer.html](http://developer.android.com/tools/help/gltracer.html)的说明），但我仍然不确定如何找到我需要的信息。我可以看到滑块来选择一个框架，然后我可以看到一个调用的函数列表。当我选择其中一项功能时，我可以看到 GL 状态。但是当我（在这个 GL 状态中）查看上下文 0 -> 顶点数组数据 -> 通用顶点属性时，我能看到的所有坐标都是零。正常吗？我的主要希望是，在那些除了黑屏之外什么都看不到的情况下，我能够在矩阵乘法之前和之后看到顶点的坐标，这将帮助我找出为什么它们不可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:24:45.910

使用[适用于 Android 的 OpenGL Tracer](http://developer.android.com/tools/help/gltracer.html)，它是 Android SDK 的一部分。只需启动`Monitor`程序并跟踪您的应用程序。

我发现 Tracer 有点喜怒无常，它不适用于我的 Nexus 10，但如果它有效，它会提供很多信息。

# javascript - 将fancybox集成到galleriffic

> ID：15999786
> 
> 赞同：0
> 
> 时间：2013-04-14T13:50:52.107
> 
> 标签：javascript, jquery, fancybox, fancybox-2, galleriffic

我想将fancybox的一些功能集成到galleriffic中。基本上我想拥有一个使用galleriffic的带有各自缩略图的图像库。除了样式之外，我的方法看起来非常类似于： http: [//www.twospy.com/galleriffic/example-2.html](http://www.twospy.com/galleriffic/example-2.html) 此外，我希望能够放大显示的图像。为此，我正在使用fancybox。可以在此处找到其行为示例[http://fancyapps.com/fancybox/demo/](http://fancyapps.com/fancybox/demo/)

我已经设法使我上面描述的内容稍微修改了galleriffic buildImage 函数，如下所示：

```
.append('<span class="image-wrapper current"><a class="advance-link fancybox" rel="group" href="'+imageData.image.src+'" title="'+imageData.title+'">&nbsp;</a></span>') 
```

现在，galleriffic 添加了fancybox 类fancybox 需要以及图像源。这非常有效。

在这一点上，我发现了一个我似乎没有找到解决方案的问题。Fancybox 允许通过单击每个图像的右侧/左侧来导航图像集合，以转到集合中的下一个/上一个图像（正如您在上面提供的演示中可能已经注意到的那样）。我也想利用此功能，以便用户可以通过浏览galleriffic 的缩略图以及使用fancybox 的图像的缩放版本来浏览画廊。

我在这里发现的问题是，galleriffic 仅为已单击缩略图的图像创建一个 class="fancybox"。这使得fancybox 只能找到画廊的一张图片。我不想将类 fancybox 定义为为 Galleriffic 定义拇指的 's，因为我不希望在单击缩略图时缩放图像，而是在主图像上。

在某种程度上，我需要的是使用 fancybox 类生成所有的，但隐藏所有未显示的，而不是每次通过galleriffic 生成我需要的。这是我能想出的唯一解决方案，但它并不整洁。我喜欢galleriffic 在每次单击缩略图时如何处理生成主图像。

我想知道是否有人可以提出更好的解决方案。例如，fancybox 可以通过在下一个画廊缩略图中搜索来了解下一个图像。

我试图制作一个有效的 jsfiddle 演示，但涉及的代码太多。也没有明确的问题，而是实施的冲突。我认为您可以轻松复制我目前的情况。

感谢您的努力！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T19:32:52.830

我在上面尝试了你的方法，像你一样编辑 BuildImage 函数。对我来说，它成功链接到图像，但没有加载到 FancyBox。

我在主文件中有这段代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(".fancybox").fancybox();
    });
</script> 
```

你成功地将两者结合起来，对吗？

# java - Actions.moveTo 移动到错误的方向

> ID：15999787
> 
> 赞同：2
> 
> 时间：2013-04-14T13:50:54.690
> 
> 标签：java, android, libgdx

我的角色是一个演员，当我将它向左或向右移动时，我给了他一个 moveTo 动作，依此类推。
和确实工作正常`LEFT`。`UP`我可以看到，因为我的调试模式向我显示了 MapArray 中字符的当前位置。（绘制矩形的颜色）
如果我打电话给它`DOWN`，`RIGHT`它确实会走路`UP`，或者`LEFT`但我确信我的方向是正确的。如果我点击右，他会走上去，如果我点击下，他也会走上去！
我希望你能告诉我为什么他们走错了方向！

这是我将动作设置为演员的移动方法：

```
private void move(Status direction) {
    switch (direction) {
    case LEFT:
        this.clearActions();
        this.addAction(Actions.sequence(
                Actions.moveTo((getX() - Config.BLOCK_SIZE), getY(), speed),
                new RunnableAction() { //to know when hes done to get the next move
                    public void run() {
                        moveDone = true;
                    }
                }));
        break;
    case RIGHT:
        this.clearActions();
        this.addAction(Actions.sequence(
                Actions.moveTo((getX() + Config.BLOCK_SIZE), getY(), speed),
                new RunnableAction() {
                    public void run() {
                        moveDone = true;
                    }
                }));
    case DOWN:
        this.clearActions();
        this.addAction(Actions.sequence(
                Actions.moveTo(getX(), (getY() - Config.BLOCK_SIZE), speed),
                new RunnableAction() {
                    public void run() {
                        moveDone = true;
                    }
                }));
    case UP:
        this.clearActions();
        this.addAction(Actions.sequence(
                Actions.moveTo(getX(), (getY() + Config.BLOCK_SIZE), speed),
                new RunnableAction() {
                    public void run() {
                        moveDone = true;
                    }
                }));
    default:
        break;
    }
} 
```

这就是我所说的。我希望我发布更多“长”代码可以！它或多或少只是设置正确的位置。

```
 @Override
        public void act(float delta) {
            super.act(delta);
            if (moveDone) {
                if (screen.pad.isTouched()) {
                    // check in which direction is the touchcontroller
                    if (screen.pad.getKnobPercentX() < 0
                            && Math.abs(screen.pad.getKnobPercentY()) < Math
                                    .abs(screen.pad.getKnobPercentX())) {
                        // checkt if the |x|>|y|
                        if (checkNextMove(Status.LEFT)) {
                            this.status = Status.LEFT;
                            move(Status.LEFT);
                            this.screen.map.mapArray[(int) (this.mapPos.x)][(int) this.mapPos.y] = Config.EMPTYPOSITION;
                            this.screen.map.mapArray[(int) (this.mapPos.x - 1)][(int) this.mapPos.y] = Config.CHARSTATE;
                            this.mapPos.x--;
                            moveDone = false;
                        }
                    } else if (screen.pad.getKnobPercentX() > 0
                            && Math.abs(screen.pad.getKnobPercentY()) < Math
                                    .abs(screen.pad.getKnobPercentX())) {

                        if (checkNextMove(Status.RIGHT)) {
                            move(Status.RIGHT);
                                                    this.status = Status.RIGHT;
                            this.screen.map.mapArray[(int) (this.mapPos.x)][(int) this.mapPos.y] = Config.EMPTYPOSITION;
                            this.screen.map.mapArray[(int) (this.mapPos.x + 1)][(int) this.mapPos.y] = Config.CHARSTATE;
                            this.mapPos.x++;
                            moveDone = false;
                        }
                    } else if (screen.pad.getKnobPercentY() > 0) {
                        if (checkNextMove(Status.DOWN)) {
                            this.status = Status.DOWN;
                            move(Status.DOWN);
                            this.screen.map.mapArray[(int) (this.mapPos.x)][(int) this.mapPos.y] = Config.EMPTYPOSITION;
                            this.screen.map.mapArray[(int) (this.mapPos.x)][(int) this.mapPos.y + 1] = Config.CHARSTATE;
                            this.mapPos.y++;
                            moveDone = false;
                        }
                    } else {
                        if (checkNextMove(Status.UP)) {
                            this.status = Status.UP;
                            move(Status.UP);
                            this.screen.map.mapArray[(int) (this.mapPos.x)][(int) this.mapPos.y] = Config.EMPTYPOSITION;
                            this.screen.map.mapArray[(int) (this.mapPos.x)][(int) this.mapPos.y - 1] = Config.CHARSTATE;
                            this.mapPos.y--;
                            moveDone = false;
                        }
                    }
                } else {
                    setIdle();
                }
            } 
            // methode from the absctract to change sprites
            updateSprite(delta);
        } 
```

这是一张图片，如果我走对了，它的样子。他站在绿地的左边，现在在右边的地里。但图片不存在。
![正确的举动](https://i.stack.imgur.com/Uksph.jpg)

这里是char的绘制：

```
@Override
    public void draw(SpriteBatch batch, float parentAlpha) {
        sprite.setPosition(this.getX(), this.getY());
        sprite.draw(batch);
    } 
```

我真的不明白错误在哪里。希望你能帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T13:56:19.630

您忘记在 RIGHT、UP 和 DOWN 案例中添加中断..

```
private void move(Status direction) {
switch (direction) {
case LEFT:
    this.clearActions();
    this.addAction(Actions.sequence(
            Actions.moveTo((getX() - Config.BLOCK_SIZE), getY(), speed),
            new RunnableAction() { //to know when hes done to get the next move
                public void run() {
                    moveDone = true;
                }
            }));
    break;
case RIGHT:
    this.clearActions();
    this.addAction(Actions.sequence(
            Actions.moveTo((getX() + Config.BLOCK_SIZE), getY(), speed),
            new RunnableAction() {
                public void run() {
                    moveDone = true;
                }
            }));
     break;
case DOWN:
    this.clearActions();
    this.addAction(Actions.sequence(
            Actions.moveTo(getX(), (getY() - Config.BLOCK_SIZE), speed),
            new RunnableAction() {
                public void run() {
                    moveDone = true;
                }
            }));
     break;
case UP:
    this.clearActions();
    this.addAction(Actions.sequence(
            Actions.moveTo(getX(), (getY() + Config.BLOCK_SIZE), speed),
            new RunnableAction() {
                public void run() {
                    moveDone = true;
                }
            }));
     break;
default:
    break;
} 
```

}

# php - 数据库清理检查所有者

> ID：15999789
> 
> 赞同：1
> 
> 时间：2013-04-14T13:51:34.610
> 
> 标签：php, mysql

这是删除链接的代码：

```
<a href="picture_manager.php?do=delete&id=<?php print $picturedata['id']; ?>" >Delete</a> 
```

这是我当前的数据库语法：

```
if (array_key_exists('do', $_GET) && $_GET['do'] == "delete" && array_key_exists('id', $_GET))
{
    $pictureid = trim(sanitize($_GET['id']));

    if ($picture->delete($pictureid) === true)
    {
        header('Location: picture_manager.php?success=removed');
    }
} 
```

使用上面的代码，其他用户可以删除其他用户图片，例如 = picture_manager.php?do=delete&id=(victim)。

现在我找到了防止其他用户滥用的解决方案，我将旧语法更改如下：

这是我的新数据库语法：

```
if (!array_key_exists('id', $_GET) || $_GET['id'] == "" || $picture->pictureExists(trim(sanitize($_GET['id']))) === false || $picture->checkOwn($user->getUserID(trim(sanitize($_SESSION['key']))), trim(sanitize($_GET['id']))) === false)
{
    header('Location: picture_manager.php');
}
else    
{
    $pictureid = trim(sanitize($_GET['id']));

    if ($picture->delete($pictureid) === true)
    {
        header('Location: picture_manager.php?success=removed');
    }
} 
```

可悲的是，它没有工作“页面没有正确重定向 - 说Firefox浏览器”

马上找高手。

我在下面的答案中找到了解决方案。

**现在编辑**：当我编码如下时，这对我来说很难：

```
if (isset($_GET['do']) && $_GET['do'] == 'delete' && (!array_key_exists('id', $_GET) || $_GET['id'] == "" || $picture->pictureExists(trim(sanitize($_GET['id']))) === false || $picture->checkOwn($user->getUserID(trim(sanitize($_SESSION['key']))), trim(sanitize($_GET['id']))) === false))
{
    header('Location: picture_manager.php');
}
else    
{
    $pictureid = trim(sanitize($_GET['id']));

    if ($picture->delete($pictureid) === true)
    {
        header('Location: picture_manager.php?success=removed');
    }
} 
```

当我点击 ie picture_manager.php?do=delete&id=6125 时文件没有被删除

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:20:46.483

无限重定向， !array_key_exists('id', $_GET) 将始终进行。您需要将 ?do=delete 添加到验证中，例如

```
<?php if (isset($_GET['do']) && $_GET['do'] == 'delete' && (!array_key_exists('id', $_GET) || $_GET['id'] == "" || $picture->pictureExists(trim(sanitize($_GET['id']))) === false || $picture->checkOwn($user->getUserID(trim(sanitize($_SESSION['key']))), trim(sanitize($_GET['id']))) === false)) 
```

# java - jsp提交时找不到页面

> ID：15999790
> 
> 赞同：3
> 
> 时间：2013-04-14T13:51:34.670
> 
> 标签：java, jsp, servlets, web.xml, url-mapping

这是我的 test.jsp 放在 webcontent/jsp/

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<form action="employee.do" method="get">
<input type="text" name="name1">
<input type="submit" name="add employee" />
</form>
</body>
</html> 
```

现在这里是 servlet 映射`web.xml`

```
 <servlet>
    <servlet-name>EmployeeServlet</servlet-name>
    <servlet-class>com.controller.EmployeeServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>EmployeeServlet</servlet-name>
    <url-pattern>/employee.do</url-pattern>
  </servlet-mapping>
  <servlet> 
```

现在，当我将此表单提交给我的员工时，服务器会说`page not found`。我不知道为什么会这样？我使用的是tomcat
**服务器**很好并提交表单。为什么它没有在`jsp`文件夹下提交表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:58:06.900

将 jsp 文件直接保存在 web-content 下或将 url 映射更改为 /jsp/employee.do 。

# jquery - jQuery 标题文本方向 - firefox

> ID：15999794
> 
> 赞同：0
> 
> 时间：2013-04-14T13:51:47.483
> 
> 标签：jquery, google-chrome, firefox, jquery-ui-accordion

我在我的 css 中旋转到“垂直”的 jquery 手风琴中有一个标题。这适用于 Chrome，但不适用于 Firefox 或 Internet Explorer？

我尝试添加'！important'，但它仍然不会显示旋转？

```
#contentAccordion{
     margin:0 auto;
     height:500px;
     width: 100%;

}

ul.accordion{
    list-style:none;   
    position:absolute;
    left: 1px;
    top:0px;
    font-family: Cambria, serif;
    font-size: 16px;
    font-style: italic;
    line-height: 1.5em;
    width: 100%;

}
ul.accordion li{
    float:right;
    width:115px;
    height:380px;
    display:block;
    border-right:2px solid #fff;
    border-bottom:2px solid #fff;
    background-color:#fff;
    background-repeat:no-repeat;
    background-position:center center;
    position:relative;
    overflow:hidden;
    cursor:pointer;
    -moz-box-shadow:1px 3px 15px #555;
    -webkit-box-shadow:1px 3px 15px #555;
    box-shadow:1px 3px 15px #555;
}
ul.accordion li.bg1{
    background-image:url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/air.jpg);
}
ul.accordion li.bg2{
    background-image:url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/2.jpg);
}
ul.accordion li.bg3{
    background-image:url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/3.jpg);
}
ul.accordion li.bg4{
    background-image:url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/4.jpg);
}
ul.accordion li.bg5{
    background-image:url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/air.jpg);
}

ul.accordion li.bleft{
    border-left:2px solid #fff;
}
ul.accordion li .heading {
background-color: rgba(245, 240, 240, 0.65);
padding: 10px;
margin-top: 250px;
opacity: 0.6;
text-transform: uppercase;
font-style: normal;
font-weight: bold;
letter-spacing: 10px;
font-size: 25px;
color: rgb(12, 11, 11);
text-align: center;
text-shadow: -1px -1px 1px #ccc;
-webkit-transform: translatey(-100%) rotate(-90deg);
line-height: 80px;
height: 80px;
width: 280px;
margin-left: -100px;

}
ul.accordion li .description{
    position:absolute;
    width:260px;
    height:175px;
    bottom:0px;
    left:0px;
    display:none;
}
ul.accordion li .description h2{
    text-transform:uppercase;
    font-style:normal;
    font-weight:bold;
    letter-spacing:1px;
    font-size:45px;
    color:#444;
    text-align:left;
    margin:0px 0px 15px 20px;
    text-shadow:-1px -1px 1px #ccc;
}
ul.accordion li .description p{
    line-height:14px;
    margin:10px 22px;
    font-family: "Trebuchet MS", sans-serif;
    font-size: 12px;
    font-style: italic;
    font-weight: normal;
    text-transform: none;
    letter-spacing: normal;
    line-height: 1.6em;
}
ul.accordion li .description a{
    position:absolute;
    bottom:5px;
    left:20px;
    text-transform:uppercase;
    font-style:normal;
    font-size:11px;
    text-decoration:none;
    color:#888;
}
ul.accordion li .description a:hover{
    color:#333;
    text-decoration:underline;
}

ul.accordion li .bgDescription{
    background:transparent url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/bgDescription.png) repeat-x top left;
    height:340px;
    position:absolute;
    bottom:0px;
    left:0px;
    width:260px;
    display:none;
}

/* Vertical Accordion Style */

.container {
        width:100% !important;
        position:relative;
        margin:40px auto 0 auto;
        top: -17px;
        left: 0px;
}

.va-wrapper{
    width:100%;
    height:100%;
    position:absolute;
    overflow:hidden;
    background:#000;
        left: 0px;
}
.va-slice{
    cursor:pointer;
    position:absolute;
    width:100%;
    left:0px;
    overflow:hidden;
}
.va-slice-1{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/Airfreight10.png) no-repeat center center;
}
.va-slice-2{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/Seafreight2.png) no-repeat center center;
}
.va-slice-3{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/Satellite.png) no-repeat center center;
}
.va-slice-4{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/Guarding11.png) no-repeat center center;
}
.va-slice-5{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/Move3.png) no-repeat center center;
}
.va-slice-6{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/Investigations2.png) no-repeat center center;
}
.va-slice-7{
    background:#000 url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/transport2.png) no-repeat center center;
}
.va-slice-color-1{
    background-color:#97c5eb;
}
.va-slice-color-2{
    background-color:#68ace5;
}
.va-slice-color-3{
    background-color:#0072cf;
}
.va-slice-color-4{
    background-color:#0039a6;
}
.va-slice-color-5{
    background-color:#00338e;
}
.va-slice-color-6{
    background-color:#002c76;
}
.va-slice-color-7{
    background-color:#002144;
}
.va-title{
    font-family: 'Open Sans Condensed', sans-serif;
    text-transform:uppercase;
    font-size:40px;
    margin-left:20px;
    color:#fff;
    text-shadow: 0px 0px 1px white;
}
.va-content{
    display:none;
    margin-left:25px;

}
.va-slice p{
    font-size: 22px;
    font-style: italic;
    font-family:Georgia, serif;
}
.va-slice ul{
    margin-top:20px;
}
.va-slice ul li{
    float:left;
    margin:0px 2px;
}
.va-slice ul li a{
    color:#000;
    background:#eede2f;
    padding:3px 6px;
    font-size:14px;
    font-family:'PT Sans', sans-serif;
    text-transform:uppercase;
}
.va-slice ul li a:hover{
    background:#000;
    color:#fff;
    text-shadow:none;
}
.va-nav span{
    width:40px;
    height:25px;
    background:transparent url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/prev.png) no-repeat center center;
    position:absolute;
    top:-35px;
    left:50%;
    margin-left:-20px;
    text-indent:-9000px;
    opacity:0.7;
    cursor:pointer;

    z-index:100;
}
.va-nav span.va-nav-next{
    background-image:url(http://www.fsi.lookinside.co.za/wp-content/uploads/2013/04/next.png);
    top:auto;
    bottom:-35px;
}
.va-nav span:hover{
    opacity:1.0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:03:26.257

你只用`-webkit-transform: translatey(-100%) rotate(-90deg);`

您忘记了其他供应商前缀：`-moz-`对于 firefox、`-ms-`对于 IE 等...

如果您想知道哪些浏览器支持某个属性：[http](http://caniuse.com/#search=transform) : //caniuse.com/#search=transform 显然，您不需要该属性的 -moz- 前缀，Firefox 已经实现了它。

最佳实践：始终在底部定义没有供应商前缀的规则：

```
-webkit-transform: translatey(-100%) rotate(-90deg);
transform: translatey(-100%) rotate(-90deg); 
```

这样，即使浏览器删除了它的前缀支持，它仍然可以在未来工作。

# r - 我可以将某些位指定为 R 中的整数吗？

> ID：15999797
> 
> 赞同：5
> 
> 时间：2013-04-14T13:52:12.437
> 
> 标签：r

我有一堆数字要加载到 R 中以进行进一步分析。数字很​​小，<128。但是有4G这样的数字。我想将它们加载到向量中。我可以将某些位指定为 R 中的整数以减少内存使用吗？分解数据是唯一的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T17:22:47.113

[ff CRAN 包](http://cran.r-project.org/web/packages/ff/)允许您创建具有 2、4、8、16 和 32 位整数（有符号或无符号）的向量。

# c - 检查数组的第一个元素是否是C中的数字

> ID：15999799
> 
> 赞同：-1
> 
> 时间：2013-04-14T13:52:15.610
> 
> 标签：c, arrays, string

我正在制作一个程序来获取数据列表并用文件中的“，”分隔。但是，有些项目有多个逗号。

是否有任何*有效*的方法来检查数组的第一个字符？例如：

```
char *array = {'1','A','C','D','5'}; 
```

现在，我只想以数字开头，`somefunction(array)`即使`array`它是 char 格式。所以在这个例子中，让我们`somemethod`判断第一个元素是否为整数：

```
char *array = {'1','A','C','D','5'};
if( somemethod ) someaction(array); 
```

我怎样才能有效地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:55:35.753

数组的第一个元素是`array[0]`这样的

```
if (isdigit(array[0])) someaction(array); 
```

就是你要找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T13:55:45.077

`isdigit`from的标准函数`<ctype.h>`也可能很有效：

```
#include <ctype.h>

if (isdigit((unsigned char)array[0])) someaction(array); 
```

您也可以定义自己的，只需进行两次比较：

```
#if (!defined __STDC_VERSION__) || (__STDC_VERSION__ < 199901L)
# undef inline
# undef bool
# define inline 
# define bool int
#endif

inline bool somemethod(const unsigned char c) { return c >= '0' && c <= '9'; } 
```

但是，在这里考虑性能看起来像是[过早的优化](http://en.wikiquote.org/wiki/Donald_Knuth#Computer_Programming_as_an_Art_.281974.29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T13:55:45.703

不确定您对效率驱动的了解是什么，但有一种非常简单的方法可以做到这一点：

```
_Bool doesBeginWithNumber( char *input ) {
    return input[0] >= '0' && input[0] <= '9';
} 
```

它检查第一个字符的 ASCII 值。如果它介于 0 和 9 之间，则它是一个数字。

另一种方法是使用查找表，如果您有更复杂的检查，它可能会更有效（但对于数字它可能更慢 - 找出基准！）：

```
_Bool doesBeginWithNumber( char *input ) {
    const static _Bool cases[256] = {
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
    }
    return cases[(unsigned char) input];
} 
```

正如其他人指出的那样，另一种选择是旧的标准化`isdigit`：

```
_Bool doesBeginWithNumber( char *input ) {
    return isdigit( input[0] );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T13:56:00.960

参考[`isdigit`](http://www.cplusplus.com/reference/cctype/isdigit/)页面已经包含一个工作示例，它基本上可以满足您的需求。

# c++ - 使用 SWIG 将 C++ 转换为 Python - 导入 pyd 库后程序停止工作

> ID：15999802
> 
> 赞同：2
> 
> 时间：2013-04-14T13:52:36.040
> 
> 标签：c++, python, runtime-error, swig

早上好，有人可以帮助我.. 我很绝望。

我创建了一个将 C++ 类迁移到 python 的基本示例。我已经成功地从 C++ -> JAVA 转换，但现在我需要它在 Python 中。我在 Windows 8 上的 Visual Studio 2010 中执行此操作（并且也在 Windows 7 32 位上尝试过）。一切正常，生成了.py，也生成了.pyd，但是当我运行python程序时它崩溃了。它写程序停止工作（经典的windows窗口）。我发现它在库加载时就崩溃了。就是这一行：

```
_mod = imp.load_module('_KatanaWrapper', fp, pathname, description) 
```

但是整个文件是从 SWIG 生成的，所以我不认为有什么问题。一定是 SWIG 的问题？有人知道吗？

我以与此处[描述类似的方式进行操作](https://stackoverflow.com/a/6117641/2279689)

编辑 2x：这是我的 C++ 代码。没关系...它非常简单，并且可以在 C++ 中运行。

测试.h

```
#pragma once

class Test
{
   public:
     Test(void);
     ~Test(void);
     int mySum(int first, int second);
}; 
```

测试.c

```
#include "Test.h"
Test::Test(void)
{
}

int Test::mySum(int first,int second) {
return first + second;
}
Test::~Test(void)
{
} 
```

编辑：这是我的界面文件（没什么特别的）：

```
/* File : translate.i */
%module KatanaWrapper

%{
/* Includes the header in the wrapper code */
#include "Test.h"
%}

/* Parse the header file to generate wrappers */
%include "Test.h" 
```

和这个命令行：

```
$(SolutionDir)\..\swig\swig.exe -c++ -python %(FullPath) 
```

编辑：有趣的是，当我将此命令更改为

```
$(SolutionDir)\..\swig\swig.exe -c++ -java %(FullPath) 
```

我必须写入生成的类包（包 testapplication;）但它仍然不起作用（java崩溃）但是当我像这样更改命令时：

```
$(SolutionDir)\..\swig\swig.exe -c++ -java -package testapplication %(FullPath) 
```

有用！Python中有类似的东西吗？可以帮忙吗？

这是 VS 生成的编译器选项。有点混乱，也包含 Java（用于 Java 迁移）

```
 /I"C:\Program Files (x86)\Java\jdk1.7.0_17\include\win32" /I"C:\Program Files (x86)\Java\jdk1.7.0_17\include" /I"C:\Python27\include" /I"C:\Python33\include" /Zi /nologo /W3 /WX- /O2 /Oi /Oy- /GL /D "WIN32" /D "NDEBUG" /D "_WINDOWS" /D "_USRDLL" /D "KATANAWRAPPER_EXPORTS" /D "_WINDLL" /D "_UNICODE" /D "UNICODE" /Gm- /EHsc /GS /Gy /fp:precise /Zc:wchar_t /Zc:forScope /Fp"Release\_KatanaWrapper.pch" /Fa"Release\" /Fo"Release\" /Fd"Release\vc100.pdb" /Gd /analyze- /errorReport:queue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:07:26.667

- - - - - - 解决了 - - - - - -

嗯，我发现了我的问题。我将 python lib 文件夹包含在 Linker -> Input -> Aditional Dependences 中，使用这种语法（必要*的 .*）：

```
C:\Python33\libs\*.* 
```

当我使用以下语法将其放入 VC++ 目录 -> 库目录时：

```
C:\Python33\libs 
```

它突然起作用。我不明白差异，但它有效而且很重要。抱歉大惊小怪。

# asterisk - 星号来电 CID 重写

> ID：15999809
> 
> 赞同：2
> 
> 时间：2013-04-14T13:53:13.967
> 
> 标签：asterisk

我为基于德语的 SIP 帐户设置了以下规则（想法是在通过此中继线的所有号码上添加 0049 并去除第一个 0，以便我可以使用地址簿中的 0049 呼叫规则和号码匹配进行回拨好多了。

这是我应用的规则

```
exten=s,1,NoOp(${CALLERID(num)})
exten=s,2,ExecIf($[ "${CALLERID(num)}"="" ],Set,CALLERID(all)=unknown <0000000>)
exten=s,3,ExecIf($["${CALLERID(NUM):0:1}" = "0"],Set(CALLERID(num)=0049${CALLERID(num):1}))
exten=s,4,Goto(ringroups-office-1|s|1) 
```

但是打进来的电话缺少“00”并且只显示 49xxxxxx 知道那可能是什么吗？

很难猜：这是我错过的愚蠢的东西：P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:13:51.700

尝试这个：

```
exten=s,3,ExecIf($["${CALLERID(NUM):0:1}" = "0"],Set(CALLERID(num)="0049${CALLERID(num):1}")) 
```

# wordpress - 在主页上显示特定页面的内容和标题

> ID：15999817
> 
> 赞同：1
> 
> 时间：2013-04-14T13:54:01.913
> 
> 标签：wordpress, codex

我希望特定页面的标题和内容显示在我的主页和页脚区域中。

它会是这样的。

> 这是页面的标题
> 
> 这是页面的内容，等等……等等等等。
> 
> ```
>  readmore... 
> ```

我知道页面帖子中没有摘录。但我想限制将在页脚区域显示的内容的字符。

你能给我一个代码/链接/教程来告诉我如何做到这一点吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:25:26.513

首先，页面帖子中有摘录。只需在**Screen Options**中设置它。

关于代码试试这个我在我的项目中使用的代码。

它将显示这些页面的摘录，这些页面具有名为**showOnHomePage**的自定义字段，并且该字段的值决定了列表中的顺序。

```
 $pages=get_posts( array( 'meta_key' => 'showOnHomePage', 'post_type' => 'page', 'orderby' => 'meta_value', 'order' => 'ASC'));

  foreach( $pages as $page ) 
  {
    echo '<h2 class="entry-title"><a href="'.get_permalink( $page->ID ).'" >'.get_the_title( $page->ID ).'</a></h2>';
    echo $page->post_excerpt;
    echo '<a class="read-more" href="'. get_permalink( $page->ID ) . '">Read More</a>';
  } 
```

# r - 如何在 ada 中使用自定义分类器？

> ID：15999820
> 
> 赞同：1
> 
> 时间：2013-04-14T13:54:30.940
> 
> 标签：r, adaboost

我正在使用包`ada`中的 adaboost 来拟合模型。在我对 adaboost 的理解中，它结合了多个分类器以获得更好的结果。但是在函数`ada`中，我找不到用于此目的的参数。那么使用什么分类`ada`器呢？我怎样才能将我的分类器传递给`ada`? 谢谢你。

# android - 识别片段所在页面的代码？

> ID：15999821
> 
> 赞同：-1
> 
> 时间：2013-04-14T13:54:32.853
> 
> 标签：android, android-fragments, viewpagerindicator

您好，我正在尝试找到能够识别我当前所在页面的代码，以及我是否在某个页面上，我希望某些事情发生。我需要将所有这些代码放在我的每个片段活动中，因为我想在用户滑动这些片段时更改操作栏的标题，因此我需要一个可以执行此类功能的代码。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T01:32:28.247

如果您希望片段在显示时更改操作栏的标题，您可以在片段的 onViewCreated 方法中执行此操作。

```
 @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        FragmentActivity activity = getActivity();
        activity.setTitle(R.string.my_desired_title);
        /* You can also do this
         * activity.getActionbar().setTitle("myTitle");
         */
    } 
```

# android - 使用 libgdx 获取 GPS 位置

> ID：15999823
> 
> 赞同：2
> 
> 时间：2013-04-14T13:54:34.340
> 
> 标签：android, gps, libgdx

我想在玩游戏（libgdx）时获得用户的 gps 位置。我找到了[这个](http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/)为安卓手机创建 GPSTracker 的教程。我的问题是，这是为 Android 活动/任务编写的，而不是为 libgdx 编写的。没有 libgdx 它可以完美地工作，但我不知道如何将它与 libgdx 一起使用，并且[没有任何机会](http://www.badlogicgames.com/wordpress/?p=1832)将 gps 与 libgdx 一起使用。

有人知道是否可以通过 libgdx 使用 GPS 以及如何使用？这将是非常好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:45:25.330

您可以`GPSTracker`从 Android 项目包装器创建您的并将其传递给`Game`实例。

这就是我所做的测试。-

```
GPSTracker gps = new GPSTracker(MainActivity.this);
MyGame game = new MyGame(gps.getLatitude(),  gps.getLongitude()); 
```

`GPSTracker`很好地返回了我当前的坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:22:13.873

您可以从 Applicaion 对象获取上下文对象（看这个：[Static way to get 'Context' on Android?](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android)），然后使用连接构造 GPSTracker 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T02:16:31.103

要将上下文传递给 GPSTracker，请在您的 AndroidLauncher.java 中使用“getApplicationContext()”在 onCreate 方法中尝试

```
AndroidLauncher.context = getApplicationContext();
this.gps = new GPSTracker(this.context);

AndroidApplicationConfiguration config = new AndroidApplicationConfiguration();
        initialize(new MyGdxGame(gps.getLatitude(),  gps.getLongitude()), config); 
```

# mysql - mysql表可以包含表特定的元数据标志吗

> ID：15999825
> 
> 赞同：0
> 
> 时间：2013-04-14T13:54:43.857
> 
> 标签：mysql

我有一个 cronjob 循环并逐行更新 MySQL 表。表“完成”后，我想再执行 1 次 cronjob，以执行各种清理活动。

在只[执行一次 cronjob 中](https://stackoverflow.com/questions/15992102/execute-a-cronjob-exactly-once?noredirect=1#comment22801829_15992102)，thaJeztah 指出：

> 最好在mysql 数据库中设置该值，例如needs_cleanup = 1。这样您以后总能找到这些记录。将其保存在数据库中可以恢复，例如，如果 cron 作业未执行或在循环中途失败。– 塔杰斯塔

如果可能的话，我认为这将是一个很好的解决方案，因为在我的情况下，我只需要每天设置一次标志。如果有可能有人可以将我指向 sql 命令 nescesary 来执行一个简单的二进制标志的放置，在 mysql 表中值为 0,1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:05:53.160

```
UPDATE mytable SET needs_cleanup = 1 
```

对 mytable 的所有记录执行此操作。如果您需要单个记录，请添加 WHERE 条件，例如

```
UPDATE mytable SET needs_cleanup = 1
WHERE id = 1 
```

# mysql - MYSQL #1005 - 无法创建表 (errno: 150)

> ID：15999826
> 
> 赞同：1
> 
> 时间：2013-04-14T13:54:44.277
> 
> 标签：mysql

```
CREATE TABLE IF NOT EXISTS `userinit` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `usn` varchar(20) NOT NULL,
  `pwd` varchar(20) NOT NULL,
  `cmnd` int(9) NOT NULL,
  `dienthoai` varchar(11) NOT NULL,
  PRIMARY KEY (`id`,`usn`,`cmnd`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ; 
```

这是我在 mysql 中创建的第一个表，然后我进行查询以创建我的第二个表 userinfo，如下

```
create table userinfo(
    cmnd int(9) primary key not null,
        ngaycapcmnd date,
        noicap varchar(50) character set utf8,
        hoten varchar(50) character set utf8 not null,
        ngaysinh date not null,
        quequan varchar(50) character set utf8,
        diachi varchar(100) character set utf8 not null,
        email varchar(100) unique not null,
        constraint fk_userinfo_userinit foreign key (cmnd) references userinit(cmnd)
) 
```

然后当我按 OK 时显示：#1005 - 无法创建表 'xbook.userinfo'（错误号：150）。我使用最新的xampp。你们能帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:59:42.327

这是因为您引用的列没有单独的键，*尽管它是复合键的一部分*。

尝试`KEY`在其中添加一个，例如

```
CREATE TABLE IF NOT EXISTS `userinit` 
(
  ......
  KEY (cmnd),         -- <<=== HERE
  PRIMARY KEY (`id`,`usn`,`cmnd`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!9/9f642)

# ios - iOS：如何访问固定单元格的 textLabel 和 detailTextLabe？

> ID：15999829
> 
> 赞同：0
> 
> 时间：2013-04-14T13:55:18.843
> 
> 标签：ios, tableview, fixed

我有一个带有固定单元格的表格视图。我对 tableview 控制器进行了子类化，并为所有单元格制作了 IBOutlets。textlabel 就像每个单元格的标题。detailTextLabel 应填充某些数据库值，然后由用户更改。但是，如果我尝试默认条目，它将不起作用：

```
self.mainCategoryName.detailTextLabel.text = self.category.name; 
```

顺便说一句：我如何实际启用用户进入详细信息字段？类似于 iPhone 上的联系人应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:53:43.627

在 Interface Builder 中设置静态`Style`单元格`Subtitle`到`Table View Cell`.`Attributes Inspector`

# jqgrid - 在 JQGrid 中验证已编辑的数据

> ID：15999841
> 
> 赞同：0
> 
> 时间：2013-04-14T13:55:48.660
> 
> 标签：jqgrid, validation

我有一个可编辑的 JQGrid（使用事件进行内联编辑）。我想验证编辑过的数据。我尝试了以下但没有奏效。它将数据提交到服务器并返回错误。

**方法一：** editRules:{number:true}

**Method2** { name: 'Projection', index: 'Projection', width: 45, editable: true, edittype: 'text', editRules: { custom: true, custom_func: ValidateCell} },

我也尝试设置 edittype = custom 但我不明白为什么需要它。我只需要阻止用户输入除数字以外的任何内容

谢谢， 阿夏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:45:51.940

这很尴尬！！

我把editrules写成editRules！！！

现在都在工作！

# javascript - 如何通过在for循环中追加将多个元素插入一个元素？

> ID：15999847
> 
> 赞同：5
> 
> 时间：2013-04-14T13:56:17.307
> 
> 标签：javascript, jquery, append

我很困惑为什么当我尝试在 for 循环中附加多个元素时只插入最后一个元素。

我创建了一个[JsFiddle 来](http://jsfiddle.net/k0pernikus/U9swZ/)展示我无法让它工作。我希望插入 100 个锚标记，但只插入最后一个元素。

* * *

为了后面的缘故，这里是相关的 JavaScript，TODO 标记了相关部分：

```
Math.randomNumber = function(max) {
    return Math.round(Math.random() * max % max);
}

var Door = {
    $el: $('<a>', {
        class: 'door selectable'
    }),
    number: null,
    isSelected: false,
    containsZonk: true,
    bind: function () {
        var that = this;
        this.$el.on('click tap', function () {
            that.isSelected = true
        });
    }
}

var Platform = {
    $el: null,
    doorCount: null,
    jackpotNumber: null,
    doors: [],
    init: function($el, doorCount) {
        this.$el = $el;
        this.doorCount = doorCount;

        for (var i = 0; i <= doorCount - 1; i++) {
            var door = Object.create(Door);
            door.number = i;
            door.$el.html(i.toString());
            this.doors.push(door);

            /* TODO: wtf why is only last one inserted? */
            this.$el.append(door.$el);
        }

        this.jackpotNumber = Math.randomNumber(doorCount);
        this.doors[this.jackpotNumber].containsZonk = false;
    }
}
    $(document).ready(function(){
        var platform = Object.create(Platform);
        var $game = $('.door_game');
        platform.init($game, 100);
    }); 
```

我想将所有 100 个元素插入`div.door_game`：

```
<body>
    <h1>Zonk!</h1>
        <div class="door_game" data-doors="10">
        </div>
</body> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T14:05:28.917

这是因为你所有的门都共享同一个`$el`。

[http://jsfiddle.net/U9swZ/9/](http://jsfiddle.net/U9swZ/9/)

```
var Door = {
    number: null,
    isSelected: false,
    containsZonk: true,
    bind: function () {
        var that = this;
        this.$el.on('click tap', function () {
            that.isSelected = true
        });
    },
    init: function () {
        this.$el = $('<a>', {
            class: 'door selectable'
        });
        return this;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T14:20:41.087

Door $el 被创建一次，这就是为什么它被追加并再次追加（即一次又一次地移动），因此您只能看到最后一个。@plalx 是对的。

此外，由于您附加了数百个门，因此非常重要，`var frag = document.createDocumentFragment()`在循环之前使用 documentFragment ( ) 来收集您的门 ( `frag.appendChild(...)`) 并在循环 ( ) 之后将此 documentFragment 附加到 Platform $el `this.$el.appendChild(frag)`。对于如此数量的元素，性能增益非常重要。

而且，不要犹豫，克隆一个元素而不是重建它。它要快得多。您甚至可以使用 DOM API`cloneNode(false)`方法对原始元素进行非深度复制。

# php - php 使用运行时创建的文件发送电子邮件

> ID：15999848
> 
> 赞同：1
> 
> 时间：2013-04-14T13:56:18.913
> 
> 标签：php, email, attached-properties

我必须在 xlsx 和 pdf 中创建文件，并希望以电子邮件附件形式发送（不想保存在任何地方）。我知道如何附加保存的文件并通过电子邮件发送。我怎样才能不保存直接发送它。这是我尝试过的

```
$attachment = @chunk_split(base64_encode(file_get_contents($path)));
 $message .= "--PHP-mixed-$random_hash\r\n"
  ."Content-Type: application/doc; name=\"$file\"\r\n"
  ."Content-Type: application/pdf; name=\"$file\"\r\n"
  ."Content-Type: application/docx; name=\"$file\"\r\n"
  ."Content-Transfer-Encoding: base64\r\n"
  ."Content-Disposition: attachment\r\n\r\n";
  $message .= $attachment;
  $message .= "/r/n--PHP-mixed-$random_hash--";

  //send the email
 $mail = mail( $to, $subject , $message, $headers ); 
```

现在我没有 $path，我在同一个文件上生成内容..如何发送它而不保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:08:27.567

如果您只想对一些未存储在文件中的数据进行 base64 编码，您可以这样做（`$data`您生成的文件在哪里）：

```
$attachment = @chunk_split(base64_encode($data)); 
```

# .htaccess - 从 url 中的 path twig 函数中删除 web 目录的正确方法

> ID：15999853
> 
> 赞同：2
> 
> 时间：2013-04-14T13:56:28.273
> 
> 标签：.htaccess, symfony, twig

我正在尝试在远程服务器上安装我的本地 symfony 应用程序。该应用程序当前安装在公共目录中。所以我可以访问我的应用程序`www.mysite.com/public/web`

为了摆脱这`public/web`部分，我`.htaccess`在服务器根目录中创建了一个：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^site.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.mysite.com$
RewriteCond %{REQUEST_URI} !public/web/
RewriteRule (.*) /public/web/$1 [L] 
```

现在，我可以访问`www.mysite.com`并且它工作正常！但是，所有链接和资产都保留了该`public/web`部分。

它有效，但我想删除这部分。

`twig`可能有一个带有 和功能`path`的配置`asset`，但我找不到。任何想法 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:24:20.373

更改您的文档根目录。

我的虚拟主机配置看起来像这样

```
<VirtualHost *:80>
  ServerName mysite.com
  DocumentRoot /full/path/to/public/web/symfony-project/web
  DirectoryIndex app.php
</VirtualHost> 
```

# java - Spring neo4j 使用存储库时无法按值查找属性

> ID：15999854
> 
> 赞同：1
> 
> 时间：2013-04-14T13:56:34.183
> 
> 标签：java, spring, neo4j

给定以下实体：

```
@NodeEntity  
public final class Foo  
{    
        @GraphId
    private Long id;
    @Indexed
    private String name;
} 
```

存储库：

```
public interface FooRepository extends GraphRepository<Foo> {} 
```

服务：

```
@Service  
public class FooService  
{  
     @Autowired  FooRepository fooRepo;  
     public List<Foo> searchFor() {  
        EndResult<Foo> results = fooRepo.findAllByPropertyValue("name","*");  
                results.size();       //no results  
     }  

} 
```

我依赖于 中的函数，`IndexRepository`因为我想利用 Lucene 查找。但是，上面的查询没有返回任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T07:21:51.123

我认为您不能在*findAllByPropertyValue*方法中使用通配符。也许使用*findAllByQuery*方法可以在哪里使用它们。您的查询可能很简单：

```
name:* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T16:30:13.390

> 我同意它应该是那么简单。我正在尝试将其强制为 Lucene 查找

如果我明白你想要什么，你可以不直接查询索引吗？

```
@Autowired 
Neo4jTemplate fooTemplate;
...
fooTemplate.getIndex(Foo.class).query("name:*"); 
```

这应该与添加

```
@Query("start n=node:fooIndex(name=*)")
Set<Foo> getAllFoos(); 
```

到你的`FooRepository`.

# php - Google Plus PHP api - 插入时刻不起作用

> ID：15999858
> 
> 赞同：1
> 
> 时间：2013-04-14T13:56:41.553
> 
> 标签：php, google-plus, google-api-php-client

我想将我的状态分享给 google plus。

我遵循了 google api，但我收到了未经授权的错误。我试图修复它超过 2 天，但我不能..

我阅读了这个答案，我下载并测试了 api，但仍然不适合我。

[使用 PHP 客户端发布 Google+ 朋友圈时出现 401 未经授权的访问](https://stackoverflow.com/questions/15759821/401-unauthorized-access-when-posting-google-moments-with-php-client)

你可以在这里查看，

[https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/moments/simple.php](https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/moments/simple.php)

在这个主干文件中，他们仍然在调用 Google_PlusMomentsService.php

我尝试了以下代码，但仍然无法正常工作 - [https://developers.google.com/+/api/latest/moments/insert](https://developers.google.com/+/api/latest/moments/insert)

这是我正在测试的实时链接：[http ://webscarlets.in/projects/babblesuite/gplus/index.php](http://webscarlets.in/projects/babblesuite/gplus/index.php)

这是我用来分享状态的代码

```
 $target = new Google_ItemScope();
 $target->url = 'https://developers.google.com/+/plugins/snippet/examples/thing';

  $moment = new Google_Moment();
  $moment->type = "http://schemas.google.com/AddActivity";
  $moment->target = $target;

  // Execute the request
  $moments->moments->insert('me', 'vault', $moment);
  print '<p>Created an AddActivity moment</p>'; 
```

任何人都可以解决它。

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:35:06.220

您需要在 PHP 客户端中授权用户并请求可见操作（例如 AddActivity），然后才能将应用程序活动写入用户的配置文件。因为您使用的是较旧的示例，所以您可能没有在按钮或 OAuth2 流程中设置 requestvisibleactions。

尝试从这里开始： [https ://developers.google.com/+/quickstart/php](https://developers.google.com/+/quickstart/php)

这是最新的 PHP 启动器，并且已经过验证可以工作。如果您真的非常想使用您共享的旧代码，请共享登录按钮标记，例如：

```
<span id="signinButton">
  <span
    class="g-signin"
    data-callback="signinCallback"
    data-clientid="CLIENT_ID"
    data-cookiepolicy="single_host_origin"
    data-requestvisibleactions="http://schemas.google.com/AddActivity"
    data-scope="https://www.googleapis.com/auth/plus.login">
  </span>
</span> 
```

因为我猜你错过了这条线：data-requestvisibleactions ...

# objective-c - 使用 Objective-C 扩展 b2ContactListener (C++)

> ID：15999860
> 
> 赞同：1
> 
> 时间：2013-04-14T13:56:53.367
> 
> 标签：objective-c, box2d, collision-detection

由于我不是 C++ 开发人员，我想知道是否可以直接使用 Objective-C 扩展 b2ContactListener 类，或者我是否必须包装 b2ContactListener。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:17:25.610

将 box2d 与 Cocoa 一起使用需要 Objective-C++。. 这是一种强大的语言，也是学习 C++ 的有趣方式。

Objective-C++ 的规则之一是，Objective-C 类不能扩展 C++ 类（反之亦然），因此确实有必要使用组合而不是继承（换句话说，包装）。. . 我在这里使用术语组合，因为[“组合与继承”](http://en.wikipedia.org/wiki/Composition_over_inheritance)是实现相同结果的常见设计策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T23:08:03.293

你必须把它包起来。无法使用 Objective-C 或 Obj-C++ 类对 C++ 类进行子类化。所以要么在 Objective-C++ 中创建一个包装器，要么创建一个 C++ 类来扩展它。还应该注意的是，扩展名为 .mm 的文件将被编译为“Objective-C++”而不是 .m 到 Objective-C。

# php - 捆绑 JS 文件并没有提取我所有的文件。

> ID：15999865
> 
> 赞同：1
> 
> 时间：2013-04-14T13:57:29.057
> 
> 标签：php, jquery, html

我似乎无法让我的捆绑包正常工作，即使我之前令人沮丧地让它工作了:@。

```
<script src="js/bundle.php" type="text/javascript"></script> 
```

我脑子里有这个，所以它触发了捆绑。

但是，当它放在服务器上时，它似乎会拉出我需要的所有 JS，但没有在需要的地方正确部署它。很困惑。我想知道我的代码是否有些愚蠢是问题所在，希望有第二个意见。

```
<?php
$location = 'http://madaxedesign.co.uk/dev/js/';
header("Content-type: application/x-javascript");

$libs = array(
'homeSlider.js',
'core.js',
'jquery.smooth-scroll.min.js',
'jquery-1.7.2.min.js',
'jquery-1.9.0.min.js',
'jquery-ui-1.8.18.custom.min.js',
'lightbox.js',
'modernizr.js'
);

foreach ($libs AS $lib) {   

$js=file_get_contents($location.$lib);
echo "\n" . $js . "\n";
} 
```

如果其他人遇到过这个问题，我很想知道他们是如何解决的。

# ubuntu-12.04 - 只能使用 SUDO 访问库 - libfprint 权限

> ID：15999867
> 
> 赞同：0
> 
> 时间：2013-04-14T13:57:46.953
> 
> 标签：ubuntu-12.04, sudo, fingerprint, printf

我已经下载并安装了[libfprint](http://www.freedesktop.org/wiki/Software/fprint/libfprint)指纹 API。一切正常，但有一个障碍，它只会在我使用 sudo 运行应用程序时检测到我的指纹扫描仪。

这令人费解，因为我在另一台没有 sudo 的机器上有 libfprint（可能是 0.5 版）。

无论如何，我别无选择，只能在这台当前机器（Ubuntu 12.04 64bit）上进行开发。问题是我正在开发一个使用 Eclipse 中的库的应用程序。这意味着我必须将 Eclipse 作为 Sudo 运行，我知道这是一个坏主意。**有谁知道我如何在不成为 root 的情况下使该库可访问？**谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:35:24.213

[在这里](https://web.archive.org/web/20121202125953/https://wiki.archlinux.org/index.php/Fprint#Permissions)找到了解决方案。希望这对某人有帮助！

# c - C中memset的目的是什么

> ID：15999869
> 
> 赞同：0
> 
> 时间：2013-04-14T13:58:07.160
> 
> 标签：c, memset

我正在阅读[REBOL](https://github.com/languages/Rebol)源代码，但我无法理解以下语句的目的：

```
/***********************************************************************
**
*/  int main(int argc, char **argv)
/*
***********************************************************************/
{
    char *cmd;

    // Parse command line arguments. Done early. May affect REBOL boot.
    Parse_Args(argc, argv, &Main_Args);

    Print_Str("REBOL 3.0\n");

    REBOL_Init(&Main_Args);

    // Evaluate user input:
    while (TRUE) {
        cmd = Prompt_User();
        REBOL_Do_String(cmd);
        if (!IS_UNSET(DS_TOP)) {
            //if (DSP > 0) {
                if (!IS_ERROR(DS_TOP)) {
                    Prin("== ");
                    Print_Value(DS_TOP, 0, TRUE);
                } else
                    Print_Value(DS_TOP, 0, FALSE);
            //}
        }
        //DS_DROP; // result
    }

    return 0;
} 
```

在 Parse_Args 函数中：

```
/***********************************************************************
**
*/  void Parse_Args(int argc, REBCHR **argv, REBARGS *rargs)
/*
**      Parse REBOL's command line arguments, setting options
**      and values in the provided args structure.
**
***********************************************************************/
{
    REBCHR *arg;
    REBCHR *args = 0; // holds trailing args
    int flag;
    int i;

    CLEARS(rargs);

    .... 
```

CLEARS 定义为：

```
#define CLEARS(m)       memset((void*)(m), 0, sizeof(*m)); 
```

所以我的问题是为什么`memset`在这里使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:01:57.523

它看起来像是`rargs`某种包含程序选项的结构。`CLEARS()`并`memset()`用于用零值填充该结构以启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-23T14:43:36.200

memset 将一块内存设置为给定值。它通常是用手工优化的汇编编写的，预计速度会非常快。

# javascript - 首次登录时的设置页面，express.js

> ID：15999874
> 
> 赞同：1
> 
> 时间：2013-04-14T13:58:48.753
> 
> 标签：javascript, node.js, express, passport.js

我正在使用**Passport.js**授权用户进入我的 express.js 应用程序。

我想在用户第一次登录时显示设置页面。

我可以用护照做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:08:08.940

此代码必须在您的数据库等中修改。
初始化用户：

```
var user = new User({ ... });
user.newUser = true; 
```

和

```
app.get("/account",requireLogin, function(req,res){
    if(req.user.newUser){
        req.user.newUser = false;
        req.user.save(function(err){
            if(err) return handleError(err);
            res.redirect("/setup");
        })
    }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-29T07:38:08.510

您需要按照“Ari Porad”的回答将*newuser*属性放置在数据库中，但更好的方法是在您完成帐户首次设置后将其更改为*false* ，因为我们真的不知道用户是否已完成他的第一次设置与否（浏览器可能会崩溃，他可能无法完成它：D），所以最好不要在第一次访问时将“newuser”属性修改为*false*，而是在他提交我们的数据后修改它第一次访问时需要。

# r - 在 R igraph 中正确着色顶点

> ID：15999877
> 
> 赞同：16
> 
> 时间：2013-04-14T13:58:54.167
> 
> 标签：r, igraph

我正在使用 igraph 为顶点着色

我有两个 CSV 文件的答案和图的拓扑。

答案：（这表明玩家 K 和 N 回答正确）

```
 Player Q1_I1
1      k     1
2      l     0
3      n     1
4      m     0 
```

拓扑：（表示谁与谁连接）

```
 Node.1 Node.2
1      k      l
2      l      k
3      l      m
4      m      l
5      l      n
6      n      l
7      n      k
8      k      n 
```

我想使用包 IGraph 构建一个图形，并根据它们的正确性为不同颜色的顶点着色。

这是我能够实现的：

```
# reads answers and creates a graph from topology
answers <- read.csv("answers2.csv",header=T)
data<-read.csv('edges2.csv')
data<-graph.data.frame(data1, directed=FALSE)
g<-simplify(data)

# goes through vertices and colors them in different color, depending on correctness. 
# 2 means second column (First one is the players name)
V(g)$color <- ifelse(answers[V(g), 2] == 1, "blue", "red")
plot(g, layout=layout.fruchterman.reingold, vertex.color=V(g)$color) 
```

问题是在我的输出中颜色是错误的：![在此处输入图像描述](https://i.stack.imgur.com/OFOzr.png)

这里 M 和 K 被标记为正确，而它应该是 N 和 K。我认为问题在于我没有指定 Node 应该与 Player 相关，并且我试图实现这一点，但没有成功。

有什么想法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-14T21:17:55.760

最简单的方法是创建包含所有元数据的图形，然后 igraph 负责其余的工作。例如

```
library(igraph)

answers <- read.table(textConnection(
   "  Player Q1_I1                                                             
    1      k     1                                                             
    2      l     0                                                             
    3      n     1                                                             
    4      m     0                                                             
"))

topology <- read.table(textConnection(
   "  Node.1 Node.2                                                            
    1      k      l                                                            
    2      l      k                                                            
    3      l      m                                                            
    4      m      l                                                            
    5      l      n                                                            
    6      n      l                                                            
    7      n      k                                                            
    8      k      n                                                            
 "))

g2 <- graph.data.frame(topology, vertices=answers, directed=FALSE)
g <- simplify(g2)
V(g)$color <- ifelse(V(g)$Q1_I1 == 1, "lightblue", "orange")

plot(g) 
```

![阴谋](https://i.stack.imgur.com/IqPYu.png)

但是，实际上如果您没有在数据表中包含两个方向的每条边，那么您甚至不需要调用简化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-14T14:35:03.400

问题是图形是在之后排序的，`simplify`而答案向量不是。可能有一种更简单的方法，但我会简单地对您的答案表进行排序：`answers <-answers[order(answers[,1]),]`在设置`V(g)$color <- ifelse(answers[V(g), 2] == 1, "blue", "red")`.

您可以看到您的图表已排序`get.data.frame(g, what="vertices")`

或者，您可以`match`使用`get.data.frame`名称（请注意，我创建`g`了两次。出于某种原因，`get.data.frame`与`simplify`.

```
answers <- read.csv("c:/answers2.csv",header=T)
data1<-read.csv('c:/edges2.csv')
data2<-graph.data.frame(data1, directed=FALSE)
g<-simplify(data2)
ordered.vertices <-get.data.frame(g, what="vertices")
g<-simplify(data2)
V(g)$color <- ifelse(answers[match(answers[,1],ordered.vertices$name), 2] == 1, "blue", "red")
plot(g, layout=layout.fruchterman.reingold, vertex.color=V(g)$color) 
```

![在此处输入图像描述](https://i.stack.imgur.com/kBySp.png)

# c# - GL.getUniformLocation 高光照明返回负值

> ID：15999879
> 
> 赞同：0
> 
> 时间：2013-04-14T13:59:09.870
> 
> 标签：c#, opentk

我基本上是在 OpenTK（OpenGL 的 c# 实现）中尝试镜面光照，并且我已经设法让环境和漫反射光照工作，但现在我对 GL.getUniformLocation 的调用返回 -1 和镜面向量值（而且我是不确定“闪亮度”是否被正确初始化）。我查看了 OpenTK 和 OpenGL 上关于 gl.getUniformLocation 的许多类型的文档，以及为什么它有时会返回负值，我“几乎”确定我正确使用了镜面反射均匀值。

为清楚起见，以下是直接来自使用 Microsoft Visual Studio 2010 的解决方案的代码：

```
Vector3 lightDirection = new Vector3(0.1f, 0.0f, 0.0f);
Vector3 ambientIllumination = new Vector3(0.3f, 0.3f, 0.3f);
Vector3 ambientReflection = new Vector3(0.3f, 0.3f, 0.3f);
Vector3 diffuseIllumination = new Vector3(0.7f, 0.7f, 0.7f);
Vector3 diffuseReflection = new Vector3(0.7f, 0.7f, 0.7f);
Vector3 specularIllumination = new Vector3(0.5f, 0.5f, 0.5f);
Vector3 specularReflection = new Vector3(0.5f, 0.5f, 0.5f);
float shininess = 0.5f;

int lightDirectionLocation = GL.GetUniformLocation(shaderProgramID, "lightDirection");
GL.Uniform3(lightDirectionLocation, ref lightDirection);

int ambientIlluminationLocation = GL.GetUniformLocation(shaderProgramID, "ambientIllumination");
GL.Uniform3(ambientIlluminationLocation, ref ambientIllumination);

int ambientReflectionLocation = GL.GetUniformLocation(shaderProgramID, "ambientReflection");
GL.Uniform3(ambientReflectionLocation, ref ambientReflection);            

int diffuseIlluminationLocation = GL.GetUniformLocation(shaderProgramID, "diffuseIllumination");
GL.Uniform3(diffuseIlluminationLocation, ref diffuseIllumination);

int diffuseReflectionLocation = GL.GetUniformLocation(shaderProgramID, "diffuseReflection");
GL.Uniform3(diffuseReflectionLocation, ref diffuseReflection);

int specularIlluminationLocation = GL.GetUniformLocation(shaderProgramID, "specularIllumination");
GL.Uniform3(specularIlluminationLocation, ref specularIllumination);

int specularReflectionLocation = GL.GetUniformLocation(shaderProgramID, "specularReflection");
GL.Uniform3(specularReflectionLocation, ref specularReflection);

int shininessLocation = GL.GetUniformLocation(shaderProgramID, "shininess");
GL.Uniform1(shininessLocation, shininess); 
```

我正在使用的着色器代码：

```
#version 150

uniform mat4 viewMatrix;
uniform mat4 modelMatrix;
uniform mat4 projMatrix;

// Light properties
uniform vec3 ambientIllumination;
uniform vec3 diffuseIllumination;
uniform vec3 specularIllumination;
uniform vec3 lightDirection;

// Material properties
uniform vec3 ambientReflection;
uniform vec3 diffuseReflection;
uniform vec3 specularReflection;

uniform float shininess;

in vec3 position;
in vec3 normal;

out vec3 Colour;

void main()
{
    vec3 transformedNormal = normalize(vec3(viewMatrix * modelMatrix * vec4(normal, 0.0)));
    vec3 surfaceToLight = normalize(vec3(viewMatrix * vec4(-lightDirection, 0.0)));
    Colour = ambientIllumination * ambientReflection;
    float normalDotLight = dot(transformedNormal, surfaceToLight);
    if(normalDotLight > 0.0)
    {
        vec3 surfaceToEye = normalize(vec3(viewMatrix * modelMatrix * vec4(position, 1.0)));
        Colour += specularIllumination * specularReflection * pow(max(dot(reflect(surfaceToLight, transformedNormal), surfaceToEye), 0.0), shininess);
        Colour += diffuseIllumination * diffuseReflection * normalDotLight;
    }
    gl_Position = projMatrix * viewMatrix * modelMatrix * vec4(position, 1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:30:47.237

GL.getUniformLocation 在找不到统一变量时返回 -1。即使您在着色器中列出变量，编译器也可能能够将其优化掉。

您没有显示您的片段着色器，但如果您不在片段着色器中使用颜色，那么整个计算将得到优化，包括您定义的制服。在这些情况下 GL.getUniformLocation 也将返回 -1。

# excel - 无法获得 INDEX/MATCH 函数来做我需要的事情？

> ID：15999882
> 
> 赞同：0
> 
> 时间：2013-04-14T13:59:25.747
> 
> 标签：excel

这是一个非常深入的 excel 表（对我来说），所以这里有一个链接：[https ://dl.dropboxusercontent.com/u/19122839/Movies.xlsm](https://dl.dropboxusercontent.com/u/19122839/Movies.xlsm)

在过滤器表上，我有一个搜索功能。这使您可以输入不同的流派、年份等，并获得结果。

由于某种原因，流派部分似乎无法正常工作。

在 movie_genres 表中，有一个 Genre Equals 和 Genre Count 列似乎正确标记了信息，但是当您转到 movies 表时，Matches Genre 列没有。我使用这个功能：

```
=INDEX(Genres[Genre Count],MATCH(Movies[[#This Row],[ID]],Genres[ID],0)) 
```

哪个，对我来说，应该拉流派计数，但在有多个流派的情况下（我在这种情况下使用空白支票作为示例），它不会将其标记为 1。我怎样才能做到以便得到纠正。

例如，如果您将喜剧作为第二种类型添加，它会比您只有家庭获得更多的结果。我想我只需要一双新的眼睛来看看这个，这可能是愚蠢的，但任何帮助都会很棒。

我相信我需要这样做，以便我在 Movies[Matches Genre] 中使用的索引/匹配功能只要该 ID 在 Genres[Genre Count] 中有 1 就可以工作。只有在 ID 的第一个实例中有 1 时，它似乎才有效。

编辑：我添加了一个 COUNT 功能，以更好地解释我在说什么。只有家庭作为一种类型，它显示有 10 个结果，但是当您将喜剧作为第二种类型添加时，您会得到 40 个结果。当您添加流派时，这个数字永远不会增加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:50:51.647

也许尝试像这样使用 SUMIF

`=SUMIF(Genres[ID],[@ID],Genres[Genre Count])`

如果一部电影可能有多个 1，但您只需要最多 1 个，则更改为

`=IF(SUMIF(Genres[ID],[@ID],Genres[Genre Count])>0,1,0)`

# c# - 如何使用 WPF

> ID：15999884
> 
> 赞同：0
> 
> 时间：2013-04-14T13:59:38.900
> 
> 标签：c#, wpf

A 用 Ja​​va（Android、PC）和 iOS 编程，我开始用 C# WFP 编程。我的问题是，如果在 Android 中为每个新视图我都有活动，在 Java swing 中我有卡片面板，在 iOS 中我有故事板，每个视图都有不同的类。它在 C# 中是如何工作的？在具有视图的类之间导航的正确方法是什么。我应该搜索什么术语才能找到合适的教程，请您指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:11:34.233

不久前我也遇到了同样的问题。
我[在 C# 2010 中使用了 Matthew MacDonald 的 Pro WPF](https://rads.stackoverflow.com/amzn/click/com/1430272058)，这本书非常好，因为它有很多非常好的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:02:18.053

我会考虑以下几点：

1.  使用[MVVM 设计模式](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)
2.  使用[MVVM 框架](http://www.lhotka.net/weblog/UsingTheMVVMPatternRequiresAFramework.aspx)（例如[Caliburn.Micro](http://caliburnmicro.codeplex.com/)）
3.  使用视图模型优先方法

在这种情况下，您创建视图模型的实例，并定位和显示与视图模型相对应的视图。

视图上的 UI 元素（例如`Button`）调用视图模型上的动词（方法）。在视图模型上公开的属性*绑定*到 UI 元素，因此任何一方的更改都会反映在另一方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T14:01:59.180

看看这里：http: [//msdn.microsoft.com/en-us/library/ms748948.aspx](http://msdn.microsoft.com/en-us/library/ms748948.aspx)

那里将解释什么是WPF以及如何使用。

也看看：http: [//msdn.microsoft.com/en-us/library/ms754130.aspx](http://msdn.microsoft.com/en-us/library/ms754130.aspx)

# scala - Scala 中的简单构建器模式

> ID：15999887
> 
> 赞同：3
> 
> 时间：2013-04-14T13:59:55.443
> 
> 标签：scala, builder, covariance

我正在为类似地图的容器实现一个非常简单的构建器模式：

```
trait KeyValueContainer[K,V] {
  private var props: Map[K, V] = new HashMap[K, V]
  private var built = false

  /**
   * Adds a key/value pair
   */
  def +=(key: K, value: V): KeyValueContainer[K,V] = {
    if (built)
      throw new BuilderException

    props = props + (key -> value)
    this
  }

  def build = {
    built = true
    this
  }
}

class MyContainer extends KeyValueContainer[String, Double] 
```

在“new MyContainer()”上使用上述“+=”或“build”方法时，结果在两种情况下都是 KeyValueContainer[String,Double] 类型...

我很确定我在过去的某个地方读到过，这可能会以某种方式返回实际的 MyContainer 子类型。您会为此使用方法返回类型协方差（Java 风格），还是在您看来有更类型安全/更好的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:17:52.007

这里是：

[http://docs.scala-lang.org/overviews/core/architecture-of-scala-collections.html](http://docs.scala-lang.org/overviews/core/architecture-of-scala-collections.html)

该模式依赖于在编译时如何解析隐式。基本上，如果范围内有多个隐式，编译器会选择最具体的一个（在您的情况下，您需要的子类型构建器）。

通过这种方式，您可以在基类中进行泛型实现，并通过隐式参数获取子类构建器。

这是我为自己的一个项目所做的示例：

[https://gist.github.com/hejfelix/8a0270855d498d7981f9](https://gist.github.com/hejfelix/8a0270855d498d7981f9)

这种模式的另一个重要方面是显式自键入： [http ://www.scala-lang.org/node/124](http://www.scala-lang.org/node/124)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T16:06:05.857

我推荐这篇文章，它更简单，而且重点：

[建造者模式](http://blog.tackley.net/2010/09/option-in-scala-vs-null-in-java.html)

看看如何通过使用 this.type 来返回自己，并以此为基础。

```
trait PaginationParameters extends Parameters {
 var _pageSize: Option[Int] = None
 var _page: Option[Int] = None

 def pageSize(newPageSize: Int): this.type = {
  _pageSize = Some(newPageSize); this
 }

 def page(newPage: Int): this.type  = {
  _page = Some(newPage); this
 }

 override def parameters = super.parameters ++
        _pageSize.map("page-size" -> _) ++
        _page.map("page" -> _)
 }
} 
```

干杯

# c++ - 虚拟成员函数定义可以出现在类模板之外吗？

> ID：15999888
> 
> 赞同：1
> 
> 时间：2013-04-14T13:59:59.963
> 
> 标签：c++, templates, virtual-functions

在我正在编写的一个项目中，我有一个用作基类的类模板，它有一个派生类覆盖的虚拟方法。虚函数也有自己的实现。不过，我遇到的问题可以归结为以下代码：

```
#include <iostream>

template <typename T> struct A {
    virtual void do_something()
#ifdef INLINE_CLASS
    { std::cout << "Saluton, mondo!\n"; }
#else
    ;
#endif
};

#ifndef INLINE_CLASS
template <typename T> virtual void A<T>::do_something() {
    std::cout << "Saluton, mondo!\n";
}
#endif

int main(int argc, char** argv) {
    A<int> a;
    a.do_something();
    return 0;
} 
```

当我使用定义的 INLINE_CLASS 进行编译时，代码编译得很好，但是没有它，我得到一个 GCC 错误：

```
pniedzielski@patrick-laptop-debian:~$ g++ -v
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/4.7/lto-wrapper
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Debian 4.7.2-5' --with-bugurl=file:///usr/share/doc/gcc-4.7/README.Bugs --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --with-arch-32=i586 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 4.7.2 (Debian 4.7.2-5) 
pniedzielski@patrick-laptop-debian:~$ g++ -std=c++11 -Wall -o test-virtual-template test-virtual-template.cpp 
test-virtual-template.cpp:13:23: error: templates may not be ‘virtual’
pniedzielski@patrick-laptop-debian:~$ g++ -std=c++11 -Wall -DINLINE_CLASS -o test-virtual-template test-virtual-template.cpp 
pniedzielski@patrick-laptop-debian:~$ ./test-virtual-template 
Saluton, mondo! 
```

通常，在我自己的代码中，我会将实现从类模板中分离出来并将其放入`.inl`文件中，但在这种情况下我似乎无法做到。有什么我想念的吗？这是 GCC 中的错误吗？还是根据标准将成员函数定义放在类模板声明中的唯一方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T14:02:20.383

**此问题与模板无关**。

您根本不应该`virtual`在成员函数的类外定义中使用关键字：

```
template <typename T> void A<T>::do_something() {
    std::cout << "Saluton, mondo!\n";
} 
```

例如，在这个[**活生生的例子**](http://liveworkspace.org/code/3kW04t%24338)中看到这个编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T14:02:40.090

`virtual`单独实现方法时不需要：

```
template <typename T>
void A<T>::do_something() {
    std::cout << "Saluton, mondo!\n";
} 
```

[***现场演示***](http://liveworkspace.org/code/4yc7Hy%243966)

# java - Java中单变量非线性函数的最小值

> ID：15999892
> 
> 赞同：3
> 
> 时间：2013-04-14T14:00:44.217
> 
> 标签：java, mathematical-optimization, numerical-methods

我正在寻找一种简单的方法来在 Java 中完成 MATLAB 的 fminsearch() 所做的事情。我不需要像 fminsearch 那样通用，在我的情况下，我只想找到单变量非线性函数的最小值（函数和参数值最小值）。我不知道函数的解析表达式，但我可以很容易地评估它。

您是否知道执行此操作的库，或者我可以重新实现的简单算法？

注意：我看到 apache 的 common-math 似乎有这样的东西（UnivariateOptimizer），但大多数方法似乎已被弃用，我找不到一个很好的解释如何使用它。也欢迎任何与此相关的提示。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T05:53:22.583

[Apache Commons Math](http://commons.apache.org/proper/commons-math/)通常是开始在 Java 中进行数值计算的好地方。最好通过示例学习用法，查看[API 文档](http://commons.apache.org/proper/commons-math/javadocs/api-3.2/index.html)和各种类和方法的[单元测试源代码。](http://svn.apache.org/viewvc/commons/proper/math/trunk/src/test/java/org/apache/commons/math3/)

正如您所指出的，[用户指南](http://commons.apache.org/proper/commons-math/userguide/optimization.html)中引用的优化类已被弃用。它们仍然可以被调用，但最终它们当然会从库中被淘汰。由于我不知道的原因，正在进行的优化开发现在是在*optim*而不是*优化*子包中进行的。

对于单变量函数（局部最优）最小化，*Apache Commons Math*提供了*Brent*方法的实现。[的单元测试](http://svn.apache.org/viewvc/commons/proper/math/trunk/src/test/java/org/apache/commons/math3/optim/univariate/BrentOptimizerTest.java?view=markup)中概述了用法`BrentOptimizer`，我从中复制了以下摘录：

```
@Test
public void testSinMin() {
    UnivariateFunction f = new Sin();
    UnivariateOptimizer optimizer = new BrentOptimizer(1e-10, 1e-14);

    Assert.assertEquals(3 * Math.PI / 2, 
        optimizer.optimize(new MaxEval(200),
                           new UnivariateObjectiveFunction(f),
                           GoalType.MINIMIZE,
                           new SearchInterval(4, 5)).getPoint(), 1e-8);

    Assert.assertTrue(optimizer.getEvaluations() <= 50);
    Assert.assertEquals(200, optimizer.getMaxEvaluations());
    ...
} 
```

# websphere - 在 websphere 中部署时的 ClassNotFound

> ID：15999894
> 
> 赞同：1
> 
> 时间：2013-04-14T14:00:47.457
> 
> 标签：websphere, classloader, noclassdeffounderror

我已经构建了一个包含以下内容的 ear 文件：

```
myear.ear
  - > META-INF
  - > mywar.war 
```

战争文件的内容是：

```
mywar.war
  - > META-INF
  - > WEB-INF
       - > classes
       - > jsp
       - > lib
            - > myjar.jar
       - > applicationContext.xml
       - > .... 
```

其中 myjar.jar 包含类：

```
com.myapp.config.Configurator 
```

现在，当我在 websphere 8.5.0.1 中部署这个 war 文件时，我得到：

```
[11-04-13 10:16:54:875 CEST] 00000065 servlet       I com.ibm.ws.webcontainer.servlet.ServletWrapper init SRVE0242I: [isclite] [/ibm/console] [/com.ibm.ws.console.appmanagement/CtxRootForWebMod.jsp]: Initialization successful.
[11-04-13 10:23:30:488 CEST] 00000062 servlet       E com.ibm.ws.webcontainer.servlet.ServletWrapper service Uncaught service() exception thrown by servlet resourceLoader: java.lang.NoClassDefFoundError: com.myapp.config.Configurator (initialization failure)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:168)
    at com.myapp.web.servlet.WebResourceServlet.doPost(WebResourceServlet.java:60)
    at com.myapp.web.servlet.WebResourceServlet.doGet(WebResourceServlet.java:45) 
```

当类位于 ear 存档中时，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:17:16.740

错误消息还显示“初始化失败”。A`java.lang.NoClassDefFoundError`可能是由静态初始化程序中未捕获的异常引起的。所以类文件已经找到但是`static`块的执行失败了。

# wpf - 适用于 WPF 4.5 和 MVVM Light PCL 项目的便携式服务定位器版本

> ID：15999895
> 
> 赞同：1
> 
> 时间：2013-04-14T14:00:50.743
> 
> 标签：wpf, mvvm-light, portable-class-library

我有一个在 PCL 库、Windows 8 应用商店应用、Windows Phone 8 应用和 WPF 4.5 桌面应用中使用 MVVM Light Portable 的解决方案。WPF 应用程序抱怨它无法加载文件或程序集“System.Core，Version=2.0.5.0”，我认为这是 Silverlight System.Core 程序集。我唯一能找到引用 Silverlight 的是 MVVM Light IoC 使用的便携式服务定位器的 PCL。我的 WPF 应用程序中的正确引用是什么，以便我可以使用所有正确的可移植库并且一切正常？有人知道答案吗？

奥格布拉特

# ember.js - 如何在 emberjs 中构建嵌套视图

> ID：15999897
> 
> 赞同：2
> 
> 时间：2013-04-14T14:01:01.017
> 
> 标签：ember.js

我正在尝试学习 ember 并理解所有概念。我现在被困了几天。

我试图创建一个具有多个“子视图”的视图（在 ember 中有它的名称吗？）。例如：

```
+-----------------------------------------------+------------------+
| Post title                                    | new tag: ______  |
+-----------------------------------------------+                  |
| Post text                                     | * tag 1          |
|                                               | * tag 2          |
|                                               |                  |
+-----------------------------------------------+------------------+
| New comment: _____________ submit             | related posts    |
|                                               |                  |
| * comment 1 text                              | * post 1         |
| * comment 2 text                              | * post 2         |
| * comment 3 text                              |                  |
| * comment 4 text                              |                  |
| * comment 5 text                              |                  |
|                                               |                  |
+-----------------------------------------------+------------------+ 
```

我的想法是让 PostController 有自己的路由来显示所选帖子的详细信息。为评论和小部件添加嵌套元素（使用`{{#each}}`）很容易。这意味着我需要为我的 PostController 中的嵌套元素处理所有动作和其他所有事情，这些元素闻起来很糟糕并且变得凌乱。

他们每个人（评论、标签和相关）不应该是一个[单独的控制器](http://en.wikipedia.org/wiki/Separation_of_concerns)吗？在这种情况下，我可以保持我的 PostController 干净并在它自己的控制器中处理所有嵌套操作。这是正确的方法还是有更好的方法来做到这一点？

如果是，我该如何实现这些嵌套视图。我在 ember 中阅读了许多有关嵌套视图的主题，但我无法弄清楚它的概念。我会说，我不需要标签和评论的路由，因为它绑定到 PostController 并且在没有帖子的情况下永远不会使用它们，但我不确定。

阅读[这篇文章后](https://stackoverflow.com/a/14802424/1830500)，我尝试使用渲染，但我不明白在这种情况下使用哪个控制器和视图的概念。

是否有一个我刚刚错过的好的（更新的）指南，或者有人可以向我解释这如何工作或指导我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:04:03.410

您可以通过创建分隔视图`Em.View.create`，
然后插入到带有注释和标签的`post`模板。`{{view}}`

模板：

```
<script type='text/x-handlebars' data-template-name='post'>
<div class='post'>
  <h1>{{title}}</h1>
  <div class='content'>{{{content}}}</div>
  <div class='tags'>{{view App.TagView}}</div>
  <div class='comments'>{{view App.CommentView}}</div>
  <div class='relatedPosts'>{{view App.RelatedPostView}}</div>
</div>
</script>

<script type='text/x-handlebars' data-template-name='comment'>
{{#each view.comments}}
  <!--some HTML codes for comments-->
{{/each}}
</script> 
```

脚本：

```
App.CommentView = Em.View.create({
  templateName:'comment',
  comments:[],
  didInsertElement: function(){
    // Handler related to this view has to implement here
    // as there are delays for inserting elements
  }
});

App.PostController = Em.ArrayController.extend({
  getContent: function(){
    //some codes for loading content

    //You can implement all methods in single controller
    this.addComments(data.comments);

    //Or call other methods after loaded the content
    App.commentController.setup(data.comments);
  },
  addComments: function(data){
    App.CommentView.set('comments',data);
  }
}); 
```

# asp.net - Highcharts asp.net 图片

> ID：15999898
> 
> 赞同：1
> 
> 时间：2013-04-14T14:01:03.370
> 
> 标签：asp.net, highcharts, server-side

我想知道是否有一种方法可以实现在 ASP.net 服务器中获取当前图表的图像，以在显示和导出的报告之间提供一致的显示。

我在网上找到的所有内容都与使用客户端脚本一一导出数据图像有关。我还发现很多与出于安全目的运行自己的服务器有关（这与我无关）。

我需要的是能够获取服务器代码上的图像，以将数据包含在我正在生成的报告中。

提前致谢。

# c# - 在登录模板的列表视图控件中设置标签文本

> ID：15999904
> 
> 赞同：0
> 
> 时间：2013-04-14T14:01:49.640
> 
> 标签：c#, asp.net

我需要设置一个标签文本，它是列表视图，并且列表视图在登录模板中。我无法设置标签的值。这是下面的代码。

```
ListView ListView1 = (ListView)LoginView.FindControl("ListView1");

for (int i = 0; i < ListView1.Controls.Count; i++)
{
    Label someLabel = (Label)ListView1.Controls[i].FindControl("nItemsId");
    if (someLabel != null)
        someLabel.Text = dt.Rows.Count.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:11:00.120

所以我认为你需要使用[ListView.ItemCreated](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemcreated.aspx)事件来实现这一点

```
protected void LV_ItemCreated(object sender, ListViewItemEventArgs e)
{
  // Retrieve the current item.
   ListViewItem item = e.Item;

  // Verify if the item is a data item.
  if (item.ItemType == ListViewItemType.DataItem)
  {
    Label someLabel = (Label)ListView1.Controls[i].FindControl("nItemsId");
    if (someLabel != null)
        someLabel.Text = dt.Rows.Count.ToString();
  }
} 
```

要使用它，请将您的标记更改为像这样声明 eventHandler。

```
<asp:ListView OnItemCreated="LV_ItemCreated" /> 
```

# c# - HttpWebrequests facebook 登录和请求应用令牌

> ID：15999905
> 
> 赞同：2
> 
> 时间：2013-04-14T14:01:51.070
> 
> 标签：c#, facebook, token

我正在尝试登录 facebook 并使用此链接检索令牌： [https ://www.facebook.com/dialog/oauth?client_id=282892925078054&redirect_uri=https://www.facebook.com/&response_type=token](https://www.facebook.com/dialog/oauth?client_id=282892925078054&redirect_uri=https://www.facebook.com/&response_type=token)

我的代码看起来像这样，但是当我请求上面的链接时，我得到了一个无效的链接。

```
 CookieCollection cookies = new CookieCollection();
         HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://www.facebook.com/login.php?login_attempt=1"); 
         request.CookieContainer = new CookieContainer();
         request.CookieContainer.Add(cookies);
         //Get the response from the server and save the cookies from the first request..
         HttpWebResponse response = (HttpWebResponse)request.GetResponse();
         cookies = response.Cookies;

         string getUrl = "https://www.facebook.com/login.php?login_attempt=1";
         string postData = String.Format("email={0}&pass={1}", email, pass);
         HttpWebRequest getRequest = (HttpWebRequest)WebRequest.Create(getUrl);
         getRequest.CookieContainer = new CookieContainer();
         getRequest.CookieContainer.Add(cookies); //recover cookies First request
         getRequest.Method = WebRequestMethods.Http.Post;
         getRequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2";
         getRequest.AllowWriteStreamBuffering = true;
         getRequest.ProtocolVersion = HttpVersion.Version11;
         getRequest.AllowAutoRedirect = true;
         getRequest.ContentType = "application/x-www-form-urlencoded";

         byte[] byteArray = Encoding.ASCII.GetBytes(postData);
         getRequest.ContentLength = byteArray.Length;   
         Stream newStream = getRequest.GetRequestStream(); //open connection
         newStream.Write(byteArray, 0, byteArray.Length); // Send the data.

         newStream.Close();

         HttpWebResponse getResponse = (HttpWebResponse)getRequest.GetResponse();
         cookies = getResponse.Cookies;
         using (StreamReader sr = new StreamReader(getResponse.GetResponseStream()))
         {
           string sourceCode = sr.ReadToEnd();
         }

         //Get the token
         HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("https://www.facebook.com/dialog/oauth?client_id=282892925078054&redirect_uri=https://www.facebook.com/&response_type=token");
         getRequest.CookieContainer = new CookieContainer();
         getRequest.CookieContainer.Add(cookies);
         webRequest.AllowAutoRedirect = false;
         HttpWebResponse rresponse = (HttpWebResponse)webRequest.GetResponse();

         if (rresponse.StatusCode == HttpStatusCode.Redirect)
         {
             Console.WriteLine("redirected to: " + rresponse.GetResponseHeader("Location"));
         } 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T06:47:57.817

[https://www.facebook.com/dialog/oauth?client_id=282892925078054&redirect_uri=https://www.facebook.com/&response_type=token](https://www.facebook.com/dialog/oauth?client_id=282892925078054&redirect_uri=https://www.facebook.com/&response_type=token)

URL 不允许应用程序配置。: 应用程序设置不允许一个或多个 URL。Internet 站点 URL 和 Canvas URL 或域 URL 必须是应用程序域的子域。

# javascript - 根据图像主色更改背景颜色？

> ID：15999909
> 
> 赞同：8
> 
> 时间：2013-04-14T14:01:59.343
> 
> 标签：javascript, jquery, css, itunes, background-color

我不知道这*是否*真的可能，但如果是的话，那就太好了！从新的 iTunes 中汲取灵感，其中背景颜色似乎是通过艺术品图像的（主要）颜色设置的。我正在寻找可能使用 jQuery 对 javascript/cs 做类似的事情，本质上是根据其中的图像更改 div 的背景颜色。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-14T14:14:20.630

以下是您可以尝试的方法：

[https://github.com/lokesh/color-thief](https://github.com/lokesh/color-thief)

这个库有一个很酷的演示： http: [//lokeshdhakar.com/projects/color-thief/](http://lokeshdhakar.com/projects/color-thief/)

在这里找到：[通过 Javascript 获取图像的平均颜色](https://stackoverflow.com/questions/2541481/get-average-color-of-image-via-javascript)

# sql - 使用循环引用 SQL 在 TABLES 中插入

> ID：15999913
> 
> 赞同：5
> 
> 时间：2013-04-14T14:02:23.750
> 
> 标签：sql, sql-insert, create-table, circular-reference

我有 2 张桌子：

```
Empleados(**numEmpl**, nombre, apellido, sexo, telefono, salario, numDept)
Departamentos(**numDept**, nombreDept, numDirect) 
```

在部门：

1.  numEmpl 是主键
2.  numDept 是对 Departamentos(numDept) 的外键引用。在部门：
3.  numDept 是主键
4.  numDirect 是 Empleados (numEmpl) 的外键引用

所以有一个循环引用。

首先，我创建了表格：

```
CREATE TABLE EMPLEADOS(numEmpl primary key, nombre, 
     apellido, sexo, telefono, salario, numDept)
CREATE TABLE DEPARTAMENTOS(numDept primary key, nombreDept, numDirect)
(i didn't write here each of type is each colum) 
```

现在我在它们之间创建引用：

```
ALTER TABLE DEPARTAMENTOS 
    ADD CONSTRAINT FK_DEPT_EMP FOREIGN KEY (numDirect) 
    REFERENCES EMPLEADOS(numEmpl)
ALTER TABLE EMPLEADOS 
    ADD CONSTRAINT FK_EMP_DEPT FOREIGN KEY (numDept) 
    REFERENCES DEPARTAMENTOS(numDept). 
```

它起作用了，所以现在我尝试插入一些数据：

```
INSERT INTO Empleados(numEmpl, nombre, apellidos, sexo, telefono, salario, numDept)
VALUES (1, 'Pepito', 'Pérez', 'H', '111111111', 20000, 1);
INSERT INTO Departamentos(numDept, nombreDept, numDirect)
VALUES (1, 'Direccion', 1); 
```

但是现在它给我一个错误，告诉我我不能在循环引用中引入数据，我试图禁用循环引用并插入数据，然后再次启用它，它有效但有人告诉我这不是正确的方式，我必须在创建表格时做一些特别的事情以这种方式插入数据，它会起作用，但我不知道该怎么做。顺便说一句，我正在使用 oracle sql developer。

编辑：感谢您的回答，但他们没有奏效。首先，我只能拥有那些表，当我进行插入时，它必须以这种方式工作，而不是使参数为 null 然后更新它，对不起，我之前没有说过。所以我必须这样做的唯一方法是允许循环引用，但是当我尝试按照这里有人所说的方式进行操作时，它会告诉我一些关于回滚的信息，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T14:16:37.233

要允许循环引用，您需要可延迟的约束：

```
ALTER TABLE DEPARTAMENTOS 
    ADD CONSTRAINT FK_DEPT_EMP FOREIGN KEY (numDirect) 
    REFERENCES EMPLEADOS(numEmpl)
    DEFERRABLE INITIALLY DEFERRED
    ;
ALTER TABLE EMPLEADOS 
    ADD CONSTRAINT FK_EMP_DEPT FOREIGN KEY (numDept) 
    REFERENCES DEPARTAMENTOS(numDept)
    DEFERRABLE INITIALLY DEFERRED
    ; 
```

*在事务结束时*检查可延迟约束；在提交时间之前，允许存在虚假的*无效数据库状态（在原始问题中：在两个插入语句之间）。*但是语句必须在事务中，所以语句应该用 and 括`BEGIN [WORK];`起来`COMMIT [WORK];`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:19:10.737

循环引用是危险的，它会导致您需要返回并更新您的数据，以免它处于不一致的状态。

如果您仍处于计划阶段，我敦促您查看其他选项以避免这种情况，否则您可能会遇到很多麻烦。

[http://blogs.msdn.com/b/sqlazure/archive/2010/07/01/10033575.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/07/01/10033575.aspx)

如果您确实希望仍然使用它们，那么我建议将 NULL 设置为部门表上的允许值（这允许您插入不带 d 的新值），插入员工，然后返回并与员工一起更新ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T14:23:38.367

发生这种情况是因为您无法在 Department 表中为 numDirect 创建值为 1 的记录，直到您在Employees 表中为该员工创建了一条记录（numEmpl=1）。在创建员工的部门记录之前，您无法创建该员工。这是通过使该过程三个步骤而不是两个步骤来解决的。为此，您必须能够在没有 numDirect FK 值的情况下创建部门记录，或者您必须能够在没有 numDept FK 值的情况下创建员工。

假设您决定后者。在这种情况下，`NumDept`在表中使 Nullable `EMPLEADOS`：

```
Alter table EMPLEADOS Alter Column numDept null 
```

然后你可以：
首先，添加一个具有空值的员工`numDept`

```
INSERT Empleados(numEmpl, nombre, apellidos,
        sexo, telefono, salario, numDept)
VALUES (1, 'Pepito', 'Pérez', 'H', '111111111', 20000, null); 
```

二、添加员工：

```
INSERT Departamentos(numDept, nombreDept, numDirect)
VALUES (1, 'Direccion', 1); 
```

最后，更新`numDept`部门记录中的值。

```
Update Empleados Set numDept = 1 
Where numEmpl = 1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-14T14:11:30.023

从您的 departamentos 表中取出 numDirect 列。该表应该简单地描述部门。根据您的业务规则，您希望在您拥有的部门和 Empleados 之间建立一对多关系，或者在它们之间建立多对多关系。如果一个 Empleado 可以为多个部门工作，那么您希望从 Empleados 表中删除 numDept 列并创建另一个表来设置多对多关系。

如果您设法找到一种方法来使用当前设计添加记录，那么您将遇到更大的问题。您需要为其中的每个 Empleado 制作一张唱片，而不是为每个 departamento 制作一张唱片。

# parsing - 逐步消除这种间接左递归

> ID：15999916
> 
> 赞同：14
> 
> 时间：2013-04-14T14:02:55.323
> 
> 标签：parsing, context-free-grammar, left-recursion

我已经看到[这个算法](http://en.wikipedia.org/wiki/Left_recursion)应该能够用来删除所有左递归。然而，我遇到了这种特殊语法的问题：

```
A -> Cd
B -> Ce
C -> A | B | f 
```

无论我尝试什么，我最终都会陷入循环或仍然是间接左递归的语法。

在这个语法上正确实现[这个算法的步骤是什么？](http://en.wikipedia.org/wiki/Left_recursion)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-01-10T14:24:41.773

规则是您首先为非终结符建立某种顺序，然后找到发生间接递归的所有路径。

在这种情况下，顺序为 A < B < C，非终结符 C 的递归可能路径为

```
C=> A => Cd 
```

和

```
C=> B => Ce 
```

所以 C 的新规则是

```
C=> Cd | Ce | f 
```

现在您可以简单地删除直接左递归：

```
C=> fC'
C'=> dC' | eC' | eps 
```

并且由此产生的非递归语法将是：

```
A => Cd
B => Ce
C => fC'
C' => dC' | eC' | eps 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-14T14:34:19.137

已经想通了。

我的困惑是，按照这个顺序，算法似乎什么也没做，所以我认为这一定是错误的，并在第一次迭代中开始替换 A -> Cd（忽略 j 不能超过 i）进入无限循环。

1）通过重新排序规则：

```
C -> A | B | f 
A -> Cd
B -> Ce 
```

2) 替换 A 中的 C -> Cd

```
C -> A | B | f 
A -> Ad | Bd | fd
B -> Ce 
```

3) B 还没有在 j 的范围内，所以留下它并替换 A 的直接左递归

```
C -> A | B | f 
A -> BdA' | fdA'
A'-> dA' | epsylon
B -> Ce 
```

4) 替换 B 中的 C -> Ce

```
C -> A | B | f 
A -> BdA' | fdA'
A'-> dA' | epsylon
B -> Ae | Be | fe 
```

5）还没有完成！还需要替换新规则 B -> Ae（A 的产生在 j 的范围内）

```
C -> A | B | f 
A -> BdA' | fdA'
A'-> dA' | epsylon
B -> BdA'e | fdA'e | Be | fe 
```

6) 在 B 的产生式中替换直接左递归

```
C -> A | B | f 
A -> BdA' | fdA'
A'-> dA' | epsylon
B -> fdA'eB' | feB'
B'-> dA'eB' | eB' | epsylon 
```

呜呼！左递归自由语法！

# python - 获取 __init__ 变量

> ID：15999917
> 
> 赞同：3
> 
> 时间：2013-04-14T14:03:11.100
> 
> 标签：python, class, variables, object, function

```
class first(object):
    def __init__(self, room, speed):
        self.position = room
        self.speed = 20
        direction = random.randint(0,359)
class second(first):
    def __init__(self)
        self.way = first.direction
        self.now = first.self.position 
```

我收到一个错误，如何从`__init__`另一个类中获取变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T14:05:02.333

你不能。`direction`是函数的*局部*变量`__init__`，并且在该函数之外不可用。

*甚至根本*不使用该变量；它可以从函数中删除，并且什么都不会改变。

该`__init__`方法旨在为新创建的实例设置属性，但您的*类*`second`似乎希望找到该类的属性。您也不能这样做，因为您要访问的那些属性仅设置在. 您只能在 的*实例*上找到，而不是在类本身上找到。`first` *`__init__``position`*`first``first`**

 **也许您想先初始化父类，然后实际存储`position`在`self`：

```
class first(object):
    def __init__(self, room, speed):
        self.position = room
        self.speed = 20
        self.direction = random.randint(0,359)

class second(first):
    def __init__(self, room, speed)
        super(second, self).__init__(room, speed)
        self.way = self.direction
        self.now = self.position 
```

现在定义`self`了`direction`and`position`属性，您的`second.__init__`函数可以在那里访问这些属性。**

# android - 从数据库rawquery android中检索不起作用

> ID：15999919
> 
> 赞同：0
> 
> 时间：2013-04-14T14:03:14.763
> 
> 标签：android, database, data-retrieval

我有 2 个值，imsi 和电话号码。我将它们存储在数据库中。我在 getSIMContacts functn 中检索数据库时遇到问题。addContact 将 phonenum 添加到数据库中。getSIMContacts 从数据库中检索 phonenum。我的代码看起来像这样->

```
public class PersonalContactsDatabase extends SQLiteOpenHelper {

    // All Static variables
    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "PersonalContacts";

    // Contacts table name
    private static final String TABLE_NAME = "Contacts";

    // Contacts Table Columns names
    private static final String KEY_ID = "id";
    private static final String IMEI_MOB = "imei";
    private static final String KEY_MO_NO = "mobile_no";

    Contact contact;

    public PersonalContactsDatabase(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // Creating Tables
   @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_NAME + "("
                + KEY_ID + " TEXT PRIMARY KEY," 
                + KEY_MO_NO + " TEXT,"
                + IMEI_MOB + " TEXT" 
                + ")";

        System.out.println("Create Query :::::"+CREATE_CONTACTS_TABLE);
        db.execSQL(CREATE_CONTACTS_TABLE);

        Log.e("DB Manager", "Db created Succesfully "+db);
        //Toast.makeText(context, text, duration)
    }

    // Upgrading database
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if existed
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);

        // Create tables again
        onCreate(db);
    }

    /**
     * All CRUD(Create, Read, Update, Delete) Operations
     */

    // Adding new contact
    void addContact(String contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        //values.put(IMEI_MOB, contact.getImei()); // Contact Name
        values.put(KEY_MO_NO, contact); // Contact Phone

        // Inserting Row
        db.insert(TABLE_NAME, null, values);
        db.close(); // Closing database connection
    }

    public List<String> getSIMContacts() {
        List<String> contactList = new ArrayList<String>();
        // Select All Query
        String selectQuery = "SELECT " + KEY_MO_NO +" FROM " + TABLE_NAME;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                /*Contact contact = new Contact();
                contact.setStrId(Integer.parseInt(cursor.getString(0)));
                //contact.setName(cursor.getString(1));
                contact.setMobileNum(cursor.getString(2));*/
                // Adding contact to list
                contactList.add(cursor.getString(0));
            } while (cursor.moveToNext());
        }
        cursor.close();
        // return contact list
        return contactList;
    } 
```

我阅读了帖子并编辑了数据。我进行了更改，但是当我检索数据时，我进入了无限循环。代码如下

```
saveButton.setOnClickListener(new OnClickListener() {
              @Override
              public void onClick(View v) {
                  List<String> list;
                  list=db.getSIMContacts();
                  while(list.iterator().hasNext())
                  {
                      String retrieved_num=list.iterator().next();
                      listItems.add(retrieved_num); 
                      adapter.notifyDataSetChanged();

                  }

              }
      }); 
```

在这个数据库上，我希望 KEY_ID 是具有自动递增和递减功能的主键，并且还有另一个函数用于获取与键 id 值对应的移动编号。它看起来像这样但有一些问题。请帮我解决它

```
String getContact(int id) {
    String str="";
        try{
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_NAME, new String[] { KEY_ID
                  }, KEY_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

         str+=cursor.getString(2);
        // return contact
        cursor.close();
        }catch(Exception e)
        {
            Log.e("Get Contact Exception", ""+e);
        }
        return str;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:12:27.047

您的查询是错误的，因为您`KEY_MO_NO`在引号中给出了字段。

这个

```
 String selectQuery = "SELECT " + "KEY_MO_NO" +" FROM " + TABLE_NAME; 
```

应该

```
 String selectQuery = "SELECT " + KEY_MO_NO +" FROM " + TABLE_NAME; 
```

# ajax - 使用 mootools 和 node.js 和 expressjs 发出 AJAX 请求

> ID：15999921
> 
> 赞同：0
> 
> 时间：2013-04-14T14:03:29.683
> 
> 标签：ajax, node.js, mootools

我正在尝试使用 mootools 在节点 0.10.3 上建立 AJAX 连接。我的代码是：

**客户**

```
var ajax = new Request({
url: '/register',
method: 'post',
onSuccess: function(responseText){
    console.log(responseText);
}
 })

 var json = {data:'data'};
 ajax.send(JSON.stringify(json));
 //ajax.send(json); 
```

**服务器**

```
var express = require('express');
var app = express();

app.use(express.static(__dirname + '/public'));

app.listen(1344);

app.post('/register', function(req,res){
     //Auth.register()
     console.log(req.body);
     res.contentType('json');
     res.send({ some: JSON.stringify({response:'json'}) })
}) 
```

连接正常。在客户端上，我得到了响应。所以`console.log(responseText)`OnSucces 方法内部正在打印正确的值。

但在服务器端，`console.log(req.body)`是`undefined`.

我在这里有几个疑问。mootools 是否将 javascript 对象转换为 json 字符串？是否有必要转换对象？通过 AJAX 向节点发送信息的正确方法是什么？这`ajax.send(JSON.stringify(json));`行吗？或者是这样的`ajax.send(json)`;？

我是否需要将标头指定为 json？

除了解决特定问题之外，最好有一些文章，或者一些反馈来明确阐明围绕 node.js 的这些概念。

**编辑**

对于那些面临类似问题的人，我将发布正确的代码。Noah 对解析器的看法是正确的，但还有另一个细节，解析器期待关键数据。幸运的是，我以数据为例！

**客户**

```
var ajax = new Request({
   url: '/register',
   method: 'post',
   onSuccess: function(responseText){
       console.log(responseText); //Logs "some": "{\"response\":\"json\"}"
   }
})
ajax.send({data:{ok:'OK'}}); 
```

**服务器**

```
var express = require('express');
var app = express();

app.use(express.static(__dirname + '/public'));
app.use(express.bodyParser());
app.listen(1344);

app.post('/register', function(req,res){
    console.log(req.body); //logs {ok:'OK'}
    res.contentType('json');
    res.send({ some: JSON.stringify({response:'json'}) })
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T15:30:51.490

在您发布的代码中，您缺少 bodyParser 中间件`app.use(express.bodyParser()`。

添加 bodyParser 中间件后，您将能够访问`req.body`

```
var express = require('express');
var app = express();
app.use(express.bodyParser()
app.use(express.static(__dirname + '/public'));
app.use(app.router) 
```

# c# - Unity - 解决依赖项返回错误

> ID：15999922
> 
> 赞同：1
> 
> 时间：2013-04-14T14:03:31.267
> 
> 标签：c#, dependency-injection, unity-container

我已经看到了有关此问题的几个问题和答案，但找不到使我能够解决问题的问题和答案。

该项目是一个 C# .NET 项目。

我得到的错误是：
`"InvalidOperationException - The type MyTypeName has multiple constructors of length 2\. Unable to disambiguate."`

当然，有几个构造函数接受 2 个参数，但是同一个项目中有几个类似的类，它们都有这些构造函数（相同的原型 - 当然名称不同）。

我添加的新类具有与其他类相同签名的构造函数，但由于某种原因，在解析此类时，我收到上述错误。

我总是设法正确配置统一并对其进行调试，但这一次我不知所措。

我应该去哪里看？

**编辑：**

这是类构造函数。整个班级都很大，所以我试图只发布相关部分：

```
 public CategorizationServiceProxy() {
    }

    public CategorizationServiceProxy(string endpointConfigurationName) : 
            base(endpointConfigurationName) {
    }

    public CategorizationServiceProxy(string endpointConfigurationName, string remoteAddress) : 
            base(endpointConfigurationName, remoteAddress) {
    }

    public CategorizationServiceProxy(string endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) : 
            base(endpointConfigurationName, remoteAddress) {
    }

    public CategorizationServiceProxy(System.ServiceModel.Channels.Binding binding, System.ServiceModel.EndpointAddress remoteAddress) : 
            base(binding, remoteAddress) {
    } 
```

**另一个编辑：**

这是上述类的统一配置。还有 9 个其他类，全部以完全相同的方式配置，并且都正确实例化。

```
<register
    type="SA.Contracts.CategorizationService.ICategorizationService, SA.Contracts, PublicKeyToken=5021cc32571ca775"
    mapTo="SA.Service.Categorization.CategorizationServiceImpl, SA.Service.Categorization, PublicKeyToken=5021cc32571ca775" >
    <lifetime type="singleton" />
  </register> 
```

谢谢。

# ruby-on-rails-3 - 思考 sphinx postgres ruby on rails rake ts:start

> ID：15999925
> 
> 赞同：-2
> 
> 时间：2013-04-14T14:03:52.797
> 
> 标签：ruby-on-rails-3, thinking-sphinx

我想在我的应用程序上运行 Thinking sphinx。当我运行时`rake ts:start`出现这个错误
sphinx 2.0.7
thinking sphinx 2.0.10
rails 3.2.11
ruby​​ 1.9.2p290
psql (9.1.9)

```
/rails_projects/my_app$ rake ts:start RAILS_ENV=development --trace
** Invoke ts:start (first_time)
** Invoke thinking_sphinx:start (first_time)
** Invoke thinking_sphinx:app_env (first_time)
** Execute thinking_sphinx:app_env
** Execute thinking_sphinx:start
rake aborted!
searchd is already running.
/home/andrew/.rvm/gems/ruby-1.9.2-p290/gems/thinking-sphinx-2.0.10/lib/thinking_sphinx/tasks.rb:32:in `block (2 levels) in <top (required)>'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:246:in `call'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:246:in `block in execute'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:241:in `each'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:241:in `execute'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:184:in `block in invoke_with_call_chain'
/home/andrew/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:177:in `invoke_with_call_chain'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:205:in `block in invoke_prerequisites'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:203:in `each'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:203:in `invoke_prerequisites'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:183:in `block in invoke_with_call_chain'
/home/andrew/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:177:in `invoke_with_call_chain'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/task.rb:170:in `invoke'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/application.rb:143:in `invoke_task'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/application.rb:101:in `each'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/application.rb:101:in `block in top_level'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/application.rb:110:in `run_with_threads'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/application.rb:95:in `top_level'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/application.rb:73:in `block in run'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/gems/rake-10.0.4/bin/rake:33:in `<top (required)>'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/bin/rake:19:in `load'
/home/andrew/.rvm/gems/ruby-1.9.2-p290@global/bin/rake:19:in `<main>'
/home/andrew/.rvm/gems/ruby-1.9.2-p290/bin/ruby_noexec_wrapper:14:in `eval'
/home/andrew/.rvm/gems/ruby-1.9.2-p290/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => ts:start => thinking_sphinx:start 
```

/rails_projects/my_app $ 搜索

```
Sphinx 2.0.7-release (r3759)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

FATAL: no readable config file (looked in /usr/local/etc/sphinx.conf, ./sphinx.conf). 
```

在 /usr/local/etc/ 只有 example.sql sphinx.conf.dist sphinx-min.conf.dist

/rails_projects/my_app $ ps aux | grep 搜索

```
user   23487  0.0  0.0  16392  1612 pts/0    S    15:39   0:01 searchd --pidfile --config /home/user/rails_projects/my_app/config/development.sphinx.conf
user   25808  0.0  0.0   5616   832 pts/0    S+   19:23   0:00 grep --colour=auto searchd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:09:11.327

`searchd`是 Sphinx 搜索守护进程 - 所以它的意思是 Sphinx 已经在运行。如果你运行`ps aux | grep searchd`，你会很容易地发现这个过程。如果您需要重新启动它，请*运行*`rake ts:restart`或`rake ts:stop`然后。 *`rake ts:start`*

# spring - 从 Web 应用程序（JSF 托管 bean）中调用 Struts Action Test：TestCase.fname 不能为空

> ID：15999929
> 
> 赞同：0
> 
> 时间：2013-04-14T14:04:23.303
> 
> 标签：spring, jsf, struts2, junit, struts

我有一个 Struts 2 操作的 Junit 3.8 测试，该操作在我的工作区中运行没有问题（来自 eclipse：右键单击 > 运行为 > junit 测试）。

为此，我使用了两个插件：

```
<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-junit-plugin</artifactId>
    <version>2.1.8</version>
</dependency>

<dependency>
    <groupId>org.apache.struts</groupId>
    <artifactId>struts2-spring-plugin</artifactId>
    <version>2.1.8</version>
</dependency> 
```

这是测试类：

```
package com.myapp.user.my;

import org.apache.struts2.StrutsSpringTestCase;

import com.myapp.user.action.UserAction;
import com.opensymphony.xwork2.ActionProxy;

public class TestAccountActionUsingStrutsTestCase extends StrutsSpringTestCase {

    public void testUserNameErrorMessage() throws Exception {

        request.setParameter("userBean.userName", "Bruc");
        request.setParameter("userBean.password", "test");

        ActionProxy proxy = getActionProxy("/userAction");

        UserAction userAction = (UserAction) proxy.getAction();

        proxy.execute();

        assertTrue("Problem There were no errors present in fieldErrors but there should have been one error present", userAction.getFieldErrors().size() == 1);
        assertTrue("Problem field user.userName not present in fieldErrors but it should have been",
                userAction.getFieldErrors().containsKey("userBean.userName") );

        System.out.println("Finish 1 test.");
    }

} 
```

接下来，我尝试**调用这个测试，这一次是从一个 Web 应用程序（一个 JSF 托管 bean）中调用的。**

这是我尝试执行此操作的代码（我`runTest()`从托管 bean 调用以下方法）：

```
import java.util.List;

import org.junit.runner.JUnitCore;
import org.junit.runner.Result;
import org.junit.runner.notification.Failure;

import com.myapp.user.my.TestAccountActionUsingStrutsTestCase;

public class CallStrutsActionExecuteThruTest {

    public void runTest(){

        System.out.println("CallStrutsActionExecuteThruTest.runTest() is executed.");

        TestAccountActionUsingStrutsTestCase test = new TestAccountActionUsingStrutsTestCase();

        JUnitCore jUnitCore = new JUnitCore();
        Result result = jUnitCore.run(test);

        List<Failure> list = result.getFailures();

        for (Failure failure : list) {
            System.out.println(failure.getMessage());
        }

        System.out.println("Test done!");
    }

} 
```

当我访问托管 bean 时，我可以看到它`runTest()`被调用。第一个输出`CallStrutsActionExecuteThruTest.runTest() is executed.`打印到控制台。奇怪的是，尽管调试器显示它们已执行，但下一个输出并未打印到控制台。

此外，`result.getFailures()`返回一个包含一个元素的列表。正如我所说，`failure.getMessage()`由于某种原因它没有打印到控制台，但是当我在调试器中观看它时，它的值是**`TestCase.fname cannot be null`**.

***即使我的测试类中只有一种方法：

```
public void testTrue() throws Exception {

    System.out.println("inside testTrue().");

    assertTrue(true);
} 
```

我仍然得到相同的结果。

我的问题是，

1.  如果我想从 JSF 托管 bean 运行 Struts 操作测试，我是否正确使用了 Junit API？

2.  为什么第一个输出之后的输出没有打印到控制台？

3.  如何设置`TestCase.fname`值？首先，我在我的测试类中没有看到设置这个值的方法。其次，据我了解，`fanme`是我要调用的测试类中的测试方法的名称；并且`jUnitCore.run(test)`应该调用测试类中的所有测试方法`test`，那么如何仅使用一个`fname`参数指定所有这些方法？

**下载- 你可以**[在这里](http://www.filedropper.com/struts2-with-spring-di-integration-example-junit-from-ui)下载我的项目。我使用 Maven、Eclipse 并在 Jboss 7 上进行部署。

我通过以下方式访问 JSF 托管 bean：`http://localhost:8080/Struts2WithSpringDIIntegrationExampleJunitFromUI-1.0-SNAPSHOT/xhtml/hello.jsf`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:35:27.553

出于某种原因，Struts2 测试不适用于原始参数。改为使用`parameterMap`。

```
Map<String, String[]> parameterMap = new HashMap<String, String[]>();
parameterMap.put("userBean.userName", new String[]{"Bruc"}); 
parameterMap.put("userBean.password", new String[]{"test"});
StrutsMockHttpServletRequest request = new StrutsMockHttpServletRequest();
request.setupGetServletPath("/userAction");
request.setParameterMap(parameterMap); 
```

# asp.net - CSS 相对和绝对定位

> ID：15999930
> 
> 赞同：3
> 
> 时间：2013-04-14T14:04:29.277
> 
> 标签：asp.net, css, positioning

我正在使用 css 相对和绝对在我的网站上的图片内定位链接的 div。问题是当我放大/缩小网页（或在手机上查看网页）时，链接会向左/向右移动。如何让链接保持在图片上的相同位置？

网站：www.cclandscaping.org

CSS 代码：

```
.header-links {
        position: absolute;
        z-index: auto;
        right: 25%;
        top: 43%;
        font-size: x-large;
    }
    .header-pic {
        position: relative;
    } 
```

图片及链接代码：

```
<div class="header-pic"; style="text-align: center">
        <asp:Image ID="Image2" runat="server" ImageUrl="~/Images/Header.png" />
        <div class="header-links">
                <asp:HyperLink ID="HyperLink5" runat="server" NavigateUrl="~/Default.aspx">Home</asp:HyperLink>
                &nbsp;|&nbsp; 
                <asp:HyperLink ID="HyperLink2" runat="server" NavigateUrl="~/Pages/About.aspx">About</asp:HyperLink>
                &nbsp;|&nbsp; 
                <asp:HyperLink ID="HyperLink3" runat="server" NavigateUrl="~/Pages/References.aspx">References</asp:HyperLink>
                &nbsp;|&nbsp; 
                <asp:HyperLink ID="HyperLink4" runat="server" NavigateUrl="~/Pages/ContactUs.aspx">Contact Us</asp:HyperLink>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T01:20:24.767

`.header-pic`必须有宽度。我也将其居中：

```
.header-pic {
    margin: 0 auto;
    position: relative;
    width: 1100px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T14:08:02.937

相对链接应该在绝对范围内。

IE。在你的 css 中用绝对值交换相对值。

```
.header-links {
        position: relative;
        z-index: auto;
        right: 25%;
        top: 43%;
        font-size: x-large;
    }
    .header-pic {
        position: absolute;
    } 
```

链接将无法移出绝对 div。

# ios5 - 核心数据 - 打破父上下文的保留周期

> ID：15999932
> 
> 赞同：14
> 
> 时间：2013-04-14T14:04:43.737
> 
> 标签：ios5, core-data, fault, retain-cycle

假设我们在核心数据模型中有两个实体：部门和员工。
部门与员工是一对多的关系。

我有以下 ManagedObjectContexts：
- Root：连接到 Persistent Store Coordinator
- Main：与父 Root 的上下文

当我想创建一个员工时，我执行以下操作：
- 我在主上下文中有一个部门 - 我在主上下文中
创建一个员工
- 我将部门分配给员工的部门属性
- 我保存主上下文
- 我保存根上下文

*这会在 Main 上下文和 Root 上下文中创建一个保留循环。*

如果我在没有子上下文的情况下执行此操作（全部在 Root 上下文中），那么我可以通过调用`refreshObject:mergeChanges`Employee 来打破保留循环。在我使用这两个上下文的情况下，我仍然可以使用该方法来打破 Main 上下文的循环，但我将如何打破 Root 上下文的循环？

*旁注：这是一个描述我的问题的简单示例。在 Instruments 中，我可以清楚地看到分配的数量在增长。在我的应用程序中，我的上下文比一层更深，导致了更大的问题，因为我得到了一个新的实体分配，每个上下文都有保留周期，我正在保存。*

**15/04 更新：NSPrivateQueueConcurrencyType 与 NSMainQueueConcurrencyType**
保存两个上下文后，我可以`refreshObject:mergeChanges`使用 Department 对象在 Main 上下文上执行。正如预期的那样，这将重新故障部门对象，打破保留周期并在该上下文中取消分配部门和员工实体。

下一步是打破存在于 Root 上下文中的保留循环（保存 Main 上下文已将实体传播到 Root 上下文）。我可以在这里做同样的技巧，并`refreshObject:mergeChanges`在带有 Department 对象的 Root 上下文中使用。

奇怪的是：当我的根上下文是用 NSMainQueueConcurrencyType 创建的（所有分配都重新出错并解除分配）时，这工作正常，但是当我的根上下文是用 NSPrivateQueueConcurrencyType 创建时不起作用（所有分配都重新出错，但**没有**解除分配）。

*旁注：根上下文的所有操作都在 performBlock(AndWait) 调用中完成*

**更新 15/04：第 2 部分**
当我使用 NSPrivateQueueConcurrencyType 在根上下文上执行另一个（无用，因为没有更改）保存或回滚时，对象似乎已被释放。我不明白为什么这与 NSMainQueueConcurrencyType 的行为不同。

**16/04 更新：演示项目**
我创建了一个演示项目：[http ://codegazer.com/code/CoreDataTest.zip](http://codegazer.com/code/CoreDataTest.zip)

**21/04 更新：到达那里**
谢谢 Jody Hagings 的帮助！
我正在尝试`refreshObject:mergeChanges`移出我的 ManagedObject`didSave`方法。

您能否向我解释一下两者之间的区别：

```
[rootContext performBlock:^{
    [rootContext save:nil];
    for (NSManagedObject *mo in rootContext.registeredObjects)
        [rootContext refreshObject:mo mergeChanges:NO];
}]; 
```

和

```
[rootContext performBlock:^{
    [rootContext save:nil];
    [rootContext performBlock:^{
        for (NSManagedObject *mo in rootContext.registeredObjects)
            [rootContext refreshObject:mo mergeChanges:NO];
    }];
}]; 
```

顶部的不会释放对象，底部的会。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T18:21:12.433

我查看了您的示例项目。感谢发帖。

首先，您看到的行为不是错误……至少在 Core Data 中不是。如您所知，关系会导致保留周期，必须手动中断（此处记录：[https](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdMemory.html) ://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdMemory.html ）。

您的代码在`didSave:`. 可能有更好的地方可以打破循环，但那是另一回事。

请注意，您可以通过查看`registeredObjects`属性轻松查看 MOC 中注册了哪些对象。

但是，您的示例将永远不会释放根上下文中的引用，因为`processPendingEvents`永远不会在该 MOC 上调用。因此，MOC 中的注册对象永远不会被释放。

Core Data 有一个称为“用户事件”的概念。默认情况下，“用户事件”被正确包装在主运行循环中。

但是，对于不在主线程上的 MOC，您有责任确保正确处理用户事件。请参阅此文档： http: [//developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html)，特别是标题为 的部分的最后一段`Track Changes in Other Threads Using Notifications`。

当你调用`performBlock`你给它的块时，它被包装在一个完整的用户事件中。但是，情况并非如此`performBlockAndWait`。因此，私有上下文 MOC 将这些对象保留在其`registeredObjects`集合中，直到`processPendingChanges`被调用。

在您的示例中，如果您在`processPendingChanges`内部调用`performBlockAndWait`或将其更改为`performBlock`. 其中任何一个都将确保 MOC 完成当前的用户事件并从`registeredObjects`集合中删除对象。

**编辑**

响应您的编辑...并不是第一个不解除分配对象。就是 MOC 仍然将对象注册为故障。那发生*在*保存之后，在同一事件中。如果您只是发出一个无操作块`[context performBlock:^{}]`，您将看到从 MOC 中删除的对象。

因此，您无需担心，因为在该 MOC 的下一次操作中，对象将被清除。你不应该有一个长期运行的背景 MOC 无论如何什么都不做，所以这对你来说真的没什么大不了的。

通常，您不想只刷新所有对象。但是，如果您想在保存后删除所有对象，那么您最初的想法`didSave:`是合理的，因为这发生在保存过程中。但是，这将在所有上下文中出错（您可能不想要）。对于后台 MOC，您可能只需要这种严厉的方法。你可以签到`object.managedObjectContext`，`didSave:`但这不是一个好主意。最好为 DidSave 通知安装一个处理程序......

```
id observer = [[NSNotificationCenter defaultCenter]
    addObserverForName:NSManagedObjectContextDidSaveNotification
                object:rootContext
                 queue:nil
            usingBlock:^(NSNotification *note) {
    for (NSManagedObject *mo in rootContext.registeredObjects) {
        [rootContext refreshObject:mo mergeChanges:NO];
    }
}]; 
```

你会看到这可能会给你你想要的……虽然只有你可以确定你真正想要完成的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T05:55:09.123

您在上面描述的步骤是您在 Core Data 中执行的常见任务。[Apple 在Core Data Programming Guide: Object Lifetime Management](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdMemory.html)中清楚地记录了副作用。

> 当您在托管对象之间建立关系时，每个对象都维护对与其相关的一个或多个对象的强引用。这可能会导致强参考周期。为确保引用循环被打破，当您完成一个对象时，您可以使用托管对象上下文方法 refreshObject:mergeChanges: 将其变为故障。

对象仅在它们不是故障而是实时实例时才保持对彼此的强引用`NSManagedObject`。使用嵌套上下文，将对象保存在主上下文中，这些更改**应该**传播到您的根上下文。但是，除非您在根上下文中获取它们，否则**不应**创建保留周期。保存完主要上下文后，只需刷新这些对象即可。

**关于一般的内存占用：**

如果您觉得分配变得失控，您可以尝试构建您的代码，以便您在完成任务时丢弃的单独上下文中执行任务，这会导致大量对象触发错误。

此外，如果您使用的是撤消管理器，

> 与上下文关联的撤消管理器保持对任何更改的托管对象的强引用。默认情况下，在 OS X 中，上下文的撤消管理器保持无限的撤消/重做堆栈。为了限制应用程序的内存占用，您应该确保在适当的时候清理（使用 removeAllActions）上下文的撤消堆栈。除非您保留对上下文的撤消管理器的强引用，否则它将与上下文一起释放。

**更新#1：**

在尝试了分配工具和专门为测试这一点而编写的一段代码之后，我可以确认根上下文不会释放内存。这要么是框架错误，要么是设计使然。我在[这里](https://stackoverflow.com/questions/15184858/core-data-multi-context-importing-and-faulting)找到了一篇描述相同问题的帖子。

`[context reset]`之后调用`[context save:]`确实释放了内存。我还注意到，在保存之前，根上下文包含我通过子上下文插入的所有对象`[context insertedObjects]`。遍历它们并做`[context refreshObject:mergeChanges:NO]`确实重新错误的对象。

所以似乎没有什么变通方法，但我不知道这是否是一个错误并且将在即将发布的版本中修复，或者它会保持设计不变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T20:45:19.757

当保存到根上下文时，唯一持有对对象的强引用的是根上下文本身，因此，如果您只是重置它，对象将在根上下文中被释放。
你保存的流程应该是：
-save main
-save root
-reset root

我没有重置或刷新主上下文中的对象，即使没有发现泄漏或僵尸。在父上下文的保存和重置之后，内存似乎被分配和释放。

# java - 获取其他类中的变量

> ID：15999934
> 
> 赞同：5
> 
> 时间：2013-04-14T14:05:00.717
> 
> 标签：java, class

我需要`inString`在其他类中获取变量。我怎样才能做到这一点？

```
public class main {
    public static StringBuffer inString;

    public static void main(String[] args) {
        inString = new StringBuffer("Our aim is to make a 15 realistic game, where grinding powerlines and doing a tailwhip isn't easy, like in the real world. A game in which you will feel like you're actual riding. A game in which creativity and beauty are combined. ");
        inString = new StringBuffer(inString.toString().replaceAll(" +", " "));
        }
} 
```

所以我尝试`System.out.println(main.inString);`在我的 Textcl.class 中使用，但得到`null`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T14:06:19.447

您可以通过以下方式获得它：`main.inString`where是声明变量`main`的类的名称。`public static`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T14:07:51.017

您将得到 null 因为 inString 从未像 Robert Kilar 在评论中正确指出的那样初始化。

您通过使用类名来引用静态变量。

示例 ClassName.variablename。在你的情况下

```
 main.inString 
```

运行你的主类。当你运行 inString 时，在类的构造函数中被初始化。现在您可以在 Myclass 中引用相同的内容，如下所示。

```
public class main {
public static StringBuffer inString;

public main()
{
inString = new StringBuffer("Our aim is to make a 15 realistic game, where grinding powerlines and doing a tailwhip isn't easy, like in the real world. A game in which you will feel like you're actual riding. A game in which creativity and beauty are combined. ");
inString = new StringBuffer(inString.toString().replaceAll(" +", " "));
new MyClass();
}
public static void main(String[] args) {
    new main();
    }
} 
```

现在在 MyClass 中引用静态变量。

```
class MyClass {

public MyClass() {
    System.out.println("............."+main.inString);// refer to static variable
}
} 
```

您还可以将变量传递给类的构造函数。

```
public class main {
public  StringBuffer inString;

 public main()
  {
    inString = new StringBuffer("Our aim is to make a 15 realistic game, where grinding powerlines and doing a tailwhip isn't easy, like in the real world. A game in which you will feel like you're actual riding. A game in which creativity and beauty are combined. ");
    inString = new StringBuffer(inString.toString().replaceAll(" +", " "));  
    new MyClass(inString);
 }
public static void main(String[] args) {
    new main();

    }
} 
```

然后在 Myclass

```
 public class MyClass
 {
        public MyClass(StringBuffer value)
        {
          System.out.println("............."+value);
        }
 } 
```

请检查链接@[为什么静态变量被认为是邪恶的？](https://stackoverflow.com/questions/7026507/why-are-static-variables-considered-evil)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T14:09:45.683

由于您将类中的字段设为静态，因此您可以使用类名来访问它，即

```
main.inString 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T14:12:45.050

使用[JavaBeans](https://en.wikipedia.org/wiki/JavaBeans)并将其作为其字段之一存储，并为此使用 getter 和 setter。

JavaBean 是具有属性的 Java 类。将属性视为私有实例变量。由于它们是私有的，因此从类外部访问它们的唯一方法是通过类中的方法。更改属性值的方法称为 setter 方法，检索属性值的方法称为 getter 方法。

```
public class VariableStorage implements Serializable  {

    private String inString;

    public String getInString() {
        return inString;
    }

    public void setInString(String inString) {
        this.inString = inString;
    }
} 
```

使用以下方法在邮件方法中设置变量：

```
VariableStorage variableStorage = new VariableStorage();
variableStorage.setInString(inString); 
```

然后使用对象序列化来序列化这个对象，并在你的其他类中反序列化这个对象。

在序列化中，对象可以表示为一个字节序列，其中包括对象的数据以及有关对象类型和存储在对象中的数据类型的信息。

序列化对象写入文件后，可以从文件中读取并反序列化。也就是说，表示对象及其数据的类型信息和字节可用于在内存中重新创建对象。

如果您需要这方面的教程，请参阅*[Java 中的序列化](http://javawithswaranga.blogspot.in/2011/08/serialization-in-java.html)*。

# php - Mysql Php使用事务和提交一次选择和处理一条记录

> ID：15999943
> 
> 赞同：2
> 
> 时间：2013-04-14T14:05:35.507
> 
> 标签：php, mysql

从一个表中选择一系列 id 然后将它们放入事务循环以一次处理更新一条记录的最佳方法是什么？

```
$result = mysql_query('SELECT p_code FROM replenishment ');
$ids = array();

while ($p_code = mysql_fetch_row($result)) {
    $ids[] = $p_code[0];
    foreach($ids as $p_code) {
        mysql_query('SELECT @A:=replenishment.p_code,@B:=replenishment.model
                        from replenishment
                        left join replenishment1 on replenishment1.p_code = replenishment.p_code
                        where replenishment.branch=10
                        and replenishment.p_code=$p_code
                        and replenishment.stock < min

                        and replenishment1.stock > 0

                        group by replenishment.p_code');
        mysql_query('UPDATE replenishment1
                        SET stock = (stock - @B), B5=(b5+@B)  WHERE @A = replenishment1.p_code
                        and replenishment1.stock >= @B');
        $row = mysql_fetch_assoc();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:02:11.067

**开始使用 PDO 或 MySQLi。**

通过这个，您可以管理您的事务并确保数据安全地输入您的数据库。

```
<?php
try {
  $dbh = new PDO('odbc:SAMPLE', 'db2inst1', 'ibmdb2', 
      array(PDO::ATTR_PERSISTENT => true));
} catch (Exception $e) {
  die("Unable to connect: " . $e->getMessage());
}

try {  
  $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

  $dbh->beginTransaction();

/* You can put your foreach loop over here or you can also do the entire process for single update. It's your choice */

  $dbh->commit();

} catch (Exception $e) {
  $dbh->rollBack();
  echo "Failed: " . $e->getMessage();
}
?> 
```

它保证在完成之前没有其他人能够看到这些更改。如果出现问题，catch 块会回滚自事务启动以来所做的所有更改，然后打印出错误消息。

# post - 禁止未加密的 PUT 到 S3

> ID：15999955
> 
> 赞同：4
> 
> 时间：2013-04-14T14:07:13.230
> 
> 标签：post, encryption, amazon-s3, policy, bucket

我有一个有效的直接浏览器上传表单，可以将文件从浏览器直接上传到 S3，包括通过上传策略和表单字段为每次上传启用服务器端加密`for x-amz-server-side-encryption`。

问题在于 S3 端的存储桶策略对上传的文件强制执行服务器端加密。在没有存储桶策略的情况下，我的文件完美上传，并启用了服务器端加密。当我添加存储桶策略时，上传被拒绝并出现 HTTP 403 (AccessDenied) 错误。

这是我正在使用的完整存储桶策略（摘自亚马逊文档）：

```
{
  "Version": "2008-10-17",
  "Id": "PutObjPolicy",
  "Statement": [
    {
      "Sid": "DenyUnEncryptedObjectUploads",
      "Effect": "Deny",
      "Principal": {
        "AWS": "*"
      },
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::MY-BUCKET-NAME/*",
      "Condition": {
        "StringNotEquals": {
          "s3:x-amz-server-side-encryption": "AES256"
        }
      }
    }
  ]
} 
```

以下是在上传表单中签名和使用的策略（未编码和格式化）示例：

```
{
  "expiration": "2013-04-14T14:29:56.000Z",
  "conditions": [
    {
      "bucket": "MY-BUCKET-NAME"
    },
    {
      "acl": "private"
    },
    {
      "x-amz-server-side-encryption": "AES256"
    },
    [
      "starts-with", "$key", "uploads/"
    ],
    {
      "success_action_status": "201"
    }
  ]
} 
```

为简洁起见，我将省略上传表单的详细信息，但可以说，它为`x-amz-server-side-encryption`. 同样，这在没有存储桶策略的情况下有效，因此我相信客户端方面的情况良好。我的猜测是在这一点上，也许我应该专门*允许*某类 PUT，但我不确定要添加什么。

有任何想法吗？

# c# - 将对象的内容添加到列表而不是参数类型？

> ID：15999956
> 
> 赞同：0
> 
> 时间：2013-04-14T14:07:18.657
> 
> 标签：c#, list, object

希望我描述得足够准确和清楚。我正在尝试保存用户输入的多个详细信息并将它们保存到列表中。然而，我目前这样做的方式是只保存对象类型/名称而不是数据。下面是我的代码，我将如何保存对象数据而不是对象的名称？

```
Student stud = new Student();
stud.Enter_Student();
_studentList.Add(stud); 
```

进入学生

```
class Student : Person
{
    public string StudentId { get; private set; }
    public string Subject { get; private set; }

    //string[] _studentdb = new string[4];

    public Student()
    {
        StudentId = "abc123";
        Subject = "Building Subject";
    }

    public void Enter_Student()
    {
            this.Person_Prompt_Print(); //Prompts for user
            this.Address_Prompt_Print();
            this.Contact_Prompt_Print();
            Console.SetCursorPosition(4, 18);
            Console.WriteLine("Student ID:");

            this.Enter_Person(); // Inputs from user
            this.Enter_Address();
            this.Enter_Contacts();
            StudentId = Console.ReadLine();
            Console.SetCursorPosition(30, 18);
    }
} 
```

人员类的日期样本

```
class Person
{

    Tidyup tidy = new Tidyup();

    public string FirstName { get; private set; }
    public string Surname { get; private set; }
    public string MiddleName { get; private set; }
    public string AddressLine1 { get; private set; }
    public string AddressLine2 { get; private set; }
    public string Town { get; private set; }
    public string Postcode { get; private set; }
    public string Email { get; private set; }
    public string Telephone { get; private set; }

    public Person()
    {
        FirstName = "Name";
        Surname = "Surname";
        MiddleName = "Middle Name";
        AddressLine1 = "Address";
        AddressLine2 = "Address Ln2";
        Town = "Town";
        Postcode = "<xxx>/<xxx>";
        Email = "name@buildright.ac.uk";
        Telephone = "0800 0000000";
    }

    public void Person_Prompt_Print()
    {
        // Program Frame
        tidy.Line_Top();
        tidy.Line_Base();
        tidy.Sides_Left();
        tidy.Sides_Right();

        Console.SetCursorPosition(4, 2); //Prompts for user
        Console.WriteLine("FirstName:");
        Console.SetCursorPosition(4, 4);
        Console.WriteLine("Surname:");
        Console.SetCursorPosition(4, 6);
        Console.WriteLine("Middle Name:");
    }

    public void Address_Prompt_Print()
    {
        Console.SetCursorPosition(4, 8); //Prompts for user
        Console.WriteLine("House Number/Name:");
        Console.SetCursorPosition(4, 10);
        Console.WriteLine("Street:");
        Console.SetCursorPosition(4, 12);
        Console.WriteLine("Town:");
        Console.SetCursorPosition(4, 14);
        Console.WriteLine("Post Code:");
    }

    public void Contact_Prompt_Print()
    {
        Console.SetCursorPosition(4, 16);
        Console.WriteLine("Email:");
        Console.SetCursorPosition(4, 18);
        Console.WriteLine("Telephone:");
    }

    public void Enter_Person()
    {

        Console.SetCursorPosition(30, 2); // Inputs from user
        FirstName = Console.ReadLine();
        Console.SetCursorPosition(30, 4);
        Surname = Console.ReadLine();
        Console.SetCursorPosition(30, 6);
        MiddleName = Console.ReadLine();
    }

    public void Enter_Address()
    {

        Console.SetCursorPosition(30, 8);  // Inputs from user
        AddressLine1 = Console.ReadLine();
        Console.SetCursorPosition(30, 10);
        AddressLine2 = Console.ReadLine();
        Console.SetCursorPosition(30, 12);
        Town = Console.ReadLine();
        Console.SetCursorPosition(30, 14);
        Postcode = Console.ReadLine();
    }

    public void Enter_Contacts()
    {
        Console.SetCursorPosition(30, 16);
        Email = Console.ReadLine();
        Console.SetCursorPosition(30, 18);
        Telephone = Console.ReadLine();
    }

} // End of Class 
```

最后我通过一个简单的嵌套 foreach 循环打印出来

```
public void Print_all_student()
{
    Console.Clear();

    foreach (Student t in _studentList)
    {
        // print another list items.
        foreach (Student t1 in _studentList)
        {
            Console.WriteLine("/" + t + "/" + t1);
        }
    }
    Console.ReadKey();
} 
```

如果有人可以帮助我了解我缺少什么以及如何访问数据以打印出来，我将不胜感激。提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:12:39.203

这里有很多问题，但是在你的`Console.WriteLine`调用中，你只显示`Student`类型，所以会调用类型`ToString`上的方法，默认情况下会显示类型名称。`Student`

您想显示`Student`类型的各个属性，例如

```
foreach (Student student in studentList)
{
    Console.WriteLine(student.FirstName);
    Console.WriteLine(student.Surname);
    // etc
} 
```

请记住，`Student`派生自`Person`，因此所有公共属性都可以从`Student`引用访问，因为`Student`是`Person`.

还：

1.  你有一个冗余循环——你只需要一个循环来枚举`studentList`
2.  这里确实存在各种担忧。您的`Student`和`Person`类型不应该与 UI 相关（即与`Console`调用有关的任何事情）
3.  坚持使用 PascalCase（又名 UpperCamelCase）作为您的方法名称，没有下划线

# vim - 可以打开/关闭自动命令吗？

> ID：15999958
> 
> 赞同：4
> 
> 时间：2013-04-14T14:07:25.000
> 
> 标签：vim

我已经在我的 .vimrc 中突出显示与当前光标上的单词匹配的所有单词

```
autocmd CursorMoved * silent! exe printf('match Search /\<%s\>/', expand('<cword>')) 
```

但有时它有点烦人，所以我想映射一个键来打开或关闭它，例如`<F10>`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T14:20:16.240

清除自动命令并删除突出显示：

```
nmap <f8> :autocmd! CursorMoved<cr> :call clearmatches()<cr> 
```

并使用不同的键重新打开它：

```
nmap <f9> :autocmd CursorMoved * silent! exe printf('match Search /\<%s\>/', expand('<cword>'))<cr> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T15:08:24.980

将以下内容放入您的 .vimrc 中：

```
let g:toggleHighlight = 0
function! ToggleHighlight(...)
  if a:0 == 1 "toggle behaviour
    let g:toggleHighlight = 1 - g:toggleHighlight
  endif

  if g:toggleHighlight == 0 "normal action, do the hi
    silent! exe printf('match Search /\<%s\>/', expand('<cword>'))
  else
    "do whatever you need to clear the matches
    "or nothing at all, since you are not printing the matches
  endif
endfunction

autocmd CursorMoved * call ToggleHighlight()
map <F8> :call ToggleHighlight(1)<CR> 
```

这个想法是，如果您使用参数调用该函数，它会将行为更改为打印/不打印。自动命令只使用最后一个设置，因为那里的函数在没有参数的情况下被调用。

# python - LinkedIn API Python 密钥错误 2.7

> ID：15999960
> 
> 赞同：1
> 
> 时间：2013-04-14T14:07:40.817
> 
> 标签：python, json, csv

此代码可在线使用，用于在linkedin 中运行您的连接图。这使用linkedin api。我能够正常连接，并且一切运行正常，直到最后一个脚本将数据实际写入 csv。

每当我运行代码时

```
import oauth2 as oauth
import urlparse
import simplejson
import codecs

CONSUMER_KEY = "xxx"
CONSUMER_SECRET = "xxx"
OAUTH_TOKEN = "xxx"
OAUTH_TOKEN_SECRET = "xxx"

OUTPUT = "linked.csv"

def linkedin_connections():

    # Use your credentials to build the oauth client
consumer = oauth.Consumer(key=CONSUMER_KEY, secret=CONSUMER_SECRET)
token = oauth.Token(key=OAUTH_TOKEN, secret=OAUTH_TOKEN_SECRET)
client = oauth.Client(consumer, token)

# Fetch first degree connections
resp, content = client.request('http://api.linkedin.com/v1/people/~/connections?format=json')
results = simplejson.loads(content)    

# File that will store the results
output = codecs.open(OUTPUT, 'w', 'utf-8')

# Loop thru the 1st degree connection and see how they connect to each other
for result in results["values"]:
    con = "%s %s" % (result["firstName"].replace(",", " "),    result["lastName"].replace(",", " "))
    print >>output, "%s,%s" % ("John Henry",  con)

# This is the trick, use the search API to get related connections
    u = "https://api.linkedin.com/v1/people/%s:(relation-to-viewer:(related-connections))?format=json" % result["id"]
    resp, content = client.request(u)
    rels = simplejson.loads(content)
try:
for rel in rels['relationToViewer']['relatedConnections']['values']:
    sec = "%s %s" % (rel["firstName"].replace(",", " "), rel["lastName"].replace(",", " "))
    print >>output, "%s,%s" % (con, sec)
except:
    pass

if __name__ == '__main__':
    linkedin_connections()     

for result in results["values"]:
    KeyError: 'values' 
```

当我运行它时，我收到一条错误消息：

```
Traceback (most recent call last):

File "linkedin-2-query.py", line 51, in <module>
linkedin_connections()
File "linkedin-2-query.py", line 35, in linkedin_connections
for result in results["values"]:
KeyError: 'values' 
```

任何建议或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T19:56:52.220

[我在使用 Gephi 可视化您的 LinkedIn 图表 - 第 1 部分](http://dataiku.com/visualizing-your-linkedin-graph-using-gephi-part-1/#comment-723)的帖子中遇到了同样的问题。

> 每当请求 dict() 对象（使用格式 a = adict[key]）并且键不在字典中时，Python 都会引发 KeyError。 [KeyError - Python 维基](http://wiki.python.org/moin/KeyError)

经过一番搜索并添加了一些打印语句后，我意识到我的 OAuth 会话已过期，因此我[`linkedin-2-query.py`](https://gist.github.com/micahstubbs/5744765)脚本中的 OAuth 令牌不再有效。

`"values"`由于 OAuth 令牌无效，LinkedIn API 不会像脚本期望的那样返回带有密钥的字典。相反，API 返回字符串`'N'`。Python 尝试`"values"`在字符串中查找 dict 键`'N'`，失败，并生成`KeyError: 'values'`.

因此，一个新的、有效的 OAuth 令牌和密钥应该让 API 返回一个包含连接数据的字典。

* * *

我[`linkedin-1-oauth.py`](https://gist.github.com/micahstubbs/5744717)再次运行该脚本，然后访问 LinkedIn[应用程序详细信息页面](https://www.linkedin.com/secure/developer)以查找我的新 OAuth 令牌。（屏幕截图省略了我的应用程序的值。您应该看到每个 Key、Token 和 Secret 的字母数字值。）

![在此处输入图像描述](https://i.stack.imgur.com/o4SBc.png)

**...**

![在此处输入图像描述](https://i.stack.imgur.com/jDCky.png)

**然后我使用新的OAuth 用户令牌**和**OAuth 用户密码**更新我的[`linkedin-2-query.py`](https://gist.github.com/micahstubbs/5744765)脚本

 ****```
OAUTH_TOKEN = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" # your updated OAuth User Token
OAUTH_TOKEN_SECRET = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" # your updated OAuth User Secret 
```

更新 OAuth 令牌和密码后，我立即运行我的[`linkedin-2-query.py`](https://gist.github.com/micahstubbs/5744765)脚本。万岁，它运行没有错误，并从 API 检索我的连接数据。****

# symfony - 使用实体内部的 ORM 表达式获取所有行

> ID：15999967
> 
> 赞同：0
> 
> 时间：2013-04-14T14:08:44.780
> 
> 标签：symfony

我找不到关于我在实体内部看到的“ORM 表达式”的好文档，所以我有点困惑。

我的*用户*实体中有这个：

```
/**
* @var ArrayCollection $administered
*
* @ORM\ManyToMany(targetEntity="Done\PunctisBundle\Entity\Brand", inversedBy="admins")
* @ORM\JoinTable(name="user_brand_administered")
**/
protected $administered; 
```

这工作正常，但我需要更简单的东西，我需要*管理*var来获取*品牌*实体的所有值，而不是像下面的代码那样加入表 user_brand_administrated。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:49:37.550

Why do you want all the value here ?

With a custom EntityRepository you can use a method to retrieve your object like you want.

For exemple.

```
class UserRepository extends EntityRepository
{
    public function findOneWithRelation($id)
    {
        $qb = $this->createQueryBuilder('u')
            ->select('u, b')
            ->leftJoin('u.administered, b')
            ->where('u.id = :id')
            ->setParameter('id', $id)
            ->getQuery()
            ->getResult();
    }
} 
```

And attach this repository with your user entity:

```
/**
 * @Entity(repositoryClass = "Path\To\UserRepository")
 */
class User
{
// ...
} 
```

Like this you can retrieve your user with all the brands.

Hope it's helpful.

Best regard.

# jquery - 在两个输入中区分警报消息

> ID：15999968
> 
> 赞同：0
> 
> 时间：2013-04-14T14:08:53.137
> 
> 标签：jquery, html, twitter-bootstrap, alert

我有一个区域文本，当我单击保存时，如果消息为空，则会出现一个错误框。但是，如果我制作两个文本框，则消息会出现在两个区域中。如何区分它们？我尝试使用不起作用的 id。

[http://gyazo.com/5ae3f1bd82ac829094c3ca567882b3f2](http://gyazo.com/5ae3f1bd82ac829094c3ca567882b3f2)

这是我的代码：

```
<body>
<div class="container">
    <form id="messageAbsence">
         <div class="control-group">
                <div class="controls">
                    <label class="form-horizontal">
                        <textarea class="span10" id="text1"></textarea>
                        <button class="btn" id="1">Sauvegarder</button>
                    </label>

                    <div class="alert alert-error hide">
                        <h4 class="alert-heading">Erreur !</h4>
                     Vous devez entrer au moins 4 caractères et au plus 200 caractères !
                    </div>
                    <div class="alert alert-info hide">
                        <h4 class="info-heading">Succes!</h4>
                         Message bien enregistré.
                    </div>
                </div>
        </div>
    </form>
    <form id="redirect">
         <div class="control-group">
                <div class="controls">
                    <label class="form-horizontal">
                        <textarea class="span10" id="text2"></textarea>
                        <button class="btn" id="2">Sauvegarder</button>
                    </label>

                    <div class="alert alert-error hide">
                        <h4 class="alert-heading">Erreur !</h4>
                     Vous devez entrer au moins 4 caractères et au plus 200 caractères !
                    </div>
                    <div class="alert alert-info hide">
                        <h4 class="info-heading">Succes!</h4>
                         Message bien enregistré.
                    </div>
                </div>
        </div>
    </form>
</div> 
```

<

```
!--message error test trop court ou trop long -->
<script type="text/javascript">

    $(function(){
        $("#1").click( function(){
        if($("#text1").val().length < 4 || $("#text1").val().length > 200){
            $("div.alert-error").show("slow").delay(4000).hide("slow");
            return false;
        }
        else
        {
            $("div.alert-info").show("slow").delay(4000).hide("slow");
                return false;
        }
        });
    });

    $(function(){
        $("#2").click( function(){
        if($("#text2").val().length < 4 || $("#text2").val().length > 200){
            $("div.alert-error").show("slow").delay(4000).hide("slow");
            return false;
        }
        else
        {
            $("div.alert-info").show("slow").delay(4000).hide("slow");
                return false;
        }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:14:33.303

尝试这个：

```
$(function () {
    $("#1").click(function () {
        if ($("#text1").val().length < 4 || $("#text1").val().length > 200) {
            $(this).parent().siblings("div.alert-error").show("slow").delay(4000).hide("slow");
            return false;
        } else {
            $(this).parent().siblings("div.alert-info").show("slow").delay(4000).hide("slow");
            return false;
        }
    });

    $("#2").click(function () {
        if ($("#text2").val().length < 4 || $("#text2").val().length > 200) {
            $(this).parent().siblings("div.alert-error").show("slow").delay(4000).hide("slow");
            return false;
        } else {
            $(this).parent().siblings("div.alert-info").show("slow").delay(4000).hide("slow");
            return false;
        }
    });
}); 
```

# iphone - 来自地狱的静态库路径噩梦

> ID：15999969
> 
> 赞同：14
> 
> 时间：2013-04-14T14:09:11.610
> 
> 标签：iphone, ios, cocoa-touch, cocoa

这就是重点。我创建了一个子项目（静态库）。该库编译良好。没有错误。当我将此库包含在项目中并从项目中的该库导入标头时，该库无法编译，因为它找不到属于自己的路径。

在网上看了一堆关于如何创建静态库并将其嵌入到项目中的教程之后，我不知道哪个是正确的，因为我尝试过所有的都失败了，有些不同。

这是设置库的方式：

* * *

**静态库**

**构建设置：**

1.  公共标头文件夹路径 =`$(BUILT_PRODUCTS_DIR)`
2.  标头搜索路径 = `$(SRCROOT)` *（递归）*

**构建阶段**

COPY FILES = 1 文件，myLibrary.h 基本上是空的（当我使用静态库模板启动库时由 xcode 创建。

没有**ADD COPY HEADERS**阶段

* * *

**主要项目**

**构建设置**

1.  标头搜索路径 = 空
2.  用户头搜索路径= `$(BUILT_PRODUCTS_DIR)` *（递归）*
3.  始终搜索用户路径 =`YES`

**构建阶段**

1.  是的，`myLibrary.a`在目标依赖项上

    * * *

令我惊讶的是，该库单独编译良好，但是当放在项目中时，无法找到属于自己的库的头文件。

注意：我还尝试在库上创建一个复制标题阶段，在该库上公开所有`.h`内容，但它也失败了。

这是一个错误的示例：

```
/Users/mike/Library/Developer/Xcode/DerivedData/MyApp-dnaimaovscreasadhmvgttwjnabc/Build/Products/Debug-iphoneos/include/myLibrary/ccTypes.h:39:9:
fatal error: 'Platforms/CCGL.h' file not found
#import "Platforms/CCGL.h" 
```

我已经失去了两天试图解决这个噩梦。

有什么想法吗？

我已将示例项目上传到**[此处](http://dfiles.eu/files/vj7egy9ig)**和**[此处](http://www.sendspace.com/file/dfvs09)**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T20:40:16.573

下载您的示例项目后，我通过进行以下更改使其在几分钟内工作。

首先，您需要`MyProject`在 Header Search Paths 下为目标的 Build Settings 添加一个条目，以便诸如`HelloWorldLayer.h`、 which之类的文件`#import "cocos2d.h"`知道在哪里可以找到该文件。

在 下`Header Search Paths`，我输入`../MyStaticLibrary/MyStaticLibrary/libs/**`如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/dgFLC.png)

这解决了预处理器无法从`MyStaticLibrary`, 为`MyProject`项目找到必要的源文件的问题，但是编译后，我得到一个关于缺少符号的错误。我需要将构建添加`libMyStaticLibrary.a`到`Link Binary With Libraries`步骤中，如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/lq6I0.png)

之后，项目编译正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T19:58:35.050

（没有足够的代表发表评论......）

您是否尝试在标题搜索路径中专门包含 Platforms 目录？据推测，Platforms 在源目录中，而不是在 $(BUILT_PRODUCTS_DIR) 中，因此可能无法在您当前的设置中搜索。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T09:58:34.570

关于向您显示环境变量的脚本，我是这样做的（在新选项卡中打开图像以获得更好的缩放）：

*   添加了虚拟shell脚本

![在此处输入图像描述](https://i.stack.imgur.com/PCfLL.png)

*   在 Log Navigator 观察其输出

![在此处输入图像描述](https://i.stack.imgur.com/jomJt.png)

![在此处输入图像描述](https://i.stack.imgur.com/aOWNi.png)

![在此处输入图像描述](https://i.stack.imgur.com/NJ3Kf.png)

* * *

如您所见，`BUILT_PRODUCTS_DIR`没有从库中复制任何标题。手动放置标题（强烈不推荐）或将搜索路径添加到您知道标题必须位于的位置：

![在此处输入图像描述](https://i.stack.imgur.com/l0AkV.png) ![在此处输入图像描述](https://i.stack.imgur.com/vN3O3.png)

现在因为有两个标头`cocos2d.h`和`MyStaticLibrary.h`,`cocos2d.h`已成功导入，尽管它会有额外的依赖。

该路径`../MyStaticLibrary/build/$(BUILD_STYLE)-$(PLATFORM_NAME)`还将（递归地）具有库的公共标头。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T20:26:36.157

经过将近 5 天的噩梦试图解决这个问题，我终于找到了这个教程：[http ://www.youtube.com/watch?v=XUhLETxgcoE](http://www.youtube.com/watch?v=XUhLETxgcoE)

这是唯一对我有用的解决方案。最简单也是最好的。

感谢每一位试图解决这个问题的人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T08:58:49.887

请试试这个……</p>

步骤1：右键单击“projectName.xcodeproj”（静态库）。选择“获取信息”并从（General-> where）复制完整路径

step2：将完整路径粘贴到主项目的“标题搜索路径”（目标和项目）

# erlang - Erlang 参数传递

> ID：15999974
> 
> 赞同：0
> 
> 时间：2013-04-14T14:09:35.800
> 
> 标签：erlang

我刚刚开始使用 Erlang，但我无法工作

```
-module(bla).
-export([start/0, sendC/2]).

start() ->
    number = 236,
    Pid1 = spawn(dz, sendC, [1, number]),
    register(a, Pid1).

sendC(num, time) ->
    io:format(" ~w ~w \n", [num, time]). 
```

我想将一个数字传递给另一个函数。我收到错误“异常错误：右侧值 236 不匹配”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T14:12:10.187

`number`是一个原子，不等于`236`.

改为使用`Number`。这样你就得到了一个变量。当然，同样的事情也适用于参数 to `sendC`。你可能想要`sendC(Num, Time)`.

第一个字母确定单词是原子还是变量：小写表示原子，大写表示变量。

# android - onCreate() 在永远循环中执行

> ID：15999975
> 
> 赞同：0
> 
> 时间：2013-04-14T14:09:40.537
> 
> 标签：android, sms, broadcastreceiver, oncreate

App的基本思想是：

1) `BroadcastReceiver`、收到短信

2）当收到短信时，另一个活动被调用，发送另一个短信。

问题是，当`BroadcastReceiver`调用其他活动（SMSMessaging）时，它的`onCreate`方法被一次又一次地调用，因此 SMS 不断被一次又一次地发送。我的代码如下，请帮助我！

这是我的 BroadcastReciever 类：

```
package com.example.testing;

import java.util.Arrays;
import java.util.List;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class Receiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub

        Bundle bundle = intent.getExtras();
        SmsMessage[] recievedMsgs = null;
        String str = "";
        if (bundle != null) {
            Object[] pdus = (Object[]) bundle.get("pdus");
            recievedMsgs = new SmsMessage[pdus.length];
            for (int i = 0; i < recievedMsgs.length; i++) {
                recievedMsgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                str += "SMS from " +
                recievedMsgs[i].getOriginatingAddress() +
                " :" +
                recievedMsgs[i].getMessageBody().toString();
            }
            try {
                Toast.makeText(context, str, Toast.LENGTH_SHORT).show();

                Intent i = new Intent(context,SMSMessaging.class);  
                i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);  
                context.startActivity(i);  
                Toast.makeText(context,"Yahoo",Toast.LENGTH_SHORT).show();
            } catch (Exception e) {

            }
        }
    }
} 
```

这是我的 SMSMessaging 类：

```
package com.example.testing;

import android.app.Activity;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class SMSMessaging extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        PendingIntent pi = PendingIntent.getActivity(this, 0, new Intent(this, SMSMessaging.class), 0);                
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage("03331234567", null, "auto sending ", pi, null);     
        finish();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:20:44.920

这里的简单答案是，不要从 Activity 发送短信，而是从 BroadCastReceiver 发送。我从来没有看到`finish()`调用`onCreate`本身。

尝试从接收器自己调用/发送 sendSms。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T14:19:37.197

这是显而易见的事情。当您收到任何短信时，您会收到通知`Receiver`，然后您会从`SMSMessaging`活动中发送新短信，因此新短信也会通知您，`Receiver`并且您将再次`SMSMessaging`发送新消息，因此事情将永远重复。

Insort，你需要重新设计你的逻辑。

# php - IE 中的 JavaScript 问题

> ID：15999977
> 
> 赞同：0
> 
> 时间：2013-04-14T14:09:49.147
> 
> 标签：php, javascript, internet-explorer, dom

我用javascript编写了一个代码，它`p`动态地创建一个属性以及一个删除内容的按钮。该功能`removeValue`在 Chrome 和 Firefox 中运行良好，但在 IE 中不起作用。此外，`setAttribute('style','')`在 IE 中也不起作用。最后，当我将值发送到另一个页面时，使用`window.location`它发送`undefined`而不是文本。

一切似乎在 Firefox 和 Chrome 中运行良好，但我无法让它在 IE 中运行（目前使用 IE 7）。我该如何解决这个问题？

编码：

```
function removeValue(ob)
{
    ob.parentNode.parentNode.removeChild(ob.parentNode);
}
function throwval(obj)
{
    var sent_id = obj.id;     //get id of the button 
    var v = document.getElementById(sent_id).value;
    var newp = document.createElement("p");     //create a new <p> tag
    var text = document.createTextNode(v);
    var buttonnode= document.createElement('input');
    buttonnode.setAttribute('type','button');
    buttonnode.setAttribute('name','del');
    buttonnode.setAttribute('value','Remove');
    buttonnode.setAttribute('style','background-color: Transparent;width: 125;color: blue;border:0');
    buttonnode.setAttribute('onclick','removeValue(this)');
    newp.appendChild(text);
    newp.appendChild(buttonnode);
    document.getElementById("getselected").appendChild(newp);    //append the new <p> tag in the div    
}
function sendvalues()
{
    var div_val = document.getElementById("getselected");
    if(!div_val.getElementsByTagName("p").length)
    {
        alert("Select a value");
    }
    else
    {
        //get seperate values of the paragraph inside div
        var str="|";
        for (i=0; i < div_val.getElementsByTagName("p").length; i++)
        {
            var paragraphs = div_val.getElementsByTagName("p");
            if(!paragraphs.item(i).textContent)
        {
            var pvalues = paragraphs.item(i).innerText;
        }
        else 
        {
            var pvalues = paragraphs.item(i).textContent;
        }
            //var sendpvalues = "products=" + pvalues;
            // alert(pvalues);

            str = str + pvalues + "|";
            //alert (str);
            //ajaxOb.send(sendpvalues);

        }   
        // alert(str);
        window.location="send_data.php?str="+str;
    }
} 
```

原来IE支持' `innerText`'，firefox支持' `textContent`'。我`undefined`通过使用 ' `if`' 语句解决了这个问题。代码更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:44:03.573

IE 的`setAttribute`函数和事件处理程序存在问题。（[在此处](https://stackoverflow.com/questions/95731/why-does-an-onclick-property-set-with-setattribute-fail-to-work-in-ie)阅读。）除了 . 之外，还使用该`onclick`属性`setAttribute`。

```
buttonnode.setAttribute('onclick','removeValue(this)');
buttonnode.onclick = function() { removeValue(buttonnode); }; 
```

# java - 读取文件的第一个字节

> ID：15999980
> 
> 赞同：6
> 
> 时间：2013-04-14T14:10:03.037
> 
> 标签：java, matlab, ftp

我需要一个非常简单的函数，它允许我通过 FTP 读取文件的前 1k 字节。我想在 MATLAB 中使用它来读取第一行，并根据一些参数，只下载我最终真正需要的文件。我在网上找到了一些不幸的是不起作用的例子。在这里，我提出了我试图下载一个文件的示例代码（我正在使用 Apache 库）。

```
FTPClient client = new FTPClient();
    FileOutputStream fos = null;

    try {
        client.connect("data.site.org");

        // filename to be downloaded. 
        String filename = "filename.Z";
        fos = new FileOutputStream(filename);

        // Download file from FTP server
        InputStream stream = client.retrieveFileStream("/pub/obs/2008/021/ab120210.08d.Z");
        byte[] b = new byte[1024];
        stream.read(b);
        fos.write(b);

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (fos != null) {
                fos.close();
            }
            client.disconnect();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

错误在返回空的流中。我知道我以错误的方式传递文件夹名称，但我不明白我该怎么做。我已经尝试了很多方式。

我还尝试过使用 URL 的 Java 类：

```
 URL url;

    url = new URL("ftp://data.site.org/pub/obs/2008/021/ab120210.08d.Z");

    URLConnection con = url.openConnection();
    BufferedInputStream in =
            new BufferedInputStream(con.getInputStream());
    FileOutputStream out =
            new FileOutputStream("C:\\filename.Z");

    int i;
    byte[] bytesIn = new byte[1024];
    if ((i = in.read(bytesIn)) >= 0) {
        out.write(bytesIn);
    }
    out.close();
    in.close(); 
```

但是当我关闭 InputStream 时它会出错！

我肯定被困住了。一些关于将非常有用的评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:27:41.197

试试这个测试

```
 InputStream is = new URL("ftp://test:test@ftp.secureftp-test.com/bookstore.xml").openStream();
    byte[] a = new byte[1000];
    int n = is.read(a);
    is.close();
    System.out.println(new String(a, 0, n)); 
```

它绝对有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T14:05:08.250

根据我的经验，当您从从 获取的流中读取字节时`ftpClient.retrieveFileStream`，对于第一次运行，不能保证您的字节缓冲区已填满。`stream.read(b);`但是，您应该读取基于它的循环包围的返回值，或者使用高级库来填充 1024 长度的 byte[] 缓冲区：

```
InputStream stream = null;
try {
    // Download file from FTP server
    stream = client.retrieveFileStream("/pub/obs/2008/021/ab120210.08d.Z");
    byte[] b = new byte[1024];
    IOUtils.read(stream, b); // will call periodically stream.read() until it fills up your buffer or reaches end-of-file
    fos.write(b);

} catch (IOException e) {
    e.printStackTrace();
} finally {
    IOUtils.closeQuietly(inputStream);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T10:03:12.577

我不明白为什么它不起作用。我找到了这个[链接](http://www.codejava.net/java-se/networking/ftp/download-files-from-a-ftp-server)，他们每次使用 Apache 库读取 4096 个字节。我读取了前 1024 个字节，它最终可以工作，唯一的问题是，如果使用了 completePendingCommand()，则程序将永远保留。因此，我已将其删除，并且一切正常。

# emacs - 为什么浏览器编辑快捷方式与emacs默认快捷方式相同？

> ID：15999981
> 
> 赞同：2
> 
> 时间：2013-04-14T14:10:32.350
> 
> 标签：emacs, keyboard-shortcuts

诸如 ctrl-a 、 ctrl-e 、 ctrl-f 、 ctrl-b 、 ctrl-n 、 ctrl-p 、 ctrl-k 、 ctrl-d 之类的东西。

当您在我知道的任何浏览器（不包括 IE）中以普通 html 表单进行编辑时，上面的快捷方式与 emacs 中的工作方式相同吗？

（当我说普通表单时，我的意思是没有任何交互式 js 内容的 html 表单。）

谢谢你的回答。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T17:04:58.720

因为这些是上帝打算让我们使用的键绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T15:50:53.147

这是因为您的浏览器使用了 readline 库。键绑定实际上取决于操作系统。您甚至可以配置编辑 ~/.inputrc 文件的键绑定。[您可以在此处的 readline 手册](http://cnswww.cns.cwru.edu/php/chet/readline/rluserman.html)中阅读更多信息

# json - 数据网格的车把模板

> ID：15999982
> 
> 赞同：1
> 
> 时间：2013-04-14T14:10:43.260
> 
> 标签：json, handlebars.js

我最近开始在我的项目中使用 handlerbar.js，它看起来很有趣。到目前为止一切都很好，但我在使用模板创建动态数据网格方面遇到了困难。

我有以下 json

```
grid : [
{
   question : 'Grid Question 1',
   gridheader : [
          {header : 'header1'},
          {header : 'header2'},
          {header : 'header3'}
        ],
   gridrow : [
        {row1 : 'a', row2 : 'b', row3 : 'c'},
        {row1 : 'd', row2 : 'e', row3 : 'f'},
        {row1 : 'g', row2 : 'h', row3 : 'i'}
         ]
}
] 
```

在这里，我想使用上面的 json 渲染一个网格。我可以遍历 gridheader 并按如下方式创建表头。

```
{{#omhrs.grid}}
<div>{{question}}</div>
   <table>
     <tr>
    {{#gridheader}}
        <th>{{header}}</th>
    {{/gridheader}}
     </tr>
       </table>
{{/omhrs.grid}} 
```

但我正在努力创建其余的数据部分。你们知道如何使用现有的上述 json 结构来实现这一点吗？或者任何更好的为网格构建 json 的方法？

谢谢凯思

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T17:32:24.270

表格先呈现*行*然后呈现*列*，因此`gridrow`应该使用`col`而不是真正准确地描述您的结构`row`（如果您的数据不是按此顺序，您需要在将数据集呈现到模板之前进行一些预处理工作以*转换您的数据集）：*

```
gridrow: [
    { col1: 'a', col2: 'b', col3: 'c' }, 
    { col1: 'd', col2: 'e', col3: 'f' }, 
    { col1: 'g', col2: 'h', col3: 'i' }
] 
```

模板中输出`gridRow`数据的部分是这样的：

```
<tbody>
{{#each gridrow}}
    <tr>
        <td>{{col1}}</td>
        <td>{{col2}}</td>
        <td>{{col3}}</td>
    </tr>
{{/each}}
</tbody> 
```

请参阅小提琴以获取完整的工作代码：http: [//jsfiddle.net/amyamy86/LG5Fp/](http://jsfiddle.net/amyamy86/LG5Fp/)

**编辑**：如果要生成动态网格：

数据可能是（数组数组）：

```
gridrow: [
    ['a', 'b', 'c'], 
    ['d', 'e', 'f'],
    ['g', 'h', 'i']
] 
```

那么模板将是：

```
<tbody>
{{#each gridrow}}
    <tr>
        {{#each this}}
            <td>{{this}}</td>
        {{/each}}
    </tr>
{{/each}}
</tbody> 
```

The`this`是一个特殊的关键字，它引用它正在迭代的数组中的当前项。

# android - 如何在 Processing for Android 中保存 csv 文件？

> ID：15999984
> 
> 赞同：0
> 
> 时间：2013-04-14T14:10:55.823
> 
> 标签：android, processing, tsv

对于我的生活，我似乎无法使用 Processing for Android 在 Android 4.2.2 上编写一个简单的 tsv 文件。

这段代码只是默默地失败了......

```
try {
  saveTable(tsv,"data.tsv");
}
catch (Exception e) {  
  println(e);
} 
```

我已经设置了权限：WRITE_EXTERNAL_STORAGE 但这没有任何区别。

我快疯了！！谢谢你的帮助！

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:15:04.680

您还可以使用 GetExternalStorageDirectory 方法：

```
String basePath = Environment.getExternalStorageDirectory().getAbsolutePath(); 
```

然后连接字符串以匹配您的路径：

basePath += "我的东西";

这要求您从 Android SDK 导入环境类：

```
import android.os.Environment; 
```

此外，在处理中，您可以只使用“sdcard”命名法 - 即：

basePath = "//sdcard//MyStuff";

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T14:39:52.340

对不起，噪音......我终于找到了解决方案：

1.  在 tyhe Nexus 4 (Android 4.2.2) 上使用终端应用程序，我创建了一个目录：

    $ mkdir /sdcard/MyStuff

2.  代码现在应该是

    ```
    saveTable(tsv,"//sdcard/MyStuff/data.tsv"); 
    ```

注意“ **sdcard** ”目录名称之前的**//** - 我猜这会以某种方式使系统将路径视为“外部存储”，所以没关系！

 **多么复杂！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T20:24:23.913

此外，有关使用终端创建目录的相关答案 - 以下是您将如何从处理中执行此操作：

```
import java.io.File;
import java.io.IOException;

String dirName;

  // Create Directory
  try{
    dirName = "//sdcard//MyStuff";  // Or use te Environment Class -- see above
    File newFile = new File(dirName);
    newFile.mkdirs();
    if(newFile.exists()) {
      //
      if(newFile.isDirectory()) {
        //
      } 
      else {

      }
    } 
    else {
      println("Directory Doesn't Exist... Creating");
    }
  }
  catch(Exception e) {
    e.printStackTrace();
  } 
```

这样你的代码就会自动知道路径......希望有帮助！**

# jquery - 通过 AJAX 更新 wordpress 表单第二次不起作用

> ID：15999987
> 
> 赞同：1
> 
> 时间：2013-04-14T14:11:04.850
> 
> 标签：jquery, ajax, wordpress, forms, wordpress-theming

我使用设置 api 在 wordpress 中构建了一个主题选项页面。我想使用 ajax 更新页面上的表单。他们似乎第一次工作正常，但是当我再次单击“提交”而不刷新页面时，整个页面只给了我一个“0”。请注意，由于我使用 wordpress 本机处理错误和验证，因此使用 AJAX 重新加载整个表单。我知道这很奇怪，因为触发 ajax 请求本身的表单被重新加载。让我知道是否有解决方法。这是代码

```
$cg("#cgform").submit(function(){
    var b = $cg(this).serialize();
    var cgdata =  { action : "cg_options_save", cgnonce: cgform.cgnonce ,data: b };
    cg_ajax_request(cgdata,cg_form_callback);  
    return false;
});

//Ajax request
function cg_ajax_request(data,fcall){
    $cg.post(ajaxurl, data, function (response) {fcall(response);}); 
} 
```

cg_ajax_callback 函数将接收到的表单填充到 div 中。

请让我知道处理此问题的“正确”方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T14:30:18.003

问题是事件处理程序绑定到由 ajax 调用重新加载的表单。第二次尝试提交表单时，它实际上是第一个 ajax 调用插入的新实例，它没有附加事件处理程序。改用该`on`方法绑定事件处理程序，这将在插入新表单时将事件处理程序动态绑定到新表单。

```
$cg(document).on('submit', "#cgform", function(){
    var b = $cg(this).serialize();
    var cgdata =  { action : "cg_options_save", cgnonce: cgform.cgnonce ,data: b };
    cg_ajax_request(cgdata,cg_form_callback);  
    return false;
}); 
```

# php - 如何从外部网站连接到 Azure 的数据存储？

> ID：15999988
> 
> 赞同：2
> 
> 时间：2013-04-14T14:11:08.293
> 
> 标签：php, azure, blob

我对云编程以存储连接到移动/网络/应用程序的信息的整个想法不熟悉。我一直在阅读教程，微软似乎在将所有内容捆绑在一起并使其适应您的目的相当简单方面做得很好。

但是，所有教程都假设您将使用 Microsoft Azure 中应用程序的各个方面（网站、移动服务、数据存储、数据库等）。

我想知道是否有人知道我可以用来查看如何将外部网站（未托管在 Microsoft Azure 上）连接到他们的数据存储（在 Azure 上）的示例？连接字符串是什么样的？最重要的是，如何将库/类添加到外部服务器？

IE

*   用户在 www.example.com (php) 上更改记录/实体
*   www.example.com 连接到 Windows Azure 上的数据存储
*   记录/实体被更新/插入

似乎应该有一个相当简单的解决方案，或者我错过了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T14:21:17.020

Microsoft 的云产品 (Azure) 由可用于存储数据的不同组件组成。

SQL Azure 数据库的行为与其他所有 MS SQL Server 数据库一样。它们的可扩展性和灵活性是完全抽象的，您应该可以使用任何 PHP+MSSQL 示例或[普通文档](http://php.net/manual/de/book.mssql.php)。就连接字符串而言：它们也可以按预期工作，并且对于大多数情况，您不必做任何不同的事情。[这个最小的示例](http://msdn.microsoft.com/en-us/library/windowsazure/ff394110.aspx)展示了如何通过 PHP 使用 SQL Azure。您可以忽略设置 Azure 应用程序的第一部分。您应该能够在任何其他托管方案（例如 Linux 上的 Apache+PHP）中使用相同的 php 代码片段。如果您在连接时遇到问题，您可能需要在[Azure 管理门户中查看服务器](https://manage.windowsazure.com)*允许的 IP 地址*配置并允许您的外部服务器/主机的 IP。

Azure 存储（Blob、队列、表）基本上是更简单的数据存储方式。您可以通过[azure sdk for php](https://github.com/WindowsAzure/azure-sdk-for-php)使用它并查看[示例](https://github.com/WindowsAzure/azure-sdk-for-php-samples)。[本文](http://www.windowsazure.com/en-us/develop/php/how-to-guides/blob-service/)的大部分内容也应该适用于您的场景。与使用 SQL 数据库相比，存储在许多情况下更便宜。

所以总结一下：你不必为你的场景做任何“特别”的事情。只需像使用任何其他数据库一样使用 SQL Azure。只需将文件存储在 Azure Blob 中。

至于跨越多个数据中心的任何应用程序：注意延迟。与在一个站点上托管所有内容相比，往返数据库/存储的成本（就性能而言）更高。根据您的应用程序，这可能是一个重要的性能瓶颈。

# node.js - 猫鼬关闭连接

> ID：15999999
> 
> 赞同：13
> 
> 时间：2013-04-14T14:12:19.373
> 
> 标签：node.js, mongoose

我有一个猫鼬连接，在我的程序中的某个时刻我需要关闭它。多次记录猫鼬对象后，我发现以下工作

```
mongoose.connection.base.connections[1].close(); 
```

有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-14T15:25:16.827

关闭 Mongoose 连接池中的所有连接：

```
mongoose.disconnect(); 
```

文档[在这里](http://mongoosejs.com/docs/4.x/docs/api.html#index_Mongoose-disconnect)。