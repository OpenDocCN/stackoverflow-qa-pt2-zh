# StackOverflow 问答 15490000-15490999

# php - 如何将表字段映射到学说实体中不同名称的变量？

> ID：15490003
> 
> 赞同：3
> 
> 时间：2013-03-19T01:32:02.523
> 
> 标签：php, doctrine-orm

我的模型/实体类中有一个变量 $pk 。我想将它映射到我表中的 table_pk 字段。

我该怎么做呢？

我正在阅读本手册 => [http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-column](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-column)。但似乎没有做我想做的事。

非常感谢您提供有关如何使用注释和 yaml 映射来完成此操作的示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T03:46:37.473

这很简单（`@ORM\GeneratedValue`仅当您的 PK 是自动增量时才需要该位）：

```
namespace MyNamespace;

use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 * @ORM\Table(name="my_entity")
 */
class MyEntity
{
    /**
     * @ORM\Id()
     * @ORM\GeneratedValue(strategy="AUTO")
     * @ORM\Column(name="table_pk", type="integer")
     */
    protected $id;
} 
```

以及使用 YAML 配置映射的同一实体

```
# MyNamespace.MyEntity.dcm.yml
MyNamespace\MyEntity:
  type: entity
    table: my_entity
  id:
    id:
      type: integer
      column: table_pk
      generator:
        strategy: AUTO 
```

作为奖励，XML 映射：

```
<!-- MyNamespace.MyEntity.dcm.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<doctrine-mapping 
    xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
    http://raw.github.com/doctrine/doctrine2/master/doctrine-mapping.xsd"
>
    <entity name="MyNamespace\MyEntity" table="table_name">
        <id name="id" type="integer" column="table_pk">
            <generator strategy="AUTO"/>
        </id>
    </entity>
</doctrine-mapping> 
```

# c - 从一个父母写给多个孩子？

> ID：15490005
> 
> 赞同：1
> 
> 时间：2013-03-19T01:32:24.690
> 
> 标签：c, fork, pipe

我正在学习管道和叉子。在这种情况下，我试图将同一个词从父级写到其子级。这是我写的一些练习代码（四个孩子）：

```
#define MAXWORD 5

int main() {

    pid_t parentID, pid, fd[2];
    int i, j, k;
    int status = 0;
    char toWrite[5] = "abcd";

    pipe(fd);
    parentID = getpid();

    for (i = 0; i < 4; i++) {

        if (getpid() == parentID) {
            pid = fork();
        }

        if (pid < 0) {
            perror("fork");
            exit(1);

        } else if (pid == 0) {
            close(fd[1]);

            printf("Reading ...\n");            
            char buf[MAXWORD];
            read(fd[0], buf, MAXWORD);

            printf("CHILD : %d\tread : %s\n", getpid(), buf);

            exit(0); // edited

        }

    }

    for (k = 0; k < 4; k++) {
        if (getpid() == parentID) {
            close(fd[0]);
            printf("Writing ...\n");
            write(fd[1], toWrite, MAXWORD);

            wait(&status); // edited
        }
    }

    return 0;
} 
```

这是代码的输出：

```
Reading ...
Writing ...
CHILD : 1457    read : abcd
Writing ...
Reading ...
Reading ...
Writing ...
Writing ...
CHILD : 1458    read : abcd
CHILD : 1457    read : abcd
Reading ...
Reading ...
CHILD : 1458    read : abcd
Reading ...
Reading ...
Reading ...
CHILD : 1458    read : abcd
CHILD : 1459    read : 
Reading ...
CHILD : 1459    read : 
CHILD : 1460    read : 
CHILD : 1457    read : abcd
Reading ...
CHILD : 1457    read : abcd 
```

如果我将写语句放在完成分叉的循环中的 else if 子句中，则它可以正常工作。但是，如果我在创建孩子之后尝试编写它，则效果不佳。

**编辑：**添加标记为“已编辑”的行后，程序按预期工作。这是正确的做法吗？

并赞赏输入。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:49:33.067

当父级退出时，管道关闭。然后，孩子们的读取将满足 0 字节。（您应该检查读取的返回码。）由于循环，每个孩子也在阅读 N 次。第一个孩子4次，第二个孩子3次，依此类推。由于所有孩子都在读同一个管道，所以他们中的任何一个都可以满足阅读。

# r - R - as.numeric 矩阵

> ID：15490006
> 
> 赞同：2
> 
> 时间：2013-03-19T01:32:35.017
> 
> 标签：r

我是 R 新手，我正在尝试使用以下代码将数据帧转换为数字矩阵

```
expData <- read.table("GSM469176.txt",header = F)
expVec <- as.numeric(as.matrix(exp_data)) 
```

当我使用 as.matrix，没有 as.numeric 时，它会返回一些数字（如下所示）

```
0.083531    0.083496    0.083464    0.083435    0.083406    0.083377    0.083348"                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
[9975] "-0.00285  -0.0028274  -0.0028046  -0.0027814  -0.0027574  -0.0027319  -0.0027042 
```

但是当我输入 as.numeric 时，它们都被转换为“NA”

如果之前有人问过这个问题，我深表歉意，但我找不到解决我问题的帖子。提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T02:05:41.837

你有2个问题。首先，如果您检查数据框的结构，您会注意到第一列是字符：

```
head(expData)[, 1:4]

            V1         V2         V3         V4
1 YAL002W(cer) 6.1497e-02 6.2814e-02 6.4130e-02
2 YAL002W(par) 7.1352e-02 7.3262e-02 7.5171e-02
3 YAL003W(cer) 2.2428e-02 3.8252e-02 5.4078e-02
4 YAL003W(par) 2.6548e-02 3.6747e-02 4.6947e-02
5 YAL005C(cer) 2.4023e-05 2.3243e-05 2.2462e-05
6 YAL005C(par) 2.0252e-02 2.0346e-02 2.0440e-02 
```

因此，尝试将完整的数据框转换为数字将无法按预期工作。

其次，您在 as.matrix() 之后运行 as.numeric()，它将矩阵转换为向量：

```
x <- as.numeric(as.matrix(expData))
# Warning message:
# NAs introduced by coercion 
class(x)
[1] "numeric"
dim(x)
# NULL not a matrix
length(x)
# [1] 14261302 
```

我建议你试试这个：

```
rownames(expData) <- expData$V1
expData$V1 <- NULL
expData <- as.matrix(expData)
dim(expData)
# [1] 7502 1900
class(expData[, 1])
# [1] "numeric" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:39:58.493

`R`当您不知道如何将某些内容转换为数字 时，您会得到 NA 。

具体来说，输出中的引号告诉我您有一个（几个）LNG 数字串。要了解这不好的原因，请尝试： `as.nmeric("-0.00285 -0.0028274")`

我不知道你的原始数据是什么样的，但正如@alexwhan 提到的，罪魁祸首可能是你打电话给`read.table`

要修复它，请尝试显式设置 sep 参数（即，在您有标题的位置旁边）

我建议在简单的文本编辑器（TextEdit.app 或记事本，而不是 Word）中打开原始文件并查看它们是如何分离的。M 猜测是

```
 ..., sep="\t" 
```

应该做的伎俩。

# google-analytics - 如何在 Google Analytics 中解释来自 Google 新闻的推荐人

> ID：15490008
> 
> 赞同：0
> 
> 时间：2013-03-19T01:33:03.820
> 
> 标签：google-analytics, analytics, google-analytics-api

不幸的是，这不是一个具体的编程问题，但我正在尝试使用 Google Analytics Core Reporting API (v3) 开发一些自定义报告，并且我被困在如何解释这些来自 Google 的引荐来源网址（在 ga:referralPath 或 document.referrer 中）新闻网站：

*   /nwshp
*   /新闻/rtc
*   /新闻/网址
*   /
*   /新闻故事
*   /新闻/我

... 等等。这些显然都来自谷歌新闻网站（.com .whatever），但如果可能的话，我想对它们进行更细化的分类，例如谷歌新闻首页等。

提前非常感谢（如果存在这样的地方，请随时向我指出一个更好的地方询问）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:48:30.233

[根据 Chris Boutet 的说法](https://twitter.com/chrisboutet/status/314092743339147264)，这些代表 Google 新闻主页 (/nwshp) 和 Google 新闻实时报道 (/rtc)。这就是我一直在寻找的答案。希望有帮助。

# java - 构造函数和零参数构造函数之间的区别（Java）

> ID：15490010
> 
> 赞同：1
> 
> 时间：2013-03-19T01:33:41.680
> 
> 标签：java, oop, constructor

谁能告诉我构造函数和零参数构造函数之间的区别（概念上）是什么？例子：

此实施将如何影响程序

```
public Person() {
firstName = "UNKNOWN";
lastName = "UNKNOWN";
gender = '?';
retired = false;
age = 0;
address = null;
} 
```

相比说......这个：

```
public Person(String f, String l, int a, char g) {
firstName = f;
lastName = l;
age = a;
gender = g;
retired = false;
address = null;
} 
```

编辑：请忽略参数的数量...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T01:41:06.270

如果您没有为类定义构造函数，则编译器会自动创建默认的无参数构造函数。默认构造函数调用默认父构造函数 (super()) 并将所有实例变量初始化为默认值（数字类型为零，对象引用为 null，布尔值为 false）。

仅当没有构造函数时才会创建默认构造函数。如果为类定义任何构造函数，则不会自动创建默认构造函数。

> 谁能告诉我构造函数和零参数构造函数之间的区别（概念上）是什么？

**没有不同。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T04:45:53.783

此外，一种好的风格是只有一个构造函数来完成所有实际工作，即使你有多个构造函数。术语*指定构造函数*来自Objective-C，但它仍然是一个好主意。假设你这样写：

```
public Person(String f, String l, int a, char g) {
        // Use more expressive argument names.
    firstName = f;
    lastName = l;
    age = a;
    gender = g;
    retired = false;
    address = null;
} 
```

然后，将您的无参数构造函数重写为

```
public Person() {
    this(null, null, 0, '?');
        // Invoke the designated constructor with those arguments.
    retired = false;
    address = null;
} 
```

如果构造函数的第一条语句是`this(...)`，则构造函数正在调用该类的其他构造函数之一。类似地，如果构造函数的第一条语句是`super(...)`，则调用父类的构造函数。如果两者都不做，`super()`则假设。

然后，由于`retired`和`address`在两个构造函数中的设置方式相同，因此在它们的声明中初始化它们：

```
private boolean retired = false;
private String address = null;  // If it's a String; it could be its own object type. 
```

然后，因为`false`和`null`是实例变量初始化的默认值，请将这两行替换为：

```
private boolean retired;
private String address; 
```

稍后，您可以添加错误检查。例如，人们没有负年龄，所以插入语句

```
if (a < 0) {
    throw new IllegalArgumentException("A Person cannot have a negative age: "
       + a);
} 
```

在指定构造函数的开头会很有用。这样，您只需执行一次。

当您了解 Java 枚举时，您可以通过编写以下代码来使您的性别变量更加精确：

```
// Gender is a grammatical term, Sex is a biological term.
public enum Sex {
    MALE, FEMALE;
} 
```

并使用`Sex`而不是`char`你的`gender`变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:37:59.927

当没有定义其他构造函数时，将自动创建一个零参数构造函数。带参数的构造函数用于对象的自定义初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T01:40:12.663

对于第一个构造函数，只要您想实例化 a `Person`，它总是以构造函数中定义的值开始。您将不得不使用设置器来修改它。

对于第二个构造函数，任何时候要实例化 a `Person`，都必须传递适当的参数。这意味着您可以创建对象，而无需稍后使用 setter 更改值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T01:40:13.757

1.  如果不定义构造函数，则默认生成默认构造函数（没有参数）。
2.  如果您有任何用户定义的构造函数，则根本不会生成默认构造函数。
3.  无论如何，除非您的类是实用程序类，否则您需要一个构造函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T01:56:55.707

实例化对象时调用构造函数。零参数（或“无参数”）构造函数是不需要参数的构造函数。一个类可以有多个构造函数，每个构造函数都有不同的参数。

不带参数的构造函数对于使用反射来填充对象属性的工具特别有用。默认的无参数构造函数用于构造对象，然后通过匹配其设置器中使用的名称（也称为 mutators）来填充其属性。

带参数的构造函数特别适合创建不可变对象。对象可以在创建时填充一次，然后保证不会更改（假设所有属性同样不可变）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T02:16:52.200

**首先，如果您没有语句构造函数，则该类可以自动创建构造函数，但此构造函数不是参数，并将所有实例变量初始化为默认值（数字类型为零，对象引用为 null，布尔值为 false），** *如下所示：*

```
public Person() {
firstName = null;
lastName = null;
gender = null;
retired = false;
age = 0;
address = null;
} 
```

**但你可以像这样覆盖这个构造函数** *：*

```
public Person() {
firstName = "firstName";
lastName = "lastName";
gender = '?';
retired = true;
age = 0;
address = "someAddress";
} 
```

**并像这样重载这个构造函数** *：*

```
public Person(String f, String l, int a, char g) {
firstName = f;
lastName = l;
age = a;
gender = g;
retired = false;
address = null;
}' 
```

# scala - 获取 Slick 中列的默认值？

> ID：15490012
> 
> 赞同：3
> 
> 时间：2013-03-19T01:33:57.577
> 
> 标签：scala, default, slick

是否有捷径可寻？我在源代码中迷路了，试图找到一些可以做到这一点的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T14:44:12.613

Slick 的表格组件提供了额外的列选项。这可以通过对象 O 访问。

因此，要获取为列指定的默认值，您可以执行以下操作：

```
def mycolumn = column[String](
       "MYCOLUMNNAME",
       O.DBType("VARCHAR"),
       O.Default("Let's eat icecream")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T09:10:50.520

就在这里。

给定一张桌子

```
 object Users extends Table[(Int, String)]("users") {
   def id = column[Int]("id")
   def name = column[String]("name")
 } 
```

您可以像这样获取 id 列的默认值：

```
 val driver: BasicProfile = scala.slick.driver.H2Driver //use the one appropriate to you

 val defaultValue: Int = Users.id.typeMapper(driver).zero 
```

引用文档：

*   [TypeMapper](http://slick.typesafe.com/doc/1.0.0/api/#scala.slick.lifted.TypeMapper)：“TypeMapper 对象表示可用作数据库中的列类型的 Scala 类型”。
*   typeMapper(driver) 生成一个[TypeMapperDelegate](http://slick.typesafe.com/doc/1.0.0/api/#scala.slick.lifted.TypeMapperDelegate)，它是特定于正在使用的驱动程序的类型映射器
*   上的`zero`方法`TypeMapperDelegate`给出“类型的零值”。

我没有测试这是否返回您在定义表时为列设置的默认值，或者只是特定于该类型而不是表的一般零值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-10T14:21:45.883

默认值可以提取如下：

```
import slick.jdbc.SQLServerProfile.api._
import slick.relational.RelationalProfile

def getDefaultValue(fieldName: String, table: Table[_]) = {
  table.create_*.toSeq.find(_.name == fieldName)
    .flatMap(_.options.collectFirst {
      case RelationalProfile.ColumnOption.Default(defaultValue) =>
        defaultValue }).orNull
} 
```

# sql - 如果我将一个文本字符串与多个列进行匹配，是否有一种简单的方法可以知道哪些匹配？

> ID：15490014
> 
> 赞同：3
> 
> 时间：2013-03-19T01:33:58.893
> 
> 标签：sql, matching

我正在编写一个高级搜索功能，它返回字符串与该表中许多文本列中的一个或多个匹配的记录。

就像是：

```
select * from some_table where (txt_1 like '%foo%') or (txt_2 like '%foo%') or... 
```

或者：

```
select * from some_table where match (txt_1, txt_2, ...) against ('foo') 
```

如果我可以进行全文搜索（还不确定）。

我的问题是，我怎么知道哪些列实际上匹配“foo”？

例如，如果我有这些记录：

```
id  txt_1  txt_2  txt_3  txt_4
1   'foo'  'bar'  'bar'  'foo'
2   'bar'  'bar'  'bar'  'bar'
3   'bar'  'foo'  'bar'  'bar'
4   'bar'  'bar'  'bar'  'bar' 
```

我的查询应该返回如下内容：

```
id  txt_1_matches  txt_2_matches  txt_3_matches  txt_4_matches
1   1              0              0              1
3   0              1              0              0 
```

我可以通过对简单查询结果进行后处理来做到这一点，但我想避免它。有没有一种干净、简单的方法来做到这一点？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:44:17.790

您可以使用全文索引有效地进行搜索，然后在选择列表中应用您的第一个解决方案（仅针对通过 WHERE 子句中的过滤器的行运行）：

```
select (txt_1 like '%foo%') as `txt1_matches`, 
       (txt_2 like '%foo%') as `txt2_matches`, ...
from some_table where match (txt_1, txt_2, ...) against ('foo') 
```

您可能还想研究功能更全面的全文搜索技术，例如[Sphinx Search](http://sphinxsearch.com)或[Apache Solr](http://lucene.apache.org/solr/)。

例如，请参阅[如何返回与 Solr 中的查询匹配的列的答案..？](https://stackoverflow.com/questions/9629147/how-to-return-column-that-matched-the-query-in-solr)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:45:12.087

你可以这样做：

```
SELECT * FROM
  (SELECT id,
          txt_1 LIKE '%foo%' AS a,
          txt_2 LIKE '%foo%' AS b,
          txt_3 LIKE '%foo%' AS c,
          txt_4 LIKE '%foo%' AS d
   FROM some_table) AS q
WHERE a OR b OR c OR d; 
```

注意我把它放在一个子查询中。我需要在 MySQL 中执行此操作，否则它会抱怨“a”列不存在，等等...

# javascript - 使用 Bootstrap 和 Flexslider 的网站上的灯箱问题

> ID：15490020
> 
> 赞同：1
> 
> 时间：2013-03-19T01:34:25.183
> 
> 标签：javascript, css

在此页面[http://www.dreamsmedia.org/dishagroup/machinery-equipment-maintenance-division.html](http://www.dreamsmedia.org/dishagroup/machinery-equipment-maintenance-division.html)我在 FlexSlider 中使用 prettyPhoto 灯箱。

该站点是使用 twitter Bootstrap 构建的。

我已经尝试了所有选项，但无法使任何灯箱插件工作。您能否通过单击左侧的滑动图像进行检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:38:51.397

你需要调用 prettyPhoto

```
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto();
  });
</script> 
```

# php - 使用 PHP 根据类别 ID 过滤帖子

> ID：15490021
> 
> 赞同：0
> 
> 时间：2013-03-19T01:34:38.463
> 
> 标签：php, mysql

我有一个小任务，我有一个 mysql 表“博客”。它包含一个列“ID_CAT”。ID_CAT 的每个字段都包含一篇文章的不同类别值，例如 "22,44,33,55" 。我想根据选择的类别过滤博客的帖子。我将 ID_CAT 选择传递到包含页面中的 URL 和 GET 方法中，就像这样

```
<a class="rotated_link" href="?cat='.$categorie->getIDCategorie().'">'.$categorie->getNomCategorie().'</a> 
```

然后像这样包含的页面

```
$id_categorie = $_GET["cat"];
if (isset($id_categorie)) {

  foreach(Article::getAllArticlebycategorie($id_categorie) as $all){
                $article= new Article($all->ID_BLOG);
                $img=Image::getImageByArticle($article->getIDarticle());
                $tblCat=explode(',',$article->getIDCategorie());
                    echo '<li class="li_blog_post">';
                            echo'<img class="img_post_mini" src="img/file/'.$img.'" style="width:100%; height:150px; border:1PX solid #9D9D9D;" />';
                            echo'<span class="post_title0">'.$article->getTitlearticle().'</span>';
                            echo'<span class="tag_post"><img src="img/tag.png" style="width:16px; height:16px;"/>';
                    foreach($tblCat as $catt){
                        $categoriea = new Categorie($catt);

                    echo '<a class="tag_lable" href="">'.$categoriea->getNomCategorie().'</a> </span>';
                    }
                    echo'<p class="post_prev">'.substr($article->getArticle(), 0, 410).'&nbsp;...</p>';
                    echo'<span class="date">le&nbsp;'.$article->getDatearticle().'</span> <span class="view_more"><a class="test" href="?article='.$article->getIDarticle().'">voire les détails</a></span>';
                   echo '</li>';
                }  

} 
```

问题是当我选择例如 ID_CAT=4 时，只有当数字 4 是 ID_CAT (4,33,50) 列中的第一个值-> 选择 (3,4,10)-> 不选择 . 功能 ：

```
public static function getAllArticlebycategorie($id_categorie){
    global $db;
    $req = $db->prepare('SELECT * FROM blog WHERE ID_CAT='.$id_categorie);
    $req->execute();
    return $req->fetchAll(PDO::FETCH_OBJ);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:42:12.123

使用[`FIND_IN_SET()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)并且因为您使用的是 PDO，所以使用参数化查询。

因此改变

```
$req = $db->prepare('SELECT * FROM blog WHERE ID_CAT='.$id_categorie);
$req->execute(); 
```

到

```
$req = $db->prepare("SELECT * FROM blog WHERE FIND_IN_SET('$id_categorie', ID_CAT)");
$req->execute(array(':id_categorie' => $id_categorie)); 
```

**[SQLFiddle](http://sqlfiddle.com/#!2/295c0/2)**供你玩`FIND_IN_SET()`

# java - java.awt.Shape 在捉弄我

> ID：15490025
> 
> 赞同：1
> 
> 时间：2013-03-19T01:35:12.490
> 
> 标签：java, syntax, awt, draw, java-2d

![在此处输入图片描述][1]我正在学校学习 Java 编程的第一年，我正在为我的书向前看一点。我遇到了一个`Canvas`有方法的类（称为 ）`draw(Shape shape)`。

出于某种原因，我无法弄清楚如何将任何形状绘制到画布上。我已经搜索了 Java API，但我无法获得正确的语法。我很生气，因为我知道它非常简单。任何帮助将不胜感激。

这是我坚持使用的方法的代码：

```
/**
 * Draw the outline of a given shape onto the canvas.
 * @param  shape  the shape object to be drawn on the canvas
 */
public void draw(Shape shape)
{
    graphic.draw(shape);
    canvas.repaint();
} 
```

当我从对象调用方法时，它给了我这样的东西：

```
canvas1.draw(->Shape shape<-) 
```

我试过了：

```
java.awt.Shape circle
java.awt.Shape Circle
Circle circle
Shape circle 
```

这个名单永远存在。

编辑：

这是班上的肉和土豆……很简单的东西

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;

/**
 * Class Canvas - a class to allow for simple graphical 
 * drawing on a canvas.
 * 
 * @author Michael Kölling (mik)
 * @author Bruce Quig
 *
 * @version 2011.07.31
 */

public class Canvas
{
    private JFrame frame;
    private CanvasPane canvas;
    private Graphics2D graphic;
    private Color backgroundColor;
    private Image canvasImage;

    /**
     * Create a Canvas with default height, width and background color 
     * (300, 300, white).
     * @param title  title to appear in Canvas Frame     
     */
    public Canvas(String title)
    {
        this(title, 300, 300, Color.white);
    }

    /**
     * Create a Canvas with default background color (white).
     * @param title  title to appear in Canvas Frame
     * @param width  the desired width for the canvas
     * @param height  the desired height for the canvas
     */
    public Canvas(String title, int width, int height)
    {
        this(title, width, height, Color.white);
    }

    /**
     * Create a Canvas.
     * @param title  title to appear in Canvas Frame
     * @param width  the desired width for the canvas
     * @param height  the desired height for the canvas
     * @param bgClour  the desired background color of the canvas
     */
    public Canvas(String title, int width, int height, Color bgColor)
    {
        frame = new JFrame();
        canvas = new CanvasPane();
        frame.setContentPane(canvas);
        frame.setTitle(title);
        canvas.setPreferredSize(new Dimension(width, height));
        backgroundColor = bgColor;
        frame.pack();
        setVisible(true); 
```

-- 如果我有足够的代表发布屏幕截图，我会 --

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:53:16.280

查看更多代码可能会有所帮助，但我猜测图形不是参数，您以某种方式自己创建了图形对象。这个来自 javadoc for canvas 的花絮应该可以帮助你：

> 应用程序必须继承 Canvas 类才能获得有用的功能，例如创建自定义组件。

我通常希望看到你将 Canvas 子类化，然后覆盖`paint()`这样的东西......

```
public Class MyCanvas extends java.awt.Canvas {

  public void paint(Graphics g) {  
    super.paint(g);

    // some code to create the shape here... such as...
    // A rectangle with UL corner at 10,10, 30 wide, 50 high
    Shape myRectangle = new Rectangle2D.Float(10,10,30,50); 

    g.draw(myRectangle);

  }
} 
```

通过这种方式，您可以获得属于画布的图形对象，并在其上绘制形状。我怀疑您正在做的是将它绘制到其他一些图形对象（不是属于画布的对象）上。通常这意味着您在某个地方创建了一个图像，从中拉出一个图形对象并绘制到图像中。但是该图像可能没有被任何组件吸引......如果没有更多代码，很难确定。

就像任何其他组件一样，您可以将画布放在 UI 中的任何位置。

```
myFrame.add(new MyCanvas()); // example if you are adding it a frame called myFrame. 
```

***每当Java***决定需要重绘 MyCanvas 对象时，Java 都会调用 paint 方法。你永远不需要调用油漆。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-30T09:29:32.733

使用，例如：

```
 drawShape(new java.awt.Rectangle(10, 10, 40, 40)) 
```

在 Bluej 方法调用窗口中传递的参数是

```
 new java.awt.Rectangle(10, 10, 40, 40) 
```

# c# - 带有命令行参数的 Application.Restart()

> ID：15490029
> 
> 赞同：2
> 
> 时间：2013-03-19T01:35:43.367
> 
> 标签：c#, application-restart

我有一个获取传递命令行参数的应用程序。一段时间后，我想重新启动我的应用程序，将与第一次启动应用程序时相同的命令行参数传递给它。

```
private void frmSetTime_Load(object sender, EventArgs e)
{
    try
    {
        string[] cmds = System.Environment.GetCommandLineArgs();
        //Here i gets Command Line Arguments
    }
    catch (Exception ex)
    {
        MessageBox.show(ex.message);
    }
    finally
    {
        GC.Collect();
    }
}

public void ExecuteLogic(Object obj)
{
    try
    {
        //My set of Statements
        Therad.sleep(5000);
        ExecuteLogic(obj);
    }
    catch (Exception ex)
    {
        MessageBox.show(ex.message);
    }
    finally
    {
        GC.Collect();
        ApplicationRestart();
    }
}

private void ApplicationRestart()
{
    try
    {
        if (Process.GetCurrentProcess().WorkingSet64 >= 10000000)
        {                         
            Application.Restart();                    
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.message);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T01:39:31.867

这将自动发生。你不需要改变任何东西。

从[Application.Restart](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.restart.aspx)的文档中：

> 如果您的应用程序在首次执行时最初提供了命令行选项，则 Restart 将使用相同的选项再次启动应用程序。

# php - Laravel：刷新页面弹出“确认表单提交”

> ID：15490034
> 
> 赞同：0
> 
> 时间：2013-03-19T01:36:13.190
> 
> 标签：php, laravel

在第一页上，用户填写表单，单击提交按钮将数据 POST 提交到`http://domain.com/somepage`. 处理数据后，将加载第二个页面`http://domain.com/somepage`。刷新第二页时，我得到了弹出窗口`Confirm Form Submission`！为什么会发生这种情况以及如何防止这种情况发生？*（假设这种行为通常是不需要的）*

![在此处输入图像描述](../Images/b987bde58ddc2911bc8044dc2bc9940c.png)

**提交到此路由的表单**

```
Route::post('/somepage', function() {
    $query = Input::get('query');
    return Redirect::to('/somepage')
            ->with('query', $query);
}); 
```

**最后一页**

```
Route::get('/somepage', function() {
    $query = Session::get('query');
    return View::make('somepage')
                ->with('query', $query);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:53:00.497

您似乎在发布后将用户返回到 get 方法，因此似乎有一个循环。您如何在控制器中执行逻辑并从那里传递数据，您可以通过这种方式获得更多控制权。

# google-chrome - 在 js 中运行 window.open() 在 chrome 中执行不同

> ID：15490037
> 
> 赞同：0
> 
> 时间：2013-03-19T01:36:24.307
> 
> 标签：google-chrome, tabs, window, window.open

我们正在使用 javascript 开发一个 web 应用程序，我们使用 chrome 作为我们用户的默认浏览器。现在我们在应用程序中使用 window.open 时遇到了一个问题。

在我们的应用程序中，我们需要在新的浏览器选项卡中打开新页面，我们在js代码中使用了代码：window.open(' [http](http://ourUrl.com) : //ourUrl.com','_blank')；

浏览器的动作根据这行代码的执行时间而有所不同。

情况1：用户点击了一个按钮，点击事件会触发我们的js函数，在这个函数中，直接执行这行代码，浏览器就可以在新的浏览器标签页中打开页面。（这就是我们想要的。）

情况2：用户点击了一个按钮，在按钮点击事件的处理函数中，我们首先通过ajax将页面数据提交给我们的服务器，在回调函数中，我们执行这行代码，可能会弹出一个独立的新窗口没有工具栏而不是浏览器选项卡。（这不是我们想要的）。

我不明白为什么浏览器的动作不同，任何人都可以帮忙解释一下吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T09:16:01.927

正如我在[这个问题](https://stackoverflow.com/questions/16749907/window-open-behaviour-in-chrome-tabs-windows)上解释的那样，为了在新选项卡（而不是新窗口）中打开 URL，必须在用户生成的操作回调的范围内调用*window.open函数（例如，在**onClick* )
在任何其他情况下，URL 将在新窗口中打开。

解释您遇到的情况：
**情况 1：** *window.open*在用户生成的操作的回调中被调用。这就是它在新标签页中打开的原因。
**情况 2：**在这种情况下，*window.open*函数在 ajax 响应回调的范围内调用，这是用户生成操作的不同范围（上下文之外）。

对于打开新选项卡（而不是窗口）的第二种情况，您需要在用户单击后立即同步调用*window.open*，而不是作为另一个操作的回调（ajax 响应）。

# c# - 后台工作人员完成后启用按钮 (C#)

> ID：15490038
> 
> 赞同：0
> 
> 时间：2013-03-19T01:36:45.170
> 
> 标签：c#, wpf, multithreading, button, backgroundworker

我正在 WPF（不是 Windows 窗体）中制作这个简单的程序，它是为大学作业。该程序有两个按钮和一个列表框。当程序启动时，第一个按钮被启用，而第二个按钮被禁用。当用户单击第一个按钮时，会打开一个对话框，上面有一个“确定”按钮。单击“确定”按钮时，它会从目录中获取所有文件名并将其显示在列表框中。但这是使用后台工作人员完成的，因此列表框会在找到文件时逐渐添加文件。现在我想做的是，在后台工作人员完成工作后，即列出目录中的所有文件后，我想让之前禁用的第二个按钮启用。我知道启用或禁用按钮的语法，您将 true 或 false 设置为 . IsEnabled 属性。例如：

```
 //this will disable the button
    buttonName.IsEnabled = false; 
```

但我想知道的是我如何以及在哪里使用这个属性（我需要什么额外的代码），以便第二个按钮只有在后台工作人员完全完成其工作后才会启用。使用我目前的代码，一旦单击“确定”按钮并且后台工作人员启动，第二个按钮就会启用。在下面的代码中，“btnSort”是后台工作完成后应该启用的第二个按钮的名称。最后你可能会忽略 DirSearch 方法，它只是一种从目录中获取文件的方法。我知道还有其他搜索目录的方法，但有人告诉我使用这种方法。

```
 public partial class MainWindow : Window
    {
        BackgroundWorker backgroundWorker;

        string sourcePath = "";

        List<string> list1 = new List<string>();

        public MainWindow()
        {
            InitializeComponent();

            backgroundWorker = new BackgroundWorker();
            backgroundWorker.WorkerReportsProgress = true;
            //take this out if cancel not used
            backgroundWorker.WorkerSupportsCancellation = true;
            backgroundWorker.DoWork +=
                new DoWorkEventHandler(backgroundWorker_DoWork);
            backgroundWorker.ProgressChanged +=
                new ProgressChangedEventHandler(backgroundWorker_ProgressChanged);
        }    

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            try
            {
                System.Windows.Forms.FolderBrowserDialog folderDialog = new System.Windows.Forms.FolderBrowserDialog();
                folderDialog.SelectedPath = @"C:\temp";
                System.Windows.Forms.DialogResult result = folderDialog.ShowDialog();

                if (result.ToString() == "OK")
                {
                    if (listBox1.Items.Count != 0)
                    {
                        listBox1.Items.Clear();
                    }

                    if (list1.Count != 0)
                    {
                        list1.Clear();
                    }

                    sourcePath = folderDialog.SelectedPath;

                    backgroundWorker.RunWorkerAsync(sourcePath);

                    if (btnSort.IsEnabled == false)
                    {
                        btnSort.IsEnabled = true;
                    }                
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }    
        }

        private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            DirSearch(e.Argument.ToString());
            MessageBox.Show("Complete!");
        }

        private void backgroundWorker_ProgressChanged(object sender,
        ProgressChangedEventArgs e)
        {
            FileFetchState state = (FileFetchState)e.UserState;
            listBox1.Items.Add(state.FetchedFile);

        }

        public class FileFetchState
        {
            public string FetchedFile
            {
                get;
                set;
            }

            public FileFetchState(string fetchedFile)
            {
                FetchedFile = fetchedFile;
            }
        }

        public void DirSearch(string sourcePath)
        {
            try
            {
                foreach (string f in Directory.GetFiles(sourcePath))
                {
                    string fileName = System.IO.Path.GetFileName(f);

                    if (!listBox1.Items.Contains(fileName))
                    {
                        //code for adding to list1
                        list1.Add(fileName);

                        backgroundWorker.ReportProgress(0,
                            new FileFetchState(fileName));

                        System.Threading.Thread.Sleep(1);
                    }
                }
                foreach (string d in Directory.GetDirectories(sourcePath))
                {
                    DirSearch(d);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
    } 
```

# embedded - 在当前 PC 0x0 处未找到源代码行

> ID：15490040
> 
> 赞同：1
> 
> 时间：2013-03-19T01:37:04.840
> 
> 标签：embedded, pic, mplab

我在使用 MPLAB X IDE 时遇到问题。我有一个带有主要部分的 main.c。

当我尝试调试时，我不能。它说没有找到源代码行。我已经编译了软件并在 MPLAB IDE 中调试没有问题。我觉得 MPLAB X 中有一个设置或其他一些我缺少的基本设置。

虽然我不确定它是否有用，但为了提供信息，我使用 PICKit2 进行调试，MPLAB X IDE v1.51，PIC16F876 uC。

main.c 中的主要代码：

```
int main(int argc, char** argv) {

    busyDelay(10000);
    port_init(); //Initialize GPIO, Timers & Interrupts

    TUBE_ON = 0x1;
    while (1) {
            asm("nop");
    }
    return (EXIT_SUCCESS);
} 
```

当我尝试调试时，我在调试器控制台中得到以下信息：

```
Launching
Programming target
No source code lines were found at current PC 0x0
User program stopped
User program finished 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:56:41.063

这是由错误的初始化指针引起的运行时问题。

您的代码执行正在尝试执行地址 0x00 处的代码。当您调用指向未初始化函数的指针时会发生这种情况，这意味着它的值是 0。如果不是，您可能正在尝试向未初始化的指针读取或写入数据。

或者，通常微控制器上的地址 0x00 是代码的开头。必须有从地址 0x00 运行的启动代码来执行 C 代码所需的初始化。因此，您还没有将启动文件添加到项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-15T11:32:09.203

我在 Eb006 v9 上使用 pickit2 和 MPLABx 进行调试。最初，消息是关闭低电压编程和看门狗。因此我添加了这些行

```
#pragma config   WDTE=OFF, LVP=OFF 
```

但是它仍然给我同样的问题，在我挠头并偶然添加`FOSC=XT`之后，即板上有一个水晶突然它解决了问题，因此对我来说，这个配置有效

```
#pragma config  FOSC=XT, WDTE=OFF, LVP=OFF 
```

希望这可以帮助某人:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T10:54:52.840

这似乎是某种 MPLAB X 错误。为了使调试器工作，您必须先关闭 PIC 内存视图，以防您之前查看变量。这是我的[答案的来源](http://blog.remllov.net/?p=26)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-04T21:41:38.587

我通过选择错误的振荡器类型遇到了这个问题。例如，在我的电路中连接了一个外部 20MHz 晶体时，我无意中选择了 XT 作为 FOSC。我应该这样使用 HS：

`#pragma config FOSC = HS // Oscillator Selection bits (HS oscillator (HS))`

这修复了我的“在当前 PC 0x0 处未找到源代码行”错误的实例。

# ruby-on-rails-3.2 - Rails：使远程代理与活动记录保持一致

> ID：15490041
> 
> 赞同：0
> 
> 时间：2013-03-19T01:37:07.550
> 
> 标签：ruby-on-rails-3.2, rails-activerecord, proxy-classes

课程代理知道远程系统上课程的 ID，并在访问该课程时获取该信息。示例代码：

```
class Course < BasicObject
  attr_accessor :course_id, :course_info
[..]
def method_missing(*a, &b)
  if course_info.nil?
    load_course_info
  end
  course_info.send(*a, &b)
end
[...]

def load_course_info
 # this will fetch the course information from a remote server
 # using the course_id
end 
```

我的问题：我想使用活动记录使代理的 course_id 持久化（不是课程信息），以便代理记住如何在以后再次获取信息。

Course继承自BasicObject所以我做不到

```
Course < ActiveRecord::Base 
```

我猜 ActiveRecord::Base 有太多的方法可以用作代理。

解决办法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T23:31:24.243

在以下位置找到答案： [https ://solnic.codes/2011/08/01/making-activerecord-models-thin/](https://solnic.codes/2011/08/01/making-activerecord-models-thin/)

Piotr 说（如果我理解正确的话）通过直接从活动记录继承来使模型持续存在会导致污染模型/域对象的职责。

他展示了一种如何解决这个问题的方法，这是一个比我的问题更普遍的解决方案。

# google-maps-api-3 - 在 ExtJS 4 中动态加载 Google Maps API v3

> ID：15490048
> 
> 赞同：3
> 
> 时间：2013-03-19T01:37:46.290
> 
> 标签：google-maps-api-3, extjs4

页面加载后，您可以在 ExtJS 4 中加载 Google Maps API 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T01:37:46.290

```
Ext.Loader.loadScriptFile('https://www.google.com/jsapi',function(){
    google.load("maps", "3", {
        other_params:"sensor=false",
        callback : function(){
            // Google Maps are loaded. Place your code here
        }
    });
},Ext.emptyFn,null,false); 
```

您可以使用以下方法将更多参数传递给 api：

`other_params: "sensor=false&libraries=places&key=YOUR_API_KEY"`

有关谷歌加载器的更多信息： [https ://developers.google.com/loader/](https://developers.google.com/loader/)

# python - Python在dos窗口中不能正确显示简体中文

> ID：15490050
> 
> 赞同：2
> 
> 时间：2013-03-19T01:37:49.420
> 
> 标签：python, cmd

我有一个在命令行上打印中文输出的 python 脚本。它在日食中工作正常。但是，当我在 dos 窗口中运行它时，它会打印 ? （问号）和乱码。可能是因为 big-5 vs gb 编码吗？如果是这样，我该如何控制它？

顺便说一句，我已经安装了亚洲字符集，这就是它在 Eclipse 中工作的原因

编辑：结合 chcp、encode('utf-8') 和设置非 unicode 处理程序，我现在可以看到字符，但简单的打印会导致异常：

```
chcp 65001
Active code page: 65001

Z:\src>c:\Python27\python.exe mobTest.py
Traceback (most recent call last):
  File "mobTest.py", line 94, in <module>
    print u'哈哈'.encode('utf-8')
IOError: [Errno 13] Permission denied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:52:49.547

你的系统语言环境是什么？ `English (United States)`，例如，控制台使用代码页 437，不支持中文字符。 `Chinese (Simplified, PRC)`可以将中文打印到控制台。

您可以`Region and Language`在控制面板 (Windows 7)、`Administrative`选项卡和重新启动中更改设置。之后，打印一个*Unicode*中文字符串到控制台就可以了。您甚至可以输入中文，因为 IME 将可用。

更改系统区域设置只会影响控制台和非 Unicode 程序。大多数现代程序都不会注意到。

**编辑**：使用中国 PRC 区域并在 Windows 控制台中运行的示例：

```
Python 2.7.3 (default, Apr 10 2012, 23:24:47) [MSC v.1500 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> print u'哈哈'
哈哈
>>> import sys
>>> sys.stdout.encoding
'cp936' 
```

使用 UTF-8 源编码的示例脚本。确保将源代码*保存*在 UTF-8 中，如`#coding`注释所述：

```
# coding: utf-8
print u'哈哈'
print '哈哈' # this will be UTF-8 encoded, and NOT work 
```

执行：

```
C:\>python x.py
哈哈
鍝堝搱 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T13:35:15.760

这就是我解决简体中文问题的方法：

1.  在区域和语言设置下将非 unicode 程序的显示设置为简体中文
2.  将以下行添加到 python 文件中（我建议先保存备份）：

    # - *- 编码：gbk -* -

这将替换您之前的任何编码（在我的情况下为 utf-8）。您的代码中已有的任何 utf-8 字符串都将在 gbk 中重新编码。所以你必须重新输入这些行。

现在在 dos 窗口和 eclipse 中运行将产生正确的字符。我猜对于繁体中文，类似的事情可以通过在Windows设置和big5中使用繁体中文来完成。对它的测试将留给读者作为练习。

# angularjs - Angular.js 与 Elm 的优缺点是什么？

> ID：15490053
> 
> 赞同：51
> 
> 时间：2013-03-19T01:38:00.337
> 
> 标签：angularjs, elm

我正在考虑在浏览器中进行一些反应式编程，并将 angular.js ( [http://angularjs.org/](http://angularjs.org/) ) 与 Elm ( [http://elm-lang.org/](http://elm-lang.org/) ) 进行比较。

每种方法的相对好处/问题是什么？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-20T17:54:24.357

我认为它们是不同的野兽，IMO，尽管它们确实共享尽可能声明性的目标，以及“嘿，让我们按照*他们应该做的方式*做事”的态度。

现在，使用**AngularJS** ，您仍然处于“熟悉”的领域。意思是，你在这里写一些标记，在那里写一些 JS，然后你提供它。与往常一样的工作流程。据我所知，AngularJS 的“创新”在于它用额外的元素类型*扩展*了 HTML，这样你就可以在标记中*声明*应用程序的许多方面和行为，然后它的 JS 库包含必要的为您提供模板、路由、数据绑定、表单验证、本地化等的机器（...编写这让我想知道 AngularJS 是否会有点臃肿。），这构成了一个非常完整的 Web 应用程序开发框架。它促使你以声明式的方式编写代码。

使用**Elm**，你真的进入了新的领域（如果你有一个“典型的”HTML/JS 前端开发背景）。这是一种不同的方式来进行（和思考）GUI 开发。您将使用一种全新的语言进行编写——专门用于以函数式反应式编程方式创建 GUI——理想情况下，您永远不会（至少不直接）处理任何传统的 DOM API。Elm 带有一种“标准库”，可为您提供随时间创建和操作图形/文本/等的工具。

您的 Elm 语言代码将以完全声明性的方式描述您希望 GUI 随着时间的推移和事件（用户输入等）发生时的外观和行为。然后，它将全部编译为 HTML/JS/CSS，以便在浏览器上运行。

榆树也很年轻。这取决于你和你的需要来决定这是否是一个劣势。

我猜对我来说，选择 AngularJS 就像我们在 JS 世界中习惯的那样“嘿，让我们试试这个 JS lib/framework 的东西”。您获取 lib 文件，将它们添加到您的项目中，然后开始使用它的 API。而使用**Elm**，您必须开始以不同的方式处理您的工作流程和问题的解决方案。

AngularJS 为你提供了很多结构，它与 Backbone.js 不同，但归根结底，如果你想做一些高级的 GUI 和图形行为，使用 AngularJS 你又要写很多东西了如果您使用 Elm，则无需编写管道样板文件。

另一方面，如果你现在必须开发和发布一个大型网络应用程序**，**使用我们迄今为止在网络上使用的常用 GUI 小部件，我倾向于选择 AngularJS，因为它更稳定。

话虽如此，我认为 Elm 是目前前端开发世界中发生的最有趣和最有前途的事情。而且，如果我今天必须开发和发布一些图形密集型的东西，我*会*选择 Elm，因为用它只需几行代码就可以完成非常复杂的 GUI 内容。但是我必须首先进入它的思维模式，并处理它非常年轻的事实，并且将它与现有的 JS 前端代码库集成可能并不容易，甚至不可能实现。

**编辑：**

截至 2015 年 3 月，Elm 更加健壮，并且有很好的工具（我想到了时间旅行调试器）。

Angular 还是一样的。我应该注意到 Angular 的方法，它的每次模型更改时都会发生一吨的事情（“双向数据绑定”）使其完全不适合诸如基于浏览器的游戏之类的东西，而Elm 擅长需要表现良好的游戏和高级 GUI 东西。此外，Elm 现在有一个快速（使用虚拟 dom diff'ing 方法）HTML 库，当您需要用 HTML 说话时。

我对 Elm 的看法是它的类型系统不像 Haskell 那样具有表现力。有些人可能认为这是在要求奢侈，但恰恰相反，这是在失去表达基本功能的能力。尤其是我们这些经验丰富的 JS 程序员，受苦于不够表达的静态类型系统，因为这意味着我们习惯于在 JS 中轻松表达的多态代码由于缺少例如 rank-2 而在 Elm 中成为类型错误类型。

幸运的是，Elm 中缺少的所有“愿望清单”功能都不存在，因为*正在讨论*它们及其替代方案。所以可以肯定的是，他们（或最好的替代品）最终会成为该语言。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-24T15:00:05.220

Elm 中复杂的静态图形布局和交互性都比 HTML/CSS/任何 JavaScript 框架简单得多。使用 Elm，意外的复杂性在于**类型**，但值得[学习它们](http://elm-lang.org/guide/model-the-problem)- 它们有助于更好地理解、调试和修改软件，如果你有函数式编程背景，你应该已经熟悉它们。请注意，您也可以[将 Elm 嵌入 HTML/JS](http://elm-lang.org/guide/interop)中，因此理论上您可以逐步迁移。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-28T17:14:51.447

Elm 比 Angular 更加固执己见，尤其是在**状态管理**方面。如果您发现状态成为传统 Angular 应用程序中的一个问题，那么您可能会倾向于使用 Redux 风格的方法来寻找集中式（单体状态），并且很快就会想到 ngrx。

Elm 体现了中心不可变状态的概念，并且是[Redux 的灵感来源](http://redux.js.org/docs/introduction/PriorArt.html)。Elm 使用纯更新（reducer）函数强制执行单个不可变状态。在我看来，这使得在高度反应性的 Web 应用程序中处理状态比在 Angular 中使用类似 OO 的模式可能产生的混乱要简单得多。

Elm 非常适合大多数应用程序，但是当您想要使用外部 JS 库（例如 google maps）时，它可能会变得更加复杂，因为它的外部函数接口（端口）非常严格。Material Design 中所需的那种动画也被证明对 Elm 架构具有挑战性——这并不是说没有动画，而是它们需要比你想做的更多的布线。

# c++ - opengl 多个五边形

> ID：15490055
> 
> 赞同：3
> 
> 时间：2013-03-19T01:38:04.643
> 
> 标签：c++, opengl, graphics

我正在尝试生成多个五边形，但由于某种原因，五边形相互连接。有什么建议么？

```
GLfloat arr[] = {100,200,340,230,130,190,200,190,260,120,200};

glColor3f(1.0, 1.0, 1.0);
GLfloat angle2, r2, r_big_circle2, r_small_circle2, step2 = 3.14 / 5.0;
r_big_circle2 = 25;
r_small_circle2 = 20;

glPushMatrix();

glBegin(GL_LINE_LOOP);
for (int n = 0; n < 5; n++){
    for (int i = 0; i < 10; i++)
    {
        r2 = (i % 2 == 0 ? r_small_circle2 : r_big_circle2);
        angle2 = step2 * i;
        glVertex3f(r2 * cos(angle2)-arr[n], r2 * sin(angle2)-arr[n], -500);
    }

}
glEnd();
glPopMatrix(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T01:39:52.070

移动`glBegin`并`glEnd`进入第一个`for`循环。此外`GL_LINE_LOOP`，对于 5 边多边形，应该只指定 5 个点`glVertex3f`- 您将每个五边形绘制两次，一次在其自身顶部。尝试：

```
for (int n = 0; n < 5; n++) {
    glBegin(GL_LINE_LOOP);
    for (int i = 0; i < 5; i++) {
        r2 = (i % 2 == 0 ? r_small_circle2 : r_big_circle2);
        angle2 = step2 * i;
        glVertex3f(r2 * cos(angle2)-arr[n], r2 * sin(angle2)-arr[n], -500);
    }
    glEnd();
} 
```

# javascript - 使用 JavaScript 将超链接转换为纯文本

> ID：15490057
> 
> 赞同：1
> 
> 时间：2013-03-19T01:38:48.443
> 
> 标签：javascript

使用 JavaScript，是否可以将超链接转换为纯文本（使其不再链接到任何页面？）

例如，是否可以`<a>`使用 JavaScript 将以下链接（在标签内）更改为纯文本（以便该文本不再链接到任何页面）？

```
<html>
    <body>
        <a href="http://www.wikipedia.org/" target="blank" id = "wikiLink">Go to Wikipedia</a>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T01:41:35.147

最简单的方法是删除其`href`属性：

```
document.getElementById('wikiLink').removeAttribute("href"); 
```

如果要完全删除节点，留下文本，试试这个：

```
var toRemove = document.getElementById('wikiLink'), parent = toRemove.parentNode,
    text = toRemove.firstChild;
parent.insertBefore(text,toRemove);
parent.removeChild(toRemove);
parent.normalize(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T01:41:49.727

```
document.getElementById("wikiLink").removeAttribute('href') 
```

或使用 jquery

```
$("#wikiLink").removeAttr('href'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-30T17:15:05.150

以下代码应将超链接呈现为文本。

$(element).find('a').contents().unwrap();

[JS BIN 演示](http://jsbin.com/leligule/2/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T01:43:48.837

如果要删除*所有*链接的“链接”行为，可以这样做：

```
var links = document.getElementsByTagName('a');
for(var i=0; i<links.length; i++) links[i].href = ''; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-26T16:12:06.007

使用 jQuery，一个简单的方法是删除链接并放置一个文本节点：

```
var $link = $('#wikiLink');
$link.after($link.text());
$link.remove(); 
```

# postgresql - Postgres 9.2 pg_largeobject 表空间

> ID：15490058
> 
> 赞同：0
> 
> 时间：2013-03-19T01:38:50.400
> 
> 标签：postgresql, centos, postgresql-9.2

我目前正在移动一些数据，并且遇到了一个有趣的问题。

我有一个 CentOS 服务器 (6.3) 并在内置磁盘空间有限的服务器上运行 Postgres 9.2；但是，我确实有大量非常可靠的外部网络磁盘空间可用。

我已将表空间设置为我的数据库的存储设备上的一个目录，一切似乎都运行良好，直到...

我意识到我有大量的 BLOB 数据需要存储在`pg_largeobject`.

我一直在研究如何设置表空间，`pg_largeobject`我确实找到[了一些结果](https://www.google.com/search?q=postgres%20alter%20pg_catalog%20tablespace&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a#hl=en&sugexp=les;&gs_rn=6&gs_ri=psy-ab&gs_mss=postgres%20alter%20pg_largeobjec%20tablespace&tok=ChZqJcfhL2IDlxWeh1gcSg&pq=postgres%20alter%20pg_catalog%20tablespace&cp=29&gs_id=3ci&xhr=t&q=postgres%20alter%20pg_largeobject%20tablespace&es_nrs=true&pf=p&client=firefox-a&rls=org.mozilla%3aen-US%3aofficial&sclient=psy-ab&oq=postgres%20alter%20pg_largeobject%20tablespace&gs_l=&pbx=1&bav=on.2,or.r_qf.&bvm=bv.43828540,d.b2I&fp=81c21314fc32b652&biw=1532&bih=1280)，但它们已经过时了。

我确实找到[了一篇](http://grokbase.com/t/postgresql/pgsql-hackers/09a5669m7s/moving-system-catalogs-to-another-tablespace)看起来很有希望的文章，但我很犹豫，因为该线程还提到事情将会/应该改变。

**我有两个问题...**

1.  在理想情况下，我想将所有 postgres（包括`pg_largeobject`）移动到这个外部存储上以便于维护。这可能吗？
2.  如果没有，我怎样才能`pg_largeobject`使用我的网络存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:43:21.143

正如您所提到的，您最好的选择是将整个 PostgreSQL 移动到远程存储上，假设存储使用可靠的文件网络块设备，如 iSCSI、ATAoE 或 NBD。我不建议在 NFS 上运行 Pg，而在 CIFS/SMBFS 上运行它是行不通的。

只是：

*   进行备份
*   记下`SHOW data_directory;`in的输出`psql`
*   关闭 PostgreSQL
*   将数据目录（包含`pg_xlog`,`pg_clog`等的文件夹）移动到远程存储
*   为 datadir 的新位置调整父目录的权限，以确保`postgres`用户`postgres`、组或`others`权限块至少`execute`在每个父目录上都有，以便它可以遍历树。
*   调整您的系统启动脚本以将新位置设置为 PostgreSQL 数据目录*或*将旧数据目录位置（由 输出`SHOW data_directory`）符号链接到新位置。
*   启动 PostgreSQL

不幸的是，不同的系统和软件包以不同的方式找到 datadir。例如，Debian/Ubuntu 使用 pg_wrapper。

# c++ - 为什么这两种代码变体会产生不同的浮点结果？

> ID：15490061
> 
> 赞同：9
> 
> 时间：2013-03-19T01:39:00.543
> 
> 标签：c++, floating-point

鉴于此示例 C++ 代码片段：

```
void floatSurprise()
{
    // these come from some sort of calculation
    int a = 18680, b = 3323524, c = 121;
    float m = float(a) / c;

    // variant 1: calculate result from single expression
    float r1 = b - (2.0f * m * a) + (m * m * c);
    cout << "r1 = " << r1 << endl;

    // variant 2: break up the expression into intermediate parts, 
    /// then calculate 
    float
        r2_p1 = 2.0f * m * a,
        r2_p2 = m * m * c,
        r2 = b - r2_p1 + r2_p2;

    cout << "r2 = " << r2 << endl;
} 
```

输出是：

> 开发1 = 439703
> 开发2 = 439702

在调试器中查看时，这些值实际上分别是 439702.50 和 439702.25，这本身就很有趣——不知道为什么 iostream 默认打印没有小数部分的浮点数。**编辑：**原因是 cout 的默认精度设置太低，至少需要 cout << setprecision(7) 才能看到这个数量级的小数点。

但我更感兴趣的是为什么我会得到不同的结果。我想这与舍入以及整数与所需的浮点输出类型的一些微妙相互作用有关，但我不能指望它。哪个值是正确的？

我很惊讶，用这么简单的一段代码就可以轻易地击中自己的脚。任何见解将不胜感激！编译器是 VC++2010。

**EDIT2：**我使用电子表格为中间变量生成“正确”值进行了更多调查，并发现（通过跟踪）确实它们正在被修剪，导致最终结果的精度损失。我还发现了单个表达式的问题，因为我实际上使用了一个方便的函数来计算平方而不是`m * m`那里：

```
template<typename T> inline T sqr(const T &arg) { return arg*arg; } 
```

即使我问得很好，编译器显然没有内联它，而是单独计算值，在将值返回给表达式之前修剪结果，再次扭曲结果。哎哟。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T01:49:54.613

您应该阅读我关于为什么在 C# 中发生同样事情的长长的回答：

[(.1f+.2f==.3f) != (.1f+.2f).Equals(.3f) 为什么？](https://stackoverflow.com/questions/15117037/1f-2f-3f-1f-2f-equals-3f-why/15117741#15117741)

总结：首先，浮点数只能精确到小数点后七位。正确的答案是你在整个计算过程中用精确的算术来做大约 439702.51239669 ......所以考虑到浮点数的限制，无论哪种情况，你都非常接近正确的答案。

但这并不能解释为什么你会得到不同的结果，看起来完全一样的计算。答案是：允许编译器有很大的自由度以使您的数学*更准确*，并且显然您遇到了两种情况，其中优化器采用逻辑上相同的表达式并且不将它们优化为相同的代码。

无论如何，请仔细阅读我关于 C# 的回答；那里的所有内容也适用于 C++。

# windows - $DOCUMENTS 安装到管理文件夹

> ID：15490065
> 
> 赞同：1
> 
> 时间：2013-03-19T01:39:23.527
> 
> 标签：windows, windows-7, nsis

我有这个 nsis 安装程序脚本。它设置为安装到

```
InstallDir $DOCUMENTS\OCTGN\OCTGN 
```

问题是，安装程序安装了 .net 4.0 和 vc2010，所以它需要提升才能工作。当它被提升时，如果用户的帐户是“标准用户”，它将最终安装到管理员的“我的文档”文件夹中。

有没有人对我如何解决这个问题有任何想法，以便将其安装到正确的位置？

附带说明：我不想更改程序文件、应用程序数据或任何其他位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:50:40.280

您基本上是在与 UAC 的设计方式作斗争，最好的选择是不要混合写入 HKLM 与 HKCU 以及 $ProgramFiles 与 $Profile。

一个不错的解决方法是使用`RequestExecutionLevel user`，如果您检测到未安装 .net 4.0 或 vc2010，则提取一个请求提升的迷你安装程序并执行设置的管理部分。

您最后的选择是使用[UAC 插件](http://nsis.sourceforge.net/UAC_plug-in)...

# bash - 尝试向此脚本添加选项，但效果不佳

> ID：15490070
> 
> 赞同：1
> 
> 时间：2013-03-19T01:39:49.580
> 
> 标签：bash

我从这个名为 wd 的脚本开始：

```
cat "$@" | tr -cs '[:alpha:]' '\n' | tr '[:upper:]' '[:lower:]' 
| sort | uniq -c | sort -n | awk '{print $2 " " $1}' | sort 
```

这将任意数量的文件作为输入并打印文件中单词的分布，如下所示：

```
wd file1 file2

blue 2
cat 3
the 5
yes 1 
```

现在我正在尝试为其添加 2 个选项：s 和 t。s 使脚本获取一个名为 stopwords 的输入文件，并在进行分发之前从输入文件中删除这些词。t 将数字 n 作为参数，仅输出前 n 个单词。默认为所有单词。

所以，到目前为止，我有这个脚本。目前，我的问题是当我尝试使用 -t 10 选项时，它告诉我找不到文件 10，但无论如何它应该是一个数字，而不是文件。而且，当我尝试使用 -s 选项时，它什么也不做，但不输出任何错误。我知道这个问题不是很具体，但我会很感激任何关于错误的想法。

```
#!/bin/bash

stopwords=FALSE
stopfile=""
topwords=0

while getopts s:t: option 
do
    case "$option"
    in
        s) stopwords=TRUE
        stopfile="$OPTARG";;
        t) topwords=$OPTARG;;
        \?) echo "Usage: wd [-s stopfile] [-t n] inputfile"
            echo "-s takes words in stopfile and removes them from inputfile"
            echo "-t means to output only top n words"
            exit 1;;
    esac
done

if [ "stopwords" = FALSE ]
then
    cat "$@" | tr -cs '[:alpha:]' '\n' | tr '[:upper:]' '[:lower:]' 
| sort | uniq -c | sort -nr | head -n $topwords | awk '{print $2 " " $1}' | sort
else
    cat "$@" | grep -v -f "$stopfile" |  tr -cs '[:alpha:]' '\n' | tr '[:upper:]' '[:lower:]' 
| uniq -c | sort -nr | head -n $topwords | awk '{print $2 " " $1}' | sort
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:53:12.343

通常在`while getopts`循环之后你需要`shift $((OPTIND - 1))`. `ksh`以下是我之前为and编写的示例`bash`：

```
PROGNAME=$0

function _echo
{
    printf '%s\n' "$*"
}

function usage
{
    cat << END
usage: $PROGNAME [-a] [-b arg] [-h] file...
END

    exit $1
}

function parseargs
{
    typeset opt v

    [[ $# = 0 ]] && usage 1

    while getopts ":ab:h" opt "$@"; do
        case $opt in
            a)   _echo -$opt ;;
            b)   _echo -$opt $OPTARG ;;
            h)   usage ;;
            :)   _echo "! option -$OPTARG wants an argument" ;;
            '?') _echo "! unkown option -$OPTARG" ;;
        esac
    done
    shift $((OPTIND - 1))

    for v in "$@"; do
        _echo "$v"
    done
}

parseargs "$@" 
```

# c++ - 关于通过 Get 和 Set 方法传递字符串

> ID：15490072
> 
> 赞同：0
> 
> 时间：2013-03-19T01:40:02.313
> 
> 标签：c++, string

我正在做一个项目，要求用户输入一个字符串，然后通过 get 和 set 函数简单地显示字符串。但是，实际上让用户输入字符串然后将它们传递给 get 和 set 函数时，我遇到了问题。这是我的代码：这是我的 Main.cpp ：

```
#include "stdafx.h"
#include <iostream>
#include "Laptop.h"
#include<string>
using namespace std;
int main()
{
    Laptop Brand;
    string i;
    cout << "Enter your brand of laptop : ";
    cin >> i;
    Brand.setbrand (i);
    return 0;
} 
```

这是我的 Laptop.cpp ：

```
#include "stdafx.h"
#include <iostream>
#include "Laptop.h"
#include <string>
using namespace std;
void Laptop::setbrand(string brand)
    {
        itsbrand = brand;
    }

string Laptop::getbrand()
    {
        return itsbrand;
    } 
```

这是我的 notebook.h ：

```
#include<string>
class Laptop
{
private :
    string itsbrand;

public :
    void setbrand(string brand);
    string getbrand();

}; 
```

在我的 notebook.cpp 中，setbrand 和 getbrand 出现错误。他们说 getbrand 和 setbrand 不兼容。我很确定这与我通过参数传递一个字符串有关。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:45:56.100

这里好的解决方法是使用`std::string`而不是`string`在头文件中：

```
class Laptop
{
private :
    std::string itsbrand;

public :
    void setbrand(std::string brand);
    std::string getbrand();
}; 
```

与您没有的其他文件不同`using namespace std`。我实际上建议只`std::string`在任何地方使用。它更安全，并且可以帮助您避免以后遇到更严重的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:48:42.080

您错过了在文件中包含正确的命名空间，因此编译器在当前（全局）命名空间中`laptop.h`找不到任何声明的类。`string`只需在文件的开头放置`using std::string;`.

在旁注中，我会避​​免通用

```
using namespace std; 
```

因为它首先违背了拥有命名空间的目的。通常最好明确指定您正在使用哪种类。所以：

```
using std::string; 
```

更好。

# jquery - 我怎样才能让这个 jQuery 按钮给我一个带有 .fadesIn div 框选项的下拉列表？

> ID：15490076
> 
> 赞同：2
> 
> 时间：2013-03-19T01:40:17.450
> 
> 标签：jquery, jquery-ui

我正在尝试在[TechCrew 网站](http://techcrewnetwork.com "TechCrew 的网站")的中央 div 框右侧添加一个按钮。这将是一个小齿轮图标。它将有一个下拉菜单，其中包含显示其他信息的选项。我想我做对了，但它不起作用。帮助这个 Codecademy 菜鸟...检查一下：

[进行中的工作](http://techcrewnetwork.com/default1.html "进行中的工作")

**的HTML**

```
<head>
<script src="jQuery/jquery-1.9.1.js"></script>
<script src="jQuery/ui/jquery.ui.effect.js"></script>
<script src="jQuery/ui/jquery.ui.effect-scale.js"></script>
<script src="jQuery/ui/jquery.ui.effect-shake.js"></script>
<script src="jQuery/ui/jquery.ui.effect-slide.js"></script>
<script src="jQuery/ui/jquery.ui.core.js"></script>
<script src="jQuery/ui/jquery.ui.widget.js"></script>
<script src="jQuery/ui/jquery.ui.button.js"></script>
<script type="text/javascript" src="tcn_main.js"></script>  
</head>
<body>
  <div id="sidebox"><h2>Advisory Board</h2><!--This is the extra info that will pop up-->
        <ul>
            <li>Name1</li>
            <li>Name2</li>
        </ul>    
  </div>
<a href="#" class="jqbutton {icon: ui-icon-gear}">Show additional information</a><!--gear icon, text gets hidden-->
<ul id="menu"> <!--Dropdown menu inside the gear-->
  <li class="ui-state-disabled"><a href="#">Who is advising you guys?</a></li>
</ul>
</body> 
```

**CSS**

```
@import "jQuery/themes/base/jquery.ui.base.css";
@import "jQuery/themes/base/jquery.ui.theme.css";
#sidebox{
/*Let's have it start hidden (display:none) and use JavaScript to call it into existance upon request */
    display:none;
    float:left;
    margin-right:auto;
    margin-top:25%;
    padding:5px;
    -moz-box-shadow: 0 0 30px 5px #999;
    -webkit-box-shadow: 0 0 30px 5px #999;
    box-shadow: 0 0 30px 5px #999;
    background-color:#fcde3f;
    color:#be2226;
    overflow:hidden;
    min-width:200px;
    max-width:500px;

}
#sidebox h2{
    text-align:center;
}
.ui-menu { 
    width: 150px; 
}
#menu{
    display:none;
}
#options{

} 
```

**JavaScript**

```
$(document).ready(function(){
    $('#menu').menu();

    $(".jqbutton").each(function(){
        var data = $(this).metadata();
        $(this).button({ icons: {primary:data.icon} });
    });

    $('.jqbutton').click(function(){
        $('#menu').fadeIn('slow');
    });

    $('#menu a').click(function(){
        $('#sidebox').fadeIn('slow');
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:53:07.870

这可能是因为您尝试通过 jQuery 获取的按钮类是 'class="jqbutton {icon: ui-icon-gear}' 而不是 'class="jqbutton'

尝试给 <a> 一个 ID，然后通过 jquery 获取 ID。

所以添加：

```
<a id="myBtn" href="#" class="jqbutton {icon: ui-icon-gear}">Show additional information</a> 
```

和

```
$('#myBtn').click(function(){
    $('#menu').fadeIn('slow');
}); 
```

# php - 隐藏所有子元素的问题

> ID：15490077
> 
> 赞同：0
> 
> 时间：2013-03-19T01:40:26.783
> 
> 标签：php, jquery, html

我在创建可折叠元素列表时遇到了一些问题。

我的代码如下所示：

```
<div class="projectscontainer">
    <span class="item destproject" title="ID: 384">Kaoweuzax-Xrjamjhxteaq</span><br>
    <div class="srcprojects">
        <div class="arrow-right"></div>
            <span class="item srcproject" title="ID: 1991">Eovwurxmpgmz 6.b</span><br>
    </div>
</div>
<div class="projectscontainer">
    <span class="item destproject" title="ID: 383">Uxiuhbgbt0.5-Rdsopvxc Fucxbhivs</span><br>
    <div class="srcprojects">
        <div class="arrow-right"></div>
        <span class="item srcproject" title="ID: 1990">Zekgyfrmc-Tpuduwzr Idkudowbi</span><br>
    </div>
</div>
<div class="projectscontainer">
    <span class="item destproject" title="ID: 394">Lyxiyp</span><br>
    <div class="srcprojects">
        <div class="arrow-right"></div>
        <span class="item srcproject" title="ID: 2108">Kdvdz</span><br>
    </div>
</div>
    <div class="srcprojects">
        <div class="arrow-right"></div>
        <span class="item srcproject" title="ID: 2109">Derqi-AA_Boejbvr</span><br>
    </div>
    <div class="srcprojects">
        <div class="arrow-right"></div>
        <span class="item srcproject" title="ID: 2110">Yhdju-SkneLxiyuz</span><br>
    </div> 
```

jQuery在这里：

```
$(document).ready(function(){
    $(".projectscontainer").click(function(){
      $(this).children('.srcprojects').toggle();
    });
}); 
```

PHP：

```
<?php
$result_rules = $db->query("SELECT rules.source_id, rules.destination_id, dest.project AS dest_project, src.project AS src_project, src.    pk_id as src_id
        FROM dbo.FFC_Rules rules
        INNER JOIN dbo.FFC_Destination dest
            ON dest.pk_id=rules.destination_id
        LEFT JOIN dbo.FFC_Source src
            ON src.pk_id=rules.source_id
        ORDER BY dest.project ASC");

$last_dest = false;
$last_src = false;
while($row = sqlsrv_fetch_array($result_rules)){  
    if ($row['destination_id'] !== $last_dest) {
        $last_dest=$row['destination_id'];
        echo "<div class='projectscontainer'>";
        echo    "-<span class='item destproject' title='ID: ".$row['destination_id']."'>".$row['dest_project']."</span>";
        echo    "<br>";
    }
        echo    "<div class='srcprojects'>";
        echo        "<div class='arrow-right'></div>";
    if ($row['src_id'] === null) {
        echo        " Source ID for Destination ID ".$row['destination_id']." is NULL ";
    } else {
        echo        "<span class='item srcproject' title='ID: ".$row['src_id']."'>".$row['src_project']."</span>";
    }
    echo            "<br>";
    echo        "</div>";
    echo    "</div>";
}
?> 
```

现在，如果 destproject 下只有 1 个 srcproject，它就可以工作，但是我希望在单击 destproject 时隐藏 destproject 的所有子项（srcproject）。

我知道，由于每个 destproject 中的第一个 srcproject 是我的标记中的子项，因此它不起作用。我不知道的是，我怎样才能修复我的 PHP 代码中的标记，或者更改 jQuery 以使其正常工作。

[JSFiddle](http://jsfiddle.net/for3v3rforgott3n/Q63Dx/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:31:15.293

解决。我将循环更改为如下所示：

```
$last_dest = false;
while($row = sqlsrv_fetch_array($result_rules)){  
    if ($row['destination_id'] !== $last_dest) {
        if ($last_dest !== false)
            echo "</div>";
        $last_dest = $row['destination_id'];
        echo "<div class='projectscontainer'>";
        echo    "<span class='item destproject' title='ID: ".$row['destination_id']."'>".$row['dest_project']."</span>";
        echo    "<br>";
    }
        echo    "<div class='srcprojects'>";
        echo        "<div class='arrow-right'></div>";
    if ($row['src_id'] === null) {
        echo        " Source ID for Destination ID ".$row['destination_id']." is NULL ";
    } else {
        echo        "<span class='item srcproject' title='ID: ".$row['src_id']."'>".$row['src_project']."</span>";
    }
    echo            "<br>";
    echo        "</div>";
}
echo        "</div>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:47:53.983

使用`find()`.

```
$(document).ready(function(){
    $(".projectscontainer").click(function(){
      $(this).find('.srcprojects').toggle();
    });
}); 
```

看起来有一些额外的`</div>`标签会导致问题。我已经删除了它们并更新了[jsFiddle](http://jsfiddle.net/Q63Dx/3/)。

# javascript - jQuery/JS 设置超时/清除超时

> ID：15490078
> 
> 赞同：1
> 
> 时间：2013-03-19T01:40:36.457
> 
> 标签：javascript, jquery

我对此不是很精通，但是我有一个导航项，在悬停时，带有搜索表单的 div 会向下滑动。目前，当您将鼠标悬停，然后鼠标移出时，div 会保持打开状态，直到您单击关闭按钮。

我正在努力做到这一点，以便当您鼠标移出几秒钟后 div 幻灯片备份时，除非用户仍在 div 或 nav 链接上（即，他们正在填写搜索表单）。

这是我到目前为止所拥有的：

```
$("#services_link").mouseover(function() {
        $("#services_link").css('background-position','left -73px');
        $("#vendors_dropdown").slideDown(function() {
            setTimeout(HideMe, 4000);
        });
    });

    function HideMe() {
        $("#services_link").css('background-position','left 0');
        $("#vendors_dropdown").slideUp();
    } 
```

这让我和 div 一样在链接悬停时向下滑动，并在 4 秒后向上滑动（无论鼠标光标在哪里）。因此，如果鼠标光标位于链接或 div 上，我只需要 div 保持打开状态。

我已经查看了 3 或 4 个其他类似的问题（和答案），但没有一个能真正做到这一点。setTimeout（和 clearTimeout）对我来说有点新，所以请原谅这个菜鸟问题。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:44:19.200

绑定 mouseenter 和 mouseleave。你会想要在 mouseleave 上做超时，但是当/如果 mouseenter 再次发生时重置它。

试着只看[这里](https://stackoverflow.com/questions/3015319/jquery-javascript-settimeout-cleartimeout)选择的答案，看看如何做我在说的。

像这样的东西：

```
var timeout;
$("#services_link, #vendors_dropdown").mouseenter(function() {
    window.clearTimeout(timeout);
    $("#services_link").css('background-position','left -73px');
    $("#vendors_dropdown").slideDown();
}).mouseleave(function(){
    timeout = window.setTimeout(HideMe, 4000);
});

function HideMe() {
    $("#services_link").css('background-position','left 0');
    $("#vendors_dropdown").slideUp();
} 
```

# d3.js - 使用 d3.js 更新行的数据以响应拖动事件

> ID：15490079
> 
> 赞同：4
> 
> 时间：2013-03-19T01:40:40.857
> 
> 标签：d3.js

我正在使用 d3 创建两个折线图，当用户在其中一个图的范围内拖动时，它们都可以放大。我已经能够通过在拖动事件结束时重新绘制每个图形来实现它，但我只想进行更新并可能进行动画转换。出于某种原因，图表开始更新，但它们没有绘制新数据，因此它们只是变成空图表，即使它只是一个图表更新。我在尝试更新之前和之后都做了console.log(newdata)，并且数组中有大量数据，并且它的格式与原始数据相同。我确实有很多点（数千个），但是我已经看到 d3 示例可以很好地处理如此大的数据集，至少作为折线图。使用 Firebug，我没有收到任何错误，并且函数完成（矩形被删除）。我意识到我还需要更新规模，但我想至少先更新数据。我对 d3 很陌生，所以如果我只是在做一些愚蠢的事情，我不会感到惊讶。非常感谢任何帮助。

这是画线的代码，后面是处理拖动事件的代码。

```
var line = d3.svg.line()
    .x(function(d){return x_scale(d.x)})
    .y(function(d){return y_scale(d.y)})
d3.select("#graph" + pointnum + " svg g")
        .append("path")
        .attr("d", line(data))
        .attr("class", "dist_line");

var dragrect;

var dragit = d3.behavior.drag()
    .on("dragstart", function(){
        omsi_globals.startx = Math.round(d3.mouse(this)[0]);
        dragrect = d3.select("#graph" + pointnum + " svg g")
            .append("rect")
                .attr("x", omsi_globals.startx)
                .attr("y", 0)
                .attr("width", 1)
                .attr("height", omsi_globals.chart_dimensions.height)
                .attr("fill", "gray")
                .attr("opacity", ".1");
    })
    .on("drag", function(){
        var currx = d3.mouse(this)[0];
        if(omsi_globals.startx > currx){
             dragrect.transition()
                .attr("x", currx)
                .attr("width", Math.abs(currx - omsi_globals.startx))
                .delay(0)
                .duration(10);
        }
        else dragrect.transition()
                .attr("width", Math.abs(currx - omsi_globals.startx))
                .delay(0)
                .duration(10);
    })
    .on("dragend", function(){
        var startx = omsi_globals.startx;
        var endx = Math.round(d3.mouse(this)[0]);
        //make sure the drag covered more than one pixel. If not, fade out the rect
        if(Math.abs(startx - endx)< 1){
            dragrect.transition().attr("width", 0); 
            return;
        }
        //people can drag both directions, so figure out which is lower and which is higher
        var lowerx = Math.min(startx, endx);
        var higherx = Math.max(startx, endx);
        //we'll scale as a proportion of the current x scale (not indices, which are more regular than the data)
        var currxmin = omsi_globals.d3data[pointnum-1][0].x;
        var currxmax = omsi_globals.d3data[pointnum-1][omsi_globals.d3data[pointnum-1].length-1].x;
        var chartwidth = omsi_globals.chart_dimensions.width;
        var newmin = ((lowerx/chartwidth) * (currxmax - currxmin)) + currxmin;
        var newmax = ((higherx/chartwidth) * (currxmax - currxmin)) + currxmin;
        //decide if it's time to switch to raw data or not
        var sourcedata = [];
        var newdata = [];
        //switch to raw data if down to less than threshold width
        if(newmax - newmin < omsi_globals.threshold) sourcedata = omsi_globals.plotpoints[pointnum-1].raw; 
        else sourcedata = omsi_globals.d3data[pointnum-1];
        for(i=0; i<sourcedata.length; i++){
            if(sourcedata[i].x < newmax && sourcedata[i].x > newmin){
                newdata.push(sourcedata[i]);
            }
        }
        //update the global variables to be read by d3
        omsi_globals.d3data[pointnum-1] = newdata;
        omsi_globals.d3xranges[pointnum-1] = [newdata[0].x, newdata[newdata.length-1].x];
        d3.selectAll("#graph" + pointnum + " path")
            .data(newdata)
            .transition()
            .duration(2500)
            .attr("d", line);
        dragrect.remove();

    }); 
```

# typescript - 通过 StringLiteral 导入模块

> ID：15490082
> 
> 赞同：0
> 
> 时间：2013-03-19T01:41:13.847
> 
> 标签：typescript

Typescript 规范提到您可以通过以下方式导入模块 `module(StringLiteral)`：

![按字符串导入](../Images/0d77b390e746f88e6010ad79dec048d6.png)

但是它对我不起作用：

```
module M
{
}
import test1 = M; // Okay 
import test2 = module(M); // Okay 
import test3 = module("M"); // Error 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:46:07.200

当您使用字符串文字时，您是在告诉 TypeScript 这是一个外部模块。这将由文件夹中具有顶级“export”语句（表示它是外部模块）的另一个具有该名称的文件（即“M.ts”）定义，或者通过声明此类外部模块存在（例如，参见“node.d.ts”键入声明内置节点模块的节点示例）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:47:57.000

`module M { }`定义一个*内部*模块，而不是一个*外部*模块。

`import test1 = module(M);`应该是每个语法的语法错误（`M`不是字符串文字）。

`module("M")`是一个错误，因为“M”没有可以解决的*外部模块（有关更多信息，请参见比尔的回答）*

# php - PHP - 如何获取使用 cURL 脚本的 php 页面的“URL”值？

> ID：15490083
> 
> 赞同：2
> 
> 时间：2013-03-19T01:41:23.220
> 
> 标签：php, url, curl, get

我有 2 个 php 文件：“1.php”和“2.php”。

“1.php”的内容如下：

```
<?PHP
$url = "http://www.google.com/";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$html = curl_exec($ch);
echo $html;
curl_close($ch);
?> 
```

当我去[http://domain.com/1.php](http://domain.com/1.php) -> 它将返回 www.google.com 的内容

问题是：
如何使用“2.php”获取“1.php”的“www.google.com”网址？

（我想当我去“ [http://domain.com/2.php](http://domain.com/2.php) ”时它会显示“www.google.com”文本。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-04T06:44:22.680

Instead of having two files, you can use three: a configuration file, which will contain the URL, and two others that will use this URL in two different ways.

For example (to use your filenames):

conf.php (configutation file):

```
<?php
$url = "http://www.google.fr/"; 
```

1.php (your code):

```
<?php
//Include conf file
require 'conf.php';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$html = curl_exec($ch);
echo $html;
curl_close($ch); 
```

2.php (your code again):

```
<?php
//Include conf file
require 'conf.php';

echo $url; 
```

Some possible improvements: use less generic names and an array (instead `$url` we can consider for example `$conf['url']`)

# magento - Magento 创建新客户页面

> ID：15490084
> 
> 赞同：1
> 
> 时间：2013-03-19T01:41:26.153
> 
> 标签：magento, account, custom-pages

好吧，我根本想不通。我已经搜索过，我也找不到任何东西。将新页面添加到帐户部分的最佳方法是什么。我正在尝试将支持票证系统集成到 magento 帐户页面中，即用户必须登录并注册才能使用此功能。我可以使用 cms 页面和自定义页面布局来实现这一点。但是然后我如何设置这个自定义 cms 页面仅适用于登录用户？

同样这样做是显示类别菜单而不是帐户菜单。我怎样才能让我的帐户菜单改为显示？或者有更好的方法吗？我是 magento 的新手，我真的卡住了，无法弄清楚，所以任何帮助都将不胜感激。

我正在运行 magento 1.7.0.2 社区版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:53:28.283

如果我理解正确，只需检查客户是否已登录，但为了使用 PHP，您将不得不使用模板系统并创建一个模块，或者生成您自己的“独立页面”如果您走模块路线：

```
if ($this->helper('customer')->isLoggedIn()){
   //show page contents or do whatever  .. 
}
else{
header( 'Location: http://www.yoursite.com/customer/account/login/' ) ;
} 
```

就是你所需要的。如果你走独立路线：

```
//LOAD MAGENTO
require_once 'YOUR_PATH_TO_MAGENTO/app/Mage.php';
umask(0);
Mage::app('YOUR_WEBSITE_CODE', 'website');

//GET SESSION DATA
Mage::getSingleton('core/session', array('name'=>'frontend'));
$session = Mage::getSingleton('customer/session', array('name'=>'frontend'));
$customer_data = Mage::getModel('customer/customer')->$session->id);

//CHECK IF LOGGED IN
if($session->isLoggedIn()){
echo 'Welcome ' . $customer_data->firstname . " " . $customer_data->lastname;
} else {
echo "Access Denied: Sorry, but this page is for registered members only.";
exit;
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T04:35:07.227

对于任何动作，都有一个控制器和动作函数。

因此，对于您的新功能，您需要定义一个操作。确保此操作值在 URL 中。

现在在您的控制器中添加此操作功能

```
myAction()
{
    if ($this->helper('customer')->isLoggedIn()){
   //show page contents or do whatever  .. 
    }
    else{
    header( 'Location: http://www.yoursite.com/customer/account/login/' ) ;
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-01T09:26:27.137

虽然上面的两个答案可能已经足够了发布的问题，只是为了说明，这肯定不是使用 Magento 的正确方法，我认为更好地理解如何根据 magento 实践来实现这一点[Alan Storm](http://alanstorm.com/magento_create_customer_page)的这个教程是个好地方，但是该博客中的 preDispatch 方法存在一些问题，我认为它可能是更好的选择：

```
public function preDispatch() {
        parent::preDispatch();
        if (!Mage::getSingleton('customer/session')->authenticate($this)) {
                $this->setFlag('', 'no-dispatch', true);
        }
    } 
```

我从[这里](http://istockphp.com/magento/adding-custom-page-to-the-customer-account-dashboard/)得到的。在 Alan 的博客中，如果客户已经登录并尝试转到自定义帐户页面，他将被重定向到主页（在我的情况下是这样。）

# unit-testing - Visual Studio 2012 Premium 单元测试禁用 Internet 浏览

> ID：15490089
> 
> 赞同：1
> 
> 时间：2013-03-19T01:41:47.270
> 
> 标签：unit-testing, visual-studio-2012

我刚刚开始对 Visual Studio 2012 使用单元测试。出于某种原因，在执行单元测试之后，我的浏览器都不会“工作”。IE，Chrome 两者都会表现得好像我的连接断开了。要恢复它，我必须重置我的 Internet Explorer 设置。我们团队中的其他人也遇到了同样的问题。

在调试测试并在正常完成之前停止执行时似乎会发生这种情况。

有没有人看到过这个，或者有没有人对检查什么可以阻止交通有任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:05:49.163

Visual Studio Update 2 为我修复了这个错误。

更新：实际上仍然会发生，但是如果我转到控制面板 => 网络和共享中心，然后连接选项卡选择我的网络设置并单击 LAN 设置

关闭“为 LAN 使用代理服务器”。

一切恢复正常。

# java - 除了修改 hadoop-env.sh 之外，如何在 hadoop 中指定系统属性？

> ID：15490090
> 
> 赞同：2
> 
> 时间：2013-03-19T01:41:49.027
> 
> 标签：java, hadoop, system-properties

我想在运行 hadoop 作业时设置系统属性（不是 hadoop 属性）。我发现设置系统属性并不容易。即使我在 shell 中设置属性

```
export HADOOP_OPTS="$HADOOP_OPTS:-Dproperty=value" 
```

它仍然无法正常工作。hadoop命令行的“-D”选项只用于配置，不用于系统属性。所以“-D”选项也不起作用

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T10:02:09.770

为什么不在`-Dfoo.bar=example`通过命令行启动作业时简单地使用 in-line ，如下所示：

`hadoop jar example.jar com.example.ExampleTool -Dfoo.bar=example argument`

为了在代码中获取属性，请使用`conf.get("foo.bar");`

* * *

现在，如果您确实需要将其设置为系统属性，则可以使用从 Hadoop 配置中获得的值在代码开头进行设置，如下所示：

```
String property = conf.get("foo.bar");
System.setProperty("foo.bar", property); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-09T04:20:08.920

脚本像这样`hadoop`调用java类

```
exec "$JAVA" $JAVA_HEAP_MAX $HADOOP_OPTS $CLASS "$@" 
```

所以，我们可以像这样传递系统范围的属性：

```
export HADOOP_OPTS="$HADOOP_OPTS -Dfoo=bar" 
```

# 2d - Unity3D：我的 2D 游戏瓷砖之间奇怪的 1 像素白线

> ID：15490099
> 
> 赞同：5
> 
> 时间：2013-03-19T01:42:59.013
> 
> 标签：2d, unity3d, pixel, tile

我的游戏有一个平铺的 2d 地图。这是场景截图： ![在此处输入图像描述](../Images/9d6e33ebe6685f725cd8fd48bc7dc6df.png)

我发现当我垂直移动相机时，随机瓷砖之间随机出现奇怪的白线，见： ![在此处输入图像描述](../Images/6351448d0f71ad8f2f81a6f14dc58f36.png)

我不知道为什么......

PS：这是一款像素风格的2d游戏，所以我的贴图滤镜模式是“Point”。

[PS：我在https://dl.dropbox.com/u/53858613/Web/Web.html](https://dl.dropbox.com/u/53858613/Web/Web.html)上传了这个测试场景，按住鼠标左键，相机会向下移动，然后你会随机看到白线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-03T05:40:33.363

将您的材质着色器更改为更适合 2D 的东西。比如精灵/默认。

我做了一个快速测试项目并将着色器从“漫反射”更改为“精灵/默认”解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-03T22:32:56.710

为我解决的问题是将我的 2D spritesheet 的压缩设置为指向而不是双线性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:49:29.817

在您的示例项目中，我没有在我的机器上看到这个问题。看起来刚刚好。

1）确保实际图像中没有白线。

2) 确保解决方案选项不是问题。

3）我不是 100% 确定，但在天空盒中，黑线也会发生同样的情况。如果可能，尝试将纹理的纹理模式更改为 Clamp。这可能会解决问题。

希望这会有所帮助，-Smileynator

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-09T18:30:41.827

根据[Brackeys 的这个 Tilemap 教程](https://www.youtube.com/watch?v=ryISV_nH8qw)，尝试在 Edit>Project Settings>Quality>Anti Aliasing 下关闭 antialiasing。

# spring - 如何将 spring2 与 rest 和 hibernate 插件一起使用？

> ID：15490100
> 
> 赞同：0
> 
> 时间：2013-03-19T01:42:59.110
> 
> 标签：spring, hibernate, rest

这是关于我的 struts.xml 中的配置：

其余插件建议使用

```
<constant name="struts.mapper.class" value="rest" />
<constant value="Controller" name="struts.convention.action.suffix" />
<constant value="true" name="struts.convention.action.mapAllMatches" />
<constant value="rest-default" name="struts.convention.default.parent.package" />
<constant value="rest" name="struts.convention.package.locators" /> 
```

它不再使用包。它们都是通过约定插件计算出来的。fullhibernate-plugin 告诉我使用

```
<package name="default" extends="hibernate-default"> 
```

尽管。

我如何集成它以使 REST*和*休眠运行？什么是正确的配置？

（目前我得到一个 NullPointerException 因为我的 Session 没有被注入。）

非常感谢您的帮助！

**以下是更多上下文：**

我有一个名为“Task”的 bean 类，它有“Dependees”（全部通过 Hibernate 管理）

```
@ManyToMany(fetch=FetchType.LAZY)
@JoinTable(name = "TASKLIST_TASK",
    joinColumns = @JoinColumn(name = "TASK_ID"),
    inverseJoinColumns = @JoinColumn(name = "TASKLIST_ID"))
private Set<Task> dependees; 
```

这是一个相当大的集合，所以我不想使用 FetchType.EAGER（我也不能，因为另一个关系会使它成为周期性的）。当我不使用休眠插件时，我无法通过 JSP 访问依赖项，因为 Action/Controller 在 JSP 呈现之前已经关闭了会话，然后延迟获取不起作用。因此，我需要休眠插件——在呈现 jsp*后关闭会话。*

问题是我不知道如何告诉休眠插件它应该将会话对象注入我的类。它已经被注释了（我猜）但是休眠插件只是不看它。

```
public class TaskDAO {

@SessionTarget
Session session;

@TransactionTarget
Transaction transaction;

...
} 
```

如果这是一个问题：我尽可能在 xml 上使用注释......

我想我只需要正确配置其余的和休眠插件来完成他们的工作（同时）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:19:52.620

好的！我缺少的部分是这条线

```
<constant value="hibernate-default" name="struts.convention.default.parent.package" /> 
```

这为每个 REST 控制器提供了 hibernate-default 包！

用 hibernate-4.1 重新编译 fullhibernate-plugin 后，我现在可以使用它了。延迟初始化仍然不起作用，但我更进一步:-)

# php - PHP - ( Regex ) - 查找不包含 -num X num 的文件

> ID：15490102
> 
> 赞同：0
> 
> 时间：2013-03-19T01:43:13.330
> 
> 标签：php, regex

这是一个一般的正则表达式问题，尽管我会在 PHP 中应用它。

我正在尝试查找所有不包含类似`-123x456`或`-12345x678`表示格式始终为`-INT`x的字符串的文件`INT`。（如图像分辨率）。

该字符串是文件名的一部分。并且“constsnts”是字符串前面的减号（ - ）和中间的X（可以是大写字母也可以不是）

[在THIS](http://www.gskinner.com/RegExr/)的帮助下，我们提出了以下表达式：

```
^(?:(?!STRING).)*$ 
```

或者在我的情况下：

```
^(?:(?!x).)*$ 
```

但这将排除所有包含`x`

`x`当不知道它们有多少位数字时，如何在两侧添加数字，但知道在文件名之前或之后可能有一个数字是文件名的一部分

（例如`myfile-x1-456x78`9 VR。`myfile-x12`）

我需要一个单独的解决方案来解决`x`特定的问题，或者`X | x` ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:02:06.137

您可以使用反向搜索（在 linux 上使用`grep`工具和`-v`或`--invert-match`参数）或 @mario在 PHP 中使用[preg_grep()建议。](http://www.php.net/manual/ro/function.preg-grep.php)

要回答您的问题，请使用此 RegEx：`^(?!.*?-\d+[xX]\d+)(.*)$` [解释演示](http://regex101.com/r/oD6wF6)

要匹配两者`x`，`X`您也可以使用`(x|X)`或仅`x`与不区分大小写的正则表达式修饰符**i**一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:50:54.783

为什么还要在这上面使用 PHP？使用 grep 的`-L`选项来查找与正则表达式不匹配的文件。

```
grep -L -- '-\d+x\d+' * 
```

您必须将正则表达式放在 a 之后，`--`以便 grep 不会认为该正则表达式是命令行选项。

# r - 使用 geom_bar 对不同 facet_grids 进行不同填充

> ID：15490115
> 
> 赞同：1
> 
> 时间：2013-03-19T01:44:30.353
> 
> 标签：r, ggplot2, fill

我是 ggplot2 的新手，我有一个找不到答案的问题。我创建了以下玩具数据来帮助解释：

```
data <- data.frame(tech=c(rep(letters[1:15],2)), 
     sep=c(rep(c("SitutationA", "SitutationB"),each=15)), 
     error=c(runif(15,min=-0.2, max=0.5), runif(15, min=0.3, max=1))) 
```

我想绘制一个`geom_bar`图表，显示每种技术“技术”（x 轴）的“错误”（y 轴），使用`facet_grid`. 每个条的颜色 ( `fill`) 应该代表每种技术的“错误”，而不是技术（作为一个因素）。情况 A 和 B 的误差以不同的尺度测量。但是，在我的代码中，相同值的错误在两种情况下都具有相同的颜色。我不想要这种行为，因为它们是用不同的尺度测量的。因此，我希望情况 A 和 B 中的颜色是独立的。

以下代码绘制图形，但在两种情况下使用相同的颜色。

```
ggplot(data, aes(x=tech, y=error)) +
  geom_bar(aes(fill=error), stat="identity", position="dodge") + 
  facet_grid(sep ~ ., scales="free_y") + 
  scale_fill_continuous(guide=FALSE) 
```

如何为每个方面（情况 A 和情况 B）使用不同的连续填充？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:02:14.393

在同一个图上不能有两个不同的填充比例。

该问题的解决方案可能是制作两个图，然后将它们与`grid.arrange()`from library放在一起`gridExtra`。

在第一个图中只放 的值`SitutationA`。更改了 y 比例以显示小数点后有两个数字的值（与第二个图相同）。删除了 x 轴标题、文本和刻度并更改了绘图边距 - 将底部边距设置为 -0.4 以减少绘图之间的空间。

```
library(grid)
library(gridExtra)
p1<-ggplot(subset(data,sep=="SitutationA"), aes(x=tech, y=error)) +
  geom_bar(aes(fill=error), stat="identity", position="dodge") + 
  facet_grid(sep ~ ., scales="free_y") + 
  scale_fill_continuous(guide=FALSE)+
  scale_y_continuous(breaks=c(0,0.25,0.50))+
  theme(axis.text.x=element_blank(),
        axis.title.x=element_blank(),
        axis.ticks.x=element_blank(),
        plot.margin=unit(c(1,1,-0.4,1),"lines")) 
```

对于第二个图 ( `SitutationB`)，将顶部图边距更改为 -0.4 以减少图之间的空间。然后更改`scale_fill_continuous()`并提供新颜色。

```
p2<-ggplot(subset(data,sep=="SitutationB"), aes(x=tech, y=error)) +
  geom_bar(aes(fill=error), stat="identity", position="dodge") + 
  facet_grid(sep ~ ., scales="free_y") + 
  scale_fill_continuous(guide=FALSE,low="red",high="purple") +
  theme(plot.margin=unit(c(-0.4,1,1,1),"lines")) 
```

现在把两个图放在一起。

```
grid.arrange(p1,p2) 
```

![在此处输入图像描述](../Images/116d846845f179936d07cf1e5cc21a03.png)

# database - Perl 循环遍历 Oracle 查询在第一个查询之后不会产生任何数据

> ID：15490117
> 
> 赞同：0
> 
> 时间：2013-03-19T01:44:49.693
> 
> 标签：database, oracle, perl

在下面的代码中，我有`@some_array`一个数组数组，其中包含名称等文本。所以

```
@some_array= ([sam, jon, july],[Mike, Han,Tommy],[angie, sita, lanny]); 
```

现在，当我像`sam jon july`first 和一样查询列表时`mike han tommy`。只有执行从第一个列表中返回结果，其他人是 undef。我不知道为什么会有任何帮助。

如果我将第二个切换到第一个并运行它，它将只显示第一个。所以问题是它返回第一个集合，但后续集合返回 undef。我确实启用了严格和警告，但它没有显示任何错误。

```
my $pointer;
my $db = $db->prepare_cached("
    begin
            :pointer := myFun(:A1);
    end;
            ") or die "Couldn't prepare stat: " . $db->errstr;
$db->bind_param_inout(":pointer", \$pointer, 0, { ora_type => ORA_RSET });

for (my $i = 0; $i < @some_array; $i++) {
    my @firstarray = @{$some_array[$i]};
    my $sql = lc(join(" ", @firstarray));
    print "<pre>$sql</pre>\n";
    $db->bind_param(":A1", $sql);
    $db->execute();
    print "<pre>".Dumper($db->execute())."</pre>\n";
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:19:00.290

我根本看不出这是如何工作的，因为`execute`返回的是“受影响的行数”，而不是准备好的语句的结果。您似乎还用 return from 覆盖了您的数据库句柄`prepare_cached`，这将破坏句柄并关闭连接。

您应该查看已绑定到接收存储过程调用结果的`$pointer`SQL 变量的变量。`:pointer`

# sql - 查询Access数据库的SQL字符串

> ID：15490118
> 
> 赞同：0
> 
> 时间：2013-03-19T01:44:59.107
> 
> 标签：sql, vb.net, ms-access, oledb

我在访问数据库上的 oledb 查询的命令行上遇到了一些问题。我已经尝试了许多不同的语法，无论是在访问中还是在我的代码中。与数据库的连接很好，当我尝试填充 da 或将其作为访问中的查询运行时出现错误。

```
SELECT * FROM MyTable WHERE MyColumn = 'This Text String'; 
```

当我在访问中运行它时，我得到一个数据类型不匹配。双引号产生相同的结果。我认为这是因为空格我尝试将文本字符串包装在方括号中：

```
SELECT * FROM MyTable WHERE MyColumn = [This Text String]; 
```

在 Access 中，这会提示“输入参数值”，将参数列为“此文本字符串”。

我也尝试过使用 Like 运算符：

```
SELECT * FROM MyTable WHERE MyColumn LIKE 'This Text String'; 
```

无论是单引号还是双引号，这都不会产生错误，但也不会产生任何结果。我试过 CONTAINS 这给了我一个语法错误。

在这一点上，我不知道还能尝试什么。我想要完成的是：

> 返回“MyTable”中“MyColumn”中的文本等于“This Text String”的所有行

有人能帮我吗？我觉得我忽略了一些东西，可能很明显。

* * *

编辑：啊...我不确定这是否是问题所在，但也许会有所帮助。

我刚刚意识到我试图过滤的列（MyColumn）不仅仅是访问中的纯文本，它实际上是在另一个表中查找列。

也许这就是问题所在，因为数据类型实际上不是文本，而是数字（因为它是一个列表）。好的...我该如何克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:07:06.727

您需要加入查找表

```
SELECT * FROM MyTable INNER JOIN Lookup l on MyColumn = l.key and l.value =  'This Text String'; 
```

# apache - 使用搜索引擎友好 URL 时 Joomla 中的自定义目录

> ID：15490120
> 
> 赞同：0
> 
> 时间：2013-03-19T01:45:05.300
> 
> 标签：apache, .htaccess, joomla

我正在使用 Joomla 2.5 附带的标准 .htaccess 文件。Joomla 安装在根目录中，我使用的是搜索引擎友好的 URL。

我可以在 .htaccess 文件的开头添加一些内容，以检查我在 url 中的自定义目录并允许正常访问而无需重写任何 url？

例如，如果我希望 customdir/ 作为包含所有自定义页面和脚本的目录，我会链接到类似[http://mysite.com/customdir/customscript.php](http://mysite.com/customdir/customscript.php)

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:00:11.320

*您可以尝试在标准Joomla* .htaccess 文件中添加这些行，在下面的 2 个注释行中：

```
## Begin - Custom redirects
RewriteCond %{REQUEST_URI} ^/customdir        [NC]
RewriteCond %{REQUEST_URI} !customscript\.php [NC]
RewriteRule .* /customdir/customscript.php    [L]
## End - Custom redirects 
```

静默地图：

`http://mysite.com/customdir/`或者

`http://mysite.com/customdir/anything/`

到：

`http://mysite.com/customdir/customscript.php`

对于永久和可见的重定向，将 [L] 替换为 [R=301,L]

# java - Spring Web Services 类未找到异常

> ID：15490123
> 
> 赞同：1
> 
> 时间：2013-03-19T01:45:35.447
> 
> 标签：java, spring, jsp, spring-ws, spring-tool-suite

我正在通过 springsource.org 在线阅读这个 Spring 教程。

[http://static.springsource.org/docs/Spring-MVC-step-by-step/part2.html](http://static.springsource.org/docs/Spring-MVC-step-by-step/part2.html)

在第 2 章的最后，它让您将 bean 添加到前缀和后缀`/WEB-INF/jsp/`以及`.jsp`响应中。

到目前为止的代码基本上应该在您转到 localhost:8080/springapp/ 时加载 index.jsp ，它将重定向到 localhost:8080/springapp/hello.htm ，它创建一个 HelloController 的实例，理论上应该将您发送到 /WEB -INF/jsp/hello.jsp。当我添加前缀/后缀 bean 并将所有引用更改为“hello”而不是完全路径的 jsp 文件时，我开始收到以下错误：

```
message Handler processing failed; nested exception is 
java.lang.NoClassDefFoundError: javax/servlet/jsp/jstl/fmt/LocalizationContext 
```

我已经尝试过多次查看样本并检查错字，但我仍然找不到问题。任何提示或指示？

index.jsp（在 webapp 的根目录中：

```
<%@ include file="/WEB-INF/jsp/include.jsp" %>

<%-- Redirected because we can't set the welcome page to a virtual URL. --%>
<c:redirect url="/hello.htm" /> 
```

HelloController.java（减去导入和包：

```
public class HelloController implements Controller {

protected final Log logger = LogFactory.getLog(getClass());

    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {

        String now = (new Date()).toString();
        logger.info("Returning hello view with " + now);

        return new ModelAndView("hello", "now", now);
    }
} 
```

我的 hello.jsp 文件：

```
<%@ include file="/WEB-INF/jsp/include.jsp" %>

<!DOCTYPE html>
<html>
    <head>
        <title>Hello :: Spring Application</title>
    </head>
    <body>
        <h1>Hello - Spring Application</h1>
        <p>Greetings, it is now <c:out value="${now}" /></p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:52:46.433

似乎您在这里缺少 JSTL jar。尝试下载它并将它放在你的类路径中，看看它是否有效：[我在哪里可以下载 JSTL jar](https://stackoverflow.com/questions/292914/where-can-i-download-jstl-jar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:52:30.090

类路径中似乎缺少某些必需的 jar。确保类路径上有servlet **-api-2.x.jar jsp-api-2.x.jar**和**jstl-1.x.jar**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T01:58:35.923

请确保该`jstl.jar`文件位于您的`WEB-INF/lib`文件夹中。

事实上，这是您链接的教程中所述的内容。我猜你错过了这一步：

> 我们将使用 JSP 标准标记库 (JSTL)，所以让我们首先将所需的 JSTL 文件复制到我们的“WEB-INF/lib”目录。将'spring-framework-2.5/lib/j2ee'目录中的jstl.jar和'spring-framework-2.5/lib/jakarta-taglibs'目录中的standard.jar复制到'springapp/war/WEB-INF/lib ' 目录。

# c - 当我输入“正弦”时，C计算器程序一直出错？

> ID：15490124
> 
> 赞同：4
> 
> 时间：2013-03-19T01:45:43.270
> 
> 标签：c

嗨，我是编程新手，并且已经在计算器上工作了一段时间。我正在尝试添加一些三角函数，但我遇到了正弦问题。其他函数可以工作（+、-、*、/），但是当我输入“正弦”时，它会跳到代码中它说它是一个不正确的函数的部分。请帮助我的代码。谢谢！

```
#include <stdio.h>
#include <math.h>

int main() 
{

    float firstnum, secondnum, angle, answer, pi;
    char function, sine;

    pi = atan(1.0)*4;

    printf("\nHello and welcome to my calculator!\n");

    while(1) 
    {      

        printf("\nPlease input the function you would like to use.  These include +, -, *, /, sine.\n");     
        scanf("%s", &function);   

        switch(function)
        {
            case '+': 
            printf("\nNow please input the two variables.\n");  
            scanf("%f", &firstnum);
            scanf("%f", &secondnum);
            answer = firstnum+secondnum;
            break;

            case '-': 
            printf("\nNow please input the two variables.\n");  
            scanf("%f", &firstnum);
            scanf("%f", &secondnum);
            answer = firstnum-secondnum;
            break;

            case '*': 
            printf("\nNow please input the two variables.\n");  
            scanf("%f", &firstnum);
            scanf("%f", &secondnum);
            answer = firstnum*secondnum;
            break;

            case '/': 
            printf("\nNow please input the two variables.\n");  
            scanf("%f", &firstnum);
            scanf("%f", &secondnum);
            answer = firstnum/secondnum;
            break;

            case 'sine':
            printf("\nPlease enter the angle.\n");
            scanf("%f", &angle);
            answer = sin(angle);
            break;

            default: printf("Sorry, that is an incorrect function.  The only available choices are +, -, *, /, sine.");
            break;
        }   

        printf("Your answer is %f \n", answer);  
        printf("\nWhen you are ready to quit, simply press Ctrl + C or just hit the X button in the top right.\n");
    } 

     return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T01:49:31.293

```
'sine' 
```

那是一个多字符文字。 `function`是单个字符。`switch`在语句中检查它的整数值。您可能永远无法使用与`sine`您尝试这样做的方式匹配的用户的单个字符。`char*`改为读取字符串 (a )。

从标准：

> C99 6.4.4.4p10：“包含多个字符（例如，'ab'）或包含不映射到单字节执行字符的字符或转义序列的整数字符常量的值是实现定义的。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T01:56:14.320

C 没有一流的字符串类型。这意味着您不能对字符串使用 switch 语句，您需要使用 strlcmp 等函数进行字符串比较。

根据您的目标（制作计算器或学习 C），明智的做法是切换到具有更高抽象级别的不同语言，或者从一本好的 C 教科书中的较低级别练习开始。

另外，请注意，在没有安全漏洞的 C 中正确处理字符串和用户输入比最初看起来要困难得多。如果您的目标是学习一门语言，那么学习 C++ 是一个更好的选择，因为您必须`std::string`处理比较并`iostreams`处理输入和输出。

# ruby-on-rails - 在控制器动作中使用“帮助”程序的规范方式是什么？

> ID：15490125
> 
> 赞同：0
> 
> 时间：2013-03-19T01:45:47.620
> 
> 标签：ruby-on-rails

我正在编写一个 Rails 应用程序，该应用程序从用户那里获取文本文件上传，对其进行操作并重新显示它。操作将在创建操作中进行。我有在另一个文件中操作它的程序。我不知道将这些东西连接在一起的正确模式是什么。

我的问题：

1.) 目录中应该存储这些帮助程序的什么位置？是否有某种方式应该从控制器中使用这些？

2.) 把这些东西放在后台作业中是个好主意，还是只是为了重复任务/访问不属于应用程序的服务？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:07:27.247

如果您只想在一个控制器中访问该功能，最好将其作为私有方法简单地放在该特定控制器中，例如：

private def myFunction // 操作文件结束

你也可以把它放在你的 application_controller.rb 中，在这种情况下，你的所有控制器都可以使用这个函数，作为一个受保护的方法。

不完全确定，但我不认为我会将它放在后台作业中，因为该函数仅在用户上传文件时调用。

# python - 如果 Python 生成器不再使用但尚未达到 StopIteration，它会被垃圾收集吗？

> ID：15490127
> 
> 赞同：22
> 
> 时间：2013-03-19T01:45:50.707
> 
> 标签：python, garbage-collection, generator, coroutine

当不再使用生成器时，它应该被垃圾收集，对吧？我尝试了以下代码，但我不确定我错了哪一部分。

```
import weakref
import gc

def countdown(n):
    while n:
        yield n
        n-=1

cd = countdown(10)
cdw = weakref.ref(cd)()
print cd.next()
gc.collect()
print cd.next()
gc.collect()
print cdw.next() 
```

在倒数第二行，我调用了垃圾收集器，因为不再调用`cd`。`gc`应该自由`cd`吧。但是当我调用时`cdw.next()`，它仍然在打印 8。我又尝试了几个`cdw.next()`，它可以成功打印所有剩余的，直到 StopIteration。

我尝试了这个，因为我想了解生成器和协程是如何工作的。在 David Beazley 的 PyCon 演示文稿“A Curious Course on Coroutines and Concurrency”的幻灯片 28 中，他说协程可能会无限期地运行，我们应该使用`.close()`它来关闭它。然后他说垃圾收集器会调用`.close()`。在我的理解中，一旦我们调用`.close()`了自己，`gc`就会`.close()`再次调用。会`gc`收到无法调用`.close()`已经关闭的协程的警告吗？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T01:50:56.707

由于 python 的动态特性，在`cd`到达当前例程的末尾之前不会释放对的引用，因为（至少）python 的 Cpython 实现不会“预读”。（如果你不知道你使用的是什么 python 实现，那几乎可以肯定是“Cpython”）。在一般情况下，如果一个对象仍然存在于当前命名空间中，那么解释器几乎不可能确定它是否应该是空闲的（例如，您仍然可以通过调用来访问它`locals()`）。

在一些不太一般的情况下，其他 python 实现可能能够在当前堆栈帧结束之前释放对象，但 Cpython 不会打扰。

试试这个代码，它表明生成器可以在 Cpython 中自由清理：

```
import weakref
def countdown(n):
    while n:
        yield n
        n-=1

def func():
    a = countdown(10)
    b = weakref.ref(a)
    print next(a)
    print next(a)
    return b

c = func()
print c() 
```

对象（包括生成器）在它们的引用计数达到 0 时被垃圾收集（在 Cpython 中——其他实现可能会以不同的方式工作）。在 Cpython 中，只有当你看到一个`del`语句，或者当一个对象因为当前命名空间改变而超出范围时，引用计数才会减少。

重要的是，一旦不再有对对象的引用，垃圾收集器就可以自由地清理它。实现如何确定没有更多引用的细节留给您正在使用的特定 python 发行版的实现者。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-19T01:53:14.123

在您的示例中，生成器在脚本结束之前不会收集垃圾。Python 不知道你是否会`cd`再次使用它，所以它不能把它扔掉。准确地说，在*全局命名空间*中仍然存在对您的生成器的*引用*。

 **当一个生成器的引用计数*降到零时，它就会被 GCed ，就像任何其他对象一样。即使发电机没有耗尽。

这可能在许多正常情况下发生 - 如果它位于超出范围的本地名称中，如果它被`del`ed，如果它的所有者被 GCed。但是如果任何活动对象（包括命名空间）持有对它的强引用，它就不会被 GCed。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-19T01:51:20.423

Python 垃圾收集器并不那么聪明。即使您`cd`在该行之后不再引用，该引用仍然存在于局部变量中，因此无法收集。（事实上​​，您使用的某些代码可能会在您的局部变量中挖掘并恢复它。不太可能，但有可能。因此 Python 无法做出任何假设。）

如果您想让垃圾收集器在此处实际执行某些操作，请尝试添加：

```
del cd 
```

这将删除局部变量，允许收集对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-07T04:55:26.387

其他答案已经解释说，`gc.collect()`不会垃圾收集仍然引用它的任何东西。仍然有`cd`对生成器的实时引用，因此在删除之前不会被 gc'ed `cd`。

但是，此外，OP 正在使用此行创建对对象的 SECOND 强引用，该行调用弱引用对象：

```
cdw = weakref.ref(cd)() 
```

因此，如果要`del cd`调用并调用`gc.collect()`，生成器*仍然*不会被 gc'ed，因为`cdw`它也是一个引用。

要获取实际的弱引用，请不要调用该`weakref.ref`对象。只需这样做：

```
cdw = weakref.ref(cd) 
```

现在，当`cd`被删除并被垃圾回收时，引用计数将为零，调用弱引用将导致`None`，正如预期的那样。*

# ruby-on-rails-3 - 使用 Flash 通知用户之前的注册

> ID：15490128
> 
> 赞同：1
> 
> 时间：2013-03-19T01:45:52.710
> 
> 标签：ruby-on-rails-3

我正在尝试使用我的用户控制器在他们的电子邮件已用于注册时通知用户，但即使电子邮件已经存在，我仍然收到错误“请验证您的输入并重试”，而不是“你已经注册了！谢谢你的热情！” 使用控制器不是实现此行为的创建方式吗？

在 Rails 控制台中（假设“foo@bar.com”在数据库中），当我使用它`user = User.new(name:"Example", email:"foo@bar.com")`时`User.find_by_email(user.email)`，它确实返回了正确的用户条目，所以我不确定我是否在正确的轨道上并且只是执行它不正确或什么。有什么想法吗？

users_controller.rb：

```
class UsersController < ApplicationController
  def new
    @user = User.new(params[:user])
  end

  def create
    @user = User.new(params[:user])

    if @user.save
      flash[:success] = "Thanks for supporting cofind! We'll be in touch!"
      redirect_to root_path
      UserMailer.welcome_email(@user).deliver
    else
      if @user.email == User.find_by_email(@user.email)
        flash[:error] = "You've already registered! Thanks for being enthusiastic!"
        redirect_to root_path
      else
        flash[:error] = "Plase validate your input and try again."
        redirect_to signup_path
      end
    end
  end 
end 
```

用户.rb：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name

  before_save { |user| user.email = email.downcase }

  validates :name, presence: true
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                    uniqueness: { case_sensitive: false }
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:57:09.857

这条线

```
if @user.email == User.find_by_email(@user.email) 
```

`ActiveRecord`根据始终为假的用户记录（对象）检查用户的电子邮件（字符串） 。你应该把它改成

```
if User.where(email: @user.email).exists? 
```

# for-loop - CMD 行读取文本文件并删除字符

> ID：15490133
> 
> 赞同：1
> 
> 时间：2013-03-19T01:46:10.230
> 
> 标签：for-loop, batch-file, cmd

作为另一个批处理脚本的一部分，我正在生成文本文件，其中每个文件都有一个数字列表，并且需要规范化字符数。它们有前导零，但显示如下：

008

009

0010 等

如何将文本文件的所有行读入命令行并输出到一个包含所有 3 个字符的文件（如果需要，通过去掉前导字符）？到目前为止，我有这个，但它没有输出第二个文本文件：

```
(FOR /F "tokens=*" %%Z IN (C:\Temp\NumberList.txt) DO @ECHO %%Z)
FOR /L %%Z in (1,1,%numFiles%) DO SET Z=%Z:~-3%) > C:\Temp\NumberList2.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:14:01.653

尝试这个：

```
@echo off
setlocal enabledelayedexpansion
for /f %%i in (C:\Temp\NumberList.txt) do (
    set "var=%%i"
    set "var=!var:~-3!"
    >>"C:\Temp\NumberList2.txt" echo.!var!
)
endlocal 
```

# python - 哲学家在 python 中用餐僵局

> ID：15490134
> 
> 赞同：0
> 
> 时间：2013-03-19T01:46:13.863
> 
> 标签：python

我正在实施哲学家用餐问题，但是我收到一个错误

```
 # Pick up the forks                                                 
            forks[self.left_fork].acquire()
            locked = forks[self.right_fork].acquire(False)
            if locked == True:
                break
            forks[self.left_fork].release()
            forks[self.left_fork], forks[self.right_fork] = forks[self.right_fo\
rk], forks[self.left_fork]

            # Put down the forks                                                
            forks[self.right_fork].release()
            forks[self.left_fork].release() 
```

它打印出

```
1 is eating
2 is eating
3 is eating 
```

然后给出该错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:37:59.133

查看您的代码，您似乎两次释放其中一个锁。首先，您获取 left_fork 锁：

```
forks[self.left_fork].acquire() 
```

后来发布它：

```
forks[self.left_fork].release() 
```

然后，您在 forks 列表中切换两个锁，因此释放的锁现在位于`fork[self.right_fork]`：

```
forks[self.left_fork], forks[self.right_fork] = forks[self.right_fork], forks[self.left_fork] 
```

睡眠后，您再次释放锁：

```
forks[self.right_fork].release()
forks[self.left_fork].release() 
```

这会导致错误。查看代码，大概第一个`release()`调用是不正确的。

大概目的是检查锁定尝试是否`right_fork`失败，然后释放`left_fork`，它应该看起来像这样：

```
# Pick up the forks                                                 
forks[self.left_fork].acquire()
locked = forks[self.right_fork].acquire(False)
if not locked:
    forks[self.left_fork].release()
    break 
```

# rubygems - 需要从 Fork 捆绑 gem，我该如何为 Rails 3.2 做呢？

> ID：15490135
> 
> 赞同：0
> 
> 时间：2013-03-19T01:46:16.237
> 
> 标签：rubygems, ruby-on-rails-3.2, bundler

我一直在关注 Bundler [Guides](http://gembundler.com/v1.2/git.html)以便从 Fork 中捆绑 Gem；这样做的原因是，fork 已经提交到 master 允许与 Ruby 1.9.x 兼容

到目前为止，我的**Gemfile**上有这个：（按照简短指南中的语法）

```
gem 'yelp', github: "brenttheisen/yelp" 
```

不幸的是，像这样捆绑的结果是：

```
Could not find gem 'yelp (>= 0) ruby' in git://github.com/brenttheisen/yelp.git (at master).
Source does not contain any versions of 'yelp (>= 0) ruby' 
```

你们能指出我正确的方向来完成我需要的吗？

PS。我当然尝试过这个网站的一些答案，但到目前为止我还没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:08:03.533

幸运的是，我刚刚通过遵循 Bundler Guides 中的另一个项目解决了这个问题：更准确地说：

> 如果 git 存储库的根目录中没有 .gemspec，则必须指定捆绑程序在解析依赖项时应使用的版本

因此，我将这一行放在我的 Gemfile 中：

> 宝石'yelp'，“1.0”，git：“git://github.com/brenttheisen/yelp.git”

它捆绑正确！

# c++ - getline() 从数组中省略我的输出的第一个字母。

> ID：15490138
> 
> 赞同：0
> 
> 时间：2013-03-19T01:46:52.270
> 
> 标签：c++, c, arrays, cstring

我正在为学校编写一个简单的 Mad Libs 程序。我发布的代码遍历一个数组以搜索某些提示。一旦找到，它就会使用提示提出问题并记录答案。然而，包含我的答案的数组省略了每个单词的第一个字母，除了第一个变量。这是我的代码和数组输出的副本。我知道这很糟糕，但我正在学习。

```
char buffer[256];
int y = 0;
//iterates through array looking for answers
for(int i = 0;i <= 256;i++)
{
    if(storyArray[i][0] == '<' && isalpha(storyArray[i][1]))
    {
        for(int x = 0; storyArray[i][x]; x++)
        {
            switch(storyArray[i][x]){
                case '<':
                    cout << "\t";
                    x++;
                    putchar(toupper(storyArray[i][x]));
                    break;
                case '>':
                    cout << ": ";
                        cin.ignore();
                    cin.getline(buffer,256);
                    strcpy(answerArray[y],buffer);
                    y++;
                    break;
                case '_':
                    cout << " ";
                    break;
                default:
                    cout << storyArray[i][x];
                    break;

            }
        }
    }
} 
```

输出：Arrayitem1 rayitem2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:56:56.723

你*告诉*它错过第一个字符。这就是这样做的：

```
cin.ignore(); 
```

把它拿出来，你会没事的。

# ios - 自动布局错误

> ID：15490140
> 
> 赞同：26
> 
> 时间：2013-03-19T01:47:04.177
> 
> 标签：ios, objective-c, uibutton, autolayout

[我和这张海报](https://stackoverflow.com/questions/13368197/cant-do-custom-uibutton-in-ios6-with-enabled-storyboard-autolayout)有类似的问题。我使用 jrturton 的建议将自定义按钮的代码移动到`viewDidLayoutSubviews`. 在我收到此错误之前，它运行良好：

> 'NSInternalInconsistencyException'，原因：'将 -viewDidLayoutSubviews 发送到视图控制器后仍然需要自动布局。ViewController 的实现需要将 -layoutSubviews 发送到视图以调用自动布局。

我对图形一无所知，我唯一能想到的就是放置`[self.view layoutSubviews];`，但这并没有解决任何问题。当我在我的情节提要中取消选中“自动布局”时它起作用了，但这改变了我的按钮的尺寸，我想知道是否有另一种方法来修复它？

代码：

```
-(void)viewDidLayoutSubviews {
    NSArray *arrayOfButtons = [NSArray arrayWithObjects:self.decimalButton, self.buttonOne, self.buttonTwo, self.buttonThree, nil];

    for (UIButton *button in arrayOfButtons) {

        [button setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
        [button setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted];

        button.layer.borderWidth = 0.25f;
        button.layer.borderColor = [[UIColor grayColor] CGColor];

        CAGradientLayer *btnGradient = [CAGradientLayer layer];
        btnGradient.frame = button.bounds;
        btnGradient.colors = [NSArray arrayWithObjects:
                              (id)[[UIColor colorWithRed:122.0f / 255.0f green:188.0f / 255.0f blue:255.0f / 255.0f alpha:1.0f] CGColor],
                              (id)[[UIColor colorWithRed:96.0f / 255.0f green:171.0f / 255.0f blue:248.0f / 255.0f alpha:1.0f] CGColor],
                              nil];
        [button.layer insertSublayer:btnGradient atIndex:0];
    }
} 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-07-02T07:28:13.163

我最近遇到了这个问题，当我想通过提供`viewDidLayoutSubviews`消息处理程序以编程方式调整情节提要创建的视图的框架时。按照异常消息的说明，我尝试`[self.view layoutIfNeeded]`在末尾添加`-viewDidLayoutSubviews`，然后它起作用了。

# python - cx_freeze 安装程序在我身上反复失败

> ID：15490142
> 
> 赞同：1
> 
> 时间：2013-03-19T01:47:22.910
> 
> 标签：python, python-3.x, cx-freeze

我想编译我的一个较小的项目，所以我继续从官方网站下载了 cx_freeze。我运行了安装程序，并告诉它我想为所有用户安装，并且安装在本地硬盘上。然后我在安装程序中编辑了路径以转到我的 C:\Python33\ 文件夹。但是，当我运行安装程序时，出现一条错误消息，显示文本

```
There is a problem with the installer package. 
One or more programs required for the install could not be run 
```

考虑到我不能使用 py2exe（我在 python3.3 上），我真的需要 cx_freeze

你们中有人对此有任何指示吗？我不知道如何在 Windows 上从源代码构建它，所以我有点希望你们知道安装程序在哪里出错。

谢谢， pipsqueaker117

# html - 有什么方法可以让 iFrame 在不点击的情况下工作？

> ID：15490144
> 
> 赞同：-1
> 
> 时间：2013-03-19T01:47:30.980
> 
> 标签：html, iframe

我正在使用 iFrame 加载其 url 在文本框中指定的页面。这是我的代码：

```
<iframe id="import_url_iframe">

</iframe> 
```

我使用 jQuery 更改事件来获取文本框中 url 的更改：

```
 $("#wiki_form_url").change(function(){

        var value = $(this).val();
        $("#import_url_iframe").attr("src", value);

    }); 
```

如果我在文本框中指定 url 后单击外部，这工作正常。但是，我需要这样做，所以当我在文本框中编写 url 时，它应该在 iFrame 中显示页面（没有任何外部点击）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T01:50:11.033

使用 keydown 事件，可能有延迟，以便它在延迟后加载（即当用户没有输入 X 秒时）。所以：

```
var timeout = null;
$("#wiki_form_url").on('keydown', function(){
    timeout = setTimeout(function(){
        // load URL here
    }, 1000);
}); 
```

并实施@JCOC611 的建议，从[这里](https://stackoverflow.com/questions/5631589/detect-enter-key-is-pressed-with-jquery)获取代码，添加以下代码：

```
$("#wiki_form_url").on('keydown', function (e){
    if(e.keyCode == 13){
        timeout = null;
        // Load URL here
    }
})' 
```

您可以更进一步，并在文本框失去焦点时添加处理程序

```
$("#wiki_form_url").on('focusout', function (){
    timeout = null;
    // Load URL here
})' 
```

# javascript - angular-ui/bootstrap：测试使用对话框的控制器

> ID：15490150
> 
> 赞同：2
> 
> 时间：2013-03-19T01:47:59.870
> 
> 标签：javascript, testing, angularjs, jasmine, angular-ui

我有一个控制器，它使用来自 angular-ui/bootstrap 的对话框：

```
 function ClientFeatureController($dialog, $scope, ClientFeature, Country, FeatureService) {

        //Get list of client features for selected client (that is set in ClientController)
        $scope.clientFeatures = ClientFeature.query({clientId: $scope.selected.client.id}, function () {
            console.log('getting clientfeatures for clientid: ' + $scope.selected.client.id);
            console.log($scope.clientFeatures);
        });

        //Selected ClientFeature
        $scope.selectedClientFeature = {};

        /**
         * Edit selected clientFeature.
         * @param clientFeature
         */
        $scope.editClientFeature = function (clientFeature) {
            //set selectedClientFeature for data binding
            $scope.selectedClientFeature = clientFeature;

            var dialogOpts = {
                templateUrl: 'partials/clients/dialogs/clientfeature-edit.html',
                controller: 'EditClientFeatureController',
                resolve: {selectedClientFeature: function () {
                    return clientFeature;
                } }
            };
            //open dialog box
            $dialog.dialog(dialogOpts).open().then(function (result) {
                if (result) {
                    $scope.selectedClientFeature = result;
                    $scope.selectedClientFeature.$save({clientId: $scope.selectedClientFeature.client.id}, function (data, headers) {
                        console.log('saved.');
                    }, null);
                }
            });
        };
    }); 
```

我对测试几乎是全新的，并认为也许我需要测试两件事：

1.  调用 $scope.editClientFeature() 时会打开一个对话框
2.  关闭对话框后成功调用 $save 并返回“结果”

我真正搞砸的测试现在看起来像这样：

```
describe('ClientFeatureController', function () {
    var scope, $dialog, provider;

    beforeEach(function () {
            inject(function ($controller, $httpBackend, $rootScope, _$dialog_) {
            scope = $rootScope;
            $dialog = _$dialog_;

            //mock client
            scope.selected = {};
            scope.selected.client = {
                id: 23805
            };

            $httpBackend.whenGET('http://localhost:3001/client/' + scope.selected.client.id + '/clientfeatures').respond(mockClientFeatures);
            $controller('ClientFeatureController', {$scope: scope});
            $httpBackend.flush();
        });
    });

    it('should inject dialog service from angular-ui-bootstrap module', function () {
        expect($dialog).toBeDefined();
        console.log($dialog); //{}
    });

    var dialog;

    var createDialog = function (opts) {
        dialog = $dialog.dialog(opts);
    };

    describe('when editing a clientfeature', function () {
        createDialog({});
        console.log(dialog); //undefined
//        var res;
//        var d;
//        beforeEach(function () {
//            var dialogOpts = {
//                template: '<div>dummy template</div>'
//            };
//            console.log(dialog);
//            d = $dialog.dialog(dialogOpts);
//            d.open();
//        });
//
//        it('should open a dialog when editing a client feature', function () {
//            expect(d.isOpen()).toBe(true);
//        });
    });

}); 
```

现在最直接的问题是我无法创建/打开对话框。我收到以下错误：

```
Chrome 25.0 (Mac) ClientFeatureController when editing a clientfeature encountered a declaration exception FAILED
    TypeError: Cannot call method 'dialog' of undefined 
```

如果有人已经为类似的用例编写了测试并且可以为我提供一个示例，那就太好了，因为我很迷茫。

谢谢，肖恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T16:44:31.610

直到现在，我一直在为同样的问题苦苦挣扎，在浏览了 github repo 之后，我找到了对话测试并将其用作起点：

```
var $dialog,$scope,$httpBackend;
  beforeEach(module('ui.bootstrap.dialog'));
  beforeEach(function(){
    inject(function (_$dialog_, _$httpBackend_, $controller){
      $dialog = _$dialog_;
      $httpBackend = _$httpBackend_;
      $httpBackend.expectGET('/appServer/list')
        .respond([{
            id:1,
            name:'test1'
          },
          {
            id:2,
            name:'test2'
          },
          {
            id:3,
            name:'test3'
          }]);

      //setup controller scope
      scope = {};
      ServerCtrl = $controller('ServerCtrl', {
        $scope: scope,
        $dialog:$dialog
      });
    });
  }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T10:06:33.207

我也更喜欢适当的模拟。当它不可用时，我修补服务

要对此进行测试：

```
$dialog.messageBox(title, msg, btns)
   .open()
   .then(function (result) {
       if (result == 'ok') {
            // block executed if user click OK
       }
}); 
```

您可以像这样修补 $dialog：

```
$dialog.messageBox = function (title, msg, btns) {
    return {
        open: function () {
            return {
                 then: function (callback) {
                      callback('ok'); // 'ok' will be set to param result
                 }
             }
        }
    }
 }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T02:59:09.067

我个人尝试模拟所有服务。如果 ui-bootstrap 项目不提供 $dialog 模拟，您应该在那里打开一个错误票并要求他们提供一个。然而，创建一个同样容易。

模拟服务应该有虚假的方法，除了返回承诺之外什么都不做。它还应该为您提供一种刷新所有异步方法的方法，以便更轻松地进行同步测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-16T14:08:02.577

我发现编写我自己的对话模拟是最清楚的。这是一个模拟对话框以模拟选择“是”的示例。

### 被测代码

```
.controller('AdminListingCtrl', function AdminListingController($scope, $dialog, houseRepository) {
    $scope.houses = houseRepository.query();
    $scope.remove = function (house) {
        var dlg = $dialog.messageBox('Delete house', 'Are you sure?', [
            {label: 'Yep', result: 'yes'},
            {label: 'Nope', result: 'no'}
        ]);
        dlg.open().then(function (result) {
            if (result == 'yes') {
                houseRepository.remove(house.id);
                $scope.houses = houseRepository.query();
            }
        });
    };
} 
```

### 测试

```
 describe('when deleting a house', function () {

        var fakeDialog = {
            open: function()
            {
                return {
                    then: function(callback) {
                        callback("yes");
                    }
                };
            }
        };

        beforeEach(inject(function($dialog) {
            spyOn($dialog, 'messageBox').andReturn(fakeDialog);
        }));

        it('should call the remove method on the houseRepository', function () {
            scope.remove({id: 99});
            expect(houseRepository.remove).toHaveBeenCalledWith(99);
        });

        // etc
    }); 
```

# c++ - 使用 cmd 运行 C++ 程序

> ID：15490152
> 
> 赞同：0
> 
> 时间：2013-03-19T01:48:03.867
> 
> 标签：c++, command-line, cmd

当我通过命令行运行一个程序时，一旦程序结束，cmd会立即关闭，所以我看不到输出。有没有办法阻止这种情况发生，这样我才能真正验证输出？

```
#include<iostream>
using namespace std;
class Exercises {
public: 
    void sayHello(int x) {
        for (int i = 0; i < x; i++)
            cout << "Hello!!" << endl;
    }
}exercise;

int main() {
    exercise.sayHello(4);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T01:54:09.953

你也可以使用 cin.get();

它将等待您按 Enter 键或直到您关闭程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T01:53:32.630

以下方法可以帮助保持命令窗口，直到提供另一个输入。

```
#include <conio.h>
void main(){

// your program here

 getch();
} 
```

另一种方法是 `system("pause");`在程序结束时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:53:00.190

您可以通过以下方式暂停程序的执行一段时间：

```
sleep(5); // sleep for 5 seconds 
```

你可以把它放在程序的末尾之前`return 0;`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T01:53:42.760

如果您不介意在程序结束时等待按键，您可以放入一些东西。

Windows 中最简单的方法是：

```
system("pause"); 
```

但是，如果您要发布软件，请不要这样做。您可以`pause`很容易地实现命令的行为。

```
std::cout << "Press any key to continue . . . " << std::flush;
while( !_kbhit() ) Sleep(25);
getch(); 
```

那是使用来自`conio.h`.

但是，我担心`cmd`外壳本身会关闭。当您说“使用 cmd 运行”时，您实际上是在运行一个 shell，然后输入您的程序名称并按 Enter 键吗？如果这关闭了外壳，那么就有问题了。更有可能的是，您通过在资源管理器中双击文件来运行它，对吧？

# ruby-on-rails - 在生产中监控 ruby 后台进程（如 Resque）的正确方法

> ID：15490154
> 
> 赞同：0
> 
> 时间：2013-03-19T01:48:27.090
> 
> 标签：ruby-on-rails, centos, capistrano, god

我已经为此苦苦挣扎了一段时间，启动 resque 和 resque 调度程序等后台进程的正确方法是什么？使用上帝是不是矫枉过正？

目前我正试图让上帝工作，但我不确定 *.god conf 文件是否应该在应用程序的目录或其他地方。

这就是我使用的：

```
config
 |- app.god
 |- God
   |- resque.god
   |- resque_scheduler.god 
```

* * *

```
# config/god/resque.god
rails_env   = ENV['RAILS_ENV']  || raise(ArgumentError, "RAILS_ENV not defined")
rails_root  = ENV['RAILS_ROOT'] || File.expand_path(File.join(File.dirname(__FILE__), '..', '..'))
num_workers = rails_env == 'production' ? 5 : 2

num_workers.times do |num|
  God.watch do |w|
    w.dir      = "#{rails_root}"
    w.name     = "resque-#{num}"
    w.group    = 'resque'
    w.interval = 30.seconds
    w.env      = {"QUEUE"=>"*", "RAILS_ENV"=>rails_env, "BUNDLE_GEMFILE"=>"#{rails_root}/Gemfile"}
    w.start    = "/usr/bin/rake -f #{rails_root}/Rakefile environment resque:work"
    w.log      = "#{rails_root}/log/resque-scheduler.log"

    ... start/stop methods  ...
  end
end 
```

* * *

有一个 root 用户和一个 MyApp 用户。MyApp 用户有一个应用程序位于：`/home/myapp/apps/myapp_production/current`

我使用的 God capistrano 食谱是：

```
# config/deploy.rb
after "deploy:restart", "god:restart"

namespace :god do
  def try_killing_resque_workers
    run "pkill -3 -f resque"
  rescue
    nil
  end

  desc "Restart God gracefully"
  task "restart", :roles => :app do
    god_config_path = File.join(release_path, 'config', 'app.god')
    begin
      # Throws an exception if god is not running.
      run "cd #{release_path}; bundle exec god status && RAILS_ENV=#{rails_env} RAILS_ROOT=#{release_path} bundle exec god load #{god_config_path} && bundle exec god start resque"

      # Kill resque processes and have god restart them with the newly loaded config.
      try_killing_resque_workers
    rescue => ex
      # god is dead, workers should be as well, but who knows.
      try_killing_resque_workers

      # Start god.
      run "cd #{release_path}; RAILS_ENV=#{rails_env} bundle exec god -c #{god_config_path}"
    end
  end
end 
```

当我部署时，我得到**“服务器不可用（或者您没有访问它的权限）”**

奇怪的是，当我什至以 root 身份登录并运行`god status`它时，它什么也不返回，但如果我运行`god --version`它，它会返回版本。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:09:34.497

您是否设置了 init.d 脚本？你有上帝在运行吗？

```
/etc/init.d/god status 
```

您可以尝试手动启动它

```
/usr/bin/god -c /etc/god/conf.god -D 
```

并检查日志

# build - 使用我的重新定义隐式规则使其不起作用

> ID：15490158
> 
> 赞同：0
> 
> 时间：2013-03-19T01:48:39.637
> 
> 标签：build, makefile

我想将源代码和目标代码分开到不同的目录。

以下是我的目录树：

```
.
|-- bsp
|   |-- Makefile
|   `-- x86
|       |-- begin.s
|       |-- dummy.s
|       |-- helloos.s
|       |-- lowlevel_init.s
|       `-- Makefile
|-- buildrules
|   |-- builder.rules
|   |-- linker.rules
|   `-- subdir.rules
|-- configure
|   `-- helloos.lds
|-- hypervisor
|   |-- font.c
|   |-- int.c
|   |-- int_entry.s
|   |-- Makefile
|   |-- mouse.c
|   `-- start.c
|-- include
|   |-- common.h
|   `-- font.h
|-- lib
|   |-- lib.s
|   `-- Makefile
|-- Makefile
`-- README.md 
```

我想在根（TOP）目录上创建一个“obj”子目录。将所有obj文件放入其中。

如下所示：

.

```
|-- bsp
|   |-- Makefile
|   `-- x86
|       |-- begin.s
|       |-- dummy.s
|       |-- helloos.s
|       |-- lowlevel_init.s
|       `-- Makefile
|-- buildrules
|   |-- builder.rules
|   |-- linker.rules
|   `-- subdir.rules
|-- configure
|   `-- helloos.lds
|-- hypervisor
|   |-- font.c
|   |-- int.c
|   |-- int_entry.s
|   |-- Makefile
|   |-- mouse.c
|   `-- start.c
|-- include
|   |-- common.h
|   `-- font.h
|-- lib
|   |-- lib.s
|   `-- Makefile
|-- Makefile
|-- obj
|   |-- begin.o
|   |-- dummy.o
|   |-- font.o
|   |-- helloos.o
|   |-- int_entry.o
|   |-- int.o
|   |-- lib.o
|   |-- lowlevel_init.o
|   |-- mouse.o
|   `-- start.o
`-- README.md 
```

然后，这是我的实现：

```
%.o: %.c
    $(CC) $(CFLAGS) -c -o $(OBJDIR)/$@ $<

%.o: %.s
    $(AS) $(ASFLAGS) -o $(OBJDIR)/$@ $< 
```

但我不喜欢这种实现。

我想这样写：

```
 $(OBJDIR)/%.o: %.c
        $(CC) $(CFLAGS) -c -o $@ $<

    $(OBJDIR)/%.o: %.s
        $(AS) $(ASFLAGS) -o $@ $< 
```

如果我这样做，请不要遵循这些规则，但它使用隐含规则。

谢谢你的帮助！！！！！！！！！！！！！！！

欢迎任何不解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:40:41.517

如果您使用，您的隐含规则将起作用`VPATH`

```
VPATH = bsp hypervisor lib

$(OBJDIR)/%.o: %.c
    $(CC) $(CFLAGS) -c -o $@ $< 
```

[http://www.gnu.org/software/make/manual/make.html](http://www.gnu.org/software/make/manual/make.html)：

> make 变量 VPATH 的值指定了 make 应该搜索的目录列表。
> 
> 例如，

```
 VPATH = src:../headers 
```

> 指定包含两个目录（src 和 ../headers）的路径，它们按该顺序进行搜索。
> 
> 使用此 VPATH 值，遵循以下规则，

```
foo.o : foo.c 
```

> 被解释为好像是这样写的：

```
foo.o : src/foo.c 
```

# ios - NSOutputStream 不能关闭？

> ID：15490159
> 
> 赞同：0
> 
> 时间：2013-03-19T01:48:40.847
> 
> 标签：ios, objective-c, networking

这是问题所在。当我的应用程序启动时，我在端口 5000 连接到 server1。我将数据发送到 server1。Server1 发回数据。Server1 关闭连接。inputStream 发生 NSStreamEventEndEncountered 事件。然后我在端口 5001 连接到 server2。我尝试将数据发送到 server2，但数据最终会发送到 server1。不知何故，输入流连接在端口 5001，而我的输出流连接在 5000。我做错了什么？

```
- (void) initNetworkCommunication: (uint32_t)port {
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"localhost", port, &readStream, &writeStream);
    inputStream = (NSInputStream *)readStream;
    outputStream = (NSOutputStream *)writeStream;
    [inputStream setDelegate:self];
    [outputStream setDelegate:self];
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [inputStream open];
    [outputStream open];
}

- (void) onClientConnectionLost {
    if (atServer1 == YES) {
        atServer1 = NO;
        [self initNetworkCommunication: 5001];
    }
    if (atServer1 == NO) {
        atServer1 = YES;
        [self initNetworkCommunication: 5000];
    }
}

- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {
    switch (streamEvent) {
        case NSStreamEventOpenCompleted:
            NSLog(@"Stream opened");
            break;
        case NSStreamEventHasBytesAvailable:            
            if (theStream == inputStream) {
                //handle packets...             
            }
            break;
        case NSStreamEventErrorOccurred:
            NSLog(@"Can not connect to the host!");
            break;
        case NSStreamEventEndEncountered:
            if (theStream == inputStream) {
                [theStream close];
                [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
                [theStream release];
                theStream = nil;

                [outputStream close];
                [outputStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
                [outputStream release];
                outputStream = nil;

                [self onClientConnectionLost];            
            }
            break;
        default:
            NSLog(@"Unknown event");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:18:10.677

```
- (void) onClientConnectionLost {
if (atServer1 == YES) {
    atServer1 = NO;
    [self initNetworkCommunication: 5001];
}
else if (atServer1 == NO) {
    atServer1 = YES;
    [self initNetworkCommunication: 5000];
} 
```

}

在您的旧代码上...当 atServer1 = YES 时，它将执行第一个 if 语句...将 atServer1 设置为 NO...所以第二个 if 语句为 TRUE.. 所以它也会执行那个..

# solr - XML 响应不包含围绕我搜索的单词的文本

> ID：15490161
> 
> 赞同：0
> 
> 时间：2013-03-19T01:48:47.240
> 
> 标签：solr

我在 solr 中索引了一个 pdf，当我查询一个名为 BOEHRINGER 的文本时，我的 xml 响应如下

```
<response>
  <lst name="responseHeader">
     <int name="status">0</int>
     <int name="QTime">1</int>
     <lst name="params">
        <str name="q">text:BOEHRINGER</str>
     </lst>
  </lst>
 <result name="response" numFound="1" start="0">
     <doc>
        <str name="author">cjessen</str>
        <arr name="content_type">
             <str>application/pdf</str>
        </arr>
        <str name="id">2</str>
        <date name="last_modified">2012-05-07T17:09:32Z</date>
     </doc>
 </result>
 </response> 
```

如何获取要返回的内容以及作为 XML 响应一部分的文件名？应该将什么字段添加到 schema.xml 以便我可以查看 pdf 中围绕我搜索的单词的文本，该单词是 XMl 响应的 BOEHRINGER 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:50:27.470

检查[字段映射](http://docs.lucidworks.com/display/solr/Uploading+Data+with+Solr+Cell+using+Apache+Tika)属性。

文件的内容通常映射到文本字段，默认情况下不存储。
检查[ExtractingRequestHandler](http://wiki.apache.org/solr/ExtractingRequestHandler)，默认是`fmap.content=text`可以覆盖的文件内容。
如果您只想检查突出显示查询的内容，可以使用 solr 的[突出显示](http://wiki.apache.org/solr/HighlightingParameters)功能。

对于文档的标题，您需要在索引文档时传递标题，或者应该有一个由 Tika 提供的内置文件名字段作为您可以使用的元数据字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:12:07.837

```
 <!-- Solr Cell Update Request Handler

   http://wiki.apache.org/solr/ExtractingRequestHandler 

    -->
 <requestHandler name="/update/extract" 
               startup="lazy"
               class="solr.extraction.ExtractingRequestHandler" >
     <lst name="defaults">
  <!-- All the main content goes into "text"... if you need to return
       the extracted text or do highlighting, use a stored field. -->
          <str name="fmap.content">text</str>
          <str name="lowernames">true</str>
          <str name="uprefix">ignored_</str>

  <!-- capture link hrefs but ignore div attributes -->
        <str name="captureAttr">true</str>
        <str name="fmap.a">links</str>
        <str name="fmap.div">ignored_</str>
     </lst>
  </requestHandler> 
```

这是我的 solrconfig.xml 文件。schema.xml 文件中的所有字段都已编入索引并存储 =true。我仍在尝试获取我的回复的文本部分，然后是它周围的单词。如果搜索了 sanjay，那么我希望我的部分回复是“Sanjay 身高 6 英尺”，以及“sanjay 是个好孩子”。假设这两个句子都存在于被索引的文件中。

```
 <fieldtype name="text" class="solr.TextField" positionIncrementGap="100">
    <analyzer type="index">
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
                    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1"
                            generateNumberParts="1" catenateWords="1"
                            catenateNumbers="1" catenateAll="0"/>
                    <filter class="solr.LowerCaseFilterFactory"/>
                    <filter class="solr.EnglishPorterFilterFactory"
                             protected="protwords.txt"/>
                    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
     </analyzer>
     <analyzer type="query">
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
                    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt"
                            ignoreCase="true" expand="true"/>
                    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
                    <filter class="solr.WordDelimiterFilterFactory" enerateWordParts="1"
                             generateNumberParts="1" catenateWords="0"
                            catenateNumbers="0" catenateAll="0"/>
                    <filter class="solr.LowerCaseFilterFactory"/>
                    <filter class="solr.EnglishPorterFilterFactory"        protected="protwords.txt"/>
                    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
    </analyzer>
</fieldtype>

  And the field is  <field name="text" type="text_general" indexed="true" stored="true"      multiValued="true"/> 
```

# backbone.js - 更新全局变量变化的主干模型？

> ID：15490162
> 
> 赞同：2
> 
> 时间：2013-03-19T01:48:50.277
> 
> 标签：backbone.js, geolocation, backbone-events

我有一个场地对象集合，它们都有自己的纬度/经度属性，使用这个和用户位置我可以计算用户和每个场地之间的距离。

我的问题是，我不能只在创建 Venue 对象时执行此操作，因此需要在更新位置变量时触发此计算，无论是通过观察位置变量还是触发函数，我都没有取得太大成功任何一种方法。

```
window.App = {};

// Venue Object
App.Venue = Backbone.Model.extend({
  urlRoot: '/rest/venue',
  defaults: {
    distance: ''
  },
  initialize: function(){
    console.log(App.position);
    this.set('distance', getDistance(App.position.coords.latitude, App.position.coords.longitude, this.get('latitude'), this.get('longitude')));
  },
  events: {
    // Doesn't seem to work
    App.position.on('change', function() { console.log('change event'); })
  },
  updateDistance: function() {
    console.log('updateDistance');
  }
});

// Venues Collection Object
App.Venues = Backbone.Collection.extend({
  url: '/rest/venues',
  model: App.Venue,
  comparator: function(venue) {
    return venue.get('name');
  }
});

$(document).ready(function(){

  // Setup Model
  App.venues = new App.Venues();

  App.venues.fetch();

  navigator.geolocation.watchPosition(gotPosition);

  function gotPosition(position) {
    console.log(position);
    App.position = position;
    // Somehow trigger updateDistance function on all model objects?
  }
}); 
```

这里的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T06:45:38.887

有两种处理方法。

### Position 是一个 Backbone.Model

如果您的位置是骨干模型而不是简单变量，那么您可以执行以下操作：

```
// Give the position to each venue    
App.venues = new App.Venues({position: position}); //doesn't matter if the position variable is just empty right now. 
```

在您的 App.Venue 模型初始化方法中：

```
App.Venue = Backbone.Model.extend({
...
initialize: function(options) {
   this.position = options.position //save the reference
   this.listenTo(this.position, "change", positionChanged) //now your venue model is watching this position object. any change and positionChanged method will be called
},

positionChanged: function (model) {
// position updated

} 
```

### 全球事件聚合器

因此，如果由于某种原因您没有作为 Backbone 模型的位置，那么您可以通过扩展 Backbone.Events 模块来设置自己的事件聚合器：

```
App.vent = _.extend({}, Backbone.Events); 
```

每当位置更新时，您都会触发一个事件：

```
function gotPosition(position) {
    console.log(position);
    App.position = position;
    App.vent.trigger("position:updated") // you could name this event anything.
 } 
```

在您的场地模型中，您可以收听事件：

```
App.Venue = Backbone.Model.extend({
    ...
    initialize: function(options) {
        App.vent.on("position:updated", this.positionChanged)
    }, 
```

我更喜欢第一种方法！

# tabs - 将值附加到 Rickshaw Graph Axis 以及 ticksTreatment 和 Preserve

> ID：15490167
> 
> 赞同：5
> 
> 时间：2013-03-19T01:49:29.353
> 
> 标签：tabs, d3.js, preserve, rickshaw

这是我在这里的第一个问题，所以请放轻松:)

我正在尝试使用人力车图、d3 和 jquery UI 来实现一些折线图。我有一些垂直选项卡，并成功地让图表从外部 html 文件加载。

有一些关于 Rickshaw 的文档，但我找不到我的具体目标，所以如果可以的话，我会问这个社区几个问题？

首先，当从外部 html 文件加载 jquery UI 中的选项卡时，我应该将所有 javascript 和 css 放入嵌入的页面（见下文history.html）或父页面中？我都试过了，他们似乎工作我只是想知道最佳实践。

```
<ul>
    <li><a href="#tabs-1"><div id="live-icon"></div>LIVE GRAPHS</a></li>
    <li><a href="historic.html"><div id="historic-icon"></div>HISTORIC DATA</a></li> 
```

其次，图表上的 x 轴以毫秒为单位。我想将“ms”附加到每个 x 轴“刻度”的末尾。所以 x 轴会读取 50 毫秒、100 毫秒、150 毫秒等……可以这样做吗？

最后，在 Rickshaw 中，他们有一个带有所有花里胡哨的扇形示例 ( [http://code.shutterstock.com/rickshaw/examples/extensions.html )。](http://code.shutterstock.com/rickshaw/examples/extensions.html)它有两个属性，我找不到任何信息。坚持：真的吗？另一个例子有tickFormat 和tickTreatment？有人可以解释一下这些是做什么的。

```
var graph = new Rickshaw.Graph( {
element: document.getElementById("chart"),
width: 900,
height: 500,
renderer: 'area',
stroke: true,
preserve: true, 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-06T23:28:15.033

可能不再与 OP 相关，但由于仍然没有答案，我可以回答 Rickshaw 问题：

要将 ms 附加到刻度的末尾，您需要使用该`tickFormat`选项。在[他们的教程](http://code.shutterstock.com/rickshaw/tutorial/introduction.html)中，他们将轴设置如下：

```
var y_axis = new Rickshaw.Graph.Axis.Y( {
        graph: graph,
        orientation: 'left',
        tickFormat: Rickshaw.Fixtures.Number.formatKMBT,
        element: document.getElementById('y_axis'),
} ); 
```

在这里，他们将 设置`tickFormat`为他们内置的默认值，但实际上，它可以采用符合[d3 轴的 tickFormat 所](https://github.com/mbostock/d3/wiki/SVG-Axes#tickFormat)采用的任何内容。`tickFormat`应该是一个接受数字并输出字符串的函数。你可能想要一些类似的东西

```
var y_axis = new Rickshaw.Graph.Axis.Y( {
        graph: graph,
        orientation: 'left',
        tickFormat: function (d) { return d + ' ms'; },
        element: document.getElementById('y_axis'),
} ); 
```

这将使刻度简单地成为数字后跟 ms。

这也恰好回答了以下三部分问题的一部分。其他两部分涉及`tickTreatment`和`preserve`。

简短的回答是`tickTreatment`作为一个类添加到刻度中。之所以有用，是因为 Rickshaw 可以利用 CSS 样式。他们有一些你可以使用的预设。他们在该示例中使用的称为`glow`，它在文本周围添加白光，使其在图表顶部可读。

`preserve`是一个影响您提供的数据在使用前是否被复制的选项。Rickshaw 来源的相关部分在这里：

```
var preserve = this.preserve;
if (!preserve) {
    this.series.forEach( function(series) {
        if (series.scale) {
            // data must be preserved when a scale is used
            preserve = true;
        }
    } );
}

data = preserve ? Rickshaw.clone(data) : data; 
```

基本上，如果您设置`preserve`为`true`（默认为`false`），它将首先复制数据。

# java - Java while循环它不会在循环后询问第一个提示

> ID：15490172
> 
> 赞同：-2
> 
> 时间：2013-03-19T01:49:55.050
> 
> 标签：java, while-loop

感谢您的建议，这是我第一次使用 stackoverflow，因为我对编程还很陌生。我遇到的问题是我的程序在执行 while 循环后不要求输入名称。

```
import java.util.*;
import java.lang.*;

/**
 * CS-12J
 * Sweetner.java
 * Purpose:
 *
 * @version 1.0 3/18/13
 */

public class Sweetner {

   /**
    * The main method begins the execution of the program
    *
    *@param args not used
    */

    public static void main (String[] args) {
        Scanner input = new Scanner(System.in);
        String again = "yes";
        while(again.equals("yes")) {
            System.out.print("Enter the dieter's name: ");
            String name = input.nextLine();
            System.out.print("/n Enter the target weight of the dieter in pounds: ");
            double weightInPounds = input.nextDouble();

            //converts pounds to grams
            final double IBS_TO_GRAMS = 453.59;
            double weightInGrams = weightInPounds * IBS_TO_GRAMS;

            //finds lethal amout of sweetner for mouse
            double mouseWeight = 30;
            double lethalDoseMouse = 100;
            final double MOUSE_LETHAL_PROPORTION =
                (double) lethalDoseMouse / mouseWeight;

            //finds lethal amount of sweetner for human of given weight
            double lethalSweetner = MOUSE_LETHAL_PROPORTION * weightInGrams;

            //lethal number of cans
            final double SODA_SWEETNER = 0.001;
            final double SODA_GRAMS = 350;
            double lethalCans = lethalSweetner / (SODA_SWEETNER * SODA_GRAMS);

            //output
            System.out.println("For dieter: " + name);
            System.out.println("Dieter's target weight: " + weightInPounds
                + " pounds");
            System.out.println("Lethal dose in grams of sweetner is: "
                + lethalSweetner);
            System.out.println("Lethal number of cans of soda: "
                + lethalCans);

            //extra credit
            final int CANS_PER_DAY = 15;
            final double DAYS_IN_YEAR = 365.25;
            double yearsToLethal = lethalCans / (CANS_PER_DAY * DAYS_IN_YEAR);
            System.out.println("Years to lethal dose: " + yearsToLethal);
            System.out.println("Do you want to repeat the program? yes or no");
            again = input.next();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:05:52.990

试试这个：

```
import java.util.*;
import java.lang.*;

/**
 * CS-12J
 * Sweetner.java
 * Purpose:
 *
 * @version 1.0 3/18/13
 */

public class Sweetener {

    /**
     * The main method begins the execution of the program
     *
     *@param args not used
     */

    public static void main (String[] args) {
        Scanner input = new Scanner(System.in);
        String again = "yes";
        while(again.equals("yes")) {
            System.out.print("Enter the dieter's name: ");
            String name = input.nextLine();
            System.out.print("Enter the target weight of the dieter in pounds: ");
            double weightInPounds = Double.valueOf(input.nextLine());

            //converts pounds to grams
            final double IBS_TO_GRAMS = 453.59;
            double weightInGrams = weightInPounds * IBS_TO_GRAMS;

            //finds lethal amout of sweetner for mouse
            double mouseWeight = 30;
            double lethalDoseMouse = 100;
            final double MOUSE_LETHAL_PROPORTION =
                    (double) lethalDoseMouse / mouseWeight;

            //finds lethal amount of sweetner for human of given weight
            double lethalSweetner = MOUSE_LETHAL_PROPORTION * weightInGrams;

            //lethal number of cans
            final double SODA_SWEETNER = 0.001;
            final double SODA_GRAMS = 350;
            double lethalCans = lethalSweetner / (SODA_SWEETNER * SODA_GRAMS);

            //output
            System.out.println("For dieter: " + name);
            System.out.println("Dieter's target weight: " + weightInPounds
                    + " pounds");
            System.out.println("Lethal dose in grams of sweetner is: "
                    + lethalSweetner);
            System.out.println("Lethal number of cans of soda: "
                    + lethalCans);

            //extra credit
            final int CANS_PER_DAY = 15;
            final double DAYS_IN_YEAR = 365.25;
            double yearsToLethal = lethalCans / (CANS_PER_DAY * DAYS_IN_YEAR);
            System.out.println("Years to lethal dose: " + yearsToLethal);
            System.out.print("Do you want to repeat the program? yes or no");
            again = input.nextLine();
        }
    }
} 
```

# erlang - 使用自制 osx 10.8 安装 CouchDB 时出错 - 跳过依赖项？

> ID：15490177
> 
> 赞同：1
> 
> 时间：2013-03-19T01:50:23.423
> 
> 标签：erlang, couchdb, osx-mountain-lion, homebrew

所以我尝试[按照](http://wiki.apache.org/couchdb/Installing_on_OSX#If_you.27ve_brewed_CouchDB_before)couchdb wiki 上的说明安装它。我得到以下问题

```
Installing couchdb dependency: erlang-r15
==> Downloading https://github.com/erlang/otp/archive/OTP_R15B03-1.tar.gz
Already downloaded: /Library/Caches/Homebrew/erlang-r15-R15B03-1.tar.gz
Error: SHA1 mismatch
Expected: 5ba866722de79956b06966c232490d32bb7ba0a6
Actual: 7843070f5d325f95ef13022fc416b22b6b14120d
Archive: /Library/Caches/Homebrew/erlang-r15-R15B03-1.tar.gz 
```

因为我已经安装了正确版本的 erlang 并且它看不到它，所以无论如何告诉 brew 跳过这个依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:48:26.727

你试过`brew uninstall couchdb`之后重新安装吗？我有同样的问题，它为我解决了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T18:08:16.767

所以为了让它工作，我遵循了 couchdb 上的说明，直到安装 couchdb 命令：

```
brew remove --force openssl erlang couchdb icu4c spidermonkey nspr
brew update
brew outdated
brew rm --force erlang
cd /usr/local
git checkout 168742f Library/Formula/erlang.rb
brew install erlang 
```

因为我知道我安装了正确的 erlang，所以我更改了 Bew 公式以使其正常工作。所以我前往公式

```
vim /usr/local/Library/Formula/couchdb.rb 
```

并改变了依赖线

```
depends_on 'erlang-15' 
```

到

```
depends_on 'erlang' 
```

现在效果很好！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T03:36:17.113

这里没有一个解决方案对我有用，但下面的解决方案对我有用。请注意，我必须[使用 unixodbc](https://github.com/iriscouch/build-couchdb/issues/94#issuecomment-27160850)构建。

```
brew remove --force openssl erlang couchdb icu4c spidermonkey
brew update
brew install unixodbc
brew install homebrew/versions/erlang-r15 --with-unixodbc
# edit /usr/local/Library/Formula/couchdb.rb to change depends_on to 'erlang-r15'
brew install couchdb 
```

您可能想首先尝试仅强制删除 erlang 和 couchdb - 正如该线程中的某个人提到的那样，强制删除软件包会破坏他的系统（尽管在运行上述说明时我没有遇到这个问题）。

# jquery - 当对第一个表单进行任何更改时，使用 Jquery Reset 2nd form。

> ID：15490178
> 
> 赞同：-1
> 
> 时间：2013-03-19T01:50:41.220
> 
> 标签：jquery, forms, reset

我的网站上有两种形式（一种是 woocommerce，另一种是重力形式）。第一个表单包含一个带有两个选项的下拉菜单。第二个表格包含两个下拉字段。每当第一个表格发生变化时，我都希望第二个表格重置。我知道这听起来很奇怪，但它是一个黑客。所以我需要一个更改功能和清除表单功能。假设用户从第一个表单中选择选项 1，然后在表单 2 的每个字段中选择一个选项，然后用户决定从第一个表单中选择选项 2。第二种形式需要重置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:47:10.817

尝试以下内容：

```
<form id="first">
  <select>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
  </select>
</form>

<form id="second">
  <select>
    <option value="">Select...</option>
    <option value="a">Option A</option>
    <option value="b">Option B</option>
  </select>
  <select>
    <option value="">Select...</option>
    <option value="c">Option C</option>
    <option value="d">Option D</option>
  </select>
</form> 
```

`change`将事件处理程序绑定`<select>`到`#first`表单中：

```
$('#first select').change(function(){
  $('#second select').prop('selectedIndex',0);
}); 
```

然后`change`回调将表单中的所有`<select>`元素属性设置为第一个`#second``<option>`

有关工作示例，请参见[http://jsfiddle.net/cC9sb/1/ 。](http://jsfiddle.net/cC9sb/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:37:40.820

除了 Cue 的回答，您可以简单地使用

Javascript

```
$('#first select').change(function(){
  $('#second')[0].reset();
}); 
```

该行将 `$('#second')[0].reset();`重置表单中的所有元素（如果您曾经有输入（文本、单选、复选框...））。

HTML

```
<p>Form 1</p>
<form id="first">
  <select>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
  </select>
</form>

<p>Form 2</p>
<form id="second">
  <select>
    <option value="">Select...</option>
    <option value="a">Option A</option>
    <option value="b">Option B</option>
  </select>
  <select>
    <option value="">Select...</option>
    <option value="c">Option C</option>
    <option value="d">Option D</option>
  </select>
</form> 
```

[Cue 更新的小提琴](http://jsfiddle.net/cC9sb/2/)

# java - 这是检查套接字是否在 Java 中死机的好方法吗？

> ID：15490179
> 
> 赞同：2
> 
> 时间：2013-03-19T01:50:51.980
> 
> 标签：java, sockets, networking

我正在研究一个 Java 心跳传感器，它只会告诉你对方是否死了。我发现[了一些像这样的代码](https://stackoverflow.com/a/1272981/763029)：

```
 isConnected = kkSocket.isConnected() &&
                      !kkSocket.isClosed() &&
                      InetAddress.getByName(serverAddress).isReachable(1000); 
```

这是一个可靠的方法吗？我对这条线感到困惑：

```
InetAddress.getByName(serverAddress).isReachable(1000); 
```

那是为了什么 - 如果我在“localhost”上进行测试（即不是真正的联网示例，只有一台机器），它会起作用吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:07:07.713

这些都没有任何用处。该`isConnected()`方法告诉您是否曾经调用`connect()`（隐式或显式）或通过`accept()`;接收到套接字。该`isClosed()`方法告诉您是否曾经调用过`close()`；该`isReachable()`方法仅告诉您*主机*是否可访问，并且它会以每次成功调用时额外的 TCP 连接设置和拆除为代价。

**它与连接的状态**没有*任何关系。检测 TCP 连接错误的唯一可靠方法是尝试对其进行写入。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T03:34:39.217

这取决于您所说的“如果对方死了”是什么意思。

首先，`isConnected()`打电话是没有用的。这只是询问 Socket 是否在过去的某个时间点连接过。时期。

其次，`isClosed()`打电话是没有用的。

第三，`isReachable()`电话用处不大。它确实为您提供了一定程度的保证，即服务的主机在基本网络级别是活动的并且可以访问。（具体来说，它告诉您 ICMP Ping 数据包正在到达主机，并且响应正在返回。）但是，这并不能告诉您与服务的 TCP/IP 连接是否有效，或者服务本身是否有效仍然正常运行。实际上，主机可以响应 Ping 数据包，并拒绝或忽略连接到服务的尝试。

事实上，确保服务真正活跃（在有用的意义上）的唯一方法是尝试使用它。这意味着什么将取决于服务的性质。对于典型的同步服务，您将向套接字输出流写入请求“消息”，然后尝试从输入流中读取回复“消息”。（您应该确保在阅读文章时使用超时...）：

*   如果服务已终止或 TCP/IP 连接已断开，您应该得到一个 SocketException 或类似的。（但请注意，断开的 TCP/IP 连接并不一定意味着服务不存在。您可能只需要再次连接。）
*   如果服务“卡住”，您可能会在写入或读取时遇到超时。
*   如果存在网络问题，您可能会遇到超时，或者您可能会遇到某种 SocketException。

如果上述情况均未发生，则表明您的服务是“活动的”，尽管它可能仅对您发送的请求类型是“活动的”。

显然，您还需要检查响应是否符合预期。例如，为每个请求发送 501 或 503 响应的 HTTP 服务在有用的意义上是不活跃的。

* * *

> 那是为了什么 -`isReachable`如果我在“localhost”上进行测试（即不是一个真正的联网示例，只有一台机器）会起作用吗？

我不认为有一个明确的答案。这取决于操作系统是否支持环回网络地址上的 ICMP 协议。我不*希望*它起作用，因为 AFAIK 在环回上没有真正的 ICMP 用例。*

# unix - zsh 脚本中未解析可执行文件的相对路径

> ID：15490184
> 
> 赞同：1
> 
> 时间：2013-03-19T01:51:39.617
> 
> 标签：unix, zsh

我有一个个人脚本文件夹：`~/google_drive/code/scripts`. 这个文件夹在我的 $path 上。$path 已设置`~/.zshenv`并且在其他任何地方都没有更改（我已禁用 OS X path_helper 并且我没有在任何其他 zsh 启动文件中触摸 $path）。在此脚本文件夹中，有一个名为`alfred_workflows`. 从命令行，从任何位置，我都可以使用相对路径在此文件夹中运行脚本。这是预期的：

```
$ alfred_workflows/test.sh
#=> test successful 
```

但是在脚本中，这是行不通的。它会产生一个错误：

```
$ zsh -c "alfred_workflows/test.sh"
#=> zsh:1: no such file or directory: alfred_workflows/test.sh 
```

再一次，`scripts`包含的目录`alfred_workflows`是 on `$path`，它设置在 中`~/.zshenv`，我能够从脚本运行驻留在该目录顶层的可执行文件。问题似乎只出现在我尝试通过子目录时。可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T02:05:28.590

[如果设置了path_dirs](http://zsh.sourceforge.net/Doc/Release/Options.html#index-PATH_005fDIRS)选项，`$path`则仅 搜索包含斜杠的名称。显然，这是在您的交互式 shell 中设置的，但并未在执行脚本的进程中设置。

# javascript - Javascript不会显示变量

> ID：15490188
> 
> 赞同：-1
> 
> 时间：2013-03-19T01:52:09.377
> 
> 标签：javascript, date

试图计算 08/28/2011 和当前日期之间的天数。出于某种原因， document.write 行没有做任何事情。

```
 <script type="text/javascript">
    var currentDate = new Date()
    var day = currentDate.getDate()
    var month = currentDate.getMonth() + 1
    var year = currentDate.getFullYear()
    var oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds
    var firstDate = new Date(2011,08,28);
    var secondDate = new Date(year,month,day);
    var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
    document.write(diffdays);
  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T01:53:07.533

它应该是 diffDays 而不是 diffdays。JS 区分大小写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T01:54:23.817

JavaScript 区分大小写。`diffdays`是一个完全独立的变量`diffDays`。

以后，您应该检查浏览器的控制台（在 IE 和 Chrome 中，按 F12 并找到控制台选项卡），因为在这里您会看到一条错误消息，并且您已经发现了错误。

# xpages - 获取包括类别在内的总视图条目 - 性能问题

> ID：15490191
> 
> 赞同：0
> 
> 时间：2013-03-19T01:52:43.237
> 
> 标签：xpages

我在我的视图控件上使用自定义页脚；例如，我有：

> 显示**1** - **25**的**34200**

我的基础视图是分类的，因此条目总数也应包括类别。到目前为止，我能够找到包括类别在内的条目总数的唯一方法是使用 NotesViewNavigator；但是，性能是不可接受的，因为计算这段代码大约需要 27 秒。

我确定问题出在线路上`var nav:NotesViewNavigator = view1.createViewNav();`，因为我添加了一些调试器信息：

```
start = new Date().getTime();
var viewPanel1:com.ibm.xsp.component.xp.XspViewPanel = getComponent("dataView1");
var nav:NotesViewNavigator = view1.createViewNav();
if (viewScope.VendorSrch == "" || viewScope.VendorSrch == null){
    var total =  nav.getCount(); 
}else{          
    var total = viewPanel1.getRowCount();// View can be filtered by user as well (using categoryFilter property)
}

var from =(viewPanel1.getFirst() < total? (viewPanel1.getFirst() + 1 ) : total);
var tmpTo = viewPanel1.getFirst() + viewPanel1.getRows();
var to = (tmpTo < total? tmpTo : total);

var elapsed = new Date().getTime() - start;
print(elapsed + " ms");
"</b>Displaying <b>"+ from +"</b> - <b>"+ to + "</b> of " + "<b>"+total+"</b>" 
```

有谁知道我该如何改进这段代码？

请注意，此视图中的文档也有读者字段，这可能会影响此操作的性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:15:24.183

你被困在[性能地狱](http://www.wissel.net/blog/d6plinks/SHWL-7PNDF7)中。读取访问保护仅且仅存储在文档内部。因此，当您要求视图导航器获取计数时，它唯一的选择是打开所有相关文档 - 因此性能不佳。读取保护和性能是天敌（想象一下：你有一个办公室，每扇门都被锁上了，如果你有一个与锁号匹配的钥匙，你必须每次都检查所有的钥匙）。

读者领域引入性能地狱的出路是只阅读您实际需要的条目（[如概述](http://www.wissel.net/blog/d6plinks/SHWL-7PNDF7)）。如果用户可以根据名称、组成员资格和角色访问文档（这将使每次访问只能读取一次），这可能会有点棘手，但它仍然非常可行。在这种情况下，您将使用重复控件和对象数据源或托管 bean，因此多次传递发生在后台。

额外技巧：如果您添加一个带有公式 1 的列（只是数字）并将其相加，同时对其进行分类，那么您可以从 naventry 跳到下一个兄弟（这将是下一个类别）并添加数字 - > 所涉及的读取次数要少得多，并且没有打开任何文档。

再次强调：nav.count 需要打开所有文档，这是一个坏主意，任何需要检查读取权限的东西都是一个坏主意，因此使用一个（或多个）基于访问权限的 viewNav 实际上只读取用户的文档可以阅读是要走的路。

如果您需要更多提示，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:09:49.557

我尝试了几种方法，并使用此循环将时间从平均 27 秒减少到 2.7 秒：

```
start = new Date().getTime();
var viewPanel1:com.ibm.xsp.component.xp.XspViewPanel = getComponent("dataView1");
var nav:NotesViewNavigator = view1.createViewNav();
nav.setEntryOptions(NotesViewNavigator.VN_ENTRYOPT_NOCOLUMNVALUES);

// disable autoupdate
view1.setAutoUpdate(false);
if (viewScope.VendorSrch == "" || viewScope.VendorSrch == null){
    nav.setBufferMaxEntries(400);       
    //var total =  nav.getCount(); // This works but slow

    // peform lookup
    var vwentry:NotesViewEntry = nav.getFirst();
    var vwentrytmp:NotesViewEntry = null;
    count = 0;
    while (vwentry != null){
        count = count + 1;       
        // Get entry and go recycle
        vwentrytmp = nav.getNext(vwentry);
        vwentry.recycle();
        vwentry = vwentrytmp;        
    }

    total = count;

}else{  
    var total = viewPanel1.getRowCount();   
}

var from =(viewPanel1.getFirst() < total? (viewPanel1.getFirst() + 1 ) : total);
var tmpTo = viewPanel1.getFirst() + viewPanel1.getRows();
var to = (tmpTo < total? tmpTo : total);

var elapsed = new Date().getTime() - start;
print(elapsed + " ms");
"</b>Displaying <b>"+ from +"</b> - <b>"+ to + "</b> of " + "<b>" + total + "</b>" 
```

# android - 无法启动活动 ComponentInfo (android)

> ID：15490194
> 
> 赞同：1
> 
> 时间：2013-03-19T01:52:48.097
> 
> 标签：android

我收到此错误，请帮助我。

无法启动活动 ComponentInfo{com.example.newandrojenaproject/com.example.newandrojenaproject.MainActivity}：java.lang.NullPointerException

这是我的 MainActivity.java

```
package com.example.newandrojenaproject;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;
import com.hp.hpl.jena.query.*;
public class MainActivity extends Activity {
    TextView t;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        String str = extractUsingSparql("<http://dbpedia.org/resource/Babur>");
        t = (TextView) findViewById(R.id.textView1);
        if(!str.equalsIgnoreCase("null"))
        t.setText(str);
        else
            t.setText("Null Value Returned");
    }

     public static String extractUsingSparql(String url){

            String abstract1= "";
            String var = "abstract";
            String r="";

            String service = "http://dbpedia.org/sparql";
            String query = "SELECT ?abstract WHERE { { "+url+" <http://dbpedia.org/ontology/abstract> ?abstract. FILTER langMatches( lang(?abstract), 'en') } } ";
            //Abstract
            Query q = QueryFactory.create(query, Syntax.syntaxARQ);
            QueryExecution qe = QueryExecutionFactory.sparqlService(service, q);
            try{
            ResultSet resultSet = qe.execSelect();
            while (resultSet.hasNext()) {
                QuerySolution solution = resultSet.next();
                if (solution.get(var) == null) {

                      System.out.println("{null}");
                      r = "null";

                    } else if (solution.get(var).isLiteral()) {

                      System.out.println (solution.getLiteral(var).toString());
                     r= solution.getLiteral(var).toString();
                    } else {
                      System.out.println(solution.getResource(var).getURI());
                      r = solution.getResource(var).getURI();
                    }
            }
            } 
            catch(Exception e)
            {
                System.out.println(e.getMessage());
            }
            finally
            {
                qe.close();
            }
            return r;
     }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是 XML 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

我没有使用任何其他活动。我正在使用 androjena 和 ARQoid 库进行 sparql 查询。我不知道错误实际上在哪里以及如何解决它！

以下是错误（LogCat 输出）：

```
03-19 13:00:29.125: E/AndroidRuntime(832): FATAL EXCEPTION: main
03-19 13:00:29.125: E/AndroidRuntime(832): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.newandrojenaproject/com.example.newandrojenaproject.MainActivity}: java.lang.NullPointerException
03-19 13:00:29.125: E/AndroidRuntime(832):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-19 13:00:29.125: E/AndroidRuntime(832):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-19 13:00:29.125: E/AndroidRuntime(832):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-19 13:00:29.125: E/AndroidRuntime(832):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-19 13:00:29.125: E/AndroidRuntime(832):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-19 13:00:29.125: E/AndroidRuntime(832):  at android.os.Looper.loop(Looper.java:137)
03-19 13:00:29.125: E/AndroidRuntime(832):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-19 13:00:29.125: E/AndroidRuntime(832):  at java.lang.reflect.Method.invokeNative(Native Method)
03-19 13:00:29.125: E/AndroidRuntime(832):  at java.lang.reflect.Method.invoke(Method.java:511)
03-19 13:00:29.125: E/AndroidRuntime(832):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-19 13:00:29.125: E/AndroidRuntime(832):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-19 13:00:29.125: E/AndroidRuntime(832):  at dalvik.system.NativeStart.main(Native Method)
03-19 13:00:29.125: E/AndroidRuntime(832): Caused by: java.lang.NullPointerException
03-19 13:00:29.125: E/AndroidRuntime(832):  at com.android.internal.os.LoggingPrintStream.println(LoggingPrintStream.java:298)
03-19 13:00:29.125: E/AndroidRuntime(832):  at com.example.newandrojenaproject.MainActivity.extractUsingSparql(MainActivity.java:56)
03-19 13:00:29.125: E/AndroidRuntime(832):  at com.example.newandrojenaproject.MainActivity.onCreate(MainActivity.java:16)
03-19 13:00:29.125: E/AndroidRuntime(832):  at android.app.Activity.performCreate(Activity.java:5104)
03-19 13:00:29.125: E/AndroidRuntime(832):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-19 13:00:29.125: E/AndroidRuntime(832):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-19 13:00:29.125: E/AndroidRuntime(832):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T16:40:29.717

从日志文件中可以看出，错误位于 MainActivity.java 的第 16 行。

这是因为`t`(textView) 等于`null`. 这可能是由于引用中的某种混乱引起的，因此，请尝试清理和刷新您的项目。 `Project -> Clean`在日食。

# asp.net - 传递列表以查看

> ID：15490195
> 
> 赞同：0
> 
> 时间：2013-03-19T01:52:57.680
> 
> 标签：asp.net, list, view

我正在尝试将列表从控制器传递到视图。我已经用断点检查了控制器端，一切似乎都很好。问题在视图中。对于列表中的所有位置，我只得到列表的最后一个元素。

例子

控制器中的列表是：1、2、3、4、5

鉴于列表是：5、5、5、5、5

控制器代码：

```
 if (Request.IsAuthenticated)
        {
            AdminController AC = new AdminController();
            List<ShowAllMessagesModel> SAMM = new List<ShowAllMessagesModel>();
            SAMM = AC.showAllMessages();
            ViewData["myList"] = SAMM;
            return PartialView();
        } 
```

查看代码：

```
<%  var list = ViewData["myList"] as List<sms.Models.ShowAllMessagesModel>; %>
<%= list.Count %>
<% 
    for ( int i = 0; i < list.Count ; i++) 
    {
   %>
   <li>MsgId : <%= list.ElementAt(i).MessageId%> Sender : <%= list.ElementAt(i).Sender%></li>
   <% } %> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:42:23.227

显然你需要实例化列表的每个元素，否则它每次都会插入相同的元素:)

```
List<var> examplelist = new List<var>();

for ( int i =0 ; i <=10 ; i++)
{
    var = new var();
    exampleList.Add(var);
} 
```

# java - java中while语句中的三个条件

> ID：15490206
> 
> 赞同：0
> 
> 时间：2013-03-19T01:53:40.993
> 
> 标签：java, while-loop, boolean-logic

这是错的吗？当 Ran1、Ran2、Ran3 都相同时，我想退出 while 循环。tnx

```
Random RandomNumber = new Random();
int Ran1 = RandomNumber.nextInt(4);
int Ran2 = RandomNumber.nextInt(4);
int Ran3 = RandomNumber.nextInt(4);

while (Ran1 != Ran2 && Ran1 != Ran3 && Ran2 != Ran3 ){
    Ran1 = RandomNumber.nextInt(4);
    Ran2 = RandomNumber.nextInt(4);
    Ran3 = RandomNumber.nextInt(4);
    System.out.print(Ran1);
    System.out.print(" ");
    System.out.print(Ran2);
    System.out.print(" ");
    System.out.println(Ran3); 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T01:59:11.293

这只是简单的布尔逻辑。你可以自己试试。假设`Ran1`是 3、`Ran2`是 4 和`Ran3`是 3。表达式的计算结果是什么？

```
Ran1 != Ran2 -> 3 != 4 -> True
Ran1 != Ran3 -> 3 != 3 -> False
Ran2 != Ran3 -> 4 != 3 -> True 
```

这些并不都是真的，所以`AND`把它们放在一起是假的，你的循环会中断。但这不是您想要的，您希望它仅在它们都相同时为 False。如果您注意到，按照您现在的方式，如果三个变量中的任何一个等于其他任何一个，循环就会中断。

从正面而不是双重否定的角度思考更容易。什么时候所有变量都相同？在 Java 语法中是 when `Ran1 == Ran2`, `Ran1 == Ran3`, and `Ran2 == Ran3`, or ：

```
Ran1 == Ran2 && Ran1 == Ran3 && Ran2 == Ran3 
```

现在，只要**不是**这样，您就希望循环继续，因此请确保将其括在括号中并使用`NOT`运算符`!`：

```
while (!(Ran1 == Ran2 && Ran1 == Ran3 && Ran2 == Ran3)) {
    ...
} 
```

* * *

就是这样，但是如果您不想使用括号，那么您可以使用布尔逻辑简单地表达。`!(A && B)`是一样的`!A || !B`：

```
A  |  B  |  A && B  |  ! (A && B)  | !A  |  !B  |  !A || !B
---+-----+----------+--------------+-----+------+-----------
T  |  T  |    T     |       F      |  F  |   F  |     F
T  |  F  |    F     |       T      |  F  |   T  |     T
F  |  T  |    F     |       T      |  T  |   F  |     T
F  |  F  |    F     |       T      |  T  |   T  |     T 
```

您可以自己验证是否`!(A && B && C)`与 相同`!A || !B || !C`。因此，您可以将上述`while`循环变为：

```
while (!(Ran1 == Ran2) || !(Ran1 == Ran3) || !(Ran2 == Ran3)) {
    ...
} 
```

或者：

```
while (Ran1 != Ran2 || Ran1 != Ran3 || Ran2 != Ran3) {
    ...
} 
```

就用文字进行推理而言：只要三个变量中的***任何****一对不相等，*您就希望循环继续。`Ran1 != Ran2 && Ran1 != Ran3 && Ran2 != Ran3`只要三个变量的***所有****对不相等，*您的初始表达式只会继续循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T02:00:39.477

当它们都相同时，您想退出循环。因为相等是[传递](http://en.wikipedia.org/wiki/Transitive_relation)的，所以你知道 if `A == B && B == C`then `A == C`。这意味着您可以在

```
Ran1 == Ran2 && Ran1 == Ran3 
```

所以你必须保持在循环内，直到前一个条件的否定为真：

```
! (Ran1 == Ran2 && Ran1 == Ran3) 
```

[通过使用德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)，这等效于：

```
Ran1 != Ran2 || Ran1 != Ran3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T01:55:44.633

从逻辑上讲，你的很好，但它可能会更短/更容易阅读。您想`!`在条件中使用 NOT 运算符 ( )，因为这就是您的想法：

```
while ( !  ( ( Ran1 == Ran2) && (Ran1 == Ran3) ) ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T02:06:12.543

您想在 3 个值彼此不同的情况下继续迭代，因此表达条件的方式是

```
while(Ran1 != Ran2 || Ran2 != Ran3 ) 
```

因为这意味着一旦将 Ran2 与其他比较，Ran1 和 Ran3 就相等

顺便说一句，您可以简化您的

```
System.out.print(Ran1);
System.out.print(" ");
System.out.print(Ran2);
System.out.print(" ");
System.out.println(Ran3); 
```

通过使用单个：

```
System.out.println(Ran1 + " " Ran2 + " " + Ran3); 
```

# jquery - 加载 jquery 获取加载

> ID：15490208
> 
> 赞同：0
> 
> 时间：2013-03-19T01:53:43.257
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3, load

我怎么能用jquery加载做到这一点

```
.../article/relates.html?longitude=45.34554... 
```

我在轨道上，我的控制器用以下代码响应

```
 @Article = Article.all
  respond_to do |format|
    format.html 
```

这是我的jQuery

```
$( "#dialog" ).load('/events/relates#eventconfirm', { data: 'hello' }); 
```

我不断收到 400 错误，但不知道为什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:40:06.253

1.  **请务必指定正确的 URL。**您的第一个代码片段`/article/`用作路径。您的第二次使用`/events/`.
2.  **请务必指定正确的参数。**同样，这两个示例之间存在不一致：`longitude`与`data`.

这两个，单独或组合，可能是您收到“400 - 错误请求”错误响应代码的原因。

# highcharts - Highcharts MTD（本月至今）和 QTD（季至今）实施

> ID：15490217
> 
> 赞同：1
> 
> 时间：2013-03-19T01:54:33.027
> 
> 标签：highcharts, highstock

有人在 Highcharts 中完成了 MTD 和 QTD 的实现吗？下面是 MTD 实现，完成后计算将传递给范围选择器。

```
var currentDate = new Date("March 05, 2013 00:00:00");
var tempDate = new Date(currentDate.getTime());
tempDate.setDate(1);
mtdCount = parseInt((currentDate.getTime() - tempDate.getTime())/(24 * 3600 * 1000));

options = {

chart: {
renderTo: 'container',
zoomType: 'xy'
}

rangeSelector: {
selected: 1,

buttons: [{
type: 'day',
count: mtdCount,
text: 'MTD'
}, {
type: 'all',
text: 'All'
}]
}

};

Highcharts.setOptions({
global: {
useUTC: false
}
}); 
```

但是结果是无效的，比如当前日期是 2013 年 3 月 5 日。因此假设这个当前日期在 MTD 中的日期范围是从 2013 年 3 月 1 日到 2013 年 3 月 5 日，但最终是 2013 年 2 月 28 日到 3 月 5 日2013 年。

我不确定根本问题在哪里？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:30:43.890

你的时区是什么时候？您必须通过偏移将所有数据的时间转换为 UTC+0:00。

# c++ - 使用 std::deque::iterator（在 C++ STL 中）搜索和删除某些元素

> ID：15490219
> 
> 赞同：6
> 
> 时间：2013-03-19T01:54:58.197
> 
> 标签：c++, stl, iterator, deque

我在调用以下代码时遇到问题：

```
#include<deque>
using namespace std;

deque<int> deq = {0,1,2,3,4,5,6,7,8};

for(auto it = deq.begin(); it != deq.end(); it++){
    if(*it%2 == 0)
        deq.erase(it);
} 
```

这导致了分段错误。在查看问题后，我发现问题在于 STL 管理双端队列迭代器的方式：如果被擦除的元素更接近双端队列的末尾，则用于指向已擦除元素的迭代器现在将指向 NEXT元素，但不是前一个元素`vector::iterator`。我知道从`it != deq.end()`to修改循环条件`it < deq.end()`可能会解决问题，但我只是想知道是否有办法以“标准形式”遍历和擦除双端队列中的某些元素，以便代码可以与其他容器类型兼容也是。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-19T02:02:57.197

[http://en.cppreference.com/w/cpp/container/deque/erase](http://en.cppreference.com/w/cpp/container/deque/erase)

> 所有迭代器和引用都无效 [...]
> 
> **返回值：最后一个被移除元素之后的迭代器。**

这是从循环内的 STL 容器中删除元素时的常见模式：

```
for (auto i = c.begin(); i != c.end() ; /*NOTE: no incrementation of the iterator here*/) {
  if (condition)
    i = c.erase(i); // erase returns the next iterator
  else
    ++i; // otherwise increment it by yourself
} 
```

或者正如[克里斯](https://stackoverflow.com/users/962089/chris)提到的那样，您可以使用[`std::remove_if`](http://en.cppreference.com/w/cpp/algorithm/remove).

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-19T02:19:46.947

要使用[erase-remove idiom](http://en.wikipedia.org/wiki/Erase-remove_idiom)，您可以执行以下操作：

```
deq.erase(std::remove_if(deq.begin(),
                         deq.end(),
                         [](int i) { return i%2 == 0; }),
          deq.end()); 
```

一定要`#include <algorithm>`提供`std::remove_if`。

# swing - 我有 4 天，我应该学习 QT 还是 Java swing？

> ID：15490221
> 
> 赞同：-6
> 
> 时间：2013-03-19T01:55:02.677
> 
> 标签：swing, qt, user-interface

我需要在这个星期五之前构建一个文件浏览器演示，用于浏览 mp3 文件并显示其曲目信息，例如艺术家和标题。

我在这两个方面都没有经验，在 Java 和 C++ 方面也有相同的经验。

核心功能在 C++ 中完成。只需要一个 gui 来浏览、选择文件并根据选择的文件调用函数。

我应该选择哪一个？教程非常感谢。（我知道网上有很多，但我不确定哪一个可以让我在 3-4 天内完成我的工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T07:02:37.893

Qt 也是我的投票。

以下链接中的示例和信息应该可以帮助您顺利找到解决方案。

[http://www.youtube.com/watch?v=92biLZST6Vg](http://www.youtube.com/watch?v=92biLZST6Vg)

[http://qt-project.org/doc/qt-4.8/phonon-qmusicplayer.html](http://qt-project.org/doc/qt-4.8/phonon-qmusicplayer.html)

[http://qt-project.org/doc/qt-4.8/qfilesystemmodel.html](http://qt-project.org/doc/qt-4.8/qfilesystemmodel.html)

PS，在安装 Qt 和 Qt Creator 之后，它有很棒的文档和很棒的示例和教程，可以从 IDE 的 Welcome 选项卡上轻松访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T02:08:22.413

由于时间跨度短，我建议使用Qt。访问网站[http://qt.digia.com/Product/Developer-Tools/](http://qt.digia.com/Product/Developer-Tools/)并下载 Qt Creator IDE。它有一个不错的 GUI 构建器，允许您在 WYSIWYG 编辑器中拖放组件。请务必阅读 Qt 中的信号和插槽。网站上有很多很好的教程，Qt 也有很好的文档记录。如果您努力工作，您可以及时设置您的 GUI 并连接到您的核心代码。祝你好运。

顺便说一句：Qt 使用 C++ 并具有 Qt 特定对象的附加库。

# trigger.io - Trigger.io：使用临时证书构建时缺少权利

> ID：15490222
> 
> 赞同：1
> 
> 时间：2013-03-19T01:55:10.310
> 
> 标签：trigger.io

最近尝试让 Trigger.io 应用程序的无线分发运行，如下所述：

[http://docs.trigger.io/en/v1.4/best_practice/wireless_distribution.html](http://docs.trigger.io/en/v1.4/best_practice/wireless_distribution.html)

不幸的是，这些应用程序（使用专用于“Ad Hoc”的配置文件构建）在通过网络分发时神秘地无法安装。对设备的 syslog 输出的调查显示缺少 get-task-allow 权利。尝试将生成的 IPA 文件放到 Testflight mac 应用程序上进行上传时，会出现类似的错误。

我可以通过一些晦涩的命令行标志提供自定义权利 plist 吗？或者平台在检测到“企业”构建时是否应该自动使用正确的构建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:02:36.617

`get-task-allow`权利是控制应用程序是否可调试的内容。它应该在 ad-hoc 和分发配置文件中设置为 false。

查看您用于打包应用程序的临时配置文件：您应该看到如下内容：

```
<key>get-task-allow</key>
<false/> 
```

这也应该在构建后进入二进制文件。快速而肮脏的检查：在二进制文件中解压缩 IPA`release/ios`和 grep for `get-task-allow`。我得到：

```
<key>get-task-allow</key><false/> 
```

# objective-c - 我正在制作一个应用程序，我放了一个 iAd，但我希望它在不可用时隐藏

> ID：15490223
> 
> 赞同：2
> 
> 时间：2013-03-19T01:55:23.960
> 
> 标签：objective-c, iphone, xcode, iad

我正在制作一个具有 iAd 的应用程序，但是当我没有连接到互联网时，iAd 应该在的空间是一个白色的空白空间，我该如何制作它，以便 iAd 空间不是白色的，并且是与背景颜色相同

如果你能给我一些代码，那就太好了。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T02:02:06.487

将此添加到您的 .m 文件中。此方法检查是否可以加载广告。如果不能，它会使用漂亮的动画使空白消失。我也是 iOS 编程的菜鸟，但这就是我在 App Store 中的一个应用程序中的做法。我不确定这是否是最好的方法，但它有效。

```
-(void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [banner setAlpha:1];
    [UIView commitAnimations];
}

-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [banner setAlpha:0];
    [UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:37:37.920

检查此
[iAd 示例代码](http://www.raywenderlich.com/1371/how-to-integrate-iad-into-your-iphone-app)

[iAd 示例](https://github.com/WillChilcutt/iAd-Example)

[共享 iAd 示例](https://github.com/yarrd/Shared-iAd-example)

# vb.net - 在 Visual Basic 2010 中调试时如何输出代码？

> ID：15490228
> 
> 赞同：3
> 
> 时间：2013-03-19T01:55:56.367
> 
> 标签：vb.net, visual-studio, debugging, output

当我调试我的应用程序时，有些地方不对劲，我无法继续。那么在我测试我的应用程序以查看有什么问题时，是否可以看到它的输出代码？

我打开输出窗口，但那里没有任何反应，它只是保持空白。简而言之：我想看看我的应用在测试时实际在做什么。我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T03:22:14.610

> 那么在我测试我的应用程序以查看有什么问题时，是否可以看到它的输出代码？

是的，但你实际上必须*输出*一些东西，否则什么都不会出现。在 VB.NET（如果您有 Visual Studio 2010，这是您使用的语言）中，这是通过以下代码完成的：

```
Debug.Print("Here is some text that will be output.") 
```

该`Debug.Print`方法的文档在[这里](http://msdn.microsoft.com/en-us/library/9azyssyh.aspx)。为了这样调用它，您还必须导入`System.Diagnostics`命名空间。您可以通过将以下行放在代码文件的顶部（以及所有其他类似的语句）来做到这一点：

```
Imports System.Diagnostics 
```

输出将自动出现在输出窗口中。如果您仍然看不到任何内容，请确保输出没有被重定向到即时窗口：工具 -> 选项 -> 调试 -> 常规 -> 取消选中“将所有输出窗口文本重定向到即时窗口”选项。

* * *

令人困惑的是，您在问题中使用了“代码”一词，表示您希望“在测试时查看 [您的] 应用程序的输出代码”。我不确定“代码”是否真的是指“输出”，在这种情况下，上面的解决方案对你有用。

如果您实际上是指*code*，就像在程序的源代码中一样，那么您可以使用 IDE 中的 Break 工具栏按钮（或按`Ctrl`+ `Break`）来暂停程序的执行。这将自动将您转储回代码编辑器，并突出显示当前正在执行的代码行。

Visual Studio 有一些非常强大的调试工具。如果您对如何使用它们尚不了解，我强烈建议您选择一本关于它或 VB 2010 的书，它将教给您这些东西。通过反复试验来学习它们可能会非常令人困惑，但如果你有一个好的指南，并不是那么困难。花时间调试您的代码，而不是弄清楚如何使用 IDE。

# google-app-engine - AppEngine 错误：java.lang.NoSuchMethodError：com.google.appengine.api.search.Index.add

> ID：15490231
> 
> 赞同：0
> 
> 时间：2013-03-19T01:56:25.303
> 
> 标签：google-app-engine, full-text-search

我在我的 webapp 中使用 AppEngine SDK 1.7.0。最近，错误记录为

```
Caused by: java.lang.NoSuchMethodError:
com.google.appengine.api.search.Index.add([Lcom/google/appengine/api/search/Document;)
Lcom/google/appengine/api/search/AddResponse; 
```

错误是最近才发生的，以前没有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:45:15.957

AddResponse 已被弃用并从 SDK 中删除。 [http://code.google.com/p/googleappengine/wiki/SdkForJavaReleaseNotes](http://code.google.com/p/googleappengine/wiki/SdkForJavaReleaseNotes)

您需要删除对该类的所有引用，然后重新部署。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T02:05:52.560

我相信他们（谷歌）已经将 Index.add() 更改为 Index.put(Document ...docs)，关于 API 文档的最新版本。

[https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/search/Index)

# html - “向下扩展” HTML/CSS 或替代

> ID：15490233
> 
> 赞同：1
> 
> 时间：2013-03-19T01:56:37.273
> 
> 标签：html, css

## 这是一个 SSCCE 来显示我的问题：

```
<html>
    <head>
        <title>SSCCE for problem</title>
        <style type="text/css">
        h1 {font-size: 2em;}
        h5 {font-size: 1.3em; margin: 1em;}
        </style>
    </head>
    <body style="text-align: center;">
        <div style="background-color: #C0C0C0;">
        <div style="background-color: #B0B0B0; float:left; padding: 1em;"><h1 style="">Welcome to<br/><img src="http://www.oddllama.cu.cc/logo.png" alt="OddLlama Productions" 

title="Welcome to OddLlama Productions!"/></h1>This is some sample text.</div>
        <div>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent in est non dui dictum eleifend. Proin tempor sodales odio, vitae laoreet orci vehicula blandit. 

Curabitur vitae tellus odio, nec vehicula leo. Nam ac urna nisi, eget molestie dui.</div>
        </div><br/>
        <span style="width: 25%; float: left; clear: left; background-color: #D0D0D0"><p>
            <h5>SOMETHING</h5>Stuff.<br/>Stuff.<br/>Stuff.<br/>Stuff.<br/>Stuff.<br/>
        </span>
        <span style="width: 50%; float: left; background-color: #DDDDDD">
            <h1>SSCCE</h1>
            <p>This is an SSCCE.</p>
            <p>Lorem ipsum dolor sit amet,<br/>consectetur adipiscing elit.<br/>Praesent in est<br/>non dui dictum eleifend.<br/>Proin tempor<br/>sodales odio,<br/>vitae 

laoreet orci<br/>vehicula blandit.<br/>Curabitur vitae<br/>tellus odio,<br/>nec vehicula leo.<br/>okay good enough.</p>
        </span>
        <span style="width: 25%; float: left; background-color: D0D0D0"><p>
            <h5>More stuff!</h5>
            <p>I'll just put a bunch of line breaks to take up space<br/><br/><br/><br/><br/><br/><br/><br/>okay good</p>
        </span>
        <p style="clear: both;"><br/>THIS IS A THING AT THE BOTTOM it is a footer yay footers are footery and footeriness is footy okay why am I typing this this is awkward but 

I must take up more space spaciness is spacey<br/><br/>okay good</p>
        <br/><div style="padding: 10px;"></div><hr/><div style="padding: 10px;"></div>
    </body>
</html> 
```

## 这是它如何呈现的图像：

![http://i.imgur.com/4LFzV4I.png](../Images/44ce4cfa09a3e0392ba16adc5598b147.png)

* * *

如何使`div`包含文本的圆圈向下扩展，使其与带有图像的圆圈高度相同？我将它们都放在一个共同的 parent`div`中，但是无论我尝试使用什么属性或样式，它都不会向下扩展。

有没有`expand: down`CSS 的东西，或者我可以用来让我的文本向下扩展的替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:14:07.293

不幸的是，CSS 中没有 expand:down 属性 :) 但是您确实有一些选择。最常见的解决方案是使用 .clearfix 方法。

当您浮动一些子元素时，父（容器）不会影响这些浮动子元素的高度。这就是您需要添加 clearfix 类的地方。

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
} 
```

[这是一个小提琴](http://jsfiddle.net/aTF5f/1/)

PS：它也兼容非常旧的 IE 版本！

# ios - NSDateFormatter 无法将 '1988-04-10' 解析为 iOS 6 中的 NSDate 实例。它是一个错误吗？

> ID：15490235
> 
> 赞同：3
> 
> 时间：2013-03-19T01:56:49.080
> 
> 标签：ios, objective-c, cocoa-touch, nsdate, nscalendar

我遇到了一个陌生的问题。NSDateFormatter 无法解析`1988-04-10`为 iOS 6 中的 NSDate 实例。但它适用于 iOS 4 和 iOS 5。这是一个错误吗？

以下是代码。这很简单。

```
NSArray *values = @[@"1988-04-09", @"1988-04-10", @"1988-04-11"];
NSDateFormatter* df = [[NSDateFormatter alloc] init];
NSLocale *posixLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[df setLocale:posixLocale];
[df setDateFormat:@"yyyy'-'MM'-'dd"];
NSLog(@"timeZone:%@, locale:%@", df.timeZone, df.locale.localeIdentifier);
NSDate* date = nil;
for (NSString *value in values) {
    date = [df dateFromString:value];
    NSLog(@"The date is %@", date);
}
[posixLocale release];
[df release]; 
```

以下是 iOS 4 和 iOS 5 中的结果。

```
2013-03-19 09:55:32.249 SampleProject[1844:f803] timeZone:Asia/Shanghai (CST (China)) offset 28800, locale:en_US_POSIX
2013-03-19 09:55:32.250 SampleProject[1844:f803] The date is 1988-04-08 16:00:00 +0000
2013-03-19 09:55:32.250 SampleProject[1844:f803] The date is 1988-04-09 16:00:00 +0000
2013-03-19 09:55:32.251 SampleProject[1844:f803] The date is 1988-04-10 15:00:00 +0000 
```

以下是 iOS 6 中的结果。

```
2013-03-19 09:42:40.824 SampleProject[1455:11303] timeZone:Asia/Shanghai (GMT+08:00) offset 28800, locale:en_US_POSIX
2013-03-19 09:42:40.827 SampleProject[1455:11303] The date is 1988-04-08 16:00:00 +0000
2013-03-19 09:42:40.827 SampleProject[1455:11303] The date is (null)
2013-03-19 09:42:40.828 SampleProject[1455:11303] The date is 1988-04-10 15:00:00 +0000 
```

为空`1988-04-10`。是一个错误。谁能解释一下？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T02:06:31.197

4月10日星期日，00:00是[当年上海夏令时](http://www.timeanddate.com/worldclock/clockchange.html?n=237&year=1988)的切换。

根据伟大的 WWDC 2011 视频：[执行日历计算](https://developer.apple.com/videos/wwdc/2011/?id=117)，这可能会导致未定义的行为。出于同样的原因，在视频中选择里约热内卢作为例子。

一种解决方法可能是添加一个时间，即保存为下午 3 点。
另一个对 NSDateComponents 进行计算。
视频中解释了这两种解决方法。

# java - 这个java代码到底在做什么？

> ID：15490236
> 
> 赞同：-1
> 
> 时间：2013-03-19T01:56:54.933
> 
> 标签：java, string, file-io

我正在尝试编写一个需要从文件中读取文本的程序。在做研究时，我发现这段代码完全符合我的需要：

```
String string="";

try{

        InputStream ips = new FileInputStream("WORDS.txt"); 
        InputStreamReader ipsr = new InputStreamReader(ips);
        BufferedReader br = new BufferedReader(ipsr);
        String line;
        while ((line=br.readLine())!=null){
            System.out.println(line);
            string+=line+"\n";
        }
        br.close(); 
    }       
    catch (Exception e){
        System.out.println(e.toString());
    } 
```

有人可以解释一下这段代码是如何工作的吗？我是编程新手，对大部分代码都不熟悉。它不是为了家庭作业——它是我为个人利益而编写的程序。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T02:01:34.077

在你理解了程序做了什么之后（这很重要，这些是任何 Java 程序员的基本概念，希望有人会填写），这是我将做的改进它：

*   根本没有这方面的代码。将文件读入字符串的问题已经解决了。使用[Commons IO](http://commons.apache.org/proper/commons-io//javadocs/api-2.4/index.html)。

*   不要在循环中使用字符串连接。使用字符串生成器。使用您对所需容量（例如文件大小）的最佳猜测来初始化 StringBuilder。

*   创建 Reader 时指定显式字符集。否则，您的程序将无法在不同的计算机上移植。

*   不要先删除换行符，然后再添加它们，除非这确实是您想要的。这可能会更改正在读取的数据（如果原始文件使用不同的换行方案）。

*   不要捕获异常并打印它。让它将调用堆栈向上传播到可以处理它的一段代码。

*   不要将结果字符串初始化为空。如果代码完成，字符串将保存您的数据，如果没有，您需要 null 或异常。空字符串只会使查找错误变得更加困难。最好不要初始化字符串，甚至不要初始化为空。然后你会在这里得到一个很好的编译错误，要求你明确指定字符串在异常情况下应该是什么。

*   将从文件中读取的代码放在它自己的方法中。让它返回一个字符串。您稍后使用该字符串执行的操作与此方法无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:59:09.800

在高层次上，它逐行读取文件，并构建一个由文件中的字符数据组成的字符串*。

* * *

[*以不必要的低效方式；循环中的字符串连接几乎总是应替换为使用 a [`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)。]

# git - 通过 FTP 忽略 git 文件夹

> ID：15490244
> 
> 赞同：1
> 
> 时间：2013-03-19T01:57:58.533
> 
> 标签：git, ftp

我知道可以使用以下方式推送 FTP 代表：

```
git push ftp://host.net/path/to/repo.git/ 
```

然而，我的问题是，是否可以通过 ftp 传输实际的工作文件（甚至是秘书可以理解的“普通”基于 GUI 的 ftp），同时告诉它忽略所有`.git`目录作为一个整体？

重点是，在 git 上工作时，有时我们只需要将工作文件部署到服务器上，而 .git 目录的上传时间比文件本身要多。

我不确定我是在寻找`FTP`命令（忽略 X 文件夹或文件）还是在`.git`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:30:02.747

如果我理解正确，您正在寻找一种方法来导出 git repo 的内容并通过 FTP 将其部署到远程目录，以便传输文件所需的时间最少。

Git 不支持直接导出和部署到 FTP 服务器，但很少有好的脚本可以通过仅上传已更改的文件来帮助您实现所需的内容：

*   [`git-ftp`](https://github.com/ezyang)爱德华 Z. 杨：

    > 一些网络主机只允许您通过 FTP 访问主机空间，但您仍然希望使用 Git 来控制目录内容的版本。您可以在每次更新时上传您网站的完整压缩包，但这很浪费。git-ftp.py 仅上传更改的文件。

*   [`git-ftp`](https://github.com/resmo/git-ftp)作者：勒内·莫泽

    > 我将 git-ftp 用于基于脚本的项目，主要是 PHP。大多数低成本的网络托管公司不提供 SSH 或 git 支持，而只提供 FTP。
    > 
    > 这就是为什么我需要一种简单的方法来部署我的 git 跟踪项目。我想，与其传输整个项目，不如只传输自上次以来更改的文件，git 可以告诉我那些文件。
    > 
    > 即使你在玩不同的分支，git-ftp 也知道哪些文件是不同的。没有普通的 FTP 客户端可以做到这一点。

# c++ - 如何通过引用传递子字符串？

> ID：15490246
> 
> 赞同：7
> 
> 时间：2013-03-19T01:58:06.237
> 
> 标签：c++, algorithm, c++11

我递归地调用一个函数，将一个子字符串作为参数传递，该子字符串总是从当前字符串的开头一直到一个位置。如果我使用 C，我可以将指针传递给字符串的第一个位置，然后传递必要的长度。不过，我想使用 class 来实现相同的结果`string`。是否可以？如果我使用`const`，编译器是否足够聪明，可以自行进行优化？更好的是，有没有办法自己检查编译器是否真的复制了参数或传递了引用？

我的问题是在编写了以下代码后提出的，该代码通过了 poj 上的问题[Alphacode](http://poj.org/problem?id=2033)的测试，一旦有人使用`atoi`而不是`atof`.

```
#include <iostream>
#include <algorithm>
#include <map>
#include <vector>
#include <string>

using namespace std;

map<string, int> cache;

bool valid_character_number(string a) {
    return 0 < stoi(a.substr(a.size() - 2, 2)) && stoi(a.substr(a.size() - 2, 2)) <= 26;
}

bool zero_last_digit(string a) {
    return a[a.size() - 1] == '0';
}
bool zero_before_last_digit(string a) {
    return a[a.size() - 2] == '0';
}

int decodings(string a) {
    if (a.size() == 0)
        return 1;
    if (a.size() == 1) {
        if (zero_last_digit(a))
            return 0;
        else
            return 1;
    }
    if (cache.find(a) != cache.end())
        return cache[a];

    if (zero_last_digit(a) && valid_character_number(a))
        return cache[a] = decodings(a.substr(0, a.size() - 2));
    else if (valid_character_number(a) && !zero_before_last_digit(a))
        return cache[a] = decodings(a.substr(0, a.size() - 1)) + decodings(a.substr(0, a.size() - 2));
    else
        return cache[a] = decodings(a.substr(0, a.size() - 1));
}

int main() {
    string input;
    while (true) {
        cin >> input;
        if (input.size() == 1 && stoi(input) == 0)
            return 0;
        cout << decodings(input) << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T02:01:02.073

您不能`std::string`用于此目的，但您可以轻松创建自己的类，将一对迭代器（开始和结束）保存到另一个字符串或 C 风格的 char* 和大小。使用 C++11（因为您标记了它），您甚至应该能够创建用户定义的文字语法来创建新类型的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-16T07:22:45.003

您可以使用自己的包装类，如下所示：

```
struct RefString
{
    RefString(const std::string & s, int i, int l) : s(s), i(i), l(l) {}

    const char & operator [] (int x) const {
        return s[i+x];
    }

    size_t length() const {
        return l;
    }

    bool operator < (const RefString & s2) const {
        return s.compare(i, l, s2.s, s2.i, s2.l) < 0;
    }

private:
    const std::string & s;
    int i;
    int l;
};

std::ostream & operator << (std::ostream &stream, const RefString & ms) {
    for (int i = 0; i < ms.length(); i++)
        stream << ms[i];
    return stream;
} 
```

并像这样使用它，例如创建`set`唯一的子字符串：

```
std::string s = "hello";
std::set<RefString> st;
for (int i = 0; i < s.length(); i++)
for (int j = i; j < s.length(); j++)
    st.insert(RefString(s, i, j-i+1)); 
```

# c# - BouncyCastle 中的河豚 ECB 模式

> ID：15490247
> 
> 赞同：-1
> 
> 时间：2013-03-19T01:58:08.907
> 
> 标签：c#, encryption, bouncycastle, mode, ecb

这个线程不应该讨论 ECB 模式有多糟糕，我应该改变它，但是 BouncyCastle 并不真正支持这种模式，除了在 Java 中，你可以使用“getInstance”。我正在使用的代码是这样的，它只正确解密了第一个块（0x1000 字节）。

```
BufferedBlockCipher Blowfish = new BufferedBlockCipher(new BlowfishEngine());
KeyParameter r3 = new KeyParameter(Blowfish_Key);
Blowfish.Init(false, r3);
Blowfish.ProcessBytes(pio.GetBuffer(), 0, (int)pio.Length, output, 0); 
```

我想这里的问题是，有没有办法在库中使用 ECB 模式，或者还有其他我可以使用的类吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T22:46:11.687

弄清楚了。我的文件可能已损坏，因为我再次下载它并成功运行。

# verilog - 如果数字有效，如何对数字进行零扩展，否则如何进行 X 扩展？

> ID：15490251
> 
> 赞同：1
> 
> 时间：2013-03-19T01:58:35.773
> 
> 标签：verilog

`x`我有一个可能是（即未知）的 16 位数字。
我想将数字零扩展为 32 位，但如果 MSB 是`x`，那么我希望它被`x`- 扩展而不是零扩展。（这有助于我的模拟。）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T02:39:23.687

除非您使用带符号的值，否则我认为您将需要一个自定义函数。如果您使用有符号值，如果符号位为 X，则 MSB 将在从 16 位值到 32 位值的赋值中进行 X 扩展。但是，如果 MSB（符号位）为 1，则它将被 1 扩展，如果您使用无符号值，这很可能不是您想要的。

这是一个简单的函数来做到这一点。

```
function [31:0] extend(input[15:0] in);
begin
   if (in[15] === 1'bX) begin
      extend = {16'hXXXX, in};
   end else begin
      extend = {16'h0000, in};
   end
end
endfunction 
```

例子：

```
$display("%032b", extend(16'h0000));
$display("%032b", extend(16'hFFFF));
$display("%032b", extend(16'bX000_0000_0000_0000)); 
```

输出：

```
00000000000000000000000000000000
00000000000000001111111111111111
xxxxxxxxxxxxxxxxx000000000000000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T02:46:30.553

如果您的模拟器足够现代以支持 SystemVerilog 语法：

```
module tb;

reg [15:0] a;
reg [31:0] b;

initial begin
    $monitor("a='b%b b='b%b", a, b);
    #5 a= '1; extendo();
    #5 a= '0; extendo();
    #5 a= 'z; extendo();
end

task extendo;
    b[15:0] = a[15:0];
    b[31:16] = (a[15] === 1'bx) ? 'x : '0;
endtask

endmodule 
```

输出：

```
a='bxxxxxxxxxxxxxxxx b='bxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
a='b1111111111111111 b='b00000000000000001111111111111111
a='b0000000000000000 b='b00000000000000000000000000000000
a='bzzzzzzzzzzzzzzzz b='b0000000000000000zzzzzzzzzzzzzzzz 
```

# angularjs - XMLHttpRequest成功时，为什么跨域angularjs $http.post请求失败？

> ID：15490256
> 
> 赞同：7
> 
> 时间：2013-03-19T01:58:57.833
> 
> 标签：angularjs

我正在尝试使用 Angular（版本 1.0.5）webapp 中的应用程序密钥和令牌来锻炼 Trello API。服务器似乎正确配置为处理[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。来自[enable cors的带有](http://enable-cors.org/)[http://test-cors.org](http://test-cors.org)的测试请求按预期工作。

当我在我的一个角度控制器中进行发布请求时：

```
$http.post(url).success(function(data) {
  $scope.server_resp = data;
}); 
```

我得到一个*请求标头字段 Content-Type is not allowed by Access-Control-Allow-Headers*错误。（尽管如下所示，Access-Control-Allow-Origin 设置为“*”）。为什么要添加此标头并且可以将其删除？

## XMLHttpRequest

当我使用原始 XMLHttpRequest 发出相同的请求时，它成功了。以下是 XMLHttpRequest 的标头：

```
Request Method:POST
Status Code:200 OK

Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:0
Host:api.trello.com
Origin:http://192.168.0.125:9000
Referer:http://192.168.0.125:9000/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22

Response
Access-Control-Allow-Methods:GET, PUT, POST, DELETE
Access-Control-Allow-Origin:*
Cache-Control:max-age=0, must-revalidate, no-cache, no-store
Content-Length:563
Content-Type:application/json
Date:Mon, 18 Mar 2013 02:49:37 GMT
Expires:Thu, 01 Jan 1970 00:00:00
X-Powered-By:Express
X-Server-Time:1363574977568 
```

## 角 $http.post

以下是角度发起请求的标头。请注意，浏览器发出了飞行前 OPTIONS 请求：

```
Request Method:OPTIONS
Status Code:200 OK

Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:accept, origin, content-type
Access-Control-Request-Method:POST
Connection:keep-alive
Host:api.trello.com
Origin:http://192.168.0.125:9000
Referer:http://192.168.0.125:9000/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22

Response
Access-Control-Allow-Methods:GET, PUT, POST, DELETE
Access-Control-Allow-Origin:*
Content-Length:0
Content-Type:text/html; charset=utf-8
Date:Mon, 18 Mar 2013 02:51:00 GMT
X-Powered-By:Express 
```

有没有办法配置 Angular 的请求标头以允许上面的 $http.post() 代码工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T09:38:12.790

服务器不接受“内容类型”标头，默认情况下会为 Angular $http POST 请求添加（请参阅[$http doc](http://docs.angularjs.org/api/ng.%24http)）。您可以尝试将其从 $http 配置中删除。在您的控制器中注入 $httpProvider ，然后这可能会起作用：

```
delete $httpProvider.defaults.headers.post['Content-type'] 
```

您可能还必须尝试使用​​“内容类型”，我不确定要使用的情况。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-01T15:33:50.003

将 headers 参数添加到 $http 就可以了。

```
 var config = {
            method: 'POST',
            url: 'your url',
            headers: {
              'Content-Type': undefined
           },
           data: {
              "channel": "#fun-and-game",
              "username": $scope.question.title,
              "text": $scope.question.text,
              "icon_emoji": ":ghost:"
          },
       };

      $http(config).success(function(data) {
         $scope.server_resp = data;
      }).error(function(response) {

      }); 
```

有关更多信息，请查看[angularjs $http 文档](https://docs.angularjs.org/api/ng/service/$http)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-29T16:23:48.447

根据这个 angular [pull request](https://github.com/angular/angular.js/pull/1454)，可以通过删除 X-Requested-With 来使 CORS 工作，这会导致飞行前 OPTIONS 请求：

```
App.config(['$httpProvider', function($httpProvider) {
    delete $httpProvider.defaults.headers.common["X-Requested-With"];
} 
```

请注意，我没有亲自尝试过，但一位同事不得不删除标题以使他的 CORS 请求工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-16T10:51:30.110

这对我有用

```
$http({
      method  : "POST",
      url     : url,
      data    : $.param({key: 'value', key2 : 'value'}),
      headers : { 'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8' }
                }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-03T16:12:38.110

我刚刚遇到了类似的问题，问题是我弄错了网址。我发布到 1/cards/actions/createCard 因为我错过了文档。即使标题等看起来正确，我也遇到了与访问控制相关的错误。发布到 1/cards 创建了一张卡片，这正是我想要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-28T06:18:05.997

为避免此问题，请在服务器端创建一个函数来捕获“OPTIONS”并返回 true。一些事情如下。

```
 /**
     * @url OPTIONS /
     */
    public function options()
    {
        return;
    } 
```

# css - 当相邻的 div 完成调整大小时，如何调整一个 div 的大小？

> ID：15490257
> 
> 赞同：1
> 
> 时间：2013-03-19T01:59:01.687
> 
> 标签：css, fluid-layout

我正在尝试制作一个流体网格网站，现在我面临一个似乎无法仅使用 css 解决的问题。显然我做错了什么，但我找不到什么。

事情是这样的：我有一列（div：left）和一个body（div：right）内嵌显示。在第一阶段，左边的 div 宽度为 180，右边的 div 正在增长，直到达到 640 像素（如 youtube）。在第二阶段，我想让列从 120 像素增长到 150 像素，但是当列增长时，即使有足够的空间，div 也会被向下推。我认为这与我一直使用的边距技术有关，但我找不到它，并且不知道我可以使用的任何替代方案，因为我试图在不使用 java 的情况下做到这一点。

这是我的jsfiddle：它将清楚地显示问题：http: [//jsfiddle.net/tomvisser/WcbYL/embedded/result/](http://jsfiddle.net/tomvisser/WcbYL/embedded/result/)

我很高兴能得到所有帮助。

提前致谢。

```
<body>
<div class="gridContainer clearfix">
  <div id="center">
    <div id="left">This is the content for Layout Div Tag "left"</div>
    <div id="right">This is the content for Layout Div Tag "right"</div>
  </div>
</div>
</body> 
```

这是CSS：

```
#left {
    float: left;
    height:400px;
    width: 150px;
    display:inline;
    background-color:#F00;
}

#right {
    margin-left:150px;
    background-color: #6F0 ;
    height:400px;
}

@media only screen and (min-width: 650px) {
.gridContainer {}

#right {
    margin-left:0px;
    width:500px;
    float:right;
    display:inline;
}
#left {
    margin-left:0px;
    float: right;
    width:100%;
    margin-right:500px; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:12:15.190

嗨，我尝试了您的代码并为您找到了解决方案。希望它对您有所帮助。这里我假设页面的总宽度为 1024 像素。

**HTML 代码**

```
<div class="gridContainer clearfix">
  <div id="center">
    <div id="right">This is the content for Layout Div Tag "right"</div>
    <div id="left">This is the content for Layout Div Tag "left"</div>
  </div>
</div> 
```

**CSS**

```
<style type="text/css" >
#left {
    height:400px;
    background-color:#F00;
    width:512px;
}
#right {
    background-color: #6F0 ;
    height:400px;
    float:right;
    width:512px;
}
</style> 
```

在这里，我给每个 div 赋予宽度 512px，因为我假设页面的总宽度是 1024px。如果你想将左边的宽度增加 12 px 意味着 512px + 12px = 524px 那么你需要从 div 右边的宽度减少 12px，因为宽度不能大于页面的总宽度，即 1024 像素。减小后它将变为 500 像素，再次变为 524 像素 + 500 像素 = 1024 像素。在这种情况下，您的右 div 不会向下推。希望您能理解并为您工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:18:17.020

是的，这是把它压低的边距。不知道你到底在问什么，但我可以打赌你想给 2 div`max-width`属性。

因此，对于第 2 步（媒体查询？），删除边距并尝试执行以下操作：

`max-width: 180px;`

对于左列。

这是我在您的媒体查询块中编辑的代码：

```
#right {
    margin-left:0px;
    width:500px;
    float:right;
    display:inline;
}
#left {
    margin-left:0px;
    float: right;
    max-width:180px;
} 
```

虽然你是故意让它们漂浮的吗？

# security - REST Web 服务身份验证令牌实现

> ID：15490265
> 
> 赞同：21
> 
> 时间：2013-03-19T01:59:20.430
> 
> 标签：security, rest, authentication, token

我正在使用 C# 实现一个 REST Web 服务，它将作为云服务托管在 Azure 上。由于它是 REST 服务，因此它是无状态的，因此没有 cookie 或会话状态。

Web 服务只能通过 HTTPS 访问（证书由 StartSSL.com 提供）。

用户成功登录服务后，他们将获得一个安全令牌。此令牌将在未来的通信中提供身份验证。

令牌将包含客户端的时间戳、用户 ID 和 IP 地址。

所有通信都只会通过 HTTPS 进行，所以我不担心令牌被拦截并用于重放攻击；无论如何，令牌都会过期。

由于这是一项面向公众的服务，但我担心有人可以注册该服务，登录然后修改他们收到的令牌以访问其他用户的帐户。

我想知道如何最好地保护令牌的内容并验证它没有被篡改。

我计划执行以下操作来保护令牌：

客户端成功登录服务，服务执行以下操作：

1.  生成一个随机值并使用 SHA256 对其进行 1000 次散列。
2.  从私钥 + 散列随机值生成一次性会话密钥。
3.  使用 SHA256 将会话密钥散列 1000 次，然后使用它来加密令牌
4.  使用私钥使用 RSA 对加密令牌进行签名。
5.  在未加密的 JSON 包中将加密的令牌 + 签名 + 散列的随机值发送给客户端。

当客户端调用服务时，它会将未加密的 JSON 包中的加密令牌和签名发送到服务。该服务将

1.  从私钥 + 散列随机值重新创建会话密钥
2.  使用私钥验证签名
3.  使用散列会话密钥解密令牌
4.  检查令牌是否未过期
5.  继续请求的操作...

我对加密一无所知，所以我有一些问题：

1.  这是足够的还是矫枉过正？
2.  我读到要检测篡改，我应该在令牌中包含一个 HMAC。由于我使用私钥签名，我还需要 HMAC 吗？
3.  我应该使用 Rijndael 而不是 RSA 吗？
4.  如果首选 Rijndael，是否需要生成的 IV 才能解密？即我可以把它扔掉还是需要将加密令牌发送给它？例如加密令牌 + HMAC + IV + 散列随机值。

由于所有通信都通过 HTTPS 进行，因此未加密的 JSON 包在到达客户端之前并不是真正未加密的。

此外，我可能想稍后在 PHP 中重新实现该服务，因此这一切都需要在 PHP 中实现。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-19T02:43:53.117

你真的想太多了。说实话，最好的代币安全性依赖于随机性，或者更准确地说是*不可预测性*。最好的令牌是完全随机的。你是对的，担心用户会修改他/她的令牌并使用它来访问其他人的帐户。这是一种称为“会话窃取”的常见攻击。当令牌在服务器端随机生成并过期时，这种攻击几乎是不可能的。使用 IP 和/或时间戳等用户信息是不好的做法，因为它提高了可预测性。我在大学进行了一次攻击，成功地猜出了基于服务器时间戳的活动令牌（以微秒为单位）。该应用程序的作者认为微秒的变化速度足够快，以至于无法预测，

您应该知道，当用户在代理服务器后面时，代理有时会以纯文本形式查看他们的 SSL 请求（出于安全原因，许多代理会执行深度数据包检查）。出于这个原因，最好让会话过期。如果你不这样做，你的用户将很容易受到这样的攻击，也可能是 XSS 和 CSRF。

只要提供合理的密钥长度，RSA 或 Rijndael 就足够了。此外，您应该使用带有令牌的 HMAC 来防止篡改，即使您正在对其进行签名。从理论上讲，这将是多余的，因为您正在使用私钥签名。但是，HMAC 已经过很好的测试，您对签名机制的实现可能存在缺陷。因此，最好使用 HMAC。您会惊讶于有多少“自己动手”的安全实现存在导致它们妥协的缺陷。

你听起来很精通安全。保持良好的工作！在这个世界上，我们需要更多具有安全意识的开发人员。

编辑：

在令牌中包含时间戳/用户 ID 被认为是安全的，只要它们使用只有服务器拥有的强*对称*密钥（如 AES、Blowfish 等）进行加密，并且只要令牌包含防篡改哈希使用它，例如 HMAC，*它使用密钥和用户 ID/时间戳进行加密*。散列保证完整性，加密保证机密性。

如果您没有在加密中包含 HMAC（或其他哈希），那么用户可能会篡改加密的令牌并将其解密为有效的东西。我对服务器进行了攻击，其中用户 ID 和时间戳被加密并用作没有哈希的令牌。通过更改字符串中的一个随机字符，我可以将我的用户 ID 从 58762 更改为 58531。虽然我无法选择“新”用户 ID，但我能够访问其他人的帐户（这是在学术界，作为课程的一部分）。

另一种方法是使用完全随机的令牌值，并将其在服务器端映射到存储的用户 ID/时间戳（它保留在服务器端，因此不受客户端控制）。这需要更多的内存和处理能力，但更安全。这是您必须根据具体情况做出的决定。

至于从 IV 和其他密钥重用/派生密钥，这通常是可以的，只要这些密钥仅在短时间内有效。从数学上讲，有人不太可能打破它们。然而这是可能的。如果您想走偏执路线（我通常这样做），请随机生成所有新密钥。

# java - 在 JSON 中存储嵌套元素的数据结构

> ID：15490267
> 
> 赞同：1
> 
> 时间：2013-03-19T01:59:28.260
> 
> 标签：java, json, data-modeling

我正在用 Java 建模类来存储 JSON ，用于特定的 JSON

```
 "id":1,
  "firstName":"sample",
  "lastName":"person",
   "Books":{
    "bookName":"gone with the wind"
    "isbn":  12345
    } 
```

我创建了一个`class person`with `int id , String firstName`etc... 存储 bookName 的最佳方法是什么，`class Books`用一个`String bookName`and创建一个`int isbn`，我将如何在 person 类中表示书籍，作为一个数组？因为书籍总是只有一个值，有没有更好的方法来表示它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:05:34.170

对于 json 序列化/反序列化，我建议使用 jackson 库。这是我的代码，它在我的计算机上运行良好！

我将 json 存储在名为 json.data 的文件中，如下所示：

* * *

```
{"id":1,
 "firstName":"sample",
 "lastName":"person",
 "books":[{"bookName":"gone with the wind","isbn":12345}]
} 
```

* * *

## 和代码，我省略了getter/setter

```
public class Book
{
    private String bookName;
    private int isbn;

}

public class BookWriter
{
    private String id;
    private String firstName;
    private String lastName;
    private Book[] books;
}

public class JSONTest
{
    public static void main(String[] args)
    {
        try
        {
            ObjectMapper mapper = new ObjectMapper();
            BookWriter writer=(BookWriter)mapper.readValue(new File("json.data"), BookWriter.class);
            for(Book book:writer.getBooks())
            {
            System.out.println(book.getBookName()+","+book.getIsbn());
            }
        } catch (Exception e)
        {
            e.printStackTrace();
        }
    }

} 
```

# java - 手动展开/折叠所有树项内存成本 javafx 2.2

> ID：15490268
> 
> 赞同：2
> 
> 时间：2013-03-19T01:59:31.833
> 
> 标签：java, javafx, collapse, expand, treeviewitem

我正在使用 Netbeans 7.2 开发 JavaFX 2.2 应用程序。我正在使用树视图，并且我扩展了 TreeCell 以向每个 TreeItem 提供一个上下文菜单，该菜单带有一个具有“Colpase All”功能的 MenuItem。树视图的最大深度级别为 4。当用户右键单击级别 2 的 TreeItem 并单击“全部折叠”菜单项时，我想让所有级别 3 的 TreeItem 折叠（setExpanded（false））。您可以在下面看到我正在使用的代码。我的问题是此操作的内存和 CPU 成本。我将 250 个 TreeItems 插入到第 3 级。collapse all 操作的成本是每次collapseAll 点击时大约 200MB 的内存，并且花费了大约 2s 的时间！我的开发计算机的 CPU 是 Intel i5 (3.3GHz)，我有 8GB 内存。这些硬件成本是正常的还是我在代码中做错了什么？我是否使用错误的方式来折叠它们？

此类管理 TreeView。从数据库加载数据，重新加载它们，知道选定的 TreeItem 并展开/折叠选定的子 TreeItem。

```
public final class TargetTree extends SqlConnectionManager {

    private TreeView tree;
    private TreeItem selectedItem;

    private TargetTree() {
        super();
        this.tree = null;
        this.selectedItem = null;
    }

    private TargetTree(TreeView tree) {
        super();
        this.tree = tree;
        this.selectedItem = null;
    }

    public static TargetTree construct(TreeView tree) {
        if (tree == null) {
            return null;
        }

        TargetTree targetTree = new TargetTree(tree);
        targetTree.load();
        return targetTree;
    }

    public void reload() {
        // Clear current tree.
        if (tree.getRoot() != null) {
            for (int i = 0; i < tree.getRoot().getChildren().size(); i++) {
                tree.getRoot().getChildren().clear();
            }
            tree.setRoot(null);
        }
        this.load();
    }

    public void prune() {
        //TODO
    }

    private void load() {
        // New root Item.
        final TreeItem<Object> treeRoot = new TreeItem<>((Object) "Root");
        treeRoot.setExpanded(true);

        // This integers help to find when to build a new department/section/measure.
        int lastDepartmentId = -1;
        int lastSectionId = -1;
        int lastMeasureId = -1;
        int lastTargetId = -1;

        //The temp treeitems.
        TreeItem<Object> departmentTreeItem = null;
        TreeItem<Object> sectionTreeItem = null;
        TreeItem<Object> measureTreeItem = null;
        TreeItem<Object> targetTreeItem = null;

        // Get the new TreeItems from the database.
        super.errorMessage = "";
        try {
            // Establishing connection with db.
            super.openConnection();

            // Query to be executed. Selects everything from the database.
            preparedStmt = connection.prepareStatement(
                    "SELECT.....ORDER BY....;");
            resultSet = preparedStmt.executeQuery();

            while (resultSet.next()) {
                // Department Creation.
                if (lastDepartmentId != resultSet.getInt("departmentId")) {
                    final Department department = Department.initEmpty();
                    department.setId(resultSet.getInt("departmentId"));
                    department.setName(resultSet.getString("departmentName"));

                    // Create the treeitem for this department.
                    departmentTreeItem = new TreeItem<>((Object) department);
                    departmentTreeItem.setExpanded(true);
                    treeRoot.getChildren().add(departmentTreeItem);

                    // Reset the children ids to ensure that they will be recreated.
                    lastDepartmentId = resultSet.getInt("departmentId");
                    lastSectionId = -1;
                    lastMeasureId = -1;
                    lastTargetId = -1;
                }

                // Section Creation.
                if (lastSectionId != resultSet.getInt("sectionId")) {
                    final Section section = Section.initEmpty();
                    section.setId(resultSet.getInt("sectionId"));
                    section.setName(resultSet.getString("sectionName"));

                    // Create the treeitem for this section.
                    sectionTreeItem = new TreeItem<>((Object) section);
                    sectionTreeItem.setExpanded(true);
                    departmentTreeItem.getChildren().add(sectionTreeItem);

                    // Reset the children ids to ensure that they will be recreated.
                    lastSectionId = resultSet.getInt("sectionId");
                    lastMeasureId = -1;
                    lastTargetId = -1;
                }

                // Measure Creation.
                if (lastMeasureId != resultSet.getInt("measureId")) {
                    final Measure measure = Measure.initEmpty();
                    measure.setId(resultSet.getInt("measureId"));
                    measure.setLastname(resultSet.getString("measureLastname"));
                    measure.setFirstname(resultSet.getString("measureFirstName"));

                    // Create the treeitem for this measure.
                    measureTreeItem = new TreeItem<>((Object) measure);
                    measureTreeItem.setExpanded(true);
                    sectionTreeItem.getChildren().add(measureTreeItem );

                    // Reset the children ids to ensure that they will be recreated.
                    lastMeasureId = resultSet.getInt("measureId");
                    lastTargetId = -1;
                }

                // Target Creation.
                if (lastTargetId != resultSet.getInt("targetId")) {
                    final Target target = Target.initEmpty();
                    target.setId(resultSet.getInt("targetId"));
                    target.setText(resultSet.getString("targetText"));

                    // Create the treeitem for this target.
                    targetTreeItem = new TreeItem<>((Object) target);
                    targetTreeItem.setExpanded(false);
                    measureTreeItem.getChildren().add(targetTreeItem);

                    // Reset the children ids to ensure that they will be recreated.
                    lastTargetId = resultSet.getInt("targetId");
                }
            }

            closeAll();
        } catch (SQLException ex) {
            super.errorMessage = ex.getMessage();
        }

        tree.setRoot(treeRoot);
        final TargetTree targetTree = this;
        tree.setCellFactory(new Callback<TreeView<Object>, TreeCell<Object>>() {
            @Override
            public TreeCell<Object> call(TreeView<Object> p) {
                return new TargetTreeCell(targetTree);
            }
        });

        // Select a Tree Item.
        tree.getSelectionModel().selectedItemProperty().addListener(new ChangeListener() {
            @Override
            public void changed(ObservableValue observable, Object oldValue, Object newValue) {
                selectedItem = (TreeItem) newValue;
            }
        });
    }

    public void collapseChildren() {
        Thread thread = new Thread(new Task<Void>() {
            @Override
            protected Void call() throws Exception {
                Platform.runLater(new Runnable() {
                    @Override
                    public void run() {
                        for (int i = 0; i < selectedItem.getChildren().size(); i++) {
                            TreeItem<Object> current = (TreeItem<Object>) selectedItem.getChildren().get(i);
                            if (!current.isLeaf()) {
                                current.setExpanded(false);
                            }
                            current = null;
                        }
                        selectedItem.setExpanded(false);
                        System.gc();
                    }
                });
                return null;
            }
        });
        thread.setDaemon(true);
        thread.start();
    }

    public void expandChildren() {
        Thread thread = new Thread(new Task<Void>() {
            @Override
            protected Void call() throws Exception {
                Platform.runLater(new Runnable() {
                    @Override
                    public void run() {
                        for (int i = 0; i < selectedItem.getChildren().size(); i++) {
                            TreeItem<Object> current = (TreeItem<Object>) selectedItem.getChildren().get(i);
                            if (!current.isLeaf()) {
                                current.setExpanded(true);
                            }
                            current = null;
                        }
                        selectedItem.setExpanded(true);
                        System.gc();
                    }
                });
                return null;
            }
        });
        thread.setDaemon(true);
        thread.start();
    }
} 
```

下面是自定义 TreeCell 类。

```
public class TargetTreeCell extends TreeCell<Object> {

    private TargetTree targetTree;

    public TargetTreeCell(TargetTree targetTree) {
        super();
        this.targetTree = targetTree;
    }

    @Override
    public void updateItem(Object item, boolean empty) {
        super.updateItem(item, empty);

        if (item != null) {
            if (item instanceof Target) {
                initTarget(item);
            } else if (item instanceof Measure) {
                initMeasure(item);
            } else if (item instanceof Section) {
                initSection(item);
            } else if (item instanceof Department) {
                initDepartment(item);
            } else if (item instanceof String) {
                initRoot(item);
            }
        }
    }

    ///<editor-fold defaultstate="collapsed" desc="Tree Item Initialization">
    private void initRoot(Object item) {
        // Create Menu Items.
        MenuItem expandAllMenuItems = new MenuItem("Expand All");
        MenuItem collapseAllMenuItems = new MenuItem("Collapse All");

        // Event Haddlers for each Menu Items.
        expandAllMenuItems.setOnAction(new EventHandler() {
            @Override
            public void handle(Event event) {
            }
        });
        collapseAllMenuItems.setOnAction(new EventHandler() {
            @Override
            public void handle(Event event) {
                targetTree.collapseChildren();
            }
        });

        // Create Menu and add Menu Items.
        ContextMenu contextMenu = new ContextMenu();
        contextMenu.getItems().addAll(expandAllMenuItems, collapseAllMenuItems);

        //Init Root Tree Item.
        String root = (String) item;
        setText(root);
        setContextMenu(contextMenu);
    }

    private void initDepartment(Object item) {
        // Create Menu Items.
        MenuItem expandAllMenuItems = new MenuItem("Expand All");
        MenuItem collapseAllMenuItems = new MenuItem("Collapse All");

        // Event Haddlers for each Menu Items.
        expandAllMenuItems.setOnAction(new EventHandler() {
            @Override
            public void handle(Event event) {
                targetTree.expandChildren();
            }
        });
        collapseAllMenuItems.setOnAction(new EventHandler() {
            @Override
            public void handle(Event event) {
                targetTree.collapseChildren();
            }
        });

        // Create Menu and add Menu Items.
        ContextMenu contextMenu = new ContextMenu();
        contextMenu.getItems().addAll(expandAllMenuItems, collapseAllMenuItems);

        //Init Department Tree Item.
        Department department = (Department) item;
        setText(department.getName());
        setContextMenu(contextMenu);
    }

    private void initSection(Object item) {
        // Create Menu Items.
        MenuItem expandAllMenuItems = new MenuItem("Expand All");
        MenuItem collapseAllMenuItems = new MenuItem("Collapse All");

        // Event Haddlers for each Menu Items.
        expandAllMenuItems.setOnAction(new EventHandler() {
            @Override
            public void handle(Event event) {
                targetTree.expandChildren();
            }
        });
        collapseAllMenuItems.setOnAction(new EventHandler() {
            @Override
            public void handle(Event event) {
                targetTree.collapseChildren();
            }
        });

        // Create Menu and add Menu Items.
        ContextMenu contextMenu = new ContextMenu();
        contextMenu.getItems().addAll(expandAllMenuItems, collapseAllMenuItems);

        //Init Section Tree Item.
        Section section = (Section) item;
        setText(section.getName());
        setContextMenu(contextMenu);
    }

    private void initMeasure(Object item) {
        // Create Menu Items.
        MenuItem expandAllMenuItems = new MenuItem("Expand");
        MenuItem collapseAllMenuItems = new MenuItem("Collapse");

        // Event Haddlers for each Menu Items.
        expandAllMenuItems.setOnAction(new EventHandler() {
            @Override
            public void handle(Event event) {
                targetTree.expandChildren();
            }
        });
        collapseAllMenuItems.setOnAction(new EventHandler() {
            @Override
            public void handle(Event event) {
                targetTree.collapseChildren();
            }
        });

        // Create Menu and add Menu Items.
        ContextMenu contextMenu = new ContextMenu();
        contextMenu.getItems().addAll(expandAllMenuItems, collapseAllMenuItems);

        //Init Section Tree Item.
        Measure measure = (Measure) item;
        setText(measure.getLastname() + " " + measure.getFirstname());
        setContextMenu(contextMenu);
    }

    private void initTarget(Object item) {
        //Init Section Tree Item.
        Target target = (Target) item;
        setText(target.getText());
    }
    ///</editor-fold>
} 
```

如果我有复制粘贴错误，请原谅我..我编译没有问题。代码运行没有错误。我的问题出在头等舱的 expandChildren() 和 collapseChildren() 方法上。在以前的版本中，我没有使用线程，而是使用递归来使所有子 TreeItems（及其子 TreeItems..）崩溃，但内存成本更高。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:12:41.383

我找到了我的问题的答案！我将用一个例子来解释它。我用 100 个 TreeItem 初始化了一个 TreeView，结果是一个具有 3 个级别的树结构。在屏幕上，树只显示了其中的 45 个。要查看其他我必须向上/向下滚动或展开折叠的 TreeItems。在每种情况下，都会调用 updateItem 方法来构造新的 TreeItem，这些 TreeItem 将出现在屏幕树上的可见部分，因此它们都出现在屏幕中。

当我折叠展开的 TreeItem 时，updateItem 方法将运行。这就是内存和cpu成本的原因！我不得不折叠〜200个TreeItems，它们的父级扩展了。

我用一种非常简单的方法解决了我的问题。就在我开始折叠所有内容之前，我折叠了父 TreeItem。因此，我首先折叠了父级，然后是所有子级。当子项从源代码（setExpanded(false)）中一一折叠时，updateItem 方法没有运行，因为它们的父项和子项 TreeItems 都不存在于屏幕中。

通过这种方式，我节省了很多内存和 CPU 时间，而这些时间我就像一个假人一样度过。

# html - 将表单字段数据发布/执行到浏览器地址栏

> ID：15490269
> 
> 赞同：1
> 
> 时间：2013-03-19T01:59:38.617
> 
> 标签：html, forms, url

我不是 php 方面的专家。我想要做的是向我的网站添加 UPS 跟踪功能。为了检查 UPS 的跟踪信息，所有需要的是跟踪 url 末尾的跟踪号，如下所示。

[http://wwwapps.ups.com/WebTracking/track?track=yes&trackNums=1ZXXXXXXXXXXXXXXXX](http://wwwapps.ups.com/WebTracking/track?track=yes&trackNums=1ZXXXXXXXXXXXXXXXX)

如何在我的网站上添加一个字段，以便用户输入跟踪号：1ZXXXXXXXXXXXXXXXX，然后单击一个按钮，该按钮将打开一个带有整个 URL 的新窗口或标签？

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:04:31.540

trackNums 是一个 GET 变量。您可以使用 GET 表单。

```
<form method="get" action="http://wwwapps.ups.com/WebTracking/track" target="_blank">
    <input type="hidden" name="track" value="yes" />
    <label for="trackNums">Tracking #</label><input type="text" id="trackNums" name="trackNums" value="" />
    <input type="submit" value="Track" />
</form> 
```

要将用户留在您的网站上，但在新选项卡或窗口中打开此网站，请将`target`属性设置为`_blank`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T02:05:17.473

您可以完全在客户端执行此操作：

```
<form action="http://wwwapps.ups.com/WebTracking/track" method="GET" target="_blank">
    <input type="hidden" name="track" value="yes"/>
    <input name="trackNums" />
    <input type="submit" />
</form> 
```

在`target="_blank"`新窗口/标签中打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T02:05:27.020

你用 PHP 标记了它，但没有必要使用 PHP。这可以在 JavaScript 中完成。JavaScript 函数是：

```
window.location.href = "http://wwwapps.ups.com/WebTracking/track?track=yes&trackNums="+trackingnumber; 
```

现在，关键是获取跟踪号。这将在数​​据库的一个字段中。假设这是该字段：

```
<input type='text' id='trnum'> 
```

您可以通过以下方式获得价值：

```
var trackingnumber=document.getElementById('trnum').value; 
```

这就是你所需要的。只需调用一个使用跟踪号输入字段中的值更改 window.location.href 的函数。

# python - n == 7 给我一个缩进错误

> ID：15490271
> 
> 赞同：1
> 
> 时间：2013-03-19T02:00:05.180
> 
> 标签：python

```
# Rate Our Love !! 

def love(n):
    if n < 0 : 
        print "Why would it be negative?!" 
    elif n == 0 : 
        print "well that is just hurtful" 
    elif n == 1 :
        print "I REALLY love you" 
    elif n == 2 : 
        print "You make me smile at least once, each and every day"
    elif n == 3 : 
        print"you wouldn't believe how annoying it was to get this program to run properly! but it was worth it"
    elif n == 4 : 
        print "let's " + "shoot a little higher than that"
    elif n == 5 : 
        print "you're unforgettable, that's what you are" 
    elif n == 6 :
        print "always have, always '____' *hint* fill in the blank " 
    elif n == 7 :
        print "i could never leave you, I love you too much" 
    elif n == 8 : 
        print "an 8/10 is still only a B, maybe I'm not trying hard enough" 
    elif n == 9 : 
        print " well, I'm not perfect yet, could have seen that one coming. Guess I just have to keep trying :)" 
    elif n == 10 : 
        print " i think you're exaggerating, i really am not that good yet"     
    else:
        print "I still really hope that we could get married someday." 
```

如果它的格式与此定义的其余部分一样，为什么我会不断收到 n== 7 的缩进错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T02:01:15.967

尝试运行`python -t`

如果您混合使用空格和制表符，这将警告您，使其看起来像您具有相同的缩进级别，而实际上您可能没有。

从手册页：

> **-t**
> 当源文件混合使用制表符和空格进行缩进时发出警告，这种方式使其依赖于以空格表示的制表符的价值。两次给出选项时会发出错误。

# ruby-on-rails - 全新 Heroku CLI 安装身份验证失败

> ID：15490272
> 
> 赞同：3
> 
> 时间：2013-03-19T02:00:13.377
> 
> 标签：ruby-on-rails, ruby, heroku, command-line-interface, heroku-toolbelt

这个问题可能被认为是重复的：[Unable to use heroku gem cli after password changes](https://stackoverflow.com/questions/10628149/unable-to-use-heroku-gem-cli-after-password-changes)，但事实并非如此。

就我而言，我有最新的 Mac OS X 10.8.3 并且我已经安装了全新的 Heroku 工具带。我尝试的第一件事是通过发出这个来进行身份验证：

```
heroku login 
```

我被要求提供我输入的 Heroku 凭据（很多次），但我收到“身份验证失败”消息。

我已经尝试使用我的凭据从不同的浏览器多次登录 Heroku 网站 - 一切正常，但我无法使用 Heroku CLI 进行身份验证。

![在此处输入图像描述](../Images/ce36a80ab32c9e0e836c6d200d8423c9.png)

我没有 ~/.netrc 文件，我的 Mac 上没有任何花哨的防火墙软件。我可能做错了什么？

谢谢，亚历克斯。

**更新 2013 年 3 月 18 日晚上 9 点山：**

这是 Heroku 问题，他们正在调查： ![通过 CLI 登录 Heroku 已损坏](../Images/868685b1e32acc907db04b9a29d8691f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:11:35.897

Heroku 工程师已经修复了它，我能够进行身份验证。谢谢你，赫罗库！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:10:26.110

听起来可能是 SSH 密钥问题。

这是解决它的好指南。

[https://devcenter.heroku.com/articles/keys](https://devcenter.heroku.com/articles/keys)

# xml - 复杂属性的 XSL 转换

> ID：15490273
> 
> 赞同：0
> 
> 时间：2013-03-19T02:00:17.453
> 
> 标签：xml, xslt, complexity-theory, xslt-2.0

我是 XSLT 的新手。我有如下 XML 消息：

```
<Root>
<Payload>
    <SendEmail>
        <customerID>123123</customerID>
        <subscriberID>123123</subscriberID>         
        <MessageDetails>
            <AttributeList>
                <Attribute Name="CcEmailAddress">abc@abc.com</Attribute>
                <Attribute Name="BcccEmailAddress">abc@abc.com</Attribute>
                <Attribute Name="SenderEmailAddress">abc@abc.com</Attribute>
                <Attribute Name="SenderMobileNo">abc@abc.com</Attribute>
                <Content  Name="MobileNo">abc@abc.com</Content>
                <Content  Value="TxnNO">abc@abc.com</Content>
                <ERCo   ercvalue="ERCNO">abc@abc.com</ERCo>
                <Attribute Name="OrderHeader"><![CDATA[" and ends with "]]></Attribute>         
            </AttributeList>
        </MessageDetails>
        <MessageDetails>
            <AttributeList>
                <Attribute Name="CcEmailAddress">abc@abc.com</Attribute>
                <Attribute Name="BcccEmailAddress">abc@abc.com</Attribute>
                <Attribute Name="SenderEmailAddress">abc@abc.com</Attribute>
                <Attribute Name="SenderMobileNo">abc@abc.com</Attribute>
                <Content  Name="MobileNo">abc@abc.com</Content>
                <Content  Value="TxnNO">abc@abc.com</Content>
                <ERCo   ercvalue="ERCNO">abc@abc.com</ERCo>
                <Attribute Name="OrderHeader"><![CDATA[" and ends with "]]></Attribute>         
            </AttributeList>
        </MessageDetails>
    </SendEmail>
    </Payload>
</Root> 
```

以下是我的要求和问题：

1.  在 AttributeList 标记中，我必须查找具有特定值（例如 CcEmailAddress ）的属性“名称”，然后将相应的字段值（实际电子邮件 ID）映射到我的目标标记。我试过 //[@Name='CcEmailAddress'] 因为它出现在我的输入中一次，所以我决定遍历名称为 Name 和值为 CcEmailAddress 的所有属性。但它似乎没有工作。

2.  我如何确保我的代码选择了特定的事件？在我的情况下 Message details 重复 n-times 。如果我在 for-each 中使用选择，它只会获取第一个出现的值。当循环在第二个“MessageDetails”上时，我想获取其中的值。我如何做到这一点？

3.  在 AttributeList 中，我持有 "Attribute" 元素和 n-others 。如果我想搜索“内容”元素并找到属性“名称”=MobileNo 的值（MobileNo 可以出现在任何标签下，但我只想要重复的内容下的东西），我该怎么做？

非常感谢你的帮助 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:16:32.977

1.  我认为这里最好的选择是`//Attribute[@Name = 'CcEmailAddress']`或者包含`Attribute[@Name = 'CcEmailAddress']`取决于上下文节点的相对路径。

2.  您可以使用相对 XPath。如果上下文节点是 MessageDetails，那么可以使用路径`AttributeList/Attribute[@Name = 'CcEmailAddress']`

3.  与上述类似，如果您只想考虑`Content`元素值，则可以使用包含`Content[@Name = 'MobileNo']`. 同样，由于您正在迭代`MessageDetails`，这可能是`AttributeList/Content[@Name = 'MobileNo']`

# ios - VM Tracker 显示较大的 Dirty Size

> ID：15490280
> 
> 赞同：5
> 
> 时间：2013-03-19T02:01:11.280
> 
> 标签：ios, objective-c, memory-management, instruments

我的应用程序有一部分在其中同时执行操作。它们包括初始化许多 CALayer 并将它们渲染为位图。

不幸的是，在这些操作期间（在 iphone 4 上完成每个操作大约需要 2 秒），VM Tracker 指示的 Dirty Size 飙升至 ~120MB。分配飙升至〜12MB（不累积）据我了解，脏大小是无法释放的内存。很多时候，我的应用程序和后台的所有其他应用程序都会被杀死。

```
Incident Identifier: 7E6CBE04-D965-470D-A532-ADBA007F3433
CrashReporter Key:   bf1c73769925cbff86345a576ae1e576728e5a11
Hardware Model:      iPhone3,1
OS Version:          iPhone OS 5.1.1 (9B206)
Kernel Version:      Darwin Kernel Version 11.0.0: Sun Apr  8 21:51:26 PDT 2012; root:xnu-

1878.11.10~1/RELEASE_ARM_S5L8930X
Date:                2013-03-18 19:44:51 +0800
Time since snapshot: 38 ms

Free pages:        1209
Active pages:      3216
Inactive pages:    1766
Throttled pages:   106500
Purgeable pages:   0
Wired pages:       16245
Largest process:   Deja Dev

Processes
         Name                 UUID                    Count resident pages
            geod <976e1080853233b1856b13cbd81fdcc3>     338
        LinkedIn <24325ddfeed33d4fb643030edcb12548>    6666 (jettisoned)
    Music~iphone <a3a7a86202c93a6ebc65b8e149324218>     935
        WhatsApp <a24567991f613aaebf6837379bbf3904>    2509
      MobileMail <eed7992f4c1d3050a7fb5d04f1534030>     945
         Console <9925a5bd367a7697038ca5a581d6ebdf>     926 (jettisoned)
        Test Dev <c9b1db19bcf63a71a048031ed3e9a3f8>   81683 (active)
     MobilePhone <8f3f3e982d9235acbff1e33881b0eb13>     867
     debugserver <2408bf4540f63c55b656243d522df7b2>      92
        networkd <80ba40030462385085b5b7e47601d48d>     158
         notifyd <f6a9aa19d33c3962aad3a77571017958>     234
      aosnotifyd <8cf4ef51f0c635dc920be1d4ad81b322>     438
        BTServer <31e82dfa7ccd364fb8fcc650f6194790>     275
CommCenterClassi <041d4491826e3c6b911943eddf6aaac9>     722
     SpringBoard <c74dc89dec1c3392b3f7ac891869644a>    5062 (active)
      aggregated <a12fa71e6997362c83e0c23d8b4eb5b7>     383
            apsd <e7a29f2034083510b5439c0fb5de7ef1>     530
         configd <ee72b01d85c33a24b3548fa40fbe519c>     465
     dataaccessd <473ff40f3bfd3f71b5e3b4335b2011ee>     871
   fairplayd.N90 <ba38f6bb2c993377a221350ad32a419b>     169
       fseventsd <914b28fa8f8a362fabcc47294380c81c>     331
            iapd <0a747292a113307abb17216274976be5>     323
         imagent <9c3a4f75d1303349a53fc6555ea25cd7>     536
       locationd <cf31b0cddd2d3791a2bfcd6033c99045>    1197
   mDNSResponder <86ccd4633a6c3c7caf44f51ce4aca96d>     201
    mediaremoted <327f00bfc10b3820b4a74b9666b0c758>     257
    mediaserverd <f03b746f09293fd39a6079c135e7ed00>    1351
       lockdownd <b06de06b9f6939d3afc607b968841ab9>     279
          powerd <133b7397f5603cf8bef209d4172d6c39>     173
         syslogd <7153b590e0353520a19b74a14654eaaa>     178
           wifid <3001cd0a61fe357d95f170247e5458f5>     319
  UserEventAgent <dc32e6824fd33bf189b266102751314f>     409
         launchd <5fec01c378a030a8bd23062689abb07f>     126

**End** 
```

仔细观察，脏内存主要由 Image IO 和 Core Animation 页面组成。由数百到数千页组成的多个条目。Image IO 和 Core Animation 到底是做什么的？以及如何减少脏内存？

编辑：尝试在串行队列上执行此操作，但脏内存大小没有改善

另一个问题。脏内存和分配有多大？

更新：

```
- (void) render
{
    for (id thing in mylist) {
        @autorelease {
            CALayer *layer = createLayerFromThing(thing);
            UIImage *img = [self renderLayer:layer];
            [self writeToDisk:img];
        }
    }
} 
```

在 createLayerFromThing(thing); 我实际上创建了一个包含大量子层的层

**更新**

maxConcurrentOperationCount = 4 的第一个屏幕截图

maxConcurrentOperationCount = 1 的第二个

![maxConcurrentOperationCount = 4](../Images/c2d008a0ae455966e792cfe20b5f9742.png)

![maxConcurrentOperationCount = 1](../Images/b8346b6e3466218e2ad2f6eea12bef99.png)

**==================================================== ==================================================== ==================================================== ======**

并且由于它降低并发操作的数量几乎没有影响，我决定尝试 maxConcurrentOperationCount = 10

![最大并发操作计数 = 10](../Images/5cf55d3a83eca643ce852bf69cc639bc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T15:22:10.357

没有任何细节很难说出了什么问题，但这里有一些想法。

A. 使用@autorelease。CALayers 在后台生成位图，如果不及时释放，总体上会占用大量空间。如果您要创建和渲染许多层，我建议在渲染循环中添加一个自动释放块。如果您的所有图层都嵌套并且同时需要进行渲染，这将无济于事。

```
- (void) render
{
    for (id thing in mylist) {
        @autorelease {
            CALayer *layer = createLayerFromThing(thing);
            [self renderLayer:layer];
        }
    }
} 
```

B. 另外，如果您使用 CGBitmapCreateContext 进行渲染，您是否调用了匹配的 CGContextRelease？这也适用于 CGColorRef。

C. 如果您使用 malloc 或 calloc 分配内存，您是否在完成后释放它？确保这种情况发生的一种方法

发布渲染循环的代码以提供更多上下文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T18:22:40.840

我相信这里有两种可能：

1.  您创建的项目不会自动发布。
2.  由于您正在执行的并发操作的数量，您正在占用的内存就是它。

在第一种情况下，解决方案很简单。`autorelease`在创建图层和图像时向其发送消息。

在第二种情况下，您可以使用`NSOperationQueue`. 操作队列有一个名为 的属性`maxConcurrentOperationCount`。我会尝试使用 4 的值，看看内存行为与您当前的行为有何变化。当然，您可能必须尝试不同的值才能获得正确的内存与性能平衡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:10:09.273

Autorelease 将等到运行循环结束进行清理。如果您显式释放它可以从堆中取出它而不填满池。

```
- (void) render {
    for (id thing in mylist) {
        CALayer *layer = createLayerFromThing(thing);    // assuming this thing is retained
        [self renderLayer:layer];                        
        [layer release];                                 // this layer no longer needed  
    } } 
```

还使用分析运行构建，看看是否有泄漏并修复它们。

# android - pushwoosh 推送通知中的事件和回调错误触发

> ID：15490283
> 
> 赞同：0
> 
> 时间：2013-03-19T02:01:21.507
> 
> 标签：android, push-notification, cordova

我正在使用插件`registerDevice`和`unregisterDevice`方法，并在 pushwoosh 中查看我的应用程序的控制面板。我的应用程序的首选项默认为接受推送通知，所以我注册了，这有效，并且我的订阅者计数在 pushwoosh 控制面板中增加。它还会触发一个`push-notification`事件，其中该事件具有`notification`指南显示的属性，但它设置为`null`. 这很令人困惑，因为我还没有从控制面板发送任何推送通知。

然后，我将推送首选项设置为`false`并取消注册该设备。它之所以有效，是因为我的订阅者计数在控制面板中减少，但`fail`回调是触发的，它获得的唯一参数是注册`success`回调获得的相同推送令牌字符串。如果在那之后我再次取消注册，仍然只有`fail`回调触发，但这次唯一的参数是空字符串。

我在处理来自插件的响应时做错了吗？

我正在测试的代码：

```
(function() {
    $document.on('push-notification', function(evt) {
        var n = evt.originalEvent.notification;
        console.log(n);
    });

    var pushPrefApply = function() {
        app.pushPref(function(pushPref) {
            console.log('pushPref', pushPref);
            if (!pushPref) {
                window.plugins.pushNotification.unregisterDevice(
                    function() {
                        console.log('unreg ok', arguments);
                    },
                    function() {
                        console.log('unreg fail', arguments);
                    }
                );
                return;
            }
            window.plugins.pushNotification.registerDevice(
                {
                    projectid: '123456789012',
                    appid : 'F0000-BAAAA'
                },
                function(pushToken) {
                    console.log('reg ok', arguments);
                },
                function(status) {
                    console.log('reg fail', arguments);
                }
            );
        });
    };

    //code for changing/initiating push preference goes here
})(); 
```

`$document`不是错字，它已经定义好了。`app.pushPref`是偏好设置/获取功能。`window.plugins.pushNotification.onDeviceReady`已在其他地方完成`deviceready`。

我希望 pushwoosh 开发人员能对此有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:42:33.570

问题已修复，SDK 已在 Github 上更新： [https](https://github.com/shaders/push-notifications-sdk) ://github.com/shaders/push-notifications-sdk 和 [https://github.com/shaders/phonegap-cordova-push-notifications](https://github.com/shaders/phonegap-cordova-push-notifications)

Android Phonegap 示例现在还包括注销功能： [https ://github.com/shaders/push-notifications-sdk/tree/master/SDK%20Sample%20Projects/Android-Phonegap](https://github.com/shaders/push-notifications-sdk/tree/master/SDK%20Sample%20Projects/Android-Phonegap)

# c++ - 如何在指定的时间内执行任意函数并获取其返回值？

> ID：15490286
> 
> 赞同：4
> 
> 时间：2013-03-19T02:01:40.570
> 
> 标签：c++, boost

我最初尝试了[这个答案](https://stackoverflow.com/questions/8992226/arbitrary-function-call-with-boostlambdabind)，但是在将'bind'的值分配给'int'（在这种情况下是我的函数的返回类型）时出现编译错误。我对提升相当不熟悉，但正在努力改进。有关如何使以下内容在 VC10 上编译和正常工作的任何建议？

```
template <class T, class F>
void ExecuteWithReturn(const F &_bind, long sleep, T & ret)
{
    ret = _bind();
}

template <class T, class F>
bool TryExecuteFor(const F &_bind, long sleep, T & ret) {
    boost::thread thrd(ExecuteWithReturn<T, F>, _bind, boost::ref(ret));
    return thrd.timed_join(boost::posix_time::milliseconds(sleep));
} 
```

结果是编译错误：

> 错误 C2198: 'void (__cdecl *)(const boost::_bi::bind_t &,long,T &)' : 调用参数太少 1> [ 1>
> R=long, 1> F=long (__cdecl * )(const wchar_t *,const wchar_t *,wchar_t **), 1>
> L=boost::_bi::list3,boost::_bi::value,boost::_bi::value>, 1> T=int 1 > ]

并且这个函数的用法预计是：

```
int ret;
if(!TryExecuteFor(boost::bind(g_pMyFunc, someParam, anotherParam), 10000, ret))
{
   ...
} 
```

**编辑：**感谢弗雷泽指出 ExecuteWithReturn 的明显问题；结合另一个修复程序使代码工作。运行后，我意识到一个很可能的问题，如果线程是孤立的，则传入的变量（包括返回值）可能会在函数返回之前超出范围。我不能对绑定函子的参数做太多事情，但为了减轻潜在的问题，我将返回值更改为 shared_ptr。目前的工作实施如下：

```
template <class F>
void ExecuteWithReturn(const F &_bind, boost::shared_ptr<decltype(_bind())> _ret)
{
    *_ret = _bind();
}

template <class F>
bool TryExecuteFor(const F &_bind, long _timeout, boost::shared_ptr<decltype(_bind())> _ret) {
    boost::thread thrd(ExecuteWithReturn<F>, boost::ref(_bind), _ret);
    return thrd.timed_join(boost::posix_time::milliseconds(_timeout));
} 
```

nice easy TODO 将是不返回值的函数的重载，但经过基本测试后，它可以按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T02:57:27.890

你只是有一个额外的论点`ExecuteWithReturn`

该功能可能应该更改为

```
void ExecuteWithReturn(const F &_bind, T & ret) 
```

否则你需要传递`sleep`你调用的参数`ExecuteWithReturn`：

```
boost::thread thrd(ExecuteWithReturn<T, F>, _bind, sleep, boost::ref(ret)); 
```

# python - 使用框架式构建 (OS X) 安装 Python 时遇到问题

> ID：15490287
> 
> 赞同：1
> 
> 时间：2013-03-19T02:01:51.000
> 
> 标签：python, pip, homebrew, easy-install

在尝试开始学习和开发 Python 时，我尝试按照[Python 指南在 OS X 上安装 Python](https://python-guide.readthedocs.org/en/latest/starting/install/osx/)，但并没有发现它特别“适合新手”。我有一台内置 Python 2.7.2 的新 MacBook（Mtn. Lion - OS X 10.8.3）。但指南建议通过自制软件安装“框架式构建”。所以：

1.  我通过安装自制软件`ruby -e "$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)"`

2.  然后它告诉您通过将自制软件添加到文件 中`PATH`来将其添加到您的顶部。表明我的主目录中没有文件。在搜索 Stack Overflow 如何执行此操作后，我运行并将该行插入文件并保存文件。`~/.bashrc``ls -a``~/.bashrc``nano ~/.bashrc``export PATH=/usr/local/bin:$PATH`

3.  然后我跑`brew install python --framework`了，安装完成了。

4.  然后，指南说“将新的 Python 脚本目录添加到您的`PATH`”所以，我假设这意味着我还需要将它提供的行添加到我的`~/.bashrc`文件中。所以，我在我之前的条目*上方*`export PATH=/usr/local/share/python:$PATH`添加了我的`~/.bashrc`文件。

**   最后，这是我遇到麻烦的地方，它说`easy_install pip`。但是，当我这样做时，我得到一个[错误 13](https://superuser.com/questions/391497/os-x-lion-easy-install-requires-sudo)。* 

 *所以，这里有一些我需要帮助的事情。

1.  **我对如何将自制和 python 脚本添加到我的假设中是否正确`PATH`？**

2.  **我做错了什么还是我只需要使用`sudo`来安装 pip？**[（如果答案已经在此页面](https://superuser.com/questions/391497/os-x-lion-easy-install-requires-sudo)上，我真的很抱歉，但即使这些答案对我来说也没有完全意义，我想小心，不要搞砸了）

3.  **在安装了python的框架式构建（我相信是当前的2.7.3）之后，为什么`python`在我的终端中运行仍然显示v2.7.2？**

谢谢！我很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:14:05.987

> 我尝试按照 Python 指南在 OS X 上安装 python，但没有发现它特别“对菜鸟友好”。

是的，我认为这是误导/过时的。

> 然后它告诉您通过将自制软件添加到您的 ~/.bashrc 文件中来将其添加到 PATH 的顶​​部。ls -a 表明我的主目录中没有 ~/.bashrc 文件。在搜索 Stack Overflow 如何做到这一点后，我运行 nano ~/.bashrc，并将行 export PATH=/usr/local/bin:$PATH 插入文件并保存文件。

在 Mac 上，只需使用 ~/.profile

> 然后我运行 brew install python --framework 并完成安装。

我认为你不需要 --framework 选项，除非你想替换你的 Mac OS 默认安装并且需要一个 Mac OS 框架风格的目录布局。虽然没有必要更换它，自制软件安装将优先。

> 然后，指南说“将新的 Python 脚本目录添加到您的 PATH”，因此，我假设这意味着我还需要将它提供的行添加到我的 ~/.bashrc 文件中。因此，我将 export PATH=/usr/local/share/python:$PATH 添加到我之前的条目上方的 ~/.bashrc 文件中。

再次，在 ~/.profile 中执行此操作。别忘了做一个

```
source ~/.profile 
```

否则更改只会在任何新的终端窗口中生效，而不是您当前使用的那个。

> 最后，这是我遇到麻烦的地方，它告诉easy_install pip。但是，当我这样做时，我收到错误 13。

该错误表明您尝试将其安装为 Mac OS 系统的默认 Python 库（而不是 /usr/local，自制风格），这需要 root 权限。只是不要。此外，使用 homebrew python，已经安装了 pip。

检查您的路径：

```
$ which pip
/usr/local/bin/pip
$ ls -l /usr/local/bin/pip
[..] /usr/local/bin/pip -> ../Cellar/python/2.7.3/bin/pip 
```

额外奖励：然后做

```
pip install virtualenv 
```

并使用它。

对于您的问题：

> 我对如何将自制和 python 脚本添加到我的 PATH 的假设是否正确？

是的，但是使用 .profile 然后再做一个`source .profile`。

> 我做错了什么还是只需要使用 sudo 来安装 pip？（如果答案已经在此页面上，我真的很抱歉，但即使这些答案对我来说也没有完全意义，我想小心，不要搞砸了）

您不需要 sudo 和 homebrew，并且 pip 是使用 homebrew python 自动安装的。

> 在安装了框架风格的 python 构建（我相信是当前的 2.7.3）之后，为什么在我的终端中运行 python 仍然显示 v2.7.2？

可能 PATH 不正确，请`echo $PATH`检查它是否正确。不过，这与是否为“框架风格”无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:22:45.410

如果你用自制软件安装了 python，你应该已经安装了 pip。尝试运行

```
pip --version 
```

查看是否`pip`安装以及安装在哪里。希望它`/usr/local/...`在您的其他自制软件存在的路径中。

另外，在安装太多之前，请`homebrew`务必运行以下命令：

```
brew update
brew doctor 
```

祝你好运！*

# matlab - 嵌套for循环查询

> ID：15490288
> 
> 赞同：0
> 
> 时间：2013-03-19T02:01:56.157
> 
> 标签：matlab, loops, for-loop, nested

我正在尝试做一些相当简单的事情，但似乎无法得到它......

我有 3 个带字符串的单元格数组，

```
A = {'ConditionA'; 'ConditionB'; 'ConditionC'; 'ConditionD'};

B = {'Case1'; 'Case2'; 'Case3'; 'Case4'};

C = {'Rice'; 'Beans'; 'Carrots'; 'Cereal';'Tomato'; 'Cabbage';...
    'Sugar'} 
```

我想用连接的（strcat？）组合生成一个向量，因为它是一个“树形图”，例如：

```
strcat(A(1),B(1),C(1))
strcat(A(1),B(1),C(2))
strcat(A(1),B(1),C(3))
strcat(A(1),B(1),C(4))
strcat(A(1),B(1),C(5))
strcat(A(1),B(1),C(6))
strcat(A(1),B(1),C(7))

strcat(A(1),B(2),C(1)) 
```

那么我想要获得的第一个元素是（理想情况下在列中）：

条件ACase1大米条件ACase1豆子条件ACase1胡萝卜条件ACase1谷物条件ACase1番茄条件ACase1卷心菜条件ACase1糖条件ACase2大米等等等...

我知道：

```
for i=1:length(A)
    E(i) = strcat(A(i),B(1),C(1))
end 
```

适用于一个“级别”。我努力了：

```
for i=1:length(A)
    for j=1:length(B)
        for k=1:length(C)
            P(i) = strcat(A(i),B(j),C(k));
        end
    end
end 
```

但这不起作用...

如果我能在这方面得到帮助，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:12:28.493

{

```
x = 1;
    for i=1:length(A)
        for j=1:length(B)
            for k=1:length(C)
                P(x) = strcat(A(i),B(j),C(k));
                x = x + 1;
            end
        end
    end

} 
```

请基本上在发布到 PO 之前检查您的代码，因为这是一个非常简单的调试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:15:34.107

我对matlab不是很熟悉..但也许可以试试这样的东西？

```
for A = {'ConditionA'; 'ConditionB'; 'ConditionC'; 'ConditionD'};
   for B = {'Case1'; 'Case2'; 'Case3'; 'Case4'};
     for  C = {'Rice'; 'Beans'; 'Carrots'; 'Cereal';'Tomato'; 'Cabbage'; 'Sugar'}
       P(i) = strcat(A(i),B(j),C(k));
    end
   end
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:13:57.857

据我了解，您需要指定的输入数组字符串的所有可能组合。如果是这样，只需将嵌套循环替换为以下内容：

```
P = cell(length(A)*length(B)*length(C),1);
t=1;
for i=1:length(A)
    for j=1:length(B)
        for k=1:length(C)
            P(t) = strcat(A(i),B(j),C(k));
            t = t+1;
        end
    end
end 
```

对于输入数组，

```
>> A = {'ConditionA'; 'ConditionB'; 'ConditionC'; 'ConditionD'};
>> B = {'Case1'; 'Case2'; 'Case3'; 'Case4'};
>> C = {'Rice'; 'Beans'; 'Carrots'; 'Cereal';'Tomato'; 'Cabbage';'Sugar'}; 
```

P 的值是：

```
>> P

P = 

    'ConditionACase1Rice'
    'ConditionACase1Beans'
    'ConditionACase1Carrots'
    'ConditionACase1Cereal'
    'ConditionACase1Tomato'
    'ConditionACase1Cabbage'
    'ConditionACase1Sugar'
    'ConditionACase2Rice'
    'ConditionACase2Beans'
    'ConditionACase2Carrots'
    'ConditionACase2Cereal'
    'ConditionACase2Tomato'
    'ConditionACase2Cabbage'
    'ConditionACase2Sugar'
    'ConditionACase3Rice'
    'ConditionACase3Beans'
    'ConditionACase3Carrots'
    'ConditionACase3Cereal'
    'ConditionACase3Tomato'
    'ConditionACase3Cabbage'
    'ConditionACase3Sugar'
    'ConditionACase4Rice'
    'ConditionACase4Beans'
    'ConditionACase4Carrots'
    'ConditionACase4Cereal'
    'ConditionACase4Tomato'
    'ConditionACase4Cabbage'
    'ConditionACase4Sugar'
    'ConditionBCase1Rice'
    'ConditionBCase1Beans'
    'ConditionBCase1Carrots'
    'ConditionBCase1Cereal'
    'ConditionBCase1Tomato'
    'ConditionBCase1Cabbage'
    'ConditionBCase1Sugar'
    'ConditionBCase2Rice'
    'ConditionBCase2Beans'
    'ConditionBCase2Carrots'
    'ConditionBCase2Cereal'
    'ConditionBCase2Tomato'
    'ConditionBCase2Cabbage'
    'ConditionBCase2Sugar'
    'ConditionBCase3Rice'
    'ConditionBCase3Beans'
    'ConditionBCase3Carrots'
    'ConditionBCase3Cereal'
    'ConditionBCase3Tomato'
    'ConditionBCase3Cabbage'
    'ConditionBCase3Sugar'
    'ConditionBCase4Rice'
    'ConditionBCase4Beans'
    'ConditionBCase4Carrots'
    'ConditionBCase4Cereal'
    'ConditionBCase4Tomato'
    'ConditionBCase4Cabbage'
    'ConditionBCase4Sugar'
    'ConditionCCase1Rice'
    'ConditionCCase1Beans'
    'ConditionCCase1Carrots'
    'ConditionCCase1Cereal'
    'ConditionCCase1Tomato'
    'ConditionCCase1Cabbage'
    'ConditionCCase1Sugar'
    'ConditionCCase2Rice'
    'ConditionCCase2Beans'
    'ConditionCCase2Carrots'
    'ConditionCCase2Cereal'
    'ConditionCCase2Tomato'
    'ConditionCCase2Cabbage'
    'ConditionCCase2Sugar'
    'ConditionCCase3Rice'
    'ConditionCCase3Beans'
    'ConditionCCase3Carrots'
    'ConditionCCase3Cereal'
    'ConditionCCase3Tomato'
    'ConditionCCase3Cabbage'
    'ConditionCCase3Sugar'
    'ConditionCCase4Rice'
    'ConditionCCase4Beans'
    'ConditionCCase4Carrots'
    'ConditionCCase4Cereal'
    'ConditionCCase4Tomato'
    'ConditionCCase4Cabbage'
    'ConditionCCase4Sugar'
    'ConditionDCase1Rice'
    'ConditionDCase1Beans'
    'ConditionDCase1Carrots'
    'ConditionDCase1Cereal'
    'ConditionDCase1Tomato'
    'ConditionDCase1Cabbage'
    'ConditionDCase1Sugar'
    'ConditionDCase2Rice'
    'ConditionDCase2Beans'
    'ConditionDCase2Carrots'
    'ConditionDCase2Cereal'
    'ConditionDCase2Tomato'
    'ConditionDCase2Cabbage'
    'ConditionDCase2Sugar'
    'ConditionDCase3Rice'
    'ConditionDCase3Beans'
    'ConditionDCase3Carrots'
    'ConditionDCase3Cereal'
    'ConditionDCase3Tomato'
    'ConditionDCase3Cabbage'
    'ConditionDCase3Sugar'
    'ConditionDCase4Rice'
    'ConditionDCase4Beans'
    'ConditionDCase4Carrots'
    'ConditionDCase4Cereal'
    'ConditionDCase4Tomato'
    'ConditionDCase4Cabbage'
    'ConditionDCase4Sugar' 
```

如果您需要进一步的帮助，请告诉我。

# .htaccess - .htaccess 基本模组重写

> ID：15490293
> 
> 赞同：3
> 
> 时间：2013-03-19T02:02:40.997
> 
> 标签：.htaccess

我才刚刚开始学习如何使用 .htaccess 文件重写 url。

我将如何改变：

[http://www.url.net/games/game_one.php](http://www.url.net/games/game_one.php)

进入这个：

[http://www.url.net/games/game-one/](http://www.url.net/games/game-one/)

这是我一直在尝试的

```
RewriteRule    ^/games/game-one.php    ^/games/game-one/    [NC,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:16:48.763

试试这个：

```
RewriteRule ^(/games/game-one)\.php $1/ 
```

这说的是匹配以 /games/game-one 开头的任何内容并记住该匹配的第一部分，然后将其替换为第一部分（在正则表达式中捕获组）和一个斜线字符。请注意，要匹配句点字符，您必须在它前面加上一个 \，因为它`.`是一个特殊字符，表示“任何字符”（至少如果您想避免匹配任何字符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T02:27:29.430

如果您希望人们明确地使用*/games/game-one/*，您必须重写以便它请求*/game/game-one.php*。因此，与您的问题相反。

```
RewriteEngine On
RewriteRule ^games/game-one/$ /games/game-one.php 
```

如果您也想重写其他 URL，那么您需要使用类似于先前答案的技术。

# c - 算法（！=线性搜索）在整数数组中找到小于 X 的第一个数字

> ID：15490298
> 
> 赞同：2
> 
> 时间：2013-03-19T02:02:58.637
> 
> 标签：c, arrays, search, binary-search

我正在寻找一种算法来找到整数数组中小于 X 的第一个数字。实际上我正在使用线性搜索，但我认为二进制搜索可能更好（正如我前一段时间已经看到的那样）但我不知道如何自己实现它（不实现修改版本来查找第一个小于X）。如果有比 bin 搜索更好的方法，请告诉我。我需要它，因为该数组在程序运行时被大量访问和修改。

这是当前（繁琐）的实现：

```
int findmin(int *arr,int n,int size)
{
  int i;
  for(i = 0; i < size && arr[i] < n; i++)
    ;
  return i-1;
} 
```

该索引用于在特定索引中插入 N 值的功能的参数输入。此函数的索引并在数组中插入一个数字，但在每次插入新数字时仍使其排序而无需调用 sort()。它是一个相关的文件文本解析，解析很多文件和一些相当多的字符。我需要努力使事情尽可能快（根据我的上下文和知识）。

**编辑：**数组总是排序的，即使在新数字的分割之后也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T13:13:05.073

二进制搜索在这里没有问题。困难的是如何检查边界条件以及应该返回什么值。此外，您必须注意重复值。以下功能将起作用。

```
 int binarySearch(int a[], int length, int value)
    {
        if (a[0] > value)
            return -1;

        int low = 0;
        int high = length-1;

        while (low<=high)
        {
            int mid = low+((high-low)/2);

            if(a[mid] >= value)
                high = mid-1;
            else
                low = mid+1;
        }

        return low-1;
    } 
```

* * *

**测试**：（有重复）

```
 int arr[] = {1, 3, 4, 6, 6, 10};
    int length = sizeof(arr)/sizeof(arr[0]);

    int index = binarySearch(arr, length, 6); // will be 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T02:09:05.377

您必须已经对 N 个元素的数组进行了排序。

将“高”设置为 N，将“低”设置为 -1。

“探测”元素 N/2（向下舍入为 int）。

如果探测到的元素<您的目标，请将“高”设置为 N/2。如果 >，将“低”设置为 N/2。（如果 ==，当然，那么你有你的答案。）

重复，在“低”和“高”之间探测。

您需要担心一些边界条件，但不要太复杂。

# c# - 当我在我的 WPF 窗口中放置一个文本框或按钮时，它是使用 DirectX 还是 User32 呈现的？

> ID：15490299
> 
> 赞同：1
> 
> 时间：2013-03-19T02:03:02.273
> 
> 标签：c#, .net, wpf

我知道 WPF 封装了 DirectX，但我知道我可以用它来渲染 DirectX 或 User32

1.  当我将控件拖到窗口时，DirectX 是默认渲染器吗？

2.  如果没有，我如何强制它使用 User32 进行渲染？

3.  如果需要，我是否需要使用 User32 渲染整个窗口，或者只是我的控件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T02:34:55.833

**WPF之前的生活：**

回首过去，不可避免地会发现标准窗口应用程序依赖于 Windows 操作系统的两个磨损严重的部分来创建其用户界面。

a) User32：为元素提供熟悉的窗口外观。

b) GDI/GDI+：为渲染形状、文本、图像等提供绘图支持，

**WPF 是否使用 DirectX 或 User32 进行渲染？**

WPF 改变了这一切，与窗口窗体有着根本的不同。WPF 的底层技术不是 GDI/GDI+，而是使用 DirectX。因此，无论我们创建什么类型的用户界面，WPF 都使用 DirectX。所以就好像我们是创建复杂的3D图形还是只是绘制一个按钮，所有的绘制工作都必须通过DirectX管道。由于 WPF 依赖 DirectX，现在我们也可以利用硬件加速，这意味着这将尽可能多地将工作交给显卡上的专用处理器 GPU（图形处理单元）和我们的 CPU（中央处理单元) 可以休息一下。

**WPF 是否依赖于 User32？**

WPF 仍然依赖 User32 来提供某些服务，例如处理和路由输入以及分清哪个应用程序拥有哪一部分屏幕空间。但是，所有绘图都是通过 DirectX 汇集的。

这是 WPF 中最显着的变化。WPF 不是 GDI/GDI+ 的包装器。相反，它是一个替代品——一个通过 DirectX 工作的单独层。

[WPF 可以在没有 DirectX 的情况下运行吗？](https://stackoverflow.com/questions/1363308/can-wpf-run-without-directx)

> WPF 依赖于 DirectX 运行时。但是，DirectX 和 WPF 都有自己的软件回退模式，因此，在没有合适的图形硬件和/或驱动程序的情况下，将使用软件渲染来代替。软件渲染时，一些图形密集型功能也将不可用。WPF 允许您检查它正在运行的 [渲染层](http://msdn.microsoft.com/en-us/library/ms742196.aspx)并定制 UI 以适应当前环境。

另外，我建议您快速阅读 HAL 与 HEL，以了解不同的显卡决定了可以通过 DirectX 硬件或软件完成的操作。

图 1\. DirectX 的体系结构及其与 Win32 的关系。

![在此处输入图像描述](../Images/d3a9faea33fba6a36f3326877a1b901c.png)

在图 1 中，您可能会注意到 DirectX 下有两个层，称为 HEL（硬件仿真层）和 HAL（硬件抽象层）。事情是这样的：DirectX 是一个非常具有前瞻性的设计，因此它假设高级功能是由硬件实现的。但是，如果硬件不支持某些功能，会发生什么？这是双模 HAL 和 HEL 设计的基础。

HAL 或硬件抽象层是“金属”层。它直接与硬件对话。该层通常是供应商提供的设备驱动程序，您可以通过通用 DirectX 调用直接与其通信。最重要的是，当您请求的功能由硬件直接支持并因此得到加速时，将使用 HAL。例如，当您请求绘制位图时，硬件 blitter 会完成工作，而不是软件循环。

当硬件不支持您请求的功能时，将使用 HEL 或硬件仿真层。假设您要求视频卡旋转位图。如果硬件不支持旋转，HEL 就会启动并由软件算法接管。显然，这比较慢，但关键是它不会破坏你的程序。它仍然可以工作——只是速度变慢了。此外，HAL 和 HEL 之间的切换对您来说是透明的。如果你要求 DirectX 做某事，而 HAL 直接做，硬件会做。否则，将调用软件仿真来使用 HEL 完成工作。

参考：

[http://vishalnayan.wordpress.com/2011/05/20/windows-presentation-foundation-what-why-and-when/](http://vishalnayan.wordpress.com/2011/05/20/windows-presentation-foundation-what-why-and-when/) [http://www.yaldex.com/games-programming/0672323699_ch05lev1sec1.html](http://www.yaldex.com/games-programming/0672323699_ch05lev1sec1.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T02:29:10.293

您可以通过将 设置为来强制`Application`使用软件渲染。`ProcessRenderMode``SoftwareOnly`

```
RenderOptions.ProcessRenderMode = RenderMode.SoftwareOnly; 
```

但是，这是在流程级别完成的，我不确定是否可以按元素完成

# wso2esb - 如何编译 WSO2 ESB？

> ID：15490302
> 
> 赞同：1
> 
> 时间：2013-03-19T02:03:32.467
> 
> 标签：wso2esb

我正在尝试从以下 URL [https://svn.wso2.org/repos/wso2/carbon/platform/tags/4.0.7/products/esb/4.6.0/构建 WSO2 ESB 的源代码](https://svn.wso2.org/repos/wso2/carbon/platform/tags/4.0.7/products/esb/4.6.0/)

但是当我使用 Maven 编译项目时，它会抛出以下异常：

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：WSO2 Carbon - Axis2 Transport HTTP Pass-through Feature 1.0.2 (org.wso2.carbon.transports.passthru.feature.group 1.0.2) 缺少要求：WSO2 Carbon - Axis2 Transport HTTP Pass-through Feature 1.0。 2 (org.wso2.carbon.transports.passthru.feature.group 1.0.2) 需要 'org.wso2.carbon.core.server.feature.group [4.1.0.SNAPSHOT,4.2.0)' 但它不能被发现

有什么问题？是不是来自 4.6.0 源代码的正确 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:30:50.070

原因是您没有构建 WSO2 ESB 所需的依赖项。以下步骤将帮助您构建 esb 4.6.0

1.做结帐表格“ [https://svn.wso2.org/repos/wso2/carbon/orbit/tags/4.0.6/](https://svn.wso2.org/repos/wso2/carbon/orbit/tags/4.0.6/) ”并构建它。

1.  [从“ https://svn.wso2.org/repos/wso2/carbon/kernel/tags/4.0.6/](https://svn.wso2.org/repos/wso2/carbon/kernel/tags/4.0.6/) ”获取第二次结帐并构建它。

2.  最后从“ [https://svn.wso2.org/repos/wso2/carbon/platform/tags/4.0.6/](https://svn.wso2.org/repos/wso2/carbon/platform/tags/4.0.6/) ”获取结帐，并按顺序、父级、依赖项、服务存根、组件、功能构建以下模块，样品/购物车,样品/购物车-全球/2.0.0

3.  然后进入 products/esb/4.6.0/ 目录并构建它。

# java - GWT如何在我的arrayList中制作一个clickhandler

> ID：15490304
> 
> 赞同：0
> 
> 时间：2013-03-19T02:03:44.260
> 
> 标签：java, gwt

我有这个简单的`ArrayList`

```
Image img = new Image("/Mobile 005.JPG");
Image img1 = new Image("/Mobile 006.JPG");
Image img2 = new Image("/Mobile 007.JPG");
Image img3 = new Image("/Mobile 008.JPG");
imgList.add(img);
imgList.add(img1);
imgList.add(img2);
imgList.add(img3);

HorizontPanel hpnl = new HorizontalPanel();
hpnl.add(imgList); 
```

此图像列表将来自 db，并且可以是任意数量。

此时这`HorizontalPanel`包含 4 张图片（将来可能包含 400 张图片），现在如果用户来点击第二张图片，假设我们如何知道用户点击了哪张图片？

我将在哪里以及如何放置我的`clickHandler`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:35:19.500

您将通过使用 getSource() API 了解单击了哪个图像 -

```
Image img = new Image("/Mobile 005.JPG");
img.addClickHandler( getClickHandler() ); 
Image img1 = new Image("/Mobile 006.JPG");
img1.addClickHandler( getClickHandler() ); 
Image img2 = new Image("/Mobile 007.JPG");
img2.addClickHandler( getClickHandler() ); 
Image img3 = new Image("/Mobile 008.JPG");
img3.addClickHandler( getClickHandler() ); 
imgList.add(img);
imgList.add(img1);
imgList.add(img2);
imgList.add(img3);

HorizontPanel hpnl = new HorizontalPanel();
hpnl.add(imgList);

ClickHandler imageClickHandler;

private ClickHandler getClickHandler()
{ 
     if( imageClickHandler != null)
     {
          return imageClickHandler;
     }
     imageClickHandler = new ClickHandler()
     {
            public void onClick( ClickEvent event )
            {
              Image source = (Image)event.getSource();
                  // This is the source that has caused the event.
            }
     };

     return imageClickHandler;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:15:54.607

您也可以尝试以下操作。

```
 HorizontalPanel hp = new HorizontalPanel();
    hp.add(getImage("/Mobile 005.JPG"));
    hp.add(getImage("/Mobile 006.JPG"));
    hp.add(getImage("/Mobile 007.JPG"));
    hp.add(getImage("/Mobile 008.JPG"));

    private Image getImage(String imagePath){
    Image image = new Image(imagePath);
    image.addClickHandler(new ClickHandler() {

     @Override
     public void onClick(ClickEvent event) {
       // write the on click code.
     }
     });

} 
```

从 imagepath 变量中，您可以知道调用了哪个 onclick。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-19T05:21:48.663

正在寻找这样的东西

```
List<Image> images = new ArrayList<Image>();
        images.add(new Image());
        images.add(new Image());//Into this list add your DB images list
        images.add(new Image());

        for (Image image : images) {
            image.addClickHandler(
           //singleton instance of clickhandler
            });
        } 
```

# c# - System.Xml.XmlException：解析名称时文件意外结束

> ID：15490305
> 
> 赞同：10
> 
> 时间：2013-03-19T02:03:52.360
> 
> 标签：c#, xml, linq, linq-to-xml, xmlreader

我正在使用`XmlReader`检索到的 using `SqlCommand.ExecuteXmlReader`。

[这是我的输入](https://gist.github.com/codyherring/5193077)

当我运行这行代码时：

```
XDocument currentXDoc = XDocument.Load(ktXmlReader.ReadSubtree()); 
```

它第一次工作，按预期读取第一个 Product 节点。

第二次运行时，我得到以下异常：

```
System.Xml.XmlException:
Message: Unexpected end of file while parsing Name has occurred. Line 1, position 2048.

Stacktrace:    at System.Xml.XmlTextReaderImpl.Throw(String res, String arg)
   at System.Xml.XmlTextReaderImpl.ParseQName(Boolean isQName, Int32 startOffset, Int32& colonPos)
   at System.Xml.XmlTextReaderImpl.ThrowTagMismatch(NodeData startTag)
   at System.Xml.XmlTextReaderImpl.ParseEndElement()
   at System.Xml.XmlTextReaderImpl.ParseElementContent()
   at System.Xml.XmlSubtreeReader.Read()
   at System.Xml.Linq.XContainer.ReadContentFrom(XmlReader r)
   at System.Xml.Linq.XContainer.ReadContentFrom(XmlReader r, LoadOptions o)
   at System.Xml.Linq.XDocument.Load(XmlReader reader, LoadOptions options) 
```

我确实发现[了这个问题](https://stackoverflow.com/questions/12447208/unexpected-end-of-file-in-c-sharp-while-reading-georss-feed)和[这个问题](https://stackoverflow.com/questions/9083094/web-service-call-unexpected-end-of-file-while-parsing-name-has-occurred)与我的相似，但我相当确定我的 XML 格式正确（我可以直接从运行存储过程中得到它）

到目前为止我的想法：

1.  2048 在计算机中是一个非常可疑的数字。我是否在某个地方遇到了 2KB 的`XDocument`限制`XmlReader`？
2.  我在 while 循环中的 ktXmlReader.Read() 以某种方式跳过所有其他节点并直接进入 EOF

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T19:31:11.410

I found the answer [here](http://forums.asp.net/t/1191911.aspx).

My problem was that I was closing the SqlConnection with a using statement when I was getting the XmlReader.

I added the connection to my "using tower of power" and passed it as a parameter, keeping it open, and everything worked perfectly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:06:55.267

XmlReader 执行是一种方式操作。您可以尝试重置它的位置，或者更简单的方法 -[从现有文档创建新阅读器](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.createreader.aspx)。

# javascript - 在 javascript 中处理日期

> ID：15490306
> 
> 赞同：0
> 
> 时间：2013-03-19T02:04:09.690
> 
> 标签：javascript, date

我正在开发一个应用程序，我需要找到用户输入表单的日期与当前日期之间的差异。现在使用我拥有的代码，当我输入当前日期时，它总是显示差异 2。我将不胜感激任何关于如何解决这个问题的建议。

```
function compareDates(dueDate) {  //dueDate is the value from the form
var cdate = new Date();
var cdateparse = Date.parse(cdate);
var dueDateparse = Date.parse(dueDate);
var diff = dueDateparse - cdateparse;
var daysCal = diff / 1000 / 60 / 60 / 24;
var days = Math.floor(daysCal);
console.log(days);  //keeps returning -2 when I enter the current date into the form
try {
 if(diff < 0) {
 mymessage = "this task is overdue by" + " " + -days + " " + "days"; //shows 2 
  throw new Error("you are overdue");
  }
  }
 catch(ex) {
 alert(ex.message);
 return;
 }
if(diff > 0) {
console.log("the difference is greater than 0");
mymessage = "you have" + " " + days + " " + "more days";
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:34:49.067

在应用 Math.floor() 之前，您必须对 daysCal 值进行四舍五入。

```
.....

var days = Math.floor(Math.round(daysCal));
..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:09:18.823

我会使用[moment.js](http://momentjs.com/)库来为你处理它，它有一个内置的[不同](http://momentjs.com/docs/#/displaying/difference/)API，并且可以像这样使用：

```
var a = moment([2007, 0, 29]);
var b = moment([2007, 0, 28]);
a.diff(b, 'days') // 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:47:36.537

首先获取您应该使用的当前日期，`Date.now()`而不是`+new Date`. 它在支持浏览器方面速度更快，而且[这个 IE<9 的 polyfill](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/now#Compatibility)很简单：

```
Date.now = Date.now || function() {
    return +new Date;
}; 
```

[如果你使用moment.js](http://momentjs.com/)，你甚至不需要这样做：

```
moment(someDate).fromNow() 
```

[`.fromNow()`在 momentjs.com 上](http://momentjs.com/docs/#/displaying/fromnow/)

* * *

我会推荐使用 moment.js 作为[@Slace 推荐](https://stackoverflow.com/a/15490360/552067)的。我正在制作的网络应用程序中使用 moment.js。他们的相对日期方法返回易于阅读的格式，如“几秒钟前”、“四年前”等。超级简单！

# javascript - jQuery不影响正确的项目

> ID：15490308
> 
> 赞同：0
> 
> 时间：2013-03-19T02:04:22.247
> 
> 标签：javascript, jquery, wordpress, forms

我有一个表格，可以在这里查看：http: [//dev.calgunsfoundation.org/get-help/hotline/](http://dev.calgunsfoundation.org/get-help/hotline/)

而且，我有一些 jQuery：

```
<script type="text/javascript">
      jQuery(document).ready(function() {

          jQuery('.ginput_container label').each(function(i,e){
              fielddesc = jQuery('<div>').append(jQuery(e).clone()).remove().html();
              jQuery(e).siblings('.ginput_container input:email').before(fielddesc);
              jQuery(e).siblings('.ginput_container input:text').before(fielddesc); //moves sub label above input fields
              jQuery(e).siblings('.ginput_container select').before(fielddesc); //moves sub label above select fields (e.g. country drop-down)
              jQuery(e).siblings('.ginput_container .gfield_radio input').after(fielddesc); //keep label above radio buttons
              jQuery(e).siblings('.ginput_container .gfield_checkbox input').after(fielddesc);
              jQuery(e).remove();
          });

      });
    </script> 
```

问题是这一行：

```
jQuery(e).siblings('.ginput_container input:email').before(fielddesc); 
```

似乎根本不起作用。

（它目前在网站本身上被注释掉了。）

当我启用该行时，表单不会显示。当我禁用它时，一切正常（但是，当然“输入电子邮件”和“确认电子邮件”标签没有正确显示。

当 jQuery 未运行时，代码如下所示：

```
<li id="field_3_3" class="gfield gfield_contains_required">
    <label class="gfield_label" for="input_3_3">
        Email
            <span class="gfield_required">
                *
            </span>
    </label>
    <div class="ginput_complex ginput_container" id="input_3_3_container">
        <span id="input_3_3_1_container" class="ginput_left">
            <input type="email" name="input_3" id="input_3_3" value="" tabindex="17">
                <label for="input_3_3">
                    Enter Email
                </label>
        </span>
        <span id="input_3_3_2_container" class="ginput_right">
            <input type="email" name="input_3_2" id="input_3_3_2" value="" tabindex="18">
                <label for="input_3_3_2">
                    Confirm Email
                </label>
        </span>
    </div>
</li> 
```

似乎我的目标是正确的，我想要输入：电子邮件并将当前位于输入下方的标签移动到现在位于输入上方的标签。但是，显然我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:23:06.197

:email 不是有效的 :selector - 这是问题的根源 `jQuery(e).siblings('.ginput_container input:email')`

您可以使用 id 选择器代替这两个输入：

```
jQuery(e).siblings('#input_3_3, #input_3_3_2')` 
```

或通用：

```
jQuery(e).siblings('input[type=email]') 
```

文本/电子邮件的通用：

```
jQuery(e).siblings('input[type=email], input[type=text]') 
```

# java - 如何存储与 Google Drive SDK 集成的桌面应用程序的用户登录信息

> ID：15490312
> 
> 赞同：0
> 
> 时间：2013-03-19T02:05:18.577
> 
> 标签：java, google-drive-api

给定以下代码示例，它将 Java 桌面应用程序与 Google Drive 集成。

[https://developers.google.com/drive/quickstart-java](https://developers.google.com/drive/quickstart-java)

我想知道，我们怎么可能以**正确和安全的方式**存储用户登录信息，这样他就不需要一次又一次地输入他的用户名和密码。

我意识到[官方的 Windows 版 Google Drive](https://tools.google.com/dlpage/drive/index.html)只需要我们登录一次。我想知道，他们是怎么做到的？他们如何将用户登录信息安全地存储在本地磁盘中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:51:14.547

存储“登录信息”的正确方法是存储刷新令牌和访问令牌。您将要求用户授权一次，使用“设置向导”之类的东西。拥有这些凭据后，您可以存储它们并在将来使用它们。

# python - 如何停止迭代

> ID：15490314
> 
> 赞同：0
> 
> 时间：2013-03-19T02:05:28.093
> 
> 标签：python, iteration, pygame

我使用迭代的代码，我不断收到错误。不知道为什么它正在做什么。我是这种编程的新手，并且在我创建的游戏中使用它。我也不熟悉这个网站，所以请多多包涵。此代码将显示爆炸。当它逐步浏览爆炸的图像时，一切都很好，直到它结束，我得到这个错误：

```
Traceback (most recent call last):
  File "C:\Users\Steve\Desktop\Project April\Alien Metor Storm v1_4\AlienMetorStorm.py", line 560, in <module>
    main()
  File "C:\Users\Steve\Desktop\Project April\Alien Metor Storm v1_4\AlienMetorStorm.py", line 222, in main
    ships.update()
  File "C:\Python31\lib\site-packages\pygame\sprite.py", line 399, in update
    for s in self.sprites(): s.update(*args)
  File "C:\Users\Steve\Desktop\Project April\Alien Metor Storm v1_4\explosion.py", line 26, in update
    self.image = next(self.image_iter)
StopIteration 
```

这是代码：

```
import pygame

class Explosion(pygame.sprite.Sprite):
    def __init__(self,color,x,y):
        pygame.sprite.Sprite.__init__(self)
        self.frame = 0
        self.width = 0
        self.height = 0
        self.x_change = 0
        self.y_change = 0
        self.images = []
        for i in range (0,25):
            img = pygame.image.load('Explosion'+str(i)+'.png').convert()
            img.set_colorkey([0,0,0])
            self.images.append(img)
        self.image = self.images[0]
        self.image_iter = iter(self.images)
        self.rect = self.image.get_rect()
        self.rect.left = x
        self.rect.top = y

    def update(self):
        self.image = next(self.image_iter) 
```

在这里的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T02:08:22.930

`StopIteration`是迭代器耗尽时引发的异常。您可以像任何其他异常一样捕获它：

```
def update(self):
     try:
         self.image = next(self.image_iter)
     except StopIteration:
         pass #move on, explosion is over ... 
```

或者，`next`内置函数允许您通过传递第二个参数在迭代耗尽时返回一些特殊的东西：

```
def update(self):
    self.image = next(self.image_iter,None)
    if self.image is None:
        pass #move on, explosion is over ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:37:29.727

我不确定您到底想做`update`什么，但这是您可以使用的生成器版本，因此您不需要外部迭代器

```
def update(self):
    for image in self.images:
        self.image = image
        yield 
```

或者如果你想永远迭代

```
def update(self):
    while True:
        for image in self.images:
            self.image = image
            yield 
```

# sql - 如何根据特定床位的占用日期填写医院数据库中患者表的床位编号列

> ID：15490318
> 
> 赞同：0
> 
> 时间：2013-03-19T02:05:49.513
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我正在为我的项目开发医院数据库。我有桌子病人、床、医生等。患者表和床位表分别具有患者入院和床位占用的 Beg_Date 和 End_Date。

我想用空床号填充表格中的`bed_No`列（即，如果床位没有被任何患者占用）。`patient`我的问题是我只有 300 张病床可容纳 500 名患者。因此，我完全不确定如何通过比较患者的`Beg_Date`和来填充床位数`End_Date`。我还希望将这些信息保存在床表中`patientID`，`Beg_Date`和`End_Date`列下（即关于哪个患者在哪个日期占用了哪个床位的信息）。对于这张床桌，我只知道有一个“On Insert Cascade”和“On delete cascade”，但不确定如何使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T02:32:51.893

我也在医院工作。

您绝对不想将床位数据放在患者表中。床位数据是访问的一部分，而不是个人的一部分。首先，患者可能会多次就诊。此外，如果您的医院和我的医院一样，患者可以在就诊期间更换床位。重症监护室和普通护理室之间的转移很常见。

如果您的医院将 500 人安置在 300 张病床中，请了解这在现实生活中是如何发生的，并相应地设计您的数据库。

**编辑从这里开始**

根据 Jason 的评论，您可以拥有一张床位占用桌和一张床桌。那么您的可用床位将类似于：

```
select bed_id
from bed
minus
select bed_id
from bed_occupancy
where enter_datetime is not null
and departure_datetime is null 
```

然后由用户将患者分配到空床位。在现实生活中还有其他考虑因素，例如一些病床在外科病房，一些在重症监护室等。临床工作人员在患者之间进行短距离步行时会更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T05:13:05.157

添加一个额外的列，称为**bed_status**并具有一些预定义的状态，如**可用、占用、保留**等。

无论患者是谁，都只考虑床号作为您的唯一 ID。

每当患者入院或出院时，甚至在某些危急情况下转移时，更新此特定床位。

注意 - 如果可能，将患者编号分配给该特定床位编号。在患者出院或入院时同样更新两者。

只需根据状态运行查询即可查找已占用床位、可用床位和预留床位等。

**SELECT COUNT(bed_status) AS availableBeds FROM bed_table WHERE bed_status = 'Available'**

**SELECT COUNT(bed_status) ASposedBeds FROM bed_table WHERE bed_status = 'Occupied'**

**SELECT COUNT(bed_status) AS reservedBeds FROM bed_table WHERE bed_status = 'Reserved'**

# ruby-on-rails - 如何获取 Rails 异步邮件程序中图像的完整 URL？

> ID：15490327
> 
> 赞同：25
> 
> 时间：2013-03-19T02:06:41.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, actionmailer

我希望使用 ActionMailer 发送的电子邮件包含链接回我的应用程序的图像。在我的开发环境中，例如：

```
<img src="http://myfullappurl.dev/assets/myimage.png"> 
```

我的 development.rb 中有这个

```
config.action_controller.asset_host = 'myfullappurl.dev'
config.action_mailer.asset_host = config.action_controller.asset_host
config.action_mailer.default_url_options = { host: 'myfullappurl.dev', only_path: false } 
```

但我无法让我的邮件模板以以下任何一种方式呈现完整的 URL：

```
asset_path('myimage.png')
asset_path('myimage.png', only_path: false)
image_url('myimage.png') 
```

通过执行以下操作可以回答有关此主题的许多类似问题：

```
"#{request.protocol}#{request.host_with_port}#{asset_path('image.png')}" 
```

但是因为我的邮件是使用 Sidekiq 异步发送的，所以`request`如果它们在控制器中同步发送，就不会有任何对象。

我是否缺少明显的东西，或者我是否必须与 Rails 对抗才能做到这一点？我正在使用 Rails 4，但我确信在 3.1/3.2 中工作的任何东西都可以正常工作。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-21T04:31:14.423

嗯，这是奇怪的行为，但我已经解决了这个问题。事实证明，除非 action_mailer.asset_host 以 then 开头，否则`http://`它将被忽略。有一个 Regex`actionpack/lib/action_view/helpers/asset_url_helper.rb`定义了一个有效的 ActionMailer URI：

```
URI_REGEXP = %r{^[-a-z]+://|^(?:cid|data):|^//} 
```

但是，如果你`http://`在前面放一个，`action_controller.asset_host`那么你最终会得到链接到`http://http://myfullappurl.dev`

所以要解决它，我必须将以下内容添加到我的`development.rb`

```
 config.action_controller.asset_host = 'myfullappurl.dev'
 config.action_mailer.asset_host = 'http://myfullappurl.dev' 
```

需要明确的是，这是 Rails 4.0.0beta1，电子邮件与 Sidekiq 异步发送，我不确定这是否会影响 Rails 3。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T03:23:36.657

我相信你需要在你的配置中设置这些

```
config.action_controller.asset_host = 'http://localhost:3000' #Or your domain
config.action_mailer.asset_host = config.action_controller.asset_host 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-24T15:42:08.290

在您的环境文件中（即 development.rb）：-

```
config.action_mailer.asset_host = 'http://localhost:3000' #Or your domain 
```

在您的邮件视图文件中：-

```
<%= image_tag('image_name.jpg') %> 
```

或者

```
<img src="<%= image_url('image.jpg') %>" %> 
```

# python - org-mode 中的 python 代码块在 emacs24.3 中没有持久会话

> ID：15490328
> 
> 赞同：3
> 
> 时间：2013-03-19T02:06:42.867
> 
> 标签：python, emacs, org-mode, emacs24

org-mode 处理`:session`Emacs24.1 和 Emacs24.3 之间源代码块中的参数的方式是否发生了重大变化？我无法再运行持久的 python 会话，而我曾经能够。例如，像这样的东西曾经在 Emacs24.1 中工作

```
#+BEGIN_SRC python :session sample
x = 12;
#+END_SRC

#+BEGIN_SRC python :results output :session sample
print "x =", x
#+END_SRC

#+RESULTS:
: x = 12 
```

但是在 Emacs24.3 中，第二个块会抛出一个错误，说`x`是未定义的。谁能给我解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T03:03:24.697

This is apparently a known problem among the `org-mode` developers. It seems to have arisen only very recently. It is not yet known what caused it to suddenly break.

One could expect the fix to be included in the current beta version of `org-mode`: the to-be version 8.0.

# delphi - 为什么 TService 上还没有 Description 属性？

> ID：15490329
> 
> 赞同：9
> 
> 时间：2013-03-19T02:06:43.087
> 
> 标签：delphi, service, delphi-xe2, vcl

在 Delphi 的 VCL 中从来没有`Description`属性总是很奇怪。`TService`直到今天，Delphi XE2 还没有它。这是一件如此简单和常见的事情，我想知道为什么它不存在。

我知道如何自己创建它，但我的观点是我不应该这样做。我想知道是否有任何技术原因导致`Description`服务没有内置到 Delphi 的 VCL 中？因为对他们来说实施起来似乎很简单。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T04:07:13.507

设置需要用到 XP & Win2003 引入的 ChangeServiceConfig2 API 函数，Delphi 中的服务类是在此之前编写的，长期以来，Windows NT4 和 2000 都是 Delphi RTL 的基线。

同样由于一些未知的原因，Borland（和后继者）一直反对在 Windows API 函数上使用动态绑定，更喜欢静态绑定到 DLL 或后期但非可选的绑定（不要问我为什么，这对我来说毫无意义)，并且使用以前的函数将需要将 Win2003 作为最低版本或使用动态绑定。

所以我不认为这是一个深思熟虑的决定，而更多的是公司关于动态绑定的政策和简单的旧代码维护忽视/疏忽的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-27T23:21:55.603

你可以这样使用。

```
procedure TMyService.ServiceAfterInstall(Sender: TService);
var
  Reg: TRegistry;
begin
  Reg := TRegistry.Create(KEY_READ or KEY_WRITE);

  try
    Reg.RootKey := HKEY_LOCAL_MACHINE;
    if Reg.OpenKey('\SYSTEM\CurrentControlSet\Services\' + Name, false) then
    begin
      Reg.WriteString('Description', 'All details you can write to here.');
      Reg.CloseKey;
    end;
  finally
    Reg.Free;
  end;
end; 
```

# javascript - 为什么会出现两种形式？

> ID：15490334
> 
> 赞同：0
> 
> 时间：2013-03-19T02:07:11.773
> 
> 标签：javascript, jquery, web-applications, twitter-bootstrap, web2py

我正在使用jQuery和bootstrap提供下拉搜索建议。以下是html代码。但是当我在搜索表单中输入内容然后清除表单时。两个表单如图所示。为什么？我是 jQuery 的新手。谢谢你的帮助。

```
<div class="container">
    <div class="row">
        <div class="span6 offset3">
            <form class="form-search">
                <input type="text" id="month" name="month" class="input-medium search-query">
                <button type="submit" class="btn">Search</button>
                <div id="suggestions">
                </div>
            </form>
        </div>
    </div>
</div>
<script>
jQuery("#month").keyup(function(){
      ajax('search', ['month'], 'suggestions')});
</script> 
```

![在此处输入图像描述](../Images/9f24eddec55561eaf262411060506795.png)

**编辑：** 我正在使用 web2py 框架。这是搜索功能的代码：

```
def search():
    if not request.vars.month: return dict()
    month_start = request.vars.month
    selected=complete('piracyfinder',month_start)  #this line get the search results
    return DIV(*[DIV(k['title'],
                     _onclick="jQuery('#month').val('%s')" % k['title'],
                     _onmouseover="this.style.backgroundColor='lightblue'",
                     _onmouseout="this.style.backgroundColor='white'"
                     ) for k in selected]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:23:02.460

`if not request.vars.month`也适用于`month`var 存在但为空。因此，它正在返回表单。

您需要执行以下操作之一：

*   让您的“建议”代码位于不同的页面/文件中
*   向请求中添加`isAJAX`变量（或其他方式来识别 AJAX 请求）
*   检查变量是否*存在*，而不是检查它是否是假的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:03:20.787

您似乎正在使用相同的函数（即`search()`）来填写建议以及创建表单（尽管该函数在提交时不会处理表单）。根据逻辑，当`request.vars.month`为空或不存在时，该函数返回一个空字典。这将导致相关视图（即/views/[控制器名称]/search.html）被执行并返回。大概 search.html 视图包含上面显示的 HTML 代码。因此，当您清除输入框时，keyup 处理程序被触发并发送一个空的月份变量，这导致表单的新副本被发送回并插入到“建议”div 中。`request.vars.month`您可以通过检查是否存在来避免此问题：

```
if not request.vars.month:
    return '' if 'month' in request.vars else dict() 
```

更好的方法可能只是对搜索表单和建议使用不同的功能，因为它们做完全不同的事情并且不共享任何代码。

# javascript - 正则表达式正在捕获所有内容，而不仅仅是括号中的“通配符” - 如何修复它？

> ID：15490335
> 
> 赞同：1
> 
> 时间：2013-03-19T02:07:14.543
> 
> 标签：javascript, regex, web-scraping, notepad++

我有以下字符串：

```
<p class=MsoNormal><b>Customer Email: <o:p></o:p></b></p></td><td width=""75%"" valign=top style='width:75.0%;border:none;padding:0in 0in 11.25pt 0in'><p class=MsoNormal><a href=""mailto:username@gmail.com"""> 
```

我正在尝试使用正则表达式从上述字符串中仅捕获电子邮件地址（username@gmail.com）。我正在使用以下正则表达式：

```
Customer Email.*?mailto:(.*?)" 
```

在 Notepad++ 中测试上面的正则表达式，而不是只匹配电子邮件地址，它匹配从（包括）`"Customer Email"`一直到`"`电子邮件地址后面的所有内容。

我需要正则表达式来匹配电子邮件地址，而正则表达式必须在其中执行此操作的平台是 Notepad++

关于为什么它匹配所有内容而不是它应该匹配的任何想法`(.*?)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:08:54.480

由于您能够使用 JavaScript，因此我建议您使用以下解决方案。我认为它比**不**应该以任何方式解析 HTML 的正则表达式更好。

这是[我在 JavaScript 中的做法](http://jsfiddle.net/6ey8R/)

```
var a = document.createElement("div"); //create a wrapper
a.innerHTML = '<p class=MsoNormal><b>Customer Email: <o:p></o:p></b></p></td><td width="\"75%\"" valign=top style=\'width:75.0%;border:none;padding:0in 0in 11.25pt 0in\'><p class=MsoNormal><a href="mailto:username@gmail.com">'; //your data
var ps = a.querySelectorAll("p"); //get all the p tags
var emails = [];
[].forEach.call(ps,function (pTag) { //for each p tag
    if(pTag.textContent.indexOf("Customer Email")===-1){
        return;//only add those with Costumer Email
    }
    var as= (pTag.querySelectorAll("a")); //get the links from it
    [].forEach.call(as,function(aTag){
        if(aTag.href && aTag.href.substring(0,7)==="mailto:"){ //for mailto links
           //got a match
               emails.push(aTag.href.substring(7)); //add the email address
        }
   });
});
console.log(emails); //emails now contains an array of your extracted emails 
```

请参阅[此问题](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)，了解为什么它是比使用正则表达式更好的方法。

* * *

在正则表达式中，这通常是通过[向后看来完成的](http://www.regular-expressions.info/lookaround.html)

```
(?<=Customer Email.*?mailto:)(.*?)(?=") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:09:48.823

它*匹配*的内容和*捕获*的内容是完全不同的东西。它只会捕获捕获组中的内容。尝试在代码中实际使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T02:10:50.883

* 是通配符。所以它会匹配一切。? 是一个狂野的角色。所以这就是为什么它匹配一切。

# scheme - 初学者方案：如何编写字符串小写

> ID：15490337
> 
> 赞同：0
> 
> 时间：2013-03-19T02:07:20.177
> 
> 标签：scheme, racket

我只是在阅读我的教科书时想知道如何有人可以在方案中为初学者编写字符串小写？非常感谢！

我知道如何使用 map 来做到这一点，但我想知道是否有更基本的方法来做到这一点，以便计划初学者可以在不知道 map 做什么的情况下理解。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:16:18.180

这次我会写算法的大致思路，你现在应该知道如何使用模板来写了：

1.  将字符串转换为字符列表，使用`string->list`
2.  遍历列表，并将每个字符转换为小写使用`char-downcase`
3.  用新转换的字符构建一个新列表
4.  最后，使用`list->string`

基本上我们正在*映射*字符串中的字符。有几种奇特的方法可以做到这一点，例如使用[序列](http://docs.racket-lang.org/reference/sequences.html?q=sequences)，或[`map`](http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Fmap..rkt%29._map%29%29)等，但现在，我相信我们最好坚持基础并从头开始学习如何做到这一点。

# c# - 如何添加下拉列表默认值 ID

> ID：15490343
> 
> 赞同：0
> 
> 时间：2013-03-19T02:07:58.253
> 
> 标签：c#, asp.net-mvc, drop-down-menu

所以在我看来，我有一个下拉列表。所以我想为默认选择添加一个 ID。这是我的控制器：

```
public ActionResult AddRemoveContract()
{
    var companyQuery = db.tblCompanies.OrderBy(c => c.CompanyName);
    ViewData["AllCompany"] = new SelectList(companyQuery, "PKComID", "CompanyName");
    return View();
} 
```

这是我的观点：

```
 @Html.DropDownList("ddlCompany", ViewData["AllCompany"] as SelectList, "--Select Company--", new { @onchange = "getSite(this.value);" }) 
```

我选择的列表是这样的

```
<select id="ddlCompany" onchange="getSite(this.value);" name="ddlCompany">
    <option value="">--Select Company--</option> // want to add value="0"
    <option value="9">Company A</option>
    <option value="11">Company B</option>
</select> 
```

我想为“--Select Company--”添加值“0”。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:27:52.607

选定的值必须是*值*，而不是 的文本`SelectListItem`。换句话说，您的代码应该是：

```
@Html.DropDownList("ddlCompany", ViewData["AllCompany"] as SelectList, "", new { @onchange = "getSite(this.value);" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:15:48.227

我将创建一个联合查询，第二个查询具有您想要的默认值。至少，您以后不必尝试跳过箍来尝试将其添加到 HTML 选择列表中，因为它已经在`ViewData["AllCompany"]`列表中

# python - 我如何在 django admin 中为模型使用构造函数

> ID：15490345
> 
> 赞同：0
> 
> 时间：2013-03-19T02:08:03.443
> 
> 标签：python, django

我正在为我的网站使用 django admin。我有班级学生和管理员正在自动生成表格。

现在我想根据登录的用户位置在学生模型本身中初始化位置值。

我不想在形式上做，而是在模型中做类似的事情

```
class Student:

   def __init__(self):
       self.location = get_logged_user_location() 
```

是否可以仅在 Mdel 中这样做

我正在尝试这样

```
def __init__(self, *args, **kwargs):
        super(Student, self).__init__(*args, **kwargs)
        self.name="test" 
```

但它不工作。我在表单中得到空的文本字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:16:42.143

**应该：**

```
def __init__(self, *args, **kwargs):
    self.name="test"
    super(Student, self).__init__(*args, **kwargs) 
```

# c# - 将 Windows Phone 7 应用程序中的图像文件上传到 PHP

> ID：15490347
> 
> 赞同：4
> 
> 时间：2013-03-19T02:08:13.230
> 
> 标签：c#, php, windows-phone-7, file-upload

我正在尝试从图片库（在 WP7 上）上传图片并将其保存在服务器上的文件夹中。

在服务器上，我使用 PHP 通过 POST 方法接收文件。PHP代码是：

```
<?php
$uploads_dir = 'files/'; //Directory to save the file that comes from client application.
if ($_FILES["file"]["error"] == UPLOAD_ERR_OK) {
    $tmp_name = $_FILES["file"]["tmp_name"];
    $name = $_FILES["file"]["name"];
    move_uploaded_file($tmp_name, "$uploads_dir/$name");
}
?> 
```

我已经尝试了一些方法，但它们似乎都失败了。我已经使用 Client.UploadFile 方法在 Windows 窗体应用程序中完成了这项工作，但它似乎不能在 Windows Phone 应用程序上使用。

我认为 httpwebrequest 可以提供帮助，对吧？

到目前为止，这是我的 C# 代码：

```
public partial class SamplePage : PhoneApplicationPage
    {
        public SamplePage()
        {
            InitializeComponent();
        }

        PhotoChooserTask selectphoto = null;

        private void SampleBtn_Click(object sender, RoutedEventArgs e)
        {
            selectphoto = new PhotoChooserTask();
            selectphoto.Completed += new EventHandler<PhotoResult>(selectphoto_Completed);
            selectphoto.Show();
        }

        void selectphoto_Completed(object sender, PhotoResult e)
        {
            if (e.TaskResult == TaskResult.OK)
            {
                BinaryReader reader = new BinaryReader(e.ChosenPhoto);
                image1.Source = new BitmapImage(new Uri(e.OriginalFileName));
                txtBX.Text = e.OriginalFileName;
            }
        }
    } 
```

我在某处读到需要将图像转换为一串字节，我不确定。但是，请帮助我。

提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T21:39:54.697

我会将图像转换为 base64（请参阅 System.Convert），然后通过 POST 传输：

```
 HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://mydomain.cc/saveimage.php");
            request.Method = "POST";
            request.ContentType = "application/x-www-form-urlencoded";
            string postData = String.Format("image={0}", myBase64EncodedImage);   

            // Getting the request stream.
            request.BeginGetRequestStream
                (result =>
                {
                    // Sending the request.
                    using (var requestStream = request.EndGetRequestStream(result))
                    {
                        using (StreamWriter writer = new StreamWriter(requestStream))
                        {
                            writer.Write(postData);
                            writer.Flush();
                        }
                    }

                    // Getting the response.
                    request.BeginGetResponse(responseResult =>
                    {
                        var webResponse = request.EndGetResponse(responseResult);
                        using (var responseStream = webResponse.GetResponseStream())
                        {
                            using (var streamReader = new StreamReader(responseStream))
                            {
                                string srresult = streamReader.ReadToEnd();
                            }
                        }
                    }, null);
                }, null);
        } 
```

saveimage.php 应该如下所示：

```
<?
function base64_to_image( $imageData, $outputfile ) {
    /* encode & write data (binary) */
    $ifp = fopen( $outputfile, "wb" );
    fwrite( $ifp, base64_decode( $imageData ) );
    fclose( $ifp );
    /* return output filename */
    return( $outputfile );
}       

if (isset($_POST['image'])) {
    base64_to_jpeg($_POST['image'], "my_path_to_store_images.jpg");
}
else
    die("no image data found");
?> 
```

注意：我没有测试过代码。可能有错别字或其他错误。这只是为了说明我将如何使用 POST 传输图像。

编辑作为对您的评论的回复：我手头没有编码为 base64 的代码，但这里是您如何在 C# 中解码 base64 编码的图像：

```
byte[] image = Convert.FromBase64String(str); 
```

# macos - 连接到 ec2 Ubuntu 机器上的远程 MySQL 数据库

> ID：15490348
> 
> 赞同：0
> 
> 时间：2013-03-19T02:08:15.910
> 
> 标签：macos, r

我已经看到了一些关于 SO 的相关问题，但没有一个对我有帮助。我在 EC2 上的 Ubuntu 机器上设置了 MySQL 数据库。我正在尝试从 R 中连接到它，使用例如，

```
con <- dbConnect(MySQL(), username = user, dbname = db, host = host, password = password) 
```

其中用户名和密码是远程数据库的用户名和密码，主机是 ec2 地址（类似于`ec2-54-456-161-6.us-west-2.compute.amazonaws.com`[不是真实的]）

关于如何做到这一点的任何想法？

要从我机器上的 shell 登录到 Ubuntu 机器，我必须使用密钥 pem 文件。是否必须提供此密钥才能进行身份验证？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:03:46.100

我的问题是我只需要向安全组添加一个新规则以允许端口 3306 上的远程连接。请参见下面添加的规则的屏幕截图（底线）

![在此处输入图像描述](../Images/1d391984601435b9e4db67e389876fd8.png)

这就是我们所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:14:29.503

确保 MySQL 实例在网络上侦听，即使您在同一台机器上。在`/etc/mysql/my.cnf`中，改变这个：

```
# Instead of skip-networking the default is now to listen only on
# localhost which is more compatible and is not less secure.
bind-address        = 127.0.0.1 
```

这应该在许多 MySQL 教程中，而不是特定于 EC2。

您要确保可以从服务器本身连接到数据库。一旦处理好，请尝试远程访问。如果端口最终被阻塞，您还可以获得 ssh 隧道的路由——这在许多教程中都有描述。

# php - 单例和子类

> ID：15490358
> 
> 赞同：0
> 
> 时间：2013-03-19T02:09:09.787
> 
> 标签：php, pdo, singleton, multiple-instances

我正在一个与 PHP 中的 OOP 一起工作的项目中工作。

问题是当我尝试从一个抽象类实例化两个子类时，只有第一个实例而不是两个实例。

数据库.php：

```
abstract class DataBase {

    private $_connection;

    private static $_singleton = false;

    /**
     * Fetch an instance of the class.
     */
    public final static function connect () {
        if ( self::$_singleton === false ) {
            self::$_singleton = new static();
        }

        return self::$_singleton;
    }
} 
```

UserDataBaseManager.php：

```
require_once 'DataBase.php';

class UserDataBase extends DataBase { (...) } 
```

ImageDataBaseManager.php：

```
require_once 'DataBase.php';

class UserDataBase extends DataBase { (...) } 
```

所以，当我试图实例化 ImageDataBase 和 UserDataBase 时：

```
$imageDB = ImageDataBaseManager::connect();
$userDB = UserDataBase::connect();
var_dump($userDB); 
```

这打印：

```
object(ImageDataBaseManager)#2 (1) { ["_connection":"DataBase":private]=> object(PDO)#3 (0) { } } 
```

所以我只得到第一类实例，但我想要两者。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:35:38.650

当您启动一个新的 ImageDataBaseManager 时，它将对象存储在抽象类的 $_singleton 中，并且下次 UserDataBase::connect 请求一个新实例时它会返回它（静态属性不依赖于实例）。因此，子类化单例模式可能不是一个好主意。但是，要使其正常工作，您需要将实例存储在子类而不是父类中。父类及其静态属性对两者都是通用的（在运行时）。请参考此代码。子类有自己的 $_singleton 来存储实例。

```
abstract class DataBase {

    private $_connection;

    protected static $_singleton = false;

    /**
     * Fetch an instance of the class.
     */
    public final static function connect () {
        if ( static::$_singleton === false ) {
            static::$_singleton = new static();
        }

        return static::$_singleton;
    }
}

class UserDataBase extends DataBase { protected static $_singleton = false; }

class ImageDataBaseManager extends DataBase { protected static $_singleton = false; }

$imageDB = ImageDataBaseManager::connect();
$userDB = UserDataBase::connect();
var_dump($userDB); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:21:01.200

试试这个：

```
protected static $_singleton = false;

public final static function connect () {
    if ( static::$_singleton === false ) {
        static::$_singleton = new static();
    } 
```

# android - Android 数据库游标返回错误结果

> ID：15490365
> 
> 赞同：0
> 
> 时间：2013-03-19T02:09:56.360
> 
> 标签：android, database, sqlite, cursor, alarmmanager

我有一个闹钟应用程序，我正在尝试制作一种方法来删除所有已设置的闹钟并从数据库中删除所有记录。

使用这种方法，我在设置警报时检索我的 RequestCode 以获取待处理的意图：

```
public static void CursorRQ() {
    Cursor cursor;
    Integer cursorRQ;
    cursor = DatabaseManager.getAllData();
    cursor.moveToFirst();
    if (!cursor.isAfterLast()) {
        do {
            cursorRQ = cursor.getInt(0);
            if (cursorRQ >= RQ) {
                RQ = RQ + 1;
            }
        }
        while (cursor.moveToNext());
    }
    cursor.close();
} 
```

现在，取消并且一切正常，直到我删除数据库表：

```
public static void deleteAll() {        
    db.delete(TABLE_NAME, null, null);
} 
```

当我开始设置新的闹钟时。他们设置了正确的请求代码（从 1 开始），然后为每个新警报 +1，但是当我再次尝试取消所有警报时，使用此方法：

```
Cursor cursor = DatabaseManager.getAllData();
cursor.moveToFirst();
int IDRQ = cursor.getInt(0);                
while(cursor.moveToNext()) {
    IDRQ = cursor.getInt(0);                
} 
```

用起始数字填充光标，就好像我从未从数据库中删除过这些值一样。

例如，我设置了 3 个警报，它们得到请求代码 1、2、3。我将它们全部删除，它们被完全删除并取消，然后我设置了新警报，它们再次设置为 1、2、3，但是当我取消它们时，该方法取消了请求编号为 4、5、6 的待处理意图，就好像我从未删除过记录一样。

# c - sscanf 使用 c 浮动

> ID：15490368
> 
> 赞同：2
> 
> 时间：2013-03-19T02:10:26.620
> 
> 标签：c, floating-point, floating-point-conversion

所以我有一个包含多个字符串的文件。我应该用来`fgets`读取每一行，然后`sscanf`用来分解字符串并将它们处理到我的结构中。这是一个例子。

```
38L Lee, Victor; 2.8 
```

第一个是 id，第二个是 name，最后是 gpa。当我尝试使用 sscanf 读取 gpa 时，它读取的是 0.0，而不是 2.8。这是我的代码。

```
bool getstu (FILE* fpstu, STU* pstu)
{

//  Local Definitions
    int ioResult;
    char temp[100];
    char *ptr;
    char tempStr[50];

//  Statements
    fgets(temp, sizeof(temp), fpstu);
    {
        ptr = temp;
        sscanf(ptr, "%3s", pstu->id);
        ptr += strlen(pstu->id) + 1;
        sscanf(ptr, "%[^;]", tempStr);

        pstu->name = aloName(tempStr);

        ptr += strlen(tempStr) + 2;
        sscanf(ptr, "%s", tempStr);
        sscanf(tempStr, "%3.1f", pstu->gpa);
    }

return ioResult == 1;
}// getstu 
```

有人可以向我解释我做错了什么以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T02:30:10.037

```
sscanf(tempStr, "%3.1f", pstu->gpa); 
```

应该

```
sscanf(tempStr, "%3.1f", &(pstu->gpa)); 
```

， 我认为。

# ruby-on-rails - 在 JavaScript 中访问 c urrent_user 助手

> ID：15490369
> 
> 赞同：8
> 
> 时间：2013-03-19T02:10:28.460
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我在 /assets/javascripts/globals.js.erb 中使用 Rails 3.2.13 和 JavaScript。无论如何可以访问 JavaScript 文件中的 Rails 助手或控制器数据吗？就像是...

```
var App = {
  globals: {
    user: {
      name: '<%= current_user.name %>'
    }
  }
}; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T02:20:25.870

你不能那样做。资产在生产中编译一次，因此它不应依赖于请求的状态（如当前用户，或传递给请求的参数）。您可以做的最接近的事情是在应用程序布局中添加一个全局变量

```
<script type="javascript">
  App.globals.user.name = <%= current_user.name %>
</script> 
```

# javascript - 在命令行脚本中包含没有 HTML 或 DOM 的 JS 文件中的 Javascript 文件

> ID：15490370
> 
> 赞同：4
> 
> 时间：2013-03-19T02:10:28.660
> 
> 标签：javascript, unit-testing, command-line, include

我正在尝试对可以从命令行运行的 JS 代码编写一些简单的测试，以测试与 HTML、文档或用户界面无关的代码。为此，我需要在另一个文件中包含一个文件，以将正在测试的代码拉入测试脚本。我发现需要 HTML 或 DOM 来完成这项工作；例如，像 document.write() 之类的东西。有没有一种简单的方法可以做到这一点？我正在成像 include("code2test.js"); 我将不胜感激任何帮助解决这个问题。JQuery 可以提供帮助还是必须在 HTML/浏览器上下文中使用？

在此先感谢.j

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:21:53.560

听起来你需要的是[Require.js](http://requirejs.org/)。它旨在允许使用 javascript 而不是脚本标签在网页中包含 javascript。例如，而不是：

```
<script scr="foo.js"></script>
<script>
    use_foo_here();
</script> 
```

使用 Require.js 你可以写：

```
require(["foo.js"],function(foo){
    use_foo_here();
}) 
```

Require.js 最酷的地方在于它甚至可以在[Node.js](http://nodejs.org/)上使用。因此，对于命令行调用，您可以使用 Node 来运行您的脚本，并且这些`require()`语句将像在网页上一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T02:15:13.547

听起来您只需要两个脚本标签：

```
<script type="text/javascript" src="code2test.js"></script>
<script type="text/javascript" src="testscript.js"></script> 
```

如果这不起作用，请尝试颠倒顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T02:19:47.273

如果您只想在不使用浏览器的情况下访问 javascript 引擎（例如 Webkit），您可以使用[nodeJS](http://nodejs.org/)或[PhantomJS之类的东西](http://phantomjs.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T08:42:18.303

我们使用[Chutzpah](http://chutzpah.codeplex.com/)作为我们的测试运行器，并且对它非常满意。[我们使用Jasmine](http://pivotal.github.com/jasmine/)编写测试。Jasmine 不需要 DOM。

在测试文件的开头，添加了对被测 JavaScript 文件的引用，如下所示：

```
/// <reference path="dependantModule.js" />
/// <reference path="code2test.js" /> 
```

然后测试代码如下：

```
describe("code2test test suite", function () {

    it("should do something"", function () {
        var result;

        // Assuming code2test.js exposes a global called 'code2test'
        result = code2test.doSomething();
        expect(result).toEqual("the expected result");
    });
}); 
```

Chutzpah 使用 PhantomJS 无头浏览器。因此，如果需要，您可以编写与 DOM 交互的测试。

我们从命令行通过 Chutzpah 运行测试以进行持续集成，但也使用 Chutzpah Visual Studio Extension 在 Visual Studio 2010 中运行它们。我相信在 VS2012 中集成 Chutzpah 更容易，但我自己没有尝试过。

测试也可以在“真正的”浏览器中运行，这非常适合调试。我选择的用于调试测试代码的浏览器是 Chrome——开发者工具很棒。

# ruby-on-rails - 多对多关系中按联接表属性排序

> ID：15490371
> 
> 赞同：0
> 
> 时间：2013-03-19T02:10:31.983
> 
> 标签：ruby-on-rails, activerecord, associations

我在简历和教育之间有多对多的关系，这允许相同的教育条目出现在多份简历上。在简历上显示教育时，我希望为该特定简历订购教育。为此，我设置了一个连接表 Educations_Resumes，其中订单信息作为属性。

但是，当我尝试类似 resume.educations 时，我收到以下错误：

```
ActiveRecord::StatementInvalid: SQLite3::SQLException: near "order": syntax error: 
SELECT "educations".* FROM "educations" INNER JOIN "educations_resumes" ON 
"educations"."id" = "educations_resumes"."education_id" WHERE 
"educations_resumes"."resume_id" = 2 ORDER BY educations_resumes.order 
```

模型设置为：

```
class Resume < ActiveRecord::Base
  has_many :educations_resumes
  has_many :educations, :through => :educations_resumes,
           :order => 'educations_resumes.order'

end

class EducationsResume < ActiveRecord::Base
  belongs_to :resume
  belongs_to :education
end

class Education < ActiveRecord::Base
  has_many :educations_resumes
  has_many :resumes, :through => :educations_resumes
end 
```

任何有关如何正确订购 resume.educations 的建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:13:36.173

您正在使用关键字作为列名：

[http://www.sqlite.org/lang_keywords.html](http://www.sqlite.org/lang_keywords.html)

运行迁移并更改列名：

```
rails g migration FixColumnName 
```

这将为您提供一个空的迁移文件，您应该填写以下内容：

```
class FixColumnName < ActiveRecord::Migration
  def change
    rename_column :educations_resumes, :order, :ordering
  end
end 
```

# database - 如何从数据库中加载 Wordpress 中的自定义帖子类型字段值？

> ID：15490372
> 
> 赞同：0
> 
> 时间：2013-03-19T02:10:33.487
> 
> 标签：database, wordpress, custom-post-type

我正在阅读有关在 Wordpress 中创建自定义帖子类型的[链接。](http://www.makeuseof.com/tag/events-listing-custom-post-types-wordpress/)在示例中，字段值框是文本，用户可以在其中输入任何内容。我想知道是否可以将该字段值框转换为下拉框，这些值是从数据库中加载的。例如，在“日期”下，旁边有一个下拉框，其中包含从数据库加载的日期。有谁知道这是否可能？谢谢！

# java - 是什么导致此处出现“NullPointerException”错误，我该如何解决？

> ID：15490375
> 
> 赞同：-1
> 
> 时间：2013-03-19T02:11:45.590
> 
> 标签：java, nullpointerexception

我试图制作一个简单的应用程序来试验 Java 图形，但我遇到了这个错误，所以如果有人能帮助我，我将不胜感激。:)

我得到以下

```
 Exception in thread "main" java.lang.NullPointerException
at Main.draw(Main.java:41)
at Main.createGUI(Main.java:36)
at Main.main(Main.java:20)
 Java Result: 1 
```

当我尝试运行以下代码时出错：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Main extends JFrame {
private static final long serialVersionUID = 1L;

public JPanel panel;

public static void main(String[] args) {

    Main m = new Main();
    m.setSize(500, 700);
    m.setDefaultCloseOperation(EXIT_ON_CLOSE);
    m.createGUI();
    m.setVisible(true);

}
private void createGUI() {
    Container window = getContentPane();

    panel = new JPanel();
    panel.setPreferredSize(new Dimension(500, 700));
    panel.setBackground(Color.WHITE);
    window.add(panel);

    Graphics paper = panel.getGraphics();
    draw(paper);

}

private void draw(Graphics g){
    g.drawRect(100, 100, 100, 100);
}
} 
```

有人可以告诉我如何解决这个问题以及错误的原因是什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T02:14:33.907

`Graphics`这条线上的对象

```
g.drawRect(100, 100, 100, 100); 
```

就像`null`您`JComponent#getGraphics` *在*UI 可见之前使用的那样。这就是为什么通过[覆盖](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29). `JPanel` `panel`这将保证`Graphics` `Object`在使用之前先初始化。

*   [更多关于定制绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T02:20:15.043

永远不要使用`getGraphics`.

如您所见，它可以返回`null`。它充其量只是最后一个油漆周期的快照。您在其上绘制的任何内容都将在下一个绘制周期中被覆盖。

Swing 中的绘画是无状态的。也就是说，在每个绘制周期中，您都需要重新绘制所有想要绘制的东西。

查看自定义绘画，了解在 Swing 中执行自[定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)的概述

+1 到 reimeus

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T02:14:15.973

这`NullPointerException`是由`Graphics g`为空引起的，并且您尝试使用`null`对象来调用其中一种`Graphics`方法。

如果您搜索，您会发现`panel.getGraphics()`返回 null 是一个常见问题，并且有一些解决方案。请参阅：[调用返回 null 的 getGraphics() 的任何替代方法](https://stackoverflow.com/questions/8184913/any-alternative-to-calling-getgraphics-which-is-returning-null)

# java - 具有一个功能的快速排序算法

> ID：15490377
> 
> 赞同：-1
> 
> 时间：2013-03-19T02:11:57.170
> 
> 标签：java, quicksort

```
public static void sort(int[] a){
        if (a.length>1){
            int pivot=a[a.length-1];
            int left=0;
            int right=a.length-1;
            while(left<=right){
                while(a[left]<pivot)
                    left++;
                while(a[right]>pivot)
                    right--;
                if(left<=right){
                    int tmp=a[right];
                    a[right]=a[left];
                    a[left]=tmp;
                    left++;
                    right--;
                }
            }
            int[] tmp1=new int[right];
            for(int i=0;i<tmp1.length;i++)
                tmp1[i]=a[i];
            int[] tmp2=new int[a.length-right-1];
            for(int i=left;i<a.length;i++)
                tmp2[i-left]=a[i];
            sort(tmp1);
            sort(tmp2);
        }
    } 
```

我试图用一个函数编写一个快速排序算法，但它不起作用。任何帮助都是值得的。谢谢

编辑：我解决了谢谢大家的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:20:06.597

我认为问题在于最后你没有使用`tmp1`and`tmp2`来符合新数组`a`......这是一种不创建其他数组的方法：

```
 public static void sort(int[] a, int left, int right){
        if (left < right){
            int pivot = a[right];
            int pos = left - 1;
            for (int i = left; i < right; i++)
                if (a[i] <= pivot)
                    Swap(a, ++pos, i);
            Swap(a, pos + 1, right);
            sort(a, left, pos);
            sort(a, pos + 1, right);
        }

    }

    public  static void Swap(int[] a, int i, int j){
        int temp = a[j];
        a[j] = a[i];
        a[i] = temp;
    } 
```

排序的第一个调用必须是`sort(a, 0, a.length - 1)`

我希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:28:52.147

与大多数 int 排序方法相比，您的排序方法似乎非常极端。这是一个快速简便的方法。

```
public static void sort(int[] intArray){
    int n = intArray.length;
    int temp = 0;
    for(int i=0; i < n; i++){
        for(int j=1; j < (n-i); j++){
            if(intArray[j-1] > intArray[j]){
                temp = intArray[j-1];
                intArray[j-1] = intArray[j];
                intArray[j] = temp;
            }
        }
    }
} 
```

这只是一个冒泡排序。我没有看到递归的意义。还有很多其他类型的排序，但对于较短的数组长度，这是最简单的（IMO）。查找其他一些，它们的工作有点酷（[排序算法](http://en.wikipedia.org/wiki/Sorting_algorithm)）。

回答你的问题....就像@RobinCurbelo 说的那样，你没有正确使用`temp1`和使用`temp2`。你的想法是存在的，但我认为你对你需要做的事情考虑得太多了。

# php - 根据用户组重定向到登陆页面或主页索引

> ID：15490379
> 
> 赞同：1
> 
> 时间：2013-03-19T02:12:06.523
> 
> 标签：php, javascript, html, joomla

我尝试使用谷歌搜索并使用 forums.joomla.org，因为我想确保我没有在这里浪费人们的时间，但不幸的是我没有运气。这是我的问题：

对于我的网站，我有一个登录页面，其中只有免费注册成为会员的链接，以及一个用户注册后访问的适当索引页面。我将登陆页面设置为 kanadax.ca/，因为我希望人们在第一次访问该页面时就登陆该页面。我真正的索引页面位于 kanadax.ca/index.php。但是，现在当用户已经登录并单击网站徽标转到根域时，他们会收到一个找不到页面的错误。

所以我想做的是： - 如果它是未注册的访客用户，请将徽标重定向到位于 kanadax.ca/ 的登录页面。- 用户注册后，无论何时他们访问 kanadax.ca/index.php，它都应该重定向到 example.com/index.php。

基本上我正在寻找基于用户组的条件重定向。有任何想法吗？

现在显然我更喜欢 example.com/ url 作为主索引页面，而不是不太吸引人的 example.com/index.php，但这是我修复重定向后的第二步。我相信它可以使用 .htaccess 来完成，但是对于访客和注册用户而言，我认为使用更复杂的登录页面 - 索引页面结构可能会有点困难。但是，如果您在这方面也有任何反馈，请务必提供反馈。

我应该提到我对 php 不是很满意，但如果你想一步一步地给我一个建议，我很乐意尝试任何建议。毕竟，我做这个网站的首要目标是学习！

谢谢一堆！

PS 如果有必要，我很乐意提供一个测试帐户，这样您就可以自己玩这个网站了。

**编辑：

嘿@Adam，我真的很感激你的意见和一步一步的，这正是我所需要的。现在，我将第一部分放在 index.php 的开头，但是对于后一部分，我不太确定该放在哪里。当我在 index.php 中搜索任何相关的徽标时，会出现两个单独的部分：

```
// Logo file or site title param
if ($this->params->get('logoFile'))
{
  $logo = '<img src="'. JURI::root() . $this->params->get('logoFile') .'" alt="'. $sitename .'" />';
}
elseif ($this->params->get('sitetitle'))
{
  $logo = '<span class="site-title" title="'. $sitename .'">'. htmlspecialchars($this->params->get('sitetitle')) .'</span>';
}
else
{
  $logo = '<span class="site-title" title="'. $sitename .'">'. $sitename .'</span>';
} 
```

和

```
<div class="header">
        <div class="header-inner clearfix">
          <a class="brand pull-left" href="http://www.kanadax.ca/index.php/anasayfa">
            <?php echo $logo;?> <?php if ($this->params->get('sitedescription')) { echo '<div class="site-description">'. htmlspecialchars($this->params->get('sitedescription')) .'</div>'; } ?>
          </a>
          <div class="header-search pull-right">
            <jdoc:include type="modules" name="position-0" style="none" />
          </div>
        </div>
      </div> 
```

第二部分在标题下。您认为其中任何一个是正确的部分吗？如果是这样，我应该删除那里的内容并替换为您的建议，还是保留它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:23:29.400

尝试通过以下方式修改您的模板 index.php 文件：

1.  在代码开头的某处添加它

    ```
    $user = JFactory::getUser();
    if(JFactory::getUser()->id)
    {
        //link to page for registered users 
        $link =  JRoute::_('index.php?option=com_content&view=article&id=3');
    }else{
        //link to page for default users 
        $link =  JRoute::_('index.php?option=com_content&view=article&id=1');   
    } 
    ```

2.  在应该显示标志的地方

    ```
    <a href="<?php echo $link; ?>">
        <img src="images/path_to_image_name"/>
    </a> 
    ```

就是这样！稍后当您更熟悉 Joomla 和 PHP 时，您可以创建自定义模块而不是直接注入模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T01:55:01.550

如果您不想破解任何东西，您也可以尝试在调试或其他位置的自定义 html 模块中粘贴一些重定向代码，但使用高级模块管理器仅为访客加载它或仅为登录用户加载它。您可以使用 AMM 执行各种技巧来加载和不加载基于无数参数的内容。

亚当的回答更简洁，但有些人真的很犹豫要破解他们的模板（或者如果它是一个商业模板，找到合适的位置来放置代码可能真的很混乱）。

您可以在此处阅读有关 AMM 的更多信息： [http ://www.nonumber.nl](http://www.nonumber.nl)

# mysql - 为什么我的查询加载速度比普通查询慢

> ID：15490383
> 
> 赞同：0
> 
> 时间：2013-03-19T02:12:27.347
> 
> 标签：mysql, sql

有没有完美的解释为什么我的查询加载速度会慢到 100 秒？

是否有任何可能的重建以使我的查询加载更快？

```
 SELECT IF(IMI.BRANCH_CODE IS NOT NULL AND IMI.PRODCODE IS NOT NULL AND IMI.POLNO IS NOT NULL,"Y","N") as STATUS,
                        NOW(),ICH.CLAIM_NO,ICH.BRANCH_CODE,
                        ICH.PRODUCT_TYPE,ICH.POLICY_NO,ICH.ASSURED_NAME,
                        ICH.AGENT_NO,ICH.INCEPTION_DT,ICH.EXPIRY_DT,
                        ICH.DT_REPORTED,IMI.BASIC_PREMIUM,ICH.CLAIM_STATUS,
                        IRPD.CLAIM_RESERVE,IRPD.TOTAL_AMT_RECOMMENDED,IRPD.DT_RECOMMENDED,
                        IMI.UW_YEAR,ICDO.PLATE_NO,ICDO.CHASSIS_NO,
                        ICDO.MOTOR_NO,IMI.LOCATION,IMI.RISKNO,IMI.SEQNO
                    FROM `ICATS_CLAIM_HEADER` ICH  
                    LEFT JOIN `ICATS_CLAIM_DETAILS_OD` ICDO ON ICH.CLAIM_NO = ICDO.CLAIM_NO
                    LEFT JOIN `ICATS_MULTIPLE_LOSS` IML ON ICH.CLAIM_NO = IML.CLAIM_NO
                    LEFT JOIN (SELECT * FROM ICATS_RESERVE_PAYMENT_DETAILS 
                                WHERE DATEDIFF(NOW(),DT_RECOMMENDED)=1 OR DATEDIFF(NOW(),RESERVE_DT)=1) IRPD 
                                ON ICH.CLAIM_NO = IRPD.CLAIM_NO
                    LEFT JOIN (SELECT POLNO,PRODCODE,BRANCH_CODE,MAX(SEQNO)as SEQNO FROM IWRITE_MOTOR_INFO 
                                GROUP BY POLNO,PRODCODE,BRANCH_CODE) IM 
                                ON ICH.POLICY_NO = IM.POLNO AND ICH.BRANCH_CODE = IM.BRANCH_CODE AND ICH.PRODUCT_TYPE = IM.PRODCODE 
                                JOIN IWRITE_MOTOR_INFO IMI 
                                ON IM.POLNO = IMI.POLNO AND IM.PRODCODE = IMI.PRODCODE AND IM.BRANCH_CODE = IMI.BRANCH_CODE AND IM.SEQNO = IMI.SEQNO
                    WHERE (DATEDIFF(CURDATE(),ICH.CLAIM_STATUS_DT)=1
                            OR DATEDIFF(NOW(),ICDO.TRANSACTION_DT)=1
                            OR DATEDIFF(NOW(),IRPD.RESERVE_DT)=1
                            OR DATEDIFF(NOW(),IRPD.DT_RECOMMENDED)=1)
                ORDER BY ICH.CLAIM_NO,IRPD.SEQUENCE_NO ASC 
```

总的来说，这里是我的整个查询。事实上，在检查所有要插入的数据时，我的查询似乎加载慢到 100 秒。

```
INSERT INTO `ICATS_IINSURE_CLAIM_HEADER`(IINSURE_EXIST,RECORD_CREATED_DT,CLAIM_NUMBER,BRANCH_CODE,PRODCODE,POLNO,ASSURED_NAME1,
                AGENT_CODE,INCEPTION,EXPIRY,DATE_REPORTED,BASIC_PREMIUM,
                CLAIM_STATUS,RESERVE_AMOUNT,CLAIMS_PAID_AMOUNT,
                DATE_RECOMMEND_PAYMENT,UW_YEAR,PLATE_NUMBER,
                CHASSIS,ENGINE,LOCATION,RISKNO,SEQ)
            SELECT IF(IMI.BRANCH_CODE IS NOT NULL AND IMI.PRODCODE IS NOT NULL AND IMI.POLNO IS NOT NULL,"Y","N") as STATUS,
                NOW(),ICH.CLAIM_NO,ICH.BRANCH_CODE,
                ICH.PRODUCT_TYPE,ICH.POLICY_NO,ICH.ASSURED_NAME,
                ICH.AGENT_NO,ICH.INCEPTION_DT,ICH.EXPIRY_DT,
                ICH.DT_REPORTED,IMI.BASIC_PREMIUM,ICH.CLAIM_STATUS,
                IRPD.CLAIM_RESERVE,IRPD.TOTAL_AMT_RECOMMENDED,IRPD.DT_RECOMMENDED,
                IMI.UW_YEAR,ICDO.PLATE_NO,ICDO.CHASSIS_NO,
                ICDO.MOTOR_NO,IMI.LOCATION,IMI.RISKNO,IMI.SEQNO
            FROM `ICATS_CLAIM_HEADER` ICH  
            LEFT JOIN `ICATS_CLAIM_DETAILS_OD` ICDO ON ICH.CLAIM_NO = ICDO.CLAIM_NO
            LEFT JOIN `ICATS_MULTIPLE_LOSS` IML ON ICH.CLAIM_NO = IML.CLAIM_NO
            LEFT JOIN (SELECT * FROM ICATS_RESERVE_PAYMENT_DETAILS 
                        WHERE DATEDIFF(NOW(),DT_RECOMMENDED)=1 OR DATEDIFF(NOW(),RESERVE_DT)=1) IRPD 
                        ON ICH.CLAIM_NO = IRPD.CLAIM_NO
            LEFT JOIN (SELECT POLNO,PRODCODE,BRANCH_CODE,MAX(SEQNO)as SEQNO FROM IWRITE_MOTOR_INFO 
                        GROUP BY POLNO,PRODCODE,BRANCH_CODE) IM 
                        ON ICH.POLICY_NO = IM.POLNO AND ICH.BRANCH_CODE = IM.BRANCH_CODE AND ICH.PRODUCT_TYPE = IM.PRODCODE 
                        JOIN IWRITE_MOTOR_INFO IMI 
                        ON IM.POLNO = IMI.POLNO AND IM.PRODCODE = IMI.PRODCODE AND IM.BRANCH_CODE = IMI.BRANCH_CODE AND IM.SEQNO = IMI.SEQNO
            WHERE (DATEDIFF(CURDATE(),ICH.CLAIM_STATUS_DT)=1
                    OR DATEDIFF(NOW(),ICDO.TRANSACTION_DT)=1
                    OR DATEDIFF(NOW(),IRPD.RESERVE_DT)=1
                    OR DATEDIFF(NOW(),IRPD.DT_RECOMMENDED)=1)
        ORDER BY ICH.CLAIM_NO,IRPD.SEQUENCE_NO ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T02:25:51.847

我认为最重要的原因之一是您的 where 子句只有功能。要解决此问题，请找到一种引入变量的方法，以便：

```
WHERE (DATEDIFF(CURDATE(),ICH.CLAIM_STATUS_DT)=1
OR DATEDIFF(NOW(),ICDO.TRANSACTION_DT)=1
OR DATEDIFF(NOW(),IRPD.RESERVE_DT)=1
OR DATEDIFF(NOW(),IRPD.DT_RECOMMENDED)=1) 
```

变成这样；

```
where ich.claim_status_dt >= a variable 
and ich.claim_status_dt < another variable
etc 
```

您可以将其设为存储过程并在那里设置变量，或者，如果此查询是 php/.net/coldfusion/whatever 应用程序的一部分，则在应用程序代码中设置变量并将它们转换为参数。

# ios - 有没有办法像“举起发言”功能一样监控用户的 iphone 动作？

> ID：15490385
> 
> 赞同：4
> 
> 时间：2013-03-19T02:13:09.243
> 
> 标签：ios, sensors, proximity, siri

当用户将 iphone 举到脸上时，我想得到通知。就像siri一样。是否可以？

添加更具体的要求：当用户将手机靠近耳朵时，我想使屏幕变暗。我知道接近传感器可以实现这一点。但令人讨厌的是，当用户在传感器上移动手指时，屏幕会不时变暗。所以我想知道如何避免这种情况，只在用户举起 iphone 说话时才使屏幕变暗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T02:24:40.647

请参阅*UIDevice 类参考*中的[使用接近传感器。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/doc/uid/TP40006902-CH3-SW29)那么你：

 **   启用它：

    ```
    UIDevice *device = [UIDevice currentDevice];
    device.proximityMonitoringEnabled = YES; 
    ```

*   检查是否启用成功；如果成功，请观察[`UIDeviceProximityStateDidChangeNotification`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/doc/uid/TP40006902-CH3-SW2)通知；如果没有，您的设备可能无法：

    ```
    if (device.proximityMonitoringEnabled)
    {
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(handleProximityChange:)
                                                     name:UIDeviceProximityStateDidChangeNotification
                                                   object:nil];
    }
    else
    {
         // device not capable
    } 
    ```

*   并编写您的选择器：

    ```
    - (void)handleProximityChange:(NSNotification *)notification
    {
        NSLog(@"%s proximityState=%d", __FUNCTION__, [[UIDevice currentDevice] proximityState]);
    } 
    ```

* * *

为了检测用户是否将手机举到了脸上，我可能会将接近传感器与手机结合起来，`CMMotionManager`然后查看`gravity`属性，看看他们是否几乎垂直地拿着手机。因此，定义一些类属性：

```
@property (nonatomic, strong) CMMotionManager *motionManager;
@property (nonatomic, strong) NSOperationQueue *deviceQueue; 
```

然后您可以启动`CMMotionManager`，查看设备是否保持在垂直位置：

```
self.deviceQueue = [[NSOperationQueue alloc] init];
self.motionManager = [[CMMotionManager alloc] init];
self.motionManager.deviceMotionUpdateInterval = 5.0 / 60.0;

UIDevice *device = [UIDevice currentDevice];

[self.motionManager startDeviceMotionUpdatesUsingReferenceFrame:CMAttitudeReferenceFrameXArbitraryZVertical
                                                        toQueue:self.deviceQueue
                                                    withHandler:^(CMDeviceMotion *motion, NSError *error)
{
    BOOL vertical = (motion.gravity.z > -0.4 && motion.gravity.z < 0.4 & motion.gravity.y < -0.7);
    if ((vertical && !device.proximityMonitoringEnabled) || (!vertical && device.proximityMonitoringEnabled))
    {
        device.proximityMonitoringEnabled = vertical;
    }
}]; 
```

这些`gravity`阈值是否有意义有点主观。您还可以查看其他加速度计数据（例如，他们是否举起物体），而不仅仅是查看手机是否大致垂直握持。似乎有很多方法可以给猫剥皮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-03T18:48:53.033

我知道这很旧，但我稍微简化了逻辑并在 Swift 中创建了一个包装类。

[你可以在这里找到它](https://gist.github.com/miketsprague/1e4c075f82d1e03ce327)

```
class DeviceRaisedToEarListener: NSObject {
private let deviceQueue = NSOperationQueue()
private let motionManager = CMMotionManager()
private var vertical: Bool = false

private(set) var isRaisedToEar: Bool = false {
    didSet {
        if oldValue != self.isRaisedToEar {
            self.stateChanged?(isRaisedToEar: self.isRaisedToEar)
        }
    }
}

var stateChanged:((isRaisedToEar: Bool)->())? = nil

override init() {
    super.init()
    self.setupMotionManager()
}

private func setupMotionManager() {
    self.motionManager.deviceMotionUpdateInterval = 5.0 / 60.0
    let device = UIDevice.currentDevice()

    // Only listen for proximity changes if the device is held vertically
    self.motionManager.startDeviceMotionUpdatesUsingReferenceFrame(CMAttitudeReferenceFrame.XArbitraryZVertical, toQueue: self.deviceQueue) { (motion, error) in
        self.vertical = (motion.gravity.z > -0.4 && motion.gravity.z < 0.4 && motion.gravity.y < -0.7)
    }
}

func startListening() {
    UIDevice.currentDevice().proximityMonitoringEnabled = true
    NSNotificationCenter.defaultCenter().addObserver(self, selector: "handleProximityChange:", name: UIDeviceProximityStateDidChangeNotification, object: nil)
}

func stopListening() {
    UIDevice.currentDevice().proximityMonitoringEnabled = false
    NSNotificationCenter.defaultCenter().removeObserver(self)
}

func handleProximityChange(notification: NSNotification) {
    self.isRaisedToEar = UIDevice.currentDevice().proximityState && self.vertical
}

deinit {
    self.stopListening()
}
}

// How to use:
private func setupRaiseListener() {
    self.deviceListener.stateChanged = { [weak self] isRaisedToEar in
      println("is raised? \(isRaisedToEar)")
    }
    self.deviceListener.startListening()
} 
```*

# arrays - 使用 LINQ 将 Object 的 MyList(,) 转换为 String 数组

> ID：15490387
> 
> 赞同：0
> 
> 时间：2013-03-19T02:13:13.013
> 
> 标签：arrays, vb.net, linq, visual-studio

我的一个应用程序的性能有一点问题，基本上是：

一个外部系统给了我一个大的结构作为一个`Object(,)`.

这种结构每行只有*一列*。

```
MyData(0,0) = 'COL1-ROW1 | COL2-ROW1 | COL3-ROW1'
MyData(1,0) = 'COL1-ROW2 | COL2-ROW2 | COL3-ROW2'
MyData(2,0) = 'COL1-ROW3 | COL2-ROW3 | COL3-ROW3'
MyData(3,0) = 'COL1-ROW4 | COL2-ROW4 | COL3-ROW4'

MyData(0,1) ' Doesn't exists. 
```

LINQ中有一些方法可以将此结构转换为一维字符串数组吗？

如果你可以按列划分，给定一个特定的字符，那就太棒了。

像这样的东西：

```
NewData(0,0) = COL1-ROW1
NewData(0,1) = COL2-ROW1
NewData(0,2) = COL3-ROW1
NewData(1,0) = COL1-ROW2
...
NewData(3,2) = COL3-ROW3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:48:16.443

似乎我从自己身上找到了答案；这是我的解决方案：

```
Dim vMyData(1000, 0) As Object

For x = 0 To 1000
    vMyData(x, 0) = String.Format("ROW{0}COL1|ROW{0}COL2|ROW{0}COL3|ROW{0}COL4", x)
Next

Dim vQuery = From TempResult In vMyData
         Select Value = TempResult.ToString.Split("|")

Dim vMyNewArray As New ArrayList(vQuery.ToArray) 
```

![在此处输入图像描述](../Images/7211b426157503b38202246dcb271fff.png)

现在; 存在一些方法来修剪每个值`Split("|")`？

[对上一个问题的更新]：

```
From TempResult In vMyData Select Value = Array.ConvertAll(TempResult.ToString.Split("|"), Function(vVal) vVal.ToString.Trim) 
```

# javascript - 触发单击以 id 以数字结尾的按钮

> ID：15490390
> 
> 赞同：1
> 
> 时间：2013-03-19T02:13:15.297
> 
> 标签：javascript, jquery, jquery-ui

我有一个要求，我`<input type="text" value="emailaddress">`在 jsp 页面上打印所有电子邮件地址。我应该能够编辑该字段，所以我在它的末尾有一个按钮。但电子邮件地址可以是任意数量。如何选择以任意数字结尾的按钮

```
$('#button_1').on("click", function() {

    //enter code here

});

 $('#button_2').on("click", function() {

        //enter code here

    }); 
```

我正在尝试做类似的事情

```
$('#button_'[]).on("click", function() {

}); 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T02:27:00.190

CSS 通配符：

```
$("button[id^='button_']").click(function() {
    // button elements with id starting with "button_"
    // return($(this).attr('id'));
});

$("button[id*='button_']").click(function() {
    // button elements with id containing "button_"
    // return($(this).attr('id'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T02:19:33.110

此外，您可以在这些按钮上放置一个类，而不是给出一个 Id，因为类可以被复制：

```
<button class='email' id="#button_1"/>
<button class='email' id="#button_2"/> 
```

然后更容易只选择这些：

```
$('.email').on("click", function() {
       // get access to the current button via this: 
       $(this).attr("value","delete"); 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T02:26:42.223

有一个[起始](http://api.jquery.com/attribute-starts-with-selector/)属性选择器。

您可以执行以下操作：

```
$('[id^="button_"]').on('click', function () {
  // your code here
}); 
```

`$('[id^="button_"]')`选择所有 id 以 开头的元素`button_`。然后，您可以绑定一个处理程序来满足所有按钮事件。

# properties - 为属性添加子类化 UILocalNotification

> ID：15490391
> 
> 赞同：1
> 
> 时间：2013-03-19T02:13:15.480
> 
> 标签：properties, uilocalnotification

我试图取消带有特定标签号的 localNotifications。这是我最喜欢使用标签号进行比较逻辑的方式。

因此，我将 UILocalNotification 子类化并添加属性 NSInteger 标记。然后使用子类实例来调度localNotification。

> CustomNotification *customNoti = [[CustomNotification alloc] init];
> customNoti.fireDate = myDate;
> customNoti.timeZone = [NSTimeZone defaultTimeZone];
> customNoti.tag = self.tag; // 崩溃
> // 错误：-[UIConcreteLocalNotification setTag:]: unrecognized selector sent to instance 0x75a3630

这是 CustomNotification.h 文件

> `#import <UIKit/UIKit.h>`
> 
> @interface CustomNotification : UILocalNotification
> 
> @property (nonatomic, assign) NSInteger 标签；
> @结尾

为什么会崩溃并显示“无法识别的选择器”消息？UILocalNotification 类是特殊的吗？我找不到任何遗漏的代码。

# vbscript - SystemUtil.Run 在 vb 脚本中不起作用

> ID：15490394
> 
> 赞同：1
> 
> 时间：2013-03-19T02:13:39.440
> 
> 标签：vbscript, qtp

我打开记事本并输入以下命令：
`SystemUtil.Run "C:\Program Files\Google\Chrome\Application\chrome"`
并保存带有`.vbs`扩展名的文件。当我运行它时，它会引发`Object Required : SystemUtil`错误。但同样的事情也在运行`QTP`。这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:50:21.197

`SystemUtil`是 QTP 的一部分，可以在 QTP 测试中使用，但不能在独立的 VBScript 中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T02:43:16.780

VBScript 只有 2 个可以直接调用的内置对象`WScript`和`Debug`. 作为替代方案，`SystemUtil.Run`您可以使用[Run](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx)或[ShellExecute](http://msdn.microsoft.com/en-us/library/windows/desktop/gg537745%28v=vs.85%29.aspx)方法。

# stream - 如何使用 ffmpeg 在实时 m3u8 流中指定持续时间？

> ID：15490395
> 
> 赞同：1
> 
> 时间：2013-03-19T02:13:47.540
> 
> 标签：stream, ffmpeg

我想在使用 ffmpeg 时指定一个持续时间，例如 4 分钟，但我不断收到错误消息：

```
ffmpeg -i "./test.m3u8" -t 04:00 "output.mp4" 
```

我得到的错误是：

```
Invalid duration specification for t: 04:00 
```

还有这些黄色警告：

```
max_analyze_duration 5000000 reached at 5014800
 Could not find codec parameters (Video: h264 (
 Could not find codec parameters (Audio: aac (
 Could not find codec parameters (Video: h264 (
Could not find codec parameters (Audio: aac ( 
```

希望你们帮助我做错了什么。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:56:55.160

从[文档中](http://ffmpeg.org/ffmpeg.html)：

> `duration`可以是以秒为单位的数字，也可以是`hh:mm:ss[.xxx]`形式。

您的表格是`mm:ss`，所以它根本无效。这也是错误消息所说的。

使用`-t 00:04:00`或`-t 240`代替。

# android - 膨胀类 com.facebook.widget.LoginButton 时出错

> ID：15490399
> 
> 赞同：16
> 
> 时间：2013-03-19T02:14:27.097
> 
> 标签：android, facebook-android-sdk

我使用 3.0 文档中的步骤构建了 Facebook 集成。当我使用 Eclispe 将应用程序部署到手机时，它运行良好；但是，当我导出应用程序以将其上传到商店并侧面加载 apk 时，它会失败并出现以下错误。当我导出 SDK 时，SDK 就在那里并已加载。关于我哪里出错的任何线索？

```
03-18 21:01:02.089: E/AndroidRuntime(14834): FATAL EXCEPTION: main
03-18 21:01:02.089: E/AndroidRuntime(14834): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.telvista.facebooksupport/com.telvista.facebooksupport.SplashActivity}: android.view.InflateException: Binary XML file line #51: Error inflating class com.facebook.widget.LoginButton
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2088)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.app.ActivityThread.access$700(ActivityThread.java:139)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.os.Looper.loop(Looper.java:137)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.app.ActivityThread.main(ActivityThread.java:4918)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at java.lang.reflect.Method.invokeNative(Native Method)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at java.lang.reflect.Method.invoke(Method.java:511)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at dalvik.system.NativeStart.main(Native Method)
03-18 21:01:02.089: E/AndroidRuntime(14834): Caused by: android.view.InflateException: Binary XML file line #51: Error inflating class com.facebook.widget.LoginButton
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:306)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.app.Activity.setContentView(Activity.java:1901)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at com.telvista.facebooksupport.SplashActivity.onCreate(SplashActivity.java:29)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.app.Activity.performCreate(Activity.java:5048)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052)
03-18 21:01:02.089: E/AndroidRuntime(14834):    ... 11 more
03-18 21:01:02.089: E/AndroidRuntime(14834): Caused by: java.lang.reflect.InvocationTargetException
03-18 21:01:02.089: E/AndroidRuntime(14834):    at java.lang.reflect.Constructor.constructNative(Native Method)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-18 21:01:02.089: E/AndroidRuntime(14834):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
03-18 21:01:02.089: E/AndroidRuntime(14834):    ... 23 more
03-18 21:01:02.089: E/AndroidRuntime(14834): Caused by: java.lang.NoClassDefFoundError: com.facebook.android.R$color
03-18 21:01:02.089: E/AndroidRuntime(14834):    at com.facebook.widget.LoginButton.<init>(LoginButton.java:204)
03-18 21:01:02.089: E/AndroidRuntime(14834):    ... 26 more 
```

这是清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.t.facebooksupport"
    android:versionCode="21"
    android:versionName="2.1" >

    <uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
    android:allowBackup="false"
    android:icon="@drawable/t_logo"
    android:label="@string/app_name">

    <activity
        android:theme="@android:style/Theme.NoTitleBar"
        android:name="com.t.facebooksupport.SplashActivity"
        android:icon="@drawable/t_logo"
        android:label="@string/app_name" >
        <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.t.facebooksupport.MainActivity">
    </activity>
    <activity
        android:name="com.t.facebooksupport.ViewPost">
    </activity>
    <meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/app_id"/>
    <activity android:label="@string/app_name" android:name="com.facebook.LoginActivity"></activity>

    </application>

</manifest> 
```

带有登录按钮的启动页面：

```
package com.t.facebooksupport;

import java.util.Arrays;
import java.util.Map;

import com.facebook.Request;
import com.facebook.Response;
import com.facebook.Session;
import com.facebook.SessionState;
import com.facebook.UiLifecycleHelper;
import com.facebook.model.GraphUser;
import com.facebook.widget.LoginButton;
import com.t.facebooksupport.helper.PostConstants;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;

public class SplashActivity extends Activity {

    private UiLifecycleHelper uiHelper;
    private boolean isResumed = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        uiHelper = new UiLifecycleHelper(this, callback);
        Session session = Session.getActiveSession();

        if (session != null && session.isOpened()) {
            startActivity(new Intent(SplashActivity.this, MainActivity.class));
        }
        LoginButton authButton = (LoginButton) findViewById(R.id.login_button);
        authButton.setReadPermissions(Arrays.asList("email"));

    }

    private void onSessionStateChange(Session session, SessionState state, Exception exception) {
        if (isResumed) {
            if (state.isOpened()) {
                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

                    @Override
                    public void onCompleted(GraphUser user, Response response) {
                        if (user != null) {
                            // Display the parsed user info
                            SharedPreferences settings = getSharedPreferences(PostConstants.PREFS_NAME, Activity.MODE_PRIVATE);
                            SharedPreferences.Editor editor = settings.edit();
                            editor.putString("fb_id", user.getId());
                            editor.putString("fullname", user.getFirstName() + " " + user.getLastName());
                            editor.putString("firstname", user.getFirstName());
                            editor.putString("lastname", user.getLastName());
                            editor.putString("image_loc", "https://graph.facebook.com/" + user.getId() + "/picture?type=large");
                            editor.putString("user_id", user.asMap().get("email").toString());
                            editor.putString("email", user.asMap().get("email").toString());
                            editor.putString("page", "1");
                            editor.putString("count", "30");
                            editor.putString("token", "");
                            editor.commit();

                            startActivity(new Intent(SplashActivity.this, MainActivity.class));
                        }
                    }
                });
            } else if (state.isClosed()) {
            }
        }
    }

    @Override
    public void onResume() {
        super.onResume();
        uiHelper.onResume();
        isResumed = true;
    }

    @Override
    public void onPause() {
        super.onPause();
        uiHelper.onPause();
        isResumed = false;
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        uiHelper.onActivityResult(requestCode, resultCode, data);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        uiHelper.onDestroy();
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        uiHelper.onSaveInstanceState(outState);
    }

    private Session.StatusCallback callback = new Session.StatusCallback() {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            onSessionStateChange(session, state, exception);
        }
    };

} 
```

编辑： - - - - - - - - - - - - - - - - - - - - - - - -

这是我尝试过的：

1.  尝试清理我的项目和 FacebookSDK 大约 50 次。
2.  删除了 FacebookSDK 并阅读了 3 次。

我已经尝试了在互联网上可以找到的所有内容，但无法弄清楚问题所在。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2015-07-23T10:10:50.197

`FacebookSdk.sdkInitialize(getApplicationContext());`

这个在 setContentView 之前

```
 setContentView(R.layout.activity_home); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-11T15:46:58.233

如果您使用的是 Facebook SDK 4.x，请注意包名称已更改。下雪了`com.facebook.login.widget.LoginButton`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-16T09:56:34.790

我收到此错误是因为我在 sdkInitialize 之前设置了内容视图。入门指南对此有评论。

[https://developers.facebook.com/docs/android/getting-started#androidstudio](https://developers.facebook.com/docs/android/getting-started#androidstudio)

```
@Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     FacebookSdk.sdkInitialize(getApplicationContext());
     // Initialize the SDK before executing any other operations,
     // especially, if you're using Facebook UI elements.
} 
```

所以我的代码现在看起来像这样：

```
@Override
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     FacebookSdk.sdkInitialize(getApplicationContext());
     setContentView(R.layout.activity_main);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-16T14:13:01.973

我遇到了同样的错误，我刚刚清理了我的项目（facebook sdk 和当前项目）并解决了。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-05-13T08:36:26.597

您必须在 setContentView 之前初始化 facebook SDK，因此在 setContentView 正上方添加以下行

```
FacebookSdk.sdkInitialize(getApplicationContext()); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-30T14:01:15.897

After add Facebook as a module you have to add it to your dependencies in Gradle, adding the next line into dependencies block:

```
compile project(':facebook') 
```

I hope it can help.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-19T15:30:12.223

我发现解决此问题的唯一方法是将整个 SDK 放入我的项目中。现在它起作用了。不是首选的解决方案，但它有效。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-09-04T23:07:03.030

即使我尝试在模拟器中运行它，我也遇到了同样的错误。

我的问题与我将 Facebook Sdk 添加到构建路径而不是在“属性”选项卡中添加项目更相关。我从[另一个 stackoverflow 答案中得到了答案](https://stackoverflow.com/a/15310857/562692)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-20T08:51:55.740

只需初始化 FacebookSdk.sdkInitialize(getApplicationContext()); 在您的应用程序类中。因为 Application 类甚至在你的活动被初始化之前就已经初始化了。

这样做：

公共类 ApplicationController 扩展应用程序{

```
@Override
public void onCreate() {
    super.onCreate();
    FacebookSdk.sdkInitialize(getApplicationContext());
} 
```

}

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-05T06:58:45.737

一种解决方案是将 Facebook SDK 的路径添加到项目中的“project.properties”。

喜欢：

```
android.library.reference.1=../libfacebook/facebook-android-sdk-3.0.1/facebook 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-09-04T18:40:28.517

以防万一..如果有人仍然需要它，请仅清理 facebook 项目，然后将其作为库添加回您的项目中。这解决了我的问题

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-07T07:54:21.653

我也有同样的错误，只是用 android-support-v13.jar 替换 android-support-v4.jar 解决了这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-11-10T14:00:16.157

如果您在 Properties->Android 中将 facebook 库添加到您的应用程序，您应该删除 facebooksdk 路径/bin/facebook.jar 中的 facebook.jar。在eclipse中链接时会导致错误。然后你清理你的 facebook sdk 和你的应用程序。我希望工作正常。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-10-29T20:12:25.947

我尝试以编程方式创建[LoginButton](https://developers.facebook.com/docs/reference/android/current/class/LoginButton/)的实例，例如

```
LoginButton loginButton = new LoginButton(this); 
```

并将其添加到**LinearLayout**

```
 fbLoginButton = (LinearLayout) findViewById(R.id.fb_login_view);
    fbLoginButton.addView(loginButton); 
```

这是我的布局 xml 的一瞥

```
<LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="40dip"
            android:id="@+id/fb_login_view"
            android:layout_centerInParent="true"
            android:layout_gravity="center_horizontal"
            android:text="connect_with_facebook"/> 
```

这当然是遵循[@Lalit Kumar 的回答](https://stackoverflow.com/a/31584311/1075066)建议的编辑 让我知道我是否遗漏了什么。

# xml - 通过 xsltApplyStylesheet 传入的参数

> ID：15490404
> 
> 赞同：1
> 
> 时间：2013-03-19T02:14:37.447
> 
> 标签：xml, xslt

它们是如何存储在转换中的？

除了使用“$variable”之外，我如何访问它们。我可以通过他们的名字访问他们吗？

```
<xsl:value-of select = '*/*/xsl:param[@name=myvariable']/@select"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:34:47.173

不，参数不能通过名称动态访问，但是如果您使用支持[node-set() 函数](http://www.xml.com/pub/a/2003/07/16/nodeset.html)的 XSLT 处理器，您可以设置这样的映射来按名称*对它们进行排序：*

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
  <xsl:param name="myParam1" />
  <xsl:param name="myParam2" />

  <xsl:variable name="paramsFragment">
    <item name="myParam1">
      <xsl:copy-of select="$myParam1"/>
    </item>
    <item name="myParam2">
      <xsl:copy-of select="$myParam2"/>
    </item>
  </xsl:variable>
  <xsl:variable name="params" select="msxsl:node-set($paramsFragment)/*" />

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
    <xsl:value-of select="$params[@name = 'myParam2']"/>

    <xsl:variable name="paramName" select="'myParam1'" />
    <xsl:value-of select="$params[@name = $paramName]"/>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:42:43.390

**参数的值是动态生成的，只能通过参数引用（使用`'$'paramName`语法**）访问。

来自 OP 的评论：

> 有没有办法在 xslt 文件中查看哪些参数被传递到转换中？

**是的，有这样一种方式可以在很大程度上取得成功**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:param name="pmyParam1" select="-999999999999999"/>

 <xsl:template match="/">
  <xsl:if test="not($pmyParam1 = '-999999999999999')">
   $pmyParam1 has a non-default value -- was definitely set from outside !
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**上面的转换将参数值与指定的默认值进行比较。如果这两个值不同，这意味着传递了一个外部值。如果不是，就不能下定论**。

但是，如果默认值被仔细选择为非常独特且不太可能让转换的发起者知道的东西，那么实际值和默认值相同的事实强烈暗示外部调用者没有为此参数指定了一个值。

# c - C99 定义作为字面初始化值传递给结构的值，失败为非常量

> ID：15490408
> 
> 赞同：5
> 
> 时间：2013-03-19T02:14:44.543
> 
> 标签：c, struct, constants

在（旧的）Linux 源代码（用 C89 编写）中，使用标准 C89 结构字面量初始化器语法`#define`在结构 ( ) 的初始化中用作字面量`ide_pci_device_s`，但是，当我使用支持 C99 的编译器进行编译时，我得到了错误`initializer element is not constant`，下面是我正在使用的引发错误的代码示例。

```
#define ON_BOARD 1

#define PCI_VENDOR_ID_INTEL     0x8086
#define PCI_DEVICE_ID_INTEL_82371FB_0   0x122e

#define DEVID_PIIXa     ((ide_pci_devid_t){PCI_VENDOR_ID_INTEL,   PCI_DEVICE_ID_INTEL_82371FB_0})

typedef char byte;

typedef struct ide_pci_devid_t {
        int one, two;
} ide_pci_devid_t;

typedef struct ide_hwif_t {
        int whatever;
} ide_hwif_t;

typedef struct ide_pci_enablebit_s {
    byte        reg;    /* byte pci reg holding the enable-bit */
        byte    mask;   /* mask to isolate the enable-bit */
        byte    val;    /* value of masked reg when "enabled" */
} ide_pci_enablebit_t;

typedef struct ide_pci_device_s {
        ide_pci_devid_t         devid;
        const char              *name;
        void                    (*init_hwif)(ide_hwif_t *hwif);
        ide_pci_enablebit_t     enablebits[2];
        byte                    bootable;
        unsigned int            extra;
} ide_pci_device_t;

static ide_pci_device_t ide_pci_chipsets[] = {

     // HERE is where it says 'non-const initializer
        {DEVID_PIIXa,   "PIIX",         NULL,           {{0x41,0x80,0x80}, {0x43,0x80,0x80}},   ON_BOARD,       0 },

}; 
```

如何`#define`在最小限度地改变源结构的同时使用 C99 编译器构建的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T06:01:35.657

问题在于：

```
#define DEVID_PIIXa     ((ide_pci_devid_t){PCI_VENDOR_ID_INTEL,   PCI_DEVICE_ID_INTEL_82371FB_0}) 
```

您的编译器认为这使它成为非常量。由于您使用初始化程序的位置是初始化嵌套`ide_pci_devid_t`结构，因此您不需要强制转换。将该定义更改为：

```
#define DEVID_PIIXa     {PCI_VENDOR_ID_INTEL,   PCI_DEVICE_ID_INTEL_82371FB_0} 
```

会修复它。

（从评论讨论中得到答案。）

# php - 在while循环中显示表格

> ID：15490410
> 
> 赞同：0
> 
> 时间：2013-03-19T02:15:03.437
> 
> 标签：php, mysql, while-loop, html-table

我正在尝试在 while 循环中显示一个表格，其中每行有 3 行和 3 td。但我很困惑如何归档它。

到目前为止，这是我的代码：

```
while($row = mysqli_fetch_array($result)){

    $testimonial    = $row['testimonial'];
  $cityName         = $row['city_name'];
  $name             = $row['name'];
  $imageName        = $row['image_name'];
  $member           = $row['membership_type'];
  $testimonial  = nl2br($testimonial);

    //Create new testimonial output
    $output  = "<table>\n";
    $output .= "  <tr>\n";
    $output .= "     <td>\n";
    $output .= "      <p>\n";
    $output .= "        <img src=\"".UPLOAD_DIR.$imageName."\" />";
    $output .= "         {$testimonial}";
    $output .= "      </p>\n";
    $output .= "     <p class=\"name\">{$name}<br />\n";
    $output .= "      <span>A Teacher - From {$cityName}</span></p>\n";
    $output .= "   </td>\n";
    $output .= "  </tr>\n";
    $output .= "</table>\n";

    echo $output;
} 
```

上面的代码给了我一个多行表，每行 1 个 td。但这不是我预期的结果。

谁能告诉我如何在我的表格中显示这样的表格`While loop`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:18:47.787

当前代码为每个条目创建一个新表。您想要的是将`<table>`和`</table>`部分移出循环，然后您需要一个计数器来跟踪您处理了多少个单元格。如果是偶数，则开始一个新的`<tr>`. 否则，结束当前`</tr>`. 确保在最后检查以查看是否已完成 a `</tr>`，并在需要时可选地添加一个空白`<td></td>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:19:48.600

尝试这个

```
$i = 0;
echo "<table>\n<tr>";
while($row = mysqli_fetch_array($result)){
  $testimonial    = $row['testimonial'];
  $cityName         = $row['city_name'];
  $name             = $row['name'];
  $imageName        = $row['image_name'];
  $member           = $row['membership_type'];
  $testimonial  = nl2br($testimonial);
  //Create new testimonial output
  $output .= "     <td>\n";
  $output .= "      <p>\n";
  $output .= "        <img src=\"".UPLOAD_DIR.$imageName."\" />";
  $output .= "         {$testimonial}";
  $output .= "      </p>\n";
  $output .= "     <p class=\"name\">{$name}<br />\n";
  $output .= "      <span>A Teacher - From {$cityName}</span></p>\n";
  $output .= "   </td>\n";
  echo $output;
  if( $i %2 == 1 )
    echo "</tr><tr>\n";
  $i++;
}
echo "</tr>\n</table>\n"; 
```

* * *

## 编辑

> 一般来说，为了`n`每行显示单元格，将`if`语句更改为

```
if( $i % n == (n - 1) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T02:27:26.263

这件事要做

```
<?php

echo "<table>\n";

$cells = $total = 0;
$total_cells = mysqli_num_rows($result);

while($row = mysqli_fetch_array($result))
{
    $testimonial      = nl2br($row['testimonial']);
    $cityName         = $row['city_name'];
    $name             = $row['name'];
    $imageName        = $row['image_name'];
    $member           = $row['membership_type'];

    if ($cells === 0)
        echo "<tr>\n";

    //Create new testimonial output
    $output = "     <td>\n";
    $output .= "      <p>\n";
    $output .= "        <img src=\"".UPLOAD_DIR.$imageName."\" />";
    $output .= "         {$testimonial}";
    $output .= "      </p>\n";
    $output .= "     <p class=\"name\">{$name}<br />\n";
    $output .= "      <span>A Teacher - From {$cityName}</span></p>\n";
    $output .= "   </td>\n";

    echo $output;

    $cells++;
    $total++;       

    if ($cells === 3 || $total === $total_cells)
    {
        echo "</tr>\n";
        $cells = 0;
    }
}

echo "</table>\n";

?> 
```

# c++ - 待定 tbb::memory_pool > 如何正确使用？

> ID：15490418
> 
> 赞同：3
> 
> 时间：2013-03-19T02:15:51.637
> 
> 标签：c++, tbb, memory-pool

我有疑问。

对于 tbb::memory_pool< tbb::scalable_allocator > shared_memory_pool_；

如果这是在主线程中实例化的。然后，我在工作线程中调用了 shared_memory_pool_.malloc(sizeof(my_class)) 。tbb 会从主堆中分配该大小的内存，还是会从线程“域”中分配它，以便仍然避免由正常 malloc() 引起的锁争用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-27T09:32:37.703

基于`tbb::memory_pool`与 相同的内部结构`tbb::scalable_allocator`。因此，一旦内存池最初获取内存（在您指定的情况下，`tbb::scalable_allocator`也是如此），它将使用相同的机制在线程之间分配和重用它。即它是可扩展的并且尽可能地避免全局锁。但是，由于内存仍然是一种公共资源，一些线程同步无论如何都是不可避免的。具体来说，我预计初始内存请求会出现更多争用，因为每个线程的缓存还不温暖。而且可扩展分配器试图保持可扩展性和内存消耗之间的平衡，因此它不会因为每线程缓存在线程之间重新分配内存而变得疯狂，这也是一种线程同步（尽管比锁更具可扩展性）。

至于scalable_allocator的[非常]初始内存分配，它通过`mmap`或`VirtualAlloc`足够大的内存块而不是通过malloc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T04:28:39.810

[下面](https://software.intel.com/en-us/blogs/2011/12/19/scalable-memory-pools-community-preview-feature)是一些关于如何正确实现内存池的有用描述。请注意，据此：

> 在我们的实现中，我们尝试以线程安全和可扩展的方式提供更通用的功能。为此，内存池的实现基于 TBB 可扩展内存分配器，因此具有相似的速度和内存消耗特性。

希望这可以帮助。

# c - 结构中的结构？

> ID：15490419
> 
> 赞同：2
> 
> 时间：2013-03-19T02:15:52.477
> 
> 标签：c, struct

我正在用 C 编写一个学生数据库，并定义了两个结构 Student 和 Course ，如下所示：

```
typedef struct student Student;
typedef struct course Course;

struct course
{
    char number[300];
    char title[300];
    char instructor[300];
    char days[10];
    char start[10];
    char end[10];
    char location[300];
};

struct student 
{
    char name[300];
    int age;
    Course course1;
    Course course2;
};

Student *Data[30];
Course *Courses[30]; 
```

我无法显示我创建的学生。我只想打印出名称、年龄和两门课程，但我无法通过学生访问课程结构的元素。

我试过这个：

```
printf("course1: %s\t%-40s%-30s\t%s\t%s-%s\t%s\n",
       Data[i]->course1.number,
       Data[i]->course1.title,
       Data[i]->course1.instructor,
       Data[i]->course1.days,
       Data[i]->course1.start,
       Data[i]->course1.end,
       Data[i]->course1.location); 
```

但这当然行不通...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:59:37.477

我已将您的结构简化为一个教学示例。这可能有助于您了解如何访问数据。根据需要调整/扩展以满足您的需求。

```
typedef struct student Student;
typedef struct course Course;

struct course {
    char title[300];
};

struct student {
    char name[300];
    Course * course;  // pointer to a course
};

Student students[30]; // preallocate 30 students
Course  courses[30];  // preallocate 30 courses 
```

测试人员：

```
void main(void) {

    // 1st course
    strcpy(courses[0].title,"C Language 101");

    // 1st Student
    strcpy(students[0].name,"Charles");

    // Assign 1st Student to course #1
    students[0].course = & courses[0];

    printf("Student 1: name=%s course=%s", students[0].name, students[0].course->title);

    return;
} 
```

输出：

```
Student 1: name=Charles course=C Language 101 
```

# antlr - 使用 ANTLR 解析嵌套块结构

> ID：15490421
> 
> 赞同：0
> 
> 时间：2013-03-19T02:15:58.660
> 
> 标签：antlr

我有这个程序

```
{
    run_and_branch(Test1)
    then
    {
    }
    else
    {
    }
    {
      run_and_branch(Test2)
      then
      {
      }
      else
      {
        run(Test3);
        run(Test4);
        run(Test5);
      }
    }
    run_and_branch(Test6)
    then
    {
    }
    else
    {
    }

    run(Test7);
    {
      run(Test8);
      run(Test9);
      run(Test_10);
    }

 } 
```

下面是我的 ANLTR 语法文件

```
prog    
:   block EOF;

block   
:   START_BLOCK END_BLOCK -> BLOCK|
        START_BLOCK block* END_BLOCK -> block*|
        test=run_statement b=block* -> ^($test $b*)|
        test2=run_branch_statement THEN pass=block ELSE fail=block -> ^($test2 ^(PASS $pass) ^(FAIL $fail))
;

run_branch_statement

    :   RUN_AND_BRANCH OPEN_BRACKET ID CLOSE_BRACKET -> ID;
run_statement 

    :   RUN OPEN_BRACKET ID CLOSE_BRACKET SEMICOLON -> ID;

THEN    :    'then';

ELSE    :    'else';

RUN_AND_BRANCH     :     'run_and_branch';

RUN     :    'run';

START_BLOCK  
    :    '{' ;
END_BLOCK  
    :    '}' ;  

OPEN_BRACKET 
    :    '(';
CLOSE_BRACKET
    :   ')';    
SEMICOLON 
    :   ';'
    ;

ID  :   ('a'..'z'|'A'..'Z'|'_'|'0'..'9') (':'|'%'|'='|'\''|'a'..'z'|'A'..'Z'|'0'..'9'|'_'|'-'|'.'|'+'|'*'|'/'|'\\')*
    ;

WS  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ; 
```

使用 ANTLWorks 我得到以下 AST：

![来自 ANTLRWorks 的 AST](../Images/cb4d9e843b83f419f98e2f405cb259e2.png)

正如您在 AST 中看到的那样，Test1 和 Test2 之间没有依赖关系。我想让 AST 显示此信息，以便我可以遍历 AST 并获取测试依赖结构

我期待 AST 看起来像这样![预期 AST](../Images/9f66160c7b220f68527559395798ea82.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:14:37.510

ANTLR 不是这样工作的。ANTLR 生成的是树，而不是图，因此无法在语法级别表示所需的输出。此外，如果您尝试以这种方式编写尾递归规则来链接控制流，您将很快遇到堆栈溢出异常，因为 ANTLR 会生成递归下降解析器。

您需要将 ANTLR 生成的 AST 并对其进行单独的控制流分析以获得控制流图。

# linux - 内核源代码中 select() 函数的跟踪路径是什么？

> ID：15490423
> 
> 赞同：0
> 
> 时间：2013-03-19T02:16:26.587
> 
> 标签：linux, linux-kernel

我想知道为什么“man select”为 nfds > FD_SETSIZE 提供 EINVAL。

但我使用示例代码来测试它。FD_SETSIZE=1024，但 select(4096, ...) 不返回 EINVAL。

任何人都知道在哪里可以找到 select() 实现的源代码？

我使用这个命令找到了类似的功能，但它与'select'并不完全相同

```
$ find . -name '*.c' -exec grep -n 'select[(]int' {} /dev/null \;
./fs/select.c:396:int do_select(int n, fd_set_bits *fds, struct timespec *end_time)
./fs/select.c:518:int core_sys_select(int n, fd_set __user *inp, fd_set __user *outp,
./fs/select.c:617:static long do_pselect(int n, fd_set __user *inp, fd_set __user *outp, 
```

我在 glibc 源的 syscalls.list 文件中 grep 'select'

```
grep select ./sysdeps/unix/syscalls.list
select      -   select      Ci:iPPPP      __select  __libc_select select 
```

我仍然不明白如何在 glibc/linux 内核代码中找到系统调用 select() 的来源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:47:22.783

Select 在 /fs/select.c 中实现，并在 fs/compat.c compat_core_sys_select 中实现。

内核使用 poll 来等待 FD，它用于模拟 select。

glibc 调用 select 系统调用，其入口点定义在：arch/x86/syscalls/syscall_32.tbl:142 i386 _newselect sys_select compat_sys_select arch/x86/syscalls/syscall_64.tbl:23 common select sys_select

fs/compat.c:asmlinkage long compat_sys_select(int n, compat_ulong_t __user *inp, compat_ulong_t __user *outp, compat_ulong_t __user *exp, struct compat_timeval __user *tvp)

这是实际的实现。

还有一些旧的 select 系统调用，已经很久没有使用了。不同之处在于选择调用需要的参数数量。它的来源在：arch/x86/syscalls/syscall_32.tbl:82 i386 select sys_old_select compat_sys_old_select fs/compat.c:asmlinkage long compat_sys_old_select(struct compat_sel_arg_struct __user *arg)

您可能想在 /Documentation/filesystems/vfs.txt 中找到有关 vfs 工作原理的更多信息

# dynamics-crm-2011 - CRM 2011 根据自定义选项集值执行 FetchXML 组

> ID：15490429
> 
> 赞同：4
> 
> 时间：2013-03-19T02:16:48.300
> 
> 标签：dynamics-crm-2011, fetchxml

我希望能够执行一个 FetchXML 请求，该请求在对作为自定义选项集的字段进行分组时求和一个值，但我没有得到预期的结果。

返回的只是汇总值，而不是与其相关的相关自定义选项集值，因此我不知道返回值与什么相关。

这是似乎正确的 fetchXML 请求：

```
<fetch distinct='false' mapping='logical' aggregate='true'> 
    <entity name='opportunity'> 
          <attribute name='estimatedvalue' alias='opportunity_sum' aggregate='sum' /> 
          <attribute name='koo_opportunitytype' alias='koo_opportunitytype' groupby='true' /> 
    </entity> 
</fetch> 
```

返回的每个值仅具有 1 个属性... *opportunity_sum*值。

如果我按客户 ID 进行分组，那么返回的值会被正确汇总，并且每个汇总值的参考都会返回给相关客户，这是我所期望的。

不能按自定义选项集值分组吗？这似乎适用于标准系统选项集值，例如状态代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:30:47.920

我已经验证了只要数据是干净的，您的 fetch xml 就可以正常工作。如果您`koo_opportunitytype`的所有机会值均为空，则不会为它们返回属性。我假设您只返回一个实体？此外，如果某个组的任何估计值为空，则也不会返回总和。这意味着您可能需要添加一个过滤器以从总和中排除空值。

# web - netsuite 网站导航设置

> ID：15490437
> 
> 赞同：0
> 
> 时间：2013-03-19T02:17:38.703
> 
> 标签：web, navigation, netsuite

再试一次。
首先，我为我的无知道歉——我以前从未使用过 Netsuite。我最近开始在一家一直在使用 Netsuite 的公司工作。他们的网站已经建立，在我的工作中，我必须每天编辑该网站。到目前为止，我发现的最困难的事情是缺乏 Netsuite 和组织的在线指导信息。我正在尝试更改或删除侧面导航栏上的翻转图像。我可以找到初始导航的所有图像及其相应的翻转图像，但找不到任何从这些图像中脱落的子类别图像。我无法在 Netsuite 中找到这些设置的位置。

如果我删除图像，它会从导航栏中消失还是导致错误？

我试过浏览主页的源代码，但没有运气。关于如何在已经建立的网站上解决这个问题的任何建议？

# oracle - 如何在同一台机器上并排安装 ODP.NET 2.111 和 ODP.NET 4.112，同时都指向同一个数据库服务器

> ID：15490438
> 
> 赞同：0
> 
> 时间：2013-03-19T02:17:45.897
> 
> 标签：oracle, entity-framework, odp.net, tnsnames, tns

**问题是如何在同一台机器上并排安装 ODP.NET 2.111 和 ODP.NET 4.112，同时使用 tnsnames.ora 指向同一个数据库服务器**

我需要支持基于 Oracle 11.1.0 的遗留系统。系统使用 ODP.NET 2.111 连接到 oracle。有两个客户端安装在：

> C:\oracle\product\11.1.0\client_1
> 
> C:\oracle\product\11.1.0\client_2

两者的 tnsnames.ora 是这样的：

```
xxxx1_SERVICE=
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = xxxx2)(PORT = xxx3))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SID = xxx4)
    )
  )

yyyy1_SERVICE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = yyyy2 )(PORT = yyyy3))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SID = yyyy4)
    )
  )

kkkk1_SERVICE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = kkkkk2 )(PORT = kkkk3))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SID = kkk4)
    )
  )

pppp1_SERVICE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = ppppp2 )(PORT = pppp3))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SID = pppp4)
    )
  )

oooo1_SERVICE = (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = ooooo2 )(PORT = oooo3))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = oooo4)
    )
  ) 
```

系统使用上述设置启动并运行。我需要开发一个基于 EntityFramework 的新系统，这需要我使用更新版本的 Oracle.DataAccess.Dll (4.112)。

我想知道如何在不损害旧系统功能的情况下安装新客户端，以便两者可以并行工作：

注意：我确实尝试在以前的客户端上安装新的 ODP.NET，并且能够使用以下连接字符串连接到数据库：

> DATA SOURCE=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=zzzzz1)(PORT=zzzzz2)))(CONNECT_DATA=(SERVICE_NAME=zzz3_SERVICE)));用户ID=\"zzzz4\";密码=\"zzzz5\";

那是不可取的，因为 1- 它破坏了旧系统，因为由于 ODP.NET 中的升级，它不再可以连接到 Oracle 2- 连接字符串看起来很奇怪

我将不胜感激任何帮助，

谢谢，艾丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:35:52.750

简短的回答：

> 注意：我确实尝试在以前的客户端上安装新的 ODP.NET，并且能够使用以下连接字符串连接到数据库...

这表明您的新安装在 /Network/Admin 中没有 tnsnames.ora 和 sqlnet.ora。如果您对使用新 ODP.net 安装的旧客户端没问题，那么您可以从旧安装中复制它们，或者您可以使用[TNS_ADMIN](http://docs.oracle.com/cd/E14072_01/network.112/e10835/tnsnames.htm#i433681)环境变量为所有实例指定全局位置，即`TNS_ADMIN=C:\MyOracleFilesDir`

长答案：

[当您安装新客户端时，它很可能还会将发布者策略文件安装到 GAC 中，从而在程序集解析过程](http://msdn.microsoft.com/en-us/library/yx7xezcf%28v=vs.80%29.aspx)中将对旧 Oracle.DataAccess.dll 的引用重定向到新版本。Oracle.DataAccess 然后通过注册表中的参数 (DllPath) 定位客户端。您可以通过在 .config 文件中设置 dllPath 来覆盖此位置：

```
<configuration>
  <oracle.dataaccess.client>
    <add key="DllPath"            value="C:\yourotherpath"/>
  </oracle.dataaccess.client>
</configuration> 
```

这通常是我所做的，但随着我对这一点的了解更多，我意识到我正在对旧客户端强制使用更新的 dll。如果您的目标是保持旧客户端不变，更好的选择可能是从 GAC 中删除发布者策略（我认为它们甚至没有与完整的 ODAC 一起安装，只有 ODP.net）：

![广汽截图](../Images/7f408d92b73eabb584513f010d13069b.png)

如果您需要重新安装它们，它们通常位于 oraclepath\odp.net\PublisherPolicy。

另一个，也许是更好的长期选择，是配置旧客户端忽略发布者策略：http: [//msdn.microsoft.com/en-us/library/cf9025zt%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/cf9025zt%28v=vs.80%29.aspx)

最后，我很确定 2.0 和 4.0 框架的 .net 组件在 ODP.net 安装期间是单独的安装选项。我认为您只需不安装 2.0 组件即可避免此问题。在那一点上，您可以通过针对 64 位 odp.net 开发新项目来做类似的工作。像v2​​.0 和v4.0 一样，32 位和64 位也没有任何相互认识。

# jquery - 如何从我的代码中删除漂亮的打印类

> ID：15490440
> 
> 赞同：1
> 
> 时间：2013-03-19T02:17:57.573
> 
> 标签：jquery, pretty-print

我有一个 jquery 变量，它保存带有 google 漂亮打印类的 html 代码，以对代码进行风格化。

```
<span class="pln">
  echo </span>
  <span class="str">"$output"</span>
<span class="pun">;</span>
<span class="pln">
    echo </span>
<span class="str">"$my_code"</span>
<span class="pun">;</span> 
```

我希望删除那些漂亮的打印类。输出应如下所示

```
echo $output;
echo $my_code; 
```

我还希望保留这些换行符和代码格式。

我尝试使用 jquery 删除每个 span 元素，但这是一项乏味的任务。有没有办法以更有效的方式做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:19:27.927

你可以这样做：

```
var text = $(x).filter('span').text(); 
```

它似乎工作得很好：

```
> $(x).filter('span').text()
"
  echo "$output";
    echo "$my_code";" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:13:56.830

这是一个可能的解决方案，假设所有代码都在具有特定类的 div 中，并且您想要替换内容，当然您可以轻松更改这些方面：

```
// change to fit your case
var parent = $('.your-own-class');

var html = parent.html();
html = html
    .replace(/(\r\n|\n|\r)/g,'')
    .replace(/(\s\s+?)/gm, '')
    .replace(/(\s+?\<+?)/gm, '<');

var tempElement = $("<pre />").html(html);
tempElement.find(".pln:not(:first)").prepend("\n");
var text = tempElement.text();

// change to fit your case
var output = parent;

output.text(text).css("white-space", "pre"); 
```

工作演示：

[http://jsfiddle.net/Meligy/Ym2M8/](http://jsfiddle.net/Meligy/Ym2M8/)

请注意，代码未针对最佳性能进行优化，如果您在现实世界中的漂亮打印代码与您在此处的确切代码呈现不同，您可以保存一些正则表达式解析并获得更好的性能。

# internet-explorer - 在 Internet Explorer 中查看时，表格和文本在页面中显示得太低

> ID：15490442
> 
> 赞同：0
> 
> 时间：2013-03-19T02:18:38.367
> 
> 标签：internet-explorer, dreamweaver, cs4

我在左侧有一个面板，并且刚刚在它旁边的右侧添加了一张图像表。在 Mozilla 中，页面看起来不错，但在 Explorer 中，表格（以及表格上方和下方的文本）从左侧面板的下方开始。有关如何将主页内容保持在正确级别的任何建议？

生成代码的主要部分太长了......这是前半部分：

```
<div id="mainContent">
  <p>&nbsp;</p>
  <h4 align="center"><strong>LITTLE MUNCHKINS BALTIC AMBER BEADS<br />
    INFANT AND TODDLER TEETHING NECKLACES</strong></h4>
  <h2 align="center"><strong> NZ SUMMER SALE ON ALL INFANT NECKLACES<br />
    were $35.00\. Now just <u>$25.00</u>! </strong></h2>
  <p align="center"> <em>Limited time only!</em></p>
  <p align="justify">&nbsp;</p>
  <p align="justify"><strong>Our extensive range of Baltic amber necklaces includes rounded barock bead, olive shaped and chip beads in polished, semi-polished and unpolished amber.</strong> </p> 
```

# javascript - jquery 1.9.1 -- Origin ... Access-Control-Allow-Origin 不允许。

> ID：15490444
> 
> 赞同：0
> 
> 时间：2013-03-19T02:18:48.557
> 
> 标签：javascript, jquery, json

当我尝试`getJSON`拨打电话时，出现错误：

`Origin ... is not allowed by Access-Control-Allow-Origin`

此脚本适用于 jQuery 1.4.2，但不适用于 1.9.1：

```
<!-- language: lang-js -->
var nyc = "http://search.twitter.com/search.json?q=%22hello%20kitty%22";

$.getJSON( nyc , function(data) {  
    $('.nyc').text("abcd"); 
}); 
```

在这个网站上搜索，这显然是一个 jQuery 特定的错误。这里有一些东西可以摆弄：http: [//jsfiddle.net/mrcactu5/5yscM/2/](http://jsfiddle.net/mrcactu5/5yscM/2/)

# c# - 如何在 Xamarin Studio 2 中调试/单步调试纯 Mono C# 类库项目

> ID：15490448
> 
> 赞同：0
> 
> 时间：2013-03-19T02:19:18.627
> 
> 标签：c#, macos, debugging, mono, xamarin-studio

我正在使用 Xamarin Studio (2.0) 并创建了一个基本的 C# 类库项目和一个 C# 控制台项目。我已将控制台项目设置为启动项目，并添加了对类库项目的引用，其中包含一个从控制台项目调用的方法——非常通用的设置。

该应用程序在功能上按预期工作，但是当我设置断点时，它们都没有被触发......只是吹过它们。我在类库以及控制台应用程序中的调用方法中都尝试过。

Xamarin Studio 是否支持标准 Mono 控制台和类库项目的逐步调试？如果是这样，我需要做些什么来设置我的环境才能让它工作？任何方向将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:01:34.660

我刚刚安装了 Xamarin Studio 和 Mono Framework MDK 的最新更新，并尝试在调试器中打断点，它可以工作。不确定这是否专门解决了这个问题，但现在看来一切正常。

# android - 基于属性的谷歌应用引擎返回实体

> ID：15490453
> 
> 赞同：0
> 
> 时间：2013-03-19T02:19:42.330
> 
> 标签：android, google-app-engine, google-cloud-datastore, google-cloud-endpoints

我正在尝试使用端点从 Google App Engine 数据存储区返回一个实体（房间）。此方法（自动生成）返回数据存储区中的所有实体：

```
 @SuppressWarnings({ "unchecked", "unused" })
public CollectionResponse<Room> listRoom(
        @Nullable @Named("cursor") String cursorString,
        @Nullable @Named("limit") Integer limit) {

    EntityManager mgr = null;
    Cursor cursor = null;
    List<Room> execute = null;

    try {
        mgr = getEntityManager();
        Query query = mgr.createQuery("select from Room as Room");
        if (cursorString != null && cursorString != "") {
            cursor = Cursor.fromWebSafeString(cursorString);
            query.setHint(JPACursorHelper.CURSOR_HINT, cursor);
        }

        if (limit != null) {
            query.setFirstResult(0);
            query.setMaxResults(limit);
        }

        execute = (List<Room>) query.getResultList();
        cursor = JPACursorHelper.getCursor(execute);
        if (cursor != null)
            cursorString = cursor.toWebSafeString();

        // Tight loop for fetching all entities from datastore and accomodate
        // for lazy fetch.
        for (Room obj : execute)
            ;
    } finally {
        mgr.close();
    }

    return CollectionResponse.<Room> builder().setItems(execute)
            .setNextPageToken(cursorString).build();
} 
```

我想编辑它，使它只返回一个基于属性的实体，一个字符串。所以我将把字符串作为参数传入，在数据存储中找到它并返回它。该字符串不会是主键。

编辑：

尝试这个但仍然不起作用：

```
 public Room getRoom(@Named("id") String mac) {
    EntityManager mgr = null;
    Room room = null;
    try {
        mgr = getEntityManager();
        Query query = mgr.createQuery("SELECT * FROM Room WHERE mac_adds IN ('"+mac+"')");
        room = (Room) query.getSingleResult();
    } finally {
        mgr.close();
    }
    return room;
} 
```

任何帮助表示赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T04:01:00.080

您可以尝试更换：

```
 for (Room obj : execute)
        ; 
```

和

```
 for (Room obj : execute) {
        if( obj.your_property.equal(your_string) ) {
            // do something with new found `obj`, maybe return it
        }
    } 
```

您也很可能不需要`CollectionResponse`在函数末尾返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T09:19:25.423

我有一个类似的问题，我解决它的方式如下

我在端点类中创建了一个新的 API 方法。就我而言，我必须从 userTable 实体类中获取与特定电子邮件地址相对应的行。所以我将 emailAddress 作为字符串参数传递给我在端点类中添加的 API 方法。我下面的示例 emaiAddress 不是我的实体的主键。

```
@SuppressWarnings({ "unchecked", "unused" })
@ApiMethod(name = "getUserTableByEmail")
public CollectionResponse<UserTable> getUserTableByEmail(
        @Nullable @Named("cursor") String cursorString,
        @Nullable @Named("limit") Integer limit,
        @Named ("emailAddress") String email) {

    EntityManager mgr = null;
    Cursor cursor = null;
    List<UserTable> execute = null;

    try {
        mgr = getEntityManager();
        Query query = mgr.createQuery("select n from UserTable n where n.emailAddress = '"+email+"'");
        if (cursorString != null && cursorString != "") {
            cursor = Cursor.fromWebSafeString(cursorString);
            query.setHint(JPACursorHelper.CURSOR_HINT, cursor);
        }

        if (limit != null) {
            query.setFirstResult(0);
            query.setMaxResults(limit);
        }

        execute = (List<UserTable>) query.getResultList();
        cursor = JPACursorHelper.getCursor(execute);
        if (cursor != null)
            cursorString = cursor.toWebSafeString();

        for (UserTable obj : execute)
            ;
    } finally {
        mgr.close();
    }

    return CollectionResponse.<UserTable> builder().setItems(execute)
            .setNextPageToken(cursorString).build();
} 
```

但是请注意一件事。我仍然使用该方法返回一个 CollectionResponse 对象，如果您确定只有一行与您的选择条件一起返回，您可以很好地只返回一个 userTable(entity) 对象。我是我的 android 代码，我使用 CollectionResponse.isEmpty() 检查是否有任何返回，如果它返回行然后 ii 使用方法 CollectionResponse.getItem() 来检索行。如果您希望查询只返回一个结果，那么您可以在您的 android 代码中执行端点方法时将整数参数“limit”指定为 1，或者只 `query.setMaxResults(1);` 输入上面的方法。

# android - Android：由于某些布局属性，ImageView 的高度范围

> ID：15490456
> 
> 赞同：2
> 
> 时间：2013-03-19T02:19:47.393
> 
> 标签：android, image, android-imageview, multi-touch, zooming

我正在对 ImageView 实施多点触控缩放，效果很好，但是当我将其缩小时，图像的某些部分会隐藏起来，就像在某些视图后面或由于某些高度限制一样。

![在此处输入图像描述](../Images/b7abcbc8fe325ad66745f5762d854f57.png)

布局代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bggray"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/ivapptitle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:adjustViewBounds="true"
            android:contentDescription="img"
            android:scaleType="fitXY"
            android:src="@drawable/apptitle" />
    </LinearLayout>

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:background="@color/titlecolor1">
      <ImageView
            android:id="@+id/ivdownloadedjpgfile"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_marginTop="20dip"

            android:contentDescription="img"
            />                

    </ScrollView>    
</LinearLayout> 
```

班级代码

```
public class DownloadedImageDisplay extends Activity implements OnTouchListener{

    private ImageView ivDownloadedImage;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.staffnotationtd);
        initializeVars();
        showImage();
        ivDownloadedImage.setOnTouchListener(this);
    }

    private void initializeVars()
    {
        ivDownloadedImage = (ImageView) findViewById(R.id.ivdownloadedjpgfile);
    }

    public void showImage()
    {
        String filePath;
        Bundle extras = getIntent().getExtras();
        if(extras == null) {
            filePath = null;
        } else {
            filePath= extras.getString("JPGFileName");
        }

        Bitmap bitmap = BitmapFactory.decodeFile(filePath);
        ivDownloadedImage.setImageBitmap(bitmap);
    }

    //// Image Zooming code

    private static final String TAG = "Touch";
  //  @SuppressWarnings("unused")
    private static final float MIN_ZOOM = 1f,MAX_ZOOM = 1f;

    // These matrices will be used to scale points of the image
    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();

    // The 3 states (events) which the user is trying to perform
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // these PointF objects are used to record the point(s) the user is touching
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;

    @Override
    public boolean onTouch(View v, MotionEvent event) 
    {
        ImageView view = (ImageView) v;
        view.setScaleType(ImageView.ScaleType.MATRIX);
        float scale;

        dumpEvent(event);
        // Handle touch events here...

        switch (event.getAction() & MotionEvent.ACTION_MASK) 
        {
            case MotionEvent.ACTION_DOWN:   // first finger down only
                                                savedMatrix.set(matrix);
                                                start.set(event.getX(), event.getY());
                                                Log.d(TAG, "mode=DRAG"); // write to LogCat
                                                mode = DRAG;
                                                break;

            case MotionEvent.ACTION_UP: // first finger lifted

            case MotionEvent.ACTION_POINTER_UP: // second finger lifted

                                                mode = NONE;
                                                Log.d(TAG, "mode=NONE");
                                                break;

            case MotionEvent.ACTION_POINTER_DOWN: // first and second finger down

                                                oldDist = spacing(event);
                                                Log.d(TAG, "oldDist=" + oldDist);
                                                if (oldDist > 5f) {
                                                    savedMatrix.set(matrix);
                                                    midPoint(mid, event);
                                                    mode = ZOOM;
                                                    Log.d(TAG, "mode=ZOOM");
                                                }
                                                break;

            case MotionEvent.ACTION_MOVE:

                                                if (mode == DRAG) 
                                                { 
                                                    matrix.set(savedMatrix);
                                                    matrix.postTranslate(event.getX() - start.x, event.getY() - start.y); // create the transformation in the matrix  of points
                                                } 
                                                else if (mode == ZOOM) 
                                                { 
                                                    // pinch zooming
                                                    float newDist = spacing(event);
                                                    Log.d(TAG, "newDist=" + newDist);
                                                    if (newDist > 5f) 
                                                    {
                                                        matrix.set(savedMatrix);
                                                        scale = newDist / oldDist; // setting the scaling of the
                                                                                    // matrix...if scale > 1 means
                                                                                    // zoom in...if scale < 1 means
                                                                                    // zoom out
                                                        matrix.postScale(scale, scale, mid.x, mid.y);
                                                    }
                                                }
                                                break;
        }

        view.setImageMatrix(matrix); // display the transformation on screen

        return true; // indicate event was handled
    }

    /*
     * --------------------------------------------------------------------------
     * Method: spacing Parameters: MotionEvent Returns: float Description:
     * checks the spacing between the two fingers on touch
     * ----------------------------------------------------
     */

    private float spacing(MotionEvent event) 
    {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    /*
     * --------------------------------------------------------------------------
     * Method: midPoint Parameters: PointF object, MotionEvent Returns: void
     * Description: calculates the midpoint between the two fingers
     * ------------------------------------------------------------
     */

    private void midPoint(PointF point, MotionEvent event) 
    {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }

    /** Show an event in the LogCat view, for debugging */
    private void dumpEvent(MotionEvent event) 
    {
        String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE","POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
        StringBuilder sb = new StringBuilder();
        int action = event.getAction();
        int actionCode = action & MotionEvent.ACTION_MASK;
        sb.append("event ACTION_").append(names[actionCode]);

        if (actionCode == MotionEvent.ACTION_POINTER_DOWN || actionCode == MotionEvent.ACTION_POINTER_UP) 
        {
            sb.append("(pid ").append(action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
            sb.append(")");
        }

        sb.append("[");
        for (int i = 0; i < event.getPointerCount(); i++) 
        {
            sb.append("#").append(i);
            sb.append("(pid ").append(event.getPointerId(i));
            sb.append(")=").append((int) event.getX(i));
            sb.append(",").append((int) event.getY(i));
            if (i + 1 < event.getPointerCount())
                sb.append(";");
        }

        sb.append("]");
        Log.d("Touch Events ---------", sb.toString());
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:25:17.113

明白了...我刚刚删除了滚动视图，它可以工作。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bggray"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/ivapptitle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:adjustViewBounds="true"
            android:contentDescription="img"
            android:scaleType="fitXY"
            android:src="@drawable/apptitle" />
    </LinearLayout>

      <ImageView
            android:id="@+id/ivdownloadedjpgfile"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center"
            android:layout_marginTop="20dip"

            android:contentDescription="img"
            />                

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:45:30.023

我没有看到将 ImageView 包装在 LinearLayout 中的意义

我怀疑 ImageView 设置了它的高度来包装原始图像并且它不会增加。尝试使用固定高度。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bggray"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/ivapptitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:adjustViewBounds="true"
        android:contentDescription="img"
        android:scaleType="fitXY"
        android:src="@drawable/apptitle" />

    <ScrollView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" android:background="@color/titlecolor1">

      <ImageView
            android:id="@+id/ivdownloadedjpgfile"
            android:layout_width="fill_parent"
            android:layout_height="500dp"
            android:layout_gravity="center"
            android:layout_marginTop="20dip"
            android:contentDescription="img"/>                

    </ScrollView>    
</LinearLayout> 
```

# java - 在 URL 处查找 JSON 文件中的某些字段

> ID：15490458
> 
> 赞同：0
> 
> 时间：2013-03-19T02:20:00.383
> 
> 标签：java, json, parsing, gson

我无法将 JSON 和 Java 对象的要点一起工作。基本上我需要做的是检查 URL 上的 JSON 文件，看看是否有可用的更新版本的软件。我已经打开了连接，可以将 JSON 打印到控制台，但这就是我所拥有的一切。我一直在尝试主要使用 GSON。下面是我到目前为止的主要代码，清单是下面显示的类的对象。我最关心的是 JSON 中的“版本”字段，因为我需要将它与我当前的程序版本号进行比较。

```
BufferedReader reader = new BufferedReader(new InputStreamReader(
        connection.getInputStream()));
stringV = reader.readLine();
//System.out.println(manifest);
while ((line = reader.readLine()) != null) {
    stringV = stringV + gson.toJson(line);
    //manifest = manifest + line;
}
System.out.println(manifest);

manifest man = gson.fromJson(manifest, manifest.class);
testString = man.getversion();
System.out.println(test); 
```

我的问题之一涉及我专门用于 JSON 的类，我是否需要为 JSON 中的所有字段声明、获取/设置？

```
public class manifest{
    private List<String> versions;
    private String version;
    private String current;
    private String compatible;
    private String published;
    private String description;
    private List<String> manifest;
    private String jre;

    public List<String> getVersions(){return versions;}
    public String getversion(){return version;}
    public String getcurrent(){return current;}
    public String getcomp(){return compatible;}
    public String getpub(){return published;}
    public String getdesc(){return description;}
    public List<String> getFileList(){return manifest;}
    public String getjre(){return jre;}

    public void setVersions(List<String> versions){this.versions = versions;}
    public void setversion(String version){this.version = version;}
    public void setcurrent(String current){this.current = current;}
    public void setcomp(String compatible){this.compatible = compatible;}
    public void setpub(String published){this.published = published;}
    public void setdesc(String description){this.description = description;}
    public void setFileList(List<String> manifest){this.manifest = manifest;}
    public void setjre(String jre){this.jre = jre;}

    @Override
    public String toString(){
        return String.format("Versions:%s,version:%s,curr:%s,comp:%s,pub:%s,desc:%s,manifest:%s,jre:%s", 
                versions, version, current, compatible, published, description, manifest, jre);
    }
} 
```

这是 JSON 的结构：

```
 {
       "versions": [
          {
        "version": "II V7.1.2",
        "current": true,
        "compatible": true,
        "published": "2012-04-21T18:25:43-05:00",
        "description": "Stability improvements for users:\n\n-Fix a crash\n-Fix a bug",
        "manifest": [
            {
                "name": "file.jar",
                "checksum": "56116165156111156156116161651161616116165116116516651651"
            }, (more elements here)
         "jre": "1.7.0_17" 
```

非常感谢任何帮助，因为我根本不熟悉 JSON。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:39:08.453

JSON 实际上很容易在对象世界中概念化。您可以将其视为数据映射，其中键是字符串，值可以是任何基本类型（布尔值、数字、字符串、日期）、数组或其他映射。每当值最终成为另一个地图时，您就会创建一个对象！就是这么简单。

因此，在您的情况下，让我们看看您包含的 JSON 片段：

```
{
    "versions": [
        {
            "version": "II V7.1.2",
            "current": true,
            "compatible": true,
            "published": "2012-04-21T18:25:43-05:00",
            "description": "Stability improvements for users:\n\n-Fix a crash\n-Fix a bug",
            "manifest": [
                {
                    "name": "file.jar",
                    "checksum": "56116165156111156156116161651161616116165116116516651651"
                }
            ],
            "jre": "1.7.0_17"
        }
    ]
} 
```

此代码段中的外部 JSON 对象包含一个 JSON 元素，它是一个数组，名称为`versions`。这个数组中的每个元素自然映射到一个对象，给你一个像这样的顶级定义：

```
public class Root {
    private List<Version> versions;

    // Constructors, getters, setters
} 
```

现在，您可以开始查看`Version`对象的详细信息。使用这些规则来创建您的 Java 对象：

*   将每个原始类型值映射到等效的 Java 属性。
*   将对象类型值映射到类。
*   将数组映射到 Java 集合类型

*日期不是原始的，但为了映射的目的，我们将应用相同的规则*

```
public class Version {
    private String version;
    private Boolean current;
    private Boolean compatible;
    private Date published;
    private String description;
    private List<Manifest> manifest; // Note the collection *and* object mapping
    private String jre;
    // Constructors, getters, setters
}

public class Manifest {
    private String name;
    private String checksum;
} 
```

很简单吧？然后，您将使用以下代码将您的顶级 JSON 映射到您的顶级对象：

```
Root obj = new Gson().fromJson(jsonStr, Root.class); 
```

* * *

总而言之，您用于检索 JSON 的代码有一些不必要/不正确的代码：

*   使用 a`StringBuilder`来构建你的字符串，而不是更昂贵的 concat 操作
*   在 while 循环中，调用`gson.toJson(line);`是不必要的，实际上是不正确的。

# android - The Application XXX has stopped unexpectedly. Please try again

> ID：15490464
> 
> 赞同：0
> 
> 时间：2013-03-19T02:20:26.450
> 
> 标签：android

I am new to Android, and I am building an app based on a map. When I tried to launch my app, here comes the error, "The Application AdBaiduMapDemo02 has stopped unexpectedly. Please try again." Here is what the LogCat said:

```
>03-19 09:40:46.983: D/AndroidRuntime(389): Shutting down VM  
>03-19 09:40:46.983: W/dalvikvm(389): threadid=1: thread exiting with uncaught exception (group=0x40015560)  
>03-19 09:40:47.023: E/AndroidRuntime(389): FATAL EXCEPTION: main  
>03-19 09:40:47.023: E/AndroidRuntime(389): java.lang.RuntimeException: Unable to instantiate application com.example.adbaidumapdemo02.AdBaiduMapDemo02: java.lang.ClassNotFoundException: com.example.adbaidumapdemo02.AdBaiduMapDemo02 in loader dalvik.system.PathClassLoader[/data/app/com.example.adbaidumapdemo02-1.apk]  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at android.app.LoadedApk.makeApplication(LoadedApk.java:466)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3260)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at android.app.ActivityThread.access$2200(ActivityThread.java:117)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:969)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at android.os.Handler.dispatchMessage(Handler.java:99)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at android.os.Looper.loop(Looper.java:130)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at android.app.ActivityThread.main(ActivityThread.java:3683)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at java.lang.reflect.Method.invokeNative(Native Method)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at java.lang.reflect.Method.invoke(Method.java:507)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at dalvik.system.NativeStart.main(Native Method)  
>03-19 09:40:47.023: E/AndroidRuntime(389): Caused by: java.lang.ClassNotFoundException: com.example.adbaidumapdemo02.AdBaiduMapDemo02 in loader dalvik.system.PathClassLoader[/data/app/com.example.adbaidumapdemo02-1.apk]  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at android.app.Instrumentation.newApplication(Instrumentation.java:942)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     at android.app.LoadedApk.makeApplication(LoadedApk.java:461)  
>03-19 09:40:47.023: E/AndroidRuntime(389):     ... 11 more 
```

**My code of MainActivity is as follows:**

```
package com.example.adbaidumapdemo02;  
import com.baidu.mapapi.BMapManager;  
import com.baidu.mapapi.GeoPoint;  
import com.baidu.mapapi.MapActivity;  
import com.baidu.mapapi.MapController;  
import com.baidu.mapapi.MapView;  
import android.os.Bundle;  
public class MainActivity extends MapActivity {  
    BMapManager mBMapMan = null;  
    MapView mMapView = null;  
    @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.activity_main);  
        mBMapMan = new BMapManager(getApplication());  
        mBMapMan.init("027FB8C5D701284490FF6C80E66AD7EAB37154C4", null);  
        super.initMapActivity(mBMapMan);  
        mMapView = (MapView)findViewById(R.id.bmapsView);  
        mMapView.setBuiltInZoomControls(true);  
        MapController mMapController = mMapView.getController();  
        GeoPoint point = new GeoPoint((int)(39.915 * 1E6), (int)(116.404 * 1E6));  
        mMapController.setCenter(point);  
        mMapController.setZoom(12);  
    }  
    @Override   
    protected void onDestroy() {  
        if(mBMapMan != null)  
        {  
            mBMapMan.destroy();  
            mBMapMan = null;  
        }  
        super.onDestroy();  
    }     
    @Override  
    protected void onPause() {  
        if (mBMapMan != null)  
        {  
            mBMapMan.stop();  
        }  
        super.onPause();  
    }     
    @Override  
    protected void onResume() {  
        if (mBMapMan != null)  
        {   
            mBMapMan.start();  
        }  
        super.onResume();  
    }  
    @Override  
    protected boolean isRouteDisplayed() {  
        return false;  
    }  
} 
```

**Is there any idea to fix this? Thanks in advance!**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:28:53.347

> com.example.adbaidumapdemo02.AdBaiduMapDemo02: java.lang.ClassNotFoundException:

Where is your AdBaiduMapDemo02.class?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:00:04.977

Somewhere in your project you are referencing a class `AdBaiduMapDemo02` which the Java Class Loader can not find.

I would suggest doing a search in your project for "AdBaiduMapDemo02"

# php - 如何将csv中具有相同id的行与php结合起来

> ID：15490465
> 
> 赞同：0
> 
> 时间：2013-03-19T02:20:28.640
> 
> 标签：php, excel, sorting, csv, merge

我有一个包含两列“id”和“name”的 csv，我想合并共享相同 id 的行并用逗号分隔它们。

```
id      name
39695   NFL: Cowboys @ Giants
39699   NFL: Colts @ Bears
39699   NFL: Steelers @ Broncos
39699   NFL: Eagles @ Browns
39699   NFL: Panthers @ Buccaneers 
```

进入

```
id      name
39695   NFL: Cowboys @ Giants
39699   NFL: Colts @ Bears, NFL: Steelers @ Broncos, NFL: Eagles @ Browns, NFL: Panthers @ Buccaneers 
```

我所需要的只是一个回显或一个新的 .csv 文件。

感谢您的帮助。

**编辑

```
<"?php

$lines = file('sport3.csv');

foreach($lines as $line)
{
list($id, $name) = explode(',', $line);
$merged[$id][] = $name;
}

foreach($merged as $id => $vals)
{
echo '"' . $id . '", "' . implode(',', $vals) . '\"\n';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:08:08.890

在 PHP 中使用专为 CSV 函数设计的更安全：

```
// parse thru data
$mergedData = array();
$handle = fopen('sport3.csv', 'r');
if (!$handle) throw new Exception("Can't open original CSV file");
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    list($id, $name) = $data;
    if (empty($mergedData[$id])) $mergedData[$id] = array();
    $mergedData[$id][] = $name;
}
fclose($handle);

// save merged data
if (count($mergedData) > 0) {
    $handle = fopen('sport3-merged.csv', 'w');
    if (!$handle) throw new Exception("Can't open CSV file for merged data");
    foreach($mergedData as $id => $vals) {
        array_unshift($vals, $id);
        if (!fputcsv($handle, $vals)) throw new Exception("Can't write data to merged CSV file");
    }
    fclose($handle);
} 
```

希望有帮助。

# javascript - 使用 Javascript 计算文本区域和输入

> ID：15490467
> 
> 赞同：0
> 
> 时间：2013-03-19T02:20:53.063
> 
> 标签：javascript, html, input, textarea

我正在使用以下代码来计算 HTML5 表单上所需输入（文本框）的数量，效果很好。

```
var inputTags = document.getElementsByTagName('input');
reqinputCount = 0;
for (var i=0, length = inputTags.length; i<length; i++) {
    if (inputTags[i].validity.valid == false ) {
        reqinputCount++;
    }
} 
```

现在我的问题是我在表单上也有一个文本区域，并且也想包含它。你能帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T02:23:02.757

由于您已经依赖仅存在于最新版本浏览器中的功能，我假设您不介意使用另一个此类功能是安全的：

```
var inputTags = document.querySelector("input,textarea"); 
```

# c++ - 我可以使用 Eclipse CDT 调试预构建的 C++ 可执行文件吗？

> ID：15490468
> 
> 赞同：2
> 
> 时间：2013-03-19T02:20:57.047
> 
> 标签：c++, eclipse, debugging, eclipse-cdt

在 Linux 上，我有一些用我自己的 makefile 构建的 C++ 程序，我正在寻找一些 GUI 调试器来在源代码级别调试它们。

以前我在 openSUSE(12.3) 上使用 KDbg(2.5.2)。它可以工作，但有一些非常烦人的限制，例如，当被调试的程序没有被 Kdbg 捕获时，我无法设置断点——我的意思是，为了设置新的断点，我必须在程序启动之前设置它*或者*程序在遇到已经设置的断点时暂停。

现在我尝试使用 Eclipse CDT。我得到了*eclipse-cpp-juno-SR2-linux-gtk.tar.gz*但发现我不知道如何加载我的可执行文件以便开始调试。

我搜索了『eclipse debug pre-built C binary』之类的词，但似乎很少有人关心这个特性。

Eclipse CDT 真的可以做到吗？如果 Eclipse CDT 不能，KDbg 有没有更好的替代品？请帮忙。

![在此处输入图像描述](../Images/951d2d383282d8e15235923a6f50d86e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:06:40.617

根据这个答案的提示，[https://stackoverflow.com/a/248119/151453](https://stackoverflow.com/a/248119/151453)，我终于弄清楚了该怎么做。

关键点是：在 Eclipse CDT 项目中，创建/编辑启动配置，以便告诉调试器要加载什么可执行文件。

现在我不得不承认，Eclipse CDT 在 C++ 代码调试方面的表现比 KDbg 好得多。

下面是 openSUSE 12.3 上的一些屏幕截图。

![F:\ChjKeep\chj.dev\桌面\AUTO-SNAP\wizard-prjtype.png](../Images/96b2930e9fe56b6a44ff6e87a931b67e.png) ![F:\ChjKeep\chj.dev\桌面\AUTO-SNAP\cdt-prjdir.png](../Images/d9b64686962be307262fe580a7cab411.png) ![F:\ChjKeep\chj.dev\桌面\AUTO-SNAP\cdt-prjwiz-finish.png](../Images/7e55fc92e2e4e43f1fd5a30d46f4a842.png) ![F:\ChjKeep\chj.dev\桌面\AUTO-SNAP\cdt-menu-prjprop.png](../Images/bb667659bb0904302a04b3025b9beee2.png) ![F:\ChjKeep\chj.dev\桌面\AUTO-SNAP\cdt-prjprop-runsetting.png](../Images/121fe53935a501b7633ebcd6e3a19986.png) ![F:\ChjKeep\chj.dev\桌面\AUTO-SNAP\cdt-prj-exepath.png](../Images/da13c4dec8f5cca2e2f35de4ca7588c4.png)

现在我们可以运行 -> 调试 (F11) ![F:\ChjKeep\chj.dev\桌面\AUTO-SNAP\cdt-offer-switch-pers.png](../Images/dc1afb41619032132cf14c3eff537a1c.png)

调试器在 main() 的第一条语句处自动暂停程序。

![F:\ChjKeep\chj.dev\桌面\AUTO-SNAP\cdt-pause-main.png](../Images/0b6f0fef7999dbdf138bb22b051efcf7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-08T20:27:52.123

独立调试器是一个 Eclipse 应用程序，它将 Eclipse 插件从 CDT（C/C++ 开发工具）项目打包到一个可以从命令行脚本启动的应用程序中：

bash /path/scripts/cdtdebug.sh -e 可执行文件 [args]

# playframework - 如何在 Play Framework 2.1 (Scala) 中从同一个代码库为多个域提供服务

> ID：15490469
> 
> 赞同：2
> 
> 时间：2013-03-19T02:21:05.310
> 
> 标签：playframework, playframework-2.0, playframework-2.1

在 Play Framework 2.1 下使用 Scala 我想使用相同的代码库和数据库为多个域提供服务。在 Scala 下找不到最新版本的任何内容。

我正在构建一个类似于 Magento 的多站点 CMS，并且需要能够检测域/主机名并根据请求的域从数据库中提取不同的条目。

如何检测 Scala 中请求的域，以便提供正确的内容？

我在想 Global.scala 中这样的东西可以工作：

```
import play.api._

object Global extends GlobalSettings {

  override def onStart(app: Application) {
    //detect domain host here
    //set global variable for which domain to use when interacting with the DB
  }

} 
```

或者这是否需要在路由文件中处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:07:08.107

您可以使用该`play.api.mvc.Call.absoluteURL`方法检索控制器的完整 URL。

例如：

```
val url = controllers.routes.Index.view().absoluteURL() 
```

您需要此调用范围内的隐式 RequestHeader。我认为全局检测 URL 的最佳解决方案是使用[filter API](http://www.playframework.com/documentation/2.1.0/ScalaInterceptors)。

# javascript - 客户端文件大小结束格式验证。为什么 JS 会阻止文件上传？

> ID：15490472
> 
> 赞同：2
> 
> 时间：2013-03-19T02:21:33.813
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc, asp.net-mvc-4

```
<script type="text/javascript">
    $.validator.addMethod('accept', function () { return true; });
</script>
@using (Html.BeginForm("Create","My controller",FormMethod.Post,new {enctype = "multipart/form-data"})) {
    @Html.ValidationSummary(true)
    <fieldset>
        <div class="editor-field">
            <input type="file" id="File" name="File" accept="image/*" />
        </div> 
```

我无法在打开 JS 的情况下上传文件（当我单击提交时，文件输入周围会出现一个黄色框，并且没有任何反应）。

当我关闭 JS 我的表单提交。

上面的 3 行，文件上传表单神奇地与 JS 一起工作。我在我的一个项目中找到了这些，但我不记得它们做了什么或为什么需要它们。

你能给我解释一下吗？

**编辑**

视图的整个代码。

```
@using EDoctor.Properties
@using EDoctor.Resources
@model EDoctor.Models.DoctorProfileViewModel

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script type="text/javascript">
    $.validator.addMethod('accept', function () { return true; });
</script>
@using (Html.BeginForm("Create","DoctorProfiles",FormMethod.Post,new {enctype = "multipart/form-data"})) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>DoctorProfiles</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Model.PhotoFileUrl)
        </div>
        <div class="editor-field">
            <input type="file" id="File" name="File" accept="image/*" />
            @Html.ValidationMessage("UploadFile")
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Model.LicenseNumber)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Model.LicenseNumber)
            @Html.ValidationMessageFor(model => model.Model.LicenseNumber)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Model.FirstName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Model.FirstName)
            @Html.ValidationMessageFor(model => model.Model.FirstName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Model.LastName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Model.LastName)
            @Html.ValidationMessageFor(model => model.Model.LastName)
        </div>

        @Html.HiddenFor(model => model.Model.UserId)

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T02:42:08.047

您已关闭文件类型的验证。默认情况下，html 文件类型具有*接受*某些类型文件的属性。该`Accept`字段控制允许的文件类型。

```
$.validator.addMethod('accept', function () { return true; }); 
```

`success`通过添加始终返回 true ( )的验证方法。结果是任何文件类型

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T17:39:36.587

我认为您有一个标记为必需的模型属性，但它不在任何地方的表单上。我看到这个：

```
@Html.LabelFor(model => model.Model.PhotoFileUrl) 
```

还有这个

```
@Html.ValidationMessage("UploadFile") 
```

在您的表单中，但这是您用于文件元素的标记：

```
<input type="file" id="File" name="File" accept="image/*" /> 
```

因此，您的模型似乎可能在字段`[Required]`上具有属性`UploadFile`。这可能会触发不显眼的验证，因为验证器将无法找到要验证的字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T00:04:39.290

在 Dave 和 Tieson 的帮助下，我终于解决了这个问题，并获得了很好的客户端验证。如果有人还需要执行客户端文件验证，我将在此处发布详细说明：

**总体思路**

*   MVC/jQuery 不理解**accept="image/*"**您期望的方式。它不接受 *.png 例如
*   除非您添加**@Html.ValidationMessage("file_input")**否则将无处显示错误消息。结果，当您尝试提交表单时，您得到的只是字段周围的黄色框（chrome）或什么都没有，并且您的脸上出现了一个大的WTF。
*   **@Html.ValidationMessage**生成以下 html：

    ```
    <span class="field-validation-valid" data-valmsg-for="file_input" data-valmsg-replace="true"></span> 
    ```

*   如果 jQuery 验证器在 html 中找到上面的行，它将坚持放置它自己的验证消息。

如果我们想在客户端验证图像格式和大小并获得自定义/本地化验证消息怎么办？我们可能可以使用某种插件，但您也可以这样做：

```
<div class="editor-field">
    <input type="file" id="file_input" name="file_input" onchange='validate_image_upload(this)' accept="image/*" class="fileToUpload" data-error-msg-max-size="@string.Format(ErrorMessages.FileSizeExceedsMaxSize,Settings.Default.OfficialMaxFileUploadSizeMBs)" data-error-msg-file-format="@string.Format(ErrorMessages.IncorrectImageFile, Settings.Default.AcceptableImageFormats)" data-max-size="1500000" data-acceptable-formats="@Settings.Default.AcceptableImageFormats"/>
    @Html.ValidationMessage("file_input[custom]")
</div> 
```

**请注意在 ValidationMessage 中将 '[custom]' 添加到 'file_input'**

我们这样做是为了欺骗 jQuery 并阻止它放置自己的验证信息。（如果你不改，jQuery会毫不留情地屠宰你自己的消息）。我们仍然会收到漂亮的、原始的、MVC 样式的错误消息，并且可以使用 Razor 来生成它。我们只需要以某种方式设置它的内容。这可以通过在您的视图文件顶部（在其他脚本标签下）添加以下代码来完成：

```
<script type="text/javascript">
    $.validator.addMethod('accept', IsFileValid);
</script> 
```

现在会发生什么？

*   我们通过注入我们自己的方法（IsFileValid）来忽略jQuery接受图像文件的奇怪想法
*   如果 IsFileValid 返回 false，jQuery 仍然希望放置它自己的验证消息。但是它没有地方放它（我们在ValidationMessage中添加了'[custom]'），现在它生成了以下html：

    ```
    <span class="field-validation-valid" data-valmsg-for="file_input[custom]" data-valmsg-replace="true"></span> 
    ```

和 jQuery 正在寻找

```
<span class="field-validation-valid" data-valmsg-for="file_input" data-valmsg-replace="true"></span> 
```

*   它什么也没找到，所以它只是突出显示输入字段并阻止提交按钮。（很好，我们已经完成了一半的工作）

*   我们现在所要做的就是放置我们自己的验证消息，这可以通过这个脚本来完成。（IsFileValid 将处理所有事情，因此您无需执行上述任何操作）。

    ```
    function IsFileValid(value, field) {
        return validate_image_upload(field);
    }

    String.prototype.format = function () {
        var s = arguments[0];
        for (var i = 0; i < arguments.length - 1; i++) {
            var reg = new RegExp("\\{" + i + "\\}", "gm");
            s = s.replace(reg, arguments[i + 1]);
        }

        return s;
    };

    function validate_image_upload(field) {
        var isValid = validate_image_size(field) &&
            validate_image_format(field);

        if (isValid)
            remove_error_message(field);
        else
            append_error_message(field);

        return isValid;
    }

    function validate_image_format(field) {
        var ext = $(field).val().split('.').pop().toLowerCase();
        var acceptabelExtensions = $(field).data("acceptableFormats").toLowerCase().split(',');
        if ($.inArray(ext, acceptabelExtensions) == -1) {
            var msg = String.prototype.format($(field).data("errorMsgFileFormat"), acceptabelExtensions.join(', '));
            append_error_message(field, msg);
            return false;
        } else {
            return true;
        }
    }

    function validate_image_size(field) {
        if (field.files[0].size > $(field).data("maxSize")) {
            append_error_message(field, $(field).data("errorMsgMaxSize"));
            return false;
        } else {
            return true;
        }
    }

    function append_error_message(field, msg) {
        var f = $(field);
        var sib = f.siblings();
        $.each(sib, function (i, v) {
            var name1 = $(v).data("valmsgFor");
            var name2 = f.attr("name") + "[custom]";
            if (name1 == name2) {
                $(v).attr("class", "field-validation-error");
                $(v).text(msg);
                return;
            }
        });
    }

    function remove_error_message(field) {
        var f = $(field);
        var sib = f.siblings();
        $.each(sib, function (i, v) {
            var name1 = $(v).data("valmsgFor");
            var name2 = f.attr("name") + "[custom]";
            if (name1 == name2) {
                $(v).attr("class", "field-validation-valid");
                return;
            }
        });
    } 
    ```

**评论**

*   脚本验证文件扩展名和文件大小
*   它显示/隐藏验证消息（找到这个**file_input[custom]**并将其映射到**file_input**）
*   IsFileValid 方法也与文件输入的 onchange 挂钩（因此，如果您选择错误的图像，它会立即显示错误）
*   最大文件大小和接受的文件扩展名通过设置中的视图传递。（见输入标签）。
*   验证消息通过视图表单资源传递 - 因此可以轻松本地化（请参阅输入标签）
*   当然，这并不安全。这只是用户友好的。记住也要执行服务器端验证。

希望我救了人几个小时。:)

# java - rabbitmq 交换路由密钥意外匹配

> ID：15490473
> 
> 赞同：0
> 
> 时间：2013-03-19T02:21:39.633
> 
> 标签：java, queue, rabbitmq

我正在为 RabbitMQ 开发用于 M2M 解决方案的 POC。我有大量将发布数据的物理设备（目​​前使用 Java 客户端模拟客户端 - 最终通过 MQTT）。我想要：

1.  订阅和记录所有原始数据到数据库
2.  按数据类型订阅数据子集，以便我可以独立扩展这些数据类型的解决方案
3.  通过交换发布新事件（例如，获取原始事件，使其更有用并通过系统重新提交）

每条消息都有一个路由键，如 key:value.key:value.key:value.messageType:1，来自设备的数据有一个额外的键 FROMDEVICE.MESSAGETYPE:1.key:value... 等。保存的订阅者来自设备的原始数据使用路由键#.FROMDEVICE.#（上面的案例#1）从交换中构建一个队列。接受特定消息类型并对其进行增值的订阅者使用路由键#.MESSAGETYPE:1.#（上面的案例#2）构建一个队列，并将新消息提交到同一个交换器，从路由键中删除 FROMDEVICE 并替换.MESSAGETYPE:1 和 .MESSAGETYPE:101（上面的案例 #3）。然后有一个新消息类型的独立订阅者/队列。

一切都很好，除了我的订阅者应该只从设备接收数据也得到增值数据（MESSAGETYPE：101），即使它应该搜索的routingKey在重新发布/增值消息中不存在。

*   FROMDEVICE.MESSAGETYPE:1 ->
    *   应该匹配路由键#.FROMDEVICE.#
    *   应该匹配#.MESSAGETYPE:1.#
*   消息类型：101
    *   应该匹配路由键#.MESSAGETYPE:101.#
    *   不应匹配 #.FROMDEVICE.# （但匹配）

仅从设备订阅数据的代码：

```
public class HandlerWriteEverythingFromDevice {

private final static String EXCHANGE_NAME = "logsTopicDurable";
private final static String QUEUE_NAME = "fromDevice";
/**
 * Writes all data from device to a data store.
 */
public static void main(String[] args) throws java.io.IOException, java.lang.InterruptedException {
    ConnectionFactory factory = new ConnectionFactory();
    factory.setHost("192.168.56.101");
    Connection connection = factory.newConnection();
    Channel channel = connection.createChannel();

    channel.exchangeDeclare(EXCHANGE_NAME, "topic", true);
    channel.queueDeclare(QUEUE_NAME, true, false, false, null);

    System.out.println(" [*] listens for messages from devices - durable!");

    channel.basicQos(1);

    String routingKey = "#.fromDevice.#".toUpperCase();

    channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, routingKey); //bind to all selected messages
    System.out.println(" [*] subscribing to: " + routingKey);

    System.out.println(" [*] Waiting for messages. To exit press CTRL_C");

    QueueingConsumer consumer = new QueueingConsumer(channel);
    boolean autoAck = false; //ack back when done
    channel.basicConsume(QUEUE_NAME, autoAck, consumer);
    int msgCount = 0;
    while (true) {
        QueueingConsumer.Delivery delivery = consumer.nextDelivery();
        String message = new String(delivery.getBody());

        System.out.println(" [x] Message Count: " + ++msgCount + " ROUTINGKEY: '" + delivery.getEnvelope().getRoutingKey() + "\n     MESSAGE: '" + message + "'");
        Thread.sleep(250); //simulate some time to insert into the db.
        channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);
    }
}
} 
```

仅订阅 messageType:1 并重新发布 messageType:101 的代码

```
 private final static String EXCHANGE_NAME = "logsTopicDurable";
private final static String QUEUE_NAME = "messageType1";
/**
 * Handler for messageType:1
 */
public static void main(String[] args) throws java.io.IOException, java.lang.InterruptedException {
    ConnectionFactory factory = new ConnectionFactory();
    factory.setHost("192.168.56.101");
    Connection connection = factory.newConnection();
    Channel channel = connection.createChannel();

    channel.exchangeDeclare(EXCHANGE_NAME, "topic", true);
    channel.queueDeclare(QUEUE_NAME, true, false, false, null);

    System.out.println(" [*] listens for messageType:1 and submits messageType:101");

    channel.basicQos(1);

    String routingKey = "#.messageType:1.#".toUpperCase();

    channel.queueBind(QUEUE_NAME, EXCHANGE_NAME, routingKey); //bind to all selected messages
    System.out.println(" [*] subscribing to: " + routingKey);

    System.out.println(" [*] Waiting for messages. To exit press CTRL_C");

    QueueingConsumer consumer = new QueueingConsumer(channel);
    boolean autoAck = false; //ack back when done
    channel.basicConsume(QUEUE_NAME, autoAck, consumer);
    int msgCount = 0;
    while (true) {
        QueueingConsumer.Delivery delivery = consumer.nextDelivery();
        String message = new String(delivery.getBody());

        System.out.println(" [x] Message Count: " + ++msgCount + " ROUTINGKEY: '" + delivery.getEnvelope().getRoutingKey() + "\n     MESSAGE: '" + message + "'");

        channel.basicPublish(EXCHANGE_NAME, 
                delivery.getEnvelope().
                        getRoutingKey().
                        replaceAll("messageType:1", "messageType:101").
                        replaceAll(".FROMDEVICE", ""). 
                        replaceAll("FROMDEVICE.", "").trim(), 
                true, 
                MessageProperties.PERSISTENT_BASIC, 
                message.getBytes());

        channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);
    }
} 
```

messageType:101 有发布者代码和订阅者代码，但我认为本次讨论不需要它们。我想知道是否发布到绑定了队列的通道可能是原因，但我尝试创建两个通道（相同的连接对象）并得到相同的结果和更丑陋的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:51:56.217

我建议您对绑定键有点宽松。为了让事情更清楚一点，您应该以不同的方式使用术语绑定键和路由键。路由键是生产者发送的。绑定键用于将队列绑定到主题交换。

因为我不确定你说的是哪个

> “应该匹配路由键#.MESSAGETYPE:101.#”

您是否使用路由密钥发送消息，`#.MESSAGETYPE:101.#`因为那是个坏主意。我想不是，但如果你不是！

让我们假设这是您的绑定密钥。我不确定，因为我没有专门对此进行任何测试，但`#`之前和之后可能会导致一些问题。您应该考虑路由键的规范。他们必须遵守的某种格式。它可能是可扩展的，但不是完全免费的。这样，您可以使用更具体的绑定键，`*`而不是`#`提供更多控制权。

# ruby-on-rails - neoj4 vs “传统” RDBMS & Memcache / 消息 / Redis 解决方案

> ID：15490477
> 
> 赞同：2
> 
> 时间：2013-03-19T02:22:05.267
> 
> 标签：ruby-on-rails, redis, rabbitmq, neo4j, feed

我正在对社交网络进行原型设计（使用 ROR 3）并决定查看 Neo4j，虽然它看起来很棒，但我对设计方面的缩放和性能有疑问。

我研究了 Etsy 如何将活动源放在一起（请参阅[http://www.slideshare.net/danmckinley/etsy-activity-feeds-architecture](http://www.slideshare.net/danmckinley/etsy-activity-feeds-architecture)），并了解消息队列如何分散活动（例如共享图片和在他们的新闻提要中向您的 500 位左右的朋友提供此活动）。我还了解如何缓存新闻提要（memcache）以及如何针对 Redis 执行查找。

总而言之，似乎要制作一个可以很好扩展的高性能活动源（以及一般的社交网络），常见的模式是使用分片、水平扩展、memcache、rabbitmq、redis、Mongodb、innodb (mysql) 等 - 所有试图补偿高容量，磁盘读取等。 **但这在设计方面是相当多的开销**..

**Neo4J 能否至少在早期消除这种安排的需要**？我的意思是它是如此之快，以至于我不需要为扇出和消息传递设置消息队列，不需要为用户执行的每个操作设置“活动”缓存，并且可以使用它来处理排序和存储消息？可以使用这样的系统创建像 Facebook 这样的新闻提要，还是高性能活动提要仅限于基本状态更新？

如果这些问题太宽泛，让我换一种方式问：我可以使用 neo4j 编写 facebook 或 twitter 并消除消息队列以扇出更新的需要（而不是我想要即时获得更新的实时流），新闻提要的内存缓存和缓存的活动提要对象？或者我会发现自己做同样的事情甚至更多来处理每秒数百个请求？

我之所以问，是因为如果 Neo4J 确实可以处理大量数据，而不必使用 Etsy、Twitter 和 Facebook 保持高性能所采用的技巧，那么使用它会节省相当多的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:17:00.473

是的。事实上，Rene Pickhardt 已经这样做了。

[http://www.rene-pickhardt.de/graphity-an-efficient-graph-model-for-retrieving-the-top-k-news-feeds-for-users-in-social-networks/](http://www.rene-pickhardt.de/graphity-an-efficient-graph-model-for-retrieving-the-top-k-news-feeds-for-users-in-social-networks/)

# python - 保存模型时出现缺失列错误

> ID：15490478
> 
> 赞同：1
> 
> 时间：2013-03-19T02:22:08.600
> 
> 标签：python, django, postgresql, django-models

我在 django 中创建模型时遇到问题。我写了一个这样的模型：

```
from django.db import models
class FooModel(models.Model):
    name = models.CharField(max_length = 255) 
```

我跑

```
manage.py syncdb 
```

但是当我在 shell 中时，我无法保存实例。每次我调用它时，它都会告诉我它缺少一列

```
manage.py shell
>>from app.models import FooModel
>>foo = FooModel()
>>foo.name = 'foo'
>>foo.save()
DatabaseError: column "name" of relation "ecommerce_foomodel" does not exist
LINE 1: INSERT INTO "ecommerce_foomodel" ("name") VALUES (E'123123as... 
```

我们正在使用 postgres。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:53:39.003

数据库表是在您添加相应字段之前创建的。

因此，您可以使用以下方法重新创建该应用程序的所有表（如果您没有任何有用的数据）：

```
python manage.py reset ecommerce 
```

[或者，您应该使用South](http://south.aeracode.org/)将数据库迁移到最新版本。

# jquery - 在 $.each fn 和 for 循环中创建的回调行为不同？

> ID：15490481
> 
> 赞同：2
> 
> 时间：2013-03-19T02:22:29.203
> 
> 标签：jquery, for-loop, each

我做了一些看起来像这样的测试代码。

```
var selects = [$('#elem1'), $('#elem2'), $('#elem3')];

$.each(selects, function(item){
    selects[item].bind('click', function(){
        console.log("each function : " + item);
    });
});

for(var i = 0; i < selects.length; i++){
    var elem = selects[i];
    elem.bind('click', function(e){
        console.log("for loop : " + i);
    });
} 
```

我做了三个按钮来绑定事件。并经过测试

如果我单击名称为“elem1”的按钮，结果是：

```
console $
each function : 0
for loop : 3 
```

如果我单击名称为“elem2”的按钮，结果是：

```
console $
each function : 1
for loop : 3 
```

两个循环示例之间发生了什么？请告诉我。

感谢您有一个愉快的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:25:16.043

`i`指的是计数器变量本身，而不是它的值。您必须按值传递它：

```
for(var i = 0; i < selects.length; i++){
    var elem = selects[i];

    (function(i) {
        elem.bind('click', function(e) {
            console.log("for loop : " + i);
        });
    })(i);
} 
```

`i`匿名函数中的影子可以做到这一点。

# sharepoint - SharePoint 2010 v4.master 内容类型

> ID：15490483
> 
> 赞同：1
> 
> 时间：2013-03-19T02:22:33.797
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

我正在接管一个 SharePoint 门户，并注意到以前的开发人员使用 SharePoint Designer 进行所有开发，而我使用 Visual Studio 自定义解决方案/功能进行开发。

注意：站点发布功能在某些 Web 应用程序的团队站点模板上启用。

我注意到的问题是 v4.master 内容类型已从“母版页”内容类型更改为“页面布局”内容类型。这必须通过发布站点上的“编辑属性”完成。在 SP 设计器中打开站点时，v4.master 显示在页面布局而不是母版页中。

v4.master 旁边还有一个蓝色图标，表示页面是自定义的，内容存储在数据库中，这会导致性能问题。SharePoint 太慢了，以至于用户非常沮丧。母版页中还有指向顶级脚本目录中的 jquery 的脚本标记。就个人而言，我会为此创建一个委托控件，而不是自定义 v4.master。没有复制。（我完全不喜欢 SP Designer，这个工具给了没有经验的高级用户太多的权力，他们喜欢把 sharepoint 开发人员放在他们的简历上。我肯定会禁用 SP Designer）

那么，综上所述，解决此问题的最佳实践或建议是什么？

这会给未来的应用程序或网站集带来什么问题？

我是否应该开发和部署自定义主服务器作为功能，然后在 v4.master 上“重置为站点定义”？

为什么 SharePoint 允许用户将母版页上的内容类型更改为“页面布局”？为什么这甚至是一个选项，甚至没有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:48:22.417

在 SharePoint Designer 中您需要做的就是在页面布局文件夹中发布母版页，并在网站设置中的母版页和页面布局中批准它。母版页将显示在 SharePoint 设计器的母版页部分中。

# ruby-on-rails - 乘客 ('Bundler:RubyVersionMismatch')

> ID：15490484
> 
> 赞同：2
> 
> 时间：2013-03-19T02:22:35.453
> 
> 标签：ruby-on-rails, ruby, passenger

我在服务器上部署 Rails 应用程序时遇到问题。我正在部署使用Passenger 来提供页面。启动服务器时，我的页面上列出了以下错误。我安装的乘客版本似乎引用了 ruby​​ 1.8.7，但我的应用程序是在 2.0.0 中构建的。我试过删除 ruby​​ 1.8.7 并重新安装Passenger，但到目前为止没有运气。如果我从我的目录运行 ruby​​ -v，它会将版本列为 2.0.0。

```
Your Ruby version is 1.8.7, but your Gemfile specified 2.0.0 (Bundler::RubyVersionMismatch)
/home/ubuntu/.rvm/gems/ruby-2.0.0-p0@global/gems/bundler-1.3.4/lib/bundler/definition.rb:361:in `   validate_ruby!'
/home/ubuntu/.rvm/gems/ruby-2.0.0-p0@global/gems/bundler-1.3.4/lib/bundler.rb:116:in `setup'
/home/ubuntu/.rvm/gems/ruby-2.0.0-p0@global/gems/bundler-1.3.4/lib/bundler/setup.rb:17
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:59:in `gem_original_require'
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:59:in `require'
/var/lib/gems/1.8/gems/passenger- 4.0.0.rc4/lib/phusion_passenger/loader_shared_helpers.rb:212:in `run_load_path_setup_code'
/var/lib/gems/1.8/gems/passenger-4.0.0.rc4/helper-scripts/rack-preloader.rb:73:in `preload_app'
/var/lib/gems/1.8/gems/passenger-4.0.0.rc4/helper-scripts/rack-preloader.rb:127 
```

我的 apache2.conf 文件有以下添加：

```
Include sites-enabled/
<ifmodule mod_ssl.c>
    NameVirtualHost *:443
</ifmodule>
LoadModule passenger_module /var/lib/gems/1.8/gems/passenger 4.0.0.rc4/libout/apache2/mod_passenger.so
   PassengerRoot /var/lib/gems/1.8/gems/passenger-4.0.0.rc4
   PassengerRuby /usr/bin/ruby1.8 
```

编辑：答案

我正在使用 sudo 安装乘客和 apache2 模块。应该刚刚输入：

```
gem install passenger -pre
passenger-install-apache2-module 
```

没有须藤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T05:16:46.950

您的乘客配置指向 ruby​​ 1.8

```
LoadModule passenger_module /var/lib/gems/1.8/gems/passenger 4.0.0.rc4/libout/apache2/mod_passenger.so
PassengerRoot /var/lib/gems/1.8/gems/passenger-4.0.0.rc4
PassengerRuby /usr/bin/ruby1.8 
```

它应该看起来像这样......

```
LoadModule passenger_module /var/lib/gems/2.0.0/gems/passenger 4.0.0.rc4/libout/apache2/mod_passenger.so
PassengerRoot /var/lib/gems/2.0.0/gems/passenger-4.0.0.rc4
PassengerRuby /usr/bin/ruby2.0.0 
```

乘客安装非常有用，它会在安装成功后在控制台上为您打印这些行。您应该只复制这些行并将它们粘贴到您的 apache conf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:35:49.680

您应该再次尝试安装乘客。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-12T23:47:56.777

这就是我从使用 RVM 切换到 RBENV 的原因。RBENV 不会遇到这个问题。加上它[更好](https://github.com/rbenv/rbenv/wiki/Why-rbenv%3F)。

如果您在生产服务器上使用 RVM 升级 ruby​​，您将被迫重新安装乘客/nginx（在您的情况下，它看起来只是乘客）。

巨大的痛苦，并导致服务器停机。

改用 RBENV 可以避免这种头痛。使用 RBENV/Capistrano，升级可以简单地通过你的 gemfile 完成，其余的就可以了。

# scala - Manifest[T].erasure 在 2.10 中已弃用，我现在应该使用什么？

> ID：15490486
> 
> 赞同：8
> 
> 时间：2013-03-19T02:22:41.790
> 
> 标签：scala, generics, implicit, scala-2.10, erasure

我有以下代码：

```
object Log {

  def get[T](implicit manifest : Manifest[T] ) = {
    LoggerFactory.getLogger( manifest.erasure.getName )
  }

  def getByName( name : String ) = {
    LoggerFactory.getLogger(name)
  }

} 
```

我们的想法是像这样使用它：

```
object SimpleFuture {
  val log = Log.get[SimpleFuture[Throwable,Nothing]]
} 
```

但是编译器（2.10）现在说不`manifest.erasure`推荐使用。我现在应该为同样的功能使用什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T02:36:10.917

最简单的解决方法是将调用替换为`erasure`调用`runtimeClass`. 如果您使用 运行`-deprecation`，编译器实际上会给出该建议：

```
warning: method erasure in trait ClassManifestDeprecatedApis is deprecated: Use runtimeClass instead 
```

或者，您可以使用类标签：

```
def get[T](implicit tag : reflect.ClassTag[T] ) = {
  LoggerFactory.getLogger( tag.runtimeClass.getName )
} 
```

这种替代方案比使用`Manifest`. `Manifest`将在 2.10.something 或不久之后弃用。[有关详细信息，请参阅本文档](http://docs.scala-lang.org/overviews/reflection/typetags-manifests.html)的“类型标签和清单”部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-19T03:48:24.180

如果像我一样，您只对避免弃用警告感兴趣，那么您也可以使用**manifest.runtimeClass.getName**（而不是 manifest.erasure.getName）。

IE：

```
def classOp[T](implicit manifest: Manifest[T]) {
  println("Class: " + manifest.runtimeClass.getName)
} 
```

我还发现了另一种我不完全理解的技术，可能有用也可能没用......

```
def classOp[T <: Any : Manifest] {
  println("Class: " + manifest[T].runtimeClass.getName)
} 
```

# git - 删除 Git Repository 上无法拉取到 PC 的目录

> ID：15490494
> 
> 赞同：3
> 
> 时间：2013-03-19T02:23:22.107
> 
> 标签：git, github

在 Mac 上工作时，我的 IDE 生成了一个包含`:`（冒号）字符的目录，该目录被推送到了 git 存储库。当我后来切换到我的电脑上工作时，我发现我无法拉目录，收到一个`fatal: cannot create directory at... invalid argument`错误。

**如何删除或重命名不可拉取的目录？**

我使用的是 GitHub.com，所以使用网站界面的解决方案也是可以接受的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T05:14:28.033

您需要记住这`git pull`实际上是一个两步过程。首先它用于`fetch`检索远程文件。然后它将尝试`fast-forward` `merge`直接在您的工作之上应用更改。

所以`fetch`在遥控器上使用。这将确保您在 git 存储库中设置了远程更改。我会说从 git repo 运行以下命令：

```
ls | xargs -I'{}' git checkout -- '{}' 
```

但是你说你在一个 Windows 机器上，所以你可能只需要循环并手动完成。这也假设在您的存储库的根目录中没有创建新文件。

现在，如果您真的想恢复目录的创建，请执行以下操作（假设远程为`origin`，分支为`master`）。

```
git update-ref refs/heads/master $(git rev-parse origin/master)
git add --all .
# amend the commit to remove the folder from history
# only do this if you can rebase the remote w/o repercussion
git commit --amend
# otherwise just add a new commit on top of the old
git commit 
```

现在查看日志以查看是否一切正常，如果正常，则向上推送到遥控器（如果您使用过`--amend`，则必须强制推送）。

# c - 使用 C 将字符串中的每个其他字母字符更改为大写

> ID：15490496
> 
> 赞同：0
> 
> 时间：2013-03-19T02:23:43.823
> 
> 标签：c, for-loop, toupper

有人会用我编写的以下代码引导我朝着正确的方向前进。基本上我试图让字符串中的所有其他字符都以大写字母打印，同时不考虑空格或其他非字母字符。

例如： string input = "thanks for the add" 应打印为 "ThAnKs ForR tHe AddD"

```
int main (void) 
{
    char* input = GetString();
    if (input == NULL)
        return 1;
    for (int i = 0, x = strlen(input); i < x; i+=2)
        input [i] = toupper(input[i]);
    printf("%s\n", input);
    return 0;
} 
```

注意：我是计算机科学的新手，目前正在通过 edx.org 学习 CS50x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:33:44.850

只是`isalpha`用来忽略其他类型的字符：

```
#include <string.h>
#include <stdio.h>
#include <ctype.h>
int main (void) 
{
    char input[] = "thanks for the add";
    int  alpha_count = 0;
    for (int i = 0, x = strlen(input); i < x; i++) {
      if (isalpha(input[i])) {
        if (alpha_count++ % 2 == 0 ) 
          input [i] = toupper(input[i]);
      }   
    }   
    printf("%s\n", input);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-12-13T22:26:54.017

```
#include <iostream>
using namespace std;

int main()
{
    char st[] = "thanks for the add";
    for(int i=0; i<strlen(st); i++)
        st[i++]=toupper(st[i]);
    cout<<st<<endl;
} 
```

# c++ - 编译时填充数组以外的数据结构？

> ID：15490498
> 
> 赞同：17
> 
> 时间：2013-03-19T02:24:14.557
> 
> 标签：c++, c++11, compile-time

在 C++ 中，您可以这样做：

```
static const char * [4] = {
   "One fish",
   "Two fish",
   "Red fish",
   "Blue fish"
}; 
```

...这为您提供了一个很好的只读数组数据结构，它在运行时不需要任何 CPU 周期来初始化，因为所有数据都已为您布局（在可执行文件的只读内存页面中）编译器。

但是如果我宁愿使用不同的数据结构而不是数组呢？例如，如果我希望我的数据结构能够通过键快速查找，我必须执行以下操作：

```
static std::map<int, const char *> map;

int main(int, char **)
{
   map.insert(555, "One fish");
   map.insert(666, "Two fish");
   map.insert(451, "Red fish");
   map.insert(626, "Blue fish");

   [... rest of program here...]
} 
```

...由于地图数据结构在运行时被填充，这不太优雅且效率较低，即使所有必要的数据在编译时都是已知的，因此（理论上）可以完成这项工作。

我的问题是，在 C++（或 C++11）中有什么方法可以创建一个只读数据结构（例如地图），其数据完全在编译时设置，因此预先填充并准备好在运行时，数组的方式可以是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T02:26:53.557

如果您想要地图（或集合），请考虑使用[存储为数组的二叉树](http://en.wikipedia.org/wiki/Binary_tree#Arrays)。您可以在调试版本中断言它在运行时已正确排序，但在优化版本中，您可以假设一切都已正确安排，然后可以执行与 std::map 中相同的二进制搜索操作，但使用底层storage 是一个数组。只需编写一个小程序来为您堆积数据，然后再将其粘贴到您的程序中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T04:16:13.147

不容易，不。如果您尝试使用 来执行您的第一个示例`malloc`，显然它在编译时不起作用。由于每个标准容器都使用`new`（好吧，`std::allocator<T>::allocate()`但我们暂时假设它是`new`），我们不能在编译时这样做。

话虽如此，这取决于您愿意经历多少痛苦，以及您想推迟多少编译时间。您当然不能仅使用标准库功能来做到这一点。`boost::mpl`另一方面使用...

```
#include <iostream>

#include "boost/mpl/map.hpp"
#include "boost/mpl/for_each.hpp"
#include "boost/mpl/string.hpp"
#include "boost/mpl/front.hpp"
#include "boost/mpl/has_key.hpp"

using namespace boost::mpl;

int main()
{
    typedef string<'One ', 'fish'> strone;
    typedef string<'Two ', 'fish'> strtwo;
    typedef string<'Red ', 'fish'> strthree;
    typedef string<'Blue', 'fish'> strfour;

    typedef map<pair<int_<555>, strone>,
        pair<int_<666>, strtwo>,
        pair<int_<451>, strthree>,
        pair<int_<626>, strfour>> m;

    std::cout << c_str<second<front<m>::type>::type>::value << "\n";
    std::cout << has_key<m, int_<666>>::type::value << "\n";
    std::cout << has_key<m, int_<111>>::type::value << "\n";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T10:01:26.193

值得一提的是，您的问题源于您使用 map 的事实。地图经常被过度使用。地图的替代解决方案是排序的向量/数组。地图仅在用于存储长度未知的数据时或（并且仅在有时）数据频繁更改时才变得比地图“更好”。

函数 std::sort, std::lower_bound/std::upper_bound 是您所需要的。如果您可以自己对数据进行排序，则只需要一个函数，lower_bound，并且数据可以是const。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T02:27:50.913

是的，C++11 允许大括号初始值设定项：

```
std::map<int, const char *> map = {
  { 555, "One fish" },
  { 666, "Two fish" },
  // etc
}; 
```

# c# - 如何使用 linq 从类中的类列表中获取值

> ID：15490500
> 
> 赞同：0
> 
> 时间：2013-03-19T02:24:20.313
> 
> 标签：c#, linq

我想访问类内列表中的类成员值。我的课是这样的。该类`SureViewEvents`包含传入警报的父级详细信息，并且`SureViewEventDetails`是警报的详细信息值。我想`SureViewEvents`使用 LINQ 遍历类并遍历详细信息行（如果已填充）。

我该怎么做呢？

```
public class SureViewEvents
{
    public string EventId { get; set; }
    public string GroupId { get; set; }
    public string DateTimeCreated { get; set; }
    public string GroupTitle { get; set; }
    public string EventTitle { get; set; }
    public string SubscriberId { get; set; }
    public bool Closed { get; set; }

    public List<SureViewEventDetails> Details { get; set; }
}

//EventID|EventRecordID|CreatedDate|EventRecordTypeID|Details|Input1|Input2|EventCode|SubscriberID|EventTitle|SerialNo
public class SureViewEventDetails
{
    public string EventId { get; set; }
    public string EventRecordID { get; set; }
    public string CreateDate { get; set; }
    public string EventRecordTypeID { get; set; }
    public string Details { get; set; }
    public string Area { get; set; }
    public string Zone { get; set; }
    public string EventCode { get; set; }
    public string SubscriberID { get; set; }
    public string EventTitle { get; set; }
    public int SerialNo { get; set; }
    public bool Handled { get; set; }
} 
```

我可以使用以下方法检索父级值，但我不确定如何访问已使用此结构填充的详细信息。任何建议表示赞赏！

```
var activeEvents = (from sve in m_sureViewEvents 
                    select sve).ToList();

lock (m_driverLock)
{
    foreach (var activeEvent in activeEvents)
    {
        if (activeEvent.Closed == false)
        {
            m_fepConnector.HandleAlarms();
            DownloadZipArchive(activeEvent.EventId);
            CloseSureViewEvent(activeEvent.EventId);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T02:47:05.417

您可以选择所有详细信息[`SelectMany`](http://msdn.microsoft.com/en-us/library/bb534336.aspx)：

```
foreach (var details in activeEvents.SelectMany(e => e.Details))
{
    // ... Stuff
} 
```

这将得到`SureViewEventDetails`所有`activeEvents`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T02:39:01.757

在每个 activeEvent 的循环中，您可以简单地循环查看详细信息：

```
foreach (var activeEvent in activeEvents)
{
    foreach (var eventDetail in activeEvent.Details)
    {
        // do something with the detail
    }
} 
```

# java - Java Swing JOptionPane Yes 和 No Button 设置 Nimbus LookandFeel 后字体大小不同

> ID：15490501
> 
> 赞同：5
> 
> 时间：2013-03-19T02:24:22.790
> 
> 标签：java, swing, look-and-feel, joptionpane, nimbus

**由于默认LookAndFeel**中的字体太小，我使用了几行代码将其设置为**Nimbus**，并且我的**JOptionPane**显示大小不同的*Yes*和*No*按钮。 *Yes*仍然很小，而*No*设置为我指定的大小。任何人都知道为什么或如何解决它？

```
public static void setUIFont(Font a){
    FontUIResource ax=new FontUIResource(a);
    javax.swing.UIManager.put("OptionPane.messageFont", ax);
    javax.swing.UIManager.put("OptionPane.buttonFont", ax);
    javax.swing.UIManager.put("OptionPane.Font", ax);
    javax.swing.UIManager.put("InternalFrame.titleFont", ax);
    javax.swing.UIManager.put("TextField.font", ax);
    javax.swing.UIManager.put("ComboBox.font", ax);
} 
```

...

```
UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel"); 

class UseNimBus extends SwingInvoker{
    public void run(){
        JDialog.setDefaultLookAndFeelDecorated(true);
        setUIFont(new FontUIResource(new Font(ufont, Font.PLAIN, 20)));
    }
}
(new UseNimBus()).execute();// just invokeLater() 
```

以下行显示了选项窗格，但它具有不同大小的*Yes*和*No。*这是正常的还是只是我的问题？

```
inputValuex=JOptionPane.showConfirmDialog(
    myWin, "Are you exiting?", "You clicked X", JOptionPane.YES_NO_OPTION); 
```

# **更新**

还是行不通。我尝试使用代码

`javax.swing.UIManager.put("OptionPane.isYesLast", true);`

更改“*是”*按钮的位置，但没有任何效果。我只是想看看如何设置这些值，例如布尔值。

另外，我什至列出了所有`UIManager.getDefaults()`包含*optionpane*或*button*的键，它们的字体大小都设置为 20。*Yes*按钮仍然是较小的字体。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T11:12:38.467

看起来没有为 optionPane 中创建的第一个按钮采用自定义字体的原因是它被设置为 rootPane 的 defaultButton。因此，它有一个特殊状态 [Default] 用于查找属性 - 如果按钮的设置字体是 UIResource 类型。

所以会发生什么

*   OptionPaneUI 将其创建的所有按钮的字体设置为它在 UIManager 中为“OptionPane.buttonFont”找到的字体
*   SynthButtonUI 忽略状态 [Default] 的按钮字体，因为它是 UIResource

出于某种我不知道的原因（但请记住，在 Nimbus 中，命名/子组件的查找被破坏了），下面的设置都没有任何效果

```
UIManager.put("\"OptionPane.button\"[Default].font", ax);
UIManager.put("OptionPane:\"OptionPane.button\"[Default].font", ax); 
```

此外，第二个按钮的自定义字体在将其设置为 UIResource 时会在翻转/聚焦时丢失。一种解决方法是*不*将其设置为 UIResource，即

```
public static void setUIFont(Font a){
    // force usage of the button's font as set by optionPaneUI
    // by _not_ making it a uiResource
    UIManager.put("OptionPane.buttonFont", a);
    // use uiResource for others
    FontUIResource ax=new FontUIResource(a);
    UIManager.put("OptionPane.messageFont", ax);
    ...
} 
```

通常，不是最好的想法。但是我们可能会在这里侥幸成功，因为按钮是在每次调用 JOptionPane.create 时创建的，对单个实例没有持久影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T02:30:26.130

的字体`JButton`实际上来自`Button.font`属性。

如果我将此添加到您的属性列表中，它会起作用。

```
javax.swing.UIManager.put("Button.font", ax); 
```

为什么你会得到两种不同的尺寸，虽然很有趣，但此刻我无法理解。

# macos - 无法 $heroku 登录，身份验证总是失败，我确信我有正确的凭据

> ID：15490502
> 
> 赞同：0
> 
> 时间：2013-03-19T02:24:31.037
> 
> 标签：macos, bash, heroku

每次我尝试使用 heroku CLI 登录、添加密钥等时...它都说身份验证失败。它让我发疯！

有没有人有这个问题的解决方案，或者关于如何完全重置与heroku有关的所有内容的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:08:58.223

没关系！显然他们有问题，他们正在努力解决它。

=== Heroku 状态开发：黄色生产：目前没有已知问题。

=== 通过 CLI/Toolbelt 登录失败 2013/03/19 02:44:29 (~ 24m+) 2013/03/19 02:44:29 (~ 24m 前) 命令行 Toolbelt 客户端出现间歇性登录失败 (即，`heroku login`)。工程师正在调查。

凸轮：〜凸轮$

# c# - 实体框架如何通过掩码生成 PrimaryKey

> ID：15490503
> 
> 赞同：0
> 
> 时间：2013-03-19T02:24:33.160
> 
> 标签：c#, entity-framework, ef-code-first

我需要通过掩码生成主键（例如：）`BS{100-999}-{Rand(100-999)}`但我不知道如何在 EF 代码中生成这样的键/有人可以帮我解决这个问题吗？

我的模型：

```
[Table("Tickets")]
public class Ticket
{
    public Ticket()
    {
        CreationDate = DateTime.UtcNow;
        LastChangeDate = DateTime.UtcNow;
        UserReviewed = true;
        EmailAlert = true;
    }
    [Key]
    [DatabaseGenerated(System.ComponentModel.DataAnnotations.Schema.DatabaseGeneratedOption.Identity)]
    public Guid Id { get; set; } //now it is Guid But i need this to be string and generated by the above mask
    public string UsersName { get; set; }
    public string Theme { get; set; }
    public string Request { get; set; }
    public DateTime CreationDate { get; set; }
    public string TypeMask { get; set; }
    public string StatusMask { get; set; }
    public int SenderId { get; set; }
    public bool EmailAlert { get; set; }
    public DateTime LastChangeDate { get; set; }
    public bool UserReviewed { get; set; }
    public virtual ICollection<TicketRecord> Answers { get; set; }
    [ForeignKey("StatusMask")]
    public virtual TicketStatus Status { get; set; }
    [ForeignKey("TypeMask")]
    public virtual TicketType Type { get; set; }
    [ForeignKey("SenderId")]
    public virtual UserProfile Sender { get; set; }
    public virtual AttachmentsCollection IncludedFiles { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:06:15.400

EF 从不生成密钥。您需要自己生成密钥，或者让 EF 知道密钥将由数据库使用 StoreGeneragedPattern 注释/设置生成。EF 无法生成密钥，因为它不能保证生成值的唯一性。

# ember.js - 在我的 Handlebars 模板的 #each 循环中使用 #if 会导致浏览器页面崩溃

> ID：15490505
> 
> 赞同：1
> 
> 时间：2013-03-19T02:24:44.407
> 
> 标签：ember.js, handlebars.js

这是非常基本的，但我花了几个小时试图弄清楚为什么我似乎无法在我的模板的#each 循环中使用 Handlebars 的内置 #if 帮助程序。第二次我插入对 {{#if}} 的引用，Chrome（或 Safari）崩溃，控制台报告：

```
Uncaught RangeError: Maximum call stack size exceeded
meta
targetSetFor 
sendEvent
Ember.Evented.Ember.Mixin.create.trigger
Ember.CoreView.Ember.Object.extend.trigger
newFunc
(anonymous function)
Ember.View.Ember.CoreView.extend.invokeRecursively
newFunc 
```

（重复多次）

为什么这会导致我在 Ember 中出现递归错误？

```
<div id="gridChannelListDiv" tabindex="0">
{{#each item in content}}
    {{#if item.hilight}}
        <div class="gridCellHilight">
            ...
        </div>
    {{else}}
        <div class="gridCell">
            ...
        </div>
    {{/if}}
{{/each}}
</div> 
```

即使 {{#if}} 语句什么都不做，也会发生这种情况。

```
<div id="gridChannelListDiv" tabindex="0">
{{#each item in content}}
    {{#if}}{{/if}}   // this line will cause instant "oh snap" crash

    <div class="gridCell">
        {{item.name}}
    </div>
{{/each}}
</div> 
```

关联的 ArrayController 在“内容”中包含 5 个 Ember 对象的简单列表，并且模板可以正常工作，直到我插入 #if。莫名其妙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:28:22.437

您的代码似乎没有任何问题。可能是您的 ember 版本中的错误，或者可能是支持库（handlebars/jQuery）的不兼容版本。要么是这样，要么是在你的应用程序的其他方面发生了一些疯狂的事情。

我创建了一个简单的应用程序/控制器并使用它来让您的模板代码在此处启动并运行：http: [//jsbin.com/ekemak/2/edit](http://jsbin.com/ekemak/2/edit) - 在 chrome 和 safari 中都试过，在这两种情况下应用程序都没有 js 错误.

```
//app.js
App = Ember.Application.create({});
App.IndexRoute = Ember.Route.extend({
  setupController: function(controller) {
    controller.set('content', [
      Em.Object.create({name: 'aaa', hilight: false}),
      Em.Object.create({name: 'BBB', hilight: true}),
      Em.Object.create({name: 'ccc', hilight: false})
    ]);
  }
});

//index.hbs
<ul>
{{#each item in content}}
  {{#if item.hilight}}
    <div class="gridCellHilight">
        <B>{{item.name}}</B>
    </div>
  {{else}}
    <div class="gridCell">
        {{item.name}}
    </div>
  {{/if}}
{{/each}}   
</ul> 
```

# android - 启动错误无法安装

> ID：15490508
> 
> 赞同：0
> 
> 时间：2013-03-19T02:25:21.077
> 
> 标签：android

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.bpi.mygears"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.bpi.gears.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
      <activity
        android:name="com.bpi.gears.home"
        android:label="@string/title_activity_home" >
    </activity>
     <activity
        android:name="com.bpi.gears.profile"
        android:label="@string/title_activity_profile" >
    </activity>
</application>

</manifest> 
```

这是我的清单，请随时检查并告诉我哪里错了，如果您需要查看我可以向您展示的所有内容，我会提供很多帮助我的所有项目都没有错误，所以我很难找到我错的地方...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:52:46.350

我认为你的命名有一些问题。您的包名称是“com.bpi.mygears”，您正在寻找的活动是 com.bpi.gears。您的活动只能相对于包命名。它可能应该更像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.bpi.mygears"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
      <activity
        android:name=".home"
        android:label="@string/title_activity_home" >
    </activity>
     <activity
        android:name=".profile"
        android:label="@string/title_activity_profile" >
    </activity>
</application>

</manifest> 
```

假设你的东西在 com.bpi.mygears 中。否则， `package="com.bpi.gears"`如果你的东西正在运转，那就做第一条线。

# youtube-api - YouTube 产品信息中心是否已停止更新？

> ID：15490509
> 
> 赞同：0
> 
> 时间：2013-03-19T02:25:26.893
> 
> 标签：youtube-api

多年来，我一直使用[YouTube 产品仪表板](https://code.google.com/apis/youtube/dashboard)查看我们应用的统计信息，但它似乎从 2013 年 1 月 16 日起就停止了更新。我们使用[的是 YouTube API 的第 2 版](https://developers.google.com/youtube/2.0/developers_guide_protocol)。

有没有其他人注意到这一点？或者任何人都可以阐明发生了什么？

我仪表板的屏幕截图：http: [//i.imgur.com/tRUgf6l.png](http://i.imgur.com/tRUgf6l.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:06:01.707

此刻它似乎被打破了。我已经让负责的团队知道了。

（根据[这篇博](http://apiblog.youtube.com/2012/09/the-youtube-api-on-stack-overflow.html)文，使用 API 报告中断和错误的更好地方是问题跟踪器，而不是 Stack Overflow。）

# php - 错误号：1054 'on 子句'中的未知列'Father.id_grandfather'

> ID：15490510
> 
> 赞同：-1
> 
> 时间：2013-03-19T02:25:27.047
> 
> 标签：php, mysql, codeigniter

我有一些表格如下：

```
Grandfather(id_grandfather, nameGrandfather,birthdate) 
Father(id_father, nameFather, id_grandfather, birthdate) 
Son(id_son, nameSon, id_father, birthdate) 
```

我想选择所有数据儿子，父亲和祖父，如下图所示：

```
Son1    Father 1    grandfather1 
Son2    Father 1    grandfather1
Son3    Father 2    grandfather1 
Son4    Father 3    grandfather2
Son5    Father 4    grandfather2 
```

因此创建了模型（mfamily.php），如下所示：

```
Class Mfamily extends CI_Model{ 
    function joinFamily(){
        $this->db->select('Son.id_son, Son.nameSon, Son.id_father, Father.id_father, Father.nameFather,Father.id_grandfather,Grandfather.id_grandfather,Grandfather.nameGrandFather'); 
        $this->db->from('Son', 'Father', 'Grandfather');
        $this->db->join('Grandfather', 'GrandFather.id_country = province.id_country');     
        $this->db->join('province','province.id_country = city.id_city');

        return $this->db->get();    
    } 
 } 
```

在控制器 cfamily.php

```
Class Cfamily extends CI_Controller{    
    $this->load->model(‘Mfamily’);
    $data[‘family’]=$this->Mfamily-> joinFamily();
    $this->load->view(‘vFamily’,$data); 
} 
```

我的观点 vFamily.php

```
<html>
<body>              
    </tr>
    <?php if($family){ ?><?php
        foreach ($family as $row) { ?> 
        <tr>
            <td><?php echo $row->Son.nameSon?></td> 
            <td><?php echo $row->Father.nameFather?></td>
            <td><?php echo $row->Grandfather.nameGrandfather?></td>
        </tr> 
        <?php }?> 
    <?php }else{ ?> 
        <tr>
            <td colspan="3" align="center">Empty</td>
        </tr> 
    <?php } ?> 
</body> 
</html> 
```

当我编译这个源代码时，我收到如下消息错误：

```
Error Number: 1054 Unknown column 'Father.id_grandfather' in 'on clause' 
Filename: C:\xampp\htdocs\family\system\database\DB_driver.php
Line Number: 330 
```

我的代码发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:48:49.583

你忘记关闭了 `$this->db->select();`。自行检查。

```
$this->db->select('Son.id_son, Son.nameSon, Son.id_father, Father.id_father, Father.nameFather,Father.id_grandfather,Grandfather.id_grandfather,Grandfather.nameGrandFathe);
$this->db->from(Son, 'Father, 'Grandfather'); 
```

# jquery - 如何实现这个模板的“响应性”？

> ID：15490513
> 
> 赞同：0
> 
> 时间：2013-03-19T02:25:47.037
> 
> 标签：jquery, html, css, web-applications, responsive-design

我在看这个模板：

[http://www.meanthemes.com/theme/daily/photo/](http://www.meanthemes.com/theme/daily/photo/)

我的网站上会有与此类似的图块，但是我不确定如何开始根据窗口的大小移动图块。我目前正在使用 MeanMenu ( [http://www.meanthemes.com/plugins/meanmenu/](http://www.meanthemes.com/plugins/meanmenu/) )，这对于菜单项来说非常棒，但我不知道如何处理正文。超级新的 HTML/CSS/JQuery - 任何指针都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:16:37.133

好吧，大多数现代“响应式”网站都使用 CSS 媒体查询来实现它，甚至是您链接到的网站，如果您查看 CSS，您可以看到这一行（以及许多其他行）：

```
/* This will define the style you want when the screen's Minimum width is 1024px */
@media screen and (min-width: 1024px) {
 /* style here */
}

@media screen and (max-width: 860px) {
 /* style here */
} 
```

这些媒体查询应该可以在大多数现代浏览器中使用，对于那些不支持它的浏览器，您可以参考[这个 js](https://code.google.com/p/css3-mediaqueries-js/)来启用它。

有关媒体查询的更多信息，您可以尝试本[教程](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:30:56.943

操作，

[Twitter Bootstrap](http://twitter.github.com/bootstrap/)可能是您正在寻找的。

### Bootstrap 可以很好地处理响应式 UI。

**Fluid Grid System**文档有更多信息和示例，但这里是概述：

> 流体网格系统使用百分比而不是像素来表示列宽。它具有与我们的固定网格系统相同的响应能力，确保关键屏幕分辨率和设备的适当比例。- 通过[引导文档](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

### 用户界面/导航栏

除了响应式设计，Bootstrap 还附带了一堆常见的 ui 元素/插件。和 MeanMenu 一样（诚然，我对此一无所知），Bootstrap 也有[导航栏](http://twitter.github.com/bootstrap/components.html#navbar)。

### Plunker，协作在线编辑。

最后，由于您刚刚开始，[Plunker](http://plnkr.co/)是用于原型设计和样板的绝佳工具。这对于与 SO 社区共享代码问题/答案特别有帮助。

我整理了一个[Plunk > http://plnkr.co/edit/LF6BCCDam2w67aUwOSaq](http://plnkr.co/edit/LF6BCCDam2w67aUwOSaq)，其中包括 Bootstrap 以及响应式图像网格和导航栏的示例。

希望有帮助。祝你好运！

# cocoa - NSButton 去除文字阴影

> ID：15490517
> 
> 赞同：2
> 
> 时间：2013-03-19T02:25:55.843
> 
> 标签：cocoa, text, colors, shadow, nsbutton

我使用具有自定义背景的标准 NSButton。黑色标题颜色有白色阴影 - 我怎样才能删除它？

图片：http: [//i.piccy.info/i7/f4ae52b56aad922f0129e4b6bd8688da/4-57-36/57765457/Snymok_ekrana_2013_03_19_v_04_13_58.png](http://i.piccy.info/i7/f4ae52b56aad922f0129e4b6bd8688da/4-57-36/57765457/Snymok_ekrana_2013_03_19_v_04_13_58.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:17:42.827

解决了！

NSAttributedString 文档说 NSShadowAttributeName 的默认值为 nil，但在这种情况下，按钮标题是用白色阴影绘制的。透明阴影解决的问题：

```
NSShadow *shadow = [[NSShadow alloc] init];
[shadow setShadowColor:[NSColor colorWithDeviceWhite:1.0 alpha:0.0]];

NSDictionary *attrsDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                 shadow, NSShadowAttributeName, nil];

NSAttributedString *attrString = [[NSAttributedString alloc] initWithString:_customTitle attributes:attrsDictionary];

[mybutton setAttributedTitle:attrString]; 
```

# windows - 在 Windows 中执行 exe 文件

> ID：15490524
> 
> 赞同：0
> 
> 时间：2013-03-19T02:27:19.180
> 
> 标签：windows, certificate

当我在 windows7 中双击执行一个 EXE 文件时，会弹出警告消息，告知该程序没有证书并且可能很危险。

但是，如果我用我的编译器（VC、C# 等等）编译一些源代码并执行编译后的二进制文件，Windows 永远不会问我文件是否有证书。

为什么会发生这种情况？我从来没有签署我的exefile。Windows 如何判断我编译的 exe 是安全的，但其他下载的二进制文件不安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:54:14.550

Windows 以某种方式跟踪您从 Internet 下载的文件的来源。在第一次运行时，它会通过消息提醒您。

作为解决方案，您可以转到文件属性（右键单击文件并选择`Properties`）并禁用检查：

![在此处输入图像描述](../Images/b91ac04459c24558d1551e10e823e078.png)

# spring - 多种形式的Spring验证

> ID：15490533
> 
> 赞同：1
> 
> 时间：2013-03-19T02:28:45.110
> 
> 标签：spring, spring-mvc, validation

我们可以在一个 jsp 中但以 2 种不同的形式显示错误消息吗？我正在使用 spring 验证来验证我的 bean。它工作正常，但是如果绑定结果中有错误，那么我可以在表单中显示错误消息动作被执行，但不是以其他结果形式。

是 spring 验证中的错误标记映射到调用该操作的 jsp 表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:59:23.440

您的 BindingResults 只是一个对象，您可以将其放入模型中并在页面上随意使用。如果您打算在单独的表单上使用它，您可能需要将其放入 Session 中。

# xml - 数据库结果的 XSL 转换为 XML

> ID：15490536
> 
> 赞同：1
> 
> 时间：2013-03-19T02:29:07.643
> 
> 标签：xml, database, xslt, transformation

我收到了来自 DB 查询结果的 XML 格式，需要应用 XSL 将 XML 转换为 HTML 表格格式。我是 XSLT 的新手，经过大量搜索，我似乎找不到与我的 XML 格式匹配的好示例。

我的 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<B1j:jdbcQueryResult xmlns:B1j="http://ns.b1tech.com/2012/08/jdbc-query-result">
   <B1j:row>
      <B1j:col name="response_size" type="java.lang.Integer">128837</B1j:col>
      <B1j:col name="groupname" type="java.lang.String">AAA</B1j:col>
      <B1j:col name="count_total" type="java.lang.Integer">1</B1j:col>
      <B1j:col name="count_error" type="java.lang.Integer">0</B1j:col>
      <B1j:col name="timestamp" type="java.lang.Long">1363654726298</B1j:col>
      <B1j:col name="count_success" type="java.lang.Integer">1</B1j:col>
   </B1j:row>
   <B1j:row>
      <B1j:col name="response_size" type="java.lang.Integer">128837</B1j:col>
      <B1j:col name="groupname" type="java.lang.String">BBB</B1j:col>
      <B1j:col name="count_total" type="java.lang.Integer">1</B1j:col>
      <B1j:col name="count_error" type="java.lang.Integer">0</B1j:col>
      <B1j:col name="timestamp" type="java.lang.Long">1363654757598</B1j:col>
      <B1j:col name="count_success" type="java.lang.Integer">1</B1j:col>
   </B1j:row>
</B1j:jdbcQueryResult> 
```

任何人都可以帮助我了解我的 XSLT 模板应该是什么样子，以从这个 XML 中精确列名和值并将其放入基本的 HTML 表中？

提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:54:27.000

这个怎么样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:B1j="http://ns.b1tech.com/2012/08/jdbc-query-result"
                exclude-result-prefixes="B1j"
                >
  <xsl:output method="html" omit-xml-declaration="yes" />

  <xsl:template match="/*[B1j:row]">
    <table>
      <tr>
        <xsl:apply-templates select="B1j:row[1]/B1j:col" mode="header" />
      </tr>

      <xsl:apply-templates select="B1j:row" />
    </table>
  </xsl:template>

  <xsl:template match="B1j:col" mode="header">
    <th>
      <xsl:value-of select="@name"/>
    </th>
  </xsl:template>

  <xsl:template match="B1j:row">
    <tr>
      <xsl:apply-templates select="B1j:col" />
    </tr>
  </xsl:template>

  <xsl:template match="B1j:col">
    <td>
      <xsl:apply-templates />
    </td>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<table>
  <tr>
    <th>response_size</th>
    <th>groupname</th>
    <th>count_total</th>
    <th>count_error</th>
    <th>timestamp</th>
    <th>count_success</th>
  </tr>
  <tr>
    <td>128837</td>
    <td>AAA</td>
    <td>1</td>
    <td>0</td>
    <td>1363654726298</td>
    <td>1</td>
  </tr>
  <tr>
    <td>128837</td>
    <td>BBB</td>
    <td>1</td>
    <td>0</td>
    <td>1363654757598</td>
    <td>1</td>
  </tr>
</table> 
```

# javascript - Javascript 在 1.5 中有效，但在 joomla 2.5 中无效

> ID：15490540
> 
> 赞同：1
> 
> 时间：2013-03-19T02:29:40.083
> 
> 标签：javascript, joomla, joomla2.5, joomla1.5

下面的 javascript 和函数在 joomla 1.5 中完美无缺，但似乎在 2.5 中不起作用 - 任何假期.. 它是一个资格计算器

似乎验证在提交表单时不起作用 - 验证没有在 2.5、php 5.3 中执行

```
 <td><input name="calc" type="button"  class="red-btn" onClick="javascript:return(validate())" style="width:65" value="Calculate Eligibility" /> 
   <input type="reset" name="reset" value="Reset"  class="red-btn" /></td> 
```

我无法点击提交，即使我点击没有任何反应

下面是调用的脚本

```
 function validate()

 {
var income,Coapplnincome,vOtherLonAmt,deduct,IntRate,LoanTenure;
var totInterest,totemi,ElgibleLon;
if(!document.eligib_calc.income.value)
 {
        alert("Please enter Applicants gross monthy income");
    document.eligib_calc.income.focus();
     return false;           
}
   if(isNaN(document.eligib_calc.income.value))
{   alert("Please Enter Numeric value for Income");
    document.eligib_calc.income.focus();
     return false;           
}
if(!document.eligib_calc.Coapplnincome.value)
    document.eligib_calc.Coapplnincome.value=0;
else if(isNaN(document.eligib_calc.Coapplnincome.value))
{   alert("Please Enter Numeric value for Co applicant Income");
    document.eligib_calc.Coapplnincome.focus();
     return false;           
}
if(!document.eligib_calc.OtherLonAmt.value)
    document.eligib_calc.OtherLonAmt.value=0;
else if(isNaN(document.eligib_calc.OtherLonAmt.value))
{   alert("Please Enter Numeric value for other loans"); 
    document.eligib_calc.OtherLonAmt.focus();
    return false;           

}

if(!document.eligib_calc.deduct.value)

    document.eligib_calc.deduct.value=0;

else if(isNaN(document.eligib_calc.deduct.value))

{   alert("Please Enter Numeric value for Deductions");

    document.eligib_calc.deduct.focus();

    return false;           

}

if(!document.eligib_calc.IntRate.value)

{

    alert("Please enter Interest Rate(in %)");

    document.eligib_calc.IntRate.focus();

    return false;           

}

    if(isNaN(document.eligib_calc.IntRate.value))

{   alert("Please Enter Numeric value for Interest Rate(in %)");

    document.eligib_calc.IntRate.focus();

    return false;           

}

if(!document.eligib_calc.LoanTenure.value)

{

    alert("Please enter Loan Tenure");

    document.eligib_calc.LoanTenure.focus();

    return false;           

}

if(isNaN(document.eligib_calc.LoanTenure.value))

{   alert("Please Enter Numeric value for Loan Tenure");

    document.eligib_calc.LoanTenure.focus();

    return false;           

}

income=document.eligib_calc.income.value;

Coapplnincome=document.eligib_calc.Coapplnincome.value;

OtherLonAmt=document.eligib_calc.OtherLonAmt.value;

deduct=document.eligib_calc.deduct.value;

IntRate=document.eligib_calc.IntRate.value;

LoanTenure=document.eligib_calc.LoanTenure.value;

totInterest=(parseInt(income)+parseInt(Coapplnincome))-(parseInt(OtherLonAmt)+parseInt(deduct));

totemi=EMI(100000,document.eligib_calc.IntRate.value,document.eligib_calc.LoanTenure.value);

ElgibleLon=(totInterest*(0.4)/(totemi));

//document.eligib_calc.emi.value=Math.ceil(totemi)+" per Lakh";

ElgibleLon=ElgibleLon*100;

ElgibleLon=Math.round(ElgibleLon);

ElgibleLon=ElgibleLon/100;

document.eligib_calc.ElgibleLon.value=ElgibleLon+" Lakhs";      

       }

      function EMI(vAmt,IntRate,LoanTenure)

      {

var terms;

var numAmt,denAmt;

var emiv;

terms=12;

numAmt=vAmt*Math.pow((1+IntRate/(terms*100)),LoanTenure);

denAmt=100*terms*(Math.pow((1+IntRate/(terms*100)),LoanTenure)-1)/IntRate;

emiv=12*(numAmt/(denAmt*12));

emiv=Math.round(emiv);

return emiv;

      }
      </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T23:35:39.010

脚本将起作用。但是对于警报，您有两种方法

1) [http://docs.joomla.org/JDocument](http://docs.joomla.org/JDocument)
[http://docs.joomla.org/JDocument/addScriptDeclaration](http://docs.joomla.org/JDocument/addScriptDeclaration)
或
2) 使用 jquery 在标签中显示您的警报
hopfuly 帮助

例子：

```
function getJavaScript($message) {
$javascript .= 'if(window.addEventListener){ // Mozilla, Netscape, Firefox' . "\n";
$javascript .= '    window.addEventListener("load", function(){ alert("' . $message . '");}, false);' . "\n";
$javascript .= '} else { // IE' . "\n";
$javascript .= '    window.attachEvent("onload", function(){ alert("' . $message . '");});' . "\n";
    $javascript .= '}';
    return $javascript;
}

$doc =& JFactory::getDocument();
$doc->addScriptDeclaration( getJavaScript( 'This will appear in an alert box after the page loads.' ) ); 
```

# c# - 有没有办法防止查询字符串被篡改或查询字符串丢失？

> ID：15490548
> 
> 赞同：0
> 
> 时间：2013-03-19T02:30:47.550
> 
> 标签：c#, asp.net, .net

我不太确定这个问题，但有没有办法防止 ASP.NET 中的 QueryStrings 被篡改/丢失？

示例：我有这个网址

```
http://localhost:56842/TCKT/Configs.aspx?type=view 
```

从后面的代码中，我得到如下值：

```
Request.QueryString["type"]; 
```

我知道如何防止丢失值，但我需要找出是否有办法防止丢失 QueryString 含义

```
?type= 
```

一起失踪。

我见过人们在做

```
Request.QueryString["type"].IsEmpty() 
```

但这对我不起作用，我不确定这是否可能。您能提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:34:28.410

```
String.IsNullOrEmpty(Request.QueryString["type"]); 
```

[对于特定类型](https://stackoverflow.com/questions/349742/how-do-you-test-your-request-querystring-variables)有些相似

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:07:01.347

```
string type = Request.QueryString["type"] ?? "default" 
```

当值为空时获取值或默认值。

# jquery - 基于主选择器的 Jquery 隐藏/显示 optgroup

> ID：15490549
> 
> 赞同：0
> 
> 时间：2013-03-19T02:30:55.530
> 
> 标签：jquery, show-hide, multiple-select, optgroup

请参考这个[链接](http://jsfiddle.net/wnFXX/7/)，是一个多选框，可以根据在主活动中选择的内容来选择子活动，它现在工作得很好。

根据更改请求，我想在选择时**仅显示**子活动中的 optgroup 的操作，这意味着当您选择时`main-activity option 1 and 2`，`sub-activity`显示 optgroup for `1 and 2`，其余部分隐藏且不可见，请告知，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T03:07:38.837

您需要`hide()`在子活动中获取未选择的选项和它们。不要忘记显示选定的。

```
 //get not selected ones
 var arr1 = $('#filterActivity option:not(:selected)');

  //iterate and hide 
  $("#filterSubActivity").children("optgroup[label='" + arr1[j].value + "']").hide(); 
```

这是演示：http: [//jsfiddle.net/btevfik/q62PK/](http://jsfiddle.net/btevfik/q62PK/)

# c++ - 使用 mci 播放 MP3 发送字符串 c++

> ID：15490552
> 
> 赞同：2
> 
> 时间：2013-03-19T02:31:21.007
> 
> 标签：c++, visual-c++, clr, mci

我正在尝试在我正在做的一个项目中播放一些 mp3 文件作为我的背景音乐。我尝试使用 mcisendstring 播放它，但它无法正常工作:(

这些是我所做的：

```
CMP3_MCI myMp3;
std::string address= "C:\\Users\\music embed testing\\test.mp3";
myMp3.Load(address);
myMp3.Play(); 
```

//加载函数

```
void Load(string szFileName)
{
    m_szFileName = szFileName;
    Load2();
} 
```

//load2函数

```
void Load2()
{
      std::string szCommand = "open \"" + GetFileName() + "\" type mpegvideo alias " + GetFileName();       
       mciSendString(szCommand.c_str(), NULL, 0, 0);
} 
```

//播放函数

```
void Play()
{
    std::string szCommand = "play " + GetFileName() + " from 0";
    mciSendString(szCommand.c_str(), NULL, 0, 0);
} 
```

//getFileName 基本上返回存储为私有属性的 m_szFileName

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:02:14.413

经过多次尝试和错误，我终于找到了一种让它工作的方法。对于那些和我面临同样问题的人来说，这里是：

```
//if you are using unicode
LPCWSTR a = L"open cannon.mp3 type mpegvideo";
int error = 99;
error = mciSendString(a, NULL,0,0);
int error2;
LPCWSTR b = L"play cannon.mp3";
error2 = mciSendString(b, NULL, 0, 0);

//cannon.mp3 is stored in my resource file
//error is just for debugging

//if you are using multibyte

LPCSTR a = "open cannon.mp3 type mpegvideo";
mciSendString(a, NULL, 0,0);
LPCSTR b = "play cannon.mp3 repeat";
int error2 = mciSendString(b, NULL, 0, 0); 
```

# clojure - 如何让“lein repl”历史在 cygwin 中工作？

> ID：15490555
> 
> 赞同：3
> 
> 时间：2013-03-19T02:31:41.083
> 
> 标签：clojure, cygwin, leiningen

我在 Windows 7 和最新的 lein 上使用 Cygwin，但是当我在 repl 中时，向上和向下按会使我在 repl 控制台周围移动，而不是向我显示历史记录（这是我所期望的）。我搜索了一下，发现这与使用 jline 而不是 readline （无论这意味着什么）有关，但我不知道如何使用这些信息来解决我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T02:46:03.750

[我在这里找到了答案：](https://github.com/technomancy/leiningen/issues/850)

> 我修改了 lein 启动脚本来调用 stty 并设置 jline.terminal，它似乎工作：

```
stty -icanon min 1 -echo
$LEIN_JAVA_CMD \
    -client -XX:+TieredCompilation \
    -Djline.terminal=jline.UnixTerminal \
    $LEIN_JVM_OPTS \
    -Dfile.encoding=UTF-8 \
    -Dmaven.wagon.http.ssl.easy=false \
    -Dleiningen.original.pwd="$ORIGINAL_PWD" \
    -Dleiningen.trampoline-file="$TRAMPOLINE_FILE" \
    -cp "$CLASSPATH" \
    clojure.main -m leiningen.core.main "$@"
EXIT_CODE=$?
stty icanon echo 
```

我在 lein 脚本中修改了该部分，现在 up = history.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T10:00:09.720

您建议的另一种方法是安装`rlwrap`Cygwin 中可用的方法。这将为您提供任何交互式命令行应用程序的[Readline](http://en.wikipedia.org/wiki/GNU_readline)功能（例如命令历史搜索和导航）。如果您使用过 bash 一段时间，您就会知道这些功能是什么。

您需要将应用程序作为参数启动到 readline 包装器，但这可以使用别名或函数适当地隐藏起来：

```
rlwrap lein repl 
```

在您的建议上使用 rlwrap 的好处是，它可以将此功能添加到不仅仅是 repl 的特定情况。

# matlab - 如何对数据进行中位数中心化？

> ID：15490558
> 
> 赞同：0
> 
> 时间：2013-03-19T02:31:57.803
> 
> 标签：matlab, median

我有一个 1x600 的向量，我已经对它进行了 log2 转换，现在我希望居中。有人知道 Matlab 中的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T07:03:45.323

只需从数据值中减去中值即可。这是一个示例，如果您想对日志转换数据执行中位数中心化。

```
medianValue = median(logData);
medianCtrData = logData-medianValue; 
```

# c++ - 在没有免费的程序结束时双重免费或损坏

> ID：15490559
> 
> 赞同：-3
> 
> 时间：2013-03-19T02:32:42.357
> 
> 标签：c++, debugging, free, glibc

我的程序正在完成，甚至在返回 0 之前打印最终的“DONE2”；主要。我使用 malloc 进行动态内存分配，但我的程序中没有空闲内存。

为什么/如何在没有免费的情况下获得它，为什么我的程序仍在运行直到完成，我应该如何找到错误/s 的来源？

编辑：我只是问如何在没有免费的情况下获得错误以及程序如何到达执行结束。

```
*** glibc detected *** ./prog: double free or corruption (out): 0x09574040 ***
======= Backtrace: =========
/lib/libc.so.6[0x9ca595]
/lib/libc.so.6(cfree+0x59)[0x9ca9d9]
/usr/lib/libstdc++.so.6(_ZdlPv+0x21)[0x2e6c581]
./prog[0x804b2f9]
./prog[0x804b33b]
./prog[0x804b34f]
./prog[0x804b4d5]
./prog[0x804b4ec]
./prog[0x804bb6f]
./prog[0x8049d43]
./prog[0x8049d59]
./prog[0x8049d88]
./prog[0x8049da2]
./prog[0x8049de3]
./prog[0x8049e6f]
./prog[0x8049604]
/lib/libc.so.6(__libc_start_main+0xdc)[0x976e9c]
./prog(__gxx_personality_v0+0x79)[0x8049271]
======= Memory map: ========
002d4000-002d5000 r-xp 002d4000 00:00 0          [vdso]
0093e000-00958000 r-xp 00000000 fd:00 559505     /lib/ld-2.5.so
00958000-00959000 r-xp 00019000 fd:00 559505     /lib/ld-2.5.so
00959000-0095a000 rwxp 0001a000 fd:00 559505     /lib/ld-2.5.so
00961000-00aa0000 r-xp 00000000 fd:00 559506     /lib/libc-2.5.so
00aa0000-00aa2000 r-xp 0013f000 fd:00 559506     /lib/libc-2.5.so
00aa2000-00aa3000 rwxp 00141000 fd:00 559506     /lib/libc-2.5.so
00aa3000-00aa6000 rwxp 00aa3000 00:00 0 
00aa8000-00acd000 r-xp 00000000 fd:00 559513     /lib/libm-2.5.so
00acd000-00ace000 r-xp 00024000 fd:00 559513     /lib/libm-2.5.so
00ace000-00acf000 rwxp 00025000 fd:00 559513     /lib/libm-2.5.so
02dab000-02db6000 r-xp 00000000 fd:00 559517     /lib/libgcc_s-4.1.2-20080825.so.1
02db6000-02db7000 rwxp 0000a000 fd:00 559517     /lib/libgcc_s-4.1.2-20080825.so.1
02db9000-02e99000 r-xp 00000000 fd:00 79091      /usr/lib/libstdc++.so.6.0.8
02e99000-02e9d000 r-xp 000df000 fd:00 79091      /usr/lib/libstdc++.so.6.0.8
02e9d000-02e9e000 rwxp 000e3000 fd:00 79091      /usr/lib/libstdc++.so.6.0.8
02e9e000-02ea4000 rwxp 02e9e000 00:00 0 
08048000-0805c000 r-xp 00000000 fd:00 789714     /home/echelon/correngine/prog
0805c000-0805d000 rw-p 00013000 fd:00 789714     /home/echelon/correngine/prog
09553000-09594000 rw-p 09553000 00:00 0          [heap]
b7fa9000-b7fab000 rw-p b7fa9000 00:00 0 
b7fb4000-b7fb5000 rw-p b7fb4000 00:00 0 
bfbe9000-bfbfe000 rw-p bffea000 00:00 0          [stack]
DONE
DONE2
make: *** [run] Aborted 
```

编辑：谢谢，问题是我远远超出了缓冲区，导致“损坏”而不是双重释放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:43:27.463

> 我使用 malloc 进行动态内存分配，但我的程序中没有空闲内存

哇！停在这里！这是一个严重的问题——你的程序中的一个错误。当你有这个明显的错误时，弄清楚为什么*其他*事情不能正常工作并不是很重要。您需要*首先*`free`通过为每个必须调用的调用添加匹配调用来解决此问题`malloc`。只有完成此操作后，您才应该担心解决*其他*问题（如果它们仍然存在）！

> 为什么/如何在没有免费的情况下获得这个

几乎可以肯定，这是在报告与使用（或未使用）的`free`. 错误消息的重要部分实际上是*损坏*部分。

当您覆盖超过您要求使用的内存块时，通常会出现此错误`malloc`。例如，如果您打算分配一块内存来保存一个结构`Foo`，但您只为指向结构的*指针*`Foo`分配了空间，您将继续写入超出实际分配的空间量，从而破坏内存中的信息不属于你。glibc 正在检测内存中可能是它自己的数据的这种损坏并抛出一个合适的结果。

除非我们能看到实际的代码，否则我们不可能找出发生这种情况的地方。但是，当您检查代码以搜索所有调用以`malloc`将它们与相应的调用匹配时`free`，这也是检查并确保您的每个调用`malloc`正确的好时机。

> 为什么我的程序仍在运行直到完成

如果问题和我上面预测的一样，那么你已经进入了[Undefined Behavior](http://en.wikipedia.org/wiki/Undefined_behavior)的领域。基本上，这意味着你做了一些语言标准规定你不应该做的事情（重写不属于你的内存）。既然你已经这样做了，语言标准绝对不能保证你的程序执行时会发生什么。它*可能*工作得很好。每次都可能*崩溃。*它*可能*只是有时会崩溃。它*可能会*损坏您的硬盘。它*可能会*导致你的房子着火，[恶魔从你的鼻子里飞出来](http://www.catb.org/jargon/html/N/nasal-demons.html). 你永远不知道。这就是为什么您应该不惜一切代价避免调用未定义行为。它不仅可怕，而且还指出了您的代码中的错误。

# typescript - 使用字符串值创建枚举

> ID：15490560
> 
> 赞同：326
> 
> 时间：2013-03-19T02:32:44.607
> 
> 标签：typescript

以下代码可用于`enum`在 TypeScript 中创建一个：

```
enum e {
    hello = 1,
    world = 2
}; 
```

并且可以通过以下方式访问这些值：

```
e.hello;
e.world; 
```

如何`enum`使用字符串值创建一个？

```
enum e {
    hello = "hello", // error: cannot convert string to e
    world = "world"  // error 
}; 
```

* * *

## 回答 #1

> 赞同：490
> 
> 时间：2013-03-19T05:04:09.130

## 打字稿 2.4

现在有字符串枚举，所以你的代码可以正常工作：

```
enum E {
    hello = "hello",
    world = "world"
}; 
```

## 打字稿 1.8

从 TypeScript 1.8 开始，您可以使用字符串文字类型来为命名字符串值（这部分是枚举的用途）提供可靠和安全的体验。

```
type Options = "hello" | "world";
var foo: Options;
foo = "hello"; // Okay 
foo = "asdf"; // Error! 
```

更多：[https ://www.typescriptlang.org/docs/handbook/advanced-types.html#string-literal-types](https://www.typescriptlang.org/docs/handbook/advanced-types.html#string-literal-types)

## 旧版支持

TypeScript 中的枚举是基于数字的。

您可以使用具有静态成员的类：

```
class E
{
    static hello = "hello";
    static world = "world"; 
} 
```

你也可以简单地说：

```
var E = {
    hello: "hello",
    world: "world"
} 
```

**更新：** 基于能够执行`var test:E = E.hello;`以下操作的要求满足此要求：

```
class E
{
    // boilerplate 
    constructor(public value:string){    
    }

    toString(){
        return this.value;
    }

    // values 
    static hello = new E("hello");
    static world = new E("world");
}

// Sample usage: 
var first:E = E.hello;
var second:E = E.world;
var third:E = E.hello;

console.log("First value is: "+ first);
console.log(first===third); 
```

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2014-02-27T14:47:18.453

在 TypeScript 的最新版本 (1.0RC) 中，您可以像这样使用枚举：

```
enum States {
    New,
    Active,
    Disabled
} 

// this will show message '0' which is number representation of enum member
alert(States.Active); 

// this will show message 'Disabled' as string representation of enum member
alert(States[States.Disabled]); 
```

**更新 1**

要从字符串值中获取枚举成员的数值，可以使用以下命令：

```
var str = "Active";
// this will show message '1'
alert(States[str]); 
```

**更新 2**

在最新的 TypeScript 2.4 中，引入了字符串枚举，如下所示：

```
enum ActionType {
    AddUser = "ADD_USER",
    DeleteUser = "DELETE_USER",
    RenameUser = "RENAME_USER",

    // Aliases
    RemoveUser = DeleteUser,
} 
```

有关 TypeScript 2.4 的更多信息，请阅读[MSDN 上的博客](https://blogs.msdn.microsoft.com/typescript/2017/06/12/announcing-typescript-2-4-rc/)。

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2016-02-07T18:29:58.357

**打字稿 2.4+**

您现在可以将字符串值直接分配给枚举成员：

```
enum Season {
    Winter = "winter",
    Spring = "spring",
    Summer = "summer",
    Fall = "fall"
} 
```

有关详细信息，请参阅[#15486](https://github.com/Microsoft/TypeScript/pull/15486)。

**打字稿 1.8+**

在 TypeScript 1.8+ 中，您可以创建一个字符串字面量类型来定义类型和一个具有相同名称的对象用于值列表。它模仿字符串枚举的预期行为。

这是一个例子：

```
type MyStringEnum = "member1" | "member2";

const MyStringEnum = {
    Member1: "member1" as MyStringEnum,
    Member2: "member2" as MyStringEnum
}; 
```

它将像字符串枚举一样工作：

```
// implicit typing example
let myVariable = MyStringEnum.Member1; // ok
myVariable = "member2";                // ok
myVariable = "some other value";       // error, desired

// explict typing example
let myExplicitlyTypedVariable: MyStringEnum;
myExplicitlyTypedVariable = MyStringEnum.Member1; // ok
myExplicitlyTypedVariable = "member2";            // ok
myExplicitlyTypedVariable = "some other value";   // error, desired 
```

确保键入对象中的所有字符串！如果您不这样做，那么在上面的第一个示例中，变量不会被隐式键入到`MyStringEnum`.

* * *

## 回答 #4

> 赞同：40
> 
> 时间：2013-07-24T16:18:39.007

在 TypeScript 0.9.0.1 中，虽然出现编译器错误，但编译器仍然可以将 ts 文件编译成 js 文件。代码按我们的预期工作，Visual Studio 2012 可以支持自动代码完成。

**更新 ：**

在语法上，TypeScript 不允许我们使用字符串值创建枚举，但我们可以破解编译器：p

```
enum Link
{
    LEARN   =   <any>'/Tutorial',
    PLAY    =   <any>'/Playground',
    GET_IT  =   <any>'/#Download',
    RUN_IT  =   <any>'/Samples',
    JOIN_IN =   <any>'/#Community'
}

alert('Link.LEARN:    '                     + Link.LEARN);
alert('Link.PLAY:    '                      + Link.PLAY);
alert('Link.GET_IT:    '                    + Link.GET_IT);
alert('Link[\'/Samples\']:    Link.'        + Link['/Samples']);
alert('Link[\'/#Community\']    Link.'      + Link['/#Community']); 
```

[操场](http://www.typescriptlang.org/Playground/#src=enum%20Link%0D%0A%7B%0D%0A%20%20%20%20LEARN%09%3D%09%3Cany%3E'%2FTutorial'%2C%0D%0A%09PLAY%09%3D%09%3Cany%3E'%2FPlayground'%2C%0D%0A%09GET_IT%09%3D%09%3Cany%3E'%2F%23Download'%2C%0D%0A%09RUN_IT%09%3D%09%3Cany%3E'%2FSamples'%2C%0D%0A%09JOIN_IN%09%3D%09%3Cany%3E'%2F%23Community'%0D%0A%7D%0D%0A%0D%0Aalert('Link.LEARN%3A%20%20%20%20'%09%09%09%09%09%09%2B%20Link.LEARN)%3B%0D%0Aalert('Link.PLAY%3A%20%20%20%20'%09%09%09%09%09%09%2B%20Link.PLAY)%3B%0D%0Aalert('Link.GET_IT%3A%20%20%20%20'%09%09%09%09%09%2B%20Link.GET_IT)%3B%0D%0Aalert('Link%5B%5C'%2FSamples%5C'%5D%3A%20%20%20%20Link.'%09%09%2B%20Link%5B'%2FSamples'%5D)%3B%0D%0Aalert('Link%5B%5C'%2F%23Community%5C'%5D%20%20%20%20Link.'%09%09%2B%20Link%5B'%2F%23Community'%5D)%3B "用 <any> 破解编译器")

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2017-01-13T09:53:06.373

### 打字稿 2.1 +

在 TypeScript 2.1 中引入的[Lookup types允许使用另一种模式来模拟字符串枚举：](https://github.com/Microsoft/TypeScript/wiki/What%27s-new-in-TypeScript#keyof-and-lookup-types)

```
// String enums in TypeScript 2.1
const EntityType = {
    Foo: 'Foo' as 'Foo',
    Bar: 'Bar' as 'Bar'
};

function doIt(entity: keyof typeof EntityType) {
    // ...
}

EntityType.Foo          // 'Foo'
doIt(EntityType.Foo);   // 
doIt(EntityType.Bar);   // 
doIt('Foo');            // 
doIt('Bar');            // 
doIt('Baz');            // 
```

### 打字稿 2.4 +

在 2.4 版本中，TypeScript 引入了对字符串枚举的原生支持，因此不需要上述解决方案。来自 TS 文档：

```
enum Colors {
  Red = "RED",
  Green = "GREEN",
  Blue = "BLUE",
} 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2015-04-17T11:47:47.760

为什么不直接使用访问枚举字符串的本机方式。

```
enum e {
  WHY,
  NOT,
  USE,
  NATIVE
}

e[e.WHY] // this returns string 'WHY' 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2015-12-11T10:35:18.193

您可以在最新的 TypeScript 中使用字符串枚举：

```
enum e
{
    hello = <any>"hello",
    world = <any>"world"
}; 
```

来源：[https ://blog.rsuter.com/how-to-implement-an-enum-with-string-values-in-typescript/](https://blog.rsuter.com/how-to-implement-an-enum-with-string-values-in-typescript/)

* * *

**更新 - 2016**

这些天来，我在 React 中使用的创建一组字符串的一种稍微更健壮的方法是这样的：

```
export class Messages
{
    static CouldNotValidateRequest: string = 'There was an error validating the request';
    static PasswordMustNotBeBlank: string = 'Password must not be blank';   
}

import {Messages as msg} from '../core/messages';
console.log(msg.PasswordMustNotBeBlank); 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2016-10-14T02:39:58.840

这是一个相当干净的解决方案，允许继承，使用 TypeScript 2.0。我没有在早期版本上尝试过。

**奖励：**值可以是*任何*类型！

```
export class Enum<T> {
  public constructor(public readonly value: T) {}
  public toString() {
    return this.value.toString();
  }
}

export class PrimaryColor extends Enum<string> {
  public static readonly Red = new Enum('#FF0000');
  public static readonly Green = new Enum('#00FF00');
  public static readonly Blue = new Enum('#0000FF');
}

export class Color extends PrimaryColor {
  public static readonly White = new Enum('#FFFFFF');
  public static readonly Black = new Enum('#000000');
}

// Usage:

console.log(PrimaryColor.Red);
// Output: Enum { value: '#FF0000' }
console.log(Color.Red); // inherited!
// Output: Enum { value: '#FF0000' }
console.log(Color.Red.value); // we have to call .value to get the value.
// Output: #FF0000
console.log(Color.Red.toString()); // toString() works too.
// Output: #FF0000

class Thing {
  color: Color;
}

let thing: Thing = {
  color: Color.Red,
};

switch (thing.color) {
  case Color.Red: // ...
  case Color.White: // ...
} 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2017-03-15T20:32:36.800

**更新：打字稿 3.4**

您可以简单地使用`as const`：

```
const AwesomeType = {
   Foo: "foo",
   Bar: "bar"
} as const; 
```

打字稿 2.1

这也可以通过这种方式完成。希望它可以帮助某人。

```
const AwesomeType = {
    Foo: "foo" as "foo",
    Bar: "bar" as "bar"
};

type AwesomeType = (typeof AwesomeType)[keyof typeof AwesomeType];

console.log(AwesomeType.Bar); // returns bar
console.log(AwesomeType.Foo); // returns foo

function doSth(awesometype: AwesomeType) {
    console.log(awesometype);
}

doSth("foo") // return foo
doSth("bar") // returns bar
doSth(AwesomeType.Bar) // returns bar
doSth(AwesomeType.Foo) // returns foo
doSth('error') // does not compile 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2014-01-23T11:52:25.823

一个hacky的方法是： -

呼叫状态.ts

```
enum Status
{
    PENDING_SCHEDULING,
    SCHEDULED,
    CANCELLED,
    COMPLETED,
    IN_PROGRESS,
    FAILED,
    POSTPONED
}

export = Status 
```

实用程序.ts

```
static getEnumString(enum:any, key:any):string
{
    return enum[enum[key]];
} 
```

如何使用

```
Utils.getEnumString(Status, Status.COMPLETED); // = "COMPLETED" 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2013-07-18T17:02:08.520

这对我有用：

```
class MyClass {
    static MyEnum: { Value1; Value2; Value3; }
    = {
        Value1: "Value1",
        Value2: "Value2",
        Value3: "Value3"
    };
} 
```

或者

```
module MyModule {
    export var MyEnum: { Value1; Value2; Value3; }
    = {
        Value1: "Value1",
        Value2: "Value2",
        Value3: "Value3"
    };
} 
```

8)

更新：发布后不久，我发现了另一种方式，但忘记发布更新（但是，上面已经有人提到过）：

```
enum MyEnum {
    value1 = <any>"value1 ", 
    value2 = <any>"value2 ", 
    value3 = <any>"value3 " 
} 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2017-03-07T13:38:05.787

有很多答案，但我没有看到任何完整的解决方案。接受的答案以及 的问题`enum { this, one }`在于，它会将您碰巧使用的字符串值分散到许多文件中。我也不太喜欢“更新”，它很复杂，也没有利用类型。我认为[Michael Bromley 的回答](https://stackoverflow.com/a/41631732/1734730)是最正确的，但它的界面有点麻烦，并且可以与类型有关。

我正在使用 TypeScript 2.0.+ ...这就是我要做的

```
export type Greeting = "hello" | "world";
export const Greeting : { hello: Greeting , world: Greeting } = {
    hello: "hello",
    world: "world"
}; 
```

然后像这样使用：

```
let greet: Greeting = Greeting.hello 
```

使用有用的 IDE 时，它还具有更好的类型/悬停信息。缺点是你必须写两次字符串，但至少它只在两个地方。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2015-11-17T03:30:23.900

我只是声明一个接口并使用该类型的变量访问枚举。使接口和枚举保持同步实际上很容易，因为 TypeScript 会在枚举中发生变化时抱怨，就像这样。

> 错误 TS2345：“typeof EAbFlagEnum”类型的参数不可分配给“IAbFlagEnum”类型的参数。“typeof EAbFlagEnum”类型中缺少属性“Move”。

这种方法的优点是不需要类型转换就可以在各种情况下使用枚举（接口），因此支持更多类型的情况，例如开关/案例。

```
// Declare a TypeScript enum using unique string 
//  (per hack mentioned by zjc0816)

enum EAbFlagEnum {
  None      = <any> "none",
  Select    = <any> "sel",
  Move      = <any> "mov",
  Edit      = <any> "edit",
  Sort      = <any> "sort",
  Clone     = <any> "clone"
}

// Create an interface that shadows the enum
//   and asserts that members are a type of any

interface IAbFlagEnum {
    None:   any;
    Select: any;
    Move:   any;
    Edit:   any;
    Sort:   any;
    Clone:  any;
}

// Export a variable of type interface that points to the enum

export var AbFlagEnum: IAbFlagEnum = EAbFlagEnum; 
```

使用变量而不是枚举会产生所需的结果。

```
var strVal: string = AbFlagEnum.Edit;

switch (strVal) {
  case AbFlagEnum.Edit:
    break;
  case AbFlagEnum.Move:
    break;
  case AbFlagEnum.Clone
} 
```

标志对我来说是另一个必需品，所以我创建了一个 NPM 模块来添加到这个示例中，并包含测试。

[https://github.com/djabraham/ts-enum-tools](https://github.com/djabraham/ts-enum-tools)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-09-08T08:31:51.137

**打字稿 < 2.4**

```
/** Utility function to create a K:V from a list of strings */
function strEnum<T extends string>(o: Array<T>): {[K in T]: K} {
  return o.reduce((res, key) => {
    res[key] = key;
    return res;
  }, Object.create(null));
}

/**
  * Sample create a string enum
  */

/** Create a K:V */
const Direction = strEnum([
  'North',
  'South',
  'East',
  'West'
])
/** Create a Type */
type Direction = keyof typeof Direction;

/** 
  * Sample using a string enum
  */
let sample: Direction;

sample = Direction.North; // Okay
sample = 'North'; // Okay
sample = 'AnythingElse'; // ERROR! 
```

来自[https://basarat.gitbooks.io/typescript/docs/types/literal-types.html](https://basarat.gitbooks.io/typescript/docs/types/literal-types.html)

到源链接，您可以找到更多更简单的方法来完成字符串文字类型

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2017-04-23T15:19:06.220

使用 typescript@next 中提供的自定义转换器 ( [https://github.com/Microsoft/TypeScript/pull/13940](https://github.com/Microsoft/TypeScript/pull/13940) )，您可以使用来自字符串文字类型的字符串值创建类似枚举的对象。

请查看我的 npm 包[ts-transformer-enumerate](https://www.npmjs.com/package/ts-transformer-enumerate)。

示例用法：

```
// The signature of `enumerate` here is `function enumerate<T extends string>(): { [K in T]: K };`
import { enumerate } from 'ts-transformer-enumerate';

type Colors = 'green' | 'yellow' | 'red';
const Colors = enumerate<Colors>();

console.log(Colors.green); // 'green'
console.log(Colors.yellow); // 'yellow'
console.log(Colors.red); // 'red' 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-11-05T23:38:05.590

最近使用 TypeScript 1.0.1 遇到了这个问题，并以这种方式解决：

```
enum IEvents {
        /** A click on a product or product link for one or more products. */
        CLICK,
        /** A view of product details. */
        DETAIL,
        /** Adding one or more products to a shopping cart. */
        ADD,
        /** Remove one or more products from a shopping cart. */
        REMOVE,
        /** Initiating the checkout process for one or more products. */
        CHECKOUT,
        /** Sending the option value for a given checkout step. */
        CHECKOUT_OPTION,
        /** The sale of one or more products. */
        PURCHASE,
        /** The refund of one or more products. */
        REFUND,
        /** A click on an internal promotion. */
        PROMO_CLICK
}

var Events = [
        'click',
        'detail',
        'add',
        'remove',
        'checkout',
        'checkout_option',
        'purchase',
        'refund',
        'promo_click'
];

function stuff(event: IEvents):boolean {
        // event can now be only IEvents constants
        Events[event]; // event is actually a number that matches the index of the array
}
// stuff('click') won't work, it needs to be called using stuff(IEvents.CLICK) 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-06-30T09:35:40.040

**Typescript 中的字符串枚举：**

字符串枚举是一个类似的概念，但有一些细微的运行时差异，如下所述。在字符串枚举中，每个成员都必须使用字符串文字或另一个字符串枚举成员进行常量初始化。

```
enum Direction {
  Up = "UP",
  Down = "DOWN",
  Left = "LEFT",
  Right = "RIGHT",
} 
```

虽然字符串枚举没有自动递增的行为，但字符串枚举的好处是它们可以很好地“序列化”。换句话说，如果您正在调试并且必须读取数字枚举的运行时值，则该值通常是不透明的 - 它本身并不能传达任何有用的含义（尽管反向映射通常可以提供帮助），字符串枚举允许您在代码运行时提供有意义且可读的值，与枚举成员本身的名称无关。参考链接如下。

[在此处输入链接描述](https://www.typescriptlang.org/docs/handbook/enums.html)

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-06-26T15:09:57.813

我有同样的问题，并想出了一个运行良好的功能：

*   每个条目的键和值都是字符串，并且相同。
*   每个条目的值都是从键派生的。（即“不要重复自己”，与带有字符串值的常规枚举不同）
*   TypeScript 类型是成熟且正确的。（防止错别字）
*   仍然有一种简单的方法可以让 TS 自动完成您的选项。（例如，输入`MyEnum.`，并立即看到可用的选项）
*   还有其他几个优点。（见答案底部）

效用函数：

```
export function createStringEnum<T extends {[key: string]: 1}>(keysObj: T) {
    const optionsObj = {} as {
        [K in keyof T]: keyof T
        // alternative; gives narrower type for MyEnum.XXX
        //[K in keyof T]: K
    };
    const keys = Object.keys(keysObj) as Array<keyof T>;
    const values = keys; // could also check for string value-overrides on keysObj
    for (const key of keys) {
        optionsObj[key] = key;
    }
    return [optionsObj, values] as const;
} 
```

用法：

```
// if the "Fruit_values" var isn't useful to you, just omit it
export const [Fruit, Fruit_values] = createStringEnum({
    apple: 1,
    pear: 1,
});
export type Fruit = keyof typeof Fruit; // "apple" | "pear"
//export type Fruit = typeof Fruit_values[number]; // alternative

// correct usage (with correct types)
let fruit1 = Fruit.apple; // fruit1 == "apple"
fruit1 = Fruit.pear; // assigning a new fruit also works
let fruit2 = Fruit_values[0]; // fruit2 == "apple"

// incorrect usage (should error)
let fruit3 = Fruit.tire; // errors
let fruit4: Fruit = "mirror"; // errors 
```

* * *

现在有人可能会问，这个“基于字符串的枚举”比仅仅使用有什么优势：

```
type Fruit = "apple" | "pear"; 
```

有几个优点：

1.  自动完成更好一点（imo）。例如，如果您键入`let fruit = Fruit.`，Typescript 将立即列出可用的确切选项集。使用字符串文字，您需要明确定义您的类型，例如。`let fruit: Fruit =` , 然后按 ctrl+space。（甚至导致不相关的自动完成选项显示在有效选项下方）
2.  选项的 TSDoc 元数据/描述被转移到`MyEnum.XXX`字段中！这对于提供有关不同选项的附加信息很有用。例如： ![](../Images/9c3a6c995b3694216747b8e6418c95cf.png)
3.  您可以在运行时访问选项列表（例如`Fruit_values`，或手动使用`Object.values(Fruit)`）。使用这种`type Fruit = ...`方法，没有内置的方法可以做到这一点，从而切断了许多用例。（例如，我使用运行时值来构建 json-schemas）

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-03-09T12:01:24.600

@basarat 的回答很棒。这是您可以使用的简化但有点扩展的示例：

```
export type TMyEnumType = 'value1'|'value2';

export class MyEnumType {
    static VALUE1: TMyEnumType = 'value1';
    static VALUE2: TMyEnumType = 'value2';
}

console.log(MyEnumType.VALUE1); // 'value1'

const variable = MyEnumType.VALUE2; // it has the string value 'value2'

switch (variable) {
    case MyEnumType.VALUE1:
        // code...

    case MyEnumType.VALUE2:
        // code...
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-07-03T19:54:53.600

打字稿 0.9.0.1

```
enum e{
    hello = 1,
    somestr = 'world'
};

alert(e[1] + ' ' + e.somestr); 
```

[打字稿游乐场](http://www.typescriptlang.org/Playground/#src=%20%20%20%20enum%20e%7B%0D%0A%20%20%20%20%20%20%20%20hello%20=%201,%0D%0A%20%20%20%20%20%20%20%20somestr%20=%20%27world%27%0D%0A%20%20%20%20%7D%0D%0A%20%20%20%20%0D%0A%20%20%20%20alert%28e%5B1%5D%20+%20%27%20%27%20+%20e.somestr%29;)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-12-04T20:35:47.213

我已经在 TypeScript 1.5 中尝试过，如下所示，它对我有用

```
module App.Constants {
   export enum e{
        Hello= ("Hello") as any,
World= ("World") as any
    }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-06-26T13:52:16.177

我正在寻找一种在打字稿枚举（v2.5）中实现描述的方法，这种模式对我有用：

```
export enum PriceTypes {
    Undefined = 0,
    UndefinedDescription = 'Undefined' as any,
    UserEntered = 1,
    UserEnteredDescription = 'User Entered' as any,
    GeneratedFromTrade = 2,
    GeneratedFromTradeDescription = 'Generated From Trade' as any,
    GeneratedFromFreeze = 3,
    GeneratedFromFreezeDescription = 'Generated Rom Freeze' as any
} 
```

...

```
 GetDescription(e: any, id: number): string {
        return e[e[id].toString() + "Description"];
    }
    getPriceTypeDescription(price: IPricePoint): string {
        return this.GetDescription(PriceTypes, price.priceType);
    } 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-06-13T14:47:35.483

```
//to access the enum with its string value you can convert it to object 
//then you can convert enum to object with proberty 
//for Example :

enum days { "one" =3, "tow", "Three" }

let _days: any = days;

if (_days.one == days.one)
{ 
    alert(_days.one + ' | ' + _days[4]);
} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-07-02T02:06:29.437

小 js-hacky 但有效：`e[String(e.hello)]`

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-08-03T11:15:44.627

非常非常简单的带字符串的枚举（TypeScript 2.4）

```
import * from '../mylib'

export enum MESSAGES {
    ERROR_CHART_UNKNOWN,
    ERROR_2
}

export class Messages {
    public static get(id : MESSAGES){
        let message = ""
        switch (id) {
            case MESSAGES.ERROR_CHART_UNKNOWN :
                message = "The chart does not exist."
                break;
            case MESSAGES.ERROR_2 :
                message = "example."
                break;
        }
        return message
    }
}

function log(messageName:MESSAGES){
    console.log(Messages.get(messageName))
} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2016-03-02T23:53:32.487

```
export enum PaymentType {
                Cash = 1,
                Credit = 2
            }
var paymentType = PaymentType[PaymentType.Cash]; 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2015-08-20T18:04:41.550

我认为你应该试试这个，在这种情况下，变量的值不会改变，它的工作方式很像枚举，像类一样使用也可以，唯一的缺点是你可以错误地改变静态变量的值，这就是我们不想在枚举中。

```
namespace portal {

export namespace storageNames {

    export const appRegistration = 'appRegistration';
    export const accessToken = 'access_token';

  }
} 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-07-04T13:08:55.787

如果您想要的主要是简单的调试（通过公平的类型检查）并且不需要为枚举指定特殊值，这就是我正在做的事情：

```
export type Enum = { [index: number]: string } & { [key: string]: number } | Object;

/**
 * inplace update
 * */
export function enum_only_string<E extends Enum>(e: E) {
  Object.keys(e)
    .filter(i => Number.isFinite(+i))
    .forEach(i => {
      const s = e[i];
      e[s] = s;
      delete e[i];
    });
}

enum AuthType {
  phone, email, sms, password
}
enum_only_string(AuthType); 
```

如果你想支持遗留代码/数据存储，你可以保留数字键。

这样，您可以避免输入两次值。

# java - Java 对象内存占用 - Visualvm 和 java.sizeOf 测量

> ID：15490561
> 
> 赞同：8
> 
> 时间：2013-03-19T02:32:49.633
> 
> 标签：java, object, memory, visualvm

我试图了解 Java 中对象的内存占用量是多少。我阅读[了这个](http://www.javamex.com/tutorials/memory/object_memory_usage.shtml)文档和其他关于 Java 中对象和内存的文档。

但是，当我使用[sizeof Java 库](http://sizeof.sourceforge.net/)或 visualvm 时，我得到了两个不同的结果，其中没有一个符合我根据之前的参考 ( [http://www.javamex.com](http://www.javamex.com) ) 所期望的结果。

对于我的测试，我正在`Java SE 7 Developer Preview`使用`64-bits Mac`with `java.sizeof 0.2.1`and `visualvm 1.3.5`。

我有三个班`TestObject`，，，，`TestObject2`。`TestObject3`

```
public class TestObject
{

}

public class TestObject2 extends TestObject
{
    int a = 3;
}

public class TestObject3 extends TestObject2
{
    int b = 4;
    int c = 5;
} 
```

我的主要课程：

```
public class memoryTester
{
    public static void main(String[] args) throws Throwable
    {
        TestObject object1 = new TestObject();
        TestObject2 object2 = new TestObject2();
        TestObject3 object3 = new TestObject3();

        int sum = object2.a + object3.b + object3.c;
        System.out.println(sum);

        SizeOf.turnOnDebug();

        System.out.println(SizeOf.humanReadable(SizeOf.deepSizeOf(object1)));
        System.out.println(SizeOf.humanReadable(SizeOf.deepSizeOf(object2)));
        System.out.println(SizeOf.humanReadable(SizeOf.deepSizeOf(object3)));
    }
} 
```

使用 java.SizeOf() 我得到：

```
{ test.TestObject
} size = 16.0b
16.0b

{ test.TestObject2
 a = 3
} size = 16.0b
16.0b

{ test.TestObject3
 b = 4
 c = 5
} size = 24.0b
24.0b 
```

使用visualvm我有：

```
this (Java frame)   TestObject  #1  16
this (Java frame)   TestObject2 #1  20
this (Java frame)   TestObject3 #1  28 
```

根据我通过 Internet 阅读的文档，因为我是 64 位的，所以我应该有一个 16 字节的对象头，对于`TestObject`.

然后`TestObject2`我应该为整数字段添加 4 个字节，给出 20 个字节，我应该再次添加 4 个字节的填充，总大小为 24 个字节`TestObject2`。我错了吗？

继续这种方式`TestObject3`，我必须为应该提供 32 个字节的两个整数字段再添加 8 个字节。

VisualVm 似乎忽略了填充，而 java.sizeOf 似乎错过了 4 个字节，就好像包含在对象头中一样。我可以用 4 个布尔值替换一个整数，它给出了相同的结果。

**问题：**

为什么这两个工具给出不同的结果？

我们应该有填充吗？

我还在某处读到（我没有找到链接），在一个类和它的子类之间可能有一些填充，对吗？在那种情况下，继承的类树可能会有一些内存开销？

最后，是否有一些 Java 规范/文档详细说明了 Java 正在做什么？

谢谢你的帮助。

**更新：**

为了回答 utapyngo 的评论，为了获取 visualvm 中对象的大小，我创建了一个堆转储，然后在“类”部分中，我检查了“实例”列之后的“大小”列。每种对象的实例数（如果为 1）。

为了回答 Nathaniel Ford 的评论，我初始化了每个字段，然后在我的**主要**方法中对它们进行了简单的求和以利用它们。它没有改变结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T08:28:18.347

是的，填充可能发生。堆栈上的对象也可以完全优化。只有 JVM 知道任何时间点的确切大小。由于这些从 Java 语言中近似大小的技术都倾向于不同意，但是附加到 JVM 的工具往往是最准确的。我知道在 Java 中实现 sizeOf 的三种主要技术是：

1.  序列化对象并返回这些字节的长度（显然错误，但对相对比较有用）
2.  列出项目反射，以及在对象上找到的每个字段的硬编码大小常量。可以调整为有点准确，但 JVM 中的更改和 JVM 可能会或可能不会做的填充会抛出它。
3.  列表项创建对象负载，运行 gc 并比较 jvm 堆大小的变化

这些技术都不是准确的。

如果您在 Oracle JVM 上运行，则在 v1.5 或之后。然后有一种方法可以直接从 Java 运行时使用的 C 结构中读取对象的大小。对于生产来说不是一个好主意，如果弄错了，你可能会导致 JVM 崩溃。但是，如果您想尝试一下，这里有一篇博文可能会很有趣：http: [//highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/](http://highlyscalable.wordpress.com/2012/02/02/direct-memory-access-in-java/)

至于 Java 实际在做什么的文档，那就是特定于 JVM、特定于版本和可能特定于配置的文档。每个实现都可以自由地以不同的方式处理对象。即使在完全优化对象的范围内，例如，没有从堆栈中传递出来的对象也是空闲的，不会被分配到堆上。一些 JVM 甚至可以设法将对象完全保留在 CPU 寄存器中。这里不是你的情况，但我将它作为一个例子说明为什么获取 Java 对象的真实大小很棘手。

因此，最好采用任何 sizeOf 值，您只需加一点盐就可以将其视为“指导”测量值。

# c# - 如何获取搜索引擎的有效 URL 数据库？

> ID：15490564
> 
> 赞同：2
> 
> 时间：2013-03-19T02:33:00.687
> 
> 标签：c#, .net, dns, search-engine

我正在尝试为学校制作一个 Internet 搜索引擎，仅使用 C# 和 .NET 框架。我需要下载要编入索引的页面的 HTML 代码。

现在只需要一个有效 URL 的列表。

由于我没有有效 URL 的数据库，所以我做了一个试错算法，它会生成一个字符串：

```
a, b, c.....
aa, ab, ac......
aaa, aab, aac......
aaaa, aaab, aaac......
aaaaa, aaaab, aaaac...... 
```

然后尝试与 .com、.net 或其他连接。这太低效了。

我需要一个具有有效 URL 的数据库。你知道我在哪里可以买到吗？

我不知道如何将它们直接从 DNS 中取出 - 这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:44:24.657

你可以建立你自己的。大多数搜索引擎会抓取页面并跟踪指向其他页面的链接。

你从一个已知的列表开始（它不必很大）然后：

1.  访问列表中的页面
2.  在这些页面上查找链接
3.  将这些链接添加到您的列表中
4.  转到 1

至于使用DNS；它不是为查询 URL 而设计的，只用于查询主机名。而且，据我所知，除非您自己管理服务器，否则您无法从 DNS 服务器中获取每个主机名的列表。

# javascript - knockoutjs，如何使用 observableArray 来存储另一个 observable 的历史记录？

> ID：15490566
> 
> 赞同：1
> 
> 时间：2013-03-19T02:33:28.330
> 
> 标签：javascript, jquery, ajax, knockout.js

我是 Knockoutjs 的新手。我有一个非常简单的模型，其中包含名称、值和历史变量。我尝试了几种方法，但无法获得更新超过 1 次迭代的历史记录。大多数方法都因范围访问问题而失败。正如我所说，我是淘汰赛的新手。我还包括了这个[Fiddle](http://jsfiddle.net/K3gJT/54/)，它很好地说明了这些问题。

```
this.tlmname = ko.observable();
this.tlmval = ko.observable();
this.history = ko.observableArray();

var telemItem = function (data) {

     this.tlmname = ko.observable();
     this.tlmval = ko.observable();
     this.history = ko.observableArray();
     this.update(data);

 };

ko.utils.extend(telemItem.prototype, {

     update: function(data) {

         this.tlmname(data.tlmname|| "Cheese");
         this.tlmval(data.tlmval || 0);
         this.history.push(data.tlmval);

         if (this.history().length > 50) this.history.shift();

     }

 });

var telemetryViewModel = function(telemVars) {

    this.telemVars = ko.observableArray(ko.utils.arrayMap(telemVars, function(data) {
            return new telemItem(data);
        }));

function UpdateModel( modelView ) {

    $.getJSON('/gtr/tests/ko/requestTelemetry.php', 
    function(data)
    {
        //modelView.telemVars(data.telemVars);
        //modelView(data.telemVars);

        modelView.update(data.telemVars);
        modelView.telemVarsDirect( getDirectVM( data.telemVars ) );

    }               
)}; 
```

# linux-kernel - Linux中访问不可缓存内存的正确方法

> ID：15490571
> 
> 赞同：1
> 
> 时间：2013-03-19T02:34:32.863
> 
> 标签：linux-kernel, linux-device-driver, embedded-linux

我的情况如下：

*   一块板充当 PCIE 根端口 (RP)，一块板充当 PCIE 端点 (EP)。
*   PCIE 端点导出了一个内存区域。该内存区域在 RP 和 EP 之间共享。每当我们需要访问这个共享内存区域时（实际上我们只是访问这个区域的前几个字节的控制数据结构）。我们必须为读取和写入后刷新缓存做一个无效缓存。
*   我尝试将结构声明如下，但没有无效/刷新缓存，读/写不会生效。

    typedef volatile struct { u32 front; u32 后部；u32 n_msg; u32 偏移量；} queue_ctl_t;

谁能告诉我访问这个共享内存区域的正确方法。我只是想知道一些网络驱动程序（用于 PCIE 总线上的网卡）如何在不执行无效/刷新缓存的情况下一致地访问数据。任何建议表示赞赏，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:25:32.117

您应该使用来映射有问题的内存区域，并使用and函数`ioremap_nocache()`读取/写入它们。`ioread*()``iowrite*()`

# javascript - AngularJs - 使用 $parent ng-model 从控制器更改/推送选择颜色

> ID：15490572
> 
> 赞同：1
> 
> 时间：2013-03-19T02:34:34.170
> 
> 标签：javascript, angularjs

这是一个非常简单的例子： [JsFiddle](http://jsfiddle.net/7Hh2R/29/)

这是 MainCtrl

```
function MainCtrl($scope)
   {
   $scope.color = {};
   $scope.colors = [
       { name: "red" },
       { name: "yellow" },
   ];

 var newColor = $scope.color;
    newColor.name = "blue";  
$scope.colors.push(newColor);
$scope.selectedColor = newColor; 
```

}

**我有 3 个 html 表单：**

1.  主窗体.Html
2.  AvailableColors.html（部分，使用 ng-include 嵌入 MainForm.html）
3.  AddNewColor.html

**MainForm.Html 看起来像这样：**

```
<div ng-app ng-controller="MainCtrl">
 <div ng-include="'AvailableColors.html'">
</div> 
```

**AvailableColors.html 看起来像这样：**

```
<select ng-model="$parent.selectedColor" ng-options="color.name for color in colors">
  <option value="" selected>Select Color ..</option>  
</select>
<a href="#">Add New Color</a>
<br />
value is {{ selectedColor }} 
```

在 JsFiddle 示例中，我试图模拟用户添加新颜色。我需要 AvailableColors 的 ng-model 来拥有“$parent”。由于它来自 ng-include，并且没有“$parent”，因此选择的选择将不在表单提交的范围内。

**我的问题是当用户添加新添加的颜色时，我无法将它们推送到 AvailableColors.html。**

有任何想法吗？

注意：我知道在 JsFiddle 中添加了新颜色“蓝色”，但那是因为该示例中确实没有 ng-include。

显然，当实际存在 ng-include 时，它​​不会出现，只是刷新页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:06:34.857

父级只能从子级读取。为了做你想做的事，你必须使用父控制器中的方法。

```
 $scope.setSelected = function(color) {
        $scope.selectedColor = color;
    }

    $scope.addColor = function(newColor) {
       $scope.colors.push(newColor);
    } 
```

然后，您可以使用包含的 html 中的输入：

```
//Selector
<select ng-click="setSelected(selectColor)" ng-model="selectColor" ng-options="color.name for color in colors">
  <option value="" selected>Select Color ..</option>
</select>

//Add control
<input type="text" ng-model="newColor.name" />
<button id="addBtn" ng-click="addColor(newColor)">Add</button> 
```

如您所见，我在选择上添加了一个 ng-click 以更新父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:21:02.480

如果您在 $scope 上使用对对象的引用（[如 Angular 团队所建议的那样](http://www.youtube.com/watch?v=ZhfUv0spHCY&feature=youtu.be&t=30m)），则不必在`$parent`任何地方使用：

```
$scope.model = {selectedColor: ''};  // use an object here
$scope.addColor = function(newColorName) {
  $scope.colors.push({name: newColorName});
}; 
```

可用颜色.html：

```
<select ng-model="model.selectedColor" ng-options="color.name for color in colors">
   <option value="" selected>Select Color ..</option>  
</select>
<br>
<input type="text" ng-model="colorName">
<button ng-click="addColor(colorName); colorName=''">Add</button>
<br />
value is {{ model.selectedColor }} 
```

[Plunker](http://plnkr.co/edit/shR2tmcsTph7eOt1FbDj?p=preview)，它使用 ng-include。

# maven - 如何集成 TortoiseSVN 和 Maven

> ID：15490579
> 
> 赞同：0
> 
> 时间：2013-03-19T02:35:30.553
> 
> 标签：maven

我想使用 TortoiseSVN 更新我的 SVN 存储库。

我想把它作为 maven pom 的一部分来做。

Maven SCM 插件需要命令行 svn 工具。

我尝试使用 exec-maven-plugin 之类的

```
<executable>C:/Apps/TortoiseSVN/bin/TortoiseProc.exe</executable>
<workingDirectory>C:/MDMSrc/trunk/venus/</workingDirectory>
<arguments>
    <argument>/command:update</argument>
    <argument>/path:"C:/MDMSrc/trunk/venus/"</argument>
    <argument>/closeonend:3</argument>
</arguments> 
```

但我不确定如何将它附加到一个阶段。

# python - 为什么 SO_REUSEADDR 不适用于 multiprocessing.Listener？

> ID：15490585
> 
> 赞同：1
> 
> 时间：2013-03-19T02:36:03.600
> 
> 标签：python, sockets, python-2.7, multiprocessing

我正在构建一个使用包的`Listener/Client`类与另一个脚本通信的应用`multiprocessing`程序。

我可以成功地创建侦听器和客户端并进行通信，但是我仍然收到*TCP TIME-WAIT*的持久影响- 重新运行脚本后，实例化侦听器时出现异常：

> [Errno 98] 地址已在使用中

我不知道为什么会这样，因为据我所知，默认情况下**SO_REUSEADDR**是在 Listener 的构造函数中设置的（参见[Lib/multiprocessing/connection.py](https://github.com/certik/python-2.7/blob/master/Lib/multiprocessing/connection.py#L253)）。

我正在运行 Ubuntu 12.10 并使用 Python 2.7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:52:34.460

当您没有完全关闭套接字时，通常会发生这种情况。即使您强制关闭应用程序，您能否发布一些代码表明您正在干净地关闭套接字？

# windows-ce - Wince 设备驱动程序

> ID：15490586
> 
> 赞同：0
> 
> 时间：2013-03-19T02:36:05.443
> 
> 标签：windows-ce

我正在尝试将我的 POS 终端（WinCE 安全多应用操作系统，200 MHz ARM 920T 32 位 CPU）连接到我的 windows 7 PC。问题是我遇到了设备驱动程序软件问题并且设备未被识别。我没有随产品获得任何安装 CD 或软件。我在网络上找不到合适的驱动程序，需要通过 WMDC 将 CAB 文件安装到设备中，以便我可以自动化产品测试。有人可以建议解决此驱动程序问题并指导我如何建立连接。非常感谢任何帮助。

谢谢，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:32:57.957

这可能是一项复杂的任务。首先，连接类型（串行、USB、以太网等）很重要。我将假设 USB，因为这感觉就像您可能在谈论的那样（尽管您应该编辑和澄清）。

要使 USB 工作，您需要两端的驱动程序 - 设备和 PC - 并且它们需要合作。对于 Windows CE 设备和 USB，常用的方法（虽然不是唯一的选择）是使用 ActiveSync。有一个适用于 Windows CE 的开箱即用的客户端应用程序驱动程序 (repllog.exe) - 尽管它需要 OEM 实际将其连接到传输驱动程序。对于桌面（Vista 和更高版本），您将使用[Windows Mobile Device Center](http://support.microsoft.com/kb/931937) (WMDC)。

您可能只是能够安装 WMDC 并且您已关闭并运行，但 OEM 始终可能禁用它，因为您可能不希望有人将 PC 连接到 POS 系统并破坏正常操作。您是否询问过设备 OEM？

# c - 删除整个链表 C

> ID：15490593
> 
> 赞同：2
> 
> 时间：2013-03-19T02:36:58.413
> 
> 标签：c, recursion, linked-list

我的程序使用链表按顺序输入数字。

```
My input: 2 4 23 34 534 543 
```

当我去删除列表时，我得到了这个：

```
137429056 137428992 137429040 137429024 137429008 0 
```

这是为什么？

```
void deleteList(node* head)
{
    if(head == NULL)
        printf("List is empty\n");

    else
        deleteList(head->next);

    free(head);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T02:38:50.090

您释放了内存，但您没有将任何链接（或头部本身）设置为空，因此您正在引用未分配的内存。

另外：当while循环更简单时，为什么要使用递归？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-17T19:37:45.840

这可能是一个非常古老的问题，但这个答案可以帮助某人。

```
deleteList(struct node* temp)
{
     if(temp == NULL)
          printf("List is empty\n");

     else {
          head = temp;
          temp->next = NULL;
          free(temp);
          deleteList(head->next);
     }
     head = NULL;
 } 
```

# php - 如何在 PHP 中检查 3 维数组中的空槽？

> ID：15490602
> 
> 赞同：2
> 
> 时间：2013-03-19T02:38:37.050
> 
> 标签：php, arrays, multidimensional-array, is-empty

我有关于 3 维数组的编码。我需要一个函数来自动检查空槽的位置，然后插入空数组 ($rhw[104][1][2]) 值 Class C。

编码结构是，

```
$rhw[101][1][2] = "Class A";
$rhw[102][1][2] = "Class B";
$rhw[103][1][2] = ""; 
```

我可以像下面的编码一样，

```
if (empty($rhw[103][1][2])) {
    echo "TRUE";
} else {
    echo "FALSE";
} 
```

但是已经声明了 --- if (empty($rhw[103][1][2])) --- 我不知道如何自动检查空槽的位置（即 $rhw[103][ 1][2]）。

如，

```
if (empty($rhw[][][])) {
    insert "Class C";
} else {
    echo "The slot has been fulfilled";
} 
```

但它无法进行。

谢谢你们！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:41:57.140

取自[in_array() 和多维数组](https://stackoverflow.com/questions/4128323/in-array-and-multidimensional-array)

> ```
> in_array() does not work on multidimensional arrays. You could write a recursive function to do that for you:
> 
> function in_array_r($needle, $haystack, $strict = false) {
>     foreach ($haystack as $item) {
>         if (($strict ? $item === $needle : $item == $needle) || (is_array($item) && in_array_r($needle, $item, $strict))) {
>             return true;
>         }
>     }
> 
>     return false;
> } 
> ```
> 
> 用法：
> 
> ```
> $b = array(array("Mac", "NT"), array("Irix", "Linux"));
> echo in_array_r("Irix", $b) ? 'found' : 'not found'; 
> ```

要检查特定位置，您可以使用更简单的解决方案：

```
if(isset($rhw[103]) && isset($rhw[103][1]) && isset($rhw[103][1][2]))
{
    echo "TRUE";
} 
else 
{
    echo "FALSE";
} 
```

或者使用一个函数来检查每个多维位置。

```
function check_multidimensional($data, $a, $b, $c)
{
    return isset($data[a]) && isset($data[$a][$b]) && isset($data[$a][$b][$c]);
} 
```

您甚至可以为 N 维制作更通用的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:39:39.517

Coba ini deh udah di 编辑。佩纳萨兰：p

```
$rwh = array(
   101 => array( 1 => array(1 => 'Value key 1', 2 => 'Class A')),
   102 => array( 1 => array(1 => 'Value key 1', 2 => 'Class B')),
   103 => array( 1 => array(1 => 'Value key 1', 2 => ''))
);

echo 'PERTAMA : '.print_r($rwh);

function emptyArray($array = array() , $newval = '')
{
    $key_val = array();

    if(is_array($array) && !empty($array))
    {
        foreach($array as $key => $value)
        {
            $key_val[$key] = emptyArray($value, $newval);
        }
    }
    else if(empty($array))
        return $newval;
    else
        return $array;

    return $key_val;
}

$hasil = emptyArray($rwh, 'Class C');
echo "AKHIR : ".  print_r($hasil); 
```

# php - 多个搜索条件的快捷方式

> ID：15490606
> 
> 赞同：0
> 
> 时间：2013-03-19T02:39:04.890
> 
> 标签：php, sql

我有一个带有 3 个文本框的搜索表单供用户输入。

```
Keyword text box
Name text box
Date text box 
```

现在我必须做出 6 个“如果”来满足用户的选择。

有什么办法我不必做这么多“如果”？

如果用户选择填充所有 3 个文本框，则示例代码：

```
SELECT * FROM <table> WHERE keyword=<keyword txbox> AND Name = <name txtbox> AND Date = <date txtbox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:49:56.900

原始示例，没有消毒：

```
<?php
$op=array('keyword','name','date');
$_POST=array('keyword'=>'a','name'=>'b','date'=>'c');

    $q="SELECT * FROM FOO WHERE ";

foreach ($op as $o){
    if(!empty($_POST[$o])){
    $q.= $o.' = "'.$_POST[$o].'" AND '; 
    }

}

$q=substr($q,0, -4);

echo $q; // SELECT * FROM FOO WHERE keyword = "a" AND name = "b" AND date = "c" 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:02:55.247

这个结构会让你减少到 3 个 if 块。我不写 php，所以其他人可以给你语法。

```
select somefields
from sometables
where 1 = 3
and 
(
if they filled out the keyword
or keyword = that variable
if they filled out the name
or name = that variable
if they filled out the date
or date = that variable
) 
```

确保使用查询参数。还要确保你有一个没有完成文本框的计划。最后，如果日期字段包含时间组件，请在查询中处理它。

# symfony - 从 config.yml 将参数传递给 Assetic 过滤器服务

> ID：15490609
> 
> 赞同：0
> 
> 时间：2013-03-19T02:39:10.020
> 
> 标签：symfony, assetic

我编写了自己的 Assetic 过滤器，包含在 Symfony2 Bundle 中，以便将 CommonJS 模块编译到单个文件中。它被称为[cjsDeliveryBundle](https://github.com/mattcg/cjsDeliveryBundle)，但我们暂时把它放在一边。

我希望能够在我的`config_dev.yml`和`config_prod.yml`文件中的过滤器上设置不同的选项。

过滤器有一个 public setter: `setMinifyIdentifiers`，它接受一个布尔值。[我阅读了有关setter 注入](http://symfony.com/doc/current/book/service_container.html#optional-dependencies-setter-injection)的 Symfony2 文档，并将以下内容添加到我的`config.yml`：

```
assetic:
    filters:
        cssrewrite: ~
        cjs_delivery:
            resource: "%kernel.root_dir%/../src/MattCG/cjsDeliveryBundle/Resources/config/services.xml"
            calls:
                - [ setMinifyIdentifiers, [ true ] ] 
```

以下是`services.xml`我的 Bundle。

```
<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="matt_cg.cjs_delivery_filter.class">MattCG\cjsDeliveryBundle\Assetic\Filter\cjsDeliveryFilter</parameter>
        <parameter key="matt_cg.cjs_delivery_filter.minify_identifiers">null</parameter>
    </parameters>

    <services>
        <service id="matt_cg.cjs_delivery_filter" class="%matt_cg.cjs_delivery_filter.class%">
            <tag name="assetic.filter" alias="cjs_delivery"></tag>
            <call method="setMinifyIdentifiers">
                <argument>%matt_cg.cjs_delivery_filter.minify_identifiers%</argument>
            </call>
        </service>
    </services>
</container> 
```

过滤器工作正常，除了 setter 永远不会`true`作为参数调用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T00:42:38.013

知道了。解决方案是为每个环境设置单独的 YAML 参数文件，并在每个环境中指定过滤器参数。

所以这就是我在我的情况下所做的。

1.  `- { resource: parameters.yml }`从 中的`imports:`指令中删除`config.yml`。
2.  删除`parameters.yml`文件并将参数放在两个新文件中：`parameters_dev.yml`和`parameters_prod.yml`.
3.  添加`- { resource: parameters_dev.yml }`到`imports:`指令 in`config_dev.yml`和指令`- { resource: parameters_prod.yml }`in 。`imports:``config_prod.yml`
4.  添加`matt_cg.cjs_delivery_filter.minify_identifiers: true`到. `parameters:`_`parameters_prod.yml`

# r - 在R中转换为一年中的日期和时间

> ID：15490614
> 
> 赞同：5
> 
> 时间：2013-03-19T02:39:55.350
> 
> 标签：r, datetime

我有超过 3 年的数据。对于每一年，我都想找到对应于当年 1 月 1 日的日子。例如：

```
> x <- c('5/5/2007','12/31/2007','1/2/2008')
> #Convert to day of year (julian date) –
> strptime(x,"%m/%d/%Y")$yday+1
[1] 125 365   2 
```

我想知道如何做同样的事情，但随着时间的推移。但我仍然得到了一天而不是时间。谁能建议用日期和时间找到朱利安日期的更好方法是什么？

```
> x1 <- c('5/5/2007 02:00','12/31/2007 05:58','1/2/2008 16:25')
> #Convert to day of year (julian date) –
> strptime(x1,"%m/%d/%Y %H:%M")$yday+1
[1] 125 365   2 
```

而不是这个结果，我想要十进制天的输出。例如，第一个例子是`125.0833333`等等。

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T02:57:26.897

您是否希望将一天 + 一天的数字部分作为输出？如果是这样，这样的事情将起作用：

```
test <- strptime(x1,"%m/%d/%Y %H:%M")

(test$yday+1) + (test$hour/24) + (test$min/(24*60))
#[1] 125.083333 365.248611   2.684028 
```

尽管这符合您的要求，但我认为删除`+1`可能更有意义：

```
(test$yday) + (test$hour/24) + (test$min/(24*60))
#[1] 124.083333 364.248611   1.684028 
```

虽然我的感觉很刺痛，但 Dirk 会出现并向我展示如何使用`POSIXct`日期/时间表示来做到这一点。

这是使用基本函数尝试这样的答案：

```
mapply(julian, as.POSIXct(test), paste(format(test,"%Y"),"01","01",sep="-"))
#[1] 124.083333 364.248611   1.684028 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-19T03:08:18.123

您还可以使用`POSIXct`和`POSIXlt`表示以及`firstof`来自 的函数`xts`。

```
x1 <- c("5/5/2007 02:00", "12/31/2007 05:58", "1/2/2008 16:25")
x1
## [1] "5/5/2007 02:00"   "12/31/2007 05:58" "1/2/2008 16:25"  

y <- as.POSIXlt(x1, format = "%m/%d/%Y %H:%M")

result <- mapply(julian, x = as.POSIXct(y), origin = firstof(y$year + 1900))

result
## [1] 124.083333 364.248611   1.684028 
```

如果你不想使用 xts 那么也许是这样的

```
result <- mapply(julian, 
                 x = as.POSIXct(x1, format = "%m/%d/%Y %H:%M", tz = "GMT"),
                 origin = as.Date(paste0(gsub(".*([0-9]{4}).*", "\\1", x1), 
                                         "-01-01"),
                                  tz = "GMT"))

result
## [1] 124.083333 364.248611   1.684028 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-17T16:42:05.223

如果您想反其道而行之（将一年中的某一天转换为日期和时间），您可以使用这个小功能：

> doy2date = function(mydoy){
> mydate = as.Date(mydoy, origin = "2008-01-01 00:00:00", tz = "GMT")
> dech = (mydoy - as.integer(mydoy)) * 24
> myh = as.integer(dech)
> mym = as.integer( (dech - as.integer(dech)) * 60)
> mys = round(I( (((dech - as.integer(dech)) * 60) - mym ) * 60), digits=0 )
> posixdate = as.POSIXct(paste(mydate, " ", myh,":",mym,":",mys, sep=""), tz = "GMT")
> 返回( posixdate)
> }

例如，如果您尝试：

> doy2date(117.6364)

该函数将返回“2008-04-27 15:16:25 GMT”作为 POSIXct。

# curve - RenderMan 中描述的 RiBasis 是什么意思？

> ID：15490617
> 
> 赞同：0
> 
> 时间：2013-03-19T02:40:09.000
> 
> 标签：curve, 3dsmax, nurbs, renderman

我正在开发 3ds Max 的插件。在这个插件中，我将几何信息导出到可以由 RenderMan 渲染器渲染的 .rib 文件中。当我将 nubrs 曲线的数据导出到 RiBasis 和 RiCurve 描述的 .rib 文件时。我在 RiBasis 中使用了 RtBsplineBasis，但我得到了错误的结果，即渲染曲线比 3ds Max 渲染器的结果短。然后我重新打印第一个和最后一个控制顶点，曲线足够长，但它的形状有点不同。谁能告诉我我怎么得到错误的结果或者RiBasis是什么意思？如何获得正确的 RiBasis？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:22:21.057

RiCurve 绘制三次样条。控制点不是唯一决定曲线的；您还需要*基础*，它表示为 4x4 矩阵 - 一个矩阵给出 B 样条、Bezier、Catmull-Rom 等所需的系数，当然您也可以自己提供一些矩阵一种不完全符合标准 3 或 4 的混合插值法。基础决定了样条曲线的特性——曲线是保证通过控制点还是仅仅是近似值，连续性程度，“紧张”等。

在“The RenderMan Companion”的一个附录中有一个很好的讨论，包括不同基矩阵如何影响插值的数字示例。

听起来您要求 B 样条基础，它是近似的（不是插值的）并且在一阶和二阶导数中都是连续的。也许这不是你的想法。很难说，因为您没有描述您希望的样条曲线的属性。

顺便说一句，用非有理三次逼近任意 NURBS 曲线并不总是会给你一个精确的匹配。还有一点要记住。

# java - 如何从批处理程序或 java 发送电子邮件

> ID：15490620
> 
> 赞同：-1
> 
> 时间：2013-03-19T02:40:19.647
> 
> 标签：java, batch-file

我正在尝试制作一个防病毒备份系统，我希望该程序在该用户创建一个帐户后向该用户发送一封电子邮件，其中包含警告和系统备份的副本。有没有关于用java发送电子邮件的好教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:59:29.413

如果你想批量发送，有很多方法可以做到这一点。

这是windows的一种方法：

[http://www.howtogeek.com/120011/stupid-geek-tricks-how-to-send-email-from-the-command-line-in-windows-without-extra-software/](http://www.howtogeek.com/120011/stupid-geek-tricks-how-to-send-email-from-the-command-line-in-windows-without-extra-software/)

这是linux的一种方法：

[http://www.simplehelp.net/2008/12/01/how-to-send-email-from-the-linux-command-line/](http://www.simplehelp.net/2008/12/01/how-to-send-email-from-the-linux-command-line/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:07:17.393

这是示例：使用 java-mail-1.4.4.jar

```
package net.spring.mail;

import java.io.IOException; 
import java.util.Date; 
import java.util.Properties; 

import javax.mail.Authenticator; 
import javax.mail.Message; `enter code here`
import javax.mail.MessagingException; 
import javax.mail.Multipart; 
import javax.mail.PasswordAuthentication; 
import javax.mail.Session; 
import javax.mail.Transport; 
import javax.mail.internet.AddressException; 
import javax.mail.internet.InternetAddress; 
import javax.mail.internet.MimeBodyPart; 
import javax.mail.internet.MimeMessage; 
import javax.mail.internet.MimeMultipart; 
/**
 * javaMail发送邮件
 * 支持多邮件发送
 * @author fazhen.zheng
 *
 */
public class EmailAttachmentSender {

    public static void sendEmailWithAttachments(String host, String port,
            final String userName, final String password, String toAddress,
            String subject, String message, String[] attachFiles)
            throws AddressException, MessagingException {
        // sets SMTP server properties
        Properties properties = new Properties();
        properties.put("mail.smtp.host", host);
        properties.put("mail.smtp.port", port);
        properties.put("mail.smtp.auth", "true");
        properties.put("mail.smtp.starttls.enable", "true");
        properties.put("mail.user", userName);
        properties.put("mail.password", password);

        // creates a new session with an authenticator
        Authenticator auth = new Authenticator() {
            public PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(userName, password);
            }
        };
        Session session = Session.getInstance(properties, auth);

        // creates a new e-mail message
        Message msg = new MimeMessage(session);

        msg.setFrom(new InternetAddress(userName));
        InternetAddress[] toAddresses = { new InternetAddress(toAddress) };
        msg.setRecipients(Message.RecipientType.TO, toAddresses);
        msg.setSubject(subject);
        msg.setSentDate(new Date());

        // creates message part
        MimeBodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setContent(message, "text/html");

        // creates multi-part
        Multipart multipart = new MimeMultipart();
        multipart.addBodyPart(messageBodyPart);

        // adds attachments
        if (attachFiles != null && attachFiles.length > 0) {
            for (String filePath : attachFiles) {
                MimeBodyPart attachPart = new MimeBodyPart();

                try {
                    attachPart.attachFile(filePath);
                } catch (IOException ex) {
                    ex.printStackTrace();
                }

                multipart.addBodyPart(attachPart);
            }
        }

        // sets the multi-part as e-mail's content
        msg.setContent(multipart);

        // sends the e-mail
        Transport.send(msg);

    }

    /**
     * 测试发带附件邮件
     */
    public static void main(String[] args) {
        // 发件人信息
        String host = "smtp.163.com";
        String port = "25";
        String mailFrom = "example@163.com";
        String password = "passwrod";

        // 收件人信息
        String mailTo = "example@ehualu.com";
        String subject = "javaMail";
        String message = "这是一封由javaMail自动发出的测试邮件，请勿回复。";

        // 附件
        String[] attachFiles = new String[1];
        attachFiles[0] = "c:/EHL_SysManager.jar";
        try {
            sendEmailWithAttachments(host, port, mailFrom, password, mailTo,
                    subject, message, attachFiles);
            System.out.println("邮件发送成功.");
        } catch (Exception ex) {
            System.out.println("发送失败");
            ex.printStackTrace();
        }
    }
} 
```

# asp.net - 根据列的值从列表视图中删除行

> ID：15490623
> 
> 赞同：2
> 
> 时间：2013-03-19T02:40:59.147
> 
> 标签：asp.net

我在列表视图中有一个数据表。

ID TelcoName Reload Value(RM) 数量 Total(RM) 1 Maxis 5 1 5 Delete 2 Digi 5 1 5 Delete

这基本上就是我的桌子的样子。我的html代码是这样的：

```
<asp:ListView ID="ListView1" runat="server" OnSorting="ListView1Sorting" OnItemCommand="ListView1_ItemCommand">
                    <LayoutTemplate>
                            <table border="0" cellpadding="1">
                                <tr style="background-color:#FFFFFF">
                                    <th align="center"><asp:Label ID="lblId" runat="server">Id &nbsp;</asp:Label></th>
                                    <th align="center"><asp:Label ID="lblName" runat="server">TelcoName&nbsp;</asp:Label></th>
                                    <th align="center"><asp:Label ID="lblReloadValue" runat="server">Reload Value(RM)&nbsp;</asp:Label></th>
                                    <th align="center"><asp:Label ID="lblQuantity" runat="server">Quantity&nbsp;</asp:Label></th>
                                    <th align="center"><asp:Label ID="lblTotal" runat="server">Total (RM)&nbsp;</asp:Label></th>                                    
                                    <th></th>
                                </tr>
                               <tr id="itemPlaceholder" runat="server"></tr>
                            </table>
                        </LayoutTemplate>
                        <ItemTemplate>
                        <tr>
                        <td align="center"><asp:Label runat="server" ID="lblId"><%#Eval("ID") %></asp:Label></td>
                        <td align="center"><asp:Label runat="server" ID="lblTelcoName"><%#Eval("TelcoName") %></asp:Label></td>
                        <td align="center"><asp:Label runat="server" ID="lblReloadValue"><%#Eval("ReloadValue")%></asp:Label></td>
                        <td align="center"><asp:Label runat="server" ID="lblQuantity"><%#Eval("Quantity")%></asp:Label></td>
                        <td align="center"><asp:Label runat="server" ID="lblTotal"><%#Eval("Total")%></asp:Label></td>
                        <td align="center"><asp:LinkButton ID="lnkDelete" runat="server" CommandName="Sort" CommandArgument="Delete">Delete</asp:LinkButton></td>
                        </tr>
                        </ItemTemplate>
                    </asp:ListView> 
```

这是我删除的背后代码：

Protected Sub ListView1_ItemCommand(ByVal sender As Object, ByVal e As ListViewCommandEventArgs) If (e.CommandName) = "Sort" Then Dim txteno As Label = DirectCast(e.Item.FindControl("ID"), Label) Dim deletecommand As String = “从 dt 中删除 ID =” & Convert.ToInt32(txteno.text) Session(“dt”).DeleteCommand = deletecommand End If End Sub

我的问题是我无法获得用户选择的行的 ID。“ID”是第一列的名称，但是当我运行网站时，此语句不返回任何内容。

Dim txteno As Label = DirectCast(e.Item.FindControl("ID"), Label)

我的问题是如何检索用于删除数据的列（“Id”）的值？我四处打听，有人建议我使用 e.item.DataItemIndex 但我无法在任何地方找到此命令。知道如何解决这个问题吗？

这是刚刚添加的

Dim dt As New DataTable Dim i = 0 Dim ID As New DataColumn("ID") dt.Columns.Add(ID) Dim TelcoName As New DataColumn("TelcoName") dt.Columns.Add(TelcoName) Dim ReloadValue As New DataColumn ("ReloadValue") dt.Columns.Add(ReloadValue) Dim Quantity As New DataColumn("Quantity") dt.Columns.Add(Quantity) Dim Total As New DataColumn("Total") dt.Columns.Add(Total) ListView1 .DataSource = dt ListView1.DataBind() Session("dt") = dt

绑定到列表视图后，我是否需要删除数据表的名称，以便我可以将其用作 sql 语句的引用，或者我可以将其保留为 dt 并在 sql 语句中，当我引用 dt 时，它引用到列表视图中的表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:04:02.213

编辑：分别解决两个问题 - 一个是无法抓取控制句柄，另一个问题是从 DataTable 中删除

**控制参考**

如果您尝试使用以下方法控制控件：

```
Dim txteno As Label = DirectCast(e.Item.FindControl("ID"), Label) 
```

然后我认为控件 ID 不正确，因为在您将其定义为“lblId”的标记中。所以也许尝试：

```
 Dim txteno As Label = DirectCast(e.Item.FindControl("lblId"), Label) 
```

另外，我不确定它会产生什么影响，但我会给 LayoutTemplate 中的控件（所以我猜你的 ListView 的标题）与 ItemTemplate 中的控件不同的 ID，如果只是为了维护/清洁，如果没有别的.

标签也应该像这样绑定：

```
<asp:Label id="lblId" runat="server" Text='<%# Eval("ID") %>'></asp:Label> 
```

这样就可以在代码隐藏中检索文本。

**从数据表中删除**

根据发帖者的评论，DataTable 的数据并非来自数据库。

由于您没有连接回数据库，因此您不必编写 SQL 来从 DataTable 中删除项目。

看起来您将 DataTable 存储在会话中。而且你完全在代码中绑定。因此，您可以在 ItemCommand 方法中执行的操作是：

1.  遍历数据表以找到要删除的项目
2.  删除项目（你可以参考，例如，[这个](http://forums.asp.net/t/1300651.aspx)论坛帖子）
3.  从 DataTable 中删除项目后，将其重新绑定到列表视图。作为一个似乎处于类似情况的人的例子，请看[这个](https://stackoverflow.com/questions/2723307/how-to-delete-a-item-in-a-asp-net-listview-and-persist-the-datasource)

HTH，弥敦道

# c++ - 指针赋值与指针算术

> ID：15490624
> 
> 赞同：1
> 
> 时间：2013-03-19T02:41:11.633
> 
> 标签：c++, c, arrays, performance, pointers

我正在处理一个大小从可能非常小到数亿不等的数据集。

使用连续数据集时，将新值分配给指针与使用指针算术前进到我想要的位置时，功能或性能是否有任何差异？

例如，当进行到数据的下一个成员时，我可以简单地将我的指针加一，或者将我的工作指针分配给那个内存地址（假设我出于某种原因已经有了它）。

使用 Visual Studio 2012 作为编译器在 Windows 下运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:44:07.833

至于性能，根据 Andrei Alexandrescu 最近的说法（[请参阅此链接](http://www.facebook.com/notes/facebook-engineering/three-optimization-tips-for-c/10151361643253920)，有一个链接指向他在那里发表的精彩演讲的视频），对于现代机器上的连续访问，您应该更喜欢对数组进行索引而不是指针算法。

然而，优化有一个永恒的规则：**测量它**！:)

没有更多信息，我无话可说：除了“不”之外的功能差异。

# java - 具有不同分辨率的 Android 全屏 2D 游戏

> ID：15490625
> 
> 赞同：0
> 
> 时间：2013-03-19T02:41:23.827
> 
> 标签：java, android, resolution

这是我的问题。如果我对游戏进行编程以占用屏幕尺寸，例如 640x480，它将在 640x480 设备上正常工作。但是，当它在更大的设备（例如：平板电脑）1280x960 上播放时，游戏只会出现在左上角。

我知道我可以让游戏检查屏幕大小，然后使用 switch 语句使用不同的 DPI 精灵，并将大量乘法应用于精灵的 x、y 坐标，但是必须有更好的方法。我已经在精灵绘图上投入了大量的精力，这很荒谬。

我该如何解释这一点，以确保我的游戏可以在各种 Android 设备上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:16:53.800

我不太确定这个，但你可以试试。将其添加到清单中 /> 标记之后。

```
 <support-screens
       android:xlargeScreens="true"
       android:largeScreens="true"
       android:normalScreens="true"
       android:smallScreens="true"
   /> 
```

# opengl - 将数据打包到 OpenGL 3D 数组中的策略

> ID：15490627
> 
> 赞同：2
> 
> 时间：2013-03-19T02:41:31.117
> 
> 标签：opengl, 3d, glsl, textures, octree

我正在 OpenGL 4.3.0 中实现体素光线投射器。我有一个基本版本，我将浮点值的 256x256x256 体素数据集存储在相同尺寸的 3D 纹理中。

但是，我想使用八叉树制作一个 LOD 方案。我将数据存储在主机端的一维数组中。根的索引为 0，根的子节点的索引为 1-8，下一级的索引为 9-72，依此类推。八叉树总共有 9 个级别（最后一个级别具有完整的 256x256x256 分辨率）。因为八叉树总是满的，所以结构是隐式的，不需要存储指针，每个体素只有一个浮点值。我已经设置好了一维索引和遍历算法。

我的问题是我不知道如何将它存储在纹理中。GL_TEXTURE_MAX_SIZE 太小（16384），无法使用我已经找到索引的一维数组方法。我需要将它存储在 3D 纹理中，我不知道当我尝试将我的 1D 数组塞入其中时会发生什么，也不知道如何选择尺寸和 1D->3D 转换方案以免浪费空间或时间。

我的问题是，是否有人有一个很好的策略来将整个八叉树结构存储在一个 3D 纹理中，在这种情况下如何为它选择维度和索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:20:16.517

首先是关于直接移植一维阵列解决方案的一些话：

首先，正如*Mortennobel*在他的评论中所说，最大纹理大小很可能*不是* `3397`，这只是枚举值（定义该值的*opengl.h*`GL_MAX_TEXTURE_SIZE`标头应该如何知道您的硬件和驱动程序限制？）。要从您的实现中获取实际值，请使用. 但即便如此，这对你来说也可能太小了（可能是 8192 或类似的东西）。*`int size; glGetIntegerv(GL_MAX_TEXTURE_SIZE, &size);`*

 *但是要将更大的一维数组放入着色器中，您可以使用[缓冲区纹理](http://www.opengl.org/wiki/Buffer_Texture)（自 OpenGL 3 以来它是核心，因此存在于 DX10 类硬件上）。这些是从标准 OpenGL 缓冲区对象中获取数据的纹理。但是这些纹理始终是一维的，由整数 texCoords（可以说是数组索引）访问而不是过滤。所以它们实际上不是真正的纹理，而是一种将缓冲区对象作为着色器内的线性 1D 数组访问的方法，这非常适合您的需求（实际上比普通过滤和标准化的 1D 纹理更适合） .

* * *

**编辑：**您可能还考虑像以前一样使用直接的 3D 纹理，但是对于层次结构的较高部分使用自制的 mipmap 级别（是的，3D 纹理也可以有 mipmap）。所以 mipmap 级别 0 是精细的 256 网格，级别 1 包含较粗的 128 网格，...但是要有效地使用此数据结构，您可能需要在着色器中进行显式 LOD 纹理访问（使用`textureLod`，或者甚至更好地不过滤，`texelFetch`)，这也需要 OpenGL 3。

* * *

**编辑：**如果您不支持 OpenGL 3，我仍然不建议使用 3D 纹理将您的 1D 数组放入，而是使用 2D 纹理，就像*Rahul*在他的回答中建议的那样（1D-2D 索引魔法不是真的那么难）。但是如果你有 OpenGL 3，那么我要么使用缓冲区纹理直接使用你的线性 1D 数组布局，要么使用带有 mipmaps 的 3D 纹理进行直接八叉树映射（或者可能会提出一个完全不同且更复杂的数据结构首先是体素网格）。

* * *

**编辑：**当然，完全细分的八叉树并没有真正利用八叉树的内存节省特性来发挥其优势。对于将八叉树打包到 3D 纹理中的更动态和内存效率更高的方法，您还可以从[这篇关于八叉树纹理的经典 GPU Gems 文章中获得](http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter37.html)一些灵感。它们基本上将所有八叉树单元作为 2x2x2 网格任意存储到 3D 纹理中，使用内部节点的值作为指向该纹理中子节点的指针。当然，现在您可以对此进行各种改进（因为您似乎也希望内部节点存储数据），例如将整数与浮点数一起存储并使用漂亮的位编码等，但基本思想非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:38:38.143

这是一个解决方案草图/大纲：

使用 2D 纹理来存储 256x256x256（它将是 4096x4096——我希望您使用的是支持 4k x 4k 纹理的 OpenGL 平台）。

现在以行优先顺序存储您的一维数据。在您的光线投射器中，只需进行行/列转换（从 1D 地址到 4k x 4k）并查找您需要的值。

我相信你会自己弄清楚其余的:)*

# java - Java中的2D平铺游戏优化

> ID：15490628
> 
> 赞同：1
> 
> 时间：2013-03-19T02:41:44.520
> 
> 标签：java, 2d, storage, tile

我正在用纯 Java 开发一个 2d 自上而下的游戏，直到现在我已经有了一个噪声映射系统，它可以像 Minecraft 一样与大块瓷砖（和实体）一起工作。

我存储图块的方式是创建一个`int[s * s]`数组，其中`s`块的一侧具有的大小（以图块为单位）。然后，我有一个 Tiles 的静态数组，其中包含游戏中每个可能的 Tile，并用整数索引。这些是存储在`int[s * s]`每个块中的整数。现在，我希望能够覆盖图块，例如不可见的生成图块、墙壁、树木和过渡图块（例如当草变成沙子时：沙子上应该有草的边界，这将是一个新图块）。

问题是块的每个坐标中只能存储一个整数。另一种方法是将瓦片的实际实例放在块内，并使覆盖的瓦片指向它们正下方的瓦片（如堆栈），但我认为这是一种不好的方法。我测试的另一种方法是制作一组瓷砖列表，这也很糟糕。

哪个是实现这一目标的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:53:59.427

通常，您会将磁贴和对象的存储分开。

*   您将有一个`int [w*h]`或类似的瓷砖本身，每平方只允许一个瓷砖。
*   另外，您可以`ArrayList [w*h]`在每个正方形中存储一个实体列表。该数组将包含`null`空方格，因此大多数方格（其中没有实体）的额外存储成本是最小的。

当然还有其他方法，但这具有既简单又非常有效的优点。

唯一真正的缺点是您必须编写单独的代码来处理图块和实体 - 但由于您通常以不同的方式处理图块和实体，因此这不太可能是一个大问题。

# c# - 为什么我在实现接口时不能使用兼容的具体类型

> ID：15490633
> 
> 赞同：12
> 
> 时间：2013-03-19T02:42:23.963
> 
> 标签：c#, class, interface

我希望能够做这样的事情：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Test
{
    public interface IFoo
    {
        IEnumerable<int> integers { get; set; }
    }

    public class Bar : IFoo
    {
        public List<int> integers { get; set; }
    }
} 
```

为什么编译器会抱怨..？

```
Error   2   'Test.Bar' does not implement interface member 'Test.IFoo.integers'. 'Test.Bar.integers' cannot implement 'Test.IFoo.integers' because it does not have the matching return type of 'System.Collections.Generic.IEnumerable<int>'. 
```

我知道接口说 IEnumerable 并且该类使用 List，但是 List*是*IEnumerable .....

我能做些什么？我不想在类中指定 IEnumerable，我想使用实现 IEnumerable 的具体类型，例如 List...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T02:45:24.193

这是一个类型协方差/逆变问题（参见[http://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)#C.23](http://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)#C.23)）。

有一种解决方法：使用显式接口，如下所示：

```
public class Bar : IFoo {

    private IList<int> _integers;

    IEnumerable<int> IFoo.integers {
        get { return _integers };
        set { _integers = value as IList<int>; }
    }

    public IList<int> integers {
        get { return _integers; }
        set { _integers = vale; }
    }
} 
```

请注意，`integers`应该是 TitleCased 以符合 .NET 的准则。

希望你能在上面的代码中看到问题：只对访问器`IList<int>`兼容，对设置不兼容。`IEnumerable<int>`如果有人打电话`IFoo.integers = new Qux<int>()`（where`Qux : IEnumerable<int>`但**不是** `Qux : IList<int>`）会发生什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T02:46:37.297

尽管 List 实现了 IEnumerable ，但这不是接口的工作方式。该接口准确地指定了哪些类型需要为属性公开。如果您创建了一个通用接口，例如

```
public interface IFoo<T> where T : IEnumerable<int>
{
    T integers { get; set; }
} 
```

然后，您可以使用`IFoo<List<int>>`它以您期望的方式实现它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T02:47:28.080

除非您在幕后进行，否则您将无法使用具体类型。问题是您可以同时获取和设置属性。

您的界面指定该属性的类型为`IEnumerable<int>`。`HashSet<int>`实现`IEnumerable<int>`。这意味着以下应该可以正常工作：

```
IFoo instance = new Bar();
instance.integers = new HashSet<int>(); 
```

但是由于您尝试使用具体类型来实现接口`List<int>`，因此分配无法正常工作。

假设您不需要经常重新分配集合，最简单的解决方法是只为集合指定一个 getter：

```
public interface IFoo
{
    IEnumerable<int> Integers { get; }
}

public class Bar
{
    public List<int> Integers { get; private set; }

    public Bar(List<int> list)
    {
        Integers = list;
    }
} 
```

# haskell - 如何使用 Snap 检查客户端证书

> ID：15490636
> 
> 赞同：26
> 
> 时间：2013-03-19T02:43:14.967
> 
> 标签：haskell, ssl, haskell-snap-framework, happstack

我知道它很少使用，但是可以在 Snap 中访问客户端证书吗？

如果没有，是否可以使用不同的网络堆栈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-11T15:04:30.703

这在 Snap 的软件包中对您不可用`snap-server`，我假设这是您运行服务器的方式。

Buuuuut 构建起来并不难，无论是通过分叉还是作为一个单独的模块（不过，您必须复制一些代码，因为您需要的一些内部值不会被导出）。`bindHttps`，[位于 Snap.Internal.Http.Server.TLS 中](https://github.com/snapframework/snap-server/blob/f2c4ced4f3414a3a2e7eaf422c5002a8decb2512/src/Snap/Internal/Http/Server/TLS.hs#L92)，是您要定位的目标。此函数主要是对从库中调用[OpenSSL.Session](https://hackage.haskell.org/package/HsOpenSSL-0.11.1.1/docs/OpenSSL-Session.html)`HsOpenSSL`的包装器，它本身是对 OpenSSL 库的松散包装器。

幸运的是，OpenSSL 完全支持客户端证书。您只需将[验证模式](http://www.openssl.org/docs/manmaster/ssl/SSL_CTX_set_verify.html)设置为`SSL_VERIFY_PEER`. 还有其他旋钮你也可以摆弄。您还必须确保安装证书链以实际验证客户端证书。信任链和所有爵士乐。作为参考，请参阅[nginx 是如何做到](https://github.com/nginx/nginx/blob/7cee215f15cf91e40fe5709485e60655292e2c67/src/event/ngx_event_openssl.c#L532)的。

更好的是，这个函数被[暴露](https://hackage.haskell.org/package/HsOpenSSL-0.11.1.1/docs/OpenSSL-Session.html#t:VerificationMode)为`HsOpenSSL`function `contextSetVerificationMode :: SSLContext -> VerificationMode -> IO ()`。您会注意到`ctx :: SSLContext`Snap 的定义中存在`bindHttps`. 您所要做的就是复制或分叉该模块并介绍您的调用。

它看起来像这样（未经验证的代码警报）：

```
± % diff -u /tmp/{old,new}
--- /tmp/old    2016-04-11 11:02:42.000000000 -0400
+++ /tmp/new    2016-04-11 11:02:56.000000000 -0400
@@ -19,6 +19,7 @@

      ctx <- SSL.context
      SSL.contextSetPrivateKeyFile ctx key
+     SSL.contextSetVerificationMode ctx (SSL.VerifyPeer True True (Just (\_ _ -> return True)))
      if chainCert
        then SSL.contextSetCertificateChainFile ctx cert
        else SSL.contextSetCertificateFile ctx cert 
```

如果没有客户端证书，第一个布尔值告诉 OpenSSL 失败。第二个布尔值告诉 OpenSSL 客户端证书仅在第一次请求时需要，在重新协商时不再需要。第三个值是回调。我认为正确的做法是在回调中返回 True 。无论如何，这就是[nginx 所做](https://github.com/nginx/nginx/blob/7cee215f15cf91e40fe5709485e60655292e2c67/src/event/ngx_event_openssl.c#L705)的。

# c++ - 多维动态内存向量 c++

> ID：15490641
> 
> 赞同：0
> 
> 时间：2013-03-19T02:43:41.857
> 
> 标签：c++, vector, dynamic-memory-allocation

我用 C++ 做这个程序。我想建立一个随机行和 3 列的表。当我编译时没有错误，但我执行程序什么也不做，什么也不写。你能帮我找出我的错误吗？

谢谢

```
int main(){
srand(time(0));
int project = (rand() % 5) + 1 ;   
std::cout << "The Number is " << project << "." << std::endl;

vector<vector<int> > P(project, vector<int>(3));

for(int i = 0; i <= P.size(); ++i){
  for(int j = 0;j <= P[i].size();++j){
        P[i][j] = (rand() % 50)+10;
        P[i][j] = (rand() % 2)+1;
        P[i][j] = (rand() % 50)+1;
  }
 }

 for(int a = 0;a <= P.size();++a){           
  for(int j = 0;j <= P[a].size();++j){
      std::cout << "Project "<< a <<" :"<< P[a][j] ;
        std::cout << P[a][j] <<" , ";
        std::cout << P[a][j] <<" ."<< std::endl;  
 }
 } 
```

我遇到另一个问题，它为所有列写入相同的值。所以我需要在我的循环中改变一些东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:50:56.633

有几个问题，您应该使用`size_t`for 循环而不是循环中`int`的一个。例如，它应该`i < P.size()`代替`i <= P.size()`：

```
for(size_t i = 0; i < P.size(); ++i)
{
  for(size_t j = 0;j < P[i].size();++j)
  {
    P[i][j] = (rand() % 50)+10;
    P[i][j] = (rand() % 2)+1;
    P[i][j] = (rand() % 50)+1;
  }
 } 
```

另外，你的意思是写三遍同一个条目，那是什么目的？此外，您还将输出相同的条目 3 次。我修改为只输出一次：

```
for(size_t a = 0;a < P.size();++a)
{           
 for(size_t j = 0;j < P[a].size();++j)
 {
   std::cout << "Project "<< a <<" :"<< P[a][j] << std::endl;  
 }
} 
```

另外，如果您`using namespace std`的代码中有，我建议您不要这样做。只需`std::vector`明确使用。

# seo - 永久链接的 YOAST SEO 设置

> ID：15490644
> 
> 赞同：0
> 
> 时间：2013-03-19T02:44:00.850
> 
> 标签：seo, wordpress

我正在使用 YOAST seo 插件，我发现了一个小问题，在片段 URL 中它显示 URL 为

abcd.com/p=32?。

为什么它不像在搜索引擎中那样显示完整的 URL？如何更改此永久链接我需要类似的东西

abcd.com/10/22/how-to-run.html。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:58:35.037

跳过 SEO Yoast 设置。反而：

1.  转到设置>>永久链接
2.  使用其中一种常用设置，具体取决于您喜欢哪一种
3.  或者使用自定义结构，例如 /%category%/%postname%/

这将改变你的永久链接。至于提供静态 html 页面，您需要安装缓存插件，例如 W3 Total Cache、WP Super Cache 或其他东西……（还有其他缓存插件，例如 DB Cache Reloaded Fix 和 Hyper Cache，但我对他们不太熟悉）。

# javascript - 如何一次滚动 1 个元素（阻止自由滚动）

> ID：15490648
> 
> 赞同：1
> 
> 时间：2013-03-19T02:44:33.710
> 
> 标签：javascript, css, scroll, scrollbar

滚动条逐个像素地自由移动，我不需要。我需要做的是滚动条向右或向左滚动表 1 元素。无论我尝试学习什么都不应该划分元素。是否可以制作一个滚动条，让我们一次说 200 像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:30:40.810

利用`scrollBy(xnum,ynum)`

看这个

[http://www.w3schools.com/jsref/met_win_scrollby.asp](http://www.w3schools.com/jsref/met_win_scrollby.asp)

**更新**

使用这个：http: [//james.padolsey.com/javascript/special-scroll-events-for-jquery/](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/)

我部分能够做到。它适用于鼠标。它可能会得到改进。

[http://jsfiddle.net/btevfik/EZpdA/](http://jsfiddle.net/btevfik/EZpdA/)

# c - 用户输入文件

> ID：15490649
> 
> 赞同：0
> 
> 时间：2013-03-19T02:44:35.647
> 
> 标签：c, file, text, io

我正在创建一个程序，该程序应该创建用户输入的人员列表结构；我遇到的唯一问题是让用户输入数据出现在文本文件中。有人知道怎么做吗？这是代码：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

struct person{
    char name[20];
    int age;
    struct person *next_ptr;
    } PERSON;

int main (void){

struct person PERSON;

FILE *fp;
char ans, ch;
int ppl=0;

fp=fopen("person_struct", "w");

if(fp != NULL){

while(ppl<25){

printf("Would you like to add a person to the list? [y/n]  ");
scanf("%c", &ans);

if(ans == 'y') {
    printf("\nEnter a name:\n");
    scanf("%s", PERSON.name);
    fprintf(fp, "%s",PERSON.name);  
    printf("\nEnter age:\n"); 
    scanf("%i", &PERSON.age);
    fprintf(fp, "  %i\n", PERSON.age);
} 
else {
  ppl=25;       
}

ppl++;
}
fclose(fp);
}   
printf("\n\n\n");
system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T02:50:27.673

您的 scanf 语句是错误的，您在int`&`之前忘记了 & 运算符`PERSON.age`

```
scanf("%i", PERSON.age);
           ^ & missing 
```

正确的是：

```
scanf("%i", &PERSON.age); 
```

您的代码中有两个 scanf 雄蕊，用于从用户一输入字符串以扫描名称。

```
scanf("%s", PERSON.name); 
```

这是正确的，不需要`&`之前的字符串。但是年龄是`int`并且要扫描 int.float，您需要`&`在变量之前添加这就是为什么`&`在 PERSON.age 之前添加＆符号。参考：[scanf](http://pubs.opengroup.org/onlinepubs/007904975/functions/fscanf.html)

**第二：**

`fputs(PERSON.age, fp);`fputs 的错误语法是：

```
int fputs( const char *str, FILE *stream );
                   ^ you are passing int 
```

第一个论点应该是`const char*`，但你正在通过`int`

```
fputs(PERSON.age, fp);
       ^ wrong , age is int not char* 
```

当您需要格式化输入/输出时更喜欢 printf 和 scanf 函数，我的建议是更改您的读/写，例如：（*阅读评论*）

```
printf("Enter a name:\n"); 
scanf("%s", PERSON.name);  // here is No & because `name` is string 
scanf("%i", &PERSON.age);  // age is `int` so & needed 
fprintf(fp,"%s %i\n",PERSON.name, PERSON.age); 
```

**编辑**：因为您评论过，您的代码在这些更正后可以正常工作，请参阅

```
$ gcc x.c -Wall
$ ./a.out 
Would you like to add a person to the list? [y/n]y
Enter a name:
yourname
14
Would you like to add a person to the list? [y/n]y
Enter a name:
firendName
15
Would you like to add a person to the list? [y/n]n
sh: 1: pause: not found
$ cat person_struct.txt
yourname 14 
firendName 15 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:06:04.730

除了 Grijesh 的回答：

请解释`scanf("%s", &ans);`。你可以在ans中存储多少个字符？字符串“y”需要存储多少个字符？验证你的信念：`printf("sizeof ans: %zu\n" "sizeoof \"y\": %zu\n", sizeof ans, sizeof "y");`

也许你的意思是：`if (scanf("%c", &ans) != 1) { /* assume stdin has closed or reached EOF */ }`。注意`%c`，*它只会将一个字符读入 ans*。

或者，如果您将 ans 更改为 an `int`，您可以使用：`ans = getchar();`

编辑：简而言之，我认为你的循环应该是这样的：

```
for (size_t ppl = 0; ppl < 25; ppl++){
    int ans;

    printf("Would you like to add a person to the list? [y/n]");
    do {
        ans = getchar();
    while (ans >= 0 && isspace(ans));

    if (ans != 'y') {
        break;
    }

    printf("Enter a name:\n");
    if (scanf("%s", PERSON.name) != 1 || scanf("%i", &PERSON.age) != 1) {
        break;
    }
    fprintf(fp, "%s %i\n", PERSON.name, PERSON.age);
} 
```

# android - ListView-删除项形式listView：android

> ID：15490655
> 
> 赞同：0
> 
> 时间：2013-03-19T02:45:27.547
> 
> 标签：android, eclipse

我是 android 新手，我在我的代码中使用 ListView。我的代码如下：

```
import java.util.ArrayList;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.os.Bundle;
import android.util.SparseBooleanArray;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;
import android.content.DialogInterface;

@SuppressLint("NewApi")
public class MainActivity extends Activity 
{
int counter;
ListView listView;
ArrayAdapter <String> adapter;
Button btnAddAgain, btnDeleteSelected;
ArrayList <String>listItems=new ArrayList<String>();

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    counter=0;
    listView=(ListView) findViewById(R.id.myList);
    adapter= new ArrayAdapter<String>(this,android.R.layout.simple_list_item_multiple_choice,listItems);
    listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    listView.setAdapter(adapter);

    btnAddAgain=(Button) findViewById(R.id.addAgain);
    btnAddAgain.setOnClickListener(new View.OnClickListener()
    {
        @Override
        public void onClick(View arg0) 
        {
            listItems.add("Clicked " +counter++);
            adapter.notifyDataSetChanged();
        }
    });

    btnDeleteSelected=(Button) findViewById(R.id.btnDelete);
    btnDeleteSelected.setOnClickListener(new View.OnClickListener()
    {
        @Override
        public void onClick(View arg0) 
        {
            AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
            builder.setMessage("Delete?");
            builder.setTitle("Confirm Action");
            builder.setPositiveButton("Delete", new DialogInterface.OnClickListener() 
            {
                public void onClick(DialogInterface dialog, int id) 
                {
                    SparseBooleanArray checked = listView.getCheckedItemPositions();
                    for (int i = 0; i < listItems.size(); i++)
                    {
                        if (checked.get(i)==true)
                        {
                            listItems.remove(i);
                            adapter.notifyDataSetChanged();
                        }
                    }
                    //checked.clear();
                }
             });
            builder.setNegativeButton("Cancel", null);
            builder.create();
            builder.show();
        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

但删除按钮仅删除 ListView 的第一个元素。有人请帮助我。我正在尝试自己学习android。你的帮助对我学习安卓很有帮助。我在代码中做了哪些更改以从列表中删除选中的项目。多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:19:40.050

`listView.getCheckedItemPositions();`只返回选中的位置

试试这个代码

```
SparseBooleanArray checked = listView.getCheckedItemPositions();
int min = 0;
for(int i=0; i<checked.size();i++){
    int pos = checked.keyAt(i);
    listItems.remove(pos - min);
    min++;
}
adapter.notifyDataSetChanged(); 
```

希望这对您有所帮助；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:05:53.093

如果我没记错的话，当您使用 .get() 时，getCheckedItemPositions() 会为所有值返回 false。你想改用的是checked.valueAt(i)==true 在[SparseBooleanArray 上看这里](http://developer.android.com/reference/android/util/SparseBooleanArray.html)

在您的情况下填充 SparseBooleanArray 的方式似乎没有密钥，这意味着您的所有 .get(key) 都将返回 false ，因为它找不到该项目。相反，您应该只使用 valueAt(int index) 因为您可以使用索引来查找哪些项目为真。

因此，您的代码应如下所示：

```
for (int i = 0; i < listItems.size(); i++)
                    {
                        if (checked.valueAt(i)==true)
                        {
                            listItems.remove(i);
                            adapter.notifyDataSetChanged();
                        }
                    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T03:30:11.307

尝试这个

```
public void onClick(DialogInterface dialog, int id) 
            {
                SparseBooleanArray checked = listView.getCheckedItemPositions();
                int size = listItems.size() - 1;
                for (int i = size; i > -1; i--)
                {
                    if (checked.get(i))
                    {
                        listItems.remove(i);

                    }
                }
                adapter.notifyDataSetChanged();
                //checked.clear();
            }
         }); 
```

# objective-c - ipad objective c 使用 removeFromSuperview 删除 UICollectionViewController 抛出错误

> ID：15490656
> 
> 赞同：0
> 
> 时间：2013-03-19T02:45:31.660
> 
> 标签：objective-c, cocoa-touch, uiview, uiviewcontroller, uicollectionview

所以我正在定制我发现的这个控件，因为我认为它工作得很好，除了我的这个问题：

[http://www.cocoacontrols.com/controls/fsverticaltabbarcontroller](http://www.cocoacontrols.com/controls/fsverticaltabbarcontroller)

每当在侧边栏上点击一个项目时，我想加载一个 UICOllectionViewCONtroller 而不是常规的 ViewController。所以我在选择一个项目时做了这个修改：

```
- (void)setSelectedIndex:(NSUInteger)selectedIndex
{
    NSLog(@"selected Index is %@", [NSNumber numberWithInt:selectedIndex]);
    NSLog(@"_selected Index is %@", [NSNumber numberWithInt:_selectedIndex]);
    NSLog(@"vc counts is %i", [self.viewControllers count]);
    if (selectedIndex != _selectedIndex && selectedIndex < [self.viewControllers count])
    {
        // add new view controller to hierarchy
        UIViewController *selectedViewController = [self getSelectedVCWithSelectedIndex:selectedIndex];

        [self addChildViewController:selectedViewController];
        selectedViewController.view.frame = CGRectMake(self.tabBarWidth,
                                                       0,
                                                       self.view.bounds.size.width-self.tabBarWidth,
                                                       self.view.bounds.size.height);
        selectedViewController.view.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
        [self.view addSubview:selectedViewController.view];

        // remove previously selected view controller (if any)
        if (_selectedIndex != NSNotFound)
        {
            UIViewController *previousViewController = [self.viewControllers objectAtIndex:_selectedIndex];
            NSLog(@"ERROR HERE: remove previous: previousVC = %@", previousViewController);
            [previousViewController.view removeFromSuperview];
            [previousViewController removeFromParentViewController];
        }

        // set new selected index
        _selectedIndex = selectedIndex;

        // update tab bar
        if (selectedIndex < [self.tabBar.items count])
        {
            self.tabBar.selectedItem = [self.tabBar.items objectAtIndex:selectedIndex];
        }

        // inform delegate
        if ([self.delegate respondsToSelector:@selector(tabBarController:didSelectViewController:)])
        {
            [self.delegate tabBarController:self didSelectViewController:selectedViewController];
        }
    }
} 
```

所以我所做的是因为它已经处理了侧边栏上项目的索引号，我只是确保它使用这一行实例化它需要加载的控制器类型，我有 3 个常规 VC 和 1 个集合 VC：

```
UIViewController *previousViewController = [self.viewControllers objectAtIndex:_selectedIndex]; 
```

这是它的样子：

```
-(UIViewController *)getSelectedVCWithSelectedIndex:(NSUInteger)selectedIndex{
    UIViewController *selectedVC = [[UIViewController alloc]init];

    // do a switch case on this.

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    // need to instantiate each and every custom uinav

    switch(selectedIndex){
        case 1:
            selectedVC = [storyboard instantiateViewControllerWithIdentifier:@"UINavAdminCategoryIndexViewControllerID"];
            break;
        case 2:
            selectedVC = [storyboard instantiateViewControllerWithIdentifier:@"UINavAdminParticipantIndexViewControllerID"];
            break;
        case 3:

            selectedVC = [storyboard instantiateViewControllerWithIdentifier:@"UINavAdminTablesIndexCollectionViewControllerID"];
            break;
        case 4:
            selectedVC = [self.viewControllers objectAtIndex:selectedIndex];
            break;
        default:
            break;
    }

    return selectedVC;
} 
```

现在一切都会顺利加载，但是每当我转到**Collection VC**选项卡然后通过转到另一个选项卡离开它时，它都会抛出此错误：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“UICollectionView 必须使用非零布局参数初始化”

当我从超级视图中删除它时，应用程序会在这部分爆炸：

```
[previousViewController.view removeFromSuperview]; 
```

想知道为什么当我所做的只是从堆栈中删除它时它会再次实例化 UIView（这是正确的术语吗？）

编辑：添加了更多代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:33:53.330

所以我终于想通了，希望其他人能发现这很有用。生成 UiCollectionView 时，出于某种原因，您需要启动 Layout。我知道为什么，我会试着找出答案。但这就是导致我找到解决方案的原因：

[http://www.rqna.net/qna/ikvmhu-uicollectionview-must-be-initialized-with-a-non-nil-layout-parameter.html](http://www.rqna.net/qna/ikvmhu-uicollectionview-must-be-initialized-with-a-non-nil-layout-parameter.html)

在调用 FSVerticalTabbar 之前我在主 ViewController 上实例化 CollectionViewController 之前，我只是使用了连接到情节提要上的 ViewController 的类，例如。AdminMainController、AdminEventsCollectionController 等

我基本上只是添加了布局，并在启动时将其用于 UICollectionViewController。它现在删除了 VC，没有任何错误。

```
UICollectionViewFlowLayout *aFlowLayout = [[UICollectionViewFlowLayout alloc] init];
 [aFlowLayout setItemSize:CGSizeMake(200, 140)];
 [aFlowLayout setScrollDirection:UICollectionViewScrollDirectionHorizontal];
myCollectionViewController = [[MyCollectionViewController alloc]initWithCollectionViewLayout:flowLayout]; 
```

# php - htaccess 扩展重写规则正在使用域名但不适用于显示错误 404 的 IP

> ID：15490657
> 
> 赞同：0
> 
> 时间：2013-03-19T02:45:33.317
> 
> 标签：php, apache, .htaccess, rewrite

```
RewriteEngine on
RewriteRule ^(.*)\.txt$ $1.php 
```

这是我对网站特定目录使用的重写规则 http://xxx.yyy.zz.aa /~nishant/directory/.htaccess

将所有 .php 扩展名更改为 .txt

当我查看目录文件时：
http://www.mysite.com/directory/order.txt（它正在工作）但
http://xxx.yyy.zz.aa/~nishant/directory/order.txt（是不工作）

您认为问题是什么，正确的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:51:07.303

这可能是由您的“VirtualHost”引起的 - 配置：/etc/apache2/sites-available/...
详细来说，在包含“VirtualHost xxx.yyy.zz.aa:80”的文件中查找“AllowOverride ...” ' 或 '虚拟主机 *:80'

可能缺少以下语句：

```
<Directory /home/*>
    AllowOverride FileInfo Options
</Directory> 
```

或者：

```
<Directory /home/nishant>
    AllowOverride FileInfo Options
</Directory> 
```

您至少需要“FileInfo”才能使 mod_rewrite 工作。
mod_rewrite 不需要“选项”，但如果您使用 .htaccess，通常需要“选项”。
[http://httpd.apache.org/docs/2.2/en/mod/core.html#allowoverride](http://httpd.apache.org/docs/2.2/en/mod/core.html#allowoverride)

# xml - 如何在 AngularJS 中处理 XML 服务？

> ID：15490658
> 
> 赞同：53
> 
> 时间：2013-03-19T02:45:44.253
> 
> 标签：xml, service, angularjs, backend

我的公司拥有数千个现有的 xml Web 服务，并且开始将 AngularJs 用于新项目。

[http://angularjs.org/](http://angularjs.org/)上的教程专门使用 json 服务。看起来他们在控制器中进行了服务调用，解析生成的 JSON，并将生成的对象直接传递给视图。

我用 XML 做什么？我看到四个选项：

1.  解析它并将 DOM 对象直接传递给 UI（视图）。

2.  在服务器端围绕我的 XML 服务放置一个 JSON 包装器。

3.  在客户端使用一些库将 DOM 对象转换为 JSON，并在我发出 post/put 请求时将其转换回来。

4.  在客户端手动将 DOM 对象转换为 JavaScript 对象。

什么是正确的方法，为什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-19T05:39:58.783

如果选项 2 对您来说相对容易（例如，在后端控制器中添加单行 JSON 转换），那么这可能是一项不错的投资，因为 JSON 更精简，客户端的工作量要少得多并且通常是 RESTful API 消费者的首选（如果有其他消费者）。

最近完成了这种工作，我想说下一个最佳路径（如果选项 2 很困难）是使用响应和请求[转换](http://docs.angularjs.org/api/ng.$http)器在您的 XML 和 JavaScript 对象之间执行转换，这是您的选项 3 之间的一个变体4\. DOMParser 对象是本机代码，因此它解析 XML 的速度非常快。将 XML DOM 转换为 JavaScript 对象和从 JavaScript 对象生成 XML 都是相当简单的递归算法。这种方法将您的所有其余客户端代码与后端表示分离，如果您选择选项 1，则不会出现这种情况。这种分离将允许您直接使用基于 JSON 的 RESTful 接口，如果出现这样的机会。

选择任何涉及 JSON/JavaScript 对象的选项通常会涉及处理阻抗不匹配问题，例如 XML 属性、XML 集合与 JS 数组和 XML 混合内容表示。如果您的数据模型足够简单，或者您不介意使用 XML 和 JSON 之间的开箱即用转换器提供的解决方案（例如，冗余对象包含、编号文本属性以表示与元素混合的不相交文本） ，那么这对您来说可能不是问题。否则，有机会在请求的任一端强制自定义转换行为（但遗憾的是，据我所知，这不是声明式的）。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-19T10:15:49.833

我建议你有一个**xml 到 json**转换器。这是一个。

[https://code.google.com/p/jquery-xml2json-plugin/](https://code.google.com/p/jquery-xml2json-plugin/)

转换后，您有一个普通的 JS 对象，您可以在其中使用普通的角度指令来解​​析它们并根据需要使用它们。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-05-03T22:52:43.587

我有同样的问题。最后制作了一个小模块来将我所有的 XML 响应转换为 ng.element 对象。

[https://github.com/johngeorgewright/angular-xml](https://github.com/johngeorgewright/angular-xml)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-03-03T20:07:10.433

我发现 x2js 运行良好：[https ://code.google.com/p/x2js/](https://code.google.com/p/x2js/)

客户端接收 XML，无需处理 Angular 服务。一个简单的快速转换，瞧，您有一个模仿 XML 文档的 JSON API。似乎照顾我遇到的所有用例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-03T05:25:41.340

我创建了一个名为的服务，该服务`HttpService`调用了一个函数`getRequestedContent`，在该函数中我使用角度 http 调用我的服务“ [http://localhost:8080/showserverstartupinfo](http://localhost:8080/showserverstartupinfo) ”，它返回一个如下的 xml：

```
<SERVERSTARTUPINFO>
<SERVERNAME>########</SERVERNAME>
<SERVERSTARTUPTIME>##########</SERVERSTARTUPTIME>
</SERVERSTARTUPINFO> 
```

...我解析上面的 xml 并用 xml 元素的内容填充我的 div。

```
HttpService.getRequestedContent('/showserverstartupinfo').then(
  function(content) {
    //successCallback
    var xml = content.data;
    document.getElementById('serverName').innerHTML = 
          xml.getElementsByTagName("SERVERNAME")[0].childNodes[0].nodeValue;
  }, function(data) {
    //errorCallback
}); 
```

HttpService(Angularjs) 中的 getRequestedContent 函数如下：

```
getRequestedContent : function(request) {
  var url = this.getRootContextPath() + request;
  return $http({
    method : 'GET',
    url : url,
    transformResponse : function(data) {
      return $.parseXML(data);
    }
  });
} 
```

# html - 通过给出要选择的值来选择选项默认值

> ID：15490660
> 
> 赞同：0
> 
> 时间：2013-03-19T02:45:58.277
> 
> 标签：html

您好，有没有通过给出一个值来选择一个值？

```
<select name="color">
    <option value="black">black</option>
    <option value="white">white</option>
    <option value="red">red</option>
</select> 
```

例如，如果我想选择黑色，我会设置`selected = black`.
而不是使用`<option value="black selected>black</option>`

感谢您的帮助，如果有任何误解，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:51:23.013

如果你不反对使用 js 和 jquery：

```
<select name="color" id="color">
    <option value="black">black</option>
    <option value="white">white</option>
    <option value="red">red</option>
</select>

<script type="text/javascript">
$(document).ready(function () {
  $("#color").val("black");
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:14:39.127

如果要使用多个选择选项，可以使用：

```
$("#color").val(["black"]);
// for single select option
$("#color").val(["black","red","white"]);
// for multiple select options 
```

# angularjs - Angular.js 观察函数调用的结果

> ID：15490661
> 
> 赞同：5
> 
> 时间：2013-03-19T02:46:03.653
> 
> 标签：angularjs

以下代码段是否存在任何表面问题：

```
 <ul id="entry-name" class="breadcrumb">
      <li ng-repeat="dir in pathElements()" class="active">
          <span ng-show="!$last">
              &nbsp;<a href="#!?path={{dir.url}}">{{ dir.name }}</a>&nbsp;<span ng-show="!$first" class="dividier">/</span> 
          </span>
      </li>
      <li class="active">{{ pathElements()[pathElements().length - 1].name }}</li>
  </ul> 
```

用这个js：

```
 $scope.pathElements = function() {
      var retval = [];
      var arr = $scope.currentPath().split('/');
      if (arr[0] == '') {
          arr[0] = '/';
      }

      var url = "/";
      retval.push({name: arr[0], url: url});
      for (var i = 1; i < arr.length; ++i) {
          if (arr[i] != '') {
              url += arr[i] + '/';
              retval.push({name: arr[i], url: url});
          }
      }
      return retval;
  }; 
```

这似乎导致“错误：达到 10 个 $digest() 迭代。中止！” 错误，但我不确定为什么。是因为 pathElements() 每次都返回一个新数组吗？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:29:49.423

是的，这是因为您每次都返回一个新数组，并且 $digest 循环无限循环（但 Angular 停止了它）。您应该在函数之外声明它。

```
$scope.pathArray = [];
$scope.pathElements = function() {
  // retval becomes $scope.pathArray
  if (weNeedToRecalcAllPathVariables) {
    $scope.pathArray.length = 0;
    // ...
  }

  // ...
} 
```

我们使用`$scope.pathArray.length = 0`而不是创建一个新的，以避免它连续触发。

您还应该考虑@Flek 的建议。仅在需要重新计算时调用此函数一次。你绑定的所有东西都应该直接结束`$scope.pathArray`。

如果你确实需要一个函数在使用它之前测试它的清洁状态，那么至少我建议你创建两个单独的函数，只是为了让每个函数都有自己的属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T12:58:03.053

有关如何在 Angular 中实现面包屑的一些很好的参考，请查看[angular-app](https://github.com/angular-app/angular-app)项目（[面包屑服务](https://github.com/angular-app/angular-app/blob/master/client/src/common/services/breadcrumbs.js)，[如何使用它](https://github.com/angular-app/angular-app/blob/master/client/src/app/header.tpl.html#L25)）。

这是一个演示[plunker](http://plnkr.co/edit/TnG7indQHOCAP6UsK6Bu)。

# r - R中名义变量的排序频率分布

> ID：15490663
> 
> 赞同：0
> 
> 时间：2013-03-19T02:46:07.733
> 
> 标签：r, distribution, frequency-distribution

我已经搜索了该网站，但无法找到解决我的问题的方法。我有一个示例数据集，如下所示：

```
id,l1
1,3
2,5
3,6
1,5
2,4
3,6 
```

id 是一个名义变量，代表一个唯一用户，另一个是计数变量。

我想要的是按用户找出 l1 的分布。因此，查看我给定的数据集，id=1 的总数为 l1 = 8；id = 2 的总数为 l1 = 9，id=3 的总数为 l1 = 12。

我试图根据 id 找出 l1 的分布，但我被卡住了。我无法弄清楚如何将相关列组合在一起，然后找到分布或至少构建直方图。我可以用一个变量构造一个直方图，但我不能用一个名义变量构造一个排序的频率分布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T02:55:37.940

`base` `R`方法是使用`tapply`

如果您的 data.frame 被调用`aa`

```
sumById <- with(aa, tapply(l1,id, sum)))

barplot(sumById) 
```

![在此处输入图像描述](../Images/8bff4ec1ee6ba1f931cf2abe3473a82b.png)

如果您想在不明确预设的情况下绘制结果，那么您可以使用`ggplot2`和`stat_summary`

```
library(ggplot2)
ggplot(aa, aes(x = id, y = l1)) + stat_summary(fun.y = 'sum', geom = 'bar') 
```

![在此处输入图像描述](../Images/f6b7c1f56aa8af300858f19ba2689ede.png)

# perl - Bing Api如何制作过滤器

> ID：15490665
> 
> 赞同：2
> 
> 时间：2013-03-19T02:46:22.493
> 
> 标签：perl, bing, bing-api

这是用 bing 搜索网页的代码，查询是 man，它会找到 ID、标题、描述、Urls...是否可以只过滤 Urls？

```
use LWP::UserAgent;
use YAML::Tiny;
use JSON;

$key= 'KEY';

$href= 'https://api.datamarket.azure.com/Bing/Search/v1/Web?Query=%27ip%3A213.149.103.135%20php%3Fid%3D%27&$format=JSON';
$ua= LWP::UserAgent->new(keep_alive);
$ua->credentials("api.datamarket.azure.com".':443', '', '', $key);

$resp= $ua->get($href);

print Dump($resp->content); 
```

输出：

```
--- "{\"d\":{\"results\":[{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=0&$top=1\",\"type\":\"WebResult\"},\"ID\":\"31ff54d4-3b0b-4035-8d2b-ecadf6181745\",\"Title\":\"Montenegro Business Alliance\",\"Description\":\"Zakonska regulativa. Zakoni 2012\. Zakon o akcizama; Zakon o budzetu Crne Gore za 2012.godinu; Zakon o detektivskoj djelatnosti; Zakon o elektronskim medijima\",\"DisplayUrl\":\"www.visit-mba.org/cg/strana.php?id=37\",\"Url\":\"http://www.visit-mba.org/cg/strana.php?id=37\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=1&$top=1\",\"type\":\"WebResult\"},\"ID\":\"e8e8da15-1adc-46a8-b16d-d0c65451c47e\",\"Title\":\"Organizaciona šema - CETI - Centar za ekotoksikološka ...\",\"Description\":\"© 2011 Centar za ekotoksikološka ispitivanja Crne Gore. By Creative Studio LASSO\",\"DisplayUrl\":\"www.ceti.co.me/podkategorija.php?id=9\",\"Url\":\"http://www.ceti.co.me/podkategorija.php?id=9\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=2&$top=1\",\"type\":\"WebResult\"},\"ID\":\"3d0571bc-b0ae-40b6-a9f7-72539b112514\",\"Title\":\"Montenegro Business Alliance\",\"Description\":\"MBA Kotor: Stari grad 372: Tel/fax: 032 323 823; 304 208: E-mail: mbako@t-com.me\",\"DisplayUrl\":\"www.visit-mba.org/cg/strana.php?id=30\",\"Url\":\"http://www.visit-mba.org/cg/strana.php?id=30\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=3&$top=1\",\"type\":\"WebResult\"},\"ID\":\"4f263448-1cef-4ec7-a55b-1722f994c3f5\",\"Title\":\"Odbor direktora - CETI - Centar za ekotoksikološka ispitivanja ...\",\"Description\":\"Odbor direktora. Ana Mišurović, spec. toks. hem, predsjednik Odbora direktora; Ratka Strugar, diplomirani pravnik, pomoćnik ministra za informaciono društvo i ...\",\"DisplayUrl\":\"www.ceti.co.me/podkategorija.php?id=7\",\"Url\":\"http://www.ceti.co.me/podkategorija.php?id=7\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=4&$top=1\",\"type\":\"WebResult\"},\"ID\":\"d11ee035-035a-441f-a610-be360a964da0\",\"Title\":\"KOMISIJA ZA UTVRDJIVANJE KONFLIKTA INTERESA\",\"Description\":\"Komisija za utvrđivanje konflikta interesa. Tel:(+382 20) 621 124\. Tel/fax:(+382 20) 620 540\. Adresa Crnogorskih serdara b.b\",\"DisplayUrl\":\"konfliktinteresa.me/funkcioneri/EvidFunPrijave.php?ID=Ozo-NTU8...\",\"Url\":\"http://konfliktinteresa.me/funkcioneri/EvidFunPrijave.php?ID=Ozo-NTU8OCYyPz43Og,,\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=5&$top=1\",\"type\":\"WebResult\"},\"ID\":\"fb106c3b-ecd2-4c77-ae3b-dba8e7f835ab\",\"Title\":\"KOMISIJA ZA UTVRDJIVANJE KONFLIKTA INTERESA\",\"Description\":\"Komisija za utvrđivanje konflikta interesa. Tel:(+382 20) 621 124\. Tel/fax:(+382 20) 620 540\. Adresa Crnogorskih serdara b.b\",\"DisplayUrl\":\"konfliktinteresa.me/funkcioneri/EvidFunPrijave.php?ID=Oz4-NDU9...\",\"Url\":\"http://konfliktinteresa.me/funkcioneri/EvidFunPrijave.php?ID=Oz4-NDU9MyYzPz43Og,,\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=6&$top=1\",\"type\":\"WebResult\"},\"ID\":\"5b51e876-74b5-4f05-a7da-f780d600a65e\",\"Title\":\"Montenegro Stars Hotel Group\",\"Description\":\"Visit Montenegro Stars hotels - your guide through best hotels in Montenegro\",\"DisplayUrl\":\"www.montenegrostars.com/new/pretraga.php?id_jez=2\",\"Url\":\"http://www.montenegrostars.com/new/pretraga.php?id_jez=2\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=7&$top=1\",\"type\":\"WebResult\"},\"ID\":\"9b18c3f0-a0bb-48cc-a6ca-10a8261a3086\",\"Title\":\"Montenegro Stars Hotel Group\",\"Description\":\"Montenegro Stars Hotel Group is the leading hotel company in Montenegro. The company owns three hotels, hotel Splendid Conference and Spa Resort and hotel Montenegro ...\",\"DisplayUrl\":\"www.montenegrostars.com/new/index.php?id_jez=1&id=37\",\"Url\":\"http://www.montenegrostars.com/new/index.php?id_jez=1&id=37\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=8&$top=1\",\"type\":\"WebResult\"},\"ID\":\"863ed128-48b2-412e-a737-d3b38bfa7943\",\"Title\":\"Vila Zelenbor - Hotel Bjelobor\",\"Description\":\"Vila Zelenbor je nešto najljepše što Vam se može dogoditi na Žabljaku. Organizujemo ručkove u prirodi na obali prelijepog Zminičkog jezera. Ukoliko st\",\"DisplayUrl\":\"www.hotelbjelobor.com/index.php?id=vila-zelenbor\",\"Url\":\"http://www.hotelbjelobor.com/index.php?id=vila-zelenbor\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=9&$top=1\",\"type\":\"WebResult\"},\"ID\":\"d7df8b53-9ba6-4242-92b8-111d5cb91510\",\"Title\":\"Kontakt - Hotel Bjelobor - Hoteli Bjelobor i Zlatni Bor i Vila ...\",\"Description\":\"Kontakt i rezervacije ... Žabljak. Provedite nezaboravni odmor u Žabljaku, jednom od najlepših predjela Crne Gore.\",\"DisplayUrl\":\"www.hotelbjelobor.com/index.php?id=kontakt\",\"Url\":\"http://www.hotelbjelobor.com/index.php?id=kontakt\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=10&$top=1\",\"type\":\"WebResult\"},\"ID\":\"af256dae-fcbd-449b-96e0-f67ea3885c66\",\"Title\":\"Ekonomski fakultet - Podgorica\",\"Description\":\"Any additional information and conditions may be found on the link: http://www.delmne.ec.europa.eu/code/navigate.php?Id=131, and my assistant Cécile Desruelle ...\",\"DisplayUrl\":\"www.ekonomija.ac.me/opsirnije.php?opsirnije=6369\",\"Url\":\"http://www.ekonomija.ac.me/opsirnije.php?opsirnije=6369\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=11&$top=1\",\"type\":\"WebResult\"},\"ID\":\"7e6d5db9-abfa-47f9-8432-737dff77f56b\",\"Title\":\"fotokopirnica STUDENT\",\"Description\":\"fotokopiranje korichenje stampa vizit karte printanje papir ... Fotokopirnica Student Br. tel: 020 265-293 mob. +382 69 845-152 Adresa: Hol zgrade Tehničkih ...\",\"DisplayUrl\":\"www.fotostudent.co.me/kalkulator2.php?id=1\",\"Url\":\"http://www.fotostudent.co.me/kalkulator2.php?id=1\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=12&$top=1\",\"type\":\"WebResult\"},\"ID\":\"833e6f58-a072-4876-8024-da000037c6bc\",\"Title\":\"Tourist info - T-Mobile Montenegro\",\"Description\":\"Nelle grigie montagne montenegrine, dove migliaia di anni fa gli scoscesi pendii del Durmitor e del Vojnik si scontrarono tra loro durante i grandi movimenti ...\",\"DisplayUrl\":\"www.infot.co.me/ita/n.php?id=2\",\"Url\":\"http://www.infot.co.me/ita/n.php?id=2\"},{\"__metadata\":{\"uri\":\"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\\u0027ip:213.149.103.135 php?id=\\u0027&$skip=13&$top=1\",\"type\":\"WebResult\"},\"ID\":\"a69ca711-0d35-4a69-adce-7d598d2fa908\",\"Title\":\"incognito\",\"Description\":\"Dobrodošli na kratki virtuelni izlet kroz marketing agenciju Incognito Podgorica iz Crne Gore. Na stranicama koje slijede imaćete uvid u incognićanski ...\",\"DisplayUrl\":\"www.incognito.co.me\",\"Url\":\"http://www.incognito.co.me/\"}]}}" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:04:50.050

如果您只想要 URL，则需要首先`use JSON`（您已经拥有[）](https://metacpan.org/module/JSON)将返回值转换为 Perl 数据结构。

```
my $data = decode_json($resp->content); 
```

当传递给[Data::Dumper](https://metacpan.org/module/Data%3a%3aDumper)（缩短）时，结果如下所示：

```
$VAR1 = {
  'd' => {
    'results' => [
      {
        'ID'         => '31ff54d4-3b0b-4035-8d2b-ecadf6181745',
        '__metadata' => {
          'type' => 'WebResult',
          'uri' => 'https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\'ip:213.149.103.135 php?id=\'&$skip=0&$top=1'
        },
        'Url' => 'http://www.visit-mba.org/cg/strana.php?id=37',
        'Description' => 'Zakonska regulativa. Zakoni 2012\. Zakon o akcizama; Zakon o budzetu Crne Gore za 2012.godinu; Zakon o detektivskoj djelatnosti; Zakon o elektronskim medijima',
        'DisplayUrl' => 'www.visit-mba.org/cg/strana.php?id=37',
        'Title'      => 'Montenegro Business Alliance'
      },
      {
        'ID'         => 'e8e8da15-1adc-46a8-b16d-d0c65451c47e',
        '__metadata' => {
          'type' => 'WebResult',
          'uri' => 'https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Web?Query=\'ip:213.149.103.135 php?id=\'&$skip=1&$top=1'
        },
        'Url'         => 'http://www.ceti.co.me/podkategorija.php?id=9',
        'Description' => "\x{a9} 2011 Centar za ekotoksikolo\x{161}ka ispitivanja Crne Gore. By Creative Studio LASSO",
        'DisplayUrl'  => 'www.ceti.co.me/podkategorija.php?id=9',
        'Title'       => "Organizaciona \x{161}ema - CETI - Centar za ekotoksikolo\x{161}ka ..."
      },
    ]
  }
}; 
```

现在我们可以很容易地解决这个问题。由于您只需要 URL，这就是我们要做的。

```
my @urls = map { $_->{'Url'} } @{ $data->{d}->{results} }; 
```

就这么简单。让我们看看这里发生了什么：

*   中有一个哈希键`d`。`$data`
*   在其中，还有另一个 hash-key `results`。
*   因为它保存了我们想要的数组 ref，所以我们将它用作传递给的列表`map`。
*   现在我们`map`遍历 的每个元素`results`，它们方便地位于`$_`块`map`的内部。
*   在我们的例子中，我们可以访问密钥`Url`。
*   `map`将返回一个列表，我们将其分配给`@urls`.
*   就是这样。

这是你的清单：

```
$VAR1 = [
  'http://www.visit-mba.org/cg/strana.php?id=37',
  'http://www.ceti.co.me/podkategorija.php?id=9',
  'http://www.visit-mba.org/cg/strana.php?id=30',
  'http://www.ceti.co.me/podkategorija.php?id=7',
  'http://konfliktinteresa.me/funkcioneri/EvidFunPrijave.php?ID=Ozo-NTU8OCYyPz43Og,,',
  'http://konfliktinteresa.me/funkcioneri/EvidFunPrijave.php?ID=Oz4-NDU9MyYzPz43Og,,',
  'http://www.montenegrostars.com/new/pretraga.php?id_jez=2',
  'http://www.montenegrostars.com/new/index.php?id_jez=1&id=37',
  'http://www.hotelbjelobor.com/index.php?id=vila-zelenbor',
  'http://www.hotelbjelobor.com/index.php?id=kontakt',
  'http://www.ekonomija.ac.me/opsirnije.php?opsirnije=6369',
  'http://www.fotostudent.co.me/kalkulator2.php?id=1',
  'http://www.infot.co.me/ita/n.php?id=2',
  'http://www.incognito.co.me/'
]; 
```

# java - 如何使用此菜单项加载不同的活动

> ID：15490667
> 
> 赞同：-1
> 
> 时间：2013-03-19T02:46:37.140
> 
> 标签：java, android, menuitem

当我单击菜单项（特别是帮助）时，我正在尝试使用此 MenuItem 加载不同的活动，但未加载正确的活动 User1Tap.class（而是将我带到 AddEditCountry.class）

```
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.AlertDialog;
import android.app.ListActivity;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.CursorAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.AdapterView.OnItemClickListener;

public class CountryList extends ListActivity {

 public static final String ROW_ID = "row_id";
 private ListView conListView;
 private CursorAdapter conAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    conListView=getListView();
    conListView.setOnItemClickListener(viewConListener);

    // map each name to a TextView
    String[] from = new String[] { "name" };
    int[] to = new int[] { R.id.countryTextView };
    conAdapter = new SimpleCursorAdapter(CountryList.this, R.layout.country_list, null, from, to);
    setListAdapter(conAdapter); // set adapter
}

@Override
protected void onResume() 
{
   super.onResume();  
   new GetContacts().execute((Object[]) null);
 } 

@Override
protected void onStop() 
{
   Cursor cursor = conAdapter.getCursor();

   if (cursor != null) 
      cursor.deactivate();

   conAdapter.changeCursor(null);
   super.onStop();
}    

private class GetContacts extends AsyncTask<Object, Object, Cursor> 
{
   DatabaseConnector dbConnector = new DatabaseConnector(CountryList.this);

   @Override
   protected Cursor doInBackground(Object... params)
   {
      dbConnector.open();
      return dbConnector.getAllContacts(); 
   } 

   @Override
   protected void onPostExecute(Cursor result)
   {
      conAdapter.changeCursor(result); // set the adapter's Cursor
      dbConnector.close();
   } 
} 

@Override
public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());
            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         case R.id.help:
             Intent i = new Intent(ViewCountry.this, User1Tap.class);
             CountryList.this.startActivity(i);
                                  this.finish();
                return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask<Long, Object, Object> deleteTask =
                  new AsyncTask<Long, Object, Object>()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
} 
```

**country_menu.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
    <menu xmlns:android="schemas.android.com/apk/res/android">; 
        <item android:id="@+id/addCountryItem"
             android:title="@string/add_menu"
             android:titleCondensed="@string/add_menu"
             android:showAsAction="always"
             android:alphabeticShortcut="e"/>
        <item android:id="@+id/help"
             android:title="@string/help"
             android:titleCondensed="@string/help"
             android:alphabeticShortcut="e"/> 
    </menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:12:14.037

在你的 oncreate() 方法中调用 setcontentview() 方法...我猜它从那里丢失了...试试它是否有效

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
conListView=getListView();
conListView.setOnItemClickListener(viewConListener);

//like this
setcontentview(R.layout.yourlayout);

String[] from = new String[] { "name" };
int[] to = new int[] { R.id.countryTextView };
conAdapter = new SimpleCursorAdapter(CountryList.this, R.layout.country_list, null, from, to);
setListAdapter(conAdapter); // set adapter
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:55:34.170

尝试这个：

```
case R.id.help:
    Intent i = new Intent(this, User1Tap.class);
    startActivity(i);
    finish();
    return true; 
```

# ruby-on-rails - Ruby 从日期范围生成表

> ID：15490675
> 
> 赞同：1
> 
> 时间：2013-03-19T02:47:30.150
> 
> 标签：ruby-on-rails

我在这方面遇到了很多麻烦：

对于 RPI 应用程序，我的所有结果都在一个表中：**结果**

我正在尝试根据特定数据范围打印表格：**2011-07-31..2012-07-01**

在我的控制器中：

```
class SeasonsController < ApplicationController
  def s2012
  @results = Result.all
  @s2012 = Result.where(:date => (2011-07-31)..(2012-07-01))
  end
end 
```

在我看来：

```
<table>
  <tr>
    <th>Event ID</th>
    <th>Date</th>
  </tr>
<% @s2012.each do |result| %>
  <tr>
    <td><%= result.event_id %></td>
    <td><%= result.date %></td>
  </tr>
<% end %>
</table> 
```

这不会输出任何错误（小奇迹），但视图中没有显示任何内容。`@results = Result.all`打印整张桌子就好了。但是如何将其限制在特定的数据范围内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:53:46.673

也许尝试：

```
 Date.parse('2011-07-31')..Date.parse('2012-07-01') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:54:04.960

在您当前的示例中，rails 会认为您正在做算术。您正在查看数字 1973 和 2004 之间的日期。相反，您希望首先将它们转换为日期对象。做

```
@s2012 = Result.where(:date => DateTime.parse('2011-07-31')..DateTime.parse('2012-07-01')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T02:58:36.187

我知道您正在尝试全部使用 ActiveRecordy，但实际上它的可读性不如您自己编写 SQL where 子句。

```
Result.where('date BETWEEN ? AND ?',
             Date.parse('2011-07-31'),
             Date.parse('2012-07-01')) 
```

# cluster-analysis - 主题建模和文档聚类之间有什么关系？

> ID：15490683
> 
> 赞同：10
> 
> 时间：2013-03-19T02:48:55.500
> 
> 标签：cluster-analysis, topic-modeling, unsupervised-learning

主题建模识别文档集合中的主题分布，从而有效地识别集合中的集群。那么是否可以说主题建模是一种进行文档聚类的技术？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T12:49:30.220

主题与文档集群有很大不同，毕竟主题不是由文档组成的。

然而，这两种技术确实是相关的。我相信主题建模是确定文档相似程度的可行方法，因此是文档聚类的可行方法。

在将每个文档表示为主题分布（实际上是一个向量）时，主题建模技术将特征维度从出现（在语料库中）的不同单词的数量减少到主题的数量。可以使用余弦度量和许多其他度量来计算文档的主题分布之间的相似性，这些度量反映了文档本身在它们所涵盖的主题/主题方面的相似性。基于这种量化的相似性度量，可以应用许多聚类算法对文档进行分组。

从这个意义上说，我认为主题建模是一种进行文档聚类的技术是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-09T22:47:22.223

聚类和分类之间的关系与主题建模和多标签分类之间的关系非常相似。

在单标签多类分类中，我们为每个文档分配一个标签。在聚类中，我们将每个文档放在一个组中。事实是，我们无法像定义标签那样提前定义集群。如果我们忽略这个事实，分组和标签本质上是一回事。

然而，在现实世界的问题中，平面分类是不够的。文档通常与多个类别/类相关。因此，我们利用了多标签分类。现在，我们可以将主题建模视为多标签分类的无监督版本，因为我们可以将每个文档放在多个组/主题下。在这里，我再次忽略了我们无法提前决定将哪些主题用作标签的事实。

# javascript - Javascript变量中的全局范围未按预期工作

> ID：15490687
> 
> 赞同：0
> 
> 时间：2013-03-19T02:49:44.670
> 
> 标签：javascript, variables, pdf.js, global-scope

```
<html>
<body>
  <div>
    <button id="prev" onclick="goPrevious()">Previous</button>
    <button id="next" onclick="goNext()">Next</button>
    &nbsp; &nbsp;
    <span>Page: <span id="page_numo"></span> / <span id="page_count"></span></span>
    <input type=text id="elNum" value=1>

  </div>

  <div>
    <canvas id="the-canvas" style="border:0px solid black"></canvas>
  </div>

  <!-- Use latest PDF.js build from Github -->
  <script type="text/javascript" src="https://raw.github.com/mozilla/pdf.js/gh-pages/build/pdf.js"></script>

  <script type="text/javascript">
    //
    // NOTE: 
    // Modifying the URL below to another server will likely *NOT* work. Because of browser
    // security restrictions, we have to use a file server with special headers
    // (CORS) - most servers don't support cross-origin browser requests.
    //
    var url = 'http://cdn.mozilla.net/pdfjs/tracemonkey.pdf';

    //
    // Disable workers to avoid yet another cross-origin issue (workers need the URL of
    // the script to be loaded, and currently do not allow cross-origin scripts)
    //
    PDFJS.disableWorker = true;

    var pdfDoc = null,
        pageNum = 1,
        scale = 0.8,
        canvas = document.getElementById('the-canvas'),
        ctx = canvas.getContext('2d');

    //
    // Get page info from document, resize canvas accordingly, and render page
    //
    function renderPage(num) {
      // Using promise to fetch the page
      pdfDoc.getPage(num).then(function(page) {
        var viewport = page.getViewport(scale);
        canvas.height = viewport.height;
        canvas.width = viewport.width;

        // Render PDF page into canvas context
        var renderContext = {
          canvasContext: ctx,
          viewport: viewport
        };
        page.render(renderContext);
      });

      // Update page counters
      document.getElementById('page_numo').textContent = pageNum;
      document.getElementById('page_count').textContent = pdfDoc.numPages;
      sic = document.getElementById('elNum');
      sic.value = pageNum;
    }

   crc = 1;
    //

    // Go to previous page
    //

    function goPrevious() {
      if (pageNum <= 1)
        return;
      pageNum--;
      crc = pageNum;      
      renderPage(pageNum);
    }

    //
    // Go to next page
    //
    function goNext() {
      if (pageNum >= pdfDoc.numPages)
        return;
      pageNum++;
      crc = pageNum;
      renderPage(pageNum);
    }

    //
    // Asynchronously download PDF as an ArrayBuffer
    //
    PDFJS.getDocument(url).then(function getPdfHelloWorld(_pdfDoc) {
      pdfDoc = _pdfDoc;
      renderPage(pageNum);
    });
   document.write ('Current page is '+crc);
    </script>

</body>
</html> 
```

这就是代码。它是在线 pdf 渲染器 (pdf.js) 的最简单版本。我一直在做一个项目，该项目需要通过 url 将 pageNum（当前 pdf 页码）变量传递给另一个脚本进行处理。但问题是我无法在 renderPage 函数之外检索 pageNum 值。我认为这是 Javascript 变量范围的问题，但看不到我尝试通过 crc 变量或通过 document.getElementById('elNum').value 提取有什么问题...（请参阅 document.write ('Current page is '+ crc); 脚本末尾的行和第 8 行的字段，以查看我是如何尝试检索值的）。

任何人都可以给我任何关于我做错了什么的线索？测试页面在这里（[http://jsbin.com/pdfjs-prevnext-v2/2091/edit](http://jsbin.com/pdfjs-prevnext-v2/2091/edit)）

注意：我已经看到有关此主题的其他问题，但这似乎是一个奇怪的案例。真的需要一些帮助，希望其他人将来会需要它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:41:36.643

`document.write ('Current page is '+crc)`仅在页面加载时执行。crc-是全局变量，可以使用。

```
 var viewCurrPage = function() {
        console.log('Current page is '+crc);
    };

    function goPrevious() {
          if (pageNum <= 1)
            return;
          pageNum--;
          crc = pageNum;      
          renderPage(pageNum);
          viewCurrPage();
        };

function goNext() {
      if (pageNum >= pdfDoc.numPages)
        return;
      pageNum++;
      crc = pageNum;
      renderPage(pageNum);
      viewCurrPage();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:19:19.787

这与 vn_grv 的简单功能相结合可能很有用

```
var viewCurrPage = function() {
        //console.log('Current page is '+crc);
      document.getElementById('one').innerHTML = '<a href="process.php?page='+crc+'">Process page '+crc+'</a>';
    };
//Simply adding the corresponding div like: 
<div id="one"></div> 
```

感谢您的回答。此致，

# sharepoint - SharePoint 2010 讨论板 - 上次更新的列不再填充

> ID：15490689
> 
> 赞同：0
> 
> 时间：2013-03-19T02:50:14.683
> 
> 标签：sharepoint, sharepoint-2010

我们遇到了一个突然的问题，新的讨论区帖子没有显示在默认视图上。我发现原因是因为 Last Updated 列不再更新（它是空白的）。

不确定原因。作为一种解决方法，我将视图更改为按创建日期排序。但是这个创可贴用不了多久。

有人有想法么？

谢谢！

# c++ - c ++将引用字符串与字符串进行比较

> ID：15490690
> 
> 赞同：1
> 
> 时间：2013-03-19T02:50:23.300
> 
> 标签：c++

我有一个方法，它的参数是对字符串的引用，在该方法中，我想将此引用的字符串与另一个字符串进行比较，该字符串是称为事务的对象的一部分，有一个事务数组。两个原始字符串都是 std::strings，我尝试使用 == 运算符，但即使两个字符串相同，这似乎也不会返回 true。也许它比较字符串的地址。

这是我现在拥有的：

```
int Analyser::numSharesBoughtOf(string& stockSymbol)
{
    // Your code
    int Total=0;

    for (int tranNum(0); tranNum<numOfTranactions; tranNum++)
    {

        if (stockSymbol == Transactions[tranNum].stockSymbol)
        {
            Total = Total + Transactions[tranNum].numShares;
        }
    }

    if (Total > 0)
    {
        return Total;
    }
    else
    {
        return 0;
    }
} 
```

Transactions 也是一个指向事务数组开始的指针，封装这有什么不同。编辑：感谢您的所有回复，事实证明我在股票代码中输入了错误的名称......此方法与使用 john.pavan 发布的 .compare 答案一样有效。不知道我以前是怎么没有注意到这一点的，因为我使用的是 Visual Studios 调试控制台，我猜这是一件好事，因为我实际上并不负责为股票经纪人编写代码，哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:09:33.607

只需使用 std::string::compare。请注意，它像 strcmp 一样工作，0 表示它们相等。

```
...
if (stockSymbol.compare(Transactions[tranNum].stockSymbol) == 0) {
... 
```

根据评论，这对您没有帮助。我能想到的唯一另一件事是您正在比较不同大小写的字符串。因此，将两者转换为较低，然后进行比较。

```
std::string copy1(stockSymbol);
std::string copy2(Transactions[tranNum].stockSymbol));
std::transform(copy1.begin(), copy1.end(), copy1.begin(), ::tolower);
std::transform(copy2.begin(), copy2.end(), copy1.begin(), ::tolower);
if (copy1 == copy2) {
... 
```

# timeout - 使用 Spin/Promela 时超时

> ID：15490691
> 
> 赞同：0
> 
> 时间：2013-03-19T02:50:27.477
> 
> 标签：timeout, spin, promela

如果有人可以向我解释为什么我会使用以下代码超时，那就太好了。我理解，或者至少我认为我理解，超时的想法，但是使用 do 循环我认为这会阻止这种情况。任何建议表示赞赏。

```
mtype wantp = false;
mtype wantq = false;
mtype turn = 1;

active proctype p()
{   
  do
  :: printf ("non critical section for p\n");
     wantp = true;
     (wantq ==true);

    if
    :: (turn == 2)-> 
       wantp = false;
      /* wait for turn ==1*/
      (turn ==1);
      wantp = true;
    fi;

    printf("CRITICAL SECTION for P\n");
    turn = 2;
    wantp = false;
  od
}

active proctype q()
{
  do
  :: printf("non critical section for q\n");
     wantq = true;
    (wantp ==true);

    if
    :: (turn == 1)-> 
       wantq = false;
       (turn ==2);
       wantq = true;
    fi;

    printf("CRITICAL SECTION for Q\n");
    turn = 1;
    wantq = false;
  od
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:54:03.070

当您执行 SPIN 验证并出现问题时，例如“超时”，您将拥有所谓的“跟踪”文件。跟踪文件向您显示导致问题的程序执行的确切路径。

假设上述文件名为 test.pml。您执行以下操作：

```
$ spin -a test.pml
$ gcc -o pan pan.c
$ ./pan
# info about verification, shows timeout
# view the detailed trail file
$ spin -p -t test.pml 
```

然后，查看打印出来的详细信息，了解超时是如何发生的。

# c# - Web Api 路由过滤器到子目录

> ID：15490696
> 
> 赞同：2
> 
> 时间：2013-03-19T02:50:46.430
> 
> 标签：c#, asp.net-web-api, asp.net-mvc-routing

在我的 Controllers 目录中，我有两个子目录 - FeaturesA 和 FeaturesB

```
FeaturesA
      Service1Controller 
      Service2Controller 
      Service3Controller

FeaturesB 
      Service4Controller
      Service5Controller
      Service6Controller 
```

我想添加两条路由，以便我可以通过以下 URL 访问这些服务 -

```
localhost/api/FeaturesA/.... 
```

和

```
localhost/api/FeaturesB/.... 
```

我有以下路线设置

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {

        config.Routes.MapHttpRoute(
           name: "FeaturesA",
           routeTemplate: "api/FeaturesA/{controller}/{id}",
           defaults: new { id = RouteParameter.Optional});

        config.Routes.MapHttpRoute(
           name: "FeaturesB",
           routeTemplate: "api/FeaturesB/{controller}/{id}",
           defaults: new { id = RouteParameter.Optional}); 
```

但我可以从甚至`localhost/api/FeaturesA/Service1`访问Service1`localhost/api/FeaturesB/Service1``localhost/api/Service1`

如何设置我的路由以仅允许从 Service1 访问`localhost/api/FeaturesA/Service1`，这同样适用于所有其他控制器，即它们只能从与其控制器子目录匹配的 url 访问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:39:05.737

这似乎几乎正是引入[路由约束](http://msdn.microsoft.com/en-us/library/system.web.routing.irouteconstraint.aspx)来完成的。如果您有一个足够简单的案例，您可以使用内置类型来添加正则表达式以匹配控制器名称。但是对于更复杂的情况，您可以自己编写。

Pinal Bhatt 有一篇不错的博客文章，其中包含大量关于该主题的文章的链接：http: [//blog.pbdesk.com/2012/07/route-constraints-with-aspnet-mvc.html](http://blog.pbdesk.com/2012/07/route-constraints-with-aspnet-mvc.html)

# java - While Loop 取出第一行 Java

> ID：15490703
> 
> 赞同：0
> 
> 时间：2013-03-19T02:51:49.507
> 
> 标签：java, while-loop, java.util.scanner

感谢您的建议，这是我第一次使用 stackoverflow，因为我对编程还很陌生。我遇到的问题是我的程序在执行 while 循环后不要求输入名称。具体来说，它似乎没有在循环之后执行这一行。 **System.out.print("请输入节食者的姓名："); 字符串名称 = input.nextLine();** 有人可以解释一下我可能会错过使用扫描仪实用程序吗？

```
import java.util.*;

/**
 * CS-12J
 * Sweetner.java
 * Purpose:
 *
 * @version 1.0 3/18/13
 */

public class Sweetner {

   /**
    * The main method begins the execution of the program
    *
    *@param args not used
    */

    public static void main (String[] args) {
        Scanner input = new Scanner(System.in);
        String again = "yes";
        while (again.equals("yes")) {
            System.out.print("Enter the dieter's name: ");
            String name = input.nextLine();
            System.out.print("Enter the target weight of the dieter in pounds: ");
            double weightInPounds = input.nextDouble();

            //converts pounds to grams
            final double IBS_TO_GRAMS = 453.59;
            double weightInGrams = weightInPounds * IBS_TO_GRAMS;

            //finds lethal amout of sweetner for mouse
            final double MOUSE_WEIGHT = 30.0;
            final double LETHAL_DOSE = 100.0;
            final double MOUSE_LETHAL_PROPORTION =
                (double) LETHAL_DOSE / MOUSE_WEIGHT;

            //finds lethal amount of sweetner for human of given weight
            double lethalSweetner = MOUSE_LETHAL_PROPORTION * weightInGrams;

            //lethal number of cans
            final double SODA_SWEETNER = 0.001;
            final double SODA_GRAMS = 350;
            double lethalCans = lethalSweetner / (SODA_SWEETNER * SODA_GRAMS);

            //output
            System.out.println("For dieter: " + name);
            System.out.println("Dieter's target weight: " + weightInPounds
                + " pounds");
            System.out.println("Lethal dose in grams of sweetner is: "
                + lethalSweetner);
            System.out.println("Lethal number of cans of soda: "
                + lethalCans);

            //extra credit
            final int CANS_PER_DAY = 15;
            final double DAYS_IN_YEAR = 365.25;
            double yearsToLethal = lethalCans / (CANS_PER_DAY * DAYS_IN_YEAR);
            System.out.println("Years to lethal dose: " + yearsToLethal);
            System.out.print("Do you want to repeat the program? yes or no\n\t\t");
            again = input.next();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T02:57:24.650

使用 next() 而不是 nextLine() 来获取名称：

```
String name = input.next(); // to get the name 
```

nextLine() 扫描不可见的换行符，这似乎是用户输入“是”时的情况。因此，如果您想避免使用 next()，只需输入 input.nextLine(); 在循环结束时消耗换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:57:36.880

在循环结束时试试这个：

```
again = input.nextLine(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T03:04:27.710

改变你的

```
String name = input.nextLine(); 
```

对此，它将起作用。

```
String name = input.next(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T03:30:43.057

input.nextLine() 检索下一个换行符。在您的 System.out.print() 中，您提供了触发 nextLine() 方法的“\n”。

```
System.out.print("Do you want to repeat the program? yes or no\n\t\t");
again = input.next(); 
```

在第二条语句之前，您需要另一个 input.nextLine() ，例如：

```
System.out.print("Do you want to repeat the program? yes or no\n\t\t");
input.nextLine();
again = input.next(); 
```

我希望这能解决你的问题。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-06T13:20:14.373

*如果节食者的名字不能为空*

```
System.out.print("Enter the dieter's name: ");
String name = scanLine.apply( input ); 
```

[在这里找到扫描线](https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo/58189583#58189583)

# css - 如何使内容相对于单元格居中？

> ID：15490704
> 
> 赞同：0
> 
> 时间：2013-03-19T02:51:54.420
> 
> 标签：css

我在这里有一个小提琴：

[http://jsfiddle.net/robvious/e5QVZ/](http://jsfiddle.net/robvious/e5QVZ/)

我试图将部分文本保持在可用空白的中心，但它似乎一直在右边。我怎样才能将它相对于“单元格”居中？

```
<aside id="side-browser">
    <a href="#">Folder One</a> <br/>
    <a href="#">Folder Two</a><br/>
    <a href="#">Folder Three</a><br/>
</aside>
<section>
    <h1>Section Content</h1>
</section> 
```

```
section {
    text-align: center;
    display: table-cell;  
}

aside {  
    display: table-cell;  
    width: 300px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:39:57.973

正如 PSCoder 提到的，您的文本已经居中。我已经更新了你的小提琴来说明正在发生的事情。[http://jsfiddle.net/e5QVZ/28/](http://jsfiddle.net/e5QVZ/28/)

正如 3bu1 所暗示的，您需要调整宽度，直到达到您想要的效果。

为了清楚起见，我添加了一个固定宽度为 500px 的容器 div，

```
#container{width:500px;border:1px dotted #09c;}
section {background-color:#afa;
    text-align: center;
    display: table-cell;
    margin:0 auto;
    width:200px;
}

aside {background-color:#faa;  
    display: table-cell;  
    width: 300px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:57:38.017

```
section {
    text-align: center;
    display: table-cell; 
    float:left;
    width:100%;
} 
```

# c# - 登录前形成身份验证登录页面

> ID：15490708
> 
> 赞同：2
> 
> 时间：2013-03-19T02:52:34.933
> 
> 标签：c#, asp.net, authentication, login, forms-authentication

我在我的 asp.net 网站中使用表单身份验证。目前我在 web.config 中有我的身份验证设置，如下所示。

```
<authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="60" cookieless="UseCookies" defaultUrl="~/landing.aspx" protection="All" slidingExpiration="true" />
    </authentication> 
```

我想在 login.aspx 页面之前导航到landing.aspx 页面，然后单击登录页面上的按钮转到 login.aspx 页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T03:11:20.620

我假设您正在使用 Web 表单（相对于 MVC）。

第一步是在您的项目中创建一个登录页面。可能您会希望它位于站点的根目录中。假设它被称为 LandingPage.aspx。

`<configuration>`在你的标签内添加以下内容`web.config`。这将允许人们无需先登录即可访问登录页面。

```
<location path="LandingPage.aspx">
    <system.web>
        <authorization>
            <allow users="?"/>
        </authorization>
    </system.web>
</location> 
```

接下来，在 IIS 管理器中，为指向 LandingPage.aspx 的网站配置一个默认文档。这将确保新访问者在导航到您的网站时被引导到登录页面。

最后，您只需要填写登录页面的内容，并在某处制作“登录”按钮，当用户想要登录时，该按钮将引导他们进入登录页面。我把它留给您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-14T13:29:09.893

我们还可以使用以下标签从 Web 配置文件中配置默认​​页面

```
<system.webServer>
    <defaultDocument>
        <files>
            <add value="default.aspx" />
            <add value="Default.htm" />
            <add value="Default.asp" />
            <add value="index.html" />
            <add value="index.htm" />
            <add value="iisstart.htm" />
        </files>
    </defaultDocument>
</system.webServer> 
```

# python - 使用 ReportLab 生成横向 PDF

> ID：15490710
> 
> 赞同：9
> 
> 时间：2013-03-19T02:52:53.730
> 
> 标签：python, pdf, reportlab

我正在编写一个使用 ReportLab 生成 PDF 报告的 Python 脚本。我需要以横向生成页面，并且我已经查看了 ReportLab 手册，但我找不到这样做的方法。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-19T03:16:38.810

确保您已导入

```
from reportlab.lib.pagesizes import letter, landscape 
```

接着：

```
canvas.setPageSize(landscape(letter)) 
```

或者更一般地说，

```
canvas.setPageSize(width, height) 
```

您可以将其设置为您喜欢的任何尺寸。请记住，reportlab 使用点，其中 1 点是 1/72 英寸。您还可以导入：

```
from reportlab.lib.units import inch 
```

这使您可以执行以下操作：

```
canvas.setPageSize(11*inch, 8.5*inch) 
```

编辑：添加了受yentsun启发的所有内置页面大小。

深入研究`reportlab.lib.pagesizes`源代码，我们发现：

```
A0,A1,A2,A3,A4,A5,A6
B0,B1,B2,B3,B4,B5,B6
LETTER, LEGAL, ELEVENSEVENTEEN 
```

评论声称小写`letter`自 2001 年以来已被弃用，但仍然可用。此外，还有两个函数可用，`portrait`每个函数都`landscape`接受一个元组页面大小，纵向首先返回具有较小维度的元组，而横向首先返回具有较大维度的元组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-03T22:02:36.057

```
from reportlab.lib.pagesizes import letter, landscape 
```

然后定义页面大小和方向。

```
p = canvas.Canvas(response, pagesize=(landscape(letter))) 
```

# android - 在 XML 布局的多个部分更改 TextView

> ID：15490712
> 
> 赞同：1
> 
> 时间：2013-03-19T02:53:16.103
> 
> 标签：android, android-linearlayout, android-xml

我正在`View`以编程方式添加多个 XML 。我正在使用布局充气器来添加它们，这没有问题。

但我无法修改`TextView`它们中的每一个。

例如，考虑我`LinearLayout`在 final 中添加了 3 次`View`。我有一个`TextView`线性布局。我使用它提取它`findViewById`，如果`setText("hello");`它反映在第一个布局中，而不是第二个和第三个布局中。

添加多个 XML 元素时，inflater 会动态创建新的 id 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:20:44.667

要回答您的部分问题，不：ID 不是由`LayoutInflater`.

当您说要添加视图时，您在哪里添加它们？您提到了最终视图。

您没有包含您的代码，但我假设您正在调用`Activity.findViewById`. 如果您`this.findViewById`从您的调用`Activity`，您将遍历整个视图层次结构并找到具有此类 Id 的第一个视图。

您需要做的是遍历`LinearLayout`包含您的 s 的所有`TextView`s 并调用`findViewById`它们中的每一个。

```
for (LinearLayout layout : <fill in>) {
    ((TextView) layout.findViewById(R.id.yourid)).setText("hello");
} 
```

* * *

至于`<fill in>`. 如果没有您的代码，很难说出如何填写它。似乎您正在将这些添加到父视图中，对吗？假设我们有一个 parent `View parent = some view;`。

你只需要得到它的所有孩子并迭代。根据父视图的子类，有几种方法可以做到这一点。让我们保持简单，并假设父级只是另一个`LinearLayout`。

在这种情况下，for 循环会更改为：

```
for (int i = 0; i < parent.getChildCount(); i++) {
    final LinearLayout layout = (LinearLayout) parent.getChildAt(i);
    ((TextView) layout.findViewById(R.id.yourid)).setText("hello");
} 
```

# php - 联系表。一切都应该工作，但它没有

> ID：15490715
> 
> 赞同：0
> 
> 时间：2013-03-19T02:53:20.800
> 
> 标签：php, html, forms, contact

我的联系表格有问题。当我在我的网站上填写时，我会收到一封电子邮件，但我收到的电子邮件中的字段：姓名、电子邮件和消息保持空白。

我的联系方式包括：（`contacts.html`我网站上的 html 页面）；`contactengine.php`（实际形式）；`thanks.html`（当问题成功发布时打开）；`unsuccessful.html`（不成功时打开）。

谁能告诉我这段代码有什么问题？

联系人.HTML

```
<form id="form" form action="contactengine.php" method="post" >
   <fieldset>
     <label><input type="text" name="cf_name" value="Name" id="cf_name" onBlur="if(this.value=='') this.value='Name'" onFocus="if(this.value =='Name' ) this.value=''"></label>
     <label><input type="text" name="cf_email" value="e-Mail" id="cf_email" onBlur="if(this.value=='') this.value='e-Mail'" onFocus="if(this.value =='e-Mail' ) this.value=''"></label  
     <label><textarea name="cf_message" id="cf_message" onBlur="if(this.value==''){this.value='Message'}" onFocus="if(this.value=='Message'){this.value=''}">Message</textarea></label>
     <div class="btns">
     <a href="contacts.html" class="link-1">Cancel</a>
     <a href="contactengine.php" class="link-1" onClick="document.getElementById('form').submit()">Submit</a></div>
   </fieldset>  
</form> 
```

联系方式.PHP

```
<?php

$EmailFrom = "form@mysite.rs";
$EmailTo = "office@mysite.rs";
$Subject = "Message from website";
$cf_name = Trim(stripslashes($_POST['Name'])); 
$cf_email = Trim(stripslashes($_POST['Email'])); 
$cf_message = Trim(stripslashes($_POST['Message'])); 

// validation
$validationOK=true;
if (!$validationOK) {
   print "<meta http-equiv=\"refresh\" content=\"0;URL=unsuccessful.html\">";
   exit;
}

// prepare email body text
$Body = "";
$Body .= "Name: ";
$Body .= $cf_name;
$Body .= "\n";
$Body .= "e-Mail: ";
$Body .= $cf_email;
$Body .= "\n";
$Body .= "Message: ";
$Body .= $cf_message;
$Body .= "\n";

// send email 
$success = mail($EmailTo, $Subject, $Body, "From: <$EmailFrom>");

// redirect to success page 
if ($success){
  print "<meta http-equiv=\"refresh\" content=\"0;URL=thanks.html\">";
}
else{
  print "<meta http-equiv=\"refresh\" content=\"0;URL=unsuccessful.html\">";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:00:12.397

这些行：

```
$cf_name = Trim(stripslashes($_POST['Name'])); 
$cf_email = Trim(stripslashes($_POST['Email'])); 
$cf_message = Trim(stripslashes($_POST['Message'])); 
```

应该改为

```
$cf_name = Trim(stripslashes($_POST['cf_name'])); 
$cf_email = Trim(stripslashes($_POST['cf_email'])); 
$cf_message = Trim(stripslashes($_POST['cf_message'])); 
```

变量名无所谓，但是里面的文字`$_POST['']` **应该和表单元素的name值一样！** 您在 HTML 中为名称添加了前缀`cf_`，但在您的 PHP 中没有这样做！

**编辑：**哎呀，我错过了一些东西！您正在`contactengine.php`通过链接链接到`<a>`！您的浏览器将此视为常规`GET`请求，**并且不会随其发送数据！** 即使您使用 JavaScript 代码来提交表单，**浏览器的默认操作（转到链接）也超过了您的代码**。

要解决这个问题，要么

1.  将最后一个`<a>`标签更改`contacts.html`为`<input type="submit" value="Submit" />`，将链接变成提交按钮，*或者*
2.  添加到提交链接`; return false;`的处理程序的末尾。`onclick`这会阻止浏览器执行其默认行为，并提交表单。

# python - 美丽的汤得到第一个孩子

> ID：15490718
> 
> 赞同：21
> 
> 时间：2013-03-19T02:53:43.943
> 
> 标签：python, beautifulsoup

我怎样才能得到第一个孩子？

```
 <div class="cities"> 
       <div id="3232"> London </div>
       <div id="131"> York </div>
  </div> 
```

我怎样才能到达伦敦？

```
for div in nsoup.find_all(class_='cities'):
    print (div.children.contents) 
```

AttributeError：“listiterator”对象没有属性“内容”

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T03:02:53.997

div.children 返回一个迭代器。

```
for div in nsoup.find_all(class_='cities'):
    for childdiv in div.find_all('div'):
        print (childdiv.string) #london, york 
```

`'\n'`AttributeError 被提出，因为像are in这样的非标签`.children`。只需使用适当的子选择器来查找特定的 div。

（更多编辑）无法重现您的异常 - 这是我所做的：

```
In [137]: print foo.prettify()
<div class="cities">
 <div id="3232">
  London
 </div>
 <div id="131">
  York
 </div>
</div>

In [138]: for div in foo.find_all(class_ = 'cities'):
   .....:     for childdiv in div.find_all('div'):
   .....:         print childdiv.string
   .....: 
 London 
 York 

In [139]: for div in foo.find_all(class_ = 'cities'):
   .....:     for childdiv in div.find_all('div'):
   .....:         print childdiv.string, childdiv['id']
   .....: 
 London  3232
 York  131 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-09-06T05:14:47.790

使用现代版本的 bs4（当然是 bs4 4.7.1+），您可以访问 :first-child css 伪选择器。尼斯和描述性的。如果`soup.select_one`您只想返回第一个匹配项，即使用`soup.select_one('.cities div:first-child').text`. `not None`在使用访问器之前进行测试被认为是一种很好的做法`.text`。

```
from bs4 import BeautifulSoup as bs

html = '''
<div class="cities"> 
       <div id="3232"> London </div>
       <div id="131"> York </div>
  </div>
  '''
soup = bs(html, 'lxml') #or 'html.parser'
first_children = [i.text for i in soup.select('.cities div:first-child')]
print(first_children) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-09-06T02:41:40.510

当前接受的答案得到所有城市，当问题只想要第一个时。

如果您只需要第一个孩子，您可以利用`.children`返回迭代器而不是列表的优势。请记住，迭代器会即时生成列表项，并且因为我们只需要迭代器的第一个元素，所以我们不需要生成所有其他城市元素（从而节省时间）。

```
for div in nsoup.find_all(class_='cities'):
    first_child = next(div.children, None)
    if first_child is not None:
        print(first_child.string.strip()) 
```

# iphone - 子视图出现在superviews layer.border下面？

> ID：15490720
> 
> 赞同：42
> 
> 时间：2013-03-19T02:53:54.070
> 
> 标签：iphone, ios, cocoa-touch, uiview, calayer

我有一个`UIView`我用以下方式定义它的边界：

```
self.layer.borderColor = [UIColor blackColor].CGColor;
self.layer.borderWidth = 3; 
```

我将一个子视图附加到这个`UIView`，当我将子视图移动到边框上时，它会在它下面。这是预期的行为吗？反正有没有让子视图放在它上面？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-19T03:38:21.040

根据[苹果规范](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)：`It is composited above the receiver’s contents and sublayers.`

因此，即使您将子视图放在前面等等，边框也将始终位于所有子视图之上。

所以我制作了一个背景视图来伪造边框。

例如：

```
UIView *backgroundView = [[UIView alloc] initWithFrame:CGRectMake(100, 100, 200, 200)];
backgroundView.backgroundColor = [UIColor blackColor];
backgroundView.clipsToBounds = NO;

UIView *bView = [[UIView alloc] initWithFrame:CGRectInset(backgroundView.bounds, 3, 3)];
bView.backgroundColor = [UIColor redColor];

UIView *cView = [[UIView alloc] initWithFrame:CGRectMake(-50, -50, 100, 100)];
cView.backgroundColor = [UIColor yellowColor];
[bView addSubview:cView];

[backgroundView addSubview:bView];

[self.window addSubview:backgroundView]; 
```

和效果：

![在此处输入图像描述](../Images/be9f01a9234e006569009c3b89ad7623.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-11T22:34:44.433

根据您的视图结构，将子视图添加到主视图的**父**视图可能更容易。然后它可以与主视图重叠，并按照您的要求覆盖边框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T02:56:29.880

您是否尝试将超级视图的“clipsToBounds”属性设置为“是”？出于性能原因，默认情况下将其设置为 NO，但将其设置为 yes 可能会给您想要的效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-21T23:58:44.927

**在适合您的特定位置插入图层：**

```
self.layer.insertSublayer(sublayer, at: 0) 
```

# linux - 解码base64：无效输入

> ID：15490728
> 
> 赞同：58
> 
> 时间：2013-03-19T02:54:58.757
> 
> 标签：linux, shell, base64

尝试在 GNU/Linux 上解码 base64 文件，我得到“base64：无效输入”。

```
$ base64 test.zip | base64 -d > test2.zip
base64: invalid input
$ ll test*
-rw-r--r-- 1 user grp 152 19 11:41 test.zip
-rw-r--r-- 1 user grp  57 19 11:42 test2.zip 
```

我尝试了[dos2unix](http://www.xinotes.org/notes/note/1376/)命令，但没有帮助。

我的 base64 版本：

```
$ base64 --version
base64 (GNU coreutils) 5.97
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software.  You may redistribute copies of it under the terms of
the GNU General Public License <http://www.gnu.org/licenses/gpl.html>.
There is NO WARRANTY, to the extent permitted by law.

Written by Simon Josefsson. 
```

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-03-19T03:00:25.657

该版本不会（默认情况下）解码带有分隔符的行，但编码器默认情况下会这样做。（较新的版本没有这个问题。）

一种解决方案：

`base64 -w 0 foo.zip | base64 -d > foo2.zip`

备用：

`base64 foo.zip | base64 -di > foo2.zip`

该`-i`选项代表（来自`man`页面）：

```
-i, --ignore-garbage
       When decoding, ignore non-alphabet characters.
[...]
Decoding require compliant input by default, use --ignore-garbage to
attempt to recover from non-alphabet characters (such as newlines) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-12-19T23:36:02.250

或者更简单

`base64 -di foo.zip > foo2.zip`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-10T23:32:17.767

如果您在 Mac 上执行此操作，您的版本`base64`可能没有处理忽略垃圾的灵活性。如果您 brew install `coreutils`，您将拥有该`gbase64`实用程序并按照 Joe 的描述使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-04T22:16:59.303

您也可以尝试使用

```
echo -n 
```

抑制新行并将输入长度填充为 4 的倍数，其中包含一到三个相等的字符

```
= 
```

# android - 即使成功登录 Facebook，session.isOpened() 也会返回 false

> ID：15490730
> 
> 赞同：3
> 
> 时间：2013-03-19T02:55:30.403
> 
> 标签：android, facebook

我是 Facebook + 原生 Android 的新手。我乖乖地按照他们网站上的步骤操作，但即使我使用 Facebook 成功登录，我仍然会在 session.isOpened() 方法中收到“错误”结果。我相信我已经正确设置了哈希键、包名和类名。你能帮我看看这段代码有什么问题吗？

```
public class MainActivity extends Activity {

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // start Facebook Login
    Session.openActiveSession(this, true, new Session.StatusCallback() {

      // callback when session changes state
      @Override
      public void call(Session session, SessionState state, Exception exception) {

          if (session.isOpened()) {

          // make request to the /me API
          Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

            // callback after Graph API response with user object
            @Override
            public void onCompleted(GraphUser user, Response response) {
              if (user != null) {
                TextView welcome = (TextView) findViewById(R.id.welcome);
                welcome.setText("Hello " + user.getName() + "!");
              }
            }
          });
        }
      }
    });

  }

  @Override
  public void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T07:28:55.397

是的，最后我能够解决这个问题。

问题源于我在 Facebook 应用程序设置中设置的不正确的哈希键。

要正确生成哈希键，请使用 java6，因为 Facebook 需要此版本。我尝试使用 java7 但它没有用。

请参阅下面生成由**Vizzz回答的哈希密钥的正确步骤**

[关联](https://stackoverflow.com/questions/5306009/facebook-android-generate-key-hash)

# javascript - jQuery ajax 发布奇怪的行为

> ID：15490736
> 
> 赞同：2
> 
> 时间：2013-03-19T02:55:58.720
> 
> 标签：javascript, jquery

我有一个 ajax 函数来计算和执行某个验证。

代码如下所示：

```
function collectFormData(fields) {
    var data = {};
    for (var i = 0; i < fields.length; i++) {
        var $item = $(fields[i]);
        data[$item.attr('name')] = $item.val();
    }
    return data;
}

function calculate(){
    var $form = $('#purchase-form');
    var $inputs = $form.find('[name]');
    var data = collectFormData($inputs);
    $.ajax({
        url: '${validateUrl}',
        type: 'POST',
        data: data,
        contentType: 'application/json; charset=utf-8',
        success: function (response) {
            alert(response.status);
        },
        error: function () {
            alert("error");
        }
    });
} 
```

HTML：

```
<button id="calculateBtn" class="btn btn-primary" onclick="calculate();">
  <spring:message code="button.calculate" />
</button> 
```

但是，只要提交了名为我的表单的上述函数。这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:10:18.437

尝试将按钮上的“类型”属性设置为“按钮”

```
<button type="button" id="calculateBtn" class="btn btn-primary" onclick="calculate();">
  <spring:message code="button.calculate" />
</button> 
```

type 属性的默认值为'submit'： [https ://developer.mozilla.org/en-US/docs/HTML/Element/button](https://developer.mozilla.org/en-US/docs/HTML/Element/button)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:07:47.283

这是因为您有一个带有按钮的表单，其默认行为是提交表单。如果您不想提交表单，则需要阻止单击按钮的默认操作。

由于您使用的是 jQuery，我建议使用 jQuery 来注册单击事件而不是使用`onclick`属性，并且计算方法必须返回`false`值以防止发生默认单击事件。

改成

```
<button id="calculateBtn" class="btn btn-primary">
  <spring:message code="button.calculate" />
</button>

function calculate(){
    var $form = $('#purchase-form');
    var $inputs = $form.find('[name]');
    var data = collectFormData($inputs);
    $.ajax({
        url: '${validateUrl}',
        type: 'POST',
        data: data ,
        contentType: 'application/json; charset=utf-8',
        success: function (response) {
            alert(response.status);
        },
        error: function () {
            alert("error");
        }
    });
    return false;
}
$(function(){
    $('#calculateBtn').click(calculate)
}) 
```

# javascript - 将 Regex 对象分配给 html 输入模式

> ID：15490742
> 
> 赞同：4
> 
> 时间：2013-03-19T02:57:25.613
> 
> 标签：javascript, regex, html

我需要以编程方式将正则表达式对象分配给输入元素模式属性。以下是我当前的实现：

```
var regex = /\d{5}/;
element.attr("pattern", regex.toString().slice(1,-1); 
```

有没有更好的方法可以在没有字符串操作的情况下做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T03:34:59.717

`RegExp`实例有一个包含其文本的[`source`属性：](http://es5.github.com/#x15.10.7.1)

> source 属性的值是表示当前正则表达式的 Pattern 形式的 String。

所以

```
/\d{5}/.source === "\\d{5}" 
```

所以您的代码可以更改为

```
var regex = /\d{5}/;
element.setAttribute("pattern", regex.source); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T03:01:17.550

如果您使用的是 jQuery，请`prop`使用`attr`. 因为在较新版本的 jQuery 中，`attr`是只读的，`prop`是读/写的。

```
element.prop('pattern', regex.toString().slice(1,-1)); 
```

# sql - 从oracle sql select中列的每一行替换字符串

> ID：15490751
> 
> 赞同：1
> 
> 时间：2013-03-19T02:58:40.707
> 
> 标签：sql, oracle11g

在 oracle 11g 上的 user_tab_partition 上运行以下 sql select 查询

{ select high_value from user_tab_partitions where table_name='TAB1'; }

给出以下结果..

TO_DATE('2013-02-03 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN') TO_DATE('2013-02-10 00:00:00', ' SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN') TO_DATE(' 2013-02-17 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN' ') TO_DATE('2013-02-24 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN') TO_DATE('2013-03-03 00:00:00' , 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN') TO_DATE(' 2013-03-10 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR =格雷戈里安'）

**问题：**如何使用替换或类似功能从每一行中删除**“NLS_CALENDAR=GREGORIAN”**。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:15:29.590

尝试这个：

```
select regexp_replace(high_value, ',\s*''NLS_CALENDAR=GREGORIAN''', '')
from user_tab_partitions 
where table_name='TAB1'; 
```

单引号在 Oracle SQL 中通过键入两次进行转义，即使在 RegEx 模式中也是如此。

# c# - PHP使用客户端公钥验证客户端签名

> ID：15490753
> 
> 赞同：0
> 
> 时间：2013-03-19T02:58:54.260
> 
> 标签：c#, php, signature, verify, phpseclib

嗨，我正在构建 REST 服务并计划消除从该项目（目前使用 PHP 编写的 REST 服务器）开发客户端和服务器的语言限制。

为了安全起见，我正在验证他们的哈希码以及他们的客户端应用程序签名。目前哈希是成功的，但对于签名它总是失败。

每个客户端都有自己的私钥，在服务器上我们将有他们的公钥来验证签名，每个对服务器的请求都会发送一个签名。如果客户端是 Web 服务器，则所有用户只有一个私钥。如果客户端是本机应用程序 (C#)，则每个已安装的客户端应用程序都将拥有其唯一的私钥。

PHP 客户端到 PHP REST 服务器 -> 计算哈希正常，验证客户端签名正常 C# 客户端 (winapp) 到 PHP REST 服务器 -> 计算哈希正常，验证客户端签名失败

将来我想尝试使用 JAVA，反之亦然。

我使用简单的方法来创建自签名证书

```
openssl genrsa -des3 -out netclient.key 2048
openssl req -new -x509 -key netclient.key -out netclient.crt
openssl pkcs12 -export -inkey netclient.key -in netclient.crt -out netclient.p12 
```

这是我使用 C# 对数据进行签名的代码

```
public static string (string Base64EncryptedData ) {
X509Certificate2 my;
my = new X509Certificate2("cert/netclient.p12", "abcdefg", X509KeyStorageFlags.Exportable | X509KeyStorageFlags.PersistKeySet);

RSACryptoServiceProvider csp = null;

csp = (RSACryptoServiceProvider)my.PrivateKey;

SHA1Managed sha1 = new SHA1Managed();
UnicodeEncoding encoding = new UnicodeEncoding();
byte[] data = encoding.GetBytes(Base64EncryptedData);
byte[] hash = sha1.ComputeHash(data);

return Convert.ToBase64String(csp.SignHash(hash, CryptoConfig.MapNameToOID("SHA1"))); 
} 
```

它返回一个签名（base64），我使用 GET 方法将其发送到 PHP REST 服务器。在 PHP 服务器上，我重新计算哈希并验证，但它从不返回 1。目前我手动将所有密钥复制到服务器。

```
set_include_path(get_include_path() . PATH_SEPARATOR ."lib");
include("Crypt/RSA.php");

$p12cert = array();
$fp=fopen("cert/netclient.p12","r");
$priv_key=fread($fp,8192);
fclose($fp);
openssl_pkcs12_read($priv_key, $p12cert, "abcdefg");

//try using the phpseclib library from http://phpseclib.sourceforge.net
//req() will get all the $_POST, $_GET data req("signature") = $_GET["signature"];
//$hash_request is an base64_encode string same exact value as the one in C#
$rsa = new Crypt_RSA();
$rsa->setHash("sha1");
$rsa->setSignatureMode(CRYPT_RSA_SIGNATURE_PKCS1);
$rsa->loadKey($p12cert["cert"]);
$verified_phpseclib = $rsa->verify($hash_request, base64_decode(req("signature"))) ? "verified" : "diff";

//try using php built in openssl 
$verified_builtin = openssl_verify($hash_request, base64_decode(req('signature')), $p12cert["cert"); 
```

非结果返回“已验证”或“1”

可能是因为当 C# 对数据进行签名时，数据的格式是 byte[] 吗？还是有其他原因？

我在 linux php 中运行所有代码 - 使用 apache2 c# - 使用 monodevelop

* * *

这是我使用 openssl_pkcs12_read 阅读后的 pk12 数组，您可以[在此处下载](https://skydrive.live.com/redir?resid=BBB6B5E0F1EEB9B0!286&authkey=!AOIULEd4cKpAMG4)

```
Array
(
    [cert] => -----BEGIN CERTIFICATE-----
MIIDXTCCAkWgAwIBAgIJANjuyBraeAN0MA0GCSqGSIb3DQEBBQUAMEUxCzAJBgNV
BAYTAkFVMRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRlcm5ldCBX
aWRnaXRzIFB0eSBMdGQwHhcNMTMwMzE5MDA0ODI0WhcNMTMwNDE4MDA0ODI0WjBF
MQswCQYDVQQGEwJBVTETMBEGA1UECAwKU29tZS1TdGF0ZTEhMB8GA1UECgwYSW50
ZXJuZXQgV2lkZ2l0cyBQdHkgTHRkMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIB
CgKCAQEAojE1Md/DET9mvKpoNJvb+mbGdTfSYuXQurGxb5pU0ba+gVeARbc8fjaK
D/2EKhUP/7240a31e5qI/2UlgiHO+ghQKDPo+5W5CetDVR1oMbWVA1fp7/gv8DEV
AvNV9nVkYzxnoVPs+W0MhMlWPrhCNSqQ28BbbL0EzXwXESnMw0I2VAhGWDNG0zSl
U03l5zh8jzzRKKK+gw4gIKo0u4lEUqB52MaXPzdwQkOEXRUdT+l1vK3DGfQycMrm
gZEN6IXDvpSFcQfHJlICK06+JNgDM0tYbif2mMfDEPKeFIjGC8S2ZDTZlR92LCk1
/WUGhdDFobbLAOx40M/etOcaEN1bgQIDAQABo1AwTjAdBgNVHQ4EFgQUTr0r49JA
DUKKiIQkRVlog4T952AwHwYDVR0jBBgwFoAUTr0r49JADUKKiIQkRVlog4T952Aw
DAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQUFAAOCAQEAO2IwjeIEVy8aLCOTjCkt
fTyLYuoiex+Xa/Dy2Xdl51Q44uAjCeSVsm1mXko+cZSypngGDu8W97sifzeR+pmW
7r6r+Rj+5pZcQiLQOCUQrXVpqHeiCS8QpOhpxGF+TOLy1O9zcqQwEiohKmzJB++d
1NM8//OBx1/Nyu7eLTKrTqfBdhuXfee963HVF9uBxwV8oa3UTQfhKu2vwJ64pcbU
5OVQw4rfhfSYhB1uu+zMQhCZ3hsroj2rC6Kfb8t3BNzngQwiqDBprmJznmJY38pW
kw0NIx+GrO1NUu+Ydl/7MXChujQajqSkG65Z9iJ8G7eegrY988INPVIfitIopWF+
jg==
-----END CERTIFICATE-----

    [pkey] => -----BEGIN PRIVATE KEY-----
MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCiMTUx38MRP2a8
qmg0m9v6ZsZ1N9Ji5dC6sbFvmlTRtr6BV4BFtzx+NooP/YQqFQ//vbjRrfV7moj/
ZSWCIc76CFAoM+j7lbkJ60NVHWgxtZUDV+nv+C/wMRUC81X2dWRjPGehU+z5bQyE
yVY+uEI1KpDbwFtsvQTNfBcRKczDQjZUCEZYM0bTNKVTTeXnOHyPPNEoor6DDiAg
qjS7iURSoHnYxpc/N3BCQ4RdFR1P6XW8rcMZ9DJwyuaBkQ3ohcO+lIVxB8cmUgIr
Tr4k2AMzS1huJ/aYx8MQ8p4UiMYLxLZkNNmVH3YsKTX9ZQaF0MWhtssA7HjQz960
5xoQ3VuBAgMBAAECggEAB/TgBi1S9XKlyJWXfRU0SmlmTPPLF1zsy2vSJ4ZrqMoN
OG0hdsoRZqOoTDaEmEfmPAaDnY2qIEEpfVXp7CNacvubaw143Xav2CO5buB9bwrY
X4ydhk8nkuHlhPqI+gkyPogFEW37jxTha1YxK+yAGvmWl6EtGv1+0dHHk+j4CZAO
9DH1gZRBOXyeAJAhYuBMxxKfZhBNgGHzLtf9SGoOd2v9ya/h4CuqYh/CoxHGM/w1
uE6M2CKxSuZtqdtiJnoYcmAnDLACDmVHQNbFMEyC3ALrixgTj1p9aYPi8P/9BVKv
+T6cCmRQIl4VY4Ir0PCbai6BQaP6TIbAo0lt9cefUQKBgQDV2KKuc/TsZgrl+ijV
vW1kf46X1Squ8AqPgJnXYM5M4kG+17AecV25sm1oHmzN0ChwvWYotfhLMSqdH+1l
5zMYMwjTle9BkQXELyAvKiKND5I42DtTE04YnHi7HDlaJmOCa3WTTPjJiyIZC+9S
Lpc3gDwP8VSBcq2V2t/SMw9+nQKBgQDCKfIUJWW0WHkESmc8rJDBUWueUVfEWh/d
9ZG/gIapSXnJcTp/fRDZsaqS0pI7c8bvdPJPkQKO0M7Sy2E/OjyKOT5X4+4FguCd
XlwaUhVRycMxGjb1Q4pTlPCnQkoBVKQ5oW4IVQW/ILtT6wuJQPmqkwiXN6CSHzmF
w1RW+pUpNQKBgDXEeHLgmO5vYcIdOfMz47NnFxU59bdyh1U5gnTS1Ewkf19an9+n
pWcxY6zQKY8+DUz7cho+VqWhQROsmWYL0Z7+BfQdOMEFk6uWJcN2FqXdCmjchV4H
9pTdksWI/SqbiF2cYz2cFtml7/bYN140dLTxuyhPB25cxSRumeQiDn1JAoGBAJDf
w2UM0mpSaVmuOoGnMQtNuUMT5qz3ojd3eByvxcqirGCGP+PIab5FNsT+oWYC6Tja
xcJgrMvrOadHYXRP+8QXGlFyHLO4B+jj800gWhAAv8fvi3pNvvTGeRoT+Cwt/6uQ
rA1Dg1otDhl7k8wB00hXFV3ff8wHyF/qcw/DQXDRAoGBAJGvJSl9yIr5v3ooZ6BV
FtDcDTPFGxQCyqvfi5RzKW65Wqu1ZL7jSiOPcY4+418Zifnfyfr/9IZjl9EKPjhC
/fNqptnuA7DKPDKkQIeQSwtHF9HGVoqG0JGOmYCeCZxQK6eZhiuU8VohAAbzsdu8
PgxyS/PRbCsXP4p+OjR1i+3C
-----END PRIVATE KEY-----
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:10:22.960

试试这个：

```
<?php
set_include_path(get_include_path() . PATH_SEPARATOR ."lib");
include('File/X509.php');

$p12cert = array();
$fp=fopen("cert/netclient.p12","r");
$priv_key=fread($fp,8192);
fclose($fp);
openssl_pkcs12_read($priv_key, $p12cert, "abcdefg");

$x509 = new File_X509();
$x509->loadX509($p12cert["cert"]);
$pubkey = $x509->getPublicKey();
$pubkey->setSignatureMode(CRYPT_RSA_SIGNATURE_PKCS1);
$verified_phpseclib = $pubkey->verify($hash_request, base64_decode(req("signature"))) ? "verified" : "diff"; 
```

# c# - 我是否使用 Paint 事件在运行时定位控件？

> ID：15490757
> 
> 赞同：4
> 
> 时间：2013-03-19T02:59:21.137
> 
> 标签：c#, .net, winforms, resize, controls

我对来自 VB6 的 C# 编程相当陌生，所以请温柔：P

我一直在使用面板对控件进行分组（即面板包含文本框、标签、列表视图等），然后让面板在运行时自行对齐，以便控件以不同的分辨率对齐。但是，我是从面板的 Paint 例程中执行此操作的（？）

IE：

```
private void pnlTop_Paint(object sender, PaintEventArgs e)
    {
        btnExit.Location                = new Point(this.Width - (this.Left + lblTitleMain.Left + btnExit.Width), 10);
        btnMinimize.Location            = new Point(this.Width - (this.Left + lblTitleMain.Left + (btnExit.Width * 2)), 10);
        btnSettings.Location            = new Point(this.Width - (this.Left + lblTitleMain.Left + (btnExit.Width * 2 + btnExit.Width)), 10);

        lblTitleMain.Left               = (((this.ClientSize.Width - lblTitleMain.Width) / 2) / 2) / 2;
        lblTitleMain.Top                = btnExit.Top + lblTitleMain.Height;

        int intMenuY                    = lblTitleMain.Bottom + 5;
        lnkMenuSystem.Location          = new Point(lblTitleMain.Left + 3, intMenuY);
        lnkMenuDeployment.Location      = new Point(lnkMenuSystem.Right + 50, intMenuY);
        lnkMenuTables.Location          = new Point(lnkMenuDeployment.Right + 50, intMenuY);
        lnkMenuTCP.Location             = new Point(lnkMenuTables.Right + 50, intMenuY);
        lnkMenuDCM.Location             = new Point(lnkMenuTCP.Right + 50, intMenuY);
        lnkMenuProcessData.Location     = new Point(lnkMenuDCM.Right + 50, intMenuY);
        lnkMenuGenerateReports.Location = new Point(lnkMenuProcessData.Right + 50, intMenuY);

        lineMenuButtom.StartPoint       = new Point((((this.ClientSize.Width - lblTitleMain.Width) / 2) / 2) / 2, lnkMenuSystem.Top + lnkMenuSystem.Height + 10);
        lineMenuButtom.EndPoint         = new Point(this.Width - (this.Left + lblTitleMain.Left), lnkMenuSystem.Top + lnkMenuSystem.Height + 10);

        lnkMenuErrorMessage.Location    = new Point(lnkMenuSystem.Left, lineMenuButtom.Y1+5);
        lnkMessageWelcome.Location      = new Point(lineMenuButtom.X2 - lnkMessageWelcome.Width, lineMenuButtom.Y2 + 5);
        GlobalVariables.intGeneralLeft  = lineMenuButtom.StartPoint.X;
        GlobalVariables.intGeneralWidth = lineMenuButtom.X2;
    } 
```

我想问的是： **这是正确的方法吗？**

这样做的原因是因为我不确定一旦应用程序在旧系统上运行这是否会影响性能（假设它将在 XP 中使用 2g RAM Pentium 4 HT 或同等系统）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T03:00:41.000

不; 这当然是错误的做法。
`Paint`可以经常开火；你应该尽可能少地做这件事。（你当然不应该修改布局）

相反，您应该在设计器中设置`Anchor`和`Dock`属性，以便一切都自动发生。

# java - 将 byte[] 输出到 .txt 文件

> ID：15490762
> 
> 赞同：3
> 
> 时间：2013-03-19T03:00:05.523
> 
> 标签：java, java-io

我正在尝试将字节数组输出到文件。当我调用 System.out.println(ouput_stream) 时，我创建的字符串正确显示。悬停，当我使用 FileOutputStream 时它无法正确输出。这是我到目前为止所得到的。有什么建议么？

```
FileOutputStream fos = new FileOutputStream("outputFile.txt"); 
OutputStreamWriter out = new OutputStreamWriter(fos, "UTF-8");

String received_string = new String(rPacket.getData(), 0, rPacket.getLength(), "UTF-8");

System.out.println(received_string);
out.write(received_string, 0, received_string.length()); 
```

当我调用 System.out.println(received_string 时，控制台会显示信息信息。但是，它没有正确输出文件。我之前问过类似的问题，但现在正在努力输出。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:15:02.203

看看 Apache Commons [FileUtils.writeByteArrayToFile](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html#writeByteArrayToFile%28java.io.File,%20byte%5B%5D,%20boolean%29)

应该做你需要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:05:47.203

你的代码看起来有点奇怪（你想要字节还是字符串），但应该没问题。

你在文件中发现了什么？您在查看之前关闭了流/写入器吗？如果没有，它可能仍在某处缓冲。

但是，如果您真的只想将该数据包通过管道传输到文件，请尽量避免转换为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T22:54:03.973

根本不要使用 String 或 Writer。只需将字节直接从数据包复制到文件：

```
fos.write(rPacket.getData(), rPacket.getOffset(), rPacket.getLength()); 
```

那么你不可能破坏数据。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T03:11:31.113

尝试使用 BufferedWriter ..

```
BufferedWriter writer = new BufferedWriter(new FileWriter("outfile"));
writer.write(received_string); 
```

# wso2 - WSO2 在不同机器上运行服务器和应用程序

> ID：15490766
> 
> 赞同：0
> 
> 时间：2013-03-19T03:00:27.927
> 
> 标签：wso2, wso2carbon

我是 WSO2 和 Web 服务域的新手。我在eclipse平台下使用wso2 carbon studio创建了一个axis2服务应用。我在同一台机器上安装了 WSO2 WSAS 并上传了这个服务。基于本教程。 [http://wso2.org/project/carbon-studio/1.0.11/docs/esb_proxy_service_sample.html#CreatingaProxyServiceUsingCarbonStudioIDE](http://wso2.org/project/carbon-studio/1.0.11/docs/esb_proxy_service_sample.html#CreatingaProxyServiceUsingCarbonStudioIDE)

并能够在 Eclipse 控制台中看到结果。现在我想在单独的机器上运行服务器并在 Eclipse 控制台中得到结果。任何人都可以为此提供解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:30:42.280

只需在单独的机器上运行服务器，并使用运行服务器的 IP 和端口，并使用来自客户端代码的 IP 和端口，在 localhost 中。

# sql - 令人困惑的查询

> ID：15490768
> 
> 赞同：0
> 
> 时间：2013-03-19T03:00:37.810
> 
> 标签：sql, codeigniter, join, left-join

我真的很抱歉问这个愚蠢的问题，但我对这个查询有点困惑。

```
$this->db->select('user_package.status,user_package.remaining,user_package.date,package.pname,package.pcount');
$this->db->join('user_package','user_package.pid=package.pid','left');
$this->db->where('user_package.status','Active');
$this->db->or_where('user_package.status','Pending');
$this->db->where('user_package.uid',$rows->uid);
$user_package=$this->db->get('package'); 
```

这是mysql面板中的类似查询，我运行它以检查输出

```
Select up.status,up.remaining,up.date,p.pname,up.uid,p.pcount FROM user_package up LEFT JOIN package p ON up.pid=p.pid where up.status="Active" OR up.status="Pending" AND up.uid=7 
```

这是查询的输出

![mysql输出](../Images/75328788890b0ce59a9e78c11bbb5541.png)

我想要的是只找到那些 uid 为 7 的行并检查它们的状态是 Pending 还是 Active。但输出不同。它取出具有 7 和 8 uid 的 Pending 和 Active 记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:19:22.893

而不是使用 $this->db->where 尝试使用 $this->db->where_in

这应该将结果限制为您需要的 ID。

例如

```
$this->db->select('user_package.status,user_package.remaining,user_package.date,package.pname,package.pcount');
$this->db->join('user_package','user_package.pid=package.pid','left');
$this->db->where('user_package.status','Active');
$this->db->or_where('user_package.status','Pending');
$this->db->where_in('user_package.uid',$rows->uid);
$user_package=$this->db->get('package'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:38:32.793

你必须这样做

```
$select =   array(
                'up.status',
                'up.remaining',
                'up.date',
                'p.pname',
                'up.uid',
                'p.pcount'  
            );
$status =   array('Active','Pending');      

$this->db
        ->select($select)
        ->from('user_package up')
        ->join('package p','up.pid = p.pid','left')
        ->where_in('up.status',$status)
        ->where('up.uid',$rows->uid)
        ->get(); 
```

# linux - Android模拟器内存 使用量不断增加

> ID：15490770
> 
> 赞同：1
> 
> 时间：2013-03-19T03:00:57.607
> 
> 标签：linux, memory, android-emulator

我正在使用 Ubuntu 12.10 64 位和最新的 eclipse。

启动模拟器一分钟后，内存使用量一直增加到 1000 MB。谁能告诉我为什么？

我将模拟器的内存限制为 512mb，但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:02:59.647

听起来像是内存泄漏，您应该将其报告给模拟器错误列表。当资源在进程运行时没有关闭或删除时，就会发生泄漏。

# r - R中的多个向量是否还有另一个类似外部的函数

> ID：15490773
> 
> 赞同：2
> 
> 时间：2013-03-19T03:01:16.670
> 
> 标签：r

我有多个向量，我想获得这些向量的所有组合。说，我有`v_1=(v_{1,1},...,v_{1,n_1}), ... , v_m=(v_{m_1,1},...,v_{m,n_m})`并且我想获得`u={(u_1,...,u_m)|u_i∈v_i}`. 对于 2 个向量，`outer`可以完成这项工作（需要重塑）。仲裁向量数量的情况如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T03:25:04.960

您正在寻找`?expand.grid`，它返回 data.frame 中的所有组合。例如：

```
> expand.grid(1:3, 1:2, 1)
  Var1 Var2 Var3
1    1    1    1
2    2    1    1
3    3    1    1
4    1    2    1
5    2    2    1
6    3    2    1 
```

一种更程序化的方法是将其与`do.call`：

```
do.call(expand.grid, list(1:3, 1:2, 1)) 
```

这给了你同样的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T03:05:34.200

虽然`expand.grid`给出了一种惯用的`R`方法，但这里提出了一种替代方法。

您可以使用该`sets`软件包。这可以访问 R 中集合论的数据结构和语法。

给定三个向量，你

```
library(sets)
a <- 1:2
b <- 3:4
d <- 5:6

# You can create `set` objects

as <- as.set(a)
bs <- as.set(b)
ds <- as.set(d)

as
## {1L, 2L} 
```

要创建适当的`n-tuples`，您可以使用`*`

```
as * bs *ds
## {((1L, 3L), 5L), ((1L, 3L), 6L), ((1L, 4L), 5L), ((1L, 4L), 6L), ((2L, 3L),
##  5L), ((2L, 3L), 6L), ((2L, 4L), 5L), ((2L, 4L), 6L)} 
```

以编程方式执行此操作

```
 vecList <- list(a, b, d)
 ntuples <- Reduce(`*`,lapply(vecList, as.set)) 
```

并强制`unlist`在每个向量上使用正则向量`set`

创建一个矩阵，其中每一列都是 n 元组的元素

```
sapply(ntuples,unlist)
##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,]    1    1    1    1    2    2    2    2
## [2,]    3    3    4    4    3    3    4    4
## [3,]    5    6    5    6    5    6    5    6 
```

# xna - 将 DirectX 着色器应用于 XNA 中的旋转纹理

> ID：15490776
> 
> 赞同：1
> 
> 时间：2013-03-19T03:01:30.157
> 
> 标签：xna, rotation, directx, shader

我有一个动态光照着色器，它的着色精灵在我自己的测试程序中很好，但是一旦我将它导入到我朋友的基于物理的游戏中，它就开始类似于日食。我通过将渐变简化为纯粹基于形状内的 X 值来缩小范围，并使精灵中的圆圈外部变为红色，但是如您所见，旋转继续导致问题（无法发布图像，所以这里是专辑的链接）。

不同旋转的圆圈（不是按顺序，而是用弧度值标记）：http: [//imgur.com/a/Preth](http://imgur.com/a/Preth)

我对矩阵数学的所有研究都表明我使用了正确的旋转公式，但我想也许我做错了什么。这是我的 .fx 着色器代码：

```
float rotationrads; /*assumed rotation is in radians*/
sampler TextureSampler: register(s0);

float4 staticlight(float2 Tex: TEXCOORD0) : COLOR0
{
float4 Color = tex2D(TextureSampler, Tex);

    float2 NewTex;

    /*Get the new X and Y values by applying the UV formula with the rotation*/
    NewTex.x = (Tex.x * cos(rotationrads)) - (Tex.y * sin(rotationrads));
    NewTex.y = (Tex.y * sin(rotationrads)) + (Tex.y * cos(rotationrads));

if(Color.a > 0.0)
{
    Color.r = (Color.r * NewTex.x);
    Color.g = (Color.g * NewTex.x);
    Color.b = (Color.b * NewTex.x);
}
else
{
    Color.r = 100;
    Color.g = 0;
    Color.b = 0;
    Color.a = 100;
}

return Color;  
}

technique StaticLightOnly
{
pass Pass1
{
    PixelShader = compile ps_2_0 staticlight();
}
} 
```

如果有人对 2d 着色器中基于精灵的旋转有经验，我将不胜感激！先谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:16:45.423

因为旋转是围绕原点执行的，所以您必须将旋转中心 (0.5, 0.5) 移动到原点，执行旋转然后撤消平移。

# php - DOMDocument->load() I/O 警告：加载外部实体失败

> ID：15490778
> 
> 赞同：1
> 
> 时间：2013-03-19T03:01:37.397
> 
> 标签：php

在 PHP 5.3.3-7 上，我使用 DOMDocument->load() 加载本地文件，最近我开始遇到开始收到 E_WARNINGs 的情况

```
 DOMDocument::load() [domdocument.load]: I/O warning : failed to load external entity "/path/to/local/file/that/does/exist" 
```

一旦这种情况开始发生，我发现使错误停止的唯一方法是重新启动 apache，然后再过一段时间就好了。

我最近没有更改任何相关代码，但我突然想到，在我为[CVE-2013-1643](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2013-1643)安装了 Debian 补丁后，这种情况开始发生，这似乎可能会禁用实体加载......如果有一个事件的单个实例这会触发禁用，是否可以为所有未来的 PHP 请求永久禁用它，直到重新启动？这似乎具有侵略性。相比之下， libxml_disable_entity_loader() 似乎只对当前请求进行操作。

我没有我知道应该加载远程 XML 并且会触发禁用的代码，但如果这是发生的事情，我会期望在我的 php 错误日志中显示一些东西，但我什么也没看到。我应该调查哪些其他途径？

**编辑**：最后，我可以预见地重复这个问题。如果我故意在单个会话中超出允许的内存限制......

```
mod_fcgid: stderr: PHP Fatal error:  Allowed memory size of 134217728 bytes exhausted (tried to allocate 32 bytes) 
```

...然后我开始在所有后续调用 DOMDocument->load() 时收到 I/O 警告。这一次，我能够在不重新启动 apache 的情况下让它再次工作……只需调用 libxml_disable_entity_loader(false)。这确实是一种时髦的行为——它开始闻起来像 php 中的错误？

# mysql - Django 假主键

> ID：15490779
> 
> 赞同：2
> 
> 时间：2013-03-19T03:01:40.040
> 
> 标签：mysql, django

我有一个我无法控制的遗留数据库，我正在尝试在 Django 中为它创建一个模型。它有一个复合主键，我不希望创建肮脏的黑客来在 Django 中实现它。仅将其中一个字段指定为主键的后果是什么，即使它不是唯一的。

我只需要对数据做一些简单的读取。不涉及写作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:23:25.407

由于您不会进行任何写作，因此我将完全忽略写作存在的问题。

但是，阅读问题可能会表现为以下之一：

*   `primary_key`如果您指定的不是唯一的，则链接模型（ForeignKey 和 ManyToManyField）将在查找时失败

*   `Model.objects.get(pk=N)``MultipleObjectsReturned`如果您尝试使用主键查找将失败

*   如果您指定的主键不是唯一的，管理员的某些方面可能无法正常工作（例如详细视图）

可能还有其他我没有想到的。

考虑使用[django-compositekey 之](https://github.com/simone/django-compositekey)类的东西，它可能会处理试图解决标准 django 行为的问题。

# php - 无法使用提供的设置连接到我的数据库服务器

> ID：15490780
> 
> 赞同：1
> 
> 时间：2013-03-19T03:01:58.473
> 
> 标签：php, codeigniter, database-connection

创建数据库后出现此错误“无法使用提供的设置连接到我的数据库服务器”

这是代码....

```
 * Database Loader

public function database($params = '', $return = FALSE, $active_record = NULL)
{
    // Grab the super object
    $CI =& get_instance();

    // Do we even need to load the database class?
    if (class_exists('CI_DB') AND $return == FALSE AND $active_record == NULL AND isset($CI->db) AND is_object($CI->db))
    {
        return FALSE;
    }

    require_once(BASEPATH.'database/DB.php');

    if ($return === TRUE)
    {
        return DB($params, $active_record);
    }

    // Initialize the db variable.  Needed to prevent
    // reference errors with some configurations
    $CI->db = '';

    // Load the DB class
    $CI->db =& DB($params, $active_record);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:06:14.160

这实际上与您的代码无关。您的应用程序无法使用提供的数据库设置连接到数据库：（主机、用户名和密码）。确保您拥有一个名称正确的数据库，并且拥有对该数据库具有访问权限的数据库用户设置。配置文件通常位于`application/config/database.php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T05:57:24.750

我终于找到了一个解决方案，因为我认为与您遇到的问题相同，这是由于您在服务器上拥有的 php 版本，在我的情况下，我的本地主机中有 php 5.3.5 但在我的服务器中我有 php 5.2.6 我没有走得更远，但主要问题是当函数无法正常工作时避免通知，特别是在“mysql_driver.php”第 150 行。

```
return @mysql_set_charset($charset, $this->conn_id); 
```

摆脱“@”，看到真正的问题，我发现了这一点，停止脚本的每个特定部分，直到我终于找到问题所在。要解决这个问题，您可以将“$this->use_set_names”设置为 true，这样您就可以在我向您指出的行附近使用 if 条件。如果问题不是这个，可能是类似的，您可以测试脚本的每个部分（调试）。

# cordova - PhoneGap Cordova Admob 插件不工作

> ID：15490781
> 
> 赞同：3
> 
> 时间：2013-03-19T03:02:07.270
> 
> 标签：cordova, admob

我正在使用这个 AdMob 插件 ( [https://github.com/rajpara11/phonegap-plugins/tree/master/Android/AdMobPlugin](https://github.com/rajpara11/phonegap-plugins/tree/master/Android/AdMobPlugin) ) 在 Android 中投放 AdMob 广告。我没有收到任何广告，屏幕底部有一大块 (25%) 区域是白色的。我确实收到此错误“CordovaLog(275): TypeError: 表达式 'window.plugins' [undefined] 的结果不是对象。” 在模拟器中运行时在我的 Aptana/Eclipse 日志中。

文档设置说将“AdMob Cordova 插件 jar 放入 libs/”。只有一个 .Java 文件。我是否应该将其编译成 JAR 文件并将其放在该文件夹中？是否有任何教程显示此插件有效？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-13T19:03:04.110

通过在代码中注释掉这一行来修复它：

是测试：真

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T13:54:05.773

确保您在引用 AdMob 插件之前添加了对 Phonegap/Cordova 的引用，因为它取决于它。

你可以看看这个如何使用PhoneGap插件的视频教程：[http ://www.youtube.com/watch?v=84jmuXS8GJI](http://www.youtube.com/watch?v=84jmuXS8GJI)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-26T17:44:18.860

尝试一个不同的插件，因为听起来这个插件坏了。我知道这个有效

[https://github.com/sunnycupertino/cordova-plugin-admob-simple](https://github.com/sunnycupertino/cordova-plugin-admob-simple)

```
cordova plugin add cordova-plugin-admob-simple 
```

整合如下：

-添加以下 javascript 函数，放入您自己的广告代码，如果您愿意，可以使用变量。

- 从 onDeviceReady() 调用 initAd()，并调用 showBannerFunc() 和 showInterstitialFunc() 来展示广告。

```
//initialize the goodies
function initAd(){
        if ( window.plugins && window.plugins.AdMob ) {
            var ad_units = {
                ios : {
                    banner: 'ca-app-pub-xxxxxxxxxxx/xxxxxxxxxxx',       //PUT ADMOB ADCODE HERE
                    interstitial: 'ca-app-pub-xxxxxxxxxxx/xxxxxxxxxxx'  //PUT ADMOB ADCODE HERE
                },
                android : {
                    banner: 'ca-app-pub-xxxxxxxxxxx/xxxxxxxxxxx',       //PUT ADMOB ADCODE HERE
                    interstitial: 'ca-app-pub-xxxxxxxxxxx/xxxxxxxxxxx'  //PUT ADMOB ADCODE HERE
                }
            };
            var admobid = ( /(android)/i.test(navigator.userAgent) ) ? ad_units.android : ad_units.ios;

            window.plugins.AdMob.setOptions( {
                publisherId: admobid.banner,
                interstitialAdId: admobid.interstitial,
                adSize: window.plugins.AdMob.AD_SIZE.SMART_BANNER,  //use SMART_BANNER, BANNER, IAB_MRECT, IAB_BANNER, IAB_LEADERBOARD
                bannerAtTop: false, // set to true, to put banner at top
                overlap: true, // banner will overlap webview 
                offsetTopBar: false, // set to true to avoid ios7 status bar overlap
                isTesting: false, // receiving test ad
                autoShow: false // auto show interstitial ad when loaded
            });

            registerAdEvents();
            window.plugins.AdMob.createInterstitialView();  //get the interstitials ready to be shown
            window.plugins.AdMob.requestInterstitialAd();

        } else {
            //alert( 'admob plugin not ready' );
        }
}
//functions to allow you to know when ads are shown, etc.
function registerAdEvents() {
        document.addEventListener('onReceiveAd', function(){});
        document.addEventListener('onFailedToReceiveAd', function(data){});
        document.addEventListener('onPresentAd', function(){});
        document.addEventListener('onDismissAd', function(){ });
        document.addEventListener('onLeaveToAd', function(){ });
        document.addEventListener('onReceiveInterstitialAd', function(){ });
        document.addEventListener('onPresentInterstitialAd', function(){ });
        document.addEventListener('onDismissInterstitialAd', function(){
            window.plugins.AdMob.createInterstitialView();          //REMOVE THESE 2 LINES IF USING AUTOSHOW
            window.plugins.AdMob.requestInterstitialAd();           //get the next one ready only after the current one is closed
        });
    }

//display the banner
function showBannerFunc(){
    window.plugins.AdMob.createBannerView();
}
//display the interstitial
function showInterstitialFunc(){
    window.plugins.AdMob.showInterstitialAd();
} 
```

# c++ - 从大小在编译时已知的字面量构造类似对象的字符串

> ID：15490783
> 
> 赞同：0
> 
> 时间：2013-03-19T03:02:30.520
> 
> 标签：c++, templates, constructor, struct

任何人都可以帮助解释以下构造函数的工作原理，

```
class StringData {
  public:
    /**
     * Constructs a StringData explicitly, for the case of a literal whose size is known at
     * compile time.
     */
    struct LiteralTag {};
    template<size_t N>
    StringData( const char (&val)[N], LiteralTag )
        : _data(&val[0]), _size(N-1) {}

private:
    const char* _data;        // is not guaranted to be null terminated 
    mutable size_t _size;     // 'size' does not include the null terminator
} 
```

为什么不直接使用这个构造函数？

```
StringData(const char *c):_data(c){} 
```

完整的源代码可以在这里找到：http: [//api.mongodb.org/cplusplus/1.7.1/stringdata_8h_source.html](http://api.mongodb.org/cplusplus/1.7.1/stringdata_8h_source.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:37:34.217

您将`StringData(const char *c):_data(c){}`不知道大小，或者必须`strlen`在运行时计算出大小。除非 char 数组以 null 结尾（以 char '\0' 结尾），否则这将不起作用。

使用模板版本，编译器将在编译时计算出数组的大小，并正确初始化 size 成员。构造函数接受对固定大小数组的引用，编译器将根据您传递给构造函数的实际数组（和大小）实例化匹配的构造函数。这一切都发生在编译时，不太容易出现人为错误。

# javascript - .js.erb 文件中的 link_to

> ID：15490784
> 
> 赞同：3
> 
> 时间：2013-03-19T03:02:42.687
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, link-to

出于某种原因，当我在 show.js.erb 文件中使用 link_to 时，javascript 不起作用......

这有效：

```
$(".commentvotecount<%= params[:commentid]%>").html("<%= positiveVoteCount = @comment.plusminus %>"); 
```

这不会：

```
$(".commentvotecount<%= params[:commentid]%>").html("<%= positiveVoteCount = @comment.plusminus %> <%= link_to 'About', '/about' %>"); 
```

出了什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T03:04:15.040

使用 escape_javascript 所以引号被转义。

```
$(".commentvotecount<%= params[:commentid]%>").html("<%= escape_javascript link_to('About', '/about') %>"); 
```

# php - 通讯确认/订阅确认

> ID：15490789
> 
> 赞同：0
> 
> 时间：2013-03-19T03:03:17.803
> 
> 标签：php, validation, newsletter

我的网站上有一个时事通讯订阅表格，我希望它转到一个页面

确认用户已注册。目前它只是刷新页面并给出

您在表单框所在的位置发送一条小消息。经过测试，它也不在乎是否

您将电子邮件地址输入错误等。我想要它，因此它会检查此信息并且仅

提交正确的电子邮件地址。目前那里的代码是

```
<?php

// get vars
$email_address = strtolower(trim($_REQUEST['email_address']));

if((strlen($email_address) > 0) && (strpos($email_address, "@")))
{
    // add to db
    $newsletterQry = db_query("SELECT * FROM newsletter_subscribers WHERE email='" . mysql_real_escape_string($email_address) . "'");
    if(db_num_rows($newsletterQry) == 0)
    {
        // add
        db_query("INSERT INTO newsletter_subscribers (email, created) VALUES ('" . mysql_real_escape_string($email_address) . "', NOW())");
    }
}

// return back to the index page with confirmation
header("location: ".$_SERVER["HTTP_REFERER"]."?nlMsg=".urlencode("You've been added to the site newsletter."));
exit;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:10:00.767

请参阅[如何在 PHP 中验证电子邮件](https://stackoverflow.com/a/5855853/463038)的解决方案。您想使用 RegEx 或 PHP 的内置[`filter_var()`](http://php.net/manual/en/filter.examples.validation.php)函数清理电子邮件地址。

```
<?php
$email_address = strtolower(trim($_REQUEST['email_address']));
if (filter_var($email_address, FILTER_VALIDATE_EMAIL)) {
    // This email address is valid insert into newsletter 
} 
```

# javascript - 确定二维点是否在四边形内

> ID：15490795
> 
> 赞同：9
> 
> 时间：2013-03-19T03:04:27.283
> 
> 标签：javascript, algorithm, geometry

我正在开发一个 JS 程序，我需要确定点是否在坐标系的四个角内。

有人可以指出我的答案方向吗？

我正在研究我认为所谓的凸四边形。也就是说，四个完全随机选择的角位置，所有角度都小于 180°。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T03:30:12.780

有两种相对简单的方法。第一种方法是从该点向“无穷远”（实际上是多边形外的任何点）绘制一条射线，并计算该射线与多边形的多少边相交。当且仅当计数为奇数时，该点才在多边形内。

第二种方法是按顺序绕过多边形，对于每对顶点 v [i]和 v [i+1]（如果需要，绕到第一个顶点），计算数量 (x - x [i] ) * (y [i+1] - y [i] ) - (x [i+1] - x [i] ) * (y - y [i] )。如果这些量都具有相同的符号，则该点位于多边形内部。（这些量是向量 (vi [+1] - vi [)]和 (p - v [i] ) 的叉积的 Z 分量。它们都具有相同符号的条件与 p 存在的条件相同每个边缘的同一侧（左侧或右侧）。）

两种方法都需要处理点正好在边或顶点上的情况。您首先需要决定是否要计算这些点是否在多边形内。然后你需要相应地调整测试。请注意，无论哪种方式，轻微的数字舍入误差都会给出错误的答案。这只是你必须忍受的东西。

由于您有一个凸四边形，因此还有另一种方法。选取任意三个顶点并计算该点和第四个顶点相对于由三个选定顶点形成的三角形的[重心坐标。](http://en.wikipedia.org/wiki/Barycentric_coordinate_system)如果该点的重心坐标均为正且均小于第四个顶点的重心坐标，则该点在四边形内。

PS刚刚在[这里](http://erich.realtimerendering.com/ptinpoly/)找到了一个不错的页面，其中列出了很多策略。其中一些非常有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:29:46.977

您需要使用绕组或光线追踪方法。

使用缠绕，您可以确定任何点是否在使用线段构建的任何形状内。

基本上，您将每个线段与该点相乘，然后将所有结果相加。这就是我在给定一组星座线的情况下确定一颗恒星是否在星座中的方法。我可以看到还有其他方法..

[http://en.wikipedia.org/wiki/Point_in_polygon](http://en.wikipedia.org/wiki/Point_in_polygon)

在一些地方必须有一些代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-14T06:16:23.350

查看一个点是否位于三角形内要容易得多。

任何四边形都可以分成两个三角形。

如果该点在构成四边形的两个三角形中的任何一个中，则该点在四边形内。

# android - 在android编程中单击时获取ArrayList中元素的索引？

> ID：15490797
> 
> 赞同：1
> 
> 时间：2013-03-19T03:04:38.193
> 
> 标签：android, arraylist, indexing

我在android的LinearLayout中有一个ImageButtons的ArrayList，当它单击我自己的“OnClick”事件处理程序方法运行时。

我想从它自己的 OnClick 事件中获取 ArrayList 中元素（ImageButton）的索引。

但是，到目前为止，我无法提出解决方案。

否则我应该创建一个自定义 ImageButton，它的索引为整数，这更复杂。

有什么好的解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T08:10:13.167

请看看这个。它可能会帮助你。

```
//This is your arraylist of buttons
ArrayList<ImageButton> buttons ;

...

//This is your click listener
onClick(View view){

   ImageButton clickedButton = (ImageButton)view;
   int index = buttons.indexOfObject(clickedButton);
   if(index!=-1){
     //Your imagebutton clicked
   }
} 
```

# java - Java HashMap 哈希函数

> ID：15490803
> 
> 赞同：0
> 
> 时间：2013-03-19T03:05:27.857
> 
> 标签：java, collections, hash, hashmap

我正在通过 Java 的 HashMap hash() 实现，如下所示

```
final int hash(Object k) {
            // some checks
            h ^= k.hashCode();
            // This function ensures that hashCodes that differ only by
            // constant multiples at each bit position have a bounded
            // number of collisions (approximately 8 at default load factor).
            h ^= (h >>> 20) ^ (h >>> 12);
            return h ^ (h >>> 7) ^ (h >>> 4);
                   // >>> is Unsigned right shift
    } 
```

我不确定为什么要添加下面的代码，以及这样做有什么好处？

```
 h ^= (h >>> 20) ^ (h >>> 12);
        return h ^ (h >>> 7) ^ (h >>> 4); 
```

或者，如果我从实现中删除上述代码，让我重新提出我的问题，有什么缺点？我了解它如何避免碰撞的机会，但不确定“确切”如何？

有人可以通过举个例子来帮助我理解，并解释它在使用和不使用上述代码的情况下如何工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T03:09:31.930

Java 哈希表实现不是将表的大小调整为素数大小，而是两倍的大小。这允许它使用快速位掩码而不是昂贵的余数运算，这通常是一件好事，但缺点是特别糟糕的散列函数可能比平时有更多的冲突。您引用的代码以最小化额外冲突的方式混合了哈希的位。

# c# - MVC3 锁定会员用户

> ID：15490815
> 
> 赞同：3
> 
> 时间：2013-03-19T03:06:39.577
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-membership, custom-membershipprovider

我希望我网站上的管理员能够锁定成员，但默认 mvc 成员身份的 IsLockedOut() 是只读的。我读到我需要创建一个自定义会员提供程序，但我不完全确定这意味着什么。我需要创建一个具有 membersUser 属性的新模型吗？如果可能，我不想在数据库中创建新表。

这是我的 lockUser 方法的代码：

```
public static void LockUser(this MembershipUser user)
    {
        using (var db = new MovieContext())
        {
            Guid userid = (Guid)user.ProviderUserKey;
            MembershipUser member = Membership.GetUser(userid);
            member.IsLockedOut = true;
            member.LastLockoutDate = DateTime.Now;
            db.SaveChanges();
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T03:14:17.503

安德鲁，试试这个方法。它使用 IsApproved 而不是 IsLockedOut。如果您的实现尚未使用 IsAproved，这将是一个很好的解决方案。

```
MembershipUser muUser = Membership.GetUser(strUsernameToActOn);
muUser.IsApproved = false;
Membership.UpdateUser(muUser); 
```

这并不完全锁定用户。从技术上讲，此呼叫正在从用户那里获得批准状态，并使他们无法登录。

# c# - 当组合框中的选择更改时动态更改列表框项目

> ID：15490819
> 
> 赞同：1
> 
> 时间：2013-03-19T03:07:20.657
> 
> 标签：c#, wpf, xaml

我有一个组合框，允许用户选择他们想要的选择。基于对组合框的选择，我将显示带有与用户选择相关的字符串列表的列表框。

示例：用户在组合框上选择“动物”，列表框将显示“猴子、马、猪”。

尝试用最少的编码（XAML 驱动）创建这个简单的绑定，但 1 天无济于事。提前致谢！

编辑：

嗨，对于那些有兴趣以另一种方式（仅使用 xaml 和一个类来存储您的所有数据）的人，您可以在提供的链接中查看 Jehof 的答案。这是实现这一目标的一种非常简单的方法。

[ListBox 不显示绑定数据](https://stackoverflow.com/questions/15494963/listbox-does-not-display-the-binding-data)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:19:25.203

这是您正在寻找的内容的快速示例（帮助您入门）。

首先创建一个包含所有数据的对象并将其绑定到 . `ComboBox`，然后使用 Comboboxes`SelectedItem`填充`ListBox`.

代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    { 
        InitializeComponent(); 
        Categories.Add(new Category { Name = "Animals", Items = new List<string> { "Dog", "Cat", "Horse" } });
        Categories.Add(new Category { Name = "Vehicles", Items = new List<string> { "Car", "Truck", "Boat" } });

    }

    private ObservableCollection<Category> _categories = new ObservableCollection<Category>();
    public ObservableCollection<Category> Categories
    {
        get { return _categories; }
        set { _categories = value; }
    }
}

public class Category
{
    public string Name { get; set; }
    public List<string> Items { get; set; }
} 
```

xml:

```
<Window x:Class="WpfApplication10.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">

        <StackPanel DataContext="{Binding ElementName=UI}">
            <ComboBox x:Name="combo" ItemsSource="{Binding Categories}" DisplayMemberPath="Name"/>
            <ListBox ItemsSource="{Binding SelectedItem.Items, ElementName=combo}"/>
        </StackPanel>
</Window> 
```

结果：

![在此处输入图像描述](../Images/75491fc299f726d013b86518bb8d8fa9.png) ![在此处输入图像描述](../Images/27de3baca5740b10d85eed32ae2e3e04.png) ![在此处输入图像描述](../Images/edf854fd2676fac0a0e1a68bcf2bc610.png)

# jquery - 在一个 div 动画仍然落后于其他 div 之后

> ID：15490826
> 
> 赞同：0
> 
> 时间：2013-03-19T03:07:58.427
> 
> 标签：jquery, css, jquery-animate, width, mouseenter

情况：我有 3 个 div 的 |left|center|right| 我在左侧有 3 个其他 div，在右侧有 3 个其他 div。当我传入这 6 个 div 中的任何一个时，它们都会增加宽度。右边没问题，但是左边，当它长大时，仍然在中心 div 后面。

也更容易看到：将鼠标移到左侧菜单上，您仍然可以看到中心 div 中的文本。这种行为不会发生在右侧。

```
 <div class="wrapper">
        <div class="menu_left">
            <div class="item_left"> </div>
            <div class="item_left"> </div>
            <div class="item_left"> </div>
        </div>

        <div class="central">XXXXXXXX XXXXXXX</div>

        <div class="menu_right">
            <div class="item_right"> </div>
            <div class="item_right"> </div>
            <div class="item_right"> </div>
        </div>
    </div>
<script>
    //$("div").fadeIn(3500);

    $(".item_left").mouseenter(function() {
        $(this).animate({ width: "240px"}, 350);

    });
    $(".item_left").mouseleave(function() {
        $(this).animate({ width: "100px" }, 350);
    });
    $(".item_right").mouseenter(function() {
        $(this).animate({ width: "240px"}, 350);
    });
    $(".item_right").mouseleave(function() {
        $(this).animate({ width: "100px" }, 350)
    });
</script> 
```

[http://jsfiddle.net/lcssanches/E7B3t/1/](http://jsfiddle.net/lcssanches/E7B3t/1/)

**编辑：**

左侧菜单：我想避免这个
![左菜单](../Images/4931278edac27e38c16429f663660437.png)

右菜单：正确！
![右键菜单](../Images/b494dd1c321a280098e20267b15dfd5a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T03:22:11.953

从下面的 CSS 代码来看，您似乎希望左/右项目覆盖 central `div`，只有您的错误是拼写错误 -`postion:`应该是`position:`

```
div.menu_left,div.menu_right{
  postion: relative;
  margin:0;
  padding:0;
  display:inline-block;
  width: 100px;
  height: 100%;
} 
```

见[http://jsfiddle.net/E7B3t/3/](http://jsfiddle.net/E7B3t/3/)

# vb.net - Step XMPP 禁止字符串字符 U+0040 (@) Jabber .NET

> ID：15490827
> 
> 赞同：0
> 
> 时间：2013-03-19T03:08:04.310
> 
> 标签：vb.net, xmpp

我正在尝试连接到用户名中包含 @ 的服务器，但每次都会收到该错误，有什么想法吗？

```
 With jcSender
        .User = username
        .Password = password
        .NetworkHost = "chat.na1.lol.riotgames.com"
        .Port = 5223
        .SSL = True
        .PlaintextAuth = True
        .Resource = "xiff"
        .AutoReconnect = True
        .AutoRoster = True
        .AutoPresence = True

    End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:08:53.920

通过使用 JID 解决了它

```
Public Function Leaguelogin(ByRef USER As String, ByRef PASSWORD As String)

    Dim account As New jabber.JID(USER + "@pvp.net/xiff")
    Dim j As New JabberClient
    Try         

        j.AutoPresence = True
        j.AutoLogin = True
        j.Server = "pvp.net"
        j.NetworkHost = "chat.na1.lol.riotgames.com"
        j.SSL = True
        j.Port = 5223
        j.PlaintextAuth = True

        j.User = account.User
        j.Password = "AIR_" + PASSWORD
        j.Connect()
        j.Login()
        j.IsAuthenticated = True

    Catch ex As Exception
        MsgBox(ex.Message)
    End Try

End Function 
```

# c# - 为什么不用 OAuth 也能登录 Facebook？

> ID：15490830
> 
> 赞同：0
> 
> 时间：2013-03-19T03:08:21.270
> 
> 标签：c#, windows, facebook, windows-phone-7

我正在使用 windows phone 并尝试将 Facebook 与我的应用程序集成。但我发现登录机制使用的是 OAuth 2.0。谁能解释为什么微软嵌入式人员中心和微软 Facebook 应用程序（XAP）可以在没有 OAuth 的情况下登录。他们是否使用 WebAPI 而不是 OAuth？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:04:56.660

试试[Parse](https://parse.com/products/social#resources)我已经在 iOS、Android 和 Windows Phone 8 上使用过它。它非常易于集成、免费，而且您可以访问 Facebook 的所有 API。

# c# - ASP.Net 找不到 .Net 框架提供程序

> ID：15490831
> 
> 赞同：0
> 
> 时间：2013-03-19T03:08:31.593
> 
> 标签：c#, asp.net, mysql, visual-studio, connection-string

在将站点上传到 Godaddy 服务器的过程中，使用 MySql 的数据网格会导致问题。错误与 Web 配置一起在下面输出。问题似乎是服务器没有正确安装要求，例如我的 Web 配置中的 MySql.Data，但我不确定该怎么做。.Net MySql 连接器安装在本地系统上并且运行良好。这是输出的错误。

```
Unable to find the requested .Net Framework Data Provider.  It may not be installed.
Description: An unhandled exception occurred during the execution of the current web           request. Please review the stack trace for more information about the error and where it   originated in the code.

Exception Details: System.ArgumentException: Unable to find the requested .Net Framework    Data Provider.  It may not be installed.

[ArgumentException: Unable to find the requested .Net Framework Data Provider.  It may not   be installed.]
   System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) +1419911
  System.Web.UI.WebControls.SqlDataSource.GetDbProviderFactory() +67
  System.Web.UI.WebControls.SqlDataSource.GetDbProviderFactorySecure() +22
  System.Web.UI.WebControls.SqlDataSource.CreateConnection(String connectionString) +11
  System.Web.UI.WebControls.SqlDataSourceView.ExecuteSelect(DataSourceSelectArguments   arguments) +117
 System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) +21
 System.Web.UI.WebControls.DataBoundControl.PerformSelect() +143
  System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +74
  System.Web.UI.WebControls.GridView.DataBind() +4
  System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +66
  System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls() +75
  System.Web.UI.Control.EnsureChildControls() +102
   System.Web.UI.Control.PreRenderRecursiveInternal() +42
  System.Web.UI.Control.PreRenderRecursiveInternal() +175
  System.Web.UI.Control.PreRenderRecursiveInternal() +175
  System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean     includeStagesAfterAsyncPoint) +2496 
```

网络配置：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
For more information on how to configure your ASP.NET application, please visit
http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration> 
```

```
<add name="GoDaddy" connectionString=" Server=***; Database=kappalambda; User ID=***; Password=***; Trusted_Connection=False" providerName="System.Data.SqlClient" />

<!--<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial  Catalog=aspnet-Kappa Lambda-20130125180802;Integrated  Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-Kappa Lambda-20130125180802.mdf"
    providerName="System.Data.SqlClient" />     
         -->
   <add name="noahtk_DirectoryKappaSigAppConnectionString"  connectionString="server=***;User  Id=noahtk_klofks;password=***;database=***"
   providerName="MySql.Data.MySqlClient" />

  <!--  <add name="liveConnection" connectionString="server=****; User     Id=***; password=****#; database=****" providerName="System.Data.SqlClient"/>  
   -->

  </connectionStrings> 
```

```
</authentication>

<profile defaultProvider="Godaddy">
  <providers>
    <add name="Godaddy" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="Godaddy" applicationName="/" />
  </providers>
</profile>
<membership defaultProvider="Godaddy">
  <providers> 
```

```
 <!--
        If you are deploying to a cloud environment that has multiple web server instances,
        you should change session state mode from "InProc" to "Custom". In addition,
        change the connection string named "DefaultConnection" to connect to an instance
        of SQL Server (including SQL Azure and SQL  Compact) instead of to SQL Server Express.
      -->
<sessionState mode="InProc" customProvider="DefaultSessionProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
  </providers>
</sessionState> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:17:36.570

您可能需要对数据提供程序进行 bin 部署。[这个](http://support.godaddy.com/help/article/6639/do-your-hosting-accounts-support-mvc3-applications)来自 GoDaddy 的链接描述了如何对 ASP.NET MVC dll 进行 bin 部署，但是对于您拥有的包含数据提供程序的 MySQL DLL，该过程应该类似（即 copy-local 应该设置为 true）。

对不起，如果我不在正确的轨道上。

HTH，弥敦道

# c# - IIS7 会话失去了它的价值

> ID：15490832
> 
> 赞同：6
> 
> 时间：2013-03-19T03:08:40.363
> 
> 标签：c#, asp.net, asp.net-ajax, session-variables

我已经实现了一个质询-响应方案作为 Ajax 处理程序。由于某种原因，它在正常工作几个月后停止工作。调查这个问题表明，`Context.Session[KEY]`在挑战和响应调用之间已经失去了它的价值。

我在 Global.asax.cs 中放置了`Session_Start`and `Session_End`（和其他一些）方法，并在那里进行了一些日志记录，我看到一个新的 Session_Start 事件被使用相同的会话 ID 触发并且没有 Session_End 事件

问题是：为什么 IIS 会丢失会话值？

更新：我尝试切换到 SQLServer 会话，但行为没有变化。在极少数情况下，会话按预期工作，不知道为什么。我尝试了所有我发现无效的“会话丢失变量”故障排除指南

更新 2：我将问题缩小到缺少会话 cookie，但在多次尝试后修改 my.browsers 配置并没有解决问题。当我从浏览器调用 ajax 处理程序时，会话 cookie“ASP.NetSessionId”按预期显示。我将站点和服务器的 IIS 设置中的 cookie 名称更改为“SessionId”，但我仍然看到 ASP.NET，即使在重新启动服务器后也是如此。我仍然想将赏金提供给知道发生了什么的人。与此同时，我通过在代码中设置会话 cookie 来解决这个问题。

Login.ashx 的伪代码：

```
string login = GetParameter("login", context);
string passhash = GetParameter("pass", context);
string challenge = "" + Context.Session["CHALLENGE"];
if (!string.IsNullOrEmpty(challenge))
{
  // this is the 'response' part
  string challengeResponse = Crypto.GetChallengeResponse(Challenge, UserFromDB.PassHash);
  if (challengeResponse == passhash)
  {
    // Great success, challenge matches the response
    Log.I("Success");
    return "SUCCESS";
  }
  else
  {
    Log.W("Failed to respond");
    return "FAILED TO RESPOND";
  }
}
else
{
  // if passed login or session-stored challenge are empty - issue a new challenge
  challenge = "Challenge: "+ Crypto.GetRandomToken();
  Context.Session["CHALLENGE"]  = challenge;
  Log.I("Sent Challenge"); // this is what's in the log below
  return challenge;
} 
```

这是日志，每次调用都会显示会话开始，即使应该设置 Session["CHALLENGE"]，Session.Keys.Count 仍然为 0：

```
// This is the challenge request:
[] **Session started**: sr4m4o11tckwc21kjryxp22i Keys: 0  AppDomain: /LM/W3SVC/1/ROOT-4-130081332618313933 #44 
[] Processing: <sv> **MYWEBSITE/ajax/Login.ashx** SID=sr4m4o11tckwc21kjryxp22i  
[] Sent Challenge @Login.ashx.cs-80 

// this is the response, note that there's another Session started with the same id
// and the session didn't keep the value ["CHALLENGE"], there are no session-end events either
[] **Session started**: sr4m4o11tckwc21kjryxp22i Keys: 0  AppDomain: /LM/W3SVC/1/ROOT-4-130081332625333945 #93  
[] Processing: <sv> **MYWEBSITE/ajax/Login.ashx?login=MYLOGIN&pass=RuhQr1vjKg_CDFw3JoSYTsiW0V0L9K6k6==**
[] Sent Challenge @Login.ashx.cs-80 >Session: sr4m4o11tckwc21kjryxp22i 
```

网络配置，净化

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections> 
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <appSettings>
    <add key="IncludeStackTraceInErrors" value="false" />
  </appSettings>
  <connectionStrings>
    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
    <add name="MYConnection" connectionString="metadata=res://*…. and a bunch of other stuff that works" providerName="System.Data.EntityClient" />
  </connectionStrings> 
   <system.web>
    <compilation targetFramework="4.5">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>
    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>
    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>
    <pages controlRenderingCompatibilityVersion="4.0" />
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:23:28.503

空闲超时的默认值是多少？如果应用程序池超时，您的会话将再见

请参阅应用程序池（高级设置）-> 空闲超时

我认为它默认为五分钟。

[有关设置空闲超时的建议，](http://technet.microsoft.com/en-us/library/cc771956%28v=ws.10%29.aspx)请参阅此链接

如果您在不需要时作为网络花园运行，您也可能会遇到问题；查看Maximum Worker Processes，尝试将其设置为1并重新测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:41:51.217

我可以看到您正在为此目的使用处理程序，该处理程序始终返回 null。您需要实现 IReadOnlySessionState。查看[http://www.hanselman.com/blog/GettingSessionStateInHttpHandlersASHXFiles.aspx](http://www.hanselman.com/blog/GettingSessionStateInHttpHandlersASHXFiles.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T05:35:04.400

将 IRequiresSessionState 添加到您的处理程序实施中

前任

公共类 handler_name:IHttpHandler, IRequiresSessionState

# python - 无法卸载模块 - Openerp

> ID：15490833
> 
> 赞同：3
> 
> 时间：2013-03-19T03:08:46.027
> 
> 标签：python, xml, module, openerp

当我要卸载自己的模块时，它会出错。（OpenErp ver 7）在我的课堂上我也输入了不同的修改。但我没有清除所有这些东西并只保留以下代码。请帮助我找出问题所在..现在当我尝试安装 address_book 模块时发生了这个错误

```
 File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/modules/registry.py", line 218, in new
    openerp.modules.load_modules(registry.db, force_demo, status, update_module)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/modules/loading.py", line 416, in load_modules
    pool.get('ir.module.module').module_uninstall(cr, SUPERUSER_ID, mod_ids_to_remove)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/base/module/module.py", line 439, in module_uninstall
    ir_model_constraint._module_data_uninstall(cr, uid, constraint_ids, context)
  File "/home/priyan/Software/openerp-7.0-20130309-002120/openerp/addons/base/ir/ir_model.py", line 533, in _module_data_uninstall
    WHERE cs.contype=%s and cs.conname=%s and cl.relname=%s""", ('f', name, model_obj._table))
AttributeError: 'NoneType' object has no attribute '_table' 
```

这是我的 view.xml 文件

```
<?xml version="1.0"?>
<openerp>
    <data>
        <!-- 1st part of the sim_view start -->
        <record model="ir.ui.view" id="worker_form">
            <field name="name">Basic Data</field>
            <field name="model">checkroll.plucker</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Worker_test">
                    <field name="reg_no" />
                    <field name="worker_name" />
                    <field name="spouse_name" />
                    <field name="gender" />
                    <field name="epf_no" />
                </form>
            </field>
        </record>
        <!--2nd part of the sim_view start -->
        <record model="ir.ui.view" id="worker_tree">
            <field name="name">Basic Data</field>
            <field name="model">checkroll.plucker</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Worker_test"><!-- which columns need to shows in OpenERP List View -->
                    <field name="reg_no" />
                    <field name="worker_name" />
                    <field name="spouse_name" />
                </tree>
            </field>
        </record>
        <!-- 3rd part of the sim_view start -->
        <record model="ir.actions.act_window" id="action_worker_reg">
            <field name="name">Worker Registration</field><!-- This shows what should 
                screen caption in form/tree views -->
            <field name="res_model">checkroll.plucker</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

    </data>
</openerp> 
```

这是我的类文件

```
from openerp.osv import fields, osv
import random

class checkroll(osv.osv):
    _name = "checkroll.plucker"
    _description = "This table is for keeping personal data of plucker"
    _columns = {
        'reg_no': fields.char('Registration Number', size=256, required=True),
        'worker_name': fields.char('Worker Name', size=256, required=True),
        'spouse_name': fields.char('Spouse Name', size=256),
        'gender' : fields.selection((('male', 'Male'), ('female', 'Female'), ('middle', 'Test')), 'Gender', required=True),
        'epf_no':fields.char('EPF Number', size=256)
    }

checkroll() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:03:05.270

我的后端中的数据映射似乎有问题。所以我以管理员身份登录到 openerp 并创建新数据库并将我的模块迁移到那里。现在它的作品完美

谢谢大家

希望任何遇到此错误的人都能从此答案中获得帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T07:58:39.670

检查您是否在**openerp** .py 中提供了所有必要的依赖项。这解决了我的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-04T21:37:58.977

升级基本模块将摆脱数据库中的旧引用，并可能有助于卸载您的模块。

如果这仍然不起作用，您可以自担风险尝试这个[独立的脚本。](https://web.archive.org/web/20150705113707/http://ychaouche.wikispot.org/OpenERPModuleRemover)做好备份！

***编辑***：链接更新

***EDIT2***：在这里粘贴**uninstall_module.py**，这样它就不会消失。

*如果*您想使用它，请备份您的数据。您可以通过传入数据库名称和模块名称来调用脚本。这是一个例子：

```
chaouche@karabeela ~/CODE/OPENERP/TEST $ python uninstall_module.py test helloworld
No handlers could be found for logger "openerp.modules.graph"
data browse_record(ir.model.constraint, 352)
data.name newfield_country_id_fkey
data browse_record(ir.model.constraint, 353)
data.name newfield_res_partner_category_rel_partner_id_fkey
data browse_record(ir.model.constraint, 354)
data.name newfield_res_partner_category_rel_category_id_fkey
data browse_record(ir.model.constraint, 355)
data.name newfield_title_fkey
data browse_record(ir.model.constraint, 356)
data.name newfield_parent_id_fkey
data browse_record(ir.model.constraint, 357)
data.name newfield_user_id_fkey
data browse_record(ir.model.constraint, 358)
data.name newfield_company_id_fkey
data browse_record(ir.model.constraint, 359)
data.name newfield_section_id_fkey
data browse_record(ir.model.constraint, 360)
data.name newfield_state_id_fkey
chaouche@karabeela ~/CODE/OPENERP/TEST $ 
```

这是**uninstall_module.py**：

```
import openerp
import logging
import sys
import argparse
_logger = logging.getLogger(__name__)

class ModuleRemover:
    _logger = logging.getLogger(__name__)
    uid        = openerp.SUPERUSER_ID

    def __init__(self,database,module_name):
        """
        """
        self.module_name = module_name
        self.pool        = openerp.modules.registry.RegistryManager.get(database)
        self.cr          = self.pool.db.cursor()

    def uninstall(self):
        """
        """
        module      = self.pool.get("ir.module.module")
        constraint  = self.pool.get("ir.model.constraint")
        model_data  = self.pool.get('ir.model.data')
        module_id   = module.search(self.cr,self.uid,[("name","=",self.module_name)])[0]
        module_name = module.browse(self.cr,self.uid,module_id).name
        ids         = constraint.search(self.cr, self.uid, [('module', '=', module_id)])
        self.cleanup(constraint,ids)
        model_data._module_data_uninstall(self.cr,self.uid,[module_name])
        module.write(self.cr, self.uid, module_id, {'state': 'uninstalled'})

    def cleanup(self,constraint,ids):
        """
        """
        for data in constraint.browse(self.cr,self.uid,ids):
            print "data",data
            model = data.model.model
            model_obj = type("tmp",(),{})()
            model_table = model
            name = openerp.tools.ustr(data.name)
            print "data.name",name
            typ = data.type
            if typ in ("u",'f'):
                # test if FK exists on this table (it could be on a related m2m table, in which case we ignore it)
                SQL = """SELECT 1 from pg_constraint cs JOIN pg_class cl ON (cs.conrelid = cl.oid)
                           WHERE cs.contype=%s and cs.conname=%s and cl.relname=%s""" % (typ, name, model_table)
                print SQL
                self.cr.execute(SQL)
                if self.cr.fetchone():
                    SQL = 'ALTER TABLE "%s" DROP CONSTRAINT "%s"' % (model_table, name)
                    print SQL
                    self.cr.execute(SQL)
                    print 'Dropped FK CONSTRAINT %s@%s' % (name, model)

        constraint.unlink(self.cr, self.uid, ids)

def main():
    argparser = argparse.ArgumentParser()
    argparser.add_argument("database", help="openerp database"     ,type=str, )
    argparser.add_argument("module"  , help="module to uninstall"  ,type=str, )
    args = argparser.parse_args(sys.argv[1:])
    ModuleRemover(args.database,args.module).uninstall()

if __name__ == "__main__":
    main() 
```

对于轶事，这就是让我放弃 openerp/oodoo 的原因，还有[其他一些原因](https://web.archive.org/web/20150711145851/http://ychaouche.wikispot.org/TheProblemWithOpenERP)。

# android - AndEngine Text.setText 不工作

> ID：15490834
> 
> 赞同：0
> 
> 时间：2013-03-19T03:08:46.610
> 
> 标签：android, andengine

我创建了一个帮助类，它将根据我提供的自定义字体和文本返回 Text 对象。

这是代码：

```
public class CustomFontTextHelper {
    private Font font;
    private ITexture fontTexture; 
    private Text text;
    public Text getTextWithFont(String myText,String fontPath,BaseGameActivity activity,float x,float y,int fontsize,int color){
        fontTexture = new BitmapTextureAtlas(activity.getTextureManager(), 256, 256, TextureOptions.BILINEAR);
        FontFactory.setAssetBasePath("fonts/");
        this.font = FontFactory.createFromAsset(activity.getFontManager(), fontTexture, activity.getAssets(), fontPath, fontsize, true, color);
        this.font.load();
        text = new Text(x, y, this.font, myText, activity.getVertexBufferObjectManager());
        return text;
    }
} 
```

使用这个助手类，我创建了一个文本并附加到我的场景中。它工作完美。但是当我尝试使用 text.setText 方法更改文本时，它会崩溃。

下面是我用来更改文本的代码。

```
public class StartingScreen extends BaseGameActivity {
    // ===========================================================
        // Constants
        // ===========================================================

        private static final int CAMERA_WIDTH = 480;
        private static final int CAMERA_HEIGHT = 720;

        // ===========================================================
        // Fields
        // ===========================================================

        public Text loadingPercentage;
        public float percentLoaded;
        public CustomFontTextHelper fontHelper;
    @Override
    public EngineOptions onCreateEngineOptions() {
        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
        return new EngineOptions(true, ScreenOrientation.PORTRAIT_SENSOR, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }
    @Override
    public void onCreateResources(
            OnCreateResourcesCallback pOnCreateResourcesCallback)
            throws Exception {
        pOnCreateResourcesCallback.onCreateResourcesFinished();

    }
    @Override
    public void onCreateScene(OnCreateSceneCallback pOnCreateSceneCallback)
            throws Exception {
        this.mEngine.registerUpdateHandler(new FPSLogger());
        final Scene scene = new Scene();
        scene.setBackground(new Background(0, 0, 0));
        fontHelper = new CustomFontTextHelper();
        percentLoaded = 0;
        loadingPercentage = fontHelper.getTextWithFont("0%", "MyriadPro-Cond.ttf", this, CAMERA_WIDTH-120, 100, 64, Color.BLACK);
        scene.attachChild(loadingPercentage);
        pOnCreateSceneCallback.onCreateSceneFinished(scene);
    }
    @Override
    public void onPopulateScene(Scene pScene,
            OnPopulateSceneCallback pOnPopulateSceneCallback) throws Exception {
        pOnPopulateSceneCallback.onPopulateSceneFinished();
        loadingPercentage.setText("5%");
        new Thread(new Runnable(){

            @Override
            public void run() {
                int incr;
                for (incr = 0; incr <= 100; incr+=5) {
                    StartingScreen.this.runOnUpdateThread(new Runnable(){

                        @Override
                        public void run() {
                            // TODO Auto-generated method stub
                            StartingScreen.this.loadingPercentage.setText(Float.toString(StartingScreen.this.percentLoaded) + "%");
                        }

                    });

                            try {
                                Thread.sleep(5*1000);
                            } catch (InterruptedException e) {

                            }
                }

                // TODO Auto-generated method stub

            }

        }).start();
        // TODO Auto-generated method stub

    } 
```

请帮我写代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T14:05:49.427

据我所见，您正在使用**AndEngine GLES2**，因此正如 Matim 已经说过的，您可以更改`Text`实例。问题是，当您`Text`第一次实例化对象时，您要么需要包含一些文本，要么更好地告诉对象它必须保存多少个字母（最大）。所以而不是

```
 text = new Text(x, y, this.font, myText, activity.getVertexBufferObjectManager()); 
```

你做

```
 int textLength = 4;
 text = new Text(x, y, this.font, myText, textLength, activity.getVertexBufferObjectManager()); 
```

我只是将长度设置为 4，因为您将其用作百分比，它只能介于**0%**和**100%**之间，因此最多4 个字母。当然，您可以根据需要设置文本长度，如果将其设置为 1000 并且仅在文本中输入“hello”，则可以（如果可以，将它们缩小以节省内存）。

之后你不能重置文本大小——这意味着，一旦你创建了一个`Text object`长度为 5 的字母，你就不能在里面放 6 个字母，也不能调用像 setSize(6) 这样的东西。这是行不通的。

我希望这有帮助！

*   克里斯托夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:07:10.217

正如游戏机器人所指出的，问题在于文本长度。但是，我想同时回答这个问题和下一个问题。下一个问题是，如何避免将文本从一个值更改为另一个值时出现延迟，解决方案是使用您计划使用的所有字符初始化文本，如下所示：

```
Text text = new Text(x, y, this.font, "1234567890%",activity.getVertexBufferObjectManager());
text.setText("0%"); 
```

这种形式的构造函数将最大文本长度设置为初始字符串的长度，因此在本例中为 11。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T04:40:42.620

文本只是设置你的文本值，你不能改变那个文本，

如果您想更改文本，请使用 ChangeableText。

```
ChangeableText changeableText = new ChangeableText(x, y, Font, "Your Text");
yourscene.attachChild(changeableText);
changeableText.setText("Your New Text"); 
```

# node.js - 函数无法返回值

> ID：15490836
> 
> 赞同：0
> 
> 时间：2013-03-19T03:08:55.853
> 
> 标签：node.js, function, return, steganography

所以我正在制作一个简单的隐写工具（加密图像中的消息）并通过 Node.js 将其作为 Web 服务公开。我对 Javascript 和 Node.js 非常陌生，尤其是。该应用程序首先将文本字符串转换为二进制字符串，方法是将每个字符更改为 8 位 ASCII 编码，从而生成一个大的二进制字符串。然后我在像素内加密消息。像素的偶数值代表二进制中的 0，奇数值代表 1。字符串的结尾连续标记为 3 个像素值 100（这是暂时的，直到我找到更好的方法来标记结尾）。我正在使用一个名为“pngjs”的 node.js 库，它可以让我对 png 图像进行像素级访问。

所以我对 decodeMessage 函数有问题。它构建字符串消息，然后打算返回它，但是最后的返回调用导致未定义。

我该如何解决？

在此先感谢您的帮助！

```
function encodeMessage(image, mes) {

    var message = mes;

    var fs = require('fs'),
    PNG = require('pngjs').PNG;

    fs.createReadStream(image)
    .pipe(new PNG({
        filterType: 4
    }))
    .on('parsed', function() {

        for (var y = 0; y < this.height; y++) {
            for (var x = 0; x < this.width; x++) {
                var idx = (this.width * y + x);// << 2;
                //console.log(idx); 
                if (idx < message.length) {

                    var item = message.charAt(idx);

                    /* if the character in the encoded string is 0 */
                    if (item == 0) {
                        /* if the pixel is odd, we want it to be even */
                        if (this.data[idx] % 2 == 1) {
                        /* if the pixel is 0, add 1 to it */
                        if (this.data[idx] == 0) {
                            this.data[idx] = this.data[idx] + 1;
                        } else {
                            /* else substract 1 */
                            this.data[idx] = this.data[idx] - 1;
                        }
                        }
                    } else {
                        /* if the character in the encoded string is 1 */
                        if (this.data[idx] % 2 == 0) {
                        if (this.data[idx] == 0) {
                            this.data[idx] = this.data[idx] + 1;
                        } else {
                            this.data[idx] = this.data[idx] - 1;
                        }
                        }
                    }

                    //console.log(this.data[idx]);

                } else if (idx === message.length) {

                    /* do something to the first pixel following the end of the string */
                    this.data[idx] = 100;
                    this.data[idx+1] = 100;
                    this.data[idx+2] = 100;
                    //console.log(this.data[idx]);

                } else {

                    /* do something to the remaining pixels */

                }                  
            }
        }
        this.pack().pipe(fs.createWriteStream('encoded_' + image));
    });
}

function decodeMessage(image) {
    var message = "";

    var fs = require('fs'),
    PNG = require('pngjs').PNG;

    fs.createReadStream(image)
    .pipe(new PNG({
        filterType: 4
    }))
    .on('parsed', function() {

        dance:
        for (var y = 0; y < this.height; y++) {
            for (var x = 0; x < this.width; x++) {

                var idx = (this.width * y + x);// << 2;

                if (this.data[idx] == 100 && this.data[idx+1] == 100 && this.data[idx+2] == 100) {
                    break dance;
                } else {

                    if (this.data[idx] % 2 == 0) {
                        message += "0";
                    } else {
                        message += "1";
                    }

                }

            }
        }
        /* the message outputs correctly over here */
        console.log(message);
        //return message;
    });

    /* but the return of the variable here doesn't work */
    return message;
}

exports.encodeMessage = encodeMessage;
exports.decodeMessage = decodeMessage; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:10:52.390

该`parsed`事件是异步触发的，因此您不能从`decodeMessage`.

```
function decodeMessage(image, cb) {

  // Code
  .on('parsed', function() {
    // Code

    console.log(message);
    cb(message);
  });
} 
```

然后，您必须将回调传递给您的`decodeMessage`函数。

```
decodeMessage(image, function(decoded){
  // Here is the decoded data.
}); 
```

`encodeMessage`您的函数也是如此。该函数将在编码完成之前返回。如果您想知道何时完成，则需要以相同的方式传递回调。

# java - 在多线程环境中使用 java.awt.Robot

> ID：15490840
> 
> 赞同：3
> 
> 时间：2013-03-19T03:09:31.690
> 
> 标签：java, multithreading, awt, awtrobot, tetris

我正在开发一个（虚拟）有竞争力的自动俄罗斯方块播放器。

由于游戏具有竞争力，我自然希望我的俄罗斯方块玩家同时按下尽可能多的键。我想出的解决方案是为每种按键分配一个线程（这样，如果发送了两个相同的键，则会有延迟，因为它们在同一个线程上。但是如果发送了两个单独的键，它们的线程也分别执行，导致同时按下两个键）。

但是由于多线程，我担心 java.awt.Robot 不是线程安全的（并且 googles/SO 搜索结果没有关于该主题的信息）。我想避免在我正在使用的 Robot 对象上创建锁——如果我这样做，整个系统将变得毫无意义（因为不会同时有多个按键，每个按键都会一个接一个地出现） .

一种可能性是可能同时使用多个机器人（每个线程一个），但我不太确定它们不会简单地相互冲突。

那么，如何在多线程环境中处理一个Robot对象，从而可以同时执行多个动作呢？

# vba - 如何在 ms 访问表单中运行不同的数据库查询

> ID：15490843
> 
> 赞同：0
> 
> 时间：2013-03-19T03:09:37.297
> 
> 标签：vba, ms-access-2007

我有以下代码来运行保存的查询并将数据导出到 Excel 报告。如果此查询位于不同的数据库中，我应该如何更改代码？

```
DoCmd.Requery Q_Check_Mismatches
DoCmd.RunSavedImportExport "Export-Q_Check_Mismatches" 
```

我知道我们可以将所有相关表链接到当前数据库，然后在本地运行查询。但由于数据库大小问题，我需要这个。

感谢您的回复

干杯

沙巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:12:31.690

以下代码对我有用

```
Function QueryRun(strDBPath As String, strImportExport As String) 

Dim objAccess As Access.Application 

Set objAccess = CreateObject("Access.Application") 
objAccess.OpenCurrentDatabase 

strDBPath objAccess.DoCmd.RunSavedImportExport strImportExport 
objAccess.CloseCurrentDatabase 
objAccess.Quit 
Set objAccess = Nothing 
End Function 
```

干杯

沙巴

# javascript - Android to BB10 Porting Phone Gap Application (Same Origin Policy Issue)

> ID：15490853
> 
> 赞同：2
> 
> 时间：2013-03-19T03:11:11.097
> 
> 标签：javascript, android, blackberry-10, blackberry-android

我正在尝试将 phonegap Android 应用程序移植到 bb10，问题是 android web-view 不遵循同源策略，因此应用程序在 Android 上运行良好。但似乎 BB10 网络视图遵循同源策略。所以应用程序在 BB10 设备中无法正常工作。有没有办法在Android代码或java脚本中禁用BB10中的这个SOP？

**编辑：** 对此的小澄清：

电话间隙应用程序在 Web 视图中打开一个 HTML/Java 脚本文件。所以现在我要将 Phone gap Android 应用程序移植到 BB10。标准网络浏览器遵循“[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)”但似乎 android web 视图不遵循该策略，所以这就是我们能够在 web 视图中调用 ajax 请求的原因。

但 bb10 网络视图行为似乎有所不同。那么有没有人尝试将Android Phonegap 应用程序成功移植到BB10 上？以及如何在BB10 中满足SOP？

# jquery - 嵌套元素悬停手柄

> ID：15490859
> 
> 赞同：3
> 
> 时间：2013-03-19T03:11:58.410
> 
> 标签：jquery

所有，我遇到了一个处理嵌套元素悬停处理程序的问题。看来当鼠标进入`child`div时，祖先也处于`hover`状态，有什么方法可以触发`hoverout`祖先事件，当鼠标进入`child`元素时？

以下是我到目前为止尝试做的事情。请审查它。

```
<style>
div
{
    border:1px solid red;
    margin:10px;
    padding:10px;
}
</style>

  <script>
      $(function() {
           $('div').each(function(){
             var current = this;
             $(this).hover(function(event){
                event.stopPropagation();// doesn't work.
                console.log('Capture for hover in ' + current.tagName + '#'+ current.id +
                    ' target is ' + event.target.id); },
               function(event){
                  event.stopPropagation();
                  console.log('Capture for hover out' + current.tagName + '#'+ current.id +
                    ' target is ' + event.target.id); });

                            });
                        });
 </script>

 <body id="greatgrandpa">                        
        <div id="grandpa">
               <div id="parent">
                  <div id="child"/>
               </div>
        </div>
 </body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T03:54:00.437

该`.hover()`方法为`mouseenter`和`mouseleave`事件绑定处理程序。您可以使用它在鼠标位于元素内时简单地将行为应用于元素。

但是，如果您使用`mouseover`and`mouseout`事件，这些事件会在鼠标移入和移出元素及其后代时触发。

有关您示例的替代尝试，请参阅[http://jsfiddle.net/5yQY5/ 。](http://jsfiddle.net/5yQY5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:38:19.170

改用 mouseover 和 mouseout 事件

```
$(function() {
    $('div').on('mouseover', function(e){
        e.stopPropagation();
        $(this).addClass('my-bg');
    }).on('mouseout', function(e){
        $(this).removeClass('my-bg');
    })
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/MTYSp/)

注意：不需要遍历每个 div，然后为每个 div 添加事件处理程序，您只需调用`$('div').hover(...)`，它将`hover`为所有 div 注册处理程序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T03:41:15.300

您需要查找目标`DOM`是否`child`存在。

**例子**

```
$(this).hover(function(e){
    if($(e.target).is('div#child'))
    {
        // your child span is being hovered over
        e.stopPropagation();
    }
    else if($(e.target).is('div#parent'))
    {
        // your parent element is being hovered over
    }
}); 
```

# jquery - blur() 在 jsfiddle 上工作，但不在我的本地机器上

> ID：15490860
> 
> 赞同：0
> 
> 时间：2013-03-19T03:12:05.767
> 
> 标签：jquery

当我在本地机器上从 jsfiddle 运行相同的代码时，它不起作用。我确实有 jQuery 链接，因为我的其他 jQuery 函数正在工作。

[http://jsfiddle.net/g2kBm/56/](http://jsfiddle.net/g2kBm/56/)

```
<div class="errorbox-good">
        <div>
            <div class="form-entry">
                <label>
                    <div> First Name
                        <span class="ss-required-asterisk">*</span>
                    </div>
                </label>
                    <input type="text" id="fname" name="fname" required> 
            </div>
        </div>
    </div> 

<div class="errorbox-good">
        <div>
            <div class="form-entry">
                <label>
                    <div> Last Name
                        <span class="ss-required-asterisk">*</span>
                    </div>
                </label>
                    <input type="text" name="lname" id="lname" required> 
            </div>
        </div>
    </div> 
```

jQuery

```
$('input').blur(function() {
if ($('#fname').attr('value') == $('#lname').attr('value')) {
alert('Same Value'); return false;
} else { return true; }
}); 
```

为什么没有为我显示警报？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T03:16:41.350

jsfiddle 默认使用该[`jQuery.load()`](http://api.jquery.com/load/)方法，该方法等待页面上的所有元素都加载完毕。但根据代码片段，您可能会在加载 jQuery 之前触发 Javascript，因此什么也没有发生。

解决方案是将所有 jQuery 代码包含在[`.ready()`](http://api.jquery.com/ready/)or[`.load()`](http://api.jquery.com/load/)方法中。

```
$(document).ready(function() {
    $('input').blur(function() {
        if ($('#fname').attr('value') == $('#lname').attr('value')) {
            alert('Same Value');
            return false;
        } else { return true; }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:17:58.730

将您的代码放入`$(document).ready()`处理程序中。

```
$(document).ready( function() {
    $('input').blur(function () {
        if ($('#fname').attr('value') == $('#lname').attr('value')) {
            alert('Same Value');
            return false;
        } else {
            return true;
        }
    });
}); 
```

# php - Web 应用程序 HTML 参数传递

> ID：15490863
> 
> 赞同：1
> 
> 时间：2013-03-19T03:12:25.213
> 
> 标签：php, javascript, html, web-applications, parameter-passing

我有一个网络应用程序。我正在使用链接 ...:8080/EPQ/ 访问 Web 应用程序。Web 应用程序只有一个 HTML 文件。我在 HTML 中有以下代码。

```
<input type="hidden" name="id" id ="id" > 
```

我想通过 URL ...:8080/EPQ/ 传递这个 id 的值。让我知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:34:59.607

如果您将文件更改为具有 .php 扩展名而不是 .html，则可以使用脚本检查是否已将值添加到 url。当然，您的服务器必须安装 php 才能正常工作。

一个例子在你的 php 文件中看起来像这样。

```
<?php
    //check if var is in URL and store it in $yourVar otherwise store the string 'blank text'
    if ($_GET) {
        $yourVar = $_GET['hidden-val'];
    } else {$yourVar = 'blank text';
    }   
?> 
```

你的网址看起来像这样

[http://www.yourdomain.com/yourfile.php?hidden-val=somevalue](http://www.yourdomain.com/yourfile.php?hidden-val=somevalue)

或者如果文件是 index.php 你可以使用

[http://www.yourdomain.com/?hidden-val=somevalue](http://www.yourdomain.com/?hidden-val=somevalue)

另一种解决方案是使用 javascript/jquery 方法，它看起来像..

```
$(document).ready(function() {
    var yourVar = window.location.search.substring(1);
    alert('you passed in ' + yourVar);
} 
```

这个线程也可能有帮助..[如何从 GET 参数中获取值？](https://stackoverflow.com/questions/979975/how-to-get-the-value-from-url-parameter)

# html - 我该如何设计所有样式 除了使用 nth-child() 的第五个和第六个

> ID：15490864
> 
> 赞同：6
> 
> 时间：2013-03-19T03:12:44.187
> 
> 标签：html, css, css-selectors

我有一个简单的清单：

```
<ul>
    <li>Test</li>
    <li>Test1</li>
    <li>Test2</li>
    <li>Test3</li>
    <li>Test4</li>
    <li>Test5</li>
    <li>Test6</li>
    <li>Test7</li>
</ul> 
```

我想给`<li>`除了 5 + 6 之外的所有颜色

[http://jsfiddle.net/7yDGg/1/](http://jsfiddle.net/7yDGg/1/)

这可以只使用一个选择器来完成吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T03:23:17.733

使用 css 选择器`:not(target)`明确选择要排除的孩子。`target`用另一个选择器替换。

我们可以组合选择器`:not()`并`:nth-child()`排除特定元素。

例如在这种情况下，我们要排除第 5 个和第 6 个元素，然后使用 this:`:not(:nth-child(5))`和`:not(:nth-child(6))`.

```
ul li:not(:nth-child(5)):not(:nth-child(6)) {
    color: red; 
}
```

```
<ul>
    <li>Test 1</li>
    <li>Test 2</li>
    <li>Test 3</li>
    <li>Test 4</li>
    <li>Test 5</li>
    <li>Test 6</li>
    <li>Test 7</li>
</ul>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T03:24:05.247

最简单的方法是这样的：

```
ul li {
    color: red;
}
ul li:nth-child(5), ul li:nth-child(6) {
    color: black;
} 
```

[小提琴](http://jsfiddle.net/7yDGg/4/)更新。

# key - 如何在ERD中显示包含外键的主键？

> ID：15490865
> 
> 赞同：1
> 
> 时间：2013-03-19T03:12:52.003
> 
> 标签：key, uml, entity-relationship

绘制 ER 图时，它们不包括实体类型中的外键。但是，某些实体类型的主键是由包括外键在内的多个属性组成的。指示一个属性（或一组属性）用作主键的标准方法是在 ER 图中为它们加下划线。但是如果外键是复合主键的一部分，我如何显示它ER图中没有显示？我正在为 ER 图使用 UML 表示法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T20:47:17.780

你没有。它是另一个表中的主键，因此实体之间绘制的关系足以表明它是另一个表中的外键。

要显示复合主键，请在两个属性下划线，或者制作一个带有 2 个属性的属性，在第一个属性下划线（称之为你想要的），这表明两个“子”属性形成主键。请记住，它们是否是外国的与绘制 erd 无关。

希望这可以帮助。

# android - 如何动态重复现有的 xml 微调器

> ID：15490866
> 
> 赞同：0
> 
> 时间：2013-03-19T03:12:58.083
> 
> 标签：android, xml, dynamic, spinner

我有一个 XML 文件：my_form.xml（删节以仅显示相关视图）。微调器由 strings.xml 中的字符串数组填充

```
<?xml version="1.0" encoding="utf-8"?>
 <ScrollView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"
    android:orientation="vertical" >
<LinearLayout
        android:id="@+id/LinearLayout01"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

    <Spinner
        android:id="@+id/task"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/task_array"
        android:prompt="@string/task" />

    <TextView android:id="@+id/addTask"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"               
       android:text="Add another task"
       android:onClick="onClick"                
       android:clickable="true"/>

</LinearLayout>
</ScrollView> 
```

所以我有一个显示 xml 微调器和文本视图的活动。

单击文本视图时，我想添加相同 xml 微调器和文本视图的另一个实例，以便人们可以添加任意数量的任务。

我不想要一个多选列表视图，因为我将不得不将每个选择的项目/任务与其他单独的方法相关联

任何人都可以帮助我吗？

```
public class MyFormActivity extends FragmentActivity implements
                OnClickListener {

        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.my_form);

        final Spinner spinnerTask = (Spinner) findViewById(R.id.task);
                ArrayAdapter<CharSequence> adapter_task = ArrayAdapter
                        .createFromResource(this, R.array.task_array,
                                android.R.layout.simple_spinner_item);
                 spinnerTask.setOnItemSelectedListener(new OnItemSelectedListener() {
                    public void onItemSelected(AdapterView<?> parent, View v, int pos,
                            long row) {
                        int taskChoice = spinnerTask.getSelectedItemPosition();
                        SharedPreferences sharedPref = getSharedPreferences("FileName",
                                0);
                        SharedPreferences.Editor prefEditor = sharedPref.edit();
                        prefEditor.putInt("taskChoiceSpinner", taskChoice);
                        prefEditor.commit();
                    }

                    @Override
                    public void onNothingSelected(AdapterView<?> arg0) {
                        // TODO Auto-generated method stub

                    }
                });

        }
    View tvAddTask = (TextView) findViewById(R.id.addTask);   
            tvAddTask.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) { 
    //Here I want add another instance of the spinner and text view above
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:34:06.330

尝试这个

1 -`my_form.xml`对此进行编辑

```
<?xml version="1.0" encoding="utf-8"?>
 <ScrollView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"
    android:orientation="vertical" >
    <LinearLayout
            android:id="@+id/LinearLayout01"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >
    </LinearLayout>
</ScrollView> 
```

2 - 创建新的布局 xml 文件`text_view.xml`并将其放入其中

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"               
       android:text="Add another task"                
       android:clickable="true"/> 
```

3 - 创建新的布局 xml 文件`spinner_view.xml`并将其放入其中

```
<Spinner xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/task_array"
        android:prompt="@string/task" /> 
```

4 - 像这样编辑你的代码

```
public class MyFormActivity extends FragmentActivity implements  OnClickListener {

        private LinearLayout linear;
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.my_form);

            linear = (LinearLayout) findViewById(R.id.LinearLayout01);
            addNewView();
         }    

    private void addNewView(){
        Spinner spinnerTask = View.inflate(this, R.layout.spinner_view, null);
        TextView tvAddTask = View.inflate(this, R.layout.text_view, null); 

        linear.addView(spinnerTask);
        linear.addView(tvAddTask);

                 spinnerTask.setOnItemSelectedListener(new OnItemSelectedListener() {
                    public void onItemSelected(AdapterView<?> parent, View v, int pos,
                            long row) {
                        int taskChoice = pos;
                        SharedPreferences sharedPref = getSharedPreferences("FileName",
                                0);
                        SharedPreferences.Editor prefEditor = sharedPref.edit();
                        prefEditor.putInt("taskChoiceSpinner", taskChoice);
                        prefEditor.commit();
                    }

                    @Override
                    public void onNothingSelected(AdapterView<?> arg0) {
                        // TODO Auto-generated method stub

                    }
                });

        }

            tvAddTask.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) { 
                //Here I want add another instance of the spinner and text view above
                    addNewView();
                }
        });
}
} 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:25:23.647

您可以只编写一个调用微调器的方法，该方法将在 spinner.setOnItemSelectedListener(); 中调用。

# jquery - 滚动经过特定点时触发事件（固定 css 位置 - 粘性标题/导航）

> ID：15490867
> 
> 赞同：1
> 
> 时间：2013-03-19T03:13:01.170
> 
> 标签：jquery, scroll, css-position

我希望在用户个人资料页面上复制 Google+ 对他们的大型封面照片所做的事情。开始时很大，当您滚动到某个点时，标题（封面照片和标签导航）会更改为 position:fixed 并粘住。您可以向上滚动并再次放大照片。其他网站也已经通过导航实现了这一点（即 Techcrunch）。实际上，我什至不需要显示/隐藏/动画 div 的复杂性，一旦它粘住，它看起来有点不同，我只需要修复位置。

我在上面找到了其他帖子，但我的尝试都没有奏效。我会注意到我没有使用浏览器窗口滚动，而是使用内部 div ......所以不确定这是否是我搞砸的。

编辑*根据提供的评论使用新方法更新。虽然仍然不完美。新固定的区域不允许滚动。此外，当上面的区域粘住时，保持可滚动的区域“跳跃”（可能是因为它们都是浮动的，现在之前浮动的 div 丢失/修复了。我尝试在 body 部分添加一个 margin-top 来抵消这种情况，但没有不行。

无论如何，这里是下面的 jQuery 和 jsfiddle：

[http://jsfiddle.net/md3DV/43/](http://jsfiddle.net/md3DV/43/)

```
$('#contentMain').scroll(function(){

    if ($('#contentMain').scrollTop() > 255) {

        $(this).children('#mainInfoProfileContainer').addClass('stick');

        $(this).children('#mainNavContainerProfile').addClass('stick');

        $(this).children('#body').addClass('stick');

    }

    else {

        $(this).children('#mainInfoProfileContainer').removeClass('stick');

        $(this).children('#mainNavContainerProfile').removeClass('stick');

        $(this).children('#body').removeClass('stick');

    }

}); 
```

编辑*另外，我有一个问题，我无法在小提琴中复制。当我滚动到特定位置时，div 来回跳跃，拒绝修复......就像发生了两个相互冲突的事件。但是，小提琴中的相同代码不会发生这种情况......

# svn - SVN中是否有任何方法，以便在查看日志时，特定用户完成的签到不可见

> ID：15490868
> 
> 赞同：1
> 
> 时间：2013-03-19T03:13:28.667
> 
> 标签：svn

SVN 中是否有任何方法可以使查看日志时，特定用户所做的签入不可见。

这就是为什么需要这样做我们正在使用持续构建服务器团队城市，它在每次构建期间都会对 svn 存储库进行一些签入，并且在各种其他事件期间，最终效果是，如果我们查看 svn 日志，我们会看到来自 TeamCity 的数百个签入，因此很难查看其他开发人员所做的签入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:22:44.917

不可以。但是您可以以 XML 格式 ( `svn log --xml`) 输出日志，然后使用任何可用的脚本语言（例如[ruby​​ 与 Nokogiri](http://rubyforge.org/pipermail/nokogiri-talk/2009-June/000333.html)、[Powershell](http://blogs.technet.com/b/heyscriptingguy/archive/2012/03/26/use-powershell-to-parse-an-xml-file-and-sort-the-data.aspx)等）来解析和过滤 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:22:27.420

正如@JacobM 所说，您需要以某种方式过滤日志输出。我有完全相同的需求，因此，如果您使用的是 Windows，则可以使用`Get-SvnLog`我的开源库中的 PowerShell cmdlet。以下是我从 CruiseControl 中过滤签到的方法：

```
Get-SvnLog -ByFile | ? { $_.author -ne "cruisecontrol" } | ft -AutoSize 
```

您可以做更多的事情`Get-SvnLog`——查看 API 转到我的[API Bookshelf](http://cleancode.sourceforge.net/wwwdoc/APIbookshelf.html)并深入了解*PowerShell*，然后*是 SvnTools*。该文档目前有 16 个示例说明如何：

*   显示过去 24 小时的签到；
*   显示特定作者提交的文件；
*   显示每天的提交次数；
*   显示最常提交的文件；
*   和更多...

您还将在顶部菜单栏中找到代码的下载链接。

# javascript - JSON 字符串化将 47 字节的 json 字符串变成 340mb？

> ID：15490871
> 
> 赞同：4
> 
> 时间：2013-03-19T03:13:57.200
> 
> 标签：javascript, json

```
var keys = [7925181,"68113227"];
var vals = {"7925181":["68113227"],"68113227":["7925181"]};

var temp = [];
for (var i = 0; i < keys.length; i++) {
    temp[keys[i]] = vals[keys[i]];
}
//alert(JSON.stringify(vals).length);
alert(JSON.stringify(temp).length); 
```

当我在 Chrome 中运行该脚本时，经过很长一段时间后，我得到了 340666156 的输出。

我的问题是……如何？

注释掉的警报输出 47。在我看来，第二个警报应该产生相同的结果？该 temp 几乎应该是 val 的精确副本？

它的jsfiddle：

[http://jsfiddle.net/vMMd2/](http://jsfiddle.net/vMMd2/)

哦 - 如果你想让你的浏览器窗口崩溃（它让我的谷歌浏览器窗口崩溃了），只需在最后添加以下内容：

```
temp.forEach(function(entry) {
    alert(temp);
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T03:16:21.053

```
var keys = [7925181,"68113227"];
var vals = {"7925181":["68113227"],"68113227":["7925181"]};

var temp = {}; //  <--- !!!
for (var i = 0; i < keys.length; i++) {
    temp[keys[i]] = vals[keys[i]];
}
//alert(JSON.stringify(vals).length);
alert(JSON.stringify(temp).length); 
```

[http://jsfiddle.net/zerkms/vMMd2/2/](http://jsfiddle.net/zerkms/vMMd2/2/)

您正在创建一个稀疏数组，并且大概 V8 使用~~一些垃圾~~ ~~null~~未定义值初始化所有间隙（感谢[nnnnnn](https://stackoverflow.com/users/615754/nnnnnn)进行检查）。这需要一些时间

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-19T03:21:19.917

@zerkms，是对的。但我也想指出为什么会发生这种情况。

```
> var temp = [];
> temp[10] = 'test';
> temp 
[ , , , , , , , , , , 'test' ] 
```

如您所见，它创建了 9 个未定义的值。我用 nodejs 运行了上面的内容，所以没有显示空值。

如果我做了 JSON.stringfy() 那么你会看到：

```
> JSON.stringify(temp)
'[null,null,null,null,null,null,null,null,null,null,"test"]' 
```

# git - 哪个文件在历史上较旧？

> ID：15490874
> 
> 赞同：1
> 
> 时间：2013-03-19T03:14:13.577
> 
> 标签：git

我想比较 git 存储库中的两个文件，并判断哪个文件较早被引入存储库（按祖先，而不是时间戳）。最简单的做法是找到引入文件的单个提交 ( `rev-list HEAD -- <filename> | tail -n 1`)，并查询它们之间是否有提交 ( `rev-list commit1 ^commit2`)。然而，这是缓慢而愚蠢的。在我们找到一棵包含一个文件但不包含另一个文件的树之前，将历史一分为二呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:10:37.953

除非文件在同一线性分支中引入（即，一个在另一个的祖先中），否则无法知道。假设你在你的仓库中引入了文件 A，我在我的仓库中引入了文件 B。如果稍后我从您的回购中克隆，则无法知道哪个先出现。当然，我们可以同步时钟，但这在 git 之外。git的“时间”的唯一概念是祖先关系，其他的只是没有可比性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:50:56.380

根据我对您的了解，这可能是您正在寻找的：

```
git log --topo-order --reverse --oneline --name-only --pretty=format:"%Cgreen%ci %Cblue%cr %Cred%cn %Cgreen%h %Creset" <file1> <file2> | head -n10 
```

> --topo-order
> 在显示其所有子代之前不显示父代，并避免在混合的多行历史记录中显示提交。
> 
> --reverse
> 以相反的顺序输出提交。

有关更多选项和可能的组合，请参阅：[git-log 。](https://www.kernel.org/pub/software/scm/git/docs/git-log.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-26T09:12:21.570

使用 diff-filter=A

```
git log --reverse --format=%H --name-status --diff-filter=A -- file1 file2 | grep ^A | cut -f2 
```

对于任意数量的文件，您将在一次遍历中获得所需的排序。

# java - 未为 Class_name 类型定义方法 method_name(FileInputStream, FileOutputStream)

> ID：15490875
> 
> 赞同：0
> 
> 时间：2013-03-19T03:14:14.303
> 
> 标签：java, encryption, cryptography, blowfish

我写的一个方法似乎无法实现。我正在粘贴以下方法：

 `````
 public void decryt_data(InputStream in, OutputStream out) throws   InvalidKeyException,  IOException {
         // initialize the cipher
          cipher.init(Cipher.DECRYPT_MODE, secret_key);      
          // Bytes read from in will be decrypted
            in = new CipherInputStream(in, cipher);             
            int numRead = 0;
            while ((numRead = in.read(buf)) >= 0)
            {
                out.write(buf, 0, numRead);
            }
            out.close();
     } 
````  `我正在尝试使用 Class 的实例调用此方法，如下所示： `encryption.decrypt_data(new FileInputStream("C:/Users/Acer/Desktop/encrypted"),new FileOutputStream("C:/Users/Acer/Desktop/decrypted"));`

Eclipse 告诉我：方法 decrypt_data(FileInputStream, FileOutputStream) 未定义 AES 类型（即类名）

然而，下面的方法调用工作得很好：

`encryption.encrypt_data(new FileInputStream(fc.getSelectedFile().getPath()),new FileOutputStream("C:/Users/Acer/Desktop/encrypted"));`

等待一些帮助 :D 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:16:50.960

拼写错误`decryt_data`应该是`decrypt_data`。

您的方法被调用`public void decryt_data(InputStream in, OutputStream out)`，`p`缺少`decryt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:17:45.497

调用 decryt_data() 而不是 decrypt_data()``

# jquery - jQuery 插件 DataTables API 函数 fnFilterAll

> ID：15490879
> 
> 赞同：1
> 
> 时间：2013-03-19T03:14:19.760
> 
> 标签：jquery, plugins, filter, datatables, html-table

我正在尝试使用从这里下载的 jQuery DataTables 插件， [http://www.datatables.net/index](http://www.datatables.net/index) ，它工作得很好，但是，对于我的网站，我需要能够过滤我所有表格中的单词带有一个搜索框的页面。这里有一个详细的 API 插件， [http://datatables.net/plug-ins/api#fnFilterAll](http://datatables.net/plug-ins/api#fnFilterAll) 但我不确定如何在我的站点中使用它。我不明白这个例子，希望有人能帮助我。

我需要知道在我的脚本/脚本语句中要引用什么以及如何用我现有的表来实现它。这是我的js代码的样子......

```
var oTable =  $("#myTable").dataTable( 
            {
            "bPaginate": false,
            "bLengthChange": false,
            "bFilter": true,
            "bSort": false,
            "bInfo": false,
            "bAutoWidth": false
            }); 
```

这是我的一张桌子的样子......

```
 <table cellpadding="0" cellspacing="0" border="0" class="display" id="myTable"> 
            <thead>
                <tr>
                    <th>ALBUM</th>
                    <th>SONG</th>
                    <th>LENGTH</th>
                </tr>
                <tr>
                    <td id="album">The Unraveling</td>
                    <td></td>
                    <td></td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td></td>
                    <td>"Alive and Well"</td>
                    <td>2:06</td>
                </tr>
                <tr>
                    <td></td>
                    <td>"My Life Inside Your Heart"</td>
                    <td>3:02</td>
                </tr>
                <tr>
                    <td></td>
                    <td>"Stained Glass and Marble"</td>
                    <td>1:36</td>
                </tr>
                <tr>
                    <td></td>
                    <td>"Everchanging"</td>
                    <td>3:47</td>
                </tr>
                <tr>
                    <td></td>
                    <td>"Faint Resemblance"</td>
                    <td>2:51</td>
                </tr>
                <tr>
                    <td>_________________</td>
                    <td>__________</td>
                    <td>_____</td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td id="year">Click album art to buy!</td>
                    <td><a href="http://itunes.apple.com/us/album/the-unraveling/id291793862/"target="_blank"> <img src="images/the_unraveling.jpg" alt="The Unraveling" style="width: 100%;"> </a></td>
                    <td id="year">Total
                    <br>
                    Length 36:40</td>
                </tr>
            </tfoot>
        </table> 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:25:49.240

您所要做的就是添加一个过滤器方法，例如

```
$('#myTable_filter input').keyup(function(){
    oTable.fnFilterAll(this.value);
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/hPtxF/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T09:10:14.510

你真的应该给每个表一个类，比如.datatable。这将允许您巧妙地处理和循环所有数据表:)

```
//array to contain all datatables
var aoTables = [];

//settings for the dtatables
var dataTableSettings = {
  "bPaginate": false,
  "bLengthChange": false,
  "bFilter": true,
  "bSort": false,
  "bInfo": false,
  "bAutoWidth": false
};

//loop all targeted tables in the dom to instantiate datatables
$('.datatable').each(function() {
  var oTable = $(this).dataTable(dataTableSettings);
});

//now tell the search  what tables to filter by looping the datatables array
if ($('input#search').length) {
  $("input#search").keyup(function() {
    for (var i = 0; i < aoTables.length; i++) {
      aoTables[i].fnFilterAll(this.value);
    }
  });
} 
```

# twitter-bootstrap - 使用 FuelUX 时，Bootstrap Modal 对话框会立即被关闭

> ID：15490880
> 
> 赞同：1
> 
> 时间：2013-03-19T03:14:33.000
> 
> 标签：twitter-bootstrap, datagrid, modal-dialog, fuelux

我有一个使用 FuelUX 的数据网格的页面。我也在使用 FuelUX 的捆绑版本的引导程序。每当页面上的按钮调用引导模式对话框时，它会立即被关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:04:34.993

这是一个深夜编码的案例。

我在页面上有另一个 Bootstrap 的双重实例，它们互相踩踏。

漠视。

# python - matplotlib pan-zoom colorbar 轴

> ID：15490886
> 
> 赞同：3
> 
> 时间：2013-03-19T03:16:05.593
> 
> 标签：python, matplotlib, interactive

Matplotlib 允许创建漂亮的交互式绘图。在按住鼠标左键的同时进行拖动可以让我们左右或上下平移绘图。按住鼠标右键进行拖动可以让我们在与拖动绘图方向平行的轴上进行缩放。我希望能够通过拖动颜色条来复制这种行为。当鼠标悬停在颜色条上时，会出现小手，但拖动不起作用。如果用鼠标左键沿着颜色条拖动会改变颜色条范围（保持 cmin 和 cmax 之间的差异不变）并用鼠标右键拖动会改变 cmin 和 cmax 之间的差异（例如缩放），那就太好了有什么办法可以做到这一点？

到目前为止，该解决方案似乎将涉及某种形式的由 .注册的回调函数`fig.canvas.mpl_connect('button_press_event', func)`。例如：

```
def onclick(event):
    tb = plt.get_current_fig_manager().toolbar
    print repr(tb.mode),bool(tb.mode)
    if tb.mode != '':
        print 'button=%d, x=%d, y=%d, xdata=%f, ydata=%f'%(
            event.button, event.x, event.y, event.xdata, event.ydata)

cid = fig.canvas.mpl_connect('button_press_event', onclick) 
```

看起来[这里](http://matplotlib.org/api/backend_bases_api.html#matplotlib.backend_bases.FigureCanvasBase.mpl_connect)描述了这些事件，但我似乎不知道如何知道我是在颜色栏上还是在情节的其余部分上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T04:51:12.130

`event.inaxes`是当前事件的斧头：

```
import numpy as np
from matplotlib import pyplot as plt
from functools import partial

def onclick_cbar(cbar, event):
    if event.inaxes is cbar.ax:
        print cbar.mappable
        print cbar.mappable.get_clim()
        print event.xdata, event.ydata

fig = plt.figure()
y, x = np.mgrid[-1:1:100j, -1:1:100j]
z = np.sin(x**2 + y**2)
pcm = plt.pcolormesh(x, y, z)
cbar = plt.colorbar()
cid = fig.canvas.mpl_connect('button_press_event', partial(onclick_cbar, cbar))
plt.show() 
```

# c# - 按钮单击到上一页 asp.net

> ID：15490894
> 
> 赞同：0
> 
> 时间：2013-03-19T03:16:39.820
> 
> 标签：c#, asp.net, postback

我知道一些 .Net 基础知识，但我需要做更高级的事情，但我被卡住了。我有 empClientProfile.aspx 页面可以从不同的地方访问该页面（从客户端列表，直接从菜单和其他）。我想按下按钮，它将用户重定向到与他/她之前完全相同的页面上。例如，如果客户从机构中进行选择，它应该转发到与该选择完全相同的页面。如果这个页面是从主菜单访问的，它应该转发到主菜单。

使用`PostBackURL`在这里不起作用，因为正如我所说，可以从不同的页面访问页面。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:36:58.507

在您的 HTML 中使用以下按钮代码

```
<input type="button" value="Back" onclick="window.history.back()" /> 
```

# 更新

试试这些文件并测试一下...

文件名：page1.htm

```
<html>
  <head>
    <title>page 1</title>
  </head>
  <body>
    PAGE 1<br />
    <a href="page2.htm">Jump to page 2</a><br />
    <a href="page3.htm">Jump to page 3</a><br />
  </body>
</html> 
```

文件名：page2.htm

```
<html>
  <head>
    <title>page 2</title>
  </head>
  <body>
    PAGE 2<br />
    <a href="page3.htm">Jump to page 3</a><br />
    <input type="button" value="Back" onclick="window.history.back()" />
  </body>
</html> 
```

文件名：page3.htm

```
<html>
  <head>
    <title>page 3</title>
  </head>
  <body>
    PAGE 3<br />
    <a href="page1.htm">Jump to page 1</a><br />
    <input type="button" value="Back" onclick="window.history.back()" />
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:24:01.923

也许您可以根据用户操作使用会话来执行此操作

```
switch(action)
{
case 1:
   postbackurl = Session[a].toString();
case 2:
   postbackurl = Session[b].toString();
default:
   break;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T03:26:17.867

您尝试过 Request.UrlReferrer 吗？

# bash - 读取外部配置文件的备份脚本 bash

> ID：15490896
> 
> 赞同：-1
> 
> 时间：2013-03-19T03:16:47.213
> 
> 标签：bash, arguments, backup

我有一个**备份脚本**，它从用户输入中读取并压缩文件，然后是 tar.gz，但是有谁知道获取 bash 脚本以接受来自文件的参数的语法。

例如

bash 脚本就像

```
tar cvf /arg1 
```

在另一个`config.txt`文件中它看起来像

### 输入位置

```
/home/user/ 
```

用法类似于backup.sh config.txt，我会提取配置位置文件并将其输入脚本并执行它。

有任何想法吗 ？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:54:35.513

```
tar cvf $(<"$1") 
```

这将从命令行获取第一个参数，读取其内容，并将其用作`tar`.

# css - 需要帮助使用 CSS 布局页面

> ID：15490899
> 
> 赞同：1
> 
> 时间：2013-03-19T03:16:56.467
> 
> 标签：css, html, absolute

我一直在让自己发疯，试图用 CSS 找出这个看似简单的 div 位置。我有一个包含单个图像的网页，由 CSS 定义为背景图像。我想覆盖一个包含可点击链接的 div，如下所示：

[https://dl.dropbox.com/u/39682698/Fraud-Fighter2.png](https://dl.dropbox.com/u/39682698/Fraud-Fighter2.png)

我正在使用 Dreamweaver CS6 和绝对定位的 DIV 来尝试实现这一点。但是当页面呈现时，链接没有居中。我对 CSS 相当陌生，因此非常感谢有关使用 CSS 放置对象的最佳方法的一些指导。我以前成功地使用过 AP DIV.. 不知道为什么它现在不起作用。这是页面：

[http://us.aktive.me/maintenance/](http://us.aktive.me/maintenance/)

HTML：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>ThreatMetrix Maintenance Page</title>
<link href="main.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="apDiv1"><a href="http://threatmetrix.com/support">http://threatmetrix.com/support</a></div>
</body>
</html> 
```

CSS：

```
@charset "utf-8";
/* CSS Document */

body {
    background-color: #3fa9f5;
    background-image:url(fraud-fighter.png);
    background-repeat:no-repeat;
    background-position:center;
    background-position:top;
    font-size : 1.5em;
    font-family : Frutiger, "Frutiger Linotype", Univers, Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans Condensed", "Liberation Sans", "Nimbus Sans L", Tahoma, Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif;
}

a:link     { background-color: transparent; color:#f28a1a}
a:visited  { background-color: transparent; color:#f28a1a}
a:active   { background-color: transparent; position:relative}
a:hover    { background-color: transparent; color:#cb7518}
a.noformat { text-decoration: none; color: #121212}

#apDiv1 {
    position: absolute;
    width: 351px;
    height: 43px;
    z-index: 1;
    left: 233px;
    top: 240px;
} 
```

非常感谢您的帮助。-院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:20:56.553

从我的角度来看，定位太远了，没必要。怎么样

```
 #apDiv1 {
        margin-top: 240px;
        text-align: center;
    } 
```

就是这样，对我有用，因为图像的大小是固定的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:21:15.367

如果您需要以 div 为中心的文本，请尝试：

```
#apDiv1 {
    text-align: center;
    ...
} 
```

# javascript - 是否有为数据库表创建 HTML5/Javascript 表单的免费库？

> ID：15490902
> 
> 赞同：1
> 
> 时间：2013-03-19T03:17:09.853
> 
> 标签：javascript, database, html, validation, ddl

我的问题是在后端定义了一些表，其中包含 VARCHAR(10)、DATE、INT 等内容？我们需要创建一个可以显示给用户的 HTML5/JS 表单，以便他们可以输入与数据库模式定义（不断变化）同步的数据，然后将其导出到 CSV 以进行进一步处理。也就是说，如果架构定义说 10 个字符，他应该只能在该字段中输入 10 个字符。

是否有一些软件可以动态执行此操作，因为这应该已经解决了？

我们目前正在考虑使用 jquery-csv 导入模式并输出 validate.js 规则。有更好的建议吗？

# php - 在 PHP 中解密 as3crypto 加密文本

> ID：15490903
> 
> 赞同：1
> 
> 时间：2013-03-19T03:17:17.973
> 
> 标签：php, encryption, as3crypto

我试图通过演示应用程序加密 as3crypto 中的文本。

现在我正在尝试通过 php 解密加密的文本，但似乎文本没有正确解密。有谁知道如何通过PHP正确解密它？还是我做错了？请赐教...

这是场景：

1.  [在http://crypto.hurlant.com/demo/](http://crypto.hurlant.com/demo/)中加密它：

    **加密：** AES

    **模式：** CBC

    **填充：**无

    **密钥：** 11918f8bcd112e92744125008722050c

    **文字：** Lorem ipsum dolor sit amet，consectetur adipiscing elit。在 ut massa nec purus laoreet posuere quis vitae tortor。

    **初始化向量：** *留空*

2.  按加密。选择base64并复制密文。

3.  制作一个包含这些代码的 php 脚本并运行它：

    $cipher = MCRYPT_RIJNDAEL_128;

    $mode = MCRYPT_MODE_CBC；

    $key = "11918f8bcd112e92744125008722050c";

    $cipher = "在此处放置密码文本...";

    $data = base64_decode($cipher);

    echo mcrypt_decrypt($cipher, $key, $data, $mode);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-10T18:09:47.303

这会起作用：

PHP代码：

```
//notice that $key and $iv length must be 16 chars long! ex: 1234567890123456
function decrypt($data,$key,$iv)
{

    $decr= mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, base64_decode($data), MCRYPT_MODE_CBC, $iv);    
    return $decr;   
} 
```

这是AS3代码

```
//notice that $key and $iv length must be 16 chars long! ex: 1234567890123456
private function encrypt(input:String,decrKey:String,decrIV:String):String
{
    var inputBA:ByteArray=Hex.toArray(Hex.fromString(input));        
    var key:ByteArray = Hex.toArray(Hex.fromString(decrKey));                
    var pad:IPad = new NullPad();
    var aes:ICipher = Crypto.getCipher("aes-cbc", key, pad);
    var ivmode:IVMode = aes as IVMode;
    ivmode.IV = Hex.toArray(Hex.fromString(decrIV));            
    aes.encrypt(inputBA);  

    return Base64.encodeByteArray( inputBA);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T05:29:13.537

问题可能出在你的钥匙上。虽然您可以将十六进制字符串提供给 as3crypto 并且它会知道如何处理它，但`mcrypt_decrypt`会将每个字符解释为它的底层 ASCII 值（如 a = 97）而不是它的十六进制值（a = 10）。使用[hex2bin](http://php.net/manual/en/function.hex2bin.php)方法将十六进制字符串转换为字节字符串，您的解密应该可以正常工作。

此外，问题可能在于 as3crypto 和 php 之间的默认 IV（初始化向量）的不同想法。由于您使用的是 CBC 模式，因此您应该指定 IV，作为一种良好的安全实践。还要注意与您的密钥类似的潜在陷阱，即在 as3 中指定十六进制字符串并需要在 php.ini 中将其转换。

# android - 加载器将结果传递给错误的片段

> ID：15490904
> 
> 赞同：13
> 
> 时间：2013-03-19T03:17:20.037
> 
> 标签：android, android-fragments, android-viewpager, android-loadermanager, android-loader

我有一个使用 ActionBar 选项卡滑动选项卡的活动，基于[android 开发人员示例](http://developer.android.com/training/implementing-navigation/lateral.html#swipe-tabs)。

每个选项卡显示一个 Fragment，每个 Fragment（实际上是一个 SherlockFragment）通过自定义 AsyncTaskLoader 加载不同类型的远程 api 请求。

问题是，如果您在要离开的选项卡的片段（旧片段）正在加载结果时点击一个选项卡以移动 2 个选项卡/页面，则该结果将传递到您移动到的选项卡的片段（新片段）。就我而言，这会导致 ClassCastException，因为预期的结果是不兼容的类型。

在代码中，情况的要点是：

装载机：

```
public class FooLoader extends AsyncTaskLoader<Foo>
public class BarLoader extends AsyncTaskLoader<Bar> 
```

片段：

```
public class FooFragment extends Fragment implements LoaderManager.LoaderCallbacks<Foo> {
...
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getLoaderManager().initLoader(0, null, this);
    }
    public Loader<Foo> onCreateLoader(int id, Bundle args) { return new FooLoader(); }
...
}
public class BarFragment extends Fragment implements LoaderManager.LoaderCallbacks<Bar> {
    ...
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getLoaderManager().initLoader(0, null, this);
    }
    public Loader<Bar> onCreateLoader(int id, Bundle args) { return new BarLoader(); }
    ...
} 
```

标签管理代码[如上例所示](http://developer.android.com/training/implementing-navigation/lateral.html#swipe-tabs)。在 Foo 和 Bar 选项卡之间有第三个选项卡（称为 Baz）。当我们在 FooFragment 在其 LoaderManager 上调用 initLoader 之后但在调用 FooFragment.onLoadFinished 之前通过点击 Bar 选项卡从 Foo 选项卡跳到 Bar 选项卡时，我们最终会在调用 BarFragment.onLoadFinished 时出现 ClassCastException：

```
java.lang.ClassCastException: com.example.Foo cannot be cast to com.example.Bar
at com.example.BarFragment.onLoadFinished(BarFragment.java:1)
at android.support.v4.app.LoaderManagerImpl$LoaderInfo.callOnLoadFinished(LoaderManager.java:427)
at android.support.v4.app.LoaderManagerImpl.initLoader(LoaderManager.java:562)
at com.example.BarFragment.onCreate(BarFragment.java:36)
at android.support.v4.app.Fragment.performCreate(Fragment.java:1437)
... 
```

为什么会发生这种情况，如何预防？从调试日志中可以看出，Bar 片段中正在重复使用相同的 LoaderManager（尽管 Baz 片段有自己的），但我不知道为什么会发生这种情况。

**更新：**在每个片段中使用不同的加载程序 ID 确实消除了崩溃（或者似乎 - 我真的不知道为什么）但我宁愿不这样做。在其中一个片段中，我实际上是动态创建 ID，并且不想假设不会发生冲突。另外，这个解决方案对我来说很奇怪——加载器 ID 应该是每个片段的本地（否则，为什么在正常情况下我可以在不同的片段中拥有具有相同 ID 的加载器？）

看来我也可以通过调用`setOffscreenPageLimit(2)`ViewPager 来消除崩溃，这样当我们切换到 Bar 视图时，Foo 视图不会被丢弃。但这是一种解决方法，而不是通用解决方案。

**完整代码：**我创建了一个[演示错误的示例应用程序](https://github.com/jgiles/android-tab-loader-crash)。它包含一个用于强制错误的 monkeyrunner 脚本（尽管它可能不适用于所有屏幕尺寸）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T05:38:43.047

不要使用 0 作为您的 ID。据`LoaderManager`了解，他们应该是同一个装载机。

您可以在 XML 资源文件中定义唯一 ID

```
<item type="id" name="loader_foo" />
<item type="id" name="loader_bar" /> 
```

并从 R 访问它们。

```
loaderManager.initLoader(R.id.loader_foo, null, new LoaderCallbacks(){}); 
```

文档`[LoaderManager](https://developer.android.com/reference/android/app/LoaderManager.html#initLoader%28int,%20android.os.Bundle,%20android.app.LoaderManager.LoaderCallbacks%3CD%3E%29)`说“标识符的范围仅限于特定的 LoaderManager 实例”。的实例`LoaderMananger`与`Activities`.

要生成唯一 ID，您可以手动为它们分配在它们之间有较大差距的 ID。

```
private static final int LOADER_FOO = 1;
private static final int LOADER_BAR = 100;

for(int i = 0; i < 10; ++i){
    loaderManager.initLoader(LOADER_FOO + i, null, new LoaderCallbacks(){});
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T21:16:54.990

您可以通过调用而不是调用`initLoader`来避免此问题- 正如[Alex Lockwood](https://stackoverflow.com/users/844882/alex-lockwood)在问题评论中所指出的那样。修改后的代码如下。`onActivityCreated``onCreate`

更正的片段：

```
public class FooFragment extends Fragment implements LoaderManager.LoaderCallbacks<Foo> {
...
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        getLoaderManager().initLoader(0, null, this);
    }
    public Loader<Foo> onCreateLoader(int id, Bundle args) { return new FooLoader(); }
...
}
public class BarFragment extends Fragment implements LoaderManager.LoaderCallbacks<Bar> {
    ...
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        getLoaderManager().initLoader(0, null, this);
    }
    public Loader<Bar> onCreateLoader(int id, Bundle args) { return new BarLoader(); }
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T17:10:53.173

最近我正在使用 SimpleCursorAdapter 和加载器来显示来自 sql lite 表的数据。我花了很长时间调试一个错误“没有这样的列'_id'”。这发生在我的第二个片段的 onLoadFinished() 中。我的第一个表有 '_id' 列，但我的第二个表没有，这让我相信 Loader 正在传送到错误的片段。因此，以防万一您做了类似的事情，请确保您的 sql 表首先具有“_id”列。希望这对与我有同样问题的其他人有所帮助。

# html - 工具提示？我需要弹出文本出现在每个图像下

> ID：15490907
> 
> 赞同：0
> 
> 时间：2013-03-19T03:17:43.067
> 
> 标签：html, tooltip

我想要做的是让三个弹出框出现在每个图像下方，当我将鼠标悬停在网页上的三个图像中的每一个上时，每个图像下都有不同的文本，但是每次我将鼠标悬停在每个图像上时，弹出文本都会停留在第三张图片右侧的同一个位置，当我将鼠标悬停在每张图片上时，没有任何文字发生变化。我不太确定我做错了什么？到目前为止，这是我的代码。

```
<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Lab 7-3</title>

<style type="text/css">
<!--

#links;demo {font: 1 em sans-serif; padding: 5px 10px; margin: 0px 0px 1px, border-right: 5px color: #ff1828}

div.links:hover {border-right: double 5px; color:white}

<span>
.tooltip-wrap {position: relative;}
.tooltip-wrap .tooltip-content {
  display: none;
  position: absolute;
  top: 220px;
  left: 550px;
  width: 180px;
  background-color: #000000;
  color:#ffffff;
  padding: 5px;
  margin: 10px;}
.tooltip-wrap:hover .tooltip-content {display: block;}
</span>

-->
</style>    

</head>

<body>

<img src="sabatinaslogo.jpg" width="735" height="190" alt="Sabatina's logo" />
<p style="font-size: large">Hover over a photo to read about the pasta dish and its nutrition information.</p> 

<div id="links">
<div class="tooltip-wrap">

<table style="text-align: center">
    <tr>

    <td>
        <a><img class="picture" src="fettuccine.jpg" width="200" height="200" alt="Fettucine" />
        <div class="tooltip-content"> <p>Ingredients include:enriched durum flours, egg, water, soy lecithin. Nutritional facts: Approximately 200 calories, 3.2% total fat, 12.5% cholesterol, 16.7% protein, 1.7% calcium and 8.3% iron</p>
        </div>
    </td>

    <td>
        <a><img class="picture" src="lasagna.jpg" width="200" height="200" alt="Lasagna" />
        <div class="tooltip-content"> <p>Ingredients include: ground beef, cheese, enriched pasta and tomato sauce. Nutritional facts: Approx. 377 calories per serving, 13% fiber, approx. 50% protein, and approx. 35% sodium</p>
        </div>
    </td>

    <td>
        <a><img class="picture" src="ravioli.jpg" width="200" height="200" alt="Ravioli" />
        <div class="tooltip-content"> <p>Ingredients include: water, durum wheat semolina, beef, wheat flour, egg, vegetable oil, salt, onion flavoring, tomatoes, sugar, cornflour, herb extracts, salt, garlic salt, spice extracts, black pepper. Nutritional facts: 2.6g of protein, 1.6g of fat, 0.8 g of fiber and 0.3g of sodium</p>
        </div>

    </td>
</table>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:58:39.087

首先，您的 HTML 格式不正确。你不关闭`<a>`元素

其次，`<span>`您的 CSS 样式中有一个元素

第三，您将 div 定位在右下角。

这是我通过改变一些东西制作的[小提琴](http://jsfiddle.net/6kTsm/3/)

HTML

```
<img src="sabatinaslogo.jpg" width="735" height="190" alt="Sabatina's logo" />
<p style="font-size: large">Hover over a photo to read about the pasta dish and its nutrition information.</p>
<div id="links">
    <div class="tooltip-wrap">
        <table style="text-align: center">
            <tr>
                <td>
                    <a>
                        <img class="picture" src="http://fakeimg.pl/250x100/" width="250" height="100" alt="Fettucine" />

                        <div class="tooltip-content"> 
                            <p>Ingredients include:enriched durum flours, egg, water, soy lecithin. Nutritional facts: Approximately 200 calories, 3.2% total fat, 12.5% cholesterol, 16.7% protein, 1.7% calcium and 8.3% iron</p>
                        </div></a>
                </td>
                <td> <a><img class="picture" src="http://fakeimg.pl/250x100/" width="250" height="100" alt="Lasagna" />
        <div class="tooltip-content"> <p>Ingredients include: ground beef, cheese, enriched pasta and tomato sauce. Nutritional facts: Approx. 377 calories per serving, 13% fiber, approx. 50% protein, and approx. 35% sodium</p>
            </div></a>

                </td>
                <td> <a><img class="picture" src="http://fakeimg.pl/250x100/" width="250" height="100" alt="Ravioli" />
        <div class="tooltip-content"> <p>Ingredients include: water, durum wheat semolina, beef, wheat flour, egg, vegetable oil, salt, onion flavoring, tomatoes, sugar, cornflour, herb extracts, salt, garlic salt, spice extracts, black pepper. Nutritional facts: 2.6g of protein, 1.6g of fat, 0.8 g of fiber and 0.3g of sodium</p>
        </div></a>

                </td>
        </table>
    </div> 
```

CSS

```
#links;
demo {
    font: 1 em sans-serif;
    padding: 5px 10px;
    margin: 0px 0px 1px, border-right: 5px color: #ff1828
}
div.links:hover {
    border-right: double 5px;
    color:white
}

.tooltip-wrap {
    position: relative;
}
.tooltip-wrap .tooltip-content {
    display: none;
    position: absolute;
    top: 0;
    top: 100px;
    width: 180px;
    background-color: #000000;
    color:#ffffff;
    padding: 5px;
    margin: 10px;
}
a:hover .tooltip-content {
    display: block;
} 
```

# c# - DataGridView 数据源

> ID：15490908
> 
> 赞同：4
> 
> 时间：2013-03-19T03:17:44.947
> 
> 标签：c#, data-binding, datagridview

我有一个 DataGridView 和一个从 SQL 表填充的一些对象的列表。我使用两种方法将列表绑定到网格。

1.直接使用列表到数据源

`grdSomeList.DataSource = GetListSomeObjects();`

2.通过绑定源使用

```
_bsSomeList = new BindingSource();
_bsSomeList .DataSource = GetListSomeObjects();
grdSomeList.DataSource = _bsSomeList ; 
```

绑定数据源的最佳实践是什么？这两者背后是否有一些具体的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T03:22:33.920

如果是单向绑定，则使用第一种方式。

如果是双向绑定，则使用第二种方式，这意味着当用户更改 DataGridView 单元格时，更改将保留/持久在`GetListSomeObjects()`数据源中。

您尚未指定这是 WPF、Winforms、Web，但您可以阅读更多关于[BindingSource](http://msdn.microsoft.com/en-au/library/ms743643.aspx)和[One、Two & 等方式绑定](http://msdn.microsoft.com/en-au/library/system.windows.data.bindingmode.aspx)的信息：

**双向**

导致对源属性或目标属性的更改自动更新另一个。这种类型的绑定适用于可编辑的表单或其他完全交互的 UI 场景。

**单程**

当绑定源（源）改变时更新绑定目标（target）属性。如果被绑定的控件是隐式只读的，则这种类型的绑定是合适的。例如，您可以绑定到诸如股票代码之类的源。或者您的目标属性可能没有提供用于进行更改的控制界面，例如表格的数据绑定背景颜色。如果不需要监听目标属性的变化，使用 OneWay 绑定方式可以避免 TwoWay 绑定方式的开销。

**一度**

在应用程序启动或数据上下文更改时更新绑定目标。如果您正在使用适合使用当前状态的快照或数据是真正静态的数据，则这种类型的绑定是合适的。如果您想使用源属性中的某个值初始化目标属性并且事先不知道数据上下文，则这种类型的绑定也很有用。这本质上是一种更简单的 OneWay 绑定形式，可在源值不变的情况下提供更好的性能。

**OneWayToSource**

当目标属性更改时更新源属性。Default 使用绑定目标的默认 Mode 值。每个依赖属性的默认值都不同。通常，用户可编辑的控件属性（例如文本框和复选框的属性）默认为双向绑定，而大多数其他属性默认为单向绑定。确定依赖属性默认绑定单向还是双向的一种编程方法是使用 GetMetadata 获取属性的属性元数据，然后检查 BindsTwoWayByDefault 属性的布尔值。

# flash - 从哪儿开始？Facebook Flash 服务器游戏

> ID：15490911
> 
> 赞同：-1
> 
> 时间：2013-03-19T03:17:56.040
> 
> 标签：flash

我试图自学如何制作游戏和应用程序。

我想尝试制作一个 myspace 暴徒类型的游戏。一款 2D 游戏，允许玩家通过攻击/评论进行互动并升级。

这是一个非常压倒性的开始，只是寻找关于从哪里开始的提示。我应该了解哪些程序来进行编码以及在哪里进行研究，服务器交互需要什么？

感谢您的任何指点！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:20:35.927

如果您对游戏设计感兴趣，最好从小处着手，然后逐步发展。如果您对编程完全陌生，我建议您从 Python 的 Pygame 和本教程[http://programarcadegames.com/开始](http://programarcadegames.com/)

# mysql - 无法在 XAMPP 中启动 MySQL？

> ID：15490913
> 
> 赞同：2
> 
> 时间：2013-03-19T03:18:06.190
> 
> 标签：mysql, xampp

所以我试图使用我制作的这个登录系统，它开始给我一些奇怪的错误。我发现这是因为 MySQL 没有启动。所以我试图启动它，但它不会。这是日志：

```
10:06:12 PM [mysql] Attempting to start MySQL app...
10:06:12 PM [mysql] Status change detected: running
10:06:13 PM [mysql] Status change detected: stopped
10:06:13 PM [mysql] Error: MySQL shutdown unexpectedly.
10:06:13 PM [mysql] This may be due to a blocked port, missing dependencies, 
10:06:13 PM [mysql] improper privileges, a crash, or a shutdown by another method
10:06:13 PM [mysql] Check the "/xampp/mysql/data/mysql_error.log" file
10:06:13 PM [mysql] and the Windows Event Viewer for more clues 
```

以下是错误日志 (mysql_error.log) 中一些更值得注意的行：

```
130318 22:06:12 InnoDB: Database was not shut down normally!
130318 22:06:12 InnoDB: Waiting for the background threads to start
130318 22:06:13 InnoDB: 1.1.8 started; log sequence number 1599518
130318 22:06:13 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
130318 22:06:13 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
130318 22:06:13 [Note] Server socket created on IP: '0.0.0.0'.
130318 22:06:13 [ERROR] Fatal error: Can't open and lock privilege tables: Can't 
                        find file: 'host' (errno: 2) 
```

可以在不重新安装 XAMPP 的情况下修复这些错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-07T12:50:28.333

在管理员模式下打开 XAMPP 控制面板并卸载 MySQL 服务，然后重新安装它对我有用。为此，请选中并取消选中提供的快照中带圆圈的复选框。这是图片...[![如何安装和卸载 MySQL 服务](../Images/4a0ec5a6179e0b7e4a77b0c734fb9c3a.png)](https://i.stack.imgur.com/vifew.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T03:25:22.110

停止您计算机中的另一个 Mysql 服务器。您可以显示它打开 TaskManager 停止或删除其他服务器并重新启动 xammp

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T21:26:49.627

我刚刚重新安装它并保留了 htdocs 文件夹。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-03T03:05:50.017

我遇到了同样的错误，但检查服务显示 mysql 服务正在运行，所以我停止了它，现在它正在工作。我通过以管理员身份运行的 XAMPP 控制面板并从那里获取服务来做到这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-03T00:44:47.697

这是我解决此问题的方法，它对我有用，不需要重新安装。

1.  打开你的 XAMPP 并找到 Explorer。

2.  找到文件夹 mysql/data 并将其重命名为 mysql/data_old。

3.  创建一个新文件夹 mysql/data。

4.  将驻留在 mysql/backup 中的内容复制到新的 mysql/data 文件夹。

5 将 mysql/data_old 中的所有数据库文件夹复制到 mysql/data，但 mysql、performance_schema 和 phpmyadmin 文件夹除外。

6.  最后从 mysql/data_old 复制 ibdata1 文件并将其替换到 mysql/data 文件夹中。

7.  从XAMPP控制面板启动MySQL并解决问题

以下是 YouTube 上的链接[https://www.youtube.com/watch?v=XH8wOgkSukk](https://www.youtube.com/watch?v=XH8wOgkSukk)

# java - java编译错误：找不到符号

> ID：15490914
> 
> 赞同：-5
> 
> 时间：2013-03-19T03:18:15.383
> 
> 标签：java

这是我的四门课：

**J_Animal.java**

```
package Animal;

public abstract class J_Animal
{
protected String name;
protected int age;
protected int weight;

public void showInfo()
{
    System.out.println("Name : " + this.name);
    System.out.println("Age : " + this.age);
    System.out.println("Weight : " + this.weight);
}

public abstract void move();
public abstract void eat();
} 
```

**J_Bird.java**

```
package Animal;
import Animal.J_Animal;

public class J_Bird extends J_Animal
{
public J_Bird(String name, int age, int weight)
{
    this.name = name;
    this.age = age;
    this.weight = weight;
}

public void move()
{
    System.out.println("I'm a bird whose name is " + this.name + ". And I'm flying in the sky.");
}

public void eat()
{
    System.out.println("I'm a bird whose name is " + this.name + ". And I'm eating.");
}
} 
```

**J_Fish.java**

```
package Animal;
import Animal.J_Animal;

public class J_Fish extends J_Animal
{
public J_Fish(String name, int age, int weight)
{
    this.name = name;
    this.age = age;
    this.weight = weight;
}

public void move()
{
    System.out.println("I'm a fish whose name is " + this.name + ". And I'm swimming in the water.");
}

public void eat()
{
    System.out.println("I'm a fish whose name is " + this.name + ". And I'm eating.");
}

} 
```

**J_Mammal.java**

```
package Animal;
import Animal.J_Animal;

public class J_Mammal extends J_Animal
{
public J_Mammal(String name, int age, int weight)
{
    this.name = name;
    this.age = age;
    this.weight = weight;
}

public void move()
{
    System.out.println("I'm a mammal whose name is " + this.name + ". And I'm walking on the ground.");
}

public void eat()
{
    System.out.println("I'm a mammal whose name is " + this.name + ". And I'm eating.");
}
} 
```

我写了一个测试类来尝试一下。 **J_TestAnimal.java**

```
import Animal.*;

public class J_TestAnimal
{
public void TestForFish()
{
    //J_Animal testForAnimal = J_Animal("Joe" , 2, 10);
    J_Fish testForAnimal = J_Fish("Joe", 2, 10);
    testForAnimal.showInfo();
}

public static void main(String args[])
{
    J_TestAnimal j_test =new J_TestAnimal();
    j_test.TestForFish();
}
} 
```

这是我的目录：C:\J_TestAnimal

\动物

```
 \J_Animal.class

 \J_Fish.class

 \J_Bird.class

 \J_Mammal.class

 \J_Animal.java

 \J_Fish.java

 \J_Bird.java

 \J_Mammal.java 
```

\J_TestAnimal.java

当我运行命令“javac J_TestAnimal.java”时，出现错误“Cannot find the symbol”： J_TestAnimal.java:8: Error: Cannot find symbol

```
 J_Fish testForAnimal = J_Fish("Joe", 2, 10);

 Symbol : Method J_Fish(String, int, int)

 Position ： Class J_TestAnimal 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:21:47.417

使用`new`关键字创建一个`J_Fish`：

```
J_Fish testForAnimal = new J_Fish("Joe", 2, 10); 
```

# c# - 在一段时间后以编程方式关闭 WinForms 应用程序的正确方法是什么？

> ID：15490915
> 
> 赞同：6
> 
> 时间：2013-03-19T03:18:26.373
> 
> 标签：c#, winforms

我以通常的方式开始我的表格：

```
Application.Run(new MainForm()); 
```

我希望它打开并运行到某个时间，然后关闭。我尝试了以下但无济于事：

(1) 在 Main 方法中（Application.Run() 语句是），我在 Application.Run() 之后输入以下内容

```
while (DateTime.Now < Configs.EndService) { } 
```

结果：它永远不会被击中。

(2) 在 Application.Run() 之前我启动了一个新的后台线程：

```
 var thread = new Thread(() => EndServiceThread()) { IsBackground = true };
        thread.Start(); 
```

其中 EndServiceThread 是：

```
 public static void EndServiceThread()
    {
        while (DateTime.Now < Configs.EndService) { }
        Environment.Exit(0);
    } 
```

结果：vshost32.exe 已停止工作崩溃。

(3) 在 MainForm Tick 事件中：

```
 if (DateTime.Now > Configs.EndService)
        {
            this.Close();
            //Environment.Exit(0);
        } 
```

结果：vshost32.exe 已停止工作崩溃。

实现我的目标的正确方法是什么？同样，我想启动表单，让它打开并运行到某个时间（Configs.EndService），然后关闭。

谢谢你，本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T03:21:33.237

创建一个[Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)，并让它在其事件处理程序中关闭程序。

假设您希望应用程序在 10 分钟后关闭。您以 60,000 毫秒的周期初始化计时器。您的事件处理程序变为：

```
void TimerTick(object sender)
{
    this.Close();
} 
```

如果您希望它在特定日期和时间关闭，您可以让计时器每秒滴答一次，并检查`DateTime.Now`所需的结束时间。

这将起作用，因为`TimerTick`它将在 UI 线程上执行。您的单独线程想法的问题在于，它`Form.Close`是在后台线程*而不是*UI 线程上调用的。这会引发异常。当您与 UI 元素交互时，它必须在 UI 线程上。

如果您调用`Form.Invoke`执行`Close`.

您还可以创建一个`WaitableTimer`对象并将其事件设置为特定时间。框架没有`WaitableTimer`，但有一个。请参阅[使用 C# 的 .NET 中的等待计时器](http://www.devsource.com/c/a/Languages/Waitable-Timers-in-NET-CSharp/)一文。代码可在[http://www.mischel.com/pubs/waitabletimer.zip](http://www.mischel.com/pubs/waitabletimer.zip)

如果您使用`WaitableTimer`，请注意回调在后台线程上执行。您必须`Invoke`与 UI 线程同步：

```
this.Invoke((MethodInvoker) delegate { this.Close(); }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T03:34:53.227

像这样的东西怎么样：

```
public partial class Form1 : Form
{
    private static Timer _timer = new Timer();

    public Form1()
    {
        InitializeComponent();
        _timer.Tick += _timer_Tick;
        _timer.Interval = 5000; // 5 seconds
        _timer.Start();            
    }

    void _timer_Tick(object sender, EventArgs e)
    {
        // Exit the App here ....
        Application.Exit();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T03:31:55.883

是否有“ServiceEnded”事件？如果是，请在您的服务结束时关闭您的表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T03:39:14.923

如果您使用 ，则`System.Threading.Timer`可以使用 将`DueTime`第一次触发的时间设置为您要关闭应用程序的时间

```
new System.Threading.Timer((o) => Application.Exit(), null, (Configs.EndService - DateTime.Now), TimeSpan.FromSeconds(0));
Application.Run(new Form1()); 
```

# android - Robotium Solo 4.0 在输入文本后暂停

> ID：15490916
> 
> 赞同：1
> 
> 时间：2013-03-19T03:18:36.710
> 
> 标签：android, android-ui, robotium, android-testing

我正在使用 Robotium Solo 4.0 为 Android 应用程序编写一些功能测试。以下序列给我带来了问题。我在 Nexus 4 上运行。

```
View cartIcon = solo.getView(R.id.cartBtn);
solo.clickOnView(cartIcon);

//Animation happens in app here for about 5 seconds before the email/password boxes are visible

solo.typeText((EditText)solo.getView(R.id.emailEdit), LOGIN_EMAIL);
solo.typeText((EditText)solo.getView(R.id.passwordEdit), LOGIN_PASSWORD);

//Execution pauses here for 30 seconds or so, then picks up at normal speed where it left off.
solo.clickOnView((Button)solo.getView(R.id.loginBtn), true); 
```

正如您在上面的评论中看到的，在登录屏幕上填写登录电子邮件和密码后，测试执行暂停了很长时间，直到最后单击登录按钮并继续正常执行。有人对此有解决方案吗？

**更新**

需要注意的一点是，在单击 cartIcon 后，在 emailEdit 和 passwordEdit EditText 视图可用之前，有一个动画需要大约 5 秒才能完成下一个活动。我想知道 Robotium 是否试图过早地输入这些字段并失败，然后在继续之前等待超时。

在输入电子邮件和密码之前，我尝试做一个 solo.waitForText("Login") ，但这没有帮助。还有其他想法吗？

**解决方案**

糟糕——我是个白痴。R.id.emailEdit 和 R.id.passwordEdit 是错误的元素，并且不在此页面上。我调试并注意到两者都是空的，这显然导致 Robotium 在继续之前等待超时。在我交换了正确的元素 ID 后，一切都按预期工作。

如果 Robotium 在尝试与空视图交互时抛出异常，那就太好了。

# entity-framework - 如何在 MVC4 项目中获取 SimpleMembership 为现有数据库创建自定义 UserProfile 字段？

> ID：15490917
> 
> 赞同：1
> 
> 时间：2013-03-19T03:18:45.420
> 
> 标签：entity-framework, simplemembership

我想让 SimpleMembership 提供程序在我现有的数据库中创建必要的表，包括自定义 UserProfile 表。问题是 SimpleMembershipInitializer 滑过 CreateDatabase 方法或现有数据库，而 WebSecurity.InitializeDatabaseConnection 方法仅创建标准 UserProfile 而没有我的自定义字段。

那么有没有办法让 SimpleMembershipInitializer 类在调用 WebSecurity.InitializeDatabaseConnection 以创建 SimpleMembership 提供程序所需的其他表之前将我增强的 UserProfile 表添加到现有数据库中？现有数据库首先用作模型，而不是代码优先。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:04:23.880

在这里你会找到一个可以帮助你的教程， [http://blog.spontaneouspublicity.com/includes-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model](http://blog.spontaneouspublicity.com/including-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model)

你是先用代码吗？

# qt - QTcpSocket 从服务器接收数据

> ID：15490918
> 
> 赞同：0
> 
> 时间：2013-03-19T03:19:07.650
> 
> 标签：qt, qt4, qtcpsocket

是否可以从 QTcpSocket 读取未知形式的数据？

我的意思是，我有一个 TCP 客户端和服务器应用程序。两者都使用 QDataStream 成功交换数据包。

如果说任何其他应用程序（不是我创建的）通过相同的 IP 和端口向我的服务器发送数据，是否可以读取数据？

我知道除非它是使用 QDataStream 编写的，否则将无法读取它，但是如何转储接收数据以便我可以更改我的代码以接受这种形式的数据？

所以，最后我的问题是，使用 QTcpSocket 的服务器/客户端应用程序如何从未知的客户端/服务器应用程序读取（转储）数据？

希望我没有混淆任何人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:36:46.060

我认为问题在于您正在使用 QDataStream 阅读，而不是您正在使用 QTcpSocket。在这种情况下，请使用 readRawData。这将忽略 QDataStream 预期的格式。

[http://qt-project.org/doc/qt-4.8/qdatastream.html#readRawData](http://qt-project.org/doc/qt-4.8/qdatastream.html#readRawData)

# ios - Objective-C：在 App 上播放 Youtube 视频

> ID：15490919
> 
> 赞同：9
> 
> 时间：2013-03-19T03:19:13.670
> 
> 标签：ios, objective-c, uiwebview, youtube-api

我正在尝试探索在 iOS 应用程序开发中我还能做些什么，而现在我试图在我的应用程序中包含一个视频。

我在下面有这段代码，旨在在视图加载时播放 youtube 视频，但我得到的只是一个黑色的 webView。

```
NSString *videoURL = @"http://youtu.be/Wq_CtkKrt1o";

videoView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 768, 1024)];
videoView.backgroundColor = [UIColor clearColor];
videoView.opaque = NO;
videoView.delegate = self;
[self.view addSubview:videoView];

NSString *videoHTML = [NSString stringWithFormat:@"\
             <html>\
             <head>\
             <style type=\"text/css\">\
             iframe {position:absolute; top:50%%; margin-top:-130px;}\
             body {background-color:#000; margin:0;}\
             </style>\
             </head>\
             <body>\
             <iframe width=\"100%%\" height=\"240px\" src=\"%@\" frameborder=\"0\" allowfullscreen></iframe>\
             </body>\
             </html>", videoURL];

[videoView loadHTMLString:videoHTML baseURL:nil]; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T05:52:17.057

你必须使用嵌入链接

使用下面的代码

```
NSString *videoURL = @"http://www.youtube.com/embed/Wq_CtkKrt1o"; 
```

代替

```
NSString *videoURL = @"http://youtu.be/Wq_CtkKrt1o"; 
```

试试这个你的问题会解决

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:42:14.077

你能试试下面的代码吗它对我来说很好用

```
- (void)embedYouTube:(NSString *)urlString frame:(CGRect)frame {
    NSString *embedHTML = @"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    </head><body style=\"margin:0\">\
    <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \
    width=\"%0.0f\" height=\"%0.0f\"></embed>\
    </body></html>";
    NSString *html = [NSString stringWithFormat:embedHTML, urlString, frame.size.width, frame.size.height];
    UIWebView *videoView = [[UIWebView alloc] initWithFrame:frame];
    [videoView loadHTMLString:html baseURL:nil];
    [self.view addSubview:videoView];
    [videoView release];
} 
```

# javascript - 如何在 css 中获取属性“clip”并使用 javascript 更改它？

> ID：15490930
> 
> 赞同：0
> 
> 时间：2013-03-19T03:20:28.100
> 
> 标签：javascript, css, clip

我写过这样的代码：

```
 <style>
        *{margin: 0 ; padding: 0;}
        html,body{height:100%}
        div#rect {background: #39c; width:100% ; height:100% ; clip: rect(200px 700px 400px 500px);position: fixed;}
    </style>

   <div id="rect"></div> 
```

如何获取属性`'clip'`并使用 javascript 更改它？

就像`$('#rect').css( 'clip', '...' )`jQuery 一样。

它不能被`element.style.clipRight = ''`或改变`element.style.clip = ''`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:29:39.033

document.getElementById("rect").style.clip

# java - 使用 apache、java、tomcat、mysql 设置 AMI linux 微型实例

> ID：15490937
> 
> 赞同：2
> 
> 时间：2013-03-19T03:20:52.670
> 
> 标签：java, linux, apache, tomcat, amazon-web-services

我正在尝试在亚马逊云上设置我的第一个 Linux 环境，但似乎缺少一些东西。我对 Linux 的经验为零，所以完全是新手。

到目前为止我所做的。

> ```
> 1\. I've created the Linux instance. 
> 2\. I was able to SSH in with putty.
> 3\. installed jdk 7 using yum install java-1.7.0-openjdk
> 4\. installed tomcat using yum install tomcat7
> 5\. installed mysql using yum install mysql55
> 6\. I started tomcat using /etc/init.d/tomcat7 start 
> ```

当我在浏览器中打开一个新页面并转到我的 ip 时，我没有看到 tomcat 页面？

我需要安装apache2吗？如果是这样，我该怎么做？

最后，为了将我的第一个 jar 部署到 tomcat，我还需要做什么？

如果有人知道分步教程，那也会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:53:02.167

我正在根据我以前的经验写这个答案，使用 scp 将您的应用程序上传到 linux 服务器，语法 (scp -i your_ssh_key.pem user_name@ip_address.com:/home/) 并将该应用程序移动到您的 tomcat7 webapp 文件夹，主要是在 etc/tomcat7/webapp/ 中（我不确定）并首先将您的应用程序重命名为 ROOT ，以便当您点击 URL 时，它会加载您的应用程序。您还可以看到已经存在的 ROOT 文件夹。您必须替换为您的应用程序并重新启动 tomcat7 服务器。希望它应该工作。顺便说一句，您能否提及您正在运行哪种版本的 linux，例如 ubuntu、centos 或 amazon linux 等？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T00:33:52.293

考虑将其移至[https://serverfault.com/](https://serverfault.com/)或[https://unix.stackexchange.com/](https://unix.stackexchange.com/)，因为您可能会在部署 Tomcat、MySQL 和任何其他依赖项时获得更好的帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T04:55:19.533

找到了一些非常好的文档。

> [http://in4ray.blogspot.com/2012/04/create-amazon-web-services-account.html](http://in4ray.blogspot.com/2012/04/create-amazon-web-services-account.html)

# php - 使用 foreach 循环如何读取“stdClass”中的特定属性？

> ID：15490945
> 
> 赞同：0
> 
> 时间：2013-03-19T03:21:22.093
> 
> 标签：php, arrays, object, stdclass

我有一个充满 stdClass 对象的数组。我只需要反序列化每个索引中的一个对象中的特定属性。这就是我正在尝试的，但对象仍然是序列化的，所以也许我只是错误地引用它。我应该如何阅读“exampleData”属性？

```
foreach ($rowset as $value) {
    $value = unserialize($value -> exampleData);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T03:23:25.577

```
foreach ($rowset as &$value) {
    $value = unserialize($value -> exampleData);
} 
```

您需要通过引用传递

# java - java:变量初始化

> ID：15490946
> 
> 赞同：2
> 
> 时间：2013-03-19T03:21:27.520
> 
> 标签：java, variables

我正在尝试创建一个包含从服务器登录和注销的函数的类，服务器的 IP 地址在函数的开头以静态方式定义，如下所示：

```
private static String loginURL = "http://192.168.1.5/android_login_api/" 
```

我想知道初始化条件的 loginURL 的最佳方法。例如：

```
if(this.isConnectedToServer("192.168.1.5", 500)) {
    private static String loginURL = "http://192.168.1.5/android_login_api/";
}

if(this.isConnectedToServer("192.168.1.9", 500)) {
    private static String loginURL = "http://192.168.1.9/android_login_api/";
} 
```

我想将 loginURL 作为参数传递给这个类的每个函数，然后当我调用它们时，我使用这个条件来定义 IP 地址，但我认为这太傻了。

这是我的课：

```
public class UserFunctions {

private JSONParser jsonParser;

private static String loginURL = "http://192.168.1.5/android_login_api/";
private static String mplayerURL = "http://192.168.1.5/android_mplayer_api/";
private static String registerURL = "http://192.168.1.5/android_login_api/";

private static String login_tag = "login";
private static String register_tag = "register";
private static String delete_tag = "delete";
private static String update_tag = "update";
private static String music_tag = "music";
private static String getusers_tag = "getusers";

// constructor
public UserFunctions(){
    jsonParser = new JSONParser();
}

/**
 * function make Login Request
 * @param email
 * @param password
 * */
public JSONObject loginUser(String email, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));
    JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
    // return json
    Log.i("JSON", json.toString());
    return json;
}
public JSONObject deleteUser(String email){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", delete_tag));
    params.add(new BasicNameValuePair("email", email));
    JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
    // return json
    Log.i("JSON", json.toString());
    return json;
}

public JSONObject updateUser(String email, String field, String value){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", update_tag));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("field", field));
    params.add(new BasicNameValuePair("value", value));
    JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
    // return json
    Log.i("JSON", json.toString());
    return json;
}

public boolean isConnectedToServer(String url, int timeout) {
    try{
        URL myUrl = new URL(url);
        URLConnection connection = myUrl.openConnection();
        connection.setConnectTimeout(timeout);
        connection.connect();
        return true;
    } catch (Exception e) {
        // Handle your exceptions
        return false;
    }
}

/**
 * function make Login Request
 * @param name
 * @param email
 * @param password
 * */
public JSONObject registerUser(String name, String email, String mode, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", register_tag));
    params.add(new BasicNameValuePair("name", name));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("mode", mode));
    params.add(new BasicNameValuePair("password", password));

    // getting JSON Object
    JSONObject json = jsonParser.getJSONFromUrl(registerURL, params);
    // return json
    return json;
}

    public JSONObject PlayMusic(String name){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", "play"));
    params.add(new BasicNameValuePair("name", name));
    // getting JSON Object
    JSONObject json = jsonParser.getJSONFromUrl(mplayerURL, params);
    // return json
    return json;
}

public JSONObject ChangeVol(String volume){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", "volume"));
    params.add(new BasicNameValuePair("volume", volume));
    // getting JSON Object
    JSONObject json = jsonParser.getJSONFromUrl(mplayerURL, params);
    // return json
    return json;
}

public JSONObject StopMusic(){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", "stop"));
    // getting JSON Object
    JSONObject json = jsonParser.getJSONFromUrl(mplayerURL, params);
    // return json
    return json;
}

public JSONObject ParcourirMusic(){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", "parcourir"));
    // getting JSON Object
    JSONObject json = jsonParser.getJSONFromUrl(mplayerURL, params);
    // return json
    return json;
}

/**
 * Function get Login status
 * */
public boolean isUserLoggedIn(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    int count = db.getRowCount();
    if(count > 0){
        // user logged in
        return true;
    }
    return false;
}

/**
 * Function to logout user
 * Reset Database
 * */
public boolean logoutUser(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    db.resetTables();
    return true;
}

public void ReadMail(){

try{
Properties props = System.getProperties();
props.setProperty("mail.store.protocol", "imaps");
Session session = Session.getDefaultInstance(props, null);
Store store = session.getStore("imaps");
store.connect("imap.gmail.com", "rami.mtiri@gmail.com", "pass");
Folder inbox = store.getFolder("Inbox");
inbox.open(Folder.READ_ONLY);

SearchTerm term = new SearchTerm() {
  @Override
  public boolean match(Message mess) {
    try {
      return mess.getContent().toString().toLowerCase().indexOf("boston") != -1;
    } catch (IOException ex) {
     // Logger.getLogger(JavaMailTest.class.getName()).log(Level.SEVERE, null, ex);
    } catch (MessagingException ex) {
     // Logger.getLogger(JavaMailTest.class.getName()).log(Level.SEVERE, null, ex);
    }
    return false;
  }
};

Message[] searchResults = inbox.search(term);
for(Message m:searchResults){
    Log.e("mail",m.getFrom()[0].toString() );
  System.out.println("MATCHED: " + m.getFrom()[0]);

}
} catch (Exception e) {

}

}

} 
```

请任何人都可以使用我的代码UP给我一个完整的解决方案，我是Java新手，不在乎函数或变量是否是静态的，我想要的只是按条件初始化IP地址。我在每个其他类中调用这个类的函数，所以在每个类中进行测试是不礼貌的。我把它作为最后的手段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T03:41:36.417

这

```
if(this.isConnectedToServer("192.168.1.5", 500))
{
    private static String loginURL = "http://192.168.1.5/android_login_api/";
}
if(this.isConnectedToServer("192.168.1.9", 500))
{
    private static String loginURL = "http://192.168.1.9/android_login_api/";
} 
```

不是有效的 java 代码，假设上述语句位于类的声明中（`private static`修饰符的使用需要这种情况）。

不能有条件地声明字段。事实上，大多数语句（if、while、for 等）在函数之外都是非法的。您可以在类主体中静态地做的唯一一件事是声明该字段并给它一个初始化值。

```
private static String loginURL; //no initialization yet as you don't have an instance to call isConnectedToServer() on 
```

现在，解决您的问题非常困难，因为正如 Adrian 指出的那样，您正在尝试使用非静态方法 ( `isConnectedToServer()`) 来确定静态行为 ( 的值`loginURL`)。这没有意义。您必须要么制作`loginURL`非静态的，要么制作`isConnectedToServer()`静态的。

您可能想要第一个选项。

由于初始化条件的性质，`loginURL`在构造函数中初始化会更容易，这与静态初始化几乎完全相同。以下是此类设置的框架示例：

```
class Example
{
     private String loginURL; //non-static, no initialization

     public Example()//construcutor
     {
           //run conditions normally
           if(this.isConnectedToServer("192.168.1.5", 500))
           {
                loginURL = "http://192.168.1.5/android_login_api/";
           }
           //you might want to use else if here
           if(this.isConnectedToServer("192.168.1.9", 500))
           {
                loginURL = "http://192.168.1.9/android_login_api/";
           }
           //if neither if starement executes, loginURL is null.
     }
} 
```

如果您出于某种原因*确实希望功能是静态的，请将初始化代码移动到静态块：*

```
class StaticExample
{
     private static String loginURL;

     //isConnectedToServer must be declared static in order for this to work!
     //I believe your current function can be made static without changing its code
     public static boolean isConnectedToServer()
     {
        ...
     }

     static
     {
           if(isConnectedToServer("192.168.1.5", 500))
           {
                loginURL = "http://192.168.1.5/android_login_api/";
           }
           //you might want to use else if here
           if(isConnectedToServer("192.168.1.9", 500))
           {
                loginURL = "http://192.168.1.9/android_login_api/";
           }
           //if neither if starement executes, loginURL is null.
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:52:03.927

我所要做的就是以这种方式在构造函数中初始化 var：

```
private JSONParser jsonParser;

private static String loginURL = "/android_login_api/";
private static String mplayerURL = "/android_mplayer_api/";
private static String registerURL = "/android_login_api/";
public String ip;
private static String login_tag = "login";
private static String register_tag = "register";
private static String delete_tag = "delete";
private static String update_tag = "update";
private static String music_tag = "music";
private static String getusers_tag = "getusers";

// constructor
public UserFunctions(){
    jsonParser = new JSONParser();
    if(isConnectedToServer("192.168.1.5", 500)==false)
    {
        if(isConnectedToServer("www.google.com", 500)==true)
        {
            ReadEmails re = new ReadEmails();
            ip=re.processMail();
        }else{
            ip="192.168.1.5";
        }
    }else{
        ip="192.168.1.5";
    }
} 
```

# c#-3.0 - Microsoft.Jet.OLEDB.12.0 Provider 未在本地机器上注册

> ID：15490952
> 
> 赞同：0
> 
> 时间：2013-03-19T03:22:23.250
> 
> 标签：c#-3.0

*在Windows 7 32 位*中使用 access 数据库的点网 windows 应用程序。在其他 64 位系统中安装此应用程序时会出现错误“ `Microsoft.Jet.OLEDB.12.0 Provider is not registered in the local machine`”。

因此，我安装`AccessDatabaseEngine_x64`并运行了似乎可以正常工作的应用程序，但*卸载相同的应用程序并再次安装*会出现相同的错误。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:52:39.260

Microsoft.Jet.OLEDB.12.0 与 Microsoft.ACE.OLEDB.12.0

我敢肯定，你一定已经安装了

2007 Office System 驱动程序：数据连接组件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T10:24:45.500

要解决此问题，请在 Visual Studio 中打开项目，然后：

1.  在解决方案资源管理器中右键单击您的项目，然后单击属性
2.  单击构建选项卡
3.  将平台目标从：任何 CPU 更改为 x86
4.  重新构建您的解决方案

# scheme - 初学者方案：在不使用反转的情况下反转数字列表中的数字

> ID：15490954
> 
> 赞同：-1
> 
> 时间：2013-03-19T03:22:33.717
> 
> 标签：scheme, racket

示例： (reverse-list (list 1 2 3 4)) => 4321 注意：我不允许使用 string->num 或 num->string 或 reverse。

所以列表被消耗并创建了相反的数字（不再是列表）

我在递归逻辑上遇到了麻烦。

```
(define (reverse-list lofd)
 (cond [(empty? lofd) empty]
       [else (+ (* (exp 10 (something that starts at 0 and adds one extra everytime))
                   (first lofd))
                (convert-to-decimal (rest lofd)))])) 
```

我的代码开始并将第一个数字转换为 num1*10^0 ，然后添加递归的数字。

我遇到的问题是我将如何做到这一点，以便在递归中指数为 10^0，然后上升到 1、2、3 ......直到列表的长度减去 1？我的逻辑/模板也对吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T03:47:15.117

强烈建议：在精神上和字面上遵循[列表结构的设计秘诀。](http://www.ccs.neu.edu/home/matthias/HtDP2e/part_two.html#%28part._ch~3adesign-lists%29)这个问题对你来说很新奇，你不会轻易得到它。您需要设计配方步骤让您经历的额外支持。

在这种特定情况下，您*确实*需要一套很好的示例（测试用例）来帮助您，因为解决此问题的方法并不是立即显而易见的。比较棘手是因为这个函数不是从列表到列表：它是从列表到数字，所以你必须有一个强大的套件来帮助你发现愚蠢的错误。

例如，应该做什么？

```
(check-expect (reverse-list empty) <fill-me-in>) 
```

是？我们甚至应该考虑空列表吗？这是一个奇怪的输入吗？有道理吗？*合约*是说我们必须处理空列表作为输入，还是可以保证它只接受非空列表？这是您需要预先解决的问题！您现在在代码中的内容不一定是正确的，因为您的合同类型......好吧，您还没有正式表达合同，但是一旦您这样做了，您就会发现基本情况必须不同比你到目前为止所写的。

在引用的关于设计秘诀的链接中，第 5 部分至关重要：一旦有了函数的模板，您就需要了解自然递归正在计算什么样的东西。使用具体的测试用例来提供帮助。从您的代码来看，您可能跳过了这一步，因为您编写的代码似乎没有考虑以下问题：“自然递归计算什么？”

* * *

具体来说，如果我们这样做：

```
(reverse-list (list 1 2 3 4)) 
```

我们想要的答案是什么？你自己说的：

```
(reverse-list (list 1 2 3 4))   ==>   4321 
```

考虑一下*自然递归*将是什么：

```
(reverse-list (list 2 3 4)) 
```

这有什么价值？我们知道它必须是

```
(reverse-list (list 2 3 4))     ==>   432 
```

一旦你弄清楚了，问问自己：自然递归的值与原始问题的答案有任何关系吗？

鉴于我们正在尝试解决：

```
(reverse-list (list 1 2 3 4))   ===>   4321 
```

我们有碎片`1`（列表的第一部分）和`432`（来自自然递归），我们可以放在一起`1`并`432`以某种方式得到`4321`吗？

* * *

重复这几个例子。少数，我的意思是不止一个。:) 对这些示例具体执行此操作，您的大脑将更好地进行模式匹配和概括，以找出递归案例的代码必须是什么。

也就是说，一旦您进行了足够的练习，弄清楚如何为具体案例获得正确答案，就去看看您是否可以将您正在使用的具体值表达回程序中的原始术语。例如，如果您发现：

```
we want to get 4321 out of 1 and 432:
    => 1 + 10 * 432

...  other examples you worked out... 
```

让我们用前缀表示法重新表达这些：

```
we want to get 4321 out of 1 and 432:
    => (+ 1 (* 10 432))

...  other examples you worked out... 
```

哪些部分发生了变化？哪些部分保持不变？第一个变化的部分代表什么？第二个变化部分代表什么？那是：

```
we want to get 4321 out of 1 and 432:
    => (+ 1 (* 10 432))

...  other examples you worked out ...

we want to get (reverse-list lst) out of (first lst) and (reverse-list (rest lst))
    ==> ??? 
```

一旦你看到了模式，那么你就已经弄清楚了递归案例的代码*需要是什么。*但请注意，您在这里确实需要一套示例：试图从一个特定示例中进行概括并不足以让您的大脑看到模式。您的大脑*需要*重复计算多个示例才能开始看到模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:41:02.167

除了输入列表之外，您还需要传递另一个参数。如果需要，创建一个新的辅助过程（或内部过程，或命名`let`等）以使其工作。这两个参数将跟踪列表中的当前位置，以及 10 的当前指数。大致如下：

```
(define (reverse-list lofd n)
  (cond [(empty? lofd) ; what do we return if the list is empty?
         <???>]        ; not the empty list! we're building a number
        [else          ; otherwise add this term, taking the
         (<???> <???>  ; current element times current 10^n and
            (reverse-list <???> <???>))])) ; advance recursion over lofd and n 
```

使用此初始值调用该过程：

```
(reverse-list (list 1 2 3 4) 0)
=> 4321 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T06:15:28.187

这是一个方案解决方案；它使用诸如 null?、car 和 cdr 之类的具有历史重要性但不在您的“学习球拍”词汇表中的东西。也许它会说明一种方法。

```
(define (list->reverse-number l)
  (if (null? l)
      0
      (+ (car l) (* 10 (list->reverse-number (cdr l))))) 
```

如果您坚持尝试使用，`expt`那么您可能会尝试这样的事情（使用named-let，这可能超出您的水平）：

```
(define (list->reverse-number l)
  (let reversing ((l l) (n 0))
    (if (null? l)
        0
        (+ (* (expt 10 n) (car l))
           (reversing (cdr l) (+ n 1)))))) 
```

但我不知道上述是否可行。实际上，这也有效。

# hadoop - hadoop如何处理大文件？

> ID：15490958
> 
> 赞同：3
> 
> 时间：2013-03-19T03:23:06.783
> 
> 标签：hadoop, elastic-map-reduce

尽管我非常了解 map reduce 的概念，但我对 Hadoop 完全陌生。

大多数 Hadoop 教程都是从 WordCount 示例开始的。所以我写了一个简单的wordcount程序，效果很好。但后来我试图计算一个非常大的文档的字数。（超过 50GB）。

所以我对 Hadoop 专家的问题是，Hadoop 将如何处理大文件？它会将文件的副本传输到每个映射器还是会自动将其拆分为块并将这些块传输到映射器？

我对 MapReduce 的大部分经验是因为 CouchDB，其中 mapper 一次处理文档，但从我读到的有关 Hadoop 的内容中，我想知道它是否旨在处理多个小文件或几个大文件或两者兼而有之？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T04:01:20.703

Hadoop 通过将大文件拆分为大小为 64MB 或 128MB（默认）的块来处理它们。这些块在 Datanodes 中可用，元数据在 Namenode 中。当 mapreduce 程序运行时，每个块都会得到一个映射器来执行。您不能设置映射器的数量。当映射器完成后，它们被发送到减速器。默认的 reducer 数量是 1，可以设置，这就是你获得输出的地方。它甚至可以处理多个小文件，但最好将它们分组为大文件以获得更好的性能。例如。如果每个小文件小于 64MB，那么每个文件都会有一个映射器来执行。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:55:12.737

HDFS 中的大文件已经以分布式方式存储。当您运行 mapreduce 作业时，您必须`InputFormat`为您的文件指定一个。如果它`InputFormat`是可拆分的（即，它是未压缩的，或以 bz2 格式压缩），那么它可以在任意数量的映射器之间进行划分。大多数合理的实现确保文件中的所有记录都转到某个映射器，并且没有映射器两次获得相同的记录。

文件的副本不会被传输——映射器只是读取分配给它们的文件段。如果可能，这些文件要么通过网络流式传输，要么分配给存储文件的机器。只要您为每个文件指定输入格式，您就可以使用 Hadoop 读取任意数量的输入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T03:27:11.940

默认情况下，Hadoop 将按文件拆分数据并将每个文件发送到映射器。您可以覆盖它，但它有点复杂。如果文件尚未分开，我总是只使用脚本来分解文件。

# javascript - Javascript/Jquery 防止注入执行代码

> ID：15490959
> 
> 赞同：0
> 
> 时间：2013-03-19T03:23:16.040
> 
> 标签：javascript, jquery, json

我正在为 Jquery 获取 .getJSON 函数的 JSON 数据。我正在考虑使用 .text 来确保数据安全（我相信这是正确的做法）。我已经测试过了，JSON 是正确的。

这是我正在处理的脚本：

```
var firstpost = 0;
var firstrun = 0;
var lastpost = 0; 
```

^ 全局变量

```
 $.getJSON('chatget.php', {
    'chatroomid' : '<?php echo $chatroomid; ?>',
    'firstpost': firstpost,
    'lastpost': '1'},
    function(data) {
        var template = '<div id="_ID_" class="chatpost"> <div><b>_NAME_ </b> <a href="_URL_"> _USERNAME_ </a> _DATETIME_</div> <div><em>_TARGETS_</em></div> <div>_TEXT_</div> </div>';
        var appendhtml ='';

        var datarows = data['New'].length;
        lastpost = data['New'][datarows]['CPid'];

        // Each row processor               
        $.each(data['New'], function(index, col){

        // Get initial data
        if (firstrun == 0){
        firstpost = col.CPid;
        firstrun = 1;}

            // process targets
            if(col.Targets !== null){
                var target = col.Targets.split(',');
                var trow = target.length;
                var targets = '';
                for (var i=0, len=target.length; i<len; i++){

                    targets = targets + '@' + target[i] + ' ';}     
            }else {var targets = '';};

            // Append data to chatroom
            var cpid = $.text(col.CPid);
            var name = $.text(col.Name);
            var username = $.text(col.Username);
            var url = $.text(col.Url);
            var text = $.text(col.Text);
            var datetime = $.text(col.Datetime);
            var targets = $.text(targets);

            appendhtml = template.replace('_ID_',cpid).replace('_NAME_',name).replace('_USERNAME_',username).replace('_URL_',url).replace('_TEXT_',text).replace('_DATETIME_',date).replace('_TARGETS_', targets);

        $('#chatroom').append(appendhtml);
        });

        } // End Data function
    ) // End Get Json 
```

由于某种原因，因为我在这段代码中更改了一些东西，所以它正在使 firebug 崩溃，所以我在 firebug 中发现了一个错误，或者我在编码中做了一些非常错误的事情。我认为我没有正确使用 $.text ......

此外，我正在尝试获取 data['New'] 对象/数组中的最后一个值。.length 似乎不起作用。

```
 var datarows = data['New'].length;
        lastpost = data['New'][datarows]['CPid']; 
```

这是我的第一个 javascript/Jquery 程序，所以如果您在代码中发现有问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:38:45.153

为了获得最佳实践，请将您的代码封装在匿名包装函数中，以便您创建/使用的任何函数或变量都无法被外部环境访问。

```
(function(){
    //your code
}()) 
```

注意：Google、jquery 等都遵循这个实践系统！

# java - Java System.setProperty() 在 jar 中不起作用

> ID：15490965
> 
> 赞同：1
> 
> 时间：2013-03-19T03:23:52.517
> 
> 标签：java, classpath, native

所以我有一个使用 JNI 的 java 程序和一个使用一些 dll 的硬件，在其中我需要从 Windows 系统属性设置其所需 dll 的路径，所以库加载是不可能的（更不用说我试过了它并没有按预期工作）。

我想使用`System.setProperty("path", "path/to/dll")`技术较少的用户不需要手动这样做。2个问题：

1.  当我从 Eclipse 运行它时，它工作正常，但作为一个 jar 文件它没有。这是为什么（我不知道作为jar文件运行时如何查看控制台）？
2.  这样做真的安全`System.setProperty("path", "path/to/dll")`吗？

# ruby-on-rails - Carrierwave 处理的图像未上传到 AWS S3

> ID：15490972
> 
> 赞同：1
> 
> 时间：2013-03-19T03:25:11.227
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave, sidekiq

与此问题类似的问题，但提供的解决方案并没有解决我的问题。[Carrierwave 处理的图像未上传到 S3](https://stackoverflow.com/questions/11069411/carrierwave-processed-images-not-uploading-to-s3)

使用 Railscast #383 作为代码的基础：[http ://railscasts.com/episodes/383-uploading-to-amazon-s3](http://railscasts.com/episodes/383-uploading-to-amazon-s3)

使用carrierwave_direct 将图像成功上传到S3。我想用sidekiq在后台处理图像，然后上传到S3。

sidekiq worker 完成图像处理没有错误，但处理后的图像（：thumb 和 :large）本地存储在 public/uploads 文件夹中。

知道为什么处理后的图像没有上传到 S3 吗？

上传者：

```
class ImageUploader < CarrierWave::Uploader::Base

include CarrierWave::MiniMagick

storage :fog

include CarrierWave::MimeTypes
process :set_content_type

include Sprockets::Helpers::RailsHelper
include Sprockets::Helpers::IsolatedHelper

version :thumb do
  process :resize_to_limit => [200, 200]
end

version :large do
  process :resize_to_limit => [600, 400]
end

def extension_white_list
   %w(jpg jpeg gif png)
end
end 
```

模型：

```
class Photo < ActiveRecord::Base
attr_accessible  :name, :image, :remote_image_url, :user_id
mount_uploader :image, ImageUploader

belongs_to :user

after_commit :enqueue_image, :on => :create

has_many :comments, as: :commentable

def image_name
        File.basename(image.path || image.filename) if image
end

def enqueue_image
    ImageWorker.perform_async(id, key) if key.present?
end

class ImageWorker
    include Sidekiq::Worker
    sidekiq_options retry: false

        def perform(id, key)
          photo = Photo.find(id)
          photo.key = key
          photo.remote_image_url = photo.image.direct_fog_url(with_path: true)
          photo.save!
        end
    end

end 
```

光控制器

```
class PhotosController < ApplicationController

 def index
  @photos = Photo.all
  @uploader = Photo.new.image
  @uploader.success_action_redirect = new_photo_url
 end 
```

看法

```
.
. 
.
<%= direct_upload_form_for @uploader do |f| %>
  <p><%= f.file_field :image %></p>
  <p><%= f.submit "Upload Photo" %></p>
<% end %> 
```

初始化程序/carrierwave.rb

```
 CarrierWave.configure do |config|
   config.fog_credentials = {
    provider: "AWS",
    aws_access_key_id: ENV["AWS_ACCESS_KEY_ID"],
    aws_secret_access_key: ENV["AWS_SECRET_ACCESS_KEY"]
  }
  config.fog_directory = ENV["AWS_S3_BUCKET"]
end 
```

initializers/fog.rb *根据对上面链接的问题的回答添加了这个

```
CarrierWave.configure do |config|
  config.fog_credentials = {
    :provider               => 'AWS',
    :aws_access_key_id      => ENV["AWS_ACCESS_KEY_ID"],
    :aws_secret_access_key  => ENV["AWS_SECRET_ACCESS_KEY"],
   :region                 => 'us-east-1'
  }

 config.fog_directory = ENV["AWS_S3_BUCKET"]
 config.fog_public = true
 config.fog_attributes = {'Cache-Control' => 'max-age=315576000'} 
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:37:21.533

在我的上传器文件夹中，我复制了我的原始上传器并将其重命名为“image_uploader_file.rb”。然后我修改了原始版本“image_uploader.rb”以使用雾和 S3。我假设carrierwave只会使用'image_uploader.rb'，但它似乎加载了这两个文件。旧版本使用本地存储，因此这是carrierwave 存储图像的地方。一旦我删除了“image_uploader_file.rb”，处理后的图像就会正确上传到 S3。

# javascript - Winjs中的Crypto.js错误加密

> ID：15490979
> 
> 赞同：0
> 
> 时间：2013-03-19T03:26:20.887
> 
> 标签：javascript, cryptography, aes, winjs

我正在尝试在 WinJS javascript 和 PHP 之间实现 AES 128 加密。我在 winJS 中使用 Crypto.js 进行加密。

这是我的加密代码：

```
var options = { mode: CryptoJS.mode.CBC, padding: CryptoJS.pad.Pkcs7 };

/*** encrypt */
var encryptDATA= CryptoJS.AES.encrypt("2.0", "aaaaaaaaaaaaaaaa", options);
var ciphertext = CryptoJS.enc.Base64.stringify(json.ciphertext);

/*** decrypt */
var decrypted = CryptoJS.AES.decrypt(ciphertext, "aaaaaaaaaaaaaaaa", options);
var plaintext = decrypted.toString(CryptoJS.enc.Utf8); 
```

加密 encryptDATA 时得到正确答案，但尝试加密时得到错误答案`ciphertext`。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:39:37.207

如果使用`Base64.stringify`，则需要使用`Base64.parse`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:21:41.190

我的猜测是，`json.ciphertext`传递给`Base64.stringify()`函数的值不是 的实例`CryptoJS.lib.WordArray`，Base64 编码需要它才能正常运行。

我在这里设置了一个 jsfiddle：http: [//jsfiddle.net/9Hyfd/](http://jsfiddle.net/9Hyfd/)来演示使用该功能加密字符串并粘贴以下相关代码：

```
/*** encrypt base64 encoded */
var words = CryptoJS.enc.Utf8.parse("2.0"); 
var ciphertext = CryptoJS.enc.Base64.stringify(words);
var encryptDATA = CryptoJS.AES.encrypt(ciphertext, "aaaaaaaaaaaaaaaa", options);

/*** decrypt base64 encoded */
var decrypted = CryptoJS.AES.decrypt(encryptDATA, "aaaaaaaaaaaaaaaa", options);
var plaintext = CryptoJS.enc.Utf8.stringify(decrypted);
plaintext = CryptoJS.enc.Base64.parse(plaintext).toString(CryptoJS.enc.Utf8); 
```

请注意，这可能不是解决问题的最有效方法，但它确实以您当前尝试的方式正确解密数据。

# c - fgets() 的意外结果 no (f)scanf

> ID：15490984
> 
> 赞同：0
> 
> 时间：2013-03-19T03:26:57.950
> 
> 标签：c, fgets

我在这里查看了 fgets 的其他类似问题，它们似乎都是由 (f)scanf 引起的。我遇到的问题不涉及（f）scanf。

这是我用来逐行读取标准输入的 while 循环。

```
while(fgets(line,sizeof(line),stdin)!=NULL){
            char* newLine[6]; //the array of characters
            int i = 0; //counter

            char *next=strtok(line," ");
            while (i<6){
                newLine[i]=next;
                next=strtok(NULL," ");
                ++i;
            } 
```

线绝对足够大以容纳输入。我确切地知道会有多少单词，这就是我使用 6 的原因。第二个 while 循环删除空格并将结果放入 newLine 进行评估。这适用于除第一行之外的所有行。这是输出。

```
A 344532111 S SPY 300 117.880000 //ignore input
A 344532111 S SPY 300 117.880000 //line 2
R 344532111 SPY 300 117.840000   //line 3
T 344532111 SPY 100              //line 4
C 344532111 SPY 100              //line 5
A 344533172 B SPY 200 117.110000 //line 6
A 344533348 B SPY 280 118.050000 //line 7       
X 344533348 SPY                  //line 8
344532111 S 100 117.840000 //results
344533172 B 200 117.110000 //results 
```

以 A 开头的每一行都应该有一个结果。我知道第一行没有被读取，因为如果我让它输出它在每一行中找到的第一个字符，它只显示一个“A”此外，这些行将抛出一个错误，就好像它不存在一样。（每一行就像一个命令，它根据前一行启动不同的功能。如果它读取第一行就不会抛出错误。这就是前两行重复的原因。）

问题是它跳过了输入到终端的第一行，但按预期读取了之后的所有内容。

有谁知道我可能做错了什么？也许使用`fgets()`错误？

谢谢

# java - 如何正确关闭java命令行程序

> ID：15490985
> 
> 赞同：5
> 
> 时间：2013-03-19T03:27:06.700
> 
> 标签：java, findbugs

我有一个交互式 java 程序，它允许用户向服务器发送消息，它的行为有点像 shell，接受用户的键盘输入并执行各种操作。

例如

```
myProgram> send "Login as James" to server 
```

我的程序将解析用户输入并执行操作，在这种情况下，它将向服务器发送消息“以 James 身份登录”。

我支持它的“退出”命令之一，它将关闭所有服务器连接，清理资源并关闭应用程序。处理这个退出命令的代码是

```
private void shutdown()
{
  closeAllConnection();
  cleanup();
  System.out.println("Thank you for using the tool, have a nice day!");
  System.exit(0);
} 
```

当我对我的代码运行 findbug 时，会引发 DM_EXIT 错误

```
Bug: new myProgram.messagingTools.main(String[]) invokes System.exit(...), which shuts down the entire virtual machine
Pattern id: DM_EXIT, type: Dm, category: BAD_PRACTICE

Invoking System.exit shuts down the entire Java virtual machine. This should only been done when it is appropriate. Such calls make it hard or impossible for your code to be invoked by other code. Consider throwing a RuntimeException instead. 
```

它抱怨 System.exit 不应该用于关闭程序。

有人对我应该如何“在我的程序收到'退出'命令时关闭应用程序”有任何建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T03:29:14.083

你没事。警告说“只有在**适当的时候才**应该这样做”（强调我的）

这是一种适当的使用方式，`System.exit`因此您可以忽略警告。

或者，如果您的整个程序在`main`没有产生任何新线程的情况下运行，那么您可以返回`main`并让程序自行关闭。如果您有任何新线程（特别是如果您使用 Swing），那么您最好只使用`System.exit`... 除非这些线程*还*需要进行一些清理，在这种情况下，您需要一种方法来关闭它们优雅地倒下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T03:39:18.830

`System.exit()`用于突然退出。尽管它确实调用了任何关闭挂钩，但它不允许没有一个的线程正确结束。调用此方法通常用于“灾难性错误退出”。

[http://www.javapractices.com/topic/TopicAction.do?Id=86](http://www.javapractices.com/topic/TopicAction.do?Id=86)

因此，正如 Sudhanshu 建议的那样，如果输入是“退出”，则正确的方法是向解释器循环发送信号以中断。除此之外，您的代码应该跟踪所有线程和资源，以便在退出后可以进行清理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T03:29:33.087

如果您在循环中接受（等待）命令，只要用户输入**quit**就跳出循环。这可能是你的 while 循环的条件......就像你退出循环后的`while(!command.equalsIgnoreCase("quit")) { }`Call一样。`shutdown()`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-11-16T06:51:34.340

改为使用`Runtime.getRuntime().exit(0)`。这对我有用。无论如何，最终`System.exit(0)`会调用这个。

# java - 关闭此游标对象以防止游标异常的正确方法

> ID：15490989
> 
> 赞同：0
> 
> 时间：2013-03-19T03:27:53.043
> 
> 标签：java, android

我有一个数据库处理程序类，用于查询数据库并返回游标。

这是方法：

```
public Cursor getData() {

    String[] columns = new String[] { KEY_ROWID, KEY_NAME, KEY_TEL,
            KEY_EMAIL, KEY_COMMENTS };
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null,
            null, KEY_NAME + " ASC", null);

    if (c != null) {

        c.moveToFirst();
    }

    return c; 
```

可以看出，我将指针设置为准备返回的光标中的第一个元素。我目前收到一个“正在完成一个尚未停用或关闭的游标”异常，这是我使用的唯一游标，我没有在其上显式调用 .close()。我这样做的原因是它需要一个返回类型，我不能在返回它之前关闭游标，因为这会设置一个空指针错误。

以下是游标返回后的处理方式：

```
 DBHandler search = new DBHandler(this, null, null);

    search.open();
    Cursor cursor = search.getData();
    search.close();
    startManagingCursor(cursor); 
```

有人可以指出我正确的方向以帮助关闭我的数据库处理程序类中的光标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T03:30:03.510

然后无论调用什么方法都`getCursor`负责关闭它。像这样使用 Java 7 的 try-with-resources：

```
try(Cursor c = getData()) {
    // ...
} // closes 
```

或者尽可能高地传递。调用堆栈的某处需要一个负责管理游标资源的方法。这是使用尽可能多地留给垃圾收集器的语言进行权衡的一部分，当您确实需要管理自己的资源时留下笨拙的语法和语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:34:07.943

你必须用这种方式。

```
public Cursor getData() {
String[] columns = new String[] { KEY_ROWID, KEY_NAME, KEY_TEL, KEY_EMAIL, KEY_COMMENTS };
     return ourDatabase.query(DATABASE_TABLE, columns, null, null, null,null, KEY_NAME + " ASC", null);
} 
```

现在你必须迭代`cursor`，当你可以完成你的工作时，然后关闭`cursor`.

```
DBHandler search = new DBHandler(this, null, null);

search.open();
Cursor record = search.getData();    
//startManagingCursor(record);  
if(record.getCount()!=0){
    if(record.moveToFirst()){
        do{

        //your code here.
        }while(record.moveToNext());
    }
}   
record.close();
search.close(); 
```

试试这个。

# orientation - 使用陀螺仪和加速度计获取方向

> ID：15490990
> 
> 赞同：14
> 
> 时间：2013-03-19T03:28:01.797
> 
> 标签：orientation, accelerometer, gyroscope

*   我想监视设备在 2 轴上的方向：非常简单：哪条路是向下的。
*   它必须在延长的时间段（12 小时）内保持准确性
*   它将受到围绕所有轴的旋转和加速度

该设备将是带有标准陀螺仪/加速度计的 Android 手机。使用这两种传感器类型，**是否可以满足上述要求？**

**到目前为止，我的想法是：**单独的加速度计无法实现这一点，因为给定任何一组瞬时值，不可能将重力和空间加速度分量分开。我无法理解陀螺仪如何帮助解决这个问题。是否有任何聪明的公式/算法可以解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-18T07:41:09.743

结合加速度计和陀螺仪数据的一种简单方法是使用**互补滤波器**。这样，您就不会遇到陀螺仪漂移和加速度计噪声的问题。它也比卡尔曼滤波器更容易理解和使用。

您将使用积分计算陀螺仪的角度。对于加速度计，您将使用 tan2 函数来确定重力矢量的位置。然后，互补滤波器将组合这两个角度，如下所示：

角度 = 0.98*(角度 + 陀螺数据*dt) + 0.02*accAngle

请注意，您如何只获取加速度计数据的一小部分（刚好足以补偿漂移）。因此，您将使用陀螺仪数据进行快速变化，但从长远来看，您将继续遵循加速度计角度计算的平均值，以免漂移。

我希望这有帮助。[如果您需要更多信息和 C 代码示例，我在这里](http://www.pieter-jan.com/node/11)写了一篇关于它的文章

# php - 按 id 降序排列显示的项目？

> ID：15490991
> 
> 赞同：0
> 
> 时间：2013-03-19T03:28:07.997
> 
> 标签：php, sql, yii, web

我已经在这里和论坛上尝试过代码，但我似乎无法让它工作。我有一个索引页面，它显示我的最新帖子，只想按 id 降序显示它们。我还想知道，正如您在下面看到的那样，我在下面用字符来限制我的文本，并且我希望它受到字数的限制，但是当我尝试时，它不会显示任何文本。谢谢这是我的代码。

**_view.php**

```
<div class="view">

 <? $this->pageTitle = "Latest Music"?>

<h4><?php echo CHtml::encode($data->id); ?>.
<?php echo CHtml::encode($data->title); ?></h4>

<p><?php 
$charLimit = 680; 
$myText = CHtml::encode($data->text); 
$teaserText = substr($myText,0,$charLimit) . "..."; 
echo $teaserText; 
?></p>

<p><?php echo CHtml::link('View Article', array('view', 'id'=>$data->id)); ?>
&nbsp
<?php echo CHtml::link('Update Article', array('update', 'id'=>$data->id)); ?></p>     
 </div> 
```

**新闻控制器/actionIndex**

```
public function actionIndex()
{
   $this->pageTitle = "$TitleP";
   $TitleP = print CHtml::encode($data->title);

    $dataProvider=new CActiveDataProvider('news_model');
$this->render('index',array(
        'dataProvider'=>$dataProvider,

    ));
} 
```

**新闻模型**

```
class news_model extends CActiveRecord
{

public static function model($className=__CLASS__)
{
    return parent::model($className);
}

public function tableName()
{
    return '{{news}}';
}

public function rules()
{

    return array(
        array('title, text', 'required'),
       array('title', 'length', 'max'=>128),
           array('id', 'length', 'max'=>128),
           array('text', 'length', 'max'=>1500),
        array('title, text', 'safe', 'on'=>'search'),
    );
}

public function relations()
{
    return array(
    );
}

public function attributeLabels()
{

    return array(
        'id' => 'ID',
        'title' => 'Title',
        'slug' => 'Slug',
        'text' => 'Text',
    );
}

public function search()
{
    $criteria=new CDbCriteria;

    $criteria->compare('id',$this->id);
$criteria->compare('title',$this->title,true);
    $criteria->compare('text',$this->text,true);

    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:51:15.937

要将订单添加到您的构造函数中，请`dataProvider`添加 a[`CDbCriteria`](http://www.yiiframework.com/doc/api/1.1/CDbCriteria)作为第二个参数。`CActiveDataProvider`

```
public function index(){
    ...
    $dataProvider=new CActiveDataProvider('news_model',array('criteria'=>array('order'=>'id DESC')));//corrected answer
    ...
} 
```

限制字数（来自[原始答案](https://stackoverflow.com/a/5436653/428543)）

```
$word_limit=100;

if (preg_match_all('/\s/', $text_to_shorten, $m, PREG_OFFSET_CAPTURE) && isset($m[0][$word_limit-1]) && $m[0][$word_limit-1][1]) 
        $shortened_text=substr($text_to_shorten, 0, $m[0][$word_limit-1][1]).'...';
else $shortened_text=$text_to_shorten;
echo $shortened_text; 
```

PS你有简短的开放式PHP标签`<? $this->pageTitle = "Latest Music"?>`

> 不鼓励这样做，因为它们仅在使用 short_open_tag php.ini 配置文件指令启用，或者 PHP 使用 --enable-short-tags 选项配置时才可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:03:57.370

顺便说一句，除了[topher 的正确答案](https://stackoverflow.com/questions/15490991/yii-framework-order-displayed-items-by-id-descending#15493215)之外，如果您**总是**想在整个应用程序中按降序显示帖子，您可以为模型设置默认范围，如下所示：

```
class news_model extends CActiveRecord
{
    ...
    public function defaultScope()
    {
        $alias = $this->getTableAlias(false,false);
        return array(
            'order'=> "`$alias`.`id` DESC",
        );
    }
    ...
} 
```

这将强制您的新闻模型的所有 Active Record 调用按 id 降序排列。

当然，如果您不希望在整个站点中出现这种行为，那么我不会费心添加默认范围；只需在需要时应用订单条款；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T17:13:54.633

使用以下代码设法找出控制器中的订单：感谢@Topher

```
public function actionIndex()
{
   $this->pageTitle = "$TitleP";
   $TitleP = print CHtml::encode($data->title);

    $dataProvider=new CActiveDataProvider('news_model', 
array('criteria'=>
              array('order' => ('id DESC')
              )));

    $this->render('index',array(
        'dataProvider'=>$dataProvider,
    ));
} 
```

# perl - perl 中的 mixin 模块和 mixin::with 模块有什么区别？

> ID：15490993
> 
> 赞同：1
> 
> 时间：2013-03-19T02:56:14.417
> 
> 标签：perl, mixing

`mixin`我不知道和`mixin::with`模块有什么区别？

```
package Dog;
sub speak { print "Bark!\n" }
sub new { my $class = shift;  bless {}, $class }

package Dog::Small;
use base 'Dog';
sub speak { print "Yip!\n"; }

package Dog::Retriever;
use mixin::with 'Dog';
sub fetch { print "Get your own stinking $_[1]\n" }

package Dog::Small::Retriever;
use base 'Dog::Small';
use mixin 'Dog::Retriever';

my $small_retriever = Dog::Small::Retriever->new;
$small_retriever->speak;          # Yip!
$small_retriever->fetch('ball');  # Get your own stinking ball 
```

在上面的代码中，可以有以下代码：

```
package Dog::Small::Retriever;
use base 'Dog::Small';
use mixin 'Dog::Retriever'; 
```

换成下面的？

```
package Dog::Small::Retriever;
#use base 'Dog::Small';
use mixin:with 'Dog::Retriever'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:55:12.423

看起来 mixin::with 旨在用于定义添加/更改行为的类（在您的示例中为 Dog::Small 和 Dog::Retriever），而 mixin 用于最终消费类（Dog::Small: ：猎犬）。

但还要注意，[mixin::with 的文档](https://metacpan.org/module/mixin%3a%3awith "混合::与")建议“请考虑使用特征而不是 mixin。请参阅 Class::Trait 以获取实现。” 反过来，Class::Trait 已被弃用，建议使用 Moose::Role。

哦 - 你不能跳过`use base 'Dog::Small'`声明 - 如果你这样做了，你的类将不会继承自`Dog::Small`（或`Dog`）。

# javascript - 如何让我的浏览器在不刷新的情况下显示更改？

> ID：15490994
> 
> 赞同：2
> 
> 时间：2013-03-19T03:28:43.403
> 
> 标签：javascript, jquery, ajax, xmlhttprequest, tomcat7

我设法在我的 tomcat7 网络服务器中设置了 CORS，以便能够从另一个 web 应用程序获取我的 xml 文件。我面临的问题是，如果我更改了 xml 文件的内容，当我刷新浏览器时它不会显示更改，我必须重新启动服务器才能看到更改。

我想知道如何解决它。另外，是否可以在不刷新浏览器的情况下进行更改？

```
<html>
<body>
<h1>W3Schools Internal Note</h1>
<div>
<b>To:</b> <span id="to"></span><br />
<b>From:</b> <span id="from"></span><br />
<b>Message:</b> <span id="message"></span>
</div>
<script>
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","http://localhost:8080/test-app/note.xml",true);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML;

document.getElementById("to").innerHTML=
xmlDoc.getElementsByTagName("to")[0].childNodes[0].nodeValue;
document.getElementById("from").innerHTML=
xmlDoc.getElementsByTagName("from")[0].childNodes[0].nodeValue;
document.getElementById("message").innerHTML=
xmlDoc.getElementsByTagName("body")[0].childNodes[0].nodeValue;
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:11:39.963

您正在使用 get 方法来获取 xml 数据。因此，当您对 xml 文件进行更改时，浏览器只会检索缓存版本，而不是实际从服务器下载它。浏览器的这种行为非常难以处理，尤其是在 IE 中。但是，您可以通过将唯一的时间戳 ID 附加到您发出请求的 url 来轻松解决此问题。

例如-

`http://localhost:8080/test-app/note.xml?timestamp=12345`

对于您问题的第二部分，是的，可以在无需刷新页面的情况下获取更改的 xml 数据，但为此，您需要为您的应用程序实现 ajax 长轮询或 websocket。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T03:47:37.583

如果你想完全控制元素，你可以使用 extjs 将你的 excel 加载到一个网格中。它可以刷新更改的部分而不刷新整个页面。

我没有使用CORS。但是您也可以尝试访问一个 txt 文件以查看它与缓存或 excel 相关。

# javascript - 如何修改其他人共享给我的文件，例如电子表格？

> ID：15490996
> 
> 赞同：0
> 
> 时间：2013-03-19T03:29:09.923
> 
> 标签：javascript, google-apps-script

我正在使用 Google 脚本，我使用过：

```
var file = DocsList.getFileById('XXXXXXXXXX'); 
```

但是当我运行脚本时，我得到了这个错误：

> “找不到具有给定 ID 的项目，或者您无权访问它。”

我检查了电子表格的所有者给我什么样的权限，我可以编辑它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T02:05:15.170

文档是否归域中的用户所有？（Google Apps for Business、Education 等）？如果是这样，管理员控制可能会通过策略阻止脚本访问。

类似于[Unable to make a copy of a doc even with the right ID](https://stackoverflow.com/questions/11209531/unable-to-make-a-copy-of-a-doc-even-with-the-right-id)。

# php - 是否有一种标准方法可以使用 cron 随机搜索我的数据库项目直到完成，然后在 PHP 中重置？

> ID：15490999
> 
> 赞同：0
> 
> 时间：2013-03-18T17:39:12.630
> 
> 标签：php, mysql, cron, sqlite, screen-scraping

我已经有一个使用 PHP cURL 构建的屏幕刮板，与 mySQL 数据库相关联。我存储了需要每周更新的产品，而不是我现在拥有的（我输入 url/产品并点击 go 的表单）。

我的第一个想法是每 30 分钟对这样的 PHP 文件使用标准 cron。

我想随机化两件事，PHP 脚本实际访问源站点的延迟（即 0 - 20 分钟），因此进程时间是随机的。其次，我想随机访问我的目标项目/页面，但在再次循环浏览列表之前，请确保每周和/或持续获取所有这些项目/页面。

计时器相当严格，不需要存储数据，但是我应该如何以这种方式跟踪我的项目/uri？我在想第二个 cron 来清除数据，而第一个只是增加。但是我仍然必须为已经更新的内容设置标志，而且我对选择存储这些数据的位置和方式还不够熟悉。

我正在使用带有 HTML5 选项的 mySQL，并且在 Codeigniter 上，因此也可以将 SQLite 中的数据作为选项保存。如果有意义的话，还可以与 cookie 一起保存。我在这部分有几个问题，我是每次都查询我的数据库（mySQL）以获取我需要的东西，还是每周存储一次 JSON 文件并运行它？这显然取决于和/或确定我在哪里标记已处理的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:43:31.360

您有一个要在 MySQL 数据库中抓取的项目列表。确保有最后一次抓取项目的字段。

使用此工作流程将 cron 作业设置为每分钟运行一次：

1.  确保脚本的先前运行已完成（参见步骤 #4）。如果没有，结束。
2.  检查您上次刮擦任何物品的时间。
3.  确保已经过去了足够的时间（参见步骤#9）。如果没有，结束。
4.  在某处设置一个值以表明您正在处理（因此后续运行的第 1 步是已知的）。
5.  随机选择要抓取的项目。（来自那些没有及时被刮掉的`n`。）
6.  延迟几秒钟的随机间隔，以确保所有请求并不总是在一分钟内。
7.  刮掉它。
8.  上次为该项目抓取的更新时间。
9.  在下一次操作之前设置一个随机时间等待（因此后续运行的第 3 步是已知的）。
10.  设置一个值以表明您没有处理（因此后续运行的第 1 步是已知的）。
11.  结尾。

一旦所有项目都被抓取，您可以设置一个变量来保存批次完成的时间，并将其用于`n`第 5 步。